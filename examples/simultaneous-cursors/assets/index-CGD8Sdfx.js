var Qv=Object.defineProperty;var Zv=(n,e,t)=>e in n?Qv(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var l=(n,e,t)=>Zv(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();var Pg={exports:{}},cu={},Dg={exports:{}},Y={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ha=Symbol.for("react.element"),e0=Symbol.for("react.portal"),t0=Symbol.for("react.fragment"),n0=Symbol.for("react.strict_mode"),r0=Symbol.for("react.profiler"),i0=Symbol.for("react.provider"),s0=Symbol.for("react.context"),o0=Symbol.for("react.forward_ref"),a0=Symbol.for("react.suspense"),l0=Symbol.for("react.memo"),u0=Symbol.for("react.lazy"),wh=Symbol.iterator;function c0(n){return n===null||typeof n!="object"?null:(n=wh&&n[wh]||n["@@iterator"],typeof n=="function"?n:null)}var bg={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Og=Object.assign,Lg={};function to(n,e,t){this.props=n,this.context=e,this.refs=Lg,this.updater=t||bg}to.prototype.isReactComponent={};to.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};to.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function Rg(){}Rg.prototype=to.prototype;function sd(n,e,t){this.props=n,this.context=e,this.refs=Lg,this.updater=t||bg}var od=sd.prototype=new Rg;od.constructor=sd;Og(od,to.prototype);od.isPureReactComponent=!0;var Sh=Array.isArray,Bg=Object.prototype.hasOwnProperty,ad={current:null},zg={key:!0,ref:!0,__self:!0,__source:!0};function $g(n,e,t){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Bg.call(e,r)&&!zg.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=t;else if(1<a){for(var u=Array(a),c=0;c<a;c++)u[c]=arguments[c+2];i.children=u}if(n&&n.defaultProps)for(r in a=n.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:ha,type:n,key:s,ref:o,props:i,_owner:ad.current}}function f0(n,e){return{$$typeof:ha,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function ld(n){return typeof n=="object"&&n!==null&&n.$$typeof===ha}function d0(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var kh=/\/+/g;function zu(n,e){return typeof n=="object"&&n!==null&&n.key!=null?d0(""+n.key):e.toString(36)}function Ga(n,e,t,r,i){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case ha:case e0:o=!0}}if(o)return o=n,i=i(o),n=r===""?"."+zu(o,0):r,Sh(i)?(t="",n!=null&&(t=n.replace(kh,"$&/")+"/"),Ga(i,e,t,"",function(c){return c})):i!=null&&(ld(i)&&(i=f0(i,t+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(kh,"$&/")+"/")+n)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Sh(n))for(var a=0;a<n.length;a++){s=n[a];var u=r+zu(s,a);o+=Ga(s,e,t,u,i)}else if(u=c0(n),typeof u=="function")for(n=u.call(n),a=0;!(s=n.next()).done;)s=s.value,u=r+zu(s,a++),o+=Ga(s,e,t,u,i);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function xa(n,e,t){if(n==null)return n;var r=[],i=0;return Ga(n,r,"","",function(s){return e.call(t,s,i++)}),r}function h0(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Ve={current:null},Ya={transition:null},m0={ReactCurrentDispatcher:Ve,ReactCurrentBatchConfig:Ya,ReactCurrentOwner:ad};Y.Children={map:xa,forEach:function(n,e,t){xa(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return xa(n,function(){e++}),e},toArray:function(n){return xa(n,function(e){return e})||[]},only:function(n){if(!ld(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};Y.Component=to;Y.Fragment=t0;Y.Profiler=r0;Y.PureComponent=sd;Y.StrictMode=n0;Y.Suspense=a0;Y.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=m0;Y.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=Og({},n.props),i=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=ad.current),e.key!==void 0&&(i=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(u in e)Bg.call(e,u)&&!zg.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&a!==void 0?a[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=t;else if(1<u){a=Array(u);for(var c=0;c<u;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:ha,type:n.type,key:i,ref:s,props:r,_owner:o}};Y.createContext=function(n){return n={$$typeof:s0,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:i0,_context:n},n.Consumer=n};Y.createElement=$g;Y.createFactory=function(n){var e=$g.bind(null,n);return e.type=n,e};Y.createRef=function(){return{current:null}};Y.forwardRef=function(n){return{$$typeof:o0,render:n}};Y.isValidElement=ld;Y.lazy=function(n){return{$$typeof:u0,_payload:{_status:-1,_result:n},_init:h0}};Y.memo=function(n,e){return{$$typeof:l0,type:n,compare:e===void 0?null:e}};Y.startTransition=function(n){var e=Ya.transition;Ya.transition={};try{n()}finally{Ya.transition=e}};Y.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Y.useCallback=function(n,e){return Ve.current.useCallback(n,e)};Y.useContext=function(n){return Ve.current.useContext(n)};Y.useDebugValue=function(){};Y.useDeferredValue=function(n){return Ve.current.useDeferredValue(n)};Y.useEffect=function(n,e){return Ve.current.useEffect(n,e)};Y.useId=function(){return Ve.current.useId()};Y.useImperativeHandle=function(n,e,t){return Ve.current.useImperativeHandle(n,e,t)};Y.useInsertionEffect=function(n,e){return Ve.current.useInsertionEffect(n,e)};Y.useLayoutEffect=function(n,e){return Ve.current.useLayoutEffect(n,e)};Y.useMemo=function(n,e){return Ve.current.useMemo(n,e)};Y.useReducer=function(n,e,t){return Ve.current.useReducer(n,e,t)};Y.useRef=function(n){return Ve.current.useRef(n)};Y.useState=function(n){return Ve.current.useState(n)};Y.useSyncExternalStore=function(n,e,t){return Ve.current.useSyncExternalStore(n,e,t)};Y.useTransition=function(){return Ve.current.useTransition()};Y.version="18.2.0";Dg.exports=Y;var j=Dg.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g0=j,p0=Symbol.for("react.element"),y0=Symbol.for("react.fragment"),v0=Object.prototype.hasOwnProperty,w0=g0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,S0={key:!0,ref:!0,__self:!0,__source:!0};function Jg(n,e,t){var r,i={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)v0.call(e,r)&&!S0.hasOwnProperty(r)&&(i[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:p0,type:n,key:s,ref:o,props:i,_owner:w0.current}}cu.Fragment=y0;cu.jsx=Jg;cu.jsxs=Jg;Pg.exports=cu;var z=Pg.exports,pc={},Mg={exports:{}},ct={},Fg={exports:{}},Ug={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(R,V){var K=R.length;R.push(V);e:for(;0<K;){var pe=K-1>>>1,xe=R[pe];if(0<i(xe,V))R[pe]=V,R[K]=xe,K=pe;else break e}}function t(R){return R.length===0?null:R[0]}function r(R){if(R.length===0)return null;var V=R[0],K=R.pop();if(K!==V){R[0]=K;e:for(var pe=0,xe=R.length,Ta=xe>>>1;pe<Ta;){var zi=2*(pe+1)-1,Bu=R[zi],$i=zi+1,Ia=R[$i];if(0>i(Bu,K))$i<xe&&0>i(Ia,Bu)?(R[pe]=Ia,R[$i]=K,pe=$i):(R[pe]=Bu,R[zi]=K,pe=zi);else if($i<xe&&0>i(Ia,K))R[pe]=Ia,R[$i]=K,pe=$i;else break e}}return V}function i(R,V){var K=R.sortIndex-V.sortIndex;return K!==0?K:R.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var u=[],c=[],d=1,h=null,m=3,p=!1,w=!1,v=!1,A=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(R){for(var V=t(c);V!==null;){if(V.callback===null)r(c);else if(V.startTime<=R)r(c),V.sortIndex=V.expirationTime,e(u,V);else break;V=t(c)}}function I(R){if(v=!1,S(R),!w)if(t(u)!==null)w=!0,io(N);else{var V=t(c);V!==null&&so(I,V.startTime-R)}}function N(R,V){w=!1,v&&(v=!1,y(O),O=-1),p=!0;var K=m;try{for(S(V),h=t(u);h!==null&&(!(h.expirationTime>V)||R&&!ge());){var pe=h.callback;if(typeof pe=="function"){h.callback=null,m=h.priorityLevel;var xe=pe(h.expirationTime<=V);V=n.unstable_now(),typeof xe=="function"?h.callback=xe:h===t(u)&&r(u),S(V)}else r(u);h=t(u)}if(h!==null)var Ta=!0;else{var zi=t(c);zi!==null&&so(I,zi.startTime-V),Ta=!1}return Ta}finally{h=null,m=K,p=!1}}var x=!1,C=null,O=-1,$=5,F=-1;function ge(){return!(n.unstable_now()-F<$)}function tt(){if(C!==null){var R=n.unstable_now();F=R;var V=!0;try{V=C(!0,R)}finally{V?Pe():(x=!1,C=null)}}else x=!1}var Pe;if(typeof g=="function")Pe=function(){g(tt)};else if(typeof MessageChannel<"u"){var Bi=new MessageChannel,Ru=Bi.port2;Bi.port1.onmessage=tt,Pe=function(){Ru.postMessage(null)}}else Pe=function(){A(tt,0)};function io(R){C=R,x||(x=!0,Pe())}function so(R,V){O=A(function(){R(n.unstable_now())},V)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(R){R.callback=null},n.unstable_continueExecution=function(){w||p||(w=!0,io(N))},n.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<R?Math.floor(1e3/R):5},n.unstable_getCurrentPriorityLevel=function(){return m},n.unstable_getFirstCallbackNode=function(){return t(u)},n.unstable_next=function(R){switch(m){case 1:case 2:case 3:var V=3;break;default:V=m}var K=m;m=V;try{return R()}finally{m=K}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(R,V){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var K=m;m=R;try{return V()}finally{m=K}},n.unstable_scheduleCallback=function(R,V,K){var pe=n.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?pe+K:pe):K=pe,R){case 1:var xe=-1;break;case 2:xe=250;break;case 5:xe=1073741823;break;case 4:xe=1e4;break;default:xe=5e3}return xe=K+xe,R={id:d++,callback:V,priorityLevel:R,startTime:K,expirationTime:xe,sortIndex:-1},K>pe?(R.sortIndex=K,e(c,R),t(u)===null&&R===t(c)&&(v?(y(O),O=-1):v=!0,so(I,K-pe))):(R.sortIndex=xe,e(u,R),w||p||(w=!0,io(N))),R},n.unstable_shouldYield=ge,n.unstable_wrapCallback=function(R){var V=m;return function(){var K=m;m=V;try{return R.apply(this,arguments)}finally{m=K}}}})(Ug);Fg.exports=Ug;var k0=Fg.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jg=j,at=k0;function b(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var qg=new Set,Uo={};function is(n,e){Bs(n,e),Bs(n+"Capture",e)}function Bs(n,e){for(Uo[n]=e,n=0;n<e.length;n++)qg.add(e[n])}var Xr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),yc=Object.prototype.hasOwnProperty,T0=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Th={},Ih={};function I0(n){return yc.call(Ih,n)?!0:yc.call(Th,n)?!1:T0.test(n)?Ih[n]=!0:(Th[n]=!0,!1)}function x0(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function A0(n,e,t,r){if(e===null||typeof e>"u"||x0(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ke(n,e,t,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Re={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Re[n]=new Ke(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];Re[e]=new Ke(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){Re[n]=new Ke(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Re[n]=new Ke(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Re[n]=new Ke(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){Re[n]=new Ke(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){Re[n]=new Ke(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){Re[n]=new Ke(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){Re[n]=new Ke(n,5,!1,n.toLowerCase(),null,!1,!1)});var ud=/[\-:]([a-z])/g;function cd(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(ud,cd);Re[e]=new Ke(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(ud,cd);Re[e]=new Ke(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(ud,cd);Re[e]=new Ke(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){Re[n]=new Ke(n,1,!1,n.toLowerCase(),null,!1,!1)});Re.xlinkHref=new Ke("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){Re[n]=new Ke(n,1,!1,n.toLowerCase(),null,!0,!0)});function fd(n,e,t,r){var i=Re.hasOwnProperty(e)?Re[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(A0(e,t,i,r)&&(t=null),r||i===null?I0(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):i.mustUseProperty?n[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,r=i.attributeNamespace,t===null?n.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var ri=jg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Aa=Symbol.for("react.element"),hs=Symbol.for("react.portal"),ms=Symbol.for("react.fragment"),dd=Symbol.for("react.strict_mode"),vc=Symbol.for("react.profiler"),Vg=Symbol.for("react.provider"),Kg=Symbol.for("react.context"),hd=Symbol.for("react.forward_ref"),wc=Symbol.for("react.suspense"),Sc=Symbol.for("react.suspense_list"),md=Symbol.for("react.memo"),ui=Symbol.for("react.lazy"),Wg=Symbol.for("react.offscreen"),xh=Symbol.iterator;function oo(n){return n===null||typeof n!="object"?null:(n=xh&&n[xh]||n["@@iterator"],typeof n=="function"?n:null)}var fe=Object.assign,$u;function vo(n){if($u===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);$u=e&&e[1]||""}return`
`+$u+n}var Ju=!1;function Mu(n,e){if(!n||Ju)return"";Ju=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){r=c}n.call(e.prototype)}else{try{throw Error()}catch(c){r=c}n()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var u=`
`+i[o].replace(" at new "," at ");return n.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",n.displayName)),u}while(1<=o&&0<=a);break}}}finally{Ju=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?vo(n):""}function E0(n){switch(n.tag){case 5:return vo(n.type);case 16:return vo("Lazy");case 13:return vo("Suspense");case 19:return vo("SuspenseList");case 0:case 2:case 15:return n=Mu(n.type,!1),n;case 11:return n=Mu(n.type.render,!1),n;case 1:return n=Mu(n.type,!0),n;default:return""}}function kc(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case ms:return"Fragment";case hs:return"Portal";case vc:return"Profiler";case dd:return"StrictMode";case wc:return"Suspense";case Sc:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case Kg:return(n.displayName||"Context")+".Consumer";case Vg:return(n._context.displayName||"Context")+".Provider";case hd:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case md:return e=n.displayName||null,e!==null?e:kc(n.type)||"Memo";case ui:e=n._payload,n=n._init;try{return kc(n(e))}catch{}}return null}function C0(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return kc(e);case 8:return e===dd?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ni(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Hg(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function N0(n){var e=Hg(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function Ea(n){n._valueTracker||(n._valueTracker=N0(n))}function Gg(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=Hg(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function dl(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Tc(n,e){var t=e.checked;return fe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function Ah(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=Ni(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Yg(n,e){e=e.checked,e!=null&&fd(n,"checked",e,!1)}function Ic(n,e){Yg(n,e);var t=Ni(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?xc(n,e.type,t):e.hasOwnProperty("defaultValue")&&xc(n,e.type,Ni(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function Eh(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function xc(n,e,t){(e!=="number"||dl(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var wo=Array.isArray;function Cs(n,e,t,r){if(n=n.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<n.length;t++)i=e.hasOwnProperty("$"+n[t].value),n[t].selected!==i&&(n[t].selected=i),i&&r&&(n[t].defaultSelected=!0)}else{for(t=""+Ni(t),e=null,i=0;i<n.length;i++){if(n[i].value===t){n[i].selected=!0,r&&(n[i].defaultSelected=!0);return}e!==null||n[i].disabled||(e=n[i])}e!==null&&(e.selected=!0)}}function Ac(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(b(91));return fe({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Ch(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(b(92));if(wo(t)){if(1<t.length)throw Error(b(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:Ni(t)}}function _g(n,e){var t=Ni(e.value),r=Ni(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function Nh(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function Xg(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ec(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?Xg(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Ca,Qg=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,i){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,i)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(Ca=Ca||document.createElement("div"),Ca.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ca.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function jo(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var Ao={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},P0=["Webkit","ms","Moz","O"];Object.keys(Ao).forEach(function(n){P0.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),Ao[e]=Ao[n]})});function Zg(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Ao.hasOwnProperty(n)&&Ao[n]?(""+e).trim():e+"px"}function ep(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,i=Zg(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,i):n[t]=i}}var D0=fe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Cc(n,e){if(e){if(D0[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(b(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(b(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(b(61))}if(e.style!=null&&typeof e.style!="object")throw Error(b(62))}}function Nc(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Pc=null;function gd(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Dc=null,Ns=null,Ps=null;function Ph(n){if(n=pa(n)){if(typeof Dc!="function")throw Error(b(280));var e=n.stateNode;e&&(e=gu(e),Dc(n.stateNode,n.type,e))}}function tp(n){Ns?Ps?Ps.push(n):Ps=[n]:Ns=n}function np(){if(Ns){var n=Ns,e=Ps;if(Ps=Ns=null,Ph(n),e)for(n=0;n<e.length;n++)Ph(e[n])}}function rp(n,e){return n(e)}function ip(){}var Fu=!1;function sp(n,e,t){if(Fu)return n(e,t);Fu=!0;try{return rp(n,e,t)}finally{Fu=!1,(Ns!==null||Ps!==null)&&(ip(),np())}}function qo(n,e){var t=n.stateNode;if(t===null)return null;var r=gu(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(b(231,e,typeof t));return t}var bc=!1;if(Xr)try{var ao={};Object.defineProperty(ao,"passive",{get:function(){bc=!0}}),window.addEventListener("test",ao,ao),window.removeEventListener("test",ao,ao)}catch{bc=!1}function b0(n,e,t,r,i,s,o,a,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(d){this.onError(d)}}var Eo=!1,hl=null,ml=!1,Oc=null,O0={onError:function(n){Eo=!0,hl=n}};function L0(n,e,t,r,i,s,o,a,u){Eo=!1,hl=null,b0.apply(O0,arguments)}function R0(n,e,t,r,i,s,o,a,u){if(L0.apply(this,arguments),Eo){if(Eo){var c=hl;Eo=!1,hl=null}else throw Error(b(198));ml||(ml=!0,Oc=c)}}function ss(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function op(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function Dh(n){if(ss(n)!==n)throw Error(b(188))}function B0(n){var e=n.alternate;if(!e){if(e=ss(n),e===null)throw Error(b(188));return e!==n?null:n}for(var t=n,r=e;;){var i=t.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){t=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===t)return Dh(i),n;if(s===r)return Dh(i),e;s=s.sibling}throw Error(b(188))}if(t.return!==r.return)t=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===t){o=!0,t=i,r=s;break}if(a===r){o=!0,r=i,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,r=i;break}if(a===r){o=!0,r=s,t=i;break}a=a.sibling}if(!o)throw Error(b(189))}}if(t.alternate!==r)throw Error(b(190))}if(t.tag!==3)throw Error(b(188));return t.stateNode.current===t?n:e}function ap(n){return n=B0(n),n!==null?lp(n):null}function lp(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=lp(n);if(e!==null)return e;n=n.sibling}return null}var up=at.unstable_scheduleCallback,bh=at.unstable_cancelCallback,z0=at.unstable_shouldYield,$0=at.unstable_requestPaint,ve=at.unstable_now,J0=at.unstable_getCurrentPriorityLevel,pd=at.unstable_ImmediatePriority,cp=at.unstable_UserBlockingPriority,gl=at.unstable_NormalPriority,M0=at.unstable_LowPriority,fp=at.unstable_IdlePriority,fu=null,an=null;function F0(n){if(an&&typeof an.onCommitFiberRoot=="function")try{an.onCommitFiberRoot(fu,n,void 0,(n.current.flags&128)===128)}catch{}}var Vt=Math.clz32?Math.clz32:q0,U0=Math.log,j0=Math.LN2;function q0(n){return n>>>=0,n===0?32:31-(U0(n)/j0|0)|0}var Na=64,Pa=4194304;function So(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function pl(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,i=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~i;a!==0?r=So(a):(s&=o,s!==0&&(r=So(s)))}else o=t&~i,o!==0?r=So(o):s!==0&&(r=So(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-Vt(e),i=1<<t,r|=n[t],e&=~i;return r}function V0(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function K0(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,i=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-Vt(s),a=1<<o,u=i[o];u===-1?(!(a&t)||a&r)&&(i[o]=V0(a,e)):u<=e&&(n.expiredLanes|=a),s&=~a}}function Lc(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function dp(){var n=Na;return Na<<=1,!(Na&4194240)&&(Na=64),n}function Uu(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function ma(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-Vt(e),n[e]=t}function W0(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var i=31-Vt(t),s=1<<i;e[i]=0,r[i]=-1,n[i]=-1,t&=~s}}function yd(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-Vt(t),i=1<<r;i&e|n[r]&e&&(n[r]|=e),t&=~i}}var Z=0;function hp(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var mp,vd,gp,pp,yp,Rc=!1,Da=[],yi=null,vi=null,wi=null,Vo=new Map,Ko=new Map,fi=[],H0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Oh(n,e){switch(n){case"focusin":case"focusout":yi=null;break;case"dragenter":case"dragleave":vi=null;break;case"mouseover":case"mouseout":wi=null;break;case"pointerover":case"pointerout":Vo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ko.delete(e.pointerId)}}function lo(n,e,t,r,i,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=pa(e),e!==null&&vd(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),n)}function G0(n,e,t,r,i){switch(e){case"focusin":return yi=lo(yi,n,e,t,r,i),!0;case"dragenter":return vi=lo(vi,n,e,t,r,i),!0;case"mouseover":return wi=lo(wi,n,e,t,r,i),!0;case"pointerover":var s=i.pointerId;return Vo.set(s,lo(Vo.get(s)||null,n,e,t,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Ko.set(s,lo(Ko.get(s)||null,n,e,t,r,i)),!0}return!1}function vp(n){var e=ji(n.target);if(e!==null){var t=ss(e);if(t!==null){if(e=t.tag,e===13){if(e=op(t),e!==null){n.blockedOn=e,yp(n.priority,function(){gp(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function _a(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=Bc(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);Pc=r,t.target.dispatchEvent(r),Pc=null}else return e=pa(t),e!==null&&vd(e),n.blockedOn=t,!1;e.shift()}return!0}function Lh(n,e,t){_a(n)&&t.delete(e)}function Y0(){Rc=!1,yi!==null&&_a(yi)&&(yi=null),vi!==null&&_a(vi)&&(vi=null),wi!==null&&_a(wi)&&(wi=null),Vo.forEach(Lh),Ko.forEach(Lh)}function uo(n,e){n.blockedOn===e&&(n.blockedOn=null,Rc||(Rc=!0,at.unstable_scheduleCallback(at.unstable_NormalPriority,Y0)))}function Wo(n){function e(i){return uo(i,n)}if(0<Da.length){uo(Da[0],n);for(var t=1;t<Da.length;t++){var r=Da[t];r.blockedOn===n&&(r.blockedOn=null)}}for(yi!==null&&uo(yi,n),vi!==null&&uo(vi,n),wi!==null&&uo(wi,n),Vo.forEach(e),Ko.forEach(e),t=0;t<fi.length;t++)r=fi[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<fi.length&&(t=fi[0],t.blockedOn===null);)vp(t),t.blockedOn===null&&fi.shift()}var Ds=ri.ReactCurrentBatchConfig,yl=!0;function _0(n,e,t,r){var i=Z,s=Ds.transition;Ds.transition=null;try{Z=1,wd(n,e,t,r)}finally{Z=i,Ds.transition=s}}function X0(n,e,t,r){var i=Z,s=Ds.transition;Ds.transition=null;try{Z=4,wd(n,e,t,r)}finally{Z=i,Ds.transition=s}}function wd(n,e,t,r){if(yl){var i=Bc(n,e,t,r);if(i===null)Xu(n,e,r,vl,t),Oh(n,r);else if(G0(i,n,e,t,r))r.stopPropagation();else if(Oh(n,r),e&4&&-1<H0.indexOf(n)){for(;i!==null;){var s=pa(i);if(s!==null&&mp(s),s=Bc(n,e,t,r),s===null&&Xu(n,e,r,vl,t),s===i)break;i=s}i!==null&&r.stopPropagation()}else Xu(n,e,r,null,t)}}var vl=null;function Bc(n,e,t,r){if(vl=null,n=gd(r),n=ji(n),n!==null)if(e=ss(n),e===null)n=null;else if(t=e.tag,t===13){if(n=op(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return vl=n,null}function wp(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(J0()){case pd:return 1;case cp:return 4;case gl:case M0:return 16;case fp:return 536870912;default:return 16}default:return 16}}var mi=null,Sd=null,Xa=null;function Sp(){if(Xa)return Xa;var n,e=Sd,t=e.length,r,i="value"in mi?mi.value:mi.textContent,s=i.length;for(n=0;n<t&&e[n]===i[n];n++);var o=t-n;for(r=1;r<=o&&e[t-r]===i[s-r];r++);return Xa=i.slice(n,1<r?1-r:void 0)}function Qa(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function ba(){return!0}function Rh(){return!1}function ft(n){function e(t,r,i,s,o){this._reactName=t,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?ba:Rh,this.isPropagationStopped=Rh,this}return fe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=ba)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=ba)},persist:function(){},isPersistent:ba}),e}var no={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},kd=ft(no),ga=fe({},no,{view:0,detail:0}),Q0=ft(ga),ju,qu,co,du=fe({},ga,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Td,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==co&&(co&&n.type==="mousemove"?(ju=n.screenX-co.screenX,qu=n.screenY-co.screenY):qu=ju=0,co=n),ju)},movementY:function(n){return"movementY"in n?n.movementY:qu}}),Bh=ft(du),Z0=fe({},du,{dataTransfer:0}),ew=ft(Z0),tw=fe({},ga,{relatedTarget:0}),Vu=ft(tw),nw=fe({},no,{animationName:0,elapsedTime:0,pseudoElement:0}),rw=ft(nw),iw=fe({},no,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),sw=ft(iw),ow=fe({},no,{data:0}),zh=ft(ow),aw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},lw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},uw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cw(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=uw[n])?!!e[n]:!1}function Td(){return cw}var fw=fe({},ga,{key:function(n){if(n.key){var e=aw[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=Qa(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?lw[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Td,charCode:function(n){return n.type==="keypress"?Qa(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Qa(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),dw=ft(fw),hw=fe({},du,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$h=ft(hw),mw=fe({},ga,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Td}),gw=ft(mw),pw=fe({},no,{propertyName:0,elapsedTime:0,pseudoElement:0}),yw=ft(pw),vw=fe({},du,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),ww=ft(vw),Sw=[9,13,27,32],Id=Xr&&"CompositionEvent"in window,Co=null;Xr&&"documentMode"in document&&(Co=document.documentMode);var kw=Xr&&"TextEvent"in window&&!Co,kp=Xr&&(!Id||Co&&8<Co&&11>=Co),Jh=" ",Mh=!1;function Tp(n,e){switch(n){case"keyup":return Sw.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ip(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var gs=!1;function Tw(n,e){switch(n){case"compositionend":return Ip(e);case"keypress":return e.which!==32?null:(Mh=!0,Jh);case"textInput":return n=e.data,n===Jh&&Mh?null:n;default:return null}}function Iw(n,e){if(gs)return n==="compositionend"||!Id&&Tp(n,e)?(n=Sp(),Xa=Sd=mi=null,gs=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return kp&&e.locale!=="ko"?null:e.data;default:return null}}var xw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fh(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!xw[n.type]:e==="textarea"}function xp(n,e,t,r){tp(r),e=wl(e,"onChange"),0<e.length&&(t=new kd("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var No=null,Ho=null;function Aw(n){Bp(n,0)}function hu(n){var e=vs(n);if(Gg(e))return n}function Ew(n,e){if(n==="change")return e}var Ap=!1;if(Xr){var Ku;if(Xr){var Wu="oninput"in document;if(!Wu){var Uh=document.createElement("div");Uh.setAttribute("oninput","return;"),Wu=typeof Uh.oninput=="function"}Ku=Wu}else Ku=!1;Ap=Ku&&(!document.documentMode||9<document.documentMode)}function jh(){No&&(No.detachEvent("onpropertychange",Ep),Ho=No=null)}function Ep(n){if(n.propertyName==="value"&&hu(Ho)){var e=[];xp(e,Ho,n,gd(n)),sp(Aw,e)}}function Cw(n,e,t){n==="focusin"?(jh(),No=e,Ho=t,No.attachEvent("onpropertychange",Ep)):n==="focusout"&&jh()}function Nw(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return hu(Ho)}function Pw(n,e){if(n==="click")return hu(e)}function Dw(n,e){if(n==="input"||n==="change")return hu(e)}function bw(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Ht=typeof Object.is=="function"?Object.is:bw;function Go(n,e){if(Ht(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var i=t[r];if(!yc.call(e,i)||!Ht(n[i],e[i]))return!1}return!0}function qh(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Vh(n,e){var t=qh(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=qh(t)}}function Cp(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?Cp(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function Np(){for(var n=window,e=dl();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=dl(n.document)}return e}function xd(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function Ow(n){var e=Np(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&Cp(t.ownerDocument.documentElement,t)){if(r!==null&&xd(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var i=t.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!n.extend&&s>r&&(i=r,r=s,s=i),i=Vh(t,s);var o=Vh(t,r);i&&o&&(n.rangeCount!==1||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),n.removeAllRanges(),s>r?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Lw=Xr&&"documentMode"in document&&11>=document.documentMode,ps=null,zc=null,Po=null,$c=!1;function Kh(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;$c||ps==null||ps!==dl(r)||(r=ps,"selectionStart"in r&&xd(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Po&&Go(Po,r)||(Po=r,r=wl(zc,"onSelect"),0<r.length&&(e=new kd("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=ps)))}function Oa(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var ys={animationend:Oa("Animation","AnimationEnd"),animationiteration:Oa("Animation","AnimationIteration"),animationstart:Oa("Animation","AnimationStart"),transitionend:Oa("Transition","TransitionEnd")},Hu={},Pp={};Xr&&(Pp=document.createElement("div").style,"AnimationEvent"in window||(delete ys.animationend.animation,delete ys.animationiteration.animation,delete ys.animationstart.animation),"TransitionEvent"in window||delete ys.transitionend.transition);function mu(n){if(Hu[n])return Hu[n];if(!ys[n])return n;var e=ys[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in Pp)return Hu[n]=e[t];return n}var Dp=mu("animationend"),bp=mu("animationiteration"),Op=mu("animationstart"),Lp=mu("transitionend"),Rp=new Map,Wh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function bi(n,e){Rp.set(n,e),is(e,[n])}for(var Gu=0;Gu<Wh.length;Gu++){var Yu=Wh[Gu],Rw=Yu.toLowerCase(),Bw=Yu[0].toUpperCase()+Yu.slice(1);bi(Rw,"on"+Bw)}bi(Dp,"onAnimationEnd");bi(bp,"onAnimationIteration");bi(Op,"onAnimationStart");bi("dblclick","onDoubleClick");bi("focusin","onFocus");bi("focusout","onBlur");bi(Lp,"onTransitionEnd");Bs("onMouseEnter",["mouseout","mouseover"]);Bs("onMouseLeave",["mouseout","mouseover"]);Bs("onPointerEnter",["pointerout","pointerover"]);Bs("onPointerLeave",["pointerout","pointerover"]);is("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));is("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));is("onBeforeInput",["compositionend","keypress","textInput","paste"]);is("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));is("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));is("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ko="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zw=new Set("cancel close invalid load scroll toggle".split(" ").concat(ko));function Hh(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,R0(r,e,void 0,n),n.currentTarget=null}function Bp(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,c=a.currentTarget;if(a=a.listener,u!==s&&i.isPropagationStopped())break e;Hh(i,a,c),s=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,c=a.currentTarget,a=a.listener,u!==s&&i.isPropagationStopped())break e;Hh(i,a,c),s=u}}}if(ml)throw n=Oc,ml=!1,Oc=null,n}function re(n,e){var t=e[jc];t===void 0&&(t=e[jc]=new Set);var r=n+"__bubble";t.has(r)||(zp(e,n,2,!1),t.add(r))}function _u(n,e,t){var r=0;e&&(r|=4),zp(t,n,r,e)}var La="_reactListening"+Math.random().toString(36).slice(2);function Yo(n){if(!n[La]){n[La]=!0,qg.forEach(function(t){t!=="selectionchange"&&(zw.has(t)||_u(t,!1,n),_u(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[La]||(e[La]=!0,_u("selectionchange",!1,e))}}function zp(n,e,t,r){switch(wp(e)){case 1:var i=_0;break;case 4:i=X0;break;default:i=wd}t=i.bind(null,e,t,n),i=void 0,!bc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?n.addEventListener(e,t,{capture:!0,passive:i}):n.addEventListener(e,t,!0):i!==void 0?n.addEventListener(e,t,{passive:i}):n.addEventListener(e,t,!1)}function Xu(n,e,t,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;a!==null;){if(o=ji(a),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}a=a.parentNode}}r=r.return}sp(function(){var c=s,d=gd(t),h=[];e:{var m=Rp.get(n);if(m!==void 0){var p=kd,w=n;switch(n){case"keypress":if(Qa(t)===0)break e;case"keydown":case"keyup":p=dw;break;case"focusin":w="focus",p=Vu;break;case"focusout":w="blur",p=Vu;break;case"beforeblur":case"afterblur":p=Vu;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=Bh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=ew;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=gw;break;case Dp:case bp:case Op:p=rw;break;case Lp:p=yw;break;case"scroll":p=Q0;break;case"wheel":p=ww;break;case"copy":case"cut":case"paste":p=sw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=$h}var v=(e&4)!==0,A=!v&&n==="scroll",y=v?m!==null?m+"Capture":null:m;v=[];for(var g=c,S;g!==null;){S=g;var I=S.stateNode;if(S.tag===5&&I!==null&&(S=I,y!==null&&(I=qo(g,y),I!=null&&v.push(_o(g,I,S)))),A)break;g=g.return}0<v.length&&(m=new p(m,w,null,t,d),h.push({event:m,listeners:v}))}}if(!(e&7)){e:{if(m=n==="mouseover"||n==="pointerover",p=n==="mouseout"||n==="pointerout",m&&t!==Pc&&(w=t.relatedTarget||t.fromElement)&&(ji(w)||w[Qr]))break e;if((p||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,p?(w=t.relatedTarget||t.toElement,p=c,w=w?ji(w):null,w!==null&&(A=ss(w),w!==A||w.tag!==5&&w.tag!==6)&&(w=null)):(p=null,w=c),p!==w)){if(v=Bh,I="onMouseLeave",y="onMouseEnter",g="mouse",(n==="pointerout"||n==="pointerover")&&(v=$h,I="onPointerLeave",y="onPointerEnter",g="pointer"),A=p==null?m:vs(p),S=w==null?m:vs(w),m=new v(I,g+"leave",p,t,d),m.target=A,m.relatedTarget=S,I=null,ji(d)===c&&(v=new v(y,g+"enter",w,t,d),v.target=S,v.relatedTarget=A,I=v),A=I,p&&w)t:{for(v=p,y=w,g=0,S=v;S;S=as(S))g++;for(S=0,I=y;I;I=as(I))S++;for(;0<g-S;)v=as(v),g--;for(;0<S-g;)y=as(y),S--;for(;g--;){if(v===y||y!==null&&v===y.alternate)break t;v=as(v),y=as(y)}v=null}else v=null;p!==null&&Gh(h,m,p,v,!1),w!==null&&A!==null&&Gh(h,A,w,v,!0)}}e:{if(m=c?vs(c):window,p=m.nodeName&&m.nodeName.toLowerCase(),p==="select"||p==="input"&&m.type==="file")var N=Ew;else if(Fh(m))if(Ap)N=Dw;else{N=Nw;var x=Cw}else(p=m.nodeName)&&p.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(N=Pw);if(N&&(N=N(n,c))){xp(h,N,t,d);break e}x&&x(n,m,c),n==="focusout"&&(x=m._wrapperState)&&x.controlled&&m.type==="number"&&xc(m,"number",m.value)}switch(x=c?vs(c):window,n){case"focusin":(Fh(x)||x.contentEditable==="true")&&(ps=x,zc=c,Po=null);break;case"focusout":Po=zc=ps=null;break;case"mousedown":$c=!0;break;case"contextmenu":case"mouseup":case"dragend":$c=!1,Kh(h,t,d);break;case"selectionchange":if(Lw)break;case"keydown":case"keyup":Kh(h,t,d)}var C;if(Id)e:{switch(n){case"compositionstart":var O="onCompositionStart";break e;case"compositionend":O="onCompositionEnd";break e;case"compositionupdate":O="onCompositionUpdate";break e}O=void 0}else gs?Tp(n,t)&&(O="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(O="onCompositionStart");O&&(kp&&t.locale!=="ko"&&(gs||O!=="onCompositionStart"?O==="onCompositionEnd"&&gs&&(C=Sp()):(mi=d,Sd="value"in mi?mi.value:mi.textContent,gs=!0)),x=wl(c,O),0<x.length&&(O=new zh(O,n,null,t,d),h.push({event:O,listeners:x}),C?O.data=C:(C=Ip(t),C!==null&&(O.data=C)))),(C=kw?Tw(n,t):Iw(n,t))&&(c=wl(c,"onBeforeInput"),0<c.length&&(d=new zh("onBeforeInput","beforeinput",null,t,d),h.push({event:d,listeners:c}),d.data=C))}Bp(h,e)})}function _o(n,e,t){return{instance:n,listener:e,currentTarget:t}}function wl(n,e){for(var t=e+"Capture",r=[];n!==null;){var i=n,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=qo(n,t),s!=null&&r.unshift(_o(n,s,i)),s=qo(n,e),s!=null&&r.push(_o(n,s,i))),n=n.return}return r}function as(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Gh(n,e,t,r,i){for(var s=e._reactName,o=[];t!==null&&t!==r;){var a=t,u=a.alternate,c=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&c!==null&&(a=c,i?(u=qo(t,s),u!=null&&o.unshift(_o(t,u,a))):i||(u=qo(t,s),u!=null&&o.push(_o(t,u,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var $w=/\r\n?/g,Jw=/\u0000|\uFFFD/g;function Yh(n){return(typeof n=="string"?n:""+n).replace($w,`
`).replace(Jw,"")}function Ra(n,e,t){if(e=Yh(e),Yh(n)!==e&&t)throw Error(b(425))}function Sl(){}var Jc=null,Mc=null;function Fc(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Uc=typeof setTimeout=="function"?setTimeout:void 0,Mw=typeof clearTimeout=="function"?clearTimeout:void 0,_h=typeof Promise=="function"?Promise:void 0,Fw=typeof queueMicrotask=="function"?queueMicrotask:typeof _h<"u"?function(n){return _h.resolve(null).then(n).catch(Uw)}:Uc;function Uw(n){setTimeout(function(){throw n})}function Qu(n,e){var t=e,r=0;do{var i=t.nextSibling;if(n.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(r===0){n.removeChild(i),Wo(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=i}while(t);Wo(e)}function Si(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function Xh(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var ro=Math.random().toString(36).slice(2),Zt="__reactFiber$"+ro,Xo="__reactProps$"+ro,Qr="__reactContainer$"+ro,jc="__reactEvents$"+ro,jw="__reactListeners$"+ro,qw="__reactHandles$"+ro;function ji(n){var e=n[Zt];if(e)return e;for(var t=n.parentNode;t;){if(e=t[Qr]||t[Zt]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=Xh(n);n!==null;){if(t=n[Zt])return t;n=Xh(n)}return e}n=t,t=n.parentNode}return null}function pa(n){return n=n[Zt]||n[Qr],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function vs(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(b(33))}function gu(n){return n[Xo]||null}var qc=[],ws=-1;function Oi(n){return{current:n}}function ie(n){0>ws||(n.current=qc[ws],qc[ws]=null,ws--)}function ne(n,e){ws++,qc[ws]=n.current,n.current=e}var Pi={},Fe=Oi(Pi),_e=Oi(!1),Yi=Pi;function zs(n,e){var t=n.type.contextTypes;if(!t)return Pi;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in t)i[s]=e[s];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=i),i}function Xe(n){return n=n.childContextTypes,n!=null}function kl(){ie(_e),ie(Fe)}function Qh(n,e,t){if(Fe.current!==Pi)throw Error(b(168));ne(Fe,e),ne(_e,t)}function $p(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(b(108,C0(n)||"Unknown",i));return fe({},t,r)}function Tl(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Pi,Yi=Fe.current,ne(Fe,n),ne(_e,_e.current),!0}function Zh(n,e,t){var r=n.stateNode;if(!r)throw Error(b(169));t?(n=$p(n,e,Yi),r.__reactInternalMemoizedMergedChildContext=n,ie(_e),ie(Fe),ne(Fe,n)):ie(_e),ne(_e,t)}var Fr=null,pu=!1,Zu=!1;function Jp(n){Fr===null?Fr=[n]:Fr.push(n)}function Vw(n){pu=!0,Jp(n)}function Li(){if(!Zu&&Fr!==null){Zu=!0;var n=0,e=Z;try{var t=Fr;for(Z=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}Fr=null,pu=!1}catch(i){throw Fr!==null&&(Fr=Fr.slice(n+1)),up(pd,Li),i}finally{Z=e,Zu=!1}}return null}var Ss=[],ks=0,Il=null,xl=0,dt=[],ht=0,_i=null,qr=1,Vr="";function Ji(n,e){Ss[ks++]=xl,Ss[ks++]=Il,Il=n,xl=e}function Mp(n,e,t){dt[ht++]=qr,dt[ht++]=Vr,dt[ht++]=_i,_i=n;var r=qr;n=Vr;var i=32-Vt(r)-1;r&=~(1<<i),t+=1;var s=32-Vt(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,qr=1<<32-Vt(e)+i|t<<i|r,Vr=s+n}else qr=1<<s|t<<i|r,Vr=n}function Ad(n){n.return!==null&&(Ji(n,1),Mp(n,1,0))}function Ed(n){for(;n===Il;)Il=Ss[--ks],Ss[ks]=null,xl=Ss[--ks],Ss[ks]=null;for(;n===_i;)_i=dt[--ht],dt[ht]=null,Vr=dt[--ht],dt[ht]=null,qr=dt[--ht],dt[ht]=null}var ot=null,rt=null,ae=!1,Ft=null;function Fp(n,e){var t=It(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function em(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,ot=n,rt=Si(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,ot=n,rt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=_i!==null?{id:qr,overflow:Vr}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=It(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,ot=n,rt=null,!0):!1;default:return!1}}function Vc(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Kc(n){if(ae){var e=rt;if(e){var t=e;if(!em(n,e)){if(Vc(n))throw Error(b(418));e=Si(t.nextSibling);var r=ot;e&&em(n,e)?Fp(r,t):(n.flags=n.flags&-4097|2,ae=!1,ot=n)}}else{if(Vc(n))throw Error(b(418));n.flags=n.flags&-4097|2,ae=!1,ot=n}}}function tm(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;ot=n}function Ba(n){if(n!==ot)return!1;if(!ae)return tm(n),ae=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!Fc(n.type,n.memoizedProps)),e&&(e=rt)){if(Vc(n))throw Up(),Error(b(418));for(;e;)Fp(n,e),e=Si(e.nextSibling)}if(tm(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(b(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){rt=Si(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}rt=null}}else rt=ot?Si(n.stateNode.nextSibling):null;return!0}function Up(){for(var n=rt;n;)n=Si(n.nextSibling)}function $s(){rt=ot=null,ae=!1}function Cd(n){Ft===null?Ft=[n]:Ft.push(n)}var Kw=ri.ReactCurrentBatchConfig;function zt(n,e){if(n&&n.defaultProps){e=fe({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}var Al=Oi(null),El=null,Ts=null,Nd=null;function Pd(){Nd=Ts=El=null}function Dd(n){var e=Al.current;ie(Al),n._currentValue=e}function Wc(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function bs(n,e){El=n,Nd=Ts=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(Ge=!0),n.firstContext=null)}function bt(n){var e=n._currentValue;if(Nd!==n)if(n={context:n,memoizedValue:e,next:null},Ts===null){if(El===null)throw Error(b(308));Ts=n,El.dependencies={lanes:0,firstContext:n}}else Ts=Ts.next=n;return e}var qi=null;function bd(n){qi===null?qi=[n]:qi.push(n)}function jp(n,e,t,r){var i=e.interleaved;return i===null?(t.next=t,bd(e)):(t.next=i.next,i.next=t),e.interleaved=t,Zr(n,r)}function Zr(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var ci=!1;function Od(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function qp(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Gr(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function ki(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,_&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Zr(n,t)}return i=r.interleaved,i===null?(e.next=e,bd(r)):(e.next=i.next,i.next=e),r.interleaved=e,Zr(n,t)}function Za(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,yd(n,t)}}function nm(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var i=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?i=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?i=s=e:s=s.next=e}else i=s=e;t={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function Cl(n,e,t,r){var i=n.updateQueue;ci=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var u=a,c=u.next;u.next=null,o===null?s=c:o.next=c,o=u;var d=n.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=u))}if(s!==null){var h=i.baseState;o=0,d=c=u=null,a=s;do{var m=a.lane,p=a.eventTime;if((r&m)===m){d!==null&&(d=d.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var w=n,v=a;switch(m=e,p=t,v.tag){case 1:if(w=v.payload,typeof w=="function"){h=w.call(p,h,m);break e}h=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=v.payload,m=typeof w=="function"?w.call(p,h,m):w,m==null)break e;h=fe({},h,m);break e;case 2:ci=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,m=i.effects,m===null?i.effects=[a]:m.push(a))}else p={eventTime:p,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=p,u=h):d=d.next=p,o|=m;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;m=a,a=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(!0);if(d===null&&(u=h),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Qi|=o,n.lanes=o,n.memoizedState=h}}function rm(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],i=r.callback;if(i!==null){if(r.callback=null,r=t,typeof i!="function")throw Error(b(191,i));i.call(r)}}}var Vp=new jg.Component().refs;function Hc(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:fe({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var yu={isMounted:function(n){return(n=n._reactInternals)?ss(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=qe(),i=Ii(n),s=Gr(r,i);s.payload=e,t!=null&&(s.callback=t),e=ki(n,s,i),e!==null&&(Kt(e,n,i,r),Za(e,n,i))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=qe(),i=Ii(n),s=Gr(r,i);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=ki(n,s,i),e!==null&&(Kt(e,n,i,r),Za(e,n,i))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=qe(),r=Ii(n),i=Gr(t,r);i.tag=2,e!=null&&(i.callback=e),e=ki(n,i,r),e!==null&&(Kt(e,n,r,t),Za(e,n,r))}};function im(n,e,t,r,i,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Go(t,r)||!Go(i,s):!0}function Kp(n,e,t){var r=!1,i=Pi,s=e.contextType;return typeof s=="object"&&s!==null?s=bt(s):(i=Xe(e)?Yi:Fe.current,r=e.contextTypes,s=(r=r!=null)?zs(n,i):Pi),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=yu,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=s),e}function sm(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&yu.enqueueReplaceState(e,e.state,null)}function Gc(n,e,t,r){var i=n.stateNode;i.props=t,i.state=n.memoizedState,i.refs=Vp,Od(n);var s=e.contextType;typeof s=="object"&&s!==null?i.context=bt(s):(s=Xe(e)?Yi:Fe.current,i.context=zs(n,s)),i.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Hc(n,e,s,t),i.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&yu.enqueueReplaceState(i,i.state,null),Cl(n,t,i,r),i.state=n.memoizedState),typeof i.componentDidMount=="function"&&(n.flags|=4194308)}function fo(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(b(309));var r=t.stateNode}if(!r)throw Error(b(147,n));var i=r,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===Vp&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(b(284));if(!t._owner)throw Error(b(290,n))}return n}function za(n,e){throw n=Object.prototype.toString.call(e),Error(b(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function om(n){var e=n._init;return e(n._payload)}function Wp(n){function e(y,g){if(n){var S=y.deletions;S===null?(y.deletions=[g],y.flags|=16):S.push(g)}}function t(y,g){if(!n)return null;for(;g!==null;)e(y,g),g=g.sibling;return null}function r(y,g){for(y=new Map;g!==null;)g.key!==null?y.set(g.key,g):y.set(g.index,g),g=g.sibling;return y}function i(y,g){return y=xi(y,g),y.index=0,y.sibling=null,y}function s(y,g,S){return y.index=S,n?(S=y.alternate,S!==null?(S=S.index,S<g?(y.flags|=2,g):S):(y.flags|=2,g)):(y.flags|=1048576,g)}function o(y){return n&&y.alternate===null&&(y.flags|=2),y}function a(y,g,S,I){return g===null||g.tag!==6?(g=oc(S,y.mode,I),g.return=y,g):(g=i(g,S),g.return=y,g)}function u(y,g,S,I){var N=S.type;return N===ms?d(y,g,S.props.children,I,S.key):g!==null&&(g.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===ui&&om(N)===g.type)?(I=i(g,S.props),I.ref=fo(y,g,S),I.return=y,I):(I=sl(S.type,S.key,S.props,null,y.mode,I),I.ref=fo(y,g,S),I.return=y,I)}function c(y,g,S,I){return g===null||g.tag!==4||g.stateNode.containerInfo!==S.containerInfo||g.stateNode.implementation!==S.implementation?(g=ac(S,y.mode,I),g.return=y,g):(g=i(g,S.children||[]),g.return=y,g)}function d(y,g,S,I,N){return g===null||g.tag!==7?(g=Gi(S,y.mode,I,N),g.return=y,g):(g=i(g,S),g.return=y,g)}function h(y,g,S){if(typeof g=="string"&&g!==""||typeof g=="number")return g=oc(""+g,y.mode,S),g.return=y,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Aa:return S=sl(g.type,g.key,g.props,null,y.mode,S),S.ref=fo(y,null,g),S.return=y,S;case hs:return g=ac(g,y.mode,S),g.return=y,g;case ui:var I=g._init;return h(y,I(g._payload),S)}if(wo(g)||oo(g))return g=Gi(g,y.mode,S,null),g.return=y,g;za(y,g)}return null}function m(y,g,S,I){var N=g!==null?g.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return N!==null?null:a(y,g,""+S,I);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Aa:return S.key===N?u(y,g,S,I):null;case hs:return S.key===N?c(y,g,S,I):null;case ui:return N=S._init,m(y,g,N(S._payload),I)}if(wo(S)||oo(S))return N!==null?null:d(y,g,S,I,null);za(y,S)}return null}function p(y,g,S,I,N){if(typeof I=="string"&&I!==""||typeof I=="number")return y=y.get(S)||null,a(g,y,""+I,N);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Aa:return y=y.get(I.key===null?S:I.key)||null,u(g,y,I,N);case hs:return y=y.get(I.key===null?S:I.key)||null,c(g,y,I,N);case ui:var x=I._init;return p(y,g,S,x(I._payload),N)}if(wo(I)||oo(I))return y=y.get(S)||null,d(g,y,I,N,null);za(g,I)}return null}function w(y,g,S,I){for(var N=null,x=null,C=g,O=g=0,$=null;C!==null&&O<S.length;O++){C.index>O?($=C,C=null):$=C.sibling;var F=m(y,C,S[O],I);if(F===null){C===null&&(C=$);break}n&&C&&F.alternate===null&&e(y,C),g=s(F,g,O),x===null?N=F:x.sibling=F,x=F,C=$}if(O===S.length)return t(y,C),ae&&Ji(y,O),N;if(C===null){for(;O<S.length;O++)C=h(y,S[O],I),C!==null&&(g=s(C,g,O),x===null?N=C:x.sibling=C,x=C);return ae&&Ji(y,O),N}for(C=r(y,C);O<S.length;O++)$=p(C,y,O,S[O],I),$!==null&&(n&&$.alternate!==null&&C.delete($.key===null?O:$.key),g=s($,g,O),x===null?N=$:x.sibling=$,x=$);return n&&C.forEach(function(ge){return e(y,ge)}),ae&&Ji(y,O),N}function v(y,g,S,I){var N=oo(S);if(typeof N!="function")throw Error(b(150));if(S=N.call(S),S==null)throw Error(b(151));for(var x=N=null,C=g,O=g=0,$=null,F=S.next();C!==null&&!F.done;O++,F=S.next()){C.index>O?($=C,C=null):$=C.sibling;var ge=m(y,C,F.value,I);if(ge===null){C===null&&(C=$);break}n&&C&&ge.alternate===null&&e(y,C),g=s(ge,g,O),x===null?N=ge:x.sibling=ge,x=ge,C=$}if(F.done)return t(y,C),ae&&Ji(y,O),N;if(C===null){for(;!F.done;O++,F=S.next())F=h(y,F.value,I),F!==null&&(g=s(F,g,O),x===null?N=F:x.sibling=F,x=F);return ae&&Ji(y,O),N}for(C=r(y,C);!F.done;O++,F=S.next())F=p(C,y,O,F.value,I),F!==null&&(n&&F.alternate!==null&&C.delete(F.key===null?O:F.key),g=s(F,g,O),x===null?N=F:x.sibling=F,x=F);return n&&C.forEach(function(tt){return e(y,tt)}),ae&&Ji(y,O),N}function A(y,g,S,I){if(typeof S=="object"&&S!==null&&S.type===ms&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Aa:e:{for(var N=S.key,x=g;x!==null;){if(x.key===N){if(N=S.type,N===ms){if(x.tag===7){t(y,x.sibling),g=i(x,S.props.children),g.return=y,y=g;break e}}else if(x.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===ui&&om(N)===x.type){t(y,x.sibling),g=i(x,S.props),g.ref=fo(y,x,S),g.return=y,y=g;break e}t(y,x);break}else e(y,x);x=x.sibling}S.type===ms?(g=Gi(S.props.children,y.mode,I,S.key),g.return=y,y=g):(I=sl(S.type,S.key,S.props,null,y.mode,I),I.ref=fo(y,g,S),I.return=y,y=I)}return o(y);case hs:e:{for(x=S.key;g!==null;){if(g.key===x)if(g.tag===4&&g.stateNode.containerInfo===S.containerInfo&&g.stateNode.implementation===S.implementation){t(y,g.sibling),g=i(g,S.children||[]),g.return=y,y=g;break e}else{t(y,g);break}else e(y,g);g=g.sibling}g=ac(S,y.mode,I),g.return=y,y=g}return o(y);case ui:return x=S._init,A(y,g,x(S._payload),I)}if(wo(S))return w(y,g,S,I);if(oo(S))return v(y,g,S,I);za(y,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,g!==null&&g.tag===6?(t(y,g.sibling),g=i(g,S),g.return=y,y=g):(t(y,g),g=oc(S,y.mode,I),g.return=y,y=g),o(y)):t(y,g)}return A}var Js=Wp(!0),Hp=Wp(!1),ya={},ln=Oi(ya),Qo=Oi(ya),Zo=Oi(ya);function Vi(n){if(n===ya)throw Error(b(174));return n}function Ld(n,e){switch(ne(Zo,e),ne(Qo,n),ne(ln,ya),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ec(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=Ec(e,n)}ie(ln),ne(ln,e)}function Ms(){ie(ln),ie(Qo),ie(Zo)}function Gp(n){Vi(Zo.current);var e=Vi(ln.current),t=Ec(e,n.type);e!==t&&(ne(Qo,n),ne(ln,t))}function Rd(n){Qo.current===n&&(ie(ln),ie(Qo))}var le=Oi(0);function Nl(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ec=[];function Bd(){for(var n=0;n<ec.length;n++)ec[n]._workInProgressVersionPrimary=null;ec.length=0}var el=ri.ReactCurrentDispatcher,tc=ri.ReactCurrentBatchConfig,Xi=0,ce=null,Te=null,Ee=null,Pl=!1,Do=!1,ea=0,Ww=0;function Be(){throw Error(b(321))}function zd(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!Ht(n[t],e[t]))return!1;return!0}function $d(n,e,t,r,i,s){if(Xi=s,ce=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,el.current=n===null||n.memoizedState===null?_w:Xw,n=t(r,i),Do){s=0;do{if(Do=!1,ea=0,25<=s)throw Error(b(301));s+=1,Ee=Te=null,e.updateQueue=null,el.current=Qw,n=t(r,i)}while(Do)}if(el.current=Dl,e=Te!==null&&Te.next!==null,Xi=0,Ee=Te=ce=null,Pl=!1,e)throw Error(b(300));return n}function Jd(){var n=ea!==0;return ea=0,n}function _t(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ee===null?ce.memoizedState=Ee=n:Ee=Ee.next=n,Ee}function Ot(){if(Te===null){var n=ce.alternate;n=n!==null?n.memoizedState:null}else n=Te.next;var e=Ee===null?ce.memoizedState:Ee.next;if(e!==null)Ee=e,Te=n;else{if(n===null)throw Error(b(310));Te=n,n={memoizedState:Te.memoizedState,baseState:Te.baseState,baseQueue:Te.baseQueue,queue:Te.queue,next:null},Ee===null?ce.memoizedState=Ee=n:Ee=Ee.next=n}return Ee}function ta(n,e){return typeof e=="function"?e(n):e}function nc(n){var e=Ot(),t=e.queue;if(t===null)throw Error(b(311));t.lastRenderedReducer=n;var r=Te,i=r.baseQueue,s=t.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,t.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,u=null,c=s;do{var d=c.lane;if((Xi&d)===d)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:n(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(a=u=h,o=r):u=u.next=h,ce.lanes|=d,Qi|=d}c=c.next}while(c!==null&&c!==s);u===null?o=r:u.next=a,Ht(r,e.memoizedState)||(Ge=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,t.lastRenderedState=r}if(n=t.interleaved,n!==null){i=n;do s=i.lane,ce.lanes|=s,Qi|=s,i=i.next;while(i!==n)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function rc(n){var e=Ot(),t=e.queue;if(t===null)throw Error(b(311));t.lastRenderedReducer=n;var r=t.dispatch,i=t.pending,s=e.memoizedState;if(i!==null){t.pending=null;var o=i=i.next;do s=n(s,o.action),o=o.next;while(o!==i);Ht(s,e.memoizedState)||(Ge=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,r]}function Yp(){}function _p(n,e){var t=ce,r=Ot(),i=e(),s=!Ht(r.memoizedState,i);if(s&&(r.memoizedState=i,Ge=!0),r=r.queue,Md(Zp.bind(null,t,r,n),[n]),r.getSnapshot!==e||s||Ee!==null&&Ee.memoizedState.tag&1){if(t.flags|=2048,na(9,Qp.bind(null,t,r,i,e),void 0,null),Ne===null)throw Error(b(349));Xi&30||Xp(t,e,i)}return i}function Xp(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=ce.updateQueue,e===null?(e={lastEffect:null,stores:null},ce.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function Qp(n,e,t,r){e.value=t,e.getSnapshot=r,ey(e)&&ty(n)}function Zp(n,e,t){return t(function(){ey(e)&&ty(n)})}function ey(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Ht(n,t)}catch{return!0}}function ty(n){var e=Zr(n,1);e!==null&&Kt(e,n,1,-1)}function am(n){var e=_t();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ta,lastRenderedState:n},e.queue=n,n=n.dispatch=Yw.bind(null,ce,n),[e.memoizedState,n]}function na(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=ce.updateQueue,e===null?(e={lastEffect:null,stores:null},ce.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function ny(){return Ot().memoizedState}function tl(n,e,t,r){var i=_t();ce.flags|=n,i.memoizedState=na(1|e,t,void 0,r===void 0?null:r)}function vu(n,e,t,r){var i=Ot();r=r===void 0?null:r;var s=void 0;if(Te!==null){var o=Te.memoizedState;if(s=o.destroy,r!==null&&zd(r,o.deps)){i.memoizedState=na(e,t,s,r);return}}ce.flags|=n,i.memoizedState=na(1|e,t,s,r)}function lm(n,e){return tl(8390656,8,n,e)}function Md(n,e){return vu(2048,8,n,e)}function ry(n,e){return vu(4,2,n,e)}function iy(n,e){return vu(4,4,n,e)}function sy(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function oy(n,e,t){return t=t!=null?t.concat([n]):null,vu(4,4,sy.bind(null,e,n),t)}function Fd(){}function ay(n,e){var t=Ot();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&zd(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function ly(n,e){var t=Ot();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&zd(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function uy(n,e,t){return Xi&21?(Ht(t,e)||(t=dp(),ce.lanes|=t,Qi|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,Ge=!0),n.memoizedState=t)}function Hw(n,e){var t=Z;Z=t!==0&&4>t?t:4,n(!0);var r=tc.transition;tc.transition={};try{n(!1),e()}finally{Z=t,tc.transition=r}}function cy(){return Ot().memoizedState}function Gw(n,e,t){var r=Ii(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},fy(n))dy(e,t);else if(t=jp(n,e,t,r),t!==null){var i=qe();Kt(t,n,r,i),hy(t,e,r)}}function Yw(n,e,t){var r=Ii(n),i={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(fy(n))dy(e,i);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(i.hasEagerState=!0,i.eagerState=a,Ht(a,o)){var u=e.interleaved;u===null?(i.next=i,bd(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}t=jp(n,e,i,r),t!==null&&(i=qe(),Kt(t,n,r,i),hy(t,e,r))}}function fy(n){var e=n.alternate;return n===ce||e!==null&&e===ce}function dy(n,e){Do=Pl=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function hy(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,yd(n,t)}}var Dl={readContext:bt,useCallback:Be,useContext:Be,useEffect:Be,useImperativeHandle:Be,useInsertionEffect:Be,useLayoutEffect:Be,useMemo:Be,useReducer:Be,useRef:Be,useState:Be,useDebugValue:Be,useDeferredValue:Be,useTransition:Be,useMutableSource:Be,useSyncExternalStore:Be,useId:Be,unstable_isNewReconciler:!1},_w={readContext:bt,useCallback:function(n,e){return _t().memoizedState=[n,e===void 0?null:e],n},useContext:bt,useEffect:lm,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,tl(4194308,4,sy.bind(null,e,n),t)},useLayoutEffect:function(n,e){return tl(4194308,4,n,e)},useInsertionEffect:function(n,e){return tl(4,2,n,e)},useMemo:function(n,e){var t=_t();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=_t();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=Gw.bind(null,ce,n),[r.memoizedState,n]},useRef:function(n){var e=_t();return n={current:n},e.memoizedState=n},useState:am,useDebugValue:Fd,useDeferredValue:function(n){return _t().memoizedState=n},useTransition:function(){var n=am(!1),e=n[0];return n=Hw.bind(null,n[1]),_t().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=ce,i=_t();if(ae){if(t===void 0)throw Error(b(407));t=t()}else{if(t=e(),Ne===null)throw Error(b(349));Xi&30||Xp(r,e,t)}i.memoizedState=t;var s={value:t,getSnapshot:e};return i.queue=s,lm(Zp.bind(null,r,s,n),[n]),r.flags|=2048,na(9,Qp.bind(null,r,s,t,e),void 0,null),t},useId:function(){var n=_t(),e=Ne.identifierPrefix;if(ae){var t=Vr,r=qr;t=(r&~(1<<32-Vt(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=ea++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=Ww++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},Xw={readContext:bt,useCallback:ay,useContext:bt,useEffect:Md,useImperativeHandle:oy,useInsertionEffect:ry,useLayoutEffect:iy,useMemo:ly,useReducer:nc,useRef:ny,useState:function(){return nc(ta)},useDebugValue:Fd,useDeferredValue:function(n){var e=Ot();return uy(e,Te.memoizedState,n)},useTransition:function(){var n=nc(ta)[0],e=Ot().memoizedState;return[n,e]},useMutableSource:Yp,useSyncExternalStore:_p,useId:cy,unstable_isNewReconciler:!1},Qw={readContext:bt,useCallback:ay,useContext:bt,useEffect:Md,useImperativeHandle:oy,useInsertionEffect:ry,useLayoutEffect:iy,useMemo:ly,useReducer:rc,useRef:ny,useState:function(){return rc(ta)},useDebugValue:Fd,useDeferredValue:function(n){var e=Ot();return Te===null?e.memoizedState=n:uy(e,Te.memoizedState,n)},useTransition:function(){var n=rc(ta)[0],e=Ot().memoizedState;return[n,e]},useMutableSource:Yp,useSyncExternalStore:_p,useId:cy,unstable_isNewReconciler:!1};function Fs(n,e){try{var t="",r=e;do t+=E0(r),r=r.return;while(r);var i=t}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:i,digest:null}}function ic(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function Yc(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var Zw=typeof WeakMap=="function"?WeakMap:Map;function my(n,e,t){t=Gr(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){Ol||(Ol=!0,of=r),Yc(n,e)},t}function gy(n,e,t){t=Gr(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;t.payload=function(){return r(i)},t.callback=function(){Yc(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){Yc(n,e),typeof r!="function"&&(Ti===null?Ti=new Set([this]):Ti.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function um(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new Zw;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(t)||(i.add(t),n=h1.bind(null,n,e,t),e.then(n,n))}function cm(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function fm(n,e,t,r,i){return n.mode&1?(n.flags|=65536,n.lanes=i,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Gr(-1,1),e.tag=2,ki(t,e,1))),t.lanes|=1),n)}var e1=ri.ReactCurrentOwner,Ge=!1;function je(n,e,t,r){e.child=n===null?Hp(e,null,t,r):Js(e,n.child,t,r)}function dm(n,e,t,r,i){t=t.render;var s=e.ref;return bs(e,i),r=$d(n,e,t,r,s,i),t=Jd(),n!==null&&!Ge?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,ei(n,e,i)):(ae&&t&&Ad(e),e.flags|=1,je(n,e,r,i),e.child)}function hm(n,e,t,r,i){if(n===null){var s=t.type;return typeof s=="function"&&!Gd(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,py(n,e,s,r,i)):(n=sl(t.type,null,r,e,e.mode,i),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&i)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:Go,t(o,r)&&n.ref===e.ref)return ei(n,e,i)}return e.flags|=1,n=xi(s,r),n.ref=e.ref,n.return=e,e.child=n}function py(n,e,t,r,i){if(n!==null){var s=n.memoizedProps;if(Go(s,r)&&n.ref===e.ref)if(Ge=!1,e.pendingProps=r=s,(n.lanes&i)!==0)n.flags&131072&&(Ge=!0);else return e.lanes=n.lanes,ei(n,e,i)}return _c(n,e,t,r,i)}function yy(n,e,t){var r=e.pendingProps,i=r.children,s=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ne(xs,nt),nt|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,ne(xs,nt),nt|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:t,ne(xs,nt),nt|=r}else s!==null?(r=s.baseLanes|t,e.memoizedState=null):r=t,ne(xs,nt),nt|=r;return je(n,e,i,t),e.child}function vy(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function _c(n,e,t,r,i){var s=Xe(t)?Yi:Fe.current;return s=zs(e,s),bs(e,i),t=$d(n,e,t,r,s,i),r=Jd(),n!==null&&!Ge?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,ei(n,e,i)):(ae&&r&&Ad(e),e.flags|=1,je(n,e,t,i),e.child)}function mm(n,e,t,r,i){if(Xe(t)){var s=!0;Tl(e)}else s=!1;if(bs(e,i),e.stateNode===null)nl(n,e),Kp(e,t,r),Gc(e,t,r,i),r=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var u=o.context,c=t.contextType;typeof c=="object"&&c!==null?c=bt(c):(c=Xe(t)?Yi:Fe.current,c=zs(e,c));var d=t.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||u!==c)&&sm(e,o,r,c),ci=!1;var m=e.memoizedState;o.state=m,Cl(e,r,o,i),u=e.memoizedState,a!==r||m!==u||_e.current||ci?(typeof d=="function"&&(Hc(e,t,d,r),u=e.memoizedState),(a=ci||im(e,t,a,r,m,u,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,qp(n,e),a=e.memoizedProps,c=e.type===e.elementType?a:zt(e.type,a),o.props=c,h=e.pendingProps,m=o.context,u=t.contextType,typeof u=="object"&&u!==null?u=bt(u):(u=Xe(t)?Yi:Fe.current,u=zs(e,u));var p=t.getDerivedStateFromProps;(d=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||m!==u)&&sm(e,o,r,u),ci=!1,m=e.memoizedState,o.state=m,Cl(e,r,o,i);var w=e.memoizedState;a!==h||m!==w||_e.current||ci?(typeof p=="function"&&(Hc(e,t,p,r),w=e.memoizedState),(c=ci||im(e,t,c,r,m,w,u)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,w,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,w,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&m===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&m===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=w),o.props=r,o.state=w,o.context=u,r=c):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&m===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&m===n.memoizedState||(e.flags|=1024),r=!1)}return Xc(n,e,t,r,s,i)}function Xc(n,e,t,r,i,s){vy(n,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Zh(e,t,!1),ei(n,e,s);r=e.stateNode,e1.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&o?(e.child=Js(e,n.child,null,s),e.child=Js(e,null,a,s)):je(n,e,a,s),e.memoizedState=r.state,i&&Zh(e,t,!0),e.child}function wy(n){var e=n.stateNode;e.pendingContext?Qh(n,e.pendingContext,e.pendingContext!==e.context):e.context&&Qh(n,e.context,!1),Ld(n,e.containerInfo)}function gm(n,e,t,r,i){return $s(),Cd(i),e.flags|=256,je(n,e,t,r),e.child}var Qc={dehydrated:null,treeContext:null,retryLane:0};function Zc(n){return{baseLanes:n,cachePool:null,transitions:null}}function Sy(n,e,t){var r=e.pendingProps,i=le.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(i|=1),ne(le,i&1),n===null)return Kc(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,n=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=ku(o,r,0,null),n=Gi(n,r,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=Zc(t),e.memoizedState=Qc,n):Ud(e,o));if(i=n.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return t1(n,e,o,r,a,i,t);if(s){s=r.fallback,o=e.mode,i=n.child,a=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=xi(i,u),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=xi(a,s):(s=Gi(s,o,t,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=n.child.memoizedState,o=o===null?Zc(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=Qc,r}return s=n.child,n=s.sibling,r=xi(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function Ud(n,e){return e=ku({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function $a(n,e,t,r){return r!==null&&Cd(r),Js(e,n.child,null,t),n=Ud(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function t1(n,e,t,r,i,s,o){if(t)return e.flags&256?(e.flags&=-257,r=ic(Error(b(422))),$a(n,e,o,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=ku({mode:"visible",children:r.children},i,0,null),s=Gi(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Js(e,n.child,null,o),e.child.memoizedState=Zc(o),e.memoizedState=Qc,s);if(!(e.mode&1))return $a(n,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(b(419)),r=ic(s,r,void 0),$a(n,e,o,r)}if(a=(o&n.childLanes)!==0,Ge||a){if(r=Ne,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Zr(n,i),Kt(r,n,i,-1))}return Hd(),r=ic(Error(b(421))),$a(n,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=n.child,e=m1.bind(null,n),i._reactRetry=e,null):(n=s.treeContext,rt=Si(i.nextSibling),ot=e,ae=!0,Ft=null,n!==null&&(dt[ht++]=qr,dt[ht++]=Vr,dt[ht++]=_i,qr=n.id,Vr=n.overflow,_i=e),e=Ud(e,r.children),e.flags|=4096,e)}function pm(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),Wc(n.return,e,t)}function sc(n,e,t,r,i){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=t,s.tailMode=i)}function ky(n,e,t){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(je(n,e,r.children,t),r=le.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&pm(n,t,e);else if(n.tag===19)pm(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(ne(le,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)n=t.alternate,n!==null&&Nl(n)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),sc(e,!1,i,t,s);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(n=i.alternate,n!==null&&Nl(n)===null){e.child=i;break}n=i.sibling,i.sibling=t,t=i,i=n}sc(e,!0,t,null,s);break;case"together":sc(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function nl(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function ei(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),Qi|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(b(153));if(e.child!==null){for(n=e.child,t=xi(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=xi(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function n1(n,e,t){switch(e.tag){case 3:wy(e),$s();break;case 5:Gp(e);break;case 1:Xe(e.type)&&Tl(e);break;case 4:Ld(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;ne(Al,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ne(le,le.current&1),e.flags|=128,null):t&e.child.childLanes?Sy(n,e,t):(ne(le,le.current&1),n=ei(n,e,t),n!==null?n.sibling:null);ne(le,le.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return ky(n,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ne(le,le.current),r)break;return null;case 22:case 23:return e.lanes=0,yy(n,e,t)}return ei(n,e,t)}var Ty,ef,Iy,xy;Ty=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};ef=function(){};Iy=function(n,e,t,r){var i=n.memoizedProps;if(i!==r){n=e.stateNode,Vi(ln.current);var s=null;switch(t){case"input":i=Tc(n,i),r=Tc(n,r),s=[];break;case"select":i=fe({},i,{value:void 0}),r=fe({},r,{value:void 0}),s=[];break;case"textarea":i=Ac(n,i),r=Ac(n,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=Sl)}Cc(t,r);var o;t=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Uo.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var u=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&u!==a&&(u!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(t||(t={}),t[o]=u[o])}else t||(s||(s=[]),s.push(c,t)),t=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(s=s||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Uo.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&re("scroll",n),s||a===u||(s=[])):(s=s||[]).push(c,u))}t&&(s=s||[]).push("style",t);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};xy=function(n,e,t,r){t!==r&&(e.flags|=4)};function ho(n,e){if(!ae)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function ze(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=n,i=i.sibling;else for(i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=n,i=i.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function r1(n,e,t){var r=e.pendingProps;switch(Ed(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ze(e),null;case 1:return Xe(e.type)&&kl(),ze(e),null;case 3:return r=e.stateNode,Ms(),ie(_e),ie(Fe),Bd(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(Ba(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ft!==null&&(uf(Ft),Ft=null))),ef(n,e),ze(e),null;case 5:Rd(e);var i=Vi(Zo.current);if(t=e.type,n!==null&&e.stateNode!=null)Iy(n,e,t,r,i),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(b(166));return ze(e),null}if(n=Vi(ln.current),Ba(e)){r=e.stateNode,t=e.type;var s=e.memoizedProps;switch(r[Zt]=e,r[Xo]=s,n=(e.mode&1)!==0,t){case"dialog":re("cancel",r),re("close",r);break;case"iframe":case"object":case"embed":re("load",r);break;case"video":case"audio":for(i=0;i<ko.length;i++)re(ko[i],r);break;case"source":re("error",r);break;case"img":case"image":case"link":re("error",r),re("load",r);break;case"details":re("toggle",r);break;case"input":Ah(r,s),re("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},re("invalid",r);break;case"textarea":Ch(r,s),re("invalid",r)}Cc(t,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Ra(r.textContent,a,n),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Ra(r.textContent,a,n),i=["children",""+a]):Uo.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&re("scroll",r)}switch(t){case"input":Ea(r),Eh(r,s,!0);break;case"textarea":Ea(r),Nh(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Sl)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Xg(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=o.createElement(t,{is:r.is}):(n=o.createElement(t),t==="select"&&(o=n,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):n=o.createElementNS(n,t),n[Zt]=e,n[Xo]=r,Ty(n,e,!1,!1),e.stateNode=n;e:{switch(o=Nc(t,r),t){case"dialog":re("cancel",n),re("close",n),i=r;break;case"iframe":case"object":case"embed":re("load",n),i=r;break;case"video":case"audio":for(i=0;i<ko.length;i++)re(ko[i],n);i=r;break;case"source":re("error",n),i=r;break;case"img":case"image":case"link":re("error",n),re("load",n),i=r;break;case"details":re("toggle",n),i=r;break;case"input":Ah(n,r),i=Tc(n,r),re("invalid",n);break;case"option":i=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},i=fe({},r,{value:void 0}),re("invalid",n);break;case"textarea":Ch(n,r),i=Ac(n,r),re("invalid",n);break;default:i=r}Cc(t,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var u=a[s];s==="style"?ep(n,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Qg(n,u)):s==="children"?typeof u=="string"?(t!=="textarea"||u!=="")&&jo(n,u):typeof u=="number"&&jo(n,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Uo.hasOwnProperty(s)?u!=null&&s==="onScroll"&&re("scroll",n):u!=null&&fd(n,s,u,o))}switch(t){case"input":Ea(n),Eh(n,r,!1);break;case"textarea":Ea(n),Nh(n);break;case"option":r.value!=null&&n.setAttribute("value",""+Ni(r.value));break;case"select":n.multiple=!!r.multiple,s=r.value,s!=null?Cs(n,!!r.multiple,s,!1):r.defaultValue!=null&&Cs(n,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(n.onclick=Sl)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ze(e),null;case 6:if(n&&e.stateNode!=null)xy(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(b(166));if(t=Vi(Zo.current),Vi(ln.current),Ba(e)){if(r=e.stateNode,t=e.memoizedProps,r[Zt]=e,(s=r.nodeValue!==t)&&(n=ot,n!==null))switch(n.tag){case 3:Ra(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Ra(r.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[Zt]=e,e.stateNode=r}return ze(e),null;case 13:if(ie(le),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(ae&&rt!==null&&e.mode&1&&!(e.flags&128))Up(),$s(),e.flags|=98560,s=!1;else if(s=Ba(e),r!==null&&r.dehydrated!==null){if(n===null){if(!s)throw Error(b(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(b(317));s[Zt]=e}else $s(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ze(e),s=!1}else Ft!==null&&(uf(Ft),Ft=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(n===null||le.current&1?Ie===0&&(Ie=3):Hd())),e.updateQueue!==null&&(e.flags|=4),ze(e),null);case 4:return Ms(),ef(n,e),n===null&&Yo(e.stateNode.containerInfo),ze(e),null;case 10:return Dd(e.type._context),ze(e),null;case 17:return Xe(e.type)&&kl(),ze(e),null;case 19:if(ie(le),s=e.memoizedState,s===null)return ze(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)ho(s,!1);else{if(Ie!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=Nl(n),o!==null){for(e.flags|=128,ho(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)s=t,n=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return ne(le,le.current&1|2),e.child}n=n.sibling}s.tail!==null&&ve()>Us&&(e.flags|=128,r=!0,ho(s,!1),e.lanes=4194304)}else{if(!r)if(n=Nl(o),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),ho(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!ae)return ze(e),null}else 2*ve()-s.renderingStartTime>Us&&t!==1073741824&&(e.flags|=128,r=!0,ho(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=ve(),e.sibling=null,t=le.current,ne(le,r?t&1|2:t&1),e):(ze(e),null);case 22:case 23:return Wd(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?nt&1073741824&&(ze(e),e.subtreeFlags&6&&(e.flags|=8192)):ze(e),null;case 24:return null;case 25:return null}throw Error(b(156,e.tag))}function i1(n,e){switch(Ed(e),e.tag){case 1:return Xe(e.type)&&kl(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return Ms(),ie(_e),ie(Fe),Bd(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return Rd(e),null;case 13:if(ie(le),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(b(340));$s()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return ie(le),null;case 4:return Ms(),null;case 10:return Dd(e.type._context),null;case 22:case 23:return Wd(),null;case 24:return null;default:return null}}var Ja=!1,$e=!1,s1=typeof WeakSet=="function"?WeakSet:Set,B=null;function Is(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){he(n,e,r)}else t.current=null}function tf(n,e,t){try{t()}catch(r){he(n,e,r)}}var ym=!1;function o1(n,e){if(Jc=yl,n=Np(),xd(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,u=-1,c=0,d=0,h=n,m=null;t:for(;;){for(var p;h!==t||i!==0&&h.nodeType!==3||(a=o+i),h!==s||r!==0&&h.nodeType!==3||(u=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(p=h.firstChild)!==null;)m=h,h=p;for(;;){if(h===n)break t;if(m===t&&++c===i&&(a=o),m===s&&++d===r&&(u=o),(p=h.nextSibling)!==null)break;h=m,m=h.parentNode}h=p}t=a===-1||u===-1?null:{start:a,end:u}}else t=null}t=t||{start:0,end:0}}else t=null;for(Mc={focusedElem:n,selectionRange:t},yl=!1,B=e;B!==null;)if(e=B,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,B=n;else for(;B!==null;){e=B;try{var w=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var v=w.memoizedProps,A=w.memoizedState,y=e.stateNode,g=y.getSnapshotBeforeUpdate(e.elementType===e.type?v:zt(e.type,v),A);y.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(b(163))}}catch(I){he(e,e.return,I)}if(n=e.sibling,n!==null){n.return=e.return,B=n;break}B=e.return}return w=ym,ym=!1,w}function bo(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&n)===n){var s=i.destroy;i.destroy=void 0,s!==void 0&&tf(e,t,s)}i=i.next}while(i!==r)}}function wu(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function nf(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function Ay(n){var e=n.alternate;e!==null&&(n.alternate=null,Ay(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Zt],delete e[Xo],delete e[jc],delete e[jw],delete e[qw])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Ey(n){return n.tag===5||n.tag===3||n.tag===4}function vm(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Ey(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function rf(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=Sl));else if(r!==4&&(n=n.child,n!==null))for(rf(n,e,t),n=n.sibling;n!==null;)rf(n,e,t),n=n.sibling}function sf(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(sf(n,e,t),n=n.sibling;n!==null;)sf(n,e,t),n=n.sibling}var De=null,Mt=!1;function si(n,e,t){for(t=t.child;t!==null;)Cy(n,e,t),t=t.sibling}function Cy(n,e,t){if(an&&typeof an.onCommitFiberUnmount=="function")try{an.onCommitFiberUnmount(fu,t)}catch{}switch(t.tag){case 5:$e||Is(t,e);case 6:var r=De,i=Mt;De=null,si(n,e,t),De=r,Mt=i,De!==null&&(Mt?(n=De,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):De.removeChild(t.stateNode));break;case 18:De!==null&&(Mt?(n=De,t=t.stateNode,n.nodeType===8?Qu(n.parentNode,t):n.nodeType===1&&Qu(n,t),Wo(n)):Qu(De,t.stateNode));break;case 4:r=De,i=Mt,De=t.stateNode.containerInfo,Mt=!0,si(n,e,t),De=r,Mt=i;break;case 0:case 11:case 14:case 15:if(!$e&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&tf(t,e,o),i=i.next}while(i!==r)}si(n,e,t);break;case 1:if(!$e&&(Is(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(a){he(t,e,a)}si(n,e,t);break;case 21:si(n,e,t);break;case 22:t.mode&1?($e=(r=$e)||t.memoizedState!==null,si(n,e,t),$e=r):si(n,e,t);break;default:si(n,e,t)}}function wm(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new s1),e.forEach(function(r){var i=g1.bind(null,n,r);t.has(r)||(t.add(r),r.then(i,i))})}}function Rt(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var i=t[r];try{var s=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:De=a.stateNode,Mt=!1;break e;case 3:De=a.stateNode.containerInfo,Mt=!0;break e;case 4:De=a.stateNode.containerInfo,Mt=!0;break e}a=a.return}if(De===null)throw Error(b(160));Cy(s,o,i),De=null,Mt=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(c){he(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Ny(e,n),e=e.sibling}function Ny(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Rt(e,n),Yt(n),r&4){try{bo(3,n,n.return),wu(3,n)}catch(v){he(n,n.return,v)}try{bo(5,n,n.return)}catch(v){he(n,n.return,v)}}break;case 1:Rt(e,n),Yt(n),r&512&&t!==null&&Is(t,t.return);break;case 5:if(Rt(e,n),Yt(n),r&512&&t!==null&&Is(t,t.return),n.flags&32){var i=n.stateNode;try{jo(i,"")}catch(v){he(n,n.return,v)}}if(r&4&&(i=n.stateNode,i!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,a=n.type,u=n.updateQueue;if(n.updateQueue=null,u!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&Yg(i,s),Nc(a,o);var c=Nc(a,s);for(o=0;o<u.length;o+=2){var d=u[o],h=u[o+1];d==="style"?ep(i,h):d==="dangerouslySetInnerHTML"?Qg(i,h):d==="children"?jo(i,h):fd(i,d,h,c)}switch(a){case"input":Ic(i,s);break;case"textarea":_g(i,s);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?Cs(i,!!s.multiple,p,!1):m!==!!s.multiple&&(s.defaultValue!=null?Cs(i,!!s.multiple,s.defaultValue,!0):Cs(i,!!s.multiple,s.multiple?[]:"",!1))}i[Xo]=s}catch(v){he(n,n.return,v)}}break;case 6:if(Rt(e,n),Yt(n),r&4){if(n.stateNode===null)throw Error(b(162));i=n.stateNode,s=n.memoizedProps;try{i.nodeValue=s}catch(v){he(n,n.return,v)}}break;case 3:if(Rt(e,n),Yt(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{Wo(e.containerInfo)}catch(v){he(n,n.return,v)}break;case 4:Rt(e,n),Yt(n);break;case 13:Rt(e,n),Yt(n),i=n.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Vd=ve())),r&4&&wm(n);break;case 22:if(d=t!==null&&t.memoizedState!==null,n.mode&1?($e=(c=$e)||d,Rt(e,n),$e=c):Rt(e,n),Yt(n),r&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!d&&n.mode&1)for(B=n,d=n.child;d!==null;){for(h=B=d;B!==null;){switch(m=B,p=m.child,m.tag){case 0:case 11:case 14:case 15:bo(4,m,m.return);break;case 1:Is(m,m.return);var w=m.stateNode;if(typeof w.componentWillUnmount=="function"){r=m,t=m.return;try{e=r,w.props=e.memoizedProps,w.state=e.memoizedState,w.componentWillUnmount()}catch(v){he(r,t,v)}}break;case 5:Is(m,m.return);break;case 22:if(m.memoizedState!==null){km(h);continue}}p!==null?(p.return=m,B=p):km(h)}d=d.sibling}e:for(d=null,h=n;;){if(h.tag===5){if(d===null){d=h;try{i=h.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,u=h.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=Zg("display",o))}catch(v){he(n,n.return,v)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(v){he(n,n.return,v)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===n)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===n)break e;for(;h.sibling===null;){if(h.return===null||h.return===n)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Rt(e,n),Yt(n),r&4&&wm(n);break;case 21:break;default:Rt(e,n),Yt(n)}}function Yt(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(Ey(t)){var r=t;break e}t=t.return}throw Error(b(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(jo(i,""),r.flags&=-33);var s=vm(n);sf(n,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=vm(n);rf(n,a,o);break;default:throw Error(b(161))}}catch(u){he(n,n.return,u)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function a1(n,e,t){B=n,Py(n)}function Py(n,e,t){for(var r=(n.mode&1)!==0;B!==null;){var i=B,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Ja;if(!o){var a=i.alternate,u=a!==null&&a.memoizedState!==null||$e;a=Ja;var c=$e;if(Ja=o,($e=u)&&!c)for(B=i;B!==null;)o=B,u=o.child,o.tag===22&&o.memoizedState!==null?Tm(i):u!==null?(u.return=o,B=u):Tm(i);for(;s!==null;)B=s,Py(s),s=s.sibling;B=i,Ja=a,$e=c}Sm(n)}else i.subtreeFlags&8772&&s!==null?(s.return=i,B=s):Sm(n)}}function Sm(n){for(;B!==null;){var e=B;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:$e||wu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!$e)if(t===null)r.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:zt(e.type,t.memoizedProps);r.componentDidUpdate(i,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&rm(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}rm(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&t.focus();break;case"img":u.src&&(t.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Wo(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(b(163))}$e||e.flags&512&&nf(e)}catch(m){he(e,e.return,m)}}if(e===n){B=null;break}if(t=e.sibling,t!==null){t.return=e.return,B=t;break}B=e.return}}function km(n){for(;B!==null;){var e=B;if(e===n){B=null;break}var t=e.sibling;if(t!==null){t.return=e.return,B=t;break}B=e.return}}function Tm(n){for(;B!==null;){var e=B;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{wu(4,e)}catch(u){he(e,t,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){he(e,i,u)}}var s=e.return;try{nf(e)}catch(u){he(e,s,u)}break;case 5:var o=e.return;try{nf(e)}catch(u){he(e,o,u)}}}catch(u){he(e,e.return,u)}if(e===n){B=null;break}var a=e.sibling;if(a!==null){a.return=e.return,B=a;break}B=e.return}}var l1=Math.ceil,bl=ri.ReactCurrentDispatcher,jd=ri.ReactCurrentOwner,Pt=ri.ReactCurrentBatchConfig,_=0,Ne=null,ke=null,Oe=0,nt=0,xs=Oi(0),Ie=0,ra=null,Qi=0,Su=0,qd=0,Oo=null,We=null,Vd=0,Us=1/0,gn=null,Ol=!1,of=null,Ti=null,Ma=!1,gi=null,Ll=0,Lo=0,af=null,rl=-1,il=0;function qe(){return _&6?ve():rl!==-1?rl:rl=ve()}function Ii(n){return n.mode&1?_&2&&Oe!==0?Oe&-Oe:Kw.transition!==null?(il===0&&(il=dp()),il):(n=Z,n!==0||(n=window.event,n=n===void 0?16:wp(n.type)),n):1}function Kt(n,e,t,r){if(50<Lo)throw Lo=0,af=null,Error(b(185));ma(n,t,r),(!(_&2)||n!==Ne)&&(n===Ne&&(!(_&2)&&(Su|=t),Ie===4&&di(n,Oe)),Qe(n,r),t===1&&_===0&&!(e.mode&1)&&(Us=ve()+500,pu&&Li()))}function Qe(n,e){var t=n.callbackNode;K0(n,e);var r=pl(n,n===Ne?Oe:0);if(r===0)t!==null&&bh(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&bh(t),e===1)n.tag===0?Vw(Im.bind(null,n)):Jp(Im.bind(null,n)),Fw(function(){!(_&6)&&Li()}),t=null;else{switch(hp(r)){case 1:t=pd;break;case 4:t=cp;break;case 16:t=gl;break;case 536870912:t=fp;break;default:t=gl}t=$y(t,Dy.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function Dy(n,e){if(rl=-1,il=0,_&6)throw Error(b(327));var t=n.callbackNode;if(Os()&&n.callbackNode!==t)return null;var r=pl(n,n===Ne?Oe:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=Rl(n,r);else{e=r;var i=_;_|=2;var s=Oy();(Ne!==n||Oe!==e)&&(gn=null,Us=ve()+500,Hi(n,e));do try{f1();break}catch(a){by(n,a)}while(!0);Pd(),bl.current=s,_=i,ke!==null?e=0:(Ne=null,Oe=0,e=Ie)}if(e!==0){if(e===2&&(i=Lc(n),i!==0&&(r=i,e=lf(n,i))),e===1)throw t=ra,Hi(n,0),di(n,r),Qe(n,ve()),t;if(e===6)di(n,r);else{if(i=n.current.alternate,!(r&30)&&!u1(i)&&(e=Rl(n,r),e===2&&(s=Lc(n),s!==0&&(r=s,e=lf(n,s))),e===1))throw t=ra,Hi(n,0),di(n,r),Qe(n,ve()),t;switch(n.finishedWork=i,n.finishedLanes=r,e){case 0:case 1:throw Error(b(345));case 2:Mi(n,We,gn);break;case 3:if(di(n,r),(r&130023424)===r&&(e=Vd+500-ve(),10<e)){if(pl(n,0)!==0)break;if(i=n.suspendedLanes,(i&r)!==r){qe(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=Uc(Mi.bind(null,n,We,gn),e);break}Mi(n,We,gn);break;case 4:if(di(n,r),(r&4194240)===r)break;for(e=n.eventTimes,i=-1;0<r;){var o=31-Vt(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=ve()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*l1(r/1960))-r,10<r){n.timeoutHandle=Uc(Mi.bind(null,n,We,gn),r);break}Mi(n,We,gn);break;case 5:Mi(n,We,gn);break;default:throw Error(b(329))}}}return Qe(n,ve()),n.callbackNode===t?Dy.bind(null,n):null}function lf(n,e){var t=Oo;return n.current.memoizedState.isDehydrated&&(Hi(n,e).flags|=256),n=Rl(n,e),n!==2&&(e=We,We=t,e!==null&&uf(e)),n}function uf(n){We===null?We=n:We.push.apply(We,n)}function u1(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var i=t[r],s=i.getSnapshot;i=i.value;try{if(!Ht(s(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function di(n,e){for(e&=~qd,e&=~Su,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-Vt(e),r=1<<t;n[t]=-1,e&=~r}}function Im(n){if(_&6)throw Error(b(327));Os();var e=pl(n,0);if(!(e&1))return Qe(n,ve()),null;var t=Rl(n,e);if(n.tag!==0&&t===2){var r=Lc(n);r!==0&&(e=r,t=lf(n,r))}if(t===1)throw t=ra,Hi(n,0),di(n,e),Qe(n,ve()),t;if(t===6)throw Error(b(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,Mi(n,We,gn),Qe(n,ve()),null}function Kd(n,e){var t=_;_|=1;try{return n(e)}finally{_=t,_===0&&(Us=ve()+500,pu&&Li())}}function Zi(n){gi!==null&&gi.tag===0&&!(_&6)&&Os();var e=_;_|=1;var t=Pt.transition,r=Z;try{if(Pt.transition=null,Z=1,n)return n()}finally{Z=r,Pt.transition=t,_=e,!(_&6)&&Li()}}function Wd(){nt=xs.current,ie(xs)}function Hi(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,Mw(t)),ke!==null)for(t=ke.return;t!==null;){var r=t;switch(Ed(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&kl();break;case 3:Ms(),ie(_e),ie(Fe),Bd();break;case 5:Rd(r);break;case 4:Ms();break;case 13:ie(le);break;case 19:ie(le);break;case 10:Dd(r.type._context);break;case 22:case 23:Wd()}t=t.return}if(Ne=n,ke=n=xi(n.current,null),Oe=nt=e,Ie=0,ra=null,qd=Su=Qi=0,We=Oo=null,qi!==null){for(e=0;e<qi.length;e++)if(t=qi[e],r=t.interleaved,r!==null){t.interleaved=null;var i=r.next,s=t.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}t.pending=r}qi=null}return n}function by(n,e){do{var t=ke;try{if(Pd(),el.current=Dl,Pl){for(var r=ce.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Pl=!1}if(Xi=0,Ee=Te=ce=null,Do=!1,ea=0,jd.current=null,t===null||t.return===null){Ie=1,ra=e,ke=null;break}e:{var s=n,o=t.return,a=t,u=e;if(e=Oe,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=cm(o);if(p!==null){p.flags&=-257,fm(p,o,a,s,e),p.mode&1&&um(s,c,e),e=p,u=c;var w=e.updateQueue;if(w===null){var v=new Set;v.add(u),e.updateQueue=v}else w.add(u);break e}else{if(!(e&1)){um(s,c,e),Hd();break e}u=Error(b(426))}}else if(ae&&a.mode&1){var A=cm(o);if(A!==null){!(A.flags&65536)&&(A.flags|=256),fm(A,o,a,s,e),Cd(Fs(u,a));break e}}s=u=Fs(u,a),Ie!==4&&(Ie=2),Oo===null?Oo=[s]:Oo.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var y=my(s,u,e);nm(s,y);break e;case 1:a=u;var g=s.type,S=s.stateNode;if(!(s.flags&128)&&(typeof g.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Ti===null||!Ti.has(S)))){s.flags|=65536,e&=-e,s.lanes|=e;var I=gy(s,a,e);nm(s,I);break e}}s=s.return}while(s!==null)}Ry(t)}catch(N){e=N,ke===t&&t!==null&&(ke=t=t.return);continue}break}while(!0)}function Oy(){var n=bl.current;return bl.current=Dl,n===null?Dl:n}function Hd(){(Ie===0||Ie===3||Ie===2)&&(Ie=4),Ne===null||!(Qi&268435455)&&!(Su&268435455)||di(Ne,Oe)}function Rl(n,e){var t=_;_|=2;var r=Oy();(Ne!==n||Oe!==e)&&(gn=null,Hi(n,e));do try{c1();break}catch(i){by(n,i)}while(!0);if(Pd(),_=t,bl.current=r,ke!==null)throw Error(b(261));return Ne=null,Oe=0,Ie}function c1(){for(;ke!==null;)Ly(ke)}function f1(){for(;ke!==null&&!z0();)Ly(ke)}function Ly(n){var e=zy(n.alternate,n,nt);n.memoizedProps=n.pendingProps,e===null?Ry(n):ke=e,jd.current=null}function Ry(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=i1(t,e),t!==null){t.flags&=32767,ke=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Ie=6,ke=null;return}}else if(t=r1(t,e,nt),t!==null){ke=t;return}if(e=e.sibling,e!==null){ke=e;return}ke=e=n}while(e!==null);Ie===0&&(Ie=5)}function Mi(n,e,t){var r=Z,i=Pt.transition;try{Pt.transition=null,Z=1,d1(n,e,t,r)}finally{Pt.transition=i,Z=r}return null}function d1(n,e,t,r){do Os();while(gi!==null);if(_&6)throw Error(b(327));t=n.finishedWork;var i=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(b(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(W0(n,s),n===Ne&&(ke=Ne=null,Oe=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||Ma||(Ma=!0,$y(gl,function(){return Os(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=Pt.transition,Pt.transition=null;var o=Z;Z=1;var a=_;_|=4,jd.current=null,o1(n,t),Ny(t,n),Ow(Mc),yl=!!Jc,Mc=Jc=null,n.current=t,a1(t),$0(),_=a,Z=o,Pt.transition=s}else n.current=t;if(Ma&&(Ma=!1,gi=n,Ll=i),s=n.pendingLanes,s===0&&(Ti=null),F0(t.stateNode),Qe(n,ve()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)i=e[t],r(i.value,{componentStack:i.stack,digest:i.digest});if(Ol)throw Ol=!1,n=of,of=null,n;return Ll&1&&n.tag!==0&&Os(),s=n.pendingLanes,s&1?n===af?Lo++:(Lo=0,af=n):Lo=0,Li(),null}function Os(){if(gi!==null){var n=hp(Ll),e=Pt.transition,t=Z;try{if(Pt.transition=null,Z=16>n?16:n,gi===null)var r=!1;else{if(n=gi,gi=null,Ll=0,_&6)throw Error(b(331));var i=_;for(_|=4,B=n.current;B!==null;){var s=B,o=s.child;if(B.flags&16){var a=s.deletions;if(a!==null){for(var u=0;u<a.length;u++){var c=a[u];for(B=c;B!==null;){var d=B;switch(d.tag){case 0:case 11:case 15:bo(8,d,s)}var h=d.child;if(h!==null)h.return=d,B=h;else for(;B!==null;){d=B;var m=d.sibling,p=d.return;if(Ay(d),d===c){B=null;break}if(m!==null){m.return=p,B=m;break}B=p}}}var w=s.alternate;if(w!==null){var v=w.child;if(v!==null){w.child=null;do{var A=v.sibling;v.sibling=null,v=A}while(v!==null)}}B=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,B=o;else e:for(;B!==null;){if(s=B,s.flags&2048)switch(s.tag){case 0:case 11:case 15:bo(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,B=y;break e}B=s.return}}var g=n.current;for(B=g;B!==null;){o=B;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,B=S;else e:for(o=g;B!==null;){if(a=B,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:wu(9,a)}}catch(N){he(a,a.return,N)}if(a===o){B=null;break e}var I=a.sibling;if(I!==null){I.return=a.return,B=I;break e}B=a.return}}if(_=i,Li(),an&&typeof an.onPostCommitFiberRoot=="function")try{an.onPostCommitFiberRoot(fu,n)}catch{}r=!0}return r}finally{Z=t,Pt.transition=e}}return!1}function xm(n,e,t){e=Fs(t,e),e=my(n,e,1),n=ki(n,e,1),e=qe(),n!==null&&(ma(n,1,e),Qe(n,e))}function he(n,e,t){if(n.tag===3)xm(n,n,t);else for(;e!==null;){if(e.tag===3){xm(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ti===null||!Ti.has(r))){n=Fs(t,n),n=gy(e,n,1),e=ki(e,n,1),n=qe(),e!==null&&(ma(e,1,n),Qe(e,n));break}}e=e.return}}function h1(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=qe(),n.pingedLanes|=n.suspendedLanes&t,Ne===n&&(Oe&t)===t&&(Ie===4||Ie===3&&(Oe&130023424)===Oe&&500>ve()-Vd?Hi(n,0):qd|=t),Qe(n,e)}function By(n,e){e===0&&(n.mode&1?(e=Pa,Pa<<=1,!(Pa&130023424)&&(Pa=4194304)):e=1);var t=qe();n=Zr(n,e),n!==null&&(ma(n,e,t),Qe(n,t))}function m1(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),By(n,t)}function g1(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,i=n.memoizedState;i!==null&&(t=i.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(b(314))}r!==null&&r.delete(e),By(n,t)}var zy;zy=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||_e.current)Ge=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return Ge=!1,n1(n,e,t);Ge=!!(n.flags&131072)}else Ge=!1,ae&&e.flags&1048576&&Mp(e,xl,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;nl(n,e),n=e.pendingProps;var i=zs(e,Fe.current);bs(e,t),i=$d(null,e,r,n,i,t);var s=Jd();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Xe(r)?(s=!0,Tl(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Od(e),i.updater=yu,e.stateNode=i,i._reactInternals=e,Gc(e,r,n,t),e=Xc(null,e,r,!0,s,t)):(e.tag=0,ae&&s&&Ad(e),je(null,e,i,t),e=e.child),e;case 16:r=e.elementType;e:{switch(nl(n,e),n=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=y1(r),n=zt(r,n),i){case 0:e=_c(null,e,r,n,t);break e;case 1:e=mm(null,e,r,n,t);break e;case 11:e=dm(null,e,r,n,t);break e;case 14:e=hm(null,e,r,zt(r.type,n),t);break e}throw Error(b(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:zt(r,i),_c(n,e,r,i,t);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:zt(r,i),mm(n,e,r,i,t);case 3:e:{if(wy(e),n===null)throw Error(b(387));r=e.pendingProps,s=e.memoizedState,i=s.element,qp(n,e),Cl(e,r,null,t);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Fs(Error(b(423)),e),e=gm(n,e,r,t,i);break e}else if(r!==i){i=Fs(Error(b(424)),e),e=gm(n,e,r,t,i);break e}else for(rt=Si(e.stateNode.containerInfo.firstChild),ot=e,ae=!0,Ft=null,t=Hp(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if($s(),r===i){e=ei(n,e,t);break e}je(n,e,r,t)}e=e.child}return e;case 5:return Gp(e),n===null&&Kc(e),r=e.type,i=e.pendingProps,s=n!==null?n.memoizedProps:null,o=i.children,Fc(r,i)?o=null:s!==null&&Fc(r,s)&&(e.flags|=32),vy(n,e),je(n,e,o,t),e.child;case 6:return n===null&&Kc(e),null;case 13:return Sy(n,e,t);case 4:return Ld(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=Js(e,null,r,t):je(n,e,r,t),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:zt(r,i),dm(n,e,r,i,t);case 7:return je(n,e,e.pendingProps,t),e.child;case 8:return je(n,e,e.pendingProps.children,t),e.child;case 12:return je(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,ne(Al,r._currentValue),r._currentValue=o,s!==null)if(Ht(s.value,o)){if(s.children===i.children&&!_e.current){e=ei(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=Gr(-1,t&-t),u.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?u.next=u:(u.next=d.next,d.next=u),c.pending=u}}s.lanes|=t,u=s.alternate,u!==null&&(u.lanes|=t),Wc(s.return,t,e),a.lanes|=t;break}u=u.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(b(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),Wc(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}je(n,e,i.children,t),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,bs(e,t),i=bt(i),r=r(i),e.flags|=1,je(n,e,r,t),e.child;case 14:return r=e.type,i=zt(r,e.pendingProps),i=zt(r.type,i),hm(n,e,r,i,t);case 15:return py(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:zt(r,i),nl(n,e),e.tag=1,Xe(r)?(n=!0,Tl(e)):n=!1,bs(e,t),Kp(e,r,i),Gc(e,r,i,t),Xc(null,e,r,!0,n,t);case 19:return ky(n,e,t);case 22:return yy(n,e,t)}throw Error(b(156,e.tag))};function $y(n,e){return up(n,e)}function p1(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function It(n,e,t,r){return new p1(n,e,t,r)}function Gd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function y1(n){if(typeof n=="function")return Gd(n)?1:0;if(n!=null){if(n=n.$$typeof,n===hd)return 11;if(n===md)return 14}return 2}function xi(n,e){var t=n.alternate;return t===null?(t=It(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function sl(n,e,t,r,i,s){var o=2;if(r=n,typeof n=="function")Gd(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case ms:return Gi(t.children,i,s,e);case dd:o=8,i|=8;break;case vc:return n=It(12,t,e,i|2),n.elementType=vc,n.lanes=s,n;case wc:return n=It(13,t,e,i),n.elementType=wc,n.lanes=s,n;case Sc:return n=It(19,t,e,i),n.elementType=Sc,n.lanes=s,n;case Wg:return ku(t,i,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case Vg:o=10;break e;case Kg:o=9;break e;case hd:o=11;break e;case md:o=14;break e;case ui:o=16,r=null;break e}throw Error(b(130,n==null?n:typeof n,""))}return e=It(o,t,e,i),e.elementType=n,e.type=r,e.lanes=s,e}function Gi(n,e,t,r){return n=It(7,n,r,e),n.lanes=t,n}function ku(n,e,t,r){return n=It(22,n,r,e),n.elementType=Wg,n.lanes=t,n.stateNode={isHidden:!1},n}function oc(n,e,t){return n=It(6,n,null,e),n.lanes=t,n}function ac(n,e,t){return e=It(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function v1(n,e,t,r,i){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Uu(0),this.expirationTimes=Uu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Uu(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Yd(n,e,t,r,i,s,o,a,u){return n=new v1(n,e,t,a,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=It(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},Od(s),n}function w1(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:hs,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function Jy(n){if(!n)return Pi;n=n._reactInternals;e:{if(ss(n)!==n||n.tag!==1)throw Error(b(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Xe(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(b(171))}if(n.tag===1){var t=n.type;if(Xe(t))return $p(n,t,e)}return e}function My(n,e,t,r,i,s,o,a,u){return n=Yd(t,r,!0,n,i,s,o,a,u),n.context=Jy(null),t=n.current,r=qe(),i=Ii(t),s=Gr(r,i),s.callback=e??null,ki(t,s,i),n.current.lanes=i,ma(n,i,r),Qe(n,r),n}function Tu(n,e,t,r){var i=e.current,s=qe(),o=Ii(i);return t=Jy(t),e.context===null?e.context=t:e.pendingContext=t,e=Gr(s,o),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=ki(i,e,o),n!==null&&(Kt(n,i,o,s),Za(n,i,o)),o}function Bl(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Am(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function _d(n,e){Am(n,e),(n=n.alternate)&&Am(n,e)}function S1(){return null}var Fy=typeof reportError=="function"?reportError:function(n){console.error(n)};function Xd(n){this._internalRoot=n}Iu.prototype.render=Xd.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(b(409));Tu(n,e,null,null)};Iu.prototype.unmount=Xd.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Zi(function(){Tu(null,n,null,null)}),e[Qr]=null}};function Iu(n){this._internalRoot=n}Iu.prototype.unstable_scheduleHydration=function(n){if(n){var e=pp();n={blockedOn:null,target:n,priority:e};for(var t=0;t<fi.length&&e!==0&&e<fi[t].priority;t++);fi.splice(t,0,n),t===0&&vp(n)}};function Qd(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function xu(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Em(){}function k1(n,e,t,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=Bl(o);s.call(c)}}var o=My(e,r,n,0,null,!1,!1,"",Em);return n._reactRootContainer=o,n[Qr]=o.current,Yo(n.nodeType===8?n.parentNode:n),Zi(),o}for(;i=n.lastChild;)n.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=Bl(u);a.call(c)}}var u=Yd(n,0,!1,null,null,!1,!1,"",Em);return n._reactRootContainer=u,n[Qr]=u.current,Yo(n.nodeType===8?n.parentNode:n),Zi(function(){Tu(e,u,t,r)}),u}function Au(n,e,t,r,i){var s=t._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var u=Bl(o);a.call(u)}}Tu(e,o,n,i)}else o=k1(t,e,n,i,r);return Bl(o)}mp=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=So(e.pendingLanes);t!==0&&(yd(e,t|1),Qe(e,ve()),!(_&6)&&(Us=ve()+500,Li()))}break;case 13:Zi(function(){var r=Zr(n,1);if(r!==null){var i=qe();Kt(r,n,1,i)}}),_d(n,1)}};vd=function(n){if(n.tag===13){var e=Zr(n,134217728);if(e!==null){var t=qe();Kt(e,n,134217728,t)}_d(n,134217728)}};gp=function(n){if(n.tag===13){var e=Ii(n),t=Zr(n,e);if(t!==null){var r=qe();Kt(t,n,e,r)}_d(n,e)}};pp=function(){return Z};yp=function(n,e){var t=Z;try{return Z=n,e()}finally{Z=t}};Dc=function(n,e,t){switch(e){case"input":if(Ic(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var i=gu(r);if(!i)throw Error(b(90));Gg(r),Ic(r,i)}}}break;case"textarea":_g(n,t);break;case"select":e=t.value,e!=null&&Cs(n,!!t.multiple,e,!1)}};rp=Kd;ip=Zi;var T1={usingClientEntryPoint:!1,Events:[pa,vs,gu,tp,np,Kd]},mo={findFiberByHostInstance:ji,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},I1={bundleType:mo.bundleType,version:mo.version,rendererPackageName:mo.rendererPackageName,rendererConfig:mo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ri.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=ap(n),n===null?null:n.stateNode},findFiberByHostInstance:mo.findFiberByHostInstance||S1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fa.isDisabled&&Fa.supportsFiber)try{fu=Fa.inject(I1),an=Fa}catch{}}ct.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=T1;ct.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Qd(e))throw Error(b(200));return w1(n,e,null,t)};ct.createRoot=function(n,e){if(!Qd(n))throw Error(b(299));var t=!1,r="",i=Fy;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Yd(n,1,!1,null,null,t,!1,r,i),n[Qr]=e.current,Yo(n.nodeType===8?n.parentNode:n),new Xd(e)};ct.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(b(188)):(n=Object.keys(n).join(","),Error(b(268,n)));return n=ap(e),n=n===null?null:n.stateNode,n};ct.flushSync=function(n){return Zi(n)};ct.hydrate=function(n,e,t){if(!xu(e))throw Error(b(200));return Au(null,n,e,!0,t)};ct.hydrateRoot=function(n,e,t){if(!Qd(n))throw Error(b(405));var r=t!=null&&t.hydratedSources||null,i=!1,s="",o=Fy;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=My(e,null,n,1,t??null,i,!1,s,o),n[Qr]=e.current,Yo(n),r)for(n=0;n<r.length;n++)t=r[n],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new Iu(e)};ct.render=function(n,e,t){if(!xu(e))throw Error(b(200));return Au(null,n,e,!1,t)};ct.unmountComponentAtNode=function(n){if(!xu(n))throw Error(b(40));return n._reactRootContainer?(Zi(function(){Au(null,null,n,!1,function(){n._reactRootContainer=null,n[Qr]=null})}),!0):!1};ct.unstable_batchedUpdates=Kd;ct.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!xu(t))throw Error(b(200));if(n==null||n._reactInternals===void 0)throw Error(b(38));return Au(n,e,t,!1,r)};ct.version="18.2.0-next-9e3b772b8-20220608";function Uy(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Uy)}catch(n){console.error(n)}}Uy(),Mg.exports=ct;var x1=Mg.exports,Cm=x1;pc.createRoot=Cm.createRoot,pc.hydrateRoot=Cm.hydrateRoot;var W;(function(n){n[n.Canceled=1]="Canceled",n[n.Unknown=2]="Unknown",n[n.InvalidArgument=3]="InvalidArgument",n[n.DeadlineExceeded=4]="DeadlineExceeded",n[n.NotFound=5]="NotFound",n[n.AlreadyExists=6]="AlreadyExists",n[n.PermissionDenied=7]="PermissionDenied",n[n.ResourceExhausted=8]="ResourceExhausted",n[n.FailedPrecondition=9]="FailedPrecondition",n[n.Aborted=10]="Aborted",n[n.OutOfRange=11]="OutOfRange",n[n.Unimplemented=12]="Unimplemented",n[n.Internal=13]="Internal",n[n.Unavailable=14]="Unavailable",n[n.DataLoss=15]="DataLoss",n[n.Unauthenticated=16]="Unauthenticated"})(W||(W={}));function Nm(n){const e=W[n];return typeof e!="string"?n.toString():e[0].toLowerCase()+e.substring(1).replace(/[A-Z]/g,t=>"_"+t.toLowerCase())}class ee extends Error{constructor(e,t=W.Unknown,r,i,s){super(A1(e,t)),this.name="ConnectError",Object.setPrototypeOf(this,new.target.prototype),this.rawMessage=e,this.code=t,this.metadata=new Headers(r??{}),this.details=i??[],this.cause=s}static from(e,t=W.Unknown){return e instanceof ee?e:e instanceof Error?e.name=="AbortError"?new ee(e.message,W.Canceled):new ee(e.message,t,void 0,void 0,e):new ee(String(e),t,void 0,void 0,e)}static[Symbol.hasInstance](e){return e instanceof Error?Object.getPrototypeOf(e)===ee.prototype?!0:e.name==="ConnectError"&&"code"in e&&typeof e.code=="number"&&"metadata"in e&&"details"in e&&Array.isArray(e.details)&&"rawMessage"in e&&typeof e.rawMessage=="string"&&"cause"in e:!1}findDetails(e){const t="typeName"in e?{findMessage:i=>i===e.typeName?e:void 0}:e,r=[];for(const i of this.details){if("getType"in i){t.findMessage(i.getType().typeName)&&r.push(i);continue}const s=t.findMessage(i.type);if(s)try{r.push(s.fromBinary(i.value))}catch{}}return r}}function A1(n,e){return n.length?`[${Nm(e)}] ${n}`:`[${Nm(e)}]`}function me(n,e){if(!n)throw new Error(e)}const E1=34028234663852886e22,C1=-34028234663852886e22,N1=4294967295,P1=2147483647,D1=-2147483648;function ol(n){if(typeof n!="number")throw new Error("invalid int 32: "+typeof n);if(!Number.isInteger(n)||n>P1||n<D1)throw new Error("invalid int 32: "+n)}function cf(n){if(typeof n!="number")throw new Error("invalid uint 32: "+typeof n);if(!Number.isInteger(n)||n>N1||n<0)throw new Error("invalid uint 32: "+n)}function jy(n){if(typeof n!="number")throw new Error("invalid float 32: "+typeof n);if(Number.isFinite(n)&&(n>E1||n<C1))throw new Error("invalid float 32: "+n)}const qy=Symbol("@bufbuild/protobuf/enum-type");function b1(n){const e=n[qy];return me(e,"missing enum type on enum object"),e}function Vy(n,e,t,r){n[qy]=Ky(e,t.map(i=>({no:i.no,name:i.name,localName:n[i.no]})))}function Ky(n,e,t){const r=Object.create(null),i=Object.create(null),s=[];for(const o of e){const a=Wy(o);s.push(a),r[o.name]=a,i[o.no]=a}return{typeName:n,values:s,findName(o){return r[o]},findNumber(o){return i[o]}}}function O1(n,e,t){const r={};for(const i of e){const s=Wy(i);r[s.localName]=s.no,r[s.no]=s.localName}return Vy(r,n,e),r}function Wy(n){return"localName"in n?n:Object.assign(Object.assign({},n),{localName:n.name})}class P{equals(e){return this.getType().runtime.util.equals(this.getType(),this,e)}clone(){return this.getType().runtime.util.clone(this)}fromBinary(e,t){const r=this.getType(),i=r.runtime.bin,s=i.makeReadOptions(t);return i.readMessage(this,s.readerFactory(e),e.byteLength,s),this}fromJson(e,t){const r=this.getType(),i=r.runtime.json,s=i.makeReadOptions(t);return i.readMessage(r,e,s,this),this}fromJsonString(e,t){let r;try{r=JSON.parse(e)}catch(i){throw new Error(`cannot decode ${this.getType().typeName} from JSON: ${i instanceof Error?i.message:String(i)}`)}return this.fromJson(r,t)}toBinary(e){const t=this.getType(),r=t.runtime.bin,i=r.makeWriteOptions(e),s=i.writerFactory();return r.writeMessage(this,s,i),s.finish()}toJson(e){const t=this.getType(),r=t.runtime.json,i=r.makeWriteOptions(e);return r.writeMessage(this,i)}toJsonString(e){var t;const r=this.toJson(e);return JSON.stringify(r,null,(t=e==null?void 0:e.prettySpaces)!==null&&t!==void 0?t:0)}toJSON(){return this.toJson({emitDefaultValues:!0})}getType(){return Object.getPrototypeOf(this).constructor}}function L1(n,e,t,r){var i;const s=(i=r==null?void 0:r.localName)!==null&&i!==void 0?i:e.substring(e.lastIndexOf(".")+1),o={[s]:function(a){n.util.initFields(this),n.util.initPartial(a,this)}}[s];return Object.setPrototypeOf(o.prototype,new P),Object.assign(o,{runtime:n,typeName:e,fields:n.util.newFieldList(t),fromBinary(a,u){return new o().fromBinary(a,u)},fromJson(a,u){return new o().fromJson(a,u)},fromJsonString(a,u){return new o().fromJsonString(a,u)},equals(a,u){return n.util.equals(o,a,u)}}),o}function R1(){let n=0,e=0;for(let r=0;r<28;r+=7){let i=this.buf[this.pos++];if(n|=(i&127)<<r,!(i&128))return this.assertBounds(),[n,e]}let t=this.buf[this.pos++];if(n|=(t&15)<<28,e=(t&112)>>4,!(t&128))return this.assertBounds(),[n,e];for(let r=3;r<=31;r+=7){let i=this.buf[this.pos++];if(e|=(i&127)<<r,!(i&128))return this.assertBounds(),[n,e]}throw new Error("invalid varint")}function lc(n,e,t){for(let s=0;s<28;s=s+7){const o=n>>>s,a=!(!(o>>>7)&&e==0),u=(a?o|128:o)&255;if(t.push(u),!a)return}const r=n>>>28&15|(e&7)<<4,i=!!(e>>3);if(t.push((i?r|128:r)&255),!!i){for(let s=3;s<31;s=s+7){const o=e>>>s,a=!!(o>>>7),u=(a?o|128:o)&255;if(t.push(u),!a)return}t.push(e>>>31&1)}}const al=4294967296;function Pm(n){const e=n[0]==="-";e&&(n=n.slice(1));const t=1e6;let r=0,i=0;function s(o,a){const u=Number(n.slice(o,a));i*=t,r=r*t+u,r>=al&&(i=i+(r/al|0),r=r%al)}return s(-24,-18),s(-18,-12),s(-12,-6),s(-6),e?Gy(r,i):Zd(r,i)}function B1(n,e){let t=Zd(n,e);const r=t.hi&2147483648;r&&(t=Gy(t.lo,t.hi));const i=Hy(t.lo,t.hi);return r?"-"+i:i}function Hy(n,e){if({lo:n,hi:e}=z1(n,e),e<=2097151)return String(al*e+n);const t=n&16777215,r=(n>>>24|e<<8)&16777215,i=e>>16&65535;let s=t+r*6777216+i*6710656,o=r+i*8147497,a=i*2;const u=1e7;return s>=u&&(o+=Math.floor(s/u),s%=u),o>=u&&(a+=Math.floor(o/u),o%=u),a.toString()+Dm(o)+Dm(s)}function z1(n,e){return{lo:n>>>0,hi:e>>>0}}function Zd(n,e){return{lo:n|0,hi:e|0}}function Gy(n,e){return e=~e,n?n=~n+1:e+=1,Zd(n,e)}const Dm=n=>{const e=String(n);return"0000000".slice(e.length)+e};function bm(n,e){if(n>=0){for(;n>127;)e.push(n&127|128),n=n>>>7;e.push(n)}else{for(let t=0;t<9;t++)e.push(n&127|128),n=n>>7;e.push(1)}}function $1(){let n=this.buf[this.pos++],e=n&127;if(!(n&128))return this.assertBounds(),e;if(n=this.buf[this.pos++],e|=(n&127)<<7,!(n&128))return this.assertBounds(),e;if(n=this.buf[this.pos++],e|=(n&127)<<14,!(n&128))return this.assertBounds(),e;if(n=this.buf[this.pos++],e|=(n&127)<<21,!(n&128))return this.assertBounds(),e;n=this.buf[this.pos++],e|=(n&15)<<28;for(let t=5;n&128&&t<10;t++)n=this.buf[this.pos++];if(n&128)throw new Error("invalid varint");return this.assertBounds(),e>>>0}var Om={};function J1(){const n=new DataView(new ArrayBuffer(8));if(typeof BigInt=="function"&&typeof n.getBigInt64=="function"&&typeof n.getBigUint64=="function"&&typeof n.setBigInt64=="function"&&typeof n.setBigUint64=="function"&&(typeof process!="object"||typeof Om!="object"||Om.BUF_BIGINT_DISABLE!=="1")){const i=BigInt("-9223372036854775808"),s=BigInt("9223372036854775807"),o=BigInt("0"),a=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(u){const c=typeof u=="bigint"?u:BigInt(u);if(c>s||c<i)throw new Error(`int64 invalid: ${u}`);return c},uParse(u){const c=typeof u=="bigint"?u:BigInt(u);if(c>a||c<o)throw new Error(`uint64 invalid: ${u}`);return c},enc(u){return n.setBigInt64(0,this.parse(u),!0),{lo:n.getInt32(0,!0),hi:n.getInt32(4,!0)}},uEnc(u){return n.setBigInt64(0,this.uParse(u),!0),{lo:n.getInt32(0,!0),hi:n.getInt32(4,!0)}},dec(u,c){return n.setInt32(0,u,!0),n.setInt32(4,c,!0),n.getBigInt64(0,!0)},uDec(u,c){return n.setInt32(0,u,!0),n.setInt32(4,c,!0),n.getBigUint64(0,!0)}}}const t=i=>me(/^-?[0-9]+$/.test(i),`int64 invalid: ${i}`),r=i=>me(/^[0-9]+$/.test(i),`uint64 invalid: ${i}`);return{zero:"0",supported:!1,parse(i){return typeof i!="string"&&(i=i.toString()),t(i),i},uParse(i){return typeof i!="string"&&(i=i.toString()),r(i),i},enc(i){return typeof i!="string"&&(i=i.toString()),t(i),Pm(i)},uEnc(i){return typeof i!="string"&&(i=i.toString()),r(i),Pm(i)},dec(i,s){return B1(i,s)},uDec(i,s){return Hy(i,s)}}}const G=J1();var E;(function(n){n[n.DOUBLE=1]="DOUBLE",n[n.FLOAT=2]="FLOAT",n[n.INT64=3]="INT64",n[n.UINT64=4]="UINT64",n[n.INT32=5]="INT32",n[n.FIXED64=6]="FIXED64",n[n.FIXED32=7]="FIXED32",n[n.BOOL=8]="BOOL",n[n.STRING=9]="STRING",n[n.BYTES=12]="BYTES",n[n.UINT32=13]="UINT32",n[n.SFIXED32=15]="SFIXED32",n[n.SFIXED64=16]="SFIXED64",n[n.SINT32=17]="SINT32",n[n.SINT64=18]="SINT64"})(E||(E={}));var Di;(function(n){n[n.BIGINT=0]="BIGINT",n[n.STRING=1]="STRING"})(Di||(Di={}));function oi(n,e,t){if(e===t)return!0;if(n==E.BYTES){if(!(e instanceof Uint8Array)||!(t instanceof Uint8Array)||e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}switch(n){case E.UINT64:case E.FIXED64:case E.INT64:case E.SFIXED64:case E.SINT64:return e==t}return!1}function js(n,e){switch(n){case E.BOOL:return!1;case E.UINT64:case E.FIXED64:case E.INT64:case E.SFIXED64:case E.SINT64:return e==0?G.zero:"0";case E.DOUBLE:case E.FLOAT:return 0;case E.BYTES:return new Uint8Array(0);case E.STRING:return"";default:return 0}}function Yy(n,e){switch(n){case E.BOOL:return e===!1;case E.STRING:return e==="";case E.BYTES:return e instanceof Uint8Array&&!e.byteLength;default:return e==0}}var we;(function(n){n[n.Varint=0]="Varint",n[n.Bit64=1]="Bit64",n[n.LengthDelimited=2]="LengthDelimited",n[n.StartGroup=3]="StartGroup",n[n.EndGroup=4]="EndGroup",n[n.Bit32=5]="Bit32"})(we||(we={}));class M1{constructor(e){this.stack=[],this.textEncoder=e??new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let e=0;for(let i=0;i<this.chunks.length;i++)e+=this.chunks[i].length;let t=new Uint8Array(e),r=0;for(let i=0;i<this.chunks.length;i++)t.set(this.chunks[i],r),r+=this.chunks[i].length;return this.chunks=[],t}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),t=this.stack.pop();if(!t)throw new Error("invalid state, fork stack empty");return this.chunks=t.chunks,this.buf=t.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,t){return this.uint32((e<<3|t)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(cf(e);e>127;)this.buf.push(e&127|128),e=e>>>7;return this.buf.push(e),this}int32(e){return ol(e),bm(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let t=this.textEncoder.encode(e);return this.uint32(t.byteLength),this.raw(t)}float(e){jy(e);let t=new Uint8Array(4);return new DataView(t.buffer).setFloat32(0,e,!0),this.raw(t)}double(e){let t=new Uint8Array(8);return new DataView(t.buffer).setFloat64(0,e,!0),this.raw(t)}fixed32(e){cf(e);let t=new Uint8Array(4);return new DataView(t.buffer).setUint32(0,e,!0),this.raw(t)}sfixed32(e){ol(e);let t=new Uint8Array(4);return new DataView(t.buffer).setInt32(0,e,!0),this.raw(t)}sint32(e){return ol(e),e=(e<<1^e>>31)>>>0,bm(e,this.buf),this}sfixed64(e){let t=new Uint8Array(8),r=new DataView(t.buffer),i=G.enc(e);return r.setInt32(0,i.lo,!0),r.setInt32(4,i.hi,!0),this.raw(t)}fixed64(e){let t=new Uint8Array(8),r=new DataView(t.buffer),i=G.uEnc(e);return r.setInt32(0,i.lo,!0),r.setInt32(4,i.hi,!0),this.raw(t)}int64(e){let t=G.enc(e);return lc(t.lo,t.hi,this.buf),this}sint64(e){let t=G.enc(e),r=t.hi>>31,i=t.lo<<1^r,s=(t.hi<<1|t.lo>>>31)^r;return lc(i,s,this.buf),this}uint64(e){let t=G.uEnc(e);return lc(t.lo,t.hi,this.buf),this}}class F1{constructor(e,t){this.varint64=R1,this.uint32=$1,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength),this.textDecoder=t??new TextDecoder}tag(){let e=this.uint32(),t=e>>>3,r=e&7;if(t<=0||r<0||r>5)throw new Error("illegal tag: field no "+t+" wire type "+r);return[t,r]}skip(e,t){let r=this.pos;switch(e){case we.Varint:for(;this.buf[this.pos++]&128;);break;case we.Bit64:this.pos+=4;case we.Bit32:this.pos+=4;break;case we.LengthDelimited:let i=this.uint32();this.pos+=i;break;case we.StartGroup:for(;;){const[s,o]=this.tag();if(o===we.EndGroup){if(t!==void 0&&s!==t)throw new Error("invalid end group tag");break}this.skip(o,s)}break;default:throw new Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(r,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let e=this.uint32();return e>>>1^-(e&1)}int64(){return G.dec(...this.varint64())}uint64(){return G.uDec(...this.varint64())}sint64(){let[e,t]=this.varint64(),r=-(e&1);return e=(e>>>1|(t&1)<<31)^r,t=t>>>1^r,G.dec(e,t)}bool(){let[e,t]=this.varint64();return e!==0||t!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return G.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return G.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),t=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(t,t+e)}string(){return this.textDecoder.decode(this.bytes())}}function U1(n,e,t,r){let i;return{typeName:e,extendee:t,get field(){if(!i){const s=typeof r=="function"?r():r;s.name=e.split(".").pop(),s.jsonName=`[${e}]`,i=n.util.newFieldList([s]).list()[0]}return i},runtime:n}}function _y(n){const e=n.field.localName,t=Object.create(null);return t[e]=j1(n),[t,()=>t[e]]}function j1(n){const e=n.field;if(e.repeated)return[];if(e.default!==void 0)return e.default;switch(e.kind){case"enum":return e.T.values[0].no;case"scalar":return js(e.T,e.L);case"message":const t=e.T,r=new t;return t.fieldWrapper?t.fieldWrapper.unwrapField(r):r;case"map":throw"map fields are not allowed to be extensions"}}function q1(n,e){if(!e.repeated&&(e.kind=="enum"||e.kind=="scalar")){for(let t=n.length-1;t>=0;--t)if(n[t].no==e.no)return[n[t]];return[]}return n.filter(t=>t.no===e.no)}let Ur="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),Eu=[];for(let n=0;n<Ur.length;n++)Eu[Ur[n].charCodeAt(0)]=n;Eu[45]=Ur.indexOf("+");Eu[95]=Ur.indexOf("/");const eh={dec(n){let e=n.length*3/4;n[n.length-2]=="="?e-=2:n[n.length-1]=="="&&(e-=1);let t=new Uint8Array(e),r=0,i=0,s,o=0;for(let a=0;a<n.length;a++){if(s=Eu[n.charCodeAt(a)],s===void 0)switch(n[a]){case"=":i=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(i){case 0:o=s,i=1;break;case 1:t[r++]=o<<2|(s&48)>>4,o=s,i=2;break;case 2:t[r++]=(o&15)<<4|(s&60)>>2,o=s,i=3;break;case 3:t[r++]=(o&3)<<6|s,i=0;break}}if(i==1)throw Error("invalid base64 string.");return t.subarray(0,r)},enc(n){let e="",t=0,r,i=0;for(let s=0;s<n.length;s++)switch(r=n[s],t){case 0:e+=Ur[r>>2],i=(r&3)<<4,t=1;break;case 1:e+=Ur[i|r>>4],i=(r&15)<<2,t=2;break;case 2:e+=Ur[i|r>>6],e+=Ur[r&63],t=0;break}return t&&(e+=Ur[i],e+="=",t==1&&(e+="=")),e}};function V1(n,e,t){Qy(e,n);const r=e.runtime.bin.makeReadOptions(t),i=q1(n.getType().runtime.bin.listUnknownFields(n),e.field),[s,o]=_y(e);for(const a of i)e.runtime.bin.readField(s,r.readerFactory(a.data),e.field,a.wireType,r);return o()}function K1(n,e,t,r){Qy(e,n);const i=e.runtime.bin.makeReadOptions(r),s=e.runtime.bin.makeWriteOptions(r);if(Xy(n,e)){const c=n.getType().runtime.bin.listUnknownFields(n).filter(d=>d.no!=e.field.no);n.getType().runtime.bin.discardUnknownFields(n);for(const d of c)n.getType().runtime.bin.onUnknownField(n,d.no,d.wireType,d.data)}const o=s.writerFactory();let a=e.field;!a.opt&&!a.repeated&&(a.kind=="enum"||a.kind=="scalar")&&(a=Object.assign(Object.assign({},e.field),{opt:!0})),e.runtime.bin.writeField(a,t,o,s);const u=i.readerFactory(o.finish());for(;u.pos<u.len;){const[c,d]=u.tag(),h=u.skip(d,c);n.getType().runtime.bin.onUnknownField(n,c,d,h)}}function Xy(n,e){const t=n.getType();return e.extendee.typeName===t.typeName&&!!t.runtime.bin.listUnknownFields(n).find(r=>r.no==e.field.no)}function Qy(n,e){me(n.extendee.typeName==e.getType().typeName,`extension ${n.typeName} can only be applied to message ${n.extendee.typeName}`)}function Zy(n,e){const t=n.localName;if(n.repeated)return e[t].length>0;if(n.oneof)return e[n.oneof.localName].case===t;switch(n.kind){case"enum":case"scalar":return n.opt||n.req?e[t]!==void 0:n.kind=="enum"?e[t]!==n.T.values[0].no:!Yy(n.T,e[t]);case"message":return e[t]!==void 0;case"map":return Object.keys(e[t]).length>0}}function Lm(n,e){const t=n.localName,r=!n.opt&&!n.req;if(n.repeated)e[t]=[];else if(n.oneof)e[n.oneof.localName]={case:void 0};else switch(n.kind){case"map":e[t]={};break;case"enum":e[t]=r?n.T.values[0].no:void 0;break;case"scalar":e[t]=r?js(n.T,n.L):void 0;break;case"message":e[t]=void 0;break}}function jr(n,e){if(n===null||typeof n!="object"||!Object.getOwnPropertyNames(P.prototype).every(r=>r in n&&typeof n[r]=="function"))return!1;const t=n.getType();return t===null||typeof t!="function"||!("typeName"in t)||typeof t.typeName!="string"?!1:e===void 0?!0:t.typeName==e.typeName}function ev(n,e){return jr(e)||!n.fieldWrapper?e:n.fieldWrapper.wrapField(e)}E.DOUBLE,E.FLOAT,E.INT64,E.UINT64,E.INT32,E.UINT32,E.BOOL,E.STRING,E.BYTES;const Rm={ignoreUnknownFields:!1},Bm={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0};function W1(n){return n?Object.assign(Object.assign({},Rm),n):Rm}function H1(n){return n?Object.assign(Object.assign({},Bm),n):Bm}const zl=Symbol(),ll=Symbol();function G1(){return{makeReadOptions:W1,makeWriteOptions:H1,readMessage(n,e,t,r){if(e==null||Array.isArray(e)||typeof e!="object")throw new Error(`cannot decode message ${n.typeName} from JSON: ${Qt(e)}`);r=r??new n;const i=new Map,s=t.typeRegistry;for(const[o,a]of Object.entries(e)){const u=n.fields.findJsonName(o);if(u){if(u.oneof){if(a===null&&u.kind=="scalar")continue;const c=i.get(u.oneof);if(c!==void 0)throw new Error(`cannot decode message ${n.typeName} from JSON: multiple keys for oneof "${u.oneof.name}" present: "${c}", "${o}"`);i.set(u.oneof,o)}zm(r,a,u,t,n)}else{let c=!1;if(s!=null&&s.findExtension&&o.startsWith("[")&&o.endsWith("]")){const d=s.findExtension(o.substring(1,o.length-1));if(d&&d.extendee.typeName==n.typeName){c=!0;const[h,m]=_y(d);zm(h,a,d.field,t,d),K1(r,d,m(),t)}}if(!c&&!t.ignoreUnknownFields)throw new Error(`cannot decode message ${n.typeName} from JSON: key "${o}" is unknown`)}}return r},writeMessage(n,e){const t=n.getType(),r={};let i;try{for(i of t.fields.byNumber()){if(!Zy(i,n)){if(i.req)throw"required field not set";if(!e.emitDefaultValues||!_1(i))continue}const o=i.oneof?n[i.oneof.localName].value:n[i.localName],a=$m(i,o,e);a!==void 0&&(r[e.useProtoFieldName?i.name:i.jsonName]=a)}const s=e.typeRegistry;if(s!=null&&s.findExtensionFor)for(const o of t.runtime.bin.listUnknownFields(n)){const a=s.findExtensionFor(t.typeName,o.no);if(a&&Xy(n,a)){const u=V1(n,a,e),c=$m(a.field,u,e);c!==void 0&&(r[a.field.jsonName]=c)}}}catch(s){const o=i?`cannot encode field ${t.typeName}.${i.name} to JSON`:`cannot encode message ${t.typeName} to JSON`,a=s instanceof Error?s.message:String(s);throw new Error(o+(a.length>0?`: ${a}`:""))}return r},readScalar(n,e,t){return Ro(n,e,t??Di.BIGINT,!0)},writeScalar(n,e,t){if(e!==void 0&&(t||Yy(n,e)))return ul(n,e)},debug:Qt}}function Qt(n){if(n===null)return"null";switch(typeof n){case"object":return Array.isArray(n)?"array":"object";case"string":return n.length>100?"string":`"${n.split('"').join('\\"')}"`;default:return String(n)}}function zm(n,e,t,r,i){let s=t.localName;if(t.repeated){if(me(t.kind!="map"),e===null)return;if(!Array.isArray(e))throw new Error(`cannot decode field ${i.typeName}.${t.name} from JSON: ${Qt(e)}`);const o=n[s];for(const a of e){if(a===null)throw new Error(`cannot decode field ${i.typeName}.${t.name} from JSON: ${Qt(a)}`);switch(t.kind){case"message":o.push(t.T.fromJson(a,r));break;case"enum":const u=uc(t.T,a,r.ignoreUnknownFields,!0);u!==ll&&o.push(u);break;case"scalar":try{o.push(Ro(t.T,a,t.L,!0))}catch(c){let d=`cannot decode field ${i.typeName}.${t.name} from JSON: ${Qt(a)}`;throw c instanceof Error&&c.message.length>0&&(d+=`: ${c.message}`),new Error(d)}break}}}else if(t.kind=="map"){if(e===null)return;if(typeof e!="object"||Array.isArray(e))throw new Error(`cannot decode field ${i.typeName}.${t.name} from JSON: ${Qt(e)}`);const o=n[s];for(const[a,u]of Object.entries(e)){if(u===null)throw new Error(`cannot decode field ${i.typeName}.${t.name} from JSON: map value null`);let c;try{c=Y1(t.K,a)}catch(d){let h=`cannot decode map key for field ${i.typeName}.${t.name} from JSON: ${Qt(e)}`;throw d instanceof Error&&d.message.length>0&&(h+=`: ${d.message}`),new Error(h)}switch(t.V.kind){case"message":o[c]=t.V.T.fromJson(u,r);break;case"enum":const d=uc(t.V.T,u,r.ignoreUnknownFields,!0);d!==ll&&(o[c]=d);break;case"scalar":try{o[c]=Ro(t.V.T,u,Di.BIGINT,!0)}catch(h){let m=`cannot decode map value for field ${i.typeName}.${t.name} from JSON: ${Qt(e)}`;throw h instanceof Error&&h.message.length>0&&(m+=`: ${h.message}`),new Error(m)}break}}}else switch(t.oneof&&(n=n[t.oneof.localName]={case:s},s="value"),t.kind){case"message":const o=t.T;if(e===null&&o.typeName!="google.protobuf.Value")return;let a=n[s];jr(a)?a.fromJson(e,r):(n[s]=a=o.fromJson(e,r),o.fieldWrapper&&!t.oneof&&(n[s]=o.fieldWrapper.unwrapField(a)));break;case"enum":const u=uc(t.T,e,r.ignoreUnknownFields,!1);switch(u){case zl:Lm(t,n);break;case ll:break;default:n[s]=u;break}break;case"scalar":try{const c=Ro(t.T,e,t.L,!1);switch(c){case zl:Lm(t,n);break;default:n[s]=c;break}}catch(c){let d=`cannot decode field ${i.typeName}.${t.name} from JSON: ${Qt(e)}`;throw c instanceof Error&&c.message.length>0&&(d+=`: ${c.message}`),new Error(d)}break}}function Y1(n,e){if(n===E.BOOL)switch(e){case"true":e=!0;break;case"false":e=!1;break}return Ro(n,e,Di.BIGINT,!0).toString()}function Ro(n,e,t,r){if(e===null)return r?js(n,t):zl;switch(n){case E.DOUBLE:case E.FLOAT:if(e==="NaN")return Number.NaN;if(e==="Infinity")return Number.POSITIVE_INFINITY;if(e==="-Infinity")return Number.NEGATIVE_INFINITY;if(e===""||typeof e=="string"&&e.trim().length!==e.length||typeof e!="string"&&typeof e!="number")break;const i=Number(e);if(Number.isNaN(i)||!Number.isFinite(i))break;return n==E.FLOAT&&jy(i),i;case E.INT32:case E.FIXED32:case E.SFIXED32:case E.SINT32:case E.UINT32:let s;if(typeof e=="number"?s=e:typeof e=="string"&&e.length>0&&e.trim().length===e.length&&(s=Number(e)),s===void 0)break;return n==E.UINT32||n==E.FIXED32?cf(s):ol(s),s;case E.INT64:case E.SFIXED64:case E.SINT64:if(typeof e!="number"&&typeof e!="string")break;const o=G.parse(e);return t?o.toString():o;case E.FIXED64:case E.UINT64:if(typeof e!="number"&&typeof e!="string")break;const a=G.uParse(e);return t?a.toString():a;case E.BOOL:if(typeof e!="boolean")break;return e;case E.STRING:if(typeof e!="string")break;try{encodeURIComponent(e)}catch{throw new Error("invalid UTF8")}return e;case E.BYTES:if(e==="")return new Uint8Array(0);if(typeof e!="string")break;return eh.dec(e)}throw new Error}function uc(n,e,t,r){if(e===null)return n.typeName=="google.protobuf.NullValue"?0:r?n.values[0].no:zl;switch(typeof e){case"number":if(Number.isInteger(e))return e;break;case"string":const i=n.findName(e);if(i!==void 0)return i.no;if(t)return ll;break}throw new Error(`cannot decode enum ${n.typeName} from JSON: ${Qt(e)}`)}function _1(n){return n.repeated||n.kind=="map"?!0:!(n.oneof||n.kind=="message"||n.opt||n.req)}function $m(n,e,t){if(n.kind=="map"){me(typeof e=="object"&&e!=null);const r={},i=Object.entries(e);switch(n.V.kind){case"scalar":for(const[o,a]of i)r[o.toString()]=ul(n.V.T,a);break;case"message":for(const[o,a]of i)r[o.toString()]=a.toJson(t);break;case"enum":const s=n.V.T;for(const[o,a]of i)r[o.toString()]=cc(s,a,t.enumAsInteger);break}return t.emitDefaultValues||i.length>0?r:void 0}if(n.repeated){me(Array.isArray(e));const r=[];switch(n.kind){case"scalar":for(let i=0;i<e.length;i++)r.push(ul(n.T,e[i]));break;case"enum":for(let i=0;i<e.length;i++)r.push(cc(n.T,e[i],t.enumAsInteger));break;case"message":for(let i=0;i<e.length;i++)r.push(e[i].toJson(t));break}return t.emitDefaultValues||r.length>0?r:void 0}switch(n.kind){case"scalar":return ul(n.T,e);case"enum":return cc(n.T,e,t.enumAsInteger);case"message":return ev(n.T,e).toJson(t)}}function cc(n,e,t){var r;if(me(typeof e=="number"),n.typeName=="google.protobuf.NullValue")return null;if(t)return e;const i=n.findNumber(e);return(r=i==null?void 0:i.name)!==null&&r!==void 0?r:e}function ul(n,e){switch(n){case E.INT32:case E.SFIXED32:case E.SINT32:case E.FIXED32:case E.UINT32:return me(typeof e=="number"),e;case E.FLOAT:case E.DOUBLE:return me(typeof e=="number"),Number.isNaN(e)?"NaN":e===Number.POSITIVE_INFINITY?"Infinity":e===Number.NEGATIVE_INFINITY?"-Infinity":e;case E.STRING:return me(typeof e=="string"),e;case E.BOOL:return me(typeof e=="boolean"),e;case E.UINT64:case E.FIXED64:case E.INT64:case E.SFIXED64:case E.SINT64:return me(typeof e=="bigint"||typeof e=="string"||typeof e=="number"),e.toString();case E.BYTES:return me(e instanceof Uint8Array),eh.enc(e)}}const ls=Symbol("@bufbuild/protobuf/unknown-fields"),Jm={readUnknownFields:!0,readerFactory:n=>new F1(n)},Mm={writeUnknownFields:!0,writerFactory:()=>new M1};function X1(n){return n?Object.assign(Object.assign({},Jm),n):Jm}function Q1(n){return n?Object.assign(Object.assign({},Mm),n):Mm}function Z1(){return{makeReadOptions:X1,makeWriteOptions:Q1,listUnknownFields(n){var e;return(e=n[ls])!==null&&e!==void 0?e:[]},discardUnknownFields(n){delete n[ls]},writeUnknownFields(n,e){const r=n[ls];if(r)for(const i of r)e.tag(i.no,i.wireType).raw(i.data)},onUnknownField(n,e,t,r){const i=n;Array.isArray(i[ls])||(i[ls]=[]),i[ls].push({no:e,wireType:t,data:r})},readMessage(n,e,t,r,i){const s=n.getType(),o=i?e.len:e.pos+t;let a,u;for(;e.pos<o&&([a,u]=e.tag(),!(i===!0&&u==we.EndGroup));){const c=s.fields.find(a);if(!c){const d=e.skip(u,a);r.readUnknownFields&&this.onUnknownField(n,a,u,d);continue}Fm(n,e,c,u,r)}if(i&&(u!=we.EndGroup||a!==t))throw new Error("invalid end group tag")},readField:Fm,writeMessage(n,e,t){const r=n.getType();for(const i of r.fields.byNumber()){if(!Zy(i,n)){if(i.req)throw new Error(`cannot encode field ${r.typeName}.${i.name} to binary: required field not set`);continue}const s=i.oneof?n[i.oneof.localName].value:n[i.localName];Um(i,s,e,t)}return t.writeUnknownFields&&this.writeUnknownFields(n,e),e},writeField(n,e,t,r){e!==void 0&&Um(n,e,t,r)}}}function Fm(n,e,t,r,i){let{repeated:s,localName:o}=t;switch(t.oneof&&(n=n[t.oneof.localName],n.case!=o&&delete n.value,n.case=o,o="value"),t.kind){case"scalar":case"enum":const a=t.kind=="enum"?E.INT32:t.T;let u=$l;if(t.kind=="scalar"&&t.L>0&&(u=tS),s){let m=n[o];if(r==we.LengthDelimited&&a!=E.STRING&&a!=E.BYTES){let w=e.uint32()+e.pos;for(;e.pos<w;)m.push(u(e,a))}else m.push(u(e,a))}else n[o]=u(e,a);break;case"message":const c=t.T;s?n[o].push(cl(e,new c,i,t)):jr(n[o])?cl(e,n[o],i,t):(n[o]=cl(e,new c,i,t),c.fieldWrapper&&!t.oneof&&!t.repeated&&(n[o]=c.fieldWrapper.unwrapField(n[o])));break;case"map":let[d,h]=eS(t,e,i);n[o][d]=h;break}}function cl(n,e,t,r){const i=e.getType().runtime.bin,s=r==null?void 0:r.delimited;return i.readMessage(e,n,s?r.no:n.uint32(),t,s),e}function eS(n,e,t){const r=e.uint32(),i=e.pos+r;let s,o;for(;e.pos<i;){const[a]=e.tag();switch(a){case 1:s=$l(e,n.K);break;case 2:switch(n.V.kind){case"scalar":o=$l(e,n.V.T);break;case"enum":o=e.int32();break;case"message":o=cl(e,new n.V.T,t,void 0);break}break}}if(s===void 0&&(s=js(n.K,Di.BIGINT)),typeof s!="string"&&typeof s!="number"&&(s=s.toString()),o===void 0)switch(n.V.kind){case"scalar":o=js(n.V.T,Di.BIGINT);break;case"enum":o=n.V.T.values[0].no;break;case"message":o=new n.V.T;break}return[s,o]}function tS(n,e){const t=$l(n,e);return typeof t=="bigint"?t.toString():t}function $l(n,e){switch(e){case E.STRING:return n.string();case E.BOOL:return n.bool();case E.DOUBLE:return n.double();case E.FLOAT:return n.float();case E.INT32:return n.int32();case E.INT64:return n.int64();case E.UINT64:return n.uint64();case E.FIXED64:return n.fixed64();case E.BYTES:return n.bytes();case E.FIXED32:return n.fixed32();case E.SFIXED32:return n.sfixed32();case E.SFIXED64:return n.sfixed64();case E.SINT64:return n.sint64();case E.UINT32:return n.uint32();case E.SINT32:return n.sint32()}}function Um(n,e,t,r){me(e!==void 0);const i=n.repeated;switch(n.kind){case"scalar":case"enum":let s=n.kind=="enum"?E.INT32:n.T;if(i)if(me(Array.isArray(e)),n.packed)rS(t,s,n.no,e);else for(const o of e)Bo(t,s,n.no,o);else Bo(t,s,n.no,e);break;case"message":if(i){me(Array.isArray(e));for(const o of e)jm(t,r,n,o)}else jm(t,r,n,e);break;case"map":me(typeof e=="object"&&e!=null);for(const[o,a]of Object.entries(e))nS(t,r,n,o,a);break}}function nS(n,e,t,r,i){n.tag(t.no,we.LengthDelimited),n.fork();let s=r;switch(t.K){case E.INT32:case E.FIXED32:case E.UINT32:case E.SFIXED32:case E.SINT32:s=Number.parseInt(r);break;case E.BOOL:me(r=="true"||r=="false"),s=r=="true";break}switch(Bo(n,t.K,1,s),t.V.kind){case"scalar":Bo(n,t.V.T,2,i);break;case"enum":Bo(n,E.INT32,2,i);break;case"message":me(i!==void 0),n.tag(2,we.LengthDelimited).bytes(i.toBinary(e));break}n.join()}function jm(n,e,t,r){const i=ev(t.T,r);t.delimited?n.tag(t.no,we.StartGroup).raw(i.toBinary(e)).tag(t.no,we.EndGroup):n.tag(t.no,we.LengthDelimited).bytes(i.toBinary(e))}function Bo(n,e,t,r){me(r!==void 0);let[i,s]=tv(e);n.tag(t,i)[s](r)}function rS(n,e,t,r){if(!r.length)return;n.tag(t,we.LengthDelimited).fork();let[,i]=tv(e);for(let s=0;s<r.length;s++)n[i](r[s]);n.join()}function tv(n){let e=we.Varint;switch(n){case E.BYTES:case E.STRING:e=we.LengthDelimited;break;case E.DOUBLE:case E.FIXED64:case E.SFIXED64:e=we.Bit64;break;case E.FIXED32:case E.SFIXED32:case E.FLOAT:e=we.Bit32;break}const t=E[n].toLowerCase();return[e,t]}function iS(){return{setEnumType:Vy,initPartial(n,e){if(n===void 0)return;const t=e.getType();for(const r of t.fields.byMember()){const i=r.localName,s=e,o=n;if(o[i]!=null)switch(r.kind){case"oneof":const a=o[i].case;if(a===void 0)continue;const u=r.findField(a);let c=o[i].value;u&&u.kind=="message"&&!jr(c,u.T)?c=new u.T(c):u&&u.kind==="scalar"&&u.T===E.BYTES&&(c=go(c)),s[i]={case:a,value:c};break;case"scalar":case"enum":let d=o[i];r.T===E.BYTES&&(d=r.repeated?d.map(go):go(d)),s[i]=d;break;case"map":switch(r.V.kind){case"scalar":case"enum":if(r.V.T===E.BYTES)for(const[p,w]of Object.entries(o[i]))s[i][p]=go(w);else Object.assign(s[i],o[i]);break;case"message":const m=r.V.T;for(const p of Object.keys(o[i])){let w=o[i][p];m.fieldWrapper||(w=new m(w)),s[i][p]=w}break}break;case"message":const h=r.T;if(r.repeated)s[i]=o[i].map(m=>jr(m,h)?m:new h(m));else{const m=o[i];h.fieldWrapper?h.typeName==="google.protobuf.BytesValue"?s[i]=go(m):s[i]=m:s[i]=jr(m,h)?m:new h(m)}break}}},equals(n,e,t){return e===t?!0:!e||!t?!1:n.fields.byMember().every(r=>{const i=e[r.localName],s=t[r.localName];if(r.repeated){if(i.length!==s.length)return!1;switch(r.kind){case"message":return i.every((o,a)=>r.T.equals(o,s[a]));case"scalar":return i.every((o,a)=>oi(r.T,o,s[a]));case"enum":return i.every((o,a)=>oi(E.INT32,o,s[a]))}throw new Error(`repeated cannot contain ${r.kind}`)}switch(r.kind){case"message":let o=i,a=s;return r.T.fieldWrapper&&(o!==void 0&&!jr(o)&&(o=r.T.fieldWrapper.wrapField(o)),a!==void 0&&!jr(a)&&(a=r.T.fieldWrapper.wrapField(a))),r.T.equals(o,a);case"enum":return oi(E.INT32,i,s);case"scalar":return oi(r.T,i,s);case"oneof":if(i.case!==s.case)return!1;const u=r.findField(i.case);if(u===void 0)return!0;switch(u.kind){case"message":return u.T.equals(i.value,s.value);case"enum":return oi(E.INT32,i.value,s.value);case"scalar":return oi(u.T,i.value,s.value)}throw new Error(`oneof cannot contain ${u.kind}`);case"map":const c=Object.keys(i).concat(Object.keys(s));switch(r.V.kind){case"message":const d=r.V.T;return c.every(m=>d.equals(i[m],s[m]));case"enum":return c.every(m=>oi(E.INT32,i[m],s[m]));case"scalar":const h=r.V.T;return c.every(m=>oi(h,i[m],s[m]))}break}})},clone(n){const e=n.getType(),t=new e,r=t;for(const i of e.fields.byMember()){const s=n[i.localName];let o;if(i.repeated)o=s.map(Ua);else if(i.kind=="map"){o=r[i.localName];for(const[a,u]of Object.entries(s))o[a]=Ua(u)}else i.kind=="oneof"?o=i.findField(s.case)?{case:s.case,value:Ua(s.value)}:{case:void 0}:o=Ua(s);r[i.localName]=o}for(const i of e.runtime.bin.listUnknownFields(n))e.runtime.bin.onUnknownField(r,i.no,i.wireType,i.data);return t}}}function Ua(n){if(n===void 0)return n;if(jr(n))return n.clone();if(n instanceof Uint8Array){const e=new Uint8Array(n.byteLength);return e.set(n),e}return n}function go(n){return n instanceof Uint8Array?n:new Uint8Array(n)}function sS(n,e,t){return{syntax:n,json:G1(),bin:Z1(),util:Object.assign(Object.assign({},iS()),{newFieldList:e,initFields:t}),makeMessageType(r,i,s){return L1(this,r,i,s)},makeEnum:O1,makeEnumType:Ky,getEnumType:b1,makeExtension(r,i,s){return U1(this,r,i,s)}}}class oS{constructor(e,t){this._fields=e,this._normalizer=t}findJsonName(e){if(!this.jsonNames){const t={};for(const r of this.list())t[r.jsonName]=t[r.name]=r;this.jsonNames=t}return this.jsonNames[e]}find(e){if(!this.numbers){const t={};for(const r of this.list())t[r.no]=r;this.numbers=t}return this.numbers[e]}list(){return this.all||(this.all=this._normalizer(this._fields)),this.all}byNumber(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort((e,t)=>e.no-t.no)),this.numbersAsc}byMember(){if(!this.members){this.members=[];const e=this.members;let t;for(const r of this.list())r.oneof?r.oneof!==t&&(t=r.oneof,e.push(t)):e.push(r)}return this.members}}function nv(n,e){const t=rv(n);return e?t:dS(fS(t))}function aS(n){return nv(n,!1)}const lS=rv;function rv(n){let e=!1;const t=[];for(let r=0;r<n.length;r++){let i=n.charAt(r);switch(i){case"_":e=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":t.push(i),e=!1;break;default:e&&(e=!1,i=i.toUpperCase()),t.push(i);break}}return t.join("")}const uS=new Set(["constructor","toString","toJSON","valueOf"]),cS=new Set(["getType","clone","equals","fromBinary","fromJson","fromJsonString","toBinary","toJson","toJsonString","toObject"]),iv=n=>`${n}$`,fS=n=>cS.has(n)?iv(n):n,dS=n=>uS.has(n)?iv(n):n;class hS{constructor(e){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.req=!1,this.default=void 0,this.fields=[],this.name=e,this.localName=aS(e)}addField(e){me(e.oneof===this,`field ${e.name} not one of ${this.name}`),this.fields.push(e)}findField(e){if(!this._lookup){this._lookup=Object.create(null);for(let t=0;t<this.fields.length;t++)this._lookup[this.fields[t].localName]=this.fields[t]}return this._lookup[e]}}function mS(n,e){var t,r,i,s,o,a;const u=[];let c;for(const d of typeof n=="function"?n():n){const h=d;if(h.localName=nv(d.name,d.oneof!==void 0),h.jsonName=(t=d.jsonName)!==null&&t!==void 0?t:lS(d.name),h.repeated=(r=d.repeated)!==null&&r!==void 0?r:!1,d.kind=="scalar"&&(h.L=(i=d.L)!==null&&i!==void 0?i:Di.BIGINT),h.delimited=(s=d.delimited)!==null&&s!==void 0?s:!1,h.req=(o=d.req)!==null&&o!==void 0?o:!1,h.opt=(a=d.opt)!==null&&a!==void 0?a:!1,d.packed===void 0&&(h.packed=d.kind=="enum"||d.kind=="scalar"&&d.T!=E.BYTES&&d.T!=E.STRING),d.oneof!==void 0){const m=typeof d.oneof=="string"?d.oneof:d.oneof.name;(!c||c.name!=m)&&(c=new hS(m)),h.oneof=c,c.addField(h)}u.push(h)}return u}const f=sS("proto3",n=>new oS(n,e=>mS(e)),n=>{for(const e of n.getType().fields.byMember()){if(e.opt)continue;const t=e.localName,r=n;if(e.repeated){r[t]=[];continue}switch(e.kind){case"oneof":r[t]={case:void 0};break;case"enum":r[t]=0;break;case"map":r[t]={};break;case"scalar":r[t]=js(e.T,e.L);break}}});var de;(function(n){n[n.Unary=0]="Unary",n[n.ServerStreaming=1]="ServerStreaming",n[n.ClientStreaming=2]="ClientStreaming",n[n.BiDiStreaming=3]="BiDiStreaming"})(de||(de={}));var qm;(function(n){n[n.NoSideEffects=1]="NoSideEffects",n[n.Idempotent=2]="Idempotent"})(qm||(qm={}));class Ce extends P{constructor(e){super(),this.seconds=G.zero,this.nanos=0,f.util.initPartial(e,this)}fromJson(e,t){if(typeof e!="string")throw new Error(`cannot decode google.protobuf.Timestamp from JSON: ${f.json.debug(e)}`);const r=e.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!r)throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");const i=Date.parse(r[1]+"-"+r[2]+"-"+r[3]+"T"+r[4]+":"+r[5]+":"+r[6]+(r[8]?r[8]:"Z"));if(Number.isNaN(i))throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");if(i<Date.parse("0001-01-01T00:00:00Z")||i>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot decode message google.protobuf.Timestamp from JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");return this.seconds=G.parse(i/1e3),this.nanos=0,r[7]&&(this.nanos=parseInt("1"+r[7]+"0".repeat(9-r[7].length))-1e9),this}toJson(e){const t=Number(this.seconds)*1e3;if(t<Date.parse("0001-01-01T00:00:00Z")||t>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot encode google.protobuf.Timestamp to JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");if(this.nanos<0)throw new Error("cannot encode google.protobuf.Timestamp to JSON: nanos must not be negative");let r="Z";if(this.nanos>0){const i=(this.nanos+1e9).toString().substring(1);i.substring(3)==="000000"?r="."+i.substring(0,3)+"Z":i.substring(6)==="000"?r="."+i.substring(0,6)+"Z":r="."+i+"Z"}return new Date(t).toISOString().replace(".000Z",r)}toDate(){return new Date(Number(this.seconds)*1e3+Math.ceil(this.nanos/1e6))}static now(){return Ce.fromDate(new Date)}static fromDate(e){const t=e.getTime();return new Ce({seconds:G.parse(Math.floor(t/1e3)),nanos:t%1e3*1e6})}static fromBinary(e,t){return new Ce().fromBinary(e,t)}static fromJson(e,t){return new Ce().fromJson(e,t)}static fromJsonString(e,t){return new Ce().fromJsonString(e,t)}static equals(e,t){return f.util.equals(Ce,e,t)}}Ce.runtime=f;Ce.typeName="google.protobuf.Timestamp";Ce.fields=f.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);class Kr extends P{constructor(e){super(),this.seconds=G.zero,this.nanos=0,f.util.initPartial(e,this)}fromJson(e,t){if(typeof e!="string")throw new Error(`cannot decode google.protobuf.Duration from JSON: ${f.json.debug(e)}`);const r=e.match(/^(-?[0-9]+)(?:\.([0-9]+))?s/);if(r===null)throw new Error(`cannot decode google.protobuf.Duration from JSON: ${f.json.debug(e)}`);const i=Number(r[1]);if(i>315576e6||i<-315576e6)throw new Error(`cannot decode google.protobuf.Duration from JSON: ${f.json.debug(e)}`);if(this.seconds=G.parse(i),typeof r[2]=="string"){const s=r[2]+"0".repeat(9-r[2].length);this.nanos=parseInt(s),(i<0||Object.is(i,-0))&&(this.nanos=-this.nanos)}return this}toJson(e){if(Number(this.seconds)>315576e6||Number(this.seconds)<-315576e6)throw new Error("cannot encode google.protobuf.Duration to JSON: value out of range");let t=this.seconds.toString();if(this.nanos!==0){let r=Math.abs(this.nanos).toString();r="0".repeat(9-r.length)+r,r.substring(3)==="000000"?r=r.substring(0,3):r.substring(6)==="000"&&(r=r.substring(0,6)),t+="."+r,this.nanos<0&&Number(this.seconds)==0&&(t="-"+t)}return t+"s"}static fromBinary(e,t){return new Kr().fromBinary(e,t)}static fromJson(e,t){return new Kr().fromJson(e,t)}static fromJsonString(e,t){return new Kr().fromJsonString(e,t)}static equals(e,t){return f.util.equals(Kr,e,t)}}Kr.runtime=f;Kr.typeName="google.protobuf.Duration";Kr.fields=f.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);class en extends P{constructor(e){super(),this.typeUrl="",this.value=new Uint8Array(0),f.util.initPartial(e,this)}toJson(e){var t;if(this.typeUrl==="")return{};const r=this.typeUrlToName(this.typeUrl),i=(t=e==null?void 0:e.typeRegistry)===null||t===void 0?void 0:t.findMessage(r);if(!i)throw new Error(`cannot encode message google.protobuf.Any to JSON: "${this.typeUrl}" is not in the type registry`);let o=i.fromBinary(this.value).toJson(e);return(r.startsWith("google.protobuf.")||o===null||Array.isArray(o)||typeof o!="object")&&(o={value:o}),o["@type"]=this.typeUrl,o}fromJson(e,t){var r;if(e===null||Array.isArray(e)||typeof e!="object")throw new Error(`cannot decode message google.protobuf.Any from JSON: expected object but got ${e===null?"null":Array.isArray(e)?"array":typeof e}`);if(Object.keys(e).length==0)return this;const i=e["@type"];if(typeof i!="string"||i=="")throw new Error('cannot decode message google.protobuf.Any from JSON: "@type" is empty');const s=this.typeUrlToName(i),o=(r=t==null?void 0:t.typeRegistry)===null||r===void 0?void 0:r.findMessage(s);if(!o)throw new Error(`cannot decode message google.protobuf.Any from JSON: ${i} is not in the type registry`);let a;if(s.startsWith("google.protobuf.")&&Object.prototype.hasOwnProperty.call(e,"value"))a=o.fromJson(e.value,t);else{const u=Object.assign({},e);delete u["@type"],a=o.fromJson(u,t)}return this.packFrom(a),this}packFrom(e){this.value=e.toBinary(),this.typeUrl=this.typeNameToUrl(e.getType().typeName)}unpackTo(e){return this.is(e.getType())?(e.fromBinary(this.value),!0):!1}unpack(e){if(this.typeUrl==="")return;const t=e.findMessage(this.typeUrlToName(this.typeUrl));if(t)return t.fromBinary(this.value)}is(e){if(this.typeUrl==="")return!1;const t=this.typeUrlToName(this.typeUrl);let r="";return typeof e=="string"?r=e:r=e.typeName,t===r}typeNameToUrl(e){return`type.googleapis.com/${e}`}typeUrlToName(e){if(!e.length)throw new Error(`invalid type url: ${e}`);const t=e.lastIndexOf("/"),r=t>=0?e.substring(t+1):e;if(!r.length)throw new Error(`invalid type url: ${e}`);return r}static pack(e){const t=new en;return t.packFrom(e),t}static fromBinary(e,t){return new en().fromBinary(e,t)}static fromJson(e,t){return new en().fromJson(e,t)}static fromJsonString(e,t){return new en().fromJsonString(e,t)}static equals(e,t){return f.util.equals(en,e,t)}}en.runtime=f;en.typeName="google.protobuf.Any";en.fields=f.util.newFieldList(()=>[{no:1,name:"type_url",kind:"scalar",T:9},{no:2,name:"value",kind:"scalar",T:12}]);class tn extends P{constructor(e){super(),this.value=0,f.util.initPartial(e,this)}toJson(e){return f.json.writeScalar(E.DOUBLE,this.value,!0)}fromJson(e,t){try{this.value=f.json.readScalar(E.DOUBLE,e)}catch(r){let i='cannot decode message google.protobuf.DoubleValue from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new tn().fromBinary(e,t)}static fromJson(e,t){return new tn().fromJson(e,t)}static fromJsonString(e,t){return new tn().fromJsonString(e,t)}static equals(e,t){return f.util.equals(tn,e,t)}}tn.runtime=f;tn.typeName="google.protobuf.DoubleValue";tn.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:1}]);tn.fieldWrapper={wrapField(n){return new tn({value:n})},unwrapField(n){return n.value}};class nn extends P{constructor(e){super(),this.value=0,f.util.initPartial(e,this)}toJson(e){return f.json.writeScalar(E.FLOAT,this.value,!0)}fromJson(e,t){try{this.value=f.json.readScalar(E.FLOAT,e)}catch(r){let i='cannot decode message google.protobuf.FloatValue from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new nn().fromBinary(e,t)}static fromJson(e,t){return new nn().fromJson(e,t)}static fromJsonString(e,t){return new nn().fromJsonString(e,t)}static equals(e,t){return f.util.equals(nn,e,t)}}nn.runtime=f;nn.typeName="google.protobuf.FloatValue";nn.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:2}]);nn.fieldWrapper={wrapField(n){return new nn({value:n})},unwrapField(n){return n.value}};class xt extends P{constructor(e){super(),this.value=G.zero,f.util.initPartial(e,this)}toJson(e){return f.json.writeScalar(E.INT64,this.value,!0)}fromJson(e,t){try{this.value=f.json.readScalar(E.INT64,e)}catch(r){let i='cannot decode message google.protobuf.Int64Value from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new xt().fromBinary(e,t)}static fromJson(e,t){return new xt().fromJson(e,t)}static fromJsonString(e,t){return new xt().fromJsonString(e,t)}static equals(e,t){return f.util.equals(xt,e,t)}}xt.runtime=f;xt.typeName="google.protobuf.Int64Value";xt.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:3}]);xt.fieldWrapper={wrapField(n){return new xt({value:n})},unwrapField(n){return n.value}};class At extends P{constructor(e){super(),this.value=G.zero,f.util.initPartial(e,this)}toJson(e){return f.json.writeScalar(E.UINT64,this.value,!0)}fromJson(e,t){try{this.value=f.json.readScalar(E.UINT64,e)}catch(r){let i='cannot decode message google.protobuf.UInt64Value from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new At().fromBinary(e,t)}static fromJson(e,t){return new At().fromJson(e,t)}static fromJsonString(e,t){return new At().fromJsonString(e,t)}static equals(e,t){return f.util.equals(At,e,t)}}At.runtime=f;At.typeName="google.protobuf.UInt64Value";At.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:4}]);At.fieldWrapper={wrapField(n){return new At({value:n})},unwrapField(n){return n.value}};class it extends P{constructor(e){super(),this.value=0,f.util.initPartial(e,this)}toJson(e){return f.json.writeScalar(E.INT32,this.value,!0)}fromJson(e,t){try{this.value=f.json.readScalar(E.INT32,e)}catch(r){let i='cannot decode message google.protobuf.Int32Value from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new it().fromBinary(e,t)}static fromJson(e,t){return new it().fromJson(e,t)}static fromJsonString(e,t){return new it().fromJsonString(e,t)}static equals(e,t){return f.util.equals(it,e,t)}}it.runtime=f;it.typeName="google.protobuf.Int32Value";it.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:5}]);it.fieldWrapper={wrapField(n){return new it({value:n})},unwrapField(n){return n.value}};class rn extends P{constructor(e){super(),this.value=0,f.util.initPartial(e,this)}toJson(e){return f.json.writeScalar(E.UINT32,this.value,!0)}fromJson(e,t){try{this.value=f.json.readScalar(E.UINT32,e)}catch(r){let i='cannot decode message google.protobuf.UInt32Value from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new rn().fromBinary(e,t)}static fromJson(e,t){return new rn().fromJson(e,t)}static fromJsonString(e,t){return new rn().fromJsonString(e,t)}static equals(e,t){return f.util.equals(rn,e,t)}}rn.runtime=f;rn.typeName="google.protobuf.UInt32Value";rn.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:13}]);rn.fieldWrapper={wrapField(n){return new rn({value:n})},unwrapField(n){return n.value}};class Et extends P{constructor(e){super(),this.value=!1,f.util.initPartial(e,this)}toJson(e){return f.json.writeScalar(E.BOOL,this.value,!0)}fromJson(e,t){try{this.value=f.json.readScalar(E.BOOL,e)}catch(r){let i='cannot decode message google.protobuf.BoolValue from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new Et().fromBinary(e,t)}static fromJson(e,t){return new Et().fromJson(e,t)}static fromJsonString(e,t){return new Et().fromJsonString(e,t)}static equals(e,t){return f.util.equals(Et,e,t)}}Et.runtime=f;Et.typeName="google.protobuf.BoolValue";Et.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:8}]);Et.fieldWrapper={wrapField(n){return new Et({value:n})},unwrapField(n){return n.value}};class Se extends P{constructor(e){super(),this.value="",f.util.initPartial(e,this)}toJson(e){return f.json.writeScalar(E.STRING,this.value,!0)}fromJson(e,t){try{this.value=f.json.readScalar(E.STRING,e)}catch(r){let i='cannot decode message google.protobuf.StringValue from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new Se().fromBinary(e,t)}static fromJson(e,t){return new Se().fromJson(e,t)}static fromJsonString(e,t){return new Se().fromJsonString(e,t)}static equals(e,t){return f.util.equals(Se,e,t)}}Se.runtime=f;Se.typeName="google.protobuf.StringValue";Se.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:9}]);Se.fieldWrapper={wrapField(n){return new Se({value:n})},unwrapField(n){return n.value}};class sn extends P{constructor(e){super(),this.value=new Uint8Array(0),f.util.initPartial(e,this)}toJson(e){return f.json.writeScalar(E.BYTES,this.value,!0)}fromJson(e,t){try{this.value=f.json.readScalar(E.BYTES,e)}catch(r){let i='cannot decode message google.protobuf.BytesValue from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new sn().fromBinary(e,t)}static fromJson(e,t){return new sn().fromJson(e,t)}static fromJsonString(e,t){return new sn().fromJsonString(e,t)}static equals(e,t){return f.util.equals(sn,e,t)}}sn.runtime=f;sn.typeName="google.protobuf.BytesValue";sn.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:12}]);sn.fieldWrapper={wrapField(n){return new sn({value:n})},unwrapField(n){return n.value}};function gS(n,e,t){try{const r=eh.dec(n);return e?e.fromBinary(r,t):r}catch(r){throw ee.from(r,W.DataLoss)}}function pS(n,e){const t={};for(const[r,i]of Object.entries(n.methods)){const s=e(Object.assign(Object.assign({},i),{localName:r,service:n}));s!=null&&(t[r]=s)}return t}const Vm=1;function Km(n){let e,t=new Uint8Array(0);function r(i){const s=new Uint8Array(t.length+i.length);s.set(t),s.set(i,t.length),t=s}return new ReadableStream({start(){e=n.getReader()},async pull(i){let s;for(;;){if(s===void 0&&t.byteLength>=5){let u=0;for(let c=1;c<5;c++)u=(u<<8)+t[c];s={flags:t[0],length:u}}if(s!==void 0&&t.byteLength>=s.length+5)break;const a=await e.read();if(a.done)break;r(a.value)}if(s===void 0){if(t.byteLength==0){i.close();return}i.error(new ee("premature end of stream",W.DataLoss));return}const o=t.subarray(5,5+s.length);t=t.subarray(5+s.length),i.enqueue({flags:s.flags,data:o})}})}function Wm(n,e){const t=new Uint8Array(e.length+5);t.set(e,5);const r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.setUint8(0,n),r.setUint32(1,e.length),t}var yS=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof __values=="function"?__values(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,u){o=n[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(c){s({value:c,done:a})},o)}},ia=function(n){return this instanceof ia?(this.v=n,this):new ia(n)},vS=function(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i={},a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(p){return function(w){return Promise.resolve(w).then(p,h)}}function a(p,w){r[p]&&(i[p]=function(v){return new Promise(function(A,y){s.push([p,v,A,y])>1||u(p,v)})},w&&(i[p]=w(i[p])))}function u(p,w){try{c(r[p](w))}catch(v){m(s[0][3],v)}}function c(p){p.value instanceof ia?Promise.resolve(p.value.v).then(d,h):m(s[0][2],p)}function d(p){u("next",p)}function h(p){u("throw",p)}function m(p,w){p(w),s.shift(),s.length&&u(s[0][0],s[0][1])}},wS=function(n){var e,t;return e={},r("next"),r("throw",function(i){throw i}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(i,s){e[i]=n[i]?function(o){return(t=!t)?{value:ia(n[i](o)),done:!1}:s?s(o):o}:s}};function SS(n){return vS(this,arguments,function*(){yield ia(yield*wS(yS(n)))})}var sv=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof __values=="function"?__values(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,u){o=n[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(c){s({value:c,done:a})},o)}},qs=function(n){return this instanceof qs?(this.v=n,this):new qs(n)},kS=function(n){var e,t;return e={},r("next"),r("throw",function(i){throw i}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(i,s){e[i]=n[i]?function(o){return(t=!t)?{value:qs(n[i](o)),done:!1}:s?s(o):o}:s}},TS=function(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i={},a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(p){return function(w){return Promise.resolve(w).then(p,h)}}function a(p,w){r[p]&&(i[p]=function(v){return new Promise(function(A,y){s.push([p,v,A,y])>1||u(p,v)})},w&&(i[p]=w(i[p])))}function u(p,w){try{c(r[p](w))}catch(v){m(s[0][3],v)}}function c(p){p.value instanceof qs?Promise.resolve(p.value.v).then(d,h):m(s[0][2],p)}function d(p){u("next",p)}function h(p){u("throw",p)}function m(p,w){p(w),s.shift(),s.length&&u(s[0][0],s[0][1])}};function IS(n,e){return pS(n,t=>{switch(t.kind){case de.Unary:return xS(e,n,t);case de.ServerStreaming:return AS(e,n,t);case de.ClientStreaming:return ES(e,n,t);case de.BiDiStreaming:return CS(e,n,t);default:return null}})}function xS(n,e,t){return async function(r,i){var s,o;const a=await n.unary(e,t,i==null?void 0:i.signal,i==null?void 0:i.timeoutMs,i==null?void 0:i.headers,r,i==null?void 0:i.contextValues);return(s=i==null?void 0:i.onHeader)===null||s===void 0||s.call(i,a.header),(o=i==null?void 0:i.onTrailer)===null||o===void 0||o.call(i,a.trailer),a.message}}function AS(n,e,t){return function(r,i){return ov(n.stream(e,t,i==null?void 0:i.signal,i==null?void 0:i.timeoutMs,i==null?void 0:i.headers,SS([r]),i==null?void 0:i.contextValues),i)}}function ES(n,e,t){return async function(r,i){var s,o,a,u,c,d;const h=await n.stream(e,t,i==null?void 0:i.signal,i==null?void 0:i.timeoutMs,i==null?void 0:i.headers,r,i==null?void 0:i.contextValues);(c=i==null?void 0:i.onHeader)===null||c===void 0||c.call(i,h.header);let m,p=0;try{for(var w=!0,v=sv(h.message),A;A=await v.next(),s=A.done,!s;w=!0)u=A.value,w=!1,m=u,p++}catch(y){o={error:y}}finally{try{!w&&!s&&(a=v.return)&&await a.call(v)}finally{if(o)throw o.error}}if(!m)throw new ee("protocol error: missing response message",W.Unimplemented);if(p>1)throw new ee("protocol error: received extra messages for client streaming method",W.Unimplemented);return(d=i==null?void 0:i.onTrailer)===null||d===void 0||d.call(i,h.trailer),m}}function CS(n,e,t){return function(r,i){return ov(n.stream(e,t,i==null?void 0:i.signal,i==null?void 0:i.timeoutMs,i==null?void 0:i.headers,r,i==null?void 0:i.contextValues),i)}}function ov(n,e){const t=function(){return TS(this,arguments,function*(){var r,i;const s=yield qs(n);(r=e==null?void 0:e.onHeader)===null||r===void 0||r.call(e,s.header),yield qs(yield*kS(sv(s.message))),(i=e==null?void 0:e.onTrailer)===null||i===void 0||i.call(e,s.trailer)})}()[Symbol.asyncIterator]();return{[Symbol.asyncIterator]:()=>({next:()=>t.next()})}}function NS(...n){const e=new AbortController,t=n.filter(i=>i!==void 0).concat(e.signal);for(const i of t){if(i.aborted){r.apply(i);break}i.addEventListener("abort",r)}function r(){e.signal.aborted||e.abort(av(this));for(const i of t)i.removeEventListener("abort",r)}return e}function PS(n){const e=new AbortController,t=()=>{e.abort(new ee("the operation timed out",W.DeadlineExceeded))};let r;return n!==void 0&&(n<=0?t():r=setTimeout(t,n)),{signal:e.signal,cleanup:()=>clearTimeout(r)}}function av(n){if(!n.aborted)return;if(n.reason!==void 0)return n.reason;const e=new Error("This operation was aborted");return e.name="AbortError",e}function Hm(){return{get(n){return n.id in this?this[n.id]:n.defaultValue},set(n,e){return this[n.id]=e,this},delete(n){return delete this[n.id],this}}}const fc=128;function Gm(n){const e=new Headers,t=new TextDecoder().decode(n).split(`\r
`);for(const r of t){if(r==="")continue;const i=r.indexOf(":");if(i>0){const s=r.substring(0,i).trim(),o=r.substring(i+1).trim();e.append(s,o)}}return e}const DS="Content-Type",bS="Grpc-Timeout",Vs="Grpc-Status",lv="Grpc-Message",OS="Grpc-Status-Details-Bin",LS="X-User-Agent",RS="X-Grpc-Web",BS="application/grpc-web+proto",zS="application/grpc-web+json";class Wr extends P{constructor(e){super(),this.code=0,this.message="",this.details=[],f.util.initPartial(e,this)}static fromBinary(e,t){return new Wr().fromBinary(e,t)}static fromJson(e,t){return new Wr().fromJson(e,t)}static fromJsonString(e,t){return new Wr().fromJsonString(e,t)}static equals(e,t){return f.util.equals(Wr,e,t)}}Wr.runtime=f;Wr.typeName="google.rpc.Status";Wr.fields=f.util.newFieldList(()=>[{no:1,name:"code",kind:"scalar",T:5},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"details",kind:"message",T:en,repeated:!0}]);const $S="0";function uv(n){var e;const t=n.get(OS);if(t!=null){const i=gS(t,Wr);if(i.code==0)return;const s=new ee(i.message,i.code,n);return s.details=i.details.map(o=>({type:o.typeUrl.substring(o.typeUrl.lastIndexOf("/")+1),value:o.value})),s}const r=n.get(Vs);if(r!=null){if(r===$S)return;const i=parseInt(r,10);return i in W?new ee(decodeURIComponent((e=n.get(lv))!==null&&e!==void 0?e:""),i,n):new ee(`invalid grpc-status: ${r}`,W.Internal,n)}}function Ym(n,e,t){const r=typeof e=="string"?e:e.typeName,i=typeof t=="string"?t:t.name;return n.toString().replace(/\/?$/,`/${r}/${i}`)}function cv(n,e){return e instanceof n?e:new n(e)}function JS(n,e){function t(r){return r.done===!0?r:{done:r.done,value:cv(n,r.value)}}return{[Symbol.asyncIterator](){const r=e[Symbol.asyncIterator](),i={next:()=>r.next().then(t)};return r.throw!==void 0&&(i.throw=s=>r.throw(s).then(t)),r.return!==void 0&&(i.return=s=>r.return(s).then(t)),i}}}function fv(n,e){var t;return(t=e==null?void 0:e.concat().reverse().reduce((r,i)=>i(r),n))!==null&&t!==void 0?t:n}function MS(n){var e;const t=Object.assign({},n);return(e=t.ignoreUnknownFields)!==null&&e!==void 0||(t.ignoreUnknownFields=!0),t}function _m(n,e,t,r){const i=e?Xm(n.I,r):Qm(n.I,t);return{parse:(e?Xm(n.O,r):Qm(n.O,t)).parse,serialize:i.serialize}}function Xm(n,e){return{parse(t){try{return n.fromBinary(t,e)}catch(r){const i=r instanceof Error?r.message:String(r);throw new ee(`parse binary: ${i}`,W.Internal)}},serialize(t){try{return t.toBinary(e)}catch(r){const i=r instanceof Error?r.message:String(r);throw new ee(`serialize binary: ${i}`,W.Internal)}}}}function Qm(n,e){var t,r;const i=(t=e==null?void 0:e.textEncoder)!==null&&t!==void 0?t:new TextEncoder,s=(r=e==null?void 0:e.textDecoder)!==null&&r!==void 0?r:new TextDecoder,o=MS(e);return{parse(a){try{const u=s.decode(a);return n.fromJsonString(u,o)}catch(u){throw ee.from(u,W.InvalidArgument)}},serialize(a){try{const u=a.toJsonString(o);return i.encode(u)}catch(u){throw ee.from(u,W.Internal)}}}}function FS(n){const e=fv(n.next,n.interceptors),[t,r,i]=dv(n),s=Object.assign(Object.assign({},n.req),{message:cv(n.req.method.I,n.req.message),signal:t});return e(s).then(o=>(i(),o),r)}function US(n){const e=fv(n.next,n.interceptors),[t,r,i]=dv(n),s=Object.assign(Object.assign({},n.req),{message:JS(n.req.method.I,n.req.message),signal:t});let o=!1;return t.addEventListener("abort",function(){var a,u;const c=n.req.message[Symbol.asyncIterator]();o||(a=c.throw)===null||a===void 0||a.call(c,this.reason).catch(()=>{}),(u=c.return)===null||u===void 0||u.call(c).catch(()=>{})}),e(s).then(a=>Object.assign(Object.assign({},a),{message:{[Symbol.asyncIterator](){const u=a.message[Symbol.asyncIterator]();return{next(){return u.next().then(c=>(c.done==!0&&(o=!0,i()),c),r)}}}}}),r)}function dv(n){const{signal:e,cleanup:t}=PS(n.timeoutMs),r=NS(n.signal,e);return[r.signal,function(s){const o=ee.from(e.aborted?av(e):s);return r.abort(o),t(),Promise.reject(o)},function(){t(),r.abort()}]}function jS(){try{new Headers}catch{throw new Error("connect-web requires the fetch API. Are you running on an old version of Node.js? Node.js is not supported in Connect for Web - please stay tuned for Connect for Node.")}}function Zm(n,e){const t=uv(n);if(t)throw e.forEach((r,i)=>{t.metadata.append(i,r)}),t;if(!e.has(Vs)&&!n.has(Vs))throw new ee("protocol error: missing status",W.Internal)}function eg(n,e,t,r){const i=new Headers(t??{});return i.set(DS,n?BS:zS),i.set(RS,"1"),i.set(LS,"connect-es/1.6.1"),e!==void 0&&i.set(bS,`${e}m`),i}function qS(n){switch(n){case 400:return W.Internal;case 401:return W.Unauthenticated;case 403:return W.PermissionDenied;case 404:return W.Unimplemented;case 429:return W.Unavailable;case 502:return W.Unavailable;case 503:return W.Unavailable;case 504:return W.Unavailable;default:return W.Unknown}}function tg(n,e){var t;if(n>=200&&n<300)return{foundStatus:e.has(Vs),headerError:uv(e)};throw new ee(decodeURIComponent((t=e.get(lv))!==null&&t!==void 0?t:`HTTP ${n}`),qS(n),e)}var Ki=function(n){return this instanceof Ki?(this.v=n,this):new Ki(n)},VS=function(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i={},a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(p){return function(w){return Promise.resolve(w).then(p,h)}}function a(p,w){r[p]&&(i[p]=function(v){return new Promise(function(A,y){s.push([p,v,A,y])>1||u(p,v)})},w&&(i[p]=w(i[p])))}function u(p,w){try{c(r[p](w))}catch(v){m(s[0][3],v)}}function c(p){p.value instanceof Ki?Promise.resolve(p.value.v).then(d,h):m(s[0][2],p)}function d(p){u("next",p)}function h(p){u("throw",p)}function m(p,w){p(w),s.shift(),s.length&&u(s[0][0],s[0][1])}};function KS(n){var e;jS();const t=(e=n.useBinaryFormat)!==null&&e!==void 0?e:!0;return{async unary(r,i,s,o,a,u,c){var d;const{serialize:h,parse:m}=_m(i,t,n.jsonOptions,n.binaryOptions);return o=o===void 0?n.defaultTimeoutMs:o<=0?void 0:o,await FS({interceptors:n.interceptors,signal:s,timeoutMs:o,req:{stream:!1,service:r,method:i,url:Ym(n.baseUrl,r,i),init:{method:"POST",credentials:(d=n.credentials)!==null&&d!==void 0?d:"same-origin",redirect:"error",mode:"cors"},header:eg(t,o,a),contextValues:c??Hm(),message:u},next:async p=>{var w;const A=await((w=n.fetch)!==null&&w!==void 0?w:globalThis.fetch)(p.url,Object.assign(Object.assign({},p.init),{headers:p.header,signal:p.signal,body:Wm(0,h(p.message))})),{headerError:y}=tg(A.status,A.headers);if(!A.body)throw y!==void 0?y:"missing response body";const g=Km(A.body).getReader();let S,I;for(;;){const N=await g.read();if(N.done)break;const{flags:x,data:C}=N.value;if((x&Vm)===Vm)throw new ee("protocol error: received unsupported compressed output",W.Internal);if(x===fc){if(S!==void 0)throw"extra trailer";S=Gm(C);continue}if(I!==void 0)throw new ee("extra message",W.Unimplemented);I=m(C)}if(S===void 0)throw y!==void 0?y:new ee("missing trailer",A.headers.has(Vs)?W.Unimplemented:W.Unknown);if(Zm(S,A.headers),I===void 0)throw new ee("missing message",S.has(Vs)?W.Unimplemented:W.Unknown);return{stream:!1,service:r,method:i,header:A.headers,message:I,trailer:S}}})},async stream(r,i,s,o,a,u,c){var d;const{serialize:h,parse:m}=_m(i,t,n.jsonOptions,n.binaryOptions);function p(v,A,y,g,S){return VS(this,arguments,function*(){const N=Km(v).getReader();if(A){if(!(yield Ki(N.read())).done)throw"extra data for trailers-only";return yield Ki(void 0)}let x=!1;for(;;){const C=yield Ki(N.read());if(C.done)break;const{flags:O,data:$}=C.value;if((O&fc)===fc){if(x)throw"extra trailer";x=!0;const F=Gm($);Zm(F,g),F.forEach((ge,tt)=>y.set(tt,ge));continue}if(x)throw"extra message";yield yield Ki(m($))}if("throwIfAborted"in S&&S.throwIfAborted(),!x)throw"missing trailer"})}async function w(v){if(i.kind!=de.ServerStreaming)throw"The fetch API does not support streaming request bodies";const A=await v[Symbol.asyncIterator]().next();if(A.done==!0)throw"missing request message";return Wm(0,h(A.value))}return o=o===void 0?n.defaultTimeoutMs:o<=0?void 0:o,US({interceptors:n.interceptors,signal:s,timeoutMs:o,req:{stream:!0,service:r,method:i,url:Ym(n.baseUrl,r,i),init:{method:"POST",credentials:(d=n.credentials)!==null&&d!==void 0?d:"same-origin",redirect:"error",mode:"cors"},header:eg(t,o,a),contextValues:c??Hm(),message:u},next:async v=>{var A;const g=await((A=n.fetch)!==null&&A!==void 0?A:globalThis.fetch)(v.url,Object.assign(Object.assign({},v.init),{headers:v.header,signal:v.signal,body:await w(v.message)})),{foundStatus:S,headerError:I}=tg(g.status,g.headers);if(I!=null)throw I;if(!g.body)throw"missing response body";const N=new Headers;return Object.assign(Object.assign({},v),{header:g.headers,trailer:N,message:p(g.body,S,N,g.headers,v.signal)})}})}}}var q=(n=>(n[n.NULL=0]="NULL",n[n.BOOLEAN=1]="BOOLEAN",n[n.INTEGER=2]="INTEGER",n[n.LONG=3]="LONG",n[n.DOUBLE=4]="DOUBLE",n[n.STRING=5]="STRING",n[n.BYTES=6]="BYTES",n[n.DATE=7]="DATE",n[n.JSON_OBJECT=8]="JSON_OBJECT",n[n.JSON_ARRAY=9]="JSON_ARRAY",n[n.TEXT=10]="TEXT",n[n.INTEGER_CNT=11]="INTEGER_CNT",n[n.LONG_CNT=12]="LONG_CNT",n[n.TREE=13]="TREE",n))(q||{});f.util.setEnumType(q,"yorkie.v1.ValueType",[{no:0,name:"VALUE_TYPE_NULL"},{no:1,name:"VALUE_TYPE_BOOLEAN"},{no:2,name:"VALUE_TYPE_INTEGER"},{no:3,name:"VALUE_TYPE_LONG"},{no:4,name:"VALUE_TYPE_DOUBLE"},{no:5,name:"VALUE_TYPE_STRING"},{no:6,name:"VALUE_TYPE_BYTES"},{no:7,name:"VALUE_TYPE_DATE"},{no:8,name:"VALUE_TYPE_JSON_OBJECT"},{no:9,name:"VALUE_TYPE_JSON_ARRAY"},{no:10,name:"VALUE_TYPE_TEXT"},{no:11,name:"VALUE_TYPE_INTEGER_CNT"},{no:12,name:"VALUE_TYPE_LONG_CNT"},{no:13,name:"VALUE_TYPE_TREE"}]);var Ks=(n=>(n[n.DOCUMENT_CHANGED=0]="DOCUMENT_CHANGED",n[n.DOCUMENT_WATCHED=1]="DOCUMENT_WATCHED",n[n.DOCUMENT_UNWATCHED=2]="DOCUMENT_UNWATCHED",n[n.DOCUMENT_BROADCAST=3]="DOCUMENT_BROADCAST",n))(Ks||{});f.util.setEnumType(Ks,"yorkie.v1.DocEventType",[{no:0,name:"DOC_EVENT_TYPE_DOCUMENT_CHANGED"},{no:1,name:"DOC_EVENT_TYPE_DOCUMENT_WATCHED"},{no:2,name:"DOC_EVENT_TYPE_DOCUMENT_UNWATCHED"},{no:3,name:"DOC_EVENT_TYPE_DOCUMENT_BROADCAST"}]);const pn=class pn extends P{constructor(t){super();l(this,"root");l(this,"presences",{});f.util.initPartial(t,this)}static fromBinary(t,r){return new pn().fromBinary(t,r)}static fromJson(t,r){return new pn().fromJson(t,r)}static fromJsonString(t,r){return new pn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(pn,t,r)}};l(pn,"runtime",f),l(pn,"typeName","yorkie.v1.Snapshot"),l(pn,"fields",f.util.newFieldList(()=>[{no:1,name:"root",kind:"message",T:et},{no:2,name:"presences",kind:"map",K:9,V:{kind:"message",T:Hs}}]));let ff=pn;var gt;let ii=(gt=class extends P{constructor(t){super();l(this,"documentKey","");l(this,"checkpoint");l(this,"snapshot",new Uint8Array(0));l(this,"changes",[]);l(this,"minSyncedTicket");l(this,"isRemoved",!1);l(this,"versionVector");f.util.initPartial(t,this)}static fromBinary(t,r){return new gt().fromBinary(t,r)}static fromJson(t,r){return new gt().fromJson(t,r)}static fromJsonString(t,r){return new gt().fromJsonString(t,r)}static equals(t,r){return f.util.equals(gt,t,r)}},l(gt,"runtime",f),l(gt,"typeName","yorkie.v1.ChangePack"),l(gt,"fields",f.util.newFieldList(()=>[{no:1,name:"document_key",kind:"scalar",T:9},{no:2,name:"checkpoint",kind:"message",T:gv},{no:3,name:"snapshot",kind:"scalar",T:12},{no:4,name:"changes",kind:"message",T:hv,repeated:!0},{no:5,name:"min_synced_ticket",kind:"message",T:J},{no:6,name:"is_removed",kind:"scalar",T:8},{no:7,name:"version_vector",kind:"message",T:Nu}])),gt);var pt;let hv=(pt=class extends P{constructor(t){super();l(this,"id");l(this,"message","");l(this,"operations",[]);l(this,"presenceChange");f.util.initPartial(t,this)}static fromBinary(t,r){return new pt().fromBinary(t,r)}static fromJson(t,r){return new pt().fromJson(t,r)}static fromJsonString(t,r){return new pt().fromJsonString(t,r)}static equals(t,r){return f.util.equals(pt,t,r)}},l(pt,"runtime",f),l(pt,"typeName","yorkie.v1.Change"),l(pt,"fields",f.util.newFieldList(()=>[{no:1,name:"id",kind:"message",T:Cu},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"operations",kind:"message",T:th,repeated:!0},{no:4,name:"presence_change",kind:"message",T:aa}])),pt);var yt;let Cu=(yt=class extends P{constructor(t){super();l(this,"clientSeq",0);l(this,"serverSeq",G.zero);l(this,"lamport",G.zero);l(this,"actorId",new Uint8Array(0));l(this,"versionVector");f.util.initPartial(t,this)}static fromBinary(t,r){return new yt().fromBinary(t,r)}static fromJson(t,r){return new yt().fromJson(t,r)}static fromJsonString(t,r){return new yt().fromJsonString(t,r)}static equals(t,r){return f.util.equals(yt,t,r)}},l(yt,"runtime",f),l(yt,"typeName","yorkie.v1.ChangeID"),l(yt,"fields",f.util.newFieldList(()=>[{no:1,name:"client_seq",kind:"scalar",T:13},{no:2,name:"server_seq",kind:"scalar",T:3},{no:3,name:"lamport",kind:"scalar",T:3},{no:4,name:"actor_id",kind:"scalar",T:12},{no:5,name:"version_vector",kind:"message",T:Nu}])),yt);var vt;let Nu=(vt=class extends P{constructor(t){super();l(this,"vector",{});f.util.initPartial(t,this)}static fromBinary(t,r){return new vt().fromBinary(t,r)}static fromJson(t,r){return new vt().fromJson(t,r)}static fromJsonString(t,r){return new vt().fromJsonString(t,r)}static equals(t,r){return f.util.equals(vt,t,r)}},l(vt,"runtime",f),l(vt,"typeName","yorkie.v1.VersionVector"),l(vt,"fields",f.util.newFieldList(()=>[{no:1,name:"vector",kind:"map",K:9,V:{kind:"scalar",T:3}}])),vt);var wt;let th=(wt=class extends P{constructor(t){super();l(this,"body",{case:void 0});f.util.initPartial(t,this)}static fromBinary(t,r){return new wt().fromBinary(t,r)}static fromJson(t,r){return new wt().fromJson(t,r)}static fromJsonString(t,r){return new wt().fromJsonString(t,r)}static equals(t,r){return f.util.equals(wt,t,r)}},l(wt,"runtime",f),l(wt,"typeName","yorkie.v1.Operation"),l(wt,"fields",f.util.newFieldList(()=>[{no:1,name:"set",kind:"message",T:Jl,oneof:"body"},{no:2,name:"add",kind:"message",T:Ml,oneof:"body"},{no:3,name:"move",kind:"message",T:Fl,oneof:"body"},{no:4,name:"remove",kind:"message",T:Ul,oneof:"body"},{no:5,name:"edit",kind:"message",T:jl,oneof:"body"},{no:7,name:"style",kind:"message",T:ql,oneof:"body"},{no:8,name:"increase",kind:"message",T:Vl,oneof:"body"},{no:9,name:"tree_edit",kind:"message",T:Kl,oneof:"body"},{no:10,name:"tree_style",kind:"message",T:Wl,oneof:"body"},{no:11,name:"array_set",kind:"message",T:Hl,oneof:"body"}])),wt);const yn=class yn extends P{constructor(t){super();l(this,"parentCreatedAt");l(this,"key","");l(this,"value");l(this,"executedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new yn().fromBinary(t,r)}static fromJson(t,r){return new yn().fromJson(t,r)}static fromJsonString(t,r){return new yn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(yn,t,r)}};l(yn,"runtime",f),l(yn,"typeName","yorkie.v1.Operation.Set"),l(yn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:J},{no:2,name:"key",kind:"scalar",T:9},{no:3,name:"value",kind:"message",T:mt},{no:4,name:"executed_at",kind:"message",T:J}]));let Jl=yn;const vn=class vn extends P{constructor(t){super();l(this,"parentCreatedAt");l(this,"prevCreatedAt");l(this,"value");l(this,"executedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new vn().fromBinary(t,r)}static fromJson(t,r){return new vn().fromJson(t,r)}static fromJsonString(t,r){return new vn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(vn,t,r)}};l(vn,"runtime",f),l(vn,"typeName","yorkie.v1.Operation.Add"),l(vn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:J},{no:2,name:"prev_created_at",kind:"message",T:J},{no:3,name:"value",kind:"message",T:mt},{no:4,name:"executed_at",kind:"message",T:J}]));let Ml=vn;const wn=class wn extends P{constructor(t){super();l(this,"parentCreatedAt");l(this,"prevCreatedAt");l(this,"createdAt");l(this,"executedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new wn().fromBinary(t,r)}static fromJson(t,r){return new wn().fromJson(t,r)}static fromJsonString(t,r){return new wn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(wn,t,r)}};l(wn,"runtime",f),l(wn,"typeName","yorkie.v1.Operation.Move"),l(wn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:J},{no:2,name:"prev_created_at",kind:"message",T:J},{no:3,name:"created_at",kind:"message",T:J},{no:4,name:"executed_at",kind:"message",T:J}]));let Fl=wn;const Sn=class Sn extends P{constructor(t){super();l(this,"parentCreatedAt");l(this,"createdAt");l(this,"executedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new Sn().fromBinary(t,r)}static fromJson(t,r){return new Sn().fromJson(t,r)}static fromJsonString(t,r){return new Sn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Sn,t,r)}};l(Sn,"runtime",f),l(Sn,"typeName","yorkie.v1.Operation.Remove"),l(Sn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:J},{no:2,name:"created_at",kind:"message",T:J},{no:3,name:"executed_at",kind:"message",T:J}]));let Ul=Sn;const kn=class kn extends P{constructor(t){super();l(this,"parentCreatedAt");l(this,"from");l(this,"to");l(this,"createdAtMapByActor",{});l(this,"content","");l(this,"executedAt");l(this,"attributes",{});f.util.initPartial(t,this)}static fromBinary(t,r){return new kn().fromBinary(t,r)}static fromJson(t,r){return new kn().fromJson(t,r)}static fromJsonString(t,r){return new kn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(kn,t,r)}};l(kn,"runtime",f),l(kn,"typeName","yorkie.v1.Operation.Edit"),l(kn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:J},{no:2,name:"from",kind:"message",T:ns},{no:3,name:"to",kind:"message",T:ns},{no:4,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:J}},{no:5,name:"content",kind:"scalar",T:9},{no:6,name:"executed_at",kind:"message",T:J},{no:7,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}}]));let jl=kn;const Tn=class Tn extends P{constructor(t){super();l(this,"parentCreatedAt");l(this,"from");l(this,"to");l(this,"attributes",{});l(this,"executedAt");l(this,"createdAtMapByActor",{});f.util.initPartial(t,this)}static fromBinary(t,r){return new Tn().fromBinary(t,r)}static fromJson(t,r){return new Tn().fromJson(t,r)}static fromJsonString(t,r){return new Tn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Tn,t,r)}};l(Tn,"runtime",f),l(Tn,"typeName","yorkie.v1.Operation.Style"),l(Tn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:J},{no:2,name:"from",kind:"message",T:ns},{no:3,name:"to",kind:"message",T:ns},{no:4,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:5,name:"executed_at",kind:"message",T:J},{no:6,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:J}}]));let ql=Tn;const In=class In extends P{constructor(t){super();l(this,"parentCreatedAt");l(this,"value");l(this,"executedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new In().fromBinary(t,r)}static fromJson(t,r){return new In().fromJson(t,r)}static fromJsonString(t,r){return new In().fromJsonString(t,r)}static equals(t,r){return f.util.equals(In,t,r)}};l(In,"runtime",f),l(In,"typeName","yorkie.v1.Operation.Increase"),l(In,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:J},{no:2,name:"value",kind:"message",T:mt},{no:3,name:"executed_at",kind:"message",T:J}]));let Vl=In;const xn=class xn extends P{constructor(t){super();l(this,"parentCreatedAt");l(this,"from");l(this,"to");l(this,"createdAtMapByActor",{});l(this,"contents",[]);l(this,"splitLevel",0);l(this,"executedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new xn().fromBinary(t,r)}static fromJson(t,r){return new xn().fromJson(t,r)}static fromJsonString(t,r){return new xn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(xn,t,r)}};l(xn,"runtime",f),l(xn,"typeName","yorkie.v1.Operation.TreeEdit"),l(xn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:J},{no:2,name:"from",kind:"message",T:es},{no:3,name:"to",kind:"message",T:es},{no:4,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:J}},{no:5,name:"contents",kind:"message",T:nu,repeated:!0},{no:7,name:"split_level",kind:"scalar",T:5},{no:6,name:"executed_at",kind:"message",T:J}]));let Kl=xn;const An=class An extends P{constructor(t){super();l(this,"parentCreatedAt");l(this,"from");l(this,"to");l(this,"attributes",{});l(this,"executedAt");l(this,"attributesToRemove",[]);l(this,"createdAtMapByActor",{});f.util.initPartial(t,this)}static fromBinary(t,r){return new An().fromBinary(t,r)}static fromJson(t,r){return new An().fromJson(t,r)}static fromJsonString(t,r){return new An().fromJsonString(t,r)}static equals(t,r){return f.util.equals(An,t,r)}};l(An,"runtime",f),l(An,"typeName","yorkie.v1.Operation.TreeStyle"),l(An,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:J},{no:2,name:"from",kind:"message",T:es},{no:3,name:"to",kind:"message",T:es},{no:4,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:5,name:"executed_at",kind:"message",T:J},{no:6,name:"attributes_to_remove",kind:"scalar",T:9,repeated:!0},{no:7,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:J}}]));let Wl=An;const En=class En extends P{constructor(t){super();l(this,"parentCreatedAt");l(this,"createdAt");l(this,"value");l(this,"executedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new En().fromBinary(t,r)}static fromJson(t,r){return new En().fromJson(t,r)}static fromJsonString(t,r){return new En().fromJsonString(t,r)}static equals(t,r){return f.util.equals(En,t,r)}};l(En,"runtime",f),l(En,"typeName","yorkie.v1.Operation.ArraySet"),l(En,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:J},{no:2,name:"created_at",kind:"message",T:J},{no:3,name:"value",kind:"message",T:mt},{no:4,name:"executed_at",kind:"message",T:J}]));let Hl=En;const Cn=class Cn extends P{constructor(t){super();l(this,"createdAt");l(this,"movedAt");l(this,"removedAt");l(this,"type",0);l(this,"value",new Uint8Array(0));f.util.initPartial(t,this)}static fromBinary(t,r){return new Cn().fromBinary(t,r)}static fromJson(t,r){return new Cn().fromJson(t,r)}static fromJsonString(t,r){return new Cn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Cn,t,r)}};l(Cn,"runtime",f),l(Cn,"typeName","yorkie.v1.JSONElementSimple"),l(Cn,"fields",f.util.newFieldList(()=>[{no:1,name:"created_at",kind:"message",T:J},{no:2,name:"moved_at",kind:"message",T:J},{no:3,name:"removed_at",kind:"message",T:J},{no:4,name:"type",kind:"enum",T:f.getEnumType(q)},{no:5,name:"value",kind:"scalar",T:12}]));let mt=Cn;const Nn=class Nn extends P{constructor(t){super();l(this,"body",{case:void 0});f.util.initPartial(t,this)}static fromBinary(t,r){return new Nn().fromBinary(t,r)}static fromJson(t,r){return new Nn().fromJson(t,r)}static fromJsonString(t,r){return new Nn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Nn,t,r)}};l(Nn,"runtime",f),l(Nn,"typeName","yorkie.v1.JSONElement"),l(Nn,"fields",f.util.newFieldList(()=>[{no:1,name:"json_object",kind:"message",T:Gl,oneof:"body"},{no:2,name:"json_array",kind:"message",T:Yl,oneof:"body"},{no:3,name:"primitive",kind:"message",T:_l,oneof:"body"},{no:5,name:"text",kind:"message",T:Xl,oneof:"body"},{no:6,name:"counter",kind:"message",T:Ql,oneof:"body"},{no:7,name:"tree",kind:"message",T:Zl,oneof:"body"}]));let et=Nn;const Pn=class Pn extends P{constructor(t){super();l(this,"nodes",[]);l(this,"createdAt");l(this,"movedAt");l(this,"removedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new Pn().fromBinary(t,r)}static fromJson(t,r){return new Pn().fromJson(t,r)}static fromJsonString(t,r){return new Pn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Pn,t,r)}};l(Pn,"runtime",f),l(Pn,"typeName","yorkie.v1.JSONElement.JSONObject"),l(Pn,"fields",f.util.newFieldList(()=>[{no:1,name:"nodes",kind:"message",T:mv,repeated:!0},{no:2,name:"created_at",kind:"message",T:J},{no:3,name:"moved_at",kind:"message",T:J},{no:4,name:"removed_at",kind:"message",T:J}]));let Gl=Pn;const Dn=class Dn extends P{constructor(t){super();l(this,"nodes",[]);l(this,"createdAt");l(this,"movedAt");l(this,"removedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new Dn().fromBinary(t,r)}static fromJson(t,r){return new Dn().fromJson(t,r)}static fromJsonString(t,r){return new Dn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Dn,t,r)}};l(Dn,"runtime",f),l(Dn,"typeName","yorkie.v1.JSONElement.JSONArray"),l(Dn,"fields",f.util.newFieldList(()=>[{no:1,name:"nodes",kind:"message",T:eu,repeated:!0},{no:2,name:"created_at",kind:"message",T:J},{no:3,name:"moved_at",kind:"message",T:J},{no:4,name:"removed_at",kind:"message",T:J}]));let Yl=Dn;const bn=class bn extends P{constructor(t){super();l(this,"type",0);l(this,"value",new Uint8Array(0));l(this,"createdAt");l(this,"movedAt");l(this,"removedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new bn().fromBinary(t,r)}static fromJson(t,r){return new bn().fromJson(t,r)}static fromJsonString(t,r){return new bn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(bn,t,r)}};l(bn,"runtime",f),l(bn,"typeName","yorkie.v1.JSONElement.Primitive"),l(bn,"fields",f.util.newFieldList(()=>[{no:1,name:"type",kind:"enum",T:f.getEnumType(q)},{no:2,name:"value",kind:"scalar",T:12},{no:3,name:"created_at",kind:"message",T:J},{no:4,name:"moved_at",kind:"message",T:J},{no:5,name:"removed_at",kind:"message",T:J}]));let _l=bn;const On=class On extends P{constructor(t){super();l(this,"nodes",[]);l(this,"createdAt");l(this,"movedAt");l(this,"removedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new On().fromBinary(t,r)}static fromJson(t,r){return new On().fromJson(t,r)}static fromJsonString(t,r){return new On().fromJsonString(t,r)}static equals(t,r){return f.util.equals(On,t,r)}};l(On,"runtime",f),l(On,"typeName","yorkie.v1.JSONElement.Text"),l(On,"fields",f.util.newFieldList(()=>[{no:1,name:"nodes",kind:"message",T:tu,repeated:!0},{no:2,name:"created_at",kind:"message",T:J},{no:3,name:"moved_at",kind:"message",T:J},{no:4,name:"removed_at",kind:"message",T:J}]));let Xl=On;const Ln=class Ln extends P{constructor(t){super();l(this,"type",0);l(this,"value",new Uint8Array(0));l(this,"createdAt");l(this,"movedAt");l(this,"removedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new Ln().fromBinary(t,r)}static fromJson(t,r){return new Ln().fromJson(t,r)}static fromJsonString(t,r){return new Ln().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Ln,t,r)}};l(Ln,"runtime",f),l(Ln,"typeName","yorkie.v1.JSONElement.Counter"),l(Ln,"fields",f.util.newFieldList(()=>[{no:1,name:"type",kind:"enum",T:f.getEnumType(q)},{no:2,name:"value",kind:"scalar",T:12},{no:3,name:"created_at",kind:"message",T:J},{no:4,name:"moved_at",kind:"message",T:J},{no:5,name:"removed_at",kind:"message",T:J}]));let Ql=Ln;const Rn=class Rn extends P{constructor(t){super();l(this,"nodes",[]);l(this,"createdAt");l(this,"movedAt");l(this,"removedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new Rn().fromBinary(t,r)}static fromJson(t,r){return new Rn().fromJson(t,r)}static fromJsonString(t,r){return new Rn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Rn,t,r)}};l(Rn,"runtime",f),l(Rn,"typeName","yorkie.v1.JSONElement.Tree"),l(Rn,"fields",f.util.newFieldList(()=>[{no:1,name:"nodes",kind:"message",T:oa,repeated:!0},{no:2,name:"created_at",kind:"message",T:J},{no:3,name:"moved_at",kind:"message",T:J},{no:4,name:"removed_at",kind:"message",T:J}]));let Zl=Rn;var St;let mv=(St=class extends P{constructor(t){super();l(this,"key","");l(this,"element");f.util.initPartial(t,this)}static fromBinary(t,r){return new St().fromBinary(t,r)}static fromJson(t,r){return new St().fromJson(t,r)}static fromJsonString(t,r){return new St().fromJsonString(t,r)}static equals(t,r){return f.util.equals(St,t,r)}},l(St,"runtime",f),l(St,"typeName","yorkie.v1.RHTNode"),l(St,"fields",f.util.newFieldList(()=>[{no:1,name:"key",kind:"scalar",T:9},{no:2,name:"element",kind:"message",T:et}])),St);const Xt=class Xt extends P{constructor(t){super();l(this,"next");l(this,"element");f.util.initPartial(t,this)}static fromBinary(t,r){return new Xt().fromBinary(t,r)}static fromJson(t,r){return new Xt().fromJson(t,r)}static fromJsonString(t,r){return new Xt().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Xt,t,r)}};l(Xt,"runtime",f),l(Xt,"typeName","yorkie.v1.RGANode"),l(Xt,"fields",f.util.newFieldList(()=>[{no:1,name:"next",kind:"message",T:Xt},{no:2,name:"element",kind:"message",T:et}]));let eu=Xt;const Bn=class Bn extends P{constructor(t){super();l(this,"value","");l(this,"updatedAt");l(this,"isRemoved",!1);f.util.initPartial(t,this)}static fromBinary(t,r){return new Bn().fromBinary(t,r)}static fromJson(t,r){return new Bn().fromJson(t,r)}static fromJsonString(t,r){return new Bn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Bn,t,r)}};l(Bn,"runtime",f),l(Bn,"typeName","yorkie.v1.NodeAttr"),l(Bn,"fields",f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:9},{no:2,name:"updated_at",kind:"message",T:J},{no:3,name:"is_removed",kind:"scalar",T:8}]));let Ws=Bn;const zn=class zn extends P{constructor(t){super();l(this,"id");l(this,"value","");l(this,"removedAt");l(this,"insPrevId");l(this,"attributes",{});f.util.initPartial(t,this)}static fromBinary(t,r){return new zn().fromBinary(t,r)}static fromJson(t,r){return new zn().fromJson(t,r)}static fromJsonString(t,r){return new zn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(zn,t,r)}};l(zn,"runtime",f),l(zn,"typeName","yorkie.v1.TextNode"),l(zn,"fields",f.util.newFieldList(()=>[{no:1,name:"id",kind:"message",T:sa},{no:2,name:"value",kind:"scalar",T:9},{no:3,name:"removed_at",kind:"message",T:J},{no:4,name:"ins_prev_id",kind:"message",T:sa},{no:5,name:"attributes",kind:"map",K:9,V:{kind:"message",T:Ws}}]));let tu=zn;const $n=class $n extends P{constructor(t){super();l(this,"createdAt");l(this,"offset",0);f.util.initPartial(t,this)}static fromBinary(t,r){return new $n().fromBinary(t,r)}static fromJson(t,r){return new $n().fromJson(t,r)}static fromJsonString(t,r){return new $n().fromJsonString(t,r)}static equals(t,r){return f.util.equals($n,t,r)}};l($n,"runtime",f),l($n,"typeName","yorkie.v1.TextNodeID"),l($n,"fields",f.util.newFieldList(()=>[{no:1,name:"created_at",kind:"message",T:J},{no:2,name:"offset",kind:"scalar",T:5}]));let sa=$n;const Jn=class Jn extends P{constructor(t){super();l(this,"id");l(this,"type","");l(this,"value","");l(this,"removedAt");l(this,"insPrevId");l(this,"insNextId");l(this,"depth",0);l(this,"attributes",{});f.util.initPartial(t,this)}static fromBinary(t,r){return new Jn().fromBinary(t,r)}static fromJson(t,r){return new Jn().fromJson(t,r)}static fromJsonString(t,r){return new Jn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Jn,t,r)}};l(Jn,"runtime",f),l(Jn,"typeName","yorkie.v1.TreeNode"),l(Jn,"fields",f.util.newFieldList(()=>[{no:1,name:"id",kind:"message",T:Ai},{no:2,name:"type",kind:"scalar",T:9},{no:3,name:"value",kind:"scalar",T:9},{no:4,name:"removed_at",kind:"message",T:J},{no:5,name:"ins_prev_id",kind:"message",T:Ai},{no:6,name:"ins_next_id",kind:"message",T:Ai},{no:7,name:"depth",kind:"scalar",T:5},{no:8,name:"attributes",kind:"map",K:9,V:{kind:"message",T:Ws}}]));let oa=Jn;const Mn=class Mn extends P{constructor(t){super();l(this,"content",[]);f.util.initPartial(t,this)}static fromBinary(t,r){return new Mn().fromBinary(t,r)}static fromJson(t,r){return new Mn().fromJson(t,r)}static fromJsonString(t,r){return new Mn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Mn,t,r)}};l(Mn,"runtime",f),l(Mn,"typeName","yorkie.v1.TreeNodes"),l(Mn,"fields",f.util.newFieldList(()=>[{no:1,name:"content",kind:"message",T:oa,repeated:!0}]));let nu=Mn;const Fn=class Fn extends P{constructor(t){super();l(this,"createdAt");l(this,"offset",0);f.util.initPartial(t,this)}static fromBinary(t,r){return new Fn().fromBinary(t,r)}static fromJson(t,r){return new Fn().fromJson(t,r)}static fromJsonString(t,r){return new Fn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Fn,t,r)}};l(Fn,"runtime",f),l(Fn,"typeName","yorkie.v1.TreeNodeID"),l(Fn,"fields",f.util.newFieldList(()=>[{no:1,name:"created_at",kind:"message",T:J},{no:2,name:"offset",kind:"scalar",T:5}]));let Ai=Fn;const Un=class Un extends P{constructor(t){super();l(this,"parentId");l(this,"leftSiblingId");f.util.initPartial(t,this)}static fromBinary(t,r){return new Un().fromBinary(t,r)}static fromJson(t,r){return new Un().fromJson(t,r)}static fromJsonString(t,r){return new Un().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Un,t,r)}};l(Un,"runtime",f),l(Un,"typeName","yorkie.v1.TreePos"),l(Un,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_id",kind:"message",T:Ai},{no:2,name:"left_sibling_id",kind:"message",T:Ai}]));let es=Un;const jn=class jn extends P{constructor(t){super();l(this,"id","");l(this,"authProvider","");l(this,"username","");l(this,"createdAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new jn().fromBinary(t,r)}static fromJson(t,r){return new jn().fromJson(t,r)}static fromJsonString(t,r){return new jn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(jn,t,r)}};l(jn,"runtime",f),l(jn,"typeName","yorkie.v1.User"),l(jn,"fields",f.util.newFieldList(()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"auth_provider",kind:"scalar",T:9},{no:3,name:"username",kind:"scalar",T:9},{no:4,name:"created_at",kind:"message",T:Ce}]));let ng=jn;const qn=class qn extends P{constructor(t){super();l(this,"id","");l(this,"name","");l(this,"publicKey","");l(this,"secretKey","");l(this,"authWebhookUrl","");l(this,"authWebhookMethods",[]);l(this,"authWebhookMaxRetries",G.zero);l(this,"authWebhookMinWaitInterval","");l(this,"authWebhookMaxWaitInterval","");l(this,"authWebhookRequestTimeout","");l(this,"eventWebhookUrl","");l(this,"eventWebhookEvents",[]);l(this,"eventWebhookMaxRetries",G.zero);l(this,"eventWebhookMinWaitInterval","");l(this,"eventWebhookMaxWaitInterval","");l(this,"eventWebhookRequestTimeout","");l(this,"clientDeactivateThreshold","");l(this,"snapshotThreshold",G.zero);l(this,"snapshotInterval",G.zero);l(this,"maxSubscribersPerDocument",0);l(this,"maxAttachmentsPerDocument",0);l(this,"maxSizePerDocument",0);l(this,"removeOnDetach",!1);l(this,"autoRevisionEnabled",!1);l(this,"allowedOrigins",[]);l(this,"createdAt");l(this,"updatedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new qn().fromBinary(t,r)}static fromJson(t,r){return new qn().fromJson(t,r)}static fromJsonString(t,r){return new qn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(qn,t,r)}};l(qn,"runtime",f),l(qn,"typeName","yorkie.v1.Project"),l(qn,"fields",f.util.newFieldList(()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"public_key",kind:"scalar",T:9},{no:4,name:"secret_key",kind:"scalar",T:9},{no:5,name:"auth_webhook_url",kind:"scalar",T:9},{no:6,name:"auth_webhook_methods",kind:"scalar",T:9,repeated:!0},{no:17,name:"auth_webhook_max_retries",kind:"scalar",T:4},{no:18,name:"auth_webhook_min_wait_interval",kind:"scalar",T:9},{no:19,name:"auth_webhook_max_wait_interval",kind:"scalar",T:9},{no:20,name:"auth_webhook_request_timeout",kind:"scalar",T:9},{no:7,name:"event_webhook_url",kind:"scalar",T:9},{no:8,name:"event_webhook_events",kind:"scalar",T:9,repeated:!0},{no:21,name:"event_webhook_max_retries",kind:"scalar",T:4},{no:22,name:"event_webhook_min_wait_interval",kind:"scalar",T:9},{no:23,name:"event_webhook_max_wait_interval",kind:"scalar",T:9},{no:24,name:"event_webhook_request_timeout",kind:"scalar",T:9},{no:9,name:"client_deactivate_threshold",kind:"scalar",T:9},{no:25,name:"snapshot_threshold",kind:"scalar",T:3},{no:26,name:"snapshot_interval",kind:"scalar",T:3},{no:10,name:"max_subscribers_per_document",kind:"scalar",T:5},{no:11,name:"max_attachments_per_document",kind:"scalar",T:5},{no:15,name:"max_size_per_document",kind:"scalar",T:5},{no:16,name:"remove_on_detach",kind:"scalar",T:8},{no:27,name:"auto_revision_enabled",kind:"scalar",T:8},{no:14,name:"allowed_origins",kind:"scalar",T:9,repeated:!0},{no:12,name:"created_at",kind:"message",T:Ce},{no:13,name:"updated_at",kind:"message",T:Ce}]));let rg=qn;const Vn=class Vn extends P{constructor(t){super();l(this,"timestamp",G.zero);l(this,"value",0);f.util.initPartial(t,this)}static fromBinary(t,r){return new Vn().fromBinary(t,r)}static fromJson(t,r){return new Vn().fromJson(t,r)}static fromJsonString(t,r){return new Vn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Vn,t,r)}};l(Vn,"runtime",f),l(Vn,"typeName","yorkie.v1.MetricPoint"),l(Vn,"fields",f.util.newFieldList(()=>[{no:1,name:"timestamp",kind:"scalar",T:3},{no:2,name:"value",kind:"scalar",T:5}]));let ig=Vn;const Kn=class Kn extends P{constructor(t){super();l(this,"name");l(this,"authWebhookUrl");l(this,"authWebhookMethods");l(this,"authWebhookMaxRetries");l(this,"authWebhookMinWaitInterval");l(this,"authWebhookMaxWaitInterval");l(this,"authWebhookRequestTimeout");l(this,"eventWebhookUrl");l(this,"eventWebhookEvents");l(this,"eventWebhookMaxRetries");l(this,"eventWebhookMinWaitInterval");l(this,"eventWebhookMaxWaitInterval");l(this,"eventWebhookRequestTimeout");l(this,"snapshotThreshold");l(this,"snapshotInterval");l(this,"clientDeactivateThreshold");l(this,"maxSubscribersPerDocument");l(this,"maxAttachmentsPerDocument");l(this,"maxSizePerDocument");l(this,"removeOnDetach");l(this,"autoRevisionEnabled");l(this,"allowedOrigins");f.util.initPartial(t,this)}static fromBinary(t,r){return new Kn().fromBinary(t,r)}static fromJson(t,r){return new Kn().fromJson(t,r)}static fromJsonString(t,r){return new Kn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Kn,t,r)}};l(Kn,"runtime",f),l(Kn,"typeName","yorkie.v1.UpdatableProjectFields"),l(Kn,"fields",f.util.newFieldList(()=>[{no:1,name:"name",kind:"message",T:Se},{no:2,name:"auth_webhook_url",kind:"message",T:Se},{no:3,name:"auth_webhook_methods",kind:"message",T:df},{no:12,name:"auth_webhook_max_retries",kind:"message",T:At},{no:13,name:"auth_webhook_min_wait_interval",kind:"message",T:Se},{no:14,name:"auth_webhook_max_wait_interval",kind:"message",T:Se},{no:15,name:"auth_webhook_request_timeout",kind:"message",T:Se},{no:4,name:"event_webhook_url",kind:"message",T:Se},{no:5,name:"event_webhook_events",kind:"message",T:hf},{no:16,name:"event_webhook_max_retries",kind:"message",T:At},{no:17,name:"event_webhook_min_wait_interval",kind:"message",T:Se},{no:18,name:"event_webhook_max_wait_interval",kind:"message",T:Se},{no:19,name:"event_webhook_request_timeout",kind:"message",T:Se},{no:20,name:"snapshot_threshold",kind:"message",T:xt},{no:21,name:"snapshot_interval",kind:"message",T:xt},{no:6,name:"client_deactivate_threshold",kind:"message",T:Se},{no:7,name:"max_subscribers_per_document",kind:"message",T:it},{no:8,name:"max_attachments_per_document",kind:"message",T:it},{no:10,name:"max_size_per_document",kind:"message",T:it},{no:11,name:"remove_on_detach",kind:"message",T:Et},{no:22,name:"auto_revision_enabled",kind:"message",T:Et},{no:9,name:"allowed_origins",kind:"message",T:mf}]));let sg=Kn;const Wn=class Wn extends P{constructor(t){super();l(this,"methods",[]);f.util.initPartial(t,this)}static fromBinary(t,r){return new Wn().fromBinary(t,r)}static fromJson(t,r){return new Wn().fromJson(t,r)}static fromJsonString(t,r){return new Wn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Wn,t,r)}};l(Wn,"runtime",f),l(Wn,"typeName","yorkie.v1.UpdatableProjectFields.AuthWebhookMethods"),l(Wn,"fields",f.util.newFieldList(()=>[{no:1,name:"methods",kind:"scalar",T:9,repeated:!0}]));let df=Wn;const Hn=class Hn extends P{constructor(t){super();l(this,"events",[]);f.util.initPartial(t,this)}static fromBinary(t,r){return new Hn().fromBinary(t,r)}static fromJson(t,r){return new Hn().fromJson(t,r)}static fromJsonString(t,r){return new Hn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Hn,t,r)}};l(Hn,"runtime",f),l(Hn,"typeName","yorkie.v1.UpdatableProjectFields.EventWebhookEvents"),l(Hn,"fields",f.util.newFieldList(()=>[{no:1,name:"events",kind:"scalar",T:9,repeated:!0}]));let hf=Hn;const Gn=class Gn extends P{constructor(t){super();l(this,"origins",[]);f.util.initPartial(t,this)}static fromBinary(t,r){return new Gn().fromBinary(t,r)}static fromJson(t,r){return new Gn().fromJson(t,r)}static fromJsonString(t,r){return new Gn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Gn,t,r)}};l(Gn,"runtime",f),l(Gn,"typeName","yorkie.v1.UpdatableProjectFields.AllowedOrigins"),l(Gn,"fields",f.util.newFieldList(()=>[{no:1,name:"origins",kind:"scalar",T:9,repeated:!0}]));let mf=Gn;const Yn=class Yn extends P{constructor(t){super();l(this,"id","");l(this,"key","");l(this,"root","");l(this,"attachedClients",0);l(this,"documentSize");l(this,"schemaKey","");l(this,"presences",{});l(this,"createdAt");l(this,"accessedAt");l(this,"updatedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new Yn().fromBinary(t,r)}static fromJson(t,r){return new Yn().fromJson(t,r)}static fromJsonString(t,r){return new Yn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Yn,t,r)}};l(Yn,"runtime",f),l(Yn,"typeName","yorkie.v1.DocumentSummary"),l(Yn,"fields",f.util.newFieldList(()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"key",kind:"scalar",T:9},{no:3,name:"root",kind:"scalar",T:9},{no:7,name:"attached_clients",kind:"scalar",T:5},{no:8,name:"document_size",kind:"message",T:vf},{no:9,name:"schema_key",kind:"scalar",T:9},{no:10,name:"presences",kind:"map",K:9,V:{kind:"message",T:Hs}},{no:4,name:"created_at",kind:"message",T:Ce},{no:5,name:"accessed_at",kind:"message",T:Ce},{no:6,name:"updated_at",kind:"message",T:Ce}]));let og=Yn;const _n=class _n extends P{constructor(t){super();l(this,"type",0);l(this,"presence");f.util.initPartial(t,this)}static fromBinary(t,r){return new _n().fromBinary(t,r)}static fromJson(t,r){return new _n().fromJson(t,r)}static fromJsonString(t,r){return new _n().fromJsonString(t,r)}static equals(t,r){return f.util.equals(_n,t,r)}};l(_n,"runtime",f),l(_n,"typeName","yorkie.v1.PresenceChange"),l(_n,"fields",f.util.newFieldList(()=>[{no:1,name:"type",kind:"enum",T:f.getEnumType(ts)},{no:2,name:"presence",kind:"message",T:Hs}]));let aa=_n;var ts=(n=>(n[n.UNSPECIFIED=0]="UNSPECIFIED",n[n.PUT=1]="PUT",n[n.DELETE=2]="DELETE",n[n.CLEAR=3]="CLEAR",n))(ts||{});f.util.setEnumType(ts,"yorkie.v1.PresenceChange.ChangeType",[{no:0,name:"CHANGE_TYPE_UNSPECIFIED"},{no:1,name:"CHANGE_TYPE_PUT"},{no:2,name:"CHANGE_TYPE_DELETE"},{no:3,name:"CHANGE_TYPE_CLEAR"}]);const Xn=class Xn extends P{constructor(t){super();l(this,"data",{});f.util.initPartial(t,this)}static fromBinary(t,r){return new Xn().fromBinary(t,r)}static fromJson(t,r){return new Xn().fromJson(t,r)}static fromJsonString(t,r){return new Xn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Xn,t,r)}};l(Xn,"runtime",f),l(Xn,"typeName","yorkie.v1.Presence"),l(Xn,"fields",f.util.newFieldList(()=>[{no:1,name:"data",kind:"map",K:9,V:{kind:"scalar",T:9}}]));let Hs=Xn;const Qn=class Qn extends P{constructor(t){super();l(this,"key","");l(this,"presenceCount",0);f.util.initPartial(t,this)}static fromBinary(t,r){return new Qn().fromBinary(t,r)}static fromJson(t,r){return new Qn().fromJson(t,r)}static fromJsonString(t,r){return new Qn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Qn,t,r)}};l(Qn,"runtime",f),l(Qn,"typeName","yorkie.v1.ChannelSummary"),l(Qn,"fields",f.util.newFieldList(()=>[{no:1,name:"key",kind:"scalar",T:9},{no:2,name:"presence_count",kind:"scalar",T:5}]));let ag=Qn;var kt;let gv=(kt=class extends P{constructor(t){super();l(this,"serverSeq",G.zero);l(this,"clientSeq",0);f.util.initPartial(t,this)}static fromBinary(t,r){return new kt().fromBinary(t,r)}static fromJson(t,r){return new kt().fromJson(t,r)}static fromJsonString(t,r){return new kt().fromJsonString(t,r)}static equals(t,r){return f.util.equals(kt,t,r)}},l(kt,"runtime",f),l(kt,"typeName","yorkie.v1.Checkpoint"),l(kt,"fields",f.util.newFieldList(()=>[{no:1,name:"server_seq",kind:"scalar",T:3},{no:2,name:"client_seq",kind:"scalar",T:13}])),kt);const Zn=class Zn extends P{constructor(t){super();l(this,"createdAt");l(this,"offset",0);l(this,"relativeOffset",0);f.util.initPartial(t,this)}static fromBinary(t,r){return new Zn().fromBinary(t,r)}static fromJson(t,r){return new Zn().fromJson(t,r)}static fromJsonString(t,r){return new Zn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Zn,t,r)}};l(Zn,"runtime",f),l(Zn,"typeName","yorkie.v1.TextNodePos"),l(Zn,"fields",f.util.newFieldList(()=>[{no:1,name:"created_at",kind:"message",T:J},{no:2,name:"offset",kind:"scalar",T:5},{no:3,name:"relative_offset",kind:"scalar",T:5}]));let ns=Zn;var Tt;let J=(Tt=class extends P{constructor(t){super();l(this,"lamport",G.zero);l(this,"delimiter",0);l(this,"actorId",new Uint8Array(0));f.util.initPartial(t,this)}static fromBinary(t,r){return new Tt().fromBinary(t,r)}static fromJson(t,r){return new Tt().fromJson(t,r)}static fromJsonString(t,r){return new Tt().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Tt,t,r)}},l(Tt,"runtime",f),l(Tt,"typeName","yorkie.v1.TimeTicket"),l(Tt,"fields",f.util.newFieldList(()=>[{no:1,name:"lamport",kind:"scalar",T:3},{no:2,name:"delimiter",kind:"scalar",T:13},{no:3,name:"actor_id",kind:"scalar",T:12}])),Tt);const er=class er extends P{constructor(t){super();l(this,"topic","");l(this,"payload",new Uint8Array(0));f.util.initPartial(t,this)}static fromBinary(t,r){return new er().fromBinary(t,r)}static fromJson(t,r){return new er().fromJson(t,r)}static fromJsonString(t,r){return new er().fromJsonString(t,r)}static equals(t,r){return f.util.equals(er,t,r)}};l(er,"runtime",f),l(er,"typeName","yorkie.v1.DocEventBody"),l(er,"fields",f.util.newFieldList(()=>[{no:1,name:"topic",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:12}]));let gf=er;const tr=class tr extends P{constructor(t){super();l(this,"type",0);l(this,"publisher","");l(this,"body");f.util.initPartial(t,this)}static fromBinary(t,r){return new tr().fromBinary(t,r)}static fromJson(t,r){return new tr().fromJson(t,r)}static fromJsonString(t,r){return new tr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(tr,t,r)}};l(tr,"runtime",f),l(tr,"typeName","yorkie.v1.DocEvent"),l(tr,"fields",f.util.newFieldList(()=>[{no:1,name:"type",kind:"enum",T:f.getEnumType(Ks)},{no:2,name:"publisher",kind:"scalar",T:9},{no:3,name:"body",kind:"message",T:gf}]));let pf=tr;const nr=class nr extends P{constructor(t){super();l(this,"type",0);l(this,"publisher","");l(this,"count",G.zero);l(this,"seq",G.zero);l(this,"topic","");l(this,"payload",new Uint8Array(0));f.util.initPartial(t,this)}static fromBinary(t,r){return new nr().fromBinary(t,r)}static fromJson(t,r){return new nr().fromJson(t,r)}static fromJsonString(t,r){return new nr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(nr,t,r)}};l(nr,"runtime",f),l(nr,"typeName","yorkie.v1.ChannelEvent"),l(nr,"fields",f.util.newFieldList(()=>[{no:1,name:"type",kind:"enum",T:f.getEnumType(Pu)},{no:2,name:"publisher",kind:"scalar",T:9},{no:3,name:"count",kind:"scalar",T:3},{no:4,name:"seq",kind:"scalar",T:3},{no:5,name:"topic",kind:"scalar",T:9},{no:6,name:"payload",kind:"scalar",T:12}]));let yf=nr;var Pu=(n=>(n[n.UNSPECIFIED=0]="UNSPECIFIED",n[n.PRESENCE=1]="PRESENCE",n[n.BROADCAST=2]="BROADCAST",n))(Pu||{});f.util.setEnumType(Pu,"yorkie.v1.ChannelEvent.Type",[{no:0,name:"TYPE_UNSPECIFIED"},{no:1,name:"TYPE_PRESENCE"},{no:2,name:"TYPE_BROADCAST"}]);const rr=class rr extends P{constructor(t){super();l(this,"data",0);l(this,"meta",0);f.util.initPartial(t,this)}static fromBinary(t,r){return new rr().fromBinary(t,r)}static fromJson(t,r){return new rr().fromJson(t,r)}static fromJsonString(t,r){return new rr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(rr,t,r)}};l(rr,"runtime",f),l(rr,"typeName","yorkie.v1.DataSize"),l(rr,"fields",f.util.newFieldList(()=>[{no:1,name:"data",kind:"scalar",T:5},{no:2,name:"meta",kind:"scalar",T:5}]));let ru=rr;const ir=class ir extends P{constructor(t){super();l(this,"live");l(this,"gc");f.util.initPartial(t,this)}static fromBinary(t,r){return new ir().fromBinary(t,r)}static fromJson(t,r){return new ir().fromJson(t,r)}static fromJsonString(t,r){return new ir().fromJsonString(t,r)}static equals(t,r){return f.util.equals(ir,t,r)}};l(ir,"runtime",f),l(ir,"typeName","yorkie.v1.DocSize"),l(ir,"fields",f.util.newFieldList(()=>[{no:1,name:"live",kind:"message",T:ru},{no:2,name:"gc",kind:"message",T:ru}]));let vf=ir;const sr=class sr extends P{constructor(t){super();l(this,"id","");l(this,"name","");l(this,"version",0);l(this,"body","");l(this,"rules",[]);l(this,"createdAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new sr().fromBinary(t,r)}static fromJson(t,r){return new sr().fromJson(t,r)}static fromJsonString(t,r){return new sr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(sr,t,r)}};l(sr,"runtime",f),l(sr,"typeName","yorkie.v1.Schema"),l(sr,"fields",f.util.newFieldList(()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"version",kind:"scalar",T:5},{no:4,name:"body",kind:"scalar",T:9},{no:5,name:"rules",kind:"message",T:iu,repeated:!0},{no:6,name:"created_at",kind:"message",T:Ce}]));let lg=sr;const or=class or extends P{constructor(t){super();l(this,"path","");l(this,"type","");f.util.initPartial(t,this)}static fromBinary(t,r){return new or().fromBinary(t,r)}static fromJson(t,r){return new or().fromJson(t,r)}static fromJsonString(t,r){return new or().fromJsonString(t,r)}static equals(t,r){return f.util.equals(or,t,r)}};l(or,"runtime",f),l(or,"typeName","yorkie.v1.Rule"),l(or,"fields",f.util.newFieldList(()=>[{no:1,name:"path",kind:"scalar",T:9},{no:2,name:"type",kind:"scalar",T:9}]));let iu=or;const ar=class ar extends P{constructor(t){super();l(this,"id","");l(this,"label","");l(this,"description","");l(this,"snapshot","");l(this,"createdAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new ar().fromBinary(t,r)}static fromJson(t,r){return new ar().fromJson(t,r)}static fromJsonString(t,r){return new ar().fromJsonString(t,r)}static equals(t,r){return f.util.equals(ar,t,r)}};l(ar,"runtime",f),l(ar,"typeName","yorkie.v1.RevisionSummary"),l(ar,"fields",f.util.newFieldList(()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"label",kind:"scalar",T:9},{no:3,name:"description",kind:"scalar",T:9},{no:4,name:"snapshot",kind:"scalar",T:9},{no:5,name:"created_at",kind:"message",T:Ce}]));let su=ar;const lr=class lr extends P{constructor(t){super();l(this,"clientKey","");l(this,"metadata",{});f.util.initPartial(t,this)}static fromBinary(t,r){return new lr().fromBinary(t,r)}static fromJson(t,r){return new lr().fromJson(t,r)}static fromJsonString(t,r){return new lr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(lr,t,r)}};l(lr,"runtime",f),l(lr,"typeName","yorkie.v1.ActivateClientRequest"),l(lr,"fields",f.util.newFieldList(()=>[{no:1,name:"client_key",kind:"scalar",T:9},{no:2,name:"metadata",kind:"map",K:9,V:{kind:"scalar",T:9}}]));let wf=lr;const ur=class ur extends P{constructor(t){super();l(this,"clientId","");f.util.initPartial(t,this)}static fromBinary(t,r){return new ur().fromBinary(t,r)}static fromJson(t,r){return new ur().fromJson(t,r)}static fromJsonString(t,r){return new ur().fromJsonString(t,r)}static equals(t,r){return f.util.equals(ur,t,r)}};l(ur,"runtime",f),l(ur,"typeName","yorkie.v1.ActivateClientResponse"),l(ur,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9}]));let Sf=ur;const cr=class cr extends P{constructor(t){super();l(this,"clientId","");l(this,"synchronous",!1);f.util.initPartial(t,this)}static fromBinary(t,r){return new cr().fromBinary(t,r)}static fromJson(t,r){return new cr().fromJson(t,r)}static fromJsonString(t,r){return new cr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(cr,t,r)}};l(cr,"runtime",f),l(cr,"typeName","yorkie.v1.DeactivateClientRequest"),l(cr,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"synchronous",kind:"scalar",T:8}]));let kf=cr;const fr=class fr extends P{constructor(e){super(),f.util.initPartial(e,this)}static fromBinary(e,t){return new fr().fromBinary(e,t)}static fromJson(e,t){return new fr().fromJson(e,t)}static fromJsonString(e,t){return new fr().fromJsonString(e,t)}static equals(e,t){return f.util.equals(fr,e,t)}};l(fr,"runtime",f),l(fr,"typeName","yorkie.v1.DeactivateClientResponse"),l(fr,"fields",f.util.newFieldList(()=>[]));let Tf=fr;const dr=class dr extends P{constructor(t){super();l(this,"clientId","");l(this,"changePack");l(this,"schemaKey","");f.util.initPartial(t,this)}static fromBinary(t,r){return new dr().fromBinary(t,r)}static fromJson(t,r){return new dr().fromJson(t,r)}static fromJsonString(t,r){return new dr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(dr,t,r)}};l(dr,"runtime",f),l(dr,"typeName","yorkie.v1.AttachDocumentRequest"),l(dr,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"change_pack",kind:"message",T:ii},{no:3,name:"schema_key",kind:"scalar",T:9}]));let If=dr;const hr=class hr extends P{constructor(t){super();l(this,"documentId","");l(this,"changePack");l(this,"maxSizePerDocument",0);l(this,"schemaRules",[]);f.util.initPartial(t,this)}static fromBinary(t,r){return new hr().fromBinary(t,r)}static fromJson(t,r){return new hr().fromJson(t,r)}static fromJsonString(t,r){return new hr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(hr,t,r)}};l(hr,"runtime",f),l(hr,"typeName","yorkie.v1.AttachDocumentResponse"),l(hr,"fields",f.util.newFieldList(()=>[{no:1,name:"document_id",kind:"scalar",T:9},{no:2,name:"change_pack",kind:"message",T:ii},{no:3,name:"max_size_per_document",kind:"scalar",T:5},{no:4,name:"schema_rules",kind:"message",T:iu,repeated:!0}]));let xf=hr;const mr=class mr extends P{constructor(t){super();l(this,"clientId","");l(this,"documentId","");l(this,"changePack");l(this,"removeIfNotAttached",!1);f.util.initPartial(t,this)}static fromBinary(t,r){return new mr().fromBinary(t,r)}static fromJson(t,r){return new mr().fromJson(t,r)}static fromJsonString(t,r){return new mr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(mr,t,r)}};l(mr,"runtime",f),l(mr,"typeName","yorkie.v1.DetachDocumentRequest"),l(mr,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:ii},{no:4,name:"remove_if_not_attached",kind:"scalar",T:8}]));let Af=mr;const gr=class gr extends P{constructor(t){super();l(this,"changePack");f.util.initPartial(t,this)}static fromBinary(t,r){return new gr().fromBinary(t,r)}static fromJson(t,r){return new gr().fromJson(t,r)}static fromJsonString(t,r){return new gr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(gr,t,r)}};l(gr,"runtime",f),l(gr,"typeName","yorkie.v1.DetachDocumentResponse"),l(gr,"fields",f.util.newFieldList(()=>[{no:2,name:"change_pack",kind:"message",T:ii}]));let Ef=gr;const pr=class pr extends P{constructor(t){super();l(this,"clientId","");l(this,"documentId","");f.util.initPartial(t,this)}static fromBinary(t,r){return new pr().fromBinary(t,r)}static fromJson(t,r){return new pr().fromJson(t,r)}static fromJsonString(t,r){return new pr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(pr,t,r)}};l(pr,"runtime",f),l(pr,"typeName","yorkie.v1.WatchDocumentRequest"),l(pr,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9}]));let Cf=pr;const yr=class yr extends P{constructor(t){super();l(this,"body",{case:void 0});f.util.initPartial(t,this)}static fromBinary(t,r){return new yr().fromBinary(t,r)}static fromJson(t,r){return new yr().fromJson(t,r)}static fromJsonString(t,r){return new yr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(yr,t,r)}};l(yr,"runtime",f),l(yr,"typeName","yorkie.v1.WatchDocumentResponse"),l(yr,"fields",f.util.newFieldList(()=>[{no:1,name:"initialization",kind:"message",T:Pf,oneof:"body"},{no:2,name:"event",kind:"message",T:pf,oneof:"body"}]));let Nf=yr;const vr=class vr extends P{constructor(t){super();l(this,"clientIds",[]);f.util.initPartial(t,this)}static fromBinary(t,r){return new vr().fromBinary(t,r)}static fromJson(t,r){return new vr().fromJson(t,r)}static fromJsonString(t,r){return new vr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(vr,t,r)}};l(vr,"runtime",f),l(vr,"typeName","yorkie.v1.WatchDocumentResponse.Initialization"),l(vr,"fields",f.util.newFieldList(()=>[{no:1,name:"client_ids",kind:"scalar",T:9,repeated:!0}]));let Pf=vr;const wr=class wr extends P{constructor(t){super();l(this,"clientId","");l(this,"documentId","");l(this,"changePack");f.util.initPartial(t,this)}static fromBinary(t,r){return new wr().fromBinary(t,r)}static fromJson(t,r){return new wr().fromJson(t,r)}static fromJsonString(t,r){return new wr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(wr,t,r)}};l(wr,"runtime",f),l(wr,"typeName","yorkie.v1.RemoveDocumentRequest"),l(wr,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:ii}]));let Df=wr;const Sr=class Sr extends P{constructor(t){super();l(this,"changePack");f.util.initPartial(t,this)}static fromBinary(t,r){return new Sr().fromBinary(t,r)}static fromJson(t,r){return new Sr().fromJson(t,r)}static fromJsonString(t,r){return new Sr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Sr,t,r)}};l(Sr,"runtime",f),l(Sr,"typeName","yorkie.v1.RemoveDocumentResponse"),l(Sr,"fields",f.util.newFieldList(()=>[{no:1,name:"change_pack",kind:"message",T:ii}]));let bf=Sr;const kr=class kr extends P{constructor(t){super();l(this,"clientId","");l(this,"documentId","");l(this,"changePack");l(this,"pushOnly",!1);f.util.initPartial(t,this)}static fromBinary(t,r){return new kr().fromBinary(t,r)}static fromJson(t,r){return new kr().fromJson(t,r)}static fromJsonString(t,r){return new kr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(kr,t,r)}};l(kr,"runtime",f),l(kr,"typeName","yorkie.v1.PushPullChangesRequest"),l(kr,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:ii},{no:4,name:"push_only",kind:"scalar",T:8}]));let Of=kr;const Tr=class Tr extends P{constructor(t){super();l(this,"changePack");f.util.initPartial(t,this)}static fromBinary(t,r){return new Tr().fromBinary(t,r)}static fromJson(t,r){return new Tr().fromJson(t,r)}static fromJsonString(t,r){return new Tr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Tr,t,r)}};l(Tr,"runtime",f),l(Tr,"typeName","yorkie.v1.PushPullChangesResponse"),l(Tr,"fields",f.util.newFieldList(()=>[{no:1,name:"change_pack",kind:"message",T:ii}]));let Lf=Tr;const Ir=class Ir extends P{constructor(t){super();l(this,"clientId","");l(this,"documentId","");l(this,"label","");l(this,"description","");f.util.initPartial(t,this)}static fromBinary(t,r){return new Ir().fromBinary(t,r)}static fromJson(t,r){return new Ir().fromJson(t,r)}static fromJsonString(t,r){return new Ir().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Ir,t,r)}};l(Ir,"runtime",f),l(Ir,"typeName","yorkie.v1.CreateRevisionRequest"),l(Ir,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"label",kind:"scalar",T:9},{no:4,name:"description",kind:"scalar",T:9}]));let Rf=Ir;const xr=class xr extends P{constructor(t){super();l(this,"revision");f.util.initPartial(t,this)}static fromBinary(t,r){return new xr().fromBinary(t,r)}static fromJson(t,r){return new xr().fromJson(t,r)}static fromJsonString(t,r){return new xr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(xr,t,r)}};l(xr,"runtime",f),l(xr,"typeName","yorkie.v1.CreateRevisionResponse"),l(xr,"fields",f.util.newFieldList(()=>[{no:1,name:"revision",kind:"message",T:su}]));let Bf=xr;const Ar=class Ar extends P{constructor(t){super();l(this,"projectId","");l(this,"documentId","");l(this,"pageSize",0);l(this,"offset",0);l(this,"isForward",!1);f.util.initPartial(t,this)}static fromBinary(t,r){return new Ar().fromBinary(t,r)}static fromJson(t,r){return new Ar().fromJson(t,r)}static fromJsonString(t,r){return new Ar().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Ar,t,r)}};l(Ar,"runtime",f),l(Ar,"typeName","yorkie.v1.ListRevisionsRequest"),l(Ar,"fields",f.util.newFieldList(()=>[{no:1,name:"project_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"page_size",kind:"scalar",T:5},{no:4,name:"offset",kind:"scalar",T:5},{no:5,name:"is_forward",kind:"scalar",T:8}]));let zf=Ar;const Er=class Er extends P{constructor(t){super();l(this,"revisions",[]);f.util.initPartial(t,this)}static fromBinary(t,r){return new Er().fromBinary(t,r)}static fromJson(t,r){return new Er().fromJson(t,r)}static fromJsonString(t,r){return new Er().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Er,t,r)}};l(Er,"runtime",f),l(Er,"typeName","yorkie.v1.ListRevisionsResponse"),l(Er,"fields",f.util.newFieldList(()=>[{no:1,name:"revisions",kind:"message",T:su,repeated:!0}]));let $f=Er;const Cr=class Cr extends P{constructor(t){super();l(this,"clientId","");l(this,"revisionId","");f.util.initPartial(t,this)}static fromBinary(t,r){return new Cr().fromBinary(t,r)}static fromJson(t,r){return new Cr().fromJson(t,r)}static fromJsonString(t,r){return new Cr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Cr,t,r)}};l(Cr,"runtime",f),l(Cr,"typeName","yorkie.v1.RestoreRevisionRequest"),l(Cr,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"revision_id",kind:"scalar",T:9}]));let Jf=Cr;const Nr=class Nr extends P{constructor(e){super(),f.util.initPartial(e,this)}static fromBinary(e,t){return new Nr().fromBinary(e,t)}static fromJson(e,t){return new Nr().fromJson(e,t)}static fromJsonString(e,t){return new Nr().fromJsonString(e,t)}static equals(e,t){return f.util.equals(Nr,e,t)}};l(Nr,"runtime",f),l(Nr,"typeName","yorkie.v1.RestoreRevisionResponse"),l(Nr,"fields",f.util.newFieldList(()=>[]));let Mf=Nr;const Pr=class Pr extends P{constructor(t){super();l(this,"clientId","");l(this,"channelKey","");f.util.initPartial(t,this)}static fromBinary(t,r){return new Pr().fromBinary(t,r)}static fromJson(t,r){return new Pr().fromJson(t,r)}static fromJsonString(t,r){return new Pr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Pr,t,r)}};l(Pr,"runtime",f),l(Pr,"typeName","yorkie.v1.AttachChannelRequest"),l(Pr,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"channel_key",kind:"scalar",T:9}]));let Ff=Pr;const Dr=class Dr extends P{constructor(t){super();l(this,"sessionId","");l(this,"count",G.zero);f.util.initPartial(t,this)}static fromBinary(t,r){return new Dr().fromBinary(t,r)}static fromJson(t,r){return new Dr().fromJson(t,r)}static fromJsonString(t,r){return new Dr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Dr,t,r)}};l(Dr,"runtime",f),l(Dr,"typeName","yorkie.v1.AttachChannelResponse"),l(Dr,"fields",f.util.newFieldList(()=>[{no:1,name:"session_id",kind:"scalar",T:9},{no:2,name:"count",kind:"scalar",T:3}]));let Uf=Dr;const br=class br extends P{constructor(t){super();l(this,"clientId","");l(this,"channelKey","");l(this,"sessionId","");f.util.initPartial(t,this)}static fromBinary(t,r){return new br().fromBinary(t,r)}static fromJson(t,r){return new br().fromJson(t,r)}static fromJsonString(t,r){return new br().fromJsonString(t,r)}static equals(t,r){return f.util.equals(br,t,r)}};l(br,"runtime",f),l(br,"typeName","yorkie.v1.DetachChannelRequest"),l(br,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"channel_key",kind:"scalar",T:9},{no:3,name:"session_id",kind:"scalar",T:9}]));let jf=br;const Or=class Or extends P{constructor(t){super();l(this,"count",G.zero);f.util.initPartial(t,this)}static fromBinary(t,r){return new Or().fromBinary(t,r)}static fromJson(t,r){return new Or().fromJson(t,r)}static fromJsonString(t,r){return new Or().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Or,t,r)}};l(Or,"runtime",f),l(Or,"typeName","yorkie.v1.DetachChannelResponse"),l(Or,"fields",f.util.newFieldList(()=>[{no:1,name:"count",kind:"scalar",T:3}]));let qf=Or;const Lr=class Lr extends P{constructor(t){super();l(this,"clientId","");l(this,"channelKey","");l(this,"sessionId","");f.util.initPartial(t,this)}static fromBinary(t,r){return new Lr().fromBinary(t,r)}static fromJson(t,r){return new Lr().fromJson(t,r)}static fromJsonString(t,r){return new Lr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Lr,t,r)}};l(Lr,"runtime",f),l(Lr,"typeName","yorkie.v1.RefreshChannelRequest"),l(Lr,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"channel_key",kind:"scalar",T:9},{no:3,name:"session_id",kind:"scalar",T:9}]));let Vf=Lr;const Rr=class Rr extends P{constructor(t){super();l(this,"count",G.zero);f.util.initPartial(t,this)}static fromBinary(t,r){return new Rr().fromBinary(t,r)}static fromJson(t,r){return new Rr().fromJson(t,r)}static fromJsonString(t,r){return new Rr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Rr,t,r)}};l(Rr,"runtime",f),l(Rr,"typeName","yorkie.v1.RefreshChannelResponse"),l(Rr,"fields",f.util.newFieldList(()=>[{no:1,name:"count",kind:"scalar",T:3}]));let Kf=Rr;const Br=class Br extends P{constructor(t){super();l(this,"clientId","");l(this,"channelKey","");f.util.initPartial(t,this)}static fromBinary(t,r){return new Br().fromBinary(t,r)}static fromJson(t,r){return new Br().fromJson(t,r)}static fromJsonString(t,r){return new Br().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Br,t,r)}};l(Br,"runtime",f),l(Br,"typeName","yorkie.v1.WatchChannelRequest"),l(Br,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"channel_key",kind:"scalar",T:9}]));let Wf=Br;const zr=class zr extends P{constructor(t){super();l(this,"body",{case:void 0});f.util.initPartial(t,this)}static fromBinary(t,r){return new zr().fromBinary(t,r)}static fromJson(t,r){return new zr().fromJson(t,r)}static fromJsonString(t,r){return new zr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(zr,t,r)}};l(zr,"runtime",f),l(zr,"typeName","yorkie.v1.WatchChannelResponse"),l(zr,"fields",f.util.newFieldList(()=>[{no:1,name:"initialized",kind:"message",T:Gf,oneof:"body"},{no:2,name:"event",kind:"message",T:yf,oneof:"body"}]));let Hf=zr;const $r=class $r extends P{constructor(t){super();l(this,"count",G.zero);l(this,"seq",G.zero);f.util.initPartial(t,this)}static fromBinary(t,r){return new $r().fromBinary(t,r)}static fromJson(t,r){return new $r().fromJson(t,r)}static fromJsonString(t,r){return new $r().fromJsonString(t,r)}static equals(t,r){return f.util.equals($r,t,r)}};l($r,"runtime",f),l($r,"typeName","yorkie.v1.WatchChannelInitialized"),l($r,"fields",f.util.newFieldList(()=>[{no:1,name:"count",kind:"scalar",T:3},{no:2,name:"seq",kind:"scalar",T:3}]));let Gf=$r;const Jr=class Jr extends P{constructor(t){super();l(this,"clientId","");l(this,"channelKey","");l(this,"topic","");l(this,"payload",new Uint8Array(0));f.util.initPartial(t,this)}static fromBinary(t,r){return new Jr().fromBinary(t,r)}static fromJson(t,r){return new Jr().fromJson(t,r)}static fromJsonString(t,r){return new Jr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Jr,t,r)}};l(Jr,"runtime",f),l(Jr,"typeName","yorkie.v1.BroadcastRequest"),l(Jr,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"channel_key",kind:"scalar",T:9},{no:3,name:"topic",kind:"scalar",T:9},{no:4,name:"payload",kind:"scalar",T:12}]));let Yf=Jr;const Mr=class Mr extends P{constructor(e){super(),f.util.initPartial(e,this)}static fromBinary(e,t){return new Mr().fromBinary(e,t)}static fromJson(e,t){return new Mr().fromJson(e,t)}static fromJsonString(e,t){return new Mr().fromJsonString(e,t)}static equals(e,t){return f.util.equals(Mr,e,t)}};l(Mr,"runtime",f),l(Mr,"typeName","yorkie.v1.BroadcastResponse"),l(Mr,"fields",f.util.newFieldList(()=>[]));let _f=Mr;const WS={typeName:"yorkie.v1.YorkieService",methods:{activateClient:{name:"ActivateClient",I:wf,O:Sf,kind:de.Unary},deactivateClient:{name:"DeactivateClient",I:kf,O:Tf,kind:de.Unary},attachDocument:{name:"AttachDocument",I:If,O:xf,kind:de.Unary},detachDocument:{name:"DetachDocument",I:Af,O:Ef,kind:de.Unary},removeDocument:{name:"RemoveDocument",I:Df,O:bf,kind:de.Unary},pushPullChanges:{name:"PushPullChanges",I:Of,O:Lf,kind:de.Unary},watchDocument:{name:"WatchDocument",I:Cf,O:Nf,kind:de.ServerStreaming},createRevision:{name:"CreateRevision",I:Rf,O:Bf,kind:de.Unary},listRevisions:{name:"ListRevisions",I:zf,O:$f,kind:de.Unary},restoreRevision:{name:"RestoreRevision",I:Jf,O:Mf,kind:de.Unary},attachChannel:{name:"AttachChannel",I:Ff,O:Uf,kind:de.Unary},detachChannel:{name:"DetachChannel",I:jf,O:qf,kind:de.Unary},refreshChannel:{name:"RefreshChannel",I:Vf,O:Kf,kind:de.Unary},watchChannel:{name:"WatchChannel",I:Wf,O:Hf,kind:de.ServerStreaming},broadcast:{name:"Broadcast",I:Yf,O:_f,kind:de.Unary}}},HS=f.makeMessageType("google.rpc.ErrorInfo",()=>[{no:1,name:"reason",kind:"scalar",T:9},{no:2,name:"domain",kind:"scalar",T:9},{no:3,name:"metadata",kind:"map",K:9,V:{kind:"scalar",T:9}}]);f.makeMessageType("google.rpc.RetryInfo",()=>[{no:1,name:"retry_delay",kind:"message",T:Kr}]);f.makeMessageType("google.rpc.DebugInfo",()=>[{no:1,name:"stack_entries",kind:"scalar",T:9,repeated:!0},{no:2,name:"detail",kind:"scalar",T:9}]);f.makeMessageType("google.rpc.QuotaFailure",()=>[{no:1,name:"violations",kind:"message",T:GS,repeated:!0}]);const GS=f.makeMessageType("google.rpc.QuotaFailure.Violation",()=>[{no:1,name:"subject",kind:"scalar",T:9},{no:2,name:"description",kind:"scalar",T:9},{no:3,name:"api_service",kind:"scalar",T:9},{no:4,name:"quota_metric",kind:"scalar",T:9},{no:5,name:"quota_id",kind:"scalar",T:9},{no:6,name:"quota_dimensions",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:7,name:"quota_value",kind:"scalar",T:3},{no:8,name:"future_quota_value",kind:"scalar",T:3,opt:!0}],{localName:"QuotaFailure_Violation"});f.makeMessageType("google.rpc.PreconditionFailure",()=>[{no:1,name:"violations",kind:"message",T:YS,repeated:!0}]);const YS=f.makeMessageType("google.rpc.PreconditionFailure.Violation",()=>[{no:1,name:"type",kind:"scalar",T:9},{no:2,name:"subject",kind:"scalar",T:9},{no:3,name:"description",kind:"scalar",T:9}],{localName:"PreconditionFailure_Violation"});f.makeMessageType("google.rpc.BadRequest",()=>[{no:1,name:"field_violations",kind:"message",T:_S,repeated:!0}]);const _S=f.makeMessageType("google.rpc.BadRequest.FieldViolation",()=>[{no:1,name:"field",kind:"scalar",T:9},{no:2,name:"description",kind:"scalar",T:9},{no:3,name:"reason",kind:"scalar",T:9},{no:4,name:"localized_message",kind:"message",T:QS}],{localName:"BadRequest_FieldViolation"});f.makeMessageType("google.rpc.RequestInfo",()=>[{no:1,name:"request_id",kind:"scalar",T:9},{no:2,name:"serving_data",kind:"scalar",T:9}]);f.makeMessageType("google.rpc.ResourceInfo",()=>[{no:1,name:"resource_type",kind:"scalar",T:9},{no:2,name:"resource_name",kind:"scalar",T:9},{no:3,name:"owner",kind:"scalar",T:9},{no:4,name:"description",kind:"scalar",T:9}]);f.makeMessageType("google.rpc.Help",()=>[{no:1,name:"links",kind:"message",T:XS,repeated:!0}]);const XS=f.makeMessageType("google.rpc.Help.Link",()=>[{no:1,name:"description",kind:"scalar",T:9},{no:2,name:"url",kind:"scalar",T:9}],{localName:"Help_Link"}),QS=f.makeMessageType("google.rpc.LocalizedMessage",()=>[{no:1,name:"locale",kind:"scalar",T:9},{no:2,name:"message",kind:"scalar",T:9}]);var k=(n=>(n.Ok="ok",n.ErrClientNotActivated="ErrClientNotActivated",n.ErrClientNotFound="ErrClientNotFound",n.ErrUnimplemented="ErrUnimplemented",n.ErrInvalidType="ErrInvalidType",n.ErrDummy="ErrDummy",n.ErrNotAttached="ErrNotAttached",n.ErrNotDetached="ErrNotDetached",n.ErrDocumentRemoved="ErrDocumentRemoved",n.ErrDocumentSizeExceedsLimit="ErrDocumentSizeExceedsLimit",n.ErrDocumentSchemaValidationFailed="ErrDocumentSchemaValidationFailed",n.ErrInvalidObjectKey="ErrInvalidObjectKey",n.ErrInvalidArgument="ErrInvalidArgument",n.ErrNotInitialized="ErrNotInitialized",n.ErrNotReady="ErrNotReady",n.ErrRefused="ErrRefused",n.ErrContextNotProvided="ErrContextNotProvided",n.ErrPermissionDenied="ErrPermissionDenied",n.ErrUnauthenticated="ErrUnauthenticated",n.ErrTooManySubscribers="ErrTooManySubscribers",n.ErrTooManyAttachments="ErrTooManyAttachments",n))(k||{});class T extends Error{constructor(t,r){super(r);l(this,"name","YorkieError");l(this,"stack");this.code=t,this.message=r,this.toString=()=>`[code=${this.code}]: ${this.message}`}}var dn=(n=>(n.Put="put",n.Clear="clear",n))(dn||{});const nh="000000000000000000000000",un=24;class Dt{constructor(e,t,r){l(this,"lamport");l(this,"delimiter");l(this,"actorID");this.lamport=e,this.delimiter=t,this.actorID=r}static of(e,t,r){return new Dt(e,t,r)}static fromStruct(e){return Dt.of(BigInt(e.lamport),e.delimiter,e.actorID)}toIDString(){return`${this.lamport.toString()}:${this.actorID}:${this.delimiter}`}toStruct(){return{lamport:this.getLamportAsString(),delimiter:this.getDelimiter(),actorID:this.getActorID()}}toTestString(){return`${this.lamport.toString()}:${this.actorID.slice(-2)}:${this.delimiter}`}setActor(e){return new Dt(this.lamport,this.delimiter,e)}getLamportAsString(){return this.lamport.toString()}getLamport(){return this.lamport}getDelimiter(){return this.delimiter}getActorID(){return this.actorID}after(e){return this.compare(e)>0}equals(e){return this.compare(e)===0}compare(e){if(this.lamport>e.lamport)return 1;if(e.lamport>this.lamport)return-1;const t=this.actorID.localeCompare(e.actorID);return t!==0?t:this.delimiter>e.delimiter?1:e.delimiter>this.delimiter?-1:0}}const Xf=0n,pv=0,Qf=9223372036854775807n,Gs=new Dt(Xf,pv,nh);function on(n){return n.replace(/["'\\\n\r\f\b\t\u2028\u2029]/g,function(e){switch(e){case'"':case"\\":return"\\"+e;case`
`:return"\\n";case"\r":return"\\r";case"\f":return"\\f";case"\b":return"\\b";case"	":return"\\t";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:return e}})}class va{constructor(e){l(this,"createdAt");l(this,"movedAt");l(this,"removedAt");this.createdAt=e}getCreatedAt(){return this.createdAt}getID(){return this.createdAt}getMovedAt(){return this.movedAt}getRemovedAt(){return this.removedAt}getPositionedAt(){return this.movedAt?this.movedAt:this.createdAt}setCreatedAt(e){this.createdAt=e}setMovedAt(e){return!this.movedAt||e&&e.after(this.movedAt)?(this.movedAt=e,!0):!1}setRemovedAt(e){this.removedAt=e}remove(e){return e&&e.after(this.createdAt)&&(!this.removedAt||e.after(this.removedAt))?(this.removedAt=e,!0):!1}isRemoved(){return!!this.removedAt}getMetaUsage(){let e=0;return this.getCreatedAt()&&(e+=un),this.getMovedAt()&&(e+=un),this.getRemovedAt()&&(e+=un),e}}class Ei extends va{constructor(e){super(e)}}class ou{constructor(e,t){l(this,"strKey");l(this,"value");this.strKey=e,this.value=t}static of(e,t){return new ou(e,t)}isRemoved(){return this.value.isRemoved()}getStrKey(){return this.strKey}getValue(){return this.value}remove(e){return this.value.remove(e)}}class Ys{constructor(){l(this,"nodeMapByKey");l(this,"nodeMapByCreatedAt");this.nodeMapByKey=new Map,this.nodeMapByCreatedAt=new Map}static create(){return new Ys}set(e,t,r){let i;const s=this.nodeMapByKey.get(e);s&&!s.isRemoved()&&s.remove(r)&&(i=s.getValue());const o=ou.of(e,t);return this.nodeMapByCreatedAt.set(t.getCreatedAt().toIDString(),o),(!s||r.after(s.getValue().getPositionedAt()))&&(this.nodeMapByKey.set(e,o),t.setMovedAt(r)),i}delete(e,t){if(!this.nodeMapByCreatedAt.has(e.toIDString()))throw new T(k.ErrInvalidArgument,`fail to find ${e.toIDString()}`);const r=this.nodeMapByCreatedAt.get(e.toIDString());return r.remove(t),r.getValue()}subPathOf(e){const t=this.nodeMapByCreatedAt.get(e.toIDString());if(t)return t.getStrKey()}purge(e){const t=this.nodeMapByCreatedAt.get(e.getCreatedAt().toIDString());if(!t)throw new T(k.ErrInvalidArgument,`fail to find ${e.getCreatedAt().toIDString()}`);const r=this.nodeMapByKey.get(t.getStrKey());t===r&&this.nodeMapByKey.delete(r.getStrKey()),this.nodeMapByCreatedAt.delete(t.getValue().getCreatedAt().toIDString())}deleteByKey(e,t){const r=this.nodeMapByKey.get(e);if(r&&r.remove(t))return r.getValue()}has(e){const t=this.nodeMapByKey.get(e);return t?!t.isRemoved():!1}getByID(e){return this.nodeMapByCreatedAt.get(e.toIDString())}get(e){const t=this.nodeMapByKey.get(e);if(!(!t||t.isRemoved()))return t}deepcopy(){const e=Ys.create();for(const[,t]of this.nodeMapByCreatedAt)e.nodeMapByCreatedAt.set(t.getValue().getCreatedAt().toIDString(),ou.of(t.getStrKey(),t.getValue().deepcopy()));for(const[t,r]of this.nodeMapByKey)e.nodeMapByKey.set(t,e.nodeMapByCreatedAt.get(r.getValue().getCreatedAt().toIDString()));return e}*[Symbol.iterator](){for(const[,e]of this.nodeMapByCreatedAt)yield e}}class Je extends Ei{constructor(t,r){super(t);l(this,"memberNodes");this.memberNodes=r}static create(t,r){if(!r)return new Je(t,Ys.create());const i=Ys.create();for(const[s,o]of Object.entries(r))i.set(s,o.deepcopy(),o.getCreatedAt());return new Je(t,i)}subPathOf(t){return this.memberNodes.subPathOf(t)}purge(t){this.memberNodes.purge(t)}set(t,r,i){return this.memberNodes.set(t,r,i)}delete(t,r){return this.memberNodes.delete(t,r)}deleteByKey(t,r){return this.memberNodes.deleteByKey(t,r)}get(t){const r=this.memberNodes.get(t);return r==null?void 0:r.getValue()}getByID(t){const r=this.memberNodes.getByID(t);return r==null?void 0:r.getValue()}has(t){return this.memberNodes.has(t)}getDataSize(){return{data:0,meta:this.getMetaUsage()}}toJSON(){const t=[];for(const[r,i]of this)t.push(`"${on(r)}":${i.toJSON()}`);return`{${t.join(",")}}`}toJS(){return JSON.parse(this.toJSON())}toJSForTest(){const t={};for(const[r,i]of this){const{createdAt:s,value:o,type:a}=i.toJSForTest();t[r]={key:r,createdAt:s,value:o,type:a}}return{createdAt:this.getCreatedAt().toTestString(),value:t,type:"YORKIE_OBJECT"}}getKeys(){const t=Array();for(const[r]of this)t.push(r);return t}toSortedJSON(){var i;const t=new Set;for(const[s]of this)t.add(s);const r=[];for(const s of Array.from(t).sort()){const o=(i=this.memberNodes.get(s))==null?void 0:i.getValue();r.push(`"${on(s)}":${o.toSortedJSON()}`)}return`{${r.join(",")}}`}getRHT(){return this.memberNodes}deepcopy(){const t=Je.create(this.getCreatedAt());return t.memberNodes=this.memberNodes.deepcopy(),t.setRemovedAt(this.getRemovedAt()),t.setMovedAt(this.getMovedAt()),t}getDescendants(t){for(const r of this.memberNodes){const i=r.getValue();if(t(i,this))return;i instanceof Ei&&i.getDescendants(t)}}*[Symbol.iterator](){for(const t of this.memberNodes)t.isRemoved()||(yield[t.getStrKey(),t.getValue()])}}var se=(n=>(n.Local="local",n.Remote="remote",n.UndoRedo="undoredo",n))(se||{});class Gt{constructor(e,t){l(this,"parentCreatedAt");l(this,"executedAt");this.parentCreatedAt=e,this.executedAt=t}getParentCreatedAt(){return this.parentCreatedAt}getExecutedAt(){if(!this.executedAt)throw new T(k.ErrNotReady,"executedAt is not set yet");return this.executedAt}setActor(e){this.executedAt&&(this.executedAt=this.executedAt.setActor(e))}setExecutedAt(e){this.executedAt=e}}class yv{constructor(e){l(this,"value");l(this,"left");l(this,"right");l(this,"parent");l(this,"weight");this.value=e,this.initWeight()}getNodeString(){return`${this.weight}${this.value}`}getValue(){return this.value}getLeftWeight(){return this.hasLeft()?this.left.getWeight():0}getRightWeight(){return this.hasRight()?this.right.getWeight():0}getWeight(){return this.weight}getLeft(){return this.left}getRight(){return this.right}getParent(){return this.parent}hasLeft(){return!!this.left}hasRight(){return!!this.right}hasParent(){return!!this.parent}setLeft(e){this.left=e}setRight(e){this.right=e}setParent(e){this.parent=e}unlink(){this.parent=void 0,this.right=void 0,this.left=void 0}hasLinks(){return this.hasParent()||this.hasLeft()||this.hasRight()}increaseWeight(e){this.weight+=e}initWeight(){this.weight=this.getLength()}}class la{constructor(e){l(this,"root");this.root=e}get length(){return this.root?this.root.getWeight():0}find(e){if(!this.root||e<0)return[void 0,0];let t=this.root;for(;;)if(t.hasLeft()&&e<=t.getLeftWeight())t=t.getLeft();else if(t.hasRight()&&t.getLeftWeight()+t.getLength()<e)e-=t.getLeftWeight()+t.getLength(),t=t.getRight();else{e-=t.getLeftWeight();break}if(e>t.getLength())throw new T(k.ErrInvalidArgument,`out of index range: pos: ${e} > node.length: ${t.getLength()}`);return this.splayNode(t),[t,e]}indexOf(e){return!e||e!==this.root&&!e.hasLinks()?-1:(this.splayNode(e),this.root.getLeftWeight())}getRoot(){return this.root}insert(e){return this.insertAfter(this.root,e)}insertAfter(e,t){return e?(this.splayNode(e),this.root=t,t.setRight(e.getRight()),e.hasRight()&&e.getRight().setParent(t),t.setLeft(e),e.setParent(t),e.setRight(),this.updateWeight(e),this.updateWeight(t),t):(this.root=t,t)}updateWeight(e){e.initWeight(),e.hasLeft()&&e.increaseWeight(e.getLeftWeight()),e.hasRight()&&e.increaseWeight(e.getRightWeight())}updateTreeWeight(e){for(;e;)this.updateWeight(e),e=e.getParent()}splayNode(e){if(e)for(;;)if(this.isLeftChild(e.getParent())&&this.isRightChild(e))this.rotateLeft(e),this.rotateRight(e);else if(this.isRightChild(e.getParent())&&this.isLeftChild(e))this.rotateRight(e),this.rotateLeft(e);else if(this.isLeftChild(e.getParent())&&this.isLeftChild(e))this.rotateRight(e.getParent()),this.rotateRight(e);else if(this.isRightChild(e.getParent())&&this.isRightChild(e))this.rotateLeft(e.getParent()),this.rotateLeft(e);else{this.isLeftChild(e)?this.rotateRight(e):this.isRightChild(e)&&this.rotateLeft(e),this.updateWeight(e);return}}delete(e){this.splayNode(e);const t=new la(e.getLeft());t.root&&t.root.setParent();const r=new la(e.getRight());if(r.root&&r.root.setParent(),t.root){const i=t.getRightmost();t.splayNode(i),t.root.setRight(r.root),r.root&&r.root.setParent(t.root),this.root=t.root}else this.root=r.root;e.unlink(),this.root&&this.updateWeight(this.root)}deleteRange(e,t){if(!t){this.splayNode(e),this.cutOffRight(e);return}this.splayNode(e),this.splayNode(t),t.getLeft()!=e&&this.rotateRight(e),this.cutOffRight(e)}cutOffRight(e){const t=[];this.traversePostorder(e.getRight(),t);for(const r of t)r.initWeight();this.updateTreeWeight(e)}toTestString(){const e=[];return this.traverseInorder(this.root,e),e.map(t=>`[${t.getWeight()},${t.getLength()}]${t.getValue()||""}`).join("")}checkWeight(){const e=[];this.traverseInorder(this.root,e);for(const t of e)if(t.getWeight()!=t.getLength()+t.getLeftWeight()+t.getRightWeight())return!1;return!0}getRightmost(){let e=this.root;for(;e.hasRight();)e=e.getRight();return e}traverseInorder(e,t){e&&(this.traverseInorder(e.getLeft(),t),t.push(e),this.traverseInorder(e.getRight(),t))}traversePostorder(e,t){e&&(this.traversePostorder(e.getLeft(),t),this.traversePostorder(e.getRight(),t),t.push(e))}rotateLeft(e){const t=e.getParent();t.hasParent()?t===t.getParent().getLeft()?t.getParent().setLeft(e):t.getParent().setRight(e):this.root=e,e.setParent(t.getParent()),t.setRight(e.getLeft()),t.hasRight()&&t.getRight().setParent(t),e.setLeft(t),e.getLeft().setParent(e),this.updateWeight(t),this.updateWeight(e)}rotateRight(e){const t=e.getParent();t.hasParent()?t===t.getParent().getLeft()?t.getParent().setLeft(e):t.getParent().setRight(e):this.root=e,e.setParent(t.getParent()),t.setLeft(e.getRight()),t.hasLeft()&&t.getLeft().setParent(t),e.setRight(t),e.getRight().setParent(e),this.updateWeight(t),this.updateWeight(e)}isLeftChild(e){return e&&e.hasParent()?e.getParent().getLeft()===e:!1}isRightChild(e){return e&&e.hasParent()?e.getParent().getRight()===e:!1}}/**
 * @license
 * Copyright 2009 The Closure Library Authors
 * Copyright 2020 Daniel Wirtz / The long.js Authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * SPDX-License-Identifier: Apache-2.0
 */var Ct=null;try{Ct=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function H(n,e,t){this.low=n|0,this.high=e|0,this.unsigned=!!t}H.prototype.__isLong__;Object.defineProperty(H.prototype,"__isLong__",{value:!0});function Ue(n){return(n&&n.__isLong__)===!0}function ug(n){var e=Math.clz32(n&-n);return n?31-e:e}H.isLong=Ue;var cg={},fg={};function os(n,e){var t,r,i;return e?(n>>>=0,(i=0<=n&&n<256)&&(r=fg[n],r)?r:(t=X(n,0,!0),i&&(fg[n]=t),t)):(n|=0,(i=-128<=n&&n<128)&&(r=cg[n],r)?r:(t=X(n,n<0?-1:0,!1),i&&(cg[n]=t),t))}H.fromInt=os;function Nt(n,e){if(isNaN(n))return e?Hr:Ut;if(e){if(n<0)return Hr;if(n>=vv)return kv}else{if(n<=-hg)return Ye;if(n+1>=hg)return Sv}return n<0?Nt(-n,e).neg():X(n%_s|0,n/_s|0,e)}H.fromNumber=Nt;function X(n,e,t){return new H(n,e,t)}H.fromBits=X;var au=Math.pow;function rh(n,e,t){if(n.length===0)throw Error("empty string");if(typeof e=="number"?(t=e,e=!1):e=!!e,n==="NaN"||n==="Infinity"||n==="+Infinity"||n==="-Infinity")return e?Hr:Ut;if(t=t||10,t<2||36<t)throw RangeError("radix");var r;if((r=n.indexOf("-"))>0)throw Error("interior hyphen");if(r===0)return rh(n.substring(1),e,t).neg();for(var i=Nt(au(t,8)),s=Ut,o=0;o<n.length;o+=8){var a=Math.min(8,n.length-o),u=parseInt(n.substring(o,o+a),t);if(a<8){var c=Nt(au(t,a));s=s.mul(c).add(Nt(u))}else s=s.mul(i),s=s.add(Nt(u))}return s.unsigned=e,s}H.fromString=rh;function Lt(n,e){return typeof n=="number"?Nt(n,e):typeof n=="string"?rh(n,e):X(n.low,n.high,typeof e=="boolean"?e:n.unsigned)}H.fromValue=Lt;var dg=65536,ZS=1<<24,_s=dg*dg,vv=_s*_s,hg=vv/2,mg=os(ZS),Ut=os(0);H.ZERO=Ut;var Hr=os(0,!0);H.UZERO=Hr;var As=os(1);H.ONE=As;var wv=os(1,!0);H.UONE=wv;var Zf=os(-1);H.NEG_ONE=Zf;var Sv=X(-1,2147483647,!1);H.MAX_VALUE=Sv;var kv=X(-1,-1,!0);H.MAX_UNSIGNED_VALUE=kv;var Ye=X(0,-2147483648,!1);H.MIN_VALUE=Ye;var D=H.prototype;D.toInt=function(){return this.unsigned?this.low>>>0:this.low};D.toNumber=function(){return this.unsigned?(this.high>>>0)*_s+(this.low>>>0):this.high*_s+(this.low>>>0)};D.toString=function(e){if(e=e||10,e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(Ye)){var t=Nt(e),r=this.div(t),i=r.mul(t).sub(this);return r.toString(e)+i.toInt().toString(e)}else return"-"+this.neg().toString(e);for(var s=Nt(au(e,6),this.unsigned),o=this,a="";;){var u=o.div(s),c=o.sub(u.mul(s)).toInt()>>>0,d=c.toString(e);if(o=u,o.isZero())return d+a;for(;d.length<6;)d="0"+d;a=""+d+a}};D.getHighBits=function(){return this.high};D.getHighBitsUnsigned=function(){return this.high>>>0};D.getLowBits=function(){return this.low};D.getLowBitsUnsigned=function(){return this.low>>>0};D.getNumBitsAbs=function(){if(this.isNegative())return this.eq(Ye)?64:this.neg().getNumBitsAbs();for(var e=this.high!=0?this.high:this.low,t=31;t>0&&!(e&1<<t);t--);return this.high!=0?t+33:t+1};D.isSafeInteger=function(){var e=this.high>>21;return e?this.unsigned?!1:e===-1&&!(this.low===0&&this.high===-2097152):!0};D.isZero=function(){return this.high===0&&this.low===0};D.eqz=D.isZero;D.isNegative=function(){return!this.unsigned&&this.high<0};D.isPositive=function(){return this.unsigned||this.high>=0};D.isOdd=function(){return(this.low&1)===1};D.isEven=function(){return(this.low&1)===0};D.equals=function(e){return Ue(e)||(e=Lt(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low};D.eq=D.equals;D.notEquals=function(e){return!this.eq(e)};D.neq=D.notEquals;D.ne=D.notEquals;D.lessThan=function(e){return this.comp(e)<0};D.lt=D.lessThan;D.lessThanOrEqual=function(e){return this.comp(e)<=0};D.lte=D.lessThanOrEqual;D.le=D.lessThanOrEqual;D.greaterThan=function(e){return this.comp(e)>0};D.gt=D.greaterThan;D.greaterThanOrEqual=function(e){return this.comp(e)>=0};D.gte=D.greaterThanOrEqual;D.ge=D.greaterThanOrEqual;D.compare=function(e){if(Ue(e)||(e=Lt(e)),this.eq(e))return 0;var t=this.isNegative(),r=e.isNegative();return t&&!r?-1:!t&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1};D.comp=D.compare;D.negate=function(){return!this.unsigned&&this.eq(Ye)?Ye:this.not().add(As)};D.neg=D.negate;D.add=function(e){Ue(e)||(e=Lt(e));var t=this.high>>>16,r=this.high&65535,i=this.low>>>16,s=this.low&65535,o=e.high>>>16,a=e.high&65535,u=e.low>>>16,c=e.low&65535,d=0,h=0,m=0,p=0;return p+=s+c,m+=p>>>16,p&=65535,m+=i+u,h+=m>>>16,m&=65535,h+=r+a,d+=h>>>16,h&=65535,d+=t+o,d&=65535,X(m<<16|p,d<<16|h,this.unsigned)};D.subtract=function(e){return Ue(e)||(e=Lt(e)),this.add(e.neg())};D.sub=D.subtract;D.multiply=function(e){if(this.isZero())return this;if(Ue(e)||(e=Lt(e)),Ct){var t=Ct.mul(this.low,this.high,e.low,e.high);return X(t,Ct.get_high(),this.unsigned)}if(e.isZero())return this.unsigned?Hr:Ut;if(this.eq(Ye))return e.isOdd()?Ye:Ut;if(e.eq(Ye))return this.isOdd()?Ye:Ut;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(mg)&&e.lt(mg))return Nt(this.toNumber()*e.toNumber(),this.unsigned);var r=this.high>>>16,i=this.high&65535,s=this.low>>>16,o=this.low&65535,a=e.high>>>16,u=e.high&65535,c=e.low>>>16,d=e.low&65535,h=0,m=0,p=0,w=0;return w+=o*d,p+=w>>>16,w&=65535,p+=s*d,m+=p>>>16,p&=65535,p+=o*c,m+=p>>>16,p&=65535,m+=i*d,h+=m>>>16,m&=65535,m+=s*c,h+=m>>>16,m&=65535,m+=o*u,h+=m>>>16,m&=65535,h+=r*d+i*c+s*u+o*a,h&=65535,X(p<<16|w,h<<16|m,this.unsigned)};D.mul=D.multiply;D.divide=function(e){if(Ue(e)||(e=Lt(e)),e.isZero())throw Error("division by zero");if(Ct){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;var t=(this.unsigned?Ct.div_u:Ct.div_s)(this.low,this.high,e.low,e.high);return X(t,Ct.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?Hr:Ut;var r,i,s;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return Hr;if(e.gt(this.shru(1)))return wv;s=Hr}else{if(this.eq(Ye)){if(e.eq(As)||e.eq(Zf))return Ye;if(e.eq(Ye))return As;var o=this.shr(1);return r=o.div(e).shl(1),r.eq(Ut)?e.isNegative()?As:Zf:(i=this.sub(e.mul(r)),s=r.add(i.div(e)),s)}else if(e.eq(Ye))return this.unsigned?Hr:Ut;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();s=Ut}for(i=this;i.gte(e);){r=Math.max(1,Math.floor(i.toNumber()/e.toNumber()));for(var a=Math.ceil(Math.log(r)/Math.LN2),u=a<=48?1:au(2,a-48),c=Nt(r),d=c.mul(e);d.isNegative()||d.gt(i);)r-=u,c=Nt(r,this.unsigned),d=c.mul(e);c.isZero()&&(c=As),s=s.add(c),i=i.sub(d)}return s};D.div=D.divide;D.modulo=function(e){if(Ue(e)||(e=Lt(e)),Ct){var t=(this.unsigned?Ct.rem_u:Ct.rem_s)(this.low,this.high,e.low,e.high);return X(t,Ct.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))};D.mod=D.modulo;D.rem=D.modulo;D.not=function(){return X(~this.low,~this.high,this.unsigned)};D.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32};D.clz=D.countLeadingZeros;D.countTrailingZeros=function(){return this.low?ug(this.low):ug(this.high)+32};D.ctz=D.countTrailingZeros;D.and=function(e){return Ue(e)||(e=Lt(e)),X(this.low&e.low,this.high&e.high,this.unsigned)};D.or=function(e){return Ue(e)||(e=Lt(e)),X(this.low|e.low,this.high|e.high,this.unsigned)};D.xor=function(e){return Ue(e)||(e=Lt(e)),X(this.low^e.low,this.high^e.high,this.unsigned)};D.shiftLeft=function(e){return Ue(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?X(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):X(0,this.low<<e-32,this.unsigned)};D.shl=D.shiftLeft;D.shiftRight=function(e){return Ue(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?X(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):X(this.high>>e-32,this.high>=0?0:-1,this.unsigned)};D.shr=D.shiftRight;D.shiftRightUnsigned=function(e){return Ue(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?X(this.low>>>e|this.high<<32-e,this.high>>>e,this.unsigned):e===32?X(this.high,0,this.unsigned):X(this.high>>>e-32,0,this.unsigned)};D.shru=D.shiftRightUnsigned;D.shr_u=D.shiftRightUnsigned;D.rotateLeft=function(e){var t;return Ue(e)&&(e=e.toInt()),(e&=63)===0?this:e===32?X(this.high,this.low,this.unsigned):e<32?(t=32-e,X(this.low<<e|this.high>>>t,this.high<<e|this.low>>>t,this.unsigned)):(e-=32,t=32-e,X(this.high<<e|this.low>>>t,this.low<<e|this.high>>>t,this.unsigned))};D.rotl=D.rotateLeft;D.rotateRight=function(e){var t;return Ue(e)&&(e=e.toInt()),(e&=63)===0?this:e===32?X(this.high,this.low,this.unsigned):e<32?(t=32-e,X(this.high<<t|this.low>>>e,this.low<<t|this.high>>>e,this.unsigned)):(e-=32,t=32-e,X(this.low<<t|this.high>>>e,this.high<<t|this.low>>>e,this.unsigned))};D.rotr=D.rotateRight;D.toSigned=function(){return this.unsigned?X(this.low,this.high,!1):this};D.toUnsigned=function(){return this.unsigned?this:X(this.low,this.high,!0)};D.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()};D.toBytesLE=function(){var e=this.high,t=this.low;return[t&255,t>>>8&255,t>>>16&255,t>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]};D.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,t>>>24,t>>>16&255,t>>>8&255,t&255]};H.fromBytes=function(e,t,r){return r?H.fromBytesLE(e,t):H.fromBytesBE(e,t)};H.fromBytesLE=function(e,t){return new H(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)};H.fromBytesBE=function(e,t){return new H(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)};typeof BigInt=="function"&&(H.fromBigInt=function(e,t){var r=Number(BigInt.asIntN(32,e)),i=Number(BigInt.asIntN(32,e>>BigInt(32)));return X(r,i,t)},H.fromValue=function(e,t){return typeof e=="bigint"?H.fromBigInt(e,t):Lt(e,t)},D.toBigInt=function(){var e=BigInt(this.low>>>0),t=BigInt(this.unsigned?this.high>>>0:this.high);return t<<BigInt(32)|e});var te=(n=>(n[n.Null=0]="Null",n[n.Boolean=1]="Boolean",n[n.Integer=2]="Integer",n[n.Long=3]="Long",n[n.Double=4]="Double",n[n.String=5]="String",n[n.Bytes=6]="Bytes",n[n.Date=7]="Date",n))(te||{});class ue extends va{constructor(t,r){super(r);l(this,"valueType");l(this,"value");this.valueType=ue.getPrimitiveType(t),this.value=t===void 0?null:t}static of(t,r){return new ue(t,r)}static valueFromBytes(t,r){switch(t){case 0:return null;case 1:return!!r[0];case 2:return r[0]|r[1]<<8|r[2]<<16|r[3]<<24;case 4:{const i=new DataView(r.buffer);return r.forEach(function(s,o){i.setUint8(o,s)}),i.getFloat64(0,!0)}case 5:return new TextDecoder("utf-8").decode(r);case 3:return H.fromBytesLE(Array.from(r));case 6:return r;case 7:return new Date(H.fromBytesLE(Array.from(r),!0).toNumber());default:throw new T(k.ErrUnimplemented,`unimplemented type: ${t}`)}}getValueSize(){switch(this.valueType){case 0:return 8;case 1:return 4;case 2:return 4;case 3:return 8;case 4:return 8;case 5:return this.value.length*2;case 6:return this.value.length;case 7:return 8;default:throw new T(k.ErrUnimplemented,`unimplemented type: ${this.valueType}`)}}getDataSize(){return{data:this.getValueSize(),meta:this.getMetaUsage()}}toJSON(){return this.valueType===5?`"${on(this.value)}"`:`${this.value}`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:this.value,type:"YORKIE_PRIMITIVE"}}deepcopy(){const t=ue.of(this.value,this.getCreatedAt());return t.setMovedAt(this.getMovedAt()),t.setRemovedAt(this.getRemovedAt()),t}getType(){return this.valueType}static getPrimitiveType(t){switch(typeof t){case"undefined":return 0;case"boolean":return 1;case"number":return this.isInteger(t)?2:4;case"string":return 5;case"object":if(t===null)return 0;if(t instanceof H)return 3;if(t instanceof Uint8Array)return 6;if(t instanceof Date)return 7}}static isSupport(t){return ue.getPrimitiveType(t)!==void 0}static isInteger(t){return t%1===0}isNumericType(){const t=this.valueType;return t===2||t===3||t===4}getValue(){return this.value}toBytes(){switch(this.valueType){case 0:return new Uint8Array;case 1:return this.value?new Uint8Array([1]):new Uint8Array([0]);case 2:{const t=this.value;return new Uint8Array([t&255,t>>8&255,t>>16&255,t>>24&255])}case 4:{const t=this.value,r=new Uint8Array(8);return new DataView(r.buffer).setFloat64(0,t,!0),r}case 5:return new TextEncoder().encode(this.value);case 3:{const r=this.value.toBytesLE();return Uint8Array.from(r)}case 6:return this.value;case 7:{const t=this.value,r=H.fromNumber(t.getTime(),!0).toBytesLE();return Uint8Array.from(r)}default:throw new T(k.ErrUnimplemented,`unimplemented type: ${this.valueType}`)}}}class lu extends yv{constructor(t){super(t);l(this,"prev");l(this,"next");l(this,"movedFrom");this.value=t}static createAfter(t,r){const i=new lu(r),s=t.next;return t.next=i,i.prev=t,i.next=s,s&&(s.prev=i),i}remove(t){return this.value.remove(t)}getCreatedAt(){return this.value.getCreatedAt()}getPositionedAt(){return this.value.getPositionedAt()}release(){this.prev&&(this.prev.next=this.next),this.next&&(this.next.prev=this.prev),this.prev=void 0,this.next=void 0}getLength(){return this.value.isRemoved()?0:1}getPrev(){return this.prev}getNext(){return this.next}getMovedFrom(){return this.movedFrom}setMovedFrom(t){this.movedFrom=t}getValue(){return this.value}isRemoved(){return this.value.isRemoved()}}class ua{constructor(){l(this,"dummyHead");l(this,"last");l(this,"nodeMapByIndex");l(this,"nodeMapByCreatedAt");const e=ue.of(0,Gs);e.setRemovedAt(Gs),this.dummyHead=new lu(e),this.last=this.dummyHead,this.nodeMapByIndex=new la,this.nodeMapByCreatedAt=new Map,this.nodeMapByIndex.insert(this.dummyHead),this.nodeMapByCreatedAt.set(this.dummyHead.getCreatedAt().toIDString(),this.dummyHead)}static create(){return new ua}get length(){return this.nodeMapByIndex.length}findNextBeforeExecutedAt(e,t){let r=this.nodeMapByCreatedAt.get(e.toIDString());if(!r)throw new T(k.ErrInvalidArgument,`cant find the given node: ${e.toIDString()}`);for(;r.getValue().getMovedAt()&&r.getValue().getMovedAt().after(t)&&r.getMovedFrom();)r=r.getMovedFrom();for(;r.getNext()&&r.getNext().getPositionedAt().after(t);)r=r.getNext();return r}release(e){this.last===e&&(this.last=e.getPrev()),e.release(),this.nodeMapByIndex.delete(e),this.nodeMapByCreatedAt.delete(e.getValue().getCreatedAt().toIDString())}insertAfter(e,t,r=t.getCreatedAt()){const i=this.findNextBeforeExecutedAt(e,r),s=lu.createAfter(i,t);return i===this.last&&(this.last=s),this.nodeMapByIndex.insertAfter(i,s),this.nodeMapByCreatedAt.set(s.getCreatedAt().toIDString(),s),s}moveAfter(e,t,r){let i=this.nodeMapByCreatedAt.get(e.toIDString());if(!i)throw new T(k.ErrInvalidArgument,`cant find the given node: ${e.toIDString()}`);let s=this.nodeMapByCreatedAt.get(t.toIDString());if(!s)throw new T(k.ErrInvalidArgument,`cant find the given node: ${t.toIDString()}`);if(i!==s&&r.after(s.getPositionedAt())){const o=s.getPrev();let a=s.getNext();for(this.release(s),s=this.insertAfter(i.getCreatedAt(),s.getValue(),r),s.getValue().setMovedAt(r),s.setMovedFrom(o);a&&a.getPositionedAt().after(r);)i=s,s=a,a=s.getNext(),this.release(s),s=this.insertAfter(i.getCreatedAt(),s.getValue(),r),s.getValue().setMovedAt(r),s.setMovedFrom(o)}}insert(e){this.insertAfter(this.last.getCreatedAt(),e)}getByID(e){return this.nodeMapByCreatedAt.get(e.toIDString())}subPathOf(e){const t=this.nodeMapByCreatedAt.get(e.toIDString());if(t)return String(this.nodeMapByIndex.indexOf(t))}purge(e){const t=this.nodeMapByCreatedAt.get(e.getCreatedAt().toIDString());if(!t)throw new T(k.ErrInvalidArgument,`fail to find the given createdAt: ${e.getCreatedAt().toIDString()}`);this.release(t)}getByIndex(e){if(e>=this.length)return;const[t,r]=this.nodeMapByIndex.find(e);let i=t;if(e===0&&t===this.dummyHead||r>0)do i&&(i=i.getNext());while(i&&i.isRemoved());return i}getPrevCreatedAt(e){let t=this.nodeMapByCreatedAt.get(e.toIDString());do t=t.getPrev();while(this.dummyHead!==t&&t.isRemoved());return t.getValue().getCreatedAt()}delete(e,t){const r=this.nodeMapByCreatedAt.get(e.toIDString()),i=r.isRemoved();return r.remove(t)&&!i&&this.nodeMapByIndex.splayNode(r),r.getValue()}set(e,t,r){const i=this.nodeMapByCreatedAt.get(e.toIDString());if(!i)throw new T(k.ErrInvalidArgument,`cant find the given node: ${e.toIDString()}`);return this.insertAfter(i.getCreatedAt(),t,r),this.delete(e,r)}deleteByIndex(e,t){const r=this.getByIndex(e);if(r)return r.remove(t)&&this.nodeMapByIndex.splayNode(r),r.getValue()}getHead(){return this.dummyHead.getValue()}getLast(){return this.last.getValue()}getLastCreatedAt(){return this.last.getCreatedAt()}toTestString(){const e=[];for(const t of this){const r=`${t.getCreatedAt().toIDString()}:${t.getValue().toJSON()}`;t.isRemoved()?e.push(`{${r}}`):e.push(`[${r}]`)}return e.join("")}*[Symbol.iterator](){let e=this.dummyHead.getNext();for(;e;)yield e,e=e.getNext()}}class Me extends Ei{constructor(t,r){super(t);l(this,"elements");this.elements=r}static create(t,r){if(!r)return new Me(t,ua.create());const i=ua.create();for(const s of r)i.insertAfter(i.getLastCreatedAt(),s.deepcopy());return new Me(t,i)}subPathOf(t){return this.elements.subPathOf(t)}purge(t){this.elements.purge(t)}insertAfter(t,r,i){this.elements.insertAfter(t,r,i)}moveAfter(t,r,i){this.elements.moveAfter(t,r,i)}get(t){const r=this.elements.getByIndex(t);return r==null?void 0:r.getValue()}getByID(t){const r=this.elements.getByID(t);return r==null?void 0:r.getValue()}getHead(){return this.elements.getHead()}getLast(){return this.elements.getLast()}getPrevCreatedAt(t){return this.elements.getPrevCreatedAt(t)}delete(t,r){return this.elements.delete(t,r)}deleteByIndex(t,r){return this.elements.deleteByIndex(t,r)}set(t,r,i){return this.elements.set(t,r,i)}getLastCreatedAt(){return this.elements.getLastCreatedAt()}get length(){return this.elements.length}*[Symbol.iterator](){for(const t of this.elements)t.isRemoved()||(yield t.getValue())}toTestString(){return this.elements.toTestString()}getDescendants(t){for(const r of this.elements){const i=r.getValue();if(t(i,this))return;i instanceof Ei&&i.getDescendants(t)}}getDataSize(){return{data:0,meta:this.getMetaUsage()}}toJSON(){const t=[];for(const r of this)t.push(r.toJSON());return`[${t.join(",")}]`}toJS(){return JSON.parse(this.toJSON())}toJSForTest(){const t={};for(let r=0;r<this.length;r++){const{createdAt:i,value:s,type:o}=this.get(r).toJSForTest();t[r]={key:String(r),createdAt:i,value:s,type:o}}return{createdAt:this.getCreatedAt().toTestString(),value:t,type:"YORKIE_ARRAY"}}toSortedJSON(){return this.toJSON()}getElements(){return this.elements}deepcopy(){const t=Me.create(this.getCreatedAt());for(const r of this.elements)t.elements.insertAfter(t.getLastCreatedAt(),r.getValue().deepcopy());return t.setRemovedAt(this.getRemovedAt()),t.setMovedAt(this.getMovedAt()),t}}class Ri extends Gt{constructor(t,r,i,s){super(t,s);l(this,"prevCreatedAt");l(this,"value");this.prevCreatedAt=r,this.value=i}static create(t,r,i,s){return new Ri(t,r,i,s)}execute(t){const r=t.findByCreatedAt(this.getParentCreatedAt());if(!r)throw new T(k.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(r instanceof Me))throw new T(k.ErrInvalidArgument,"fail to execute, only array can execute add");const i=r,s=this.value.deepcopy();return i.insertAfter(this.prevCreatedAt,s,this.getExecutedAt()),t.registerElement(s,i),{opInfos:[{type:"add",path:t.createPath(this.getParentCreatedAt()),index:Number(i.subPathOf(this.getEffectedCreatedAt()))}],reverseOp:this.toReverseOperation()}}toReverseOperation(){return hn.create(this.getParentCreatedAt(),this.value.getCreatedAt())}getEffectedCreatedAt(){return this.value.getCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.ADD.${this.value.toJSON()}`}getPrevCreatedAt(){return this.prevCreatedAt}getValue(){return this.value}setPrevCreatedAt(t){this.prevCreatedAt=t}}class hn extends Gt{constructor(t,r,i){super(t,i);l(this,"createdAt");this.createdAt=r}static create(t,r,i){return new hn(t,r,i)}execute(t,r){var c;const i=t.findByCreatedAt(this.getParentCreatedAt());if(!i)throw new T(k.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(i instanceof Ei))throw new T(k.ErrInvalidArgument,`only object and array can execute remove: ${i}`);if(r===se.UndoRedo){let d=i.getByID(this.createdAt);for(;d;){if(d.getRemovedAt())return;d=(c=t.findElementPairByCreatedAt(d.getCreatedAt()))==null?void 0:c.parent}}const s=i.subPathOf(this.createdAt),o=this.toReverseOperation(i),a=i.delete(this.createdAt,this.getExecutedAt());return t.registerRemovedElement(a),{opInfos:i instanceof Me?[{type:"remove",path:t.createPath(this.getParentCreatedAt()),index:Number(s)}]:[{type:"remove",path:t.createPath(this.getParentCreatedAt()),key:s}],reverseOp:o}}toReverseOperation(t){if(t instanceof Me){const r=t.getByID(this.createdAt);if(r!==void 0){const i=t.getPrevCreatedAt(this.createdAt);return Ri.create(this.getParentCreatedAt(),i,r.deepcopy())}}if(t instanceof Je){const r=t.subPathOf(this.createdAt);if(r!==void 0){const i=t.get(r);if(i!==void 0)return rs.create(r,i.deepcopy(),this.getParentCreatedAt())}}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.REMOVE.${this.createdAt.toTestString()}`}getCreatedAt(){return this.createdAt}setCreatedAt(t){this.createdAt=t}}class rs extends Gt{constructor(t,r,i,s){super(i,s);l(this,"key");l(this,"value");this.key=t,this.value=r}static create(t,r,i,s){return new rs(t,r,i,s)}execute(t,r){var c;const i=t.findByCreatedAt(this.getParentCreatedAt());if(!i)throw new T(k.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(i instanceof Je))throw new T(k.ErrInvalidArgument,"fail to execute, only object can execute set");if(r===se.UndoRedo){let d=i;for(;d;){if(d.getRemovedAt())return;d=(c=t.findElementPairByCreatedAt(d.getCreatedAt()))==null?void 0:c.parent}}const s=i.get(this.key),o=this.toReverseOperation(s),a=this.value.deepcopy(),u=i.set(this.key,a,this.getExecutedAt());return r===se.UndoRedo&&t.findByCreatedAt(a.getCreatedAt())&&t.deregisterElement(a),t.registerElement(a,i),u&&t.registerRemovedElement(u),{opInfos:[{type:"set",path:t.createPath(this.getParentCreatedAt()),key:this.key}],reverseOp:o}}toReverseOperation(t){let r=hn.create(this.getParentCreatedAt(),this.value.getCreatedAt());return t!==void 0&&!t.isRemoved()&&(r=rs.create(this.key,t.deepcopy(),this.getParentCreatedAt())),r}getEffectedCreatedAt(){return this.value.getCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.SET.${this.key}=${this.value.toSortedJSON()}`}getKey(){return this.key}getValue(){return this.value}}class jt extends Gt{constructor(t,r,i,s){super(t,s);l(this,"prevCreatedAt");l(this,"createdAt");this.prevCreatedAt=r,this.createdAt=i}static create(t,r,i,s){return new jt(t,r,i,s)}execute(t){const r=t.findByCreatedAt(this.getParentCreatedAt());if(!r)throw new T(k.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(r instanceof Me))throw new T(k.ErrInvalidArgument,"fail to execute, only array can execute move");const i=r,s=this.toReverseOperation(i),o=Number(i.subPathOf(this.createdAt));i.moveAfter(this.prevCreatedAt,this.createdAt,this.getExecutedAt());const a=Number(i.subPathOf(this.createdAt));return{opInfos:[{type:"move",path:t.createPath(this.getParentCreatedAt()),index:a,previousIndex:o}],reverseOp:s}}toReverseOperation(t){const r=t.getPrevCreatedAt(this.createdAt);return jt.create(this.getParentCreatedAt(),r,this.createdAt)}getEffectedCreatedAt(){return this.createdAt}toTestString(){return`${this.getParentCreatedAt().toTestString()}.MOVE`}getPrevCreatedAt(){return this.prevCreatedAt}getCreatedAt(){return this.createdAt}setPrevCreatedAt(t){this.prevCreatedAt=t}setCreatedAt(t){this.createdAt=t}}class pi{constructor(e,t,r,i){l(this,"key");l(this,"value");l(this,"updatedAt");l(this,"_isRemoved");this.key=e,this.value=t,this.updatedAt=r,this._isRemoved=i}static of(e,t,r,i){return new pi(e,t,r,i)}getKey(){return this.key}getValue(){return this.value}getUpdatedAt(){return this.updatedAt}isRemoved(){return this._isRemoved}toIDString(){return`${this.updatedAt.toIDString()}:${this.key}`}getRemovedAt(){if(this._isRemoved)return this.updatedAt}getDataSize(){return{data:(this.key.length+this.value.length)*2,meta:un}}}class ti{constructor(){l(this,"nodeMapByKey");l(this,"numberOfRemovedElement");this.nodeMapByKey=new Map,this.numberOfRemovedElement=0}static create(){return new ti}getNodeMapByKey(){return this.nodeMapByKey}set(e,t,r){const i=this.nodeMapByKey.get(e);if(i&&i.isRemoved()&&r.after(i.getUpdatedAt())&&(this.numberOfRemovedElement-=1),i===void 0||r.after(i.getUpdatedAt())){const s=pi.of(e,t,r,!1);return this.nodeMapByKey.set(e,s),i!==void 0&&i.isRemoved()?[i,s]:[void 0,s]}return i.isRemoved()?[i,void 0]:[void 0,void 0]}setInternal(e,t,r,i){const s=pi.of(e,t,r,i);this.nodeMapByKey.set(e,s),i&&this.numberOfRemovedElement++}remove(e,t){const r=this.nodeMapByKey.get(e),i=[];if(r===void 0||t.after(r.getUpdatedAt())){if(r===void 0){this.numberOfRemovedElement+=1;const a=pi.of(e,"",t,!0);return this.nodeMapByKey.set(e,a),i.push(a),i}const s=r.isRemoved();s||(this.numberOfRemovedElement+=1),s&&i.push(r);const o=pi.of(e,r.getValue(),t,!0);return this.nodeMapByKey.set(e,o),i.push(o),i}return i}has(e){if(this.nodeMapByKey.has(e)){const t=this.nodeMapByKey.get(e);return t!==void 0&&!t.isRemoved()}return!1}get(e){if(this.nodeMapByKey.has(e))return this.nodeMapByKey.get(e).getValue()}deepcopy(){const e=new ti;for(const[,t]of this.nodeMapByKey)e.setInternal(t.getKey(),t.getValue(),t.getUpdatedAt(),t.isRemoved());return e}toJSON(){if(!this.size())return"{}";const e=[];for(const[t,r]of this.nodeMapByKey)r.isRemoved()||e.push(`"${on(t)}":"${on(r.getValue())}"`);return`{${e.join(",")}}`}size(){return this.nodeMapByKey.size-this.numberOfRemovedElement}toObject(){const e={};for(const[t,r]of this.nodeMapByKey)r.isRemoved()||(e[t]=r.getValue());return e}*[Symbol.iterator](){for(const[,e]of this.nodeMapByKey)yield e}purge(e){const t=this.nodeMapByKey.get(e.getKey());t==null||t.toIDString()!=e.toIDString()||(this.nodeMapByKey.delete(e.getKey()),this.numberOfRemovedElement--)}}function $t(n){if(n instanceof Map){const e=Array.from(n);return new Map(JSON.parse(JSON.stringify(e)))}return JSON.parse(JSON.stringify(n))}const Tv=n=>n?Object.entries(n).length===0:!0,Xs=n=>{const e={};for(const[t,r]of Object.entries(n))e[t]=JSON.stringify(r);return e},Yr=n=>{const e={};for(const[t,r]of Object.entries(n))e[t]=JSON.parse(r);return e};function ek(n){return n?gg(n.live)+gg(n.gc):0}function gg(n){return n.data+n.meta}function be(n,...e){for(const t of e)n.data+=t.data,n.meta+=t.meta}function Wi(n,e){n.data-=e.data,n.meta-=e.meta}class ca{constructor(e){l(this,"attributes");l(this,"content");this.attributes=ti.create(),this.content=e}static create(e){return new ca(e)}get length(){return this.content.length}substring(e,t){const r=new ca(this.content.substring(e,t));return r.attributes=this.attributes.deepcopy(),r}setAttr(e,t,r){return this.attributes.set(e,t,r)}getAttrs(){return this.attributes}toString(){return this.content}getDataSize(){const e={data:0,meta:0};e.data+=this.content.length*2;for(const t of this.attributes){const r=t.getDataSize();e.meta+=r.meta,e.data+=r.data}return e}toJSON(){const e=on(this.content),t=this.attributes.toObject(),r=[];for(const[i,s]of Object.entries(t)){const o=JSON.parse(s),a=typeof o=="string"?`"${on(i)}":"${on(o)}"`:`"${on(i)}":${String(o)}`;r.push(a)}return r.sort(),r.length===0?`{"val":"${e}"}`:`{"attrs":{${r.join(",")}},"val":"${e}"}`}getAttributes(){return this.attributes.toObject()}getContent(){return this.content}purge(e){this.attributes&&e instanceof pi&&this.attributes.purge(e)}getGCPairs(){const e=[];for(const t of this.attributes)t.getRemovedAt()&&e.push({parent:this,child:t});return e}}class lt extends va{constructor(t,r){super(r);l(this,"rgaTreeSplit");this.rgaTreeSplit=t}static create(t,r){return new lt(t,r)}edit(t,r,i,s,o){const a=r?ca.create(r):void 0;if(a&&s)for(const[p,w]of Object.entries(s))a.setAttr(p,w,i);const[u,c,d,h]=this.rgaTreeSplit.edit(t,i,a,o);return[h.map(p=>({...p,value:p.value?{attributes:Yr(p.value.getAttributes()),content:p.value.getContent()}:{attributes:void 0,content:""},type:"content"})),c,d,[u,u]]}setStyle(t,r,i,s){const o={data:0,meta:0},[,a,u]=this.rgaTreeSplit.findNodeWithSplit(t[1],i),[,c,d]=this.rgaTreeSplit.findNodeWithSplit(t[0],i);be(o,a,c);const h=[],m=this.rgaTreeSplit.findBetween(d,u),p=[];for(const v of m){const A=v.getCreatedAt().getActorID();let y=Qf;s!=null&&(y=s.get(A)?s.get(A):0n),v.canStyle(i,y)&&p.push(v)}const w=[];for(const v of p){if(v.isRemoved())continue;const[A,y]=this.rgaTreeSplit.findIndexesFromRange(v.createPosRange());h.push({type:"style",actor:i.getActorID(),from:A,to:y,value:{attributes:Yr(r)}});for(const[g,S]of Object.entries(r)){const[I]=v.getValue().setAttr(g,S,i);I!==void 0&&w.push({parent:v.getValue(),child:I});const N=v.getValue().getAttrs().getNodeMapByKey().get(g);N!==void 0&&be(o,N.getDataSize())}}return[w,o,h]}indexRangeToPosRange(t,r){const i=this.rgaTreeSplit.indexToPos(t);return t===r?[i,i]:[i,this.rgaTreeSplit.indexToPos(r)]}get length(){return this.rgaTreeSplit.length}getTreeByIndex(){return this.rgaTreeSplit.getTreeByIndex()}getTreeByID(){return this.rgaTreeSplit.getTreeByID()}getDataSize(){const t={data:0,meta:0};for(const r of this.rgaTreeSplit){if(r.isRemoved())continue;const i=r.getDataSize();t.data+=i.data,t.meta+=i.meta}return{data:t.data,meta:t.meta+this.getMetaUsage()}}toJSON(){const t=[];for(const r of this.rgaTreeSplit)r.isRemoved()||t.push(r.getValue().toJSON());return`[${t.join(",")}]`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:JSON.parse(this.toJSON()),type:"YORKIE_TEXT"}}toString(){return this.rgaTreeSplit.toString()}values(){const t=[];for(const r of this.rgaTreeSplit)if(!r.isRemoved()){const i=r.getValue();t.push({attributes:Yr(i.getAttributes()),content:i.getContent()})}return t}getRGATreeSplit(){return this.rgaTreeSplit}toTestString(){return this.rgaTreeSplit.toTestString()}deepcopy(){const t=new lt(this.rgaTreeSplit.deepcopy(),this.getCreatedAt());return t.setRemovedAt(this.getRemovedAt()),t.setMovedAt(this.getMovedAt()),t}findIndexesFromRange(t){return this.rgaTreeSplit.findIndexesFromRange(t)}getGCPairs(){const t=[];for(const r of this.rgaTreeSplit){r.getRemovedAt()&&t.push({parent:this.rgaTreeSplit,child:r});for(const i of r.getValue().getGCPairs())t.push(i)}return t}}class wa extends Gt{constructor(t,r,i,s,o,a){super(t,a);l(this,"fromPos");l(this,"toPos");l(this,"content");l(this,"attributes");this.fromPos=r,this.toPos=i,this.content=s,this.attributes=o}static create(t,r,i,s,o,a){return new wa(t,r,i,s,o,a)}execute(t,r,i){const s=t.findByCreatedAt(this.getParentCreatedAt());if(!s)throw new T(k.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(s instanceof lt))throw new T(k.ErrInvalidArgument,"fail to execute, only Text can execute edit");const o=s,[a,u,c]=o.edit([this.fromPos,this.toPos],this.content,this.getExecutedAt(),Object.fromEntries(this.attributes),i);t.acc(c);for(const d of u)t.registerGCPair(d);return{opInfos:a.map(({from:d,to:h,value:m})=>({type:"edit",from:d,to:h,value:m,path:t.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const t=this.getParentCreatedAt().toTestString(),r=this.fromPos.toTestString(),i=this.toPos.toTestString(),s=this.content;return`${t}.EDIT(${r},${i},${s})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getContent(){return this.content}getAttributes(){return this.attributes||new Map}}class Sa extends Gt{constructor(t,r,i,s,o){super(t,o);l(this,"fromPos");l(this,"toPos");l(this,"attributes");this.fromPos=r,this.toPos=i,this.attributes=s}static create(t,r,i,s,o){return new Sa(t,r,i,s,o)}execute(t,r,i){const s=t.findByCreatedAt(this.getParentCreatedAt());if(!s)throw new T(k.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(s instanceof lt))throw new T(k.ErrInvalidArgument,"fail to execute, only Text can execute edit");const o=s,[a,u,c]=o.setStyle([this.fromPos,this.toPos],this.attributes?Object.fromEntries(this.attributes):{},this.getExecutedAt(),i);t.acc(u);for(const d of a)t.registerGCPair(d);return{opInfos:c.map(({from:d,to:h,value:m})=>({type:"style",from:d,to:h,value:m,path:t.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const t=this.getParentCreatedAt().toTestString(),r=this.fromPos.toTestString(),i=this.toPos.toTestString(),s=this.attributes;return`${t}.STYL(${r},${i},${JSON.stringify(s)})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getAttributes(){return this.attributes}}const tk=2,nk="root",cn="text";function po(n,e,t=!1){let r=0;const i=t?n.allChildren:n.children;for(let s=0;s<e;s++){const o=i[s];!o||!t&&o.isRemoved||(r+=o.paddedSize(t))}return r}class rk{constructor(e,t=[]){l(this,"type");l(this,"parent");l(this,"_children");l(this,"visibleSize");l(this,"totalSize");if(this.type=e,this.visibleSize=0,this.totalSize=0,this._children=t,this.isText&&this._children.length>0)throw new T(k.ErrRefused,"Text node cannot have children")}updateAncestorsSize(e,t=!1){let r=this.parent;for(;r;){if(t)r.totalSize+=e;else if(r.visibleSize+=e,r.isRemoved)break;r=r.parent}}updateDescendantsSize(e=!1){let t=0;for(const r of this._children){const i=r.updateDescendantsSize(e);!e&&r.isRemoved||(t+=i)}return e?this.totalSize+=t:this.visibleSize+=t,this.paddedSize(e)}get isText(){return this.type===cn}paddedSize(e=!1){let t=this.visibleSize;return e&&(t=this.totalSize),this.isText||(t+=tk),t}isAncestorOf(e){return ik(this,e)}get nextSibling(){const e=this.parent.findOffset(this),t=this.parent.children[e+1];if(t)return t}get prevSibling(){const e=this.parent.findOffset(this),t=this.parent.children[e-1];if(t)return t}splitText(e,t){const r={data:0,meta:0};if(e===0||e===this.visibleSize)return[void 0,r];const i=this.value.slice(0,e),s=this.value.slice(e);if(!s.length)return[void 0,r];const o=this.getDataSize();this.value=i;const a=this.cloneText(e+t);return a.value=s,this.parent.insertAfterInternal(a,this),be(r,this.getDataSize(),a.getDataSize()),Wi(r,o),[a,r]}get children(){return this._children.filter(e=>!e.isRemoved)}get allChildren(){return[...this._children]}hasTextChild(){return this.children.length>0&&this.children.every(e=>e.isText)}getChildrenText(){return this.isText?this.value:this.hasTextChild()?this.children.map(e=>e.value).join(""):""}append(...e){if(this.isText)throw new T(k.ErrRefused,"Text node cannot have children");this._children.push(...e);for(const t of e)t.parent=this,t.updateAncestorsSize(t.paddedSize()),t.updateAncestorsSize(t.paddedSize(!0),!0)}prepend(...e){if(this.isText)throw new T(k.ErrRefused,"Text node cannot have children");this._children.unshift(...e);for(const t of e)t.parent=this}insertBefore(e,t){if(this.isText)throw new T(k.ErrRefused,"Text node cannot have children");const r=this._children.indexOf(t);if(r===-1)throw new T(k.ErrInvalidArgument,"child not found");this.insertAtInternal(e,r),e.updateAncestorsSize(e.paddedSize()),e.updateAncestorsSize(e.paddedSize(!0),!0)}insertAfter(e,t){if(this.isText)throw new T(k.ErrRefused,"Text node cannot have children");const r=this._children.indexOf(t);if(r===-1)throw new T(k.ErrInvalidArgument,"child not found");this.insertAtInternal(e,r+1),e.updateAncestorsSize(e.paddedSize()),e.updateAncestorsSize(e.paddedSize(!0),!0)}insertAt(e,t){if(this.isText)throw new T(k.ErrRefused,"Text node cannot have children");this.insertAtInternal(e,t),e.updateAncestorsSize(e.paddedSize()),e.updateAncestorsSize(e.paddedSize(!0),!0)}removeChild(e){if(this.isText)throw new T(k.ErrRefused,"Text node cannot have children");const t=this._children.indexOf(e);if(t===-1)throw new T(k.ErrInvalidArgument,"child not found");this._children.splice(t,1),e.updateAncestorsSize(-e.paddedSize(!0),!0),e.parent=void 0}splitElement(e,t){const r={data:0,meta:0},i=this.getDataSize(),s=this.cloneElement(t);this.parent.insertAfterInternal(s,this),s.updateAncestorsSize(s.paddedSize()),s.updateAncestorsSize(s.paddedSize(!0),!0);const o=this.children.slice(0,e),a=this.children.slice(e);this._children=o,s._children=a,this.visibleSize=this._children.reduce((u,c)=>u+c.paddedSize(),0),this.totalSize=this._children.reduce((u,c)=>u+c.paddedSize(!0),0),s.visibleSize=s._children.reduce((u,c)=>u+c.paddedSize(!0),0),s.totalSize=s._children.reduce((u,c)=>u+c.paddedSize(!0),0);for(const u of s._children)u.parent=s;return be(r,this.getDataSize(),s.getDataSize()),Wi(r,i),[s,r]}insertAfterInternal(e,t){if(this.isText)throw new T(k.ErrRefused,"Text node cannot have children");const r=this._children.indexOf(t);if(r===-1)throw new T(k.ErrInvalidArgument,"child not found");this.insertAtInternal(e,r+1)}insertAtInternal(e,t){if(this.isText)throw new T(k.ErrRefused,"Text node cannot have children");this._children.splice(t,0,e),e.parent=this}findOffset(e,t=!1){if(this.isText)throw new T(k.ErrRefused,"Text node cannot have children");if(t)return this._children.indexOf(e);if(e.isRemoved){const r=this._children.indexOf(e);return this.allChildren.splice(0,r).filter(s=>!s.isRemoved).length}return this.children.indexOf(e)}findBranchOffset(e){if(this.isText)throw new T(k.ErrRefused,"Text node cannot have children");let t=e;for(;t;){const r=this._children.indexOf(t);if(r!==-1)return r;t=t.parent}return-1}}function ik(n,e){if(n===e)return!1;for(;e.parent;){if(e.parent===n)return!0;e=e.parent}return!1}var ye=(n=>(n.Start="Start",n.End="End",n.Text="Text",n))(ye||{});function Iv(n,e,t,r,i=!1){if(e>t)throw new T(k.ErrInvalidArgument,`from is greater than to: ${e} > ${t}`);const s=i?n.totalSize:n.visibleSize;if(e>s)throw new T(k.ErrInvalidArgument,`from is out of range: ${e} > ${s}`);if(t>s)throw new T(k.ErrInvalidArgument,`to is out of range: ${t} > ${s}`);if(e===t)return;let o=0;const a=i?n._children:n.children;for(const u of a){if(e-u.paddedSize(i)<o&&o<t){const c=u.isText?e-o:e-o-1,d=u.isText?t-o:t-o-1,h=i?u.totalSize:u.visibleSize,m=!u.isText&&c<0,p=!u.isText&&d>h;(u.isText||m)&&r([u,u.isText?"Text":"Start"],p),Iv(u,Math.max(0,c),Math.min(d,h),r,i),p&&r([u,"End"],p)}o+=u.paddedSize(i)}}function xv(n,e,t=0){for(const r of n.children)xv(r,e,t+1);e(n,t)}function Du(n,e,t=0){for(const r of n._children)Du(r,e,t+1);e(n,t)}function ed(n,e,t=!0){if(e>n.visibleSize)throw new T(k.ErrInvalidArgument,`index is out of range: ${e} > ${n.visibleSize}`);if(n.isText)return{node:n,offset:e};let r=0,i=0;for(const s of n.children){if(t&&s.isText&&s.visibleSize>=e-i)return ed(s,e-i,t);if(e===i)return{node:n,offset:r};if(!t&&s.paddedSize()===e-i)return{node:n,offset:r+1};if(s.paddedSize()>e-i)return ed(s,e-i-1,t);i+=s.paddedSize(),r+=1}return{node:n,offset:r}}function Av(n){return n.isText||n.children.length===0?n:Av(n.children[0])}function sk(n,e){if(n.visibleSize<e)throw new T(k.ErrInvalidArgument,"unacceptable path");for(let t=0;t<n.children.length;t++){const r=n.children[t];if(r.visibleSize<e)e-=r.visibleSize;else{n=r;break}}return{node:n,offset:e}}class ok{constructor(e){l(this,"root");this.root=e}tokensBetween(e,t,r,i=!1){Iv(this.root,e,t,r,i)}traverse(e){xv(this.root,e,0)}traverseAll(e){Du(this.root,e,0)}findTreePos(e,t=!0){return ed(this.root,e,t)}treePosToPath(e){const t=[];let r=e.node;if(r.isText){const i=r.parent.findOffset(r);if(i===-1)throw new T(k.ErrInvalidArgument,"invalid treePos");const s=po(r.parent,i);t.push(s+e.offset),r=r.parent}else if(r.hasTextChild()){const i=po(r,e.offset);t.push(i)}else t.push(e.offset);for(;r.parent;){const i=r.parent.findOffset(r);if(i===-1)throw new T(k.ErrInvalidArgument,"invalid treePos");t.push(i),r=r.parent}return t.reverse()}pathToIndex(e){const t=this.pathToTreePos(e);return this.indexOf(t)}pathToTreePos(e){if(!e.length)throw new T(k.ErrInvalidArgument,"unacceptable path");let t=this.root;for(let r=0;r<e.length-1;r++){const i=e[r];if(t=t.children[i],!t)throw new T(k.ErrInvalidArgument,"unacceptable path")}if(t.hasTextChild())return sk(t,e[e.length-1]);if(t.children.length<e[e.length-1])throw new T(k.ErrInvalidArgument,"unacceptable path");return{node:t,offset:e[e.length-1]}}getRoot(){return this.root}get size(){return this.root.visibleSize}findPostorderRight(e){const{node:t,offset:r}=e;if(t.isText){if(t.visibleSize===r){const i=t.nextSibling;return i||t.parent}return t}return t.children.length===r?t:Av(t.children[r])}indexOf(e,t=!1){let{node:r}=e;const{offset:i}=e;let s=0,o=1;if(r.isText){s+=i;const a=r.parent,u=a.findOffset(r,t);if(u===-1)throw new T(k.ErrInvalidArgument,"invalid pos");s+=po(a,u,t),r=r.parent}else s+=po(r,i,t);for(;r!=null&&r.parent;){const a=r.parent,u=a.findOffset(r,t);if(u===-1)throw new T(k.ErrInvalidArgument,"invalid pos");s+=po(a,u,t),o++,r=r.parent}return s+o-1}indexToPath(e){const t=this.findTreePos(e);return this.treePosToPath(t)}}const ak=(n,e)=>n===e?0:n<e?-1:1;class lk{constructor(e,t,r){l(this,"key");l(this,"value");l(this,"left");l(this,"right");l(this,"isRed");this.key=e,this.value=t,this.isRed=r}}class uk{constructor(e){l(this,"stack");this.stack=[],this.traverseInorder(e)}traverseInorder(e){e&&(this.traverseInorder(e.left),this.stack.push({key:e.key,value:e.value}),this.traverseInorder(e.right))}}class Ev{constructor(e){l(this,"root");l(this,"comparator");l(this,"counter");this.comparator=typeof e<"u"?e:ak,this.counter=0}put(e,t){return this.root=this.putInternal(e,t,this.root),this.root.isRed=!1,t}get(e){const t=this.getInternal(e,this.root);return t?t.value:void 0}remove(e){!this.isRed(this.root.left)&&!this.isRed(this.root.right)&&(this.root.isRed=!0),this.root=this.removeInternal(this.root,e),this.root&&(this.root.isRed=!1)}getIterator(){return new uk(this.root)}values(){const e=[];for(const t of this.getIterator().stack)e.push(t.value);return e}floorEntry(e){let t=this.root,r;for(;t;){const i=this.comparator(e,t.key);if(i===0)return t;i<0?t=t.left:(r=t,t=t.right)}return r}lastEntry(){if(!this.root)return this.root;let e=this.root;for(;e.right;)e=e.right;return e}size(){return this.counter}isEmpty(){return this.counter===0}getInternal(e,t){for(;t;){const r=this.comparator(e,t.key);if(r===0)return t;r<0?t=t.left:r>0&&(t=t.right)}}putInternal(e,t,r){if(!r)return this.counter+=1,new lk(e,t,!0);const i=this.comparator(e,r.key);return i<0?r.left=this.putInternal(e,t,r.left):i>0?r.right=this.putInternal(e,t,r.right):r.value=t,this.isRed(r.right)&&!this.isRed(r.left)&&(r=this.rotateLeft(r)),this.isRed(r.left)&&this.isRed(r.left.left)&&(r=this.rotateRight(r)),this.isRed(r.left)&&this.isRed(r.right)&&this.flipColors(r),r}removeInternal(e,t){if(this.comparator(t,e.key)<0)!this.isRed(e.left)&&!this.isRed(e.left.left)&&(e=this.moveRedLeft(e)),e.left=this.removeInternal(e.left,t);else{if(this.isRed(e.left)&&(e=this.rotateRight(e)),this.comparator(t,e.key)===0&&!e.right){this.counter-=1;return}if(!this.isRed(e.right)&&!this.isRed(e.right.left)&&(e=this.moveRedRight(e)),this.comparator(t,e.key)===0){this.counter-=1;const r=this.min(e.right);e.value=r.value,e.key=r.key,e.right=this.removeMin(e.right)}else e.right=this.removeInternal(e.right,t)}return this.fixUp(e)}min(e){return e.left?this.min(e.left):e}removeMin(e){if(e.left)return!this.isRed(e.left)&&!this.isRed(e.left.left)&&(e=this.moveRedLeft(e)),e.left=this.removeMin(e.left),this.fixUp(e)}fixUp(e){return this.isRed(e.right)&&(e=this.rotateLeft(e)),this.isRed(e.left)&&this.isRed(e.left.left)&&(e=this.rotateRight(e)),this.isRed(e.left)&&this.isRed(e.right)&&this.flipColors(e),e}moveRedLeft(e){return this.flipColors(e),this.isRed(e.right.left)&&(e.right=this.rotateRight(e.right),e=this.rotateLeft(e),this.flipColors(e)),e}moveRedRight(e){return this.flipColors(e),this.isRed(e.left.left)&&(e=this.rotateRight(e),this.flipColors(e)),e}isRed(e){return e&&e.isRed}rotateLeft(e){const t=e.right;return e.right=t.left,t.left=e,t.isRed=t.left.isRed,t.left.isRed=!0,t}rotateRight(e){const t=e.left;return e.left=t.right,t.right=e,t.isRed=t.right.isRed,t.right.isRed=!0,t}flipColors(e){e.isRed=!e.isRed,e.left.isRed=!e.left.isRed,e.right.isRed=!e.right.isRed}}class qt{constructor(e,t){l(this,"parentID");l(this,"leftSiblingID");this.parentID=e,this.leftSiblingID=t}static of(e,t){return new qt(e,t)}static fromTreePos(e){const{offset:t}=e;let{node:r}=e,i;return r.isText?(r.parent.children[0]===r&&t===0?i=r.parent:i=r,r=r.parent):t===0?i=r:i=r.children[t-1],qt.of(r.id,Le.of(i.getCreatedAt(),i.getOffset()+t))}getParentID(){return this.parentID}static fromStruct(e){return qt.of(Le.of(Dt.fromStruct(e.parentID.createdAt),e.parentID.offset),Le.of(Dt.fromStruct(e.leftSiblingID.createdAt),e.leftSiblingID.offset))}toStruct(){return{parentID:{createdAt:this.getParentID().getCreatedAt().toStruct(),offset:this.getParentID().getOffset()},leftSiblingID:{createdAt:this.getLeftSiblingID().getCreatedAt().toStruct(),offset:this.getLeftSiblingID().getOffset()}}}toTreeNodePair(e){const t=this.getParentID(),r=this.getLeftSiblingID(),i=e.findFloorNode(t);let s=e.findFloorNode(r);if(!i||!s)throw new T(k.ErrRefused,`cannot find node of CRDTTreePos(${t.toTestString()}, ${r.toTestString()})`);return!r.equals(t)&&r.getOffset()>0&&r.getOffset()===s.id.getOffset()&&s.insPrevID&&(s=e.findFloorNode(s.insPrevID)),[i,s]}getLeftSiblingID(){return this.leftSiblingID}equals(e){return this.getParentID().getCreatedAt().equals(e.getParentID().getCreatedAt())&&this.getParentID().getOffset()===e.getParentID().getOffset()&&this.getLeftSiblingID().getCreatedAt().equals(e.getLeftSiblingID().getCreatedAt())&&this.getLeftSiblingID().getOffset()===e.getLeftSiblingID().getOffset()}}class Le{constructor(e,t){l(this,"createdAt");l(this,"offset");this.createdAt=e,this.offset=t}static of(e,t){return new Le(e,t)}static fromStruct(e){return Le.of(Dt.fromStruct(e.createdAt),e.offset)}static createComparator(){return(e,t)=>{const r=e.getCreatedAt().compare(t.getCreatedAt());return r!==0?r:e.getOffset()>t.getOffset()?1:e.getOffset()<t.getOffset()?-1:0}}getCreatedAt(){return this.createdAt}equals(e){return this.createdAt.compare(e.createdAt)===0&&this.offset===e.offset}getOffset(){return this.offset}setOffset(e){this.offset=e}toStruct(){return{createdAt:this.createdAt.toStruct(),offset:this.offset}}toIDString(){return`${this.createdAt.toIDString()}:${this.offset}`}toTestString(){return`${this.createdAt.toTestString()}/${this.offset}`}}class st extends rk{constructor(t,r,i,s,o){super(r);l(this,"id");l(this,"removedAt");l(this,"attrs");l(this,"insPrevID");l(this,"insNextID");l(this,"_value","");this.id=t,this.removedAt=o,s&&(this.attrs=s),typeof i=="string"?this.value=i:Array.isArray(i)&&(this._children=i)}toIDString(){return this.id.toIDString()}getRemovedAt(){return this.removedAt}static create(t,r,i,s){return new st(t,r,i,s)}deepcopy(){var r;const t=new st(this.id,this.type);return t.removedAt=this.removedAt,t._value=this._value,t.visibleSize=this.visibleSize,t.totalSize=this.totalSize,t.attrs=(r=this.attrs)==null?void 0:r.deepcopy(),t._children=this._children.map(i=>{const s=i.deepcopy();return s.parent=t,s}),t.insPrevID=this.insPrevID,t.insNextID=this.insNextID,t}get value(){if(!this.isText)throw new T(k.ErrInvalidType,`cannot get value of element node: ${this.type}`);return this._value}set value(t){if(!this.isText)throw new T(k.ErrInvalidType,`cannot set value of element node: ${this.type}`);this._value=t,this.visibleSize=t.length,this.totalSize=t.length}get isRemoved(){return!!this.removedAt}remove(t){return this.removedAt?(t.after(this.removedAt)&&(this.removedAt=t),!1):(this.removedAt=t,this.updateAncestorsSize(-this.paddedSize()),!0)}cloneText(t){return new st(Le.of(this.id.getCreatedAt(),t),this.type,void 0,void 0,this.removedAt)}cloneElement(t){return new st(Le.of(t(),0),this.type,void 0,void 0,this.removedAt)}split(t,r,i){const[s,o]=this.isText?this.splitText(r,this.id.getOffset()):this.splitElement(r,i);if(s){if(s.insPrevID=this.id,this.insNextID){const a=t.findFloorNode(this.insNextID);a.insPrevID=s.id,s.insNextID=this.insNextID}this.insNextID=s.id,t.registerNode(s)}return[s,o]}getCreatedAt(){return this.id.getCreatedAt()}getOffset(){return this.id.getOffset()}canDelete(t,r,i){return r?!!(!this.removedAt||!i&&(t!=null&&t.after(this.removedAt))):!1}canStyle(t,r){return this.isText?!1:this.getCreatedAt().getLamport()<=r&&(!this.removedAt||t.after(this.removedAt))}setAttrs(t,r){this.attrs||(this.attrs=new ti);const i=[];for(const[s,o]of Object.entries(t))i.push(this.attrs.set(s,o,r));return i}purge(t){this.attrs&&this.attrs.purge(t)}getDataSize(){const t={data:0,meta:0};if(this.isText&&(t.data+=this.visibleSize*2),this.id&&(t.meta+=un),this.removedAt&&(t.meta+=un),this.attrs)for(const r of this.attrs){if(r.getRemovedAt())continue;const i=r.getDataSize();t.meta+=i.meta,t.data+=i.data}return t}getGCPairs(){const t=[];if(!this.attrs)return t;for(const r of this.attrs)r.getRemovedAt()&&t.push({parent:this,child:r});return t}}function td(n){var t;if(n.isText){const r=n;return{type:r.type,value:r.value}}const e={type:n.type,children:n.children.map(td)};return n.attrs&&(e.attributes=Yr((t=n.attrs)==null?void 0:t.toObject())),e}function ih(n){if(n.isText)return n.value;let e="";return n.attrs&&n.attrs.size()&&(e=" "+Array.from(n.attrs).filter(t=>!t.isRemoved()).sort((t,r)=>t.getKey().localeCompare(r.getKey())).map(t=>{const r=JSON.parse(t.getValue());return typeof r=="string"?`${t.getKey()}="${r}"`:`${t.getKey()}="${on(t.getValue())}"`}).join(" ")),`<${n.type}${e}>${n.children.map(t=>ih(t)).join("")}</${n.type}>`}function Cv(n){if(n.isText){const e=n;return{type:e.type,value:e.value,visibleSize:e.visibleSize,isRemoved:e.isRemoved}}return{type:n.type,children:n.children.map(Cv),visibleSize:n.visibleSize,isRemoved:n.isRemoved}}class ut extends va{constructor(t,r){super(r);l(this,"indexTree");l(this,"nodeMapByID");this.indexTree=new ok(t),this.nodeMapByID=new Ev(Le.createComparator()),this.indexTree.traverseAll(i=>{this.nodeMapByID.put(i.id,i)})}static create(t,r){return new ut(t,r)}findFloorNode(t){const r=this.nodeMapByID.floorEntry(t);if(!(!r||!r.key.getCreatedAt().equals(t.getCreatedAt())))return r.value}registerNode(t){this.nodeMapByID.put(t.id,t)}findNodesAndSplitText(t,r){let i={data:0,meta:0};const[s,o]=t.toTreeNodePair(this);let a=o;const u=s===a,c=a.parent&&!u?a.parent:s;if(a.isText){const[,d]=a.split(this,t.getLeftSiblingID().getOffset()-a.id.getOffset());i=d}if(r){const d=c.allChildren,h=u?0:d.indexOf(a)+1;for(let m=h;m<d.length;m++){const p=d[m];if(!p.id.getCreatedAt().after(r))break;a=p}}return[[c,a],i]}style(t,r,i,s){const o={data:0,meta:0},[[a,u],c]=this.findNodesAndSplitText(t[0],i),[[d,h],m]=this.findNodesAndSplitText(t[1],i);be(o,m,c);const p=[],w=r?Yr(r):{},v=[];return this.traverseInPosRange(a,u,d,h,([A,y])=>{var I;const g=A.getCreatedAt().getActorID();let S=Qf;if(s!=null&&(S=s.get(g)?s.get(g):0n),A.canStyle(i,S)&&r){const N=A.setAttrs(r,i),x=N.reduce(($,[,F])=>(F&&($[F.getKey()]=w[F.getKey()]),$),{}),C=A.parent,O=A.prevSibling||A.parent;Object.keys(x).length>0&&p.push({type:"style",from:this.toIndex(C,O),to:this.toIndex(A,A),fromPath:this.toPath(C,O),toPath:this.toPath(A,A),actor:i.getActorID(),value:x});for(const[$]of N)$&&v.push({parent:A,child:$});for(const[$]of Object.entries(w)){const F=(I=A.attrs)==null?void 0:I.getNodeMapByKey().get($);F!==void 0&&y!==ye.End&&be(o,F.getDataSize())}}}),[v,p,o]}removeStyle(t,r,i,s){const o={data:0,meta:0},[[a,u],c]=this.findNodesAndSplitText(t[0],i),[[d,h],m]=this.findNodesAndSplitText(t[1],i);be(o,m,c);const p=[],w=[];return this.traverseInPosRange(a,u,d,h,([v])=>{const A=v.getCreatedAt().getActorID();let y=Qf;if(s!=null&&(y=s.get(A)?s.get(A):0n),v.canStyle(i,y)&&r){v.attrs||(v.attrs=new ti);for(const I of r){const N=v.attrs.remove(I,i);for(const x of N)w.push({parent:v,child:x})}const g=v.parent,S=v.prevSibling||v.parent;p.push({actor:i.getActorID(),type:"removeStyle",from:this.toIndex(g,S),to:this.toIndex(v,v),fromPath:this.toPath(g,S),toPath:this.toPath(v,v),value:r})}}),[w,p,o]}edit(t,r,i,s,o,a){const u={data:0,meta:0},[[c,d],h]=this.findNodesAndSplitText(t[0],s),[[m,p],w]=this.findNodesAndSplitText(t[1],s);be(u,w,h);const v=this.toIndex(c,d),A=this.toPath(c,d),y=[],g=[],S=[];this.traverseInPosRange(c,d,m,p,([x,C],O)=>{if(C===ye.Start&&!O)for(const Pe of x.children)S.push(Pe);const $=a===void 0;let F=!1;const ge=a==null?void 0:a.get(x.id.getCreatedAt().getActorID());F=$||ge!==void 0&&ge>=x.id.getCreatedAt().getLamport();let tt=!1;if(x.removedAt){const Pe=a==null?void 0:a.get(x.removedAt.getActorID());tt=$||Pe!==void 0&&Pe>=x.removedAt.getLamport()}(x.canDelete(s,F,tt)||y.includes(x.parent))&&((C===ye.Text||C===ye.Start)&&y.push(x),g.push([x,C]))},!0);const I=this.makeDeletionChanges(g,s),N=[];for(const x of y)x.remove(s),x.isRemoved&&N.push({parent:this,child:x});for(const x of S)x.removedAt||c.append(x);if(i>0){let x=0,C=c,O=d;for(;x<i;)C.split(this,C.findOffset(O)+1,o),O=C,C=C.parent,x++;I.push({type:"content",from:v,to:v,fromPath:A,toPath:A,actor:s.getActorID()})}if(r!=null&&r.length){const x=[];let C=d;for(const O of r)C===c?c.insertAt(O,0):c.insertAfter(O,C),C=O,Du(O,$=>{c.isRemoved?($.remove(s),N.push({parent:this,child:$})):be(u,$.getDataSize()),this.nodeMapByID.put($.id,$)}),O.isRemoved||x.push(O);if(x.length){const O=x.map($=>td($));I.length&&I[I.length-1].from===v?I[I.length-1].value=O:I.push({type:"content",from:v,to:v,fromPath:A,toPath:A,actor:s.getActorID(),value:O})}}return[I,N,u]}editT(t,r,i,s,o){const a=this.findPos(t[0]),u=this.findPos(t[1]);return this.edit([a,u],r,i,s,o)}move(t,r,i){throw new T(k.ErrUnimplemented,`not implemented: ${t}, ${r}, ${i}`)}pathToTreePos(t){return this.indexTree.pathToTreePos(t)}purge(t){var s;(s=t.parent)==null||s.removeChild(t),this.nodeMapByID.remove(t.id);const r=t.insPrevID,i=t.insNextID;if(r){const o=this.findFloorNode(r);o.insNextID=i}if(i){const o=this.findFloorNode(i);o.insPrevID=r}t.insPrevID=void 0,t.insNextID=void 0}getGCPairs(){const t=[];return this.indexTree.traverse(r=>{r.getRemovedAt()&&t.push({parent:this,child:r});for(const i of r.getGCPairs())t.push(i)}),t}findPos(t,r=!0){const i=this.indexTree.findTreePos(t,r);return qt.fromTreePos(i)}pathToPosRange(t){const r=this.pathToIndex(t);return[this.findPos(r),this.findPos(r+1)]}pathToPos(t){const r=this.indexTree.pathToIndex(t);return this.findPos(r)}getRoot(){return this.indexTree.getRoot()}getSize(){return this.indexTree.size}getNodeSize(){return this.nodeMapByID.size()}getIndexTree(){return this.indexTree}toXML(){return ih(this.indexTree.getRoot())}getDataSize(){const t={data:0,meta:0};return this.indexTree.traverse(r=>{if(r.getRemovedAt())return;const i=r.getDataSize();t.data+=i.data,t.meta+=i.meta}),{data:t.data,meta:t.meta+this.getMetaUsage()}}toJSON(){return JSON.stringify(this.getRootTreeNode())}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:JSON.parse(this.toJSON()),type:"YORKIE_TREE"}}toJSInfoForTest(){const t=this.indexTree.getRoot(),r=(i,s=void 0,o=void 0,a=0)=>{var p,w,v,A;let u,c,d;const h=i.isText?{node:i,offset:0}:s&&o?this.toTreePos(s,o):null;h&&(u=this.indexTree.indexOf(h),c=this.indexTree.treePosToPath(h),d=qt.fromTreePos(h).toStruct());const m={type:i.type,parent:s==null?void 0:s.id.toTestString(),size:i.visibleSize,id:i.id.toTestString(),removedAt:(p=i.removedAt)==null?void 0:p.toTestString(),insPrev:(w=i.insPrevID)==null?void 0:w.toTestString(),insNext:(v=i.insNextID)==null?void 0:v.toTestString(),value:i.isText?i.value:void 0,isRemoved:i.isRemoved,children:[],depth:a,attributes:i.attrs?Yr((A=i.attrs)==null?void 0:A.toObject()):void 0,index:u,path:c,pos:d};for(let y=0;y<i.allChildren.length;y++){const g=y===0?i:i.allChildren[y-1];m.children.push(r(i.allChildren[y],i,g,a+1))}return m};return r(t)}getRootTreeNode(){return td(this.indexTree.getRoot())}toTestTreeNode(){return Cv(this.indexTree.getRoot())}toSortedJSON(){return this.toJSON()}deepcopy(){const t=this.getRoot(),r=new ut(t.deepcopy(),this.getCreatedAt());return r.setRemovedAt(this.getRemovedAt()),r.setMovedAt(this.getMovedAt()),r}toPath(t,r){const i=this.toTreePos(t,r);return i?this.indexTree.treePosToPath(i):[]}toIndex(t,r,i=!1){const s=this.toTreePos(t,r,i);return s?this.indexTree.indexOf(s,i):-1}indexToPath(t){return this.indexTree.indexToPath(t)}pathToIndex(t){return this.indexTree.pathToIndex(t)}indexRangeToPosRange(t){const r=this.findPos(t[0]);return t[0]===t[1]?[r,r]:[r,this.findPos(t[1])]}indexRangeToPosStructRange(t){const[r,i]=t,s=this.findPos(r);return r===i?[s.toStruct(),s.toStruct()]:[s.toStruct(),this.findPos(i).toStruct()]}posRangeToPathRange(t){const[[r,i]]=this.findNodesAndSplitText(t[0]),[[s,o]]=this.findNodesAndSplitText(t[1]);return[this.toPath(r,i),this.toPath(s,o)]}posRangeToIndexRange(t){const[[r,i]]=this.findNodesAndSplitText(t[0]),[[s,o]]=this.findNodesAndSplitText(t[1]);return[this.toIndex(r,i),this.toIndex(s,o)]}traverseInPosRange(t,r,i,s,o,a=!1){const u=this.toIndex(t,r,a),c=this.toIndex(i,s,a);this.indexTree.tokensBetween(u,c,o,a)}toTreePos(t,r,i=!1){if(!t||!r)return;if(!i&&t.isRemoved){let o;for(;t.isRemoved;)o=t,t=o.parent;const a=t.findOffset(o,i);return{node:t,offset:a}}if(t===r)return{node:t,offset:0};let s=t.findOffset(r,i);if(i||!r.isRemoved){if(r.isText)return{node:r,offset:r.paddedSize(i)};s++}return{node:t,offset:s}}makeDeletionChanges(t,r){const i=[],s=[];let o=null,a=null;for(let u=0;u<t.length;u++){const c=t[u],d=t[u+1];o||(o=c),a=c;const h=this.findRightToken(c);(!h||!d||h[0]!==d[0]||h[1]!==d[1])&&(s.push([o,a]),o=null,a=null)}for(const u of s){const[c,d]=u,[h,m]=this.findLeftToken(c),[p,w]=d,v=m===ye.Start?h:h.parent,A=w===ye.Start?p:p.parent,y=this.toIndex(v,h),g=this.toIndex(A,p);y<g&&(i.length>0&&y===i[i.length-1].to?(i[i.length-1].to=g,i[i.length-1].toPath=this.toPath(A,p)):i.push({type:"content",from:y,to:g,fromPath:this.toPath(v,h),toPath:this.toPath(A,p),actor:r.getActorID()}))}return i.reverse()}findRightToken([t,r]){if(r===ye.Start){const u=t.allChildren;return u.length>0?[u[0],u[0].isText?ye.Text:ye.Start]:[t,ye.End]}const i=t.parent,s=i.allChildren,o=s.indexOf(t);if(i&&o===s.length-1)return[i,ye.End];const a=s[o+1];return[a,a.isText?ye.Text:ye.Start]}findLeftToken([t,r]){if(r===ye.End){const u=t.allChildren;if(u.length>0){const c=u[u.length-1];return[c,c.isText?ye.Text:ye.End]}return[t,ye.Start]}const i=t.parent,s=i.allChildren,o=s.indexOf(t);if(i&&o===0)return[i,ye.Start];const a=s[o-1];return[a,a.isText?ye.Text:ye.End]}}class ka extends Gt{constructor(t,r,i,s,o,a){super(t,a);l(this,"fromPos");l(this,"toPos");l(this,"contents");l(this,"splitLevel");this.fromPos=r,this.toPos=i,this.contents=s,this.splitLevel=o}static create(t,r,i,s,o,a){return new ka(t,r,i,s,o,a)}execute(t,r,i){var h;const s=t.findByCreatedAt(this.getParentCreatedAt());if(!s)throw new T(k.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(s instanceof ut))throw new T(k.ErrInvalidArgument,"fail to execute, only Tree can execute edit");const o=this.getExecutedAt(),a=s,[u,c,d]=a.edit([this.fromPos,this.toPos],(h=this.contents)==null?void 0:h.map(m=>m.deepcopy()),this.splitLevel,o,(()=>{let m=o.getDelimiter();return this.contents!==void 0&&(m+=this.contents.length),()=>Dt.of(o.getLamport(),++m,o.getActorID())})(),i);t.acc(d);for(const m of c)t.registerGCPair(m);return{opInfos:u.map(({from:m,to:p,value:w,splitLevel:v,fromPath:A,toPath:y})=>({type:"tree-edit",path:t.createPath(this.getParentCreatedAt()),from:m,to:p,value:w,splitLevel:v,fromPath:A,toPath:y}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const t=this.getParentCreatedAt().toTestString(),r=`${this.fromPos.getLeftSiblingID().getCreatedAt().toTestString()}/${this.fromPos.getLeftSiblingID().getOffset()}`,i=`${this.toPos.getLeftSiblingID().getCreatedAt().toTestString()}/${this.toPos.getLeftSiblingID().getOffset()}`,s=this.contents||[];return`${t}.EDIT(${r},${i},${s.map(o=>ih(o)).join("")})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getContents(){return this.contents}getSplitLevel(){return this.splitLevel}}class Ls{constructor(e){l(this,"vector");this.vector=e||new Map}set(e,t){this.vector.set(e,t)}unset(e){this.vector.delete(e)}get(e){return this.vector.get(e)}has(e){return this.vector.has(e)}maxLamport(){let e=BigInt(0);for(const[,t]of this)t>e&&(e=t);return e}max(e){const t=new Map;for(const[r,i]of e){const s=this.vector.get(r),o=s&&s>i?s:i;t.set(r,o)}for(const[r,i]of this){const s=e.get(r),o=s&&s>i?s:i;t.set(r,o)}return new Ls(t)}afterOrEqual(e){const t=this.vector.get(e.getActorID());return t===void 0?!1:t>=e.getLamport()}deepcopy(){const e=new Map;for(const[t,r]of this.vector)e.set(t,r);return new Ls(e)}filter(e){const t=new Map;for(const[r]of e){const i=this.vector.get(r);i!==void 0&&t.set(r,i)}return new Ls(t)}size(){return this.vector.size}*[Symbol.iterator](){for(const[e,t]of this.vector)yield[e,t]}}const Nv=new Ls(new Map);class Jt{constructor(e,t,r,i,s){l(this,"clientSeq");l(this,"serverSeq");l(this,"actor");l(this,"lamport");l(this,"versionVector");this.clientSeq=e,this.serverSeq=s,this.lamport=t,this.versionVector=i,this.actor=r}hasClocks(){return this.versionVector.size()>0&&this.lamport!=Xf}static of(e,t,r,i,s){return new Jt(e,t,r,i,s)}next(e=!1){if(e)return new Jt(this.clientSeq+1,this.lamport,this.actor,Nv,Xf);const t=this.versionVector.deepcopy();return t.set(this.actor,this.lamport+1n),new Jt(this.clientSeq+1,this.lamport+1n,this.actor,t)}syncClocks(e){if(!e.hasClocks())return this;const t=e.lamport>this.lamport?e.lamport+1n:this.lamport+1n,r=this.versionVector.max(e.versionVector),i=new Jt(this.clientSeq,t,this.actor,r);return i.versionVector.set(this.actor,t),i}setClocks(e,t){const r=e>this.lamport?e+1n:this.lamport+1n,i=this.versionVector.max(t);return i.set(this.actor,r),Jt.of(this.clientSeq,r,this.actor,i)}createTimeTicket(e){return Dt.of(this.lamport,e,this.actor)}setActor(e){return new Jt(this.clientSeq,this.lamport,e,this.versionVector,this.serverSeq)}setLamport(e){return new Jt(this.clientSeq,e,this.actor,this.versionVector,this.serverSeq)}setVersionVector(e){return new Jt(this.clientSeq,this.lamport,this.actor,e,this.serverSeq)}getClientSeq(){return this.clientSeq}getServerSeq(){return this.serverSeq?this.serverSeq.toString():""}getLamport(){return this.lamport}getLamportAsString(){return this.lamport.toString()}getActorID(){return this.actor}getVersionVector(){return this.versionVector}toTestString(){return`${this.lamport.toString()}:${this.actor.slice(-2)}:${this.clientSeq}`}}const ck=new Jt(0,0n,nh,Nv);class Qs{constructor({id:e,operations:t,presenceChange:r,message:i}){l(this,"id");l(this,"operations");l(this,"presenceChange");l(this,"message");this.id=e,this.operations=t||[],this.presenceChange=r,this.message=i}static create({id:e,operations:t,presenceChange:r,message:i}){return new Qs({id:e,operations:t,presenceChange:r,message:i})}getID(){return this.id}getMessage(){return this.message}hasOperations(){return this.operations.length>0}getOperations(){return this.operations}setActor(e){for(const t of this.operations)t.setActor(e);this.id=this.id.setActor(e)}hasPresenceChange(){return this.presenceChange!==void 0}getPresenceChange(){return this.presenceChange}execute(e,t,r){const i=[],s=[];for(const o of this.operations){const a=o.execute(e,r,this.id.getVersionVector());if(!a)continue;const{opInfos:u,reverseOp:c}=a;i.push(...u),c&&s.unshift(c)}return this.presenceChange&&(this.presenceChange.type===dn.Put?t.set(this.id.getActorID(),$t(this.presenceChange.presence)):t.delete(this.id.getActorID())),{opInfos:i,reverseOps:s}}toTestString(){return`${this.operations.map(e=>e.toTestString()).join(",")}`}toStruct(){return{changeID:oe.bytesToHex(oe.toChangeID(this.getID()).toBinary()),message:this.getMessage(),operations:this.getOperations().map(e=>oe.bytesToHex(oe.toOperation(e).toBinary())),presenceChange:this.getPresenceChange()}}static fromStruct(e){const{changeID:t,operations:r,presenceChange:i,message:s}=e;return Qs.create({id:oe.bytesToChangeID(oe.hexToBytes(t)),operations:r==null?void 0:r.map(o=>oe.bytesToOperation(oe.hexToBytes(o))),presenceChange:i,message:s})}}class bu{constructor(e,t,r,i,s,o){l(this,"documentKey");l(this,"checkpoint");l(this,"isRemoved");l(this,"changes");l(this,"snapshot");l(this,"versionVector");this.documentKey=e,this.checkpoint=t,this.isRemoved=r,this.changes=i,this.snapshot=o,this.versionVector=s}static create(e,t,r,i,s,o){return new bu(e,t,r,i,s,o)}getDocumentKey(){return this.documentKey}getCheckpoint(){return this.checkpoint}getIsRemoved(){return this.isRemoved}getChanges(){return this.changes}hasChanges(){return this.changes.length>0}getChangeSize(){return this.changes.length}hasSnapshot(){return!!this.snapshot&&!!this.snapshot.length}getSnapshot(){return this.snapshot}getVersionVector(){return this.versionVector}}class Rs{constructor(e,t){l(this,"serverSeq");l(this,"clientSeq");this.serverSeq=e,this.clientSeq=t}static of(e,t){return new Rs(e,t)}increaseClientSeq(e){return e===0?this:new Rs(this.serverSeq,this.clientSeq+e)}forward(e){if(this.equals(e))return this;const t=this.serverSeq>e.serverSeq?this.serverSeq:e.serverSeq,r=Math.max(this.clientSeq,e.clientSeq);return Rs.of(t,r)}getServerSeqAsString(){return this.serverSeq.toString()}getClientSeq(){return this.clientSeq}getServerSeq(){return this.serverSeq}equals(e){return this.clientSeq===e.clientSeq&&this.serverSeq==e.serverSeq}toTestString(){return`serverSeq=${this.serverSeq}, clientSeq=${this.clientSeq}`}}const fk=new Rs(0n,0);class fn{constructor(e,t){l(this,"createdAt");l(this,"offset");this.createdAt=e,this.offset=t}static of(e,t){return new fn(e,t)}static fromStruct(e){return fn.of(Dt.fromStruct(e.createdAt),e.offset)}getCreatedAt(){return this.createdAt}getOffset(){return this.offset}equals(e){return this.createdAt.compare(e.createdAt)===0&&this.offset===e.offset}hasSameCreatedAt(e){return this.createdAt.compare(e.createdAt)===0}split(e){return new fn(this.createdAt,this.offset+e)}toStruct(){return{createdAt:this.createdAt.toStruct(),offset:this.offset}}toTestString(){return`${this.createdAt.toTestString()}:${this.offset}`}toIDString(){return`${this.createdAt.toIDString()}:${this.offset}`}}const dk=fn.of(Gs,0);class Wt{constructor(e,t){l(this,"id");l(this,"relativeOffset");this.id=e,this.relativeOffset=t}static of(e,t){return new Wt(e,t)}static fromStruct(e){const t=fn.fromStruct(e.id);return Wt.of(t,e.relativeOffset)}getID(){return this.id}getRelativeOffset(){return this.relativeOffset}getAbsoluteID(){return fn.of(this.id.getCreatedAt(),this.id.getOffset()+this.relativeOffset)}toTestString(){return`${this.id.toTestString()}:${this.relativeOffset}`}toStruct(){return{id:this.id.toStruct(),relativeOffset:this.relativeOffset}}equals(e){return this.id.equals(e.id)?this.relativeOffset===e.relativeOffset:!1}}class Ci extends yv{constructor(t,r,i){super(r);l(this,"id");l(this,"removedAt");l(this,"prev");l(this,"next");l(this,"insPrev");l(this,"insNext");this.id=t,this.removedAt=i}static create(t,r){return new Ci(t,r)}static createComparator(){return(t,r)=>{const i=t.getCreatedAt().compare(r.getCreatedAt());return i!==0?i:t.getOffset()>r.getOffset()?1:t.getOffset()<r.getOffset()?-1:0}}getID(){return this.id}getCreatedAt(){return this.id.getCreatedAt()}getLength(){return this.removedAt?0:this.getContentLength()}getContentLength(){return this.value&&this.value.length||0}getPrev(){return this.prev}getNext(){return this.next}getInsPrev(){return this.insPrev}getInsNext(){return this.insNext}getInsPrevID(){return this.insPrev.getID()}setPrev(t){this.prev=t,t&&(t.next=this)}setNext(t){this.next=t,t&&(t.prev=this)}setInsPrev(t){this.insPrev=t,t&&(t.insNext=this)}setInsNext(t){this.insNext=t,t&&(t.insPrev=this)}hasNext(){return!!this.next}hasInsPrev(){return!!this.insPrev}isRemoved(){return!!this.removedAt}getRemovedAt(){return this.removedAt}split(t){return new Ci(this.id.split(t),this.splitValue(t),this.removedAt)}canRemove(t,r,i){return r?!!(!this.removedAt||!i&&(t!=null&&t.after(this.removedAt))):!1}canStyle(t,r){return this.getCreatedAt().getLamport()<=r&&(!this.removedAt||t.after(this.removedAt))}setRemovedAt(t){this.removedAt=t}remove(t){if(!this.removedAt){this.removedAt=t;return}t.after(this.removedAt)&&(this.removedAt=t)}createPosRange(){return[Wt.of(this.id,0),Wt.of(this.id,this.getLength())]}getDataSize(){const t=this.value.getDataSize();return this.id&&(t.meta+=un),this.removedAt&&(t.meta+=un),t}deepcopy(){return new Ci(this.id,this.value,this.removedAt)}toTestString(){return`${this.id.toTestString()} ${this.value?this.value:""}`}splitValue(t){const r=this.value;return this.value=r.substring(0,t),r.substring(t,r.length)}toIDString(){return this.id.toIDString()}}class Zs{constructor(){l(this,"head");l(this,"treeByIndex");l(this,"treeByID");this.head=Ci.create(dk),this.treeByIndex=new la,this.treeByID=new Ev(Ci.createComparator()),this.treeByIndex.insert(this.head),this.treeByID.put(this.head.getID(),this.head)}static create(){return new Zs}edit(e,t,r,i){const s={data:0,meta:0},[o,a,u]=this.findNodeWithSplit(e[1],t),[c,d,h]=this.findNodeWithSplit(e[0],t);be(s,a,d);const m=this.findBetween(h,u),[p,w]=this.deleteNodes(m,t,i),v=u?u.getID():o.getID();let A=Wt.of(v,0);if(r){const g=this.posToIndex(c.createPosRange()[1],!0),S=this.insertAfter(c,Ci.create(fn.of(t,0),r));be(s,S.getDataSize()),p.length&&p[p.length-1].from===g?p[p.length-1].value=r:p.push({actor:t.getActorID(),from:g,to:g,value:r}),A=Wt.of(S.getID(),S.getContentLength())}const y=[];for(const[,g]of w)y.push({parent:this,child:g});return[A,y,s,p]}indexToPos(e){const[t,r]=this.treeByIndex.find(e),i=t;return Wt.of(i.getID(),r)}findIndexesFromRange(e){const[t,r]=e;return[this.posToIndex(t,!1),this.posToIndex(r,!0)]}posToIndex(e,t){const r=e.getAbsoluteID(),i=t?this.findFloorNodePreferToLeft(r):this.findFloorNode(r);if(!i)throw new T(k.ErrInvalidArgument,`the node of the given id should be found: ${r.toTestString()}`);const s=this.treeByIndex.indexOf(i),o=i.isRemoved()?0:r.getOffset()-i.getID().getOffset();return s+o}findNode(e){return this.findFloorNode(e)}get length(){return this.treeByIndex.length}getTreeByIndex(){return this.treeByIndex}getTreeByID(){return this.treeByID}toString(){const e=[];for(const t of this)t.isRemoved()||e.push(t.getValue());return e.join("")}*[Symbol.iterator](){let e=this.head.getNext();for(;e;)yield e,e=e.getNext()}getHead(){return this.head}deepcopy(){const e=new Zs;let t=this.head.getNext(),r=e.head,i;for(;t;){if(i=e.insertAfter(r,t.deepcopy()),t.hasInsPrev()){const s=e.findNode(t.getInsPrevID());i.setInsPrev(s)}r=i,t=t.getNext()}return e}toTestString(){const e=[];let t=this.head;for(;t;)t.isRemoved()?e.push(`{${t.toTestString()}}`):e.push(`[${t.toTestString()}]`),t=t.getNext();return e.join("")}insertAfter(e,t){const r=e.getNext();return t.setPrev(e),r&&r.setPrev(t),this.treeByID.put(t.getID(),t),this.treeByIndex.insertAfter(e,t),t}findNodeWithSplit(e,t){const r=e.getAbsoluteID();let i=this.findFloorNodePreferToLeft(r);const s=r.getOffset()-i.getID().getOffset(),[,o]=this.splitNode(i,s);for(;i.hasNext()&&i.getNext().getCreatedAt().after(t);)i=i.getNext();return[i,o,i.getNext()]}findFloorNodePreferToLeft(e){let t=this.findFloorNode(e);if(!t)throw new T(k.ErrInvalidArgument,`the node of the given id should be found: ${e.toTestString()}`);if(e.getOffset()>0&&t.getID().getOffset()==e.getOffset()){if(!t.hasInsPrev())return t;t=t.getInsPrev()}return t}findFloorNode(e){const t=this.treeByID.floorEntry(e);if(t&&!(!t.key.equals(e)&&!t.key.hasSameCreatedAt(e)))return t.value}findBetween(e,t){const r=[];let i=e;for(;i&&i!==t;)r.push(i),i=i.getNext();return r}splitNode(e,t){const r={data:0,meta:0};if(t>e.getContentLength())throw new T(k.ErrInvalidArgument,"offset should be less than or equal to length");if(t===0)return[e,r];if(t===e.getContentLength())return[e.getNext(),r];const i=e.getDataSize(),s=e.split(t);this.treeByIndex.updateWeight(s),this.insertAfter(e,s);const o=e.getInsNext();return o&&o.setInsPrev(s),s.setInsPrev(e),be(r,e.getDataSize(),s.getDataSize()),Wi(r,i),[s,r]}deleteNodes(e,t,r){if(!e.length)return[[],new Map];const i=r===void 0||r.size()===0,s=[],o=[],[a,u]=this.findEdgesOfCandidates(e);o.push(a);for(const h of e){let m=!1;if(i)m=!0;else{const w=r==null?void 0:r.get(h.getCreatedAt().getActorID());w&&w>=h.getCreatedAt().getLamport()&&(m=!0)}let p=!1;if(h.getRemovedAt()){const w=r==null?void 0:r.get(h.getRemovedAt().getActorID());(i||w&&w>=h.getRemovedAt().getLamport())&&(p=!0)}h.canRemove(t,m,p)?s.push(h):o.push(h)}o.push(u);const c=this.makeChanges(o,t),d=new Map;for(const h of s)d.set(h.getID().toIDString(),h),h.remove(t);return this.deleteIndexNodes(o),[c,d]}findEdgesOfCandidates(e){return[e[0].getPrev(),e[e.length-1].getNext()]}makeChanges(e,t){const r=[];let i,s;for(let o=0;o<e.length-1;o++){const a=e[o],u=e[o+1];a.getNext()!=u&&([i]=this.findIndexesFromRange(a.getNext().createPosRange()),u?[,s]=this.findIndexesFromRange(u.getPrev().createPosRange()):s=this.treeByIndex.length,i<s&&r.push({actor:t.getActorID(),from:i,to:s}))}return r.reverse()}deleteIndexNodes(e){for(let t=0;t<e.length-1;t++){const r=e[t],i=e[t+1];r.getNext()!=i&&this.treeByIndex.deleteRange(r,i)}}purge(e){this.treeByIndex.delete(e),this.treeByID.remove(e.getID());const t=e.getPrev(),r=e.getNext(),i=e.getInsPrev(),s=e.getInsNext();t&&t.setNext(r),r&&r.setPrev(t),e.setPrev(void 0),e.setNext(void 0),i&&i.setInsNext(s),s&&s.setInsPrev(i),e.setInsPrev(void 0),e.setInsNext(void 0)}}const pg=n=>n<0?Math.ceil(n):Math.floor(n);var mn=(n=>(n[n.Int=0]="Int",n[n.Long=1]="Long",n))(mn||{});class Ze extends va{constructor(t,r,i){super(i);l(this,"valueType");l(this,"value");switch(this.valueType=t,t){case 0:typeof r=="number"?r>Math.pow(2,31)-1||r<-Math.pow(2,31)?this.value=H.fromNumber(r).toInt():this.value=pg(r):this.value=r.toInt();break;case 1:typeof r=="number"?this.value=H.fromNumber(r):this.value=r;break;default:throw new T(k.ErrUnimplemented,`unimplemented type: ${t}`)}}static create(t,r,i){return new Ze(t,r,i)}static valueFromBytes(t,r){switch(t){case 0:return r[0]|r[1]<<8|r[2]<<16|r[3]<<24;case 1:return H.fromBytesLE(Array.from(r));default:throw new T(k.ErrUnimplemented,`unimplemented type: ${t}`)}}getDataSize(){return{data:this.valueType===0?4:8,meta:this.getMetaUsage()}}toJSON(){return`${this.value}`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:this.value,type:"YORKIE_COUNTER"}}deepcopy(){const t=Ze.create(this.valueType,this.value,this.getCreatedAt());return t.setRemovedAt(this.getRemovedAt()),t.setMovedAt(this.getMovedAt()),t}getType(){return this.valueType}static getCounterType(t){switch(typeof t){case"object":return t instanceof H?1:void 0;case"number":return t>Math.pow(2,31)-1||t<-Math.pow(2,31)?1:0;default:return}}static isSupport(t){return!!Ze.getCounterType(t)}static isInteger(t){return t%1===0}isNumericType(){const t=this.valueType;return t===0||t===1}getValueType(){return this.valueType}getValue(){return this.value}toBytes(){switch(this.valueType){case 0:{const t=this.value;return new Uint8Array([t&255,t>>8&255,t>>16&255,t>>24&255])}case 1:{const r=this.value.toBytesLE();return Uint8Array.from(r)}default:throw new T(k.ErrUnimplemented,`unimplemented type: ${this.valueType}`)}}increase(t){function r(i){if(!i.isNumericType())throw new TypeError(`Unsupported type of value: ${typeof i.getValue()}`)}return r(this),r(t),this.valueType===1?this.value=this.value.add(t.getValue()):t.getType()===te.Long?this.value=this.value+t.getValue().toInt():this.value=H.fromNumber(this.value+pg(t.getValue())).toInt(),this}}class eo extends Gt{constructor(t,r,i){super(t,i);l(this,"value");this.value=r}static create(t,r,i){return new eo(t,r,i)}execute(t){const r=t.findByCreatedAt(this.getParentCreatedAt());if(!r)throw new T(k.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(r instanceof Ze))throw new T(k.ErrInvalidArgument,"fail to execute, only Counter can execute increase");const i=r,s=this.value.deepcopy();return i.increase(s),{opInfos:[{type:"increase",path:t.createPath(this.getParentCreatedAt()),value:s.getValue()}],reverseOp:this.toReverseOperation()}}toReverseOperation(){const t=this.value.deepcopy(),i=t.getType()===te.Long?t.getValue().multiply(-1):t.getValue()*-1;return eo.create(this.getParentCreatedAt(),ue.of(i,t.getCreatedAt()))}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.INCREASE.${this.value.toJSON()}`}getValue(){return this.value}}class _r extends Gt{constructor(t,r,i,s,o,a){super(t,a);l(this,"fromPos");l(this,"toPos");l(this,"attributes");l(this,"attributesToRemove");this.fromPos=r,this.toPos=i,this.attributes=s,this.attributesToRemove=o}static create(t,r,i,s,o){return new _r(t,r,i,s,[],o)}static createTreeRemoveStyleOperation(t,r,i,s,o){return new _r(t,r,i,new Map,s,o)}execute(t,r,i){const s=t.findByCreatedAt(this.getParentCreatedAt());if(!s)throw new T(k.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(s instanceof ut))throw new T(k.ErrInvalidArgument,"fail to execute, only Tree can execute edit");const o=s;let a,u,c={data:0,meta:0};if(this.attributes.size){const d={};[...this.attributes].forEach(([h,m])=>d[h]=m),[u,a,c]=o.style([this.fromPos,this.toPos],d,this.getExecutedAt(),i)}else{const d=this.attributesToRemove;[u,a,c]=o.removeStyle([this.fromPos,this.toPos],d,this.getExecutedAt(),i)}t.acc(c);for(const d of u)t.registerGCPair(d);return{opInfos:a.map(({from:d,to:h,value:m,fromPath:p,toPath:w})=>({type:"tree-style",from:d,to:h,value:this.attributes.size?{attributes:m}:{attributesToRemove:m},fromPath:p,toPath:w,path:t.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const t=this.getParentCreatedAt().toTestString(),r=`${this.fromPos.getLeftSiblingID().getCreatedAt().toTestString()}:${this.fromPos.getLeftSiblingID().getOffset()}`,i=`${this.toPos.getLeftSiblingID().getCreatedAt().toTestString()}:${this.toPos.getLeftSiblingID().getOffset()}`;return`${t}.STYLE(${r},${i},${Object.entries(this.attributes||{}).map(([s,o])=>`${s}:"${o}"`).join(" ")})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getAttributes(){return this.attributes}getAttributesToRemove(){return this.attributesToRemove}}class ni extends Gt{constructor(t,r,i,s){super(t,s);l(this,"createdAt");l(this,"value");this.createdAt=r,this.value=i}static create(t,r,i,s){return new ni(t,r,i,s)}execute(t){const r=t.findByCreatedAt(this.getParentCreatedAt());if(!r)throw new T(k.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(r instanceof Me))throw new T(k.ErrInvalidArgument,"fail to execute, only array can execute set");const i=r.getByID(this.createdAt).deepcopy(),s=this.toReverseOperation(this.value,i),o=this.value.deepcopy();return r.insertAfter(this.createdAt,o,this.getExecutedAt()),r.delete(this.createdAt,this.getExecutedAt()),t.registerElement(o),{opInfos:[{type:"array-set",path:t.createPath(this.getParentCreatedAt())}],reverseOp:s}}toReverseOperation(t,r){return ni.create(this.getParentCreatedAt(),t.getCreatedAt(),r)}getEffectedCreatedAt(){return this.createdAt}toTestString(){return`${this.getParentCreatedAt().toTestString()}.ARRAY_SET.${this.createdAt.toTestString()}=${this.value.toSortedJSON()}`}getCreatedAt(){return this.createdAt}getValue(){return this.value}setCreatedAt(t){this.createdAt=t}}function hk(n){const e=new Hs,t=e.data;for(const[r,i]of Object.entries(n))t[r]=JSON.stringify(i);return e}function mk(n){if(n.type===dn.Put)return new aa({type:ts.PUT,presence:hk(n.presence)});if(n.type===dn.Clear)return new aa({type:ts.CLEAR});throw new T(k.ErrUnimplemented,"unimplemented type")}function gk(n){return new gv({serverSeq:n.getServerSeq(),clientSeq:n.getClientSeq()})}function Pv(n){return new Cu({clientSeq:n.getClientSeq(),lamport:n.getLamport(),actorId:Lu(n.getActorID()),versionVector:sh(n.getVersionVector())})}function M(n){if(n)return new J({lamport:n.getLamport(),delimiter:n.getDelimiter(),actorId:Lu(n.getActorID())})}function sh(n){if(!n)return;const e=new Nu;for(const[t,r]of n){const i=Qk(Lu(t));e.vector[i]=BigInt(r.toString())}return e}function Dv(n){switch(n){case te.Null:return q.NULL;case te.Boolean:return q.BOOLEAN;case te.Integer:return q.INTEGER;case te.Long:return q.LONG;case te.Double:return q.DOUBLE;case te.String:return q.STRING;case te.Bytes:return q.BYTES;case te.Date:return q.DATE;default:throw new T(k.ErrInvalidType,`unsupported type: ${n}`)}}function bv(n){switch(n){case mn.Int:return q.INTEGER_CNT;case mn.Long:return q.LONG_CNT;default:throw new T(k.ErrInvalidType,`unsupported type: ${n}`)}}function ja(n){if(n instanceof Je)return new mt({type:q.JSON_OBJECT,createdAt:M(n.getCreatedAt()),value:Vv(n)});if(n instanceof Me)return new mt({type:q.JSON_ARRAY,createdAt:M(n.getCreatedAt()),value:Gk(n)});if(n instanceof lt)return new mt({type:q.TEXT,createdAt:M(n.getCreatedAt())});if(n instanceof ue)return new mt({type:Dv(n.getType()),createdAt:M(n.getCreatedAt()),value:n.toBytes()});if(n instanceof Ze)return new mt({type:bv(n.getType()),createdAt:M(n.getCreatedAt()),value:n.toBytes()});if(n instanceof ut)return new mt({type:q.TREE,createdAt:M(n.getCreatedAt()),value:_k(n)});throw new T(k.ErrUnimplemented,"unimplemented element")}function pk(n){return new sa({createdAt:M(n.getCreatedAt()),offset:n.getOffset()})}function qa(n){return new ns({createdAt:M(n.getID().getCreatedAt()),offset:n.getID().getOffset(),relativeOffset:n.getRelativeOffset()})}function Va(n){return new es({parentId:zo(n.getParentID()),leftSiblingId:zo(n.getLeftSiblingID())})}function zo(n){return new Ai({createdAt:M(n.getCreatedAt()),offset:n.getOffset()})}function Ov(n){const e=new th;if(n instanceof rs){const t=n,r=new Jl;r.parentCreatedAt=M(t.getParentCreatedAt()),r.key=t.getKey(),r.value=ja(t.getValue()),r.executedAt=M(t.getExecutedAt()),e.body.case="set",e.body.value=r}else if(n instanceof Ri){const t=n,r=new Ml;r.parentCreatedAt=M(t.getParentCreatedAt()),r.prevCreatedAt=M(t.getPrevCreatedAt()),r.value=ja(t.getValue()),r.executedAt=M(t.getExecutedAt()),e.body.case="add",e.body.value=r}else if(n instanceof jt){const t=n,r=new Fl;r.parentCreatedAt=M(t.getParentCreatedAt()),r.prevCreatedAt=M(t.getPrevCreatedAt()),r.createdAt=M(t.getCreatedAt()),r.executedAt=M(t.getExecutedAt()),e.body.case="move",e.body.value=r}else if(n instanceof hn){const t=n,r=new Ul;r.parentCreatedAt=M(t.getParentCreatedAt()),r.createdAt=M(t.getCreatedAt()),r.executedAt=M(t.getExecutedAt()),e.body.case="remove",e.body.value=r}else if(n instanceof wa){const t=n,r=new jl;r.parentCreatedAt=M(t.getParentCreatedAt()),r.from=qa(t.getFromPos()),r.to=qa(t.getToPos()),r.content=t.getContent();const i=r.attributes;for(const[s,o]of t.getAttributes())i[s]=o;r.executedAt=M(t.getExecutedAt()),e.body.case="edit",e.body.value=r}else if(n instanceof Sa){const t=n,r=new ql;r.parentCreatedAt=M(t.getParentCreatedAt()),r.from=qa(t.getFromPos()),r.to=qa(t.getToPos());const i=r.attributes;for(const[s,o]of t.getAttributes())i[s]=o;r.executedAt=M(t.getExecutedAt()),e.body.case="style",e.body.value=r}else if(n instanceof eo){const t=n,r=new Vl;r.parentCreatedAt=M(t.getParentCreatedAt()),r.value=ja(t.getValue()),r.executedAt=M(t.getExecutedAt()),e.body.case="increase",e.body.value=r}else if(n instanceof ka){const t=n,r=new Kl;r.parentCreatedAt=M(t.getParentCreatedAt()),r.from=Va(t.getFromPos()),r.to=Va(t.getToPos()),r.contents=Ik(t.getContents()),r.splitLevel=t.getSplitLevel(),r.executedAt=M(t.getExecutedAt()),e.body.case="treeEdit",e.body.value=r}else if(n instanceof _r){const t=n,r=new Wl;r.parentCreatedAt=M(t.getParentCreatedAt()),r.from=Va(t.getFromPos()),r.to=Va(t.getToPos());const i=t.getAttributesToRemove();if(i.length>0)r.attributesToRemove=i;else{const s=r.attributes;for(const[o,a]of t.getAttributes())s[o]=a}r.executedAt=M(t.getExecutedAt()),e.body.case="treeStyle",e.body.value=r}else if(n instanceof ni){const t=n,r=new Hl;r.parentCreatedAt=M(t.getParentCreatedAt()),r.createdAt=M(t.getCreatedAt()),r.value=ja(t.getValue()),r.executedAt=M(t.getExecutedAt()),e.body.case="arraySet",e.body.value=r}else throw new T(k.ErrUnimplemented,"unimplemented operation");return e}function yk(n){const e=[];for(const t of n)e.push(Ov(t));return e}function vk(n){const e=new hv({id:Pv(n.getID()),message:n.getMessage()});return n.hasOperations()&&(e.operations=yk(n.getOperations())),n.hasPresenceChange()&&(e.presenceChange=mk(n.getPresenceChange())),e}function wk(n){const e=[];for(const t of n)e.push(vk(t));return e}function Sk(n){const e=[];for(const t of n)e.push(new mv({key:t.getStrKey(),element:ah(t.getValue())}));return e}function kk(n){const e=[];for(const t of n)e.push(new eu({element:ah(t.getValue())}));return e}function Tk(n){const e=[];for(const t of n){const r=new tu;r.id=pk(t.getID()),r.value=t.getValue().getContent(),r.removedAt=M(t.getRemovedAt());const i=r.attributes,s=t.getValue().getAttrs();for(const o of s){const a=new Ws;a.value=o.getValue(),a.updatedAt=M(o.getUpdatedAt()),i[o.getKey()]=a}e.push(r)}return e}function Ik(n){const e=[];if(!n||!n.length)return e;for(const t of n)e.push(new nu({content:oh(t)}));return e}function xk(n){const e={};for(const t of n)e[t.getKey()]=new Ws({value:t.getValue(),updatedAt:M(t.getUpdatedAt()),isRemoved:t.isRemoved()});return e}function oh(n){if(!n)return[];const e=[];return Du(n,(t,r)=>{const i=new oa({id:zo(t.id),type:t.type,removedAt:M(t.removedAt),depth:r});t.isText&&(i.value=t.value),t.insPrevID&&(i.insPrevId=zo(t.insPrevID)),t.insNextID&&(i.insNextId=zo(t.insNextID)),t.attrs&&(i.attributes=xk(t.attrs)),e.push(i)}),e}function Ak(n){const e=new et;return e.body.case="jsonObject",e.body.value=new Gl({nodes:Sk(n.getRHT()),createdAt:M(n.getCreatedAt()),movedAt:M(n.getMovedAt()),removedAt:M(n.getRemovedAt())}),e}function Lv(n){const e=new et;return e.body.case="jsonArray",e.body.value=new Yl({nodes:kk(n.getElements()),createdAt:M(n.getCreatedAt()),movedAt:M(n.getMovedAt()),removedAt:M(n.getRemovedAt())}),e}function Ek(n){const e=new et;return e.body.case="primitive",e.body.value=new _l({type:Dv(n.getType()),value:n.toBytes(),createdAt:M(n.getCreatedAt()),movedAt:M(n.getMovedAt()),removedAt:M(n.getRemovedAt())}),e}function Ck(n){const e=new et;return e.body.case="text",e.body.value=new Xl({nodes:Tk(n.getRGATreeSplit()),createdAt:M(n.getCreatedAt()),movedAt:M(n.getMovedAt()),removedAt:M(n.getRemovedAt())}),e}function Nk(n){const e=new et;return e.body.case="counter",e.body.value=new Ql({type:bv(n.getType()),value:n.toBytes(),createdAt:M(n.getCreatedAt()),movedAt:M(n.getMovedAt()),removedAt:M(n.getRemovedAt())}),e}function Rv(n){const e=new et;return e.body.case="tree",e.body.value=new Zl({nodes:oh(n.getRoot()),createdAt:M(n.getCreatedAt()),movedAt:M(n.getMovedAt()),removedAt:M(n.getRemovedAt())}),e}function ah(n){if(n instanceof Je)return Ak(n);if(n instanceof Me)return Lv(n);if(n instanceof ue)return Ek(n);if(n instanceof lt)return Ck(n);if(n instanceof Ze)return Nk(n);if(n instanceof ut)return Rv(n);throw new T(k.ErrUnimplemented,"unimplemented element")}function Pk(n){return new ii({documentKey:n.getDocumentKey(),checkpoint:gk(n.getCheckpoint()),isRemoved:n.getIsRemoved(),changes:wk(n.getChanges()),snapshot:n.getSnapshot(),versionVector:sh(n.getVersionVector())})}function Dk(n){var e;return{id:n.id,label:n.label,description:n.description,snapshot:n.snapshot,createdAt:((e=n.createdAt)==null?void 0:e.toDate())||new Date}}function To(n){if(!(n instanceof ee))return{};const e=n.findDetails(HS);for(const t of e)return t.metadata;return{}}function fs(n){return To(n).code??""}function dc(n,e){return n instanceof ee&&fs(n)===e}function Bv(n){return Jt.of(n.clientSeq,BigInt(n.lamport),dh(n.actorId),lh(n.versionVector),BigInt(n.serverSeq))}function lh(n){if(!n)return;const e=new Ls;return Object.entries(n.vector).forEach(([t,r])=>{const i=Ou(Xk(t));e.set(i,BigInt(r.toString()))}),e}function U(n){if(n)return Dt.of(BigInt(n.lamport),n.delimiter,dh(n.actorId))}function uh(n){const e={};return Object.entries(n.data).forEach(([t,r])=>{e[t]=JSON.parse(r)}),e}function bk(n){const e=n.type;if(e===ts.PUT){const t=uh(n.presence);return{type:dn.Put,presence:t}}if(e===ts.CLEAR)return{type:dn.Clear};throw new T(k.ErrInvalidType,`unsupported type: ${e}`)}function Ok(n){const e=new Map;return Object.entries(n).forEach(([t,r])=>{e.set(t,uh(r))}),e}function zv(n){switch(n){case q.NULL:return te.Null;case q.BOOLEAN:return te.Boolean;case q.INTEGER:return te.Integer;case q.LONG:return te.Long;case q.DOUBLE:return te.Double;case q.STRING:return te.String;case q.BYTES:return te.Bytes;case q.DATE:return te.Date}throw new T(k.ErrUnimplemented,`unimplemented value type: ${n}`)}function uu(n){switch(n){case q.INTEGER_CNT:return mn.Int;case q.LONG_CNT:return mn.Long}throw new T(k.ErrUnimplemented,`unimplemented value type: ${n}`)}function Ka(n){switch(n.type){case q.JSON_OBJECT:return n.value?qv(n.value):Je.create(U(n.createdAt));case q.JSON_ARRAY:return n.value?Hk(n.value):Me.create(U(n.createdAt));case q.TEXT:return lt.create(Zs.create(),U(n.createdAt));case q.TREE:return Yk(n.value);case q.NULL:case q.BOOLEAN:case q.INTEGER:case q.LONG:case q.DOUBLE:case q.STRING:case q.BYTES:case q.DATE:return ue.of(ue.valueFromBytes(zv(n.type),n.value),U(n.createdAt));case q.INTEGER_CNT:case q.LONG_CNT:return Ze.create(uu(n.type),Ze.valueFromBytes(uu(n.type),n.value),U(n.createdAt))}}function Wa(n){return Wt.of(fn.of(U(n.createdAt),n.offset),n.relativeOffset)}function $v(n){return fn.of(U(n.createdAt),n.offset)}function Lk(n){const e=ca.create(n.value);Object.entries(n.attributes).forEach(([r,i])=>{e.setAttr(r,i.value,U(i.updatedAt))});const t=Ci.create($v(n.id),e);return t.setRemovedAt(U(n.removedAt)),t}function us(n){return qt.of($o(n.parentId),$o(n.leftSiblingId))}function $o(n){return Le.of(U(n.createdAt),n.offset)}function Rk(n){if(!n.length)return;const e=[];return n.forEach(t=>{const r=ch(t.content);e.push(r)}),e}function ch(n){if(n.length===0)return;const e=[];for(const i of n)e.push(zk(i));const t=e[e.length-1],r=new Map;r.set(n[e.length-1].depth,e[e.length-1]);for(let i=e.length-2;i>=0;i--)r.get(n[i].depth-1).prepend(e[i]),r.set(n[i].depth,e[i]);return t.updateDescendantsSize(),t.updateDescendantsSize(!0),ut.create(t,Gs).getRoot()}function Bk(n){const e=ti.create();for(const[t,r]of Object.entries(n))e.setInternal(t,r.value,U(r.updatedAt),r.isRemoved);return e}function zk(n){const e=$o(n.id),t=st.create(e,n.type),r=Object.entries(n.attributes);return t.isText?t.value=n.value:r.length&&(t.attrs=Bk(n.attributes)),n.insPrevId&&(t.insPrevID=$o(n.insPrevId)),n.insNextId&&(t.insNextID=$o(n.insNextId)),t.removedAt=U(n.removedAt),t}function Jv(n){if(n.body.case==="set"){const e=n.body.value;return rs.create(e.key,Ka(e.value),U(e.parentCreatedAt),U(e.executedAt))}else if(n.body.case==="add"){const e=n.body.value;return Ri.create(U(e.parentCreatedAt),U(e.prevCreatedAt),Ka(e.value),U(e.executedAt))}else if(n.body.case==="move"){const e=n.body.value;return jt.create(U(e.parentCreatedAt),U(e.prevCreatedAt),U(e.createdAt),U(e.executedAt))}else if(n.body.case==="remove"){const e=n.body.value;return hn.create(U(e.parentCreatedAt),U(e.createdAt),U(e.executedAt))}else if(n.body.case==="edit"){const e=n.body.value,t=new Map;return Object.entries(e.attributes).forEach(([r,i])=>{t.set(r,i)}),wa.create(U(e.parentCreatedAt),Wa(e.from),Wa(e.to),e.content,t,U(e.executedAt))}else if(n.body.case==="style"){const e=n.body.value,t=new Map;return Object.entries(e.attributes).forEach(([r,i])=>{t.set(r,i)}),Sa.create(U(e.parentCreatedAt),Wa(e.from),Wa(e.to),t,U(e.executedAt))}else if(n.body.case==="increase"){const e=n.body.value;return eo.create(U(e.parentCreatedAt),Ka(e.value),U(e.executedAt))}else if(n.body.case==="treeEdit"){const e=n.body.value;return ka.create(U(e.parentCreatedAt),us(e.from),us(e.to),Rk(e.contents),e.splitLevel,U(e.executedAt))}else if(n.body.case==="treeStyle"){const e=n.body.value,t=new Map,r=e.attributesToRemove;return(r==null?void 0:r.length)>0?_r.createTreeRemoveStyleOperation(U(e.parentCreatedAt),us(e.from),us(e.to),r,U(e.executedAt)):(Object.entries(e.attributes).forEach(([i,s])=>{t.set(i,s)}),_r.create(U(e.parentCreatedAt),us(e.from),us(e.to),t,U(e.executedAt)))}else if(n.body.case==="arraySet"){const e=n.body.value;return ni.create(U(e.parentCreatedAt),U(e.createdAt),Ka(e.value),U(e.executedAt))}else throw new T(k.ErrUnimplemented,"unimplemented operation")}function $k(n){const e=[];for(const t of n){const r=Jv(t);r&&e.push(r)}return e}function Mv(n){const e=[];for(const t of n)e.push(Qs.create({id:Bv(t.id),operations:$k(t.operations),presenceChange:t.presenceChange?bk(t.presenceChange):void 0,message:t.message}));return e}function Jk(n){return Rs.of(BigInt(n.serverSeq),n.clientSeq)}function Mk(n){return bu.create(n.documentKey,Jk(n.checkpoint),n.isRemoved,Mv(n.changes),lh(n.versionVector),n.snapshot)}function Fv(n){const e=new Ys;for(const r of n.nodes){const i=fh(r.element);e.set(r.key,i,i.getPositionedAt())}const t=new Je(U(n.createdAt),e);return t.setMovedAt(U(n.movedAt)),t.setRemovedAt(U(n.removedAt)),t}function Uv(n){const e=new ua;for(const r of n.nodes)e.insert(fh(r.element));const t=new Me(U(n.createdAt),e);return t.setMovedAt(U(n.movedAt)),t.setRemovedAt(U(n.removedAt)),t}function Fk(n){const e=ue.of(ue.valueFromBytes(zv(n.type),n.value),U(n.createdAt));return e.setMovedAt(U(n.movedAt)),e.setRemovedAt(U(n.removedAt)),e}function Uk(n){const e=new Zs;let t=e.getHead();for(const i of n.nodes){const s=e.insertAfter(t,Lk(i));i.insPrevId&&s.setInsPrev(e.findNode($v(i.insPrevId))),t=s}const r=new lt(e,U(n.createdAt));return r.setMovedAt(U(n.movedAt)),r.setRemovedAt(U(n.removedAt)),r}function jk(n){const e=Ze.create(uu(n.type),Ze.valueFromBytes(uu(n.type),n.value),U(n.createdAt));return e.setMovedAt(U(n.movedAt)),e.setRemovedAt(U(n.removedAt)),e}function jv(n){const e=ch(n.nodes);return ut.create(e,U(n.createdAt))}function fh(n){if(n.body.case==="jsonObject")return Fv(n.body.value);if(n.body.case==="jsonArray")return Uv(n.body.value);if(n.body.case==="primitive")return Fk(n.body.value);if(n.body.case==="text")return Uk(n.body.value);if(n.body.case==="counter")return jk(n.body.value);if(n.body.case==="tree")return jv(n.body.value);throw new T(k.ErrUnimplemented,"unimplemented element")}function qk(n){return n.map(e=>({path:e.path,type:e.type}))}function Vk(n){if(!n)return{root:Je.create(Gs),presences:new Map};const e=ff.fromBinary(n);return{root:fh(e.root),presences:Ok(e.presences)}}function Kk(n){const e=sh(n);return Ou(e.toBinary())}function Wk(n){const e=hh(n),t=Nu.fromBinary(e);return lh(t)}function qv(n){if(!n)throw new T(k.ErrInvalidArgument,"bytes is empty");const e=et.fromBinary(n);return Fv(e.body.value)}function Vv(n){return ah(n).toBinary()}function Hk(n){if(!n)throw new T(k.ErrInvalidArgument,"bytes is empty");const e=et.fromBinary(n);return Uv(e.body.value)}function Gk(n){return Lv(n).toBinary()}function Yk(n){if(!n)throw new T(k.ErrInvalidArgument,"bytes is empty");const e=et.fromBinary(n);return jv(e.body.value)}function _k(n){return Rv(n).toBinary()}function Ou(n){return n?Array.from(n).map(e=>e.toString(16).padStart(2,"0")).join(""):""}function dh(n){return Ou(n)}function hh(n){return new Uint8Array(n.match(/.{1,2}/g).map(e=>parseInt(e,16)))}function Xk(n){if(typeof window<"u"&&typeof window.atob=="function"){const e=window.atob(n),t=e.length,r=new Uint8Array(t);for(let i=0;i<t;i++)r[i]=e.charCodeAt(i);return r}else if(typeof globalThis<"u"&&typeof globalThis.Buffer<"u"){const e=globalThis.Buffer;return new Uint8Array(e.from(n,"base64"))}else throw new Error("No base64 decoder available")}function Lu(n){return hh(n)}function Qk(n){if(typeof window<"u"&&typeof window.btoa=="function"){let e="";for(let t=0;t<n.byteLength;t++)e+=String.fromCharCode(n[t]);return window.btoa(e)}else{if(typeof globalThis<"u"&&typeof globalThis.Buffer<"u")return globalThis.Buffer.from(n).toString("base64");throw new Error("No base64 encoder available")}}function Zk(n){const e=Cu.fromBinary(n);return Bv(e)}function eT(n){const e=th.fromBinary(n);return Jv(e)}const oe={fromPresence:uh,toChangePack:Pk,fromChangePack:Mk,fromChanges:Mv,toTreeNodes:oh,fromTreeNodes:ch,objectToBytes:Vv,bytesToObject:qv,bytesToSnapshot:Vk,bytesToHex:Ou,hexToBytes:hh,toHexString:dh,toUint8Array:Lu,toOperation:Ov,toChangeID:Pv,PbChangeID:Cu,bytesToChangeID:Zk,bytesToOperation:eT,versionVectorToHex:Kk,hexToVersionVector:Wk,fromSchemaRules:qk,toRevisionSummary:Dk};var He=(n=>(n[n.Trivial=0]="Trivial",n[n.Debug=1]="Debug",n[n.Info=2]="Info",n[n.Warn=3]="Warn",n[n.Error=4]="Error",n[n.Fatal=5]="Fatal",n))(He||{});let Fi=3;function tT(n){Fi=n}const L={trivial:(...n)=>{Fi>0||typeof console<"u"&&console.log("YORKIE T:",...n)},debug:(...n)=>{Fi>1||typeof console<"u"&&console.log("YORKIE D:",...n)},info:(...n)=>{Fi>2||typeof console<"u"&&console.log("YORKIE I:",...n)},warn:(...n)=>{Fi>3||typeof console<"u"&&(typeof console.warn<"u"?console.warn("YORKIE W:",...n):console.log("YORKIE W:",...n))},error:(...n)=>{Fi>4||typeof console<"u"&&(typeof console.error<"u"?console.error("YORKIE E:",...n):console.log("YORKIE E:",...n))},fatal:(...n)=>{typeof console<"u"&&(typeof console.error<"u"?console.error("YORKIE F:",...n):console.log("YORKIE F:",...n))},isEnabled:n=>Fi<=n};function Kv(){return"xxxxxxxx-xxxx-4xxxy-xxxx-xxxxxxxxxxx".replace(/[xy]/g,n=>{const e=Math.random()*16|0;return(n==="x"?e:e&3|8).toString(16)})}const hc=()=>{};class nT{constructor(e){l(this,"finalized",!1);l(this,"observers",[]);l(this,"finalError");try{e(this)}catch(t){this.error(t)}}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(!e)throw new T(k.ErrInvalidArgument,"missing observer");if(this.finalized)throw new T(k.ErrRefused,"observable is finalized due to previous error");typeof e=="object"?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=hc),i.error===void 0&&(i.error=hc),i.complete===void 0&&(i.complete=hc);const s=Kv(),o=this.unsubscribeOne.bind(this,s);if(this.observers.push({subscriptionID:s,observer:i}),this.finalized)try{this.finalError?i.error(this.finalError):i.complete()}catch(a){L.warn(a)}return o}unsubscribeOne(e){var t;this.observers=(t=this.observers)==null?void 0:t.filter(r=>r.subscriptionID!==e)}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e].observer)}catch(r){L.error(r)}}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.observers=void 0)}}function Wv(n){const e=new nT(n);return{subscribe:e.subscribe.bind(e),getProxy:()=>e}}class Jo{constructor(e,t,r,i){l(this,"prevID");l(this,"nextID");l(this,"delimiter");l(this,"message");l(this,"root");l(this,"operations");l(this,"presenceChange");l(this,"previousPresence");l(this,"reversePresenceKeys");this.prevID=e,this.nextID=e.next(),this.delimiter=pv,this.root=t,this.operations=[],this.previousPresence=$t(r),this.presenceChange=void 0,this.reversePresenceKeys=new Set,this.message=i}static create(e,t,r,i){return new Jo(e,t,r,i)}push(e){this.operations.push(e)}registerElement(e,t){this.root.registerElement(e,t)}registerRemovedElement(e){this.root.registerRemovedElement(e)}registerGCPair(e){this.root.registerGCPair(e)}getNextID(){return this.isPresenceOnlyChange()?this.prevID.next(!0).setLamport(this.prevID.getLamport()).setVersionVector(this.prevID.getVersionVector()):this.nextID}toChange(){const e=this.isPresenceOnlyChange()?this.prevID.next(!0):this.nextID;return Qs.create({id:e,operations:this.operations,presenceChange:this.presenceChange,message:this.message})}isPresenceOnlyChange(){return this.operations.length===0}hasChange(){return this.operations.length>0||this.presenceChange!==void 0}setPresenceChange(e){this.presenceChange=e}setReversePresence(e,t){for(const r of Object.keys(e))t!=null&&t.addToHistory?this.reversePresenceKeys.add(r):this.reversePresenceKeys.delete(r)}getReversePresence(){if(this.reversePresenceKeys.size===0)return;const e={};for(const t of this.reversePresenceKeys)e[t]=this.previousPresence[t];return e}issueTimeTicket(){return this.delimiter+=1,this.nextID.createTimeTicket(this.delimiter)}getLastTimeTicket(){return this.nextID.createTimeTicket(this.delimiter)}acc(e){this.root.acc(e)}}function Hv(n,e){const t=new fa(n);return new Proxy(e,t.getHandlers())}class fa{constructor(e){l(this,"context");l(this,"handlers");this.context=e,this.handlers={set:(t,r,i)=>(L.isEnabled(He.Trivial)&&L.trivial(`obj[${r}]=${JSON.stringify(i)}`),fa.setInternal(e,t,r,i),!0),get:(t,r)=>(L.isEnabled(He.Trivial)&&L.trivial(`obj[${r}]`),r==="getID"?()=>t.getCreatedAt():r==="toJSON"||r==="toString"?()=>t.toJSON():r==="toJS"?()=>t.toJS():r==="toJSForTest"?()=>t.toJSForTest():Ui(e,t.get(r))),ownKeys:t=>t.getKeys(),getOwnPropertyDescriptor:()=>({enumerable:!0,configurable:!0}),deleteProperty:(t,r)=>(L.isEnabled(He.Trivial)&&L.trivial(`obj[${r}]`),fa.deleteInternal(e,t,r),!0)}}static setInternal(e,t,r,i){if(r.includes("."))throw new T(k.ErrInvalidObjectKey,"key must not contain the '.'.");const s=e.issueTimeTicket(),o=Mo(e,i,s),a=t.set(r,o,s);e.registerElement(o,t),a&&e.registerRemovedElement(a),e.push(rs.create(r,o.deepcopy(),t.getCreatedAt(),s))}static buildObjectMembers(e,t){const r={};for(const[i,s]of Object.entries(t)){if(i.includes("."))throw new T(k.ErrInvalidObjectKey,"key must not contain the '.'.");const o=e.issueTimeTicket(),a=Mo(e,s,o);r[i]=a}return r}static deleteInternal(e,t,r){const i=e.issueTimeTicket(),s=t.deleteByKey(r,i);s&&(e.push(hn.create(t.getCreatedAt(),s.getCreatedAt(),i)),e.registerRemovedElement(s))}getHandlers(){return this.handlers}}function rT(n,e){const t=new Q(n,e);return new Proxy(e,t.getHandlers())}function yg(n){return typeof n=="string"||n instanceof String?!isNaN(n):!1}function iT(n){return["concat","entries","every","filter","find","findIndex","forEach","join","keys","map","reduce","reduceRight","slice","some","toLocaleString","toString","values"].includes(n)}class Q{constructor(e,t){l(this,"context");l(this,"handlers");l(this,"array");this.context=e,this.array=t,this.handlers={get:(r,i,s)=>i==="getID"?()=>r.getCreatedAt():i==="getElementByID"?o=>{const a=r.getByID(o);if(!(!a||a.isRemoved()))return Bt(e,a)}:i==="getElementByIndex"?o=>{const a=r.get(o);return Bt(e,a)}:i==="getLast"?()=>Bt(e,r.getLast()):i==="delete"?o=>{const a=Q.deleteInternalByIndex(e,r,o);return Bt(e,a)}:i==="deleteByID"?o=>{const a=Q.deleteInternalByID(e,r,o);return Bt(e,a)}:i==="insertAfter"?(o,a)=>{const u=Q.insertAfterInternal(e,r,o,a);return Bt(e,u)}:i==="insertIntegerAfter"?(o,a)=>{const u=Q.insertIntegerAfterInternal(e,r,o,a);return Bt(e,u)}:i==="insertBefore"?(o,a)=>{const u=Q.insertBeforeInternal(e,r,o,a);return Bt(e,u)}:i==="setValue"?(o,a)=>{const u=Q.setValueInternal(e,r,o,a);return Bt(e,u)}:i==="moveBefore"?(o,a)=>{Q.moveBeforeInternal(e,r,o,a)}:i==="moveAfter"?(o,a)=>{Q.moveAfterInternal(e,r,o,a)}:i==="moveAfterByIndex"?(o,a)=>{Q.moveAfterByIndexInternal(e,r,o,a)}:i==="moveFront"?o=>{Q.moveFrontInternal(e,r,o)}:i==="moveLast"?o=>{Q.moveLastInternal(e,r,o)}:yg(i)?Ui(e,r.get(Number(i))):i==="push"?o=>Q.pushInternal(e,r,o):i==="splice"?(o,a,...u)=>Q.splice(e,r,o,a,...u):i==="length"?r.length:typeof i=="symbol"&&i===Symbol.iterator?Q.iteratorInternal.bind(this,e,r):i==="includes"?(o,a)=>Q.includes(e,r,o,a):i==="indexOf"?(o,a)=>Q.indexOf(e,r,o,a):i==="lastIndexOf"?(o,a)=>Q.lastIndexOf(e,r,o,a):i==="toJSForTest"?()=>r.toJSForTest():i==="toTestString"?()=>Q.toTestString(r):typeof i=="string"&&iT(i)?(...o)=>{const a=Array.from(r).map(u=>Ui(e,u));return Array.prototype[i].apply(a,o)}:Reflect.get(r,i,s),set:(r,i,s)=>{if(yg(i)){const o=Number(i);return Q.setValueInternal(e,r,o,s),!0}return Reflect.set(r,i,s)},deleteProperty:(r,i)=>(L.isEnabled(He.Trivial)&&L.trivial(`array[${i}]`),Q.deleteInternalByIndex(e,r,Number.parseInt(i)),!0)}}static*iteratorInternal(e,t){for(const r of t)yield Bt(e,r)}static buildArrayElements(e,t){const r=[];for(const i of t){const s=e.issueTimeTicket(),o=Mo(e,i,s);r.push(o)}return r}static pushInternal(e,t,r){return Q.insertAfterInternal(e,t,t.getLastCreatedAt(),r),t.length}static moveBeforeInternal(e,t,r,i){const s=e.issueTimeTicket(),o=t.getPrevCreatedAt(r);t.moveAfter(o,i,s),e.push(jt.create(t.getCreatedAt(),o,i,s))}static moveAfterInternal(e,t,r,i){const s=e.issueTimeTicket();e.push(jt.create(t.getCreatedAt(),r,i,s)),t.moveAfter(r,i,s)}static moveAfterByIndexInternal(e,t,r,i){const s=t.get(r);if(!s)throw new T(k.ErrInvalidArgument,`index out of bounds: ${r}`);const o=t.get(i);if(!o)throw new T(k.ErrInvalidArgument,`index out of bounds: ${i}`);Q.moveAfterInternal(e,t,s.getCreatedAt(),o.getCreatedAt())}static moveFrontInternal(e,t,r){const i=e.issueTimeTicket(),s=t.getHead();t.moveAfter(s.getCreatedAt(),r,i),e.push(jt.create(t.getCreatedAt(),s.getCreatedAt(),r,i))}static moveLastInternal(e,t,r){const i=e.issueTimeTicket(),s=t.getLastCreatedAt();t.moveAfter(s,r,i),e.push(jt.create(t.getCreatedAt(),s,r,i))}static insertAfterInternal(e,t,r,i){const s=e.issueTimeTicket(),o=Mo(e,i,s);return t.insertAfter(r,o),e.registerElement(o,t),e.push(Ri.create(t.getCreatedAt(),r,o.deepcopy(),s)),o}static insertIntegerAfterInternal(e,t,r,i){const s=t.get(r);if(!s)throw new T(k.ErrInvalidArgument,`index out of bounds: ${r}`);return Q.insertAfterInternal(e,t,s.getCreatedAt(),i),t}static insertBeforeInternal(e,t,r,i){return Q.insertAfterInternal(e,t,t.getPrevCreatedAt(r),i)}static setValueInternal(e,t,r,i){const s=t.get(r);if(!s)throw new T(k.ErrInvalidArgument,`index out of bounds: ${r}`);return Q.setByIndexInternal(e,t,s.getCreatedAt(),i),t}static setByIndexInternal(e,t,r,i){const s=e.issueTimeTicket(),o=Mo(e,i,s),a=o.deepcopy();return e.push(ni.create(t.getCreatedAt(),r,a,s)),t.set(r,o,s),e.registerElement(o,t),o}static deleteInternalByIndex(e,t,r){const i=e.issueTimeTicket(),s=t.deleteByIndex(r,i);if(s)return e.push(hn.create(t.getCreatedAt(),s.getCreatedAt(),i)),e.registerRemovedElement(s),s}static deleteInternalByID(e,t,r){const i=e.issueTimeTicket(),s=t.delete(r,i);return e.push(hn.create(t.getCreatedAt(),s.getCreatedAt(),i)),e.registerRemovedElement(s),s}static splice(e,t,r,i,...s){const o=t.length,a=r>=0?Math.min(r,o):Math.max(o+r,0),u=i===void 0?o:i<0?a:Math.min(a+i,o),c=[];for(let d=a;d<u;d++){const h=Q.deleteInternalByIndex(e,t,a);if(h){const m=h.deepcopy();m.setRemovedAt(),c.push(Ui(e,m))}}if(s){let d=a===0?t.getHead().getID():t.get(a-1).getID();for(const h of s)d=Q.insertAfterInternal(e,t,d,h).getID()}return c}static includes(e,t,r,i){var a;const s=t.length,o=i===void 0?0:i<0?Math.max(i+s,0):i;if(o>=s)return!1;if(ue.isSupport(r))return Array.from(t).map(c=>Ui(e,c)).includes(r,o);for(let u=o;u<s;u++)if(((a=t.get(u))==null?void 0:a.getID())===r.getID())return!0;return!1}static indexOf(e,t,r,i){var a;const s=t.length,o=i===void 0?0:i<0?Math.max(i+s,0):i;if(o>=s)return-1;if(ue.isSupport(r))return Array.from(t).map(c=>Ui(e,c)).indexOf(r,o);for(let u=o;u<s;u++)if(((a=t.get(u))==null?void 0:a.getID())===r.getID())return u;return-1}static lastIndexOf(e,t,r,i){var a;const s=t.length,o=i===void 0||i>=s?s-1:i<0?i+s:i;if(o<0)return-1;if(ue.isSupport(r))return Array.from(t).map(c=>Ui(e,c)).lastIndexOf(r,o);for(let u=o;u>0;u--)if(((a=t.get(u))==null?void 0:a.getID())===r.getID())return u;return-1}static toTestString(e){return e.toTestString()}getHandlers(){return this.handlers}}class mh{constructor(e,t){l(this,"context");l(this,"text");this.context=e,this.text=t}initialize(e,t){this.context=e,this.text=t}getID(){return this.text.getID()}edit(e,t,r,i){if(!this.context||!this.text)throw new T(k.ErrNotInitialized,"Text is not initialized yet");if(e>t)throw new T(k.ErrInvalidArgument,"from should be less than or equal to to");const s=this.text.indexRangeToPosRange(e,t);L.isEnabled(He.Debug)&&L.debug(`EDIT: f:${e}->${s[0].toTestString()}, t:${t}->${s[1].toTestString()} c:${r}`);const o=i?Xs(i):void 0,a=this.context.issueTimeTicket(),[,u,c,d]=this.text.edit(s,r,a,o);this.context.acc(c);for(const h of u)this.context.registerGCPair(h);return this.context.push(new wa(this.text.getCreatedAt(),s[0],s[1],r,o?new Map(Object.entries(o)):new Map,a)),this.text.findIndexesFromRange(d)}delete(e,t){return this.edit(e,t,"")}empty(){return this.edit(0,this.length,"")}setStyle(e,t,r){if(!this.context||!this.text)throw new T(k.ErrNotInitialized,"Text is not initialized yet");if(e>t)throw new T(k.ErrInvalidArgument,"from should be less than or equal to to");const i=this.text.indexRangeToPosRange(e,t);L.isEnabled(He.Debug)&&L.debug(`STYL: f:${e}->${i[0].toTestString()}, t:${t}->${i[1].toTestString()} a:${JSON.stringify(r)}`);const s=Xs(r),o=this.context.issueTimeTicket(),[a,u]=this.text.setStyle(i,s,o);this.context.acc(u);for(const c of a)this.context.registerGCPair(c);return this.context.push(new Sa(this.text.getCreatedAt(),i[0],i[1],new Map(Object.entries(s)),o)),!0}indexRangeToPosRange(e){if(!this.context||!this.text)throw new T(k.ErrNotInitialized,"Text is not initialized yet");const t=this.text.indexRangeToPosRange(e[0],e[1]);return[t[0].toStruct(),t[1].toStruct()]}posRangeToIndexRange(e){if(!this.context||!this.text)throw new T(k.ErrNotInitialized,"Text is not initialized yet");const t=this.text.findIndexesFromRange([Wt.fromStruct(e[0]),Wt.fromStruct(e[1])]);return[t[0],t[1]]}toTestString(){if(!this.context||!this.text)throw new T(k.ErrNotInitialized,"Text is not initialized yet");return this.text.toTestString()}values(){if(!this.context||!this.text)throw new T(k.ErrNotInitialized,"Text is not initialized yet");return this.text.values()}get length(){return this.text.length}getTreeByIndex(){return this.text.getTreeByIndex()}getTreeByID(){return this.text.getTreeByID()}toString(){if(!this.context||!this.text)throw new T(k.ErrNotInitialized,"Text is not initialized yet");return this.text.toString()}toJSON(){if(!this.context||!this.text)throw new T(k.ErrNotInitialized,"Text is not initialized yet");return this.text.toJSON()}toJSForTest(){if(!this.context||!this.text)throw new T(k.ErrNotInitialized,"Text is not initialized yet");return this.text.toJSForTest()}createRangeForTest(e,t){if(!this.context||!this.text)throw new T(k.ErrNotInitialized,"Text is not initialized yet");return this.text.indexRangeToPosRange(e,t)}}class gh{constructor(e,t){l(this,"valueType");l(this,"value");l(this,"context");l(this,"counter");this.valueType=e,this.value=t}initialize(e,t){this.valueType=t.getValueType(),this.context=e,this.counter=t,this.value=t.getValue()}getID(){return this.counter.getID()}getValue(){return this.value}getValueType(){return this.valueType}increase(e){if(!this.context||!this.counter)throw new T(k.ErrNotInitialized,"Counter is not initialized yet");const t=this.context.issueTimeTicket(),r=ue.of(e,t);if(!r.isNumericType())throw new TypeError(`Unsupported type of value: ${typeof r.getValue()}`);return this.counter.increase(r),this.context.push(eo.create(this.counter.getCreatedAt(),r,t)),this}toJSForTest(){if(!this.context||!this.counter)throw new T(k.ErrNotInitialized,"Counter is not initialized yet");return this.counter.toJSForTest()}}function ph(n){if(n.isText)return{type:n.type,value:n.value};const e={type:n.type,children:n.children.map(t=>ph(t))};return n.attrs&&(e.attributes=Yr(n.attrs.toObject())),e}function sT(n,e){const t={type:n.isText?n.parent.type:n.type,children:n.isText?n.parent.getChildrenText().length===e?[]:[{type:cn,value:n.parent.getChildrenText().slice(e)}]:n.children.slice(e).map(r=>ph(r))};return n.attrs?t.attributes=Yr(n.attrs.toObject()):n.isText&&n.parent.attrs&&(t.attributes=Yr(n.parent.attrs.toObject())),t}function oT(n,e){const{node:t}=n,r=[...e].slice(0,-1),i=t.isText?t.parent.getChildrenText().length:t.children.length,s=[...r,i],o=[...r],a=[];o[o.length-1]+=1,e.every((c,d)=>c===s[d])||a.push({fromPath:[...e],toPath:s});const u=sT(t,e[e.length-1]);return u&&a.push({fromPath:o,toPath:o,content:u}),a}function aT(n,e){const{node:t,offset:r}=n,i=t.children[r],s=t.children[r-1],{children:o}=i,a=[...e].slice(0,-1),u=[{fromPath:[...e],toPath:[...a,r+1]}];if(!i.children.length)return u;const c=[...a,r-1,s.hasTextChild()?s.getChildrenText().length:s.children.length],d=o.map(h=>ph(h));return u.push({fromPath:c,toPath:c,content:d}),u}function yh(n,e,t){const{type:r}=n,i=t.issueTimeTicket();if(r===cn){Gv(n);const{value:s}=n,o=st.create(Le.of(i,0),r,s);e.append(o)}else{const{children:s=[]}=n,{attributes:o}=n;let a;if(typeof o=="object"&&!Tv(o)){const c=Xs(o);a=new ti;for(const[d,h]of Object.entries(c))a.set(d,h,i)}const u=st.create(Le.of(i,0),r,void 0,a);e.append(u);for(const c of s)yh(c,u,t)}}function lT(n,e){const{type:t}=e,r=n.issueTimeTicket();let i;if(e.type===cn){const{value:s}=e;i=st.create(Le.of(r,0),t,s)}else if(e){const{children:s=[]}=e,{attributes:o}=e;let a;if(typeof o=="object"&&!Tv(o)){const u=Xs(o);a=new ti;for(const[c,d]of Object.entries(u))a.set(c,d,r)}i=st.create(Le.of(n.issueTimeTicket(),0),t,void 0,a);for(const u of s)yh(u,i,n)}return i}function Gv(n){if(!n.value.length)throw new T(k.ErrInvalidArgument,"text node cannot have empty value");return!0}function vg(n){if(!n.length)return!0;if(n[0].type===cn)for(const t of n){const{type:r}=t;if(r!==cn)throw new T(k.ErrInvalidArgument,"element node and text node cannot be passed together");Gv(t)}else for(const t of n){const{type:r}=t;if(r===cn)throw new T(k.ErrInvalidArgument,"element node and text node cannot be passed together")}return!0}class vh{constructor(e){l(this,"initialRoot");l(this,"context");l(this,"tree");this.initialRoot=e}initialize(e,t){this.context=e,this.tree=t}getID(){return this.tree.getID()}buildRoot(e){if(!this.initialRoot)return st.create(Le.of(e.issueTimeTicket(),0),nk);const t=st.create(Le.of(e.issueTimeTicket(),0),this.initialRoot.type);for(const r of this.initialRoot.children)yh(r,t,e);return t}getSize(){if(!this.context||!this.tree)throw new T(k.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getSize()}getNodeSize(){if(!this.context||!this.tree)throw new T(k.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getNodeSize()}getIndexTree(){if(!this.context||!this.tree)throw new T(k.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getIndexTree()}splitByPath(e){if(!this.context||!this.tree)throw new T(k.ErrNotInitialized,"Tree is not initialized yet");if(!e.length)throw new T(k.ErrInvalidArgument,"path should not be empty");const t=this.tree.pathToTreePos(e),r=oT(t,e);for(const i of r){const{fromPath:s,toPath:o,content:a}=i,u=this.tree.pathToPos(s),c=this.tree.pathToPos(o);this.editInternal(u,c,a?[a]:[],0)}}mergeByPath(e){if(!this.context||!this.tree)throw new T(k.ErrNotInitialized,"Tree is not initialized yet");if(!e.length)throw new T(k.ErrInvalidArgument,"path should not be empty");const t=this.tree.pathToTreePos(e);if(t.node.isText)throw new T(k.ErrInvalidArgument,"text node cannot be merged");const r=aT(t,e);for(const i of r){const{fromPath:s,toPath:o,content:a}=i,u=this.tree.pathToPos(s),c=this.tree.pathToPos(o);this.editInternal(u,c,a??[],0)}}styleByPath(e,t){if(!this.context||!this.tree)throw new T(k.ErrNotInitialized,"Tree is not initialized yet");if(!e.length)throw new T(k.ErrInvalidArgument,"path should not be empty");const[r,i]=this.tree.pathToPosRange(e),s=this.context.issueTimeTicket(),o=t?Xs(t):void 0,[a,,u]=this.tree.style([r,i],o,s);this.context.acc(u);for(const c of a)this.context.registerGCPair(c);this.context.push(_r.create(this.tree.getCreatedAt(),r,i,o?new Map(Object.entries(o)):new Map,s))}style(e,t,r){if(!this.context||!this.tree)throw new T(k.ErrNotInitialized,"Tree is not initialized yet");if(e>t)throw new T(k.ErrInvalidArgument,"from should be less than or equal to to");const i=this.tree.findPos(e),s=this.tree.findPos(t),o=this.context.issueTimeTicket(),a=r?Xs(r):void 0,[u,,c]=this.tree.style([i,s],a,o);this.context.acc(c);for(const d of u)this.context.registerGCPair(d);this.context.push(_r.create(this.tree.getCreatedAt(),i,s,a?new Map(Object.entries(a)):new Map,o))}removeStyle(e,t,r){if(!this.context||!this.tree)throw new T(k.ErrNotInitialized,"Tree is not initialized yet");if(e>t)throw new T(k.ErrInvalidArgument,"from should be less than or equal to to");const i=this.tree.findPos(e),s=this.tree.findPos(t),o=this.context.issueTimeTicket(),[a,,u]=this.tree.removeStyle([i,s],r,o);this.context.acc(u);for(const c of a)this.context.registerGCPair(c);this.context.push(_r.createTreeRemoveStyleOperation(this.tree.getCreatedAt(),i,s,r,o))}editInternal(e,t,r,i=0){var c;if(r.length!==0&&r[0]&&(vg(r),r[0].type!==cn))for(const d of r){const{children:h=[]}=d;vg(h)}const s=this.context.getLastTimeTicket();let o=new Array;if(((c=r[0])==null?void 0:c.type)===cn){let d="";for(const h of r){const{value:m}=h;d+=m}o.push(st.create(Le.of(this.context.issueTimeTicket(),0),cn,d))}else o=r.map(d=>d&&lT(this.context,d)).filter(d=>d);const[,a,u]=this.tree.edit([e,t],o.length?o.map(d=>d==null?void 0:d.deepcopy()):void 0,i,s,()=>this.context.issueTimeTicket());this.context.acc(u);for(const d of a)this.context.registerGCPair(d);return this.context.push(ka.create(this.tree.getCreatedAt(),e,t,o.length?o:void 0,i,s)),!0}editByPath(e,t,r,i=0){if(!this.context||!this.tree)throw new T(k.ErrNotInitialized,"Tree is not initialized yet");if(e.length!==t.length)throw new T(k.ErrInvalidArgument,"path length should be equal");if(!e.length||!t.length)throw new T(k.ErrInvalidArgument,"path should not be empty");const s=this.tree.pathToPos(e),o=this.tree.pathToPos(t);return this.editInternal(s,o,r?[r]:[],i)}editBulkByPath(e,t,r,i=0){if(!this.context||!this.tree)throw new T(k.ErrNotInitialized,"Tree is not initialized yet");if(e.length!==t.length)throw new T(k.ErrInvalidArgument,"path length should be equal");if(!e.length||!t.length)throw new T(k.ErrInvalidArgument,"path should not be empty");const s=this.tree.pathToPos(e),o=this.tree.pathToPos(t);return this.editInternal(s,o,r,i)}edit(e,t,r,i=0){if(!this.context||!this.tree)throw new T(k.ErrNotInitialized,"Tree is not initialized yet");if(e>t)throw new T(k.ErrInvalidArgument,"from should be less than or equal to to");const s=this.tree.findPos(e),o=this.tree.findPos(t);return this.editInternal(s,o,r?[r]:[],i)}editBulk(e,t,r,i=0){if(!this.context||!this.tree)throw new T(k.ErrNotInitialized,"Tree is not initialized yet");if(e>t)throw new T(k.ErrInvalidArgument,"from should be less than or equal to to");const s=this.tree.findPos(e),o=this.tree.findPos(t);return this.editInternal(s,o,r,i)}toXML(){if(!this.context||!this.tree)throw new T(k.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toXML()}toJSON(){if(!this.context||!this.tree)throw new T(k.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toJSON()}toJSForTest(){if(!this.context||!this.tree)throw new T(k.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toJSForTest()}toJSInfoForTest(){if(!this.context||!this.tree)throw new T(k.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toJSInfoForTest()}getRootTreeNode(){if(!this.context||!this.tree)throw new T(k.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getRootTreeNode()}indexToPath(e){if(!this.context||!this.tree)throw new T(k.ErrNotInitialized,"Tree is not initialized yet");return this.tree.indexToPath(e)}pathToIndex(e){if(!this.context||!this.tree)throw new T(k.ErrNotInitialized,"Tree is not initialized yet");return this.tree.pathToIndex(e)}pathRangeToPosRange(e){if(!this.context||!this.tree)throw new T(k.ErrNotInitialized,"Tree is not initialized yet");const t=[this.tree.pathToIndex(e[0]),this.tree.pathToIndex(e[1])],r=this.tree.indexRangeToPosRange(t);return[r[0].toStruct(),r[1].toStruct()]}indexRangeToPosRange(e){if(!this.context||!this.tree)throw new T(k.ErrNotInitialized,"Tree is not initialized yet");return this.tree.indexRangeToPosStructRange(e)}posRangeToIndexRange(e){if(!this.context||!this.tree)throw new T(k.ErrNotInitialized,"Tree is not initialized yet");const t=[qt.fromStruct(e[0]),qt.fromStruct(e[1])];return this.tree.posRangeToIndexRange(t)}posRangeToPathRange(e){if(!this.context||!this.tree)throw new T(k.ErrNotInitialized,"Tree is not initialized yet");const t=[qt.fromStruct(e[0]),qt.fromStruct(e[1])];return this.tree.posRangeToPathRange(t)}}function wg(n,e){return Hv(n,e)}function Bt(n,e){if(e){if(e instanceof ue)return e;if(e instanceof Je)return Hv(n,e);if(e instanceof Me)return rT(n,e);if(e instanceof lt)return new mh(n,e);if(e instanceof Ze){const t=new gh(mn.Int,0);return t.initialize(n,e),t}else if(e instanceof ut){const t=new vh;return t.initialize(n,e),t}}else return;throw new TypeError(`Unsupported type of element: ${typeof e}`)}function Ui(n,e){const t=Bt(n,e);return t instanceof ue?t.getValue():t}function Mo(n,e,t){let r;if(ue.isSupport(e))r=ue.of(e,t);else if(Array.isArray(e))r=Me.create(t,Q.buildArrayElements(n,e));else if(typeof e=="object")e instanceof mh?(r=lt.create(Zs.create(),t),e.initialize(n,r)):e instanceof gh?(r=Ze.create(e.getValueType(),e.getValue(),t),e.initialize(n,r)):e instanceof vh?(r=ut.create(e.buildRoot(n),t),e.initialize(n,r)):r=Je.create(t,fa.buildObjectMembers(n,e));else throw new TypeError(`Unsupported type of value: ${typeof e}`);return r}class da{constructor(e){l(this,"rootObject");l(this,"elementPairMapByCreatedAt");l(this,"gcElementSetByCreatedAt");l(this,"gcPairMap");l(this,"docSize");this.rootObject=e,this.elementPairMapByCreatedAt=new Map,this.gcElementSetByCreatedAt=new Set,this.gcPairMap=new Map,this.docSize={live:{data:0,meta:0},gc:{data:0,meta:0}},this.registerElement(e,void 0),e.getDescendants(t=>{if(t.getRemovedAt()&&this.registerRemovedElement(t),t instanceof lt||t instanceof ut)for(const r of t.getGCPairs())this.registerGCPair(r);return!1})}static create(){return new da(Je.create(Gs))}findByCreatedAt(e){const t=this.elementPairMapByCreatedAt.get(e.toIDString());if(t)return t.element}findElementPairByCreatedAt(e){return this.elementPairMapByCreatedAt.get(e.toIDString())}createSubPaths(e){let t=this.elementPairMapByCreatedAt.get(e.toIDString());if(!t)return[];const r=[];for(;t.parent;){const i=t.element.getCreatedAt(),s=t.parent.subPathOf(i);if(s===void 0)throw new T(k.ErrInvalidArgument,`cant find the given element: ${i.toIDString()}`);r.unshift(s),t=this.elementPairMapByCreatedAt.get(t.parent.getCreatedAt().toIDString())}return r.unshift("$"),r}createPath(e){return this.createSubPaths(e).join(".")}registerElement(e,t){this.elementPairMapByCreatedAt.set(e.getCreatedAt().toIDString(),{parent:t,element:e}),be(this.docSize.live,e.getDataSize()),e instanceof Ei&&e.getDescendants((r,i)=>(this.elementPairMapByCreatedAt.set(r.getCreatedAt().toIDString(),{parent:i,element:r}),be(this.docSize.live,r.getDataSize()),!1))}deregisterElement(e){let t=0;const r=i=>{const s=i.getCreatedAt().toIDString();Wi(this.docSize.gc,i.getDataSize()),this.elementPairMapByCreatedAt.delete(s),this.gcElementSetByCreatedAt.delete(s),t++};return r(e),e instanceof Ei&&e.getDescendants(i=>(r(i),!1)),t}registerRemovedElement(e){be(this.docSize.gc,e.getDataSize()),Wi(this.docSize.live,e.getDataSize()),this.docSize.live.meta+=un,this.gcElementSetByCreatedAt.add(e.getCreatedAt().toIDString())}registerGCPair(e){if(this.gcPairMap.get(e.child.toIDString())){this.gcPairMap.delete(e.child.toIDString());return}this.gcPairMap.set(e.child.toIDString(),e);const r=this.gcPairMap.get(e.child.toIDString()).child.getDataSize();be(this.docSize.gc,r),Wi(this.docSize.live,r),e.child instanceof pi||(this.docSize.live.meta+=un)}getElementMapSize(){return this.elementPairMapByCreatedAt.size}getGarbageElementSetSize(){const e=new Set;for(const t of this.gcElementSetByCreatedAt){e.add(t);const r=this.elementPairMapByCreatedAt.get(t);r.element instanceof Ei&&r.element.getDescendants(i=>(e.add(i.getCreatedAt().toIDString()),!1))}return e.size}getObject(){return this.rootObject}getGarbageLen(){return this.getGarbageElementSetSize()+this.gcPairMap.size}getDocSize(){return this.docSize}deepcopy(){return new da(this.rootObject.deepcopy())}garbageCollect(e){let t=0;for(const r of this.gcElementSetByCreatedAt){const i=this.elementPairMapByCreatedAt.get(r),s=i.element.getRemovedAt();s&&(e!=null&&e.afterOrEqual(s))&&(i.parent.purge(i.element),t+=this.deregisterElement(i.element))}for(const[,r]of this.gcPairMap){const i=r.child.getRemovedAt();i&&(e!=null&&e.afterOrEqual(i))&&(r.parent.purge(r.child),Wi(this.docSize.gc,r.child.getDataSize()),this.gcPairMap.delete(r.child.toIDString()),t+=1)}return t}toJSON(){return this.rootObject.toJSON()}toSortedJSON(){return this.rootObject.toSortedJSON()}getStats(){return{elements:this.getElementMapSize(),gcPairs:this.gcPairMap.size,gcElements:this.getGarbageElementSetSize()}}acc(e){be(this.docSize.live,e)}*getGCElementPairs(){for(const e of this.gcElementSetByCreatedAt){const t=this.elementPairMapByCreatedAt.get(e);t&&(yield t)}}}let Sg=class{constructor(e,t){l(this,"context");l(this,"presence");this.context=e,this.presence=t}set(e,t){for(const r of Object.keys(e))this.presence[r]=e[r];this.context.setPresenceChange({type:dn.Put,presence:$t(this.presence)}),this.context.setReversePresence(e,t)}get(e){return this.presence[e]}clear(){this.presence={},this.context.setPresenceChange({type:dn.Clear})}};const kg=50;class uT{constructor(){l(this,"undoStack",[]);l(this,"redoStack",[])}hasUndo(){return this.undoStack.length>0}hasRedo(){return this.redoStack.length>0}pushUndo(e){this.undoStack.length>=kg&&this.undoStack.shift(),this.undoStack.push(e)}popUndo(){return this.undoStack.pop()}pushRedo(e){this.redoStack.length>=kg&&this.redoStack.shift(),this.redoStack.push(e)}popRedo(){return this.redoStack.pop()}clearRedo(){this.redoStack=[]}getUndoStackForTest(){return this.undoStack}getRedoStackForTest(){return this.redoStack}reconcileCreatedAt(e,t){const r=i=>{for(const s of i)for(const o of s)(o instanceof ni||o instanceof hn||o instanceof jt)&&o.getCreatedAt()===e&&o.setCreatedAt(t),(o instanceof Ri||o instanceof jt)&&o.getPrevCreatedAt()===e&&o.setPrevCreatedAt(t)};r(this.undoStack),r(this.redoStack)}}function cT(n,e){const t=[];for(const r of e){const i=fT(n,r.path),s=dT(i,r);if(!s.valid)for(const o of s.errors||[])t.push(o)}return{valid:t.length===0,errors:t}}function fT(n,e){if(!e.startsWith("$"))throw new Error(`Path must start with $, got ${e}`);const t=e.split(".");let r=n;for(let i=1;i<t.length;i++){const s=t[i];if(!(r instanceof Je))return;r=r.get(s)}return r}function dT(n,e){switch(e.type){case"string":case"boolean":case"integer":case"double":case"long":case"date":case"bytes":case"null":return mT(n,e);case"object":if(!(n instanceof Je))return{valid:!1,errors:[{path:e.path,message:`expected object at path ${e.path}`}]};break;case"array":if(!(n instanceof Me))return{valid:!1,errors:[{path:e.path,message:`expected array at path ${e.path}`}]};break;case"yorkie.Text":if(!(n instanceof lt))return{valid:!1,errors:[{path:e.path,message:`expected yorkie.Text at path ${e.path}`}]};break;case"yorkie.Tree":if(!(n instanceof ut))return{valid:!1,errors:[{path:e.path,message:`expected yorkie.Tree at path ${e.path}`}]};break;case"yorkie.Counter":if(!(n instanceof Ze))return{valid:!1,errors:[{path:e.path,message:`expected yorkie.Counter at path ${e.path}`}]};break;default:throw new Error(`Unknown rule type: ${e.type}`)}return{valid:!0}}function hT(n){switch(n){case"null":return te.Null;case"boolean":return te.Boolean;case"integer":return te.Integer;case"long":return te.Long;case"double":return te.Double;case"string":return te.String;case"bytes":return te.Bytes;case"date":return te.Date;default:throw new Error(`Unknown primitive type: ${n}`)}}function mT(n,e){return n instanceof ue&&n.getType()===hT(e.type)?{valid:!0}:{valid:!1,errors:[{path:e.path,message:`expected ${e.type} at path ${e.path}`}]}}const gT="yorkie-devtools-panel",pT="yorkie-devtools-sdk";function yT(n){return[Ae.StatusChanged,Ae.Snapshot,Ae.LocalChange,Ae.RemoteChange,Ae.Initialized,Ae.Watched,Ae.Unwatched,Ae.PresenceChanged].includes(n.type)}function vT(n){return n.every(yT)}let ds="disconnected";const Tg=new Map,fl=new Map;typeof window<"u"&&(window.docEventsForReplayByDocKey=fl);function Ha(n,e){(e!=null&&e.force||ds!=="disconnected")&&window.postMessage({source:pT,...n},"*")}function wT(n){if(!n.isEnableDevtools()||typeof window>"u"||Tg.has(n.getKey()))return;fl.set(n.getKey(),[]);const e=n.subscribe("all",t=>{vT(t)&&(fl.get(n.getKey()).push(t),ds==="synced"&&Ha({msg:"doc::sync::partial",docKey:n.getKey(),event:t}))});Tg.set(n.getKey(),[e]),Ha({msg:"refresh-devtools"},{force:!0}),window.addEventListener("message",t=>{var i;if(((i=t.data)==null?void 0:i.source)!==gT)return;switch(t.data.msg){case"devtools::connect":if(ds!=="disconnected")break;ds="connected",Ha({msg:"doc::available",docKey:n.getKey()}),L.info(`[YD] Devtools connected. Doc: ${n.getKey()}`);break;case"devtools::disconnect":ds="disconnected",L.info(`[YD] Devtools disconnected. Doc: ${n.getKey()}`);break;case"devtools::subscribe":ds="synced",Ha({msg:"doc::sync::full",docKey:n.getKey(),events:fl.get(n.getKey())}),L.info(`[YD] Devtools subscribed. Doc: ${n.getKey()}`);break}})}var ai=(n=>(n.Detached="detached",n.Attached="attached",n.Removed="removed",n))(ai||{}),Ae=(n=>(n.StatusChanged="status-changed",n.ConnectionChanged="connection-changed",n.SyncStatusChanged="sync-status-changed",n.Snapshot="snapshot",n.LocalChange="local-change",n.RemoteChange="remote-change",n.Initialized="initialized",n.Watched="watched",n.Unwatched="unwatched",n.PresenceChanged="presence-changed",n.AuthError="auth-error",n))(Ae||{}),Fo=(n=>(n.Connected="connected",n.Disconnected="disconnected",n))(Fo||{}),nd=(n=>(n.Synced="synced",n.SyncFailed="sync-failed",n))(nd||{});class hi{constructor(e,t){l(this,"key");l(this,"status");l(this,"opts");l(this,"maxSizeLimit");l(this,"schemaRules");l(this,"changeID");l(this,"checkpoint");l(this,"localChanges");l(this,"root");l(this,"presences");l(this,"clone");l(this,"internalHistory");l(this,"isUpdating");l(this,"onlineClients");l(this,"eventStream");l(this,"eventStreamObserver");l(this,"history");this.key=e,this.status="detached",this.opts=t||{},this.maxSizeLimit=0,this.schemaRules=[],this.changeID=ck,this.checkpoint=fk,this.localChanges=[],this.root=da.create(),this.presences=new Map,this.onlineClients=new Set,this.internalHistory=new uT,this.isUpdating=!1,this.eventStream=Wv(r=>this.eventStreamObserver=r),this.history={canUndo:()=>this.internalHistory.hasUndo()&&!this.isUpdating,canRedo:()=>this.internalHistory.hasRedo()&&!this.isUpdating,undo:()=>this.executeUndoRedo(!0),redo:()=>this.executeUndoRedo(!1)},wT(this)}update(e,t){var a,u,c;if(this.getStatus()==="removed")throw new T(k.ErrDocumentRemoved,`${this.key} is removed`);this.ensureClone();const r=this.changeID.getActorID(),i=Jo.create(this.changeID,this.clone.root,this.clone.presences.get(r)||{},t);try{const d=wg(i,this.clone.root.getObject());this.presences.has(r)||this.clone.presences.set(r,{}),this.isUpdating=!0,e(d,new Sg(i,this.clone.presences.get(r)))}catch(d){throw this.clone=void 0,d}finally{this.isUpdating=!1}const s=this.getSchemaRules();if(!i.isPresenceOnlyChange()&&s.length){const d=cT((a=this.clone)==null?void 0:a.root.getObject(),s);if(!d.valid)throw this.clone=void 0,new T(k.ErrDocumentSchemaValidationFailed,`schema validation failed: ${(u=d.errors)==null?void 0:u.map(h=>h.message).join(", ")}`)}const o=ek((c=this.clone)==null?void 0:c.root.getDocSize());if(!i.isPresenceOnlyChange()&&this.maxSizeLimit>0&&this.maxSizeLimit<o)throw this.clone=void 0,new T(k.ErrDocumentSizeExceedsLimit,`document size exceeded: ${o} > ${this.maxSizeLimit}`);if(i.hasChange()){L.isEnabled(He.Trivial)&&L.trivial(`trying to update a local change: ${this.toJSON()}`);const d=i.toChange(),{opInfos:h,reverseOps:m}=d.execute(this.root,this.presences,se.Local);for(const v of d.getOperations())v instanceof ni&&this.internalHistory.reconcileCreatedAt(v.getCreatedAt(),v.getValue().getCreatedAt());const p=i.getReversePresence();p&&m.push({type:"presence",value:p}),this.localChanges.push(d),m.length&&this.internalHistory.pushUndo(m),h.length&&this.internalHistory.clearRedo(),this.changeID=i.getNextID();const w=[];h.length&&w.push({type:"local-change",source:se.Local,value:{message:d.getMessage()||"",operations:h,actor:r,clientSeq:d.getID().getClientSeq(),serverSeq:d.getID().getServerSeq()},rawChange:this.isEnableDevtools()?d.toStruct():void 0}),d.hasPresenceChange()&&w.push({type:"presence-changed",source:se.Local,value:{clientID:r,presence:this.getPresence(r)}}),this.publish(w),L.isEnabled(He.Trivial)&&L.trivial(`after update a local change: ${this.toJSON()}`)}}subscribe(e,t,r,i){if(typeof e=="string"){if(typeof t!="function")throw new T(k.ErrInvalidArgument,"Second argument must be a callback function");if(e==="presence"){const a=t;return this.eventStream.subscribe(u=>{for(const c of u)c.type!=="initialized"&&c.type!=="watched"&&c.type!=="unwatched"&&c.type!=="presence-changed"||a(c)},r,i)}if(e==="my-presence"){const a=t;return this.eventStream.subscribe(u=>{for(const c of u)c.type!=="initialized"&&c.type!=="presence-changed"||c.type==="presence-changed"&&c.value.clientID!==this.changeID.getActorID()||a(c)},r,i)}if(e==="others"){const a=t;return this.eventStream.subscribe(u=>{for(const c of u)c.type!=="watched"&&c.type!=="unwatched"&&c.type!=="presence-changed"||c.value.clientID!==this.changeID.getActorID()&&a(c)},r,i)}if(e==="connection"){const a=t;return this.eventStream.subscribe(u=>{for(const c of u)c.type==="connection-changed"&&a(c)},r,i)}if(e==="status"){const a=t;return this.eventStream.subscribe(u=>{for(const c of u)c.type==="status-changed"&&a(c)},r,i)}if(e==="sync"){const a=t;return this.eventStream.subscribe(u=>{for(const c of u)c.type==="sync-status-changed"&&a(c)},r,i)}if(e==="auth-error"){const a=t;return this.eventStream.subscribe(u=>{for(const c of u)c.type==="auth-error"&&a(c)},r)}if(e==="all"){const a=t;return this.eventStream.subscribe(a,r,i)}const s=e,o=t;return this.eventStream.subscribe(a=>{for(const u of a){if(u.type!=="local-change"&&u.type!=="remote-change")continue;const c=[];for(const d of u.value.operations)this.isSameElementOrChildOf(d.path,s)&&c.push(d);c.length&&o({...u,value:{...u.value,operations:c}})}},r,i)}if(typeof e=="function"){const s=e,o=t,a=r;return this.eventStream.subscribe(u=>{for(const c of u)c.type!=="snapshot"&&c.type!=="local-change"&&c.type!=="remote-change"||s(c)},o,a)}throw new T(k.ErrInvalidArgument,`"${e}" is not a valid`)}publish(e){this.eventStreamObserver&&this.eventStreamObserver.next(e)}applyChangePack(e){e.hasSnapshot()?this.applySnapshot(e.getCheckpoint().getServerSeq(),e.getVersionVector(),e.getSnapshot(),e.getCheckpoint().getClientSeq()):(this.applyChanges(e.getChanges(),se.Remote),this.removePushedLocalChanges(e.getCheckpoint().getClientSeq())),this.checkpoint=this.checkpoint.forward(e.getCheckpoint()),e.hasSnapshot()||this.garbageCollect(e.getVersionVector()),e.getIsRemoved()&&this.applyStatus("removed"),L.isEnabled(He.Trivial)&&L.trivial(`${this.root.toJSON()}`)}getCheckpoint(){return this.checkpoint}getChangeID(){return this.changeID}hasLocalChanges(){return this.localChanges.length>0}ensureClone(){this.clone||(this.clone={root:this.root.deepcopy(),presences:$t(this.presences)})}createChangePack(){const e=Array.from(this.localChanges),t=this.checkpoint.increaseClientSeq(e.length);return bu.create(this.key,t,!1,e,this.getVersionVector())}setActor(e){for(const t of this.localChanges)t.setActor(e);this.changeID=this.changeID.setActor(e)}isEnableDevtools(){return!!this.opts.enableDevtools}getKey(){return this.key}getStatus(){return this.status}getClone(){return this.clone}getCloneRoot(){if(this.clone)return this.clone.root.getObject()}getRoot(){this.ensureClone();const e=Jo.create(this.changeID.next(),this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});return wg(e,this.clone.root.getObject())}getDocSize(){return this.root.getDocSize()}getMaxSizePerDocument(){return this.maxSizeLimit}setMaxSizePerDocument(e){this.maxSizeLimit=e}getSchemaRules(){return this.schemaRules}setSchemaRules(e){this.schemaRules=e}garbageCollect(e){return this.opts.disableGC?0:(this.clone&&this.clone.root.garbageCollect(e),this.root.garbageCollect(e))}getRootObject(){return this.root.getObject()}getGarbageLen(){return this.root.getGarbageLen()}getRootCRDT(){return this.root}getGarbageLenFromClone(){return this.clone.root.getGarbageLen()}toJSON(){return this.root.toJSON()}toSortedJSON(){return this.root.toSortedJSON()}getStats(){return this.root.getStats()}toJSForTest(){return{...this.getRoot().toJSForTest(),key:"root"}}applySnapshot(e,t,r,i=-1){const{root:s,presences:o}=oe.bytesToSnapshot(r);this.root=new da(s),this.presences=o,this.changeID=this.changeID.setClocks(t.maxLamport(),t),this.clone=void 0,this.removePushedLocalChanges(i),this.applyChanges(this.localChanges,se.Local),this.publish([{type:"snapshot",source:se.Remote,value:{serverSeq:e.toString(),snapshot:this.isEnableDevtools()?oe.bytesToHex(r):void 0,snapshotVector:oe.versionVectorToHex(t)}}])}applyChanges(e,t){L.isEnabled(He.Debug)&&L.debug(`trying to apply ${e.length} remote changes.elements:${this.root.getElementMapSize()}, removeds:${this.root.getGarbageElementSetSize()}`),L.isEnabled(He.Trivial)&&L.trivial(e.map(r=>`${r.getID().toTestString()}	${r.toTestString()}`).join(`
`));for(const r of e)this.applyChange(r,t);L.isEnabled(He.Debug)&&L.debug(`after appling ${e.length} remote changes.elements:${this.root.getElementMapSize()},  removeds:${this.root.getGarbageElementSetSize()}`)}applyChange(e,t){this.ensureClone(),e.execute(this.clone.root,this.clone.presences,t);const r=[],i=e.getID().getActorID();if(e.hasPresenceChange()&&this.onlineClients.has(i)){const o=e.getPresenceChange();switch(o.type){case dn.Put:r.push(this.presences.has(i)?{type:"presence-changed",source:t,value:{clientID:i,presence:o.presence}}:{type:"watched",source:se.Remote,value:{clientID:i,presence:o.presence}});break;case dn.Clear:r.push({type:"unwatched",source:se.Remote,value:{clientID:i,presence:this.getPresence(i)}}),this.removeOnlineClient(i);break}}const{opInfos:s}=e.execute(this.root,this.presences,t);if(this.changeID=this.changeID.syncClocks(e.getID()),s.length){const o=this.isEnableDevtools()?e.toStruct():void 0;r.push(t===se.Remote?{type:"remote-change",source:t,value:{actor:i,clientSeq:e.getID().getClientSeq(),serverSeq:e.getID().getServerSeq(),message:e.getMessage()||"",operations:s},rawChange:o}:{type:"local-change",source:t,value:{actor:i,clientSeq:e.getID().getClientSeq(),serverSeq:e.getID().getServerSeq(),message:e.getMessage()||"",operations:s},rawChange:o})}r.length&&this.publish(r)}applyWatchStream(e){if(e.body.case==="initialization"){const t=e.body.value.clientIds,r=new Set;for(const i of t)i!==this.changeID.getActorID()&&r.add(i);this.setOnlineClients(r),this.publish([{type:"initialized",source:se.Local,value:this.getPresences()}]);return}if(e.body.case==="event"){const{type:t,publisher:r}=e.body.value,i=[];if(t===Ks.DOCUMENT_WATCHED){if(this.onlineClients.has(r)&&this.hasPresence(r))return;this.addOnlineClient(r),this.hasPresence(r)&&i.push({type:"watched",source:se.Remote,value:{clientID:r,presence:this.getPresence(r)}})}else if(t===Ks.DOCUMENT_UNWATCHED){const s=this.getPresence(r);this.removeOnlineClient(r),s&&i.push({type:"unwatched",source:se.Remote,value:{clientID:r,presence:s}})}i.length&&this.publish(i)}}applyStatus(e){this.status=e,e==="detached"&&this.setActor(nh),this.publish([{source:e==="removed"?se.Remote:se.Local,type:"status-changed",value:e==="attached"?{status:e,actorID:this.changeID.getActorID()}:{status:e}}])}applyDocEventsForReplay(e){for(const t of e){if(t.type==="status-changed"){this.applyStatus(t.value.status),t.value.status==="attached"&&this.setActor(t.value.actorID);continue}if(t.type==="snapshot"){const{snapshot:r,serverSeq:i,snapshotVector:s}=t.value;if(!r)continue;this.applySnapshot(BigInt(i),oe.hexToVersionVector(s),oe.hexToBytes(r));continue}if(t.type==="local-change"||t.type==="remote-change"){if(!t.rawChange)continue;const r=Qs.fromStruct(t.rawChange);this.applyChange(r,t.source)}if(t.type==="initialized"){const r=new Set;for(const{clientID:i,presence:s}of t.value)r.add(i),this.presences.set(i,s);this.setOnlineClients(r)}else if(t.type==="watched"){const{clientID:r,presence:i}=t.value;this.addOnlineClient(r),this.presences.set(r,i)}else if(t.type==="unwatched"){const{clientID:r}=t.value;this.removeOnlineClient(r),this.presences.delete(r)}else if(t.type==="presence-changed"){const{clientID:r,presence:i}=t.value;this.presences.set(r,i)}}}getValueByPath(e){if(!e.startsWith("$"))throw new T(k.ErrInvalidArgument,'path must start with "$"');const t=e.split(".");t.shift();let r=this.getRoot();for(const i of t)if(r=r[i],!r)return;return r}setOnlineClients(e){this.onlineClients=e}resetOnlineClients(){this.onlineClients=new Set}addOnlineClient(e){this.onlineClients.add(e)}removeOnlineClient(e){this.onlineClients.delete(e)}hasPresence(e){return this.presences.has(e)}getMyPresence(){if(this.status!=="attached")return{};const e=this.presences.get(this.changeID.getActorID());return e?$t(e):{}}getOthersPresences(){const e=[],t=this.changeID.getActorID();for(const r of this.onlineClients)r!==t&&this.presences.has(r)&&e.push({clientID:r,presence:$t(this.presences.get(r))});return e}getPresence(e){if(e===this.changeID.getActorID())return this.getMyPresence();if(!this.onlineClients.has(e))return;const t=this.presences.get(e);return t?$t(t):void 0}getPresences(){const e=[];e.push({clientID:this.changeID.getActorID(),presence:$t(this.getMyPresence())});for(const t of this.onlineClients)this.presences.has(t)&&e.push({clientID:t,presence:$t(this.presences.get(t))});return e}getPresenceForTest(e){const t=this.presences.get(e);return t?$t(t):void 0}getSelfForTest(){return{clientID:this.getChangeID().getActorID(),presence:this.getMyPresence()}}getOthersForTest(){const e=this.getChangeID().getActorID();return this.getPresences().filter(t=>t.clientID!==e).sort((t,r)=>t.clientID>r.clientID?1:-1)}getUndoStackForTest(){return this.internalHistory.getUndoStackForTest()}getRedoStackForTest(){return this.internalHistory.getRedoStackForTest()}getVersionVector(){return this.changeID.getVersionVector()}isSameElementOrChildOf(e,t){if(t===e)return!0;const r=e.split(".");return t.split(".").every((i,s)=>i===r[s])}removePushedLocalChanges(e){for(;this.localChanges.length&&!(this.localChanges[0].getID().getClientSeq()>e);)this.localChanges.shift()}executeUndoRedo(e){if(this.isUpdating)throw new T(k.ErrRefused,`${e?"Undo":"Redo"} is not allowed during an update`);const t=e?this.internalHistory.popUndo():this.internalHistory.popRedo();if(!t)throw new T(k.ErrRefused,`There is no operation to be ${e?"undone":"redone"}`);this.ensureClone();const r=Jo.create(this.changeID,this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});for(const d of t){if(!(d instanceof Gt)){new Sg(r,$t(this.clone.presences.get(this.changeID.getActorID()))).set(d.value,{addToHistory:!0});continue}const h=r.issueTimeTicket();if(d.setExecutedAt(h),d instanceof ni){const m=d.getCreatedAt();d.getValue().setCreatedAt(h),this.internalHistory.reconcileCreatedAt(m,h)}else if(d instanceof Ri){const m=d.getValue().getCreatedAt();d.getValue().setCreatedAt(h),this.internalHistory.reconcileCreatedAt(m,h)}r.push(d)}const i=r.toChange();i.execute(this.clone.root,this.clone.presences,se.UndoRedo);const{opInfos:s,reverseOps:o}=i.execute(this.root,this.presences,se.UndoRedo),a=r.getReversePresence();if(a&&o.push({type:"presence",value:a}),o.length&&(e?this.internalHistory.pushRedo(o):this.internalHistory.pushUndo(o)),!i.hasPresenceChange()&&!s.length)return;this.localChanges.push(i),this.changeID=r.getNextID();const u=this.changeID.getActorID(),c=[];s.length&&c.push({type:"local-change",source:se.UndoRedo,value:{message:i.getMessage()||"",operations:s,actor:u,clientSeq:i.getID().getClientSeq(),serverSeq:i.getID().getServerSeq()},rawChange:this.isEnableDevtools()?i.toStruct():void 0}),i.hasPresenceChange()&&c.push({type:"presence-changed",source:se.UndoRedo,value:{clientID:u,presence:this.getPresence(u)}}),this.publish(c)}}class Ig{constructor(e,t,r,i){l(this,"resource");l(this,"resourceID");l(this,"syncMode");l(this,"changeEventReceived");l(this,"lastHeartbeatTime");l(this,"reconnectStreamDelay");l(this,"cancelled");l(this,"watchStream");l(this,"watchLoopTimerID");l(this,"watchAbortController");this.reconnectStreamDelay=e,this.resource=t,this.resourceID=r,this.syncMode=i,this.changeEventReceived=i!==void 0?!1:void 0,this.lastHeartbeatTime=Date.now(),this.cancelled=!1}changeSyncMode(e){this.syncMode=e}needRealtimeSync(){return this.syncMode===xo.RealtimeSyncOff?!1:this.syncMode===xo.RealtimePushOnly?this.resource.hasLocalChanges():this.syncMode!==xo.Manual&&(this.resource.hasLocalChanges()||(this.changeEventReceived??!1))}needSync(e){return this.resource instanceof hi?this.needRealtimeSync():this.syncMode===xo.Manual?!1:Date.now()-this.lastHeartbeatTime>=e}updateHeartbeatTime(){this.lastHeartbeatTime=Date.now()}async runWatchLoop(e){const t=async()=>{if(this.watchStream)return Promise.resolve();this.watchLoopTimerID&&(clearTimeout(this.watchLoopTimerID),this.watchLoopTimerID=void 0);try{[this.watchStream,this.watchAbortController]=await e(()=>{this.watchStream=void 0,this.watchAbortController=void 0,this.cancelled||(this.watchLoopTimerID=setTimeout(t,this.reconnectStreamDelay))})}catch{}};await t()}cancelWatchStream(){this.cancelled=!0,this.watchStream&&this.watchAbortController&&(this.watchAbortController.abort(),this.watchStream=void 0,this.watchAbortController=void 0),clearTimeout(this.watchLoopTimerID),this.watchLoopTimerID=void 0}}function ST(n,e){let t=e;return{authInterceptor:s=>async o=>(n&&o.header.set("x-api-key",n),t&&o.header.set("authorization",t),await s(o)),setToken:s=>{t=s}}}const kT="@yorkie-js/sdk",TT="0.6.40",xg={name:kT,version:TT};function IT(n){return e=>async t=>(n?t.header.set("x-yorkie-user-agent",n):t.header.set("x-yorkie-user-agent",xg.name+"/"+xg.version),await e(t))}const xT=n=>{try{if(JSON.stringify(n)===void 0)return!1}catch{return!1}return!0};var Io=(n=>(n.Detached="detached",n.Attached="attached",n.Removed="removed",n))(Io||{}),Es=(n=>(n.PresenceChanged="presence-changed",n.Initialized="initialized",n.Broadcast="broadcast",n.LocalBroadcast="local-broadcast",n.AuthError="auth-error",n))(Es||{});const yo=".";class li{constructor(e){l(this,"key");l(this,"status");l(this,"actorID");l(this,"sessionID");l(this,"count");l(this,"seq");l(this,"eventStream");l(this,"eventStreamObserver");this.validateChannelKey(e),this.key=e,this.status="detached",this.count=0,this.seq=0,this.eventStream=Wv(t=>this.eventStreamObserver=t)}getKey(){return this.key}getFirstKeyPath(){return this.key.split(yo)[0]}getStatus(){return this.status}applyStatus(e){this.status=e}isAttached(){return this.status==="attached"}getActorID(){return this.actorID}setActor(e){this.actorID=e}getSessionID(){return this.sessionID}setSessionID(e){this.sessionID=e}getPresenceCount(){return this.count}updateCount(e,t){return t===0||t>this.seq?(this.count=e,this.seq=t,!0):!1}hasLocalChanges(){return!1}subscribe(e,t){if(typeof e=="function")return this.eventStream.subscribe(e);const r=e,i=t;if(!i)throw new Error("callback is required when subscribing to specific event type or topic");if(r==="broadcast")return this.eventStream.subscribe(o=>{o.type==="broadcast"&&i(o)});if(r==="local-broadcast")return this.eventStream.subscribe(o=>{o.type==="local-broadcast"&&i(o)});if(r==="auth-error")return this.eventStream.subscribe(o=>{o.type==="auth-error"&&i(o)});if(r==="presence")return this.eventStream.subscribe(o=>{(o.type==="presence-changed"||o.type==="initialized")&&i(o)});if(r==="all")return this.eventStream.subscribe(i);const s=r;return this.eventStream.subscribe(o=>{o.type==="broadcast"&&o.topic===s&&i(o)})}publish(e){this.eventStreamObserver&&this.eventStreamObserver.next(e)}broadcast(e,t,r){if(this.status!=="attached")throw new Error(`channel is not attached: ${this.status}`);if(!this.actorID)throw new Error("actorID is not set");this.publish({type:"local-broadcast",clientID:this.actorID,topic:e,payload:t,options:r})}validateChannelKey(e){if(e==="")throw new Error("channel key must not be empty");if(e.includes(" "))throw new Error("channel key must not contain a whitespace");if(e.startsWith(yo))throw new Error("channel key must not start with a period");if(e.endsWith(yo))throw new Error("channel key must not end with a period");if(e.includes(`${yo}${yo}`))throw new Error("channel key path must not empty")}}var xo=(n=>(n.Manual="manual",n.Realtime="realtime",n.RealtimePushOnly="realtime-pushonly",n.RealtimeSyncOff="realtime-syncoff",n))(xo||{});const cs={rpcAddr:"https://api.yorkie.dev",syncLoopDuration:50,retrySyncLoopDelay:1e3,reconnectStreamDelay:1e3,channelHeartbeatInterval:3e4},mc={maxRetries:1/0,initialRetryInterval:1e3,maxBackoff:2e4};class Yv{constructor(e){l(this,"id");l(this,"key");l(this,"metadata");l(this,"status");l(this,"attachmentMap");l(this,"apiKey");l(this,"authTokenInjector");l(this,"conditions");l(this,"syncLoopDuration");l(this,"reconnectStreamDelay");l(this,"retrySyncLoopDelay");l(this,"channelHeartbeatInterval");l(this,"rpcClient");l(this,"setAuthToken");l(this,"taskQueue");l(this,"processing",!1);l(this,"keepalive",!1);e=e||cs;const t=e.rpcAddr||cs.rpcAddr;this.key=e.key||Kv(),this.metadata=e.metadata||{},this.status="deactivated",this.attachmentMap=new Map,this.apiKey=e.apiKey||"",this.authTokenInjector=e.authTokenInjector,this.conditions={SyncLoop:!1,WatchLoop:!1},this.syncLoopDuration=e.syncLoopDuration??cs.syncLoopDuration,this.reconnectStreamDelay=e.reconnectStreamDelay??cs.reconnectStreamDelay,this.retrySyncLoopDelay=e.retrySyncLoopDelay??cs.retrySyncLoopDelay,this.channelHeartbeatInterval=e.channelHeartbeatInterval??cs.channelHeartbeatInterval;const{authInterceptor:r,setToken:i}=ST(this.apiKey);this.setAuthToken=i,this.rpcClient=IS(WS,KS({baseUrl:t,interceptors:[r,IT(e==null?void 0:e.userAgent)],fetch:(s,o)=>fetch(s,{...o,keepalive:this.keepalive})})),this.taskQueue=[]}async activate(){if(this.isActive())return Promise.resolve();if(this.authTokenInjector){const e=await this.authTokenInjector();this.setAuthToken(e)}return this.enqueueTask(async()=>{try{const e=await this.rpcClient.activateClient({clientKey:this.key,metadata:this.metadata},{headers:{"x-shard-key":`${this.apiKey}/${this.key}`}});this.id=e.clientId,this.status="activated",this.runSyncLoop(),L.info(`[AC] c:"${this.getKey()}" activated, id:"${this.id}"`),typeof window<"u"&&window.addEventListener("beforeunload",async()=>{await this.deactivate({keepalive:!0})})}catch(e){throw L.error(`[AC] c:"${this.getKey()}" err :`,e),await this.handleConnectError(e),e}})}deactivate(e={keepalive:!1,synchronous:!1}){if(this.status==="deactivated")return Promise.resolve();const t=async()=>{try{await this.rpcClient.deactivateClient({clientId:this.id,synchronous:e.synchronous},{headers:{"x-shard-key":`${this.apiKey}/${this.key}`}}),this.deactivateInternal(),L.info(`[DC] c"${this.getKey()}" deactivated`)}catch(r){throw L.error(`[DC] c:"${this.getKey()}" err :`,r),await this.handleConnectError(r),r}};if(e.keepalive){this.keepalive=!0;const r=t();return this.keepalive=!1,r}return this.enqueueTask(t)}has(e){return this.attachmentMap.has(e)}attach(e,t){return e instanceof li?this.attachChannel(e,t):this.attachDocument(e,t)}attachDocument(e,t={}){if(!this.isActive())throw new T(k.ErrClientNotActivated,`${this.key} is not active`);if(e.getStatus()!==ai.Detached)throw new T(k.ErrNotDetached,`${e.getKey()} is not detached`);e.setActor(this.id),e.update((i,s)=>s.set(t.initialPresence||{}));const r=t.syncMode??"realtime";return this.enqueueTask(async()=>{try{const i=await this.rpcClient.attachDocument({clientId:this.id,changePack:oe.toChangePack(e.createChangePack()),schemaKey:t.schema},{headers:{"x-shard-key":`${this.apiKey}/${e.getKey()}`}});(i.maxSizePerDocument??0)>0&&e.setMaxSizePerDocument(i.maxSizePerDocument),i.schemaRules.length>0&&e.setSchemaRules(oe.fromSchemaRules(i.schemaRules));const o=oe.fromChangePack(i.changePack);if(e.applyChangePack(o),e.getStatus()===ai.Removed)return e;e.applyStatus(ai.Attached),this.attachmentMap.set(e.getKey(),new Ig(this.reconnectStreamDelay,e,i.documentId,r)),r!=="manual"&&await this.runWatchLoop(e.getKey()),L.info(`[AD] c:"${this.getKey()}" attaches d:"${e.getKey()}"`);const a=e.getRootObject();if(t.initialRoot){const u=t.initialRoot;e.update(c=>{for(const[d,h]of Object.entries(u))if(!a.has(d)){const m=d;c[m]=h}})}return e}catch(i){throw L.error(`[AD] c:"${this.getKey()}" err :`,i),await this.handleConnectError(i),i}})}detach(e,t){return e instanceof li?this.detachChannel(e):this.detachDocument(e,t)}detachDocument(e,t={keepalive:!1}){if(!this.isActive())throw new T(k.ErrClientNotActivated,`${this.key} is not active`);const r=this.attachmentMap.get(e.getKey());if(!r)throw new T(k.ErrNotAttached,`${e.getKey()} is not attached`);e.update((s,o)=>o.clear());const i=async()=>{try{const s=await this.rpcClient.detachDocument({clientId:this.id,documentId:r.resourceID,changePack:oe.toChangePack(e.createChangePack()),removeIfNotAttached:t.removeIfNotAttached??!1},{headers:{"x-shard-key":`${this.apiKey}/${e.getKey()}`}}),o=oe.fromChangePack(s.changePack);return e.applyChangePack(o),e.getStatus()!==ai.Removed&&e.applyStatus(ai.Detached),this.detachInternal(e.getKey()),L.info(`[DD] c:"${this.getKey()}" detaches d:"${e.getKey()}"`),e}catch(s){throw L.error(`[DD] c:"${this.getKey()}" err :`,s),await this.handleConnectError(s),s}};if(t.keepalive){this.keepalive=!0;const s=i();return this.keepalive=!1,s}return this.enqueueTask(i)}async attachChannel(e,t={}){if(!this.isActive())throw new T(k.ErrClientNotActivated,`${this.key} is not active`);if(e.getStatus()!==Io.Detached)throw new T(k.ErrNotDetached,`${e.getKey()} is not detached`);e.setActor(this.id);const r=async()=>{try{const i=await this.rpcClient.attachChannel({clientId:this.id,channelKey:e.getKey()},{headers:{"x-shard-key":`${this.apiKey}/${e.getFirstKeyPath()}`}});e.setSessionID(i.sessionId),e.updateCount(Number(i.count),0),e.applyStatus(Io.Attached);const s=t.isRealtime!==!1?"realtime":"manual",o=new Ig(this.reconnectStreamDelay,e,i.sessionId,s);return e.subscribe("local-broadcast",a=>{const{topic:u,payload:c,options:d}=a;this.broadcast(e.getKey(),u,c,d).catch(h=>{d!=null&&d.error&&d.error(h),L.error(`[BC] c:"${this.getKey()}" failed: ${h}`)})}),this.attachmentMap.set(e.getKey(),o),s==="realtime"&&await this.runWatchLoop(e.getKey()),L.info(`[AP] c:"${this.getKey()}" attaches p:"${e.getKey()}" mode:${s} count:${e.getPresenceCount()}`),e}catch(i){throw L.error(`[AP] c:"${this.getKey()}" err :`,i),await this.handleConnectError(i),i}};return this.enqueueTask(r)}async detachChannel(e){if(!this.isActive())throw new T(k.ErrClientNotActivated,`${this.key} is not active`);if(!this.attachmentMap.has(e.getKey()))throw new T(k.ErrNotAttached,`${e.getKey()} is not attached`);const t=async()=>{try{const r=await this.rpcClient.detachChannel({clientId:this.id,channelKey:e.getKey(),sessionId:e.getSessionID()},{headers:{"x-shard-key":`${this.apiKey}/${e.getFirstKeyPath()}`}});return e.updateCount(Number(r.count),0),e.applyStatus(Io.Detached),this.detachInternal(e.getKey()),L.info(`[DP] c:"${this.getKey()}" detaches p:"${e.getKey()}" count:${e.getPresenceCount()}`),e}catch(r){throw L.error(`[DP] c:"${this.getKey()}" err :`,r),await this.handleConnectError(r),r}};return this.enqueueTask(t)}async changeSyncMode(e,t){if(!this.isActive())throw new T(k.ErrClientNotActivated,`${this.key} is not active`);const r=this.attachmentMap.get(e.getKey());if(!r)throw new T(k.ErrNotAttached,`${e.getKey()} is not attached`);const i=r.syncMode;return i===t?e:(r.changeSyncMode(t),t==="manual"?(r.cancelWatchStream(),e):(t==="realtime"&&(r.changeEventReceived=!0),i==="manual"&&await this.runWatchLoop(e.getKey()),e))}sync(e){if(!this.isActive())throw new T(k.ErrClientNotActivated,`${this.key} is not active`);if(e instanceof li){const t=this.attachmentMap.get(e.getKey());if(!t)throw new T(k.ErrNotAttached,`${e.getKey()} is not attached`);return this.enqueueTask(async()=>this.syncInternal(t).catch(async r=>{throw L.error(`[SY] c:"${this.getKey()}" err :`,r),await this.handleConnectError(r),r}))}if(e instanceof hi){const t=this.attachmentMap.get(e.getKey());if(!t)throw new T(k.ErrNotAttached,`${e.getKey()} is not attached`);return this.enqueueTask(async()=>this.syncInternal(t,"realtime").catch(async r=>{throw L.error(`[SY] c:"${this.getKey()}" err :`,r),await this.handleConnectError(r),r}))}return this.enqueueTask(async()=>{const t=[];for(const[,r]of this.attachmentMap)r.syncMode!==void 0&&r.resource instanceof hi&&t.push(this.syncInternal(r,r.syncMode));return Promise.all(t).catch(async r=>{throw L.error(`[SY] c:"${this.getKey()}" err :`,r),await this.handleConnectError(r),r})})}remove(e){if(!this.isActive())throw new T(k.ErrClientNotActivated,`${this.key} is not active`);const t=this.attachmentMap.get(e.getKey());if(!t)throw new T(k.ErrNotAttached,`${e.getKey()} is not attached`);e.setActor(this.id);const r=oe.toChangePack(e.createChangePack());return r.isRemoved=!0,this.enqueueTask(async()=>{try{const i=await this.rpcClient.removeDocument({clientId:this.id,documentId:t.resourceID,changePack:r},{headers:{"x-shard-key":`${this.apiKey}/${e.getKey()}`}}),s=oe.fromChangePack(i.changePack);e.applyChangePack(s),this.detachInternal(e.getKey()),L.info(`[RD] c:"${this.getKey()}" removes d:"${e.getKey()}"`)}catch(i){throw L.error(`[RD] c:"${this.getKey()}" err :`,i),await this.handleConnectError(i),i}})}getID(){return this.id}getKey(){return this.key}isActive(){return this.status==="activated"}getStatus(){return this.status}getCondition(e){return this.conditions[e]}async createRevision(e,t,r){if(!this.isActive())throw new T(k.ErrClientNotActivated,`${this.key} is not active`);const i=this.attachmentMap.get(e.getKey());if(!i)throw new T(k.ErrNotAttached,`${e.getKey()} is not attached`);const s=async()=>{try{const o=await this.rpcClient.createRevision({clientId:this.id,documentId:i.resourceID,label:t,description:r||""},{headers:{"x-shard-key":`${this.apiKey}/${e.getKey()}`}});if(!o.revision)throw new T(k.ErrInvalidArgument,"revision is not returned");return L.info(`[CR] c:"${this.getKey()}" creates revision d:"${e.getKey()}" l:"${t}"`),oe.toRevisionSummary(o.revision)}catch(o){throw L.error(`[CR] c:"${this.getKey()}" err :`,o),await this.handleConnectError(o),o}};return this.enqueueTask(s)}async listRevisions(e,t){if(!this.isActive())throw new T(k.ErrClientNotActivated,`${this.key} is not active`);const r=this.attachmentMap.get(e.getKey());if(!r)throw new T(k.ErrNotAttached,`${e.getKey()} is not attached`);const i=async()=>{try{const s=await this.rpcClient.listRevisions({projectId:"",documentId:r.resourceID,pageSize:(t==null?void 0:t.pageSize)||10,offset:(t==null?void 0:t.offset)||0,isForward:(t==null?void 0:t.isForward)??!1},{headers:{"x-shard-key":`${this.apiKey}/${e.getKey()}`}});return L.info(`[LR] c:"${this.getKey()}" lists revisions d:"${e.getKey()}" count:${s.revisions.length}`),s.revisions.map(oe.toRevisionSummary)}catch(s){throw L.error(`[LR] c:"${this.getKey()}" err :`,s),await this.handleConnectError(s),s}};return this.enqueueTask(i)}async restoreRevision(e,t){if(!this.isActive())throw new T(k.ErrClientNotActivated,`${this.key} is not active`);if(!this.attachmentMap.get(e.getKey()))throw new T(k.ErrNotAttached,`${e.getKey()} is not attached`);const i=async()=>{try{await this.rpcClient.restoreRevision({clientId:this.id,revisionId:t},{headers:{"x-shard-key":`${this.apiKey}/${e.getKey()}`}}),L.info(`[RR] c:"${this.getKey()}" restores revision d:"${e.getKey()}" r:"${t}"`)}catch(s){throw L.error(`[RR] c:"${this.getKey()}" err :`,s),await this.handleConnectError(s),s}};return this.enqueueTask(i)}async broadcast(e,t,r,i){if(!this.isActive())throw new T(k.ErrClientNotActivated,`${this.key} is not active`);const s=this.attachmentMap.get(e);if(!s)throw new T(k.ErrNotAttached,`${e} is not attached`);if(!xT(r))throw new T(k.ErrInvalidArgument,"payload is not serializable");const o=s.resource,a=(i==null?void 0:i.maxRetries)??mc.maxRetries,u=mc.maxBackoff;let c=0;const d=m=>Math.min(mc.initialRetryInterval*2**m,u),h=async()=>this.enqueueTask(async()=>{try{await this.rpcClient.broadcast({clientId:this.id,channelKey:e,topic:t,payload:new TextEncoder().encode(JSON.stringify(r))},{headers:{"x-shard-key":`${this.apiKey}/${o.getFirstKeyPath()}`}}),L.info(`[BC] c:"${this.getKey()}" broadcasts p:"${e}" t:"${t}"`)}catch(m){if(L.error(`[BC] c:"${this.getKey()}" err:`,m),await this.handleConnectError(m))if(dc(m,k.ErrUnauthenticated)&&s.resource instanceof li&&s.resource.publish({type:Es.AuthError,reason:To(m).reason||"unauthenticated",method:"Broadcast"}),c<a)c++,setTimeout(()=>h(),d(c-1)),L.info(`[BC] c:"${this.getKey()}" retry attempt ${c}/${a}`);else throw L.error(`[BC] c:"${this.getKey()}" exceeded maximum retry attempts`),m}});return h()}runSyncLoop(){const e=async()=>{if(!this.isActive()){L.debug(`[SL] c:"${this.getKey()}" exit sync loop`),this.conditions.SyncLoop=!1;return}try{await this.enqueueTask(async()=>{const t=[];for(const[,r]of this.attachmentMap)r.needSync(this.channelHeartbeatInterval)&&(r.changeEventReceived!==void 0&&(r.changeEventReceived=!1),t.push(this.syncInternal(r,r.syncMode).catch(i=>{throw dc(i,k.ErrUnauthenticated)&&r.resource.publish([{type:Ae.AuthError,value:{reason:To(i).reason,method:"PushPull"}}]),i})));await Promise.all(t),setTimeout(e,this.syncLoopDuration)})}catch(t){L.error(`[SL] c:"${this.getKey()}" sync failed:`,t),await this.handleConnectError(t)?setTimeout(e,this.retrySyncLoopDelay):this.conditions.SyncLoop=!1}};L.debug(`[SL] c:"${this.getKey()}" run sync loop`),this.conditions.SyncLoop=!0,e()}async runWatchLoop(e){const t=this.attachmentMap.get(e);if(!t)throw new T(k.ErrNotAttached,`${e} is not attached`);return this.conditions.WatchLoop=!0,t.runWatchLoop(r=>{if(!this.isActive())return this.conditions.WatchLoop=!1,Promise.reject(new T(k.ErrClientNotActivated,`${this.key} is not active`));if(!this.attachmentMap.has(e))return this.conditions.WatchLoop=!1,Promise.reject(new T(k.ErrNotAttached,`${e} is not attached`));const i=new AbortController;return t.resource instanceof hi?this.createDocumentWatchStream(t,e,i,r):t.resource instanceof li?this.createChannelWatchStream(t,e,i,r):Promise.reject(new T(k.ErrClientNotActivated,`Unknown resource type for ${e}`))})}createDocumentWatchStream(e,t,r,i){const s=this.rpcClient.watchDocument({clientId:this.id,documentId:e.resourceID},{headers:{"x-shard-key":`${this.apiKey}/${t}`},signal:r.signal});return e.resource.publish([{type:Ae.ConnectionChanged,value:Fo.Connected}]),L.info(`[WD] c:"${this.getKey()}" watches d:"${t}"`),e.changeEventReceived!==void 0&&(e.changeEventReceived=!0),new Promise((o,a)=>{(async()=>{try{for await(const c of s)this.handleWatchDocumentResponse(e,c),c.body.case==="initialization"&&o([s,r]);e.resource.resetOnlineClients(),e.resource.publish([{type:Ae.Initialized,source:se.Local,value:e.resource.getPresences()}]),e.resource.publish([{type:Ae.ConnectionChanged,value:Fo.Disconnected}]),L.debug(`[WD] c:"${this.getKey()}" unwatches (stream ended)`),i()}catch(c){e.resource.resetOnlineClients(),e.resource.publish([{type:Ae.Initialized,source:se.Local,value:e.resource.getPresences()}]),e.resource.publish([{type:Ae.ConnectionChanged,value:Fo.Disconnected}]),L.debug(`[WD] c:"${this.getKey()}" unwatches`),await this.handleConnectError(c)?(dc(c,k.ErrUnauthenticated)&&e.resource.publish([{type:Ae.AuthError,value:{reason:To(c).reason,method:"WatchDocument"}}]),i()):this.conditions.WatchLoop=!1,a(c)}})()})}createChannelWatchStream(e,t,r,i){const s=this.rpcClient.watchChannel({clientId:this.id,channelKey:t},{headers:{"x-shard-key":`${this.apiKey}/${e.resource.getFirstKeyPath()}`},signal:r.signal});return L.info(`[WP] c:"${this.getKey()}" watches p:"${t}"`),new Promise((o,a)=>{(async()=>{try{let c=!0;for await(const d of s)this.handleWatchChannelResponse(e,d),c&&(c=!1,o([s,r]));L.debug(`[WP] c:"${this.getKey()}" p:"${t}" stream ended`),i()}catch(c){if(c instanceof Error&&c.name==="AbortError"){L.debug(`[WP] c:"${this.getKey()}" p:"${t}" stream aborted`);return}L.debug(`[WP] c:"${this.getKey()}" p:"${t}" err:`,c),await this.handleConnectError(c)?i():this.conditions.WatchLoop=!1,a(c)}})()})}handleWatchChannelResponse(e,t){const r=e.resource;if(t.body.case==="initialized"){const{count:i,seq:s}=t.body.value;r.updateCount(Number(i),Number(s))&&r.publish({type:Es.Initialized,count:Number(i)})}else if(t.body.case==="event"){const i=t.body.value;if(i.type===Pu.BROADCAST){const s=new TextDecoder;try{const o=JSON.parse(s.decode(i.payload));r.publish({type:Es.Broadcast,clientID:i.publisher,topic:i.topic,payload:o})}catch(o){L.error(`[WP] c:"${this.getKey()}" failed to parse broadcast payload:`,o)}return}r.updateCount(Number(i.count),Number(i.seq))&&r.publish({type:Es.PresenceChanged,count:Number(i.count)})}}handleWatchDocumentResponse(e,t){if(t.body.case==="event"&&t.body.value.type===Ks.DOCUMENT_CHANGED){e.changeEventReceived!==void 0&&(e.changeEventReceived=!0);return}e.resource.applyWatchStream(t)}deactivateInternal(){this.status="deactivated";for(const[e,t]of this.attachmentMap)this.detachInternal(e),t.resource instanceof hi?t.resource.applyStatus(ai.Detached):t.resource instanceof li&&t.resource.applyStatus(Io.Detached)}detachInternal(e){const t=this.attachmentMap.get(e);t&&(t.cancelWatchStream(),t.resource instanceof hi&&t.resource.resetOnlineClients(),this.attachmentMap.delete(e))}async syncInternal(e,t){const{resource:r}=e;if(r instanceof li){try{const a=await this.rpcClient.refreshChannel({clientId:this.id,channelKey:r.getKey(),sessionId:r.getSessionID()},{headers:{"x-shard-key":`${this.apiKey}/${r.getFirstKeyPath()}`}});r.updateCount(Number(a.count),0),e.updateHeartbeatTime(),L.debug(`[RP] c:"${this.getKey()}" refreshes p:"${r.getKey()}" mode:${e.syncMode}`)}catch(a){throw L.error(`[RP] c:"${this.getKey()}" err :`,a),a}return r}const i=r,{resourceID:s}=e,o=i.createChangePack();try{const a=await this.rpcClient.pushPullChanges({clientId:this.id,documentId:s,changePack:oe.toChangePack(o),pushOnly:t==="realtime-pushonly"},{headers:{"x-shard-key":`${this.apiKey}/${i.getKey()}`}}),u=oe.fromChangePack(a.changePack);if(u.hasChanges()&&(e.syncMode==="realtime-pushonly"||e.syncMode==="realtime-syncoff"))return i;i.applyChangePack(u),e.resource.publish([{type:Ae.SyncStatusChanged,value:nd.Synced}]),i.getStatus()===ai.Removed&&this.detachInternal(i.getKey());const c=i.getKey(),d=u.getChangeSize();return L.info(`[PP] c:"${this.getKey()}" sync d:"${c}", push:${o.getChangeSize()} pull:${d} cp:${u.getCheckpoint().toTestString()}`),i}catch(a){throw i.publish([{type:Ae.SyncStatusChanged,value:nd.SyncFailed}]),L.error(`[PP] c:"${this.getKey()}" err :`,a),a}}async handleConnectError(e){if(!(e instanceof ee))return!1;if(e.code===W.Canceled||e.code===W.Unknown||e.code===W.ResourceExhausted||e.code===W.Unavailable)return!0;if(fs(e)===k.ErrUnauthenticated){if(this.authTokenInjector){const t=await this.authTokenInjector(To(e).reason);this.setAuthToken(t)}return!0}return fs(e)===k.ErrTooManySubscribers?(L.error(`[WD] c:"${this.getKey()}" err :`,e.rawMessage),!0):(fs(e)===k.ErrTooManyAttachments||(fs(e)===k.ErrClientNotActivated||fs(e)===k.ErrClientNotFound)&&this.deactivateInternal(),!1)}enqueueTask(e){return new Promise((t,r)=>{this.taskQueue.push(()=>e().then(t).catch(r)),this.processing||this.processNext()})}async processNext(){if(this.taskQueue.length===0){this.processing=!1;return}try{this.processing=!0,await this.taskQueue.shift()()}catch{L.error(`[TQ] c:"${this.getKey()}" process failed, id:"${this.id}"`)}this.processNext()}}mn.Int,mn.Long;typeof globalThis<"u"&&(globalThis.yorkie={Client:Yv,Document:hi,Primitive:ue,Text:mh,Counter:gh,Tree:vh,Channel:li,ChannelEventType:Es,LogLevel:He,setLogLevel:tT,IntType:mn.Int,LongType:mn.Long});const AT="@yorkie-js/react",ET="0.6.40",Ag={name:AT,version:ET},_v=j.createContext({client:void 0,loading:!0,error:void 0});function CT(n){const[e,t]=j.useState(void 0),[r,i]=j.useState(!0),[s,o]=j.useState(void 0),[a,u]=j.useState(!1);return j.useEffect(()=>{u(!0)},[]),j.useEffect(()=>{i(!0),o(void 0);async function c(){if(a)try{const d=new Yv(n);await d.activate(),t(d)}catch(d){o(d instanceof Error?d:new Error("Failed to activate client"))}finally{i(!1)}}return c(),()=>{e!=null&&e.isActive()&&e.deactivate({keepalive:!0})}},[n.apiKey,n.rpcAddr,a]),{client:e,loading:r,error:s}}const NT=({children:n,...e})=>{const t=j.useMemo(()=>({userAgent:Ag.name+"/"+Ag.version,...e}),[e.apiKey,e.rpcAddr]),{client:r,loading:i,error:s}=CT(t);return z.jsx(_v.Provider,{value:{client:r,loading:i,error:s},children:n})},PT=()=>{const n=j.useContext(_v);if(!n)throw new Error("useYorkie must be used under YorkieProvider");return{client:n.client,loading:n.loading,error:n.error}};function DT(n){const e=new Set;let t=n;const r=()=>{e.forEach(u=>u(t))};return{subscribe:u=>(e.add(u),()=>e.delete(u)),getSnapshot:()=>t,setState:u=>{const c=t;t=typeof u=="function"?u(c):u,c!==t&&r()},destroy:()=>{e.clear()}}}const bT=n=>DT(n);function OT(n,e,t=Object.is){const r=j.useRef(e),i=j.useRef(t),s=j.useRef(void 0);r.current=e,i.current=t;const o=()=>{const a=n.getSnapshot(),u=r.current?r.current(a):a;return s.current!==void 0&&i.current(s.current,u)?s.current:(s.current=u,u)};return j.useSyncExternalStore(n.subscribe,o,o)}function LT(n,e,t,r,i,s,o,a){const u=j.useRef(i),c=j.useRef(s),[d,h]=j.useState(!1);j.useEffect(()=>{h(!0)},[]),j.useEffect(()=>{if(t){a.setState(v=>({...v,loading:!1,error:t}));return}if(!n||e||!d){a.setState(v=>({...v,loading:!0}));return}a.setState(v=>({...v,loading:!0,error:void 0}));const m=new hi(r,{enableDevtools:o}),p=[];p.push(m.subscribe(()=>{a.setState(v=>({...v,root:m.getRoot()}))})),p.push(m.subscribe("presence",()=>{a.setState(v=>({...v,presences:m.getPresences()}))})),p.push(m.subscribe("connection",v=>{a.setState(A=>({...A,connection:v.value}))}));async function w(){try{await(n==null?void 0:n.attach(m,{initialRoot:u.current,initialPresence:c.current}));const v=A=>{try{m.update(A)}catch(y){a.setState(g=>({...g,error:y instanceof Error?y:new Error("Failed to update document")}))}};a.setState(A=>({...A,doc:m,root:m.getRoot(),presences:m.getPresences(),update:v}))}catch(v){a.setState(A=>({...A,error:v instanceof Error?v:new Error("Failed to attach document")}))}finally{a.setState(v=>({...v,loading:!1}))}}return w(),()=>{n&&n.has(r)&&n.detach(m);for(const v of p)v()}},[n,e,t,r,a,d])}const Xv=j.createContext(void 0),RT=({docKey:n,initialRoot:e={},initialPresence:t={},enableDevtools:r=!1,children:i})=>{const{client:s,loading:o,error:a}=PT(),u=j.useRef(void 0);u.current||(u.current=bT({doc:void 0,root:e,presences:[],connection:Fo.Disconnected,update:()=>{},loading:!0,error:void 0}));const c=u.current;return LT(s,o,a,n,e,t,r,c),z.jsx(Xv.Provider,{value:c,children:i})};function BT(){const n=j.useContext(Xv);if(!n)throw new Error("useDocument must be used within a DocumentProvider");return OT(n)}j.createContext(void 0);class Eg{constructor(e,t){this.x=e,this.y=t,this.lifetime=0}}function rd(n,e){if(n.length<3)return n;let t=0,r=0;const[i,s]=[n[0],n[n.length-1]],o=s.x-i.x,a=s.y-i.y,u=Math.hypot(o,a)||1;for(let c=1;c<n.length-1;c++){const d=n[c],h=Math.abs(a*d.x-o*d.y+s.x*i.y-s.y*i.x)/u;h>t&&(t=h,r=c)}if(t>e){const c=rd(n.slice(0,r+1),e),d=rd(n.slice(r),e);return c.slice(0,-1).concat(d)}return[i,s]}function zT(n,e){const[t,r,i,s]=n,o=e*e,a=o*e;return{x:.5*(2*r.x+(-t.x+i.x)*e+(2*t.x-5*r.x+4*i.x-s.x)*o+(-t.x+3*r.x-3*i.x+s.x)*a),y:.5*(2*r.y+(-t.y+i.y)*e+(2*t.y-5*r.y+4*i.y-s.y)*o+(-t.y+3*r.y-3*i.y+s.y)*a)}}function $T(n,e,t,r,i,s){const o=i-t,a=s-r,u=n-t,c=e-r,d=o*o+a*a||1;let h=(u*o+c*a)/d;h<0?h=0:h>1&&(h=1);const m=t+h*o,p=r+h*a;return Math.hypot(n-m,e-p)}const Cg=6;function JT({xPos:n,yPos:e,tool:t="pen",color:r="black",maxTrail:i=128,rdpEpsilon:s=0,splineStep:o=.019,pointerDown:a=!1,visible:u=!0,resetNonce:c=0}){const d=j.useRef(null),h=j.useRef([]),m=j.useRef(!1),p=j.useRef({x:null,y:null});return j.useEffect(()=>{var v;const w=(v=d.current)==null?void 0:v.getContext("2d");w&&(h.current=[],w.clearRect(0,0,w.canvas.width,w.canvas.height),m.current=!1,p.current={x:null,y:null})},[c]),j.useEffect(()=>{if(!a){m.current=!1,p.current={x:null,y:null};return}if(t==="eraser"){h.current=h.current.filter(g=>{const S=g.points;if(S.length<2)return!0;const I=Math.max(g.width,Cg)*.75;for(let N=1;N<S.length;N++){const x=S[N-1],C=S[N],O=Math.min(x.x,C.x)-I,$=Math.max(x.x,C.x)+I,F=Math.min(x.y,C.y)-I,ge=Math.max(x.y,C.y)+I;if(!(n<O||n>$||e<F||e>ge)&&$T(n,e,x.x,x.y,C.x,C.y)<=I)return!1}return!0});return}if(!m.current){const g=new Eg(n,e);t==="fading"&&(g.age=0),h.current.push({tool:t,color:r,width:Cg,points:[g]}),m.current=!0,p.current={x:n,y:e};return}const w=p.current,v=n-w.x,A=e-w.y,y=Math.hypot(v,A);if(y>0){const g=Math.ceil(y/15),S=h.current.at(-1);for(let I=1;I<=g;I++){const N=I/g,x=w.x+v*N,C=w.y+A*N,O=new Eg(x,C);S.tool==="eraser"&&(O.erase=!0),S.tool==="fading"&&(O.age=0),S.points.push(O)}p.current={x:n,y:e}}},[n,e,t,a]),j.useEffect(()=>{const w=d.current,v=w.getContext("2d"),A=window.devicePixelRatio||1;w.width=window.innerWidth*A,w.height=window.innerHeight*A,w.style.width=`${window.innerWidth}px`,w.style.height=`${window.innerHeight}px`,v.setTransform(A,0,0,A,0,0)},[]),j.useEffect(()=>{var S;if(!u){const I=(S=d.current)==null?void 0:S.getContext("2d");I&&I.clearRect(0,0,I.canvas.width,I.canvas.height);return}const w=d.current,v=w.getContext("2d");let A,y=!0;function g(){y&&(v.clearRect(0,0,w.width,w.height),h.current.forEach(I=>{let N=I.points;if(I.tool==="fading"&&(N=I.points=N.map(C=>(C.age++,C)).filter(C=>C.age<i)),N.length<2)return;const x=rd(N,s);if(v.save(),v.lineWidth=I.width,v.lineCap="round",v.lineJoin="round",I.tool==="eraser"?(v.globalCompositeOperation="destination-out",v.strokeStyle="rgba(0,0,0,1)",v.globalAlpha=1):(v.globalCompositeOperation="source-over",v.strokeStyle=I.color,v.globalAlpha=I.tool==="highlighter"?.3:1),x.length>=4){v.beginPath(),v.moveTo(x[0].x,x[0].y);for(let C=0;C<=x.length-4;C++)for(let O=0;O<=1;O+=o){const $=zT([x[C],x[C+1],x[C+2],x[C+3]],O);v.lineTo($.x,$.y)}v.lineTo(x.at(-1).x,x.at(-1).y),v.stroke(),v.closePath()}else v.beginPath(),v.moveTo(x[0].x,x[0].y),x.slice(1).forEach(C=>v.lineTo(C.x,C.y)),v.stroke(),v.closePath();if(v.restore(),I.tool==="pencil"){v.save(),v.strokeStyle=I.color,v.lineWidth=Math.max(1,I.width*.5),v.globalAlpha=.6;const C=.3;for(let O=1;O<x.length;O++){if(Math.random()>C)continue;const $=x[O],F=x[O-1],ge=$.x-F.x,tt=$.y-F.y,Pe=Math.atan2(tt,ge)+(Math.random()-.5)*.8,Bi=I.width*(.8+Math.random()*.4),Ru=$.x+Math.cos(Pe)*Bi/2,io=$.y+Math.sin(Pe)*Bi/2,so=$.x-Math.cos(Pe)*Bi/2,R=$.y-Math.sin(Pe)*Bi/2;v.beginPath(),v.moveTo(Ru,io),v.lineTo(so,R),v.stroke(),v.closePath()}v.restore()}}),A=requestAnimationFrame(g))}return g(),()=>{y=!1,A&&cancelAnimationFrame(A)}},[i,s,o,u]),z.jsx("canvas",{ref:d,style:{position:"fixed",left:0,top:0,pointerEvents:"none",zIndex:1e4,display:u?"block":"none"}})}const MT="_goUp0_1lnal_1",FT="_goUpAnimation0_1lnal_1",UT="_fadeOut_1lnal_1",jT="_goUp1_1lnal_16",qT="_goUpAnimation1_1lnal_1",VT="_goUp2_1lnal_31",KT="_goUpAnimation2_1lnal_1",WT="_leftRight0_1lnal_46",HT="_leftRightAnimation0_1lnal_1",GT="_leftRight1_1lnal_60",YT="_leftRightAnimation1_1lnal_1",_T="_leftRight2_1lnal_74",XT="_leftRightAnimation2_1lnal_1",gc={goUp0:MT,goUpAnimation0:FT,fadeOut:UT,goUp1:jT,goUpAnimation1:qT,goUp2:VT,goUpAnimation2:KT,leftRight0:WT,leftRightAnimation0:HT,leftRight1:GT,leftRightAnimation1:YT,leftRight2:_T,leftRightAnimation2:XT};function QT({x:n,y:e,timestamp:t,selectedCursorShape:r}){return z.jsx("div",{className:"single-animation-container",children:z.jsx("div",{className:`absolute select-none pointer-events-none ${gc.disappear} text-${t%5+2}xl ${gc["goUp"+t%3]}`,style:{left:n,top:e},children:z.jsx("div",{className:gc["leftRight"+t%3],children:z.jsx("div",{className:"transform -translate-x-1/2 -translate-y-full",children:z.jsx("img",{src:`./icons/icon_${r}.svg`})})})})})}function Ng(n,e){const t=j.useRef(n);j.useEffect(()=>{t.current=n},[n]),j.useEffect(()=>{function r(){t.current()}if(e!==null){let i=setInterval(r,e);return()=>clearInterval(i)}},[e])}function ZT({pointerDown:n,xPos:e,yPos:t,selectedCursorShape:r}){const[i,s]=j.useState([]),o=100;return Ng(()=>{s(a=>a.filter(u=>u.timestamp>Date.now()-4e3))},1e3),Ng(()=>{n&&s(a=>a.concat([{point:{x:e,y:t},timestamp:Date.now()}]))},o),z.jsx("div",{style:{transform:`translateX(${e-30}px) translateY(${t-40}px)`},children:i.map(a=>z.jsx(QT,{x:a.point.x,y:a.point.y,timestamp:a.timestamp,selectedCursorShape:r},a.timestamp.toString()))})}function eI({type:n,color:e}){switch(n){case"cursor":return z.jsxs("svg",{width:"36",height:"36",viewBox:"0 0 36 36",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[z.jsx("rect",{width:"36",height:"36",rx:"8",fill:"none"}),z.jsx("path",{d:"M26.83 16.1571C27.5067 15.8939 27.845 15.7624 27.94 15.5763C28.0223 15.4151 28.0198 15.2237 27.9333 15.0648C27.8335 14.8813 27.4918 14.7586 26.8084 14.5133L9.379 8.2566C8.81992 8.0559 8.54037 7.95556 8.35762 8.01884C8.19874 8.07387 8.07387 8.19873 8.01884 8.35762C7.95556 8.54037 8.0559 8.81992 8.2566 9.379L14.5133 26.8085C14.7586 27.4918 14.8812 27.8335 15.0647 27.9333C15.2237 28.0198 15.4151 28.0224 15.5763 27.9401C15.7623 27.8451 15.8939 27.5067 16.1571 26.83L19.0055 19.5054C19.0571 19.3728 19.0829 19.3065 19.1227 19.2507C19.1579 19.2013 19.2012 19.158 19.2507 19.1227C19.3065 19.0829 19.3728 19.0571 19.5053 19.0056L26.83 16.1571Z",fill:e,stroke:"#FEFDFB",strokeWidth:"0.5",strokeLinecap:"round",strokeLinejoin:"round"})]});case"pen":case"fading":return z.jsxs("svg",{width:"36",height:"36",viewBox:"0 0 36 36",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[z.jsx("rect",{width:"36",height:"36",rx:"8",fill:"none"}),z.jsxs("g",{clipPath:"url(#clip0_pen_colored)",children:[z.jsx("path",{d:"M9.73233 23.3904C9.5808 25.0085 10.7676 26.444 12.3854 26.5994C12.9205 26.6508 13.4605 26.5868 13.9688 26.4116L19.4305 24.5293C19.7215 24.429 19.9921 24.2771 20.2294 24.081L29.278 16.6002C29.8655 16.1145 30.0216 15.2781 29.6488 14.6132C28.3855 12.3598 26.7262 10.3528 24.7505 8.68832C24.1676 8.19717 23.3167 8.19323 22.7292 8.67897L13.6806 16.1597C13.4434 16.3559 13.2433 16.5931 13.0901 16.8602L10.2145 21.8705C9.94688 22.3368 9.78246 22.8551 9.73233 23.3904Z",fill:e,stroke:"#FEFDFB",strokeWidth:"0.5"}),z.jsx("path",{d:"M12.8764 26.3737C12.6642 26.5735 12.5267 26.6302 12.3106 26.7193C11.5383 27.0378 10.9542 27.2786 10.5095 27.4286C10.0767 27.5745 9.71876 27.6564 9.43664 27.5928C8.73307 27.4343 8.22552 26.8204 8.20212 26.0996C8.19273 25.8105 8.34043 25.4743 8.56515 25.0767C8.79602 24.6682 9.14239 24.1397 9.59453 23.45C9.72852 23.2455 9.81002 23.1212 10.0462 22.9503C10.1856 22.8495 10.4138 22.772 10.6132 22.7243C10.8125 22.6765 11.0511 22.6423 11.221 22.6691C11.4774 22.7182 12.3182 23.2516 12.6629 23.6686C13.0076 24.0856 13.2168 24.4982 13.342 24.8621C13.2168 24.4982 13.0076 24.0856 12.6629 23.6686",fill:e,stroke:"#FEFDFB",strokeWidth:"0.5"}),z.jsx("path",{d:"M19.5496 20.8585C19.0985 21.2314 18.4197 21.1031 18.1358 20.5913C17.7721 19.9354 17.2902 19.3524 16.7144 18.8719C16.2651 18.4969 16.2666 17.806 16.7177 17.4331L23.7284 11.6371C24.0468 11.3739 24.2059 11.2424 24.36 11.1593C24.9929 10.818 25.7691 10.8916 26.3266 11.3458C26.4623 11.4564 26.5939 11.6156 26.857 11.9339C27.1202 12.2522 27.2518 12.4114 27.3349 12.5655C27.6762 13.1984 27.6026 13.9746 27.1484 14.532C27.0378 14.6678 26.8787 14.7994 26.5603 15.0626L19.5496 20.8585Z",fill:"#FEFDFB"})]}),z.jsx("defs",{children:z.jsx("clipPath",{id:"clip0_pen_colored",children:z.jsx("rect",{width:"16.8889",height:"32",fill:"white",transform:"translate(11 36) rotate(-129.582)"})})})]});case"line":return z.jsx("svg",{width:"22",height:"23",viewBox:"0 0 22 23",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:z.jsx("path",{d:"M7.95167 5.6812C3.39223 10.5957 2.69919 11.4214 2.79038 11.8145C2.88157 12.188 2.64448 12.5615 1.45902 13.8786L0 15.4906V16.5521C0 17.8103 0.364756 18.4393 2.1703 20.3462L3.30104 21.5256L2.06087 21.6239C1.05779 21.7026 0.8207 21.7812 0.765987 22.0761C0.601847 22.9803 0.711274 23 7.93344 23C15.1556 23 15.265 22.9803 15.1009 22.0761C15.0462 21.7615 14.7726 21.7222 12.4199 21.6632L9.79369 21.6043L10.2132 21.1325C10.505 20.7983 10.7603 20.6803 11.1068 20.759C11.5263 20.8376 12.1464 20.2479 16.8517 15.1761C21.0099 10.6744 22.086 9.41624 21.9948 9.12137C21.8489 8.5906 13.8242 0 13.4777 0C13.3318 0 10.8515 2.55555 7.95167 5.6812ZM15.8669 14.2521L11.3074 19.1667L8.62647 16.2769L5.92728 13.3675L9.10065 9.94701C11.964 6.84103 12.2376 6.48718 12.0552 6.11368C11.9275 5.87778 11.7087 5.70085 11.5263 5.70085C11.3621 5.70085 9.81193 7.21453 8.11581 9.04273L4.99715 12.4043L4.65063 11.9915C4.30412 11.5786 4.32235 11.559 8.84532 6.68376L13.4048 1.76923L16.9064 5.54359L20.4263 9.33761L15.8669 14.2521ZM6.87564 16.3556C8.40762 18.0068 9.66602 19.4419 9.66602 19.5598C9.66602 19.6581 9.28303 20.1692 8.80885 20.6803L7.95167 21.6239H6.67503H5.38015L3.33751 19.4222C0.765987 16.6504 0.747749 16.5915 2.49858 14.7043C3.17337 13.9573 3.8117 13.3675 3.92112 13.3675C4.01231 13.3675 5.34367 14.7239 6.87564 16.3556Z",fill:e})});case"highlighter":return z.jsxs("svg",{width:"23",height:"24",viewBox:"0 0 23 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[z.jsx("path",{d:"M17.9456 0.210907C17.7178 0.338861 14.6852 3.63367 11.2255 7.53625C6.41316 12.9423 4.91821 14.7176 4.91821 15.0215C4.91821 15.2934 5.50196 16.0612 7.08233 17.8525C8.93322 19.9477 9.31764 20.2996 9.68781 20.2996C10.058 20.2996 10.8695 19.4519 16.3937 13.2142C19.8535 9.3276 22.7579 5.98481 22.8434 5.79288C22.9288 5.60095 23 5.1851 23 4.84922C23 4.30542 22.8576 4.0975 21.3342 2.35413C19.2128 -0.0769892 18.8996 -0.268919 17.9456 0.210907ZM14.5286 12.1426L12.6777 14.2218L11.5387 12.9423L10.3997 11.6628L12.2506 9.58351L14.1015 7.50426L15.2405 8.7838L16.3795 10.0633L14.5286 12.1426Z",fill:e}),z.jsx("path",{d:"M3.63688 17.4527C3.20975 18.2684 2.73991 19.2121 2.58329 19.5319L2.2843 20.1397L3.7223 21.7551L5.1603 23.3705L7.03967 22.123L8.91903 20.8914L6.74068 18.4283C5.54472 17.0848 4.51961 15.9812 4.4769 15.9812C4.43418 15.9812 4.04977 16.653 3.63688 17.4527Z",fill:e,opacity:.85})]});default:return z.jsx("img",{src:`./icons/icon_${n}.svg`,alt:n,style:{display:"block"}})}}function tI({selectedCursorShape:n,x:e,y:t,pointerDown:r,fadeEnabled:i,color:s,visible:o=!0,resetNonce:a=0,overInteractive:u=!1,animate:c=!0}){const d=n,h=i&&d==="pen"?"fading":d,m=n==="pen"&&i?"fading":n==="eraser"?"line":n,p=["pen","highlighter","eraser","fading"],A={pen:{w:36,h:36,tipX:18,tipY:38},highlighter:{w:23,h:24,tipX:5,tipY:-8}}[m==="fading"?"pen":m],g=!!A?`translate(${-(A.w/2)+A.tipX}px, ${-A.h+A.tipY}px)`:"translate(-50%, -100%)";return z.jsxs(z.Fragment,{children:[!u&&z.jsx("div",{className:`${n}-cursor${c?" animated-remote-cursor":""}`,style:{position:"fixed",transform:`translate3d(${e}px, ${t}px, 0) ${g}`,pointerEvents:"none",zIndex:10001},children:z.jsx(eI,{type:m,color:s})}),(n==="heart"||n==="thumbs")&&z.jsx(ZT,{pointerDown:r,xPos:e,yPos:t,selectedCursorShape:n}),p.includes(h)&&z.jsx(JT,{xPos:e,yPos:t,tool:h,color:s,pointerDown:r,visible:o,resetNonce:a})]})}function nI({handleCursorShapeSelect:n,clientsLength:e,fadeEnabled:t,onFadeSet:r,color:i,onColorChange:s}){const[o,a]=j.useState("cursor"),[u,c]=j.useState(!1),d=j.useRef(null),h=["heart","thumbs","pen","cursor"],m=w=>{if(w==="pen"){r(!1),a("pen"),n("pen"),c(!0);return}a(w),n(w),c(!1)},p=w=>{a(w),n(w)};return z.jsxs(z.Fragment,{children:[u&&z.jsxs("div",{className:"yc-panel yc-draw-tools yc-fade-in",onMouseDown:w=>w.stopPropagation(),onMouseUp:w=>w.stopPropagation(),"data-native-cursor":!0,children:[z.jsx("button",{className:"yc-close-btn",onClick:()=>{c(!1)},title:"Close","data-native-cursor":!0,children:""}),[{key:"pen",icon:"pen"},{key:"fading",icon:"fading"},{key:"highlighter",icon:"highlighter"}].map(w=>{const v=w.icon==="pen"?o==="pen"&&!t:w.icon==="fading"?o==="pen"&&t:o===w.icon;return z.jsx("button",{className:"yc-tool-icon","data-selected":v,"data-faded":!v,"data-native-cursor":!0,title:w.icon==="fading"?"Fading Pen":w.icon.charAt(0).toUpperCase()+w.icon.slice(1),onClick:()=>{w.icon==="pen"?(r(!1),p("pen")):w.icon==="fading"?(r(!0),p("pen")):(r(!1),p(w.icon))},children:z.jsx("img",{src:`./icons/icon_${w.icon}.svg`,alt:w.icon})},w.key)}),z.jsx("button",{ref:d,className:"yc-tool-icon","data-selected":o==="eraser","data-faded":o!=="eraser","data-native-cursor":!0,title:"Eraser (line erase)",onClick:()=>{r(!1),p("eraser")},children:z.jsx("img",{src:"./icons/icon_eraser.svg",alt:"Eraser"})}),z.jsx("input",{type:"color",className:"yc-color-chip",value:i,"aria-label":"Color",title:"Color",onChange:w=>s(w.target.value),"data-native-cursor":!0,onMouseDown:w=>w.stopPropagation(),onMouseUp:w=>w.stopPropagation()})]}),z.jsxs("div",{className:"yc-combined-bar","data-native-cursor":!0,children:[z.jsx("div",{className:"yc-combined-icons",role:"toolbar","aria-label":"Cursor selector","data-native-cursor":!0,children:h.map(w=>{const v=w==="pen"?["pen","highlighter","eraser"].includes(o):o===w;return z.jsx("button",{className:"yc-nav-btn","data-selected":v,onClick:()=>m(w),title:w,"aria-pressed":v,"data-native-cursor":!0,children:z.jsx("img",{src:`./icons/icon_${w}.svg`,alt:`${w} cursor`,style:{filter:v?"brightness(0) invert(1)":"none"}})},w)})}),z.jsx("div",{className:"yc-divider","aria-hidden":"true","data-native-cursor":!0}),z.jsxs("div",{className:"yc-count-pill","data-native-cursor":!0,title:`${e} user${e===1?"":"s"} online`,"aria-label":`${e} user${e===1?"":"s"} online`,children:[z.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:z.jsx("path",{fill:"currentColor",d:"M12 12.75c2.899 0 5.25-2.351 5.25-5.25S14.899 2.25 12 2.25 6.75 4.601 6.75 7.5 9.101 12.75 12 12.75Zm0 1.5c-3.005 0-9 1.51-9 4.5v.75a.75.75 0 0 0 .75.75h16.5a.75.75 0 0 0 .75-.75v-.75c0-2.99-5.995-4.5-9-4.5Z"})}),z.jsx("span",{children:e})]})]})]})}function rI(){const n=Math.floor(Math.random()*360),e=70,t=55,r=p=>p.toString(16).padStart(2,"0"),i=(1-Math.abs(2*t/100-1))*(e/100),s=i*(1-Math.abs(n/60%2-1)),o=t/100-i/2;let a,u,c;n<60?[a,u,c]=[i,s,0]:n<120?[a,u,c]=[s,i,0]:n<180?[a,u,c]=[0,i,s]:n<240?[a,u,c]=[0,s,i]:n<300?[a,u,c]=[s,0,i]:[a,u,c]=[i,0,s];const d=Math.round((a+o)*255),h=Math.round((u+o)*255),m=Math.round((c+o)*255);return`#${r(d)}${r(h)}${r(m)}`}const id={cursorShape:"cursor",cursor:{xPos:0,yPos:0},pointerDown:!1,color:rI(),fadeEnabled:!1,overInteractive:!1},iI=2;function sI(){const{doc:n,presences:e,update:t,loading:r,error:i}=BT(),[s,o]=j.useState(!1),[a,u]=j.useState(id.color),c=j.useRef(null),d=j.useRef(null),h=j.useRef({x:0,y:0}),m=j.useRef(!1),p=A=>{t((y,g)=>g.set({cursorShape:A}))},w=A=>{o(A),t((y,g)=>g.set({fadeEnabled:A}))},v=A=>{u(A),t((y,g)=>g.set({color:A}))};return j.useEffect(()=>{if(r||i)return;const A='button, input, select, textarea, [role="button"], a, [data-native-cursor]',y=()=>{m.current=!0,t((x,C)=>C.set({pointerDown:!0}))},g=()=>{m.current=!1,t((x,C)=>C.set({pointerDown:!1}))},S=x=>{const C=!!(x.target.closest&&x.target.closest(A));d.current={x:x.clientX,y:x.clientY,overInteractive:C}};let I;const N=()=>{const x=d.current;if(x){const C=h.current,O=x.x-C.x,$=x.y-C.y,F=Math.hypot(O,$);(m.current||F>=iI)&&(h.current={x:x.x,y:x.y},t((tt,Pe)=>Pe.set({cursor:{xPos:x.x,yPos:x.y},overInteractive:x.overInteractive}))),d.current=null}I=requestAnimationFrame(N)};return I=requestAnimationFrame(N),window.addEventListener("mousedown",y),window.addEventListener("mouseup",g),window.addEventListener("mousemove",S),()=>{cancelAnimationFrame(I),window.removeEventListener("mousedown",y),window.removeEventListener("mouseup",g),window.removeEventListener("mousemove",S)}},[r,i,t]),j.useEffect(()=>{var y;if(!n)return;const A=(y=n.getMyPresence)==null?void 0:y.call(n);A&&(o(A.fadeEnabled??!1),u(A.color??id.color))},[e,n]),r?z.jsx("div",{className:"general-container",children:"Loading..."}):i?z.jsxs("div",{className:"general-container",children:["Error: ",i.message]}):z.jsxs("div",{className:"general-container",onMouseDown:A=>{const y=A.target.tagName;["INPUT","SELECT","TEXTAREA","BUTTON"].includes(y)||A.preventDefault()},children:[e.map(({clientID:A,presence:y},g)=>{const{cursorShape:S,cursor:I,pointerDown:N,color:x="#000000",fadeEnabled:C=!1,overInteractive:O=!1}=y;g===0&&c.current===null&&(c.current=A);const $=A===c.current;return I&&z.jsx(tI,{selectedCursorShape:S,x:I.xPos,y:I.yPos,pointerDown:N,fadeEnabled:C,color:x,overInteractive:O,animate:!$},A)}),z.jsx(nI,{handleCursorShapeSelect:p,clientsLength:e.length,fadeEnabled:s,onFadeSet:w,color:a,onColorChange:v})]})}function oI(){return z.jsx(NT,{apiKey:"D6sd9E5ehtXBssmeRZ4QQP",rpcAddr:"https://api.yorkie.dev",children:z.jsx(RT,{docKey:"simultaneous-cursors",initialPresence:id,children:z.jsx(sI,{})})})}pc.createRoot(document.getElementById("root")).render(z.jsx(j.StrictMode,{children:z.jsx(oI,{})}));
