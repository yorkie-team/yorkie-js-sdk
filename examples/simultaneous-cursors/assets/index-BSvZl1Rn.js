var Fy=Object.defineProperty;var My=(n,e,t)=>e in n?Fy(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var u=(n,e,t)=>My(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();var dg={exports:{}},vl={},hg={exports:{}},j={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Io=Symbol.for("react.element"),Jy=Symbol.for("react.portal"),$y=Symbol.for("react.fragment"),zy=Symbol.for("react.strict_mode"),Uy=Symbol.for("react.profiler"),Vy=Symbol.for("react.provider"),jy=Symbol.for("react.context"),qy=Symbol.for("react.forward_ref"),Ky=Symbol.for("react.suspense"),Wy=Symbol.for("react.memo"),Hy=Symbol.for("react.lazy"),dd=Symbol.iterator;function _y(n){return n===null||typeof n!="object"?null:(n=dd&&n[dd]||n["@@iterator"],typeof n=="function"?n:null)}var gg={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},mg=Object.assign,pg={};function ys(n,e,t){this.props=n,this.context=e,this.refs=pg,this.updater=t||gg}ys.prototype.isReactComponent={};ys.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};ys.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function yg(){}yg.prototype=ys.prototype;function Yc(n,e,t){this.props=n,this.context=e,this.refs=pg,this.updater=t||gg}var Qc=Yc.prototype=new yg;Qc.constructor=Yc;mg(Qc,ys.prototype);Qc.isPureReactComponent=!0;var hd=Array.isArray,vg=Object.prototype.hasOwnProperty,Xc={current:null},wg={key:!0,ref:!0,__self:!0,__source:!0};function Sg(n,e,t){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)vg.call(e,r)&&!wg.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=t;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(n&&n.defaultProps)for(r in a=n.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Io,type:n,key:s,ref:o,props:i,_owner:Xc.current}}function Gy(n,e){return{$$typeof:Io,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function Zc(n){return typeof n=="object"&&n!==null&&n.$$typeof===Io}function Yy(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var gd=/\/+/g;function Kl(n,e){return typeof n=="object"&&n!==null&&n.key!=null?Yy(""+n.key):e.toString(36)}function sa(n,e,t,r,i){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case Io:case Jy:o=!0}}if(o)return o=n,i=i(o),n=r===""?"."+Kl(o,0):r,hd(i)?(t="",n!=null&&(t=n.replace(gd,"$&/")+"/"),sa(i,e,t,"",function(c){return c})):i!=null&&(Zc(i)&&(i=Gy(i,t+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(gd,"$&/")+"/")+n)),e.push(i)),1;if(o=0,r=r===""?".":r+":",hd(n))for(var a=0;a<n.length;a++){s=n[a];var l=r+Kl(s,a);o+=sa(s,e,t,l,i)}else if(l=_y(n),typeof l=="function")for(n=l.call(n),a=0;!(s=n.next()).done;)s=s.value,l=r+Kl(s,a++),o+=sa(s,e,t,l,i);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Fo(n,e,t){if(n==null)return n;var r=[],i=0;return sa(n,r,"","",function(s){return e.call(t,s,i++)}),r}function Qy(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Me={current:null},oa={transition:null},Xy={ReactCurrentDispatcher:Me,ReactCurrentBatchConfig:oa,ReactCurrentOwner:Xc};j.Children={map:Fo,forEach:function(n,e,t){Fo(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return Fo(n,function(){e++}),e},toArray:function(n){return Fo(n,function(e){return e})||[]},only:function(n){if(!Zc(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};j.Component=ys;j.Fragment=$y;j.Profiler=Uy;j.PureComponent=Yc;j.StrictMode=zy;j.Suspense=Ky;j.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Xy;j.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=mg({},n.props),i=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Xc.current),e.key!==void 0&&(i=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)vg.call(e,l)&&!wg.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=t;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Io,type:n.type,key:i,ref:s,props:r,_owner:o}};j.createContext=function(n){return n={$$typeof:jy,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:Vy,_context:n},n.Consumer=n};j.createElement=Sg;j.createFactory=function(n){var e=Sg.bind(null,n);return e.type=n,e};j.createRef=function(){return{current:null}};j.forwardRef=function(n){return{$$typeof:qy,render:n}};j.isValidElement=Zc;j.lazy=function(n){return{$$typeof:Hy,_payload:{_status:-1,_result:n},_init:Qy}};j.memo=function(n,e){return{$$typeof:Wy,type:n,compare:e===void 0?null:e}};j.startTransition=function(n){var e=oa.transition;oa.transition={};try{n()}finally{oa.transition=e}};j.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};j.useCallback=function(n,e){return Me.current.useCallback(n,e)};j.useContext=function(n){return Me.current.useContext(n)};j.useDebugValue=function(){};j.useDeferredValue=function(n){return Me.current.useDeferredValue(n)};j.useEffect=function(n,e){return Me.current.useEffect(n,e)};j.useId=function(){return Me.current.useId()};j.useImperativeHandle=function(n,e,t){return Me.current.useImperativeHandle(n,e,t)};j.useInsertionEffect=function(n,e){return Me.current.useInsertionEffect(n,e)};j.useLayoutEffect=function(n,e){return Me.current.useLayoutEffect(n,e)};j.useMemo=function(n,e){return Me.current.useMemo(n,e)};j.useReducer=function(n,e,t){return Me.current.useReducer(n,e,t)};j.useRef=function(n){return Me.current.useRef(n)};j.useState=function(n){return Me.current.useState(n)};j.useSyncExternalStore=function(n,e,t){return Me.current.useSyncExternalStore(n,e,t)};j.useTransition=function(){return Me.current.useTransition()};j.version="18.2.0";hg.exports=j;var Ue=hg.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zy=Ue,ev=Symbol.for("react.element"),tv=Symbol.for("react.fragment"),nv=Object.prototype.hasOwnProperty,rv=Zy.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,iv={key:!0,ref:!0,__self:!0,__source:!0};function kg(n,e,t){var r,i={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)nv.call(e,r)&&!iv.hasOwnProperty(r)&&(i[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:ev,type:n,key:s,ref:o,props:i,_owner:rv.current}}vl.Fragment=tv;vl.jsx=kg;vl.jsxs=kg;dg.exports=vl;var ue=dg.exports,Nu={},Tg={exports:{}},st={},Ag={exports:{}},Ig={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(L,z){var V=L.length;L.push(z);e:for(;0<V;){var ce=V-1>>>1,Se=L[ce];if(0<i(Se,z))L[ce]=z,L[V]=Se,V=ce;else break e}}function t(L){return L.length===0?null:L[0]}function r(L){if(L.length===0)return null;var z=L[0],V=L.pop();if(V!==z){L[0]=V;e:for(var ce=0,Se=L.length,Bo=Se>>>1;ce<Bo;){var ni=2*(ce+1)-1,ql=L[ni],ri=ni+1,bo=L[ri];if(0>i(ql,V))ri<Se&&0>i(bo,ql)?(L[ce]=bo,L[ri]=V,ce=ri):(L[ce]=ql,L[ni]=V,ce=ni);else if(ri<Se&&0>i(bo,V))L[ce]=bo,L[ri]=V,ce=ri;else break e}}return z}function i(L,z){var V=L.sortIndex-z.sortIndex;return V!==0?V:L.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,h=null,p=3,m=!1,w=!1,I=!1,O=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(L){for(var z=t(c);z!==null;){if(z.callback===null)r(c);else if(z.startTime<=L)r(c),z.sortIndex=z.expirationTime,e(l,z);else break;z=t(c)}}function T(L){if(I=!1,v(L),!w)if(t(l)!==null)w=!0,Vl(x);else{var z=t(c);z!==null&&jl(T,z.startTime-L)}}function x(L,z){w=!1,I&&(I=!1,y(B),B=-1),m=!0;var V=p;try{for(v(z),h=t(l);h!==null&&(!(h.expirationTime>z)||L&&!Ge());){var ce=h.callback;if(typeof ce=="function"){h.callback=null,p=h.priorityLevel;var Se=ce(h.expirationTime<=z);z=n.unstable_now(),typeof Se=="function"?h.callback=Se:h===t(l)&&r(l),v(z)}else r(l);h=t(l)}if(h!==null)var Bo=!0;else{var ni=t(c);ni!==null&&jl(T,ni.startTime-z),Bo=!1}return Bo}finally{h=null,p=V,m=!1}}var N=!1,P=null,B=-1,H=5,U=-1;function Ge(){return!(n.unstable_now()-U<H)}function Ss(){if(P!==null){var L=n.unstable_now();U=L;var z=!0;try{z=P(!0,L)}finally{z?ks():(N=!1,P=null)}}else N=!1}var ks;if(typeof g=="function")ks=function(){g(Ss)};else if(typeof MessageChannel<"u"){var fd=new MessageChannel,by=fd.port2;fd.port1.onmessage=Ss,ks=function(){by.postMessage(null)}}else ks=function(){O(Ss,0)};function Vl(L){P=L,N||(N=!0,ks())}function jl(L,z){B=O(function(){L(n.unstable_now())},z)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(L){L.callback=null},n.unstable_continueExecution=function(){w||m||(w=!0,Vl(x))},n.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<L?Math.floor(1e3/L):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(L){switch(p){case 1:case 2:case 3:var z=3;break;default:z=p}var V=p;p=z;try{return L()}finally{p=V}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(L,z){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var V=p;p=L;try{return z()}finally{p=V}},n.unstable_scheduleCallback=function(L,z,V){var ce=n.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?ce+V:ce):V=ce,L){case 1:var Se=-1;break;case 2:Se=250;break;case 5:Se=1073741823;break;case 4:Se=1e4;break;default:Se=5e3}return Se=V+Se,L={id:d++,callback:z,priorityLevel:L,startTime:V,expirationTime:Se,sortIndex:-1},V>ce?(L.sortIndex=V,e(c,L),t(l)===null&&L===t(c)&&(I?(y(B),B=-1):I=!0,jl(T,V-ce))):(L.sortIndex=Se,e(l,L),w||m||(w=!0,Vl(x))),L},n.unstable_shouldYield=Ge,n.unstable_wrapCallback=function(L){var z=p;return function(){var V=p;p=z;try{return L.apply(this,arguments)}finally{p=V}}}})(Ig);Ag.exports=Ig;var sv=Ag.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Eg=Ue,it=sv;function E(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var xg=new Set,Ys={};function xi(n,e){ns(n,e),ns(n+"Capture",e)}function ns(n,e){for(Ys[n]=e,n=0;n<e.length;n++)xg.add(e[n])}var vr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Pu=Object.prototype.hasOwnProperty,ov=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,md={},pd={};function av(n){return Pu.call(pd,n)?!0:Pu.call(md,n)?!1:ov.test(n)?pd[n]=!0:(md[n]=!0,!1)}function lv(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function uv(n,e,t,r){if(e===null||typeof e>"u"||lv(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Je(n,e,t,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var xe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){xe[n]=new Je(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];xe[e]=new Je(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){xe[n]=new Je(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){xe[n]=new Je(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){xe[n]=new Je(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){xe[n]=new Je(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){xe[n]=new Je(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){xe[n]=new Je(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){xe[n]=new Je(n,5,!1,n.toLowerCase(),null,!1,!1)});var ef=/[\-:]([a-z])/g;function tf(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(ef,tf);xe[e]=new Je(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(ef,tf);xe[e]=new Je(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(ef,tf);xe[e]=new Je(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){xe[n]=new Je(n,1,!1,n.toLowerCase(),null,!1,!1)});xe.xlinkHref=new Je("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){xe[n]=new Je(n,1,!1,n.toLowerCase(),null,!0,!0)});function nf(n,e,t,r){var i=xe.hasOwnProperty(e)?xe[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(uv(e,t,i,r)&&(t=null),r||i===null?av(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):i.mustUseProperty?n[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,r=i.attributeNamespace,t===null?n.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var Ir=Eg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Mo=Symbol.for("react.element"),Li=Symbol.for("react.portal"),Bi=Symbol.for("react.fragment"),rf=Symbol.for("react.strict_mode"),Du=Symbol.for("react.profiler"),Cg=Symbol.for("react.provider"),Ng=Symbol.for("react.context"),sf=Symbol.for("react.forward_ref"),Ou=Symbol.for("react.suspense"),Ru=Symbol.for("react.suspense_list"),of=Symbol.for("react.memo"),Dr=Symbol.for("react.lazy"),Pg=Symbol.for("react.offscreen"),yd=Symbol.iterator;function Ts(n){return n===null||typeof n!="object"?null:(n=yd&&n[yd]||n["@@iterator"],typeof n=="function"?n:null)}var se=Object.assign,Wl;function Rs(n){if(Wl===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);Wl=e&&e[1]||""}return`
`+Wl+n}var Hl=!1;function _l(n,e){if(!n||Hl)return"";Hl=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){r=c}n.call(e.prototype)}else{try{throw Error()}catch(c){r=c}n()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{Hl=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?Rs(n):""}function cv(n){switch(n.tag){case 5:return Rs(n.type);case 16:return Rs("Lazy");case 13:return Rs("Suspense");case 19:return Rs("SuspenseList");case 0:case 2:case 15:return n=_l(n.type,!1),n;case 11:return n=_l(n.type.render,!1),n;case 1:return n=_l(n.type,!0),n;default:return""}}function Lu(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Bi:return"Fragment";case Li:return"Portal";case Du:return"Profiler";case rf:return"StrictMode";case Ou:return"Suspense";case Ru:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case Ng:return(n.displayName||"Context")+".Consumer";case Cg:return(n._context.displayName||"Context")+".Provider";case sf:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case of:return e=n.displayName||null,e!==null?e:Lu(n.type)||"Memo";case Dr:e=n._payload,n=n._init;try{return Lu(n(e))}catch{}}return null}function fv(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Lu(e);case 8:return e===rf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function _r(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Dg(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function dv(n){var e=Dg(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function Jo(n){n._valueTracker||(n._valueTracker=dv(n))}function Og(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=Dg(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function Ia(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Bu(n,e){var t=e.checked;return se({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function vd(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=_r(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Rg(n,e){e=e.checked,e!=null&&nf(n,"checked",e,!1)}function bu(n,e){Rg(n,e);var t=_r(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?Fu(n,e.type,t):e.hasOwnProperty("defaultValue")&&Fu(n,e.type,_r(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function wd(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function Fu(n,e,t){(e!=="number"||Ia(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var Ls=Array.isArray;function Hi(n,e,t,r){if(n=n.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<n.length;t++)i=e.hasOwnProperty("$"+n[t].value),n[t].selected!==i&&(n[t].selected=i),i&&r&&(n[t].defaultSelected=!0)}else{for(t=""+_r(t),e=null,i=0;i<n.length;i++){if(n[i].value===t){n[i].selected=!0,r&&(n[i].defaultSelected=!0);return}e!==null||n[i].disabled||(e=n[i])}e!==null&&(e.selected=!0)}}function Mu(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(E(91));return se({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Sd(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(E(92));if(Ls(t)){if(1<t.length)throw Error(E(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:_r(t)}}function Lg(n,e){var t=_r(e.value),r=_r(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function kd(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function Bg(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ju(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?Bg(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var $o,bg=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,i){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,i)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for($o=$o||document.createElement("div"),$o.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=$o.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function Qs(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var Fs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},hv=["Webkit","ms","Moz","O"];Object.keys(Fs).forEach(function(n){hv.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),Fs[e]=Fs[n]})});function Fg(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Fs.hasOwnProperty(n)&&Fs[n]?(""+e).trim():e+"px"}function Mg(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,i=Fg(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,i):n[t]=i}}var gv=se({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function $u(n,e){if(e){if(gv[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(E(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(E(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(E(61))}if(e.style!=null&&typeof e.style!="object")throw Error(E(62))}}function zu(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Uu=null;function af(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Vu=null,_i=null,Gi=null;function Td(n){if(n=Co(n)){if(typeof Vu!="function")throw Error(E(280));var e=n.stateNode;e&&(e=Al(e),Vu(n.stateNode,n.type,e))}}function Jg(n){_i?Gi?Gi.push(n):Gi=[n]:_i=n}function $g(){if(_i){var n=_i,e=Gi;if(Gi=_i=null,Td(n),e)for(n=0;n<e.length;n++)Td(e[n])}}function zg(n,e){return n(e)}function Ug(){}var Gl=!1;function Vg(n,e,t){if(Gl)return n(e,t);Gl=!0;try{return zg(n,e,t)}finally{Gl=!1,(_i!==null||Gi!==null)&&(Ug(),$g())}}function Xs(n,e){var t=n.stateNode;if(t===null)return null;var r=Al(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(E(231,e,typeof t));return t}var ju=!1;if(vr)try{var As={};Object.defineProperty(As,"passive",{get:function(){ju=!0}}),window.addEventListener("test",As,As),window.removeEventListener("test",As,As)}catch{ju=!1}function mv(n,e,t,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(d){this.onError(d)}}var Ms=!1,Ea=null,xa=!1,qu=null,pv={onError:function(n){Ms=!0,Ea=n}};function yv(n,e,t,r,i,s,o,a,l){Ms=!1,Ea=null,mv.apply(pv,arguments)}function vv(n,e,t,r,i,s,o,a,l){if(yv.apply(this,arguments),Ms){if(Ms){var c=Ea;Ms=!1,Ea=null}else throw Error(E(198));xa||(xa=!0,qu=c)}}function Ci(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function jg(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function Ad(n){if(Ci(n)!==n)throw Error(E(188))}function wv(n){var e=n.alternate;if(!e){if(e=Ci(n),e===null)throw Error(E(188));return e!==n?null:n}for(var t=n,r=e;;){var i=t.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){t=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===t)return Ad(i),n;if(s===r)return Ad(i),e;s=s.sibling}throw Error(E(188))}if(t.return!==r.return)t=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===t){o=!0,t=i,r=s;break}if(a===r){o=!0,r=i,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,r=i;break}if(a===r){o=!0,r=s,t=i;break}a=a.sibling}if(!o)throw Error(E(189))}}if(t.alternate!==r)throw Error(E(190))}if(t.tag!==3)throw Error(E(188));return t.stateNode.current===t?n:e}function qg(n){return n=wv(n),n!==null?Kg(n):null}function Kg(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=Kg(n);if(e!==null)return e;n=n.sibling}return null}var Wg=it.unstable_scheduleCallback,Id=it.unstable_cancelCallback,Sv=it.unstable_shouldYield,kv=it.unstable_requestPaint,de=it.unstable_now,Tv=it.unstable_getCurrentPriorityLevel,lf=it.unstable_ImmediatePriority,Hg=it.unstable_UserBlockingPriority,Ca=it.unstable_NormalPriority,Av=it.unstable_LowPriority,_g=it.unstable_IdlePriority,wl=null,nn=null;function Iv(n){if(nn&&typeof nn.onCommitFiberRoot=="function")try{nn.onCommitFiberRoot(wl,n,void 0,(n.current.flags&128)===128)}catch{}}var Bt=Math.clz32?Math.clz32:Cv,Ev=Math.log,xv=Math.LN2;function Cv(n){return n>>>=0,n===0?32:31-(Ev(n)/xv|0)|0}var zo=64,Uo=4194304;function Bs(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Na(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,i=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~i;a!==0?r=Bs(a):(s&=o,s!==0&&(r=Bs(s)))}else o=t&~i,o!==0?r=Bs(o):s!==0&&(r=Bs(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-Bt(e),i=1<<t,r|=n[t],e&=~i;return r}function Nv(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Pv(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,i=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-Bt(s),a=1<<o,l=i[o];l===-1?(!(a&t)||a&r)&&(i[o]=Nv(a,e)):l<=e&&(n.expiredLanes|=a),s&=~a}}function Ku(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Gg(){var n=zo;return zo<<=1,!(zo&4194240)&&(zo=64),n}function Yl(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function Eo(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-Bt(e),n[e]=t}function Dv(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var i=31-Bt(t),s=1<<i;e[i]=0,r[i]=-1,n[i]=-1,t&=~s}}function uf(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-Bt(t),i=1<<r;i&e|n[r]&e&&(n[r]|=e),t&=~i}}var G=0;function Yg(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var Qg,cf,Xg,Zg,em,Wu=!1,Vo=[],Mr=null,Jr=null,$r=null,Zs=new Map,eo=new Map,Rr=[],Ov="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ed(n,e){switch(n){case"focusin":case"focusout":Mr=null;break;case"dragenter":case"dragleave":Jr=null;break;case"mouseover":case"mouseout":$r=null;break;case"pointerover":case"pointerout":Zs.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":eo.delete(e.pointerId)}}function Is(n,e,t,r,i,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Co(e),e!==null&&cf(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),n)}function Rv(n,e,t,r,i){switch(e){case"focusin":return Mr=Is(Mr,n,e,t,r,i),!0;case"dragenter":return Jr=Is(Jr,n,e,t,r,i),!0;case"mouseover":return $r=Is($r,n,e,t,r,i),!0;case"pointerover":var s=i.pointerId;return Zs.set(s,Is(Zs.get(s)||null,n,e,t,r,i)),!0;case"gotpointercapture":return s=i.pointerId,eo.set(s,Is(eo.get(s)||null,n,e,t,r,i)),!0}return!1}function tm(n){var e=ui(n.target);if(e!==null){var t=Ci(e);if(t!==null){if(e=t.tag,e===13){if(e=jg(t),e!==null){n.blockedOn=e,em(n.priority,function(){Xg(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function aa(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=Hu(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);Uu=r,t.target.dispatchEvent(r),Uu=null}else return e=Co(t),e!==null&&cf(e),n.blockedOn=t,!1;e.shift()}return!0}function xd(n,e,t){aa(n)&&t.delete(e)}function Lv(){Wu=!1,Mr!==null&&aa(Mr)&&(Mr=null),Jr!==null&&aa(Jr)&&(Jr=null),$r!==null&&aa($r)&&($r=null),Zs.forEach(xd),eo.forEach(xd)}function Es(n,e){n.blockedOn===e&&(n.blockedOn=null,Wu||(Wu=!0,it.unstable_scheduleCallback(it.unstable_NormalPriority,Lv)))}function to(n){function e(i){return Es(i,n)}if(0<Vo.length){Es(Vo[0],n);for(var t=1;t<Vo.length;t++){var r=Vo[t];r.blockedOn===n&&(r.blockedOn=null)}}for(Mr!==null&&Es(Mr,n),Jr!==null&&Es(Jr,n),$r!==null&&Es($r,n),Zs.forEach(e),eo.forEach(e),t=0;t<Rr.length;t++)r=Rr[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<Rr.length&&(t=Rr[0],t.blockedOn===null);)tm(t),t.blockedOn===null&&Rr.shift()}var Yi=Ir.ReactCurrentBatchConfig,Pa=!0;function Bv(n,e,t,r){var i=G,s=Yi.transition;Yi.transition=null;try{G=1,ff(n,e,t,r)}finally{G=i,Yi.transition=s}}function bv(n,e,t,r){var i=G,s=Yi.transition;Yi.transition=null;try{G=4,ff(n,e,t,r)}finally{G=i,Yi.transition=s}}function ff(n,e,t,r){if(Pa){var i=Hu(n,e,t,r);if(i===null)ou(n,e,r,Da,t),Ed(n,r);else if(Rv(i,n,e,t,r))r.stopPropagation();else if(Ed(n,r),e&4&&-1<Ov.indexOf(n)){for(;i!==null;){var s=Co(i);if(s!==null&&Qg(s),s=Hu(n,e,t,r),s===null&&ou(n,e,r,Da,t),s===i)break;i=s}i!==null&&r.stopPropagation()}else ou(n,e,r,null,t)}}var Da=null;function Hu(n,e,t,r){if(Da=null,n=af(r),n=ui(n),n!==null)if(e=Ci(n),e===null)n=null;else if(t=e.tag,t===13){if(n=jg(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return Da=n,null}function nm(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Tv()){case lf:return 1;case Hg:return 4;case Ca:case Av:return 16;case _g:return 536870912;default:return 16}default:return 16}}var Br=null,df=null,la=null;function rm(){if(la)return la;var n,e=df,t=e.length,r,i="value"in Br?Br.value:Br.textContent,s=i.length;for(n=0;n<t&&e[n]===i[n];n++);var o=t-n;for(r=1;r<=o&&e[t-r]===i[s-r];r++);return la=i.slice(n,1<r?1-r:void 0)}function ua(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function jo(){return!0}function Cd(){return!1}function ot(n){function e(t,r,i,s,o){this._reactName=t,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?jo:Cd,this.isPropagationStopped=Cd,this}return se(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=jo)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=jo)},persist:function(){},isPersistent:jo}),e}var vs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hf=ot(vs),xo=se({},vs,{view:0,detail:0}),Fv=ot(xo),Ql,Xl,xs,Sl=se({},xo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gf,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==xs&&(xs&&n.type==="mousemove"?(Ql=n.screenX-xs.screenX,Xl=n.screenY-xs.screenY):Xl=Ql=0,xs=n),Ql)},movementY:function(n){return"movementY"in n?n.movementY:Xl}}),Nd=ot(Sl),Mv=se({},Sl,{dataTransfer:0}),Jv=ot(Mv),$v=se({},xo,{relatedTarget:0}),Zl=ot($v),zv=se({},vs,{animationName:0,elapsedTime:0,pseudoElement:0}),Uv=ot(zv),Vv=se({},vs,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),jv=ot(Vv),qv=se({},vs,{data:0}),Pd=ot(qv),Kv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Wv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Hv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _v(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=Hv[n])?!!e[n]:!1}function gf(){return _v}var Gv=se({},xo,{key:function(n){if(n.key){var e=Kv[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=ua(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Wv[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gf,charCode:function(n){return n.type==="keypress"?ua(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?ua(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Yv=ot(Gv),Qv=se({},Sl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Dd=ot(Qv),Xv=se({},xo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gf}),Zv=ot(Xv),e0=se({},vs,{propertyName:0,elapsedTime:0,pseudoElement:0}),t0=ot(e0),n0=se({},Sl,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),r0=ot(n0),i0=[9,13,27,32],mf=vr&&"CompositionEvent"in window,Js=null;vr&&"documentMode"in document&&(Js=document.documentMode);var s0=vr&&"TextEvent"in window&&!Js,im=vr&&(!mf||Js&&8<Js&&11>=Js),Od=" ",Rd=!1;function sm(n,e){switch(n){case"keyup":return i0.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function om(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var bi=!1;function o0(n,e){switch(n){case"compositionend":return om(e);case"keypress":return e.which!==32?null:(Rd=!0,Od);case"textInput":return n=e.data,n===Od&&Rd?null:n;default:return null}}function a0(n,e){if(bi)return n==="compositionend"||!mf&&sm(n,e)?(n=rm(),la=df=Br=null,bi=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return im&&e.locale!=="ko"?null:e.data;default:return null}}var l0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ld(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!l0[n.type]:e==="textarea"}function am(n,e,t,r){Jg(r),e=Oa(e,"onChange"),0<e.length&&(t=new hf("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var $s=null,no=null;function u0(n){vm(n,0)}function kl(n){var e=Ji(n);if(Og(e))return n}function c0(n,e){if(n==="change")return e}var lm=!1;if(vr){var eu;if(vr){var tu="oninput"in document;if(!tu){var Bd=document.createElement("div");Bd.setAttribute("oninput","return;"),tu=typeof Bd.oninput=="function"}eu=tu}else eu=!1;lm=eu&&(!document.documentMode||9<document.documentMode)}function bd(){$s&&($s.detachEvent("onpropertychange",um),no=$s=null)}function um(n){if(n.propertyName==="value"&&kl(no)){var e=[];am(e,no,n,af(n)),Vg(u0,e)}}function f0(n,e,t){n==="focusin"?(bd(),$s=e,no=t,$s.attachEvent("onpropertychange",um)):n==="focusout"&&bd()}function d0(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return kl(no)}function h0(n,e){if(n==="click")return kl(e)}function g0(n,e){if(n==="input"||n==="change")return kl(e)}function m0(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Jt=typeof Object.is=="function"?Object.is:m0;function ro(n,e){if(Jt(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var i=t[r];if(!Pu.call(e,i)||!Jt(n[i],e[i]))return!1}return!0}function Fd(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Md(n,e){var t=Fd(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=Fd(t)}}function cm(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?cm(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function fm(){for(var n=window,e=Ia();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=Ia(n.document)}return e}function pf(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function p0(n){var e=fm(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&cm(t.ownerDocument.documentElement,t)){if(r!==null&&pf(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var i=t.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!n.extend&&s>r&&(i=r,r=s,s=i),i=Md(t,s);var o=Md(t,r);i&&o&&(n.rangeCount!==1||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),n.removeAllRanges(),s>r?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var y0=vr&&"documentMode"in document&&11>=document.documentMode,Fi=null,_u=null,zs=null,Gu=!1;function Jd(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;Gu||Fi==null||Fi!==Ia(r)||(r=Fi,"selectionStart"in r&&pf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),zs&&ro(zs,r)||(zs=r,r=Oa(_u,"onSelect"),0<r.length&&(e=new hf("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=Fi)))}function qo(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var Mi={animationend:qo("Animation","AnimationEnd"),animationiteration:qo("Animation","AnimationIteration"),animationstart:qo("Animation","AnimationStart"),transitionend:qo("Transition","TransitionEnd")},nu={},dm={};vr&&(dm=document.createElement("div").style,"AnimationEvent"in window||(delete Mi.animationend.animation,delete Mi.animationiteration.animation,delete Mi.animationstart.animation),"TransitionEvent"in window||delete Mi.transitionend.transition);function Tl(n){if(nu[n])return nu[n];if(!Mi[n])return n;var e=Mi[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in dm)return nu[n]=e[t];return n}var hm=Tl("animationend"),gm=Tl("animationiteration"),mm=Tl("animationstart"),pm=Tl("transitionend"),ym=new Map,$d="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Zr(n,e){ym.set(n,e),xi(e,[n])}for(var ru=0;ru<$d.length;ru++){var iu=$d[ru],v0=iu.toLowerCase(),w0=iu[0].toUpperCase()+iu.slice(1);Zr(v0,"on"+w0)}Zr(hm,"onAnimationEnd");Zr(gm,"onAnimationIteration");Zr(mm,"onAnimationStart");Zr("dblclick","onDoubleClick");Zr("focusin","onFocus");Zr("focusout","onBlur");Zr(pm,"onTransitionEnd");ns("onMouseEnter",["mouseout","mouseover"]);ns("onMouseLeave",["mouseout","mouseover"]);ns("onPointerEnter",["pointerout","pointerover"]);ns("onPointerLeave",["pointerout","pointerover"]);xi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));xi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));xi("onBeforeInput",["compositionend","keypress","textInput","paste"]);xi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));xi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));xi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var bs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),S0=new Set("cancel close invalid load scroll toggle".split(" ").concat(bs));function zd(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,vv(r,e,void 0,n),n.currentTarget=null}function vm(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;zd(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;zd(i,a,c),s=l}}}if(xa)throw n=qu,xa=!1,qu=null,n}function X(n,e){var t=e[ec];t===void 0&&(t=e[ec]=new Set);var r=n+"__bubble";t.has(r)||(wm(e,n,2,!1),t.add(r))}function su(n,e,t){var r=0;e&&(r|=4),wm(t,n,r,e)}var Ko="_reactListening"+Math.random().toString(36).slice(2);function io(n){if(!n[Ko]){n[Ko]=!0,xg.forEach(function(t){t!=="selectionchange"&&(S0.has(t)||su(t,!1,n),su(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Ko]||(e[Ko]=!0,su("selectionchange",!1,e))}}function wm(n,e,t,r){switch(nm(e)){case 1:var i=Bv;break;case 4:i=bv;break;default:i=ff}t=i.bind(null,e,t,n),i=void 0,!ju||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?n.addEventListener(e,t,{capture:!0,passive:i}):n.addEventListener(e,t,!0):i!==void 0?n.addEventListener(e,t,{passive:i}):n.addEventListener(e,t,!1)}function ou(n,e,t,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=ui(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}Vg(function(){var c=s,d=af(t),h=[];e:{var p=ym.get(n);if(p!==void 0){var m=hf,w=n;switch(n){case"keypress":if(ua(t)===0)break e;case"keydown":case"keyup":m=Yv;break;case"focusin":w="focus",m=Zl;break;case"focusout":w="blur",m=Zl;break;case"beforeblur":case"afterblur":m=Zl;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Nd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=Jv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=Zv;break;case hm:case gm:case mm:m=Uv;break;case pm:m=t0;break;case"scroll":m=Fv;break;case"wheel":m=r0;break;case"copy":case"cut":case"paste":m=jv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Dd}var I=(e&4)!==0,O=!I&&n==="scroll",y=I?p!==null?p+"Capture":null:p;I=[];for(var g=c,v;g!==null;){v=g;var T=v.stateNode;if(v.tag===5&&T!==null&&(v=T,y!==null&&(T=Xs(g,y),T!=null&&I.push(so(g,T,v)))),O)break;g=g.return}0<I.length&&(p=new m(p,w,null,t,d),h.push({event:p,listeners:I}))}}if(!(e&7)){e:{if(p=n==="mouseover"||n==="pointerover",m=n==="mouseout"||n==="pointerout",p&&t!==Uu&&(w=t.relatedTarget||t.fromElement)&&(ui(w)||w[wr]))break e;if((m||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,m?(w=t.relatedTarget||t.toElement,m=c,w=w?ui(w):null,w!==null&&(O=Ci(w),w!==O||w.tag!==5&&w.tag!==6)&&(w=null)):(m=null,w=c),m!==w)){if(I=Nd,T="onMouseLeave",y="onMouseEnter",g="mouse",(n==="pointerout"||n==="pointerover")&&(I=Dd,T="onPointerLeave",y="onPointerEnter",g="pointer"),O=m==null?p:Ji(m),v=w==null?p:Ji(w),p=new I(T,g+"leave",m,t,d),p.target=O,p.relatedTarget=v,T=null,ui(d)===c&&(I=new I(y,g+"enter",w,t,d),I.target=v,I.relatedTarget=O,T=I),O=T,m&&w)t:{for(I=m,y=w,g=0,v=I;v;v=Pi(v))g++;for(v=0,T=y;T;T=Pi(T))v++;for(;0<g-v;)I=Pi(I),g--;for(;0<v-g;)y=Pi(y),v--;for(;g--;){if(I===y||y!==null&&I===y.alternate)break t;I=Pi(I),y=Pi(y)}I=null}else I=null;m!==null&&Ud(h,p,m,I,!1),w!==null&&O!==null&&Ud(h,O,w,I,!0)}}e:{if(p=c?Ji(c):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var x=c0;else if(Ld(p))if(lm)x=g0;else{x=d0;var N=f0}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(x=h0);if(x&&(x=x(n,c))){am(h,x,t,d);break e}N&&N(n,p,c),n==="focusout"&&(N=p._wrapperState)&&N.controlled&&p.type==="number"&&Fu(p,"number",p.value)}switch(N=c?Ji(c):window,n){case"focusin":(Ld(N)||N.contentEditable==="true")&&(Fi=N,_u=c,zs=null);break;case"focusout":zs=_u=Fi=null;break;case"mousedown":Gu=!0;break;case"contextmenu":case"mouseup":case"dragend":Gu=!1,Jd(h,t,d);break;case"selectionchange":if(y0)break;case"keydown":case"keyup":Jd(h,t,d)}var P;if(mf)e:{switch(n){case"compositionstart":var B="onCompositionStart";break e;case"compositionend":B="onCompositionEnd";break e;case"compositionupdate":B="onCompositionUpdate";break e}B=void 0}else bi?sm(n,t)&&(B="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(B="onCompositionStart");B&&(im&&t.locale!=="ko"&&(bi||B!=="onCompositionStart"?B==="onCompositionEnd"&&bi&&(P=rm()):(Br=d,df="value"in Br?Br.value:Br.textContent,bi=!0)),N=Oa(c,B),0<N.length&&(B=new Pd(B,n,null,t,d),h.push({event:B,listeners:N}),P?B.data=P:(P=om(t),P!==null&&(B.data=P)))),(P=s0?o0(n,t):a0(n,t))&&(c=Oa(c,"onBeforeInput"),0<c.length&&(d=new Pd("onBeforeInput","beforeinput",null,t,d),h.push({event:d,listeners:c}),d.data=P))}vm(h,e)})}function so(n,e,t){return{instance:n,listener:e,currentTarget:t}}function Oa(n,e){for(var t=e+"Capture",r=[];n!==null;){var i=n,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Xs(n,t),s!=null&&r.unshift(so(n,s,i)),s=Xs(n,e),s!=null&&r.push(so(n,s,i))),n=n.return}return r}function Pi(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Ud(n,e,t,r,i){for(var s=e._reactName,o=[];t!==null&&t!==r;){var a=t,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Xs(t,s),l!=null&&o.unshift(so(t,l,a))):i||(l=Xs(t,s),l!=null&&o.push(so(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var k0=/\r\n?/g,T0=/\u0000|\uFFFD/g;function Vd(n){return(typeof n=="string"?n:""+n).replace(k0,`
`).replace(T0,"")}function Wo(n,e,t){if(e=Vd(e),Vd(n)!==e&&t)throw Error(E(425))}function Ra(){}var Yu=null,Qu=null;function Xu(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Zu=typeof setTimeout=="function"?setTimeout:void 0,A0=typeof clearTimeout=="function"?clearTimeout:void 0,jd=typeof Promise=="function"?Promise:void 0,I0=typeof queueMicrotask=="function"?queueMicrotask:typeof jd<"u"?function(n){return jd.resolve(null).then(n).catch(E0)}:Zu;function E0(n){setTimeout(function(){throw n})}function au(n,e){var t=e,r=0;do{var i=t.nextSibling;if(n.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(r===0){n.removeChild(i),to(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=i}while(t);to(e)}function zr(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function qd(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var ws=Math.random().toString(36).slice(2),Kt="__reactFiber$"+ws,oo="__reactProps$"+ws,wr="__reactContainer$"+ws,ec="__reactEvents$"+ws,x0="__reactListeners$"+ws,C0="__reactHandles$"+ws;function ui(n){var e=n[Kt];if(e)return e;for(var t=n.parentNode;t;){if(e=t[wr]||t[Kt]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=qd(n);n!==null;){if(t=n[Kt])return t;n=qd(n)}return e}n=t,t=n.parentNode}return null}function Co(n){return n=n[Kt]||n[wr],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Ji(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(E(33))}function Al(n){return n[oo]||null}var tc=[],$i=-1;function ei(n){return{current:n}}function Z(n){0>$i||(n.current=tc[$i],tc[$i]=null,$i--)}function Q(n,e){$i++,tc[$i]=n.current,n.current=e}var Gr={},Oe=ei(Gr),qe=ei(!1),vi=Gr;function rs(n,e){var t=n.type.contextTypes;if(!t)return Gr;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in t)i[s]=e[s];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=i),i}function Ke(n){return n=n.childContextTypes,n!=null}function La(){Z(qe),Z(Oe)}function Kd(n,e,t){if(Oe.current!==Gr)throw Error(E(168));Q(Oe,e),Q(qe,t)}function Sm(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(E(108,fv(n)||"Unknown",i));return se({},t,r)}function Ba(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Gr,vi=Oe.current,Q(Oe,n),Q(qe,qe.current),!0}function Wd(n,e,t){var r=n.stateNode;if(!r)throw Error(E(169));t?(n=Sm(n,e,vi),r.__reactInternalMemoizedMergedChildContext=n,Z(qe),Z(Oe),Q(Oe,n)):Z(qe),Q(qe,t)}var ar=null,Il=!1,lu=!1;function km(n){ar===null?ar=[n]:ar.push(n)}function N0(n){Il=!0,km(n)}function ti(){if(!lu&&ar!==null){lu=!0;var n=0,e=G;try{var t=ar;for(G=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}ar=null,Il=!1}catch(i){throw ar!==null&&(ar=ar.slice(n+1)),Wg(lf,ti),i}finally{G=e,lu=!1}}return null}var zi=[],Ui=0,ba=null,Fa=0,at=[],lt=0,wi=null,cr=1,fr="";function si(n,e){zi[Ui++]=Fa,zi[Ui++]=ba,ba=n,Fa=e}function Tm(n,e,t){at[lt++]=cr,at[lt++]=fr,at[lt++]=wi,wi=n;var r=cr;n=fr;var i=32-Bt(r)-1;r&=~(1<<i),t+=1;var s=32-Bt(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,cr=1<<32-Bt(e)+i|t<<i|r,fr=s+n}else cr=1<<s|t<<i|r,fr=n}function yf(n){n.return!==null&&(si(n,1),Tm(n,1,0))}function vf(n){for(;n===ba;)ba=zi[--Ui],zi[Ui]=null,Fa=zi[--Ui],zi[Ui]=null;for(;n===wi;)wi=at[--lt],at[lt]=null,fr=at[--lt],at[lt]=null,cr=at[--lt],at[lt]=null}var et=null,Qe=null,ee=!1,Ot=null;function Am(n,e){var t=wt(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function Hd(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,et=n,Qe=zr(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,et=n,Qe=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=wi!==null?{id:cr,overflow:fr}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=wt(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,et=n,Qe=null,!0):!1;default:return!1}}function nc(n){return(n.mode&1)!==0&&(n.flags&128)===0}function rc(n){if(ee){var e=Qe;if(e){var t=e;if(!Hd(n,e)){if(nc(n))throw Error(E(418));e=zr(t.nextSibling);var r=et;e&&Hd(n,e)?Am(r,t):(n.flags=n.flags&-4097|2,ee=!1,et=n)}}else{if(nc(n))throw Error(E(418));n.flags=n.flags&-4097|2,ee=!1,et=n}}}function _d(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;et=n}function Ho(n){if(n!==et)return!1;if(!ee)return _d(n),ee=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!Xu(n.type,n.memoizedProps)),e&&(e=Qe)){if(nc(n))throw Im(),Error(E(418));for(;e;)Am(n,e),e=zr(e.nextSibling)}if(_d(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(E(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){Qe=zr(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}Qe=null}}else Qe=et?zr(n.stateNode.nextSibling):null;return!0}function Im(){for(var n=Qe;n;)n=zr(n.nextSibling)}function is(){Qe=et=null,ee=!1}function wf(n){Ot===null?Ot=[n]:Ot.push(n)}var P0=Ir.ReactCurrentBatchConfig;function Nt(n,e){if(n&&n.defaultProps){e=se({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}var Ma=ei(null),Ja=null,Vi=null,Sf=null;function kf(){Sf=Vi=Ja=null}function Tf(n){var e=Ma.current;Z(Ma),n._currentValue=e}function ic(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function Qi(n,e){Ja=n,Sf=Vi=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(Ve=!0),n.firstContext=null)}function At(n){var e=n._currentValue;if(Sf!==n)if(n={context:n,memoizedValue:e,next:null},Vi===null){if(Ja===null)throw Error(E(308));Vi=n,Ja.dependencies={lanes:0,firstContext:n}}else Vi=Vi.next=n;return e}var ci=null;function Af(n){ci===null?ci=[n]:ci.push(n)}function Em(n,e,t,r){var i=e.interleaved;return i===null?(t.next=t,Af(e)):(t.next=i.next,i.next=t),e.interleaved=t,Sr(n,r)}function Sr(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var Or=!1;function If(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function xm(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function mr(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function Ur(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,K&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Sr(n,t)}return i=r.interleaved,i===null?(e.next=e,Af(r)):(e.next=i.next,i.next=e),r.interleaved=e,Sr(n,t)}function ca(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,uf(n,t)}}function Gd(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var i=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?i=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?i=s=e:s=s.next=e}else i=s=e;t={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function $a(n,e,t,r){var i=n.updateQueue;Or=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var d=n.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(s!==null){var h=i.baseState;o=0,d=c=l=null,a=s;do{var p=a.lane,m=a.eventTime;if((r&p)===p){d!==null&&(d=d.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var w=n,I=a;switch(p=e,m=t,I.tag){case 1:if(w=I.payload,typeof w=="function"){h=w.call(m,h,p);break e}h=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=I.payload,p=typeof w=="function"?w.call(m,h,p):w,p==null)break e;h=se({},h,p);break e;case 2:Or=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=m,l=h):d=d.next=m,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(d===null&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);ki|=o,n.lanes=o,n.memoizedState=h}}function Yd(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],i=r.callback;if(i!==null){if(r.callback=null,r=t,typeof i!="function")throw Error(E(191,i));i.call(r)}}}var Cm=new Eg.Component().refs;function sc(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:se({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var El={isMounted:function(n){return(n=n._reactInternals)?Ci(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=Fe(),i=jr(n),s=mr(r,i);s.payload=e,t!=null&&(s.callback=t),e=Ur(n,s,i),e!==null&&(bt(e,n,i,r),ca(e,n,i))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=Fe(),i=jr(n),s=mr(r,i);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=Ur(n,s,i),e!==null&&(bt(e,n,i,r),ca(e,n,i))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Fe(),r=jr(n),i=mr(t,r);i.tag=2,e!=null&&(i.callback=e),e=Ur(n,i,r),e!==null&&(bt(e,n,r,t),ca(e,n,r))}};function Qd(n,e,t,r,i,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!ro(t,r)||!ro(i,s):!0}function Nm(n,e,t){var r=!1,i=Gr,s=e.contextType;return typeof s=="object"&&s!==null?s=At(s):(i=Ke(e)?vi:Oe.current,r=e.contextTypes,s=(r=r!=null)?rs(n,i):Gr),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=El,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=s),e}function Xd(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&El.enqueueReplaceState(e,e.state,null)}function oc(n,e,t,r){var i=n.stateNode;i.props=t,i.state=n.memoizedState,i.refs=Cm,If(n);var s=e.contextType;typeof s=="object"&&s!==null?i.context=At(s):(s=Ke(e)?vi:Oe.current,i.context=rs(n,s)),i.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(sc(n,e,s,t),i.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&El.enqueueReplaceState(i,i.state,null),$a(n,t,i,r),i.state=n.memoizedState),typeof i.componentDidMount=="function"&&(n.flags|=4194308)}function Cs(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(E(309));var r=t.stateNode}if(!r)throw Error(E(147,n));var i=r,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===Cm&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(E(284));if(!t._owner)throw Error(E(290,n))}return n}function _o(n,e){throw n=Object.prototype.toString.call(e),Error(E(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function Zd(n){var e=n._init;return e(n._payload)}function Pm(n){function e(y,g){if(n){var v=y.deletions;v===null?(y.deletions=[g],y.flags|=16):v.push(g)}}function t(y,g){if(!n)return null;for(;g!==null;)e(y,g),g=g.sibling;return null}function r(y,g){for(y=new Map;g!==null;)g.key!==null?y.set(g.key,g):y.set(g.index,g),g=g.sibling;return y}function i(y,g){return y=qr(y,g),y.index=0,y.sibling=null,y}function s(y,g,v){return y.index=v,n?(v=y.alternate,v!==null?(v=v.index,v<g?(y.flags|=2,g):v):(y.flags|=2,g)):(y.flags|=1048576,g)}function o(y){return n&&y.alternate===null&&(y.flags|=2),y}function a(y,g,v,T){return g===null||g.tag!==6?(g=mu(v,y.mode,T),g.return=y,g):(g=i(g,v),g.return=y,g)}function l(y,g,v,T){var x=v.type;return x===Bi?d(y,g,v.props.children,T,v.key):g!==null&&(g.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===Dr&&Zd(x)===g.type)?(T=i(g,v.props),T.ref=Cs(y,g,v),T.return=y,T):(T=pa(v.type,v.key,v.props,null,y.mode,T),T.ref=Cs(y,g,v),T.return=y,T)}function c(y,g,v,T){return g===null||g.tag!==4||g.stateNode.containerInfo!==v.containerInfo||g.stateNode.implementation!==v.implementation?(g=pu(v,y.mode,T),g.return=y,g):(g=i(g,v.children||[]),g.return=y,g)}function d(y,g,v,T,x){return g===null||g.tag!==7?(g=mi(v,y.mode,T,x),g.return=y,g):(g=i(g,v),g.return=y,g)}function h(y,g,v){if(typeof g=="string"&&g!==""||typeof g=="number")return g=mu(""+g,y.mode,v),g.return=y,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Mo:return v=pa(g.type,g.key,g.props,null,y.mode,v),v.ref=Cs(y,null,g),v.return=y,v;case Li:return g=pu(g,y.mode,v),g.return=y,g;case Dr:var T=g._init;return h(y,T(g._payload),v)}if(Ls(g)||Ts(g))return g=mi(g,y.mode,v,null),g.return=y,g;_o(y,g)}return null}function p(y,g,v,T){var x=g!==null?g.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return x!==null?null:a(y,g,""+v,T);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Mo:return v.key===x?l(y,g,v,T):null;case Li:return v.key===x?c(y,g,v,T):null;case Dr:return x=v._init,p(y,g,x(v._payload),T)}if(Ls(v)||Ts(v))return x!==null?null:d(y,g,v,T,null);_o(y,v)}return null}function m(y,g,v,T,x){if(typeof T=="string"&&T!==""||typeof T=="number")return y=y.get(v)||null,a(g,y,""+T,x);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Mo:return y=y.get(T.key===null?v:T.key)||null,l(g,y,T,x);case Li:return y=y.get(T.key===null?v:T.key)||null,c(g,y,T,x);case Dr:var N=T._init;return m(y,g,v,N(T._payload),x)}if(Ls(T)||Ts(T))return y=y.get(v)||null,d(g,y,T,x,null);_o(g,T)}return null}function w(y,g,v,T){for(var x=null,N=null,P=g,B=g=0,H=null;P!==null&&B<v.length;B++){P.index>B?(H=P,P=null):H=P.sibling;var U=p(y,P,v[B],T);if(U===null){P===null&&(P=H);break}n&&P&&U.alternate===null&&e(y,P),g=s(U,g,B),N===null?x=U:N.sibling=U,N=U,P=H}if(B===v.length)return t(y,P),ee&&si(y,B),x;if(P===null){for(;B<v.length;B++)P=h(y,v[B],T),P!==null&&(g=s(P,g,B),N===null?x=P:N.sibling=P,N=P);return ee&&si(y,B),x}for(P=r(y,P);B<v.length;B++)H=m(P,y,B,v[B],T),H!==null&&(n&&H.alternate!==null&&P.delete(H.key===null?B:H.key),g=s(H,g,B),N===null?x=H:N.sibling=H,N=H);return n&&P.forEach(function(Ge){return e(y,Ge)}),ee&&si(y,B),x}function I(y,g,v,T){var x=Ts(v);if(typeof x!="function")throw Error(E(150));if(v=x.call(v),v==null)throw Error(E(151));for(var N=x=null,P=g,B=g=0,H=null,U=v.next();P!==null&&!U.done;B++,U=v.next()){P.index>B?(H=P,P=null):H=P.sibling;var Ge=p(y,P,U.value,T);if(Ge===null){P===null&&(P=H);break}n&&P&&Ge.alternate===null&&e(y,P),g=s(Ge,g,B),N===null?x=Ge:N.sibling=Ge,N=Ge,P=H}if(U.done)return t(y,P),ee&&si(y,B),x;if(P===null){for(;!U.done;B++,U=v.next())U=h(y,U.value,T),U!==null&&(g=s(U,g,B),N===null?x=U:N.sibling=U,N=U);return ee&&si(y,B),x}for(P=r(y,P);!U.done;B++,U=v.next())U=m(P,y,B,U.value,T),U!==null&&(n&&U.alternate!==null&&P.delete(U.key===null?B:U.key),g=s(U,g,B),N===null?x=U:N.sibling=U,N=U);return n&&P.forEach(function(Ss){return e(y,Ss)}),ee&&si(y,B),x}function O(y,g,v,T){if(typeof v=="object"&&v!==null&&v.type===Bi&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Mo:e:{for(var x=v.key,N=g;N!==null;){if(N.key===x){if(x=v.type,x===Bi){if(N.tag===7){t(y,N.sibling),g=i(N,v.props.children),g.return=y,y=g;break e}}else if(N.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===Dr&&Zd(x)===N.type){t(y,N.sibling),g=i(N,v.props),g.ref=Cs(y,N,v),g.return=y,y=g;break e}t(y,N);break}else e(y,N);N=N.sibling}v.type===Bi?(g=mi(v.props.children,y.mode,T,v.key),g.return=y,y=g):(T=pa(v.type,v.key,v.props,null,y.mode,T),T.ref=Cs(y,g,v),T.return=y,y=T)}return o(y);case Li:e:{for(N=v.key;g!==null;){if(g.key===N)if(g.tag===4&&g.stateNode.containerInfo===v.containerInfo&&g.stateNode.implementation===v.implementation){t(y,g.sibling),g=i(g,v.children||[]),g.return=y,y=g;break e}else{t(y,g);break}else e(y,g);g=g.sibling}g=pu(v,y.mode,T),g.return=y,y=g}return o(y);case Dr:return N=v._init,O(y,g,N(v._payload),T)}if(Ls(v))return w(y,g,v,T);if(Ts(v))return I(y,g,v,T);_o(y,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,g!==null&&g.tag===6?(t(y,g.sibling),g=i(g,v),g.return=y,y=g):(t(y,g),g=mu(v,y.mode,T),g.return=y,y=g),o(y)):t(y,g)}return O}var ss=Pm(!0),Dm=Pm(!1),No={},rn=ei(No),ao=ei(No),lo=ei(No);function fi(n){if(n===No)throw Error(E(174));return n}function Ef(n,e){switch(Q(lo,e),Q(ao,n),Q(rn,No),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ju(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=Ju(e,n)}Z(rn),Q(rn,e)}function os(){Z(rn),Z(ao),Z(lo)}function Om(n){fi(lo.current);var e=fi(rn.current),t=Ju(e,n.type);e!==t&&(Q(ao,n),Q(rn,t))}function xf(n){ao.current===n&&(Z(rn),Z(ao))}var ne=ei(0);function za(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var uu=[];function Cf(){for(var n=0;n<uu.length;n++)uu[n]._workInProgressVersionPrimary=null;uu.length=0}var fa=Ir.ReactCurrentDispatcher,cu=Ir.ReactCurrentBatchConfig,Si=0,ie=null,ye=null,ke=null,Ua=!1,Us=!1,uo=0,D0=0;function Ce(){throw Error(E(321))}function Nf(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!Jt(n[t],e[t]))return!1;return!0}function Pf(n,e,t,r,i,s){if(Si=s,ie=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,fa.current=n===null||n.memoizedState===null?B0:b0,n=t(r,i),Us){s=0;do{if(Us=!1,uo=0,25<=s)throw Error(E(301));s+=1,ke=ye=null,e.updateQueue=null,fa.current=F0,n=t(r,i)}while(Us)}if(fa.current=Va,e=ye!==null&&ye.next!==null,Si=0,ke=ye=ie=null,Ua=!1,e)throw Error(E(300));return n}function Df(){var n=uo!==0;return uo=0,n}function Vt(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ke===null?ie.memoizedState=ke=n:ke=ke.next=n,ke}function It(){if(ye===null){var n=ie.alternate;n=n!==null?n.memoizedState:null}else n=ye.next;var e=ke===null?ie.memoizedState:ke.next;if(e!==null)ke=e,ye=n;else{if(n===null)throw Error(E(310));ye=n,n={memoizedState:ye.memoizedState,baseState:ye.baseState,baseQueue:ye.baseQueue,queue:ye.queue,next:null},ke===null?ie.memoizedState=ke=n:ke=ke.next=n}return ke}function co(n,e){return typeof e=="function"?e(n):e}function fu(n){var e=It(),t=e.queue;if(t===null)throw Error(E(311));t.lastRenderedReducer=n;var r=ye,i=r.baseQueue,s=t.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,t.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var d=c.lane;if((Si&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:n(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,ie.lanes|=d,ki|=d}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,Jt(r,e.memoizedState)||(Ve=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,t.lastRenderedState=r}if(n=t.interleaved,n!==null){i=n;do s=i.lane,ie.lanes|=s,ki|=s,i=i.next;while(i!==n)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function du(n){var e=It(),t=e.queue;if(t===null)throw Error(E(311));t.lastRenderedReducer=n;var r=t.dispatch,i=t.pending,s=e.memoizedState;if(i!==null){t.pending=null;var o=i=i.next;do s=n(s,o.action),o=o.next;while(o!==i);Jt(s,e.memoizedState)||(Ve=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,r]}function Rm(){}function Lm(n,e){var t=ie,r=It(),i=e(),s=!Jt(r.memoizedState,i);if(s&&(r.memoizedState=i,Ve=!0),r=r.queue,Of(Fm.bind(null,t,r,n),[n]),r.getSnapshot!==e||s||ke!==null&&ke.memoizedState.tag&1){if(t.flags|=2048,fo(9,bm.bind(null,t,r,i,e),void 0,null),Te===null)throw Error(E(349));Si&30||Bm(t,e,i)}return i}function Bm(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=ie.updateQueue,e===null?(e={lastEffect:null,stores:null},ie.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function bm(n,e,t,r){e.value=t,e.getSnapshot=r,Mm(e)&&Jm(n)}function Fm(n,e,t){return t(function(){Mm(e)&&Jm(n)})}function Mm(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Jt(n,t)}catch{return!0}}function Jm(n){var e=Sr(n,1);e!==null&&bt(e,n,1,-1)}function eh(n){var e=Vt();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:co,lastRenderedState:n},e.queue=n,n=n.dispatch=L0.bind(null,ie,n),[e.memoizedState,n]}function fo(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=ie.updateQueue,e===null?(e={lastEffect:null,stores:null},ie.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function $m(){return It().memoizedState}function da(n,e,t,r){var i=Vt();ie.flags|=n,i.memoizedState=fo(1|e,t,void 0,r===void 0?null:r)}function xl(n,e,t,r){var i=It();r=r===void 0?null:r;var s=void 0;if(ye!==null){var o=ye.memoizedState;if(s=o.destroy,r!==null&&Nf(r,o.deps)){i.memoizedState=fo(e,t,s,r);return}}ie.flags|=n,i.memoizedState=fo(1|e,t,s,r)}function th(n,e){return da(8390656,8,n,e)}function Of(n,e){return xl(2048,8,n,e)}function zm(n,e){return xl(4,2,n,e)}function Um(n,e){return xl(4,4,n,e)}function Vm(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function jm(n,e,t){return t=t!=null?t.concat([n]):null,xl(4,4,Vm.bind(null,e,n),t)}function Rf(){}function qm(n,e){var t=It();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&Nf(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function Km(n,e){var t=It();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&Nf(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function Wm(n,e,t){return Si&21?(Jt(t,e)||(t=Gg(),ie.lanes|=t,ki|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,Ve=!0),n.memoizedState=t)}function O0(n,e){var t=G;G=t!==0&&4>t?t:4,n(!0);var r=cu.transition;cu.transition={};try{n(!1),e()}finally{G=t,cu.transition=r}}function Hm(){return It().memoizedState}function R0(n,e,t){var r=jr(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},_m(n))Gm(e,t);else if(t=Em(n,e,t,r),t!==null){var i=Fe();bt(t,n,r,i),Ym(t,e,r)}}function L0(n,e,t){var r=jr(n),i={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(_m(n))Gm(e,i);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(i.hasEagerState=!0,i.eagerState=a,Jt(a,o)){var l=e.interleaved;l===null?(i.next=i,Af(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}t=Em(n,e,i,r),t!==null&&(i=Fe(),bt(t,n,r,i),Ym(t,e,r))}}function _m(n){var e=n.alternate;return n===ie||e!==null&&e===ie}function Gm(n,e){Us=Ua=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function Ym(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,uf(n,t)}}var Va={readContext:At,useCallback:Ce,useContext:Ce,useEffect:Ce,useImperativeHandle:Ce,useInsertionEffect:Ce,useLayoutEffect:Ce,useMemo:Ce,useReducer:Ce,useRef:Ce,useState:Ce,useDebugValue:Ce,useDeferredValue:Ce,useTransition:Ce,useMutableSource:Ce,useSyncExternalStore:Ce,useId:Ce,unstable_isNewReconciler:!1},B0={readContext:At,useCallback:function(n,e){return Vt().memoizedState=[n,e===void 0?null:e],n},useContext:At,useEffect:th,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,da(4194308,4,Vm.bind(null,e,n),t)},useLayoutEffect:function(n,e){return da(4194308,4,n,e)},useInsertionEffect:function(n,e){return da(4,2,n,e)},useMemo:function(n,e){var t=Vt();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=Vt();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=R0.bind(null,ie,n),[r.memoizedState,n]},useRef:function(n){var e=Vt();return n={current:n},e.memoizedState=n},useState:eh,useDebugValue:Rf,useDeferredValue:function(n){return Vt().memoizedState=n},useTransition:function(){var n=eh(!1),e=n[0];return n=O0.bind(null,n[1]),Vt().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=ie,i=Vt();if(ee){if(t===void 0)throw Error(E(407));t=t()}else{if(t=e(),Te===null)throw Error(E(349));Si&30||Bm(r,e,t)}i.memoizedState=t;var s={value:t,getSnapshot:e};return i.queue=s,th(Fm.bind(null,r,s,n),[n]),r.flags|=2048,fo(9,bm.bind(null,r,s,t,e),void 0,null),t},useId:function(){var n=Vt(),e=Te.identifierPrefix;if(ee){var t=fr,r=cr;t=(r&~(1<<32-Bt(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=uo++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=D0++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},b0={readContext:At,useCallback:qm,useContext:At,useEffect:Of,useImperativeHandle:jm,useInsertionEffect:zm,useLayoutEffect:Um,useMemo:Km,useReducer:fu,useRef:$m,useState:function(){return fu(co)},useDebugValue:Rf,useDeferredValue:function(n){var e=It();return Wm(e,ye.memoizedState,n)},useTransition:function(){var n=fu(co)[0],e=It().memoizedState;return[n,e]},useMutableSource:Rm,useSyncExternalStore:Lm,useId:Hm,unstable_isNewReconciler:!1},F0={readContext:At,useCallback:qm,useContext:At,useEffect:Of,useImperativeHandle:jm,useInsertionEffect:zm,useLayoutEffect:Um,useMemo:Km,useReducer:du,useRef:$m,useState:function(){return du(co)},useDebugValue:Rf,useDeferredValue:function(n){var e=It();return ye===null?e.memoizedState=n:Wm(e,ye.memoizedState,n)},useTransition:function(){var n=du(co)[0],e=It().memoizedState;return[n,e]},useMutableSource:Rm,useSyncExternalStore:Lm,useId:Hm,unstable_isNewReconciler:!1};function as(n,e){try{var t="",r=e;do t+=cv(r),r=r.return;while(r);var i=t}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:i,digest:null}}function hu(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function ac(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var M0=typeof WeakMap=="function"?WeakMap:Map;function Qm(n,e,t){t=mr(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){qa||(qa=!0,yc=r),ac(n,e)},t}function Xm(n,e,t){t=mr(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;t.payload=function(){return r(i)},t.callback=function(){ac(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){ac(n,e),typeof r!="function"&&(Vr===null?Vr=new Set([this]):Vr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function nh(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new M0;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(t)||(i.add(t),n=Q0.bind(null,n,e,t),e.then(n,n))}function rh(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function ih(n,e,t,r,i){return n.mode&1?(n.flags|=65536,n.lanes=i,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=mr(-1,1),e.tag=2,Ur(t,e,1))),t.lanes|=1),n)}var J0=Ir.ReactCurrentOwner,Ve=!1;function Le(n,e,t,r){e.child=n===null?Dm(e,null,t,r):ss(e,n.child,t,r)}function sh(n,e,t,r,i){t=t.render;var s=e.ref;return Qi(e,i),r=Pf(n,e,t,r,s,i),t=Df(),n!==null&&!Ve?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,kr(n,e,i)):(ee&&t&&yf(e),e.flags|=1,Le(n,e,r,i),e.child)}function oh(n,e,t,r,i){if(n===null){var s=t.type;return typeof s=="function"&&!zf(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,Zm(n,e,s,r,i)):(n=pa(t.type,null,r,e,e.mode,i),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&i)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:ro,t(o,r)&&n.ref===e.ref)return kr(n,e,i)}return e.flags|=1,n=qr(s,r),n.ref=e.ref,n.return=e,e.child=n}function Zm(n,e,t,r,i){if(n!==null){var s=n.memoizedProps;if(ro(s,r)&&n.ref===e.ref)if(Ve=!1,e.pendingProps=r=s,(n.lanes&i)!==0)n.flags&131072&&(Ve=!0);else return e.lanes=n.lanes,kr(n,e,i)}return lc(n,e,t,r,i)}function ep(n,e,t){var r=e.pendingProps,i=r.children,s=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Q(qi,Ye),Ye|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,Q(qi,Ye),Ye|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:t,Q(qi,Ye),Ye|=r}else s!==null?(r=s.baseLanes|t,e.memoizedState=null):r=t,Q(qi,Ye),Ye|=r;return Le(n,e,i,t),e.child}function tp(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function lc(n,e,t,r,i){var s=Ke(t)?vi:Oe.current;return s=rs(e,s),Qi(e,i),t=Pf(n,e,t,r,s,i),r=Df(),n!==null&&!Ve?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,kr(n,e,i)):(ee&&r&&yf(e),e.flags|=1,Le(n,e,t,i),e.child)}function ah(n,e,t,r,i){if(Ke(t)){var s=!0;Ba(e)}else s=!1;if(Qi(e,i),e.stateNode===null)ha(n,e),Nm(e,t,r),oc(e,t,r,i),r=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=t.contextType;typeof c=="object"&&c!==null?c=At(c):(c=Ke(t)?vi:Oe.current,c=rs(e,c));var d=t.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&Xd(e,o,r,c),Or=!1;var p=e.memoizedState;o.state=p,$a(e,r,o,i),l=e.memoizedState,a!==r||p!==l||qe.current||Or?(typeof d=="function"&&(sc(e,t,d,r),l=e.memoizedState),(a=Or||Qd(e,t,a,r,p,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,xm(n,e),a=e.memoizedProps,c=e.type===e.elementType?a:Nt(e.type,a),o.props=c,h=e.pendingProps,p=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=At(l):(l=Ke(t)?vi:Oe.current,l=rs(e,l));var m=t.getDerivedStateFromProps;(d=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||p!==l)&&Xd(e,o,r,l),Or=!1,p=e.memoizedState,o.state=p,$a(e,r,o,i);var w=e.memoizedState;a!==h||p!==w||qe.current||Or?(typeof m=="function"&&(sc(e,t,m,r),w=e.memoizedState),(c=Or||Qd(e,t,c,r,p,w,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,w,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,w,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=w),o.props=r,o.state=w,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),r=!1)}return uc(n,e,t,r,s,i)}function uc(n,e,t,r,i,s){tp(n,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Wd(e,t,!1),kr(n,e,s);r=e.stateNode,J0.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&o?(e.child=ss(e,n.child,null,s),e.child=ss(e,null,a,s)):Le(n,e,a,s),e.memoizedState=r.state,i&&Wd(e,t,!0),e.child}function np(n){var e=n.stateNode;e.pendingContext?Kd(n,e.pendingContext,e.pendingContext!==e.context):e.context&&Kd(n,e.context,!1),Ef(n,e.containerInfo)}function lh(n,e,t,r,i){return is(),wf(i),e.flags|=256,Le(n,e,t,r),e.child}var cc={dehydrated:null,treeContext:null,retryLane:0};function fc(n){return{baseLanes:n,cachePool:null,transitions:null}}function rp(n,e,t){var r=e.pendingProps,i=ne.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(i|=1),Q(ne,i&1),n===null)return rc(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,n=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Pl(o,r,0,null),n=mi(n,r,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=fc(t),e.memoizedState=cc,n):Lf(e,o));if(i=n.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return $0(n,e,o,r,a,i,t);if(s){s=r.fallback,o=e.mode,i=n.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=qr(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=qr(a,s):(s=mi(s,o,t,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=n.child.memoizedState,o=o===null?fc(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=cc,r}return s=n.child,n=s.sibling,r=qr(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function Lf(n,e){return e=Pl({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function Go(n,e,t,r){return r!==null&&wf(r),ss(e,n.child,null,t),n=Lf(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function $0(n,e,t,r,i,s,o){if(t)return e.flags&256?(e.flags&=-257,r=hu(Error(E(422))),Go(n,e,o,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Pl({mode:"visible",children:r.children},i,0,null),s=mi(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&ss(e,n.child,null,o),e.child.memoizedState=fc(o),e.memoizedState=cc,s);if(!(e.mode&1))return Go(n,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(E(419)),r=hu(s,r,void 0),Go(n,e,o,r)}if(a=(o&n.childLanes)!==0,Ve||a){if(r=Te,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Sr(n,i),bt(r,n,i,-1))}return $f(),r=hu(Error(E(421))),Go(n,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=n.child,e=X0.bind(null,n),i._reactRetry=e,null):(n=s.treeContext,Qe=zr(i.nextSibling),et=e,ee=!0,Ot=null,n!==null&&(at[lt++]=cr,at[lt++]=fr,at[lt++]=wi,cr=n.id,fr=n.overflow,wi=e),e=Lf(e,r.children),e.flags|=4096,e)}function uh(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),ic(n.return,e,t)}function gu(n,e,t,r,i){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=t,s.tailMode=i)}function ip(n,e,t){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Le(n,e,r.children,t),r=ne.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&uh(n,t,e);else if(n.tag===19)uh(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(Q(ne,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)n=t.alternate,n!==null&&za(n)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),gu(e,!1,i,t,s);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(n=i.alternate,n!==null&&za(n)===null){e.child=i;break}n=i.sibling,i.sibling=t,t=i,i=n}gu(e,!0,t,null,s);break;case"together":gu(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ha(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function kr(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),ki|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(E(153));if(e.child!==null){for(n=e.child,t=qr(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=qr(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function z0(n,e,t){switch(e.tag){case 3:np(e),is();break;case 5:Om(e);break;case 1:Ke(e.type)&&Ba(e);break;case 4:Ef(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Q(Ma,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Q(ne,ne.current&1),e.flags|=128,null):t&e.child.childLanes?rp(n,e,t):(Q(ne,ne.current&1),n=kr(n,e,t),n!==null?n.sibling:null);Q(ne,ne.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return ip(n,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Q(ne,ne.current),r)break;return null;case 22:case 23:return e.lanes=0,ep(n,e,t)}return kr(n,e,t)}var sp,dc,op,ap;sp=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};dc=function(){};op=function(n,e,t,r){var i=n.memoizedProps;if(i!==r){n=e.stateNode,fi(rn.current);var s=null;switch(t){case"input":i=Bu(n,i),r=Bu(n,r),s=[];break;case"select":i=se({},i,{value:void 0}),r=se({},r,{value:void 0}),s=[];break;case"textarea":i=Mu(n,i),r=Mu(n,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=Ra)}$u(t,r);var o;t=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Ys.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(s||(s=[]),s.push(c,t)),t=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Ys.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&X("scroll",n),s||a===l||(s=[])):(s=s||[]).push(c,l))}t&&(s=s||[]).push("style",t);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};ap=function(n,e,t,r){t!==r&&(e.flags|=4)};function Ns(n,e){if(!ee)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function Ne(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=n,i=i.sibling;else for(i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=n,i=i.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function U0(n,e,t){var r=e.pendingProps;switch(vf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ne(e),null;case 1:return Ke(e.type)&&La(),Ne(e),null;case 3:return r=e.stateNode,os(),Z(qe),Z(Oe),Cf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(Ho(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ot!==null&&(Sc(Ot),Ot=null))),dc(n,e),Ne(e),null;case 5:xf(e);var i=fi(lo.current);if(t=e.type,n!==null&&e.stateNode!=null)op(n,e,t,r,i),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(E(166));return Ne(e),null}if(n=fi(rn.current),Ho(e)){r=e.stateNode,t=e.type;var s=e.memoizedProps;switch(r[Kt]=e,r[oo]=s,n=(e.mode&1)!==0,t){case"dialog":X("cancel",r),X("close",r);break;case"iframe":case"object":case"embed":X("load",r);break;case"video":case"audio":for(i=0;i<bs.length;i++)X(bs[i],r);break;case"source":X("error",r);break;case"img":case"image":case"link":X("error",r),X("load",r);break;case"details":X("toggle",r);break;case"input":vd(r,s),X("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},X("invalid",r);break;case"textarea":Sd(r,s),X("invalid",r)}$u(t,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Wo(r.textContent,a,n),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Wo(r.textContent,a,n),i=["children",""+a]):Ys.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&X("scroll",r)}switch(t){case"input":Jo(r),wd(r,s,!0);break;case"textarea":Jo(r),kd(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Ra)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Bg(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=o.createElement(t,{is:r.is}):(n=o.createElement(t),t==="select"&&(o=n,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):n=o.createElementNS(n,t),n[Kt]=e,n[oo]=r,sp(n,e,!1,!1),e.stateNode=n;e:{switch(o=zu(t,r),t){case"dialog":X("cancel",n),X("close",n),i=r;break;case"iframe":case"object":case"embed":X("load",n),i=r;break;case"video":case"audio":for(i=0;i<bs.length;i++)X(bs[i],n);i=r;break;case"source":X("error",n),i=r;break;case"img":case"image":case"link":X("error",n),X("load",n),i=r;break;case"details":X("toggle",n),i=r;break;case"input":vd(n,r),i=Bu(n,r),X("invalid",n);break;case"option":i=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},i=se({},r,{value:void 0}),X("invalid",n);break;case"textarea":Sd(n,r),i=Mu(n,r),X("invalid",n);break;default:i=r}$u(t,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?Mg(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&bg(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&Qs(n,l):typeof l=="number"&&Qs(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Ys.hasOwnProperty(s)?l!=null&&s==="onScroll"&&X("scroll",n):l!=null&&nf(n,s,l,o))}switch(t){case"input":Jo(n),wd(n,r,!1);break;case"textarea":Jo(n),kd(n);break;case"option":r.value!=null&&n.setAttribute("value",""+_r(r.value));break;case"select":n.multiple=!!r.multiple,s=r.value,s!=null?Hi(n,!!r.multiple,s,!1):r.defaultValue!=null&&Hi(n,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(n.onclick=Ra)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ne(e),null;case 6:if(n&&e.stateNode!=null)ap(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(E(166));if(t=fi(lo.current),fi(rn.current),Ho(e)){if(r=e.stateNode,t=e.memoizedProps,r[Kt]=e,(s=r.nodeValue!==t)&&(n=et,n!==null))switch(n.tag){case 3:Wo(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Wo(r.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[Kt]=e,e.stateNode=r}return Ne(e),null;case 13:if(Z(ne),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(ee&&Qe!==null&&e.mode&1&&!(e.flags&128))Im(),is(),e.flags|=98560,s=!1;else if(s=Ho(e),r!==null&&r.dehydrated!==null){if(n===null){if(!s)throw Error(E(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(E(317));s[Kt]=e}else is(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ne(e),s=!1}else Ot!==null&&(Sc(Ot),Ot=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(n===null||ne.current&1?we===0&&(we=3):$f())),e.updateQueue!==null&&(e.flags|=4),Ne(e),null);case 4:return os(),dc(n,e),n===null&&io(e.stateNode.containerInfo),Ne(e),null;case 10:return Tf(e.type._context),Ne(e),null;case 17:return Ke(e.type)&&La(),Ne(e),null;case 19:if(Z(ne),s=e.memoizedState,s===null)return Ne(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Ns(s,!1);else{if(we!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=za(n),o!==null){for(e.flags|=128,Ns(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)s=t,n=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return Q(ne,ne.current&1|2),e.child}n=n.sibling}s.tail!==null&&de()>ls&&(e.flags|=128,r=!0,Ns(s,!1),e.lanes=4194304)}else{if(!r)if(n=za(o),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Ns(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!ee)return Ne(e),null}else 2*de()-s.renderingStartTime>ls&&t!==1073741824&&(e.flags|=128,r=!0,Ns(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=de(),e.sibling=null,t=ne.current,Q(ne,r?t&1|2:t&1),e):(Ne(e),null);case 22:case 23:return Jf(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ye&1073741824&&(Ne(e),e.subtreeFlags&6&&(e.flags|=8192)):Ne(e),null;case 24:return null;case 25:return null}throw Error(E(156,e.tag))}function V0(n,e){switch(vf(e),e.tag){case 1:return Ke(e.type)&&La(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return os(),Z(qe),Z(Oe),Cf(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return xf(e),null;case 13:if(Z(ne),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(E(340));is()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return Z(ne),null;case 4:return os(),null;case 10:return Tf(e.type._context),null;case 22:case 23:return Jf(),null;case 24:return null;default:return null}}var Yo=!1,Pe=!1,j0=typeof WeakSet=="function"?WeakSet:Set,R=null;function ji(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){ae(n,e,r)}else t.current=null}function hc(n,e,t){try{t()}catch(r){ae(n,e,r)}}var ch=!1;function q0(n,e){if(Yu=Pa,n=fm(),pf(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,c=0,d=0,h=n,p=null;t:for(;;){for(var m;h!==t||i!==0&&h.nodeType!==3||(a=o+i),h!==s||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(m=h.firstChild)!==null;)p=h,h=m;for(;;){if(h===n)break t;if(p===t&&++c===i&&(a=o),p===s&&++d===r&&(l=o),(m=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=m}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(Qu={focusedElem:n,selectionRange:t},Pa=!1,R=e;R!==null;)if(e=R,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,R=n;else for(;R!==null;){e=R;try{var w=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var I=w.memoizedProps,O=w.memoizedState,y=e.stateNode,g=y.getSnapshotBeforeUpdate(e.elementType===e.type?I:Nt(e.type,I),O);y.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(E(163))}}catch(T){ae(e,e.return,T)}if(n=e.sibling,n!==null){n.return=e.return,R=n;break}R=e.return}return w=ch,ch=!1,w}function Vs(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&n)===n){var s=i.destroy;i.destroy=void 0,s!==void 0&&hc(e,t,s)}i=i.next}while(i!==r)}}function Cl(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function gc(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function lp(n){var e=n.alternate;e!==null&&(n.alternate=null,lp(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Kt],delete e[oo],delete e[ec],delete e[x0],delete e[C0])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function up(n){return n.tag===5||n.tag===3||n.tag===4}function fh(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||up(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function mc(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=Ra));else if(r!==4&&(n=n.child,n!==null))for(mc(n,e,t),n=n.sibling;n!==null;)mc(n,e,t),n=n.sibling}function pc(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(pc(n,e,t),n=n.sibling;n!==null;)pc(n,e,t),n=n.sibling}var Ae=null,Dt=!1;function xr(n,e,t){for(t=t.child;t!==null;)cp(n,e,t),t=t.sibling}function cp(n,e,t){if(nn&&typeof nn.onCommitFiberUnmount=="function")try{nn.onCommitFiberUnmount(wl,t)}catch{}switch(t.tag){case 5:Pe||ji(t,e);case 6:var r=Ae,i=Dt;Ae=null,xr(n,e,t),Ae=r,Dt=i,Ae!==null&&(Dt?(n=Ae,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):Ae.removeChild(t.stateNode));break;case 18:Ae!==null&&(Dt?(n=Ae,t=t.stateNode,n.nodeType===8?au(n.parentNode,t):n.nodeType===1&&au(n,t),to(n)):au(Ae,t.stateNode));break;case 4:r=Ae,i=Dt,Ae=t.stateNode.containerInfo,Dt=!0,xr(n,e,t),Ae=r,Dt=i;break;case 0:case 11:case 14:case 15:if(!Pe&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&hc(t,e,o),i=i.next}while(i!==r)}xr(n,e,t);break;case 1:if(!Pe&&(ji(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(a){ae(t,e,a)}xr(n,e,t);break;case 21:xr(n,e,t);break;case 22:t.mode&1?(Pe=(r=Pe)||t.memoizedState!==null,xr(n,e,t),Pe=r):xr(n,e,t);break;default:xr(n,e,t)}}function dh(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new j0),e.forEach(function(r){var i=Z0.bind(null,n,r);t.has(r)||(t.add(r),r.then(i,i))})}}function Ct(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var i=t[r];try{var s=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Ae=a.stateNode,Dt=!1;break e;case 3:Ae=a.stateNode.containerInfo,Dt=!0;break e;case 4:Ae=a.stateNode.containerInfo,Dt=!0;break e}a=a.return}if(Ae===null)throw Error(E(160));cp(s,o,i),Ae=null,Dt=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){ae(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)fp(e,n),e=e.sibling}function fp(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Ct(e,n),Ut(n),r&4){try{Vs(3,n,n.return),Cl(3,n)}catch(I){ae(n,n.return,I)}try{Vs(5,n,n.return)}catch(I){ae(n,n.return,I)}}break;case 1:Ct(e,n),Ut(n),r&512&&t!==null&&ji(t,t.return);break;case 5:if(Ct(e,n),Ut(n),r&512&&t!==null&&ji(t,t.return),n.flags&32){var i=n.stateNode;try{Qs(i,"")}catch(I){ae(n,n.return,I)}}if(r&4&&(i=n.stateNode,i!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&Rg(i,s),zu(a,o);var c=zu(a,s);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?Mg(i,h):d==="dangerouslySetInnerHTML"?bg(i,h):d==="children"?Qs(i,h):nf(i,d,h,c)}switch(a){case"input":bu(i,s);break;case"textarea":Lg(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?Hi(i,!!s.multiple,m,!1):p!==!!s.multiple&&(s.defaultValue!=null?Hi(i,!!s.multiple,s.defaultValue,!0):Hi(i,!!s.multiple,s.multiple?[]:"",!1))}i[oo]=s}catch(I){ae(n,n.return,I)}}break;case 6:if(Ct(e,n),Ut(n),r&4){if(n.stateNode===null)throw Error(E(162));i=n.stateNode,s=n.memoizedProps;try{i.nodeValue=s}catch(I){ae(n,n.return,I)}}break;case 3:if(Ct(e,n),Ut(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{to(e.containerInfo)}catch(I){ae(n,n.return,I)}break;case 4:Ct(e,n),Ut(n);break;case 13:Ct(e,n),Ut(n),i=n.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Ff=de())),r&4&&dh(n);break;case 22:if(d=t!==null&&t.memoizedState!==null,n.mode&1?(Pe=(c=Pe)||d,Ct(e,n),Pe=c):Ct(e,n),Ut(n),r&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!d&&n.mode&1)for(R=n,d=n.child;d!==null;){for(h=R=d;R!==null;){switch(p=R,m=p.child,p.tag){case 0:case 11:case 14:case 15:Vs(4,p,p.return);break;case 1:ji(p,p.return);var w=p.stateNode;if(typeof w.componentWillUnmount=="function"){r=p,t=p.return;try{e=r,w.props=e.memoizedProps,w.state=e.memoizedState,w.componentWillUnmount()}catch(I){ae(r,t,I)}}break;case 5:ji(p,p.return);break;case 22:if(p.memoizedState!==null){gh(h);continue}}m!==null?(m.return=p,R=m):gh(h)}d=d.sibling}e:for(d=null,h=n;;){if(h.tag===5){if(d===null){d=h;try{i=h.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Fg("display",o))}catch(I){ae(n,n.return,I)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(I){ae(n,n.return,I)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===n)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===n)break e;for(;h.sibling===null;){if(h.return===null||h.return===n)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Ct(e,n),Ut(n),r&4&&dh(n);break;case 21:break;default:Ct(e,n),Ut(n)}}function Ut(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(up(t)){var r=t;break e}t=t.return}throw Error(E(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Qs(i,""),r.flags&=-33);var s=fh(n);pc(n,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=fh(n);mc(n,a,o);break;default:throw Error(E(161))}}catch(l){ae(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function K0(n,e,t){R=n,dp(n)}function dp(n,e,t){for(var r=(n.mode&1)!==0;R!==null;){var i=R,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Yo;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Pe;a=Yo;var c=Pe;if(Yo=o,(Pe=l)&&!c)for(R=i;R!==null;)o=R,l=o.child,o.tag===22&&o.memoizedState!==null?mh(i):l!==null?(l.return=o,R=l):mh(i);for(;s!==null;)R=s,dp(s),s=s.sibling;R=i,Yo=a,Pe=c}hh(n)}else i.subtreeFlags&8772&&s!==null?(s.return=i,R=s):hh(n)}}function hh(n){for(;R!==null;){var e=R;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Pe||Cl(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Pe)if(t===null)r.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:Nt(e.type,t.memoizedProps);r.componentDidUpdate(i,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Yd(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}Yd(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&to(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(E(163))}Pe||e.flags&512&&gc(e)}catch(p){ae(e,e.return,p)}}if(e===n){R=null;break}if(t=e.sibling,t!==null){t.return=e.return,R=t;break}R=e.return}}function gh(n){for(;R!==null;){var e=R;if(e===n){R=null;break}var t=e.sibling;if(t!==null){t.return=e.return,R=t;break}R=e.return}}function mh(n){for(;R!==null;){var e=R;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{Cl(4,e)}catch(l){ae(e,t,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){ae(e,i,l)}}var s=e.return;try{gc(e)}catch(l){ae(e,s,l)}break;case 5:var o=e.return;try{gc(e)}catch(l){ae(e,o,l)}}}catch(l){ae(e,e.return,l)}if(e===n){R=null;break}var a=e.sibling;if(a!==null){a.return=e.return,R=a;break}R=e.return}}var W0=Math.ceil,ja=Ir.ReactCurrentDispatcher,Bf=Ir.ReactCurrentOwner,Tt=Ir.ReactCurrentBatchConfig,K=0,Te=null,me=null,Ie=0,Ye=0,qi=ei(0),we=0,ho=null,ki=0,Nl=0,bf=0,js=null,ze=null,Ff=0,ls=1/0,an=null,qa=!1,yc=null,Vr=null,Qo=!1,br=null,Ka=0,qs=0,vc=null,ga=-1,ma=0;function Fe(){return K&6?de():ga!==-1?ga:ga=de()}function jr(n){return n.mode&1?K&2&&Ie!==0?Ie&-Ie:P0.transition!==null?(ma===0&&(ma=Gg()),ma):(n=G,n!==0||(n=window.event,n=n===void 0?16:nm(n.type)),n):1}function bt(n,e,t,r){if(50<qs)throw qs=0,vc=null,Error(E(185));Eo(n,t,r),(!(K&2)||n!==Te)&&(n===Te&&(!(K&2)&&(Nl|=t),we===4&&Lr(n,Ie)),We(n,r),t===1&&K===0&&!(e.mode&1)&&(ls=de()+500,Il&&ti()))}function We(n,e){var t=n.callbackNode;Pv(n,e);var r=Na(n,n===Te?Ie:0);if(r===0)t!==null&&Id(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&Id(t),e===1)n.tag===0?N0(ph.bind(null,n)):km(ph.bind(null,n)),I0(function(){!(K&6)&&ti()}),t=null;else{switch(Yg(r)){case 1:t=lf;break;case 4:t=Hg;break;case 16:t=Ca;break;case 536870912:t=_g;break;default:t=Ca}t=Sp(t,hp.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function hp(n,e){if(ga=-1,ma=0,K&6)throw Error(E(327));var t=n.callbackNode;if(Xi()&&n.callbackNode!==t)return null;var r=Na(n,n===Te?Ie:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=Wa(n,r);else{e=r;var i=K;K|=2;var s=mp();(Te!==n||Ie!==e)&&(an=null,ls=de()+500,gi(n,e));do try{G0();break}catch(a){gp(n,a)}while(!0);kf(),ja.current=s,K=i,me!==null?e=0:(Te=null,Ie=0,e=we)}if(e!==0){if(e===2&&(i=Ku(n),i!==0&&(r=i,e=wc(n,i))),e===1)throw t=ho,gi(n,0),Lr(n,r),We(n,de()),t;if(e===6)Lr(n,r);else{if(i=n.current.alternate,!(r&30)&&!H0(i)&&(e=Wa(n,r),e===2&&(s=Ku(n),s!==0&&(r=s,e=wc(n,s))),e===1))throw t=ho,gi(n,0),Lr(n,r),We(n,de()),t;switch(n.finishedWork=i,n.finishedLanes=r,e){case 0:case 1:throw Error(E(345));case 2:oi(n,ze,an);break;case 3:if(Lr(n,r),(r&130023424)===r&&(e=Ff+500-de(),10<e)){if(Na(n,0)!==0)break;if(i=n.suspendedLanes,(i&r)!==r){Fe(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=Zu(oi.bind(null,n,ze,an),e);break}oi(n,ze,an);break;case 4:if(Lr(n,r),(r&4194240)===r)break;for(e=n.eventTimes,i=-1;0<r;){var o=31-Bt(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=de()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*W0(r/1960))-r,10<r){n.timeoutHandle=Zu(oi.bind(null,n,ze,an),r);break}oi(n,ze,an);break;case 5:oi(n,ze,an);break;default:throw Error(E(329))}}}return We(n,de()),n.callbackNode===t?hp.bind(null,n):null}function wc(n,e){var t=js;return n.current.memoizedState.isDehydrated&&(gi(n,e).flags|=256),n=Wa(n,e),n!==2&&(e=ze,ze=t,e!==null&&Sc(e)),n}function Sc(n){ze===null?ze=n:ze.push.apply(ze,n)}function H0(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var i=t[r],s=i.getSnapshot;i=i.value;try{if(!Jt(s(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Lr(n,e){for(e&=~bf,e&=~Nl,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-Bt(e),r=1<<t;n[t]=-1,e&=~r}}function ph(n){if(K&6)throw Error(E(327));Xi();var e=Na(n,0);if(!(e&1))return We(n,de()),null;var t=Wa(n,e);if(n.tag!==0&&t===2){var r=Ku(n);r!==0&&(e=r,t=wc(n,r))}if(t===1)throw t=ho,gi(n,0),Lr(n,e),We(n,de()),t;if(t===6)throw Error(E(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,oi(n,ze,an),We(n,de()),null}function Mf(n,e){var t=K;K|=1;try{return n(e)}finally{K=t,K===0&&(ls=de()+500,Il&&ti())}}function Ti(n){br!==null&&br.tag===0&&!(K&6)&&Xi();var e=K;K|=1;var t=Tt.transition,r=G;try{if(Tt.transition=null,G=1,n)return n()}finally{G=r,Tt.transition=t,K=e,!(K&6)&&ti()}}function Jf(){Ye=qi.current,Z(qi)}function gi(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,A0(t)),me!==null)for(t=me.return;t!==null;){var r=t;switch(vf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&La();break;case 3:os(),Z(qe),Z(Oe),Cf();break;case 5:xf(r);break;case 4:os();break;case 13:Z(ne);break;case 19:Z(ne);break;case 10:Tf(r.type._context);break;case 22:case 23:Jf()}t=t.return}if(Te=n,me=n=qr(n.current,null),Ie=Ye=e,we=0,ho=null,bf=Nl=ki=0,ze=js=null,ci!==null){for(e=0;e<ci.length;e++)if(t=ci[e],r=t.interleaved,r!==null){t.interleaved=null;var i=r.next,s=t.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}t.pending=r}ci=null}return n}function gp(n,e){do{var t=me;try{if(kf(),fa.current=Va,Ua){for(var r=ie.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Ua=!1}if(Si=0,ke=ye=ie=null,Us=!1,uo=0,Bf.current=null,t===null||t.return===null){we=1,ho=e,me=null;break}e:{var s=n,o=t.return,a=t,l=e;if(e=Ie,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=rh(o);if(m!==null){m.flags&=-257,ih(m,o,a,s,e),m.mode&1&&nh(s,c,e),e=m,l=c;var w=e.updateQueue;if(w===null){var I=new Set;I.add(l),e.updateQueue=I}else w.add(l);break e}else{if(!(e&1)){nh(s,c,e),$f();break e}l=Error(E(426))}}else if(ee&&a.mode&1){var O=rh(o);if(O!==null){!(O.flags&65536)&&(O.flags|=256),ih(O,o,a,s,e),wf(as(l,a));break e}}s=l=as(l,a),we!==4&&(we=2),js===null?js=[s]:js.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var y=Qm(s,l,e);Gd(s,y);break e;case 1:a=l;var g=s.type,v=s.stateNode;if(!(s.flags&128)&&(typeof g.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Vr===null||!Vr.has(v)))){s.flags|=65536,e&=-e,s.lanes|=e;var T=Xm(s,a,e);Gd(s,T);break e}}s=s.return}while(s!==null)}yp(t)}catch(x){e=x,me===t&&t!==null&&(me=t=t.return);continue}break}while(!0)}function mp(){var n=ja.current;return ja.current=Va,n===null?Va:n}function $f(){(we===0||we===3||we===2)&&(we=4),Te===null||!(ki&268435455)&&!(Nl&268435455)||Lr(Te,Ie)}function Wa(n,e){var t=K;K|=2;var r=mp();(Te!==n||Ie!==e)&&(an=null,gi(n,e));do try{_0();break}catch(i){gp(n,i)}while(!0);if(kf(),K=t,ja.current=r,me!==null)throw Error(E(261));return Te=null,Ie=0,we}function _0(){for(;me!==null;)pp(me)}function G0(){for(;me!==null&&!Sv();)pp(me)}function pp(n){var e=wp(n.alternate,n,Ye);n.memoizedProps=n.pendingProps,e===null?yp(n):me=e,Bf.current=null}function yp(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=V0(t,e),t!==null){t.flags&=32767,me=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{we=6,me=null;return}}else if(t=U0(t,e,Ye),t!==null){me=t;return}if(e=e.sibling,e!==null){me=e;return}me=e=n}while(e!==null);we===0&&(we=5)}function oi(n,e,t){var r=G,i=Tt.transition;try{Tt.transition=null,G=1,Y0(n,e,t,r)}finally{Tt.transition=i,G=r}return null}function Y0(n,e,t,r){do Xi();while(br!==null);if(K&6)throw Error(E(327));t=n.finishedWork;var i=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(E(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(Dv(n,s),n===Te&&(me=Te=null,Ie=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||Qo||(Qo=!0,Sp(Ca,function(){return Xi(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=Tt.transition,Tt.transition=null;var o=G;G=1;var a=K;K|=4,Bf.current=null,q0(n,t),fp(t,n),p0(Qu),Pa=!!Yu,Qu=Yu=null,n.current=t,K0(t),kv(),K=a,G=o,Tt.transition=s}else n.current=t;if(Qo&&(Qo=!1,br=n,Ka=i),s=n.pendingLanes,s===0&&(Vr=null),Iv(t.stateNode),We(n,de()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)i=e[t],r(i.value,{componentStack:i.stack,digest:i.digest});if(qa)throw qa=!1,n=yc,yc=null,n;return Ka&1&&n.tag!==0&&Xi(),s=n.pendingLanes,s&1?n===vc?qs++:(qs=0,vc=n):qs=0,ti(),null}function Xi(){if(br!==null){var n=Yg(Ka),e=Tt.transition,t=G;try{if(Tt.transition=null,G=16>n?16:n,br===null)var r=!1;else{if(n=br,br=null,Ka=0,K&6)throw Error(E(331));var i=K;for(K|=4,R=n.current;R!==null;){var s=R,o=s.child;if(R.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(R=c;R!==null;){var d=R;switch(d.tag){case 0:case 11:case 15:Vs(8,d,s)}var h=d.child;if(h!==null)h.return=d,R=h;else for(;R!==null;){d=R;var p=d.sibling,m=d.return;if(lp(d),d===c){R=null;break}if(p!==null){p.return=m,R=p;break}R=m}}}var w=s.alternate;if(w!==null){var I=w.child;if(I!==null){w.child=null;do{var O=I.sibling;I.sibling=null,I=O}while(I!==null)}}R=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,R=o;else e:for(;R!==null;){if(s=R,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Vs(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,R=y;break e}R=s.return}}var g=n.current;for(R=g;R!==null;){o=R;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,R=v;else e:for(o=g;R!==null;){if(a=R,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Cl(9,a)}}catch(x){ae(a,a.return,x)}if(a===o){R=null;break e}var T=a.sibling;if(T!==null){T.return=a.return,R=T;break e}R=a.return}}if(K=i,ti(),nn&&typeof nn.onPostCommitFiberRoot=="function")try{nn.onPostCommitFiberRoot(wl,n)}catch{}r=!0}return r}finally{G=t,Tt.transition=e}}return!1}function yh(n,e,t){e=as(t,e),e=Qm(n,e,1),n=Ur(n,e,1),e=Fe(),n!==null&&(Eo(n,1,e),We(n,e))}function ae(n,e,t){if(n.tag===3)yh(n,n,t);else for(;e!==null;){if(e.tag===3){yh(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Vr===null||!Vr.has(r))){n=as(t,n),n=Xm(e,n,1),e=Ur(e,n,1),n=Fe(),e!==null&&(Eo(e,1,n),We(e,n));break}}e=e.return}}function Q0(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=Fe(),n.pingedLanes|=n.suspendedLanes&t,Te===n&&(Ie&t)===t&&(we===4||we===3&&(Ie&130023424)===Ie&&500>de()-Ff?gi(n,0):bf|=t),We(n,e)}function vp(n,e){e===0&&(n.mode&1?(e=Uo,Uo<<=1,!(Uo&130023424)&&(Uo=4194304)):e=1);var t=Fe();n=Sr(n,e),n!==null&&(Eo(n,e,t),We(n,t))}function X0(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),vp(n,t)}function Z0(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,i=n.memoizedState;i!==null&&(t=i.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(E(314))}r!==null&&r.delete(e),vp(n,t)}var wp;wp=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||qe.current)Ve=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return Ve=!1,z0(n,e,t);Ve=!!(n.flags&131072)}else Ve=!1,ee&&e.flags&1048576&&Tm(e,Fa,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ha(n,e),n=e.pendingProps;var i=rs(e,Oe.current);Qi(e,t),i=Pf(null,e,r,n,i,t);var s=Df();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ke(r)?(s=!0,Ba(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,If(e),i.updater=El,e.stateNode=i,i._reactInternals=e,oc(e,r,n,t),e=uc(null,e,r,!0,s,t)):(e.tag=0,ee&&s&&yf(e),Le(null,e,i,t),e=e.child),e;case 16:r=e.elementType;e:{switch(ha(n,e),n=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=tw(r),n=Nt(r,n),i){case 0:e=lc(null,e,r,n,t);break e;case 1:e=ah(null,e,r,n,t);break e;case 11:e=sh(null,e,r,n,t);break e;case 14:e=oh(null,e,r,Nt(r.type,n),t);break e}throw Error(E(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Nt(r,i),lc(n,e,r,i,t);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Nt(r,i),ah(n,e,r,i,t);case 3:e:{if(np(e),n===null)throw Error(E(387));r=e.pendingProps,s=e.memoizedState,i=s.element,xm(n,e),$a(e,r,null,t);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=as(Error(E(423)),e),e=lh(n,e,r,t,i);break e}else if(r!==i){i=as(Error(E(424)),e),e=lh(n,e,r,t,i);break e}else for(Qe=zr(e.stateNode.containerInfo.firstChild),et=e,ee=!0,Ot=null,t=Dm(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(is(),r===i){e=kr(n,e,t);break e}Le(n,e,r,t)}e=e.child}return e;case 5:return Om(e),n===null&&rc(e),r=e.type,i=e.pendingProps,s=n!==null?n.memoizedProps:null,o=i.children,Xu(r,i)?o=null:s!==null&&Xu(r,s)&&(e.flags|=32),tp(n,e),Le(n,e,o,t),e.child;case 6:return n===null&&rc(e),null;case 13:return rp(n,e,t);case 4:return Ef(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=ss(e,null,r,t):Le(n,e,r,t),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Nt(r,i),sh(n,e,r,i,t);case 7:return Le(n,e,e.pendingProps,t),e.child;case 8:return Le(n,e,e.pendingProps.children,t),e.child;case 12:return Le(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Q(Ma,r._currentValue),r._currentValue=o,s!==null)if(Jt(s.value,o)){if(s.children===i.children&&!qe.current){e=kr(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=mr(-1,t&-t),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),ic(s.return,t,e),a.lanes|=t;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(E(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),ic(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Le(n,e,i.children,t),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Qi(e,t),i=At(i),r=r(i),e.flags|=1,Le(n,e,r,t),e.child;case 14:return r=e.type,i=Nt(r,e.pendingProps),i=Nt(r.type,i),oh(n,e,r,i,t);case 15:return Zm(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Nt(r,i),ha(n,e),e.tag=1,Ke(r)?(n=!0,Ba(e)):n=!1,Qi(e,t),Nm(e,r,i),oc(e,r,i,t),uc(null,e,r,!0,n,t);case 19:return ip(n,e,t);case 22:return ep(n,e,t)}throw Error(E(156,e.tag))};function Sp(n,e){return Wg(n,e)}function ew(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wt(n,e,t,r){return new ew(n,e,t,r)}function zf(n){return n=n.prototype,!(!n||!n.isReactComponent)}function tw(n){if(typeof n=="function")return zf(n)?1:0;if(n!=null){if(n=n.$$typeof,n===sf)return 11;if(n===of)return 14}return 2}function qr(n,e){var t=n.alternate;return t===null?(t=wt(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function pa(n,e,t,r,i,s){var o=2;if(r=n,typeof n=="function")zf(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case Bi:return mi(t.children,i,s,e);case rf:o=8,i|=8;break;case Du:return n=wt(12,t,e,i|2),n.elementType=Du,n.lanes=s,n;case Ou:return n=wt(13,t,e,i),n.elementType=Ou,n.lanes=s,n;case Ru:return n=wt(19,t,e,i),n.elementType=Ru,n.lanes=s,n;case Pg:return Pl(t,i,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case Cg:o=10;break e;case Ng:o=9;break e;case sf:o=11;break e;case of:o=14;break e;case Dr:o=16,r=null;break e}throw Error(E(130,n==null?n:typeof n,""))}return e=wt(o,t,e,i),e.elementType=n,e.type=r,e.lanes=s,e}function mi(n,e,t,r){return n=wt(7,n,r,e),n.lanes=t,n}function Pl(n,e,t,r){return n=wt(22,n,r,e),n.elementType=Pg,n.lanes=t,n.stateNode={isHidden:!1},n}function mu(n,e,t){return n=wt(6,n,null,e),n.lanes=t,n}function pu(n,e,t){return e=wt(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function nw(n,e,t,r,i){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Yl(0),this.expirationTimes=Yl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yl(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Uf(n,e,t,r,i,s,o,a,l){return n=new nw(n,e,t,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=wt(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},If(s),n}function rw(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Li,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function kp(n){if(!n)return Gr;n=n._reactInternals;e:{if(Ci(n)!==n||n.tag!==1)throw Error(E(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ke(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(E(171))}if(n.tag===1){var t=n.type;if(Ke(t))return Sm(n,t,e)}return e}function Tp(n,e,t,r,i,s,o,a,l){return n=Uf(t,r,!0,n,i,s,o,a,l),n.context=kp(null),t=n.current,r=Fe(),i=jr(t),s=mr(r,i),s.callback=e??null,Ur(t,s,i),n.current.lanes=i,Eo(n,i,r),We(n,r),n}function Dl(n,e,t,r){var i=e.current,s=Fe(),o=jr(i);return t=kp(t),e.context===null?e.context=t:e.pendingContext=t,e=mr(s,o),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=Ur(i,e,o),n!==null&&(bt(n,i,o,s),ca(n,i,o)),o}function Ha(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function vh(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function Vf(n,e){vh(n,e),(n=n.alternate)&&vh(n,e)}function iw(){return null}var Ap=typeof reportError=="function"?reportError:function(n){console.error(n)};function jf(n){this._internalRoot=n}Ol.prototype.render=jf.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(E(409));Dl(n,e,null,null)};Ol.prototype.unmount=jf.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Ti(function(){Dl(null,n,null,null)}),e[wr]=null}};function Ol(n){this._internalRoot=n}Ol.prototype.unstable_scheduleHydration=function(n){if(n){var e=Zg();n={blockedOn:null,target:n,priority:e};for(var t=0;t<Rr.length&&e!==0&&e<Rr[t].priority;t++);Rr.splice(t,0,n),t===0&&tm(n)}};function qf(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Rl(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function wh(){}function sw(n,e,t,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=Ha(o);s.call(c)}}var o=Tp(e,r,n,0,null,!1,!1,"",wh);return n._reactRootContainer=o,n[wr]=o.current,io(n.nodeType===8?n.parentNode:n),Ti(),o}for(;i=n.lastChild;)n.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=Ha(l);a.call(c)}}var l=Uf(n,0,!1,null,null,!1,!1,"",wh);return n._reactRootContainer=l,n[wr]=l.current,io(n.nodeType===8?n.parentNode:n),Ti(function(){Dl(e,l,t,r)}),l}function Ll(n,e,t,r,i){var s=t._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Ha(o);a.call(l)}}Dl(e,o,n,i)}else o=sw(t,e,n,i,r);return Ha(o)}Qg=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=Bs(e.pendingLanes);t!==0&&(uf(e,t|1),We(e,de()),!(K&6)&&(ls=de()+500,ti()))}break;case 13:Ti(function(){var r=Sr(n,1);if(r!==null){var i=Fe();bt(r,n,1,i)}}),Vf(n,1)}};cf=function(n){if(n.tag===13){var e=Sr(n,134217728);if(e!==null){var t=Fe();bt(e,n,134217728,t)}Vf(n,134217728)}};Xg=function(n){if(n.tag===13){var e=jr(n),t=Sr(n,e);if(t!==null){var r=Fe();bt(t,n,e,r)}Vf(n,e)}};Zg=function(){return G};em=function(n,e){var t=G;try{return G=n,e()}finally{G=t}};Vu=function(n,e,t){switch(e){case"input":if(bu(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var i=Al(r);if(!i)throw Error(E(90));Og(r),bu(r,i)}}}break;case"textarea":Lg(n,t);break;case"select":e=t.value,e!=null&&Hi(n,!!t.multiple,e,!1)}};zg=Mf;Ug=Ti;var ow={usingClientEntryPoint:!1,Events:[Co,Ji,Al,Jg,$g,Mf]},Ps={findFiberByHostInstance:ui,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},aw={bundleType:Ps.bundleType,version:Ps.version,rendererPackageName:Ps.rendererPackageName,rendererConfig:Ps.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ir.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=qg(n),n===null?null:n.stateNode},findFiberByHostInstance:Ps.findFiberByHostInstance||iw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xo.isDisabled&&Xo.supportsFiber)try{wl=Xo.inject(aw),nn=Xo}catch{}}st.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ow;st.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!qf(e))throw Error(E(200));return rw(n,e,null,t)};st.createRoot=function(n,e){if(!qf(n))throw Error(E(299));var t=!1,r="",i=Ap;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Uf(n,1,!1,null,null,t,!1,r,i),n[wr]=e.current,io(n.nodeType===8?n.parentNode:n),new jf(e)};st.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(E(188)):(n=Object.keys(n).join(","),Error(E(268,n)));return n=qg(e),n=n===null?null:n.stateNode,n};st.flushSync=function(n){return Ti(n)};st.hydrate=function(n,e,t){if(!Rl(e))throw Error(E(200));return Ll(null,n,e,!0,t)};st.hydrateRoot=function(n,e,t){if(!qf(n))throw Error(E(405));var r=t!=null&&t.hydratedSources||null,i=!1,s="",o=Ap;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=Tp(e,null,n,1,t??null,i,!1,s,o),n[wr]=e.current,io(n),r)for(n=0;n<r.length;n++)t=r[n],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new Ol(e)};st.render=function(n,e,t){if(!Rl(e))throw Error(E(200));return Ll(null,n,e,!1,t)};st.unmountComponentAtNode=function(n){if(!Rl(n))throw Error(E(40));return n._reactRootContainer?(Ti(function(){Ll(null,null,n,!1,function(){n._reactRootContainer=null,n[wr]=null})}),!0):!1};st.unstable_batchedUpdates=Mf;st.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!Rl(t))throw Error(E(200));if(n==null||n._reactInternals===void 0)throw Error(E(38));return Ll(n,e,t,!1,r)};st.version="18.2.0-next-9e3b772b8-20220608";function Ip(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Ip)}catch(n){console.error(n)}}Ip(),Tg.exports=st;var lw=Tg.exports,Sh=lw;Nu.createRoot=Sh.createRoot,Nu.hydrateRoot=Sh.hydrateRoot;var _;(function(n){n[n.Canceled=1]="Canceled",n[n.Unknown=2]="Unknown",n[n.InvalidArgument=3]="InvalidArgument",n[n.DeadlineExceeded=4]="DeadlineExceeded",n[n.NotFound=5]="NotFound",n[n.AlreadyExists=6]="AlreadyExists",n[n.PermissionDenied=7]="PermissionDenied",n[n.ResourceExhausted=8]="ResourceExhausted",n[n.FailedPrecondition=9]="FailedPrecondition",n[n.Aborted=10]="Aborted",n[n.OutOfRange=11]="OutOfRange",n[n.Unimplemented=12]="Unimplemented",n[n.Internal=13]="Internal",n[n.Unavailable=14]="Unavailable",n[n.DataLoss=15]="DataLoss",n[n.Unauthenticated=16]="Unauthenticated"})(_||(_={}));function kh(n){const e=_[n];return typeof e!="string"?n.toString():e[0].toLowerCase()+e.substring(1).replace(/[A-Z]/g,t=>"_"+t.toLowerCase())}class pe extends Error{constructor(e,t=_.Unknown,r,i,s){super(uw(e,t)),this.name="ConnectError",Object.setPrototypeOf(this,new.target.prototype),this.rawMessage=e,this.code=t,this.metadata=new Headers(r??{}),this.details=i??[],this.cause=s}static from(e,t=_.Unknown){return e instanceof pe?e:e instanceof Error?e.name=="AbortError"?new pe(e.message,_.Canceled):new pe(e.message,t,void 0,void 0,e):new pe(String(e),t,void 0,void 0,e)}static[Symbol.hasInstance](e){return e instanceof Error?Object.getPrototypeOf(e)===pe.prototype?!0:e.name==="ConnectError"&&"code"in e&&typeof e.code=="number"&&"metadata"in e&&"details"in e&&Array.isArray(e.details)&&"rawMessage"in e&&typeof e.rawMessage=="string"&&"cause"in e:!1}findDetails(e){const t="typeName"in e?{findMessage:i=>i===e.typeName?e:void 0}:e,r=[];for(const i of this.details){if("getType"in i){t.findMessage(i.getType().typeName)&&r.push(i);continue}const s=t.findMessage(i.type);if(s)try{r.push(s.fromBinary(i.value))}catch{}}return r}}function uw(n,e){return n.length?`[${kh(e)}] ${n}`:`[${kh(e)}]`}function le(n,e){if(!n)throw new Error(e)}const cw=34028234663852886e22,fw=-34028234663852886e22,dw=4294967295,hw=2147483647,gw=-2147483648;function ya(n){if(typeof n!="number")throw new Error("invalid int 32: "+typeof n);if(!Number.isInteger(n)||n>hw||n<gw)throw new Error("invalid int 32: "+n)}function kc(n){if(typeof n!="number")throw new Error("invalid uint 32: "+typeof n);if(!Number.isInteger(n)||n>dw||n<0)throw new Error("invalid uint 32: "+n)}function Ep(n){if(typeof n!="number")throw new Error("invalid float 32: "+typeof n);if(Number.isFinite(n)&&(n>cw||n<fw))throw new Error("invalid float 32: "+n)}const xp=Symbol("@bufbuild/protobuf/enum-type");function mw(n){const e=n[xp];return le(e,"missing enum type on enum object"),e}function Cp(n,e,t,r){n[xp]=Np(e,t.map(i=>({no:i.no,name:i.name,localName:n[i.no]})))}function Np(n,e,t){const r=Object.create(null),i=Object.create(null),s=[];for(const o of e){const a=Pp(o);s.push(a),r[o.name]=a,i[o.no]=a}return{typeName:n,values:s,findName(o){return r[o]},findNumber(o){return i[o]}}}function pw(n,e,t){const r={};for(const i of e){const s=Pp(i);r[s.localName]=s.no,r[s.no]=s.localName}return Cp(r,n,e),r}function Pp(n){return"localName"in n?n:Object.assign(Object.assign({},n),{localName:n.name})}class D{equals(e){return this.getType().runtime.util.equals(this.getType(),this,e)}clone(){return this.getType().runtime.util.clone(this)}fromBinary(e,t){const r=this.getType(),i=r.runtime.bin,s=i.makeReadOptions(t);return i.readMessage(this,s.readerFactory(e),e.byteLength,s),this}fromJson(e,t){const r=this.getType(),i=r.runtime.json,s=i.makeReadOptions(t);return i.readMessage(r,e,s,this),this}fromJsonString(e,t){let r;try{r=JSON.parse(e)}catch(i){throw new Error(`cannot decode ${this.getType().typeName} from JSON: ${i instanceof Error?i.message:String(i)}`)}return this.fromJson(r,t)}toBinary(e){const t=this.getType(),r=t.runtime.bin,i=r.makeWriteOptions(e),s=i.writerFactory();return r.writeMessage(this,s,i),s.finish()}toJson(e){const t=this.getType(),r=t.runtime.json,i=r.makeWriteOptions(e);return r.writeMessage(this,i)}toJsonString(e){var t;const r=this.toJson(e);return JSON.stringify(r,null,(t=e==null?void 0:e.prettySpaces)!==null&&t!==void 0?t:0)}toJSON(){return this.toJson({emitDefaultValues:!0})}getType(){return Object.getPrototypeOf(this).constructor}}function yw(n,e,t,r){var i;const s=(i=r==null?void 0:r.localName)!==null&&i!==void 0?i:e.substring(e.lastIndexOf(".")+1),o={[s]:function(a){n.util.initFields(this),n.util.initPartial(a,this)}}[s];return Object.setPrototypeOf(o.prototype,new D),Object.assign(o,{runtime:n,typeName:e,fields:n.util.newFieldList(t),fromBinary(a,l){return new o().fromBinary(a,l)},fromJson(a,l){return new o().fromJson(a,l)},fromJsonString(a,l){return new o().fromJsonString(a,l)},equals(a,l){return n.util.equals(o,a,l)}}),o}function vw(){let n=0,e=0;for(let r=0;r<28;r+=7){let i=this.buf[this.pos++];if(n|=(i&127)<<r,!(i&128))return this.assertBounds(),[n,e]}let t=this.buf[this.pos++];if(n|=(t&15)<<28,e=(t&112)>>4,!(t&128))return this.assertBounds(),[n,e];for(let r=3;r<=31;r+=7){let i=this.buf[this.pos++];if(e|=(i&127)<<r,!(i&128))return this.assertBounds(),[n,e]}throw new Error("invalid varint")}function yu(n,e,t){for(let s=0;s<28;s=s+7){const o=n>>>s,a=!(!(o>>>7)&&e==0),l=(a?o|128:o)&255;if(t.push(l),!a)return}const r=n>>>28&15|(e&7)<<4,i=!!(e>>3);if(t.push((i?r|128:r)&255),!!i){for(let s=3;s<31;s=s+7){const o=e>>>s,a=!!(o>>>7),l=(a?o|128:o)&255;if(t.push(l),!a)return}t.push(e>>>31&1)}}const va=4294967296;function Th(n){const e=n[0]==="-";e&&(n=n.slice(1));const t=1e6;let r=0,i=0;function s(o,a){const l=Number(n.slice(o,a));i*=t,r=r*t+l,r>=va&&(i=i+(r/va|0),r=r%va)}return s(-24,-18),s(-18,-12),s(-12,-6),s(-6),e?Op(r,i):Kf(r,i)}function ww(n,e){let t=Kf(n,e);const r=t.hi&2147483648;r&&(t=Op(t.lo,t.hi));const i=Dp(t.lo,t.hi);return r?"-"+i:i}function Dp(n,e){if({lo:n,hi:e}=Sw(n,e),e<=2097151)return String(va*e+n);const t=n&16777215,r=(n>>>24|e<<8)&16777215,i=e>>16&65535;let s=t+r*6777216+i*6710656,o=r+i*8147497,a=i*2;const l=1e7;return s>=l&&(o+=Math.floor(s/l),s%=l),o>=l&&(a+=Math.floor(o/l),o%=l),a.toString()+Ah(o)+Ah(s)}function Sw(n,e){return{lo:n>>>0,hi:e>>>0}}function Kf(n,e){return{lo:n|0,hi:e|0}}function Op(n,e){return e=~e,n?n=~n+1:e+=1,Kf(n,e)}const Ah=n=>{const e=String(n);return"0000000".slice(e.length)+e};function Ih(n,e){if(n>=0){for(;n>127;)e.push(n&127|128),n=n>>>7;e.push(n)}else{for(let t=0;t<9;t++)e.push(n&127|128),n=n>>7;e.push(1)}}function kw(){let n=this.buf[this.pos++],e=n&127;if(!(n&128))return this.assertBounds(),e;if(n=this.buf[this.pos++],e|=(n&127)<<7,!(n&128))return this.assertBounds(),e;if(n=this.buf[this.pos++],e|=(n&127)<<14,!(n&128))return this.assertBounds(),e;if(n=this.buf[this.pos++],e|=(n&127)<<21,!(n&128))return this.assertBounds(),e;n=this.buf[this.pos++],e|=(n&15)<<28;for(let t=5;n&128&&t<10;t++)n=this.buf[this.pos++];if(n&128)throw new Error("invalid varint");return this.assertBounds(),e>>>0}var Eh={};function Tw(){const n=new DataView(new ArrayBuffer(8));if(typeof BigInt=="function"&&typeof n.getBigInt64=="function"&&typeof n.getBigUint64=="function"&&typeof n.setBigInt64=="function"&&typeof n.setBigUint64=="function"&&(typeof process!="object"||typeof Eh!="object"||Eh.BUF_BIGINT_DISABLE!=="1")){const i=BigInt("-9223372036854775808"),s=BigInt("9223372036854775807"),o=BigInt("0"),a=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(l){const c=typeof l=="bigint"?l:BigInt(l);if(c>s||c<i)throw new Error(`int64 invalid: ${l}`);return c},uParse(l){const c=typeof l=="bigint"?l:BigInt(l);if(c>a||c<o)throw new Error(`uint64 invalid: ${l}`);return c},enc(l){return n.setBigInt64(0,this.parse(l),!0),{lo:n.getInt32(0,!0),hi:n.getInt32(4,!0)}},uEnc(l){return n.setBigInt64(0,this.uParse(l),!0),{lo:n.getInt32(0,!0),hi:n.getInt32(4,!0)}},dec(l,c){return n.setInt32(0,l,!0),n.setInt32(4,c,!0),n.getBigInt64(0,!0)},uDec(l,c){return n.setInt32(0,l,!0),n.setInt32(4,c,!0),n.getBigUint64(0,!0)}}}const t=i=>le(/^-?[0-9]+$/.test(i),`int64 invalid: ${i}`),r=i=>le(/^[0-9]+$/.test(i),`uint64 invalid: ${i}`);return{zero:"0",supported:!1,parse(i){return typeof i!="string"&&(i=i.toString()),t(i),i},uParse(i){return typeof i!="string"&&(i=i.toString()),r(i),i},enc(i){return typeof i!="string"&&(i=i.toString()),t(i),Th(i)},uEnc(i){return typeof i!="string"&&(i=i.toString()),r(i),Th(i)},dec(i,s){return ww(i,s)},uDec(i,s){return Dp(i,s)}}}const te=Tw();var A;(function(n){n[n.DOUBLE=1]="DOUBLE",n[n.FLOAT=2]="FLOAT",n[n.INT64=3]="INT64",n[n.UINT64=4]="UINT64",n[n.INT32=5]="INT32",n[n.FIXED64=6]="FIXED64",n[n.FIXED32=7]="FIXED32",n[n.BOOL=8]="BOOL",n[n.STRING=9]="STRING",n[n.BYTES=12]="BYTES",n[n.UINT32=13]="UINT32",n[n.SFIXED32=15]="SFIXED32",n[n.SFIXED64=16]="SFIXED64",n[n.SINT32=17]="SINT32",n[n.SINT64=18]="SINT64"})(A||(A={}));var Yr;(function(n){n[n.BIGINT=0]="BIGINT",n[n.STRING=1]="STRING"})(Yr||(Yr={}));function Cr(n,e,t){if(e===t)return!0;if(n==A.BYTES){if(!(e instanceof Uint8Array)||!(t instanceof Uint8Array)||e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}switch(n){case A.UINT64:case A.FIXED64:case A.INT64:case A.SFIXED64:case A.SINT64:return e==t}return!1}function us(n,e){switch(n){case A.BOOL:return!1;case A.UINT64:case A.FIXED64:case A.INT64:case A.SFIXED64:case A.SINT64:return e==0?te.zero:"0";case A.DOUBLE:case A.FLOAT:return 0;case A.BYTES:return new Uint8Array(0);case A.STRING:return"";default:return 0}}function Rp(n,e){switch(n){case A.BOOL:return e===!1;case A.STRING:return e==="";case A.BYTES:return e instanceof Uint8Array&&!e.byteLength;default:return e==0}}var he;(function(n){n[n.Varint=0]="Varint",n[n.Bit64=1]="Bit64",n[n.LengthDelimited=2]="LengthDelimited",n[n.StartGroup=3]="StartGroup",n[n.EndGroup=4]="EndGroup",n[n.Bit32=5]="Bit32"})(he||(he={}));class Aw{constructor(e){this.stack=[],this.textEncoder=e??new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let e=0;for(let i=0;i<this.chunks.length;i++)e+=this.chunks[i].length;let t=new Uint8Array(e),r=0;for(let i=0;i<this.chunks.length;i++)t.set(this.chunks[i],r),r+=this.chunks[i].length;return this.chunks=[],t}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),t=this.stack.pop();if(!t)throw new Error("invalid state, fork stack empty");return this.chunks=t.chunks,this.buf=t.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,t){return this.uint32((e<<3|t)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(kc(e);e>127;)this.buf.push(e&127|128),e=e>>>7;return this.buf.push(e),this}int32(e){return ya(e),Ih(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let t=this.textEncoder.encode(e);return this.uint32(t.byteLength),this.raw(t)}float(e){Ep(e);let t=new Uint8Array(4);return new DataView(t.buffer).setFloat32(0,e,!0),this.raw(t)}double(e){let t=new Uint8Array(8);return new DataView(t.buffer).setFloat64(0,e,!0),this.raw(t)}fixed32(e){kc(e);let t=new Uint8Array(4);return new DataView(t.buffer).setUint32(0,e,!0),this.raw(t)}sfixed32(e){ya(e);let t=new Uint8Array(4);return new DataView(t.buffer).setInt32(0,e,!0),this.raw(t)}sint32(e){return ya(e),e=(e<<1^e>>31)>>>0,Ih(e,this.buf),this}sfixed64(e){let t=new Uint8Array(8),r=new DataView(t.buffer),i=te.enc(e);return r.setInt32(0,i.lo,!0),r.setInt32(4,i.hi,!0),this.raw(t)}fixed64(e){let t=new Uint8Array(8),r=new DataView(t.buffer),i=te.uEnc(e);return r.setInt32(0,i.lo,!0),r.setInt32(4,i.hi,!0),this.raw(t)}int64(e){let t=te.enc(e);return yu(t.lo,t.hi,this.buf),this}sint64(e){let t=te.enc(e),r=t.hi>>31,i=t.lo<<1^r,s=(t.hi<<1|t.lo>>>31)^r;return yu(i,s,this.buf),this}uint64(e){let t=te.uEnc(e);return yu(t.lo,t.hi,this.buf),this}}class Iw{constructor(e,t){this.varint64=vw,this.uint32=kw,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength),this.textDecoder=t??new TextDecoder}tag(){let e=this.uint32(),t=e>>>3,r=e&7;if(t<=0||r<0||r>5)throw new Error("illegal tag: field no "+t+" wire type "+r);return[t,r]}skip(e,t){let r=this.pos;switch(e){case he.Varint:for(;this.buf[this.pos++]&128;);break;case he.Bit64:this.pos+=4;case he.Bit32:this.pos+=4;break;case he.LengthDelimited:let i=this.uint32();this.pos+=i;break;case he.StartGroup:for(;;){const[s,o]=this.tag();if(o===he.EndGroup){if(t!==void 0&&s!==t)throw new Error("invalid end group tag");break}this.skip(o,s)}break;default:throw new Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(r,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let e=this.uint32();return e>>>1^-(e&1)}int64(){return te.dec(...this.varint64())}uint64(){return te.uDec(...this.varint64())}sint64(){let[e,t]=this.varint64(),r=-(e&1);return e=(e>>>1|(t&1)<<31)^r,t=t>>>1^r,te.dec(e,t)}bool(){let[e,t]=this.varint64();return e!==0||t!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return te.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return te.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),t=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(t,t+e)}string(){return this.textDecoder.decode(this.bytes())}}function Ew(n,e,t,r){let i;return{typeName:e,extendee:t,get field(){if(!i){const s=typeof r=="function"?r():r;s.name=e.split(".").pop(),s.jsonName=`[${e}]`,i=n.util.newFieldList([s]).list()[0]}return i},runtime:n}}function Lp(n){const e=n.field.localName,t=Object.create(null);return t[e]=xw(n),[t,()=>t[e]]}function xw(n){const e=n.field;if(e.repeated)return[];if(e.default!==void 0)return e.default;switch(e.kind){case"enum":return e.T.values[0].no;case"scalar":return us(e.T,e.L);case"message":const t=e.T,r=new t;return t.fieldWrapper?t.fieldWrapper.unwrapField(r):r;case"map":throw"map fields are not allowed to be extensions"}}function Cw(n,e){if(!e.repeated&&(e.kind=="enum"||e.kind=="scalar")){for(let t=n.length-1;t>=0;--t)if(n[t].no==e.no)return[n[t]];return[]}return n.filter(t=>t.no===e.no)}let ur="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),Bl=[];for(let n=0;n<ur.length;n++)Bl[ur[n].charCodeAt(0)]=n;Bl[45]=ur.indexOf("+");Bl[95]=ur.indexOf("/");const Wf={dec(n){let e=n.length*3/4;n[n.length-2]=="="?e-=2:n[n.length-1]=="="&&(e-=1);let t=new Uint8Array(e),r=0,i=0,s,o=0;for(let a=0;a<n.length;a++){if(s=Bl[n.charCodeAt(a)],s===void 0)switch(n[a]){case"=":i=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(i){case 0:o=s,i=1;break;case 1:t[r++]=o<<2|(s&48)>>4,o=s,i=2;break;case 2:t[r++]=(o&15)<<4|(s&60)>>2,o=s,i=3;break;case 3:t[r++]=(o&3)<<6|s,i=0;break}}if(i==1)throw Error("invalid base64 string.");return t.subarray(0,r)},enc(n){let e="",t=0,r,i=0;for(let s=0;s<n.length;s++)switch(r=n[s],t){case 0:e+=ur[r>>2],i=(r&3)<<4,t=1;break;case 1:e+=ur[i|r>>4],i=(r&15)<<2,t=2;break;case 2:e+=ur[i|r>>6],e+=ur[r&63],t=0;break}return t&&(e+=ur[i],e+="=",t==1&&(e+="=")),e}};function Nw(n,e,t){bp(e,n);const r=e.runtime.bin.makeReadOptions(t),i=Cw(n.getType().runtime.bin.listUnknownFields(n),e.field),[s,o]=Lp(e);for(const a of i)e.runtime.bin.readField(s,r.readerFactory(a.data),e.field,a.wireType,r);return o()}function Pw(n,e,t,r){bp(e,n);const i=e.runtime.bin.makeReadOptions(r),s=e.runtime.bin.makeWriteOptions(r);if(Bp(n,e)){const c=n.getType().runtime.bin.listUnknownFields(n).filter(d=>d.no!=e.field.no);n.getType().runtime.bin.discardUnknownFields(n);for(const d of c)n.getType().runtime.bin.onUnknownField(n,d.no,d.wireType,d.data)}const o=s.writerFactory();let a=e.field;!a.opt&&!a.repeated&&(a.kind=="enum"||a.kind=="scalar")&&(a=Object.assign(Object.assign({},e.field),{opt:!0})),e.runtime.bin.writeField(a,t,o,s);const l=i.readerFactory(o.finish());for(;l.pos<l.len;){const[c,d]=l.tag(),h=l.skip(d,c);n.getType().runtime.bin.onUnknownField(n,c,d,h)}}function Bp(n,e){const t=n.getType();return e.extendee.typeName===t.typeName&&!!t.runtime.bin.listUnknownFields(n).find(r=>r.no==e.field.no)}function bp(n,e){le(n.extendee.typeName==e.getType().typeName,`extension ${n.typeName} can only be applied to message ${n.extendee.typeName}`)}function Fp(n,e){const t=n.localName;if(n.repeated)return e[t].length>0;if(n.oneof)return e[n.oneof.localName].case===t;switch(n.kind){case"enum":case"scalar":return n.opt||n.req?e[t]!==void 0:n.kind=="enum"?e[t]!==n.T.values[0].no:!Rp(n.T,e[t]);case"message":return e[t]!==void 0;case"map":return Object.keys(e[t]).length>0}}function xh(n,e){const t=n.localName,r=!n.opt&&!n.req;if(n.repeated)e[t]=[];else if(n.oneof)e[n.oneof.localName]={case:void 0};else switch(n.kind){case"map":e[t]={};break;case"enum":e[t]=r?n.T.values[0].no:void 0;break;case"scalar":e[t]=r?us(n.T,n.L):void 0;break;case"message":e[t]=void 0;break}}function pi(n,e){if(n===null||typeof n!="object"||!Object.getOwnPropertyNames(D.prototype).every(r=>r in n&&typeof n[r]=="function"))return!1;const t=n.getType();return t===null||typeof t!="function"||!("typeName"in t)||typeof t.typeName!="string"?!1:e===void 0?!0:t.typeName==e.typeName}function Mp(n,e){return pi(e)||!n.fieldWrapper?e:n.fieldWrapper.wrapField(e)}A.DOUBLE,A.FLOAT,A.INT64,A.UINT64,A.INT32,A.UINT32,A.BOOL,A.STRING,A.BYTES;const Ch={ignoreUnknownFields:!1},Nh={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0};function Dw(n){return n?Object.assign(Object.assign({},Ch),n):Ch}function Ow(n){return n?Object.assign(Object.assign({},Nh),n):Nh}const _a=Symbol(),wa=Symbol();function Rw(){return{makeReadOptions:Dw,makeWriteOptions:Ow,readMessage(n,e,t,r){if(e==null||Array.isArray(e)||typeof e!="object")throw new Error(`cannot decode message ${n.typeName} from JSON: ${qt(e)}`);r=r??new n;const i=new Map,s=t.typeRegistry;for(const[o,a]of Object.entries(e)){const l=n.fields.findJsonName(o);if(l){if(l.oneof){if(a===null&&l.kind=="scalar")continue;const c=i.get(l.oneof);if(c!==void 0)throw new Error(`cannot decode message ${n.typeName} from JSON: multiple keys for oneof "${l.oneof.name}" present: "${c}", "${o}"`);i.set(l.oneof,o)}Ph(r,a,l,t,n)}else{let c=!1;if(s!=null&&s.findExtension&&o.startsWith("[")&&o.endsWith("]")){const d=s.findExtension(o.substring(1,o.length-1));if(d&&d.extendee.typeName==n.typeName){c=!0;const[h,p]=Lp(d);Ph(h,a,d.field,t,d),Pw(r,d,p(),t)}}if(!c&&!t.ignoreUnknownFields)throw new Error(`cannot decode message ${n.typeName} from JSON: key "${o}" is unknown`)}}return r},writeMessage(n,e){const t=n.getType(),r={};let i;try{for(i of t.fields.byNumber()){if(!Fp(i,n)){if(i.req)throw"required field not set";if(!e.emitDefaultValues||!Bw(i))continue}const o=i.oneof?n[i.oneof.localName].value:n[i.localName],a=Dh(i,o,e);a!==void 0&&(r[e.useProtoFieldName?i.name:i.jsonName]=a)}const s=e.typeRegistry;if(s!=null&&s.findExtensionFor)for(const o of t.runtime.bin.listUnknownFields(n)){const a=s.findExtensionFor(t.typeName,o.no);if(a&&Bp(n,a)){const l=Nw(n,a,e),c=Dh(a.field,l,e);c!==void 0&&(r[a.field.jsonName]=c)}}}catch(s){const o=i?`cannot encode field ${t.typeName}.${i.name} to JSON`:`cannot encode message ${t.typeName} to JSON`,a=s instanceof Error?s.message:String(s);throw new Error(o+(a.length>0?`: ${a}`:""))}return r},readScalar(n,e,t){return Ks(n,e,t??Yr.BIGINT,!0)},writeScalar(n,e,t){if(e!==void 0&&(t||Rp(n,e)))return Sa(n,e)},debug:qt}}function qt(n){if(n===null)return"null";switch(typeof n){case"object":return Array.isArray(n)?"array":"object";case"string":return n.length>100?"string":`"${n.split('"').join('\\"')}"`;default:return String(n)}}function Ph(n,e,t,r,i){let s=t.localName;if(t.repeated){if(le(t.kind!="map"),e===null)return;if(!Array.isArray(e))throw new Error(`cannot decode field ${i.typeName}.${t.name} from JSON: ${qt(e)}`);const o=n[s];for(const a of e){if(a===null)throw new Error(`cannot decode field ${i.typeName}.${t.name} from JSON: ${qt(a)}`);switch(t.kind){case"message":o.push(t.T.fromJson(a,r));break;case"enum":const l=vu(t.T,a,r.ignoreUnknownFields,!0);l!==wa&&o.push(l);break;case"scalar":try{o.push(Ks(t.T,a,t.L,!0))}catch(c){let d=`cannot decode field ${i.typeName}.${t.name} from JSON: ${qt(a)}`;throw c instanceof Error&&c.message.length>0&&(d+=`: ${c.message}`),new Error(d)}break}}}else if(t.kind=="map"){if(e===null)return;if(typeof e!="object"||Array.isArray(e))throw new Error(`cannot decode field ${i.typeName}.${t.name} from JSON: ${qt(e)}`);const o=n[s];for(const[a,l]of Object.entries(e)){if(l===null)throw new Error(`cannot decode field ${i.typeName}.${t.name} from JSON: map value null`);let c;try{c=Lw(t.K,a)}catch(d){let h=`cannot decode map key for field ${i.typeName}.${t.name} from JSON: ${qt(e)}`;throw d instanceof Error&&d.message.length>0&&(h+=`: ${d.message}`),new Error(h)}switch(t.V.kind){case"message":o[c]=t.V.T.fromJson(l,r);break;case"enum":const d=vu(t.V.T,l,r.ignoreUnknownFields,!0);d!==wa&&(o[c]=d);break;case"scalar":try{o[c]=Ks(t.V.T,l,Yr.BIGINT,!0)}catch(h){let p=`cannot decode map value for field ${i.typeName}.${t.name} from JSON: ${qt(e)}`;throw h instanceof Error&&h.message.length>0&&(p+=`: ${h.message}`),new Error(p)}break}}}else switch(t.oneof&&(n=n[t.oneof.localName]={case:s},s="value"),t.kind){case"message":const o=t.T;if(e===null&&o.typeName!="google.protobuf.Value")return;let a=n[s];pi(a)?a.fromJson(e,r):(n[s]=a=o.fromJson(e,r),o.fieldWrapper&&!t.oneof&&(n[s]=o.fieldWrapper.unwrapField(a)));break;case"enum":const l=vu(t.T,e,r.ignoreUnknownFields,!1);switch(l){case _a:xh(t,n);break;case wa:break;default:n[s]=l;break}break;case"scalar":try{const c=Ks(t.T,e,t.L,!1);switch(c){case _a:xh(t,n);break;default:n[s]=c;break}}catch(c){let d=`cannot decode field ${i.typeName}.${t.name} from JSON: ${qt(e)}`;throw c instanceof Error&&c.message.length>0&&(d+=`: ${c.message}`),new Error(d)}break}}function Lw(n,e){if(n===A.BOOL)switch(e){case"true":e=!0;break;case"false":e=!1;break}return Ks(n,e,Yr.BIGINT,!0).toString()}function Ks(n,e,t,r){if(e===null)return r?us(n,t):_a;switch(n){case A.DOUBLE:case A.FLOAT:if(e==="NaN")return Number.NaN;if(e==="Infinity")return Number.POSITIVE_INFINITY;if(e==="-Infinity")return Number.NEGATIVE_INFINITY;if(e===""||typeof e=="string"&&e.trim().length!==e.length||typeof e!="string"&&typeof e!="number")break;const i=Number(e);if(Number.isNaN(i)||!Number.isFinite(i))break;return n==A.FLOAT&&Ep(i),i;case A.INT32:case A.FIXED32:case A.SFIXED32:case A.SINT32:case A.UINT32:let s;if(typeof e=="number"?s=e:typeof e=="string"&&e.length>0&&e.trim().length===e.length&&(s=Number(e)),s===void 0)break;return n==A.UINT32||n==A.FIXED32?kc(s):ya(s),s;case A.INT64:case A.SFIXED64:case A.SINT64:if(typeof e!="number"&&typeof e!="string")break;const o=te.parse(e);return t?o.toString():o;case A.FIXED64:case A.UINT64:if(typeof e!="number"&&typeof e!="string")break;const a=te.uParse(e);return t?a.toString():a;case A.BOOL:if(typeof e!="boolean")break;return e;case A.STRING:if(typeof e!="string")break;try{encodeURIComponent(e)}catch{throw new Error("invalid UTF8")}return e;case A.BYTES:if(e==="")return new Uint8Array(0);if(typeof e!="string")break;return Wf.dec(e)}throw new Error}function vu(n,e,t,r){if(e===null)return n.typeName=="google.protobuf.NullValue"?0:r?n.values[0].no:_a;switch(typeof e){case"number":if(Number.isInteger(e))return e;break;case"string":const i=n.findName(e);if(i!==void 0)return i.no;if(t)return wa;break}throw new Error(`cannot decode enum ${n.typeName} from JSON: ${qt(e)}`)}function Bw(n){return n.repeated||n.kind=="map"?!0:!(n.oneof||n.kind=="message"||n.opt||n.req)}function Dh(n,e,t){if(n.kind=="map"){le(typeof e=="object"&&e!=null);const r={},i=Object.entries(e);switch(n.V.kind){case"scalar":for(const[o,a]of i)r[o.toString()]=Sa(n.V.T,a);break;case"message":for(const[o,a]of i)r[o.toString()]=a.toJson(t);break;case"enum":const s=n.V.T;for(const[o,a]of i)r[o.toString()]=wu(s,a,t.enumAsInteger);break}return t.emitDefaultValues||i.length>0?r:void 0}if(n.repeated){le(Array.isArray(e));const r=[];switch(n.kind){case"scalar":for(let i=0;i<e.length;i++)r.push(Sa(n.T,e[i]));break;case"enum":for(let i=0;i<e.length;i++)r.push(wu(n.T,e[i],t.enumAsInteger));break;case"message":for(let i=0;i<e.length;i++)r.push(e[i].toJson(t));break}return t.emitDefaultValues||r.length>0?r:void 0}switch(n.kind){case"scalar":return Sa(n.T,e);case"enum":return wu(n.T,e,t.enumAsInteger);case"message":return Mp(n.T,e).toJson(t)}}function wu(n,e,t){var r;if(le(typeof e=="number"),n.typeName=="google.protobuf.NullValue")return null;if(t)return e;const i=n.findNumber(e);return(r=i==null?void 0:i.name)!==null&&r!==void 0?r:e}function Sa(n,e){switch(n){case A.INT32:case A.SFIXED32:case A.SINT32:case A.FIXED32:case A.UINT32:return le(typeof e=="number"),e;case A.FLOAT:case A.DOUBLE:return le(typeof e=="number"),Number.isNaN(e)?"NaN":e===Number.POSITIVE_INFINITY?"Infinity":e===Number.NEGATIVE_INFINITY?"-Infinity":e;case A.STRING:return le(typeof e=="string"),e;case A.BOOL:return le(typeof e=="boolean"),e;case A.UINT64:case A.FIXED64:case A.INT64:case A.SFIXED64:case A.SINT64:return le(typeof e=="bigint"||typeof e=="string"||typeof e=="number"),e.toString();case A.BYTES:return le(e instanceof Uint8Array),Wf.enc(e)}}const Di=Symbol("@bufbuild/protobuf/unknown-fields"),Oh={readUnknownFields:!0,readerFactory:n=>new Iw(n)},Rh={writeUnknownFields:!0,writerFactory:()=>new Aw};function bw(n){return n?Object.assign(Object.assign({},Oh),n):Oh}function Fw(n){return n?Object.assign(Object.assign({},Rh),n):Rh}function Mw(){return{makeReadOptions:bw,makeWriteOptions:Fw,listUnknownFields(n){var e;return(e=n[Di])!==null&&e!==void 0?e:[]},discardUnknownFields(n){delete n[Di]},writeUnknownFields(n,e){const r=n[Di];if(r)for(const i of r)e.tag(i.no,i.wireType).raw(i.data)},onUnknownField(n,e,t,r){const i=n;Array.isArray(i[Di])||(i[Di]=[]),i[Di].push({no:e,wireType:t,data:r})},readMessage(n,e,t,r,i){const s=n.getType(),o=i?e.len:e.pos+t;let a,l;for(;e.pos<o&&([a,l]=e.tag(),!(i===!0&&l==he.EndGroup));){const c=s.fields.find(a);if(!c){const d=e.skip(l,a);r.readUnknownFields&&this.onUnknownField(n,a,l,d);continue}Lh(n,e,c,l,r)}if(i&&(l!=he.EndGroup||a!==t))throw new Error("invalid end group tag")},readField:Lh,writeMessage(n,e,t){const r=n.getType();for(const i of r.fields.byNumber()){if(!Fp(i,n)){if(i.req)throw new Error(`cannot encode field ${r.typeName}.${i.name} to binary: required field not set`);continue}const s=i.oneof?n[i.oneof.localName].value:n[i.localName];Bh(i,s,e,t)}return t.writeUnknownFields&&this.writeUnknownFields(n,e),e},writeField(n,e,t,r){e!==void 0&&Bh(n,e,t,r)}}}function Lh(n,e,t,r,i){let{repeated:s,localName:o}=t;switch(t.oneof&&(n=n[t.oneof.localName],n.case!=o&&delete n.value,n.case=o,o="value"),t.kind){case"scalar":case"enum":const a=t.kind=="enum"?A.INT32:t.T;let l=Ga;if(t.kind=="scalar"&&t.L>0&&(l=$w),s){let p=n[o];if(r==he.LengthDelimited&&a!=A.STRING&&a!=A.BYTES){let w=e.uint32()+e.pos;for(;e.pos<w;)p.push(l(e,a))}else p.push(l(e,a))}else n[o]=l(e,a);break;case"message":const c=t.T;s?n[o].push(ka(e,new c,i,t)):pi(n[o])?ka(e,n[o],i,t):(n[o]=ka(e,new c,i,t),c.fieldWrapper&&!t.oneof&&!t.repeated&&(n[o]=c.fieldWrapper.unwrapField(n[o])));break;case"map":let[d,h]=Jw(t,e,i);n[o][d]=h;break}}function ka(n,e,t,r){const i=e.getType().runtime.bin,s=r==null?void 0:r.delimited;return i.readMessage(e,n,s?r.no:n.uint32(),t,s),e}function Jw(n,e,t){const r=e.uint32(),i=e.pos+r;let s,o;for(;e.pos<i;){const[a]=e.tag();switch(a){case 1:s=Ga(e,n.K);break;case 2:switch(n.V.kind){case"scalar":o=Ga(e,n.V.T);break;case"enum":o=e.int32();break;case"message":o=ka(e,new n.V.T,t,void 0);break}break}}if(s===void 0&&(s=us(n.K,Yr.BIGINT)),typeof s!="string"&&typeof s!="number"&&(s=s.toString()),o===void 0)switch(n.V.kind){case"scalar":o=us(n.V.T,Yr.BIGINT);break;case"enum":o=n.V.T.values[0].no;break;case"message":o=new n.V.T;break}return[s,o]}function $w(n,e){const t=Ga(n,e);return typeof t=="bigint"?t.toString():t}function Ga(n,e){switch(e){case A.STRING:return n.string();case A.BOOL:return n.bool();case A.DOUBLE:return n.double();case A.FLOAT:return n.float();case A.INT32:return n.int32();case A.INT64:return n.int64();case A.UINT64:return n.uint64();case A.FIXED64:return n.fixed64();case A.BYTES:return n.bytes();case A.FIXED32:return n.fixed32();case A.SFIXED32:return n.sfixed32();case A.SFIXED64:return n.sfixed64();case A.SINT64:return n.sint64();case A.UINT32:return n.uint32();case A.SINT32:return n.sint32()}}function Bh(n,e,t,r){le(e!==void 0);const i=n.repeated;switch(n.kind){case"scalar":case"enum":let s=n.kind=="enum"?A.INT32:n.T;if(i)if(le(Array.isArray(e)),n.packed)Uw(t,s,n.no,e);else for(const o of e)Ws(t,s,n.no,o);else Ws(t,s,n.no,e);break;case"message":if(i){le(Array.isArray(e));for(const o of e)bh(t,r,n,o)}else bh(t,r,n,e);break;case"map":le(typeof e=="object"&&e!=null);for(const[o,a]of Object.entries(e))zw(t,r,n,o,a);break}}function zw(n,e,t,r,i){n.tag(t.no,he.LengthDelimited),n.fork();let s=r;switch(t.K){case A.INT32:case A.FIXED32:case A.UINT32:case A.SFIXED32:case A.SINT32:s=Number.parseInt(r);break;case A.BOOL:le(r=="true"||r=="false"),s=r=="true";break}switch(Ws(n,t.K,1,s),t.V.kind){case"scalar":Ws(n,t.V.T,2,i);break;case"enum":Ws(n,A.INT32,2,i);break;case"message":le(i!==void 0),n.tag(2,he.LengthDelimited).bytes(i.toBinary(e));break}n.join()}function bh(n,e,t,r){const i=Mp(t.T,r);t.delimited?n.tag(t.no,he.StartGroup).raw(i.toBinary(e)).tag(t.no,he.EndGroup):n.tag(t.no,he.LengthDelimited).bytes(i.toBinary(e))}function Ws(n,e,t,r){le(r!==void 0);let[i,s]=Jp(e);n.tag(t,i)[s](r)}function Uw(n,e,t,r){if(!r.length)return;n.tag(t,he.LengthDelimited).fork();let[,i]=Jp(e);for(let s=0;s<r.length;s++)n[i](r[s]);n.join()}function Jp(n){let e=he.Varint;switch(n){case A.BYTES:case A.STRING:e=he.LengthDelimited;break;case A.DOUBLE:case A.FIXED64:case A.SFIXED64:e=he.Bit64;break;case A.FIXED32:case A.SFIXED32:case A.FLOAT:e=he.Bit32;break}const t=A[n].toLowerCase();return[e,t]}function Vw(){return{setEnumType:Cp,initPartial(n,e){if(n===void 0)return;const t=e.getType();for(const r of t.fields.byMember()){const i=r.localName,s=e,o=n;if(o[i]!=null)switch(r.kind){case"oneof":const a=o[i].case;if(a===void 0)continue;const l=r.findField(a);let c=o[i].value;l&&l.kind=="message"&&!pi(c,l.T)?c=new l.T(c):l&&l.kind==="scalar"&&l.T===A.BYTES&&(c=Ds(c)),s[i]={case:a,value:c};break;case"scalar":case"enum":let d=o[i];r.T===A.BYTES&&(d=r.repeated?d.map(Ds):Ds(d)),s[i]=d;break;case"map":switch(r.V.kind){case"scalar":case"enum":if(r.V.T===A.BYTES)for(const[m,w]of Object.entries(o[i]))s[i][m]=Ds(w);else Object.assign(s[i],o[i]);break;case"message":const p=r.V.T;for(const m of Object.keys(o[i])){let w=o[i][m];p.fieldWrapper||(w=new p(w)),s[i][m]=w}break}break;case"message":const h=r.T;if(r.repeated)s[i]=o[i].map(p=>pi(p,h)?p:new h(p));else{const p=o[i];h.fieldWrapper?h.typeName==="google.protobuf.BytesValue"?s[i]=Ds(p):s[i]=p:s[i]=pi(p,h)?p:new h(p)}break}}},equals(n,e,t){return e===t?!0:!e||!t?!1:n.fields.byMember().every(r=>{const i=e[r.localName],s=t[r.localName];if(r.repeated){if(i.length!==s.length)return!1;switch(r.kind){case"message":return i.every((o,a)=>r.T.equals(o,s[a]));case"scalar":return i.every((o,a)=>Cr(r.T,o,s[a]));case"enum":return i.every((o,a)=>Cr(A.INT32,o,s[a]))}throw new Error(`repeated cannot contain ${r.kind}`)}switch(r.kind){case"message":return r.T.equals(i,s);case"enum":return Cr(A.INT32,i,s);case"scalar":return Cr(r.T,i,s);case"oneof":if(i.case!==s.case)return!1;const o=r.findField(i.case);if(o===void 0)return!0;switch(o.kind){case"message":return o.T.equals(i.value,s.value);case"enum":return Cr(A.INT32,i.value,s.value);case"scalar":return Cr(o.T,i.value,s.value)}throw new Error(`oneof cannot contain ${o.kind}`);case"map":const a=Object.keys(i).concat(Object.keys(s));switch(r.V.kind){case"message":const l=r.V.T;return a.every(d=>l.equals(i[d],s[d]));case"enum":return a.every(d=>Cr(A.INT32,i[d],s[d]));case"scalar":const c=r.V.T;return a.every(d=>Cr(c,i[d],s[d]))}break}})},clone(n){const e=n.getType(),t=new e,r=t;for(const i of e.fields.byMember()){const s=n[i.localName];let o;if(i.repeated)o=s.map(Zo);else if(i.kind=="map"){o=r[i.localName];for(const[a,l]of Object.entries(s))o[a]=Zo(l)}else i.kind=="oneof"?o=i.findField(s.case)?{case:s.case,value:Zo(s.value)}:{case:void 0}:o=Zo(s);r[i.localName]=o}for(const i of e.runtime.bin.listUnknownFields(n))e.runtime.bin.onUnknownField(r,i.no,i.wireType,i.data);return t}}}function Zo(n){if(n===void 0)return n;if(pi(n))return n.clone();if(n instanceof Uint8Array){const e=new Uint8Array(n.byteLength);return e.set(n),e}return n}function Ds(n){return n instanceof Uint8Array?n:new Uint8Array(n)}function jw(n,e,t){return{syntax:n,json:Rw(),bin:Mw(),util:Object.assign(Object.assign({},Vw()),{newFieldList:e,initFields:t}),makeMessageType(r,i,s){return yw(this,r,i,s)},makeEnum:pw,makeEnumType:Np,getEnumType:mw,makeExtension(r,i,s){return Ew(this,r,i,s)}}}class qw{constructor(e,t){this._fields=e,this._normalizer=t}findJsonName(e){if(!this.jsonNames){const t={};for(const r of this.list())t[r.jsonName]=t[r.name]=r;this.jsonNames=t}return this.jsonNames[e]}find(e){if(!this.numbers){const t={};for(const r of this.list())t[r.no]=r;this.numbers=t}return this.numbers[e]}list(){return this.all||(this.all=this._normalizer(this._fields)),this.all}byNumber(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort((e,t)=>e.no-t.no)),this.numbersAsc}byMember(){if(!this.members){this.members=[];const e=this.members;let t;for(const r of this.list())r.oneof?r.oneof!==t&&(t=r.oneof,e.push(t)):e.push(r)}return this.members}}function $p(n,e){const t=zp(n);return e?t:Yw(Gw(t))}function Kw(n){return $p(n,!1)}const Ww=zp;function zp(n){let e=!1;const t=[];for(let r=0;r<n.length;r++){let i=n.charAt(r);switch(i){case"_":e=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":t.push(i),e=!1;break;default:e&&(e=!1,i=i.toUpperCase()),t.push(i);break}}return t.join("")}const Hw=new Set(["constructor","toString","toJSON","valueOf"]),_w=new Set(["getType","clone","equals","fromBinary","fromJson","fromJsonString","toBinary","toJson","toJsonString","toObject"]),Up=n=>`${n}$`,Gw=n=>_w.has(n)?Up(n):n,Yw=n=>Hw.has(n)?Up(n):n;class Qw{constructor(e){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.req=!1,this.default=void 0,this.fields=[],this.name=e,this.localName=Kw(e)}addField(e){le(e.oneof===this,`field ${e.name} not one of ${this.name}`),this.fields.push(e)}findField(e){if(!this._lookup){this._lookup=Object.create(null);for(let t=0;t<this.fields.length;t++)this._lookup[this.fields[t].localName]=this.fields[t]}return this._lookup[e]}}function Xw(n,e){var t,r,i,s,o,a;const l=[];let c;for(const d of typeof n=="function"?n():n){const h=d;if(h.localName=$p(d.name,d.oneof!==void 0),h.jsonName=(t=d.jsonName)!==null&&t!==void 0?t:Ww(d.name),h.repeated=(r=d.repeated)!==null&&r!==void 0?r:!1,d.kind=="scalar"&&(h.L=(i=d.L)!==null&&i!==void 0?i:Yr.BIGINT),h.delimited=(s=d.delimited)!==null&&s!==void 0?s:!1,h.req=(o=d.req)!==null&&o!==void 0?o:!1,h.opt=(a=d.opt)!==null&&a!==void 0?a:!1,d.packed===void 0&&(h.packed=d.kind=="enum"||d.kind=="scalar"&&d.T!=A.BYTES&&d.T!=A.STRING),d.oneof!==void 0){const p=typeof d.oneof=="string"?d.oneof:d.oneof.name;(!c||c.name!=p)&&(c=new Qw(p)),h.oneof=c,c.addField(h)}l.push(h)}return l}const f=jw("proto3",n=>new qw(n,e=>Xw(e)),n=>{for(const e of n.getType().fields.byMember()){if(e.opt)continue;const t=e.localName,r=n;if(e.repeated){r[t]=[];continue}switch(e.kind){case"oneof":r[t]={case:void 0};break;case"enum":r[t]=0;break;case"map":r[t]={};break;case"scalar":r[t]=us(e.T,e.L);break}}});var Be;(function(n){n[n.Unary=0]="Unary",n[n.ServerStreaming=1]="ServerStreaming",n[n.ClientStreaming=2]="ClientStreaming",n[n.BiDiStreaming=3]="BiDiStreaming"})(Be||(Be={}));var Fh;(function(n){n[n.NoSideEffects=1]="NoSideEffects",n[n.Idempotent=2]="Idempotent"})(Fh||(Fh={}));class De extends D{constructor(e){super(),this.seconds=te.zero,this.nanos=0,f.util.initPartial(e,this)}fromJson(e,t){if(typeof e!="string")throw new Error(`cannot decode google.protobuf.Timestamp from JSON: ${f.json.debug(e)}`);const r=e.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!r)throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");const i=Date.parse(r[1]+"-"+r[2]+"-"+r[3]+"T"+r[4]+":"+r[5]+":"+r[6]+(r[8]?r[8]:"Z"));if(Number.isNaN(i))throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");if(i<Date.parse("0001-01-01T00:00:00Z")||i>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot decode message google.protobuf.Timestamp from JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");return this.seconds=te.parse(i/1e3),this.nanos=0,r[7]&&(this.nanos=parseInt("1"+r[7]+"0".repeat(9-r[7].length))-1e9),this}toJson(e){const t=Number(this.seconds)*1e3;if(t<Date.parse("0001-01-01T00:00:00Z")||t>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot encode google.protobuf.Timestamp to JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");if(this.nanos<0)throw new Error("cannot encode google.protobuf.Timestamp to JSON: nanos must not be negative");let r="Z";if(this.nanos>0){const i=(this.nanos+1e9).toString().substring(1);i.substring(3)==="000000"?r="."+i.substring(0,3)+"Z":i.substring(6)==="000"?r="."+i.substring(0,6)+"Z":r="."+i+"Z"}return new Date(t).toISOString().replace(".000Z",r)}toDate(){return new Date(Number(this.seconds)*1e3+Math.ceil(this.nanos/1e6))}static now(){return De.fromDate(new Date)}static fromDate(e){const t=e.getTime();return new De({seconds:te.parse(Math.floor(t/1e3)),nanos:t%1e3*1e6})}static fromBinary(e,t){return new De().fromBinary(e,t)}static fromJson(e,t){return new De().fromJson(e,t)}static fromJsonString(e,t){return new De().fromJsonString(e,t)}static equals(e,t){return f.util.equals(De,e,t)}}De.runtime=f;De.typeName="google.protobuf.Timestamp";De.fields=f.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);class dr extends D{constructor(e){super(),this.seconds=te.zero,this.nanos=0,f.util.initPartial(e,this)}fromJson(e,t){if(typeof e!="string")throw new Error(`cannot decode google.protobuf.Duration from JSON: ${f.json.debug(e)}`);const r=e.match(/^(-?[0-9]+)(?:\.([0-9]+))?s/);if(r===null)throw new Error(`cannot decode google.protobuf.Duration from JSON: ${f.json.debug(e)}`);const i=Number(r[1]);if(i>315576e6||i<-315576e6)throw new Error(`cannot decode google.protobuf.Duration from JSON: ${f.json.debug(e)}`);if(this.seconds=te.parse(i),typeof r[2]=="string"){const s=r[2]+"0".repeat(9-r[2].length);this.nanos=parseInt(s),(i<0||Object.is(i,-0))&&(this.nanos=-this.nanos)}return this}toJson(e){if(Number(this.seconds)>315576e6||Number(this.seconds)<-315576e6)throw new Error("cannot encode google.protobuf.Duration to JSON: value out of range");let t=this.seconds.toString();if(this.nanos!==0){let r=Math.abs(this.nanos).toString();r="0".repeat(9-r.length)+r,r.substring(3)==="000000"?r=r.substring(0,3):r.substring(6)==="000"&&(r=r.substring(0,6)),t+="."+r,this.nanos<0&&Number(this.seconds)==0&&(t="-"+t)}return t+"s"}static fromBinary(e,t){return new dr().fromBinary(e,t)}static fromJson(e,t){return new dr().fromJson(e,t)}static fromJsonString(e,t){return new dr().fromJsonString(e,t)}static equals(e,t){return f.util.equals(dr,e,t)}}dr.runtime=f;dr.typeName="google.protobuf.Duration";dr.fields=f.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);class Wt extends D{constructor(e){super(),this.typeUrl="",this.value=new Uint8Array(0),f.util.initPartial(e,this)}toJson(e){var t;if(this.typeUrl==="")return{};const r=this.typeUrlToName(this.typeUrl),i=(t=e==null?void 0:e.typeRegistry)===null||t===void 0?void 0:t.findMessage(r);if(!i)throw new Error(`cannot encode message google.protobuf.Any to JSON: "${this.typeUrl}" is not in the type registry`);let o=i.fromBinary(this.value).toJson(e);return(r.startsWith("google.protobuf.")||o===null||Array.isArray(o)||typeof o!="object")&&(o={value:o}),o["@type"]=this.typeUrl,o}fromJson(e,t){var r;if(e===null||Array.isArray(e)||typeof e!="object")throw new Error(`cannot decode message google.protobuf.Any from JSON: expected object but got ${e===null?"null":Array.isArray(e)?"array":typeof e}`);if(Object.keys(e).length==0)return this;const i=e["@type"];if(typeof i!="string"||i=="")throw new Error('cannot decode message google.protobuf.Any from JSON: "@type" is empty');const s=this.typeUrlToName(i),o=(r=t==null?void 0:t.typeRegistry)===null||r===void 0?void 0:r.findMessage(s);if(!o)throw new Error(`cannot decode message google.protobuf.Any from JSON: ${i} is not in the type registry`);let a;if(s.startsWith("google.protobuf.")&&Object.prototype.hasOwnProperty.call(e,"value"))a=o.fromJson(e.value,t);else{const l=Object.assign({},e);delete l["@type"],a=o.fromJson(l,t)}return this.packFrom(a),this}packFrom(e){this.value=e.toBinary(),this.typeUrl=this.typeNameToUrl(e.getType().typeName)}unpackTo(e){return this.is(e.getType())?(e.fromBinary(this.value),!0):!1}unpack(e){if(this.typeUrl==="")return;const t=e.findMessage(this.typeUrlToName(this.typeUrl));if(t)return t.fromBinary(this.value)}is(e){if(this.typeUrl==="")return!1;const t=this.typeUrlToName(this.typeUrl);let r="";return typeof e=="string"?r=e:r=e.typeName,t===r}typeNameToUrl(e){return`type.googleapis.com/${e}`}typeUrlToName(e){if(!e.length)throw new Error(`invalid type url: ${e}`);const t=e.lastIndexOf("/"),r=t>=0?e.substring(t+1):e;if(!r.length)throw new Error(`invalid type url: ${e}`);return r}static pack(e){const t=new Wt;return t.packFrom(e),t}static fromBinary(e,t){return new Wt().fromBinary(e,t)}static fromJson(e,t){return new Wt().fromJson(e,t)}static fromJsonString(e,t){return new Wt().fromJsonString(e,t)}static equals(e,t){return f.util.equals(Wt,e,t)}}Wt.runtime=f;Wt.typeName="google.protobuf.Any";Wt.fields=f.util.newFieldList(()=>[{no:1,name:"type_url",kind:"scalar",T:9},{no:2,name:"value",kind:"scalar",T:12}]);class Ht extends D{constructor(e){super(),this.value=0,f.util.initPartial(e,this)}toJson(e){return f.json.writeScalar(A.DOUBLE,this.value,!0)}fromJson(e,t){try{this.value=f.json.readScalar(A.DOUBLE,e)}catch(r){let i='cannot decode message google.protobuf.DoubleValue from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new Ht().fromBinary(e,t)}static fromJson(e,t){return new Ht().fromJson(e,t)}static fromJsonString(e,t){return new Ht().fromJsonString(e,t)}static equals(e,t){return f.util.equals(Ht,e,t)}}Ht.runtime=f;Ht.typeName="google.protobuf.DoubleValue";Ht.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:1}]);Ht.fieldWrapper={wrapField(n){return new Ht({value:n})},unwrapField(n){return n.value}};class _t extends D{constructor(e){super(),this.value=0,f.util.initPartial(e,this)}toJson(e){return f.json.writeScalar(A.FLOAT,this.value,!0)}fromJson(e,t){try{this.value=f.json.readScalar(A.FLOAT,e)}catch(r){let i='cannot decode message google.protobuf.FloatValue from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new _t().fromBinary(e,t)}static fromJson(e,t){return new _t().fromJson(e,t)}static fromJsonString(e,t){return new _t().fromJsonString(e,t)}static equals(e,t){return f.util.equals(_t,e,t)}}_t.runtime=f;_t.typeName="google.protobuf.FloatValue";_t.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:2}]);_t.fieldWrapper={wrapField(n){return new _t({value:n})},unwrapField(n){return n.value}};class Gt extends D{constructor(e){super(),this.value=te.zero,f.util.initPartial(e,this)}toJson(e){return f.json.writeScalar(A.INT64,this.value,!0)}fromJson(e,t){try{this.value=f.json.readScalar(A.INT64,e)}catch(r){let i='cannot decode message google.protobuf.Int64Value from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new Gt().fromBinary(e,t)}static fromJson(e,t){return new Gt().fromJson(e,t)}static fromJsonString(e,t){return new Gt().fromJsonString(e,t)}static equals(e,t){return f.util.equals(Gt,e,t)}}Gt.runtime=f;Gt.typeName="google.protobuf.Int64Value";Gt.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:3}]);Gt.fieldWrapper={wrapField(n){return new Gt({value:n})},unwrapField(n){return n.value}};class Yt extends D{constructor(e){super(),this.value=te.zero,f.util.initPartial(e,this)}toJson(e){return f.json.writeScalar(A.UINT64,this.value,!0)}fromJson(e,t){try{this.value=f.json.readScalar(A.UINT64,e)}catch(r){let i='cannot decode message google.protobuf.UInt64Value from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new Yt().fromBinary(e,t)}static fromJson(e,t){return new Yt().fromJson(e,t)}static fromJsonString(e,t){return new Yt().fromJsonString(e,t)}static equals(e,t){return f.util.equals(Yt,e,t)}}Yt.runtime=f;Yt.typeName="google.protobuf.UInt64Value";Yt.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:4}]);Yt.fieldWrapper={wrapField(n){return new Yt({value:n})},unwrapField(n){return n.value}};class Qt extends D{constructor(e){super(),this.value=0,f.util.initPartial(e,this)}toJson(e){return f.json.writeScalar(A.INT32,this.value,!0)}fromJson(e,t){try{this.value=f.json.readScalar(A.INT32,e)}catch(r){let i='cannot decode message google.protobuf.Int32Value from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new Qt().fromBinary(e,t)}static fromJson(e,t){return new Qt().fromJson(e,t)}static fromJsonString(e,t){return new Qt().fromJsonString(e,t)}static equals(e,t){return f.util.equals(Qt,e,t)}}Qt.runtime=f;Qt.typeName="google.protobuf.Int32Value";Qt.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:5}]);Qt.fieldWrapper={wrapField(n){return new Qt({value:n})},unwrapField(n){return n.value}};class Xt extends D{constructor(e){super(),this.value=0,f.util.initPartial(e,this)}toJson(e){return f.json.writeScalar(A.UINT32,this.value,!0)}fromJson(e,t){try{this.value=f.json.readScalar(A.UINT32,e)}catch(r){let i='cannot decode message google.protobuf.UInt32Value from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new Xt().fromBinary(e,t)}static fromJson(e,t){return new Xt().fromJson(e,t)}static fromJsonString(e,t){return new Xt().fromJsonString(e,t)}static equals(e,t){return f.util.equals(Xt,e,t)}}Xt.runtime=f;Xt.typeName="google.protobuf.UInt32Value";Xt.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:13}]);Xt.fieldWrapper={wrapField(n){return new Xt({value:n})},unwrapField(n){return n.value}};class Zt extends D{constructor(e){super(),this.value=!1,f.util.initPartial(e,this)}toJson(e){return f.json.writeScalar(A.BOOL,this.value,!0)}fromJson(e,t){try{this.value=f.json.readScalar(A.BOOL,e)}catch(r){let i='cannot decode message google.protobuf.BoolValue from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new Zt().fromBinary(e,t)}static fromJson(e,t){return new Zt().fromJson(e,t)}static fromJsonString(e,t){return new Zt().fromJsonString(e,t)}static equals(e,t){return f.util.equals(Zt,e,t)}}Zt.runtime=f;Zt.typeName="google.protobuf.BoolValue";Zt.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:8}]);Zt.fieldWrapper={wrapField(n){return new Zt({value:n})},unwrapField(n){return n.value}};class Xe extends D{constructor(e){super(),this.value="",f.util.initPartial(e,this)}toJson(e){return f.json.writeScalar(A.STRING,this.value,!0)}fromJson(e,t){try{this.value=f.json.readScalar(A.STRING,e)}catch(r){let i='cannot decode message google.protobuf.StringValue from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new Xe().fromBinary(e,t)}static fromJson(e,t){return new Xe().fromJson(e,t)}static fromJsonString(e,t){return new Xe().fromJsonString(e,t)}static equals(e,t){return f.util.equals(Xe,e,t)}}Xe.runtime=f;Xe.typeName="google.protobuf.StringValue";Xe.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:9}]);Xe.fieldWrapper={wrapField(n){return new Xe({value:n})},unwrapField(n){return n.value}};class en extends D{constructor(e){super(),this.value=new Uint8Array(0),f.util.initPartial(e,this)}toJson(e){return f.json.writeScalar(A.BYTES,this.value,!0)}fromJson(e,t){try{this.value=f.json.readScalar(A.BYTES,e)}catch(r){let i='cannot decode message google.protobuf.BytesValue from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new en().fromBinary(e,t)}static fromJson(e,t){return new en().fromJson(e,t)}static fromJsonString(e,t){return new en().fromJsonString(e,t)}static equals(e,t){return f.util.equals(en,e,t)}}en.runtime=f;en.typeName="google.protobuf.BytesValue";en.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:12}]);en.fieldWrapper={wrapField(n){return new en({value:n})},unwrapField(n){return n.value}};function Zw(n,e,t){try{const r=Wf.dec(n);return e?e.fromBinary(r,t):r}catch(r){throw pe.from(r,_.DataLoss)}}function e1(n,e){const t={};for(const[r,i]of Object.entries(n.methods)){const s=e(Object.assign(Object.assign({},i),{localName:r,service:n}));s!=null&&(t[r]=s)}return t}function Mh(n){let e,t=new Uint8Array(0);function r(i){const s=new Uint8Array(t.length+i.length);s.set(t),s.set(i,t.length),t=s}return new ReadableStream({start(){e=n.getReader()},async pull(i){let s;for(;;){if(s===void 0&&t.byteLength>=5){let l=0;for(let c=1;c<5;c++)l=(l<<8)+t[c];s={flags:t[0],length:l}}if(s!==void 0&&t.byteLength>=s.length+5)break;const a=await e.read();if(a.done)break;r(a.value)}if(s===void 0){if(t.byteLength==0){i.close();return}i.error(new pe("premature end of stream",_.DataLoss));return}const o=t.subarray(5,5+s.length);t=t.subarray(5+s.length),i.enqueue({flags:s.flags,data:o})}})}function Jh(n,e){const t=new Uint8Array(e.length+5);t.set(e,5);const r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.setUint8(0,n),r.setUint32(1,e.length),t}var t1=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof __values=="function"?__values(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,l){o=n[s](o),i(a,l,o.done,o.value)})}}function i(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}},go=function(n){return this instanceof go?(this.v=n,this):new go(n)},n1=function(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i={},a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(m){return function(w){return Promise.resolve(w).then(m,h)}}function a(m,w){r[m]&&(i[m]=function(I){return new Promise(function(O,y){s.push([m,I,O,y])>1||l(m,I)})},w&&(i[m]=w(i[m])))}function l(m,w){try{c(r[m](w))}catch(I){p(s[0][3],I)}}function c(m){m.value instanceof go?Promise.resolve(m.value.v).then(d,h):p(s[0][2],m)}function d(m){l("next",m)}function h(m){l("throw",m)}function p(m,w){m(w),s.shift(),s.length&&l(s[0][0],s[0][1])}},r1=function(n){var e,t;return e={},r("next"),r("throw",function(i){throw i}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(i,s){e[i]=n[i]?function(o){return(t=!t)?{value:go(n[i](o)),done:!1}:s?s(o):o}:s}};function i1(n){return n1(this,arguments,function*(){yield go(yield*r1(t1(n)))})}var Vp=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof __values=="function"?__values(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,l){o=n[s](o),i(a,l,o.done,o.value)})}}function i(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}},cs=function(n){return this instanceof cs?(this.v=n,this):new cs(n)},s1=function(n){var e,t;return e={},r("next"),r("throw",function(i){throw i}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(i,s){e[i]=n[i]?function(o){return(t=!t)?{value:cs(n[i](o)),done:!1}:s?s(o):o}:s}},o1=function(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i={},a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(m){return function(w){return Promise.resolve(w).then(m,h)}}function a(m,w){r[m]&&(i[m]=function(I){return new Promise(function(O,y){s.push([m,I,O,y])>1||l(m,I)})},w&&(i[m]=w(i[m])))}function l(m,w){try{c(r[m](w))}catch(I){p(s[0][3],I)}}function c(m){m.value instanceof cs?Promise.resolve(m.value.v).then(d,h):p(s[0][2],m)}function d(m){l("next",m)}function h(m){l("throw",m)}function p(m,w){m(w),s.shift(),s.length&&l(s[0][0],s[0][1])}};function a1(n,e){return e1(n,t=>{switch(t.kind){case Be.Unary:return l1(e,n,t);case Be.ServerStreaming:return u1(e,n,t);case Be.ClientStreaming:return c1(e,n,t);case Be.BiDiStreaming:return f1(e,n,t);default:return null}})}function l1(n,e,t){return async function(r,i){var s,o;const a=await n.unary(e,t,i==null?void 0:i.signal,i==null?void 0:i.timeoutMs,i==null?void 0:i.headers,r,i==null?void 0:i.contextValues);return(s=i==null?void 0:i.onHeader)===null||s===void 0||s.call(i,a.header),(o=i==null?void 0:i.onTrailer)===null||o===void 0||o.call(i,a.trailer),a.message}}function u1(n,e,t){return function(r,i){return jp(n.stream(e,t,i==null?void 0:i.signal,i==null?void 0:i.timeoutMs,i==null?void 0:i.headers,i1([r]),i==null?void 0:i.contextValues),i)}}function c1(n,e,t){return async function(r,i){var s,o,a,l,c,d;const h=await n.stream(e,t,i==null?void 0:i.signal,i==null?void 0:i.timeoutMs,i==null?void 0:i.headers,r,i==null?void 0:i.contextValues);(c=i==null?void 0:i.onHeader)===null||c===void 0||c.call(i,h.header);let p;try{for(var m=!0,w=Vp(h.message),I;I=await w.next(),s=I.done,!s;m=!0)l=I.value,m=!1,p=l}catch(O){o={error:O}}finally{try{!m&&!s&&(a=w.return)&&await a.call(w)}finally{if(o)throw o.error}}if(!p)throw new pe("protocol error: missing response message",_.Internal);return(d=i==null?void 0:i.onTrailer)===null||d===void 0||d.call(i,h.trailer),p}}function f1(n,e,t){return function(r,i){return jp(n.stream(e,t,i==null?void 0:i.signal,i==null?void 0:i.timeoutMs,i==null?void 0:i.headers,r,i==null?void 0:i.contextValues),i)}}function jp(n,e){const t=function(){var r,i;return o1(this,arguments,function*(){const s=yield cs(n);(r=e==null?void 0:e.onHeader)===null||r===void 0||r.call(e,s.header),yield cs(yield*s1(Vp(s.message))),(i=e==null?void 0:e.onTrailer)===null||i===void 0||i.call(e,s.trailer)})}()[Symbol.asyncIterator]();return{[Symbol.asyncIterator]:()=>({next:()=>t.next()})}}function d1(...n){const e=new AbortController,t=n.filter(i=>i!==void 0).concat(e.signal);for(const i of t){if(i.aborted){r.apply(i);break}i.addEventListener("abort",r)}function r(){e.signal.aborted||e.abort(qp(this));for(const i of t)i.removeEventListener("abort",r)}return e}function h1(n){const e=new AbortController,t=()=>{e.abort(new pe("the operation timed out",_.DeadlineExceeded))};let r;return n!==void 0&&(n<=0?t():r=setTimeout(t,n)),{signal:e.signal,cleanup:()=>clearTimeout(r)}}function qp(n){if(!n.aborted)return;if(n.reason!==void 0)return n.reason;const e=new Error("This operation was aborted");return e.name="AbortError",e}function $h(){return{get(n){return n.id in this?this[n.id]:n.defaultValue},set(n,e){return this[n.id]=e,this},delete(n){return delete this[n.id],this}}}const Su=128;function zh(n){const e=new Headers,t=new TextDecoder().decode(n).split(`\r
`);for(const r of t){if(r==="")continue;const i=r.indexOf(":");if(i>0){const s=r.substring(0,i).trim(),o=r.substring(i+1).trim();e.append(s,o)}}return e}const g1="Content-Type",m1="Grpc-Timeout",Kp="Grpc-Status",Wp="Grpc-Message",p1="Grpc-Status-Details-Bin",y1="X-User-Agent",v1="X-Grpc-Web",w1="application/grpc-web+proto",S1="application/grpc-web+json";class hr extends D{constructor(e){super(),this.code=0,this.message="",this.details=[],f.util.initPartial(e,this)}static fromBinary(e,t){return new hr().fromBinary(e,t)}static fromJson(e,t){return new hr().fromJson(e,t)}static fromJsonString(e,t){return new hr().fromJsonString(e,t)}static equals(e,t){return f.util.equals(hr,e,t)}}hr.runtime=f;hr.typeName="google.rpc.Status";hr.fields=f.util.newFieldList(()=>[{no:1,name:"code",kind:"scalar",T:5},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"details",kind:"message",T:Wt,repeated:!0}]);const k1="0";function Hp(n){var e;const t=n.get(p1);if(t!=null){const i=Zw(t,hr);if(i.code==0)return;const s=new pe(i.message,i.code,n);return s.details=i.details.map(o=>({type:o.typeUrl.substring(o.typeUrl.lastIndexOf("/")+1),value:o.value})),s}const r=n.get(Kp);if(r!=null){if(r===k1)return;const i=parseInt(r,10);return i in _?new pe(decodeURIComponent((e=n.get(Wp))!==null&&e!==void 0?e:""),i,n):new pe(`invalid grpc-status: ${r}`,_.Internal,n)}}function Uh(n,e,t){const r=typeof e=="string"?e:e.typeName,i=typeof t=="string"?t:t.name;return n.toString().replace(/\/?$/,`/${r}/${i}`)}function _p(n,e){return e instanceof n?e:new n(e)}function T1(n,e){function t(r){return r.done===!0?r:{done:r.done,value:_p(n,r.value)}}return{[Symbol.asyncIterator](){const r=e[Symbol.asyncIterator](),i={next:()=>r.next().then(t)};return r.throw!==void 0&&(i.throw=s=>r.throw(s).then(t)),r.return!==void 0&&(i.return=s=>r.return(s).then(t)),i}}}function Gp(n,e){var t;return(t=e==null?void 0:e.concat().reverse().reduce((r,i)=>i(r),n))!==null&&t!==void 0?t:n}function A1(n){var e;const t=Object.assign({},n);return(e=t.ignoreUnknownFields)!==null&&e!==void 0||(t.ignoreUnknownFields=!0),t}function Vh(n,e,t,r){const i=e?jh(n.I,r):qh(n.I,t);return{parse:(e?jh(n.O,r):qh(n.O,t)).parse,serialize:i.serialize}}function jh(n,e){return{parse(t){try{return n.fromBinary(t,e)}catch(r){const i=r instanceof Error?r.message:String(r);throw new pe(`parse binary: ${i}`,_.InvalidArgument)}},serialize(t){try{return t.toBinary(e)}catch(r){const i=r instanceof Error?r.message:String(r);throw new pe(`serialize binary: ${i}`,_.Internal)}}}}function qh(n,e){var t,r;const i=(t=e==null?void 0:e.textEncoder)!==null&&t!==void 0?t:new TextEncoder,s=(r=e==null?void 0:e.textDecoder)!==null&&r!==void 0?r:new TextDecoder,o=A1(e);return{parse(a){try{const l=s.decode(a);return n.fromJsonString(l,o)}catch(l){throw pe.from(l,_.InvalidArgument)}},serialize(a){try{const l=a.toJsonString(o);return i.encode(l)}catch(l){throw pe.from(l,_.Internal)}}}}function I1(n){const e=Gp(n.next,n.interceptors),[t,r,i]=Yp(n),s=Object.assign(Object.assign({},n.req),{message:_p(n.req.method.I,n.req.message),signal:t});return e(s).then(o=>(i(),o),r)}function E1(n){const e=Gp(n.next,n.interceptors),[t,r,i]=Yp(n),s=Object.assign(Object.assign({},n.req),{message:T1(n.req.method.I,n.req.message),signal:t});let o=!1;return t.addEventListener("abort",function(){var a,l;const c=n.req.message[Symbol.asyncIterator]();o||(a=c.throw)===null||a===void 0||a.call(c,this.reason).catch(()=>{}),(l=c.return)===null||l===void 0||l.call(c).catch(()=>{})}),e(s).then(a=>Object.assign(Object.assign({},a),{message:{[Symbol.asyncIterator](){const l=a.message[Symbol.asyncIterator]();return{next(){return l.next().then(c=>(c.done==!0&&(o=!0,i()),c),r)}}}}}),r)}function Yp(n){const{signal:e,cleanup:t}=h1(n.timeoutMs),r=d1(n.signal,e);return[r.signal,function(s){const o=pe.from(e.aborted?qp(e):s);return r.abort(o),t(),Promise.reject(o)},function(){t(),r.abort()}]}function x1(){try{new Headers}catch{throw new Error("connect-web requires the fetch API. Are you running on an old version of Node.js? Node.js is not supported in Connect for Web - please stay tuned for Connect for Node.")}}function Kh(n,e){const t=Hp(n);if(t)throw e.forEach((r,i)=>{t.metadata.append(i,r)}),t}function Wh(n,e,t,r){const i=new Headers(t??{});return i.set(g1,n?w1:S1),i.set(v1,"1"),i.set(y1,"connect-es/1.4.0"),e!==void 0&&i.set(m1,`${e}m`),i}function C1(n){switch(n){case 400:return _.Internal;case 401:return _.Unauthenticated;case 403:return _.PermissionDenied;case 404:return _.Unimplemented;case 429:return _.Unavailable;case 502:return _.Unavailable;case 503:return _.Unavailable;case 504:return _.Unavailable;default:return _.Unknown}}function Hh(n,e){var t;if(n>=200&&n<300){const r=Hp(e);if(r)throw r;return{foundStatus:e.has(Kp)}}throw new pe(decodeURIComponent((t=e.get(Wp))!==null&&t!==void 0?t:`HTTP ${n}`),C1(n),e)}var di=function(n){return this instanceof di?(this.v=n,this):new di(n)},N1=function(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i={},a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(m){return function(w){return Promise.resolve(w).then(m,h)}}function a(m,w){r[m]&&(i[m]=function(I){return new Promise(function(O,y){s.push([m,I,O,y])>1||l(m,I)})},w&&(i[m]=w(i[m])))}function l(m,w){try{c(r[m](w))}catch(I){p(s[0][3],I)}}function c(m){m.value instanceof di?Promise.resolve(m.value.v).then(d,h):p(s[0][2],m)}function d(m){l("next",m)}function h(m){l("throw",m)}function p(m,w){m(w),s.shift(),s.length&&l(s[0][0],s[0][1])}};function P1(n){var e;x1();const t=(e=n.useBinaryFormat)!==null&&e!==void 0?e:!0;return{async unary(r,i,s,o,a,l,c){var d;const{serialize:h,parse:p}=Vh(i,t,n.jsonOptions,n.binaryOptions);return o=o===void 0?n.defaultTimeoutMs:o<=0?void 0:o,await I1({interceptors:n.interceptors,signal:s,timeoutMs:o,req:{stream:!1,service:r,method:i,url:Uh(n.baseUrl,r,i),init:{method:"POST",credentials:(d=n.credentials)!==null&&d!==void 0?d:"same-origin",redirect:"error",mode:"cors"},header:Wh(t,o,a),contextValues:c??$h(),message:l},next:async m=>{var w;const O=await((w=n.fetch)!==null&&w!==void 0?w:globalThis.fetch)(m.url,Object.assign(Object.assign({},m.init),{headers:m.header,signal:m.signal,body:Jh(0,h(m.message))}));if(Hh(O.status,O.headers),!O.body)throw"missing response body";const y=Mh(O.body).getReader();let g,v;for(;;){const T=await y.read();if(T.done)break;const{flags:x,data:N}=T.value;if(x===Su){if(g!==void 0)throw"extra trailer";g=zh(N);continue}if(v!==void 0)throw"extra message";v=p(N)}if(g===void 0)throw"missing trailer";if(Kh(g,O.headers),v===void 0)throw"missing message";return{stream:!1,service:r,method:i,header:O.headers,message:v,trailer:g}}})},async stream(r,i,s,o,a,l,c){var d;const{serialize:h,parse:p}=Vh(i,t,n.jsonOptions,n.binaryOptions);function m(I,O,y,g){return N1(this,arguments,function*(){const T=Mh(I).getReader();if(O){if(!(yield di(T.read())).done)throw"extra data for trailers-only";return yield di(void 0)}let x=!1;for(;;){const N=yield di(T.read());if(N.done)break;const{flags:P,data:B}=N.value;if((P&Su)===Su){if(x)throw"extra trailer";x=!0;const H=zh(B);Kh(H,g),H.forEach((U,Ge)=>y.set(Ge,U));continue}if(x)throw"extra message";yield yield di(p(B))}if(!x)throw"missing trailer"})}async function w(I){if(i.kind!=Be.ServerStreaming)throw"The fetch API does not support streaming request bodies";const O=await I[Symbol.asyncIterator]().next();if(O.done==!0)throw"missing request message";return Jh(0,h(O.value))}return o=o===void 0?n.defaultTimeoutMs:o<=0?void 0:o,E1({interceptors:n.interceptors,signal:s,timeoutMs:o,req:{stream:!0,service:r,method:i,url:Uh(n.baseUrl,r,i),init:{method:"POST",credentials:(d=n.credentials)!==null&&d!==void 0?d:"same-origin",redirect:"error",mode:"cors"},header:Wh(t,o,a),contextValues:c??$h(),message:l},next:async I=>{var O;const g=await((O=n.fetch)!==null&&O!==void 0?O:globalThis.fetch)(I.url,Object.assign(Object.assign({},I.init),{headers:I.header,signal:I.signal,body:await w(I.message)})),{foundStatus:v}=Hh(g.status,g.headers);if(!g.body)throw"missing response body";const T=new Headers;return Object.assign(Object.assign({},I),{header:g.headers,trailer:T,message:m(g.body,v,T,g.headers)})}})}}}var $=(n=>(n[n.NULL=0]="NULL",n[n.BOOLEAN=1]="BOOLEAN",n[n.INTEGER=2]="INTEGER",n[n.LONG=3]="LONG",n[n.DOUBLE=4]="DOUBLE",n[n.STRING=5]="STRING",n[n.BYTES=6]="BYTES",n[n.DATE=7]="DATE",n[n.JSON_OBJECT=8]="JSON_OBJECT",n[n.JSON_ARRAY=9]="JSON_ARRAY",n[n.TEXT=10]="TEXT",n[n.INTEGER_CNT=11]="INTEGER_CNT",n[n.LONG_CNT=12]="LONG_CNT",n[n.TREE=13]="TREE",n))($||{});f.util.setEnumType($,"yorkie.v1.ValueType",[{no:0,name:"VALUE_TYPE_NULL"},{no:1,name:"VALUE_TYPE_BOOLEAN"},{no:2,name:"VALUE_TYPE_INTEGER"},{no:3,name:"VALUE_TYPE_LONG"},{no:4,name:"VALUE_TYPE_DOUBLE"},{no:5,name:"VALUE_TYPE_STRING"},{no:6,name:"VALUE_TYPE_BYTES"},{no:7,name:"VALUE_TYPE_DATE"},{no:8,name:"VALUE_TYPE_JSON_OBJECT"},{no:9,name:"VALUE_TYPE_JSON_ARRAY"},{no:10,name:"VALUE_TYPE_TEXT"},{no:11,name:"VALUE_TYPE_INTEGER_CNT"},{no:12,name:"VALUE_TYPE_LONG_CNT"},{no:13,name:"VALUE_TYPE_TREE"}]);var yi=(n=>(n[n.DOCUMENT_CHANGED=0]="DOCUMENT_CHANGED",n[n.DOCUMENT_WATCHED=1]="DOCUMENT_WATCHED",n[n.DOCUMENT_UNWATCHED=2]="DOCUMENT_UNWATCHED",n[n.DOCUMENT_BROADCAST=3]="DOCUMENT_BROADCAST",n))(yi||{});f.util.setEnumType(yi,"yorkie.v1.DocEventType",[{no:0,name:"DOC_EVENT_TYPE_DOCUMENT_CHANGED"},{no:1,name:"DOC_EVENT_TYPE_DOCUMENT_WATCHED"},{no:2,name:"DOC_EVENT_TYPE_DOCUMENT_UNWATCHED"},{no:3,name:"DOC_EVENT_TYPE_DOCUMENT_BROADCAST"}]);const ln=class ln extends D{constructor(t){super();u(this,"root");u(this,"presences",{});f.util.initPartial(t,this)}static fromBinary(t,r){return new ln().fromBinary(t,r)}static fromJson(t,r){return new ln().fromJson(t,r)}static fromJsonString(t,r){return new ln().fromJsonString(t,r)}static equals(t,r){return f.util.equals(ln,t,r)}};u(ln,"runtime",f),u(ln,"typeName","yorkie.v1.Snapshot"),u(ln,"fields",f.util.newFieldList(()=>[{no:1,name:"root",kind:"message",T:_e},{no:2,name:"presences",kind:"map",K:9,V:{kind:"message",T:_f}}]));let Tc=ln;var ct;let Er=(ct=class extends D{constructor(t){super();u(this,"documentKey","");u(this,"checkpoint");u(this,"snapshot",new Uint8Array(0));u(this,"changes",[]);u(this,"minSyncedTicket");u(this,"isRemoved",!1);u(this,"versionVector");f.util.initPartial(t,this)}static fromBinary(t,r){return new ct().fromBinary(t,r)}static fromJson(t,r){return new ct().fromJson(t,r)}static fromJsonString(t,r){return new ct().fromJsonString(t,r)}static equals(t,r){return f.util.equals(ct,t,r)}},u(ct,"runtime",f),u(ct,"typeName","yorkie.v1.ChangePack"),u(ct,"fields",f.util.newFieldList(()=>[{no:1,name:"document_key",kind:"scalar",T:9},{no:2,name:"checkpoint",kind:"message",T:Zp},{no:3,name:"snapshot",kind:"scalar",T:12},{no:4,name:"changes",kind:"message",T:Qp,repeated:!0},{no:5,name:"min_synced_ticket",kind:"message",T:b},{no:6,name:"is_removed",kind:"scalar",T:8},{no:7,name:"version_vector",kind:"message",T:Fl}])),ct);var ft;let Qp=(ft=class extends D{constructor(t){super();u(this,"id");u(this,"message","");u(this,"operations",[]);u(this,"presenceChange");f.util.initPartial(t,this)}static fromBinary(t,r){return new ft().fromBinary(t,r)}static fromJson(t,r){return new ft().fromJson(t,r)}static fromJsonString(t,r){return new ft().fromJsonString(t,r)}static equals(t,r){return f.util.equals(ft,t,r)}},u(ft,"runtime",f),u(ft,"typeName","yorkie.v1.Change"),u(ft,"fields",f.util.newFieldList(()=>[{no:1,name:"id",kind:"message",T:bl},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"operations",kind:"message",T:Hf,repeated:!0},{no:4,name:"presence_change",kind:"message",T:yo}])),ft);var dt;let bl=(dt=class extends D{constructor(t){super();u(this,"clientSeq",0);u(this,"serverSeq",te.zero);u(this,"lamport",te.zero);u(this,"actorId",new Uint8Array(0));u(this,"versionVector");f.util.initPartial(t,this)}static fromBinary(t,r){return new dt().fromBinary(t,r)}static fromJson(t,r){return new dt().fromJson(t,r)}static fromJsonString(t,r){return new dt().fromJsonString(t,r)}static equals(t,r){return f.util.equals(dt,t,r)}},u(dt,"runtime",f),u(dt,"typeName","yorkie.v1.ChangeID"),u(dt,"fields",f.util.newFieldList(()=>[{no:1,name:"client_seq",kind:"scalar",T:13},{no:2,name:"server_seq",kind:"scalar",T:3},{no:3,name:"lamport",kind:"scalar",T:3},{no:4,name:"actor_id",kind:"scalar",T:12},{no:5,name:"version_vector",kind:"message",T:Fl}])),dt);var ht;let Fl=(ht=class extends D{constructor(t){super();u(this,"vector",{});f.util.initPartial(t,this)}static fromBinary(t,r){return new ht().fromBinary(t,r)}static fromJson(t,r){return new ht().fromJson(t,r)}static fromJsonString(t,r){return new ht().fromJsonString(t,r)}static equals(t,r){return f.util.equals(ht,t,r)}},u(ht,"runtime",f),u(ht,"typeName","yorkie.v1.VersionVector"),u(ht,"fields",f.util.newFieldList(()=>[{no:1,name:"vector",kind:"map",K:9,V:{kind:"scalar",T:3}}])),ht);var gt;let Hf=(gt=class extends D{constructor(t){super();u(this,"body",{case:void 0});f.util.initPartial(t,this)}static fromBinary(t,r){return new gt().fromBinary(t,r)}static fromJson(t,r){return new gt().fromJson(t,r)}static fromJsonString(t,r){return new gt().fromJsonString(t,r)}static equals(t,r){return f.util.equals(gt,t,r)}},u(gt,"runtime",f),u(gt,"typeName","yorkie.v1.Operation"),u(gt,"fields",f.util.newFieldList(()=>[{no:1,name:"set",kind:"message",T:Ya,oneof:"body"},{no:2,name:"add",kind:"message",T:Qa,oneof:"body"},{no:3,name:"move",kind:"message",T:Xa,oneof:"body"},{no:4,name:"remove",kind:"message",T:Za,oneof:"body"},{no:5,name:"edit",kind:"message",T:el,oneof:"body"},{no:6,name:"select",kind:"message",T:Ac,oneof:"body"},{no:7,name:"style",kind:"message",T:tl,oneof:"body"},{no:8,name:"increase",kind:"message",T:nl,oneof:"body"},{no:9,name:"tree_edit",kind:"message",T:rl,oneof:"body"},{no:10,name:"tree_style",kind:"message",T:il,oneof:"body"},{no:11,name:"array_set",kind:"message",T:Ic,oneof:"body"}])),gt);const un=class un extends D{constructor(t){super();u(this,"parentCreatedAt");u(this,"key","");u(this,"value");u(this,"executedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new un().fromBinary(t,r)}static fromJson(t,r){return new un().fromJson(t,r)}static fromJsonString(t,r){return new un().fromJsonString(t,r)}static equals(t,r){return f.util.equals(un,t,r)}};u(un,"runtime",f),u(un,"typeName","yorkie.v1.Operation.Set"),u(un,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:b},{no:2,name:"key",kind:"scalar",T:9},{no:3,name:"value",kind:"message",T:ut},{no:4,name:"executed_at",kind:"message",T:b}]));let Ya=un;const cn=class cn extends D{constructor(t){super();u(this,"parentCreatedAt");u(this,"prevCreatedAt");u(this,"value");u(this,"executedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new cn().fromBinary(t,r)}static fromJson(t,r){return new cn().fromJson(t,r)}static fromJsonString(t,r){return new cn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(cn,t,r)}};u(cn,"runtime",f),u(cn,"typeName","yorkie.v1.Operation.Add"),u(cn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:b},{no:2,name:"prev_created_at",kind:"message",T:b},{no:3,name:"value",kind:"message",T:ut},{no:4,name:"executed_at",kind:"message",T:b}]));let Qa=cn;const fn=class fn extends D{constructor(t){super();u(this,"parentCreatedAt");u(this,"prevCreatedAt");u(this,"createdAt");u(this,"executedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new fn().fromBinary(t,r)}static fromJson(t,r){return new fn().fromJson(t,r)}static fromJsonString(t,r){return new fn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(fn,t,r)}};u(fn,"runtime",f),u(fn,"typeName","yorkie.v1.Operation.Move"),u(fn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:b},{no:2,name:"prev_created_at",kind:"message",T:b},{no:3,name:"created_at",kind:"message",T:b},{no:4,name:"executed_at",kind:"message",T:b}]));let Xa=fn;const dn=class dn extends D{constructor(t){super();u(this,"parentCreatedAt");u(this,"createdAt");u(this,"executedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new dn().fromBinary(t,r)}static fromJson(t,r){return new dn().fromJson(t,r)}static fromJsonString(t,r){return new dn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(dn,t,r)}};u(dn,"runtime",f),u(dn,"typeName","yorkie.v1.Operation.Remove"),u(dn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:b},{no:2,name:"created_at",kind:"message",T:b},{no:3,name:"executed_at",kind:"message",T:b}]));let Za=dn;const hn=class hn extends D{constructor(t){super();u(this,"parentCreatedAt");u(this,"from");u(this,"to");u(this,"createdAtMapByActor",{});u(this,"content","");u(this,"executedAt");u(this,"attributes",{});f.util.initPartial(t,this)}static fromBinary(t,r){return new hn().fromBinary(t,r)}static fromJson(t,r){return new hn().fromJson(t,r)}static fromJsonString(t,r){return new hn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(hn,t,r)}};u(hn,"runtime",f),u(hn,"typeName","yorkie.v1.Operation.Edit"),u(hn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:b},{no:2,name:"from",kind:"message",T:Tr},{no:3,name:"to",kind:"message",T:Tr},{no:4,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:b}},{no:5,name:"content",kind:"scalar",T:9},{no:6,name:"executed_at",kind:"message",T:b},{no:7,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}}]));let el=hn;const gn=class gn extends D{constructor(t){super();u(this,"parentCreatedAt");u(this,"from");u(this,"to");u(this,"executedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new gn().fromBinary(t,r)}static fromJson(t,r){return new gn().fromJson(t,r)}static fromJsonString(t,r){return new gn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(gn,t,r)}};u(gn,"runtime",f),u(gn,"typeName","yorkie.v1.Operation.Select"),u(gn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:b},{no:2,name:"from",kind:"message",T:Tr},{no:3,name:"to",kind:"message",T:Tr},{no:4,name:"executed_at",kind:"message",T:b}]));let Ac=gn;const mn=class mn extends D{constructor(t){super();u(this,"parentCreatedAt");u(this,"from");u(this,"to");u(this,"attributes",{});u(this,"executedAt");u(this,"createdAtMapByActor",{});f.util.initPartial(t,this)}static fromBinary(t,r){return new mn().fromBinary(t,r)}static fromJson(t,r){return new mn().fromJson(t,r)}static fromJsonString(t,r){return new mn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(mn,t,r)}};u(mn,"runtime",f),u(mn,"typeName","yorkie.v1.Operation.Style"),u(mn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:b},{no:2,name:"from",kind:"message",T:Tr},{no:3,name:"to",kind:"message",T:Tr},{no:4,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:5,name:"executed_at",kind:"message",T:b},{no:6,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:b}}]));let tl=mn;const pn=class pn extends D{constructor(t){super();u(this,"parentCreatedAt");u(this,"value");u(this,"executedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new pn().fromBinary(t,r)}static fromJson(t,r){return new pn().fromJson(t,r)}static fromJsonString(t,r){return new pn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(pn,t,r)}};u(pn,"runtime",f),u(pn,"typeName","yorkie.v1.Operation.Increase"),u(pn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:b},{no:2,name:"value",kind:"message",T:ut},{no:3,name:"executed_at",kind:"message",T:b}]));let nl=pn;const yn=class yn extends D{constructor(t){super();u(this,"parentCreatedAt");u(this,"from");u(this,"to");u(this,"createdAtMapByActor",{});u(this,"contents",[]);u(this,"splitLevel",0);u(this,"executedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new yn().fromBinary(t,r)}static fromJson(t,r){return new yn().fromJson(t,r)}static fromJsonString(t,r){return new yn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(yn,t,r)}};u(yn,"runtime",f),u(yn,"typeName","yorkie.v1.Operation.TreeEdit"),u(yn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:b},{no:2,name:"from",kind:"message",T:Ai},{no:3,name:"to",kind:"message",T:Ai},{no:4,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:b}},{no:5,name:"contents",kind:"message",T:hl,repeated:!0},{no:7,name:"split_level",kind:"scalar",T:5},{no:6,name:"executed_at",kind:"message",T:b}]));let rl=yn;const vn=class vn extends D{constructor(t){super();u(this,"parentCreatedAt");u(this,"from");u(this,"to");u(this,"attributes",{});u(this,"executedAt");u(this,"attributesToRemove",[]);u(this,"createdAtMapByActor",{});f.util.initPartial(t,this)}static fromBinary(t,r){return new vn().fromBinary(t,r)}static fromJson(t,r){return new vn().fromJson(t,r)}static fromJsonString(t,r){return new vn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(vn,t,r)}};u(vn,"runtime",f),u(vn,"typeName","yorkie.v1.Operation.TreeStyle"),u(vn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:b},{no:2,name:"from",kind:"message",T:Ai},{no:3,name:"to",kind:"message",T:Ai},{no:4,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:5,name:"executed_at",kind:"message",T:b},{no:6,name:"attributes_to_remove",kind:"scalar",T:9,repeated:!0},{no:7,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:b}}]));let il=vn;const wn=class wn extends D{constructor(t){super();u(this,"parentCreatedAt");u(this,"createdAt");u(this,"value");u(this,"executedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new wn().fromBinary(t,r)}static fromJson(t,r){return new wn().fromJson(t,r)}static fromJsonString(t,r){return new wn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(wn,t,r)}};u(wn,"runtime",f),u(wn,"typeName","yorkie.v1.Operation.ArraySet"),u(wn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:b},{no:2,name:"created_at",kind:"message",T:b},{no:3,name:"value",kind:"message",T:ut},{no:4,name:"executed_at",kind:"message",T:b}]));let Ic=wn;const Sn=class Sn extends D{constructor(t){super();u(this,"createdAt");u(this,"movedAt");u(this,"removedAt");u(this,"type",0);u(this,"value",new Uint8Array(0));f.util.initPartial(t,this)}static fromBinary(t,r){return new Sn().fromBinary(t,r)}static fromJson(t,r){return new Sn().fromJson(t,r)}static fromJsonString(t,r){return new Sn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Sn,t,r)}};u(Sn,"runtime",f),u(Sn,"typeName","yorkie.v1.JSONElementSimple"),u(Sn,"fields",f.util.newFieldList(()=>[{no:1,name:"created_at",kind:"message",T:b},{no:2,name:"moved_at",kind:"message",T:b},{no:3,name:"removed_at",kind:"message",T:b},{no:4,name:"type",kind:"enum",T:f.getEnumType($)},{no:5,name:"value",kind:"scalar",T:12}]));let ut=Sn;const kn=class kn extends D{constructor(t){super();u(this,"body",{case:void 0});f.util.initPartial(t,this)}static fromBinary(t,r){return new kn().fromBinary(t,r)}static fromJson(t,r){return new kn().fromJson(t,r)}static fromJsonString(t,r){return new kn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(kn,t,r)}};u(kn,"runtime",f),u(kn,"typeName","yorkie.v1.JSONElement"),u(kn,"fields",f.util.newFieldList(()=>[{no:1,name:"json_object",kind:"message",T:sl,oneof:"body"},{no:2,name:"json_array",kind:"message",T:ol,oneof:"body"},{no:3,name:"primitive",kind:"message",T:al,oneof:"body"},{no:5,name:"text",kind:"message",T:ll,oneof:"body"},{no:6,name:"counter",kind:"message",T:ul,oneof:"body"},{no:7,name:"tree",kind:"message",T:cl,oneof:"body"}]));let _e=kn;const Tn=class Tn extends D{constructor(t){super();u(this,"nodes",[]);u(this,"createdAt");u(this,"movedAt");u(this,"removedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new Tn().fromBinary(t,r)}static fromJson(t,r){return new Tn().fromJson(t,r)}static fromJsonString(t,r){return new Tn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Tn,t,r)}};u(Tn,"runtime",f),u(Tn,"typeName","yorkie.v1.JSONElement.JSONObject"),u(Tn,"fields",f.util.newFieldList(()=>[{no:1,name:"nodes",kind:"message",T:Xp,repeated:!0},{no:2,name:"created_at",kind:"message",T:b},{no:3,name:"moved_at",kind:"message",T:b},{no:4,name:"removed_at",kind:"message",T:b}]));let sl=Tn;const An=class An extends D{constructor(t){super();u(this,"nodes",[]);u(this,"createdAt");u(this,"movedAt");u(this,"removedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new An().fromBinary(t,r)}static fromJson(t,r){return new An().fromJson(t,r)}static fromJsonString(t,r){return new An().fromJsonString(t,r)}static equals(t,r){return f.util.equals(An,t,r)}};u(An,"runtime",f),u(An,"typeName","yorkie.v1.JSONElement.JSONArray"),u(An,"fields",f.util.newFieldList(()=>[{no:1,name:"nodes",kind:"message",T:fl,repeated:!0},{no:2,name:"created_at",kind:"message",T:b},{no:3,name:"moved_at",kind:"message",T:b},{no:4,name:"removed_at",kind:"message",T:b}]));let ol=An;const In=class In extends D{constructor(t){super();u(this,"type",0);u(this,"value",new Uint8Array(0));u(this,"createdAt");u(this,"movedAt");u(this,"removedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new In().fromBinary(t,r)}static fromJson(t,r){return new In().fromJson(t,r)}static fromJsonString(t,r){return new In().fromJsonString(t,r)}static equals(t,r){return f.util.equals(In,t,r)}};u(In,"runtime",f),u(In,"typeName","yorkie.v1.JSONElement.Primitive"),u(In,"fields",f.util.newFieldList(()=>[{no:1,name:"type",kind:"enum",T:f.getEnumType($)},{no:2,name:"value",kind:"scalar",T:12},{no:3,name:"created_at",kind:"message",T:b},{no:4,name:"moved_at",kind:"message",T:b},{no:5,name:"removed_at",kind:"message",T:b}]));let al=In;const En=class En extends D{constructor(t){super();u(this,"nodes",[]);u(this,"createdAt");u(this,"movedAt");u(this,"removedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new En().fromBinary(t,r)}static fromJson(t,r){return new En().fromJson(t,r)}static fromJsonString(t,r){return new En().fromJsonString(t,r)}static equals(t,r){return f.util.equals(En,t,r)}};u(En,"runtime",f),u(En,"typeName","yorkie.v1.JSONElement.Text"),u(En,"fields",f.util.newFieldList(()=>[{no:1,name:"nodes",kind:"message",T:dl,repeated:!0},{no:2,name:"created_at",kind:"message",T:b},{no:3,name:"moved_at",kind:"message",T:b},{no:4,name:"removed_at",kind:"message",T:b}]));let ll=En;const xn=class xn extends D{constructor(t){super();u(this,"type",0);u(this,"value",new Uint8Array(0));u(this,"createdAt");u(this,"movedAt");u(this,"removedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new xn().fromBinary(t,r)}static fromJson(t,r){return new xn().fromJson(t,r)}static fromJsonString(t,r){return new xn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(xn,t,r)}};u(xn,"runtime",f),u(xn,"typeName","yorkie.v1.JSONElement.Counter"),u(xn,"fields",f.util.newFieldList(()=>[{no:1,name:"type",kind:"enum",T:f.getEnumType($)},{no:2,name:"value",kind:"scalar",T:12},{no:3,name:"created_at",kind:"message",T:b},{no:4,name:"moved_at",kind:"message",T:b},{no:5,name:"removed_at",kind:"message",T:b}]));let ul=xn;const Cn=class Cn extends D{constructor(t){super();u(this,"nodes",[]);u(this,"createdAt");u(this,"movedAt");u(this,"removedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new Cn().fromBinary(t,r)}static fromJson(t,r){return new Cn().fromJson(t,r)}static fromJsonString(t,r){return new Cn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Cn,t,r)}};u(Cn,"runtime",f),u(Cn,"typeName","yorkie.v1.JSONElement.Tree"),u(Cn,"fields",f.util.newFieldList(()=>[{no:1,name:"nodes",kind:"message",T:po,repeated:!0},{no:2,name:"created_at",kind:"message",T:b},{no:3,name:"moved_at",kind:"message",T:b},{no:4,name:"removed_at",kind:"message",T:b}]));let cl=Cn;var mt;let Xp=(mt=class extends D{constructor(t){super();u(this,"key","");u(this,"element");f.util.initPartial(t,this)}static fromBinary(t,r){return new mt().fromBinary(t,r)}static fromJson(t,r){return new mt().fromJson(t,r)}static fromJsonString(t,r){return new mt().fromJsonString(t,r)}static equals(t,r){return f.util.equals(mt,t,r)}},u(mt,"runtime",f),u(mt,"typeName","yorkie.v1.RHTNode"),u(mt,"fields",f.util.newFieldList(()=>[{no:1,name:"key",kind:"scalar",T:9},{no:2,name:"element",kind:"message",T:_e}])),mt);const jt=class jt extends D{constructor(t){super();u(this,"next");u(this,"element");f.util.initPartial(t,this)}static fromBinary(t,r){return new jt().fromBinary(t,r)}static fromJson(t,r){return new jt().fromJson(t,r)}static fromJsonString(t,r){return new jt().fromJsonString(t,r)}static equals(t,r){return f.util.equals(jt,t,r)}};u(jt,"runtime",f),u(jt,"typeName","yorkie.v1.RGANode"),u(jt,"fields",f.util.newFieldList(()=>[{no:1,name:"next",kind:"message",T:jt},{no:2,name:"element",kind:"message",T:_e}]));let fl=jt;const Nn=class Nn extends D{constructor(t){super();u(this,"value","");u(this,"updatedAt");u(this,"isRemoved",!1);f.util.initPartial(t,this)}static fromBinary(t,r){return new Nn().fromBinary(t,r)}static fromJson(t,r){return new Nn().fromJson(t,r)}static fromJsonString(t,r){return new Nn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Nn,t,r)}};u(Nn,"runtime",f),u(Nn,"typeName","yorkie.v1.NodeAttr"),u(Nn,"fields",f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:9},{no:2,name:"updated_at",kind:"message",T:b},{no:3,name:"is_removed",kind:"scalar",T:8}]));let fs=Nn;const Pn=class Pn extends D{constructor(t){super();u(this,"id");u(this,"value","");u(this,"removedAt");u(this,"insPrevId");u(this,"attributes",{});f.util.initPartial(t,this)}static fromBinary(t,r){return new Pn().fromBinary(t,r)}static fromJson(t,r){return new Pn().fromJson(t,r)}static fromJsonString(t,r){return new Pn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Pn,t,r)}};u(Pn,"runtime",f),u(Pn,"typeName","yorkie.v1.TextNode"),u(Pn,"fields",f.util.newFieldList(()=>[{no:1,name:"id",kind:"message",T:mo},{no:2,name:"value",kind:"scalar",T:9},{no:3,name:"removed_at",kind:"message",T:b},{no:4,name:"ins_prev_id",kind:"message",T:mo},{no:5,name:"attributes",kind:"map",K:9,V:{kind:"message",T:fs}}]));let dl=Pn;const Dn=class Dn extends D{constructor(t){super();u(this,"createdAt");u(this,"offset",0);f.util.initPartial(t,this)}static fromBinary(t,r){return new Dn().fromBinary(t,r)}static fromJson(t,r){return new Dn().fromJson(t,r)}static fromJsonString(t,r){return new Dn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Dn,t,r)}};u(Dn,"runtime",f),u(Dn,"typeName","yorkie.v1.TextNodeID"),u(Dn,"fields",f.util.newFieldList(()=>[{no:1,name:"created_at",kind:"message",T:b},{no:2,name:"offset",kind:"scalar",T:5}]));let mo=Dn;const On=class On extends D{constructor(t){super();u(this,"id");u(this,"type","");u(this,"value","");u(this,"removedAt");u(this,"insPrevId");u(this,"insNextId");u(this,"depth",0);u(this,"attributes",{});f.util.initPartial(t,this)}static fromBinary(t,r){return new On().fromBinary(t,r)}static fromJson(t,r){return new On().fromJson(t,r)}static fromJsonString(t,r){return new On().fromJsonString(t,r)}static equals(t,r){return f.util.equals(On,t,r)}};u(On,"runtime",f),u(On,"typeName","yorkie.v1.TreeNode"),u(On,"fields",f.util.newFieldList(()=>[{no:1,name:"id",kind:"message",T:Kr},{no:2,name:"type",kind:"scalar",T:9},{no:3,name:"value",kind:"scalar",T:9},{no:4,name:"removed_at",kind:"message",T:b},{no:5,name:"ins_prev_id",kind:"message",T:Kr},{no:6,name:"ins_next_id",kind:"message",T:Kr},{no:7,name:"depth",kind:"scalar",T:5},{no:8,name:"attributes",kind:"map",K:9,V:{kind:"message",T:fs}}]));let po=On;const Rn=class Rn extends D{constructor(t){super();u(this,"content",[]);f.util.initPartial(t,this)}static fromBinary(t,r){return new Rn().fromBinary(t,r)}static fromJson(t,r){return new Rn().fromJson(t,r)}static fromJsonString(t,r){return new Rn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Rn,t,r)}};u(Rn,"runtime",f),u(Rn,"typeName","yorkie.v1.TreeNodes"),u(Rn,"fields",f.util.newFieldList(()=>[{no:1,name:"content",kind:"message",T:po,repeated:!0}]));let hl=Rn;const Ln=class Ln extends D{constructor(t){super();u(this,"createdAt");u(this,"offset",0);f.util.initPartial(t,this)}static fromBinary(t,r){return new Ln().fromBinary(t,r)}static fromJson(t,r){return new Ln().fromJson(t,r)}static fromJsonString(t,r){return new Ln().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Ln,t,r)}};u(Ln,"runtime",f),u(Ln,"typeName","yorkie.v1.TreeNodeID"),u(Ln,"fields",f.util.newFieldList(()=>[{no:1,name:"created_at",kind:"message",T:b},{no:2,name:"offset",kind:"scalar",T:5}]));let Kr=Ln;const Bn=class Bn extends D{constructor(t){super();u(this,"parentId");u(this,"leftSiblingId");f.util.initPartial(t,this)}static fromBinary(t,r){return new Bn().fromBinary(t,r)}static fromJson(t,r){return new Bn().fromJson(t,r)}static fromJsonString(t,r){return new Bn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Bn,t,r)}};u(Bn,"runtime",f),u(Bn,"typeName","yorkie.v1.TreePos"),u(Bn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_id",kind:"message",T:Kr},{no:2,name:"left_sibling_id",kind:"message",T:Kr}]));let Ai=Bn;const bn=class bn extends D{constructor(t){super();u(this,"id","");u(this,"username","");u(this,"createdAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new bn().fromBinary(t,r)}static fromJson(t,r){return new bn().fromJson(t,r)}static fromJsonString(t,r){return new bn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(bn,t,r)}};u(bn,"runtime",f),u(bn,"typeName","yorkie.v1.User"),u(bn,"fields",f.util.newFieldList(()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"username",kind:"scalar",T:9},{no:3,name:"created_at",kind:"message",T:De}]));let _h=bn;const Fn=class Fn extends D{constructor(t){super();u(this,"id","");u(this,"name","");u(this,"publicKey","");u(this,"secretKey","");u(this,"authWebhookUrl","");u(this,"authWebhookMethods",[]);u(this,"clientDeactivateThreshold","");u(this,"createdAt");u(this,"updatedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new Fn().fromBinary(t,r)}static fromJson(t,r){return new Fn().fromJson(t,r)}static fromJsonString(t,r){return new Fn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Fn,t,r)}};u(Fn,"runtime",f),u(Fn,"typeName","yorkie.v1.Project"),u(Fn,"fields",f.util.newFieldList(()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"public_key",kind:"scalar",T:9},{no:4,name:"secret_key",kind:"scalar",T:9},{no:5,name:"auth_webhook_url",kind:"scalar",T:9},{no:6,name:"auth_webhook_methods",kind:"scalar",T:9,repeated:!0},{no:7,name:"client_deactivate_threshold",kind:"scalar",T:9},{no:8,name:"created_at",kind:"message",T:De},{no:9,name:"updated_at",kind:"message",T:De}]));let Gh=Fn;const Mn=class Mn extends D{constructor(t){super();u(this,"name");u(this,"authWebhookUrl");u(this,"authWebhookMethods");u(this,"clientDeactivateThreshold");f.util.initPartial(t,this)}static fromBinary(t,r){return new Mn().fromBinary(t,r)}static fromJson(t,r){return new Mn().fromJson(t,r)}static fromJsonString(t,r){return new Mn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Mn,t,r)}};u(Mn,"runtime",f),u(Mn,"typeName","yorkie.v1.UpdatableProjectFields"),u(Mn,"fields",f.util.newFieldList(()=>[{no:1,name:"name",kind:"message",T:Xe},{no:2,name:"auth_webhook_url",kind:"message",T:Xe},{no:3,name:"auth_webhook_methods",kind:"message",T:Ec},{no:4,name:"client_deactivate_threshold",kind:"message",T:Xe}]));let Yh=Mn;const Jn=class Jn extends D{constructor(t){super();u(this,"methods",[]);f.util.initPartial(t,this)}static fromBinary(t,r){return new Jn().fromBinary(t,r)}static fromJson(t,r){return new Jn().fromJson(t,r)}static fromJsonString(t,r){return new Jn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Jn,t,r)}};u(Jn,"runtime",f),u(Jn,"typeName","yorkie.v1.UpdatableProjectFields.AuthWebhookMethods"),u(Jn,"fields",f.util.newFieldList(()=>[{no:1,name:"methods",kind:"scalar",T:9,repeated:!0}]));let Ec=Jn;const $n=class $n extends D{constructor(t){super();u(this,"id","");u(this,"key","");u(this,"snapshot","");u(this,"createdAt");u(this,"accessedAt");u(this,"updatedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new $n().fromBinary(t,r)}static fromJson(t,r){return new $n().fromJson(t,r)}static fromJsonString(t,r){return new $n().fromJsonString(t,r)}static equals(t,r){return f.util.equals($n,t,r)}};u($n,"runtime",f),u($n,"typeName","yorkie.v1.DocumentSummary"),u($n,"fields",f.util.newFieldList(()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"key",kind:"scalar",T:9},{no:3,name:"snapshot",kind:"scalar",T:9},{no:4,name:"created_at",kind:"message",T:De},{no:5,name:"accessed_at",kind:"message",T:De},{no:6,name:"updated_at",kind:"message",T:De}]));let Qh=$n;const zn=class zn extends D{constructor(t){super();u(this,"type",0);u(this,"presence");f.util.initPartial(t,this)}static fromBinary(t,r){return new zn().fromBinary(t,r)}static fromJson(t,r){return new zn().fromJson(t,r)}static fromJsonString(t,r){return new zn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(zn,t,r)}};u(zn,"runtime",f),u(zn,"typeName","yorkie.v1.PresenceChange"),u(zn,"fields",f.util.newFieldList(()=>[{no:1,name:"type",kind:"enum",T:f.getEnumType(Ii)},{no:2,name:"presence",kind:"message",T:_f}]));let yo=zn;var Ii=(n=>(n[n.UNSPECIFIED=0]="UNSPECIFIED",n[n.PUT=1]="PUT",n[n.DELETE=2]="DELETE",n[n.CLEAR=3]="CLEAR",n))(Ii||{});f.util.setEnumType(Ii,"yorkie.v1.PresenceChange.ChangeType",[{no:0,name:"CHANGE_TYPE_UNSPECIFIED"},{no:1,name:"CHANGE_TYPE_PUT"},{no:2,name:"CHANGE_TYPE_DELETE"},{no:3,name:"CHANGE_TYPE_CLEAR"}]);var pt;let _f=(pt=class extends D{constructor(t){super();u(this,"data",{});f.util.initPartial(t,this)}static fromBinary(t,r){return new pt().fromBinary(t,r)}static fromJson(t,r){return new pt().fromJson(t,r)}static fromJsonString(t,r){return new pt().fromJsonString(t,r)}static equals(t,r){return f.util.equals(pt,t,r)}},u(pt,"runtime",f),u(pt,"typeName","yorkie.v1.Presence"),u(pt,"fields",f.util.newFieldList(()=>[{no:1,name:"data",kind:"map",K:9,V:{kind:"scalar",T:9}}])),pt);var yt;let Zp=(yt=class extends D{constructor(t){super();u(this,"serverSeq",te.zero);u(this,"clientSeq",0);f.util.initPartial(t,this)}static fromBinary(t,r){return new yt().fromBinary(t,r)}static fromJson(t,r){return new yt().fromJson(t,r)}static fromJsonString(t,r){return new yt().fromJsonString(t,r)}static equals(t,r){return f.util.equals(yt,t,r)}},u(yt,"runtime",f),u(yt,"typeName","yorkie.v1.Checkpoint"),u(yt,"fields",f.util.newFieldList(()=>[{no:1,name:"server_seq",kind:"scalar",T:3},{no:2,name:"client_seq",kind:"scalar",T:13}])),yt);const Un=class Un extends D{constructor(t){super();u(this,"createdAt");u(this,"offset",0);u(this,"relativeOffset",0);f.util.initPartial(t,this)}static fromBinary(t,r){return new Un().fromBinary(t,r)}static fromJson(t,r){return new Un().fromJson(t,r)}static fromJsonString(t,r){return new Un().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Un,t,r)}};u(Un,"runtime",f),u(Un,"typeName","yorkie.v1.TextNodePos"),u(Un,"fields",f.util.newFieldList(()=>[{no:1,name:"created_at",kind:"message",T:b},{no:2,name:"offset",kind:"scalar",T:5},{no:3,name:"relative_offset",kind:"scalar",T:5}]));let Tr=Un;var vt;let b=(vt=class extends D{constructor(t){super();u(this,"lamport",te.zero);u(this,"delimiter",0);u(this,"actorId",new Uint8Array(0));f.util.initPartial(t,this)}static fromBinary(t,r){return new vt().fromBinary(t,r)}static fromJson(t,r){return new vt().fromJson(t,r)}static fromJsonString(t,r){return new vt().fromJsonString(t,r)}static equals(t,r){return f.util.equals(vt,t,r)}},u(vt,"runtime",f),u(vt,"typeName","yorkie.v1.TimeTicket"),u(vt,"fields",f.util.newFieldList(()=>[{no:1,name:"lamport",kind:"scalar",T:3},{no:2,name:"delimiter",kind:"scalar",T:13},{no:3,name:"actor_id",kind:"scalar",T:12}])),vt);const Vn=class Vn extends D{constructor(t){super();u(this,"topic","");u(this,"payload",new Uint8Array(0));f.util.initPartial(t,this)}static fromBinary(t,r){return new Vn().fromBinary(t,r)}static fromJson(t,r){return new Vn().fromJson(t,r)}static fromJsonString(t,r){return new Vn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Vn,t,r)}};u(Vn,"runtime",f),u(Vn,"typeName","yorkie.v1.DocEventBody"),u(Vn,"fields",f.util.newFieldList(()=>[{no:1,name:"topic",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:12}]));let xc=Vn;const jn=class jn extends D{constructor(t){super();u(this,"type",0);u(this,"publisher","");u(this,"body");f.util.initPartial(t,this)}static fromBinary(t,r){return new jn().fromBinary(t,r)}static fromJson(t,r){return new jn().fromJson(t,r)}static fromJsonString(t,r){return new jn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(jn,t,r)}};u(jn,"runtime",f),u(jn,"typeName","yorkie.v1.DocEvent"),u(jn,"fields",f.util.newFieldList(()=>[{no:1,name:"type",kind:"enum",T:f.getEnumType(yi)},{no:2,name:"publisher",kind:"scalar",T:9},{no:3,name:"body",kind:"message",T:xc}]));let Cc=jn;const qn=class qn extends D{constructor(t){super();u(this,"clientKey","");f.util.initPartial(t,this)}static fromBinary(t,r){return new qn().fromBinary(t,r)}static fromJson(t,r){return new qn().fromJson(t,r)}static fromJsonString(t,r){return new qn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(qn,t,r)}};u(qn,"runtime",f),u(qn,"typeName","yorkie.v1.ActivateClientRequest"),u(qn,"fields",f.util.newFieldList(()=>[{no:1,name:"client_key",kind:"scalar",T:9}]));let Nc=qn;const Kn=class Kn extends D{constructor(t){super();u(this,"clientId","");f.util.initPartial(t,this)}static fromBinary(t,r){return new Kn().fromBinary(t,r)}static fromJson(t,r){return new Kn().fromJson(t,r)}static fromJsonString(t,r){return new Kn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Kn,t,r)}};u(Kn,"runtime",f),u(Kn,"typeName","yorkie.v1.ActivateClientResponse"),u(Kn,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9}]));let Pc=Kn;const Wn=class Wn extends D{constructor(t){super();u(this,"clientId","");f.util.initPartial(t,this)}static fromBinary(t,r){return new Wn().fromBinary(t,r)}static fromJson(t,r){return new Wn().fromJson(t,r)}static fromJsonString(t,r){return new Wn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Wn,t,r)}};u(Wn,"runtime",f),u(Wn,"typeName","yorkie.v1.DeactivateClientRequest"),u(Wn,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9}]));let Dc=Wn;const Hn=class Hn extends D{constructor(e){super(),f.util.initPartial(e,this)}static fromBinary(e,t){return new Hn().fromBinary(e,t)}static fromJson(e,t){return new Hn().fromJson(e,t)}static fromJsonString(e,t){return new Hn().fromJsonString(e,t)}static equals(e,t){return f.util.equals(Hn,e,t)}};u(Hn,"runtime",f),u(Hn,"typeName","yorkie.v1.DeactivateClientResponse"),u(Hn,"fields",f.util.newFieldList(()=>[]));let Oc=Hn;const _n=class _n extends D{constructor(t){super();u(this,"clientId","");u(this,"changePack");f.util.initPartial(t,this)}static fromBinary(t,r){return new _n().fromBinary(t,r)}static fromJson(t,r){return new _n().fromJson(t,r)}static fromJsonString(t,r){return new _n().fromJsonString(t,r)}static equals(t,r){return f.util.equals(_n,t,r)}};u(_n,"runtime",f),u(_n,"typeName","yorkie.v1.AttachDocumentRequest"),u(_n,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"change_pack",kind:"message",T:Er}]));let Rc=_n;const Gn=class Gn extends D{constructor(t){super();u(this,"documentId","");u(this,"changePack");f.util.initPartial(t,this)}static fromBinary(t,r){return new Gn().fromBinary(t,r)}static fromJson(t,r){return new Gn().fromJson(t,r)}static fromJsonString(t,r){return new Gn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Gn,t,r)}};u(Gn,"runtime",f),u(Gn,"typeName","yorkie.v1.AttachDocumentResponse"),u(Gn,"fields",f.util.newFieldList(()=>[{no:1,name:"document_id",kind:"scalar",T:9},{no:2,name:"change_pack",kind:"message",T:Er}]));let Lc=Gn;const Yn=class Yn extends D{constructor(t){super();u(this,"clientId","");u(this,"documentId","");u(this,"changePack");u(this,"removeIfNotAttached",!1);f.util.initPartial(t,this)}static fromBinary(t,r){return new Yn().fromBinary(t,r)}static fromJson(t,r){return new Yn().fromJson(t,r)}static fromJsonString(t,r){return new Yn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Yn,t,r)}};u(Yn,"runtime",f),u(Yn,"typeName","yorkie.v1.DetachDocumentRequest"),u(Yn,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:Er},{no:4,name:"remove_if_not_attached",kind:"scalar",T:8}]));let Bc=Yn;const Qn=class Qn extends D{constructor(t){super();u(this,"changePack");f.util.initPartial(t,this)}static fromBinary(t,r){return new Qn().fromBinary(t,r)}static fromJson(t,r){return new Qn().fromJson(t,r)}static fromJsonString(t,r){return new Qn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Qn,t,r)}};u(Qn,"runtime",f),u(Qn,"typeName","yorkie.v1.DetachDocumentResponse"),u(Qn,"fields",f.util.newFieldList(()=>[{no:2,name:"change_pack",kind:"message",T:Er}]));let bc=Qn;const Xn=class Xn extends D{constructor(t){super();u(this,"clientId","");u(this,"documentId","");f.util.initPartial(t,this)}static fromBinary(t,r){return new Xn().fromBinary(t,r)}static fromJson(t,r){return new Xn().fromJson(t,r)}static fromJsonString(t,r){return new Xn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Xn,t,r)}};u(Xn,"runtime",f),u(Xn,"typeName","yorkie.v1.WatchDocumentRequest"),u(Xn,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9}]));let Fc=Xn;const Zn=class Zn extends D{constructor(t){super();u(this,"body",{case:void 0});f.util.initPartial(t,this)}static fromBinary(t,r){return new Zn().fromBinary(t,r)}static fromJson(t,r){return new Zn().fromJson(t,r)}static fromJsonString(t,r){return new Zn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Zn,t,r)}};u(Zn,"runtime",f),u(Zn,"typeName","yorkie.v1.WatchDocumentResponse"),u(Zn,"fields",f.util.newFieldList(()=>[{no:1,name:"initialization",kind:"message",T:Jc,oneof:"body"},{no:2,name:"event",kind:"message",T:Cc,oneof:"body"}]));let Mc=Zn;const er=class er extends D{constructor(t){super();u(this,"clientIds",[]);f.util.initPartial(t,this)}static fromBinary(t,r){return new er().fromBinary(t,r)}static fromJson(t,r){return new er().fromJson(t,r)}static fromJsonString(t,r){return new er().fromJsonString(t,r)}static equals(t,r){return f.util.equals(er,t,r)}};u(er,"runtime",f),u(er,"typeName","yorkie.v1.WatchDocumentResponse.Initialization"),u(er,"fields",f.util.newFieldList(()=>[{no:1,name:"client_ids",kind:"scalar",T:9,repeated:!0}]));let Jc=er;const tr=class tr extends D{constructor(t){super();u(this,"clientId","");u(this,"documentId","");u(this,"changePack");f.util.initPartial(t,this)}static fromBinary(t,r){return new tr().fromBinary(t,r)}static fromJson(t,r){return new tr().fromJson(t,r)}static fromJsonString(t,r){return new tr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(tr,t,r)}};u(tr,"runtime",f),u(tr,"typeName","yorkie.v1.RemoveDocumentRequest"),u(tr,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:Er}]));let $c=tr;const nr=class nr extends D{constructor(t){super();u(this,"changePack");f.util.initPartial(t,this)}static fromBinary(t,r){return new nr().fromBinary(t,r)}static fromJson(t,r){return new nr().fromJson(t,r)}static fromJsonString(t,r){return new nr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(nr,t,r)}};u(nr,"runtime",f),u(nr,"typeName","yorkie.v1.RemoveDocumentResponse"),u(nr,"fields",f.util.newFieldList(()=>[{no:1,name:"change_pack",kind:"message",T:Er}]));let zc=nr;const rr=class rr extends D{constructor(t){super();u(this,"clientId","");u(this,"documentId","");u(this,"changePack");u(this,"pushOnly",!1);f.util.initPartial(t,this)}static fromBinary(t,r){return new rr().fromBinary(t,r)}static fromJson(t,r){return new rr().fromJson(t,r)}static fromJsonString(t,r){return new rr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(rr,t,r)}};u(rr,"runtime",f),u(rr,"typeName","yorkie.v1.PushPullChangesRequest"),u(rr,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:Er},{no:4,name:"push_only",kind:"scalar",T:8}]));let Uc=rr;const ir=class ir extends D{constructor(t){super();u(this,"changePack");f.util.initPartial(t,this)}static fromBinary(t,r){return new ir().fromBinary(t,r)}static fromJson(t,r){return new ir().fromJson(t,r)}static fromJsonString(t,r){return new ir().fromJsonString(t,r)}static equals(t,r){return f.util.equals(ir,t,r)}};u(ir,"runtime",f),u(ir,"typeName","yorkie.v1.PushPullChangesResponse"),u(ir,"fields",f.util.newFieldList(()=>[{no:1,name:"change_pack",kind:"message",T:Er}]));let Vc=ir;const sr=class sr extends D{constructor(t){super();u(this,"clientId","");u(this,"documentId","");u(this,"topic","");u(this,"payload",new Uint8Array(0));f.util.initPartial(t,this)}static fromBinary(t,r){return new sr().fromBinary(t,r)}static fromJson(t,r){return new sr().fromJson(t,r)}static fromJsonString(t,r){return new sr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(sr,t,r)}};u(sr,"runtime",f),u(sr,"typeName","yorkie.v1.BroadcastRequest"),u(sr,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"topic",kind:"scalar",T:9},{no:4,name:"payload",kind:"scalar",T:12}]));let jc=sr;const or=class or extends D{constructor(e){super(),f.util.initPartial(e,this)}static fromBinary(e,t){return new or().fromBinary(e,t)}static fromJson(e,t){return new or().fromJson(e,t)}static fromJsonString(e,t){return new or().fromJsonString(e,t)}static equals(e,t){return f.util.equals(or,e,t)}};u(or,"runtime",f),u(or,"typeName","yorkie.v1.BroadcastResponse"),u(or,"fields",f.util.newFieldList(()=>[]));let qc=or;const D1={typeName:"yorkie.v1.YorkieService",methods:{activateClient:{name:"ActivateClient",I:Nc,O:Pc,kind:Be.Unary},deactivateClient:{name:"DeactivateClient",I:Dc,O:Oc,kind:Be.Unary},attachDocument:{name:"AttachDocument",I:Rc,O:Lc,kind:Be.Unary},detachDocument:{name:"DetachDocument",I:Bc,O:bc,kind:Be.Unary},removeDocument:{name:"RemoveDocument",I:$c,O:zc,kind:Be.Unary},pushPullChanges:{name:"PushPullChanges",I:Uc,O:Vc,kind:Be.Unary},watchDocument:{name:"WatchDocument",I:Fc,O:Mc,kind:Be.ServerStreaming},broadcast:{name:"Broadcast",I:jc,O:qc,kind:Be.Unary}}},O1=f.makeMessageType("google.rpc.ErrorInfo",()=>[{no:1,name:"reason",kind:"scalar",T:9},{no:2,name:"domain",kind:"scalar",T:9},{no:3,name:"metadata",kind:"map",K:9,V:{kind:"scalar",T:9}}]);f.makeMessageType("google.rpc.RetryInfo",()=>[{no:1,name:"retry_delay",kind:"message",T:dr}]);f.makeMessageType("google.rpc.DebugInfo",()=>[{no:1,name:"stack_entries",kind:"scalar",T:9,repeated:!0},{no:2,name:"detail",kind:"scalar",T:9}]);f.makeMessageType("google.rpc.QuotaFailure",()=>[{no:1,name:"violations",kind:"message",T:R1,repeated:!0}]);const R1=f.makeMessageType("google.rpc.QuotaFailure.Violation",()=>[{no:1,name:"subject",kind:"scalar",T:9},{no:2,name:"description",kind:"scalar",T:9}],{localName:"QuotaFailure_Violation"});f.makeMessageType("google.rpc.PreconditionFailure",()=>[{no:1,name:"violations",kind:"message",T:L1,repeated:!0}]);const L1=f.makeMessageType("google.rpc.PreconditionFailure.Violation",()=>[{no:1,name:"type",kind:"scalar",T:9},{no:2,name:"subject",kind:"scalar",T:9},{no:3,name:"description",kind:"scalar",T:9}],{localName:"PreconditionFailure_Violation"});f.makeMessageType("google.rpc.BadRequest",()=>[{no:1,name:"field_violations",kind:"message",T:B1,repeated:!0}]);const B1=f.makeMessageType("google.rpc.BadRequest.FieldViolation",()=>[{no:1,name:"field",kind:"scalar",T:9},{no:2,name:"description",kind:"scalar",T:9}],{localName:"BadRequest_FieldViolation"});f.makeMessageType("google.rpc.RequestInfo",()=>[{no:1,name:"request_id",kind:"scalar",T:9},{no:2,name:"serving_data",kind:"scalar",T:9}]);f.makeMessageType("google.rpc.ResourceInfo",()=>[{no:1,name:"resource_type",kind:"scalar",T:9},{no:2,name:"resource_name",kind:"scalar",T:9},{no:3,name:"owner",kind:"scalar",T:9},{no:4,name:"description",kind:"scalar",T:9}]);f.makeMessageType("google.rpc.Help",()=>[{no:1,name:"links",kind:"message",T:b1,repeated:!0}]);const b1=f.makeMessageType("google.rpc.Help.Link",()=>[{no:1,name:"description",kind:"scalar",T:9},{no:2,name:"url",kind:"scalar",T:9}],{localName:"Help_Link"});f.makeMessageType("google.rpc.LocalizedMessage",()=>[{no:1,name:"locale",kind:"scalar",T:9},{no:2,name:"message",kind:"scalar",T:9}]);var S=(n=>(n.Ok="ok",n.ErrClientNotActivated="ErrClientNotActivated",n.ErrClientNotFound="ErrClientNotFound",n.ErrUnimplemented="ErrUnimplemented",n.ErrInvalidType="ErrInvalidType",n.ErrDummy="ErrDummy",n.ErrDocumentNotAttached="ErrDocumentNotAttached",n.ErrDocumentNotDetached="ErrDocumentNotDetached",n.ErrDocumentRemoved="ErrDocumentRemoved",n.ErrInvalidObjectKey="ErrInvalidObjectKey",n.ErrInvalidArgument="ErrInvalidArgument",n.ErrNotInitialized="ErrNotInitialized",n.ErrNotReady="ErrNotReady",n.ErrRefused="ErrRefused",n.ErrContextNotProvided="ErrContextNotProvided",n))(S||{});class k extends Error{constructor(t,r){super(r);u(this,"name","YorkieError");u(this,"stack");this.code=t,this.message=r,this.toString=()=>`[code=${this.code}]: ${this.message}`}}function Pt(n){if(n instanceof Map){const e=Array.from(n);return new Map(JSON.parse(JSON.stringify(e)))}return JSON.parse(JSON.stringify(n))}const ey=n=>n?Object.entries(n).length===0:!0,ds=n=>{const e={};for(const[t,r]of Object.entries(n))e[t]=JSON.stringify(r);return e},Zi=n=>{const e={};for(const[t,r]of Object.entries(n))e[t]=JSON.parse(r);return e};var Qr=(n=>(n.Put="put",n.Clear="clear",n))(Qr||{});class ku{constructor(e,t){u(this,"context");u(this,"presence");this.context=e,this.presence=t}set(e,t){for(const r of Object.keys(e))this.presence[r]=e[r];this.context.setPresenceChange({type:"put",presence:Pt(this.presence)}),this.context.setReversePresence(e,t)}get(e){return this.presence[e]}clear(){this.presence={},this.context.setPresenceChange({type:"clear"})}}const Gf="000000000000000000000000",F1="FFFFFFFFFFFFFFFFFFFFFFFF";class tt{constructor(e,t,r){u(this,"lamport");u(this,"delimiter");u(this,"actorID");this.lamport=e,this.delimiter=t,this.actorID=r}static of(e,t,r){return new tt(e,t,r)}static fromStruct(e){return tt.of(BigInt(e.lamport),e.delimiter,e.actorID)}toIDString(){return`${this.lamport.toString()}:${this.actorID}:${this.delimiter}`}toStruct(){return{lamport:this.getLamportAsString(),delimiter:this.getDelimiter(),actorID:this.getActorID()}}toTestString(){return`${this.lamport.toString()}:${this.actorID.slice(-2)}:${this.delimiter}`}setActor(e){return new tt(this.lamport,this.delimiter,e)}getLamportAsString(){return this.lamport.toString()}getLamport(){return this.lamport}getDelimiter(){return this.delimiter}getActorID(){return this.actorID}after(e){return this.compare(e)>0}equals(e){return this.compare(e)===0}compare(e){if(this.lamport>e.lamport)return 1;if(e.lamport>this.lamport)return-1;const t=this.actorID.localeCompare(e.actorID);return t!==0?t:this.delimiter>e.delimiter?1:e.delimiter>this.delimiter?-1:0}}const ty=0,M1=4294967295,J1=9223372036854775807n,Ft=new tt(0n,ty,Gf),Hs=new tt(J1,M1,F1);function tn(n){return n.replace(/["'\\\n\r\f\b\t\u2028\u2029]/g,function(e){switch(e){case'"':case"\\":return"\\"+e;case`
`:return"\\n";case"\r":return"\\r";case"\f":return"\\f";case"\b":return"\\b";case"	":return"\\t";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:return e}})}class Po{constructor(e){u(this,"createdAt");u(this,"movedAt");u(this,"removedAt");this.createdAt=e}getCreatedAt(){return this.createdAt}getID(){return this.createdAt}getMovedAt(){return this.movedAt}getRemovedAt(){return this.removedAt}getPositionedAt(){return this.movedAt?this.movedAt:this.createdAt}setMovedAt(e){return!this.movedAt||e&&e.after(this.movedAt)?(this.movedAt=e,!0):!1}setRemovedAt(e){this.removedAt=e}remove(e){return e&&e.after(this.getPositionedAt())&&(!this.removedAt||e.after(this.removedAt))?(this.removedAt=e,!0):!1}isRemoved(){return!!this.removedAt}}class Wr extends Po{constructor(e){super(e)}}class Yf{constructor(e,t){u(this,"strKey");u(this,"value");this.strKey=e,this.value=t}static of(e,t){return new Yf(e,t)}isRemoved(){return this.value.isRemoved()}getStrKey(){return this.strKey}getValue(){return this.value}remove(e){return this.value.remove(e)}}class vo{constructor(){u(this,"nodeMapByKey");u(this,"nodeMapByCreatedAt");this.nodeMapByKey=new Map,this.nodeMapByCreatedAt=new Map}static create(){return new vo}set(e,t,r){let i;const s=this.nodeMapByKey.get(e);s!=null&&!s.isRemoved()&&s.remove(r)&&(i=s.getValue());const o=Yf.of(e,t);return this.nodeMapByCreatedAt.set(t.getCreatedAt().toIDString(),o),(s==null||r.after(s.getValue().getPositionedAt()))&&(this.nodeMapByKey.set(e,o),t.setMovedAt(r)),i}delete(e,t){if(!this.nodeMapByCreatedAt.has(e.toIDString()))throw new k(S.ErrInvalidArgument,`fail to find ${e.toIDString()}`);const r=this.nodeMapByCreatedAt.get(e.toIDString());return r.remove(t),r.getValue()}subPathOf(e){const t=this.nodeMapByCreatedAt.get(e.toIDString());if(t)return t.getStrKey()}purge(e){const t=this.nodeMapByCreatedAt.get(e.getCreatedAt().toIDString());if(!t)throw new k(S.ErrInvalidArgument,`fail to find ${e.getCreatedAt().toIDString()}`);const r=this.nodeMapByKey.get(t.getStrKey());t===r&&this.nodeMapByKey.delete(r.getStrKey()),this.nodeMapByCreatedAt.delete(t.getValue().getCreatedAt().toIDString())}deleteByKey(e,t){const r=this.nodeMapByKey.get(e);if(r!=null&&r.remove(t))return r.getValue()}has(e){const t=this.nodeMapByKey.get(e);return t==null?!1:!t.isRemoved()}getByID(e){return this.nodeMapByCreatedAt.get(e.toIDString())}get(e){const t=this.nodeMapByKey.get(e);if(!(!t||t.isRemoved()))return t}*[Symbol.iterator](){for(const[,e]of this.nodeMapByKey)yield e}}class He extends Wr{constructor(t,r){super(t);u(this,"memberNodes");this.memberNodes=r}static create(t,r){if(!r)return new He(t,vo.create());const i=vo.create();for(const[s,o]of Object.entries(r))i.set(s,o.deepcopy(),o.getCreatedAt());return new He(t,i)}subPathOf(t){return this.memberNodes.subPathOf(t)}purge(t){this.memberNodes.purge(t)}set(t,r,i){return this.memberNodes.set(t,r,i)}delete(t,r){return this.memberNodes.delete(t,r)}deleteByKey(t,r){return this.memberNodes.deleteByKey(t,r)}get(t){const r=this.memberNodes.get(t);return r==null?void 0:r.getValue()}getByID(t){const r=this.memberNodes.getByID(t);return r==null?void 0:r.getValue()}has(t){return this.memberNodes.has(t)}toJSON(){const t=[];for(const[r,i]of this)t.push(`"${tn(r)}":${i.toJSON()}`);return`{${t.join(",")}}`}toJS(){return JSON.parse(this.toJSON())}toJSForTest(){const t={};for(const[r,i]of this){const{createdAt:s,value:o,type:a}=i.toJSForTest();t[r]={key:r,createdAt:s,value:o,type:a}}return{createdAt:this.getCreatedAt().toTestString(),value:t,type:"YORKIE_OBJECT"}}getKeys(){const t=Array();for(const[r]of this)t.push(r);return t}toSortedJSON(){var i;const t=Array();for(const[s]of this)t.push(s);const r=[];for(const s of t.sort()){const o=(i=this.memberNodes.get(s))==null?void 0:i.getValue();r.push(`"${tn(s)}":${o.toSortedJSON()}`)}return`{${r.join(",")}}`}getRHT(){return this.memberNodes}deepcopy(){const t=He.create(this.getCreatedAt());for(const r of this.memberNodes)t.memberNodes.set(r.getStrKey(),r.getValue().deepcopy(),this.getPositionedAt());return t.remove(this.getRemovedAt()),t}getDescendants(t){for(const r of this.memberNodes){const i=r.getValue();if(t(i,this))return;i instanceof Wr&&i.getDescendants(t)}}*[Symbol.iterator](){const t=new Set;for(const r of this.memberNodes)t.has(r.getStrKey())||(t.add(r.getStrKey()),r.isRemoved()||(yield[r.getStrKey(),r.getValue()]))}}var Y=(n=>(n.Local="local",n.Remote="remote",n.UndoRedo="undoredo",n))(Y||{});class $t{constructor(e,t){u(this,"parentCreatedAt");u(this,"executedAt");this.parentCreatedAt=e,this.executedAt=t}getParentCreatedAt(){return this.parentCreatedAt}getExecutedAt(){if(!this.executedAt)throw new k(S.ErrNotReady,"executedAt is not set yet");return this.executedAt}setActor(e){this.executedAt&&(this.executedAt=this.executedAt.setActor(e))}setExecutedAt(e){this.executedAt=e}}class ny{constructor(e){u(this,"value");u(this,"left");u(this,"right");u(this,"parent");u(this,"weight");this.value=e,this.initWeight()}getNodeString(){return`${this.weight}${this.value}`}getValue(){return this.value}getLeftWeight(){return this.hasLeft()?this.left.getWeight():0}getRightWeight(){return this.hasRight()?this.right.getWeight():0}getWeight(){return this.weight}getLeft(){return this.left}getRight(){return this.right}getParent(){return this.parent}hasLeft(){return!!this.left}hasRight(){return!!this.right}hasParent(){return!!this.parent}setLeft(e){this.left=e}setRight(e){this.right=e}setParent(e){this.parent=e}unlink(){this.parent=void 0,this.right=void 0,this.left=void 0}hasLinks(){return this.hasParent()||this.hasLeft()||this.hasRight()}increaseWeight(e){this.weight+=e}initWeight(){this.weight=this.getLength()}}class wo{constructor(e){u(this,"root");this.root=e}get length(){return this.root?this.root.getWeight():0}find(e){if(!this.root||e<0)return[void 0,0];let t=this.root;for(;;)if(t.hasLeft()&&e<=t.getLeftWeight())t=t.getLeft();else if(t.hasRight()&&t.getLeftWeight()+t.getLength()<e)e-=t.getLeftWeight()+t.getLength(),t=t.getRight();else{e-=t.getLeftWeight();break}if(e>t.getLength())throw new k(S.ErrInvalidArgument,`out of index range: pos: ${e} > node.length: ${t.getLength()}`);return this.splayNode(t),[t,e]}indexOf(e){return!e||e!==this.root&&!e.hasLinks()?-1:(this.splayNode(e),this.root.getLeftWeight())}getRoot(){return this.root}insert(e){return this.insertAfter(this.root,e)}insertAfter(e,t){return e?(this.splayNode(e),this.root=t,t.setRight(e.getRight()),e.hasRight()&&e.getRight().setParent(t),t.setLeft(e),e.setParent(t),e.setRight(),this.updateWeight(e),this.updateWeight(t),t):(this.root=t,t)}updateWeight(e){e.initWeight(),e.hasLeft()&&e.increaseWeight(e.getLeftWeight()),e.hasRight()&&e.increaseWeight(e.getRightWeight())}updateTreeWeight(e){for(;e;)this.updateWeight(e),e=e.getParent()}splayNode(e){if(e)for(;;)if(this.isLeftChild(e.getParent())&&this.isRightChild(e))this.rotateLeft(e),this.rotateRight(e);else if(this.isRightChild(e.getParent())&&this.isLeftChild(e))this.rotateRight(e),this.rotateLeft(e);else if(this.isLeftChild(e.getParent())&&this.isLeftChild(e))this.rotateRight(e.getParent()),this.rotateRight(e);else if(this.isRightChild(e.getParent())&&this.isRightChild(e))this.rotateLeft(e.getParent()),this.rotateLeft(e);else{this.isLeftChild(e)?this.rotateRight(e):this.isRightChild(e)&&this.rotateLeft(e),this.updateWeight(e);return}}delete(e){this.splayNode(e);const t=new wo(e.getLeft());t.root&&t.root.setParent();const r=new wo(e.getRight());if(r.root&&r.root.setParent(),t.root){const i=t.getRightmost();t.splayNode(i),t.root.setRight(r.root),r.root&&r.root.setParent(t.root),this.root=t.root}else this.root=r.root;e.unlink(),this.root&&this.updateWeight(this.root)}deleteRange(e,t){if(!t){this.splayNode(e),this.cutOffRight(e);return}this.splayNode(e),this.splayNode(t),t.getLeft()!=e&&this.rotateRight(e),this.cutOffRight(e)}cutOffRight(e){const t=[];this.traversePostorder(e.getRight(),t);for(const r of t)r.initWeight();this.updateTreeWeight(e)}toTestString(){const e=[];return this.traverseInorder(this.root,e),e.map(t=>`[${t.getWeight()},${t.getLength()}]${t.getValue()||""}`).join("")}checkWeight(){const e=[];this.traverseInorder(this.root,e);for(const t of e)if(t.getWeight()!=t.getLength()+t.getLeftWeight()+t.getRightWeight())return!1;return!0}getRightmost(){let e=this.root;for(;e.hasRight();)e=e.getRight();return e}traverseInorder(e,t){e&&(this.traverseInorder(e.getLeft(),t),t.push(e),this.traverseInorder(e.getRight(),t))}traversePostorder(e,t){e&&(this.traversePostorder(e.getLeft(),t),this.traversePostorder(e.getRight(),t),t.push(e))}rotateLeft(e){const t=e.getParent();t.hasParent()?t===t.getParent().getLeft()?t.getParent().setLeft(e):t.getParent().setRight(e):this.root=e,e.setParent(t.getParent()),t.setRight(e.getLeft()),t.hasRight()&&t.getRight().setParent(t),e.setLeft(t),e.getLeft().setParent(e),this.updateWeight(t),this.updateWeight(e)}rotateRight(e){const t=e.getParent();t.hasParent()?t===t.getParent().getLeft()?t.getParent().setLeft(e):t.getParent().setRight(e):this.root=e,e.setParent(t.getParent()),t.setLeft(e.getRight()),t.hasLeft()&&t.getLeft().setParent(t),e.setRight(t),e.getRight().setParent(e),this.updateWeight(t),this.updateWeight(e)}isLeftChild(e){return e&&e.hasParent()?e.getParent().getLeft()===e:!1}isRightChild(e){return e&&e.hasParent()?e.getParent().getRight()===e:!1}}/**
 * @license
 * Copyright 2009 The Closure Library Authors
 * Copyright 2020 Daniel Wirtz / The long.js Authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * SPDX-License-Identifier: Apache-2.0
 */var St=null;try{St=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function q(n,e,t){this.low=n|0,this.high=e|0,this.unsigned=!!t}q.prototype.__isLong__;Object.defineProperty(q.prototype,"__isLong__",{value:!0});function Re(n){return(n&&n.__isLong__)===!0}function Xh(n){var e=Math.clz32(n&-n);return n?31-e:e}q.isLong=Re;var Zh={},eg={};function Ni(n,e){var t,r,i;return e?(n>>>=0,(i=0<=n&&n<256)&&(r=eg[n],r)?r:(t=W(n,0,!0),i&&(eg[n]=t),t)):(n|=0,(i=-128<=n&&n<128)&&(r=Zh[n],r)?r:(t=W(n,n<0?-1:0,!1),i&&(Zh[n]=t),t))}q.fromInt=Ni;function kt(n,e){if(isNaN(n))return e?gr:Rt;if(e){if(n<0)return gr;if(n>=ry)return oy}else{if(n<=-ng)return je;if(n+1>=ng)return sy}return n<0?kt(-n,e).neg():W(n%hs|0,n/hs|0,e)}q.fromNumber=kt;function W(n,e,t){return new q(n,e,t)}q.fromBits=W;var gl=Math.pow;function Qf(n,e,t){if(n.length===0)throw Error("empty string");if(typeof e=="number"?(t=e,e=!1):e=!!e,n==="NaN"||n==="Infinity"||n==="+Infinity"||n==="-Infinity")return e?gr:Rt;if(t=t||10,t<2||36<t)throw RangeError("radix");var r;if((r=n.indexOf("-"))>0)throw Error("interior hyphen");if(r===0)return Qf(n.substring(1),e,t).neg();for(var i=kt(gl(t,8)),s=Rt,o=0;o<n.length;o+=8){var a=Math.min(8,n.length-o),l=parseInt(n.substring(o,o+a),t);if(a<8){var c=kt(gl(t,a));s=s.mul(c).add(kt(l))}else s=s.mul(i),s=s.add(kt(l))}return s.unsigned=e,s}q.fromString=Qf;function zt(n,e){return typeof n=="number"?kt(n,e):typeof n=="string"?Qf(n,e):W(n.low,n.high,typeof e=="boolean"?e:n.unsigned)}q.fromValue=zt;var tg=65536,$1=1<<24,hs=tg*tg,ry=hs*hs,ng=ry/2,rg=Ni($1),Rt=Ni(0);q.ZERO=Rt;var gr=Ni(0,!0);q.UZERO=gr;var Ki=Ni(1);q.ONE=Ki;var iy=Ni(1,!0);q.UONE=iy;var Kc=Ni(-1);q.NEG_ONE=Kc;var sy=W(-1,2147483647,!1);q.MAX_VALUE=sy;var oy=W(-1,-1,!0);q.MAX_UNSIGNED_VALUE=oy;var je=W(0,-2147483648,!1);q.MIN_VALUE=je;var C=q.prototype;C.toInt=function(){return this.unsigned?this.low>>>0:this.low};C.toNumber=function(){return this.unsigned?(this.high>>>0)*hs+(this.low>>>0):this.high*hs+(this.low>>>0)};C.toString=function(e){if(e=e||10,e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(je)){var t=kt(e),r=this.div(t),i=r.mul(t).sub(this);return r.toString(e)+i.toInt().toString(e)}else return"-"+this.neg().toString(e);for(var s=kt(gl(e,6),this.unsigned),o=this,a="";;){var l=o.div(s),c=o.sub(l.mul(s)).toInt()>>>0,d=c.toString(e);if(o=l,o.isZero())return d+a;for(;d.length<6;)d="0"+d;a=""+d+a}};C.getHighBits=function(){return this.high};C.getHighBitsUnsigned=function(){return this.high>>>0};C.getLowBits=function(){return this.low};C.getLowBitsUnsigned=function(){return this.low>>>0};C.getNumBitsAbs=function(){if(this.isNegative())return this.eq(je)?64:this.neg().getNumBitsAbs();for(var e=this.high!=0?this.high:this.low,t=31;t>0&&!(e&1<<t);t--);return this.high!=0?t+33:t+1};C.isZero=function(){return this.high===0&&this.low===0};C.eqz=C.isZero;C.isNegative=function(){return!this.unsigned&&this.high<0};C.isPositive=function(){return this.unsigned||this.high>=0};C.isOdd=function(){return(this.low&1)===1};C.isEven=function(){return(this.low&1)===0};C.equals=function(e){return Re(e)||(e=zt(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low};C.eq=C.equals;C.notEquals=function(e){return!this.eq(e)};C.neq=C.notEquals;C.ne=C.notEquals;C.lessThan=function(e){return this.comp(e)<0};C.lt=C.lessThan;C.lessThanOrEqual=function(e){return this.comp(e)<=0};C.lte=C.lessThanOrEqual;C.le=C.lessThanOrEqual;C.greaterThan=function(e){return this.comp(e)>0};C.gt=C.greaterThan;C.greaterThanOrEqual=function(e){return this.comp(e)>=0};C.gte=C.greaterThanOrEqual;C.ge=C.greaterThanOrEqual;C.compare=function(e){if(Re(e)||(e=zt(e)),this.eq(e))return 0;var t=this.isNegative(),r=e.isNegative();return t&&!r?-1:!t&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1};C.comp=C.compare;C.negate=function(){return!this.unsigned&&this.eq(je)?je:this.not().add(Ki)};C.neg=C.negate;C.add=function(e){Re(e)||(e=zt(e));var t=this.high>>>16,r=this.high&65535,i=this.low>>>16,s=this.low&65535,o=e.high>>>16,a=e.high&65535,l=e.low>>>16,c=e.low&65535,d=0,h=0,p=0,m=0;return m+=s+c,p+=m>>>16,m&=65535,p+=i+l,h+=p>>>16,p&=65535,h+=r+a,d+=h>>>16,h&=65535,d+=t+o,d&=65535,W(p<<16|m,d<<16|h,this.unsigned)};C.subtract=function(e){return Re(e)||(e=zt(e)),this.add(e.neg())};C.sub=C.subtract;C.multiply=function(e){if(this.isZero())return this;if(Re(e)||(e=zt(e)),St){var t=St.mul(this.low,this.high,e.low,e.high);return W(t,St.get_high(),this.unsigned)}if(e.isZero())return this.unsigned?gr:Rt;if(this.eq(je))return e.isOdd()?je:Rt;if(e.eq(je))return this.isOdd()?je:Rt;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(rg)&&e.lt(rg))return kt(this.toNumber()*e.toNumber(),this.unsigned);var r=this.high>>>16,i=this.high&65535,s=this.low>>>16,o=this.low&65535,a=e.high>>>16,l=e.high&65535,c=e.low>>>16,d=e.low&65535,h=0,p=0,m=0,w=0;return w+=o*d,m+=w>>>16,w&=65535,m+=s*d,p+=m>>>16,m&=65535,m+=o*c,p+=m>>>16,m&=65535,p+=i*d,h+=p>>>16,p&=65535,p+=s*c,h+=p>>>16,p&=65535,p+=o*l,h+=p>>>16,p&=65535,h+=r*d+i*c+s*l+o*a,h&=65535,W(m<<16|w,h<<16|p,this.unsigned)};C.mul=C.multiply;C.divide=function(e){if(Re(e)||(e=zt(e)),e.isZero())throw Error("division by zero");if(St){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;var t=(this.unsigned?St.div_u:St.div_s)(this.low,this.high,e.low,e.high);return W(t,St.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?gr:Rt;var r,i,s;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return gr;if(e.gt(this.shru(1)))return iy;s=gr}else{if(this.eq(je)){if(e.eq(Ki)||e.eq(Kc))return je;if(e.eq(je))return Ki;var o=this.shr(1);return r=o.div(e).shl(1),r.eq(Rt)?e.isNegative()?Ki:Kc:(i=this.sub(e.mul(r)),s=r.add(i.div(e)),s)}else if(e.eq(je))return this.unsigned?gr:Rt;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();s=Rt}for(i=this;i.gte(e);){r=Math.max(1,Math.floor(i.toNumber()/e.toNumber()));for(var a=Math.ceil(Math.log(r)/Math.LN2),l=a<=48?1:gl(2,a-48),c=kt(r),d=c.mul(e);d.isNegative()||d.gt(i);)r-=l,c=kt(r,this.unsigned),d=c.mul(e);c.isZero()&&(c=Ki),s=s.add(c),i=i.sub(d)}return s};C.div=C.divide;C.modulo=function(e){if(Re(e)||(e=zt(e)),St){var t=(this.unsigned?St.rem_u:St.rem_s)(this.low,this.high,e.low,e.high);return W(t,St.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))};C.mod=C.modulo;C.rem=C.modulo;C.not=function(){return W(~this.low,~this.high,this.unsigned)};C.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32};C.clz=C.countLeadingZeros;C.countTrailingZeros=function(){return this.low?Xh(this.low):Xh(this.high)+32};C.ctz=C.countTrailingZeros;C.and=function(e){return Re(e)||(e=zt(e)),W(this.low&e.low,this.high&e.high,this.unsigned)};C.or=function(e){return Re(e)||(e=zt(e)),W(this.low|e.low,this.high|e.high,this.unsigned)};C.xor=function(e){return Re(e)||(e=zt(e)),W(this.low^e.low,this.high^e.high,this.unsigned)};C.shiftLeft=function(e){return Re(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?W(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):W(0,this.low<<e-32,this.unsigned)};C.shl=C.shiftLeft;C.shiftRight=function(e){return Re(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?W(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):W(this.high>>e-32,this.high>=0?0:-1,this.unsigned)};C.shr=C.shiftRight;C.shiftRightUnsigned=function(e){return Re(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?W(this.low>>>e|this.high<<32-e,this.high>>>e,this.unsigned):e===32?W(this.high,0,this.unsigned):W(this.high>>>e-32,0,this.unsigned)};C.shru=C.shiftRightUnsigned;C.shr_u=C.shiftRightUnsigned;C.rotateLeft=function(e){var t;return Re(e)&&(e=e.toInt()),(e&=63)===0?this:e===32?W(this.high,this.low,this.unsigned):e<32?(t=32-e,W(this.low<<e|this.high>>>t,this.high<<e|this.low>>>t,this.unsigned)):(e-=32,t=32-e,W(this.high<<e|this.low>>>t,this.low<<e|this.high>>>t,this.unsigned))};C.rotl=C.rotateLeft;C.rotateRight=function(e){var t;return Re(e)&&(e=e.toInt()),(e&=63)===0?this:e===32?W(this.high,this.low,this.unsigned):e<32?(t=32-e,W(this.high<<t|this.low>>>e,this.low<<t|this.high>>>e,this.unsigned)):(e-=32,t=32-e,W(this.low<<t|this.high>>>e,this.high<<t|this.low>>>e,this.unsigned))};C.rotr=C.rotateRight;C.toSigned=function(){return this.unsigned?W(this.low,this.high,!1):this};C.toUnsigned=function(){return this.unsigned?this:W(this.low,this.high,!0)};C.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()};C.toBytesLE=function(){var e=this.high,t=this.low;return[t&255,t>>>8&255,t>>>16&255,t>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]};C.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,t>>>24,t>>>16&255,t>>>8&255,t&255]};q.fromBytes=function(e,t,r){return r?q.fromBytesLE(e,t):q.fromBytesBE(e,t)};q.fromBytesLE=function(e,t){return new q(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)};q.fromBytesBE=function(e,t){return new q(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)};var ve=(n=>(n[n.Null=0]="Null",n[n.Boolean=1]="Boolean",n[n.Integer=2]="Integer",n[n.Long=3]="Long",n[n.Double=4]="Double",n[n.String=5]="String",n[n.Bytes=6]="Bytes",n[n.Date=7]="Date",n))(ve||{});class re extends Po{constructor(t,r){super(r);u(this,"valueType");u(this,"value");this.valueType=re.getPrimitiveType(t),this.value=t===void 0?null:t}static of(t,r){return new re(t,r)}static valueFromBytes(t,r){switch(t){case 0:return null;case 1:return!!r[0];case 2:return r[0]|r[1]<<8|r[2]<<16|r[3]<<24;case 4:{const i=new DataView(r.buffer);return r.forEach(function(s,o){i.setUint8(o,s)}),i.getFloat64(0,!0)}case 5:return new TextDecoder("utf-8").decode(r);case 3:return q.fromBytesLE(Array.from(r));case 6:return r;case 7:return new Date(q.fromBytesLE(Array.from(r),!0).toNumber());default:throw new k(S.ErrUnimplemented,`unimplemented type: ${t}`)}}toJSON(){return this.valueType===5?`"${tn(this.value)}"`:`${this.value}`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:this.value,type:"YORKIE_PRIMITIVE"}}deepcopy(){const t=re.of(this.value,this.getCreatedAt());return t.setMovedAt(this.getMovedAt()),t.setRemovedAt(this.getRemovedAt()),t}getType(){return this.valueType}static getPrimitiveType(t){switch(typeof t){case"undefined":return 0;case"boolean":return 1;case"number":return this.isInteger(t)?2:4;case"string":return 5;case"object":if(t===null)return 0;if(t instanceof q)return 3;if(t instanceof Uint8Array)return 6;if(t instanceof Date)return 7}}static isSupport(t){return re.getPrimitiveType(t)!==void 0}static isInteger(t){return t%1===0}isNumericType(){const t=this.valueType;return t===2||t===3||t===4}getValue(){return this.value}toBytes(){switch(this.valueType){case 0:return new Uint8Array;case 1:return this.value?new Uint8Array([1]):new Uint8Array([0]);case 2:{const t=this.value;return new Uint8Array([t&255,t>>8&255,t>>16&255,t>>24&255])}case 4:{const t=this.value,r=new Uint8Array(8);return new DataView(r.buffer).setFloat64(0,t,!0),r}case 5:return new TextEncoder().encode(this.value);case 3:{const r=this.value.toBytesLE();return Uint8Array.from(r)}case 6:return this.value;case 7:{const t=this.value,r=q.fromNumber(t.getTime(),!0).toBytesLE();return Uint8Array.from(r)}default:throw new k(S.ErrUnimplemented,`unimplemented type: ${this.valueType}`)}}}class ml extends ny{constructor(t){super(t);u(this,"prev");u(this,"next");this.value=t}static createAfter(t,r){const i=new ml(r),s=t.next;return t.next=i,i.prev=t,i.next=s,s&&(s.prev=i),i}remove(t){return this.value.remove(t)}getCreatedAt(){return this.value.getCreatedAt()}getPositionedAt(){return this.value.getPositionedAt()}release(){this.prev&&(this.prev.next=this.next),this.next&&(this.next.prev=this.prev),this.prev=void 0,this.next=void 0}getLength(){return this.value.isRemoved()?0:1}getPrev(){return this.prev}getNext(){return this.next}getValue(){return this.value}isRemoved(){return this.value.isRemoved()}}class So{constructor(){u(this,"dummyHead");u(this,"last");u(this,"nodeMapByIndex");u(this,"nodeMapByCreatedAt");const e=re.of(0,Ft);e.setRemovedAt(Ft),this.dummyHead=new ml(e),this.last=this.dummyHead,this.nodeMapByIndex=new wo,this.nodeMapByCreatedAt=new Map,this.nodeMapByIndex.insert(this.dummyHead),this.nodeMapByCreatedAt.set(this.dummyHead.getCreatedAt().toIDString(),this.dummyHead)}static create(){return new So}get length(){return this.nodeMapByIndex.length}findNextBeforeExecutedAt(e,t){let r=this.nodeMapByCreatedAt.get(e.toIDString());if(!r)throw new k(S.ErrInvalidArgument,`cant find the given node: ${e.toIDString()}`);for(;r.getNext()&&r.getNext().getPositionedAt().after(t);)r=r.getNext();return r}release(e){this.last===e&&(this.last=e.getPrev()),e.release(),this.nodeMapByIndex.delete(e),this.nodeMapByCreatedAt.delete(e.getValue().getCreatedAt().toIDString())}insertAfter(e,t,r=t.getCreatedAt()){const i=this.findNextBeforeExecutedAt(e,r),s=ml.createAfter(i,t);i===this.last&&(this.last=s),this.nodeMapByIndex.insertAfter(i,s),this.nodeMapByCreatedAt.set(s.getCreatedAt().toIDString(),s)}moveAfter(e,t,r){const i=this.nodeMapByCreatedAt.get(e.toIDString());if(!i)throw new k(S.ErrInvalidArgument,`cant find the given node: ${e.toIDString()}`);const s=this.nodeMapByCreatedAt.get(t.toIDString());if(!s)throw new k(S.ErrInvalidArgument,`cant find the given node: ${t.toIDString()}`);i!==s&&(!s.getValue().getMovedAt()||r.after(s.getValue().getMovedAt()))&&(this.release(s),this.insertAfter(i.getCreatedAt(),s.getValue(),r),s.getValue().setMovedAt(r))}insert(e){this.insertAfter(this.last.getCreatedAt(),e)}getByID(e){return this.nodeMapByCreatedAt.get(e.toIDString())}subPathOf(e){const t=this.nodeMapByCreatedAt.get(e.toIDString());if(t)return String(this.nodeMapByIndex.indexOf(t))}purge(e){const t=this.nodeMapByCreatedAt.get(e.getCreatedAt().toIDString());if(!t)throw new k(S.ErrInvalidArgument,`fail to find the given createdAt: ${e.getCreatedAt().toIDString()}`);this.release(t)}getByIndex(e){if(e>=this.length)return;const[t,r]=this.nodeMapByIndex.find(e);let i=t;if(e===0&&t===this.dummyHead||r>0)do i&&(i=i.getNext());while(i&&i.isRemoved());return i}getPrevCreatedAt(e){let t=this.nodeMapByCreatedAt.get(e.toIDString());do t=t.getPrev();while(this.dummyHead!==t&&t.isRemoved());return t.getValue().getCreatedAt()}delete(e,t){const r=this.nodeMapByCreatedAt.get(e.toIDString()),i=r.isRemoved();return r.remove(t)&&!i&&this.nodeMapByIndex.splayNode(r),r.getValue()}deleteByIndex(e,t){const r=this.getByIndex(e);if(r)return r.remove(t)&&this.nodeMapByIndex.splayNode(r),r.getValue()}getHead(){return this.dummyHead.getValue()}getLast(){return this.last.getValue()}getLastCreatedAt(){return this.last.getCreatedAt()}toTestString(){const e=[];for(const t of this){const r=`${t.getCreatedAt().toIDString()}:${t.getValue().toJSON()}`;t.isRemoved()?e.push(`{${r}}`):e.push(`[${r}]`)}return e.join("")}*[Symbol.iterator](){let e=this.dummyHead.getNext();for(;e;)yield e,e=e.getNext()}}class nt extends Wr{constructor(t,r){super(t);u(this,"elements");this.elements=r}static create(t,r){if(!r)return new nt(t,So.create());const i=So.create();for(const s of r)i.insertAfter(i.getLastCreatedAt(),s.deepcopy());return new nt(t,i)}subPathOf(t){return this.elements.subPathOf(t)}purge(t){this.elements.purge(t)}insertAfter(t,r){this.elements.insertAfter(t,r)}moveAfter(t,r,i){this.elements.moveAfter(t,r,i)}get(t){const r=this.elements.getByIndex(t);return r==null?void 0:r.getValue()}getByID(t){const r=this.elements.getByID(t);return r==null?void 0:r.getValue()}getHead(){return this.elements.getHead()}getLast(){return this.elements.getLast()}getPrevCreatedAt(t){return this.elements.getPrevCreatedAt(t)}delete(t,r){return this.elements.delete(t,r)}deleteByIndex(t,r){return this.elements.deleteByIndex(t,r)}getLastCreatedAt(){return this.elements.getLastCreatedAt()}get length(){return this.elements.length}*[Symbol.iterator](){for(const t of this.elements)t.isRemoved()||(yield t.getValue())}toTestString(){return this.elements.toTestString()}getDescendants(t){for(const r of this.elements){const i=r.getValue();if(t(i,this))return;i instanceof Wr&&i.getDescendants(t)}}toJSON(){const t=[];for(const r of this)t.push(r.toJSON());return`[${t.join(",")}]`}toJS(){return JSON.parse(this.toJSON())}toJSForTest(){const t={};for(let r=0;r<this.length;r++){const{createdAt:i,value:s,type:o}=this.get(r).toJSForTest();t[r]={key:String(r),createdAt:i,value:s,type:o}}return{createdAt:this.getCreatedAt().toTestString(),value:t,type:"YORKIE_ARRAY"}}toSortedJSON(){return this.toJSON()}getElements(){return this.elements}deepcopy(){const t=nt.create(this.getCreatedAt());for(const r of this.elements)t.elements.insertAfter(t.getLastCreatedAt(),r.getValue().deepcopy());return t.remove(this.getRemovedAt()),t}}class Xr extends $t{constructor(t,r,i){super(t,i);u(this,"createdAt");this.createdAt=r}static create(t,r,i){return new Xr(t,r,i)}execute(t,r){var c;const i=t.findByCreatedAt(this.getParentCreatedAt());if(!i)throw new k(S.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(i instanceof Wr))throw new k(S.ErrInvalidArgument,`only object and array can execute remove: ${i}`);if(r===Y.UndoRedo){let d=i.getByID(this.createdAt);for(;d;){if(d.getRemovedAt())return;d=(c=t.findElementPairByCreatedAt(d.getCreatedAt()))==null?void 0:c.parent}}const s=i.subPathOf(this.createdAt),o=this.toReverseOperation(i),a=i.delete(this.createdAt,this.getExecutedAt());return t.registerRemovedElement(a),{opInfos:i instanceof nt?[{type:"remove",path:t.createPath(this.getParentCreatedAt()),index:Number(s)}]:[{type:"remove",path:t.createPath(this.getParentCreatedAt()),key:s}],reverseOp:o}}toReverseOperation(t){if(t instanceof He){const r=t.subPathOf(this.createdAt);if(r!==void 0){const i=t.get(r);if(i!==void 0)return Ei.create(r,i.deepcopy(),this.getParentCreatedAt())}}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.REMOVE.${this.createdAt.toTestString()}`}getCreatedAt(){return this.createdAt}}class Ei extends $t{constructor(t,r,i,s){super(i,s);u(this,"key");u(this,"value");this.key=t,this.value=r}static create(t,r,i,s){return new Ei(t,r,i,s)}execute(t,r){var c;const i=t.findByCreatedAt(this.getParentCreatedAt());if(!i)throw new k(S.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(i instanceof He))throw new k(S.ErrInvalidArgument,"fail to execute, only object can execute set");if(r===Y.UndoRedo){let d=i;for(;d;){if(d.getRemovedAt())return;d=(c=t.findElementPairByCreatedAt(d.getCreatedAt()))==null?void 0:c.parent}}const s=i.get(this.key),o=this.toReverseOperation(s),a=this.value.deepcopy(),l=i.set(this.key,a,this.getExecutedAt());return r===Y.UndoRedo&&t.findByCreatedAt(a.getCreatedAt())&&t.deregisterElement(a),t.registerElement(a,i),l&&t.registerRemovedElement(l),{opInfos:[{type:"set",path:t.createPath(this.getParentCreatedAt()),key:this.key}],reverseOp:o}}toReverseOperation(t){let r=Xr.create(this.getParentCreatedAt(),this.value.getCreatedAt());return t!==void 0&&!t.isRemoved()&&(r=Ei.create(this.key,t.deepcopy(),this.getParentCreatedAt())),r}getEffectedCreatedAt(){return this.value.getCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.SET.${this.key}=${this.value.toSortedJSON()}`}getKey(){return this.key}getValue(){return this.value}}class Do extends $t{constructor(t,r,i,s){super(t,s);u(this,"prevCreatedAt");u(this,"value");this.prevCreatedAt=r,this.value=i}static create(t,r,i,s){return new Do(t,r,i,s)}execute(t){const r=t.findByCreatedAt(this.getParentCreatedAt());if(!r)throw new k(S.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(r instanceof nt))throw new k(S.ErrInvalidArgument,"fail to execute, only array can execute add");const i=r,s=this.value.deepcopy();return i.insertAfter(this.prevCreatedAt,s),t.registerElement(s,i),{opInfos:[{type:"add",path:t.createPath(this.getParentCreatedAt()),index:Number(i.subPathOf(this.getEffectedCreatedAt()))}]}}getEffectedCreatedAt(){return this.value.getCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.ADD.${this.value.toJSON()}`}getPrevCreatedAt(){return this.prevCreatedAt}getValue(){return this.value}}class Fr extends $t{constructor(t,r,i,s){super(t,s);u(this,"prevCreatedAt");u(this,"createdAt");this.prevCreatedAt=r,this.createdAt=i}static create(t,r,i,s){return new Fr(t,r,i,s)}execute(t){const r=t.findByCreatedAt(this.getParentCreatedAt());if(!r)throw new k(S.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(r instanceof nt))throw new k(S.ErrInvalidArgument,"fail to execute, only array can execute move");const i=r,s=Number(i.subPathOf(this.createdAt));i.moveAfter(this.prevCreatedAt,this.createdAt,this.getExecutedAt());const o=Number(i.subPathOf(this.createdAt));return{opInfos:[{type:"move",path:t.createPath(this.getParentCreatedAt()),index:o,previousIndex:s}]}}getEffectedCreatedAt(){return this.createdAt}toTestString(){return`${this.getParentCreatedAt().toTestString()}.MOVE`}getPrevCreatedAt(){return this.prevCreatedAt}getCreatedAt(){return this.createdAt}}class hi{constructor(e,t,r,i){u(this,"key");u(this,"value");u(this,"updatedAt");u(this,"_isRemoved");this.key=e,this.value=t,this.updatedAt=r,this._isRemoved=i}static of(e,t,r,i){return new hi(e,t,r,i)}getKey(){return this.key}getValue(){return this.value}getUpdatedAt(){return this.updatedAt}isRemoved(){return this._isRemoved}toIDString(){return`${this.updatedAt.toIDString()}:${this.key}`}getRemovedAt(){if(this._isRemoved)return this.updatedAt}}class Ar{constructor(){u(this,"nodeMapByKey");u(this,"numberOfRemovedElement");this.nodeMapByKey=new Map,this.numberOfRemovedElement=0}static create(){return new Ar}getNodeMapByKey(){return this.nodeMapByKey}set(e,t,r){const i=this.nodeMapByKey.get(e);if(i&&i.isRemoved()&&r.after(i.getUpdatedAt())&&(this.numberOfRemovedElement-=1),i===void 0||r.after(i.getUpdatedAt())){const s=hi.of(e,t,r,!1);return this.nodeMapByKey.set(e,s),i!==void 0&&i.isRemoved()?[i,s]:[void 0,s]}return i.isRemoved()?[i,void 0]:[void 0,void 0]}setInternal(e,t,r,i){const s=hi.of(e,t,r,i);this.nodeMapByKey.set(e,s),i&&this.numberOfRemovedElement++}remove(e,t){const r=this.nodeMapByKey.get(e),i=[];if(r===void 0||t.after(r.getUpdatedAt())){if(r===void 0){this.numberOfRemovedElement+=1;const a=hi.of(e,"",t,!0);return this.nodeMapByKey.set(e,a),i.push(a),i}const s=r.isRemoved();s||(this.numberOfRemovedElement+=1),s&&i.push(r);const o=hi.of(e,r.getValue(),t,!0);return this.nodeMapByKey.set(e,o),i.push(o),i}return i}has(e){if(this.nodeMapByKey.has(e)){const t=this.nodeMapByKey.get(e);return t!==void 0&&!t.isRemoved()}return!1}get(e){if(this.nodeMapByKey.has(e))return this.nodeMapByKey.get(e).getValue()}deepcopy(){const e=new Ar;for(const[,t]of this.nodeMapByKey)e.setInternal(t.getKey(),t.getValue(),t.getUpdatedAt(),t.isRemoved());return e}toJSON(){if(!this.size())return"{}";const e=[];for(const[t,r]of this.nodeMapByKey)r.isRemoved()||e.push(`"${tn(t)}":"${tn(r.getValue())}"`);return`{${e.join(",")}}`}size(){return this.nodeMapByKey.size-this.numberOfRemovedElement}toObject(){const e={};for(const[t,r]of this.nodeMapByKey)r.isRemoved()||(e[t]=r.getValue());return e}*[Symbol.iterator](){for(const[,e]of this.nodeMapByKey)yield e}purge(e){const t=this.nodeMapByKey.get(e.getKey());t==null||t.toIDString()!=e.toIDString()||(this.nodeMapByKey.delete(e.getKey()),this.numberOfRemovedElement--)}}class ko{constructor(e){u(this,"attributes");u(this,"content");this.attributes=Ar.create(),this.content=e}static create(e){return new ko(e)}get length(){return this.content.length}substring(e,t){const r=new ko(this.content.substring(e,t));return r.attributes=this.attributes.deepcopy(),r}setAttr(e,t,r){return this.attributes.set(e,t,r)}getAttrs(){return this.attributes}toString(){return this.content}toJSON(){const e=tn(this.content),t=this.attributes.toObject(),r=[];for(const[i,s]of Object.entries(t)){const o=JSON.parse(s),a=typeof o=="string"?`"${tn(i)}":"${tn(o)}"`:`"${tn(i)}":${String(o)}`;r.push(a)}return r.sort(),r.length===0?`{"val":"${e}"}`:`{"attrs":{${r.join(",")}},"val":"${e}"}`}getAttributes(){return this.attributes.toObject()}getContent(){return this.content}purge(e){this.attributes&&e instanceof hi&&this.attributes.purge(e)}getGCPairs(){const e=[];for(const t of this.attributes)t.getRemovedAt()&&e.push({parent:this,child:t});return e}}class Et extends Po{constructor(t,r){super(r);u(this,"rgaTreeSplit");this.rgaTreeSplit=t}static create(t,r){return new Et(t,r)}edit(t,r,i,s,o){const a=r?ko.create(r):void 0;if(a&&s)for(const[m,w]of Object.entries(s))a.setAttr(m,w,i);const[l,c,d,h]=this.rgaTreeSplit.edit(t,i,a,o),p=h.map(m=>({...m,value:m.value?{attributes:Zi(m.value.getAttributes()),content:m.value.getContent()}:{attributes:void 0,content:""},type:"content"}));return[c,p,d,[l,l]]}setStyle(t,r,i,s){const[,o]=this.rgaTreeSplit.findNodeWithSplit(t[1],i),[,a]=this.rgaTreeSplit.findNodeWithSplit(t[0],i),l=[],c=this.rgaTreeSplit.findBetween(a,o),d=new Map,h=[];for(const m of c){const w=m.getCreatedAt().getActorID(),I=s!=null&&s.size?s.has(w)?s.get(w):Ft:Hs;if(m.canStyle(i,I)){const O=d.get(w),y=m.getCreatedAt();(!O||y.after(O))&&d.set(w,y),h.push(m)}}const p=[];for(const m of h){if(m.isRemoved())continue;const[w,I]=this.rgaTreeSplit.findIndexesFromRange(m.createPosRange());l.push({type:"style",actor:i.getActorID(),from:w,to:I,value:{attributes:Zi(r)}});for(const[O,y]of Object.entries(r)){const[g]=m.getValue().setAttr(O,y,i);g!==void 0&&p.push({parent:m.getValue(),child:g})}}return[d,p,l]}indexRangeToPosRange(t,r){const i=this.rgaTreeSplit.indexToPos(t);return t===r?[i,i]:[i,this.rgaTreeSplit.indexToPos(r)]}get length(){return this.rgaTreeSplit.length}getTreeByIndex(){return this.rgaTreeSplit.getTreeByIndex()}getTreeByID(){return this.rgaTreeSplit.getTreeByID()}toJSON(){const t=[];for(const r of this.rgaTreeSplit)r.isRemoved()||t.push(r.getValue().toJSON());return`[${t.join(",")}]`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:JSON.parse(this.toJSON()),type:"YORKIE_TEXT"}}toString(){return this.rgaTreeSplit.toString()}values(){const t=[];for(const r of this.rgaTreeSplit)if(!r.isRemoved()){const i=r.getValue();t.push({attributes:Zi(i.getAttributes()),content:i.getContent()})}return t}getRGATreeSplit(){return this.rgaTreeSplit}toTestString(){return this.rgaTreeSplit.toTestString()}deepcopy(){const t=new Et(this.rgaTreeSplit.deepcopy(),this.getCreatedAt());return t.remove(this.getRemovedAt()),t}findIndexesFromRange(t){return this.rgaTreeSplit.findIndexesFromRange(t)}getGCPairs(){const t=[];for(const r of this.rgaTreeSplit){r.getRemovedAt()&&t.push({parent:this.rgaTreeSplit,child:r});for(const i of r.getValue().getGCPairs())t.push(i)}return t}}class Oo extends $t{constructor(t,r,i,s,o,a,l){super(t,l);u(this,"fromPos");u(this,"toPos");u(this,"maxCreatedAtMapByActor");u(this,"content");u(this,"attributes");this.fromPos=r,this.toPos=i,this.maxCreatedAtMapByActor=s,this.content=o,this.attributes=a}static create(t,r,i,s,o,a,l){return new Oo(t,r,i,s,o,a,l)}execute(t){const r=t.findByCreatedAt(this.getParentCreatedAt());if(!r)throw new k(S.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(r instanceof Et))throw new k(S.ErrInvalidArgument,"fail to execute, only Text can execute edit");const i=r,[,s,o]=i.edit([this.fromPos,this.toPos],this.content,this.getExecutedAt(),Object.fromEntries(this.attributes),this.maxCreatedAtMapByActor);for(const a of o)t.registerGCPair(a);return{opInfos:s.map(({from:a,to:l,value:c})=>({type:"edit",from:a,to:l,value:c,path:t.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const t=this.getParentCreatedAt().toTestString(),r=this.fromPos.toTestString(),i=this.toPos.toTestString(),s=this.content;return`${t}.EDIT(${r},${i},${s})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getContent(){return this.content}getAttributes(){return this.attributes||new Map}getMaxCreatedAtMapByActor(){return this.maxCreatedAtMapByActor}}class Ro extends $t{constructor(t,r,i,s,o,a){super(t,a);u(this,"fromPos");u(this,"toPos");u(this,"maxCreatedAtMapByActor");u(this,"attributes");this.fromPos=r,this.toPos=i,this.maxCreatedAtMapByActor=s,this.attributes=o}static create(t,r,i,s,o,a){return new Ro(t,r,i,s,o,a)}execute(t){const r=t.findByCreatedAt(this.getParentCreatedAt());if(!r)throw new k(S.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(r instanceof Et))throw new k(S.ErrInvalidArgument,"fail to execute, only Text can execute edit");const i=r,[,s,o]=i.setStyle([this.fromPos,this.toPos],this.attributes?Object.fromEntries(this.attributes):{},this.getExecutedAt(),this.maxCreatedAtMapByActor);for(const a of s)t.registerGCPair(a);return{opInfos:o.map(({from:a,to:l,value:c})=>({type:"style",from:a,to:l,value:c,path:t.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const t=this.getParentCreatedAt().toTestString(),r=this.fromPos.toTestString(),i=this.toPos.toTestString(),s=this.attributes;return`${t}.STYL(${r},${i},${JSON.stringify(s)})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getAttributes(){return this.attributes}getMaxCreatedAtMapByActor(){return this.maxCreatedAtMapByActor}}const z1=2,U1="root",pr="text";function Os(n,e){let t=0;const r=n.children;for(let i=0;i<e;i++){const s=r[i];!s||s.isRemoved||(t+=s.paddedSize)}return t}class V1{constructor(e,t=[]){u(this,"type");u(this,"parent");u(this,"_children");u(this,"size");if(this.type=e,this.size=0,this._children=t,this.isText&&this._children.length>0)throw new k(S.ErrRefused,"Text node cannot have children")}updateAncestorsSize(){let e=this.parent;const t=this.isRemoved?-1:1;for(;e&&(e.size+=this.paddedSize*t,!e.isRemoved);)e=e.parent}updateDescendantsSize(){let e=0;for(const t of this._children){const r=t.updateDescendantsSize();t.isRemoved||(e+=r)}return this.size+=e,this.paddedSize}get isText(){return this.type===pr}get paddedSize(){return this.size+(this.isText?0:z1)}isAncestorOf(e){return j1(this,e)}get nextSibling(){const e=this.parent.findOffset(this),t=this.parent.children[e+1];if(t)return t}get prevSibling(){const e=this.parent.findOffset(this),t=this.parent.children[e-1];if(t)return t}splitText(e,t){if(e===0||e===this.size)return;const r=this.value.slice(0,e),i=this.value.slice(e);if(!i.length)return;this.value=r;const s=this.cloneText(e+t);return s.value=i,this.parent.insertAfterInternal(s,this),s}get children(){return this._children.filter(e=>!e.isRemoved)}get allChildren(){return[...this._children]}hasTextChild(){return this.children.length>0&&this.children.every(e=>e.isText)}append(...e){if(this.isText)throw new k(S.ErrRefused,"Text node cannot have children");this._children.push(...e);for(const t of e)t.parent=this,t.updateAncestorsSize()}prepend(...e){if(this.isText)throw new k(S.ErrRefused,"Text node cannot have children");this._children.unshift(...e);for(const t of e)t.parent=this}insertBefore(e,t){if(this.isText)throw new k(S.ErrRefused,"Text node cannot have children");const r=this._children.indexOf(t);if(r===-1)throw new k(S.ErrInvalidArgument,"child not found");this.insertAtInternal(e,r),e.updateAncestorsSize()}insertAfter(e,t){if(this.isText)throw new k(S.ErrRefused,"Text node cannot have children");const r=this._children.indexOf(t);if(r===-1)throw new k(S.ErrInvalidArgument,"child not found");this.insertAtInternal(e,r+1),e.updateAncestorsSize()}insertAt(e,t){if(this.isText)throw new k(S.ErrRefused,"Text node cannot have children");this.insertAtInternal(e,t),e.updateAncestorsSize()}removeChild(e){if(this.isText)throw new k(S.ErrRefused,"Text node cannot have children");const t=this._children.indexOf(e);if(t===-1)throw new k(S.ErrInvalidArgument,"child not found");this._children.splice(t,1),e.parent=void 0}splitElement(e,t){const r=this.cloneElement(t);this.parent.insertAfterInternal(r,this),r.updateAncestorsSize();const i=this.children.slice(0,e),s=this.children.slice(e);this._children=i,r._children=s,this.size=this._children.reduce((o,a)=>o+a.paddedSize,0),r.size=r._children.reduce((o,a)=>o+a.paddedSize,0);for(const o of r._children)o.parent=r;return r}insertAfterInternal(e,t){if(this.isText)throw new k(S.ErrRefused,"Text node cannot have children");const r=this._children.indexOf(t);if(r===-1)throw new k(S.ErrInvalidArgument,"child not found");this.insertAtInternal(e,r+1)}insertAtInternal(e,t){if(this.isText)throw new k(S.ErrRefused,"Text node cannot have children");this._children.splice(t,0,e),e.parent=this}findOffset(e){if(this.isText)throw new k(S.ErrRefused,"Text node cannot have children");if(e.isRemoved){const t=this._children.indexOf(e);return this.allChildren.splice(0,t).filter(i=>!i.isRemoved).length}return this.children.indexOf(e)}findBranchOffset(e){if(this.isText)throw new k(S.ErrRefused,"Text node cannot have children");let t=e;for(;t;){const r=this._children.indexOf(t);if(r!==-1)return r;t=t.parent}return-1}}function j1(n,e){if(n===e)return!1;for(;e.parent;){if(e.parent===n)return!0;e=e.parent}return!1}var ge=(n=>(n.Start="Start",n.End="End",n.Text="Text",n))(ge||{});function ay(n,e,t,r){if(e>t)throw new k(S.ErrInvalidArgument,`from is greater than to: ${e} > ${t}`);if(e>n.size)throw new k(S.ErrInvalidArgument,`from is out of range: ${e} > ${n.size}`);if(t>n.size)throw new k(S.ErrInvalidArgument,`to is out of range: ${t} > ${n.size}`);if(e===t)return;let i=0;for(const s of n.children){if(e-s.paddedSize<i&&i<t){const o=s.isText?e-i:e-i-1,a=s.isText?t-i:t-i-1,l=!s.isText&&o<0,c=!s.isText&&a>s.size;(s.isText||l)&&r([s,s.isText?"Text":"Start"],c),ay(s,Math.max(0,o),Math.min(a,s.size),r),c&&r([s,"End"],c)}i+=s.paddedSize}}function ly(n,e,t=0){for(const r of n.children)ly(r,e,t+1);e(n,t)}function Ml(n,e,t=0){for(const r of n._children)Ml(r,e,t+1);e(n,t)}function Wc(n,e,t=!0){if(e>n.size)throw new k(S.ErrInvalidArgument,`index is out of range: ${e} > ${n.size}`);if(n.isText)return{node:n,offset:e};let r=0,i=0;for(const s of n.children){if(t&&s.isText&&s.size>=e-i)return Wc(s,e-i,t);if(e===i)return{node:n,offset:r};if(!t&&s.paddedSize===e-i)return{node:n,offset:r+1};if(s.paddedSize>e-i)return Wc(s,e-i-1,t);i+=s.paddedSize,r+=1}return{node:n,offset:r}}function uy(n){return n.isText||n.children.length===0?n:uy(n.children[0])}function q1(n,e){if(n.size<e)throw new k(S.ErrInvalidArgument,"unacceptable path");for(let t=0;t<n.children.length;t++){const r=n.children[t];if(r.size<e)e-=r.size;else{n=r;break}}return{node:n,offset:e}}class K1{constructor(e){u(this,"root");this.root=e}tokensBetween(e,t,r){ay(this.root,e,t,r)}traverse(e){ly(this.root,e,0)}traverseAll(e){Ml(this.root,e,0)}findTreePos(e,t=!0){return Wc(this.root,e,t)}treePosToPath(e){const t=[];let r=e.node;if(r.isText){const i=r.parent.findOffset(r);if(i===-1)throw new k(S.ErrInvalidArgument,"invalid treePos");const s=Os(r.parent,i);t.push(s+e.offset),r=r.parent}else if(r.hasTextChild()){const i=Os(r,e.offset);t.push(i)}else t.push(e.offset);for(;r.parent;){const i=r.parent.findOffset(r);if(i===-1)throw new k(S.ErrInvalidArgument,"invalid treePos");t.push(i),r=r.parent}return t.reverse()}pathToIndex(e){const t=this.pathToTreePos(e);return this.indexOf(t)}pathToTreePos(e){if(!e.length)throw new k(S.ErrInvalidArgument,"unacceptable path");let t=this.root;for(let r=0;r<e.length-1;r++){const i=e[r];if(t=t.children[i],!t)throw new k(S.ErrInvalidArgument,"unacceptable path")}if(t.hasTextChild())return q1(t,e[e.length-1]);if(t.children.length<e[e.length-1])throw new k(S.ErrInvalidArgument,"unacceptable path");return{node:t,offset:e[e.length-1]}}getRoot(){return this.root}get size(){return this.root.size}findPostorderRight(e){const{node:t,offset:r}=e;if(t.isText){if(t.size===r){const i=t.nextSibling;return i||t.parent}return t}return t.children.length===r?t:uy(t.children[r])}indexOf(e){let{node:t}=e;const{offset:r}=e;let i=0,s=1;if(t.isText){i+=r;const o=t.parent,a=o.findOffset(t);if(a===-1)throw new k(S.ErrInvalidArgument,"invalid pos");i+=Os(o,a),t=t.parent}else i+=Os(t,r);for(;t!=null&&t.parent;){const o=t.parent,a=o.findOffset(t);if(a===-1)throw new k(S.ErrInvalidArgument,"invalid pos");i+=Os(o,a),s++,t=t.parent}return i+s-1}indexToPath(e){const t=this.findTreePos(e);return this.treePosToPath(t)}}const W1=(n,e)=>n===e?0:n<e?-1:1;class H1{constructor(e,t,r){u(this,"key");u(this,"value");u(this,"parent");u(this,"left");u(this,"right");u(this,"isRed");this.key=e,this.value=t,this.isRed=r}}class _1{constructor(e){u(this,"stack");this.stack=[],this.traverseInorder(e)}traverseInorder(e){e&&(this.traverseInorder(e.left),this.stack.push({key:e.key,value:e.value}),this.traverseInorder(e.right))}}class cy{constructor(e){u(this,"root");u(this,"comparator");u(this,"counter");this.comparator=typeof e<"u"?e:W1,this.counter=0}put(e,t){return this.root=this.putInternal(e,t,this.root),this.root.isRed=!1,t}get(e){const t=this.getInternal(e,this.root);return t?t.value:void 0}remove(e){!this.isRed(this.root.left)&&!this.isRed(this.root.right)&&(this.root.isRed=!0),this.root=this.removeInternal(this.root,e),this.root&&(this.root.isRed=!1)}getIterator(){return new _1(this.root)}values(){const e=[];for(const t of this.getIterator().stack)e.push(t.value);return e}floorEntry(e){let t=this.root;for(;t;){const r=this.comparator(e,t.key);if(r>0)if(t.right)t.right.parent=t,t=t.right;else return t;else if(r<0)if(t.left)t.left.parent=t,t=t.left;else{let i=t.parent,s=t;for(;i&&s===i.left;)s=i,i=i.parent;return i}else return t}}lastEntry(){if(!this.root)return this.root;let e=this.root;for(;e.right;)e=e.right;return e}size(){return this.counter}isEmpty(){return this.counter===0}getInternal(e,t){for(;t;){const r=this.comparator(e,t.key);if(r===0)return t;r<0?t=t.left:r>0&&(t=t.right)}}putInternal(e,t,r){if(!r)return this.counter+=1,new H1(e,t,!0);const i=this.comparator(e,r.key);return i<0?r.left=this.putInternal(e,t,r.left):i>0?r.right=this.putInternal(e,t,r.right):r.value=t,this.isRed(r.right)&&!this.isRed(r.left)&&(r=this.rotateLeft(r)),this.isRed(r.left)&&this.isRed(r.left.left)&&(r=this.rotateRight(r)),this.isRed(r.left)&&this.isRed(r.right)&&this.flipColors(r),r}removeInternal(e,t){if(this.comparator(t,e.key)<0)!this.isRed(e.left)&&!this.isRed(e.left.left)&&(e=this.moveRedLeft(e)),e.left=this.removeInternal(e.left,t);else{if(this.isRed(e.left)&&(e=this.rotateRight(e)),this.comparator(t,e.key)===0&&!e.right){this.counter-=1;return}if(!this.isRed(e.right)&&!this.isRed(e.right.left)&&(e=this.moveRedRight(e)),this.comparator(t,e.key)===0){this.counter-=1;const r=this.min(e.right);e.value=r.value,e.key=r.key,e.right=this.removeMin(e.right)}else e.right=this.removeInternal(e.right,t)}return this.fixUp(e)}min(e){return e.left?this.min(e.left):e}removeMin(e){if(e.left)return!this.isRed(e.left)&&!this.isRed(e.left.left)&&(e=this.moveRedLeft(e)),e.left=this.removeMin(e.left),this.fixUp(e)}fixUp(e){return this.isRed(e.right)&&(e=this.rotateLeft(e)),this.isRed(e.left)&&this.isRed(e.left.left)&&(e=this.rotateRight(e)),this.isRed(e.left)&&this.isRed(e.right)&&this.flipColors(e),e}moveRedLeft(e){return this.flipColors(e),this.isRed(e.right.left)&&(e.right=this.rotateRight(e.right),e=this.rotateLeft(e),this.flipColors(e)),e}moveRedRight(e){return this.flipColors(e),this.isRed(e.left.left)&&(e=this.rotateRight(e),this.flipColors(e)),e}isRed(e){return e&&e.isRed}rotateLeft(e){const t=e.right;return e.right=t.left,t.left=e,t.isRed=t.left.isRed,t.left.isRed=!0,t}rotateRight(e){const t=e.left;return e.left=t.right,t.right=e,t.isRed=t.right.isRed,t.right.isRed=!0,t}flipColors(e){e.isRed=!e.isRed,e.left.isRed=!e.left.isRed,e.right.isRed=!e.right.isRed}}class Lt{constructor(e,t){u(this,"parentID");u(this,"leftSiblingID");this.parentID=e,this.leftSiblingID=t}static of(e,t){return new Lt(e,t)}static fromTreePos(e){const{offset:t}=e;let{node:r}=e,i;return r.isText?(r.parent.children[0]===r&&t===0?i=r.parent:i=r,r=r.parent):t===0?i=r:i=r.children[t-1],Lt.of(r.id,Ee.of(i.getCreatedAt(),i.getOffset()+t))}getParentID(){return this.parentID}static fromStruct(e){return Lt.of(Ee.of(tt.fromStruct(e.parentID.createdAt),e.parentID.offset),Ee.of(tt.fromStruct(e.leftSiblingID.createdAt),e.leftSiblingID.offset))}toStruct(){return{parentID:{createdAt:this.getParentID().getCreatedAt().toStruct(),offset:this.getParentID().getOffset()},leftSiblingID:{createdAt:this.getLeftSiblingID().getCreatedAt().toStruct(),offset:this.getLeftSiblingID().getOffset()}}}toTreeNodePair(e){const t=this.getParentID(),r=this.getLeftSiblingID(),i=e.findFloorNode(t);let s=e.findFloorNode(r);if(!i||!s)throw new k(S.ErrRefused,`cannot find node of CRDTTreePos(${t.toTestString()}, ${r.toTestString()})`);return!r.equals(t)&&r.getOffset()>0&&r.getOffset()===s.id.getOffset()&&s.insPrevID&&(s=e.findFloorNode(s.insPrevID)),[i,s]}getLeftSiblingID(){return this.leftSiblingID}equals(e){return this.getParentID().getCreatedAt().equals(e.getParentID().getCreatedAt())&&this.getParentID().getOffset()===e.getParentID().getOffset()&&this.getLeftSiblingID().getCreatedAt().equals(e.getLeftSiblingID().getCreatedAt())&&this.getLeftSiblingID().getOffset()===e.getLeftSiblingID().getOffset()}}class Ee{constructor(e,t){u(this,"createdAt");u(this,"offset");this.createdAt=e,this.offset=t}static of(e,t){return new Ee(e,t)}static fromStruct(e){return Ee.of(tt.fromStruct(e.createdAt),e.offset)}static createComparator(){return(e,t)=>{const r=e.getCreatedAt().compare(t.getCreatedAt());return r!==0?r:e.getOffset()>t.getOffset()?1:e.getOffset()<t.getOffset()?-1:0}}getCreatedAt(){return this.createdAt}equals(e){return this.createdAt.compare(e.createdAt)===0&&this.offset===e.offset}getOffset(){return this.offset}setOffset(e){this.offset=e}toStruct(){return{createdAt:this.createdAt.toStruct(),offset:this.offset}}toIDString(){return`${this.createdAt.toIDString()}:${this.offset}`}toTestString(){return`${this.createdAt.toTestString()}/${this.offset}`}}class Ze extends V1{constructor(t,r,i,s,o){super(r);u(this,"id");u(this,"removedAt");u(this,"attrs");u(this,"insPrevID");u(this,"insNextID");u(this,"_value","");this.id=t,this.removedAt=o,s&&(this.attrs=s),typeof i=="string"?this.value=i:Array.isArray(i)&&(this._children=i)}toIDString(){return this.id.toIDString()}getRemovedAt(){return this.removedAt}static create(t,r,i,s){return new Ze(t,r,i,s)}deepcopy(){var r;const t=new Ze(this.id,this.type);return t.removedAt=this.removedAt,t._value=this._value,t.size=this.size,t.attrs=(r=this.attrs)==null?void 0:r.deepcopy(),t._children=this._children.map(i=>{const s=i.deepcopy();return s.parent=t,s}),t.insPrevID=this.insPrevID,t.insNextID=this.insNextID,t}get value(){if(!this.isText)throw new k(S.ErrInvalidType,`cannot get value of element node: ${this.type}`);return this._value}set value(t){if(!this.isText)throw new k(S.ErrInvalidType,`cannot set value of element node: ${this.type}`);this._value=t,this.size=t.length}get isRemoved(){return!!this.removedAt}remove(t){const r=!this.removedAt;(!this.removedAt||this.removedAt.compare(t)>0)&&(this.removedAt=t),r&&this.updateAncestorsSize()}cloneText(t){return new Ze(Ee.of(this.id.getCreatedAt(),t),this.type,void 0,void 0,this.removedAt)}cloneElement(t){return new Ze(Ee.of(t(),0),this.type,void 0,void 0,this.removedAt)}split(t,r,i){const s=this.isText?this.splitText(r,this.id.getOffset()):this.splitElement(r,i);if(s){if(s.insPrevID=this.id,this.insNextID){const o=t.findFloorNode(this.insNextID);o.insPrevID=s.id,s.insNextID=this.insNextID}this.insNextID=s.id,t.registerNode(s)}return s}getCreatedAt(){return this.id.getCreatedAt()}getOffset(){return this.id.getOffset()}canDelete(t,r){return!this.getCreatedAt().after(r)&&(!this.removedAt||t.after(this.removedAt))}canStyle(t,r){return this.isText?!1:!this.getCreatedAt().after(r)&&(!this.removedAt||t.after(this.removedAt))}setAttrs(t,r){this.attrs||(this.attrs=new Ar);const i=new Array;for(const[s,o]of Object.entries(t))i.push(this.attrs.set(s,o,r));return i}purge(t){this.attrs&&this.attrs.purge(t)}getGCPairs(){const t=[];if(!this.attrs)return t;for(const r of this.attrs)r.getRemovedAt()&&t.push({parent:this,child:r});return t}}function Hc(n){var t;if(n.isText){const r=n;return{type:r.type,value:r.value}}const e={type:n.type,children:n.children.map(Hc)};return n.attrs&&(e.attributes=Zi((t=n.attrs)==null?void 0:t.toObject())),e}function Xf(n){if(n.isText)return n.value;let e="";return n.attrs&&n.attrs.size()&&(e=" "+Array.from(n.attrs).filter(t=>!t.isRemoved()).sort((t,r)=>t.getKey().localeCompare(r.getKey())).map(t=>{const r=JSON.parse(t.getValue());return typeof r=="string"?`${t.getKey()}="${r}"`:`${t.getKey()}="${tn(t.getValue())}"`}).join(" ")),`<${n.type}${e}>${n.children.map(t=>Xf(t)).join("")}</${n.type}>`}function fy(n){if(n.isText){const e=n;return{type:e.type,value:e.value,size:e.size,isRemoved:e.isRemoved}}return{type:n.type,children:n.children.map(fy),size:n.size,isRemoved:n.isRemoved}}class xt extends Po{constructor(t,r){super(r);u(this,"indexTree");u(this,"nodeMapByID");this.indexTree=new K1(t),this.nodeMapByID=new cy(Ee.createComparator()),this.indexTree.traverseAll(i=>{this.nodeMapByID.put(i.id,i)})}static create(t,r){return new xt(t,r)}findFloorNode(t){const r=this.nodeMapByID.floorEntry(t);if(!(!r||!r.key.getCreatedAt().equals(t.getCreatedAt())))return r.value}registerNode(t){this.nodeMapByID.put(t.id,t)}findNodesAndSplitText(t,r){const[i,s]=t.toTreeNodePair(this);let o=s;const a=i===o,l=o.parent&&!a?o.parent:i;if(o.isText&&o.split(this,t.getLeftSiblingID().getOffset()-o.id.getOffset()),r){const c=l.allChildren,d=a?0:c.indexOf(o)+1;for(let h=d;h<c.length;h++){const p=c[h];if(!p.id.getCreatedAt().after(r))break;o=p}}return[l,o]}style(t,r,i,s){const[o,a]=this.findNodesAndSplitText(t[0],i),[l,c]=this.findNodesAndSplitText(t[1],i),d=[],h=r?Zi(r):{},p=new Map,m=[];return this.traverseInPosRange(o,a,l,c,([w])=>{const I=w.getCreatedAt().getActorID(),O=s?s.has(I)?s.get(I):Ft:Hs;if(w.canStyle(i,O)&&r){const y=p.get(I),g=w.getCreatedAt();(!y||g.after(y))&&p.set(I,g);const v=w.setAttrs(r,i),T=v.reduce((P,[,B])=>(B&&(P[B.getKey()]=h[B.getKey()]),P),{}),x=w.parent,N=w.prevSibling||w.parent;Object.keys(T).length>0&&d.push({type:"style",from:this.toIndex(x,N),to:this.toIndex(w,w),fromPath:this.toPath(x,N),toPath:this.toPath(w,w),actor:i.getActorID(),value:T});for(const[P]of v)P&&m.push({parent:w,child:P})}}),[p,m,d]}removeStyle(t,r,i,s){const[o,a]=this.findNodesAndSplitText(t[0],i),[l,c]=this.findNodesAndSplitText(t[1],i),d=[],h=new Map,p=[];return this.traverseInPosRange(o,a,l,c,([m])=>{const w=m.getCreatedAt().getActorID(),I=s?s.has(w)?s.get(w):Ft:Hs;if(m.canStyle(i,I)&&r){const O=h.get(w),y=m.getCreatedAt();(!O||y.after(O))&&h.set(w,y),m.attrs||(m.attrs=new Ar);for(const T of r){const x=m.attrs.remove(T,i);for(const N of x)p.push({parent:m,child:N})}const g=m.parent,v=m.prevSibling||m.parent;d.push({actor:i.getActorID(),type:"removeStyle",from:this.toIndex(g,v),to:this.toIndex(m,m),fromPath:this.toPath(g,v),toPath:this.toPath(m,m),value:r})}}),[h,p,d]}edit(t,r,i,s,o,a){const[l,c]=this.findNodesAndSplitText(t[0],s),[d,h]=this.findNodesAndSplitText(t[1],s),p=this.toIndex(l,c),m=this.toPath(l,c),w=[],I=[],O=[],y=new Map;this.traverseInPosRange(l,c,d,h,([T,x],N)=>{if(x===ge.Start&&!N)for(const H of T.children)O.push(H);const P=T.getCreatedAt().getActorID(),B=a?a.has(P)?a.get(P):Ft:Hs;if(T.canDelete(s,B)||w.includes(T.parent)){const H=y.get(P),U=T.getCreatedAt();(!H||U.after(H))&&y.set(P,U),(x===ge.Text||x===ge.Start)&&w.push(T),I.push([T,x])}});const g=this.makeDeletionChanges(I,s),v=[];for(const T of w)T.remove(s),T.isRemoved&&v.push({parent:this,child:T});for(const T of O)T.removedAt||l.append(T);if(i>0){let T=0,x=l,N=c;for(;T<i;)x.split(this,x.findOffset(N)+1,o),N=x,x=x.parent,T++;g.push({type:"content",from:p,to:p,fromPath:m,toPath:m,actor:s.getActorID()})}if(r!=null&&r.length){const T=[];let x=c;for(const N of r)x===l?l.insertAt(N,0):l.insertAfter(N,x),x=N,Ml(N,P=>{l.isRemoved&&(P.remove(s),v.push({parent:this,child:P})),this.nodeMapByID.put(P.id,P)}),N.isRemoved||T.push(N);if(T.length){const N=T.map(P=>Hc(P));g.length&&g[g.length-1].from===p?g[g.length-1].value=N:g.push({type:"content",from:p,to:p,fromPath:m,toPath:m,actor:s.getActorID(),value:N})}}return[g,v,y]}editT(t,r,i,s,o){const a=this.findPos(t[0]),l=this.findPos(t[1]);this.edit([a,l],r,i,s,o)}move(t,r,i){throw new k(S.ErrUnimplemented,`not implemented: ${t}, ${r}, ${i}`)}purge(t){var s;(s=t.parent)==null||s.removeChild(t),this.nodeMapByID.remove(t.id);const r=t.insPrevID,i=t.insNextID;if(r){const o=this.findFloorNode(r);o.insNextID=i}if(i){const o=this.findFloorNode(i);o.insPrevID=r}t.insPrevID=void 0,t.insNextID=void 0}getGCPairs(){const t=[];return this.indexTree.traverse(r=>{r.getRemovedAt()&&t.push({parent:this,child:r});for(const i of r.getGCPairs())t.push(i)}),t}findPos(t,r=!0){const i=this.indexTree.findTreePos(t,r);return Lt.fromTreePos(i)}pathToPosRange(t){const r=this.pathToIndex(t);return[this.findPos(r),this.findPos(r+1)]}pathToPos(t){const r=this.indexTree.pathToIndex(t);return this.findPos(r)}getRoot(){return this.indexTree.getRoot()}getSize(){return this.indexTree.size}getNodeSize(){return this.nodeMapByID.size()}getIndexTree(){return this.indexTree}toXML(){return Xf(this.indexTree.getRoot())}toJSON(){return JSON.stringify(this.getRootTreeNode())}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:JSON.parse(this.toJSON()),type:"YORKIE_TREE"}}toJSInfoForTest(){const t=this.indexTree.getRoot(),r=(i,s=void 0,o=void 0,a=0)=>{var m,w,I,O;let l,c,d;const h=i.isText?{node:i,offset:0}:s&&o?this.toTreePos(s,o):null;h&&(l=this.indexTree.indexOf(h),c=this.indexTree.treePosToPath(h),d=Lt.fromTreePos(h).toStruct());const p={type:i.type,parent:s==null?void 0:s.id.toTestString(),size:i.size,id:i.id.toTestString(),removedAt:(m=i.removedAt)==null?void 0:m.toTestString(),insPrev:(w=i.insPrevID)==null?void 0:w.toTestString(),insNext:(I=i.insNextID)==null?void 0:I.toTestString(),value:i.isText?i.value:void 0,isRemoved:i.isRemoved,children:[],depth:a,attributes:i.attrs?Zi((O=i.attrs)==null?void 0:O.toObject()):void 0,index:l,path:c,pos:d};for(let y=0;y<i.allChildren.length;y++){const g=y===0?i:i.allChildren[y-1];p.children.push(r(i.allChildren[y],i,g,a+1))}return p};return r(t)}getRootTreeNode(){return Hc(this.indexTree.getRoot())}toTestTreeNode(){return fy(this.indexTree.getRoot())}toSortedJSON(){return this.toJSON()}deepcopy(){const t=this.getRoot();return new xt(t.deepcopy(),this.getCreatedAt())}toPath(t,r){const i=this.toTreePos(t,r);return i?this.indexTree.treePosToPath(i):[]}toIndex(t,r){const i=this.toTreePos(t,r);return i?this.indexTree.indexOf(i):-1}indexToPath(t){return this.indexTree.indexToPath(t)}pathToIndex(t){return this.indexTree.pathToIndex(t)}indexRangeToPosRange(t){const r=this.findPos(t[0]);return t[0]===t[1]?[r,r]:[r,this.findPos(t[1])]}indexRangeToPosStructRange(t){const[r,i]=t,s=this.findPos(r);return r===i?[s.toStruct(),s.toStruct()]:[s.toStruct(),this.findPos(i).toStruct()]}posRangeToPathRange(t){const[r,i]=this.findNodesAndSplitText(t[0]),[s,o]=this.findNodesAndSplitText(t[1]);return[this.toPath(r,i),this.toPath(s,o)]}posRangeToIndexRange(t){const[r,i]=this.findNodesAndSplitText(t[0]),[s,o]=this.findNodesAndSplitText(t[1]);return[this.toIndex(r,i),this.toIndex(s,o)]}traverseInPosRange(t,r,i,s,o){const a=this.toIndex(t,r),l=this.toIndex(i,s);return this.indexTree.tokensBetween(a,l,o)}toTreePos(t,r){if(!t||!r)return;if(t.isRemoved){let s;for(;t.isRemoved;)s=t,t=s.parent;const o=t.findOffset(s);return{node:t,offset:o}}if(t===r)return{node:t,offset:0};let i=t.findOffset(r);if(!r.isRemoved){if(r.isText)return{node:r,offset:r.paddedSize};i++}return{node:t,offset:i}}makeDeletionChanges(t,r){const i=[],s=[];let o=null,a=null;for(let l=0;l<t.length;l++){const c=t[l],d=t[l+1];o||(o=c),a=c;const h=this.findRightToken(c);(!h||!d||h[0]!==d[0]||h[1]!==d[1])&&(s.push([o,a]),o=null,a=null)}for(const l of s){const[c,d]=l,[h,p]=this.findLeftToken(c),[m,w]=d,I=p===ge.Start?h:h.parent,O=w===ge.Start?m:m.parent,y=this.toIndex(I,h),g=this.toIndex(O,m);y<g&&(i.length>0&&y===i[i.length-1].to?(i[i.length-1].to=g,i[i.length-1].toPath=this.toPath(O,m)):i.push({type:"content",from:y,to:g,fromPath:this.toPath(I,h),toPath:this.toPath(O,m),actor:r.getActorID()}))}return i.reverse()}findRightToken([t,r]){if(r===ge.Start){const l=t.allChildren;return l.length>0?[l[0],l[0].isText?ge.Text:ge.Start]:[t,ge.End]}const i=t.parent,s=i.allChildren,o=s.indexOf(t);if(i&&o===s.length-1)return[i,ge.End];const a=s[o+1];return[a,a.isText?ge.Text:ge.Start]}findLeftToken([t,r]){if(r===ge.End){const l=t.allChildren;if(l.length>0){const c=l[l.length-1];return[c,c.isText?ge.Text:ge.End]}return[t,ge.Start]}const i=t.parent,s=i.allChildren,o=s.indexOf(t);if(i&&o===0)return[i,ge.Start];const a=s[o-1];return[a,a.isText?ge.Text:ge.End]}}class Lo extends $t{constructor(t,r,i,s,o,a,l){super(t,l);u(this,"fromPos");u(this,"toPos");u(this,"contents");u(this,"splitLevel");u(this,"maxCreatedAtMapByActor");this.fromPos=r,this.toPos=i,this.contents=s,this.splitLevel=o,this.maxCreatedAtMapByActor=a}static create(t,r,i,s,o,a,l){return new Lo(t,r,i,s,o,a,l)}execute(t){var l;const r=t.findByCreatedAt(this.getParentCreatedAt());if(!r)throw new k(S.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(r instanceof xt))throw new k(S.ErrInvalidArgument,"fail to execute, only Tree can execute edit");const i=this.getExecutedAt(),s=r,[o,a]=s.edit([this.fromPos,this.toPos],(l=this.contents)==null?void 0:l.map(c=>c.deepcopy()),this.splitLevel,i,(()=>{let c=i.getDelimiter();return this.contents!==void 0&&(c+=this.contents.length),()=>tt.of(i.getLamport(),++c,i.getActorID())})(),this.maxCreatedAtMapByActor);for(const c of a)t.registerGCPair(c);return{opInfos:o.map(({from:c,to:d,value:h,splitLevel:p,fromPath:m,toPath:w})=>({type:"tree-edit",path:t.createPath(this.getParentCreatedAt()),from:c,to:d,value:h,splitLevel:p,fromPath:m,toPath:w}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const t=this.getParentCreatedAt().toTestString(),r=`${this.fromPos.getLeftSiblingID().getCreatedAt().toTestString()}/${this.fromPos.getLeftSiblingID().getOffset()}`,i=`${this.toPos.getLeftSiblingID().getCreatedAt().toTestString()}/${this.toPos.getLeftSiblingID().getOffset()}`,s=this.contents||[];return`${t}.EDIT(${r},${i},${s.map(o=>Xf(o)).join("")})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getContents(){return this.contents}getSplitLevel(){return this.splitLevel}getMaxCreatedAtMapByActor(){return this.maxCreatedAtMapByActor}}class es{constructor(e){u(this,"vector");this.vector=e||new Map}set(e,t){this.vector.set(e,t)}get(e){return this.vector.get(e)}maxLamport(){let e=BigInt(0);for(const[,t]of this)t>e&&(e=t);return e}max(e){const t=new Map;for(const[r,i]of e){const s=this.vector.get(r),o=s&&s>i?s:i;t.set(r,o)}for(const[r,i]of this){const s=e.get(r),o=s&&s>i?s:i;t.set(r,o)}return new es(t)}afterOrEqual(e){const t=this.vector.get(e.getActorID());return t===void 0?!1:t>=e.getLamport()}deepcopy(){const e=new Map;for(const[t,r]of this.vector)e.set(t,r);return new es(e)}filter(e){const t=new Map;for(const[r]of e){const i=this.vector.get(r);i!==void 0&&t.set(r,i)}return new es(t)}size(){return this.vector.size}*[Symbol.iterator](){for(const[e,t]of this.vector)yield[e,t]}}const G1=new es(new Map);class lr{constructor(e,t,r,i,s){u(this,"clientSeq");u(this,"serverSeq");u(this,"lamport");u(this,"actor");u(this,"versionVector");this.clientSeq=e,this.serverSeq=s,this.lamport=t,this.versionVector=i,this.actor=r}static of(e,t,r,i,s){return new lr(e,t,r,i,s)}next(){const e=this.versionVector.deepcopy();return e.set(this.actor,this.lamport+1n),new lr(this.clientSeq+1,this.lamport+1n,this.actor,e)}syncClocks(e){const t=e.lamport>this.lamport?e.lamport+1n:this.lamport+1n,r=this.versionVector.max(e.versionVector),i=new lr(this.clientSeq,t,this.actor,r);return i.versionVector.set(this.actor,t),i}setClocks(e,t){const r=e>this.lamport?e:this.lamport+1n,i=this.versionVector.max(t);return i.set(this.actor,r),lr.of(this.clientSeq,r,this.actor,i)}createTimeTicket(e){return tt.of(this.lamport,e,this.actor)}setActor(e){return new lr(this.clientSeq,this.lamport,e,this.versionVector,this.serverSeq)}setVersionVector(e){return new lr(this.clientSeq,this.lamport,this.actor,e,this.serverSeq)}getClientSeq(){return this.clientSeq}getServerSeq(){return this.serverSeq?this.serverSeq.toString():""}getLamport(){return this.lamport}getLamportAsString(){return this.lamport.toString()}getActorID(){return this.actor}getVersionVector(){return this.versionVector}toTestString(){return`${this.lamport.toString()}:${this.actor.slice(-2)}:${this.clientSeq}`}}const Y1=new lr(0,0n,Gf,G1);class gs{constructor({id:e,operations:t,presenceChange:r,message:i}){u(this,"id");u(this,"operations");u(this,"presenceChange");u(this,"message");this.id=e,this.operations=t||[],this.presenceChange=r,this.message=i}static create({id:e,operations:t,presenceChange:r,message:i}){return new gs({id:e,operations:t,presenceChange:r,message:i})}getID(){return this.id}getMessage(){return this.message}hasOperations(){return this.operations.length>0}getOperations(){return this.operations}setActor(e){for(const t of this.operations)t.setActor(e);this.id=this.id.setActor(e)}hasPresenceChange(){return this.presenceChange!==void 0}getPresenceChange(){return this.presenceChange}execute(e,t,r){const i=[],s=[];for(const o of this.operations){const a=o.execute(e,r);if(!a)continue;const{opInfos:l,reverseOp:c}=a;i.push(...l),c&&s.unshift(c)}return this.presenceChange&&(this.presenceChange.type===Qr.Put?t.set(this.id.getActorID(),Pt(this.presenceChange.presence)):t.delete(this.id.getActorID())),{opInfos:i,reverseOps:s}}toTestString(){return`${this.operations.map(e=>e.toTestString()).join(",")}`}toStruct(){return{changeID:fe.bytesToHex(fe.toChangeID(this.getID()).toBinary()),message:this.getMessage(),operations:this.getOperations().map(e=>fe.bytesToHex(fe.toOperation(e).toBinary())),presenceChange:this.getPresenceChange()}}static fromStruct(e){const{changeID:t,operations:r,presenceChange:i,message:s}=e;return gs.create({id:fe.bytesToChangeID(fe.hexToBytes(t)),operations:r==null?void 0:r.map(o=>fe.bytesToOperation(fe.hexToBytes(o))),presenceChange:i,message:s})}}class Jl{constructor(e,t,r,i,s,o,a){u(this,"documentKey");u(this,"checkpoint");u(this,"isRemoved");u(this,"changes");u(this,"snapshot");u(this,"minSyncedTicket");u(this,"versionVector");this.documentKey=e,this.checkpoint=t,this.isRemoved=r,this.changes=i,this.snapshot=o,this.minSyncedTicket=a,this.versionVector=s}static create(e,t,r,i,s,o,a){return new Jl(e,t,r,i,s,o,a)}getDocumentKey(){return this.documentKey}getCheckpoint(){return this.checkpoint}getIsRemoved(){return this.isRemoved}getChanges(){return this.changes}hasChanges(){return this.changes.length>0}getChangeSize(){return this.changes.length}hasSnapshot(){return!!this.snapshot&&!!this.snapshot.length}getSnapshot(){return this.snapshot}getMinSyncedTicket(){return this.minSyncedTicket}getVersionVector(){return this.versionVector}}class ts{constructor(e,t){u(this,"serverSeq");u(this,"clientSeq");this.serverSeq=e,this.clientSeq=t}static of(e,t){return new ts(e,t)}increaseClientSeq(e){return e===0?this:new ts(this.serverSeq,this.clientSeq+e)}forward(e){if(this.equals(e))return this;const t=this.serverSeq>e.serverSeq?this.serverSeq:e.serverSeq,r=Math.max(this.clientSeq,e.clientSeq);return ts.of(t,r)}getServerSeqAsString(){return this.serverSeq.toString()}getClientSeq(){return this.clientSeq}getServerSeq(){return this.serverSeq}equals(e){return this.clientSeq===e.clientSeq&&this.serverSeq==e.serverSeq}toTestString(){return`serverSeq=${this.serverSeq}, clientSeq=${this.clientSeq}`}}const Q1=new ts(0n,0);class sn{constructor(e,t){u(this,"createdAt");u(this,"offset");this.createdAt=e,this.offset=t}static of(e,t){return new sn(e,t)}static fromStruct(e){return sn.of(tt.fromStruct(e.createdAt),e.offset)}getCreatedAt(){return this.createdAt}getOffset(){return this.offset}equals(e){return this.createdAt.compare(e.createdAt)===0&&this.offset===e.offset}hasSameCreatedAt(e){return this.createdAt.compare(e.createdAt)===0}split(e){return new sn(this.createdAt,this.offset+e)}toStruct(){return{createdAt:this.createdAt.toStruct(),offset:this.offset}}toTestString(){return`${this.createdAt.toTestString()}:${this.offset}`}toIDString(){return`${this.createdAt.toIDString()}:${this.offset}`}}const X1=sn.of(Ft,0);class Mt{constructor(e,t){u(this,"id");u(this,"relativeOffset");this.id=e,this.relativeOffset=t}static of(e,t){return new Mt(e,t)}static fromStruct(e){const t=sn.fromStruct(e.id);return Mt.of(t,e.relativeOffset)}getID(){return this.id}getRelativeOffset(){return this.relativeOffset}getAbsoluteID(){return sn.of(this.id.getCreatedAt(),this.id.getOffset()+this.relativeOffset)}toTestString(){return`${this.id.toTestString()}:${this.relativeOffset}`}toStruct(){return{id:this.id.toStruct(),relativeOffset:this.relativeOffset}}equals(e){return this.id.equals(e.id)?this.relativeOffset===e.relativeOffset:!1}}class Hr extends ny{constructor(t,r,i){super(r);u(this,"id");u(this,"removedAt");u(this,"prev");u(this,"next");u(this,"insPrev");u(this,"insNext");this.id=t,this.removedAt=i}static create(t,r){return new Hr(t,r)}static createComparator(){return(t,r)=>{const i=t.getCreatedAt().compare(r.getCreatedAt());return i!==0?i:t.getOffset()>r.getOffset()?1:t.getOffset()<r.getOffset()?-1:0}}getID(){return this.id}getCreatedAt(){return this.id.getCreatedAt()}getLength(){return this.removedAt?0:this.getContentLength()}getContentLength(){return this.value&&this.value.length||0}getPrev(){return this.prev}getNext(){return this.next}getInsPrev(){return this.insPrev}getInsNext(){return this.insNext}getInsPrevID(){return this.insPrev.getID()}setPrev(t){this.prev=t,t&&(t.next=this)}setNext(t){this.next=t,t&&(t.prev=this)}setInsPrev(t){this.insPrev=t,t&&(t.insNext=this)}setInsNext(t){this.insNext=t,t&&(t.insPrev=this)}hasNext(){return!!this.next}hasInsPrev(){return!!this.insPrev}isRemoved(){return!!this.removedAt}getRemovedAt(){return this.removedAt}split(t){return new Hr(this.id.split(t),this.splitValue(t),this.removedAt)}canDelete(t,r){const i=!this.removedAt;return!this.getCreatedAt().after(r)&&(!this.removedAt||t.after(this.removedAt))?i:!1}canStyle(t,r){return!this.getCreatedAt().after(r)&&(!this.removedAt||t.after(this.removedAt))}remove(t){this.removedAt=t}createPosRange(){return[Mt.of(this.id,0),Mt.of(this.id,this.getLength())]}deepcopy(){return new Hr(this.id,this.value,this.removedAt)}toTestString(){return`${this.id.toTestString()} ${this.value?this.value:""}`}splitValue(t){const r=this.value;return this.value=r.substring(0,t),r.substring(t,r.length)}toIDString(){return this.id.toIDString()}}class ms{constructor(){u(this,"head");u(this,"treeByIndex");u(this,"treeByID");this.head=Hr.create(X1),this.treeByIndex=new wo,this.treeByID=new cy(Hr.createComparator()),this.treeByIndex.insert(this.head),this.treeByID.put(this.head.getID(),this.head)}static create(){return new ms}edit(e,t,r,i){const[s,o]=this.findNodeWithSplit(e[1],t),[a,l]=this.findNodeWithSplit(e[0],t),c=this.findBetween(l,o),[d,h,p]=this.deleteNodes(c,t,i),m=o?o.getID():s.getID();let w=Mt.of(m,0);if(r){const O=this.posToIndex(a.createPosRange()[1],!0),y=this.insertAfter(a,Hr.create(sn.of(t,0),r));d.length&&d[d.length-1].from===O?d[d.length-1].value=r:d.push({actor:t.getActorID(),from:O,to:O,value:r}),w=Mt.of(y.getID(),y.getContentLength())}const I=[];for(const[,O]of p)I.push({parent:this,child:O});return[w,h,I,d]}indexToPos(e){const[t,r]=this.treeByIndex.find(e),i=t;return Mt.of(i.getID(),r)}findIndexesFromRange(e){const[t,r]=e;return[this.posToIndex(t,!1),this.posToIndex(r,!0)]}posToIndex(e,t){const r=e.getAbsoluteID(),i=t?this.findFloorNodePreferToLeft(r):this.findFloorNode(r);if(!i)throw new k(S.ErrInvalidArgument,`the node of the given id should be found: ${r.toTestString()}`);const s=this.treeByIndex.indexOf(i),o=i.isRemoved()?0:r.getOffset()-i.getID().getOffset();return s+o}findNode(e){return this.findFloorNode(e)}get length(){return this.treeByIndex.length}getTreeByIndex(){return this.treeByIndex}getTreeByID(){return this.treeByID}toString(){const e=[];for(const t of this)t.isRemoved()||e.push(t.getValue());return e.join("")}*[Symbol.iterator](){let e=this.head.getNext();for(;e;)yield e,e=e.getNext()}getHead(){return this.head}deepcopy(){const e=new ms;let t=this.head.getNext(),r=e.head,i;for(;t;){if(i=e.insertAfter(r,t.deepcopy()),t.hasInsPrev()){const s=e.findNode(t.getInsPrevID());i.setInsPrev(s)}r=i,t=t.getNext()}return e}toTestString(){const e=[];let t=this.head;for(;t;)t.isRemoved()?e.push(`{${t.toTestString()}}`):e.push(`[${t.toTestString()}]`),t=t.getNext();return e.join("")}insertAfter(e,t){const r=e.getNext();return t.setPrev(e),r&&r.setPrev(t),this.treeByID.put(t.getID(),t),this.treeByIndex.insertAfter(e,t),t}findNodeWithSplit(e,t){const r=e.getAbsoluteID();let i=this.findFloorNodePreferToLeft(r);const s=r.getOffset()-i.getID().getOffset();for(this.splitNode(i,s);i.hasNext()&&i.getNext().getCreatedAt().after(t);)i=i.getNext();return[i,i.getNext()]}findFloorNodePreferToLeft(e){let t=this.findFloorNode(e);if(!t)throw new k(S.ErrInvalidArgument,`the node of the given id should be found: ${e.toTestString()}`);if(e.getOffset()>0&&t.getID().getOffset()==e.getOffset()){if(!t.hasInsPrev())return t;t=t.getInsPrev()}return t}findFloorNode(e){const t=this.treeByID.floorEntry(e);if(t&&!(!t.key.equals(e)&&!t.key.hasSameCreatedAt(e)))return t.value}findBetween(e,t){const r=[];let i=e;for(;i&&i!==t;)r.push(i),i=i.getNext();return r}splitNode(e,t){if(t>e.getContentLength())throw new k(S.ErrInvalidArgument,"offset should be less than or equal to length");if(t===0)return e;if(t===e.getContentLength())return e.getNext();const r=e.split(t);this.treeByIndex.updateWeight(r),this.insertAfter(e,r);const i=e.getInsNext();return i&&i.setInsPrev(r),r.setInsPrev(e),r}deleteNodes(e,t,r){if(!e.length)return[[],new Map,new Map];const[i,s]=this.filterNodes(e,t,r),o=new Map,a=new Map,l=this.makeChanges(s,t);for(const c of i){const d=c.getCreatedAt().getActorID();(!o.has(d)||c.getID().getCreatedAt().after(o.get(d)))&&o.set(d,c.getID().getCreatedAt()),a.set(c.getID().toIDString(),c),c.remove(t)}return this.deleteIndexNodes(s),[l,o,a]}filterNodes(e,t,r){const i=!!r,s=[],o=[],[a,l]=this.findEdgesOfCandidates(e);o.push(a);for(const c of e){const d=c.getCreatedAt().getActorID(),h=i?r.has(d)?r.get(d):Ft:Hs;c.canDelete(t,h)?s.push(c):o.push(c)}return o.push(l),[s,o]}findEdgesOfCandidates(e){return[e[0].getPrev(),e[e.length-1].getNext()]}makeChanges(e,t){const r=[];let i,s;for(let o=0;o<e.length-1;o++){const a=e[o],l=e[o+1];a.getNext()!=l&&([i]=this.findIndexesFromRange(a.getNext().createPosRange()),l?[,s]=this.findIndexesFromRange(l.getPrev().createPosRange()):s=this.treeByIndex.length,i<s&&r.push({actor:t.getActorID(),from:i,to:s}))}return r.reverse()}deleteIndexNodes(e){for(let t=0;t<e.length-1;t++){const r=e[t],i=e[t+1];r.getNext()!=i&&this.treeByIndex.deleteRange(r,i)}}purge(e){this.treeByIndex.delete(e),this.treeByID.remove(e.getID());const t=e.getPrev(),r=e.getNext(),i=e.getInsPrev(),s=e.getInsNext();t&&t.setNext(r),r&&r.setPrev(t),e.setPrev(void 0),e.setNext(void 0),i&&i.setInsNext(s),s&&s.setInsPrev(i),e.setInsPrev(void 0),e.setInsNext(void 0)}}const ig=n=>n<0?Math.ceil(n):Math.floor(n);var on=(n=>(n[n.IntegerCnt=0]="IntegerCnt",n[n.LongCnt=1]="LongCnt",n))(on||{});class rt extends Po{constructor(t,r,i){super(i);u(this,"valueType");u(this,"value");switch(this.valueType=t,t){case 0:typeof r=="number"?r>Math.pow(2,31)-1||r<-Math.pow(2,31)?this.value=q.fromNumber(r).toInt():this.value=ig(r):this.value=r.toInt();break;case 1:typeof r=="number"?this.value=q.fromNumber(r):this.value=r;break;default:throw new k(S.ErrUnimplemented,`unimplemented type: ${t}`)}}static create(t,r,i){return new rt(t,r,i)}static valueFromBytes(t,r){switch(t){case 0:return r[0]|r[1]<<8|r[2]<<16|r[3]<<24;case 1:return q.fromBytesLE(Array.from(r));default:throw new k(S.ErrUnimplemented,`unimplemented type: ${t}`)}}toJSON(){return`${this.value}`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:this.value,type:"YORKIE_COUNTER"}}deepcopy(){const t=rt.create(this.valueType,this.value,this.getCreatedAt());return t.setMovedAt(this.getMovedAt()),t}getType(){return this.valueType}static getCounterType(t){switch(typeof t){case"object":return t instanceof q?1:void 0;case"number":return t>Math.pow(2,31)-1||t<-Math.pow(2,31)?1:0;default:return}}static isSupport(t){return!!rt.getCounterType(t)}static isInteger(t){return t%1===0}isNumericType(){const t=this.valueType;return t===0||t===1}getValueType(){return this.valueType}getValue(){return this.value}toBytes(){switch(this.valueType){case 0:{const t=this.value;return new Uint8Array([t&255,t>>8&255,t>>16&255,t>>24&255])}case 1:{const r=this.value.toBytesLE();return Uint8Array.from(r)}default:throw new k(S.ErrUnimplemented,`unimplemented type: ${this.valueType}`)}}increase(t){function r(i){if(!i.isNumericType())throw new TypeError(`Unsupported type of value: ${typeof i.getValue()}`)}return r(this),r(t),this.valueType===1?this.value=this.value.add(t.getValue()):t.getType()===ve.Long?this.value=this.value+t.getValue().toInt():this.value=q.fromNumber(this.value+ig(t.getValue())).toInt(),this}}class ps extends $t{constructor(t,r,i){super(t,i);u(this,"value");this.value=r}static create(t,r,i){return new ps(t,r,i)}execute(t){const r=t.findByCreatedAt(this.getParentCreatedAt());if(!r)throw new k(S.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(r instanceof rt))throw new k(S.ErrInvalidArgument,"fail to execute, only Counter can execute increase");const i=r,s=this.value.deepcopy();return i.increase(s),{opInfos:[{type:"increase",path:t.createPath(this.getParentCreatedAt()),value:s.getValue()}],reverseOp:this.toReverseOperation()}}toReverseOperation(){const t=this.value.deepcopy(),i=t.getType()===ve.Long?t.getValue().multiply(-1):t.getValue()*-1;return ps.create(this.getParentCreatedAt(),re.of(i,t.getCreatedAt()))}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.INCREASE.${this.value.toJSON()}`}getValue(){return this.value}}class yr extends $t{constructor(t,r,i,s,o,a,l){super(t,l);u(this,"fromPos");u(this,"toPos");u(this,"maxCreatedAtMapByActor");u(this,"attributes");u(this,"attributesToRemove");this.fromPos=r,this.toPos=i,this.maxCreatedAtMapByActor=s,this.attributes=o,this.attributesToRemove=a}static create(t,r,i,s,o,a){return new yr(t,r,i,s,o,new Array,a)}static createTreeRemoveStyleOperation(t,r,i,s,o,a){return new yr(t,r,i,s,new Map,o,a)}execute(t){const r=t.findByCreatedAt(this.getParentCreatedAt());if(!r)throw new k(S.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(r instanceof xt))throw new k(S.ErrInvalidArgument,"fail to execute, only Tree can execute edit");const i=r;let s,o;if(this.attributes.size){const a={};[...this.attributes].forEach(([l,c])=>a[l]=c),[,o,s]=i.style([this.fromPos,this.toPos],a,this.getExecutedAt(),this.maxCreatedAtMapByActor)}else{const a=this.attributesToRemove;[,o,s]=i.removeStyle([this.fromPos,this.toPos],a,this.getExecutedAt(),this.maxCreatedAtMapByActor)}for(const a of o)t.registerGCPair(a);return{opInfos:s.map(({from:a,to:l,value:c,fromPath:d,toPath:h})=>({type:"tree-style",from:a,to:l,value:this.attributes.size?{attributes:c}:{attributesToRemove:c},fromPath:d,toPath:h,path:t.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const t=this.getParentCreatedAt().toTestString(),r=`${this.fromPos.getLeftSiblingID().getCreatedAt().toTestString()}:${this.fromPos.getLeftSiblingID().getOffset()}`,i=`${this.toPos.getLeftSiblingID().getCreatedAt().toTestString()}:${this.toPos.getLeftSiblingID().getOffset()}`;return`${t}.STYLE(${r},${i},${Object.entries(this.attributes||{}).map(([s,o])=>`${s}:"${o}"`).join(" ")})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getAttributes(){return this.attributes}getAttributesToRemove(){return this.attributesToRemove}getMaxCreatedAtMapByActor(){return this.maxCreatedAtMapByActor}}function Z1(n){const e=new _f,t=e.data;for(const[r,i]of Object.entries(n))t[r]=JSON.stringify(i);return e}function eS(n){if(n.type===Qr.Put)return new yo({type:Ii.PUT,presence:Z1(n.presence)});if(n.type===Qr.Clear)return new yo({type:Ii.CLEAR});throw new k(S.ErrUnimplemented,"unimplemented type")}function tS(n){return new Zp({serverSeq:n.getServerSeq(),clientSeq:n.getClientSeq()})}function dy(n){return new bl({clientSeq:n.getClientSeq(),lamport:n.getLamport(),actorId:ud(n.getActorID()),versionVector:Zf(n.getVersionVector())})}function F(n){if(n)return new b({lamport:n.getLamport(),delimiter:n.getDelimiter(),actorId:ud(n.getActorID())})}function Zf(n){if(!n)return;const e=new Fl;for(const[t,r]of n)e.vector[t]=BigInt(r.toString());return e}function hy(n){switch(n){case ve.Null:return $.NULL;case ve.Boolean:return $.BOOLEAN;case ve.Integer:return $.INTEGER;case ve.Long:return $.LONG;case ve.Double:return $.DOUBLE;case ve.String:return $.STRING;case ve.Bytes:return $.BYTES;case ve.Date:return $.DATE;default:throw new k(S.ErrInvalidType,`unsupported type: ${n}`)}}function gy(n){switch(n){case on.IntegerCnt:return $.INTEGER_CNT;case on.LongCnt:return $.LONG_CNT;default:throw new k(S.ErrInvalidType,`unsupported type: ${n}`)}}function Tu(n){if(n instanceof He)return new ut({type:$.JSON_OBJECT,createdAt:F(n.getCreatedAt()),value:Cy(n)});if(n instanceof nt)return new ut({type:$.JSON_ARRAY,createdAt:F(n.getCreatedAt()),value:RS(n)});if(n instanceof Et)return new ut({type:$.TEXT,createdAt:F(n.getCreatedAt())});if(n instanceof re)return new ut({type:hy(n.getType()),createdAt:F(n.getCreatedAt()),value:n.toBytes()});if(n instanceof rt)return new ut({type:gy(n.getType()),createdAt:F(n.getCreatedAt()),value:n.toBytes()});if(n instanceof xt)return new ut({type:$.TREE,createdAt:F(n.getCreatedAt()),value:BS(n)});throw new k(S.ErrUnimplemented,"unimplemented element")}function nS(n){return new mo({createdAt:F(n.getCreatedAt()),offset:n.getOffset()})}function ea(n){return new Tr({createdAt:F(n.getID().getCreatedAt()),offset:n.getID().getOffset(),relativeOffset:n.getRelativeOffset()})}function ta(n){return new Ai({parentId:_s(n.getParentID()),leftSiblingId:_s(n.getLeftSiblingID())})}function _s(n){return new Kr({createdAt:F(n.getCreatedAt()),offset:n.getOffset()})}function my(n){const e=new Hf;if(n instanceof Ei){const t=n,r=new Ya;r.parentCreatedAt=F(t.getParentCreatedAt()),r.key=t.getKey(),r.value=Tu(t.getValue()),r.executedAt=F(t.getExecutedAt()),e.body.case="set",e.body.value=r}else if(n instanceof Do){const t=n,r=new Qa;r.parentCreatedAt=F(t.getParentCreatedAt()),r.prevCreatedAt=F(t.getPrevCreatedAt()),r.value=Tu(t.getValue()),r.executedAt=F(t.getExecutedAt()),e.body.case="add",e.body.value=r}else if(n instanceof Fr){const t=n,r=new Xa;r.parentCreatedAt=F(t.getParentCreatedAt()),r.prevCreatedAt=F(t.getPrevCreatedAt()),r.createdAt=F(t.getCreatedAt()),r.executedAt=F(t.getExecutedAt()),e.body.case="move",e.body.value=r}else if(n instanceof Xr){const t=n,r=new Za;r.parentCreatedAt=F(t.getParentCreatedAt()),r.createdAt=F(t.getCreatedAt()),r.executedAt=F(t.getExecutedAt()),e.body.case="remove",e.body.value=r}else if(n instanceof Oo){const t=n,r=new el;r.parentCreatedAt=F(t.getParentCreatedAt()),r.from=ea(t.getFromPos()),r.to=ea(t.getToPos());const i=r.createdAtMapByActor;for(const[o,a]of t.getMaxCreatedAtMapByActor())i[o]=F(a);r.content=t.getContent();const s=r.attributes;for(const[o,a]of t.getAttributes())s[o]=a;r.executedAt=F(t.getExecutedAt()),e.body.case="edit",e.body.value=r}else if(n instanceof Ro){const t=n,r=new tl;r.parentCreatedAt=F(t.getParentCreatedAt()),r.from=ea(t.getFromPos()),r.to=ea(t.getToPos());const i=r.createdAtMapByActor;for(const[o,a]of t.getMaxCreatedAtMapByActor())i[o]=F(a);const s=r.attributes;for(const[o,a]of t.getAttributes())s[o]=a;r.executedAt=F(t.getExecutedAt()),e.body.case="style",e.body.value=r}else if(n instanceof ps){const t=n,r=new nl;r.parentCreatedAt=F(t.getParentCreatedAt()),r.value=Tu(t.getValue()),r.executedAt=F(t.getExecutedAt()),e.body.case="increase",e.body.value=r}else if(n instanceof Lo){const t=n,r=new rl,i=r.createdAtMapByActor;for(const[s,o]of t.getMaxCreatedAtMapByActor())i[s]=F(o);r.parentCreatedAt=F(t.getParentCreatedAt()),r.from=ta(t.getFromPos()),r.to=ta(t.getToPos()),r.contents=uS(t.getContents()),r.splitLevel=t.getSplitLevel(),r.executedAt=F(t.getExecutedAt()),e.body.case="treeEdit",e.body.value=r}else if(n instanceof yr){const t=n,r=new il;r.parentCreatedAt=F(t.getParentCreatedAt()),r.from=ta(t.getFromPos()),r.to=ta(t.getToPos());const i=r.createdAtMapByActor;for(const[o,a]of t.getMaxCreatedAtMapByActor())i[o]=F(a);const s=t.getAttributesToRemove();if(s.length>0)r.attributesToRemove=s;else{const o=r.attributes;for(const[a,l]of t.getAttributes())o[a]=l}r.executedAt=F(t.getExecutedAt()),e.body.case="treeStyle",e.body.value=r}else throw new k(S.ErrUnimplemented,"unimplemented operation");return e}function rS(n){const e=[];for(const t of n)e.push(my(t));return e}function iS(n){const e=new Qp({id:dy(n.getID()),message:n.getMessage()});return n.hasOperations()&&(e.operations=rS(n.getOperations())),n.hasPresenceChange()&&(e.presenceChange=eS(n.getPresenceChange())),e}function sS(n){const e=[];for(const t of n)e.push(iS(t));return e}function oS(n){const e=[];for(const t of n)e.push(new Xp({key:t.getStrKey(),element:td(t.getValue())}));return e}function aS(n){const e=[];for(const t of n)e.push(new fl({element:td(t.getValue())}));return e}function lS(n){const e=[];for(const t of n){const r=new dl;r.id=nS(t.getID()),r.value=t.getValue().getContent(),r.removedAt=F(t.getRemovedAt());const i=r.attributes,s=t.getValue().getAttrs();for(const o of s){const a=new fs;a.value=o.getValue(),a.updatedAt=F(o.getUpdatedAt()),i[o.getKey()]=a}e.push(r)}return e}function uS(n){const e=[];if(!n||!n.length)return e;for(const t of n)e.push(new hl({content:ed(t)}));return e}function cS(n){const e={};for(const t of n)e[t.getKey()]=new fs({value:t.getValue(),updatedAt:F(t.getUpdatedAt()),isRemoved:t.isRemoved()});return e}function ed(n){if(!n)return[];const e=[];return Ml(n,(t,r)=>{const i=new po({id:_s(t.id),type:t.type,removedAt:F(t.removedAt),depth:r});t.isText&&(i.value=t.value),t.insPrevID&&(i.insPrevId=_s(t.insPrevID)),t.insNextID&&(i.insNextId=_s(t.insNextID)),t.attrs&&(i.attributes=cS(t.attrs)),e.push(i)}),e}function fS(n){const e=new _e;return e.body.case="jsonObject",e.body.value=new sl({nodes:oS(n.getRHT()),createdAt:F(n.getCreatedAt()),movedAt:F(n.getMovedAt()),removedAt:F(n.getRemovedAt())}),e}function py(n){const e=new _e;return e.body.case="jsonArray",e.body.value=new ol({nodes:aS(n.getElements()),createdAt:F(n.getCreatedAt()),movedAt:F(n.getMovedAt()),removedAt:F(n.getRemovedAt())}),e}function dS(n){const e=new _e;return e.body.case="primitive",e.body.value=new al({type:hy(n.getType()),value:n.toBytes(),createdAt:F(n.getCreatedAt()),movedAt:F(n.getMovedAt()),removedAt:F(n.getRemovedAt())}),e}function hS(n){const e=new _e;return e.body.case="text",e.body.value=new ll({nodes:lS(n.getRGATreeSplit()),createdAt:F(n.getCreatedAt()),movedAt:F(n.getMovedAt()),removedAt:F(n.getRemovedAt())}),e}function gS(n){const e=new _e;return e.body.case="counter",e.body.value=new ul({type:gy(n.getType()),value:n.toBytes(),createdAt:F(n.getCreatedAt()),movedAt:F(n.getMovedAt()),removedAt:F(n.getRemovedAt())}),e}function yy(n){const e=new _e;return e.body.case="tree",e.body.value=new cl({nodes:ed(n.getRoot()),createdAt:F(n.getCreatedAt()),movedAt:F(n.getMovedAt()),removedAt:F(n.getRemovedAt())}),e}function td(n){if(n instanceof He)return fS(n);if(n instanceof nt)return py(n);if(n instanceof re)return dS(n);if(n instanceof Et)return hS(n);if(n instanceof rt)return gS(n);if(n instanceof xt)return yy(n);throw new k(S.ErrUnimplemented,"unimplemented element")}function mS(n){return new Er({documentKey:n.getDocumentKey(),checkpoint:tS(n.getCheckpoint()),isRemoved:n.getIsRemoved(),changes:sS(n.getChanges()),snapshot:n.getSnapshot(),versionVector:Zf(n.getVersionVector()),minSyncedTicket:F(n.getMinSyncedTicket())})}function sg(n){const e=n.findDetails(O1);for(const t of e)if(t.metadata.code)return t.metadata.code;return""}function vy(n){return lr.of(n.clientSeq,BigInt(n.lamport),ad(n.actorId),nd(n.versionVector),BigInt(n.serverSeq))}function nd(n){if(!n)return;const e=new es;return Object.entries(n.vector).forEach(([t,r])=>{e.set(t,BigInt(r.toString()))}),e}function M(n){if(n)return tt.of(BigInt(n.lamport),n.delimiter,ad(n.actorId))}function rd(n){const e={};return Object.entries(n.data).forEach(([t,r])=>{e[t]=JSON.parse(r)}),e}function pS(n){const e=n.type;if(e===Ii.PUT){const t=rd(n.presence);return{type:Qr.Put,presence:t}}if(e===Ii.CLEAR)return{type:Qr.Clear};throw new k(S.ErrInvalidType,`unsupported type: ${e}`)}function yS(n){const e=new Map;return Object.entries(n).forEach(([t,r])=>{e.set(t,rd(r))}),e}function wy(n){switch(n){case $.NULL:return ve.Null;case $.BOOLEAN:return ve.Boolean;case $.INTEGER:return ve.Integer;case $.LONG:return ve.Long;case $.DOUBLE:return ve.Double;case $.STRING:return ve.String;case $.BYTES:return ve.Bytes;case $.DATE:return ve.Date}throw new k(S.ErrUnimplemented,`unimplemented value type: ${n}`)}function pl(n){switch(n){case $.INTEGER_CNT:return on.IntegerCnt;case $.LONG_CNT:return on.LongCnt}throw new k(S.ErrUnimplemented,`unimplemented value type: ${n}`)}function Au(n){switch(n.type){case $.JSON_OBJECT:return n.value?xy(n.value):He.create(M(n.createdAt));case $.JSON_ARRAY:return n.value?OS(n.value):nt.create(M(n.createdAt));case $.TEXT:return Et.create(ms.create(),M(n.createdAt));case $.TREE:return LS(n.value);case $.NULL:case $.BOOLEAN:case $.INTEGER:case $.LONG:case $.DOUBLE:case $.STRING:case $.BYTES:case $.DATE:return re.of(re.valueFromBytes(wy(n.type),n.value),M(n.createdAt));case $.INTEGER_CNT:case $.LONG_CNT:return rt.create(pl(n.type),rt.valueFromBytes(pl(n.type),n.value),M(n.createdAt))}}function na(n){return Mt.of(sn.of(M(n.createdAt),n.offset),n.relativeOffset)}function Sy(n){return sn.of(M(n.createdAt),n.offset)}function vS(n){const e=ko.create(n.value);Object.entries(n.attributes).forEach(([r,i])=>{e.setAttr(r,i.value,M(i.updatedAt))});const t=Hr.create(Sy(n.id),e);return t.remove(M(n.removedAt)),t}function Oi(n){return Lt.of(Gs(n.parentId),Gs(n.leftSiblingId))}function Gs(n){return Ee.of(M(n.createdAt),n.offset)}function wS(n){if(!n.length)return;const e=[];return n.forEach(t=>{const r=id(t.content);e.push(r)}),e}function id(n){if(n.length===0)return;const e=[];for(const i of n)e.push(kS(i));const t=e[e.length-1],r=new Map;r.set(n[e.length-1].depth,e[e.length-1]);for(let i=e.length-2;i>=0;i--)r.get(n[i].depth-1).prepend(e[i]),r.set(n[i].depth,e[i]);return t.updateDescendantsSize(),xt.create(t,Ft).getRoot()}function SS(n){const e=Ar.create();for(const[t,r]of Object.entries(n))e.setInternal(t,r.value,M(r.updatedAt),r.isRemoved);return e}function kS(n){const e=Gs(n.id),t=Ze.create(e,n.type),r=Object.entries(n.attributes);return t.isText?t.value=n.value:r.length&&(t.attrs=SS(n.attributes)),n.insPrevId&&(t.insPrevID=Gs(n.insPrevId)),n.insNextId&&(t.insNextID=Gs(n.insNextId)),t.removedAt=M(n.removedAt),t}function ky(n){if(n.body.case==="set"){const e=n.body.value;return Ei.create(e.key,Au(e.value),M(e.parentCreatedAt),M(e.executedAt))}else if(n.body.case==="add"){const e=n.body.value;return Do.create(M(e.parentCreatedAt),M(e.prevCreatedAt),Au(e.value),M(e.executedAt))}else if(n.body.case==="move"){const e=n.body.value;return Fr.create(M(e.parentCreatedAt),M(e.prevCreatedAt),M(e.createdAt),M(e.executedAt))}else if(n.body.case==="remove"){const e=n.body.value;return Xr.create(M(e.parentCreatedAt),M(e.createdAt),M(e.executedAt))}else if(n.body.case==="edit"){const e=n.body.value,t=new Map;Object.entries(e.createdAtMapByActor).forEach(([i,s])=>{t.set(i,M(s))});const r=new Map;return Object.entries(e.attributes).forEach(([i,s])=>{r.set(i,s)}),Oo.create(M(e.parentCreatedAt),na(e.from),na(e.to),t,e.content,r,M(e.executedAt))}else if(n.body.case==="style"){const e=n.body.value,t=new Map;Object.entries(e.createdAtMapByActor).forEach(([i,s])=>{t.set(i,M(s))});const r=new Map;return Object.entries(e.attributes).forEach(([i,s])=>{r.set(i,s)}),Ro.create(M(e.parentCreatedAt),na(e.from),na(e.to),t,r,M(e.executedAt))}else{if(n.body.case==="select")return;if(n.body.case==="increase"){const e=n.body.value;return ps.create(M(e.parentCreatedAt),Au(e.value),M(e.executedAt))}else if(n.body.case==="treeEdit"){const e=n.body.value,t=new Map;return Object.entries(e.createdAtMapByActor).forEach(([r,i])=>{t.set(r,M(i))}),Lo.create(M(e.parentCreatedAt),Oi(e.from),Oi(e.to),wS(e.contents),e.splitLevel,t,M(e.executedAt))}else if(n.body.case==="treeStyle"){const e=n.body.value,t=new Map,r=e.attributesToRemove,i=new Map;return e!=null&&e.createdAtMapByActor&&Object.entries(e.createdAtMapByActor).forEach(([s,o])=>{i.set(s,M(o))}),(r==null?void 0:r.length)>0?yr.createTreeRemoveStyleOperation(M(e.parentCreatedAt),Oi(e.from),Oi(e.to),i,r,M(e.executedAt)):(Object.entries(e.attributes).forEach(([s,o])=>{t.set(s,o)}),yr.create(M(e.parentCreatedAt),Oi(e.from),Oi(e.to),i,t,M(e.executedAt)))}else throw new k(S.ErrUnimplemented,"unimplemented operation")}}function TS(n){const e=[];for(const t of n){const r=ky(t);r&&e.push(r)}return e}function Ty(n){const e=[];for(const t of n)e.push(gs.create({id:vy(t.id),operations:TS(t.operations),presenceChange:t.presenceChange?pS(t.presenceChange):void 0,message:t.message}));return e}function AS(n){return ts.of(BigInt(n.serverSeq),n.clientSeq)}function IS(n){return Jl.create(n.documentKey,AS(n.checkpoint),n.isRemoved,Ty(n.changes),nd(n.versionVector),n.snapshot,M(n.minSyncedTicket))}function Ay(n){const e=new vo;for(const r of n.nodes){const i=sd(r.element);e.set(r.key,i,i.getPositionedAt())}const t=new He(M(n.createdAt),e);return t.setMovedAt(M(n.movedAt)),t.setRemovedAt(M(n.removedAt)),t}function Iy(n){const e=new So;for(const r of n.nodes)e.insert(sd(r.element));const t=new nt(M(n.createdAt),e);return t.setMovedAt(M(n.movedAt)),t.setRemovedAt(M(n.removedAt)),t}function ES(n){const e=re.of(re.valueFromBytes(wy(n.type),n.value),M(n.createdAt));return e.setMovedAt(M(n.movedAt)),e.setRemovedAt(M(n.removedAt)),e}function xS(n){const e=new ms;let t=e.getHead();for(const i of n.nodes){const s=e.insertAfter(t,vS(i));i.insPrevId&&s.setInsPrev(e.findNode(Sy(i.insPrevId))),t=s}const r=new Et(e,M(n.createdAt));return r.setMovedAt(M(n.movedAt)),r.setRemovedAt(M(n.removedAt)),r}function CS(n){const e=rt.create(pl(n.type),rt.valueFromBytes(pl(n.type),n.value),M(n.createdAt));return e.setMovedAt(M(n.movedAt)),e.setRemovedAt(M(n.removedAt)),e}function Ey(n){const e=id(n.nodes);return xt.create(e,M(n.createdAt))}function sd(n){if(n.body.case==="jsonObject")return Ay(n.body.value);if(n.body.case==="jsonArray")return Iy(n.body.value);if(n.body.case==="primitive")return ES(n.body.value);if(n.body.case==="text")return xS(n.body.value);if(n.body.case==="counter")return CS(n.body.value);if(n.body.case==="tree")return Ey(n.body.value);throw new k(S.ErrUnimplemented,"unimplemented element")}function NS(n){if(!n)return{root:He.create(Ft),presences:new Map};const e=Tc.fromBinary(n);return{root:sd(e.root),presences:yS(e.presences)}}function PS(n){const e=Zf(n);return od(e.toBinary())}function DS(n){const e=ld(n),t=Fl.fromBinary(e);return nd(t)}function xy(n){if(!n)throw new k(S.ErrInvalidArgument,"bytes is empty");const e=_e.fromBinary(n);return Ay(e.body.value)}function Cy(n){return td(n).toBinary()}function OS(n){if(!n)throw new k(S.ErrInvalidArgument,"bytes is empty");const e=_e.fromBinary(n);return Iy(e.body.value)}function RS(n){return py(n).toBinary()}function LS(n){if(!n)throw new k(S.ErrInvalidArgument,"bytes is empty");const e=_e.fromBinary(n);return Ey(e.body.value)}function BS(n){return yy(n).toBinary()}function od(n){return n?Array.from(n).map(e=>e.toString(16).padStart(2,"0")).join(""):""}function ad(n){return od(n)}function ld(n){return new Uint8Array(n.match(/.{1,2}/g).map(e=>parseInt(e,16)))}function ud(n){return ld(n)}function bS(n){const e=bl.fromBinary(n);return vy(e)}function FS(n){const e=Hf.fromBinary(n);return ky(e)}const fe={fromPresence:rd,toChangePack:mS,fromChangePack:IS,fromChanges:Ty,toTreeNodes:ed,fromTreeNodes:id,objectToBytes:Cy,bytesToObject:xy,bytesToSnapshot:NS,bytesToHex:od,hexToBytes:ld,toHexString:ad,toUint8Array:ud,toOperation:my,toChangeID:dy,PbChangeID:bl,bytesToChangeID:bS,bytesToOperation:FS,versionVectorToHex:PS,hexToVersionVector:DS};var be=(n=>(n[n.Trivial=0]="Trivial",n[n.Debug=1]="Debug",n[n.Info=2]="Info",n[n.Warn=3]="Warn",n[n.Error=4]="Error",n[n.Fatal=5]="Fatal",n))(be||{});let ai=3;function Ny(n){ai=n}const J={trivial:(...n)=>{ai>0||typeof console<"u"&&console.log("YORKIE T:",...n)},debug:(...n)=>{ai>1||typeof console<"u"&&console.log("YORKIE D:",...n)},info:(...n)=>{ai>2||typeof console<"u"&&console.log("YORKIE I:",...n)},warn:(...n)=>{ai>3||typeof console<"u"&&(typeof console.warn<"u"?console.warn("YORKIE W:",...n):console.log("YORKIE W:",...n))},error:(...n)=>{ai>4||typeof console<"u"&&(typeof console.error<"u"?console.error("YORKIE E:",...n):console.log("YORKIE E:",...n))},fatal:(...n)=>{typeof console<"u"&&(typeof console.error<"u"?console.error("YORKIE F:",...n):console.log("YORKIE F:",...n))},isEnabled:n=>ai<=n};function Py(){return"xxxxxxxx-xxxx-4xxxy-xxxx-xxxxxxxxxxx".replace(/[xy]/g,n=>{const e=Math.random()*16|0;return(n==="x"?e:e&3|8).toString(16)})}class MS{constructor(e,t,r,i,s){u(this,"reconnectStreamDelay");u(this,"doc");u(this,"docID");u(this,"syncMode");u(this,"remoteChangeEventReceived");u(this,"watchStream");u(this,"watchLoopTimerID");u(this,"watchAbortController");u(this,"unsubscribeBroadcastEvent");this.reconnectStreamDelay=e,this.doc=t,this.docID=r,this.syncMode=i,this.remoteChangeEventReceived=!1,this.unsubscribeBroadcastEvent=s}changeSyncMode(e){this.syncMode=e}needRealtimeSync(){return this.syncMode===Aa.RealtimeSyncOff?!1:this.syncMode===Aa.RealtimePushOnly?this.doc.hasLocalChanges():this.syncMode!==Aa.Manual&&(this.doc.hasLocalChanges()||this.remoteChangeEventReceived)}async runWatchLoop(e){const t=async()=>{if(this.watchStream)return Promise.resolve();this.watchLoopTimerID&&(clearTimeout(this.watchLoopTimerID),this.watchLoopTimerID=void 0);try{[this.watchStream,this.watchAbortController]=await e(()=>{this.watchStream=void 0,this.watchAbortController=void 0,this.watchLoopTimerID=setTimeout(t,this.reconnectStreamDelay)})}catch{}};await t()}cancelWatchStream(){this.watchStream&&this.watchAbortController&&(this.watchAbortController.abort(),this.watchStream=void 0,this.watchAbortController=void 0),clearTimeout(this.watchLoopTimerID),this.watchLoopTimerID=void 0}}const Iu=()=>{};class JS{constructor(e){u(this,"finalized",!1);u(this,"observers",[]);u(this,"finalError");try{e(this)}catch(t){this.error(t)}}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(!e)throw new k(S.ErrInvalidArgument,"missing observer");if(this.finalized)throw new k(S.ErrRefused,"observable is finalized due to previous error");typeof e=="object"?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Iu),i.error===void 0&&(i.error=Iu),i.complete===void 0&&(i.complete=Iu);const s=Py(),o=this.unsubscribeOne.bind(this,s);if(this.observers.push({subscriptionID:s,observer:i}),this.finalized)try{this.finalError?i.error(this.finalError):i.complete()}catch(a){J.warn(a)}return o}unsubscribeOne(e){var t;this.observers=(t=this.observers)==null?void 0:t.filter(r=>r.subscriptionID!==e)}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e].observer)}catch(r){J.error(r)}}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.observers=void 0)}}function $S(n){const e=new JS(n);return{subscribe:e.subscribe.bind(e),getProxy:()=>e}}class Wi{constructor(e,t,r,i){u(this,"id");u(this,"delimiter");u(this,"message");u(this,"root");u(this,"operations");u(this,"presenceChange");u(this,"previousPresence");u(this,"reversePresenceKeys");this.id=e,this.delimiter=ty,this.root=t,this.operations=[],this.previousPresence=Pt(r),this.presenceChange=void 0,this.reversePresenceKeys=new Set,this.message=i}static create(e,t,r,i){return new Wi(e,t,r,i)}push(e){this.operations.push(e)}registerElement(e,t){this.root.registerElement(e,t)}registerRemovedElement(e){this.root.registerRemovedElement(e)}registerGCPair(e){this.root.registerGCPair(e)}getChange(){return gs.create({id:this.id,operations:this.operations,presenceChange:this.presenceChange,message:this.message})}hasChange(){return this.operations.length>0||this.presenceChange!==void 0}setPresenceChange(e){this.presenceChange=e}setReversePresence(e,t){for(const r of Object.keys(e))t!=null&&t.addToHistory?this.reversePresenceKeys.add(r):this.reversePresenceKeys.delete(r)}getReversePresence(){if(this.reversePresenceKeys.size===0)return;const e={};for(const t of this.reversePresenceKeys)e[t]=this.previousPresence[t];return e}issueTimeTicket(){return this.delimiter+=1,this.id.createTimeTicket(this.delimiter)}getLastTimeTicket(){return this.id.createTimeTicket(this.delimiter)}}class To{constructor(e){u(this,"rootObject");u(this,"elementPairMapByCreatedAt");u(this,"gcElementSetByCreatedAt");u(this,"gcPairMap");this.rootObject=e,this.elementPairMapByCreatedAt=new Map,this.gcElementSetByCreatedAt=new Set,this.gcPairMap=new Map,this.registerElement(e,void 0),e.getDescendants(t=>{if(t.getRemovedAt()&&this.registerRemovedElement(t),t instanceof Et||t instanceof xt)for(const r of t.getGCPairs())this.registerGCPair(r);return!1})}static create(){return new To(He.create(Ft))}findByCreatedAt(e){const t=this.elementPairMapByCreatedAt.get(e.toIDString());if(t)return t.element}findElementPairByCreatedAt(e){return this.elementPairMapByCreatedAt.get(e.toIDString())}createSubPaths(e){let t=this.elementPairMapByCreatedAt.get(e.toIDString());if(!t)return[];const r=[];for(;t.parent;){const i=t.element.getCreatedAt(),s=t.parent.subPathOf(i);if(s===void 0)throw new k(S.ErrInvalidArgument,`cant find the given element: ${i.toIDString()}`);r.unshift(s),t=this.elementPairMapByCreatedAt.get(t.parent.getCreatedAt().toIDString())}return r.unshift("$"),r}createPath(e){return this.createSubPaths(e).join(".")}registerElement(e,t){this.elementPairMapByCreatedAt.set(e.getCreatedAt().toIDString(),{parent:t,element:e}),e instanceof Wr&&e.getDescendants((r,i)=>(this.registerElement(r,i),!1))}deregisterElement(e){let t=0;const r=i=>{const s=i.getCreatedAt().toIDString();this.elementPairMapByCreatedAt.delete(s),this.gcElementSetByCreatedAt.delete(s),t++};return r(e),e instanceof Wr&&e.getDescendants(i=>(r(i),!1)),t}registerRemovedElement(e){this.gcElementSetByCreatedAt.add(e.getCreatedAt().toIDString())}registerGCPair(e){if(this.gcPairMap.get(e.child.toIDString())){this.gcPairMap.delete(e.child.toIDString());return}this.gcPairMap.set(e.child.toIDString(),e)}getElementMapSize(){return this.elementPairMapByCreatedAt.size}getGarbageElementSetSize(){const e=new Set;for(const t of this.gcElementSetByCreatedAt){e.add(t);const r=this.elementPairMapByCreatedAt.get(t);r.element instanceof Wr&&r.element.getDescendants(i=>(e.add(i.getCreatedAt().toIDString()),!1))}return e.size}getObject(){return this.rootObject}getGarbageLen(){return this.getGarbageElementSetSize()+this.gcPairMap.size}deepcopy(){return new To(this.rootObject.deepcopy())}garbageCollect(e){let t=0;for(const r of this.gcElementSetByCreatedAt){const i=this.elementPairMapByCreatedAt.get(r),s=i.element.getRemovedAt();s&&(e!=null&&e.afterOrEqual(s))&&(i.parent.purge(i.element),t+=this.deregisterElement(i.element))}for(const[,r]of this.gcPairMap){const i=r.child.getRemovedAt();i&&(e!=null&&e.afterOrEqual(i))&&(r.parent.purge(r.child),this.gcPairMap.delete(r.child.toIDString()),t+=1)}return t}toJSON(){return this.rootObject.toJSON()}toSortedJSON(){return this.rootObject.toSortedJSON()}getStats(){return{elements:this.getElementMapSize(),gcPairs:this.gcPairMap.size,gcElements:this.getGarbageElementSetSize()}}}function Dy(n,e){const t=new Ao(n);return new Proxy(e,t.getHandlers())}class Ao{constructor(e){u(this,"context");u(this,"handlers");this.context=e,this.handlers={set:(t,r,i)=>(J.isEnabled(be.Trivial)&&J.trivial(`obj[${r}]=${JSON.stringify(i)}`),Ao.setInternal(e,t,r,i),!0),get:(t,r)=>(J.isEnabled(be.Trivial)&&J.trivial(`obj[${r}]`),r==="getID"?()=>t.getCreatedAt():r==="toJSON"||r==="toString"?()=>t.toJSON():r==="toJS"?()=>t.toJS():r==="toJSForTest"?()=>t.toJSForTest():li(e,t.get(r))),ownKeys:t=>t.getKeys(),getOwnPropertyDescriptor:()=>({enumerable:!0,configurable:!0}),deleteProperty:(t,r)=>(J.isEnabled(be.Trivial)&&J.trivial(`obj[${r}]`),Ao.deleteInternal(e,t,r),!0)}}static setInternal(e,t,r,i){if(r.includes("."))throw new k(S.ErrInvalidObjectKey,"key must not contain the '.'.");const s=e.issueTimeTicket(),o=yl(e,i,s),a=t.set(r,o,s);e.registerElement(o,t),a&&e.registerRemovedElement(a),e.push(Ei.create(r,o.deepcopy(),t.getCreatedAt(),s))}static buildObjectMembers(e,t){const r={};for(const[i,s]of Object.entries(t)){if(i.includes("."))throw new k(S.ErrInvalidObjectKey,"key must not contain the '.'.");const o=e.issueTimeTicket(),a=yl(e,s,o);r[i]=a}return r}static deleteInternal(e,t,r){const i=e.issueTimeTicket(),s=t.deleteByKey(r,i);s&&(e.push(Xr.create(t.getCreatedAt(),s.getCreatedAt(),i)),e.registerRemovedElement(s))}getHandlers(){return this.handlers}}function zS(n,e){const t=new oe(n,e);return new Proxy(e,t.getHandlers())}function US(n){return typeof n=="string"||n instanceof String?!isNaN(n):!1}function VS(n){return["concat","entries","every","filter","find","findIndex","forEach","join","keys","map","reduce","reduceRight","slice","some","toLocaleString","toString","values"].includes(n)}class oe{constructor(e,t){u(this,"context");u(this,"handlers");u(this,"array");this.context=e,this.array=t,this.handlers={get:(r,i,s)=>i==="getID"?()=>r.getCreatedAt():i==="getElementByID"?o=>{const a=r.getByID(o);if(!(!a||a.isRemoved()))return Nr(e,a)}:i==="getElementByIndex"?o=>{const a=r.get(o);return Nr(e,a)}:i==="getLast"?()=>Nr(e,r.getLast()):i==="deleteByID"?o=>{const a=oe.deleteInternalByID(e,r,o);return Nr(e,a)}:i==="insertAfter"?(o,a)=>{const l=oe.insertAfterInternal(e,r,o,a);return Nr(e,l)}:i==="insertBefore"?(o,a)=>{const l=oe.insertBeforeInternal(e,r,o,a);return Nr(e,l)}:i==="moveBefore"?(o,a)=>{oe.moveBeforeInternal(e,r,o,a)}:i==="moveAfter"?(o,a)=>{oe.moveAfterInternal(e,r,o,a)}:i==="moveFront"?o=>{oe.moveFrontInternal(e,r,o)}:i==="moveLast"?o=>{oe.moveLastInternal(e,r,o)}:US(i)?li(e,r.get(Number(i))):i==="push"?o=>oe.pushInternal(e,r,o):i==="splice"?(o,a,...l)=>oe.splice(e,r,o,a,...l):i==="length"?r.length:typeof i=="symbol"&&i===Symbol.iterator?oe.iteratorInternal.bind(this,e,r):i==="includes"?(o,a)=>oe.includes(e,r,o,a):i==="indexOf"?(o,a)=>oe.indexOf(e,r,o,a):i==="lastIndexOf"?(o,a)=>oe.lastIndexOf(e,r,o,a):i==="toJSForTest"?()=>r.toJSForTest():i==="toTestString"?()=>oe.toTestString(r):typeof i=="string"&&VS(i)?(...o)=>{const a=Array.from(r).map(l=>li(e,l));return Array.prototype[i].apply(a,o)}:Reflect.get(r,i,s),deleteProperty:(r,i)=>(J.isEnabled(be.Trivial)&&J.trivial(`array[${i}]`),oe.deleteInternalByIndex(e,r,Number.parseInt(i)),!0)}}static*iteratorInternal(e,t){for(const r of t)yield Nr(e,r)}static buildArrayElements(e,t){const r=[];for(const i of t){const s=e.issueTimeTicket(),o=yl(e,i,s);r.push(o)}return r}static pushInternal(e,t,r){return oe.insertAfterInternal(e,t,t.getLastCreatedAt(),r),t.length}static moveBeforeInternal(e,t,r,i){const s=e.issueTimeTicket(),o=t.getPrevCreatedAt(r);t.moveAfter(o,i,s),e.push(Fr.create(t.getCreatedAt(),o,i,s))}static moveAfterInternal(e,t,r,i){const s=e.issueTimeTicket();t.moveAfter(r,i,s),e.push(Fr.create(t.getCreatedAt(),r,i,s))}static moveFrontInternal(e,t,r){const i=e.issueTimeTicket(),s=t.getHead();t.moveAfter(s.getCreatedAt(),r,i),e.push(Fr.create(t.getCreatedAt(),s.getCreatedAt(),r,i))}static moveLastInternal(e,t,r){const i=e.issueTimeTicket(),s=t.getLastCreatedAt();t.moveAfter(s,r,i),e.push(Fr.create(t.getCreatedAt(),s,r,i))}static insertAfterInternal(e,t,r,i){const s=e.issueTimeTicket(),o=yl(e,i,s);return t.insertAfter(r,o),e.registerElement(o,t),e.push(Do.create(t.getCreatedAt(),r,o.deepcopy(),s)),o}static insertBeforeInternal(e,t,r,i){return oe.insertAfterInternal(e,t,t.getPrevCreatedAt(r),i)}static deleteInternalByIndex(e,t,r){const i=e.issueTimeTicket(),s=t.deleteByIndex(r,i);if(s)return e.push(Xr.create(t.getCreatedAt(),s.getCreatedAt(),i)),e.registerRemovedElement(s),s}static deleteInternalByID(e,t,r){const i=e.issueTimeTicket(),s=t.delete(r,i);return e.push(Xr.create(t.getCreatedAt(),s.getCreatedAt(),i)),e.registerRemovedElement(s),s}static splice(e,t,r,i,...s){const o=t.length,a=r>=0?Math.min(r,o):Math.max(o+r,0),l=i===void 0?o:i<0?a:Math.min(a+i,o),c=[];for(let d=a;d<l;d++){const h=oe.deleteInternalByIndex(e,t,a);if(h){const p=h.deepcopy();p.setRemovedAt(),c.push(li(e,p))}}if(s){let d=a===0?t.getHead().getID():t.get(a-1).getID();for(const h of s)d=oe.insertAfterInternal(e,t,d,h).getID()}return c}static includes(e,t,r,i){var a;const s=t.length,o=i===void 0?0:i<0?Math.max(i+s,0):i;if(o>=s)return!1;if(re.isSupport(r))return Array.from(t).map(c=>li(e,c)).includes(r,o);for(let l=o;l<s;l++)if(((a=t.get(l))==null?void 0:a.getID())===r.getID())return!0;return!1}static indexOf(e,t,r,i){var a;const s=t.length,o=i===void 0?0:i<0?Math.max(i+s,0):i;if(o>=s)return-1;if(re.isSupport(r))return Array.from(t).map(c=>li(e,c)).indexOf(r,o);for(let l=o;l<s;l++)if(((a=t.get(l))==null?void 0:a.getID())===r.getID())return l;return-1}static lastIndexOf(e,t,r,i){var a;const s=t.length,o=i===void 0||i>=s?s-1:i<0?i+s:i;if(o<0)return-1;if(re.isSupport(r))return Array.from(t).map(c=>li(e,c)).lastIndexOf(r,o);for(let l=o;l>0;l--)if(((a=t.get(l))==null?void 0:a.getID())===r.getID())return l;return-1}static toTestString(e){return e.toTestString()}getHandlers(){return this.handlers}}class $l{constructor(e,t){u(this,"context");u(this,"text");this.context=e,this.text=t}initialize(e,t){this.context=e,this.text=t}getID(){return this.text.getID()}edit(e,t,r,i){if(!this.context||!this.text)throw new k(S.ErrNotInitialized,"Text is not initialized yet");if(e>t)throw new k(S.ErrInvalidArgument,"from should be less than or equal to to");const s=this.text.indexRangeToPosRange(e,t);J.isEnabled(be.Debug)&&J.debug(`EDIT: f:${e}->${s[0].toTestString()}, t:${t}->${s[1].toTestString()} c:${r}`);const o=i?ds(i):void 0,a=this.context.issueTimeTicket(),[l,,c,d]=this.text.edit(s,r,a,o);for(const h of c)this.context.registerGCPair(h);return this.context.push(new Oo(this.text.getCreatedAt(),s[0],s[1],l,r,o?new Map(Object.entries(o)):new Map,a)),this.text.findIndexesFromRange(d)}delete(e,t){return this.edit(e,t,"")}empty(){return this.edit(0,this.length,"")}setStyle(e,t,r){if(!this.context||!this.text)throw new k(S.ErrNotInitialized,"Text is not initialized yet");if(e>t)throw new k(S.ErrInvalidArgument,"from should be less than or equal to to");const i=this.text.indexRangeToPosRange(e,t);J.isEnabled(be.Debug)&&J.debug(`STYL: f:${e}->${i[0].toTestString()}, t:${t}->${i[1].toTestString()} a:${JSON.stringify(r)}`);const s=ds(r),o=this.context.issueTimeTicket(),[a,l]=this.text.setStyle(i,s,o);for(const c of l)this.context.registerGCPair(c);return this.context.push(new Ro(this.text.getCreatedAt(),i[0],i[1],a,new Map(Object.entries(s)),o)),!0}indexRangeToPosRange(e){if(!this.context||!this.text)throw new k(S.ErrNotInitialized,"Text is not initialized yet");const t=this.text.indexRangeToPosRange(e[0],e[1]);return[t[0].toStruct(),t[1].toStruct()]}posRangeToIndexRange(e){if(!this.context||!this.text)throw new k(S.ErrNotInitialized,"Text is not initialized yet");const t=this.text.findIndexesFromRange([Mt.fromStruct(e[0]),Mt.fromStruct(e[1])]);return[t[0],t[1]]}toTestString(){if(!this.context||!this.text)throw new k(S.ErrNotInitialized,"Text is not initialized yet");return this.text.toTestString()}values(){if(!this.context||!this.text)throw new k(S.ErrNotInitialized,"Text is not initialized yet");return this.text.values()}get length(){return this.text.length}getTreeByIndex(){return this.text.getTreeByIndex()}getTreeByID(){return this.text.getTreeByID()}toString(){if(!this.context||!this.text)throw new k(S.ErrNotInitialized,"Text is not initialized yet");return this.text.toString()}toJSON(){if(!this.context||!this.text)throw new k(S.ErrNotInitialized,"Text is not initialized yet");return this.text.toJSON()}toJSForTest(){if(!this.context||!this.text)throw new k(S.ErrNotInitialized,"Text is not initialized yet");return this.text.toJSForTest()}createRangeForTest(e,t){if(!this.context||!this.text)throw new k(S.ErrNotInitialized,"Text is not initialized yet");return this.text.indexRangeToPosRange(e,t)}}class zl{constructor(e,t){u(this,"valueType");u(this,"value");u(this,"context");u(this,"counter");this.valueType=e,this.value=t}initialize(e,t){this.valueType=t.getValueType(),this.context=e,this.counter=t,this.value=t.getValue()}getID(){return this.counter.getID()}getValue(){return this.value}getValueType(){return this.valueType}increase(e){if(!this.context||!this.counter)throw new k(S.ErrNotInitialized,"Counter is not initialized yet");const t=this.context.issueTimeTicket(),r=re.of(e,t);if(!r.isNumericType())throw new TypeError(`Unsupported type of value: ${typeof r.getValue()}`);return this.counter.increase(r),this.context.push(ps.create(this.counter.getCreatedAt(),r,t)),this}toJSForTest(){if(!this.context||!this.counter)throw new k(S.ErrNotInitialized,"Counter is not initialized yet");return this.counter.toJSForTest()}}function cd(n,e,t){const{type:r}=n,i=t.issueTimeTicket();if(r===pr){Oy(n);const{value:s}=n,o=Ze.create(Ee.of(i,0),r,s);e.append(o)}else{const{children:s=[]}=n,{attributes:o}=n;let a;if(typeof o=="object"&&!ey(o)){const c=ds(o);a=new Ar;for(const[d,h]of Object.entries(c))a.set(d,h,i)}const l=Ze.create(Ee.of(i,0),r,void 0,a);e.append(l);for(const c of s)cd(c,l,t)}}function jS(n,e){const{type:t}=e,r=n.issueTimeTicket();let i;if(e.type===pr){const{value:s}=e;i=Ze.create(Ee.of(r,0),t,s)}else if(e){const{children:s=[]}=e,{attributes:o}=e;let a;if(typeof o=="object"&&!ey(o)){const l=ds(o);a=new Ar;for(const[c,d]of Object.entries(l))a.set(c,d,r)}i=Ze.create(Ee.of(n.issueTimeTicket(),0),t,void 0,a);for(const l of s)cd(l,i,n)}return i}function Oy(n){if(!n.value.length)throw new k(S.ErrInvalidArgument,"text node cannot have empty value");return!0}function og(n){if(!n.length)return!0;if(n[0].type===pr)for(const t of n){const{type:r}=t;if(r!==pr)throw new k(S.ErrInvalidArgument,"element node and text node cannot be passed together");Oy(t)}else for(const t of n){const{type:r}=t;if(r===pr)throw new k(S.ErrInvalidArgument,"element node and text node cannot be passed together")}return!0}class Ul{constructor(e){u(this,"initialRoot");u(this,"context");u(this,"tree");this.initialRoot=e}initialize(e,t){this.context=e,this.tree=t}getID(){return this.tree.getID()}buildRoot(e){if(!this.initialRoot)return Ze.create(Ee.of(e.issueTimeTicket(),0),U1);const t=Ze.create(Ee.of(e.issueTimeTicket(),0),this.initialRoot.type);for(const r of this.initialRoot.children)cd(r,t,e);return t}getSize(){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getSize()}getNodeSize(){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getNodeSize()}getIndexTree(){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getIndexTree()}styleByPath(e,t){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");if(!e.length)throw new k(S.ErrInvalidArgument,"path should not be empty");const[r,i]=this.tree.pathToPosRange(e),s=this.context.issueTimeTicket(),o=t?ds(t):void 0,[a]=this.tree.style([r,i],o,s);this.context.push(yr.create(this.tree.getCreatedAt(),r,i,a,o?new Map(Object.entries(o)):new Map,s))}style(e,t,r){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");if(e>t)throw new k(S.ErrInvalidArgument,"from should be less than or equal to to");const i=this.tree.findPos(e),s=this.tree.findPos(t),o=this.context.issueTimeTicket(),a=r?ds(r):void 0,[l,c]=this.tree.style([i,s],a,o);for(const d of c)this.context.registerGCPair(d);this.context.push(yr.create(this.tree.getCreatedAt(),i,s,l,a?new Map(Object.entries(a)):new Map,o))}removeStyle(e,t,r){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");if(e>t)throw new k(S.ErrInvalidArgument,"from should be less than or equal to to");const i=this.tree.findPos(e),s=this.tree.findPos(t),o=this.context.issueTimeTicket(),[a,l]=this.tree.removeStyle([i,s],r,o);for(const c of l)this.context.registerGCPair(c);this.context.push(yr.createTreeRemoveStyleOperation(this.tree.getCreatedAt(),i,s,a,r,o))}editInternal(e,t,r,i=0){var c;if(r.length!==0&&r[0]&&(og(r),r[0].type!==pr))for(const d of r){const{children:h=[]}=d;og(h)}const s=this.context.getLastTimeTicket();let o=new Array;if(((c=r[0])==null?void 0:c.type)===pr){let d="";for(const h of r){const{value:p}=h;d+=p}o.push(Ze.create(Ee.of(this.context.issueTimeTicket(),0),pr,d))}else o=r.map(d=>d&&jS(this.context,d)).filter(d=>d);const[,a,l]=this.tree.edit([e,t],o.length?o.map(d=>d==null?void 0:d.deepcopy()):void 0,i,s,()=>this.context.issueTimeTicket());for(const d of a)this.context.registerGCPair(d);return this.context.push(Lo.create(this.tree.getCreatedAt(),e,t,o.length?o:void 0,i,l,s)),!0}editByPath(e,t,r,i=0){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");if(e.length!==t.length)throw new k(S.ErrInvalidArgument,"path length should be equal");if(!e.length||!t.length)throw new k(S.ErrInvalidArgument,"path should not be empty");const s=this.tree.pathToPos(e),o=this.tree.pathToPos(t);return this.editInternal(s,o,r?[r]:[],i)}editBulkByPath(e,t,r,i=0){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");if(e.length!==t.length)throw new k(S.ErrInvalidArgument,"path length should be equal");if(!e.length||!t.length)throw new k(S.ErrInvalidArgument,"path should not be empty");const s=this.tree.pathToPos(e),o=this.tree.pathToPos(t);return this.editInternal(s,o,r,i)}edit(e,t,r,i=0){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");if(e>t)throw new k(S.ErrInvalidArgument,"from should be less than or equal to to");const s=this.tree.findPos(e),o=this.tree.findPos(t);return this.editInternal(s,o,r?[r]:[],i)}editBulk(e,t,r,i=0){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");if(e>t)throw new k(S.ErrInvalidArgument,"from should be less than or equal to to");const s=this.tree.findPos(e),o=this.tree.findPos(t);return this.editInternal(s,o,r,i)}toXML(){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toXML()}toJSON(){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toJSON()}toJSForTest(){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toJSForTest()}toJSInfoForTest(){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toJSInfoForTest()}getRootTreeNode(){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getRootTreeNode()}indexToPath(e){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");return this.tree.indexToPath(e)}pathToIndex(e){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");return this.tree.pathToIndex(e)}pathRangeToPosRange(e){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");const t=[this.tree.pathToIndex(e[0]),this.tree.pathToIndex(e[1])],r=this.tree.indexRangeToPosRange(t);return[r[0].toStruct(),r[1].toStruct()]}indexRangeToPosRange(e){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");return this.tree.indexRangeToPosStructRange(e)}posRangeToIndexRange(e){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");const t=[Lt.fromStruct(e[0]),Lt.fromStruct(e[1])];return this.tree.posRangeToIndexRange(t)}posRangeToPathRange(e){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");const t=[Lt.fromStruct(e[0]),Lt.fromStruct(e[1])];return this.tree.posRangeToPathRange(t)}}function ag(n,e){return Dy(n,e)}function Nr(n,e){if(e){if(e instanceof re)return e;if(e instanceof He)return Dy(n,e);if(e instanceof nt)return zS(n,e);if(e instanceof Et)return new $l(n,e);if(e instanceof rt){const t=new zl(on.IntegerCnt,0);return t.initialize(n,e),t}else if(e instanceof xt){const t=new Ul;return t.initialize(n,e),t}}else return;throw new TypeError(`Unsupported type of element: ${typeof e}`)}function li(n,e){const t=Nr(n,e);return t instanceof re?t.getValue():t}function yl(n,e,t){let r;if(re.isSupport(e))r=re.of(e,t);else if(Array.isArray(e))r=nt.create(t,oe.buildArrayElements(n,e));else if(typeof e=="object")e instanceof $l?(r=Et.create(ms.create(),t),e.initialize(n,r)):e instanceof zl?(r=rt.create(e.getValueType(),e.getValue(),t),e.initialize(n,r)):e instanceof Ul?(r=xt.create(e.buildRoot(n),t),e.initialize(n,r)):r=He.create(t,Ao.buildObjectMembers(n,e));else throw new TypeError(`Unsupported type of value: ${typeof e}`);return r}const lg=50;class qS{constructor(){u(this,"undoStack",[]);u(this,"redoStack",[])}hasUndo(){return this.undoStack.length>0}hasRedo(){return this.redoStack.length>0}pushUndo(e){this.undoStack.length>=lg&&this.undoStack.shift(),this.undoStack.push(e)}popUndo(){return this.undoStack.pop()}pushRedo(e){this.redoStack.length>=lg&&this.redoStack.shift(),this.redoStack.push(e)}popRedo(){return this.redoStack.pop()}clearRedo(){this.redoStack=[]}getUndoStackForTest(){return this.undoStack}getRedoStackForTest(){return this.redoStack}}const KS="yorkie-devtools-panel",WS="yorkie-devtools-sdk";let Ri="disconnected";const ug=new Map,Ta=new Map;typeof window<"u"&&(window.transactionEventsByDocKey=Ta);function ra(n,e){(e!=null&&e.force||Ri!=="disconnected")&&window.postMessage({source:WS,...n},"*")}function HS(n){if(!n.isEnableDevtools()||typeof window>"u"||ug.has(n.getKey()))return;Ta.set(n.getKey(),[]);const e=n.subscribe("all",t=>{t.some(r=>r.type!==$e.StatusChanged&&r.type!==$e.Snapshot&&r.type!==$e.LocalChange&&r.type!==$e.RemoteChange&&r.type!==$e.Initialized&&r.type!==$e.Watched&&r.type!==$e.Unwatched&&r.type!==$e.PresenceChanged)||(Ta.get(n.getKey()).push(t),Ri==="synced"&&ra({msg:"doc::sync::partial",docKey:n.getKey(),event:t}))});ug.set(n.getKey(),[e]),ra({msg:"refresh-devtools"},{force:!0}),window.addEventListener("message",t=>{var i;if(((i=t.data)==null?void 0:i.source)!==KS)return;switch(t.data.msg){case"devtools::connect":if(Ri!=="disconnected")break;Ri="connected",ra({msg:"doc::available",docKey:n.getKey()}),J.info(`[YD] Devtools connected. Doc: ${n.getKey()}`);break;case"devtools::disconnect":Ri="disconnected",J.info(`[YD] Devtools disconnected. Doc: ${n.getKey()}`);break;case"devtools::subscribe":Ri="synced",ra({msg:"doc::sync::full",docKey:n.getKey(),events:Ta.get(n.getKey())}),J.info(`[YD] Devtools subscribed. Doc: ${n.getKey()}`);break}})}var Pr=(n=>(n.Detached="detached",n.Attached="attached",n.Removed="removed",n))(Pr||{}),$e=(n=>(n.StatusChanged="status-changed",n.ConnectionChanged="connection-changed",n.SyncStatusChanged="sync-status-changed",n.Snapshot="snapshot",n.LocalChange="local-change",n.RemoteChange="remote-change",n.Initialized="initialized",n.Watched="watched",n.Unwatched="unwatched",n.PresenceChanged="presence-changed",n.Broadcast="broadcast",n.LocalBroadcast="local-broadcast",n))($e||{}),_c=(n=>(n.Connected="connected",n.Disconnected="disconnected",n))(_c||{}),Gc=(n=>(n.Synced="synced",n.SyncFailed="sync-failed",n))(Gc||{});class Ry{constructor(e,t){u(this,"key");u(this,"status");u(this,"opts");u(this,"changeID");u(this,"checkpoint");u(this,"localChanges");u(this,"root");u(this,"clone");u(this,"eventStream");u(this,"eventStreamObserver");u(this,"onlineClients");u(this,"presences");u(this,"history");u(this,"internalHistory");u(this,"isUpdating");this.opts=t||{},this.key=e,this.status="detached",this.root=To.create(),this.changeID=Y1,this.checkpoint=Q1,this.localChanges=[],this.eventStream=$S(r=>{this.eventStreamObserver=r}),this.onlineClients=new Set,this.presences=new Map,this.isUpdating=!1,this.internalHistory=new qS,this.history={canUndo:this.canUndo.bind(this),canRedo:this.canRedo.bind(this),undo:this.undo.bind(this),redo:this.redo.bind(this)},HS(this)}update(e,t){if(this.getStatus()==="removed")throw new k(S.ErrDocumentRemoved,`${this.key} is removed`);this.ensureClone();const r=this.changeID.getActorID(),i=Wi.create(this.changeID.next(),this.clone.root,this.clone.presences.get(r)||{},t);try{const s=ag(i,this.clone.root.getObject());this.presences.has(r)||this.clone.presences.set(r,{}),this.isUpdating=!0,e(s,new ku(i,this.clone.presences.get(r)))}catch(s){throw this.clone=void 0,s}finally{this.isUpdating=!1}if(i.hasChange()){J.isEnabled(be.Trivial)&&J.trivial(`trying to update a local change: ${this.toJSON()}`);const s=i.getChange(),{opInfos:o,reverseOps:a}=s.execute(this.root,this.presences,Y.Local),l=i.getReversePresence();l&&a.push({type:"presence",value:l}),this.localChanges.push(s),a.length>0&&this.internalHistory.pushUndo(a),o.length>0&&this.internalHistory.clearRedo(),this.changeID=s.getID();const c=[];o.length>0&&c.push({type:"local-change",source:Y.Local,value:{message:s.getMessage()||"",operations:o,actor:r,clientSeq:s.getID().getClientSeq(),serverSeq:s.getID().getServerSeq()},rawChange:this.isEnableDevtools()?s.toStruct():void 0}),s.hasPresenceChange()&&c.push({type:"presence-changed",source:Y.Local,value:{clientID:r,presence:this.getPresence(r)}}),this.publish(c),J.isEnabled(be.Trivial)&&J.trivial(`after update a local change: ${this.toJSON()}`)}}subscribe(e,t,r,i){if(typeof e=="string"){if(typeof t!="function")throw new k(S.ErrInvalidArgument,"Second argument must be a callback function");if(e==="presence"){const a=t;return this.eventStream.subscribe(l=>{for(const c of l)c.type!=="initialized"&&c.type!=="watched"&&c.type!=="unwatched"&&c.type!=="presence-changed"||a(c)},r,i)}if(e==="my-presence"){const a=t;return this.eventStream.subscribe(l=>{for(const c of l)c.type!=="initialized"&&c.type!=="presence-changed"||c.type==="presence-changed"&&c.value.clientID!==this.changeID.getActorID()||a(c)},r,i)}if(e==="others"){const a=t;return this.eventStream.subscribe(l=>{for(const c of l)c.type!=="watched"&&c.type!=="unwatched"&&c.type!=="presence-changed"||c.value.clientID!==this.changeID.getActorID()&&a(c)},r,i)}if(e==="connection"){const a=t;return this.eventStream.subscribe(l=>{for(const c of l)c.type==="connection-changed"&&a(c)},r,i)}if(e==="status"){const a=t;return this.eventStream.subscribe(l=>{for(const c of l)c.type==="status-changed"&&a(c)},r,i)}if(e==="sync"){const a=t;return this.eventStream.subscribe(l=>{for(const c of l)c.type==="sync-status-changed"&&a(c)},r,i)}if(e==="local-broadcast"){const a=t;return this.eventStream.subscribe(l=>{for(const c of l)c.type==="local-broadcast"&&a(c)},r)}if(e==="broadcast"){const a=t;return this.eventStream.subscribe(l=>{for(const c of l)c.type==="broadcast"&&a(c)},r)}if(e==="all"){const a=t;return this.eventStream.subscribe(a,r,i)}const s=e,o=t;return this.eventStream.subscribe(a=>{for(const l of a){if(l.type!=="local-change"&&l.type!=="remote-change")continue;const c=[];for(const d of l.value.operations)this.isSameElementOrChildOf(d.path,s)&&c.push(d);c.length&&o({...l,value:{...l.value,operations:c}})}},r,i)}if(typeof e=="function"){const s=e,o=t,a=r;return this.eventStream.subscribe(l=>{for(const c of l)c.type!=="snapshot"&&c.type!=="local-change"&&c.type!=="remote-change"||s(c)},o,a)}throw new k(S.ErrInvalidArgument,`"${e}" is not a valid`)}publish(e){this.eventStreamObserver&&this.eventStreamObserver.next(e)}isSameElementOrChildOf(e,t){if(t===e)return!0;const r=e.split(".");return t.split(".").every((s,o)=>s===r[o])}applyChangePack(e){const t=e.hasSnapshot();for(t?this.applySnapshot(e.getCheckpoint().getServerSeq(),e.getVersionVector(),e.getSnapshot()):e.hasChanges()&&this.applyChanges(e.getChanges(),Y.Remote);this.localChanges.length&&!(this.localChanges[0].getID().getClientSeq()>e.getCheckpoint().getClientSeq());)this.localChanges.shift();t&&this.applyChanges(this.localChanges,Y.Remote),this.checkpoint=this.checkpoint.forward(e.getCheckpoint()),t||this.garbageCollect(e.getVersionVector()),t||this.filterVersionVector(e.getVersionVector()),e.getIsRemoved()&&this.applyStatus("removed"),J.isEnabled(be.Trivial)&&J.trivial(`${this.root.toJSON()}`)}getCheckpoint(){return this.checkpoint}getChangeID(){return this.changeID}hasLocalChanges(){return this.localChanges.length>0}ensureClone(){this.clone||(this.clone={root:this.root.deepcopy(),presences:Pt(this.presences)})}createChangePack(){const e=Array.from(this.localChanges),t=this.checkpoint.increaseClientSeq(e.length);return Jl.create(this.key,t,!1,e,this.getVersionVector())}setActor(e){for(const t of this.localChanges)t.setActor(e);this.changeID=this.changeID.setActor(e)}isEnableDevtools(){return!!this.opts.enableDevtools}getKey(){return this.key}getStatus(){return this.status}getCloneRoot(){if(this.clone)return this.clone.root.getObject()}getRoot(){this.ensureClone();const e=Wi.create(this.changeID.next(),this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});return ag(e,this.clone.root.getObject())}garbageCollect(e){return this.opts.disableGC?0:(this.clone&&this.clone.root.garbageCollect(e),this.root.garbageCollect(e))}getRootObject(){return this.root.getObject()}getGarbageLen(){return this.root.getGarbageLen()}getGarbageLenFromClone(){return this.clone.root.getGarbageLen()}toJSON(){return this.root.toJSON()}toSortedJSON(){return this.root.toSortedJSON()}getStats(){return this.root.getStats()}toJSForTest(){return{...this.getRoot().toJSForTest(),key:"root"}}applySnapshot(e,t,r){const{root:i,presences:s}=fe.bytesToSnapshot(r);this.root=new To(i),this.presences=s,this.changeID=this.changeID.setClocks(e,t),this.clone=void 0,this.publish([{type:"snapshot",source:Y.Remote,value:{serverSeq:e.toString(),snapshot:this.isEnableDevtools()?fe.bytesToHex(r):void 0,snapshotVector:fe.versionVectorToHex(t)}}])}applyChanges(e,t){J.isEnabled(be.Debug)&&J.debug(`trying to apply ${e.length} remote changes.elements:${this.root.getElementMapSize()}, removeds:${this.root.getGarbageElementSetSize()}`),J.isEnabled(be.Trivial)&&J.trivial(e.map(r=>`${r.getID().toTestString()}	${r.toTestString()}`).join(`
`));for(const r of e)this.applyChange(r,t);J.isEnabled(be.Debug)&&J.debug(`after appling ${e.length} remote changes.elements:${this.root.getElementMapSize()},  removeds:${this.root.getGarbageElementSetSize()}`)}applyChange(e,t){this.ensureClone(),e.execute(this.clone.root,this.clone.presences,t);const r=[],i=e.getID().getActorID();if(e.hasPresenceChange()&&this.onlineClients.has(i)){const o=e.getPresenceChange();switch(o.type){case Qr.Put:r.push(this.presences.has(i)?{type:"presence-changed",source:t,value:{clientID:i,presence:o.presence}}:{type:"watched",source:Y.Remote,value:{clientID:i,presence:o.presence}});break;case Qr.Clear:r.push({type:"unwatched",source:Y.Remote,value:{clientID:i,presence:this.getPresence(i)}}),this.removeOnlineClient(i);break}}const{opInfos:s}=e.execute(this.root,this.presences,t);if(this.changeID=this.changeID.syncClocks(e.getID()),s.length>0){const o=this.isEnableDevtools()?e.toStruct():void 0;r.push(t===Y.Remote?{type:"remote-change",source:t,value:{actor:i,clientSeq:e.getID().getClientSeq(),serverSeq:e.getID().getServerSeq(),message:e.getMessage()||"",operations:s},rawChange:o}:{type:"local-change",source:t,value:{actor:i,clientSeq:e.getID().getClientSeq(),serverSeq:e.getID().getServerSeq(),message:e.getMessage()||"",operations:s},rawChange:o})}r.length>0&&this.publish(r)}applyWatchStream(e){if(e.body.case==="initialization"){const t=e.body.value.clientIds,r=new Set;for(const i of t)i!==this.changeID.getActorID()&&r.add(i);this.setOnlineClients(r),this.publish([{type:"initialized",source:Y.Local,value:this.getPresences()}]);return}if(e.body.case==="event"){const{type:t,publisher:r}=e.body.value,i=[];if(t===yi.DOCUMENT_WATCHED){if(this.onlineClients.has(r)&&this.hasPresence(r))return;this.addOnlineClient(r),this.hasPresence(r)&&i.push({type:"watched",source:Y.Remote,value:{clientID:r,presence:this.getPresence(r)}})}else if(t===yi.DOCUMENT_UNWATCHED){const s=this.getPresence(r);this.removeOnlineClient(r),s&&i.push({type:"unwatched",source:Y.Remote,value:{clientID:r,presence:s}})}else if(t===yi.DOCUMENT_BROADCAST&&e.body.value.body){const{topic:s,payload:o}=e.body.value.body,a=new TextDecoder;i.push({type:"broadcast",value:{clientID:r,topic:s,payload:JSON.parse(a.decode(o))}})}i.length>0&&this.publish(i)}}applyStatus(e){this.status=e,e==="detached"&&this.setActor(Gf),this.publish([{source:e==="removed"?Y.Remote:Y.Local,type:"status-changed",value:e==="attached"?{status:e,actorID:this.changeID.getActorID()}:{status:e}}])}applyDocEvent(e){if(e.type==="status-changed"){this.applyStatus(e.value.status),e.value.status==="attached"&&this.setActor(e.value.actorID);return}if(e.type==="snapshot"){const{snapshot:t,serverSeq:r,snapshotVector:i}=e.value;if(!t)return;this.applySnapshot(BigInt(r),fe.hexToVersionVector(i),fe.hexToBytes(t));return}if(e.type==="local-change"||e.type==="remote-change"){if(!e.rawChange)return;const t=gs.fromStruct(e.rawChange);this.applyChange(t,e.source)}if(e.type==="initialized"){const t=new Set;for(const{clientID:r,presence:i}of e.value)t.add(r),this.presences.set(r,i);this.setOnlineClients(t);return}if(e.type==="watched"){const{clientID:t,presence:r}=e.value;this.addOnlineClient(t),this.presences.set(t,r);return}if(e.type==="unwatched"){const{clientID:t}=e.value;this.removeOnlineClient(t),this.presences.delete(t)}if(e.type==="presence-changed"){const{clientID:t,presence:r}=e.value;this.presences.set(t,r)}}applyTransactionEvent(e){for(const t of e)this.applyDocEvent(t)}getValueByPath(e){if(!e.startsWith("$"))throw new k(S.ErrInvalidArgument,'path must start with "$"');const t=e.split(".");t.shift();let r=this.getRoot();for(const i of t)if(r=r[i],r===void 0)return;return r}setOnlineClients(e){this.onlineClients=e}resetOnlineClients(){this.onlineClients=new Set}addOnlineClient(e){this.onlineClients.add(e)}removeOnlineClient(e){this.onlineClients.delete(e)}hasPresence(e){return this.presences.has(e)}getMyPresence(){if(this.status!=="attached")return{};const e=this.presences.get(this.changeID.getActorID());return e?Pt(e):{}}getPresence(e){if(e===this.changeID.getActorID())return this.getMyPresence();if(!this.onlineClients.has(e))return;const t=this.presences.get(e);return t?Pt(t):void 0}getPresenceForTest(e){const t=this.presences.get(e);return t?Pt(t):void 0}getPresences(){const e=[];e.push({clientID:this.changeID.getActorID(),presence:Pt(this.getMyPresence())});for(const t of this.onlineClients)this.presences.has(t)&&e.push({clientID:t,presence:Pt(this.presences.get(t))});return e}getSelfForTest(){return{clientID:this.getChangeID().getActorID(),presence:this.getMyPresence()}}getOthersForTest(){const e=this.getChangeID().getActorID();return this.getPresences().filter(t=>t.clientID!==e).sort((t,r)=>t.clientID>r.clientID?1:-1)}canUndo(){return this.internalHistory.hasUndo()&&!this.isUpdating}filterVersionVector(e){const r=this.changeID.getVersionVector().filter(e);this.changeID=this.changeID.setVersionVector(r)}canRedo(){return this.internalHistory.hasRedo()&&!this.isUpdating}undo(){if(this.isUpdating)throw new k(S.ErrRefused,"Undo is not allowed during an update");const e=this.internalHistory.popUndo();if(e===void 0)throw new k(S.ErrRefused,"There is no operation to be undone");this.ensureClone();const t=Wi.create(this.changeID.next(),this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});for(const c of e){if(!(c instanceof $t)){new ku(t,Pt(this.clone.presences.get(this.changeID.getActorID()))).set(c.value,{addToHistory:!0});continue}const d=t.issueTimeTicket();c.setExecutedAt(d),t.push(c)}const r=t.getChange();r.execute(this.clone.root,this.clone.presences,Y.UndoRedo);const{opInfos:i,reverseOps:s}=r.execute(this.root,this.presences,Y.UndoRedo),o=t.getReversePresence();if(o&&s.push({type:"presence",value:o}),s.length>0&&this.internalHistory.pushRedo(s),!r.hasPresenceChange()&&i.length===0)return;this.localChanges.push(r),this.changeID=r.getID();const a=this.changeID.getActorID(),l=[];i.length>0&&l.push({type:"local-change",source:Y.UndoRedo,value:{message:r.getMessage()||"",operations:i,actor:a,clientSeq:r.getID().getClientSeq(),serverSeq:r.getID().getServerSeq()},rawChange:this.isEnableDevtools()?r.toStruct():void 0}),r.hasPresenceChange()&&l.push({type:"presence-changed",source:Y.UndoRedo,value:{clientID:a,presence:this.getPresence(a)}}),this.publish(l)}redo(){if(this.isUpdating)throw new k(S.ErrRefused,"Redo is not allowed during an update");const e=this.internalHistory.popRedo();if(e===void 0)throw new k(S.ErrRefused,"There is no operation to be redone");this.ensureClone();const t=Wi.create(this.changeID.next(),this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});for(const c of e){if(!(c instanceof $t)){new ku(t,Pt(this.clone.presences.get(this.changeID.getActorID()))).set(c.value,{addToHistory:!0});continue}const d=t.issueTimeTicket();c.setExecutedAt(d),t.push(c)}const r=t.getChange();r.execute(this.clone.root,this.clone.presences,Y.UndoRedo);const{opInfos:i,reverseOps:s}=r.execute(this.root,this.presences,Y.UndoRedo),o=t.getReversePresence();if(o&&s.push({type:"presence",value:o}),s.length>0&&this.internalHistory.pushUndo(s),!r.hasPresenceChange()&&i.length===0)return;this.localChanges.push(r),this.changeID=r.getID();const a=this.changeID.getActorID(),l=[];i.length>0&&l.push({type:"local-change",source:Y.UndoRedo,value:{message:r.getMessage()||"",operations:i,actor:a,clientSeq:r.getID().getClientSeq(),serverSeq:r.getID().getServerSeq()},rawChange:this.isEnableDevtools()?r.toStruct():void 0}),r.hasPresenceChange()&&l.push({type:"presence-changed",source:Y.UndoRedo,value:{clientID:a,presence:this.getPresence(a)}}),this.publish(l)}getUndoStackForTest(){return this.internalHistory.getUndoStackForTest()}getRedoStackForTest(){return this.internalHistory.getRedoStackForTest()}broadcast(e,t,r){const i={type:"local-broadcast",value:{topic:e,payload:t},options:r};this.publish([i])}getVersionVector(){return this.changeID.getVersionVector()}}function _S(n,e){return t=>async r=>(n&&r.header.set("x-api-key",n),e&&r.header.set("authorization",e),await t(r))}const GS="yorkie-js-sdk",YS="0.5.4",QS="Yorkie JS SDK",XS="./src/yorkie.ts",ZS={access:"public",main:"./dist/yorkie-js-sdk.js",typings:"./dist/yorkie-js-sdk.d.ts"},ek=["dist"],tk={build:"tsc && vite build","build:proto":"npx buf generate","build:docs":"typedoc","build:ghpages":"mkdir -p ghpages/examples && cp -r docs ghpages/api-reference && find ../../examples -name 'dist' -type d -exec sh -c 'cp -r {} ghpages/examples/$(basename $(dirname {}))' \\;",dev:"vite build -c vite.preview.ts && vite preview",test:"vitest run","test:watch":"vitest","test:bench":"vitest bench","test:ci":"vitest run --coverage","test:yorkie.dev":"TEST_RPC_ADDR=https://api.yorkie.dev vitest run --coverage",prepare:"pnpm build"},nk={node:">=18.0.0",npm:">=7.1.0"},rk={type:"git",url:"git+https://github.com/yorkie-team/yorkie-js-sdk.git"},ik={name:"hackerwins",email:"susukang98@gmail.com"},sk="Apache-2.0",ok={url:"https://github.com/yorkie-team/yorkie-js-sdk/issues"},ak="https://github.com/yorkie-team/yorkie-js-sdk#readme",lk={"@buf/googleapis_googleapis.bufbuild_es":"^1.4.0-20240524201209-f0e53af8f2fc.3","@bufbuild/buf":"^1.28.1","@bufbuild/protoc-gen-es":"^1.6.0","@connectrpc/protoc-gen-connect-es":"^1.4.0","@types/google-protobuf":"^3.15.5","@types/long":"^4.0.1","@typescript-eslint/eslint-plugin":"^6.21.0","@typescript-eslint/parser":"^6.21.0","@vitest/coverage-istanbul":"^0.34.5","@vitest/coverage-v8":"^0.34.5","eslint-plugin-tsdoc":"^0.2.16",prettier:"^2.7.1","ts-node":"^10.9.1",typedoc:"^0.25.13",typescript:"^5.3.3","typescript-transform-paths":"^3.3.1",vite:"^5.0.12","vite-plugin-commonjs":"^0.10.1","vite-plugin-dts":"^3.9.1","vite-tsconfig-paths":"^4.2.1",vitest:"^0.34.5"},uk={"@bufbuild/protobuf":"^1.6.0","@connectrpc/connect":"^1.4.0","@connectrpc/connect-web":"^1.4.0",long:"^5.2.0"},cg={name:GS,version:YS,description:QS,main:XS,publishConfig:ZS,files:ek,scripts:tk,engines:nk,repository:rk,author:ik,license:sk,bugs:ok,homepage:ak,devDependencies:lk,dependencies:uk};function ck(){return n=>async e=>(e.header.set("x-yorkie-user-agent",cg.name+"/"+cg.version),await n(e))}const fk=n=>{try{if(JSON.stringify(n)===void 0)return!1}catch{return!1}return!0};var Aa=(n=>(n.Manual="manual",n.Realtime="realtime",n.RealtimePushOnly="realtime-pushonly",n.RealtimeSyncOff="realtime-syncoff",n))(Aa||{});const ia={syncLoopDuration:50,retrySyncLoopDelay:1e3,reconnectStreamDelay:1e3},Eu={maxRetries:1/0,initialRetryInterval:1e3,maxBackoff:2e4};class Ly{constructor(e,t){u(this,"id");u(this,"key");u(this,"status");u(this,"attachmentMap");u(this,"apiKey");u(this,"conditions");u(this,"syncLoopDuration");u(this,"reconnectStreamDelay");u(this,"retrySyncLoopDelay");u(this,"rpcClient");u(this,"taskQueue");u(this,"processing",!1);t=t||ia,this.key=t.key?t.key:Py(),this.status="deactivated",this.attachmentMap=new Map,this.apiKey=t.apiKey||"",this.conditions={SyncLoop:!1,WatchLoop:!1},this.syncLoopDuration=t.syncLoopDuration||ia.syncLoopDuration,this.reconnectStreamDelay=t.reconnectStreamDelay||ia.reconnectStreamDelay,this.retrySyncLoopDelay=t.retrySyncLoopDelay||ia.retrySyncLoopDelay,this.rpcClient=a1(D1,P1({baseUrl:e,interceptors:[_S(t.apiKey,t.token),ck()]})),this.taskQueue=[]}activate(){return this.isActive()?Promise.resolve():this.enqueueTask(async()=>this.rpcClient.activateClient({clientKey:this.key},{headers:{"x-shard-key":this.apiKey}}).then(e=>{this.id=e.clientId,this.status="activated",this.runSyncLoop(),J.info(`[AC] c:"${this.getKey()}" activated, id:"${this.id}"`)}).catch(e=>{throw J.error(`[AC] c:"${this.getKey()}" err :`,e),this.handleConnectError(e),e}))}deactivate(){return this.status==="deactivated"?Promise.resolve():this.enqueueTask(async()=>this.rpcClient.deactivateClient({clientId:this.id},{headers:{"x-shard-key":this.apiKey}}).then(()=>{this.deactivateInternal(),J.info(`[DC] c"${this.getKey()}" deactivated`)}).catch(e=>{throw J.error(`[DC] c:"${this.getKey()}" err :`,e),this.handleConnectError(e),e}))}attach(e,t={}){if(!this.isActive())throw new k(S.ErrClientNotActivated,`${this.key} is not active`);if(e.getStatus()!==Pr.Detached)throw new k(S.ErrDocumentNotDetached,`${e.getKey()} is not detached`);e.setActor(this.id),e.update((s,o)=>o.set(t.initialPresence||{}));const r=e.subscribe("local-broadcast",async s=>{var d;const{topic:o,payload:a}=s.value,l=(d=s.options)==null?void 0:d.error,c=s.options;try{await this.broadcast(e.getKey(),o,a,c)}catch(h){h instanceof Error&&(l==null||l(h))}}),i=t.syncMode??"realtime";return this.enqueueTask(async()=>this.rpcClient.attachDocument({clientId:this.id,changePack:fe.toChangePack(e.createChangePack())},{headers:{"x-shard-key":`${this.apiKey}/${e.getKey()}`}}).then(async s=>{const o=fe.fromChangePack(s.changePack);if(e.applyChangePack(o),e.getStatus()===Pr.Removed)return e;e.applyStatus(Pr.Attached),this.attachmentMap.set(e.getKey(),new MS(this.reconnectStreamDelay,e,s.documentId,i,r)),i!=="manual"&&await this.runWatchLoop(e.getKey()),J.info(`[AD] c:"${this.getKey()}" attaches d:"${e.getKey()}"`);const a=e.getRootObject();if(t.initialRoot){const l=t.initialRoot;e.update(c=>{for(const[d,h]of Object.entries(l))if(!a.has(d)){const p=d;c[p]=h}})}return e}).catch(s=>{throw J.error(`[AD] c:"${this.getKey()}" err :`,s),this.handleConnectError(s),s}))}detach(e,t={}){if(!this.isActive())throw new k(S.ErrClientNotActivated,`${this.key} is not active`);const r=this.attachmentMap.get(e.getKey());if(!r)throw new k(S.ErrDocumentNotAttached,`${e.getKey()} is not attached`);return e.update((i,s)=>s.clear()),this.enqueueTask(async()=>this.rpcClient.detachDocument({clientId:this.id,documentId:r.docID,changePack:fe.toChangePack(e.createChangePack()),removeIfNotAttached:t.removeIfNotAttached??!1},{headers:{"x-shard-key":`${this.apiKey}/${e.getKey()}`}}).then(i=>{const s=fe.fromChangePack(i.changePack);return e.applyChangePack(s),e.getStatus()!==Pr.Removed&&e.applyStatus(Pr.Detached),this.detachInternal(e.getKey()),J.info(`[DD] c:"${this.getKey()}" detaches d:"${e.getKey()}"`),e}).catch(i=>{throw J.error(`[DD] c:"${this.getKey()}" err :`,i),this.handleConnectError(i),i}))}async changeSyncMode(e,t){if(!this.isActive())throw new k(S.ErrClientNotActivated,`${this.key} is not active`);const r=this.attachmentMap.get(e.getKey());if(!r)throw new k(S.ErrDocumentNotAttached,`${e.getKey()} is not attached`);const i=r.syncMode;return i===t?e:(r.changeSyncMode(t),t==="manual"?(r.cancelWatchStream(),e):(t==="realtime"&&(r.remoteChangeEventReceived=!0),i==="manual"&&await this.runWatchLoop(e.getKey()),e))}sync(e){if(!this.isActive())throw new k(S.ErrClientNotActivated,`${this.key} is not active`);if(e){const t=this.attachmentMap.get(e.getKey());if(!t)throw new k(S.ErrDocumentNotAttached,`${e.getKey()} is not attached`);return this.enqueueTask(async()=>this.syncInternal(t,"realtime").catch(r=>{throw J.error(`[SY] c:"${this.getKey()}" err :`,r),this.handleConnectError(r),r}))}return this.enqueueTask(async()=>{const t=[];for(const[,r]of this.attachmentMap)t.push(this.syncInternal(r,r.syncMode));return Promise.all(t).catch(r=>{throw J.error(`[SY] c:"${this.getKey()}" err :`,r),this.handleConnectError(r),r})})}remove(e){if(!this.isActive())throw new k(S.ErrClientNotActivated,`${this.key} is not active`);const t=this.attachmentMap.get(e.getKey());if(!t)throw new k(S.ErrDocumentNotAttached,`${e.getKey()} is not attached`);e.setActor(this.id);const r=fe.toChangePack(e.createChangePack());return r.isRemoved=!0,this.enqueueTask(async()=>this.rpcClient.removeDocument({clientId:this.id,documentId:t.docID,changePack:r},{headers:{"x-shard-key":`${this.apiKey}/${e.getKey()}`}}).then(i=>{const s=fe.fromChangePack(i.changePack);e.applyChangePack(s),this.detachInternal(e.getKey()),J.info(`[RD] c:"${this.getKey()}" removes d:"${e.getKey()}"`)}).catch(i=>{throw J.error(`[RD] c:"${this.getKey()}" err :`,i),this.handleConnectError(i),i}))}getID(){return this.id}getKey(){return this.key}isActive(){return this.status==="activated"}getStatus(){return this.status}getCondition(e){return this.conditions[e]}broadcast(e,t,r,i){if(!this.isActive())throw new k(S.ErrClientNotActivated,`${this.key} is not active`);const s=this.attachmentMap.get(e);if(!s)throw new k(S.ErrDocumentNotAttached,`${e} is not attached`);if(!fk(r))throw new k(S.ErrInvalidArgument,"payload is not serializable");const o=(i==null?void 0:i.maxRetries)??Eu.maxRetries,a=Eu.maxBackoff;let l=0;const c=h=>Math.min(Eu.initialRetryInterval*2**h,a),d=async()=>this.enqueueTask(async()=>this.rpcClient.broadcast({clientId:this.id,documentId:s.docID,topic:t,payload:new TextEncoder().encode(JSON.stringify(r))},{headers:{"x-shard-key":`${this.apiKey}/${e}`}}).then(()=>{J.info(`[BC] c:"${this.getKey()}" broadcasts d:"${e}" t:"${t}"`)}).catch(h=>{if(J.error(`[BC] c:"${this.getKey()}" err:`,h),this.handleConnectError(h))if(l<o)l++,setTimeout(()=>d(),c(l-1)),J.info(`[BC] c:"${this.getKey()}" retry attempt ${l}/${o}`);else throw J.error(`[BC] c:"${this.getKey()}" exceeded maximum retry attempts`),h;else throw h}));return d()}runSyncLoop(){const e=()=>{if(!this.isActive()){J.debug(`[SL] c:"${this.getKey()}" exit sync loop`),this.conditions.SyncLoop=!1;return}const t=[];for(const[,r]of this.attachmentMap)r.needRealtimeSync()&&(r.remoteChangeEventReceived=!1,t.push(this.syncInternal(r,r.syncMode)));Promise.all(t).then(()=>setTimeout(e,this.syncLoopDuration)).catch(r=>{J.error(`[SL] c:"${this.getKey()}" sync failed:`,r),this.handleConnectError(r)?setTimeout(e,this.retrySyncLoopDelay):this.conditions.SyncLoop=!1})};J.debug(`[SL] c:"${this.getKey()}" run sync loop`),this.conditions.SyncLoop=!0,e()}async runWatchLoop(e){const t=this.attachmentMap.get(e);if(!t)throw new k(S.ErrDocumentNotAttached,`${e} is not attached`);return this.conditions.WatchLoop=!0,t.runWatchLoop(r=>{if(!this.isActive())return this.conditions.WatchLoop=!1,Promise.reject(new k(S.ErrClientNotActivated,`${this.key} is not active`));const i=new AbortController,s=this.rpcClient.watchDocument({clientId:this.id,documentId:t.docID},{headers:{"x-shard-key":`${this.apiKey}/${e}`},signal:i.signal});return t.doc.publish([{type:$e.ConnectionChanged,value:_c.Connected}]),J.info(`[WD] c:"${this.getKey()}" watches d:"${e}"`),new Promise((o,a)=>{(async()=>{try{for await(const c of s)this.handleWatchDocumentsResponse(t,c),c.body.case==="initialization"&&o([s,i])}catch(c){t.doc.resetOnlineClients(),t.doc.publish([{type:$e.Initialized,source:Y.Local,value:t.doc.getPresences()}]),t.doc.publish([{type:$e.ConnectionChanged,value:_c.Disconnected}]),J.debug(`[WD] c:"${this.getKey()}" unwatches`),this.handleConnectError(c)?r():this.conditions.WatchLoop=!1,a(c)}})()})})}handleWatchDocumentsResponse(e,t){if(t.body.case==="event"&&t.body.value.type===yi.DOCUMENT_CHANGED){e.remoteChangeEventReceived=!0;return}e.doc.applyWatchStream(t)}deactivateInternal(){this.status="deactivated";for(const[e,t]of this.attachmentMap)this.detachInternal(e),t.doc.applyStatus(Pr.Detached)}detachInternal(e){const t=this.attachmentMap.get(e);t&&(t.cancelWatchStream(),t.unsubscribeBroadcastEvent(),this.attachmentMap.delete(e))}syncInternal(e,t){const{doc:r,docID:i}=e,s=r.createChangePack();return this.rpcClient.pushPullChanges({clientId:this.id,documentId:i,changePack:fe.toChangePack(s),pushOnly:t==="realtime-pushonly"},{headers:{"x-shard-key":`${this.apiKey}/${r.getKey()}`}}).then(o=>{const a=fe.fromChangePack(o.changePack);if(a.hasChanges()&&(e.syncMode==="realtime-pushonly"||e.syncMode==="realtime-syncoff"))return r;r.applyChangePack(a),e.doc.publish([{type:$e.SyncStatusChanged,value:Gc.Synced}]),r.getStatus()===Pr.Removed&&this.detachInternal(r.getKey());const l=r.getKey(),c=a.getChangeSize();return J.info(`[PP] c:"${this.getKey()}" sync d:"${l}", push:${s.getChangeSize()} pull:${c} cp:${a.getCheckpoint().toTestString()}`),r}).catch(o=>{throw r.publish([{type:$e.SyncStatusChanged,value:Gc.SyncFailed}]),J.error(`[PP] c:"${this.getKey()}" err :`,o),o})}handleConnectError(e){return e instanceof pe?e.code===_.Canceled||e.code===_.Unknown||e.code===_.ResourceExhausted||e.code===_.Unavailable?!0:((sg(e)===S.ErrClientNotActivated||sg(e)===S.ErrClientNotFound)&&this.deactivateInternal(),!1):!1}enqueueTask(e){return new Promise((t,r)=>{this.taskQueue.push(()=>e().then(t).catch(r)),this.processing||this.processNext()})}async processNext(){if(this.taskQueue.length===0){this.processing=!1;return}try{this.processing=!0,await this.taskQueue.shift()()}catch{J.error(`[TQ] c:"${this.getKey()}" process failed, id:"${this.id}"`)}this.processNext()}}const By={Client:Ly,Document:Ry,Primitive:re,Text:$l,Counter:zl,Tree:Ul,LogLevel:be,setLogLevel:Ny,IntType:on.IntegerCnt,LongType:on.LongCnt};typeof globalThis<"u"&&(globalThis.yorkie={Client:Ly,Document:Ry,Primitive:re,Text:$l,Counter:zl,Tree:Ul,LogLevel:be,setLogLevel:Ny,IntType:on.IntegerCnt,LongType:on.LongCnt});class dk{constructor(e,t){this.x=e,this.y=t,this.lifetime=0}}const hk=({xPos:n,yPos:e})=>{const[t,r]=Ue.useState([]),i=Ue.useRef(null),[s,o]=Ue.useState([]),a=(l,c)=>{const d=new dk(l,c);s.push(d),o(s),t.push(d),r(t)};return Ue.useEffect(()=>{const c=i.current.getContext("2d"),d=()=>{c.clearRect(0,0,c.canvas.width,c.canvas.height);const h=.7*(1*4e3)/60;for(let p=0;p<s.length;++p){const m=s[p];let w;if(s[p-1]!==void 0?w=s[p-1]:w=m,m.lifetime+=1,m.lifetime>h)s.shift();else{c.lineWidth=5,c.lineJoin="round";const I=0,O=0,y=0;c.strokeStyle=`rgb(${I},${O},${y})`,c.beginPath(),c.moveTo(w.x,w.y),c.lineTo(m.x,m.y),c.stroke(),c.closePath()}}requestAnimationFrame(d)};d()},[s]),Ue.useEffect(()=>{a(n,e)},[n,e]),ue.jsx("canvas",{className:"pen-cursor-canvas",ref:i,width:document.body.clientWidth,height:document.body.clientHeight})},gk="_goUp0_1lnal_1",mk="_goUpAnimation0_1lnal_1",pk="_fadeOut_1lnal_1",yk="_goUp1_1lnal_16",vk="_goUpAnimation1_1lnal_1",wk="_goUp2_1lnal_31",Sk="_goUpAnimation2_1lnal_1",kk="_leftRight0_1lnal_46",Tk="_leftRightAnimation0_1lnal_1",Ak="_leftRight1_1lnal_60",Ik="_leftRightAnimation1_1lnal_1",Ek="_leftRight2_1lnal_74",xk="_leftRightAnimation2_1lnal_1",xu={goUp0:gk,goUpAnimation0:mk,fadeOut:pk,goUp1:yk,goUpAnimation1:vk,goUp2:wk,goUpAnimation2:Sk,leftRight0:kk,leftRightAnimation0:Tk,leftRight1:Ak,leftRightAnimation1:Ik,leftRight2:Ek,leftRightAnimation2:xk};function Ck({x:n,y:e,timestamp:t,selectedCursorShape:r}){return ue.jsx("div",{className:"single-animation-container",children:ue.jsx("div",{className:`absolute select-none pointer-events-none ${xu.disappear} text-${t%5+2}xl ${xu["goUp"+t%3]}`,style:{left:n,top:e},children:ue.jsx("div",{className:xu["leftRight"+t%3],children:ue.jsx("div",{className:"transform -translate-x-1/2 -translate-y-1/2",children:ue.jsx("img",{src:`./icons/icon_${r}.svg`})})})})})}function fg(n,e){const t=Ue.useRef(n);Ue.useEffect(()=>{t.current=n},[n]),Ue.useEffect(()=>{function r(){t.current()}if(e!==null){let i=setInterval(r,e);return()=>clearInterval(i)}},[e])}const Nk=({pointerDown:n,xPos:e,yPos:t,selectedCursorShape:r})=>{const[i,s]=Ue.useState([]),o=100;return fg(()=>{s(a=>a.filter(l=>l.timestamp>Date.now()-4e3))},1e3),fg(()=>{n&&s(a=>a.concat([{point:{x:e,y:t},timestamp:Date.now()}]))},o),ue.jsx("div",{style:{transform:`translateX(${e}px) translateY(${t}px)`},children:i.map(a=>ue.jsx(Ck,{x:a.point.x,y:a.point.y,timestamp:a.timestamp,selectedCursorShape:r},a.timestamp.toString()))})},Pk=({selectedCursorShape:n,x:e,y:t,pointerDown:r})=>ue.jsxs(ue.Fragment,{children:[ue.jsx("img",{src:`./icons/icon_${n}.svg`,className:`${n}-cursor`,style:{transform:`translate3d(${e}px, ${t}px, 0)`}}),(n==="heart"||n==="thumbs")&&ue.jsx(Nk,{pointerDown:r,xPos:e,yPos:t,selectedCursorShape:n}),n==="pen"&&r&&ue.jsx(hk,{xPos:e,yPos:t})]}),Dk=({handleCursorShapeSelect:n,clientsLength:e})=>{const[t,r]=Ue.useState("cursor"),i=["heart","thumbs","pen","cursor"];return ue.jsxs("div",{className:"cursor-selector-container",children:[ue.jsx("div",{className:"cursor-selections-container",children:i.map(s=>ue.jsx("img",{onClick:()=>{n(s),r(s)},className:`${t===s?"cursor-shape-selected":"cursor-shape-not-selected"}`,src:`./icons/icon_${s}.svg`},s))}),ue.jsx("div",{className:"num-users-container",children:ue.jsx("p",{children:e!==1?`${e} users are here`:"1 user here"})})]})},Cu=new By.Client("https://api.yorkie.dev",{apiKey:"cedaovjuioqlk4pjqn6g"}),ii=new By.Document("simultaneous-cursors",{enableDevtools:!0}),Ok=()=>{const[n,e]=Ue.useState([]),t=r=>{ii.update((i,s)=>{s.set({cursorShape:r})})};return Ue.useEffect(()=>{(async()=>{await Cu.activate(),ii.subscribe("presence",a=>{e(ii.getPresences())}),await Cu.attach(ii,{initialPresence:{cursorShape:"cursor",cursor:{xPos:0,yPos:0},pointerDown:!1}}),window.addEventListener("beforeunload",()=>{Cu.deactivate()})})();const i=()=>{ii.update((a,l)=>{l.set({pointerDown:!1})})},s=()=>{ii.update((a,l)=>{l.set({pointerDown:!0})})},o=a=>{ii.update((l,c)=>{c.set({cursor:{xPos:a.clientX,yPos:a.clientY}})})};return window.addEventListener("mousedown",s),window.addEventListener("mouseup",i),window.addEventListener("mousemove",o),()=>{window.removeEventListener("mousedown",s),window.removeEventListener("mouseup",i),window.removeEventListener("mousemove",o)}},[]),ue.jsxs("div",{className:"general-container",children:[n.map(({clientID:r,presence:{cursorShape:i,cursor:s,pointerDown:o}})=>s?ue.jsx(Pk,{selectedCursorShape:i,x:s.xPos,y:s.yPos,pointerDown:o},r):null),ue.jsx(Dk,{handleCursorShapeSelect:t,clientsLength:n.length})]})};Nu.createRoot(document.getElementById("root")).render(ue.jsx(Ok,{}));
