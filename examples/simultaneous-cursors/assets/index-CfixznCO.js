var $y=Object.defineProperty;var Uy=(n,e,t)=>e in n?$y(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var u=(n,e,t)=>Uy(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();var yg={exports:{}},kl={},vg={exports:{}},K={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Co=Symbol.for("react.element"),jy=Symbol.for("react.portal"),Vy=Symbol.for("react.fragment"),qy=Symbol.for("react.strict_mode"),Ky=Symbol.for("react.profiler"),Wy=Symbol.for("react.provider"),Hy=Symbol.for("react.context"),_y=Symbol.for("react.forward_ref"),Gy=Symbol.for("react.suspense"),Yy=Symbol.for("react.memo"),Qy=Symbol.for("react.lazy"),yd=Symbol.iterator;function Xy(n){return n===null||typeof n!="object"?null:(n=yd&&n[yd]||n["@@iterator"],typeof n=="function"?n:null)}var wg={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Sg=Object.assign,Tg={};function Ts(n,e,t){this.props=n,this.context=e,this.refs=Tg,this.updater=t||wg}Ts.prototype.isReactComponent={};Ts.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};Ts.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function kg(){}kg.prototype=Ts.prototype;function Xc(n,e,t){this.props=n,this.context=e,this.refs=Tg,this.updater=t||wg}var Zc=Xc.prototype=new kg;Zc.constructor=Xc;Sg(Zc,Ts.prototype);Zc.isPureReactComponent=!0;var vd=Array.isArray,Ig=Object.prototype.hasOwnProperty,ef={current:null},Ag={key:!0,ref:!0,__self:!0,__source:!0};function Eg(n,e,t){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Ig.call(e,r)&&!Ag.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=t;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(n&&n.defaultProps)for(r in a=n.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Co,type:n,key:s,ref:o,props:i,_owner:ef.current}}function Zy(n,e){return{$$typeof:Co,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function tf(n){return typeof n=="object"&&n!==null&&n.$$typeof===Co}function ev(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var wd=/\/+/g;function Hl(n,e){return typeof n=="object"&&n!==null&&n.key!=null?ev(""+n.key):e.toString(36)}function ua(n,e,t,r,i){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case Co:case jy:o=!0}}if(o)return o=n,i=i(o),n=r===""?"."+Hl(o,0):r,vd(i)?(t="",n!=null&&(t=n.replace(wd,"$&/")+"/"),ua(i,e,t,"",function(c){return c})):i!=null&&(tf(i)&&(i=Zy(i,t+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(wd,"$&/")+"/")+n)),e.push(i)),1;if(o=0,r=r===""?".":r+":",vd(n))for(var a=0;a<n.length;a++){s=n[a];var l=r+Hl(s,a);o+=ua(s,e,t,l,i)}else if(l=Xy(n),typeof l=="function")for(n=l.call(n),a=0;!(s=n.next()).done;)s=s.value,l=r+Hl(s,a++),o+=ua(s,e,t,l,i);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Uo(n,e,t){if(n==null)return n;var r=[],i=0;return ua(n,r,"","",function(s){return e.call(t,s,i++)}),r}function tv(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Fe={current:null},ca={transition:null},nv={ReactCurrentDispatcher:Fe,ReactCurrentBatchConfig:ca,ReactCurrentOwner:ef};K.Children={map:Uo,forEach:function(n,e,t){Uo(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return Uo(n,function(){e++}),e},toArray:function(n){return Uo(n,function(e){return e})||[]},only:function(n){if(!tf(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};K.Component=Ts;K.Fragment=Vy;K.Profiler=Ky;K.PureComponent=Xc;K.StrictMode=qy;K.Suspense=Gy;K.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nv;K.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=Sg({},n.props),i=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=ef.current),e.key!==void 0&&(i=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)Ig.call(e,l)&&!Ag.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=t;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Co,type:n.type,key:i,ref:s,props:r,_owner:o}};K.createContext=function(n){return n={$$typeof:Hy,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:Wy,_context:n},n.Consumer=n};K.createElement=Eg;K.createFactory=function(n){var e=Eg.bind(null,n);return e.type=n,e};K.createRef=function(){return{current:null}};K.forwardRef=function(n){return{$$typeof:_y,render:n}};K.isValidElement=tf;K.lazy=function(n){return{$$typeof:Qy,_payload:{_status:-1,_result:n},_init:tv}};K.memo=function(n,e){return{$$typeof:Yy,type:n,compare:e===void 0?null:e}};K.startTransition=function(n){var e=ca.transition;ca.transition={};try{n()}finally{ca.transition=e}};K.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};K.useCallback=function(n,e){return Fe.current.useCallback(n,e)};K.useContext=function(n){return Fe.current.useContext(n)};K.useDebugValue=function(){};K.useDeferredValue=function(n){return Fe.current.useDeferredValue(n)};K.useEffect=function(n,e){return Fe.current.useEffect(n,e)};K.useId=function(){return Fe.current.useId()};K.useImperativeHandle=function(n,e,t){return Fe.current.useImperativeHandle(n,e,t)};K.useInsertionEffect=function(n,e){return Fe.current.useInsertionEffect(n,e)};K.useLayoutEffect=function(n,e){return Fe.current.useLayoutEffect(n,e)};K.useMemo=function(n,e){return Fe.current.useMemo(n,e)};K.useReducer=function(n,e,t){return Fe.current.useReducer(n,e,t)};K.useRef=function(n){return Fe.current.useRef(n)};K.useState=function(n){return Fe.current.useState(n)};K.useSyncExternalStore=function(n,e,t){return Fe.current.useSyncExternalStore(n,e,t)};K.useTransition=function(){return Fe.current.useTransition()};K.version="18.2.0";vg.exports=K;var Ue=vg.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rv=Ue,iv=Symbol.for("react.element"),sv=Symbol.for("react.fragment"),ov=Object.prototype.hasOwnProperty,av=rv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,lv={key:!0,ref:!0,__self:!0,__source:!0};function xg(n,e,t){var r,i={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)ov.call(e,r)&&!lv.hasOwnProperty(r)&&(i[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:iv,type:n,key:s,ref:o,props:i,_owner:av.current}}kl.Fragment=sv;kl.jsx=xg;kl.jsxs=xg;yg.exports=kl;var ue=yg.exports,Cu={},Ng={exports:{}},it={},Pg={exports:{}},Cg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(L,$){var j=L.length;L.push($);e:for(;0<j;){var fe=j-1>>>1,Se=L[fe];if(0<i(Se,$))L[fe]=$,L[j]=Se,j=fe;else break e}}function t(L){return L.length===0?null:L[0]}function r(L){if(L.length===0)return null;var $=L[0],j=L.pop();if(j!==$){L[0]=j;e:for(var fe=0,Se=L.length,Jo=Se>>>1;fe<Jo;){var si=2*(fe+1)-1,Wl=L[si],oi=si+1,$o=L[oi];if(0>i(Wl,j))oi<Se&&0>i($o,Wl)?(L[fe]=$o,L[oi]=j,fe=oi):(L[fe]=Wl,L[si]=j,fe=si);else if(oi<Se&&0>i($o,j))L[fe]=$o,L[oi]=j,fe=oi;else break e}}return $}function i(L,$){var j=L.sortIndex-$.sortIndex;return j!==0?j:L.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,h=null,g=3,p=!1,T=!1,k=!1,C=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(L){for(var $=t(c);$!==null;){if($.callback===null)r(c);else if($.startTime<=L)r(c),$.sortIndex=$.expirationTime,e(l,$);else break;$=t(c)}}function A(L){if(k=!1,v(L),!T)if(t(l)!==null)T=!0,ql(N);else{var $=t(c);$!==null&&Kl(A,$.startTime-L)}}function N(L,$){T=!1,k&&(k=!1,y(b),b=-1),p=!0;var j=g;try{for(v($),h=t(l);h!==null&&(!(h.expirationTime>$)||L&&!Ge());){var fe=h.callback;if(typeof fe=="function"){h.callback=null,g=h.priorityLevel;var Se=fe(h.expirationTime<=$);$=n.unstable_now(),typeof Se=="function"?h.callback=Se:h===t(l)&&r(l),v($)}else r(l);h=t(l)}if(h!==null)var Jo=!0;else{var si=t(c);si!==null&&Kl(A,si.startTime-$),Jo=!1}return Jo}finally{h=null,g=j,p=!1}}var D=!1,O=null,b=-1,ee=5,U=-1;function Ge(){return!(n.unstable_now()-U<ee)}function ii(){if(O!==null){var L=n.unstable_now();U=L;var $=!0;try{$=O(!0,L)}finally{$?As():(D=!1,O=null)}}else D=!1}var As;if(typeof m=="function")As=function(){m(ii)};else if(typeof MessageChannel<"u"){var pd=new MessageChannel,Jy=pd.port2;pd.port1.onmessage=ii,As=function(){Jy.postMessage(null)}}else As=function(){C(ii,0)};function ql(L){O=L,D||(D=!0,As())}function Kl(L,$){b=C(function(){L(n.unstable_now())},$)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(L){L.callback=null},n.unstable_continueExecution=function(){T||p||(T=!0,ql(N))},n.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ee=0<L?Math.floor(1e3/L):5},n.unstable_getCurrentPriorityLevel=function(){return g},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(L){switch(g){case 1:case 2:case 3:var $=3;break;default:$=g}var j=g;g=$;try{return L()}finally{g=j}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(L,$){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var j=g;g=L;try{return $()}finally{g=j}},n.unstable_scheduleCallback=function(L,$,j){var fe=n.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?fe+j:fe):j=fe,L){case 1:var Se=-1;break;case 2:Se=250;break;case 5:Se=1073741823;break;case 4:Se=1e4;break;default:Se=5e3}return Se=j+Se,L={id:d++,callback:$,priorityLevel:L,startTime:j,expirationTime:Se,sortIndex:-1},j>fe?(L.sortIndex=j,e(c,L),t(l)===null&&L===t(c)&&(k?(y(b),b=-1):k=!0,Kl(A,j-fe))):(L.sortIndex=Se,e(l,L),T||p||(T=!0,ql(N))),L},n.unstable_shouldYield=Ge,n.unstable_wrapCallback=function(L){var $=g;return function(){var j=g;g=$;try{return L.apply(this,arguments)}finally{g=j}}}})(Cg);Pg.exports=Cg;var uv=Pg.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dg=Ue,rt=uv;function x(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Og=new Set,to={};function Ci(n,e){is(n,e),is(n+"Capture",e)}function is(n,e){for(to[n]=e,n=0;n<e.length;n++)Og.add(e[n])}var wr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Du=Object.prototype.hasOwnProperty,cv=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Sd={},Td={};function fv(n){return Du.call(Td,n)?!0:Du.call(Sd,n)?!1:cv.test(n)?Td[n]=!0:(Sd[n]=!0,!1)}function dv(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function hv(n,e,t,r){if(e===null||typeof e>"u"||dv(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Me(n,e,t,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Ne={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Ne[n]=new Me(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];Ne[e]=new Me(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){Ne[n]=new Me(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Ne[n]=new Me(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Ne[n]=new Me(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){Ne[n]=new Me(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){Ne[n]=new Me(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){Ne[n]=new Me(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){Ne[n]=new Me(n,5,!1,n.toLowerCase(),null,!1,!1)});var nf=/[\-:]([a-z])/g;function rf(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(nf,rf);Ne[e]=new Me(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(nf,rf);Ne[e]=new Me(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(nf,rf);Ne[e]=new Me(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){Ne[n]=new Me(n,1,!1,n.toLowerCase(),null,!1,!1)});Ne.xlinkHref=new Me("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){Ne[n]=new Me(n,1,!1,n.toLowerCase(),null,!0,!0)});function sf(n,e,t,r){var i=Ne.hasOwnProperty(e)?Ne[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(hv(e,t,i,r)&&(t=null),r||i===null?fv(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):i.mustUseProperty?n[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,r=i.attributeNamespace,t===null?n.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var Er=Dg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,jo=Symbol.for("react.element"),zi=Symbol.for("react.portal"),Fi=Symbol.for("react.fragment"),of=Symbol.for("react.strict_mode"),Ou=Symbol.for("react.profiler"),Rg=Symbol.for("react.provider"),Lg=Symbol.for("react.context"),af=Symbol.for("react.forward_ref"),Ru=Symbol.for("react.suspense"),Lu=Symbol.for("react.suspense_list"),lf=Symbol.for("react.memo"),Rr=Symbol.for("react.lazy"),Bg=Symbol.for("react.offscreen"),kd=Symbol.iterator;function Es(n){return n===null||typeof n!="object"?null:(n=kd&&n[kd]||n["@@iterator"],typeof n=="function"?n:null)}var se=Object.assign,_l;function zs(n){if(_l===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);_l=e&&e[1]||""}return`
`+_l+n}var Gl=!1;function Yl(n,e){if(!n||Gl)return"";Gl=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){r=c}n.call(e.prototype)}else{try{throw Error()}catch(c){r=c}n()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{Gl=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?zs(n):""}function gv(n){switch(n.tag){case 5:return zs(n.type);case 16:return zs("Lazy");case 13:return zs("Suspense");case 19:return zs("SuspenseList");case 0:case 2:case 15:return n=Yl(n.type,!1),n;case 11:return n=Yl(n.type.render,!1),n;case 1:return n=Yl(n.type,!0),n;default:return""}}function Bu(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Fi:return"Fragment";case zi:return"Portal";case Ou:return"Profiler";case of:return"StrictMode";case Ru:return"Suspense";case Lu:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case Lg:return(n.displayName||"Context")+".Consumer";case Rg:return(n._context.displayName||"Context")+".Provider";case af:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case lf:return e=n.displayName||null,e!==null?e:Bu(n.type)||"Memo";case Rr:e=n._payload,n=n._init;try{return Bu(n(e))}catch{}}return null}function mv(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Bu(e);case 8:return e===of?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Qr(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function bg(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function pv(n){var e=bg(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function Vo(n){n._valueTracker||(n._valueTracker=pv(n))}function zg(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=bg(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function Pa(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function bu(n,e){var t=e.checked;return se({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function Id(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=Qr(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Fg(n,e){e=e.checked,e!=null&&sf(n,"checked",e,!1)}function zu(n,e){Fg(n,e);var t=Qr(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?Fu(n,e.type,t):e.hasOwnProperty("defaultValue")&&Fu(n,e.type,Qr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function Ad(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function Fu(n,e,t){(e!=="number"||Pa(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var Fs=Array.isArray;function Yi(n,e,t,r){if(n=n.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<n.length;t++)i=e.hasOwnProperty("$"+n[t].value),n[t].selected!==i&&(n[t].selected=i),i&&r&&(n[t].defaultSelected=!0)}else{for(t=""+Qr(t),e=null,i=0;i<n.length;i++){if(n[i].value===t){n[i].selected=!0,r&&(n[i].defaultSelected=!0);return}e!==null||n[i].disabled||(e=n[i])}e!==null&&(e.selected=!0)}}function Mu(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(x(91));return se({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Ed(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(x(92));if(Fs(t)){if(1<t.length)throw Error(x(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:Qr(t)}}function Mg(n,e){var t=Qr(e.value),r=Qr(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function xd(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function Jg(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ju(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?Jg(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var qo,$g=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,i){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,i)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(qo=qo||document.createElement("div"),qo.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=qo.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function no(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var Us={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},yv=["Webkit","ms","Moz","O"];Object.keys(Us).forEach(function(n){yv.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),Us[e]=Us[n]})});function Ug(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Us.hasOwnProperty(n)&&Us[n]?(""+e).trim():e+"px"}function jg(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,i=Ug(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,i):n[t]=i}}var vv=se({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function $u(n,e){if(e){if(vv[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(x(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(x(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(x(61))}if(e.style!=null&&typeof e.style!="object")throw Error(x(62))}}function Uu(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ju=null;function uf(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Vu=null,Qi=null,Xi=null;function Nd(n){if(n=Ro(n)){if(typeof Vu!="function")throw Error(x(280));var e=n.stateNode;e&&(e=Nl(e),Vu(n.stateNode,n.type,e))}}function Vg(n){Qi?Xi?Xi.push(n):Xi=[n]:Qi=n}function qg(){if(Qi){var n=Qi,e=Xi;if(Xi=Qi=null,Nd(n),e)for(n=0;n<e.length;n++)Nd(e[n])}}function Kg(n,e){return n(e)}function Wg(){}var Ql=!1;function Hg(n,e,t){if(Ql)return n(e,t);Ql=!0;try{return Kg(n,e,t)}finally{Ql=!1,(Qi!==null||Xi!==null)&&(Wg(),qg())}}function ro(n,e){var t=n.stateNode;if(t===null)return null;var r=Nl(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(x(231,e,typeof t));return t}var qu=!1;if(wr)try{var xs={};Object.defineProperty(xs,"passive",{get:function(){qu=!0}}),window.addEventListener("test",xs,xs),window.removeEventListener("test",xs,xs)}catch{qu=!1}function wv(n,e,t,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(d){this.onError(d)}}var js=!1,Ca=null,Da=!1,Ku=null,Sv={onError:function(n){js=!0,Ca=n}};function Tv(n,e,t,r,i,s,o,a,l){js=!1,Ca=null,wv.apply(Sv,arguments)}function kv(n,e,t,r,i,s,o,a,l){if(Tv.apply(this,arguments),js){if(js){var c=Ca;js=!1,Ca=null}else throw Error(x(198));Da||(Da=!0,Ku=c)}}function Di(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function _g(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function Pd(n){if(Di(n)!==n)throw Error(x(188))}function Iv(n){var e=n.alternate;if(!e){if(e=Di(n),e===null)throw Error(x(188));return e!==n?null:n}for(var t=n,r=e;;){var i=t.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){t=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===t)return Pd(i),n;if(s===r)return Pd(i),e;s=s.sibling}throw Error(x(188))}if(t.return!==r.return)t=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===t){o=!0,t=i,r=s;break}if(a===r){o=!0,r=i,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,r=i;break}if(a===r){o=!0,r=s,t=i;break}a=a.sibling}if(!o)throw Error(x(189))}}if(t.alternate!==r)throw Error(x(190))}if(t.tag!==3)throw Error(x(188));return t.stateNode.current===t?n:e}function Gg(n){return n=Iv(n),n!==null?Yg(n):null}function Yg(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=Yg(n);if(e!==null)return e;n=n.sibling}return null}var Qg=rt.unstable_scheduleCallback,Cd=rt.unstable_cancelCallback,Av=rt.unstable_shouldYield,Ev=rt.unstable_requestPaint,he=rt.unstable_now,xv=rt.unstable_getCurrentPriorityLevel,cf=rt.unstable_ImmediatePriority,Xg=rt.unstable_UserBlockingPriority,Oa=rt.unstable_NormalPriority,Nv=rt.unstable_LowPriority,Zg=rt.unstable_IdlePriority,Il=null,nn=null;function Pv(n){if(nn&&typeof nn.onCommitFiberRoot=="function")try{nn.onCommitFiberRoot(Il,n,void 0,(n.current.flags&128)===128)}catch{}}var zt=Math.clz32?Math.clz32:Ov,Cv=Math.log,Dv=Math.LN2;function Ov(n){return n>>>=0,n===0?32:31-(Cv(n)/Dv|0)|0}var Ko=64,Wo=4194304;function Ms(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Ra(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,i=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~i;a!==0?r=Ms(a):(s&=o,s!==0&&(r=Ms(s)))}else o=t&~i,o!==0?r=Ms(o):s!==0&&(r=Ms(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-zt(e),i=1<<t,r|=n[t],e&=~i;return r}function Rv(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Lv(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,i=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-zt(s),a=1<<o,l=i[o];l===-1?(!(a&t)||a&r)&&(i[o]=Rv(a,e)):l<=e&&(n.expiredLanes|=a),s&=~a}}function Wu(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function em(){var n=Ko;return Ko<<=1,!(Ko&4194240)&&(Ko=64),n}function Xl(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function Do(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-zt(e),n[e]=t}function Bv(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var i=31-zt(t),s=1<<i;e[i]=0,r[i]=-1,n[i]=-1,t&=~s}}function ff(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-zt(t),i=1<<r;i&e|n[r]&e&&(n[r]|=e),t&=~i}}var G=0;function tm(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var nm,df,rm,im,sm,Hu=!1,Ho=[],Jr=null,$r=null,Ur=null,io=new Map,so=new Map,Br=[],bv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dd(n,e){switch(n){case"focusin":case"focusout":Jr=null;break;case"dragenter":case"dragleave":$r=null;break;case"mouseover":case"mouseout":Ur=null;break;case"pointerover":case"pointerout":io.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":so.delete(e.pointerId)}}function Ns(n,e,t,r,i,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Ro(e),e!==null&&df(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),n)}function zv(n,e,t,r,i){switch(e){case"focusin":return Jr=Ns(Jr,n,e,t,r,i),!0;case"dragenter":return $r=Ns($r,n,e,t,r,i),!0;case"mouseover":return Ur=Ns(Ur,n,e,t,r,i),!0;case"pointerover":var s=i.pointerId;return io.set(s,Ns(io.get(s)||null,n,e,t,r,i)),!0;case"gotpointercapture":return s=i.pointerId,so.set(s,Ns(so.get(s)||null,n,e,t,r,i)),!0}return!1}function om(n){var e=di(n.target);if(e!==null){var t=Di(e);if(t!==null){if(e=t.tag,e===13){if(e=_g(t),e!==null){n.blockedOn=e,sm(n.priority,function(){rm(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function fa(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=_u(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);ju=r,t.target.dispatchEvent(r),ju=null}else return e=Ro(t),e!==null&&df(e),n.blockedOn=t,!1;e.shift()}return!0}function Od(n,e,t){fa(n)&&t.delete(e)}function Fv(){Hu=!1,Jr!==null&&fa(Jr)&&(Jr=null),$r!==null&&fa($r)&&($r=null),Ur!==null&&fa(Ur)&&(Ur=null),io.forEach(Od),so.forEach(Od)}function Ps(n,e){n.blockedOn===e&&(n.blockedOn=null,Hu||(Hu=!0,rt.unstable_scheduleCallback(rt.unstable_NormalPriority,Fv)))}function oo(n){function e(i){return Ps(i,n)}if(0<Ho.length){Ps(Ho[0],n);for(var t=1;t<Ho.length;t++){var r=Ho[t];r.blockedOn===n&&(r.blockedOn=null)}}for(Jr!==null&&Ps(Jr,n),$r!==null&&Ps($r,n),Ur!==null&&Ps(Ur,n),io.forEach(e),so.forEach(e),t=0;t<Br.length;t++)r=Br[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<Br.length&&(t=Br[0],t.blockedOn===null);)om(t),t.blockedOn===null&&Br.shift()}var Zi=Er.ReactCurrentBatchConfig,La=!0;function Mv(n,e,t,r){var i=G,s=Zi.transition;Zi.transition=null;try{G=1,hf(n,e,t,r)}finally{G=i,Zi.transition=s}}function Jv(n,e,t,r){var i=G,s=Zi.transition;Zi.transition=null;try{G=4,hf(n,e,t,r)}finally{G=i,Zi.transition=s}}function hf(n,e,t,r){if(La){var i=_u(n,e,t,r);if(i===null)lu(n,e,r,Ba,t),Dd(n,r);else if(zv(i,n,e,t,r))r.stopPropagation();else if(Dd(n,r),e&4&&-1<bv.indexOf(n)){for(;i!==null;){var s=Ro(i);if(s!==null&&nm(s),s=_u(n,e,t,r),s===null&&lu(n,e,r,Ba,t),s===i)break;i=s}i!==null&&r.stopPropagation()}else lu(n,e,r,null,t)}}var Ba=null;function _u(n,e,t,r){if(Ba=null,n=uf(r),n=di(n),n!==null)if(e=Di(n),e===null)n=null;else if(t=e.tag,t===13){if(n=_g(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return Ba=n,null}function am(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(xv()){case cf:return 1;case Xg:return 4;case Oa:case Nv:return 16;case Zg:return 536870912;default:return 16}default:return 16}}var zr=null,gf=null,da=null;function lm(){if(da)return da;var n,e=gf,t=e.length,r,i="value"in zr?zr.value:zr.textContent,s=i.length;for(n=0;n<t&&e[n]===i[n];n++);var o=t-n;for(r=1;r<=o&&e[t-r]===i[s-r];r++);return da=i.slice(n,1<r?1-r:void 0)}function ha(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function _o(){return!0}function Rd(){return!1}function st(n){function e(t,r,i,s,o){this._reactName=t,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?_o:Rd,this.isPropagationStopped=Rd,this}return se(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=_o)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=_o)},persist:function(){},isPersistent:_o}),e}var ks={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},mf=st(ks),Oo=se({},ks,{view:0,detail:0}),$v=st(Oo),Zl,eu,Cs,Al=se({},Oo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pf,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Cs&&(Cs&&n.type==="mousemove"?(Zl=n.screenX-Cs.screenX,eu=n.screenY-Cs.screenY):eu=Zl=0,Cs=n),Zl)},movementY:function(n){return"movementY"in n?n.movementY:eu}}),Ld=st(Al),Uv=se({},Al,{dataTransfer:0}),jv=st(Uv),Vv=se({},Oo,{relatedTarget:0}),tu=st(Vv),qv=se({},ks,{animationName:0,elapsedTime:0,pseudoElement:0}),Kv=st(qv),Wv=se({},ks,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Hv=st(Wv),_v=se({},ks,{data:0}),Bd=st(_v),Gv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Yv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Qv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Xv(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=Qv[n])?!!e[n]:!1}function pf(){return Xv}var Zv=se({},Oo,{key:function(n){if(n.key){var e=Gv[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=ha(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Yv[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pf,charCode:function(n){return n.type==="keypress"?ha(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?ha(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),ew=st(Zv),tw=se({},Al,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),bd=st(tw),nw=se({},Oo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pf}),rw=st(nw),iw=se({},ks,{propertyName:0,elapsedTime:0,pseudoElement:0}),sw=st(iw),ow=se({},Al,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),aw=st(ow),lw=[9,13,27,32],yf=wr&&"CompositionEvent"in window,Vs=null;wr&&"documentMode"in document&&(Vs=document.documentMode);var uw=wr&&"TextEvent"in window&&!Vs,um=wr&&(!yf||Vs&&8<Vs&&11>=Vs),zd=" ",Fd=!1;function cm(n,e){switch(n){case"keyup":return lw.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fm(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Mi=!1;function cw(n,e){switch(n){case"compositionend":return fm(e);case"keypress":return e.which!==32?null:(Fd=!0,zd);case"textInput":return n=e.data,n===zd&&Fd?null:n;default:return null}}function fw(n,e){if(Mi)return n==="compositionend"||!yf&&cm(n,e)?(n=lm(),da=gf=zr=null,Mi=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return um&&e.locale!=="ko"?null:e.data;default:return null}}var dw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Md(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!dw[n.type]:e==="textarea"}function dm(n,e,t,r){Vg(r),e=ba(e,"onChange"),0<e.length&&(t=new mf("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var qs=null,ao=null;function hw(n){Im(n,0)}function El(n){var e=Ui(n);if(zg(e))return n}function gw(n,e){if(n==="change")return e}var hm=!1;if(wr){var nu;if(wr){var ru="oninput"in document;if(!ru){var Jd=document.createElement("div");Jd.setAttribute("oninput","return;"),ru=typeof Jd.oninput=="function"}nu=ru}else nu=!1;hm=nu&&(!document.documentMode||9<document.documentMode)}function $d(){qs&&(qs.detachEvent("onpropertychange",gm),ao=qs=null)}function gm(n){if(n.propertyName==="value"&&El(ao)){var e=[];dm(e,ao,n,uf(n)),Hg(hw,e)}}function mw(n,e,t){n==="focusin"?($d(),qs=e,ao=t,qs.attachEvent("onpropertychange",gm)):n==="focusout"&&$d()}function pw(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return El(ao)}function yw(n,e){if(n==="click")return El(e)}function vw(n,e){if(n==="input"||n==="change")return El(e)}function ww(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Jt=typeof Object.is=="function"?Object.is:ww;function lo(n,e){if(Jt(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var i=t[r];if(!Du.call(e,i)||!Jt(n[i],e[i]))return!1}return!0}function Ud(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function jd(n,e){var t=Ud(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=Ud(t)}}function mm(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?mm(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function pm(){for(var n=window,e=Pa();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=Pa(n.document)}return e}function vf(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function Sw(n){var e=pm(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&mm(t.ownerDocument.documentElement,t)){if(r!==null&&vf(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var i=t.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!n.extend&&s>r&&(i=r,r=s,s=i),i=jd(t,s);var o=jd(t,r);i&&o&&(n.rangeCount!==1||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),n.removeAllRanges(),s>r?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Tw=wr&&"documentMode"in document&&11>=document.documentMode,Ji=null,Gu=null,Ks=null,Yu=!1;function Vd(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;Yu||Ji==null||Ji!==Pa(r)||(r=Ji,"selectionStart"in r&&vf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ks&&lo(Ks,r)||(Ks=r,r=ba(Gu,"onSelect"),0<r.length&&(e=new mf("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=Ji)))}function Go(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var $i={animationend:Go("Animation","AnimationEnd"),animationiteration:Go("Animation","AnimationIteration"),animationstart:Go("Animation","AnimationStart"),transitionend:Go("Transition","TransitionEnd")},iu={},ym={};wr&&(ym=document.createElement("div").style,"AnimationEvent"in window||(delete $i.animationend.animation,delete $i.animationiteration.animation,delete $i.animationstart.animation),"TransitionEvent"in window||delete $i.transitionend.transition);function xl(n){if(iu[n])return iu[n];if(!$i[n])return n;var e=$i[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in ym)return iu[n]=e[t];return n}var vm=xl("animationend"),wm=xl("animationiteration"),Sm=xl("animationstart"),Tm=xl("transitionend"),km=new Map,qd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ti(n,e){km.set(n,e),Ci(e,[n])}for(var su=0;su<qd.length;su++){var ou=qd[su],kw=ou.toLowerCase(),Iw=ou[0].toUpperCase()+ou.slice(1);ti(kw,"on"+Iw)}ti(vm,"onAnimationEnd");ti(wm,"onAnimationIteration");ti(Sm,"onAnimationStart");ti("dblclick","onDoubleClick");ti("focusin","onFocus");ti("focusout","onBlur");ti(Tm,"onTransitionEnd");is("onMouseEnter",["mouseout","mouseover"]);is("onMouseLeave",["mouseout","mouseover"]);is("onPointerEnter",["pointerout","pointerover"]);is("onPointerLeave",["pointerout","pointerover"]);Ci("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ci("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ci("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ci("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ci("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ci("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Js="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Aw=new Set("cancel close invalid load scroll toggle".split(" ").concat(Js));function Kd(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,kv(r,e,void 0,n),n.currentTarget=null}function Im(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Kd(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Kd(i,a,c),s=l}}}if(Da)throw n=Ku,Da=!1,Ku=null,n}function X(n,e){var t=e[tc];t===void 0&&(t=e[tc]=new Set);var r=n+"__bubble";t.has(r)||(Am(e,n,2,!1),t.add(r))}function au(n,e,t){var r=0;e&&(r|=4),Am(t,n,r,e)}var Yo="_reactListening"+Math.random().toString(36).slice(2);function uo(n){if(!n[Yo]){n[Yo]=!0,Og.forEach(function(t){t!=="selectionchange"&&(Aw.has(t)||au(t,!1,n),au(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Yo]||(e[Yo]=!0,au("selectionchange",!1,e))}}function Am(n,e,t,r){switch(am(e)){case 1:var i=Mv;break;case 4:i=Jv;break;default:i=hf}t=i.bind(null,e,t,n),i=void 0,!qu||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?n.addEventListener(e,t,{capture:!0,passive:i}):n.addEventListener(e,t,!0):i!==void 0?n.addEventListener(e,t,{passive:i}):n.addEventListener(e,t,!1)}function lu(n,e,t,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=di(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}Hg(function(){var c=s,d=uf(t),h=[];e:{var g=km.get(n);if(g!==void 0){var p=mf,T=n;switch(n){case"keypress":if(ha(t)===0)break e;case"keydown":case"keyup":p=ew;break;case"focusin":T="focus",p=tu;break;case"focusout":T="blur",p=tu;break;case"beforeblur":case"afterblur":p=tu;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=Ld;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=jv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=rw;break;case vm:case wm:case Sm:p=Kv;break;case Tm:p=sw;break;case"scroll":p=$v;break;case"wheel":p=aw;break;case"copy":case"cut":case"paste":p=Hv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=bd}var k=(e&4)!==0,C=!k&&n==="scroll",y=k?g!==null?g+"Capture":null:g;k=[];for(var m=c,v;m!==null;){v=m;var A=v.stateNode;if(v.tag===5&&A!==null&&(v=A,y!==null&&(A=ro(m,y),A!=null&&k.push(co(m,A,v)))),C)break;m=m.return}0<k.length&&(g=new p(g,T,null,t,d),h.push({event:g,listeners:k}))}}if(!(e&7)){e:{if(g=n==="mouseover"||n==="pointerover",p=n==="mouseout"||n==="pointerout",g&&t!==ju&&(T=t.relatedTarget||t.fromElement)&&(di(T)||T[Sr]))break e;if((p||g)&&(g=d.window===d?d:(g=d.ownerDocument)?g.defaultView||g.parentWindow:window,p?(T=t.relatedTarget||t.toElement,p=c,T=T?di(T):null,T!==null&&(C=Di(T),T!==C||T.tag!==5&&T.tag!==6)&&(T=null)):(p=null,T=c),p!==T)){if(k=Ld,A="onMouseLeave",y="onMouseEnter",m="mouse",(n==="pointerout"||n==="pointerover")&&(k=bd,A="onPointerLeave",y="onPointerEnter",m="pointer"),C=p==null?g:Ui(p),v=T==null?g:Ui(T),g=new k(A,m+"leave",p,t,d),g.target=C,g.relatedTarget=v,A=null,di(d)===c&&(k=new k(y,m+"enter",T,t,d),k.target=v,k.relatedTarget=C,A=k),C=A,p&&T)t:{for(k=p,y=T,m=0,v=k;v;v=Ri(v))m++;for(v=0,A=y;A;A=Ri(A))v++;for(;0<m-v;)k=Ri(k),m--;for(;0<v-m;)y=Ri(y),v--;for(;m--;){if(k===y||y!==null&&k===y.alternate)break t;k=Ri(k),y=Ri(y)}k=null}else k=null;p!==null&&Wd(h,g,p,k,!1),T!==null&&C!==null&&Wd(h,C,T,k,!0)}}e:{if(g=c?Ui(c):window,p=g.nodeName&&g.nodeName.toLowerCase(),p==="select"||p==="input"&&g.type==="file")var N=gw;else if(Md(g))if(hm)N=vw;else{N=pw;var D=mw}else(p=g.nodeName)&&p.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(N=yw);if(N&&(N=N(n,c))){dm(h,N,t,d);break e}D&&D(n,g,c),n==="focusout"&&(D=g._wrapperState)&&D.controlled&&g.type==="number"&&Fu(g,"number",g.value)}switch(D=c?Ui(c):window,n){case"focusin":(Md(D)||D.contentEditable==="true")&&(Ji=D,Gu=c,Ks=null);break;case"focusout":Ks=Gu=Ji=null;break;case"mousedown":Yu=!0;break;case"contextmenu":case"mouseup":case"dragend":Yu=!1,Vd(h,t,d);break;case"selectionchange":if(Tw)break;case"keydown":case"keyup":Vd(h,t,d)}var O;if(yf)e:{switch(n){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Mi?cm(n,t)&&(b="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(b="onCompositionStart");b&&(um&&t.locale!=="ko"&&(Mi||b!=="onCompositionStart"?b==="onCompositionEnd"&&Mi&&(O=lm()):(zr=d,gf="value"in zr?zr.value:zr.textContent,Mi=!0)),D=ba(c,b),0<D.length&&(b=new Bd(b,n,null,t,d),h.push({event:b,listeners:D}),O?b.data=O:(O=fm(t),O!==null&&(b.data=O)))),(O=uw?cw(n,t):fw(n,t))&&(c=ba(c,"onBeforeInput"),0<c.length&&(d=new Bd("onBeforeInput","beforeinput",null,t,d),h.push({event:d,listeners:c}),d.data=O))}Im(h,e)})}function co(n,e,t){return{instance:n,listener:e,currentTarget:t}}function ba(n,e){for(var t=e+"Capture",r=[];n!==null;){var i=n,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=ro(n,t),s!=null&&r.unshift(co(n,s,i)),s=ro(n,e),s!=null&&r.push(co(n,s,i))),n=n.return}return r}function Ri(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Wd(n,e,t,r,i){for(var s=e._reactName,o=[];t!==null&&t!==r;){var a=t,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=ro(t,s),l!=null&&o.unshift(co(t,l,a))):i||(l=ro(t,s),l!=null&&o.push(co(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var Ew=/\r\n?/g,xw=/\u0000|\uFFFD/g;function Hd(n){return(typeof n=="string"?n:""+n).replace(Ew,`
`).replace(xw,"")}function Qo(n,e,t){if(e=Hd(e),Hd(n)!==e&&t)throw Error(x(425))}function za(){}var Qu=null,Xu=null;function Zu(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ec=typeof setTimeout=="function"?setTimeout:void 0,Nw=typeof clearTimeout=="function"?clearTimeout:void 0,_d=typeof Promise=="function"?Promise:void 0,Pw=typeof queueMicrotask=="function"?queueMicrotask:typeof _d<"u"?function(n){return _d.resolve(null).then(n).catch(Cw)}:ec;function Cw(n){setTimeout(function(){throw n})}function uu(n,e){var t=e,r=0;do{var i=t.nextSibling;if(n.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(r===0){n.removeChild(i),oo(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=i}while(t);oo(e)}function jr(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function Gd(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var Is=Math.random().toString(36).slice(2),Kt="__reactFiber$"+Is,fo="__reactProps$"+Is,Sr="__reactContainer$"+Is,tc="__reactEvents$"+Is,Dw="__reactListeners$"+Is,Ow="__reactHandles$"+Is;function di(n){var e=n[Kt];if(e)return e;for(var t=n.parentNode;t;){if(e=t[Sr]||t[Kt]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=Gd(n);n!==null;){if(t=n[Kt])return t;n=Gd(n)}return e}n=t,t=n.parentNode}return null}function Ro(n){return n=n[Kt]||n[Sr],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Ui(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(x(33))}function Nl(n){return n[fo]||null}var nc=[],ji=-1;function ni(n){return{current:n}}function Z(n){0>ji||(n.current=nc[ji],nc[ji]=null,ji--)}function Q(n,e){ji++,nc[ji]=n.current,n.current=e}var Xr={},Re=ni(Xr),qe=ni(!1),Ti=Xr;function ss(n,e){var t=n.type.contextTypes;if(!t)return Xr;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in t)i[s]=e[s];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=i),i}function Ke(n){return n=n.childContextTypes,n!=null}function Fa(){Z(qe),Z(Re)}function Yd(n,e,t){if(Re.current!==Xr)throw Error(x(168));Q(Re,e),Q(qe,t)}function Em(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(x(108,mv(n)||"Unknown",i));return se({},t,r)}function Ma(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Xr,Ti=Re.current,Q(Re,n),Q(qe,qe.current),!0}function Qd(n,e,t){var r=n.stateNode;if(!r)throw Error(x(169));t?(n=Em(n,e,Ti),r.__reactInternalMemoizedMergedChildContext=n,Z(qe),Z(Re),Q(Re,n)):Z(qe),Q(qe,t)}var ur=null,Pl=!1,cu=!1;function xm(n){ur===null?ur=[n]:ur.push(n)}function Rw(n){Pl=!0,xm(n)}function ri(){if(!cu&&ur!==null){cu=!0;var n=0,e=G;try{var t=ur;for(G=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}ur=null,Pl=!1}catch(i){throw ur!==null&&(ur=ur.slice(n+1)),Qg(cf,ri),i}finally{G=e,cu=!1}}return null}var Vi=[],qi=0,Ja=null,$a=0,ot=[],at=0,ki=null,fr=1,dr="";function li(n,e){Vi[qi++]=$a,Vi[qi++]=Ja,Ja=n,$a=e}function Nm(n,e,t){ot[at++]=fr,ot[at++]=dr,ot[at++]=ki,ki=n;var r=fr;n=dr;var i=32-zt(r)-1;r&=~(1<<i),t+=1;var s=32-zt(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,fr=1<<32-zt(e)+i|t<<i|r,dr=s+n}else fr=1<<s|t<<i|r,dr=n}function wf(n){n.return!==null&&(li(n,1),Nm(n,1,0))}function Sf(n){for(;n===Ja;)Ja=Vi[--qi],Vi[qi]=null,$a=Vi[--qi],Vi[qi]=null;for(;n===ki;)ki=ot[--at],ot[at]=null,dr=ot[--at],ot[at]=null,fr=ot[--at],ot[at]=null}var et=null,Qe=null,te=!1,Lt=null;function Pm(n,e){var t=vt(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function Xd(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,et=n,Qe=jr(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,et=n,Qe=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=ki!==null?{id:fr,overflow:dr}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=vt(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,et=n,Qe=null,!0):!1;default:return!1}}function rc(n){return(n.mode&1)!==0&&(n.flags&128)===0}function ic(n){if(te){var e=Qe;if(e){var t=e;if(!Xd(n,e)){if(rc(n))throw Error(x(418));e=jr(t.nextSibling);var r=et;e&&Xd(n,e)?Pm(r,t):(n.flags=n.flags&-4097|2,te=!1,et=n)}}else{if(rc(n))throw Error(x(418));n.flags=n.flags&-4097|2,te=!1,et=n}}}function Zd(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;et=n}function Xo(n){if(n!==et)return!1;if(!te)return Zd(n),te=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!Zu(n.type,n.memoizedProps)),e&&(e=Qe)){if(rc(n))throw Cm(),Error(x(418));for(;e;)Pm(n,e),e=jr(e.nextSibling)}if(Zd(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(x(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){Qe=jr(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}Qe=null}}else Qe=et?jr(n.stateNode.nextSibling):null;return!0}function Cm(){for(var n=Qe;n;)n=jr(n.nextSibling)}function os(){Qe=et=null,te=!1}function Tf(n){Lt===null?Lt=[n]:Lt.push(n)}var Lw=Er.ReactCurrentBatchConfig;function Ct(n,e){if(n&&n.defaultProps){e=se({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}var Ua=ni(null),ja=null,Ki=null,kf=null;function If(){kf=Ki=ja=null}function Af(n){var e=Ua.current;Z(Ua),n._currentValue=e}function sc(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function es(n,e){ja=n,kf=Ki=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(je=!0),n.firstContext=null)}function It(n){var e=n._currentValue;if(kf!==n)if(n={context:n,memoizedValue:e,next:null},Ki===null){if(ja===null)throw Error(x(308));Ki=n,ja.dependencies={lanes:0,firstContext:n}}else Ki=Ki.next=n;return e}var hi=null;function Ef(n){hi===null?hi=[n]:hi.push(n)}function Dm(n,e,t,r){var i=e.interleaved;return i===null?(t.next=t,Ef(e)):(t.next=i.next,i.next=t),e.interleaved=t,Tr(n,r)}function Tr(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var Lr=!1;function xf(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Om(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function pr(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function Vr(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,W&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Tr(n,t)}return i=r.interleaved,i===null?(e.next=e,Ef(r)):(e.next=i.next,i.next=e),r.interleaved=e,Tr(n,t)}function ga(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,ff(n,t)}}function eh(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var i=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?i=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?i=s=e:s=s.next=e}else i=s=e;t={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function Va(n,e,t,r){var i=n.updateQueue;Lr=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var d=n.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(s!==null){var h=i.baseState;o=0,d=c=l=null,a=s;do{var g=a.lane,p=a.eventTime;if((r&g)===g){d!==null&&(d=d.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var T=n,k=a;switch(g=e,p=t,k.tag){case 1:if(T=k.payload,typeof T=="function"){h=T.call(p,h,g);break e}h=T;break e;case 3:T.flags=T.flags&-65537|128;case 0:if(T=k.payload,g=typeof T=="function"?T.call(p,h,g):T,g==null)break e;h=se({},h,g);break e;case 2:Lr=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,g=i.effects,g===null?i.effects=[a]:g.push(a))}else p={eventTime:p,lane:g,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=p,l=h):d=d.next=p,o|=g;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;g=a,a=g.next,g.next=null,i.lastBaseUpdate=g,i.shared.pending=null}}while(!0);if(d===null&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Ai|=o,n.lanes=o,n.memoizedState=h}}function th(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],i=r.callback;if(i!==null){if(r.callback=null,r=t,typeof i!="function")throw Error(x(191,i));i.call(r)}}}var Rm=new Dg.Component().refs;function oc(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:se({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var Cl={isMounted:function(n){return(n=n._reactInternals)?Di(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=ze(),i=Kr(n),s=pr(r,i);s.payload=e,t!=null&&(s.callback=t),e=Vr(n,s,i),e!==null&&(Ft(e,n,i,r),ga(e,n,i))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=ze(),i=Kr(n),s=pr(r,i);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=Vr(n,s,i),e!==null&&(Ft(e,n,i,r),ga(e,n,i))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=ze(),r=Kr(n),i=pr(t,r);i.tag=2,e!=null&&(i.callback=e),e=Vr(n,i,r),e!==null&&(Ft(e,n,r,t),ga(e,n,r))}};function nh(n,e,t,r,i,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!lo(t,r)||!lo(i,s):!0}function Lm(n,e,t){var r=!1,i=Xr,s=e.contextType;return typeof s=="object"&&s!==null?s=It(s):(i=Ke(e)?Ti:Re.current,r=e.contextTypes,s=(r=r!=null)?ss(n,i):Xr),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Cl,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=s),e}function rh(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&Cl.enqueueReplaceState(e,e.state,null)}function ac(n,e,t,r){var i=n.stateNode;i.props=t,i.state=n.memoizedState,i.refs=Rm,xf(n);var s=e.contextType;typeof s=="object"&&s!==null?i.context=It(s):(s=Ke(e)?Ti:Re.current,i.context=ss(n,s)),i.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(oc(n,e,s,t),i.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Cl.enqueueReplaceState(i,i.state,null),Va(n,t,i,r),i.state=n.memoizedState),typeof i.componentDidMount=="function"&&(n.flags|=4194308)}function Ds(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(x(309));var r=t.stateNode}if(!r)throw Error(x(147,n));var i=r,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===Rm&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(x(284));if(!t._owner)throw Error(x(290,n))}return n}function Zo(n,e){throw n=Object.prototype.toString.call(e),Error(x(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function ih(n){var e=n._init;return e(n._payload)}function Bm(n){function e(y,m){if(n){var v=y.deletions;v===null?(y.deletions=[m],y.flags|=16):v.push(m)}}function t(y,m){if(!n)return null;for(;m!==null;)e(y,m),m=m.sibling;return null}function r(y,m){for(y=new Map;m!==null;)m.key!==null?y.set(m.key,m):y.set(m.index,m),m=m.sibling;return y}function i(y,m){return y=Wr(y,m),y.index=0,y.sibling=null,y}function s(y,m,v){return y.index=v,n?(v=y.alternate,v!==null?(v=v.index,v<m?(y.flags|=2,m):v):(y.flags|=2,m)):(y.flags|=1048576,m)}function o(y){return n&&y.alternate===null&&(y.flags|=2),y}function a(y,m,v,A){return m===null||m.tag!==6?(m=yu(v,y.mode,A),m.return=y,m):(m=i(m,v),m.return=y,m)}function l(y,m,v,A){var N=v.type;return N===Fi?d(y,m,v.props.children,A,v.key):m!==null&&(m.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Rr&&ih(N)===m.type)?(A=i(m,v.props),A.ref=Ds(y,m,v),A.return=y,A):(A=Sa(v.type,v.key,v.props,null,y.mode,A),A.ref=Ds(y,m,v),A.return=y,A)}function c(y,m,v,A){return m===null||m.tag!==4||m.stateNode.containerInfo!==v.containerInfo||m.stateNode.implementation!==v.implementation?(m=vu(v,y.mode,A),m.return=y,m):(m=i(m,v.children||[]),m.return=y,m)}function d(y,m,v,A,N){return m===null||m.tag!==7?(m=vi(v,y.mode,A,N),m.return=y,m):(m=i(m,v),m.return=y,m)}function h(y,m,v){if(typeof m=="string"&&m!==""||typeof m=="number")return m=yu(""+m,y.mode,v),m.return=y,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case jo:return v=Sa(m.type,m.key,m.props,null,y.mode,v),v.ref=Ds(y,null,m),v.return=y,v;case zi:return m=vu(m,y.mode,v),m.return=y,m;case Rr:var A=m._init;return h(y,A(m._payload),v)}if(Fs(m)||Es(m))return m=vi(m,y.mode,v,null),m.return=y,m;Zo(y,m)}return null}function g(y,m,v,A){var N=m!==null?m.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return N!==null?null:a(y,m,""+v,A);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case jo:return v.key===N?l(y,m,v,A):null;case zi:return v.key===N?c(y,m,v,A):null;case Rr:return N=v._init,g(y,m,N(v._payload),A)}if(Fs(v)||Es(v))return N!==null?null:d(y,m,v,A,null);Zo(y,v)}return null}function p(y,m,v,A,N){if(typeof A=="string"&&A!==""||typeof A=="number")return y=y.get(v)||null,a(m,y,""+A,N);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case jo:return y=y.get(A.key===null?v:A.key)||null,l(m,y,A,N);case zi:return y=y.get(A.key===null?v:A.key)||null,c(m,y,A,N);case Rr:var D=A._init;return p(y,m,v,D(A._payload),N)}if(Fs(A)||Es(A))return y=y.get(v)||null,d(m,y,A,N,null);Zo(m,A)}return null}function T(y,m,v,A){for(var N=null,D=null,O=m,b=m=0,ee=null;O!==null&&b<v.length;b++){O.index>b?(ee=O,O=null):ee=O.sibling;var U=g(y,O,v[b],A);if(U===null){O===null&&(O=ee);break}n&&O&&U.alternate===null&&e(y,O),m=s(U,m,b),D===null?N=U:D.sibling=U,D=U,O=ee}if(b===v.length)return t(y,O),te&&li(y,b),N;if(O===null){for(;b<v.length;b++)O=h(y,v[b],A),O!==null&&(m=s(O,m,b),D===null?N=O:D.sibling=O,D=O);return te&&li(y,b),N}for(O=r(y,O);b<v.length;b++)ee=p(O,y,b,v[b],A),ee!==null&&(n&&ee.alternate!==null&&O.delete(ee.key===null?b:ee.key),m=s(ee,m,b),D===null?N=ee:D.sibling=ee,D=ee);return n&&O.forEach(function(Ge){return e(y,Ge)}),te&&li(y,b),N}function k(y,m,v,A){var N=Es(v);if(typeof N!="function")throw Error(x(150));if(v=N.call(v),v==null)throw Error(x(151));for(var D=N=null,O=m,b=m=0,ee=null,U=v.next();O!==null&&!U.done;b++,U=v.next()){O.index>b?(ee=O,O=null):ee=O.sibling;var Ge=g(y,O,U.value,A);if(Ge===null){O===null&&(O=ee);break}n&&O&&Ge.alternate===null&&e(y,O),m=s(Ge,m,b),D===null?N=Ge:D.sibling=Ge,D=Ge,O=ee}if(U.done)return t(y,O),te&&li(y,b),N;if(O===null){for(;!U.done;b++,U=v.next())U=h(y,U.value,A),U!==null&&(m=s(U,m,b),D===null?N=U:D.sibling=U,D=U);return te&&li(y,b),N}for(O=r(y,O);!U.done;b++,U=v.next())U=p(O,y,b,U.value,A),U!==null&&(n&&U.alternate!==null&&O.delete(U.key===null?b:U.key),m=s(U,m,b),D===null?N=U:D.sibling=U,D=U);return n&&O.forEach(function(ii){return e(y,ii)}),te&&li(y,b),N}function C(y,m,v,A){if(typeof v=="object"&&v!==null&&v.type===Fi&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case jo:e:{for(var N=v.key,D=m;D!==null;){if(D.key===N){if(N=v.type,N===Fi){if(D.tag===7){t(y,D.sibling),m=i(D,v.props.children),m.return=y,y=m;break e}}else if(D.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Rr&&ih(N)===D.type){t(y,D.sibling),m=i(D,v.props),m.ref=Ds(y,D,v),m.return=y,y=m;break e}t(y,D);break}else e(y,D);D=D.sibling}v.type===Fi?(m=vi(v.props.children,y.mode,A,v.key),m.return=y,y=m):(A=Sa(v.type,v.key,v.props,null,y.mode,A),A.ref=Ds(y,m,v),A.return=y,y=A)}return o(y);case zi:e:{for(D=v.key;m!==null;){if(m.key===D)if(m.tag===4&&m.stateNode.containerInfo===v.containerInfo&&m.stateNode.implementation===v.implementation){t(y,m.sibling),m=i(m,v.children||[]),m.return=y,y=m;break e}else{t(y,m);break}else e(y,m);m=m.sibling}m=vu(v,y.mode,A),m.return=y,y=m}return o(y);case Rr:return D=v._init,C(y,m,D(v._payload),A)}if(Fs(v))return T(y,m,v,A);if(Es(v))return k(y,m,v,A);Zo(y,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,m!==null&&m.tag===6?(t(y,m.sibling),m=i(m,v),m.return=y,y=m):(t(y,m),m=yu(v,y.mode,A),m.return=y,y=m),o(y)):t(y,m)}return C}var as=Bm(!0),bm=Bm(!1),Lo={},rn=ni(Lo),ho=ni(Lo),go=ni(Lo);function gi(n){if(n===Lo)throw Error(x(174));return n}function Nf(n,e){switch(Q(go,e),Q(ho,n),Q(rn,Lo),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ju(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=Ju(e,n)}Z(rn),Q(rn,e)}function ls(){Z(rn),Z(ho),Z(go)}function zm(n){gi(go.current);var e=gi(rn.current),t=Ju(e,n.type);e!==t&&(Q(ho,n),Q(rn,t))}function Pf(n){ho.current===n&&(Z(rn),Z(ho))}var re=ni(0);function qa(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var fu=[];function Cf(){for(var n=0;n<fu.length;n++)fu[n]._workInProgressVersionPrimary=null;fu.length=0}var ma=Er.ReactCurrentDispatcher,du=Er.ReactCurrentBatchConfig,Ii=0,ie=null,ye=null,Te=null,Ka=!1,Ws=!1,mo=0,Bw=0;function Pe(){throw Error(x(321))}function Df(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!Jt(n[t],e[t]))return!1;return!0}function Of(n,e,t,r,i,s){if(Ii=s,ie=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ma.current=n===null||n.memoizedState===null?Mw:Jw,n=t(r,i),Ws){s=0;do{if(Ws=!1,mo=0,25<=s)throw Error(x(301));s+=1,Te=ye=null,e.updateQueue=null,ma.current=$w,n=t(r,i)}while(Ws)}if(ma.current=Wa,e=ye!==null&&ye.next!==null,Ii=0,Te=ye=ie=null,Ka=!1,e)throw Error(x(300));return n}function Rf(){var n=mo!==0;return mo=0,n}function jt(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Te===null?ie.memoizedState=Te=n:Te=Te.next=n,Te}function At(){if(ye===null){var n=ie.alternate;n=n!==null?n.memoizedState:null}else n=ye.next;var e=Te===null?ie.memoizedState:Te.next;if(e!==null)Te=e,ye=n;else{if(n===null)throw Error(x(310));ye=n,n={memoizedState:ye.memoizedState,baseState:ye.baseState,baseQueue:ye.baseQueue,queue:ye.queue,next:null},Te===null?ie.memoizedState=Te=n:Te=Te.next=n}return Te}function po(n,e){return typeof e=="function"?e(n):e}function hu(n){var e=At(),t=e.queue;if(t===null)throw Error(x(311));t.lastRenderedReducer=n;var r=ye,i=r.baseQueue,s=t.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,t.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var d=c.lane;if((Ii&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:n(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,ie.lanes|=d,Ai|=d}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,Jt(r,e.memoizedState)||(je=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,t.lastRenderedState=r}if(n=t.interleaved,n!==null){i=n;do s=i.lane,ie.lanes|=s,Ai|=s,i=i.next;while(i!==n)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function gu(n){var e=At(),t=e.queue;if(t===null)throw Error(x(311));t.lastRenderedReducer=n;var r=t.dispatch,i=t.pending,s=e.memoizedState;if(i!==null){t.pending=null;var o=i=i.next;do s=n(s,o.action),o=o.next;while(o!==i);Jt(s,e.memoizedState)||(je=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,r]}function Fm(){}function Mm(n,e){var t=ie,r=At(),i=e(),s=!Jt(r.memoizedState,i);if(s&&(r.memoizedState=i,je=!0),r=r.queue,Lf(Um.bind(null,t,r,n),[n]),r.getSnapshot!==e||s||Te!==null&&Te.memoizedState.tag&1){if(t.flags|=2048,yo(9,$m.bind(null,t,r,i,e),void 0,null),ke===null)throw Error(x(349));Ii&30||Jm(t,e,i)}return i}function Jm(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=ie.updateQueue,e===null?(e={lastEffect:null,stores:null},ie.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function $m(n,e,t,r){e.value=t,e.getSnapshot=r,jm(e)&&Vm(n)}function Um(n,e,t){return t(function(){jm(e)&&Vm(n)})}function jm(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Jt(n,t)}catch{return!0}}function Vm(n){var e=Tr(n,1);e!==null&&Ft(e,n,1,-1)}function sh(n){var e=jt();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:po,lastRenderedState:n},e.queue=n,n=n.dispatch=Fw.bind(null,ie,n),[e.memoizedState,n]}function yo(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=ie.updateQueue,e===null?(e={lastEffect:null,stores:null},ie.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function qm(){return At().memoizedState}function pa(n,e,t,r){var i=jt();ie.flags|=n,i.memoizedState=yo(1|e,t,void 0,r===void 0?null:r)}function Dl(n,e,t,r){var i=At();r=r===void 0?null:r;var s=void 0;if(ye!==null){var o=ye.memoizedState;if(s=o.destroy,r!==null&&Df(r,o.deps)){i.memoizedState=yo(e,t,s,r);return}}ie.flags|=n,i.memoizedState=yo(1|e,t,s,r)}function oh(n,e){return pa(8390656,8,n,e)}function Lf(n,e){return Dl(2048,8,n,e)}function Km(n,e){return Dl(4,2,n,e)}function Wm(n,e){return Dl(4,4,n,e)}function Hm(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function _m(n,e,t){return t=t!=null?t.concat([n]):null,Dl(4,4,Hm.bind(null,e,n),t)}function Bf(){}function Gm(n,e){var t=At();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&Df(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function Ym(n,e){var t=At();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&Df(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function Qm(n,e,t){return Ii&21?(Jt(t,e)||(t=em(),ie.lanes|=t,Ai|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,je=!0),n.memoizedState=t)}function bw(n,e){var t=G;G=t!==0&&4>t?t:4,n(!0);var r=du.transition;du.transition={};try{n(!1),e()}finally{G=t,du.transition=r}}function Xm(){return At().memoizedState}function zw(n,e,t){var r=Kr(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},Zm(n))ep(e,t);else if(t=Dm(n,e,t,r),t!==null){var i=ze();Ft(t,n,r,i),tp(t,e,r)}}function Fw(n,e,t){var r=Kr(n),i={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(Zm(n))ep(e,i);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(i.hasEagerState=!0,i.eagerState=a,Jt(a,o)){var l=e.interleaved;l===null?(i.next=i,Ef(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}t=Dm(n,e,i,r),t!==null&&(i=ze(),Ft(t,n,r,i),tp(t,e,r))}}function Zm(n){var e=n.alternate;return n===ie||e!==null&&e===ie}function ep(n,e){Ws=Ka=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function tp(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,ff(n,t)}}var Wa={readContext:It,useCallback:Pe,useContext:Pe,useEffect:Pe,useImperativeHandle:Pe,useInsertionEffect:Pe,useLayoutEffect:Pe,useMemo:Pe,useReducer:Pe,useRef:Pe,useState:Pe,useDebugValue:Pe,useDeferredValue:Pe,useTransition:Pe,useMutableSource:Pe,useSyncExternalStore:Pe,useId:Pe,unstable_isNewReconciler:!1},Mw={readContext:It,useCallback:function(n,e){return jt().memoizedState=[n,e===void 0?null:e],n},useContext:It,useEffect:oh,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,pa(4194308,4,Hm.bind(null,e,n),t)},useLayoutEffect:function(n,e){return pa(4194308,4,n,e)},useInsertionEffect:function(n,e){return pa(4,2,n,e)},useMemo:function(n,e){var t=jt();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=jt();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=zw.bind(null,ie,n),[r.memoizedState,n]},useRef:function(n){var e=jt();return n={current:n},e.memoizedState=n},useState:sh,useDebugValue:Bf,useDeferredValue:function(n){return jt().memoizedState=n},useTransition:function(){var n=sh(!1),e=n[0];return n=bw.bind(null,n[1]),jt().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=ie,i=jt();if(te){if(t===void 0)throw Error(x(407));t=t()}else{if(t=e(),ke===null)throw Error(x(349));Ii&30||Jm(r,e,t)}i.memoizedState=t;var s={value:t,getSnapshot:e};return i.queue=s,oh(Um.bind(null,r,s,n),[n]),r.flags|=2048,yo(9,$m.bind(null,r,s,t,e),void 0,null),t},useId:function(){var n=jt(),e=ke.identifierPrefix;if(te){var t=dr,r=fr;t=(r&~(1<<32-zt(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=mo++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=Bw++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},Jw={readContext:It,useCallback:Gm,useContext:It,useEffect:Lf,useImperativeHandle:_m,useInsertionEffect:Km,useLayoutEffect:Wm,useMemo:Ym,useReducer:hu,useRef:qm,useState:function(){return hu(po)},useDebugValue:Bf,useDeferredValue:function(n){var e=At();return Qm(e,ye.memoizedState,n)},useTransition:function(){var n=hu(po)[0],e=At().memoizedState;return[n,e]},useMutableSource:Fm,useSyncExternalStore:Mm,useId:Xm,unstable_isNewReconciler:!1},$w={readContext:It,useCallback:Gm,useContext:It,useEffect:Lf,useImperativeHandle:_m,useInsertionEffect:Km,useLayoutEffect:Wm,useMemo:Ym,useReducer:gu,useRef:qm,useState:function(){return gu(po)},useDebugValue:Bf,useDeferredValue:function(n){var e=At();return ye===null?e.memoizedState=n:Qm(e,ye.memoizedState,n)},useTransition:function(){var n=gu(po)[0],e=At().memoizedState;return[n,e]},useMutableSource:Fm,useSyncExternalStore:Mm,useId:Xm,unstable_isNewReconciler:!1};function us(n,e){try{var t="",r=e;do t+=gv(r),r=r.return;while(r);var i=t}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:i,digest:null}}function mu(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function lc(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var Uw=typeof WeakMap=="function"?WeakMap:Map;function np(n,e,t){t=pr(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){_a||(_a=!0,vc=r),lc(n,e)},t}function rp(n,e,t){t=pr(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;t.payload=function(){return r(i)},t.callback=function(){lc(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){lc(n,e),typeof r!="function"&&(qr===null?qr=new Set([this]):qr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function ah(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new Uw;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(t)||(i.add(t),n=t0.bind(null,n,e,t),e.then(n,n))}function lh(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function uh(n,e,t,r,i){return n.mode&1?(n.flags|=65536,n.lanes=i,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=pr(-1,1),e.tag=2,Vr(t,e,1))),t.lanes|=1),n)}var jw=Er.ReactCurrentOwner,je=!1;function Be(n,e,t,r){e.child=n===null?bm(e,null,t,r):as(e,n.child,t,r)}function ch(n,e,t,r,i){t=t.render;var s=e.ref;return es(e,i),r=Of(n,e,t,r,s,i),t=Rf(),n!==null&&!je?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,kr(n,e,i)):(te&&t&&wf(e),e.flags|=1,Be(n,e,r,i),e.child)}function fh(n,e,t,r,i){if(n===null){var s=t.type;return typeof s=="function"&&!jf(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,ip(n,e,s,r,i)):(n=Sa(t.type,null,r,e,e.mode,i),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&i)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:lo,t(o,r)&&n.ref===e.ref)return kr(n,e,i)}return e.flags|=1,n=Wr(s,r),n.ref=e.ref,n.return=e,e.child=n}function ip(n,e,t,r,i){if(n!==null){var s=n.memoizedProps;if(lo(s,r)&&n.ref===e.ref)if(je=!1,e.pendingProps=r=s,(n.lanes&i)!==0)n.flags&131072&&(je=!0);else return e.lanes=n.lanes,kr(n,e,i)}return uc(n,e,t,r,i)}function sp(n,e,t){var r=e.pendingProps,i=r.children,s=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Q(Hi,Ye),Ye|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,Q(Hi,Ye),Ye|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:t,Q(Hi,Ye),Ye|=r}else s!==null?(r=s.baseLanes|t,e.memoizedState=null):r=t,Q(Hi,Ye),Ye|=r;return Be(n,e,i,t),e.child}function op(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function uc(n,e,t,r,i){var s=Ke(t)?Ti:Re.current;return s=ss(e,s),es(e,i),t=Of(n,e,t,r,s,i),r=Rf(),n!==null&&!je?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,kr(n,e,i)):(te&&r&&wf(e),e.flags|=1,Be(n,e,t,i),e.child)}function dh(n,e,t,r,i){if(Ke(t)){var s=!0;Ma(e)}else s=!1;if(es(e,i),e.stateNode===null)ya(n,e),Lm(e,t,r),ac(e,t,r,i),r=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=t.contextType;typeof c=="object"&&c!==null?c=It(c):(c=Ke(t)?Ti:Re.current,c=ss(e,c));var d=t.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&rh(e,o,r,c),Lr=!1;var g=e.memoizedState;o.state=g,Va(e,r,o,i),l=e.memoizedState,a!==r||g!==l||qe.current||Lr?(typeof d=="function"&&(oc(e,t,d,r),l=e.memoizedState),(a=Lr||nh(e,t,a,r,g,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Om(n,e),a=e.memoizedProps,c=e.type===e.elementType?a:Ct(e.type,a),o.props=c,h=e.pendingProps,g=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=It(l):(l=Ke(t)?Ti:Re.current,l=ss(e,l));var p=t.getDerivedStateFromProps;(d=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||g!==l)&&rh(e,o,r,l),Lr=!1,g=e.memoizedState,o.state=g,Va(e,r,o,i);var T=e.memoizedState;a!==h||g!==T||qe.current||Lr?(typeof p=="function"&&(oc(e,t,p,r),T=e.memoizedState),(c=Lr||nh(e,t,c,r,g,T,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,T,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,T,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&g===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&g===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=T),o.props=r,o.state=T,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&g===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&g===n.memoizedState||(e.flags|=1024),r=!1)}return cc(n,e,t,r,s,i)}function cc(n,e,t,r,i,s){op(n,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Qd(e,t,!1),kr(n,e,s);r=e.stateNode,jw.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&o?(e.child=as(e,n.child,null,s),e.child=as(e,null,a,s)):Be(n,e,a,s),e.memoizedState=r.state,i&&Qd(e,t,!0),e.child}function ap(n){var e=n.stateNode;e.pendingContext?Yd(n,e.pendingContext,e.pendingContext!==e.context):e.context&&Yd(n,e.context,!1),Nf(n,e.containerInfo)}function hh(n,e,t,r,i){return os(),Tf(i),e.flags|=256,Be(n,e,t,r),e.child}var fc={dehydrated:null,treeContext:null,retryLane:0};function dc(n){return{baseLanes:n,cachePool:null,transitions:null}}function lp(n,e,t){var r=e.pendingProps,i=re.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(i|=1),Q(re,i&1),n===null)return ic(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,n=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Ll(o,r,0,null),n=vi(n,r,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=dc(t),e.memoizedState=fc,n):bf(e,o));if(i=n.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return Vw(n,e,o,r,a,i,t);if(s){s=r.fallback,o=e.mode,i=n.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Wr(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Wr(a,s):(s=vi(s,o,t,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=n.child.memoizedState,o=o===null?dc(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=fc,r}return s=n.child,n=s.sibling,r=Wr(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function bf(n,e){return e=Ll({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function ea(n,e,t,r){return r!==null&&Tf(r),as(e,n.child,null,t),n=bf(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function Vw(n,e,t,r,i,s,o){if(t)return e.flags&256?(e.flags&=-257,r=mu(Error(x(422))),ea(n,e,o,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Ll({mode:"visible",children:r.children},i,0,null),s=vi(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&as(e,n.child,null,o),e.child.memoizedState=dc(o),e.memoizedState=fc,s);if(!(e.mode&1))return ea(n,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(x(419)),r=mu(s,r,void 0),ea(n,e,o,r)}if(a=(o&n.childLanes)!==0,je||a){if(r=ke,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Tr(n,i),Ft(r,n,i,-1))}return Uf(),r=mu(Error(x(421))),ea(n,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=n.child,e=n0.bind(null,n),i._reactRetry=e,null):(n=s.treeContext,Qe=jr(i.nextSibling),et=e,te=!0,Lt=null,n!==null&&(ot[at++]=fr,ot[at++]=dr,ot[at++]=ki,fr=n.id,dr=n.overflow,ki=e),e=bf(e,r.children),e.flags|=4096,e)}function gh(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),sc(n.return,e,t)}function pu(n,e,t,r,i){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=t,s.tailMode=i)}function up(n,e,t){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Be(n,e,r.children,t),r=re.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&gh(n,t,e);else if(n.tag===19)gh(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(Q(re,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)n=t.alternate,n!==null&&qa(n)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),pu(e,!1,i,t,s);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(n=i.alternate,n!==null&&qa(n)===null){e.child=i;break}n=i.sibling,i.sibling=t,t=i,i=n}pu(e,!0,t,null,s);break;case"together":pu(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ya(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function kr(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),Ai|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(x(153));if(e.child!==null){for(n=e.child,t=Wr(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=Wr(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function qw(n,e,t){switch(e.tag){case 3:ap(e),os();break;case 5:zm(e);break;case 1:Ke(e.type)&&Ma(e);break;case 4:Nf(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Q(Ua,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Q(re,re.current&1),e.flags|=128,null):t&e.child.childLanes?lp(n,e,t):(Q(re,re.current&1),n=kr(n,e,t),n!==null?n.sibling:null);Q(re,re.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return up(n,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Q(re,re.current),r)break;return null;case 22:case 23:return e.lanes=0,sp(n,e,t)}return kr(n,e,t)}var cp,hc,fp,dp;cp=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};hc=function(){};fp=function(n,e,t,r){var i=n.memoizedProps;if(i!==r){n=e.stateNode,gi(rn.current);var s=null;switch(t){case"input":i=bu(n,i),r=bu(n,r),s=[];break;case"select":i=se({},i,{value:void 0}),r=se({},r,{value:void 0}),s=[];break;case"textarea":i=Mu(n,i),r=Mu(n,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=za)}$u(t,r);var o;t=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(to.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(s||(s=[]),s.push(c,t)),t=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(to.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&X("scroll",n),s||a===l||(s=[])):(s=s||[]).push(c,l))}t&&(s=s||[]).push("style",t);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};dp=function(n,e,t,r){t!==r&&(e.flags|=4)};function Os(n,e){if(!te)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function Ce(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=n,i=i.sibling;else for(i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=n,i=i.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function Kw(n,e,t){var r=e.pendingProps;switch(Sf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ce(e),null;case 1:return Ke(e.type)&&Fa(),Ce(e),null;case 3:return r=e.stateNode,ls(),Z(qe),Z(Re),Cf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(Xo(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Lt!==null&&(Tc(Lt),Lt=null))),hc(n,e),Ce(e),null;case 5:Pf(e);var i=gi(go.current);if(t=e.type,n!==null&&e.stateNode!=null)fp(n,e,t,r,i),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(x(166));return Ce(e),null}if(n=gi(rn.current),Xo(e)){r=e.stateNode,t=e.type;var s=e.memoizedProps;switch(r[Kt]=e,r[fo]=s,n=(e.mode&1)!==0,t){case"dialog":X("cancel",r),X("close",r);break;case"iframe":case"object":case"embed":X("load",r);break;case"video":case"audio":for(i=0;i<Js.length;i++)X(Js[i],r);break;case"source":X("error",r);break;case"img":case"image":case"link":X("error",r),X("load",r);break;case"details":X("toggle",r);break;case"input":Id(r,s),X("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},X("invalid",r);break;case"textarea":Ed(r,s),X("invalid",r)}$u(t,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Qo(r.textContent,a,n),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Qo(r.textContent,a,n),i=["children",""+a]):to.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&X("scroll",r)}switch(t){case"input":Vo(r),Ad(r,s,!0);break;case"textarea":Vo(r),xd(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=za)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Jg(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=o.createElement(t,{is:r.is}):(n=o.createElement(t),t==="select"&&(o=n,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):n=o.createElementNS(n,t),n[Kt]=e,n[fo]=r,cp(n,e,!1,!1),e.stateNode=n;e:{switch(o=Uu(t,r),t){case"dialog":X("cancel",n),X("close",n),i=r;break;case"iframe":case"object":case"embed":X("load",n),i=r;break;case"video":case"audio":for(i=0;i<Js.length;i++)X(Js[i],n);i=r;break;case"source":X("error",n),i=r;break;case"img":case"image":case"link":X("error",n),X("load",n),i=r;break;case"details":X("toggle",n),i=r;break;case"input":Id(n,r),i=bu(n,r),X("invalid",n);break;case"option":i=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},i=se({},r,{value:void 0}),X("invalid",n);break;case"textarea":Ed(n,r),i=Mu(n,r),X("invalid",n);break;default:i=r}$u(t,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?jg(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&$g(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&no(n,l):typeof l=="number"&&no(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(to.hasOwnProperty(s)?l!=null&&s==="onScroll"&&X("scroll",n):l!=null&&sf(n,s,l,o))}switch(t){case"input":Vo(n),Ad(n,r,!1);break;case"textarea":Vo(n),xd(n);break;case"option":r.value!=null&&n.setAttribute("value",""+Qr(r.value));break;case"select":n.multiple=!!r.multiple,s=r.value,s!=null?Yi(n,!!r.multiple,s,!1):r.defaultValue!=null&&Yi(n,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(n.onclick=za)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ce(e),null;case 6:if(n&&e.stateNode!=null)dp(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(x(166));if(t=gi(go.current),gi(rn.current),Xo(e)){if(r=e.stateNode,t=e.memoizedProps,r[Kt]=e,(s=r.nodeValue!==t)&&(n=et,n!==null))switch(n.tag){case 3:Qo(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Qo(r.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[Kt]=e,e.stateNode=r}return Ce(e),null;case 13:if(Z(re),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(te&&Qe!==null&&e.mode&1&&!(e.flags&128))Cm(),os(),e.flags|=98560,s=!1;else if(s=Xo(e),r!==null&&r.dehydrated!==null){if(n===null){if(!s)throw Error(x(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(x(317));s[Kt]=e}else os(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ce(e),s=!1}else Lt!==null&&(Tc(Lt),Lt=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(n===null||re.current&1?we===0&&(we=3):Uf())),e.updateQueue!==null&&(e.flags|=4),Ce(e),null);case 4:return ls(),hc(n,e),n===null&&uo(e.stateNode.containerInfo),Ce(e),null;case 10:return Af(e.type._context),Ce(e),null;case 17:return Ke(e.type)&&Fa(),Ce(e),null;case 19:if(Z(re),s=e.memoizedState,s===null)return Ce(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Os(s,!1);else{if(we!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=qa(n),o!==null){for(e.flags|=128,Os(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)s=t,n=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return Q(re,re.current&1|2),e.child}n=n.sibling}s.tail!==null&&he()>cs&&(e.flags|=128,r=!0,Os(s,!1),e.lanes=4194304)}else{if(!r)if(n=qa(o),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Os(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!te)return Ce(e),null}else 2*he()-s.renderingStartTime>cs&&t!==1073741824&&(e.flags|=128,r=!0,Os(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=he(),e.sibling=null,t=re.current,Q(re,r?t&1|2:t&1),e):(Ce(e),null);case 22:case 23:return $f(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ye&1073741824&&(Ce(e),e.subtreeFlags&6&&(e.flags|=8192)):Ce(e),null;case 24:return null;case 25:return null}throw Error(x(156,e.tag))}function Ww(n,e){switch(Sf(e),e.tag){case 1:return Ke(e.type)&&Fa(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return ls(),Z(qe),Z(Re),Cf(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return Pf(e),null;case 13:if(Z(re),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(x(340));os()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return Z(re),null;case 4:return ls(),null;case 10:return Af(e.type._context),null;case 22:case 23:return $f(),null;case 24:return null;default:return null}}var ta=!1,De=!1,Hw=typeof WeakSet=="function"?WeakSet:Set,R=null;function Wi(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){ae(n,e,r)}else t.current=null}function gc(n,e,t){try{t()}catch(r){ae(n,e,r)}}var mh=!1;function _w(n,e){if(Qu=La,n=pm(),vf(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,c=0,d=0,h=n,g=null;t:for(;;){for(var p;h!==t||i!==0&&h.nodeType!==3||(a=o+i),h!==s||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(p=h.firstChild)!==null;)g=h,h=p;for(;;){if(h===n)break t;if(g===t&&++c===i&&(a=o),g===s&&++d===r&&(l=o),(p=h.nextSibling)!==null)break;h=g,g=h.parentNode}h=p}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(Xu={focusedElem:n,selectionRange:t},La=!1,R=e;R!==null;)if(e=R,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,R=n;else for(;R!==null;){e=R;try{var T=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(T!==null){var k=T.memoizedProps,C=T.memoizedState,y=e.stateNode,m=y.getSnapshotBeforeUpdate(e.elementType===e.type?k:Ct(e.type,k),C);y.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(x(163))}}catch(A){ae(e,e.return,A)}if(n=e.sibling,n!==null){n.return=e.return,R=n;break}R=e.return}return T=mh,mh=!1,T}function Hs(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&n)===n){var s=i.destroy;i.destroy=void 0,s!==void 0&&gc(e,t,s)}i=i.next}while(i!==r)}}function Ol(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function mc(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function hp(n){var e=n.alternate;e!==null&&(n.alternate=null,hp(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Kt],delete e[fo],delete e[tc],delete e[Dw],delete e[Ow])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function gp(n){return n.tag===5||n.tag===3||n.tag===4}function ph(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||gp(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function pc(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=za));else if(r!==4&&(n=n.child,n!==null))for(pc(n,e,t),n=n.sibling;n!==null;)pc(n,e,t),n=n.sibling}function yc(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(yc(n,e,t),n=n.sibling;n!==null;)yc(n,e,t),n=n.sibling}var Ie=null,Rt=!1;function Nr(n,e,t){for(t=t.child;t!==null;)mp(n,e,t),t=t.sibling}function mp(n,e,t){if(nn&&typeof nn.onCommitFiberUnmount=="function")try{nn.onCommitFiberUnmount(Il,t)}catch{}switch(t.tag){case 5:De||Wi(t,e);case 6:var r=Ie,i=Rt;Ie=null,Nr(n,e,t),Ie=r,Rt=i,Ie!==null&&(Rt?(n=Ie,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):Ie.removeChild(t.stateNode));break;case 18:Ie!==null&&(Rt?(n=Ie,t=t.stateNode,n.nodeType===8?uu(n.parentNode,t):n.nodeType===1&&uu(n,t),oo(n)):uu(Ie,t.stateNode));break;case 4:r=Ie,i=Rt,Ie=t.stateNode.containerInfo,Rt=!0,Nr(n,e,t),Ie=r,Rt=i;break;case 0:case 11:case 14:case 15:if(!De&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&gc(t,e,o),i=i.next}while(i!==r)}Nr(n,e,t);break;case 1:if(!De&&(Wi(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(a){ae(t,e,a)}Nr(n,e,t);break;case 21:Nr(n,e,t);break;case 22:t.mode&1?(De=(r=De)||t.memoizedState!==null,Nr(n,e,t),De=r):Nr(n,e,t);break;default:Nr(n,e,t)}}function yh(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new Hw),e.forEach(function(r){var i=r0.bind(null,n,r);t.has(r)||(t.add(r),r.then(i,i))})}}function Pt(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var i=t[r];try{var s=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Ie=a.stateNode,Rt=!1;break e;case 3:Ie=a.stateNode.containerInfo,Rt=!0;break e;case 4:Ie=a.stateNode.containerInfo,Rt=!0;break e}a=a.return}if(Ie===null)throw Error(x(160));mp(s,o,i),Ie=null,Rt=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){ae(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)pp(e,n),e=e.sibling}function pp(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Pt(e,n),Ut(n),r&4){try{Hs(3,n,n.return),Ol(3,n)}catch(k){ae(n,n.return,k)}try{Hs(5,n,n.return)}catch(k){ae(n,n.return,k)}}break;case 1:Pt(e,n),Ut(n),r&512&&t!==null&&Wi(t,t.return);break;case 5:if(Pt(e,n),Ut(n),r&512&&t!==null&&Wi(t,t.return),n.flags&32){var i=n.stateNode;try{no(i,"")}catch(k){ae(n,n.return,k)}}if(r&4&&(i=n.stateNode,i!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&Fg(i,s),Uu(a,o);var c=Uu(a,s);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?jg(i,h):d==="dangerouslySetInnerHTML"?$g(i,h):d==="children"?no(i,h):sf(i,d,h,c)}switch(a){case"input":zu(i,s);break;case"textarea":Mg(i,s);break;case"select":var g=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?Yi(i,!!s.multiple,p,!1):g!==!!s.multiple&&(s.defaultValue!=null?Yi(i,!!s.multiple,s.defaultValue,!0):Yi(i,!!s.multiple,s.multiple?[]:"",!1))}i[fo]=s}catch(k){ae(n,n.return,k)}}break;case 6:if(Pt(e,n),Ut(n),r&4){if(n.stateNode===null)throw Error(x(162));i=n.stateNode,s=n.memoizedProps;try{i.nodeValue=s}catch(k){ae(n,n.return,k)}}break;case 3:if(Pt(e,n),Ut(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{oo(e.containerInfo)}catch(k){ae(n,n.return,k)}break;case 4:Pt(e,n),Ut(n);break;case 13:Pt(e,n),Ut(n),i=n.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Mf=he())),r&4&&yh(n);break;case 22:if(d=t!==null&&t.memoizedState!==null,n.mode&1?(De=(c=De)||d,Pt(e,n),De=c):Pt(e,n),Ut(n),r&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!d&&n.mode&1)for(R=n,d=n.child;d!==null;){for(h=R=d;R!==null;){switch(g=R,p=g.child,g.tag){case 0:case 11:case 14:case 15:Hs(4,g,g.return);break;case 1:Wi(g,g.return);var T=g.stateNode;if(typeof T.componentWillUnmount=="function"){r=g,t=g.return;try{e=r,T.props=e.memoizedProps,T.state=e.memoizedState,T.componentWillUnmount()}catch(k){ae(r,t,k)}}break;case 5:Wi(g,g.return);break;case 22:if(g.memoizedState!==null){wh(h);continue}}p!==null?(p.return=g,R=p):wh(h)}d=d.sibling}e:for(d=null,h=n;;){if(h.tag===5){if(d===null){d=h;try{i=h.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Ug("display",o))}catch(k){ae(n,n.return,k)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(k){ae(n,n.return,k)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===n)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===n)break e;for(;h.sibling===null;){if(h.return===null||h.return===n)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Pt(e,n),Ut(n),r&4&&yh(n);break;case 21:break;default:Pt(e,n),Ut(n)}}function Ut(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(gp(t)){var r=t;break e}t=t.return}throw Error(x(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(no(i,""),r.flags&=-33);var s=ph(n);yc(n,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=ph(n);pc(n,a,o);break;default:throw Error(x(161))}}catch(l){ae(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function Gw(n,e,t){R=n,yp(n)}function yp(n,e,t){for(var r=(n.mode&1)!==0;R!==null;){var i=R,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||ta;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||De;a=ta;var c=De;if(ta=o,(De=l)&&!c)for(R=i;R!==null;)o=R,l=o.child,o.tag===22&&o.memoizedState!==null?Sh(i):l!==null?(l.return=o,R=l):Sh(i);for(;s!==null;)R=s,yp(s),s=s.sibling;R=i,ta=a,De=c}vh(n)}else i.subtreeFlags&8772&&s!==null?(s.return=i,R=s):vh(n)}}function vh(n){for(;R!==null;){var e=R;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:De||Ol(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!De)if(t===null)r.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:Ct(e.type,t.memoizedProps);r.componentDidUpdate(i,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&th(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}th(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&oo(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(x(163))}De||e.flags&512&&mc(e)}catch(g){ae(e,e.return,g)}}if(e===n){R=null;break}if(t=e.sibling,t!==null){t.return=e.return,R=t;break}R=e.return}}function wh(n){for(;R!==null;){var e=R;if(e===n){R=null;break}var t=e.sibling;if(t!==null){t.return=e.return,R=t;break}R=e.return}}function Sh(n){for(;R!==null;){var e=R;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{Ol(4,e)}catch(l){ae(e,t,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){ae(e,i,l)}}var s=e.return;try{mc(e)}catch(l){ae(e,s,l)}break;case 5:var o=e.return;try{mc(e)}catch(l){ae(e,o,l)}}}catch(l){ae(e,e.return,l)}if(e===n){R=null;break}var a=e.sibling;if(a!==null){a.return=e.return,R=a;break}R=e.return}}var Yw=Math.ceil,Ha=Er.ReactCurrentDispatcher,zf=Er.ReactCurrentOwner,Tt=Er.ReactCurrentBatchConfig,W=0,ke=null,pe=null,Ee=0,Ye=0,Hi=ni(0),we=0,vo=null,Ai=0,Rl=0,Ff=0,_s=null,Je=null,Mf=0,cs=1/0,un=null,_a=!1,vc=null,qr=null,na=!1,Fr=null,Ga=0,Gs=0,wc=null,va=-1,wa=0;function ze(){return W&6?he():va!==-1?va:va=he()}function Kr(n){return n.mode&1?W&2&&Ee!==0?Ee&-Ee:Lw.transition!==null?(wa===0&&(wa=em()),wa):(n=G,n!==0||(n=window.event,n=n===void 0?16:am(n.type)),n):1}function Ft(n,e,t,r){if(50<Gs)throw Gs=0,wc=null,Error(x(185));Do(n,t,r),(!(W&2)||n!==ke)&&(n===ke&&(!(W&2)&&(Rl|=t),we===4&&br(n,Ee)),We(n,r),t===1&&W===0&&!(e.mode&1)&&(cs=he()+500,Pl&&ri()))}function We(n,e){var t=n.callbackNode;Lv(n,e);var r=Ra(n,n===ke?Ee:0);if(r===0)t!==null&&Cd(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&Cd(t),e===1)n.tag===0?Rw(Th.bind(null,n)):xm(Th.bind(null,n)),Pw(function(){!(W&6)&&ri()}),t=null;else{switch(tm(r)){case 1:t=cf;break;case 4:t=Xg;break;case 16:t=Oa;break;case 536870912:t=Zg;break;default:t=Oa}t=Ep(t,vp.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function vp(n,e){if(va=-1,wa=0,W&6)throw Error(x(327));var t=n.callbackNode;if(ts()&&n.callbackNode!==t)return null;var r=Ra(n,n===ke?Ee:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=Ya(n,r);else{e=r;var i=W;W|=2;var s=Sp();(ke!==n||Ee!==e)&&(un=null,cs=he()+500,yi(n,e));do try{Zw();break}catch(a){wp(n,a)}while(!0);If(),Ha.current=s,W=i,pe!==null?e=0:(ke=null,Ee=0,e=we)}if(e!==0){if(e===2&&(i=Wu(n),i!==0&&(r=i,e=Sc(n,i))),e===1)throw t=vo,yi(n,0),br(n,r),We(n,he()),t;if(e===6)br(n,r);else{if(i=n.current.alternate,!(r&30)&&!Qw(i)&&(e=Ya(n,r),e===2&&(s=Wu(n),s!==0&&(r=s,e=Sc(n,s))),e===1))throw t=vo,yi(n,0),br(n,r),We(n,he()),t;switch(n.finishedWork=i,n.finishedLanes=r,e){case 0:case 1:throw Error(x(345));case 2:ui(n,Je,un);break;case 3:if(br(n,r),(r&130023424)===r&&(e=Mf+500-he(),10<e)){if(Ra(n,0)!==0)break;if(i=n.suspendedLanes,(i&r)!==r){ze(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=ec(ui.bind(null,n,Je,un),e);break}ui(n,Je,un);break;case 4:if(br(n,r),(r&4194240)===r)break;for(e=n.eventTimes,i=-1;0<r;){var o=31-zt(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=he()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Yw(r/1960))-r,10<r){n.timeoutHandle=ec(ui.bind(null,n,Je,un),r);break}ui(n,Je,un);break;case 5:ui(n,Je,un);break;default:throw Error(x(329))}}}return We(n,he()),n.callbackNode===t?vp.bind(null,n):null}function Sc(n,e){var t=_s;return n.current.memoizedState.isDehydrated&&(yi(n,e).flags|=256),n=Ya(n,e),n!==2&&(e=Je,Je=t,e!==null&&Tc(e)),n}function Tc(n){Je===null?Je=n:Je.push.apply(Je,n)}function Qw(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var i=t[r],s=i.getSnapshot;i=i.value;try{if(!Jt(s(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function br(n,e){for(e&=~Ff,e&=~Rl,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-zt(e),r=1<<t;n[t]=-1,e&=~r}}function Th(n){if(W&6)throw Error(x(327));ts();var e=Ra(n,0);if(!(e&1))return We(n,he()),null;var t=Ya(n,e);if(n.tag!==0&&t===2){var r=Wu(n);r!==0&&(e=r,t=Sc(n,r))}if(t===1)throw t=vo,yi(n,0),br(n,e),We(n,he()),t;if(t===6)throw Error(x(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,ui(n,Je,un),We(n,he()),null}function Jf(n,e){var t=W;W|=1;try{return n(e)}finally{W=t,W===0&&(cs=he()+500,Pl&&ri())}}function Ei(n){Fr!==null&&Fr.tag===0&&!(W&6)&&ts();var e=W;W|=1;var t=Tt.transition,r=G;try{if(Tt.transition=null,G=1,n)return n()}finally{G=r,Tt.transition=t,W=e,!(W&6)&&ri()}}function $f(){Ye=Hi.current,Z(Hi)}function yi(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,Nw(t)),pe!==null)for(t=pe.return;t!==null;){var r=t;switch(Sf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Fa();break;case 3:ls(),Z(qe),Z(Re),Cf();break;case 5:Pf(r);break;case 4:ls();break;case 13:Z(re);break;case 19:Z(re);break;case 10:Af(r.type._context);break;case 22:case 23:$f()}t=t.return}if(ke=n,pe=n=Wr(n.current,null),Ee=Ye=e,we=0,vo=null,Ff=Rl=Ai=0,Je=_s=null,hi!==null){for(e=0;e<hi.length;e++)if(t=hi[e],r=t.interleaved,r!==null){t.interleaved=null;var i=r.next,s=t.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}t.pending=r}hi=null}return n}function wp(n,e){do{var t=pe;try{if(If(),ma.current=Wa,Ka){for(var r=ie.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Ka=!1}if(Ii=0,Te=ye=ie=null,Ws=!1,mo=0,zf.current=null,t===null||t.return===null){we=1,vo=e,pe=null;break}e:{var s=n,o=t.return,a=t,l=e;if(e=Ee,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var g=d.alternate;g?(d.updateQueue=g.updateQueue,d.memoizedState=g.memoizedState,d.lanes=g.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=lh(o);if(p!==null){p.flags&=-257,uh(p,o,a,s,e),p.mode&1&&ah(s,c,e),e=p,l=c;var T=e.updateQueue;if(T===null){var k=new Set;k.add(l),e.updateQueue=k}else T.add(l);break e}else{if(!(e&1)){ah(s,c,e),Uf();break e}l=Error(x(426))}}else if(te&&a.mode&1){var C=lh(o);if(C!==null){!(C.flags&65536)&&(C.flags|=256),uh(C,o,a,s,e),Tf(us(l,a));break e}}s=l=us(l,a),we!==4&&(we=2),_s===null?_s=[s]:_s.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var y=np(s,l,e);eh(s,y);break e;case 1:a=l;var m=s.type,v=s.stateNode;if(!(s.flags&128)&&(typeof m.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(qr===null||!qr.has(v)))){s.flags|=65536,e&=-e,s.lanes|=e;var A=rp(s,a,e);eh(s,A);break e}}s=s.return}while(s!==null)}kp(t)}catch(N){e=N,pe===t&&t!==null&&(pe=t=t.return);continue}break}while(!0)}function Sp(){var n=Ha.current;return Ha.current=Wa,n===null?Wa:n}function Uf(){(we===0||we===3||we===2)&&(we=4),ke===null||!(Ai&268435455)&&!(Rl&268435455)||br(ke,Ee)}function Ya(n,e){var t=W;W|=2;var r=Sp();(ke!==n||Ee!==e)&&(un=null,yi(n,e));do try{Xw();break}catch(i){wp(n,i)}while(!0);if(If(),W=t,Ha.current=r,pe!==null)throw Error(x(261));return ke=null,Ee=0,we}function Xw(){for(;pe!==null;)Tp(pe)}function Zw(){for(;pe!==null&&!Av();)Tp(pe)}function Tp(n){var e=Ap(n.alternate,n,Ye);n.memoizedProps=n.pendingProps,e===null?kp(n):pe=e,zf.current=null}function kp(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=Ww(t,e),t!==null){t.flags&=32767,pe=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{we=6,pe=null;return}}else if(t=Kw(t,e,Ye),t!==null){pe=t;return}if(e=e.sibling,e!==null){pe=e;return}pe=e=n}while(e!==null);we===0&&(we=5)}function ui(n,e,t){var r=G,i=Tt.transition;try{Tt.transition=null,G=1,e0(n,e,t,r)}finally{Tt.transition=i,G=r}return null}function e0(n,e,t,r){do ts();while(Fr!==null);if(W&6)throw Error(x(327));t=n.finishedWork;var i=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(x(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(Bv(n,s),n===ke&&(pe=ke=null,Ee=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||na||(na=!0,Ep(Oa,function(){return ts(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=Tt.transition,Tt.transition=null;var o=G;G=1;var a=W;W|=4,zf.current=null,_w(n,t),pp(t,n),Sw(Xu),La=!!Qu,Xu=Qu=null,n.current=t,Gw(t),Ev(),W=a,G=o,Tt.transition=s}else n.current=t;if(na&&(na=!1,Fr=n,Ga=i),s=n.pendingLanes,s===0&&(qr=null),Pv(t.stateNode),We(n,he()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)i=e[t],r(i.value,{componentStack:i.stack,digest:i.digest});if(_a)throw _a=!1,n=vc,vc=null,n;return Ga&1&&n.tag!==0&&ts(),s=n.pendingLanes,s&1?n===wc?Gs++:(Gs=0,wc=n):Gs=0,ri(),null}function ts(){if(Fr!==null){var n=tm(Ga),e=Tt.transition,t=G;try{if(Tt.transition=null,G=16>n?16:n,Fr===null)var r=!1;else{if(n=Fr,Fr=null,Ga=0,W&6)throw Error(x(331));var i=W;for(W|=4,R=n.current;R!==null;){var s=R,o=s.child;if(R.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(R=c;R!==null;){var d=R;switch(d.tag){case 0:case 11:case 15:Hs(8,d,s)}var h=d.child;if(h!==null)h.return=d,R=h;else for(;R!==null;){d=R;var g=d.sibling,p=d.return;if(hp(d),d===c){R=null;break}if(g!==null){g.return=p,R=g;break}R=p}}}var T=s.alternate;if(T!==null){var k=T.child;if(k!==null){T.child=null;do{var C=k.sibling;k.sibling=null,k=C}while(k!==null)}}R=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,R=o;else e:for(;R!==null;){if(s=R,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Hs(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,R=y;break e}R=s.return}}var m=n.current;for(R=m;R!==null;){o=R;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,R=v;else e:for(o=m;R!==null;){if(a=R,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Ol(9,a)}}catch(N){ae(a,a.return,N)}if(a===o){R=null;break e}var A=a.sibling;if(A!==null){A.return=a.return,R=A;break e}R=a.return}}if(W=i,ri(),nn&&typeof nn.onPostCommitFiberRoot=="function")try{nn.onPostCommitFiberRoot(Il,n)}catch{}r=!0}return r}finally{G=t,Tt.transition=e}}return!1}function kh(n,e,t){e=us(t,e),e=np(n,e,1),n=Vr(n,e,1),e=ze(),n!==null&&(Do(n,1,e),We(n,e))}function ae(n,e,t){if(n.tag===3)kh(n,n,t);else for(;e!==null;){if(e.tag===3){kh(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(qr===null||!qr.has(r))){n=us(t,n),n=rp(e,n,1),e=Vr(e,n,1),n=ze(),e!==null&&(Do(e,1,n),We(e,n));break}}e=e.return}}function t0(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=ze(),n.pingedLanes|=n.suspendedLanes&t,ke===n&&(Ee&t)===t&&(we===4||we===3&&(Ee&130023424)===Ee&&500>he()-Mf?yi(n,0):Ff|=t),We(n,e)}function Ip(n,e){e===0&&(n.mode&1?(e=Wo,Wo<<=1,!(Wo&130023424)&&(Wo=4194304)):e=1);var t=ze();n=Tr(n,e),n!==null&&(Do(n,e,t),We(n,t))}function n0(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),Ip(n,t)}function r0(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,i=n.memoizedState;i!==null&&(t=i.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(x(314))}r!==null&&r.delete(e),Ip(n,t)}var Ap;Ap=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||qe.current)je=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return je=!1,qw(n,e,t);je=!!(n.flags&131072)}else je=!1,te&&e.flags&1048576&&Nm(e,$a,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ya(n,e),n=e.pendingProps;var i=ss(e,Re.current);es(e,t),i=Of(null,e,r,n,i,t);var s=Rf();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ke(r)?(s=!0,Ma(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,xf(e),i.updater=Cl,e.stateNode=i,i._reactInternals=e,ac(e,r,n,t),e=cc(null,e,r,!0,s,t)):(e.tag=0,te&&s&&wf(e),Be(null,e,i,t),e=e.child),e;case 16:r=e.elementType;e:{switch(ya(n,e),n=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=s0(r),n=Ct(r,n),i){case 0:e=uc(null,e,r,n,t);break e;case 1:e=dh(null,e,r,n,t);break e;case 11:e=ch(null,e,r,n,t);break e;case 14:e=fh(null,e,r,Ct(r.type,n),t);break e}throw Error(x(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ct(r,i),uc(n,e,r,i,t);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ct(r,i),dh(n,e,r,i,t);case 3:e:{if(ap(e),n===null)throw Error(x(387));r=e.pendingProps,s=e.memoizedState,i=s.element,Om(n,e),Va(e,r,null,t);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=us(Error(x(423)),e),e=hh(n,e,r,t,i);break e}else if(r!==i){i=us(Error(x(424)),e),e=hh(n,e,r,t,i);break e}else for(Qe=jr(e.stateNode.containerInfo.firstChild),et=e,te=!0,Lt=null,t=bm(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(os(),r===i){e=kr(n,e,t);break e}Be(n,e,r,t)}e=e.child}return e;case 5:return zm(e),n===null&&ic(e),r=e.type,i=e.pendingProps,s=n!==null?n.memoizedProps:null,o=i.children,Zu(r,i)?o=null:s!==null&&Zu(r,s)&&(e.flags|=32),op(n,e),Be(n,e,o,t),e.child;case 6:return n===null&&ic(e),null;case 13:return lp(n,e,t);case 4:return Nf(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=as(e,null,r,t):Be(n,e,r,t),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ct(r,i),ch(n,e,r,i,t);case 7:return Be(n,e,e.pendingProps,t),e.child;case 8:return Be(n,e,e.pendingProps.children,t),e.child;case 12:return Be(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Q(Ua,r._currentValue),r._currentValue=o,s!==null)if(Jt(s.value,o)){if(s.children===i.children&&!qe.current){e=kr(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=pr(-1,t&-t),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),sc(s.return,t,e),a.lanes|=t;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(x(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),sc(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Be(n,e,i.children,t),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,es(e,t),i=It(i),r=r(i),e.flags|=1,Be(n,e,r,t),e.child;case 14:return r=e.type,i=Ct(r,e.pendingProps),i=Ct(r.type,i),fh(n,e,r,i,t);case 15:return ip(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ct(r,i),ya(n,e),e.tag=1,Ke(r)?(n=!0,Ma(e)):n=!1,es(e,t),Lm(e,r,i),ac(e,r,i,t),cc(null,e,r,!0,n,t);case 19:return up(n,e,t);case 22:return sp(n,e,t)}throw Error(x(156,e.tag))};function Ep(n,e){return Qg(n,e)}function i0(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vt(n,e,t,r){return new i0(n,e,t,r)}function jf(n){return n=n.prototype,!(!n||!n.isReactComponent)}function s0(n){if(typeof n=="function")return jf(n)?1:0;if(n!=null){if(n=n.$$typeof,n===af)return 11;if(n===lf)return 14}return 2}function Wr(n,e){var t=n.alternate;return t===null?(t=vt(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function Sa(n,e,t,r,i,s){var o=2;if(r=n,typeof n=="function")jf(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case Fi:return vi(t.children,i,s,e);case of:o=8,i|=8;break;case Ou:return n=vt(12,t,e,i|2),n.elementType=Ou,n.lanes=s,n;case Ru:return n=vt(13,t,e,i),n.elementType=Ru,n.lanes=s,n;case Lu:return n=vt(19,t,e,i),n.elementType=Lu,n.lanes=s,n;case Bg:return Ll(t,i,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case Rg:o=10;break e;case Lg:o=9;break e;case af:o=11;break e;case lf:o=14;break e;case Rr:o=16,r=null;break e}throw Error(x(130,n==null?n:typeof n,""))}return e=vt(o,t,e,i),e.elementType=n,e.type=r,e.lanes=s,e}function vi(n,e,t,r){return n=vt(7,n,r,e),n.lanes=t,n}function Ll(n,e,t,r){return n=vt(22,n,r,e),n.elementType=Bg,n.lanes=t,n.stateNode={isHidden:!1},n}function yu(n,e,t){return n=vt(6,n,null,e),n.lanes=t,n}function vu(n,e,t){return e=vt(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function o0(n,e,t,r,i){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Xl(0),this.expirationTimes=Xl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xl(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Vf(n,e,t,r,i,s,o,a,l){return n=new o0(n,e,t,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=vt(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},xf(s),n}function a0(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:zi,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function xp(n){if(!n)return Xr;n=n._reactInternals;e:{if(Di(n)!==n||n.tag!==1)throw Error(x(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ke(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(x(171))}if(n.tag===1){var t=n.type;if(Ke(t))return Em(n,t,e)}return e}function Np(n,e,t,r,i,s,o,a,l){return n=Vf(t,r,!0,n,i,s,o,a,l),n.context=xp(null),t=n.current,r=ze(),i=Kr(t),s=pr(r,i),s.callback=e??null,Vr(t,s,i),n.current.lanes=i,Do(n,i,r),We(n,r),n}function Bl(n,e,t,r){var i=e.current,s=ze(),o=Kr(i);return t=xp(t),e.context===null?e.context=t:e.pendingContext=t,e=pr(s,o),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=Vr(i,e,o),n!==null&&(Ft(n,i,o,s),ga(n,i,o)),o}function Qa(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Ih(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function qf(n,e){Ih(n,e),(n=n.alternate)&&Ih(n,e)}function l0(){return null}var Pp=typeof reportError=="function"?reportError:function(n){console.error(n)};function Kf(n){this._internalRoot=n}bl.prototype.render=Kf.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(x(409));Bl(n,e,null,null)};bl.prototype.unmount=Kf.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Ei(function(){Bl(null,n,null,null)}),e[Sr]=null}};function bl(n){this._internalRoot=n}bl.prototype.unstable_scheduleHydration=function(n){if(n){var e=im();n={blockedOn:null,target:n,priority:e};for(var t=0;t<Br.length&&e!==0&&e<Br[t].priority;t++);Br.splice(t,0,n),t===0&&om(n)}};function Wf(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function zl(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Ah(){}function u0(n,e,t,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=Qa(o);s.call(c)}}var o=Np(e,r,n,0,null,!1,!1,"",Ah);return n._reactRootContainer=o,n[Sr]=o.current,uo(n.nodeType===8?n.parentNode:n),Ei(),o}for(;i=n.lastChild;)n.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=Qa(l);a.call(c)}}var l=Vf(n,0,!1,null,null,!1,!1,"",Ah);return n._reactRootContainer=l,n[Sr]=l.current,uo(n.nodeType===8?n.parentNode:n),Ei(function(){Bl(e,l,t,r)}),l}function Fl(n,e,t,r,i){var s=t._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Qa(o);a.call(l)}}Bl(e,o,n,i)}else o=u0(t,e,n,i,r);return Qa(o)}nm=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=Ms(e.pendingLanes);t!==0&&(ff(e,t|1),We(e,he()),!(W&6)&&(cs=he()+500,ri()))}break;case 13:Ei(function(){var r=Tr(n,1);if(r!==null){var i=ze();Ft(r,n,1,i)}}),qf(n,1)}};df=function(n){if(n.tag===13){var e=Tr(n,134217728);if(e!==null){var t=ze();Ft(e,n,134217728,t)}qf(n,134217728)}};rm=function(n){if(n.tag===13){var e=Kr(n),t=Tr(n,e);if(t!==null){var r=ze();Ft(t,n,e,r)}qf(n,e)}};im=function(){return G};sm=function(n,e){var t=G;try{return G=n,e()}finally{G=t}};Vu=function(n,e,t){switch(e){case"input":if(zu(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var i=Nl(r);if(!i)throw Error(x(90));zg(r),zu(r,i)}}}break;case"textarea":Mg(n,t);break;case"select":e=t.value,e!=null&&Yi(n,!!t.multiple,e,!1)}};Kg=Jf;Wg=Ei;var c0={usingClientEntryPoint:!1,Events:[Ro,Ui,Nl,Vg,qg,Jf]},Rs={findFiberByHostInstance:di,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},f0={bundleType:Rs.bundleType,version:Rs.version,rendererPackageName:Rs.rendererPackageName,rendererConfig:Rs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Er.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Gg(n),n===null?null:n.stateNode},findFiberByHostInstance:Rs.findFiberByHostInstance||l0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ra=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ra.isDisabled&&ra.supportsFiber)try{Il=ra.inject(f0),nn=ra}catch{}}it.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=c0;it.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Wf(e))throw Error(x(200));return a0(n,e,null,t)};it.createRoot=function(n,e){if(!Wf(n))throw Error(x(299));var t=!1,r="",i=Pp;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Vf(n,1,!1,null,null,t,!1,r,i),n[Sr]=e.current,uo(n.nodeType===8?n.parentNode:n),new Kf(e)};it.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(x(188)):(n=Object.keys(n).join(","),Error(x(268,n)));return n=Gg(e),n=n===null?null:n.stateNode,n};it.flushSync=function(n){return Ei(n)};it.hydrate=function(n,e,t){if(!zl(e))throw Error(x(200));return Fl(null,n,e,!0,t)};it.hydrateRoot=function(n,e,t){if(!Wf(n))throw Error(x(405));var r=t!=null&&t.hydratedSources||null,i=!1,s="",o=Pp;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=Np(e,null,n,1,t??null,i,!1,s,o),n[Sr]=e.current,uo(n),r)for(n=0;n<r.length;n++)t=r[n],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new bl(e)};it.render=function(n,e,t){if(!zl(e))throw Error(x(200));return Fl(null,n,e,!1,t)};it.unmountComponentAtNode=function(n){if(!zl(n))throw Error(x(40));return n._reactRootContainer?(Ei(function(){Fl(null,null,n,!1,function(){n._reactRootContainer=null,n[Sr]=null})}),!0):!1};it.unstable_batchedUpdates=Jf;it.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!zl(t))throw Error(x(200));if(n==null||n._reactInternals===void 0)throw Error(x(38));return Fl(n,e,t,!1,r)};it.version="18.2.0-next-9e3b772b8-20220608";function Cp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Cp)}catch(n){console.error(n)}}Cp(),Ng.exports=it;var d0=Ng.exports,Eh=d0;Cu.createRoot=Eh.createRoot,Cu.hydrateRoot=Eh.hydrateRoot;var V;(function(n){n[n.Canceled=1]="Canceled",n[n.Unknown=2]="Unknown",n[n.InvalidArgument=3]="InvalidArgument",n[n.DeadlineExceeded=4]="DeadlineExceeded",n[n.NotFound=5]="NotFound",n[n.AlreadyExists=6]="AlreadyExists",n[n.PermissionDenied=7]="PermissionDenied",n[n.ResourceExhausted=8]="ResourceExhausted",n[n.FailedPrecondition=9]="FailedPrecondition",n[n.Aborted=10]="Aborted",n[n.OutOfRange=11]="OutOfRange",n[n.Unimplemented=12]="Unimplemented",n[n.Internal=13]="Internal",n[n.Unavailable=14]="Unavailable",n[n.DataLoss=15]="DataLoss",n[n.Unauthenticated=16]="Unauthenticated"})(V||(V={}));function xh(n){const e=V[n];return typeof e!="string"?n.toString():e[0].toLowerCase()+e.substring(1).replace(/[A-Z]/g,t=>"_"+t.toLowerCase())}class _ extends Error{constructor(e,t=V.Unknown,r,i,s){super(h0(e,t)),this.name="ConnectError",Object.setPrototypeOf(this,new.target.prototype),this.rawMessage=e,this.code=t,this.metadata=new Headers(r??{}),this.details=i??[],this.cause=s}static from(e,t=V.Unknown){return e instanceof _?e:e instanceof Error?e.name=="AbortError"?new _(e.message,V.Canceled):new _(e.message,t,void 0,void 0,e):new _(String(e),t,void 0,void 0,e)}static[Symbol.hasInstance](e){return e instanceof Error?Object.getPrototypeOf(e)===_.prototype?!0:e.name==="ConnectError"&&"code"in e&&typeof e.code=="number"&&"metadata"in e&&"details"in e&&Array.isArray(e.details)&&"rawMessage"in e&&typeof e.rawMessage=="string"&&"cause"in e:!1}findDetails(e){const t="typeName"in e?{findMessage:i=>i===e.typeName?e:void 0}:e,r=[];for(const i of this.details){if("getType"in i){t.findMessage(i.getType().typeName)&&r.push(i);continue}const s=t.findMessage(i.type);if(s)try{r.push(s.fromBinary(i.value))}catch{}}return r}}function h0(n,e){return n.length?`[${xh(e)}] ${n}`:`[${xh(e)}]`}function le(n,e){if(!n)throw new Error(e)}const g0=34028234663852886e22,m0=-34028234663852886e22,p0=4294967295,y0=2147483647,v0=-2147483648;function Ta(n){if(typeof n!="number")throw new Error("invalid int 32: "+typeof n);if(!Number.isInteger(n)||n>y0||n<v0)throw new Error("invalid int 32: "+n)}function kc(n){if(typeof n!="number")throw new Error("invalid uint 32: "+typeof n);if(!Number.isInteger(n)||n>p0||n<0)throw new Error("invalid uint 32: "+n)}function Dp(n){if(typeof n!="number")throw new Error("invalid float 32: "+typeof n);if(Number.isFinite(n)&&(n>g0||n<m0))throw new Error("invalid float 32: "+n)}const Op=Symbol("@bufbuild/protobuf/enum-type");function w0(n){const e=n[Op];return le(e,"missing enum type on enum object"),e}function Rp(n,e,t,r){n[Op]=Lp(e,t.map(i=>({no:i.no,name:i.name,localName:n[i.no]})))}function Lp(n,e,t){const r=Object.create(null),i=Object.create(null),s=[];for(const o of e){const a=Bp(o);s.push(a),r[o.name]=a,i[o.no]=a}return{typeName:n,values:s,findName(o){return r[o]},findNumber(o){return i[o]}}}function S0(n,e,t){const r={};for(const i of e){const s=Bp(i);r[s.localName]=s.no,r[s.no]=s.localName}return Rp(r,n,e),r}function Bp(n){return"localName"in n?n:Object.assign(Object.assign({},n),{localName:n.name})}class P{equals(e){return this.getType().runtime.util.equals(this.getType(),this,e)}clone(){return this.getType().runtime.util.clone(this)}fromBinary(e,t){const r=this.getType(),i=r.runtime.bin,s=i.makeReadOptions(t);return i.readMessage(this,s.readerFactory(e),e.byteLength,s),this}fromJson(e,t){const r=this.getType(),i=r.runtime.json,s=i.makeReadOptions(t);return i.readMessage(r,e,s,this),this}fromJsonString(e,t){let r;try{r=JSON.parse(e)}catch(i){throw new Error(`cannot decode ${this.getType().typeName} from JSON: ${i instanceof Error?i.message:String(i)}`)}return this.fromJson(r,t)}toBinary(e){const t=this.getType(),r=t.runtime.bin,i=r.makeWriteOptions(e),s=i.writerFactory();return r.writeMessage(this,s,i),s.finish()}toJson(e){const t=this.getType(),r=t.runtime.json,i=r.makeWriteOptions(e);return r.writeMessage(this,i)}toJsonString(e){var t;const r=this.toJson(e);return JSON.stringify(r,null,(t=e==null?void 0:e.prettySpaces)!==null&&t!==void 0?t:0)}toJSON(){return this.toJson({emitDefaultValues:!0})}getType(){return Object.getPrototypeOf(this).constructor}}function T0(n,e,t,r){var i;const s=(i=r==null?void 0:r.localName)!==null&&i!==void 0?i:e.substring(e.lastIndexOf(".")+1),o={[s]:function(a){n.util.initFields(this),n.util.initPartial(a,this)}}[s];return Object.setPrototypeOf(o.prototype,new P),Object.assign(o,{runtime:n,typeName:e,fields:n.util.newFieldList(t),fromBinary(a,l){return new o().fromBinary(a,l)},fromJson(a,l){return new o().fromJson(a,l)},fromJsonString(a,l){return new o().fromJsonString(a,l)},equals(a,l){return n.util.equals(o,a,l)}}),o}function k0(){let n=0,e=0;for(let r=0;r<28;r+=7){let i=this.buf[this.pos++];if(n|=(i&127)<<r,!(i&128))return this.assertBounds(),[n,e]}let t=this.buf[this.pos++];if(n|=(t&15)<<28,e=(t&112)>>4,!(t&128))return this.assertBounds(),[n,e];for(let r=3;r<=31;r+=7){let i=this.buf[this.pos++];if(e|=(i&127)<<r,!(i&128))return this.assertBounds(),[n,e]}throw new Error("invalid varint")}function wu(n,e,t){for(let s=0;s<28;s=s+7){const o=n>>>s,a=!(!(o>>>7)&&e==0),l=(a?o|128:o)&255;if(t.push(l),!a)return}const r=n>>>28&15|(e&7)<<4,i=!!(e>>3);if(t.push((i?r|128:r)&255),!!i){for(let s=3;s<31;s=s+7){const o=e>>>s,a=!!(o>>>7),l=(a?o|128:o)&255;if(t.push(l),!a)return}t.push(e>>>31&1)}}const ka=4294967296;function Nh(n){const e=n[0]==="-";e&&(n=n.slice(1));const t=1e6;let r=0,i=0;function s(o,a){const l=Number(n.slice(o,a));i*=t,r=r*t+l,r>=ka&&(i=i+(r/ka|0),r=r%ka)}return s(-24,-18),s(-18,-12),s(-12,-6),s(-6),e?zp(r,i):Hf(r,i)}function I0(n,e){let t=Hf(n,e);const r=t.hi&2147483648;r&&(t=zp(t.lo,t.hi));const i=bp(t.lo,t.hi);return r?"-"+i:i}function bp(n,e){if({lo:n,hi:e}=A0(n,e),e<=2097151)return String(ka*e+n);const t=n&16777215,r=(n>>>24|e<<8)&16777215,i=e>>16&65535;let s=t+r*6777216+i*6710656,o=r+i*8147497,a=i*2;const l=1e7;return s>=l&&(o+=Math.floor(s/l),s%=l),o>=l&&(a+=Math.floor(o/l),o%=l),a.toString()+Ph(o)+Ph(s)}function A0(n,e){return{lo:n>>>0,hi:e>>>0}}function Hf(n,e){return{lo:n|0,hi:e|0}}function zp(n,e){return e=~e,n?n=~n+1:e+=1,Hf(n,e)}const Ph=n=>{const e=String(n);return"0000000".slice(e.length)+e};function Ch(n,e){if(n>=0){for(;n>127;)e.push(n&127|128),n=n>>>7;e.push(n)}else{for(let t=0;t<9;t++)e.push(n&127|128),n=n>>7;e.push(1)}}function E0(){let n=this.buf[this.pos++],e=n&127;if(!(n&128))return this.assertBounds(),e;if(n=this.buf[this.pos++],e|=(n&127)<<7,!(n&128))return this.assertBounds(),e;if(n=this.buf[this.pos++],e|=(n&127)<<14,!(n&128))return this.assertBounds(),e;if(n=this.buf[this.pos++],e|=(n&127)<<21,!(n&128))return this.assertBounds(),e;n=this.buf[this.pos++],e|=(n&15)<<28;for(let t=5;n&128&&t<10;t++)n=this.buf[this.pos++];if(n&128)throw new Error("invalid varint");return this.assertBounds(),e>>>0}var Dh={};function x0(){const n=new DataView(new ArrayBuffer(8));if(typeof BigInt=="function"&&typeof n.getBigInt64=="function"&&typeof n.getBigUint64=="function"&&typeof n.setBigInt64=="function"&&typeof n.setBigUint64=="function"&&(typeof process!="object"||typeof Dh!="object"||Dh.BUF_BIGINT_DISABLE!=="1")){const i=BigInt("-9223372036854775808"),s=BigInt("9223372036854775807"),o=BigInt("0"),a=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(l){const c=typeof l=="bigint"?l:BigInt(l);if(c>s||c<i)throw new Error(`int64 invalid: ${l}`);return c},uParse(l){const c=typeof l=="bigint"?l:BigInt(l);if(c>a||c<o)throw new Error(`uint64 invalid: ${l}`);return c},enc(l){return n.setBigInt64(0,this.parse(l),!0),{lo:n.getInt32(0,!0),hi:n.getInt32(4,!0)}},uEnc(l){return n.setBigInt64(0,this.uParse(l),!0),{lo:n.getInt32(0,!0),hi:n.getInt32(4,!0)}},dec(l,c){return n.setInt32(0,l,!0),n.setInt32(4,c,!0),n.getBigInt64(0,!0)},uDec(l,c){return n.setInt32(0,l,!0),n.setInt32(4,c,!0),n.getBigUint64(0,!0)}}}const t=i=>le(/^-?[0-9]+$/.test(i),`int64 invalid: ${i}`),r=i=>le(/^[0-9]+$/.test(i),`uint64 invalid: ${i}`);return{zero:"0",supported:!1,parse(i){return typeof i!="string"&&(i=i.toString()),t(i),i},uParse(i){return typeof i!="string"&&(i=i.toString()),r(i),i},enc(i){return typeof i!="string"&&(i=i.toString()),t(i),Nh(i)},uEnc(i){return typeof i!="string"&&(i=i.toString()),r(i),Nh(i)},dec(i,s){return I0(i,s)},uDec(i,s){return bp(i,s)}}}const ne=x0();var I;(function(n){n[n.DOUBLE=1]="DOUBLE",n[n.FLOAT=2]="FLOAT",n[n.INT64=3]="INT64",n[n.UINT64=4]="UINT64",n[n.INT32=5]="INT32",n[n.FIXED64=6]="FIXED64",n[n.FIXED32=7]="FIXED32",n[n.BOOL=8]="BOOL",n[n.STRING=9]="STRING",n[n.BYTES=12]="BYTES",n[n.UINT32=13]="UINT32",n[n.SFIXED32=15]="SFIXED32",n[n.SFIXED64=16]="SFIXED64",n[n.SINT32=17]="SINT32",n[n.SINT64=18]="SINT64"})(I||(I={}));var Zr;(function(n){n[n.BIGINT=0]="BIGINT",n[n.STRING=1]="STRING"})(Zr||(Zr={}));function Pr(n,e,t){if(e===t)return!0;if(n==I.BYTES){if(!(e instanceof Uint8Array)||!(t instanceof Uint8Array)||e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}switch(n){case I.UINT64:case I.FIXED64:case I.INT64:case I.SFIXED64:case I.SINT64:return e==t}return!1}function fs(n,e){switch(n){case I.BOOL:return!1;case I.UINT64:case I.FIXED64:case I.INT64:case I.SFIXED64:case I.SINT64:return e==0?ne.zero:"0";case I.DOUBLE:case I.FLOAT:return 0;case I.BYTES:return new Uint8Array(0);case I.STRING:return"";default:return 0}}function Fp(n,e){switch(n){case I.BOOL:return e===!1;case I.STRING:return e==="";case I.BYTES:return e instanceof Uint8Array&&!e.byteLength;default:return e==0}}var ge;(function(n){n[n.Varint=0]="Varint",n[n.Bit64=1]="Bit64",n[n.LengthDelimited=2]="LengthDelimited",n[n.StartGroup=3]="StartGroup",n[n.EndGroup=4]="EndGroup",n[n.Bit32=5]="Bit32"})(ge||(ge={}));class N0{constructor(e){this.stack=[],this.textEncoder=e??new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let e=0;for(let i=0;i<this.chunks.length;i++)e+=this.chunks[i].length;let t=new Uint8Array(e),r=0;for(let i=0;i<this.chunks.length;i++)t.set(this.chunks[i],r),r+=this.chunks[i].length;return this.chunks=[],t}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),t=this.stack.pop();if(!t)throw new Error("invalid state, fork stack empty");return this.chunks=t.chunks,this.buf=t.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,t){return this.uint32((e<<3|t)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(kc(e);e>127;)this.buf.push(e&127|128),e=e>>>7;return this.buf.push(e),this}int32(e){return Ta(e),Ch(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let t=this.textEncoder.encode(e);return this.uint32(t.byteLength),this.raw(t)}float(e){Dp(e);let t=new Uint8Array(4);return new DataView(t.buffer).setFloat32(0,e,!0),this.raw(t)}double(e){let t=new Uint8Array(8);return new DataView(t.buffer).setFloat64(0,e,!0),this.raw(t)}fixed32(e){kc(e);let t=new Uint8Array(4);return new DataView(t.buffer).setUint32(0,e,!0),this.raw(t)}sfixed32(e){Ta(e);let t=new Uint8Array(4);return new DataView(t.buffer).setInt32(0,e,!0),this.raw(t)}sint32(e){return Ta(e),e=(e<<1^e>>31)>>>0,Ch(e,this.buf),this}sfixed64(e){let t=new Uint8Array(8),r=new DataView(t.buffer),i=ne.enc(e);return r.setInt32(0,i.lo,!0),r.setInt32(4,i.hi,!0),this.raw(t)}fixed64(e){let t=new Uint8Array(8),r=new DataView(t.buffer),i=ne.uEnc(e);return r.setInt32(0,i.lo,!0),r.setInt32(4,i.hi,!0),this.raw(t)}int64(e){let t=ne.enc(e);return wu(t.lo,t.hi,this.buf),this}sint64(e){let t=ne.enc(e),r=t.hi>>31,i=t.lo<<1^r,s=(t.hi<<1|t.lo>>>31)^r;return wu(i,s,this.buf),this}uint64(e){let t=ne.uEnc(e);return wu(t.lo,t.hi,this.buf),this}}class P0{constructor(e,t){this.varint64=k0,this.uint32=E0,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength),this.textDecoder=t??new TextDecoder}tag(){let e=this.uint32(),t=e>>>3,r=e&7;if(t<=0||r<0||r>5)throw new Error("illegal tag: field no "+t+" wire type "+r);return[t,r]}skip(e,t){let r=this.pos;switch(e){case ge.Varint:for(;this.buf[this.pos++]&128;);break;case ge.Bit64:this.pos+=4;case ge.Bit32:this.pos+=4;break;case ge.LengthDelimited:let i=this.uint32();this.pos+=i;break;case ge.StartGroup:for(;;){const[s,o]=this.tag();if(o===ge.EndGroup){if(t!==void 0&&s!==t)throw new Error("invalid end group tag");break}this.skip(o,s)}break;default:throw new Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(r,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let e=this.uint32();return e>>>1^-(e&1)}int64(){return ne.dec(...this.varint64())}uint64(){return ne.uDec(...this.varint64())}sint64(){let[e,t]=this.varint64(),r=-(e&1);return e=(e>>>1|(t&1)<<31)^r,t=t>>>1^r,ne.dec(e,t)}bool(){let[e,t]=this.varint64();return e!==0||t!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return ne.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return ne.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),t=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(t,t+e)}string(){return this.textDecoder.decode(this.bytes())}}function C0(n,e,t,r){let i;return{typeName:e,extendee:t,get field(){if(!i){const s=typeof r=="function"?r():r;s.name=e.split(".").pop(),s.jsonName=`[${e}]`,i=n.util.newFieldList([s]).list()[0]}return i},runtime:n}}function Mp(n){const e=n.field.localName,t=Object.create(null);return t[e]=D0(n),[t,()=>t[e]]}function D0(n){const e=n.field;if(e.repeated)return[];if(e.default!==void 0)return e.default;switch(e.kind){case"enum":return e.T.values[0].no;case"scalar":return fs(e.T,e.L);case"message":const t=e.T,r=new t;return t.fieldWrapper?t.fieldWrapper.unwrapField(r):r;case"map":throw"map fields are not allowed to be extensions"}}function O0(n,e){if(!e.repeated&&(e.kind=="enum"||e.kind=="scalar")){for(let t=n.length-1;t>=0;--t)if(n[t].no==e.no)return[n[t]];return[]}return n.filter(t=>t.no===e.no)}let cr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),Ml=[];for(let n=0;n<cr.length;n++)Ml[cr[n].charCodeAt(0)]=n;Ml[45]=cr.indexOf("+");Ml[95]=cr.indexOf("/");const _f={dec(n){let e=n.length*3/4;n[n.length-2]=="="?e-=2:n[n.length-1]=="="&&(e-=1);let t=new Uint8Array(e),r=0,i=0,s,o=0;for(let a=0;a<n.length;a++){if(s=Ml[n.charCodeAt(a)],s===void 0)switch(n[a]){case"=":i=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(i){case 0:o=s,i=1;break;case 1:t[r++]=o<<2|(s&48)>>4,o=s,i=2;break;case 2:t[r++]=(o&15)<<4|(s&60)>>2,o=s,i=3;break;case 3:t[r++]=(o&3)<<6|s,i=0;break}}if(i==1)throw Error("invalid base64 string.");return t.subarray(0,r)},enc(n){let e="",t=0,r,i=0;for(let s=0;s<n.length;s++)switch(r=n[s],t){case 0:e+=cr[r>>2],i=(r&3)<<4,t=1;break;case 1:e+=cr[i|r>>4],i=(r&15)<<2,t=2;break;case 2:e+=cr[i|r>>6],e+=cr[r&63],t=0;break}return t&&(e+=cr[i],e+="=",t==1&&(e+="=")),e}};function R0(n,e,t){$p(e,n);const r=e.runtime.bin.makeReadOptions(t),i=O0(n.getType().runtime.bin.listUnknownFields(n),e.field),[s,o]=Mp(e);for(const a of i)e.runtime.bin.readField(s,r.readerFactory(a.data),e.field,a.wireType,r);return o()}function L0(n,e,t,r){$p(e,n);const i=e.runtime.bin.makeReadOptions(r),s=e.runtime.bin.makeWriteOptions(r);if(Jp(n,e)){const c=n.getType().runtime.bin.listUnknownFields(n).filter(d=>d.no!=e.field.no);n.getType().runtime.bin.discardUnknownFields(n);for(const d of c)n.getType().runtime.bin.onUnknownField(n,d.no,d.wireType,d.data)}const o=s.writerFactory();let a=e.field;!a.opt&&!a.repeated&&(a.kind=="enum"||a.kind=="scalar")&&(a=Object.assign(Object.assign({},e.field),{opt:!0})),e.runtime.bin.writeField(a,t,o,s);const l=i.readerFactory(o.finish());for(;l.pos<l.len;){const[c,d]=l.tag(),h=l.skip(d,c);n.getType().runtime.bin.onUnknownField(n,c,d,h)}}function Jp(n,e){const t=n.getType();return e.extendee.typeName===t.typeName&&!!t.runtime.bin.listUnknownFields(n).find(r=>r.no==e.field.no)}function $p(n,e){le(n.extendee.typeName==e.getType().typeName,`extension ${n.typeName} can only be applied to message ${n.extendee.typeName}`)}function Up(n,e){const t=n.localName;if(n.repeated)return e[t].length>0;if(n.oneof)return e[n.oneof.localName].case===t;switch(n.kind){case"enum":case"scalar":return n.opt||n.req?e[t]!==void 0:n.kind=="enum"?e[t]!==n.T.values[0].no:!Fp(n.T,e[t]);case"message":return e[t]!==void 0;case"map":return Object.keys(e[t]).length>0}}function Oh(n,e){const t=n.localName,r=!n.opt&&!n.req;if(n.repeated)e[t]=[];else if(n.oneof)e[n.oneof.localName]={case:void 0};else switch(n.kind){case"map":e[t]={};break;case"enum":e[t]=r?n.T.values[0].no:void 0;break;case"scalar":e[t]=r?fs(n.T,n.L):void 0;break;case"message":e[t]=void 0;break}}function wi(n,e){if(n===null||typeof n!="object"||!Object.getOwnPropertyNames(P.prototype).every(r=>r in n&&typeof n[r]=="function"))return!1;const t=n.getType();return t===null||typeof t!="function"||!("typeName"in t)||typeof t.typeName!="string"?!1:e===void 0?!0:t.typeName==e.typeName}function jp(n,e){return wi(e)||!n.fieldWrapper?e:n.fieldWrapper.wrapField(e)}I.DOUBLE,I.FLOAT,I.INT64,I.UINT64,I.INT32,I.UINT32,I.BOOL,I.STRING,I.BYTES;const Rh={ignoreUnknownFields:!1},Lh={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0};function B0(n){return n?Object.assign(Object.assign({},Rh),n):Rh}function b0(n){return n?Object.assign(Object.assign({},Lh),n):Lh}const Xa=Symbol(),Ia=Symbol();function z0(){return{makeReadOptions:B0,makeWriteOptions:b0,readMessage(n,e,t,r){if(e==null||Array.isArray(e)||typeof e!="object")throw new Error(`cannot decode message ${n.typeName} from JSON: ${qt(e)}`);r=r??new n;const i=new Map,s=t.typeRegistry;for(const[o,a]of Object.entries(e)){const l=n.fields.findJsonName(o);if(l){if(l.oneof){if(a===null&&l.kind=="scalar")continue;const c=i.get(l.oneof);if(c!==void 0)throw new Error(`cannot decode message ${n.typeName} from JSON: multiple keys for oneof "${l.oneof.name}" present: "${c}", "${o}"`);i.set(l.oneof,o)}Bh(r,a,l,t,n)}else{let c=!1;if(s!=null&&s.findExtension&&o.startsWith("[")&&o.endsWith("]")){const d=s.findExtension(o.substring(1,o.length-1));if(d&&d.extendee.typeName==n.typeName){c=!0;const[h,g]=Mp(d);Bh(h,a,d.field,t,d),L0(r,d,g(),t)}}if(!c&&!t.ignoreUnknownFields)throw new Error(`cannot decode message ${n.typeName} from JSON: key "${o}" is unknown`)}}return r},writeMessage(n,e){const t=n.getType(),r={};let i;try{for(i of t.fields.byNumber()){if(!Up(i,n)){if(i.req)throw"required field not set";if(!e.emitDefaultValues||!M0(i))continue}const o=i.oneof?n[i.oneof.localName].value:n[i.localName],a=bh(i,o,e);a!==void 0&&(r[e.useProtoFieldName?i.name:i.jsonName]=a)}const s=e.typeRegistry;if(s!=null&&s.findExtensionFor)for(const o of t.runtime.bin.listUnknownFields(n)){const a=s.findExtensionFor(t.typeName,o.no);if(a&&Jp(n,a)){const l=R0(n,a,e),c=bh(a.field,l,e);c!==void 0&&(r[a.field.jsonName]=c)}}}catch(s){const o=i?`cannot encode field ${t.typeName}.${i.name} to JSON`:`cannot encode message ${t.typeName} to JSON`,a=s instanceof Error?s.message:String(s);throw new Error(o+(a.length>0?`: ${a}`:""))}return r},readScalar(n,e,t){return Ys(n,e,t??Zr.BIGINT,!0)},writeScalar(n,e,t){if(e!==void 0&&(t||Fp(n,e)))return Aa(n,e)},debug:qt}}function qt(n){if(n===null)return"null";switch(typeof n){case"object":return Array.isArray(n)?"array":"object";case"string":return n.length>100?"string":`"${n.split('"').join('\\"')}"`;default:return String(n)}}function Bh(n,e,t,r,i){let s=t.localName;if(t.repeated){if(le(t.kind!="map"),e===null)return;if(!Array.isArray(e))throw new Error(`cannot decode field ${i.typeName}.${t.name} from JSON: ${qt(e)}`);const o=n[s];for(const a of e){if(a===null)throw new Error(`cannot decode field ${i.typeName}.${t.name} from JSON: ${qt(a)}`);switch(t.kind){case"message":o.push(t.T.fromJson(a,r));break;case"enum":const l=Su(t.T,a,r.ignoreUnknownFields,!0);l!==Ia&&o.push(l);break;case"scalar":try{o.push(Ys(t.T,a,t.L,!0))}catch(c){let d=`cannot decode field ${i.typeName}.${t.name} from JSON: ${qt(a)}`;throw c instanceof Error&&c.message.length>0&&(d+=`: ${c.message}`),new Error(d)}break}}}else if(t.kind=="map"){if(e===null)return;if(typeof e!="object"||Array.isArray(e))throw new Error(`cannot decode field ${i.typeName}.${t.name} from JSON: ${qt(e)}`);const o=n[s];for(const[a,l]of Object.entries(e)){if(l===null)throw new Error(`cannot decode field ${i.typeName}.${t.name} from JSON: map value null`);let c;try{c=F0(t.K,a)}catch(d){let h=`cannot decode map key for field ${i.typeName}.${t.name} from JSON: ${qt(e)}`;throw d instanceof Error&&d.message.length>0&&(h+=`: ${d.message}`),new Error(h)}switch(t.V.kind){case"message":o[c]=t.V.T.fromJson(l,r);break;case"enum":const d=Su(t.V.T,l,r.ignoreUnknownFields,!0);d!==Ia&&(o[c]=d);break;case"scalar":try{o[c]=Ys(t.V.T,l,Zr.BIGINT,!0)}catch(h){let g=`cannot decode map value for field ${i.typeName}.${t.name} from JSON: ${qt(e)}`;throw h instanceof Error&&h.message.length>0&&(g+=`: ${h.message}`),new Error(g)}break}}}else switch(t.oneof&&(n=n[t.oneof.localName]={case:s},s="value"),t.kind){case"message":const o=t.T;if(e===null&&o.typeName!="google.protobuf.Value")return;let a=n[s];wi(a)?a.fromJson(e,r):(n[s]=a=o.fromJson(e,r),o.fieldWrapper&&!t.oneof&&(n[s]=o.fieldWrapper.unwrapField(a)));break;case"enum":const l=Su(t.T,e,r.ignoreUnknownFields,!1);switch(l){case Xa:Oh(t,n);break;case Ia:break;default:n[s]=l;break}break;case"scalar":try{const c=Ys(t.T,e,t.L,!1);switch(c){case Xa:Oh(t,n);break;default:n[s]=c;break}}catch(c){let d=`cannot decode field ${i.typeName}.${t.name} from JSON: ${qt(e)}`;throw c instanceof Error&&c.message.length>0&&(d+=`: ${c.message}`),new Error(d)}break}}function F0(n,e){if(n===I.BOOL)switch(e){case"true":e=!0;break;case"false":e=!1;break}return Ys(n,e,Zr.BIGINT,!0).toString()}function Ys(n,e,t,r){if(e===null)return r?fs(n,t):Xa;switch(n){case I.DOUBLE:case I.FLOAT:if(e==="NaN")return Number.NaN;if(e==="Infinity")return Number.POSITIVE_INFINITY;if(e==="-Infinity")return Number.NEGATIVE_INFINITY;if(e===""||typeof e=="string"&&e.trim().length!==e.length||typeof e!="string"&&typeof e!="number")break;const i=Number(e);if(Number.isNaN(i)||!Number.isFinite(i))break;return n==I.FLOAT&&Dp(i),i;case I.INT32:case I.FIXED32:case I.SFIXED32:case I.SINT32:case I.UINT32:let s;if(typeof e=="number"?s=e:typeof e=="string"&&e.length>0&&e.trim().length===e.length&&(s=Number(e)),s===void 0)break;return n==I.UINT32||n==I.FIXED32?kc(s):Ta(s),s;case I.INT64:case I.SFIXED64:case I.SINT64:if(typeof e!="number"&&typeof e!="string")break;const o=ne.parse(e);return t?o.toString():o;case I.FIXED64:case I.UINT64:if(typeof e!="number"&&typeof e!="string")break;const a=ne.uParse(e);return t?a.toString():a;case I.BOOL:if(typeof e!="boolean")break;return e;case I.STRING:if(typeof e!="string")break;try{encodeURIComponent(e)}catch{throw new Error("invalid UTF8")}return e;case I.BYTES:if(e==="")return new Uint8Array(0);if(typeof e!="string")break;return _f.dec(e)}throw new Error}function Su(n,e,t,r){if(e===null)return n.typeName=="google.protobuf.NullValue"?0:r?n.values[0].no:Xa;switch(typeof e){case"number":if(Number.isInteger(e))return e;break;case"string":const i=n.findName(e);if(i!==void 0)return i.no;if(t)return Ia;break}throw new Error(`cannot decode enum ${n.typeName} from JSON: ${qt(e)}`)}function M0(n){return n.repeated||n.kind=="map"?!0:!(n.oneof||n.kind=="message"||n.opt||n.req)}function bh(n,e,t){if(n.kind=="map"){le(typeof e=="object"&&e!=null);const r={},i=Object.entries(e);switch(n.V.kind){case"scalar":for(const[o,a]of i)r[o.toString()]=Aa(n.V.T,a);break;case"message":for(const[o,a]of i)r[o.toString()]=a.toJson(t);break;case"enum":const s=n.V.T;for(const[o,a]of i)r[o.toString()]=Tu(s,a,t.enumAsInteger);break}return t.emitDefaultValues||i.length>0?r:void 0}if(n.repeated){le(Array.isArray(e));const r=[];switch(n.kind){case"scalar":for(let i=0;i<e.length;i++)r.push(Aa(n.T,e[i]));break;case"enum":for(let i=0;i<e.length;i++)r.push(Tu(n.T,e[i],t.enumAsInteger));break;case"message":for(let i=0;i<e.length;i++)r.push(e[i].toJson(t));break}return t.emitDefaultValues||r.length>0?r:void 0}switch(n.kind){case"scalar":return Aa(n.T,e);case"enum":return Tu(n.T,e,t.enumAsInteger);case"message":return jp(n.T,e).toJson(t)}}function Tu(n,e,t){var r;if(le(typeof e=="number"),n.typeName=="google.protobuf.NullValue")return null;if(t)return e;const i=n.findNumber(e);return(r=i==null?void 0:i.name)!==null&&r!==void 0?r:e}function Aa(n,e){switch(n){case I.INT32:case I.SFIXED32:case I.SINT32:case I.FIXED32:case I.UINT32:return le(typeof e=="number"),e;case I.FLOAT:case I.DOUBLE:return le(typeof e=="number"),Number.isNaN(e)?"NaN":e===Number.POSITIVE_INFINITY?"Infinity":e===Number.NEGATIVE_INFINITY?"-Infinity":e;case I.STRING:return le(typeof e=="string"),e;case I.BOOL:return le(typeof e=="boolean"),e;case I.UINT64:case I.FIXED64:case I.INT64:case I.SFIXED64:case I.SINT64:return le(typeof e=="bigint"||typeof e=="string"||typeof e=="number"),e.toString();case I.BYTES:return le(e instanceof Uint8Array),_f.enc(e)}}const Li=Symbol("@bufbuild/protobuf/unknown-fields"),zh={readUnknownFields:!0,readerFactory:n=>new P0(n)},Fh={writeUnknownFields:!0,writerFactory:()=>new N0};function J0(n){return n?Object.assign(Object.assign({},zh),n):zh}function $0(n){return n?Object.assign(Object.assign({},Fh),n):Fh}function U0(){return{makeReadOptions:J0,makeWriteOptions:$0,listUnknownFields(n){var e;return(e=n[Li])!==null&&e!==void 0?e:[]},discardUnknownFields(n){delete n[Li]},writeUnknownFields(n,e){const r=n[Li];if(r)for(const i of r)e.tag(i.no,i.wireType).raw(i.data)},onUnknownField(n,e,t,r){const i=n;Array.isArray(i[Li])||(i[Li]=[]),i[Li].push({no:e,wireType:t,data:r})},readMessage(n,e,t,r,i){const s=n.getType(),o=i?e.len:e.pos+t;let a,l;for(;e.pos<o&&([a,l]=e.tag(),!(i===!0&&l==ge.EndGroup));){const c=s.fields.find(a);if(!c){const d=e.skip(l,a);r.readUnknownFields&&this.onUnknownField(n,a,l,d);continue}Mh(n,e,c,l,r)}if(i&&(l!=ge.EndGroup||a!==t))throw new Error("invalid end group tag")},readField:Mh,writeMessage(n,e,t){const r=n.getType();for(const i of r.fields.byNumber()){if(!Up(i,n)){if(i.req)throw new Error(`cannot encode field ${r.typeName}.${i.name} to binary: required field not set`);continue}const s=i.oneof?n[i.oneof.localName].value:n[i.localName];Jh(i,s,e,t)}return t.writeUnknownFields&&this.writeUnknownFields(n,e),e},writeField(n,e,t,r){e!==void 0&&Jh(n,e,t,r)}}}function Mh(n,e,t,r,i){let{repeated:s,localName:o}=t;switch(t.oneof&&(n=n[t.oneof.localName],n.case!=o&&delete n.value,n.case=o,o="value"),t.kind){case"scalar":case"enum":const a=t.kind=="enum"?I.INT32:t.T;let l=Za;if(t.kind=="scalar"&&t.L>0&&(l=V0),s){let g=n[o];if(r==ge.LengthDelimited&&a!=I.STRING&&a!=I.BYTES){let T=e.uint32()+e.pos;for(;e.pos<T;)g.push(l(e,a))}else g.push(l(e,a))}else n[o]=l(e,a);break;case"message":const c=t.T;s?n[o].push(Ea(e,new c,i,t)):wi(n[o])?Ea(e,n[o],i,t):(n[o]=Ea(e,new c,i,t),c.fieldWrapper&&!t.oneof&&!t.repeated&&(n[o]=c.fieldWrapper.unwrapField(n[o])));break;case"map":let[d,h]=j0(t,e,i);n[o][d]=h;break}}function Ea(n,e,t,r){const i=e.getType().runtime.bin,s=r==null?void 0:r.delimited;return i.readMessage(e,n,s?r.no:n.uint32(),t,s),e}function j0(n,e,t){const r=e.uint32(),i=e.pos+r;let s,o;for(;e.pos<i;){const[a]=e.tag();switch(a){case 1:s=Za(e,n.K);break;case 2:switch(n.V.kind){case"scalar":o=Za(e,n.V.T);break;case"enum":o=e.int32();break;case"message":o=Ea(e,new n.V.T,t,void 0);break}break}}if(s===void 0&&(s=fs(n.K,Zr.BIGINT)),typeof s!="string"&&typeof s!="number"&&(s=s.toString()),o===void 0)switch(n.V.kind){case"scalar":o=fs(n.V.T,Zr.BIGINT);break;case"enum":o=n.V.T.values[0].no;break;case"message":o=new n.V.T;break}return[s,o]}function V0(n,e){const t=Za(n,e);return typeof t=="bigint"?t.toString():t}function Za(n,e){switch(e){case I.STRING:return n.string();case I.BOOL:return n.bool();case I.DOUBLE:return n.double();case I.FLOAT:return n.float();case I.INT32:return n.int32();case I.INT64:return n.int64();case I.UINT64:return n.uint64();case I.FIXED64:return n.fixed64();case I.BYTES:return n.bytes();case I.FIXED32:return n.fixed32();case I.SFIXED32:return n.sfixed32();case I.SFIXED64:return n.sfixed64();case I.SINT64:return n.sint64();case I.UINT32:return n.uint32();case I.SINT32:return n.sint32()}}function Jh(n,e,t,r){le(e!==void 0);const i=n.repeated;switch(n.kind){case"scalar":case"enum":let s=n.kind=="enum"?I.INT32:n.T;if(i)if(le(Array.isArray(e)),n.packed)K0(t,s,n.no,e);else for(const o of e)Qs(t,s,n.no,o);else Qs(t,s,n.no,e);break;case"message":if(i){le(Array.isArray(e));for(const o of e)$h(t,r,n,o)}else $h(t,r,n,e);break;case"map":le(typeof e=="object"&&e!=null);for(const[o,a]of Object.entries(e))q0(t,r,n,o,a);break}}function q0(n,e,t,r,i){n.tag(t.no,ge.LengthDelimited),n.fork();let s=r;switch(t.K){case I.INT32:case I.FIXED32:case I.UINT32:case I.SFIXED32:case I.SINT32:s=Number.parseInt(r);break;case I.BOOL:le(r=="true"||r=="false"),s=r=="true";break}switch(Qs(n,t.K,1,s),t.V.kind){case"scalar":Qs(n,t.V.T,2,i);break;case"enum":Qs(n,I.INT32,2,i);break;case"message":le(i!==void 0),n.tag(2,ge.LengthDelimited).bytes(i.toBinary(e));break}n.join()}function $h(n,e,t,r){const i=jp(t.T,r);t.delimited?n.tag(t.no,ge.StartGroup).raw(i.toBinary(e)).tag(t.no,ge.EndGroup):n.tag(t.no,ge.LengthDelimited).bytes(i.toBinary(e))}function Qs(n,e,t,r){le(r!==void 0);let[i,s]=Vp(e);n.tag(t,i)[s](r)}function K0(n,e,t,r){if(!r.length)return;n.tag(t,ge.LengthDelimited).fork();let[,i]=Vp(e);for(let s=0;s<r.length;s++)n[i](r[s]);n.join()}function Vp(n){let e=ge.Varint;switch(n){case I.BYTES:case I.STRING:e=ge.LengthDelimited;break;case I.DOUBLE:case I.FIXED64:case I.SFIXED64:e=ge.Bit64;break;case I.FIXED32:case I.SFIXED32:case I.FLOAT:e=ge.Bit32;break}const t=I[n].toLowerCase();return[e,t]}function W0(){return{setEnumType:Rp,initPartial(n,e){if(n===void 0)return;const t=e.getType();for(const r of t.fields.byMember()){const i=r.localName,s=e,o=n;if(o[i]!=null)switch(r.kind){case"oneof":const a=o[i].case;if(a===void 0)continue;const l=r.findField(a);let c=o[i].value;l&&l.kind=="message"&&!wi(c,l.T)?c=new l.T(c):l&&l.kind==="scalar"&&l.T===I.BYTES&&(c=Ls(c)),s[i]={case:a,value:c};break;case"scalar":case"enum":let d=o[i];r.T===I.BYTES&&(d=r.repeated?d.map(Ls):Ls(d)),s[i]=d;break;case"map":switch(r.V.kind){case"scalar":case"enum":if(r.V.T===I.BYTES)for(const[p,T]of Object.entries(o[i]))s[i][p]=Ls(T);else Object.assign(s[i],o[i]);break;case"message":const g=r.V.T;for(const p of Object.keys(o[i])){let T=o[i][p];g.fieldWrapper||(T=new g(T)),s[i][p]=T}break}break;case"message":const h=r.T;if(r.repeated)s[i]=o[i].map(g=>wi(g,h)?g:new h(g));else{const g=o[i];h.fieldWrapper?h.typeName==="google.protobuf.BytesValue"?s[i]=Ls(g):s[i]=g:s[i]=wi(g,h)?g:new h(g)}break}}},equals(n,e,t){return e===t?!0:!e||!t?!1:n.fields.byMember().every(r=>{const i=e[r.localName],s=t[r.localName];if(r.repeated){if(i.length!==s.length)return!1;switch(r.kind){case"message":return i.every((o,a)=>r.T.equals(o,s[a]));case"scalar":return i.every((o,a)=>Pr(r.T,o,s[a]));case"enum":return i.every((o,a)=>Pr(I.INT32,o,s[a]))}throw new Error(`repeated cannot contain ${r.kind}`)}switch(r.kind){case"message":return r.T.equals(i,s);case"enum":return Pr(I.INT32,i,s);case"scalar":return Pr(r.T,i,s);case"oneof":if(i.case!==s.case)return!1;const o=r.findField(i.case);if(o===void 0)return!0;switch(o.kind){case"message":return o.T.equals(i.value,s.value);case"enum":return Pr(I.INT32,i.value,s.value);case"scalar":return Pr(o.T,i.value,s.value)}throw new Error(`oneof cannot contain ${o.kind}`);case"map":const a=Object.keys(i).concat(Object.keys(s));switch(r.V.kind){case"message":const l=r.V.T;return a.every(d=>l.equals(i[d],s[d]));case"enum":return a.every(d=>Pr(I.INT32,i[d],s[d]));case"scalar":const c=r.V.T;return a.every(d=>Pr(c,i[d],s[d]))}break}})},clone(n){const e=n.getType(),t=new e,r=t;for(const i of e.fields.byMember()){const s=n[i.localName];let o;if(i.repeated)o=s.map(ia);else if(i.kind=="map"){o=r[i.localName];for(const[a,l]of Object.entries(s))o[a]=ia(l)}else i.kind=="oneof"?o=i.findField(s.case)?{case:s.case,value:ia(s.value)}:{case:void 0}:o=ia(s);r[i.localName]=o}for(const i of e.runtime.bin.listUnknownFields(n))e.runtime.bin.onUnknownField(r,i.no,i.wireType,i.data);return t}}}function ia(n){if(n===void 0)return n;if(wi(n))return n.clone();if(n instanceof Uint8Array){const e=new Uint8Array(n.byteLength);return e.set(n),e}return n}function Ls(n){return n instanceof Uint8Array?n:new Uint8Array(n)}function H0(n,e,t){return{syntax:n,json:z0(),bin:U0(),util:Object.assign(Object.assign({},W0()),{newFieldList:e,initFields:t}),makeMessageType(r,i,s){return T0(this,r,i,s)},makeEnum:S0,makeEnumType:Lp,getEnumType:w0,makeExtension(r,i,s){return C0(this,r,i,s)}}}class _0{constructor(e,t){this._fields=e,this._normalizer=t}findJsonName(e){if(!this.jsonNames){const t={};for(const r of this.list())t[r.jsonName]=t[r.name]=r;this.jsonNames=t}return this.jsonNames[e]}find(e){if(!this.numbers){const t={};for(const r of this.list())t[r.no]=r;this.numbers=t}return this.numbers[e]}list(){return this.all||(this.all=this._normalizer(this._fields)),this.all}byNumber(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort((e,t)=>e.no-t.no)),this.numbersAsc}byMember(){if(!this.members){this.members=[];const e=this.members;let t;for(const r of this.list())r.oneof?r.oneof!==t&&(t=r.oneof,e.push(t)):e.push(r)}return this.members}}function qp(n,e){const t=Kp(n);return e?t:eS(Z0(t))}function G0(n){return qp(n,!1)}const Y0=Kp;function Kp(n){let e=!1;const t=[];for(let r=0;r<n.length;r++){let i=n.charAt(r);switch(i){case"_":e=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":t.push(i),e=!1;break;default:e&&(e=!1,i=i.toUpperCase()),t.push(i);break}}return t.join("")}const Q0=new Set(["constructor","toString","toJSON","valueOf"]),X0=new Set(["getType","clone","equals","fromBinary","fromJson","fromJsonString","toBinary","toJson","toJsonString","toObject"]),Wp=n=>`${n}$`,Z0=n=>X0.has(n)?Wp(n):n,eS=n=>Q0.has(n)?Wp(n):n;class tS{constructor(e){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.req=!1,this.default=void 0,this.fields=[],this.name=e,this.localName=G0(e)}addField(e){le(e.oneof===this,`field ${e.name} not one of ${this.name}`),this.fields.push(e)}findField(e){if(!this._lookup){this._lookup=Object.create(null);for(let t=0;t<this.fields.length;t++)this._lookup[this.fields[t].localName]=this.fields[t]}return this._lookup[e]}}function nS(n,e){var t,r,i,s,o,a;const l=[];let c;for(const d of typeof n=="function"?n():n){const h=d;if(h.localName=qp(d.name,d.oneof!==void 0),h.jsonName=(t=d.jsonName)!==null&&t!==void 0?t:Y0(d.name),h.repeated=(r=d.repeated)!==null&&r!==void 0?r:!1,d.kind=="scalar"&&(h.L=(i=d.L)!==null&&i!==void 0?i:Zr.BIGINT),h.delimited=(s=d.delimited)!==null&&s!==void 0?s:!1,h.req=(o=d.req)!==null&&o!==void 0?o:!1,h.opt=(a=d.opt)!==null&&a!==void 0?a:!1,d.packed===void 0&&(h.packed=d.kind=="enum"||d.kind=="scalar"&&d.T!=I.BYTES&&d.T!=I.STRING),d.oneof!==void 0){const g=typeof d.oneof=="string"?d.oneof:d.oneof.name;(!c||c.name!=g)&&(c=new tS(g)),h.oneof=c,c.addField(h)}l.push(h)}return l}const f=H0("proto3",n=>new _0(n,e=>nS(e)),n=>{for(const e of n.getType().fields.byMember()){if(e.opt)continue;const t=e.localName,r=n;if(e.repeated){r[t]=[];continue}switch(e.kind){case"oneof":r[t]={case:void 0};break;case"enum":r[t]=0;break;case"map":r[t]={};break;case"scalar":r[t]=fs(e.T,e.L);break}}});var be;(function(n){n[n.Unary=0]="Unary",n[n.ServerStreaming=1]="ServerStreaming",n[n.ClientStreaming=2]="ClientStreaming",n[n.BiDiStreaming=3]="BiDiStreaming"})(be||(be={}));var Uh;(function(n){n[n.NoSideEffects=1]="NoSideEffects",n[n.Idempotent=2]="Idempotent"})(Uh||(Uh={}));class Oe extends P{constructor(e){super(),this.seconds=ne.zero,this.nanos=0,f.util.initPartial(e,this)}fromJson(e,t){if(typeof e!="string")throw new Error(`cannot decode google.protobuf.Timestamp from JSON: ${f.json.debug(e)}`);const r=e.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!r)throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");const i=Date.parse(r[1]+"-"+r[2]+"-"+r[3]+"T"+r[4]+":"+r[5]+":"+r[6]+(r[8]?r[8]:"Z"));if(Number.isNaN(i))throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");if(i<Date.parse("0001-01-01T00:00:00Z")||i>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot decode message google.protobuf.Timestamp from JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");return this.seconds=ne.parse(i/1e3),this.nanos=0,r[7]&&(this.nanos=parseInt("1"+r[7]+"0".repeat(9-r[7].length))-1e9),this}toJson(e){const t=Number(this.seconds)*1e3;if(t<Date.parse("0001-01-01T00:00:00Z")||t>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot encode google.protobuf.Timestamp to JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");if(this.nanos<0)throw new Error("cannot encode google.protobuf.Timestamp to JSON: nanos must not be negative");let r="Z";if(this.nanos>0){const i=(this.nanos+1e9).toString().substring(1);i.substring(3)==="000000"?r="."+i.substring(0,3)+"Z":i.substring(6)==="000"?r="."+i.substring(0,6)+"Z":r="."+i+"Z"}return new Date(t).toISOString().replace(".000Z",r)}toDate(){return new Date(Number(this.seconds)*1e3+Math.ceil(this.nanos/1e6))}static now(){return Oe.fromDate(new Date)}static fromDate(e){const t=e.getTime();return new Oe({seconds:ne.parse(Math.floor(t/1e3)),nanos:t%1e3*1e6})}static fromBinary(e,t){return new Oe().fromBinary(e,t)}static fromJson(e,t){return new Oe().fromJson(e,t)}static fromJsonString(e,t){return new Oe().fromJsonString(e,t)}static equals(e,t){return f.util.equals(Oe,e,t)}}Oe.runtime=f;Oe.typeName="google.protobuf.Timestamp";Oe.fields=f.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);class hr extends P{constructor(e){super(),this.seconds=ne.zero,this.nanos=0,f.util.initPartial(e,this)}fromJson(e,t){if(typeof e!="string")throw new Error(`cannot decode google.protobuf.Duration from JSON: ${f.json.debug(e)}`);const r=e.match(/^(-?[0-9]+)(?:\.([0-9]+))?s/);if(r===null)throw new Error(`cannot decode google.protobuf.Duration from JSON: ${f.json.debug(e)}`);const i=Number(r[1]);if(i>315576e6||i<-315576e6)throw new Error(`cannot decode google.protobuf.Duration from JSON: ${f.json.debug(e)}`);if(this.seconds=ne.parse(i),typeof r[2]=="string"){const s=r[2]+"0".repeat(9-r[2].length);this.nanos=parseInt(s),(i<0||Object.is(i,-0))&&(this.nanos=-this.nanos)}return this}toJson(e){if(Number(this.seconds)>315576e6||Number(this.seconds)<-315576e6)throw new Error("cannot encode google.protobuf.Duration to JSON: value out of range");let t=this.seconds.toString();if(this.nanos!==0){let r=Math.abs(this.nanos).toString();r="0".repeat(9-r.length)+r,r.substring(3)==="000000"?r=r.substring(0,3):r.substring(6)==="000"&&(r=r.substring(0,6)),t+="."+r,this.nanos<0&&Number(this.seconds)==0&&(t="-"+t)}return t+"s"}static fromBinary(e,t){return new hr().fromBinary(e,t)}static fromJson(e,t){return new hr().fromJson(e,t)}static fromJsonString(e,t){return new hr().fromJsonString(e,t)}static equals(e,t){return f.util.equals(hr,e,t)}}hr.runtime=f;hr.typeName="google.protobuf.Duration";hr.fields=f.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);class Wt extends P{constructor(e){super(),this.typeUrl="",this.value=new Uint8Array(0),f.util.initPartial(e,this)}toJson(e){var t;if(this.typeUrl==="")return{};const r=this.typeUrlToName(this.typeUrl),i=(t=e==null?void 0:e.typeRegistry)===null||t===void 0?void 0:t.findMessage(r);if(!i)throw new Error(`cannot encode message google.protobuf.Any to JSON: "${this.typeUrl}" is not in the type registry`);let o=i.fromBinary(this.value).toJson(e);return(r.startsWith("google.protobuf.")||o===null||Array.isArray(o)||typeof o!="object")&&(o={value:o}),o["@type"]=this.typeUrl,o}fromJson(e,t){var r;if(e===null||Array.isArray(e)||typeof e!="object")throw new Error(`cannot decode message google.protobuf.Any from JSON: expected object but got ${e===null?"null":Array.isArray(e)?"array":typeof e}`);if(Object.keys(e).length==0)return this;const i=e["@type"];if(typeof i!="string"||i=="")throw new Error('cannot decode message google.protobuf.Any from JSON: "@type" is empty');const s=this.typeUrlToName(i),o=(r=t==null?void 0:t.typeRegistry)===null||r===void 0?void 0:r.findMessage(s);if(!o)throw new Error(`cannot decode message google.protobuf.Any from JSON: ${i} is not in the type registry`);let a;if(s.startsWith("google.protobuf.")&&Object.prototype.hasOwnProperty.call(e,"value"))a=o.fromJson(e.value,t);else{const l=Object.assign({},e);delete l["@type"],a=o.fromJson(l,t)}return this.packFrom(a),this}packFrom(e){this.value=e.toBinary(),this.typeUrl=this.typeNameToUrl(e.getType().typeName)}unpackTo(e){return this.is(e.getType())?(e.fromBinary(this.value),!0):!1}unpack(e){if(this.typeUrl==="")return;const t=e.findMessage(this.typeUrlToName(this.typeUrl));if(t)return t.fromBinary(this.value)}is(e){if(this.typeUrl==="")return!1;const t=this.typeUrlToName(this.typeUrl);let r="";return typeof e=="string"?r=e:r=e.typeName,t===r}typeNameToUrl(e){return`type.googleapis.com/${e}`}typeUrlToName(e){if(!e.length)throw new Error(`invalid type url: ${e}`);const t=e.lastIndexOf("/"),r=t>=0?e.substring(t+1):e;if(!r.length)throw new Error(`invalid type url: ${e}`);return r}static pack(e){const t=new Wt;return t.packFrom(e),t}static fromBinary(e,t){return new Wt().fromBinary(e,t)}static fromJson(e,t){return new Wt().fromJson(e,t)}static fromJsonString(e,t){return new Wt().fromJsonString(e,t)}static equals(e,t){return f.util.equals(Wt,e,t)}}Wt.runtime=f;Wt.typeName="google.protobuf.Any";Wt.fields=f.util.newFieldList(()=>[{no:1,name:"type_url",kind:"scalar",T:9},{no:2,name:"value",kind:"scalar",T:12}]);class Ht extends P{constructor(e){super(),this.value=0,f.util.initPartial(e,this)}toJson(e){return f.json.writeScalar(I.DOUBLE,this.value,!0)}fromJson(e,t){try{this.value=f.json.readScalar(I.DOUBLE,e)}catch(r){let i='cannot decode message google.protobuf.DoubleValue from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new Ht().fromBinary(e,t)}static fromJson(e,t){return new Ht().fromJson(e,t)}static fromJsonString(e,t){return new Ht().fromJsonString(e,t)}static equals(e,t){return f.util.equals(Ht,e,t)}}Ht.runtime=f;Ht.typeName="google.protobuf.DoubleValue";Ht.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:1}]);Ht.fieldWrapper={wrapField(n){return new Ht({value:n})},unwrapField(n){return n.value}};class _t extends P{constructor(e){super(),this.value=0,f.util.initPartial(e,this)}toJson(e){return f.json.writeScalar(I.FLOAT,this.value,!0)}fromJson(e,t){try{this.value=f.json.readScalar(I.FLOAT,e)}catch(r){let i='cannot decode message google.protobuf.FloatValue from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new _t().fromBinary(e,t)}static fromJson(e,t){return new _t().fromJson(e,t)}static fromJsonString(e,t){return new _t().fromJsonString(e,t)}static equals(e,t){return f.util.equals(_t,e,t)}}_t.runtime=f;_t.typeName="google.protobuf.FloatValue";_t.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:2}]);_t.fieldWrapper={wrapField(n){return new _t({value:n})},unwrapField(n){return n.value}};class Gt extends P{constructor(e){super(),this.value=ne.zero,f.util.initPartial(e,this)}toJson(e){return f.json.writeScalar(I.INT64,this.value,!0)}fromJson(e,t){try{this.value=f.json.readScalar(I.INT64,e)}catch(r){let i='cannot decode message google.protobuf.Int64Value from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new Gt().fromBinary(e,t)}static fromJson(e,t){return new Gt().fromJson(e,t)}static fromJsonString(e,t){return new Gt().fromJsonString(e,t)}static equals(e,t){return f.util.equals(Gt,e,t)}}Gt.runtime=f;Gt.typeName="google.protobuf.Int64Value";Gt.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:3}]);Gt.fieldWrapper={wrapField(n){return new Gt({value:n})},unwrapField(n){return n.value}};class Yt extends P{constructor(e){super(),this.value=ne.zero,f.util.initPartial(e,this)}toJson(e){return f.json.writeScalar(I.UINT64,this.value,!0)}fromJson(e,t){try{this.value=f.json.readScalar(I.UINT64,e)}catch(r){let i='cannot decode message google.protobuf.UInt64Value from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new Yt().fromBinary(e,t)}static fromJson(e,t){return new Yt().fromJson(e,t)}static fromJsonString(e,t){return new Yt().fromJsonString(e,t)}static equals(e,t){return f.util.equals(Yt,e,t)}}Yt.runtime=f;Yt.typeName="google.protobuf.UInt64Value";Yt.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:4}]);Yt.fieldWrapper={wrapField(n){return new Yt({value:n})},unwrapField(n){return n.value}};class Qt extends P{constructor(e){super(),this.value=0,f.util.initPartial(e,this)}toJson(e){return f.json.writeScalar(I.INT32,this.value,!0)}fromJson(e,t){try{this.value=f.json.readScalar(I.INT32,e)}catch(r){let i='cannot decode message google.protobuf.Int32Value from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new Qt().fromBinary(e,t)}static fromJson(e,t){return new Qt().fromJson(e,t)}static fromJsonString(e,t){return new Qt().fromJsonString(e,t)}static equals(e,t){return f.util.equals(Qt,e,t)}}Qt.runtime=f;Qt.typeName="google.protobuf.Int32Value";Qt.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:5}]);Qt.fieldWrapper={wrapField(n){return new Qt({value:n})},unwrapField(n){return n.value}};class Xt extends P{constructor(e){super(),this.value=0,f.util.initPartial(e,this)}toJson(e){return f.json.writeScalar(I.UINT32,this.value,!0)}fromJson(e,t){try{this.value=f.json.readScalar(I.UINT32,e)}catch(r){let i='cannot decode message google.protobuf.UInt32Value from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new Xt().fromBinary(e,t)}static fromJson(e,t){return new Xt().fromJson(e,t)}static fromJsonString(e,t){return new Xt().fromJsonString(e,t)}static equals(e,t){return f.util.equals(Xt,e,t)}}Xt.runtime=f;Xt.typeName="google.protobuf.UInt32Value";Xt.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:13}]);Xt.fieldWrapper={wrapField(n){return new Xt({value:n})},unwrapField(n){return n.value}};class Zt extends P{constructor(e){super(),this.value=!1,f.util.initPartial(e,this)}toJson(e){return f.json.writeScalar(I.BOOL,this.value,!0)}fromJson(e,t){try{this.value=f.json.readScalar(I.BOOL,e)}catch(r){let i='cannot decode message google.protobuf.BoolValue from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new Zt().fromBinary(e,t)}static fromJson(e,t){return new Zt().fromJson(e,t)}static fromJsonString(e,t){return new Zt().fromJsonString(e,t)}static equals(e,t){return f.util.equals(Zt,e,t)}}Zt.runtime=f;Zt.typeName="google.protobuf.BoolValue";Zt.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:8}]);Zt.fieldWrapper={wrapField(n){return new Zt({value:n})},unwrapField(n){return n.value}};class Xe extends P{constructor(e){super(),this.value="",f.util.initPartial(e,this)}toJson(e){return f.json.writeScalar(I.STRING,this.value,!0)}fromJson(e,t){try{this.value=f.json.readScalar(I.STRING,e)}catch(r){let i='cannot decode message google.protobuf.StringValue from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new Xe().fromBinary(e,t)}static fromJson(e,t){return new Xe().fromJson(e,t)}static fromJsonString(e,t){return new Xe().fromJsonString(e,t)}static equals(e,t){return f.util.equals(Xe,e,t)}}Xe.runtime=f;Xe.typeName="google.protobuf.StringValue";Xe.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:9}]);Xe.fieldWrapper={wrapField(n){return new Xe({value:n})},unwrapField(n){return n.value}};class en extends P{constructor(e){super(),this.value=new Uint8Array(0),f.util.initPartial(e,this)}toJson(e){return f.json.writeScalar(I.BYTES,this.value,!0)}fromJson(e,t){try{this.value=f.json.readScalar(I.BYTES,e)}catch(r){let i='cannot decode message google.protobuf.BytesValue from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new en().fromBinary(e,t)}static fromJson(e,t){return new en().fromJson(e,t)}static fromJsonString(e,t){return new en().fromJsonString(e,t)}static equals(e,t){return f.util.equals(en,e,t)}}en.runtime=f;en.typeName="google.protobuf.BytesValue";en.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:12}]);en.fieldWrapper={wrapField(n){return new en({value:n})},unwrapField(n){return n.value}};function rS(n,e,t){try{const r=_f.dec(n);return e?e.fromBinary(r,t):r}catch(r){throw _.from(r,V.DataLoss)}}function iS(n,e){const t={};for(const[r,i]of Object.entries(n.methods)){const s=e(Object.assign(Object.assign({},i),{localName:r,service:n}));s!=null&&(t[r]=s)}return t}const jh=1;function Vh(n){let e,t=new Uint8Array(0);function r(i){const s=new Uint8Array(t.length+i.length);s.set(t),s.set(i,t.length),t=s}return new ReadableStream({start(){e=n.getReader()},async pull(i){let s;for(;;){if(s===void 0&&t.byteLength>=5){let l=0;for(let c=1;c<5;c++)l=(l<<8)+t[c];s={flags:t[0],length:l}}if(s!==void 0&&t.byteLength>=s.length+5)break;const a=await e.read();if(a.done)break;r(a.value)}if(s===void 0){if(t.byteLength==0){i.close();return}i.error(new _("premature end of stream",V.DataLoss));return}const o=t.subarray(5,5+s.length);t=t.subarray(5+s.length),i.enqueue({flags:s.flags,data:o})}})}function qh(n,e){const t=new Uint8Array(e.length+5);t.set(e,5);const r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.setUint8(0,n),r.setUint32(1,e.length),t}var sS=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof __values=="function"?__values(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,l){o=n[s](o),i(a,l,o.done,o.value)})}}function i(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}},wo=function(n){return this instanceof wo?(this.v=n,this):new wo(n)},oS=function(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i={},a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(p){return function(T){return Promise.resolve(T).then(p,h)}}function a(p,T){r[p]&&(i[p]=function(k){return new Promise(function(C,y){s.push([p,k,C,y])>1||l(p,k)})},T&&(i[p]=T(i[p])))}function l(p,T){try{c(r[p](T))}catch(k){g(s[0][3],k)}}function c(p){p.value instanceof wo?Promise.resolve(p.value.v).then(d,h):g(s[0][2],p)}function d(p){l("next",p)}function h(p){l("throw",p)}function g(p,T){p(T),s.shift(),s.length&&l(s[0][0],s[0][1])}},aS=function(n){var e,t;return e={},r("next"),r("throw",function(i){throw i}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(i,s){e[i]=n[i]?function(o){return(t=!t)?{value:wo(n[i](o)),done:!1}:s?s(o):o}:s}};function lS(n){return oS(this,arguments,function*(){yield wo(yield*aS(sS(n)))})}var Hp=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof __values=="function"?__values(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,l){o=n[s](o),i(a,l,o.done,o.value)})}}function i(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}},ds=function(n){return this instanceof ds?(this.v=n,this):new ds(n)},uS=function(n){var e,t;return e={},r("next"),r("throw",function(i){throw i}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(i,s){e[i]=n[i]?function(o){return(t=!t)?{value:ds(n[i](o)),done:!1}:s?s(o):o}:s}},cS=function(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i={},a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(p){return function(T){return Promise.resolve(T).then(p,h)}}function a(p,T){r[p]&&(i[p]=function(k){return new Promise(function(C,y){s.push([p,k,C,y])>1||l(p,k)})},T&&(i[p]=T(i[p])))}function l(p,T){try{c(r[p](T))}catch(k){g(s[0][3],k)}}function c(p){p.value instanceof ds?Promise.resolve(p.value.v).then(d,h):g(s[0][2],p)}function d(p){l("next",p)}function h(p){l("throw",p)}function g(p,T){p(T),s.shift(),s.length&&l(s[0][0],s[0][1])}};function fS(n,e){return iS(n,t=>{switch(t.kind){case be.Unary:return dS(e,n,t);case be.ServerStreaming:return hS(e,n,t);case be.ClientStreaming:return gS(e,n,t);case be.BiDiStreaming:return mS(e,n,t);default:return null}})}function dS(n,e,t){return async function(r,i){var s,o;const a=await n.unary(e,t,i==null?void 0:i.signal,i==null?void 0:i.timeoutMs,i==null?void 0:i.headers,r,i==null?void 0:i.contextValues);return(s=i==null?void 0:i.onHeader)===null||s===void 0||s.call(i,a.header),(o=i==null?void 0:i.onTrailer)===null||o===void 0||o.call(i,a.trailer),a.message}}function hS(n,e,t){return function(r,i){return _p(n.stream(e,t,i==null?void 0:i.signal,i==null?void 0:i.timeoutMs,i==null?void 0:i.headers,lS([r]),i==null?void 0:i.contextValues),i)}}function gS(n,e,t){return async function(r,i){var s,o,a,l,c,d;const h=await n.stream(e,t,i==null?void 0:i.signal,i==null?void 0:i.timeoutMs,i==null?void 0:i.headers,r,i==null?void 0:i.contextValues);(c=i==null?void 0:i.onHeader)===null||c===void 0||c.call(i,h.header);let g,p=0;try{for(var T=!0,k=Hp(h.message),C;C=await k.next(),s=C.done,!s;T=!0)l=C.value,T=!1,g=l,p++}catch(y){o={error:y}}finally{try{!T&&!s&&(a=k.return)&&await a.call(k)}finally{if(o)throw o.error}}if(!g)throw new _("protocol error: missing response message",V.Unimplemented);if(p>1)throw new _("protocol error: received extra messages for client streaming method",V.Unimplemented);return(d=i==null?void 0:i.onTrailer)===null||d===void 0||d.call(i,h.trailer),g}}function mS(n,e,t){return function(r,i){return _p(n.stream(e,t,i==null?void 0:i.signal,i==null?void 0:i.timeoutMs,i==null?void 0:i.headers,r,i==null?void 0:i.contextValues),i)}}function _p(n,e){const t=function(){return cS(this,arguments,function*(){var r,i;const s=yield ds(n);(r=e==null?void 0:e.onHeader)===null||r===void 0||r.call(e,s.header),yield ds(yield*uS(Hp(s.message))),(i=e==null?void 0:e.onTrailer)===null||i===void 0||i.call(e,s.trailer)})}()[Symbol.asyncIterator]();return{[Symbol.asyncIterator]:()=>({next:()=>t.next()})}}function pS(...n){const e=new AbortController,t=n.filter(i=>i!==void 0).concat(e.signal);for(const i of t){if(i.aborted){r.apply(i);break}i.addEventListener("abort",r)}function r(){e.signal.aborted||e.abort(Gp(this));for(const i of t)i.removeEventListener("abort",r)}return e}function yS(n){const e=new AbortController,t=()=>{e.abort(new _("the operation timed out",V.DeadlineExceeded))};let r;return n!==void 0&&(n<=0?t():r=setTimeout(t,n)),{signal:e.signal,cleanup:()=>clearTimeout(r)}}function Gp(n){if(!n.aborted)return;if(n.reason!==void 0)return n.reason;const e=new Error("This operation was aborted");return e.name="AbortError",e}function Kh(){return{get(n){return n.id in this?this[n.id]:n.defaultValue},set(n,e){return this[n.id]=e,this},delete(n){return delete this[n.id],this}}}const ku=128;function Wh(n){const e=new Headers,t=new TextDecoder().decode(n).split(`\r
`);for(const r of t){if(r==="")continue;const i=r.indexOf(":");if(i>0){const s=r.substring(0,i).trim(),o=r.substring(i+1).trim();e.append(s,o)}}return e}const vS="Content-Type",wS="Grpc-Timeout",hs="Grpc-Status",Yp="Grpc-Message",SS="Grpc-Status-Details-Bin",TS="X-User-Agent",kS="X-Grpc-Web",IS="application/grpc-web+proto",AS="application/grpc-web+json";class gr extends P{constructor(e){super(),this.code=0,this.message="",this.details=[],f.util.initPartial(e,this)}static fromBinary(e,t){return new gr().fromBinary(e,t)}static fromJson(e,t){return new gr().fromJson(e,t)}static fromJsonString(e,t){return new gr().fromJsonString(e,t)}static equals(e,t){return f.util.equals(gr,e,t)}}gr.runtime=f;gr.typeName="google.rpc.Status";gr.fields=f.util.newFieldList(()=>[{no:1,name:"code",kind:"scalar",T:5},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"details",kind:"message",T:Wt,repeated:!0}]);const ES="0";function Qp(n){var e;const t=n.get(SS);if(t!=null){const i=rS(t,gr);if(i.code==0)return;const s=new _(i.message,i.code,n);return s.details=i.details.map(o=>({type:o.typeUrl.substring(o.typeUrl.lastIndexOf("/")+1),value:o.value})),s}const r=n.get(hs);if(r!=null){if(r===ES)return;const i=parseInt(r,10);return i in V?new _(decodeURIComponent((e=n.get(Yp))!==null&&e!==void 0?e:""),i,n):new _(`invalid grpc-status: ${r}`,V.Internal,n)}}function Hh(n,e,t){const r=typeof e=="string"?e:e.typeName,i=typeof t=="string"?t:t.name;return n.toString().replace(/\/?$/,`/${r}/${i}`)}function Xp(n,e){return e instanceof n?e:new n(e)}function xS(n,e){function t(r){return r.done===!0?r:{done:r.done,value:Xp(n,r.value)}}return{[Symbol.asyncIterator](){const r=e[Symbol.asyncIterator](),i={next:()=>r.next().then(t)};return r.throw!==void 0&&(i.throw=s=>r.throw(s).then(t)),r.return!==void 0&&(i.return=s=>r.return(s).then(t)),i}}}function Zp(n,e){var t;return(t=e==null?void 0:e.concat().reverse().reduce((r,i)=>i(r),n))!==null&&t!==void 0?t:n}function NS(n){var e;const t=Object.assign({},n);return(e=t.ignoreUnknownFields)!==null&&e!==void 0||(t.ignoreUnknownFields=!0),t}function _h(n,e,t,r){const i=e?Gh(n.I,r):Yh(n.I,t);return{parse:(e?Gh(n.O,r):Yh(n.O,t)).parse,serialize:i.serialize}}function Gh(n,e){return{parse(t){try{return n.fromBinary(t,e)}catch(r){const i=r instanceof Error?r.message:String(r);throw new _(`parse binary: ${i}`,V.Internal)}},serialize(t){try{return t.toBinary(e)}catch(r){const i=r instanceof Error?r.message:String(r);throw new _(`serialize binary: ${i}`,V.Internal)}}}}function Yh(n,e){var t,r;const i=(t=e==null?void 0:e.textEncoder)!==null&&t!==void 0?t:new TextEncoder,s=(r=e==null?void 0:e.textDecoder)!==null&&r!==void 0?r:new TextDecoder,o=NS(e);return{parse(a){try{const l=s.decode(a);return n.fromJsonString(l,o)}catch(l){throw _.from(l,V.InvalidArgument)}},serialize(a){try{const l=a.toJsonString(o);return i.encode(l)}catch(l){throw _.from(l,V.Internal)}}}}function PS(n){const e=Zp(n.next,n.interceptors),[t,r,i]=ey(n),s=Object.assign(Object.assign({},n.req),{message:Xp(n.req.method.I,n.req.message),signal:t});return e(s).then(o=>(i(),o),r)}function CS(n){const e=Zp(n.next,n.interceptors),[t,r,i]=ey(n),s=Object.assign(Object.assign({},n.req),{message:xS(n.req.method.I,n.req.message),signal:t});let o=!1;return t.addEventListener("abort",function(){var a,l;const c=n.req.message[Symbol.asyncIterator]();o||(a=c.throw)===null||a===void 0||a.call(c,this.reason).catch(()=>{}),(l=c.return)===null||l===void 0||l.call(c).catch(()=>{})}),e(s).then(a=>Object.assign(Object.assign({},a),{message:{[Symbol.asyncIterator](){const l=a.message[Symbol.asyncIterator]();return{next(){return l.next().then(c=>(c.done==!0&&(o=!0,i()),c),r)}}}}}),r)}function ey(n){const{signal:e,cleanup:t}=yS(n.timeoutMs),r=pS(n.signal,e);return[r.signal,function(s){const o=_.from(e.aborted?Gp(e):s);return r.abort(o),t(),Promise.reject(o)},function(){t(),r.abort()}]}function DS(){try{new Headers}catch{throw new Error("connect-web requires the fetch API. Are you running on an old version of Node.js? Node.js is not supported in Connect for Web - please stay tuned for Connect for Node.")}}function Qh(n,e){const t=Qp(n);if(t)throw e.forEach((r,i)=>{t.metadata.append(i,r)}),t;if(!e.has(hs)&&!n.has(hs))throw new _("protocol error: missing status",V.Internal)}function Xh(n,e,t,r){const i=new Headers(t??{});return i.set(vS,n?IS:AS),i.set(kS,"1"),i.set(TS,"connect-es/1.6.1"),e!==void 0&&i.set(wS,`${e}m`),i}function OS(n){switch(n){case 400:return V.Internal;case 401:return V.Unauthenticated;case 403:return V.PermissionDenied;case 404:return V.Unimplemented;case 429:return V.Unavailable;case 502:return V.Unavailable;case 503:return V.Unavailable;case 504:return V.Unavailable;default:return V.Unknown}}function Zh(n,e){var t;if(n>=200&&n<300)return{foundStatus:e.has(hs),headerError:Qp(e)};throw new _(decodeURIComponent((t=e.get(Yp))!==null&&t!==void 0?t:`HTTP ${n}`),OS(n),e)}var mi=function(n){return this instanceof mi?(this.v=n,this):new mi(n)},RS=function(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i={},a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(p){return function(T){return Promise.resolve(T).then(p,h)}}function a(p,T){r[p]&&(i[p]=function(k){return new Promise(function(C,y){s.push([p,k,C,y])>1||l(p,k)})},T&&(i[p]=T(i[p])))}function l(p,T){try{c(r[p](T))}catch(k){g(s[0][3],k)}}function c(p){p.value instanceof mi?Promise.resolve(p.value.v).then(d,h):g(s[0][2],p)}function d(p){l("next",p)}function h(p){l("throw",p)}function g(p,T){p(T),s.shift(),s.length&&l(s[0][0],s[0][1])}};function LS(n){var e;DS();const t=(e=n.useBinaryFormat)!==null&&e!==void 0?e:!0;return{async unary(r,i,s,o,a,l,c){var d;const{serialize:h,parse:g}=_h(i,t,n.jsonOptions,n.binaryOptions);return o=o===void 0?n.defaultTimeoutMs:o<=0?void 0:o,await PS({interceptors:n.interceptors,signal:s,timeoutMs:o,req:{stream:!1,service:r,method:i,url:Hh(n.baseUrl,r,i),init:{method:"POST",credentials:(d=n.credentials)!==null&&d!==void 0?d:"same-origin",redirect:"error",mode:"cors"},header:Xh(t,o,a),contextValues:c??Kh(),message:l},next:async p=>{var T;const C=await((T=n.fetch)!==null&&T!==void 0?T:globalThis.fetch)(p.url,Object.assign(Object.assign({},p.init),{headers:p.header,signal:p.signal,body:qh(0,h(p.message))})),{headerError:y}=Zh(C.status,C.headers);if(!C.body)throw y!==void 0?y:"missing response body";const m=Vh(C.body).getReader();let v,A;for(;;){const N=await m.read();if(N.done)break;const{flags:D,data:O}=N.value;if((D&jh)===jh)throw new _("protocol error: received unsupported compressed output",V.Internal);if(D===ku){if(v!==void 0)throw"extra trailer";v=Wh(O);continue}if(A!==void 0)throw new _("extra message",V.Unimplemented);A=g(O)}if(v===void 0)throw y!==void 0?y:new _("missing trailer",C.headers.has(hs)?V.Unimplemented:V.Unknown);if(Qh(v,C.headers),A===void 0)throw new _("missing message",v.has(hs)?V.Unimplemented:V.Unknown);return{stream:!1,service:r,method:i,header:C.headers,message:A,trailer:v}}})},async stream(r,i,s,o,a,l,c){var d;const{serialize:h,parse:g}=_h(i,t,n.jsonOptions,n.binaryOptions);function p(k,C,y,m,v){return RS(this,arguments,function*(){const N=Vh(k).getReader();if(C){if(!(yield mi(N.read())).done)throw"extra data for trailers-only";return yield mi(void 0)}let D=!1;for(;;){const O=yield mi(N.read());if(O.done)break;const{flags:b,data:ee}=O.value;if((b&ku)===ku){if(D)throw"extra trailer";D=!0;const U=Wh(ee);Qh(U,m),U.forEach((Ge,ii)=>y.set(ii,Ge));continue}if(D)throw"extra message";yield yield mi(g(ee))}if("throwIfAborted"in v&&v.throwIfAborted(),!D)throw"missing trailer"})}async function T(k){if(i.kind!=be.ServerStreaming)throw"The fetch API does not support streaming request bodies";const C=await k[Symbol.asyncIterator]().next();if(C.done==!0)throw"missing request message";return qh(0,h(C.value))}return o=o===void 0?n.defaultTimeoutMs:o<=0?void 0:o,CS({interceptors:n.interceptors,signal:s,timeoutMs:o,req:{stream:!0,service:r,method:i,url:Hh(n.baseUrl,r,i),init:{method:"POST",credentials:(d=n.credentials)!==null&&d!==void 0?d:"same-origin",redirect:"error",mode:"cors"},header:Xh(t,o,a),contextValues:c??Kh(),message:l},next:async k=>{var C;const m=await((C=n.fetch)!==null&&C!==void 0?C:globalThis.fetch)(k.url,Object.assign(Object.assign({},k.init),{headers:k.header,signal:k.signal,body:await T(k.message)})),{foundStatus:v,headerError:A}=Zh(m.status,m.headers);if(A!=null)throw A;if(!m.body)throw"missing response body";const N=new Headers;return Object.assign(Object.assign({},k),{header:m.headers,trailer:N,message:p(m.body,v,N,m.headers,k.signal)})}})}}}var J=(n=>(n[n.NULL=0]="NULL",n[n.BOOLEAN=1]="BOOLEAN",n[n.INTEGER=2]="INTEGER",n[n.LONG=3]="LONG",n[n.DOUBLE=4]="DOUBLE",n[n.STRING=5]="STRING",n[n.BYTES=6]="BYTES",n[n.DATE=7]="DATE",n[n.JSON_OBJECT=8]="JSON_OBJECT",n[n.JSON_ARRAY=9]="JSON_ARRAY",n[n.TEXT=10]="TEXT",n[n.INTEGER_CNT=11]="INTEGER_CNT",n[n.LONG_CNT=12]="LONG_CNT",n[n.TREE=13]="TREE",n))(J||{});f.util.setEnumType(J,"yorkie.v1.ValueType",[{no:0,name:"VALUE_TYPE_NULL"},{no:1,name:"VALUE_TYPE_BOOLEAN"},{no:2,name:"VALUE_TYPE_INTEGER"},{no:3,name:"VALUE_TYPE_LONG"},{no:4,name:"VALUE_TYPE_DOUBLE"},{no:5,name:"VALUE_TYPE_STRING"},{no:6,name:"VALUE_TYPE_BYTES"},{no:7,name:"VALUE_TYPE_DATE"},{no:8,name:"VALUE_TYPE_JSON_OBJECT"},{no:9,name:"VALUE_TYPE_JSON_ARRAY"},{no:10,name:"VALUE_TYPE_TEXT"},{no:11,name:"VALUE_TYPE_INTEGER_CNT"},{no:12,name:"VALUE_TYPE_LONG_CNT"},{no:13,name:"VALUE_TYPE_TREE"}]);var Si=(n=>(n[n.DOCUMENT_CHANGED=0]="DOCUMENT_CHANGED",n[n.DOCUMENT_WATCHED=1]="DOCUMENT_WATCHED",n[n.DOCUMENT_UNWATCHED=2]="DOCUMENT_UNWATCHED",n[n.DOCUMENT_BROADCAST=3]="DOCUMENT_BROADCAST",n))(Si||{});f.util.setEnumType(Si,"yorkie.v1.DocEventType",[{no:0,name:"DOC_EVENT_TYPE_DOCUMENT_CHANGED"},{no:1,name:"DOC_EVENT_TYPE_DOCUMENT_WATCHED"},{no:2,name:"DOC_EVENT_TYPE_DOCUMENT_UNWATCHED"},{no:3,name:"DOC_EVENT_TYPE_DOCUMENT_BROADCAST"}]);const cn=class cn extends P{constructor(t){super();u(this,"root");u(this,"presences",{});f.util.initPartial(t,this)}static fromBinary(t,r){return new cn().fromBinary(t,r)}static fromJson(t,r){return new cn().fromJson(t,r)}static fromJsonString(t,r){return new cn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(cn,t,r)}};u(cn,"runtime",f),u(cn,"typeName","yorkie.v1.Snapshot"),u(cn,"fields",f.util.newFieldList(()=>[{no:1,name:"root",kind:"message",T:_e},{no:2,name:"presences",kind:"map",K:9,V:{kind:"message",T:Yf}}]));let Ic=cn;var ut;let xr=(ut=class extends P{constructor(t){super();u(this,"documentKey","");u(this,"checkpoint");u(this,"snapshot",new Uint8Array(0));u(this,"changes",[]);u(this,"minSyncedTicket");u(this,"isRemoved",!1);u(this,"versionVector");f.util.initPartial(t,this)}static fromBinary(t,r){return new ut().fromBinary(t,r)}static fromJson(t,r){return new ut().fromJson(t,r)}static fromJsonString(t,r){return new ut().fromJsonString(t,r)}static equals(t,r){return f.util.equals(ut,t,r)}},u(ut,"runtime",f),u(ut,"typeName","yorkie.v1.ChangePack"),u(ut,"fields",f.util.newFieldList(()=>[{no:1,name:"document_key",kind:"scalar",T:9},{no:2,name:"checkpoint",kind:"message",T:ry},{no:3,name:"snapshot",kind:"scalar",T:12},{no:4,name:"changes",kind:"message",T:ty,repeated:!0},{no:5,name:"min_synced_ticket",kind:"message",T:B},{no:6,name:"is_removed",kind:"scalar",T:8},{no:7,name:"version_vector",kind:"message",T:$l}])),ut);var ct;let ty=(ct=class extends P{constructor(t){super();u(this,"id");u(this,"message","");u(this,"operations",[]);u(this,"presenceChange");f.util.initPartial(t,this)}static fromBinary(t,r){return new ct().fromBinary(t,r)}static fromJson(t,r){return new ct().fromJson(t,r)}static fromJsonString(t,r){return new ct().fromJsonString(t,r)}static equals(t,r){return f.util.equals(ct,t,r)}},u(ct,"runtime",f),u(ct,"typeName","yorkie.v1.Change"),u(ct,"fields",f.util.newFieldList(()=>[{no:1,name:"id",kind:"message",T:Jl},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"operations",kind:"message",T:Gf,repeated:!0},{no:4,name:"presence_change",kind:"message",T:ko}])),ct);var ft;let Jl=(ft=class extends P{constructor(t){super();u(this,"clientSeq",0);u(this,"serverSeq",ne.zero);u(this,"lamport",ne.zero);u(this,"actorId",new Uint8Array(0));u(this,"versionVector");f.util.initPartial(t,this)}static fromBinary(t,r){return new ft().fromBinary(t,r)}static fromJson(t,r){return new ft().fromJson(t,r)}static fromJsonString(t,r){return new ft().fromJsonString(t,r)}static equals(t,r){return f.util.equals(ft,t,r)}},u(ft,"runtime",f),u(ft,"typeName","yorkie.v1.ChangeID"),u(ft,"fields",f.util.newFieldList(()=>[{no:1,name:"client_seq",kind:"scalar",T:13},{no:2,name:"server_seq",kind:"scalar",T:3},{no:3,name:"lamport",kind:"scalar",T:3},{no:4,name:"actor_id",kind:"scalar",T:12},{no:5,name:"version_vector",kind:"message",T:$l}])),ft);var dt;let $l=(dt=class extends P{constructor(t){super();u(this,"vector",{});f.util.initPartial(t,this)}static fromBinary(t,r){return new dt().fromBinary(t,r)}static fromJson(t,r){return new dt().fromJson(t,r)}static fromJsonString(t,r){return new dt().fromJsonString(t,r)}static equals(t,r){return f.util.equals(dt,t,r)}},u(dt,"runtime",f),u(dt,"typeName","yorkie.v1.VersionVector"),u(dt,"fields",f.util.newFieldList(()=>[{no:1,name:"vector",kind:"map",K:9,V:{kind:"scalar",T:3}}])),dt);var ht;let Gf=(ht=class extends P{constructor(t){super();u(this,"body",{case:void 0});f.util.initPartial(t,this)}static fromBinary(t,r){return new ht().fromBinary(t,r)}static fromJson(t,r){return new ht().fromJson(t,r)}static fromJsonString(t,r){return new ht().fromJsonString(t,r)}static equals(t,r){return f.util.equals(ht,t,r)}},u(ht,"runtime",f),u(ht,"typeName","yorkie.v1.Operation"),u(ht,"fields",f.util.newFieldList(()=>[{no:1,name:"set",kind:"message",T:el,oneof:"body"},{no:2,name:"add",kind:"message",T:tl,oneof:"body"},{no:3,name:"move",kind:"message",T:nl,oneof:"body"},{no:4,name:"remove",kind:"message",T:rl,oneof:"body"},{no:5,name:"edit",kind:"message",T:il,oneof:"body"},{no:6,name:"select",kind:"message",T:Ac,oneof:"body"},{no:7,name:"style",kind:"message",T:sl,oneof:"body"},{no:8,name:"increase",kind:"message",T:ol,oneof:"body"},{no:9,name:"tree_edit",kind:"message",T:al,oneof:"body"},{no:10,name:"tree_style",kind:"message",T:ll,oneof:"body"},{no:11,name:"array_set",kind:"message",T:Ec,oneof:"body"}])),ht);const fn=class fn extends P{constructor(t){super();u(this,"parentCreatedAt");u(this,"key","");u(this,"value");u(this,"executedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new fn().fromBinary(t,r)}static fromJson(t,r){return new fn().fromJson(t,r)}static fromJsonString(t,r){return new fn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(fn,t,r)}};u(fn,"runtime",f),u(fn,"typeName","yorkie.v1.Operation.Set"),u(fn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:B},{no:2,name:"key",kind:"scalar",T:9},{no:3,name:"value",kind:"message",T:lt},{no:4,name:"executed_at",kind:"message",T:B}]));let el=fn;const dn=class dn extends P{constructor(t){super();u(this,"parentCreatedAt");u(this,"prevCreatedAt");u(this,"value");u(this,"executedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new dn().fromBinary(t,r)}static fromJson(t,r){return new dn().fromJson(t,r)}static fromJsonString(t,r){return new dn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(dn,t,r)}};u(dn,"runtime",f),u(dn,"typeName","yorkie.v1.Operation.Add"),u(dn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:B},{no:2,name:"prev_created_at",kind:"message",T:B},{no:3,name:"value",kind:"message",T:lt},{no:4,name:"executed_at",kind:"message",T:B}]));let tl=dn;const hn=class hn extends P{constructor(t){super();u(this,"parentCreatedAt");u(this,"prevCreatedAt");u(this,"createdAt");u(this,"executedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new hn().fromBinary(t,r)}static fromJson(t,r){return new hn().fromJson(t,r)}static fromJsonString(t,r){return new hn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(hn,t,r)}};u(hn,"runtime",f),u(hn,"typeName","yorkie.v1.Operation.Move"),u(hn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:B},{no:2,name:"prev_created_at",kind:"message",T:B},{no:3,name:"created_at",kind:"message",T:B},{no:4,name:"executed_at",kind:"message",T:B}]));let nl=hn;const gn=class gn extends P{constructor(t){super();u(this,"parentCreatedAt");u(this,"createdAt");u(this,"executedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new gn().fromBinary(t,r)}static fromJson(t,r){return new gn().fromJson(t,r)}static fromJsonString(t,r){return new gn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(gn,t,r)}};u(gn,"runtime",f),u(gn,"typeName","yorkie.v1.Operation.Remove"),u(gn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:B},{no:2,name:"created_at",kind:"message",T:B},{no:3,name:"executed_at",kind:"message",T:B}]));let rl=gn;const mn=class mn extends P{constructor(t){super();u(this,"parentCreatedAt");u(this,"from");u(this,"to");u(this,"createdAtMapByActor",{});u(this,"content","");u(this,"executedAt");u(this,"attributes",{});f.util.initPartial(t,this)}static fromBinary(t,r){return new mn().fromBinary(t,r)}static fromJson(t,r){return new mn().fromJson(t,r)}static fromJsonString(t,r){return new mn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(mn,t,r)}};u(mn,"runtime",f),u(mn,"typeName","yorkie.v1.Operation.Edit"),u(mn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:B},{no:2,name:"from",kind:"message",T:Ir},{no:3,name:"to",kind:"message",T:Ir},{no:4,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:B}},{no:5,name:"content",kind:"scalar",T:9},{no:6,name:"executed_at",kind:"message",T:B},{no:7,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}}]));let il=mn;const pn=class pn extends P{constructor(t){super();u(this,"parentCreatedAt");u(this,"from");u(this,"to");u(this,"executedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new pn().fromBinary(t,r)}static fromJson(t,r){return new pn().fromJson(t,r)}static fromJsonString(t,r){return new pn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(pn,t,r)}};u(pn,"runtime",f),u(pn,"typeName","yorkie.v1.Operation.Select"),u(pn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:B},{no:2,name:"from",kind:"message",T:Ir},{no:3,name:"to",kind:"message",T:Ir},{no:4,name:"executed_at",kind:"message",T:B}]));let Ac=pn;const yn=class yn extends P{constructor(t){super();u(this,"parentCreatedAt");u(this,"from");u(this,"to");u(this,"attributes",{});u(this,"executedAt");u(this,"createdAtMapByActor",{});f.util.initPartial(t,this)}static fromBinary(t,r){return new yn().fromBinary(t,r)}static fromJson(t,r){return new yn().fromJson(t,r)}static fromJsonString(t,r){return new yn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(yn,t,r)}};u(yn,"runtime",f),u(yn,"typeName","yorkie.v1.Operation.Style"),u(yn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:B},{no:2,name:"from",kind:"message",T:Ir},{no:3,name:"to",kind:"message",T:Ir},{no:4,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:5,name:"executed_at",kind:"message",T:B},{no:6,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:B}}]));let sl=yn;const vn=class vn extends P{constructor(t){super();u(this,"parentCreatedAt");u(this,"value");u(this,"executedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new vn().fromBinary(t,r)}static fromJson(t,r){return new vn().fromJson(t,r)}static fromJsonString(t,r){return new vn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(vn,t,r)}};u(vn,"runtime",f),u(vn,"typeName","yorkie.v1.Operation.Increase"),u(vn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:B},{no:2,name:"value",kind:"message",T:lt},{no:3,name:"executed_at",kind:"message",T:B}]));let ol=vn;const wn=class wn extends P{constructor(t){super();u(this,"parentCreatedAt");u(this,"from");u(this,"to");u(this,"createdAtMapByActor",{});u(this,"contents",[]);u(this,"splitLevel",0);u(this,"executedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new wn().fromBinary(t,r)}static fromJson(t,r){return new wn().fromJson(t,r)}static fromJsonString(t,r){return new wn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(wn,t,r)}};u(wn,"runtime",f),u(wn,"typeName","yorkie.v1.Operation.TreeEdit"),u(wn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:B},{no:2,name:"from",kind:"message",T:xi},{no:3,name:"to",kind:"message",T:xi},{no:4,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:B}},{no:5,name:"contents",kind:"message",T:yl,repeated:!0},{no:7,name:"split_level",kind:"scalar",T:5},{no:6,name:"executed_at",kind:"message",T:B}]));let al=wn;const Sn=class Sn extends P{constructor(t){super();u(this,"parentCreatedAt");u(this,"from");u(this,"to");u(this,"attributes",{});u(this,"executedAt");u(this,"attributesToRemove",[]);u(this,"createdAtMapByActor",{});f.util.initPartial(t,this)}static fromBinary(t,r){return new Sn().fromBinary(t,r)}static fromJson(t,r){return new Sn().fromJson(t,r)}static fromJsonString(t,r){return new Sn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Sn,t,r)}};u(Sn,"runtime",f),u(Sn,"typeName","yorkie.v1.Operation.TreeStyle"),u(Sn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:B},{no:2,name:"from",kind:"message",T:xi},{no:3,name:"to",kind:"message",T:xi},{no:4,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:5,name:"executed_at",kind:"message",T:B},{no:6,name:"attributes_to_remove",kind:"scalar",T:9,repeated:!0},{no:7,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:B}}]));let ll=Sn;const Tn=class Tn extends P{constructor(t){super();u(this,"parentCreatedAt");u(this,"createdAt");u(this,"value");u(this,"executedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new Tn().fromBinary(t,r)}static fromJson(t,r){return new Tn().fromJson(t,r)}static fromJsonString(t,r){return new Tn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Tn,t,r)}};u(Tn,"runtime",f),u(Tn,"typeName","yorkie.v1.Operation.ArraySet"),u(Tn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:B},{no:2,name:"created_at",kind:"message",T:B},{no:3,name:"value",kind:"message",T:lt},{no:4,name:"executed_at",kind:"message",T:B}]));let Ec=Tn;const kn=class kn extends P{constructor(t){super();u(this,"createdAt");u(this,"movedAt");u(this,"removedAt");u(this,"type",0);u(this,"value",new Uint8Array(0));f.util.initPartial(t,this)}static fromBinary(t,r){return new kn().fromBinary(t,r)}static fromJson(t,r){return new kn().fromJson(t,r)}static fromJsonString(t,r){return new kn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(kn,t,r)}};u(kn,"runtime",f),u(kn,"typeName","yorkie.v1.JSONElementSimple"),u(kn,"fields",f.util.newFieldList(()=>[{no:1,name:"created_at",kind:"message",T:B},{no:2,name:"moved_at",kind:"message",T:B},{no:3,name:"removed_at",kind:"message",T:B},{no:4,name:"type",kind:"enum",T:f.getEnumType(J)},{no:5,name:"value",kind:"scalar",T:12}]));let lt=kn;const In=class In extends P{constructor(t){super();u(this,"body",{case:void 0});f.util.initPartial(t,this)}static fromBinary(t,r){return new In().fromBinary(t,r)}static fromJson(t,r){return new In().fromJson(t,r)}static fromJsonString(t,r){return new In().fromJsonString(t,r)}static equals(t,r){return f.util.equals(In,t,r)}};u(In,"runtime",f),u(In,"typeName","yorkie.v1.JSONElement"),u(In,"fields",f.util.newFieldList(()=>[{no:1,name:"json_object",kind:"message",T:ul,oneof:"body"},{no:2,name:"json_array",kind:"message",T:cl,oneof:"body"},{no:3,name:"primitive",kind:"message",T:fl,oneof:"body"},{no:5,name:"text",kind:"message",T:dl,oneof:"body"},{no:6,name:"counter",kind:"message",T:hl,oneof:"body"},{no:7,name:"tree",kind:"message",T:gl,oneof:"body"}]));let _e=In;const An=class An extends P{constructor(t){super();u(this,"nodes",[]);u(this,"createdAt");u(this,"movedAt");u(this,"removedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new An().fromBinary(t,r)}static fromJson(t,r){return new An().fromJson(t,r)}static fromJsonString(t,r){return new An().fromJsonString(t,r)}static equals(t,r){return f.util.equals(An,t,r)}};u(An,"runtime",f),u(An,"typeName","yorkie.v1.JSONElement.JSONObject"),u(An,"fields",f.util.newFieldList(()=>[{no:1,name:"nodes",kind:"message",T:ny,repeated:!0},{no:2,name:"created_at",kind:"message",T:B},{no:3,name:"moved_at",kind:"message",T:B},{no:4,name:"removed_at",kind:"message",T:B}]));let ul=An;const En=class En extends P{constructor(t){super();u(this,"nodes",[]);u(this,"createdAt");u(this,"movedAt");u(this,"removedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new En().fromBinary(t,r)}static fromJson(t,r){return new En().fromJson(t,r)}static fromJsonString(t,r){return new En().fromJsonString(t,r)}static equals(t,r){return f.util.equals(En,t,r)}};u(En,"runtime",f),u(En,"typeName","yorkie.v1.JSONElement.JSONArray"),u(En,"fields",f.util.newFieldList(()=>[{no:1,name:"nodes",kind:"message",T:ml,repeated:!0},{no:2,name:"created_at",kind:"message",T:B},{no:3,name:"moved_at",kind:"message",T:B},{no:4,name:"removed_at",kind:"message",T:B}]));let cl=En;const xn=class xn extends P{constructor(t){super();u(this,"type",0);u(this,"value",new Uint8Array(0));u(this,"createdAt");u(this,"movedAt");u(this,"removedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new xn().fromBinary(t,r)}static fromJson(t,r){return new xn().fromJson(t,r)}static fromJsonString(t,r){return new xn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(xn,t,r)}};u(xn,"runtime",f),u(xn,"typeName","yorkie.v1.JSONElement.Primitive"),u(xn,"fields",f.util.newFieldList(()=>[{no:1,name:"type",kind:"enum",T:f.getEnumType(J)},{no:2,name:"value",kind:"scalar",T:12},{no:3,name:"created_at",kind:"message",T:B},{no:4,name:"moved_at",kind:"message",T:B},{no:5,name:"removed_at",kind:"message",T:B}]));let fl=xn;const Nn=class Nn extends P{constructor(t){super();u(this,"nodes",[]);u(this,"createdAt");u(this,"movedAt");u(this,"removedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new Nn().fromBinary(t,r)}static fromJson(t,r){return new Nn().fromJson(t,r)}static fromJsonString(t,r){return new Nn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Nn,t,r)}};u(Nn,"runtime",f),u(Nn,"typeName","yorkie.v1.JSONElement.Text"),u(Nn,"fields",f.util.newFieldList(()=>[{no:1,name:"nodes",kind:"message",T:pl,repeated:!0},{no:2,name:"created_at",kind:"message",T:B},{no:3,name:"moved_at",kind:"message",T:B},{no:4,name:"removed_at",kind:"message",T:B}]));let dl=Nn;const Pn=class Pn extends P{constructor(t){super();u(this,"type",0);u(this,"value",new Uint8Array(0));u(this,"createdAt");u(this,"movedAt");u(this,"removedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new Pn().fromBinary(t,r)}static fromJson(t,r){return new Pn().fromJson(t,r)}static fromJsonString(t,r){return new Pn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Pn,t,r)}};u(Pn,"runtime",f),u(Pn,"typeName","yorkie.v1.JSONElement.Counter"),u(Pn,"fields",f.util.newFieldList(()=>[{no:1,name:"type",kind:"enum",T:f.getEnumType(J)},{no:2,name:"value",kind:"scalar",T:12},{no:3,name:"created_at",kind:"message",T:B},{no:4,name:"moved_at",kind:"message",T:B},{no:5,name:"removed_at",kind:"message",T:B}]));let hl=Pn;const Cn=class Cn extends P{constructor(t){super();u(this,"nodes",[]);u(this,"createdAt");u(this,"movedAt");u(this,"removedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new Cn().fromBinary(t,r)}static fromJson(t,r){return new Cn().fromJson(t,r)}static fromJsonString(t,r){return new Cn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Cn,t,r)}};u(Cn,"runtime",f),u(Cn,"typeName","yorkie.v1.JSONElement.Tree"),u(Cn,"fields",f.util.newFieldList(()=>[{no:1,name:"nodes",kind:"message",T:To,repeated:!0},{no:2,name:"created_at",kind:"message",T:B},{no:3,name:"moved_at",kind:"message",T:B},{no:4,name:"removed_at",kind:"message",T:B}]));let gl=Cn;var gt;let ny=(gt=class extends P{constructor(t){super();u(this,"key","");u(this,"element");f.util.initPartial(t,this)}static fromBinary(t,r){return new gt().fromBinary(t,r)}static fromJson(t,r){return new gt().fromJson(t,r)}static fromJsonString(t,r){return new gt().fromJsonString(t,r)}static equals(t,r){return f.util.equals(gt,t,r)}},u(gt,"runtime",f),u(gt,"typeName","yorkie.v1.RHTNode"),u(gt,"fields",f.util.newFieldList(()=>[{no:1,name:"key",kind:"scalar",T:9},{no:2,name:"element",kind:"message",T:_e}])),gt);const Vt=class Vt extends P{constructor(t){super();u(this,"next");u(this,"element");f.util.initPartial(t,this)}static fromBinary(t,r){return new Vt().fromBinary(t,r)}static fromJson(t,r){return new Vt().fromJson(t,r)}static fromJsonString(t,r){return new Vt().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Vt,t,r)}};u(Vt,"runtime",f),u(Vt,"typeName","yorkie.v1.RGANode"),u(Vt,"fields",f.util.newFieldList(()=>[{no:1,name:"next",kind:"message",T:Vt},{no:2,name:"element",kind:"message",T:_e}]));let ml=Vt;const Dn=class Dn extends P{constructor(t){super();u(this,"value","");u(this,"updatedAt");u(this,"isRemoved",!1);f.util.initPartial(t,this)}static fromBinary(t,r){return new Dn().fromBinary(t,r)}static fromJson(t,r){return new Dn().fromJson(t,r)}static fromJsonString(t,r){return new Dn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Dn,t,r)}};u(Dn,"runtime",f),u(Dn,"typeName","yorkie.v1.NodeAttr"),u(Dn,"fields",f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:9},{no:2,name:"updated_at",kind:"message",T:B},{no:3,name:"is_removed",kind:"scalar",T:8}]));let gs=Dn;const On=class On extends P{constructor(t){super();u(this,"id");u(this,"value","");u(this,"removedAt");u(this,"insPrevId");u(this,"attributes",{});f.util.initPartial(t,this)}static fromBinary(t,r){return new On().fromBinary(t,r)}static fromJson(t,r){return new On().fromJson(t,r)}static fromJsonString(t,r){return new On().fromJsonString(t,r)}static equals(t,r){return f.util.equals(On,t,r)}};u(On,"runtime",f),u(On,"typeName","yorkie.v1.TextNode"),u(On,"fields",f.util.newFieldList(()=>[{no:1,name:"id",kind:"message",T:So},{no:2,name:"value",kind:"scalar",T:9},{no:3,name:"removed_at",kind:"message",T:B},{no:4,name:"ins_prev_id",kind:"message",T:So},{no:5,name:"attributes",kind:"map",K:9,V:{kind:"message",T:gs}}]));let pl=On;const Rn=class Rn extends P{constructor(t){super();u(this,"createdAt");u(this,"offset",0);f.util.initPartial(t,this)}static fromBinary(t,r){return new Rn().fromBinary(t,r)}static fromJson(t,r){return new Rn().fromJson(t,r)}static fromJsonString(t,r){return new Rn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Rn,t,r)}};u(Rn,"runtime",f),u(Rn,"typeName","yorkie.v1.TextNodeID"),u(Rn,"fields",f.util.newFieldList(()=>[{no:1,name:"created_at",kind:"message",T:B},{no:2,name:"offset",kind:"scalar",T:5}]));let So=Rn;const Ln=class Ln extends P{constructor(t){super();u(this,"id");u(this,"type","");u(this,"value","");u(this,"removedAt");u(this,"insPrevId");u(this,"insNextId");u(this,"depth",0);u(this,"attributes",{});f.util.initPartial(t,this)}static fromBinary(t,r){return new Ln().fromBinary(t,r)}static fromJson(t,r){return new Ln().fromJson(t,r)}static fromJsonString(t,r){return new Ln().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Ln,t,r)}};u(Ln,"runtime",f),u(Ln,"typeName","yorkie.v1.TreeNode"),u(Ln,"fields",f.util.newFieldList(()=>[{no:1,name:"id",kind:"message",T:Hr},{no:2,name:"type",kind:"scalar",T:9},{no:3,name:"value",kind:"scalar",T:9},{no:4,name:"removed_at",kind:"message",T:B},{no:5,name:"ins_prev_id",kind:"message",T:Hr},{no:6,name:"ins_next_id",kind:"message",T:Hr},{no:7,name:"depth",kind:"scalar",T:5},{no:8,name:"attributes",kind:"map",K:9,V:{kind:"message",T:gs}}]));let To=Ln;const Bn=class Bn extends P{constructor(t){super();u(this,"content",[]);f.util.initPartial(t,this)}static fromBinary(t,r){return new Bn().fromBinary(t,r)}static fromJson(t,r){return new Bn().fromJson(t,r)}static fromJsonString(t,r){return new Bn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Bn,t,r)}};u(Bn,"runtime",f),u(Bn,"typeName","yorkie.v1.TreeNodes"),u(Bn,"fields",f.util.newFieldList(()=>[{no:1,name:"content",kind:"message",T:To,repeated:!0}]));let yl=Bn;const bn=class bn extends P{constructor(t){super();u(this,"createdAt");u(this,"offset",0);f.util.initPartial(t,this)}static fromBinary(t,r){return new bn().fromBinary(t,r)}static fromJson(t,r){return new bn().fromJson(t,r)}static fromJsonString(t,r){return new bn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(bn,t,r)}};u(bn,"runtime",f),u(bn,"typeName","yorkie.v1.TreeNodeID"),u(bn,"fields",f.util.newFieldList(()=>[{no:1,name:"created_at",kind:"message",T:B},{no:2,name:"offset",kind:"scalar",T:5}]));let Hr=bn;const zn=class zn extends P{constructor(t){super();u(this,"parentId");u(this,"leftSiblingId");f.util.initPartial(t,this)}static fromBinary(t,r){return new zn().fromBinary(t,r)}static fromJson(t,r){return new zn().fromJson(t,r)}static fromJsonString(t,r){return new zn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(zn,t,r)}};u(zn,"runtime",f),u(zn,"typeName","yorkie.v1.TreePos"),u(zn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_id",kind:"message",T:Hr},{no:2,name:"left_sibling_id",kind:"message",T:Hr}]));let xi=zn;const Fn=class Fn extends P{constructor(t){super();u(this,"id","");u(this,"username","");u(this,"createdAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new Fn().fromBinary(t,r)}static fromJson(t,r){return new Fn().fromJson(t,r)}static fromJsonString(t,r){return new Fn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Fn,t,r)}};u(Fn,"runtime",f),u(Fn,"typeName","yorkie.v1.User"),u(Fn,"fields",f.util.newFieldList(()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"username",kind:"scalar",T:9},{no:3,name:"created_at",kind:"message",T:Oe}]));let eg=Fn;const Mn=class Mn extends P{constructor(t){super();u(this,"id","");u(this,"name","");u(this,"publicKey","");u(this,"secretKey","");u(this,"authWebhookUrl","");u(this,"authWebhookMethods",[]);u(this,"clientDeactivateThreshold","");u(this,"createdAt");u(this,"updatedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new Mn().fromBinary(t,r)}static fromJson(t,r){return new Mn().fromJson(t,r)}static fromJsonString(t,r){return new Mn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Mn,t,r)}};u(Mn,"runtime",f),u(Mn,"typeName","yorkie.v1.Project"),u(Mn,"fields",f.util.newFieldList(()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"public_key",kind:"scalar",T:9},{no:4,name:"secret_key",kind:"scalar",T:9},{no:5,name:"auth_webhook_url",kind:"scalar",T:9},{no:6,name:"auth_webhook_methods",kind:"scalar",T:9,repeated:!0},{no:7,name:"client_deactivate_threshold",kind:"scalar",T:9},{no:8,name:"created_at",kind:"message",T:Oe},{no:9,name:"updated_at",kind:"message",T:Oe}]));let tg=Mn;const Jn=class Jn extends P{constructor(t){super();u(this,"name");u(this,"authWebhookUrl");u(this,"authWebhookMethods");u(this,"clientDeactivateThreshold");f.util.initPartial(t,this)}static fromBinary(t,r){return new Jn().fromBinary(t,r)}static fromJson(t,r){return new Jn().fromJson(t,r)}static fromJsonString(t,r){return new Jn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Jn,t,r)}};u(Jn,"runtime",f),u(Jn,"typeName","yorkie.v1.UpdatableProjectFields"),u(Jn,"fields",f.util.newFieldList(()=>[{no:1,name:"name",kind:"message",T:Xe},{no:2,name:"auth_webhook_url",kind:"message",T:Xe},{no:3,name:"auth_webhook_methods",kind:"message",T:xc},{no:4,name:"client_deactivate_threshold",kind:"message",T:Xe}]));let ng=Jn;const $n=class $n extends P{constructor(t){super();u(this,"methods",[]);f.util.initPartial(t,this)}static fromBinary(t,r){return new $n().fromBinary(t,r)}static fromJson(t,r){return new $n().fromJson(t,r)}static fromJsonString(t,r){return new $n().fromJsonString(t,r)}static equals(t,r){return f.util.equals($n,t,r)}};u($n,"runtime",f),u($n,"typeName","yorkie.v1.UpdatableProjectFields.AuthWebhookMethods"),u($n,"fields",f.util.newFieldList(()=>[{no:1,name:"methods",kind:"scalar",T:9,repeated:!0}]));let xc=$n;const Un=class Un extends P{constructor(t){super();u(this,"id","");u(this,"key","");u(this,"snapshot","");u(this,"createdAt");u(this,"accessedAt");u(this,"updatedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new Un().fromBinary(t,r)}static fromJson(t,r){return new Un().fromJson(t,r)}static fromJsonString(t,r){return new Un().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Un,t,r)}};u(Un,"runtime",f),u(Un,"typeName","yorkie.v1.DocumentSummary"),u(Un,"fields",f.util.newFieldList(()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"key",kind:"scalar",T:9},{no:3,name:"snapshot",kind:"scalar",T:9},{no:4,name:"created_at",kind:"message",T:Oe},{no:5,name:"accessed_at",kind:"message",T:Oe},{no:6,name:"updated_at",kind:"message",T:Oe}]));let rg=Un;const jn=class jn extends P{constructor(t){super();u(this,"type",0);u(this,"presence");f.util.initPartial(t,this)}static fromBinary(t,r){return new jn().fromBinary(t,r)}static fromJson(t,r){return new jn().fromJson(t,r)}static fromJsonString(t,r){return new jn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(jn,t,r)}};u(jn,"runtime",f),u(jn,"typeName","yorkie.v1.PresenceChange"),u(jn,"fields",f.util.newFieldList(()=>[{no:1,name:"type",kind:"enum",T:f.getEnumType(Ni)},{no:2,name:"presence",kind:"message",T:Yf}]));let ko=jn;var Ni=(n=>(n[n.UNSPECIFIED=0]="UNSPECIFIED",n[n.PUT=1]="PUT",n[n.DELETE=2]="DELETE",n[n.CLEAR=3]="CLEAR",n))(Ni||{});f.util.setEnumType(Ni,"yorkie.v1.PresenceChange.ChangeType",[{no:0,name:"CHANGE_TYPE_UNSPECIFIED"},{no:1,name:"CHANGE_TYPE_PUT"},{no:2,name:"CHANGE_TYPE_DELETE"},{no:3,name:"CHANGE_TYPE_CLEAR"}]);var mt;let Yf=(mt=class extends P{constructor(t){super();u(this,"data",{});f.util.initPartial(t,this)}static fromBinary(t,r){return new mt().fromBinary(t,r)}static fromJson(t,r){return new mt().fromJson(t,r)}static fromJsonString(t,r){return new mt().fromJsonString(t,r)}static equals(t,r){return f.util.equals(mt,t,r)}},u(mt,"runtime",f),u(mt,"typeName","yorkie.v1.Presence"),u(mt,"fields",f.util.newFieldList(()=>[{no:1,name:"data",kind:"map",K:9,V:{kind:"scalar",T:9}}])),mt);var pt;let ry=(pt=class extends P{constructor(t){super();u(this,"serverSeq",ne.zero);u(this,"clientSeq",0);f.util.initPartial(t,this)}static fromBinary(t,r){return new pt().fromBinary(t,r)}static fromJson(t,r){return new pt().fromJson(t,r)}static fromJsonString(t,r){return new pt().fromJsonString(t,r)}static equals(t,r){return f.util.equals(pt,t,r)}},u(pt,"runtime",f),u(pt,"typeName","yorkie.v1.Checkpoint"),u(pt,"fields",f.util.newFieldList(()=>[{no:1,name:"server_seq",kind:"scalar",T:3},{no:2,name:"client_seq",kind:"scalar",T:13}])),pt);const Vn=class Vn extends P{constructor(t){super();u(this,"createdAt");u(this,"offset",0);u(this,"relativeOffset",0);f.util.initPartial(t,this)}static fromBinary(t,r){return new Vn().fromBinary(t,r)}static fromJson(t,r){return new Vn().fromJson(t,r)}static fromJsonString(t,r){return new Vn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Vn,t,r)}};u(Vn,"runtime",f),u(Vn,"typeName","yorkie.v1.TextNodePos"),u(Vn,"fields",f.util.newFieldList(()=>[{no:1,name:"created_at",kind:"message",T:B},{no:2,name:"offset",kind:"scalar",T:5},{no:3,name:"relative_offset",kind:"scalar",T:5}]));let Ir=Vn;var yt;let B=(yt=class extends P{constructor(t){super();u(this,"lamport",ne.zero);u(this,"delimiter",0);u(this,"actorId",new Uint8Array(0));f.util.initPartial(t,this)}static fromBinary(t,r){return new yt().fromBinary(t,r)}static fromJson(t,r){return new yt().fromJson(t,r)}static fromJsonString(t,r){return new yt().fromJsonString(t,r)}static equals(t,r){return f.util.equals(yt,t,r)}},u(yt,"runtime",f),u(yt,"typeName","yorkie.v1.TimeTicket"),u(yt,"fields",f.util.newFieldList(()=>[{no:1,name:"lamport",kind:"scalar",T:3},{no:2,name:"delimiter",kind:"scalar",T:13},{no:3,name:"actor_id",kind:"scalar",T:12}])),yt);const qn=class qn extends P{constructor(t){super();u(this,"topic","");u(this,"payload",new Uint8Array(0));f.util.initPartial(t,this)}static fromBinary(t,r){return new qn().fromBinary(t,r)}static fromJson(t,r){return new qn().fromJson(t,r)}static fromJsonString(t,r){return new qn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(qn,t,r)}};u(qn,"runtime",f),u(qn,"typeName","yorkie.v1.DocEventBody"),u(qn,"fields",f.util.newFieldList(()=>[{no:1,name:"topic",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:12}]));let Nc=qn;const Kn=class Kn extends P{constructor(t){super();u(this,"type",0);u(this,"publisher","");u(this,"body");f.util.initPartial(t,this)}static fromBinary(t,r){return new Kn().fromBinary(t,r)}static fromJson(t,r){return new Kn().fromJson(t,r)}static fromJsonString(t,r){return new Kn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Kn,t,r)}};u(Kn,"runtime",f),u(Kn,"typeName","yorkie.v1.DocEvent"),u(Kn,"fields",f.util.newFieldList(()=>[{no:1,name:"type",kind:"enum",T:f.getEnumType(Si)},{no:2,name:"publisher",kind:"scalar",T:9},{no:3,name:"body",kind:"message",T:Nc}]));let Pc=Kn;const Wn=class Wn extends P{constructor(t){super();u(this,"clientKey","");u(this,"metadata",{});f.util.initPartial(t,this)}static fromBinary(t,r){return new Wn().fromBinary(t,r)}static fromJson(t,r){return new Wn().fromJson(t,r)}static fromJsonString(t,r){return new Wn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Wn,t,r)}};u(Wn,"runtime",f),u(Wn,"typeName","yorkie.v1.ActivateClientRequest"),u(Wn,"fields",f.util.newFieldList(()=>[{no:1,name:"client_key",kind:"scalar",T:9},{no:2,name:"metadata",kind:"map",K:9,V:{kind:"scalar",T:9}}]));let Cc=Wn;const Hn=class Hn extends P{constructor(t){super();u(this,"clientId","");f.util.initPartial(t,this)}static fromBinary(t,r){return new Hn().fromBinary(t,r)}static fromJson(t,r){return new Hn().fromJson(t,r)}static fromJsonString(t,r){return new Hn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Hn,t,r)}};u(Hn,"runtime",f),u(Hn,"typeName","yorkie.v1.ActivateClientResponse"),u(Hn,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9}]));let Dc=Hn;const _n=class _n extends P{constructor(t){super();u(this,"clientId","");f.util.initPartial(t,this)}static fromBinary(t,r){return new _n().fromBinary(t,r)}static fromJson(t,r){return new _n().fromJson(t,r)}static fromJsonString(t,r){return new _n().fromJsonString(t,r)}static equals(t,r){return f.util.equals(_n,t,r)}};u(_n,"runtime",f),u(_n,"typeName","yorkie.v1.DeactivateClientRequest"),u(_n,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9}]));let Oc=_n;const Gn=class Gn extends P{constructor(e){super(),f.util.initPartial(e,this)}static fromBinary(e,t){return new Gn().fromBinary(e,t)}static fromJson(e,t){return new Gn().fromJson(e,t)}static fromJsonString(e,t){return new Gn().fromJsonString(e,t)}static equals(e,t){return f.util.equals(Gn,e,t)}};u(Gn,"runtime",f),u(Gn,"typeName","yorkie.v1.DeactivateClientResponse"),u(Gn,"fields",f.util.newFieldList(()=>[]));let Rc=Gn;const Yn=class Yn extends P{constructor(t){super();u(this,"clientId","");u(this,"changePack");f.util.initPartial(t,this)}static fromBinary(t,r){return new Yn().fromBinary(t,r)}static fromJson(t,r){return new Yn().fromJson(t,r)}static fromJsonString(t,r){return new Yn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Yn,t,r)}};u(Yn,"runtime",f),u(Yn,"typeName","yorkie.v1.AttachDocumentRequest"),u(Yn,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"change_pack",kind:"message",T:xr}]));let Lc=Yn;const Qn=class Qn extends P{constructor(t){super();u(this,"documentId","");u(this,"changePack");f.util.initPartial(t,this)}static fromBinary(t,r){return new Qn().fromBinary(t,r)}static fromJson(t,r){return new Qn().fromJson(t,r)}static fromJsonString(t,r){return new Qn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Qn,t,r)}};u(Qn,"runtime",f),u(Qn,"typeName","yorkie.v1.AttachDocumentResponse"),u(Qn,"fields",f.util.newFieldList(()=>[{no:1,name:"document_id",kind:"scalar",T:9},{no:2,name:"change_pack",kind:"message",T:xr}]));let Bc=Qn;const Xn=class Xn extends P{constructor(t){super();u(this,"clientId","");u(this,"documentId","");u(this,"changePack");u(this,"removeIfNotAttached",!1);f.util.initPartial(t,this)}static fromBinary(t,r){return new Xn().fromBinary(t,r)}static fromJson(t,r){return new Xn().fromJson(t,r)}static fromJsonString(t,r){return new Xn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Xn,t,r)}};u(Xn,"runtime",f),u(Xn,"typeName","yorkie.v1.DetachDocumentRequest"),u(Xn,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:xr},{no:4,name:"remove_if_not_attached",kind:"scalar",T:8}]));let bc=Xn;const Zn=class Zn extends P{constructor(t){super();u(this,"changePack");f.util.initPartial(t,this)}static fromBinary(t,r){return new Zn().fromBinary(t,r)}static fromJson(t,r){return new Zn().fromJson(t,r)}static fromJsonString(t,r){return new Zn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Zn,t,r)}};u(Zn,"runtime",f),u(Zn,"typeName","yorkie.v1.DetachDocumentResponse"),u(Zn,"fields",f.util.newFieldList(()=>[{no:2,name:"change_pack",kind:"message",T:xr}]));let zc=Zn;const er=class er extends P{constructor(t){super();u(this,"clientId","");u(this,"documentId","");f.util.initPartial(t,this)}static fromBinary(t,r){return new er().fromBinary(t,r)}static fromJson(t,r){return new er().fromJson(t,r)}static fromJsonString(t,r){return new er().fromJsonString(t,r)}static equals(t,r){return f.util.equals(er,t,r)}};u(er,"runtime",f),u(er,"typeName","yorkie.v1.WatchDocumentRequest"),u(er,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9}]));let Fc=er;const tr=class tr extends P{constructor(t){super();u(this,"body",{case:void 0});f.util.initPartial(t,this)}static fromBinary(t,r){return new tr().fromBinary(t,r)}static fromJson(t,r){return new tr().fromJson(t,r)}static fromJsonString(t,r){return new tr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(tr,t,r)}};u(tr,"runtime",f),u(tr,"typeName","yorkie.v1.WatchDocumentResponse"),u(tr,"fields",f.util.newFieldList(()=>[{no:1,name:"initialization",kind:"message",T:Jc,oneof:"body"},{no:2,name:"event",kind:"message",T:Pc,oneof:"body"}]));let Mc=tr;const nr=class nr extends P{constructor(t){super();u(this,"clientIds",[]);f.util.initPartial(t,this)}static fromBinary(t,r){return new nr().fromBinary(t,r)}static fromJson(t,r){return new nr().fromJson(t,r)}static fromJsonString(t,r){return new nr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(nr,t,r)}};u(nr,"runtime",f),u(nr,"typeName","yorkie.v1.WatchDocumentResponse.Initialization"),u(nr,"fields",f.util.newFieldList(()=>[{no:1,name:"client_ids",kind:"scalar",T:9,repeated:!0}]));let Jc=nr;const rr=class rr extends P{constructor(t){super();u(this,"clientId","");u(this,"documentId","");u(this,"changePack");f.util.initPartial(t,this)}static fromBinary(t,r){return new rr().fromBinary(t,r)}static fromJson(t,r){return new rr().fromJson(t,r)}static fromJsonString(t,r){return new rr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(rr,t,r)}};u(rr,"runtime",f),u(rr,"typeName","yorkie.v1.RemoveDocumentRequest"),u(rr,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:xr}]));let $c=rr;const ir=class ir extends P{constructor(t){super();u(this,"changePack");f.util.initPartial(t,this)}static fromBinary(t,r){return new ir().fromBinary(t,r)}static fromJson(t,r){return new ir().fromJson(t,r)}static fromJsonString(t,r){return new ir().fromJsonString(t,r)}static equals(t,r){return f.util.equals(ir,t,r)}};u(ir,"runtime",f),u(ir,"typeName","yorkie.v1.RemoveDocumentResponse"),u(ir,"fields",f.util.newFieldList(()=>[{no:1,name:"change_pack",kind:"message",T:xr}]));let Uc=ir;const sr=class sr extends P{constructor(t){super();u(this,"clientId","");u(this,"documentId","");u(this,"changePack");u(this,"pushOnly",!1);f.util.initPartial(t,this)}static fromBinary(t,r){return new sr().fromBinary(t,r)}static fromJson(t,r){return new sr().fromJson(t,r)}static fromJsonString(t,r){return new sr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(sr,t,r)}};u(sr,"runtime",f),u(sr,"typeName","yorkie.v1.PushPullChangesRequest"),u(sr,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:xr},{no:4,name:"push_only",kind:"scalar",T:8}]));let jc=sr;const or=class or extends P{constructor(t){super();u(this,"changePack");f.util.initPartial(t,this)}static fromBinary(t,r){return new or().fromBinary(t,r)}static fromJson(t,r){return new or().fromJson(t,r)}static fromJsonString(t,r){return new or().fromJsonString(t,r)}static equals(t,r){return f.util.equals(or,t,r)}};u(or,"runtime",f),u(or,"typeName","yorkie.v1.PushPullChangesResponse"),u(or,"fields",f.util.newFieldList(()=>[{no:1,name:"change_pack",kind:"message",T:xr}]));let Vc=or;const ar=class ar extends P{constructor(t){super();u(this,"clientId","");u(this,"documentId","");u(this,"topic","");u(this,"payload",new Uint8Array(0));f.util.initPartial(t,this)}static fromBinary(t,r){return new ar().fromBinary(t,r)}static fromJson(t,r){return new ar().fromJson(t,r)}static fromJsonString(t,r){return new ar().fromJsonString(t,r)}static equals(t,r){return f.util.equals(ar,t,r)}};u(ar,"runtime",f),u(ar,"typeName","yorkie.v1.BroadcastRequest"),u(ar,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"topic",kind:"scalar",T:9},{no:4,name:"payload",kind:"scalar",T:12}]));let qc=ar;const lr=class lr extends P{constructor(e){super(),f.util.initPartial(e,this)}static fromBinary(e,t){return new lr().fromBinary(e,t)}static fromJson(e,t){return new lr().fromJson(e,t)}static fromJsonString(e,t){return new lr().fromJsonString(e,t)}static equals(e,t){return f.util.equals(lr,e,t)}};u(lr,"runtime",f),u(lr,"typeName","yorkie.v1.BroadcastResponse"),u(lr,"fields",f.util.newFieldList(()=>[]));let Kc=lr;const BS={typeName:"yorkie.v1.YorkieService",methods:{activateClient:{name:"ActivateClient",I:Cc,O:Dc,kind:be.Unary},deactivateClient:{name:"DeactivateClient",I:Oc,O:Rc,kind:be.Unary},attachDocument:{name:"AttachDocument",I:Lc,O:Bc,kind:be.Unary},detachDocument:{name:"DetachDocument",I:bc,O:zc,kind:be.Unary},removeDocument:{name:"RemoveDocument",I:$c,O:Uc,kind:be.Unary},pushPullChanges:{name:"PushPullChanges",I:jc,O:Vc,kind:be.Unary},watchDocument:{name:"WatchDocument",I:Fc,O:Mc,kind:be.ServerStreaming},broadcast:{name:"Broadcast",I:qc,O:Kc,kind:be.Unary}}},bS=f.makeMessageType("google.rpc.ErrorInfo",()=>[{no:1,name:"reason",kind:"scalar",T:9},{no:2,name:"domain",kind:"scalar",T:9},{no:3,name:"metadata",kind:"map",K:9,V:{kind:"scalar",T:9}}]);f.makeMessageType("google.rpc.RetryInfo",()=>[{no:1,name:"retry_delay",kind:"message",T:hr}]);f.makeMessageType("google.rpc.DebugInfo",()=>[{no:1,name:"stack_entries",kind:"scalar",T:9,repeated:!0},{no:2,name:"detail",kind:"scalar",T:9}]);f.makeMessageType("google.rpc.QuotaFailure",()=>[{no:1,name:"violations",kind:"message",T:zS,repeated:!0}]);const zS=f.makeMessageType("google.rpc.QuotaFailure.Violation",()=>[{no:1,name:"subject",kind:"scalar",T:9},{no:2,name:"description",kind:"scalar",T:9}],{localName:"QuotaFailure_Violation"});f.makeMessageType("google.rpc.PreconditionFailure",()=>[{no:1,name:"violations",kind:"message",T:FS,repeated:!0}]);const FS=f.makeMessageType("google.rpc.PreconditionFailure.Violation",()=>[{no:1,name:"type",kind:"scalar",T:9},{no:2,name:"subject",kind:"scalar",T:9},{no:3,name:"description",kind:"scalar",T:9}],{localName:"PreconditionFailure_Violation"});f.makeMessageType("google.rpc.BadRequest",()=>[{no:1,name:"field_violations",kind:"message",T:MS,repeated:!0}]);const MS=f.makeMessageType("google.rpc.BadRequest.FieldViolation",()=>[{no:1,name:"field",kind:"scalar",T:9},{no:2,name:"description",kind:"scalar",T:9},{no:3,name:"reason",kind:"scalar",T:9},{no:4,name:"localized_message",kind:"message",T:$S}],{localName:"BadRequest_FieldViolation"});f.makeMessageType("google.rpc.RequestInfo",()=>[{no:1,name:"request_id",kind:"scalar",T:9},{no:2,name:"serving_data",kind:"scalar",T:9}]);f.makeMessageType("google.rpc.ResourceInfo",()=>[{no:1,name:"resource_type",kind:"scalar",T:9},{no:2,name:"resource_name",kind:"scalar",T:9},{no:3,name:"owner",kind:"scalar",T:9},{no:4,name:"description",kind:"scalar",T:9}]);f.makeMessageType("google.rpc.Help",()=>[{no:1,name:"links",kind:"message",T:JS,repeated:!0}]);const JS=f.makeMessageType("google.rpc.Help.Link",()=>[{no:1,name:"description",kind:"scalar",T:9},{no:2,name:"url",kind:"scalar",T:9}],{localName:"Help_Link"}),$S=f.makeMessageType("google.rpc.LocalizedMessage",()=>[{no:1,name:"locale",kind:"scalar",T:9},{no:2,name:"message",kind:"scalar",T:9}]);var w=(n=>(n.Ok="ok",n.ErrClientNotActivated="ErrClientNotActivated",n.ErrClientNotFound="ErrClientNotFound",n.ErrUnimplemented="ErrUnimplemented",n.ErrInvalidType="ErrInvalidType",n.ErrDummy="ErrDummy",n.ErrDocumentNotAttached="ErrDocumentNotAttached",n.ErrDocumentNotDetached="ErrDocumentNotDetached",n.ErrDocumentRemoved="ErrDocumentRemoved",n.ErrInvalidObjectKey="ErrInvalidObjectKey",n.ErrInvalidArgument="ErrInvalidArgument",n.ErrNotInitialized="ErrNotInitialized",n.ErrNotReady="ErrNotReady",n.ErrRefused="ErrRefused",n.ErrContextNotProvided="ErrContextNotProvided",n.ErrPermissionDenied="ErrPermissionDenied",n.ErrUnauthenticated="ErrUnauthenticated",n.ErrTooManySubscribers="ErrTooManySubscribers",n.ErrTooManyAttachments="ErrTooManyAttachments",n))(w||{});class S extends Error{constructor(t,r){super(r);u(this,"name","YorkieError");u(this,"stack");this.code=t,this.message=r,this.toString=()=>`[code=${this.code}]: ${this.message}`}}var an=(n=>(n.Put="put",n.Clear="clear",n))(an||{});const Ul="000000000000000000000000",_r=24;class kt{constructor(e,t,r){u(this,"lamport");u(this,"delimiter");u(this,"actorID");this.lamport=e,this.delimiter=t,this.actorID=r}static of(e,t,r){return new kt(e,t,r)}static fromStruct(e){return kt.of(BigInt(e.lamport),e.delimiter,e.actorID)}toIDString(){return`${this.lamport.toString()}:${this.actorID}:${this.delimiter}`}toStruct(){return{lamport:this.getLamportAsString(),delimiter:this.getDelimiter(),actorID:this.getActorID()}}toTestString(){return`${this.lamport.toString()}:${this.actorID.slice(-2)}:${this.delimiter}`}setActor(e){return new kt(this.lamport,this.delimiter,e)}getLamportAsString(){return this.lamport.toString()}getLamport(){return this.lamport}getDelimiter(){return this.delimiter}getActorID(){return this.actorID}after(e){return this.compare(e)>0}equals(e){return this.compare(e)===0}compare(e){if(this.lamport>e.lamport)return 1;if(e.lamport>this.lamport)return-1;const t=this.actorID.localeCompare(e.actorID);return t!==0?t:this.delimiter>e.delimiter?1:e.delimiter>this.delimiter?-1:0}}const Wc=0n,iy=0,Xs=9223372036854775807n,ms=new kt(Wc,iy,Ul);function tn(n){return n.replace(/["'\\\n\r\f\b\t\u2028\u2029]/g,function(e){switch(e){case'"':case"\\":return"\\"+e;case`
`:return"\\n";case"\r":return"\\r";case"\f":return"\\f";case"\b":return"\\b";case"	":return"\\t";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:return e}})}class Bo{constructor(e){u(this,"createdAt");u(this,"movedAt");u(this,"removedAt");this.createdAt=e}getCreatedAt(){return this.createdAt}getID(){return this.createdAt}getMovedAt(){return this.movedAt}getRemovedAt(){return this.removedAt}getPositionedAt(){return this.movedAt?this.movedAt:this.createdAt}setMovedAt(e){return!this.movedAt||e&&e.after(this.movedAt)?(this.movedAt=e,!0):!1}setRemovedAt(e){this.removedAt=e}remove(e){return e&&e.after(this.getPositionedAt())&&(!this.removedAt||e.after(this.removedAt))?(this.removedAt=e,!0):!1}isRemoved(){return!!this.removedAt}getMetaUsage(){let e=0;return this.getCreatedAt()&&(e+=_r),this.getMovedAt()&&(e+=_r),this.getRemovedAt()&&(e+=_r),e}}class Gr extends Bo{constructor(e){super(e)}}class Qf{constructor(e,t){u(this,"strKey");u(this,"value");this.strKey=e,this.value=t}static of(e,t){return new Qf(e,t)}isRemoved(){return this.value.isRemoved()}getStrKey(){return this.strKey}getValue(){return this.value}remove(e){return this.value.remove(e)}}class Io{constructor(){u(this,"nodeMapByKey");u(this,"nodeMapByCreatedAt");this.nodeMapByKey=new Map,this.nodeMapByCreatedAt=new Map}static create(){return new Io}set(e,t,r){let i;const s=this.nodeMapByKey.get(e);s!=null&&!s.isRemoved()&&s.remove(r)&&(i=s.getValue());const o=Qf.of(e,t);return this.nodeMapByCreatedAt.set(t.getCreatedAt().toIDString(),o),(s==null||r.after(s.getValue().getPositionedAt()))&&(this.nodeMapByKey.set(e,o),t.setMovedAt(r)),i}delete(e,t){if(!this.nodeMapByCreatedAt.has(e.toIDString()))throw new S(w.ErrInvalidArgument,`fail to find ${e.toIDString()}`);const r=this.nodeMapByCreatedAt.get(e.toIDString());return r.remove(t),r.getValue()}subPathOf(e){const t=this.nodeMapByCreatedAt.get(e.toIDString());if(t)return t.getStrKey()}purge(e){const t=this.nodeMapByCreatedAt.get(e.getCreatedAt().toIDString());if(!t)throw new S(w.ErrInvalidArgument,`fail to find ${e.getCreatedAt().toIDString()}`);const r=this.nodeMapByKey.get(t.getStrKey());t===r&&this.nodeMapByKey.delete(r.getStrKey()),this.nodeMapByCreatedAt.delete(t.getValue().getCreatedAt().toIDString())}deleteByKey(e,t){const r=this.nodeMapByKey.get(e);if(r!=null&&r.remove(t))return r.getValue()}has(e){const t=this.nodeMapByKey.get(e);return t==null?!1:!t.isRemoved()}getByID(e){return this.nodeMapByCreatedAt.get(e.toIDString())}get(e){const t=this.nodeMapByKey.get(e);if(!(!t||t.isRemoved()))return t}*[Symbol.iterator](){for(const[,e]of this.nodeMapByKey)yield e}}class He extends Gr{constructor(t,r){super(t);u(this,"memberNodes");this.memberNodes=r}static create(t,r){if(!r)return new He(t,Io.create());const i=Io.create();for(const[s,o]of Object.entries(r))i.set(s,o.deepcopy(),o.getCreatedAt());return new He(t,i)}subPathOf(t){return this.memberNodes.subPathOf(t)}purge(t){this.memberNodes.purge(t)}set(t,r,i){return this.memberNodes.set(t,r,i)}delete(t,r){return this.memberNodes.delete(t,r)}deleteByKey(t,r){return this.memberNodes.deleteByKey(t,r)}get(t){const r=this.memberNodes.get(t);return r==null?void 0:r.getValue()}getByID(t){const r=this.memberNodes.getByID(t);return r==null?void 0:r.getValue()}has(t){return this.memberNodes.has(t)}getDataSize(){return{data:0,meta:this.getMetaUsage()}}toJSON(){const t=[];for(const[r,i]of this)t.push(`"${tn(r)}":${i.toJSON()}`);return`{${t.join(",")}}`}toJS(){return JSON.parse(this.toJSON())}toJSForTest(){const t={};for(const[r,i]of this){const{createdAt:s,value:o,type:a}=i.toJSForTest();t[r]={key:r,createdAt:s,value:o,type:a}}return{createdAt:this.getCreatedAt().toTestString(),value:t,type:"YORKIE_OBJECT"}}getKeys(){const t=Array();for(const[r]of this)t.push(r);return t}toSortedJSON(){var i;const t=Array();for(const[s]of this)t.push(s);const r=[];for(const s of t.sort()){const o=(i=this.memberNodes.get(s))==null?void 0:i.getValue();r.push(`"${tn(s)}":${o.toSortedJSON()}`)}return`{${r.join(",")}}`}getRHT(){return this.memberNodes}deepcopy(){const t=He.create(this.getCreatedAt());for(const r of this.memberNodes)t.memberNodes.set(r.getStrKey(),r.getValue().deepcopy(),this.getPositionedAt());return t.remove(this.getRemovedAt()),t}getDescendants(t){for(const r of this.memberNodes){const i=r.getValue();if(t(i,this))return;i instanceof Gr&&i.getDescendants(t)}}*[Symbol.iterator](){const t=new Set;for(const r of this.memberNodes)t.has(r.getStrKey())||(t.add(r.getStrKey()),r.isRemoved()||(yield[r.getStrKey(),r.getValue()]))}}var Y=(n=>(n.Local="local",n.Remote="remote",n.UndoRedo="undoredo",n))(Y||{});class $t{constructor(e,t){u(this,"parentCreatedAt");u(this,"executedAt");this.parentCreatedAt=e,this.executedAt=t}getParentCreatedAt(){return this.parentCreatedAt}getExecutedAt(){if(!this.executedAt)throw new S(w.ErrNotReady,"executedAt is not set yet");return this.executedAt}setActor(e){this.executedAt&&(this.executedAt=this.executedAt.setActor(e))}setExecutedAt(e){this.executedAt=e}}class sy{constructor(e){u(this,"value");u(this,"left");u(this,"right");u(this,"parent");u(this,"weight");this.value=e,this.initWeight()}getNodeString(){return`${this.weight}${this.value}`}getValue(){return this.value}getLeftWeight(){return this.hasLeft()?this.left.getWeight():0}getRightWeight(){return this.hasRight()?this.right.getWeight():0}getWeight(){return this.weight}getLeft(){return this.left}getRight(){return this.right}getParent(){return this.parent}hasLeft(){return!!this.left}hasRight(){return!!this.right}hasParent(){return!!this.parent}setLeft(e){this.left=e}setRight(e){this.right=e}setParent(e){this.parent=e}unlink(){this.parent=void 0,this.right=void 0,this.left=void 0}hasLinks(){return this.hasParent()||this.hasLeft()||this.hasRight()}increaseWeight(e){this.weight+=e}initWeight(){this.weight=this.getLength()}}class Ao{constructor(e){u(this,"root");this.root=e}get length(){return this.root?this.root.getWeight():0}find(e){if(!this.root||e<0)return[void 0,0];let t=this.root;for(;;)if(t.hasLeft()&&e<=t.getLeftWeight())t=t.getLeft();else if(t.hasRight()&&t.getLeftWeight()+t.getLength()<e)e-=t.getLeftWeight()+t.getLength(),t=t.getRight();else{e-=t.getLeftWeight();break}if(e>t.getLength())throw new S(w.ErrInvalidArgument,`out of index range: pos: ${e} > node.length: ${t.getLength()}`);return this.splayNode(t),[t,e]}indexOf(e){return!e||e!==this.root&&!e.hasLinks()?-1:(this.splayNode(e),this.root.getLeftWeight())}getRoot(){return this.root}insert(e){return this.insertAfter(this.root,e)}insertAfter(e,t){return e?(this.splayNode(e),this.root=t,t.setRight(e.getRight()),e.hasRight()&&e.getRight().setParent(t),t.setLeft(e),e.setParent(t),e.setRight(),this.updateWeight(e),this.updateWeight(t),t):(this.root=t,t)}updateWeight(e){e.initWeight(),e.hasLeft()&&e.increaseWeight(e.getLeftWeight()),e.hasRight()&&e.increaseWeight(e.getRightWeight())}updateTreeWeight(e){for(;e;)this.updateWeight(e),e=e.getParent()}splayNode(e){if(e)for(;;)if(this.isLeftChild(e.getParent())&&this.isRightChild(e))this.rotateLeft(e),this.rotateRight(e);else if(this.isRightChild(e.getParent())&&this.isLeftChild(e))this.rotateRight(e),this.rotateLeft(e);else if(this.isLeftChild(e.getParent())&&this.isLeftChild(e))this.rotateRight(e.getParent()),this.rotateRight(e);else if(this.isRightChild(e.getParent())&&this.isRightChild(e))this.rotateLeft(e.getParent()),this.rotateLeft(e);else{this.isLeftChild(e)?this.rotateRight(e):this.isRightChild(e)&&this.rotateLeft(e),this.updateWeight(e);return}}delete(e){this.splayNode(e);const t=new Ao(e.getLeft());t.root&&t.root.setParent();const r=new Ao(e.getRight());if(r.root&&r.root.setParent(),t.root){const i=t.getRightmost();t.splayNode(i),t.root.setRight(r.root),r.root&&r.root.setParent(t.root),this.root=t.root}else this.root=r.root;e.unlink(),this.root&&this.updateWeight(this.root)}deleteRange(e,t){if(!t){this.splayNode(e),this.cutOffRight(e);return}this.splayNode(e),this.splayNode(t),t.getLeft()!=e&&this.rotateRight(e),this.cutOffRight(e)}cutOffRight(e){const t=[];this.traversePostorder(e.getRight(),t);for(const r of t)r.initWeight();this.updateTreeWeight(e)}toTestString(){const e=[];return this.traverseInorder(this.root,e),e.map(t=>`[${t.getWeight()},${t.getLength()}]${t.getValue()||""}`).join("")}checkWeight(){const e=[];this.traverseInorder(this.root,e);for(const t of e)if(t.getWeight()!=t.getLength()+t.getLeftWeight()+t.getRightWeight())return!1;return!0}getRightmost(){let e=this.root;for(;e.hasRight();)e=e.getRight();return e}traverseInorder(e,t){e&&(this.traverseInorder(e.getLeft(),t),t.push(e),this.traverseInorder(e.getRight(),t))}traversePostorder(e,t){e&&(this.traversePostorder(e.getLeft(),t),this.traversePostorder(e.getRight(),t),t.push(e))}rotateLeft(e){const t=e.getParent();t.hasParent()?t===t.getParent().getLeft()?t.getParent().setLeft(e):t.getParent().setRight(e):this.root=e,e.setParent(t.getParent()),t.setRight(e.getLeft()),t.hasRight()&&t.getRight().setParent(t),e.setLeft(t),e.getLeft().setParent(e),this.updateWeight(t),this.updateWeight(e)}rotateRight(e){const t=e.getParent();t.hasParent()?t===t.getParent().getLeft()?t.getParent().setLeft(e):t.getParent().setRight(e):this.root=e,e.setParent(t.getParent()),t.setLeft(e.getRight()),t.hasLeft()&&t.getLeft().setParent(t),e.setRight(t),e.getRight().setParent(e),this.updateWeight(t),this.updateWeight(e)}isLeftChild(e){return e&&e.hasParent()?e.getParent().getLeft()===e:!1}isRightChild(e){return e&&e.hasParent()?e.getParent().getRight()===e:!1}}/**
 * @license
 * Copyright 2009 The Closure Library Authors
 * Copyright 2020 Daniel Wirtz / The long.js Authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * SPDX-License-Identifier: Apache-2.0
 */var wt=null;try{wt=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function q(n,e,t){this.low=n|0,this.high=e|0,this.unsigned=!!t}q.prototype.__isLong__;Object.defineProperty(q.prototype,"__isLong__",{value:!0});function Le(n){return(n&&n.__isLong__)===!0}function ig(n){var e=Math.clz32(n&-n);return n?31-e:e}q.isLong=Le;var sg={},og={};function Oi(n,e){var t,r,i;return e?(n>>>=0,(i=0<=n&&n<256)&&(r=og[n],r)?r:(t=H(n,0,!0),i&&(og[n]=t),t)):(n|=0,(i=-128<=n&&n<128)&&(r=sg[n],r)?r:(t=H(n,n<0?-1:0,!1),i&&(sg[n]=t),t))}q.fromInt=Oi;function St(n,e){if(isNaN(n))return e?mr:Bt;if(e){if(n<0)return mr;if(n>=oy)return uy}else{if(n<=-9223372036854776e3)return Ve;if(n+1>=jS)return ly}return n<0?St(-n,e).neg():H(n%ps|0,n/ps|0,e)}q.fromNumber=St;function H(n,e,t){return new q(n,e,t)}q.fromBits=H;var vl=Math.pow;function Xf(n,e,t){if(n.length===0)throw Error("empty string");if(typeof e=="number"?(t=e,e=!1):e=!!e,n==="NaN"||n==="Infinity"||n==="+Infinity"||n==="-Infinity")return e?mr:Bt;if(t=t||10,t<2||36<t)throw RangeError("radix");var r;if((r=n.indexOf("-"))>0)throw Error("interior hyphen");if(r===0)return Xf(n.substring(1),e,t).neg();for(var i=St(vl(t,8)),s=Bt,o=0;o<n.length;o+=8){var a=Math.min(8,n.length-o),l=parseInt(n.substring(o,o+a),t);if(a<8){var c=St(vl(t,a));s=s.mul(c).add(St(l))}else s=s.mul(i),s=s.add(St(l))}return s.unsigned=e,s}q.fromString=Xf;function Nt(n,e){return typeof n=="number"?St(n,e):typeof n=="string"?Xf(n,e):H(n.low,n.high,typeof e=="boolean"?e:n.unsigned)}q.fromValue=Nt;var ag=65536,US=1<<24,ps=ag*ag,oy=ps*ps,jS=oy/2,lg=Oi(US),Bt=Oi(0);q.ZERO=Bt;var mr=Oi(0,!0);q.UZERO=mr;var _i=Oi(1);q.ONE=_i;var ay=Oi(1,!0);q.UONE=ay;var Hc=Oi(-1);q.NEG_ONE=Hc;var ly=H(-1,2147483647,!1);q.MAX_VALUE=ly;var uy=H(-1,-1,!0);q.MAX_UNSIGNED_VALUE=uy;var Ve=H(0,-2147483648,!1);q.MIN_VALUE=Ve;var E=q.prototype;E.toInt=function(){return this.unsigned?this.low>>>0:this.low};E.toNumber=function(){return this.unsigned?(this.high>>>0)*ps+(this.low>>>0):this.high*ps+(this.low>>>0)};E.toString=function(e){if(e=e||10,e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(Ve)){var t=St(e),r=this.div(t),i=r.mul(t).sub(this);return r.toString(e)+i.toInt().toString(e)}else return"-"+this.neg().toString(e);for(var s=St(vl(e,6),this.unsigned),o=this,a="";;){var l=o.div(s),c=o.sub(l.mul(s)).toInt()>>>0,d=c.toString(e);if(o=l,o.isZero())return d+a;for(;d.length<6;)d="0"+d;a=""+d+a}};E.getHighBits=function(){return this.high};E.getHighBitsUnsigned=function(){return this.high>>>0};E.getLowBits=function(){return this.low};E.getLowBitsUnsigned=function(){return this.low>>>0};E.getNumBitsAbs=function(){if(this.isNegative())return this.eq(Ve)?64:this.neg().getNumBitsAbs();for(var e=this.high!=0?this.high:this.low,t=31;t>0&&!(e&1<<t);t--);return this.high!=0?t+33:t+1};E.isSafeInteger=function(){var e=this.high>>21;return e?this.unsigned?!1:e===-1&&!(this.low===0&&this.high===-2097152):!0};E.isZero=function(){return this.high===0&&this.low===0};E.eqz=E.isZero;E.isNegative=function(){return!this.unsigned&&this.high<0};E.isPositive=function(){return this.unsigned||this.high>=0};E.isOdd=function(){return(this.low&1)===1};E.isEven=function(){return(this.low&1)===0};E.equals=function(e){return Le(e)||(e=Nt(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low};E.eq=E.equals;E.notEquals=function(e){return!this.eq(e)};E.neq=E.notEquals;E.ne=E.notEquals;E.lessThan=function(e){return this.comp(e)<0};E.lt=E.lessThan;E.lessThanOrEqual=function(e){return this.comp(e)<=0};E.lte=E.lessThanOrEqual;E.le=E.lessThanOrEqual;E.greaterThan=function(e){return this.comp(e)>0};E.gt=E.greaterThan;E.greaterThanOrEqual=function(e){return this.comp(e)>=0};E.gte=E.greaterThanOrEqual;E.ge=E.greaterThanOrEqual;E.compare=function(e){if(Le(e)||(e=Nt(e)),this.eq(e))return 0;var t=this.isNegative(),r=e.isNegative();return t&&!r?-1:!t&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1};E.comp=E.compare;E.negate=function(){return!this.unsigned&&this.eq(Ve)?Ve:this.not().add(_i)};E.neg=E.negate;E.add=function(e){Le(e)||(e=Nt(e));var t=this.high>>>16,r=this.high&65535,i=this.low>>>16,s=this.low&65535,o=e.high>>>16,a=e.high&65535,l=e.low>>>16,c=e.low&65535,d=0,h=0,g=0,p=0;return p+=s+c,g+=p>>>16,p&=65535,g+=i+l,h+=g>>>16,g&=65535,h+=r+a,d+=h>>>16,h&=65535,d+=t+o,d&=65535,H(g<<16|p,d<<16|h,this.unsigned)};E.subtract=function(e){return Le(e)||(e=Nt(e)),this.add(e.neg())};E.sub=E.subtract;E.multiply=function(e){if(this.isZero())return this;if(Le(e)||(e=Nt(e)),wt){var t=wt.mul(this.low,this.high,e.low,e.high);return H(t,wt.get_high(),this.unsigned)}if(e.isZero())return this.unsigned?mr:Bt;if(this.eq(Ve))return e.isOdd()?Ve:Bt;if(e.eq(Ve))return this.isOdd()?Ve:Bt;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(lg)&&e.lt(lg))return St(this.toNumber()*e.toNumber(),this.unsigned);var r=this.high>>>16,i=this.high&65535,s=this.low>>>16,o=this.low&65535,a=e.high>>>16,l=e.high&65535,c=e.low>>>16,d=e.low&65535,h=0,g=0,p=0,T=0;return T+=o*d,p+=T>>>16,T&=65535,p+=s*d,g+=p>>>16,p&=65535,p+=o*c,g+=p>>>16,p&=65535,g+=i*d,h+=g>>>16,g&=65535,g+=s*c,h+=g>>>16,g&=65535,g+=o*l,h+=g>>>16,g&=65535,h+=r*d+i*c+s*l+o*a,h&=65535,H(p<<16|T,h<<16|g,this.unsigned)};E.mul=E.multiply;E.divide=function(e){if(Le(e)||(e=Nt(e)),e.isZero())throw Error("division by zero");if(wt){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;var t=(this.unsigned?wt.div_u:wt.div_s)(this.low,this.high,e.low,e.high);return H(t,wt.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?mr:Bt;var r,i,s;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return mr;if(e.gt(this.shru(1)))return ay;s=mr}else{if(this.eq(Ve)){if(e.eq(_i)||e.eq(Hc))return Ve;if(e.eq(Ve))return _i;var o=this.shr(1);return r=o.div(e).shl(1),r.eq(Bt)?e.isNegative()?_i:Hc:(i=this.sub(e.mul(r)),s=r.add(i.div(e)),s)}else if(e.eq(Ve))return this.unsigned?mr:Bt;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();s=Bt}for(i=this;i.gte(e);){r=Math.max(1,Math.floor(i.toNumber()/e.toNumber()));for(var a=Math.ceil(Math.log(r)/Math.LN2),l=a<=48?1:vl(2,a-48),c=St(r),d=c.mul(e);d.isNegative()||d.gt(i);)r-=l,c=St(r,this.unsigned),d=c.mul(e);c.isZero()&&(c=_i),s=s.add(c),i=i.sub(d)}return s};E.div=E.divide;E.modulo=function(e){if(Le(e)||(e=Nt(e)),wt){var t=(this.unsigned?wt.rem_u:wt.rem_s)(this.low,this.high,e.low,e.high);return H(t,wt.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))};E.mod=E.modulo;E.rem=E.modulo;E.not=function(){return H(~this.low,~this.high,this.unsigned)};E.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32};E.clz=E.countLeadingZeros;E.countTrailingZeros=function(){return this.low?ig(this.low):ig(this.high)+32};E.ctz=E.countTrailingZeros;E.and=function(e){return Le(e)||(e=Nt(e)),H(this.low&e.low,this.high&e.high,this.unsigned)};E.or=function(e){return Le(e)||(e=Nt(e)),H(this.low|e.low,this.high|e.high,this.unsigned)};E.xor=function(e){return Le(e)||(e=Nt(e)),H(this.low^e.low,this.high^e.high,this.unsigned)};E.shiftLeft=function(e){return Le(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?H(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):H(0,this.low<<e-32,this.unsigned)};E.shl=E.shiftLeft;E.shiftRight=function(e){return Le(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?H(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):H(this.high>>e-32,this.high>=0?0:-1,this.unsigned)};E.shr=E.shiftRight;E.shiftRightUnsigned=function(e){return Le(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?H(this.low>>>e|this.high<<32-e,this.high>>>e,this.unsigned):e===32?H(this.high,0,this.unsigned):H(this.high>>>e-32,0,this.unsigned)};E.shru=E.shiftRightUnsigned;E.shr_u=E.shiftRightUnsigned;E.rotateLeft=function(e){var t;return Le(e)&&(e=e.toInt()),(e&=63)===0?this:e===32?H(this.high,this.low,this.unsigned):e<32?(t=32-e,H(this.low<<e|this.high>>>t,this.high<<e|this.low>>>t,this.unsigned)):(e-=32,t=32-e,H(this.high<<e|this.low>>>t,this.low<<e|this.high>>>t,this.unsigned))};E.rotl=E.rotateLeft;E.rotateRight=function(e){var t;return Le(e)&&(e=e.toInt()),(e&=63)===0?this:e===32?H(this.high,this.low,this.unsigned):e<32?(t=32-e,H(this.high<<t|this.low>>>e,this.low<<t|this.high>>>e,this.unsigned)):(e-=32,t=32-e,H(this.low<<t|this.high>>>e,this.high<<t|this.low>>>e,this.unsigned))};E.rotr=E.rotateRight;E.toSigned=function(){return this.unsigned?H(this.low,this.high,!1):this};E.toUnsigned=function(){return this.unsigned?this:H(this.low,this.high,!0)};E.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()};E.toBytesLE=function(){var e=this.high,t=this.low;return[t&255,t>>>8&255,t>>>16&255,t>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]};E.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,t>>>24,t>>>16&255,t>>>8&255,t&255]};q.fromBytes=function(e,t,r){return r?q.fromBytesLE(e,t):q.fromBytesBE(e,t)};q.fromBytesLE=function(e,t){return new q(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)};q.fromBytesBE=function(e,t){return new q(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)};typeof BigInt=="function"&&(q.fromBigInt=function(e,t){var r=Number(BigInt.asIntN(32,e)),i=Number(BigInt.asIntN(32,e>>BigInt(32)));return H(r,i,t)},q.fromValue=function(e,t){return typeof e=="bigint"?fromBigInt(e,t):Nt(e,t)},E.toBigInt=function(){var e=BigInt(this.low>>>0),t=BigInt(this.unsigned?this.high>>>0:this.high);return t<<BigInt(32)|e});var ve=(n=>(n[n.Null=0]="Null",n[n.Boolean=1]="Boolean",n[n.Integer=2]="Integer",n[n.Long=3]="Long",n[n.Double=4]="Double",n[n.String=5]="String",n[n.Bytes=6]="Bytes",n[n.Date=7]="Date",n))(ve||{});class ce extends Bo{constructor(t,r){super(r);u(this,"valueType");u(this,"value");this.valueType=ce.getPrimitiveType(t),this.value=t===void 0?null:t}static of(t,r){return new ce(t,r)}static valueFromBytes(t,r){switch(t){case 0:return null;case 1:return!!r[0];case 2:return r[0]|r[1]<<8|r[2]<<16|r[3]<<24;case 4:{const i=new DataView(r.buffer);return r.forEach(function(s,o){i.setUint8(o,s)}),i.getFloat64(0,!0)}case 5:return new TextDecoder("utf-8").decode(r);case 3:return q.fromBytesLE(Array.from(r));case 6:return r;case 7:return new Date(q.fromBytesLE(Array.from(r),!0).toNumber());default:throw new S(w.ErrUnimplemented,`unimplemented type: ${t}`)}}getValueSize(){switch(this.valueType){case 0:return 8;case 1:return 4;case 2:return 4;case 3:return 8;case 4:return 8;case 5:return this.value.length*2;case 6:return this.value.length;case 7:return 8;default:throw new S(w.ErrUnimplemented,`unimplemented type: ${this.valueType}`)}}getDataSize(){return{data:this.getValueSize(),meta:this.getMetaUsage()}}toJSON(){return this.valueType===5?`"${tn(this.value)}"`:`${this.value}`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:this.value,type:"YORKIE_PRIMITIVE"}}deepcopy(){const t=ce.of(this.value,this.getCreatedAt());return t.setMovedAt(this.getMovedAt()),t.setRemovedAt(this.getRemovedAt()),t}getType(){return this.valueType}static getPrimitiveType(t){switch(typeof t){case"undefined":return 0;case"boolean":return 1;case"number":return this.isInteger(t)?2:4;case"string":return 5;case"object":if(t===null)return 0;if(t instanceof q)return 3;if(t instanceof Uint8Array)return 6;if(t instanceof Date)return 7}}static isSupport(t){return ce.getPrimitiveType(t)!==void 0}static isInteger(t){return t%1===0}isNumericType(){const t=this.valueType;return t===2||t===3||t===4}getValue(){return this.value}toBytes(){switch(this.valueType){case 0:return new Uint8Array;case 1:return this.value?new Uint8Array([1]):new Uint8Array([0]);case 2:{const t=this.value;return new Uint8Array([t&255,t>>8&255,t>>16&255,t>>24&255])}case 4:{const t=this.value,r=new Uint8Array(8);return new DataView(r.buffer).setFloat64(0,t,!0),r}case 5:return new TextEncoder().encode(this.value);case 3:{const r=this.value.toBytesLE();return Uint8Array.from(r)}case 6:return this.value;case 7:{const t=this.value,r=q.fromNumber(t.getTime(),!0).toBytesLE();return Uint8Array.from(r)}default:throw new S(w.ErrUnimplemented,`unimplemented type: ${this.valueType}`)}}}class wl extends sy{constructor(t){super(t);u(this,"prev");u(this,"next");this.value=t}static createAfter(t,r){const i=new wl(r),s=t.next;return t.next=i,i.prev=t,i.next=s,s&&(s.prev=i),i}remove(t){return this.value.remove(t)}getCreatedAt(){return this.value.getCreatedAt()}getPositionedAt(){return this.value.getPositionedAt()}release(){this.prev&&(this.prev.next=this.next),this.next&&(this.next.prev=this.prev),this.prev=void 0,this.next=void 0}getLength(){return this.value.isRemoved()?0:1}getPrev(){return this.prev}getNext(){return this.next}getValue(){return this.value}isRemoved(){return this.value.isRemoved()}}class Eo{constructor(){u(this,"dummyHead");u(this,"last");u(this,"nodeMapByIndex");u(this,"nodeMapByCreatedAt");const e=ce.of(0,ms);e.setRemovedAt(ms),this.dummyHead=new wl(e),this.last=this.dummyHead,this.nodeMapByIndex=new Ao,this.nodeMapByCreatedAt=new Map,this.nodeMapByIndex.insert(this.dummyHead),this.nodeMapByCreatedAt.set(this.dummyHead.getCreatedAt().toIDString(),this.dummyHead)}static create(){return new Eo}get length(){return this.nodeMapByIndex.length}findNextBeforeExecutedAt(e,t){let r=this.nodeMapByCreatedAt.get(e.toIDString());if(!r)throw new S(w.ErrInvalidArgument,`cant find the given node: ${e.toIDString()}`);for(;r.getNext()&&r.getNext().getPositionedAt().after(t);)r=r.getNext();return r}release(e){this.last===e&&(this.last=e.getPrev()),e.release(),this.nodeMapByIndex.delete(e),this.nodeMapByCreatedAt.delete(e.getValue().getCreatedAt().toIDString())}insertAfter(e,t,r=t.getCreatedAt()){const i=this.findNextBeforeExecutedAt(e,r),s=wl.createAfter(i,t);i===this.last&&(this.last=s),this.nodeMapByIndex.insertAfter(i,s),this.nodeMapByCreatedAt.set(s.getCreatedAt().toIDString(),s)}moveAfter(e,t,r){const i=this.nodeMapByCreatedAt.get(e.toIDString());if(!i)throw new S(w.ErrInvalidArgument,`cant find the given node: ${e.toIDString()}`);const s=this.nodeMapByCreatedAt.get(t.toIDString());if(!s)throw new S(w.ErrInvalidArgument,`cant find the given node: ${t.toIDString()}`);i!==s&&(!s.getValue().getMovedAt()||r.after(s.getValue().getMovedAt()))&&(this.release(s),this.insertAfter(i.getCreatedAt(),s.getValue(),r),s.getValue().setMovedAt(r))}insert(e){this.insertAfter(this.last.getCreatedAt(),e)}getByID(e){return this.nodeMapByCreatedAt.get(e.toIDString())}subPathOf(e){const t=this.nodeMapByCreatedAt.get(e.toIDString());if(t)return String(this.nodeMapByIndex.indexOf(t))}purge(e){const t=this.nodeMapByCreatedAt.get(e.getCreatedAt().toIDString());if(!t)throw new S(w.ErrInvalidArgument,`fail to find the given createdAt: ${e.getCreatedAt().toIDString()}`);this.release(t)}getByIndex(e){if(e>=this.length)return;const[t,r]=this.nodeMapByIndex.find(e);let i=t;if(e===0&&t===this.dummyHead||r>0)do i&&(i=i.getNext());while(i&&i.isRemoved());return i}getPrevCreatedAt(e){let t=this.nodeMapByCreatedAt.get(e.toIDString());do t=t.getPrev();while(this.dummyHead!==t&&t.isRemoved());return t.getValue().getCreatedAt()}delete(e,t){const r=this.nodeMapByCreatedAt.get(e.toIDString()),i=r.isRemoved();return r.remove(t)&&!i&&this.nodeMapByIndex.splayNode(r),r.getValue()}deleteByIndex(e,t){const r=this.getByIndex(e);if(r)return r.remove(t)&&this.nodeMapByIndex.splayNode(r),r.getValue()}getHead(){return this.dummyHead.getValue()}getLast(){return this.last.getValue()}getLastCreatedAt(){return this.last.getCreatedAt()}toTestString(){const e=[];for(const t of this){const r=`${t.getCreatedAt().toIDString()}:${t.getValue().toJSON()}`;t.isRemoved()?e.push(`{${r}}`):e.push(`[${r}]`)}return e.join("")}*[Symbol.iterator](){let e=this.dummyHead.getNext();for(;e;)yield e,e=e.getNext()}}class tt extends Gr{constructor(t,r){super(t);u(this,"elements");this.elements=r}static create(t,r){if(!r)return new tt(t,Eo.create());const i=Eo.create();for(const s of r)i.insertAfter(i.getLastCreatedAt(),s.deepcopy());return new tt(t,i)}subPathOf(t){return this.elements.subPathOf(t)}purge(t){this.elements.purge(t)}insertAfter(t,r){this.elements.insertAfter(t,r)}moveAfter(t,r,i){this.elements.moveAfter(t,r,i)}get(t){const r=this.elements.getByIndex(t);return r==null?void 0:r.getValue()}getByID(t){const r=this.elements.getByID(t);return r==null?void 0:r.getValue()}getHead(){return this.elements.getHead()}getLast(){return this.elements.getLast()}getPrevCreatedAt(t){return this.elements.getPrevCreatedAt(t)}delete(t,r){return this.elements.delete(t,r)}deleteByIndex(t,r){return this.elements.deleteByIndex(t,r)}getLastCreatedAt(){return this.elements.getLastCreatedAt()}get length(){return this.elements.length}*[Symbol.iterator](){for(const t of this.elements)t.isRemoved()||(yield t.getValue())}toTestString(){return this.elements.toTestString()}getDescendants(t){for(const r of this.elements){const i=r.getValue();if(t(i,this))return;i instanceof Gr&&i.getDescendants(t)}}getDataSize(){return{data:0,meta:this.getMetaUsage()}}toJSON(){const t=[];for(const r of this)t.push(r.toJSON());return`[${t.join(",")}]`}toJS(){return JSON.parse(this.toJSON())}toJSForTest(){const t={};for(let r=0;r<this.length;r++){const{createdAt:i,value:s,type:o}=this.get(r).toJSForTest();t[r]={key:String(r),createdAt:i,value:s,type:o}}return{createdAt:this.getCreatedAt().toTestString(),value:t,type:"YORKIE_ARRAY"}}toSortedJSON(){return this.toJSON()}getElements(){return this.elements}deepcopy(){const t=tt.create(this.getCreatedAt());for(const r of this.elements)t.elements.insertAfter(t.getLastCreatedAt(),r.getValue().deepcopy());return t.remove(this.getRemovedAt()),t}}class ei extends $t{constructor(t,r,i){super(t,i);u(this,"createdAt");this.createdAt=r}static create(t,r,i){return new ei(t,r,i)}execute(t,r){var c;const i=t.findByCreatedAt(this.getParentCreatedAt());if(!i)throw new S(w.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(i instanceof Gr))throw new S(w.ErrInvalidArgument,`only object and array can execute remove: ${i}`);if(r===Y.UndoRedo){let d=i.getByID(this.createdAt);for(;d;){if(d.getRemovedAt())return;d=(c=t.findElementPairByCreatedAt(d.getCreatedAt()))==null?void 0:c.parent}}const s=i.subPathOf(this.createdAt),o=this.toReverseOperation(i),a=i.delete(this.createdAt,this.getExecutedAt());return t.registerRemovedElement(a),{opInfos:i instanceof tt?[{type:"remove",path:t.createPath(this.getParentCreatedAt()),index:Number(s)}]:[{type:"remove",path:t.createPath(this.getParentCreatedAt()),key:s}],reverseOp:o}}toReverseOperation(t){if(t instanceof He){const r=t.subPathOf(this.createdAt);if(r!==void 0){const i=t.get(r);if(i!==void 0)return Pi.create(r,i.deepcopy(),this.getParentCreatedAt())}}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.REMOVE.${this.createdAt.toTestString()}`}getCreatedAt(){return this.createdAt}}class Pi extends $t{constructor(t,r,i,s){super(i,s);u(this,"key");u(this,"value");this.key=t,this.value=r}static create(t,r,i,s){return new Pi(t,r,i,s)}execute(t,r){var c;const i=t.findByCreatedAt(this.getParentCreatedAt());if(!i)throw new S(w.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(i instanceof He))throw new S(w.ErrInvalidArgument,"fail to execute, only object can execute set");if(r===Y.UndoRedo){let d=i;for(;d;){if(d.getRemovedAt())return;d=(c=t.findElementPairByCreatedAt(d.getCreatedAt()))==null?void 0:c.parent}}const s=i.get(this.key),o=this.toReverseOperation(s),a=this.value.deepcopy(),l=i.set(this.key,a,this.getExecutedAt());return r===Y.UndoRedo&&t.findByCreatedAt(a.getCreatedAt())&&t.deregisterElement(a),t.registerElement(a,i),l&&t.registerRemovedElement(l),{opInfos:[{type:"set",path:t.createPath(this.getParentCreatedAt()),key:this.key}],reverseOp:o}}toReverseOperation(t){let r=ei.create(this.getParentCreatedAt(),this.value.getCreatedAt());return t!==void 0&&!t.isRemoved()&&(r=Pi.create(this.key,t.deepcopy(),this.getParentCreatedAt())),r}getEffectedCreatedAt(){return this.value.getCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.SET.${this.key}=${this.value.toSortedJSON()}`}getKey(){return this.key}getValue(){return this.value}}class bo extends $t{constructor(t,r,i,s){super(t,s);u(this,"prevCreatedAt");u(this,"value");this.prevCreatedAt=r,this.value=i}static create(t,r,i,s){return new bo(t,r,i,s)}execute(t){const r=t.findByCreatedAt(this.getParentCreatedAt());if(!r)throw new S(w.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(r instanceof tt))throw new S(w.ErrInvalidArgument,"fail to execute, only array can execute add");const i=r,s=this.value.deepcopy();return i.insertAfter(this.prevCreatedAt,s),t.registerElement(s,i),{opInfos:[{type:"add",path:t.createPath(this.getParentCreatedAt()),index:Number(i.subPathOf(this.getEffectedCreatedAt()))}]}}getEffectedCreatedAt(){return this.value.getCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.ADD.${this.value.toJSON()}`}getPrevCreatedAt(){return this.prevCreatedAt}getValue(){return this.value}}class Mr extends $t{constructor(t,r,i,s){super(t,s);u(this,"prevCreatedAt");u(this,"createdAt");this.prevCreatedAt=r,this.createdAt=i}static create(t,r,i,s){return new Mr(t,r,i,s)}execute(t){const r=t.findByCreatedAt(this.getParentCreatedAt());if(!r)throw new S(w.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(r instanceof tt))throw new S(w.ErrInvalidArgument,"fail to execute, only array can execute move");const i=r,s=Number(i.subPathOf(this.createdAt));i.moveAfter(this.prevCreatedAt,this.createdAt,this.getExecutedAt());const o=Number(i.subPathOf(this.createdAt));return{opInfos:[{type:"move",path:t.createPath(this.getParentCreatedAt()),index:o,previousIndex:s}]}}getEffectedCreatedAt(){return this.createdAt}toTestString(){return`${this.getParentCreatedAt().toTestString()}.MOVE`}getPrevCreatedAt(){return this.prevCreatedAt}getCreatedAt(){return this.createdAt}}class pi{constructor(e,t,r,i){u(this,"key");u(this,"value");u(this,"updatedAt");u(this,"_isRemoved");this.key=e,this.value=t,this.updatedAt=r,this._isRemoved=i}static of(e,t,r,i){return new pi(e,t,r,i)}getKey(){return this.key}getValue(){return this.value}getUpdatedAt(){return this.updatedAt}isRemoved(){return this._isRemoved}toIDString(){return`${this.updatedAt.toIDString()}:${this.key}`}getRemovedAt(){if(this._isRemoved)return this.updatedAt}getDataSize(){return{data:(this.key.length+this.value.length)*2,meta:_r}}}class Ar{constructor(){u(this,"nodeMapByKey");u(this,"numberOfRemovedElement");this.nodeMapByKey=new Map,this.numberOfRemovedElement=0}static create(){return new Ar}getNodeMapByKey(){return this.nodeMapByKey}set(e,t,r){const i=this.nodeMapByKey.get(e);if(i&&i.isRemoved()&&r.after(i.getUpdatedAt())&&(this.numberOfRemovedElement-=1),i===void 0||r.after(i.getUpdatedAt())){const s=pi.of(e,t,r,!1);return this.nodeMapByKey.set(e,s),i!==void 0&&i.isRemoved()?[i,s]:[void 0,s]}return i.isRemoved()?[i,void 0]:[void 0,void 0]}setInternal(e,t,r,i){const s=pi.of(e,t,r,i);this.nodeMapByKey.set(e,s),i&&this.numberOfRemovedElement++}remove(e,t){const r=this.nodeMapByKey.get(e),i=[];if(r===void 0||t.after(r.getUpdatedAt())){if(r===void 0){this.numberOfRemovedElement+=1;const a=pi.of(e,"",t,!0);return this.nodeMapByKey.set(e,a),i.push(a),i}const s=r.isRemoved();s||(this.numberOfRemovedElement+=1),s&&i.push(r);const o=pi.of(e,r.getValue(),t,!0);return this.nodeMapByKey.set(e,o),i.push(o),i}return i}has(e){if(this.nodeMapByKey.has(e)){const t=this.nodeMapByKey.get(e);return t!==void 0&&!t.isRemoved()}return!1}get(e){if(this.nodeMapByKey.has(e))return this.nodeMapByKey.get(e).getValue()}deepcopy(){const e=new Ar;for(const[,t]of this.nodeMapByKey)e.setInternal(t.getKey(),t.getValue(),t.getUpdatedAt(),t.isRemoved());return e}toJSON(){if(!this.size())return"{}";const e=[];for(const[t,r]of this.nodeMapByKey)r.isRemoved()||e.push(`"${tn(t)}":"${tn(r.getValue())}"`);return`{${e.join(",")}}`}size(){return this.nodeMapByKey.size-this.numberOfRemovedElement}toObject(){const e={};for(const[t,r]of this.nodeMapByKey)r.isRemoved()||(e[t]=r.getValue());return e}*[Symbol.iterator](){for(const[,e]of this.nodeMapByKey)yield e}purge(e){const t=this.nodeMapByKey.get(e.getKey());t==null||t.toIDString()!=e.toIDString()||(this.nodeMapByKey.delete(e.getKey()),this.numberOfRemovedElement--)}}function Dt(n){if(n instanceof Map){const e=Array.from(n);return new Map(JSON.parse(JSON.stringify(e)))}return JSON.parse(JSON.stringify(n))}const cy=n=>n?Object.entries(n).length===0:!0,ys=n=>{const e={};for(const[t,r]of Object.entries(n))e[t]=JSON.stringify(r);return e},yr=n=>{const e={};for(const[t,r]of Object.entries(n))e[t]=JSON.parse(r);return e};class xo{constructor(e){u(this,"attributes");u(this,"content");this.attributes=Ar.create(),this.content=e}static create(e){return new xo(e)}get length(){return this.content.length}substring(e,t){const r=new xo(this.content.substring(e,t));return r.attributes=this.attributes.deepcopy(),r}setAttr(e,t,r){return this.attributes.set(e,t,r)}getAttrs(){return this.attributes}toString(){return this.content}getDataSize(){const e={data:0,meta:0};e.data+=this.content.length*2;for(const t of this.attributes){const r=t.getDataSize();e.meta+=r.meta,e.data+=r.data}return e}toJSON(){const e=tn(this.content),t=this.attributes.toObject(),r=[];for(const[i,s]of Object.entries(t)){const o=JSON.parse(s),a=typeof o=="string"?`"${tn(i)}":"${tn(o)}"`:`"${tn(i)}":${String(o)}`;r.push(a)}return r.sort(),r.length===0?`{"val":"${e}"}`:`{"attrs":{${r.join(",")}},"val":"${e}"}`}getAttributes(){return this.attributes.toObject()}getContent(){return this.content}purge(e){this.attributes&&e instanceof pi&&this.attributes.purge(e)}getGCPairs(){const e=[];for(const t of this.attributes)t.getRemovedAt()&&e.push({parent:this,child:t});return e}}class Et extends Bo{constructor(t,r){super(r);u(this,"rgaTreeSplit");this.rgaTreeSplit=t}static create(t,r){return new Et(t,r)}edit(t,r,i,s,o){const a=r?xo.create(r):void 0;if(a&&s)for(const[g,p]of Object.entries(s))a.setAttr(g,p,i);const[l,c,d]=this.rgaTreeSplit.edit(t,i,a,o);return[d.map(g=>({...g,value:g.value?{attributes:yr(g.value.getAttributes()),content:g.value.getContent()}:{attributes:void 0,content:""},type:"content"})),c,[l,l]]}setStyle(t,r,i,s){const[,o]=this.rgaTreeSplit.findNodeWithSplit(t[1],i),[,a]=this.rgaTreeSplit.findNodeWithSplit(t[0],i),l=[],c=this.rgaTreeSplit.findBetween(a,o),d=[];for(const g of c){const p=g.getCreatedAt().getActorID();let T=Xs;s!=null&&(T=s.get(p)?s.get(p):0n),g.canStyle(i,T)&&d.push(g)}const h=[];for(const g of d){if(g.isRemoved())continue;const[p,T]=this.rgaTreeSplit.findIndexesFromRange(g.createPosRange());l.push({type:"style",actor:i.getActorID(),from:p,to:T,value:{attributes:yr(r)}});for(const[k,C]of Object.entries(r)){const[y]=g.getValue().setAttr(k,C,i);y!==void 0&&h.push({parent:g.getValue(),child:y})}}return[h,l]}indexRangeToPosRange(t,r){const i=this.rgaTreeSplit.indexToPos(t);return t===r?[i,i]:[i,this.rgaTreeSplit.indexToPos(r)]}get length(){return this.rgaTreeSplit.length}getTreeByIndex(){return this.rgaTreeSplit.getTreeByIndex()}getTreeByID(){return this.rgaTreeSplit.getTreeByID()}getDataSize(){const t={data:0,meta:0};for(const r of this.rgaTreeSplit){if(r.isRemoved())continue;const i=r.getDataSize();t.data+=i.data,t.meta+=i.meta}return{data:t.data,meta:t.meta+this.getMetaUsage()}}toJSON(){const t=[];for(const r of this.rgaTreeSplit)r.isRemoved()||t.push(r.getValue().toJSON());return`[${t.join(",")}]`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:JSON.parse(this.toJSON()),type:"YORKIE_TEXT"}}toString(){return this.rgaTreeSplit.toString()}values(){const t=[];for(const r of this.rgaTreeSplit)if(!r.isRemoved()){const i=r.getValue();t.push({attributes:yr(i.getAttributes()),content:i.getContent()})}return t}getRGATreeSplit(){return this.rgaTreeSplit}toTestString(){return this.rgaTreeSplit.toTestString()}deepcopy(){const t=new Et(this.rgaTreeSplit.deepcopy(),this.getCreatedAt());return t.remove(this.getRemovedAt()),t}findIndexesFromRange(t){return this.rgaTreeSplit.findIndexesFromRange(t)}getGCPairs(){const t=[];for(const r of this.rgaTreeSplit){r.getRemovedAt()&&t.push({parent:this.rgaTreeSplit,child:r});for(const i of r.getValue().getGCPairs())t.push(i)}return t}}class zo extends $t{constructor(t,r,i,s,o,a){super(t,a);u(this,"fromPos");u(this,"toPos");u(this,"content");u(this,"attributes");this.fromPos=r,this.toPos=i,this.content=s,this.attributes=o}static create(t,r,i,s,o,a){return new zo(t,r,i,s,o,a)}execute(t,r,i){const s=t.findByCreatedAt(this.getParentCreatedAt());if(!s)throw new S(w.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(s instanceof Et))throw new S(w.ErrInvalidArgument,"fail to execute, only Text can execute edit");const o=s,[a,l]=o.edit([this.fromPos,this.toPos],this.content,this.getExecutedAt(),Object.fromEntries(this.attributes),i);for(const c of l)t.registerGCPair(c);return{opInfos:a.map(({from:c,to:d,value:h})=>({type:"edit",from:c,to:d,value:h,path:t.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const t=this.getParentCreatedAt().toTestString(),r=this.fromPos.toTestString(),i=this.toPos.toTestString(),s=this.content;return`${t}.EDIT(${r},${i},${s})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getContent(){return this.content}getAttributes(){return this.attributes||new Map}}class Fo extends $t{constructor(t,r,i,s,o){super(t,o);u(this,"fromPos");u(this,"toPos");u(this,"attributes");this.fromPos=r,this.toPos=i,this.attributes=s}static create(t,r,i,s,o){return new Fo(t,r,i,s,o)}execute(t,r,i){const s=t.findByCreatedAt(this.getParentCreatedAt());if(!s)throw new S(w.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(s instanceof Et))throw new S(w.ErrInvalidArgument,"fail to execute, only Text can execute edit");const o=s,[a,l]=o.setStyle([this.fromPos,this.toPos],this.attributes?Object.fromEntries(this.attributes):{},this.getExecutedAt(),i);for(const c of a)t.registerGCPair(c);return{opInfos:l.map(({from:c,to:d,value:h})=>({type:"style",from:c,to:d,value:h,path:t.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const t=this.getParentCreatedAt().toTestString(),r=this.fromPos.toTestString(),i=this.toPos.toTestString(),s=this.attributes;return`${t}.STYL(${r},${i},${JSON.stringify(s)})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getAttributes(){return this.attributes}}const VS=2,qS="root",sn="text";function Bs(n,e){let t=0;const r=n.children;for(let i=0;i<e;i++){const s=r[i];!s||s.isRemoved||(t+=s.paddedSize)}return t}class KS{constructor(e,t=[]){u(this,"type");u(this,"parent");u(this,"_children");u(this,"size");if(this.type=e,this.size=0,this._children=t,this.isText&&this._children.length>0)throw new S(w.ErrRefused,"Text node cannot have children")}updateAncestorsSize(){let e=this.parent;const t=this.isRemoved?-1:1;for(;e&&(e.size+=this.paddedSize*t,!e.isRemoved);)e=e.parent}updateDescendantsSize(){let e=0;for(const t of this._children){const r=t.updateDescendantsSize();t.isRemoved||(e+=r)}return this.size+=e,this.paddedSize}get isText(){return this.type===sn}get paddedSize(){return this.size+(this.isText?0:VS)}isAncestorOf(e){return WS(this,e)}get nextSibling(){const e=this.parent.findOffset(this),t=this.parent.children[e+1];if(t)return t}get prevSibling(){const e=this.parent.findOffset(this),t=this.parent.children[e-1];if(t)return t}splitText(e,t){if(e===0||e===this.size)return;const r=this.value.slice(0,e),i=this.value.slice(e);if(!i.length)return;this.value=r;const s=this.cloneText(e+t);return s.value=i,this.parent.insertAfterInternal(s,this),s}get children(){return this._children.filter(e=>!e.isRemoved)}get allChildren(){return[...this._children]}hasTextChild(){return this.children.length>0&&this.children.every(e=>e.isText)}getChildrenText(){return this.isText?this.value:this.hasTextChild()?this.children.map(e=>e.value).join(""):""}append(...e){if(this.isText)throw new S(w.ErrRefused,"Text node cannot have children");this._children.push(...e);for(const t of e)t.parent=this,t.updateAncestorsSize()}prepend(...e){if(this.isText)throw new S(w.ErrRefused,"Text node cannot have children");this._children.unshift(...e);for(const t of e)t.parent=this}insertBefore(e,t){if(this.isText)throw new S(w.ErrRefused,"Text node cannot have children");const r=this._children.indexOf(t);if(r===-1)throw new S(w.ErrInvalidArgument,"child not found");this.insertAtInternal(e,r),e.updateAncestorsSize()}insertAfter(e,t){if(this.isText)throw new S(w.ErrRefused,"Text node cannot have children");const r=this._children.indexOf(t);if(r===-1)throw new S(w.ErrInvalidArgument,"child not found");this.insertAtInternal(e,r+1),e.updateAncestorsSize()}insertAt(e,t){if(this.isText)throw new S(w.ErrRefused,"Text node cannot have children");this.insertAtInternal(e,t),e.updateAncestorsSize()}removeChild(e){if(this.isText)throw new S(w.ErrRefused,"Text node cannot have children");const t=this._children.indexOf(e);if(t===-1)throw new S(w.ErrInvalidArgument,"child not found");this._children.splice(t,1),e.parent=void 0}splitElement(e,t){const r=this.cloneElement(t);this.parent.insertAfterInternal(r,this),r.updateAncestorsSize();const i=this.children.slice(0,e),s=this.children.slice(e);this._children=i,r._children=s,this.size=this._children.reduce((o,a)=>o+a.paddedSize,0),r.size=r._children.reduce((o,a)=>o+a.paddedSize,0);for(const o of r._children)o.parent=r;return r}insertAfterInternal(e,t){if(this.isText)throw new S(w.ErrRefused,"Text node cannot have children");const r=this._children.indexOf(t);if(r===-1)throw new S(w.ErrInvalidArgument,"child not found");this.insertAtInternal(e,r+1)}insertAtInternal(e,t){if(this.isText)throw new S(w.ErrRefused,"Text node cannot have children");this._children.splice(t,0,e),e.parent=this}findOffset(e){if(this.isText)throw new S(w.ErrRefused,"Text node cannot have children");if(e.isRemoved){const t=this._children.indexOf(e);return this.allChildren.splice(0,t).filter(i=>!i.isRemoved).length}return this.children.indexOf(e)}findBranchOffset(e){if(this.isText)throw new S(w.ErrRefused,"Text node cannot have children");let t=e;for(;t;){const r=this._children.indexOf(t);if(r!==-1)return r;t=t.parent}return-1}}function WS(n,e){if(n===e)return!1;for(;e.parent;){if(e.parent===n)return!0;e=e.parent}return!1}var me=(n=>(n.Start="Start",n.End="End",n.Text="Text",n))(me||{});function fy(n,e,t,r){if(e>t)throw new S(w.ErrInvalidArgument,`from is greater than to: ${e} > ${t}`);if(e>n.size)throw new S(w.ErrInvalidArgument,`from is out of range: ${e} > ${n.size}`);if(t>n.size)throw new S(w.ErrInvalidArgument,`to is out of range: ${t} > ${n.size}`);if(e===t)return;let i=0;for(const s of n.children){if(e-s.paddedSize<i&&i<t){const o=s.isText?e-i:e-i-1,a=s.isText?t-i:t-i-1,l=!s.isText&&o<0,c=!s.isText&&a>s.size;(s.isText||l)&&r([s,s.isText?"Text":"Start"],c),fy(s,Math.max(0,o),Math.min(a,s.size),r),c&&r([s,"End"],c)}i+=s.paddedSize}}function dy(n,e,t=0){for(const r of n.children)dy(r,e,t+1);e(n,t)}function jl(n,e,t=0){for(const r of n._children)jl(r,e,t+1);e(n,t)}function _c(n,e,t=!0){if(e>n.size)throw new S(w.ErrInvalidArgument,`index is out of range: ${e} > ${n.size}`);if(n.isText)return{node:n,offset:e};let r=0,i=0;for(const s of n.children){if(t&&s.isText&&s.size>=e-i)return _c(s,e-i,t);if(e===i)return{node:n,offset:r};if(!t&&s.paddedSize===e-i)return{node:n,offset:r+1};if(s.paddedSize>e-i)return _c(s,e-i-1,t);i+=s.paddedSize,r+=1}return{node:n,offset:r}}function hy(n){return n.isText||n.children.length===0?n:hy(n.children[0])}function HS(n,e){if(n.size<e)throw new S(w.ErrInvalidArgument,"unacceptable path");for(let t=0;t<n.children.length;t++){const r=n.children[t];if(r.size<e)e-=r.size;else{n=r;break}}return{node:n,offset:e}}class _S{constructor(e){u(this,"root");this.root=e}tokensBetween(e,t,r){fy(this.root,e,t,r)}traverse(e){dy(this.root,e,0)}traverseAll(e){jl(this.root,e,0)}findTreePos(e,t=!0){return _c(this.root,e,t)}treePosToPath(e){const t=[];let r=e.node;if(r.isText){const i=r.parent.findOffset(r);if(i===-1)throw new S(w.ErrInvalidArgument,"invalid treePos");const s=Bs(r.parent,i);t.push(s+e.offset),r=r.parent}else if(r.hasTextChild()){const i=Bs(r,e.offset);t.push(i)}else t.push(e.offset);for(;r.parent;){const i=r.parent.findOffset(r);if(i===-1)throw new S(w.ErrInvalidArgument,"invalid treePos");t.push(i),r=r.parent}return t.reverse()}pathToIndex(e){const t=this.pathToTreePos(e);return this.indexOf(t)}pathToTreePos(e){if(!e.length)throw new S(w.ErrInvalidArgument,"unacceptable path");let t=this.root;for(let r=0;r<e.length-1;r++){const i=e[r];if(t=t.children[i],!t)throw new S(w.ErrInvalidArgument,"unacceptable path")}if(t.hasTextChild())return HS(t,e[e.length-1]);if(t.children.length<e[e.length-1])throw new S(w.ErrInvalidArgument,"unacceptable path");return{node:t,offset:e[e.length-1]}}getRoot(){return this.root}get size(){return this.root.size}findPostorderRight(e){const{node:t,offset:r}=e;if(t.isText){if(t.size===r){const i=t.nextSibling;return i||t.parent}return t}return t.children.length===r?t:hy(t.children[r])}indexOf(e){let{node:t}=e;const{offset:r}=e;let i=0,s=1;if(t.isText){i+=r;const o=t.parent,a=o.findOffset(t);if(a===-1)throw new S(w.ErrInvalidArgument,"invalid pos");i+=Bs(o,a),t=t.parent}else i+=Bs(t,r);for(;t!=null&&t.parent;){const o=t.parent,a=o.findOffset(t);if(a===-1)throw new S(w.ErrInvalidArgument,"invalid pos");i+=Bs(o,a),s++,t=t.parent}return i+s-1}indexToPath(e){const t=this.findTreePos(e);return this.treePosToPath(t)}}const GS=(n,e)=>n===e?0:n<e?-1:1;class YS{constructor(e,t,r){u(this,"key");u(this,"value");u(this,"parent");u(this,"left");u(this,"right");u(this,"isRed");this.key=e,this.value=t,this.isRed=r}}class QS{constructor(e){u(this,"stack");this.stack=[],this.traverseInorder(e)}traverseInorder(e){e&&(this.traverseInorder(e.left),this.stack.push({key:e.key,value:e.value}),this.traverseInorder(e.right))}}class gy{constructor(e){u(this,"root");u(this,"comparator");u(this,"counter");this.comparator=typeof e<"u"?e:GS,this.counter=0}put(e,t){return this.root=this.putInternal(e,t,this.root),this.root.isRed=!1,t}get(e){const t=this.getInternal(e,this.root);return t?t.value:void 0}remove(e){!this.isRed(this.root.left)&&!this.isRed(this.root.right)&&(this.root.isRed=!0),this.root=this.removeInternal(this.root,e),this.root&&(this.root.isRed=!1)}getIterator(){return new QS(this.root)}values(){const e=[];for(const t of this.getIterator().stack)e.push(t.value);return e}floorEntry(e){let t=this.root;for(;t;){const r=this.comparator(e,t.key);if(r>0)if(t.right)t.right.parent=t,t=t.right;else return t;else if(r<0)if(t.left)t.left.parent=t,t=t.left;else{let i=t.parent,s=t;for(;i&&s===i.left;)s=i,i=i.parent;return i}else return t}}lastEntry(){if(!this.root)return this.root;let e=this.root;for(;e.right;)e=e.right;return e}size(){return this.counter}isEmpty(){return this.counter===0}getInternal(e,t){for(;t;){const r=this.comparator(e,t.key);if(r===0)return t;r<0?t=t.left:r>0&&(t=t.right)}}putInternal(e,t,r){if(!r)return this.counter+=1,new YS(e,t,!0);const i=this.comparator(e,r.key);return i<0?r.left=this.putInternal(e,t,r.left):i>0?r.right=this.putInternal(e,t,r.right):r.value=t,this.isRed(r.right)&&!this.isRed(r.left)&&(r=this.rotateLeft(r)),this.isRed(r.left)&&this.isRed(r.left.left)&&(r=this.rotateRight(r)),this.isRed(r.left)&&this.isRed(r.right)&&this.flipColors(r),r}removeInternal(e,t){if(this.comparator(t,e.key)<0)!this.isRed(e.left)&&!this.isRed(e.left.left)&&(e=this.moveRedLeft(e)),e.left=this.removeInternal(e.left,t);else{if(this.isRed(e.left)&&(e=this.rotateRight(e)),this.comparator(t,e.key)===0&&!e.right){this.counter-=1;return}if(!this.isRed(e.right)&&!this.isRed(e.right.left)&&(e=this.moveRedRight(e)),this.comparator(t,e.key)===0){this.counter-=1;const r=this.min(e.right);e.value=r.value,e.key=r.key,e.right=this.removeMin(e.right)}else e.right=this.removeInternal(e.right,t)}return this.fixUp(e)}min(e){return e.left?this.min(e.left):e}removeMin(e){if(e.left)return!this.isRed(e.left)&&!this.isRed(e.left.left)&&(e=this.moveRedLeft(e)),e.left=this.removeMin(e.left),this.fixUp(e)}fixUp(e){return this.isRed(e.right)&&(e=this.rotateLeft(e)),this.isRed(e.left)&&this.isRed(e.left.left)&&(e=this.rotateRight(e)),this.isRed(e.left)&&this.isRed(e.right)&&this.flipColors(e),e}moveRedLeft(e){return this.flipColors(e),this.isRed(e.right.left)&&(e.right=this.rotateRight(e.right),e=this.rotateLeft(e),this.flipColors(e)),e}moveRedRight(e){return this.flipColors(e),this.isRed(e.left.left)&&(e=this.rotateRight(e),this.flipColors(e)),e}isRed(e){return e&&e.isRed}rotateLeft(e){const t=e.right;return e.right=t.left,t.left=e,t.isRed=t.left.isRed,t.left.isRed=!0,t}rotateRight(e){const t=e.left;return e.left=t.right,t.right=e,t.isRed=t.right.isRed,t.right.isRed=!0,t}flipColors(e){e.isRed=!e.isRed,e.left.isRed=!e.left.isRed,e.right.isRed=!e.right.isRed}}class bt{constructor(e,t){u(this,"parentID");u(this,"leftSiblingID");this.parentID=e,this.leftSiblingID=t}static of(e,t){return new bt(e,t)}static fromTreePos(e){const{offset:t}=e;let{node:r}=e,i;return r.isText?(r.parent.children[0]===r&&t===0?i=r.parent:i=r,r=r.parent):t===0?i=r:i=r.children[t-1],bt.of(r.id,xe.of(i.getCreatedAt(),i.getOffset()+t))}getParentID(){return this.parentID}static fromStruct(e){return bt.of(xe.of(kt.fromStruct(e.parentID.createdAt),e.parentID.offset),xe.of(kt.fromStruct(e.leftSiblingID.createdAt),e.leftSiblingID.offset))}toStruct(){return{parentID:{createdAt:this.getParentID().getCreatedAt().toStruct(),offset:this.getParentID().getOffset()},leftSiblingID:{createdAt:this.getLeftSiblingID().getCreatedAt().toStruct(),offset:this.getLeftSiblingID().getOffset()}}}toTreeNodePair(e){const t=this.getParentID(),r=this.getLeftSiblingID(),i=e.findFloorNode(t);let s=e.findFloorNode(r);if(!i||!s)throw new S(w.ErrRefused,`cannot find node of CRDTTreePos(${t.toTestString()}, ${r.toTestString()})`);return!r.equals(t)&&r.getOffset()>0&&r.getOffset()===s.id.getOffset()&&s.insPrevID&&(s=e.findFloorNode(s.insPrevID)),[i,s]}getLeftSiblingID(){return this.leftSiblingID}equals(e){return this.getParentID().getCreatedAt().equals(e.getParentID().getCreatedAt())&&this.getParentID().getOffset()===e.getParentID().getOffset()&&this.getLeftSiblingID().getCreatedAt().equals(e.getLeftSiblingID().getCreatedAt())&&this.getLeftSiblingID().getOffset()===e.getLeftSiblingID().getOffset()}}class xe{constructor(e,t){u(this,"createdAt");u(this,"offset");this.createdAt=e,this.offset=t}static of(e,t){return new xe(e,t)}static fromStruct(e){return xe.of(kt.fromStruct(e.createdAt),e.offset)}static createComparator(){return(e,t)=>{const r=e.getCreatedAt().compare(t.getCreatedAt());return r!==0?r:e.getOffset()>t.getOffset()?1:e.getOffset()<t.getOffset()?-1:0}}getCreatedAt(){return this.createdAt}equals(e){return this.createdAt.compare(e.createdAt)===0&&this.offset===e.offset}getOffset(){return this.offset}setOffset(e){this.offset=e}toStruct(){return{createdAt:this.createdAt.toStruct(),offset:this.offset}}toIDString(){return`${this.createdAt.toIDString()}:${this.offset}`}toTestString(){return`${this.createdAt.toTestString()}/${this.offset}`}}class Ze extends KS{constructor(t,r,i,s,o){super(r);u(this,"id");u(this,"removedAt");u(this,"attrs");u(this,"insPrevID");u(this,"insNextID");u(this,"_value","");this.id=t,this.removedAt=o,s&&(this.attrs=s),typeof i=="string"?this.value=i:Array.isArray(i)&&(this._children=i)}toIDString(){return this.id.toIDString()}getRemovedAt(){return this.removedAt}static create(t,r,i,s){return new Ze(t,r,i,s)}deepcopy(){var r;const t=new Ze(this.id,this.type);return t.removedAt=this.removedAt,t._value=this._value,t.size=this.size,t.attrs=(r=this.attrs)==null?void 0:r.deepcopy(),t._children=this._children.map(i=>{const s=i.deepcopy();return s.parent=t,s}),t.insPrevID=this.insPrevID,t.insNextID=this.insNextID,t}get value(){if(!this.isText)throw new S(w.ErrInvalidType,`cannot get value of element node: ${this.type}`);return this._value}set value(t){if(!this.isText)throw new S(w.ErrInvalidType,`cannot set value of element node: ${this.type}`);this._value=t,this.size=t.length}get isRemoved(){return!!this.removedAt}remove(t){const r=!this.removedAt;(!this.removedAt||this.removedAt.compare(t)>0)&&(this.removedAt=t),r&&this.updateAncestorsSize()}cloneText(t){return new Ze(xe.of(this.id.getCreatedAt(),t),this.type,void 0,void 0,this.removedAt)}cloneElement(t){return new Ze(xe.of(t(),0),this.type,void 0,void 0,this.removedAt)}split(t,r,i){const s=this.isText?this.splitText(r,this.id.getOffset()):this.splitElement(r,i);if(s){if(s.insPrevID=this.id,this.insNextID){const o=t.findFloorNode(this.insNextID);o.insPrevID=s.id,s.insNextID=this.insNextID}this.insNextID=s.id,t.registerNode(s)}return s}getCreatedAt(){return this.id.getCreatedAt()}getOffset(){return this.id.getOffset()}canDelete(t,r){return this.getCreatedAt().getLamport()<=r&&(!this.removedAt||t.after(this.removedAt))}canStyle(t,r){return this.isText?!1:this.getCreatedAt().getLamport()<=r&&(!this.removedAt||t.after(this.removedAt))}setAttrs(t,r){this.attrs||(this.attrs=new Ar);const i=[];for(const[s,o]of Object.entries(t))i.push(this.attrs.set(s,o,r));return i}purge(t){this.attrs&&this.attrs.purge(t)}getDataSize(){const t={data:0,meta:0};if(this.isText&&(t.data+=this.size*2),this.id&&(t.meta+=_r),this.removedAt&&(t.meta+=_r),this.attrs)for(const r of this.attrs){if(r.getRemovedAt())continue;const i=r.getDataSize();t.meta+=i.meta,t.data+=i.data}return t}getGCPairs(){const t=[];if(!this.attrs)return t;for(const r of this.attrs)r.getRemovedAt()&&t.push({parent:this,child:r});return t}}function Gc(n){var t;if(n.isText){const r=n;return{type:r.type,value:r.value}}const e={type:n.type,children:n.children.map(Gc)};return n.attrs&&(e.attributes=yr((t=n.attrs)==null?void 0:t.toObject())),e}function Zf(n){if(n.isText)return n.value;let e="";return n.attrs&&n.attrs.size()&&(e=" "+Array.from(n.attrs).filter(t=>!t.isRemoved()).sort((t,r)=>t.getKey().localeCompare(r.getKey())).map(t=>{const r=JSON.parse(t.getValue());return typeof r=="string"?`${t.getKey()}="${r}"`:`${t.getKey()}="${tn(t.getValue())}"`}).join(" ")),`<${n.type}${e}>${n.children.map(t=>Zf(t)).join("")}</${n.type}>`}function my(n){if(n.isText){const e=n;return{type:e.type,value:e.value,size:e.size,isRemoved:e.isRemoved}}return{type:n.type,children:n.children.map(my),size:n.size,isRemoved:n.isRemoved}}class xt extends Bo{constructor(t,r){super(r);u(this,"indexTree");u(this,"nodeMapByID");this.indexTree=new _S(t),this.nodeMapByID=new gy(xe.createComparator()),this.indexTree.traverseAll(i=>{this.nodeMapByID.put(i.id,i)})}static create(t,r){return new xt(t,r)}findFloorNode(t){const r=this.nodeMapByID.floorEntry(t);if(!(!r||!r.key.getCreatedAt().equals(t.getCreatedAt())))return r.value}registerNode(t){this.nodeMapByID.put(t.id,t)}findNodesAndSplitText(t,r){const[i,s]=t.toTreeNodePair(this);let o=s;const a=i===o,l=o.parent&&!a?o.parent:i;if(o.isText&&o.split(this,t.getLeftSiblingID().getOffset()-o.id.getOffset()),r){const c=l.allChildren,d=a?0:c.indexOf(o)+1;for(let h=d;h<c.length;h++){const g=c[h];if(!g.id.getCreatedAt().after(r))break;o=g}}return[l,o]}style(t,r,i,s){const[o,a]=this.findNodesAndSplitText(t[0],i),[l,c]=this.findNodesAndSplitText(t[1],i),d=[],h=r?yr(r):{},g=[];return this.traverseInPosRange(o,a,l,c,([p])=>{const T=p.getCreatedAt().getActorID();let k=Xs;if(s!=null&&(k=s.get(T)?s.get(T):0n),p.canStyle(i,k)&&r){const C=p.setAttrs(r,i),y=C.reduce((A,[,N])=>(N&&(A[N.getKey()]=h[N.getKey()]),A),{}),m=p.parent,v=p.prevSibling||p.parent;Object.keys(y).length>0&&d.push({type:"style",from:this.toIndex(m,v),to:this.toIndex(p,p),fromPath:this.toPath(m,v),toPath:this.toPath(p,p),actor:i.getActorID(),value:y});for(const[A]of C)A&&g.push({parent:p,child:A})}}),[g,d]}removeStyle(t,r,i,s){const[o,a]=this.findNodesAndSplitText(t[0],i),[l,c]=this.findNodesAndSplitText(t[1],i),d=[],h=[];return this.traverseInPosRange(o,a,l,c,([g])=>{const p=g.getCreatedAt().getActorID();let T=Xs;if(s!=null&&(T=s.get(p)?s.get(p):0n),g.canStyle(i,T)&&r){g.attrs||(g.attrs=new Ar);for(const y of r){const m=g.attrs.remove(y,i);for(const v of m)h.push({parent:g,child:v})}const k=g.parent,C=g.prevSibling||g.parent;d.push({actor:i.getActorID(),type:"removeStyle",from:this.toIndex(k,C),to:this.toIndex(g,g),fromPath:this.toPath(k,C),toPath:this.toPath(g,g),value:r})}}),[h,d]}edit(t,r,i,s,o,a){const[l,c]=this.findNodesAndSplitText(t[0],s),[d,h]=this.findNodesAndSplitText(t[1],s),g=this.toIndex(l,c),p=this.toPath(l,c),T=[],k=[],C=[];this.traverseInPosRange(l,c,d,h,([v,A],N)=>{if(A===me.Start&&!N)for(const b of v.children)C.push(b);const D=v.getCreatedAt().getActorID();let O=Xs;a!=null&&(O=a.get(D)?a.get(D):0n),(v.canDelete(s,O)||T.includes(v.parent))&&((A===me.Text||A===me.Start)&&T.push(v),k.push([v,A]))});const y=this.makeDeletionChanges(k,s),m=[];for(const v of T)v.remove(s),v.isRemoved&&m.push({parent:this,child:v});for(const v of C)v.removedAt||l.append(v);if(i>0){let v=0,A=l,N=c;for(;v<i;)A.split(this,A.findOffset(N)+1,o),N=A,A=A.parent,v++;y.push({type:"content",from:g,to:g,fromPath:p,toPath:p,actor:s.getActorID()})}if(r!=null&&r.length){const v=[];let A=c;for(const N of r)A===l?l.insertAt(N,0):l.insertAfter(N,A),A=N,jl(N,D=>{l.isRemoved&&(D.remove(s),m.push({parent:this,child:D})),this.nodeMapByID.put(D.id,D)}),N.isRemoved||v.push(N);if(v.length){const N=v.map(D=>Gc(D));y.length&&y[y.length-1].from===g?y[y.length-1].value=N:y.push({type:"content",from:g,to:g,fromPath:p,toPath:p,actor:s.getActorID(),value:N})}}return[y,m]}editT(t,r,i,s,o){const a=this.findPos(t[0]),l=this.findPos(t[1]);this.edit([a,l],r,i,s,o)}move(t,r,i){throw new S(w.ErrUnimplemented,`not implemented: ${t}, ${r}, ${i}`)}pathToTreePos(t){return this.indexTree.pathToTreePos(t)}purge(t){var s;(s=t.parent)==null||s.removeChild(t),this.nodeMapByID.remove(t.id);const r=t.insPrevID,i=t.insNextID;if(r){const o=this.findFloorNode(r);o.insNextID=i}if(i){const o=this.findFloorNode(i);o.insPrevID=r}t.insPrevID=void 0,t.insNextID=void 0}getGCPairs(){const t=[];return this.indexTree.traverse(r=>{r.getRemovedAt()&&t.push({parent:this,child:r});for(const i of r.getGCPairs())t.push(i)}),t}findPos(t,r=!0){const i=this.indexTree.findTreePos(t,r);return bt.fromTreePos(i)}pathToPosRange(t){const r=this.pathToIndex(t);return[this.findPos(r),this.findPos(r+1)]}pathToPos(t){const r=this.indexTree.pathToIndex(t);return this.findPos(r)}getRoot(){return this.indexTree.getRoot()}getSize(){return this.indexTree.size}getNodeSize(){return this.nodeMapByID.size()}getIndexTree(){return this.indexTree}toXML(){return Zf(this.indexTree.getRoot())}getDataSize(){const t={data:0,meta:0};return this.indexTree.traverse(r=>{if(r.getRemovedAt())return;const i=r.getDataSize();t.data+=i.data,t.meta+=i.meta}),{data:t.data,meta:t.meta+this.getMetaUsage()}}toJSON(){return JSON.stringify(this.getRootTreeNode())}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:JSON.parse(this.toJSON()),type:"YORKIE_TREE"}}toJSInfoForTest(){const t=this.indexTree.getRoot(),r=(i,s=void 0,o=void 0,a=0)=>{var p,T,k,C;let l,c,d;const h=i.isText?{node:i,offset:0}:s&&o?this.toTreePos(s,o):null;h&&(l=this.indexTree.indexOf(h),c=this.indexTree.treePosToPath(h),d=bt.fromTreePos(h).toStruct());const g={type:i.type,parent:s==null?void 0:s.id.toTestString(),size:i.size,id:i.id.toTestString(),removedAt:(p=i.removedAt)==null?void 0:p.toTestString(),insPrev:(T=i.insPrevID)==null?void 0:T.toTestString(),insNext:(k=i.insNextID)==null?void 0:k.toTestString(),value:i.isText?i.value:void 0,isRemoved:i.isRemoved,children:[],depth:a,attributes:i.attrs?yr((C=i.attrs)==null?void 0:C.toObject()):void 0,index:l,path:c,pos:d};for(let y=0;y<i.allChildren.length;y++){const m=y===0?i:i.allChildren[y-1];g.children.push(r(i.allChildren[y],i,m,a+1))}return g};return r(t)}getRootTreeNode(){return Gc(this.indexTree.getRoot())}toTestTreeNode(){return my(this.indexTree.getRoot())}toSortedJSON(){return this.toJSON()}deepcopy(){const t=this.getRoot();return new xt(t.deepcopy(),this.getCreatedAt())}toPath(t,r){const i=this.toTreePos(t,r);return i?this.indexTree.treePosToPath(i):[]}toIndex(t,r){const i=this.toTreePos(t,r);return i?this.indexTree.indexOf(i):-1}indexToPath(t){return this.indexTree.indexToPath(t)}pathToIndex(t){return this.indexTree.pathToIndex(t)}indexRangeToPosRange(t){const r=this.findPos(t[0]);return t[0]===t[1]?[r,r]:[r,this.findPos(t[1])]}indexRangeToPosStructRange(t){const[r,i]=t,s=this.findPos(r);return r===i?[s.toStruct(),s.toStruct()]:[s.toStruct(),this.findPos(i).toStruct()]}posRangeToPathRange(t){const[r,i]=this.findNodesAndSplitText(t[0]),[s,o]=this.findNodesAndSplitText(t[1]);return[this.toPath(r,i),this.toPath(s,o)]}posRangeToIndexRange(t){const[r,i]=this.findNodesAndSplitText(t[0]),[s,o]=this.findNodesAndSplitText(t[1]);return[this.toIndex(r,i),this.toIndex(s,o)]}traverseInPosRange(t,r,i,s,o){const a=this.toIndex(t,r),l=this.toIndex(i,s);return this.indexTree.tokensBetween(a,l,o)}toTreePos(t,r){if(!t||!r)return;if(t.isRemoved){let s;for(;t.isRemoved;)s=t,t=s.parent;const o=t.findOffset(s);return{node:t,offset:o}}if(t===r)return{node:t,offset:0};let i=t.findOffset(r);if(!r.isRemoved){if(r.isText)return{node:r,offset:r.paddedSize};i++}return{node:t,offset:i}}makeDeletionChanges(t,r){const i=[],s=[];let o=null,a=null;for(let l=0;l<t.length;l++){const c=t[l],d=t[l+1];o||(o=c),a=c;const h=this.findRightToken(c);(!h||!d||h[0]!==d[0]||h[1]!==d[1])&&(s.push([o,a]),o=null,a=null)}for(const l of s){const[c,d]=l,[h,g]=this.findLeftToken(c),[p,T]=d,k=g===me.Start?h:h.parent,C=T===me.Start?p:p.parent,y=this.toIndex(k,h),m=this.toIndex(C,p);y<m&&(i.length>0&&y===i[i.length-1].to?(i[i.length-1].to=m,i[i.length-1].toPath=this.toPath(C,p)):i.push({type:"content",from:y,to:m,fromPath:this.toPath(k,h),toPath:this.toPath(C,p),actor:r.getActorID()}))}return i.reverse()}findRightToken([t,r]){if(r===me.Start){const l=t.allChildren;return l.length>0?[l[0],l[0].isText?me.Text:me.Start]:[t,me.End]}const i=t.parent,s=i.allChildren,o=s.indexOf(t);if(i&&o===s.length-1)return[i,me.End];const a=s[o+1];return[a,a.isText?me.Text:me.Start]}findLeftToken([t,r]){if(r===me.End){const l=t.allChildren;if(l.length>0){const c=l[l.length-1];return[c,c.isText?me.Text:me.End]}return[t,me.Start]}const i=t.parent,s=i.allChildren,o=s.indexOf(t);if(i&&o===0)return[i,me.Start];const a=s[o-1];return[a,a.isText?me.Text:me.End]}}class Mo extends $t{constructor(t,r,i,s,o,a){super(t,a);u(this,"fromPos");u(this,"toPos");u(this,"contents");u(this,"splitLevel");this.fromPos=r,this.toPos=i,this.contents=s,this.splitLevel=o}static create(t,r,i,s,o,a){return new Mo(t,r,i,s,o,a)}execute(t,r,i){var d;const s=t.findByCreatedAt(this.getParentCreatedAt());if(!s)throw new S(w.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(s instanceof xt))throw new S(w.ErrInvalidArgument,"fail to execute, only Tree can execute edit");const o=this.getExecutedAt(),a=s,[l,c]=a.edit([this.fromPos,this.toPos],(d=this.contents)==null?void 0:d.map(h=>h.deepcopy()),this.splitLevel,o,(()=>{let h=o.getDelimiter();return this.contents!==void 0&&(h+=this.contents.length),()=>kt.of(o.getLamport(),++h,o.getActorID())})(),i);for(const h of c)t.registerGCPair(h);return{opInfos:l.map(({from:h,to:g,value:p,splitLevel:T,fromPath:k,toPath:C})=>({type:"tree-edit",path:t.createPath(this.getParentCreatedAt()),from:h,to:g,value:p,splitLevel:T,fromPath:k,toPath:C}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const t=this.getParentCreatedAt().toTestString(),r=`${this.fromPos.getLeftSiblingID().getCreatedAt().toTestString()}/${this.fromPos.getLeftSiblingID().getOffset()}`,i=`${this.toPos.getLeftSiblingID().getCreatedAt().toTestString()}/${this.toPos.getLeftSiblingID().getOffset()}`,s=this.contents||[];return`${t}.EDIT(${r},${i},${s.map(o=>Zf(o)).join("")})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getContents(){return this.contents}getSplitLevel(){return this.splitLevel}}class ns{constructor(e){u(this,"vector");this.vector=e||new Map}set(e,t){this.vector.set(e,t)}unset(e){this.vector.delete(e)}get(e){return this.vector.get(e)}maxLamport(){let e=BigInt(0);for(const[,t]of this)t>e&&(e=t);return e}max(e){const t=new Map;for(const[r,i]of e){const s=this.vector.get(r),o=s&&s>i?s:i;t.set(r,o)}for(const[r,i]of this){const s=e.get(r),o=s&&s>i?s:i;t.set(r,o)}return new ns(t)}afterOrEqual(e){const t=this.vector.get(e.getActorID());return t===void 0?!1:t>=e.getLamport()}deepcopy(){const e=new Map;for(const[t,r]of this.vector)e.set(t,r);return new ns(e)}filter(e){const t=new Map;for(const[r]of e){const i=this.vector.get(r);i!==void 0&&t.set(r,i)}return new ns(t)}size(){return this.vector.size}*[Symbol.iterator](){for(const[e,t]of this.vector)yield[e,t]}}const py=new ns(new Map);class Ot{constructor(e,t,r,i,s){u(this,"clientSeq");u(this,"serverSeq");u(this,"actor");u(this,"lamport");u(this,"versionVector");this.clientSeq=e,this.serverSeq=s,this.lamport=t,this.versionVector=i,this.actor=r}hasClocks(){return this.versionVector.size()>0&&this.lamport!=Wc}static of(e,t,r,i,s){return new Ot(e,t,r,i,s)}next(e=!1){if(e)return new Ot(this.clientSeq+1,this.lamport,this.actor,py,Wc);const t=this.versionVector.deepcopy();return t.set(this.actor,this.lamport+1n),new Ot(this.clientSeq+1,this.lamport+1n,this.actor,t)}syncClocks(e){if(!e.hasClocks())return this;const t=e.lamport>this.lamport?e.lamport+1n:this.lamport+1n,r=this.versionVector.max(e.versionVector),i=new Ot(this.clientSeq,t,this.actor,r);return i.versionVector.set(this.actor,t),i}setClocks(e,t){const r=e>this.lamport?e+1n:this.lamport+1n;t.unset(Ul);const i=this.versionVector.max(t);return i.set(this.actor,r),Ot.of(this.clientSeq,r,this.actor,i)}createTimeTicket(e){return kt.of(this.lamport,e,this.actor)}setActor(e){return new Ot(this.clientSeq,this.lamport,e,this.versionVector,this.serverSeq)}setLamport(e){return new Ot(this.clientSeq,e,this.actor,this.versionVector,this.serverSeq)}setVersionVector(e){return new Ot(this.clientSeq,this.lamport,this.actor,e,this.serverSeq)}getClientSeq(){return this.clientSeq}getServerSeq(){return this.serverSeq?this.serverSeq.toString():""}getLamport(){return this.lamport}getLamportAsString(){return this.lamport.toString()}getActorID(){return this.actor}getVersionVector(){return this.versionVector}toTestString(){return`${this.lamport.toString()}:${this.actor.slice(-2)}:${this.clientSeq}`}}const XS=new Ot(0,0n,Ul,py);class vs{constructor({id:e,operations:t,presenceChange:r,message:i}){u(this,"id");u(this,"operations");u(this,"presenceChange");u(this,"message");this.id=e,this.operations=t||[],this.presenceChange=r,this.message=i}static create({id:e,operations:t,presenceChange:r,message:i}){return new vs({id:e,operations:t,presenceChange:r,message:i})}getID(){return this.id}getMessage(){return this.message}hasOperations(){return this.operations.length>0}getOperations(){return this.operations}setActor(e){for(const t of this.operations)t.setActor(e);this.id=this.id.setActor(e)}hasPresenceChange(){return this.presenceChange!==void 0}getPresenceChange(){return this.presenceChange}execute(e,t,r){const i=[],s=[];for(const o of this.operations){const a=o.execute(e,r,this.id.getVersionVector());if(!a)continue;const{opInfos:l,reverseOp:c}=a;i.push(...l),c&&s.unshift(c)}return this.presenceChange&&(this.presenceChange.type===an.Put?t.set(this.id.getActorID(),Dt(this.presenceChange.presence)):t.delete(this.id.getActorID())),{opInfos:i,reverseOps:s}}toTestString(){return`${this.operations.map(e=>e.toTestString()).join(",")}`}toStruct(){return{changeID:de.bytesToHex(de.toChangeID(this.getID()).toBinary()),message:this.getMessage(),operations:this.getOperations().map(e=>de.bytesToHex(de.toOperation(e).toBinary())),presenceChange:this.getPresenceChange()}}static fromStruct(e){const{changeID:t,operations:r,presenceChange:i,message:s}=e;return vs.create({id:de.bytesToChangeID(de.hexToBytes(t)),operations:r==null?void 0:r.map(o=>de.bytesToOperation(de.hexToBytes(o))),presenceChange:i,message:s})}}class Vl{constructor(e,t,r,i,s,o){u(this,"documentKey");u(this,"checkpoint");u(this,"isRemoved");u(this,"changes");u(this,"snapshot");u(this,"versionVector");this.documentKey=e,this.checkpoint=t,this.isRemoved=r,this.changes=i,this.snapshot=o,this.versionVector=s}static create(e,t,r,i,s,o){return new Vl(e,t,r,i,s,o)}getDocumentKey(){return this.documentKey}getCheckpoint(){return this.checkpoint}getIsRemoved(){return this.isRemoved}getChanges(){return this.changes}hasChanges(){return this.changes.length>0}getChangeSize(){return this.changes.length}hasSnapshot(){return!!this.snapshot&&!!this.snapshot.length}getSnapshot(){return this.snapshot}getVersionVector(){return this.versionVector}}class rs{constructor(e,t){u(this,"serverSeq");u(this,"clientSeq");this.serverSeq=e,this.clientSeq=t}static of(e,t){return new rs(e,t)}increaseClientSeq(e){return e===0?this:new rs(this.serverSeq,this.clientSeq+e)}forward(e){if(this.equals(e))return this;const t=this.serverSeq>e.serverSeq?this.serverSeq:e.serverSeq,r=Math.max(this.clientSeq,e.clientSeq);return rs.of(t,r)}getServerSeqAsString(){return this.serverSeq.toString()}getClientSeq(){return this.clientSeq}getServerSeq(){return this.serverSeq}equals(e){return this.clientSeq===e.clientSeq&&this.serverSeq==e.serverSeq}toTestString(){return`serverSeq=${this.serverSeq}, clientSeq=${this.clientSeq}`}}const ZS=new rs(0n,0);class on{constructor(e,t){u(this,"createdAt");u(this,"offset");this.createdAt=e,this.offset=t}static of(e,t){return new on(e,t)}static fromStruct(e){return on.of(kt.fromStruct(e.createdAt),e.offset)}getCreatedAt(){return this.createdAt}getOffset(){return this.offset}equals(e){return this.createdAt.compare(e.createdAt)===0&&this.offset===e.offset}hasSameCreatedAt(e){return this.createdAt.compare(e.createdAt)===0}split(e){return new on(this.createdAt,this.offset+e)}toStruct(){return{createdAt:this.createdAt.toStruct(),offset:this.offset}}toTestString(){return`${this.createdAt.toTestString()}:${this.offset}`}toIDString(){return`${this.createdAt.toIDString()}:${this.offset}`}}const e1=on.of(ms,0);class Mt{constructor(e,t){u(this,"id");u(this,"relativeOffset");this.id=e,this.relativeOffset=t}static of(e,t){return new Mt(e,t)}static fromStruct(e){const t=on.fromStruct(e.id);return Mt.of(t,e.relativeOffset)}getID(){return this.id}getRelativeOffset(){return this.relativeOffset}getAbsoluteID(){return on.of(this.id.getCreatedAt(),this.id.getOffset()+this.relativeOffset)}toTestString(){return`${this.id.toTestString()}:${this.relativeOffset}`}toStruct(){return{id:this.id.toStruct(),relativeOffset:this.relativeOffset}}equals(e){return this.id.equals(e.id)?this.relativeOffset===e.relativeOffset:!1}}class Yr extends sy{constructor(t,r,i){super(r);u(this,"id");u(this,"removedAt");u(this,"prev");u(this,"next");u(this,"insPrev");u(this,"insNext");this.id=t,this.removedAt=i}static create(t,r){return new Yr(t,r)}static createComparator(){return(t,r)=>{const i=t.getCreatedAt().compare(r.getCreatedAt());return i!==0?i:t.getOffset()>r.getOffset()?1:t.getOffset()<r.getOffset()?-1:0}}getID(){return this.id}getCreatedAt(){return this.id.getCreatedAt()}getLength(){return this.removedAt?0:this.getContentLength()}getContentLength(){return this.value&&this.value.length||0}getPrev(){return this.prev}getNext(){return this.next}getInsPrev(){return this.insPrev}getInsNext(){return this.insNext}getInsPrevID(){return this.insPrev.getID()}setPrev(t){this.prev=t,t&&(t.next=this)}setNext(t){this.next=t,t&&(t.prev=this)}setInsPrev(t){this.insPrev=t,t&&(t.insNext=this)}setInsNext(t){this.insNext=t,t&&(t.insPrev=this)}hasNext(){return!!this.next}hasInsPrev(){return!!this.insPrev}isRemoved(){return!!this.removedAt}getRemovedAt(){return this.removedAt}split(t){return new Yr(this.id.split(t),this.splitValue(t),this.removedAt)}canDelete(t,r){const i=!this.removedAt;return this.getCreatedAt().getLamport()<=r&&(!this.removedAt||t.after(this.removedAt))?i:!1}canStyle(t,r){return this.getCreatedAt().getLamport()<=r&&(!this.removedAt||t.after(this.removedAt))}remove(t){this.removedAt=t}createPosRange(){return[Mt.of(this.id,0),Mt.of(this.id,this.getLength())]}getDataSize(){const t=this.value.getDataSize();return this.id&&(t.meta+=_r),this.removedAt&&(t.meta+=_r),t}deepcopy(){return new Yr(this.id,this.value,this.removedAt)}toTestString(){return`${this.id.toTestString()} ${this.value?this.value:""}`}splitValue(t){const r=this.value;return this.value=r.substring(0,t),r.substring(t,r.length)}toIDString(){return this.id.toIDString()}}class ws{constructor(){u(this,"head");u(this,"treeByIndex");u(this,"treeByID");this.head=Yr.create(e1),this.treeByIndex=new Ao,this.treeByID=new gy(Yr.createComparator()),this.treeByIndex.insert(this.head),this.treeByID.put(this.head.getID(),this.head)}static create(){return new ws}edit(e,t,r,i){const[s,o]=this.findNodeWithSplit(e[1],t),[a,l]=this.findNodeWithSplit(e[0],t),c=this.findBetween(l,o),[d,h]=this.deleteNodes(c,t,i),g=o?o.getID():s.getID();let p=Mt.of(g,0);if(r){const k=this.posToIndex(a.createPosRange()[1],!0),C=this.insertAfter(a,Yr.create(on.of(t,0),r));d.length&&d[d.length-1].from===k?d[d.length-1].value=r:d.push({actor:t.getActorID(),from:k,to:k,value:r}),p=Mt.of(C.getID(),C.getContentLength())}const T=[];for(const[,k]of h)T.push({parent:this,child:k});return[p,T,d]}indexToPos(e){const[t,r]=this.treeByIndex.find(e),i=t;return Mt.of(i.getID(),r)}findIndexesFromRange(e){const[t,r]=e;return[this.posToIndex(t,!1),this.posToIndex(r,!0)]}posToIndex(e,t){const r=e.getAbsoluteID(),i=t?this.findFloorNodePreferToLeft(r):this.findFloorNode(r);if(!i)throw new S(w.ErrInvalidArgument,`the node of the given id should be found: ${r.toTestString()}`);const s=this.treeByIndex.indexOf(i),o=i.isRemoved()?0:r.getOffset()-i.getID().getOffset();return s+o}findNode(e){return this.findFloorNode(e)}get length(){return this.treeByIndex.length}getTreeByIndex(){return this.treeByIndex}getTreeByID(){return this.treeByID}toString(){const e=[];for(const t of this)t.isRemoved()||e.push(t.getValue());return e.join("")}*[Symbol.iterator](){let e=this.head.getNext();for(;e;)yield e,e=e.getNext()}getHead(){return this.head}deepcopy(){const e=new ws;let t=this.head.getNext(),r=e.head,i;for(;t;){if(i=e.insertAfter(r,t.deepcopy()),t.hasInsPrev()){const s=e.findNode(t.getInsPrevID());i.setInsPrev(s)}r=i,t=t.getNext()}return e}toTestString(){const e=[];let t=this.head;for(;t;)t.isRemoved()?e.push(`{${t.toTestString()}}`):e.push(`[${t.toTestString()}]`),t=t.getNext();return e.join("")}insertAfter(e,t){const r=e.getNext();return t.setPrev(e),r&&r.setPrev(t),this.treeByID.put(t.getID(),t),this.treeByIndex.insertAfter(e,t),t}findNodeWithSplit(e,t){const r=e.getAbsoluteID();let i=this.findFloorNodePreferToLeft(r);const s=r.getOffset()-i.getID().getOffset();for(this.splitNode(i,s);i.hasNext()&&i.getNext().getCreatedAt().after(t);)i=i.getNext();return[i,i.getNext()]}findFloorNodePreferToLeft(e){let t=this.findFloorNode(e);if(!t)throw new S(w.ErrInvalidArgument,`the node of the given id should be found: ${e.toTestString()}`);if(e.getOffset()>0&&t.getID().getOffset()==e.getOffset()){if(!t.hasInsPrev())return t;t=t.getInsPrev()}return t}findFloorNode(e){const t=this.treeByID.floorEntry(e);if(t&&!(!t.key.equals(e)&&!t.key.hasSameCreatedAt(e)))return t.value}findBetween(e,t){const r=[];let i=e;for(;i&&i!==t;)r.push(i),i=i.getNext();return r}splitNode(e,t){if(t>e.getContentLength())throw new S(w.ErrInvalidArgument,"offset should be less than or equal to length");if(t===0)return e;if(t===e.getContentLength())return e.getNext();const r=e.split(t);this.treeByIndex.updateWeight(r),this.insertAfter(e,r);const i=e.getInsNext();return i&&i.setInsPrev(r),r.setInsPrev(e),r}deleteNodes(e,t,r){if(!e.length)return[[],new Map];const[i,s]=this.filterNodes(e,t,r),o=new Map,a=this.makeChanges(s,t);for(const l of i)o.set(l.getID().toIDString(),l),l.remove(t);return this.deleteIndexNodes(s),[a,o]}filterNodes(e,t,r){const i=[],s=[],[o,a]=this.findEdgesOfCandidates(e);s.push(o);for(const l of e){const c=l.getCreatedAt().getActorID();let d=Xs;r!=null&&(d=r.get(c)?r.get(c):0n),l.canDelete(t,d)?i.push(l):s.push(l)}return s.push(a),[i,s]}findEdgesOfCandidates(e){return[e[0].getPrev(),e[e.length-1].getNext()]}makeChanges(e,t){const r=[];let i,s;for(let o=0;o<e.length-1;o++){const a=e[o],l=e[o+1];a.getNext()!=l&&([i]=this.findIndexesFromRange(a.getNext().createPosRange()),l?[,s]=this.findIndexesFromRange(l.getPrev().createPosRange()):s=this.treeByIndex.length,i<s&&r.push({actor:t.getActorID(),from:i,to:s}))}return r.reverse()}deleteIndexNodes(e){for(let t=0;t<e.length-1;t++){const r=e[t],i=e[t+1];r.getNext()!=i&&this.treeByIndex.deleteRange(r,i)}}purge(e){this.treeByIndex.delete(e),this.treeByID.remove(e.getID());const t=e.getPrev(),r=e.getNext(),i=e.getInsPrev(),s=e.getInsNext();t&&t.setNext(r),r&&r.setPrev(t),e.setPrev(void 0),e.setNext(void 0),i&&i.setInsNext(s),s&&s.setInsPrev(i),e.setInsPrev(void 0),e.setInsNext(void 0)}}const ug=n=>n<0?Math.ceil(n):Math.floor(n);var ln=(n=>(n[n.Int=0]="Int",n[n.Long=1]="Long",n))(ln||{});class nt extends Bo{constructor(t,r,i){super(i);u(this,"valueType");u(this,"value");switch(this.valueType=t,t){case 0:typeof r=="number"?r>Math.pow(2,31)-1||r<-Math.pow(2,31)?this.value=q.fromNumber(r).toInt():this.value=ug(r):this.value=r.toInt();break;case 1:typeof r=="number"?this.value=q.fromNumber(r):this.value=r;break;default:throw new S(w.ErrUnimplemented,`unimplemented type: ${t}`)}}static create(t,r,i){return new nt(t,r,i)}static valueFromBytes(t,r){switch(t){case 0:return r[0]|r[1]<<8|r[2]<<16|r[3]<<24;case 1:return q.fromBytesLE(Array.from(r));default:throw new S(w.ErrUnimplemented,`unimplemented type: ${t}`)}}getDataSize(){return{data:this.valueType===0?4:8,meta:this.getMetaUsage()}}toJSON(){return`${this.value}`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:this.value,type:"YORKIE_COUNTER"}}deepcopy(){const t=nt.create(this.valueType,this.value,this.getCreatedAt());return t.setMovedAt(this.getMovedAt()),t}getType(){return this.valueType}static getCounterType(t){switch(typeof t){case"object":return t instanceof q?1:void 0;case"number":return t>Math.pow(2,31)-1||t<-Math.pow(2,31)?1:0;default:return}}static isSupport(t){return!!nt.getCounterType(t)}static isInteger(t){return t%1===0}isNumericType(){const t=this.valueType;return t===0||t===1}getValueType(){return this.valueType}getValue(){return this.value}toBytes(){switch(this.valueType){case 0:{const t=this.value;return new Uint8Array([t&255,t>>8&255,t>>16&255,t>>24&255])}case 1:{const r=this.value.toBytesLE();return Uint8Array.from(r)}default:throw new S(w.ErrUnimplemented,`unimplemented type: ${this.valueType}`)}}increase(t){function r(i){if(!i.isNumericType())throw new TypeError(`Unsupported type of value: ${typeof i.getValue()}`)}return r(this),r(t),this.valueType===1?this.value=this.value.add(t.getValue()):t.getType()===ve.Long?this.value=this.value+t.getValue().toInt():this.value=q.fromNumber(this.value+ug(t.getValue())).toInt(),this}}class Ss extends $t{constructor(t,r,i){super(t,i);u(this,"value");this.value=r}static create(t,r,i){return new Ss(t,r,i)}execute(t){const r=t.findByCreatedAt(this.getParentCreatedAt());if(!r)throw new S(w.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(r instanceof nt))throw new S(w.ErrInvalidArgument,"fail to execute, only Counter can execute increase");const i=r,s=this.value.deepcopy();return i.increase(s),{opInfos:[{type:"increase",path:t.createPath(this.getParentCreatedAt()),value:s.getValue()}],reverseOp:this.toReverseOperation()}}toReverseOperation(){const t=this.value.deepcopy(),i=t.getType()===ve.Long?t.getValue().multiply(-1):t.getValue()*-1;return Ss.create(this.getParentCreatedAt(),ce.of(i,t.getCreatedAt()))}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.INCREASE.${this.value.toJSON()}`}getValue(){return this.value}}class vr extends $t{constructor(t,r,i,s,o,a){super(t,a);u(this,"fromPos");u(this,"toPos");u(this,"attributes");u(this,"attributesToRemove");this.fromPos=r,this.toPos=i,this.attributes=s,this.attributesToRemove=o}static create(t,r,i,s,o){return new vr(t,r,i,s,[],o)}static createTreeRemoveStyleOperation(t,r,i,s,o){return new vr(t,r,i,new Map,s,o)}execute(t,r,i){const s=t.findByCreatedAt(this.getParentCreatedAt());if(!s)throw new S(w.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(s instanceof xt))throw new S(w.ErrInvalidArgument,"fail to execute, only Tree can execute edit");const o=s;let a,l;if(this.attributes.size){const c={};[...this.attributes].forEach(([d,h])=>c[d]=h),[l,a]=o.style([this.fromPos,this.toPos],c,this.getExecutedAt(),i)}else{const c=this.attributesToRemove;[l,a]=o.removeStyle([this.fromPos,this.toPos],c,this.getExecutedAt(),i)}for(const c of l)t.registerGCPair(c);return{opInfos:a.map(({from:c,to:d,value:h,fromPath:g,toPath:p})=>({type:"tree-style",from:c,to:d,value:this.attributes.size?{attributes:h}:{attributesToRemove:h},fromPath:g,toPath:p,path:t.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const t=this.getParentCreatedAt().toTestString(),r=`${this.fromPos.getLeftSiblingID().getCreatedAt().toTestString()}:${this.fromPos.getLeftSiblingID().getOffset()}`,i=`${this.toPos.getLeftSiblingID().getCreatedAt().toTestString()}:${this.toPos.getLeftSiblingID().getOffset()}`;return`${t}.STYLE(${r},${i},${Object.entries(this.attributes||{}).map(([s,o])=>`${s}:"${o}"`).join(" ")})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getAttributes(){return this.attributes}getAttributesToRemove(){return this.attributesToRemove}}function t1(n){const e=new Yf,t=e.data;for(const[r,i]of Object.entries(n))t[r]=JSON.stringify(i);return e}function n1(n){if(n.type===an.Put)return new ko({type:Ni.PUT,presence:t1(n.presence)});if(n.type===an.Clear)return new ko({type:Ni.CLEAR});throw new S(w.ErrUnimplemented,"unimplemented type")}function r1(n){return new ry({serverSeq:n.getServerSeq(),clientSeq:n.getClientSeq()})}function yy(n){return new Jl({clientSeq:n.getClientSeq(),lamport:n.getLamport(),actorId:cd(n.getActorID()),versionVector:ed(n.getVersionVector())})}function F(n){if(n)return new B({lamport:n.getLamport(),delimiter:n.getDelimiter(),actorId:cd(n.getActorID())})}function ed(n){if(!n)return;const e=new $l;for(const[t,r]of n)e.vector[t]=BigInt(r.toString());return e}function vy(n){switch(n){case ve.Null:return J.NULL;case ve.Boolean:return J.BOOLEAN;case ve.Integer:return J.INTEGER;case ve.Long:return J.LONG;case ve.Double:return J.DOUBLE;case ve.String:return J.STRING;case ve.Bytes:return J.BYTES;case ve.Date:return J.DATE;default:throw new S(w.ErrInvalidType,`unsupported type: ${n}`)}}function wy(n){switch(n){case ln.Int:return J.INTEGER_CNT;case ln.Long:return J.LONG_CNT;default:throw new S(w.ErrInvalidType,`unsupported type: ${n}`)}}function Iu(n){if(n instanceof He)return new lt({type:J.JSON_OBJECT,createdAt:F(n.getCreatedAt()),value:Ry(n)});if(n instanceof tt)return new lt({type:J.JSON_ARRAY,createdAt:F(n.getCreatedAt()),value:B1(n)});if(n instanceof Et)return new lt({type:J.TEXT,createdAt:F(n.getCreatedAt())});if(n instanceof ce)return new lt({type:vy(n.getType()),createdAt:F(n.getCreatedAt()),value:n.toBytes()});if(n instanceof nt)return new lt({type:wy(n.getType()),createdAt:F(n.getCreatedAt()),value:n.toBytes()});if(n instanceof xt)return new lt({type:J.TREE,createdAt:F(n.getCreatedAt()),value:z1(n)});throw new S(w.ErrUnimplemented,"unimplemented element")}function i1(n){return new So({createdAt:F(n.getCreatedAt()),offset:n.getOffset()})}function sa(n){return new Ir({createdAt:F(n.getID().getCreatedAt()),offset:n.getID().getOffset(),relativeOffset:n.getRelativeOffset()})}function oa(n){return new xi({parentId:Zs(n.getParentID()),leftSiblingId:Zs(n.getLeftSiblingID())})}function Zs(n){return new Hr({createdAt:F(n.getCreatedAt()),offset:n.getOffset()})}function Sy(n){const e=new Gf;if(n instanceof Pi){const t=n,r=new el;r.parentCreatedAt=F(t.getParentCreatedAt()),r.key=t.getKey(),r.value=Iu(t.getValue()),r.executedAt=F(t.getExecutedAt()),e.body.case="set",e.body.value=r}else if(n instanceof bo){const t=n,r=new tl;r.parentCreatedAt=F(t.getParentCreatedAt()),r.prevCreatedAt=F(t.getPrevCreatedAt()),r.value=Iu(t.getValue()),r.executedAt=F(t.getExecutedAt()),e.body.case="add",e.body.value=r}else if(n instanceof Mr){const t=n,r=new nl;r.parentCreatedAt=F(t.getParentCreatedAt()),r.prevCreatedAt=F(t.getPrevCreatedAt()),r.createdAt=F(t.getCreatedAt()),r.executedAt=F(t.getExecutedAt()),e.body.case="move",e.body.value=r}else if(n instanceof ei){const t=n,r=new rl;r.parentCreatedAt=F(t.getParentCreatedAt()),r.createdAt=F(t.getCreatedAt()),r.executedAt=F(t.getExecutedAt()),e.body.case="remove",e.body.value=r}else if(n instanceof zo){const t=n,r=new il;r.parentCreatedAt=F(t.getParentCreatedAt()),r.from=sa(t.getFromPos()),r.to=sa(t.getToPos()),r.content=t.getContent();const i=r.attributes;for(const[s,o]of t.getAttributes())i[s]=o;r.executedAt=F(t.getExecutedAt()),e.body.case="edit",e.body.value=r}else if(n instanceof Fo){const t=n,r=new sl;r.parentCreatedAt=F(t.getParentCreatedAt()),r.from=sa(t.getFromPos()),r.to=sa(t.getToPos());const i=r.attributes;for(const[s,o]of t.getAttributes())i[s]=o;r.executedAt=F(t.getExecutedAt()),e.body.case="style",e.body.value=r}else if(n instanceof Ss){const t=n,r=new ol;r.parentCreatedAt=F(t.getParentCreatedAt()),r.value=Iu(t.getValue()),r.executedAt=F(t.getExecutedAt()),e.body.case="increase",e.body.value=r}else if(n instanceof Mo){const t=n,r=new al;r.parentCreatedAt=F(t.getParentCreatedAt()),r.from=oa(t.getFromPos()),r.to=oa(t.getToPos()),r.contents=f1(t.getContents()),r.splitLevel=t.getSplitLevel(),r.executedAt=F(t.getExecutedAt()),e.body.case="treeEdit",e.body.value=r}else if(n instanceof vr){const t=n,r=new ll;r.parentCreatedAt=F(t.getParentCreatedAt()),r.from=oa(t.getFromPos()),r.to=oa(t.getToPos());const i=t.getAttributesToRemove();if(i.length>0)r.attributesToRemove=i;else{const s=r.attributes;for(const[o,a]of t.getAttributes())s[o]=a}r.executedAt=F(t.getExecutedAt()),e.body.case="treeStyle",e.body.value=r}else throw new S(w.ErrUnimplemented,"unimplemented operation");return e}function s1(n){const e=[];for(const t of n)e.push(Sy(t));return e}function o1(n){const e=new ty({id:yy(n.getID()),message:n.getMessage()});return n.hasOperations()&&(e.operations=s1(n.getOperations())),n.hasPresenceChange()&&(e.presenceChange=n1(n.getPresenceChange())),e}function a1(n){const e=[];for(const t of n)e.push(o1(t));return e}function l1(n){const e=[];for(const t of n)e.push(new ny({key:t.getStrKey(),element:nd(t.getValue())}));return e}function u1(n){const e=[];for(const t of n)e.push(new ml({element:nd(t.getValue())}));return e}function c1(n){const e=[];for(const t of n){const r=new pl;r.id=i1(t.getID()),r.value=t.getValue().getContent(),r.removedAt=F(t.getRemovedAt());const i=r.attributes,s=t.getValue().getAttrs();for(const o of s){const a=new gs;a.value=o.getValue(),a.updatedAt=F(o.getUpdatedAt()),i[o.getKey()]=a}e.push(r)}return e}function f1(n){const e=[];if(!n||!n.length)return e;for(const t of n)e.push(new yl({content:td(t)}));return e}function d1(n){const e={};for(const t of n)e[t.getKey()]=new gs({value:t.getValue(),updatedAt:F(t.getUpdatedAt()),isRemoved:t.isRemoved()});return e}function td(n){if(!n)return[];const e=[];return jl(n,(t,r)=>{const i=new To({id:Zs(t.id),type:t.type,removedAt:F(t.removedAt),depth:r});t.isText&&(i.value=t.value),t.insPrevID&&(i.insPrevId=Zs(t.insPrevID)),t.insNextID&&(i.insNextId=Zs(t.insNextID)),t.attrs&&(i.attributes=d1(t.attrs)),e.push(i)}),e}function h1(n){const e=new _e;return e.body.case="jsonObject",e.body.value=new ul({nodes:l1(n.getRHT()),createdAt:F(n.getCreatedAt()),movedAt:F(n.getMovedAt()),removedAt:F(n.getRemovedAt())}),e}function Ty(n){const e=new _e;return e.body.case="jsonArray",e.body.value=new cl({nodes:u1(n.getElements()),createdAt:F(n.getCreatedAt()),movedAt:F(n.getMovedAt()),removedAt:F(n.getRemovedAt())}),e}function g1(n){const e=new _e;return e.body.case="primitive",e.body.value=new fl({type:vy(n.getType()),value:n.toBytes(),createdAt:F(n.getCreatedAt()),movedAt:F(n.getMovedAt()),removedAt:F(n.getRemovedAt())}),e}function m1(n){const e=new _e;return e.body.case="text",e.body.value=new dl({nodes:c1(n.getRGATreeSplit()),createdAt:F(n.getCreatedAt()),movedAt:F(n.getMovedAt()),removedAt:F(n.getRemovedAt())}),e}function p1(n){const e=new _e;return e.body.case="counter",e.body.value=new hl({type:wy(n.getType()),value:n.toBytes(),createdAt:F(n.getCreatedAt()),movedAt:F(n.getMovedAt()),removedAt:F(n.getRemovedAt())}),e}function ky(n){const e=new _e;return e.body.case="tree",e.body.value=new gl({nodes:td(n.getRoot()),createdAt:F(n.getCreatedAt()),movedAt:F(n.getMovedAt()),removedAt:F(n.getRemovedAt())}),e}function nd(n){if(n instanceof He)return h1(n);if(n instanceof tt)return Ty(n);if(n instanceof ce)return g1(n);if(n instanceof Et)return m1(n);if(n instanceof nt)return p1(n);if(n instanceof xt)return ky(n);throw new S(w.ErrUnimplemented,"unimplemented element")}function y1(n){return new xr({documentKey:n.getDocumentKey(),checkpoint:r1(n.getCheckpoint()),isRemoved:n.getIsRemoved(),changes:a1(n.getChanges()),snapshot:n.getSnapshot(),versionVector:ed(n.getVersionVector())})}function $s(n){if(!(n instanceof _))return{};const e=n.findDetails(bS);for(const t of e)return t.metadata;return{}}function Cr(n){return $s(n).code??""}function Iy(n){return Ot.of(n.clientSeq,BigInt(n.lamport),ld(n.actorId),rd(n.versionVector),BigInt(n.serverSeq))}function rd(n){if(!n)return;const e=new ns;return Object.entries(n.vector).forEach(([t,r])=>{e.set(t,BigInt(r.toString()))}),e}function M(n){if(n)return kt.of(BigInt(n.lamport),n.delimiter,ld(n.actorId))}function id(n){const e={};return Object.entries(n.data).forEach(([t,r])=>{e[t]=JSON.parse(r)}),e}function v1(n){const e=n.type;if(e===Ni.PUT){const t=id(n.presence);return{type:an.Put,presence:t}}if(e===Ni.CLEAR)return{type:an.Clear};throw new S(w.ErrInvalidType,`unsupported type: ${e}`)}function w1(n){const e=new Map;return Object.entries(n).forEach(([t,r])=>{e.set(t,id(r))}),e}function Ay(n){switch(n){case J.NULL:return ve.Null;case J.BOOLEAN:return ve.Boolean;case J.INTEGER:return ve.Integer;case J.LONG:return ve.Long;case J.DOUBLE:return ve.Double;case J.STRING:return ve.String;case J.BYTES:return ve.Bytes;case J.DATE:return ve.Date}throw new S(w.ErrUnimplemented,`unimplemented value type: ${n}`)}function Sl(n){switch(n){case J.INTEGER_CNT:return ln.Int;case J.LONG_CNT:return ln.Long}throw new S(w.ErrUnimplemented,`unimplemented value type: ${n}`)}function Au(n){switch(n.type){case J.JSON_OBJECT:return n.value?Oy(n.value):He.create(M(n.createdAt));case J.JSON_ARRAY:return n.value?L1(n.value):tt.create(M(n.createdAt));case J.TEXT:return Et.create(ws.create(),M(n.createdAt));case J.TREE:return b1(n.value);case J.NULL:case J.BOOLEAN:case J.INTEGER:case J.LONG:case J.DOUBLE:case J.STRING:case J.BYTES:case J.DATE:return ce.of(ce.valueFromBytes(Ay(n.type),n.value),M(n.createdAt));case J.INTEGER_CNT:case J.LONG_CNT:return nt.create(Sl(n.type),nt.valueFromBytes(Sl(n.type),n.value),M(n.createdAt))}}function aa(n){return Mt.of(on.of(M(n.createdAt),n.offset),n.relativeOffset)}function Ey(n){return on.of(M(n.createdAt),n.offset)}function S1(n){const e=xo.create(n.value);Object.entries(n.attributes).forEach(([r,i])=>{e.setAttr(r,i.value,M(i.updatedAt))});const t=Yr.create(Ey(n.id),e);return t.remove(M(n.removedAt)),t}function Bi(n){return bt.of(eo(n.parentId),eo(n.leftSiblingId))}function eo(n){return xe.of(M(n.createdAt),n.offset)}function T1(n){if(!n.length)return;const e=[];return n.forEach(t=>{const r=sd(t.content);e.push(r)}),e}function sd(n){if(n.length===0)return;const e=[];for(const i of n)e.push(I1(i));const t=e[e.length-1],r=new Map;r.set(n[e.length-1].depth,e[e.length-1]);for(let i=e.length-2;i>=0;i--)r.get(n[i].depth-1).prepend(e[i]),r.set(n[i].depth,e[i]);return t.updateDescendantsSize(),xt.create(t,ms).getRoot()}function k1(n){const e=Ar.create();for(const[t,r]of Object.entries(n))e.setInternal(t,r.value,M(r.updatedAt),r.isRemoved);return e}function I1(n){const e=eo(n.id),t=Ze.create(e,n.type),r=Object.entries(n.attributes);return t.isText?t.value=n.value:r.length&&(t.attrs=k1(n.attributes)),n.insPrevId&&(t.insPrevID=eo(n.insPrevId)),n.insNextId&&(t.insNextID=eo(n.insNextId)),t.removedAt=M(n.removedAt),t}function xy(n){if(n.body.case==="set"){const e=n.body.value;return Pi.create(e.key,Au(e.value),M(e.parentCreatedAt),M(e.executedAt))}else if(n.body.case==="add"){const e=n.body.value;return bo.create(M(e.parentCreatedAt),M(e.prevCreatedAt),Au(e.value),M(e.executedAt))}else if(n.body.case==="move"){const e=n.body.value;return Mr.create(M(e.parentCreatedAt),M(e.prevCreatedAt),M(e.createdAt),M(e.executedAt))}else if(n.body.case==="remove"){const e=n.body.value;return ei.create(M(e.parentCreatedAt),M(e.createdAt),M(e.executedAt))}else if(n.body.case==="edit"){const e=n.body.value,t=new Map;return Object.entries(e.attributes).forEach(([r,i])=>{t.set(r,i)}),zo.create(M(e.parentCreatedAt),aa(e.from),aa(e.to),e.content,t,M(e.executedAt))}else if(n.body.case==="style"){const e=n.body.value,t=new Map;return Object.entries(e.attributes).forEach(([r,i])=>{t.set(r,i)}),Fo.create(M(e.parentCreatedAt),aa(e.from),aa(e.to),t,M(e.executedAt))}else{if(n.body.case==="select")return;if(n.body.case==="increase"){const e=n.body.value;return Ss.create(M(e.parentCreatedAt),Au(e.value),M(e.executedAt))}else if(n.body.case==="treeEdit"){const e=n.body.value;return Mo.create(M(e.parentCreatedAt),Bi(e.from),Bi(e.to),T1(e.contents),e.splitLevel,M(e.executedAt))}else if(n.body.case==="treeStyle"){const e=n.body.value,t=new Map,r=e.attributesToRemove;return(r==null?void 0:r.length)>0?vr.createTreeRemoveStyleOperation(M(e.parentCreatedAt),Bi(e.from),Bi(e.to),r,M(e.executedAt)):(Object.entries(e.attributes).forEach(([i,s])=>{t.set(i,s)}),vr.create(M(e.parentCreatedAt),Bi(e.from),Bi(e.to),t,M(e.executedAt)))}else throw new S(w.ErrUnimplemented,"unimplemented operation")}}function A1(n){const e=[];for(const t of n){const r=xy(t);r&&e.push(r)}return e}function Ny(n){const e=[];for(const t of n)e.push(vs.create({id:Iy(t.id),operations:A1(t.operations),presenceChange:t.presenceChange?v1(t.presenceChange):void 0,message:t.message}));return e}function E1(n){return rs.of(BigInt(n.serverSeq),n.clientSeq)}function x1(n){return Vl.create(n.documentKey,E1(n.checkpoint),n.isRemoved,Ny(n.changes),rd(n.versionVector),n.snapshot)}function Py(n){const e=new Io;for(const r of n.nodes){const i=od(r.element);e.set(r.key,i,i.getPositionedAt())}const t=new He(M(n.createdAt),e);return t.setMovedAt(M(n.movedAt)),t.setRemovedAt(M(n.removedAt)),t}function Cy(n){const e=new Eo;for(const r of n.nodes)e.insert(od(r.element));const t=new tt(M(n.createdAt),e);return t.setMovedAt(M(n.movedAt)),t.setRemovedAt(M(n.removedAt)),t}function N1(n){const e=ce.of(ce.valueFromBytes(Ay(n.type),n.value),M(n.createdAt));return e.setMovedAt(M(n.movedAt)),e.setRemovedAt(M(n.removedAt)),e}function P1(n){const e=new ws;let t=e.getHead();for(const i of n.nodes){const s=e.insertAfter(t,S1(i));i.insPrevId&&s.setInsPrev(e.findNode(Ey(i.insPrevId))),t=s}const r=new Et(e,M(n.createdAt));return r.setMovedAt(M(n.movedAt)),r.setRemovedAt(M(n.removedAt)),r}function C1(n){const e=nt.create(Sl(n.type),nt.valueFromBytes(Sl(n.type),n.value),M(n.createdAt));return e.setMovedAt(M(n.movedAt)),e.setRemovedAt(M(n.removedAt)),e}function Dy(n){const e=sd(n.nodes);return xt.create(e,M(n.createdAt))}function od(n){if(n.body.case==="jsonObject")return Py(n.body.value);if(n.body.case==="jsonArray")return Cy(n.body.value);if(n.body.case==="primitive")return N1(n.body.value);if(n.body.case==="text")return P1(n.body.value);if(n.body.case==="counter")return C1(n.body.value);if(n.body.case==="tree")return Dy(n.body.value);throw new S(w.ErrUnimplemented,"unimplemented element")}function D1(n){if(!n)return{root:He.create(ms),presences:new Map};const e=Ic.fromBinary(n);return{root:od(e.root),presences:w1(e.presences)}}function O1(n){const e=ed(n);return ad(e.toBinary())}function R1(n){const e=ud(n),t=$l.fromBinary(e);return rd(t)}function Oy(n){if(!n)throw new S(w.ErrInvalidArgument,"bytes is empty");const e=_e.fromBinary(n);return Py(e.body.value)}function Ry(n){return nd(n).toBinary()}function L1(n){if(!n)throw new S(w.ErrInvalidArgument,"bytes is empty");const e=_e.fromBinary(n);return Cy(e.body.value)}function B1(n){return Ty(n).toBinary()}function b1(n){if(!n)throw new S(w.ErrInvalidArgument,"bytes is empty");const e=_e.fromBinary(n);return Dy(e.body.value)}function z1(n){return ky(n).toBinary()}function ad(n){return n?Array.from(n).map(e=>e.toString(16).padStart(2,"0")).join(""):""}function ld(n){return ad(n)}function ud(n){return new Uint8Array(n.match(/.{1,2}/g).map(e=>parseInt(e,16)))}function cd(n){return ud(n)}function F1(n){const e=Jl.fromBinary(n);return Iy(e)}function M1(n){const e=Gf.fromBinary(n);return xy(e)}const de={fromPresence:id,toChangePack:y1,fromChangePack:x1,fromChanges:Ny,toTreeNodes:td,fromTreeNodes:sd,objectToBytes:Ry,bytesToObject:Oy,bytesToSnapshot:D1,bytesToHex:ad,hexToBytes:ud,toHexString:ld,toUint8Array:cd,toOperation:Sy,toChangeID:yy,PbChangeID:Jl,bytesToChangeID:F1,bytesToOperation:M1,versionVectorToHex:O1,hexToVersionVector:R1};var $e=(n=>(n[n.Trivial=0]="Trivial",n[n.Debug=1]="Debug",n[n.Info=2]="Info",n[n.Warn=3]="Warn",n[n.Error=4]="Error",n[n.Fatal=5]="Fatal",n))($e||{});let ci=3;function J1(n){ci=n}const z={trivial:(...n)=>{ci>0||typeof console<"u"&&console.log("YORKIE T:",...n)},debug:(...n)=>{ci>1||typeof console<"u"&&console.log("YORKIE D:",...n)},info:(...n)=>{ci>2||typeof console<"u"&&console.log("YORKIE I:",...n)},warn:(...n)=>{ci>3||typeof console<"u"&&(typeof console.warn<"u"?console.warn("YORKIE W:",...n):console.log("YORKIE W:",...n))},error:(...n)=>{ci>4||typeof console<"u"&&(typeof console.error<"u"?console.error("YORKIE E:",...n):console.log("YORKIE E:",...n))},fatal:(...n)=>{typeof console<"u"&&(typeof console.error<"u"?console.error("YORKIE F:",...n):console.log("YORKIE F:",...n))},isEnabled:n=>ci<=n};function Ly(){return"xxxxxxxx-xxxx-4xxxy-xxxx-xxxxxxxxxxx".replace(/[xy]/g,n=>{const e=Math.random()*16|0;return(n==="x"?e:e&3|8).toString(16)})}class $1{constructor(e,t,r,i,s){u(this,"reconnectStreamDelay");u(this,"doc");u(this,"docID");u(this,"syncMode");u(this,"remoteChangeEventReceived");u(this,"watchStream");u(this,"watchLoopTimerID");u(this,"watchAbortController");u(this,"unsubscribeBroadcastEvent");this.reconnectStreamDelay=e,this.doc=t,this.docID=r,this.syncMode=i,this.remoteChangeEventReceived=!1,this.unsubscribeBroadcastEvent=s}changeSyncMode(e){this.syncMode=e}needRealtimeSync(){return this.syncMode===Na.RealtimeSyncOff?!1:this.syncMode===Na.RealtimePushOnly?this.doc.hasLocalChanges():this.syncMode!==Na.Manual&&(this.doc.hasLocalChanges()||this.remoteChangeEventReceived)}async runWatchLoop(e){const t=async()=>{if(this.watchStream)return Promise.resolve();this.watchLoopTimerID&&(clearTimeout(this.watchLoopTimerID),this.watchLoopTimerID=void 0);try{[this.watchStream,this.watchAbortController]=await e(()=>{this.watchStream=void 0,this.watchAbortController=void 0,this.watchLoopTimerID=setTimeout(t,this.reconnectStreamDelay)})}catch{}};await t()}cancelWatchStream(){this.watchStream&&this.watchAbortController&&(this.watchAbortController.abort(),this.watchStream=void 0,this.watchAbortController=void 0),clearTimeout(this.watchLoopTimerID),this.watchLoopTimerID=void 0}}const Eu=()=>{};class U1{constructor(e){u(this,"finalized",!1);u(this,"observers",[]);u(this,"finalError");try{e(this)}catch(t){this.error(t)}}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(!e)throw new S(w.ErrInvalidArgument,"missing observer");if(this.finalized)throw new S(w.ErrRefused,"observable is finalized due to previous error");typeof e=="object"?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Eu),i.error===void 0&&(i.error=Eu),i.complete===void 0&&(i.complete=Eu);const s=Ly(),o=this.unsubscribeOne.bind(this,s);if(this.observers.push({subscriptionID:s,observer:i}),this.finalized)try{this.finalError?i.error(this.finalError):i.complete()}catch(a){z.warn(a)}return o}unsubscribeOne(e){var t;this.observers=(t=this.observers)==null?void 0:t.filter(r=>r.subscriptionID!==e)}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e].observer)}catch(r){z.error(r)}}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.observers=void 0)}}function j1(n){const e=new U1(n);return{subscribe:e.subscribe.bind(e),getProxy:()=>e}}class Gi{constructor(e,t,r,i){u(this,"prevID");u(this,"nextID");u(this,"delimiter");u(this,"message");u(this,"root");u(this,"operations");u(this,"presenceChange");u(this,"previousPresence");u(this,"reversePresenceKeys");this.prevID=e,this.nextID=e.next(),this.delimiter=iy,this.root=t,this.operations=[],this.previousPresence=Dt(r),this.presenceChange=void 0,this.reversePresenceKeys=new Set,this.message=i}static create(e,t,r,i){return new Gi(e,t,r,i)}push(e){this.operations.push(e)}registerElement(e,t){this.root.registerElement(e,t)}registerRemovedElement(e){this.root.registerRemovedElement(e)}registerGCPair(e){this.root.registerGCPair(e)}getNextID(){return this.operations.length===0?this.prevID.next(!0).setLamport(this.prevID.getLamport()).setVersionVector(this.prevID.getVersionVector()):this.nextID}toChange(){const e=this.operations.length===0?this.prevID.next(!0):this.nextID;return vs.create({id:e,operations:this.operations,presenceChange:this.presenceChange,message:this.message})}hasChange(){return this.operations.length>0||this.presenceChange!==void 0}setPresenceChange(e){this.presenceChange=e}setReversePresence(e,t){for(const r of Object.keys(e))t!=null&&t.addToHistory?this.reversePresenceKeys.add(r):this.reversePresenceKeys.delete(r)}getReversePresence(){if(this.reversePresenceKeys.size===0)return;const e={};for(const t of this.reversePresenceKeys)e[t]=this.previousPresence[t];return e}issueTimeTicket(){return this.delimiter+=1,this.nextID.createTimeTicket(this.delimiter)}getLastTimeTicket(){return this.nextID.createTimeTicket(this.delimiter)}}class No{constructor(e){u(this,"rootObject");u(this,"elementPairMapByCreatedAt");u(this,"gcElementSetByCreatedAt");u(this,"gcPairMap");this.rootObject=e,this.elementPairMapByCreatedAt=new Map,this.gcElementSetByCreatedAt=new Set,this.gcPairMap=new Map,this.registerElement(e,void 0),e.getDescendants(t=>{if(t.getRemovedAt()&&this.registerRemovedElement(t),t instanceof Et||t instanceof xt)for(const r of t.getGCPairs())this.registerGCPair(r);return!1})}static create(){return new No(He.create(ms))}findByCreatedAt(e){const t=this.elementPairMapByCreatedAt.get(e.toIDString());if(t)return t.element}findElementPairByCreatedAt(e){return this.elementPairMapByCreatedAt.get(e.toIDString())}createSubPaths(e){let t=this.elementPairMapByCreatedAt.get(e.toIDString());if(!t)return[];const r=[];for(;t.parent;){const i=t.element.getCreatedAt(),s=t.parent.subPathOf(i);if(s===void 0)throw new S(w.ErrInvalidArgument,`cant find the given element: ${i.toIDString()}`);r.unshift(s),t=this.elementPairMapByCreatedAt.get(t.parent.getCreatedAt().toIDString())}return r.unshift("$"),r}createPath(e){return this.createSubPaths(e).join(".")}registerElement(e,t){this.elementPairMapByCreatedAt.set(e.getCreatedAt().toIDString(),{parent:t,element:e}),e instanceof Gr&&e.getDescendants((r,i)=>(this.registerElement(r,i),!1))}deregisterElement(e){let t=0;const r=i=>{const s=i.getCreatedAt().toIDString();this.elementPairMapByCreatedAt.delete(s),this.gcElementSetByCreatedAt.delete(s),t++};return r(e),e instanceof Gr&&e.getDescendants(i=>(r(i),!1)),t}registerRemovedElement(e){this.gcElementSetByCreatedAt.add(e.getCreatedAt().toIDString())}registerGCPair(e){if(this.gcPairMap.get(e.child.toIDString())){this.gcPairMap.delete(e.child.toIDString());return}this.gcPairMap.set(e.child.toIDString(),e)}getElementMapSize(){return this.elementPairMapByCreatedAt.size}getGarbageElementSetSize(){const e=new Set;for(const t of this.gcElementSetByCreatedAt){e.add(t);const r=this.elementPairMapByCreatedAt.get(t);r.element instanceof Gr&&r.element.getDescendants(i=>(e.add(i.getCreatedAt().toIDString()),!1))}return e.size}getObject(){return this.rootObject}getGarbageLen(){return this.getGarbageElementSetSize()+this.gcPairMap.size}getDocSize(){const e={live:{data:0,meta:0},gc:{data:0,meta:0}};for(const[t,r]of this.elementPairMapByCreatedAt)this.gcElementSetByCreatedAt.has(t)?(e.gc.data+=r.element.getDataSize().data,e.gc.meta+=r.element.getDataSize().meta):(e.live.data+=r.element.getDataSize().data,e.live.meta+=r.element.getDataSize().meta);for(const t of this.gcPairMap.values()){const r=t.child.getDataSize();e.gc.data+=r.data,e.gc.meta+=r.meta}return e}deepcopy(){return new No(this.rootObject.deepcopy())}garbageCollect(e){let t=0;for(const r of this.gcElementSetByCreatedAt){const i=this.elementPairMapByCreatedAt.get(r),s=i.element.getRemovedAt();s&&(e!=null&&e.afterOrEqual(s))&&(i.parent.purge(i.element),t+=this.deregisterElement(i.element))}for(const[,r]of this.gcPairMap){const i=r.child.getRemovedAt();i&&(e!=null&&e.afterOrEqual(i))&&(r.parent.purge(r.child),this.gcPairMap.delete(r.child.toIDString()),t+=1)}return t}toJSON(){return this.rootObject.toJSON()}toSortedJSON(){return this.rootObject.toSortedJSON()}getStats(){return{elements:this.getElementMapSize(),gcPairs:this.gcPairMap.size,gcElements:this.getGarbageElementSetSize()}}}function By(n,e){const t=new Po(n);return new Proxy(e,t.getHandlers())}class Po{constructor(e){u(this,"context");u(this,"handlers");this.context=e,this.handlers={set:(t,r,i)=>(z.isEnabled($e.Trivial)&&z.trivial(`obj[${r}]=${JSON.stringify(i)}`),Po.setInternal(e,t,r,i),!0),get:(t,r)=>(z.isEnabled($e.Trivial)&&z.trivial(`obj[${r}]`),r==="getID"?()=>t.getCreatedAt():r==="toJSON"||r==="toString"?()=>t.toJSON():r==="toJS"?()=>t.toJS():r==="toJSForTest"?()=>t.toJSForTest():fi(e,t.get(r))),ownKeys:t=>t.getKeys(),getOwnPropertyDescriptor:()=>({enumerable:!0,configurable:!0}),deleteProperty:(t,r)=>(z.isEnabled($e.Trivial)&&z.trivial(`obj[${r}]`),Po.deleteInternal(e,t,r),!0)}}static setInternal(e,t,r,i){if(r.includes("."))throw new S(w.ErrInvalidObjectKey,"key must not contain the '.'.");const s=e.issueTimeTicket(),o=Tl(e,i,s),a=t.set(r,o,s);e.registerElement(o,t),a&&e.registerRemovedElement(a),e.push(Pi.create(r,o.deepcopy(),t.getCreatedAt(),s))}static buildObjectMembers(e,t){const r={};for(const[i,s]of Object.entries(t)){if(i.includes("."))throw new S(w.ErrInvalidObjectKey,"key must not contain the '.'.");const o=e.issueTimeTicket(),a=Tl(e,s,o);r[i]=a}return r}static deleteInternal(e,t,r){const i=e.issueTimeTicket(),s=t.deleteByKey(r,i);s&&(e.push(ei.create(t.getCreatedAt(),s.getCreatedAt(),i)),e.registerRemovedElement(s))}getHandlers(){return this.handlers}}function V1(n,e){const t=new oe(n,e);return new Proxy(e,t.getHandlers())}function q1(n){return typeof n=="string"||n instanceof String?!isNaN(n):!1}function K1(n){return["concat","entries","every","filter","find","findIndex","forEach","join","keys","map","reduce","reduceRight","slice","some","toLocaleString","toString","values"].includes(n)}class oe{constructor(e,t){u(this,"context");u(this,"handlers");u(this,"array");this.context=e,this.array=t,this.handlers={get:(r,i,s)=>i==="getID"?()=>r.getCreatedAt():i==="getElementByID"?o=>{const a=r.getByID(o);if(!(!a||a.isRemoved()))return Dr(e,a)}:i==="getElementByIndex"?o=>{const a=r.get(o);return Dr(e,a)}:i==="getLast"?()=>Dr(e,r.getLast()):i==="deleteByID"?o=>{const a=oe.deleteInternalByID(e,r,o);return Dr(e,a)}:i==="insertAfter"?(o,a)=>{const l=oe.insertAfterInternal(e,r,o,a);return Dr(e,l)}:i==="insertBefore"?(o,a)=>{const l=oe.insertBeforeInternal(e,r,o,a);return Dr(e,l)}:i==="moveBefore"?(o,a)=>{oe.moveBeforeInternal(e,r,o,a)}:i==="moveAfter"?(o,a)=>{oe.moveAfterInternal(e,r,o,a)}:i==="moveFront"?o=>{oe.moveFrontInternal(e,r,o)}:i==="moveLast"?o=>{oe.moveLastInternal(e,r,o)}:q1(i)?fi(e,r.get(Number(i))):i==="push"?o=>oe.pushInternal(e,r,o):i==="splice"?(o,a,...l)=>oe.splice(e,r,o,a,...l):i==="length"?r.length:typeof i=="symbol"&&i===Symbol.iterator?oe.iteratorInternal.bind(this,e,r):i==="includes"?(o,a)=>oe.includes(e,r,o,a):i==="indexOf"?(o,a)=>oe.indexOf(e,r,o,a):i==="lastIndexOf"?(o,a)=>oe.lastIndexOf(e,r,o,a):i==="toJSForTest"?()=>r.toJSForTest():i==="toTestString"?()=>oe.toTestString(r):typeof i=="string"&&K1(i)?(...o)=>{const a=Array.from(r).map(l=>fi(e,l));return Array.prototype[i].apply(a,o)}:Reflect.get(r,i,s),deleteProperty:(r,i)=>(z.isEnabled($e.Trivial)&&z.trivial(`array[${i}]`),oe.deleteInternalByIndex(e,r,Number.parseInt(i)),!0)}}static*iteratorInternal(e,t){for(const r of t)yield Dr(e,r)}static buildArrayElements(e,t){const r=[];for(const i of t){const s=e.issueTimeTicket(),o=Tl(e,i,s);r.push(o)}return r}static pushInternal(e,t,r){return oe.insertAfterInternal(e,t,t.getLastCreatedAt(),r),t.length}static moveBeforeInternal(e,t,r,i){const s=e.issueTimeTicket(),o=t.getPrevCreatedAt(r);t.moveAfter(o,i,s),e.push(Mr.create(t.getCreatedAt(),o,i,s))}static moveAfterInternal(e,t,r,i){const s=e.issueTimeTicket();t.moveAfter(r,i,s),e.push(Mr.create(t.getCreatedAt(),r,i,s))}static moveFrontInternal(e,t,r){const i=e.issueTimeTicket(),s=t.getHead();t.moveAfter(s.getCreatedAt(),r,i),e.push(Mr.create(t.getCreatedAt(),s.getCreatedAt(),r,i))}static moveLastInternal(e,t,r){const i=e.issueTimeTicket(),s=t.getLastCreatedAt();t.moveAfter(s,r,i),e.push(Mr.create(t.getCreatedAt(),s,r,i))}static insertAfterInternal(e,t,r,i){const s=e.issueTimeTicket(),o=Tl(e,i,s);return t.insertAfter(r,o),e.registerElement(o,t),e.push(bo.create(t.getCreatedAt(),r,o.deepcopy(),s)),o}static insertBeforeInternal(e,t,r,i){return oe.insertAfterInternal(e,t,t.getPrevCreatedAt(r),i)}static deleteInternalByIndex(e,t,r){const i=e.issueTimeTicket(),s=t.deleteByIndex(r,i);if(s)return e.push(ei.create(t.getCreatedAt(),s.getCreatedAt(),i)),e.registerRemovedElement(s),s}static deleteInternalByID(e,t,r){const i=e.issueTimeTicket(),s=t.delete(r,i);return e.push(ei.create(t.getCreatedAt(),s.getCreatedAt(),i)),e.registerRemovedElement(s),s}static splice(e,t,r,i,...s){const o=t.length,a=r>=0?Math.min(r,o):Math.max(o+r,0),l=i===void 0?o:i<0?a:Math.min(a+i,o),c=[];for(let d=a;d<l;d++){const h=oe.deleteInternalByIndex(e,t,a);if(h){const g=h.deepcopy();g.setRemovedAt(),c.push(fi(e,g))}}if(s){let d=a===0?t.getHead().getID():t.get(a-1).getID();for(const h of s)d=oe.insertAfterInternal(e,t,d,h).getID()}return c}static includes(e,t,r,i){var a;const s=t.length,o=i===void 0?0:i<0?Math.max(i+s,0):i;if(o>=s)return!1;if(ce.isSupport(r))return Array.from(t).map(c=>fi(e,c)).includes(r,o);for(let l=o;l<s;l++)if(((a=t.get(l))==null?void 0:a.getID())===r.getID())return!0;return!1}static indexOf(e,t,r,i){var a;const s=t.length,o=i===void 0?0:i<0?Math.max(i+s,0):i;if(o>=s)return-1;if(ce.isSupport(r))return Array.from(t).map(c=>fi(e,c)).indexOf(r,o);for(let l=o;l<s;l++)if(((a=t.get(l))==null?void 0:a.getID())===r.getID())return l;return-1}static lastIndexOf(e,t,r,i){var a;const s=t.length,o=i===void 0||i>=s?s-1:i<0?i+s:i;if(o<0)return-1;if(ce.isSupport(r))return Array.from(t).map(c=>fi(e,c)).lastIndexOf(r,o);for(let l=o;l>0;l--)if(((a=t.get(l))==null?void 0:a.getID())===r.getID())return l;return-1}static toTestString(e){return e.toTestString()}getHandlers(){return this.handlers}}class fd{constructor(e,t){u(this,"context");u(this,"text");this.context=e,this.text=t}initialize(e,t){this.context=e,this.text=t}getID(){return this.text.getID()}edit(e,t,r,i){if(!this.context||!this.text)throw new S(w.ErrNotInitialized,"Text is not initialized yet");if(e>t)throw new S(w.ErrInvalidArgument,"from should be less than or equal to to");const s=this.text.indexRangeToPosRange(e,t);z.isEnabled($e.Debug)&&z.debug(`EDIT: f:${e}->${s[0].toTestString()}, t:${t}->${s[1].toTestString()} c:${r}`);const o=i?ys(i):void 0,a=this.context.issueTimeTicket(),[,l,c]=this.text.edit(s,r,a,o);for(const d of l)this.context.registerGCPair(d);return this.context.push(new zo(this.text.getCreatedAt(),s[0],s[1],r,o?new Map(Object.entries(o)):new Map,a)),this.text.findIndexesFromRange(c)}delete(e,t){return this.edit(e,t,"")}empty(){return this.edit(0,this.length,"")}setStyle(e,t,r){if(!this.context||!this.text)throw new S(w.ErrNotInitialized,"Text is not initialized yet");if(e>t)throw new S(w.ErrInvalidArgument,"from should be less than or equal to to");const i=this.text.indexRangeToPosRange(e,t);z.isEnabled($e.Debug)&&z.debug(`STYL: f:${e}->${i[0].toTestString()}, t:${t}->${i[1].toTestString()} a:${JSON.stringify(r)}`);const s=ys(r),o=this.context.issueTimeTicket(),[a]=this.text.setStyle(i,s,o);for(const l of a)this.context.registerGCPair(l);return this.context.push(new Fo(this.text.getCreatedAt(),i[0],i[1],new Map(Object.entries(s)),o)),!0}indexRangeToPosRange(e){if(!this.context||!this.text)throw new S(w.ErrNotInitialized,"Text is not initialized yet");const t=this.text.indexRangeToPosRange(e[0],e[1]);return[t[0].toStruct(),t[1].toStruct()]}posRangeToIndexRange(e){if(!this.context||!this.text)throw new S(w.ErrNotInitialized,"Text is not initialized yet");const t=this.text.findIndexesFromRange([Mt.fromStruct(e[0]),Mt.fromStruct(e[1])]);return[t[0],t[1]]}toTestString(){if(!this.context||!this.text)throw new S(w.ErrNotInitialized,"Text is not initialized yet");return this.text.toTestString()}values(){if(!this.context||!this.text)throw new S(w.ErrNotInitialized,"Text is not initialized yet");return this.text.values()}get length(){return this.text.length}getTreeByIndex(){return this.text.getTreeByIndex()}getTreeByID(){return this.text.getTreeByID()}toString(){if(!this.context||!this.text)throw new S(w.ErrNotInitialized,"Text is not initialized yet");return this.text.toString()}toJSON(){if(!this.context||!this.text)throw new S(w.ErrNotInitialized,"Text is not initialized yet");return this.text.toJSON()}toJSForTest(){if(!this.context||!this.text)throw new S(w.ErrNotInitialized,"Text is not initialized yet");return this.text.toJSForTest()}createRangeForTest(e,t){if(!this.context||!this.text)throw new S(w.ErrNotInitialized,"Text is not initialized yet");return this.text.indexRangeToPosRange(e,t)}}class dd{constructor(e,t){u(this,"valueType");u(this,"value");u(this,"context");u(this,"counter");this.valueType=e,this.value=t}initialize(e,t){this.valueType=t.getValueType(),this.context=e,this.counter=t,this.value=t.getValue()}getID(){return this.counter.getID()}getValue(){return this.value}getValueType(){return this.valueType}increase(e){if(!this.context||!this.counter)throw new S(w.ErrNotInitialized,"Counter is not initialized yet");const t=this.context.issueTimeTicket(),r=ce.of(e,t);if(!r.isNumericType())throw new TypeError(`Unsupported type of value: ${typeof r.getValue()}`);return this.counter.increase(r),this.context.push(Ss.create(this.counter.getCreatedAt(),r,t)),this}toJSForTest(){if(!this.context||!this.counter)throw new S(w.ErrNotInitialized,"Counter is not initialized yet");return this.counter.toJSForTest()}}function hd(n){if(n.isText)return{type:n.type,value:n.value};const e={type:n.type,children:n.children.map(t=>hd(t))};return n.attrs&&(e.attributes=yr(n.attrs.toObject())),e}function W1(n,e){const t={type:n.isText?n.parent.type:n.type,children:n.isText?n.parent.getChildrenText().length===e?[]:[{type:sn,value:n.parent.getChildrenText().slice(e)}]:n.children.slice(e).map(r=>hd(r))};return n.attrs?t.attributes=yr(n.attrs.toObject()):n.isText&&n.parent.attrs&&(t.attributes=yr(n.parent.attrs.toObject())),t}function H1(n,e){const{node:t}=n,r=[...e].slice(0,-1),i=t.isText?t.parent.getChildrenText().length:t.children.length,s=[...r,i],o=[...r],a=[];o[o.length-1]+=1,e.every((c,d)=>c===s[d])||a.push({fromPath:[...e],toPath:s});const l=W1(t,e[e.length-1]);return l&&a.push({fromPath:o,toPath:o,content:l}),a}function _1(n,e){const{node:t,offset:r}=n,i=t.children[r],s=t.children[r-1],{children:o}=i,a=[...e].slice(0,-1),l=[{fromPath:[...e],toPath:[...a,r+1]}];if(!i.children.length)return l;const c=[...a,r-1,s.hasTextChild()?s.getChildrenText().length:s.children.length],d=o.map(h=>hd(h));return l.push({fromPath:c,toPath:c,content:d}),l}function gd(n,e,t){const{type:r}=n,i=t.issueTimeTicket();if(r===sn){by(n);const{value:s}=n,o=Ze.create(xe.of(i,0),r,s);e.append(o)}else{const{children:s=[]}=n,{attributes:o}=n;let a;if(typeof o=="object"&&!cy(o)){const c=ys(o);a=new Ar;for(const[d,h]of Object.entries(c))a.set(d,h,i)}const l=Ze.create(xe.of(i,0),r,void 0,a);e.append(l);for(const c of s)gd(c,l,t)}}function G1(n,e){const{type:t}=e,r=n.issueTimeTicket();let i;if(e.type===sn){const{value:s}=e;i=Ze.create(xe.of(r,0),t,s)}else if(e){const{children:s=[]}=e,{attributes:o}=e;let a;if(typeof o=="object"&&!cy(o)){const l=ys(o);a=new Ar;for(const[c,d]of Object.entries(l))a.set(c,d,r)}i=Ze.create(xe.of(n.issueTimeTicket(),0),t,void 0,a);for(const l of s)gd(l,i,n)}return i}function by(n){if(!n.value.length)throw new S(w.ErrInvalidArgument,"text node cannot have empty value");return!0}function cg(n){if(!n.length)return!0;if(n[0].type===sn)for(const t of n){const{type:r}=t;if(r!==sn)throw new S(w.ErrInvalidArgument,"element node and text node cannot be passed together");by(t)}else for(const t of n){const{type:r}=t;if(r===sn)throw new S(w.ErrInvalidArgument,"element node and text node cannot be passed together")}return!0}class md{constructor(e){u(this,"initialRoot");u(this,"context");u(this,"tree");this.initialRoot=e}initialize(e,t){this.context=e,this.tree=t}getID(){return this.tree.getID()}buildRoot(e){if(!this.initialRoot)return Ze.create(xe.of(e.issueTimeTicket(),0),qS);const t=Ze.create(xe.of(e.issueTimeTicket(),0),this.initialRoot.type);for(const r of this.initialRoot.children)gd(r,t,e);return t}getSize(){if(!this.context||!this.tree)throw new S(w.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getSize()}getNodeSize(){if(!this.context||!this.tree)throw new S(w.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getNodeSize()}getIndexTree(){if(!this.context||!this.tree)throw new S(w.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getIndexTree()}splitByPath(e){if(!this.context||!this.tree)throw new S(w.ErrNotInitialized,"Tree is not initialized yet");if(!e.length)throw new S(w.ErrInvalidArgument,"path should not be empty");const t=this.tree.pathToTreePos(e),r=H1(t,e);for(const i of r){const{fromPath:s,toPath:o,content:a}=i,l=this.tree.pathToPos(s),c=this.tree.pathToPos(o);this.editInternal(l,c,a?[a]:[],0)}}mergeByPath(e){if(!this.context||!this.tree)throw new S(w.ErrNotInitialized,"Tree is not initialized yet");if(!e.length)throw new S(w.ErrInvalidArgument,"path should not be empty");const t=this.tree.pathToTreePos(e);if(t.node.isText)throw new S(w.ErrInvalidArgument,"text node cannot be merged");const r=_1(t,e);for(const i of r){const{fromPath:s,toPath:o,content:a}=i,l=this.tree.pathToPos(s),c=this.tree.pathToPos(o);this.editInternal(l,c,a??[],0)}}styleByPath(e,t){if(!this.context||!this.tree)throw new S(w.ErrNotInitialized,"Tree is not initialized yet");if(!e.length)throw new S(w.ErrInvalidArgument,"path should not be empty");const[r,i]=this.tree.pathToPosRange(e),s=this.context.issueTimeTicket(),o=t?ys(t):void 0,[a]=this.tree.style([r,i],o,s);for(const l of a)this.context.registerGCPair(l);this.context.push(vr.create(this.tree.getCreatedAt(),r,i,o?new Map(Object.entries(o)):new Map,s))}style(e,t,r){if(!this.context||!this.tree)throw new S(w.ErrNotInitialized,"Tree is not initialized yet");if(e>t)throw new S(w.ErrInvalidArgument,"from should be less than or equal to to");const i=this.tree.findPos(e),s=this.tree.findPos(t),o=this.context.issueTimeTicket(),a=r?ys(r):void 0,[l]=this.tree.style([i,s],a,o);for(const c of l)this.context.registerGCPair(c);this.context.push(vr.create(this.tree.getCreatedAt(),i,s,a?new Map(Object.entries(a)):new Map,o))}removeStyle(e,t,r){if(!this.context||!this.tree)throw new S(w.ErrNotInitialized,"Tree is not initialized yet");if(e>t)throw new S(w.ErrInvalidArgument,"from should be less than or equal to to");const i=this.tree.findPos(e),s=this.tree.findPos(t),o=this.context.issueTimeTicket(),[a]=this.tree.removeStyle([i,s],r,o);for(const l of a)this.context.registerGCPair(l);this.context.push(vr.createTreeRemoveStyleOperation(this.tree.getCreatedAt(),i,s,r,o))}editInternal(e,t,r,i=0){var l;if(r.length!==0&&r[0]&&(cg(r),r[0].type!==sn))for(const c of r){const{children:d=[]}=c;cg(d)}const s=this.context.getLastTimeTicket();let o=new Array;if(((l=r[0])==null?void 0:l.type)===sn){let c="";for(const d of r){const{value:h}=d;c+=h}o.push(Ze.create(xe.of(this.context.issueTimeTicket(),0),sn,c))}else o=r.map(c=>c&&G1(this.context,c)).filter(c=>c);const[,a]=this.tree.edit([e,t],o.length?o.map(c=>c==null?void 0:c.deepcopy()):void 0,i,s,()=>this.context.issueTimeTicket());for(const c of a)this.context.registerGCPair(c);return this.context.push(Mo.create(this.tree.getCreatedAt(),e,t,o.length?o:void 0,i,s)),!0}editByPath(e,t,r,i=0){if(!this.context||!this.tree)throw new S(w.ErrNotInitialized,"Tree is not initialized yet");if(e.length!==t.length)throw new S(w.ErrInvalidArgument,"path length should be equal");if(!e.length||!t.length)throw new S(w.ErrInvalidArgument,"path should not be empty");const s=this.tree.pathToPos(e),o=this.tree.pathToPos(t);return this.editInternal(s,o,r?[r]:[],i)}editBulkByPath(e,t,r,i=0){if(!this.context||!this.tree)throw new S(w.ErrNotInitialized,"Tree is not initialized yet");if(e.length!==t.length)throw new S(w.ErrInvalidArgument,"path length should be equal");if(!e.length||!t.length)throw new S(w.ErrInvalidArgument,"path should not be empty");const s=this.tree.pathToPos(e),o=this.tree.pathToPos(t);return this.editInternal(s,o,r,i)}edit(e,t,r,i=0){if(!this.context||!this.tree)throw new S(w.ErrNotInitialized,"Tree is not initialized yet");if(e>t)throw new S(w.ErrInvalidArgument,"from should be less than or equal to to");const s=this.tree.findPos(e),o=this.tree.findPos(t);return this.editInternal(s,o,r?[r]:[],i)}editBulk(e,t,r,i=0){if(!this.context||!this.tree)throw new S(w.ErrNotInitialized,"Tree is not initialized yet");if(e>t)throw new S(w.ErrInvalidArgument,"from should be less than or equal to to");const s=this.tree.findPos(e),o=this.tree.findPos(t);return this.editInternal(s,o,r,i)}toXML(){if(!this.context||!this.tree)throw new S(w.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toXML()}toJSON(){if(!this.context||!this.tree)throw new S(w.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toJSON()}toJSForTest(){if(!this.context||!this.tree)throw new S(w.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toJSForTest()}toJSInfoForTest(){if(!this.context||!this.tree)throw new S(w.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toJSInfoForTest()}getRootTreeNode(){if(!this.context||!this.tree)throw new S(w.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getRootTreeNode()}indexToPath(e){if(!this.context||!this.tree)throw new S(w.ErrNotInitialized,"Tree is not initialized yet");return this.tree.indexToPath(e)}pathToIndex(e){if(!this.context||!this.tree)throw new S(w.ErrNotInitialized,"Tree is not initialized yet");return this.tree.pathToIndex(e)}pathRangeToPosRange(e){if(!this.context||!this.tree)throw new S(w.ErrNotInitialized,"Tree is not initialized yet");const t=[this.tree.pathToIndex(e[0]),this.tree.pathToIndex(e[1])],r=this.tree.indexRangeToPosRange(t);return[r[0].toStruct(),r[1].toStruct()]}indexRangeToPosRange(e){if(!this.context||!this.tree)throw new S(w.ErrNotInitialized,"Tree is not initialized yet");return this.tree.indexRangeToPosStructRange(e)}posRangeToIndexRange(e){if(!this.context||!this.tree)throw new S(w.ErrNotInitialized,"Tree is not initialized yet");const t=[bt.fromStruct(e[0]),bt.fromStruct(e[1])];return this.tree.posRangeToIndexRange(t)}posRangeToPathRange(e){if(!this.context||!this.tree)throw new S(w.ErrNotInitialized,"Tree is not initialized yet");const t=[bt.fromStruct(e[0]),bt.fromStruct(e[1])];return this.tree.posRangeToPathRange(t)}}function fg(n,e){return By(n,e)}function Dr(n,e){if(e){if(e instanceof ce)return e;if(e instanceof He)return By(n,e);if(e instanceof tt)return V1(n,e);if(e instanceof Et)return new fd(n,e);if(e instanceof nt){const t=new dd(ln.Int,0);return t.initialize(n,e),t}else if(e instanceof xt){const t=new md;return t.initialize(n,e),t}}else return;throw new TypeError(`Unsupported type of element: ${typeof e}`)}function fi(n,e){const t=Dr(n,e);return t instanceof ce?t.getValue():t}function Tl(n,e,t){let r;if(ce.isSupport(e))r=ce.of(e,t);else if(Array.isArray(e))r=tt.create(t,oe.buildArrayElements(n,e));else if(typeof e=="object")e instanceof fd?(r=Et.create(ws.create(),t),e.initialize(n,r)):e instanceof dd?(r=nt.create(e.getValueType(),e.getValue(),t),e.initialize(n,r)):e instanceof md?(r=xt.create(e.buildRoot(n),t),e.initialize(n,r)):r=He.create(t,Po.buildObjectMembers(n,e));else throw new TypeError(`Unsupported type of value: ${typeof e}`);return r}class xu{constructor(e,t){u(this,"context");u(this,"presence");this.context=e,this.presence=t}set(e,t){for(const r of Object.keys(e))this.presence[r]=e[r];this.context.setPresenceChange({type:an.Put,presence:Dt(this.presence)}),this.context.setReversePresence(e,t)}get(e){return this.presence[e]}clear(){this.presence={},this.context.setPresenceChange({type:an.Clear})}}const dg=50;class Y1{constructor(){u(this,"undoStack",[]);u(this,"redoStack",[])}hasUndo(){return this.undoStack.length>0}hasRedo(){return this.redoStack.length>0}pushUndo(e){this.undoStack.length>=dg&&this.undoStack.shift(),this.undoStack.push(e)}popUndo(){return this.undoStack.pop()}pushRedo(e){this.redoStack.length>=dg&&this.redoStack.shift(),this.redoStack.push(e)}popRedo(){return this.redoStack.pop()}clearRedo(){this.redoStack=[]}getUndoStackForTest(){return this.undoStack}getRedoStackForTest(){return this.redoStack}}const Q1="yorkie-devtools-panel",X1="yorkie-devtools-sdk";function Z1(n){return[Ae.StatusChanged,Ae.Snapshot,Ae.LocalChange,Ae.RemoteChange,Ae.Initialized,Ae.Watched,Ae.Unwatched,Ae.PresenceChanged].includes(n.type)}function eT(n){return n.every(Z1)}let bi="disconnected";const hg=new Map,xa=new Map;typeof window<"u"&&(window.docEventsForReplayByDocKey=xa);function la(n,e){(e!=null&&e.force||bi!=="disconnected")&&window.postMessage({source:X1,...n},"*")}function tT(n){if(!n.isEnableDevtools()||typeof window>"u"||hg.has(n.getKey()))return;xa.set(n.getKey(),[]);const e=n.subscribe("all",t=>{eT(t)&&(xa.get(n.getKey()).push(t),bi==="synced"&&la({msg:"doc::sync::partial",docKey:n.getKey(),event:t}))});hg.set(n.getKey(),[e]),la({msg:"refresh-devtools"},{force:!0}),window.addEventListener("message",t=>{var i;if(((i=t.data)==null?void 0:i.source)!==Q1)return;switch(t.data.msg){case"devtools::connect":if(bi!=="disconnected")break;bi="connected",la({msg:"doc::available",docKey:n.getKey()}),z.info(`[YD] Devtools connected. Doc: ${n.getKey()}`);break;case"devtools::disconnect":bi="disconnected",z.info(`[YD] Devtools disconnected. Doc: ${n.getKey()}`);break;case"devtools::subscribe":bi="synced",la({msg:"doc::sync::full",docKey:n.getKey(),events:xa.get(n.getKey())}),z.info(`[YD] Devtools subscribed. Doc: ${n.getKey()}`);break}})}var Or=(n=>(n.Detached="detached",n.Attached="attached",n.Removed="removed",n))(Or||{}),Ae=(n=>(n.StatusChanged="status-changed",n.ConnectionChanged="connection-changed",n.SyncStatusChanged="sync-status-changed",n.Snapshot="snapshot",n.LocalChange="local-change",n.RemoteChange="remote-change",n.Initialized="initialized",n.Watched="watched",n.Unwatched="unwatched",n.PresenceChanged="presence-changed",n.Broadcast="broadcast",n.LocalBroadcast="local-broadcast",n.AuthError="auth-error",n))(Ae||{}),Yc=(n=>(n.Connected="connected",n.Disconnected="disconnected",n))(Yc||{}),Qc=(n=>(n.Synced="synced",n.SyncFailed="sync-failed",n))(Qc||{});class zy{constructor(e,t){u(this,"key");u(this,"status");u(this,"opts");u(this,"changeID");u(this,"checkpoint");u(this,"localChanges");u(this,"root");u(this,"clone");u(this,"eventStream");u(this,"eventStreamObserver");u(this,"onlineClients");u(this,"presences");u(this,"history");u(this,"internalHistory");u(this,"isUpdating");this.opts=t||{},this.key=e,this.status="detached",this.root=No.create(),this.changeID=XS,this.checkpoint=ZS,this.localChanges=[],this.eventStream=j1(r=>{this.eventStreamObserver=r}),this.onlineClients=new Set,this.presences=new Map,this.isUpdating=!1,this.internalHistory=new Y1,this.history={canUndo:this.canUndo.bind(this),canRedo:this.canRedo.bind(this),undo:this.undo.bind(this),redo:this.redo.bind(this)},tT(this)}update(e,t){if(this.getStatus()==="removed")throw new S(w.ErrDocumentRemoved,`${this.key} is removed`);this.ensureClone();const r=this.changeID.getActorID(),i=Gi.create(this.changeID,this.clone.root,this.clone.presences.get(r)||{},t);try{const s=fg(i,this.clone.root.getObject());this.presences.has(r)||this.clone.presences.set(r,{}),this.isUpdating=!0,e(s,new xu(i,this.clone.presences.get(r)))}catch(s){throw this.clone=void 0,s}finally{this.isUpdating=!1}if(i.hasChange()){z.isEnabled($e.Trivial)&&z.trivial(`trying to update a local change: ${this.toJSON()}`);const s=i.toChange(),{opInfos:o,reverseOps:a}=s.execute(this.root,this.presences,Y.Local),l=i.getReversePresence();l&&a.push({type:"presence",value:l}),this.localChanges.push(s),a.length>0&&this.internalHistory.pushUndo(a),o.length>0&&this.internalHistory.clearRedo(),this.changeID=i.getNextID();const c=[];o.length>0&&c.push({type:"local-change",source:Y.Local,value:{message:s.getMessage()||"",operations:o,actor:r,clientSeq:s.getID().getClientSeq(),serverSeq:s.getID().getServerSeq()},rawChange:this.isEnableDevtools()?s.toStruct():void 0}),s.hasPresenceChange()&&c.push({type:"presence-changed",source:Y.Local,value:{clientID:r,presence:this.getPresence(r)}}),this.publish(c),z.isEnabled($e.Trivial)&&z.trivial(`after update a local change: ${this.toJSON()}`)}}subscribe(e,t,r,i){if(typeof e=="string"){if(typeof t!="function")throw new S(w.ErrInvalidArgument,"Second argument must be a callback function");if(e==="presence"){const a=t;return this.eventStream.subscribe(l=>{for(const c of l)c.type!=="initialized"&&c.type!=="watched"&&c.type!=="unwatched"&&c.type!=="presence-changed"||a(c)},r,i)}if(e==="my-presence"){const a=t;return this.eventStream.subscribe(l=>{for(const c of l)c.type!=="initialized"&&c.type!=="presence-changed"||c.type==="presence-changed"&&c.value.clientID!==this.changeID.getActorID()||a(c)},r,i)}if(e==="others"){const a=t;return this.eventStream.subscribe(l=>{for(const c of l)c.type!=="watched"&&c.type!=="unwatched"&&c.type!=="presence-changed"||c.value.clientID!==this.changeID.getActorID()&&a(c)},r,i)}if(e==="connection"){const a=t;return this.eventStream.subscribe(l=>{for(const c of l)c.type==="connection-changed"&&a(c)},r,i)}if(e==="status"){const a=t;return this.eventStream.subscribe(l=>{for(const c of l)c.type==="status-changed"&&a(c)},r,i)}if(e==="sync"){const a=t;return this.eventStream.subscribe(l=>{for(const c of l)c.type==="sync-status-changed"&&a(c)},r,i)}if(e==="local-broadcast"){const a=t;return this.eventStream.subscribe(l=>{for(const c of l)c.type==="local-broadcast"&&a(c)},r)}if(e==="broadcast"){const a=t;return this.eventStream.subscribe(l=>{for(const c of l)c.type==="broadcast"&&a(c)},r)}if(e==="auth-error"){const a=t;return this.eventStream.subscribe(l=>{for(const c of l)c.type==="auth-error"&&a(c)},r)}if(e==="all"){const a=t;return this.eventStream.subscribe(a,r,i)}const s=e,o=t;return this.eventStream.subscribe(a=>{for(const l of a){if(l.type!=="local-change"&&l.type!=="remote-change")continue;const c=[];for(const d of l.value.operations)this.isSameElementOrChildOf(d.path,s)&&c.push(d);c.length&&o({...l,value:{...l.value,operations:c}})}},r,i)}if(typeof e=="function"){const s=e,o=t,a=r;return this.eventStream.subscribe(l=>{for(const c of l)c.type!=="snapshot"&&c.type!=="local-change"&&c.type!=="remote-change"||s(c)},o,a)}throw new S(w.ErrInvalidArgument,`"${e}" is not a valid`)}publish(e){this.eventStreamObserver&&this.eventStreamObserver.next(e)}isSameElementOrChildOf(e,t){if(t===e)return!0;const r=e.split(".");return t.split(".").every((s,o)=>s===r[o])}removePushedLocalChanges(e){for(;this.localChanges.length&&!(this.localChanges[0].getID().getClientSeq()>e);)this.localChanges.shift()}applyChangePack(e){const t=e.hasSnapshot();t?this.applySnapshot(e.getCheckpoint().getServerSeq(),e.getVersionVector(),e.getSnapshot(),e.getCheckpoint().getClientSeq()):(this.applyChanges(e.getChanges(),Y.Remote),this.removePushedLocalChanges(e.getCheckpoint().getClientSeq())),this.checkpoint=this.checkpoint.forward(e.getCheckpoint()),t||this.garbageCollect(e.getVersionVector()),e.getIsRemoved()&&this.applyStatus("removed"),z.isEnabled($e.Trivial)&&z.trivial(`${this.root.toJSON()}`)}getCheckpoint(){return this.checkpoint}getChangeID(){return this.changeID}hasLocalChanges(){return this.localChanges.length>0}ensureClone(){this.clone||(this.clone={root:this.root.deepcopy(),presences:Dt(this.presences)})}createChangePack(){const e=Array.from(this.localChanges),t=this.checkpoint.increaseClientSeq(e.length);return Vl.create(this.key,t,!1,e,this.getVersionVector())}setActor(e){for(const t of this.localChanges)t.setActor(e);this.changeID=this.changeID.setActor(e)}isEnableDevtools(){return!!this.opts.enableDevtools}getKey(){return this.key}getStatus(){return this.status}getCloneRoot(){if(this.clone)return this.clone.root.getObject()}getRoot(){this.ensureClone();const e=Gi.create(this.changeID.next(),this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});return fg(e,this.clone.root.getObject())}getDocSize(){return this.root.getDocSize()}garbageCollect(e){return this.opts.disableGC?0:(this.clone&&this.clone.root.garbageCollect(e),this.root.garbageCollect(e))}getRootObject(){return this.root.getObject()}getGarbageLen(){return this.root.getGarbageLen()}getGarbageLenFromClone(){return this.clone.root.getGarbageLen()}toJSON(){return this.root.toJSON()}toSortedJSON(){return this.root.toSortedJSON()}getStats(){return this.root.getStats()}toJSForTest(){return{...this.getRoot().toJSForTest(),key:"root"}}applySnapshot(e,t,r,i=-1){const{root:s,presences:o}=de.bytesToSnapshot(r);this.root=new No(s),this.presences=o,this.changeID=this.changeID.setClocks(t.maxLamport(),t),this.clone=void 0,this.removePushedLocalChanges(i),this.applyChanges(this.localChanges,Y.Local),this.publish([{type:"snapshot",source:Y.Remote,value:{serverSeq:e.toString(),snapshot:this.isEnableDevtools()?de.bytesToHex(r):void 0,snapshotVector:de.versionVectorToHex(t)}}])}applyChanges(e,t){z.isEnabled($e.Debug)&&z.debug(`trying to apply ${e.length} remote changes.elements:${this.root.getElementMapSize()}, removeds:${this.root.getGarbageElementSetSize()}`),z.isEnabled($e.Trivial)&&z.trivial(e.map(r=>`${r.getID().toTestString()}	${r.toTestString()}`).join(`
`));for(const r of e)this.applyChange(r,t);z.isEnabled($e.Debug)&&z.debug(`after appling ${e.length} remote changes.elements:${this.root.getElementMapSize()},  removeds:${this.root.getGarbageElementSetSize()}`)}applyChange(e,t){this.ensureClone(),e.execute(this.clone.root,this.clone.presences,t);const r=[],i=e.getID().getActorID();if(e.hasPresenceChange()&&this.onlineClients.has(i)){const o=e.getPresenceChange();switch(o.type){case an.Put:r.push(this.presences.has(i)?{type:"presence-changed",source:t,value:{clientID:i,presence:o.presence}}:{type:"watched",source:Y.Remote,value:{clientID:i,presence:o.presence}});break;case an.Clear:r.push({type:"unwatched",source:Y.Remote,value:{clientID:i,presence:this.getPresence(i)}}),this.removeOnlineClient(i);break}}const{opInfos:s}=e.execute(this.root,this.presences,t);if(this.changeID=this.changeID.syncClocks(e.getID()),s.length>0){const o=this.isEnableDevtools()?e.toStruct():void 0;r.push(t===Y.Remote?{type:"remote-change",source:t,value:{actor:i,clientSeq:e.getID().getClientSeq(),serverSeq:e.getID().getServerSeq(),message:e.getMessage()||"",operations:s},rawChange:o}:{type:"local-change",source:t,value:{actor:i,clientSeq:e.getID().getClientSeq(),serverSeq:e.getID().getServerSeq(),message:e.getMessage()||"",operations:s},rawChange:o})}r.length>0&&this.publish(r)}applyWatchStream(e){if(e.body.case==="initialization"){const t=e.body.value.clientIds,r=new Set;for(const i of t)i!==this.changeID.getActorID()&&r.add(i);this.setOnlineClients(r),this.publish([{type:"initialized",source:Y.Local,value:this.getPresences()}]);return}if(e.body.case==="event"){const{type:t,publisher:r}=e.body.value,i=[];if(t===Si.DOCUMENT_WATCHED){if(this.onlineClients.has(r)&&this.hasPresence(r))return;this.addOnlineClient(r),this.hasPresence(r)&&i.push({type:"watched",source:Y.Remote,value:{clientID:r,presence:this.getPresence(r)}})}else if(t===Si.DOCUMENT_UNWATCHED){const s=this.getPresence(r);this.removeOnlineClient(r),s&&i.push({type:"unwatched",source:Y.Remote,value:{clientID:r,presence:s}})}else if(t===Si.DOCUMENT_BROADCAST&&e.body.value.body){const{topic:s,payload:o}=e.body.value.body,a=new TextDecoder;i.push({type:"broadcast",value:{clientID:r,topic:s,payload:JSON.parse(a.decode(o))}})}i.length>0&&this.publish(i)}}applyStatus(e){this.status=e,e==="detached"&&this.setActor(Ul),this.publish([{source:e==="removed"?Y.Remote:Y.Local,type:"status-changed",value:e==="attached"?{status:e,actorID:this.changeID.getActorID()}:{status:e}}])}applyDocEventForReplay(e){if(e.type==="status-changed"){this.applyStatus(e.value.status),e.value.status==="attached"&&this.setActor(e.value.actorID);return}if(e.type==="snapshot"){const{snapshot:t,serverSeq:r,snapshotVector:i}=e.value;if(!t)return;this.applySnapshot(BigInt(r),de.hexToVersionVector(i),de.hexToBytes(t));return}if(e.type==="local-change"||e.type==="remote-change"){if(!e.rawChange)return;const t=vs.fromStruct(e.rawChange);this.applyChange(t,e.source)}if(e.type==="initialized"){const t=new Set;for(const{clientID:r,presence:i}of e.value)t.add(r),this.presences.set(r,i);this.setOnlineClients(t);return}if(e.type==="watched"){const{clientID:t,presence:r}=e.value;this.addOnlineClient(t),this.presences.set(t,r);return}if(e.type==="unwatched"){const{clientID:t}=e.value;this.removeOnlineClient(t),this.presences.delete(t)}if(e.type==="presence-changed"){const{clientID:t,presence:r}=e.value;this.presences.set(t,r)}}applyDocEventsForReplay(e){for(const t of e)this.applyDocEventForReplay(t)}getValueByPath(e){if(!e.startsWith("$"))throw new S(w.ErrInvalidArgument,'path must start with "$"');const t=e.split(".");t.shift();let r=this.getRoot();for(const i of t)if(r=r[i],r===void 0)return;return r}setOnlineClients(e){this.onlineClients=e}resetOnlineClients(){this.onlineClients=new Set}addOnlineClient(e){this.onlineClients.add(e)}removeOnlineClient(e){this.onlineClients.delete(e)}hasPresence(e){return this.presences.has(e)}getMyPresence(){if(this.status!=="attached")return{};const e=this.presences.get(this.changeID.getActorID());return e?Dt(e):{}}getPresence(e){if(e===this.changeID.getActorID())return this.getMyPresence();if(!this.onlineClients.has(e))return;const t=this.presences.get(e);return t?Dt(t):void 0}getPresenceForTest(e){const t=this.presences.get(e);return t?Dt(t):void 0}getPresences(){const e=[];e.push({clientID:this.changeID.getActorID(),presence:Dt(this.getMyPresence())});for(const t of this.onlineClients)this.presences.has(t)&&e.push({clientID:t,presence:Dt(this.presences.get(t))});return e}getSelfForTest(){return{clientID:this.getChangeID().getActorID(),presence:this.getMyPresence()}}getOthersForTest(){const e=this.getChangeID().getActorID();return this.getPresences().filter(t=>t.clientID!==e).sort((t,r)=>t.clientID>r.clientID?1:-1)}canUndo(){return this.internalHistory.hasUndo()&&!this.isUpdating}canRedo(){return this.internalHistory.hasRedo()&&!this.isUpdating}undo(){if(this.isUpdating)throw new S(w.ErrRefused,"Undo is not allowed during an update");const e=this.internalHistory.popUndo();if(e===void 0)throw new S(w.ErrRefused,"There is no operation to be undone");this.ensureClone();const t=Gi.create(this.changeID,this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});for(const c of e){if(!(c instanceof $t)){new xu(t,Dt(this.clone.presences.get(this.changeID.getActorID()))).set(c.value,{addToHistory:!0});continue}const d=t.issueTimeTicket();c.setExecutedAt(d),t.push(c)}const r=t.toChange();r.execute(this.clone.root,this.clone.presences,Y.UndoRedo);const{opInfos:i,reverseOps:s}=r.execute(this.root,this.presences,Y.UndoRedo),o=t.getReversePresence();if(o&&s.push({type:"presence",value:o}),s.length>0&&this.internalHistory.pushRedo(s),!r.hasPresenceChange()&&i.length===0)return;this.localChanges.push(r),this.changeID=t.getNextID();const a=this.changeID.getActorID(),l=[];i.length>0&&l.push({type:"local-change",source:Y.UndoRedo,value:{message:r.getMessage()||"",operations:i,actor:a,clientSeq:r.getID().getClientSeq(),serverSeq:r.getID().getServerSeq()},rawChange:this.isEnableDevtools()?r.toStruct():void 0}),r.hasPresenceChange()&&l.push({type:"presence-changed",source:Y.UndoRedo,value:{clientID:a,presence:this.getPresence(a)}}),this.publish(l)}redo(){if(this.isUpdating)throw new S(w.ErrRefused,"Redo is not allowed during an update");const e=this.internalHistory.popRedo();if(e===void 0)throw new S(w.ErrRefused,"There is no operation to be redone");this.ensureClone();const t=Gi.create(this.changeID,this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});for(const c of e){if(!(c instanceof $t)){new xu(t,Dt(this.clone.presences.get(this.changeID.getActorID()))).set(c.value,{addToHistory:!0});continue}const d=t.issueTimeTicket();c.setExecutedAt(d),t.push(c)}const r=t.toChange();r.execute(this.clone.root,this.clone.presences,Y.UndoRedo);const{opInfos:i,reverseOps:s}=r.execute(this.root,this.presences,Y.UndoRedo),o=t.getReversePresence();if(o&&s.push({type:"presence",value:o}),s.length>0&&this.internalHistory.pushUndo(s),!r.hasPresenceChange()&&i.length===0)return;this.localChanges.push(r),this.changeID=t.getNextID();const a=this.changeID.getActorID(),l=[];i.length>0&&l.push({type:"local-change",source:Y.UndoRedo,value:{message:r.getMessage()||"",operations:i,actor:a,clientSeq:r.getID().getClientSeq(),serverSeq:r.getID().getServerSeq()},rawChange:this.isEnableDevtools()?r.toStruct():void 0}),r.hasPresenceChange()&&l.push({type:"presence-changed",source:Y.UndoRedo,value:{clientID:a,presence:this.getPresence(a)}}),this.publish(l)}getUndoStackForTest(){return this.internalHistory.getUndoStackForTest()}getRedoStackForTest(){return this.internalHistory.getRedoStackForTest()}broadcast(e,t,r){const i={type:"local-broadcast",value:{topic:e,payload:t},options:r};this.publish([i])}getVersionVector(){return this.changeID.getVersionVector()}}function nT(n,e){let t=e;return{authInterceptor:s=>async o=>(n&&o.header.set("x-api-key",n),t&&o.header.set("authorization",t),await s(o)),setToken:s=>{t=s}}}const rT="@yorkie-js/sdk",iT="0.6.12",gg={name:rT,version:iT};function sT(n){return e=>async t=>(n?t.header.set("x-yorkie-user-agent",n):t.header.set("x-yorkie-user-agent",gg.name+"/"+gg.version),await e(t))}const oT=n=>{try{if(JSON.stringify(n)===void 0)return!1}catch{return!1}return!0};var Na=(n=>(n.Manual="manual",n.Realtime="realtime",n.RealtimePushOnly="realtime-pushonly",n.RealtimeSyncOff="realtime-syncoff",n))(Na||{});const bs={rpcAddr:"https://api.yorkie.dev",syncLoopDuration:50,retrySyncLoopDelay:1e3,reconnectStreamDelay:1e3},Nu={maxRetries:1/0,initialRetryInterval:1e3,maxBackoff:2e4};class Fy{constructor(e){u(this,"id");u(this,"key");u(this,"metadata");u(this,"status");u(this,"attachmentMap");u(this,"apiKey");u(this,"authTokenInjector");u(this,"conditions");u(this,"syncLoopDuration");u(this,"reconnectStreamDelay");u(this,"retrySyncLoopDelay");u(this,"rpcClient");u(this,"setAuthToken");u(this,"taskQueue");u(this,"processing",!1);u(this,"keepalive",!1);e=e||bs;const t=e.rpcAddr||bs.rpcAddr;this.key=e.key||Ly(),this.metadata=e.metadata||{},this.status="deactivated",this.attachmentMap=new Map,this.apiKey=e.apiKey||"",this.authTokenInjector=e.authTokenInjector,this.conditions={SyncLoop:!1,WatchLoop:!1},this.syncLoopDuration=e.syncLoopDuration??bs.syncLoopDuration,this.reconnectStreamDelay=e.reconnectStreamDelay??bs.reconnectStreamDelay,this.retrySyncLoopDelay=e.retrySyncLoopDelay??bs.retrySyncLoopDelay;const{authInterceptor:r,setToken:i}=nT(this.apiKey);this.setAuthToken=i,this.rpcClient=fS(BS,LS({baseUrl:t,interceptors:[r,sT(e==null?void 0:e.userAgent)],fetch:(s,o)=>{const a={...o,keepalive:this.keepalive};return fetch(s,a)}})),this.taskQueue=[]}async activate(){if(this.isActive())return Promise.resolve();if(this.authTokenInjector){const e=await this.authTokenInjector();this.setAuthToken(e)}return this.enqueueTask(async()=>{try{const e=await this.rpcClient.activateClient({clientKey:this.key,metadata:this.metadata},{headers:{"x-shard-key":this.apiKey}});this.id=e.clientId,this.status="activated",this.runSyncLoop(),z.info(`[AC] c:"${this.getKey()}" activated, id:"${this.id}"`),typeof window<"u"&&window.addEventListener("beforeunload",async()=>{await this.deactivate({keepalive:!0})})}catch(e){throw z.error(`[AC] c:"${this.getKey()}" err :`,e),await this.handleConnectError(e),e}})}deactivate(e={keepalive:!1}){if(this.status==="deactivated")return Promise.resolve();const t=async()=>{try{await this.rpcClient.deactivateClient({clientId:this.id},{headers:{"x-shard-key":this.apiKey}}),this.deactivateInternal(),z.info(`[DC] c"${this.getKey()}" deactivated`)}catch(r){throw z.error(`[DC] c:"${this.getKey()}" err :`,r),await this.handleConnectError(r),r}};if(e.keepalive){this.keepalive=!0;const r=t();return this.keepalive=!1,r}return this.enqueueTask(t)}hasDocument(e){return this.attachmentMap.has(e)}attach(e,t={}){if(!this.isActive())throw new S(w.ErrClientNotActivated,`${this.key} is not active`);if(e.getStatus()!==Or.Detached)throw new S(w.ErrDocumentNotDetached,`${e.getKey()} is not detached`);e.setActor(this.id),e.update((s,o)=>o.set(t.initialPresence||{}));const r=e.subscribe("local-broadcast",async s=>{var d;const{topic:o,payload:a}=s.value,l=(d=s.options)==null?void 0:d.error,c=s.options;try{await this.broadcast(e.getKey(),o,a,c)}catch(h){h instanceof Error&&(l==null||l(h))}}),i=t.syncMode??"realtime";return this.enqueueTask(async()=>{try{const s=await this.rpcClient.attachDocument({clientId:this.id,changePack:de.toChangePack(e.createChangePack())},{headers:{"x-shard-key":`${this.apiKey}/${e.getKey()}`}}),o=de.fromChangePack(s.changePack);if(e.applyChangePack(o),e.getStatus()===Or.Removed)return e;e.applyStatus(Or.Attached),this.attachmentMap.set(e.getKey(),new $1(this.reconnectStreamDelay,e,s.documentId,i,r)),i!=="manual"&&await this.runWatchLoop(e.getKey()),z.info(`[AD] c:"${this.getKey()}" attaches d:"${e.getKey()}"`);const a=e.getRootObject();if(t.initialRoot){const l=t.initialRoot;e.update(c=>{for(const[d,h]of Object.entries(l))if(!a.has(d)){const g=d;c[g]=h}})}return e}catch(s){throw z.error(`[AD] c:"${this.getKey()}" err :`,s),await this.handleConnectError(s),s}})}detach(e,t={keepalive:!1}){if(!this.isActive())throw new S(w.ErrClientNotActivated,`${this.key} is not active`);const r=this.attachmentMap.get(e.getKey());if(!r)throw new S(w.ErrDocumentNotAttached,`${e.getKey()} is not attached`);e.update((s,o)=>o.clear());const i=async()=>{try{const s=await this.rpcClient.detachDocument({clientId:this.id,documentId:r.docID,changePack:de.toChangePack(e.createChangePack()),removeIfNotAttached:t.removeIfNotAttached??!1},{headers:{"x-shard-key":`${this.apiKey}/${e.getKey()}`}}),o=de.fromChangePack(s.changePack);return e.applyChangePack(o),e.getStatus()!==Or.Removed&&e.applyStatus(Or.Detached),this.detachInternal(e.getKey()),z.info(`[DD] c:"${this.getKey()}" detaches d:"${e.getKey()}"`),e}catch(s){throw z.error(`[DD] c:"${this.getKey()}" err :`,s),await this.handleConnectError(s),s}};if(t.keepalive){this.keepalive=!0;const s=i();return this.keepalive=!1,s}return this.enqueueTask(i)}async changeSyncMode(e,t){if(!this.isActive())throw new S(w.ErrClientNotActivated,`${this.key} is not active`);const r=this.attachmentMap.get(e.getKey());if(!r)throw new S(w.ErrDocumentNotAttached,`${e.getKey()} is not attached`);const i=r.syncMode;return i===t?e:(r.changeSyncMode(t),t==="manual"?(r.cancelWatchStream(),e):(t==="realtime"&&(r.remoteChangeEventReceived=!0),i==="manual"&&await this.runWatchLoop(e.getKey()),e))}sync(e){if(!this.isActive())throw new S(w.ErrClientNotActivated,`${this.key} is not active`);if(e){const t=this.attachmentMap.get(e.getKey());if(!t)throw new S(w.ErrDocumentNotAttached,`${e.getKey()} is not attached`);return this.enqueueTask(async()=>this.syncInternal(t,"realtime").catch(async r=>{throw z.error(`[SY] c:"${this.getKey()}" err :`,r),await this.handleConnectError(r),r}))}return this.enqueueTask(async()=>{const t=[];for(const[,r]of this.attachmentMap)t.push(this.syncInternal(r,r.syncMode));return Promise.all(t).catch(async r=>{throw z.error(`[SY] c:"${this.getKey()}" err :`,r),await this.handleConnectError(r),r})})}remove(e){if(!this.isActive())throw new S(w.ErrClientNotActivated,`${this.key} is not active`);const t=this.attachmentMap.get(e.getKey());if(!t)throw new S(w.ErrDocumentNotAttached,`${e.getKey()} is not attached`);e.setActor(this.id);const r=de.toChangePack(e.createChangePack());return r.isRemoved=!0,this.enqueueTask(async()=>{try{const i=await this.rpcClient.removeDocument({clientId:this.id,documentId:t.docID,changePack:r},{headers:{"x-shard-key":`${this.apiKey}/${e.getKey()}`}}),s=de.fromChangePack(i.changePack);e.applyChangePack(s),this.detachInternal(e.getKey()),z.info(`[RD] c:"${this.getKey()}" removes d:"${e.getKey()}"`)}catch(i){throw z.error(`[RD] c:"${this.getKey()}" err :`,i),await this.handleConnectError(i),i}})}getID(){return this.id}getKey(){return this.key}isActive(){return this.status==="activated"}getStatus(){return this.status}getCondition(e){return this.conditions[e]}broadcast(e,t,r,i){if(!this.isActive())throw new S(w.ErrClientNotActivated,`${this.key} is not active`);const s=this.attachmentMap.get(e);if(!s)throw new S(w.ErrDocumentNotAttached,`${e} is not attached`);if(!oT(r))throw new S(w.ErrInvalidArgument,"payload is not serializable");const o=(i==null?void 0:i.maxRetries)??Nu.maxRetries,a=Nu.maxBackoff;let l=0;const c=h=>Math.min(Nu.initialRetryInterval*2**h,a),d=async()=>this.enqueueTask(async()=>{try{await this.rpcClient.broadcast({clientId:this.id,documentId:s.docID,topic:t,payload:new TextEncoder().encode(JSON.stringify(r))},{headers:{"x-shard-key":`${this.apiKey}/${e}`}}),z.info(`[BC] c:"${this.getKey()}" broadcasts d:"${e}" t:"${t}"`)}catch(h){if(z.error(`[BC] c:"${this.getKey()}" err:`,h),await this.handleConnectError(h))if(h instanceof _&&Cr(h)===w.ErrUnauthenticated&&s.doc.publish([{type:Ae.AuthError,value:{reason:$s(h).reason,method:"Broadcast"}}]),l<o)l++,setTimeout(()=>d(),c(l-1)),z.info(`[BC] c:"${this.getKey()}" retry attempt ${l}/${o}`);else throw z.error(`[BC] c:"${this.getKey()}" exceeded maximum retry attempts`),h;else throw h}});return d()}runSyncLoop(){const e=()=>{if(!this.isActive()){z.debug(`[SL] c:"${this.getKey()}" exit sync loop`),this.conditions.SyncLoop=!1;return}const t=[];for(const[,r]of this.attachmentMap)r.needRealtimeSync()&&(r.remoteChangeEventReceived=!1,t.push(this.syncInternal(r,r.syncMode).catch(async i=>{throw i instanceof _&&Cr(i)===w.ErrUnauthenticated&&r.doc.publish([{type:Ae.AuthError,value:{reason:$s(i).reason,method:"PushPull"}}]),i})));Promise.all(t).then(()=>setTimeout(e,this.syncLoopDuration)).catch(async r=>{z.error(`[SL] c:"${this.getKey()}" sync failed:`,r),await this.handleConnectError(r)?setTimeout(e,this.retrySyncLoopDelay):this.conditions.SyncLoop=!1})};z.debug(`[SL] c:"${this.getKey()}" run sync loop`),this.conditions.SyncLoop=!0,e()}async runWatchLoop(e){const t=this.attachmentMap.get(e);if(!t)throw new S(w.ErrDocumentNotAttached,`${e} is not attached`);return this.conditions.WatchLoop=!0,t.runWatchLoop(r=>{if(!this.isActive())return this.conditions.WatchLoop=!1,Promise.reject(new S(w.ErrClientNotActivated,`${this.key} is not active`));const i=new AbortController,s=this.rpcClient.watchDocument({clientId:this.id,documentId:t.docID},{headers:{"x-shard-key":`${this.apiKey}/${e}`},signal:i.signal});return t.doc.publish([{type:Ae.ConnectionChanged,value:Yc.Connected}]),z.info(`[WD] c:"${this.getKey()}" watches d:"${e}"`),new Promise((o,a)=>{(async()=>{try{for await(const c of s)this.handleWatchDocumentsResponse(t,c),c.body.case==="initialization"&&o([s,i])}catch(c){t.doc.resetOnlineClients(),t.doc.publish([{type:Ae.Initialized,source:Y.Local,value:t.doc.getPresences()}]),t.doc.publish([{type:Ae.ConnectionChanged,value:Yc.Disconnected}]),z.debug(`[WD] c:"${this.getKey()}" unwatches`),await this.handleConnectError(c)?(c instanceof _&&Cr(c)===w.ErrUnauthenticated&&t.doc.publish([{type:Ae.AuthError,value:{reason:$s(c).reason,method:"WatchDocuments"}}]),r()):this.conditions.WatchLoop=!1,a(c)}})()})})}handleWatchDocumentsResponse(e,t){if(t.body.case==="event"&&t.body.value.type===Si.DOCUMENT_CHANGED){e.remoteChangeEventReceived=!0;return}e.doc.applyWatchStream(t)}deactivateInternal(){this.status="deactivated";for(const[e,t]of this.attachmentMap)this.detachInternal(e),t.doc.applyStatus(Or.Detached)}detachInternal(e){const t=this.attachmentMap.get(e);t&&(t.cancelWatchStream(),t.unsubscribeBroadcastEvent(),this.attachmentMap.delete(e))}async syncInternal(e,t){const{doc:r,docID:i}=e,s=r.createChangePack();try{const o=await this.rpcClient.pushPullChanges({clientId:this.id,documentId:i,changePack:de.toChangePack(s),pushOnly:t==="realtime-pushonly"},{headers:{"x-shard-key":`${this.apiKey}/${r.getKey()}`}}),a=de.fromChangePack(o.changePack);if(a.hasChanges()&&(e.syncMode==="realtime-pushonly"||e.syncMode==="realtime-syncoff"))return r;r.applyChangePack(a),e.doc.publish([{type:Ae.SyncStatusChanged,value:Qc.Synced}]),r.getStatus()===Or.Removed&&this.detachInternal(r.getKey());const l=r.getKey(),c=a.getChangeSize();return z.info(`[PP] c:"${this.getKey()}" sync d:"${l}", push:${s.getChangeSize()} pull:${c} cp:${a.getCheckpoint().toTestString()}`),r}catch(o){throw r.publish([{type:Ae.SyncStatusChanged,value:Qc.SyncFailed}]),z.error(`[PP] c:"${this.getKey()}" err :`,o),o}}async handleConnectError(e){if(!(e instanceof _))return!1;if(e.code===V.Canceled||e.code===V.Unknown||e.code===V.ResourceExhausted||e.code===V.Unavailable)return!0;if(Cr(e)===w.ErrUnauthenticated){if(this.authTokenInjector){const t=await this.authTokenInjector($s(e).reason);this.setAuthToken(t)}return!0}return Cr(e)===w.ErrTooManySubscribers?(z.error(`[WD] c:"${this.getKey()}" err :`,e.rawMessage),!0):(Cr(e)===w.ErrTooManyAttachments||(Cr(e)===w.ErrClientNotActivated||Cr(e)===w.ErrClientNotFound)&&this.deactivateInternal(),!1)}enqueueTask(e){return new Promise((t,r)=>{this.taskQueue.push(()=>e().then(t).catch(r)),this.processing||this.processNext()})}async processNext(){if(this.taskQueue.length===0){this.processing=!1;return}try{this.processing=!0,await this.taskQueue.shift()()}catch{z.error(`[TQ] c:"${this.getKey()}" process failed, id:"${this.id}"`)}this.processNext()}}const My={Client:Fy,Document:zy,IntType:ln.Int,LongType:ln.Long};typeof globalThis<"u"&&(globalThis.yorkie={Client:Fy,Document:zy,Primitive:ce,Text:fd,Counter:dd,Tree:md,LogLevel:$e,setLogLevel:J1,IntType:ln.Int,LongType:ln.Long});class aT{constructor(e,t){this.x=e,this.y=t,this.lifetime=0}}const lT=({xPos:n,yPos:e})=>{const[t,r]=Ue.useState([]),i=Ue.useRef(null),[s,o]=Ue.useState([]),a=(l,c)=>{const d=new aT(l,c);s.push(d),o(s),t.push(d),r(t)};return Ue.useEffect(()=>{const c=i.current.getContext("2d"),d=()=>{c.clearRect(0,0,c.canvas.width,c.canvas.height);const h=.7*(1*4e3)/60;for(let g=0;g<s.length;++g){const p=s[g];let T;if(s[g-1]!==void 0?T=s[g-1]:T=p,p.lifetime+=1,p.lifetime>h)s.shift();else{c.lineWidth=5,c.lineJoin="round";const k=0,C=0,y=0;c.strokeStyle=`rgb(${k},${C},${y})`,c.beginPath(),c.moveTo(T.x,T.y),c.lineTo(p.x,p.y),c.stroke(),c.closePath()}}requestAnimationFrame(d)};d()},[s]),Ue.useEffect(()=>{a(n,e)},[n,e]),ue.jsx("canvas",{className:"pen-cursor-canvas",ref:i,width:document.body.clientWidth,height:document.body.clientHeight})},uT="_goUp0_1lnal_1",cT="_goUpAnimation0_1lnal_1",fT="_fadeOut_1lnal_1",dT="_goUp1_1lnal_16",hT="_goUpAnimation1_1lnal_1",gT="_goUp2_1lnal_31",mT="_goUpAnimation2_1lnal_1",pT="_leftRight0_1lnal_46",yT="_leftRightAnimation0_1lnal_1",vT="_leftRight1_1lnal_60",wT="_leftRightAnimation1_1lnal_1",ST="_leftRight2_1lnal_74",TT="_leftRightAnimation2_1lnal_1",Pu={goUp0:uT,goUpAnimation0:cT,fadeOut:fT,goUp1:dT,goUpAnimation1:hT,goUp2:gT,goUpAnimation2:mT,leftRight0:pT,leftRightAnimation0:yT,leftRight1:vT,leftRightAnimation1:wT,leftRight2:ST,leftRightAnimation2:TT};function kT({x:n,y:e,timestamp:t,selectedCursorShape:r}){return ue.jsx("div",{className:"single-animation-container",children:ue.jsx("div",{className:`absolute select-none pointer-events-none ${Pu.disappear} text-${t%5+2}xl ${Pu["goUp"+t%3]}`,style:{left:n,top:e},children:ue.jsx("div",{className:Pu["leftRight"+t%3],children:ue.jsx("div",{className:"transform -translate-x-1/2 -translate-y-1/2",children:ue.jsx("img",{src:`./icons/icon_${r}.svg`})})})})})}function mg(n,e){const t=Ue.useRef(n);Ue.useEffect(()=>{t.current=n},[n]),Ue.useEffect(()=>{function r(){t.current()}if(e!==null){let i=setInterval(r,e);return()=>clearInterval(i)}},[e])}const IT=({pointerDown:n,xPos:e,yPos:t,selectedCursorShape:r})=>{const[i,s]=Ue.useState([]),o=100;return mg(()=>{s(a=>a.filter(l=>l.timestamp>Date.now()-4e3))},1e3),mg(()=>{n&&s(a=>a.concat([{point:{x:e,y:t},timestamp:Date.now()}]))},o),ue.jsx("div",{style:{transform:`translateX(${e}px) translateY(${t}px)`},children:i.map(a=>ue.jsx(kT,{x:a.point.x,y:a.point.y,timestamp:a.timestamp,selectedCursorShape:r},a.timestamp.toString()))})},AT=({selectedCursorShape:n,x:e,y:t,pointerDown:r})=>ue.jsxs(ue.Fragment,{children:[ue.jsx("img",{src:`./icons/icon_${n}.svg`,className:`${n}-cursor`,style:{transform:`translate3d(${e}px, ${t}px, 0)`}}),(n==="heart"||n==="thumbs")&&ue.jsx(IT,{pointerDown:r,xPos:e,yPos:t,selectedCursorShape:n}),n==="pen"&&r&&ue.jsx(lT,{xPos:e,yPos:t})]}),ET=({handleCursorShapeSelect:n,clientsLength:e})=>{const[t,r]=Ue.useState("cursor"),i=["heart","thumbs","pen","cursor"];return ue.jsxs("div",{className:"cursor-selector-container",children:[ue.jsx("div",{className:"cursor-selections-container",children:i.map(s=>ue.jsx("img",{onClick:()=>{n(s),r(s)},className:`${t===s?"cursor-shape-selected":"cursor-shape-not-selected"}`,src:`./icons/icon_${s}.svg`},s))}),ue.jsx("div",{className:"num-users-container",children:ue.jsx("p",{children:e!==1?`${e} users are here`:"1 user here"})})]})},pg=new My.Client({rpcAddr:"https://api.yorkie.dev",apiKey:"cedaovjuioqlk4pjqn6g"}),ai=new My.Document("simultaneous-cursors",{enableDevtools:!0}),xT=()=>{const[n,e]=Ue.useState([]),t=r=>{ai.update((i,s)=>{s.set({cursorShape:r})})};return Ue.useEffect(()=>{(async()=>{await pg.activate(),ai.subscribe("presence",a=>{e(ai.getPresences())}),await pg.attach(ai,{initialPresence:{cursorShape:"cursor",cursor:{xPos:0,yPos:0},pointerDown:!1}})})();const i=()=>{ai.update((a,l)=>{l.set({pointerDown:!1})})},s=()=>{ai.update((a,l)=>{l.set({pointerDown:!0})})},o=a=>{ai.update((l,c)=>{c.set({cursor:{xPos:a.clientX,yPos:a.clientY}})})};return window.addEventListener("mousedown",s),window.addEventListener("mouseup",i),window.addEventListener("mousemove",o),()=>{window.removeEventListener("mousedown",s),window.removeEventListener("mouseup",i),window.removeEventListener("mousemove",o)}},[]),ue.jsxs("div",{className:"general-container",children:[n.map(({clientID:r,presence:{cursorShape:i,cursor:s,pointerDown:o}})=>s?ue.jsx(AT,{selectedCursorShape:i,x:s.xPos,y:s.yPos,pointerDown:o},r):null),ue.jsx(ET,{handleCursorShapeSelect:t,clientsLength:n.length})]})};Cu.createRoot(document.getElementById("root")).render(ue.jsx(xT,{}));
