var zv=Object.defineProperty;var Mv=(n,e,t)=>e in n?zv(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var l=(n,e,t)=>Mv(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();var hg={exports:{}},tu={},mg={exports:{}},G={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sa=Symbol.for("react.element"),$v=Symbol.for("react.portal"),Fv=Symbol.for("react.fragment"),Jv=Symbol.for("react.strict_mode"),Uv=Symbol.for("react.profiler"),jv=Symbol.for("react.provider"),Vv=Symbol.for("react.context"),qv=Symbol.for("react.forward_ref"),Kv=Symbol.for("react.suspense"),Wv=Symbol.for("react.memo"),Hv=Symbol.for("react.lazy"),ih=Symbol.iterator;function _v(n){return n===null||typeof n!="object"?null:(n=ih&&n[ih]||n["@@iterator"],typeof n=="function"?n:null)}var gg={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},pg=Object.assign,yg={};function Hs(n,e,t){this.props=n,this.context=e,this.refs=yg,this.updater=t||gg}Hs.prototype.isReactComponent={};Hs.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};Hs.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function vg(){}vg.prototype=Hs.prototype;function qf(n,e,t){this.props=n,this.context=e,this.refs=yg,this.updater=t||gg}var Kf=qf.prototype=new vg;Kf.constructor=qf;pg(Kf,Hs.prototype);Kf.isPureReactComponent=!0;var sh=Array.isArray,wg=Object.prototype.hasOwnProperty,Wf={current:null},Sg={key:!0,ref:!0,__self:!0,__source:!0};function kg(n,e,t){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)wg.call(e,r)&&!Sg.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=t;else if(1<a){for(var u=Array(a),c=0;c<a;c++)u[c]=arguments[c+2];i.children=u}if(n&&n.defaultProps)for(r in a=n.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:sa,type:n,key:s,ref:o,props:i,_owner:Wf.current}}function Gv(n,e){return{$$typeof:sa,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function Hf(n){return typeof n=="object"&&n!==null&&n.$$typeof===sa}function Yv(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var oh=/\/+/g;function Cu(n,e){return typeof n=="object"&&n!==null&&n.key!=null?Yv(""+n.key):e.toString(36)}function Ja(n,e,t,r,i){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case sa:case $v:o=!0}}if(o)return o=n,i=i(o),n=r===""?"."+Cu(o,0):r,sh(i)?(t="",n!=null&&(t=n.replace(oh,"$&/")+"/"),Ja(i,e,t,"",function(c){return c})):i!=null&&(Hf(i)&&(i=Gv(i,t+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(oh,"$&/")+"/")+n)),e.push(i)),1;if(o=0,r=r===""?".":r+":",sh(n))for(var a=0;a<n.length;a++){s=n[a];var u=r+Cu(s,a);o+=Ja(s,e,t,u,i)}else if(u=_v(n),typeof u=="function")for(n=u.call(n),a=0;!(s=n.next()).done;)s=s.value,u=r+Cu(s,a++),o+=Ja(s,e,t,u,i);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function pa(n,e,t){if(n==null)return n;var r=[],i=0;return Ja(n,r,"","",function(s){return e.call(t,s,i++)}),r}function Xv(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var qe={current:null},Ua={transition:null},Qv={ReactCurrentDispatcher:qe,ReactCurrentBatchConfig:Ua,ReactCurrentOwner:Wf};G.Children={map:pa,forEach:function(n,e,t){pa(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return pa(n,function(){e++}),e},toArray:function(n){return pa(n,function(e){return e})||[]},only:function(n){if(!Hf(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};G.Component=Hs;G.Fragment=Fv;G.Profiler=Uv;G.PureComponent=qf;G.StrictMode=Jv;G.Suspense=Kv;G.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Qv;G.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=pg({},n.props),i=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Wf.current),e.key!==void 0&&(i=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(u in e)wg.call(e,u)&&!Sg.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&a!==void 0?a[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=t;else if(1<u){a=Array(u);for(var c=0;c<u;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:sa,type:n.type,key:i,ref:s,props:r,_owner:o}};G.createContext=function(n){return n={$$typeof:Vv,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:jv,_context:n},n.Consumer=n};G.createElement=kg;G.createFactory=function(n){var e=kg.bind(null,n);return e.type=n,e};G.createRef=function(){return{current:null}};G.forwardRef=function(n){return{$$typeof:qv,render:n}};G.isValidElement=Hf;G.lazy=function(n){return{$$typeof:Hv,_payload:{_status:-1,_result:n},_init:Xv}};G.memo=function(n,e){return{$$typeof:Wv,type:n,compare:e===void 0?null:e}};G.startTransition=function(n){var e=Ua.transition;Ua.transition={};try{n()}finally{Ua.transition=e}};G.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};G.useCallback=function(n,e){return qe.current.useCallback(n,e)};G.useContext=function(n){return qe.current.useContext(n)};G.useDebugValue=function(){};G.useDeferredValue=function(n){return qe.current.useDeferredValue(n)};G.useEffect=function(n,e){return qe.current.useEffect(n,e)};G.useId=function(){return qe.current.useId()};G.useImperativeHandle=function(n,e,t){return qe.current.useImperativeHandle(n,e,t)};G.useInsertionEffect=function(n,e){return qe.current.useInsertionEffect(n,e)};G.useLayoutEffect=function(n,e){return qe.current.useLayoutEffect(n,e)};G.useMemo=function(n,e){return qe.current.useMemo(n,e)};G.useReducer=function(n,e,t){return qe.current.useReducer(n,e,t)};G.useRef=function(n){return qe.current.useRef(n)};G.useState=function(n){return qe.current.useState(n)};G.useSyncExternalStore=function(n,e,t){return qe.current.useSyncExternalStore(n,e,t)};G.useTransition=function(){return qe.current.useTransition()};G.version="18.2.0";mg.exports=G;var j=mg.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zv=j,e0=Symbol.for("react.element"),t0=Symbol.for("react.fragment"),n0=Object.prototype.hasOwnProperty,r0=Zv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i0={key:!0,ref:!0,__self:!0,__source:!0};function Tg(n,e,t){var r,i={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)n0.call(e,r)&&!i0.hasOwnProperty(r)&&(i[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:e0,type:n,key:s,ref:o,props:i,_owner:r0.current}}tu.Fragment=t0;tu.jsx=Tg;tu.jsxs=Tg;hg.exports=tu;var z=hg.exports,ac={},Ig={exports:{}},ct={},xg={exports:{}},Ag={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(R,q){var K=R.length;R.push(q);e:for(;0<K;){var ge=K-1>>>1,xe=R[ge];if(0<i(xe,q))R[ge]=q,R[K]=xe,K=ge;else break e}}function t(R){return R.length===0?null:R[0]}function r(R){if(R.length===0)return null;var q=R[0],K=R.pop();if(K!==q){R[0]=K;e:for(var ge=0,xe=R.length,ma=xe>>>1;ge<ma;){var Ni=2*(ge+1)-1,Eu=R[Ni],Pi=Ni+1,ga=R[Pi];if(0>i(Eu,K))Pi<xe&&0>i(ga,Eu)?(R[ge]=ga,R[Pi]=K,ge=Pi):(R[ge]=Eu,R[Ni]=K,ge=Ni);else if(Pi<xe&&0>i(ga,K))R[ge]=ga,R[Pi]=K,ge=Pi;else break e}}return q}function i(R,q){var K=R.sortIndex-q.sortIndex;return K!==0?K:R.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var u=[],c=[],d=1,h=null,m=3,p=!1,y=!1,w=!1,A=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(R){for(var q=t(c);q!==null;){if(q.callback===null)r(c);else if(q.startTime<=R)r(c),q.sortIndex=q.expirationTime,e(u,q);else break;q=t(c)}}function I(R){if(w=!1,S(R),!y)if(t(u)!==null)y=!0,Ys(N);else{var q=t(c);q!==null&&Xs(I,q.startTime-R)}}function N(R,q){y=!1,w&&(w=!1,v(O),O=-1),p=!0;var K=m;try{for(S(q),h=t(u);h!==null&&(!(h.expirationTime>q)||R&&!me());){var ge=h.callback;if(typeof ge=="function"){h.callback=null,m=h.priorityLevel;var xe=ge(h.expirationTime<=q);q=n.unstable_now(),typeof xe=="function"?h.callback=xe:h===t(u)&&r(u),S(q)}else r(u);h=t(u)}if(h!==null)var ma=!0;else{var Ni=t(c);Ni!==null&&Xs(I,Ni.startTime-q),ma=!1}return ma}finally{h=null,m=K,p=!1}}var x=!1,C=null,O=-1,M=5,J=-1;function me(){return!(n.unstable_now()-J<M)}function tt(){if(C!==null){var R=n.unstable_now();J=R;var q=!0;try{q=C(!0,R)}finally{q?Ne():(x=!1,C=null)}}else x=!1}var Ne;if(typeof g=="function")Ne=function(){g(tt)};else if(typeof MessageChannel<"u"){var Ci=new MessageChannel,Au=Ci.port2;Ci.port1.onmessage=tt,Ne=function(){Au.postMessage(null)}}else Ne=function(){A(tt,0)};function Ys(R){C=R,x||(x=!0,Ne())}function Xs(R,q){O=A(function(){R(n.unstable_now())},q)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(R){R.callback=null},n.unstable_continueExecution=function(){y||p||(y=!0,Ys(N))},n.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<R?Math.floor(1e3/R):5},n.unstable_getCurrentPriorityLevel=function(){return m},n.unstable_getFirstCallbackNode=function(){return t(u)},n.unstable_next=function(R){switch(m){case 1:case 2:case 3:var q=3;break;default:q=m}var K=m;m=q;try{return R()}finally{m=K}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(R,q){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var K=m;m=R;try{return q()}finally{m=K}},n.unstable_scheduleCallback=function(R,q,K){var ge=n.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?ge+K:ge):K=ge,R){case 1:var xe=-1;break;case 2:xe=250;break;case 5:xe=1073741823;break;case 4:xe=1e4;break;default:xe=5e3}return xe=K+xe,R={id:d++,callback:q,priorityLevel:R,startTime:K,expirationTime:xe,sortIndex:-1},K>ge?(R.sortIndex=K,e(c,R),t(u)===null&&R===t(c)&&(w?(v(O),O=-1):w=!0,Xs(I,K-ge))):(R.sortIndex=xe,e(u,R),y||p||(y=!0,Ys(N))),R},n.unstable_shouldYield=me,n.unstable_wrapCallback=function(R){var q=m;return function(){var K=m;m=q;try{return R.apply(this,arguments)}finally{m=K}}}})(Ag);xg.exports=Ag;var s0=xg.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Eg=j,at=s0;function b(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Cg=new Set,Lo={};function Yi(n,e){Cs(n,e),Cs(n+"Capture",e)}function Cs(n,e){for(Lo[n]=e,n=0;n<e.length;n++)Cg.add(e[n])}var Vr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),lc=Object.prototype.hasOwnProperty,o0=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ah={},lh={};function a0(n){return lc.call(lh,n)?!0:lc.call(ah,n)?!1:o0.test(n)?lh[n]=!0:(ah[n]=!0,!1)}function l0(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function u0(n,e,t,r){if(e===null||typeof e>"u"||l0(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ke(n,e,t,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Re={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Re[n]=new Ke(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];Re[e]=new Ke(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){Re[n]=new Ke(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Re[n]=new Ke(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Re[n]=new Ke(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){Re[n]=new Ke(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){Re[n]=new Ke(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){Re[n]=new Ke(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){Re[n]=new Ke(n,5,!1,n.toLowerCase(),null,!1,!1)});var _f=/[\-:]([a-z])/g;function Gf(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(_f,Gf);Re[e]=new Ke(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(_f,Gf);Re[e]=new Ke(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(_f,Gf);Re[e]=new Ke(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){Re[n]=new Ke(n,1,!1,n.toLowerCase(),null,!1,!1)});Re.xlinkHref=new Ke("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){Re[n]=new Ke(n,1,!1,n.toLowerCase(),null,!0,!0)});function Yf(n,e,t,r){var i=Re.hasOwnProperty(e)?Re[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(u0(e,t,i,r)&&(t=null),r||i===null?a0(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):i.mustUseProperty?n[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,r=i.attributeNamespace,t===null?n.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var Gr=Eg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ya=Symbol.for("react.element"),ss=Symbol.for("react.portal"),os=Symbol.for("react.fragment"),Xf=Symbol.for("react.strict_mode"),uc=Symbol.for("react.profiler"),Ng=Symbol.for("react.provider"),Pg=Symbol.for("react.context"),Qf=Symbol.for("react.forward_ref"),cc=Symbol.for("react.suspense"),fc=Symbol.for("react.suspense_list"),Zf=Symbol.for("react.memo"),ti=Symbol.for("react.lazy"),Dg=Symbol.for("react.offscreen"),uh=Symbol.iterator;function Qs(n){return n===null||typeof n!="object"?null:(n=uh&&n[uh]||n["@@iterator"],typeof n=="function"?n:null)}var ce=Object.assign,Nu;function uo(n){if(Nu===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);Nu=e&&e[1]||""}return`
`+Nu+n}var Pu=!1;function Du(n,e){if(!n||Pu)return"";Pu=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){r=c}n.call(e.prototype)}else{try{throw Error()}catch(c){r=c}n()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var u=`
`+i[o].replace(" at new "," at ");return n.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",n.displayName)),u}while(1<=o&&0<=a);break}}}finally{Pu=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?uo(n):""}function c0(n){switch(n.tag){case 5:return uo(n.type);case 16:return uo("Lazy");case 13:return uo("Suspense");case 19:return uo("SuspenseList");case 0:case 2:case 15:return n=Du(n.type,!1),n;case 11:return n=Du(n.type.render,!1),n;case 1:return n=Du(n.type,!0),n;default:return""}}function dc(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case os:return"Fragment";case ss:return"Portal";case uc:return"Profiler";case Xf:return"StrictMode";case cc:return"Suspense";case fc:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case Pg:return(n.displayName||"Context")+".Consumer";case Ng:return(n._context.displayName||"Context")+".Provider";case Qf:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Zf:return e=n.displayName||null,e!==null?e:dc(n.type)||"Memo";case ti:e=n._payload,n=n._init;try{return dc(n(e))}catch{}}return null}function f0(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return dc(e);case 8:return e===Xf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Si(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function bg(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function d0(n){var e=bg(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function va(n){n._valueTracker||(n._valueTracker=d0(n))}function Og(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=bg(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function il(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function hc(n,e){var t=e.checked;return ce({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function ch(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=Si(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Lg(n,e){e=e.checked,e!=null&&Yf(n,"checked",e,!1)}function mc(n,e){Lg(n,e);var t=Si(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?gc(n,e.type,t):e.hasOwnProperty("defaultValue")&&gc(n,e.type,Si(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function fh(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function gc(n,e,t){(e!=="number"||il(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var co=Array.isArray;function ws(n,e,t,r){if(n=n.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<n.length;t++)i=e.hasOwnProperty("$"+n[t].value),n[t].selected!==i&&(n[t].selected=i),i&&r&&(n[t].defaultSelected=!0)}else{for(t=""+Si(t),e=null,i=0;i<n.length;i++){if(n[i].value===t){n[i].selected=!0,r&&(n[i].defaultSelected=!0);return}e!==null||n[i].disabled||(e=n[i])}e!==null&&(e.selected=!0)}}function pc(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(b(91));return ce({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function dh(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(b(92));if(co(t)){if(1<t.length)throw Error(b(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:Si(t)}}function Rg(n,e){var t=Si(e.value),r=Si(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function hh(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function Bg(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function yc(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?Bg(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var wa,zg=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,i){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,i)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(wa=wa||document.createElement("div"),wa.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=wa.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function Ro(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var yo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},h0=["Webkit","ms","Moz","O"];Object.keys(yo).forEach(function(n){h0.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),yo[e]=yo[n]})});function Mg(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||yo.hasOwnProperty(n)&&yo[n]?(""+e).trim():e+"px"}function $g(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,i=Mg(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,i):n[t]=i}}var m0=ce({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vc(n,e){if(e){if(m0[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(b(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(b(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(b(61))}if(e.style!=null&&typeof e.style!="object")throw Error(b(62))}}function wc(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Sc=null;function ed(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var kc=null,Ss=null,ks=null;function mh(n){if(n=la(n)){if(typeof kc!="function")throw Error(b(280));var e=n.stateNode;e&&(e=ou(e),kc(n.stateNode,n.type,e))}}function Fg(n){Ss?ks?ks.push(n):ks=[n]:Ss=n}function Jg(){if(Ss){var n=Ss,e=ks;if(ks=Ss=null,mh(n),e)for(n=0;n<e.length;n++)mh(e[n])}}function Ug(n,e){return n(e)}function jg(){}var bu=!1;function Vg(n,e,t){if(bu)return n(e,t);bu=!0;try{return Ug(n,e,t)}finally{bu=!1,(Ss!==null||ks!==null)&&(jg(),Jg())}}function Bo(n,e){var t=n.stateNode;if(t===null)return null;var r=ou(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(b(231,e,typeof t));return t}var Tc=!1;if(Vr)try{var Zs={};Object.defineProperty(Zs,"passive",{get:function(){Tc=!0}}),window.addEventListener("test",Zs,Zs),window.removeEventListener("test",Zs,Zs)}catch{Tc=!1}function g0(n,e,t,r,i,s,o,a,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(d){this.onError(d)}}var vo=!1,sl=null,ol=!1,Ic=null,p0={onError:function(n){vo=!0,sl=n}};function y0(n,e,t,r,i,s,o,a,u){vo=!1,sl=null,g0.apply(p0,arguments)}function v0(n,e,t,r,i,s,o,a,u){if(y0.apply(this,arguments),vo){if(vo){var c=sl;vo=!1,sl=null}else throw Error(b(198));ol||(ol=!0,Ic=c)}}function Xi(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function qg(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function gh(n){if(Xi(n)!==n)throw Error(b(188))}function w0(n){var e=n.alternate;if(!e){if(e=Xi(n),e===null)throw Error(b(188));return e!==n?null:n}for(var t=n,r=e;;){var i=t.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){t=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===t)return gh(i),n;if(s===r)return gh(i),e;s=s.sibling}throw Error(b(188))}if(t.return!==r.return)t=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===t){o=!0,t=i,r=s;break}if(a===r){o=!0,r=i,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,r=i;break}if(a===r){o=!0,r=s,t=i;break}a=a.sibling}if(!o)throw Error(b(189))}}if(t.alternate!==r)throw Error(b(190))}if(t.tag!==3)throw Error(b(188));return t.stateNode.current===t?n:e}function Kg(n){return n=w0(n),n!==null?Wg(n):null}function Wg(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=Wg(n);if(e!==null)return e;n=n.sibling}return null}var Hg=at.unstable_scheduleCallback,ph=at.unstable_cancelCallback,S0=at.unstable_shouldYield,k0=at.unstable_requestPaint,ye=at.unstable_now,T0=at.unstable_getCurrentPriorityLevel,td=at.unstable_ImmediatePriority,_g=at.unstable_UserBlockingPriority,al=at.unstable_NormalPriority,I0=at.unstable_LowPriority,Gg=at.unstable_IdlePriority,nu=null,an=null;function x0(n){if(an&&typeof an.onCommitFiberRoot=="function")try{an.onCommitFiberRoot(nu,n,void 0,(n.current.flags&128)===128)}catch{}}var qt=Math.clz32?Math.clz32:C0,A0=Math.log,E0=Math.LN2;function C0(n){return n>>>=0,n===0?32:31-(A0(n)/E0|0)|0}var Sa=64,ka=4194304;function fo(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function ll(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,i=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~i;a!==0?r=fo(a):(s&=o,s!==0&&(r=fo(s)))}else o=t&~i,o!==0?r=fo(o):s!==0&&(r=fo(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-qt(e),i=1<<t,r|=n[t],e&=~i;return r}function N0(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function P0(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,i=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-qt(s),a=1<<o,u=i[o];u===-1?(!(a&t)||a&r)&&(i[o]=N0(a,e)):u<=e&&(n.expiredLanes|=a),s&=~a}}function xc(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Yg(){var n=Sa;return Sa<<=1,!(Sa&4194240)&&(Sa=64),n}function Ou(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function oa(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-qt(e),n[e]=t}function D0(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var i=31-qt(t),s=1<<i;e[i]=0,r[i]=-1,n[i]=-1,t&=~s}}function nd(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-qt(t),i=1<<r;i&e|n[r]&e&&(n[r]|=e),t&=~i}}var Z=0;function Xg(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var Qg,rd,Zg,ep,tp,Ac=!1,Ta=[],ui=null,ci=null,fi=null,zo=new Map,Mo=new Map,ri=[],b0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function yh(n,e){switch(n){case"focusin":case"focusout":ui=null;break;case"dragenter":case"dragleave":ci=null;break;case"mouseover":case"mouseout":fi=null;break;case"pointerover":case"pointerout":zo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mo.delete(e.pointerId)}}function eo(n,e,t,r,i,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=la(e),e!==null&&rd(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),n)}function O0(n,e,t,r,i){switch(e){case"focusin":return ui=eo(ui,n,e,t,r,i),!0;case"dragenter":return ci=eo(ci,n,e,t,r,i),!0;case"mouseover":return fi=eo(fi,n,e,t,r,i),!0;case"pointerover":var s=i.pointerId;return zo.set(s,eo(zo.get(s)||null,n,e,t,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Mo.set(s,eo(Mo.get(s)||null,n,e,t,r,i)),!0}return!1}function np(n){var e=Ri(n.target);if(e!==null){var t=Xi(e);if(t!==null){if(e=t.tag,e===13){if(e=qg(t),e!==null){n.blockedOn=e,tp(n.priority,function(){Zg(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function ja(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=Ec(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);Sc=r,t.target.dispatchEvent(r),Sc=null}else return e=la(t),e!==null&&rd(e),n.blockedOn=t,!1;e.shift()}return!0}function vh(n,e,t){ja(n)&&t.delete(e)}function L0(){Ac=!1,ui!==null&&ja(ui)&&(ui=null),ci!==null&&ja(ci)&&(ci=null),fi!==null&&ja(fi)&&(fi=null),zo.forEach(vh),Mo.forEach(vh)}function to(n,e){n.blockedOn===e&&(n.blockedOn=null,Ac||(Ac=!0,at.unstable_scheduleCallback(at.unstable_NormalPriority,L0)))}function $o(n){function e(i){return to(i,n)}if(0<Ta.length){to(Ta[0],n);for(var t=1;t<Ta.length;t++){var r=Ta[t];r.blockedOn===n&&(r.blockedOn=null)}}for(ui!==null&&to(ui,n),ci!==null&&to(ci,n),fi!==null&&to(fi,n),zo.forEach(e),Mo.forEach(e),t=0;t<ri.length;t++)r=ri[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<ri.length&&(t=ri[0],t.blockedOn===null);)np(t),t.blockedOn===null&&ri.shift()}var Ts=Gr.ReactCurrentBatchConfig,ul=!0;function R0(n,e,t,r){var i=Z,s=Ts.transition;Ts.transition=null;try{Z=1,id(n,e,t,r)}finally{Z=i,Ts.transition=s}}function B0(n,e,t,r){var i=Z,s=Ts.transition;Ts.transition=null;try{Z=4,id(n,e,t,r)}finally{Z=i,Ts.transition=s}}function id(n,e,t,r){if(ul){var i=Ec(n,e,t,r);if(i===null)ju(n,e,r,cl,t),yh(n,r);else if(O0(i,n,e,t,r))r.stopPropagation();else if(yh(n,r),e&4&&-1<b0.indexOf(n)){for(;i!==null;){var s=la(i);if(s!==null&&Qg(s),s=Ec(n,e,t,r),s===null&&ju(n,e,r,cl,t),s===i)break;i=s}i!==null&&r.stopPropagation()}else ju(n,e,r,null,t)}}var cl=null;function Ec(n,e,t,r){if(cl=null,n=ed(r),n=Ri(n),n!==null)if(e=Xi(n),e===null)n=null;else if(t=e.tag,t===13){if(n=qg(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return cl=n,null}function rp(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(T0()){case td:return 1;case _g:return 4;case al:case I0:return 16;case Gg:return 536870912;default:return 16}default:return 16}}var oi=null,sd=null,Va=null;function ip(){if(Va)return Va;var n,e=sd,t=e.length,r,i="value"in oi?oi.value:oi.textContent,s=i.length;for(n=0;n<t&&e[n]===i[n];n++);var o=t-n;for(r=1;r<=o&&e[t-r]===i[s-r];r++);return Va=i.slice(n,1<r?1-r:void 0)}function qa(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function Ia(){return!0}function wh(){return!1}function ft(n){function e(t,r,i,s,o){this._reactName=t,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Ia:wh,this.isPropagationStopped=wh,this}return ce(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=Ia)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=Ia)},persist:function(){},isPersistent:Ia}),e}var _s={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},od=ft(_s),aa=ce({},_s,{view:0,detail:0}),z0=ft(aa),Lu,Ru,no,ru=ce({},aa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ad,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==no&&(no&&n.type==="mousemove"?(Lu=n.screenX-no.screenX,Ru=n.screenY-no.screenY):Ru=Lu=0,no=n),Lu)},movementY:function(n){return"movementY"in n?n.movementY:Ru}}),Sh=ft(ru),M0=ce({},ru,{dataTransfer:0}),$0=ft(M0),F0=ce({},aa,{relatedTarget:0}),Bu=ft(F0),J0=ce({},_s,{animationName:0,elapsedTime:0,pseudoElement:0}),U0=ft(J0),j0=ce({},_s,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),V0=ft(j0),q0=ce({},_s,{data:0}),kh=ft(q0),K0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},W0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},H0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _0(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=H0[n])?!!e[n]:!1}function ad(){return _0}var G0=ce({},aa,{key:function(n){if(n.key){var e=K0[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=qa(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?W0[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ad,charCode:function(n){return n.type==="keypress"?qa(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?qa(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Y0=ft(G0),X0=ce({},ru,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Th=ft(X0),Q0=ce({},aa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ad}),Z0=ft(Q0),ew=ce({},_s,{propertyName:0,elapsedTime:0,pseudoElement:0}),tw=ft(ew),nw=ce({},ru,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),rw=ft(nw),iw=[9,13,27,32],ld=Vr&&"CompositionEvent"in window,wo=null;Vr&&"documentMode"in document&&(wo=document.documentMode);var sw=Vr&&"TextEvent"in window&&!wo,sp=Vr&&(!ld||wo&&8<wo&&11>=wo),Ih=" ",xh=!1;function op(n,e){switch(n){case"keyup":return iw.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ap(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var as=!1;function ow(n,e){switch(n){case"compositionend":return ap(e);case"keypress":return e.which!==32?null:(xh=!0,Ih);case"textInput":return n=e.data,n===Ih&&xh?null:n;default:return null}}function aw(n,e){if(as)return n==="compositionend"||!ld&&op(n,e)?(n=ip(),Va=sd=oi=null,as=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return sp&&e.locale!=="ko"?null:e.data;default:return null}}var lw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ah(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!lw[n.type]:e==="textarea"}function lp(n,e,t,r){Fg(r),e=fl(e,"onChange"),0<e.length&&(t=new od("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var So=null,Fo=null;function uw(n){wp(n,0)}function iu(n){var e=cs(n);if(Og(e))return n}function cw(n,e){if(n==="change")return e}var up=!1;if(Vr){var zu;if(Vr){var Mu="oninput"in document;if(!Mu){var Eh=document.createElement("div");Eh.setAttribute("oninput","return;"),Mu=typeof Eh.oninput=="function"}zu=Mu}else zu=!1;up=zu&&(!document.documentMode||9<document.documentMode)}function Ch(){So&&(So.detachEvent("onpropertychange",cp),Fo=So=null)}function cp(n){if(n.propertyName==="value"&&iu(Fo)){var e=[];lp(e,Fo,n,ed(n)),Vg(uw,e)}}function fw(n,e,t){n==="focusin"?(Ch(),So=e,Fo=t,So.attachEvent("onpropertychange",cp)):n==="focusout"&&Ch()}function dw(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return iu(Fo)}function hw(n,e){if(n==="click")return iu(e)}function mw(n,e){if(n==="input"||n==="change")return iu(e)}function gw(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Ht=typeof Object.is=="function"?Object.is:gw;function Jo(n,e){if(Ht(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var i=t[r];if(!lc.call(e,i)||!Ht(n[i],e[i]))return!1}return!0}function Nh(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Ph(n,e){var t=Nh(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=Nh(t)}}function fp(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?fp(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function dp(){for(var n=window,e=il();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=il(n.document)}return e}function ud(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function pw(n){var e=dp(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&fp(t.ownerDocument.documentElement,t)){if(r!==null&&ud(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var i=t.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!n.extend&&s>r&&(i=r,r=s,s=i),i=Ph(t,s);var o=Ph(t,r);i&&o&&(n.rangeCount!==1||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),n.removeAllRanges(),s>r?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var yw=Vr&&"documentMode"in document&&11>=document.documentMode,ls=null,Cc=null,ko=null,Nc=!1;function Dh(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;Nc||ls==null||ls!==il(r)||(r=ls,"selectionStart"in r&&ud(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ko&&Jo(ko,r)||(ko=r,r=fl(Cc,"onSelect"),0<r.length&&(e=new od("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=ls)))}function xa(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var us={animationend:xa("Animation","AnimationEnd"),animationiteration:xa("Animation","AnimationIteration"),animationstart:xa("Animation","AnimationStart"),transitionend:xa("Transition","TransitionEnd")},$u={},hp={};Vr&&(hp=document.createElement("div").style,"AnimationEvent"in window||(delete us.animationend.animation,delete us.animationiteration.animation,delete us.animationstart.animation),"TransitionEvent"in window||delete us.transitionend.transition);function su(n){if($u[n])return $u[n];if(!us[n])return n;var e=us[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in hp)return $u[n]=e[t];return n}var mp=su("animationend"),gp=su("animationiteration"),pp=su("animationstart"),yp=su("transitionend"),vp=new Map,bh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ii(n,e){vp.set(n,e),Yi(e,[n])}for(var Fu=0;Fu<bh.length;Fu++){var Ju=bh[Fu],vw=Ju.toLowerCase(),ww=Ju[0].toUpperCase()+Ju.slice(1);Ii(vw,"on"+ww)}Ii(mp,"onAnimationEnd");Ii(gp,"onAnimationIteration");Ii(pp,"onAnimationStart");Ii("dblclick","onDoubleClick");Ii("focusin","onFocus");Ii("focusout","onBlur");Ii(yp,"onTransitionEnd");Cs("onMouseEnter",["mouseout","mouseover"]);Cs("onMouseLeave",["mouseout","mouseover"]);Cs("onPointerEnter",["pointerout","pointerover"]);Cs("onPointerLeave",["pointerout","pointerover"]);Yi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Yi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Yi("onBeforeInput",["compositionend","keypress","textInput","paste"]);Yi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Yi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Yi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ho="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Sw=new Set("cancel close invalid load scroll toggle".split(" ").concat(ho));function Oh(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,v0(r,e,void 0,n),n.currentTarget=null}function wp(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,c=a.currentTarget;if(a=a.listener,u!==s&&i.isPropagationStopped())break e;Oh(i,a,c),s=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,c=a.currentTarget,a=a.listener,u!==s&&i.isPropagationStopped())break e;Oh(i,a,c),s=u}}}if(ol)throw n=Ic,ol=!1,Ic=null,n}function re(n,e){var t=e[Lc];t===void 0&&(t=e[Lc]=new Set);var r=n+"__bubble";t.has(r)||(Sp(e,n,2,!1),t.add(r))}function Uu(n,e,t){var r=0;e&&(r|=4),Sp(t,n,r,e)}var Aa="_reactListening"+Math.random().toString(36).slice(2);function Uo(n){if(!n[Aa]){n[Aa]=!0,Cg.forEach(function(t){t!=="selectionchange"&&(Sw.has(t)||Uu(t,!1,n),Uu(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Aa]||(e[Aa]=!0,Uu("selectionchange",!1,e))}}function Sp(n,e,t,r){switch(rp(e)){case 1:var i=R0;break;case 4:i=B0;break;default:i=id}t=i.bind(null,e,t,n),i=void 0,!Tc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?n.addEventListener(e,t,{capture:!0,passive:i}):n.addEventListener(e,t,!0):i!==void 0?n.addEventListener(e,t,{passive:i}):n.addEventListener(e,t,!1)}function ju(n,e,t,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Ri(a),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}a=a.parentNode}}r=r.return}Vg(function(){var c=s,d=ed(t),h=[];e:{var m=vp.get(n);if(m!==void 0){var p=od,y=n;switch(n){case"keypress":if(qa(t)===0)break e;case"keydown":case"keyup":p=Y0;break;case"focusin":y="focus",p=Bu;break;case"focusout":y="blur",p=Bu;break;case"beforeblur":case"afterblur":p=Bu;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=Sh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=$0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=Z0;break;case mp:case gp:case pp:p=U0;break;case yp:p=tw;break;case"scroll":p=z0;break;case"wheel":p=rw;break;case"copy":case"cut":case"paste":p=V0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Th}var w=(e&4)!==0,A=!w&&n==="scroll",v=w?m!==null?m+"Capture":null:m;w=[];for(var g=c,S;g!==null;){S=g;var I=S.stateNode;if(S.tag===5&&I!==null&&(S=I,v!==null&&(I=Bo(g,v),I!=null&&w.push(jo(g,I,S)))),A)break;g=g.return}0<w.length&&(m=new p(m,y,null,t,d),h.push({event:m,listeners:w}))}}if(!(e&7)){e:{if(m=n==="mouseover"||n==="pointerover",p=n==="mouseout"||n==="pointerout",m&&t!==Sc&&(y=t.relatedTarget||t.fromElement)&&(Ri(y)||y[qr]))break e;if((p||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,p?(y=t.relatedTarget||t.toElement,p=c,y=y?Ri(y):null,y!==null&&(A=Xi(y),y!==A||y.tag!==5&&y.tag!==6)&&(y=null)):(p=null,y=c),p!==y)){if(w=Sh,I="onMouseLeave",v="onMouseEnter",g="mouse",(n==="pointerout"||n==="pointerover")&&(w=Th,I="onPointerLeave",v="onPointerEnter",g="pointer"),A=p==null?m:cs(p),S=y==null?m:cs(y),m=new w(I,g+"leave",p,t,d),m.target=A,m.relatedTarget=S,I=null,Ri(d)===c&&(w=new w(v,g+"enter",y,t,d),w.target=S,w.relatedTarget=A,I=w),A=I,p&&y)t:{for(w=p,v=y,g=0,S=w;S;S=Zi(S))g++;for(S=0,I=v;I;I=Zi(I))S++;for(;0<g-S;)w=Zi(w),g--;for(;0<S-g;)v=Zi(v),S--;for(;g--;){if(w===v||v!==null&&w===v.alternate)break t;w=Zi(w),v=Zi(v)}w=null}else w=null;p!==null&&Lh(h,m,p,w,!1),y!==null&&A!==null&&Lh(h,A,y,w,!0)}}e:{if(m=c?cs(c):window,p=m.nodeName&&m.nodeName.toLowerCase(),p==="select"||p==="input"&&m.type==="file")var N=cw;else if(Ah(m))if(up)N=mw;else{N=dw;var x=fw}else(p=m.nodeName)&&p.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(N=hw);if(N&&(N=N(n,c))){lp(h,N,t,d);break e}x&&x(n,m,c),n==="focusout"&&(x=m._wrapperState)&&x.controlled&&m.type==="number"&&gc(m,"number",m.value)}switch(x=c?cs(c):window,n){case"focusin":(Ah(x)||x.contentEditable==="true")&&(ls=x,Cc=c,ko=null);break;case"focusout":ko=Cc=ls=null;break;case"mousedown":Nc=!0;break;case"contextmenu":case"mouseup":case"dragend":Nc=!1,Dh(h,t,d);break;case"selectionchange":if(yw)break;case"keydown":case"keyup":Dh(h,t,d)}var C;if(ld)e:{switch(n){case"compositionstart":var O="onCompositionStart";break e;case"compositionend":O="onCompositionEnd";break e;case"compositionupdate":O="onCompositionUpdate";break e}O=void 0}else as?op(n,t)&&(O="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(O="onCompositionStart");O&&(sp&&t.locale!=="ko"&&(as||O!=="onCompositionStart"?O==="onCompositionEnd"&&as&&(C=ip()):(oi=d,sd="value"in oi?oi.value:oi.textContent,as=!0)),x=fl(c,O),0<x.length&&(O=new kh(O,n,null,t,d),h.push({event:O,listeners:x}),C?O.data=C:(C=ap(t),C!==null&&(O.data=C)))),(C=sw?ow(n,t):aw(n,t))&&(c=fl(c,"onBeforeInput"),0<c.length&&(d=new kh("onBeforeInput","beforeinput",null,t,d),h.push({event:d,listeners:c}),d.data=C))}wp(h,e)})}function jo(n,e,t){return{instance:n,listener:e,currentTarget:t}}function fl(n,e){for(var t=e+"Capture",r=[];n!==null;){var i=n,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Bo(n,t),s!=null&&r.unshift(jo(n,s,i)),s=Bo(n,e),s!=null&&r.push(jo(n,s,i))),n=n.return}return r}function Zi(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Lh(n,e,t,r,i){for(var s=e._reactName,o=[];t!==null&&t!==r;){var a=t,u=a.alternate,c=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&c!==null&&(a=c,i?(u=Bo(t,s),u!=null&&o.unshift(jo(t,u,a))):i||(u=Bo(t,s),u!=null&&o.push(jo(t,u,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var kw=/\r\n?/g,Tw=/\u0000|\uFFFD/g;function Rh(n){return(typeof n=="string"?n:""+n).replace(kw,`
`).replace(Tw,"")}function Ea(n,e,t){if(e=Rh(e),Rh(n)!==e&&t)throw Error(b(425))}function dl(){}var Pc=null,Dc=null;function bc(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Oc=typeof setTimeout=="function"?setTimeout:void 0,Iw=typeof clearTimeout=="function"?clearTimeout:void 0,Bh=typeof Promise=="function"?Promise:void 0,xw=typeof queueMicrotask=="function"?queueMicrotask:typeof Bh<"u"?function(n){return Bh.resolve(null).then(n).catch(Aw)}:Oc;function Aw(n){setTimeout(function(){throw n})}function Vu(n,e){var t=e,r=0;do{var i=t.nextSibling;if(n.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(r===0){n.removeChild(i),$o(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=i}while(t);$o(e)}function di(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function zh(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var Gs=Math.random().toString(36).slice(2),Zt="__reactFiber$"+Gs,Vo="__reactProps$"+Gs,qr="__reactContainer$"+Gs,Lc="__reactEvents$"+Gs,Ew="__reactListeners$"+Gs,Cw="__reactHandles$"+Gs;function Ri(n){var e=n[Zt];if(e)return e;for(var t=n.parentNode;t;){if(e=t[qr]||t[Zt]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=zh(n);n!==null;){if(t=n[Zt])return t;n=zh(n)}return e}n=t,t=n.parentNode}return null}function la(n){return n=n[Zt]||n[qr],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function cs(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(b(33))}function ou(n){return n[Vo]||null}var Rc=[],fs=-1;function xi(n){return{current:n}}function ie(n){0>fs||(n.current=Rc[fs],Rc[fs]=null,fs--)}function ne(n,e){fs++,Rc[fs]=n.current,n.current=e}var ki={},Je=xi(ki),Ye=xi(!1),Ui=ki;function Ns(n,e){var t=n.type.contextTypes;if(!t)return ki;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in t)i[s]=e[s];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=i),i}function Xe(n){return n=n.childContextTypes,n!=null}function hl(){ie(Ye),ie(Je)}function Mh(n,e,t){if(Je.current!==ki)throw Error(b(168));ne(Je,e),ne(Ye,t)}function kp(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(b(108,f0(n)||"Unknown",i));return ce({},t,r)}function ml(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||ki,Ui=Je.current,ne(Je,n),ne(Ye,Ye.current),!0}function $h(n,e,t){var r=n.stateNode;if(!r)throw Error(b(169));t?(n=kp(n,e,Ui),r.__reactInternalMemoizedMergedChildContext=n,ie(Ye),ie(Je),ne(Je,n)):ie(Ye),ne(Ye,t)}var Or=null,au=!1,qu=!1;function Tp(n){Or===null?Or=[n]:Or.push(n)}function Nw(n){au=!0,Tp(n)}function Ai(){if(!qu&&Or!==null){qu=!0;var n=0,e=Z;try{var t=Or;for(Z=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}Or=null,au=!1}catch(i){throw Or!==null&&(Or=Or.slice(n+1)),Hg(td,Ai),i}finally{Z=e,qu=!1}}return null}var ds=[],hs=0,gl=null,pl=0,dt=[],ht=0,ji=null,Br=1,zr="";function Di(n,e){ds[hs++]=pl,ds[hs++]=gl,gl=n,pl=e}function Ip(n,e,t){dt[ht++]=Br,dt[ht++]=zr,dt[ht++]=ji,ji=n;var r=Br;n=zr;var i=32-qt(r)-1;r&=~(1<<i),t+=1;var s=32-qt(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Br=1<<32-qt(e)+i|t<<i|r,zr=s+n}else Br=1<<s|t<<i|r,zr=n}function cd(n){n.return!==null&&(Di(n,1),Ip(n,1,0))}function fd(n){for(;n===gl;)gl=ds[--hs],ds[hs]=null,pl=ds[--hs],ds[hs]=null;for(;n===ji;)ji=dt[--ht],dt[ht]=null,zr=dt[--ht],dt[ht]=null,Br=dt[--ht],dt[ht]=null}var ot=null,rt=null,oe=!1,Ft=null;function xp(n,e){var t=It(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function Fh(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,ot=n,rt=di(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,ot=n,rt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=ji!==null?{id:Br,overflow:zr}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=It(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,ot=n,rt=null,!0):!1;default:return!1}}function Bc(n){return(n.mode&1)!==0&&(n.flags&128)===0}function zc(n){if(oe){var e=rt;if(e){var t=e;if(!Fh(n,e)){if(Bc(n))throw Error(b(418));e=di(t.nextSibling);var r=ot;e&&Fh(n,e)?xp(r,t):(n.flags=n.flags&-4097|2,oe=!1,ot=n)}}else{if(Bc(n))throw Error(b(418));n.flags=n.flags&-4097|2,oe=!1,ot=n}}}function Jh(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;ot=n}function Ca(n){if(n!==ot)return!1;if(!oe)return Jh(n),oe=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!bc(n.type,n.memoizedProps)),e&&(e=rt)){if(Bc(n))throw Ap(),Error(b(418));for(;e;)xp(n,e),e=di(e.nextSibling)}if(Jh(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(b(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){rt=di(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}rt=null}}else rt=ot?di(n.stateNode.nextSibling):null;return!0}function Ap(){for(var n=rt;n;)n=di(n.nextSibling)}function Ps(){rt=ot=null,oe=!1}function dd(n){Ft===null?Ft=[n]:Ft.push(n)}var Pw=Gr.ReactCurrentBatchConfig;function Bt(n,e){if(n&&n.defaultProps){e=ce({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}var yl=xi(null),vl=null,ms=null,hd=null;function md(){hd=ms=vl=null}function gd(n){var e=yl.current;ie(yl),n._currentValue=e}function Mc(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function Is(n,e){vl=n,hd=ms=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(_e=!0),n.firstContext=null)}function Dt(n){var e=n._currentValue;if(hd!==n)if(n={context:n,memoizedValue:e,next:null},ms===null){if(vl===null)throw Error(b(308));ms=n,vl.dependencies={lanes:0,firstContext:n}}else ms=ms.next=n;return e}var Bi=null;function pd(n){Bi===null?Bi=[n]:Bi.push(n)}function Ep(n,e,t,r){var i=e.interleaved;return i===null?(t.next=t,pd(e)):(t.next=i.next,i.next=t),e.interleaved=t,Kr(n,r)}function Kr(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var ni=!1;function yd(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Cp(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Jr(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function hi(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,Y&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Kr(n,t)}return i=r.interleaved,i===null?(e.next=e,pd(r)):(e.next=i.next,i.next=e),r.interleaved=e,Kr(n,t)}function Ka(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,nd(n,t)}}function Uh(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var i=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?i=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?i=s=e:s=s.next=e}else i=s=e;t={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function wl(n,e,t,r){var i=n.updateQueue;ni=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var u=a,c=u.next;u.next=null,o===null?s=c:o.next=c,o=u;var d=n.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=u))}if(s!==null){var h=i.baseState;o=0,d=c=u=null,a=s;do{var m=a.lane,p=a.eventTime;if((r&m)===m){d!==null&&(d=d.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=n,w=a;switch(m=e,p=t,w.tag){case 1:if(y=w.payload,typeof y=="function"){h=y.call(p,h,m);break e}h=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=w.payload,m=typeof y=="function"?y.call(p,h,m):y,m==null)break e;h=ce({},h,m);break e;case 2:ni=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,m=i.effects,m===null?i.effects=[a]:m.push(a))}else p={eventTime:p,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=p,u=h):d=d.next=p,o|=m;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;m=a,a=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(!0);if(d===null&&(u=h),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);qi|=o,n.lanes=o,n.memoizedState=h}}function jh(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],i=r.callback;if(i!==null){if(r.callback=null,r=t,typeof i!="function")throw Error(b(191,i));i.call(r)}}}var Np=new Eg.Component().refs;function $c(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:ce({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var lu={isMounted:function(n){return(n=n._reactInternals)?Xi(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=Ve(),i=gi(n),s=Jr(r,i);s.payload=e,t!=null&&(s.callback=t),e=hi(n,s,i),e!==null&&(Kt(e,n,i,r),Ka(e,n,i))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=Ve(),i=gi(n),s=Jr(r,i);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=hi(n,s,i),e!==null&&(Kt(e,n,i,r),Ka(e,n,i))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Ve(),r=gi(n),i=Jr(t,r);i.tag=2,e!=null&&(i.callback=e),e=hi(n,i,r),e!==null&&(Kt(e,n,r,t),Ka(e,n,r))}};function Vh(n,e,t,r,i,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Jo(t,r)||!Jo(i,s):!0}function Pp(n,e,t){var r=!1,i=ki,s=e.contextType;return typeof s=="object"&&s!==null?s=Dt(s):(i=Xe(e)?Ui:Je.current,r=e.contextTypes,s=(r=r!=null)?Ns(n,i):ki),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=lu,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=s),e}function qh(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&lu.enqueueReplaceState(e,e.state,null)}function Fc(n,e,t,r){var i=n.stateNode;i.props=t,i.state=n.memoizedState,i.refs=Np,yd(n);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Dt(s):(s=Xe(e)?Ui:Je.current,i.context=Ns(n,s)),i.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&($c(n,e,s,t),i.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&lu.enqueueReplaceState(i,i.state,null),wl(n,t,i,r),i.state=n.memoizedState),typeof i.componentDidMount=="function"&&(n.flags|=4194308)}function ro(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(b(309));var r=t.stateNode}if(!r)throw Error(b(147,n));var i=r,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===Np&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(b(284));if(!t._owner)throw Error(b(290,n))}return n}function Na(n,e){throw n=Object.prototype.toString.call(e),Error(b(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function Kh(n){var e=n._init;return e(n._payload)}function Dp(n){function e(v,g){if(n){var S=v.deletions;S===null?(v.deletions=[g],v.flags|=16):S.push(g)}}function t(v,g){if(!n)return null;for(;g!==null;)e(v,g),g=g.sibling;return null}function r(v,g){for(v=new Map;g!==null;)g.key!==null?v.set(g.key,g):v.set(g.index,g),g=g.sibling;return v}function i(v,g){return v=pi(v,g),v.index=0,v.sibling=null,v}function s(v,g,S){return v.index=S,n?(S=v.alternate,S!==null?(S=S.index,S<g?(v.flags|=2,g):S):(v.flags|=2,g)):(v.flags|=1048576,g)}function o(v){return n&&v.alternate===null&&(v.flags|=2),v}function a(v,g,S,I){return g===null||g.tag!==6?(g=Xu(S,v.mode,I),g.return=v,g):(g=i(g,S),g.return=v,g)}function u(v,g,S,I){var N=S.type;return N===os?d(v,g,S.props.children,I,S.key):g!==null&&(g.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===ti&&Kh(N)===g.type)?(I=i(g,S.props),I.ref=ro(v,g,S),I.return=v,I):(I=Xa(S.type,S.key,S.props,null,v.mode,I),I.ref=ro(v,g,S),I.return=v,I)}function c(v,g,S,I){return g===null||g.tag!==4||g.stateNode.containerInfo!==S.containerInfo||g.stateNode.implementation!==S.implementation?(g=Qu(S,v.mode,I),g.return=v,g):(g=i(g,S.children||[]),g.return=v,g)}function d(v,g,S,I,N){return g===null||g.tag!==7?(g=Ji(S,v.mode,I,N),g.return=v,g):(g=i(g,S),g.return=v,g)}function h(v,g,S){if(typeof g=="string"&&g!==""||typeof g=="number")return g=Xu(""+g,v.mode,S),g.return=v,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case ya:return S=Xa(g.type,g.key,g.props,null,v.mode,S),S.ref=ro(v,null,g),S.return=v,S;case ss:return g=Qu(g,v.mode,S),g.return=v,g;case ti:var I=g._init;return h(v,I(g._payload),S)}if(co(g)||Qs(g))return g=Ji(g,v.mode,S,null),g.return=v,g;Na(v,g)}return null}function m(v,g,S,I){var N=g!==null?g.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return N!==null?null:a(v,g,""+S,I);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case ya:return S.key===N?u(v,g,S,I):null;case ss:return S.key===N?c(v,g,S,I):null;case ti:return N=S._init,m(v,g,N(S._payload),I)}if(co(S)||Qs(S))return N!==null?null:d(v,g,S,I,null);Na(v,S)}return null}function p(v,g,S,I,N){if(typeof I=="string"&&I!==""||typeof I=="number")return v=v.get(S)||null,a(g,v,""+I,N);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case ya:return v=v.get(I.key===null?S:I.key)||null,u(g,v,I,N);case ss:return v=v.get(I.key===null?S:I.key)||null,c(g,v,I,N);case ti:var x=I._init;return p(v,g,S,x(I._payload),N)}if(co(I)||Qs(I))return v=v.get(S)||null,d(g,v,I,N,null);Na(g,I)}return null}function y(v,g,S,I){for(var N=null,x=null,C=g,O=g=0,M=null;C!==null&&O<S.length;O++){C.index>O?(M=C,C=null):M=C.sibling;var J=m(v,C,S[O],I);if(J===null){C===null&&(C=M);break}n&&C&&J.alternate===null&&e(v,C),g=s(J,g,O),x===null?N=J:x.sibling=J,x=J,C=M}if(O===S.length)return t(v,C),oe&&Di(v,O),N;if(C===null){for(;O<S.length;O++)C=h(v,S[O],I),C!==null&&(g=s(C,g,O),x===null?N=C:x.sibling=C,x=C);return oe&&Di(v,O),N}for(C=r(v,C);O<S.length;O++)M=p(C,v,O,S[O],I),M!==null&&(n&&M.alternate!==null&&C.delete(M.key===null?O:M.key),g=s(M,g,O),x===null?N=M:x.sibling=M,x=M);return n&&C.forEach(function(me){return e(v,me)}),oe&&Di(v,O),N}function w(v,g,S,I){var N=Qs(S);if(typeof N!="function")throw Error(b(150));if(S=N.call(S),S==null)throw Error(b(151));for(var x=N=null,C=g,O=g=0,M=null,J=S.next();C!==null&&!J.done;O++,J=S.next()){C.index>O?(M=C,C=null):M=C.sibling;var me=m(v,C,J.value,I);if(me===null){C===null&&(C=M);break}n&&C&&me.alternate===null&&e(v,C),g=s(me,g,O),x===null?N=me:x.sibling=me,x=me,C=M}if(J.done)return t(v,C),oe&&Di(v,O),N;if(C===null){for(;!J.done;O++,J=S.next())J=h(v,J.value,I),J!==null&&(g=s(J,g,O),x===null?N=J:x.sibling=J,x=J);return oe&&Di(v,O),N}for(C=r(v,C);!J.done;O++,J=S.next())J=p(C,v,O,J.value,I),J!==null&&(n&&J.alternate!==null&&C.delete(J.key===null?O:J.key),g=s(J,g,O),x===null?N=J:x.sibling=J,x=J);return n&&C.forEach(function(tt){return e(v,tt)}),oe&&Di(v,O),N}function A(v,g,S,I){if(typeof S=="object"&&S!==null&&S.type===os&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case ya:e:{for(var N=S.key,x=g;x!==null;){if(x.key===N){if(N=S.type,N===os){if(x.tag===7){t(v,x.sibling),g=i(x,S.props.children),g.return=v,v=g;break e}}else if(x.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===ti&&Kh(N)===x.type){t(v,x.sibling),g=i(x,S.props),g.ref=ro(v,x,S),g.return=v,v=g;break e}t(v,x);break}else e(v,x);x=x.sibling}S.type===os?(g=Ji(S.props.children,v.mode,I,S.key),g.return=v,v=g):(I=Xa(S.type,S.key,S.props,null,v.mode,I),I.ref=ro(v,g,S),I.return=v,v=I)}return o(v);case ss:e:{for(x=S.key;g!==null;){if(g.key===x)if(g.tag===4&&g.stateNode.containerInfo===S.containerInfo&&g.stateNode.implementation===S.implementation){t(v,g.sibling),g=i(g,S.children||[]),g.return=v,v=g;break e}else{t(v,g);break}else e(v,g);g=g.sibling}g=Qu(S,v.mode,I),g.return=v,v=g}return o(v);case ti:return x=S._init,A(v,g,x(S._payload),I)}if(co(S))return y(v,g,S,I);if(Qs(S))return w(v,g,S,I);Na(v,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,g!==null&&g.tag===6?(t(v,g.sibling),g=i(g,S),g.return=v,v=g):(t(v,g),g=Xu(S,v.mode,I),g.return=v,v=g),o(v)):t(v,g)}return A}var Ds=Dp(!0),bp=Dp(!1),ua={},ln=xi(ua),qo=xi(ua),Ko=xi(ua);function zi(n){if(n===ua)throw Error(b(174));return n}function vd(n,e){switch(ne(Ko,e),ne(qo,n),ne(ln,ua),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:yc(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=yc(e,n)}ie(ln),ne(ln,e)}function bs(){ie(ln),ie(qo),ie(Ko)}function Op(n){zi(Ko.current);var e=zi(ln.current),t=yc(e,n.type);e!==t&&(ne(qo,n),ne(ln,t))}function wd(n){qo.current===n&&(ie(ln),ie(qo))}var ae=xi(0);function Sl(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ku=[];function Sd(){for(var n=0;n<Ku.length;n++)Ku[n]._workInProgressVersionPrimary=null;Ku.length=0}var Wa=Gr.ReactCurrentDispatcher,Wu=Gr.ReactCurrentBatchConfig,Vi=0,ue=null,Te=null,Ee=null,kl=!1,To=!1,Wo=0,Dw=0;function Be(){throw Error(b(321))}function kd(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!Ht(n[t],e[t]))return!1;return!0}function Td(n,e,t,r,i,s){if(Vi=s,ue=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Wa.current=n===null||n.memoizedState===null?Rw:Bw,n=t(r,i),To){s=0;do{if(To=!1,Wo=0,25<=s)throw Error(b(301));s+=1,Ee=Te=null,e.updateQueue=null,Wa.current=zw,n=t(r,i)}while(To)}if(Wa.current=Tl,e=Te!==null&&Te.next!==null,Vi=0,Ee=Te=ue=null,kl=!1,e)throw Error(b(300));return n}function Id(){var n=Wo!==0;return Wo=0,n}function Yt(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ee===null?ue.memoizedState=Ee=n:Ee=Ee.next=n,Ee}function bt(){if(Te===null){var n=ue.alternate;n=n!==null?n.memoizedState:null}else n=Te.next;var e=Ee===null?ue.memoizedState:Ee.next;if(e!==null)Ee=e,Te=n;else{if(n===null)throw Error(b(310));Te=n,n={memoizedState:Te.memoizedState,baseState:Te.baseState,baseQueue:Te.baseQueue,queue:Te.queue,next:null},Ee===null?ue.memoizedState=Ee=n:Ee=Ee.next=n}return Ee}function Ho(n,e){return typeof e=="function"?e(n):e}function Hu(n){var e=bt(),t=e.queue;if(t===null)throw Error(b(311));t.lastRenderedReducer=n;var r=Te,i=r.baseQueue,s=t.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,t.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,u=null,c=s;do{var d=c.lane;if((Vi&d)===d)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:n(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(a=u=h,o=r):u=u.next=h,ue.lanes|=d,qi|=d}c=c.next}while(c!==null&&c!==s);u===null?o=r:u.next=a,Ht(r,e.memoizedState)||(_e=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,t.lastRenderedState=r}if(n=t.interleaved,n!==null){i=n;do s=i.lane,ue.lanes|=s,qi|=s,i=i.next;while(i!==n)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function _u(n){var e=bt(),t=e.queue;if(t===null)throw Error(b(311));t.lastRenderedReducer=n;var r=t.dispatch,i=t.pending,s=e.memoizedState;if(i!==null){t.pending=null;var o=i=i.next;do s=n(s,o.action),o=o.next;while(o!==i);Ht(s,e.memoizedState)||(_e=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,r]}function Lp(){}function Rp(n,e){var t=ue,r=bt(),i=e(),s=!Ht(r.memoizedState,i);if(s&&(r.memoizedState=i,_e=!0),r=r.queue,xd(Mp.bind(null,t,r,n),[n]),r.getSnapshot!==e||s||Ee!==null&&Ee.memoizedState.tag&1){if(t.flags|=2048,_o(9,zp.bind(null,t,r,i,e),void 0,null),Ce===null)throw Error(b(349));Vi&30||Bp(t,e,i)}return i}function Bp(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=ue.updateQueue,e===null?(e={lastEffect:null,stores:null},ue.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function zp(n,e,t,r){e.value=t,e.getSnapshot=r,$p(e)&&Fp(n)}function Mp(n,e,t){return t(function(){$p(e)&&Fp(n)})}function $p(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Ht(n,t)}catch{return!0}}function Fp(n){var e=Kr(n,1);e!==null&&Kt(e,n,1,-1)}function Wh(n){var e=Yt();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ho,lastRenderedState:n},e.queue=n,n=n.dispatch=Lw.bind(null,ue,n),[e.memoizedState,n]}function _o(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=ue.updateQueue,e===null?(e={lastEffect:null,stores:null},ue.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function Jp(){return bt().memoizedState}function Ha(n,e,t,r){var i=Yt();ue.flags|=n,i.memoizedState=_o(1|e,t,void 0,r===void 0?null:r)}function uu(n,e,t,r){var i=bt();r=r===void 0?null:r;var s=void 0;if(Te!==null){var o=Te.memoizedState;if(s=o.destroy,r!==null&&kd(r,o.deps)){i.memoizedState=_o(e,t,s,r);return}}ue.flags|=n,i.memoizedState=_o(1|e,t,s,r)}function Hh(n,e){return Ha(8390656,8,n,e)}function xd(n,e){return uu(2048,8,n,e)}function Up(n,e){return uu(4,2,n,e)}function jp(n,e){return uu(4,4,n,e)}function Vp(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function qp(n,e,t){return t=t!=null?t.concat([n]):null,uu(4,4,Vp.bind(null,e,n),t)}function Ad(){}function Kp(n,e){var t=bt();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&kd(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function Wp(n,e){var t=bt();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&kd(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function Hp(n,e,t){return Vi&21?(Ht(t,e)||(t=Yg(),ue.lanes|=t,qi|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,_e=!0),n.memoizedState=t)}function bw(n,e){var t=Z;Z=t!==0&&4>t?t:4,n(!0);var r=Wu.transition;Wu.transition={};try{n(!1),e()}finally{Z=t,Wu.transition=r}}function _p(){return bt().memoizedState}function Ow(n,e,t){var r=gi(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},Gp(n))Yp(e,t);else if(t=Ep(n,e,t,r),t!==null){var i=Ve();Kt(t,n,r,i),Xp(t,e,r)}}function Lw(n,e,t){var r=gi(n),i={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(Gp(n))Yp(e,i);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(i.hasEagerState=!0,i.eagerState=a,Ht(a,o)){var u=e.interleaved;u===null?(i.next=i,pd(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}t=Ep(n,e,i,r),t!==null&&(i=Ve(),Kt(t,n,r,i),Xp(t,e,r))}}function Gp(n){var e=n.alternate;return n===ue||e!==null&&e===ue}function Yp(n,e){To=kl=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function Xp(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,nd(n,t)}}var Tl={readContext:Dt,useCallback:Be,useContext:Be,useEffect:Be,useImperativeHandle:Be,useInsertionEffect:Be,useLayoutEffect:Be,useMemo:Be,useReducer:Be,useRef:Be,useState:Be,useDebugValue:Be,useDeferredValue:Be,useTransition:Be,useMutableSource:Be,useSyncExternalStore:Be,useId:Be,unstable_isNewReconciler:!1},Rw={readContext:Dt,useCallback:function(n,e){return Yt().memoizedState=[n,e===void 0?null:e],n},useContext:Dt,useEffect:Hh,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,Ha(4194308,4,Vp.bind(null,e,n),t)},useLayoutEffect:function(n,e){return Ha(4194308,4,n,e)},useInsertionEffect:function(n,e){return Ha(4,2,n,e)},useMemo:function(n,e){var t=Yt();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=Yt();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=Ow.bind(null,ue,n),[r.memoizedState,n]},useRef:function(n){var e=Yt();return n={current:n},e.memoizedState=n},useState:Wh,useDebugValue:Ad,useDeferredValue:function(n){return Yt().memoizedState=n},useTransition:function(){var n=Wh(!1),e=n[0];return n=bw.bind(null,n[1]),Yt().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=ue,i=Yt();if(oe){if(t===void 0)throw Error(b(407));t=t()}else{if(t=e(),Ce===null)throw Error(b(349));Vi&30||Bp(r,e,t)}i.memoizedState=t;var s={value:t,getSnapshot:e};return i.queue=s,Hh(Mp.bind(null,r,s,n),[n]),r.flags|=2048,_o(9,zp.bind(null,r,s,t,e),void 0,null),t},useId:function(){var n=Yt(),e=Ce.identifierPrefix;if(oe){var t=zr,r=Br;t=(r&~(1<<32-qt(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=Wo++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=Dw++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},Bw={readContext:Dt,useCallback:Kp,useContext:Dt,useEffect:xd,useImperativeHandle:qp,useInsertionEffect:Up,useLayoutEffect:jp,useMemo:Wp,useReducer:Hu,useRef:Jp,useState:function(){return Hu(Ho)},useDebugValue:Ad,useDeferredValue:function(n){var e=bt();return Hp(e,Te.memoizedState,n)},useTransition:function(){var n=Hu(Ho)[0],e=bt().memoizedState;return[n,e]},useMutableSource:Lp,useSyncExternalStore:Rp,useId:_p,unstable_isNewReconciler:!1},zw={readContext:Dt,useCallback:Kp,useContext:Dt,useEffect:xd,useImperativeHandle:qp,useInsertionEffect:Up,useLayoutEffect:jp,useMemo:Wp,useReducer:_u,useRef:Jp,useState:function(){return _u(Ho)},useDebugValue:Ad,useDeferredValue:function(n){var e=bt();return Te===null?e.memoizedState=n:Hp(e,Te.memoizedState,n)},useTransition:function(){var n=_u(Ho)[0],e=bt().memoizedState;return[n,e]},useMutableSource:Lp,useSyncExternalStore:Rp,useId:_p,unstable_isNewReconciler:!1};function Os(n,e){try{var t="",r=e;do t+=c0(r),r=r.return;while(r);var i=t}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:i,digest:null}}function Gu(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function Jc(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var Mw=typeof WeakMap=="function"?WeakMap:Map;function Qp(n,e,t){t=Jr(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){xl||(xl=!0,Yc=r),Jc(n,e)},t}function Zp(n,e,t){t=Jr(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;t.payload=function(){return r(i)},t.callback=function(){Jc(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){Jc(n,e),typeof r!="function"&&(mi===null?mi=new Set([this]):mi.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function _h(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new Mw;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(t)||(i.add(t),n=Xw.bind(null,n,e,t),e.then(n,n))}function Gh(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function Yh(n,e,t,r,i){return n.mode&1?(n.flags|=65536,n.lanes=i,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Jr(-1,1),e.tag=2,hi(t,e,1))),t.lanes|=1),n)}var $w=Gr.ReactCurrentOwner,_e=!1;function je(n,e,t,r){e.child=n===null?bp(e,null,t,r):Ds(e,n.child,t,r)}function Xh(n,e,t,r,i){t=t.render;var s=e.ref;return Is(e,i),r=Td(n,e,t,r,s,i),t=Id(),n!==null&&!_e?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Wr(n,e,i)):(oe&&t&&cd(e),e.flags|=1,je(n,e,r,i),e.child)}function Qh(n,e,t,r,i){if(n===null){var s=t.type;return typeof s=="function"&&!Ld(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,ey(n,e,s,r,i)):(n=Xa(t.type,null,r,e,e.mode,i),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&i)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:Jo,t(o,r)&&n.ref===e.ref)return Wr(n,e,i)}return e.flags|=1,n=pi(s,r),n.ref=e.ref,n.return=e,e.child=n}function ey(n,e,t,r,i){if(n!==null){var s=n.memoizedProps;if(Jo(s,r)&&n.ref===e.ref)if(_e=!1,e.pendingProps=r=s,(n.lanes&i)!==0)n.flags&131072&&(_e=!0);else return e.lanes=n.lanes,Wr(n,e,i)}return Uc(n,e,t,r,i)}function ty(n,e,t){var r=e.pendingProps,i=r.children,s=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ne(ps,nt),nt|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,ne(ps,nt),nt|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:t,ne(ps,nt),nt|=r}else s!==null?(r=s.baseLanes|t,e.memoizedState=null):r=t,ne(ps,nt),nt|=r;return je(n,e,i,t),e.child}function ny(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function Uc(n,e,t,r,i){var s=Xe(t)?Ui:Je.current;return s=Ns(e,s),Is(e,i),t=Td(n,e,t,r,s,i),r=Id(),n!==null&&!_e?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Wr(n,e,i)):(oe&&r&&cd(e),e.flags|=1,je(n,e,t,i),e.child)}function Zh(n,e,t,r,i){if(Xe(t)){var s=!0;ml(e)}else s=!1;if(Is(e,i),e.stateNode===null)_a(n,e),Pp(e,t,r),Fc(e,t,r,i),r=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var u=o.context,c=t.contextType;typeof c=="object"&&c!==null?c=Dt(c):(c=Xe(t)?Ui:Je.current,c=Ns(e,c));var d=t.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||u!==c)&&qh(e,o,r,c),ni=!1;var m=e.memoizedState;o.state=m,wl(e,r,o,i),u=e.memoizedState,a!==r||m!==u||Ye.current||ni?(typeof d=="function"&&($c(e,t,d,r),u=e.memoizedState),(a=ni||Vh(e,t,a,r,m,u,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Cp(n,e),a=e.memoizedProps,c=e.type===e.elementType?a:Bt(e.type,a),o.props=c,h=e.pendingProps,m=o.context,u=t.contextType,typeof u=="object"&&u!==null?u=Dt(u):(u=Xe(t)?Ui:Je.current,u=Ns(e,u));var p=t.getDerivedStateFromProps;(d=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||m!==u)&&qh(e,o,r,u),ni=!1,m=e.memoizedState,o.state=m,wl(e,r,o,i);var y=e.memoizedState;a!==h||m!==y||Ye.current||ni?(typeof p=="function"&&($c(e,t,p,r),y=e.memoizedState),(c=ni||Vh(e,t,c,r,m,y,u)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,y,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,y,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&m===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&m===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),o.props=r,o.state=y,o.context=u,r=c):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&m===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&m===n.memoizedState||(e.flags|=1024),r=!1)}return jc(n,e,t,r,s,i)}function jc(n,e,t,r,i,s){ny(n,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&$h(e,t,!1),Wr(n,e,s);r=e.stateNode,$w.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&o?(e.child=Ds(e,n.child,null,s),e.child=Ds(e,null,a,s)):je(n,e,a,s),e.memoizedState=r.state,i&&$h(e,t,!0),e.child}function ry(n){var e=n.stateNode;e.pendingContext?Mh(n,e.pendingContext,e.pendingContext!==e.context):e.context&&Mh(n,e.context,!1),vd(n,e.containerInfo)}function em(n,e,t,r,i){return Ps(),dd(i),e.flags|=256,je(n,e,t,r),e.child}var Vc={dehydrated:null,treeContext:null,retryLane:0};function qc(n){return{baseLanes:n,cachePool:null,transitions:null}}function iy(n,e,t){var r=e.pendingProps,i=ae.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(i|=1),ne(ae,i&1),n===null)return zc(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,n=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=du(o,r,0,null),n=Ji(n,r,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=qc(t),e.memoizedState=Vc,n):Ed(e,o));if(i=n.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return Fw(n,e,o,r,a,i,t);if(s){s=r.fallback,o=e.mode,i=n.child,a=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=pi(i,u),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=pi(a,s):(s=Ji(s,o,t,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=n.child.memoizedState,o=o===null?qc(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=Vc,r}return s=n.child,n=s.sibling,r=pi(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function Ed(n,e){return e=du({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function Pa(n,e,t,r){return r!==null&&dd(r),Ds(e,n.child,null,t),n=Ed(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function Fw(n,e,t,r,i,s,o){if(t)return e.flags&256?(e.flags&=-257,r=Gu(Error(b(422))),Pa(n,e,o,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=du({mode:"visible",children:r.children},i,0,null),s=Ji(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Ds(e,n.child,null,o),e.child.memoizedState=qc(o),e.memoizedState=Vc,s);if(!(e.mode&1))return Pa(n,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(b(419)),r=Gu(s,r,void 0),Pa(n,e,o,r)}if(a=(o&n.childLanes)!==0,_e||a){if(r=Ce,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Kr(n,i),Kt(r,n,i,-1))}return Od(),r=Gu(Error(b(421))),Pa(n,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=n.child,e=Qw.bind(null,n),i._reactRetry=e,null):(n=s.treeContext,rt=di(i.nextSibling),ot=e,oe=!0,Ft=null,n!==null&&(dt[ht++]=Br,dt[ht++]=zr,dt[ht++]=ji,Br=n.id,zr=n.overflow,ji=e),e=Ed(e,r.children),e.flags|=4096,e)}function tm(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),Mc(n.return,e,t)}function Yu(n,e,t,r,i){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=t,s.tailMode=i)}function sy(n,e,t){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(je(n,e,r.children,t),r=ae.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&tm(n,t,e);else if(n.tag===19)tm(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(ne(ae,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)n=t.alternate,n!==null&&Sl(n)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),Yu(e,!1,i,t,s);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(n=i.alternate,n!==null&&Sl(n)===null){e.child=i;break}n=i.sibling,i.sibling=t,t=i,i=n}Yu(e,!0,t,null,s);break;case"together":Yu(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function _a(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Wr(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),qi|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(b(153));if(e.child!==null){for(n=e.child,t=pi(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=pi(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function Jw(n,e,t){switch(e.tag){case 3:ry(e),Ps();break;case 5:Op(e);break;case 1:Xe(e.type)&&ml(e);break;case 4:vd(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;ne(yl,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ne(ae,ae.current&1),e.flags|=128,null):t&e.child.childLanes?iy(n,e,t):(ne(ae,ae.current&1),n=Wr(n,e,t),n!==null?n.sibling:null);ne(ae,ae.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return sy(n,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ne(ae,ae.current),r)break;return null;case 22:case 23:return e.lanes=0,ty(n,e,t)}return Wr(n,e,t)}var oy,Kc,ay,ly;oy=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};Kc=function(){};ay=function(n,e,t,r){var i=n.memoizedProps;if(i!==r){n=e.stateNode,zi(ln.current);var s=null;switch(t){case"input":i=hc(n,i),r=hc(n,r),s=[];break;case"select":i=ce({},i,{value:void 0}),r=ce({},r,{value:void 0}),s=[];break;case"textarea":i=pc(n,i),r=pc(n,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=dl)}vc(t,r);var o;t=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Lo.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var u=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&u!==a&&(u!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(t||(t={}),t[o]=u[o])}else t||(s||(s=[]),s.push(c,t)),t=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(s=s||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Lo.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&re("scroll",n),s||a===u||(s=[])):(s=s||[]).push(c,u))}t&&(s=s||[]).push("style",t);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};ly=function(n,e,t,r){t!==r&&(e.flags|=4)};function io(n,e){if(!oe)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function ze(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=n,i=i.sibling;else for(i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=n,i=i.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function Uw(n,e,t){var r=e.pendingProps;switch(fd(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ze(e),null;case 1:return Xe(e.type)&&hl(),ze(e),null;case 3:return r=e.stateNode,bs(),ie(Ye),ie(Je),Sd(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(Ca(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ft!==null&&(Zc(Ft),Ft=null))),Kc(n,e),ze(e),null;case 5:wd(e);var i=zi(Ko.current);if(t=e.type,n!==null&&e.stateNode!=null)ay(n,e,t,r,i),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(b(166));return ze(e),null}if(n=zi(ln.current),Ca(e)){r=e.stateNode,t=e.type;var s=e.memoizedProps;switch(r[Zt]=e,r[Vo]=s,n=(e.mode&1)!==0,t){case"dialog":re("cancel",r),re("close",r);break;case"iframe":case"object":case"embed":re("load",r);break;case"video":case"audio":for(i=0;i<ho.length;i++)re(ho[i],r);break;case"source":re("error",r);break;case"img":case"image":case"link":re("error",r),re("load",r);break;case"details":re("toggle",r);break;case"input":ch(r,s),re("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},re("invalid",r);break;case"textarea":dh(r,s),re("invalid",r)}vc(t,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Ea(r.textContent,a,n),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Ea(r.textContent,a,n),i=["children",""+a]):Lo.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&re("scroll",r)}switch(t){case"input":va(r),fh(r,s,!0);break;case"textarea":va(r),hh(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=dl)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Bg(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=o.createElement(t,{is:r.is}):(n=o.createElement(t),t==="select"&&(o=n,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):n=o.createElementNS(n,t),n[Zt]=e,n[Vo]=r,oy(n,e,!1,!1),e.stateNode=n;e:{switch(o=wc(t,r),t){case"dialog":re("cancel",n),re("close",n),i=r;break;case"iframe":case"object":case"embed":re("load",n),i=r;break;case"video":case"audio":for(i=0;i<ho.length;i++)re(ho[i],n);i=r;break;case"source":re("error",n),i=r;break;case"img":case"image":case"link":re("error",n),re("load",n),i=r;break;case"details":re("toggle",n),i=r;break;case"input":ch(n,r),i=hc(n,r),re("invalid",n);break;case"option":i=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},i=ce({},r,{value:void 0}),re("invalid",n);break;case"textarea":dh(n,r),i=pc(n,r),re("invalid",n);break;default:i=r}vc(t,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var u=a[s];s==="style"?$g(n,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&zg(n,u)):s==="children"?typeof u=="string"?(t!=="textarea"||u!=="")&&Ro(n,u):typeof u=="number"&&Ro(n,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Lo.hasOwnProperty(s)?u!=null&&s==="onScroll"&&re("scroll",n):u!=null&&Yf(n,s,u,o))}switch(t){case"input":va(n),fh(n,r,!1);break;case"textarea":va(n),hh(n);break;case"option":r.value!=null&&n.setAttribute("value",""+Si(r.value));break;case"select":n.multiple=!!r.multiple,s=r.value,s!=null?ws(n,!!r.multiple,s,!1):r.defaultValue!=null&&ws(n,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(n.onclick=dl)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ze(e),null;case 6:if(n&&e.stateNode!=null)ly(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(b(166));if(t=zi(Ko.current),zi(ln.current),Ca(e)){if(r=e.stateNode,t=e.memoizedProps,r[Zt]=e,(s=r.nodeValue!==t)&&(n=ot,n!==null))switch(n.tag){case 3:Ea(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Ea(r.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[Zt]=e,e.stateNode=r}return ze(e),null;case 13:if(ie(ae),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(oe&&rt!==null&&e.mode&1&&!(e.flags&128))Ap(),Ps(),e.flags|=98560,s=!1;else if(s=Ca(e),r!==null&&r.dehydrated!==null){if(n===null){if(!s)throw Error(b(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(b(317));s[Zt]=e}else Ps(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ze(e),s=!1}else Ft!==null&&(Zc(Ft),Ft=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(n===null||ae.current&1?Ie===0&&(Ie=3):Od())),e.updateQueue!==null&&(e.flags|=4),ze(e),null);case 4:return bs(),Kc(n,e),n===null&&Uo(e.stateNode.containerInfo),ze(e),null;case 10:return gd(e.type._context),ze(e),null;case 17:return Xe(e.type)&&hl(),ze(e),null;case 19:if(ie(ae),s=e.memoizedState,s===null)return ze(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)io(s,!1);else{if(Ie!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=Sl(n),o!==null){for(e.flags|=128,io(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)s=t,n=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return ne(ae,ae.current&1|2),e.child}n=n.sibling}s.tail!==null&&ye()>Ls&&(e.flags|=128,r=!0,io(s,!1),e.lanes=4194304)}else{if(!r)if(n=Sl(o),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),io(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!oe)return ze(e),null}else 2*ye()-s.renderingStartTime>Ls&&t!==1073741824&&(e.flags|=128,r=!0,io(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=ye(),e.sibling=null,t=ae.current,ne(ae,r?t&1|2:t&1),e):(ze(e),null);case 22:case 23:return bd(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?nt&1073741824&&(ze(e),e.subtreeFlags&6&&(e.flags|=8192)):ze(e),null;case 24:return null;case 25:return null}throw Error(b(156,e.tag))}function jw(n,e){switch(fd(e),e.tag){case 1:return Xe(e.type)&&hl(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return bs(),ie(Ye),ie(Je),Sd(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return wd(e),null;case 13:if(ie(ae),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(b(340));Ps()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return ie(ae),null;case 4:return bs(),null;case 10:return gd(e.type._context),null;case 22:case 23:return bd(),null;case 24:return null;default:return null}}var Da=!1,Me=!1,Vw=typeof WeakSet=="function"?WeakSet:Set,B=null;function gs(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){fe(n,e,r)}else t.current=null}function Wc(n,e,t){try{t()}catch(r){fe(n,e,r)}}var nm=!1;function qw(n,e){if(Pc=ul,n=dp(),ud(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,u=-1,c=0,d=0,h=n,m=null;t:for(;;){for(var p;h!==t||i!==0&&h.nodeType!==3||(a=o+i),h!==s||r!==0&&h.nodeType!==3||(u=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(p=h.firstChild)!==null;)m=h,h=p;for(;;){if(h===n)break t;if(m===t&&++c===i&&(a=o),m===s&&++d===r&&(u=o),(p=h.nextSibling)!==null)break;h=m,m=h.parentNode}h=p}t=a===-1||u===-1?null:{start:a,end:u}}else t=null}t=t||{start:0,end:0}}else t=null;for(Dc={focusedElem:n,selectionRange:t},ul=!1,B=e;B!==null;)if(e=B,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,B=n;else for(;B!==null;){e=B;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var w=y.memoizedProps,A=y.memoizedState,v=e.stateNode,g=v.getSnapshotBeforeUpdate(e.elementType===e.type?w:Bt(e.type,w),A);v.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(b(163))}}catch(I){fe(e,e.return,I)}if(n=e.sibling,n!==null){n.return=e.return,B=n;break}B=e.return}return y=nm,nm=!1,y}function Io(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&n)===n){var s=i.destroy;i.destroy=void 0,s!==void 0&&Wc(e,t,s)}i=i.next}while(i!==r)}}function cu(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function Hc(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function uy(n){var e=n.alternate;e!==null&&(n.alternate=null,uy(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Zt],delete e[Vo],delete e[Lc],delete e[Ew],delete e[Cw])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function cy(n){return n.tag===5||n.tag===3||n.tag===4}function rm(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||cy(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function _c(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=dl));else if(r!==4&&(n=n.child,n!==null))for(_c(n,e,t),n=n.sibling;n!==null;)_c(n,e,t),n=n.sibling}function Gc(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(Gc(n,e,t),n=n.sibling;n!==null;)Gc(n,e,t),n=n.sibling}var Pe=null,$t=!1;function Xr(n,e,t){for(t=t.child;t!==null;)fy(n,e,t),t=t.sibling}function fy(n,e,t){if(an&&typeof an.onCommitFiberUnmount=="function")try{an.onCommitFiberUnmount(nu,t)}catch{}switch(t.tag){case 5:Me||gs(t,e);case 6:var r=Pe,i=$t;Pe=null,Xr(n,e,t),Pe=r,$t=i,Pe!==null&&($t?(n=Pe,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):Pe.removeChild(t.stateNode));break;case 18:Pe!==null&&($t?(n=Pe,t=t.stateNode,n.nodeType===8?Vu(n.parentNode,t):n.nodeType===1&&Vu(n,t),$o(n)):Vu(Pe,t.stateNode));break;case 4:r=Pe,i=$t,Pe=t.stateNode.containerInfo,$t=!0,Xr(n,e,t),Pe=r,$t=i;break;case 0:case 11:case 14:case 15:if(!Me&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Wc(t,e,o),i=i.next}while(i!==r)}Xr(n,e,t);break;case 1:if(!Me&&(gs(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(a){fe(t,e,a)}Xr(n,e,t);break;case 21:Xr(n,e,t);break;case 22:t.mode&1?(Me=(r=Me)||t.memoizedState!==null,Xr(n,e,t),Me=r):Xr(n,e,t);break;default:Xr(n,e,t)}}function im(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new Vw),e.forEach(function(r){var i=Zw.bind(null,n,r);t.has(r)||(t.add(r),r.then(i,i))})}}function Lt(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var i=t[r];try{var s=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Pe=a.stateNode,$t=!1;break e;case 3:Pe=a.stateNode.containerInfo,$t=!0;break e;case 4:Pe=a.stateNode.containerInfo,$t=!0;break e}a=a.return}if(Pe===null)throw Error(b(160));fy(s,o,i),Pe=null,$t=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(c){fe(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)dy(e,n),e=e.sibling}function dy(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Lt(e,n),Gt(n),r&4){try{Io(3,n,n.return),cu(3,n)}catch(w){fe(n,n.return,w)}try{Io(5,n,n.return)}catch(w){fe(n,n.return,w)}}break;case 1:Lt(e,n),Gt(n),r&512&&t!==null&&gs(t,t.return);break;case 5:if(Lt(e,n),Gt(n),r&512&&t!==null&&gs(t,t.return),n.flags&32){var i=n.stateNode;try{Ro(i,"")}catch(w){fe(n,n.return,w)}}if(r&4&&(i=n.stateNode,i!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,a=n.type,u=n.updateQueue;if(n.updateQueue=null,u!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&Lg(i,s),wc(a,o);var c=wc(a,s);for(o=0;o<u.length;o+=2){var d=u[o],h=u[o+1];d==="style"?$g(i,h):d==="dangerouslySetInnerHTML"?zg(i,h):d==="children"?Ro(i,h):Yf(i,d,h,c)}switch(a){case"input":mc(i,s);break;case"textarea":Rg(i,s);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?ws(i,!!s.multiple,p,!1):m!==!!s.multiple&&(s.defaultValue!=null?ws(i,!!s.multiple,s.defaultValue,!0):ws(i,!!s.multiple,s.multiple?[]:"",!1))}i[Vo]=s}catch(w){fe(n,n.return,w)}}break;case 6:if(Lt(e,n),Gt(n),r&4){if(n.stateNode===null)throw Error(b(162));i=n.stateNode,s=n.memoizedProps;try{i.nodeValue=s}catch(w){fe(n,n.return,w)}}break;case 3:if(Lt(e,n),Gt(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{$o(e.containerInfo)}catch(w){fe(n,n.return,w)}break;case 4:Lt(e,n),Gt(n);break;case 13:Lt(e,n),Gt(n),i=n.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Pd=ye())),r&4&&im(n);break;case 22:if(d=t!==null&&t.memoizedState!==null,n.mode&1?(Me=(c=Me)||d,Lt(e,n),Me=c):Lt(e,n),Gt(n),r&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!d&&n.mode&1)for(B=n,d=n.child;d!==null;){for(h=B=d;B!==null;){switch(m=B,p=m.child,m.tag){case 0:case 11:case 14:case 15:Io(4,m,m.return);break;case 1:gs(m,m.return);var y=m.stateNode;if(typeof y.componentWillUnmount=="function"){r=m,t=m.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(w){fe(r,t,w)}}break;case 5:gs(m,m.return);break;case 22:if(m.memoizedState!==null){om(h);continue}}p!==null?(p.return=m,B=p):om(h)}d=d.sibling}e:for(d=null,h=n;;){if(h.tag===5){if(d===null){d=h;try{i=h.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,u=h.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=Mg("display",o))}catch(w){fe(n,n.return,w)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(w){fe(n,n.return,w)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===n)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===n)break e;for(;h.sibling===null;){if(h.return===null||h.return===n)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Lt(e,n),Gt(n),r&4&&im(n);break;case 21:break;default:Lt(e,n),Gt(n)}}function Gt(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(cy(t)){var r=t;break e}t=t.return}throw Error(b(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Ro(i,""),r.flags&=-33);var s=rm(n);Gc(n,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=rm(n);_c(n,a,o);break;default:throw Error(b(161))}}catch(u){fe(n,n.return,u)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function Kw(n,e,t){B=n,hy(n)}function hy(n,e,t){for(var r=(n.mode&1)!==0;B!==null;){var i=B,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Da;if(!o){var a=i.alternate,u=a!==null&&a.memoizedState!==null||Me;a=Da;var c=Me;if(Da=o,(Me=u)&&!c)for(B=i;B!==null;)o=B,u=o.child,o.tag===22&&o.memoizedState!==null?am(i):u!==null?(u.return=o,B=u):am(i);for(;s!==null;)B=s,hy(s),s=s.sibling;B=i,Da=a,Me=c}sm(n)}else i.subtreeFlags&8772&&s!==null?(s.return=i,B=s):sm(n)}}function sm(n){for(;B!==null;){var e=B;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Me||cu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Me)if(t===null)r.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:Bt(e.type,t.memoizedProps);r.componentDidUpdate(i,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&jh(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}jh(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&t.focus();break;case"img":u.src&&(t.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&$o(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(b(163))}Me||e.flags&512&&Hc(e)}catch(m){fe(e,e.return,m)}}if(e===n){B=null;break}if(t=e.sibling,t!==null){t.return=e.return,B=t;break}B=e.return}}function om(n){for(;B!==null;){var e=B;if(e===n){B=null;break}var t=e.sibling;if(t!==null){t.return=e.return,B=t;break}B=e.return}}function am(n){for(;B!==null;){var e=B;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{cu(4,e)}catch(u){fe(e,t,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){fe(e,i,u)}}var s=e.return;try{Hc(e)}catch(u){fe(e,s,u)}break;case 5:var o=e.return;try{Hc(e)}catch(u){fe(e,o,u)}}}catch(u){fe(e,e.return,u)}if(e===n){B=null;break}var a=e.sibling;if(a!==null){a.return=e.return,B=a;break}B=e.return}}var Ww=Math.ceil,Il=Gr.ReactCurrentDispatcher,Cd=Gr.ReactCurrentOwner,Nt=Gr.ReactCurrentBatchConfig,Y=0,Ce=null,Se=null,Oe=0,nt=0,ps=xi(0),Ie=0,Go=null,qi=0,fu=0,Nd=0,xo=null,We=null,Pd=0,Ls=1/0,gn=null,xl=!1,Yc=null,mi=null,ba=!1,ai=null,Al=0,Ao=0,Xc=null,Ga=-1,Ya=0;function Ve(){return Y&6?ye():Ga!==-1?Ga:Ga=ye()}function gi(n){return n.mode&1?Y&2&&Oe!==0?Oe&-Oe:Pw.transition!==null?(Ya===0&&(Ya=Yg()),Ya):(n=Z,n!==0||(n=window.event,n=n===void 0?16:rp(n.type)),n):1}function Kt(n,e,t,r){if(50<Ao)throw Ao=0,Xc=null,Error(b(185));oa(n,t,r),(!(Y&2)||n!==Ce)&&(n===Ce&&(!(Y&2)&&(fu|=t),Ie===4&&ii(n,Oe)),Qe(n,r),t===1&&Y===0&&!(e.mode&1)&&(Ls=ye()+500,au&&Ai()))}function Qe(n,e){var t=n.callbackNode;P0(n,e);var r=ll(n,n===Ce?Oe:0);if(r===0)t!==null&&ph(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&ph(t),e===1)n.tag===0?Nw(lm.bind(null,n)):Tp(lm.bind(null,n)),xw(function(){!(Y&6)&&Ai()}),t=null;else{switch(Xg(r)){case 1:t=td;break;case 4:t=_g;break;case 16:t=al;break;case 536870912:t=Gg;break;default:t=al}t=ky(t,my.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function my(n,e){if(Ga=-1,Ya=0,Y&6)throw Error(b(327));var t=n.callbackNode;if(xs()&&n.callbackNode!==t)return null;var r=ll(n,n===Ce?Oe:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=El(n,r);else{e=r;var i=Y;Y|=2;var s=py();(Ce!==n||Oe!==e)&&(gn=null,Ls=ye()+500,Fi(n,e));do try{Gw();break}catch(a){gy(n,a)}while(!0);md(),Il.current=s,Y=i,Se!==null?e=0:(Ce=null,Oe=0,e=Ie)}if(e!==0){if(e===2&&(i=xc(n),i!==0&&(r=i,e=Qc(n,i))),e===1)throw t=Go,Fi(n,0),ii(n,r),Qe(n,ye()),t;if(e===6)ii(n,r);else{if(i=n.current.alternate,!(r&30)&&!Hw(i)&&(e=El(n,r),e===2&&(s=xc(n),s!==0&&(r=s,e=Qc(n,s))),e===1))throw t=Go,Fi(n,0),ii(n,r),Qe(n,ye()),t;switch(n.finishedWork=i,n.finishedLanes=r,e){case 0:case 1:throw Error(b(345));case 2:bi(n,We,gn);break;case 3:if(ii(n,r),(r&130023424)===r&&(e=Pd+500-ye(),10<e)){if(ll(n,0)!==0)break;if(i=n.suspendedLanes,(i&r)!==r){Ve(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=Oc(bi.bind(null,n,We,gn),e);break}bi(n,We,gn);break;case 4:if(ii(n,r),(r&4194240)===r)break;for(e=n.eventTimes,i=-1;0<r;){var o=31-qt(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=ye()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ww(r/1960))-r,10<r){n.timeoutHandle=Oc(bi.bind(null,n,We,gn),r);break}bi(n,We,gn);break;case 5:bi(n,We,gn);break;default:throw Error(b(329))}}}return Qe(n,ye()),n.callbackNode===t?my.bind(null,n):null}function Qc(n,e){var t=xo;return n.current.memoizedState.isDehydrated&&(Fi(n,e).flags|=256),n=El(n,e),n!==2&&(e=We,We=t,e!==null&&Zc(e)),n}function Zc(n){We===null?We=n:We.push.apply(We,n)}function Hw(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var i=t[r],s=i.getSnapshot;i=i.value;try{if(!Ht(s(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ii(n,e){for(e&=~Nd,e&=~fu,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-qt(e),r=1<<t;n[t]=-1,e&=~r}}function lm(n){if(Y&6)throw Error(b(327));xs();var e=ll(n,0);if(!(e&1))return Qe(n,ye()),null;var t=El(n,e);if(n.tag!==0&&t===2){var r=xc(n);r!==0&&(e=r,t=Qc(n,r))}if(t===1)throw t=Go,Fi(n,0),ii(n,e),Qe(n,ye()),t;if(t===6)throw Error(b(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,bi(n,We,gn),Qe(n,ye()),null}function Dd(n,e){var t=Y;Y|=1;try{return n(e)}finally{Y=t,Y===0&&(Ls=ye()+500,au&&Ai())}}function Ki(n){ai!==null&&ai.tag===0&&!(Y&6)&&xs();var e=Y;Y|=1;var t=Nt.transition,r=Z;try{if(Nt.transition=null,Z=1,n)return n()}finally{Z=r,Nt.transition=t,Y=e,!(Y&6)&&Ai()}}function bd(){nt=ps.current,ie(ps)}function Fi(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,Iw(t)),Se!==null)for(t=Se.return;t!==null;){var r=t;switch(fd(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&hl();break;case 3:bs(),ie(Ye),ie(Je),Sd();break;case 5:wd(r);break;case 4:bs();break;case 13:ie(ae);break;case 19:ie(ae);break;case 10:gd(r.type._context);break;case 22:case 23:bd()}t=t.return}if(Ce=n,Se=n=pi(n.current,null),Oe=nt=e,Ie=0,Go=null,Nd=fu=qi=0,We=xo=null,Bi!==null){for(e=0;e<Bi.length;e++)if(t=Bi[e],r=t.interleaved,r!==null){t.interleaved=null;var i=r.next,s=t.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}t.pending=r}Bi=null}return n}function gy(n,e){do{var t=Se;try{if(md(),Wa.current=Tl,kl){for(var r=ue.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}kl=!1}if(Vi=0,Ee=Te=ue=null,To=!1,Wo=0,Cd.current=null,t===null||t.return===null){Ie=1,Go=e,Se=null;break}e:{var s=n,o=t.return,a=t,u=e;if(e=Oe,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=Gh(o);if(p!==null){p.flags&=-257,Yh(p,o,a,s,e),p.mode&1&&_h(s,c,e),e=p,u=c;var y=e.updateQueue;if(y===null){var w=new Set;w.add(u),e.updateQueue=w}else y.add(u);break e}else{if(!(e&1)){_h(s,c,e),Od();break e}u=Error(b(426))}}else if(oe&&a.mode&1){var A=Gh(o);if(A!==null){!(A.flags&65536)&&(A.flags|=256),Yh(A,o,a,s,e),dd(Os(u,a));break e}}s=u=Os(u,a),Ie!==4&&(Ie=2),xo===null?xo=[s]:xo.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=Qp(s,u,e);Uh(s,v);break e;case 1:a=u;var g=s.type,S=s.stateNode;if(!(s.flags&128)&&(typeof g.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(mi===null||!mi.has(S)))){s.flags|=65536,e&=-e,s.lanes|=e;var I=Zp(s,a,e);Uh(s,I);break e}}s=s.return}while(s!==null)}vy(t)}catch(N){e=N,Se===t&&t!==null&&(Se=t=t.return);continue}break}while(!0)}function py(){var n=Il.current;return Il.current=Tl,n===null?Tl:n}function Od(){(Ie===0||Ie===3||Ie===2)&&(Ie=4),Ce===null||!(qi&268435455)&&!(fu&268435455)||ii(Ce,Oe)}function El(n,e){var t=Y;Y|=2;var r=py();(Ce!==n||Oe!==e)&&(gn=null,Fi(n,e));do try{_w();break}catch(i){gy(n,i)}while(!0);if(md(),Y=t,Il.current=r,Se!==null)throw Error(b(261));return Ce=null,Oe=0,Ie}function _w(){for(;Se!==null;)yy(Se)}function Gw(){for(;Se!==null&&!S0();)yy(Se)}function yy(n){var e=Sy(n.alternate,n,nt);n.memoizedProps=n.pendingProps,e===null?vy(n):Se=e,Cd.current=null}function vy(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=jw(t,e),t!==null){t.flags&=32767,Se=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Ie=6,Se=null;return}}else if(t=Uw(t,e,nt),t!==null){Se=t;return}if(e=e.sibling,e!==null){Se=e;return}Se=e=n}while(e!==null);Ie===0&&(Ie=5)}function bi(n,e,t){var r=Z,i=Nt.transition;try{Nt.transition=null,Z=1,Yw(n,e,t,r)}finally{Nt.transition=i,Z=r}return null}function Yw(n,e,t,r){do xs();while(ai!==null);if(Y&6)throw Error(b(327));t=n.finishedWork;var i=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(b(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(D0(n,s),n===Ce&&(Se=Ce=null,Oe=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||ba||(ba=!0,ky(al,function(){return xs(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=Nt.transition,Nt.transition=null;var o=Z;Z=1;var a=Y;Y|=4,Cd.current=null,qw(n,t),dy(t,n),pw(Dc),ul=!!Pc,Dc=Pc=null,n.current=t,Kw(t),k0(),Y=a,Z=o,Nt.transition=s}else n.current=t;if(ba&&(ba=!1,ai=n,Al=i),s=n.pendingLanes,s===0&&(mi=null),x0(t.stateNode),Qe(n,ye()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)i=e[t],r(i.value,{componentStack:i.stack,digest:i.digest});if(xl)throw xl=!1,n=Yc,Yc=null,n;return Al&1&&n.tag!==0&&xs(),s=n.pendingLanes,s&1?n===Xc?Ao++:(Ao=0,Xc=n):Ao=0,Ai(),null}function xs(){if(ai!==null){var n=Xg(Al),e=Nt.transition,t=Z;try{if(Nt.transition=null,Z=16>n?16:n,ai===null)var r=!1;else{if(n=ai,ai=null,Al=0,Y&6)throw Error(b(331));var i=Y;for(Y|=4,B=n.current;B!==null;){var s=B,o=s.child;if(B.flags&16){var a=s.deletions;if(a!==null){for(var u=0;u<a.length;u++){var c=a[u];for(B=c;B!==null;){var d=B;switch(d.tag){case 0:case 11:case 15:Io(8,d,s)}var h=d.child;if(h!==null)h.return=d,B=h;else for(;B!==null;){d=B;var m=d.sibling,p=d.return;if(uy(d),d===c){B=null;break}if(m!==null){m.return=p,B=m;break}B=p}}}var y=s.alternate;if(y!==null){var w=y.child;if(w!==null){y.child=null;do{var A=w.sibling;w.sibling=null,w=A}while(w!==null)}}B=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,B=o;else e:for(;B!==null;){if(s=B,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Io(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,B=v;break e}B=s.return}}var g=n.current;for(B=g;B!==null;){o=B;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,B=S;else e:for(o=g;B!==null;){if(a=B,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:cu(9,a)}}catch(N){fe(a,a.return,N)}if(a===o){B=null;break e}var I=a.sibling;if(I!==null){I.return=a.return,B=I;break e}B=a.return}}if(Y=i,Ai(),an&&typeof an.onPostCommitFiberRoot=="function")try{an.onPostCommitFiberRoot(nu,n)}catch{}r=!0}return r}finally{Z=t,Nt.transition=e}}return!1}function um(n,e,t){e=Os(t,e),e=Qp(n,e,1),n=hi(n,e,1),e=Ve(),n!==null&&(oa(n,1,e),Qe(n,e))}function fe(n,e,t){if(n.tag===3)um(n,n,t);else for(;e!==null;){if(e.tag===3){um(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(mi===null||!mi.has(r))){n=Os(t,n),n=Zp(e,n,1),e=hi(e,n,1),n=Ve(),e!==null&&(oa(e,1,n),Qe(e,n));break}}e=e.return}}function Xw(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=Ve(),n.pingedLanes|=n.suspendedLanes&t,Ce===n&&(Oe&t)===t&&(Ie===4||Ie===3&&(Oe&130023424)===Oe&&500>ye()-Pd?Fi(n,0):Nd|=t),Qe(n,e)}function wy(n,e){e===0&&(n.mode&1?(e=ka,ka<<=1,!(ka&130023424)&&(ka=4194304)):e=1);var t=Ve();n=Kr(n,e),n!==null&&(oa(n,e,t),Qe(n,t))}function Qw(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),wy(n,t)}function Zw(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,i=n.memoizedState;i!==null&&(t=i.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(b(314))}r!==null&&r.delete(e),wy(n,t)}var Sy;Sy=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||Ye.current)_e=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return _e=!1,Jw(n,e,t);_e=!!(n.flags&131072)}else _e=!1,oe&&e.flags&1048576&&Ip(e,pl,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;_a(n,e),n=e.pendingProps;var i=Ns(e,Je.current);Is(e,t),i=Td(null,e,r,n,i,t);var s=Id();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Xe(r)?(s=!0,ml(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,yd(e),i.updater=lu,e.stateNode=i,i._reactInternals=e,Fc(e,r,n,t),e=jc(null,e,r,!0,s,t)):(e.tag=0,oe&&s&&cd(e),je(null,e,i,t),e=e.child),e;case 16:r=e.elementType;e:{switch(_a(n,e),n=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=t1(r),n=Bt(r,n),i){case 0:e=Uc(null,e,r,n,t);break e;case 1:e=Zh(null,e,r,n,t);break e;case 11:e=Xh(null,e,r,n,t);break e;case 14:e=Qh(null,e,r,Bt(r.type,n),t);break e}throw Error(b(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Bt(r,i),Uc(n,e,r,i,t);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Bt(r,i),Zh(n,e,r,i,t);case 3:e:{if(ry(e),n===null)throw Error(b(387));r=e.pendingProps,s=e.memoizedState,i=s.element,Cp(n,e),wl(e,r,null,t);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Os(Error(b(423)),e),e=em(n,e,r,t,i);break e}else if(r!==i){i=Os(Error(b(424)),e),e=em(n,e,r,t,i);break e}else for(rt=di(e.stateNode.containerInfo.firstChild),ot=e,oe=!0,Ft=null,t=bp(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Ps(),r===i){e=Wr(n,e,t);break e}je(n,e,r,t)}e=e.child}return e;case 5:return Op(e),n===null&&zc(e),r=e.type,i=e.pendingProps,s=n!==null?n.memoizedProps:null,o=i.children,bc(r,i)?o=null:s!==null&&bc(r,s)&&(e.flags|=32),ny(n,e),je(n,e,o,t),e.child;case 6:return n===null&&zc(e),null;case 13:return iy(n,e,t);case 4:return vd(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=Ds(e,null,r,t):je(n,e,r,t),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Bt(r,i),Xh(n,e,r,i,t);case 7:return je(n,e,e.pendingProps,t),e.child;case 8:return je(n,e,e.pendingProps.children,t),e.child;case 12:return je(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,ne(yl,r._currentValue),r._currentValue=o,s!==null)if(Ht(s.value,o)){if(s.children===i.children&&!Ye.current){e=Wr(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=Jr(-1,t&-t),u.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?u.next=u:(u.next=d.next,d.next=u),c.pending=u}}s.lanes|=t,u=s.alternate,u!==null&&(u.lanes|=t),Mc(s.return,t,e),a.lanes|=t;break}u=u.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(b(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),Mc(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}je(n,e,i.children,t),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Is(e,t),i=Dt(i),r=r(i),e.flags|=1,je(n,e,r,t),e.child;case 14:return r=e.type,i=Bt(r,e.pendingProps),i=Bt(r.type,i),Qh(n,e,r,i,t);case 15:return ey(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Bt(r,i),_a(n,e),e.tag=1,Xe(r)?(n=!0,ml(e)):n=!1,Is(e,t),Pp(e,r,i),Fc(e,r,i,t),jc(null,e,r,!0,n,t);case 19:return sy(n,e,t);case 22:return ty(n,e,t)}throw Error(b(156,e.tag))};function ky(n,e){return Hg(n,e)}function e1(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function It(n,e,t,r){return new e1(n,e,t,r)}function Ld(n){return n=n.prototype,!(!n||!n.isReactComponent)}function t1(n){if(typeof n=="function")return Ld(n)?1:0;if(n!=null){if(n=n.$$typeof,n===Qf)return 11;if(n===Zf)return 14}return 2}function pi(n,e){var t=n.alternate;return t===null?(t=It(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function Xa(n,e,t,r,i,s){var o=2;if(r=n,typeof n=="function")Ld(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case os:return Ji(t.children,i,s,e);case Xf:o=8,i|=8;break;case uc:return n=It(12,t,e,i|2),n.elementType=uc,n.lanes=s,n;case cc:return n=It(13,t,e,i),n.elementType=cc,n.lanes=s,n;case fc:return n=It(19,t,e,i),n.elementType=fc,n.lanes=s,n;case Dg:return du(t,i,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case Ng:o=10;break e;case Pg:o=9;break e;case Qf:o=11;break e;case Zf:o=14;break e;case ti:o=16,r=null;break e}throw Error(b(130,n==null?n:typeof n,""))}return e=It(o,t,e,i),e.elementType=n,e.type=r,e.lanes=s,e}function Ji(n,e,t,r){return n=It(7,n,r,e),n.lanes=t,n}function du(n,e,t,r){return n=It(22,n,r,e),n.elementType=Dg,n.lanes=t,n.stateNode={isHidden:!1},n}function Xu(n,e,t){return n=It(6,n,null,e),n.lanes=t,n}function Qu(n,e,t){return e=It(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function n1(n,e,t,r,i){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ou(0),this.expirationTimes=Ou(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ou(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Rd(n,e,t,r,i,s,o,a,u){return n=new n1(n,e,t,a,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=It(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},yd(s),n}function r1(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ss,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function Ty(n){if(!n)return ki;n=n._reactInternals;e:{if(Xi(n)!==n||n.tag!==1)throw Error(b(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Xe(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(b(171))}if(n.tag===1){var t=n.type;if(Xe(t))return kp(n,t,e)}return e}function Iy(n,e,t,r,i,s,o,a,u){return n=Rd(t,r,!0,n,i,s,o,a,u),n.context=Ty(null),t=n.current,r=Ve(),i=gi(t),s=Jr(r,i),s.callback=e??null,hi(t,s,i),n.current.lanes=i,oa(n,i,r),Qe(n,r),n}function hu(n,e,t,r){var i=e.current,s=Ve(),o=gi(i);return t=Ty(t),e.context===null?e.context=t:e.pendingContext=t,e=Jr(s,o),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=hi(i,e,o),n!==null&&(Kt(n,i,o,s),Ka(n,i,o)),o}function Cl(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function cm(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function Bd(n,e){cm(n,e),(n=n.alternate)&&cm(n,e)}function i1(){return null}var xy=typeof reportError=="function"?reportError:function(n){console.error(n)};function zd(n){this._internalRoot=n}mu.prototype.render=zd.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(b(409));hu(n,e,null,null)};mu.prototype.unmount=zd.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Ki(function(){hu(null,n,null,null)}),e[qr]=null}};function mu(n){this._internalRoot=n}mu.prototype.unstable_scheduleHydration=function(n){if(n){var e=ep();n={blockedOn:null,target:n,priority:e};for(var t=0;t<ri.length&&e!==0&&e<ri[t].priority;t++);ri.splice(t,0,n),t===0&&np(n)}};function Md(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function gu(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function fm(){}function s1(n,e,t,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=Cl(o);s.call(c)}}var o=Iy(e,r,n,0,null,!1,!1,"",fm);return n._reactRootContainer=o,n[qr]=o.current,Uo(n.nodeType===8?n.parentNode:n),Ki(),o}for(;i=n.lastChild;)n.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=Cl(u);a.call(c)}}var u=Rd(n,0,!1,null,null,!1,!1,"",fm);return n._reactRootContainer=u,n[qr]=u.current,Uo(n.nodeType===8?n.parentNode:n),Ki(function(){hu(e,u,t,r)}),u}function pu(n,e,t,r,i){var s=t._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var u=Cl(o);a.call(u)}}hu(e,o,n,i)}else o=s1(t,e,n,i,r);return Cl(o)}Qg=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=fo(e.pendingLanes);t!==0&&(nd(e,t|1),Qe(e,ye()),!(Y&6)&&(Ls=ye()+500,Ai()))}break;case 13:Ki(function(){var r=Kr(n,1);if(r!==null){var i=Ve();Kt(r,n,1,i)}}),Bd(n,1)}};rd=function(n){if(n.tag===13){var e=Kr(n,134217728);if(e!==null){var t=Ve();Kt(e,n,134217728,t)}Bd(n,134217728)}};Zg=function(n){if(n.tag===13){var e=gi(n),t=Kr(n,e);if(t!==null){var r=Ve();Kt(t,n,e,r)}Bd(n,e)}};ep=function(){return Z};tp=function(n,e){var t=Z;try{return Z=n,e()}finally{Z=t}};kc=function(n,e,t){switch(e){case"input":if(mc(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var i=ou(r);if(!i)throw Error(b(90));Og(r),mc(r,i)}}}break;case"textarea":Rg(n,t);break;case"select":e=t.value,e!=null&&ws(n,!!t.multiple,e,!1)}};Ug=Dd;jg=Ki;var o1={usingClientEntryPoint:!1,Events:[la,cs,ou,Fg,Jg,Dd]},so={findFiberByHostInstance:Ri,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},a1={bundleType:so.bundleType,version:so.version,rendererPackageName:so.rendererPackageName,rendererConfig:so.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Gr.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Kg(n),n===null?null:n.stateNode},findFiberByHostInstance:so.findFiberByHostInstance||i1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Oa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Oa.isDisabled&&Oa.supportsFiber)try{nu=Oa.inject(a1),an=Oa}catch{}}ct.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=o1;ct.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Md(e))throw Error(b(200));return r1(n,e,null,t)};ct.createRoot=function(n,e){if(!Md(n))throw Error(b(299));var t=!1,r="",i=xy;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Rd(n,1,!1,null,null,t,!1,r,i),n[qr]=e.current,Uo(n.nodeType===8?n.parentNode:n),new zd(e)};ct.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(b(188)):(n=Object.keys(n).join(","),Error(b(268,n)));return n=Kg(e),n=n===null?null:n.stateNode,n};ct.flushSync=function(n){return Ki(n)};ct.hydrate=function(n,e,t){if(!gu(e))throw Error(b(200));return pu(null,n,e,!0,t)};ct.hydrateRoot=function(n,e,t){if(!Md(n))throw Error(b(405));var r=t!=null&&t.hydratedSources||null,i=!1,s="",o=xy;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=Iy(e,null,n,1,t??null,i,!1,s,o),n[qr]=e.current,Uo(n),r)for(n=0;n<r.length;n++)t=r[n],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new mu(e)};ct.render=function(n,e,t){if(!gu(e))throw Error(b(200));return pu(null,n,e,!1,t)};ct.unmountComponentAtNode=function(n){if(!gu(n))throw Error(b(40));return n._reactRootContainer?(Ki(function(){pu(null,null,n,!1,function(){n._reactRootContainer=null,n[qr]=null})}),!0):!1};ct.unstable_batchedUpdates=Dd;ct.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!gu(t))throw Error(b(200));if(n==null||n._reactInternals===void 0)throw Error(b(38));return pu(n,e,t,!1,r)};ct.version="18.2.0-next-9e3b772b8-20220608";function Ay(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Ay)}catch(n){console.error(n)}}Ay(),Ig.exports=ct;var l1=Ig.exports,dm=l1;ac.createRoot=dm.createRoot,ac.hydrateRoot=dm.hydrateRoot;var W;(function(n){n[n.Canceled=1]="Canceled",n[n.Unknown=2]="Unknown",n[n.InvalidArgument=3]="InvalidArgument",n[n.DeadlineExceeded=4]="DeadlineExceeded",n[n.NotFound=5]="NotFound",n[n.AlreadyExists=6]="AlreadyExists",n[n.PermissionDenied=7]="PermissionDenied",n[n.ResourceExhausted=8]="ResourceExhausted",n[n.FailedPrecondition=9]="FailedPrecondition",n[n.Aborted=10]="Aborted",n[n.OutOfRange=11]="OutOfRange",n[n.Unimplemented=12]="Unimplemented",n[n.Internal=13]="Internal",n[n.Unavailable=14]="Unavailable",n[n.DataLoss=15]="DataLoss",n[n.Unauthenticated=16]="Unauthenticated"})(W||(W={}));function hm(n){const e=W[n];return typeof e!="string"?n.toString():e[0].toLowerCase()+e.substring(1).replace(/[A-Z]/g,t=>"_"+t.toLowerCase())}class ee extends Error{constructor(e,t=W.Unknown,r,i,s){super(u1(e,t)),this.name="ConnectError",Object.setPrototypeOf(this,new.target.prototype),this.rawMessage=e,this.code=t,this.metadata=new Headers(r??{}),this.details=i??[],this.cause=s}static from(e,t=W.Unknown){return e instanceof ee?e:e instanceof Error?e.name=="AbortError"?new ee(e.message,W.Canceled):new ee(e.message,t,void 0,void 0,e):new ee(String(e),t,void 0,void 0,e)}static[Symbol.hasInstance](e){return e instanceof Error?Object.getPrototypeOf(e)===ee.prototype?!0:e.name==="ConnectError"&&"code"in e&&typeof e.code=="number"&&"metadata"in e&&"details"in e&&Array.isArray(e.details)&&"rawMessage"in e&&typeof e.rawMessage=="string"&&"cause"in e:!1}findDetails(e){const t="typeName"in e?{findMessage:i=>i===e.typeName?e:void 0}:e,r=[];for(const i of this.details){if("getType"in i){t.findMessage(i.getType().typeName)&&r.push(i);continue}const s=t.findMessage(i.type);if(s)try{r.push(s.fromBinary(i.value))}catch{}}return r}}function u1(n,e){return n.length?`[${hm(e)}] ${n}`:`[${hm(e)}]`}function he(n,e){if(!n)throw new Error(e)}const c1=34028234663852886e22,f1=-34028234663852886e22,d1=4294967295,h1=2147483647,m1=-2147483648;function Qa(n){if(typeof n!="number")throw new Error("invalid int 32: "+typeof n);if(!Number.isInteger(n)||n>h1||n<m1)throw new Error("invalid int 32: "+n)}function ef(n){if(typeof n!="number")throw new Error("invalid uint 32: "+typeof n);if(!Number.isInteger(n)||n>d1||n<0)throw new Error("invalid uint 32: "+n)}function Ey(n){if(typeof n!="number")throw new Error("invalid float 32: "+typeof n);if(Number.isFinite(n)&&(n>c1||n<f1))throw new Error("invalid float 32: "+n)}const Cy=Symbol("@bufbuild/protobuf/enum-type");function g1(n){const e=n[Cy];return he(e,"missing enum type on enum object"),e}function Ny(n,e,t,r){n[Cy]=Py(e,t.map(i=>({no:i.no,name:i.name,localName:n[i.no]})))}function Py(n,e,t){const r=Object.create(null),i=Object.create(null),s=[];for(const o of e){const a=Dy(o);s.push(a),r[o.name]=a,i[o.no]=a}return{typeName:n,values:s,findName(o){return r[o]},findNumber(o){return i[o]}}}function p1(n,e,t){const r={};for(const i of e){const s=Dy(i);r[s.localName]=s.no,r[s.no]=s.localName}return Ny(r,n,e),r}function Dy(n){return"localName"in n?n:Object.assign(Object.assign({},n),{localName:n.name})}class D{equals(e){return this.getType().runtime.util.equals(this.getType(),this,e)}clone(){return this.getType().runtime.util.clone(this)}fromBinary(e,t){const r=this.getType(),i=r.runtime.bin,s=i.makeReadOptions(t);return i.readMessage(this,s.readerFactory(e),e.byteLength,s),this}fromJson(e,t){const r=this.getType(),i=r.runtime.json,s=i.makeReadOptions(t);return i.readMessage(r,e,s,this),this}fromJsonString(e,t){let r;try{r=JSON.parse(e)}catch(i){throw new Error(`cannot decode ${this.getType().typeName} from JSON: ${i instanceof Error?i.message:String(i)}`)}return this.fromJson(r,t)}toBinary(e){const t=this.getType(),r=t.runtime.bin,i=r.makeWriteOptions(e),s=i.writerFactory();return r.writeMessage(this,s,i),s.finish()}toJson(e){const t=this.getType(),r=t.runtime.json,i=r.makeWriteOptions(e);return r.writeMessage(this,i)}toJsonString(e){var t;const r=this.toJson(e);return JSON.stringify(r,null,(t=e==null?void 0:e.prettySpaces)!==null&&t!==void 0?t:0)}toJSON(){return this.toJson({emitDefaultValues:!0})}getType(){return Object.getPrototypeOf(this).constructor}}function y1(n,e,t,r){var i;const s=(i=r==null?void 0:r.localName)!==null&&i!==void 0?i:e.substring(e.lastIndexOf(".")+1),o={[s]:function(a){n.util.initFields(this),n.util.initPartial(a,this)}}[s];return Object.setPrototypeOf(o.prototype,new D),Object.assign(o,{runtime:n,typeName:e,fields:n.util.newFieldList(t),fromBinary(a,u){return new o().fromBinary(a,u)},fromJson(a,u){return new o().fromJson(a,u)},fromJsonString(a,u){return new o().fromJsonString(a,u)},equals(a,u){return n.util.equals(o,a,u)}}),o}function v1(){let n=0,e=0;for(let r=0;r<28;r+=7){let i=this.buf[this.pos++];if(n|=(i&127)<<r,!(i&128))return this.assertBounds(),[n,e]}let t=this.buf[this.pos++];if(n|=(t&15)<<28,e=(t&112)>>4,!(t&128))return this.assertBounds(),[n,e];for(let r=3;r<=31;r+=7){let i=this.buf[this.pos++];if(e|=(i&127)<<r,!(i&128))return this.assertBounds(),[n,e]}throw new Error("invalid varint")}function Zu(n,e,t){for(let s=0;s<28;s=s+7){const o=n>>>s,a=!(!(o>>>7)&&e==0),u=(a?o|128:o)&255;if(t.push(u),!a)return}const r=n>>>28&15|(e&7)<<4,i=!!(e>>3);if(t.push((i?r|128:r)&255),!!i){for(let s=3;s<31;s=s+7){const o=e>>>s,a=!!(o>>>7),u=(a?o|128:o)&255;if(t.push(u),!a)return}t.push(e>>>31&1)}}const Za=4294967296;function mm(n){const e=n[0]==="-";e&&(n=n.slice(1));const t=1e6;let r=0,i=0;function s(o,a){const u=Number(n.slice(o,a));i*=t,r=r*t+u,r>=Za&&(i=i+(r/Za|0),r=r%Za)}return s(-24,-18),s(-18,-12),s(-12,-6),s(-6),e?Oy(r,i):$d(r,i)}function w1(n,e){let t=$d(n,e);const r=t.hi&2147483648;r&&(t=Oy(t.lo,t.hi));const i=by(t.lo,t.hi);return r?"-"+i:i}function by(n,e){if({lo:n,hi:e}=S1(n,e),e<=2097151)return String(Za*e+n);const t=n&16777215,r=(n>>>24|e<<8)&16777215,i=e>>16&65535;let s=t+r*6777216+i*6710656,o=r+i*8147497,a=i*2;const u=1e7;return s>=u&&(o+=Math.floor(s/u),s%=u),o>=u&&(a+=Math.floor(o/u),o%=u),a.toString()+gm(o)+gm(s)}function S1(n,e){return{lo:n>>>0,hi:e>>>0}}function $d(n,e){return{lo:n|0,hi:e|0}}function Oy(n,e){return e=~e,n?n=~n+1:e+=1,$d(n,e)}const gm=n=>{const e=String(n);return"0000000".slice(e.length)+e};function pm(n,e){if(n>=0){for(;n>127;)e.push(n&127|128),n=n>>>7;e.push(n)}else{for(let t=0;t<9;t++)e.push(n&127|128),n=n>>7;e.push(1)}}function k1(){let n=this.buf[this.pos++],e=n&127;if(!(n&128))return this.assertBounds(),e;if(n=this.buf[this.pos++],e|=(n&127)<<7,!(n&128))return this.assertBounds(),e;if(n=this.buf[this.pos++],e|=(n&127)<<14,!(n&128))return this.assertBounds(),e;if(n=this.buf[this.pos++],e|=(n&127)<<21,!(n&128))return this.assertBounds(),e;n=this.buf[this.pos++],e|=(n&15)<<28;for(let t=5;n&128&&t<10;t++)n=this.buf[this.pos++];if(n&128)throw new Error("invalid varint");return this.assertBounds(),e>>>0}var ym={};function T1(){const n=new DataView(new ArrayBuffer(8));if(typeof BigInt=="function"&&typeof n.getBigInt64=="function"&&typeof n.getBigUint64=="function"&&typeof n.setBigInt64=="function"&&typeof n.setBigUint64=="function"&&(typeof process!="object"||typeof ym!="object"||ym.BUF_BIGINT_DISABLE!=="1")){const i=BigInt("-9223372036854775808"),s=BigInt("9223372036854775807"),o=BigInt("0"),a=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(u){const c=typeof u=="bigint"?u:BigInt(u);if(c>s||c<i)throw new Error(`int64 invalid: ${u}`);return c},uParse(u){const c=typeof u=="bigint"?u:BigInt(u);if(c>a||c<o)throw new Error(`uint64 invalid: ${u}`);return c},enc(u){return n.setBigInt64(0,this.parse(u),!0),{lo:n.getInt32(0,!0),hi:n.getInt32(4,!0)}},uEnc(u){return n.setBigInt64(0,this.uParse(u),!0),{lo:n.getInt32(0,!0),hi:n.getInt32(4,!0)}},dec(u,c){return n.setInt32(0,u,!0),n.setInt32(4,c,!0),n.getBigInt64(0,!0)},uDec(u,c){return n.setInt32(0,u,!0),n.setInt32(4,c,!0),n.getBigUint64(0,!0)}}}const t=i=>he(/^-?[0-9]+$/.test(i),`int64 invalid: ${i}`),r=i=>he(/^[0-9]+$/.test(i),`uint64 invalid: ${i}`);return{zero:"0",supported:!1,parse(i){return typeof i!="string"&&(i=i.toString()),t(i),i},uParse(i){return typeof i!="string"&&(i=i.toString()),r(i),i},enc(i){return typeof i!="string"&&(i=i.toString()),t(i),mm(i)},uEnc(i){return typeof i!="string"&&(i=i.toString()),r(i),mm(i)},dec(i,s){return w1(i,s)},uDec(i,s){return by(i,s)}}}const _=T1();var E;(function(n){n[n.DOUBLE=1]="DOUBLE",n[n.FLOAT=2]="FLOAT",n[n.INT64=3]="INT64",n[n.UINT64=4]="UINT64",n[n.INT32=5]="INT32",n[n.FIXED64=6]="FIXED64",n[n.FIXED32=7]="FIXED32",n[n.BOOL=8]="BOOL",n[n.STRING=9]="STRING",n[n.BYTES=12]="BYTES",n[n.UINT32=13]="UINT32",n[n.SFIXED32=15]="SFIXED32",n[n.SFIXED64=16]="SFIXED64",n[n.SINT32=17]="SINT32",n[n.SINT64=18]="SINT64"})(E||(E={}));var Ti;(function(n){n[n.BIGINT=0]="BIGINT",n[n.STRING=1]="STRING"})(Ti||(Ti={}));function Qr(n,e,t){if(e===t)return!0;if(n==E.BYTES){if(!(e instanceof Uint8Array)||!(t instanceof Uint8Array)||e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}switch(n){case E.UINT64:case E.FIXED64:case E.INT64:case E.SFIXED64:case E.SINT64:return e==t}return!1}function Rs(n,e){switch(n){case E.BOOL:return!1;case E.UINT64:case E.FIXED64:case E.INT64:case E.SFIXED64:case E.SINT64:return e==0?_.zero:"0";case E.DOUBLE:case E.FLOAT:return 0;case E.BYTES:return new Uint8Array(0);case E.STRING:return"";default:return 0}}function Ly(n,e){switch(n){case E.BOOL:return e===!1;case E.STRING:return e==="";case E.BYTES:return e instanceof Uint8Array&&!e.byteLength;default:return e==0}}var ve;(function(n){n[n.Varint=0]="Varint",n[n.Bit64=1]="Bit64",n[n.LengthDelimited=2]="LengthDelimited",n[n.StartGroup=3]="StartGroup",n[n.EndGroup=4]="EndGroup",n[n.Bit32=5]="Bit32"})(ve||(ve={}));class I1{constructor(e){this.stack=[],this.textEncoder=e??new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let e=0;for(let i=0;i<this.chunks.length;i++)e+=this.chunks[i].length;let t=new Uint8Array(e),r=0;for(let i=0;i<this.chunks.length;i++)t.set(this.chunks[i],r),r+=this.chunks[i].length;return this.chunks=[],t}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),t=this.stack.pop();if(!t)throw new Error("invalid state, fork stack empty");return this.chunks=t.chunks,this.buf=t.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,t){return this.uint32((e<<3|t)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(ef(e);e>127;)this.buf.push(e&127|128),e=e>>>7;return this.buf.push(e),this}int32(e){return Qa(e),pm(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let t=this.textEncoder.encode(e);return this.uint32(t.byteLength),this.raw(t)}float(e){Ey(e);let t=new Uint8Array(4);return new DataView(t.buffer).setFloat32(0,e,!0),this.raw(t)}double(e){let t=new Uint8Array(8);return new DataView(t.buffer).setFloat64(0,e,!0),this.raw(t)}fixed32(e){ef(e);let t=new Uint8Array(4);return new DataView(t.buffer).setUint32(0,e,!0),this.raw(t)}sfixed32(e){Qa(e);let t=new Uint8Array(4);return new DataView(t.buffer).setInt32(0,e,!0),this.raw(t)}sint32(e){return Qa(e),e=(e<<1^e>>31)>>>0,pm(e,this.buf),this}sfixed64(e){let t=new Uint8Array(8),r=new DataView(t.buffer),i=_.enc(e);return r.setInt32(0,i.lo,!0),r.setInt32(4,i.hi,!0),this.raw(t)}fixed64(e){let t=new Uint8Array(8),r=new DataView(t.buffer),i=_.uEnc(e);return r.setInt32(0,i.lo,!0),r.setInt32(4,i.hi,!0),this.raw(t)}int64(e){let t=_.enc(e);return Zu(t.lo,t.hi,this.buf),this}sint64(e){let t=_.enc(e),r=t.hi>>31,i=t.lo<<1^r,s=(t.hi<<1|t.lo>>>31)^r;return Zu(i,s,this.buf),this}uint64(e){let t=_.uEnc(e);return Zu(t.lo,t.hi,this.buf),this}}class x1{constructor(e,t){this.varint64=v1,this.uint32=k1,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength),this.textDecoder=t??new TextDecoder}tag(){let e=this.uint32(),t=e>>>3,r=e&7;if(t<=0||r<0||r>5)throw new Error("illegal tag: field no "+t+" wire type "+r);return[t,r]}skip(e,t){let r=this.pos;switch(e){case ve.Varint:for(;this.buf[this.pos++]&128;);break;case ve.Bit64:this.pos+=4;case ve.Bit32:this.pos+=4;break;case ve.LengthDelimited:let i=this.uint32();this.pos+=i;break;case ve.StartGroup:for(;;){const[s,o]=this.tag();if(o===ve.EndGroup){if(t!==void 0&&s!==t)throw new Error("invalid end group tag");break}this.skip(o,s)}break;default:throw new Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(r,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let e=this.uint32();return e>>>1^-(e&1)}int64(){return _.dec(...this.varint64())}uint64(){return _.uDec(...this.varint64())}sint64(){let[e,t]=this.varint64(),r=-(e&1);return e=(e>>>1|(t&1)<<31)^r,t=t>>>1^r,_.dec(e,t)}bool(){let[e,t]=this.varint64();return e!==0||t!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return _.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return _.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),t=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(t,t+e)}string(){return this.textDecoder.decode(this.bytes())}}function A1(n,e,t,r){let i;return{typeName:e,extendee:t,get field(){if(!i){const s=typeof r=="function"?r():r;s.name=e.split(".").pop(),s.jsonName=`[${e}]`,i=n.util.newFieldList([s]).list()[0]}return i},runtime:n}}function Ry(n){const e=n.field.localName,t=Object.create(null);return t[e]=E1(n),[t,()=>t[e]]}function E1(n){const e=n.field;if(e.repeated)return[];if(e.default!==void 0)return e.default;switch(e.kind){case"enum":return e.T.values[0].no;case"scalar":return Rs(e.T,e.L);case"message":const t=e.T,r=new t;return t.fieldWrapper?t.fieldWrapper.unwrapField(r):r;case"map":throw"map fields are not allowed to be extensions"}}function C1(n,e){if(!e.repeated&&(e.kind=="enum"||e.kind=="scalar")){for(let t=n.length-1;t>=0;--t)if(n[t].no==e.no)return[n[t]];return[]}return n.filter(t=>t.no===e.no)}let Lr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),yu=[];for(let n=0;n<Lr.length;n++)yu[Lr[n].charCodeAt(0)]=n;yu[45]=Lr.indexOf("+");yu[95]=Lr.indexOf("/");const Fd={dec(n){let e=n.length*3/4;n[n.length-2]=="="?e-=2:n[n.length-1]=="="&&(e-=1);let t=new Uint8Array(e),r=0,i=0,s,o=0;for(let a=0;a<n.length;a++){if(s=yu[n.charCodeAt(a)],s===void 0)switch(n[a]){case"=":i=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(i){case 0:o=s,i=1;break;case 1:t[r++]=o<<2|(s&48)>>4,o=s,i=2;break;case 2:t[r++]=(o&15)<<4|(s&60)>>2,o=s,i=3;break;case 3:t[r++]=(o&3)<<6|s,i=0;break}}if(i==1)throw Error("invalid base64 string.");return t.subarray(0,r)},enc(n){let e="",t=0,r,i=0;for(let s=0;s<n.length;s++)switch(r=n[s],t){case 0:e+=Lr[r>>2],i=(r&3)<<4,t=1;break;case 1:e+=Lr[i|r>>4],i=(r&15)<<2,t=2;break;case 2:e+=Lr[i|r>>6],e+=Lr[r&63],t=0;break}return t&&(e+=Lr[i],e+="=",t==1&&(e+="=")),e}};function N1(n,e,t){zy(e,n);const r=e.runtime.bin.makeReadOptions(t),i=C1(n.getType().runtime.bin.listUnknownFields(n),e.field),[s,o]=Ry(e);for(const a of i)e.runtime.bin.readField(s,r.readerFactory(a.data),e.field,a.wireType,r);return o()}function P1(n,e,t,r){zy(e,n);const i=e.runtime.bin.makeReadOptions(r),s=e.runtime.bin.makeWriteOptions(r);if(By(n,e)){const c=n.getType().runtime.bin.listUnknownFields(n).filter(d=>d.no!=e.field.no);n.getType().runtime.bin.discardUnknownFields(n);for(const d of c)n.getType().runtime.bin.onUnknownField(n,d.no,d.wireType,d.data)}const o=s.writerFactory();let a=e.field;!a.opt&&!a.repeated&&(a.kind=="enum"||a.kind=="scalar")&&(a=Object.assign(Object.assign({},e.field),{opt:!0})),e.runtime.bin.writeField(a,t,o,s);const u=i.readerFactory(o.finish());for(;u.pos<u.len;){const[c,d]=u.tag(),h=u.skip(d,c);n.getType().runtime.bin.onUnknownField(n,c,d,h)}}function By(n,e){const t=n.getType();return e.extendee.typeName===t.typeName&&!!t.runtime.bin.listUnknownFields(n).find(r=>r.no==e.field.no)}function zy(n,e){he(n.extendee.typeName==e.getType().typeName,`extension ${n.typeName} can only be applied to message ${n.extendee.typeName}`)}function My(n,e){const t=n.localName;if(n.repeated)return e[t].length>0;if(n.oneof)return e[n.oneof.localName].case===t;switch(n.kind){case"enum":case"scalar":return n.opt||n.req?e[t]!==void 0:n.kind=="enum"?e[t]!==n.T.values[0].no:!Ly(n.T,e[t]);case"message":return e[t]!==void 0;case"map":return Object.keys(e[t]).length>0}}function vm(n,e){const t=n.localName,r=!n.opt&&!n.req;if(n.repeated)e[t]=[];else if(n.oneof)e[n.oneof.localName]={case:void 0};else switch(n.kind){case"map":e[t]={};break;case"enum":e[t]=r?n.T.values[0].no:void 0;break;case"scalar":e[t]=r?Rs(n.T,n.L):void 0;break;case"message":e[t]=void 0;break}}function Rr(n,e){if(n===null||typeof n!="object"||!Object.getOwnPropertyNames(D.prototype).every(r=>r in n&&typeof n[r]=="function"))return!1;const t=n.getType();return t===null||typeof t!="function"||!("typeName"in t)||typeof t.typeName!="string"?!1:e===void 0?!0:t.typeName==e.typeName}function $y(n,e){return Rr(e)||!n.fieldWrapper?e:n.fieldWrapper.wrapField(e)}E.DOUBLE,E.FLOAT,E.INT64,E.UINT64,E.INT32,E.UINT32,E.BOOL,E.STRING,E.BYTES;const wm={ignoreUnknownFields:!1},Sm={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0};function D1(n){return n?Object.assign(Object.assign({},wm),n):wm}function b1(n){return n?Object.assign(Object.assign({},Sm),n):Sm}const Nl=Symbol(),el=Symbol();function O1(){return{makeReadOptions:D1,makeWriteOptions:b1,readMessage(n,e,t,r){if(e==null||Array.isArray(e)||typeof e!="object")throw new Error(`cannot decode message ${n.typeName} from JSON: ${Qt(e)}`);r=r??new n;const i=new Map,s=t.typeRegistry;for(const[o,a]of Object.entries(e)){const u=n.fields.findJsonName(o);if(u){if(u.oneof){if(a===null&&u.kind=="scalar")continue;const c=i.get(u.oneof);if(c!==void 0)throw new Error(`cannot decode message ${n.typeName} from JSON: multiple keys for oneof "${u.oneof.name}" present: "${c}", "${o}"`);i.set(u.oneof,o)}km(r,a,u,t,n)}else{let c=!1;if(s!=null&&s.findExtension&&o.startsWith("[")&&o.endsWith("]")){const d=s.findExtension(o.substring(1,o.length-1));if(d&&d.extendee.typeName==n.typeName){c=!0;const[h,m]=Ry(d);km(h,a,d.field,t,d),P1(r,d,m(),t)}}if(!c&&!t.ignoreUnknownFields)throw new Error(`cannot decode message ${n.typeName} from JSON: key "${o}" is unknown`)}}return r},writeMessage(n,e){const t=n.getType(),r={};let i;try{for(i of t.fields.byNumber()){if(!My(i,n)){if(i.req)throw"required field not set";if(!e.emitDefaultValues||!R1(i))continue}const o=i.oneof?n[i.oneof.localName].value:n[i.localName],a=Tm(i,o,e);a!==void 0&&(r[e.useProtoFieldName?i.name:i.jsonName]=a)}const s=e.typeRegistry;if(s!=null&&s.findExtensionFor)for(const o of t.runtime.bin.listUnknownFields(n)){const a=s.findExtensionFor(t.typeName,o.no);if(a&&By(n,a)){const u=N1(n,a,e),c=Tm(a.field,u,e);c!==void 0&&(r[a.field.jsonName]=c)}}}catch(s){const o=i?`cannot encode field ${t.typeName}.${i.name} to JSON`:`cannot encode message ${t.typeName} to JSON`,a=s instanceof Error?s.message:String(s);throw new Error(o+(a.length>0?`: ${a}`:""))}return r},readScalar(n,e,t){return Eo(n,e,t??Ti.BIGINT,!0)},writeScalar(n,e,t){if(e!==void 0&&(t||Ly(n,e)))return tl(n,e)},debug:Qt}}function Qt(n){if(n===null)return"null";switch(typeof n){case"object":return Array.isArray(n)?"array":"object";case"string":return n.length>100?"string":`"${n.split('"').join('\\"')}"`;default:return String(n)}}function km(n,e,t,r,i){let s=t.localName;if(t.repeated){if(he(t.kind!="map"),e===null)return;if(!Array.isArray(e))throw new Error(`cannot decode field ${i.typeName}.${t.name} from JSON: ${Qt(e)}`);const o=n[s];for(const a of e){if(a===null)throw new Error(`cannot decode field ${i.typeName}.${t.name} from JSON: ${Qt(a)}`);switch(t.kind){case"message":o.push(t.T.fromJson(a,r));break;case"enum":const u=ec(t.T,a,r.ignoreUnknownFields,!0);u!==el&&o.push(u);break;case"scalar":try{o.push(Eo(t.T,a,t.L,!0))}catch(c){let d=`cannot decode field ${i.typeName}.${t.name} from JSON: ${Qt(a)}`;throw c instanceof Error&&c.message.length>0&&(d+=`: ${c.message}`),new Error(d)}break}}}else if(t.kind=="map"){if(e===null)return;if(typeof e!="object"||Array.isArray(e))throw new Error(`cannot decode field ${i.typeName}.${t.name} from JSON: ${Qt(e)}`);const o=n[s];for(const[a,u]of Object.entries(e)){if(u===null)throw new Error(`cannot decode field ${i.typeName}.${t.name} from JSON: map value null`);let c;try{c=L1(t.K,a)}catch(d){let h=`cannot decode map key for field ${i.typeName}.${t.name} from JSON: ${Qt(e)}`;throw d instanceof Error&&d.message.length>0&&(h+=`: ${d.message}`),new Error(h)}switch(t.V.kind){case"message":o[c]=t.V.T.fromJson(u,r);break;case"enum":const d=ec(t.V.T,u,r.ignoreUnknownFields,!0);d!==el&&(o[c]=d);break;case"scalar":try{o[c]=Eo(t.V.T,u,Ti.BIGINT,!0)}catch(h){let m=`cannot decode map value for field ${i.typeName}.${t.name} from JSON: ${Qt(e)}`;throw h instanceof Error&&h.message.length>0&&(m+=`: ${h.message}`),new Error(m)}break}}}else switch(t.oneof&&(n=n[t.oneof.localName]={case:s},s="value"),t.kind){case"message":const o=t.T;if(e===null&&o.typeName!="google.protobuf.Value")return;let a=n[s];Rr(a)?a.fromJson(e,r):(n[s]=a=o.fromJson(e,r),o.fieldWrapper&&!t.oneof&&(n[s]=o.fieldWrapper.unwrapField(a)));break;case"enum":const u=ec(t.T,e,r.ignoreUnknownFields,!1);switch(u){case Nl:vm(t,n);break;case el:break;default:n[s]=u;break}break;case"scalar":try{const c=Eo(t.T,e,t.L,!1);switch(c){case Nl:vm(t,n);break;default:n[s]=c;break}}catch(c){let d=`cannot decode field ${i.typeName}.${t.name} from JSON: ${Qt(e)}`;throw c instanceof Error&&c.message.length>0&&(d+=`: ${c.message}`),new Error(d)}break}}function L1(n,e){if(n===E.BOOL)switch(e){case"true":e=!0;break;case"false":e=!1;break}return Eo(n,e,Ti.BIGINT,!0).toString()}function Eo(n,e,t,r){if(e===null)return r?Rs(n,t):Nl;switch(n){case E.DOUBLE:case E.FLOAT:if(e==="NaN")return Number.NaN;if(e==="Infinity")return Number.POSITIVE_INFINITY;if(e==="-Infinity")return Number.NEGATIVE_INFINITY;if(e===""||typeof e=="string"&&e.trim().length!==e.length||typeof e!="string"&&typeof e!="number")break;const i=Number(e);if(Number.isNaN(i)||!Number.isFinite(i))break;return n==E.FLOAT&&Ey(i),i;case E.INT32:case E.FIXED32:case E.SFIXED32:case E.SINT32:case E.UINT32:let s;if(typeof e=="number"?s=e:typeof e=="string"&&e.length>0&&e.trim().length===e.length&&(s=Number(e)),s===void 0)break;return n==E.UINT32||n==E.FIXED32?ef(s):Qa(s),s;case E.INT64:case E.SFIXED64:case E.SINT64:if(typeof e!="number"&&typeof e!="string")break;const o=_.parse(e);return t?o.toString():o;case E.FIXED64:case E.UINT64:if(typeof e!="number"&&typeof e!="string")break;const a=_.uParse(e);return t?a.toString():a;case E.BOOL:if(typeof e!="boolean")break;return e;case E.STRING:if(typeof e!="string")break;try{encodeURIComponent(e)}catch{throw new Error("invalid UTF8")}return e;case E.BYTES:if(e==="")return new Uint8Array(0);if(typeof e!="string")break;return Fd.dec(e)}throw new Error}function ec(n,e,t,r){if(e===null)return n.typeName=="google.protobuf.NullValue"?0:r?n.values[0].no:Nl;switch(typeof e){case"number":if(Number.isInteger(e))return e;break;case"string":const i=n.findName(e);if(i!==void 0)return i.no;if(t)return el;break}throw new Error(`cannot decode enum ${n.typeName} from JSON: ${Qt(e)}`)}function R1(n){return n.repeated||n.kind=="map"?!0:!(n.oneof||n.kind=="message"||n.opt||n.req)}function Tm(n,e,t){if(n.kind=="map"){he(typeof e=="object"&&e!=null);const r={},i=Object.entries(e);switch(n.V.kind){case"scalar":for(const[o,a]of i)r[o.toString()]=tl(n.V.T,a);break;case"message":for(const[o,a]of i)r[o.toString()]=a.toJson(t);break;case"enum":const s=n.V.T;for(const[o,a]of i)r[o.toString()]=tc(s,a,t.enumAsInteger);break}return t.emitDefaultValues||i.length>0?r:void 0}if(n.repeated){he(Array.isArray(e));const r=[];switch(n.kind){case"scalar":for(let i=0;i<e.length;i++)r.push(tl(n.T,e[i]));break;case"enum":for(let i=0;i<e.length;i++)r.push(tc(n.T,e[i],t.enumAsInteger));break;case"message":for(let i=0;i<e.length;i++)r.push(e[i].toJson(t));break}return t.emitDefaultValues||r.length>0?r:void 0}switch(n.kind){case"scalar":return tl(n.T,e);case"enum":return tc(n.T,e,t.enumAsInteger);case"message":return $y(n.T,e).toJson(t)}}function tc(n,e,t){var r;if(he(typeof e=="number"),n.typeName=="google.protobuf.NullValue")return null;if(t)return e;const i=n.findNumber(e);return(r=i==null?void 0:i.name)!==null&&r!==void 0?r:e}function tl(n,e){switch(n){case E.INT32:case E.SFIXED32:case E.SINT32:case E.FIXED32:case E.UINT32:return he(typeof e=="number"),e;case E.FLOAT:case E.DOUBLE:return he(typeof e=="number"),Number.isNaN(e)?"NaN":e===Number.POSITIVE_INFINITY?"Infinity":e===Number.NEGATIVE_INFINITY?"-Infinity":e;case E.STRING:return he(typeof e=="string"),e;case E.BOOL:return he(typeof e=="boolean"),e;case E.UINT64:case E.FIXED64:case E.INT64:case E.SFIXED64:case E.SINT64:return he(typeof e=="bigint"||typeof e=="string"||typeof e=="number"),e.toString();case E.BYTES:return he(e instanceof Uint8Array),Fd.enc(e)}}const es=Symbol("@bufbuild/protobuf/unknown-fields"),Im={readUnknownFields:!0,readerFactory:n=>new x1(n)},xm={writeUnknownFields:!0,writerFactory:()=>new I1};function B1(n){return n?Object.assign(Object.assign({},Im),n):Im}function z1(n){return n?Object.assign(Object.assign({},xm),n):xm}function M1(){return{makeReadOptions:B1,makeWriteOptions:z1,listUnknownFields(n){var e;return(e=n[es])!==null&&e!==void 0?e:[]},discardUnknownFields(n){delete n[es]},writeUnknownFields(n,e){const r=n[es];if(r)for(const i of r)e.tag(i.no,i.wireType).raw(i.data)},onUnknownField(n,e,t,r){const i=n;Array.isArray(i[es])||(i[es]=[]),i[es].push({no:e,wireType:t,data:r})},readMessage(n,e,t,r,i){const s=n.getType(),o=i?e.len:e.pos+t;let a,u;for(;e.pos<o&&([a,u]=e.tag(),!(i===!0&&u==ve.EndGroup));){const c=s.fields.find(a);if(!c){const d=e.skip(u,a);r.readUnknownFields&&this.onUnknownField(n,a,u,d);continue}Am(n,e,c,u,r)}if(i&&(u!=ve.EndGroup||a!==t))throw new Error("invalid end group tag")},readField:Am,writeMessage(n,e,t){const r=n.getType();for(const i of r.fields.byNumber()){if(!My(i,n)){if(i.req)throw new Error(`cannot encode field ${r.typeName}.${i.name} to binary: required field not set`);continue}const s=i.oneof?n[i.oneof.localName].value:n[i.localName];Em(i,s,e,t)}return t.writeUnknownFields&&this.writeUnknownFields(n,e),e},writeField(n,e,t,r){e!==void 0&&Em(n,e,t,r)}}}function Am(n,e,t,r,i){let{repeated:s,localName:o}=t;switch(t.oneof&&(n=n[t.oneof.localName],n.case!=o&&delete n.value,n.case=o,o="value"),t.kind){case"scalar":case"enum":const a=t.kind=="enum"?E.INT32:t.T;let u=Pl;if(t.kind=="scalar"&&t.L>0&&(u=F1),s){let m=n[o];if(r==ve.LengthDelimited&&a!=E.STRING&&a!=E.BYTES){let y=e.uint32()+e.pos;for(;e.pos<y;)m.push(u(e,a))}else m.push(u(e,a))}else n[o]=u(e,a);break;case"message":const c=t.T;s?n[o].push(nl(e,new c,i,t)):Rr(n[o])?nl(e,n[o],i,t):(n[o]=nl(e,new c,i,t),c.fieldWrapper&&!t.oneof&&!t.repeated&&(n[o]=c.fieldWrapper.unwrapField(n[o])));break;case"map":let[d,h]=$1(t,e,i);n[o][d]=h;break}}function nl(n,e,t,r){const i=e.getType().runtime.bin,s=r==null?void 0:r.delimited;return i.readMessage(e,n,s?r.no:n.uint32(),t,s),e}function $1(n,e,t){const r=e.uint32(),i=e.pos+r;let s,o;for(;e.pos<i;){const[a]=e.tag();switch(a){case 1:s=Pl(e,n.K);break;case 2:switch(n.V.kind){case"scalar":o=Pl(e,n.V.T);break;case"enum":o=e.int32();break;case"message":o=nl(e,new n.V.T,t,void 0);break}break}}if(s===void 0&&(s=Rs(n.K,Ti.BIGINT)),typeof s!="string"&&typeof s!="number"&&(s=s.toString()),o===void 0)switch(n.V.kind){case"scalar":o=Rs(n.V.T,Ti.BIGINT);break;case"enum":o=n.V.T.values[0].no;break;case"message":o=new n.V.T;break}return[s,o]}function F1(n,e){const t=Pl(n,e);return typeof t=="bigint"?t.toString():t}function Pl(n,e){switch(e){case E.STRING:return n.string();case E.BOOL:return n.bool();case E.DOUBLE:return n.double();case E.FLOAT:return n.float();case E.INT32:return n.int32();case E.INT64:return n.int64();case E.UINT64:return n.uint64();case E.FIXED64:return n.fixed64();case E.BYTES:return n.bytes();case E.FIXED32:return n.fixed32();case E.SFIXED32:return n.sfixed32();case E.SFIXED64:return n.sfixed64();case E.SINT64:return n.sint64();case E.UINT32:return n.uint32();case E.SINT32:return n.sint32()}}function Em(n,e,t,r){he(e!==void 0);const i=n.repeated;switch(n.kind){case"scalar":case"enum":let s=n.kind=="enum"?E.INT32:n.T;if(i)if(he(Array.isArray(e)),n.packed)U1(t,s,n.no,e);else for(const o of e)Co(t,s,n.no,o);else Co(t,s,n.no,e);break;case"message":if(i){he(Array.isArray(e));for(const o of e)Cm(t,r,n,o)}else Cm(t,r,n,e);break;case"map":he(typeof e=="object"&&e!=null);for(const[o,a]of Object.entries(e))J1(t,r,n,o,a);break}}function J1(n,e,t,r,i){n.tag(t.no,ve.LengthDelimited),n.fork();let s=r;switch(t.K){case E.INT32:case E.FIXED32:case E.UINT32:case E.SFIXED32:case E.SINT32:s=Number.parseInt(r);break;case E.BOOL:he(r=="true"||r=="false"),s=r=="true";break}switch(Co(n,t.K,1,s),t.V.kind){case"scalar":Co(n,t.V.T,2,i);break;case"enum":Co(n,E.INT32,2,i);break;case"message":he(i!==void 0),n.tag(2,ve.LengthDelimited).bytes(i.toBinary(e));break}n.join()}function Cm(n,e,t,r){const i=$y(t.T,r);t.delimited?n.tag(t.no,ve.StartGroup).raw(i.toBinary(e)).tag(t.no,ve.EndGroup):n.tag(t.no,ve.LengthDelimited).bytes(i.toBinary(e))}function Co(n,e,t,r){he(r!==void 0);let[i,s]=Fy(e);n.tag(t,i)[s](r)}function U1(n,e,t,r){if(!r.length)return;n.tag(t,ve.LengthDelimited).fork();let[,i]=Fy(e);for(let s=0;s<r.length;s++)n[i](r[s]);n.join()}function Fy(n){let e=ve.Varint;switch(n){case E.BYTES:case E.STRING:e=ve.LengthDelimited;break;case E.DOUBLE:case E.FIXED64:case E.SFIXED64:e=ve.Bit64;break;case E.FIXED32:case E.SFIXED32:case E.FLOAT:e=ve.Bit32;break}const t=E[n].toLowerCase();return[e,t]}function j1(){return{setEnumType:Ny,initPartial(n,e){if(n===void 0)return;const t=e.getType();for(const r of t.fields.byMember()){const i=r.localName,s=e,o=n;if(o[i]!=null)switch(r.kind){case"oneof":const a=o[i].case;if(a===void 0)continue;const u=r.findField(a);let c=o[i].value;u&&u.kind=="message"&&!Rr(c,u.T)?c=new u.T(c):u&&u.kind==="scalar"&&u.T===E.BYTES&&(c=oo(c)),s[i]={case:a,value:c};break;case"scalar":case"enum":let d=o[i];r.T===E.BYTES&&(d=r.repeated?d.map(oo):oo(d)),s[i]=d;break;case"map":switch(r.V.kind){case"scalar":case"enum":if(r.V.T===E.BYTES)for(const[p,y]of Object.entries(o[i]))s[i][p]=oo(y);else Object.assign(s[i],o[i]);break;case"message":const m=r.V.T;for(const p of Object.keys(o[i])){let y=o[i][p];m.fieldWrapper||(y=new m(y)),s[i][p]=y}break}break;case"message":const h=r.T;if(r.repeated)s[i]=o[i].map(m=>Rr(m,h)?m:new h(m));else{const m=o[i];h.fieldWrapper?h.typeName==="google.protobuf.BytesValue"?s[i]=oo(m):s[i]=m:s[i]=Rr(m,h)?m:new h(m)}break}}},equals(n,e,t){return e===t?!0:!e||!t?!1:n.fields.byMember().every(r=>{const i=e[r.localName],s=t[r.localName];if(r.repeated){if(i.length!==s.length)return!1;switch(r.kind){case"message":return i.every((o,a)=>r.T.equals(o,s[a]));case"scalar":return i.every((o,a)=>Qr(r.T,o,s[a]));case"enum":return i.every((o,a)=>Qr(E.INT32,o,s[a]))}throw new Error(`repeated cannot contain ${r.kind}`)}switch(r.kind){case"message":let o=i,a=s;return r.T.fieldWrapper&&(o!==void 0&&!Rr(o)&&(o=r.T.fieldWrapper.wrapField(o)),a!==void 0&&!Rr(a)&&(a=r.T.fieldWrapper.wrapField(a))),r.T.equals(o,a);case"enum":return Qr(E.INT32,i,s);case"scalar":return Qr(r.T,i,s);case"oneof":if(i.case!==s.case)return!1;const u=r.findField(i.case);if(u===void 0)return!0;switch(u.kind){case"message":return u.T.equals(i.value,s.value);case"enum":return Qr(E.INT32,i.value,s.value);case"scalar":return Qr(u.T,i.value,s.value)}throw new Error(`oneof cannot contain ${u.kind}`);case"map":const c=Object.keys(i).concat(Object.keys(s));switch(r.V.kind){case"message":const d=r.V.T;return c.every(m=>d.equals(i[m],s[m]));case"enum":return c.every(m=>Qr(E.INT32,i[m],s[m]));case"scalar":const h=r.V.T;return c.every(m=>Qr(h,i[m],s[m]))}break}})},clone(n){const e=n.getType(),t=new e,r=t;for(const i of e.fields.byMember()){const s=n[i.localName];let o;if(i.repeated)o=s.map(La);else if(i.kind=="map"){o=r[i.localName];for(const[a,u]of Object.entries(s))o[a]=La(u)}else i.kind=="oneof"?o=i.findField(s.case)?{case:s.case,value:La(s.value)}:{case:void 0}:o=La(s);r[i.localName]=o}for(const i of e.runtime.bin.listUnknownFields(n))e.runtime.bin.onUnknownField(r,i.no,i.wireType,i.data);return t}}}function La(n){if(n===void 0)return n;if(Rr(n))return n.clone();if(n instanceof Uint8Array){const e=new Uint8Array(n.byteLength);return e.set(n),e}return n}function oo(n){return n instanceof Uint8Array?n:new Uint8Array(n)}function V1(n,e,t){return{syntax:n,json:O1(),bin:M1(),util:Object.assign(Object.assign({},j1()),{newFieldList:e,initFields:t}),makeMessageType(r,i,s){return y1(this,r,i,s)},makeEnum:p1,makeEnumType:Py,getEnumType:g1,makeExtension(r,i,s){return A1(this,r,i,s)}}}class q1{constructor(e,t){this._fields=e,this._normalizer=t}findJsonName(e){if(!this.jsonNames){const t={};for(const r of this.list())t[r.jsonName]=t[r.name]=r;this.jsonNames=t}return this.jsonNames[e]}find(e){if(!this.numbers){const t={};for(const r of this.list())t[r.no]=r;this.numbers=t}return this.numbers[e]}list(){return this.all||(this.all=this._normalizer(this._fields)),this.all}byNumber(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort((e,t)=>e.no-t.no)),this.numbersAsc}byMember(){if(!this.members){this.members=[];const e=this.members;let t;for(const r of this.list())r.oneof?r.oneof!==t&&(t=r.oneof,e.push(t)):e.push(r)}return this.members}}function Jy(n,e){const t=Uy(n);return e?t:Y1(G1(t))}function K1(n){return Jy(n,!1)}const W1=Uy;function Uy(n){let e=!1;const t=[];for(let r=0;r<n.length;r++){let i=n.charAt(r);switch(i){case"_":e=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":t.push(i),e=!1;break;default:e&&(e=!1,i=i.toUpperCase()),t.push(i);break}}return t.join("")}const H1=new Set(["constructor","toString","toJSON","valueOf"]),_1=new Set(["getType","clone","equals","fromBinary","fromJson","fromJsonString","toBinary","toJson","toJsonString","toObject"]),jy=n=>`${n}$`,G1=n=>_1.has(n)?jy(n):n,Y1=n=>H1.has(n)?jy(n):n;class X1{constructor(e){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.req=!1,this.default=void 0,this.fields=[],this.name=e,this.localName=K1(e)}addField(e){he(e.oneof===this,`field ${e.name} not one of ${this.name}`),this.fields.push(e)}findField(e){if(!this._lookup){this._lookup=Object.create(null);for(let t=0;t<this.fields.length;t++)this._lookup[this.fields[t].localName]=this.fields[t]}return this._lookup[e]}}function Q1(n,e){var t,r,i,s,o,a;const u=[];let c;for(const d of typeof n=="function"?n():n){const h=d;if(h.localName=Jy(d.name,d.oneof!==void 0),h.jsonName=(t=d.jsonName)!==null&&t!==void 0?t:W1(d.name),h.repeated=(r=d.repeated)!==null&&r!==void 0?r:!1,d.kind=="scalar"&&(h.L=(i=d.L)!==null&&i!==void 0?i:Ti.BIGINT),h.delimited=(s=d.delimited)!==null&&s!==void 0?s:!1,h.req=(o=d.req)!==null&&o!==void 0?o:!1,h.opt=(a=d.opt)!==null&&a!==void 0?a:!1,d.packed===void 0&&(h.packed=d.kind=="enum"||d.kind=="scalar"&&d.T!=E.BYTES&&d.T!=E.STRING),d.oneof!==void 0){const m=typeof d.oneof=="string"?d.oneof:d.oneof.name;(!c||c.name!=m)&&(c=new X1(m)),h.oneof=c,c.addField(h)}u.push(h)}return u}const f=V1("proto3",n=>new q1(n,e=>Q1(e)),n=>{for(const e of n.getType().fields.byMember()){if(e.opt)continue;const t=e.localName,r=n;if(e.repeated){r[t]=[];continue}switch(e.kind){case"oneof":r[t]={case:void 0};break;case"enum":r[t]=0;break;case"map":r[t]={};break;case"scalar":r[t]=Rs(e.T,e.L);break}}});var ke;(function(n){n[n.Unary=0]="Unary",n[n.ServerStreaming=1]="ServerStreaming",n[n.ClientStreaming=2]="ClientStreaming",n[n.BiDiStreaming=3]="BiDiStreaming"})(ke||(ke={}));var Nm;(function(n){n[n.NoSideEffects=1]="NoSideEffects",n[n.Idempotent=2]="Idempotent"})(Nm||(Nm={}));class De extends D{constructor(e){super(),this.seconds=_.zero,this.nanos=0,f.util.initPartial(e,this)}fromJson(e,t){if(typeof e!="string")throw new Error(`cannot decode google.protobuf.Timestamp from JSON: ${f.json.debug(e)}`);const r=e.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!r)throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");const i=Date.parse(r[1]+"-"+r[2]+"-"+r[3]+"T"+r[4]+":"+r[5]+":"+r[6]+(r[8]?r[8]:"Z"));if(Number.isNaN(i))throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");if(i<Date.parse("0001-01-01T00:00:00Z")||i>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot decode message google.protobuf.Timestamp from JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");return this.seconds=_.parse(i/1e3),this.nanos=0,r[7]&&(this.nanos=parseInt("1"+r[7]+"0".repeat(9-r[7].length))-1e9),this}toJson(e){const t=Number(this.seconds)*1e3;if(t<Date.parse("0001-01-01T00:00:00Z")||t>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot encode google.protobuf.Timestamp to JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");if(this.nanos<0)throw new Error("cannot encode google.protobuf.Timestamp to JSON: nanos must not be negative");let r="Z";if(this.nanos>0){const i=(this.nanos+1e9).toString().substring(1);i.substring(3)==="000000"?r="."+i.substring(0,3)+"Z":i.substring(6)==="000"?r="."+i.substring(0,6)+"Z":r="."+i+"Z"}return new Date(t).toISOString().replace(".000Z",r)}toDate(){return new Date(Number(this.seconds)*1e3+Math.ceil(this.nanos/1e6))}static now(){return De.fromDate(new Date)}static fromDate(e){const t=e.getTime();return new De({seconds:_.parse(Math.floor(t/1e3)),nanos:t%1e3*1e6})}static fromBinary(e,t){return new De().fromBinary(e,t)}static fromJson(e,t){return new De().fromJson(e,t)}static fromJsonString(e,t){return new De().fromJsonString(e,t)}static equals(e,t){return f.util.equals(De,e,t)}}De.runtime=f;De.typeName="google.protobuf.Timestamp";De.fields=f.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);class Mr extends D{constructor(e){super(),this.seconds=_.zero,this.nanos=0,f.util.initPartial(e,this)}fromJson(e,t){if(typeof e!="string")throw new Error(`cannot decode google.protobuf.Duration from JSON: ${f.json.debug(e)}`);const r=e.match(/^(-?[0-9]+)(?:\.([0-9]+))?s/);if(r===null)throw new Error(`cannot decode google.protobuf.Duration from JSON: ${f.json.debug(e)}`);const i=Number(r[1]);if(i>315576e6||i<-315576e6)throw new Error(`cannot decode google.protobuf.Duration from JSON: ${f.json.debug(e)}`);if(this.seconds=_.parse(i),typeof r[2]=="string"){const s=r[2]+"0".repeat(9-r[2].length);this.nanos=parseInt(s),(i<0||Object.is(i,-0))&&(this.nanos=-this.nanos)}return this}toJson(e){if(Number(this.seconds)>315576e6||Number(this.seconds)<-315576e6)throw new Error("cannot encode google.protobuf.Duration to JSON: value out of range");let t=this.seconds.toString();if(this.nanos!==0){let r=Math.abs(this.nanos).toString();r="0".repeat(9-r.length)+r,r.substring(3)==="000000"?r=r.substring(0,3):r.substring(6)==="000"&&(r=r.substring(0,6)),t+="."+r,this.nanos<0&&Number(this.seconds)==0&&(t="-"+t)}return t+"s"}static fromBinary(e,t){return new Mr().fromBinary(e,t)}static fromJson(e,t){return new Mr().fromJson(e,t)}static fromJsonString(e,t){return new Mr().fromJsonString(e,t)}static equals(e,t){return f.util.equals(Mr,e,t)}}Mr.runtime=f;Mr.typeName="google.protobuf.Duration";Mr.fields=f.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);class en extends D{constructor(e){super(),this.typeUrl="",this.value=new Uint8Array(0),f.util.initPartial(e,this)}toJson(e){var t;if(this.typeUrl==="")return{};const r=this.typeUrlToName(this.typeUrl),i=(t=e==null?void 0:e.typeRegistry)===null||t===void 0?void 0:t.findMessage(r);if(!i)throw new Error(`cannot encode message google.protobuf.Any to JSON: "${this.typeUrl}" is not in the type registry`);let o=i.fromBinary(this.value).toJson(e);return(r.startsWith("google.protobuf.")||o===null||Array.isArray(o)||typeof o!="object")&&(o={value:o}),o["@type"]=this.typeUrl,o}fromJson(e,t){var r;if(e===null||Array.isArray(e)||typeof e!="object")throw new Error(`cannot decode message google.protobuf.Any from JSON: expected object but got ${e===null?"null":Array.isArray(e)?"array":typeof e}`);if(Object.keys(e).length==0)return this;const i=e["@type"];if(typeof i!="string"||i=="")throw new Error('cannot decode message google.protobuf.Any from JSON: "@type" is empty');const s=this.typeUrlToName(i),o=(r=t==null?void 0:t.typeRegistry)===null||r===void 0?void 0:r.findMessage(s);if(!o)throw new Error(`cannot decode message google.protobuf.Any from JSON: ${i} is not in the type registry`);let a;if(s.startsWith("google.protobuf.")&&Object.prototype.hasOwnProperty.call(e,"value"))a=o.fromJson(e.value,t);else{const u=Object.assign({},e);delete u["@type"],a=o.fromJson(u,t)}return this.packFrom(a),this}packFrom(e){this.value=e.toBinary(),this.typeUrl=this.typeNameToUrl(e.getType().typeName)}unpackTo(e){return this.is(e.getType())?(e.fromBinary(this.value),!0):!1}unpack(e){if(this.typeUrl==="")return;const t=e.findMessage(this.typeUrlToName(this.typeUrl));if(t)return t.fromBinary(this.value)}is(e){if(this.typeUrl==="")return!1;const t=this.typeUrlToName(this.typeUrl);let r="";return typeof e=="string"?r=e:r=e.typeName,t===r}typeNameToUrl(e){return`type.googleapis.com/${e}`}typeUrlToName(e){if(!e.length)throw new Error(`invalid type url: ${e}`);const t=e.lastIndexOf("/"),r=t>=0?e.substring(t+1):e;if(!r.length)throw new Error(`invalid type url: ${e}`);return r}static pack(e){const t=new en;return t.packFrom(e),t}static fromBinary(e,t){return new en().fromBinary(e,t)}static fromJson(e,t){return new en().fromJson(e,t)}static fromJsonString(e,t){return new en().fromJsonString(e,t)}static equals(e,t){return f.util.equals(en,e,t)}}en.runtime=f;en.typeName="google.protobuf.Any";en.fields=f.util.newFieldList(()=>[{no:1,name:"type_url",kind:"scalar",T:9},{no:2,name:"value",kind:"scalar",T:12}]);class tn extends D{constructor(e){super(),this.value=0,f.util.initPartial(e,this)}toJson(e){return f.json.writeScalar(E.DOUBLE,this.value,!0)}fromJson(e,t){try{this.value=f.json.readScalar(E.DOUBLE,e)}catch(r){let i='cannot decode message google.protobuf.DoubleValue from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new tn().fromBinary(e,t)}static fromJson(e,t){return new tn().fromJson(e,t)}static fromJsonString(e,t){return new tn().fromJsonString(e,t)}static equals(e,t){return f.util.equals(tn,e,t)}}tn.runtime=f;tn.typeName="google.protobuf.DoubleValue";tn.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:1}]);tn.fieldWrapper={wrapField(n){return new tn({value:n})},unwrapField(n){return n.value}};class nn extends D{constructor(e){super(),this.value=0,f.util.initPartial(e,this)}toJson(e){return f.json.writeScalar(E.FLOAT,this.value,!0)}fromJson(e,t){try{this.value=f.json.readScalar(E.FLOAT,e)}catch(r){let i='cannot decode message google.protobuf.FloatValue from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new nn().fromBinary(e,t)}static fromJson(e,t){return new nn().fromJson(e,t)}static fromJsonString(e,t){return new nn().fromJsonString(e,t)}static equals(e,t){return f.util.equals(nn,e,t)}}nn.runtime=f;nn.typeName="google.protobuf.FloatValue";nn.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:2}]);nn.fieldWrapper={wrapField(n){return new nn({value:n})},unwrapField(n){return n.value}};class xt extends D{constructor(e){super(),this.value=_.zero,f.util.initPartial(e,this)}toJson(e){return f.json.writeScalar(E.INT64,this.value,!0)}fromJson(e,t){try{this.value=f.json.readScalar(E.INT64,e)}catch(r){let i='cannot decode message google.protobuf.Int64Value from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new xt().fromBinary(e,t)}static fromJson(e,t){return new xt().fromJson(e,t)}static fromJsonString(e,t){return new xt().fromJsonString(e,t)}static equals(e,t){return f.util.equals(xt,e,t)}}xt.runtime=f;xt.typeName="google.protobuf.Int64Value";xt.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:3}]);xt.fieldWrapper={wrapField(n){return new xt({value:n})},unwrapField(n){return n.value}};class At extends D{constructor(e){super(),this.value=_.zero,f.util.initPartial(e,this)}toJson(e){return f.json.writeScalar(E.UINT64,this.value,!0)}fromJson(e,t){try{this.value=f.json.readScalar(E.UINT64,e)}catch(r){let i='cannot decode message google.protobuf.UInt64Value from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new At().fromBinary(e,t)}static fromJson(e,t){return new At().fromJson(e,t)}static fromJsonString(e,t){return new At().fromJsonString(e,t)}static equals(e,t){return f.util.equals(At,e,t)}}At.runtime=f;At.typeName="google.protobuf.UInt64Value";At.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:4}]);At.fieldWrapper={wrapField(n){return new At({value:n})},unwrapField(n){return n.value}};class it extends D{constructor(e){super(),this.value=0,f.util.initPartial(e,this)}toJson(e){return f.json.writeScalar(E.INT32,this.value,!0)}fromJson(e,t){try{this.value=f.json.readScalar(E.INT32,e)}catch(r){let i='cannot decode message google.protobuf.Int32Value from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new it().fromBinary(e,t)}static fromJson(e,t){return new it().fromJson(e,t)}static fromJsonString(e,t){return new it().fromJsonString(e,t)}static equals(e,t){return f.util.equals(it,e,t)}}it.runtime=f;it.typeName="google.protobuf.Int32Value";it.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:5}]);it.fieldWrapper={wrapField(n){return new it({value:n})},unwrapField(n){return n.value}};class rn extends D{constructor(e){super(),this.value=0,f.util.initPartial(e,this)}toJson(e){return f.json.writeScalar(E.UINT32,this.value,!0)}fromJson(e,t){try{this.value=f.json.readScalar(E.UINT32,e)}catch(r){let i='cannot decode message google.protobuf.UInt32Value from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new rn().fromBinary(e,t)}static fromJson(e,t){return new rn().fromJson(e,t)}static fromJsonString(e,t){return new rn().fromJsonString(e,t)}static equals(e,t){return f.util.equals(rn,e,t)}}rn.runtime=f;rn.typeName="google.protobuf.UInt32Value";rn.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:13}]);rn.fieldWrapper={wrapField(n){return new rn({value:n})},unwrapField(n){return n.value}};class Jt extends D{constructor(e){super(),this.value=!1,f.util.initPartial(e,this)}toJson(e){return f.json.writeScalar(E.BOOL,this.value,!0)}fromJson(e,t){try{this.value=f.json.readScalar(E.BOOL,e)}catch(r){let i='cannot decode message google.protobuf.BoolValue from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new Jt().fromBinary(e,t)}static fromJson(e,t){return new Jt().fromJson(e,t)}static fromJsonString(e,t){return new Jt().fromJsonString(e,t)}static equals(e,t){return f.util.equals(Jt,e,t)}}Jt.runtime=f;Jt.typeName="google.protobuf.BoolValue";Jt.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:8}]);Jt.fieldWrapper={wrapField(n){return new Jt({value:n})},unwrapField(n){return n.value}};class we extends D{constructor(e){super(),this.value="",f.util.initPartial(e,this)}toJson(e){return f.json.writeScalar(E.STRING,this.value,!0)}fromJson(e,t){try{this.value=f.json.readScalar(E.STRING,e)}catch(r){let i='cannot decode message google.protobuf.StringValue from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new we().fromBinary(e,t)}static fromJson(e,t){return new we().fromJson(e,t)}static fromJsonString(e,t){return new we().fromJsonString(e,t)}static equals(e,t){return f.util.equals(we,e,t)}}we.runtime=f;we.typeName="google.protobuf.StringValue";we.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:9}]);we.fieldWrapper={wrapField(n){return new we({value:n})},unwrapField(n){return n.value}};class sn extends D{constructor(e){super(),this.value=new Uint8Array(0),f.util.initPartial(e,this)}toJson(e){return f.json.writeScalar(E.BYTES,this.value,!0)}fromJson(e,t){try{this.value=f.json.readScalar(E.BYTES,e)}catch(r){let i='cannot decode message google.protobuf.BytesValue from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new sn().fromBinary(e,t)}static fromJson(e,t){return new sn().fromJson(e,t)}static fromJsonString(e,t){return new sn().fromJsonString(e,t)}static equals(e,t){return f.util.equals(sn,e,t)}}sn.runtime=f;sn.typeName="google.protobuf.BytesValue";sn.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:12}]);sn.fieldWrapper={wrapField(n){return new sn({value:n})},unwrapField(n){return n.value}};function Z1(n,e,t){try{const r=Fd.dec(n);return e?e.fromBinary(r,t):r}catch(r){throw ee.from(r,W.DataLoss)}}function eS(n,e){const t={};for(const[r,i]of Object.entries(n.methods)){const s=e(Object.assign(Object.assign({},i),{localName:r,service:n}));s!=null&&(t[r]=s)}return t}const Pm=1;function Dm(n){let e,t=new Uint8Array(0);function r(i){const s=new Uint8Array(t.length+i.length);s.set(t),s.set(i,t.length),t=s}return new ReadableStream({start(){e=n.getReader()},async pull(i){let s;for(;;){if(s===void 0&&t.byteLength>=5){let u=0;for(let c=1;c<5;c++)u=(u<<8)+t[c];s={flags:t[0],length:u}}if(s!==void 0&&t.byteLength>=s.length+5)break;const a=await e.read();if(a.done)break;r(a.value)}if(s===void 0){if(t.byteLength==0){i.close();return}i.error(new ee("premature end of stream",W.DataLoss));return}const o=t.subarray(5,5+s.length);t=t.subarray(5+s.length),i.enqueue({flags:s.flags,data:o})}})}function bm(n,e){const t=new Uint8Array(e.length+5);t.set(e,5);const r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.setUint8(0,n),r.setUint32(1,e.length),t}var tS=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof __values=="function"?__values(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,u){o=n[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(c){s({value:c,done:a})},o)}},Yo=function(n){return this instanceof Yo?(this.v=n,this):new Yo(n)},nS=function(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i={},a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(p){return function(y){return Promise.resolve(y).then(p,h)}}function a(p,y){r[p]&&(i[p]=function(w){return new Promise(function(A,v){s.push([p,w,A,v])>1||u(p,w)})},y&&(i[p]=y(i[p])))}function u(p,y){try{c(r[p](y))}catch(w){m(s[0][3],w)}}function c(p){p.value instanceof Yo?Promise.resolve(p.value.v).then(d,h):m(s[0][2],p)}function d(p){u("next",p)}function h(p){u("throw",p)}function m(p,y){p(y),s.shift(),s.length&&u(s[0][0],s[0][1])}},rS=function(n){var e,t;return e={},r("next"),r("throw",function(i){throw i}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(i,s){e[i]=n[i]?function(o){return(t=!t)?{value:Yo(n[i](o)),done:!1}:s?s(o):o}:s}};function iS(n){return nS(this,arguments,function*(){yield Yo(yield*rS(tS(n)))})}var Vy=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof __values=="function"?__values(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,u){o=n[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(c){s({value:c,done:a})},o)}},Bs=function(n){return this instanceof Bs?(this.v=n,this):new Bs(n)},sS=function(n){var e,t;return e={},r("next"),r("throw",function(i){throw i}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(i,s){e[i]=n[i]?function(o){return(t=!t)?{value:Bs(n[i](o)),done:!1}:s?s(o):o}:s}},oS=function(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i={},a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(p){return function(y){return Promise.resolve(y).then(p,h)}}function a(p,y){r[p]&&(i[p]=function(w){return new Promise(function(A,v){s.push([p,w,A,v])>1||u(p,w)})},y&&(i[p]=y(i[p])))}function u(p,y){try{c(r[p](y))}catch(w){m(s[0][3],w)}}function c(p){p.value instanceof Bs?Promise.resolve(p.value.v).then(d,h):m(s[0][2],p)}function d(p){u("next",p)}function h(p){u("throw",p)}function m(p,y){p(y),s.shift(),s.length&&u(s[0][0],s[0][1])}};function aS(n,e){return eS(n,t=>{switch(t.kind){case ke.Unary:return lS(e,n,t);case ke.ServerStreaming:return uS(e,n,t);case ke.ClientStreaming:return cS(e,n,t);case ke.BiDiStreaming:return fS(e,n,t);default:return null}})}function lS(n,e,t){return async function(r,i){var s,o;const a=await n.unary(e,t,i==null?void 0:i.signal,i==null?void 0:i.timeoutMs,i==null?void 0:i.headers,r,i==null?void 0:i.contextValues);return(s=i==null?void 0:i.onHeader)===null||s===void 0||s.call(i,a.header),(o=i==null?void 0:i.onTrailer)===null||o===void 0||o.call(i,a.trailer),a.message}}function uS(n,e,t){return function(r,i){return qy(n.stream(e,t,i==null?void 0:i.signal,i==null?void 0:i.timeoutMs,i==null?void 0:i.headers,iS([r]),i==null?void 0:i.contextValues),i)}}function cS(n,e,t){return async function(r,i){var s,o,a,u,c,d;const h=await n.stream(e,t,i==null?void 0:i.signal,i==null?void 0:i.timeoutMs,i==null?void 0:i.headers,r,i==null?void 0:i.contextValues);(c=i==null?void 0:i.onHeader)===null||c===void 0||c.call(i,h.header);let m,p=0;try{for(var y=!0,w=Vy(h.message),A;A=await w.next(),s=A.done,!s;y=!0)u=A.value,y=!1,m=u,p++}catch(v){o={error:v}}finally{try{!y&&!s&&(a=w.return)&&await a.call(w)}finally{if(o)throw o.error}}if(!m)throw new ee("protocol error: missing response message",W.Unimplemented);if(p>1)throw new ee("protocol error: received extra messages for client streaming method",W.Unimplemented);return(d=i==null?void 0:i.onTrailer)===null||d===void 0||d.call(i,h.trailer),m}}function fS(n,e,t){return function(r,i){return qy(n.stream(e,t,i==null?void 0:i.signal,i==null?void 0:i.timeoutMs,i==null?void 0:i.headers,r,i==null?void 0:i.contextValues),i)}}function qy(n,e){const t=function(){return oS(this,arguments,function*(){var r,i;const s=yield Bs(n);(r=e==null?void 0:e.onHeader)===null||r===void 0||r.call(e,s.header),yield Bs(yield*sS(Vy(s.message))),(i=e==null?void 0:e.onTrailer)===null||i===void 0||i.call(e,s.trailer)})}()[Symbol.asyncIterator]();return{[Symbol.asyncIterator]:()=>({next:()=>t.next()})}}function dS(...n){const e=new AbortController,t=n.filter(i=>i!==void 0).concat(e.signal);for(const i of t){if(i.aborted){r.apply(i);break}i.addEventListener("abort",r)}function r(){e.signal.aborted||e.abort(Ky(this));for(const i of t)i.removeEventListener("abort",r)}return e}function hS(n){const e=new AbortController,t=()=>{e.abort(new ee("the operation timed out",W.DeadlineExceeded))};let r;return n!==void 0&&(n<=0?t():r=setTimeout(t,n)),{signal:e.signal,cleanup:()=>clearTimeout(r)}}function Ky(n){if(!n.aborted)return;if(n.reason!==void 0)return n.reason;const e=new Error("This operation was aborted");return e.name="AbortError",e}function Om(){return{get(n){return n.id in this?this[n.id]:n.defaultValue},set(n,e){return this[n.id]=e,this},delete(n){return delete this[n.id],this}}}const nc=128;function Lm(n){const e=new Headers,t=new TextDecoder().decode(n).split(`\r
`);for(const r of t){if(r==="")continue;const i=r.indexOf(":");if(i>0){const s=r.substring(0,i).trim(),o=r.substring(i+1).trim();e.append(s,o)}}return e}const mS="Content-Type",gS="Grpc-Timeout",zs="Grpc-Status",Wy="Grpc-Message",pS="Grpc-Status-Details-Bin",yS="X-User-Agent",vS="X-Grpc-Web",wS="application/grpc-web+proto",SS="application/grpc-web+json";class $r extends D{constructor(e){super(),this.code=0,this.message="",this.details=[],f.util.initPartial(e,this)}static fromBinary(e,t){return new $r().fromBinary(e,t)}static fromJson(e,t){return new $r().fromJson(e,t)}static fromJsonString(e,t){return new $r().fromJsonString(e,t)}static equals(e,t){return f.util.equals($r,e,t)}}$r.runtime=f;$r.typeName="google.rpc.Status";$r.fields=f.util.newFieldList(()=>[{no:1,name:"code",kind:"scalar",T:5},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"details",kind:"message",T:en,repeated:!0}]);const kS="0";function Hy(n){var e;const t=n.get(pS);if(t!=null){const i=Z1(t,$r);if(i.code==0)return;const s=new ee(i.message,i.code,n);return s.details=i.details.map(o=>({type:o.typeUrl.substring(o.typeUrl.lastIndexOf("/")+1),value:o.value})),s}const r=n.get(zs);if(r!=null){if(r===kS)return;const i=parseInt(r,10);return i in W?new ee(decodeURIComponent((e=n.get(Wy))!==null&&e!==void 0?e:""),i,n):new ee(`invalid grpc-status: ${r}`,W.Internal,n)}}function Rm(n,e,t){const r=typeof e=="string"?e:e.typeName,i=typeof t=="string"?t:t.name;return n.toString().replace(/\/?$/,`/${r}/${i}`)}function _y(n,e){return e instanceof n?e:new n(e)}function TS(n,e){function t(r){return r.done===!0?r:{done:r.done,value:_y(n,r.value)}}return{[Symbol.asyncIterator](){const r=e[Symbol.asyncIterator](),i={next:()=>r.next().then(t)};return r.throw!==void 0&&(i.throw=s=>r.throw(s).then(t)),r.return!==void 0&&(i.return=s=>r.return(s).then(t)),i}}}function Gy(n,e){var t;return(t=e==null?void 0:e.concat().reverse().reduce((r,i)=>i(r),n))!==null&&t!==void 0?t:n}function IS(n){var e;const t=Object.assign({},n);return(e=t.ignoreUnknownFields)!==null&&e!==void 0||(t.ignoreUnknownFields=!0),t}function Bm(n,e,t,r){const i=e?zm(n.I,r):Mm(n.I,t);return{parse:(e?zm(n.O,r):Mm(n.O,t)).parse,serialize:i.serialize}}function zm(n,e){return{parse(t){try{return n.fromBinary(t,e)}catch(r){const i=r instanceof Error?r.message:String(r);throw new ee(`parse binary: ${i}`,W.Internal)}},serialize(t){try{return t.toBinary(e)}catch(r){const i=r instanceof Error?r.message:String(r);throw new ee(`serialize binary: ${i}`,W.Internal)}}}}function Mm(n,e){var t,r;const i=(t=e==null?void 0:e.textEncoder)!==null&&t!==void 0?t:new TextEncoder,s=(r=e==null?void 0:e.textDecoder)!==null&&r!==void 0?r:new TextDecoder,o=IS(e);return{parse(a){try{const u=s.decode(a);return n.fromJsonString(u,o)}catch(u){throw ee.from(u,W.InvalidArgument)}},serialize(a){try{const u=a.toJsonString(o);return i.encode(u)}catch(u){throw ee.from(u,W.Internal)}}}}function xS(n){const e=Gy(n.next,n.interceptors),[t,r,i]=Yy(n),s=Object.assign(Object.assign({},n.req),{message:_y(n.req.method.I,n.req.message),signal:t});return e(s).then(o=>(i(),o),r)}function AS(n){const e=Gy(n.next,n.interceptors),[t,r,i]=Yy(n),s=Object.assign(Object.assign({},n.req),{message:TS(n.req.method.I,n.req.message),signal:t});let o=!1;return t.addEventListener("abort",function(){var a,u;const c=n.req.message[Symbol.asyncIterator]();o||(a=c.throw)===null||a===void 0||a.call(c,this.reason).catch(()=>{}),(u=c.return)===null||u===void 0||u.call(c).catch(()=>{})}),e(s).then(a=>Object.assign(Object.assign({},a),{message:{[Symbol.asyncIterator](){const u=a.message[Symbol.asyncIterator]();return{next(){return u.next().then(c=>(c.done==!0&&(o=!0,i()),c),r)}}}}}),r)}function Yy(n){const{signal:e,cleanup:t}=hS(n.timeoutMs),r=dS(n.signal,e);return[r.signal,function(s){const o=ee.from(e.aborted?Ky(e):s);return r.abort(o),t(),Promise.reject(o)},function(){t(),r.abort()}]}function ES(){try{new Headers}catch{throw new Error("connect-web requires the fetch API. Are you running on an old version of Node.js? Node.js is not supported in Connect for Web - please stay tuned for Connect for Node.")}}function $m(n,e){const t=Hy(n);if(t)throw e.forEach((r,i)=>{t.metadata.append(i,r)}),t;if(!e.has(zs)&&!n.has(zs))throw new ee("protocol error: missing status",W.Internal)}function Fm(n,e,t,r){const i=new Headers(t??{});return i.set(mS,n?wS:SS),i.set(vS,"1"),i.set(yS,"connect-es/1.6.1"),e!==void 0&&i.set(gS,`${e}m`),i}function CS(n){switch(n){case 400:return W.Internal;case 401:return W.Unauthenticated;case 403:return W.PermissionDenied;case 404:return W.Unimplemented;case 429:return W.Unavailable;case 502:return W.Unavailable;case 503:return W.Unavailable;case 504:return W.Unavailable;default:return W.Unknown}}function Jm(n,e){var t;if(n>=200&&n<300)return{foundStatus:e.has(zs),headerError:Hy(e)};throw new ee(decodeURIComponent((t=e.get(Wy))!==null&&t!==void 0?t:`HTTP ${n}`),CS(n),e)}var Mi=function(n){return this instanceof Mi?(this.v=n,this):new Mi(n)},NS=function(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i={},a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(p){return function(y){return Promise.resolve(y).then(p,h)}}function a(p,y){r[p]&&(i[p]=function(w){return new Promise(function(A,v){s.push([p,w,A,v])>1||u(p,w)})},y&&(i[p]=y(i[p])))}function u(p,y){try{c(r[p](y))}catch(w){m(s[0][3],w)}}function c(p){p.value instanceof Mi?Promise.resolve(p.value.v).then(d,h):m(s[0][2],p)}function d(p){u("next",p)}function h(p){u("throw",p)}function m(p,y){p(y),s.shift(),s.length&&u(s[0][0],s[0][1])}};function PS(n){var e;ES();const t=(e=n.useBinaryFormat)!==null&&e!==void 0?e:!0;return{async unary(r,i,s,o,a,u,c){var d;const{serialize:h,parse:m}=Bm(i,t,n.jsonOptions,n.binaryOptions);return o=o===void 0?n.defaultTimeoutMs:o<=0?void 0:o,await xS({interceptors:n.interceptors,signal:s,timeoutMs:o,req:{stream:!1,service:r,method:i,url:Rm(n.baseUrl,r,i),init:{method:"POST",credentials:(d=n.credentials)!==null&&d!==void 0?d:"same-origin",redirect:"error",mode:"cors"},header:Fm(t,o,a),contextValues:c??Om(),message:u},next:async p=>{var y;const A=await((y=n.fetch)!==null&&y!==void 0?y:globalThis.fetch)(p.url,Object.assign(Object.assign({},p.init),{headers:p.header,signal:p.signal,body:bm(0,h(p.message))})),{headerError:v}=Jm(A.status,A.headers);if(!A.body)throw v!==void 0?v:"missing response body";const g=Dm(A.body).getReader();let S,I;for(;;){const N=await g.read();if(N.done)break;const{flags:x,data:C}=N.value;if((x&Pm)===Pm)throw new ee("protocol error: received unsupported compressed output",W.Internal);if(x===nc){if(S!==void 0)throw"extra trailer";S=Lm(C);continue}if(I!==void 0)throw new ee("extra message",W.Unimplemented);I=m(C)}if(S===void 0)throw v!==void 0?v:new ee("missing trailer",A.headers.has(zs)?W.Unimplemented:W.Unknown);if($m(S,A.headers),I===void 0)throw new ee("missing message",S.has(zs)?W.Unimplemented:W.Unknown);return{stream:!1,service:r,method:i,header:A.headers,message:I,trailer:S}}})},async stream(r,i,s,o,a,u,c){var d;const{serialize:h,parse:m}=Bm(i,t,n.jsonOptions,n.binaryOptions);function p(w,A,v,g,S){return NS(this,arguments,function*(){const N=Dm(w).getReader();if(A){if(!(yield Mi(N.read())).done)throw"extra data for trailers-only";return yield Mi(void 0)}let x=!1;for(;;){const C=yield Mi(N.read());if(C.done)break;const{flags:O,data:M}=C.value;if((O&nc)===nc){if(x)throw"extra trailer";x=!0;const J=Lm(M);$m(J,g),J.forEach((me,tt)=>v.set(tt,me));continue}if(x)throw"extra message";yield yield Mi(m(M))}if("throwIfAborted"in S&&S.throwIfAborted(),!x)throw"missing trailer"})}async function y(w){if(i.kind!=ke.ServerStreaming)throw"The fetch API does not support streaming request bodies";const A=await w[Symbol.asyncIterator]().next();if(A.done==!0)throw"missing request message";return bm(0,h(A.value))}return o=o===void 0?n.defaultTimeoutMs:o<=0?void 0:o,AS({interceptors:n.interceptors,signal:s,timeoutMs:o,req:{stream:!0,service:r,method:i,url:Rm(n.baseUrl,r,i),init:{method:"POST",credentials:(d=n.credentials)!==null&&d!==void 0?d:"same-origin",redirect:"error",mode:"cors"},header:Fm(t,o,a),contextValues:c??Om(),message:u},next:async w=>{var A;const g=await((A=n.fetch)!==null&&A!==void 0?A:globalThis.fetch)(w.url,Object.assign(Object.assign({},w.init),{headers:w.header,signal:w.signal,body:await y(w.message)})),{foundStatus:S,headerError:I}=Jm(g.status,g.headers);if(I!=null)throw I;if(!g.body)throw"missing response body";const N=new Headers;return Object.assign(Object.assign({},w),{header:g.headers,trailer:N,message:p(g.body,S,N,g.headers,w.signal)})}})}}}var V=(n=>(n[n.NULL=0]="NULL",n[n.BOOLEAN=1]="BOOLEAN",n[n.INTEGER=2]="INTEGER",n[n.LONG=3]="LONG",n[n.DOUBLE=4]="DOUBLE",n[n.STRING=5]="STRING",n[n.BYTES=6]="BYTES",n[n.DATE=7]="DATE",n[n.JSON_OBJECT=8]="JSON_OBJECT",n[n.JSON_ARRAY=9]="JSON_ARRAY",n[n.TEXT=10]="TEXT",n[n.INTEGER_CNT=11]="INTEGER_CNT",n[n.LONG_CNT=12]="LONG_CNT",n[n.TREE=13]="TREE",n))(V||{});f.util.setEnumType(V,"yorkie.v1.ValueType",[{no:0,name:"VALUE_TYPE_NULL"},{no:1,name:"VALUE_TYPE_BOOLEAN"},{no:2,name:"VALUE_TYPE_INTEGER"},{no:3,name:"VALUE_TYPE_LONG"},{no:4,name:"VALUE_TYPE_DOUBLE"},{no:5,name:"VALUE_TYPE_STRING"},{no:6,name:"VALUE_TYPE_BYTES"},{no:7,name:"VALUE_TYPE_DATE"},{no:8,name:"VALUE_TYPE_JSON_OBJECT"},{no:9,name:"VALUE_TYPE_JSON_ARRAY"},{no:10,name:"VALUE_TYPE_TEXT"},{no:11,name:"VALUE_TYPE_INTEGER_CNT"},{no:12,name:"VALUE_TYPE_LONG_CNT"},{no:13,name:"VALUE_TYPE_TREE"}]);var Ms=(n=>(n[n.DOCUMENT_CHANGED=0]="DOCUMENT_CHANGED",n[n.DOCUMENT_WATCHED=1]="DOCUMENT_WATCHED",n[n.DOCUMENT_UNWATCHED=2]="DOCUMENT_UNWATCHED",n[n.DOCUMENT_BROADCAST=3]="DOCUMENT_BROADCAST",n))(Ms||{});f.util.setEnumType(Ms,"yorkie.v1.DocEventType",[{no:0,name:"DOC_EVENT_TYPE_DOCUMENT_CHANGED"},{no:1,name:"DOC_EVENT_TYPE_DOCUMENT_WATCHED"},{no:2,name:"DOC_EVENT_TYPE_DOCUMENT_UNWATCHED"},{no:3,name:"DOC_EVENT_TYPE_DOCUMENT_BROADCAST"}]);const pn=class pn extends D{constructor(t){super();l(this,"root");l(this,"presences",{});f.util.initPartial(t,this)}static fromBinary(t,r){return new pn().fromBinary(t,r)}static fromJson(t,r){return new pn().fromJson(t,r)}static fromJsonString(t,r){return new pn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(pn,t,r)}};l(pn,"runtime",f),l(pn,"typeName","yorkie.v1.Snapshot"),l(pn,"fields",f.util.newFieldList(()=>[{no:1,name:"root",kind:"message",T:et},{no:2,name:"presences",kind:"map",K:9,V:{kind:"message",T:Fs}}]));let tf=pn;var gt;let Yr=(gt=class extends D{constructor(t){super();l(this,"documentKey","");l(this,"checkpoint");l(this,"snapshot",new Uint8Array(0));l(this,"changes",[]);l(this,"minSyncedTicket");l(this,"isRemoved",!1);l(this,"versionVector");f.util.initPartial(t,this)}static fromBinary(t,r){return new gt().fromBinary(t,r)}static fromJson(t,r){return new gt().fromJson(t,r)}static fromJsonString(t,r){return new gt().fromJsonString(t,r)}static equals(t,r){return f.util.equals(gt,t,r)}},l(gt,"runtime",f),l(gt,"typeName","yorkie.v1.ChangePack"),l(gt,"fields",f.util.newFieldList(()=>[{no:1,name:"document_key",kind:"scalar",T:9},{no:2,name:"checkpoint",kind:"message",T:Zy},{no:3,name:"snapshot",kind:"scalar",T:12},{no:4,name:"changes",kind:"message",T:Xy,repeated:!0},{no:5,name:"min_synced_ticket",kind:"message",T:$},{no:6,name:"is_removed",kind:"scalar",T:8},{no:7,name:"version_vector",kind:"message",T:wu}])),gt);var pt;let Xy=(pt=class extends D{constructor(t){super();l(this,"id");l(this,"message","");l(this,"operations",[]);l(this,"presenceChange");f.util.initPartial(t,this)}static fromBinary(t,r){return new pt().fromBinary(t,r)}static fromJson(t,r){return new pt().fromJson(t,r)}static fromJsonString(t,r){return new pt().fromJsonString(t,r)}static equals(t,r){return f.util.equals(pt,t,r)}},l(pt,"runtime",f),l(pt,"typeName","yorkie.v1.Change"),l(pt,"fields",f.util.newFieldList(()=>[{no:1,name:"id",kind:"message",T:vu},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"operations",kind:"message",T:Jd,repeated:!0},{no:4,name:"presence_change",kind:"message",T:Zo}])),pt);var yt;let vu=(yt=class extends D{constructor(t){super();l(this,"clientSeq",0);l(this,"serverSeq",_.zero);l(this,"lamport",_.zero);l(this,"actorId",new Uint8Array(0));l(this,"versionVector");f.util.initPartial(t,this)}static fromBinary(t,r){return new yt().fromBinary(t,r)}static fromJson(t,r){return new yt().fromJson(t,r)}static fromJsonString(t,r){return new yt().fromJsonString(t,r)}static equals(t,r){return f.util.equals(yt,t,r)}},l(yt,"runtime",f),l(yt,"typeName","yorkie.v1.ChangeID"),l(yt,"fields",f.util.newFieldList(()=>[{no:1,name:"client_seq",kind:"scalar",T:13},{no:2,name:"server_seq",kind:"scalar",T:3},{no:3,name:"lamport",kind:"scalar",T:3},{no:4,name:"actor_id",kind:"scalar",T:12},{no:5,name:"version_vector",kind:"message",T:wu}])),yt);var vt;let wu=(vt=class extends D{constructor(t){super();l(this,"vector",{});f.util.initPartial(t,this)}static fromBinary(t,r){return new vt().fromBinary(t,r)}static fromJson(t,r){return new vt().fromJson(t,r)}static fromJsonString(t,r){return new vt().fromJsonString(t,r)}static equals(t,r){return f.util.equals(vt,t,r)}},l(vt,"runtime",f),l(vt,"typeName","yorkie.v1.VersionVector"),l(vt,"fields",f.util.newFieldList(()=>[{no:1,name:"vector",kind:"map",K:9,V:{kind:"scalar",T:3}}])),vt);var wt;let Jd=(wt=class extends D{constructor(t){super();l(this,"body",{case:void 0});f.util.initPartial(t,this)}static fromBinary(t,r){return new wt().fromBinary(t,r)}static fromJson(t,r){return new wt().fromJson(t,r)}static fromJsonString(t,r){return new wt().fromJsonString(t,r)}static equals(t,r){return f.util.equals(wt,t,r)}},l(wt,"runtime",f),l(wt,"typeName","yorkie.v1.Operation"),l(wt,"fields",f.util.newFieldList(()=>[{no:1,name:"set",kind:"message",T:Dl,oneof:"body"},{no:2,name:"add",kind:"message",T:bl,oneof:"body"},{no:3,name:"move",kind:"message",T:Ol,oneof:"body"},{no:4,name:"remove",kind:"message",T:Ll,oneof:"body"},{no:5,name:"edit",kind:"message",T:Rl,oneof:"body"},{no:7,name:"style",kind:"message",T:Bl,oneof:"body"},{no:8,name:"increase",kind:"message",T:zl,oneof:"body"},{no:9,name:"tree_edit",kind:"message",T:Ml,oneof:"body"},{no:10,name:"tree_style",kind:"message",T:$l,oneof:"body"},{no:11,name:"array_set",kind:"message",T:Fl,oneof:"body"}])),wt);const yn=class yn extends D{constructor(t){super();l(this,"parentCreatedAt");l(this,"key","");l(this,"value");l(this,"executedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new yn().fromBinary(t,r)}static fromJson(t,r){return new yn().fromJson(t,r)}static fromJsonString(t,r){return new yn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(yn,t,r)}};l(yn,"runtime",f),l(yn,"typeName","yorkie.v1.Operation.Set"),l(yn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:$},{no:2,name:"key",kind:"scalar",T:9},{no:3,name:"value",kind:"message",T:mt},{no:4,name:"executed_at",kind:"message",T:$}]));let Dl=yn;const vn=class vn extends D{constructor(t){super();l(this,"parentCreatedAt");l(this,"prevCreatedAt");l(this,"value");l(this,"executedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new vn().fromBinary(t,r)}static fromJson(t,r){return new vn().fromJson(t,r)}static fromJsonString(t,r){return new vn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(vn,t,r)}};l(vn,"runtime",f),l(vn,"typeName","yorkie.v1.Operation.Add"),l(vn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:$},{no:2,name:"prev_created_at",kind:"message",T:$},{no:3,name:"value",kind:"message",T:mt},{no:4,name:"executed_at",kind:"message",T:$}]));let bl=vn;const wn=class wn extends D{constructor(t){super();l(this,"parentCreatedAt");l(this,"prevCreatedAt");l(this,"createdAt");l(this,"executedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new wn().fromBinary(t,r)}static fromJson(t,r){return new wn().fromJson(t,r)}static fromJsonString(t,r){return new wn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(wn,t,r)}};l(wn,"runtime",f),l(wn,"typeName","yorkie.v1.Operation.Move"),l(wn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:$},{no:2,name:"prev_created_at",kind:"message",T:$},{no:3,name:"created_at",kind:"message",T:$},{no:4,name:"executed_at",kind:"message",T:$}]));let Ol=wn;const Sn=class Sn extends D{constructor(t){super();l(this,"parentCreatedAt");l(this,"createdAt");l(this,"executedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new Sn().fromBinary(t,r)}static fromJson(t,r){return new Sn().fromJson(t,r)}static fromJsonString(t,r){return new Sn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Sn,t,r)}};l(Sn,"runtime",f),l(Sn,"typeName","yorkie.v1.Operation.Remove"),l(Sn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:$},{no:2,name:"created_at",kind:"message",T:$},{no:3,name:"executed_at",kind:"message",T:$}]));let Ll=Sn;const kn=class kn extends D{constructor(t){super();l(this,"parentCreatedAt");l(this,"from");l(this,"to");l(this,"createdAtMapByActor",{});l(this,"content","");l(this,"executedAt");l(this,"attributes",{});f.util.initPartial(t,this)}static fromBinary(t,r){return new kn().fromBinary(t,r)}static fromJson(t,r){return new kn().fromJson(t,r)}static fromJsonString(t,r){return new kn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(kn,t,r)}};l(kn,"runtime",f),l(kn,"typeName","yorkie.v1.Operation.Edit"),l(kn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:$},{no:2,name:"from",kind:"message",T:_i},{no:3,name:"to",kind:"message",T:_i},{no:4,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:$}},{no:5,name:"content",kind:"scalar",T:9},{no:6,name:"executed_at",kind:"message",T:$},{no:7,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}}]));let Rl=kn;const Tn=class Tn extends D{constructor(t){super();l(this,"parentCreatedAt");l(this,"from");l(this,"to");l(this,"attributes",{});l(this,"executedAt");l(this,"createdAtMapByActor",{});f.util.initPartial(t,this)}static fromBinary(t,r){return new Tn().fromBinary(t,r)}static fromJson(t,r){return new Tn().fromJson(t,r)}static fromJsonString(t,r){return new Tn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Tn,t,r)}};l(Tn,"runtime",f),l(Tn,"typeName","yorkie.v1.Operation.Style"),l(Tn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:$},{no:2,name:"from",kind:"message",T:_i},{no:3,name:"to",kind:"message",T:_i},{no:4,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:5,name:"executed_at",kind:"message",T:$},{no:6,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:$}}]));let Bl=Tn;const In=class In extends D{constructor(t){super();l(this,"parentCreatedAt");l(this,"value");l(this,"executedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new In().fromBinary(t,r)}static fromJson(t,r){return new In().fromJson(t,r)}static fromJsonString(t,r){return new In().fromJsonString(t,r)}static equals(t,r){return f.util.equals(In,t,r)}};l(In,"runtime",f),l(In,"typeName","yorkie.v1.Operation.Increase"),l(In,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:$},{no:2,name:"value",kind:"message",T:mt},{no:3,name:"executed_at",kind:"message",T:$}]));let zl=In;const xn=class xn extends D{constructor(t){super();l(this,"parentCreatedAt");l(this,"from");l(this,"to");l(this,"createdAtMapByActor",{});l(this,"contents",[]);l(this,"splitLevel",0);l(this,"executedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new xn().fromBinary(t,r)}static fromJson(t,r){return new xn().fromJson(t,r)}static fromJsonString(t,r){return new xn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(xn,t,r)}};l(xn,"runtime",f),l(xn,"typeName","yorkie.v1.Operation.TreeEdit"),l(xn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:$},{no:2,name:"from",kind:"message",T:Wi},{no:3,name:"to",kind:"message",T:Wi},{no:4,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:$}},{no:5,name:"contents",kind:"message",T:_l,repeated:!0},{no:7,name:"split_level",kind:"scalar",T:5},{no:6,name:"executed_at",kind:"message",T:$}]));let Ml=xn;const An=class An extends D{constructor(t){super();l(this,"parentCreatedAt");l(this,"from");l(this,"to");l(this,"attributes",{});l(this,"executedAt");l(this,"attributesToRemove",[]);l(this,"createdAtMapByActor",{});f.util.initPartial(t,this)}static fromBinary(t,r){return new An().fromBinary(t,r)}static fromJson(t,r){return new An().fromJson(t,r)}static fromJsonString(t,r){return new An().fromJsonString(t,r)}static equals(t,r){return f.util.equals(An,t,r)}};l(An,"runtime",f),l(An,"typeName","yorkie.v1.Operation.TreeStyle"),l(An,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:$},{no:2,name:"from",kind:"message",T:Wi},{no:3,name:"to",kind:"message",T:Wi},{no:4,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:5,name:"executed_at",kind:"message",T:$},{no:6,name:"attributes_to_remove",kind:"scalar",T:9,repeated:!0},{no:7,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:$}}]));let $l=An;const En=class En extends D{constructor(t){super();l(this,"parentCreatedAt");l(this,"createdAt");l(this,"value");l(this,"executedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new En().fromBinary(t,r)}static fromJson(t,r){return new En().fromJson(t,r)}static fromJsonString(t,r){return new En().fromJsonString(t,r)}static equals(t,r){return f.util.equals(En,t,r)}};l(En,"runtime",f),l(En,"typeName","yorkie.v1.Operation.ArraySet"),l(En,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:$},{no:2,name:"created_at",kind:"message",T:$},{no:3,name:"value",kind:"message",T:mt},{no:4,name:"executed_at",kind:"message",T:$}]));let Fl=En;const Cn=class Cn extends D{constructor(t){super();l(this,"createdAt");l(this,"movedAt");l(this,"removedAt");l(this,"type",0);l(this,"value",new Uint8Array(0));f.util.initPartial(t,this)}static fromBinary(t,r){return new Cn().fromBinary(t,r)}static fromJson(t,r){return new Cn().fromJson(t,r)}static fromJsonString(t,r){return new Cn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Cn,t,r)}};l(Cn,"runtime",f),l(Cn,"typeName","yorkie.v1.JSONElementSimple"),l(Cn,"fields",f.util.newFieldList(()=>[{no:1,name:"created_at",kind:"message",T:$},{no:2,name:"moved_at",kind:"message",T:$},{no:3,name:"removed_at",kind:"message",T:$},{no:4,name:"type",kind:"enum",T:f.getEnumType(V)},{no:5,name:"value",kind:"scalar",T:12}]));let mt=Cn;const Nn=class Nn extends D{constructor(t){super();l(this,"body",{case:void 0});f.util.initPartial(t,this)}static fromBinary(t,r){return new Nn().fromBinary(t,r)}static fromJson(t,r){return new Nn().fromJson(t,r)}static fromJsonString(t,r){return new Nn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Nn,t,r)}};l(Nn,"runtime",f),l(Nn,"typeName","yorkie.v1.JSONElement"),l(Nn,"fields",f.util.newFieldList(()=>[{no:1,name:"json_object",kind:"message",T:Jl,oneof:"body"},{no:2,name:"json_array",kind:"message",T:Ul,oneof:"body"},{no:3,name:"primitive",kind:"message",T:jl,oneof:"body"},{no:5,name:"text",kind:"message",T:Vl,oneof:"body"},{no:6,name:"counter",kind:"message",T:ql,oneof:"body"},{no:7,name:"tree",kind:"message",T:Kl,oneof:"body"}]));let et=Nn;const Pn=class Pn extends D{constructor(t){super();l(this,"nodes",[]);l(this,"createdAt");l(this,"movedAt");l(this,"removedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new Pn().fromBinary(t,r)}static fromJson(t,r){return new Pn().fromJson(t,r)}static fromJsonString(t,r){return new Pn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Pn,t,r)}};l(Pn,"runtime",f),l(Pn,"typeName","yorkie.v1.JSONElement.JSONObject"),l(Pn,"fields",f.util.newFieldList(()=>[{no:1,name:"nodes",kind:"message",T:Qy,repeated:!0},{no:2,name:"created_at",kind:"message",T:$},{no:3,name:"moved_at",kind:"message",T:$},{no:4,name:"removed_at",kind:"message",T:$}]));let Jl=Pn;const Dn=class Dn extends D{constructor(t){super();l(this,"nodes",[]);l(this,"createdAt");l(this,"movedAt");l(this,"removedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new Dn().fromBinary(t,r)}static fromJson(t,r){return new Dn().fromJson(t,r)}static fromJsonString(t,r){return new Dn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Dn,t,r)}};l(Dn,"runtime",f),l(Dn,"typeName","yorkie.v1.JSONElement.JSONArray"),l(Dn,"fields",f.util.newFieldList(()=>[{no:1,name:"nodes",kind:"message",T:Wl,repeated:!0},{no:2,name:"created_at",kind:"message",T:$},{no:3,name:"moved_at",kind:"message",T:$},{no:4,name:"removed_at",kind:"message",T:$}]));let Ul=Dn;const bn=class bn extends D{constructor(t){super();l(this,"type",0);l(this,"value",new Uint8Array(0));l(this,"createdAt");l(this,"movedAt");l(this,"removedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new bn().fromBinary(t,r)}static fromJson(t,r){return new bn().fromJson(t,r)}static fromJsonString(t,r){return new bn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(bn,t,r)}};l(bn,"runtime",f),l(bn,"typeName","yorkie.v1.JSONElement.Primitive"),l(bn,"fields",f.util.newFieldList(()=>[{no:1,name:"type",kind:"enum",T:f.getEnumType(V)},{no:2,name:"value",kind:"scalar",T:12},{no:3,name:"created_at",kind:"message",T:$},{no:4,name:"moved_at",kind:"message",T:$},{no:5,name:"removed_at",kind:"message",T:$}]));let jl=bn;const On=class On extends D{constructor(t){super();l(this,"nodes",[]);l(this,"createdAt");l(this,"movedAt");l(this,"removedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new On().fromBinary(t,r)}static fromJson(t,r){return new On().fromJson(t,r)}static fromJsonString(t,r){return new On().fromJsonString(t,r)}static equals(t,r){return f.util.equals(On,t,r)}};l(On,"runtime",f),l(On,"typeName","yorkie.v1.JSONElement.Text"),l(On,"fields",f.util.newFieldList(()=>[{no:1,name:"nodes",kind:"message",T:Hl,repeated:!0},{no:2,name:"created_at",kind:"message",T:$},{no:3,name:"moved_at",kind:"message",T:$},{no:4,name:"removed_at",kind:"message",T:$}]));let Vl=On;const Ln=class Ln extends D{constructor(t){super();l(this,"type",0);l(this,"value",new Uint8Array(0));l(this,"createdAt");l(this,"movedAt");l(this,"removedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new Ln().fromBinary(t,r)}static fromJson(t,r){return new Ln().fromJson(t,r)}static fromJsonString(t,r){return new Ln().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Ln,t,r)}};l(Ln,"runtime",f),l(Ln,"typeName","yorkie.v1.JSONElement.Counter"),l(Ln,"fields",f.util.newFieldList(()=>[{no:1,name:"type",kind:"enum",T:f.getEnumType(V)},{no:2,name:"value",kind:"scalar",T:12},{no:3,name:"created_at",kind:"message",T:$},{no:4,name:"moved_at",kind:"message",T:$},{no:5,name:"removed_at",kind:"message",T:$}]));let ql=Ln;const Rn=class Rn extends D{constructor(t){super();l(this,"nodes",[]);l(this,"createdAt");l(this,"movedAt");l(this,"removedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new Rn().fromBinary(t,r)}static fromJson(t,r){return new Rn().fromJson(t,r)}static fromJsonString(t,r){return new Rn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Rn,t,r)}};l(Rn,"runtime",f),l(Rn,"typeName","yorkie.v1.JSONElement.Tree"),l(Rn,"fields",f.util.newFieldList(()=>[{no:1,name:"nodes",kind:"message",T:Qo,repeated:!0},{no:2,name:"created_at",kind:"message",T:$},{no:3,name:"moved_at",kind:"message",T:$},{no:4,name:"removed_at",kind:"message",T:$}]));let Kl=Rn;var St;let Qy=(St=class extends D{constructor(t){super();l(this,"key","");l(this,"element");f.util.initPartial(t,this)}static fromBinary(t,r){return new St().fromBinary(t,r)}static fromJson(t,r){return new St().fromJson(t,r)}static fromJsonString(t,r){return new St().fromJsonString(t,r)}static equals(t,r){return f.util.equals(St,t,r)}},l(St,"runtime",f),l(St,"typeName","yorkie.v1.RHTNode"),l(St,"fields",f.util.newFieldList(()=>[{no:1,name:"key",kind:"scalar",T:9},{no:2,name:"element",kind:"message",T:et}])),St);const Xt=class Xt extends D{constructor(t){super();l(this,"next");l(this,"element");f.util.initPartial(t,this)}static fromBinary(t,r){return new Xt().fromBinary(t,r)}static fromJson(t,r){return new Xt().fromJson(t,r)}static fromJsonString(t,r){return new Xt().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Xt,t,r)}};l(Xt,"runtime",f),l(Xt,"typeName","yorkie.v1.RGANode"),l(Xt,"fields",f.util.newFieldList(()=>[{no:1,name:"next",kind:"message",T:Xt},{no:2,name:"element",kind:"message",T:et}]));let Wl=Xt;const Bn=class Bn extends D{constructor(t){super();l(this,"value","");l(this,"updatedAt");l(this,"isRemoved",!1);f.util.initPartial(t,this)}static fromBinary(t,r){return new Bn().fromBinary(t,r)}static fromJson(t,r){return new Bn().fromJson(t,r)}static fromJsonString(t,r){return new Bn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Bn,t,r)}};l(Bn,"runtime",f),l(Bn,"typeName","yorkie.v1.NodeAttr"),l(Bn,"fields",f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:9},{no:2,name:"updated_at",kind:"message",T:$},{no:3,name:"is_removed",kind:"scalar",T:8}]));let $s=Bn;const zn=class zn extends D{constructor(t){super();l(this,"id");l(this,"value","");l(this,"removedAt");l(this,"insPrevId");l(this,"attributes",{});f.util.initPartial(t,this)}static fromBinary(t,r){return new zn().fromBinary(t,r)}static fromJson(t,r){return new zn().fromJson(t,r)}static fromJsonString(t,r){return new zn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(zn,t,r)}};l(zn,"runtime",f),l(zn,"typeName","yorkie.v1.TextNode"),l(zn,"fields",f.util.newFieldList(()=>[{no:1,name:"id",kind:"message",T:Xo},{no:2,name:"value",kind:"scalar",T:9},{no:3,name:"removed_at",kind:"message",T:$},{no:4,name:"ins_prev_id",kind:"message",T:Xo},{no:5,name:"attributes",kind:"map",K:9,V:{kind:"message",T:$s}}]));let Hl=zn;const Mn=class Mn extends D{constructor(t){super();l(this,"createdAt");l(this,"offset",0);f.util.initPartial(t,this)}static fromBinary(t,r){return new Mn().fromBinary(t,r)}static fromJson(t,r){return new Mn().fromJson(t,r)}static fromJsonString(t,r){return new Mn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Mn,t,r)}};l(Mn,"runtime",f),l(Mn,"typeName","yorkie.v1.TextNodeID"),l(Mn,"fields",f.util.newFieldList(()=>[{no:1,name:"created_at",kind:"message",T:$},{no:2,name:"offset",kind:"scalar",T:5}]));let Xo=Mn;const $n=class $n extends D{constructor(t){super();l(this,"id");l(this,"type","");l(this,"value","");l(this,"removedAt");l(this,"insPrevId");l(this,"insNextId");l(this,"depth",0);l(this,"attributes",{});f.util.initPartial(t,this)}static fromBinary(t,r){return new $n().fromBinary(t,r)}static fromJson(t,r){return new $n().fromJson(t,r)}static fromJsonString(t,r){return new $n().fromJsonString(t,r)}static equals(t,r){return f.util.equals($n,t,r)}};l($n,"runtime",f),l($n,"typeName","yorkie.v1.TreeNode"),l($n,"fields",f.util.newFieldList(()=>[{no:1,name:"id",kind:"message",T:yi},{no:2,name:"type",kind:"scalar",T:9},{no:3,name:"value",kind:"scalar",T:9},{no:4,name:"removed_at",kind:"message",T:$},{no:5,name:"ins_prev_id",kind:"message",T:yi},{no:6,name:"ins_next_id",kind:"message",T:yi},{no:7,name:"depth",kind:"scalar",T:5},{no:8,name:"attributes",kind:"map",K:9,V:{kind:"message",T:$s}}]));let Qo=$n;const Fn=class Fn extends D{constructor(t){super();l(this,"content",[]);f.util.initPartial(t,this)}static fromBinary(t,r){return new Fn().fromBinary(t,r)}static fromJson(t,r){return new Fn().fromJson(t,r)}static fromJsonString(t,r){return new Fn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Fn,t,r)}};l(Fn,"runtime",f),l(Fn,"typeName","yorkie.v1.TreeNodes"),l(Fn,"fields",f.util.newFieldList(()=>[{no:1,name:"content",kind:"message",T:Qo,repeated:!0}]));let _l=Fn;const Jn=class Jn extends D{constructor(t){super();l(this,"createdAt");l(this,"offset",0);f.util.initPartial(t,this)}static fromBinary(t,r){return new Jn().fromBinary(t,r)}static fromJson(t,r){return new Jn().fromJson(t,r)}static fromJsonString(t,r){return new Jn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Jn,t,r)}};l(Jn,"runtime",f),l(Jn,"typeName","yorkie.v1.TreeNodeID"),l(Jn,"fields",f.util.newFieldList(()=>[{no:1,name:"created_at",kind:"message",T:$},{no:2,name:"offset",kind:"scalar",T:5}]));let yi=Jn;const Un=class Un extends D{constructor(t){super();l(this,"parentId");l(this,"leftSiblingId");f.util.initPartial(t,this)}static fromBinary(t,r){return new Un().fromBinary(t,r)}static fromJson(t,r){return new Un().fromJson(t,r)}static fromJsonString(t,r){return new Un().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Un,t,r)}};l(Un,"runtime",f),l(Un,"typeName","yorkie.v1.TreePos"),l(Un,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_id",kind:"message",T:yi},{no:2,name:"left_sibling_id",kind:"message",T:yi}]));let Wi=Un;const jn=class jn extends D{constructor(t){super();l(this,"id","");l(this,"authProvider","");l(this,"username","");l(this,"createdAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new jn().fromBinary(t,r)}static fromJson(t,r){return new jn().fromJson(t,r)}static fromJsonString(t,r){return new jn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(jn,t,r)}};l(jn,"runtime",f),l(jn,"typeName","yorkie.v1.User"),l(jn,"fields",f.util.newFieldList(()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"auth_provider",kind:"scalar",T:9},{no:3,name:"username",kind:"scalar",T:9},{no:4,name:"created_at",kind:"message",T:De}]));let Um=jn;const Vn=class Vn extends D{constructor(t){super();l(this,"id","");l(this,"name","");l(this,"publicKey","");l(this,"secretKey","");l(this,"authWebhookUrl","");l(this,"authWebhookMethods",[]);l(this,"authWebhookMaxRetries",_.zero);l(this,"authWebhookMinWaitInterval","");l(this,"authWebhookMaxWaitInterval","");l(this,"authWebhookRequestTimeout","");l(this,"eventWebhookUrl","");l(this,"eventWebhookEvents",[]);l(this,"eventWebhookMaxRetries",_.zero);l(this,"eventWebhookMinWaitInterval","");l(this,"eventWebhookMaxWaitInterval","");l(this,"eventWebhookRequestTimeout","");l(this,"clientDeactivateThreshold","");l(this,"snapshotThreshold",_.zero);l(this,"snapshotInterval",_.zero);l(this,"maxSubscribersPerDocument",0);l(this,"maxAttachmentsPerDocument",0);l(this,"maxSizePerDocument",0);l(this,"removeOnDetach",!1);l(this,"allowedOrigins",[]);l(this,"createdAt");l(this,"updatedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new Vn().fromBinary(t,r)}static fromJson(t,r){return new Vn().fromJson(t,r)}static fromJsonString(t,r){return new Vn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Vn,t,r)}};l(Vn,"runtime",f),l(Vn,"typeName","yorkie.v1.Project"),l(Vn,"fields",f.util.newFieldList(()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"public_key",kind:"scalar",T:9},{no:4,name:"secret_key",kind:"scalar",T:9},{no:5,name:"auth_webhook_url",kind:"scalar",T:9},{no:6,name:"auth_webhook_methods",kind:"scalar",T:9,repeated:!0},{no:17,name:"auth_webhook_max_retries",kind:"scalar",T:4},{no:18,name:"auth_webhook_min_wait_interval",kind:"scalar",T:9},{no:19,name:"auth_webhook_max_wait_interval",kind:"scalar",T:9},{no:20,name:"auth_webhook_request_timeout",kind:"scalar",T:9},{no:7,name:"event_webhook_url",kind:"scalar",T:9},{no:8,name:"event_webhook_events",kind:"scalar",T:9,repeated:!0},{no:21,name:"event_webhook_max_retries",kind:"scalar",T:4},{no:22,name:"event_webhook_min_wait_interval",kind:"scalar",T:9},{no:23,name:"event_webhook_max_wait_interval",kind:"scalar",T:9},{no:24,name:"event_webhook_request_timeout",kind:"scalar",T:9},{no:9,name:"client_deactivate_threshold",kind:"scalar",T:9},{no:25,name:"snapshot_threshold",kind:"scalar",T:3},{no:26,name:"snapshot_interval",kind:"scalar",T:3},{no:10,name:"max_subscribers_per_document",kind:"scalar",T:5},{no:11,name:"max_attachments_per_document",kind:"scalar",T:5},{no:15,name:"max_size_per_document",kind:"scalar",T:5},{no:16,name:"remove_on_detach",kind:"scalar",T:8},{no:14,name:"allowed_origins",kind:"scalar",T:9,repeated:!0},{no:12,name:"created_at",kind:"message",T:De},{no:13,name:"updated_at",kind:"message",T:De}]));let jm=Vn;const qn=class qn extends D{constructor(t){super();l(this,"timestamp",_.zero);l(this,"value",0);f.util.initPartial(t,this)}static fromBinary(t,r){return new qn().fromBinary(t,r)}static fromJson(t,r){return new qn().fromJson(t,r)}static fromJsonString(t,r){return new qn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(qn,t,r)}};l(qn,"runtime",f),l(qn,"typeName","yorkie.v1.MetricPoint"),l(qn,"fields",f.util.newFieldList(()=>[{no:1,name:"timestamp",kind:"scalar",T:3},{no:2,name:"value",kind:"scalar",T:5}]));let Vm=qn;const Kn=class Kn extends D{constructor(t){super();l(this,"name");l(this,"authWebhookUrl");l(this,"authWebhookMethods");l(this,"authWebhookMaxRetries");l(this,"authWebhookMinWaitInterval");l(this,"authWebhookMaxWaitInterval");l(this,"authWebhookRequestTimeout");l(this,"eventWebhookUrl");l(this,"eventWebhookEvents");l(this,"eventWebhookMaxRetries");l(this,"eventWebhookMinWaitInterval");l(this,"eventWebhookMaxWaitInterval");l(this,"eventWebhookRequestTimeout");l(this,"snapshotThreshold");l(this,"snapshotInterval");l(this,"clientDeactivateThreshold");l(this,"maxSubscribersPerDocument");l(this,"maxAttachmentsPerDocument");l(this,"maxSizePerDocument");l(this,"removeOnDetach");l(this,"allowedOrigins");f.util.initPartial(t,this)}static fromBinary(t,r){return new Kn().fromBinary(t,r)}static fromJson(t,r){return new Kn().fromJson(t,r)}static fromJsonString(t,r){return new Kn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Kn,t,r)}};l(Kn,"runtime",f),l(Kn,"typeName","yorkie.v1.UpdatableProjectFields"),l(Kn,"fields",f.util.newFieldList(()=>[{no:1,name:"name",kind:"message",T:we},{no:2,name:"auth_webhook_url",kind:"message",T:we},{no:3,name:"auth_webhook_methods",kind:"message",T:nf},{no:12,name:"auth_webhook_max_retries",kind:"message",T:At},{no:13,name:"auth_webhook_min_wait_interval",kind:"message",T:we},{no:14,name:"auth_webhook_max_wait_interval",kind:"message",T:we},{no:15,name:"auth_webhook_request_timeout",kind:"message",T:we},{no:4,name:"event_webhook_url",kind:"message",T:we},{no:5,name:"event_webhook_events",kind:"message",T:rf},{no:16,name:"event_webhook_max_retries",kind:"message",T:At},{no:17,name:"event_webhook_min_wait_interval",kind:"message",T:we},{no:18,name:"event_webhook_max_wait_interval",kind:"message",T:we},{no:19,name:"event_webhook_request_timeout",kind:"message",T:we},{no:20,name:"snapshot_threshold",kind:"message",T:xt},{no:21,name:"snapshot_interval",kind:"message",T:xt},{no:6,name:"client_deactivate_threshold",kind:"message",T:we},{no:7,name:"max_subscribers_per_document",kind:"message",T:it},{no:8,name:"max_attachments_per_document",kind:"message",T:it},{no:10,name:"max_size_per_document",kind:"message",T:it},{no:11,name:"remove_on_detach",kind:"message",T:Jt},{no:9,name:"allowed_origins",kind:"message",T:sf}]));let qm=Kn;const Wn=class Wn extends D{constructor(t){super();l(this,"methods",[]);f.util.initPartial(t,this)}static fromBinary(t,r){return new Wn().fromBinary(t,r)}static fromJson(t,r){return new Wn().fromJson(t,r)}static fromJsonString(t,r){return new Wn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Wn,t,r)}};l(Wn,"runtime",f),l(Wn,"typeName","yorkie.v1.UpdatableProjectFields.AuthWebhookMethods"),l(Wn,"fields",f.util.newFieldList(()=>[{no:1,name:"methods",kind:"scalar",T:9,repeated:!0}]));let nf=Wn;const Hn=class Hn extends D{constructor(t){super();l(this,"events",[]);f.util.initPartial(t,this)}static fromBinary(t,r){return new Hn().fromBinary(t,r)}static fromJson(t,r){return new Hn().fromJson(t,r)}static fromJsonString(t,r){return new Hn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Hn,t,r)}};l(Hn,"runtime",f),l(Hn,"typeName","yorkie.v1.UpdatableProjectFields.EventWebhookEvents"),l(Hn,"fields",f.util.newFieldList(()=>[{no:1,name:"events",kind:"scalar",T:9,repeated:!0}]));let rf=Hn;const _n=class _n extends D{constructor(t){super();l(this,"origins",[]);f.util.initPartial(t,this)}static fromBinary(t,r){return new _n().fromBinary(t,r)}static fromJson(t,r){return new _n().fromJson(t,r)}static fromJsonString(t,r){return new _n().fromJsonString(t,r)}static equals(t,r){return f.util.equals(_n,t,r)}};l(_n,"runtime",f),l(_n,"typeName","yorkie.v1.UpdatableProjectFields.AllowedOrigins"),l(_n,"fields",f.util.newFieldList(()=>[{no:1,name:"origins",kind:"scalar",T:9,repeated:!0}]));let sf=_n;const Gn=class Gn extends D{constructor(t){super();l(this,"id","");l(this,"key","");l(this,"root","");l(this,"attachedClients",0);l(this,"documentSize");l(this,"schemaKey","");l(this,"presences",{});l(this,"createdAt");l(this,"accessedAt");l(this,"updatedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new Gn().fromBinary(t,r)}static fromJson(t,r){return new Gn().fromJson(t,r)}static fromJsonString(t,r){return new Gn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Gn,t,r)}};l(Gn,"runtime",f),l(Gn,"typeName","yorkie.v1.DocumentSummary"),l(Gn,"fields",f.util.newFieldList(()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"key",kind:"scalar",T:9},{no:3,name:"root",kind:"scalar",T:9},{no:7,name:"attached_clients",kind:"scalar",T:5},{no:8,name:"document_size",kind:"message",T:uf},{no:9,name:"schema_key",kind:"scalar",T:9},{no:10,name:"presences",kind:"map",K:9,V:{kind:"message",T:Fs}},{no:4,name:"created_at",kind:"message",T:De},{no:5,name:"accessed_at",kind:"message",T:De},{no:6,name:"updated_at",kind:"message",T:De}]));let Km=Gn;const Yn=class Yn extends D{constructor(t){super();l(this,"type",0);l(this,"presence");f.util.initPartial(t,this)}static fromBinary(t,r){return new Yn().fromBinary(t,r)}static fromJson(t,r){return new Yn().fromJson(t,r)}static fromJsonString(t,r){return new Yn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Yn,t,r)}};l(Yn,"runtime",f),l(Yn,"typeName","yorkie.v1.PresenceChange"),l(Yn,"fields",f.util.newFieldList(()=>[{no:1,name:"type",kind:"enum",T:f.getEnumType(Hi)},{no:2,name:"presence",kind:"message",T:Fs}]));let Zo=Yn;var Hi=(n=>(n[n.UNSPECIFIED=0]="UNSPECIFIED",n[n.PUT=1]="PUT",n[n.DELETE=2]="DELETE",n[n.CLEAR=3]="CLEAR",n))(Hi||{});f.util.setEnumType(Hi,"yorkie.v1.PresenceChange.ChangeType",[{no:0,name:"CHANGE_TYPE_UNSPECIFIED"},{no:1,name:"CHANGE_TYPE_PUT"},{no:2,name:"CHANGE_TYPE_DELETE"},{no:3,name:"CHANGE_TYPE_CLEAR"}]);const Xn=class Xn extends D{constructor(t){super();l(this,"data",{});f.util.initPartial(t,this)}static fromBinary(t,r){return new Xn().fromBinary(t,r)}static fromJson(t,r){return new Xn().fromJson(t,r)}static fromJsonString(t,r){return new Xn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Xn,t,r)}};l(Xn,"runtime",f),l(Xn,"typeName","yorkie.v1.Presence"),l(Xn,"fields",f.util.newFieldList(()=>[{no:1,name:"data",kind:"map",K:9,V:{kind:"scalar",T:9}}]));let Fs=Xn;var kt;let Zy=(kt=class extends D{constructor(t){super();l(this,"serverSeq",_.zero);l(this,"clientSeq",0);f.util.initPartial(t,this)}static fromBinary(t,r){return new kt().fromBinary(t,r)}static fromJson(t,r){return new kt().fromJson(t,r)}static fromJsonString(t,r){return new kt().fromJsonString(t,r)}static equals(t,r){return f.util.equals(kt,t,r)}},l(kt,"runtime",f),l(kt,"typeName","yorkie.v1.Checkpoint"),l(kt,"fields",f.util.newFieldList(()=>[{no:1,name:"server_seq",kind:"scalar",T:3},{no:2,name:"client_seq",kind:"scalar",T:13}])),kt);const Qn=class Qn extends D{constructor(t){super();l(this,"createdAt");l(this,"offset",0);l(this,"relativeOffset",0);f.util.initPartial(t,this)}static fromBinary(t,r){return new Qn().fromBinary(t,r)}static fromJson(t,r){return new Qn().fromJson(t,r)}static fromJsonString(t,r){return new Qn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Qn,t,r)}};l(Qn,"runtime",f),l(Qn,"typeName","yorkie.v1.TextNodePos"),l(Qn,"fields",f.util.newFieldList(()=>[{no:1,name:"created_at",kind:"message",T:$},{no:2,name:"offset",kind:"scalar",T:5},{no:3,name:"relative_offset",kind:"scalar",T:5}]));let _i=Qn;var Tt;let $=(Tt=class extends D{constructor(t){super();l(this,"lamport",_.zero);l(this,"delimiter",0);l(this,"actorId",new Uint8Array(0));f.util.initPartial(t,this)}static fromBinary(t,r){return new Tt().fromBinary(t,r)}static fromJson(t,r){return new Tt().fromJson(t,r)}static fromJsonString(t,r){return new Tt().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Tt,t,r)}},l(Tt,"runtime",f),l(Tt,"typeName","yorkie.v1.TimeTicket"),l(Tt,"fields",f.util.newFieldList(()=>[{no:1,name:"lamport",kind:"scalar",T:3},{no:2,name:"delimiter",kind:"scalar",T:13},{no:3,name:"actor_id",kind:"scalar",T:12}])),Tt);const Zn=class Zn extends D{constructor(t){super();l(this,"topic","");l(this,"payload",new Uint8Array(0));f.util.initPartial(t,this)}static fromBinary(t,r){return new Zn().fromBinary(t,r)}static fromJson(t,r){return new Zn().fromJson(t,r)}static fromJsonString(t,r){return new Zn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Zn,t,r)}};l(Zn,"runtime",f),l(Zn,"typeName","yorkie.v1.DocEventBody"),l(Zn,"fields",f.util.newFieldList(()=>[{no:1,name:"topic",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:12}]));let of=Zn;const er=class er extends D{constructor(t){super();l(this,"type",0);l(this,"publisher","");l(this,"body");f.util.initPartial(t,this)}static fromBinary(t,r){return new er().fromBinary(t,r)}static fromJson(t,r){return new er().fromJson(t,r)}static fromJsonString(t,r){return new er().fromJsonString(t,r)}static equals(t,r){return f.util.equals(er,t,r)}};l(er,"runtime",f),l(er,"typeName","yorkie.v1.DocEvent"),l(er,"fields",f.util.newFieldList(()=>[{no:1,name:"type",kind:"enum",T:f.getEnumType(Ms)},{no:2,name:"publisher",kind:"scalar",T:9},{no:3,name:"body",kind:"message",T:of}]));let af=er;const tr=class tr extends D{constructor(t){super();l(this,"type",0);l(this,"publisher","");l(this,"count",_.zero);l(this,"seq",_.zero);l(this,"topic","");l(this,"payload",new Uint8Array(0));f.util.initPartial(t,this)}static fromBinary(t,r){return new tr().fromBinary(t,r)}static fromJson(t,r){return new tr().fromJson(t,r)}static fromJsonString(t,r){return new tr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(tr,t,r)}};l(tr,"runtime",f),l(tr,"typeName","yorkie.v1.ChannelEvent"),l(tr,"fields",f.util.newFieldList(()=>[{no:1,name:"type",kind:"enum",T:f.getEnumType(Su)},{no:2,name:"publisher",kind:"scalar",T:9},{no:3,name:"count",kind:"scalar",T:3},{no:4,name:"seq",kind:"scalar",T:3},{no:5,name:"topic",kind:"scalar",T:9},{no:6,name:"payload",kind:"scalar",T:12}]));let lf=tr;var Su=(n=>(n[n.UNSPECIFIED=0]="UNSPECIFIED",n[n.PRESENCE=1]="PRESENCE",n[n.BROADCAST=2]="BROADCAST",n))(Su||{});f.util.setEnumType(Su,"yorkie.v1.ChannelEvent.Type",[{no:0,name:"TYPE_UNSPECIFIED"},{no:1,name:"TYPE_PRESENCE"},{no:2,name:"TYPE_BROADCAST"}]);const nr=class nr extends D{constructor(t){super();l(this,"data",0);l(this,"meta",0);f.util.initPartial(t,this)}static fromBinary(t,r){return new nr().fromBinary(t,r)}static fromJson(t,r){return new nr().fromJson(t,r)}static fromJsonString(t,r){return new nr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(nr,t,r)}};l(nr,"runtime",f),l(nr,"typeName","yorkie.v1.DataSize"),l(nr,"fields",f.util.newFieldList(()=>[{no:1,name:"data",kind:"scalar",T:5},{no:2,name:"meta",kind:"scalar",T:5}]));let Gl=nr;const rr=class rr extends D{constructor(t){super();l(this,"live");l(this,"gc");f.util.initPartial(t,this)}static fromBinary(t,r){return new rr().fromBinary(t,r)}static fromJson(t,r){return new rr().fromJson(t,r)}static fromJsonString(t,r){return new rr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(rr,t,r)}};l(rr,"runtime",f),l(rr,"typeName","yorkie.v1.DocSize"),l(rr,"fields",f.util.newFieldList(()=>[{no:1,name:"live",kind:"message",T:Gl},{no:2,name:"gc",kind:"message",T:Gl}]));let uf=rr;const ir=class ir extends D{constructor(t){super();l(this,"id","");l(this,"name","");l(this,"version",0);l(this,"body","");l(this,"rules",[]);l(this,"createdAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new ir().fromBinary(t,r)}static fromJson(t,r){return new ir().fromJson(t,r)}static fromJsonString(t,r){return new ir().fromJsonString(t,r)}static equals(t,r){return f.util.equals(ir,t,r)}};l(ir,"runtime",f),l(ir,"typeName","yorkie.v1.Schema"),l(ir,"fields",f.util.newFieldList(()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"version",kind:"scalar",T:5},{no:4,name:"body",kind:"scalar",T:9},{no:5,name:"rules",kind:"message",T:Yl,repeated:!0},{no:6,name:"created_at",kind:"message",T:De}]));let Wm=ir;const sr=class sr extends D{constructor(t){super();l(this,"path","");l(this,"type","");f.util.initPartial(t,this)}static fromBinary(t,r){return new sr().fromBinary(t,r)}static fromJson(t,r){return new sr().fromJson(t,r)}static fromJsonString(t,r){return new sr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(sr,t,r)}};l(sr,"runtime",f),l(sr,"typeName","yorkie.v1.Rule"),l(sr,"fields",f.util.newFieldList(()=>[{no:1,name:"path",kind:"scalar",T:9},{no:2,name:"type",kind:"scalar",T:9}]));let Yl=sr;const or=class or extends D{constructor(t){super();l(this,"clientKey","");l(this,"metadata",{});f.util.initPartial(t,this)}static fromBinary(t,r){return new or().fromBinary(t,r)}static fromJson(t,r){return new or().fromJson(t,r)}static fromJsonString(t,r){return new or().fromJsonString(t,r)}static equals(t,r){return f.util.equals(or,t,r)}};l(or,"runtime",f),l(or,"typeName","yorkie.v1.ActivateClientRequest"),l(or,"fields",f.util.newFieldList(()=>[{no:1,name:"client_key",kind:"scalar",T:9},{no:2,name:"metadata",kind:"map",K:9,V:{kind:"scalar",T:9}}]));let cf=or;const ar=class ar extends D{constructor(t){super();l(this,"clientId","");f.util.initPartial(t,this)}static fromBinary(t,r){return new ar().fromBinary(t,r)}static fromJson(t,r){return new ar().fromJson(t,r)}static fromJsonString(t,r){return new ar().fromJsonString(t,r)}static equals(t,r){return f.util.equals(ar,t,r)}};l(ar,"runtime",f),l(ar,"typeName","yorkie.v1.ActivateClientResponse"),l(ar,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9}]));let ff=ar;const lr=class lr extends D{constructor(t){super();l(this,"clientId","");l(this,"synchronous",!1);f.util.initPartial(t,this)}static fromBinary(t,r){return new lr().fromBinary(t,r)}static fromJson(t,r){return new lr().fromJson(t,r)}static fromJsonString(t,r){return new lr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(lr,t,r)}};l(lr,"runtime",f),l(lr,"typeName","yorkie.v1.DeactivateClientRequest"),l(lr,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"synchronous",kind:"scalar",T:8}]));let df=lr;const ur=class ur extends D{constructor(e){super(),f.util.initPartial(e,this)}static fromBinary(e,t){return new ur().fromBinary(e,t)}static fromJson(e,t){return new ur().fromJson(e,t)}static fromJsonString(e,t){return new ur().fromJsonString(e,t)}static equals(e,t){return f.util.equals(ur,e,t)}};l(ur,"runtime",f),l(ur,"typeName","yorkie.v1.DeactivateClientResponse"),l(ur,"fields",f.util.newFieldList(()=>[]));let hf=ur;const cr=class cr extends D{constructor(t){super();l(this,"clientId","");l(this,"changePack");l(this,"schemaKey","");f.util.initPartial(t,this)}static fromBinary(t,r){return new cr().fromBinary(t,r)}static fromJson(t,r){return new cr().fromJson(t,r)}static fromJsonString(t,r){return new cr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(cr,t,r)}};l(cr,"runtime",f),l(cr,"typeName","yorkie.v1.AttachDocumentRequest"),l(cr,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"change_pack",kind:"message",T:Yr},{no:3,name:"schema_key",kind:"scalar",T:9}]));let mf=cr;const fr=class fr extends D{constructor(t){super();l(this,"documentId","");l(this,"changePack");l(this,"maxSizePerDocument",0);l(this,"schemaRules",[]);f.util.initPartial(t,this)}static fromBinary(t,r){return new fr().fromBinary(t,r)}static fromJson(t,r){return new fr().fromJson(t,r)}static fromJsonString(t,r){return new fr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(fr,t,r)}};l(fr,"runtime",f),l(fr,"typeName","yorkie.v1.AttachDocumentResponse"),l(fr,"fields",f.util.newFieldList(()=>[{no:1,name:"document_id",kind:"scalar",T:9},{no:2,name:"change_pack",kind:"message",T:Yr},{no:3,name:"max_size_per_document",kind:"scalar",T:5},{no:4,name:"schema_rules",kind:"message",T:Yl,repeated:!0}]));let gf=fr;const dr=class dr extends D{constructor(t){super();l(this,"clientId","");l(this,"documentId","");l(this,"changePack");l(this,"removeIfNotAttached",!1);f.util.initPartial(t,this)}static fromBinary(t,r){return new dr().fromBinary(t,r)}static fromJson(t,r){return new dr().fromJson(t,r)}static fromJsonString(t,r){return new dr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(dr,t,r)}};l(dr,"runtime",f),l(dr,"typeName","yorkie.v1.DetachDocumentRequest"),l(dr,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:Yr},{no:4,name:"remove_if_not_attached",kind:"scalar",T:8}]));let pf=dr;const hr=class hr extends D{constructor(t){super();l(this,"changePack");f.util.initPartial(t,this)}static fromBinary(t,r){return new hr().fromBinary(t,r)}static fromJson(t,r){return new hr().fromJson(t,r)}static fromJsonString(t,r){return new hr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(hr,t,r)}};l(hr,"runtime",f),l(hr,"typeName","yorkie.v1.DetachDocumentResponse"),l(hr,"fields",f.util.newFieldList(()=>[{no:2,name:"change_pack",kind:"message",T:Yr}]));let yf=hr;const mr=class mr extends D{constructor(t){super();l(this,"clientId","");l(this,"documentId","");f.util.initPartial(t,this)}static fromBinary(t,r){return new mr().fromBinary(t,r)}static fromJson(t,r){return new mr().fromJson(t,r)}static fromJsonString(t,r){return new mr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(mr,t,r)}};l(mr,"runtime",f),l(mr,"typeName","yorkie.v1.WatchDocumentRequest"),l(mr,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9}]));let vf=mr;const gr=class gr extends D{constructor(t){super();l(this,"body",{case:void 0});f.util.initPartial(t,this)}static fromBinary(t,r){return new gr().fromBinary(t,r)}static fromJson(t,r){return new gr().fromJson(t,r)}static fromJsonString(t,r){return new gr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(gr,t,r)}};l(gr,"runtime",f),l(gr,"typeName","yorkie.v1.WatchDocumentResponse"),l(gr,"fields",f.util.newFieldList(()=>[{no:1,name:"initialization",kind:"message",T:Sf,oneof:"body"},{no:2,name:"event",kind:"message",T:af,oneof:"body"}]));let wf=gr;const pr=class pr extends D{constructor(t){super();l(this,"clientIds",[]);f.util.initPartial(t,this)}static fromBinary(t,r){return new pr().fromBinary(t,r)}static fromJson(t,r){return new pr().fromJson(t,r)}static fromJsonString(t,r){return new pr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(pr,t,r)}};l(pr,"runtime",f),l(pr,"typeName","yorkie.v1.WatchDocumentResponse.Initialization"),l(pr,"fields",f.util.newFieldList(()=>[{no:1,name:"client_ids",kind:"scalar",T:9,repeated:!0}]));let Sf=pr;const yr=class yr extends D{constructor(t){super();l(this,"clientId","");l(this,"documentId","");l(this,"changePack");f.util.initPartial(t,this)}static fromBinary(t,r){return new yr().fromBinary(t,r)}static fromJson(t,r){return new yr().fromJson(t,r)}static fromJsonString(t,r){return new yr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(yr,t,r)}};l(yr,"runtime",f),l(yr,"typeName","yorkie.v1.RemoveDocumentRequest"),l(yr,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:Yr}]));let kf=yr;const vr=class vr extends D{constructor(t){super();l(this,"changePack");f.util.initPartial(t,this)}static fromBinary(t,r){return new vr().fromBinary(t,r)}static fromJson(t,r){return new vr().fromJson(t,r)}static fromJsonString(t,r){return new vr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(vr,t,r)}};l(vr,"runtime",f),l(vr,"typeName","yorkie.v1.RemoveDocumentResponse"),l(vr,"fields",f.util.newFieldList(()=>[{no:1,name:"change_pack",kind:"message",T:Yr}]));let Tf=vr;const wr=class wr extends D{constructor(t){super();l(this,"clientId","");l(this,"documentId","");l(this,"changePack");l(this,"pushOnly",!1);f.util.initPartial(t,this)}static fromBinary(t,r){return new wr().fromBinary(t,r)}static fromJson(t,r){return new wr().fromJson(t,r)}static fromJsonString(t,r){return new wr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(wr,t,r)}};l(wr,"runtime",f),l(wr,"typeName","yorkie.v1.PushPullChangesRequest"),l(wr,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:Yr},{no:4,name:"push_only",kind:"scalar",T:8}]));let If=wr;const Sr=class Sr extends D{constructor(t){super();l(this,"changePack");f.util.initPartial(t,this)}static fromBinary(t,r){return new Sr().fromBinary(t,r)}static fromJson(t,r){return new Sr().fromJson(t,r)}static fromJsonString(t,r){return new Sr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Sr,t,r)}};l(Sr,"runtime",f),l(Sr,"typeName","yorkie.v1.PushPullChangesResponse"),l(Sr,"fields",f.util.newFieldList(()=>[{no:1,name:"change_pack",kind:"message",T:Yr}]));let xf=Sr;const kr=class kr extends D{constructor(t){super();l(this,"clientId","");l(this,"channelKey","");f.util.initPartial(t,this)}static fromBinary(t,r){return new kr().fromBinary(t,r)}static fromJson(t,r){return new kr().fromJson(t,r)}static fromJsonString(t,r){return new kr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(kr,t,r)}};l(kr,"runtime",f),l(kr,"typeName","yorkie.v1.AttachChannelRequest"),l(kr,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"channel_key",kind:"scalar",T:9}]));let Af=kr;const Tr=class Tr extends D{constructor(t){super();l(this,"sessionId","");l(this,"count",_.zero);f.util.initPartial(t,this)}static fromBinary(t,r){return new Tr().fromBinary(t,r)}static fromJson(t,r){return new Tr().fromJson(t,r)}static fromJsonString(t,r){return new Tr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Tr,t,r)}};l(Tr,"runtime",f),l(Tr,"typeName","yorkie.v1.AttachChannelResponse"),l(Tr,"fields",f.util.newFieldList(()=>[{no:1,name:"session_id",kind:"scalar",T:9},{no:2,name:"count",kind:"scalar",T:3}]));let Ef=Tr;const Ir=class Ir extends D{constructor(t){super();l(this,"clientId","");l(this,"channelKey","");l(this,"sessionId","");f.util.initPartial(t,this)}static fromBinary(t,r){return new Ir().fromBinary(t,r)}static fromJson(t,r){return new Ir().fromJson(t,r)}static fromJsonString(t,r){return new Ir().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Ir,t,r)}};l(Ir,"runtime",f),l(Ir,"typeName","yorkie.v1.DetachChannelRequest"),l(Ir,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"channel_key",kind:"scalar",T:9},{no:3,name:"session_id",kind:"scalar",T:9}]));let Cf=Ir;const xr=class xr extends D{constructor(t){super();l(this,"count",_.zero);f.util.initPartial(t,this)}static fromBinary(t,r){return new xr().fromBinary(t,r)}static fromJson(t,r){return new xr().fromJson(t,r)}static fromJsonString(t,r){return new xr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(xr,t,r)}};l(xr,"runtime",f),l(xr,"typeName","yorkie.v1.DetachChannelResponse"),l(xr,"fields",f.util.newFieldList(()=>[{no:1,name:"count",kind:"scalar",T:3}]));let Nf=xr;const Ar=class Ar extends D{constructor(t){super();l(this,"clientId","");l(this,"channelKey","");l(this,"sessionId","");f.util.initPartial(t,this)}static fromBinary(t,r){return new Ar().fromBinary(t,r)}static fromJson(t,r){return new Ar().fromJson(t,r)}static fromJsonString(t,r){return new Ar().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Ar,t,r)}};l(Ar,"runtime",f),l(Ar,"typeName","yorkie.v1.RefreshChannelRequest"),l(Ar,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"channel_key",kind:"scalar",T:9},{no:3,name:"session_id",kind:"scalar",T:9}]));let Pf=Ar;const Er=class Er extends D{constructor(t){super();l(this,"count",_.zero);f.util.initPartial(t,this)}static fromBinary(t,r){return new Er().fromBinary(t,r)}static fromJson(t,r){return new Er().fromJson(t,r)}static fromJsonString(t,r){return new Er().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Er,t,r)}};l(Er,"runtime",f),l(Er,"typeName","yorkie.v1.RefreshChannelResponse"),l(Er,"fields",f.util.newFieldList(()=>[{no:1,name:"count",kind:"scalar",T:3}]));let Df=Er;const Cr=class Cr extends D{constructor(t){super();l(this,"clientId","");l(this,"channelKey","");f.util.initPartial(t,this)}static fromBinary(t,r){return new Cr().fromBinary(t,r)}static fromJson(t,r){return new Cr().fromJson(t,r)}static fromJsonString(t,r){return new Cr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Cr,t,r)}};l(Cr,"runtime",f),l(Cr,"typeName","yorkie.v1.WatchChannelRequest"),l(Cr,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"channel_key",kind:"scalar",T:9}]));let bf=Cr;const Nr=class Nr extends D{constructor(t){super();l(this,"body",{case:void 0});f.util.initPartial(t,this)}static fromBinary(t,r){return new Nr().fromBinary(t,r)}static fromJson(t,r){return new Nr().fromJson(t,r)}static fromJsonString(t,r){return new Nr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Nr,t,r)}};l(Nr,"runtime",f),l(Nr,"typeName","yorkie.v1.WatchChannelResponse"),l(Nr,"fields",f.util.newFieldList(()=>[{no:1,name:"initialized",kind:"message",T:Lf,oneof:"body"},{no:2,name:"event",kind:"message",T:lf,oneof:"body"}]));let Of=Nr;const Pr=class Pr extends D{constructor(t){super();l(this,"count",_.zero);l(this,"seq",_.zero);f.util.initPartial(t,this)}static fromBinary(t,r){return new Pr().fromBinary(t,r)}static fromJson(t,r){return new Pr().fromJson(t,r)}static fromJsonString(t,r){return new Pr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Pr,t,r)}};l(Pr,"runtime",f),l(Pr,"typeName","yorkie.v1.WatchChannelInitialized"),l(Pr,"fields",f.util.newFieldList(()=>[{no:1,name:"count",kind:"scalar",T:3},{no:2,name:"seq",kind:"scalar",T:3}]));let Lf=Pr;const Dr=class Dr extends D{constructor(t){super();l(this,"clientId","");l(this,"channelKey","");l(this,"topic","");l(this,"payload",new Uint8Array(0));f.util.initPartial(t,this)}static fromBinary(t,r){return new Dr().fromBinary(t,r)}static fromJson(t,r){return new Dr().fromJson(t,r)}static fromJsonString(t,r){return new Dr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Dr,t,r)}};l(Dr,"runtime",f),l(Dr,"typeName","yorkie.v1.BroadcastRequest"),l(Dr,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"channel_key",kind:"scalar",T:9},{no:3,name:"topic",kind:"scalar",T:9},{no:4,name:"payload",kind:"scalar",T:12}]));let Rf=Dr;const br=class br extends D{constructor(e){super(),f.util.initPartial(e,this)}static fromBinary(e,t){return new br().fromBinary(e,t)}static fromJson(e,t){return new br().fromJson(e,t)}static fromJsonString(e,t){return new br().fromJsonString(e,t)}static equals(e,t){return f.util.equals(br,e,t)}};l(br,"runtime",f),l(br,"typeName","yorkie.v1.BroadcastResponse"),l(br,"fields",f.util.newFieldList(()=>[]));let Bf=br;const DS={typeName:"yorkie.v1.YorkieService",methods:{activateClient:{name:"ActivateClient",I:cf,O:ff,kind:ke.Unary},deactivateClient:{name:"DeactivateClient",I:df,O:hf,kind:ke.Unary},attachDocument:{name:"AttachDocument",I:mf,O:gf,kind:ke.Unary},detachDocument:{name:"DetachDocument",I:pf,O:yf,kind:ke.Unary},removeDocument:{name:"RemoveDocument",I:kf,O:Tf,kind:ke.Unary},pushPullChanges:{name:"PushPullChanges",I:If,O:xf,kind:ke.Unary},watchDocument:{name:"WatchDocument",I:vf,O:wf,kind:ke.ServerStreaming},attachChannel:{name:"AttachChannel",I:Af,O:Ef,kind:ke.Unary},detachChannel:{name:"DetachChannel",I:Cf,O:Nf,kind:ke.Unary},refreshChannel:{name:"RefreshChannel",I:Pf,O:Df,kind:ke.Unary},watchChannel:{name:"WatchChannel",I:bf,O:Of,kind:ke.ServerStreaming},broadcast:{name:"Broadcast",I:Rf,O:Bf,kind:ke.Unary}}},bS=f.makeMessageType("google.rpc.ErrorInfo",()=>[{no:1,name:"reason",kind:"scalar",T:9},{no:2,name:"domain",kind:"scalar",T:9},{no:3,name:"metadata",kind:"map",K:9,V:{kind:"scalar",T:9}}]);f.makeMessageType("google.rpc.RetryInfo",()=>[{no:1,name:"retry_delay",kind:"message",T:Mr}]);f.makeMessageType("google.rpc.DebugInfo",()=>[{no:1,name:"stack_entries",kind:"scalar",T:9,repeated:!0},{no:2,name:"detail",kind:"scalar",T:9}]);f.makeMessageType("google.rpc.QuotaFailure",()=>[{no:1,name:"violations",kind:"message",T:OS,repeated:!0}]);const OS=f.makeMessageType("google.rpc.QuotaFailure.Violation",()=>[{no:1,name:"subject",kind:"scalar",T:9},{no:2,name:"description",kind:"scalar",T:9},{no:3,name:"api_service",kind:"scalar",T:9},{no:4,name:"quota_metric",kind:"scalar",T:9},{no:5,name:"quota_id",kind:"scalar",T:9},{no:6,name:"quota_dimensions",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:7,name:"quota_value",kind:"scalar",T:3},{no:8,name:"future_quota_value",kind:"scalar",T:3,opt:!0}],{localName:"QuotaFailure_Violation"});f.makeMessageType("google.rpc.PreconditionFailure",()=>[{no:1,name:"violations",kind:"message",T:LS,repeated:!0}]);const LS=f.makeMessageType("google.rpc.PreconditionFailure.Violation",()=>[{no:1,name:"type",kind:"scalar",T:9},{no:2,name:"subject",kind:"scalar",T:9},{no:3,name:"description",kind:"scalar",T:9}],{localName:"PreconditionFailure_Violation"});f.makeMessageType("google.rpc.BadRequest",()=>[{no:1,name:"field_violations",kind:"message",T:RS,repeated:!0}]);const RS=f.makeMessageType("google.rpc.BadRequest.FieldViolation",()=>[{no:1,name:"field",kind:"scalar",T:9},{no:2,name:"description",kind:"scalar",T:9},{no:3,name:"reason",kind:"scalar",T:9},{no:4,name:"localized_message",kind:"message",T:zS}],{localName:"BadRequest_FieldViolation"});f.makeMessageType("google.rpc.RequestInfo",()=>[{no:1,name:"request_id",kind:"scalar",T:9},{no:2,name:"serving_data",kind:"scalar",T:9}]);f.makeMessageType("google.rpc.ResourceInfo",()=>[{no:1,name:"resource_type",kind:"scalar",T:9},{no:2,name:"resource_name",kind:"scalar",T:9},{no:3,name:"owner",kind:"scalar",T:9},{no:4,name:"description",kind:"scalar",T:9}]);f.makeMessageType("google.rpc.Help",()=>[{no:1,name:"links",kind:"message",T:BS,repeated:!0}]);const BS=f.makeMessageType("google.rpc.Help.Link",()=>[{no:1,name:"description",kind:"scalar",T:9},{no:2,name:"url",kind:"scalar",T:9}],{localName:"Help_Link"}),zS=f.makeMessageType("google.rpc.LocalizedMessage",()=>[{no:1,name:"locale",kind:"scalar",T:9},{no:2,name:"message",kind:"scalar",T:9}]);var k=(n=>(n.Ok="ok",n.ErrClientNotActivated="ErrClientNotActivated",n.ErrClientNotFound="ErrClientNotFound",n.ErrUnimplemented="ErrUnimplemented",n.ErrInvalidType="ErrInvalidType",n.ErrDummy="ErrDummy",n.ErrNotAttached="ErrNotAttached",n.ErrNotDetached="ErrNotDetached",n.ErrDocumentRemoved="ErrDocumentRemoved",n.ErrDocumentSizeExceedsLimit="ErrDocumentSizeExceedsLimit",n.ErrDocumentSchemaValidationFailed="ErrDocumentSchemaValidationFailed",n.ErrInvalidObjectKey="ErrInvalidObjectKey",n.ErrInvalidArgument="ErrInvalidArgument",n.ErrNotInitialized="ErrNotInitialized",n.ErrNotReady="ErrNotReady",n.ErrRefused="ErrRefused",n.ErrContextNotProvided="ErrContextNotProvided",n.ErrPermissionDenied="ErrPermissionDenied",n.ErrUnauthenticated="ErrUnauthenticated",n.ErrTooManySubscribers="ErrTooManySubscribers",n.ErrTooManyAttachments="ErrTooManyAttachments",n))(k||{});class T extends Error{constructor(t,r){super(r);l(this,"name","YorkieError");l(this,"stack");this.code=t,this.message=r,this.toString=()=>`[code=${this.code}]: ${this.message}`}}var dn=(n=>(n.Put="put",n.Clear="clear",n))(dn||{});const Ud="000000000000000000000000",un=24;class Pt{constructor(e,t,r){l(this,"lamport");l(this,"delimiter");l(this,"actorID");this.lamport=e,this.delimiter=t,this.actorID=r}static of(e,t,r){return new Pt(e,t,r)}static fromStruct(e){return Pt.of(BigInt(e.lamport),e.delimiter,e.actorID)}toIDString(){return`${this.lamport.toString()}:${this.actorID}:${this.delimiter}`}toStruct(){return{lamport:this.getLamportAsString(),delimiter:this.getDelimiter(),actorID:this.getActorID()}}toTestString(){return`${this.lamport.toString()}:${this.actorID.slice(-2)}:${this.delimiter}`}setActor(e){return new Pt(this.lamport,this.delimiter,e)}getLamportAsString(){return this.lamport.toString()}getLamport(){return this.lamport}getDelimiter(){return this.delimiter}getActorID(){return this.actorID}after(e){return this.compare(e)>0}equals(e){return this.compare(e)===0}compare(e){if(this.lamport>e.lamport)return 1;if(e.lamport>this.lamport)return-1;const t=this.actorID.localeCompare(e.actorID);return t!==0?t:this.delimiter>e.delimiter?1:e.delimiter>this.delimiter?-1:0}}const zf=0n,ev=0,Mf=9223372036854775807n,Js=new Pt(zf,ev,Ud);function on(n){return n.replace(/["'\\\n\r\f\b\t\u2028\u2029]/g,function(e){switch(e){case'"':case"\\":return"\\"+e;case`
`:return"\\n";case"\r":return"\\r";case"\f":return"\\f";case"\b":return"\\b";case"	":return"\\t";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:return e}})}class ca{constructor(e){l(this,"createdAt");l(this,"movedAt");l(this,"removedAt");this.createdAt=e}getCreatedAt(){return this.createdAt}getID(){return this.createdAt}getMovedAt(){return this.movedAt}getRemovedAt(){return this.removedAt}getPositionedAt(){return this.movedAt?this.movedAt:this.createdAt}setCreatedAt(e){this.createdAt=e}setMovedAt(e){return!this.movedAt||e&&e.after(this.movedAt)?(this.movedAt=e,!0):!1}setRemovedAt(e){this.removedAt=e}remove(e){return e&&e.after(this.createdAt)&&(!this.removedAt||e.after(this.removedAt))?(this.removedAt=e,!0):!1}isRemoved(){return!!this.removedAt}getMetaUsage(){let e=0;return this.getCreatedAt()&&(e+=un),this.getMovedAt()&&(e+=un),this.getRemovedAt()&&(e+=un),e}}class vi extends ca{constructor(e){super(e)}}class Xl{constructor(e,t){l(this,"strKey");l(this,"value");this.strKey=e,this.value=t}static of(e,t){return new Xl(e,t)}isRemoved(){return this.value.isRemoved()}getStrKey(){return this.strKey}getValue(){return this.value}remove(e){return this.value.remove(e)}}class Us{constructor(){l(this,"nodeMapByKey");l(this,"nodeMapByCreatedAt");this.nodeMapByKey=new Map,this.nodeMapByCreatedAt=new Map}static create(){return new Us}set(e,t,r){let i;const s=this.nodeMapByKey.get(e);s&&!s.isRemoved()&&s.remove(r)&&(i=s.getValue());const o=Xl.of(e,t);return this.nodeMapByCreatedAt.set(t.getCreatedAt().toIDString(),o),(!s||r.after(s.getValue().getPositionedAt()))&&(this.nodeMapByKey.set(e,o),t.setMovedAt(r)),i}delete(e,t){if(!this.nodeMapByCreatedAt.has(e.toIDString()))throw new T(k.ErrInvalidArgument,`fail to find ${e.toIDString()}`);const r=this.nodeMapByCreatedAt.get(e.toIDString());return r.remove(t),r.getValue()}subPathOf(e){const t=this.nodeMapByCreatedAt.get(e.toIDString());if(t)return t.getStrKey()}purge(e){const t=this.nodeMapByCreatedAt.get(e.getCreatedAt().toIDString());if(!t)throw new T(k.ErrInvalidArgument,`fail to find ${e.getCreatedAt().toIDString()}`);const r=this.nodeMapByKey.get(t.getStrKey());t===r&&this.nodeMapByKey.delete(r.getStrKey()),this.nodeMapByCreatedAt.delete(t.getValue().getCreatedAt().toIDString())}deleteByKey(e,t){const r=this.nodeMapByKey.get(e);if(r&&r.remove(t))return r.getValue()}has(e){const t=this.nodeMapByKey.get(e);return t?!t.isRemoved():!1}getByID(e){return this.nodeMapByCreatedAt.get(e.toIDString())}get(e){const t=this.nodeMapByKey.get(e);if(!(!t||t.isRemoved()))return t}deepcopy(){const e=Us.create();for(const[,t]of this.nodeMapByCreatedAt)e.nodeMapByCreatedAt.set(t.getValue().getCreatedAt().toIDString(),Xl.of(t.getStrKey(),t.getValue().deepcopy()));for(const[t,r]of this.nodeMapByKey)e.nodeMapByKey.set(t,e.nodeMapByCreatedAt.get(r.getValue().getCreatedAt().toIDString()));return e}*[Symbol.iterator](){for(const[,e]of this.nodeMapByCreatedAt)yield e}}class $e extends vi{constructor(t,r){super(t);l(this,"memberNodes");this.memberNodes=r}static create(t,r){if(!r)return new $e(t,Us.create());const i=Us.create();for(const[s,o]of Object.entries(r))i.set(s,o.deepcopy(),o.getCreatedAt());return new $e(t,i)}subPathOf(t){return this.memberNodes.subPathOf(t)}purge(t){this.memberNodes.purge(t)}set(t,r,i){return this.memberNodes.set(t,r,i)}delete(t,r){return this.memberNodes.delete(t,r)}deleteByKey(t,r){return this.memberNodes.deleteByKey(t,r)}get(t){const r=this.memberNodes.get(t);return r==null?void 0:r.getValue()}getByID(t){const r=this.memberNodes.getByID(t);return r==null?void 0:r.getValue()}has(t){return this.memberNodes.has(t)}getDataSize(){return{data:0,meta:this.getMetaUsage()}}toJSON(){const t=[];for(const[r,i]of this)t.push(`"${on(r)}":${i.toJSON()}`);return`{${t.join(",")}}`}toJS(){return JSON.parse(this.toJSON())}toJSForTest(){const t={};for(const[r,i]of this){const{createdAt:s,value:o,type:a}=i.toJSForTest();t[r]={key:r,createdAt:s,value:o,type:a}}return{createdAt:this.getCreatedAt().toTestString(),value:t,type:"YORKIE_OBJECT"}}getKeys(){const t=Array();for(const[r]of this)t.push(r);return t}toSortedJSON(){var i;const t=new Set;for(const[s]of this)t.add(s);const r=[];for(const s of Array.from(t).sort()){const o=(i=this.memberNodes.get(s))==null?void 0:i.getValue();r.push(`"${on(s)}":${o.toSortedJSON()}`)}return`{${r.join(",")}}`}getRHT(){return this.memberNodes}deepcopy(){const t=$e.create(this.getCreatedAt());return t.memberNodes=this.memberNodes.deepcopy(),t.setRemovedAt(this.getRemovedAt()),t.setMovedAt(this.getMovedAt()),t}getDescendants(t){for(const r of this.memberNodes){const i=r.getValue();if(t(i,this))return;i instanceof vi&&i.getDescendants(t)}}*[Symbol.iterator](){for(const t of this.memberNodes)t.isRemoved()||(yield[t.getStrKey(),t.getValue()])}}var se=(n=>(n.Local="local",n.Remote="remote",n.UndoRedo="undoredo",n))(se||{});class _t{constructor(e,t){l(this,"parentCreatedAt");l(this,"executedAt");this.parentCreatedAt=e,this.executedAt=t}getParentCreatedAt(){return this.parentCreatedAt}getExecutedAt(){if(!this.executedAt)throw new T(k.ErrNotReady,"executedAt is not set yet");return this.executedAt}setActor(e){this.executedAt&&(this.executedAt=this.executedAt.setActor(e))}setExecutedAt(e){this.executedAt=e}}class tv{constructor(e){l(this,"value");l(this,"left");l(this,"right");l(this,"parent");l(this,"weight");this.value=e,this.initWeight()}getNodeString(){return`${this.weight}${this.value}`}getValue(){return this.value}getLeftWeight(){return this.hasLeft()?this.left.getWeight():0}getRightWeight(){return this.hasRight()?this.right.getWeight():0}getWeight(){return this.weight}getLeft(){return this.left}getRight(){return this.right}getParent(){return this.parent}hasLeft(){return!!this.left}hasRight(){return!!this.right}hasParent(){return!!this.parent}setLeft(e){this.left=e}setRight(e){this.right=e}setParent(e){this.parent=e}unlink(){this.parent=void 0,this.right=void 0,this.left=void 0}hasLinks(){return this.hasParent()||this.hasLeft()||this.hasRight()}increaseWeight(e){this.weight+=e}initWeight(){this.weight=this.getLength()}}class ea{constructor(e){l(this,"root");this.root=e}get length(){return this.root?this.root.getWeight():0}find(e){if(!this.root||e<0)return[void 0,0];let t=this.root;for(;;)if(t.hasLeft()&&e<=t.getLeftWeight())t=t.getLeft();else if(t.hasRight()&&t.getLeftWeight()+t.getLength()<e)e-=t.getLeftWeight()+t.getLength(),t=t.getRight();else{e-=t.getLeftWeight();break}if(e>t.getLength())throw new T(k.ErrInvalidArgument,`out of index range: pos: ${e} > node.length: ${t.getLength()}`);return this.splayNode(t),[t,e]}indexOf(e){return!e||e!==this.root&&!e.hasLinks()?-1:(this.splayNode(e),this.root.getLeftWeight())}getRoot(){return this.root}insert(e){return this.insertAfter(this.root,e)}insertAfter(e,t){return e?(this.splayNode(e),this.root=t,t.setRight(e.getRight()),e.hasRight()&&e.getRight().setParent(t),t.setLeft(e),e.setParent(t),e.setRight(),this.updateWeight(e),this.updateWeight(t),t):(this.root=t,t)}updateWeight(e){e.initWeight(),e.hasLeft()&&e.increaseWeight(e.getLeftWeight()),e.hasRight()&&e.increaseWeight(e.getRightWeight())}updateTreeWeight(e){for(;e;)this.updateWeight(e),e=e.getParent()}splayNode(e){if(e)for(;;)if(this.isLeftChild(e.getParent())&&this.isRightChild(e))this.rotateLeft(e),this.rotateRight(e);else if(this.isRightChild(e.getParent())&&this.isLeftChild(e))this.rotateRight(e),this.rotateLeft(e);else if(this.isLeftChild(e.getParent())&&this.isLeftChild(e))this.rotateRight(e.getParent()),this.rotateRight(e);else if(this.isRightChild(e.getParent())&&this.isRightChild(e))this.rotateLeft(e.getParent()),this.rotateLeft(e);else{this.isLeftChild(e)?this.rotateRight(e):this.isRightChild(e)&&this.rotateLeft(e),this.updateWeight(e);return}}delete(e){this.splayNode(e);const t=new ea(e.getLeft());t.root&&t.root.setParent();const r=new ea(e.getRight());if(r.root&&r.root.setParent(),t.root){const i=t.getRightmost();t.splayNode(i),t.root.setRight(r.root),r.root&&r.root.setParent(t.root),this.root=t.root}else this.root=r.root;e.unlink(),this.root&&this.updateWeight(this.root)}deleteRange(e,t){if(!t){this.splayNode(e),this.cutOffRight(e);return}this.splayNode(e),this.splayNode(t),t.getLeft()!=e&&this.rotateRight(e),this.cutOffRight(e)}cutOffRight(e){const t=[];this.traversePostorder(e.getRight(),t);for(const r of t)r.initWeight();this.updateTreeWeight(e)}toTestString(){const e=[];return this.traverseInorder(this.root,e),e.map(t=>`[${t.getWeight()},${t.getLength()}]${t.getValue()||""}`).join("")}checkWeight(){const e=[];this.traverseInorder(this.root,e);for(const t of e)if(t.getWeight()!=t.getLength()+t.getLeftWeight()+t.getRightWeight())return!1;return!0}getRightmost(){let e=this.root;for(;e.hasRight();)e=e.getRight();return e}traverseInorder(e,t){e&&(this.traverseInorder(e.getLeft(),t),t.push(e),this.traverseInorder(e.getRight(),t))}traversePostorder(e,t){e&&(this.traversePostorder(e.getLeft(),t),this.traversePostorder(e.getRight(),t),t.push(e))}rotateLeft(e){const t=e.getParent();t.hasParent()?t===t.getParent().getLeft()?t.getParent().setLeft(e):t.getParent().setRight(e):this.root=e,e.setParent(t.getParent()),t.setRight(e.getLeft()),t.hasRight()&&t.getRight().setParent(t),e.setLeft(t),e.getLeft().setParent(e),this.updateWeight(t),this.updateWeight(e)}rotateRight(e){const t=e.getParent();t.hasParent()?t===t.getParent().getLeft()?t.getParent().setLeft(e):t.getParent().setRight(e):this.root=e,e.setParent(t.getParent()),t.setLeft(e.getRight()),t.hasLeft()&&t.getLeft().setParent(t),e.setRight(t),e.getRight().setParent(e),this.updateWeight(t),this.updateWeight(e)}isLeftChild(e){return e&&e.hasParent()?e.getParent().getLeft()===e:!1}isRightChild(e){return e&&e.hasParent()?e.getParent().getRight()===e:!1}}/**
 * @license
 * Copyright 2009 The Closure Library Authors
 * Copyright 2020 Daniel Wirtz / The long.js Authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * SPDX-License-Identifier: Apache-2.0
 */var Et=null;try{Et=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function H(n,e,t){this.low=n|0,this.high=e|0,this.unsigned=!!t}H.prototype.__isLong__;Object.defineProperty(H.prototype,"__isLong__",{value:!0});function Ue(n){return(n&&n.__isLong__)===!0}function Hm(n){var e=Math.clz32(n&-n);return n?31-e:e}H.isLong=Ue;var _m={},Gm={};function Qi(n,e){var t,r,i;return e?(n>>>=0,(i=0<=n&&n<256)&&(r=Gm[n],r)?r:(t=X(n,0,!0),i&&(Gm[n]=t),t)):(n|=0,(i=-128<=n&&n<128)&&(r=_m[n],r)?r:(t=X(n,n<0?-1:0,!1),i&&(_m[n]=t),t))}H.fromInt=Qi;function Ct(n,e){if(isNaN(n))return e?Fr:Ut;if(e){if(n<0)return Fr;if(n>=nv)return sv}else{if(n<=-Xm)return Ge;if(n+1>=Xm)return iv}return n<0?Ct(-n,e).neg():X(n%js|0,n/js|0,e)}H.fromNumber=Ct;function X(n,e,t){return new H(n,e,t)}H.fromBits=X;var Ql=Math.pow;function jd(n,e,t){if(n.length===0)throw Error("empty string");if(typeof e=="number"?(t=e,e=!1):e=!!e,n==="NaN"||n==="Infinity"||n==="+Infinity"||n==="-Infinity")return e?Fr:Ut;if(t=t||10,t<2||36<t)throw RangeError("radix");var r;if((r=n.indexOf("-"))>0)throw Error("interior hyphen");if(r===0)return jd(n.substring(1),e,t).neg();for(var i=Ct(Ql(t,8)),s=Ut,o=0;o<n.length;o+=8){var a=Math.min(8,n.length-o),u=parseInt(n.substring(o,o+a),t);if(a<8){var c=Ct(Ql(t,a));s=s.mul(c).add(Ct(u))}else s=s.mul(i),s=s.add(Ct(u))}return s.unsigned=e,s}H.fromString=jd;function Ot(n,e){return typeof n=="number"?Ct(n,e):typeof n=="string"?jd(n,e):X(n.low,n.high,typeof e=="boolean"?e:n.unsigned)}H.fromValue=Ot;var Ym=65536,MS=1<<24,js=Ym*Ym,nv=js*js,Xm=nv/2,Qm=Qi(MS),Ut=Qi(0);H.ZERO=Ut;var Fr=Qi(0,!0);H.UZERO=Fr;var ys=Qi(1);H.ONE=ys;var rv=Qi(1,!0);H.UONE=rv;var $f=Qi(-1);H.NEG_ONE=$f;var iv=X(-1,2147483647,!1);H.MAX_VALUE=iv;var sv=X(-1,-1,!0);H.MAX_UNSIGNED_VALUE=sv;var Ge=X(0,-2147483648,!1);H.MIN_VALUE=Ge;var P=H.prototype;P.toInt=function(){return this.unsigned?this.low>>>0:this.low};P.toNumber=function(){return this.unsigned?(this.high>>>0)*js+(this.low>>>0):this.high*js+(this.low>>>0)};P.toString=function(e){if(e=e||10,e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(Ge)){var t=Ct(e),r=this.div(t),i=r.mul(t).sub(this);return r.toString(e)+i.toInt().toString(e)}else return"-"+this.neg().toString(e);for(var s=Ct(Ql(e,6),this.unsigned),o=this,a="";;){var u=o.div(s),c=o.sub(u.mul(s)).toInt()>>>0,d=c.toString(e);if(o=u,o.isZero())return d+a;for(;d.length<6;)d="0"+d;a=""+d+a}};P.getHighBits=function(){return this.high};P.getHighBitsUnsigned=function(){return this.high>>>0};P.getLowBits=function(){return this.low};P.getLowBitsUnsigned=function(){return this.low>>>0};P.getNumBitsAbs=function(){if(this.isNegative())return this.eq(Ge)?64:this.neg().getNumBitsAbs();for(var e=this.high!=0?this.high:this.low,t=31;t>0&&!(e&1<<t);t--);return this.high!=0?t+33:t+1};P.isSafeInteger=function(){var e=this.high>>21;return e?this.unsigned?!1:e===-1&&!(this.low===0&&this.high===-2097152):!0};P.isZero=function(){return this.high===0&&this.low===0};P.eqz=P.isZero;P.isNegative=function(){return!this.unsigned&&this.high<0};P.isPositive=function(){return this.unsigned||this.high>=0};P.isOdd=function(){return(this.low&1)===1};P.isEven=function(){return(this.low&1)===0};P.equals=function(e){return Ue(e)||(e=Ot(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low};P.eq=P.equals;P.notEquals=function(e){return!this.eq(e)};P.neq=P.notEquals;P.ne=P.notEquals;P.lessThan=function(e){return this.comp(e)<0};P.lt=P.lessThan;P.lessThanOrEqual=function(e){return this.comp(e)<=0};P.lte=P.lessThanOrEqual;P.le=P.lessThanOrEqual;P.greaterThan=function(e){return this.comp(e)>0};P.gt=P.greaterThan;P.greaterThanOrEqual=function(e){return this.comp(e)>=0};P.gte=P.greaterThanOrEqual;P.ge=P.greaterThanOrEqual;P.compare=function(e){if(Ue(e)||(e=Ot(e)),this.eq(e))return 0;var t=this.isNegative(),r=e.isNegative();return t&&!r?-1:!t&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1};P.comp=P.compare;P.negate=function(){return!this.unsigned&&this.eq(Ge)?Ge:this.not().add(ys)};P.neg=P.negate;P.add=function(e){Ue(e)||(e=Ot(e));var t=this.high>>>16,r=this.high&65535,i=this.low>>>16,s=this.low&65535,o=e.high>>>16,a=e.high&65535,u=e.low>>>16,c=e.low&65535,d=0,h=0,m=0,p=0;return p+=s+c,m+=p>>>16,p&=65535,m+=i+u,h+=m>>>16,m&=65535,h+=r+a,d+=h>>>16,h&=65535,d+=t+o,d&=65535,X(m<<16|p,d<<16|h,this.unsigned)};P.subtract=function(e){return Ue(e)||(e=Ot(e)),this.add(e.neg())};P.sub=P.subtract;P.multiply=function(e){if(this.isZero())return this;if(Ue(e)||(e=Ot(e)),Et){var t=Et.mul(this.low,this.high,e.low,e.high);return X(t,Et.get_high(),this.unsigned)}if(e.isZero())return this.unsigned?Fr:Ut;if(this.eq(Ge))return e.isOdd()?Ge:Ut;if(e.eq(Ge))return this.isOdd()?Ge:Ut;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(Qm)&&e.lt(Qm))return Ct(this.toNumber()*e.toNumber(),this.unsigned);var r=this.high>>>16,i=this.high&65535,s=this.low>>>16,o=this.low&65535,a=e.high>>>16,u=e.high&65535,c=e.low>>>16,d=e.low&65535,h=0,m=0,p=0,y=0;return y+=o*d,p+=y>>>16,y&=65535,p+=s*d,m+=p>>>16,p&=65535,p+=o*c,m+=p>>>16,p&=65535,m+=i*d,h+=m>>>16,m&=65535,m+=s*c,h+=m>>>16,m&=65535,m+=o*u,h+=m>>>16,m&=65535,h+=r*d+i*c+s*u+o*a,h&=65535,X(p<<16|y,h<<16|m,this.unsigned)};P.mul=P.multiply;P.divide=function(e){if(Ue(e)||(e=Ot(e)),e.isZero())throw Error("division by zero");if(Et){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;var t=(this.unsigned?Et.div_u:Et.div_s)(this.low,this.high,e.low,e.high);return X(t,Et.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?Fr:Ut;var r,i,s;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return Fr;if(e.gt(this.shru(1)))return rv;s=Fr}else{if(this.eq(Ge)){if(e.eq(ys)||e.eq($f))return Ge;if(e.eq(Ge))return ys;var o=this.shr(1);return r=o.div(e).shl(1),r.eq(Ut)?e.isNegative()?ys:$f:(i=this.sub(e.mul(r)),s=r.add(i.div(e)),s)}else if(e.eq(Ge))return this.unsigned?Fr:Ut;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();s=Ut}for(i=this;i.gte(e);){r=Math.max(1,Math.floor(i.toNumber()/e.toNumber()));for(var a=Math.ceil(Math.log(r)/Math.LN2),u=a<=48?1:Ql(2,a-48),c=Ct(r),d=c.mul(e);d.isNegative()||d.gt(i);)r-=u,c=Ct(r,this.unsigned),d=c.mul(e);c.isZero()&&(c=ys),s=s.add(c),i=i.sub(d)}return s};P.div=P.divide;P.modulo=function(e){if(Ue(e)||(e=Ot(e)),Et){var t=(this.unsigned?Et.rem_u:Et.rem_s)(this.low,this.high,e.low,e.high);return X(t,Et.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))};P.mod=P.modulo;P.rem=P.modulo;P.not=function(){return X(~this.low,~this.high,this.unsigned)};P.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32};P.clz=P.countLeadingZeros;P.countTrailingZeros=function(){return this.low?Hm(this.low):Hm(this.high)+32};P.ctz=P.countTrailingZeros;P.and=function(e){return Ue(e)||(e=Ot(e)),X(this.low&e.low,this.high&e.high,this.unsigned)};P.or=function(e){return Ue(e)||(e=Ot(e)),X(this.low|e.low,this.high|e.high,this.unsigned)};P.xor=function(e){return Ue(e)||(e=Ot(e)),X(this.low^e.low,this.high^e.high,this.unsigned)};P.shiftLeft=function(e){return Ue(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?X(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):X(0,this.low<<e-32,this.unsigned)};P.shl=P.shiftLeft;P.shiftRight=function(e){return Ue(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?X(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):X(this.high>>e-32,this.high>=0?0:-1,this.unsigned)};P.shr=P.shiftRight;P.shiftRightUnsigned=function(e){return Ue(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?X(this.low>>>e|this.high<<32-e,this.high>>>e,this.unsigned):e===32?X(this.high,0,this.unsigned):X(this.high>>>e-32,0,this.unsigned)};P.shru=P.shiftRightUnsigned;P.shr_u=P.shiftRightUnsigned;P.rotateLeft=function(e){var t;return Ue(e)&&(e=e.toInt()),(e&=63)===0?this:e===32?X(this.high,this.low,this.unsigned):e<32?(t=32-e,X(this.low<<e|this.high>>>t,this.high<<e|this.low>>>t,this.unsigned)):(e-=32,t=32-e,X(this.high<<e|this.low>>>t,this.low<<e|this.high>>>t,this.unsigned))};P.rotl=P.rotateLeft;P.rotateRight=function(e){var t;return Ue(e)&&(e=e.toInt()),(e&=63)===0?this:e===32?X(this.high,this.low,this.unsigned):e<32?(t=32-e,X(this.high<<t|this.low>>>e,this.low<<t|this.high>>>e,this.unsigned)):(e-=32,t=32-e,X(this.low<<t|this.high>>>e,this.high<<t|this.low>>>e,this.unsigned))};P.rotr=P.rotateRight;P.toSigned=function(){return this.unsigned?X(this.low,this.high,!1):this};P.toUnsigned=function(){return this.unsigned?this:X(this.low,this.high,!0)};P.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()};P.toBytesLE=function(){var e=this.high,t=this.low;return[t&255,t>>>8&255,t>>>16&255,t>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]};P.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,t>>>24,t>>>16&255,t>>>8&255,t&255]};H.fromBytes=function(e,t,r){return r?H.fromBytesLE(e,t):H.fromBytesBE(e,t)};H.fromBytesLE=function(e,t){return new H(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)};H.fromBytesBE=function(e,t){return new H(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)};typeof BigInt=="function"&&(H.fromBigInt=function(e,t){var r=Number(BigInt.asIntN(32,e)),i=Number(BigInt.asIntN(32,e>>BigInt(32)));return X(r,i,t)},H.fromValue=function(e,t){return typeof e=="bigint"?H.fromBigInt(e,t):Ot(e,t)},P.toBigInt=function(){var e=BigInt(this.low>>>0),t=BigInt(this.unsigned?this.high>>>0:this.high);return t<<BigInt(32)|e});var te=(n=>(n[n.Null=0]="Null",n[n.Boolean=1]="Boolean",n[n.Integer=2]="Integer",n[n.Long=3]="Long",n[n.Double=4]="Double",n[n.String=5]="String",n[n.Bytes=6]="Bytes",n[n.Date=7]="Date",n))(te||{});class le extends ca{constructor(t,r){super(r);l(this,"valueType");l(this,"value");this.valueType=le.getPrimitiveType(t),this.value=t===void 0?null:t}static of(t,r){return new le(t,r)}static valueFromBytes(t,r){switch(t){case 0:return null;case 1:return!!r[0];case 2:return r[0]|r[1]<<8|r[2]<<16|r[3]<<24;case 4:{const i=new DataView(r.buffer);return r.forEach(function(s,o){i.setUint8(o,s)}),i.getFloat64(0,!0)}case 5:return new TextDecoder("utf-8").decode(r);case 3:return H.fromBytesLE(Array.from(r));case 6:return r;case 7:return new Date(H.fromBytesLE(Array.from(r),!0).toNumber());default:throw new T(k.ErrUnimplemented,`unimplemented type: ${t}`)}}getValueSize(){switch(this.valueType){case 0:return 8;case 1:return 4;case 2:return 4;case 3:return 8;case 4:return 8;case 5:return this.value.length*2;case 6:return this.value.length;case 7:return 8;default:throw new T(k.ErrUnimplemented,`unimplemented type: ${this.valueType}`)}}getDataSize(){return{data:this.getValueSize(),meta:this.getMetaUsage()}}toJSON(){return this.valueType===5?`"${on(this.value)}"`:`${this.value}`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:this.value,type:"YORKIE_PRIMITIVE"}}deepcopy(){const t=le.of(this.value,this.getCreatedAt());return t.setMovedAt(this.getMovedAt()),t.setRemovedAt(this.getRemovedAt()),t}getType(){return this.valueType}static getPrimitiveType(t){switch(typeof t){case"undefined":return 0;case"boolean":return 1;case"number":return this.isInteger(t)?2:4;case"string":return 5;case"object":if(t===null)return 0;if(t instanceof H)return 3;if(t instanceof Uint8Array)return 6;if(t instanceof Date)return 7}}static isSupport(t){return le.getPrimitiveType(t)!==void 0}static isInteger(t){return t%1===0}isNumericType(){const t=this.valueType;return t===2||t===3||t===4}getValue(){return this.value}toBytes(){switch(this.valueType){case 0:return new Uint8Array;case 1:return this.value?new Uint8Array([1]):new Uint8Array([0]);case 2:{const t=this.value;return new Uint8Array([t&255,t>>8&255,t>>16&255,t>>24&255])}case 4:{const t=this.value,r=new Uint8Array(8);return new DataView(r.buffer).setFloat64(0,t,!0),r}case 5:return new TextEncoder().encode(this.value);case 3:{const r=this.value.toBytesLE();return Uint8Array.from(r)}case 6:return this.value;case 7:{const t=this.value,r=H.fromNumber(t.getTime(),!0).toBytesLE();return Uint8Array.from(r)}default:throw new T(k.ErrUnimplemented,`unimplemented type: ${this.valueType}`)}}}class Zl extends tv{constructor(t){super(t);l(this,"prev");l(this,"next");l(this,"movedFrom");this.value=t}static createAfter(t,r){const i=new Zl(r),s=t.next;return t.next=i,i.prev=t,i.next=s,s&&(s.prev=i),i}remove(t){return this.value.remove(t)}getCreatedAt(){return this.value.getCreatedAt()}getPositionedAt(){return this.value.getPositionedAt()}release(){this.prev&&(this.prev.next=this.next),this.next&&(this.next.prev=this.prev),this.prev=void 0,this.next=void 0}getLength(){return this.value.isRemoved()?0:1}getPrev(){return this.prev}getNext(){return this.next}getMovedFrom(){return this.movedFrom}setMovedFrom(t){this.movedFrom=t}getValue(){return this.value}isRemoved(){return this.value.isRemoved()}}class ta{constructor(){l(this,"dummyHead");l(this,"last");l(this,"nodeMapByIndex");l(this,"nodeMapByCreatedAt");const e=le.of(0,Js);e.setRemovedAt(Js),this.dummyHead=new Zl(e),this.last=this.dummyHead,this.nodeMapByIndex=new ea,this.nodeMapByCreatedAt=new Map,this.nodeMapByIndex.insert(this.dummyHead),this.nodeMapByCreatedAt.set(this.dummyHead.getCreatedAt().toIDString(),this.dummyHead)}static create(){return new ta}get length(){return this.nodeMapByIndex.length}findNextBeforeExecutedAt(e,t){let r=this.nodeMapByCreatedAt.get(e.toIDString());if(!r)throw new T(k.ErrInvalidArgument,`cant find the given node: ${e.toIDString()}`);for(;r.getValue().getMovedAt()&&r.getValue().getMovedAt().after(t)&&r.getMovedFrom();)r=r.getMovedFrom();for(;r.getNext()&&r.getNext().getPositionedAt().after(t);)r=r.getNext();return r}release(e){this.last===e&&(this.last=e.getPrev()),e.release(),this.nodeMapByIndex.delete(e),this.nodeMapByCreatedAt.delete(e.getValue().getCreatedAt().toIDString())}insertAfter(e,t,r=t.getCreatedAt()){const i=this.findNextBeforeExecutedAt(e,r),s=Zl.createAfter(i,t);return i===this.last&&(this.last=s),this.nodeMapByIndex.insertAfter(i,s),this.nodeMapByCreatedAt.set(s.getCreatedAt().toIDString(),s),s}moveAfter(e,t,r){let i=this.nodeMapByCreatedAt.get(e.toIDString());if(!i)throw new T(k.ErrInvalidArgument,`cant find the given node: ${e.toIDString()}`);let s=this.nodeMapByCreatedAt.get(t.toIDString());if(!s)throw new T(k.ErrInvalidArgument,`cant find the given node: ${t.toIDString()}`);if(i!==s&&r.after(s.getPositionedAt())){const o=s.getPrev();let a=s.getNext();for(this.release(s),s=this.insertAfter(i.getCreatedAt(),s.getValue(),r),s.getValue().setMovedAt(r),s.setMovedFrom(o);a&&a.getPositionedAt().after(r);)i=s,s=a,a=s.getNext(),this.release(s),s=this.insertAfter(i.getCreatedAt(),s.getValue(),r),s.getValue().setMovedAt(r),s.setMovedFrom(o)}}insert(e){this.insertAfter(this.last.getCreatedAt(),e)}getByID(e){return this.nodeMapByCreatedAt.get(e.toIDString())}subPathOf(e){const t=this.nodeMapByCreatedAt.get(e.toIDString());if(t)return String(this.nodeMapByIndex.indexOf(t))}purge(e){const t=this.nodeMapByCreatedAt.get(e.getCreatedAt().toIDString());if(!t)throw new T(k.ErrInvalidArgument,`fail to find the given createdAt: ${e.getCreatedAt().toIDString()}`);this.release(t)}getByIndex(e){if(e>=this.length)return;const[t,r]=this.nodeMapByIndex.find(e);let i=t;if(e===0&&t===this.dummyHead||r>0)do i&&(i=i.getNext());while(i&&i.isRemoved());return i}getPrevCreatedAt(e){let t=this.nodeMapByCreatedAt.get(e.toIDString());do t=t.getPrev();while(this.dummyHead!==t&&t.isRemoved());return t.getValue().getCreatedAt()}delete(e,t){const r=this.nodeMapByCreatedAt.get(e.toIDString()),i=r.isRemoved();return r.remove(t)&&!i&&this.nodeMapByIndex.splayNode(r),r.getValue()}set(e,t,r){const i=this.nodeMapByCreatedAt.get(e.toIDString());if(!i)throw new T(k.ErrInvalidArgument,`cant find the given node: ${e.toIDString()}`);return this.insertAfter(i.getCreatedAt(),t,r),this.delete(e,r)}deleteByIndex(e,t){const r=this.getByIndex(e);if(r)return r.remove(t)&&this.nodeMapByIndex.splayNode(r),r.getValue()}getHead(){return this.dummyHead.getValue()}getLast(){return this.last.getValue()}getLastCreatedAt(){return this.last.getCreatedAt()}toTestString(){const e=[];for(const t of this){const r=`${t.getCreatedAt().toIDString()}:${t.getValue().toJSON()}`;t.isRemoved()?e.push(`{${r}}`):e.push(`[${r}]`)}return e.join("")}*[Symbol.iterator](){let e=this.dummyHead.getNext();for(;e;)yield e,e=e.getNext()}}class Fe extends vi{constructor(t,r){super(t);l(this,"elements");this.elements=r}static create(t,r){if(!r)return new Fe(t,ta.create());const i=ta.create();for(const s of r)i.insertAfter(i.getLastCreatedAt(),s.deepcopy());return new Fe(t,i)}subPathOf(t){return this.elements.subPathOf(t)}purge(t){this.elements.purge(t)}insertAfter(t,r,i){this.elements.insertAfter(t,r,i)}moveAfter(t,r,i){this.elements.moveAfter(t,r,i)}get(t){const r=this.elements.getByIndex(t);return r==null?void 0:r.getValue()}getByID(t){const r=this.elements.getByID(t);return r==null?void 0:r.getValue()}getHead(){return this.elements.getHead()}getLast(){return this.elements.getLast()}getPrevCreatedAt(t){return this.elements.getPrevCreatedAt(t)}delete(t,r){return this.elements.delete(t,r)}deleteByIndex(t,r){return this.elements.deleteByIndex(t,r)}set(t,r,i){return this.elements.set(t,r,i)}getLastCreatedAt(){return this.elements.getLastCreatedAt()}get length(){return this.elements.length}*[Symbol.iterator](){for(const t of this.elements)t.isRemoved()||(yield t.getValue())}toTestString(){return this.elements.toTestString()}getDescendants(t){for(const r of this.elements){const i=r.getValue();if(t(i,this))return;i instanceof vi&&i.getDescendants(t)}}getDataSize(){return{data:0,meta:this.getMetaUsage()}}toJSON(){const t=[];for(const r of this)t.push(r.toJSON());return`[${t.join(",")}]`}toJS(){return JSON.parse(this.toJSON())}toJSForTest(){const t={};for(let r=0;r<this.length;r++){const{createdAt:i,value:s,type:o}=this.get(r).toJSForTest();t[r]={key:String(r),createdAt:i,value:s,type:o}}return{createdAt:this.getCreatedAt().toTestString(),value:t,type:"YORKIE_ARRAY"}}toSortedJSON(){return this.toJSON()}getElements(){return this.elements}deepcopy(){const t=Fe.create(this.getCreatedAt());for(const r of this.elements)t.elements.insertAfter(t.getLastCreatedAt(),r.getValue().deepcopy());return t.setRemovedAt(this.getRemovedAt()),t.setMovedAt(this.getMovedAt()),t}}class Ei extends _t{constructor(t,r,i,s){super(t,s);l(this,"prevCreatedAt");l(this,"value");this.prevCreatedAt=r,this.value=i}static create(t,r,i,s){return new Ei(t,r,i,s)}execute(t){const r=t.findByCreatedAt(this.getParentCreatedAt());if(!r)throw new T(k.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(r instanceof Fe))throw new T(k.ErrInvalidArgument,"fail to execute, only array can execute add");const i=r,s=this.value.deepcopy();return i.insertAfter(this.prevCreatedAt,s,this.getExecutedAt()),t.registerElement(s,i),{opInfos:[{type:"add",path:t.createPath(this.getParentCreatedAt()),index:Number(i.subPathOf(this.getEffectedCreatedAt()))}],reverseOp:this.toReverseOperation()}}toReverseOperation(){return hn.create(this.getParentCreatedAt(),this.value.getCreatedAt())}getEffectedCreatedAt(){return this.value.getCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.ADD.${this.value.toJSON()}`}getPrevCreatedAt(){return this.prevCreatedAt}getValue(){return this.value}setPrevCreatedAt(t){this.prevCreatedAt=t}}class hn extends _t{constructor(t,r,i){super(t,i);l(this,"createdAt");this.createdAt=r}static create(t,r,i){return new hn(t,r,i)}execute(t,r){var c;const i=t.findByCreatedAt(this.getParentCreatedAt());if(!i)throw new T(k.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(i instanceof vi))throw new T(k.ErrInvalidArgument,`only object and array can execute remove: ${i}`);if(r===se.UndoRedo){let d=i.getByID(this.createdAt);for(;d;){if(d.getRemovedAt())return;d=(c=t.findElementPairByCreatedAt(d.getCreatedAt()))==null?void 0:c.parent}}const s=i.subPathOf(this.createdAt),o=this.toReverseOperation(i),a=i.delete(this.createdAt,this.getExecutedAt());return t.registerRemovedElement(a),{opInfos:i instanceof Fe?[{type:"remove",path:t.createPath(this.getParentCreatedAt()),index:Number(s)}]:[{type:"remove",path:t.createPath(this.getParentCreatedAt()),key:s}],reverseOp:o}}toReverseOperation(t){if(t instanceof Fe){const r=t.getByID(this.createdAt);if(r!==void 0){const i=t.getPrevCreatedAt(this.createdAt);return Ei.create(this.getParentCreatedAt(),i,r.deepcopy())}}if(t instanceof $e){const r=t.subPathOf(this.createdAt);if(r!==void 0){const i=t.get(r);if(i!==void 0)return Gi.create(r,i.deepcopy(),this.getParentCreatedAt())}}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.REMOVE.${this.createdAt.toTestString()}`}getCreatedAt(){return this.createdAt}setCreatedAt(t){this.createdAt=t}}class Gi extends _t{constructor(t,r,i,s){super(i,s);l(this,"key");l(this,"value");this.key=t,this.value=r}static create(t,r,i,s){return new Gi(t,r,i,s)}execute(t,r){var c;const i=t.findByCreatedAt(this.getParentCreatedAt());if(!i)throw new T(k.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(i instanceof $e))throw new T(k.ErrInvalidArgument,"fail to execute, only object can execute set");if(r===se.UndoRedo){let d=i;for(;d;){if(d.getRemovedAt())return;d=(c=t.findElementPairByCreatedAt(d.getCreatedAt()))==null?void 0:c.parent}}const s=i.get(this.key),o=this.toReverseOperation(s),a=this.value.deepcopy(),u=i.set(this.key,a,this.getExecutedAt());return r===se.UndoRedo&&t.findByCreatedAt(a.getCreatedAt())&&t.deregisterElement(a),t.registerElement(a,i),u&&t.registerRemovedElement(u),{opInfos:[{type:"set",path:t.createPath(this.getParentCreatedAt()),key:this.key}],reverseOp:o}}toReverseOperation(t){let r=hn.create(this.getParentCreatedAt(),this.value.getCreatedAt());return t!==void 0&&!t.isRemoved()&&(r=Gi.create(this.key,t.deepcopy(),this.getParentCreatedAt())),r}getEffectedCreatedAt(){return this.value.getCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.SET.${this.key}=${this.value.toSortedJSON()}`}getKey(){return this.key}getValue(){return this.value}}class jt extends _t{constructor(t,r,i,s){super(t,s);l(this,"prevCreatedAt");l(this,"createdAt");this.prevCreatedAt=r,this.createdAt=i}static create(t,r,i,s){return new jt(t,r,i,s)}execute(t){const r=t.findByCreatedAt(this.getParentCreatedAt());if(!r)throw new T(k.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(r instanceof Fe))throw new T(k.ErrInvalidArgument,"fail to execute, only array can execute move");const i=r,s=this.toReverseOperation(i),o=Number(i.subPathOf(this.createdAt));i.moveAfter(this.prevCreatedAt,this.createdAt,this.getExecutedAt());const a=Number(i.subPathOf(this.createdAt));return{opInfos:[{type:"move",path:t.createPath(this.getParentCreatedAt()),index:a,previousIndex:o}],reverseOp:s}}toReverseOperation(t){const r=t.getPrevCreatedAt(this.createdAt);return jt.create(this.getParentCreatedAt(),r,this.createdAt)}getEffectedCreatedAt(){return this.createdAt}toTestString(){return`${this.getParentCreatedAt().toTestString()}.MOVE`}getPrevCreatedAt(){return this.prevCreatedAt}getCreatedAt(){return this.createdAt}setPrevCreatedAt(t){this.prevCreatedAt=t}setCreatedAt(t){this.createdAt=t}}class li{constructor(e,t,r,i){l(this,"key");l(this,"value");l(this,"updatedAt");l(this,"_isRemoved");this.key=e,this.value=t,this.updatedAt=r,this._isRemoved=i}static of(e,t,r,i){return new li(e,t,r,i)}getKey(){return this.key}getValue(){return this.value}getUpdatedAt(){return this.updatedAt}isRemoved(){return this._isRemoved}toIDString(){return`${this.updatedAt.toIDString()}:${this.key}`}getRemovedAt(){if(this._isRemoved)return this.updatedAt}getDataSize(){return{data:(this.key.length+this.value.length)*2,meta:un}}}class Hr{constructor(){l(this,"nodeMapByKey");l(this,"numberOfRemovedElement");this.nodeMapByKey=new Map,this.numberOfRemovedElement=0}static create(){return new Hr}getNodeMapByKey(){return this.nodeMapByKey}set(e,t,r){const i=this.nodeMapByKey.get(e);if(i&&i.isRemoved()&&r.after(i.getUpdatedAt())&&(this.numberOfRemovedElement-=1),i===void 0||r.after(i.getUpdatedAt())){const s=li.of(e,t,r,!1);return this.nodeMapByKey.set(e,s),i!==void 0&&i.isRemoved()?[i,s]:[void 0,s]}return i.isRemoved()?[i,void 0]:[void 0,void 0]}setInternal(e,t,r,i){const s=li.of(e,t,r,i);this.nodeMapByKey.set(e,s),i&&this.numberOfRemovedElement++}remove(e,t){const r=this.nodeMapByKey.get(e),i=[];if(r===void 0||t.after(r.getUpdatedAt())){if(r===void 0){this.numberOfRemovedElement+=1;const a=li.of(e,"",t,!0);return this.nodeMapByKey.set(e,a),i.push(a),i}const s=r.isRemoved();s||(this.numberOfRemovedElement+=1),s&&i.push(r);const o=li.of(e,r.getValue(),t,!0);return this.nodeMapByKey.set(e,o),i.push(o),i}return i}has(e){if(this.nodeMapByKey.has(e)){const t=this.nodeMapByKey.get(e);return t!==void 0&&!t.isRemoved()}return!1}get(e){if(this.nodeMapByKey.has(e))return this.nodeMapByKey.get(e).getValue()}deepcopy(){const e=new Hr;for(const[,t]of this.nodeMapByKey)e.setInternal(t.getKey(),t.getValue(),t.getUpdatedAt(),t.isRemoved());return e}toJSON(){if(!this.size())return"{}";const e=[];for(const[t,r]of this.nodeMapByKey)r.isRemoved()||e.push(`"${on(t)}":"${on(r.getValue())}"`);return`{${e.join(",")}}`}size(){return this.nodeMapByKey.size-this.numberOfRemovedElement}toObject(){const e={};for(const[t,r]of this.nodeMapByKey)r.isRemoved()||(e[t]=r.getValue());return e}*[Symbol.iterator](){for(const[,e]of this.nodeMapByKey)yield e}purge(e){const t=this.nodeMapByKey.get(e.getKey());t==null||t.toIDString()!=e.toIDString()||(this.nodeMapByKey.delete(e.getKey()),this.numberOfRemovedElement--)}}function zt(n){if(n instanceof Map){const e=Array.from(n);return new Map(JSON.parse(JSON.stringify(e)))}return JSON.parse(JSON.stringify(n))}const ov=n=>n?Object.entries(n).length===0:!0,Vs=n=>{const e={};for(const[t,r]of Object.entries(n))e[t]=JSON.stringify(r);return e},Ur=n=>{const e={};for(const[t,r]of Object.entries(n))e[t]=JSON.parse(r);return e};function $S(n){return n?Zm(n.live)+Zm(n.gc):0}function Zm(n){return n.data+n.meta}function be(n,...e){for(const t of e)n.data+=t.data,n.meta+=t.meta}function $i(n,e){n.data-=e.data,n.meta-=e.meta}class na{constructor(e){l(this,"attributes");l(this,"content");this.attributes=Hr.create(),this.content=e}static create(e){return new na(e)}get length(){return this.content.length}substring(e,t){const r=new na(this.content.substring(e,t));return r.attributes=this.attributes.deepcopy(),r}setAttr(e,t,r){return this.attributes.set(e,t,r)}getAttrs(){return this.attributes}toString(){return this.content}getDataSize(){const e={data:0,meta:0};e.data+=this.content.length*2;for(const t of this.attributes){const r=t.getDataSize();e.meta+=r.meta,e.data+=r.data}return e}toJSON(){const e=on(this.content),t=this.attributes.toObject(),r=[];for(const[i,s]of Object.entries(t)){const o=JSON.parse(s),a=typeof o=="string"?`"${on(i)}":"${on(o)}"`:`"${on(i)}":${String(o)}`;r.push(a)}return r.sort(),r.length===0?`{"val":"${e}"}`:`{"attrs":{${r.join(",")}},"val":"${e}"}`}getAttributes(){return this.attributes.toObject()}getContent(){return this.content}purge(e){this.attributes&&e instanceof li&&this.attributes.purge(e)}getGCPairs(){const e=[];for(const t of this.attributes)t.getRemovedAt()&&e.push({parent:this,child:t});return e}}class lt extends ca{constructor(t,r){super(r);l(this,"rgaTreeSplit");this.rgaTreeSplit=t}static create(t,r){return new lt(t,r)}edit(t,r,i,s,o){const a=r?na.create(r):void 0;if(a&&s)for(const[p,y]of Object.entries(s))a.setAttr(p,y,i);const[u,c,d,h]=this.rgaTreeSplit.edit(t,i,a,o);return[h.map(p=>({...p,value:p.value?{attributes:Ur(p.value.getAttributes()),content:p.value.getContent()}:{attributes:void 0,content:""},type:"content"})),c,d,[u,u]]}setStyle(t,r,i,s){const o={data:0,meta:0},[,a,u]=this.rgaTreeSplit.findNodeWithSplit(t[1],i),[,c,d]=this.rgaTreeSplit.findNodeWithSplit(t[0],i);be(o,a,c);const h=[],m=this.rgaTreeSplit.findBetween(d,u),p=[];for(const w of m){const A=w.getCreatedAt().getActorID();let v=Mf;s!=null&&(v=s.get(A)?s.get(A):0n),w.canStyle(i,v)&&p.push(w)}const y=[];for(const w of p){if(w.isRemoved())continue;const[A,v]=this.rgaTreeSplit.findIndexesFromRange(w.createPosRange());h.push({type:"style",actor:i.getActorID(),from:A,to:v,value:{attributes:Ur(r)}});for(const[g,S]of Object.entries(r)){const[I]=w.getValue().setAttr(g,S,i);I!==void 0&&y.push({parent:w.getValue(),child:I});const N=w.getValue().getAttrs().getNodeMapByKey().get(g);N!==void 0&&be(o,N.getDataSize())}}return[y,o,h]}indexRangeToPosRange(t,r){const i=this.rgaTreeSplit.indexToPos(t);return t===r?[i,i]:[i,this.rgaTreeSplit.indexToPos(r)]}get length(){return this.rgaTreeSplit.length}getTreeByIndex(){return this.rgaTreeSplit.getTreeByIndex()}getTreeByID(){return this.rgaTreeSplit.getTreeByID()}getDataSize(){const t={data:0,meta:0};for(const r of this.rgaTreeSplit){if(r.isRemoved())continue;const i=r.getDataSize();t.data+=i.data,t.meta+=i.meta}return{data:t.data,meta:t.meta+this.getMetaUsage()}}toJSON(){const t=[];for(const r of this.rgaTreeSplit)r.isRemoved()||t.push(r.getValue().toJSON());return`[${t.join(",")}]`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:JSON.parse(this.toJSON()),type:"YORKIE_TEXT"}}toString(){return this.rgaTreeSplit.toString()}values(){const t=[];for(const r of this.rgaTreeSplit)if(!r.isRemoved()){const i=r.getValue();t.push({attributes:Ur(i.getAttributes()),content:i.getContent()})}return t}getRGATreeSplit(){return this.rgaTreeSplit}toTestString(){return this.rgaTreeSplit.toTestString()}deepcopy(){const t=new lt(this.rgaTreeSplit.deepcopy(),this.getCreatedAt());return t.setRemovedAt(this.getRemovedAt()),t.setMovedAt(this.getMovedAt()),t}findIndexesFromRange(t){return this.rgaTreeSplit.findIndexesFromRange(t)}getGCPairs(){const t=[];for(const r of this.rgaTreeSplit){r.getRemovedAt()&&t.push({parent:this.rgaTreeSplit,child:r});for(const i of r.getValue().getGCPairs())t.push(i)}return t}}class fa extends _t{constructor(t,r,i,s,o,a){super(t,a);l(this,"fromPos");l(this,"toPos");l(this,"content");l(this,"attributes");this.fromPos=r,this.toPos=i,this.content=s,this.attributes=o}static create(t,r,i,s,o,a){return new fa(t,r,i,s,o,a)}execute(t,r,i){const s=t.findByCreatedAt(this.getParentCreatedAt());if(!s)throw new T(k.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(s instanceof lt))throw new T(k.ErrInvalidArgument,"fail to execute, only Text can execute edit");const o=s,[a,u,c]=o.edit([this.fromPos,this.toPos],this.content,this.getExecutedAt(),Object.fromEntries(this.attributes),i);t.acc(c);for(const d of u)t.registerGCPair(d);return{opInfos:a.map(({from:d,to:h,value:m})=>({type:"edit",from:d,to:h,value:m,path:t.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const t=this.getParentCreatedAt().toTestString(),r=this.fromPos.toTestString(),i=this.toPos.toTestString(),s=this.content;return`${t}.EDIT(${r},${i},${s})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getContent(){return this.content}getAttributes(){return this.attributes||new Map}}class da extends _t{constructor(t,r,i,s,o){super(t,o);l(this,"fromPos");l(this,"toPos");l(this,"attributes");this.fromPos=r,this.toPos=i,this.attributes=s}static create(t,r,i,s,o){return new da(t,r,i,s,o)}execute(t,r,i){const s=t.findByCreatedAt(this.getParentCreatedAt());if(!s)throw new T(k.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(s instanceof lt))throw new T(k.ErrInvalidArgument,"fail to execute, only Text can execute edit");const o=s,[a,u,c]=o.setStyle([this.fromPos,this.toPos],this.attributes?Object.fromEntries(this.attributes):{},this.getExecutedAt(),i);t.acc(u);for(const d of a)t.registerGCPair(d);return{opInfos:c.map(({from:d,to:h,value:m})=>({type:"style",from:d,to:h,value:m,path:t.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const t=this.getParentCreatedAt().toTestString(),r=this.fromPos.toTestString(),i=this.toPos.toTestString(),s=this.attributes;return`${t}.STYL(${r},${i},${JSON.stringify(s)})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getAttributes(){return this.attributes}}const FS=2,JS="root",cn="text";function ao(n,e,t=!1){let r=0;const i=t?n.allChildren:n.children;for(let s=0;s<e;s++){const o=i[s];!o||!t&&o.isRemoved||(r+=o.paddedSize(t))}return r}class US{constructor(e,t=[]){l(this,"type");l(this,"parent");l(this,"_children");l(this,"visibleSize");l(this,"totalSize");if(this.type=e,this.visibleSize=0,this.totalSize=0,this._children=t,this.isText&&this._children.length>0)throw new T(k.ErrRefused,"Text node cannot have children")}updateAncestorsSize(e,t=!1){let r=this.parent;for(;r;){if(t)r.totalSize+=e;else if(r.visibleSize+=e,r.isRemoved)break;r=r.parent}}updateDescendantsSize(e=!1){let t=0;for(const r of this._children){const i=r.updateDescendantsSize(e);!e&&r.isRemoved||(t+=i)}return e?this.totalSize+=t:this.visibleSize+=t,this.paddedSize(e)}get isText(){return this.type===cn}paddedSize(e=!1){let t=this.visibleSize;return e&&(t=this.totalSize),this.isText||(t+=FS),t}isAncestorOf(e){return jS(this,e)}get nextSibling(){const e=this.parent.findOffset(this),t=this.parent.children[e+1];if(t)return t}get prevSibling(){const e=this.parent.findOffset(this),t=this.parent.children[e-1];if(t)return t}splitText(e,t){const r={data:0,meta:0};if(e===0||e===this.visibleSize)return[void 0,r];const i=this.value.slice(0,e),s=this.value.slice(e);if(!s.length)return[void 0,r];const o=this.getDataSize();this.value=i;const a=this.cloneText(e+t);return a.value=s,this.parent.insertAfterInternal(a,this),be(r,this.getDataSize(),a.getDataSize()),$i(r,o),[a,r]}get children(){return this._children.filter(e=>!e.isRemoved)}get allChildren(){return[...this._children]}hasTextChild(){return this.children.length>0&&this.children.every(e=>e.isText)}getChildrenText(){return this.isText?this.value:this.hasTextChild()?this.children.map(e=>e.value).join(""):""}append(...e){if(this.isText)throw new T(k.ErrRefused,"Text node cannot have children");this._children.push(...e);for(const t of e)t.parent=this,t.updateAncestorsSize(t.paddedSize()),t.updateAncestorsSize(t.paddedSize(!0),!0)}prepend(...e){if(this.isText)throw new T(k.ErrRefused,"Text node cannot have children");this._children.unshift(...e);for(const t of e)t.parent=this}insertBefore(e,t){if(this.isText)throw new T(k.ErrRefused,"Text node cannot have children");const r=this._children.indexOf(t);if(r===-1)throw new T(k.ErrInvalidArgument,"child not found");this.insertAtInternal(e,r),e.updateAncestorsSize(e.paddedSize()),e.updateAncestorsSize(e.paddedSize(!0),!0)}insertAfter(e,t){if(this.isText)throw new T(k.ErrRefused,"Text node cannot have children");const r=this._children.indexOf(t);if(r===-1)throw new T(k.ErrInvalidArgument,"child not found");this.insertAtInternal(e,r+1),e.updateAncestorsSize(e.paddedSize()),e.updateAncestorsSize(e.paddedSize(!0),!0)}insertAt(e,t){if(this.isText)throw new T(k.ErrRefused,"Text node cannot have children");this.insertAtInternal(e,t),e.updateAncestorsSize(e.paddedSize()),e.updateAncestorsSize(e.paddedSize(!0),!0)}removeChild(e){if(this.isText)throw new T(k.ErrRefused,"Text node cannot have children");const t=this._children.indexOf(e);if(t===-1)throw new T(k.ErrInvalidArgument,"child not found");this._children.splice(t,1),e.updateAncestorsSize(-e.paddedSize(!0),!0),e.parent=void 0}splitElement(e,t){const r={data:0,meta:0},i=this.getDataSize(),s=this.cloneElement(t);this.parent.insertAfterInternal(s,this),s.updateAncestorsSize(s.paddedSize()),s.updateAncestorsSize(s.paddedSize(!0),!0);const o=this.children.slice(0,e),a=this.children.slice(e);this._children=o,s._children=a,this.visibleSize=this._children.reduce((u,c)=>u+c.paddedSize(),0),this.totalSize=this._children.reduce((u,c)=>u+c.paddedSize(!0),0),s.visibleSize=s._children.reduce((u,c)=>u+c.paddedSize(!0),0),s.totalSize=s._children.reduce((u,c)=>u+c.paddedSize(!0),0);for(const u of s._children)u.parent=s;return be(r,this.getDataSize(),s.getDataSize()),$i(r,i),[s,r]}insertAfterInternal(e,t){if(this.isText)throw new T(k.ErrRefused,"Text node cannot have children");const r=this._children.indexOf(t);if(r===-1)throw new T(k.ErrInvalidArgument,"child not found");this.insertAtInternal(e,r+1)}insertAtInternal(e,t){if(this.isText)throw new T(k.ErrRefused,"Text node cannot have children");this._children.splice(t,0,e),e.parent=this}findOffset(e,t=!1){if(this.isText)throw new T(k.ErrRefused,"Text node cannot have children");if(t)return this._children.indexOf(e);if(e.isRemoved){const r=this._children.indexOf(e);return this.allChildren.splice(0,r).filter(s=>!s.isRemoved).length}return this.children.indexOf(e)}findBranchOffset(e){if(this.isText)throw new T(k.ErrRefused,"Text node cannot have children");let t=e;for(;t;){const r=this._children.indexOf(t);if(r!==-1)return r;t=t.parent}return-1}}function jS(n,e){if(n===e)return!1;for(;e.parent;){if(e.parent===n)return!0;e=e.parent}return!1}var pe=(n=>(n.Start="Start",n.End="End",n.Text="Text",n))(pe||{});function av(n,e,t,r,i=!1){if(e>t)throw new T(k.ErrInvalidArgument,`from is greater than to: ${e} > ${t}`);const s=i?n.totalSize:n.visibleSize;if(e>s)throw new T(k.ErrInvalidArgument,`from is out of range: ${e} > ${s}`);if(t>s)throw new T(k.ErrInvalidArgument,`to is out of range: ${t} > ${s}`);if(e===t)return;let o=0;const a=i?n._children:n.children;for(const u of a){if(e-u.paddedSize(i)<o&&o<t){const c=u.isText?e-o:e-o-1,d=u.isText?t-o:t-o-1,h=i?u.totalSize:u.visibleSize,m=!u.isText&&c<0,p=!u.isText&&d>h;(u.isText||m)&&r([u,u.isText?"Text":"Start"],p),av(u,Math.max(0,c),Math.min(d,h),r,i),p&&r([u,"End"],p)}o+=u.paddedSize(i)}}function lv(n,e,t=0){for(const r of n.children)lv(r,e,t+1);e(n,t)}function ku(n,e,t=0){for(const r of n._children)ku(r,e,t+1);e(n,t)}function Ff(n,e,t=!0){if(e>n.visibleSize)throw new T(k.ErrInvalidArgument,`index is out of range: ${e} > ${n.visibleSize}`);if(n.isText)return{node:n,offset:e};let r=0,i=0;for(const s of n.children){if(t&&s.isText&&s.visibleSize>=e-i)return Ff(s,e-i,t);if(e===i)return{node:n,offset:r};if(!t&&s.paddedSize()===e-i)return{node:n,offset:r+1};if(s.paddedSize()>e-i)return Ff(s,e-i-1,t);i+=s.paddedSize(),r+=1}return{node:n,offset:r}}function uv(n){return n.isText||n.children.length===0?n:uv(n.children[0])}function VS(n,e){if(n.visibleSize<e)throw new T(k.ErrInvalidArgument,"unacceptable path");for(let t=0;t<n.children.length;t++){const r=n.children[t];if(r.visibleSize<e)e-=r.visibleSize;else{n=r;break}}return{node:n,offset:e}}class qS{constructor(e){l(this,"root");this.root=e}tokensBetween(e,t,r,i=!1){av(this.root,e,t,r,i)}traverse(e){lv(this.root,e,0)}traverseAll(e){ku(this.root,e,0)}findTreePos(e,t=!0){return Ff(this.root,e,t)}treePosToPath(e){const t=[];let r=e.node;if(r.isText){const i=r.parent.findOffset(r);if(i===-1)throw new T(k.ErrInvalidArgument,"invalid treePos");const s=ao(r.parent,i);t.push(s+e.offset),r=r.parent}else if(r.hasTextChild()){const i=ao(r,e.offset);t.push(i)}else t.push(e.offset);for(;r.parent;){const i=r.parent.findOffset(r);if(i===-1)throw new T(k.ErrInvalidArgument,"invalid treePos");t.push(i),r=r.parent}return t.reverse()}pathToIndex(e){const t=this.pathToTreePos(e);return this.indexOf(t)}pathToTreePos(e){if(!e.length)throw new T(k.ErrInvalidArgument,"unacceptable path");let t=this.root;for(let r=0;r<e.length-1;r++){const i=e[r];if(t=t.children[i],!t)throw new T(k.ErrInvalidArgument,"unacceptable path")}if(t.hasTextChild())return VS(t,e[e.length-1]);if(t.children.length<e[e.length-1])throw new T(k.ErrInvalidArgument,"unacceptable path");return{node:t,offset:e[e.length-1]}}getRoot(){return this.root}get size(){return this.root.visibleSize}findPostorderRight(e){const{node:t,offset:r}=e;if(t.isText){if(t.visibleSize===r){const i=t.nextSibling;return i||t.parent}return t}return t.children.length===r?t:uv(t.children[r])}indexOf(e,t=!1){let{node:r}=e;const{offset:i}=e;let s=0,o=1;if(r.isText){s+=i;const a=r.parent,u=a.findOffset(r,t);if(u===-1)throw new T(k.ErrInvalidArgument,"invalid pos");s+=ao(a,u,t),r=r.parent}else s+=ao(r,i,t);for(;r!=null&&r.parent;){const a=r.parent,u=a.findOffset(r,t);if(u===-1)throw new T(k.ErrInvalidArgument,"invalid pos");s+=ao(a,u,t),o++,r=r.parent}return s+o-1}indexToPath(e){const t=this.findTreePos(e);return this.treePosToPath(t)}}const KS=(n,e)=>n===e?0:n<e?-1:1;class WS{constructor(e,t,r){l(this,"key");l(this,"value");l(this,"left");l(this,"right");l(this,"isRed");this.key=e,this.value=t,this.isRed=r}}class HS{constructor(e){l(this,"stack");this.stack=[],this.traverseInorder(e)}traverseInorder(e){e&&(this.traverseInorder(e.left),this.stack.push({key:e.key,value:e.value}),this.traverseInorder(e.right))}}class cv{constructor(e){l(this,"root");l(this,"comparator");l(this,"counter");this.comparator=typeof e<"u"?e:KS,this.counter=0}put(e,t){return this.root=this.putInternal(e,t,this.root),this.root.isRed=!1,t}get(e){const t=this.getInternal(e,this.root);return t?t.value:void 0}remove(e){!this.isRed(this.root.left)&&!this.isRed(this.root.right)&&(this.root.isRed=!0),this.root=this.removeInternal(this.root,e),this.root&&(this.root.isRed=!1)}getIterator(){return new HS(this.root)}values(){const e=[];for(const t of this.getIterator().stack)e.push(t.value);return e}floorEntry(e){let t=this.root,r;for(;t;){const i=this.comparator(e,t.key);if(i===0)return t;i<0?t=t.left:(r=t,t=t.right)}return r}lastEntry(){if(!this.root)return this.root;let e=this.root;for(;e.right;)e=e.right;return e}size(){return this.counter}isEmpty(){return this.counter===0}getInternal(e,t){for(;t;){const r=this.comparator(e,t.key);if(r===0)return t;r<0?t=t.left:r>0&&(t=t.right)}}putInternal(e,t,r){if(!r)return this.counter+=1,new WS(e,t,!0);const i=this.comparator(e,r.key);return i<0?r.left=this.putInternal(e,t,r.left):i>0?r.right=this.putInternal(e,t,r.right):r.value=t,this.isRed(r.right)&&!this.isRed(r.left)&&(r=this.rotateLeft(r)),this.isRed(r.left)&&this.isRed(r.left.left)&&(r=this.rotateRight(r)),this.isRed(r.left)&&this.isRed(r.right)&&this.flipColors(r),r}removeInternal(e,t){if(this.comparator(t,e.key)<0)!this.isRed(e.left)&&!this.isRed(e.left.left)&&(e=this.moveRedLeft(e)),e.left=this.removeInternal(e.left,t);else{if(this.isRed(e.left)&&(e=this.rotateRight(e)),this.comparator(t,e.key)===0&&!e.right){this.counter-=1;return}if(!this.isRed(e.right)&&!this.isRed(e.right.left)&&(e=this.moveRedRight(e)),this.comparator(t,e.key)===0){this.counter-=1;const r=this.min(e.right);e.value=r.value,e.key=r.key,e.right=this.removeMin(e.right)}else e.right=this.removeInternal(e.right,t)}return this.fixUp(e)}min(e){return e.left?this.min(e.left):e}removeMin(e){if(e.left)return!this.isRed(e.left)&&!this.isRed(e.left.left)&&(e=this.moveRedLeft(e)),e.left=this.removeMin(e.left),this.fixUp(e)}fixUp(e){return this.isRed(e.right)&&(e=this.rotateLeft(e)),this.isRed(e.left)&&this.isRed(e.left.left)&&(e=this.rotateRight(e)),this.isRed(e.left)&&this.isRed(e.right)&&this.flipColors(e),e}moveRedLeft(e){return this.flipColors(e),this.isRed(e.right.left)&&(e.right=this.rotateRight(e.right),e=this.rotateLeft(e),this.flipColors(e)),e}moveRedRight(e){return this.flipColors(e),this.isRed(e.left.left)&&(e=this.rotateRight(e),this.flipColors(e)),e}isRed(e){return e&&e.isRed}rotateLeft(e){const t=e.right;return e.right=t.left,t.left=e,t.isRed=t.left.isRed,t.left.isRed=!0,t}rotateRight(e){const t=e.left;return e.left=t.right,t.right=e,t.isRed=t.right.isRed,t.right.isRed=!0,t}flipColors(e){e.isRed=!e.isRed,e.left.isRed=!e.left.isRed,e.right.isRed=!e.right.isRed}}class Vt{constructor(e,t){l(this,"parentID");l(this,"leftSiblingID");this.parentID=e,this.leftSiblingID=t}static of(e,t){return new Vt(e,t)}static fromTreePos(e){const{offset:t}=e;let{node:r}=e,i;return r.isText?(r.parent.children[0]===r&&t===0?i=r.parent:i=r,r=r.parent):t===0?i=r:i=r.children[t-1],Vt.of(r.id,Le.of(i.getCreatedAt(),i.getOffset()+t))}getParentID(){return this.parentID}static fromStruct(e){return Vt.of(Le.of(Pt.fromStruct(e.parentID.createdAt),e.parentID.offset),Le.of(Pt.fromStruct(e.leftSiblingID.createdAt),e.leftSiblingID.offset))}toStruct(){return{parentID:{createdAt:this.getParentID().getCreatedAt().toStruct(),offset:this.getParentID().getOffset()},leftSiblingID:{createdAt:this.getLeftSiblingID().getCreatedAt().toStruct(),offset:this.getLeftSiblingID().getOffset()}}}toTreeNodePair(e){const t=this.getParentID(),r=this.getLeftSiblingID(),i=e.findFloorNode(t);let s=e.findFloorNode(r);if(!i||!s)throw new T(k.ErrRefused,`cannot find node of CRDTTreePos(${t.toTestString()}, ${r.toTestString()})`);return!r.equals(t)&&r.getOffset()>0&&r.getOffset()===s.id.getOffset()&&s.insPrevID&&(s=e.findFloorNode(s.insPrevID)),[i,s]}getLeftSiblingID(){return this.leftSiblingID}equals(e){return this.getParentID().getCreatedAt().equals(e.getParentID().getCreatedAt())&&this.getParentID().getOffset()===e.getParentID().getOffset()&&this.getLeftSiblingID().getCreatedAt().equals(e.getLeftSiblingID().getCreatedAt())&&this.getLeftSiblingID().getOffset()===e.getLeftSiblingID().getOffset()}}class Le{constructor(e,t){l(this,"createdAt");l(this,"offset");this.createdAt=e,this.offset=t}static of(e,t){return new Le(e,t)}static fromStruct(e){return Le.of(Pt.fromStruct(e.createdAt),e.offset)}static createComparator(){return(e,t)=>{const r=e.getCreatedAt().compare(t.getCreatedAt());return r!==0?r:e.getOffset()>t.getOffset()?1:e.getOffset()<t.getOffset()?-1:0}}getCreatedAt(){return this.createdAt}equals(e){return this.createdAt.compare(e.createdAt)===0&&this.offset===e.offset}getOffset(){return this.offset}setOffset(e){this.offset=e}toStruct(){return{createdAt:this.createdAt.toStruct(),offset:this.offset}}toIDString(){return`${this.createdAt.toIDString()}:${this.offset}`}toTestString(){return`${this.createdAt.toTestString()}/${this.offset}`}}class st extends US{constructor(t,r,i,s,o){super(r);l(this,"id");l(this,"removedAt");l(this,"attrs");l(this,"insPrevID");l(this,"insNextID");l(this,"_value","");this.id=t,this.removedAt=o,s&&(this.attrs=s),typeof i=="string"?this.value=i:Array.isArray(i)&&(this._children=i)}toIDString(){return this.id.toIDString()}getRemovedAt(){return this.removedAt}static create(t,r,i,s){return new st(t,r,i,s)}deepcopy(){var r;const t=new st(this.id,this.type);return t.removedAt=this.removedAt,t._value=this._value,t.visibleSize=this.visibleSize,t.totalSize=this.totalSize,t.attrs=(r=this.attrs)==null?void 0:r.deepcopy(),t._children=this._children.map(i=>{const s=i.deepcopy();return s.parent=t,s}),t.insPrevID=this.insPrevID,t.insNextID=this.insNextID,t}get value(){if(!this.isText)throw new T(k.ErrInvalidType,`cannot get value of element node: ${this.type}`);return this._value}set value(t){if(!this.isText)throw new T(k.ErrInvalidType,`cannot set value of element node: ${this.type}`);this._value=t,this.visibleSize=t.length,this.totalSize=t.length}get isRemoved(){return!!this.removedAt}remove(t){return this.removedAt?(t.after(this.removedAt)&&(this.removedAt=t),!1):(this.removedAt=t,this.updateAncestorsSize(-this.paddedSize()),!0)}cloneText(t){return new st(Le.of(this.id.getCreatedAt(),t),this.type,void 0,void 0,this.removedAt)}cloneElement(t){return new st(Le.of(t(),0),this.type,void 0,void 0,this.removedAt)}split(t,r,i){const[s,o]=this.isText?this.splitText(r,this.id.getOffset()):this.splitElement(r,i);if(s){if(s.insPrevID=this.id,this.insNextID){const a=t.findFloorNode(this.insNextID);a.insPrevID=s.id,s.insNextID=this.insNextID}this.insNextID=s.id,t.registerNode(s)}return[s,o]}getCreatedAt(){return this.id.getCreatedAt()}getOffset(){return this.id.getOffset()}canDelete(t,r,i){return r?!!(!this.removedAt||!i&&(t!=null&&t.after(this.removedAt))):!1}canStyle(t,r){return this.isText?!1:this.getCreatedAt().getLamport()<=r&&(!this.removedAt||t.after(this.removedAt))}setAttrs(t,r){this.attrs||(this.attrs=new Hr);const i=[];for(const[s,o]of Object.entries(t))i.push(this.attrs.set(s,o,r));return i}purge(t){this.attrs&&this.attrs.purge(t)}getDataSize(){const t={data:0,meta:0};if(this.isText&&(t.data+=this.visibleSize*2),this.id&&(t.meta+=un),this.removedAt&&(t.meta+=un),this.attrs)for(const r of this.attrs){if(r.getRemovedAt())continue;const i=r.getDataSize();t.meta+=i.meta,t.data+=i.data}return t}getGCPairs(){const t=[];if(!this.attrs)return t;for(const r of this.attrs)r.getRemovedAt()&&t.push({parent:this,child:r});return t}}function Jf(n){var t;if(n.isText){const r=n;return{type:r.type,value:r.value}}const e={type:n.type,children:n.children.map(Jf)};return n.attrs&&(e.attributes=Ur((t=n.attrs)==null?void 0:t.toObject())),e}function Vd(n){if(n.isText)return n.value;let e="";return n.attrs&&n.attrs.size()&&(e=" "+Array.from(n.attrs).filter(t=>!t.isRemoved()).sort((t,r)=>t.getKey().localeCompare(r.getKey())).map(t=>{const r=JSON.parse(t.getValue());return typeof r=="string"?`${t.getKey()}="${r}"`:`${t.getKey()}="${on(t.getValue())}"`}).join(" ")),`<${n.type}${e}>${n.children.map(t=>Vd(t)).join("")}</${n.type}>`}function fv(n){if(n.isText){const e=n;return{type:e.type,value:e.value,visibleSize:e.visibleSize,isRemoved:e.isRemoved}}return{type:n.type,children:n.children.map(fv),visibleSize:n.visibleSize,isRemoved:n.isRemoved}}class ut extends ca{constructor(t,r){super(r);l(this,"indexTree");l(this,"nodeMapByID");this.indexTree=new qS(t),this.nodeMapByID=new cv(Le.createComparator()),this.indexTree.traverseAll(i=>{this.nodeMapByID.put(i.id,i)})}static create(t,r){return new ut(t,r)}findFloorNode(t){const r=this.nodeMapByID.floorEntry(t);if(!(!r||!r.key.getCreatedAt().equals(t.getCreatedAt())))return r.value}registerNode(t){this.nodeMapByID.put(t.id,t)}findNodesAndSplitText(t,r){let i={data:0,meta:0};const[s,o]=t.toTreeNodePair(this);let a=o;const u=s===a,c=a.parent&&!u?a.parent:s;if(a.isText){const[,d]=a.split(this,t.getLeftSiblingID().getOffset()-a.id.getOffset());i=d}if(r){const d=c.allChildren,h=u?0:d.indexOf(a)+1;for(let m=h;m<d.length;m++){const p=d[m];if(!p.id.getCreatedAt().after(r))break;a=p}}return[[c,a],i]}style(t,r,i,s){const o={data:0,meta:0},[[a,u],c]=this.findNodesAndSplitText(t[0],i),[[d,h],m]=this.findNodesAndSplitText(t[1],i);be(o,m,c);const p=[],y=r?Ur(r):{},w=[];return this.traverseInPosRange(a,u,d,h,([A,v])=>{var I;const g=A.getCreatedAt().getActorID();let S=Mf;if(s!=null&&(S=s.get(g)?s.get(g):0n),A.canStyle(i,S)&&r){const N=A.setAttrs(r,i),x=N.reduce((M,[,J])=>(J&&(M[J.getKey()]=y[J.getKey()]),M),{}),C=A.parent,O=A.prevSibling||A.parent;Object.keys(x).length>0&&p.push({type:"style",from:this.toIndex(C,O),to:this.toIndex(A,A),fromPath:this.toPath(C,O),toPath:this.toPath(A,A),actor:i.getActorID(),value:x});for(const[M]of N)M&&w.push({parent:A,child:M});for(const[M]of Object.entries(y)){const J=(I=A.attrs)==null?void 0:I.getNodeMapByKey().get(M);J!==void 0&&v!==pe.End&&be(o,J.getDataSize())}}}),[w,p,o]}removeStyle(t,r,i,s){const o={data:0,meta:0},[[a,u],c]=this.findNodesAndSplitText(t[0],i),[[d,h],m]=this.findNodesAndSplitText(t[1],i);be(o,m,c);const p=[],y=[];return this.traverseInPosRange(a,u,d,h,([w])=>{const A=w.getCreatedAt().getActorID();let v=Mf;if(s!=null&&(v=s.get(A)?s.get(A):0n),w.canStyle(i,v)&&r){w.attrs||(w.attrs=new Hr);for(const I of r){const N=w.attrs.remove(I,i);for(const x of N)y.push({parent:w,child:x})}const g=w.parent,S=w.prevSibling||w.parent;p.push({actor:i.getActorID(),type:"removeStyle",from:this.toIndex(g,S),to:this.toIndex(w,w),fromPath:this.toPath(g,S),toPath:this.toPath(w,w),value:r})}}),[y,p,o]}edit(t,r,i,s,o,a){const u={data:0,meta:0},[[c,d],h]=this.findNodesAndSplitText(t[0],s),[[m,p],y]=this.findNodesAndSplitText(t[1],s);be(u,y,h);const w=this.toIndex(c,d),A=this.toPath(c,d),v=[],g=[],S=[];this.traverseInPosRange(c,d,m,p,([x,C],O)=>{if(C===pe.Start&&!O)for(const Ne of x.children)S.push(Ne);const M=a===void 0;let J=!1;const me=a==null?void 0:a.get(x.id.getCreatedAt().getActorID());J=M||me!==void 0&&me>=x.id.getCreatedAt().getLamport();let tt=!1;if(x.removedAt){const Ne=a==null?void 0:a.get(x.removedAt.getActorID());tt=M||Ne!==void 0&&Ne>=x.removedAt.getLamport()}(x.canDelete(s,J,tt)||v.includes(x.parent))&&((C===pe.Text||C===pe.Start)&&v.push(x),g.push([x,C]))},!0);const I=this.makeDeletionChanges(g,s),N=[];for(const x of v)x.remove(s),x.isRemoved&&N.push({parent:this,child:x});for(const x of S)x.removedAt||c.append(x);if(i>0){let x=0,C=c,O=d;for(;x<i;)C.split(this,C.findOffset(O)+1,o),O=C,C=C.parent,x++;I.push({type:"content",from:w,to:w,fromPath:A,toPath:A,actor:s.getActorID()})}if(r!=null&&r.length){const x=[];let C=d;for(const O of r)C===c?c.insertAt(O,0):c.insertAfter(O,C),C=O,ku(O,M=>{c.isRemoved?(M.remove(s),N.push({parent:this,child:M})):be(u,M.getDataSize()),this.nodeMapByID.put(M.id,M)}),O.isRemoved||x.push(O);if(x.length){const O=x.map(M=>Jf(M));I.length&&I[I.length-1].from===w?I[I.length-1].value=O:I.push({type:"content",from:w,to:w,fromPath:A,toPath:A,actor:s.getActorID(),value:O})}}return[I,N,u]}editT(t,r,i,s,o){const a=this.findPos(t[0]),u=this.findPos(t[1]);return this.edit([a,u],r,i,s,o)}move(t,r,i){throw new T(k.ErrUnimplemented,`not implemented: ${t}, ${r}, ${i}`)}pathToTreePos(t){return this.indexTree.pathToTreePos(t)}purge(t){var s;(s=t.parent)==null||s.removeChild(t),this.nodeMapByID.remove(t.id);const r=t.insPrevID,i=t.insNextID;if(r){const o=this.findFloorNode(r);o.insNextID=i}if(i){const o=this.findFloorNode(i);o.insPrevID=r}t.insPrevID=void 0,t.insNextID=void 0}getGCPairs(){const t=[];return this.indexTree.traverse(r=>{r.getRemovedAt()&&t.push({parent:this,child:r});for(const i of r.getGCPairs())t.push(i)}),t}findPos(t,r=!0){const i=this.indexTree.findTreePos(t,r);return Vt.fromTreePos(i)}pathToPosRange(t){const r=this.pathToIndex(t);return[this.findPos(r),this.findPos(r+1)]}pathToPos(t){const r=this.indexTree.pathToIndex(t);return this.findPos(r)}getRoot(){return this.indexTree.getRoot()}getSize(){return this.indexTree.size}getNodeSize(){return this.nodeMapByID.size()}getIndexTree(){return this.indexTree}toXML(){return Vd(this.indexTree.getRoot())}getDataSize(){const t={data:0,meta:0};return this.indexTree.traverse(r=>{if(r.getRemovedAt())return;const i=r.getDataSize();t.data+=i.data,t.meta+=i.meta}),{data:t.data,meta:t.meta+this.getMetaUsage()}}toJSON(){return JSON.stringify(this.getRootTreeNode())}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:JSON.parse(this.toJSON()),type:"YORKIE_TREE"}}toJSInfoForTest(){const t=this.indexTree.getRoot(),r=(i,s=void 0,o=void 0,a=0)=>{var p,y,w,A;let u,c,d;const h=i.isText?{node:i,offset:0}:s&&o?this.toTreePos(s,o):null;h&&(u=this.indexTree.indexOf(h),c=this.indexTree.treePosToPath(h),d=Vt.fromTreePos(h).toStruct());const m={type:i.type,parent:s==null?void 0:s.id.toTestString(),size:i.visibleSize,id:i.id.toTestString(),removedAt:(p=i.removedAt)==null?void 0:p.toTestString(),insPrev:(y=i.insPrevID)==null?void 0:y.toTestString(),insNext:(w=i.insNextID)==null?void 0:w.toTestString(),value:i.isText?i.value:void 0,isRemoved:i.isRemoved,children:[],depth:a,attributes:i.attrs?Ur((A=i.attrs)==null?void 0:A.toObject()):void 0,index:u,path:c,pos:d};for(let v=0;v<i.allChildren.length;v++){const g=v===0?i:i.allChildren[v-1];m.children.push(r(i.allChildren[v],i,g,a+1))}return m};return r(t)}getRootTreeNode(){return Jf(this.indexTree.getRoot())}toTestTreeNode(){return fv(this.indexTree.getRoot())}toSortedJSON(){return this.toJSON()}deepcopy(){const t=this.getRoot(),r=new ut(t.deepcopy(),this.getCreatedAt());return r.setRemovedAt(this.getRemovedAt()),r.setMovedAt(this.getMovedAt()),r}toPath(t,r){const i=this.toTreePos(t,r);return i?this.indexTree.treePosToPath(i):[]}toIndex(t,r,i=!1){const s=this.toTreePos(t,r,i);return s?this.indexTree.indexOf(s,i):-1}indexToPath(t){return this.indexTree.indexToPath(t)}pathToIndex(t){return this.indexTree.pathToIndex(t)}indexRangeToPosRange(t){const r=this.findPos(t[0]);return t[0]===t[1]?[r,r]:[r,this.findPos(t[1])]}indexRangeToPosStructRange(t){const[r,i]=t,s=this.findPos(r);return r===i?[s.toStruct(),s.toStruct()]:[s.toStruct(),this.findPos(i).toStruct()]}posRangeToPathRange(t){const[[r,i]]=this.findNodesAndSplitText(t[0]),[[s,o]]=this.findNodesAndSplitText(t[1]);return[this.toPath(r,i),this.toPath(s,o)]}posRangeToIndexRange(t){const[[r,i]]=this.findNodesAndSplitText(t[0]),[[s,o]]=this.findNodesAndSplitText(t[1]);return[this.toIndex(r,i),this.toIndex(s,o)]}traverseInPosRange(t,r,i,s,o,a=!1){const u=this.toIndex(t,r,a),c=this.toIndex(i,s,a);this.indexTree.tokensBetween(u,c,o,a)}toTreePos(t,r,i=!1){if(!t||!r)return;if(!i&&t.isRemoved){let o;for(;t.isRemoved;)o=t,t=o.parent;const a=t.findOffset(o,i);return{node:t,offset:a}}if(t===r)return{node:t,offset:0};let s=t.findOffset(r,i);if(i||!r.isRemoved){if(r.isText)return{node:r,offset:r.paddedSize(i)};s++}return{node:t,offset:s}}makeDeletionChanges(t,r){const i=[],s=[];let o=null,a=null;for(let u=0;u<t.length;u++){const c=t[u],d=t[u+1];o||(o=c),a=c;const h=this.findRightToken(c);(!h||!d||h[0]!==d[0]||h[1]!==d[1])&&(s.push([o,a]),o=null,a=null)}for(const u of s){const[c,d]=u,[h,m]=this.findLeftToken(c),[p,y]=d,w=m===pe.Start?h:h.parent,A=y===pe.Start?p:p.parent,v=this.toIndex(w,h),g=this.toIndex(A,p);v<g&&(i.length>0&&v===i[i.length-1].to?(i[i.length-1].to=g,i[i.length-1].toPath=this.toPath(A,p)):i.push({type:"content",from:v,to:g,fromPath:this.toPath(w,h),toPath:this.toPath(A,p),actor:r.getActorID()}))}return i.reverse()}findRightToken([t,r]){if(r===pe.Start){const u=t.allChildren;return u.length>0?[u[0],u[0].isText?pe.Text:pe.Start]:[t,pe.End]}const i=t.parent,s=i.allChildren,o=s.indexOf(t);if(i&&o===s.length-1)return[i,pe.End];const a=s[o+1];return[a,a.isText?pe.Text:pe.Start]}findLeftToken([t,r]){if(r===pe.End){const u=t.allChildren;if(u.length>0){const c=u[u.length-1];return[c,c.isText?pe.Text:pe.End]}return[t,pe.Start]}const i=t.parent,s=i.allChildren,o=s.indexOf(t);if(i&&o===0)return[i,pe.Start];const a=s[o-1];return[a,a.isText?pe.Text:pe.End]}}class ha extends _t{constructor(t,r,i,s,o,a){super(t,a);l(this,"fromPos");l(this,"toPos");l(this,"contents");l(this,"splitLevel");this.fromPos=r,this.toPos=i,this.contents=s,this.splitLevel=o}static create(t,r,i,s,o,a){return new ha(t,r,i,s,o,a)}execute(t,r,i){var h;const s=t.findByCreatedAt(this.getParentCreatedAt());if(!s)throw new T(k.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(s instanceof ut))throw new T(k.ErrInvalidArgument,"fail to execute, only Tree can execute edit");const o=this.getExecutedAt(),a=s,[u,c,d]=a.edit([this.fromPos,this.toPos],(h=this.contents)==null?void 0:h.map(m=>m.deepcopy()),this.splitLevel,o,(()=>{let m=o.getDelimiter();return this.contents!==void 0&&(m+=this.contents.length),()=>Pt.of(o.getLamport(),++m,o.getActorID())})(),i);t.acc(d);for(const m of c)t.registerGCPair(m);return{opInfos:u.map(({from:m,to:p,value:y,splitLevel:w,fromPath:A,toPath:v})=>({type:"tree-edit",path:t.createPath(this.getParentCreatedAt()),from:m,to:p,value:y,splitLevel:w,fromPath:A,toPath:v}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const t=this.getParentCreatedAt().toTestString(),r=`${this.fromPos.getLeftSiblingID().getCreatedAt().toTestString()}/${this.fromPos.getLeftSiblingID().getOffset()}`,i=`${this.toPos.getLeftSiblingID().getCreatedAt().toTestString()}/${this.toPos.getLeftSiblingID().getOffset()}`,s=this.contents||[];return`${t}.EDIT(${r},${i},${s.map(o=>Vd(o)).join("")})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getContents(){return this.contents}getSplitLevel(){return this.splitLevel}}class As{constructor(e){l(this,"vector");this.vector=e||new Map}set(e,t){this.vector.set(e,t)}unset(e){this.vector.delete(e)}get(e){return this.vector.get(e)}has(e){return this.vector.has(e)}maxLamport(){let e=BigInt(0);for(const[,t]of this)t>e&&(e=t);return e}max(e){const t=new Map;for(const[r,i]of e){const s=this.vector.get(r),o=s&&s>i?s:i;t.set(r,o)}for(const[r,i]of this){const s=e.get(r),o=s&&s>i?s:i;t.set(r,o)}return new As(t)}afterOrEqual(e){const t=this.vector.get(e.getActorID());return t===void 0?!1:t>=e.getLamport()}deepcopy(){const e=new Map;for(const[t,r]of this.vector)e.set(t,r);return new As(e)}filter(e){const t=new Map;for(const[r]of e){const i=this.vector.get(r);i!==void 0&&t.set(r,i)}return new As(t)}size(){return this.vector.size}*[Symbol.iterator](){for(const[e,t]of this.vector)yield[e,t]}}const dv=new As(new Map);class Mt{constructor(e,t,r,i,s){l(this,"clientSeq");l(this,"serverSeq");l(this,"actor");l(this,"lamport");l(this,"versionVector");this.clientSeq=e,this.serverSeq=s,this.lamport=t,this.versionVector=i,this.actor=r}hasClocks(){return this.versionVector.size()>0&&this.lamport!=zf}static of(e,t,r,i,s){return new Mt(e,t,r,i,s)}next(e=!1){if(e)return new Mt(this.clientSeq+1,this.lamport,this.actor,dv,zf);const t=this.versionVector.deepcopy();return t.set(this.actor,this.lamport+1n),new Mt(this.clientSeq+1,this.lamport+1n,this.actor,t)}syncClocks(e){if(!e.hasClocks())return this;const t=e.lamport>this.lamport?e.lamport+1n:this.lamport+1n,r=this.versionVector.max(e.versionVector),i=new Mt(this.clientSeq,t,this.actor,r);return i.versionVector.set(this.actor,t),i}setClocks(e,t){const r=e>this.lamport?e+1n:this.lamport+1n,i=this.versionVector.max(t);return i.set(this.actor,r),Mt.of(this.clientSeq,r,this.actor,i)}createTimeTicket(e){return Pt.of(this.lamport,e,this.actor)}setActor(e){return new Mt(this.clientSeq,this.lamport,e,this.versionVector,this.serverSeq)}setLamport(e){return new Mt(this.clientSeq,e,this.actor,this.versionVector,this.serverSeq)}setVersionVector(e){return new Mt(this.clientSeq,this.lamport,this.actor,e,this.serverSeq)}getClientSeq(){return this.clientSeq}getServerSeq(){return this.serverSeq?this.serverSeq.toString():""}getLamport(){return this.lamport}getLamportAsString(){return this.lamport.toString()}getActorID(){return this.actor}getVersionVector(){return this.versionVector}toTestString(){return`${this.lamport.toString()}:${this.actor.slice(-2)}:${this.clientSeq}`}}const _S=new Mt(0,0n,Ud,dv);class qs{constructor({id:e,operations:t,presenceChange:r,message:i}){l(this,"id");l(this,"operations");l(this,"presenceChange");l(this,"message");this.id=e,this.operations=t||[],this.presenceChange=r,this.message=i}static create({id:e,operations:t,presenceChange:r,message:i}){return new qs({id:e,operations:t,presenceChange:r,message:i})}getID(){return this.id}getMessage(){return this.message}hasOperations(){return this.operations.length>0}getOperations(){return this.operations}setActor(e){for(const t of this.operations)t.setActor(e);this.id=this.id.setActor(e)}hasPresenceChange(){return this.presenceChange!==void 0}getPresenceChange(){return this.presenceChange}execute(e,t,r){const i=[],s=[];for(const o of this.operations){const a=o.execute(e,r,this.id.getVersionVector());if(!a)continue;const{opInfos:u,reverseOp:c}=a;i.push(...u),c&&s.unshift(c)}return this.presenceChange&&(this.presenceChange.type===dn.Put?t.set(this.id.getActorID(),zt(this.presenceChange.presence)):t.delete(this.id.getActorID())),{opInfos:i,reverseOps:s}}toTestString(){return`${this.operations.map(e=>e.toTestString()).join(",")}`}toStruct(){return{changeID:de.bytesToHex(de.toChangeID(this.getID()).toBinary()),message:this.getMessage(),operations:this.getOperations().map(e=>de.bytesToHex(de.toOperation(e).toBinary())),presenceChange:this.getPresenceChange()}}static fromStruct(e){const{changeID:t,operations:r,presenceChange:i,message:s}=e;return qs.create({id:de.bytesToChangeID(de.hexToBytes(t)),operations:r==null?void 0:r.map(o=>de.bytesToOperation(de.hexToBytes(o))),presenceChange:i,message:s})}}class Tu{constructor(e,t,r,i,s,o){l(this,"documentKey");l(this,"checkpoint");l(this,"isRemoved");l(this,"changes");l(this,"snapshot");l(this,"versionVector");this.documentKey=e,this.checkpoint=t,this.isRemoved=r,this.changes=i,this.snapshot=o,this.versionVector=s}static create(e,t,r,i,s,o){return new Tu(e,t,r,i,s,o)}getDocumentKey(){return this.documentKey}getCheckpoint(){return this.checkpoint}getIsRemoved(){return this.isRemoved}getChanges(){return this.changes}hasChanges(){return this.changes.length>0}getChangeSize(){return this.changes.length}hasSnapshot(){return!!this.snapshot&&!!this.snapshot.length}getSnapshot(){return this.snapshot}getVersionVector(){return this.versionVector}}class Es{constructor(e,t){l(this,"serverSeq");l(this,"clientSeq");this.serverSeq=e,this.clientSeq=t}static of(e,t){return new Es(e,t)}increaseClientSeq(e){return e===0?this:new Es(this.serverSeq,this.clientSeq+e)}forward(e){if(this.equals(e))return this;const t=this.serverSeq>e.serverSeq?this.serverSeq:e.serverSeq,r=Math.max(this.clientSeq,e.clientSeq);return Es.of(t,r)}getServerSeqAsString(){return this.serverSeq.toString()}getClientSeq(){return this.clientSeq}getServerSeq(){return this.serverSeq}equals(e){return this.clientSeq===e.clientSeq&&this.serverSeq==e.serverSeq}toTestString(){return`serverSeq=${this.serverSeq}, clientSeq=${this.clientSeq}`}}const GS=new Es(0n,0);class fn{constructor(e,t){l(this,"createdAt");l(this,"offset");this.createdAt=e,this.offset=t}static of(e,t){return new fn(e,t)}static fromStruct(e){return fn.of(Pt.fromStruct(e.createdAt),e.offset)}getCreatedAt(){return this.createdAt}getOffset(){return this.offset}equals(e){return this.createdAt.compare(e.createdAt)===0&&this.offset===e.offset}hasSameCreatedAt(e){return this.createdAt.compare(e.createdAt)===0}split(e){return new fn(this.createdAt,this.offset+e)}toStruct(){return{createdAt:this.createdAt.toStruct(),offset:this.offset}}toTestString(){return`${this.createdAt.toTestString()}:${this.offset}`}toIDString(){return`${this.createdAt.toIDString()}:${this.offset}`}}const YS=fn.of(Js,0);class Wt{constructor(e,t){l(this,"id");l(this,"relativeOffset");this.id=e,this.relativeOffset=t}static of(e,t){return new Wt(e,t)}static fromStruct(e){const t=fn.fromStruct(e.id);return Wt.of(t,e.relativeOffset)}getID(){return this.id}getRelativeOffset(){return this.relativeOffset}getAbsoluteID(){return fn.of(this.id.getCreatedAt(),this.id.getOffset()+this.relativeOffset)}toTestString(){return`${this.id.toTestString()}:${this.relativeOffset}`}toStruct(){return{id:this.id.toStruct(),relativeOffset:this.relativeOffset}}equals(e){return this.id.equals(e.id)?this.relativeOffset===e.relativeOffset:!1}}class wi extends tv{constructor(t,r,i){super(r);l(this,"id");l(this,"removedAt");l(this,"prev");l(this,"next");l(this,"insPrev");l(this,"insNext");this.id=t,this.removedAt=i}static create(t,r){return new wi(t,r)}static createComparator(){return(t,r)=>{const i=t.getCreatedAt().compare(r.getCreatedAt());return i!==0?i:t.getOffset()>r.getOffset()?1:t.getOffset()<r.getOffset()?-1:0}}getID(){return this.id}getCreatedAt(){return this.id.getCreatedAt()}getLength(){return this.removedAt?0:this.getContentLength()}getContentLength(){return this.value&&this.value.length||0}getPrev(){return this.prev}getNext(){return this.next}getInsPrev(){return this.insPrev}getInsNext(){return this.insNext}getInsPrevID(){return this.insPrev.getID()}setPrev(t){this.prev=t,t&&(t.next=this)}setNext(t){this.next=t,t&&(t.prev=this)}setInsPrev(t){this.insPrev=t,t&&(t.insNext=this)}setInsNext(t){this.insNext=t,t&&(t.insPrev=this)}hasNext(){return!!this.next}hasInsPrev(){return!!this.insPrev}isRemoved(){return!!this.removedAt}getRemovedAt(){return this.removedAt}split(t){return new wi(this.id.split(t),this.splitValue(t),this.removedAt)}canRemove(t,r,i){return r?!!(!this.removedAt||!i&&(t!=null&&t.after(this.removedAt))):!1}canStyle(t,r){return this.getCreatedAt().getLamport()<=r&&(!this.removedAt||t.after(this.removedAt))}setRemovedAt(t){this.removedAt=t}remove(t){if(!this.removedAt){this.removedAt=t;return}t.after(this.removedAt)&&(this.removedAt=t)}createPosRange(){return[Wt.of(this.id,0),Wt.of(this.id,this.getLength())]}getDataSize(){const t=this.value.getDataSize();return this.id&&(t.meta+=un),this.removedAt&&(t.meta+=un),t}deepcopy(){return new wi(this.id,this.value,this.removedAt)}toTestString(){return`${this.id.toTestString()} ${this.value?this.value:""}`}splitValue(t){const r=this.value;return this.value=r.substring(0,t),r.substring(t,r.length)}toIDString(){return this.id.toIDString()}}class Ks{constructor(){l(this,"head");l(this,"treeByIndex");l(this,"treeByID");this.head=wi.create(YS),this.treeByIndex=new ea,this.treeByID=new cv(wi.createComparator()),this.treeByIndex.insert(this.head),this.treeByID.put(this.head.getID(),this.head)}static create(){return new Ks}edit(e,t,r,i){const s={data:0,meta:0},[o,a,u]=this.findNodeWithSplit(e[1],t),[c,d,h]=this.findNodeWithSplit(e[0],t);be(s,a,d);const m=this.findBetween(h,u),[p,y]=this.deleteNodes(m,t,i),w=u?u.getID():o.getID();let A=Wt.of(w,0);if(r){const g=this.posToIndex(c.createPosRange()[1],!0),S=this.insertAfter(c,wi.create(fn.of(t,0),r));be(s,S.getDataSize()),p.length&&p[p.length-1].from===g?p[p.length-1].value=r:p.push({actor:t.getActorID(),from:g,to:g,value:r}),A=Wt.of(S.getID(),S.getContentLength())}const v=[];for(const[,g]of y)v.push({parent:this,child:g});return[A,v,s,p]}indexToPos(e){const[t,r]=this.treeByIndex.find(e),i=t;return Wt.of(i.getID(),r)}findIndexesFromRange(e){const[t,r]=e;return[this.posToIndex(t,!1),this.posToIndex(r,!0)]}posToIndex(e,t){const r=e.getAbsoluteID(),i=t?this.findFloorNodePreferToLeft(r):this.findFloorNode(r);if(!i)throw new T(k.ErrInvalidArgument,`the node of the given id should be found: ${r.toTestString()}`);const s=this.treeByIndex.indexOf(i),o=i.isRemoved()?0:r.getOffset()-i.getID().getOffset();return s+o}findNode(e){return this.findFloorNode(e)}get length(){return this.treeByIndex.length}getTreeByIndex(){return this.treeByIndex}getTreeByID(){return this.treeByID}toString(){const e=[];for(const t of this)t.isRemoved()||e.push(t.getValue());return e.join("")}*[Symbol.iterator](){let e=this.head.getNext();for(;e;)yield e,e=e.getNext()}getHead(){return this.head}deepcopy(){const e=new Ks;let t=this.head.getNext(),r=e.head,i;for(;t;){if(i=e.insertAfter(r,t.deepcopy()),t.hasInsPrev()){const s=e.findNode(t.getInsPrevID());i.setInsPrev(s)}r=i,t=t.getNext()}return e}toTestString(){const e=[];let t=this.head;for(;t;)t.isRemoved()?e.push(`{${t.toTestString()}}`):e.push(`[${t.toTestString()}]`),t=t.getNext();return e.join("")}insertAfter(e,t){const r=e.getNext();return t.setPrev(e),r&&r.setPrev(t),this.treeByID.put(t.getID(),t),this.treeByIndex.insertAfter(e,t),t}findNodeWithSplit(e,t){const r=e.getAbsoluteID();let i=this.findFloorNodePreferToLeft(r);const s=r.getOffset()-i.getID().getOffset(),[,o]=this.splitNode(i,s);for(;i.hasNext()&&i.getNext().getCreatedAt().after(t);)i=i.getNext();return[i,o,i.getNext()]}findFloorNodePreferToLeft(e){let t=this.findFloorNode(e);if(!t)throw new T(k.ErrInvalidArgument,`the node of the given id should be found: ${e.toTestString()}`);if(e.getOffset()>0&&t.getID().getOffset()==e.getOffset()){if(!t.hasInsPrev())return t;t=t.getInsPrev()}return t}findFloorNode(e){const t=this.treeByID.floorEntry(e);if(t&&!(!t.key.equals(e)&&!t.key.hasSameCreatedAt(e)))return t.value}findBetween(e,t){const r=[];let i=e;for(;i&&i!==t;)r.push(i),i=i.getNext();return r}splitNode(e,t){const r={data:0,meta:0};if(t>e.getContentLength())throw new T(k.ErrInvalidArgument,"offset should be less than or equal to length");if(t===0)return[e,r];if(t===e.getContentLength())return[e.getNext(),r];const i=e.getDataSize(),s=e.split(t);this.treeByIndex.updateWeight(s),this.insertAfter(e,s);const o=e.getInsNext();return o&&o.setInsPrev(s),s.setInsPrev(e),be(r,e.getDataSize(),s.getDataSize()),$i(r,i),[s,r]}deleteNodes(e,t,r){if(!e.length)return[[],new Map];const i=r===void 0||r.size()===0,s=[],o=[],[a,u]=this.findEdgesOfCandidates(e);o.push(a);for(const h of e){let m=!1;if(i)m=!0;else{const y=r==null?void 0:r.get(h.getCreatedAt().getActorID());y&&y>=h.getCreatedAt().getLamport()&&(m=!0)}let p=!1;if(h.getRemovedAt()){const y=r==null?void 0:r.get(h.getRemovedAt().getActorID());(i||y&&y>=h.getRemovedAt().getLamport())&&(p=!0)}h.canRemove(t,m,p)?s.push(h):o.push(h)}o.push(u);const c=this.makeChanges(o,t),d=new Map;for(const h of s)d.set(h.getID().toIDString(),h),h.remove(t);return this.deleteIndexNodes(o),[c,d]}findEdgesOfCandidates(e){return[e[0].getPrev(),e[e.length-1].getNext()]}makeChanges(e,t){const r=[];let i,s;for(let o=0;o<e.length-1;o++){const a=e[o],u=e[o+1];a.getNext()!=u&&([i]=this.findIndexesFromRange(a.getNext().createPosRange()),u?[,s]=this.findIndexesFromRange(u.getPrev().createPosRange()):s=this.treeByIndex.length,i<s&&r.push({actor:t.getActorID(),from:i,to:s}))}return r.reverse()}deleteIndexNodes(e){for(let t=0;t<e.length-1;t++){const r=e[t],i=e[t+1];r.getNext()!=i&&this.treeByIndex.deleteRange(r,i)}}purge(e){this.treeByIndex.delete(e),this.treeByID.remove(e.getID());const t=e.getPrev(),r=e.getNext(),i=e.getInsPrev(),s=e.getInsNext();t&&t.setNext(r),r&&r.setPrev(t),e.setPrev(void 0),e.setNext(void 0),i&&i.setInsNext(s),s&&s.setInsPrev(i),e.setInsPrev(void 0),e.setInsNext(void 0)}}const eg=n=>n<0?Math.ceil(n):Math.floor(n);var mn=(n=>(n[n.Int=0]="Int",n[n.Long=1]="Long",n))(mn||{});class Ze extends ca{constructor(t,r,i){super(i);l(this,"valueType");l(this,"value");switch(this.valueType=t,t){case 0:typeof r=="number"?r>Math.pow(2,31)-1||r<-Math.pow(2,31)?this.value=H.fromNumber(r).toInt():this.value=eg(r):this.value=r.toInt();break;case 1:typeof r=="number"?this.value=H.fromNumber(r):this.value=r;break;default:throw new T(k.ErrUnimplemented,`unimplemented type: ${t}`)}}static create(t,r,i){return new Ze(t,r,i)}static valueFromBytes(t,r){switch(t){case 0:return r[0]|r[1]<<8|r[2]<<16|r[3]<<24;case 1:return H.fromBytesLE(Array.from(r));default:throw new T(k.ErrUnimplemented,`unimplemented type: ${t}`)}}getDataSize(){return{data:this.valueType===0?4:8,meta:this.getMetaUsage()}}toJSON(){return`${this.value}`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:this.value,type:"YORKIE_COUNTER"}}deepcopy(){const t=Ze.create(this.valueType,this.value,this.getCreatedAt());return t.setRemovedAt(this.getRemovedAt()),t.setMovedAt(this.getMovedAt()),t}getType(){return this.valueType}static getCounterType(t){switch(typeof t){case"object":return t instanceof H?1:void 0;case"number":return t>Math.pow(2,31)-1||t<-Math.pow(2,31)?1:0;default:return}}static isSupport(t){return!!Ze.getCounterType(t)}static isInteger(t){return t%1===0}isNumericType(){const t=this.valueType;return t===0||t===1}getValueType(){return this.valueType}getValue(){return this.value}toBytes(){switch(this.valueType){case 0:{const t=this.value;return new Uint8Array([t&255,t>>8&255,t>>16&255,t>>24&255])}case 1:{const r=this.value.toBytesLE();return Uint8Array.from(r)}default:throw new T(k.ErrUnimplemented,`unimplemented type: ${this.valueType}`)}}increase(t){function r(i){if(!i.isNumericType())throw new TypeError(`Unsupported type of value: ${typeof i.getValue()}`)}return r(this),r(t),this.valueType===1?this.value=this.value.add(t.getValue()):t.getType()===te.Long?this.value=this.value+t.getValue().toInt():this.value=H.fromNumber(this.value+eg(t.getValue())).toInt(),this}}class Ws extends _t{constructor(t,r,i){super(t,i);l(this,"value");this.value=r}static create(t,r,i){return new Ws(t,r,i)}execute(t){const r=t.findByCreatedAt(this.getParentCreatedAt());if(!r)throw new T(k.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(r instanceof Ze))throw new T(k.ErrInvalidArgument,"fail to execute, only Counter can execute increase");const i=r,s=this.value.deepcopy();return i.increase(s),{opInfos:[{type:"increase",path:t.createPath(this.getParentCreatedAt()),value:s.getValue()}],reverseOp:this.toReverseOperation()}}toReverseOperation(){const t=this.value.deepcopy(),i=t.getType()===te.Long?t.getValue().multiply(-1):t.getValue()*-1;return Ws.create(this.getParentCreatedAt(),le.of(i,t.getCreatedAt()))}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.INCREASE.${this.value.toJSON()}`}getValue(){return this.value}}class jr extends _t{constructor(t,r,i,s,o,a){super(t,a);l(this,"fromPos");l(this,"toPos");l(this,"attributes");l(this,"attributesToRemove");this.fromPos=r,this.toPos=i,this.attributes=s,this.attributesToRemove=o}static create(t,r,i,s,o){return new jr(t,r,i,s,[],o)}static createTreeRemoveStyleOperation(t,r,i,s,o){return new jr(t,r,i,new Map,s,o)}execute(t,r,i){const s=t.findByCreatedAt(this.getParentCreatedAt());if(!s)throw new T(k.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(s instanceof ut))throw new T(k.ErrInvalidArgument,"fail to execute, only Tree can execute edit");const o=s;let a,u,c={data:0,meta:0};if(this.attributes.size){const d={};[...this.attributes].forEach(([h,m])=>d[h]=m),[u,a,c]=o.style([this.fromPos,this.toPos],d,this.getExecutedAt(),i)}else{const d=this.attributesToRemove;[u,a,c]=o.removeStyle([this.fromPos,this.toPos],d,this.getExecutedAt(),i)}t.acc(c);for(const d of u)t.registerGCPair(d);return{opInfos:a.map(({from:d,to:h,value:m,fromPath:p,toPath:y})=>({type:"tree-style",from:d,to:h,value:this.attributes.size?{attributes:m}:{attributesToRemove:m},fromPath:p,toPath:y,path:t.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const t=this.getParentCreatedAt().toTestString(),r=`${this.fromPos.getLeftSiblingID().getCreatedAt().toTestString()}:${this.fromPos.getLeftSiblingID().getOffset()}`,i=`${this.toPos.getLeftSiblingID().getCreatedAt().toTestString()}:${this.toPos.getLeftSiblingID().getOffset()}`;return`${t}.STYLE(${r},${i},${Object.entries(this.attributes||{}).map(([s,o])=>`${s}:"${o}"`).join(" ")})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getAttributes(){return this.attributes}getAttributesToRemove(){return this.attributesToRemove}}class _r extends _t{constructor(t,r,i,s){super(t,s);l(this,"createdAt");l(this,"value");this.createdAt=r,this.value=i}static create(t,r,i,s){return new _r(t,r,i,s)}execute(t){const r=t.findByCreatedAt(this.getParentCreatedAt());if(!r)throw new T(k.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(r instanceof Fe))throw new T(k.ErrInvalidArgument,"fail to execute, only array can execute set");const i=r.getByID(this.createdAt).deepcopy(),s=this.toReverseOperation(this.value,i),o=this.value.deepcopy();return r.insertAfter(this.createdAt,o,this.getExecutedAt()),r.delete(this.createdAt,this.getExecutedAt()),t.registerElement(o),{opInfos:[{type:"array-set",path:t.createPath(this.getParentCreatedAt())}],reverseOp:s}}toReverseOperation(t,r){return _r.create(this.getParentCreatedAt(),t.getCreatedAt(),r)}getEffectedCreatedAt(){return this.createdAt}toTestString(){return`${this.getParentCreatedAt().toTestString()}.ARRAY_SET.${this.createdAt.toTestString()}=${this.value.toSortedJSON()}`}getCreatedAt(){return this.createdAt}getValue(){return this.value}setCreatedAt(t){this.createdAt=t}}function XS(n){const e=new Fs,t=e.data;for(const[r,i]of Object.entries(n))t[r]=JSON.stringify(i);return e}function QS(n){if(n.type===dn.Put)return new Zo({type:Hi.PUT,presence:XS(n.presence)});if(n.type===dn.Clear)return new Zo({type:Hi.CLEAR});throw new T(k.ErrUnimplemented,"unimplemented type")}function ZS(n){return new Zy({serverSeq:n.getServerSeq(),clientSeq:n.getClientSeq()})}function hv(n){return new vu({clientSeq:n.getClientSeq(),lamport:n.getLamport(),actorId:xu(n.getActorID()),versionVector:qd(n.getVersionVector())})}function F(n){if(n)return new $({lamport:n.getLamport(),delimiter:n.getDelimiter(),actorId:xu(n.getActorID())})}function qd(n){if(!n)return;const e=new wu;for(const[t,r]of n){const i=Bk(xu(t));e.vector[i]=BigInt(r.toString())}return e}function mv(n){switch(n){case te.Null:return V.NULL;case te.Boolean:return V.BOOLEAN;case te.Integer:return V.INTEGER;case te.Long:return V.LONG;case te.Double:return V.DOUBLE;case te.String:return V.STRING;case te.Bytes:return V.BYTES;case te.Date:return V.DATE;default:throw new T(k.ErrInvalidType,`unsupported type: ${n}`)}}function gv(n){switch(n){case mn.Int:return V.INTEGER_CNT;case mn.Long:return V.LONG_CNT;default:throw new T(k.ErrInvalidType,`unsupported type: ${n}`)}}function Ra(n){if(n instanceof $e)return new mt({type:V.JSON_OBJECT,createdAt:F(n.getCreatedAt()),value:Nv(n)});if(n instanceof Fe)return new mt({type:V.JSON_ARRAY,createdAt:F(n.getCreatedAt()),value:bk(n)});if(n instanceof lt)return new mt({type:V.TEXT,createdAt:F(n.getCreatedAt())});if(n instanceof le)return new mt({type:mv(n.getType()),createdAt:F(n.getCreatedAt()),value:n.toBytes()});if(n instanceof Ze)return new mt({type:gv(n.getType()),createdAt:F(n.getCreatedAt()),value:n.toBytes()});if(n instanceof ut)return new mt({type:V.TREE,createdAt:F(n.getCreatedAt()),value:Lk(n)});throw new T(k.ErrUnimplemented,"unimplemented element")}function ek(n){return new Xo({createdAt:F(n.getCreatedAt()),offset:n.getOffset()})}function Ba(n){return new _i({createdAt:F(n.getID().getCreatedAt()),offset:n.getID().getOffset(),relativeOffset:n.getRelativeOffset()})}function za(n){return new Wi({parentId:No(n.getParentID()),leftSiblingId:No(n.getLeftSiblingID())})}function No(n){return new yi({createdAt:F(n.getCreatedAt()),offset:n.getOffset()})}function pv(n){const e=new Jd;if(n instanceof Gi){const t=n,r=new Dl;r.parentCreatedAt=F(t.getParentCreatedAt()),r.key=t.getKey(),r.value=Ra(t.getValue()),r.executedAt=F(t.getExecutedAt()),e.body.case="set",e.body.value=r}else if(n instanceof Ei){const t=n,r=new bl;r.parentCreatedAt=F(t.getParentCreatedAt()),r.prevCreatedAt=F(t.getPrevCreatedAt()),r.value=Ra(t.getValue()),r.executedAt=F(t.getExecutedAt()),e.body.case="add",e.body.value=r}else if(n instanceof jt){const t=n,r=new Ol;r.parentCreatedAt=F(t.getParentCreatedAt()),r.prevCreatedAt=F(t.getPrevCreatedAt()),r.createdAt=F(t.getCreatedAt()),r.executedAt=F(t.getExecutedAt()),e.body.case="move",e.body.value=r}else if(n instanceof hn){const t=n,r=new Ll;r.parentCreatedAt=F(t.getParentCreatedAt()),r.createdAt=F(t.getCreatedAt()),r.executedAt=F(t.getExecutedAt()),e.body.case="remove",e.body.value=r}else if(n instanceof fa){const t=n,r=new Rl;r.parentCreatedAt=F(t.getParentCreatedAt()),r.from=Ba(t.getFromPos()),r.to=Ba(t.getToPos()),r.content=t.getContent();const i=r.attributes;for(const[s,o]of t.getAttributes())i[s]=o;r.executedAt=F(t.getExecutedAt()),e.body.case="edit",e.body.value=r}else if(n instanceof da){const t=n,r=new Bl;r.parentCreatedAt=F(t.getParentCreatedAt()),r.from=Ba(t.getFromPos()),r.to=Ba(t.getToPos());const i=r.attributes;for(const[s,o]of t.getAttributes())i[s]=o;r.executedAt=F(t.getExecutedAt()),e.body.case="style",e.body.value=r}else if(n instanceof Ws){const t=n,r=new zl;r.parentCreatedAt=F(t.getParentCreatedAt()),r.value=Ra(t.getValue()),r.executedAt=F(t.getExecutedAt()),e.body.case="increase",e.body.value=r}else if(n instanceof ha){const t=n,r=new Ml;r.parentCreatedAt=F(t.getParentCreatedAt()),r.from=za(t.getFromPos()),r.to=za(t.getToPos()),r.contents=ak(t.getContents()),r.splitLevel=t.getSplitLevel(),r.executedAt=F(t.getExecutedAt()),e.body.case="treeEdit",e.body.value=r}else if(n instanceof jr){const t=n,r=new $l;r.parentCreatedAt=F(t.getParentCreatedAt()),r.from=za(t.getFromPos()),r.to=za(t.getToPos());const i=t.getAttributesToRemove();if(i.length>0)r.attributesToRemove=i;else{const s=r.attributes;for(const[o,a]of t.getAttributes())s[o]=a}r.executedAt=F(t.getExecutedAt()),e.body.case="treeStyle",e.body.value=r}else if(n instanceof _r){const t=n,r=new Fl;r.parentCreatedAt=F(t.getParentCreatedAt()),r.createdAt=F(t.getCreatedAt()),r.value=Ra(t.getValue()),r.executedAt=F(t.getExecutedAt()),e.body.case="arraySet",e.body.value=r}else throw new T(k.ErrUnimplemented,"unimplemented operation");return e}function tk(n){const e=[];for(const t of n)e.push(pv(t));return e}function nk(n){const e=new Xy({id:hv(n.getID()),message:n.getMessage()});return n.hasOperations()&&(e.operations=tk(n.getOperations())),n.hasPresenceChange()&&(e.presenceChange=QS(n.getPresenceChange())),e}function rk(n){const e=[];for(const t of n)e.push(nk(t));return e}function ik(n){const e=[];for(const t of n)e.push(new Qy({key:t.getStrKey(),element:Wd(t.getValue())}));return e}function sk(n){const e=[];for(const t of n)e.push(new Wl({element:Wd(t.getValue())}));return e}function ok(n){const e=[];for(const t of n){const r=new Hl;r.id=ek(t.getID()),r.value=t.getValue().getContent(),r.removedAt=F(t.getRemovedAt());const i=r.attributes,s=t.getValue().getAttrs();for(const o of s){const a=new $s;a.value=o.getValue(),a.updatedAt=F(o.getUpdatedAt()),i[o.getKey()]=a}e.push(r)}return e}function ak(n){const e=[];if(!n||!n.length)return e;for(const t of n)e.push(new _l({content:Kd(t)}));return e}function lk(n){const e={};for(const t of n)e[t.getKey()]=new $s({value:t.getValue(),updatedAt:F(t.getUpdatedAt()),isRemoved:t.isRemoved()});return e}function Kd(n){if(!n)return[];const e=[];return ku(n,(t,r)=>{const i=new Qo({id:No(t.id),type:t.type,removedAt:F(t.removedAt),depth:r});t.isText&&(i.value=t.value),t.insPrevID&&(i.insPrevId=No(t.insPrevID)),t.insNextID&&(i.insNextId=No(t.insNextID)),t.attrs&&(i.attributes=lk(t.attrs)),e.push(i)}),e}function uk(n){const e=new et;return e.body.case="jsonObject",e.body.value=new Jl({nodes:ik(n.getRHT()),createdAt:F(n.getCreatedAt()),movedAt:F(n.getMovedAt()),removedAt:F(n.getRemovedAt())}),e}function yv(n){const e=new et;return e.body.case="jsonArray",e.body.value=new Ul({nodes:sk(n.getElements()),createdAt:F(n.getCreatedAt()),movedAt:F(n.getMovedAt()),removedAt:F(n.getRemovedAt())}),e}function ck(n){const e=new et;return e.body.case="primitive",e.body.value=new jl({type:mv(n.getType()),value:n.toBytes(),createdAt:F(n.getCreatedAt()),movedAt:F(n.getMovedAt()),removedAt:F(n.getRemovedAt())}),e}function fk(n){const e=new et;return e.body.case="text",e.body.value=new Vl({nodes:ok(n.getRGATreeSplit()),createdAt:F(n.getCreatedAt()),movedAt:F(n.getMovedAt()),removedAt:F(n.getRemovedAt())}),e}function dk(n){const e=new et;return e.body.case="counter",e.body.value=new ql({type:gv(n.getType()),value:n.toBytes(),createdAt:F(n.getCreatedAt()),movedAt:F(n.getMovedAt()),removedAt:F(n.getRemovedAt())}),e}function vv(n){const e=new et;return e.body.case="tree",e.body.value=new Kl({nodes:Kd(n.getRoot()),createdAt:F(n.getCreatedAt()),movedAt:F(n.getMovedAt()),removedAt:F(n.getRemovedAt())}),e}function Wd(n){if(n instanceof $e)return uk(n);if(n instanceof Fe)return yv(n);if(n instanceof le)return ck(n);if(n instanceof lt)return fk(n);if(n instanceof Ze)return dk(n);if(n instanceof ut)return vv(n);throw new T(k.ErrUnimplemented,"unimplemented element")}function hk(n){return new Yr({documentKey:n.getDocumentKey(),checkpoint:ZS(n.getCheckpoint()),isRemoved:n.getIsRemoved(),changes:rk(n.getChanges()),snapshot:n.getSnapshot(),versionVector:qd(n.getVersionVector())})}function mo(n){if(!(n instanceof ee))return{};const e=n.findDetails(bS);for(const t of e)return t.metadata;return{}}function rs(n){return mo(n).code??""}function rc(n,e){return n instanceof ee&&rs(n)===e}function wv(n){return Mt.of(n.clientSeq,BigInt(n.lamport),Xd(n.actorId),Hd(n.versionVector),BigInt(n.serverSeq))}function Hd(n){if(!n)return;const e=new As;return Object.entries(n.vector).forEach(([t,r])=>{const i=Iu(Rk(t));e.set(i,BigInt(r.toString()))}),e}function U(n){if(n)return Pt.of(BigInt(n.lamport),n.delimiter,Xd(n.actorId))}function _d(n){const e={};return Object.entries(n.data).forEach(([t,r])=>{e[t]=JSON.parse(r)}),e}function mk(n){const e=n.type;if(e===Hi.PUT){const t=_d(n.presence);return{type:dn.Put,presence:t}}if(e===Hi.CLEAR)return{type:dn.Clear};throw new T(k.ErrInvalidType,`unsupported type: ${e}`)}function gk(n){const e=new Map;return Object.entries(n).forEach(([t,r])=>{e.set(t,_d(r))}),e}function Sv(n){switch(n){case V.NULL:return te.Null;case V.BOOLEAN:return te.Boolean;case V.INTEGER:return te.Integer;case V.LONG:return te.Long;case V.DOUBLE:return te.Double;case V.STRING:return te.String;case V.BYTES:return te.Bytes;case V.DATE:return te.Date}throw new T(k.ErrUnimplemented,`unimplemented value type: ${n}`)}function eu(n){switch(n){case V.INTEGER_CNT:return mn.Int;case V.LONG_CNT:return mn.Long}throw new T(k.ErrUnimplemented,`unimplemented value type: ${n}`)}function Ma(n){switch(n.type){case V.JSON_OBJECT:return n.value?Cv(n.value):$e.create(U(n.createdAt));case V.JSON_ARRAY:return n.value?Dk(n.value):Fe.create(U(n.createdAt));case V.TEXT:return lt.create(Ks.create(),U(n.createdAt));case V.TREE:return Ok(n.value);case V.NULL:case V.BOOLEAN:case V.INTEGER:case V.LONG:case V.DOUBLE:case V.STRING:case V.BYTES:case V.DATE:return le.of(le.valueFromBytes(Sv(n.type),n.value),U(n.createdAt));case V.INTEGER_CNT:case V.LONG_CNT:return Ze.create(eu(n.type),Ze.valueFromBytes(eu(n.type),n.value),U(n.createdAt))}}function $a(n){return Wt.of(fn.of(U(n.createdAt),n.offset),n.relativeOffset)}function kv(n){return fn.of(U(n.createdAt),n.offset)}function pk(n){const e=na.create(n.value);Object.entries(n.attributes).forEach(([r,i])=>{e.setAttr(r,i.value,U(i.updatedAt))});const t=wi.create(kv(n.id),e);return t.setRemovedAt(U(n.removedAt)),t}function ts(n){return Vt.of(Po(n.parentId),Po(n.leftSiblingId))}function Po(n){return Le.of(U(n.createdAt),n.offset)}function yk(n){if(!n.length)return;const e=[];return n.forEach(t=>{const r=Gd(t.content);e.push(r)}),e}function Gd(n){if(n.length===0)return;const e=[];for(const i of n)e.push(wk(i));const t=e[e.length-1],r=new Map;r.set(n[e.length-1].depth,e[e.length-1]);for(let i=e.length-2;i>=0;i--)r.get(n[i].depth-1).prepend(e[i]),r.set(n[i].depth,e[i]);return t.updateDescendantsSize(),t.updateDescendantsSize(!0),ut.create(t,Js).getRoot()}function vk(n){const e=Hr.create();for(const[t,r]of Object.entries(n))e.setInternal(t,r.value,U(r.updatedAt),r.isRemoved);return e}function wk(n){const e=Po(n.id),t=st.create(e,n.type),r=Object.entries(n.attributes);return t.isText?t.value=n.value:r.length&&(t.attrs=vk(n.attributes)),n.insPrevId&&(t.insPrevID=Po(n.insPrevId)),n.insNextId&&(t.insNextID=Po(n.insNextId)),t.removedAt=U(n.removedAt),t}function Tv(n){if(n.body.case==="set"){const e=n.body.value;return Gi.create(e.key,Ma(e.value),U(e.parentCreatedAt),U(e.executedAt))}else if(n.body.case==="add"){const e=n.body.value;return Ei.create(U(e.parentCreatedAt),U(e.prevCreatedAt),Ma(e.value),U(e.executedAt))}else if(n.body.case==="move"){const e=n.body.value;return jt.create(U(e.parentCreatedAt),U(e.prevCreatedAt),U(e.createdAt),U(e.executedAt))}else if(n.body.case==="remove"){const e=n.body.value;return hn.create(U(e.parentCreatedAt),U(e.createdAt),U(e.executedAt))}else if(n.body.case==="edit"){const e=n.body.value,t=new Map;return Object.entries(e.attributes).forEach(([r,i])=>{t.set(r,i)}),fa.create(U(e.parentCreatedAt),$a(e.from),$a(e.to),e.content,t,U(e.executedAt))}else if(n.body.case==="style"){const e=n.body.value,t=new Map;return Object.entries(e.attributes).forEach(([r,i])=>{t.set(r,i)}),da.create(U(e.parentCreatedAt),$a(e.from),$a(e.to),t,U(e.executedAt))}else if(n.body.case==="increase"){const e=n.body.value;return Ws.create(U(e.parentCreatedAt),Ma(e.value),U(e.executedAt))}else if(n.body.case==="treeEdit"){const e=n.body.value;return ha.create(U(e.parentCreatedAt),ts(e.from),ts(e.to),yk(e.contents),e.splitLevel,U(e.executedAt))}else if(n.body.case==="treeStyle"){const e=n.body.value,t=new Map,r=e.attributesToRemove;return(r==null?void 0:r.length)>0?jr.createTreeRemoveStyleOperation(U(e.parentCreatedAt),ts(e.from),ts(e.to),r,U(e.executedAt)):(Object.entries(e.attributes).forEach(([i,s])=>{t.set(i,s)}),jr.create(U(e.parentCreatedAt),ts(e.from),ts(e.to),t,U(e.executedAt)))}else if(n.body.case==="arraySet"){const e=n.body.value;return _r.create(U(e.parentCreatedAt),U(e.createdAt),Ma(e.value),U(e.executedAt))}else throw new T(k.ErrUnimplemented,"unimplemented operation")}function Sk(n){const e=[];for(const t of n){const r=Tv(t);r&&e.push(r)}return e}function Iv(n){const e=[];for(const t of n)e.push(qs.create({id:wv(t.id),operations:Sk(t.operations),presenceChange:t.presenceChange?mk(t.presenceChange):void 0,message:t.message}));return e}function kk(n){return Es.of(BigInt(n.serverSeq),n.clientSeq)}function Tk(n){return Tu.create(n.documentKey,kk(n.checkpoint),n.isRemoved,Iv(n.changes),Hd(n.versionVector),n.snapshot)}function xv(n){const e=new Us;for(const r of n.nodes){const i=Yd(r.element);e.set(r.key,i,i.getPositionedAt())}const t=new $e(U(n.createdAt),e);return t.setMovedAt(U(n.movedAt)),t.setRemovedAt(U(n.removedAt)),t}function Av(n){const e=new ta;for(const r of n.nodes)e.insert(Yd(r.element));const t=new Fe(U(n.createdAt),e);return t.setMovedAt(U(n.movedAt)),t.setRemovedAt(U(n.removedAt)),t}function Ik(n){const e=le.of(le.valueFromBytes(Sv(n.type),n.value),U(n.createdAt));return e.setMovedAt(U(n.movedAt)),e.setRemovedAt(U(n.removedAt)),e}function xk(n){const e=new Ks;let t=e.getHead();for(const i of n.nodes){const s=e.insertAfter(t,pk(i));i.insPrevId&&s.setInsPrev(e.findNode(kv(i.insPrevId))),t=s}const r=new lt(e,U(n.createdAt));return r.setMovedAt(U(n.movedAt)),r.setRemovedAt(U(n.removedAt)),r}function Ak(n){const e=Ze.create(eu(n.type),Ze.valueFromBytes(eu(n.type),n.value),U(n.createdAt));return e.setMovedAt(U(n.movedAt)),e.setRemovedAt(U(n.removedAt)),e}function Ev(n){const e=Gd(n.nodes);return ut.create(e,U(n.createdAt))}function Yd(n){if(n.body.case==="jsonObject")return xv(n.body.value);if(n.body.case==="jsonArray")return Av(n.body.value);if(n.body.case==="primitive")return Ik(n.body.value);if(n.body.case==="text")return xk(n.body.value);if(n.body.case==="counter")return Ak(n.body.value);if(n.body.case==="tree")return Ev(n.body.value);throw new T(k.ErrUnimplemented,"unimplemented element")}function Ek(n){return n.map(e=>({path:e.path,type:e.type}))}function Ck(n){if(!n)return{root:$e.create(Js),presences:new Map};const e=tf.fromBinary(n);return{root:Yd(e.root),presences:gk(e.presences)}}function Nk(n){const e=qd(n);return Iu(e.toBinary())}function Pk(n){const e=Qd(n),t=wu.fromBinary(e);return Hd(t)}function Cv(n){if(!n)throw new T(k.ErrInvalidArgument,"bytes is empty");const e=et.fromBinary(n);return xv(e.body.value)}function Nv(n){return Wd(n).toBinary()}function Dk(n){if(!n)throw new T(k.ErrInvalidArgument,"bytes is empty");const e=et.fromBinary(n);return Av(e.body.value)}function bk(n){return yv(n).toBinary()}function Ok(n){if(!n)throw new T(k.ErrInvalidArgument,"bytes is empty");const e=et.fromBinary(n);return Ev(e.body.value)}function Lk(n){return vv(n).toBinary()}function Iu(n){return n?Array.from(n).map(e=>e.toString(16).padStart(2,"0")).join(""):""}function Xd(n){return Iu(n)}function Qd(n){return new Uint8Array(n.match(/.{1,2}/g).map(e=>parseInt(e,16)))}function Rk(n){if(typeof window<"u"&&typeof window.atob=="function"){const e=window.atob(n),t=e.length,r=new Uint8Array(t);for(let i=0;i<t;i++)r[i]=e.charCodeAt(i);return r}else if(typeof globalThis<"u"&&typeof globalThis.Buffer<"u"){const e=globalThis.Buffer;return new Uint8Array(e.from(n,"base64"))}else throw new Error("No base64 decoder available")}function xu(n){return Qd(n)}function Bk(n){if(typeof window<"u"&&typeof window.btoa=="function"){let e="";for(let t=0;t<n.byteLength;t++)e+=String.fromCharCode(n[t]);return window.btoa(e)}else{if(typeof globalThis<"u"&&typeof globalThis.Buffer<"u")return globalThis.Buffer.from(n).toString("base64");throw new Error("No base64 encoder available")}}function zk(n){const e=vu.fromBinary(n);return wv(e)}function Mk(n){const e=Jd.fromBinary(n);return Tv(e)}const de={fromPresence:_d,toChangePack:hk,fromChangePack:Tk,fromChanges:Iv,toTreeNodes:Kd,fromTreeNodes:Gd,objectToBytes:Nv,bytesToObject:Cv,bytesToSnapshot:Ck,bytesToHex:Iu,hexToBytes:Qd,toHexString:Xd,toUint8Array:xu,toOperation:pv,toChangeID:hv,PbChangeID:vu,bytesToChangeID:zk,bytesToOperation:Mk,versionVectorToHex:Nk,hexToVersionVector:Pk,fromSchemaRules:Ek};var He=(n=>(n[n.Trivial=0]="Trivial",n[n.Debug=1]="Debug",n[n.Info=2]="Info",n[n.Warn=3]="Warn",n[n.Error=4]="Error",n[n.Fatal=5]="Fatal",n))(He||{});let Oi=3;function $k(n){Oi=n}const L={trivial:(...n)=>{Oi>0||typeof console<"u"&&console.log("YORKIE T:",...n)},debug:(...n)=>{Oi>1||typeof console<"u"&&console.log("YORKIE D:",...n)},info:(...n)=>{Oi>2||typeof console<"u"&&console.log("YORKIE I:",...n)},warn:(...n)=>{Oi>3||typeof console<"u"&&(typeof console.warn<"u"?console.warn("YORKIE W:",...n):console.log("YORKIE W:",...n))},error:(...n)=>{Oi>4||typeof console<"u"&&(typeof console.error<"u"?console.error("YORKIE E:",...n):console.log("YORKIE E:",...n))},fatal:(...n)=>{typeof console<"u"&&(typeof console.error<"u"?console.error("YORKIE F:",...n):console.log("YORKIE F:",...n))},isEnabled:n=>Oi<=n};function Pv(){return"xxxxxxxx-xxxx-4xxxy-xxxx-xxxxxxxxxxx".replace(/[xy]/g,n=>{const e=Math.random()*16|0;return(n==="x"?e:e&3|8).toString(16)})}const ic=()=>{};class Fk{constructor(e){l(this,"finalized",!1);l(this,"observers",[]);l(this,"finalError");try{e(this)}catch(t){this.error(t)}}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(!e)throw new T(k.ErrInvalidArgument,"missing observer");if(this.finalized)throw new T(k.ErrRefused,"observable is finalized due to previous error");typeof e=="object"?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=ic),i.error===void 0&&(i.error=ic),i.complete===void 0&&(i.complete=ic);const s=Pv(),o=this.unsubscribeOne.bind(this,s);if(this.observers.push({subscriptionID:s,observer:i}),this.finalized)try{this.finalError?i.error(this.finalError):i.complete()}catch(a){L.warn(a)}return o}unsubscribeOne(e){var t;this.observers=(t=this.observers)==null?void 0:t.filter(r=>r.subscriptionID!==e)}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e].observer)}catch(r){L.error(r)}}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.observers=void 0)}}function Dv(n){const e=new Fk(n);return{subscribe:e.subscribe.bind(e),getProxy:()=>e}}class Do{constructor(e,t,r,i){l(this,"prevID");l(this,"nextID");l(this,"delimiter");l(this,"message");l(this,"root");l(this,"operations");l(this,"presenceChange");l(this,"previousPresence");l(this,"reversePresenceKeys");this.prevID=e,this.nextID=e.next(),this.delimiter=ev,this.root=t,this.operations=[],this.previousPresence=zt(r),this.presenceChange=void 0,this.reversePresenceKeys=new Set,this.message=i}static create(e,t,r,i){return new Do(e,t,r,i)}push(e){this.operations.push(e)}registerElement(e,t){this.root.registerElement(e,t)}registerRemovedElement(e){this.root.registerRemovedElement(e)}registerGCPair(e){this.root.registerGCPair(e)}getNextID(){return this.isPresenceOnlyChange()?this.prevID.next(!0).setLamport(this.prevID.getLamport()).setVersionVector(this.prevID.getVersionVector()):this.nextID}toChange(){const e=this.isPresenceOnlyChange()?this.prevID.next(!0):this.nextID;return qs.create({id:e,operations:this.operations,presenceChange:this.presenceChange,message:this.message})}isPresenceOnlyChange(){return this.operations.length===0}hasChange(){return this.operations.length>0||this.presenceChange!==void 0}setPresenceChange(e){this.presenceChange=e}setReversePresence(e,t){for(const r of Object.keys(e))t!=null&&t.addToHistory?this.reversePresenceKeys.add(r):this.reversePresenceKeys.delete(r)}getReversePresence(){if(this.reversePresenceKeys.size===0)return;const e={};for(const t of this.reversePresenceKeys)e[t]=this.previousPresence[t];return e}issueTimeTicket(){return this.delimiter+=1,this.nextID.createTimeTicket(this.delimiter)}getLastTimeTicket(){return this.nextID.createTimeTicket(this.delimiter)}acc(e){this.root.acc(e)}}function bv(n,e){const t=new ra(n);return new Proxy(e,t.getHandlers())}class ra{constructor(e){l(this,"context");l(this,"handlers");this.context=e,this.handlers={set:(t,r,i)=>(L.isEnabled(He.Trivial)&&L.trivial(`obj[${r}]=${JSON.stringify(i)}`),ra.setInternal(e,t,r,i),!0),get:(t,r)=>(L.isEnabled(He.Trivial)&&L.trivial(`obj[${r}]`),r==="getID"?()=>t.getCreatedAt():r==="toJSON"||r==="toString"?()=>t.toJSON():r==="toJS"?()=>t.toJS():r==="toJSForTest"?()=>t.toJSForTest():Li(e,t.get(r))),ownKeys:t=>t.getKeys(),getOwnPropertyDescriptor:()=>({enumerable:!0,configurable:!0}),deleteProperty:(t,r)=>(L.isEnabled(He.Trivial)&&L.trivial(`obj[${r}]`),ra.deleteInternal(e,t,r),!0)}}static setInternal(e,t,r,i){if(r.includes("."))throw new T(k.ErrInvalidObjectKey,"key must not contain the '.'.");const s=e.issueTimeTicket(),o=bo(e,i,s),a=t.set(r,o,s);e.registerElement(o,t),a&&e.registerRemovedElement(a),e.push(Gi.create(r,o.deepcopy(),t.getCreatedAt(),s))}static buildObjectMembers(e,t){const r={};for(const[i,s]of Object.entries(t)){if(i.includes("."))throw new T(k.ErrInvalidObjectKey,"key must not contain the '.'.");const o=e.issueTimeTicket(),a=bo(e,s,o);r[i]=a}return r}static deleteInternal(e,t,r){const i=e.issueTimeTicket(),s=t.deleteByKey(r,i);s&&(e.push(hn.create(t.getCreatedAt(),s.getCreatedAt(),i)),e.registerRemovedElement(s))}getHandlers(){return this.handlers}}function Jk(n,e){const t=new Q(n,e);return new Proxy(e,t.getHandlers())}function tg(n){return typeof n=="string"||n instanceof String?!isNaN(n):!1}function Uk(n){return["concat","entries","every","filter","find","findIndex","forEach","join","keys","map","reduce","reduceRight","slice","some","toLocaleString","toString","values"].includes(n)}class Q{constructor(e,t){l(this,"context");l(this,"handlers");l(this,"array");this.context=e,this.array=t,this.handlers={get:(r,i,s)=>i==="getID"?()=>r.getCreatedAt():i==="getElementByID"?o=>{const a=r.getByID(o);if(!(!a||a.isRemoved()))return Rt(e,a)}:i==="getElementByIndex"?o=>{const a=r.get(o);return Rt(e,a)}:i==="getLast"?()=>Rt(e,r.getLast()):i==="delete"?o=>{const a=Q.deleteInternalByIndex(e,r,o);return Rt(e,a)}:i==="deleteByID"?o=>{const a=Q.deleteInternalByID(e,r,o);return Rt(e,a)}:i==="insertAfter"?(o,a)=>{const u=Q.insertAfterInternal(e,r,o,a);return Rt(e,u)}:i==="insertIntegerAfter"?(o,a)=>{const u=Q.insertIntegerAfterInternal(e,r,o,a);return Rt(e,u)}:i==="insertBefore"?(o,a)=>{const u=Q.insertBeforeInternal(e,r,o,a);return Rt(e,u)}:i==="setValue"?(o,a)=>{const u=Q.setValueInternal(e,r,o,a);return Rt(e,u)}:i==="moveBefore"?(o,a)=>{Q.moveBeforeInternal(e,r,o,a)}:i==="moveAfter"?(o,a)=>{Q.moveAfterInternal(e,r,o,a)}:i==="moveAfterByIndex"?(o,a)=>{Q.moveAfterByIndexInternal(e,r,o,a)}:i==="moveFront"?o=>{Q.moveFrontInternal(e,r,o)}:i==="moveLast"?o=>{Q.moveLastInternal(e,r,o)}:tg(i)?Li(e,r.get(Number(i))):i==="push"?o=>Q.pushInternal(e,r,o):i==="splice"?(o,a,...u)=>Q.splice(e,r,o,a,...u):i==="length"?r.length:typeof i=="symbol"&&i===Symbol.iterator?Q.iteratorInternal.bind(this,e,r):i==="includes"?(o,a)=>Q.includes(e,r,o,a):i==="indexOf"?(o,a)=>Q.indexOf(e,r,o,a):i==="lastIndexOf"?(o,a)=>Q.lastIndexOf(e,r,o,a):i==="toJSForTest"?()=>r.toJSForTest():i==="toTestString"?()=>Q.toTestString(r):typeof i=="string"&&Uk(i)?(...o)=>{const a=Array.from(r).map(u=>Li(e,u));return Array.prototype[i].apply(a,o)}:Reflect.get(r,i,s),set:(r,i,s)=>{if(tg(i)){const o=Number(i);return Q.setValueInternal(e,r,o,s),!0}return Reflect.set(r,i,s)},deleteProperty:(r,i)=>(L.isEnabled(He.Trivial)&&L.trivial(`array[${i}]`),Q.deleteInternalByIndex(e,r,Number.parseInt(i)),!0)}}static*iteratorInternal(e,t){for(const r of t)yield Rt(e,r)}static buildArrayElements(e,t){const r=[];for(const i of t){const s=e.issueTimeTicket(),o=bo(e,i,s);r.push(o)}return r}static pushInternal(e,t,r){return Q.insertAfterInternal(e,t,t.getLastCreatedAt(),r),t.length}static moveBeforeInternal(e,t,r,i){const s=e.issueTimeTicket(),o=t.getPrevCreatedAt(r);t.moveAfter(o,i,s),e.push(jt.create(t.getCreatedAt(),o,i,s))}static moveAfterInternal(e,t,r,i){const s=e.issueTimeTicket();e.push(jt.create(t.getCreatedAt(),r,i,s)),t.moveAfter(r,i,s)}static moveAfterByIndexInternal(e,t,r,i){const s=t.get(r);if(!s)throw new T(k.ErrInvalidArgument,`index out of bounds: ${r}`);const o=t.get(i);if(!o)throw new T(k.ErrInvalidArgument,`index out of bounds: ${i}`);Q.moveAfterInternal(e,t,s.getCreatedAt(),o.getCreatedAt())}static moveFrontInternal(e,t,r){const i=e.issueTimeTicket(),s=t.getHead();t.moveAfter(s.getCreatedAt(),r,i),e.push(jt.create(t.getCreatedAt(),s.getCreatedAt(),r,i))}static moveLastInternal(e,t,r){const i=e.issueTimeTicket(),s=t.getLastCreatedAt();t.moveAfter(s,r,i),e.push(jt.create(t.getCreatedAt(),s,r,i))}static insertAfterInternal(e,t,r,i){const s=e.issueTimeTicket(),o=bo(e,i,s);return t.insertAfter(r,o),e.registerElement(o,t),e.push(Ei.create(t.getCreatedAt(),r,o.deepcopy(),s)),o}static insertIntegerAfterInternal(e,t,r,i){const s=t.get(r);if(!s)throw new T(k.ErrInvalidArgument,`index out of bounds: ${r}`);return Q.insertAfterInternal(e,t,s.getCreatedAt(),i),t}static insertBeforeInternal(e,t,r,i){return Q.insertAfterInternal(e,t,t.getPrevCreatedAt(r),i)}static setValueInternal(e,t,r,i){const s=t.get(r);if(!s)throw new T(k.ErrInvalidArgument,`index out of bounds: ${r}`);return Q.setByIndexInternal(e,t,s.getCreatedAt(),i),t}static setByIndexInternal(e,t,r,i){const s=e.issueTimeTicket(),o=bo(e,i,s),a=o.deepcopy();return e.push(_r.create(t.getCreatedAt(),r,a,s)),t.set(r,o,s),e.registerElement(o,t),o}static deleteInternalByIndex(e,t,r){const i=e.issueTimeTicket(),s=t.deleteByIndex(r,i);if(s)return e.push(hn.create(t.getCreatedAt(),s.getCreatedAt(),i)),e.registerRemovedElement(s),s}static deleteInternalByID(e,t,r){const i=e.issueTimeTicket(),s=t.delete(r,i);return e.push(hn.create(t.getCreatedAt(),s.getCreatedAt(),i)),e.registerRemovedElement(s),s}static splice(e,t,r,i,...s){const o=t.length,a=r>=0?Math.min(r,o):Math.max(o+r,0),u=i===void 0?o:i<0?a:Math.min(a+i,o),c=[];for(let d=a;d<u;d++){const h=Q.deleteInternalByIndex(e,t,a);if(h){const m=h.deepcopy();m.setRemovedAt(),c.push(Li(e,m))}}if(s){let d=a===0?t.getHead().getID():t.get(a-1).getID();for(const h of s)d=Q.insertAfterInternal(e,t,d,h).getID()}return c}static includes(e,t,r,i){var a;const s=t.length,o=i===void 0?0:i<0?Math.max(i+s,0):i;if(o>=s)return!1;if(le.isSupport(r))return Array.from(t).map(c=>Li(e,c)).includes(r,o);for(let u=o;u<s;u++)if(((a=t.get(u))==null?void 0:a.getID())===r.getID())return!0;return!1}static indexOf(e,t,r,i){var a;const s=t.length,o=i===void 0?0:i<0?Math.max(i+s,0):i;if(o>=s)return-1;if(le.isSupport(r))return Array.from(t).map(c=>Li(e,c)).indexOf(r,o);for(let u=o;u<s;u++)if(((a=t.get(u))==null?void 0:a.getID())===r.getID())return u;return-1}static lastIndexOf(e,t,r,i){var a;const s=t.length,o=i===void 0||i>=s?s-1:i<0?i+s:i;if(o<0)return-1;if(le.isSupport(r))return Array.from(t).map(c=>Li(e,c)).lastIndexOf(r,o);for(let u=o;u>0;u--)if(((a=t.get(u))==null?void 0:a.getID())===r.getID())return u;return-1}static toTestString(e){return e.toTestString()}getHandlers(){return this.handlers}}class Zd{constructor(e,t){l(this,"context");l(this,"text");this.context=e,this.text=t}initialize(e,t){this.context=e,this.text=t}getID(){return this.text.getID()}edit(e,t,r,i){if(!this.context||!this.text)throw new T(k.ErrNotInitialized,"Text is not initialized yet");if(e>t)throw new T(k.ErrInvalidArgument,"from should be less than or equal to to");const s=this.text.indexRangeToPosRange(e,t);L.isEnabled(He.Debug)&&L.debug(`EDIT: f:${e}->${s[0].toTestString()}, t:${t}->${s[1].toTestString()} c:${r}`);const o=i?Vs(i):void 0,a=this.context.issueTimeTicket(),[,u,c,d]=this.text.edit(s,r,a,o);this.context.acc(c);for(const h of u)this.context.registerGCPair(h);return this.context.push(new fa(this.text.getCreatedAt(),s[0],s[1],r,o?new Map(Object.entries(o)):new Map,a)),this.text.findIndexesFromRange(d)}delete(e,t){return this.edit(e,t,"")}empty(){return this.edit(0,this.length,"")}setStyle(e,t,r){if(!this.context||!this.text)throw new T(k.ErrNotInitialized,"Text is not initialized yet");if(e>t)throw new T(k.ErrInvalidArgument,"from should be less than or equal to to");const i=this.text.indexRangeToPosRange(e,t);L.isEnabled(He.Debug)&&L.debug(`STYL: f:${e}->${i[0].toTestString()}, t:${t}->${i[1].toTestString()} a:${JSON.stringify(r)}`);const s=Vs(r),o=this.context.issueTimeTicket(),[a,u]=this.text.setStyle(i,s,o);this.context.acc(u);for(const c of a)this.context.registerGCPair(c);return this.context.push(new da(this.text.getCreatedAt(),i[0],i[1],new Map(Object.entries(s)),o)),!0}indexRangeToPosRange(e){if(!this.context||!this.text)throw new T(k.ErrNotInitialized,"Text is not initialized yet");const t=this.text.indexRangeToPosRange(e[0],e[1]);return[t[0].toStruct(),t[1].toStruct()]}posRangeToIndexRange(e){if(!this.context||!this.text)throw new T(k.ErrNotInitialized,"Text is not initialized yet");const t=this.text.findIndexesFromRange([Wt.fromStruct(e[0]),Wt.fromStruct(e[1])]);return[t[0],t[1]]}toTestString(){if(!this.context||!this.text)throw new T(k.ErrNotInitialized,"Text is not initialized yet");return this.text.toTestString()}values(){if(!this.context||!this.text)throw new T(k.ErrNotInitialized,"Text is not initialized yet");return this.text.values()}get length(){return this.text.length}getTreeByIndex(){return this.text.getTreeByIndex()}getTreeByID(){return this.text.getTreeByID()}toString(){if(!this.context||!this.text)throw new T(k.ErrNotInitialized,"Text is not initialized yet");return this.text.toString()}toJSON(){if(!this.context||!this.text)throw new T(k.ErrNotInitialized,"Text is not initialized yet");return this.text.toJSON()}toJSForTest(){if(!this.context||!this.text)throw new T(k.ErrNotInitialized,"Text is not initialized yet");return this.text.toJSForTest()}createRangeForTest(e,t){if(!this.context||!this.text)throw new T(k.ErrNotInitialized,"Text is not initialized yet");return this.text.indexRangeToPosRange(e,t)}}class eh{constructor(e,t){l(this,"valueType");l(this,"value");l(this,"context");l(this,"counter");this.valueType=e,this.value=t}initialize(e,t){this.valueType=t.getValueType(),this.context=e,this.counter=t,this.value=t.getValue()}getID(){return this.counter.getID()}getValue(){return this.value}getValueType(){return this.valueType}increase(e){if(!this.context||!this.counter)throw new T(k.ErrNotInitialized,"Counter is not initialized yet");const t=this.context.issueTimeTicket(),r=le.of(e,t);if(!r.isNumericType())throw new TypeError(`Unsupported type of value: ${typeof r.getValue()}`);return this.counter.increase(r),this.context.push(Ws.create(this.counter.getCreatedAt(),r,t)),this}toJSForTest(){if(!this.context||!this.counter)throw new T(k.ErrNotInitialized,"Counter is not initialized yet");return this.counter.toJSForTest()}}function th(n){if(n.isText)return{type:n.type,value:n.value};const e={type:n.type,children:n.children.map(t=>th(t))};return n.attrs&&(e.attributes=Ur(n.attrs.toObject())),e}function jk(n,e){const t={type:n.isText?n.parent.type:n.type,children:n.isText?n.parent.getChildrenText().length===e?[]:[{type:cn,value:n.parent.getChildrenText().slice(e)}]:n.children.slice(e).map(r=>th(r))};return n.attrs?t.attributes=Ur(n.attrs.toObject()):n.isText&&n.parent.attrs&&(t.attributes=Ur(n.parent.attrs.toObject())),t}function Vk(n,e){const{node:t}=n,r=[...e].slice(0,-1),i=t.isText?t.parent.getChildrenText().length:t.children.length,s=[...r,i],o=[...r],a=[];o[o.length-1]+=1,e.every((c,d)=>c===s[d])||a.push({fromPath:[...e],toPath:s});const u=jk(t,e[e.length-1]);return u&&a.push({fromPath:o,toPath:o,content:u}),a}function qk(n,e){const{node:t,offset:r}=n,i=t.children[r],s=t.children[r-1],{children:o}=i,a=[...e].slice(0,-1),u=[{fromPath:[...e],toPath:[...a,r+1]}];if(!i.children.length)return u;const c=[...a,r-1,s.hasTextChild()?s.getChildrenText().length:s.children.length],d=o.map(h=>th(h));return u.push({fromPath:c,toPath:c,content:d}),u}function nh(n,e,t){const{type:r}=n,i=t.issueTimeTicket();if(r===cn){Ov(n);const{value:s}=n,o=st.create(Le.of(i,0),r,s);e.append(o)}else{const{children:s=[]}=n,{attributes:o}=n;let a;if(typeof o=="object"&&!ov(o)){const c=Vs(o);a=new Hr;for(const[d,h]of Object.entries(c))a.set(d,h,i)}const u=st.create(Le.of(i,0),r,void 0,a);e.append(u);for(const c of s)nh(c,u,t)}}function Kk(n,e){const{type:t}=e,r=n.issueTimeTicket();let i;if(e.type===cn){const{value:s}=e;i=st.create(Le.of(r,0),t,s)}else if(e){const{children:s=[]}=e,{attributes:o}=e;let a;if(typeof o=="object"&&!ov(o)){const u=Vs(o);a=new Hr;for(const[c,d]of Object.entries(u))a.set(c,d,r)}i=st.create(Le.of(n.issueTimeTicket(),0),t,void 0,a);for(const u of s)nh(u,i,n)}return i}function Ov(n){if(!n.value.length)throw new T(k.ErrInvalidArgument,"text node cannot have empty value");return!0}function ng(n){if(!n.length)return!0;if(n[0].type===cn)for(const t of n){const{type:r}=t;if(r!==cn)throw new T(k.ErrInvalidArgument,"element node and text node cannot be passed together");Ov(t)}else for(const t of n){const{type:r}=t;if(r===cn)throw new T(k.ErrInvalidArgument,"element node and text node cannot be passed together")}return!0}class rh{constructor(e){l(this,"initialRoot");l(this,"context");l(this,"tree");this.initialRoot=e}initialize(e,t){this.context=e,this.tree=t}getID(){return this.tree.getID()}buildRoot(e){if(!this.initialRoot)return st.create(Le.of(e.issueTimeTicket(),0),JS);const t=st.create(Le.of(e.issueTimeTicket(),0),this.initialRoot.type);for(const r of this.initialRoot.children)nh(r,t,e);return t}getSize(){if(!this.context||!this.tree)throw new T(k.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getSize()}getNodeSize(){if(!this.context||!this.tree)throw new T(k.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getNodeSize()}getIndexTree(){if(!this.context||!this.tree)throw new T(k.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getIndexTree()}splitByPath(e){if(!this.context||!this.tree)throw new T(k.ErrNotInitialized,"Tree is not initialized yet");if(!e.length)throw new T(k.ErrInvalidArgument,"path should not be empty");const t=this.tree.pathToTreePos(e),r=Vk(t,e);for(const i of r){const{fromPath:s,toPath:o,content:a}=i,u=this.tree.pathToPos(s),c=this.tree.pathToPos(o);this.editInternal(u,c,a?[a]:[],0)}}mergeByPath(e){if(!this.context||!this.tree)throw new T(k.ErrNotInitialized,"Tree is not initialized yet");if(!e.length)throw new T(k.ErrInvalidArgument,"path should not be empty");const t=this.tree.pathToTreePos(e);if(t.node.isText)throw new T(k.ErrInvalidArgument,"text node cannot be merged");const r=qk(t,e);for(const i of r){const{fromPath:s,toPath:o,content:a}=i,u=this.tree.pathToPos(s),c=this.tree.pathToPos(o);this.editInternal(u,c,a??[],0)}}styleByPath(e,t){if(!this.context||!this.tree)throw new T(k.ErrNotInitialized,"Tree is not initialized yet");if(!e.length)throw new T(k.ErrInvalidArgument,"path should not be empty");const[r,i]=this.tree.pathToPosRange(e),s=this.context.issueTimeTicket(),o=t?Vs(t):void 0,[a,,u]=this.tree.style([r,i],o,s);this.context.acc(u);for(const c of a)this.context.registerGCPair(c);this.context.push(jr.create(this.tree.getCreatedAt(),r,i,o?new Map(Object.entries(o)):new Map,s))}style(e,t,r){if(!this.context||!this.tree)throw new T(k.ErrNotInitialized,"Tree is not initialized yet");if(e>t)throw new T(k.ErrInvalidArgument,"from should be less than or equal to to");const i=this.tree.findPos(e),s=this.tree.findPos(t),o=this.context.issueTimeTicket(),a=r?Vs(r):void 0,[u,,c]=this.tree.style([i,s],a,o);this.context.acc(c);for(const d of u)this.context.registerGCPair(d);this.context.push(jr.create(this.tree.getCreatedAt(),i,s,a?new Map(Object.entries(a)):new Map,o))}removeStyle(e,t,r){if(!this.context||!this.tree)throw new T(k.ErrNotInitialized,"Tree is not initialized yet");if(e>t)throw new T(k.ErrInvalidArgument,"from should be less than or equal to to");const i=this.tree.findPos(e),s=this.tree.findPos(t),o=this.context.issueTimeTicket(),[a,,u]=this.tree.removeStyle([i,s],r,o);this.context.acc(u);for(const c of a)this.context.registerGCPair(c);this.context.push(jr.createTreeRemoveStyleOperation(this.tree.getCreatedAt(),i,s,r,o))}editInternal(e,t,r,i=0){var c;if(r.length!==0&&r[0]&&(ng(r),r[0].type!==cn))for(const d of r){const{children:h=[]}=d;ng(h)}const s=this.context.getLastTimeTicket();let o=new Array;if(((c=r[0])==null?void 0:c.type)===cn){let d="";for(const h of r){const{value:m}=h;d+=m}o.push(st.create(Le.of(this.context.issueTimeTicket(),0),cn,d))}else o=r.map(d=>d&&Kk(this.context,d)).filter(d=>d);const[,a,u]=this.tree.edit([e,t],o.length?o.map(d=>d==null?void 0:d.deepcopy()):void 0,i,s,()=>this.context.issueTimeTicket());this.context.acc(u);for(const d of a)this.context.registerGCPair(d);return this.context.push(ha.create(this.tree.getCreatedAt(),e,t,o.length?o:void 0,i,s)),!0}editByPath(e,t,r,i=0){if(!this.context||!this.tree)throw new T(k.ErrNotInitialized,"Tree is not initialized yet");if(e.length!==t.length)throw new T(k.ErrInvalidArgument,"path length should be equal");if(!e.length||!t.length)throw new T(k.ErrInvalidArgument,"path should not be empty");const s=this.tree.pathToPos(e),o=this.tree.pathToPos(t);return this.editInternal(s,o,r?[r]:[],i)}editBulkByPath(e,t,r,i=0){if(!this.context||!this.tree)throw new T(k.ErrNotInitialized,"Tree is not initialized yet");if(e.length!==t.length)throw new T(k.ErrInvalidArgument,"path length should be equal");if(!e.length||!t.length)throw new T(k.ErrInvalidArgument,"path should not be empty");const s=this.tree.pathToPos(e),o=this.tree.pathToPos(t);return this.editInternal(s,o,r,i)}edit(e,t,r,i=0){if(!this.context||!this.tree)throw new T(k.ErrNotInitialized,"Tree is not initialized yet");if(e>t)throw new T(k.ErrInvalidArgument,"from should be less than or equal to to");const s=this.tree.findPos(e),o=this.tree.findPos(t);return this.editInternal(s,o,r?[r]:[],i)}editBulk(e,t,r,i=0){if(!this.context||!this.tree)throw new T(k.ErrNotInitialized,"Tree is not initialized yet");if(e>t)throw new T(k.ErrInvalidArgument,"from should be less than or equal to to");const s=this.tree.findPos(e),o=this.tree.findPos(t);return this.editInternal(s,o,r,i)}toXML(){if(!this.context||!this.tree)throw new T(k.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toXML()}toJSON(){if(!this.context||!this.tree)throw new T(k.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toJSON()}toJSForTest(){if(!this.context||!this.tree)throw new T(k.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toJSForTest()}toJSInfoForTest(){if(!this.context||!this.tree)throw new T(k.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toJSInfoForTest()}getRootTreeNode(){if(!this.context||!this.tree)throw new T(k.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getRootTreeNode()}indexToPath(e){if(!this.context||!this.tree)throw new T(k.ErrNotInitialized,"Tree is not initialized yet");return this.tree.indexToPath(e)}pathToIndex(e){if(!this.context||!this.tree)throw new T(k.ErrNotInitialized,"Tree is not initialized yet");return this.tree.pathToIndex(e)}pathRangeToPosRange(e){if(!this.context||!this.tree)throw new T(k.ErrNotInitialized,"Tree is not initialized yet");const t=[this.tree.pathToIndex(e[0]),this.tree.pathToIndex(e[1])],r=this.tree.indexRangeToPosRange(t);return[r[0].toStruct(),r[1].toStruct()]}indexRangeToPosRange(e){if(!this.context||!this.tree)throw new T(k.ErrNotInitialized,"Tree is not initialized yet");return this.tree.indexRangeToPosStructRange(e)}posRangeToIndexRange(e){if(!this.context||!this.tree)throw new T(k.ErrNotInitialized,"Tree is not initialized yet");const t=[Vt.fromStruct(e[0]),Vt.fromStruct(e[1])];return this.tree.posRangeToIndexRange(t)}posRangeToPathRange(e){if(!this.context||!this.tree)throw new T(k.ErrNotInitialized,"Tree is not initialized yet");const t=[Vt.fromStruct(e[0]),Vt.fromStruct(e[1])];return this.tree.posRangeToPathRange(t)}}function rg(n,e){return bv(n,e)}function Rt(n,e){if(e){if(e instanceof le)return e;if(e instanceof $e)return bv(n,e);if(e instanceof Fe)return Jk(n,e);if(e instanceof lt)return new Zd(n,e);if(e instanceof Ze){const t=new eh(mn.Int,0);return t.initialize(n,e),t}else if(e instanceof ut){const t=new rh;return t.initialize(n,e),t}}else return;throw new TypeError(`Unsupported type of element: ${typeof e}`)}function Li(n,e){const t=Rt(n,e);return t instanceof le?t.getValue():t}function bo(n,e,t){let r;if(le.isSupport(e))r=le.of(e,t);else if(Array.isArray(e))r=Fe.create(t,Q.buildArrayElements(n,e));else if(typeof e=="object")e instanceof Zd?(r=lt.create(Ks.create(),t),e.initialize(n,r)):e instanceof eh?(r=Ze.create(e.getValueType(),e.getValue(),t),e.initialize(n,r)):e instanceof rh?(r=ut.create(e.buildRoot(n),t),e.initialize(n,r)):r=$e.create(t,ra.buildObjectMembers(n,e));else throw new TypeError(`Unsupported type of value: ${typeof e}`);return r}class ia{constructor(e){l(this,"rootObject");l(this,"elementPairMapByCreatedAt");l(this,"gcElementSetByCreatedAt");l(this,"gcPairMap");l(this,"docSize");this.rootObject=e,this.elementPairMapByCreatedAt=new Map,this.gcElementSetByCreatedAt=new Set,this.gcPairMap=new Map,this.docSize={live:{data:0,meta:0},gc:{data:0,meta:0}},this.registerElement(e,void 0),e.getDescendants(t=>{if(t.getRemovedAt()&&this.registerRemovedElement(t),t instanceof lt||t instanceof ut)for(const r of t.getGCPairs())this.registerGCPair(r);return!1})}static create(){return new ia($e.create(Js))}findByCreatedAt(e){const t=this.elementPairMapByCreatedAt.get(e.toIDString());if(t)return t.element}findElementPairByCreatedAt(e){return this.elementPairMapByCreatedAt.get(e.toIDString())}createSubPaths(e){let t=this.elementPairMapByCreatedAt.get(e.toIDString());if(!t)return[];const r=[];for(;t.parent;){const i=t.element.getCreatedAt(),s=t.parent.subPathOf(i);if(s===void 0)throw new T(k.ErrInvalidArgument,`cant find the given element: ${i.toIDString()}`);r.unshift(s),t=this.elementPairMapByCreatedAt.get(t.parent.getCreatedAt().toIDString())}return r.unshift("$"),r}createPath(e){return this.createSubPaths(e).join(".")}registerElement(e,t){this.elementPairMapByCreatedAt.set(e.getCreatedAt().toIDString(),{parent:t,element:e}),be(this.docSize.live,e.getDataSize()),e instanceof vi&&e.getDescendants((r,i)=>(this.elementPairMapByCreatedAt.set(r.getCreatedAt().toIDString(),{parent:i,element:r}),be(this.docSize.live,r.getDataSize()),!1))}deregisterElement(e){let t=0;const r=i=>{const s=i.getCreatedAt().toIDString();$i(this.docSize.gc,i.getDataSize()),this.elementPairMapByCreatedAt.delete(s),this.gcElementSetByCreatedAt.delete(s),t++};return r(e),e instanceof vi&&e.getDescendants(i=>(r(i),!1)),t}registerRemovedElement(e){be(this.docSize.gc,e.getDataSize()),$i(this.docSize.live,e.getDataSize()),this.docSize.live.meta+=un,this.gcElementSetByCreatedAt.add(e.getCreatedAt().toIDString())}registerGCPair(e){if(this.gcPairMap.get(e.child.toIDString())){this.gcPairMap.delete(e.child.toIDString());return}this.gcPairMap.set(e.child.toIDString(),e);const r=this.gcPairMap.get(e.child.toIDString()).child.getDataSize();be(this.docSize.gc,r),$i(this.docSize.live,r),e.child instanceof li||(this.docSize.live.meta+=un)}getElementMapSize(){return this.elementPairMapByCreatedAt.size}getGarbageElementSetSize(){const e=new Set;for(const t of this.gcElementSetByCreatedAt){e.add(t);const r=this.elementPairMapByCreatedAt.get(t);r.element instanceof vi&&r.element.getDescendants(i=>(e.add(i.getCreatedAt().toIDString()),!1))}return e.size}getObject(){return this.rootObject}getGarbageLen(){return this.getGarbageElementSetSize()+this.gcPairMap.size}getDocSize(){return this.docSize}deepcopy(){return new ia(this.rootObject.deepcopy())}garbageCollect(e){let t=0;for(const r of this.gcElementSetByCreatedAt){const i=this.elementPairMapByCreatedAt.get(r),s=i.element.getRemovedAt();s&&(e!=null&&e.afterOrEqual(s))&&(i.parent.purge(i.element),t+=this.deregisterElement(i.element))}for(const[,r]of this.gcPairMap){const i=r.child.getRemovedAt();i&&(e!=null&&e.afterOrEqual(i))&&(r.parent.purge(r.child),$i(this.docSize.gc,r.child.getDataSize()),this.gcPairMap.delete(r.child.toIDString()),t+=1)}return t}toJSON(){return this.rootObject.toJSON()}toSortedJSON(){return this.rootObject.toSortedJSON()}getStats(){return{elements:this.getElementMapSize(),gcPairs:this.gcPairMap.size,gcElements:this.getGarbageElementSetSize()}}acc(e){be(this.docSize.live,e)}*getGCElementPairs(){for(const e of this.gcElementSetByCreatedAt){const t=this.elementPairMapByCreatedAt.get(e);t&&(yield t)}}}let ig=class{constructor(e,t){l(this,"context");l(this,"presence");this.context=e,this.presence=t}set(e,t){for(const r of Object.keys(e))this.presence[r]=e[r];this.context.setPresenceChange({type:dn.Put,presence:zt(this.presence)}),this.context.setReversePresence(e,t)}get(e){return this.presence[e]}clear(){this.presence={},this.context.setPresenceChange({type:dn.Clear})}};const sg=50;class Wk{constructor(){l(this,"undoStack",[]);l(this,"redoStack",[])}hasUndo(){return this.undoStack.length>0}hasRedo(){return this.redoStack.length>0}pushUndo(e){this.undoStack.length>=sg&&this.undoStack.shift(),this.undoStack.push(e)}popUndo(){return this.undoStack.pop()}pushRedo(e){this.redoStack.length>=sg&&this.redoStack.shift(),this.redoStack.push(e)}popRedo(){return this.redoStack.pop()}clearRedo(){this.redoStack=[]}getUndoStackForTest(){return this.undoStack}getRedoStackForTest(){return this.redoStack}reconcileCreatedAt(e,t){const r=i=>{for(const s of i)for(const o of s)(o instanceof _r||o instanceof hn||o instanceof jt)&&o.getCreatedAt()===e&&o.setCreatedAt(t),(o instanceof Ei||o instanceof jt)&&o.getPrevCreatedAt()===e&&o.setPrevCreatedAt(t)};r(this.undoStack),r(this.redoStack)}}function Hk(n,e){const t=[];for(const r of e){const i=_k(n,r.path),s=Gk(i,r);if(!s.valid)for(const o of s.errors||[])t.push(o)}return{valid:t.length===0,errors:t}}function _k(n,e){if(!e.startsWith("$"))throw new Error(`Path must start with $, got ${e}`);const t=e.split(".");let r=n;for(let i=1;i<t.length;i++){const s=t[i];if(!(r instanceof $e))return;r=r.get(s)}return r}function Gk(n,e){switch(e.type){case"string":case"boolean":case"integer":case"double":case"long":case"date":case"bytes":case"null":return Xk(n,e);case"object":if(!(n instanceof $e))return{valid:!1,errors:[{path:e.path,message:`expected object at path ${e.path}`}]};break;case"array":if(!(n instanceof Fe))return{valid:!1,errors:[{path:e.path,message:`expected array at path ${e.path}`}]};break;case"yorkie.Text":if(!(n instanceof lt))return{valid:!1,errors:[{path:e.path,message:`expected yorkie.Text at path ${e.path}`}]};break;case"yorkie.Tree":if(!(n instanceof ut))return{valid:!1,errors:[{path:e.path,message:`expected yorkie.Tree at path ${e.path}`}]};break;case"yorkie.Counter":if(!(n instanceof Ze))return{valid:!1,errors:[{path:e.path,message:`expected yorkie.Counter at path ${e.path}`}]};break;default:throw new Error(`Unknown rule type: ${e.type}`)}return{valid:!0}}function Yk(n){switch(n){case"null":return te.Null;case"boolean":return te.Boolean;case"integer":return te.Integer;case"long":return te.Long;case"double":return te.Double;case"string":return te.String;case"bytes":return te.Bytes;case"date":return te.Date;default:throw new Error(`Unknown primitive type: ${n}`)}}function Xk(n,e){return n instanceof le&&n.getType()===Yk(e.type)?{valid:!0}:{valid:!1,errors:[{path:e.path,message:`expected ${e.type} at path ${e.path}`}]}}const Qk="yorkie-devtools-panel",Zk="yorkie-devtools-sdk";function eT(n){return[Ae.StatusChanged,Ae.Snapshot,Ae.LocalChange,Ae.RemoteChange,Ae.Initialized,Ae.Watched,Ae.Unwatched,Ae.PresenceChanged].includes(n.type)}function tT(n){return n.every(eT)}let is="disconnected";const og=new Map,rl=new Map;typeof window<"u"&&(window.docEventsForReplayByDocKey=rl);function Fa(n,e){(e!=null&&e.force||is!=="disconnected")&&window.postMessage({source:Zk,...n},"*")}function nT(n){if(!n.isEnableDevtools()||typeof window>"u"||og.has(n.getKey()))return;rl.set(n.getKey(),[]);const e=n.subscribe("all",t=>{tT(t)&&(rl.get(n.getKey()).push(t),is==="synced"&&Fa({msg:"doc::sync::partial",docKey:n.getKey(),event:t}))});og.set(n.getKey(),[e]),Fa({msg:"refresh-devtools"},{force:!0}),window.addEventListener("message",t=>{var i;if(((i=t.data)==null?void 0:i.source)!==Qk)return;switch(t.data.msg){case"devtools::connect":if(is!=="disconnected")break;is="connected",Fa({msg:"doc::available",docKey:n.getKey()}),L.info(`[YD] Devtools connected. Doc: ${n.getKey()}`);break;case"devtools::disconnect":is="disconnected",L.info(`[YD] Devtools disconnected. Doc: ${n.getKey()}`);break;case"devtools::subscribe":is="synced",Fa({msg:"doc::sync::full",docKey:n.getKey(),events:rl.get(n.getKey())}),L.info(`[YD] Devtools subscribed. Doc: ${n.getKey()}`);break}})}var Zr=(n=>(n.Detached="detached",n.Attached="attached",n.Removed="removed",n))(Zr||{}),Ae=(n=>(n.StatusChanged="status-changed",n.ConnectionChanged="connection-changed",n.SyncStatusChanged="sync-status-changed",n.Snapshot="snapshot",n.LocalChange="local-change",n.RemoteChange="remote-change",n.Initialized="initialized",n.Watched="watched",n.Unwatched="unwatched",n.PresenceChanged="presence-changed",n.AuthError="auth-error",n))(Ae||{}),Oo=(n=>(n.Connected="connected",n.Disconnected="disconnected",n))(Oo||{}),Uf=(n=>(n.Synced="synced",n.SyncFailed="sync-failed",n))(Uf||{});class si{constructor(e,t){l(this,"key");l(this,"status");l(this,"opts");l(this,"maxSizeLimit");l(this,"schemaRules");l(this,"changeID");l(this,"checkpoint");l(this,"localChanges");l(this,"root");l(this,"presences");l(this,"clone");l(this,"internalHistory");l(this,"isUpdating");l(this,"onlineClients");l(this,"eventStream");l(this,"eventStreamObserver");l(this,"history");this.key=e,this.status="detached",this.opts=t||{},this.maxSizeLimit=0,this.schemaRules=[],this.changeID=_S,this.checkpoint=GS,this.localChanges=[],this.root=ia.create(),this.presences=new Map,this.onlineClients=new Set,this.internalHistory=new Wk,this.isUpdating=!1,this.eventStream=Dv(r=>this.eventStreamObserver=r),this.history={canUndo:()=>this.internalHistory.hasUndo()&&!this.isUpdating,canRedo:()=>this.internalHistory.hasRedo()&&!this.isUpdating,undo:()=>this.executeUndoRedo(!0),redo:()=>this.executeUndoRedo(!1)},nT(this)}update(e,t){var a,u,c;if(this.getStatus()==="removed")throw new T(k.ErrDocumentRemoved,`${this.key} is removed`);this.ensureClone();const r=this.changeID.getActorID(),i=Do.create(this.changeID,this.clone.root,this.clone.presences.get(r)||{},t);try{const d=rg(i,this.clone.root.getObject());this.presences.has(r)||this.clone.presences.set(r,{}),this.isUpdating=!0,e(d,new ig(i,this.clone.presences.get(r)))}catch(d){throw this.clone=void 0,d}finally{this.isUpdating=!1}const s=this.getSchemaRules();if(!i.isPresenceOnlyChange()&&s.length){const d=Hk((a=this.clone)==null?void 0:a.root.getObject(),s);if(!d.valid)throw this.clone=void 0,new T(k.ErrDocumentSchemaValidationFailed,`schema validation failed: ${(u=d.errors)==null?void 0:u.map(h=>h.message).join(", ")}`)}const o=$S((c=this.clone)==null?void 0:c.root.getDocSize());if(!i.isPresenceOnlyChange()&&this.maxSizeLimit>0&&this.maxSizeLimit<o)throw this.clone=void 0,new T(k.ErrDocumentSizeExceedsLimit,`document size exceeded: ${o} > ${this.maxSizeLimit}`);if(i.hasChange()){L.isEnabled(He.Trivial)&&L.trivial(`trying to update a local change: ${this.toJSON()}`);const d=i.toChange(),{opInfos:h,reverseOps:m}=d.execute(this.root,this.presences,se.Local);for(const w of d.getOperations())w instanceof _r&&this.internalHistory.reconcileCreatedAt(w.getCreatedAt(),w.getValue().getCreatedAt());const p=i.getReversePresence();p&&m.push({type:"presence",value:p}),this.localChanges.push(d),m.length&&this.internalHistory.pushUndo(m),h.length&&this.internalHistory.clearRedo(),this.changeID=i.getNextID();const y=[];h.length&&y.push({type:"local-change",source:se.Local,value:{message:d.getMessage()||"",operations:h,actor:r,clientSeq:d.getID().getClientSeq(),serverSeq:d.getID().getServerSeq()},rawChange:this.isEnableDevtools()?d.toStruct():void 0}),d.hasPresenceChange()&&y.push({type:"presence-changed",source:se.Local,value:{clientID:r,presence:this.getPresence(r)}}),this.publish(y),L.isEnabled(He.Trivial)&&L.trivial(`after update a local change: ${this.toJSON()}`)}}subscribe(e,t,r,i){if(typeof e=="string"){if(typeof t!="function")throw new T(k.ErrInvalidArgument,"Second argument must be a callback function");if(e==="presence"){const a=t;return this.eventStream.subscribe(u=>{for(const c of u)c.type!=="initialized"&&c.type!=="watched"&&c.type!=="unwatched"&&c.type!=="presence-changed"||a(c)},r,i)}if(e==="my-presence"){const a=t;return this.eventStream.subscribe(u=>{for(const c of u)c.type!=="initialized"&&c.type!=="presence-changed"||c.type==="presence-changed"&&c.value.clientID!==this.changeID.getActorID()||a(c)},r,i)}if(e==="others"){const a=t;return this.eventStream.subscribe(u=>{for(const c of u)c.type!=="watched"&&c.type!=="unwatched"&&c.type!=="presence-changed"||c.value.clientID!==this.changeID.getActorID()&&a(c)},r,i)}if(e==="connection"){const a=t;return this.eventStream.subscribe(u=>{for(const c of u)c.type==="connection-changed"&&a(c)},r,i)}if(e==="status"){const a=t;return this.eventStream.subscribe(u=>{for(const c of u)c.type==="status-changed"&&a(c)},r,i)}if(e==="sync"){const a=t;return this.eventStream.subscribe(u=>{for(const c of u)c.type==="sync-status-changed"&&a(c)},r,i)}if(e==="auth-error"){const a=t;return this.eventStream.subscribe(u=>{for(const c of u)c.type==="auth-error"&&a(c)},r)}if(e==="all"){const a=t;return this.eventStream.subscribe(a,r,i)}const s=e,o=t;return this.eventStream.subscribe(a=>{for(const u of a){if(u.type!=="local-change"&&u.type!=="remote-change")continue;const c=[];for(const d of u.value.operations)this.isSameElementOrChildOf(d.path,s)&&c.push(d);c.length&&o({...u,value:{...u.value,operations:c}})}},r,i)}if(typeof e=="function"){const s=e,o=t,a=r;return this.eventStream.subscribe(u=>{for(const c of u)c.type!=="snapshot"&&c.type!=="local-change"&&c.type!=="remote-change"||s(c)},o,a)}throw new T(k.ErrInvalidArgument,`"${e}" is not a valid`)}publish(e){this.eventStreamObserver&&this.eventStreamObserver.next(e)}applyChangePack(e){e.hasSnapshot()?this.applySnapshot(e.getCheckpoint().getServerSeq(),e.getVersionVector(),e.getSnapshot(),e.getCheckpoint().getClientSeq()):(this.applyChanges(e.getChanges(),se.Remote),this.removePushedLocalChanges(e.getCheckpoint().getClientSeq())),this.checkpoint=this.checkpoint.forward(e.getCheckpoint()),e.hasSnapshot()||this.garbageCollect(e.getVersionVector()),e.getIsRemoved()&&this.applyStatus("removed"),L.isEnabled(He.Trivial)&&L.trivial(`${this.root.toJSON()}`)}getCheckpoint(){return this.checkpoint}getChangeID(){return this.changeID}hasLocalChanges(){return this.localChanges.length>0}ensureClone(){this.clone||(this.clone={root:this.root.deepcopy(),presences:zt(this.presences)})}createChangePack(){const e=Array.from(this.localChanges),t=this.checkpoint.increaseClientSeq(e.length);return Tu.create(this.key,t,!1,e,this.getVersionVector())}setActor(e){for(const t of this.localChanges)t.setActor(e);this.changeID=this.changeID.setActor(e)}isEnableDevtools(){return!!this.opts.enableDevtools}getKey(){return this.key}getStatus(){return this.status}getClone(){return this.clone}getCloneRoot(){if(this.clone)return this.clone.root.getObject()}getRoot(){this.ensureClone();const e=Do.create(this.changeID.next(),this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});return rg(e,this.clone.root.getObject())}getDocSize(){return this.root.getDocSize()}getMaxSizePerDocument(){return this.maxSizeLimit}setMaxSizePerDocument(e){this.maxSizeLimit=e}getSchemaRules(){return this.schemaRules}setSchemaRules(e){this.schemaRules=e}garbageCollect(e){return this.opts.disableGC?0:(this.clone&&this.clone.root.garbageCollect(e),this.root.garbageCollect(e))}getRootObject(){return this.root.getObject()}getGarbageLen(){return this.root.getGarbageLen()}getRootCRDT(){return this.root}getGarbageLenFromClone(){return this.clone.root.getGarbageLen()}toJSON(){return this.root.toJSON()}toSortedJSON(){return this.root.toSortedJSON()}getStats(){return this.root.getStats()}toJSForTest(){return{...this.getRoot().toJSForTest(),key:"root"}}applySnapshot(e,t,r,i=-1){const{root:s,presences:o}=de.bytesToSnapshot(r);this.root=new ia(s),this.presences=o,this.changeID=this.changeID.setClocks(t.maxLamport(),t),this.clone=void 0,this.removePushedLocalChanges(i),this.applyChanges(this.localChanges,se.Local),this.publish([{type:"snapshot",source:se.Remote,value:{serverSeq:e.toString(),snapshot:this.isEnableDevtools()?de.bytesToHex(r):void 0,snapshotVector:de.versionVectorToHex(t)}}])}applyChanges(e,t){L.isEnabled(He.Debug)&&L.debug(`trying to apply ${e.length} remote changes.elements:${this.root.getElementMapSize()}, removeds:${this.root.getGarbageElementSetSize()}`),L.isEnabled(He.Trivial)&&L.trivial(e.map(r=>`${r.getID().toTestString()}	${r.toTestString()}`).join(`
`));for(const r of e)this.applyChange(r,t);L.isEnabled(He.Debug)&&L.debug(`after appling ${e.length} remote changes.elements:${this.root.getElementMapSize()},  removeds:${this.root.getGarbageElementSetSize()}`)}applyChange(e,t){this.ensureClone(),e.execute(this.clone.root,this.clone.presences,t);const r=[],i=e.getID().getActorID();if(e.hasPresenceChange()&&this.onlineClients.has(i)){const o=e.getPresenceChange();switch(o.type){case dn.Put:r.push(this.presences.has(i)?{type:"presence-changed",source:t,value:{clientID:i,presence:o.presence}}:{type:"watched",source:se.Remote,value:{clientID:i,presence:o.presence}});break;case dn.Clear:r.push({type:"unwatched",source:se.Remote,value:{clientID:i,presence:this.getPresence(i)}}),this.removeOnlineClient(i);break}}const{opInfos:s}=e.execute(this.root,this.presences,t);if(this.changeID=this.changeID.syncClocks(e.getID()),s.length){const o=this.isEnableDevtools()?e.toStruct():void 0;r.push(t===se.Remote?{type:"remote-change",source:t,value:{actor:i,clientSeq:e.getID().getClientSeq(),serverSeq:e.getID().getServerSeq(),message:e.getMessage()||"",operations:s},rawChange:o}:{type:"local-change",source:t,value:{actor:i,clientSeq:e.getID().getClientSeq(),serverSeq:e.getID().getServerSeq(),message:e.getMessage()||"",operations:s},rawChange:o})}r.length&&this.publish(r)}applyWatchStream(e){if(e.body.case==="initialization"){const t=e.body.value.clientIds,r=new Set;for(const i of t)i!==this.changeID.getActorID()&&r.add(i);this.setOnlineClients(r),this.publish([{type:"initialized",source:se.Local,value:this.getPresences()}]);return}if(e.body.case==="event"){const{type:t,publisher:r}=e.body.value,i=[];if(t===Ms.DOCUMENT_WATCHED){if(this.onlineClients.has(r)&&this.hasPresence(r))return;this.addOnlineClient(r),this.hasPresence(r)&&i.push({type:"watched",source:se.Remote,value:{clientID:r,presence:this.getPresence(r)}})}else if(t===Ms.DOCUMENT_UNWATCHED){const s=this.getPresence(r);this.removeOnlineClient(r),s&&i.push({type:"unwatched",source:se.Remote,value:{clientID:r,presence:s}})}i.length&&this.publish(i)}}applyStatus(e){this.status=e,e==="detached"&&this.setActor(Ud),this.publish([{source:e==="removed"?se.Remote:se.Local,type:"status-changed",value:e==="attached"?{status:e,actorID:this.changeID.getActorID()}:{status:e}}])}applyDocEventsForReplay(e){for(const t of e){if(t.type==="status-changed"){this.applyStatus(t.value.status),t.value.status==="attached"&&this.setActor(t.value.actorID);continue}if(t.type==="snapshot"){const{snapshot:r,serverSeq:i,snapshotVector:s}=t.value;if(!r)continue;this.applySnapshot(BigInt(i),de.hexToVersionVector(s),de.hexToBytes(r));continue}if(t.type==="local-change"||t.type==="remote-change"){if(!t.rawChange)continue;const r=qs.fromStruct(t.rawChange);this.applyChange(r,t.source)}if(t.type==="initialized"){const r=new Set;for(const{clientID:i,presence:s}of t.value)r.add(i),this.presences.set(i,s);this.setOnlineClients(r)}else if(t.type==="watched"){const{clientID:r,presence:i}=t.value;this.addOnlineClient(r),this.presences.set(r,i)}else if(t.type==="unwatched"){const{clientID:r}=t.value;this.removeOnlineClient(r),this.presences.delete(r)}else if(t.type==="presence-changed"){const{clientID:r,presence:i}=t.value;this.presences.set(r,i)}}}getValueByPath(e){if(!e.startsWith("$"))throw new T(k.ErrInvalidArgument,'path must start with "$"');const t=e.split(".");t.shift();let r=this.getRoot();for(const i of t)if(r=r[i],!r)return;return r}setOnlineClients(e){this.onlineClients=e}resetOnlineClients(){this.onlineClients=new Set}addOnlineClient(e){this.onlineClients.add(e)}removeOnlineClient(e){this.onlineClients.delete(e)}hasPresence(e){return this.presences.has(e)}getMyPresence(){if(this.status!=="attached")return{};const e=this.presences.get(this.changeID.getActorID());return e?zt(e):{}}getOthersPresences(){const e=[],t=this.changeID.getActorID();for(const r of this.onlineClients)r!==t&&this.presences.has(r)&&e.push({clientID:r,presence:zt(this.presences.get(r))});return e}getPresence(e){if(e===this.changeID.getActorID())return this.getMyPresence();if(!this.onlineClients.has(e))return;const t=this.presences.get(e);return t?zt(t):void 0}getPresences(){const e=[];e.push({clientID:this.changeID.getActorID(),presence:zt(this.getMyPresence())});for(const t of this.onlineClients)this.presences.has(t)&&e.push({clientID:t,presence:zt(this.presences.get(t))});return e}getPresenceForTest(e){const t=this.presences.get(e);return t?zt(t):void 0}getSelfForTest(){return{clientID:this.getChangeID().getActorID(),presence:this.getMyPresence()}}getOthersForTest(){const e=this.getChangeID().getActorID();return this.getPresences().filter(t=>t.clientID!==e).sort((t,r)=>t.clientID>r.clientID?1:-1)}getUndoStackForTest(){return this.internalHistory.getUndoStackForTest()}getRedoStackForTest(){return this.internalHistory.getRedoStackForTest()}getVersionVector(){return this.changeID.getVersionVector()}isSameElementOrChildOf(e,t){if(t===e)return!0;const r=e.split(".");return t.split(".").every((i,s)=>i===r[s])}removePushedLocalChanges(e){for(;this.localChanges.length&&!(this.localChanges[0].getID().getClientSeq()>e);)this.localChanges.shift()}executeUndoRedo(e){if(this.isUpdating)throw new T(k.ErrRefused,`${e?"Undo":"Redo"} is not allowed during an update`);const t=e?this.internalHistory.popUndo():this.internalHistory.popRedo();if(!t)throw new T(k.ErrRefused,`There is no operation to be ${e?"undone":"redone"}`);this.ensureClone();const r=Do.create(this.changeID,this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});for(const d of t){if(!(d instanceof _t)){new ig(r,zt(this.clone.presences.get(this.changeID.getActorID()))).set(d.value,{addToHistory:!0});continue}const h=r.issueTimeTicket();if(d.setExecutedAt(h),d instanceof _r){const m=d.getCreatedAt();d.getValue().setCreatedAt(h),this.internalHistory.reconcileCreatedAt(m,h)}else if(d instanceof Ei){const m=d.getValue().getCreatedAt();d.getValue().setCreatedAt(h),this.internalHistory.reconcileCreatedAt(m,h)}r.push(d)}const i=r.toChange();i.execute(this.clone.root,this.clone.presences,se.UndoRedo);const{opInfos:s,reverseOps:o}=i.execute(this.root,this.presences,se.UndoRedo),a=r.getReversePresence();if(a&&o.push({type:"presence",value:a}),o.length&&(e?this.internalHistory.pushRedo(o):this.internalHistory.pushUndo(o)),!i.hasPresenceChange()&&!s.length)return;this.localChanges.push(i),this.changeID=r.getNextID();const u=this.changeID.getActorID(),c=[];s.length&&c.push({type:"local-change",source:se.UndoRedo,value:{message:i.getMessage()||"",operations:s,actor:u,clientSeq:i.getID().getClientSeq(),serverSeq:i.getID().getServerSeq()},rawChange:this.isEnableDevtools()?i.toStruct():void 0}),i.hasPresenceChange()&&c.push({type:"presence-changed",source:se.UndoRedo,value:{clientID:u,presence:this.getPresence(u)}}),this.publish(c)}}class ag{constructor(e,t,r,i){l(this,"resource");l(this,"resourceID");l(this,"syncMode");l(this,"changeEventReceived");l(this,"lastHeartbeatTime");l(this,"reconnectStreamDelay");l(this,"cancelled");l(this,"watchStream");l(this,"watchLoopTimerID");l(this,"watchAbortController");this.reconnectStreamDelay=e,this.resource=t,this.resourceID=r,this.syncMode=i,this.changeEventReceived=i!==void 0?!1:void 0,this.lastHeartbeatTime=Date.now(),this.cancelled=!1}changeSyncMode(e){this.syncMode=e}needRealtimeSync(){return this.syncMode===po.RealtimeSyncOff?!1:this.syncMode===po.RealtimePushOnly?this.resource.hasLocalChanges():this.syncMode!==po.Manual&&(this.resource.hasLocalChanges()||(this.changeEventReceived??!1))}needSync(e){return this.resource instanceof si?this.needRealtimeSync():this.syncMode===po.Manual?!1:Date.now()-this.lastHeartbeatTime>=e}updateHeartbeatTime(){this.lastHeartbeatTime=Date.now()}async runWatchLoop(e){const t=async()=>{if(this.watchStream)return Promise.resolve();this.watchLoopTimerID&&(clearTimeout(this.watchLoopTimerID),this.watchLoopTimerID=void 0);try{[this.watchStream,this.watchAbortController]=await e(()=>{this.watchStream=void 0,this.watchAbortController=void 0,this.cancelled||(this.watchLoopTimerID=setTimeout(t,this.reconnectStreamDelay))})}catch{}};await t()}cancelWatchStream(){this.cancelled=!0,this.watchStream&&this.watchAbortController&&(this.watchAbortController.abort(),this.watchStream=void 0,this.watchAbortController=void 0),clearTimeout(this.watchLoopTimerID),this.watchLoopTimerID=void 0}}function rT(n,e){let t=e;return{authInterceptor:s=>async o=>(n&&o.header.set("x-api-key",n),t&&o.header.set("authorization",t),await s(o)),setToken:s=>{t=s}}}const iT="@yorkie-js/sdk",sT="0.6.36",lg={name:iT,version:sT};function oT(n){return e=>async t=>(n?t.header.set("x-yorkie-user-agent",n):t.header.set("x-yorkie-user-agent",lg.name+"/"+lg.version),await e(t))}const aT=n=>{try{if(JSON.stringify(n)===void 0)return!1}catch{return!1}return!0};var go=(n=>(n.Detached="detached",n.Attached="attached",n.Removed="removed",n))(go||{}),vs=(n=>(n.PresenceChanged="presence-changed",n.Initialized="initialized",n.Broadcast="broadcast",n.LocalBroadcast="local-broadcast",n.AuthError="auth-error",n))(vs||{});const lo=".";class ei{constructor(e){l(this,"key");l(this,"status");l(this,"actorID");l(this,"sessionID");l(this,"count");l(this,"seq");l(this,"eventStream");l(this,"eventStreamObserver");this.validateChannelKey(e),this.key=e,this.status="detached",this.count=0,this.seq=0,this.eventStream=Dv(t=>this.eventStreamObserver=t)}getKey(){return this.key}getFirstKeyPath(){return this.key.split(lo)[0]}getStatus(){return this.status}applyStatus(e){this.status=e}isAttached(){return this.status==="attached"}getActorID(){return this.actorID}setActor(e){this.actorID=e}getSessionID(){return this.sessionID}setSessionID(e){this.sessionID=e}getPresenceCount(){return this.count}updateCount(e,t){return t===0||t>this.seq?(this.count=e,this.seq=t,!0):!1}hasLocalChanges(){return!1}subscribe(e,t){if(typeof e=="function")return this.eventStream.subscribe(e);const r=e,i=t;if(!i)throw new Error("callback is required when subscribing to specific event type or topic");if(r==="broadcast")return this.eventStream.subscribe(o=>{o.type==="broadcast"&&i(o)});if(r==="local-broadcast")return this.eventStream.subscribe(o=>{o.type==="local-broadcast"&&i(o)});if(r==="auth-error")return this.eventStream.subscribe(o=>{o.type==="auth-error"&&i(o)});if(r==="presence")return this.eventStream.subscribe(o=>{(o.type==="presence-changed"||o.type==="initialized")&&i(o)});if(r==="all")return this.eventStream.subscribe(i);const s=r;return this.eventStream.subscribe(o=>{o.type==="broadcast"&&o.topic===s&&i(o)})}publish(e){this.eventStreamObserver&&this.eventStreamObserver.next(e)}broadcast(e,t,r){if(this.status!=="attached")throw new Error(`channel is not attached: ${this.status}`);if(!this.actorID)throw new Error("actorID is not set");this.publish({type:"local-broadcast",clientID:this.actorID,topic:e,payload:t,options:r})}validateChannelKey(e){if(e==="")throw new Error("channel key must not be empty");if(e.includes(" "))throw new Error("channel key must not contain a whitespace");if(e.startsWith(lo))throw new Error("channel key must not start with a period");if(e.endsWith(lo))throw new Error("channel key must not end with a period");if(e.includes(`${lo}${lo}`))throw new Error("channel key path must not empty")}}var po=(n=>(n.Manual="manual",n.Realtime="realtime",n.RealtimePushOnly="realtime-pushonly",n.RealtimeSyncOff="realtime-syncoff",n))(po||{});const ns={rpcAddr:"https://api.yorkie.dev",syncLoopDuration:50,retrySyncLoopDelay:1e3,reconnectStreamDelay:1e3,channelHeartbeatInterval:3e4},sc={maxRetries:1/0,initialRetryInterval:1e3,maxBackoff:2e4};class Lv{constructor(e){l(this,"id");l(this,"key");l(this,"metadata");l(this,"status");l(this,"attachmentMap");l(this,"apiKey");l(this,"authTokenInjector");l(this,"conditions");l(this,"syncLoopDuration");l(this,"reconnectStreamDelay");l(this,"retrySyncLoopDelay");l(this,"channelHeartbeatInterval");l(this,"rpcClient");l(this,"setAuthToken");l(this,"taskQueue");l(this,"processing",!1);l(this,"keepalive",!1);e=e||ns;const t=e.rpcAddr||ns.rpcAddr;this.key=e.key||Pv(),this.metadata=e.metadata||{},this.status="deactivated",this.attachmentMap=new Map,this.apiKey=e.apiKey||"",this.authTokenInjector=e.authTokenInjector,this.conditions={SyncLoop:!1,WatchLoop:!1},this.syncLoopDuration=e.syncLoopDuration??ns.syncLoopDuration,this.reconnectStreamDelay=e.reconnectStreamDelay??ns.reconnectStreamDelay,this.retrySyncLoopDelay=e.retrySyncLoopDelay??ns.retrySyncLoopDelay,this.channelHeartbeatInterval=e.channelHeartbeatInterval??ns.channelHeartbeatInterval;const{authInterceptor:r,setToken:i}=rT(this.apiKey);this.setAuthToken=i,this.rpcClient=aS(DS,PS({baseUrl:t,interceptors:[r,oT(e==null?void 0:e.userAgent)],fetch:(s,o)=>fetch(s,{...o,keepalive:this.keepalive})})),this.taskQueue=[]}async activate(){if(this.isActive())return Promise.resolve();if(this.authTokenInjector){const e=await this.authTokenInjector();this.setAuthToken(e)}return this.enqueueTask(async()=>{try{const e=await this.rpcClient.activateClient({clientKey:this.key,metadata:this.metadata},{headers:{"x-shard-key":`${this.apiKey}/${this.key}`}});this.id=e.clientId,this.status="activated",this.runSyncLoop(),L.info(`[AC] c:"${this.getKey()}" activated, id:"${this.id}"`),typeof window<"u"&&window.addEventListener("beforeunload",async()=>{await this.deactivate({keepalive:!0})})}catch(e){throw L.error(`[AC] c:"${this.getKey()}" err :`,e),await this.handleConnectError(e),e}})}deactivate(e={keepalive:!1,synchronous:!1}){if(this.status==="deactivated")return Promise.resolve();const t=async()=>{try{await this.rpcClient.deactivateClient({clientId:this.id,synchronous:e.synchronous},{headers:{"x-shard-key":`${this.apiKey}/${this.key}`}}),this.deactivateInternal(),L.info(`[DC] c"${this.getKey()}" deactivated`)}catch(r){throw L.error(`[DC] c:"${this.getKey()}" err :`,r),await this.handleConnectError(r),r}};if(e.keepalive){this.keepalive=!0;const r=t();return this.keepalive=!1,r}return this.enqueueTask(t)}has(e){return this.attachmentMap.has(e)}attach(e,t){return e instanceof ei?this.attachChannel(e,t):this.attachDocument(e,t)}attachDocument(e,t={}){if(!this.isActive())throw new T(k.ErrClientNotActivated,`${this.key} is not active`);if(e.getStatus()!==Zr.Detached)throw new T(k.ErrNotDetached,`${e.getKey()} is not detached`);e.setActor(this.id),e.update((i,s)=>s.set(t.initialPresence||{}));const r=t.syncMode??"realtime";return this.enqueueTask(async()=>{try{const i=await this.rpcClient.attachDocument({clientId:this.id,changePack:de.toChangePack(e.createChangePack()),schemaKey:t.schema},{headers:{"x-shard-key":`${this.apiKey}/${e.getKey()}`}});(i.maxSizePerDocument??0)>0&&e.setMaxSizePerDocument(i.maxSizePerDocument),i.schemaRules.length>0&&e.setSchemaRules(de.fromSchemaRules(i.schemaRules));const o=de.fromChangePack(i.changePack);if(e.applyChangePack(o),e.getStatus()===Zr.Removed)return e;e.applyStatus(Zr.Attached),this.attachmentMap.set(e.getKey(),new ag(this.reconnectStreamDelay,e,i.documentId,r)),r!=="manual"&&await this.runWatchLoop(e.getKey()),L.info(`[AD] c:"${this.getKey()}" attaches d:"${e.getKey()}"`);const a=e.getRootObject();if(t.initialRoot){const u=t.initialRoot;e.update(c=>{for(const[d,h]of Object.entries(u))if(!a.has(d)){const m=d;c[m]=h}})}return e}catch(i){throw L.error(`[AD] c:"${this.getKey()}" err :`,i),await this.handleConnectError(i),i}})}detach(e,t){return e instanceof ei?this.detachChannel(e):this.detachDocument(e,t)}detachDocument(e,t={keepalive:!1}){if(!this.isActive())throw new T(k.ErrClientNotActivated,`${this.key} is not active`);const r=this.attachmentMap.get(e.getKey());if(!r)throw new T(k.ErrNotAttached,`${e.getKey()} is not attached`);e.update((s,o)=>o.clear());const i=async()=>{try{const s=await this.rpcClient.detachDocument({clientId:this.id,documentId:r.resourceID,changePack:de.toChangePack(e.createChangePack()),removeIfNotAttached:t.removeIfNotAttached??!1},{headers:{"x-shard-key":`${this.apiKey}/${e.getKey()}`}}),o=de.fromChangePack(s.changePack);return e.applyChangePack(o),e.getStatus()!==Zr.Removed&&e.applyStatus(Zr.Detached),this.detachInternal(e.getKey()),L.info(`[DD] c:"${this.getKey()}" detaches d:"${e.getKey()}"`),e}catch(s){throw L.error(`[DD] c:"${this.getKey()}" err :`,s),await this.handleConnectError(s),s}};if(t.keepalive){this.keepalive=!0;const s=i();return this.keepalive=!1,s}return this.enqueueTask(i)}async attachChannel(e,t={}){if(!this.isActive())throw new T(k.ErrClientNotActivated,`${this.key} is not active`);if(e.getStatus()!==go.Detached)throw new T(k.ErrNotDetached,`${e.getKey()} is not detached`);e.setActor(this.id);const r=async()=>{try{const i=await this.rpcClient.attachChannel({clientId:this.id,channelKey:e.getKey()},{headers:{"x-shard-key":`${this.apiKey}/${e.getFirstKeyPath()}`}});e.setSessionID(i.sessionId),e.updateCount(Number(i.count),0),e.applyStatus(go.Attached);const s=t.isRealtime!==!1?"realtime":"manual",o=new ag(this.reconnectStreamDelay,e,i.sessionId,s);return e.subscribe("local-broadcast",a=>{const{topic:u,payload:c,options:d}=a;this.broadcast(e.getKey(),u,c,d).catch(h=>{d!=null&&d.error&&d.error(h),L.error(`[BC] c:"${this.getKey()}" failed: ${h}`)})}),this.attachmentMap.set(e.getKey(),o),s==="realtime"&&await this.runWatchLoop(e.getKey()),L.info(`[AP] c:"${this.getKey()}" attaches p:"${e.getKey()}" mode:${s} count:${e.getPresenceCount()}`),e}catch(i){throw L.error(`[AP] c:"${this.getKey()}" err :`,i),await this.handleConnectError(i),i}};return this.enqueueTask(r)}async detachChannel(e){if(!this.isActive())throw new T(k.ErrClientNotActivated,`${this.key} is not active`);if(!this.attachmentMap.has(e.getKey()))throw new T(k.ErrNotAttached,`${e.getKey()} is not attached`);const t=async()=>{try{const r=await this.rpcClient.detachChannel({clientId:this.id,channelKey:e.getKey(),sessionId:e.getSessionID()},{headers:{"x-shard-key":`${this.apiKey}/${e.getFirstKeyPath()}`}});return e.updateCount(Number(r.count),0),e.applyStatus(go.Detached),this.detachInternal(e.getKey()),L.info(`[DP] c:"${this.getKey()}" detaches p:"${e.getKey()}" count:${e.getPresenceCount()}`),e}catch(r){throw L.error(`[DP] c:"${this.getKey()}" err :`,r),await this.handleConnectError(r),r}};return this.enqueueTask(t)}async changeSyncMode(e,t){if(!this.isActive())throw new T(k.ErrClientNotActivated,`${this.key} is not active`);const r=this.attachmentMap.get(e.getKey());if(!r)throw new T(k.ErrNotAttached,`${e.getKey()} is not attached`);const i=r.syncMode;return i===t?e:(r.changeSyncMode(t),t==="manual"?(r.cancelWatchStream(),e):(t==="realtime"&&(r.changeEventReceived=!0),i==="manual"&&await this.runWatchLoop(e.getKey()),e))}sync(e){if(!this.isActive())throw new T(k.ErrClientNotActivated,`${this.key} is not active`);if(e instanceof ei){const t=this.attachmentMap.get(e.getKey());if(!t)throw new T(k.ErrNotAttached,`${e.getKey()} is not attached`);return this.enqueueTask(async()=>this.syncInternal(t).catch(async r=>{throw L.error(`[SY] c:"${this.getKey()}" err :`,r),await this.handleConnectError(r),r}))}if(e instanceof si){const t=this.attachmentMap.get(e.getKey());if(!t)throw new T(k.ErrNotAttached,`${e.getKey()} is not attached`);return this.enqueueTask(async()=>this.syncInternal(t,"realtime").catch(async r=>{throw L.error(`[SY] c:"${this.getKey()}" err :`,r),await this.handleConnectError(r),r}))}return this.enqueueTask(async()=>{const t=[];for(const[,r]of this.attachmentMap)r.syncMode!==void 0&&r.resource instanceof si&&t.push(this.syncInternal(r,r.syncMode));return Promise.all(t).catch(async r=>{throw L.error(`[SY] c:"${this.getKey()}" err :`,r),await this.handleConnectError(r),r})})}remove(e){if(!this.isActive())throw new T(k.ErrClientNotActivated,`${this.key} is not active`);const t=this.attachmentMap.get(e.getKey());if(!t)throw new T(k.ErrNotAttached,`${e.getKey()} is not attached`);e.setActor(this.id);const r=de.toChangePack(e.createChangePack());return r.isRemoved=!0,this.enqueueTask(async()=>{try{const i=await this.rpcClient.removeDocument({clientId:this.id,documentId:t.resourceID,changePack:r},{headers:{"x-shard-key":`${this.apiKey}/${e.getKey()}`}}),s=de.fromChangePack(i.changePack);e.applyChangePack(s),this.detachInternal(e.getKey()),L.info(`[RD] c:"${this.getKey()}" removes d:"${e.getKey()}"`)}catch(i){throw L.error(`[RD] c:"${this.getKey()}" err :`,i),await this.handleConnectError(i),i}})}getID(){return this.id}getKey(){return this.key}isActive(){return this.status==="activated"}getStatus(){return this.status}getCondition(e){return this.conditions[e]}async broadcast(e,t,r,i){if(!this.isActive())throw new T(k.ErrClientNotActivated,`${this.key} is not active`);const s=this.attachmentMap.get(e);if(!s)throw new T(k.ErrNotAttached,`${e} is not attached`);if(!aT(r))throw new T(k.ErrInvalidArgument,"payload is not serializable");const o=s.resource,a=(i==null?void 0:i.maxRetries)??sc.maxRetries,u=sc.maxBackoff;let c=0;const d=m=>Math.min(sc.initialRetryInterval*2**m,u),h=async()=>this.enqueueTask(async()=>{try{await this.rpcClient.broadcast({clientId:this.id,channelKey:e,topic:t,payload:new TextEncoder().encode(JSON.stringify(r))},{headers:{"x-shard-key":`${this.apiKey}/${o.getFirstKeyPath()}`}}),L.info(`[BC] c:"${this.getKey()}" broadcasts p:"${e}" t:"${t}"`)}catch(m){if(L.error(`[BC] c:"${this.getKey()}" err:`,m),await this.handleConnectError(m))if(rc(m,k.ErrUnauthenticated)&&s.resource instanceof ei&&s.resource.publish({type:vs.AuthError,reason:mo(m).reason||"unauthenticated",method:"Broadcast"}),c<a)c++,setTimeout(()=>h(),d(c-1)),L.info(`[BC] c:"${this.getKey()}" retry attempt ${c}/${a}`);else throw L.error(`[BC] c:"${this.getKey()}" exceeded maximum retry attempts`),m}});return h()}runSyncLoop(){const e=async()=>{if(!this.isActive()){L.debug(`[SL] c:"${this.getKey()}" exit sync loop`),this.conditions.SyncLoop=!1;return}try{await this.enqueueTask(async()=>{const t=[];for(const[,r]of this.attachmentMap)r.needSync(this.channelHeartbeatInterval)&&(r.changeEventReceived!==void 0&&(r.changeEventReceived=!1),t.push(this.syncInternal(r,r.syncMode).catch(i=>{throw rc(i,k.ErrUnauthenticated)&&r.resource.publish([{type:Ae.AuthError,value:{reason:mo(i).reason,method:"PushPull"}}]),i})));await Promise.all(t),setTimeout(e,this.syncLoopDuration)})}catch(t){L.error(`[SL] c:"${this.getKey()}" sync failed:`,t),await this.handleConnectError(t)?setTimeout(e,this.retrySyncLoopDelay):this.conditions.SyncLoop=!1}};L.debug(`[SL] c:"${this.getKey()}" run sync loop`),this.conditions.SyncLoop=!0,e()}async runWatchLoop(e){const t=this.attachmentMap.get(e);if(!t)throw new T(k.ErrNotAttached,`${e} is not attached`);return this.conditions.WatchLoop=!0,t.runWatchLoop(r=>{if(!this.isActive())return this.conditions.WatchLoop=!1,Promise.reject(new T(k.ErrClientNotActivated,`${this.key} is not active`));if(!this.attachmentMap.has(e))return this.conditions.WatchLoop=!1,Promise.reject(new T(k.ErrNotAttached,`${e} is not attached`));const i=new AbortController;return t.resource instanceof si?this.createDocumentWatchStream(t,e,i,r):t.resource instanceof ei?this.createChannelWatchStream(t,e,i,r):Promise.reject(new T(k.ErrClientNotActivated,`Unknown resource type for ${e}`))})}createDocumentWatchStream(e,t,r,i){const s=this.rpcClient.watchDocument({clientId:this.id,documentId:e.resourceID},{headers:{"x-shard-key":`${this.apiKey}/${t}`},signal:r.signal});return e.resource.publish([{type:Ae.ConnectionChanged,value:Oo.Connected}]),L.info(`[WD] c:"${this.getKey()}" watches d:"${t}"`),e.changeEventReceived!==void 0&&(e.changeEventReceived=!0),new Promise((o,a)=>{(async()=>{try{for await(const c of s)this.handleWatchDocumentResponse(e,c),c.body.case==="initialization"&&o([s,r]);e.resource.resetOnlineClients(),e.resource.publish([{type:Ae.Initialized,source:se.Local,value:e.resource.getPresences()}]),e.resource.publish([{type:Ae.ConnectionChanged,value:Oo.Disconnected}]),L.debug(`[WD] c:"${this.getKey()}" unwatches (stream ended)`),i()}catch(c){e.resource.resetOnlineClients(),e.resource.publish([{type:Ae.Initialized,source:se.Local,value:e.resource.getPresences()}]),e.resource.publish([{type:Ae.ConnectionChanged,value:Oo.Disconnected}]),L.debug(`[WD] c:"${this.getKey()}" unwatches`),await this.handleConnectError(c)?(rc(c,k.ErrUnauthenticated)&&e.resource.publish([{type:Ae.AuthError,value:{reason:mo(c).reason,method:"WatchDocument"}}]),i()):this.conditions.WatchLoop=!1,a(c)}})()})}createChannelWatchStream(e,t,r,i){const s=this.rpcClient.watchChannel({clientId:this.id,channelKey:t},{headers:{"x-shard-key":`${this.apiKey}/${e.resource.getFirstKeyPath()}`},signal:r.signal});return L.info(`[WP] c:"${this.getKey()}" watches p:"${t}"`),new Promise((o,a)=>{(async()=>{try{let c=!0;for await(const d of s)this.handleWatchChannelResponse(e,d),c&&(c=!1,o([s,r]));L.debug(`[WP] c:"${this.getKey()}" p:"${t}" stream ended`),i()}catch(c){if(c instanceof Error&&c.name==="AbortError"){L.debug(`[WP] c:"${this.getKey()}" p:"${t}" stream aborted`);return}L.debug(`[WP] c:"${this.getKey()}" p:"${t}" err:`,c),await this.handleConnectError(c)?i():this.conditions.WatchLoop=!1,a(c)}})()})}handleWatchChannelResponse(e,t){const r=e.resource;if(t.body.case==="initialized"){const{count:i,seq:s}=t.body.value;r.updateCount(Number(i),Number(s))&&r.publish({type:vs.Initialized,count:Number(i)})}else if(t.body.case==="event"){const i=t.body.value;if(i.type===Su.BROADCAST){const s=new TextDecoder;try{const o=JSON.parse(s.decode(i.payload));r.publish({type:vs.Broadcast,clientID:i.publisher,topic:i.topic,payload:o})}catch(o){L.error(`[WP] c:"${this.getKey()}" failed to parse broadcast payload:`,o)}return}r.updateCount(Number(i.count),Number(i.seq))&&r.publish({type:vs.PresenceChanged,count:Number(i.count)})}}handleWatchDocumentResponse(e,t){if(t.body.case==="event"&&t.body.value.type===Ms.DOCUMENT_CHANGED){e.changeEventReceived!==void 0&&(e.changeEventReceived=!0);return}e.resource.applyWatchStream(t)}deactivateInternal(){this.status="deactivated";for(const[e,t]of this.attachmentMap)this.detachInternal(e),t.resource instanceof si?t.resource.applyStatus(Zr.Detached):t.resource instanceof ei&&t.resource.applyStatus(go.Detached)}detachInternal(e){const t=this.attachmentMap.get(e);t&&(t.cancelWatchStream(),t.resource instanceof si&&t.resource.resetOnlineClients(),this.attachmentMap.delete(e))}async syncInternal(e,t){const{resource:r}=e;if(r instanceof ei){try{const a=await this.rpcClient.refreshChannel({clientId:this.id,channelKey:r.getKey(),sessionId:r.getSessionID()},{headers:{"x-shard-key":`${this.apiKey}/${r.getFirstKeyPath()}`}});r.updateCount(Number(a.count),0),e.updateHeartbeatTime(),L.debug(`[RP] c:"${this.getKey()}" refreshes p:"${r.getKey()}" mode:${e.syncMode}`)}catch(a){throw L.error(`[RP] c:"${this.getKey()}" err :`,a),a}return r}const i=r,{resourceID:s}=e,o=i.createChangePack();try{const a=await this.rpcClient.pushPullChanges({clientId:this.id,documentId:s,changePack:de.toChangePack(o),pushOnly:t==="realtime-pushonly"},{headers:{"x-shard-key":`${this.apiKey}/${i.getKey()}`}}),u=de.fromChangePack(a.changePack);if(u.hasChanges()&&(e.syncMode==="realtime-pushonly"||e.syncMode==="realtime-syncoff"))return i;i.applyChangePack(u),e.resource.publish([{type:Ae.SyncStatusChanged,value:Uf.Synced}]),i.getStatus()===Zr.Removed&&this.detachInternal(i.getKey());const c=i.getKey(),d=u.getChangeSize();return L.info(`[PP] c:"${this.getKey()}" sync d:"${c}", push:${o.getChangeSize()} pull:${d} cp:${u.getCheckpoint().toTestString()}`),i}catch(a){throw i.publish([{type:Ae.SyncStatusChanged,value:Uf.SyncFailed}]),L.error(`[PP] c:"${this.getKey()}" err :`,a),a}}async handleConnectError(e){if(!(e instanceof ee))return!1;if(e.code===W.Canceled||e.code===W.Unknown||e.code===W.ResourceExhausted||e.code===W.Unavailable)return!0;if(rs(e)===k.ErrUnauthenticated){if(this.authTokenInjector){const t=await this.authTokenInjector(mo(e).reason);this.setAuthToken(t)}return!0}return rs(e)===k.ErrTooManySubscribers?(L.error(`[WD] c:"${this.getKey()}" err :`,e.rawMessage),!0):(rs(e)===k.ErrTooManyAttachments||(rs(e)===k.ErrClientNotActivated||rs(e)===k.ErrClientNotFound)&&this.deactivateInternal(),!1)}enqueueTask(e){return new Promise((t,r)=>{this.taskQueue.push(()=>e().then(t).catch(r)),this.processing||this.processNext()})}async processNext(){if(this.taskQueue.length===0){this.processing=!1;return}try{this.processing=!0,await this.taskQueue.shift()()}catch{L.error(`[TQ] c:"${this.getKey()}" process failed, id:"${this.id}"`)}this.processNext()}}mn.Int,mn.Long;typeof globalThis<"u"&&(globalThis.yorkie={Client:Lv,Document:si,Primitive:le,Text:Zd,Counter:eh,Tree:rh,Channel:ei,ChannelEventType:vs,LogLevel:He,setLogLevel:$k,IntType:mn.Int,LongType:mn.Long});const lT="@yorkie-js/react",uT="0.6.36",ug={name:lT,version:uT},Rv=j.createContext({client:void 0,loading:!0,error:void 0});function cT(n){const[e,t]=j.useState(void 0),[r,i]=j.useState(!0),[s,o]=j.useState(void 0),[a,u]=j.useState(!1);return j.useEffect(()=>{u(!0)},[]),j.useEffect(()=>{i(!0),o(void 0);async function c(){if(a)try{const d=new Lv(n);await d.activate(),t(d)}catch(d){o(d instanceof Error?d:new Error("Failed to activate client"))}finally{i(!1)}}return c(),()=>{e!=null&&e.isActive()&&e.deactivate({keepalive:!0})}},[n.apiKey,n.rpcAddr,a]),{client:e,loading:r,error:s}}const fT=({children:n,...e})=>{const t=j.useMemo(()=>({userAgent:ug.name+"/"+ug.version,...e}),[e.apiKey,e.rpcAddr]),{client:r,loading:i,error:s}=cT(t);return z.jsx(Rv.Provider,{value:{client:r,loading:i,error:s},children:n})},dT=()=>{const n=j.useContext(Rv);if(!n)throw new Error("useYorkie must be used under YorkieProvider");return{client:n.client,loading:n.loading,error:n.error}};function hT(n){const e=new Set;let t=n;const r=()=>{e.forEach(u=>u(t))};return{subscribe:u=>(e.add(u),()=>e.delete(u)),getSnapshot:()=>t,setState:u=>{const c=t;t=typeof u=="function"?u(c):u,c!==t&&r()},destroy:()=>{e.clear()}}}const mT=n=>hT(n);function gT(n,e,t=Object.is){const r=j.useRef(e),i=j.useRef(t),s=j.useRef(void 0);r.current=e,i.current=t;const o=()=>{const a=n.getSnapshot(),u=r.current?r.current(a):a;return s.current!==void 0&&i.current(s.current,u)?s.current:(s.current=u,u)};return j.useSyncExternalStore(n.subscribe,o,o)}function pT(n,e,t,r,i,s,o){const a=j.useRef(i),u=j.useRef(s),[c,d]=j.useState(!1);j.useEffect(()=>{d(!0)},[]),j.useEffect(()=>{if(t){o.setState(y=>({...y,loading:!1,error:t}));return}if(!n||e||!c){o.setState(y=>({...y,loading:!0}));return}o.setState(y=>({...y,loading:!0,error:void 0}));const h=new si(r),m=[];m.push(h.subscribe(()=>{o.setState(y=>({...y,root:h.getRoot()}))})),m.push(h.subscribe("presence",()=>{o.setState(y=>({...y,presences:h.getPresences()}))})),m.push(h.subscribe("connection",y=>{o.setState(w=>({...w,connection:y.value}))}));async function p(){try{await(n==null?void 0:n.attach(h,{initialRoot:a.current,initialPresence:u.current}));const y=w=>{try{h.update(w)}catch(A){o.setState(v=>({...v,error:A instanceof Error?A:new Error("Failed to update document")}))}};o.setState(w=>({...w,doc:h,root:h.getRoot(),presences:h.getPresences(),update:y}))}catch(y){o.setState(w=>({...w,error:y instanceof Error?y:new Error("Failed to attach document")}))}finally{o.setState(y=>({...y,loading:!1}))}}return p(),()=>{n&&n.has(r)&&n.detach(h);for(const y of m)y()}},[n,e,t,r,o,c])}const Bv=j.createContext(void 0),yT=({docKey:n,initialRoot:e={},initialPresence:t={},children:r})=>{const{client:i,loading:s,error:o}=dT(),a=j.useRef(void 0);a.current||(a.current=mT({doc:void 0,root:e,presences:[],connection:Oo.Disconnected,update:()=>{},loading:!0,error:void 0}));const u=a.current;return pT(i,s,o,n,e,t,u),z.jsx(Bv.Provider,{value:u,children:r})};function vT(){const n=j.useContext(Bv);if(!n)throw new Error("useDocument must be used within a DocumentProvider");return gT(n)}j.createContext(void 0);class cg{constructor(e,t){this.x=e,this.y=t,this.lifetime=0}}function jf(n,e){if(n.length<3)return n;let t=0,r=0;const[i,s]=[n[0],n[n.length-1]],o=s.x-i.x,a=s.y-i.y,u=Math.hypot(o,a)||1;for(let c=1;c<n.length-1;c++){const d=n[c],h=Math.abs(a*d.x-o*d.y+s.x*i.y-s.y*i.x)/u;h>t&&(t=h,r=c)}if(t>e){const c=jf(n.slice(0,r+1),e),d=jf(n.slice(r),e);return c.slice(0,-1).concat(d)}return[i,s]}function wT(n,e){const[t,r,i,s]=n,o=e*e,a=o*e;return{x:.5*(2*r.x+(-t.x+i.x)*e+(2*t.x-5*r.x+4*i.x-s.x)*o+(-t.x+3*r.x-3*i.x+s.x)*a),y:.5*(2*r.y+(-t.y+i.y)*e+(2*t.y-5*r.y+4*i.y-s.y)*o+(-t.y+3*r.y-3*i.y+s.y)*a)}}function ST(n,e,t,r,i,s){const o=i-t,a=s-r,u=n-t,c=e-r,d=o*o+a*a||1;let h=(u*o+c*a)/d;h<0?h=0:h>1&&(h=1);const m=t+h*o,p=r+h*a;return Math.hypot(n-m,e-p)}const fg=6;function kT({xPos:n,yPos:e,tool:t="pen",color:r="black",maxTrail:i=128,rdpEpsilon:s=0,splineStep:o=.019,pointerDown:a=!1,visible:u=!0,resetNonce:c=0}){const d=j.useRef(null),h=j.useRef([]),m=j.useRef(!1),p=j.useRef({x:null,y:null});return j.useEffect(()=>{var w;const y=(w=d.current)==null?void 0:w.getContext("2d");y&&(h.current=[],y.clearRect(0,0,y.canvas.width,y.canvas.height),m.current=!1,p.current={x:null,y:null})},[c]),j.useEffect(()=>{if(!a){m.current=!1,p.current={x:null,y:null};return}if(t==="eraser"){h.current=h.current.filter(g=>{const S=g.points;if(S.length<2)return!0;const I=Math.max(g.width,fg)*.75;for(let N=1;N<S.length;N++){const x=S[N-1],C=S[N],O=Math.min(x.x,C.x)-I,M=Math.max(x.x,C.x)+I,J=Math.min(x.y,C.y)-I,me=Math.max(x.y,C.y)+I;if(!(n<O||n>M||e<J||e>me)&&ST(n,e,x.x,x.y,C.x,C.y)<=I)return!1}return!0});return}if(!m.current){const g=new cg(n,e);t==="fading"&&(g.age=0),h.current.push({tool:t,color:r,width:fg,points:[g]}),m.current=!0,p.current={x:n,y:e};return}const y=p.current,w=n-y.x,A=e-y.y,v=Math.hypot(w,A);if(v>0){const g=Math.ceil(v/15),S=h.current.at(-1);for(let I=1;I<=g;I++){const N=I/g,x=y.x+w*N,C=y.y+A*N,O=new cg(x,C);S.tool==="eraser"&&(O.erase=!0),S.tool==="fading"&&(O.age=0),S.points.push(O)}p.current={x:n,y:e}}},[n,e,t,a]),j.useEffect(()=>{const y=d.current,w=y.getContext("2d"),A=window.devicePixelRatio||1;y.width=window.innerWidth*A,y.height=window.innerHeight*A,y.style.width=`${window.innerWidth}px`,y.style.height=`${window.innerHeight}px`,w.setTransform(A,0,0,A,0,0)},[]),j.useEffect(()=>{var S;if(!u){const I=(S=d.current)==null?void 0:S.getContext("2d");I&&I.clearRect(0,0,I.canvas.width,I.canvas.height);return}const y=d.current,w=y.getContext("2d");let A,v=!0;function g(){v&&(w.clearRect(0,0,y.width,y.height),h.current.forEach(I=>{let N=I.points;if(I.tool==="fading"&&(N=I.points=N.map(C=>(C.age++,C)).filter(C=>C.age<i)),N.length<2)return;const x=jf(N,s);if(w.save(),w.lineWidth=I.width,w.lineCap="round",w.lineJoin="round",I.tool==="eraser"?(w.globalCompositeOperation="destination-out",w.strokeStyle="rgba(0,0,0,1)",w.globalAlpha=1):(w.globalCompositeOperation="source-over",w.strokeStyle=I.color,w.globalAlpha=I.tool==="highlighter"?.3:1),x.length>=4){w.beginPath(),w.moveTo(x[0].x,x[0].y);for(let C=0;C<=x.length-4;C++)for(let O=0;O<=1;O+=o){const M=wT([x[C],x[C+1],x[C+2],x[C+3]],O);w.lineTo(M.x,M.y)}w.lineTo(x.at(-1).x,x.at(-1).y),w.stroke(),w.closePath()}else w.beginPath(),w.moveTo(x[0].x,x[0].y),x.slice(1).forEach(C=>w.lineTo(C.x,C.y)),w.stroke(),w.closePath();if(w.restore(),I.tool==="pencil"){w.save(),w.strokeStyle=I.color,w.lineWidth=Math.max(1,I.width*.5),w.globalAlpha=.6;const C=.3;for(let O=1;O<x.length;O++){if(Math.random()>C)continue;const M=x[O],J=x[O-1],me=M.x-J.x,tt=M.y-J.y,Ne=Math.atan2(tt,me)+(Math.random()-.5)*.8,Ci=I.width*(.8+Math.random()*.4),Au=M.x+Math.cos(Ne)*Ci/2,Ys=M.y+Math.sin(Ne)*Ci/2,Xs=M.x-Math.cos(Ne)*Ci/2,R=M.y-Math.sin(Ne)*Ci/2;w.beginPath(),w.moveTo(Au,Ys),w.lineTo(Xs,R),w.stroke(),w.closePath()}w.restore()}}),A=requestAnimationFrame(g))}return g(),()=>{v=!1,A&&cancelAnimationFrame(A)}},[i,s,o,u]),z.jsx("canvas",{ref:d,style:{position:"fixed",left:0,top:0,pointerEvents:"none",zIndex:1e4,display:u?"block":"none"}})}const TT="_goUp0_1lnal_1",IT="_goUpAnimation0_1lnal_1",xT="_fadeOut_1lnal_1",AT="_goUp1_1lnal_16",ET="_goUpAnimation1_1lnal_1",CT="_goUp2_1lnal_31",NT="_goUpAnimation2_1lnal_1",PT="_leftRight0_1lnal_46",DT="_leftRightAnimation0_1lnal_1",bT="_leftRight1_1lnal_60",OT="_leftRightAnimation1_1lnal_1",LT="_leftRight2_1lnal_74",RT="_leftRightAnimation2_1lnal_1",oc={goUp0:TT,goUpAnimation0:IT,fadeOut:xT,goUp1:AT,goUpAnimation1:ET,goUp2:CT,goUpAnimation2:NT,leftRight0:PT,leftRightAnimation0:DT,leftRight1:bT,leftRightAnimation1:OT,leftRight2:LT,leftRightAnimation2:RT};function BT({x:n,y:e,timestamp:t,selectedCursorShape:r}){return z.jsx("div",{className:"single-animation-container",children:z.jsx("div",{className:`absolute select-none pointer-events-none ${oc.disappear} text-${t%5+2}xl ${oc["goUp"+t%3]}`,style:{left:n,top:e},children:z.jsx("div",{className:oc["leftRight"+t%3],children:z.jsx("div",{className:"transform -translate-x-1/2 -translate-y-full",children:z.jsx("img",{src:`./icons/icon_${r}.svg`})})})})})}function dg(n,e){const t=j.useRef(n);j.useEffect(()=>{t.current=n},[n]),j.useEffect(()=>{function r(){t.current()}if(e!==null){let i=setInterval(r,e);return()=>clearInterval(i)}},[e])}function zT({pointerDown:n,xPos:e,yPos:t,selectedCursorShape:r}){const[i,s]=j.useState([]),o=100;return dg(()=>{s(a=>a.filter(u=>u.timestamp>Date.now()-4e3))},1e3),dg(()=>{n&&s(a=>a.concat([{point:{x:e,y:t},timestamp:Date.now()}]))},o),z.jsx("div",{style:{transform:`translateX(${e-30}px) translateY(${t-40}px)`},children:i.map(a=>z.jsx(BT,{x:a.point.x,y:a.point.y,timestamp:a.timestamp,selectedCursorShape:r},a.timestamp.toString()))})}function MT({type:n,color:e}){switch(n){case"cursor":return z.jsxs("svg",{width:"36",height:"36",viewBox:"0 0 36 36",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[z.jsx("rect",{width:"36",height:"36",rx:"8",fill:"none"}),z.jsx("path",{d:"M26.83 16.1571C27.5067 15.8939 27.845 15.7624 27.94 15.5763C28.0223 15.4151 28.0198 15.2237 27.9333 15.0648C27.8335 14.8813 27.4918 14.7586 26.8084 14.5133L9.379 8.2566C8.81992 8.0559 8.54037 7.95556 8.35762 8.01884C8.19874 8.07387 8.07387 8.19873 8.01884 8.35762C7.95556 8.54037 8.0559 8.81992 8.2566 9.379L14.5133 26.8085C14.7586 27.4918 14.8812 27.8335 15.0647 27.9333C15.2237 28.0198 15.4151 28.0224 15.5763 27.9401C15.7623 27.8451 15.8939 27.5067 16.1571 26.83L19.0055 19.5054C19.0571 19.3728 19.0829 19.3065 19.1227 19.2507C19.1579 19.2013 19.2012 19.158 19.2507 19.1227C19.3065 19.0829 19.3728 19.0571 19.5053 19.0056L26.83 16.1571Z",fill:e,stroke:"#FEFDFB",strokeWidth:"0.5",strokeLinecap:"round",strokeLinejoin:"round"})]});case"pen":case"fading":return z.jsxs("svg",{width:"36",height:"36",viewBox:"0 0 36 36",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[z.jsx("rect",{width:"36",height:"36",rx:"8",fill:"none"}),z.jsxs("g",{clipPath:"url(#clip0_pen_colored)",children:[z.jsx("path",{d:"M9.73233 23.3904C9.5808 25.0085 10.7676 26.444 12.3854 26.5994C12.9205 26.6508 13.4605 26.5868 13.9688 26.4116L19.4305 24.5293C19.7215 24.429 19.9921 24.2771 20.2294 24.081L29.278 16.6002C29.8655 16.1145 30.0216 15.2781 29.6488 14.6132C28.3855 12.3598 26.7262 10.3528 24.7505 8.68832C24.1676 8.19717 23.3167 8.19323 22.7292 8.67897L13.6806 16.1597C13.4434 16.3559 13.2433 16.5931 13.0901 16.8602L10.2145 21.8705C9.94688 22.3368 9.78246 22.8551 9.73233 23.3904Z",fill:e,stroke:"#FEFDFB",strokeWidth:"0.5"}),z.jsx("path",{d:"M12.8764 26.3737C12.6642 26.5735 12.5267 26.6302 12.3106 26.7193C11.5383 27.0378 10.9542 27.2786 10.5095 27.4286C10.0767 27.5745 9.71876 27.6564 9.43664 27.5928C8.73307 27.4343 8.22552 26.8204 8.20212 26.0996C8.19273 25.8105 8.34043 25.4743 8.56515 25.0767C8.79602 24.6682 9.14239 24.1397 9.59453 23.45C9.72852 23.2455 9.81002 23.1212 10.0462 22.9503C10.1856 22.8495 10.4138 22.772 10.6132 22.7243C10.8125 22.6765 11.0511 22.6423 11.221 22.6691C11.4774 22.7182 12.3182 23.2516 12.6629 23.6686C13.0076 24.0856 13.2168 24.4982 13.342 24.8621C13.2168 24.4982 13.0076 24.0856 12.6629 23.6686",fill:e,stroke:"#FEFDFB",strokeWidth:"0.5"}),z.jsx("path",{d:"M19.5496 20.8585C19.0985 21.2314 18.4197 21.1031 18.1358 20.5913C17.7721 19.9354 17.2902 19.3524 16.7144 18.8719C16.2651 18.4969 16.2666 17.806 16.7177 17.4331L23.7284 11.6371C24.0468 11.3739 24.2059 11.2424 24.36 11.1593C24.9929 10.818 25.7691 10.8916 26.3266 11.3458C26.4623 11.4564 26.5939 11.6156 26.857 11.9339C27.1202 12.2522 27.2518 12.4114 27.3349 12.5655C27.6762 13.1984 27.6026 13.9746 27.1484 14.532C27.0378 14.6678 26.8787 14.7994 26.5603 15.0626L19.5496 20.8585Z",fill:"#FEFDFB"})]}),z.jsx("defs",{children:z.jsx("clipPath",{id:"clip0_pen_colored",children:z.jsx("rect",{width:"16.8889",height:"32",fill:"white",transform:"translate(11 36) rotate(-129.582)"})})})]});case"line":return z.jsx("svg",{width:"22",height:"23",viewBox:"0 0 22 23",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:z.jsx("path",{d:"M7.95167 5.6812C3.39223 10.5957 2.69919 11.4214 2.79038 11.8145C2.88157 12.188 2.64448 12.5615 1.45902 13.8786L0 15.4906V16.5521C0 17.8103 0.364756 18.4393 2.1703 20.3462L3.30104 21.5256L2.06087 21.6239C1.05779 21.7026 0.8207 21.7812 0.765987 22.0761C0.601847 22.9803 0.711274 23 7.93344 23C15.1556 23 15.265 22.9803 15.1009 22.0761C15.0462 21.7615 14.7726 21.7222 12.4199 21.6632L9.79369 21.6043L10.2132 21.1325C10.505 20.7983 10.7603 20.6803 11.1068 20.759C11.5263 20.8376 12.1464 20.2479 16.8517 15.1761C21.0099 10.6744 22.086 9.41624 21.9948 9.12137C21.8489 8.5906 13.8242 0 13.4777 0C13.3318 0 10.8515 2.55555 7.95167 5.6812ZM15.8669 14.2521L11.3074 19.1667L8.62647 16.2769L5.92728 13.3675L9.10065 9.94701C11.964 6.84103 12.2376 6.48718 12.0552 6.11368C11.9275 5.87778 11.7087 5.70085 11.5263 5.70085C11.3621 5.70085 9.81193 7.21453 8.11581 9.04273L4.99715 12.4043L4.65063 11.9915C4.30412 11.5786 4.32235 11.559 8.84532 6.68376L13.4048 1.76923L16.9064 5.54359L20.4263 9.33761L15.8669 14.2521ZM6.87564 16.3556C8.40762 18.0068 9.66602 19.4419 9.66602 19.5598C9.66602 19.6581 9.28303 20.1692 8.80885 20.6803L7.95167 21.6239H6.67503H5.38015L3.33751 19.4222C0.765987 16.6504 0.747749 16.5915 2.49858 14.7043C3.17337 13.9573 3.8117 13.3675 3.92112 13.3675C4.01231 13.3675 5.34367 14.7239 6.87564 16.3556Z",fill:e})});case"highlighter":return z.jsxs("svg",{width:"23",height:"24",viewBox:"0 0 23 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[z.jsx("path",{d:"M17.9456 0.210907C17.7178 0.338861 14.6852 3.63367 11.2255 7.53625C6.41316 12.9423 4.91821 14.7176 4.91821 15.0215C4.91821 15.2934 5.50196 16.0612 7.08233 17.8525C8.93322 19.9477 9.31764 20.2996 9.68781 20.2996C10.058 20.2996 10.8695 19.4519 16.3937 13.2142C19.8535 9.3276 22.7579 5.98481 22.8434 5.79288C22.9288 5.60095 23 5.1851 23 4.84922C23 4.30542 22.8576 4.0975 21.3342 2.35413C19.2128 -0.0769892 18.8996 -0.268919 17.9456 0.210907ZM14.5286 12.1426L12.6777 14.2218L11.5387 12.9423L10.3997 11.6628L12.2506 9.58351L14.1015 7.50426L15.2405 8.7838L16.3795 10.0633L14.5286 12.1426Z",fill:e}),z.jsx("path",{d:"M3.63688 17.4527C3.20975 18.2684 2.73991 19.2121 2.58329 19.5319L2.2843 20.1397L3.7223 21.7551L5.1603 23.3705L7.03967 22.123L8.91903 20.8914L6.74068 18.4283C5.54472 17.0848 4.51961 15.9812 4.4769 15.9812C4.43418 15.9812 4.04977 16.653 3.63688 17.4527Z",fill:e,opacity:.85})]});default:return z.jsx("img",{src:`./icons/icon_${n}.svg`,alt:n,style:{display:"block"}})}}function $T({selectedCursorShape:n,x:e,y:t,pointerDown:r,fadeEnabled:i,color:s,visible:o=!0,resetNonce:a=0,overInteractive:u=!1,animate:c=!0}){const d=n,h=i&&d==="pen"?"fading":d,m=n==="pen"&&i?"fading":n==="eraser"?"line":n,p=["pen","highlighter","eraser","fading"],A={pen:{w:36,h:36,tipX:18,tipY:38},highlighter:{w:23,h:24,tipX:5,tipY:-8}}[m==="fading"?"pen":m],g=!!A?`translate(${-(A.w/2)+A.tipX}px, ${-A.h+A.tipY}px)`:"translate(-50%, -100%)";return z.jsxs(z.Fragment,{children:[!u&&z.jsx("div",{className:`${n}-cursor${c?" animated-remote-cursor":""}`,style:{position:"fixed",transform:`translate3d(${e}px, ${t}px, 0) ${g}`,pointerEvents:"none",zIndex:10001},children:z.jsx(MT,{type:m,color:s})}),(n==="heart"||n==="thumbs")&&z.jsx(zT,{pointerDown:r,xPos:e,yPos:t,selectedCursorShape:n}),p.includes(h)&&z.jsx(kT,{xPos:e,yPos:t,tool:h,color:s,pointerDown:r,visible:o,resetNonce:a})]})}function FT({handleCursorShapeSelect:n,clientsLength:e,fadeEnabled:t,onFadeSet:r,color:i,onColorChange:s}){const[o,a]=j.useState("cursor"),[u,c]=j.useState(!1),d=j.useRef(null),h=["heart","thumbs","pen","cursor"],m=y=>{if(y==="pen"){r(!1),a("pen"),n("pen"),c(!0);return}a(y),n(y),c(!1)},p=y=>{a(y),n(y)};return z.jsxs(z.Fragment,{children:[u&&z.jsxs("div",{className:"yc-panel yc-draw-tools yc-fade-in",onMouseDown:y=>y.stopPropagation(),onMouseUp:y=>y.stopPropagation(),"data-native-cursor":!0,children:[z.jsx("button",{className:"yc-close-btn",onClick:()=>{c(!1)},title:"Close","data-native-cursor":!0,children:""}),[{key:"pen",icon:"pen"},{key:"fading",icon:"fading"},{key:"highlighter",icon:"highlighter"}].map(y=>{const w=y.icon==="pen"?o==="pen"&&!t:y.icon==="fading"?o==="pen"&&t:o===y.icon;return z.jsx("button",{className:"yc-tool-icon","data-selected":w,"data-faded":!w,"data-native-cursor":!0,title:y.icon==="fading"?"Fading Pen":y.icon.charAt(0).toUpperCase()+y.icon.slice(1),onClick:()=>{y.icon==="pen"?(r(!1),p("pen")):y.icon==="fading"?(r(!0),p("pen")):(r(!1),p(y.icon))},children:z.jsx("img",{src:`./icons/icon_${y.icon}.svg`,alt:y.icon})},y.key)}),z.jsx("button",{ref:d,className:"yc-tool-icon","data-selected":o==="eraser","data-faded":o!=="eraser","data-native-cursor":!0,title:"Eraser (line erase)",onClick:()=>{r(!1),p("eraser")},children:z.jsx("img",{src:"./icons/icon_eraser.svg",alt:"Eraser"})}),z.jsx("input",{type:"color",className:"yc-color-chip",value:i,"aria-label":"Color",title:"Color",onChange:y=>s(y.target.value),"data-native-cursor":!0,onMouseDown:y=>y.stopPropagation(),onMouseUp:y=>y.stopPropagation()})]}),z.jsxs("div",{className:"yc-combined-bar","data-native-cursor":!0,children:[z.jsx("div",{className:"yc-combined-icons",role:"toolbar","aria-label":"Cursor selector","data-native-cursor":!0,children:h.map(y=>{const w=y==="pen"?["pen","highlighter","eraser"].includes(o):o===y;return z.jsx("button",{className:"yc-nav-btn","data-selected":w,onClick:()=>m(y),title:y,"aria-pressed":w,"data-native-cursor":!0,children:z.jsx("img",{src:`./icons/icon_${y}.svg`,alt:`${y} cursor`,style:{filter:w?"brightness(0) invert(1)":"none"}})},y)})}),z.jsx("div",{className:"yc-divider","aria-hidden":"true","data-native-cursor":!0}),z.jsxs("div",{className:"yc-count-pill","data-native-cursor":!0,title:`${e} user${e===1?"":"s"} online`,"aria-label":`${e} user${e===1?"":"s"} online`,children:[z.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:z.jsx("path",{fill:"currentColor",d:"M12 12.75c2.899 0 5.25-2.351 5.25-5.25S14.899 2.25 12 2.25 6.75 4.601 6.75 7.5 9.101 12.75 12 12.75Zm0 1.5c-3.005 0-9 1.51-9 4.5v.75a.75.75 0 0 0 .75.75h16.5a.75.75 0 0 0 .75-.75v-.75c0-2.99-5.995-4.5-9-4.5Z"})}),z.jsx("span",{children:e})]})]})]})}function JT(){const n=Math.floor(Math.random()*360),e=70,t=55,r=p=>p.toString(16).padStart(2,"0"),i=(1-Math.abs(2*t/100-1))*(e/100),s=i*(1-Math.abs(n/60%2-1)),o=t/100-i/2;let a,u,c;n<60?[a,u,c]=[i,s,0]:n<120?[a,u,c]=[s,i,0]:n<180?[a,u,c]=[0,i,s]:n<240?[a,u,c]=[0,s,i]:n<300?[a,u,c]=[s,0,i]:[a,u,c]=[i,0,s];const d=Math.round((a+o)*255),h=Math.round((u+o)*255),m=Math.round((c+o)*255);return`#${r(d)}${r(h)}${r(m)}`}const Vf={cursorShape:"cursor",cursor:{xPos:0,yPos:0},pointerDown:!1,color:JT(),fadeEnabled:!1,overInteractive:!1},UT=2;function jT(){const{doc:n,presences:e,update:t,loading:r,error:i}=vT(),[s,o]=j.useState(!1),[a,u]=j.useState(Vf.color),c=j.useRef(null),d=j.useRef(null),h=j.useRef({x:0,y:0}),m=j.useRef(!1),p=A=>{t((v,g)=>g.set({cursorShape:A}))},y=A=>{o(A),t((v,g)=>g.set({fadeEnabled:A}))},w=A=>{u(A),t((v,g)=>g.set({color:A}))};return j.useEffect(()=>{if(r||i)return;const A='button, input, select, textarea, [role="button"], a, [data-native-cursor]',v=()=>{m.current=!0,t((x,C)=>C.set({pointerDown:!0}))},g=()=>{m.current=!1,t((x,C)=>C.set({pointerDown:!1}))},S=x=>{const C=!!(x.target.closest&&x.target.closest(A));d.current={x:x.clientX,y:x.clientY,overInteractive:C}};let I;const N=()=>{const x=d.current;if(x){const C=h.current,O=x.x-C.x,M=x.y-C.y,J=Math.hypot(O,M);(m.current||J>=UT)&&(h.current={x:x.x,y:x.y},t((tt,Ne)=>Ne.set({cursor:{xPos:x.x,yPos:x.y},overInteractive:x.overInteractive}))),d.current=null}I=requestAnimationFrame(N)};return I=requestAnimationFrame(N),window.addEventListener("mousedown",v),window.addEventListener("mouseup",g),window.addEventListener("mousemove",S),()=>{cancelAnimationFrame(I),window.removeEventListener("mousedown",v),window.removeEventListener("mouseup",g),window.removeEventListener("mousemove",S)}},[r,i,t]),j.useEffect(()=>{var v;if(!n)return;const A=(v=n.getMyPresence)==null?void 0:v.call(n);A&&(o(A.fadeEnabled??!1),u(A.color??Vf.color))},[e,n]),r?z.jsx("div",{className:"general-container",children:"Loading..."}):i?z.jsxs("div",{className:"general-container",children:["Error: ",i.message]}):z.jsxs("div",{className:"general-container",onMouseDown:A=>{const v=A.target.tagName;["INPUT","SELECT","TEXTAREA","BUTTON"].includes(v)||A.preventDefault()},children:[e.map(({clientID:A,presence:v},g)=>{const{cursorShape:S,cursor:I,pointerDown:N,color:x="#000000",fadeEnabled:C=!1,overInteractive:O=!1}=v;g===0&&c.current===null&&(c.current=A);const M=A===c.current;return I&&z.jsx($T,{selectedCursorShape:S,x:I.xPos,y:I.yPos,pointerDown:N,fadeEnabled:C,color:x,overInteractive:O,animate:!M},A)}),z.jsx(FT,{handleCursorShapeSelect:p,clientsLength:e.length,fadeEnabled:s,onFadeSet:y,color:a,onColorChange:w})]})}function VT(){return z.jsx(fT,{apiKey:"D6sd9E5ehtXBssmeRZ4QQP",rpcAddr:"https://api.yorkie.dev",children:z.jsx(yT,{docKey:"simultaneous-cursors",initialPresence:Vf,children:z.jsx(jT,{})})})}ac.createRoot(document.getElementById("root")).render(z.jsx(j.StrictMode,{children:z.jsx(VT,{})}));
