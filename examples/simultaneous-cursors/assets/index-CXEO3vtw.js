var My=Object.defineProperty;var Fy=(n,e,t)=>e in n?My(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var l=(n,e,t)=>Fy(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();var gg={exports:{}},kl={},mg={exports:{}},K={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var No=Symbol.for("react.element"),Jy=Symbol.for("react.portal"),$y=Symbol.for("react.fragment"),zy=Symbol.for("react.strict_mode"),Uy=Symbol.for("react.profiler"),jy=Symbol.for("react.provider"),Vy=Symbol.for("react.context"),qy=Symbol.for("react.forward_ref"),Ky=Symbol.for("react.suspense"),Wy=Symbol.for("react.memo"),_y=Symbol.for("react.lazy"),md=Symbol.iterator;function Hy(n){return n===null||typeof n!="object"?null:(n=md&&n[md]||n["@@iterator"],typeof n=="function"?n:null)}var pg={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},yg=Object.assign,vg={};function Ss(n,e,t){this.props=n,this.context=e,this.refs=vg,this.updater=t||pg}Ss.prototype.isReactComponent={};Ss.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};Ss.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function wg(){}wg.prototype=Ss.prototype;function Qc(n,e,t){this.props=n,this.context=e,this.refs=vg,this.updater=t||pg}var Xc=Qc.prototype=new wg;Xc.constructor=Qc;yg(Xc,Ss.prototype);Xc.isPureReactComponent=!0;var pd=Array.isArray,Sg=Object.prototype.hasOwnProperty,Zc={current:null},kg={key:!0,ref:!0,__self:!0,__source:!0};function Tg(n,e,t){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Sg.call(e,r)&&!kg.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=t;else if(1<a){for(var u=Array(a),c=0;c<a;c++)u[c]=arguments[c+2];i.children=u}if(n&&n.defaultProps)for(r in a=n.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:No,type:n,key:s,ref:o,props:i,_owner:Zc.current}}function Gy(n,e){return{$$typeof:No,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function ef(n){return typeof n=="object"&&n!==null&&n.$$typeof===No}function Yy(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var yd=/\/+/g;function Wl(n,e){return typeof n=="object"&&n!==null&&n.key!=null?Yy(""+n.key):e.toString(36)}function la(n,e,t,r,i){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case No:case Jy:o=!0}}if(o)return o=n,i=i(o),n=r===""?"."+Wl(o,0):r,pd(i)?(t="",n!=null&&(t=n.replace(yd,"$&/")+"/"),la(i,e,t,"",function(c){return c})):i!=null&&(ef(i)&&(i=Gy(i,t+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(yd,"$&/")+"/")+n)),e.push(i)),1;if(o=0,r=r===""?".":r+":",pd(n))for(var a=0;a<n.length;a++){s=n[a];var u=r+Wl(s,a);o+=la(s,e,t,u,i)}else if(u=Hy(n),typeof u=="function")for(n=u.call(n),a=0;!(s=n.next()).done;)s=s.value,u=r+Wl(s,a++),o+=la(s,e,t,u,i);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function zo(n,e,t){if(n==null)return n;var r=[],i=0;return la(n,r,"","",function(s){return e.call(t,s,i++)}),r}function Qy(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Je={current:null},ua={transition:null},Xy={ReactCurrentDispatcher:Je,ReactCurrentBatchConfig:ua,ReactCurrentOwner:Zc};K.Children={map:zo,forEach:function(n,e,t){zo(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return zo(n,function(){e++}),e},toArray:function(n){return zo(n,function(e){return e})||[]},only:function(n){if(!ef(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};K.Component=Ss;K.Fragment=$y;K.Profiler=Uy;K.PureComponent=Qc;K.StrictMode=zy;K.Suspense=Ky;K.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Xy;K.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=yg({},n.props),i=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Zc.current),e.key!==void 0&&(i=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(u in e)Sg.call(e,u)&&!kg.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&a!==void 0?a[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=t;else if(1<u){a=Array(u);for(var c=0;c<u;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:No,type:n.type,key:i,ref:s,props:r,_owner:o}};K.createContext=function(n){return n={$$typeof:Vy,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:jy,_context:n},n.Consumer=n};K.createElement=Tg;K.createFactory=function(n){var e=Tg.bind(null,n);return e.type=n,e};K.createRef=function(){return{current:null}};K.forwardRef=function(n){return{$$typeof:qy,render:n}};K.isValidElement=ef;K.lazy=function(n){return{$$typeof:_y,_payload:{_status:-1,_result:n},_init:Qy}};K.memo=function(n,e){return{$$typeof:Wy,type:n,compare:e===void 0?null:e}};K.startTransition=function(n){var e=ua.transition;ua.transition={};try{n()}finally{ua.transition=e}};K.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};K.useCallback=function(n,e){return Je.current.useCallback(n,e)};K.useContext=function(n){return Je.current.useContext(n)};K.useDebugValue=function(){};K.useDeferredValue=function(n){return Je.current.useDeferredValue(n)};K.useEffect=function(n,e){return Je.current.useEffect(n,e)};K.useId=function(){return Je.current.useId()};K.useImperativeHandle=function(n,e,t){return Je.current.useImperativeHandle(n,e,t)};K.useInsertionEffect=function(n,e){return Je.current.useInsertionEffect(n,e)};K.useLayoutEffect=function(n,e){return Je.current.useLayoutEffect(n,e)};K.useMemo=function(n,e){return Je.current.useMemo(n,e)};K.useReducer=function(n,e,t){return Je.current.useReducer(n,e,t)};K.useRef=function(n){return Je.current.useRef(n)};K.useState=function(n){return Je.current.useState(n)};K.useSyncExternalStore=function(n,e,t){return Je.current.useSyncExternalStore(n,e,t)};K.useTransition=function(){return Je.current.useTransition()};K.version="18.2.0";mg.exports=K;var je=mg.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zy=je,ev=Symbol.for("react.element"),tv=Symbol.for("react.fragment"),nv=Object.prototype.hasOwnProperty,rv=Zy.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,iv={key:!0,ref:!0,__self:!0,__source:!0};function Ag(n,e,t){var r,i={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)nv.call(e,r)&&!iv.hasOwnProperty(r)&&(i[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:ev,type:n,key:s,ref:o,props:i,_owner:rv.current}}kl.Fragment=tv;kl.jsx=Ag;kl.jsxs=Ag;gg.exports=kl;var ue=gg.exports,Pu={},Ig={exports:{}},it={},Eg={exports:{}},xg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(B,U){var j=B.length;B.push(U);e:for(;0<j;){var fe=j-1>>>1,ke=B[fe];if(0<i(ke,U))B[fe]=U,B[j]=ke,j=fe;else break e}}function t(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var U=B[0],j=B.pop();if(j!==U){B[0]=j;e:for(var fe=0,ke=B.length,Jo=ke>>>1;fe<Jo;){var ii=2*(fe+1)-1,Kl=B[ii],si=ii+1,$o=B[si];if(0>i(Kl,j))si<ke&&0>i($o,Kl)?(B[fe]=$o,B[si]=j,fe=si):(B[fe]=Kl,B[ii]=j,fe=ii);else if(si<ke&&0>i($o,j))B[fe]=$o,B[si]=j,fe=si;else break e}}return U}function i(B,U){var j=B.sortIndex-U.sortIndex;return j!==0?j:B.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var u=[],c=[],d=1,h=null,m=3,y=!1,w=!1,T=!1,P=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(B){for(var U=t(c);U!==null;){if(U.callback===null)r(c);else if(U.startTime<=B)r(c),U.sortIndex=U.expirationTime,e(u,U);else break;U=t(c)}}function I(B){if(T=!1,v(B),!w)if(t(u)!==null)w=!0,Vl(E);else{var U=t(c);U!==null&&ql(I,U.startTime-B)}}function E(B,U){w=!1,T&&(T=!1,p(R),R=-1),y=!0;var j=m;try{for(v(U),h=t(u);h!==null&&(!(h.expirationTime>U)||B&&!Se());){var fe=h.callback;if(typeof fe=="function"){h.callback=null,m=h.priorityLevel;var ke=fe(h.expirationTime<=U);U=n.unstable_now(),typeof ke=="function"?h.callback=ke:h===t(u)&&r(u),v(U)}else r(u);h=t(u)}if(h!==null)var Jo=!0;else{var ii=t(c);ii!==null&&ql(I,ii.startTime-U),Jo=!1}return Jo}finally{h=null,m=j,y=!1}}var N=!1,D=null,R=-1,W=5,$=-1;function Se(){return!(n.unstable_now()-$<W)}function Ut(){if(D!==null){var B=n.unstable_now();$=B;var U=!0;try{U=D(!0,B)}finally{U?As():(N=!1,D=null)}}else N=!1}var As;if(typeof g=="function")As=function(){g(Ut)};else if(typeof MessageChannel<"u"){var gd=new MessageChannel,by=gd.port2;gd.port1.onmessage=Ut,As=function(){by.postMessage(null)}}else As=function(){P(Ut,0)};function Vl(B){D=B,N||(N=!0,As())}function ql(B,U){R=P(function(){B(n.unstable_now())},U)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(B){B.callback=null},n.unstable_continueExecution=function(){w||y||(w=!0,Vl(E))},n.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W=0<B?Math.floor(1e3/B):5},n.unstable_getCurrentPriorityLevel=function(){return m},n.unstable_getFirstCallbackNode=function(){return t(u)},n.unstable_next=function(B){switch(m){case 1:case 2:case 3:var U=3;break;default:U=m}var j=m;m=U;try{return B()}finally{m=j}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(B,U){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var j=m;m=B;try{return U()}finally{m=j}},n.unstable_scheduleCallback=function(B,U,j){var fe=n.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?fe+j:fe):j=fe,B){case 1:var ke=-1;break;case 2:ke=250;break;case 5:ke=1073741823;break;case 4:ke=1e4;break;default:ke=5e3}return ke=j+ke,B={id:d++,callback:U,priorityLevel:B,startTime:j,expirationTime:ke,sortIndex:-1},j>fe?(B.sortIndex=j,e(c,B),t(u)===null&&B===t(c)&&(T?(p(R),R=-1):T=!0,ql(I,j-fe))):(B.sortIndex=ke,e(u,B),w||y||(w=!0,Vl(E))),B},n.unstable_shouldYield=Se,n.unstable_wrapCallback=function(B){var U=m;return function(){var j=m;m=U;try{return B.apply(this,arguments)}finally{m=j}}}})(xg);Eg.exports=xg;var sv=Eg.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cg=je,rt=sv;function C(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ng=new Set,eo={};function Ni(n,e){is(n,e),is(n+"Capture",e)}function is(n,e){for(eo[n]=e,n=0;n<e.length;n++)Ng.add(e[n])}var wr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Du=Object.prototype.hasOwnProperty,ov=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,vd={},wd={};function av(n){return Du.call(wd,n)?!0:Du.call(vd,n)?!1:ov.test(n)?wd[n]=!0:(vd[n]=!0,!1)}function lv(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function uv(n,e,t,r){if(e===null||typeof e>"u"||lv(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function $e(n,e,t,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Ne={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Ne[n]=new $e(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];Ne[e]=new $e(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){Ne[n]=new $e(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Ne[n]=new $e(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Ne[n]=new $e(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){Ne[n]=new $e(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){Ne[n]=new $e(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){Ne[n]=new $e(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){Ne[n]=new $e(n,5,!1,n.toLowerCase(),null,!1,!1)});var tf=/[\-:]([a-z])/g;function nf(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(tf,nf);Ne[e]=new $e(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(tf,nf);Ne[e]=new $e(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(tf,nf);Ne[e]=new $e(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){Ne[n]=new $e(n,1,!1,n.toLowerCase(),null,!1,!1)});Ne.xlinkHref=new $e("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){Ne[n]=new $e(n,1,!1,n.toLowerCase(),null,!0,!0)});function rf(n,e,t,r){var i=Ne.hasOwnProperty(e)?Ne[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(uv(e,t,i,r)&&(t=null),r||i===null?av(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):i.mustUseProperty?n[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,r=i.attributeNamespace,t===null?n.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var Er=Cg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Uo=Symbol.for("react.element"),bi=Symbol.for("react.portal"),Mi=Symbol.for("react.fragment"),sf=Symbol.for("react.strict_mode"),Ou=Symbol.for("react.profiler"),Pg=Symbol.for("react.provider"),Dg=Symbol.for("react.context"),of=Symbol.for("react.forward_ref"),Ru=Symbol.for("react.suspense"),Lu=Symbol.for("react.suspense_list"),af=Symbol.for("react.memo"),Rr=Symbol.for("react.lazy"),Og=Symbol.for("react.offscreen"),Sd=Symbol.iterator;function Is(n){return n===null||typeof n!="object"?null:(n=Sd&&n[Sd]||n["@@iterator"],typeof n=="function"?n:null)}var se=Object.assign,_l;function bs(n){if(_l===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);_l=e&&e[1]||""}return`
`+_l+n}var Hl=!1;function Gl(n,e){if(!n||Hl)return"";Hl=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){r=c}n.call(e.prototype)}else{try{throw Error()}catch(c){r=c}n()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var u=`
`+i[o].replace(" at new "," at ");return n.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",n.displayName)),u}while(1<=o&&0<=a);break}}}finally{Hl=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?bs(n):""}function cv(n){switch(n.tag){case 5:return bs(n.type);case 16:return bs("Lazy");case 13:return bs("Suspense");case 19:return bs("SuspenseList");case 0:case 2:case 15:return n=Gl(n.type,!1),n;case 11:return n=Gl(n.type.render,!1),n;case 1:return n=Gl(n.type,!0),n;default:return""}}function Bu(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Mi:return"Fragment";case bi:return"Portal";case Ou:return"Profiler";case sf:return"StrictMode";case Ru:return"Suspense";case Lu:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case Dg:return(n.displayName||"Context")+".Consumer";case Pg:return(n._context.displayName||"Context")+".Provider";case of:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case af:return e=n.displayName||null,e!==null?e:Bu(n.type)||"Memo";case Rr:e=n._payload,n=n._init;try{return Bu(n(e))}catch{}}return null}function fv(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Bu(e);case 8:return e===sf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Yr(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Rg(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function dv(n){var e=Rg(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function jo(n){n._valueTracker||(n._valueTracker=dv(n))}function Lg(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=Rg(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function Ca(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function bu(n,e){var t=e.checked;return se({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function kd(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=Yr(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Bg(n,e){e=e.checked,e!=null&&rf(n,"checked",e,!1)}function Mu(n,e){Bg(n,e);var t=Yr(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?Fu(n,e.type,t):e.hasOwnProperty("defaultValue")&&Fu(n,e.type,Yr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function Td(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function Fu(n,e,t){(e!=="number"||Ca(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var Ms=Array.isArray;function Gi(n,e,t,r){if(n=n.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<n.length;t++)i=e.hasOwnProperty("$"+n[t].value),n[t].selected!==i&&(n[t].selected=i),i&&r&&(n[t].defaultSelected=!0)}else{for(t=""+Yr(t),e=null,i=0;i<n.length;i++){if(n[i].value===t){n[i].selected=!0,r&&(n[i].defaultSelected=!0);return}e!==null||n[i].disabled||(e=n[i])}e!==null&&(e.selected=!0)}}function Ju(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(C(91));return se({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Ad(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(C(92));if(Ms(t)){if(1<t.length)throw Error(C(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:Yr(t)}}function bg(n,e){var t=Yr(e.value),r=Yr(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function Id(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function Mg(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $u(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?Mg(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Vo,Fg=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,i){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,i)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(Vo=Vo||document.createElement("div"),Vo.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Vo.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function to(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var zs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},hv=["Webkit","ms","Moz","O"];Object.keys(zs).forEach(function(n){hv.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),zs[e]=zs[n]})});function Jg(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||zs.hasOwnProperty(n)&&zs[n]?(""+e).trim():e+"px"}function $g(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,i=Jg(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,i):n[t]=i}}var gv=se({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function zu(n,e){if(e){if(gv[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(C(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(C(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(C(61))}if(e.style!=null&&typeof e.style!="object")throw Error(C(62))}}function Uu(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ju=null;function lf(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Vu=null,Yi=null,Qi=null;function Ed(n){if(n=Oo(n)){if(typeof Vu!="function")throw Error(C(280));var e=n.stateNode;e&&(e=xl(e),Vu(n.stateNode,n.type,e))}}function zg(n){Yi?Qi?Qi.push(n):Qi=[n]:Yi=n}function Ug(){if(Yi){var n=Yi,e=Qi;if(Qi=Yi=null,Ed(n),e)for(n=0;n<e.length;n++)Ed(e[n])}}function jg(n,e){return n(e)}function Vg(){}var Yl=!1;function qg(n,e,t){if(Yl)return n(e,t);Yl=!0;try{return jg(n,e,t)}finally{Yl=!1,(Yi!==null||Qi!==null)&&(Vg(),Ug())}}function no(n,e){var t=n.stateNode;if(t===null)return null;var r=xl(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(C(231,e,typeof t));return t}var qu=!1;if(wr)try{var Es={};Object.defineProperty(Es,"passive",{get:function(){qu=!0}}),window.addEventListener("test",Es,Es),window.removeEventListener("test",Es,Es)}catch{qu=!1}function mv(n,e,t,r,i,s,o,a,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(d){this.onError(d)}}var Us=!1,Na=null,Pa=!1,Ku=null,pv={onError:function(n){Us=!0,Na=n}};function yv(n,e,t,r,i,s,o,a,u){Us=!1,Na=null,mv.apply(pv,arguments)}function vv(n,e,t,r,i,s,o,a,u){if(yv.apply(this,arguments),Us){if(Us){var c=Na;Us=!1,Na=null}else throw Error(C(198));Pa||(Pa=!0,Ku=c)}}function Pi(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function Kg(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function xd(n){if(Pi(n)!==n)throw Error(C(188))}function wv(n){var e=n.alternate;if(!e){if(e=Pi(n),e===null)throw Error(C(188));return e!==n?null:n}for(var t=n,r=e;;){var i=t.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){t=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===t)return xd(i),n;if(s===r)return xd(i),e;s=s.sibling}throw Error(C(188))}if(t.return!==r.return)t=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===t){o=!0,t=i,r=s;break}if(a===r){o=!0,r=i,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,r=i;break}if(a===r){o=!0,r=s,t=i;break}a=a.sibling}if(!o)throw Error(C(189))}}if(t.alternate!==r)throw Error(C(190))}if(t.tag!==3)throw Error(C(188));return t.stateNode.current===t?n:e}function Wg(n){return n=wv(n),n!==null?_g(n):null}function _g(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=_g(n);if(e!==null)return e;n=n.sibling}return null}var Hg=rt.unstable_scheduleCallback,Cd=rt.unstable_cancelCallback,Sv=rt.unstable_shouldYield,kv=rt.unstable_requestPaint,he=rt.unstable_now,Tv=rt.unstable_getCurrentPriorityLevel,uf=rt.unstable_ImmediatePriority,Gg=rt.unstable_UserBlockingPriority,Da=rt.unstable_NormalPriority,Av=rt.unstable_LowPriority,Yg=rt.unstable_IdlePriority,Tl=null,rn=null;function Iv(n){if(rn&&typeof rn.onCommitFiberRoot=="function")try{rn.onCommitFiberRoot(Tl,n,void 0,(n.current.flags&128)===128)}catch{}}var bt=Math.clz32?Math.clz32:Cv,Ev=Math.log,xv=Math.LN2;function Cv(n){return n>>>=0,n===0?32:31-(Ev(n)/xv|0)|0}var qo=64,Ko=4194304;function Fs(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Oa(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,i=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~i;a!==0?r=Fs(a):(s&=o,s!==0&&(r=Fs(s)))}else o=t&~i,o!==0?r=Fs(o):s!==0&&(r=Fs(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-bt(e),i=1<<t,r|=n[t],e&=~i;return r}function Nv(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Pv(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,i=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-bt(s),a=1<<o,u=i[o];u===-1?(!(a&t)||a&r)&&(i[o]=Nv(a,e)):u<=e&&(n.expiredLanes|=a),s&=~a}}function Wu(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Qg(){var n=qo;return qo<<=1,!(qo&4194240)&&(qo=64),n}function Ql(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function Po(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-bt(e),n[e]=t}function Dv(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var i=31-bt(t),s=1<<i;e[i]=0,r[i]=-1,n[i]=-1,t&=~s}}function cf(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-bt(t),i=1<<r;i&e|n[r]&e&&(n[r]|=e),t&=~i}}var Y=0;function Xg(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var Zg,ff,em,tm,nm,_u=!1,Wo=[],$r=null,zr=null,Ur=null,ro=new Map,io=new Map,Br=[],Ov="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Nd(n,e){switch(n){case"focusin":case"focusout":$r=null;break;case"dragenter":case"dragleave":zr=null;break;case"mouseover":case"mouseout":Ur=null;break;case"pointerover":case"pointerout":ro.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":io.delete(e.pointerId)}}function xs(n,e,t,r,i,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Oo(e),e!==null&&ff(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),n)}function Rv(n,e,t,r,i){switch(e){case"focusin":return $r=xs($r,n,e,t,r,i),!0;case"dragenter":return zr=xs(zr,n,e,t,r,i),!0;case"mouseover":return Ur=xs(Ur,n,e,t,r,i),!0;case"pointerover":var s=i.pointerId;return ro.set(s,xs(ro.get(s)||null,n,e,t,r,i)),!0;case"gotpointercapture":return s=i.pointerId,io.set(s,xs(io.get(s)||null,n,e,t,r,i)),!0}return!1}function rm(n){var e=fi(n.target);if(e!==null){var t=Pi(e);if(t!==null){if(e=t.tag,e===13){if(e=Kg(t),e!==null){n.blockedOn=e,nm(n.priority,function(){em(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function ca(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=Hu(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);ju=r,t.target.dispatchEvent(r),ju=null}else return e=Oo(t),e!==null&&ff(e),n.blockedOn=t,!1;e.shift()}return!0}function Pd(n,e,t){ca(n)&&t.delete(e)}function Lv(){_u=!1,$r!==null&&ca($r)&&($r=null),zr!==null&&ca(zr)&&(zr=null),Ur!==null&&ca(Ur)&&(Ur=null),ro.forEach(Pd),io.forEach(Pd)}function Cs(n,e){n.blockedOn===e&&(n.blockedOn=null,_u||(_u=!0,rt.unstable_scheduleCallback(rt.unstable_NormalPriority,Lv)))}function so(n){function e(i){return Cs(i,n)}if(0<Wo.length){Cs(Wo[0],n);for(var t=1;t<Wo.length;t++){var r=Wo[t];r.blockedOn===n&&(r.blockedOn=null)}}for($r!==null&&Cs($r,n),zr!==null&&Cs(zr,n),Ur!==null&&Cs(Ur,n),ro.forEach(e),io.forEach(e),t=0;t<Br.length;t++)r=Br[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<Br.length&&(t=Br[0],t.blockedOn===null);)rm(t),t.blockedOn===null&&Br.shift()}var Xi=Er.ReactCurrentBatchConfig,Ra=!0;function Bv(n,e,t,r){var i=Y,s=Xi.transition;Xi.transition=null;try{Y=1,df(n,e,t,r)}finally{Y=i,Xi.transition=s}}function bv(n,e,t,r){var i=Y,s=Xi.transition;Xi.transition=null;try{Y=4,df(n,e,t,r)}finally{Y=i,Xi.transition=s}}function df(n,e,t,r){if(Ra){var i=Hu(n,e,t,r);if(i===null)au(n,e,r,La,t),Nd(n,r);else if(Rv(i,n,e,t,r))r.stopPropagation();else if(Nd(n,r),e&4&&-1<Ov.indexOf(n)){for(;i!==null;){var s=Oo(i);if(s!==null&&Zg(s),s=Hu(n,e,t,r),s===null&&au(n,e,r,La,t),s===i)break;i=s}i!==null&&r.stopPropagation()}else au(n,e,r,null,t)}}var La=null;function Hu(n,e,t,r){if(La=null,n=lf(r),n=fi(n),n!==null)if(e=Pi(n),e===null)n=null;else if(t=e.tag,t===13){if(n=Kg(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return La=n,null}function im(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Tv()){case uf:return 1;case Gg:return 4;case Da:case Av:return 16;case Yg:return 536870912;default:return 16}default:return 16}}var Mr=null,hf=null,fa=null;function sm(){if(fa)return fa;var n,e=hf,t=e.length,r,i="value"in Mr?Mr.value:Mr.textContent,s=i.length;for(n=0;n<t&&e[n]===i[n];n++);var o=t-n;for(r=1;r<=o&&e[t-r]===i[s-r];r++);return fa=i.slice(n,1<r?1-r:void 0)}function da(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function _o(){return!0}function Dd(){return!1}function st(n){function e(t,r,i,s,o){this._reactName=t,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?_o:Dd,this.isPropagationStopped=Dd,this}return se(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=_o)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=_o)},persist:function(){},isPersistent:_o}),e}var ks={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},gf=st(ks),Do=se({},ks,{view:0,detail:0}),Mv=st(Do),Xl,Zl,Ns,Al=se({},Do,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mf,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Ns&&(Ns&&n.type==="mousemove"?(Xl=n.screenX-Ns.screenX,Zl=n.screenY-Ns.screenY):Zl=Xl=0,Ns=n),Xl)},movementY:function(n){return"movementY"in n?n.movementY:Zl}}),Od=st(Al),Fv=se({},Al,{dataTransfer:0}),Jv=st(Fv),$v=se({},Do,{relatedTarget:0}),eu=st($v),zv=se({},ks,{animationName:0,elapsedTime:0,pseudoElement:0}),Uv=st(zv),jv=se({},ks,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Vv=st(jv),qv=se({},ks,{data:0}),Rd=st(qv),Kv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Wv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_v={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Hv(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=_v[n])?!!e[n]:!1}function mf(){return Hv}var Gv=se({},Do,{key:function(n){if(n.key){var e=Kv[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=da(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Wv[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mf,charCode:function(n){return n.type==="keypress"?da(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?da(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Yv=st(Gv),Qv=se({},Al,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ld=st(Qv),Xv=se({},Do,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mf}),Zv=st(Xv),ew=se({},ks,{propertyName:0,elapsedTime:0,pseudoElement:0}),tw=st(ew),nw=se({},Al,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),rw=st(nw),iw=[9,13,27,32],pf=wr&&"CompositionEvent"in window,js=null;wr&&"documentMode"in document&&(js=document.documentMode);var sw=wr&&"TextEvent"in window&&!js,om=wr&&(!pf||js&&8<js&&11>=js),Bd=" ",bd=!1;function am(n,e){switch(n){case"keyup":return iw.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function lm(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Fi=!1;function ow(n,e){switch(n){case"compositionend":return lm(e);case"keypress":return e.which!==32?null:(bd=!0,Bd);case"textInput":return n=e.data,n===Bd&&bd?null:n;default:return null}}function aw(n,e){if(Fi)return n==="compositionend"||!pf&&am(n,e)?(n=sm(),fa=hf=Mr=null,Fi=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return om&&e.locale!=="ko"?null:e.data;default:return null}}var lw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Md(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!lw[n.type]:e==="textarea"}function um(n,e,t,r){zg(r),e=Ba(e,"onChange"),0<e.length&&(t=new gf("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var Vs=null,oo=null;function uw(n){Sm(n,0)}function Il(n){var e=zi(n);if(Lg(e))return n}function cw(n,e){if(n==="change")return e}var cm=!1;if(wr){var tu;if(wr){var nu="oninput"in document;if(!nu){var Fd=document.createElement("div");Fd.setAttribute("oninput","return;"),nu=typeof Fd.oninput=="function"}tu=nu}else tu=!1;cm=tu&&(!document.documentMode||9<document.documentMode)}function Jd(){Vs&&(Vs.detachEvent("onpropertychange",fm),oo=Vs=null)}function fm(n){if(n.propertyName==="value"&&Il(oo)){var e=[];um(e,oo,n,lf(n)),qg(uw,e)}}function fw(n,e,t){n==="focusin"?(Jd(),Vs=e,oo=t,Vs.attachEvent("onpropertychange",fm)):n==="focusout"&&Jd()}function dw(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Il(oo)}function hw(n,e){if(n==="click")return Il(e)}function gw(n,e){if(n==="input"||n==="change")return Il(e)}function mw(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var $t=typeof Object.is=="function"?Object.is:mw;function ao(n,e){if($t(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var i=t[r];if(!Du.call(e,i)||!$t(n[i],e[i]))return!1}return!0}function $d(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function zd(n,e){var t=$d(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=$d(t)}}function dm(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?dm(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function hm(){for(var n=window,e=Ca();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=Ca(n.document)}return e}function yf(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function pw(n){var e=hm(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&dm(t.ownerDocument.documentElement,t)){if(r!==null&&yf(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var i=t.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!n.extend&&s>r&&(i=r,r=s,s=i),i=zd(t,s);var o=zd(t,r);i&&o&&(n.rangeCount!==1||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),n.removeAllRanges(),s>r?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var yw=wr&&"documentMode"in document&&11>=document.documentMode,Ji=null,Gu=null,qs=null,Yu=!1;function Ud(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;Yu||Ji==null||Ji!==Ca(r)||(r=Ji,"selectionStart"in r&&yf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),qs&&ao(qs,r)||(qs=r,r=Ba(Gu,"onSelect"),0<r.length&&(e=new gf("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=Ji)))}function Ho(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var $i={animationend:Ho("Animation","AnimationEnd"),animationiteration:Ho("Animation","AnimationIteration"),animationstart:Ho("Animation","AnimationStart"),transitionend:Ho("Transition","TransitionEnd")},ru={},gm={};wr&&(gm=document.createElement("div").style,"AnimationEvent"in window||(delete $i.animationend.animation,delete $i.animationiteration.animation,delete $i.animationstart.animation),"TransitionEvent"in window||delete $i.transitionend.transition);function El(n){if(ru[n])return ru[n];if(!$i[n])return n;var e=$i[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in gm)return ru[n]=e[t];return n}var mm=El("animationend"),pm=El("animationiteration"),ym=El("animationstart"),vm=El("transitionend"),wm=new Map,jd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ti(n,e){wm.set(n,e),Ni(e,[n])}for(var iu=0;iu<jd.length;iu++){var su=jd[iu],vw=su.toLowerCase(),ww=su[0].toUpperCase()+su.slice(1);ti(vw,"on"+ww)}ti(mm,"onAnimationEnd");ti(pm,"onAnimationIteration");ti(ym,"onAnimationStart");ti("dblclick","onDoubleClick");ti("focusin","onFocus");ti("focusout","onBlur");ti(vm,"onTransitionEnd");is("onMouseEnter",["mouseout","mouseover"]);is("onMouseLeave",["mouseout","mouseover"]);is("onPointerEnter",["pointerout","pointerover"]);is("onPointerLeave",["pointerout","pointerover"]);Ni("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ni("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ni("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ni("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ni("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ni("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Js="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Sw=new Set("cancel close invalid load scroll toggle".split(" ").concat(Js));function Vd(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,vv(r,e,void 0,n),n.currentTarget=null}function Sm(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,c=a.currentTarget;if(a=a.listener,u!==s&&i.isPropagationStopped())break e;Vd(i,a,c),s=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,c=a.currentTarget,a=a.listener,u!==s&&i.isPropagationStopped())break e;Vd(i,a,c),s=u}}}if(Pa)throw n=Ku,Pa=!1,Ku=null,n}function Z(n,e){var t=e[tc];t===void 0&&(t=e[tc]=new Set);var r=n+"__bubble";t.has(r)||(km(e,n,2,!1),t.add(r))}function ou(n,e,t){var r=0;e&&(r|=4),km(t,n,r,e)}var Go="_reactListening"+Math.random().toString(36).slice(2);function lo(n){if(!n[Go]){n[Go]=!0,Ng.forEach(function(t){t!=="selectionchange"&&(Sw.has(t)||ou(t,!1,n),ou(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Go]||(e[Go]=!0,ou("selectionchange",!1,e))}}function km(n,e,t,r){switch(im(e)){case 1:var i=Bv;break;case 4:i=bv;break;default:i=df}t=i.bind(null,e,t,n),i=void 0,!qu||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?n.addEventListener(e,t,{capture:!0,passive:i}):n.addEventListener(e,t,!0):i!==void 0?n.addEventListener(e,t,{passive:i}):n.addEventListener(e,t,!1)}function au(n,e,t,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;a!==null;){if(o=fi(a),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}a=a.parentNode}}r=r.return}qg(function(){var c=s,d=lf(t),h=[];e:{var m=wm.get(n);if(m!==void 0){var y=gf,w=n;switch(n){case"keypress":if(da(t)===0)break e;case"keydown":case"keyup":y=Yv;break;case"focusin":w="focus",y=eu;break;case"focusout":w="blur",y=eu;break;case"beforeblur":case"afterblur":y=eu;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=Od;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=Jv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=Zv;break;case mm:case pm:case ym:y=Uv;break;case vm:y=tw;break;case"scroll":y=Mv;break;case"wheel":y=rw;break;case"copy":case"cut":case"paste":y=Vv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=Ld}var T=(e&4)!==0,P=!T&&n==="scroll",p=T?m!==null?m+"Capture":null:m;T=[];for(var g=c,v;g!==null;){v=g;var I=v.stateNode;if(v.tag===5&&I!==null&&(v=I,p!==null&&(I=no(g,p),I!=null&&T.push(uo(g,I,v)))),P)break;g=g.return}0<T.length&&(m=new y(m,w,null,t,d),h.push({event:m,listeners:T}))}}if(!(e&7)){e:{if(m=n==="mouseover"||n==="pointerover",y=n==="mouseout"||n==="pointerout",m&&t!==ju&&(w=t.relatedTarget||t.fromElement)&&(fi(w)||w[Sr]))break e;if((y||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,y?(w=t.relatedTarget||t.toElement,y=c,w=w?fi(w):null,w!==null&&(P=Pi(w),w!==P||w.tag!==5&&w.tag!==6)&&(w=null)):(y=null,w=c),y!==w)){if(T=Od,I="onMouseLeave",p="onMouseEnter",g="mouse",(n==="pointerout"||n==="pointerover")&&(T=Ld,I="onPointerLeave",p="onPointerEnter",g="pointer"),P=y==null?m:zi(y),v=w==null?m:zi(w),m=new T(I,g+"leave",y,t,d),m.target=P,m.relatedTarget=v,I=null,fi(d)===c&&(T=new T(p,g+"enter",w,t,d),T.target=v,T.relatedTarget=P,I=T),P=I,y&&w)t:{for(T=y,p=w,g=0,v=T;v;v=Oi(v))g++;for(v=0,I=p;I;I=Oi(I))v++;for(;0<g-v;)T=Oi(T),g--;for(;0<v-g;)p=Oi(p),v--;for(;g--;){if(T===p||p!==null&&T===p.alternate)break t;T=Oi(T),p=Oi(p)}T=null}else T=null;y!==null&&qd(h,m,y,T,!1),w!==null&&P!==null&&qd(h,P,w,T,!0)}}e:{if(m=c?zi(c):window,y=m.nodeName&&m.nodeName.toLowerCase(),y==="select"||y==="input"&&m.type==="file")var E=cw;else if(Md(m))if(cm)E=gw;else{E=dw;var N=fw}else(y=m.nodeName)&&y.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(E=hw);if(E&&(E=E(n,c))){um(h,E,t,d);break e}N&&N(n,m,c),n==="focusout"&&(N=m._wrapperState)&&N.controlled&&m.type==="number"&&Fu(m,"number",m.value)}switch(N=c?zi(c):window,n){case"focusin":(Md(N)||N.contentEditable==="true")&&(Ji=N,Gu=c,qs=null);break;case"focusout":qs=Gu=Ji=null;break;case"mousedown":Yu=!0;break;case"contextmenu":case"mouseup":case"dragend":Yu=!1,Ud(h,t,d);break;case"selectionchange":if(yw)break;case"keydown":case"keyup":Ud(h,t,d)}var D;if(pf)e:{switch(n){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else Fi?am(n,t)&&(R="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(R="onCompositionStart");R&&(om&&t.locale!=="ko"&&(Fi||R!=="onCompositionStart"?R==="onCompositionEnd"&&Fi&&(D=sm()):(Mr=d,hf="value"in Mr?Mr.value:Mr.textContent,Fi=!0)),N=Ba(c,R),0<N.length&&(R=new Rd(R,n,null,t,d),h.push({event:R,listeners:N}),D?R.data=D:(D=lm(t),D!==null&&(R.data=D)))),(D=sw?ow(n,t):aw(n,t))&&(c=Ba(c,"onBeforeInput"),0<c.length&&(d=new Rd("onBeforeInput","beforeinput",null,t,d),h.push({event:d,listeners:c}),d.data=D))}Sm(h,e)})}function uo(n,e,t){return{instance:n,listener:e,currentTarget:t}}function Ba(n,e){for(var t=e+"Capture",r=[];n!==null;){var i=n,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=no(n,t),s!=null&&r.unshift(uo(n,s,i)),s=no(n,e),s!=null&&r.push(uo(n,s,i))),n=n.return}return r}function Oi(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function qd(n,e,t,r,i){for(var s=e._reactName,o=[];t!==null&&t!==r;){var a=t,u=a.alternate,c=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&c!==null&&(a=c,i?(u=no(t,s),u!=null&&o.unshift(uo(t,u,a))):i||(u=no(t,s),u!=null&&o.push(uo(t,u,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var kw=/\r\n?/g,Tw=/\u0000|\uFFFD/g;function Kd(n){return(typeof n=="string"?n:""+n).replace(kw,`
`).replace(Tw,"")}function Yo(n,e,t){if(e=Kd(e),Kd(n)!==e&&t)throw Error(C(425))}function ba(){}var Qu=null,Xu=null;function Zu(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ec=typeof setTimeout=="function"?setTimeout:void 0,Aw=typeof clearTimeout=="function"?clearTimeout:void 0,Wd=typeof Promise=="function"?Promise:void 0,Iw=typeof queueMicrotask=="function"?queueMicrotask:typeof Wd<"u"?function(n){return Wd.resolve(null).then(n).catch(Ew)}:ec;function Ew(n){setTimeout(function(){throw n})}function lu(n,e){var t=e,r=0;do{var i=t.nextSibling;if(n.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(r===0){n.removeChild(i),so(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=i}while(t);so(e)}function jr(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function _d(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var Ts=Math.random().toString(36).slice(2),Wt="__reactFiber$"+Ts,co="__reactProps$"+Ts,Sr="__reactContainer$"+Ts,tc="__reactEvents$"+Ts,xw="__reactListeners$"+Ts,Cw="__reactHandles$"+Ts;function fi(n){var e=n[Wt];if(e)return e;for(var t=n.parentNode;t;){if(e=t[Sr]||t[Wt]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=_d(n);n!==null;){if(t=n[Wt])return t;n=_d(n)}return e}n=t,t=n.parentNode}return null}function Oo(n){return n=n[Wt]||n[Sr],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function zi(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(C(33))}function xl(n){return n[co]||null}var nc=[],Ui=-1;function ni(n){return{current:n}}function ee(n){0>Ui||(n.current=nc[Ui],nc[Ui]=null,Ui--)}function X(n,e){Ui++,nc[Ui]=n.current,n.current=e}var Qr={},Le=ni(Qr),Ke=ni(!1),Si=Qr;function ss(n,e){var t=n.type.contextTypes;if(!t)return Qr;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in t)i[s]=e[s];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=i),i}function We(n){return n=n.childContextTypes,n!=null}function Ma(){ee(Ke),ee(Le)}function Hd(n,e,t){if(Le.current!==Qr)throw Error(C(168));X(Le,e),X(Ke,t)}function Tm(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(C(108,fv(n)||"Unknown",i));return se({},t,r)}function Fa(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Qr,Si=Le.current,X(Le,n),X(Ke,Ke.current),!0}function Gd(n,e,t){var r=n.stateNode;if(!r)throw Error(C(169));t?(n=Tm(n,e,Si),r.__reactInternalMemoizedMergedChildContext=n,ee(Ke),ee(Le),X(Le,n)):ee(Ke),X(Ke,t)}var lr=null,Cl=!1,uu=!1;function Am(n){lr===null?lr=[n]:lr.push(n)}function Nw(n){Cl=!0,Am(n)}function ri(){if(!uu&&lr!==null){uu=!0;var n=0,e=Y;try{var t=lr;for(Y=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}lr=null,Cl=!1}catch(i){throw lr!==null&&(lr=lr.slice(n+1)),Hg(uf,ri),i}finally{Y=e,uu=!1}}return null}var ji=[],Vi=0,Ja=null,$a=0,ot=[],at=0,ki=null,fr=1,dr="";function ai(n,e){ji[Vi++]=$a,ji[Vi++]=Ja,Ja=n,$a=e}function Im(n,e,t){ot[at++]=fr,ot[at++]=dr,ot[at++]=ki,ki=n;var r=fr;n=dr;var i=32-bt(r)-1;r&=~(1<<i),t+=1;var s=32-bt(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,fr=1<<32-bt(e)+i|t<<i|r,dr=s+n}else fr=1<<s|t<<i|r,dr=n}function vf(n){n.return!==null&&(ai(n,1),Im(n,1,0))}function wf(n){for(;n===Ja;)Ja=ji[--Vi],ji[Vi]=null,$a=ji[--Vi],ji[Vi]=null;for(;n===ki;)ki=ot[--at],ot[at]=null,dr=ot[--at],ot[at]=null,fr=ot[--at],ot[at]=null}var et=null,Qe=null,te=!1,Rt=null;function Em(n,e){var t=vt(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function Yd(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,et=n,Qe=jr(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,et=n,Qe=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=ki!==null?{id:fr,overflow:dr}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=vt(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,et=n,Qe=null,!0):!1;default:return!1}}function rc(n){return(n.mode&1)!==0&&(n.flags&128)===0}function ic(n){if(te){var e=Qe;if(e){var t=e;if(!Yd(n,e)){if(rc(n))throw Error(C(418));e=jr(t.nextSibling);var r=et;e&&Yd(n,e)?Em(r,t):(n.flags=n.flags&-4097|2,te=!1,et=n)}}else{if(rc(n))throw Error(C(418));n.flags=n.flags&-4097|2,te=!1,et=n}}}function Qd(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;et=n}function Qo(n){if(n!==et)return!1;if(!te)return Qd(n),te=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!Zu(n.type,n.memoizedProps)),e&&(e=Qe)){if(rc(n))throw xm(),Error(C(418));for(;e;)Em(n,e),e=jr(e.nextSibling)}if(Qd(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(C(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){Qe=jr(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}Qe=null}}else Qe=et?jr(n.stateNode.nextSibling):null;return!0}function xm(){for(var n=Qe;n;)n=jr(n.nextSibling)}function os(){Qe=et=null,te=!1}function Sf(n){Rt===null?Rt=[n]:Rt.push(n)}var Pw=Er.ReactCurrentBatchConfig;function Pt(n,e){if(n&&n.defaultProps){e=se({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}var za=ni(null),Ua=null,qi=null,kf=null;function Tf(){kf=qi=Ua=null}function Af(n){var e=za.current;ee(za),n._currentValue=e}function sc(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function Zi(n,e){Ua=n,kf=qi=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(Ve=!0),n.firstContext=null)}function At(n){var e=n._currentValue;if(kf!==n)if(n={context:n,memoizedValue:e,next:null},qi===null){if(Ua===null)throw Error(C(308));qi=n,Ua.dependencies={lanes:0,firstContext:n}}else qi=qi.next=n;return e}var di=null;function If(n){di===null?di=[n]:di.push(n)}function Cm(n,e,t,r){var i=e.interleaved;return i===null?(t.next=t,If(e)):(t.next=i.next,i.next=t),e.interleaved=t,kr(n,r)}function kr(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var Lr=!1;function Ef(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Nm(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function pr(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function Vr(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,_&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,kr(n,t)}return i=r.interleaved,i===null?(e.next=e,If(r)):(e.next=i.next,i.next=e),r.interleaved=e,kr(n,t)}function ha(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,cf(n,t)}}function Xd(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var i=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?i=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?i=s=e:s=s.next=e}else i=s=e;t={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function ja(n,e,t,r){var i=n.updateQueue;Lr=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var u=a,c=u.next;u.next=null,o===null?s=c:o.next=c,o=u;var d=n.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=u))}if(s!==null){var h=i.baseState;o=0,d=c=u=null,a=s;do{var m=a.lane,y=a.eventTime;if((r&m)===m){d!==null&&(d=d.next={eventTime:y,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var w=n,T=a;switch(m=e,y=t,T.tag){case 1:if(w=T.payload,typeof w=="function"){h=w.call(y,h,m);break e}h=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=T.payload,m=typeof w=="function"?w.call(y,h,m):w,m==null)break e;h=se({},h,m);break e;case 2:Lr=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,m=i.effects,m===null?i.effects=[a]:m.push(a))}else y={eventTime:y,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=y,u=h):d=d.next=y,o|=m;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;m=a,a=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(!0);if(d===null&&(u=h),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Ai|=o,n.lanes=o,n.memoizedState=h}}function Zd(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],i=r.callback;if(i!==null){if(r.callback=null,r=t,typeof i!="function")throw Error(C(191,i));i.call(r)}}}var Pm=new Cg.Component().refs;function oc(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:se({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var Nl={isMounted:function(n){return(n=n._reactInternals)?Pi(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=Fe(),i=Kr(n),s=pr(r,i);s.payload=e,t!=null&&(s.callback=t),e=Vr(n,s,i),e!==null&&(Mt(e,n,i,r),ha(e,n,i))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=Fe(),i=Kr(n),s=pr(r,i);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=Vr(n,s,i),e!==null&&(Mt(e,n,i,r),ha(e,n,i))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Fe(),r=Kr(n),i=pr(t,r);i.tag=2,e!=null&&(i.callback=e),e=Vr(n,i,r),e!==null&&(Mt(e,n,r,t),ha(e,n,r))}};function eh(n,e,t,r,i,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!ao(t,r)||!ao(i,s):!0}function Dm(n,e,t){var r=!1,i=Qr,s=e.contextType;return typeof s=="object"&&s!==null?s=At(s):(i=We(e)?Si:Le.current,r=e.contextTypes,s=(r=r!=null)?ss(n,i):Qr),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Nl,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=s),e}function th(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&Nl.enqueueReplaceState(e,e.state,null)}function ac(n,e,t,r){var i=n.stateNode;i.props=t,i.state=n.memoizedState,i.refs=Pm,Ef(n);var s=e.contextType;typeof s=="object"&&s!==null?i.context=At(s):(s=We(e)?Si:Le.current,i.context=ss(n,s)),i.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(oc(n,e,s,t),i.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Nl.enqueueReplaceState(i,i.state,null),ja(n,t,i,r),i.state=n.memoizedState),typeof i.componentDidMount=="function"&&(n.flags|=4194308)}function Ps(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(C(309));var r=t.stateNode}if(!r)throw Error(C(147,n));var i=r,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===Pm&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(C(284));if(!t._owner)throw Error(C(290,n))}return n}function Xo(n,e){throw n=Object.prototype.toString.call(e),Error(C(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function nh(n){var e=n._init;return e(n._payload)}function Om(n){function e(p,g){if(n){var v=p.deletions;v===null?(p.deletions=[g],p.flags|=16):v.push(g)}}function t(p,g){if(!n)return null;for(;g!==null;)e(p,g),g=g.sibling;return null}function r(p,g){for(p=new Map;g!==null;)g.key!==null?p.set(g.key,g):p.set(g.index,g),g=g.sibling;return p}function i(p,g){return p=Wr(p,g),p.index=0,p.sibling=null,p}function s(p,g,v){return p.index=v,n?(v=p.alternate,v!==null?(v=v.index,v<g?(p.flags|=2,g):v):(p.flags|=2,g)):(p.flags|=1048576,g)}function o(p){return n&&p.alternate===null&&(p.flags|=2),p}function a(p,g,v,I){return g===null||g.tag!==6?(g=pu(v,p.mode,I),g.return=p,g):(g=i(g,v),g.return=p,g)}function u(p,g,v,I){var E=v.type;return E===Mi?d(p,g,v.props.children,I,v.key):g!==null&&(g.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Rr&&nh(E)===g.type)?(I=i(g,v.props),I.ref=Ps(p,g,v),I.return=p,I):(I=wa(v.type,v.key,v.props,null,p.mode,I),I.ref=Ps(p,g,v),I.return=p,I)}function c(p,g,v,I){return g===null||g.tag!==4||g.stateNode.containerInfo!==v.containerInfo||g.stateNode.implementation!==v.implementation?(g=yu(v,p.mode,I),g.return=p,g):(g=i(g,v.children||[]),g.return=p,g)}function d(p,g,v,I,E){return g===null||g.tag!==7?(g=yi(v,p.mode,I,E),g.return=p,g):(g=i(g,v),g.return=p,g)}function h(p,g,v){if(typeof g=="string"&&g!==""||typeof g=="number")return g=pu(""+g,p.mode,v),g.return=p,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Uo:return v=wa(g.type,g.key,g.props,null,p.mode,v),v.ref=Ps(p,null,g),v.return=p,v;case bi:return g=yu(g,p.mode,v),g.return=p,g;case Rr:var I=g._init;return h(p,I(g._payload),v)}if(Ms(g)||Is(g))return g=yi(g,p.mode,v,null),g.return=p,g;Xo(p,g)}return null}function m(p,g,v,I){var E=g!==null?g.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return E!==null?null:a(p,g,""+v,I);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Uo:return v.key===E?u(p,g,v,I):null;case bi:return v.key===E?c(p,g,v,I):null;case Rr:return E=v._init,m(p,g,E(v._payload),I)}if(Ms(v)||Is(v))return E!==null?null:d(p,g,v,I,null);Xo(p,v)}return null}function y(p,g,v,I,E){if(typeof I=="string"&&I!==""||typeof I=="number")return p=p.get(v)||null,a(g,p,""+I,E);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Uo:return p=p.get(I.key===null?v:I.key)||null,u(g,p,I,E);case bi:return p=p.get(I.key===null?v:I.key)||null,c(g,p,I,E);case Rr:var N=I._init;return y(p,g,v,N(I._payload),E)}if(Ms(I)||Is(I))return p=p.get(v)||null,d(g,p,I,E,null);Xo(g,I)}return null}function w(p,g,v,I){for(var E=null,N=null,D=g,R=g=0,W=null;D!==null&&R<v.length;R++){D.index>R?(W=D,D=null):W=D.sibling;var $=m(p,D,v[R],I);if($===null){D===null&&(D=W);break}n&&D&&$.alternate===null&&e(p,D),g=s($,g,R),N===null?E=$:N.sibling=$,N=$,D=W}if(R===v.length)return t(p,D),te&&ai(p,R),E;if(D===null){for(;R<v.length;R++)D=h(p,v[R],I),D!==null&&(g=s(D,g,R),N===null?E=D:N.sibling=D,N=D);return te&&ai(p,R),E}for(D=r(p,D);R<v.length;R++)W=y(D,p,R,v[R],I),W!==null&&(n&&W.alternate!==null&&D.delete(W.key===null?R:W.key),g=s(W,g,R),N===null?E=W:N.sibling=W,N=W);return n&&D.forEach(function(Se){return e(p,Se)}),te&&ai(p,R),E}function T(p,g,v,I){var E=Is(v);if(typeof E!="function")throw Error(C(150));if(v=E.call(v),v==null)throw Error(C(151));for(var N=E=null,D=g,R=g=0,W=null,$=v.next();D!==null&&!$.done;R++,$=v.next()){D.index>R?(W=D,D=null):W=D.sibling;var Se=m(p,D,$.value,I);if(Se===null){D===null&&(D=W);break}n&&D&&Se.alternate===null&&e(p,D),g=s(Se,g,R),N===null?E=Se:N.sibling=Se,N=Se,D=W}if($.done)return t(p,D),te&&ai(p,R),E;if(D===null){for(;!$.done;R++,$=v.next())$=h(p,$.value,I),$!==null&&(g=s($,g,R),N===null?E=$:N.sibling=$,N=$);return te&&ai(p,R),E}for(D=r(p,D);!$.done;R++,$=v.next())$=y(D,p,R,$.value,I),$!==null&&(n&&$.alternate!==null&&D.delete($.key===null?R:$.key),g=s($,g,R),N===null?E=$:N.sibling=$,N=$);return n&&D.forEach(function(Ut){return e(p,Ut)}),te&&ai(p,R),E}function P(p,g,v,I){if(typeof v=="object"&&v!==null&&v.type===Mi&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Uo:e:{for(var E=v.key,N=g;N!==null;){if(N.key===E){if(E=v.type,E===Mi){if(N.tag===7){t(p,N.sibling),g=i(N,v.props.children),g.return=p,p=g;break e}}else if(N.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Rr&&nh(E)===N.type){t(p,N.sibling),g=i(N,v.props),g.ref=Ps(p,N,v),g.return=p,p=g;break e}t(p,N);break}else e(p,N);N=N.sibling}v.type===Mi?(g=yi(v.props.children,p.mode,I,v.key),g.return=p,p=g):(I=wa(v.type,v.key,v.props,null,p.mode,I),I.ref=Ps(p,g,v),I.return=p,p=I)}return o(p);case bi:e:{for(N=v.key;g!==null;){if(g.key===N)if(g.tag===4&&g.stateNode.containerInfo===v.containerInfo&&g.stateNode.implementation===v.implementation){t(p,g.sibling),g=i(g,v.children||[]),g.return=p,p=g;break e}else{t(p,g);break}else e(p,g);g=g.sibling}g=yu(v,p.mode,I),g.return=p,p=g}return o(p);case Rr:return N=v._init,P(p,g,N(v._payload),I)}if(Ms(v))return w(p,g,v,I);if(Is(v))return T(p,g,v,I);Xo(p,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,g!==null&&g.tag===6?(t(p,g.sibling),g=i(g,v),g.return=p,p=g):(t(p,g),g=pu(v,p.mode,I),g.return=p,p=g),o(p)):t(p,g)}return P}var as=Om(!0),Rm=Om(!1),Ro={},sn=ni(Ro),fo=ni(Ro),ho=ni(Ro);function hi(n){if(n===Ro)throw Error(C(174));return n}function xf(n,e){switch(X(ho,e),X(fo,n),X(sn,Ro),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:$u(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=$u(e,n)}ee(sn),X(sn,e)}function ls(){ee(sn),ee(fo),ee(ho)}function Lm(n){hi(ho.current);var e=hi(sn.current),t=$u(e,n.type);e!==t&&(X(fo,n),X(sn,t))}function Cf(n){fo.current===n&&(ee(sn),ee(fo))}var re=ni(0);function Va(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var cu=[];function Nf(){for(var n=0;n<cu.length;n++)cu[n]._workInProgressVersionPrimary=null;cu.length=0}var ga=Er.ReactCurrentDispatcher,fu=Er.ReactCurrentBatchConfig,Ti=0,ie=null,ye=null,Te=null,qa=!1,Ks=!1,go=0,Dw=0;function Pe(){throw Error(C(321))}function Pf(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!$t(n[t],e[t]))return!1;return!0}function Df(n,e,t,r,i,s){if(Ti=s,ie=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ga.current=n===null||n.memoizedState===null?Bw:bw,n=t(r,i),Ks){s=0;do{if(Ks=!1,go=0,25<=s)throw Error(C(301));s+=1,Te=ye=null,e.updateQueue=null,ga.current=Mw,n=t(r,i)}while(Ks)}if(ga.current=Ka,e=ye!==null&&ye.next!==null,Ti=0,Te=ye=ie=null,qa=!1,e)throw Error(C(300));return n}function Of(){var n=go!==0;return go=0,n}function Vt(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Te===null?ie.memoizedState=Te=n:Te=Te.next=n,Te}function It(){if(ye===null){var n=ie.alternate;n=n!==null?n.memoizedState:null}else n=ye.next;var e=Te===null?ie.memoizedState:Te.next;if(e!==null)Te=e,ye=n;else{if(n===null)throw Error(C(310));ye=n,n={memoizedState:ye.memoizedState,baseState:ye.baseState,baseQueue:ye.baseQueue,queue:ye.queue,next:null},Te===null?ie.memoizedState=Te=n:Te=Te.next=n}return Te}function mo(n,e){return typeof e=="function"?e(n):e}function du(n){var e=It(),t=e.queue;if(t===null)throw Error(C(311));t.lastRenderedReducer=n;var r=ye,i=r.baseQueue,s=t.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,t.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,u=null,c=s;do{var d=c.lane;if((Ti&d)===d)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:n(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(a=u=h,o=r):u=u.next=h,ie.lanes|=d,Ai|=d}c=c.next}while(c!==null&&c!==s);u===null?o=r:u.next=a,$t(r,e.memoizedState)||(Ve=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,t.lastRenderedState=r}if(n=t.interleaved,n!==null){i=n;do s=i.lane,ie.lanes|=s,Ai|=s,i=i.next;while(i!==n)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function hu(n){var e=It(),t=e.queue;if(t===null)throw Error(C(311));t.lastRenderedReducer=n;var r=t.dispatch,i=t.pending,s=e.memoizedState;if(i!==null){t.pending=null;var o=i=i.next;do s=n(s,o.action),o=o.next;while(o!==i);$t(s,e.memoizedState)||(Ve=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,r]}function Bm(){}function bm(n,e){var t=ie,r=It(),i=e(),s=!$t(r.memoizedState,i);if(s&&(r.memoizedState=i,Ve=!0),r=r.queue,Rf(Jm.bind(null,t,r,n),[n]),r.getSnapshot!==e||s||Te!==null&&Te.memoizedState.tag&1){if(t.flags|=2048,po(9,Fm.bind(null,t,r,i,e),void 0,null),Ae===null)throw Error(C(349));Ti&30||Mm(t,e,i)}return i}function Mm(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=ie.updateQueue,e===null?(e={lastEffect:null,stores:null},ie.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function Fm(n,e,t,r){e.value=t,e.getSnapshot=r,$m(e)&&zm(n)}function Jm(n,e,t){return t(function(){$m(e)&&zm(n)})}function $m(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!$t(n,t)}catch{return!0}}function zm(n){var e=kr(n,1);e!==null&&Mt(e,n,1,-1)}function rh(n){var e=Vt();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:mo,lastRenderedState:n},e.queue=n,n=n.dispatch=Lw.bind(null,ie,n),[e.memoizedState,n]}function po(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=ie.updateQueue,e===null?(e={lastEffect:null,stores:null},ie.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function Um(){return It().memoizedState}function ma(n,e,t,r){var i=Vt();ie.flags|=n,i.memoizedState=po(1|e,t,void 0,r===void 0?null:r)}function Pl(n,e,t,r){var i=It();r=r===void 0?null:r;var s=void 0;if(ye!==null){var o=ye.memoizedState;if(s=o.destroy,r!==null&&Pf(r,o.deps)){i.memoizedState=po(e,t,s,r);return}}ie.flags|=n,i.memoizedState=po(1|e,t,s,r)}function ih(n,e){return ma(8390656,8,n,e)}function Rf(n,e){return Pl(2048,8,n,e)}function jm(n,e){return Pl(4,2,n,e)}function Vm(n,e){return Pl(4,4,n,e)}function qm(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function Km(n,e,t){return t=t!=null?t.concat([n]):null,Pl(4,4,qm.bind(null,e,n),t)}function Lf(){}function Wm(n,e){var t=It();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&Pf(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function _m(n,e){var t=It();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&Pf(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function Hm(n,e,t){return Ti&21?($t(t,e)||(t=Qg(),ie.lanes|=t,Ai|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,Ve=!0),n.memoizedState=t)}function Ow(n,e){var t=Y;Y=t!==0&&4>t?t:4,n(!0);var r=fu.transition;fu.transition={};try{n(!1),e()}finally{Y=t,fu.transition=r}}function Gm(){return It().memoizedState}function Rw(n,e,t){var r=Kr(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},Ym(n))Qm(e,t);else if(t=Cm(n,e,t,r),t!==null){var i=Fe();Mt(t,n,r,i),Xm(t,e,r)}}function Lw(n,e,t){var r=Kr(n),i={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(Ym(n))Qm(e,i);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(i.hasEagerState=!0,i.eagerState=a,$t(a,o)){var u=e.interleaved;u===null?(i.next=i,If(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}t=Cm(n,e,i,r),t!==null&&(i=Fe(),Mt(t,n,r,i),Xm(t,e,r))}}function Ym(n){var e=n.alternate;return n===ie||e!==null&&e===ie}function Qm(n,e){Ks=qa=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function Xm(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,cf(n,t)}}var Ka={readContext:At,useCallback:Pe,useContext:Pe,useEffect:Pe,useImperativeHandle:Pe,useInsertionEffect:Pe,useLayoutEffect:Pe,useMemo:Pe,useReducer:Pe,useRef:Pe,useState:Pe,useDebugValue:Pe,useDeferredValue:Pe,useTransition:Pe,useMutableSource:Pe,useSyncExternalStore:Pe,useId:Pe,unstable_isNewReconciler:!1},Bw={readContext:At,useCallback:function(n,e){return Vt().memoizedState=[n,e===void 0?null:e],n},useContext:At,useEffect:ih,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,ma(4194308,4,qm.bind(null,e,n),t)},useLayoutEffect:function(n,e){return ma(4194308,4,n,e)},useInsertionEffect:function(n,e){return ma(4,2,n,e)},useMemo:function(n,e){var t=Vt();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=Vt();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=Rw.bind(null,ie,n),[r.memoizedState,n]},useRef:function(n){var e=Vt();return n={current:n},e.memoizedState=n},useState:rh,useDebugValue:Lf,useDeferredValue:function(n){return Vt().memoizedState=n},useTransition:function(){var n=rh(!1),e=n[0];return n=Ow.bind(null,n[1]),Vt().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=ie,i=Vt();if(te){if(t===void 0)throw Error(C(407));t=t()}else{if(t=e(),Ae===null)throw Error(C(349));Ti&30||Mm(r,e,t)}i.memoizedState=t;var s={value:t,getSnapshot:e};return i.queue=s,ih(Jm.bind(null,r,s,n),[n]),r.flags|=2048,po(9,Fm.bind(null,r,s,t,e),void 0,null),t},useId:function(){var n=Vt(),e=Ae.identifierPrefix;if(te){var t=dr,r=fr;t=(r&~(1<<32-bt(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=go++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=Dw++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},bw={readContext:At,useCallback:Wm,useContext:At,useEffect:Rf,useImperativeHandle:Km,useInsertionEffect:jm,useLayoutEffect:Vm,useMemo:_m,useReducer:du,useRef:Um,useState:function(){return du(mo)},useDebugValue:Lf,useDeferredValue:function(n){var e=It();return Hm(e,ye.memoizedState,n)},useTransition:function(){var n=du(mo)[0],e=It().memoizedState;return[n,e]},useMutableSource:Bm,useSyncExternalStore:bm,useId:Gm,unstable_isNewReconciler:!1},Mw={readContext:At,useCallback:Wm,useContext:At,useEffect:Rf,useImperativeHandle:Km,useInsertionEffect:jm,useLayoutEffect:Vm,useMemo:_m,useReducer:hu,useRef:Um,useState:function(){return hu(mo)},useDebugValue:Lf,useDeferredValue:function(n){var e=It();return ye===null?e.memoizedState=n:Hm(e,ye.memoizedState,n)},useTransition:function(){var n=hu(mo)[0],e=It().memoizedState;return[n,e]},useMutableSource:Bm,useSyncExternalStore:bm,useId:Gm,unstable_isNewReconciler:!1};function us(n,e){try{var t="",r=e;do t+=cv(r),r=r.return;while(r);var i=t}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:i,digest:null}}function gu(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function lc(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var Fw=typeof WeakMap=="function"?WeakMap:Map;function Zm(n,e,t){t=pr(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){_a||(_a=!0,vc=r),lc(n,e)},t}function ep(n,e,t){t=pr(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;t.payload=function(){return r(i)},t.callback=function(){lc(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){lc(n,e),typeof r!="function"&&(qr===null?qr=new Set([this]):qr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function sh(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new Fw;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(t)||(i.add(t),n=Qw.bind(null,n,e,t),e.then(n,n))}function oh(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function ah(n,e,t,r,i){return n.mode&1?(n.flags|=65536,n.lanes=i,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=pr(-1,1),e.tag=2,Vr(t,e,1))),t.lanes|=1),n)}var Jw=Er.ReactCurrentOwner,Ve=!1;function be(n,e,t,r){e.child=n===null?Rm(e,null,t,r):as(e,n.child,t,r)}function lh(n,e,t,r,i){t=t.render;var s=e.ref;return Zi(e,i),r=Df(n,e,t,r,s,i),t=Of(),n!==null&&!Ve?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Tr(n,e,i)):(te&&t&&vf(e),e.flags|=1,be(n,e,r,i),e.child)}function uh(n,e,t,r,i){if(n===null){var s=t.type;return typeof s=="function"&&!Uf(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,tp(n,e,s,r,i)):(n=wa(t.type,null,r,e,e.mode,i),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&i)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:ao,t(o,r)&&n.ref===e.ref)return Tr(n,e,i)}return e.flags|=1,n=Wr(s,r),n.ref=e.ref,n.return=e,e.child=n}function tp(n,e,t,r,i){if(n!==null){var s=n.memoizedProps;if(ao(s,r)&&n.ref===e.ref)if(Ve=!1,e.pendingProps=r=s,(n.lanes&i)!==0)n.flags&131072&&(Ve=!0);else return e.lanes=n.lanes,Tr(n,e,i)}return uc(n,e,t,r,i)}function np(n,e,t){var r=e.pendingProps,i=r.children,s=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},X(Wi,Ye),Ye|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,X(Wi,Ye),Ye|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:t,X(Wi,Ye),Ye|=r}else s!==null?(r=s.baseLanes|t,e.memoizedState=null):r=t,X(Wi,Ye),Ye|=r;return be(n,e,i,t),e.child}function rp(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function uc(n,e,t,r,i){var s=We(t)?Si:Le.current;return s=ss(e,s),Zi(e,i),t=Df(n,e,t,r,s,i),r=Of(),n!==null&&!Ve?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Tr(n,e,i)):(te&&r&&vf(e),e.flags|=1,be(n,e,t,i),e.child)}function ch(n,e,t,r,i){if(We(t)){var s=!0;Fa(e)}else s=!1;if(Zi(e,i),e.stateNode===null)pa(n,e),Dm(e,t,r),ac(e,t,r,i),r=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var u=o.context,c=t.contextType;typeof c=="object"&&c!==null?c=At(c):(c=We(t)?Si:Le.current,c=ss(e,c));var d=t.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||u!==c)&&th(e,o,r,c),Lr=!1;var m=e.memoizedState;o.state=m,ja(e,r,o,i),u=e.memoizedState,a!==r||m!==u||Ke.current||Lr?(typeof d=="function"&&(oc(e,t,d,r),u=e.memoizedState),(a=Lr||eh(e,t,a,r,m,u,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Nm(n,e),a=e.memoizedProps,c=e.type===e.elementType?a:Pt(e.type,a),o.props=c,h=e.pendingProps,m=o.context,u=t.contextType,typeof u=="object"&&u!==null?u=At(u):(u=We(t)?Si:Le.current,u=ss(e,u));var y=t.getDerivedStateFromProps;(d=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||m!==u)&&th(e,o,r,u),Lr=!1,m=e.memoizedState,o.state=m,ja(e,r,o,i);var w=e.memoizedState;a!==h||m!==w||Ke.current||Lr?(typeof y=="function"&&(oc(e,t,y,r),w=e.memoizedState),(c=Lr||eh(e,t,c,r,m,w,u)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,w,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,w,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&m===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&m===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=w),o.props=r,o.state=w,o.context=u,r=c):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&m===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&m===n.memoizedState||(e.flags|=1024),r=!1)}return cc(n,e,t,r,s,i)}function cc(n,e,t,r,i,s){rp(n,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Gd(e,t,!1),Tr(n,e,s);r=e.stateNode,Jw.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&o?(e.child=as(e,n.child,null,s),e.child=as(e,null,a,s)):be(n,e,a,s),e.memoizedState=r.state,i&&Gd(e,t,!0),e.child}function ip(n){var e=n.stateNode;e.pendingContext?Hd(n,e.pendingContext,e.pendingContext!==e.context):e.context&&Hd(n,e.context,!1),xf(n,e.containerInfo)}function fh(n,e,t,r,i){return os(),Sf(i),e.flags|=256,be(n,e,t,r),e.child}var fc={dehydrated:null,treeContext:null,retryLane:0};function dc(n){return{baseLanes:n,cachePool:null,transitions:null}}function sp(n,e,t){var r=e.pendingProps,i=re.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(i|=1),X(re,i&1),n===null)return ic(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,n=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Rl(o,r,0,null),n=yi(n,r,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=dc(t),e.memoizedState=fc,n):Bf(e,o));if(i=n.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return $w(n,e,o,r,a,i,t);if(s){s=r.fallback,o=e.mode,i=n.child,a=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Wr(i,u),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Wr(a,s):(s=yi(s,o,t,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=n.child.memoizedState,o=o===null?dc(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=fc,r}return s=n.child,n=s.sibling,r=Wr(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function Bf(n,e){return e=Rl({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function Zo(n,e,t,r){return r!==null&&Sf(r),as(e,n.child,null,t),n=Bf(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function $w(n,e,t,r,i,s,o){if(t)return e.flags&256?(e.flags&=-257,r=gu(Error(C(422))),Zo(n,e,o,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Rl({mode:"visible",children:r.children},i,0,null),s=yi(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&as(e,n.child,null,o),e.child.memoizedState=dc(o),e.memoizedState=fc,s);if(!(e.mode&1))return Zo(n,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(C(419)),r=gu(s,r,void 0),Zo(n,e,o,r)}if(a=(o&n.childLanes)!==0,Ve||a){if(r=Ae,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,kr(n,i),Mt(r,n,i,-1))}return zf(),r=gu(Error(C(421))),Zo(n,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=n.child,e=Xw.bind(null,n),i._reactRetry=e,null):(n=s.treeContext,Qe=jr(i.nextSibling),et=e,te=!0,Rt=null,n!==null&&(ot[at++]=fr,ot[at++]=dr,ot[at++]=ki,fr=n.id,dr=n.overflow,ki=e),e=Bf(e,r.children),e.flags|=4096,e)}function dh(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),sc(n.return,e,t)}function mu(n,e,t,r,i){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=t,s.tailMode=i)}function op(n,e,t){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(be(n,e,r.children,t),r=re.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&dh(n,t,e);else if(n.tag===19)dh(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(X(re,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)n=t.alternate,n!==null&&Va(n)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),mu(e,!1,i,t,s);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(n=i.alternate,n!==null&&Va(n)===null){e.child=i;break}n=i.sibling,i.sibling=t,t=i,i=n}mu(e,!0,t,null,s);break;case"together":mu(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function pa(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Tr(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),Ai|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(C(153));if(e.child!==null){for(n=e.child,t=Wr(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=Wr(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function zw(n,e,t){switch(e.tag){case 3:ip(e),os();break;case 5:Lm(e);break;case 1:We(e.type)&&Fa(e);break;case 4:xf(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;X(za,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(X(re,re.current&1),e.flags|=128,null):t&e.child.childLanes?sp(n,e,t):(X(re,re.current&1),n=Tr(n,e,t),n!==null?n.sibling:null);X(re,re.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return op(n,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),X(re,re.current),r)break;return null;case 22:case 23:return e.lanes=0,np(n,e,t)}return Tr(n,e,t)}var ap,hc,lp,up;ap=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};hc=function(){};lp=function(n,e,t,r){var i=n.memoizedProps;if(i!==r){n=e.stateNode,hi(sn.current);var s=null;switch(t){case"input":i=bu(n,i),r=bu(n,r),s=[];break;case"select":i=se({},i,{value:void 0}),r=se({},r,{value:void 0}),s=[];break;case"textarea":i=Ju(n,i),r=Ju(n,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=ba)}zu(t,r);var o;t=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(eo.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var u=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&u!==a&&(u!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(t||(t={}),t[o]=u[o])}else t||(s||(s=[]),s.push(c,t)),t=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(s=s||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(eo.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&Z("scroll",n),s||a===u||(s=[])):(s=s||[]).push(c,u))}t&&(s=s||[]).push("style",t);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};up=function(n,e,t,r){t!==r&&(e.flags|=4)};function Ds(n,e){if(!te)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function De(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=n,i=i.sibling;else for(i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=n,i=i.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function Uw(n,e,t){var r=e.pendingProps;switch(wf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return De(e),null;case 1:return We(e.type)&&Ma(),De(e),null;case 3:return r=e.stateNode,ls(),ee(Ke),ee(Le),Nf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(Qo(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Rt!==null&&(kc(Rt),Rt=null))),hc(n,e),De(e),null;case 5:Cf(e);var i=hi(ho.current);if(t=e.type,n!==null&&e.stateNode!=null)lp(n,e,t,r,i),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(C(166));return De(e),null}if(n=hi(sn.current),Qo(e)){r=e.stateNode,t=e.type;var s=e.memoizedProps;switch(r[Wt]=e,r[co]=s,n=(e.mode&1)!==0,t){case"dialog":Z("cancel",r),Z("close",r);break;case"iframe":case"object":case"embed":Z("load",r);break;case"video":case"audio":for(i=0;i<Js.length;i++)Z(Js[i],r);break;case"source":Z("error",r);break;case"img":case"image":case"link":Z("error",r),Z("load",r);break;case"details":Z("toggle",r);break;case"input":kd(r,s),Z("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Z("invalid",r);break;case"textarea":Ad(r,s),Z("invalid",r)}zu(t,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Yo(r.textContent,a,n),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Yo(r.textContent,a,n),i=["children",""+a]):eo.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Z("scroll",r)}switch(t){case"input":jo(r),Td(r,s,!0);break;case"textarea":jo(r),Id(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=ba)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Mg(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=o.createElement(t,{is:r.is}):(n=o.createElement(t),t==="select"&&(o=n,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):n=o.createElementNS(n,t),n[Wt]=e,n[co]=r,ap(n,e,!1,!1),e.stateNode=n;e:{switch(o=Uu(t,r),t){case"dialog":Z("cancel",n),Z("close",n),i=r;break;case"iframe":case"object":case"embed":Z("load",n),i=r;break;case"video":case"audio":for(i=0;i<Js.length;i++)Z(Js[i],n);i=r;break;case"source":Z("error",n),i=r;break;case"img":case"image":case"link":Z("error",n),Z("load",n),i=r;break;case"details":Z("toggle",n),i=r;break;case"input":kd(n,r),i=bu(n,r),Z("invalid",n);break;case"option":i=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},i=se({},r,{value:void 0}),Z("invalid",n);break;case"textarea":Ad(n,r),i=Ju(n,r),Z("invalid",n);break;default:i=r}zu(t,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var u=a[s];s==="style"?$g(n,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Fg(n,u)):s==="children"?typeof u=="string"?(t!=="textarea"||u!=="")&&to(n,u):typeof u=="number"&&to(n,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(eo.hasOwnProperty(s)?u!=null&&s==="onScroll"&&Z("scroll",n):u!=null&&rf(n,s,u,o))}switch(t){case"input":jo(n),Td(n,r,!1);break;case"textarea":jo(n),Id(n);break;case"option":r.value!=null&&n.setAttribute("value",""+Yr(r.value));break;case"select":n.multiple=!!r.multiple,s=r.value,s!=null?Gi(n,!!r.multiple,s,!1):r.defaultValue!=null&&Gi(n,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(n.onclick=ba)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return De(e),null;case 6:if(n&&e.stateNode!=null)up(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(C(166));if(t=hi(ho.current),hi(sn.current),Qo(e)){if(r=e.stateNode,t=e.memoizedProps,r[Wt]=e,(s=r.nodeValue!==t)&&(n=et,n!==null))switch(n.tag){case 3:Yo(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Yo(r.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[Wt]=e,e.stateNode=r}return De(e),null;case 13:if(ee(re),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(te&&Qe!==null&&e.mode&1&&!(e.flags&128))xm(),os(),e.flags|=98560,s=!1;else if(s=Qo(e),r!==null&&r.dehydrated!==null){if(n===null){if(!s)throw Error(C(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(C(317));s[Wt]=e}else os(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;De(e),s=!1}else Rt!==null&&(kc(Rt),Rt=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(n===null||re.current&1?we===0&&(we=3):zf())),e.updateQueue!==null&&(e.flags|=4),De(e),null);case 4:return ls(),hc(n,e),n===null&&lo(e.stateNode.containerInfo),De(e),null;case 10:return Af(e.type._context),De(e),null;case 17:return We(e.type)&&Ma(),De(e),null;case 19:if(ee(re),s=e.memoizedState,s===null)return De(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Ds(s,!1);else{if(we!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=Va(n),o!==null){for(e.flags|=128,Ds(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)s=t,n=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return X(re,re.current&1|2),e.child}n=n.sibling}s.tail!==null&&he()>cs&&(e.flags|=128,r=!0,Ds(s,!1),e.lanes=4194304)}else{if(!r)if(n=Va(o),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Ds(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!te)return De(e),null}else 2*he()-s.renderingStartTime>cs&&t!==1073741824&&(e.flags|=128,r=!0,Ds(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=he(),e.sibling=null,t=re.current,X(re,r?t&1|2:t&1),e):(De(e),null);case 22:case 23:return $f(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ye&1073741824&&(De(e),e.subtreeFlags&6&&(e.flags|=8192)):De(e),null;case 24:return null;case 25:return null}throw Error(C(156,e.tag))}function jw(n,e){switch(wf(e),e.tag){case 1:return We(e.type)&&Ma(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return ls(),ee(Ke),ee(Le),Nf(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return Cf(e),null;case 13:if(ee(re),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(C(340));os()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return ee(re),null;case 4:return ls(),null;case 10:return Af(e.type._context),null;case 22:case 23:return $f(),null;case 24:return null;default:return null}}var ea=!1,Oe=!1,Vw=typeof WeakSet=="function"?WeakSet:Set,L=null;function Ki(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){ae(n,e,r)}else t.current=null}function gc(n,e,t){try{t()}catch(r){ae(n,e,r)}}var hh=!1;function qw(n,e){if(Qu=Ra,n=hm(),yf(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,u=-1,c=0,d=0,h=n,m=null;t:for(;;){for(var y;h!==t||i!==0&&h.nodeType!==3||(a=o+i),h!==s||r!==0&&h.nodeType!==3||(u=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(y=h.firstChild)!==null;)m=h,h=y;for(;;){if(h===n)break t;if(m===t&&++c===i&&(a=o),m===s&&++d===r&&(u=o),(y=h.nextSibling)!==null)break;h=m,m=h.parentNode}h=y}t=a===-1||u===-1?null:{start:a,end:u}}else t=null}t=t||{start:0,end:0}}else t=null;for(Xu={focusedElem:n,selectionRange:t},Ra=!1,L=e;L!==null;)if(e=L,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,L=n;else for(;L!==null;){e=L;try{var w=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var T=w.memoizedProps,P=w.memoizedState,p=e.stateNode,g=p.getSnapshotBeforeUpdate(e.elementType===e.type?T:Pt(e.type,T),P);p.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(C(163))}}catch(I){ae(e,e.return,I)}if(n=e.sibling,n!==null){n.return=e.return,L=n;break}L=e.return}return w=hh,hh=!1,w}function Ws(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&n)===n){var s=i.destroy;i.destroy=void 0,s!==void 0&&gc(e,t,s)}i=i.next}while(i!==r)}}function Dl(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function mc(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function cp(n){var e=n.alternate;e!==null&&(n.alternate=null,cp(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Wt],delete e[co],delete e[tc],delete e[xw],delete e[Cw])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function fp(n){return n.tag===5||n.tag===3||n.tag===4}function gh(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||fp(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function pc(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=ba));else if(r!==4&&(n=n.child,n!==null))for(pc(n,e,t),n=n.sibling;n!==null;)pc(n,e,t),n=n.sibling}function yc(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(yc(n,e,t),n=n.sibling;n!==null;)yc(n,e,t),n=n.sibling}var Ie=null,Ot=!1;function Cr(n,e,t){for(t=t.child;t!==null;)dp(n,e,t),t=t.sibling}function dp(n,e,t){if(rn&&typeof rn.onCommitFiberUnmount=="function")try{rn.onCommitFiberUnmount(Tl,t)}catch{}switch(t.tag){case 5:Oe||Ki(t,e);case 6:var r=Ie,i=Ot;Ie=null,Cr(n,e,t),Ie=r,Ot=i,Ie!==null&&(Ot?(n=Ie,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):Ie.removeChild(t.stateNode));break;case 18:Ie!==null&&(Ot?(n=Ie,t=t.stateNode,n.nodeType===8?lu(n.parentNode,t):n.nodeType===1&&lu(n,t),so(n)):lu(Ie,t.stateNode));break;case 4:r=Ie,i=Ot,Ie=t.stateNode.containerInfo,Ot=!0,Cr(n,e,t),Ie=r,Ot=i;break;case 0:case 11:case 14:case 15:if(!Oe&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&gc(t,e,o),i=i.next}while(i!==r)}Cr(n,e,t);break;case 1:if(!Oe&&(Ki(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(a){ae(t,e,a)}Cr(n,e,t);break;case 21:Cr(n,e,t);break;case 22:t.mode&1?(Oe=(r=Oe)||t.memoizedState!==null,Cr(n,e,t),Oe=r):Cr(n,e,t);break;default:Cr(n,e,t)}}function mh(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new Vw),e.forEach(function(r){var i=Zw.bind(null,n,r);t.has(r)||(t.add(r),r.then(i,i))})}}function Nt(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var i=t[r];try{var s=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Ie=a.stateNode,Ot=!1;break e;case 3:Ie=a.stateNode.containerInfo,Ot=!0;break e;case 4:Ie=a.stateNode.containerInfo,Ot=!0;break e}a=a.return}if(Ie===null)throw Error(C(160));dp(s,o,i),Ie=null,Ot=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(c){ae(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)hp(e,n),e=e.sibling}function hp(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Nt(e,n),jt(n),r&4){try{Ws(3,n,n.return),Dl(3,n)}catch(T){ae(n,n.return,T)}try{Ws(5,n,n.return)}catch(T){ae(n,n.return,T)}}break;case 1:Nt(e,n),jt(n),r&512&&t!==null&&Ki(t,t.return);break;case 5:if(Nt(e,n),jt(n),r&512&&t!==null&&Ki(t,t.return),n.flags&32){var i=n.stateNode;try{to(i,"")}catch(T){ae(n,n.return,T)}}if(r&4&&(i=n.stateNode,i!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,a=n.type,u=n.updateQueue;if(n.updateQueue=null,u!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&Bg(i,s),Uu(a,o);var c=Uu(a,s);for(o=0;o<u.length;o+=2){var d=u[o],h=u[o+1];d==="style"?$g(i,h):d==="dangerouslySetInnerHTML"?Fg(i,h):d==="children"?to(i,h):rf(i,d,h,c)}switch(a){case"input":Mu(i,s);break;case"textarea":bg(i,s);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var y=s.value;y!=null?Gi(i,!!s.multiple,y,!1):m!==!!s.multiple&&(s.defaultValue!=null?Gi(i,!!s.multiple,s.defaultValue,!0):Gi(i,!!s.multiple,s.multiple?[]:"",!1))}i[co]=s}catch(T){ae(n,n.return,T)}}break;case 6:if(Nt(e,n),jt(n),r&4){if(n.stateNode===null)throw Error(C(162));i=n.stateNode,s=n.memoizedProps;try{i.nodeValue=s}catch(T){ae(n,n.return,T)}}break;case 3:if(Nt(e,n),jt(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{so(e.containerInfo)}catch(T){ae(n,n.return,T)}break;case 4:Nt(e,n),jt(n);break;case 13:Nt(e,n),jt(n),i=n.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Ff=he())),r&4&&mh(n);break;case 22:if(d=t!==null&&t.memoizedState!==null,n.mode&1?(Oe=(c=Oe)||d,Nt(e,n),Oe=c):Nt(e,n),jt(n),r&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!d&&n.mode&1)for(L=n,d=n.child;d!==null;){for(h=L=d;L!==null;){switch(m=L,y=m.child,m.tag){case 0:case 11:case 14:case 15:Ws(4,m,m.return);break;case 1:Ki(m,m.return);var w=m.stateNode;if(typeof w.componentWillUnmount=="function"){r=m,t=m.return;try{e=r,w.props=e.memoizedProps,w.state=e.memoizedState,w.componentWillUnmount()}catch(T){ae(r,t,T)}}break;case 5:Ki(m,m.return);break;case 22:if(m.memoizedState!==null){yh(h);continue}}y!==null?(y.return=m,L=y):yh(h)}d=d.sibling}e:for(d=null,h=n;;){if(h.tag===5){if(d===null){d=h;try{i=h.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,u=h.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=Jg("display",o))}catch(T){ae(n,n.return,T)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(T){ae(n,n.return,T)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===n)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===n)break e;for(;h.sibling===null;){if(h.return===null||h.return===n)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Nt(e,n),jt(n),r&4&&mh(n);break;case 21:break;default:Nt(e,n),jt(n)}}function jt(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(fp(t)){var r=t;break e}t=t.return}throw Error(C(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(to(i,""),r.flags&=-33);var s=gh(n);yc(n,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=gh(n);pc(n,a,o);break;default:throw Error(C(161))}}catch(u){ae(n,n.return,u)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function Kw(n,e,t){L=n,gp(n)}function gp(n,e,t){for(var r=(n.mode&1)!==0;L!==null;){var i=L,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||ea;if(!o){var a=i.alternate,u=a!==null&&a.memoizedState!==null||Oe;a=ea;var c=Oe;if(ea=o,(Oe=u)&&!c)for(L=i;L!==null;)o=L,u=o.child,o.tag===22&&o.memoizedState!==null?vh(i):u!==null?(u.return=o,L=u):vh(i);for(;s!==null;)L=s,gp(s),s=s.sibling;L=i,ea=a,Oe=c}ph(n)}else i.subtreeFlags&8772&&s!==null?(s.return=i,L=s):ph(n)}}function ph(n){for(;L!==null;){var e=L;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Oe||Dl(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Oe)if(t===null)r.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:Pt(e.type,t.memoizedProps);r.componentDidUpdate(i,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Zd(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}Zd(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&t.focus();break;case"img":u.src&&(t.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&so(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(C(163))}Oe||e.flags&512&&mc(e)}catch(m){ae(e,e.return,m)}}if(e===n){L=null;break}if(t=e.sibling,t!==null){t.return=e.return,L=t;break}L=e.return}}function yh(n){for(;L!==null;){var e=L;if(e===n){L=null;break}var t=e.sibling;if(t!==null){t.return=e.return,L=t;break}L=e.return}}function vh(n){for(;L!==null;){var e=L;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{Dl(4,e)}catch(u){ae(e,t,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){ae(e,i,u)}}var s=e.return;try{mc(e)}catch(u){ae(e,s,u)}break;case 5:var o=e.return;try{mc(e)}catch(u){ae(e,o,u)}}}catch(u){ae(e,e.return,u)}if(e===n){L=null;break}var a=e.sibling;if(a!==null){a.return=e.return,L=a;break}L=e.return}}var Ww=Math.ceil,Wa=Er.ReactCurrentDispatcher,bf=Er.ReactCurrentOwner,kt=Er.ReactCurrentBatchConfig,_=0,Ae=null,pe=null,xe=0,Ye=0,Wi=ni(0),we=0,yo=null,Ai=0,Ol=0,Mf=0,_s=null,ze=null,Ff=0,cs=1/0,ln=null,_a=!1,vc=null,qr=null,ta=!1,Fr=null,Ha=0,Hs=0,wc=null,ya=-1,va=0;function Fe(){return _&6?he():ya!==-1?ya:ya=he()}function Kr(n){return n.mode&1?_&2&&xe!==0?xe&-xe:Pw.transition!==null?(va===0&&(va=Qg()),va):(n=Y,n!==0||(n=window.event,n=n===void 0?16:im(n.type)),n):1}function Mt(n,e,t,r){if(50<Hs)throw Hs=0,wc=null,Error(C(185));Po(n,t,r),(!(_&2)||n!==Ae)&&(n===Ae&&(!(_&2)&&(Ol|=t),we===4&&br(n,xe)),_e(n,r),t===1&&_===0&&!(e.mode&1)&&(cs=he()+500,Cl&&ri()))}function _e(n,e){var t=n.callbackNode;Pv(n,e);var r=Oa(n,n===Ae?xe:0);if(r===0)t!==null&&Cd(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&Cd(t),e===1)n.tag===0?Nw(wh.bind(null,n)):Am(wh.bind(null,n)),Iw(function(){!(_&6)&&ri()}),t=null;else{switch(Xg(r)){case 1:t=uf;break;case 4:t=Gg;break;case 16:t=Da;break;case 536870912:t=Yg;break;default:t=Da}t=Tp(t,mp.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function mp(n,e){if(ya=-1,va=0,_&6)throw Error(C(327));var t=n.callbackNode;if(es()&&n.callbackNode!==t)return null;var r=Oa(n,n===Ae?xe:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=Ga(n,r);else{e=r;var i=_;_|=2;var s=yp();(Ae!==n||xe!==e)&&(ln=null,cs=he()+500,pi(n,e));do try{Gw();break}catch(a){pp(n,a)}while(!0);Tf(),Wa.current=s,_=i,pe!==null?e=0:(Ae=null,xe=0,e=we)}if(e!==0){if(e===2&&(i=Wu(n),i!==0&&(r=i,e=Sc(n,i))),e===1)throw t=yo,pi(n,0),br(n,r),_e(n,he()),t;if(e===6)br(n,r);else{if(i=n.current.alternate,!(r&30)&&!_w(i)&&(e=Ga(n,r),e===2&&(s=Wu(n),s!==0&&(r=s,e=Sc(n,s))),e===1))throw t=yo,pi(n,0),br(n,r),_e(n,he()),t;switch(n.finishedWork=i,n.finishedLanes=r,e){case 0:case 1:throw Error(C(345));case 2:li(n,ze,ln);break;case 3:if(br(n,r),(r&130023424)===r&&(e=Ff+500-he(),10<e)){if(Oa(n,0)!==0)break;if(i=n.suspendedLanes,(i&r)!==r){Fe(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=ec(li.bind(null,n,ze,ln),e);break}li(n,ze,ln);break;case 4:if(br(n,r),(r&4194240)===r)break;for(e=n.eventTimes,i=-1;0<r;){var o=31-bt(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=he()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ww(r/1960))-r,10<r){n.timeoutHandle=ec(li.bind(null,n,ze,ln),r);break}li(n,ze,ln);break;case 5:li(n,ze,ln);break;default:throw Error(C(329))}}}return _e(n,he()),n.callbackNode===t?mp.bind(null,n):null}function Sc(n,e){var t=_s;return n.current.memoizedState.isDehydrated&&(pi(n,e).flags|=256),n=Ga(n,e),n!==2&&(e=ze,ze=t,e!==null&&kc(e)),n}function kc(n){ze===null?ze=n:ze.push.apply(ze,n)}function _w(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var i=t[r],s=i.getSnapshot;i=i.value;try{if(!$t(s(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function br(n,e){for(e&=~Mf,e&=~Ol,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-bt(e),r=1<<t;n[t]=-1,e&=~r}}function wh(n){if(_&6)throw Error(C(327));es();var e=Oa(n,0);if(!(e&1))return _e(n,he()),null;var t=Ga(n,e);if(n.tag!==0&&t===2){var r=Wu(n);r!==0&&(e=r,t=Sc(n,r))}if(t===1)throw t=yo,pi(n,0),br(n,e),_e(n,he()),t;if(t===6)throw Error(C(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,li(n,ze,ln),_e(n,he()),null}function Jf(n,e){var t=_;_|=1;try{return n(e)}finally{_=t,_===0&&(cs=he()+500,Cl&&ri())}}function Ii(n){Fr!==null&&Fr.tag===0&&!(_&6)&&es();var e=_;_|=1;var t=kt.transition,r=Y;try{if(kt.transition=null,Y=1,n)return n()}finally{Y=r,kt.transition=t,_=e,!(_&6)&&ri()}}function $f(){Ye=Wi.current,ee(Wi)}function pi(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,Aw(t)),pe!==null)for(t=pe.return;t!==null;){var r=t;switch(wf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ma();break;case 3:ls(),ee(Ke),ee(Le),Nf();break;case 5:Cf(r);break;case 4:ls();break;case 13:ee(re);break;case 19:ee(re);break;case 10:Af(r.type._context);break;case 22:case 23:$f()}t=t.return}if(Ae=n,pe=n=Wr(n.current,null),xe=Ye=e,we=0,yo=null,Mf=Ol=Ai=0,ze=_s=null,di!==null){for(e=0;e<di.length;e++)if(t=di[e],r=t.interleaved,r!==null){t.interleaved=null;var i=r.next,s=t.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}t.pending=r}di=null}return n}function pp(n,e){do{var t=pe;try{if(Tf(),ga.current=Ka,qa){for(var r=ie.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}qa=!1}if(Ti=0,Te=ye=ie=null,Ks=!1,go=0,bf.current=null,t===null||t.return===null){we=1,yo=e,pe=null;break}e:{var s=n,o=t.return,a=t,u=e;if(e=xe,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var y=oh(o);if(y!==null){y.flags&=-257,ah(y,o,a,s,e),y.mode&1&&sh(s,c,e),e=y,u=c;var w=e.updateQueue;if(w===null){var T=new Set;T.add(u),e.updateQueue=T}else w.add(u);break e}else{if(!(e&1)){sh(s,c,e),zf();break e}u=Error(C(426))}}else if(te&&a.mode&1){var P=oh(o);if(P!==null){!(P.flags&65536)&&(P.flags|=256),ah(P,o,a,s,e),Sf(us(u,a));break e}}s=u=us(u,a),we!==4&&(we=2),_s===null?_s=[s]:_s.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var p=Zm(s,u,e);Xd(s,p);break e;case 1:a=u;var g=s.type,v=s.stateNode;if(!(s.flags&128)&&(typeof g.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(qr===null||!qr.has(v)))){s.flags|=65536,e&=-e,s.lanes|=e;var I=ep(s,a,e);Xd(s,I);break e}}s=s.return}while(s!==null)}wp(t)}catch(E){e=E,pe===t&&t!==null&&(pe=t=t.return);continue}break}while(!0)}function yp(){var n=Wa.current;return Wa.current=Ka,n===null?Ka:n}function zf(){(we===0||we===3||we===2)&&(we=4),Ae===null||!(Ai&268435455)&&!(Ol&268435455)||br(Ae,xe)}function Ga(n,e){var t=_;_|=2;var r=yp();(Ae!==n||xe!==e)&&(ln=null,pi(n,e));do try{Hw();break}catch(i){pp(n,i)}while(!0);if(Tf(),_=t,Wa.current=r,pe!==null)throw Error(C(261));return Ae=null,xe=0,we}function Hw(){for(;pe!==null;)vp(pe)}function Gw(){for(;pe!==null&&!Sv();)vp(pe)}function vp(n){var e=kp(n.alternate,n,Ye);n.memoizedProps=n.pendingProps,e===null?wp(n):pe=e,bf.current=null}function wp(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=jw(t,e),t!==null){t.flags&=32767,pe=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{we=6,pe=null;return}}else if(t=Uw(t,e,Ye),t!==null){pe=t;return}if(e=e.sibling,e!==null){pe=e;return}pe=e=n}while(e!==null);we===0&&(we=5)}function li(n,e,t){var r=Y,i=kt.transition;try{kt.transition=null,Y=1,Yw(n,e,t,r)}finally{kt.transition=i,Y=r}return null}function Yw(n,e,t,r){do es();while(Fr!==null);if(_&6)throw Error(C(327));t=n.finishedWork;var i=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(C(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(Dv(n,s),n===Ae&&(pe=Ae=null,xe=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||ta||(ta=!0,Tp(Da,function(){return es(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=kt.transition,kt.transition=null;var o=Y;Y=1;var a=_;_|=4,bf.current=null,qw(n,t),hp(t,n),pw(Xu),Ra=!!Qu,Xu=Qu=null,n.current=t,Kw(t),kv(),_=a,Y=o,kt.transition=s}else n.current=t;if(ta&&(ta=!1,Fr=n,Ha=i),s=n.pendingLanes,s===0&&(qr=null),Iv(t.stateNode),_e(n,he()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)i=e[t],r(i.value,{componentStack:i.stack,digest:i.digest});if(_a)throw _a=!1,n=vc,vc=null,n;return Ha&1&&n.tag!==0&&es(),s=n.pendingLanes,s&1?n===wc?Hs++:(Hs=0,wc=n):Hs=0,ri(),null}function es(){if(Fr!==null){var n=Xg(Ha),e=kt.transition,t=Y;try{if(kt.transition=null,Y=16>n?16:n,Fr===null)var r=!1;else{if(n=Fr,Fr=null,Ha=0,_&6)throw Error(C(331));var i=_;for(_|=4,L=n.current;L!==null;){var s=L,o=s.child;if(L.flags&16){var a=s.deletions;if(a!==null){for(var u=0;u<a.length;u++){var c=a[u];for(L=c;L!==null;){var d=L;switch(d.tag){case 0:case 11:case 15:Ws(8,d,s)}var h=d.child;if(h!==null)h.return=d,L=h;else for(;L!==null;){d=L;var m=d.sibling,y=d.return;if(cp(d),d===c){L=null;break}if(m!==null){m.return=y,L=m;break}L=y}}}var w=s.alternate;if(w!==null){var T=w.child;if(T!==null){w.child=null;do{var P=T.sibling;T.sibling=null,T=P}while(T!==null)}}L=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,L=o;else e:for(;L!==null;){if(s=L,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Ws(9,s,s.return)}var p=s.sibling;if(p!==null){p.return=s.return,L=p;break e}L=s.return}}var g=n.current;for(L=g;L!==null;){o=L;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,L=v;else e:for(o=g;L!==null;){if(a=L,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Dl(9,a)}}catch(E){ae(a,a.return,E)}if(a===o){L=null;break e}var I=a.sibling;if(I!==null){I.return=a.return,L=I;break e}L=a.return}}if(_=i,ri(),rn&&typeof rn.onPostCommitFiberRoot=="function")try{rn.onPostCommitFiberRoot(Tl,n)}catch{}r=!0}return r}finally{Y=t,kt.transition=e}}return!1}function Sh(n,e,t){e=us(t,e),e=Zm(n,e,1),n=Vr(n,e,1),e=Fe(),n!==null&&(Po(n,1,e),_e(n,e))}function ae(n,e,t){if(n.tag===3)Sh(n,n,t);else for(;e!==null;){if(e.tag===3){Sh(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(qr===null||!qr.has(r))){n=us(t,n),n=ep(e,n,1),e=Vr(e,n,1),n=Fe(),e!==null&&(Po(e,1,n),_e(e,n));break}}e=e.return}}function Qw(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=Fe(),n.pingedLanes|=n.suspendedLanes&t,Ae===n&&(xe&t)===t&&(we===4||we===3&&(xe&130023424)===xe&&500>he()-Ff?pi(n,0):Mf|=t),_e(n,e)}function Sp(n,e){e===0&&(n.mode&1?(e=Ko,Ko<<=1,!(Ko&130023424)&&(Ko=4194304)):e=1);var t=Fe();n=kr(n,e),n!==null&&(Po(n,e,t),_e(n,t))}function Xw(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),Sp(n,t)}function Zw(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,i=n.memoizedState;i!==null&&(t=i.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(C(314))}r!==null&&r.delete(e),Sp(n,t)}var kp;kp=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||Ke.current)Ve=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return Ve=!1,zw(n,e,t);Ve=!!(n.flags&131072)}else Ve=!1,te&&e.flags&1048576&&Im(e,$a,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;pa(n,e),n=e.pendingProps;var i=ss(e,Le.current);Zi(e,t),i=Df(null,e,r,n,i,t);var s=Of();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,We(r)?(s=!0,Fa(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Ef(e),i.updater=Nl,e.stateNode=i,i._reactInternals=e,ac(e,r,n,t),e=cc(null,e,r,!0,s,t)):(e.tag=0,te&&s&&vf(e),be(null,e,i,t),e=e.child),e;case 16:r=e.elementType;e:{switch(pa(n,e),n=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=t0(r),n=Pt(r,n),i){case 0:e=uc(null,e,r,n,t);break e;case 1:e=ch(null,e,r,n,t);break e;case 11:e=lh(null,e,r,n,t);break e;case 14:e=uh(null,e,r,Pt(r.type,n),t);break e}throw Error(C(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Pt(r,i),uc(n,e,r,i,t);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Pt(r,i),ch(n,e,r,i,t);case 3:e:{if(ip(e),n===null)throw Error(C(387));r=e.pendingProps,s=e.memoizedState,i=s.element,Nm(n,e),ja(e,r,null,t);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=us(Error(C(423)),e),e=fh(n,e,r,t,i);break e}else if(r!==i){i=us(Error(C(424)),e),e=fh(n,e,r,t,i);break e}else for(Qe=jr(e.stateNode.containerInfo.firstChild),et=e,te=!0,Rt=null,t=Rm(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(os(),r===i){e=Tr(n,e,t);break e}be(n,e,r,t)}e=e.child}return e;case 5:return Lm(e),n===null&&ic(e),r=e.type,i=e.pendingProps,s=n!==null?n.memoizedProps:null,o=i.children,Zu(r,i)?o=null:s!==null&&Zu(r,s)&&(e.flags|=32),rp(n,e),be(n,e,o,t),e.child;case 6:return n===null&&ic(e),null;case 13:return sp(n,e,t);case 4:return xf(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=as(e,null,r,t):be(n,e,r,t),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Pt(r,i),lh(n,e,r,i,t);case 7:return be(n,e,e.pendingProps,t),e.child;case 8:return be(n,e,e.pendingProps.children,t),e.child;case 12:return be(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,X(za,r._currentValue),r._currentValue=o,s!==null)if($t(s.value,o)){if(s.children===i.children&&!Ke.current){e=Tr(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=pr(-1,t&-t),u.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?u.next=u:(u.next=d.next,d.next=u),c.pending=u}}s.lanes|=t,u=s.alternate,u!==null&&(u.lanes|=t),sc(s.return,t,e),a.lanes|=t;break}u=u.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(C(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),sc(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}be(n,e,i.children,t),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Zi(e,t),i=At(i),r=r(i),e.flags|=1,be(n,e,r,t),e.child;case 14:return r=e.type,i=Pt(r,e.pendingProps),i=Pt(r.type,i),uh(n,e,r,i,t);case 15:return tp(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Pt(r,i),pa(n,e),e.tag=1,We(r)?(n=!0,Fa(e)):n=!1,Zi(e,t),Dm(e,r,i),ac(e,r,i,t),cc(null,e,r,!0,n,t);case 19:return op(n,e,t);case 22:return np(n,e,t)}throw Error(C(156,e.tag))};function Tp(n,e){return Hg(n,e)}function e0(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vt(n,e,t,r){return new e0(n,e,t,r)}function Uf(n){return n=n.prototype,!(!n||!n.isReactComponent)}function t0(n){if(typeof n=="function")return Uf(n)?1:0;if(n!=null){if(n=n.$$typeof,n===of)return 11;if(n===af)return 14}return 2}function Wr(n,e){var t=n.alternate;return t===null?(t=vt(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function wa(n,e,t,r,i,s){var o=2;if(r=n,typeof n=="function")Uf(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case Mi:return yi(t.children,i,s,e);case sf:o=8,i|=8;break;case Ou:return n=vt(12,t,e,i|2),n.elementType=Ou,n.lanes=s,n;case Ru:return n=vt(13,t,e,i),n.elementType=Ru,n.lanes=s,n;case Lu:return n=vt(19,t,e,i),n.elementType=Lu,n.lanes=s,n;case Og:return Rl(t,i,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case Pg:o=10;break e;case Dg:o=9;break e;case of:o=11;break e;case af:o=14;break e;case Rr:o=16,r=null;break e}throw Error(C(130,n==null?n:typeof n,""))}return e=vt(o,t,e,i),e.elementType=n,e.type=r,e.lanes=s,e}function yi(n,e,t,r){return n=vt(7,n,r,e),n.lanes=t,n}function Rl(n,e,t,r){return n=vt(22,n,r,e),n.elementType=Og,n.lanes=t,n.stateNode={isHidden:!1},n}function pu(n,e,t){return n=vt(6,n,null,e),n.lanes=t,n}function yu(n,e,t){return e=vt(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function n0(n,e,t,r,i){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ql(0),this.expirationTimes=Ql(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ql(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function jf(n,e,t,r,i,s,o,a,u){return n=new n0(n,e,t,a,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=vt(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ef(s),n}function r0(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:bi,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function Ap(n){if(!n)return Qr;n=n._reactInternals;e:{if(Pi(n)!==n||n.tag!==1)throw Error(C(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(We(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(C(171))}if(n.tag===1){var t=n.type;if(We(t))return Tm(n,t,e)}return e}function Ip(n,e,t,r,i,s,o,a,u){return n=jf(t,r,!0,n,i,s,o,a,u),n.context=Ap(null),t=n.current,r=Fe(),i=Kr(t),s=pr(r,i),s.callback=e??null,Vr(t,s,i),n.current.lanes=i,Po(n,i,r),_e(n,r),n}function Ll(n,e,t,r){var i=e.current,s=Fe(),o=Kr(i);return t=Ap(t),e.context===null?e.context=t:e.pendingContext=t,e=pr(s,o),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=Vr(i,e,o),n!==null&&(Mt(n,i,o,s),ha(n,i,o)),o}function Ya(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function kh(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function Vf(n,e){kh(n,e),(n=n.alternate)&&kh(n,e)}function i0(){return null}var Ep=typeof reportError=="function"?reportError:function(n){console.error(n)};function qf(n){this._internalRoot=n}Bl.prototype.render=qf.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(C(409));Ll(n,e,null,null)};Bl.prototype.unmount=qf.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Ii(function(){Ll(null,n,null,null)}),e[Sr]=null}};function Bl(n){this._internalRoot=n}Bl.prototype.unstable_scheduleHydration=function(n){if(n){var e=tm();n={blockedOn:null,target:n,priority:e};for(var t=0;t<Br.length&&e!==0&&e<Br[t].priority;t++);Br.splice(t,0,n),t===0&&rm(n)}};function Kf(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function bl(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Th(){}function s0(n,e,t,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=Ya(o);s.call(c)}}var o=Ip(e,r,n,0,null,!1,!1,"",Th);return n._reactRootContainer=o,n[Sr]=o.current,lo(n.nodeType===8?n.parentNode:n),Ii(),o}for(;i=n.lastChild;)n.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=Ya(u);a.call(c)}}var u=jf(n,0,!1,null,null,!1,!1,"",Th);return n._reactRootContainer=u,n[Sr]=u.current,lo(n.nodeType===8?n.parentNode:n),Ii(function(){Ll(e,u,t,r)}),u}function Ml(n,e,t,r,i){var s=t._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var u=Ya(o);a.call(u)}}Ll(e,o,n,i)}else o=s0(t,e,n,i,r);return Ya(o)}Zg=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=Fs(e.pendingLanes);t!==0&&(cf(e,t|1),_e(e,he()),!(_&6)&&(cs=he()+500,ri()))}break;case 13:Ii(function(){var r=kr(n,1);if(r!==null){var i=Fe();Mt(r,n,1,i)}}),Vf(n,1)}};ff=function(n){if(n.tag===13){var e=kr(n,134217728);if(e!==null){var t=Fe();Mt(e,n,134217728,t)}Vf(n,134217728)}};em=function(n){if(n.tag===13){var e=Kr(n),t=kr(n,e);if(t!==null){var r=Fe();Mt(t,n,e,r)}Vf(n,e)}};tm=function(){return Y};nm=function(n,e){var t=Y;try{return Y=n,e()}finally{Y=t}};Vu=function(n,e,t){switch(e){case"input":if(Mu(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var i=xl(r);if(!i)throw Error(C(90));Lg(r),Mu(r,i)}}}break;case"textarea":bg(n,t);break;case"select":e=t.value,e!=null&&Gi(n,!!t.multiple,e,!1)}};jg=Jf;Vg=Ii;var o0={usingClientEntryPoint:!1,Events:[Oo,zi,xl,zg,Ug,Jf]},Os={findFiberByHostInstance:fi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},a0={bundleType:Os.bundleType,version:Os.version,rendererPackageName:Os.rendererPackageName,rendererConfig:Os.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Er.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Wg(n),n===null?null:n.stateNode},findFiberByHostInstance:Os.findFiberByHostInstance||i0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var na=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!na.isDisabled&&na.supportsFiber)try{Tl=na.inject(a0),rn=na}catch{}}it.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=o0;it.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Kf(e))throw Error(C(200));return r0(n,e,null,t)};it.createRoot=function(n,e){if(!Kf(n))throw Error(C(299));var t=!1,r="",i=Ep;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=jf(n,1,!1,null,null,t,!1,r,i),n[Sr]=e.current,lo(n.nodeType===8?n.parentNode:n),new qf(e)};it.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(C(188)):(n=Object.keys(n).join(","),Error(C(268,n)));return n=Wg(e),n=n===null?null:n.stateNode,n};it.flushSync=function(n){return Ii(n)};it.hydrate=function(n,e,t){if(!bl(e))throw Error(C(200));return Ml(null,n,e,!0,t)};it.hydrateRoot=function(n,e,t){if(!Kf(n))throw Error(C(405));var r=t!=null&&t.hydratedSources||null,i=!1,s="",o=Ep;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=Ip(e,null,n,1,t??null,i,!1,s,o),n[Sr]=e.current,lo(n),r)for(n=0;n<r.length;n++)t=r[n],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new Bl(e)};it.render=function(n,e,t){if(!bl(e))throw Error(C(200));return Ml(null,n,e,!1,t)};it.unmountComponentAtNode=function(n){if(!bl(n))throw Error(C(40));return n._reactRootContainer?(Ii(function(){Ml(null,null,n,!1,function(){n._reactRootContainer=null,n[Sr]=null})}),!0):!1};it.unstable_batchedUpdates=Jf;it.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!bl(t))throw Error(C(200));if(n==null||n._reactInternals===void 0)throw Error(C(38));return Ml(n,e,t,!1,r)};it.version="18.2.0-next-9e3b772b8-20220608";function xp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(xp)}catch(n){console.error(n)}}xp(),Ig.exports=it;var l0=Ig.exports,Ah=l0;Pu.createRoot=Ah.createRoot,Pu.hydrateRoot=Ah.hydrateRoot;var V;(function(n){n[n.Canceled=1]="Canceled",n[n.Unknown=2]="Unknown",n[n.InvalidArgument=3]="InvalidArgument",n[n.DeadlineExceeded=4]="DeadlineExceeded",n[n.NotFound=5]="NotFound",n[n.AlreadyExists=6]="AlreadyExists",n[n.PermissionDenied=7]="PermissionDenied",n[n.ResourceExhausted=8]="ResourceExhausted",n[n.FailedPrecondition=9]="FailedPrecondition",n[n.Aborted=10]="Aborted",n[n.OutOfRange=11]="OutOfRange",n[n.Unimplemented=12]="Unimplemented",n[n.Internal=13]="Internal",n[n.Unavailable=14]="Unavailable",n[n.DataLoss=15]="DataLoss",n[n.Unauthenticated=16]="Unauthenticated"})(V||(V={}));function Ih(n){const e=V[n];return typeof e!="string"?n.toString():e[0].toLowerCase()+e.substring(1).replace(/[A-Z]/g,t=>"_"+t.toLowerCase())}class G extends Error{constructor(e,t=V.Unknown,r,i,s){super(u0(e,t)),this.name="ConnectError",Object.setPrototypeOf(this,new.target.prototype),this.rawMessage=e,this.code=t,this.metadata=new Headers(r??{}),this.details=i??[],this.cause=s}static from(e,t=V.Unknown){return e instanceof G?e:e instanceof Error?e.name=="AbortError"?new G(e.message,V.Canceled):new G(e.message,t,void 0,void 0,e):new G(String(e),t,void 0,void 0,e)}static[Symbol.hasInstance](e){return e instanceof Error?Object.getPrototypeOf(e)===G.prototype?!0:e.name==="ConnectError"&&"code"in e&&typeof e.code=="number"&&"metadata"in e&&"details"in e&&Array.isArray(e.details)&&"rawMessage"in e&&typeof e.rawMessage=="string"&&"cause"in e:!1}findDetails(e){const t="typeName"in e?{findMessage:i=>i===e.typeName?e:void 0}:e,r=[];for(const i of this.details){if("getType"in i){t.findMessage(i.getType().typeName)&&r.push(i);continue}const s=t.findMessage(i.type);if(s)try{r.push(s.fromBinary(i.value))}catch{}}return r}}function u0(n,e){return n.length?`[${Ih(e)}] ${n}`:`[${Ih(e)}]`}function le(n,e){if(!n)throw new Error(e)}const c0=34028234663852886e22,f0=-34028234663852886e22,d0=4294967295,h0=2147483647,g0=-2147483648;function Sa(n){if(typeof n!="number")throw new Error("invalid int 32: "+typeof n);if(!Number.isInteger(n)||n>h0||n<g0)throw new Error("invalid int 32: "+n)}function Tc(n){if(typeof n!="number")throw new Error("invalid uint 32: "+typeof n);if(!Number.isInteger(n)||n>d0||n<0)throw new Error("invalid uint 32: "+n)}function Cp(n){if(typeof n!="number")throw new Error("invalid float 32: "+typeof n);if(Number.isFinite(n)&&(n>c0||n<f0))throw new Error("invalid float 32: "+n)}const Np=Symbol("@bufbuild/protobuf/enum-type");function m0(n){const e=n[Np];return le(e,"missing enum type on enum object"),e}function Pp(n,e,t,r){n[Np]=Dp(e,t.map(i=>({no:i.no,name:i.name,localName:n[i.no]})))}function Dp(n,e,t){const r=Object.create(null),i=Object.create(null),s=[];for(const o of e){const a=Op(o);s.push(a),r[o.name]=a,i[o.no]=a}return{typeName:n,values:s,findName(o){return r[o]},findNumber(o){return i[o]}}}function p0(n,e,t){const r={};for(const i of e){const s=Op(i);r[s.localName]=s.no,r[s.no]=s.localName}return Pp(r,n,e),r}function Op(n){return"localName"in n?n:Object.assign(Object.assign({},n),{localName:n.name})}class O{equals(e){return this.getType().runtime.util.equals(this.getType(),this,e)}clone(){return this.getType().runtime.util.clone(this)}fromBinary(e,t){const r=this.getType(),i=r.runtime.bin,s=i.makeReadOptions(t);return i.readMessage(this,s.readerFactory(e),e.byteLength,s),this}fromJson(e,t){const r=this.getType(),i=r.runtime.json,s=i.makeReadOptions(t);return i.readMessage(r,e,s,this),this}fromJsonString(e,t){let r;try{r=JSON.parse(e)}catch(i){throw new Error(`cannot decode ${this.getType().typeName} from JSON: ${i instanceof Error?i.message:String(i)}`)}return this.fromJson(r,t)}toBinary(e){const t=this.getType(),r=t.runtime.bin,i=r.makeWriteOptions(e),s=i.writerFactory();return r.writeMessage(this,s,i),s.finish()}toJson(e){const t=this.getType(),r=t.runtime.json,i=r.makeWriteOptions(e);return r.writeMessage(this,i)}toJsonString(e){var t;const r=this.toJson(e);return JSON.stringify(r,null,(t=e==null?void 0:e.prettySpaces)!==null&&t!==void 0?t:0)}toJSON(){return this.toJson({emitDefaultValues:!0})}getType(){return Object.getPrototypeOf(this).constructor}}function y0(n,e,t,r){var i;const s=(i=r==null?void 0:r.localName)!==null&&i!==void 0?i:e.substring(e.lastIndexOf(".")+1),o={[s]:function(a){n.util.initFields(this),n.util.initPartial(a,this)}}[s];return Object.setPrototypeOf(o.prototype,new O),Object.assign(o,{runtime:n,typeName:e,fields:n.util.newFieldList(t),fromBinary(a,u){return new o().fromBinary(a,u)},fromJson(a,u){return new o().fromJson(a,u)},fromJsonString(a,u){return new o().fromJsonString(a,u)},equals(a,u){return n.util.equals(o,a,u)}}),o}function v0(){let n=0,e=0;for(let r=0;r<28;r+=7){let i=this.buf[this.pos++];if(n|=(i&127)<<r,!(i&128))return this.assertBounds(),[n,e]}let t=this.buf[this.pos++];if(n|=(t&15)<<28,e=(t&112)>>4,!(t&128))return this.assertBounds(),[n,e];for(let r=3;r<=31;r+=7){let i=this.buf[this.pos++];if(e|=(i&127)<<r,!(i&128))return this.assertBounds(),[n,e]}throw new Error("invalid varint")}function vu(n,e,t){for(let s=0;s<28;s=s+7){const o=n>>>s,a=!(!(o>>>7)&&e==0),u=(a?o|128:o)&255;if(t.push(u),!a)return}const r=n>>>28&15|(e&7)<<4,i=!!(e>>3);if(t.push((i?r|128:r)&255),!!i){for(let s=3;s<31;s=s+7){const o=e>>>s,a=!!(o>>>7),u=(a?o|128:o)&255;if(t.push(u),!a)return}t.push(e>>>31&1)}}const ka=4294967296;function Eh(n){const e=n[0]==="-";e&&(n=n.slice(1));const t=1e6;let r=0,i=0;function s(o,a){const u=Number(n.slice(o,a));i*=t,r=r*t+u,r>=ka&&(i=i+(r/ka|0),r=r%ka)}return s(-24,-18),s(-18,-12),s(-12,-6),s(-6),e?Lp(r,i):Wf(r,i)}function w0(n,e){let t=Wf(n,e);const r=t.hi&2147483648;r&&(t=Lp(t.lo,t.hi));const i=Rp(t.lo,t.hi);return r?"-"+i:i}function Rp(n,e){if({lo:n,hi:e}=S0(n,e),e<=2097151)return String(ka*e+n);const t=n&16777215,r=(n>>>24|e<<8)&16777215,i=e>>16&65535;let s=t+r*6777216+i*6710656,o=r+i*8147497,a=i*2;const u=1e7;return s>=u&&(o+=Math.floor(s/u),s%=u),o>=u&&(a+=Math.floor(o/u),o%=u),a.toString()+xh(o)+xh(s)}function S0(n,e){return{lo:n>>>0,hi:e>>>0}}function Wf(n,e){return{lo:n|0,hi:e|0}}function Lp(n,e){return e=~e,n?n=~n+1:e+=1,Wf(n,e)}const xh=n=>{const e=String(n);return"0000000".slice(e.length)+e};function Ch(n,e){if(n>=0){for(;n>127;)e.push(n&127|128),n=n>>>7;e.push(n)}else{for(let t=0;t<9;t++)e.push(n&127|128),n=n>>7;e.push(1)}}function k0(){let n=this.buf[this.pos++],e=n&127;if(!(n&128))return this.assertBounds(),e;if(n=this.buf[this.pos++],e|=(n&127)<<7,!(n&128))return this.assertBounds(),e;if(n=this.buf[this.pos++],e|=(n&127)<<14,!(n&128))return this.assertBounds(),e;if(n=this.buf[this.pos++],e|=(n&127)<<21,!(n&128))return this.assertBounds(),e;n=this.buf[this.pos++],e|=(n&15)<<28;for(let t=5;n&128&&t<10;t++)n=this.buf[this.pos++];if(n&128)throw new Error("invalid varint");return this.assertBounds(),e>>>0}var Nh={};function T0(){const n=new DataView(new ArrayBuffer(8));if(typeof BigInt=="function"&&typeof n.getBigInt64=="function"&&typeof n.getBigUint64=="function"&&typeof n.setBigInt64=="function"&&typeof n.setBigUint64=="function"&&(typeof process!="object"||typeof Nh!="object"||Nh.BUF_BIGINT_DISABLE!=="1")){const i=BigInt("-9223372036854775808"),s=BigInt("9223372036854775807"),o=BigInt("0"),a=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(u){const c=typeof u=="bigint"?u:BigInt(u);if(c>s||c<i)throw new Error(`int64 invalid: ${u}`);return c},uParse(u){const c=typeof u=="bigint"?u:BigInt(u);if(c>a||c<o)throw new Error(`uint64 invalid: ${u}`);return c},enc(u){return n.setBigInt64(0,this.parse(u),!0),{lo:n.getInt32(0,!0),hi:n.getInt32(4,!0)}},uEnc(u){return n.setBigInt64(0,this.uParse(u),!0),{lo:n.getInt32(0,!0),hi:n.getInt32(4,!0)}},dec(u,c){return n.setInt32(0,u,!0),n.setInt32(4,c,!0),n.getBigInt64(0,!0)},uDec(u,c){return n.setInt32(0,u,!0),n.setInt32(4,c,!0),n.getBigUint64(0,!0)}}}const t=i=>le(/^-?[0-9]+$/.test(i),`int64 invalid: ${i}`),r=i=>le(/^[0-9]+$/.test(i),`uint64 invalid: ${i}`);return{zero:"0",supported:!1,parse(i){return typeof i!="string"&&(i=i.toString()),t(i),i},uParse(i){return typeof i!="string"&&(i=i.toString()),r(i),i},enc(i){return typeof i!="string"&&(i=i.toString()),t(i),Eh(i)},uEnc(i){return typeof i!="string"&&(i=i.toString()),r(i),Eh(i)},dec(i,s){return w0(i,s)},uDec(i,s){return Rp(i,s)}}}const ne=T0();var A;(function(n){n[n.DOUBLE=1]="DOUBLE",n[n.FLOAT=2]="FLOAT",n[n.INT64=3]="INT64",n[n.UINT64=4]="UINT64",n[n.INT32=5]="INT32",n[n.FIXED64=6]="FIXED64",n[n.FIXED32=7]="FIXED32",n[n.BOOL=8]="BOOL",n[n.STRING=9]="STRING",n[n.BYTES=12]="BYTES",n[n.UINT32=13]="UINT32",n[n.SFIXED32=15]="SFIXED32",n[n.SFIXED64=16]="SFIXED64",n[n.SINT32=17]="SINT32",n[n.SINT64=18]="SINT64"})(A||(A={}));var Xr;(function(n){n[n.BIGINT=0]="BIGINT",n[n.STRING=1]="STRING"})(Xr||(Xr={}));function Nr(n,e,t){if(e===t)return!0;if(n==A.BYTES){if(!(e instanceof Uint8Array)||!(t instanceof Uint8Array)||e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}switch(n){case A.UINT64:case A.FIXED64:case A.INT64:case A.SFIXED64:case A.SINT64:return e==t}return!1}function fs(n,e){switch(n){case A.BOOL:return!1;case A.UINT64:case A.FIXED64:case A.INT64:case A.SFIXED64:case A.SINT64:return e==0?ne.zero:"0";case A.DOUBLE:case A.FLOAT:return 0;case A.BYTES:return new Uint8Array(0);case A.STRING:return"";default:return 0}}function Bp(n,e){switch(n){case A.BOOL:return e===!1;case A.STRING:return e==="";case A.BYTES:return e instanceof Uint8Array&&!e.byteLength;default:return e==0}}var ge;(function(n){n[n.Varint=0]="Varint",n[n.Bit64=1]="Bit64",n[n.LengthDelimited=2]="LengthDelimited",n[n.StartGroup=3]="StartGroup",n[n.EndGroup=4]="EndGroup",n[n.Bit32=5]="Bit32"})(ge||(ge={}));class A0{constructor(e){this.stack=[],this.textEncoder=e??new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let e=0;for(let i=0;i<this.chunks.length;i++)e+=this.chunks[i].length;let t=new Uint8Array(e),r=0;for(let i=0;i<this.chunks.length;i++)t.set(this.chunks[i],r),r+=this.chunks[i].length;return this.chunks=[],t}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),t=this.stack.pop();if(!t)throw new Error("invalid state, fork stack empty");return this.chunks=t.chunks,this.buf=t.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,t){return this.uint32((e<<3|t)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(Tc(e);e>127;)this.buf.push(e&127|128),e=e>>>7;return this.buf.push(e),this}int32(e){return Sa(e),Ch(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let t=this.textEncoder.encode(e);return this.uint32(t.byteLength),this.raw(t)}float(e){Cp(e);let t=new Uint8Array(4);return new DataView(t.buffer).setFloat32(0,e,!0),this.raw(t)}double(e){let t=new Uint8Array(8);return new DataView(t.buffer).setFloat64(0,e,!0),this.raw(t)}fixed32(e){Tc(e);let t=new Uint8Array(4);return new DataView(t.buffer).setUint32(0,e,!0),this.raw(t)}sfixed32(e){Sa(e);let t=new Uint8Array(4);return new DataView(t.buffer).setInt32(0,e,!0),this.raw(t)}sint32(e){return Sa(e),e=(e<<1^e>>31)>>>0,Ch(e,this.buf),this}sfixed64(e){let t=new Uint8Array(8),r=new DataView(t.buffer),i=ne.enc(e);return r.setInt32(0,i.lo,!0),r.setInt32(4,i.hi,!0),this.raw(t)}fixed64(e){let t=new Uint8Array(8),r=new DataView(t.buffer),i=ne.uEnc(e);return r.setInt32(0,i.lo,!0),r.setInt32(4,i.hi,!0),this.raw(t)}int64(e){let t=ne.enc(e);return vu(t.lo,t.hi,this.buf),this}sint64(e){let t=ne.enc(e),r=t.hi>>31,i=t.lo<<1^r,s=(t.hi<<1|t.lo>>>31)^r;return vu(i,s,this.buf),this}uint64(e){let t=ne.uEnc(e);return vu(t.lo,t.hi,this.buf),this}}class I0{constructor(e,t){this.varint64=v0,this.uint32=k0,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength),this.textDecoder=t??new TextDecoder}tag(){let e=this.uint32(),t=e>>>3,r=e&7;if(t<=0||r<0||r>5)throw new Error("illegal tag: field no "+t+" wire type "+r);return[t,r]}skip(e,t){let r=this.pos;switch(e){case ge.Varint:for(;this.buf[this.pos++]&128;);break;case ge.Bit64:this.pos+=4;case ge.Bit32:this.pos+=4;break;case ge.LengthDelimited:let i=this.uint32();this.pos+=i;break;case ge.StartGroup:for(;;){const[s,o]=this.tag();if(o===ge.EndGroup){if(t!==void 0&&s!==t)throw new Error("invalid end group tag");break}this.skip(o,s)}break;default:throw new Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(r,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let e=this.uint32();return e>>>1^-(e&1)}int64(){return ne.dec(...this.varint64())}uint64(){return ne.uDec(...this.varint64())}sint64(){let[e,t]=this.varint64(),r=-(e&1);return e=(e>>>1|(t&1)<<31)^r,t=t>>>1^r,ne.dec(e,t)}bool(){let[e,t]=this.varint64();return e!==0||t!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return ne.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return ne.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),t=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(t,t+e)}string(){return this.textDecoder.decode(this.bytes())}}function E0(n,e,t,r){let i;return{typeName:e,extendee:t,get field(){if(!i){const s=typeof r=="function"?r():r;s.name=e.split(".").pop(),s.jsonName=`[${e}]`,i=n.util.newFieldList([s]).list()[0]}return i},runtime:n}}function bp(n){const e=n.field.localName,t=Object.create(null);return t[e]=x0(n),[t,()=>t[e]]}function x0(n){const e=n.field;if(e.repeated)return[];if(e.default!==void 0)return e.default;switch(e.kind){case"enum":return e.T.values[0].no;case"scalar":return fs(e.T,e.L);case"message":const t=e.T,r=new t;return t.fieldWrapper?t.fieldWrapper.unwrapField(r):r;case"map":throw"map fields are not allowed to be extensions"}}function C0(n,e){if(!e.repeated&&(e.kind=="enum"||e.kind=="scalar")){for(let t=n.length-1;t>=0;--t)if(n[t].no==e.no)return[n[t]];return[]}return n.filter(t=>t.no===e.no)}let cr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),Fl=[];for(let n=0;n<cr.length;n++)Fl[cr[n].charCodeAt(0)]=n;Fl[45]=cr.indexOf("+");Fl[95]=cr.indexOf("/");const _f={dec(n){let e=n.length*3/4;n[n.length-2]=="="?e-=2:n[n.length-1]=="="&&(e-=1);let t=new Uint8Array(e),r=0,i=0,s,o=0;for(let a=0;a<n.length;a++){if(s=Fl[n.charCodeAt(a)],s===void 0)switch(n[a]){case"=":i=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(i){case 0:o=s,i=1;break;case 1:t[r++]=o<<2|(s&48)>>4,o=s,i=2;break;case 2:t[r++]=(o&15)<<4|(s&60)>>2,o=s,i=3;break;case 3:t[r++]=(o&3)<<6|s,i=0;break}}if(i==1)throw Error("invalid base64 string.");return t.subarray(0,r)},enc(n){let e="",t=0,r,i=0;for(let s=0;s<n.length;s++)switch(r=n[s],t){case 0:e+=cr[r>>2],i=(r&3)<<4,t=1;break;case 1:e+=cr[i|r>>4],i=(r&15)<<2,t=2;break;case 2:e+=cr[i|r>>6],e+=cr[r&63],t=0;break}return t&&(e+=cr[i],e+="=",t==1&&(e+="=")),e}};function N0(n,e,t){Fp(e,n);const r=e.runtime.bin.makeReadOptions(t),i=C0(n.getType().runtime.bin.listUnknownFields(n),e.field),[s,o]=bp(e);for(const a of i)e.runtime.bin.readField(s,r.readerFactory(a.data),e.field,a.wireType,r);return o()}function P0(n,e,t,r){Fp(e,n);const i=e.runtime.bin.makeReadOptions(r),s=e.runtime.bin.makeWriteOptions(r);if(Mp(n,e)){const c=n.getType().runtime.bin.listUnknownFields(n).filter(d=>d.no!=e.field.no);n.getType().runtime.bin.discardUnknownFields(n);for(const d of c)n.getType().runtime.bin.onUnknownField(n,d.no,d.wireType,d.data)}const o=s.writerFactory();let a=e.field;!a.opt&&!a.repeated&&(a.kind=="enum"||a.kind=="scalar")&&(a=Object.assign(Object.assign({},e.field),{opt:!0})),e.runtime.bin.writeField(a,t,o,s);const u=i.readerFactory(o.finish());for(;u.pos<u.len;){const[c,d]=u.tag(),h=u.skip(d,c);n.getType().runtime.bin.onUnknownField(n,c,d,h)}}function Mp(n,e){const t=n.getType();return e.extendee.typeName===t.typeName&&!!t.runtime.bin.listUnknownFields(n).find(r=>r.no==e.field.no)}function Fp(n,e){le(n.extendee.typeName==e.getType().typeName,`extension ${n.typeName} can only be applied to message ${n.extendee.typeName}`)}function Jp(n,e){const t=n.localName;if(n.repeated)return e[t].length>0;if(n.oneof)return e[n.oneof.localName].case===t;switch(n.kind){case"enum":case"scalar":return n.opt||n.req?e[t]!==void 0:n.kind=="enum"?e[t]!==n.T.values[0].no:!Bp(n.T,e[t]);case"message":return e[t]!==void 0;case"map":return Object.keys(e[t]).length>0}}function Ph(n,e){const t=n.localName,r=!n.opt&&!n.req;if(n.repeated)e[t]=[];else if(n.oneof)e[n.oneof.localName]={case:void 0};else switch(n.kind){case"map":e[t]={};break;case"enum":e[t]=r?n.T.values[0].no:void 0;break;case"scalar":e[t]=r?fs(n.T,n.L):void 0;break;case"message":e[t]=void 0;break}}function vi(n,e){if(n===null||typeof n!="object"||!Object.getOwnPropertyNames(O.prototype).every(r=>r in n&&typeof n[r]=="function"))return!1;const t=n.getType();return t===null||typeof t!="function"||!("typeName"in t)||typeof t.typeName!="string"?!1:e===void 0?!0:t.typeName==e.typeName}function $p(n,e){return vi(e)||!n.fieldWrapper?e:n.fieldWrapper.wrapField(e)}A.DOUBLE,A.FLOAT,A.INT64,A.UINT64,A.INT32,A.UINT32,A.BOOL,A.STRING,A.BYTES;const Dh={ignoreUnknownFields:!1},Oh={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0};function D0(n){return n?Object.assign(Object.assign({},Dh),n):Dh}function O0(n){return n?Object.assign(Object.assign({},Oh),n):Oh}const Qa=Symbol(),Ta=Symbol();function R0(){return{makeReadOptions:D0,makeWriteOptions:O0,readMessage(n,e,t,r){if(e==null||Array.isArray(e)||typeof e!="object")throw new Error(`cannot decode message ${n.typeName} from JSON: ${Kt(e)}`);r=r??new n;const i=new Map,s=t.typeRegistry;for(const[o,a]of Object.entries(e)){const u=n.fields.findJsonName(o);if(u){if(u.oneof){if(a===null&&u.kind=="scalar")continue;const c=i.get(u.oneof);if(c!==void 0)throw new Error(`cannot decode message ${n.typeName} from JSON: multiple keys for oneof "${u.oneof.name}" present: "${c}", "${o}"`);i.set(u.oneof,o)}Rh(r,a,u,t,n)}else{let c=!1;if(s!=null&&s.findExtension&&o.startsWith("[")&&o.endsWith("]")){const d=s.findExtension(o.substring(1,o.length-1));if(d&&d.extendee.typeName==n.typeName){c=!0;const[h,m]=bp(d);Rh(h,a,d.field,t,d),P0(r,d,m(),t)}}if(!c&&!t.ignoreUnknownFields)throw new Error(`cannot decode message ${n.typeName} from JSON: key "${o}" is unknown`)}}return r},writeMessage(n,e){const t=n.getType(),r={};let i;try{for(i of t.fields.byNumber()){if(!Jp(i,n)){if(i.req)throw"required field not set";if(!e.emitDefaultValues||!B0(i))continue}const o=i.oneof?n[i.oneof.localName].value:n[i.localName],a=Lh(i,o,e);a!==void 0&&(r[e.useProtoFieldName?i.name:i.jsonName]=a)}const s=e.typeRegistry;if(s!=null&&s.findExtensionFor)for(const o of t.runtime.bin.listUnknownFields(n)){const a=s.findExtensionFor(t.typeName,o.no);if(a&&Mp(n,a)){const u=N0(n,a,e),c=Lh(a.field,u,e);c!==void 0&&(r[a.field.jsonName]=c)}}}catch(s){const o=i?`cannot encode field ${t.typeName}.${i.name} to JSON`:`cannot encode message ${t.typeName} to JSON`,a=s instanceof Error?s.message:String(s);throw new Error(o+(a.length>0?`: ${a}`:""))}return r},readScalar(n,e,t){return Gs(n,e,t??Xr.BIGINT,!0)},writeScalar(n,e,t){if(e!==void 0&&(t||Bp(n,e)))return Aa(n,e)},debug:Kt}}function Kt(n){if(n===null)return"null";switch(typeof n){case"object":return Array.isArray(n)?"array":"object";case"string":return n.length>100?"string":`"${n.split('"').join('\\"')}"`;default:return String(n)}}function Rh(n,e,t,r,i){let s=t.localName;if(t.repeated){if(le(t.kind!="map"),e===null)return;if(!Array.isArray(e))throw new Error(`cannot decode field ${i.typeName}.${t.name} from JSON: ${Kt(e)}`);const o=n[s];for(const a of e){if(a===null)throw new Error(`cannot decode field ${i.typeName}.${t.name} from JSON: ${Kt(a)}`);switch(t.kind){case"message":o.push(t.T.fromJson(a,r));break;case"enum":const u=wu(t.T,a,r.ignoreUnknownFields,!0);u!==Ta&&o.push(u);break;case"scalar":try{o.push(Gs(t.T,a,t.L,!0))}catch(c){let d=`cannot decode field ${i.typeName}.${t.name} from JSON: ${Kt(a)}`;throw c instanceof Error&&c.message.length>0&&(d+=`: ${c.message}`),new Error(d)}break}}}else if(t.kind=="map"){if(e===null)return;if(typeof e!="object"||Array.isArray(e))throw new Error(`cannot decode field ${i.typeName}.${t.name} from JSON: ${Kt(e)}`);const o=n[s];for(const[a,u]of Object.entries(e)){if(u===null)throw new Error(`cannot decode field ${i.typeName}.${t.name} from JSON: map value null`);let c;try{c=L0(t.K,a)}catch(d){let h=`cannot decode map key for field ${i.typeName}.${t.name} from JSON: ${Kt(e)}`;throw d instanceof Error&&d.message.length>0&&(h+=`: ${d.message}`),new Error(h)}switch(t.V.kind){case"message":o[c]=t.V.T.fromJson(u,r);break;case"enum":const d=wu(t.V.T,u,r.ignoreUnknownFields,!0);d!==Ta&&(o[c]=d);break;case"scalar":try{o[c]=Gs(t.V.T,u,Xr.BIGINT,!0)}catch(h){let m=`cannot decode map value for field ${i.typeName}.${t.name} from JSON: ${Kt(e)}`;throw h instanceof Error&&h.message.length>0&&(m+=`: ${h.message}`),new Error(m)}break}}}else switch(t.oneof&&(n=n[t.oneof.localName]={case:s},s="value"),t.kind){case"message":const o=t.T;if(e===null&&o.typeName!="google.protobuf.Value")return;let a=n[s];vi(a)?a.fromJson(e,r):(n[s]=a=o.fromJson(e,r),o.fieldWrapper&&!t.oneof&&(n[s]=o.fieldWrapper.unwrapField(a)));break;case"enum":const u=wu(t.T,e,r.ignoreUnknownFields,!1);switch(u){case Qa:Ph(t,n);break;case Ta:break;default:n[s]=u;break}break;case"scalar":try{const c=Gs(t.T,e,t.L,!1);switch(c){case Qa:Ph(t,n);break;default:n[s]=c;break}}catch(c){let d=`cannot decode field ${i.typeName}.${t.name} from JSON: ${Kt(e)}`;throw c instanceof Error&&c.message.length>0&&(d+=`: ${c.message}`),new Error(d)}break}}function L0(n,e){if(n===A.BOOL)switch(e){case"true":e=!0;break;case"false":e=!1;break}return Gs(n,e,Xr.BIGINT,!0).toString()}function Gs(n,e,t,r){if(e===null)return r?fs(n,t):Qa;switch(n){case A.DOUBLE:case A.FLOAT:if(e==="NaN")return Number.NaN;if(e==="Infinity")return Number.POSITIVE_INFINITY;if(e==="-Infinity")return Number.NEGATIVE_INFINITY;if(e===""||typeof e=="string"&&e.trim().length!==e.length||typeof e!="string"&&typeof e!="number")break;const i=Number(e);if(Number.isNaN(i)||!Number.isFinite(i))break;return n==A.FLOAT&&Cp(i),i;case A.INT32:case A.FIXED32:case A.SFIXED32:case A.SINT32:case A.UINT32:let s;if(typeof e=="number"?s=e:typeof e=="string"&&e.length>0&&e.trim().length===e.length&&(s=Number(e)),s===void 0)break;return n==A.UINT32||n==A.FIXED32?Tc(s):Sa(s),s;case A.INT64:case A.SFIXED64:case A.SINT64:if(typeof e!="number"&&typeof e!="string")break;const o=ne.parse(e);return t?o.toString():o;case A.FIXED64:case A.UINT64:if(typeof e!="number"&&typeof e!="string")break;const a=ne.uParse(e);return t?a.toString():a;case A.BOOL:if(typeof e!="boolean")break;return e;case A.STRING:if(typeof e!="string")break;try{encodeURIComponent(e)}catch{throw new Error("invalid UTF8")}return e;case A.BYTES:if(e==="")return new Uint8Array(0);if(typeof e!="string")break;return _f.dec(e)}throw new Error}function wu(n,e,t,r){if(e===null)return n.typeName=="google.protobuf.NullValue"?0:r?n.values[0].no:Qa;switch(typeof e){case"number":if(Number.isInteger(e))return e;break;case"string":const i=n.findName(e);if(i!==void 0)return i.no;if(t)return Ta;break}throw new Error(`cannot decode enum ${n.typeName} from JSON: ${Kt(e)}`)}function B0(n){return n.repeated||n.kind=="map"?!0:!(n.oneof||n.kind=="message"||n.opt||n.req)}function Lh(n,e,t){if(n.kind=="map"){le(typeof e=="object"&&e!=null);const r={},i=Object.entries(e);switch(n.V.kind){case"scalar":for(const[o,a]of i)r[o.toString()]=Aa(n.V.T,a);break;case"message":for(const[o,a]of i)r[o.toString()]=a.toJson(t);break;case"enum":const s=n.V.T;for(const[o,a]of i)r[o.toString()]=Su(s,a,t.enumAsInteger);break}return t.emitDefaultValues||i.length>0?r:void 0}if(n.repeated){le(Array.isArray(e));const r=[];switch(n.kind){case"scalar":for(let i=0;i<e.length;i++)r.push(Aa(n.T,e[i]));break;case"enum":for(let i=0;i<e.length;i++)r.push(Su(n.T,e[i],t.enumAsInteger));break;case"message":for(let i=0;i<e.length;i++)r.push(e[i].toJson(t));break}return t.emitDefaultValues||r.length>0?r:void 0}switch(n.kind){case"scalar":return Aa(n.T,e);case"enum":return Su(n.T,e,t.enumAsInteger);case"message":return $p(n.T,e).toJson(t)}}function Su(n,e,t){var r;if(le(typeof e=="number"),n.typeName=="google.protobuf.NullValue")return null;if(t)return e;const i=n.findNumber(e);return(r=i==null?void 0:i.name)!==null&&r!==void 0?r:e}function Aa(n,e){switch(n){case A.INT32:case A.SFIXED32:case A.SINT32:case A.FIXED32:case A.UINT32:return le(typeof e=="number"),e;case A.FLOAT:case A.DOUBLE:return le(typeof e=="number"),Number.isNaN(e)?"NaN":e===Number.POSITIVE_INFINITY?"Infinity":e===Number.NEGATIVE_INFINITY?"-Infinity":e;case A.STRING:return le(typeof e=="string"),e;case A.BOOL:return le(typeof e=="boolean"),e;case A.UINT64:case A.FIXED64:case A.INT64:case A.SFIXED64:case A.SINT64:return le(typeof e=="bigint"||typeof e=="string"||typeof e=="number"),e.toString();case A.BYTES:return le(e instanceof Uint8Array),_f.enc(e)}}const Ri=Symbol("@bufbuild/protobuf/unknown-fields"),Bh={readUnknownFields:!0,readerFactory:n=>new I0(n)},bh={writeUnknownFields:!0,writerFactory:()=>new A0};function b0(n){return n?Object.assign(Object.assign({},Bh),n):Bh}function M0(n){return n?Object.assign(Object.assign({},bh),n):bh}function F0(){return{makeReadOptions:b0,makeWriteOptions:M0,listUnknownFields(n){var e;return(e=n[Ri])!==null&&e!==void 0?e:[]},discardUnknownFields(n){delete n[Ri]},writeUnknownFields(n,e){const r=n[Ri];if(r)for(const i of r)e.tag(i.no,i.wireType).raw(i.data)},onUnknownField(n,e,t,r){const i=n;Array.isArray(i[Ri])||(i[Ri]=[]),i[Ri].push({no:e,wireType:t,data:r})},readMessage(n,e,t,r,i){const s=n.getType(),o=i?e.len:e.pos+t;let a,u;for(;e.pos<o&&([a,u]=e.tag(),!(i===!0&&u==ge.EndGroup));){const c=s.fields.find(a);if(!c){const d=e.skip(u,a);r.readUnknownFields&&this.onUnknownField(n,a,u,d);continue}Mh(n,e,c,u,r)}if(i&&(u!=ge.EndGroup||a!==t))throw new Error("invalid end group tag")},readField:Mh,writeMessage(n,e,t){const r=n.getType();for(const i of r.fields.byNumber()){if(!Jp(i,n)){if(i.req)throw new Error(`cannot encode field ${r.typeName}.${i.name} to binary: required field not set`);continue}const s=i.oneof?n[i.oneof.localName].value:n[i.localName];Fh(i,s,e,t)}return t.writeUnknownFields&&this.writeUnknownFields(n,e),e},writeField(n,e,t,r){e!==void 0&&Fh(n,e,t,r)}}}function Mh(n,e,t,r,i){let{repeated:s,localName:o}=t;switch(t.oneof&&(n=n[t.oneof.localName],n.case!=o&&delete n.value,n.case=o,o="value"),t.kind){case"scalar":case"enum":const a=t.kind=="enum"?A.INT32:t.T;let u=Xa;if(t.kind=="scalar"&&t.L>0&&(u=$0),s){let m=n[o];if(r==ge.LengthDelimited&&a!=A.STRING&&a!=A.BYTES){let w=e.uint32()+e.pos;for(;e.pos<w;)m.push(u(e,a))}else m.push(u(e,a))}else n[o]=u(e,a);break;case"message":const c=t.T;s?n[o].push(Ia(e,new c,i,t)):vi(n[o])?Ia(e,n[o],i,t):(n[o]=Ia(e,new c,i,t),c.fieldWrapper&&!t.oneof&&!t.repeated&&(n[o]=c.fieldWrapper.unwrapField(n[o])));break;case"map":let[d,h]=J0(t,e,i);n[o][d]=h;break}}function Ia(n,e,t,r){const i=e.getType().runtime.bin,s=r==null?void 0:r.delimited;return i.readMessage(e,n,s?r.no:n.uint32(),t,s),e}function J0(n,e,t){const r=e.uint32(),i=e.pos+r;let s,o;for(;e.pos<i;){const[a]=e.tag();switch(a){case 1:s=Xa(e,n.K);break;case 2:switch(n.V.kind){case"scalar":o=Xa(e,n.V.T);break;case"enum":o=e.int32();break;case"message":o=Ia(e,new n.V.T,t,void 0);break}break}}if(s===void 0&&(s=fs(n.K,Xr.BIGINT)),typeof s!="string"&&typeof s!="number"&&(s=s.toString()),o===void 0)switch(n.V.kind){case"scalar":o=fs(n.V.T,Xr.BIGINT);break;case"enum":o=n.V.T.values[0].no;break;case"message":o=new n.V.T;break}return[s,o]}function $0(n,e){const t=Xa(n,e);return typeof t=="bigint"?t.toString():t}function Xa(n,e){switch(e){case A.STRING:return n.string();case A.BOOL:return n.bool();case A.DOUBLE:return n.double();case A.FLOAT:return n.float();case A.INT32:return n.int32();case A.INT64:return n.int64();case A.UINT64:return n.uint64();case A.FIXED64:return n.fixed64();case A.BYTES:return n.bytes();case A.FIXED32:return n.fixed32();case A.SFIXED32:return n.sfixed32();case A.SFIXED64:return n.sfixed64();case A.SINT64:return n.sint64();case A.UINT32:return n.uint32();case A.SINT32:return n.sint32()}}function Fh(n,e,t,r){le(e!==void 0);const i=n.repeated;switch(n.kind){case"scalar":case"enum":let s=n.kind=="enum"?A.INT32:n.T;if(i)if(le(Array.isArray(e)),n.packed)U0(t,s,n.no,e);else for(const o of e)Ys(t,s,n.no,o);else Ys(t,s,n.no,e);break;case"message":if(i){le(Array.isArray(e));for(const o of e)Jh(t,r,n,o)}else Jh(t,r,n,e);break;case"map":le(typeof e=="object"&&e!=null);for(const[o,a]of Object.entries(e))z0(t,r,n,o,a);break}}function z0(n,e,t,r,i){n.tag(t.no,ge.LengthDelimited),n.fork();let s=r;switch(t.K){case A.INT32:case A.FIXED32:case A.UINT32:case A.SFIXED32:case A.SINT32:s=Number.parseInt(r);break;case A.BOOL:le(r=="true"||r=="false"),s=r=="true";break}switch(Ys(n,t.K,1,s),t.V.kind){case"scalar":Ys(n,t.V.T,2,i);break;case"enum":Ys(n,A.INT32,2,i);break;case"message":le(i!==void 0),n.tag(2,ge.LengthDelimited).bytes(i.toBinary(e));break}n.join()}function Jh(n,e,t,r){const i=$p(t.T,r);t.delimited?n.tag(t.no,ge.StartGroup).raw(i.toBinary(e)).tag(t.no,ge.EndGroup):n.tag(t.no,ge.LengthDelimited).bytes(i.toBinary(e))}function Ys(n,e,t,r){le(r!==void 0);let[i,s]=zp(e);n.tag(t,i)[s](r)}function U0(n,e,t,r){if(!r.length)return;n.tag(t,ge.LengthDelimited).fork();let[,i]=zp(e);for(let s=0;s<r.length;s++)n[i](r[s]);n.join()}function zp(n){let e=ge.Varint;switch(n){case A.BYTES:case A.STRING:e=ge.LengthDelimited;break;case A.DOUBLE:case A.FIXED64:case A.SFIXED64:e=ge.Bit64;break;case A.FIXED32:case A.SFIXED32:case A.FLOAT:e=ge.Bit32;break}const t=A[n].toLowerCase();return[e,t]}function j0(){return{setEnumType:Pp,initPartial(n,e){if(n===void 0)return;const t=e.getType();for(const r of t.fields.byMember()){const i=r.localName,s=e,o=n;if(o[i]!=null)switch(r.kind){case"oneof":const a=o[i].case;if(a===void 0)continue;const u=r.findField(a);let c=o[i].value;u&&u.kind=="message"&&!vi(c,u.T)?c=new u.T(c):u&&u.kind==="scalar"&&u.T===A.BYTES&&(c=Rs(c)),s[i]={case:a,value:c};break;case"scalar":case"enum":let d=o[i];r.T===A.BYTES&&(d=r.repeated?d.map(Rs):Rs(d)),s[i]=d;break;case"map":switch(r.V.kind){case"scalar":case"enum":if(r.V.T===A.BYTES)for(const[y,w]of Object.entries(o[i]))s[i][y]=Rs(w);else Object.assign(s[i],o[i]);break;case"message":const m=r.V.T;for(const y of Object.keys(o[i])){let w=o[i][y];m.fieldWrapper||(w=new m(w)),s[i][y]=w}break}break;case"message":const h=r.T;if(r.repeated)s[i]=o[i].map(m=>vi(m,h)?m:new h(m));else{const m=o[i];h.fieldWrapper?h.typeName==="google.protobuf.BytesValue"?s[i]=Rs(m):s[i]=m:s[i]=vi(m,h)?m:new h(m)}break}}},equals(n,e,t){return e===t?!0:!e||!t?!1:n.fields.byMember().every(r=>{const i=e[r.localName],s=t[r.localName];if(r.repeated){if(i.length!==s.length)return!1;switch(r.kind){case"message":return i.every((o,a)=>r.T.equals(o,s[a]));case"scalar":return i.every((o,a)=>Nr(r.T,o,s[a]));case"enum":return i.every((o,a)=>Nr(A.INT32,o,s[a]))}throw new Error(`repeated cannot contain ${r.kind}`)}switch(r.kind){case"message":return r.T.equals(i,s);case"enum":return Nr(A.INT32,i,s);case"scalar":return Nr(r.T,i,s);case"oneof":if(i.case!==s.case)return!1;const o=r.findField(i.case);if(o===void 0)return!0;switch(o.kind){case"message":return o.T.equals(i.value,s.value);case"enum":return Nr(A.INT32,i.value,s.value);case"scalar":return Nr(o.T,i.value,s.value)}throw new Error(`oneof cannot contain ${o.kind}`);case"map":const a=Object.keys(i).concat(Object.keys(s));switch(r.V.kind){case"message":const u=r.V.T;return a.every(d=>u.equals(i[d],s[d]));case"enum":return a.every(d=>Nr(A.INT32,i[d],s[d]));case"scalar":const c=r.V.T;return a.every(d=>Nr(c,i[d],s[d]))}break}})},clone(n){const e=n.getType(),t=new e,r=t;for(const i of e.fields.byMember()){const s=n[i.localName];let o;if(i.repeated)o=s.map(ra);else if(i.kind=="map"){o=r[i.localName];for(const[a,u]of Object.entries(s))o[a]=ra(u)}else i.kind=="oneof"?o=i.findField(s.case)?{case:s.case,value:ra(s.value)}:{case:void 0}:o=ra(s);r[i.localName]=o}for(const i of e.runtime.bin.listUnknownFields(n))e.runtime.bin.onUnknownField(r,i.no,i.wireType,i.data);return t}}}function ra(n){if(n===void 0)return n;if(vi(n))return n.clone();if(n instanceof Uint8Array){const e=new Uint8Array(n.byteLength);return e.set(n),e}return n}function Rs(n){return n instanceof Uint8Array?n:new Uint8Array(n)}function V0(n,e,t){return{syntax:n,json:R0(),bin:F0(),util:Object.assign(Object.assign({},j0()),{newFieldList:e,initFields:t}),makeMessageType(r,i,s){return y0(this,r,i,s)},makeEnum:p0,makeEnumType:Dp,getEnumType:m0,makeExtension(r,i,s){return E0(this,r,i,s)}}}class q0{constructor(e,t){this._fields=e,this._normalizer=t}findJsonName(e){if(!this.jsonNames){const t={};for(const r of this.list())t[r.jsonName]=t[r.name]=r;this.jsonNames=t}return this.jsonNames[e]}find(e){if(!this.numbers){const t={};for(const r of this.list())t[r.no]=r;this.numbers=t}return this.numbers[e]}list(){return this.all||(this.all=this._normalizer(this._fields)),this.all}byNumber(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort((e,t)=>e.no-t.no)),this.numbersAsc}byMember(){if(!this.members){this.members=[];const e=this.members;let t;for(const r of this.list())r.oneof?r.oneof!==t&&(t=r.oneof,e.push(t)):e.push(r)}return this.members}}function Up(n,e){const t=jp(n);return e?t:Y0(G0(t))}function K0(n){return Up(n,!1)}const W0=jp;function jp(n){let e=!1;const t=[];for(let r=0;r<n.length;r++){let i=n.charAt(r);switch(i){case"_":e=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":t.push(i),e=!1;break;default:e&&(e=!1,i=i.toUpperCase()),t.push(i);break}}return t.join("")}const _0=new Set(["constructor","toString","toJSON","valueOf"]),H0=new Set(["getType","clone","equals","fromBinary","fromJson","fromJsonString","toBinary","toJson","toJsonString","toObject"]),Vp=n=>`${n}$`,G0=n=>H0.has(n)?Vp(n):n,Y0=n=>_0.has(n)?Vp(n):n;class Q0{constructor(e){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.req=!1,this.default=void 0,this.fields=[],this.name=e,this.localName=K0(e)}addField(e){le(e.oneof===this,`field ${e.name} not one of ${this.name}`),this.fields.push(e)}findField(e){if(!this._lookup){this._lookup=Object.create(null);for(let t=0;t<this.fields.length;t++)this._lookup[this.fields[t].localName]=this.fields[t]}return this._lookup[e]}}function X0(n,e){var t,r,i,s,o,a;const u=[];let c;for(const d of typeof n=="function"?n():n){const h=d;if(h.localName=Up(d.name,d.oneof!==void 0),h.jsonName=(t=d.jsonName)!==null&&t!==void 0?t:W0(d.name),h.repeated=(r=d.repeated)!==null&&r!==void 0?r:!1,d.kind=="scalar"&&(h.L=(i=d.L)!==null&&i!==void 0?i:Xr.BIGINT),h.delimited=(s=d.delimited)!==null&&s!==void 0?s:!1,h.req=(o=d.req)!==null&&o!==void 0?o:!1,h.opt=(a=d.opt)!==null&&a!==void 0?a:!1,d.packed===void 0&&(h.packed=d.kind=="enum"||d.kind=="scalar"&&d.T!=A.BYTES&&d.T!=A.STRING),d.oneof!==void 0){const m=typeof d.oneof=="string"?d.oneof:d.oneof.name;(!c||c.name!=m)&&(c=new Q0(m)),h.oneof=c,c.addField(h)}u.push(h)}return u}const f=V0("proto3",n=>new q0(n,e=>X0(e)),n=>{for(const e of n.getType().fields.byMember()){if(e.opt)continue;const t=e.localName,r=n;if(e.repeated){r[t]=[];continue}switch(e.kind){case"oneof":r[t]={case:void 0};break;case"enum":r[t]=0;break;case"map":r[t]={};break;case"scalar":r[t]=fs(e.T,e.L);break}}});var Me;(function(n){n[n.Unary=0]="Unary",n[n.ServerStreaming=1]="ServerStreaming",n[n.ClientStreaming=2]="ClientStreaming",n[n.BiDiStreaming=3]="BiDiStreaming"})(Me||(Me={}));var $h;(function(n){n[n.NoSideEffects=1]="NoSideEffects",n[n.Idempotent=2]="Idempotent"})($h||($h={}));class Re extends O{constructor(e){super(),this.seconds=ne.zero,this.nanos=0,f.util.initPartial(e,this)}fromJson(e,t){if(typeof e!="string")throw new Error(`cannot decode google.protobuf.Timestamp from JSON: ${f.json.debug(e)}`);const r=e.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!r)throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");const i=Date.parse(r[1]+"-"+r[2]+"-"+r[3]+"T"+r[4]+":"+r[5]+":"+r[6]+(r[8]?r[8]:"Z"));if(Number.isNaN(i))throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");if(i<Date.parse("0001-01-01T00:00:00Z")||i>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot decode message google.protobuf.Timestamp from JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");return this.seconds=ne.parse(i/1e3),this.nanos=0,r[7]&&(this.nanos=parseInt("1"+r[7]+"0".repeat(9-r[7].length))-1e9),this}toJson(e){const t=Number(this.seconds)*1e3;if(t<Date.parse("0001-01-01T00:00:00Z")||t>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot encode google.protobuf.Timestamp to JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");if(this.nanos<0)throw new Error("cannot encode google.protobuf.Timestamp to JSON: nanos must not be negative");let r="Z";if(this.nanos>0){const i=(this.nanos+1e9).toString().substring(1);i.substring(3)==="000000"?r="."+i.substring(0,3)+"Z":i.substring(6)==="000"?r="."+i.substring(0,6)+"Z":r="."+i+"Z"}return new Date(t).toISOString().replace(".000Z",r)}toDate(){return new Date(Number(this.seconds)*1e3+Math.ceil(this.nanos/1e6))}static now(){return Re.fromDate(new Date)}static fromDate(e){const t=e.getTime();return new Re({seconds:ne.parse(Math.floor(t/1e3)),nanos:t%1e3*1e6})}static fromBinary(e,t){return new Re().fromBinary(e,t)}static fromJson(e,t){return new Re().fromJson(e,t)}static fromJsonString(e,t){return new Re().fromJsonString(e,t)}static equals(e,t){return f.util.equals(Re,e,t)}}Re.runtime=f;Re.typeName="google.protobuf.Timestamp";Re.fields=f.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);class hr extends O{constructor(e){super(),this.seconds=ne.zero,this.nanos=0,f.util.initPartial(e,this)}fromJson(e,t){if(typeof e!="string")throw new Error(`cannot decode google.protobuf.Duration from JSON: ${f.json.debug(e)}`);const r=e.match(/^(-?[0-9]+)(?:\.([0-9]+))?s/);if(r===null)throw new Error(`cannot decode google.protobuf.Duration from JSON: ${f.json.debug(e)}`);const i=Number(r[1]);if(i>315576e6||i<-315576e6)throw new Error(`cannot decode google.protobuf.Duration from JSON: ${f.json.debug(e)}`);if(this.seconds=ne.parse(i),typeof r[2]=="string"){const s=r[2]+"0".repeat(9-r[2].length);this.nanos=parseInt(s),(i<0||Object.is(i,-0))&&(this.nanos=-this.nanos)}return this}toJson(e){if(Number(this.seconds)>315576e6||Number(this.seconds)<-315576e6)throw new Error("cannot encode google.protobuf.Duration to JSON: value out of range");let t=this.seconds.toString();if(this.nanos!==0){let r=Math.abs(this.nanos).toString();r="0".repeat(9-r.length)+r,r.substring(3)==="000000"?r=r.substring(0,3):r.substring(6)==="000"&&(r=r.substring(0,6)),t+="."+r,this.nanos<0&&Number(this.seconds)==0&&(t="-"+t)}return t+"s"}static fromBinary(e,t){return new hr().fromBinary(e,t)}static fromJson(e,t){return new hr().fromJson(e,t)}static fromJsonString(e,t){return new hr().fromJsonString(e,t)}static equals(e,t){return f.util.equals(hr,e,t)}}hr.runtime=f;hr.typeName="google.protobuf.Duration";hr.fields=f.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);class _t extends O{constructor(e){super(),this.typeUrl="",this.value=new Uint8Array(0),f.util.initPartial(e,this)}toJson(e){var t;if(this.typeUrl==="")return{};const r=this.typeUrlToName(this.typeUrl),i=(t=e==null?void 0:e.typeRegistry)===null||t===void 0?void 0:t.findMessage(r);if(!i)throw new Error(`cannot encode message google.protobuf.Any to JSON: "${this.typeUrl}" is not in the type registry`);let o=i.fromBinary(this.value).toJson(e);return(r.startsWith("google.protobuf.")||o===null||Array.isArray(o)||typeof o!="object")&&(o={value:o}),o["@type"]=this.typeUrl,o}fromJson(e,t){var r;if(e===null||Array.isArray(e)||typeof e!="object")throw new Error(`cannot decode message google.protobuf.Any from JSON: expected object but got ${e===null?"null":Array.isArray(e)?"array":typeof e}`);if(Object.keys(e).length==0)return this;const i=e["@type"];if(typeof i!="string"||i=="")throw new Error('cannot decode message google.protobuf.Any from JSON: "@type" is empty');const s=this.typeUrlToName(i),o=(r=t==null?void 0:t.typeRegistry)===null||r===void 0?void 0:r.findMessage(s);if(!o)throw new Error(`cannot decode message google.protobuf.Any from JSON: ${i} is not in the type registry`);let a;if(s.startsWith("google.protobuf.")&&Object.prototype.hasOwnProperty.call(e,"value"))a=o.fromJson(e.value,t);else{const u=Object.assign({},e);delete u["@type"],a=o.fromJson(u,t)}return this.packFrom(a),this}packFrom(e){this.value=e.toBinary(),this.typeUrl=this.typeNameToUrl(e.getType().typeName)}unpackTo(e){return this.is(e.getType())?(e.fromBinary(this.value),!0):!1}unpack(e){if(this.typeUrl==="")return;const t=e.findMessage(this.typeUrlToName(this.typeUrl));if(t)return t.fromBinary(this.value)}is(e){if(this.typeUrl==="")return!1;const t=this.typeUrlToName(this.typeUrl);let r="";return typeof e=="string"?r=e:r=e.typeName,t===r}typeNameToUrl(e){return`type.googleapis.com/${e}`}typeUrlToName(e){if(!e.length)throw new Error(`invalid type url: ${e}`);const t=e.lastIndexOf("/"),r=t>=0?e.substring(t+1):e;if(!r.length)throw new Error(`invalid type url: ${e}`);return r}static pack(e){const t=new _t;return t.packFrom(e),t}static fromBinary(e,t){return new _t().fromBinary(e,t)}static fromJson(e,t){return new _t().fromJson(e,t)}static fromJsonString(e,t){return new _t().fromJsonString(e,t)}static equals(e,t){return f.util.equals(_t,e,t)}}_t.runtime=f;_t.typeName="google.protobuf.Any";_t.fields=f.util.newFieldList(()=>[{no:1,name:"type_url",kind:"scalar",T:9},{no:2,name:"value",kind:"scalar",T:12}]);class Ht extends O{constructor(e){super(),this.value=0,f.util.initPartial(e,this)}toJson(e){return f.json.writeScalar(A.DOUBLE,this.value,!0)}fromJson(e,t){try{this.value=f.json.readScalar(A.DOUBLE,e)}catch(r){let i='cannot decode message google.protobuf.DoubleValue from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new Ht().fromBinary(e,t)}static fromJson(e,t){return new Ht().fromJson(e,t)}static fromJsonString(e,t){return new Ht().fromJsonString(e,t)}static equals(e,t){return f.util.equals(Ht,e,t)}}Ht.runtime=f;Ht.typeName="google.protobuf.DoubleValue";Ht.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:1}]);Ht.fieldWrapper={wrapField(n){return new Ht({value:n})},unwrapField(n){return n.value}};class Gt extends O{constructor(e){super(),this.value=0,f.util.initPartial(e,this)}toJson(e){return f.json.writeScalar(A.FLOAT,this.value,!0)}fromJson(e,t){try{this.value=f.json.readScalar(A.FLOAT,e)}catch(r){let i='cannot decode message google.protobuf.FloatValue from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new Gt().fromBinary(e,t)}static fromJson(e,t){return new Gt().fromJson(e,t)}static fromJsonString(e,t){return new Gt().fromJsonString(e,t)}static equals(e,t){return f.util.equals(Gt,e,t)}}Gt.runtime=f;Gt.typeName="google.protobuf.FloatValue";Gt.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:2}]);Gt.fieldWrapper={wrapField(n){return new Gt({value:n})},unwrapField(n){return n.value}};class Yt extends O{constructor(e){super(),this.value=ne.zero,f.util.initPartial(e,this)}toJson(e){return f.json.writeScalar(A.INT64,this.value,!0)}fromJson(e,t){try{this.value=f.json.readScalar(A.INT64,e)}catch(r){let i='cannot decode message google.protobuf.Int64Value from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new Yt().fromBinary(e,t)}static fromJson(e,t){return new Yt().fromJson(e,t)}static fromJsonString(e,t){return new Yt().fromJsonString(e,t)}static equals(e,t){return f.util.equals(Yt,e,t)}}Yt.runtime=f;Yt.typeName="google.protobuf.Int64Value";Yt.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:3}]);Yt.fieldWrapper={wrapField(n){return new Yt({value:n})},unwrapField(n){return n.value}};class Qt extends O{constructor(e){super(),this.value=ne.zero,f.util.initPartial(e,this)}toJson(e){return f.json.writeScalar(A.UINT64,this.value,!0)}fromJson(e,t){try{this.value=f.json.readScalar(A.UINT64,e)}catch(r){let i='cannot decode message google.protobuf.UInt64Value from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new Qt().fromBinary(e,t)}static fromJson(e,t){return new Qt().fromJson(e,t)}static fromJsonString(e,t){return new Qt().fromJsonString(e,t)}static equals(e,t){return f.util.equals(Qt,e,t)}}Qt.runtime=f;Qt.typeName="google.protobuf.UInt64Value";Qt.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:4}]);Qt.fieldWrapper={wrapField(n){return new Qt({value:n})},unwrapField(n){return n.value}};class Xt extends O{constructor(e){super(),this.value=0,f.util.initPartial(e,this)}toJson(e){return f.json.writeScalar(A.INT32,this.value,!0)}fromJson(e,t){try{this.value=f.json.readScalar(A.INT32,e)}catch(r){let i='cannot decode message google.protobuf.Int32Value from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new Xt().fromBinary(e,t)}static fromJson(e,t){return new Xt().fromJson(e,t)}static fromJsonString(e,t){return new Xt().fromJsonString(e,t)}static equals(e,t){return f.util.equals(Xt,e,t)}}Xt.runtime=f;Xt.typeName="google.protobuf.Int32Value";Xt.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:5}]);Xt.fieldWrapper={wrapField(n){return new Xt({value:n})},unwrapField(n){return n.value}};class Zt extends O{constructor(e){super(),this.value=0,f.util.initPartial(e,this)}toJson(e){return f.json.writeScalar(A.UINT32,this.value,!0)}fromJson(e,t){try{this.value=f.json.readScalar(A.UINT32,e)}catch(r){let i='cannot decode message google.protobuf.UInt32Value from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new Zt().fromBinary(e,t)}static fromJson(e,t){return new Zt().fromJson(e,t)}static fromJsonString(e,t){return new Zt().fromJsonString(e,t)}static equals(e,t){return f.util.equals(Zt,e,t)}}Zt.runtime=f;Zt.typeName="google.protobuf.UInt32Value";Zt.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:13}]);Zt.fieldWrapper={wrapField(n){return new Zt({value:n})},unwrapField(n){return n.value}};class en extends O{constructor(e){super(),this.value=!1,f.util.initPartial(e,this)}toJson(e){return f.json.writeScalar(A.BOOL,this.value,!0)}fromJson(e,t){try{this.value=f.json.readScalar(A.BOOL,e)}catch(r){let i='cannot decode message google.protobuf.BoolValue from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new en().fromBinary(e,t)}static fromJson(e,t){return new en().fromJson(e,t)}static fromJsonString(e,t){return new en().fromJsonString(e,t)}static equals(e,t){return f.util.equals(en,e,t)}}en.runtime=f;en.typeName="google.protobuf.BoolValue";en.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:8}]);en.fieldWrapper={wrapField(n){return new en({value:n})},unwrapField(n){return n.value}};class Xe extends O{constructor(e){super(),this.value="",f.util.initPartial(e,this)}toJson(e){return f.json.writeScalar(A.STRING,this.value,!0)}fromJson(e,t){try{this.value=f.json.readScalar(A.STRING,e)}catch(r){let i='cannot decode message google.protobuf.StringValue from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new Xe().fromBinary(e,t)}static fromJson(e,t){return new Xe().fromJson(e,t)}static fromJsonString(e,t){return new Xe().fromJsonString(e,t)}static equals(e,t){return f.util.equals(Xe,e,t)}}Xe.runtime=f;Xe.typeName="google.protobuf.StringValue";Xe.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:9}]);Xe.fieldWrapper={wrapField(n){return new Xe({value:n})},unwrapField(n){return n.value}};class tn extends O{constructor(e){super(),this.value=new Uint8Array(0),f.util.initPartial(e,this)}toJson(e){return f.json.writeScalar(A.BYTES,this.value,!0)}fromJson(e,t){try{this.value=f.json.readScalar(A.BYTES,e)}catch(r){let i='cannot decode message google.protobuf.BytesValue from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new tn().fromBinary(e,t)}static fromJson(e,t){return new tn().fromJson(e,t)}static fromJsonString(e,t){return new tn().fromJsonString(e,t)}static equals(e,t){return f.util.equals(tn,e,t)}}tn.runtime=f;tn.typeName="google.protobuf.BytesValue";tn.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:12}]);tn.fieldWrapper={wrapField(n){return new tn({value:n})},unwrapField(n){return n.value}};function Z0(n,e,t){try{const r=_f.dec(n);return e?e.fromBinary(r,t):r}catch(r){throw G.from(r,V.DataLoss)}}function eS(n,e){const t={};for(const[r,i]of Object.entries(n.methods)){const s=e(Object.assign(Object.assign({},i),{localName:r,service:n}));s!=null&&(t[r]=s)}return t}const zh=1;function Uh(n){let e,t=new Uint8Array(0);function r(i){const s=new Uint8Array(t.length+i.length);s.set(t),s.set(i,t.length),t=s}return new ReadableStream({start(){e=n.getReader()},async pull(i){let s;for(;;){if(s===void 0&&t.byteLength>=5){let u=0;for(let c=1;c<5;c++)u=(u<<8)+t[c];s={flags:t[0],length:u}}if(s!==void 0&&t.byteLength>=s.length+5)break;const a=await e.read();if(a.done)break;r(a.value)}if(s===void 0){if(t.byteLength==0){i.close();return}i.error(new G("premature end of stream",V.DataLoss));return}const o=t.subarray(5,5+s.length);t=t.subarray(5+s.length),i.enqueue({flags:s.flags,data:o})}})}function jh(n,e){const t=new Uint8Array(e.length+5);t.set(e,5);const r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.setUint8(0,n),r.setUint32(1,e.length),t}var tS=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof __values=="function"?__values(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,u){o=n[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(c){s({value:c,done:a})},o)}},vo=function(n){return this instanceof vo?(this.v=n,this):new vo(n)},nS=function(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i={},a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(y){return function(w){return Promise.resolve(w).then(y,h)}}function a(y,w){r[y]&&(i[y]=function(T){return new Promise(function(P,p){s.push([y,T,P,p])>1||u(y,T)})},w&&(i[y]=w(i[y])))}function u(y,w){try{c(r[y](w))}catch(T){m(s[0][3],T)}}function c(y){y.value instanceof vo?Promise.resolve(y.value.v).then(d,h):m(s[0][2],y)}function d(y){u("next",y)}function h(y){u("throw",y)}function m(y,w){y(w),s.shift(),s.length&&u(s[0][0],s[0][1])}},rS=function(n){var e,t;return e={},r("next"),r("throw",function(i){throw i}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(i,s){e[i]=n[i]?function(o){return(t=!t)?{value:vo(n[i](o)),done:!1}:s?s(o):o}:s}};function iS(n){return nS(this,arguments,function*(){yield vo(yield*rS(tS(n)))})}var qp=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof __values=="function"?__values(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,u){o=n[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(c){s({value:c,done:a})},o)}},ds=function(n){return this instanceof ds?(this.v=n,this):new ds(n)},sS=function(n){var e,t;return e={},r("next"),r("throw",function(i){throw i}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(i,s){e[i]=n[i]?function(o){return(t=!t)?{value:ds(n[i](o)),done:!1}:s?s(o):o}:s}},oS=function(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i={},a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(y){return function(w){return Promise.resolve(w).then(y,h)}}function a(y,w){r[y]&&(i[y]=function(T){return new Promise(function(P,p){s.push([y,T,P,p])>1||u(y,T)})},w&&(i[y]=w(i[y])))}function u(y,w){try{c(r[y](w))}catch(T){m(s[0][3],T)}}function c(y){y.value instanceof ds?Promise.resolve(y.value.v).then(d,h):m(s[0][2],y)}function d(y){u("next",y)}function h(y){u("throw",y)}function m(y,w){y(w),s.shift(),s.length&&u(s[0][0],s[0][1])}};function aS(n,e){return eS(n,t=>{switch(t.kind){case Me.Unary:return lS(e,n,t);case Me.ServerStreaming:return uS(e,n,t);case Me.ClientStreaming:return cS(e,n,t);case Me.BiDiStreaming:return fS(e,n,t);default:return null}})}function lS(n,e,t){return async function(r,i){var s,o;const a=await n.unary(e,t,i==null?void 0:i.signal,i==null?void 0:i.timeoutMs,i==null?void 0:i.headers,r,i==null?void 0:i.contextValues);return(s=i==null?void 0:i.onHeader)===null||s===void 0||s.call(i,a.header),(o=i==null?void 0:i.onTrailer)===null||o===void 0||o.call(i,a.trailer),a.message}}function uS(n,e,t){return function(r,i){return Kp(n.stream(e,t,i==null?void 0:i.signal,i==null?void 0:i.timeoutMs,i==null?void 0:i.headers,iS([r]),i==null?void 0:i.contextValues),i)}}function cS(n,e,t){return async function(r,i){var s,o,a,u,c,d;const h=await n.stream(e,t,i==null?void 0:i.signal,i==null?void 0:i.timeoutMs,i==null?void 0:i.headers,r,i==null?void 0:i.contextValues);(c=i==null?void 0:i.onHeader)===null||c===void 0||c.call(i,h.header);let m,y=0;try{for(var w=!0,T=qp(h.message),P;P=await T.next(),s=P.done,!s;w=!0)u=P.value,w=!1,m=u,y++}catch(p){o={error:p}}finally{try{!w&&!s&&(a=T.return)&&await a.call(T)}finally{if(o)throw o.error}}if(!m)throw new G("protocol error: missing response message",V.Unimplemented);if(y>1)throw new G("protocol error: received extra messages for client streaming method",V.Unimplemented);return(d=i==null?void 0:i.onTrailer)===null||d===void 0||d.call(i,h.trailer),m}}function fS(n,e,t){return function(r,i){return Kp(n.stream(e,t,i==null?void 0:i.signal,i==null?void 0:i.timeoutMs,i==null?void 0:i.headers,r,i==null?void 0:i.contextValues),i)}}function Kp(n,e){const t=function(){return oS(this,arguments,function*(){var r,i;const s=yield ds(n);(r=e==null?void 0:e.onHeader)===null||r===void 0||r.call(e,s.header),yield ds(yield*sS(qp(s.message))),(i=e==null?void 0:e.onTrailer)===null||i===void 0||i.call(e,s.trailer)})}()[Symbol.asyncIterator]();return{[Symbol.asyncIterator]:()=>({next:()=>t.next()})}}function dS(...n){const e=new AbortController,t=n.filter(i=>i!==void 0).concat(e.signal);for(const i of t){if(i.aborted){r.apply(i);break}i.addEventListener("abort",r)}function r(){e.signal.aborted||e.abort(Wp(this));for(const i of t)i.removeEventListener("abort",r)}return e}function hS(n){const e=new AbortController,t=()=>{e.abort(new G("the operation timed out",V.DeadlineExceeded))};let r;return n!==void 0&&(n<=0?t():r=setTimeout(t,n)),{signal:e.signal,cleanup:()=>clearTimeout(r)}}function Wp(n){if(!n.aborted)return;if(n.reason!==void 0)return n.reason;const e=new Error("This operation was aborted");return e.name="AbortError",e}function Vh(){return{get(n){return n.id in this?this[n.id]:n.defaultValue},set(n,e){return this[n.id]=e,this},delete(n){return delete this[n.id],this}}}const ku=128;function qh(n){const e=new Headers,t=new TextDecoder().decode(n).split(`\r
`);for(const r of t){if(r==="")continue;const i=r.indexOf(":");if(i>0){const s=r.substring(0,i).trim(),o=r.substring(i+1).trim();e.append(s,o)}}return e}const gS="Content-Type",mS="Grpc-Timeout",hs="Grpc-Status",_p="Grpc-Message",pS="Grpc-Status-Details-Bin",yS="X-User-Agent",vS="X-Grpc-Web",wS="application/grpc-web+proto",SS="application/grpc-web+json";class gr extends O{constructor(e){super(),this.code=0,this.message="",this.details=[],f.util.initPartial(e,this)}static fromBinary(e,t){return new gr().fromBinary(e,t)}static fromJson(e,t){return new gr().fromJson(e,t)}static fromJsonString(e,t){return new gr().fromJsonString(e,t)}static equals(e,t){return f.util.equals(gr,e,t)}}gr.runtime=f;gr.typeName="google.rpc.Status";gr.fields=f.util.newFieldList(()=>[{no:1,name:"code",kind:"scalar",T:5},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"details",kind:"message",T:_t,repeated:!0}]);const kS="0";function Hp(n){var e;const t=n.get(pS);if(t!=null){const i=Z0(t,gr);if(i.code==0)return;const s=new G(i.message,i.code,n);return s.details=i.details.map(o=>({type:o.typeUrl.substring(o.typeUrl.lastIndexOf("/")+1),value:o.value})),s}const r=n.get(hs);if(r!=null){if(r===kS)return;const i=parseInt(r,10);return i in V?new G(decodeURIComponent((e=n.get(_p))!==null&&e!==void 0?e:""),i,n):new G(`invalid grpc-status: ${r}`,V.Internal,n)}}function Kh(n,e,t){const r=typeof e=="string"?e:e.typeName,i=typeof t=="string"?t:t.name;return n.toString().replace(/\/?$/,`/${r}/${i}`)}function Gp(n,e){return e instanceof n?e:new n(e)}function TS(n,e){function t(r){return r.done===!0?r:{done:r.done,value:Gp(n,r.value)}}return{[Symbol.asyncIterator](){const r=e[Symbol.asyncIterator](),i={next:()=>r.next().then(t)};return r.throw!==void 0&&(i.throw=s=>r.throw(s).then(t)),r.return!==void 0&&(i.return=s=>r.return(s).then(t)),i}}}function Yp(n,e){var t;return(t=e==null?void 0:e.concat().reverse().reduce((r,i)=>i(r),n))!==null&&t!==void 0?t:n}function AS(n){var e;const t=Object.assign({},n);return(e=t.ignoreUnknownFields)!==null&&e!==void 0||(t.ignoreUnknownFields=!0),t}function Wh(n,e,t,r){const i=e?_h(n.I,r):Hh(n.I,t);return{parse:(e?_h(n.O,r):Hh(n.O,t)).parse,serialize:i.serialize}}function _h(n,e){return{parse(t){try{return n.fromBinary(t,e)}catch(r){const i=r instanceof Error?r.message:String(r);throw new G(`parse binary: ${i}`,V.Internal)}},serialize(t){try{return t.toBinary(e)}catch(r){const i=r instanceof Error?r.message:String(r);throw new G(`serialize binary: ${i}`,V.Internal)}}}}function Hh(n,e){var t,r;const i=(t=e==null?void 0:e.textEncoder)!==null&&t!==void 0?t:new TextEncoder,s=(r=e==null?void 0:e.textDecoder)!==null&&r!==void 0?r:new TextDecoder,o=AS(e);return{parse(a){try{const u=s.decode(a);return n.fromJsonString(u,o)}catch(u){throw G.from(u,V.InvalidArgument)}},serialize(a){try{const u=a.toJsonString(o);return i.encode(u)}catch(u){throw G.from(u,V.Internal)}}}}function IS(n){const e=Yp(n.next,n.interceptors),[t,r,i]=Qp(n),s=Object.assign(Object.assign({},n.req),{message:Gp(n.req.method.I,n.req.message),signal:t});return e(s).then(o=>(i(),o),r)}function ES(n){const e=Yp(n.next,n.interceptors),[t,r,i]=Qp(n),s=Object.assign(Object.assign({},n.req),{message:TS(n.req.method.I,n.req.message),signal:t});let o=!1;return t.addEventListener("abort",function(){var a,u;const c=n.req.message[Symbol.asyncIterator]();o||(a=c.throw)===null||a===void 0||a.call(c,this.reason).catch(()=>{}),(u=c.return)===null||u===void 0||u.call(c).catch(()=>{})}),e(s).then(a=>Object.assign(Object.assign({},a),{message:{[Symbol.asyncIterator](){const u=a.message[Symbol.asyncIterator]();return{next(){return u.next().then(c=>(c.done==!0&&(o=!0,i()),c),r)}}}}}),r)}function Qp(n){const{signal:e,cleanup:t}=hS(n.timeoutMs),r=dS(n.signal,e);return[r.signal,function(s){const o=G.from(e.aborted?Wp(e):s);return r.abort(o),t(),Promise.reject(o)},function(){t(),r.abort()}]}function xS(){try{new Headers}catch{throw new Error("connect-web requires the fetch API. Are you running on an old version of Node.js? Node.js is not supported in Connect for Web - please stay tuned for Connect for Node.")}}function Gh(n,e){const t=Hp(n);if(t)throw e.forEach((r,i)=>{t.metadata.append(i,r)}),t;if(!e.has(hs)&&!n.has(hs))throw new G("protocol error: missing status",V.Internal)}function Yh(n,e,t,r){const i=new Headers(t??{});return i.set(gS,n?wS:SS),i.set(vS,"1"),i.set(yS,"connect-es/1.6.1"),e!==void 0&&i.set(mS,`${e}m`),i}function CS(n){switch(n){case 400:return V.Internal;case 401:return V.Unauthenticated;case 403:return V.PermissionDenied;case 404:return V.Unimplemented;case 429:return V.Unavailable;case 502:return V.Unavailable;case 503:return V.Unavailable;case 504:return V.Unavailable;default:return V.Unknown}}function Qh(n,e){var t;if(n>=200&&n<300)return{foundStatus:e.has(hs),headerError:Hp(e)};throw new G(decodeURIComponent((t=e.get(_p))!==null&&t!==void 0?t:`HTTP ${n}`),CS(n),e)}var gi=function(n){return this instanceof gi?(this.v=n,this):new gi(n)},NS=function(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i={},a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(y){return function(w){return Promise.resolve(w).then(y,h)}}function a(y,w){r[y]&&(i[y]=function(T){return new Promise(function(P,p){s.push([y,T,P,p])>1||u(y,T)})},w&&(i[y]=w(i[y])))}function u(y,w){try{c(r[y](w))}catch(T){m(s[0][3],T)}}function c(y){y.value instanceof gi?Promise.resolve(y.value.v).then(d,h):m(s[0][2],y)}function d(y){u("next",y)}function h(y){u("throw",y)}function m(y,w){y(w),s.shift(),s.length&&u(s[0][0],s[0][1])}};function PS(n){var e;xS();const t=(e=n.useBinaryFormat)!==null&&e!==void 0?e:!0;return{async unary(r,i,s,o,a,u,c){var d;const{serialize:h,parse:m}=Wh(i,t,n.jsonOptions,n.binaryOptions);return o=o===void 0?n.defaultTimeoutMs:o<=0?void 0:o,await IS({interceptors:n.interceptors,signal:s,timeoutMs:o,req:{stream:!1,service:r,method:i,url:Kh(n.baseUrl,r,i),init:{method:"POST",credentials:(d=n.credentials)!==null&&d!==void 0?d:"same-origin",redirect:"error",mode:"cors"},header:Yh(t,o,a),contextValues:c??Vh(),message:u},next:async y=>{var w;const P=await((w=n.fetch)!==null&&w!==void 0?w:globalThis.fetch)(y.url,Object.assign(Object.assign({},y.init),{headers:y.header,signal:y.signal,body:jh(0,h(y.message))})),{headerError:p}=Qh(P.status,P.headers);if(!P.body)throw p!==void 0?p:"missing response body";const g=Uh(P.body).getReader();let v,I;for(;;){const E=await g.read();if(E.done)break;const{flags:N,data:D}=E.value;if((N&zh)===zh)throw new G("protocol error: received unsupported compressed output",V.Internal);if(N===ku){if(v!==void 0)throw"extra trailer";v=qh(D);continue}if(I!==void 0)throw new G("extra message",V.Unimplemented);I=m(D)}if(v===void 0)throw p!==void 0?p:new G("missing trailer",P.headers.has(hs)?V.Unimplemented:V.Unknown);if(Gh(v,P.headers),I===void 0)throw new G("missing message",v.has(hs)?V.Unimplemented:V.Unknown);return{stream:!1,service:r,method:i,header:P.headers,message:I,trailer:v}}})},async stream(r,i,s,o,a,u,c){var d;const{serialize:h,parse:m}=Wh(i,t,n.jsonOptions,n.binaryOptions);function y(T,P,p,g,v){return NS(this,arguments,function*(){const E=Uh(T).getReader();if(P){if(!(yield gi(E.read())).done)throw"extra data for trailers-only";return yield gi(void 0)}let N=!1;for(;;){const D=yield gi(E.read());if(D.done)break;const{flags:R,data:W}=D.value;if((R&ku)===ku){if(N)throw"extra trailer";N=!0;const $=qh(W);Gh($,g),$.forEach((Se,Ut)=>p.set(Ut,Se));continue}if(N)throw"extra message";yield yield gi(m(W))}if("throwIfAborted"in v&&v.throwIfAborted(),!N)throw"missing trailer"})}async function w(T){if(i.kind!=Me.ServerStreaming)throw"The fetch API does not support streaming request bodies";const P=await T[Symbol.asyncIterator]().next();if(P.done==!0)throw"missing request message";return jh(0,h(P.value))}return o=o===void 0?n.defaultTimeoutMs:o<=0?void 0:o,ES({interceptors:n.interceptors,signal:s,timeoutMs:o,req:{stream:!0,service:r,method:i,url:Kh(n.baseUrl,r,i),init:{method:"POST",credentials:(d=n.credentials)!==null&&d!==void 0?d:"same-origin",redirect:"error",mode:"cors"},header:Yh(t,o,a),contextValues:c??Vh(),message:u},next:async T=>{var P;const g=await((P=n.fetch)!==null&&P!==void 0?P:globalThis.fetch)(T.url,Object.assign(Object.assign({},T.init),{headers:T.header,signal:T.signal,body:await w(T.message)})),{foundStatus:v,headerError:I}=Qh(g.status,g.headers);if(I!=null)throw I;if(!g.body)throw"missing response body";const E=new Headers;return Object.assign(Object.assign({},T),{header:g.headers,trailer:E,message:y(g.body,v,E,g.headers,T.signal)})}})}}}var z=(n=>(n[n.NULL=0]="NULL",n[n.BOOLEAN=1]="BOOLEAN",n[n.INTEGER=2]="INTEGER",n[n.LONG=3]="LONG",n[n.DOUBLE=4]="DOUBLE",n[n.STRING=5]="STRING",n[n.BYTES=6]="BYTES",n[n.DATE=7]="DATE",n[n.JSON_OBJECT=8]="JSON_OBJECT",n[n.JSON_ARRAY=9]="JSON_ARRAY",n[n.TEXT=10]="TEXT",n[n.INTEGER_CNT=11]="INTEGER_CNT",n[n.LONG_CNT=12]="LONG_CNT",n[n.TREE=13]="TREE",n))(z||{});f.util.setEnumType(z,"yorkie.v1.ValueType",[{no:0,name:"VALUE_TYPE_NULL"},{no:1,name:"VALUE_TYPE_BOOLEAN"},{no:2,name:"VALUE_TYPE_INTEGER"},{no:3,name:"VALUE_TYPE_LONG"},{no:4,name:"VALUE_TYPE_DOUBLE"},{no:5,name:"VALUE_TYPE_STRING"},{no:6,name:"VALUE_TYPE_BYTES"},{no:7,name:"VALUE_TYPE_DATE"},{no:8,name:"VALUE_TYPE_JSON_OBJECT"},{no:9,name:"VALUE_TYPE_JSON_ARRAY"},{no:10,name:"VALUE_TYPE_TEXT"},{no:11,name:"VALUE_TYPE_INTEGER_CNT"},{no:12,name:"VALUE_TYPE_LONG_CNT"},{no:13,name:"VALUE_TYPE_TREE"}]);var wi=(n=>(n[n.DOCUMENT_CHANGED=0]="DOCUMENT_CHANGED",n[n.DOCUMENT_WATCHED=1]="DOCUMENT_WATCHED",n[n.DOCUMENT_UNWATCHED=2]="DOCUMENT_UNWATCHED",n[n.DOCUMENT_BROADCAST=3]="DOCUMENT_BROADCAST",n))(wi||{});f.util.setEnumType(wi,"yorkie.v1.DocEventType",[{no:0,name:"DOC_EVENT_TYPE_DOCUMENT_CHANGED"},{no:1,name:"DOC_EVENT_TYPE_DOCUMENT_WATCHED"},{no:2,name:"DOC_EVENT_TYPE_DOCUMENT_UNWATCHED"},{no:3,name:"DOC_EVENT_TYPE_DOCUMENT_BROADCAST"}]);const un=class un extends O{constructor(t){super();l(this,"root");l(this,"presences",{});f.util.initPartial(t,this)}static fromBinary(t,r){return new un().fromBinary(t,r)}static fromJson(t,r){return new un().fromJson(t,r)}static fromJsonString(t,r){return new un().fromJsonString(t,r)}static equals(t,r){return f.util.equals(un,t,r)}};l(un,"runtime",f),l(un,"typeName","yorkie.v1.Snapshot"),l(un,"fields",f.util.newFieldList(()=>[{no:1,name:"root",kind:"message",T:Ge},{no:2,name:"presences",kind:"map",K:9,V:{kind:"message",T:Gf}}]));let Ac=un;var ut;let xr=(ut=class extends O{constructor(t){super();l(this,"documentKey","");l(this,"checkpoint");l(this,"snapshot",new Uint8Array(0));l(this,"changes",[]);l(this,"minSyncedTicket");l(this,"isRemoved",!1);l(this,"versionVector");f.util.initPartial(t,this)}static fromBinary(t,r){return new ut().fromBinary(t,r)}static fromJson(t,r){return new ut().fromJson(t,r)}static fromJsonString(t,r){return new ut().fromJsonString(t,r)}static equals(t,r){return f.util.equals(ut,t,r)}},l(ut,"runtime",f),l(ut,"typeName","yorkie.v1.ChangePack"),l(ut,"fields",f.util.newFieldList(()=>[{no:1,name:"document_key",kind:"scalar",T:9},{no:2,name:"checkpoint",kind:"message",T:ey},{no:3,name:"snapshot",kind:"scalar",T:12},{no:4,name:"changes",kind:"message",T:Xp,repeated:!0},{no:5,name:"min_synced_ticket",kind:"message",T:b},{no:6,name:"is_removed",kind:"scalar",T:8},{no:7,name:"version_vector",kind:"message",T:$l}])),ut);var ct;let Xp=(ct=class extends O{constructor(t){super();l(this,"id");l(this,"message","");l(this,"operations",[]);l(this,"presenceChange");f.util.initPartial(t,this)}static fromBinary(t,r){return new ct().fromBinary(t,r)}static fromJson(t,r){return new ct().fromJson(t,r)}static fromJsonString(t,r){return new ct().fromJsonString(t,r)}static equals(t,r){return f.util.equals(ct,t,r)}},l(ct,"runtime",f),l(ct,"typeName","yorkie.v1.Change"),l(ct,"fields",f.util.newFieldList(()=>[{no:1,name:"id",kind:"message",T:Jl},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"operations",kind:"message",T:Hf,repeated:!0},{no:4,name:"presence_change",kind:"message",T:ko}])),ct);var ft;let Jl=(ft=class extends O{constructor(t){super();l(this,"clientSeq",0);l(this,"serverSeq",ne.zero);l(this,"lamport",ne.zero);l(this,"actorId",new Uint8Array(0));l(this,"versionVector");f.util.initPartial(t,this)}static fromBinary(t,r){return new ft().fromBinary(t,r)}static fromJson(t,r){return new ft().fromJson(t,r)}static fromJsonString(t,r){return new ft().fromJsonString(t,r)}static equals(t,r){return f.util.equals(ft,t,r)}},l(ft,"runtime",f),l(ft,"typeName","yorkie.v1.ChangeID"),l(ft,"fields",f.util.newFieldList(()=>[{no:1,name:"client_seq",kind:"scalar",T:13},{no:2,name:"server_seq",kind:"scalar",T:3},{no:3,name:"lamport",kind:"scalar",T:3},{no:4,name:"actor_id",kind:"scalar",T:12},{no:5,name:"version_vector",kind:"message",T:$l}])),ft);var dt;let $l=(dt=class extends O{constructor(t){super();l(this,"vector",{});f.util.initPartial(t,this)}static fromBinary(t,r){return new dt().fromBinary(t,r)}static fromJson(t,r){return new dt().fromJson(t,r)}static fromJsonString(t,r){return new dt().fromJsonString(t,r)}static equals(t,r){return f.util.equals(dt,t,r)}},l(dt,"runtime",f),l(dt,"typeName","yorkie.v1.VersionVector"),l(dt,"fields",f.util.newFieldList(()=>[{no:1,name:"vector",kind:"map",K:9,V:{kind:"scalar",T:3}}])),dt);var ht;let Hf=(ht=class extends O{constructor(t){super();l(this,"body",{case:void 0});f.util.initPartial(t,this)}static fromBinary(t,r){return new ht().fromBinary(t,r)}static fromJson(t,r){return new ht().fromJson(t,r)}static fromJsonString(t,r){return new ht().fromJsonString(t,r)}static equals(t,r){return f.util.equals(ht,t,r)}},l(ht,"runtime",f),l(ht,"typeName","yorkie.v1.Operation"),l(ht,"fields",f.util.newFieldList(()=>[{no:1,name:"set",kind:"message",T:Za,oneof:"body"},{no:2,name:"add",kind:"message",T:el,oneof:"body"},{no:3,name:"move",kind:"message",T:tl,oneof:"body"},{no:4,name:"remove",kind:"message",T:nl,oneof:"body"},{no:5,name:"edit",kind:"message",T:rl,oneof:"body"},{no:6,name:"select",kind:"message",T:Ic,oneof:"body"},{no:7,name:"style",kind:"message",T:il,oneof:"body"},{no:8,name:"increase",kind:"message",T:sl,oneof:"body"},{no:9,name:"tree_edit",kind:"message",T:ol,oneof:"body"},{no:10,name:"tree_style",kind:"message",T:al,oneof:"body"},{no:11,name:"array_set",kind:"message",T:Ec,oneof:"body"}])),ht);const cn=class cn extends O{constructor(t){super();l(this,"parentCreatedAt");l(this,"key","");l(this,"value");l(this,"executedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new cn().fromBinary(t,r)}static fromJson(t,r){return new cn().fromJson(t,r)}static fromJsonString(t,r){return new cn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(cn,t,r)}};l(cn,"runtime",f),l(cn,"typeName","yorkie.v1.Operation.Set"),l(cn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:b},{no:2,name:"key",kind:"scalar",T:9},{no:3,name:"value",kind:"message",T:lt},{no:4,name:"executed_at",kind:"message",T:b}]));let Za=cn;const fn=class fn extends O{constructor(t){super();l(this,"parentCreatedAt");l(this,"prevCreatedAt");l(this,"value");l(this,"executedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new fn().fromBinary(t,r)}static fromJson(t,r){return new fn().fromJson(t,r)}static fromJsonString(t,r){return new fn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(fn,t,r)}};l(fn,"runtime",f),l(fn,"typeName","yorkie.v1.Operation.Add"),l(fn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:b},{no:2,name:"prev_created_at",kind:"message",T:b},{no:3,name:"value",kind:"message",T:lt},{no:4,name:"executed_at",kind:"message",T:b}]));let el=fn;const dn=class dn extends O{constructor(t){super();l(this,"parentCreatedAt");l(this,"prevCreatedAt");l(this,"createdAt");l(this,"executedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new dn().fromBinary(t,r)}static fromJson(t,r){return new dn().fromJson(t,r)}static fromJsonString(t,r){return new dn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(dn,t,r)}};l(dn,"runtime",f),l(dn,"typeName","yorkie.v1.Operation.Move"),l(dn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:b},{no:2,name:"prev_created_at",kind:"message",T:b},{no:3,name:"created_at",kind:"message",T:b},{no:4,name:"executed_at",kind:"message",T:b}]));let tl=dn;const hn=class hn extends O{constructor(t){super();l(this,"parentCreatedAt");l(this,"createdAt");l(this,"executedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new hn().fromBinary(t,r)}static fromJson(t,r){return new hn().fromJson(t,r)}static fromJsonString(t,r){return new hn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(hn,t,r)}};l(hn,"runtime",f),l(hn,"typeName","yorkie.v1.Operation.Remove"),l(hn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:b},{no:2,name:"created_at",kind:"message",T:b},{no:3,name:"executed_at",kind:"message",T:b}]));let nl=hn;const gn=class gn extends O{constructor(t){super();l(this,"parentCreatedAt");l(this,"from");l(this,"to");l(this,"createdAtMapByActor",{});l(this,"content","");l(this,"executedAt");l(this,"attributes",{});f.util.initPartial(t,this)}static fromBinary(t,r){return new gn().fromBinary(t,r)}static fromJson(t,r){return new gn().fromJson(t,r)}static fromJsonString(t,r){return new gn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(gn,t,r)}};l(gn,"runtime",f),l(gn,"typeName","yorkie.v1.Operation.Edit"),l(gn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:b},{no:2,name:"from",kind:"message",T:Ar},{no:3,name:"to",kind:"message",T:Ar},{no:4,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:b}},{no:5,name:"content",kind:"scalar",T:9},{no:6,name:"executed_at",kind:"message",T:b},{no:7,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}}]));let rl=gn;const mn=class mn extends O{constructor(t){super();l(this,"parentCreatedAt");l(this,"from");l(this,"to");l(this,"executedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new mn().fromBinary(t,r)}static fromJson(t,r){return new mn().fromJson(t,r)}static fromJsonString(t,r){return new mn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(mn,t,r)}};l(mn,"runtime",f),l(mn,"typeName","yorkie.v1.Operation.Select"),l(mn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:b},{no:2,name:"from",kind:"message",T:Ar},{no:3,name:"to",kind:"message",T:Ar},{no:4,name:"executed_at",kind:"message",T:b}]));let Ic=mn;const pn=class pn extends O{constructor(t){super();l(this,"parentCreatedAt");l(this,"from");l(this,"to");l(this,"attributes",{});l(this,"executedAt");l(this,"createdAtMapByActor",{});f.util.initPartial(t,this)}static fromBinary(t,r){return new pn().fromBinary(t,r)}static fromJson(t,r){return new pn().fromJson(t,r)}static fromJsonString(t,r){return new pn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(pn,t,r)}};l(pn,"runtime",f),l(pn,"typeName","yorkie.v1.Operation.Style"),l(pn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:b},{no:2,name:"from",kind:"message",T:Ar},{no:3,name:"to",kind:"message",T:Ar},{no:4,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:5,name:"executed_at",kind:"message",T:b},{no:6,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:b}}]));let il=pn;const yn=class yn extends O{constructor(t){super();l(this,"parentCreatedAt");l(this,"value");l(this,"executedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new yn().fromBinary(t,r)}static fromJson(t,r){return new yn().fromJson(t,r)}static fromJsonString(t,r){return new yn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(yn,t,r)}};l(yn,"runtime",f),l(yn,"typeName","yorkie.v1.Operation.Increase"),l(yn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:b},{no:2,name:"value",kind:"message",T:lt},{no:3,name:"executed_at",kind:"message",T:b}]));let sl=yn;const vn=class vn extends O{constructor(t){super();l(this,"parentCreatedAt");l(this,"from");l(this,"to");l(this,"createdAtMapByActor",{});l(this,"contents",[]);l(this,"splitLevel",0);l(this,"executedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new vn().fromBinary(t,r)}static fromJson(t,r){return new vn().fromJson(t,r)}static fromJsonString(t,r){return new vn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(vn,t,r)}};l(vn,"runtime",f),l(vn,"typeName","yorkie.v1.Operation.TreeEdit"),l(vn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:b},{no:2,name:"from",kind:"message",T:Ei},{no:3,name:"to",kind:"message",T:Ei},{no:4,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:b}},{no:5,name:"contents",kind:"message",T:pl,repeated:!0},{no:7,name:"split_level",kind:"scalar",T:5},{no:6,name:"executed_at",kind:"message",T:b}]));let ol=vn;const wn=class wn extends O{constructor(t){super();l(this,"parentCreatedAt");l(this,"from");l(this,"to");l(this,"attributes",{});l(this,"executedAt");l(this,"attributesToRemove",[]);l(this,"createdAtMapByActor",{});f.util.initPartial(t,this)}static fromBinary(t,r){return new wn().fromBinary(t,r)}static fromJson(t,r){return new wn().fromJson(t,r)}static fromJsonString(t,r){return new wn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(wn,t,r)}};l(wn,"runtime",f),l(wn,"typeName","yorkie.v1.Operation.TreeStyle"),l(wn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:b},{no:2,name:"from",kind:"message",T:Ei},{no:3,name:"to",kind:"message",T:Ei},{no:4,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:5,name:"executed_at",kind:"message",T:b},{no:6,name:"attributes_to_remove",kind:"scalar",T:9,repeated:!0},{no:7,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:b}}]));let al=wn;const Sn=class Sn extends O{constructor(t){super();l(this,"parentCreatedAt");l(this,"createdAt");l(this,"value");l(this,"executedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new Sn().fromBinary(t,r)}static fromJson(t,r){return new Sn().fromJson(t,r)}static fromJsonString(t,r){return new Sn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Sn,t,r)}};l(Sn,"runtime",f),l(Sn,"typeName","yorkie.v1.Operation.ArraySet"),l(Sn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:b},{no:2,name:"created_at",kind:"message",T:b},{no:3,name:"value",kind:"message",T:lt},{no:4,name:"executed_at",kind:"message",T:b}]));let Ec=Sn;const kn=class kn extends O{constructor(t){super();l(this,"createdAt");l(this,"movedAt");l(this,"removedAt");l(this,"type",0);l(this,"value",new Uint8Array(0));f.util.initPartial(t,this)}static fromBinary(t,r){return new kn().fromBinary(t,r)}static fromJson(t,r){return new kn().fromJson(t,r)}static fromJsonString(t,r){return new kn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(kn,t,r)}};l(kn,"runtime",f),l(kn,"typeName","yorkie.v1.JSONElementSimple"),l(kn,"fields",f.util.newFieldList(()=>[{no:1,name:"created_at",kind:"message",T:b},{no:2,name:"moved_at",kind:"message",T:b},{no:3,name:"removed_at",kind:"message",T:b},{no:4,name:"type",kind:"enum",T:f.getEnumType(z)},{no:5,name:"value",kind:"scalar",T:12}]));let lt=kn;const Tn=class Tn extends O{constructor(t){super();l(this,"body",{case:void 0});f.util.initPartial(t,this)}static fromBinary(t,r){return new Tn().fromBinary(t,r)}static fromJson(t,r){return new Tn().fromJson(t,r)}static fromJsonString(t,r){return new Tn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Tn,t,r)}};l(Tn,"runtime",f),l(Tn,"typeName","yorkie.v1.JSONElement"),l(Tn,"fields",f.util.newFieldList(()=>[{no:1,name:"json_object",kind:"message",T:ll,oneof:"body"},{no:2,name:"json_array",kind:"message",T:ul,oneof:"body"},{no:3,name:"primitive",kind:"message",T:cl,oneof:"body"},{no:5,name:"text",kind:"message",T:fl,oneof:"body"},{no:6,name:"counter",kind:"message",T:dl,oneof:"body"},{no:7,name:"tree",kind:"message",T:hl,oneof:"body"}]));let Ge=Tn;const An=class An extends O{constructor(t){super();l(this,"nodes",[]);l(this,"createdAt");l(this,"movedAt");l(this,"removedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new An().fromBinary(t,r)}static fromJson(t,r){return new An().fromJson(t,r)}static fromJsonString(t,r){return new An().fromJsonString(t,r)}static equals(t,r){return f.util.equals(An,t,r)}};l(An,"runtime",f),l(An,"typeName","yorkie.v1.JSONElement.JSONObject"),l(An,"fields",f.util.newFieldList(()=>[{no:1,name:"nodes",kind:"message",T:Zp,repeated:!0},{no:2,name:"created_at",kind:"message",T:b},{no:3,name:"moved_at",kind:"message",T:b},{no:4,name:"removed_at",kind:"message",T:b}]));let ll=An;const In=class In extends O{constructor(t){super();l(this,"nodes",[]);l(this,"createdAt");l(this,"movedAt");l(this,"removedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new In().fromBinary(t,r)}static fromJson(t,r){return new In().fromJson(t,r)}static fromJsonString(t,r){return new In().fromJsonString(t,r)}static equals(t,r){return f.util.equals(In,t,r)}};l(In,"runtime",f),l(In,"typeName","yorkie.v1.JSONElement.JSONArray"),l(In,"fields",f.util.newFieldList(()=>[{no:1,name:"nodes",kind:"message",T:gl,repeated:!0},{no:2,name:"created_at",kind:"message",T:b},{no:3,name:"moved_at",kind:"message",T:b},{no:4,name:"removed_at",kind:"message",T:b}]));let ul=In;const En=class En extends O{constructor(t){super();l(this,"type",0);l(this,"value",new Uint8Array(0));l(this,"createdAt");l(this,"movedAt");l(this,"removedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new En().fromBinary(t,r)}static fromJson(t,r){return new En().fromJson(t,r)}static fromJsonString(t,r){return new En().fromJsonString(t,r)}static equals(t,r){return f.util.equals(En,t,r)}};l(En,"runtime",f),l(En,"typeName","yorkie.v1.JSONElement.Primitive"),l(En,"fields",f.util.newFieldList(()=>[{no:1,name:"type",kind:"enum",T:f.getEnumType(z)},{no:2,name:"value",kind:"scalar",T:12},{no:3,name:"created_at",kind:"message",T:b},{no:4,name:"moved_at",kind:"message",T:b},{no:5,name:"removed_at",kind:"message",T:b}]));let cl=En;const xn=class xn extends O{constructor(t){super();l(this,"nodes",[]);l(this,"createdAt");l(this,"movedAt");l(this,"removedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new xn().fromBinary(t,r)}static fromJson(t,r){return new xn().fromJson(t,r)}static fromJsonString(t,r){return new xn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(xn,t,r)}};l(xn,"runtime",f),l(xn,"typeName","yorkie.v1.JSONElement.Text"),l(xn,"fields",f.util.newFieldList(()=>[{no:1,name:"nodes",kind:"message",T:ml,repeated:!0},{no:2,name:"created_at",kind:"message",T:b},{no:3,name:"moved_at",kind:"message",T:b},{no:4,name:"removed_at",kind:"message",T:b}]));let fl=xn;const Cn=class Cn extends O{constructor(t){super();l(this,"type",0);l(this,"value",new Uint8Array(0));l(this,"createdAt");l(this,"movedAt");l(this,"removedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new Cn().fromBinary(t,r)}static fromJson(t,r){return new Cn().fromJson(t,r)}static fromJsonString(t,r){return new Cn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Cn,t,r)}};l(Cn,"runtime",f),l(Cn,"typeName","yorkie.v1.JSONElement.Counter"),l(Cn,"fields",f.util.newFieldList(()=>[{no:1,name:"type",kind:"enum",T:f.getEnumType(z)},{no:2,name:"value",kind:"scalar",T:12},{no:3,name:"created_at",kind:"message",T:b},{no:4,name:"moved_at",kind:"message",T:b},{no:5,name:"removed_at",kind:"message",T:b}]));let dl=Cn;const Nn=class Nn extends O{constructor(t){super();l(this,"nodes",[]);l(this,"createdAt");l(this,"movedAt");l(this,"removedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new Nn().fromBinary(t,r)}static fromJson(t,r){return new Nn().fromJson(t,r)}static fromJsonString(t,r){return new Nn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Nn,t,r)}};l(Nn,"runtime",f),l(Nn,"typeName","yorkie.v1.JSONElement.Tree"),l(Nn,"fields",f.util.newFieldList(()=>[{no:1,name:"nodes",kind:"message",T:So,repeated:!0},{no:2,name:"created_at",kind:"message",T:b},{no:3,name:"moved_at",kind:"message",T:b},{no:4,name:"removed_at",kind:"message",T:b}]));let hl=Nn;var gt;let Zp=(gt=class extends O{constructor(t){super();l(this,"key","");l(this,"element");f.util.initPartial(t,this)}static fromBinary(t,r){return new gt().fromBinary(t,r)}static fromJson(t,r){return new gt().fromJson(t,r)}static fromJsonString(t,r){return new gt().fromJsonString(t,r)}static equals(t,r){return f.util.equals(gt,t,r)}},l(gt,"runtime",f),l(gt,"typeName","yorkie.v1.RHTNode"),l(gt,"fields",f.util.newFieldList(()=>[{no:1,name:"key",kind:"scalar",T:9},{no:2,name:"element",kind:"message",T:Ge}])),gt);const qt=class qt extends O{constructor(t){super();l(this,"next");l(this,"element");f.util.initPartial(t,this)}static fromBinary(t,r){return new qt().fromBinary(t,r)}static fromJson(t,r){return new qt().fromJson(t,r)}static fromJsonString(t,r){return new qt().fromJsonString(t,r)}static equals(t,r){return f.util.equals(qt,t,r)}};l(qt,"runtime",f),l(qt,"typeName","yorkie.v1.RGANode"),l(qt,"fields",f.util.newFieldList(()=>[{no:1,name:"next",kind:"message",T:qt},{no:2,name:"element",kind:"message",T:Ge}]));let gl=qt;const Pn=class Pn extends O{constructor(t){super();l(this,"value","");l(this,"updatedAt");l(this,"isRemoved",!1);f.util.initPartial(t,this)}static fromBinary(t,r){return new Pn().fromBinary(t,r)}static fromJson(t,r){return new Pn().fromJson(t,r)}static fromJsonString(t,r){return new Pn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Pn,t,r)}};l(Pn,"runtime",f),l(Pn,"typeName","yorkie.v1.NodeAttr"),l(Pn,"fields",f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:9},{no:2,name:"updated_at",kind:"message",T:b},{no:3,name:"is_removed",kind:"scalar",T:8}]));let gs=Pn;const Dn=class Dn extends O{constructor(t){super();l(this,"id");l(this,"value","");l(this,"removedAt");l(this,"insPrevId");l(this,"attributes",{});f.util.initPartial(t,this)}static fromBinary(t,r){return new Dn().fromBinary(t,r)}static fromJson(t,r){return new Dn().fromJson(t,r)}static fromJsonString(t,r){return new Dn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Dn,t,r)}};l(Dn,"runtime",f),l(Dn,"typeName","yorkie.v1.TextNode"),l(Dn,"fields",f.util.newFieldList(()=>[{no:1,name:"id",kind:"message",T:wo},{no:2,name:"value",kind:"scalar",T:9},{no:3,name:"removed_at",kind:"message",T:b},{no:4,name:"ins_prev_id",kind:"message",T:wo},{no:5,name:"attributes",kind:"map",K:9,V:{kind:"message",T:gs}}]));let ml=Dn;const On=class On extends O{constructor(t){super();l(this,"createdAt");l(this,"offset",0);f.util.initPartial(t,this)}static fromBinary(t,r){return new On().fromBinary(t,r)}static fromJson(t,r){return new On().fromJson(t,r)}static fromJsonString(t,r){return new On().fromJsonString(t,r)}static equals(t,r){return f.util.equals(On,t,r)}};l(On,"runtime",f),l(On,"typeName","yorkie.v1.TextNodeID"),l(On,"fields",f.util.newFieldList(()=>[{no:1,name:"created_at",kind:"message",T:b},{no:2,name:"offset",kind:"scalar",T:5}]));let wo=On;const Rn=class Rn extends O{constructor(t){super();l(this,"id");l(this,"type","");l(this,"value","");l(this,"removedAt");l(this,"insPrevId");l(this,"insNextId");l(this,"depth",0);l(this,"attributes",{});f.util.initPartial(t,this)}static fromBinary(t,r){return new Rn().fromBinary(t,r)}static fromJson(t,r){return new Rn().fromJson(t,r)}static fromJsonString(t,r){return new Rn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Rn,t,r)}};l(Rn,"runtime",f),l(Rn,"typeName","yorkie.v1.TreeNode"),l(Rn,"fields",f.util.newFieldList(()=>[{no:1,name:"id",kind:"message",T:_r},{no:2,name:"type",kind:"scalar",T:9},{no:3,name:"value",kind:"scalar",T:9},{no:4,name:"removed_at",kind:"message",T:b},{no:5,name:"ins_prev_id",kind:"message",T:_r},{no:6,name:"ins_next_id",kind:"message",T:_r},{no:7,name:"depth",kind:"scalar",T:5},{no:8,name:"attributes",kind:"map",K:9,V:{kind:"message",T:gs}}]));let So=Rn;const Ln=class Ln extends O{constructor(t){super();l(this,"content",[]);f.util.initPartial(t,this)}static fromBinary(t,r){return new Ln().fromBinary(t,r)}static fromJson(t,r){return new Ln().fromJson(t,r)}static fromJsonString(t,r){return new Ln().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Ln,t,r)}};l(Ln,"runtime",f),l(Ln,"typeName","yorkie.v1.TreeNodes"),l(Ln,"fields",f.util.newFieldList(()=>[{no:1,name:"content",kind:"message",T:So,repeated:!0}]));let pl=Ln;const Bn=class Bn extends O{constructor(t){super();l(this,"createdAt");l(this,"offset",0);f.util.initPartial(t,this)}static fromBinary(t,r){return new Bn().fromBinary(t,r)}static fromJson(t,r){return new Bn().fromJson(t,r)}static fromJsonString(t,r){return new Bn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Bn,t,r)}};l(Bn,"runtime",f),l(Bn,"typeName","yorkie.v1.TreeNodeID"),l(Bn,"fields",f.util.newFieldList(()=>[{no:1,name:"created_at",kind:"message",T:b},{no:2,name:"offset",kind:"scalar",T:5}]));let _r=Bn;const bn=class bn extends O{constructor(t){super();l(this,"parentId");l(this,"leftSiblingId");f.util.initPartial(t,this)}static fromBinary(t,r){return new bn().fromBinary(t,r)}static fromJson(t,r){return new bn().fromJson(t,r)}static fromJsonString(t,r){return new bn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(bn,t,r)}};l(bn,"runtime",f),l(bn,"typeName","yorkie.v1.TreePos"),l(bn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_id",kind:"message",T:_r},{no:2,name:"left_sibling_id",kind:"message",T:_r}]));let Ei=bn;const Mn=class Mn extends O{constructor(t){super();l(this,"id","");l(this,"username","");l(this,"createdAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new Mn().fromBinary(t,r)}static fromJson(t,r){return new Mn().fromJson(t,r)}static fromJsonString(t,r){return new Mn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Mn,t,r)}};l(Mn,"runtime",f),l(Mn,"typeName","yorkie.v1.User"),l(Mn,"fields",f.util.newFieldList(()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"username",kind:"scalar",T:9},{no:3,name:"created_at",kind:"message",T:Re}]));let Xh=Mn;const Fn=class Fn extends O{constructor(t){super();l(this,"id","");l(this,"name","");l(this,"publicKey","");l(this,"secretKey","");l(this,"authWebhookUrl","");l(this,"authWebhookMethods",[]);l(this,"clientDeactivateThreshold","");l(this,"createdAt");l(this,"updatedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new Fn().fromBinary(t,r)}static fromJson(t,r){return new Fn().fromJson(t,r)}static fromJsonString(t,r){return new Fn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Fn,t,r)}};l(Fn,"runtime",f),l(Fn,"typeName","yorkie.v1.Project"),l(Fn,"fields",f.util.newFieldList(()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"public_key",kind:"scalar",T:9},{no:4,name:"secret_key",kind:"scalar",T:9},{no:5,name:"auth_webhook_url",kind:"scalar",T:9},{no:6,name:"auth_webhook_methods",kind:"scalar",T:9,repeated:!0},{no:7,name:"client_deactivate_threshold",kind:"scalar",T:9},{no:8,name:"created_at",kind:"message",T:Re},{no:9,name:"updated_at",kind:"message",T:Re}]));let Zh=Fn;const Jn=class Jn extends O{constructor(t){super();l(this,"name");l(this,"authWebhookUrl");l(this,"authWebhookMethods");l(this,"clientDeactivateThreshold");f.util.initPartial(t,this)}static fromBinary(t,r){return new Jn().fromBinary(t,r)}static fromJson(t,r){return new Jn().fromJson(t,r)}static fromJsonString(t,r){return new Jn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Jn,t,r)}};l(Jn,"runtime",f),l(Jn,"typeName","yorkie.v1.UpdatableProjectFields"),l(Jn,"fields",f.util.newFieldList(()=>[{no:1,name:"name",kind:"message",T:Xe},{no:2,name:"auth_webhook_url",kind:"message",T:Xe},{no:3,name:"auth_webhook_methods",kind:"message",T:xc},{no:4,name:"client_deactivate_threshold",kind:"message",T:Xe}]));let eg=Jn;const $n=class $n extends O{constructor(t){super();l(this,"methods",[]);f.util.initPartial(t,this)}static fromBinary(t,r){return new $n().fromBinary(t,r)}static fromJson(t,r){return new $n().fromJson(t,r)}static fromJsonString(t,r){return new $n().fromJsonString(t,r)}static equals(t,r){return f.util.equals($n,t,r)}};l($n,"runtime",f),l($n,"typeName","yorkie.v1.UpdatableProjectFields.AuthWebhookMethods"),l($n,"fields",f.util.newFieldList(()=>[{no:1,name:"methods",kind:"scalar",T:9,repeated:!0}]));let xc=$n;const zn=class zn extends O{constructor(t){super();l(this,"id","");l(this,"key","");l(this,"snapshot","");l(this,"createdAt");l(this,"accessedAt");l(this,"updatedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new zn().fromBinary(t,r)}static fromJson(t,r){return new zn().fromJson(t,r)}static fromJsonString(t,r){return new zn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(zn,t,r)}};l(zn,"runtime",f),l(zn,"typeName","yorkie.v1.DocumentSummary"),l(zn,"fields",f.util.newFieldList(()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"key",kind:"scalar",T:9},{no:3,name:"snapshot",kind:"scalar",T:9},{no:4,name:"created_at",kind:"message",T:Re},{no:5,name:"accessed_at",kind:"message",T:Re},{no:6,name:"updated_at",kind:"message",T:Re}]));let tg=zn;const Un=class Un extends O{constructor(t){super();l(this,"type",0);l(this,"presence");f.util.initPartial(t,this)}static fromBinary(t,r){return new Un().fromBinary(t,r)}static fromJson(t,r){return new Un().fromJson(t,r)}static fromJsonString(t,r){return new Un().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Un,t,r)}};l(Un,"runtime",f),l(Un,"typeName","yorkie.v1.PresenceChange"),l(Un,"fields",f.util.newFieldList(()=>[{no:1,name:"type",kind:"enum",T:f.getEnumType(xi)},{no:2,name:"presence",kind:"message",T:Gf}]));let ko=Un;var xi=(n=>(n[n.UNSPECIFIED=0]="UNSPECIFIED",n[n.PUT=1]="PUT",n[n.DELETE=2]="DELETE",n[n.CLEAR=3]="CLEAR",n))(xi||{});f.util.setEnumType(xi,"yorkie.v1.PresenceChange.ChangeType",[{no:0,name:"CHANGE_TYPE_UNSPECIFIED"},{no:1,name:"CHANGE_TYPE_PUT"},{no:2,name:"CHANGE_TYPE_DELETE"},{no:3,name:"CHANGE_TYPE_CLEAR"}]);var mt;let Gf=(mt=class extends O{constructor(t){super();l(this,"data",{});f.util.initPartial(t,this)}static fromBinary(t,r){return new mt().fromBinary(t,r)}static fromJson(t,r){return new mt().fromJson(t,r)}static fromJsonString(t,r){return new mt().fromJsonString(t,r)}static equals(t,r){return f.util.equals(mt,t,r)}},l(mt,"runtime",f),l(mt,"typeName","yorkie.v1.Presence"),l(mt,"fields",f.util.newFieldList(()=>[{no:1,name:"data",kind:"map",K:9,V:{kind:"scalar",T:9}}])),mt);var pt;let ey=(pt=class extends O{constructor(t){super();l(this,"serverSeq",ne.zero);l(this,"clientSeq",0);f.util.initPartial(t,this)}static fromBinary(t,r){return new pt().fromBinary(t,r)}static fromJson(t,r){return new pt().fromJson(t,r)}static fromJsonString(t,r){return new pt().fromJsonString(t,r)}static equals(t,r){return f.util.equals(pt,t,r)}},l(pt,"runtime",f),l(pt,"typeName","yorkie.v1.Checkpoint"),l(pt,"fields",f.util.newFieldList(()=>[{no:1,name:"server_seq",kind:"scalar",T:3},{no:2,name:"client_seq",kind:"scalar",T:13}])),pt);const jn=class jn extends O{constructor(t){super();l(this,"createdAt");l(this,"offset",0);l(this,"relativeOffset",0);f.util.initPartial(t,this)}static fromBinary(t,r){return new jn().fromBinary(t,r)}static fromJson(t,r){return new jn().fromJson(t,r)}static fromJsonString(t,r){return new jn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(jn,t,r)}};l(jn,"runtime",f),l(jn,"typeName","yorkie.v1.TextNodePos"),l(jn,"fields",f.util.newFieldList(()=>[{no:1,name:"created_at",kind:"message",T:b},{no:2,name:"offset",kind:"scalar",T:5},{no:3,name:"relative_offset",kind:"scalar",T:5}]));let Ar=jn;var yt;let b=(yt=class extends O{constructor(t){super();l(this,"lamport",ne.zero);l(this,"delimiter",0);l(this,"actorId",new Uint8Array(0));f.util.initPartial(t,this)}static fromBinary(t,r){return new yt().fromBinary(t,r)}static fromJson(t,r){return new yt().fromJson(t,r)}static fromJsonString(t,r){return new yt().fromJsonString(t,r)}static equals(t,r){return f.util.equals(yt,t,r)}},l(yt,"runtime",f),l(yt,"typeName","yorkie.v1.TimeTicket"),l(yt,"fields",f.util.newFieldList(()=>[{no:1,name:"lamport",kind:"scalar",T:3},{no:2,name:"delimiter",kind:"scalar",T:13},{no:3,name:"actor_id",kind:"scalar",T:12}])),yt);const Vn=class Vn extends O{constructor(t){super();l(this,"topic","");l(this,"payload",new Uint8Array(0));f.util.initPartial(t,this)}static fromBinary(t,r){return new Vn().fromBinary(t,r)}static fromJson(t,r){return new Vn().fromJson(t,r)}static fromJsonString(t,r){return new Vn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Vn,t,r)}};l(Vn,"runtime",f),l(Vn,"typeName","yorkie.v1.DocEventBody"),l(Vn,"fields",f.util.newFieldList(()=>[{no:1,name:"topic",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:12}]));let Cc=Vn;const qn=class qn extends O{constructor(t){super();l(this,"type",0);l(this,"publisher","");l(this,"body");f.util.initPartial(t,this)}static fromBinary(t,r){return new qn().fromBinary(t,r)}static fromJson(t,r){return new qn().fromJson(t,r)}static fromJsonString(t,r){return new qn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(qn,t,r)}};l(qn,"runtime",f),l(qn,"typeName","yorkie.v1.DocEvent"),l(qn,"fields",f.util.newFieldList(()=>[{no:1,name:"type",kind:"enum",T:f.getEnumType(wi)},{no:2,name:"publisher",kind:"scalar",T:9},{no:3,name:"body",kind:"message",T:Cc}]));let Nc=qn;const Kn=class Kn extends O{constructor(t){super();l(this,"clientKey","");l(this,"metadata",{});f.util.initPartial(t,this)}static fromBinary(t,r){return new Kn().fromBinary(t,r)}static fromJson(t,r){return new Kn().fromJson(t,r)}static fromJsonString(t,r){return new Kn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Kn,t,r)}};l(Kn,"runtime",f),l(Kn,"typeName","yorkie.v1.ActivateClientRequest"),l(Kn,"fields",f.util.newFieldList(()=>[{no:1,name:"client_key",kind:"scalar",T:9},{no:2,name:"metadata",kind:"map",K:9,V:{kind:"scalar",T:9}}]));let Pc=Kn;const Wn=class Wn extends O{constructor(t){super();l(this,"clientId","");f.util.initPartial(t,this)}static fromBinary(t,r){return new Wn().fromBinary(t,r)}static fromJson(t,r){return new Wn().fromJson(t,r)}static fromJsonString(t,r){return new Wn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Wn,t,r)}};l(Wn,"runtime",f),l(Wn,"typeName","yorkie.v1.ActivateClientResponse"),l(Wn,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9}]));let Dc=Wn;const _n=class _n extends O{constructor(t){super();l(this,"clientId","");f.util.initPartial(t,this)}static fromBinary(t,r){return new _n().fromBinary(t,r)}static fromJson(t,r){return new _n().fromJson(t,r)}static fromJsonString(t,r){return new _n().fromJsonString(t,r)}static equals(t,r){return f.util.equals(_n,t,r)}};l(_n,"runtime",f),l(_n,"typeName","yorkie.v1.DeactivateClientRequest"),l(_n,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9}]));let Oc=_n;const Hn=class Hn extends O{constructor(e){super(),f.util.initPartial(e,this)}static fromBinary(e,t){return new Hn().fromBinary(e,t)}static fromJson(e,t){return new Hn().fromJson(e,t)}static fromJsonString(e,t){return new Hn().fromJsonString(e,t)}static equals(e,t){return f.util.equals(Hn,e,t)}};l(Hn,"runtime",f),l(Hn,"typeName","yorkie.v1.DeactivateClientResponse"),l(Hn,"fields",f.util.newFieldList(()=>[]));let Rc=Hn;const Gn=class Gn extends O{constructor(t){super();l(this,"clientId","");l(this,"changePack");f.util.initPartial(t,this)}static fromBinary(t,r){return new Gn().fromBinary(t,r)}static fromJson(t,r){return new Gn().fromJson(t,r)}static fromJsonString(t,r){return new Gn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Gn,t,r)}};l(Gn,"runtime",f),l(Gn,"typeName","yorkie.v1.AttachDocumentRequest"),l(Gn,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"change_pack",kind:"message",T:xr}]));let Lc=Gn;const Yn=class Yn extends O{constructor(t){super();l(this,"documentId","");l(this,"changePack");f.util.initPartial(t,this)}static fromBinary(t,r){return new Yn().fromBinary(t,r)}static fromJson(t,r){return new Yn().fromJson(t,r)}static fromJsonString(t,r){return new Yn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Yn,t,r)}};l(Yn,"runtime",f),l(Yn,"typeName","yorkie.v1.AttachDocumentResponse"),l(Yn,"fields",f.util.newFieldList(()=>[{no:1,name:"document_id",kind:"scalar",T:9},{no:2,name:"change_pack",kind:"message",T:xr}]));let Bc=Yn;const Qn=class Qn extends O{constructor(t){super();l(this,"clientId","");l(this,"documentId","");l(this,"changePack");l(this,"removeIfNotAttached",!1);f.util.initPartial(t,this)}static fromBinary(t,r){return new Qn().fromBinary(t,r)}static fromJson(t,r){return new Qn().fromJson(t,r)}static fromJsonString(t,r){return new Qn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Qn,t,r)}};l(Qn,"runtime",f),l(Qn,"typeName","yorkie.v1.DetachDocumentRequest"),l(Qn,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:xr},{no:4,name:"remove_if_not_attached",kind:"scalar",T:8}]));let bc=Qn;const Xn=class Xn extends O{constructor(t){super();l(this,"changePack");f.util.initPartial(t,this)}static fromBinary(t,r){return new Xn().fromBinary(t,r)}static fromJson(t,r){return new Xn().fromJson(t,r)}static fromJsonString(t,r){return new Xn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Xn,t,r)}};l(Xn,"runtime",f),l(Xn,"typeName","yorkie.v1.DetachDocumentResponse"),l(Xn,"fields",f.util.newFieldList(()=>[{no:2,name:"change_pack",kind:"message",T:xr}]));let Mc=Xn;const Zn=class Zn extends O{constructor(t){super();l(this,"clientId","");l(this,"documentId","");f.util.initPartial(t,this)}static fromBinary(t,r){return new Zn().fromBinary(t,r)}static fromJson(t,r){return new Zn().fromJson(t,r)}static fromJsonString(t,r){return new Zn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Zn,t,r)}};l(Zn,"runtime",f),l(Zn,"typeName","yorkie.v1.WatchDocumentRequest"),l(Zn,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9}]));let Fc=Zn;const er=class er extends O{constructor(t){super();l(this,"body",{case:void 0});f.util.initPartial(t,this)}static fromBinary(t,r){return new er().fromBinary(t,r)}static fromJson(t,r){return new er().fromJson(t,r)}static fromJsonString(t,r){return new er().fromJsonString(t,r)}static equals(t,r){return f.util.equals(er,t,r)}};l(er,"runtime",f),l(er,"typeName","yorkie.v1.WatchDocumentResponse"),l(er,"fields",f.util.newFieldList(()=>[{no:1,name:"initialization",kind:"message",T:$c,oneof:"body"},{no:2,name:"event",kind:"message",T:Nc,oneof:"body"}]));let Jc=er;const tr=class tr extends O{constructor(t){super();l(this,"clientIds",[]);f.util.initPartial(t,this)}static fromBinary(t,r){return new tr().fromBinary(t,r)}static fromJson(t,r){return new tr().fromJson(t,r)}static fromJsonString(t,r){return new tr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(tr,t,r)}};l(tr,"runtime",f),l(tr,"typeName","yorkie.v1.WatchDocumentResponse.Initialization"),l(tr,"fields",f.util.newFieldList(()=>[{no:1,name:"client_ids",kind:"scalar",T:9,repeated:!0}]));let $c=tr;const nr=class nr extends O{constructor(t){super();l(this,"clientId","");l(this,"documentId","");l(this,"changePack");f.util.initPartial(t,this)}static fromBinary(t,r){return new nr().fromBinary(t,r)}static fromJson(t,r){return new nr().fromJson(t,r)}static fromJsonString(t,r){return new nr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(nr,t,r)}};l(nr,"runtime",f),l(nr,"typeName","yorkie.v1.RemoveDocumentRequest"),l(nr,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:xr}]));let zc=nr;const rr=class rr extends O{constructor(t){super();l(this,"changePack");f.util.initPartial(t,this)}static fromBinary(t,r){return new rr().fromBinary(t,r)}static fromJson(t,r){return new rr().fromJson(t,r)}static fromJsonString(t,r){return new rr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(rr,t,r)}};l(rr,"runtime",f),l(rr,"typeName","yorkie.v1.RemoveDocumentResponse"),l(rr,"fields",f.util.newFieldList(()=>[{no:1,name:"change_pack",kind:"message",T:xr}]));let Uc=rr;const ir=class ir extends O{constructor(t){super();l(this,"clientId","");l(this,"documentId","");l(this,"changePack");l(this,"pushOnly",!1);f.util.initPartial(t,this)}static fromBinary(t,r){return new ir().fromBinary(t,r)}static fromJson(t,r){return new ir().fromJson(t,r)}static fromJsonString(t,r){return new ir().fromJsonString(t,r)}static equals(t,r){return f.util.equals(ir,t,r)}};l(ir,"runtime",f),l(ir,"typeName","yorkie.v1.PushPullChangesRequest"),l(ir,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:xr},{no:4,name:"push_only",kind:"scalar",T:8}]));let jc=ir;const sr=class sr extends O{constructor(t){super();l(this,"changePack");f.util.initPartial(t,this)}static fromBinary(t,r){return new sr().fromBinary(t,r)}static fromJson(t,r){return new sr().fromJson(t,r)}static fromJsonString(t,r){return new sr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(sr,t,r)}};l(sr,"runtime",f),l(sr,"typeName","yorkie.v1.PushPullChangesResponse"),l(sr,"fields",f.util.newFieldList(()=>[{no:1,name:"change_pack",kind:"message",T:xr}]));let Vc=sr;const or=class or extends O{constructor(t){super();l(this,"clientId","");l(this,"documentId","");l(this,"topic","");l(this,"payload",new Uint8Array(0));f.util.initPartial(t,this)}static fromBinary(t,r){return new or().fromBinary(t,r)}static fromJson(t,r){return new or().fromJson(t,r)}static fromJsonString(t,r){return new or().fromJsonString(t,r)}static equals(t,r){return f.util.equals(or,t,r)}};l(or,"runtime",f),l(or,"typeName","yorkie.v1.BroadcastRequest"),l(or,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"topic",kind:"scalar",T:9},{no:4,name:"payload",kind:"scalar",T:12}]));let qc=or;const ar=class ar extends O{constructor(e){super(),f.util.initPartial(e,this)}static fromBinary(e,t){return new ar().fromBinary(e,t)}static fromJson(e,t){return new ar().fromJson(e,t)}static fromJsonString(e,t){return new ar().fromJsonString(e,t)}static equals(e,t){return f.util.equals(ar,e,t)}};l(ar,"runtime",f),l(ar,"typeName","yorkie.v1.BroadcastResponse"),l(ar,"fields",f.util.newFieldList(()=>[]));let Kc=ar;const DS={typeName:"yorkie.v1.YorkieService",methods:{activateClient:{name:"ActivateClient",I:Pc,O:Dc,kind:Me.Unary},deactivateClient:{name:"DeactivateClient",I:Oc,O:Rc,kind:Me.Unary},attachDocument:{name:"AttachDocument",I:Lc,O:Bc,kind:Me.Unary},detachDocument:{name:"DetachDocument",I:bc,O:Mc,kind:Me.Unary},removeDocument:{name:"RemoveDocument",I:zc,O:Uc,kind:Me.Unary},pushPullChanges:{name:"PushPullChanges",I:jc,O:Vc,kind:Me.Unary},watchDocument:{name:"WatchDocument",I:Fc,O:Jc,kind:Me.ServerStreaming},broadcast:{name:"Broadcast",I:qc,O:Kc,kind:Me.Unary}}},OS=f.makeMessageType("google.rpc.ErrorInfo",()=>[{no:1,name:"reason",kind:"scalar",T:9},{no:2,name:"domain",kind:"scalar",T:9},{no:3,name:"metadata",kind:"map",K:9,V:{kind:"scalar",T:9}}]);f.makeMessageType("google.rpc.RetryInfo",()=>[{no:1,name:"retry_delay",kind:"message",T:hr}]);f.makeMessageType("google.rpc.DebugInfo",()=>[{no:1,name:"stack_entries",kind:"scalar",T:9,repeated:!0},{no:2,name:"detail",kind:"scalar",T:9}]);f.makeMessageType("google.rpc.QuotaFailure",()=>[{no:1,name:"violations",kind:"message",T:RS,repeated:!0}]);const RS=f.makeMessageType("google.rpc.QuotaFailure.Violation",()=>[{no:1,name:"subject",kind:"scalar",T:9},{no:2,name:"description",kind:"scalar",T:9}],{localName:"QuotaFailure_Violation"});f.makeMessageType("google.rpc.PreconditionFailure",()=>[{no:1,name:"violations",kind:"message",T:LS,repeated:!0}]);const LS=f.makeMessageType("google.rpc.PreconditionFailure.Violation",()=>[{no:1,name:"type",kind:"scalar",T:9},{no:2,name:"subject",kind:"scalar",T:9},{no:3,name:"description",kind:"scalar",T:9}],{localName:"PreconditionFailure_Violation"});f.makeMessageType("google.rpc.BadRequest",()=>[{no:1,name:"field_violations",kind:"message",T:BS,repeated:!0}]);const BS=f.makeMessageType("google.rpc.BadRequest.FieldViolation",()=>[{no:1,name:"field",kind:"scalar",T:9},{no:2,name:"description",kind:"scalar",T:9},{no:3,name:"reason",kind:"scalar",T:9},{no:4,name:"localized_message",kind:"message",T:MS}],{localName:"BadRequest_FieldViolation"});f.makeMessageType("google.rpc.RequestInfo",()=>[{no:1,name:"request_id",kind:"scalar",T:9},{no:2,name:"serving_data",kind:"scalar",T:9}]);f.makeMessageType("google.rpc.ResourceInfo",()=>[{no:1,name:"resource_type",kind:"scalar",T:9},{no:2,name:"resource_name",kind:"scalar",T:9},{no:3,name:"owner",kind:"scalar",T:9},{no:4,name:"description",kind:"scalar",T:9}]);f.makeMessageType("google.rpc.Help",()=>[{no:1,name:"links",kind:"message",T:bS,repeated:!0}]);const bS=f.makeMessageType("google.rpc.Help.Link",()=>[{no:1,name:"description",kind:"scalar",T:9},{no:2,name:"url",kind:"scalar",T:9}],{localName:"Help_Link"}),MS=f.makeMessageType("google.rpc.LocalizedMessage",()=>[{no:1,name:"locale",kind:"scalar",T:9},{no:2,name:"message",kind:"scalar",T:9}]);var S=(n=>(n.Ok="ok",n.ErrClientNotActivated="ErrClientNotActivated",n.ErrClientNotFound="ErrClientNotFound",n.ErrUnimplemented="ErrUnimplemented",n.ErrInvalidType="ErrInvalidType",n.ErrDummy="ErrDummy",n.ErrDocumentNotAttached="ErrDocumentNotAttached",n.ErrDocumentNotDetached="ErrDocumentNotDetached",n.ErrDocumentRemoved="ErrDocumentRemoved",n.ErrInvalidObjectKey="ErrInvalidObjectKey",n.ErrInvalidArgument="ErrInvalidArgument",n.ErrNotInitialized="ErrNotInitialized",n.ErrNotReady="ErrNotReady",n.ErrRefused="ErrRefused",n.ErrContextNotProvided="ErrContextNotProvided",n.ErrPermissionDenied="ErrPermissionDenied",n.ErrUnauthenticated="ErrUnauthenticated",n.ErrTooManySubscribers="ErrTooManySubscribers",n.ErrTooManyAttachments="ErrTooManyAttachments",n))(S||{});class k extends Error{constructor(t,r){super(r);l(this,"name","YorkieError");l(this,"stack");this.code=t,this.message=r,this.toString=()=>`[code=${this.code}]: ${this.message}`}}function Dt(n){if(n instanceof Map){const e=Array.from(n);return new Map(JSON.parse(JSON.stringify(e)))}return JSON.parse(JSON.stringify(n))}const ty=n=>n?Object.entries(n).length===0:!0,ms=n=>{const e={};for(const[t,r]of Object.entries(n))e[t]=JSON.stringify(r);return e},ts=n=>{const e={};for(const[t,r]of Object.entries(n))e[t]=JSON.parse(r);return e};var Zr=(n=>(n.Put="put",n.Clear="clear",n))(Zr||{});class Tu{constructor(e,t){l(this,"context");l(this,"presence");this.context=e,this.presence=t}set(e,t){for(const r of Object.keys(e))this.presence[r]=e[r];this.context.setPresenceChange({type:"put",presence:Dt(this.presence)}),this.context.setReversePresence(e,t)}get(e){return this.presence[e]}clear(){this.presence={},this.context.setPresenceChange({type:"clear"})}}const zl="000000000000000000000000";class Tt{constructor(e,t,r){l(this,"lamport");l(this,"delimiter");l(this,"actorID");this.lamport=e,this.delimiter=t,this.actorID=r}static of(e,t,r){return new Tt(e,t,r)}static fromStruct(e){return Tt.of(BigInt(e.lamport),e.delimiter,e.actorID)}toIDString(){return`${this.lamport.toString()}:${this.actorID}:${this.delimiter}`}toStruct(){return{lamport:this.getLamportAsString(),delimiter:this.getDelimiter(),actorID:this.getActorID()}}toTestString(){return`${this.lamport.toString()}:${this.actorID.slice(-2)}:${this.delimiter}`}setActor(e){return new Tt(this.lamport,this.delimiter,e)}getLamportAsString(){return this.lamport.toString()}getLamport(){return this.lamport}getDelimiter(){return this.delimiter}getActorID(){return this.actorID}after(e){return this.compare(e)>0}equals(e){return this.compare(e)===0}compare(e){if(this.lamport>e.lamport)return 1;if(e.lamport>this.lamport)return-1;const t=this.actorID.localeCompare(e.actorID);return t!==0?t:this.delimiter>e.delimiter?1:e.delimiter>this.delimiter?-1:0}}const ny=0,Qs=9223372036854775807n,Ft=new Tt(0n,ny,zl);function nn(n){return n.replace(/["'\\\n\r\f\b\t\u2028\u2029]/g,function(e){switch(e){case'"':case"\\":return"\\"+e;case`
`:return"\\n";case"\r":return"\\r";case"\f":return"\\f";case"\b":return"\\b";case"	":return"\\t";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:return e}})}class Lo{constructor(e){l(this,"createdAt");l(this,"movedAt");l(this,"removedAt");this.createdAt=e}getCreatedAt(){return this.createdAt}getID(){return this.createdAt}getMovedAt(){return this.movedAt}getRemovedAt(){return this.removedAt}getPositionedAt(){return this.movedAt?this.movedAt:this.createdAt}setMovedAt(e){return!this.movedAt||e&&e.after(this.movedAt)?(this.movedAt=e,!0):!1}setRemovedAt(e){this.removedAt=e}remove(e){return e&&e.after(this.getPositionedAt())&&(!this.removedAt||e.after(this.removedAt))?(this.removedAt=e,!0):!1}isRemoved(){return!!this.removedAt}}class Hr extends Lo{constructor(e){super(e)}}class Yf{constructor(e,t){l(this,"strKey");l(this,"value");this.strKey=e,this.value=t}static of(e,t){return new Yf(e,t)}isRemoved(){return this.value.isRemoved()}getStrKey(){return this.strKey}getValue(){return this.value}remove(e){return this.value.remove(e)}}class To{constructor(){l(this,"nodeMapByKey");l(this,"nodeMapByCreatedAt");this.nodeMapByKey=new Map,this.nodeMapByCreatedAt=new Map}static create(){return new To}set(e,t,r){let i;const s=this.nodeMapByKey.get(e);s!=null&&!s.isRemoved()&&s.remove(r)&&(i=s.getValue());const o=Yf.of(e,t);return this.nodeMapByCreatedAt.set(t.getCreatedAt().toIDString(),o),(s==null||r.after(s.getValue().getPositionedAt()))&&(this.nodeMapByKey.set(e,o),t.setMovedAt(r)),i}delete(e,t){if(!this.nodeMapByCreatedAt.has(e.toIDString()))throw new k(S.ErrInvalidArgument,`fail to find ${e.toIDString()}`);const r=this.nodeMapByCreatedAt.get(e.toIDString());return r.remove(t),r.getValue()}subPathOf(e){const t=this.nodeMapByCreatedAt.get(e.toIDString());if(t)return t.getStrKey()}purge(e){const t=this.nodeMapByCreatedAt.get(e.getCreatedAt().toIDString());if(!t)throw new k(S.ErrInvalidArgument,`fail to find ${e.getCreatedAt().toIDString()}`);const r=this.nodeMapByKey.get(t.getStrKey());t===r&&this.nodeMapByKey.delete(r.getStrKey()),this.nodeMapByCreatedAt.delete(t.getValue().getCreatedAt().toIDString())}deleteByKey(e,t){const r=this.nodeMapByKey.get(e);if(r!=null&&r.remove(t))return r.getValue()}has(e){const t=this.nodeMapByKey.get(e);return t==null?!1:!t.isRemoved()}getByID(e){return this.nodeMapByCreatedAt.get(e.toIDString())}get(e){const t=this.nodeMapByKey.get(e);if(!(!t||t.isRemoved()))return t}*[Symbol.iterator](){for(const[,e]of this.nodeMapByKey)yield e}}class He extends Hr{constructor(t,r){super(t);l(this,"memberNodes");this.memberNodes=r}static create(t,r){if(!r)return new He(t,To.create());const i=To.create();for(const[s,o]of Object.entries(r))i.set(s,o.deepcopy(),o.getCreatedAt());return new He(t,i)}subPathOf(t){return this.memberNodes.subPathOf(t)}purge(t){this.memberNodes.purge(t)}set(t,r,i){return this.memberNodes.set(t,r,i)}delete(t,r){return this.memberNodes.delete(t,r)}deleteByKey(t,r){return this.memberNodes.deleteByKey(t,r)}get(t){const r=this.memberNodes.get(t);return r==null?void 0:r.getValue()}getByID(t){const r=this.memberNodes.getByID(t);return r==null?void 0:r.getValue()}has(t){return this.memberNodes.has(t)}toJSON(){const t=[];for(const[r,i]of this)t.push(`"${nn(r)}":${i.toJSON()}`);return`{${t.join(",")}}`}toJS(){return JSON.parse(this.toJSON())}toJSForTest(){const t={};for(const[r,i]of this){const{createdAt:s,value:o,type:a}=i.toJSForTest();t[r]={key:r,createdAt:s,value:o,type:a}}return{createdAt:this.getCreatedAt().toTestString(),value:t,type:"YORKIE_OBJECT"}}getKeys(){const t=Array();for(const[r]of this)t.push(r);return t}toSortedJSON(){var i;const t=Array();for(const[s]of this)t.push(s);const r=[];for(const s of t.sort()){const o=(i=this.memberNodes.get(s))==null?void 0:i.getValue();r.push(`"${nn(s)}":${o.toSortedJSON()}`)}return`{${r.join(",")}}`}getRHT(){return this.memberNodes}deepcopy(){const t=He.create(this.getCreatedAt());for(const r of this.memberNodes)t.memberNodes.set(r.getStrKey(),r.getValue().deepcopy(),this.getPositionedAt());return t.remove(this.getRemovedAt()),t}getDescendants(t){for(const r of this.memberNodes){const i=r.getValue();if(t(i,this))return;i instanceof Hr&&i.getDescendants(t)}}*[Symbol.iterator](){const t=new Set;for(const r of this.memberNodes)t.has(r.getStrKey())||(t.add(r.getStrKey()),r.isRemoved()||(yield[r.getStrKey(),r.getValue()]))}}var Q=(n=>(n.Local="local",n.Remote="remote",n.UndoRedo="undoredo",n))(Q||{});class zt{constructor(e,t){l(this,"parentCreatedAt");l(this,"executedAt");this.parentCreatedAt=e,this.executedAt=t}getParentCreatedAt(){return this.parentCreatedAt}getExecutedAt(){if(!this.executedAt)throw new k(S.ErrNotReady,"executedAt is not set yet");return this.executedAt}setActor(e){this.executedAt&&(this.executedAt=this.executedAt.setActor(e))}setExecutedAt(e){this.executedAt=e}}class ry{constructor(e){l(this,"value");l(this,"left");l(this,"right");l(this,"parent");l(this,"weight");this.value=e,this.initWeight()}getNodeString(){return`${this.weight}${this.value}`}getValue(){return this.value}getLeftWeight(){return this.hasLeft()?this.left.getWeight():0}getRightWeight(){return this.hasRight()?this.right.getWeight():0}getWeight(){return this.weight}getLeft(){return this.left}getRight(){return this.right}getParent(){return this.parent}hasLeft(){return!!this.left}hasRight(){return!!this.right}hasParent(){return!!this.parent}setLeft(e){this.left=e}setRight(e){this.right=e}setParent(e){this.parent=e}unlink(){this.parent=void 0,this.right=void 0,this.left=void 0}hasLinks(){return this.hasParent()||this.hasLeft()||this.hasRight()}increaseWeight(e){this.weight+=e}initWeight(){this.weight=this.getLength()}}class Ao{constructor(e){l(this,"root");this.root=e}get length(){return this.root?this.root.getWeight():0}find(e){if(!this.root||e<0)return[void 0,0];let t=this.root;for(;;)if(t.hasLeft()&&e<=t.getLeftWeight())t=t.getLeft();else if(t.hasRight()&&t.getLeftWeight()+t.getLength()<e)e-=t.getLeftWeight()+t.getLength(),t=t.getRight();else{e-=t.getLeftWeight();break}if(e>t.getLength())throw new k(S.ErrInvalidArgument,`out of index range: pos: ${e} > node.length: ${t.getLength()}`);return this.splayNode(t),[t,e]}indexOf(e){return!e||e!==this.root&&!e.hasLinks()?-1:(this.splayNode(e),this.root.getLeftWeight())}getRoot(){return this.root}insert(e){return this.insertAfter(this.root,e)}insertAfter(e,t){return e?(this.splayNode(e),this.root=t,t.setRight(e.getRight()),e.hasRight()&&e.getRight().setParent(t),t.setLeft(e),e.setParent(t),e.setRight(),this.updateWeight(e),this.updateWeight(t),t):(this.root=t,t)}updateWeight(e){e.initWeight(),e.hasLeft()&&e.increaseWeight(e.getLeftWeight()),e.hasRight()&&e.increaseWeight(e.getRightWeight())}updateTreeWeight(e){for(;e;)this.updateWeight(e),e=e.getParent()}splayNode(e){if(e)for(;;)if(this.isLeftChild(e.getParent())&&this.isRightChild(e))this.rotateLeft(e),this.rotateRight(e);else if(this.isRightChild(e.getParent())&&this.isLeftChild(e))this.rotateRight(e),this.rotateLeft(e);else if(this.isLeftChild(e.getParent())&&this.isLeftChild(e))this.rotateRight(e.getParent()),this.rotateRight(e);else if(this.isRightChild(e.getParent())&&this.isRightChild(e))this.rotateLeft(e.getParent()),this.rotateLeft(e);else{this.isLeftChild(e)?this.rotateRight(e):this.isRightChild(e)&&this.rotateLeft(e),this.updateWeight(e);return}}delete(e){this.splayNode(e);const t=new Ao(e.getLeft());t.root&&t.root.setParent();const r=new Ao(e.getRight());if(r.root&&r.root.setParent(),t.root){const i=t.getRightmost();t.splayNode(i),t.root.setRight(r.root),r.root&&r.root.setParent(t.root),this.root=t.root}else this.root=r.root;e.unlink(),this.root&&this.updateWeight(this.root)}deleteRange(e,t){if(!t){this.splayNode(e),this.cutOffRight(e);return}this.splayNode(e),this.splayNode(t),t.getLeft()!=e&&this.rotateRight(e),this.cutOffRight(e)}cutOffRight(e){const t=[];this.traversePostorder(e.getRight(),t);for(const r of t)r.initWeight();this.updateTreeWeight(e)}toTestString(){const e=[];return this.traverseInorder(this.root,e),e.map(t=>`[${t.getWeight()},${t.getLength()}]${t.getValue()||""}`).join("")}checkWeight(){const e=[];this.traverseInorder(this.root,e);for(const t of e)if(t.getWeight()!=t.getLength()+t.getLeftWeight()+t.getRightWeight())return!1;return!0}getRightmost(){let e=this.root;for(;e.hasRight();)e=e.getRight();return e}traverseInorder(e,t){e&&(this.traverseInorder(e.getLeft(),t),t.push(e),this.traverseInorder(e.getRight(),t))}traversePostorder(e,t){e&&(this.traversePostorder(e.getLeft(),t),this.traversePostorder(e.getRight(),t),t.push(e))}rotateLeft(e){const t=e.getParent();t.hasParent()?t===t.getParent().getLeft()?t.getParent().setLeft(e):t.getParent().setRight(e):this.root=e,e.setParent(t.getParent()),t.setRight(e.getLeft()),t.hasRight()&&t.getRight().setParent(t),e.setLeft(t),e.getLeft().setParent(e),this.updateWeight(t),this.updateWeight(e)}rotateRight(e){const t=e.getParent();t.hasParent()?t===t.getParent().getLeft()?t.getParent().setLeft(e):t.getParent().setRight(e):this.root=e,e.setParent(t.getParent()),t.setLeft(e.getRight()),t.hasLeft()&&t.getLeft().setParent(t),e.setRight(t),e.getRight().setParent(e),this.updateWeight(t),this.updateWeight(e)}isLeftChild(e){return e&&e.hasParent()?e.getParent().getLeft()===e:!1}isRightChild(e){return e&&e.hasParent()?e.getParent().getRight()===e:!1}}/**
 * @license
 * Copyright 2009 The Closure Library Authors
 * Copyright 2020 Daniel Wirtz / The long.js Authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * SPDX-License-Identifier: Apache-2.0
 */var wt=null;try{wt=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function q(n,e,t){this.low=n|0,this.high=e|0,this.unsigned=!!t}q.prototype.__isLong__;Object.defineProperty(q.prototype,"__isLong__",{value:!0});function Be(n){return(n&&n.__isLong__)===!0}function ng(n){var e=Math.clz32(n&-n);return n?31-e:e}q.isLong=Be;var rg={},ig={};function Di(n,e){var t,r,i;return e?(n>>>=0,(i=0<=n&&n<256)&&(r=ig[n],r)?r:(t=H(n,0,!0),i&&(ig[n]=t),t)):(n|=0,(i=-128<=n&&n<128)&&(r=rg[n],r)?r:(t=H(n,n<0?-1:0,!1),i&&(rg[n]=t),t))}q.fromInt=Di;function St(n,e){if(isNaN(n))return e?mr:Lt;if(e){if(n<0)return mr;if(n>=iy)return ay}else{if(n<=-9223372036854776e3)return qe;if(n+1>=JS)return oy}return n<0?St(-n,e).neg():H(n%ps|0,n/ps|0,e)}q.fromNumber=St;function H(n,e,t){return new q(n,e,t)}q.fromBits=H;var yl=Math.pow;function Qf(n,e,t){if(n.length===0)throw Error("empty string");if(typeof e=="number"?(t=e,e=!1):e=!!e,n==="NaN"||n==="Infinity"||n==="+Infinity"||n==="-Infinity")return e?mr:Lt;if(t=t||10,t<2||36<t)throw RangeError("radix");var r;if((r=n.indexOf("-"))>0)throw Error("interior hyphen");if(r===0)return Qf(n.substring(1),e,t).neg();for(var i=St(yl(t,8)),s=Lt,o=0;o<n.length;o+=8){var a=Math.min(8,n.length-o),u=parseInt(n.substring(o,o+a),t);if(a<8){var c=St(yl(t,a));s=s.mul(c).add(St(u))}else s=s.mul(i),s=s.add(St(u))}return s.unsigned=e,s}q.fromString=Qf;function Ct(n,e){return typeof n=="number"?St(n,e):typeof n=="string"?Qf(n,e):H(n.low,n.high,typeof e=="boolean"?e:n.unsigned)}q.fromValue=Ct;var sg=65536,FS=1<<24,ps=sg*sg,iy=ps*ps,JS=iy/2,og=Di(FS),Lt=Di(0);q.ZERO=Lt;var mr=Di(0,!0);q.UZERO=mr;var _i=Di(1);q.ONE=_i;var sy=Di(1,!0);q.UONE=sy;var Wc=Di(-1);q.NEG_ONE=Wc;var oy=H(-1,2147483647,!1);q.MAX_VALUE=oy;var ay=H(-1,-1,!0);q.MAX_UNSIGNED_VALUE=ay;var qe=H(0,-2147483648,!1);q.MIN_VALUE=qe;var x=q.prototype;x.toInt=function(){return this.unsigned?this.low>>>0:this.low};x.toNumber=function(){return this.unsigned?(this.high>>>0)*ps+(this.low>>>0):this.high*ps+(this.low>>>0)};x.toString=function(e){if(e=e||10,e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(qe)){var t=St(e),r=this.div(t),i=r.mul(t).sub(this);return r.toString(e)+i.toInt().toString(e)}else return"-"+this.neg().toString(e);for(var s=St(yl(e,6),this.unsigned),o=this,a="";;){var u=o.div(s),c=o.sub(u.mul(s)).toInt()>>>0,d=c.toString(e);if(o=u,o.isZero())return d+a;for(;d.length<6;)d="0"+d;a=""+d+a}};x.getHighBits=function(){return this.high};x.getHighBitsUnsigned=function(){return this.high>>>0};x.getLowBits=function(){return this.low};x.getLowBitsUnsigned=function(){return this.low>>>0};x.getNumBitsAbs=function(){if(this.isNegative())return this.eq(qe)?64:this.neg().getNumBitsAbs();for(var e=this.high!=0?this.high:this.low,t=31;t>0&&!(e&1<<t);t--);return this.high!=0?t+33:t+1};x.isSafeInteger=function(){var e=this.high>>21;return e?this.unsigned?!1:e===-1&&!(this.low===0&&this.high===-2097152):!0};x.isZero=function(){return this.high===0&&this.low===0};x.eqz=x.isZero;x.isNegative=function(){return!this.unsigned&&this.high<0};x.isPositive=function(){return this.unsigned||this.high>=0};x.isOdd=function(){return(this.low&1)===1};x.isEven=function(){return(this.low&1)===0};x.equals=function(e){return Be(e)||(e=Ct(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low};x.eq=x.equals;x.notEquals=function(e){return!this.eq(e)};x.neq=x.notEquals;x.ne=x.notEquals;x.lessThan=function(e){return this.comp(e)<0};x.lt=x.lessThan;x.lessThanOrEqual=function(e){return this.comp(e)<=0};x.lte=x.lessThanOrEqual;x.le=x.lessThanOrEqual;x.greaterThan=function(e){return this.comp(e)>0};x.gt=x.greaterThan;x.greaterThanOrEqual=function(e){return this.comp(e)>=0};x.gte=x.greaterThanOrEqual;x.ge=x.greaterThanOrEqual;x.compare=function(e){if(Be(e)||(e=Ct(e)),this.eq(e))return 0;var t=this.isNegative(),r=e.isNegative();return t&&!r?-1:!t&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1};x.comp=x.compare;x.negate=function(){return!this.unsigned&&this.eq(qe)?qe:this.not().add(_i)};x.neg=x.negate;x.add=function(e){Be(e)||(e=Ct(e));var t=this.high>>>16,r=this.high&65535,i=this.low>>>16,s=this.low&65535,o=e.high>>>16,a=e.high&65535,u=e.low>>>16,c=e.low&65535,d=0,h=0,m=0,y=0;return y+=s+c,m+=y>>>16,y&=65535,m+=i+u,h+=m>>>16,m&=65535,h+=r+a,d+=h>>>16,h&=65535,d+=t+o,d&=65535,H(m<<16|y,d<<16|h,this.unsigned)};x.subtract=function(e){return Be(e)||(e=Ct(e)),this.add(e.neg())};x.sub=x.subtract;x.multiply=function(e){if(this.isZero())return this;if(Be(e)||(e=Ct(e)),wt){var t=wt.mul(this.low,this.high,e.low,e.high);return H(t,wt.get_high(),this.unsigned)}if(e.isZero())return this.unsigned?mr:Lt;if(this.eq(qe))return e.isOdd()?qe:Lt;if(e.eq(qe))return this.isOdd()?qe:Lt;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(og)&&e.lt(og))return St(this.toNumber()*e.toNumber(),this.unsigned);var r=this.high>>>16,i=this.high&65535,s=this.low>>>16,o=this.low&65535,a=e.high>>>16,u=e.high&65535,c=e.low>>>16,d=e.low&65535,h=0,m=0,y=0,w=0;return w+=o*d,y+=w>>>16,w&=65535,y+=s*d,m+=y>>>16,y&=65535,y+=o*c,m+=y>>>16,y&=65535,m+=i*d,h+=m>>>16,m&=65535,m+=s*c,h+=m>>>16,m&=65535,m+=o*u,h+=m>>>16,m&=65535,h+=r*d+i*c+s*u+o*a,h&=65535,H(y<<16|w,h<<16|m,this.unsigned)};x.mul=x.multiply;x.divide=function(e){if(Be(e)||(e=Ct(e)),e.isZero())throw Error("division by zero");if(wt){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;var t=(this.unsigned?wt.div_u:wt.div_s)(this.low,this.high,e.low,e.high);return H(t,wt.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?mr:Lt;var r,i,s;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return mr;if(e.gt(this.shru(1)))return sy;s=mr}else{if(this.eq(qe)){if(e.eq(_i)||e.eq(Wc))return qe;if(e.eq(qe))return _i;var o=this.shr(1);return r=o.div(e).shl(1),r.eq(Lt)?e.isNegative()?_i:Wc:(i=this.sub(e.mul(r)),s=r.add(i.div(e)),s)}else if(e.eq(qe))return this.unsigned?mr:Lt;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();s=Lt}for(i=this;i.gte(e);){r=Math.max(1,Math.floor(i.toNumber()/e.toNumber()));for(var a=Math.ceil(Math.log(r)/Math.LN2),u=a<=48?1:yl(2,a-48),c=St(r),d=c.mul(e);d.isNegative()||d.gt(i);)r-=u,c=St(r,this.unsigned),d=c.mul(e);c.isZero()&&(c=_i),s=s.add(c),i=i.sub(d)}return s};x.div=x.divide;x.modulo=function(e){if(Be(e)||(e=Ct(e)),wt){var t=(this.unsigned?wt.rem_u:wt.rem_s)(this.low,this.high,e.low,e.high);return H(t,wt.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))};x.mod=x.modulo;x.rem=x.modulo;x.not=function(){return H(~this.low,~this.high,this.unsigned)};x.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32};x.clz=x.countLeadingZeros;x.countTrailingZeros=function(){return this.low?ng(this.low):ng(this.high)+32};x.ctz=x.countTrailingZeros;x.and=function(e){return Be(e)||(e=Ct(e)),H(this.low&e.low,this.high&e.high,this.unsigned)};x.or=function(e){return Be(e)||(e=Ct(e)),H(this.low|e.low,this.high|e.high,this.unsigned)};x.xor=function(e){return Be(e)||(e=Ct(e)),H(this.low^e.low,this.high^e.high,this.unsigned)};x.shiftLeft=function(e){return Be(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?H(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):H(0,this.low<<e-32,this.unsigned)};x.shl=x.shiftLeft;x.shiftRight=function(e){return Be(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?H(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):H(this.high>>e-32,this.high>=0?0:-1,this.unsigned)};x.shr=x.shiftRight;x.shiftRightUnsigned=function(e){return Be(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?H(this.low>>>e|this.high<<32-e,this.high>>>e,this.unsigned):e===32?H(this.high,0,this.unsigned):H(this.high>>>e-32,0,this.unsigned)};x.shru=x.shiftRightUnsigned;x.shr_u=x.shiftRightUnsigned;x.rotateLeft=function(e){var t;return Be(e)&&(e=e.toInt()),(e&=63)===0?this:e===32?H(this.high,this.low,this.unsigned):e<32?(t=32-e,H(this.low<<e|this.high>>>t,this.high<<e|this.low>>>t,this.unsigned)):(e-=32,t=32-e,H(this.high<<e|this.low>>>t,this.low<<e|this.high>>>t,this.unsigned))};x.rotl=x.rotateLeft;x.rotateRight=function(e){var t;return Be(e)&&(e=e.toInt()),(e&=63)===0?this:e===32?H(this.high,this.low,this.unsigned):e<32?(t=32-e,H(this.high<<t|this.low>>>e,this.low<<t|this.high>>>e,this.unsigned)):(e-=32,t=32-e,H(this.low<<t|this.high>>>e,this.high<<t|this.low>>>e,this.unsigned))};x.rotr=x.rotateRight;x.toSigned=function(){return this.unsigned?H(this.low,this.high,!1):this};x.toUnsigned=function(){return this.unsigned?this:H(this.low,this.high,!0)};x.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()};x.toBytesLE=function(){var e=this.high,t=this.low;return[t&255,t>>>8&255,t>>>16&255,t>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]};x.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,t>>>24,t>>>16&255,t>>>8&255,t&255]};q.fromBytes=function(e,t,r){return r?q.fromBytesLE(e,t):q.fromBytesBE(e,t)};q.fromBytesLE=function(e,t){return new q(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)};q.fromBytesBE=function(e,t){return new q(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)};typeof BigInt=="function"&&(q.fromBigInt=function(e,t){var r=Number(BigInt.asIntN(32,e)),i=Number(BigInt.asIntN(32,e>>BigInt(32)));return H(r,i,t)},q.fromValue=function(e,t){return typeof e=="bigint"?fromBigInt(e,t):Ct(e,t)},x.toBigInt=function(){var e=BigInt(this.low>>>0),t=BigInt(this.unsigned?this.high>>>0:this.high);return t<<BigInt(32)|e});var ve=(n=>(n[n.Null=0]="Null",n[n.Boolean=1]="Boolean",n[n.Integer=2]="Integer",n[n.Long=3]="Long",n[n.Double=4]="Double",n[n.String=5]="String",n[n.Bytes=6]="Bytes",n[n.Date=7]="Date",n))(ve||{});class ce extends Lo{constructor(t,r){super(r);l(this,"valueType");l(this,"value");this.valueType=ce.getPrimitiveType(t),this.value=t===void 0?null:t}static of(t,r){return new ce(t,r)}static valueFromBytes(t,r){switch(t){case 0:return null;case 1:return!!r[0];case 2:return r[0]|r[1]<<8|r[2]<<16|r[3]<<24;case 4:{const i=new DataView(r.buffer);return r.forEach(function(s,o){i.setUint8(o,s)}),i.getFloat64(0,!0)}case 5:return new TextDecoder("utf-8").decode(r);case 3:return q.fromBytesLE(Array.from(r));case 6:return r;case 7:return new Date(q.fromBytesLE(Array.from(r),!0).toNumber());default:throw new k(S.ErrUnimplemented,`unimplemented type: ${t}`)}}toJSON(){return this.valueType===5?`"${nn(this.value)}"`:`${this.value}`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:this.value,type:"YORKIE_PRIMITIVE"}}deepcopy(){const t=ce.of(this.value,this.getCreatedAt());return t.setMovedAt(this.getMovedAt()),t.setRemovedAt(this.getRemovedAt()),t}getType(){return this.valueType}static getPrimitiveType(t){switch(typeof t){case"undefined":return 0;case"boolean":return 1;case"number":return this.isInteger(t)?2:4;case"string":return 5;case"object":if(t===null)return 0;if(t instanceof q)return 3;if(t instanceof Uint8Array)return 6;if(t instanceof Date)return 7}}static isSupport(t){return ce.getPrimitiveType(t)!==void 0}static isInteger(t){return t%1===0}isNumericType(){const t=this.valueType;return t===2||t===3||t===4}getValue(){return this.value}toBytes(){switch(this.valueType){case 0:return new Uint8Array;case 1:return this.value?new Uint8Array([1]):new Uint8Array([0]);case 2:{const t=this.value;return new Uint8Array([t&255,t>>8&255,t>>16&255,t>>24&255])}case 4:{const t=this.value,r=new Uint8Array(8);return new DataView(r.buffer).setFloat64(0,t,!0),r}case 5:return new TextEncoder().encode(this.value);case 3:{const r=this.value.toBytesLE();return Uint8Array.from(r)}case 6:return this.value;case 7:{const t=this.value,r=q.fromNumber(t.getTime(),!0).toBytesLE();return Uint8Array.from(r)}default:throw new k(S.ErrUnimplemented,`unimplemented type: ${this.valueType}`)}}}class vl extends ry{constructor(t){super(t);l(this,"prev");l(this,"next");this.value=t}static createAfter(t,r){const i=new vl(r),s=t.next;return t.next=i,i.prev=t,i.next=s,s&&(s.prev=i),i}remove(t){return this.value.remove(t)}getCreatedAt(){return this.value.getCreatedAt()}getPositionedAt(){return this.value.getPositionedAt()}release(){this.prev&&(this.prev.next=this.next),this.next&&(this.next.prev=this.prev),this.prev=void 0,this.next=void 0}getLength(){return this.value.isRemoved()?0:1}getPrev(){return this.prev}getNext(){return this.next}getValue(){return this.value}isRemoved(){return this.value.isRemoved()}}class Io{constructor(){l(this,"dummyHead");l(this,"last");l(this,"nodeMapByIndex");l(this,"nodeMapByCreatedAt");const e=ce.of(0,Ft);e.setRemovedAt(Ft),this.dummyHead=new vl(e),this.last=this.dummyHead,this.nodeMapByIndex=new Ao,this.nodeMapByCreatedAt=new Map,this.nodeMapByIndex.insert(this.dummyHead),this.nodeMapByCreatedAt.set(this.dummyHead.getCreatedAt().toIDString(),this.dummyHead)}static create(){return new Io}get length(){return this.nodeMapByIndex.length}findNextBeforeExecutedAt(e,t){let r=this.nodeMapByCreatedAt.get(e.toIDString());if(!r)throw new k(S.ErrInvalidArgument,`cant find the given node: ${e.toIDString()}`);for(;r.getNext()&&r.getNext().getPositionedAt().after(t);)r=r.getNext();return r}release(e){this.last===e&&(this.last=e.getPrev()),e.release(),this.nodeMapByIndex.delete(e),this.nodeMapByCreatedAt.delete(e.getValue().getCreatedAt().toIDString())}insertAfter(e,t,r=t.getCreatedAt()){const i=this.findNextBeforeExecutedAt(e,r),s=vl.createAfter(i,t);i===this.last&&(this.last=s),this.nodeMapByIndex.insertAfter(i,s),this.nodeMapByCreatedAt.set(s.getCreatedAt().toIDString(),s)}moveAfter(e,t,r){const i=this.nodeMapByCreatedAt.get(e.toIDString());if(!i)throw new k(S.ErrInvalidArgument,`cant find the given node: ${e.toIDString()}`);const s=this.nodeMapByCreatedAt.get(t.toIDString());if(!s)throw new k(S.ErrInvalidArgument,`cant find the given node: ${t.toIDString()}`);i!==s&&(!s.getValue().getMovedAt()||r.after(s.getValue().getMovedAt()))&&(this.release(s),this.insertAfter(i.getCreatedAt(),s.getValue(),r),s.getValue().setMovedAt(r))}insert(e){this.insertAfter(this.last.getCreatedAt(),e)}getByID(e){return this.nodeMapByCreatedAt.get(e.toIDString())}subPathOf(e){const t=this.nodeMapByCreatedAt.get(e.toIDString());if(t)return String(this.nodeMapByIndex.indexOf(t))}purge(e){const t=this.nodeMapByCreatedAt.get(e.getCreatedAt().toIDString());if(!t)throw new k(S.ErrInvalidArgument,`fail to find the given createdAt: ${e.getCreatedAt().toIDString()}`);this.release(t)}getByIndex(e){if(e>=this.length)return;const[t,r]=this.nodeMapByIndex.find(e);let i=t;if(e===0&&t===this.dummyHead||r>0)do i&&(i=i.getNext());while(i&&i.isRemoved());return i}getPrevCreatedAt(e){let t=this.nodeMapByCreatedAt.get(e.toIDString());do t=t.getPrev();while(this.dummyHead!==t&&t.isRemoved());return t.getValue().getCreatedAt()}delete(e,t){const r=this.nodeMapByCreatedAt.get(e.toIDString()),i=r.isRemoved();return r.remove(t)&&!i&&this.nodeMapByIndex.splayNode(r),r.getValue()}deleteByIndex(e,t){const r=this.getByIndex(e);if(r)return r.remove(t)&&this.nodeMapByIndex.splayNode(r),r.getValue()}getHead(){return this.dummyHead.getValue()}getLast(){return this.last.getValue()}getLastCreatedAt(){return this.last.getCreatedAt()}toTestString(){const e=[];for(const t of this){const r=`${t.getCreatedAt().toIDString()}:${t.getValue().toJSON()}`;t.isRemoved()?e.push(`{${r}}`):e.push(`[${r}]`)}return e.join("")}*[Symbol.iterator](){let e=this.dummyHead.getNext();for(;e;)yield e,e=e.getNext()}}class tt extends Hr{constructor(t,r){super(t);l(this,"elements");this.elements=r}static create(t,r){if(!r)return new tt(t,Io.create());const i=Io.create();for(const s of r)i.insertAfter(i.getLastCreatedAt(),s.deepcopy());return new tt(t,i)}subPathOf(t){return this.elements.subPathOf(t)}purge(t){this.elements.purge(t)}insertAfter(t,r){this.elements.insertAfter(t,r)}moveAfter(t,r,i){this.elements.moveAfter(t,r,i)}get(t){const r=this.elements.getByIndex(t);return r==null?void 0:r.getValue()}getByID(t){const r=this.elements.getByID(t);return r==null?void 0:r.getValue()}getHead(){return this.elements.getHead()}getLast(){return this.elements.getLast()}getPrevCreatedAt(t){return this.elements.getPrevCreatedAt(t)}delete(t,r){return this.elements.delete(t,r)}deleteByIndex(t,r){return this.elements.deleteByIndex(t,r)}getLastCreatedAt(){return this.elements.getLastCreatedAt()}get length(){return this.elements.length}*[Symbol.iterator](){for(const t of this.elements)t.isRemoved()||(yield t.getValue())}toTestString(){return this.elements.toTestString()}getDescendants(t){for(const r of this.elements){const i=r.getValue();if(t(i,this))return;i instanceof Hr&&i.getDescendants(t)}}toJSON(){const t=[];for(const r of this)t.push(r.toJSON());return`[${t.join(",")}]`}toJS(){return JSON.parse(this.toJSON())}toJSForTest(){const t={};for(let r=0;r<this.length;r++){const{createdAt:i,value:s,type:o}=this.get(r).toJSForTest();t[r]={key:String(r),createdAt:i,value:s,type:o}}return{createdAt:this.getCreatedAt().toTestString(),value:t,type:"YORKIE_ARRAY"}}toSortedJSON(){return this.toJSON()}getElements(){return this.elements}deepcopy(){const t=tt.create(this.getCreatedAt());for(const r of this.elements)t.elements.insertAfter(t.getLastCreatedAt(),r.getValue().deepcopy());return t.remove(this.getRemovedAt()),t}}class ei extends zt{constructor(t,r,i){super(t,i);l(this,"createdAt");this.createdAt=r}static create(t,r,i){return new ei(t,r,i)}execute(t,r){var c;const i=t.findByCreatedAt(this.getParentCreatedAt());if(!i)throw new k(S.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(i instanceof Hr))throw new k(S.ErrInvalidArgument,`only object and array can execute remove: ${i}`);if(r===Q.UndoRedo){let d=i.getByID(this.createdAt);for(;d;){if(d.getRemovedAt())return;d=(c=t.findElementPairByCreatedAt(d.getCreatedAt()))==null?void 0:c.parent}}const s=i.subPathOf(this.createdAt),o=this.toReverseOperation(i),a=i.delete(this.createdAt,this.getExecutedAt());return t.registerRemovedElement(a),{opInfos:i instanceof tt?[{type:"remove",path:t.createPath(this.getParentCreatedAt()),index:Number(s)}]:[{type:"remove",path:t.createPath(this.getParentCreatedAt()),key:s}],reverseOp:o}}toReverseOperation(t){if(t instanceof He){const r=t.subPathOf(this.createdAt);if(r!==void 0){const i=t.get(r);if(i!==void 0)return Ci.create(r,i.deepcopy(),this.getParentCreatedAt())}}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.REMOVE.${this.createdAt.toTestString()}`}getCreatedAt(){return this.createdAt}}class Ci extends zt{constructor(t,r,i,s){super(i,s);l(this,"key");l(this,"value");this.key=t,this.value=r}static create(t,r,i,s){return new Ci(t,r,i,s)}execute(t,r){var c;const i=t.findByCreatedAt(this.getParentCreatedAt());if(!i)throw new k(S.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(i instanceof He))throw new k(S.ErrInvalidArgument,"fail to execute, only object can execute set");if(r===Q.UndoRedo){let d=i;for(;d;){if(d.getRemovedAt())return;d=(c=t.findElementPairByCreatedAt(d.getCreatedAt()))==null?void 0:c.parent}}const s=i.get(this.key),o=this.toReverseOperation(s),a=this.value.deepcopy(),u=i.set(this.key,a,this.getExecutedAt());return r===Q.UndoRedo&&t.findByCreatedAt(a.getCreatedAt())&&t.deregisterElement(a),t.registerElement(a,i),u&&t.registerRemovedElement(u),{opInfos:[{type:"set",path:t.createPath(this.getParentCreatedAt()),key:this.key}],reverseOp:o}}toReverseOperation(t){let r=ei.create(this.getParentCreatedAt(),this.value.getCreatedAt());return t!==void 0&&!t.isRemoved()&&(r=Ci.create(this.key,t.deepcopy(),this.getParentCreatedAt())),r}getEffectedCreatedAt(){return this.value.getCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.SET.${this.key}=${this.value.toSortedJSON()}`}getKey(){return this.key}getValue(){return this.value}}class Bo extends zt{constructor(t,r,i,s){super(t,s);l(this,"prevCreatedAt");l(this,"value");this.prevCreatedAt=r,this.value=i}static create(t,r,i,s){return new Bo(t,r,i,s)}execute(t){const r=t.findByCreatedAt(this.getParentCreatedAt());if(!r)throw new k(S.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(r instanceof tt))throw new k(S.ErrInvalidArgument,"fail to execute, only array can execute add");const i=r,s=this.value.deepcopy();return i.insertAfter(this.prevCreatedAt,s),t.registerElement(s,i),{opInfos:[{type:"add",path:t.createPath(this.getParentCreatedAt()),index:Number(i.subPathOf(this.getEffectedCreatedAt()))}]}}getEffectedCreatedAt(){return this.value.getCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.ADD.${this.value.toJSON()}`}getPrevCreatedAt(){return this.prevCreatedAt}getValue(){return this.value}}class Jr extends zt{constructor(t,r,i,s){super(t,s);l(this,"prevCreatedAt");l(this,"createdAt");this.prevCreatedAt=r,this.createdAt=i}static create(t,r,i,s){return new Jr(t,r,i,s)}execute(t){const r=t.findByCreatedAt(this.getParentCreatedAt());if(!r)throw new k(S.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(r instanceof tt))throw new k(S.ErrInvalidArgument,"fail to execute, only array can execute move");const i=r,s=Number(i.subPathOf(this.createdAt));i.moveAfter(this.prevCreatedAt,this.createdAt,this.getExecutedAt());const o=Number(i.subPathOf(this.createdAt));return{opInfos:[{type:"move",path:t.createPath(this.getParentCreatedAt()),index:o,previousIndex:s}]}}getEffectedCreatedAt(){return this.createdAt}toTestString(){return`${this.getParentCreatedAt().toTestString()}.MOVE`}getPrevCreatedAt(){return this.prevCreatedAt}getCreatedAt(){return this.createdAt}}class mi{constructor(e,t,r,i){l(this,"key");l(this,"value");l(this,"updatedAt");l(this,"_isRemoved");this.key=e,this.value=t,this.updatedAt=r,this._isRemoved=i}static of(e,t,r,i){return new mi(e,t,r,i)}getKey(){return this.key}getValue(){return this.value}getUpdatedAt(){return this.updatedAt}isRemoved(){return this._isRemoved}toIDString(){return`${this.updatedAt.toIDString()}:${this.key}`}getRemovedAt(){if(this._isRemoved)return this.updatedAt}}class Ir{constructor(){l(this,"nodeMapByKey");l(this,"numberOfRemovedElement");this.nodeMapByKey=new Map,this.numberOfRemovedElement=0}static create(){return new Ir}getNodeMapByKey(){return this.nodeMapByKey}set(e,t,r){const i=this.nodeMapByKey.get(e);if(i&&i.isRemoved()&&r.after(i.getUpdatedAt())&&(this.numberOfRemovedElement-=1),i===void 0||r.after(i.getUpdatedAt())){const s=mi.of(e,t,r,!1);return this.nodeMapByKey.set(e,s),i!==void 0&&i.isRemoved()?[i,s]:[void 0,s]}return i.isRemoved()?[i,void 0]:[void 0,void 0]}setInternal(e,t,r,i){const s=mi.of(e,t,r,i);this.nodeMapByKey.set(e,s),i&&this.numberOfRemovedElement++}remove(e,t){const r=this.nodeMapByKey.get(e),i=[];if(r===void 0||t.after(r.getUpdatedAt())){if(r===void 0){this.numberOfRemovedElement+=1;const a=mi.of(e,"",t,!0);return this.nodeMapByKey.set(e,a),i.push(a),i}const s=r.isRemoved();s||(this.numberOfRemovedElement+=1),s&&i.push(r);const o=mi.of(e,r.getValue(),t,!0);return this.nodeMapByKey.set(e,o),i.push(o),i}return i}has(e){if(this.nodeMapByKey.has(e)){const t=this.nodeMapByKey.get(e);return t!==void 0&&!t.isRemoved()}return!1}get(e){if(this.nodeMapByKey.has(e))return this.nodeMapByKey.get(e).getValue()}deepcopy(){const e=new Ir;for(const[,t]of this.nodeMapByKey)e.setInternal(t.getKey(),t.getValue(),t.getUpdatedAt(),t.isRemoved());return e}toJSON(){if(!this.size())return"{}";const e=[];for(const[t,r]of this.nodeMapByKey)r.isRemoved()||e.push(`"${nn(t)}":"${nn(r.getValue())}"`);return`{${e.join(",")}}`}size(){return this.nodeMapByKey.size-this.numberOfRemovedElement}toObject(){const e={};for(const[t,r]of this.nodeMapByKey)r.isRemoved()||(e[t]=r.getValue());return e}*[Symbol.iterator](){for(const[,e]of this.nodeMapByKey)yield e}purge(e){const t=this.nodeMapByKey.get(e.getKey());t==null||t.toIDString()!=e.toIDString()||(this.nodeMapByKey.delete(e.getKey()),this.numberOfRemovedElement--)}}class Eo{constructor(e){l(this,"attributes");l(this,"content");this.attributes=Ir.create(),this.content=e}static create(e){return new Eo(e)}get length(){return this.content.length}substring(e,t){const r=new Eo(this.content.substring(e,t));return r.attributes=this.attributes.deepcopy(),r}setAttr(e,t,r){return this.attributes.set(e,t,r)}getAttrs(){return this.attributes}toString(){return this.content}toJSON(){const e=nn(this.content),t=this.attributes.toObject(),r=[];for(const[i,s]of Object.entries(t)){const o=JSON.parse(s),a=typeof o=="string"?`"${nn(i)}":"${nn(o)}"`:`"${nn(i)}":${String(o)}`;r.push(a)}return r.sort(),r.length===0?`{"val":"${e}"}`:`{"attrs":{${r.join(",")}},"val":"${e}"}`}getAttributes(){return this.attributes.toObject()}getContent(){return this.content}purge(e){this.attributes&&e instanceof mi&&this.attributes.purge(e)}getGCPairs(){const e=[];for(const t of this.attributes)t.getRemovedAt()&&e.push({parent:this,child:t});return e}}class Et extends Lo{constructor(t,r){super(r);l(this,"rgaTreeSplit");this.rgaTreeSplit=t}static create(t,r){return new Et(t,r)}edit(t,r,i,s,o,a){const u=r?Eo.create(r):void 0;if(u&&s)for(const[w,T]of Object.entries(s))u.setAttr(w,T,i);const[c,d,h,m]=this.rgaTreeSplit.edit(t,i,u,o,a),y=m.map(w=>({...w,value:w.value?{attributes:ts(w.value.getAttributes()),content:w.value.getContent()}:{attributes:void 0,content:""},type:"content"}));return[d,y,h,[c,c]]}setStyle(t,r,i,s,o){const[,a]=this.rgaTreeSplit.findNodeWithSplit(t[1],i),[,u]=this.rgaTreeSplit.findNodeWithSplit(t[0],i),c=[],d=this.rgaTreeSplit.findBetween(u,a),h=new Map,m=[];for(const w of d){const T=w.getCreatedAt().getActorID();let P,p=0n;if(o===void 0&&s===void 0?p=Qs:o.size()>0?p=o.get(T)?o.get(T):0n:P=s.has(T)?s.get(T):Ft,w.canStyle(i,P,p)){const g=h.get(T),v=w.getCreatedAt();(!g||v.after(g))&&h.set(T,v),m.push(w)}}const y=[];for(const w of m){if(w.isRemoved())continue;const[T,P]=this.rgaTreeSplit.findIndexesFromRange(w.createPosRange());c.push({type:"style",actor:i.getActorID(),from:T,to:P,value:{attributes:ts(r)}});for(const[p,g]of Object.entries(r)){const[v]=w.getValue().setAttr(p,g,i);v!==void 0&&y.push({parent:w.getValue(),child:v})}}return[h,y,c]}indexRangeToPosRange(t,r){const i=this.rgaTreeSplit.indexToPos(t);return t===r?[i,i]:[i,this.rgaTreeSplit.indexToPos(r)]}get length(){return this.rgaTreeSplit.length}getTreeByIndex(){return this.rgaTreeSplit.getTreeByIndex()}getTreeByID(){return this.rgaTreeSplit.getTreeByID()}toJSON(){const t=[];for(const r of this.rgaTreeSplit)r.isRemoved()||t.push(r.getValue().toJSON());return`[${t.join(",")}]`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:JSON.parse(this.toJSON()),type:"YORKIE_TEXT"}}toString(){return this.rgaTreeSplit.toString()}values(){const t=[];for(const r of this.rgaTreeSplit)if(!r.isRemoved()){const i=r.getValue();t.push({attributes:ts(i.getAttributes()),content:i.getContent()})}return t}getRGATreeSplit(){return this.rgaTreeSplit}toTestString(){return this.rgaTreeSplit.toTestString()}deepcopy(){const t=new Et(this.rgaTreeSplit.deepcopy(),this.getCreatedAt());return t.remove(this.getRemovedAt()),t}findIndexesFromRange(t){return this.rgaTreeSplit.findIndexesFromRange(t)}getGCPairs(){const t=[];for(const r of this.rgaTreeSplit){r.getRemovedAt()&&t.push({parent:this.rgaTreeSplit,child:r});for(const i of r.getValue().getGCPairs())t.push(i)}return t}}class bo extends zt{constructor(t,r,i,s,o,a,u){super(t,u);l(this,"fromPos");l(this,"toPos");l(this,"maxCreatedAtMapByActor");l(this,"content");l(this,"attributes");this.fromPos=r,this.toPos=i,this.maxCreatedAtMapByActor=s,this.content=o,this.attributes=a}static create(t,r,i,s,o,a,u){return new bo(t,r,i,s,o,a,u)}execute(t,r,i){const s=t.findByCreatedAt(this.getParentCreatedAt());if(!s)throw new k(S.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(s instanceof Et))throw new k(S.ErrInvalidArgument,"fail to execute, only Text can execute edit");const o=s,[,a,u]=o.edit([this.fromPos,this.toPos],this.content,this.getExecutedAt(),Object.fromEntries(this.attributes),this.maxCreatedAtMapByActor,i);for(const c of u)t.registerGCPair(c);return{opInfos:a.map(({from:c,to:d,value:h})=>({type:"edit",from:c,to:d,value:h,path:t.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const t=this.getParentCreatedAt().toTestString(),r=this.fromPos.toTestString(),i=this.toPos.toTestString(),s=this.content;return`${t}.EDIT(${r},${i},${s})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getContent(){return this.content}getAttributes(){return this.attributes||new Map}getMaxCreatedAtMapByActor(){return this.maxCreatedAtMapByActor}}class Mo extends zt{constructor(t,r,i,s,o,a){super(t,a);l(this,"fromPos");l(this,"toPos");l(this,"maxCreatedAtMapByActor");l(this,"attributes");this.fromPos=r,this.toPos=i,this.maxCreatedAtMapByActor=s,this.attributes=o}static create(t,r,i,s,o,a){return new Mo(t,r,i,s,o,a)}execute(t,r,i){const s=t.findByCreatedAt(this.getParentCreatedAt());if(!s)throw new k(S.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(s instanceof Et))throw new k(S.ErrInvalidArgument,"fail to execute, only Text can execute edit");const o=s,[,a,u]=o.setStyle([this.fromPos,this.toPos],this.attributes?Object.fromEntries(this.attributes):{},this.getExecutedAt(),this.maxCreatedAtMapByActor,i);for(const c of a)t.registerGCPair(c);return{opInfos:u.map(({from:c,to:d,value:h})=>({type:"style",from:c,to:d,value:h,path:t.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const t=this.getParentCreatedAt().toTestString(),r=this.fromPos.toTestString(),i=this.toPos.toTestString(),s=this.attributes;return`${t}.STYL(${r},${i},${JSON.stringify(s)})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getAttributes(){return this.attributes}getMaxCreatedAtMapByActor(){return this.maxCreatedAtMapByActor}}const $S=2,zS="root",yr="text";function Ls(n,e){let t=0;const r=n.children;for(let i=0;i<e;i++){const s=r[i];!s||s.isRemoved||(t+=s.paddedSize)}return t}class US{constructor(e,t=[]){l(this,"type");l(this,"parent");l(this,"_children");l(this,"size");if(this.type=e,this.size=0,this._children=t,this.isText&&this._children.length>0)throw new k(S.ErrRefused,"Text node cannot have children")}updateAncestorsSize(){let e=this.parent;const t=this.isRemoved?-1:1;for(;e&&(e.size+=this.paddedSize*t,!e.isRemoved);)e=e.parent}updateDescendantsSize(){let e=0;for(const t of this._children){const r=t.updateDescendantsSize();t.isRemoved||(e+=r)}return this.size+=e,this.paddedSize}get isText(){return this.type===yr}get paddedSize(){return this.size+(this.isText?0:$S)}isAncestorOf(e){return jS(this,e)}get nextSibling(){const e=this.parent.findOffset(this),t=this.parent.children[e+1];if(t)return t}get prevSibling(){const e=this.parent.findOffset(this),t=this.parent.children[e-1];if(t)return t}splitText(e,t){if(e===0||e===this.size)return;const r=this.value.slice(0,e),i=this.value.slice(e);if(!i.length)return;this.value=r;const s=this.cloneText(e+t);return s.value=i,this.parent.insertAfterInternal(s,this),s}get children(){return this._children.filter(e=>!e.isRemoved)}get allChildren(){return[...this._children]}hasTextChild(){return this.children.length>0&&this.children.every(e=>e.isText)}append(...e){if(this.isText)throw new k(S.ErrRefused,"Text node cannot have children");this._children.push(...e);for(const t of e)t.parent=this,t.updateAncestorsSize()}prepend(...e){if(this.isText)throw new k(S.ErrRefused,"Text node cannot have children");this._children.unshift(...e);for(const t of e)t.parent=this}insertBefore(e,t){if(this.isText)throw new k(S.ErrRefused,"Text node cannot have children");const r=this._children.indexOf(t);if(r===-1)throw new k(S.ErrInvalidArgument,"child not found");this.insertAtInternal(e,r),e.updateAncestorsSize()}insertAfter(e,t){if(this.isText)throw new k(S.ErrRefused,"Text node cannot have children");const r=this._children.indexOf(t);if(r===-1)throw new k(S.ErrInvalidArgument,"child not found");this.insertAtInternal(e,r+1),e.updateAncestorsSize()}insertAt(e,t){if(this.isText)throw new k(S.ErrRefused,"Text node cannot have children");this.insertAtInternal(e,t),e.updateAncestorsSize()}removeChild(e){if(this.isText)throw new k(S.ErrRefused,"Text node cannot have children");const t=this._children.indexOf(e);if(t===-1)throw new k(S.ErrInvalidArgument,"child not found");this._children.splice(t,1),e.parent=void 0}splitElement(e,t){const r=this.cloneElement(t);this.parent.insertAfterInternal(r,this),r.updateAncestorsSize();const i=this.children.slice(0,e),s=this.children.slice(e);this._children=i,r._children=s,this.size=this._children.reduce((o,a)=>o+a.paddedSize,0),r.size=r._children.reduce((o,a)=>o+a.paddedSize,0);for(const o of r._children)o.parent=r;return r}insertAfterInternal(e,t){if(this.isText)throw new k(S.ErrRefused,"Text node cannot have children");const r=this._children.indexOf(t);if(r===-1)throw new k(S.ErrInvalidArgument,"child not found");this.insertAtInternal(e,r+1)}insertAtInternal(e,t){if(this.isText)throw new k(S.ErrRefused,"Text node cannot have children");this._children.splice(t,0,e),e.parent=this}findOffset(e){if(this.isText)throw new k(S.ErrRefused,"Text node cannot have children");if(e.isRemoved){const t=this._children.indexOf(e);return this.allChildren.splice(0,t).filter(i=>!i.isRemoved).length}return this.children.indexOf(e)}findBranchOffset(e){if(this.isText)throw new k(S.ErrRefused,"Text node cannot have children");let t=e;for(;t;){const r=this._children.indexOf(t);if(r!==-1)return r;t=t.parent}return-1}}function jS(n,e){if(n===e)return!1;for(;e.parent;){if(e.parent===n)return!0;e=e.parent}return!1}var me=(n=>(n.Start="Start",n.End="End",n.Text="Text",n))(me||{});function ly(n,e,t,r){if(e>t)throw new k(S.ErrInvalidArgument,`from is greater than to: ${e} > ${t}`);if(e>n.size)throw new k(S.ErrInvalidArgument,`from is out of range: ${e} > ${n.size}`);if(t>n.size)throw new k(S.ErrInvalidArgument,`to is out of range: ${t} > ${n.size}`);if(e===t)return;let i=0;for(const s of n.children){if(e-s.paddedSize<i&&i<t){const o=s.isText?e-i:e-i-1,a=s.isText?t-i:t-i-1,u=!s.isText&&o<0,c=!s.isText&&a>s.size;(s.isText||u)&&r([s,s.isText?"Text":"Start"],c),ly(s,Math.max(0,o),Math.min(a,s.size),r),c&&r([s,"End"],c)}i+=s.paddedSize}}function uy(n,e,t=0){for(const r of n.children)uy(r,e,t+1);e(n,t)}function Ul(n,e,t=0){for(const r of n._children)Ul(r,e,t+1);e(n,t)}function _c(n,e,t=!0){if(e>n.size)throw new k(S.ErrInvalidArgument,`index is out of range: ${e} > ${n.size}`);if(n.isText)return{node:n,offset:e};let r=0,i=0;for(const s of n.children){if(t&&s.isText&&s.size>=e-i)return _c(s,e-i,t);if(e===i)return{node:n,offset:r};if(!t&&s.paddedSize===e-i)return{node:n,offset:r+1};if(s.paddedSize>e-i)return _c(s,e-i-1,t);i+=s.paddedSize,r+=1}return{node:n,offset:r}}function cy(n){return n.isText||n.children.length===0?n:cy(n.children[0])}function VS(n,e){if(n.size<e)throw new k(S.ErrInvalidArgument,"unacceptable path");for(let t=0;t<n.children.length;t++){const r=n.children[t];if(r.size<e)e-=r.size;else{n=r;break}}return{node:n,offset:e}}class qS{constructor(e){l(this,"root");this.root=e}tokensBetween(e,t,r){ly(this.root,e,t,r)}traverse(e){uy(this.root,e,0)}traverseAll(e){Ul(this.root,e,0)}findTreePos(e,t=!0){return _c(this.root,e,t)}treePosToPath(e){const t=[];let r=e.node;if(r.isText){const i=r.parent.findOffset(r);if(i===-1)throw new k(S.ErrInvalidArgument,"invalid treePos");const s=Ls(r.parent,i);t.push(s+e.offset),r=r.parent}else if(r.hasTextChild()){const i=Ls(r,e.offset);t.push(i)}else t.push(e.offset);for(;r.parent;){const i=r.parent.findOffset(r);if(i===-1)throw new k(S.ErrInvalidArgument,"invalid treePos");t.push(i),r=r.parent}return t.reverse()}pathToIndex(e){const t=this.pathToTreePos(e);return this.indexOf(t)}pathToTreePos(e){if(!e.length)throw new k(S.ErrInvalidArgument,"unacceptable path");let t=this.root;for(let r=0;r<e.length-1;r++){const i=e[r];if(t=t.children[i],!t)throw new k(S.ErrInvalidArgument,"unacceptable path")}if(t.hasTextChild())return VS(t,e[e.length-1]);if(t.children.length<e[e.length-1])throw new k(S.ErrInvalidArgument,"unacceptable path");return{node:t,offset:e[e.length-1]}}getRoot(){return this.root}get size(){return this.root.size}findPostorderRight(e){const{node:t,offset:r}=e;if(t.isText){if(t.size===r){const i=t.nextSibling;return i||t.parent}return t}return t.children.length===r?t:cy(t.children[r])}indexOf(e){let{node:t}=e;const{offset:r}=e;let i=0,s=1;if(t.isText){i+=r;const o=t.parent,a=o.findOffset(t);if(a===-1)throw new k(S.ErrInvalidArgument,"invalid pos");i+=Ls(o,a),t=t.parent}else i+=Ls(t,r);for(;t!=null&&t.parent;){const o=t.parent,a=o.findOffset(t);if(a===-1)throw new k(S.ErrInvalidArgument,"invalid pos");i+=Ls(o,a),s++,t=t.parent}return i+s-1}indexToPath(e){const t=this.findTreePos(e);return this.treePosToPath(t)}}const KS=(n,e)=>n===e?0:n<e?-1:1;class WS{constructor(e,t,r){l(this,"key");l(this,"value");l(this,"parent");l(this,"left");l(this,"right");l(this,"isRed");this.key=e,this.value=t,this.isRed=r}}class _S{constructor(e){l(this,"stack");this.stack=[],this.traverseInorder(e)}traverseInorder(e){e&&(this.traverseInorder(e.left),this.stack.push({key:e.key,value:e.value}),this.traverseInorder(e.right))}}class fy{constructor(e){l(this,"root");l(this,"comparator");l(this,"counter");this.comparator=typeof e<"u"?e:KS,this.counter=0}put(e,t){return this.root=this.putInternal(e,t,this.root),this.root.isRed=!1,t}get(e){const t=this.getInternal(e,this.root);return t?t.value:void 0}remove(e){!this.isRed(this.root.left)&&!this.isRed(this.root.right)&&(this.root.isRed=!0),this.root=this.removeInternal(this.root,e),this.root&&(this.root.isRed=!1)}getIterator(){return new _S(this.root)}values(){const e=[];for(const t of this.getIterator().stack)e.push(t.value);return e}floorEntry(e){let t=this.root;for(;t;){const r=this.comparator(e,t.key);if(r>0)if(t.right)t.right.parent=t,t=t.right;else return t;else if(r<0)if(t.left)t.left.parent=t,t=t.left;else{let i=t.parent,s=t;for(;i&&s===i.left;)s=i,i=i.parent;return i}else return t}}lastEntry(){if(!this.root)return this.root;let e=this.root;for(;e.right;)e=e.right;return e}size(){return this.counter}isEmpty(){return this.counter===0}getInternal(e,t){for(;t;){const r=this.comparator(e,t.key);if(r===0)return t;r<0?t=t.left:r>0&&(t=t.right)}}putInternal(e,t,r){if(!r)return this.counter+=1,new WS(e,t,!0);const i=this.comparator(e,r.key);return i<0?r.left=this.putInternal(e,t,r.left):i>0?r.right=this.putInternal(e,t,r.right):r.value=t,this.isRed(r.right)&&!this.isRed(r.left)&&(r=this.rotateLeft(r)),this.isRed(r.left)&&this.isRed(r.left.left)&&(r=this.rotateRight(r)),this.isRed(r.left)&&this.isRed(r.right)&&this.flipColors(r),r}removeInternal(e,t){if(this.comparator(t,e.key)<0)!this.isRed(e.left)&&!this.isRed(e.left.left)&&(e=this.moveRedLeft(e)),e.left=this.removeInternal(e.left,t);else{if(this.isRed(e.left)&&(e=this.rotateRight(e)),this.comparator(t,e.key)===0&&!e.right){this.counter-=1;return}if(!this.isRed(e.right)&&!this.isRed(e.right.left)&&(e=this.moveRedRight(e)),this.comparator(t,e.key)===0){this.counter-=1;const r=this.min(e.right);e.value=r.value,e.key=r.key,e.right=this.removeMin(e.right)}else e.right=this.removeInternal(e.right,t)}return this.fixUp(e)}min(e){return e.left?this.min(e.left):e}removeMin(e){if(e.left)return!this.isRed(e.left)&&!this.isRed(e.left.left)&&(e=this.moveRedLeft(e)),e.left=this.removeMin(e.left),this.fixUp(e)}fixUp(e){return this.isRed(e.right)&&(e=this.rotateLeft(e)),this.isRed(e.left)&&this.isRed(e.left.left)&&(e=this.rotateRight(e)),this.isRed(e.left)&&this.isRed(e.right)&&this.flipColors(e),e}moveRedLeft(e){return this.flipColors(e),this.isRed(e.right.left)&&(e.right=this.rotateRight(e.right),e=this.rotateLeft(e),this.flipColors(e)),e}moveRedRight(e){return this.flipColors(e),this.isRed(e.left.left)&&(e=this.rotateRight(e),this.flipColors(e)),e}isRed(e){return e&&e.isRed}rotateLeft(e){const t=e.right;return e.right=t.left,t.left=e,t.isRed=t.left.isRed,t.left.isRed=!0,t}rotateRight(e){const t=e.left;return e.left=t.right,t.right=e,t.isRed=t.right.isRed,t.right.isRed=!0,t}flipColors(e){e.isRed=!e.isRed,e.left.isRed=!e.left.isRed,e.right.isRed=!e.right.isRed}}class Bt{constructor(e,t){l(this,"parentID");l(this,"leftSiblingID");this.parentID=e,this.leftSiblingID=t}static of(e,t){return new Bt(e,t)}static fromTreePos(e){const{offset:t}=e;let{node:r}=e,i;return r.isText?(r.parent.children[0]===r&&t===0?i=r.parent:i=r,r=r.parent):t===0?i=r:i=r.children[t-1],Bt.of(r.id,Ce.of(i.getCreatedAt(),i.getOffset()+t))}getParentID(){return this.parentID}static fromStruct(e){return Bt.of(Ce.of(Tt.fromStruct(e.parentID.createdAt),e.parentID.offset),Ce.of(Tt.fromStruct(e.leftSiblingID.createdAt),e.leftSiblingID.offset))}toStruct(){return{parentID:{createdAt:this.getParentID().getCreatedAt().toStruct(),offset:this.getParentID().getOffset()},leftSiblingID:{createdAt:this.getLeftSiblingID().getCreatedAt().toStruct(),offset:this.getLeftSiblingID().getOffset()}}}toTreeNodePair(e){const t=this.getParentID(),r=this.getLeftSiblingID(),i=e.findFloorNode(t);let s=e.findFloorNode(r);if(!i||!s)throw new k(S.ErrRefused,`cannot find node of CRDTTreePos(${t.toTestString()}, ${r.toTestString()})`);return!r.equals(t)&&r.getOffset()>0&&r.getOffset()===s.id.getOffset()&&s.insPrevID&&(s=e.findFloorNode(s.insPrevID)),[i,s]}getLeftSiblingID(){return this.leftSiblingID}equals(e){return this.getParentID().getCreatedAt().equals(e.getParentID().getCreatedAt())&&this.getParentID().getOffset()===e.getParentID().getOffset()&&this.getLeftSiblingID().getCreatedAt().equals(e.getLeftSiblingID().getCreatedAt())&&this.getLeftSiblingID().getOffset()===e.getLeftSiblingID().getOffset()}}class Ce{constructor(e,t){l(this,"createdAt");l(this,"offset");this.createdAt=e,this.offset=t}static of(e,t){return new Ce(e,t)}static fromStruct(e){return Ce.of(Tt.fromStruct(e.createdAt),e.offset)}static createComparator(){return(e,t)=>{const r=e.getCreatedAt().compare(t.getCreatedAt());return r!==0?r:e.getOffset()>t.getOffset()?1:e.getOffset()<t.getOffset()?-1:0}}getCreatedAt(){return this.createdAt}equals(e){return this.createdAt.compare(e.createdAt)===0&&this.offset===e.offset}getOffset(){return this.offset}setOffset(e){this.offset=e}toStruct(){return{createdAt:this.createdAt.toStruct(),offset:this.offset}}toIDString(){return`${this.createdAt.toIDString()}:${this.offset}`}toTestString(){return`${this.createdAt.toTestString()}/${this.offset}`}}class Ze extends US{constructor(t,r,i,s,o){super(r);l(this,"id");l(this,"removedAt");l(this,"attrs");l(this,"insPrevID");l(this,"insNextID");l(this,"_value","");this.id=t,this.removedAt=o,s&&(this.attrs=s),typeof i=="string"?this.value=i:Array.isArray(i)&&(this._children=i)}toIDString(){return this.id.toIDString()}getRemovedAt(){return this.removedAt}static create(t,r,i,s){return new Ze(t,r,i,s)}deepcopy(){var r;const t=new Ze(this.id,this.type);return t.removedAt=this.removedAt,t._value=this._value,t.size=this.size,t.attrs=(r=this.attrs)==null?void 0:r.deepcopy(),t._children=this._children.map(i=>{const s=i.deepcopy();return s.parent=t,s}),t.insPrevID=this.insPrevID,t.insNextID=this.insNextID,t}get value(){if(!this.isText)throw new k(S.ErrInvalidType,`cannot get value of element node: ${this.type}`);return this._value}set value(t){if(!this.isText)throw new k(S.ErrInvalidType,`cannot set value of element node: ${this.type}`);this._value=t,this.size=t.length}get isRemoved(){return!!this.removedAt}remove(t){const r=!this.removedAt;(!this.removedAt||this.removedAt.compare(t)>0)&&(this.removedAt=t),r&&this.updateAncestorsSize()}cloneText(t){return new Ze(Ce.of(this.id.getCreatedAt(),t),this.type,void 0,void 0,this.removedAt)}cloneElement(t){return new Ze(Ce.of(t(),0),this.type,void 0,void 0,this.removedAt)}split(t,r,i){const s=this.isText?this.splitText(r,this.id.getOffset()):this.splitElement(r,i);if(s){if(s.insPrevID=this.id,this.insNextID){const o=t.findFloorNode(this.insNextID);o.insPrevID=s.id,s.insNextID=this.insNextID}this.insNextID=s.id,t.registerNode(s)}return s}getCreatedAt(){return this.id.getCreatedAt()}getOffset(){return this.id.getOffset()}canDelete(t,r,i){return(r?!this.getCreatedAt().after(r):this.getCreatedAt().getLamport()<=i)&&(!this.removedAt||t.after(this.removedAt))}canStyle(t,r,i){return this.isText?!1:(r?!this.getCreatedAt().after(r):this.getCreatedAt().getLamport()<=i)&&(!this.removedAt||t.after(this.removedAt))}setAttrs(t,r){this.attrs||(this.attrs=new Ir);const i=[];for(const[s,o]of Object.entries(t))i.push(this.attrs.set(s,o,r));return i}purge(t){this.attrs&&this.attrs.purge(t)}getGCPairs(){const t=[];if(!this.attrs)return t;for(const r of this.attrs)r.getRemovedAt()&&t.push({parent:this,child:r});return t}}function Hc(n){var t;if(n.isText){const r=n;return{type:r.type,value:r.value}}const e={type:n.type,children:n.children.map(Hc)};return n.attrs&&(e.attributes=ts((t=n.attrs)==null?void 0:t.toObject())),e}function Xf(n){if(n.isText)return n.value;let e="";return n.attrs&&n.attrs.size()&&(e=" "+Array.from(n.attrs).filter(t=>!t.isRemoved()).sort((t,r)=>t.getKey().localeCompare(r.getKey())).map(t=>{const r=JSON.parse(t.getValue());return typeof r=="string"?`${t.getKey()}="${r}"`:`${t.getKey()}="${nn(t.getValue())}"`}).join(" ")),`<${n.type}${e}>${n.children.map(t=>Xf(t)).join("")}</${n.type}>`}function dy(n){if(n.isText){const e=n;return{type:e.type,value:e.value,size:e.size,isRemoved:e.isRemoved}}return{type:n.type,children:n.children.map(dy),size:n.size,isRemoved:n.isRemoved}}class xt extends Lo{constructor(t,r){super(r);l(this,"indexTree");l(this,"nodeMapByID");this.indexTree=new qS(t),this.nodeMapByID=new fy(Ce.createComparator()),this.indexTree.traverseAll(i=>{this.nodeMapByID.put(i.id,i)})}static create(t,r){return new xt(t,r)}findFloorNode(t){const r=this.nodeMapByID.floorEntry(t);if(!(!r||!r.key.getCreatedAt().equals(t.getCreatedAt())))return r.value}registerNode(t){this.nodeMapByID.put(t.id,t)}findNodesAndSplitText(t,r){const[i,s]=t.toTreeNodePair(this);let o=s;const a=i===o,u=o.parent&&!a?o.parent:i;if(o.isText&&o.split(this,t.getLeftSiblingID().getOffset()-o.id.getOffset()),r){const c=u.allChildren,d=a?0:c.indexOf(o)+1;for(let h=d;h<c.length;h++){const m=c[h];if(!m.id.getCreatedAt().after(r))break;o=m}}return[u,o]}style(t,r,i,s,o){const[a,u]=this.findNodesAndSplitText(t[0],i),[c,d]=this.findNodesAndSplitText(t[1],i),h=[],m=r?ts(r):{},y=new Map,w=[];return this.traverseInPosRange(a,u,c,d,([T])=>{const P=T.getCreatedAt().getActorID();let p,g=0n;if(o===void 0&&s===void 0?g=Qs:o.size()>0?g=o.get(P)?o.get(P):0n:p=s.has(P)?s.get(P):Ft,T.canStyle(i,p,g)&&r){const v=y.get(P),I=T.getCreatedAt();(!v||I.after(v))&&y.set(P,I);const E=T.setAttrs(r,i),N=E.reduce((W,[,$])=>($&&(W[$.getKey()]=m[$.getKey()]),W),{}),D=T.parent,R=T.prevSibling||T.parent;Object.keys(N).length>0&&h.push({type:"style",from:this.toIndex(D,R),to:this.toIndex(T,T),fromPath:this.toPath(D,R),toPath:this.toPath(T,T),actor:i.getActorID(),value:N});for(const[W]of E)W&&w.push({parent:T,child:W})}}),[y,w,h]}removeStyle(t,r,i,s,o){const[a,u]=this.findNodesAndSplitText(t[0],i),[c,d]=this.findNodesAndSplitText(t[1],i),h=[],m=new Map,y=[];return this.traverseInPosRange(a,u,c,d,([w])=>{const T=w.getCreatedAt().getActorID();let P,p=0n;if(o===void 0&&s===void 0?p=Qs:o.size()>0?p=o.get(T)?o.get(T):0n:P=s.has(T)?s.get(T):Ft,w.canStyle(i,P,p)&&r){const g=m.get(T),v=w.getCreatedAt();(!g||v.after(g))&&m.set(T,v),w.attrs||(w.attrs=new Ir);for(const N of r){const D=w.attrs.remove(N,i);for(const R of D)y.push({parent:w,child:R})}const I=w.parent,E=w.prevSibling||w.parent;h.push({actor:i.getActorID(),type:"removeStyle",from:this.toIndex(I,E),to:this.toIndex(w,w),fromPath:this.toPath(I,E),toPath:this.toPath(w,w),value:r})}}),[m,y,h]}edit(t,r,i,s,o,a,u){const[c,d]=this.findNodesAndSplitText(t[0],s),[h,m]=this.findNodesAndSplitText(t[1],s),y=this.toIndex(c,d),w=this.toPath(c,d),T=[],P=[],p=[],g=new Map;this.traverseInPosRange(c,d,h,m,([E,N],D)=>{if(N===me.Start&&!D)for(const Se of E.children)p.push(Se);const R=E.getCreatedAt().getActorID();let W,$=0n;if(u===void 0&&a===void 0?$=Qs:u.size()>0?$=u.get(R)?u.get(R):0n:W=a.has(R)?a.get(R):Ft,E.canDelete(s,W,$)||T.includes(E.parent)){const Se=g.get(R),Ut=E.getCreatedAt();(!Se||Ut.after(Se))&&g.set(R,Ut),(N===me.Text||N===me.Start)&&T.push(E),P.push([E,N])}});const v=this.makeDeletionChanges(P,s),I=[];for(const E of T)E.remove(s),E.isRemoved&&I.push({parent:this,child:E});for(const E of p)E.removedAt||c.append(E);if(i>0){let E=0,N=c,D=d;for(;E<i;)N.split(this,N.findOffset(D)+1,o),D=N,N=N.parent,E++;v.push({type:"content",from:y,to:y,fromPath:w,toPath:w,actor:s.getActorID()})}if(r!=null&&r.length){const E=[];let N=d;for(const D of r)N===c?c.insertAt(D,0):c.insertAfter(D,N),N=D,Ul(D,R=>{c.isRemoved&&(R.remove(s),I.push({parent:this,child:R})),this.nodeMapByID.put(R.id,R)}),D.isRemoved||E.push(D);if(E.length){const D=E.map(R=>Hc(R));v.length&&v[v.length-1].from===y?v[v.length-1].value=D:v.push({type:"content",from:y,to:y,fromPath:w,toPath:w,actor:s.getActorID(),value:D})}}return[v,I,g]}editT(t,r,i,s,o){const a=this.findPos(t[0]),u=this.findPos(t[1]);this.edit([a,u],r,i,s,o)}move(t,r,i){throw new k(S.ErrUnimplemented,`not implemented: ${t}, ${r}, ${i}`)}purge(t){var s;(s=t.parent)==null||s.removeChild(t),this.nodeMapByID.remove(t.id);const r=t.insPrevID,i=t.insNextID;if(r){const o=this.findFloorNode(r);o.insNextID=i}if(i){const o=this.findFloorNode(i);o.insPrevID=r}t.insPrevID=void 0,t.insNextID=void 0}getGCPairs(){const t=[];return this.indexTree.traverse(r=>{r.getRemovedAt()&&t.push({parent:this,child:r});for(const i of r.getGCPairs())t.push(i)}),t}findPos(t,r=!0){const i=this.indexTree.findTreePos(t,r);return Bt.fromTreePos(i)}pathToPosRange(t){const r=this.pathToIndex(t);return[this.findPos(r),this.findPos(r+1)]}pathToPos(t){const r=this.indexTree.pathToIndex(t);return this.findPos(r)}getRoot(){return this.indexTree.getRoot()}getSize(){return this.indexTree.size}getNodeSize(){return this.nodeMapByID.size()}getIndexTree(){return this.indexTree}toXML(){return Xf(this.indexTree.getRoot())}toJSON(){return JSON.stringify(this.getRootTreeNode())}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:JSON.parse(this.toJSON()),type:"YORKIE_TREE"}}toJSInfoForTest(){const t=this.indexTree.getRoot(),r=(i,s=void 0,o=void 0,a=0)=>{var y,w,T,P;let u,c,d;const h=i.isText?{node:i,offset:0}:s&&o?this.toTreePos(s,o):null;h&&(u=this.indexTree.indexOf(h),c=this.indexTree.treePosToPath(h),d=Bt.fromTreePos(h).toStruct());const m={type:i.type,parent:s==null?void 0:s.id.toTestString(),size:i.size,id:i.id.toTestString(),removedAt:(y=i.removedAt)==null?void 0:y.toTestString(),insPrev:(w=i.insPrevID)==null?void 0:w.toTestString(),insNext:(T=i.insNextID)==null?void 0:T.toTestString(),value:i.isText?i.value:void 0,isRemoved:i.isRemoved,children:[],depth:a,attributes:i.attrs?ts((P=i.attrs)==null?void 0:P.toObject()):void 0,index:u,path:c,pos:d};for(let p=0;p<i.allChildren.length;p++){const g=p===0?i:i.allChildren[p-1];m.children.push(r(i.allChildren[p],i,g,a+1))}return m};return r(t)}getRootTreeNode(){return Hc(this.indexTree.getRoot())}toTestTreeNode(){return dy(this.indexTree.getRoot())}toSortedJSON(){return this.toJSON()}deepcopy(){const t=this.getRoot();return new xt(t.deepcopy(),this.getCreatedAt())}toPath(t,r){const i=this.toTreePos(t,r);return i?this.indexTree.treePosToPath(i):[]}toIndex(t,r){const i=this.toTreePos(t,r);return i?this.indexTree.indexOf(i):-1}indexToPath(t){return this.indexTree.indexToPath(t)}pathToIndex(t){return this.indexTree.pathToIndex(t)}indexRangeToPosRange(t){const r=this.findPos(t[0]);return t[0]===t[1]?[r,r]:[r,this.findPos(t[1])]}indexRangeToPosStructRange(t){const[r,i]=t,s=this.findPos(r);return r===i?[s.toStruct(),s.toStruct()]:[s.toStruct(),this.findPos(i).toStruct()]}posRangeToPathRange(t){const[r,i]=this.findNodesAndSplitText(t[0]),[s,o]=this.findNodesAndSplitText(t[1]);return[this.toPath(r,i),this.toPath(s,o)]}posRangeToIndexRange(t){const[r,i]=this.findNodesAndSplitText(t[0]),[s,o]=this.findNodesAndSplitText(t[1]);return[this.toIndex(r,i),this.toIndex(s,o)]}traverseInPosRange(t,r,i,s,o){const a=this.toIndex(t,r),u=this.toIndex(i,s);return this.indexTree.tokensBetween(a,u,o)}toTreePos(t,r){if(!t||!r)return;if(t.isRemoved){let s;for(;t.isRemoved;)s=t,t=s.parent;const o=t.findOffset(s);return{node:t,offset:o}}if(t===r)return{node:t,offset:0};let i=t.findOffset(r);if(!r.isRemoved){if(r.isText)return{node:r,offset:r.paddedSize};i++}return{node:t,offset:i}}makeDeletionChanges(t,r){const i=[],s=[];let o=null,a=null;for(let u=0;u<t.length;u++){const c=t[u],d=t[u+1];o||(o=c),a=c;const h=this.findRightToken(c);(!h||!d||h[0]!==d[0]||h[1]!==d[1])&&(s.push([o,a]),o=null,a=null)}for(const u of s){const[c,d]=u,[h,m]=this.findLeftToken(c),[y,w]=d,T=m===me.Start?h:h.parent,P=w===me.Start?y:y.parent,p=this.toIndex(T,h),g=this.toIndex(P,y);p<g&&(i.length>0&&p===i[i.length-1].to?(i[i.length-1].to=g,i[i.length-1].toPath=this.toPath(P,y)):i.push({type:"content",from:p,to:g,fromPath:this.toPath(T,h),toPath:this.toPath(P,y),actor:r.getActorID()}))}return i.reverse()}findRightToken([t,r]){if(r===me.Start){const u=t.allChildren;return u.length>0?[u[0],u[0].isText?me.Text:me.Start]:[t,me.End]}const i=t.parent,s=i.allChildren,o=s.indexOf(t);if(i&&o===s.length-1)return[i,me.End];const a=s[o+1];return[a,a.isText?me.Text:me.Start]}findLeftToken([t,r]){if(r===me.End){const u=t.allChildren;if(u.length>0){const c=u[u.length-1];return[c,c.isText?me.Text:me.End]}return[t,me.Start]}const i=t.parent,s=i.allChildren,o=s.indexOf(t);if(i&&o===0)return[i,me.Start];const a=s[o-1];return[a,a.isText?me.Text:me.End]}}class Fo extends zt{constructor(t,r,i,s,o,a,u){super(t,u);l(this,"fromPos");l(this,"toPos");l(this,"contents");l(this,"splitLevel");l(this,"maxCreatedAtMapByActor");this.fromPos=r,this.toPos=i,this.contents=s,this.splitLevel=o,this.maxCreatedAtMapByActor=a}static create(t,r,i,s,o,a,u){return new Fo(t,r,i,s,o,a,u)}execute(t,r,i){var d;const s=t.findByCreatedAt(this.getParentCreatedAt());if(!s)throw new k(S.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(s instanceof xt))throw new k(S.ErrInvalidArgument,"fail to execute, only Tree can execute edit");const o=this.getExecutedAt(),a=s,[u,c]=a.edit([this.fromPos,this.toPos],(d=this.contents)==null?void 0:d.map(h=>h.deepcopy()),this.splitLevel,o,(()=>{let h=o.getDelimiter();return this.contents!==void 0&&(h+=this.contents.length),()=>Tt.of(o.getLamport(),++h,o.getActorID())})(),this.maxCreatedAtMapByActor,i);for(const h of c)t.registerGCPair(h);return{opInfos:u.map(({from:h,to:m,value:y,splitLevel:w,fromPath:T,toPath:P})=>({type:"tree-edit",path:t.createPath(this.getParentCreatedAt()),from:h,to:m,value:y,splitLevel:w,fromPath:T,toPath:P}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const t=this.getParentCreatedAt().toTestString(),r=`${this.fromPos.getLeftSiblingID().getCreatedAt().toTestString()}/${this.fromPos.getLeftSiblingID().getOffset()}`,i=`${this.toPos.getLeftSiblingID().getCreatedAt().toTestString()}/${this.toPos.getLeftSiblingID().getOffset()}`,s=this.contents||[];return`${t}.EDIT(${r},${i},${s.map(o=>Xf(o)).join("")})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getContents(){return this.contents}getSplitLevel(){return this.splitLevel}getMaxCreatedAtMapByActor(){return this.maxCreatedAtMapByActor}}class ns{constructor(e){l(this,"vector");this.vector=e||new Map}set(e,t){this.vector.set(e,t)}unset(e){this.vector.delete(e)}get(e){return this.vector.get(e)}maxLamport(){let e=BigInt(0);for(const[,t]of this)t>e&&(e=t);return e}max(e){const t=new Map;for(const[r,i]of e){const s=this.vector.get(r),o=s&&s>i?s:i;t.set(r,o)}for(const[r,i]of this){const s=e.get(r),o=s&&s>i?s:i;t.set(r,o)}return new ns(t)}afterOrEqual(e){const t=this.vector.get(e.getActorID());return t===void 0?!1:t>=e.getLamport()}deepcopy(){const e=new Map;for(const[t,r]of this.vector)e.set(t,r);return new ns(e)}filter(e){const t=new Map;for(const[r]of e){const i=this.vector.get(r);i!==void 0&&t.set(r,i)}return new ns(t)}size(){return this.vector.size}*[Symbol.iterator](){for(const[e,t]of this.vector)yield[e,t]}}const HS=new ns(new Map);class ur{constructor(e,t,r,i,s){l(this,"clientSeq");l(this,"serverSeq");l(this,"lamport");l(this,"actor");l(this,"versionVector");this.clientSeq=e,this.serverSeq=s,this.lamport=t,this.versionVector=i,this.actor=r}static of(e,t,r,i,s){return new ur(e,t,r,i,s)}next(){const e=this.versionVector.deepcopy();return e.set(this.actor,this.lamport+1n),new ur(this.clientSeq+1,this.lamport+1n,this.actor,e)}syncClocks(e){const t=e.lamport>this.lamport?e.lamport+1n:this.lamport+1n;let r=e.versionVector;r.size()===0&&(r=r.deepcopy(),r.set(e.actor,e.lamport));const i=this.versionVector.max(r),s=new ur(this.clientSeq,t,this.actor,i);return s.versionVector.set(this.actor,t),s}setClocks(e,t){const r=e>this.lamport?e+1n:this.lamport+1n;t.unset(zl);const i=this.versionVector.max(t);return i.set(this.actor,r),ur.of(this.clientSeq,r,this.actor,i)}createTimeTicket(e){return Tt.of(this.lamport,e,this.actor)}setActor(e){return new ur(this.clientSeq,this.lamport,e,this.versionVector,this.serverSeq)}setVersionVector(e){return new ur(this.clientSeq,this.lamport,this.actor,e,this.serverSeq)}getClientSeq(){return this.clientSeq}getServerSeq(){return this.serverSeq?this.serverSeq.toString():""}getLamport(){return this.lamport}getLamportAsString(){return this.lamport.toString()}getActorID(){return this.actor}getVersionVector(){return this.versionVector}toTestString(){return`${this.lamport.toString()}:${this.actor.slice(-2)}:${this.clientSeq}`}}const GS=new ur(0,0n,zl,HS);class ys{constructor({id:e,operations:t,presenceChange:r,message:i}){l(this,"id");l(this,"operations");l(this,"presenceChange");l(this,"message");this.id=e,this.operations=t||[],this.presenceChange=r,this.message=i}static create({id:e,operations:t,presenceChange:r,message:i}){return new ys({id:e,operations:t,presenceChange:r,message:i})}getID(){return this.id}getMessage(){return this.message}hasOperations(){return this.operations.length>0}getOperations(){return this.operations}setActor(e){for(const t of this.operations)t.setActor(e);this.id=this.id.setActor(e)}hasPresenceChange(){return this.presenceChange!==void 0}getPresenceChange(){return this.presenceChange}execute(e,t,r){const i=[],s=[];for(const o of this.operations){const a=o.execute(e,r,this.id.getVersionVector());if(!a)continue;const{opInfos:u,reverseOp:c}=a;i.push(...u),c&&s.unshift(c)}return this.presenceChange&&(this.presenceChange.type===Zr.Put?t.set(this.id.getActorID(),Dt(this.presenceChange.presence)):t.delete(this.id.getActorID())),{opInfos:i,reverseOps:s}}toTestString(){return`${this.operations.map(e=>e.toTestString()).join(",")}`}toStruct(){return{changeID:de.bytesToHex(de.toChangeID(this.getID()).toBinary()),message:this.getMessage(),operations:this.getOperations().map(e=>de.bytesToHex(de.toOperation(e).toBinary())),presenceChange:this.getPresenceChange()}}static fromStruct(e){const{changeID:t,operations:r,presenceChange:i,message:s}=e;return ys.create({id:de.bytesToChangeID(de.hexToBytes(t)),operations:r==null?void 0:r.map(o=>de.bytesToOperation(de.hexToBytes(o))),presenceChange:i,message:s})}}class jl{constructor(e,t,r,i,s,o,a){l(this,"documentKey");l(this,"checkpoint");l(this,"isRemoved");l(this,"changes");l(this,"snapshot");l(this,"minSyncedTicket");l(this,"versionVector");this.documentKey=e,this.checkpoint=t,this.isRemoved=r,this.changes=i,this.snapshot=o,this.minSyncedTicket=a,this.versionVector=s}static create(e,t,r,i,s,o,a){return new jl(e,t,r,i,s,o,a)}getDocumentKey(){return this.documentKey}getCheckpoint(){return this.checkpoint}getIsRemoved(){return this.isRemoved}getChanges(){return this.changes}hasChanges(){return this.changes.length>0}getChangeSize(){return this.changes.length}hasSnapshot(){return!!this.snapshot&&!!this.snapshot.length}getSnapshot(){return this.snapshot}getMinSyncedTicket(){return this.minSyncedTicket}getVersionVector(){return this.versionVector}}class rs{constructor(e,t){l(this,"serverSeq");l(this,"clientSeq");this.serverSeq=e,this.clientSeq=t}static of(e,t){return new rs(e,t)}increaseClientSeq(e){return e===0?this:new rs(this.serverSeq,this.clientSeq+e)}forward(e){if(this.equals(e))return this;const t=this.serverSeq>e.serverSeq?this.serverSeq:e.serverSeq,r=Math.max(this.clientSeq,e.clientSeq);return rs.of(t,r)}getServerSeqAsString(){return this.serverSeq.toString()}getClientSeq(){return this.clientSeq}getServerSeq(){return this.serverSeq}equals(e){return this.clientSeq===e.clientSeq&&this.serverSeq==e.serverSeq}toTestString(){return`serverSeq=${this.serverSeq}, clientSeq=${this.clientSeq}`}}const YS=new rs(0n,0);class on{constructor(e,t){l(this,"createdAt");l(this,"offset");this.createdAt=e,this.offset=t}static of(e,t){return new on(e,t)}static fromStruct(e){return on.of(Tt.fromStruct(e.createdAt),e.offset)}getCreatedAt(){return this.createdAt}getOffset(){return this.offset}equals(e){return this.createdAt.compare(e.createdAt)===0&&this.offset===e.offset}hasSameCreatedAt(e){return this.createdAt.compare(e.createdAt)===0}split(e){return new on(this.createdAt,this.offset+e)}toStruct(){return{createdAt:this.createdAt.toStruct(),offset:this.offset}}toTestString(){return`${this.createdAt.toTestString()}:${this.offset}`}toIDString(){return`${this.createdAt.toIDString()}:${this.offset}`}}const QS=on.of(Ft,0);class Jt{constructor(e,t){l(this,"id");l(this,"relativeOffset");this.id=e,this.relativeOffset=t}static of(e,t){return new Jt(e,t)}static fromStruct(e){const t=on.fromStruct(e.id);return Jt.of(t,e.relativeOffset)}getID(){return this.id}getRelativeOffset(){return this.relativeOffset}getAbsoluteID(){return on.of(this.id.getCreatedAt(),this.id.getOffset()+this.relativeOffset)}toTestString(){return`${this.id.toTestString()}:${this.relativeOffset}`}toStruct(){return{id:this.id.toStruct(),relativeOffset:this.relativeOffset}}equals(e){return this.id.equals(e.id)?this.relativeOffset===e.relativeOffset:!1}}class Gr extends ry{constructor(t,r,i){super(r);l(this,"id");l(this,"removedAt");l(this,"prev");l(this,"next");l(this,"insPrev");l(this,"insNext");this.id=t,this.removedAt=i}static create(t,r){return new Gr(t,r)}static createComparator(){return(t,r)=>{const i=t.getCreatedAt().compare(r.getCreatedAt());return i!==0?i:t.getOffset()>r.getOffset()?1:t.getOffset()<r.getOffset()?-1:0}}getID(){return this.id}getCreatedAt(){return this.id.getCreatedAt()}getLength(){return this.removedAt?0:this.getContentLength()}getContentLength(){return this.value&&this.value.length||0}getPrev(){return this.prev}getNext(){return this.next}getInsPrev(){return this.insPrev}getInsNext(){return this.insNext}getInsPrevID(){return this.insPrev.getID()}setPrev(t){this.prev=t,t&&(t.next=this)}setNext(t){this.next=t,t&&(t.prev=this)}setInsPrev(t){this.insPrev=t,t&&(t.insNext=this)}setInsNext(t){this.insNext=t,t&&(t.insPrev=this)}hasNext(){return!!this.next}hasInsPrev(){return!!this.insPrev}isRemoved(){return!!this.removedAt}getRemovedAt(){return this.removedAt}split(t){return new Gr(this.id.split(t),this.splitValue(t),this.removedAt)}canDelete(t,r,i){const s=!this.removedAt;return(r?!this.getCreatedAt().after(r):this.getCreatedAt().getLamport()<=i)&&(!this.removedAt||t.after(this.removedAt))?s:!1}canStyle(t,r,i){return(r?!this.getCreatedAt().after(r):this.getCreatedAt().getLamport()<=i)&&(!this.removedAt||t.after(this.removedAt))}remove(t){this.removedAt=t}createPosRange(){return[Jt.of(this.id,0),Jt.of(this.id,this.getLength())]}deepcopy(){return new Gr(this.id,this.value,this.removedAt)}toTestString(){return`${this.id.toTestString()} ${this.value?this.value:""}`}splitValue(t){const r=this.value;return this.value=r.substring(0,t),r.substring(t,r.length)}toIDString(){return this.id.toIDString()}}class vs{constructor(){l(this,"head");l(this,"treeByIndex");l(this,"treeByID");this.head=Gr.create(QS),this.treeByIndex=new Ao,this.treeByID=new fy(Gr.createComparator()),this.treeByIndex.insert(this.head),this.treeByID.put(this.head.getID(),this.head)}static create(){return new vs}edit(e,t,r,i,s){const[o,a]=this.findNodeWithSplit(e[1],t),[u,c]=this.findNodeWithSplit(e[0],t),d=this.findBetween(c,a),[h,m,y]=this.deleteNodes(d,t,i,s),w=a?a.getID():o.getID();let T=Jt.of(w,0);if(r){const p=this.posToIndex(u.createPosRange()[1],!0),g=this.insertAfter(u,Gr.create(on.of(t,0),r));h.length&&h[h.length-1].from===p?h[h.length-1].value=r:h.push({actor:t.getActorID(),from:p,to:p,value:r}),T=Jt.of(g.getID(),g.getContentLength())}const P=[];for(const[,p]of y)P.push({parent:this,child:p});return[T,m,P,h]}indexToPos(e){const[t,r]=this.treeByIndex.find(e),i=t;return Jt.of(i.getID(),r)}findIndexesFromRange(e){const[t,r]=e;return[this.posToIndex(t,!1),this.posToIndex(r,!0)]}posToIndex(e,t){const r=e.getAbsoluteID(),i=t?this.findFloorNodePreferToLeft(r):this.findFloorNode(r);if(!i)throw new k(S.ErrInvalidArgument,`the node of the given id should be found: ${r.toTestString()}`);const s=this.treeByIndex.indexOf(i),o=i.isRemoved()?0:r.getOffset()-i.getID().getOffset();return s+o}findNode(e){return this.findFloorNode(e)}get length(){return this.treeByIndex.length}getTreeByIndex(){return this.treeByIndex}getTreeByID(){return this.treeByID}toString(){const e=[];for(const t of this)t.isRemoved()||e.push(t.getValue());return e.join("")}*[Symbol.iterator](){let e=this.head.getNext();for(;e;)yield e,e=e.getNext()}getHead(){return this.head}deepcopy(){const e=new vs;let t=this.head.getNext(),r=e.head,i;for(;t;){if(i=e.insertAfter(r,t.deepcopy()),t.hasInsPrev()){const s=e.findNode(t.getInsPrevID());i.setInsPrev(s)}r=i,t=t.getNext()}return e}toTestString(){const e=[];let t=this.head;for(;t;)t.isRemoved()?e.push(`{${t.toTestString()}}`):e.push(`[${t.toTestString()}]`),t=t.getNext();return e.join("")}insertAfter(e,t){const r=e.getNext();return t.setPrev(e),r&&r.setPrev(t),this.treeByID.put(t.getID(),t),this.treeByIndex.insertAfter(e,t),t}findNodeWithSplit(e,t){const r=e.getAbsoluteID();let i=this.findFloorNodePreferToLeft(r);const s=r.getOffset()-i.getID().getOffset();for(this.splitNode(i,s);i.hasNext()&&i.getNext().getCreatedAt().after(t);)i=i.getNext();return[i,i.getNext()]}findFloorNodePreferToLeft(e){let t=this.findFloorNode(e);if(!t)throw new k(S.ErrInvalidArgument,`the node of the given id should be found: ${e.toTestString()}`);if(e.getOffset()>0&&t.getID().getOffset()==e.getOffset()){if(!t.hasInsPrev())return t;t=t.getInsPrev()}return t}findFloorNode(e){const t=this.treeByID.floorEntry(e);if(t&&!(!t.key.equals(e)&&!t.key.hasSameCreatedAt(e)))return t.value}findBetween(e,t){const r=[];let i=e;for(;i&&i!==t;)r.push(i),i=i.getNext();return r}splitNode(e,t){if(t>e.getContentLength())throw new k(S.ErrInvalidArgument,"offset should be less than or equal to length");if(t===0)return e;if(t===e.getContentLength())return e.getNext();const r=e.split(t);this.treeByIndex.updateWeight(r),this.insertAfter(e,r);const i=e.getInsNext();return i&&i.setInsPrev(r),r.setInsPrev(e),r}deleteNodes(e,t,r,i){if(!e.length)return[[],new Map,new Map];const[s,o]=this.filterNodes(e,t,r,i),a=new Map,u=new Map,c=this.makeChanges(o,t);for(const d of s){const h=d.getCreatedAt().getActorID();(!a.has(h)||d.getID().getCreatedAt().after(a.get(h)))&&a.set(h,d.getID().getCreatedAt()),u.set(d.getID().toIDString(),d),d.remove(t)}return this.deleteIndexNodes(o),[c,a,u]}filterNodes(e,t,r,i){const s=[],o=[],[a,u]=this.findEdgesOfCandidates(e);o.push(a);for(const c of e){const d=c.getCreatedAt().getActorID();let h,m=0n;i===void 0&&r===void 0?m=Qs:i.size()>0?m=i.get(d)?i.get(d):0n:h=r.has(d)?r.get(d):Ft,c.canDelete(t,h,m)?s.push(c):o.push(c)}return o.push(u),[s,o]}findEdgesOfCandidates(e){return[e[0].getPrev(),e[e.length-1].getNext()]}makeChanges(e,t){const r=[];let i,s;for(let o=0;o<e.length-1;o++){const a=e[o],u=e[o+1];a.getNext()!=u&&([i]=this.findIndexesFromRange(a.getNext().createPosRange()),u?[,s]=this.findIndexesFromRange(u.getPrev().createPosRange()):s=this.treeByIndex.length,i<s&&r.push({actor:t.getActorID(),from:i,to:s}))}return r.reverse()}deleteIndexNodes(e){for(let t=0;t<e.length-1;t++){const r=e[t],i=e[t+1];r.getNext()!=i&&this.treeByIndex.deleteRange(r,i)}}purge(e){this.treeByIndex.delete(e),this.treeByID.remove(e.getID());const t=e.getPrev(),r=e.getNext(),i=e.getInsPrev(),s=e.getInsNext();t&&t.setNext(r),r&&r.setPrev(t),e.setPrev(void 0),e.setNext(void 0),i&&i.setInsNext(s),s&&s.setInsPrev(i),e.setInsPrev(void 0),e.setInsNext(void 0)}}const ag=n=>n<0?Math.ceil(n):Math.floor(n);var an=(n=>(n[n.IntegerCnt=0]="IntegerCnt",n[n.LongCnt=1]="LongCnt",n))(an||{});class nt extends Lo{constructor(t,r,i){super(i);l(this,"valueType");l(this,"value");switch(this.valueType=t,t){case 0:typeof r=="number"?r>Math.pow(2,31)-1||r<-Math.pow(2,31)?this.value=q.fromNumber(r).toInt():this.value=ag(r):this.value=r.toInt();break;case 1:typeof r=="number"?this.value=q.fromNumber(r):this.value=r;break;default:throw new k(S.ErrUnimplemented,`unimplemented type: ${t}`)}}static create(t,r,i){return new nt(t,r,i)}static valueFromBytes(t,r){switch(t){case 0:return r[0]|r[1]<<8|r[2]<<16|r[3]<<24;case 1:return q.fromBytesLE(Array.from(r));default:throw new k(S.ErrUnimplemented,`unimplemented type: ${t}`)}}toJSON(){return`${this.value}`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:this.value,type:"YORKIE_COUNTER"}}deepcopy(){const t=nt.create(this.valueType,this.value,this.getCreatedAt());return t.setMovedAt(this.getMovedAt()),t}getType(){return this.valueType}static getCounterType(t){switch(typeof t){case"object":return t instanceof q?1:void 0;case"number":return t>Math.pow(2,31)-1||t<-Math.pow(2,31)?1:0;default:return}}static isSupport(t){return!!nt.getCounterType(t)}static isInteger(t){return t%1===0}isNumericType(){const t=this.valueType;return t===0||t===1}getValueType(){return this.valueType}getValue(){return this.value}toBytes(){switch(this.valueType){case 0:{const t=this.value;return new Uint8Array([t&255,t>>8&255,t>>16&255,t>>24&255])}case 1:{const r=this.value.toBytesLE();return Uint8Array.from(r)}default:throw new k(S.ErrUnimplemented,`unimplemented type: ${this.valueType}`)}}increase(t){function r(i){if(!i.isNumericType())throw new TypeError(`Unsupported type of value: ${typeof i.getValue()}`)}return r(this),r(t),this.valueType===1?this.value=this.value.add(t.getValue()):t.getType()===ve.Long?this.value=this.value+t.getValue().toInt():this.value=q.fromNumber(this.value+ag(t.getValue())).toInt(),this}}class ws extends zt{constructor(t,r,i){super(t,i);l(this,"value");this.value=r}static create(t,r,i){return new ws(t,r,i)}execute(t){const r=t.findByCreatedAt(this.getParentCreatedAt());if(!r)throw new k(S.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(r instanceof nt))throw new k(S.ErrInvalidArgument,"fail to execute, only Counter can execute increase");const i=r,s=this.value.deepcopy();return i.increase(s),{opInfos:[{type:"increase",path:t.createPath(this.getParentCreatedAt()),value:s.getValue()}],reverseOp:this.toReverseOperation()}}toReverseOperation(){const t=this.value.deepcopy(),i=t.getType()===ve.Long?t.getValue().multiply(-1):t.getValue()*-1;return ws.create(this.getParentCreatedAt(),ce.of(i,t.getCreatedAt()))}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.INCREASE.${this.value.toJSON()}`}getValue(){return this.value}}class vr extends zt{constructor(t,r,i,s,o,a,u){super(t,u);l(this,"fromPos");l(this,"toPos");l(this,"maxCreatedAtMapByActor");l(this,"attributes");l(this,"attributesToRemove");this.fromPos=r,this.toPos=i,this.maxCreatedAtMapByActor=s,this.attributes=o,this.attributesToRemove=a}static create(t,r,i,s,o,a){return new vr(t,r,i,s,o,[],a)}static createTreeRemoveStyleOperation(t,r,i,s,o,a){return new vr(t,r,i,s,new Map,o,a)}execute(t,r,i){const s=t.findByCreatedAt(this.getParentCreatedAt());if(!s)throw new k(S.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(s instanceof xt))throw new k(S.ErrInvalidArgument,"fail to execute, only Tree can execute edit");const o=s;let a,u;if(this.attributes.size){const c={};[...this.attributes].forEach(([d,h])=>c[d]=h),[,u,a]=o.style([this.fromPos,this.toPos],c,this.getExecutedAt(),this.maxCreatedAtMapByActor,i)}else{const c=this.attributesToRemove;[,u,a]=o.removeStyle([this.fromPos,this.toPos],c,this.getExecutedAt(),this.maxCreatedAtMapByActor,i)}for(const c of u)t.registerGCPair(c);return{opInfos:a.map(({from:c,to:d,value:h,fromPath:m,toPath:y})=>({type:"tree-style",from:c,to:d,value:this.attributes.size?{attributes:h}:{attributesToRemove:h},fromPath:m,toPath:y,path:t.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const t=this.getParentCreatedAt().toTestString(),r=`${this.fromPos.getLeftSiblingID().getCreatedAt().toTestString()}:${this.fromPos.getLeftSiblingID().getOffset()}`,i=`${this.toPos.getLeftSiblingID().getCreatedAt().toTestString()}:${this.toPos.getLeftSiblingID().getOffset()}`;return`${t}.STYLE(${r},${i},${Object.entries(this.attributes||{}).map(([s,o])=>`${s}:"${o}"`).join(" ")})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getAttributes(){return this.attributes}getAttributesToRemove(){return this.attributesToRemove}getMaxCreatedAtMapByActor(){return this.maxCreatedAtMapByActor}}function XS(n){const e=new Gf,t=e.data;for(const[r,i]of Object.entries(n))t[r]=JSON.stringify(i);return e}function ZS(n){if(n.type===Zr.Put)return new ko({type:xi.PUT,presence:XS(n.presence)});if(n.type===Zr.Clear)return new ko({type:xi.CLEAR});throw new k(S.ErrUnimplemented,"unimplemented type")}function e1(n){return new ey({serverSeq:n.getServerSeq(),clientSeq:n.getClientSeq()})}function hy(n){return new Jl({clientSeq:n.getClientSeq(),lamport:n.getLamport(),actorId:ud(n.getActorID()),versionVector:Zf(n.getVersionVector())})}function M(n){if(n)return new b({lamport:n.getLamport(),delimiter:n.getDelimiter(),actorId:ud(n.getActorID())})}function Zf(n){if(!n)return;const e=new $l;for(const[t,r]of n)e.vector[t]=BigInt(r.toString());return e}function gy(n){switch(n){case ve.Null:return z.NULL;case ve.Boolean:return z.BOOLEAN;case ve.Integer:return z.INTEGER;case ve.Long:return z.LONG;case ve.Double:return z.DOUBLE;case ve.String:return z.STRING;case ve.Bytes:return z.BYTES;case ve.Date:return z.DATE;default:throw new k(S.ErrInvalidType,`unsupported type: ${n}`)}}function my(n){switch(n){case an.IntegerCnt:return z.INTEGER_CNT;case an.LongCnt:return z.LONG_CNT;default:throw new k(S.ErrInvalidType,`unsupported type: ${n}`)}}function Au(n){if(n instanceof He)return new lt({type:z.JSON_OBJECT,createdAt:M(n.getCreatedAt()),value:Ny(n)});if(n instanceof tt)return new lt({type:z.JSON_ARRAY,createdAt:M(n.getCreatedAt()),value:O1(n)});if(n instanceof Et)return new lt({type:z.TEXT,createdAt:M(n.getCreatedAt())});if(n instanceof ce)return new lt({type:gy(n.getType()),createdAt:M(n.getCreatedAt()),value:n.toBytes()});if(n instanceof nt)return new lt({type:my(n.getType()),createdAt:M(n.getCreatedAt()),value:n.toBytes()});if(n instanceof xt)return new lt({type:z.TREE,createdAt:M(n.getCreatedAt()),value:L1(n)});throw new k(S.ErrUnimplemented,"unimplemented element")}function t1(n){return new wo({createdAt:M(n.getCreatedAt()),offset:n.getOffset()})}function ia(n){return new Ar({createdAt:M(n.getID().getCreatedAt()),offset:n.getID().getOffset(),relativeOffset:n.getRelativeOffset()})}function sa(n){return new Ei({parentId:Xs(n.getParentID()),leftSiblingId:Xs(n.getLeftSiblingID())})}function Xs(n){return new _r({createdAt:M(n.getCreatedAt()),offset:n.getOffset()})}function py(n){const e=new Hf;if(n instanceof Ci){const t=n,r=new Za;r.parentCreatedAt=M(t.getParentCreatedAt()),r.key=t.getKey(),r.value=Au(t.getValue()),r.executedAt=M(t.getExecutedAt()),e.body.case="set",e.body.value=r}else if(n instanceof Bo){const t=n,r=new el;r.parentCreatedAt=M(t.getParentCreatedAt()),r.prevCreatedAt=M(t.getPrevCreatedAt()),r.value=Au(t.getValue()),r.executedAt=M(t.getExecutedAt()),e.body.case="add",e.body.value=r}else if(n instanceof Jr){const t=n,r=new tl;r.parentCreatedAt=M(t.getParentCreatedAt()),r.prevCreatedAt=M(t.getPrevCreatedAt()),r.createdAt=M(t.getCreatedAt()),r.executedAt=M(t.getExecutedAt()),e.body.case="move",e.body.value=r}else if(n instanceof ei){const t=n,r=new nl;r.parentCreatedAt=M(t.getParentCreatedAt()),r.createdAt=M(t.getCreatedAt()),r.executedAt=M(t.getExecutedAt()),e.body.case="remove",e.body.value=r}else if(n instanceof bo){const t=n,r=new rl;r.parentCreatedAt=M(t.getParentCreatedAt()),r.from=ia(t.getFromPos()),r.to=ia(t.getToPos());const i=r.createdAtMapByActor;for(const[o,a]of t.getMaxCreatedAtMapByActor())i[o]=M(a);r.content=t.getContent();const s=r.attributes;for(const[o,a]of t.getAttributes())s[o]=a;r.executedAt=M(t.getExecutedAt()),e.body.case="edit",e.body.value=r}else if(n instanceof Mo){const t=n,r=new il;r.parentCreatedAt=M(t.getParentCreatedAt()),r.from=ia(t.getFromPos()),r.to=ia(t.getToPos());const i=r.createdAtMapByActor;for(const[o,a]of t.getMaxCreatedAtMapByActor())i[o]=M(a);const s=r.attributes;for(const[o,a]of t.getAttributes())s[o]=a;r.executedAt=M(t.getExecutedAt()),e.body.case="style",e.body.value=r}else if(n instanceof ws){const t=n,r=new sl;r.parentCreatedAt=M(t.getParentCreatedAt()),r.value=Au(t.getValue()),r.executedAt=M(t.getExecutedAt()),e.body.case="increase",e.body.value=r}else if(n instanceof Fo){const t=n,r=new ol,i=r.createdAtMapByActor;for(const[s,o]of t.getMaxCreatedAtMapByActor())i[s]=M(o);r.parentCreatedAt=M(t.getParentCreatedAt()),r.from=sa(t.getFromPos()),r.to=sa(t.getToPos()),r.contents=l1(t.getContents()),r.splitLevel=t.getSplitLevel(),r.executedAt=M(t.getExecutedAt()),e.body.case="treeEdit",e.body.value=r}else if(n instanceof vr){const t=n,r=new al;r.parentCreatedAt=M(t.getParentCreatedAt()),r.from=sa(t.getFromPos()),r.to=sa(t.getToPos());const i=r.createdAtMapByActor;for(const[o,a]of t.getMaxCreatedAtMapByActor())i[o]=M(a);const s=t.getAttributesToRemove();if(s.length>0)r.attributesToRemove=s;else{const o=r.attributes;for(const[a,u]of t.getAttributes())o[a]=u}r.executedAt=M(t.getExecutedAt()),e.body.case="treeStyle",e.body.value=r}else throw new k(S.ErrUnimplemented,"unimplemented operation");return e}function n1(n){const e=[];for(const t of n)e.push(py(t));return e}function r1(n){const e=new Xp({id:hy(n.getID()),message:n.getMessage()});return n.hasOperations()&&(e.operations=n1(n.getOperations())),n.hasPresenceChange()&&(e.presenceChange=ZS(n.getPresenceChange())),e}function i1(n){const e=[];for(const t of n)e.push(r1(t));return e}function s1(n){const e=[];for(const t of n)e.push(new Zp({key:t.getStrKey(),element:td(t.getValue())}));return e}function o1(n){const e=[];for(const t of n)e.push(new gl({element:td(t.getValue())}));return e}function a1(n){const e=[];for(const t of n){const r=new ml;r.id=t1(t.getID()),r.value=t.getValue().getContent(),r.removedAt=M(t.getRemovedAt());const i=r.attributes,s=t.getValue().getAttrs();for(const o of s){const a=new gs;a.value=o.getValue(),a.updatedAt=M(o.getUpdatedAt()),i[o.getKey()]=a}e.push(r)}return e}function l1(n){const e=[];if(!n||!n.length)return e;for(const t of n)e.push(new pl({content:ed(t)}));return e}function u1(n){const e={};for(const t of n)e[t.getKey()]=new gs({value:t.getValue(),updatedAt:M(t.getUpdatedAt()),isRemoved:t.isRemoved()});return e}function ed(n){if(!n)return[];const e=[];return Ul(n,(t,r)=>{const i=new So({id:Xs(t.id),type:t.type,removedAt:M(t.removedAt),depth:r});t.isText&&(i.value=t.value),t.insPrevID&&(i.insPrevId=Xs(t.insPrevID)),t.insNextID&&(i.insNextId=Xs(t.insNextID)),t.attrs&&(i.attributes=u1(t.attrs)),e.push(i)}),e}function c1(n){const e=new Ge;return e.body.case="jsonObject",e.body.value=new ll({nodes:s1(n.getRHT()),createdAt:M(n.getCreatedAt()),movedAt:M(n.getMovedAt()),removedAt:M(n.getRemovedAt())}),e}function yy(n){const e=new Ge;return e.body.case="jsonArray",e.body.value=new ul({nodes:o1(n.getElements()),createdAt:M(n.getCreatedAt()),movedAt:M(n.getMovedAt()),removedAt:M(n.getRemovedAt())}),e}function f1(n){const e=new Ge;return e.body.case="primitive",e.body.value=new cl({type:gy(n.getType()),value:n.toBytes(),createdAt:M(n.getCreatedAt()),movedAt:M(n.getMovedAt()),removedAt:M(n.getRemovedAt())}),e}function d1(n){const e=new Ge;return e.body.case="text",e.body.value=new fl({nodes:a1(n.getRGATreeSplit()),createdAt:M(n.getCreatedAt()),movedAt:M(n.getMovedAt()),removedAt:M(n.getRemovedAt())}),e}function h1(n){const e=new Ge;return e.body.case="counter",e.body.value=new dl({type:my(n.getType()),value:n.toBytes(),createdAt:M(n.getCreatedAt()),movedAt:M(n.getMovedAt()),removedAt:M(n.getRemovedAt())}),e}function vy(n){const e=new Ge;return e.body.case="tree",e.body.value=new hl({nodes:ed(n.getRoot()),createdAt:M(n.getCreatedAt()),movedAt:M(n.getMovedAt()),removedAt:M(n.getRemovedAt())}),e}function td(n){if(n instanceof He)return c1(n);if(n instanceof tt)return yy(n);if(n instanceof ce)return f1(n);if(n instanceof Et)return d1(n);if(n instanceof nt)return h1(n);if(n instanceof xt)return vy(n);throw new k(S.ErrUnimplemented,"unimplemented element")}function g1(n){return new xr({documentKey:n.getDocumentKey(),checkpoint:e1(n.getCheckpoint()),isRemoved:n.getIsRemoved(),changes:i1(n.getChanges()),snapshot:n.getSnapshot(),versionVector:Zf(n.getVersionVector()),minSyncedTicket:M(n.getMinSyncedTicket())})}function $s(n){if(!(n instanceof G))return{};const e=n.findDetails(OS);for(const t of e)return t.metadata;return{}}function Pr(n){return $s(n).code??""}function wy(n){return ur.of(n.clientSeq,BigInt(n.lamport),ad(n.actorId),nd(n.versionVector),BigInt(n.serverSeq))}function nd(n){if(!n)return;const e=new ns;return Object.entries(n.vector).forEach(([t,r])=>{e.set(t,BigInt(r.toString()))}),e}function F(n){if(n)return Tt.of(BigInt(n.lamport),n.delimiter,ad(n.actorId))}function rd(n){const e={};return Object.entries(n.data).forEach(([t,r])=>{e[t]=JSON.parse(r)}),e}function m1(n){const e=n.type;if(e===xi.PUT){const t=rd(n.presence);return{type:Zr.Put,presence:t}}if(e===xi.CLEAR)return{type:Zr.Clear};throw new k(S.ErrInvalidType,`unsupported type: ${e}`)}function p1(n){const e=new Map;return Object.entries(n).forEach(([t,r])=>{e.set(t,rd(r))}),e}function Sy(n){switch(n){case z.NULL:return ve.Null;case z.BOOLEAN:return ve.Boolean;case z.INTEGER:return ve.Integer;case z.LONG:return ve.Long;case z.DOUBLE:return ve.Double;case z.STRING:return ve.String;case z.BYTES:return ve.Bytes;case z.DATE:return ve.Date}throw new k(S.ErrUnimplemented,`unimplemented value type: ${n}`)}function wl(n){switch(n){case z.INTEGER_CNT:return an.IntegerCnt;case z.LONG_CNT:return an.LongCnt}throw new k(S.ErrUnimplemented,`unimplemented value type: ${n}`)}function Iu(n){switch(n.type){case z.JSON_OBJECT:return n.value?Cy(n.value):He.create(F(n.createdAt));case z.JSON_ARRAY:return n.value?D1(n.value):tt.create(F(n.createdAt));case z.TEXT:return Et.create(vs.create(),F(n.createdAt));case z.TREE:return R1(n.value);case z.NULL:case z.BOOLEAN:case z.INTEGER:case z.LONG:case z.DOUBLE:case z.STRING:case z.BYTES:case z.DATE:return ce.of(ce.valueFromBytes(Sy(n.type),n.value),F(n.createdAt));case z.INTEGER_CNT:case z.LONG_CNT:return nt.create(wl(n.type),nt.valueFromBytes(wl(n.type),n.value),F(n.createdAt))}}function oa(n){return Jt.of(on.of(F(n.createdAt),n.offset),n.relativeOffset)}function ky(n){return on.of(F(n.createdAt),n.offset)}function y1(n){const e=Eo.create(n.value);Object.entries(n.attributes).forEach(([r,i])=>{e.setAttr(r,i.value,F(i.updatedAt))});const t=Gr.create(ky(n.id),e);return t.remove(F(n.removedAt)),t}function Li(n){return Bt.of(Zs(n.parentId),Zs(n.leftSiblingId))}function Zs(n){return Ce.of(F(n.createdAt),n.offset)}function v1(n){if(!n.length)return;const e=[];return n.forEach(t=>{const r=id(t.content);e.push(r)}),e}function id(n){if(n.length===0)return;const e=[];for(const i of n)e.push(S1(i));const t=e[e.length-1],r=new Map;r.set(n[e.length-1].depth,e[e.length-1]);for(let i=e.length-2;i>=0;i--)r.get(n[i].depth-1).prepend(e[i]),r.set(n[i].depth,e[i]);return t.updateDescendantsSize(),xt.create(t,Ft).getRoot()}function w1(n){const e=Ir.create();for(const[t,r]of Object.entries(n))e.setInternal(t,r.value,F(r.updatedAt),r.isRemoved);return e}function S1(n){const e=Zs(n.id),t=Ze.create(e,n.type),r=Object.entries(n.attributes);return t.isText?t.value=n.value:r.length&&(t.attrs=w1(n.attributes)),n.insPrevId&&(t.insPrevID=Zs(n.insPrevId)),n.insNextId&&(t.insNextID=Zs(n.insNextId)),t.removedAt=F(n.removedAt),t}function Ty(n){if(n.body.case==="set"){const e=n.body.value;return Ci.create(e.key,Iu(e.value),F(e.parentCreatedAt),F(e.executedAt))}else if(n.body.case==="add"){const e=n.body.value;return Bo.create(F(e.parentCreatedAt),F(e.prevCreatedAt),Iu(e.value),F(e.executedAt))}else if(n.body.case==="move"){const e=n.body.value;return Jr.create(F(e.parentCreatedAt),F(e.prevCreatedAt),F(e.createdAt),F(e.executedAt))}else if(n.body.case==="remove"){const e=n.body.value;return ei.create(F(e.parentCreatedAt),F(e.createdAt),F(e.executedAt))}else if(n.body.case==="edit"){const e=n.body.value,t=new Map;Object.entries(e.createdAtMapByActor).forEach(([i,s])=>{t.set(i,F(s))});const r=new Map;return Object.entries(e.attributes).forEach(([i,s])=>{r.set(i,s)}),bo.create(F(e.parentCreatedAt),oa(e.from),oa(e.to),t,e.content,r,F(e.executedAt))}else if(n.body.case==="style"){const e=n.body.value,t=new Map;Object.entries(e.createdAtMapByActor).forEach(([i,s])=>{t.set(i,F(s))});const r=new Map;return Object.entries(e.attributes).forEach(([i,s])=>{r.set(i,s)}),Mo.create(F(e.parentCreatedAt),oa(e.from),oa(e.to),t,r,F(e.executedAt))}else{if(n.body.case==="select")return;if(n.body.case==="increase"){const e=n.body.value;return ws.create(F(e.parentCreatedAt),Iu(e.value),F(e.executedAt))}else if(n.body.case==="treeEdit"){const e=n.body.value,t=new Map;return Object.entries(e.createdAtMapByActor).forEach(([r,i])=>{t.set(r,F(i))}),Fo.create(F(e.parentCreatedAt),Li(e.from),Li(e.to),v1(e.contents),e.splitLevel,t,F(e.executedAt))}else if(n.body.case==="treeStyle"){const e=n.body.value,t=new Map,r=e.attributesToRemove,i=new Map;return e!=null&&e.createdAtMapByActor&&Object.entries(e.createdAtMapByActor).forEach(([s,o])=>{i.set(s,F(o))}),(r==null?void 0:r.length)>0?vr.createTreeRemoveStyleOperation(F(e.parentCreatedAt),Li(e.from),Li(e.to),i,r,F(e.executedAt)):(Object.entries(e.attributes).forEach(([s,o])=>{t.set(s,o)}),vr.create(F(e.parentCreatedAt),Li(e.from),Li(e.to),i,t,F(e.executedAt)))}else throw new k(S.ErrUnimplemented,"unimplemented operation")}}function k1(n){const e=[];for(const t of n){const r=Ty(t);r&&e.push(r)}return e}function Ay(n){const e=[];for(const t of n)e.push(ys.create({id:wy(t.id),operations:k1(t.operations),presenceChange:t.presenceChange?m1(t.presenceChange):void 0,message:t.message}));return e}function T1(n){return rs.of(BigInt(n.serverSeq),n.clientSeq)}function A1(n){return jl.create(n.documentKey,T1(n.checkpoint),n.isRemoved,Ay(n.changes),nd(n.versionVector),n.snapshot,F(n.minSyncedTicket))}function Iy(n){const e=new To;for(const r of n.nodes){const i=sd(r.element);e.set(r.key,i,i.getPositionedAt())}const t=new He(F(n.createdAt),e);return t.setMovedAt(F(n.movedAt)),t.setRemovedAt(F(n.removedAt)),t}function Ey(n){const e=new Io;for(const r of n.nodes)e.insert(sd(r.element));const t=new tt(F(n.createdAt),e);return t.setMovedAt(F(n.movedAt)),t.setRemovedAt(F(n.removedAt)),t}function I1(n){const e=ce.of(ce.valueFromBytes(Sy(n.type),n.value),F(n.createdAt));return e.setMovedAt(F(n.movedAt)),e.setRemovedAt(F(n.removedAt)),e}function E1(n){const e=new vs;let t=e.getHead();for(const i of n.nodes){const s=e.insertAfter(t,y1(i));i.insPrevId&&s.setInsPrev(e.findNode(ky(i.insPrevId))),t=s}const r=new Et(e,F(n.createdAt));return r.setMovedAt(F(n.movedAt)),r.setRemovedAt(F(n.removedAt)),r}function x1(n){const e=nt.create(wl(n.type),nt.valueFromBytes(wl(n.type),n.value),F(n.createdAt));return e.setMovedAt(F(n.movedAt)),e.setRemovedAt(F(n.removedAt)),e}function xy(n){const e=id(n.nodes);return xt.create(e,F(n.createdAt))}function sd(n){if(n.body.case==="jsonObject")return Iy(n.body.value);if(n.body.case==="jsonArray")return Ey(n.body.value);if(n.body.case==="primitive")return I1(n.body.value);if(n.body.case==="text")return E1(n.body.value);if(n.body.case==="counter")return x1(n.body.value);if(n.body.case==="tree")return xy(n.body.value);throw new k(S.ErrUnimplemented,"unimplemented element")}function C1(n){if(!n)return{root:He.create(Ft),presences:new Map};const e=Ac.fromBinary(n);return{root:sd(e.root),presences:p1(e.presences)}}function N1(n){const e=Zf(n);return od(e.toBinary())}function P1(n){const e=ld(n),t=$l.fromBinary(e);return nd(t)}function Cy(n){if(!n)throw new k(S.ErrInvalidArgument,"bytes is empty");const e=Ge.fromBinary(n);return Iy(e.body.value)}function Ny(n){return td(n).toBinary()}function D1(n){if(!n)throw new k(S.ErrInvalidArgument,"bytes is empty");const e=Ge.fromBinary(n);return Ey(e.body.value)}function O1(n){return yy(n).toBinary()}function R1(n){if(!n)throw new k(S.ErrInvalidArgument,"bytes is empty");const e=Ge.fromBinary(n);return xy(e.body.value)}function L1(n){return vy(n).toBinary()}function od(n){return n?Array.from(n).map(e=>e.toString(16).padStart(2,"0")).join(""):""}function ad(n){return od(n)}function ld(n){return new Uint8Array(n.match(/.{1,2}/g).map(e=>parseInt(e,16)))}function ud(n){return ld(n)}function B1(n){const e=Jl.fromBinary(n);return wy(e)}function b1(n){const e=Hf.fromBinary(n);return Ty(e)}const de={fromPresence:rd,toChangePack:g1,fromChangePack:A1,fromChanges:Ay,toTreeNodes:ed,fromTreeNodes:id,objectToBytes:Ny,bytesToObject:Cy,bytesToSnapshot:C1,bytesToHex:od,hexToBytes:ld,toHexString:ad,toUint8Array:ud,toOperation:py,toChangeID:hy,PbChangeID:Jl,bytesToChangeID:B1,bytesToOperation:b1,versionVectorToHex:N1,hexToVersionVector:P1};var Ue=(n=>(n[n.Trivial=0]="Trivial",n[n.Debug=1]="Debug",n[n.Info=2]="Info",n[n.Warn=3]="Warn",n[n.Error=4]="Error",n[n.Fatal=5]="Fatal",n))(Ue||{});let ui=3;function M1(n){ui=n}const J={trivial:(...n)=>{ui>0||typeof console<"u"&&console.log("YORKIE T:",...n)},debug:(...n)=>{ui>1||typeof console<"u"&&console.log("YORKIE D:",...n)},info:(...n)=>{ui>2||typeof console<"u"&&console.log("YORKIE I:",...n)},warn:(...n)=>{ui>3||typeof console<"u"&&(typeof console.warn<"u"?console.warn("YORKIE W:",...n):console.log("YORKIE W:",...n))},error:(...n)=>{ui>4||typeof console<"u"&&(typeof console.error<"u"?console.error("YORKIE E:",...n):console.log("YORKIE E:",...n))},fatal:(...n)=>{typeof console<"u"&&(typeof console.error<"u"?console.error("YORKIE F:",...n):console.log("YORKIE F:",...n))},isEnabled:n=>ui<=n};function Py(){return"xxxxxxxx-xxxx-4xxxy-xxxx-xxxxxxxxxxx".replace(/[xy]/g,n=>{const e=Math.random()*16|0;return(n==="x"?e:e&3|8).toString(16)})}class F1{constructor(e,t,r,i,s){l(this,"reconnectStreamDelay");l(this,"doc");l(this,"docID");l(this,"syncMode");l(this,"remoteChangeEventReceived");l(this,"watchStream");l(this,"watchLoopTimerID");l(this,"watchAbortController");l(this,"unsubscribeBroadcastEvent");this.reconnectStreamDelay=e,this.doc=t,this.docID=r,this.syncMode=i,this.remoteChangeEventReceived=!1,this.unsubscribeBroadcastEvent=s}changeSyncMode(e){this.syncMode=e}needRealtimeSync(){return this.syncMode===xa.RealtimeSyncOff?!1:this.syncMode===xa.RealtimePushOnly?this.doc.hasLocalChanges():this.syncMode!==xa.Manual&&(this.doc.hasLocalChanges()||this.remoteChangeEventReceived)}async runWatchLoop(e){const t=async()=>{if(this.watchStream)return Promise.resolve();this.watchLoopTimerID&&(clearTimeout(this.watchLoopTimerID),this.watchLoopTimerID=void 0);try{[this.watchStream,this.watchAbortController]=await e(()=>{this.watchStream=void 0,this.watchAbortController=void 0,this.watchLoopTimerID=setTimeout(t,this.reconnectStreamDelay)})}catch{}};await t()}cancelWatchStream(){this.watchStream&&this.watchAbortController&&(this.watchAbortController.abort(),this.watchStream=void 0,this.watchAbortController=void 0),clearTimeout(this.watchLoopTimerID),this.watchLoopTimerID=void 0}}const Eu=()=>{};class J1{constructor(e){l(this,"finalized",!1);l(this,"observers",[]);l(this,"finalError");try{e(this)}catch(t){this.error(t)}}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(!e)throw new k(S.ErrInvalidArgument,"missing observer");if(this.finalized)throw new k(S.ErrRefused,"observable is finalized due to previous error");typeof e=="object"?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Eu),i.error===void 0&&(i.error=Eu),i.complete===void 0&&(i.complete=Eu);const s=Py(),o=this.unsubscribeOne.bind(this,s);if(this.observers.push({subscriptionID:s,observer:i}),this.finalized)try{this.finalError?i.error(this.finalError):i.complete()}catch(a){J.warn(a)}return o}unsubscribeOne(e){var t;this.observers=(t=this.observers)==null?void 0:t.filter(r=>r.subscriptionID!==e)}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e].observer)}catch(r){J.error(r)}}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.observers=void 0)}}function $1(n){const e=new J1(n);return{subscribe:e.subscribe.bind(e),getProxy:()=>e}}class Hi{constructor(e,t,r,i){l(this,"id");l(this,"delimiter");l(this,"message");l(this,"root");l(this,"operations");l(this,"presenceChange");l(this,"previousPresence");l(this,"reversePresenceKeys");this.id=e,this.delimiter=ny,this.root=t,this.operations=[],this.previousPresence=Dt(r),this.presenceChange=void 0,this.reversePresenceKeys=new Set,this.message=i}static create(e,t,r,i){return new Hi(e,t,r,i)}push(e){this.operations.push(e)}registerElement(e,t){this.root.registerElement(e,t)}registerRemovedElement(e){this.root.registerRemovedElement(e)}registerGCPair(e){this.root.registerGCPair(e)}getChange(){return ys.create({id:this.id,operations:this.operations,presenceChange:this.presenceChange,message:this.message})}hasChange(){return this.operations.length>0||this.presenceChange!==void 0}setPresenceChange(e){this.presenceChange=e}setReversePresence(e,t){for(const r of Object.keys(e))t!=null&&t.addToHistory?this.reversePresenceKeys.add(r):this.reversePresenceKeys.delete(r)}getReversePresence(){if(this.reversePresenceKeys.size===0)return;const e={};for(const t of this.reversePresenceKeys)e[t]=this.previousPresence[t];return e}issueTimeTicket(){return this.delimiter+=1,this.id.createTimeTicket(this.delimiter)}getLastTimeTicket(){return this.id.createTimeTicket(this.delimiter)}}class xo{constructor(e){l(this,"rootObject");l(this,"elementPairMapByCreatedAt");l(this,"gcElementSetByCreatedAt");l(this,"gcPairMap");this.rootObject=e,this.elementPairMapByCreatedAt=new Map,this.gcElementSetByCreatedAt=new Set,this.gcPairMap=new Map,this.registerElement(e,void 0),e.getDescendants(t=>{if(t.getRemovedAt()&&this.registerRemovedElement(t),t instanceof Et||t instanceof xt)for(const r of t.getGCPairs())this.registerGCPair(r);return!1})}static create(){return new xo(He.create(Ft))}findByCreatedAt(e){const t=this.elementPairMapByCreatedAt.get(e.toIDString());if(t)return t.element}findElementPairByCreatedAt(e){return this.elementPairMapByCreatedAt.get(e.toIDString())}createSubPaths(e){let t=this.elementPairMapByCreatedAt.get(e.toIDString());if(!t)return[];const r=[];for(;t.parent;){const i=t.element.getCreatedAt(),s=t.parent.subPathOf(i);if(s===void 0)throw new k(S.ErrInvalidArgument,`cant find the given element: ${i.toIDString()}`);r.unshift(s),t=this.elementPairMapByCreatedAt.get(t.parent.getCreatedAt().toIDString())}return r.unshift("$"),r}createPath(e){return this.createSubPaths(e).join(".")}registerElement(e,t){this.elementPairMapByCreatedAt.set(e.getCreatedAt().toIDString(),{parent:t,element:e}),e instanceof Hr&&e.getDescendants((r,i)=>(this.registerElement(r,i),!1))}deregisterElement(e){let t=0;const r=i=>{const s=i.getCreatedAt().toIDString();this.elementPairMapByCreatedAt.delete(s),this.gcElementSetByCreatedAt.delete(s),t++};return r(e),e instanceof Hr&&e.getDescendants(i=>(r(i),!1)),t}registerRemovedElement(e){this.gcElementSetByCreatedAt.add(e.getCreatedAt().toIDString())}registerGCPair(e){if(this.gcPairMap.get(e.child.toIDString())){this.gcPairMap.delete(e.child.toIDString());return}this.gcPairMap.set(e.child.toIDString(),e)}getElementMapSize(){return this.elementPairMapByCreatedAt.size}getGarbageElementSetSize(){const e=new Set;for(const t of this.gcElementSetByCreatedAt){e.add(t);const r=this.elementPairMapByCreatedAt.get(t);r.element instanceof Hr&&r.element.getDescendants(i=>(e.add(i.getCreatedAt().toIDString()),!1))}return e.size}getObject(){return this.rootObject}getGarbageLen(){return this.getGarbageElementSetSize()+this.gcPairMap.size}deepcopy(){return new xo(this.rootObject.deepcopy())}garbageCollect(e){let t=0;for(const r of this.gcElementSetByCreatedAt){const i=this.elementPairMapByCreatedAt.get(r),s=i.element.getRemovedAt();s&&(e!=null&&e.afterOrEqual(s))&&(i.parent.purge(i.element),t+=this.deregisterElement(i.element))}for(const[,r]of this.gcPairMap){const i=r.child.getRemovedAt();i&&(e!=null&&e.afterOrEqual(i))&&(r.parent.purge(r.child),this.gcPairMap.delete(r.child.toIDString()),t+=1)}return t}toJSON(){return this.rootObject.toJSON()}toSortedJSON(){return this.rootObject.toSortedJSON()}getStats(){return{elements:this.getElementMapSize(),gcPairs:this.gcPairMap.size,gcElements:this.getGarbageElementSetSize()}}}function Dy(n,e){const t=new Co(n);return new Proxy(e,t.getHandlers())}class Co{constructor(e){l(this,"context");l(this,"handlers");this.context=e,this.handlers={set:(t,r,i)=>(J.isEnabled(Ue.Trivial)&&J.trivial(`obj[${r}]=${JSON.stringify(i)}`),Co.setInternal(e,t,r,i),!0),get:(t,r)=>(J.isEnabled(Ue.Trivial)&&J.trivial(`obj[${r}]`),r==="getID"?()=>t.getCreatedAt():r==="toJSON"||r==="toString"?()=>t.toJSON():r==="toJS"?()=>t.toJS():r==="toJSForTest"?()=>t.toJSForTest():ci(e,t.get(r))),ownKeys:t=>t.getKeys(),getOwnPropertyDescriptor:()=>({enumerable:!0,configurable:!0}),deleteProperty:(t,r)=>(J.isEnabled(Ue.Trivial)&&J.trivial(`obj[${r}]`),Co.deleteInternal(e,t,r),!0)}}static setInternal(e,t,r,i){if(r.includes("."))throw new k(S.ErrInvalidObjectKey,"key must not contain the '.'.");const s=e.issueTimeTicket(),o=Sl(e,i,s),a=t.set(r,o,s);e.registerElement(o,t),a&&e.registerRemovedElement(a),e.push(Ci.create(r,o.deepcopy(),t.getCreatedAt(),s))}static buildObjectMembers(e,t){const r={};for(const[i,s]of Object.entries(t)){if(i.includes("."))throw new k(S.ErrInvalidObjectKey,"key must not contain the '.'.");const o=e.issueTimeTicket(),a=Sl(e,s,o);r[i]=a}return r}static deleteInternal(e,t,r){const i=e.issueTimeTicket(),s=t.deleteByKey(r,i);s&&(e.push(ei.create(t.getCreatedAt(),s.getCreatedAt(),i)),e.registerRemovedElement(s))}getHandlers(){return this.handlers}}function z1(n,e){const t=new oe(n,e);return new Proxy(e,t.getHandlers())}function U1(n){return typeof n=="string"||n instanceof String?!isNaN(n):!1}function j1(n){return["concat","entries","every","filter","find","findIndex","forEach","join","keys","map","reduce","reduceRight","slice","some","toLocaleString","toString","values"].includes(n)}class oe{constructor(e,t){l(this,"context");l(this,"handlers");l(this,"array");this.context=e,this.array=t,this.handlers={get:(r,i,s)=>i==="getID"?()=>r.getCreatedAt():i==="getElementByID"?o=>{const a=r.getByID(o);if(!(!a||a.isRemoved()))return Dr(e,a)}:i==="getElementByIndex"?o=>{const a=r.get(o);return Dr(e,a)}:i==="getLast"?()=>Dr(e,r.getLast()):i==="deleteByID"?o=>{const a=oe.deleteInternalByID(e,r,o);return Dr(e,a)}:i==="insertAfter"?(o,a)=>{const u=oe.insertAfterInternal(e,r,o,a);return Dr(e,u)}:i==="insertBefore"?(o,a)=>{const u=oe.insertBeforeInternal(e,r,o,a);return Dr(e,u)}:i==="moveBefore"?(o,a)=>{oe.moveBeforeInternal(e,r,o,a)}:i==="moveAfter"?(o,a)=>{oe.moveAfterInternal(e,r,o,a)}:i==="moveFront"?o=>{oe.moveFrontInternal(e,r,o)}:i==="moveLast"?o=>{oe.moveLastInternal(e,r,o)}:U1(i)?ci(e,r.get(Number(i))):i==="push"?o=>oe.pushInternal(e,r,o):i==="splice"?(o,a,...u)=>oe.splice(e,r,o,a,...u):i==="length"?r.length:typeof i=="symbol"&&i===Symbol.iterator?oe.iteratorInternal.bind(this,e,r):i==="includes"?(o,a)=>oe.includes(e,r,o,a):i==="indexOf"?(o,a)=>oe.indexOf(e,r,o,a):i==="lastIndexOf"?(o,a)=>oe.lastIndexOf(e,r,o,a):i==="toJSForTest"?()=>r.toJSForTest():i==="toTestString"?()=>oe.toTestString(r):typeof i=="string"&&j1(i)?(...o)=>{const a=Array.from(r).map(u=>ci(e,u));return Array.prototype[i].apply(a,o)}:Reflect.get(r,i,s),deleteProperty:(r,i)=>(J.isEnabled(Ue.Trivial)&&J.trivial(`array[${i}]`),oe.deleteInternalByIndex(e,r,Number.parseInt(i)),!0)}}static*iteratorInternal(e,t){for(const r of t)yield Dr(e,r)}static buildArrayElements(e,t){const r=[];for(const i of t){const s=e.issueTimeTicket(),o=Sl(e,i,s);r.push(o)}return r}static pushInternal(e,t,r){return oe.insertAfterInternal(e,t,t.getLastCreatedAt(),r),t.length}static moveBeforeInternal(e,t,r,i){const s=e.issueTimeTicket(),o=t.getPrevCreatedAt(r);t.moveAfter(o,i,s),e.push(Jr.create(t.getCreatedAt(),o,i,s))}static moveAfterInternal(e,t,r,i){const s=e.issueTimeTicket();t.moveAfter(r,i,s),e.push(Jr.create(t.getCreatedAt(),r,i,s))}static moveFrontInternal(e,t,r){const i=e.issueTimeTicket(),s=t.getHead();t.moveAfter(s.getCreatedAt(),r,i),e.push(Jr.create(t.getCreatedAt(),s.getCreatedAt(),r,i))}static moveLastInternal(e,t,r){const i=e.issueTimeTicket(),s=t.getLastCreatedAt();t.moveAfter(s,r,i),e.push(Jr.create(t.getCreatedAt(),s,r,i))}static insertAfterInternal(e,t,r,i){const s=e.issueTimeTicket(),o=Sl(e,i,s);return t.insertAfter(r,o),e.registerElement(o,t),e.push(Bo.create(t.getCreatedAt(),r,o.deepcopy(),s)),o}static insertBeforeInternal(e,t,r,i){return oe.insertAfterInternal(e,t,t.getPrevCreatedAt(r),i)}static deleteInternalByIndex(e,t,r){const i=e.issueTimeTicket(),s=t.deleteByIndex(r,i);if(s)return e.push(ei.create(t.getCreatedAt(),s.getCreatedAt(),i)),e.registerRemovedElement(s),s}static deleteInternalByID(e,t,r){const i=e.issueTimeTicket(),s=t.delete(r,i);return e.push(ei.create(t.getCreatedAt(),s.getCreatedAt(),i)),e.registerRemovedElement(s),s}static splice(e,t,r,i,...s){const o=t.length,a=r>=0?Math.min(r,o):Math.max(o+r,0),u=i===void 0?o:i<0?a:Math.min(a+i,o),c=[];for(let d=a;d<u;d++){const h=oe.deleteInternalByIndex(e,t,a);if(h){const m=h.deepcopy();m.setRemovedAt(),c.push(ci(e,m))}}if(s){let d=a===0?t.getHead().getID():t.get(a-1).getID();for(const h of s)d=oe.insertAfterInternal(e,t,d,h).getID()}return c}static includes(e,t,r,i){var a;const s=t.length,o=i===void 0?0:i<0?Math.max(i+s,0):i;if(o>=s)return!1;if(ce.isSupport(r))return Array.from(t).map(c=>ci(e,c)).includes(r,o);for(let u=o;u<s;u++)if(((a=t.get(u))==null?void 0:a.getID())===r.getID())return!0;return!1}static indexOf(e,t,r,i){var a;const s=t.length,o=i===void 0?0:i<0?Math.max(i+s,0):i;if(o>=s)return-1;if(ce.isSupport(r))return Array.from(t).map(c=>ci(e,c)).indexOf(r,o);for(let u=o;u<s;u++)if(((a=t.get(u))==null?void 0:a.getID())===r.getID())return u;return-1}static lastIndexOf(e,t,r,i){var a;const s=t.length,o=i===void 0||i>=s?s-1:i<0?i+s:i;if(o<0)return-1;if(ce.isSupport(r))return Array.from(t).map(c=>ci(e,c)).lastIndexOf(r,o);for(let u=o;u>0;u--)if(((a=t.get(u))==null?void 0:a.getID())===r.getID())return u;return-1}static toTestString(e){return e.toTestString()}getHandlers(){return this.handlers}}class cd{constructor(e,t){l(this,"context");l(this,"text");this.context=e,this.text=t}initialize(e,t){this.context=e,this.text=t}getID(){return this.text.getID()}edit(e,t,r,i){if(!this.context||!this.text)throw new k(S.ErrNotInitialized,"Text is not initialized yet");if(e>t)throw new k(S.ErrInvalidArgument,"from should be less than or equal to to");const s=this.text.indexRangeToPosRange(e,t);J.isEnabled(Ue.Debug)&&J.debug(`EDIT: f:${e}->${s[0].toTestString()}, t:${t}->${s[1].toTestString()} c:${r}`);const o=i?ms(i):void 0,a=this.context.issueTimeTicket(),[u,,c,d]=this.text.edit(s,r,a,o);for(const h of c)this.context.registerGCPair(h);return this.context.push(new bo(this.text.getCreatedAt(),s[0],s[1],u,r,o?new Map(Object.entries(o)):new Map,a)),this.text.findIndexesFromRange(d)}delete(e,t){return this.edit(e,t,"")}empty(){return this.edit(0,this.length,"")}setStyle(e,t,r){if(!this.context||!this.text)throw new k(S.ErrNotInitialized,"Text is not initialized yet");if(e>t)throw new k(S.ErrInvalidArgument,"from should be less than or equal to to");const i=this.text.indexRangeToPosRange(e,t);J.isEnabled(Ue.Debug)&&J.debug(`STYL: f:${e}->${i[0].toTestString()}, t:${t}->${i[1].toTestString()} a:${JSON.stringify(r)}`);const s=ms(r),o=this.context.issueTimeTicket(),[a,u]=this.text.setStyle(i,s,o);for(const c of u)this.context.registerGCPair(c);return this.context.push(new Mo(this.text.getCreatedAt(),i[0],i[1],a,new Map(Object.entries(s)),o)),!0}indexRangeToPosRange(e){if(!this.context||!this.text)throw new k(S.ErrNotInitialized,"Text is not initialized yet");const t=this.text.indexRangeToPosRange(e[0],e[1]);return[t[0].toStruct(),t[1].toStruct()]}posRangeToIndexRange(e){if(!this.context||!this.text)throw new k(S.ErrNotInitialized,"Text is not initialized yet");const t=this.text.findIndexesFromRange([Jt.fromStruct(e[0]),Jt.fromStruct(e[1])]);return[t[0],t[1]]}toTestString(){if(!this.context||!this.text)throw new k(S.ErrNotInitialized,"Text is not initialized yet");return this.text.toTestString()}values(){if(!this.context||!this.text)throw new k(S.ErrNotInitialized,"Text is not initialized yet");return this.text.values()}get length(){return this.text.length}getTreeByIndex(){return this.text.getTreeByIndex()}getTreeByID(){return this.text.getTreeByID()}toString(){if(!this.context||!this.text)throw new k(S.ErrNotInitialized,"Text is not initialized yet");return this.text.toString()}toJSON(){if(!this.context||!this.text)throw new k(S.ErrNotInitialized,"Text is not initialized yet");return this.text.toJSON()}toJSForTest(){if(!this.context||!this.text)throw new k(S.ErrNotInitialized,"Text is not initialized yet");return this.text.toJSForTest()}createRangeForTest(e,t){if(!this.context||!this.text)throw new k(S.ErrNotInitialized,"Text is not initialized yet");return this.text.indexRangeToPosRange(e,t)}}class fd{constructor(e,t){l(this,"valueType");l(this,"value");l(this,"context");l(this,"counter");this.valueType=e,this.value=t}initialize(e,t){this.valueType=t.getValueType(),this.context=e,this.counter=t,this.value=t.getValue()}getID(){return this.counter.getID()}getValue(){return this.value}getValueType(){return this.valueType}increase(e){if(!this.context||!this.counter)throw new k(S.ErrNotInitialized,"Counter is not initialized yet");const t=this.context.issueTimeTicket(),r=ce.of(e,t);if(!r.isNumericType())throw new TypeError(`Unsupported type of value: ${typeof r.getValue()}`);return this.counter.increase(r),this.context.push(ws.create(this.counter.getCreatedAt(),r,t)),this}toJSForTest(){if(!this.context||!this.counter)throw new k(S.ErrNotInitialized,"Counter is not initialized yet");return this.counter.toJSForTest()}}function dd(n,e,t){const{type:r}=n,i=t.issueTimeTicket();if(r===yr){Oy(n);const{value:s}=n,o=Ze.create(Ce.of(i,0),r,s);e.append(o)}else{const{children:s=[]}=n,{attributes:o}=n;let a;if(typeof o=="object"&&!ty(o)){const c=ms(o);a=new Ir;for(const[d,h]of Object.entries(c))a.set(d,h,i)}const u=Ze.create(Ce.of(i,0),r,void 0,a);e.append(u);for(const c of s)dd(c,u,t)}}function V1(n,e){const{type:t}=e,r=n.issueTimeTicket();let i;if(e.type===yr){const{value:s}=e;i=Ze.create(Ce.of(r,0),t,s)}else if(e){const{children:s=[]}=e,{attributes:o}=e;let a;if(typeof o=="object"&&!ty(o)){const u=ms(o);a=new Ir;for(const[c,d]of Object.entries(u))a.set(c,d,r)}i=Ze.create(Ce.of(n.issueTimeTicket(),0),t,void 0,a);for(const u of s)dd(u,i,n)}return i}function Oy(n){if(!n.value.length)throw new k(S.ErrInvalidArgument,"text node cannot have empty value");return!0}function lg(n){if(!n.length)return!0;if(n[0].type===yr)for(const t of n){const{type:r}=t;if(r!==yr)throw new k(S.ErrInvalidArgument,"element node and text node cannot be passed together");Oy(t)}else for(const t of n){const{type:r}=t;if(r===yr)throw new k(S.ErrInvalidArgument,"element node and text node cannot be passed together")}return!0}class hd{constructor(e){l(this,"initialRoot");l(this,"context");l(this,"tree");this.initialRoot=e}initialize(e,t){this.context=e,this.tree=t}getID(){return this.tree.getID()}buildRoot(e){if(!this.initialRoot)return Ze.create(Ce.of(e.issueTimeTicket(),0),zS);const t=Ze.create(Ce.of(e.issueTimeTicket(),0),this.initialRoot.type);for(const r of this.initialRoot.children)dd(r,t,e);return t}getSize(){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getSize()}getNodeSize(){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getNodeSize()}getIndexTree(){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getIndexTree()}styleByPath(e,t){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");if(!e.length)throw new k(S.ErrInvalidArgument,"path should not be empty");const[r,i]=this.tree.pathToPosRange(e),s=this.context.issueTimeTicket(),o=t?ms(t):void 0,[a]=this.tree.style([r,i],o,s);this.context.push(vr.create(this.tree.getCreatedAt(),r,i,a,o?new Map(Object.entries(o)):new Map,s))}style(e,t,r){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");if(e>t)throw new k(S.ErrInvalidArgument,"from should be less than or equal to to");const i=this.tree.findPos(e),s=this.tree.findPos(t),o=this.context.issueTimeTicket(),a=r?ms(r):void 0,[u,c]=this.tree.style([i,s],a,o);for(const d of c)this.context.registerGCPair(d);this.context.push(vr.create(this.tree.getCreatedAt(),i,s,u,a?new Map(Object.entries(a)):new Map,o))}removeStyle(e,t,r){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");if(e>t)throw new k(S.ErrInvalidArgument,"from should be less than or equal to to");const i=this.tree.findPos(e),s=this.tree.findPos(t),o=this.context.issueTimeTicket(),[a,u]=this.tree.removeStyle([i,s],r,o);for(const c of u)this.context.registerGCPair(c);this.context.push(vr.createTreeRemoveStyleOperation(this.tree.getCreatedAt(),i,s,a,r,o))}editInternal(e,t,r,i=0){var c;if(r.length!==0&&r[0]&&(lg(r),r[0].type!==yr))for(const d of r){const{children:h=[]}=d;lg(h)}const s=this.context.getLastTimeTicket();let o=new Array;if(((c=r[0])==null?void 0:c.type)===yr){let d="";for(const h of r){const{value:m}=h;d+=m}o.push(Ze.create(Ce.of(this.context.issueTimeTicket(),0),yr,d))}else o=r.map(d=>d&&V1(this.context,d)).filter(d=>d);const[,a,u]=this.tree.edit([e,t],o.length?o.map(d=>d==null?void 0:d.deepcopy()):void 0,i,s,()=>this.context.issueTimeTicket());for(const d of a)this.context.registerGCPair(d);return this.context.push(Fo.create(this.tree.getCreatedAt(),e,t,o.length?o:void 0,i,u,s)),!0}editByPath(e,t,r,i=0){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");if(e.length!==t.length)throw new k(S.ErrInvalidArgument,"path length should be equal");if(!e.length||!t.length)throw new k(S.ErrInvalidArgument,"path should not be empty");const s=this.tree.pathToPos(e),o=this.tree.pathToPos(t);return this.editInternal(s,o,r?[r]:[],i)}editBulkByPath(e,t,r,i=0){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");if(e.length!==t.length)throw new k(S.ErrInvalidArgument,"path length should be equal");if(!e.length||!t.length)throw new k(S.ErrInvalidArgument,"path should not be empty");const s=this.tree.pathToPos(e),o=this.tree.pathToPos(t);return this.editInternal(s,o,r,i)}edit(e,t,r,i=0){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");if(e>t)throw new k(S.ErrInvalidArgument,"from should be less than or equal to to");const s=this.tree.findPos(e),o=this.tree.findPos(t);return this.editInternal(s,o,r?[r]:[],i)}editBulk(e,t,r,i=0){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");if(e>t)throw new k(S.ErrInvalidArgument,"from should be less than or equal to to");const s=this.tree.findPos(e),o=this.tree.findPos(t);return this.editInternal(s,o,r,i)}toXML(){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toXML()}toJSON(){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toJSON()}toJSForTest(){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toJSForTest()}toJSInfoForTest(){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toJSInfoForTest()}getRootTreeNode(){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getRootTreeNode()}indexToPath(e){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");return this.tree.indexToPath(e)}pathToIndex(e){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");return this.tree.pathToIndex(e)}pathRangeToPosRange(e){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");const t=[this.tree.pathToIndex(e[0]),this.tree.pathToIndex(e[1])],r=this.tree.indexRangeToPosRange(t);return[r[0].toStruct(),r[1].toStruct()]}indexRangeToPosRange(e){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");return this.tree.indexRangeToPosStructRange(e)}posRangeToIndexRange(e){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");const t=[Bt.fromStruct(e[0]),Bt.fromStruct(e[1])];return this.tree.posRangeToIndexRange(t)}posRangeToPathRange(e){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");const t=[Bt.fromStruct(e[0]),Bt.fromStruct(e[1])];return this.tree.posRangeToPathRange(t)}}function ug(n,e){return Dy(n,e)}function Dr(n,e){if(e){if(e instanceof ce)return e;if(e instanceof He)return Dy(n,e);if(e instanceof tt)return z1(n,e);if(e instanceof Et)return new cd(n,e);if(e instanceof nt){const t=new fd(an.IntegerCnt,0);return t.initialize(n,e),t}else if(e instanceof xt){const t=new hd;return t.initialize(n,e),t}}else return;throw new TypeError(`Unsupported type of element: ${typeof e}`)}function ci(n,e){const t=Dr(n,e);return t instanceof ce?t.getValue():t}function Sl(n,e,t){let r;if(ce.isSupport(e))r=ce.of(e,t);else if(Array.isArray(e))r=tt.create(t,oe.buildArrayElements(n,e));else if(typeof e=="object")e instanceof cd?(r=Et.create(vs.create(),t),e.initialize(n,r)):e instanceof fd?(r=nt.create(e.getValueType(),e.getValue(),t),e.initialize(n,r)):e instanceof hd?(r=xt.create(e.buildRoot(n),t),e.initialize(n,r)):r=He.create(t,Co.buildObjectMembers(n,e));else throw new TypeError(`Unsupported type of value: ${typeof e}`);return r}const cg=50;class q1{constructor(){l(this,"undoStack",[]);l(this,"redoStack",[])}hasUndo(){return this.undoStack.length>0}hasRedo(){return this.redoStack.length>0}pushUndo(e){this.undoStack.length>=cg&&this.undoStack.shift(),this.undoStack.push(e)}popUndo(){return this.undoStack.pop()}pushRedo(e){this.redoStack.length>=cg&&this.redoStack.shift(),this.redoStack.push(e)}popRedo(){return this.redoStack.pop()}clearRedo(){this.redoStack=[]}getUndoStackForTest(){return this.undoStack}getRedoStackForTest(){return this.redoStack}}const K1="yorkie-devtools-panel",W1="yorkie-devtools-sdk";function _1(n){return[Ee.StatusChanged,Ee.Snapshot,Ee.LocalChange,Ee.RemoteChange,Ee.Initialized,Ee.Watched,Ee.Unwatched,Ee.PresenceChanged].includes(n.type)}function H1(n){return n.every(_1)}let Bi="disconnected";const fg=new Map,Ea=new Map;typeof window<"u"&&(window.docEventsForReplayByDocKey=Ea);function aa(n,e){(e!=null&&e.force||Bi!=="disconnected")&&window.postMessage({source:W1,...n},"*")}function G1(n){if(!n.isEnableDevtools()||typeof window>"u"||fg.has(n.getKey()))return;Ea.set(n.getKey(),[]);const e=n.subscribe("all",t=>{H1(t)&&(Ea.get(n.getKey()).push(t),Bi==="synced"&&aa({msg:"doc::sync::partial",docKey:n.getKey(),event:t}))});fg.set(n.getKey(),[e]),aa({msg:"refresh-devtools"},{force:!0}),window.addEventListener("message",t=>{var i;if(((i=t.data)==null?void 0:i.source)!==K1)return;switch(t.data.msg){case"devtools::connect":if(Bi!=="disconnected")break;Bi="connected",aa({msg:"doc::available",docKey:n.getKey()}),J.info(`[YD] Devtools connected. Doc: ${n.getKey()}`);break;case"devtools::disconnect":Bi="disconnected",J.info(`[YD] Devtools disconnected. Doc: ${n.getKey()}`);break;case"devtools::subscribe":Bi="synced",aa({msg:"doc::sync::full",docKey:n.getKey(),events:Ea.get(n.getKey())}),J.info(`[YD] Devtools subscribed. Doc: ${n.getKey()}`);break}})}var Or=(n=>(n.Detached="detached",n.Attached="attached",n.Removed="removed",n))(Or||{}),Ee=(n=>(n.StatusChanged="status-changed",n.ConnectionChanged="connection-changed",n.SyncStatusChanged="sync-status-changed",n.Snapshot="snapshot",n.LocalChange="local-change",n.RemoteChange="remote-change",n.Initialized="initialized",n.Watched="watched",n.Unwatched="unwatched",n.PresenceChanged="presence-changed",n.Broadcast="broadcast",n.LocalBroadcast="local-broadcast",n.AuthError="auth-error",n))(Ee||{}),Gc=(n=>(n.Connected="connected",n.Disconnected="disconnected",n))(Gc||{}),Yc=(n=>(n.Synced="synced",n.SyncFailed="sync-failed",n))(Yc||{});class Ry{constructor(e,t){l(this,"key");l(this,"status");l(this,"opts");l(this,"changeID");l(this,"checkpoint");l(this,"localChanges");l(this,"root");l(this,"clone");l(this,"eventStream");l(this,"eventStreamObserver");l(this,"onlineClients");l(this,"presences");l(this,"history");l(this,"internalHistory");l(this,"isUpdating");this.opts=t||{},this.key=e,this.status="detached",this.root=xo.create(),this.changeID=GS,this.checkpoint=YS,this.localChanges=[],this.eventStream=$1(r=>{this.eventStreamObserver=r}),this.onlineClients=new Set,this.presences=new Map,this.isUpdating=!1,this.internalHistory=new q1,this.history={canUndo:this.canUndo.bind(this),canRedo:this.canRedo.bind(this),undo:this.undo.bind(this),redo:this.redo.bind(this)},G1(this)}update(e,t){if(this.getStatus()==="removed")throw new k(S.ErrDocumentRemoved,`${this.key} is removed`);this.ensureClone();const r=this.changeID.getActorID(),i=Hi.create(this.changeID.next(),this.clone.root,this.clone.presences.get(r)||{},t);try{const s=ug(i,this.clone.root.getObject());this.presences.has(r)||this.clone.presences.set(r,{}),this.isUpdating=!0,e(s,new Tu(i,this.clone.presences.get(r)))}catch(s){throw this.clone=void 0,s}finally{this.isUpdating=!1}if(i.hasChange()){J.isEnabled(Ue.Trivial)&&J.trivial(`trying to update a local change: ${this.toJSON()}`);const s=i.getChange(),{opInfos:o,reverseOps:a}=s.execute(this.root,this.presences,Q.Local),u=i.getReversePresence();u&&a.push({type:"presence",value:u}),this.localChanges.push(s),a.length>0&&this.internalHistory.pushUndo(a),o.length>0&&this.internalHistory.clearRedo(),this.changeID=s.getID();const c=[];o.length>0&&c.push({type:"local-change",source:Q.Local,value:{message:s.getMessage()||"",operations:o,actor:r,clientSeq:s.getID().getClientSeq(),serverSeq:s.getID().getServerSeq()},rawChange:this.isEnableDevtools()?s.toStruct():void 0}),s.hasPresenceChange()&&c.push({type:"presence-changed",source:Q.Local,value:{clientID:r,presence:this.getPresence(r)}}),this.publish(c),J.isEnabled(Ue.Trivial)&&J.trivial(`after update a local change: ${this.toJSON()}`)}}subscribe(e,t,r,i){if(typeof e=="string"){if(typeof t!="function")throw new k(S.ErrInvalidArgument,"Second argument must be a callback function");if(e==="presence"){const a=t;return this.eventStream.subscribe(u=>{for(const c of u)c.type!=="initialized"&&c.type!=="watched"&&c.type!=="unwatched"&&c.type!=="presence-changed"||a(c)},r,i)}if(e==="my-presence"){const a=t;return this.eventStream.subscribe(u=>{for(const c of u)c.type!=="initialized"&&c.type!=="presence-changed"||c.type==="presence-changed"&&c.value.clientID!==this.changeID.getActorID()||a(c)},r,i)}if(e==="others"){const a=t;return this.eventStream.subscribe(u=>{for(const c of u)c.type!=="watched"&&c.type!=="unwatched"&&c.type!=="presence-changed"||c.value.clientID!==this.changeID.getActorID()&&a(c)},r,i)}if(e==="connection"){const a=t;return this.eventStream.subscribe(u=>{for(const c of u)c.type==="connection-changed"&&a(c)},r,i)}if(e==="status"){const a=t;return this.eventStream.subscribe(u=>{for(const c of u)c.type==="status-changed"&&a(c)},r,i)}if(e==="sync"){const a=t;return this.eventStream.subscribe(u=>{for(const c of u)c.type==="sync-status-changed"&&a(c)},r,i)}if(e==="local-broadcast"){const a=t;return this.eventStream.subscribe(u=>{for(const c of u)c.type==="local-broadcast"&&a(c)},r)}if(e==="broadcast"){const a=t;return this.eventStream.subscribe(u=>{for(const c of u)c.type==="broadcast"&&a(c)},r)}if(e==="auth-error"){const a=t;return this.eventStream.subscribe(u=>{for(const c of u)c.type==="auth-error"&&a(c)},r)}if(e==="all"){const a=t;return this.eventStream.subscribe(a,r,i)}const s=e,o=t;return this.eventStream.subscribe(a=>{for(const u of a){if(u.type!=="local-change"&&u.type!=="remote-change")continue;const c=[];for(const d of u.value.operations)this.isSameElementOrChildOf(d.path,s)&&c.push(d);c.length&&o({...u,value:{...u.value,operations:c}})}},r,i)}if(typeof e=="function"){const s=e,o=t,a=r;return this.eventStream.subscribe(u=>{for(const c of u)c.type!=="snapshot"&&c.type!=="local-change"&&c.type!=="remote-change"||s(c)},o,a)}throw new k(S.ErrInvalidArgument,`"${e}" is not a valid`)}publish(e){this.eventStreamObserver&&this.eventStreamObserver.next(e)}isSameElementOrChildOf(e,t){if(t===e)return!0;const r=e.split(".");return t.split(".").every((s,o)=>s===r[o])}removePushedLocalChanges(e){for(;this.localChanges.length&&!(this.localChanges[0].getID().getClientSeq()>e);)this.localChanges.shift()}applyChangePack(e){const t=e.hasSnapshot();t?this.applySnapshot(e.getCheckpoint().getServerSeq(),e.getVersionVector(),e.getSnapshot(),e.getCheckpoint().getClientSeq()):(this.applyChanges(e.getChanges(),Q.Remote),this.removePushedLocalChanges(e.getCheckpoint().getClientSeq())),this.checkpoint=this.checkpoint.forward(e.getCheckpoint()),t||this.garbageCollect(e.getVersionVector()),e.getIsRemoved()&&this.applyStatus("removed"),J.isEnabled(Ue.Trivial)&&J.trivial(`${this.root.toJSON()}`)}getCheckpoint(){return this.checkpoint}getChangeID(){return this.changeID}hasLocalChanges(){return this.localChanges.length>0}ensureClone(){this.clone||(this.clone={root:this.root.deepcopy(),presences:Dt(this.presences)})}createChangePack(){const e=Array.from(this.localChanges),t=this.checkpoint.increaseClientSeq(e.length);return jl.create(this.key,t,!1,e,this.getVersionVector())}setActor(e){for(const t of this.localChanges)t.setActor(e);this.changeID=this.changeID.setActor(e)}isEnableDevtools(){return!!this.opts.enableDevtools}getKey(){return this.key}getStatus(){return this.status}getCloneRoot(){if(this.clone)return this.clone.root.getObject()}getRoot(){this.ensureClone();const e=Hi.create(this.changeID.next(),this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});return ug(e,this.clone.root.getObject())}garbageCollect(e){return this.opts.disableGC?0:(this.clone&&this.clone.root.garbageCollect(e),this.root.garbageCollect(e))}getRootObject(){return this.root.getObject()}getGarbageLen(){return this.root.getGarbageLen()}getGarbageLenFromClone(){return this.clone.root.getGarbageLen()}toJSON(){return this.root.toJSON()}toSortedJSON(){return this.root.toSortedJSON()}getStats(){return this.root.getStats()}toJSForTest(){return{...this.getRoot().toJSForTest(),key:"root"}}applySnapshot(e,t,r,i=-1){const{root:s,presences:o}=de.bytesToSnapshot(r);this.root=new xo(s),this.presences=o,this.changeID=this.changeID.setClocks(t.maxLamport(),t),this.clone=void 0,this.removePushedLocalChanges(i),this.applyChanges(this.localChanges,Q.Local),this.publish([{type:"snapshot",source:Q.Remote,value:{serverSeq:e.toString(),snapshot:this.isEnableDevtools()?de.bytesToHex(r):void 0,snapshotVector:de.versionVectorToHex(t)}}])}applyChanges(e,t){J.isEnabled(Ue.Debug)&&J.debug(`trying to apply ${e.length} remote changes.elements:${this.root.getElementMapSize()}, removeds:${this.root.getGarbageElementSetSize()}`),J.isEnabled(Ue.Trivial)&&J.trivial(e.map(r=>`${r.getID().toTestString()}	${r.toTestString()}`).join(`
`));for(const r of e)this.applyChange(r,t);J.isEnabled(Ue.Debug)&&J.debug(`after appling ${e.length} remote changes.elements:${this.root.getElementMapSize()},  removeds:${this.root.getGarbageElementSetSize()}`)}applyChange(e,t){this.ensureClone(),e.execute(this.clone.root,this.clone.presences,t);const r=[],i=e.getID().getActorID();if(e.hasPresenceChange()&&this.onlineClients.has(i)){const o=e.getPresenceChange();switch(o.type){case Zr.Put:r.push(this.presences.has(i)?{type:"presence-changed",source:t,value:{clientID:i,presence:o.presence}}:{type:"watched",source:Q.Remote,value:{clientID:i,presence:o.presence}});break;case Zr.Clear:r.push({type:"unwatched",source:Q.Remote,value:{clientID:i,presence:this.getPresence(i)}}),this.removeOnlineClient(i);break}}const{opInfos:s}=e.execute(this.root,this.presences,t);if(this.changeID=this.changeID.syncClocks(e.getID()),s.length>0){const o=this.isEnableDevtools()?e.toStruct():void 0;r.push(t===Q.Remote?{type:"remote-change",source:t,value:{actor:i,clientSeq:e.getID().getClientSeq(),serverSeq:e.getID().getServerSeq(),message:e.getMessage()||"",operations:s},rawChange:o}:{type:"local-change",source:t,value:{actor:i,clientSeq:e.getID().getClientSeq(),serverSeq:e.getID().getServerSeq(),message:e.getMessage()||"",operations:s},rawChange:o})}r.length>0&&this.publish(r)}applyWatchStream(e){if(e.body.case==="initialization"){const t=e.body.value.clientIds,r=new Set;for(const i of t)i!==this.changeID.getActorID()&&r.add(i);this.setOnlineClients(r),this.publish([{type:"initialized",source:Q.Local,value:this.getPresences()}]);return}if(e.body.case==="event"){const{type:t,publisher:r}=e.body.value,i=[];if(t===wi.DOCUMENT_WATCHED){if(this.onlineClients.has(r)&&this.hasPresence(r))return;this.addOnlineClient(r),this.hasPresence(r)&&i.push({type:"watched",source:Q.Remote,value:{clientID:r,presence:this.getPresence(r)}})}else if(t===wi.DOCUMENT_UNWATCHED){const s=this.getPresence(r);this.removeOnlineClient(r),s&&i.push({type:"unwatched",source:Q.Remote,value:{clientID:r,presence:s}})}else if(t===wi.DOCUMENT_BROADCAST&&e.body.value.body){const{topic:s,payload:o}=e.body.value.body,a=new TextDecoder;i.push({type:"broadcast",value:{clientID:r,topic:s,payload:JSON.parse(a.decode(o))}})}i.length>0&&this.publish(i)}}applyStatus(e){this.status=e,e==="detached"&&this.setActor(zl),this.publish([{source:e==="removed"?Q.Remote:Q.Local,type:"status-changed",value:e==="attached"?{status:e,actorID:this.changeID.getActorID()}:{status:e}}])}applyDocEventForReplay(e){if(e.type==="status-changed"){this.applyStatus(e.value.status),e.value.status==="attached"&&this.setActor(e.value.actorID);return}if(e.type==="snapshot"){const{snapshot:t,serverSeq:r,snapshotVector:i}=e.value;if(!t)return;this.applySnapshot(BigInt(r),de.hexToVersionVector(i),de.hexToBytes(t));return}if(e.type==="local-change"||e.type==="remote-change"){if(!e.rawChange)return;const t=ys.fromStruct(e.rawChange);this.applyChange(t,e.source)}if(e.type==="initialized"){const t=new Set;for(const{clientID:r,presence:i}of e.value)t.add(r),this.presences.set(r,i);this.setOnlineClients(t);return}if(e.type==="watched"){const{clientID:t,presence:r}=e.value;this.addOnlineClient(t),this.presences.set(t,r);return}if(e.type==="unwatched"){const{clientID:t}=e.value;this.removeOnlineClient(t),this.presences.delete(t)}if(e.type==="presence-changed"){const{clientID:t,presence:r}=e.value;this.presences.set(t,r)}}applyDocEventsForReplay(e){for(const t of e)this.applyDocEventForReplay(t)}getValueByPath(e){if(!e.startsWith("$"))throw new k(S.ErrInvalidArgument,'path must start with "$"');const t=e.split(".");t.shift();let r=this.getRoot();for(const i of t)if(r=r[i],r===void 0)return;return r}setOnlineClients(e){this.onlineClients=e}resetOnlineClients(){this.onlineClients=new Set}addOnlineClient(e){this.onlineClients.add(e)}removeOnlineClient(e){this.onlineClients.delete(e)}hasPresence(e){return this.presences.has(e)}getMyPresence(){if(this.status!=="attached")return{};const e=this.presences.get(this.changeID.getActorID());return e?Dt(e):{}}getPresence(e){if(e===this.changeID.getActorID())return this.getMyPresence();if(!this.onlineClients.has(e))return;const t=this.presences.get(e);return t?Dt(t):void 0}getPresenceForTest(e){const t=this.presences.get(e);return t?Dt(t):void 0}getPresences(){const e=[];e.push({clientID:this.changeID.getActorID(),presence:Dt(this.getMyPresence())});for(const t of this.onlineClients)this.presences.has(t)&&e.push({clientID:t,presence:Dt(this.presences.get(t))});return e}getSelfForTest(){return{clientID:this.getChangeID().getActorID(),presence:this.getMyPresence()}}getOthersForTest(){const e=this.getChangeID().getActorID();return this.getPresences().filter(t=>t.clientID!==e).sort((t,r)=>t.clientID>r.clientID?1:-1)}canUndo(){return this.internalHistory.hasUndo()&&!this.isUpdating}filterVersionVector(e){const r=this.changeID.getVersionVector().filter(e);this.changeID=this.changeID.setVersionVector(r)}canRedo(){return this.internalHistory.hasRedo()&&!this.isUpdating}undo(){if(this.isUpdating)throw new k(S.ErrRefused,"Undo is not allowed during an update");const e=this.internalHistory.popUndo();if(e===void 0)throw new k(S.ErrRefused,"There is no operation to be undone");this.ensureClone();const t=Hi.create(this.changeID.next(),this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});for(const c of e){if(!(c instanceof zt)){new Tu(t,Dt(this.clone.presences.get(this.changeID.getActorID()))).set(c.value,{addToHistory:!0});continue}const d=t.issueTimeTicket();c.setExecutedAt(d),t.push(c)}const r=t.getChange();r.execute(this.clone.root,this.clone.presences,Q.UndoRedo);const{opInfos:i,reverseOps:s}=r.execute(this.root,this.presences,Q.UndoRedo),o=t.getReversePresence();if(o&&s.push({type:"presence",value:o}),s.length>0&&this.internalHistory.pushRedo(s),!r.hasPresenceChange()&&i.length===0)return;this.localChanges.push(r),this.changeID=r.getID();const a=this.changeID.getActorID(),u=[];i.length>0&&u.push({type:"local-change",source:Q.UndoRedo,value:{message:r.getMessage()||"",operations:i,actor:a,clientSeq:r.getID().getClientSeq(),serverSeq:r.getID().getServerSeq()},rawChange:this.isEnableDevtools()?r.toStruct():void 0}),r.hasPresenceChange()&&u.push({type:"presence-changed",source:Q.UndoRedo,value:{clientID:a,presence:this.getPresence(a)}}),this.publish(u)}redo(){if(this.isUpdating)throw new k(S.ErrRefused,"Redo is not allowed during an update");const e=this.internalHistory.popRedo();if(e===void 0)throw new k(S.ErrRefused,"There is no operation to be redone");this.ensureClone();const t=Hi.create(this.changeID.next(),this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});for(const c of e){if(!(c instanceof zt)){new Tu(t,Dt(this.clone.presences.get(this.changeID.getActorID()))).set(c.value,{addToHistory:!0});continue}const d=t.issueTimeTicket();c.setExecutedAt(d),t.push(c)}const r=t.getChange();r.execute(this.clone.root,this.clone.presences,Q.UndoRedo);const{opInfos:i,reverseOps:s}=r.execute(this.root,this.presences,Q.UndoRedo),o=t.getReversePresence();if(o&&s.push({type:"presence",value:o}),s.length>0&&this.internalHistory.pushUndo(s),!r.hasPresenceChange()&&i.length===0)return;this.localChanges.push(r),this.changeID=r.getID();const a=this.changeID.getActorID(),u=[];i.length>0&&u.push({type:"local-change",source:Q.UndoRedo,value:{message:r.getMessage()||"",operations:i,actor:a,clientSeq:r.getID().getClientSeq(),serverSeq:r.getID().getServerSeq()},rawChange:this.isEnableDevtools()?r.toStruct():void 0}),r.hasPresenceChange()&&u.push({type:"presence-changed",source:Q.UndoRedo,value:{clientID:a,presence:this.getPresence(a)}}),this.publish(u)}getUndoStackForTest(){return this.internalHistory.getUndoStackForTest()}getRedoStackForTest(){return this.internalHistory.getRedoStackForTest()}broadcast(e,t,r){const i={type:"local-broadcast",value:{topic:e,payload:t},options:r};this.publish([i])}getVersionVector(){return this.changeID.getVersionVector()}}function Y1(n,e){let t=e;return{authInterceptor:s=>async o=>(n&&o.header.set("x-api-key",n),t&&o.header.set("authorization",t),await s(o)),setToken:s=>{t=s}}}const Q1="@yorkie-js/sdk",X1="0.6.6",dg={name:Q1,version:X1};function Z1(n){return e=>async t=>(n?t.header.set("x-yorkie-user-agent",n):t.header.set("x-yorkie-user-agent",dg.name+"/"+dg.version),await e(t))}const ek=n=>{try{if(JSON.stringify(n)===void 0)return!1}catch{return!1}return!0};var xa=(n=>(n.Manual="manual",n.Realtime="realtime",n.RealtimePushOnly="realtime-pushonly",n.RealtimeSyncOff="realtime-syncoff",n))(xa||{});const Bs={rpcAddr:"https://api.yorkie.dev",syncLoopDuration:50,retrySyncLoopDelay:1e3,reconnectStreamDelay:1e3},xu={maxRetries:1/0,initialRetryInterval:1e3,maxBackoff:2e4};class Ly{constructor(e){l(this,"id");l(this,"key");l(this,"metadata");l(this,"status");l(this,"attachmentMap");l(this,"apiKey");l(this,"authTokenInjector");l(this,"conditions");l(this,"syncLoopDuration");l(this,"reconnectStreamDelay");l(this,"retrySyncLoopDelay");l(this,"rpcClient");l(this,"setAuthToken");l(this,"taskQueue");l(this,"processing",!1);l(this,"keepalive",!1);e=e||Bs;const t=e.rpcAddr||Bs.rpcAddr;this.key=e.key||Py(),this.metadata=e.metadata||{},this.status="deactivated",this.attachmentMap=new Map,this.apiKey=e.apiKey||"",this.authTokenInjector=e.authTokenInjector,this.conditions={SyncLoop:!1,WatchLoop:!1},this.syncLoopDuration=e.syncLoopDuration??Bs.syncLoopDuration,this.reconnectStreamDelay=e.reconnectStreamDelay??Bs.reconnectStreamDelay,this.retrySyncLoopDelay=e.retrySyncLoopDelay??Bs.retrySyncLoopDelay;const{authInterceptor:r,setToken:i}=Y1(this.apiKey);this.setAuthToken=i,this.rpcClient=aS(DS,PS({baseUrl:t,interceptors:[r,Z1(e==null?void 0:e.userAgent)],fetch:(s,o)=>{const a={...o,keepalive:this.keepalive};return fetch(s,a)}})),this.taskQueue=[]}async activate(){if(this.isActive())return Promise.resolve();if(this.authTokenInjector){const e=await this.authTokenInjector();this.setAuthToken(e)}return this.enqueueTask(async()=>this.rpcClient.activateClient({clientKey:this.key,metadata:this.metadata},{headers:{"x-shard-key":this.apiKey}}).then(e=>{this.id=e.clientId,this.status="activated",this.runSyncLoop(),J.info(`[AC] c:"${this.getKey()}" activated, id:"${this.id}"`)}).catch(async e=>{throw J.error(`[AC] c:"${this.getKey()}" err :`,e),await this.handleConnectError(e),e}))}deactivate(e={keepalive:!1}){if(this.status==="deactivated")return Promise.resolve();const t=async()=>{try{await this.rpcClient.deactivateClient({clientId:this.id},{headers:{"x-shard-key":this.apiKey}}),this.deactivateInternal(),J.info(`[DC] c"${this.getKey()}" deactivated`)}catch(r){throw J.error(`[DC] c:"${this.getKey()}" err :`,r),await this.handleConnectError(r),r}};if(e.keepalive){this.keepalive=!0;const r=t();return this.keepalive=!1,r}return this.enqueueTask(t)}hasDocument(e){return this.attachmentMap.has(e)}attach(e,t={}){if(!this.isActive())throw new k(S.ErrClientNotActivated,`${this.key} is not active`);if(e.getStatus()!==Or.Detached)throw new k(S.ErrDocumentNotDetached,`${e.getKey()} is not detached`);e.setActor(this.id),e.update((s,o)=>o.set(t.initialPresence||{}));const r=e.subscribe("local-broadcast",async s=>{var d;const{topic:o,payload:a}=s.value,u=(d=s.options)==null?void 0:d.error,c=s.options;try{await this.broadcast(e.getKey(),o,a,c)}catch(h){h instanceof Error&&(u==null||u(h))}}),i=t.syncMode??"realtime";return this.enqueueTask(async()=>this.rpcClient.attachDocument({clientId:this.id,changePack:de.toChangePack(e.createChangePack())},{headers:{"x-shard-key":`${this.apiKey}/${e.getKey()}`}}).then(async s=>{const o=de.fromChangePack(s.changePack);if(e.applyChangePack(o),e.getStatus()===Or.Removed)return e;e.applyStatus(Or.Attached),this.attachmentMap.set(e.getKey(),new F1(this.reconnectStreamDelay,e,s.documentId,i,r)),i!=="manual"&&await this.runWatchLoop(e.getKey()),J.info(`[AD] c:"${this.getKey()}" attaches d:"${e.getKey()}"`);const a=e.getRootObject();if(t.initialRoot){const u=t.initialRoot;e.update(c=>{for(const[d,h]of Object.entries(u))if(!a.has(d)){const m=d;c[m]=h}})}return e}).catch(async s=>{throw J.error(`[AD] c:"${this.getKey()}" err :`,s),await this.handleConnectError(s),s}))}detach(e,t={keepalive:!1}){if(!this.isActive())throw new k(S.ErrClientNotActivated,`${this.key} is not active`);const r=this.attachmentMap.get(e.getKey());if(!r)throw new k(S.ErrDocumentNotAttached,`${e.getKey()} is not attached`);e.update((s,o)=>o.clear());const i=async()=>await this.rpcClient.detachDocument({clientId:this.id,documentId:r.docID,changePack:de.toChangePack(e.createChangePack()),removeIfNotAttached:t.removeIfNotAttached??!1},{headers:{"x-shard-key":`${this.apiKey}/${e.getKey()}`}}).then(s=>{const o=de.fromChangePack(s.changePack);return e.applyChangePack(o),e.getStatus()!==Or.Removed&&e.applyStatus(Or.Detached),this.detachInternal(e.getKey()),J.info(`[DD] c:"${this.getKey()}" detaches d:"${e.getKey()}"`),e}).catch(async s=>{throw J.error(`[DD] c:"${this.getKey()}" err :`,s),await this.handleConnectError(s),s});if(t.keepalive){this.keepalive=!0;const s=i();return this.keepalive=!1,s}return this.enqueueTask(i)}async changeSyncMode(e,t){if(!this.isActive())throw new k(S.ErrClientNotActivated,`${this.key} is not active`);const r=this.attachmentMap.get(e.getKey());if(!r)throw new k(S.ErrDocumentNotAttached,`${e.getKey()} is not attached`);const i=r.syncMode;return i===t?e:(r.changeSyncMode(t),t==="manual"?(r.cancelWatchStream(),e):(t==="realtime"&&(r.remoteChangeEventReceived=!0),i==="manual"&&await this.runWatchLoop(e.getKey()),e))}sync(e){if(!this.isActive())throw new k(S.ErrClientNotActivated,`${this.key} is not active`);if(e){const t=this.attachmentMap.get(e.getKey());if(!t)throw new k(S.ErrDocumentNotAttached,`${e.getKey()} is not attached`);return this.enqueueTask(async()=>this.syncInternal(t,"realtime").catch(async r=>{throw J.error(`[SY] c:"${this.getKey()}" err :`,r),await this.handleConnectError(r),r}))}return this.enqueueTask(async()=>{const t=[];for(const[,r]of this.attachmentMap)t.push(this.syncInternal(r,r.syncMode));return Promise.all(t).catch(async r=>{throw J.error(`[SY] c:"${this.getKey()}" err :`,r),await this.handleConnectError(r),r})})}remove(e){if(!this.isActive())throw new k(S.ErrClientNotActivated,`${this.key} is not active`);const t=this.attachmentMap.get(e.getKey());if(!t)throw new k(S.ErrDocumentNotAttached,`${e.getKey()} is not attached`);e.setActor(this.id);const r=de.toChangePack(e.createChangePack());return r.isRemoved=!0,this.enqueueTask(async()=>this.rpcClient.removeDocument({clientId:this.id,documentId:t.docID,changePack:r},{headers:{"x-shard-key":`${this.apiKey}/${e.getKey()}`}}).then(i=>{const s=de.fromChangePack(i.changePack);e.applyChangePack(s),this.detachInternal(e.getKey()),J.info(`[RD] c:"${this.getKey()}" removes d:"${e.getKey()}"`)}).catch(async i=>{throw J.error(`[RD] c:"${this.getKey()}" err :`,i),await this.handleConnectError(i),i}))}getID(){return this.id}getKey(){return this.key}isActive(){return this.status==="activated"}getStatus(){return this.status}getCondition(e){return this.conditions[e]}broadcast(e,t,r,i){if(!this.isActive())throw new k(S.ErrClientNotActivated,`${this.key} is not active`);const s=this.attachmentMap.get(e);if(!s)throw new k(S.ErrDocumentNotAttached,`${e} is not attached`);if(!ek(r))throw new k(S.ErrInvalidArgument,"payload is not serializable");const o=(i==null?void 0:i.maxRetries)??xu.maxRetries,a=xu.maxBackoff;let u=0;const c=h=>Math.min(xu.initialRetryInterval*2**h,a),d=async()=>this.enqueueTask(async()=>this.rpcClient.broadcast({clientId:this.id,documentId:s.docID,topic:t,payload:new TextEncoder().encode(JSON.stringify(r))},{headers:{"x-shard-key":`${this.apiKey}/${e}`}}).then(()=>{J.info(`[BC] c:"${this.getKey()}" broadcasts d:"${e}" t:"${t}"`)}).catch(async h=>{if(J.error(`[BC] c:"${this.getKey()}" err:`,h),await this.handleConnectError(h))if(h instanceof G&&Pr(h)===S.ErrUnauthenticated&&s.doc.publish([{type:Ee.AuthError,value:{reason:$s(h).reason,method:"Broadcast"}}]),u<o)u++,setTimeout(()=>d(),c(u-1)),J.info(`[BC] c:"${this.getKey()}" retry attempt ${u}/${o}`);else throw J.error(`[BC] c:"${this.getKey()}" exceeded maximum retry attempts`),h;else throw h}));return d()}runSyncLoop(){const e=()=>{if(!this.isActive()){J.debug(`[SL] c:"${this.getKey()}" exit sync loop`),this.conditions.SyncLoop=!1;return}const t=[];for(const[,r]of this.attachmentMap)r.needRealtimeSync()&&(r.remoteChangeEventReceived=!1,t.push(this.syncInternal(r,r.syncMode).catch(async i=>{throw i instanceof G&&Pr(i)===S.ErrUnauthenticated&&r.doc.publish([{type:Ee.AuthError,value:{reason:$s(i).reason,method:"PushPull"}}]),i})));Promise.all(t).then(()=>setTimeout(e,this.syncLoopDuration)).catch(async r=>{J.error(`[SL] c:"${this.getKey()}" sync failed:`,r),await this.handleConnectError(r)?setTimeout(e,this.retrySyncLoopDelay):this.conditions.SyncLoop=!1})};J.debug(`[SL] c:"${this.getKey()}" run sync loop`),this.conditions.SyncLoop=!0,e()}async runWatchLoop(e){const t=this.attachmentMap.get(e);if(!t)throw new k(S.ErrDocumentNotAttached,`${e} is not attached`);return this.conditions.WatchLoop=!0,t.runWatchLoop(r=>{if(!this.isActive())return this.conditions.WatchLoop=!1,Promise.reject(new k(S.ErrClientNotActivated,`${this.key} is not active`));const i=new AbortController,s=this.rpcClient.watchDocument({clientId:this.id,documentId:t.docID},{headers:{"x-shard-key":`${this.apiKey}/${e}`},signal:i.signal});return t.doc.publish([{type:Ee.ConnectionChanged,value:Gc.Connected}]),J.info(`[WD] c:"${this.getKey()}" watches d:"${e}"`),new Promise((o,a)=>{(async()=>{try{for await(const c of s)this.handleWatchDocumentsResponse(t,c),c.body.case==="initialization"&&o([s,i])}catch(c){t.doc.resetOnlineClients(),t.doc.publish([{type:Ee.Initialized,source:Q.Local,value:t.doc.getPresences()}]),t.doc.publish([{type:Ee.ConnectionChanged,value:Gc.Disconnected}]),J.debug(`[WD] c:"${this.getKey()}" unwatches`),await this.handleConnectError(c)?(c instanceof G&&Pr(c)===S.ErrUnauthenticated&&t.doc.publish([{type:Ee.AuthError,value:{reason:$s(c).reason,method:"WatchDocuments"}}]),r()):this.conditions.WatchLoop=!1,a(c)}})()})})}handleWatchDocumentsResponse(e,t){if(t.body.case==="event"&&t.body.value.type===wi.DOCUMENT_CHANGED){e.remoteChangeEventReceived=!0;return}e.doc.applyWatchStream(t)}deactivateInternal(){this.status="deactivated";for(const[e,t]of this.attachmentMap)this.detachInternal(e),t.doc.applyStatus(Or.Detached)}detachInternal(e){const t=this.attachmentMap.get(e);t&&(t.cancelWatchStream(),t.unsubscribeBroadcastEvent(),this.attachmentMap.delete(e))}syncInternal(e,t){const{doc:r,docID:i}=e,s=r.createChangePack();return this.rpcClient.pushPullChanges({clientId:this.id,documentId:i,changePack:de.toChangePack(s),pushOnly:t==="realtime-pushonly"},{headers:{"x-shard-key":`${this.apiKey}/${r.getKey()}`}}).then(o=>{const a=de.fromChangePack(o.changePack);if(a.hasChanges()&&(e.syncMode==="realtime-pushonly"||e.syncMode==="realtime-syncoff"))return r;r.applyChangePack(a),e.doc.publish([{type:Ee.SyncStatusChanged,value:Yc.Synced}]),r.getStatus()===Or.Removed&&this.detachInternal(r.getKey());const u=r.getKey(),c=a.getChangeSize();return J.info(`[PP] c:"${this.getKey()}" sync d:"${u}", push:${s.getChangeSize()} pull:${c} cp:${a.getCheckpoint().toTestString()}`),r}).catch(async o=>{throw r.publish([{type:Ee.SyncStatusChanged,value:Yc.SyncFailed}]),J.error(`[PP] c:"${this.getKey()}" err :`,o),o})}async handleConnectError(e){if(!(e instanceof G))return!1;if(e.code===V.Canceled||e.code===V.Unknown||e.code===V.ResourceExhausted||e.code===V.Unavailable)return!0;if(Pr(e)===S.ErrUnauthenticated){if(this.authTokenInjector){const t=await this.authTokenInjector($s(e).reason);this.setAuthToken(t)}return!0}return Pr(e)===S.ErrTooManySubscribers?(J.error(`[WD] c:"${this.getKey()}" err :`,e.rawMessage),!0):(Pr(e)===S.ErrTooManyAttachments||(Pr(e)===S.ErrClientNotActivated||Pr(e)===S.ErrClientNotFound)&&this.deactivateInternal(),!1)}enqueueTask(e){return new Promise((t,r)=>{this.taskQueue.push(()=>e().then(t).catch(r)),this.processing||this.processNext()})}async processNext(){if(this.taskQueue.length===0){this.processing=!1;return}try{this.processing=!0,await this.taskQueue.shift()()}catch{J.error(`[TQ] c:"${this.getKey()}" process failed, id:"${this.id}"`)}this.processNext()}}const By={Client:Ly,Document:Ry,IntType:an.IntegerCnt,LongType:an.LongCnt};typeof globalThis<"u"&&(globalThis.yorkie={Client:Ly,Document:Ry,Primitive:ce,Text:cd,Counter:fd,Tree:hd,LogLevel:Ue,setLogLevel:M1,IntType:an.IntegerCnt,LongType:an.LongCnt});class tk{constructor(e,t){this.x=e,this.y=t,this.lifetime=0}}const nk=({xPos:n,yPos:e})=>{const[t,r]=je.useState([]),i=je.useRef(null),[s,o]=je.useState([]),a=(u,c)=>{const d=new tk(u,c);s.push(d),o(s),t.push(d),r(t)};return je.useEffect(()=>{const c=i.current.getContext("2d"),d=()=>{c.clearRect(0,0,c.canvas.width,c.canvas.height);const h=.7*(1*4e3)/60;for(let m=0;m<s.length;++m){const y=s[m];let w;if(s[m-1]!==void 0?w=s[m-1]:w=y,y.lifetime+=1,y.lifetime>h)s.shift();else{c.lineWidth=5,c.lineJoin="round";const T=0,P=0,p=0;c.strokeStyle=`rgb(${T},${P},${p})`,c.beginPath(),c.moveTo(w.x,w.y),c.lineTo(y.x,y.y),c.stroke(),c.closePath()}}requestAnimationFrame(d)};d()},[s]),je.useEffect(()=>{a(n,e)},[n,e]),ue.jsx("canvas",{className:"pen-cursor-canvas",ref:i,width:document.body.clientWidth,height:document.body.clientHeight})},rk="_goUp0_1lnal_1",ik="_goUpAnimation0_1lnal_1",sk="_fadeOut_1lnal_1",ok="_goUp1_1lnal_16",ak="_goUpAnimation1_1lnal_1",lk="_goUp2_1lnal_31",uk="_goUpAnimation2_1lnal_1",ck="_leftRight0_1lnal_46",fk="_leftRightAnimation0_1lnal_1",dk="_leftRight1_1lnal_60",hk="_leftRightAnimation1_1lnal_1",gk="_leftRight2_1lnal_74",mk="_leftRightAnimation2_1lnal_1",Cu={goUp0:rk,goUpAnimation0:ik,fadeOut:sk,goUp1:ok,goUpAnimation1:ak,goUp2:lk,goUpAnimation2:uk,leftRight0:ck,leftRightAnimation0:fk,leftRight1:dk,leftRightAnimation1:hk,leftRight2:gk,leftRightAnimation2:mk};function pk({x:n,y:e,timestamp:t,selectedCursorShape:r}){return ue.jsx("div",{className:"single-animation-container",children:ue.jsx("div",{className:`absolute select-none pointer-events-none ${Cu.disappear} text-${t%5+2}xl ${Cu["goUp"+t%3]}`,style:{left:n,top:e},children:ue.jsx("div",{className:Cu["leftRight"+t%3],children:ue.jsx("div",{className:"transform -translate-x-1/2 -translate-y-1/2",children:ue.jsx("img",{src:`./icons/icon_${r}.svg`})})})})})}function hg(n,e){const t=je.useRef(n);je.useEffect(()=>{t.current=n},[n]),je.useEffect(()=>{function r(){t.current()}if(e!==null){let i=setInterval(r,e);return()=>clearInterval(i)}},[e])}const yk=({pointerDown:n,xPos:e,yPos:t,selectedCursorShape:r})=>{const[i,s]=je.useState([]),o=100;return hg(()=>{s(a=>a.filter(u=>u.timestamp>Date.now()-4e3))},1e3),hg(()=>{n&&s(a=>a.concat([{point:{x:e,y:t},timestamp:Date.now()}]))},o),ue.jsx("div",{style:{transform:`translateX(${e}px) translateY(${t}px)`},children:i.map(a=>ue.jsx(pk,{x:a.point.x,y:a.point.y,timestamp:a.timestamp,selectedCursorShape:r},a.timestamp.toString()))})},vk=({selectedCursorShape:n,x:e,y:t,pointerDown:r})=>ue.jsxs(ue.Fragment,{children:[ue.jsx("img",{src:`./icons/icon_${n}.svg`,className:`${n}-cursor`,style:{transform:`translate3d(${e}px, ${t}px, 0)`}}),(n==="heart"||n==="thumbs")&&ue.jsx(yk,{pointerDown:r,xPos:e,yPos:t,selectedCursorShape:n}),n==="pen"&&r&&ue.jsx(nk,{xPos:e,yPos:t})]}),wk=({handleCursorShapeSelect:n,clientsLength:e})=>{const[t,r]=je.useState("cursor"),i=["heart","thumbs","pen","cursor"];return ue.jsxs("div",{className:"cursor-selector-container",children:[ue.jsx("div",{className:"cursor-selections-container",children:i.map(s=>ue.jsx("img",{onClick:()=>{n(s),r(s)},className:`${t===s?"cursor-shape-selected":"cursor-shape-not-selected"}`,src:`./icons/icon_${s}.svg`},s))}),ue.jsx("div",{className:"num-users-container",children:ue.jsx("p",{children:e!==1?`${e} users are here`:"1 user here"})})]})},Nu=new By.Client("https://api.yorkie.dev",{apiKey:"cedaovjuioqlk4pjqn6g"}),oi=new By.Document("simultaneous-cursors",{enableDevtools:!0}),Sk=()=>{const[n,e]=je.useState([]),t=r=>{oi.update((i,s)=>{s.set({cursorShape:r})})};return je.useEffect(()=>{(async()=>{await Nu.activate(),oi.subscribe("presence",a=>{e(oi.getPresences())}),await Nu.attach(oi,{initialPresence:{cursorShape:"cursor",cursor:{xPos:0,yPos:0},pointerDown:!1}}),window.addEventListener("beforeunload",()=>{Nu.deactivate({keepalive:!0})})})();const i=()=>{oi.update((a,u)=>{u.set({pointerDown:!1})})},s=()=>{oi.update((a,u)=>{u.set({pointerDown:!0})})},o=a=>{oi.update((u,c)=>{c.set({cursor:{xPos:a.clientX,yPos:a.clientY}})})};return window.addEventListener("mousedown",s),window.addEventListener("mouseup",i),window.addEventListener("mousemove",o),()=>{window.removeEventListener("mousedown",s),window.removeEventListener("mouseup",i),window.removeEventListener("mousemove",o)}},[]),ue.jsxs("div",{className:"general-container",children:[n.map(({clientID:r,presence:{cursorShape:i,cursor:s,pointerDown:o}})=>s?ue.jsx(vk,{selectedCursorShape:i,x:s.xPos,y:s.yPos,pointerDown:o},r):null),ue.jsx(wk,{handleCursorShapeSelect:t,clientsLength:n.length})]})};Pu.createRoot(document.getElementById("root")).render(ue.jsx(Sk,{}));
