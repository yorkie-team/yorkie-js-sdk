var _y=Object.defineProperty;var Hy=(n,e,t)=>e in n?_y(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var l=(n,e,t)=>Hy(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();var Eg={exports:{}},xl={},Ag={exports:{}},W={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lo=Symbol.for("react.element"),Gy=Symbol.for("react.portal"),Yy=Symbol.for("react.fragment"),Qy=Symbol.for("react.strict_mode"),Xy=Symbol.for("react.profiler"),Zy=Symbol.for("react.provider"),ev=Symbol.for("react.context"),tv=Symbol.for("react.forward_ref"),nv=Symbol.for("react.suspense"),rv=Symbol.for("react.memo"),iv=Symbol.for("react.lazy"),Id=Symbol.iterator;function sv(n){return n===null||typeof n!="object"?null:(n=Id&&n[Id]||n["@@iterator"],typeof n=="function"?n:null)}var xg={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ng=Object.assign,Pg={};function As(n,e,t){this.props=n,this.context=e,this.refs=Pg,this.updater=t||xg}As.prototype.isReactComponent={};As.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};As.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function Cg(){}Cg.prototype=As.prototype;function sf(n,e,t){this.props=n,this.context=e,this.refs=Pg,this.updater=t||xg}var of=sf.prototype=new Cg;of.constructor=sf;Ng(of,As.prototype);of.isPureReactComponent=!0;var Ed=Array.isArray,Dg=Object.prototype.hasOwnProperty,af={current:null},Og={key:!0,ref:!0,__self:!0,__source:!0};function Rg(n,e,t){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Dg.call(e,r)&&!Og.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=t;else if(1<a){for(var u=Array(a),c=0;c<a;c++)u[c]=arguments[c+2];i.children=u}if(n&&n.defaultProps)for(r in a=n.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Lo,type:n,key:s,ref:o,props:i,_owner:af.current}}function ov(n,e){return{$$typeof:Lo,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function lf(n){return typeof n=="object"&&n!==null&&n.$$typeof===Lo}function av(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var Ad=/\/+/g;function Ql(n,e){return typeof n=="object"&&n!==null&&n.key!=null?av(""+n.key):e.toString(36)}function ha(n,e,t,r,i){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case Lo:case Gy:o=!0}}if(o)return o=n,i=i(o),n=r===""?"."+Ql(o,0):r,Ed(i)?(t="",n!=null&&(t=n.replace(Ad,"$&/")+"/"),ha(i,e,t,"",function(c){return c})):i!=null&&(lf(i)&&(i=ov(i,t+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Ad,"$&/")+"/")+n)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Ed(n))for(var a=0;a<n.length;a++){s=n[a];var u=r+Ql(s,a);o+=ha(s,e,t,u,i)}else if(u=sv(n),typeof u=="function")for(n=u.call(n),a=0;!(s=n.next()).done;)s=s.value,u=r+Ql(s,a++),o+=ha(s,e,t,u,i);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ko(n,e,t){if(n==null)return n;var r=[],i=0;return ha(n,r,"","",function(s){return e.call(t,s,i++)}),r}function lv(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Me={current:null},ga={transition:null},uv={ReactCurrentDispatcher:Me,ReactCurrentBatchConfig:ga,ReactCurrentOwner:af};W.Children={map:Ko,forEach:function(n,e,t){Ko(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return Ko(n,function(){e++}),e},toArray:function(n){return Ko(n,function(e){return e})||[]},only:function(n){if(!lf(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};W.Component=As;W.Fragment=Yy;W.Profiler=Xy;W.PureComponent=sf;W.StrictMode=Qy;W.Suspense=nv;W.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=uv;W.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=Ng({},n.props),i=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=af.current),e.key!==void 0&&(i=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(u in e)Dg.call(e,u)&&!Og.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&a!==void 0?a[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=t;else if(1<u){a=Array(u);for(var c=0;c<u;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Lo,type:n.type,key:i,ref:s,props:r,_owner:o}};W.createContext=function(n){return n={$$typeof:ev,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:Zy,_context:n},n.Consumer=n};W.createElement=Rg;W.createFactory=function(n){var e=Rg.bind(null,n);return e.type=n,e};W.createRef=function(){return{current:null}};W.forwardRef=function(n){return{$$typeof:tv,render:n}};W.isValidElement=lf;W.lazy=function(n){return{$$typeof:iv,_payload:{_status:-1,_result:n},_init:lv}};W.memo=function(n,e){return{$$typeof:rv,type:n,compare:e===void 0?null:e}};W.startTransition=function(n){var e=ga.transition;ga.transition={};try{n()}finally{ga.transition=e}};W.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};W.useCallback=function(n,e){return Me.current.useCallback(n,e)};W.useContext=function(n){return Me.current.useContext(n)};W.useDebugValue=function(){};W.useDeferredValue=function(n){return Me.current.useDeferredValue(n)};W.useEffect=function(n,e){return Me.current.useEffect(n,e)};W.useId=function(){return Me.current.useId()};W.useImperativeHandle=function(n,e,t){return Me.current.useImperativeHandle(n,e,t)};W.useInsertionEffect=function(n,e){return Me.current.useInsertionEffect(n,e)};W.useLayoutEffect=function(n,e){return Me.current.useLayoutEffect(n,e)};W.useMemo=function(n,e){return Me.current.useMemo(n,e)};W.useReducer=function(n,e,t){return Me.current.useReducer(n,e,t)};W.useRef=function(n){return Me.current.useRef(n)};W.useState=function(n){return Me.current.useState(n)};W.useSyncExternalStore=function(n,e,t){return Me.current.useSyncExternalStore(n,e,t)};W.useTransition=function(){return Me.current.useTransition()};W.version="18.2.0";Ag.exports=W;var Ve=Ag.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cv=Ve,fv=Symbol.for("react.element"),dv=Symbol.for("react.fragment"),hv=Object.prototype.hasOwnProperty,gv=cv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,mv={key:!0,ref:!0,__self:!0,__source:!0};function Lg(n,e,t){var r,i={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)hv.call(e,r)&&!mv.hasOwnProperty(r)&&(i[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:fv,type:n,key:s,ref:o,props:i,_owner:gv.current}}xl.Fragment=dv;xl.jsx=Lg;xl.jsxs=Lg;Eg.exports=xl;var ue=Eg.exports,Lu={},Bg={exports:{}},ot={},bg={exports:{}},zg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(B,j){var V=B.length;B.push(j);e:for(;0<V;){var fe=V-1>>>1,Se=B[fe];if(0<i(Se,j))B[fe]=j,B[V]=Se,V=fe;else break e}}function t(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var j=B[0],V=B.pop();if(V!==j){B[0]=V;e:for(var fe=0,Se=B.length,Vo=Se>>>1;fe<Vo;){var ui=2*(fe+1)-1,Yl=B[ui],ci=ui+1,qo=B[ci];if(0>i(Yl,V))ci<Se&&0>i(qo,Yl)?(B[fe]=qo,B[ci]=V,fe=ci):(B[fe]=Yl,B[ui]=V,fe=ui);else if(ci<Se&&0>i(qo,V))B[fe]=qo,B[ci]=V,fe=ci;else break e}}return j}function i(B,j){var V=B.sortIndex-j.sortIndex;return V!==0?V:B.id-j.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var u=[],c=[],d=1,h=null,g=3,p=!1,k=!1,T=!1,P=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(B){for(var j=t(c);j!==null;){if(j.callback===null)r(c);else if(j.startTime<=B)r(c),j.sortIndex=j.expirationTime,e(u,j);else break;j=t(c)}}function E(B){if(T=!1,v(B),!k)if(t(u)!==null)k=!0,Hl(C);else{var j=t(c);j!==null&&Gl(E,j.startTime-B)}}function C(B,j){k=!1,T&&(T=!1,y(R),R=-1),p=!0;var V=g;try{for(v(j),h=t(u);h!==null&&(!(h.expirationTime>j)||B&&!be());){var fe=h.callback;if(typeof fe=="function"){h.callback=null,g=h.priorityLevel;var Se=fe(h.expirationTime<=j);j=n.unstable_now(),typeof Se=="function"?h.callback=Se:h===t(u)&&r(u),v(j)}else r(u);h=t(u)}if(h!==null)var Vo=!0;else{var ui=t(c);ui!==null&&Gl(E,ui.startTime-j),Vo=!1}return Vo}finally{h=null,g=V,p=!1}}var N=!1,D=null,R=-1,$=5,M=-1;function be(){return!(n.unstable_now()-M<$)}function li(){if(D!==null){var B=n.unstable_now();M=B;var j=!0;try{j=D(!0,B)}finally{j?Ps():(N=!1,D=null)}}else N=!1}var Ps;if(typeof m=="function")Ps=function(){m(li)};else if(typeof MessageChannel<"u"){var Td=new MessageChannel,Wy=Td.port2;Td.port1.onmessage=li,Ps=function(){Wy.postMessage(null)}}else Ps=function(){P(li,0)};function Hl(B){D=B,N||(N=!0,Ps())}function Gl(B,j){R=P(function(){B(n.unstable_now())},j)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(B){B.callback=null},n.unstable_continueExecution=function(){k||p||(k=!0,Hl(C))},n.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<B?Math.floor(1e3/B):5},n.unstable_getCurrentPriorityLevel=function(){return g},n.unstable_getFirstCallbackNode=function(){return t(u)},n.unstable_next=function(B){switch(g){case 1:case 2:case 3:var j=3;break;default:j=g}var V=g;g=j;try{return B()}finally{g=V}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(B,j){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var V=g;g=B;try{return j()}finally{g=V}},n.unstable_scheduleCallback=function(B,j,V){var fe=n.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?fe+V:fe):V=fe,B){case 1:var Se=-1;break;case 2:Se=250;break;case 5:Se=1073741823;break;case 4:Se=1e4;break;default:Se=5e3}return Se=V+Se,B={id:d++,callback:j,priorityLevel:B,startTime:V,expirationTime:Se,sortIndex:-1},V>fe?(B.sortIndex=V,e(c,B),t(u)===null&&B===t(c)&&(T?(y(R),R=-1):T=!0,Gl(E,V-fe))):(B.sortIndex=Se,e(u,B),k||p||(k=!0,Hl(C))),B},n.unstable_shouldYield=be,n.unstable_wrapCallback=function(B){var j=g;return function(){var V=g;g=j;try{return B.apply(this,arguments)}finally{g=V}}}})(zg);bg.exports=zg;var pv=bg.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fg=Ve,st=pv;function x(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Jg=new Set,so={};function Ri(n,e){ls(n,e),ls(n+"Capture",e)}function ls(n,e){for(so[n]=e,n=0;n<e.length;n++)Jg.add(e[n])}var Ir=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Bu=Object.prototype.hasOwnProperty,yv=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,xd={},Nd={};function vv(n){return Bu.call(Nd,n)?!0:Bu.call(xd,n)?!1:yv.test(n)?Nd[n]=!0:(xd[n]=!0,!1)}function wv(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function Sv(n,e,t,r){if(e===null||typeof e>"u"||wv(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function $e(n,e,t,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Ne={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Ne[n]=new $e(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];Ne[e]=new $e(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){Ne[n]=new $e(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Ne[n]=new $e(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Ne[n]=new $e(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){Ne[n]=new $e(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){Ne[n]=new $e(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){Ne[n]=new $e(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){Ne[n]=new $e(n,5,!1,n.toLowerCase(),null,!1,!1)});var uf=/[\-:]([a-z])/g;function cf(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(uf,cf);Ne[e]=new $e(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(uf,cf);Ne[e]=new $e(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(uf,cf);Ne[e]=new $e(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){Ne[n]=new $e(n,1,!1,n.toLowerCase(),null,!1,!1)});Ne.xlinkHref=new $e("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){Ne[n]=new $e(n,1,!1,n.toLowerCase(),null,!0,!0)});function ff(n,e,t,r){var i=Ne.hasOwnProperty(e)?Ne[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Sv(e,t,i,r)&&(t=null),r||i===null?vv(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):i.mustUseProperty?n[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,r=i.attributeNamespace,t===null?n.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var Cr=Fg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Wo=Symbol.for("react.element"),Mi=Symbol.for("react.portal"),$i=Symbol.for("react.fragment"),df=Symbol.for("react.strict_mode"),bu=Symbol.for("react.profiler"),Mg=Symbol.for("react.provider"),$g=Symbol.for("react.context"),hf=Symbol.for("react.forward_ref"),zu=Symbol.for("react.suspense"),Fu=Symbol.for("react.suspense_list"),gf=Symbol.for("react.memo"),zr=Symbol.for("react.lazy"),Ug=Symbol.for("react.offscreen"),Pd=Symbol.iterator;function Cs(n){return n===null||typeof n!="object"?null:(n=Pd&&n[Pd]||n["@@iterator"],typeof n=="function"?n:null)}var se=Object.assign,Xl;function $s(n){if(Xl===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);Xl=e&&e[1]||""}return`
`+Xl+n}var Zl=!1;function eu(n,e){if(!n||Zl)return"";Zl=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){r=c}n.call(e.prototype)}else{try{throw Error()}catch(c){r=c}n()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var u=`
`+i[o].replace(" at new "," at ");return n.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",n.displayName)),u}while(1<=o&&0<=a);break}}}finally{Zl=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?$s(n):""}function kv(n){switch(n.tag){case 5:return $s(n.type);case 16:return $s("Lazy");case 13:return $s("Suspense");case 19:return $s("SuspenseList");case 0:case 2:case 15:return n=eu(n.type,!1),n;case 11:return n=eu(n.type.render,!1),n;case 1:return n=eu(n.type,!0),n;default:return""}}function Ju(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case $i:return"Fragment";case Mi:return"Portal";case bu:return"Profiler";case df:return"StrictMode";case zu:return"Suspense";case Fu:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case $g:return(n.displayName||"Context")+".Consumer";case Mg:return(n._context.displayName||"Context")+".Provider";case hf:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case gf:return e=n.displayName||null,e!==null?e:Ju(n.type)||"Memo";case zr:e=n._payload,n=n._init;try{return Ju(n(e))}catch{}}return null}function Tv(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ju(e);case 8:return e===df?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ti(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function jg(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Iv(n){var e=jg(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function _o(n){n._valueTracker||(n._valueTracker=Iv(n))}function Vg(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=jg(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function Ra(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Mu(n,e){var t=e.checked;return se({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function Cd(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=ti(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function qg(n,e){e=e.checked,e!=null&&ff(n,"checked",e,!1)}function $u(n,e){qg(n,e);var t=ti(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?Uu(n,e.type,t):e.hasOwnProperty("defaultValue")&&Uu(n,e.type,ti(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function Dd(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function Uu(n,e,t){(e!=="number"||Ra(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var Us=Array.isArray;function Zi(n,e,t,r){if(n=n.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<n.length;t++)i=e.hasOwnProperty("$"+n[t].value),n[t].selected!==i&&(n[t].selected=i),i&&r&&(n[t].defaultSelected=!0)}else{for(t=""+ti(t),e=null,i=0;i<n.length;i++){if(n[i].value===t){n[i].selected=!0,r&&(n[i].defaultSelected=!0);return}e!==null||n[i].disabled||(e=n[i])}e!==null&&(e.selected=!0)}}function ju(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(x(91));return se({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Od(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(x(92));if(Us(t)){if(1<t.length)throw Error(x(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:ti(t)}}function Kg(n,e){var t=ti(e.value),r=ti(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function Rd(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function Wg(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Vu(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?Wg(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Ho,_g=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,i){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,i)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(Ho=Ho||document.createElement("div"),Ho.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ho.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function oo(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var Ks={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ev=["Webkit","ms","Moz","O"];Object.keys(Ks).forEach(function(n){Ev.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),Ks[e]=Ks[n]})});function Hg(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Ks.hasOwnProperty(n)&&Ks[n]?(""+e).trim():e+"px"}function Gg(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,i=Hg(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,i):n[t]=i}}var Av=se({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function qu(n,e){if(e){if(Av[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(x(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(x(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(x(61))}if(e.style!=null&&typeof e.style!="object")throw Error(x(62))}}function Ku(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wu=null;function mf(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var _u=null,es=null,ts=null;function Ld(n){if(n=zo(n)){if(typeof _u!="function")throw Error(x(280));var e=n.stateNode;e&&(e=Ol(e),_u(n.stateNode,n.type,e))}}function Yg(n){es?ts?ts.push(n):ts=[n]:es=n}function Qg(){if(es){var n=es,e=ts;if(ts=es=null,Ld(n),e)for(n=0;n<e.length;n++)Ld(e[n])}}function Xg(n,e){return n(e)}function Zg(){}var tu=!1;function em(n,e,t){if(tu)return n(e,t);tu=!0;try{return Xg(n,e,t)}finally{tu=!1,(es!==null||ts!==null)&&(Zg(),Qg())}}function ao(n,e){var t=n.stateNode;if(t===null)return null;var r=Ol(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(x(231,e,typeof t));return t}var Hu=!1;if(Ir)try{var Ds={};Object.defineProperty(Ds,"passive",{get:function(){Hu=!0}}),window.addEventListener("test",Ds,Ds),window.removeEventListener("test",Ds,Ds)}catch{Hu=!1}function xv(n,e,t,r,i,s,o,a,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(d){this.onError(d)}}var Ws=!1,La=null,Ba=!1,Gu=null,Nv={onError:function(n){Ws=!0,La=n}};function Pv(n,e,t,r,i,s,o,a,u){Ws=!1,La=null,xv.apply(Nv,arguments)}function Cv(n,e,t,r,i,s,o,a,u){if(Pv.apply(this,arguments),Ws){if(Ws){var c=La;Ws=!1,La=null}else throw Error(x(198));Ba||(Ba=!0,Gu=c)}}function Li(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function tm(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function Bd(n){if(Li(n)!==n)throw Error(x(188))}function Dv(n){var e=n.alternate;if(!e){if(e=Li(n),e===null)throw Error(x(188));return e!==n?null:n}for(var t=n,r=e;;){var i=t.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){t=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===t)return Bd(i),n;if(s===r)return Bd(i),e;s=s.sibling}throw Error(x(188))}if(t.return!==r.return)t=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===t){o=!0,t=i,r=s;break}if(a===r){o=!0,r=i,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,r=i;break}if(a===r){o=!0,r=s,t=i;break}a=a.sibling}if(!o)throw Error(x(189))}}if(t.alternate!==r)throw Error(x(190))}if(t.tag!==3)throw Error(x(188));return t.stateNode.current===t?n:e}function nm(n){return n=Dv(n),n!==null?rm(n):null}function rm(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=rm(n);if(e!==null)return e;n=n.sibling}return null}var im=st.unstable_scheduleCallback,bd=st.unstable_cancelCallback,Ov=st.unstable_shouldYield,Rv=st.unstable_requestPaint,ge=st.unstable_now,Lv=st.unstable_getCurrentPriorityLevel,pf=st.unstable_ImmediatePriority,sm=st.unstable_UserBlockingPriority,ba=st.unstable_NormalPriority,Bv=st.unstable_LowPriority,om=st.unstable_IdlePriority,Nl=null,rn=null;function bv(n){if(rn&&typeof rn.onCommitFiberRoot=="function")try{rn.onCommitFiberRoot(Nl,n,void 0,(n.current.flags&128)===128)}catch{}}var Jt=Math.clz32?Math.clz32:Jv,zv=Math.log,Fv=Math.LN2;function Jv(n){return n>>>=0,n===0?32:31-(zv(n)/Fv|0)|0}var Go=64,Yo=4194304;function js(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function za(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,i=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~i;a!==0?r=js(a):(s&=o,s!==0&&(r=js(s)))}else o=t&~i,o!==0?r=js(o):s!==0&&(r=js(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-Jt(e),i=1<<t,r|=n[t],e&=~i;return r}function Mv(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $v(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,i=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-Jt(s),a=1<<o,u=i[o];u===-1?(!(a&t)||a&r)&&(i[o]=Mv(a,e)):u<=e&&(n.expiredLanes|=a),s&=~a}}function Yu(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function am(){var n=Go;return Go<<=1,!(Go&4194240)&&(Go=64),n}function nu(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function Bo(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-Jt(e),n[e]=t}function Uv(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var i=31-Jt(t),s=1<<i;e[i]=0,r[i]=-1,n[i]=-1,t&=~s}}function yf(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-Jt(t),i=1<<r;i&e|n[r]&e&&(n[r]|=e),t&=~i}}var Y=0;function lm(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var um,vf,cm,fm,dm,Qu=!1,Qo=[],qr=null,Kr=null,Wr=null,lo=new Map,uo=new Map,Jr=[],jv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function zd(n,e){switch(n){case"focusin":case"focusout":qr=null;break;case"dragenter":case"dragleave":Kr=null;break;case"mouseover":case"mouseout":Wr=null;break;case"pointerover":case"pointerout":lo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":uo.delete(e.pointerId)}}function Os(n,e,t,r,i,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=zo(e),e!==null&&vf(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),n)}function Vv(n,e,t,r,i){switch(e){case"focusin":return qr=Os(qr,n,e,t,r,i),!0;case"dragenter":return Kr=Os(Kr,n,e,t,r,i),!0;case"mouseover":return Wr=Os(Wr,n,e,t,r,i),!0;case"pointerover":var s=i.pointerId;return lo.set(s,Os(lo.get(s)||null,n,e,t,r,i)),!0;case"gotpointercapture":return s=i.pointerId,uo.set(s,Os(uo.get(s)||null,n,e,t,r,i)),!0}return!1}function hm(n){var e=pi(n.target);if(e!==null){var t=Li(e);if(t!==null){if(e=t.tag,e===13){if(e=tm(t),e!==null){n.blockedOn=e,dm(n.priority,function(){cm(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function ma(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=Xu(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);Wu=r,t.target.dispatchEvent(r),Wu=null}else return e=zo(t),e!==null&&vf(e),n.blockedOn=t,!1;e.shift()}return!0}function Fd(n,e,t){ma(n)&&t.delete(e)}function qv(){Qu=!1,qr!==null&&ma(qr)&&(qr=null),Kr!==null&&ma(Kr)&&(Kr=null),Wr!==null&&ma(Wr)&&(Wr=null),lo.forEach(Fd),uo.forEach(Fd)}function Rs(n,e){n.blockedOn===e&&(n.blockedOn=null,Qu||(Qu=!0,st.unstable_scheduleCallback(st.unstable_NormalPriority,qv)))}function co(n){function e(i){return Rs(i,n)}if(0<Qo.length){Rs(Qo[0],n);for(var t=1;t<Qo.length;t++){var r=Qo[t];r.blockedOn===n&&(r.blockedOn=null)}}for(qr!==null&&Rs(qr,n),Kr!==null&&Rs(Kr,n),Wr!==null&&Rs(Wr,n),lo.forEach(e),uo.forEach(e),t=0;t<Jr.length;t++)r=Jr[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<Jr.length&&(t=Jr[0],t.blockedOn===null);)hm(t),t.blockedOn===null&&Jr.shift()}var ns=Cr.ReactCurrentBatchConfig,Fa=!0;function Kv(n,e,t,r){var i=Y,s=ns.transition;ns.transition=null;try{Y=1,wf(n,e,t,r)}finally{Y=i,ns.transition=s}}function Wv(n,e,t,r){var i=Y,s=ns.transition;ns.transition=null;try{Y=4,wf(n,e,t,r)}finally{Y=i,ns.transition=s}}function wf(n,e,t,r){if(Fa){var i=Xu(n,e,t,r);if(i===null)du(n,e,r,Ja,t),zd(n,r);else if(Vv(i,n,e,t,r))r.stopPropagation();else if(zd(n,r),e&4&&-1<jv.indexOf(n)){for(;i!==null;){var s=zo(i);if(s!==null&&um(s),s=Xu(n,e,t,r),s===null&&du(n,e,r,Ja,t),s===i)break;i=s}i!==null&&r.stopPropagation()}else du(n,e,r,null,t)}}var Ja=null;function Xu(n,e,t,r){if(Ja=null,n=mf(r),n=pi(n),n!==null)if(e=Li(n),e===null)n=null;else if(t=e.tag,t===13){if(n=tm(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return Ja=n,null}function gm(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Lv()){case pf:return 1;case sm:return 4;case ba:case Bv:return 16;case om:return 536870912;default:return 16}default:return 16}}var $r=null,Sf=null,pa=null;function mm(){if(pa)return pa;var n,e=Sf,t=e.length,r,i="value"in $r?$r.value:$r.textContent,s=i.length;for(n=0;n<t&&e[n]===i[n];n++);var o=t-n;for(r=1;r<=o&&e[t-r]===i[s-r];r++);return pa=i.slice(n,1<r?1-r:void 0)}function ya(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function Xo(){return!0}function Jd(){return!1}function at(n){function e(t,r,i,s,o){this._reactName=t,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Xo:Jd,this.isPropagationStopped=Jd,this}return se(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=Xo)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=Xo)},persist:function(){},isPersistent:Xo}),e}var xs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},kf=at(xs),bo=se({},xs,{view:0,detail:0}),_v=at(bo),ru,iu,Ls,Pl=se({},bo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tf,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Ls&&(Ls&&n.type==="mousemove"?(ru=n.screenX-Ls.screenX,iu=n.screenY-Ls.screenY):iu=ru=0,Ls=n),ru)},movementY:function(n){return"movementY"in n?n.movementY:iu}}),Md=at(Pl),Hv=se({},Pl,{dataTransfer:0}),Gv=at(Hv),Yv=se({},bo,{relatedTarget:0}),su=at(Yv),Qv=se({},xs,{animationName:0,elapsedTime:0,pseudoElement:0}),Xv=at(Qv),Zv=se({},xs,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),ew=at(Zv),tw=se({},xs,{data:0}),$d=at(tw),nw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},iw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function sw(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=iw[n])?!!e[n]:!1}function Tf(){return sw}var ow=se({},bo,{key:function(n){if(n.key){var e=nw[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=ya(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?rw[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tf,charCode:function(n){return n.type==="keypress"?ya(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?ya(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),aw=at(ow),lw=se({},Pl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ud=at(lw),uw=se({},bo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tf}),cw=at(uw),fw=se({},xs,{propertyName:0,elapsedTime:0,pseudoElement:0}),dw=at(fw),hw=se({},Pl,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),gw=at(hw),mw=[9,13,27,32],If=Ir&&"CompositionEvent"in window,_s=null;Ir&&"documentMode"in document&&(_s=document.documentMode);var pw=Ir&&"TextEvent"in window&&!_s,pm=Ir&&(!If||_s&&8<_s&&11>=_s),jd=" ",Vd=!1;function ym(n,e){switch(n){case"keyup":return mw.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vm(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ui=!1;function yw(n,e){switch(n){case"compositionend":return vm(e);case"keypress":return e.which!==32?null:(Vd=!0,jd);case"textInput":return n=e.data,n===jd&&Vd?null:n;default:return null}}function vw(n,e){if(Ui)return n==="compositionend"||!If&&ym(n,e)?(n=mm(),pa=Sf=$r=null,Ui=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return pm&&e.locale!=="ko"?null:e.data;default:return null}}var ww={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qd(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!ww[n.type]:e==="textarea"}function wm(n,e,t,r){Yg(r),e=Ma(e,"onChange"),0<e.length&&(t=new kf("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var Hs=null,fo=null;function Sw(n){Dm(n,0)}function Cl(n){var e=qi(n);if(Vg(e))return n}function kw(n,e){if(n==="change")return e}var Sm=!1;if(Ir){var ou;if(Ir){var au="oninput"in document;if(!au){var Kd=document.createElement("div");Kd.setAttribute("oninput","return;"),au=typeof Kd.oninput=="function"}ou=au}else ou=!1;Sm=ou&&(!document.documentMode||9<document.documentMode)}function Wd(){Hs&&(Hs.detachEvent("onpropertychange",km),fo=Hs=null)}function km(n){if(n.propertyName==="value"&&Cl(fo)){var e=[];wm(e,fo,n,mf(n)),em(Sw,e)}}function Tw(n,e,t){n==="focusin"?(Wd(),Hs=e,fo=t,Hs.attachEvent("onpropertychange",km)):n==="focusout"&&Wd()}function Iw(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Cl(fo)}function Ew(n,e){if(n==="click")return Cl(e)}function Aw(n,e){if(n==="input"||n==="change")return Cl(e)}function xw(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Ut=typeof Object.is=="function"?Object.is:xw;function ho(n,e){if(Ut(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var i=t[r];if(!Bu.call(e,i)||!Ut(n[i],e[i]))return!1}return!0}function _d(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Hd(n,e){var t=_d(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=_d(t)}}function Tm(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?Tm(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function Im(){for(var n=window,e=Ra();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=Ra(n.document)}return e}function Ef(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function Nw(n){var e=Im(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&Tm(t.ownerDocument.documentElement,t)){if(r!==null&&Ef(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var i=t.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!n.extend&&s>r&&(i=r,r=s,s=i),i=Hd(t,s);var o=Hd(t,r);i&&o&&(n.rangeCount!==1||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),n.removeAllRanges(),s>r?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Pw=Ir&&"documentMode"in document&&11>=document.documentMode,ji=null,Zu=null,Gs=null,ec=!1;function Gd(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;ec||ji==null||ji!==Ra(r)||(r=ji,"selectionStart"in r&&Ef(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Gs&&ho(Gs,r)||(Gs=r,r=Ma(Zu,"onSelect"),0<r.length&&(e=new kf("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=ji)))}function Zo(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var Vi={animationend:Zo("Animation","AnimationEnd"),animationiteration:Zo("Animation","AnimationIteration"),animationstart:Zo("Animation","AnimationStart"),transitionend:Zo("Transition","TransitionEnd")},lu={},Em={};Ir&&(Em=document.createElement("div").style,"AnimationEvent"in window||(delete Vi.animationend.animation,delete Vi.animationiteration.animation,delete Vi.animationstart.animation),"TransitionEvent"in window||delete Vi.transitionend.transition);function Dl(n){if(lu[n])return lu[n];if(!Vi[n])return n;var e=Vi[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in Em)return lu[n]=e[t];return n}var Am=Dl("animationend"),xm=Dl("animationiteration"),Nm=Dl("animationstart"),Pm=Dl("transitionend"),Cm=new Map,Yd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function si(n,e){Cm.set(n,e),Ri(e,[n])}for(var uu=0;uu<Yd.length;uu++){var cu=Yd[uu],Cw=cu.toLowerCase(),Dw=cu[0].toUpperCase()+cu.slice(1);si(Cw,"on"+Dw)}si(Am,"onAnimationEnd");si(xm,"onAnimationIteration");si(Nm,"onAnimationStart");si("dblclick","onDoubleClick");si("focusin","onFocus");si("focusout","onBlur");si(Pm,"onTransitionEnd");ls("onMouseEnter",["mouseout","mouseover"]);ls("onMouseLeave",["mouseout","mouseover"]);ls("onPointerEnter",["pointerout","pointerover"]);ls("onPointerLeave",["pointerout","pointerover"]);Ri("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ri("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ri("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ri("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ri("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ri("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ow=new Set("cancel close invalid load scroll toggle".split(" ").concat(Vs));function Qd(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,Cv(r,e,void 0,n),n.currentTarget=null}function Dm(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,c=a.currentTarget;if(a=a.listener,u!==s&&i.isPropagationStopped())break e;Qd(i,a,c),s=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,c=a.currentTarget,a=a.listener,u!==s&&i.isPropagationStopped())break e;Qd(i,a,c),s=u}}}if(Ba)throw n=Gu,Ba=!1,Gu=null,n}function Z(n,e){var t=e[sc];t===void 0&&(t=e[sc]=new Set);var r=n+"__bubble";t.has(r)||(Om(e,n,2,!1),t.add(r))}function fu(n,e,t){var r=0;e&&(r|=4),Om(t,n,r,e)}var ea="_reactListening"+Math.random().toString(36).slice(2);function go(n){if(!n[ea]){n[ea]=!0,Jg.forEach(function(t){t!=="selectionchange"&&(Ow.has(t)||fu(t,!1,n),fu(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[ea]||(e[ea]=!0,fu("selectionchange",!1,e))}}function Om(n,e,t,r){switch(gm(e)){case 1:var i=Kv;break;case 4:i=Wv;break;default:i=wf}t=i.bind(null,e,t,n),i=void 0,!Hu||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?n.addEventListener(e,t,{capture:!0,passive:i}):n.addEventListener(e,t,!0):i!==void 0?n.addEventListener(e,t,{passive:i}):n.addEventListener(e,t,!1)}function du(n,e,t,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;a!==null;){if(o=pi(a),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}a=a.parentNode}}r=r.return}em(function(){var c=s,d=mf(t),h=[];e:{var g=Cm.get(n);if(g!==void 0){var p=kf,k=n;switch(n){case"keypress":if(ya(t)===0)break e;case"keydown":case"keyup":p=aw;break;case"focusin":k="focus",p=su;break;case"focusout":k="blur",p=su;break;case"beforeblur":case"afterblur":p=su;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=Md;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=Gv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=cw;break;case Am:case xm:case Nm:p=Xv;break;case Pm:p=dw;break;case"scroll":p=_v;break;case"wheel":p=gw;break;case"copy":case"cut":case"paste":p=ew;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Ud}var T=(e&4)!==0,P=!T&&n==="scroll",y=T?g!==null?g+"Capture":null:g;T=[];for(var m=c,v;m!==null;){v=m;var E=v.stateNode;if(v.tag===5&&E!==null&&(v=E,y!==null&&(E=ao(m,y),E!=null&&T.push(mo(m,E,v)))),P)break;m=m.return}0<T.length&&(g=new p(g,k,null,t,d),h.push({event:g,listeners:T}))}}if(!(e&7)){e:{if(g=n==="mouseover"||n==="pointerover",p=n==="mouseout"||n==="pointerout",g&&t!==Wu&&(k=t.relatedTarget||t.fromElement)&&(pi(k)||k[Er]))break e;if((p||g)&&(g=d.window===d?d:(g=d.ownerDocument)?g.defaultView||g.parentWindow:window,p?(k=t.relatedTarget||t.toElement,p=c,k=k?pi(k):null,k!==null&&(P=Li(k),k!==P||k.tag!==5&&k.tag!==6)&&(k=null)):(p=null,k=c),p!==k)){if(T=Md,E="onMouseLeave",y="onMouseEnter",m="mouse",(n==="pointerout"||n==="pointerover")&&(T=Ud,E="onPointerLeave",y="onPointerEnter",m="pointer"),P=p==null?g:qi(p),v=k==null?g:qi(k),g=new T(E,m+"leave",p,t,d),g.target=P,g.relatedTarget=v,E=null,pi(d)===c&&(T=new T(y,m+"enter",k,t,d),T.target=v,T.relatedTarget=P,E=T),P=E,p&&k)t:{for(T=p,y=k,m=0,v=T;v;v=bi(v))m++;for(v=0,E=y;E;E=bi(E))v++;for(;0<m-v;)T=bi(T),m--;for(;0<v-m;)y=bi(y),v--;for(;m--;){if(T===y||y!==null&&T===y.alternate)break t;T=bi(T),y=bi(y)}T=null}else T=null;p!==null&&Xd(h,g,p,T,!1),k!==null&&P!==null&&Xd(h,P,k,T,!0)}}e:{if(g=c?qi(c):window,p=g.nodeName&&g.nodeName.toLowerCase(),p==="select"||p==="input"&&g.type==="file")var C=kw;else if(qd(g))if(Sm)C=Aw;else{C=Iw;var N=Tw}else(p=g.nodeName)&&p.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(C=Ew);if(C&&(C=C(n,c))){wm(h,C,t,d);break e}N&&N(n,g,c),n==="focusout"&&(N=g._wrapperState)&&N.controlled&&g.type==="number"&&Uu(g,"number",g.value)}switch(N=c?qi(c):window,n){case"focusin":(qd(N)||N.contentEditable==="true")&&(ji=N,Zu=c,Gs=null);break;case"focusout":Gs=Zu=ji=null;break;case"mousedown":ec=!0;break;case"contextmenu":case"mouseup":case"dragend":ec=!1,Gd(h,t,d);break;case"selectionchange":if(Pw)break;case"keydown":case"keyup":Gd(h,t,d)}var D;if(If)e:{switch(n){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else Ui?ym(n,t)&&(R="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(R="onCompositionStart");R&&(pm&&t.locale!=="ko"&&(Ui||R!=="onCompositionStart"?R==="onCompositionEnd"&&Ui&&(D=mm()):($r=d,Sf="value"in $r?$r.value:$r.textContent,Ui=!0)),N=Ma(c,R),0<N.length&&(R=new $d(R,n,null,t,d),h.push({event:R,listeners:N}),D?R.data=D:(D=vm(t),D!==null&&(R.data=D)))),(D=pw?yw(n,t):vw(n,t))&&(c=Ma(c,"onBeforeInput"),0<c.length&&(d=new $d("onBeforeInput","beforeinput",null,t,d),h.push({event:d,listeners:c}),d.data=D))}Dm(h,e)})}function mo(n,e,t){return{instance:n,listener:e,currentTarget:t}}function Ma(n,e){for(var t=e+"Capture",r=[];n!==null;){var i=n,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=ao(n,t),s!=null&&r.unshift(mo(n,s,i)),s=ao(n,e),s!=null&&r.push(mo(n,s,i))),n=n.return}return r}function bi(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Xd(n,e,t,r,i){for(var s=e._reactName,o=[];t!==null&&t!==r;){var a=t,u=a.alternate,c=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&c!==null&&(a=c,i?(u=ao(t,s),u!=null&&o.unshift(mo(t,u,a))):i||(u=ao(t,s),u!=null&&o.push(mo(t,u,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var Rw=/\r\n?/g,Lw=/\u0000|\uFFFD/g;function Zd(n){return(typeof n=="string"?n:""+n).replace(Rw,`
`).replace(Lw,"")}function ta(n,e,t){if(e=Zd(e),Zd(n)!==e&&t)throw Error(x(425))}function $a(){}var tc=null,nc=null;function rc(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ic=typeof setTimeout=="function"?setTimeout:void 0,Bw=typeof clearTimeout=="function"?clearTimeout:void 0,eh=typeof Promise=="function"?Promise:void 0,bw=typeof queueMicrotask=="function"?queueMicrotask:typeof eh<"u"?function(n){return eh.resolve(null).then(n).catch(zw)}:ic;function zw(n){setTimeout(function(){throw n})}function hu(n,e){var t=e,r=0;do{var i=t.nextSibling;if(n.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(r===0){n.removeChild(i),co(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=i}while(t);co(e)}function _r(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function th(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var Ns=Math.random().toString(36).slice(2),_t="__reactFiber$"+Ns,po="__reactProps$"+Ns,Er="__reactContainer$"+Ns,sc="__reactEvents$"+Ns,Fw="__reactListeners$"+Ns,Jw="__reactHandles$"+Ns;function pi(n){var e=n[_t];if(e)return e;for(var t=n.parentNode;t;){if(e=t[Er]||t[_t]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=th(n);n!==null;){if(t=n[_t])return t;n=th(n)}return e}n=t,t=n.parentNode}return null}function zo(n){return n=n[_t]||n[Er],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function qi(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(x(33))}function Ol(n){return n[po]||null}var oc=[],Ki=-1;function oi(n){return{current:n}}function ee(n){0>Ki||(n.current=oc[Ki],oc[Ki]=null,Ki--)}function X(n,e){Ki++,oc[Ki]=n.current,n.current=e}var ni={},Le=oi(ni),_e=oi(!1),Ei=ni;function us(n,e){var t=n.type.contextTypes;if(!t)return ni;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in t)i[s]=e[s];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=i),i}function He(n){return n=n.childContextTypes,n!=null}function Ua(){ee(_e),ee(Le)}function nh(n,e,t){if(Le.current!==ni)throw Error(x(168));X(Le,e),X(_e,t)}function Rm(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(x(108,Tv(n)||"Unknown",i));return se({},t,r)}function ja(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||ni,Ei=Le.current,X(Le,n),X(_e,_e.current),!0}function rh(n,e,t){var r=n.stateNode;if(!r)throw Error(x(169));t?(n=Rm(n,e,Ei),r.__reactInternalMemoizedMergedChildContext=n,ee(_e),ee(Le),X(Le,n)):ee(_e),X(_e,t)}var hr=null,Rl=!1,gu=!1;function Lm(n){hr===null?hr=[n]:hr.push(n)}function Mw(n){Rl=!0,Lm(n)}function ai(){if(!gu&&hr!==null){gu=!0;var n=0,e=Y;try{var t=hr;for(Y=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}hr=null,Rl=!1}catch(i){throw hr!==null&&(hr=hr.slice(n+1)),im(pf,ai),i}finally{Y=e,gu=!1}}return null}var Wi=[],_i=0,Va=null,qa=0,lt=[],ut=0,Ai=null,mr=1,pr="";function di(n,e){Wi[_i++]=qa,Wi[_i++]=Va,Va=n,qa=e}function Bm(n,e,t){lt[ut++]=mr,lt[ut++]=pr,lt[ut++]=Ai,Ai=n;var r=mr;n=pr;var i=32-Jt(r)-1;r&=~(1<<i),t+=1;var s=32-Jt(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,mr=1<<32-Jt(e)+i|t<<i|r,pr=s+n}else mr=1<<s|t<<i|r,pr=n}function Af(n){n.return!==null&&(di(n,1),Bm(n,1,0))}function xf(n){for(;n===Va;)Va=Wi[--_i],Wi[_i]=null,qa=Wi[--_i],Wi[_i]=null;for(;n===Ai;)Ai=lt[--ut],lt[ut]=null,pr=lt[--ut],lt[ut]=null,mr=lt[--ut],lt[ut]=null}var nt=null,Ze=null,te=!1,bt=null;function bm(n,e){var t=St(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function ih(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,nt=n,Ze=_r(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,nt=n,Ze=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Ai!==null?{id:mr,overflow:pr}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=St(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,nt=n,Ze=null,!0):!1;default:return!1}}function ac(n){return(n.mode&1)!==0&&(n.flags&128)===0}function lc(n){if(te){var e=Ze;if(e){var t=e;if(!ih(n,e)){if(ac(n))throw Error(x(418));e=_r(t.nextSibling);var r=nt;e&&ih(n,e)?bm(r,t):(n.flags=n.flags&-4097|2,te=!1,nt=n)}}else{if(ac(n))throw Error(x(418));n.flags=n.flags&-4097|2,te=!1,nt=n}}}function sh(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;nt=n}function na(n){if(n!==nt)return!1;if(!te)return sh(n),te=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!rc(n.type,n.memoizedProps)),e&&(e=Ze)){if(ac(n))throw zm(),Error(x(418));for(;e;)bm(n,e),e=_r(e.nextSibling)}if(sh(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(x(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){Ze=_r(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}Ze=null}}else Ze=nt?_r(n.stateNode.nextSibling):null;return!0}function zm(){for(var n=Ze;n;)n=_r(n.nextSibling)}function cs(){Ze=nt=null,te=!1}function Nf(n){bt===null?bt=[n]:bt.push(n)}var $w=Cr.ReactCurrentBatchConfig;function Ot(n,e){if(n&&n.defaultProps){e=se({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}var Ka=oi(null),Wa=null,Hi=null,Pf=null;function Cf(){Pf=Hi=Wa=null}function Df(n){var e=Ka.current;ee(Ka),n._currentValue=e}function uc(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function rs(n,e){Wa=n,Pf=Hi=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(qe=!0),n.firstContext=null)}function At(n){var e=n._currentValue;if(Pf!==n)if(n={context:n,memoizedValue:e,next:null},Hi===null){if(Wa===null)throw Error(x(308));Hi=n,Wa.dependencies={lanes:0,firstContext:n}}else Hi=Hi.next=n;return e}var yi=null;function Of(n){yi===null?yi=[n]:yi.push(n)}function Fm(n,e,t,r){var i=e.interleaved;return i===null?(t.next=t,Of(e)):(t.next=i.next,i.next=t),e.interleaved=t,Ar(n,r)}function Ar(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var Fr=!1;function Rf(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Jm(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Sr(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function Hr(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,_&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Ar(n,t)}return i=r.interleaved,i===null?(e.next=e,Of(r)):(e.next=i.next,i.next=e),r.interleaved=e,Ar(n,t)}function va(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,yf(n,t)}}function oh(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var i=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?i=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?i=s=e:s=s.next=e}else i=s=e;t={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function _a(n,e,t,r){var i=n.updateQueue;Fr=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var u=a,c=u.next;u.next=null,o===null?s=c:o.next=c,o=u;var d=n.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=u))}if(s!==null){var h=i.baseState;o=0,d=c=u=null,a=s;do{var g=a.lane,p=a.eventTime;if((r&g)===g){d!==null&&(d=d.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var k=n,T=a;switch(g=e,p=t,T.tag){case 1:if(k=T.payload,typeof k=="function"){h=k.call(p,h,g);break e}h=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=T.payload,g=typeof k=="function"?k.call(p,h,g):k,g==null)break e;h=se({},h,g);break e;case 2:Fr=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,g=i.effects,g===null?i.effects=[a]:g.push(a))}else p={eventTime:p,lane:g,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=p,u=h):d=d.next=p,o|=g;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;g=a,a=g.next,g.next=null,i.lastBaseUpdate=g,i.shared.pending=null}}while(!0);if(d===null&&(u=h),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Ni|=o,n.lanes=o,n.memoizedState=h}}function ah(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],i=r.callback;if(i!==null){if(r.callback=null,r=t,typeof i!="function")throw Error(x(191,i));i.call(r)}}}var Mm=new Fg.Component().refs;function cc(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:se({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var Ll={isMounted:function(n){return(n=n._reactInternals)?Li(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=Je(),i=Yr(n),s=Sr(r,i);s.payload=e,t!=null&&(s.callback=t),e=Hr(n,s,i),e!==null&&(Mt(e,n,i,r),va(e,n,i))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=Je(),i=Yr(n),s=Sr(r,i);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=Hr(n,s,i),e!==null&&(Mt(e,n,i,r),va(e,n,i))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Je(),r=Yr(n),i=Sr(t,r);i.tag=2,e!=null&&(i.callback=e),e=Hr(n,i,r),e!==null&&(Mt(e,n,r,t),va(e,n,r))}};function lh(n,e,t,r,i,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!ho(t,r)||!ho(i,s):!0}function $m(n,e,t){var r=!1,i=ni,s=e.contextType;return typeof s=="object"&&s!==null?s=At(s):(i=He(e)?Ei:Le.current,r=e.contextTypes,s=(r=r!=null)?us(n,i):ni),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ll,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=s),e}function uh(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&Ll.enqueueReplaceState(e,e.state,null)}function fc(n,e,t,r){var i=n.stateNode;i.props=t,i.state=n.memoizedState,i.refs=Mm,Rf(n);var s=e.contextType;typeof s=="object"&&s!==null?i.context=At(s):(s=He(e)?Ei:Le.current,i.context=us(n,s)),i.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(cc(n,e,s,t),i.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Ll.enqueueReplaceState(i,i.state,null),_a(n,t,i,r),i.state=n.memoizedState),typeof i.componentDidMount=="function"&&(n.flags|=4194308)}function Bs(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(x(309));var r=t.stateNode}if(!r)throw Error(x(147,n));var i=r,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===Mm&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(x(284));if(!t._owner)throw Error(x(290,n))}return n}function ra(n,e){throw n=Object.prototype.toString.call(e),Error(x(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function ch(n){var e=n._init;return e(n._payload)}function Um(n){function e(y,m){if(n){var v=y.deletions;v===null?(y.deletions=[m],y.flags|=16):v.push(m)}}function t(y,m){if(!n)return null;for(;m!==null;)e(y,m),m=m.sibling;return null}function r(y,m){for(y=new Map;m!==null;)m.key!==null?y.set(m.key,m):y.set(m.index,m),m=m.sibling;return y}function i(y,m){return y=Qr(y,m),y.index=0,y.sibling=null,y}function s(y,m,v){return y.index=v,n?(v=y.alternate,v!==null?(v=v.index,v<m?(y.flags|=2,m):v):(y.flags|=2,m)):(y.flags|=1048576,m)}function o(y){return n&&y.alternate===null&&(y.flags|=2),y}function a(y,m,v,E){return m===null||m.tag!==6?(m=ku(v,y.mode,E),m.return=y,m):(m=i(m,v),m.return=y,m)}function u(y,m,v,E){var C=v.type;return C===$i?d(y,m,v.props.children,E,v.key):m!==null&&(m.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===zr&&ch(C)===m.type)?(E=i(m,v.props),E.ref=Bs(y,m,v),E.return=y,E):(E=Ea(v.type,v.key,v.props,null,y.mode,E),E.ref=Bs(y,m,v),E.return=y,E)}function c(y,m,v,E){return m===null||m.tag!==4||m.stateNode.containerInfo!==v.containerInfo||m.stateNode.implementation!==v.implementation?(m=Tu(v,y.mode,E),m.return=y,m):(m=i(m,v.children||[]),m.return=y,m)}function d(y,m,v,E,C){return m===null||m.tag!==7?(m=ki(v,y.mode,E,C),m.return=y,m):(m=i(m,v),m.return=y,m)}function h(y,m,v){if(typeof m=="string"&&m!==""||typeof m=="number")return m=ku(""+m,y.mode,v),m.return=y,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Wo:return v=Ea(m.type,m.key,m.props,null,y.mode,v),v.ref=Bs(y,null,m),v.return=y,v;case Mi:return m=Tu(m,y.mode,v),m.return=y,m;case zr:var E=m._init;return h(y,E(m._payload),v)}if(Us(m)||Cs(m))return m=ki(m,y.mode,v,null),m.return=y,m;ra(y,m)}return null}function g(y,m,v,E){var C=m!==null?m.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return C!==null?null:a(y,m,""+v,E);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Wo:return v.key===C?u(y,m,v,E):null;case Mi:return v.key===C?c(y,m,v,E):null;case zr:return C=v._init,g(y,m,C(v._payload),E)}if(Us(v)||Cs(v))return C!==null?null:d(y,m,v,E,null);ra(y,v)}return null}function p(y,m,v,E,C){if(typeof E=="string"&&E!==""||typeof E=="number")return y=y.get(v)||null,a(m,y,""+E,C);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Wo:return y=y.get(E.key===null?v:E.key)||null,u(m,y,E,C);case Mi:return y=y.get(E.key===null?v:E.key)||null,c(m,y,E,C);case zr:var N=E._init;return p(y,m,v,N(E._payload),C)}if(Us(E)||Cs(E))return y=y.get(v)||null,d(m,y,E,C,null);ra(m,E)}return null}function k(y,m,v,E){for(var C=null,N=null,D=m,R=m=0,$=null;D!==null&&R<v.length;R++){D.index>R?($=D,D=null):$=D.sibling;var M=g(y,D,v[R],E);if(M===null){D===null&&(D=$);break}n&&D&&M.alternate===null&&e(y,D),m=s(M,m,R),N===null?C=M:N.sibling=M,N=M,D=$}if(R===v.length)return t(y,D),te&&di(y,R),C;if(D===null){for(;R<v.length;R++)D=h(y,v[R],E),D!==null&&(m=s(D,m,R),N===null?C=D:N.sibling=D,N=D);return te&&di(y,R),C}for(D=r(y,D);R<v.length;R++)$=p(D,y,R,v[R],E),$!==null&&(n&&$.alternate!==null&&D.delete($.key===null?R:$.key),m=s($,m,R),N===null?C=$:N.sibling=$,N=$);return n&&D.forEach(function(be){return e(y,be)}),te&&di(y,R),C}function T(y,m,v,E){var C=Cs(v);if(typeof C!="function")throw Error(x(150));if(v=C.call(v),v==null)throw Error(x(151));for(var N=C=null,D=m,R=m=0,$=null,M=v.next();D!==null&&!M.done;R++,M=v.next()){D.index>R?($=D,D=null):$=D.sibling;var be=g(y,D,M.value,E);if(be===null){D===null&&(D=$);break}n&&D&&be.alternate===null&&e(y,D),m=s(be,m,R),N===null?C=be:N.sibling=be,N=be,D=$}if(M.done)return t(y,D),te&&di(y,R),C;if(D===null){for(;!M.done;R++,M=v.next())M=h(y,M.value,E),M!==null&&(m=s(M,m,R),N===null?C=M:N.sibling=M,N=M);return te&&di(y,R),C}for(D=r(y,D);!M.done;R++,M=v.next())M=p(D,y,R,M.value,E),M!==null&&(n&&M.alternate!==null&&D.delete(M.key===null?R:M.key),m=s(M,m,R),N===null?C=M:N.sibling=M,N=M);return n&&D.forEach(function(li){return e(y,li)}),te&&di(y,R),C}function P(y,m,v,E){if(typeof v=="object"&&v!==null&&v.type===$i&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Wo:e:{for(var C=v.key,N=m;N!==null;){if(N.key===C){if(C=v.type,C===$i){if(N.tag===7){t(y,N.sibling),m=i(N,v.props.children),m.return=y,y=m;break e}}else if(N.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===zr&&ch(C)===N.type){t(y,N.sibling),m=i(N,v.props),m.ref=Bs(y,N,v),m.return=y,y=m;break e}t(y,N);break}else e(y,N);N=N.sibling}v.type===$i?(m=ki(v.props.children,y.mode,E,v.key),m.return=y,y=m):(E=Ea(v.type,v.key,v.props,null,y.mode,E),E.ref=Bs(y,m,v),E.return=y,y=E)}return o(y);case Mi:e:{for(N=v.key;m!==null;){if(m.key===N)if(m.tag===4&&m.stateNode.containerInfo===v.containerInfo&&m.stateNode.implementation===v.implementation){t(y,m.sibling),m=i(m,v.children||[]),m.return=y,y=m;break e}else{t(y,m);break}else e(y,m);m=m.sibling}m=Tu(v,y.mode,E),m.return=y,y=m}return o(y);case zr:return N=v._init,P(y,m,N(v._payload),E)}if(Us(v))return k(y,m,v,E);if(Cs(v))return T(y,m,v,E);ra(y,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,m!==null&&m.tag===6?(t(y,m.sibling),m=i(m,v),m.return=y,y=m):(t(y,m),m=ku(v,y.mode,E),m.return=y,y=m),o(y)):t(y,m)}return P}var fs=Um(!0),jm=Um(!1),Fo={},sn=oi(Fo),yo=oi(Fo),vo=oi(Fo);function vi(n){if(n===Fo)throw Error(x(174));return n}function Lf(n,e){switch(X(vo,e),X(yo,n),X(sn,Fo),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Vu(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=Vu(e,n)}ee(sn),X(sn,e)}function ds(){ee(sn),ee(yo),ee(vo)}function Vm(n){vi(vo.current);var e=vi(sn.current),t=Vu(e,n.type);e!==t&&(X(yo,n),X(sn,t))}function Bf(n){yo.current===n&&(ee(sn),ee(yo))}var re=oi(0);function Ha(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var mu=[];function bf(){for(var n=0;n<mu.length;n++)mu[n]._workInProgressVersionPrimary=null;mu.length=0}var wa=Cr.ReactCurrentDispatcher,pu=Cr.ReactCurrentBatchConfig,xi=0,ie=null,ye=null,ke=null,Ga=!1,Ys=!1,wo=0,Uw=0;function Pe(){throw Error(x(321))}function zf(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!Ut(n[t],e[t]))return!1;return!0}function Ff(n,e,t,r,i,s){if(xi=s,ie=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,wa.current=n===null||n.memoizedState===null?Kw:Ww,n=t(r,i),Ys){s=0;do{if(Ys=!1,wo=0,25<=s)throw Error(x(301));s+=1,ke=ye=null,e.updateQueue=null,wa.current=_w,n=t(r,i)}while(Ys)}if(wa.current=Ya,e=ye!==null&&ye.next!==null,xi=0,ke=ye=ie=null,Ga=!1,e)throw Error(x(300));return n}function Jf(){var n=wo!==0;return wo=0,n}function qt(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ke===null?ie.memoizedState=ke=n:ke=ke.next=n,ke}function xt(){if(ye===null){var n=ie.alternate;n=n!==null?n.memoizedState:null}else n=ye.next;var e=ke===null?ie.memoizedState:ke.next;if(e!==null)ke=e,ye=n;else{if(n===null)throw Error(x(310));ye=n,n={memoizedState:ye.memoizedState,baseState:ye.baseState,baseQueue:ye.baseQueue,queue:ye.queue,next:null},ke===null?ie.memoizedState=ke=n:ke=ke.next=n}return ke}function So(n,e){return typeof e=="function"?e(n):e}function yu(n){var e=xt(),t=e.queue;if(t===null)throw Error(x(311));t.lastRenderedReducer=n;var r=ye,i=r.baseQueue,s=t.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,t.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,u=null,c=s;do{var d=c.lane;if((xi&d)===d)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:n(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(a=u=h,o=r):u=u.next=h,ie.lanes|=d,Ni|=d}c=c.next}while(c!==null&&c!==s);u===null?o=r:u.next=a,Ut(r,e.memoizedState)||(qe=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,t.lastRenderedState=r}if(n=t.interleaved,n!==null){i=n;do s=i.lane,ie.lanes|=s,Ni|=s,i=i.next;while(i!==n)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function vu(n){var e=xt(),t=e.queue;if(t===null)throw Error(x(311));t.lastRenderedReducer=n;var r=t.dispatch,i=t.pending,s=e.memoizedState;if(i!==null){t.pending=null;var o=i=i.next;do s=n(s,o.action),o=o.next;while(o!==i);Ut(s,e.memoizedState)||(qe=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,r]}function qm(){}function Km(n,e){var t=ie,r=xt(),i=e(),s=!Ut(r.memoizedState,i);if(s&&(r.memoizedState=i,qe=!0),r=r.queue,Mf(Hm.bind(null,t,r,n),[n]),r.getSnapshot!==e||s||ke!==null&&ke.memoizedState.tag&1){if(t.flags|=2048,ko(9,_m.bind(null,t,r,i,e),void 0,null),Te===null)throw Error(x(349));xi&30||Wm(t,e,i)}return i}function Wm(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=ie.updateQueue,e===null?(e={lastEffect:null,stores:null},ie.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function _m(n,e,t,r){e.value=t,e.getSnapshot=r,Gm(e)&&Ym(n)}function Hm(n,e,t){return t(function(){Gm(e)&&Ym(n)})}function Gm(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Ut(n,t)}catch{return!0}}function Ym(n){var e=Ar(n,1);e!==null&&Mt(e,n,1,-1)}function fh(n){var e=qt();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:So,lastRenderedState:n},e.queue=n,n=n.dispatch=qw.bind(null,ie,n),[e.memoizedState,n]}function ko(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=ie.updateQueue,e===null?(e={lastEffect:null,stores:null},ie.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function Qm(){return xt().memoizedState}function Sa(n,e,t,r){var i=qt();ie.flags|=n,i.memoizedState=ko(1|e,t,void 0,r===void 0?null:r)}function Bl(n,e,t,r){var i=xt();r=r===void 0?null:r;var s=void 0;if(ye!==null){var o=ye.memoizedState;if(s=o.destroy,r!==null&&zf(r,o.deps)){i.memoizedState=ko(e,t,s,r);return}}ie.flags|=n,i.memoizedState=ko(1|e,t,s,r)}function dh(n,e){return Sa(8390656,8,n,e)}function Mf(n,e){return Bl(2048,8,n,e)}function Xm(n,e){return Bl(4,2,n,e)}function Zm(n,e){return Bl(4,4,n,e)}function ep(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function tp(n,e,t){return t=t!=null?t.concat([n]):null,Bl(4,4,ep.bind(null,e,n),t)}function $f(){}function np(n,e){var t=xt();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&zf(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function rp(n,e){var t=xt();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&zf(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function ip(n,e,t){return xi&21?(Ut(t,e)||(t=am(),ie.lanes|=t,Ni|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,qe=!0),n.memoizedState=t)}function jw(n,e){var t=Y;Y=t!==0&&4>t?t:4,n(!0);var r=pu.transition;pu.transition={};try{n(!1),e()}finally{Y=t,pu.transition=r}}function sp(){return xt().memoizedState}function Vw(n,e,t){var r=Yr(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},op(n))ap(e,t);else if(t=Fm(n,e,t,r),t!==null){var i=Je();Mt(t,n,r,i),lp(t,e,r)}}function qw(n,e,t){var r=Yr(n),i={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(op(n))ap(e,i);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(i.hasEagerState=!0,i.eagerState=a,Ut(a,o)){var u=e.interleaved;u===null?(i.next=i,Of(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}t=Fm(n,e,i,r),t!==null&&(i=Je(),Mt(t,n,r,i),lp(t,e,r))}}function op(n){var e=n.alternate;return n===ie||e!==null&&e===ie}function ap(n,e){Ys=Ga=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function lp(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,yf(n,t)}}var Ya={readContext:At,useCallback:Pe,useContext:Pe,useEffect:Pe,useImperativeHandle:Pe,useInsertionEffect:Pe,useLayoutEffect:Pe,useMemo:Pe,useReducer:Pe,useRef:Pe,useState:Pe,useDebugValue:Pe,useDeferredValue:Pe,useTransition:Pe,useMutableSource:Pe,useSyncExternalStore:Pe,useId:Pe,unstable_isNewReconciler:!1},Kw={readContext:At,useCallback:function(n,e){return qt().memoizedState=[n,e===void 0?null:e],n},useContext:At,useEffect:dh,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,Sa(4194308,4,ep.bind(null,e,n),t)},useLayoutEffect:function(n,e){return Sa(4194308,4,n,e)},useInsertionEffect:function(n,e){return Sa(4,2,n,e)},useMemo:function(n,e){var t=qt();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=qt();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=Vw.bind(null,ie,n),[r.memoizedState,n]},useRef:function(n){var e=qt();return n={current:n},e.memoizedState=n},useState:fh,useDebugValue:$f,useDeferredValue:function(n){return qt().memoizedState=n},useTransition:function(){var n=fh(!1),e=n[0];return n=jw.bind(null,n[1]),qt().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=ie,i=qt();if(te){if(t===void 0)throw Error(x(407));t=t()}else{if(t=e(),Te===null)throw Error(x(349));xi&30||Wm(r,e,t)}i.memoizedState=t;var s={value:t,getSnapshot:e};return i.queue=s,dh(Hm.bind(null,r,s,n),[n]),r.flags|=2048,ko(9,_m.bind(null,r,s,t,e),void 0,null),t},useId:function(){var n=qt(),e=Te.identifierPrefix;if(te){var t=pr,r=mr;t=(r&~(1<<32-Jt(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=wo++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=Uw++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},Ww={readContext:At,useCallback:np,useContext:At,useEffect:Mf,useImperativeHandle:tp,useInsertionEffect:Xm,useLayoutEffect:Zm,useMemo:rp,useReducer:yu,useRef:Qm,useState:function(){return yu(So)},useDebugValue:$f,useDeferredValue:function(n){var e=xt();return ip(e,ye.memoizedState,n)},useTransition:function(){var n=yu(So)[0],e=xt().memoizedState;return[n,e]},useMutableSource:qm,useSyncExternalStore:Km,useId:sp,unstable_isNewReconciler:!1},_w={readContext:At,useCallback:np,useContext:At,useEffect:Mf,useImperativeHandle:tp,useInsertionEffect:Xm,useLayoutEffect:Zm,useMemo:rp,useReducer:vu,useRef:Qm,useState:function(){return vu(So)},useDebugValue:$f,useDeferredValue:function(n){var e=xt();return ye===null?e.memoizedState=n:ip(e,ye.memoizedState,n)},useTransition:function(){var n=vu(So)[0],e=xt().memoizedState;return[n,e]},useMutableSource:qm,useSyncExternalStore:Km,useId:sp,unstable_isNewReconciler:!1};function hs(n,e){try{var t="",r=e;do t+=kv(r),r=r.return;while(r);var i=t}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:i,digest:null}}function wu(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function dc(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var Hw=typeof WeakMap=="function"?WeakMap:Map;function up(n,e,t){t=Sr(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){Xa||(Xa=!0,Tc=r),dc(n,e)},t}function cp(n,e,t){t=Sr(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;t.payload=function(){return r(i)},t.callback=function(){dc(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){dc(n,e),typeof r!="function"&&(Gr===null?Gr=new Set([this]):Gr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function hh(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new Hw;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(t)||(i.add(t),n=l0.bind(null,n,e,t),e.then(n,n))}function gh(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function mh(n,e,t,r,i){return n.mode&1?(n.flags|=65536,n.lanes=i,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Sr(-1,1),e.tag=2,Hr(t,e,1))),t.lanes|=1),n)}var Gw=Cr.ReactCurrentOwner,qe=!1;function ze(n,e,t,r){e.child=n===null?jm(e,null,t,r):fs(e,n.child,t,r)}function ph(n,e,t,r,i){t=t.render;var s=e.ref;return rs(e,i),r=Ff(n,e,t,r,s,i),t=Jf(),n!==null&&!qe?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,xr(n,e,i)):(te&&t&&Af(e),e.flags|=1,ze(n,e,r,i),e.child)}function yh(n,e,t,r,i){if(n===null){var s=t.type;return typeof s=="function"&&!Hf(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,fp(n,e,s,r,i)):(n=Ea(t.type,null,r,e,e.mode,i),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&i)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:ho,t(o,r)&&n.ref===e.ref)return xr(n,e,i)}return e.flags|=1,n=Qr(s,r),n.ref=e.ref,n.return=e,e.child=n}function fp(n,e,t,r,i){if(n!==null){var s=n.memoizedProps;if(ho(s,r)&&n.ref===e.ref)if(qe=!1,e.pendingProps=r=s,(n.lanes&i)!==0)n.flags&131072&&(qe=!0);else return e.lanes=n.lanes,xr(n,e,i)}return hc(n,e,t,r,i)}function dp(n,e,t){var r=e.pendingProps,i=r.children,s=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},X(Yi,Xe),Xe|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,X(Yi,Xe),Xe|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:t,X(Yi,Xe),Xe|=r}else s!==null?(r=s.baseLanes|t,e.memoizedState=null):r=t,X(Yi,Xe),Xe|=r;return ze(n,e,i,t),e.child}function hp(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function hc(n,e,t,r,i){var s=He(t)?Ei:Le.current;return s=us(e,s),rs(e,i),t=Ff(n,e,t,r,s,i),r=Jf(),n!==null&&!qe?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,xr(n,e,i)):(te&&r&&Af(e),e.flags|=1,ze(n,e,t,i),e.child)}function vh(n,e,t,r,i){if(He(t)){var s=!0;ja(e)}else s=!1;if(rs(e,i),e.stateNode===null)ka(n,e),$m(e,t,r),fc(e,t,r,i),r=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var u=o.context,c=t.contextType;typeof c=="object"&&c!==null?c=At(c):(c=He(t)?Ei:Le.current,c=us(e,c));var d=t.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||u!==c)&&uh(e,o,r,c),Fr=!1;var g=e.memoizedState;o.state=g,_a(e,r,o,i),u=e.memoizedState,a!==r||g!==u||_e.current||Fr?(typeof d=="function"&&(cc(e,t,d,r),u=e.memoizedState),(a=Fr||lh(e,t,a,r,g,u,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Jm(n,e),a=e.memoizedProps,c=e.type===e.elementType?a:Ot(e.type,a),o.props=c,h=e.pendingProps,g=o.context,u=t.contextType,typeof u=="object"&&u!==null?u=At(u):(u=He(t)?Ei:Le.current,u=us(e,u));var p=t.getDerivedStateFromProps;(d=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||g!==u)&&uh(e,o,r,u),Fr=!1,g=e.memoizedState,o.state=g,_a(e,r,o,i);var k=e.memoizedState;a!==h||g!==k||_e.current||Fr?(typeof p=="function"&&(cc(e,t,p,r),k=e.memoizedState),(c=Fr||lh(e,t,c,r,g,k,u)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,k,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,k,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&g===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&g===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=k),o.props=r,o.state=k,o.context=u,r=c):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&g===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&g===n.memoizedState||(e.flags|=1024),r=!1)}return gc(n,e,t,r,s,i)}function gc(n,e,t,r,i,s){hp(n,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&rh(e,t,!1),xr(n,e,s);r=e.stateNode,Gw.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&o?(e.child=fs(e,n.child,null,s),e.child=fs(e,null,a,s)):ze(n,e,a,s),e.memoizedState=r.state,i&&rh(e,t,!0),e.child}function gp(n){var e=n.stateNode;e.pendingContext?nh(n,e.pendingContext,e.pendingContext!==e.context):e.context&&nh(n,e.context,!1),Lf(n,e.containerInfo)}function wh(n,e,t,r,i){return cs(),Nf(i),e.flags|=256,ze(n,e,t,r),e.child}var mc={dehydrated:null,treeContext:null,retryLane:0};function pc(n){return{baseLanes:n,cachePool:null,transitions:null}}function mp(n,e,t){var r=e.pendingProps,i=re.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(i|=1),X(re,i&1),n===null)return lc(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,n=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Fl(o,r,0,null),n=ki(n,r,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=pc(t),e.memoizedState=mc,n):Uf(e,o));if(i=n.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return Yw(n,e,o,r,a,i,t);if(s){s=r.fallback,o=e.mode,i=n.child,a=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Qr(i,u),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Qr(a,s):(s=ki(s,o,t,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=n.child.memoizedState,o=o===null?pc(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=mc,r}return s=n.child,n=s.sibling,r=Qr(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function Uf(n,e){return e=Fl({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function ia(n,e,t,r){return r!==null&&Nf(r),fs(e,n.child,null,t),n=Uf(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function Yw(n,e,t,r,i,s,o){if(t)return e.flags&256?(e.flags&=-257,r=wu(Error(x(422))),ia(n,e,o,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Fl({mode:"visible",children:r.children},i,0,null),s=ki(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&fs(e,n.child,null,o),e.child.memoizedState=pc(o),e.memoizedState=mc,s);if(!(e.mode&1))return ia(n,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(x(419)),r=wu(s,r,void 0),ia(n,e,o,r)}if(a=(o&n.childLanes)!==0,qe||a){if(r=Te,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Ar(n,i),Mt(r,n,i,-1))}return _f(),r=wu(Error(x(421))),ia(n,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=n.child,e=u0.bind(null,n),i._reactRetry=e,null):(n=s.treeContext,Ze=_r(i.nextSibling),nt=e,te=!0,bt=null,n!==null&&(lt[ut++]=mr,lt[ut++]=pr,lt[ut++]=Ai,mr=n.id,pr=n.overflow,Ai=e),e=Uf(e,r.children),e.flags|=4096,e)}function Sh(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),uc(n.return,e,t)}function Su(n,e,t,r,i){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=t,s.tailMode=i)}function pp(n,e,t){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(ze(n,e,r.children,t),r=re.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Sh(n,t,e);else if(n.tag===19)Sh(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(X(re,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)n=t.alternate,n!==null&&Ha(n)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),Su(e,!1,i,t,s);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(n=i.alternate,n!==null&&Ha(n)===null){e.child=i;break}n=i.sibling,i.sibling=t,t=i,i=n}Su(e,!0,t,null,s);break;case"together":Su(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ka(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function xr(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),Ni|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(x(153));if(e.child!==null){for(n=e.child,t=Qr(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=Qr(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function Qw(n,e,t){switch(e.tag){case 3:gp(e),cs();break;case 5:Vm(e);break;case 1:He(e.type)&&ja(e);break;case 4:Lf(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;X(Ka,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(X(re,re.current&1),e.flags|=128,null):t&e.child.childLanes?mp(n,e,t):(X(re,re.current&1),n=xr(n,e,t),n!==null?n.sibling:null);X(re,re.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return pp(n,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),X(re,re.current),r)break;return null;case 22:case 23:return e.lanes=0,dp(n,e,t)}return xr(n,e,t)}var yp,yc,vp,wp;yp=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};yc=function(){};vp=function(n,e,t,r){var i=n.memoizedProps;if(i!==r){n=e.stateNode,vi(sn.current);var s=null;switch(t){case"input":i=Mu(n,i),r=Mu(n,r),s=[];break;case"select":i=se({},i,{value:void 0}),r=se({},r,{value:void 0}),s=[];break;case"textarea":i=ju(n,i),r=ju(n,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=$a)}qu(t,r);var o;t=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(so.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var u=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&u!==a&&(u!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(t||(t={}),t[o]=u[o])}else t||(s||(s=[]),s.push(c,t)),t=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(s=s||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(so.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&Z("scroll",n),s||a===u||(s=[])):(s=s||[]).push(c,u))}t&&(s=s||[]).push("style",t);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};wp=function(n,e,t,r){t!==r&&(e.flags|=4)};function bs(n,e){if(!te)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function Ce(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=n,i=i.sibling;else for(i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=n,i=i.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function Xw(n,e,t){var r=e.pendingProps;switch(xf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ce(e),null;case 1:return He(e.type)&&Ua(),Ce(e),null;case 3:return r=e.stateNode,ds(),ee(_e),ee(Le),bf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(na(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,bt!==null&&(Ac(bt),bt=null))),yc(n,e),Ce(e),null;case 5:Bf(e);var i=vi(vo.current);if(t=e.type,n!==null&&e.stateNode!=null)vp(n,e,t,r,i),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(x(166));return Ce(e),null}if(n=vi(sn.current),na(e)){r=e.stateNode,t=e.type;var s=e.memoizedProps;switch(r[_t]=e,r[po]=s,n=(e.mode&1)!==0,t){case"dialog":Z("cancel",r),Z("close",r);break;case"iframe":case"object":case"embed":Z("load",r);break;case"video":case"audio":for(i=0;i<Vs.length;i++)Z(Vs[i],r);break;case"source":Z("error",r);break;case"img":case"image":case"link":Z("error",r),Z("load",r);break;case"details":Z("toggle",r);break;case"input":Cd(r,s),Z("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Z("invalid",r);break;case"textarea":Od(r,s),Z("invalid",r)}qu(t,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&ta(r.textContent,a,n),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&ta(r.textContent,a,n),i=["children",""+a]):so.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Z("scroll",r)}switch(t){case"input":_o(r),Dd(r,s,!0);break;case"textarea":_o(r),Rd(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=$a)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Wg(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=o.createElement(t,{is:r.is}):(n=o.createElement(t),t==="select"&&(o=n,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):n=o.createElementNS(n,t),n[_t]=e,n[po]=r,yp(n,e,!1,!1),e.stateNode=n;e:{switch(o=Ku(t,r),t){case"dialog":Z("cancel",n),Z("close",n),i=r;break;case"iframe":case"object":case"embed":Z("load",n),i=r;break;case"video":case"audio":for(i=0;i<Vs.length;i++)Z(Vs[i],n);i=r;break;case"source":Z("error",n),i=r;break;case"img":case"image":case"link":Z("error",n),Z("load",n),i=r;break;case"details":Z("toggle",n),i=r;break;case"input":Cd(n,r),i=Mu(n,r),Z("invalid",n);break;case"option":i=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},i=se({},r,{value:void 0}),Z("invalid",n);break;case"textarea":Od(n,r),i=ju(n,r),Z("invalid",n);break;default:i=r}qu(t,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var u=a[s];s==="style"?Gg(n,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&_g(n,u)):s==="children"?typeof u=="string"?(t!=="textarea"||u!=="")&&oo(n,u):typeof u=="number"&&oo(n,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(so.hasOwnProperty(s)?u!=null&&s==="onScroll"&&Z("scroll",n):u!=null&&ff(n,s,u,o))}switch(t){case"input":_o(n),Dd(n,r,!1);break;case"textarea":_o(n),Rd(n);break;case"option":r.value!=null&&n.setAttribute("value",""+ti(r.value));break;case"select":n.multiple=!!r.multiple,s=r.value,s!=null?Zi(n,!!r.multiple,s,!1):r.defaultValue!=null&&Zi(n,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(n.onclick=$a)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ce(e),null;case 6:if(n&&e.stateNode!=null)wp(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(x(166));if(t=vi(vo.current),vi(sn.current),na(e)){if(r=e.stateNode,t=e.memoizedProps,r[_t]=e,(s=r.nodeValue!==t)&&(n=nt,n!==null))switch(n.tag){case 3:ta(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&ta(r.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[_t]=e,e.stateNode=r}return Ce(e),null;case 13:if(ee(re),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(te&&Ze!==null&&e.mode&1&&!(e.flags&128))zm(),cs(),e.flags|=98560,s=!1;else if(s=na(e),r!==null&&r.dehydrated!==null){if(n===null){if(!s)throw Error(x(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(x(317));s[_t]=e}else cs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ce(e),s=!1}else bt!==null&&(Ac(bt),bt=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(n===null||re.current&1?we===0&&(we=3):_f())),e.updateQueue!==null&&(e.flags|=4),Ce(e),null);case 4:return ds(),yc(n,e),n===null&&go(e.stateNode.containerInfo),Ce(e),null;case 10:return Df(e.type._context),Ce(e),null;case 17:return He(e.type)&&Ua(),Ce(e),null;case 19:if(ee(re),s=e.memoizedState,s===null)return Ce(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)bs(s,!1);else{if(we!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=Ha(n),o!==null){for(e.flags|=128,bs(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)s=t,n=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return X(re,re.current&1|2),e.child}n=n.sibling}s.tail!==null&&ge()>gs&&(e.flags|=128,r=!0,bs(s,!1),e.lanes=4194304)}else{if(!r)if(n=Ha(o),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),bs(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!te)return Ce(e),null}else 2*ge()-s.renderingStartTime>gs&&t!==1073741824&&(e.flags|=128,r=!0,bs(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=ge(),e.sibling=null,t=re.current,X(re,r?t&1|2:t&1),e):(Ce(e),null);case 22:case 23:return Wf(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Xe&1073741824&&(Ce(e),e.subtreeFlags&6&&(e.flags|=8192)):Ce(e),null;case 24:return null;case 25:return null}throw Error(x(156,e.tag))}function Zw(n,e){switch(xf(e),e.tag){case 1:return He(e.type)&&Ua(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return ds(),ee(_e),ee(Le),bf(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return Bf(e),null;case 13:if(ee(re),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(x(340));cs()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return ee(re),null;case 4:return ds(),null;case 10:return Df(e.type._context),null;case 22:case 23:return Wf(),null;case 24:return null;default:return null}}var sa=!1,De=!1,e0=typeof WeakSet=="function"?WeakSet:Set,L=null;function Gi(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){ae(n,e,r)}else t.current=null}function vc(n,e,t){try{t()}catch(r){ae(n,e,r)}}var kh=!1;function t0(n,e){if(tc=Fa,n=Im(),Ef(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,u=-1,c=0,d=0,h=n,g=null;t:for(;;){for(var p;h!==t||i!==0&&h.nodeType!==3||(a=o+i),h!==s||r!==0&&h.nodeType!==3||(u=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(p=h.firstChild)!==null;)g=h,h=p;for(;;){if(h===n)break t;if(g===t&&++c===i&&(a=o),g===s&&++d===r&&(u=o),(p=h.nextSibling)!==null)break;h=g,g=h.parentNode}h=p}t=a===-1||u===-1?null:{start:a,end:u}}else t=null}t=t||{start:0,end:0}}else t=null;for(nc={focusedElem:n,selectionRange:t},Fa=!1,L=e;L!==null;)if(e=L,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,L=n;else for(;L!==null;){e=L;try{var k=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var T=k.memoizedProps,P=k.memoizedState,y=e.stateNode,m=y.getSnapshotBeforeUpdate(e.elementType===e.type?T:Ot(e.type,T),P);y.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(x(163))}}catch(E){ae(e,e.return,E)}if(n=e.sibling,n!==null){n.return=e.return,L=n;break}L=e.return}return k=kh,kh=!1,k}function Qs(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&n)===n){var s=i.destroy;i.destroy=void 0,s!==void 0&&vc(e,t,s)}i=i.next}while(i!==r)}}function bl(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function wc(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function Sp(n){var e=n.alternate;e!==null&&(n.alternate=null,Sp(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[_t],delete e[po],delete e[sc],delete e[Fw],delete e[Jw])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function kp(n){return n.tag===5||n.tag===3||n.tag===4}function Th(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||kp(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Sc(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=$a));else if(r!==4&&(n=n.child,n!==null))for(Sc(n,e,t),n=n.sibling;n!==null;)Sc(n,e,t),n=n.sibling}function kc(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(kc(n,e,t),n=n.sibling;n!==null;)kc(n,e,t),n=n.sibling}var Ie=null,Bt=!1;function Or(n,e,t){for(t=t.child;t!==null;)Tp(n,e,t),t=t.sibling}function Tp(n,e,t){if(rn&&typeof rn.onCommitFiberUnmount=="function")try{rn.onCommitFiberUnmount(Nl,t)}catch{}switch(t.tag){case 5:De||Gi(t,e);case 6:var r=Ie,i=Bt;Ie=null,Or(n,e,t),Ie=r,Bt=i,Ie!==null&&(Bt?(n=Ie,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):Ie.removeChild(t.stateNode));break;case 18:Ie!==null&&(Bt?(n=Ie,t=t.stateNode,n.nodeType===8?hu(n.parentNode,t):n.nodeType===1&&hu(n,t),co(n)):hu(Ie,t.stateNode));break;case 4:r=Ie,i=Bt,Ie=t.stateNode.containerInfo,Bt=!0,Or(n,e,t),Ie=r,Bt=i;break;case 0:case 11:case 14:case 15:if(!De&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&vc(t,e,o),i=i.next}while(i!==r)}Or(n,e,t);break;case 1:if(!De&&(Gi(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(a){ae(t,e,a)}Or(n,e,t);break;case 21:Or(n,e,t);break;case 22:t.mode&1?(De=(r=De)||t.memoizedState!==null,Or(n,e,t),De=r):Or(n,e,t);break;default:Or(n,e,t)}}function Ih(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new e0),e.forEach(function(r){var i=c0.bind(null,n,r);t.has(r)||(t.add(r),r.then(i,i))})}}function Dt(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var i=t[r];try{var s=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Ie=a.stateNode,Bt=!1;break e;case 3:Ie=a.stateNode.containerInfo,Bt=!0;break e;case 4:Ie=a.stateNode.containerInfo,Bt=!0;break e}a=a.return}if(Ie===null)throw Error(x(160));Tp(s,o,i),Ie=null,Bt=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(c){ae(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Ip(e,n),e=e.sibling}function Ip(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Dt(e,n),Vt(n),r&4){try{Qs(3,n,n.return),bl(3,n)}catch(T){ae(n,n.return,T)}try{Qs(5,n,n.return)}catch(T){ae(n,n.return,T)}}break;case 1:Dt(e,n),Vt(n),r&512&&t!==null&&Gi(t,t.return);break;case 5:if(Dt(e,n),Vt(n),r&512&&t!==null&&Gi(t,t.return),n.flags&32){var i=n.stateNode;try{oo(i,"")}catch(T){ae(n,n.return,T)}}if(r&4&&(i=n.stateNode,i!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,a=n.type,u=n.updateQueue;if(n.updateQueue=null,u!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&qg(i,s),Ku(a,o);var c=Ku(a,s);for(o=0;o<u.length;o+=2){var d=u[o],h=u[o+1];d==="style"?Gg(i,h):d==="dangerouslySetInnerHTML"?_g(i,h):d==="children"?oo(i,h):ff(i,d,h,c)}switch(a){case"input":$u(i,s);break;case"textarea":Kg(i,s);break;case"select":var g=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?Zi(i,!!s.multiple,p,!1):g!==!!s.multiple&&(s.defaultValue!=null?Zi(i,!!s.multiple,s.defaultValue,!0):Zi(i,!!s.multiple,s.multiple?[]:"",!1))}i[po]=s}catch(T){ae(n,n.return,T)}}break;case 6:if(Dt(e,n),Vt(n),r&4){if(n.stateNode===null)throw Error(x(162));i=n.stateNode,s=n.memoizedProps;try{i.nodeValue=s}catch(T){ae(n,n.return,T)}}break;case 3:if(Dt(e,n),Vt(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{co(e.containerInfo)}catch(T){ae(n,n.return,T)}break;case 4:Dt(e,n),Vt(n);break;case 13:Dt(e,n),Vt(n),i=n.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(qf=ge())),r&4&&Ih(n);break;case 22:if(d=t!==null&&t.memoizedState!==null,n.mode&1?(De=(c=De)||d,Dt(e,n),De=c):Dt(e,n),Vt(n),r&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!d&&n.mode&1)for(L=n,d=n.child;d!==null;){for(h=L=d;L!==null;){switch(g=L,p=g.child,g.tag){case 0:case 11:case 14:case 15:Qs(4,g,g.return);break;case 1:Gi(g,g.return);var k=g.stateNode;if(typeof k.componentWillUnmount=="function"){r=g,t=g.return;try{e=r,k.props=e.memoizedProps,k.state=e.memoizedState,k.componentWillUnmount()}catch(T){ae(r,t,T)}}break;case 5:Gi(g,g.return);break;case 22:if(g.memoizedState!==null){Ah(h);continue}}p!==null?(p.return=g,L=p):Ah(h)}d=d.sibling}e:for(d=null,h=n;;){if(h.tag===5){if(d===null){d=h;try{i=h.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,u=h.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=Hg("display",o))}catch(T){ae(n,n.return,T)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(T){ae(n,n.return,T)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===n)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===n)break e;for(;h.sibling===null;){if(h.return===null||h.return===n)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Dt(e,n),Vt(n),r&4&&Ih(n);break;case 21:break;default:Dt(e,n),Vt(n)}}function Vt(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(kp(t)){var r=t;break e}t=t.return}throw Error(x(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(oo(i,""),r.flags&=-33);var s=Th(n);kc(n,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Th(n);Sc(n,a,o);break;default:throw Error(x(161))}}catch(u){ae(n,n.return,u)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function n0(n,e,t){L=n,Ep(n)}function Ep(n,e,t){for(var r=(n.mode&1)!==0;L!==null;){var i=L,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||sa;if(!o){var a=i.alternate,u=a!==null&&a.memoizedState!==null||De;a=sa;var c=De;if(sa=o,(De=u)&&!c)for(L=i;L!==null;)o=L,u=o.child,o.tag===22&&o.memoizedState!==null?xh(i):u!==null?(u.return=o,L=u):xh(i);for(;s!==null;)L=s,Ep(s),s=s.sibling;L=i,sa=a,De=c}Eh(n)}else i.subtreeFlags&8772&&s!==null?(s.return=i,L=s):Eh(n)}}function Eh(n){for(;L!==null;){var e=L;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:De||bl(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!De)if(t===null)r.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:Ot(e.type,t.memoizedProps);r.componentDidUpdate(i,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&ah(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}ah(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&t.focus();break;case"img":u.src&&(t.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&co(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(x(163))}De||e.flags&512&&wc(e)}catch(g){ae(e,e.return,g)}}if(e===n){L=null;break}if(t=e.sibling,t!==null){t.return=e.return,L=t;break}L=e.return}}function Ah(n){for(;L!==null;){var e=L;if(e===n){L=null;break}var t=e.sibling;if(t!==null){t.return=e.return,L=t;break}L=e.return}}function xh(n){for(;L!==null;){var e=L;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{bl(4,e)}catch(u){ae(e,t,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){ae(e,i,u)}}var s=e.return;try{wc(e)}catch(u){ae(e,s,u)}break;case 5:var o=e.return;try{wc(e)}catch(u){ae(e,o,u)}}}catch(u){ae(e,e.return,u)}if(e===n){L=null;break}var a=e.sibling;if(a!==null){a.return=e.return,L=a;break}L=e.return}}var r0=Math.ceil,Qa=Cr.ReactCurrentDispatcher,jf=Cr.ReactCurrentOwner,It=Cr.ReactCurrentBatchConfig,_=0,Te=null,pe=null,Ae=0,Xe=0,Yi=oi(0),we=0,To=null,Ni=0,zl=0,Vf=0,Xs=null,Ue=null,qf=0,gs=1/0,fn=null,Xa=!1,Tc=null,Gr=null,oa=!1,Ur=null,Za=0,Zs=0,Ic=null,Ta=-1,Ia=0;function Je(){return _&6?ge():Ta!==-1?Ta:Ta=ge()}function Yr(n){return n.mode&1?_&2&&Ae!==0?Ae&-Ae:$w.transition!==null?(Ia===0&&(Ia=am()),Ia):(n=Y,n!==0||(n=window.event,n=n===void 0?16:gm(n.type)),n):1}function Mt(n,e,t,r){if(50<Zs)throw Zs=0,Ic=null,Error(x(185));Bo(n,t,r),(!(_&2)||n!==Te)&&(n===Te&&(!(_&2)&&(zl|=t),we===4&&Mr(n,Ae)),Ge(n,r),t===1&&_===0&&!(e.mode&1)&&(gs=ge()+500,Rl&&ai()))}function Ge(n,e){var t=n.callbackNode;$v(n,e);var r=za(n,n===Te?Ae:0);if(r===0)t!==null&&bd(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&bd(t),e===1)n.tag===0?Mw(Nh.bind(null,n)):Lm(Nh.bind(null,n)),bw(function(){!(_&6)&&ai()}),t=null;else{switch(lm(r)){case 1:t=pf;break;case 4:t=sm;break;case 16:t=ba;break;case 536870912:t=om;break;default:t=ba}t=Rp(t,Ap.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function Ap(n,e){if(Ta=-1,Ia=0,_&6)throw Error(x(327));var t=n.callbackNode;if(is()&&n.callbackNode!==t)return null;var r=za(n,n===Te?Ae:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=el(n,r);else{e=r;var i=_;_|=2;var s=Np();(Te!==n||Ae!==e)&&(fn=null,gs=ge()+500,Si(n,e));do try{o0();break}catch(a){xp(n,a)}while(!0);Cf(),Qa.current=s,_=i,pe!==null?e=0:(Te=null,Ae=0,e=we)}if(e!==0){if(e===2&&(i=Yu(n),i!==0&&(r=i,e=Ec(n,i))),e===1)throw t=To,Si(n,0),Mr(n,r),Ge(n,ge()),t;if(e===6)Mr(n,r);else{if(i=n.current.alternate,!(r&30)&&!i0(i)&&(e=el(n,r),e===2&&(s=Yu(n),s!==0&&(r=s,e=Ec(n,s))),e===1))throw t=To,Si(n,0),Mr(n,r),Ge(n,ge()),t;switch(n.finishedWork=i,n.finishedLanes=r,e){case 0:case 1:throw Error(x(345));case 2:hi(n,Ue,fn);break;case 3:if(Mr(n,r),(r&130023424)===r&&(e=qf+500-ge(),10<e)){if(za(n,0)!==0)break;if(i=n.suspendedLanes,(i&r)!==r){Je(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=ic(hi.bind(null,n,Ue,fn),e);break}hi(n,Ue,fn);break;case 4:if(Mr(n,r),(r&4194240)===r)break;for(e=n.eventTimes,i=-1;0<r;){var o=31-Jt(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=ge()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*r0(r/1960))-r,10<r){n.timeoutHandle=ic(hi.bind(null,n,Ue,fn),r);break}hi(n,Ue,fn);break;case 5:hi(n,Ue,fn);break;default:throw Error(x(329))}}}return Ge(n,ge()),n.callbackNode===t?Ap.bind(null,n):null}function Ec(n,e){var t=Xs;return n.current.memoizedState.isDehydrated&&(Si(n,e).flags|=256),n=el(n,e),n!==2&&(e=Ue,Ue=t,e!==null&&Ac(e)),n}function Ac(n){Ue===null?Ue=n:Ue.push.apply(Ue,n)}function i0(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var i=t[r],s=i.getSnapshot;i=i.value;try{if(!Ut(s(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Mr(n,e){for(e&=~Vf,e&=~zl,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-Jt(e),r=1<<t;n[t]=-1,e&=~r}}function Nh(n){if(_&6)throw Error(x(327));is();var e=za(n,0);if(!(e&1))return Ge(n,ge()),null;var t=el(n,e);if(n.tag!==0&&t===2){var r=Yu(n);r!==0&&(e=r,t=Ec(n,r))}if(t===1)throw t=To,Si(n,0),Mr(n,e),Ge(n,ge()),t;if(t===6)throw Error(x(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,hi(n,Ue,fn),Ge(n,ge()),null}function Kf(n,e){var t=_;_|=1;try{return n(e)}finally{_=t,_===0&&(gs=ge()+500,Rl&&ai())}}function Pi(n){Ur!==null&&Ur.tag===0&&!(_&6)&&is();var e=_;_|=1;var t=It.transition,r=Y;try{if(It.transition=null,Y=1,n)return n()}finally{Y=r,It.transition=t,_=e,!(_&6)&&ai()}}function Wf(){Xe=Yi.current,ee(Yi)}function Si(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,Bw(t)),pe!==null)for(t=pe.return;t!==null;){var r=t;switch(xf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ua();break;case 3:ds(),ee(_e),ee(Le),bf();break;case 5:Bf(r);break;case 4:ds();break;case 13:ee(re);break;case 19:ee(re);break;case 10:Df(r.type._context);break;case 22:case 23:Wf()}t=t.return}if(Te=n,pe=n=Qr(n.current,null),Ae=Xe=e,we=0,To=null,Vf=zl=Ni=0,Ue=Xs=null,yi!==null){for(e=0;e<yi.length;e++)if(t=yi[e],r=t.interleaved,r!==null){t.interleaved=null;var i=r.next,s=t.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}t.pending=r}yi=null}return n}function xp(n,e){do{var t=pe;try{if(Cf(),wa.current=Ya,Ga){for(var r=ie.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Ga=!1}if(xi=0,ke=ye=ie=null,Ys=!1,wo=0,jf.current=null,t===null||t.return===null){we=1,To=e,pe=null;break}e:{var s=n,o=t.return,a=t,u=e;if(e=Ae,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var g=d.alternate;g?(d.updateQueue=g.updateQueue,d.memoizedState=g.memoizedState,d.lanes=g.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=gh(o);if(p!==null){p.flags&=-257,mh(p,o,a,s,e),p.mode&1&&hh(s,c,e),e=p,u=c;var k=e.updateQueue;if(k===null){var T=new Set;T.add(u),e.updateQueue=T}else k.add(u);break e}else{if(!(e&1)){hh(s,c,e),_f();break e}u=Error(x(426))}}else if(te&&a.mode&1){var P=gh(o);if(P!==null){!(P.flags&65536)&&(P.flags|=256),mh(P,o,a,s,e),Nf(hs(u,a));break e}}s=u=hs(u,a),we!==4&&(we=2),Xs===null?Xs=[s]:Xs.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var y=up(s,u,e);oh(s,y);break e;case 1:a=u;var m=s.type,v=s.stateNode;if(!(s.flags&128)&&(typeof m.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Gr===null||!Gr.has(v)))){s.flags|=65536,e&=-e,s.lanes|=e;var E=cp(s,a,e);oh(s,E);break e}}s=s.return}while(s!==null)}Cp(t)}catch(C){e=C,pe===t&&t!==null&&(pe=t=t.return);continue}break}while(!0)}function Np(){var n=Qa.current;return Qa.current=Ya,n===null?Ya:n}function _f(){(we===0||we===3||we===2)&&(we=4),Te===null||!(Ni&268435455)&&!(zl&268435455)||Mr(Te,Ae)}function el(n,e){var t=_;_|=2;var r=Np();(Te!==n||Ae!==e)&&(fn=null,Si(n,e));do try{s0();break}catch(i){xp(n,i)}while(!0);if(Cf(),_=t,Qa.current=r,pe!==null)throw Error(x(261));return Te=null,Ae=0,we}function s0(){for(;pe!==null;)Pp(pe)}function o0(){for(;pe!==null&&!Ov();)Pp(pe)}function Pp(n){var e=Op(n.alternate,n,Xe);n.memoizedProps=n.pendingProps,e===null?Cp(n):pe=e,jf.current=null}function Cp(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=Zw(t,e),t!==null){t.flags&=32767,pe=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{we=6,pe=null;return}}else if(t=Xw(t,e,Xe),t!==null){pe=t;return}if(e=e.sibling,e!==null){pe=e;return}pe=e=n}while(e!==null);we===0&&(we=5)}function hi(n,e,t){var r=Y,i=It.transition;try{It.transition=null,Y=1,a0(n,e,t,r)}finally{It.transition=i,Y=r}return null}function a0(n,e,t,r){do is();while(Ur!==null);if(_&6)throw Error(x(327));t=n.finishedWork;var i=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(x(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(Uv(n,s),n===Te&&(pe=Te=null,Ae=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||oa||(oa=!0,Rp(ba,function(){return is(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=It.transition,It.transition=null;var o=Y;Y=1;var a=_;_|=4,jf.current=null,t0(n,t),Ip(t,n),Nw(nc),Fa=!!tc,nc=tc=null,n.current=t,n0(t),Rv(),_=a,Y=o,It.transition=s}else n.current=t;if(oa&&(oa=!1,Ur=n,Za=i),s=n.pendingLanes,s===0&&(Gr=null),bv(t.stateNode),Ge(n,ge()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)i=e[t],r(i.value,{componentStack:i.stack,digest:i.digest});if(Xa)throw Xa=!1,n=Tc,Tc=null,n;return Za&1&&n.tag!==0&&is(),s=n.pendingLanes,s&1?n===Ic?Zs++:(Zs=0,Ic=n):Zs=0,ai(),null}function is(){if(Ur!==null){var n=lm(Za),e=It.transition,t=Y;try{if(It.transition=null,Y=16>n?16:n,Ur===null)var r=!1;else{if(n=Ur,Ur=null,Za=0,_&6)throw Error(x(331));var i=_;for(_|=4,L=n.current;L!==null;){var s=L,o=s.child;if(L.flags&16){var a=s.deletions;if(a!==null){for(var u=0;u<a.length;u++){var c=a[u];for(L=c;L!==null;){var d=L;switch(d.tag){case 0:case 11:case 15:Qs(8,d,s)}var h=d.child;if(h!==null)h.return=d,L=h;else for(;L!==null;){d=L;var g=d.sibling,p=d.return;if(Sp(d),d===c){L=null;break}if(g!==null){g.return=p,L=g;break}L=p}}}var k=s.alternate;if(k!==null){var T=k.child;if(T!==null){k.child=null;do{var P=T.sibling;T.sibling=null,T=P}while(T!==null)}}L=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,L=o;else e:for(;L!==null;){if(s=L,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Qs(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,L=y;break e}L=s.return}}var m=n.current;for(L=m;L!==null;){o=L;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,L=v;else e:for(o=m;L!==null;){if(a=L,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:bl(9,a)}}catch(C){ae(a,a.return,C)}if(a===o){L=null;break e}var E=a.sibling;if(E!==null){E.return=a.return,L=E;break e}L=a.return}}if(_=i,ai(),rn&&typeof rn.onPostCommitFiberRoot=="function")try{rn.onPostCommitFiberRoot(Nl,n)}catch{}r=!0}return r}finally{Y=t,It.transition=e}}return!1}function Ph(n,e,t){e=hs(t,e),e=up(n,e,1),n=Hr(n,e,1),e=Je(),n!==null&&(Bo(n,1,e),Ge(n,e))}function ae(n,e,t){if(n.tag===3)Ph(n,n,t);else for(;e!==null;){if(e.tag===3){Ph(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Gr===null||!Gr.has(r))){n=hs(t,n),n=cp(e,n,1),e=Hr(e,n,1),n=Je(),e!==null&&(Bo(e,1,n),Ge(e,n));break}}e=e.return}}function l0(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=Je(),n.pingedLanes|=n.suspendedLanes&t,Te===n&&(Ae&t)===t&&(we===4||we===3&&(Ae&130023424)===Ae&&500>ge()-qf?Si(n,0):Vf|=t),Ge(n,e)}function Dp(n,e){e===0&&(n.mode&1?(e=Yo,Yo<<=1,!(Yo&130023424)&&(Yo=4194304)):e=1);var t=Je();n=Ar(n,e),n!==null&&(Bo(n,e,t),Ge(n,t))}function u0(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),Dp(n,t)}function c0(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,i=n.memoizedState;i!==null&&(t=i.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(x(314))}r!==null&&r.delete(e),Dp(n,t)}var Op;Op=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||_e.current)qe=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return qe=!1,Qw(n,e,t);qe=!!(n.flags&131072)}else qe=!1,te&&e.flags&1048576&&Bm(e,qa,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ka(n,e),n=e.pendingProps;var i=us(e,Le.current);rs(e,t),i=Ff(null,e,r,n,i,t);var s=Jf();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,He(r)?(s=!0,ja(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Rf(e),i.updater=Ll,e.stateNode=i,i._reactInternals=e,fc(e,r,n,t),e=gc(null,e,r,!0,s,t)):(e.tag=0,te&&s&&Af(e),ze(null,e,i,t),e=e.child),e;case 16:r=e.elementType;e:{switch(ka(n,e),n=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=d0(r),n=Ot(r,n),i){case 0:e=hc(null,e,r,n,t);break e;case 1:e=vh(null,e,r,n,t);break e;case 11:e=ph(null,e,r,n,t);break e;case 14:e=yh(null,e,r,Ot(r.type,n),t);break e}throw Error(x(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ot(r,i),hc(n,e,r,i,t);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ot(r,i),vh(n,e,r,i,t);case 3:e:{if(gp(e),n===null)throw Error(x(387));r=e.pendingProps,s=e.memoizedState,i=s.element,Jm(n,e),_a(e,r,null,t);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=hs(Error(x(423)),e),e=wh(n,e,r,t,i);break e}else if(r!==i){i=hs(Error(x(424)),e),e=wh(n,e,r,t,i);break e}else for(Ze=_r(e.stateNode.containerInfo.firstChild),nt=e,te=!0,bt=null,t=jm(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(cs(),r===i){e=xr(n,e,t);break e}ze(n,e,r,t)}e=e.child}return e;case 5:return Vm(e),n===null&&lc(e),r=e.type,i=e.pendingProps,s=n!==null?n.memoizedProps:null,o=i.children,rc(r,i)?o=null:s!==null&&rc(r,s)&&(e.flags|=32),hp(n,e),ze(n,e,o,t),e.child;case 6:return n===null&&lc(e),null;case 13:return mp(n,e,t);case 4:return Lf(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=fs(e,null,r,t):ze(n,e,r,t),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ot(r,i),ph(n,e,r,i,t);case 7:return ze(n,e,e.pendingProps,t),e.child;case 8:return ze(n,e,e.pendingProps.children,t),e.child;case 12:return ze(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,X(Ka,r._currentValue),r._currentValue=o,s!==null)if(Ut(s.value,o)){if(s.children===i.children&&!_e.current){e=xr(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=Sr(-1,t&-t),u.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?u.next=u:(u.next=d.next,d.next=u),c.pending=u}}s.lanes|=t,u=s.alternate,u!==null&&(u.lanes|=t),uc(s.return,t,e),a.lanes|=t;break}u=u.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(x(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),uc(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}ze(n,e,i.children,t),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,rs(e,t),i=At(i),r=r(i),e.flags|=1,ze(n,e,r,t),e.child;case 14:return r=e.type,i=Ot(r,e.pendingProps),i=Ot(r.type,i),yh(n,e,r,i,t);case 15:return fp(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ot(r,i),ka(n,e),e.tag=1,He(r)?(n=!0,ja(e)):n=!1,rs(e,t),$m(e,r,i),fc(e,r,i,t),gc(null,e,r,!0,n,t);case 19:return pp(n,e,t);case 22:return dp(n,e,t)}throw Error(x(156,e.tag))};function Rp(n,e){return im(n,e)}function f0(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function St(n,e,t,r){return new f0(n,e,t,r)}function Hf(n){return n=n.prototype,!(!n||!n.isReactComponent)}function d0(n){if(typeof n=="function")return Hf(n)?1:0;if(n!=null){if(n=n.$$typeof,n===hf)return 11;if(n===gf)return 14}return 2}function Qr(n,e){var t=n.alternate;return t===null?(t=St(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function Ea(n,e,t,r,i,s){var o=2;if(r=n,typeof n=="function")Hf(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case $i:return ki(t.children,i,s,e);case df:o=8,i|=8;break;case bu:return n=St(12,t,e,i|2),n.elementType=bu,n.lanes=s,n;case zu:return n=St(13,t,e,i),n.elementType=zu,n.lanes=s,n;case Fu:return n=St(19,t,e,i),n.elementType=Fu,n.lanes=s,n;case Ug:return Fl(t,i,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case Mg:o=10;break e;case $g:o=9;break e;case hf:o=11;break e;case gf:o=14;break e;case zr:o=16,r=null;break e}throw Error(x(130,n==null?n:typeof n,""))}return e=St(o,t,e,i),e.elementType=n,e.type=r,e.lanes=s,e}function ki(n,e,t,r){return n=St(7,n,r,e),n.lanes=t,n}function Fl(n,e,t,r){return n=St(22,n,r,e),n.elementType=Ug,n.lanes=t,n.stateNode={isHidden:!1},n}function ku(n,e,t){return n=St(6,n,null,e),n.lanes=t,n}function Tu(n,e,t){return e=St(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function h0(n,e,t,r,i){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=nu(0),this.expirationTimes=nu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=nu(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Gf(n,e,t,r,i,s,o,a,u){return n=new h0(n,e,t,a,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=St(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},Rf(s),n}function g0(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Mi,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function Lp(n){if(!n)return ni;n=n._reactInternals;e:{if(Li(n)!==n||n.tag!==1)throw Error(x(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(He(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(x(171))}if(n.tag===1){var t=n.type;if(He(t))return Rm(n,t,e)}return e}function Bp(n,e,t,r,i,s,o,a,u){return n=Gf(t,r,!0,n,i,s,o,a,u),n.context=Lp(null),t=n.current,r=Je(),i=Yr(t),s=Sr(r,i),s.callback=e??null,Hr(t,s,i),n.current.lanes=i,Bo(n,i,r),Ge(n,r),n}function Jl(n,e,t,r){var i=e.current,s=Je(),o=Yr(i);return t=Lp(t),e.context===null?e.context=t:e.pendingContext=t,e=Sr(s,o),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=Hr(i,e,o),n!==null&&(Mt(n,i,o,s),va(n,i,o)),o}function tl(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Ch(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function Yf(n,e){Ch(n,e),(n=n.alternate)&&Ch(n,e)}function m0(){return null}var bp=typeof reportError=="function"?reportError:function(n){console.error(n)};function Qf(n){this._internalRoot=n}Ml.prototype.render=Qf.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(x(409));Jl(n,e,null,null)};Ml.prototype.unmount=Qf.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Pi(function(){Jl(null,n,null,null)}),e[Er]=null}};function Ml(n){this._internalRoot=n}Ml.prototype.unstable_scheduleHydration=function(n){if(n){var e=fm();n={blockedOn:null,target:n,priority:e};for(var t=0;t<Jr.length&&e!==0&&e<Jr[t].priority;t++);Jr.splice(t,0,n),t===0&&hm(n)}};function Xf(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function $l(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Dh(){}function p0(n,e,t,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=tl(o);s.call(c)}}var o=Bp(e,r,n,0,null,!1,!1,"",Dh);return n._reactRootContainer=o,n[Er]=o.current,go(n.nodeType===8?n.parentNode:n),Pi(),o}for(;i=n.lastChild;)n.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=tl(u);a.call(c)}}var u=Gf(n,0,!1,null,null,!1,!1,"",Dh);return n._reactRootContainer=u,n[Er]=u.current,go(n.nodeType===8?n.parentNode:n),Pi(function(){Jl(e,u,t,r)}),u}function Ul(n,e,t,r,i){var s=t._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var u=tl(o);a.call(u)}}Jl(e,o,n,i)}else o=p0(t,e,n,i,r);return tl(o)}um=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=js(e.pendingLanes);t!==0&&(yf(e,t|1),Ge(e,ge()),!(_&6)&&(gs=ge()+500,ai()))}break;case 13:Pi(function(){var r=Ar(n,1);if(r!==null){var i=Je();Mt(r,n,1,i)}}),Yf(n,1)}};vf=function(n){if(n.tag===13){var e=Ar(n,134217728);if(e!==null){var t=Je();Mt(e,n,134217728,t)}Yf(n,134217728)}};cm=function(n){if(n.tag===13){var e=Yr(n),t=Ar(n,e);if(t!==null){var r=Je();Mt(t,n,e,r)}Yf(n,e)}};fm=function(){return Y};dm=function(n,e){var t=Y;try{return Y=n,e()}finally{Y=t}};_u=function(n,e,t){switch(e){case"input":if($u(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var i=Ol(r);if(!i)throw Error(x(90));Vg(r),$u(r,i)}}}break;case"textarea":Kg(n,t);break;case"select":e=t.value,e!=null&&Zi(n,!!t.multiple,e,!1)}};Xg=Kf;Zg=Pi;var y0={usingClientEntryPoint:!1,Events:[zo,qi,Ol,Yg,Qg,Kf]},zs={findFiberByHostInstance:pi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},v0={bundleType:zs.bundleType,version:zs.version,rendererPackageName:zs.rendererPackageName,rendererConfig:zs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Cr.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=nm(n),n===null?null:n.stateNode},findFiberByHostInstance:zs.findFiberByHostInstance||m0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var aa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!aa.isDisabled&&aa.supportsFiber)try{Nl=aa.inject(v0),rn=aa}catch{}}ot.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=y0;ot.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Xf(e))throw Error(x(200));return g0(n,e,null,t)};ot.createRoot=function(n,e){if(!Xf(n))throw Error(x(299));var t=!1,r="",i=bp;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Gf(n,1,!1,null,null,t,!1,r,i),n[Er]=e.current,go(n.nodeType===8?n.parentNode:n),new Qf(e)};ot.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(x(188)):(n=Object.keys(n).join(","),Error(x(268,n)));return n=nm(e),n=n===null?null:n.stateNode,n};ot.flushSync=function(n){return Pi(n)};ot.hydrate=function(n,e,t){if(!$l(e))throw Error(x(200));return Ul(null,n,e,!0,t)};ot.hydrateRoot=function(n,e,t){if(!Xf(n))throw Error(x(405));var r=t!=null&&t.hydratedSources||null,i=!1,s="",o=bp;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=Bp(e,null,n,1,t??null,i,!1,s,o),n[Er]=e.current,go(n),r)for(n=0;n<r.length;n++)t=r[n],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new Ml(e)};ot.render=function(n,e,t){if(!$l(e))throw Error(x(200));return Ul(null,n,e,!1,t)};ot.unmountComponentAtNode=function(n){if(!$l(n))throw Error(x(40));return n._reactRootContainer?(Pi(function(){Ul(null,null,n,!1,function(){n._reactRootContainer=null,n[Er]=null})}),!0):!1};ot.unstable_batchedUpdates=Kf;ot.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!$l(t))throw Error(x(200));if(n==null||n._reactInternals===void 0)throw Error(x(38));return Ul(n,e,t,!1,r)};ot.version="18.2.0-next-9e3b772b8-20220608";function zp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(zp)}catch(n){console.error(n)}}zp(),Bg.exports=ot;var w0=Bg.exports,Oh=w0;Lu.createRoot=Oh.createRoot,Lu.hydrateRoot=Oh.hydrateRoot;var q;(function(n){n[n.Canceled=1]="Canceled",n[n.Unknown=2]="Unknown",n[n.InvalidArgument=3]="InvalidArgument",n[n.DeadlineExceeded=4]="DeadlineExceeded",n[n.NotFound=5]="NotFound",n[n.AlreadyExists=6]="AlreadyExists",n[n.PermissionDenied=7]="PermissionDenied",n[n.ResourceExhausted=8]="ResourceExhausted",n[n.FailedPrecondition=9]="FailedPrecondition",n[n.Aborted=10]="Aborted",n[n.OutOfRange=11]="OutOfRange",n[n.Unimplemented=12]="Unimplemented",n[n.Internal=13]="Internal",n[n.Unavailable=14]="Unavailable",n[n.DataLoss=15]="DataLoss",n[n.Unauthenticated=16]="Unauthenticated"})(q||(q={}));function Rh(n){const e=q[n];return typeof e!="string"?n.toString():e[0].toLowerCase()+e.substring(1).replace(/[A-Z]/g,t=>"_"+t.toLowerCase())}class G extends Error{constructor(e,t=q.Unknown,r,i,s){super(S0(e,t)),this.name="ConnectError",Object.setPrototypeOf(this,new.target.prototype),this.rawMessage=e,this.code=t,this.metadata=new Headers(r??{}),this.details=i??[],this.cause=s}static from(e,t=q.Unknown){return e instanceof G?e:e instanceof Error?e.name=="AbortError"?new G(e.message,q.Canceled):new G(e.message,t,void 0,void 0,e):new G(String(e),t,void 0,void 0,e)}static[Symbol.hasInstance](e){return e instanceof Error?Object.getPrototypeOf(e)===G.prototype?!0:e.name==="ConnectError"&&"code"in e&&typeof e.code=="number"&&"metadata"in e&&"details"in e&&Array.isArray(e.details)&&"rawMessage"in e&&typeof e.rawMessage=="string"&&"cause"in e:!1}findDetails(e){const t="typeName"in e?{findMessage:i=>i===e.typeName?e:void 0}:e,r=[];for(const i of this.details){if("getType"in i){t.findMessage(i.getType().typeName)&&r.push(i);continue}const s=t.findMessage(i.type);if(s)try{r.push(s.fromBinary(i.value))}catch{}}return r}}function S0(n,e){return n.length?`[${Rh(e)}] ${n}`:`[${Rh(e)}]`}function le(n,e){if(!n)throw new Error(e)}const k0=34028234663852886e22,T0=-34028234663852886e22,I0=4294967295,E0=2147483647,A0=-2147483648;function Aa(n){if(typeof n!="number")throw new Error("invalid int 32: "+typeof n);if(!Number.isInteger(n)||n>E0||n<A0)throw new Error("invalid int 32: "+n)}function xc(n){if(typeof n!="number")throw new Error("invalid uint 32: "+typeof n);if(!Number.isInteger(n)||n>I0||n<0)throw new Error("invalid uint 32: "+n)}function Fp(n){if(typeof n!="number")throw new Error("invalid float 32: "+typeof n);if(Number.isFinite(n)&&(n>k0||n<T0))throw new Error("invalid float 32: "+n)}const Jp=Symbol("@bufbuild/protobuf/enum-type");function x0(n){const e=n[Jp];return le(e,"missing enum type on enum object"),e}function Mp(n,e,t,r){n[Jp]=$p(e,t.map(i=>({no:i.no,name:i.name,localName:n[i.no]})))}function $p(n,e,t){const r=Object.create(null),i=Object.create(null),s=[];for(const o of e){const a=Up(o);s.push(a),r[o.name]=a,i[o.no]=a}return{typeName:n,values:s,findName(o){return r[o]},findNumber(o){return i[o]}}}function N0(n,e,t){const r={};for(const i of e){const s=Up(i);r[s.localName]=s.no,r[s.no]=s.localName}return Mp(r,n,e),r}function Up(n){return"localName"in n?n:Object.assign(Object.assign({},n),{localName:n.name})}class O{equals(e){return this.getType().runtime.util.equals(this.getType(),this,e)}clone(){return this.getType().runtime.util.clone(this)}fromBinary(e,t){const r=this.getType(),i=r.runtime.bin,s=i.makeReadOptions(t);return i.readMessage(this,s.readerFactory(e),e.byteLength,s),this}fromJson(e,t){const r=this.getType(),i=r.runtime.json,s=i.makeReadOptions(t);return i.readMessage(r,e,s,this),this}fromJsonString(e,t){let r;try{r=JSON.parse(e)}catch(i){throw new Error(`cannot decode ${this.getType().typeName} from JSON: ${i instanceof Error?i.message:String(i)}`)}return this.fromJson(r,t)}toBinary(e){const t=this.getType(),r=t.runtime.bin,i=r.makeWriteOptions(e),s=i.writerFactory();return r.writeMessage(this,s,i),s.finish()}toJson(e){const t=this.getType(),r=t.runtime.json,i=r.makeWriteOptions(e);return r.writeMessage(this,i)}toJsonString(e){var t;const r=this.toJson(e);return JSON.stringify(r,null,(t=e==null?void 0:e.prettySpaces)!==null&&t!==void 0?t:0)}toJSON(){return this.toJson({emitDefaultValues:!0})}getType(){return Object.getPrototypeOf(this).constructor}}function P0(n,e,t,r){var i;const s=(i=r==null?void 0:r.localName)!==null&&i!==void 0?i:e.substring(e.lastIndexOf(".")+1),o={[s]:function(a){n.util.initFields(this),n.util.initPartial(a,this)}}[s];return Object.setPrototypeOf(o.prototype,new O),Object.assign(o,{runtime:n,typeName:e,fields:n.util.newFieldList(t),fromBinary(a,u){return new o().fromBinary(a,u)},fromJson(a,u){return new o().fromJson(a,u)},fromJsonString(a,u){return new o().fromJsonString(a,u)},equals(a,u){return n.util.equals(o,a,u)}}),o}function C0(){let n=0,e=0;for(let r=0;r<28;r+=7){let i=this.buf[this.pos++];if(n|=(i&127)<<r,!(i&128))return this.assertBounds(),[n,e]}let t=this.buf[this.pos++];if(n|=(t&15)<<28,e=(t&112)>>4,!(t&128))return this.assertBounds(),[n,e];for(let r=3;r<=31;r+=7){let i=this.buf[this.pos++];if(e|=(i&127)<<r,!(i&128))return this.assertBounds(),[n,e]}throw new Error("invalid varint")}function Iu(n,e,t){for(let s=0;s<28;s=s+7){const o=n>>>s,a=!(!(o>>>7)&&e==0),u=(a?o|128:o)&255;if(t.push(u),!a)return}const r=n>>>28&15|(e&7)<<4,i=!!(e>>3);if(t.push((i?r|128:r)&255),!!i){for(let s=3;s<31;s=s+7){const o=e>>>s,a=!!(o>>>7),u=(a?o|128:o)&255;if(t.push(u),!a)return}t.push(e>>>31&1)}}const xa=4294967296;function Lh(n){const e=n[0]==="-";e&&(n=n.slice(1));const t=1e6;let r=0,i=0;function s(o,a){const u=Number(n.slice(o,a));i*=t,r=r*t+u,r>=xa&&(i=i+(r/xa|0),r=r%xa)}return s(-24,-18),s(-18,-12),s(-12,-6),s(-6),e?Vp(r,i):Zf(r,i)}function D0(n,e){let t=Zf(n,e);const r=t.hi&2147483648;r&&(t=Vp(t.lo,t.hi));const i=jp(t.lo,t.hi);return r?"-"+i:i}function jp(n,e){if({lo:n,hi:e}=O0(n,e),e<=2097151)return String(xa*e+n);const t=n&16777215,r=(n>>>24|e<<8)&16777215,i=e>>16&65535;let s=t+r*6777216+i*6710656,o=r+i*8147497,a=i*2;const u=1e7;return s>=u&&(o+=Math.floor(s/u),s%=u),o>=u&&(a+=Math.floor(o/u),o%=u),a.toString()+Bh(o)+Bh(s)}function O0(n,e){return{lo:n>>>0,hi:e>>>0}}function Zf(n,e){return{lo:n|0,hi:e|0}}function Vp(n,e){return e=~e,n?n=~n+1:e+=1,Zf(n,e)}const Bh=n=>{const e=String(n);return"0000000".slice(e.length)+e};function bh(n,e){if(n>=0){for(;n>127;)e.push(n&127|128),n=n>>>7;e.push(n)}else{for(let t=0;t<9;t++)e.push(n&127|128),n=n>>7;e.push(1)}}function R0(){let n=this.buf[this.pos++],e=n&127;if(!(n&128))return this.assertBounds(),e;if(n=this.buf[this.pos++],e|=(n&127)<<7,!(n&128))return this.assertBounds(),e;if(n=this.buf[this.pos++],e|=(n&127)<<14,!(n&128))return this.assertBounds(),e;if(n=this.buf[this.pos++],e|=(n&127)<<21,!(n&128))return this.assertBounds(),e;n=this.buf[this.pos++],e|=(n&15)<<28;for(let t=5;n&128&&t<10;t++)n=this.buf[this.pos++];if(n&128)throw new Error("invalid varint");return this.assertBounds(),e>>>0}var zh={};function L0(){const n=new DataView(new ArrayBuffer(8));if(typeof BigInt=="function"&&typeof n.getBigInt64=="function"&&typeof n.getBigUint64=="function"&&typeof n.setBigInt64=="function"&&typeof n.setBigUint64=="function"&&(typeof process!="object"||typeof zh!="object"||zh.BUF_BIGINT_DISABLE!=="1")){const i=BigInt("-9223372036854775808"),s=BigInt("9223372036854775807"),o=BigInt("0"),a=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(u){const c=typeof u=="bigint"?u:BigInt(u);if(c>s||c<i)throw new Error(`int64 invalid: ${u}`);return c},uParse(u){const c=typeof u=="bigint"?u:BigInt(u);if(c>a||c<o)throw new Error(`uint64 invalid: ${u}`);return c},enc(u){return n.setBigInt64(0,this.parse(u),!0),{lo:n.getInt32(0,!0),hi:n.getInt32(4,!0)}},uEnc(u){return n.setBigInt64(0,this.uParse(u),!0),{lo:n.getInt32(0,!0),hi:n.getInt32(4,!0)}},dec(u,c){return n.setInt32(0,u,!0),n.setInt32(4,c,!0),n.getBigInt64(0,!0)},uDec(u,c){return n.setInt32(0,u,!0),n.setInt32(4,c,!0),n.getBigUint64(0,!0)}}}const t=i=>le(/^-?[0-9]+$/.test(i),`int64 invalid: ${i}`),r=i=>le(/^[0-9]+$/.test(i),`uint64 invalid: ${i}`);return{zero:"0",supported:!1,parse(i){return typeof i!="string"&&(i=i.toString()),t(i),i},uParse(i){return typeof i!="string"&&(i=i.toString()),r(i),i},enc(i){return typeof i!="string"&&(i=i.toString()),t(i),Lh(i)},uEnc(i){return typeof i!="string"&&(i=i.toString()),r(i),Lh(i)},dec(i,s){return D0(i,s)},uDec(i,s){return jp(i,s)}}}const ne=L0();var I;(function(n){n[n.DOUBLE=1]="DOUBLE",n[n.FLOAT=2]="FLOAT",n[n.INT64=3]="INT64",n[n.UINT64=4]="UINT64",n[n.INT32=5]="INT32",n[n.FIXED64=6]="FIXED64",n[n.FIXED32=7]="FIXED32",n[n.BOOL=8]="BOOL",n[n.STRING=9]="STRING",n[n.BYTES=12]="BYTES",n[n.UINT32=13]="UINT32",n[n.SFIXED32=15]="SFIXED32",n[n.SFIXED64=16]="SFIXED64",n[n.SINT32=17]="SINT32",n[n.SINT64=18]="SINT64"})(I||(I={}));var ri;(function(n){n[n.BIGINT=0]="BIGINT",n[n.STRING=1]="STRING"})(ri||(ri={}));function Rr(n,e,t){if(e===t)return!0;if(n==I.BYTES){if(!(e instanceof Uint8Array)||!(t instanceof Uint8Array)||e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}switch(n){case I.UINT64:case I.FIXED64:case I.INT64:case I.SFIXED64:case I.SINT64:return e==t}return!1}function ms(n,e){switch(n){case I.BOOL:return!1;case I.UINT64:case I.FIXED64:case I.INT64:case I.SFIXED64:case I.SINT64:return e==0?ne.zero:"0";case I.DOUBLE:case I.FLOAT:return 0;case I.BYTES:return new Uint8Array(0);case I.STRING:return"";default:return 0}}function qp(n,e){switch(n){case I.BOOL:return e===!1;case I.STRING:return e==="";case I.BYTES:return e instanceof Uint8Array&&!e.byteLength;default:return e==0}}var me;(function(n){n[n.Varint=0]="Varint",n[n.Bit64=1]="Bit64",n[n.LengthDelimited=2]="LengthDelimited",n[n.StartGroup=3]="StartGroup",n[n.EndGroup=4]="EndGroup",n[n.Bit32=5]="Bit32"})(me||(me={}));class B0{constructor(e){this.stack=[],this.textEncoder=e??new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let e=0;for(let i=0;i<this.chunks.length;i++)e+=this.chunks[i].length;let t=new Uint8Array(e),r=0;for(let i=0;i<this.chunks.length;i++)t.set(this.chunks[i],r),r+=this.chunks[i].length;return this.chunks=[],t}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),t=this.stack.pop();if(!t)throw new Error("invalid state, fork stack empty");return this.chunks=t.chunks,this.buf=t.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,t){return this.uint32((e<<3|t)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(xc(e);e>127;)this.buf.push(e&127|128),e=e>>>7;return this.buf.push(e),this}int32(e){return Aa(e),bh(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let t=this.textEncoder.encode(e);return this.uint32(t.byteLength),this.raw(t)}float(e){Fp(e);let t=new Uint8Array(4);return new DataView(t.buffer).setFloat32(0,e,!0),this.raw(t)}double(e){let t=new Uint8Array(8);return new DataView(t.buffer).setFloat64(0,e,!0),this.raw(t)}fixed32(e){xc(e);let t=new Uint8Array(4);return new DataView(t.buffer).setUint32(0,e,!0),this.raw(t)}sfixed32(e){Aa(e);let t=new Uint8Array(4);return new DataView(t.buffer).setInt32(0,e,!0),this.raw(t)}sint32(e){return Aa(e),e=(e<<1^e>>31)>>>0,bh(e,this.buf),this}sfixed64(e){let t=new Uint8Array(8),r=new DataView(t.buffer),i=ne.enc(e);return r.setInt32(0,i.lo,!0),r.setInt32(4,i.hi,!0),this.raw(t)}fixed64(e){let t=new Uint8Array(8),r=new DataView(t.buffer),i=ne.uEnc(e);return r.setInt32(0,i.lo,!0),r.setInt32(4,i.hi,!0),this.raw(t)}int64(e){let t=ne.enc(e);return Iu(t.lo,t.hi,this.buf),this}sint64(e){let t=ne.enc(e),r=t.hi>>31,i=t.lo<<1^r,s=(t.hi<<1|t.lo>>>31)^r;return Iu(i,s,this.buf),this}uint64(e){let t=ne.uEnc(e);return Iu(t.lo,t.hi,this.buf),this}}class b0{constructor(e,t){this.varint64=C0,this.uint32=R0,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength),this.textDecoder=t??new TextDecoder}tag(){let e=this.uint32(),t=e>>>3,r=e&7;if(t<=0||r<0||r>5)throw new Error("illegal tag: field no "+t+" wire type "+r);return[t,r]}skip(e,t){let r=this.pos;switch(e){case me.Varint:for(;this.buf[this.pos++]&128;);break;case me.Bit64:this.pos+=4;case me.Bit32:this.pos+=4;break;case me.LengthDelimited:let i=this.uint32();this.pos+=i;break;case me.StartGroup:for(;;){const[s,o]=this.tag();if(o===me.EndGroup){if(t!==void 0&&s!==t)throw new Error("invalid end group tag");break}this.skip(o,s)}break;default:throw new Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(r,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let e=this.uint32();return e>>>1^-(e&1)}int64(){return ne.dec(...this.varint64())}uint64(){return ne.uDec(...this.varint64())}sint64(){let[e,t]=this.varint64(),r=-(e&1);return e=(e>>>1|(t&1)<<31)^r,t=t>>>1^r,ne.dec(e,t)}bool(){let[e,t]=this.varint64();return e!==0||t!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return ne.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return ne.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),t=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(t,t+e)}string(){return this.textDecoder.decode(this.bytes())}}function z0(n,e,t,r){let i;return{typeName:e,extendee:t,get field(){if(!i){const s=typeof r=="function"?r():r;s.name=e.split(".").pop(),s.jsonName=`[${e}]`,i=n.util.newFieldList([s]).list()[0]}return i},runtime:n}}function Kp(n){const e=n.field.localName,t=Object.create(null);return t[e]=F0(n),[t,()=>t[e]]}function F0(n){const e=n.field;if(e.repeated)return[];if(e.default!==void 0)return e.default;switch(e.kind){case"enum":return e.T.values[0].no;case"scalar":return ms(e.T,e.L);case"message":const t=e.T,r=new t;return t.fieldWrapper?t.fieldWrapper.unwrapField(r):r;case"map":throw"map fields are not allowed to be extensions"}}function J0(n,e){if(!e.repeated&&(e.kind=="enum"||e.kind=="scalar")){for(let t=n.length-1;t>=0;--t)if(n[t].no==e.no)return[n[t]];return[]}return n.filter(t=>t.no===e.no)}let gr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),jl=[];for(let n=0;n<gr.length;n++)jl[gr[n].charCodeAt(0)]=n;jl[45]=gr.indexOf("+");jl[95]=gr.indexOf("/");const ed={dec(n){let e=n.length*3/4;n[n.length-2]=="="?e-=2:n[n.length-1]=="="&&(e-=1);let t=new Uint8Array(e),r=0,i=0,s,o=0;for(let a=0;a<n.length;a++){if(s=jl[n.charCodeAt(a)],s===void 0)switch(n[a]){case"=":i=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(i){case 0:o=s,i=1;break;case 1:t[r++]=o<<2|(s&48)>>4,o=s,i=2;break;case 2:t[r++]=(o&15)<<4|(s&60)>>2,o=s,i=3;break;case 3:t[r++]=(o&3)<<6|s,i=0;break}}if(i==1)throw Error("invalid base64 string.");return t.subarray(0,r)},enc(n){let e="",t=0,r,i=0;for(let s=0;s<n.length;s++)switch(r=n[s],t){case 0:e+=gr[r>>2],i=(r&3)<<4,t=1;break;case 1:e+=gr[i|r>>4],i=(r&15)<<2,t=2;break;case 2:e+=gr[i|r>>6],e+=gr[r&63],t=0;break}return t&&(e+=gr[i],e+="=",t==1&&(e+="=")),e}};function M0(n,e,t){_p(e,n);const r=e.runtime.bin.makeReadOptions(t),i=J0(n.getType().runtime.bin.listUnknownFields(n),e.field),[s,o]=Kp(e);for(const a of i)e.runtime.bin.readField(s,r.readerFactory(a.data),e.field,a.wireType,r);return o()}function $0(n,e,t,r){_p(e,n);const i=e.runtime.bin.makeReadOptions(r),s=e.runtime.bin.makeWriteOptions(r);if(Wp(n,e)){const c=n.getType().runtime.bin.listUnknownFields(n).filter(d=>d.no!=e.field.no);n.getType().runtime.bin.discardUnknownFields(n);for(const d of c)n.getType().runtime.bin.onUnknownField(n,d.no,d.wireType,d.data)}const o=s.writerFactory();let a=e.field;!a.opt&&!a.repeated&&(a.kind=="enum"||a.kind=="scalar")&&(a=Object.assign(Object.assign({},e.field),{opt:!0})),e.runtime.bin.writeField(a,t,o,s);const u=i.readerFactory(o.finish());for(;u.pos<u.len;){const[c,d]=u.tag(),h=u.skip(d,c);n.getType().runtime.bin.onUnknownField(n,c,d,h)}}function Wp(n,e){const t=n.getType();return e.extendee.typeName===t.typeName&&!!t.runtime.bin.listUnknownFields(n).find(r=>r.no==e.field.no)}function _p(n,e){le(n.extendee.typeName==e.getType().typeName,`extension ${n.typeName} can only be applied to message ${n.extendee.typeName}`)}function Hp(n,e){const t=n.localName;if(n.repeated)return e[t].length>0;if(n.oneof)return e[n.oneof.localName].case===t;switch(n.kind){case"enum":case"scalar":return n.opt||n.req?e[t]!==void 0:n.kind=="enum"?e[t]!==n.T.values[0].no:!qp(n.T,e[t]);case"message":return e[t]!==void 0;case"map":return Object.keys(e[t]).length>0}}function Fh(n,e){const t=n.localName,r=!n.opt&&!n.req;if(n.repeated)e[t]=[];else if(n.oneof)e[n.oneof.localName]={case:void 0};else switch(n.kind){case"map":e[t]={};break;case"enum":e[t]=r?n.T.values[0].no:void 0;break;case"scalar":e[t]=r?ms(n.T,n.L):void 0;break;case"message":e[t]=void 0;break}}function Ti(n,e){if(n===null||typeof n!="object"||!Object.getOwnPropertyNames(O.prototype).every(r=>r in n&&typeof n[r]=="function"))return!1;const t=n.getType();return t===null||typeof t!="function"||!("typeName"in t)||typeof t.typeName!="string"?!1:e===void 0?!0:t.typeName==e.typeName}function Gp(n,e){return Ti(e)||!n.fieldWrapper?e:n.fieldWrapper.wrapField(e)}I.DOUBLE,I.FLOAT,I.INT64,I.UINT64,I.INT32,I.UINT32,I.BOOL,I.STRING,I.BYTES;const Jh={ignoreUnknownFields:!1},Mh={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0};function U0(n){return n?Object.assign(Object.assign({},Jh),n):Jh}function j0(n){return n?Object.assign(Object.assign({},Mh),n):Mh}const nl=Symbol(),Na=Symbol();function V0(){return{makeReadOptions:U0,makeWriteOptions:j0,readMessage(n,e,t,r){if(e==null||Array.isArray(e)||typeof e!="object")throw new Error(`cannot decode message ${n.typeName} from JSON: ${Wt(e)}`);r=r??new n;const i=new Map,s=t.typeRegistry;for(const[o,a]of Object.entries(e)){const u=n.fields.findJsonName(o);if(u){if(u.oneof){if(a===null&&u.kind=="scalar")continue;const c=i.get(u.oneof);if(c!==void 0)throw new Error(`cannot decode message ${n.typeName} from JSON: multiple keys for oneof "${u.oneof.name}" present: "${c}", "${o}"`);i.set(u.oneof,o)}$h(r,a,u,t,n)}else{let c=!1;if(s!=null&&s.findExtension&&o.startsWith("[")&&o.endsWith("]")){const d=s.findExtension(o.substring(1,o.length-1));if(d&&d.extendee.typeName==n.typeName){c=!0;const[h,g]=Kp(d);$h(h,a,d.field,t,d),$0(r,d,g(),t)}}if(!c&&!t.ignoreUnknownFields)throw new Error(`cannot decode message ${n.typeName} from JSON: key "${o}" is unknown`)}}return r},writeMessage(n,e){const t=n.getType(),r={};let i;try{for(i of t.fields.byNumber()){if(!Hp(i,n)){if(i.req)throw"required field not set";if(!e.emitDefaultValues||!K0(i))continue}const o=i.oneof?n[i.oneof.localName].value:n[i.localName],a=Uh(i,o,e);a!==void 0&&(r[e.useProtoFieldName?i.name:i.jsonName]=a)}const s=e.typeRegistry;if(s!=null&&s.findExtensionFor)for(const o of t.runtime.bin.listUnknownFields(n)){const a=s.findExtensionFor(t.typeName,o.no);if(a&&Wp(n,a)){const u=M0(n,a,e),c=Uh(a.field,u,e);c!==void 0&&(r[a.field.jsonName]=c)}}}catch(s){const o=i?`cannot encode field ${t.typeName}.${i.name} to JSON`:`cannot encode message ${t.typeName} to JSON`,a=s instanceof Error?s.message:String(s);throw new Error(o+(a.length>0?`: ${a}`:""))}return r},readScalar(n,e,t){return eo(n,e,t??ri.BIGINT,!0)},writeScalar(n,e,t){if(e!==void 0&&(t||qp(n,e)))return Pa(n,e)},debug:Wt}}function Wt(n){if(n===null)return"null";switch(typeof n){case"object":return Array.isArray(n)?"array":"object";case"string":return n.length>100?"string":`"${n.split('"').join('\\"')}"`;default:return String(n)}}function $h(n,e,t,r,i){let s=t.localName;if(t.repeated){if(le(t.kind!="map"),e===null)return;if(!Array.isArray(e))throw new Error(`cannot decode field ${i.typeName}.${t.name} from JSON: ${Wt(e)}`);const o=n[s];for(const a of e){if(a===null)throw new Error(`cannot decode field ${i.typeName}.${t.name} from JSON: ${Wt(a)}`);switch(t.kind){case"message":o.push(t.T.fromJson(a,r));break;case"enum":const u=Eu(t.T,a,r.ignoreUnknownFields,!0);u!==Na&&o.push(u);break;case"scalar":try{o.push(eo(t.T,a,t.L,!0))}catch(c){let d=`cannot decode field ${i.typeName}.${t.name} from JSON: ${Wt(a)}`;throw c instanceof Error&&c.message.length>0&&(d+=`: ${c.message}`),new Error(d)}break}}}else if(t.kind=="map"){if(e===null)return;if(typeof e!="object"||Array.isArray(e))throw new Error(`cannot decode field ${i.typeName}.${t.name} from JSON: ${Wt(e)}`);const o=n[s];for(const[a,u]of Object.entries(e)){if(u===null)throw new Error(`cannot decode field ${i.typeName}.${t.name} from JSON: map value null`);let c;try{c=q0(t.K,a)}catch(d){let h=`cannot decode map key for field ${i.typeName}.${t.name} from JSON: ${Wt(e)}`;throw d instanceof Error&&d.message.length>0&&(h+=`: ${d.message}`),new Error(h)}switch(t.V.kind){case"message":o[c]=t.V.T.fromJson(u,r);break;case"enum":const d=Eu(t.V.T,u,r.ignoreUnknownFields,!0);d!==Na&&(o[c]=d);break;case"scalar":try{o[c]=eo(t.V.T,u,ri.BIGINT,!0)}catch(h){let g=`cannot decode map value for field ${i.typeName}.${t.name} from JSON: ${Wt(e)}`;throw h instanceof Error&&h.message.length>0&&(g+=`: ${h.message}`),new Error(g)}break}}}else switch(t.oneof&&(n=n[t.oneof.localName]={case:s},s="value"),t.kind){case"message":const o=t.T;if(e===null&&o.typeName!="google.protobuf.Value")return;let a=n[s];Ti(a)?a.fromJson(e,r):(n[s]=a=o.fromJson(e,r),o.fieldWrapper&&!t.oneof&&(n[s]=o.fieldWrapper.unwrapField(a)));break;case"enum":const u=Eu(t.T,e,r.ignoreUnknownFields,!1);switch(u){case nl:Fh(t,n);break;case Na:break;default:n[s]=u;break}break;case"scalar":try{const c=eo(t.T,e,t.L,!1);switch(c){case nl:Fh(t,n);break;default:n[s]=c;break}}catch(c){let d=`cannot decode field ${i.typeName}.${t.name} from JSON: ${Wt(e)}`;throw c instanceof Error&&c.message.length>0&&(d+=`: ${c.message}`),new Error(d)}break}}function q0(n,e){if(n===I.BOOL)switch(e){case"true":e=!0;break;case"false":e=!1;break}return eo(n,e,ri.BIGINT,!0).toString()}function eo(n,e,t,r){if(e===null)return r?ms(n,t):nl;switch(n){case I.DOUBLE:case I.FLOAT:if(e==="NaN")return Number.NaN;if(e==="Infinity")return Number.POSITIVE_INFINITY;if(e==="-Infinity")return Number.NEGATIVE_INFINITY;if(e===""||typeof e=="string"&&e.trim().length!==e.length||typeof e!="string"&&typeof e!="number")break;const i=Number(e);if(Number.isNaN(i)||!Number.isFinite(i))break;return n==I.FLOAT&&Fp(i),i;case I.INT32:case I.FIXED32:case I.SFIXED32:case I.SINT32:case I.UINT32:let s;if(typeof e=="number"?s=e:typeof e=="string"&&e.length>0&&e.trim().length===e.length&&(s=Number(e)),s===void 0)break;return n==I.UINT32||n==I.FIXED32?xc(s):Aa(s),s;case I.INT64:case I.SFIXED64:case I.SINT64:if(typeof e!="number"&&typeof e!="string")break;const o=ne.parse(e);return t?o.toString():o;case I.FIXED64:case I.UINT64:if(typeof e!="number"&&typeof e!="string")break;const a=ne.uParse(e);return t?a.toString():a;case I.BOOL:if(typeof e!="boolean")break;return e;case I.STRING:if(typeof e!="string")break;try{encodeURIComponent(e)}catch{throw new Error("invalid UTF8")}return e;case I.BYTES:if(e==="")return new Uint8Array(0);if(typeof e!="string")break;return ed.dec(e)}throw new Error}function Eu(n,e,t,r){if(e===null)return n.typeName=="google.protobuf.NullValue"?0:r?n.values[0].no:nl;switch(typeof e){case"number":if(Number.isInteger(e))return e;break;case"string":const i=n.findName(e);if(i!==void 0)return i.no;if(t)return Na;break}throw new Error(`cannot decode enum ${n.typeName} from JSON: ${Wt(e)}`)}function K0(n){return n.repeated||n.kind=="map"?!0:!(n.oneof||n.kind=="message"||n.opt||n.req)}function Uh(n,e,t){if(n.kind=="map"){le(typeof e=="object"&&e!=null);const r={},i=Object.entries(e);switch(n.V.kind){case"scalar":for(const[o,a]of i)r[o.toString()]=Pa(n.V.T,a);break;case"message":for(const[o,a]of i)r[o.toString()]=a.toJson(t);break;case"enum":const s=n.V.T;for(const[o,a]of i)r[o.toString()]=Au(s,a,t.enumAsInteger);break}return t.emitDefaultValues||i.length>0?r:void 0}if(n.repeated){le(Array.isArray(e));const r=[];switch(n.kind){case"scalar":for(let i=0;i<e.length;i++)r.push(Pa(n.T,e[i]));break;case"enum":for(let i=0;i<e.length;i++)r.push(Au(n.T,e[i],t.enumAsInteger));break;case"message":for(let i=0;i<e.length;i++)r.push(e[i].toJson(t));break}return t.emitDefaultValues||r.length>0?r:void 0}switch(n.kind){case"scalar":return Pa(n.T,e);case"enum":return Au(n.T,e,t.enumAsInteger);case"message":return Gp(n.T,e).toJson(t)}}function Au(n,e,t){var r;if(le(typeof e=="number"),n.typeName=="google.protobuf.NullValue")return null;if(t)return e;const i=n.findNumber(e);return(r=i==null?void 0:i.name)!==null&&r!==void 0?r:e}function Pa(n,e){switch(n){case I.INT32:case I.SFIXED32:case I.SINT32:case I.FIXED32:case I.UINT32:return le(typeof e=="number"),e;case I.FLOAT:case I.DOUBLE:return le(typeof e=="number"),Number.isNaN(e)?"NaN":e===Number.POSITIVE_INFINITY?"Infinity":e===Number.NEGATIVE_INFINITY?"-Infinity":e;case I.STRING:return le(typeof e=="string"),e;case I.BOOL:return le(typeof e=="boolean"),e;case I.UINT64:case I.FIXED64:case I.INT64:case I.SFIXED64:case I.SINT64:return le(typeof e=="bigint"||typeof e=="string"||typeof e=="number"),e.toString();case I.BYTES:return le(e instanceof Uint8Array),ed.enc(e)}}const zi=Symbol("@bufbuild/protobuf/unknown-fields"),jh={readUnknownFields:!0,readerFactory:n=>new b0(n)},Vh={writeUnknownFields:!0,writerFactory:()=>new B0};function W0(n){return n?Object.assign(Object.assign({},jh),n):jh}function _0(n){return n?Object.assign(Object.assign({},Vh),n):Vh}function H0(){return{makeReadOptions:W0,makeWriteOptions:_0,listUnknownFields(n){var e;return(e=n[zi])!==null&&e!==void 0?e:[]},discardUnknownFields(n){delete n[zi]},writeUnknownFields(n,e){const r=n[zi];if(r)for(const i of r)e.tag(i.no,i.wireType).raw(i.data)},onUnknownField(n,e,t,r){const i=n;Array.isArray(i[zi])||(i[zi]=[]),i[zi].push({no:e,wireType:t,data:r})},readMessage(n,e,t,r,i){const s=n.getType(),o=i?e.len:e.pos+t;let a,u;for(;e.pos<o&&([a,u]=e.tag(),!(i===!0&&u==me.EndGroup));){const c=s.fields.find(a);if(!c){const d=e.skip(u,a);r.readUnknownFields&&this.onUnknownField(n,a,u,d);continue}qh(n,e,c,u,r)}if(i&&(u!=me.EndGroup||a!==t))throw new Error("invalid end group tag")},readField:qh,writeMessage(n,e,t){const r=n.getType();for(const i of r.fields.byNumber()){if(!Hp(i,n)){if(i.req)throw new Error(`cannot encode field ${r.typeName}.${i.name} to binary: required field not set`);continue}const s=i.oneof?n[i.oneof.localName].value:n[i.localName];Kh(i,s,e,t)}return t.writeUnknownFields&&this.writeUnknownFields(n,e),e},writeField(n,e,t,r){e!==void 0&&Kh(n,e,t,r)}}}function qh(n,e,t,r,i){let{repeated:s,localName:o}=t;switch(t.oneof&&(n=n[t.oneof.localName],n.case!=o&&delete n.value,n.case=o,o="value"),t.kind){case"scalar":case"enum":const a=t.kind=="enum"?I.INT32:t.T;let u=rl;if(t.kind=="scalar"&&t.L>0&&(u=Y0),s){let g=n[o];if(r==me.LengthDelimited&&a!=I.STRING&&a!=I.BYTES){let k=e.uint32()+e.pos;for(;e.pos<k;)g.push(u(e,a))}else g.push(u(e,a))}else n[o]=u(e,a);break;case"message":const c=t.T;s?n[o].push(Ca(e,new c,i,t)):Ti(n[o])?Ca(e,n[o],i,t):(n[o]=Ca(e,new c,i,t),c.fieldWrapper&&!t.oneof&&!t.repeated&&(n[o]=c.fieldWrapper.unwrapField(n[o])));break;case"map":let[d,h]=G0(t,e,i);n[o][d]=h;break}}function Ca(n,e,t,r){const i=e.getType().runtime.bin,s=r==null?void 0:r.delimited;return i.readMessage(e,n,s?r.no:n.uint32(),t,s),e}function G0(n,e,t){const r=e.uint32(),i=e.pos+r;let s,o;for(;e.pos<i;){const[a]=e.tag();switch(a){case 1:s=rl(e,n.K);break;case 2:switch(n.V.kind){case"scalar":o=rl(e,n.V.T);break;case"enum":o=e.int32();break;case"message":o=Ca(e,new n.V.T,t,void 0);break}break}}if(s===void 0&&(s=ms(n.K,ri.BIGINT)),typeof s!="string"&&typeof s!="number"&&(s=s.toString()),o===void 0)switch(n.V.kind){case"scalar":o=ms(n.V.T,ri.BIGINT);break;case"enum":o=n.V.T.values[0].no;break;case"message":o=new n.V.T;break}return[s,o]}function Y0(n,e){const t=rl(n,e);return typeof t=="bigint"?t.toString():t}function rl(n,e){switch(e){case I.STRING:return n.string();case I.BOOL:return n.bool();case I.DOUBLE:return n.double();case I.FLOAT:return n.float();case I.INT32:return n.int32();case I.INT64:return n.int64();case I.UINT64:return n.uint64();case I.FIXED64:return n.fixed64();case I.BYTES:return n.bytes();case I.FIXED32:return n.fixed32();case I.SFIXED32:return n.sfixed32();case I.SFIXED64:return n.sfixed64();case I.SINT64:return n.sint64();case I.UINT32:return n.uint32();case I.SINT32:return n.sint32()}}function Kh(n,e,t,r){le(e!==void 0);const i=n.repeated;switch(n.kind){case"scalar":case"enum":let s=n.kind=="enum"?I.INT32:n.T;if(i)if(le(Array.isArray(e)),n.packed)X0(t,s,n.no,e);else for(const o of e)to(t,s,n.no,o);else to(t,s,n.no,e);break;case"message":if(i){le(Array.isArray(e));for(const o of e)Wh(t,r,n,o)}else Wh(t,r,n,e);break;case"map":le(typeof e=="object"&&e!=null);for(const[o,a]of Object.entries(e))Q0(t,r,n,o,a);break}}function Q0(n,e,t,r,i){n.tag(t.no,me.LengthDelimited),n.fork();let s=r;switch(t.K){case I.INT32:case I.FIXED32:case I.UINT32:case I.SFIXED32:case I.SINT32:s=Number.parseInt(r);break;case I.BOOL:le(r=="true"||r=="false"),s=r=="true";break}switch(to(n,t.K,1,s),t.V.kind){case"scalar":to(n,t.V.T,2,i);break;case"enum":to(n,I.INT32,2,i);break;case"message":le(i!==void 0),n.tag(2,me.LengthDelimited).bytes(i.toBinary(e));break}n.join()}function Wh(n,e,t,r){const i=Gp(t.T,r);t.delimited?n.tag(t.no,me.StartGroup).raw(i.toBinary(e)).tag(t.no,me.EndGroup):n.tag(t.no,me.LengthDelimited).bytes(i.toBinary(e))}function to(n,e,t,r){le(r!==void 0);let[i,s]=Yp(e);n.tag(t,i)[s](r)}function X0(n,e,t,r){if(!r.length)return;n.tag(t,me.LengthDelimited).fork();let[,i]=Yp(e);for(let s=0;s<r.length;s++)n[i](r[s]);n.join()}function Yp(n){let e=me.Varint;switch(n){case I.BYTES:case I.STRING:e=me.LengthDelimited;break;case I.DOUBLE:case I.FIXED64:case I.SFIXED64:e=me.Bit64;break;case I.FIXED32:case I.SFIXED32:case I.FLOAT:e=me.Bit32;break}const t=I[n].toLowerCase();return[e,t]}function Z0(){return{setEnumType:Mp,initPartial(n,e){if(n===void 0)return;const t=e.getType();for(const r of t.fields.byMember()){const i=r.localName,s=e,o=n;if(o[i]!=null)switch(r.kind){case"oneof":const a=o[i].case;if(a===void 0)continue;const u=r.findField(a);let c=o[i].value;u&&u.kind=="message"&&!Ti(c,u.T)?c=new u.T(c):u&&u.kind==="scalar"&&u.T===I.BYTES&&(c=Fs(c)),s[i]={case:a,value:c};break;case"scalar":case"enum":let d=o[i];r.T===I.BYTES&&(d=r.repeated?d.map(Fs):Fs(d)),s[i]=d;break;case"map":switch(r.V.kind){case"scalar":case"enum":if(r.V.T===I.BYTES)for(const[p,k]of Object.entries(o[i]))s[i][p]=Fs(k);else Object.assign(s[i],o[i]);break;case"message":const g=r.V.T;for(const p of Object.keys(o[i])){let k=o[i][p];g.fieldWrapper||(k=new g(k)),s[i][p]=k}break}break;case"message":const h=r.T;if(r.repeated)s[i]=o[i].map(g=>Ti(g,h)?g:new h(g));else{const g=o[i];h.fieldWrapper?h.typeName==="google.protobuf.BytesValue"?s[i]=Fs(g):s[i]=g:s[i]=Ti(g,h)?g:new h(g)}break}}},equals(n,e,t){return e===t?!0:!e||!t?!1:n.fields.byMember().every(r=>{const i=e[r.localName],s=t[r.localName];if(r.repeated){if(i.length!==s.length)return!1;switch(r.kind){case"message":return i.every((o,a)=>r.T.equals(o,s[a]));case"scalar":return i.every((o,a)=>Rr(r.T,o,s[a]));case"enum":return i.every((o,a)=>Rr(I.INT32,o,s[a]))}throw new Error(`repeated cannot contain ${r.kind}`)}switch(r.kind){case"message":return r.T.equals(i,s);case"enum":return Rr(I.INT32,i,s);case"scalar":return Rr(r.T,i,s);case"oneof":if(i.case!==s.case)return!1;const o=r.findField(i.case);if(o===void 0)return!0;switch(o.kind){case"message":return o.T.equals(i.value,s.value);case"enum":return Rr(I.INT32,i.value,s.value);case"scalar":return Rr(o.T,i.value,s.value)}throw new Error(`oneof cannot contain ${o.kind}`);case"map":const a=Object.keys(i).concat(Object.keys(s));switch(r.V.kind){case"message":const u=r.V.T;return a.every(d=>u.equals(i[d],s[d]));case"enum":return a.every(d=>Rr(I.INT32,i[d],s[d]));case"scalar":const c=r.V.T;return a.every(d=>Rr(c,i[d],s[d]))}break}})},clone(n){const e=n.getType(),t=new e,r=t;for(const i of e.fields.byMember()){const s=n[i.localName];let o;if(i.repeated)o=s.map(la);else if(i.kind=="map"){o=r[i.localName];for(const[a,u]of Object.entries(s))o[a]=la(u)}else i.kind=="oneof"?o=i.findField(s.case)?{case:s.case,value:la(s.value)}:{case:void 0}:o=la(s);r[i.localName]=o}for(const i of e.runtime.bin.listUnknownFields(n))e.runtime.bin.onUnknownField(r,i.no,i.wireType,i.data);return t}}}function la(n){if(n===void 0)return n;if(Ti(n))return n.clone();if(n instanceof Uint8Array){const e=new Uint8Array(n.byteLength);return e.set(n),e}return n}function Fs(n){return n instanceof Uint8Array?n:new Uint8Array(n)}function eS(n,e,t){return{syntax:n,json:V0(),bin:H0(),util:Object.assign(Object.assign({},Z0()),{newFieldList:e,initFields:t}),makeMessageType(r,i,s){return P0(this,r,i,s)},makeEnum:N0,makeEnumType:$p,getEnumType:x0,makeExtension(r,i,s){return z0(this,r,i,s)}}}class tS{constructor(e,t){this._fields=e,this._normalizer=t}findJsonName(e){if(!this.jsonNames){const t={};for(const r of this.list())t[r.jsonName]=t[r.name]=r;this.jsonNames=t}return this.jsonNames[e]}find(e){if(!this.numbers){const t={};for(const r of this.list())t[r.no]=r;this.numbers=t}return this.numbers[e]}list(){return this.all||(this.all=this._normalizer(this._fields)),this.all}byNumber(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort((e,t)=>e.no-t.no)),this.numbersAsc}byMember(){if(!this.members){this.members=[];const e=this.members;let t;for(const r of this.list())r.oneof?r.oneof!==t&&(t=r.oneof,e.push(t)):e.push(r)}return this.members}}function Qp(n,e){const t=Xp(n);return e?t:aS(oS(t))}function nS(n){return Qp(n,!1)}const rS=Xp;function Xp(n){let e=!1;const t=[];for(let r=0;r<n.length;r++){let i=n.charAt(r);switch(i){case"_":e=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":t.push(i),e=!1;break;default:e&&(e=!1,i=i.toUpperCase()),t.push(i);break}}return t.join("")}const iS=new Set(["constructor","toString","toJSON","valueOf"]),sS=new Set(["getType","clone","equals","fromBinary","fromJson","fromJsonString","toBinary","toJson","toJsonString","toObject"]),Zp=n=>`${n}$`,oS=n=>sS.has(n)?Zp(n):n,aS=n=>iS.has(n)?Zp(n):n;class lS{constructor(e){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.req=!1,this.default=void 0,this.fields=[],this.name=e,this.localName=nS(e)}addField(e){le(e.oneof===this,`field ${e.name} not one of ${this.name}`),this.fields.push(e)}findField(e){if(!this._lookup){this._lookup=Object.create(null);for(let t=0;t<this.fields.length;t++)this._lookup[this.fields[t].localName]=this.fields[t]}return this._lookup[e]}}function uS(n,e){var t,r,i,s,o,a;const u=[];let c;for(const d of typeof n=="function"?n():n){const h=d;if(h.localName=Qp(d.name,d.oneof!==void 0),h.jsonName=(t=d.jsonName)!==null&&t!==void 0?t:rS(d.name),h.repeated=(r=d.repeated)!==null&&r!==void 0?r:!1,d.kind=="scalar"&&(h.L=(i=d.L)!==null&&i!==void 0?i:ri.BIGINT),h.delimited=(s=d.delimited)!==null&&s!==void 0?s:!1,h.req=(o=d.req)!==null&&o!==void 0?o:!1,h.opt=(a=d.opt)!==null&&a!==void 0?a:!1,d.packed===void 0&&(h.packed=d.kind=="enum"||d.kind=="scalar"&&d.T!=I.BYTES&&d.T!=I.STRING),d.oneof!==void 0){const g=typeof d.oneof=="string"?d.oneof:d.oneof.name;(!c||c.name!=g)&&(c=new lS(g)),h.oneof=c,c.addField(h)}u.push(h)}return u}const f=eS("proto3",n=>new tS(n,e=>uS(e)),n=>{for(const e of n.getType().fields.byMember()){if(e.opt)continue;const t=e.localName,r=n;if(e.repeated){r[t]=[];continue}switch(e.kind){case"oneof":r[t]={case:void 0};break;case"enum":r[t]=0;break;case"map":r[t]={};break;case"scalar":r[t]=ms(e.T,e.L);break}}});var Fe;(function(n){n[n.Unary=0]="Unary",n[n.ServerStreaming=1]="ServerStreaming",n[n.ClientStreaming=2]="ClientStreaming",n[n.BiDiStreaming=3]="BiDiStreaming"})(Fe||(Fe={}));var _h;(function(n){n[n.NoSideEffects=1]="NoSideEffects",n[n.Idempotent=2]="Idempotent"})(_h||(_h={}));class Oe extends O{constructor(e){super(),this.seconds=ne.zero,this.nanos=0,f.util.initPartial(e,this)}fromJson(e,t){if(typeof e!="string")throw new Error(`cannot decode google.protobuf.Timestamp from JSON: ${f.json.debug(e)}`);const r=e.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!r)throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");const i=Date.parse(r[1]+"-"+r[2]+"-"+r[3]+"T"+r[4]+":"+r[5]+":"+r[6]+(r[8]?r[8]:"Z"));if(Number.isNaN(i))throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");if(i<Date.parse("0001-01-01T00:00:00Z")||i>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot decode message google.protobuf.Timestamp from JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");return this.seconds=ne.parse(i/1e3),this.nanos=0,r[7]&&(this.nanos=parseInt("1"+r[7]+"0".repeat(9-r[7].length))-1e9),this}toJson(e){const t=Number(this.seconds)*1e3;if(t<Date.parse("0001-01-01T00:00:00Z")||t>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot encode google.protobuf.Timestamp to JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");if(this.nanos<0)throw new Error("cannot encode google.protobuf.Timestamp to JSON: nanos must not be negative");let r="Z";if(this.nanos>0){const i=(this.nanos+1e9).toString().substring(1);i.substring(3)==="000000"?r="."+i.substring(0,3)+"Z":i.substring(6)==="000"?r="."+i.substring(0,6)+"Z":r="."+i+"Z"}return new Date(t).toISOString().replace(".000Z",r)}toDate(){return new Date(Number(this.seconds)*1e3+Math.ceil(this.nanos/1e6))}static now(){return Oe.fromDate(new Date)}static fromDate(e){const t=e.getTime();return new Oe({seconds:ne.parse(Math.floor(t/1e3)),nanos:t%1e3*1e6})}static fromBinary(e,t){return new Oe().fromBinary(e,t)}static fromJson(e,t){return new Oe().fromJson(e,t)}static fromJsonString(e,t){return new Oe().fromJsonString(e,t)}static equals(e,t){return f.util.equals(Oe,e,t)}}Oe.runtime=f;Oe.typeName="google.protobuf.Timestamp";Oe.fields=f.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);class yr extends O{constructor(e){super(),this.seconds=ne.zero,this.nanos=0,f.util.initPartial(e,this)}fromJson(e,t){if(typeof e!="string")throw new Error(`cannot decode google.protobuf.Duration from JSON: ${f.json.debug(e)}`);const r=e.match(/^(-?[0-9]+)(?:\.([0-9]+))?s/);if(r===null)throw new Error(`cannot decode google.protobuf.Duration from JSON: ${f.json.debug(e)}`);const i=Number(r[1]);if(i>315576e6||i<-315576e6)throw new Error(`cannot decode google.protobuf.Duration from JSON: ${f.json.debug(e)}`);if(this.seconds=ne.parse(i),typeof r[2]=="string"){const s=r[2]+"0".repeat(9-r[2].length);this.nanos=parseInt(s),(i<0||Object.is(i,-0))&&(this.nanos=-this.nanos)}return this}toJson(e){if(Number(this.seconds)>315576e6||Number(this.seconds)<-315576e6)throw new Error("cannot encode google.protobuf.Duration to JSON: value out of range");let t=this.seconds.toString();if(this.nanos!==0){let r=Math.abs(this.nanos).toString();r="0".repeat(9-r.length)+r,r.substring(3)==="000000"?r=r.substring(0,3):r.substring(6)==="000"&&(r=r.substring(0,6)),t+="."+r,this.nanos<0&&Number(this.seconds)==0&&(t="-"+t)}return t+"s"}static fromBinary(e,t){return new yr().fromBinary(e,t)}static fromJson(e,t){return new yr().fromJson(e,t)}static fromJsonString(e,t){return new yr().fromJsonString(e,t)}static equals(e,t){return f.util.equals(yr,e,t)}}yr.runtime=f;yr.typeName="google.protobuf.Duration";yr.fields=f.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);class Ht extends O{constructor(e){super(),this.typeUrl="",this.value=new Uint8Array(0),f.util.initPartial(e,this)}toJson(e){var t;if(this.typeUrl==="")return{};const r=this.typeUrlToName(this.typeUrl),i=(t=e==null?void 0:e.typeRegistry)===null||t===void 0?void 0:t.findMessage(r);if(!i)throw new Error(`cannot encode message google.protobuf.Any to JSON: "${this.typeUrl}" is not in the type registry`);let o=i.fromBinary(this.value).toJson(e);return(r.startsWith("google.protobuf.")||o===null||Array.isArray(o)||typeof o!="object")&&(o={value:o}),o["@type"]=this.typeUrl,o}fromJson(e,t){var r;if(e===null||Array.isArray(e)||typeof e!="object")throw new Error(`cannot decode message google.protobuf.Any from JSON: expected object but got ${e===null?"null":Array.isArray(e)?"array":typeof e}`);if(Object.keys(e).length==0)return this;const i=e["@type"];if(typeof i!="string"||i=="")throw new Error('cannot decode message google.protobuf.Any from JSON: "@type" is empty');const s=this.typeUrlToName(i),o=(r=t==null?void 0:t.typeRegistry)===null||r===void 0?void 0:r.findMessage(s);if(!o)throw new Error(`cannot decode message google.protobuf.Any from JSON: ${i} is not in the type registry`);let a;if(s.startsWith("google.protobuf.")&&Object.prototype.hasOwnProperty.call(e,"value"))a=o.fromJson(e.value,t);else{const u=Object.assign({},e);delete u["@type"],a=o.fromJson(u,t)}return this.packFrom(a),this}packFrom(e){this.value=e.toBinary(),this.typeUrl=this.typeNameToUrl(e.getType().typeName)}unpackTo(e){return this.is(e.getType())?(e.fromBinary(this.value),!0):!1}unpack(e){if(this.typeUrl==="")return;const t=e.findMessage(this.typeUrlToName(this.typeUrl));if(t)return t.fromBinary(this.value)}is(e){if(this.typeUrl==="")return!1;const t=this.typeUrlToName(this.typeUrl);let r="";return typeof e=="string"?r=e:r=e.typeName,t===r}typeNameToUrl(e){return`type.googleapis.com/${e}`}typeUrlToName(e){if(!e.length)throw new Error(`invalid type url: ${e}`);const t=e.lastIndexOf("/"),r=t>=0?e.substring(t+1):e;if(!r.length)throw new Error(`invalid type url: ${e}`);return r}static pack(e){const t=new Ht;return t.packFrom(e),t}static fromBinary(e,t){return new Ht().fromBinary(e,t)}static fromJson(e,t){return new Ht().fromJson(e,t)}static fromJsonString(e,t){return new Ht().fromJsonString(e,t)}static equals(e,t){return f.util.equals(Ht,e,t)}}Ht.runtime=f;Ht.typeName="google.protobuf.Any";Ht.fields=f.util.newFieldList(()=>[{no:1,name:"type_url",kind:"scalar",T:9},{no:2,name:"value",kind:"scalar",T:12}]);class Gt extends O{constructor(e){super(),this.value=0,f.util.initPartial(e,this)}toJson(e){return f.json.writeScalar(I.DOUBLE,this.value,!0)}fromJson(e,t){try{this.value=f.json.readScalar(I.DOUBLE,e)}catch(r){let i='cannot decode message google.protobuf.DoubleValue from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new Gt().fromBinary(e,t)}static fromJson(e,t){return new Gt().fromJson(e,t)}static fromJsonString(e,t){return new Gt().fromJsonString(e,t)}static equals(e,t){return f.util.equals(Gt,e,t)}}Gt.runtime=f;Gt.typeName="google.protobuf.DoubleValue";Gt.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:1}]);Gt.fieldWrapper={wrapField(n){return new Gt({value:n})},unwrapField(n){return n.value}};class Yt extends O{constructor(e){super(),this.value=0,f.util.initPartial(e,this)}toJson(e){return f.json.writeScalar(I.FLOAT,this.value,!0)}fromJson(e,t){try{this.value=f.json.readScalar(I.FLOAT,e)}catch(r){let i='cannot decode message google.protobuf.FloatValue from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new Yt().fromBinary(e,t)}static fromJson(e,t){return new Yt().fromJson(e,t)}static fromJsonString(e,t){return new Yt().fromJsonString(e,t)}static equals(e,t){return f.util.equals(Yt,e,t)}}Yt.runtime=f;Yt.typeName="google.protobuf.FloatValue";Yt.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:2}]);Yt.fieldWrapper={wrapField(n){return new Yt({value:n})},unwrapField(n){return n.value}};class Qt extends O{constructor(e){super(),this.value=ne.zero,f.util.initPartial(e,this)}toJson(e){return f.json.writeScalar(I.INT64,this.value,!0)}fromJson(e,t){try{this.value=f.json.readScalar(I.INT64,e)}catch(r){let i='cannot decode message google.protobuf.Int64Value from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new Qt().fromBinary(e,t)}static fromJson(e,t){return new Qt().fromJson(e,t)}static fromJsonString(e,t){return new Qt().fromJsonString(e,t)}static equals(e,t){return f.util.equals(Qt,e,t)}}Qt.runtime=f;Qt.typeName="google.protobuf.Int64Value";Qt.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:3}]);Qt.fieldWrapper={wrapField(n){return new Qt({value:n})},unwrapField(n){return n.value}};class Xt extends O{constructor(e){super(),this.value=ne.zero,f.util.initPartial(e,this)}toJson(e){return f.json.writeScalar(I.UINT64,this.value,!0)}fromJson(e,t){try{this.value=f.json.readScalar(I.UINT64,e)}catch(r){let i='cannot decode message google.protobuf.UInt64Value from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new Xt().fromBinary(e,t)}static fromJson(e,t){return new Xt().fromJson(e,t)}static fromJsonString(e,t){return new Xt().fromJsonString(e,t)}static equals(e,t){return f.util.equals(Xt,e,t)}}Xt.runtime=f;Xt.typeName="google.protobuf.UInt64Value";Xt.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:4}]);Xt.fieldWrapper={wrapField(n){return new Xt({value:n})},unwrapField(n){return n.value}};class et extends O{constructor(e){super(),this.value=0,f.util.initPartial(e,this)}toJson(e){return f.json.writeScalar(I.INT32,this.value,!0)}fromJson(e,t){try{this.value=f.json.readScalar(I.INT32,e)}catch(r){let i='cannot decode message google.protobuf.Int32Value from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new et().fromBinary(e,t)}static fromJson(e,t){return new et().fromJson(e,t)}static fromJsonString(e,t){return new et().fromJsonString(e,t)}static equals(e,t){return f.util.equals(et,e,t)}}et.runtime=f;et.typeName="google.protobuf.Int32Value";et.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:5}]);et.fieldWrapper={wrapField(n){return new et({value:n})},unwrapField(n){return n.value}};class Zt extends O{constructor(e){super(),this.value=0,f.util.initPartial(e,this)}toJson(e){return f.json.writeScalar(I.UINT32,this.value,!0)}fromJson(e,t){try{this.value=f.json.readScalar(I.UINT32,e)}catch(r){let i='cannot decode message google.protobuf.UInt32Value from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new Zt().fromBinary(e,t)}static fromJson(e,t){return new Zt().fromJson(e,t)}static fromJsonString(e,t){return new Zt().fromJsonString(e,t)}static equals(e,t){return f.util.equals(Zt,e,t)}}Zt.runtime=f;Zt.typeName="google.protobuf.UInt32Value";Zt.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:13}]);Zt.fieldWrapper={wrapField(n){return new Zt({value:n})},unwrapField(n){return n.value}};class en extends O{constructor(e){super(),this.value=!1,f.util.initPartial(e,this)}toJson(e){return f.json.writeScalar(I.BOOL,this.value,!0)}fromJson(e,t){try{this.value=f.json.readScalar(I.BOOL,e)}catch(r){let i='cannot decode message google.protobuf.BoolValue from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new en().fromBinary(e,t)}static fromJson(e,t){return new en().fromJson(e,t)}static fromJsonString(e,t){return new en().fromJsonString(e,t)}static equals(e,t){return f.util.equals(en,e,t)}}en.runtime=f;en.typeName="google.protobuf.BoolValue";en.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:8}]);en.fieldWrapper={wrapField(n){return new en({value:n})},unwrapField(n){return n.value}};class Ke extends O{constructor(e){super(),this.value="",f.util.initPartial(e,this)}toJson(e){return f.json.writeScalar(I.STRING,this.value,!0)}fromJson(e,t){try{this.value=f.json.readScalar(I.STRING,e)}catch(r){let i='cannot decode message google.protobuf.StringValue from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new Ke().fromBinary(e,t)}static fromJson(e,t){return new Ke().fromJson(e,t)}static fromJsonString(e,t){return new Ke().fromJsonString(e,t)}static equals(e,t){return f.util.equals(Ke,e,t)}}Ke.runtime=f;Ke.typeName="google.protobuf.StringValue";Ke.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:9}]);Ke.fieldWrapper={wrapField(n){return new Ke({value:n})},unwrapField(n){return n.value}};class tn extends O{constructor(e){super(),this.value=new Uint8Array(0),f.util.initPartial(e,this)}toJson(e){return f.json.writeScalar(I.BYTES,this.value,!0)}fromJson(e,t){try{this.value=f.json.readScalar(I.BYTES,e)}catch(r){let i='cannot decode message google.protobuf.BytesValue from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new tn().fromBinary(e,t)}static fromJson(e,t){return new tn().fromJson(e,t)}static fromJsonString(e,t){return new tn().fromJsonString(e,t)}static equals(e,t){return f.util.equals(tn,e,t)}}tn.runtime=f;tn.typeName="google.protobuf.BytesValue";tn.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:12}]);tn.fieldWrapper={wrapField(n){return new tn({value:n})},unwrapField(n){return n.value}};function cS(n,e,t){try{const r=ed.dec(n);return e?e.fromBinary(r,t):r}catch(r){throw G.from(r,q.DataLoss)}}function fS(n,e){const t={};for(const[r,i]of Object.entries(n.methods)){const s=e(Object.assign(Object.assign({},i),{localName:r,service:n}));s!=null&&(t[r]=s)}return t}const Hh=1;function Gh(n){let e,t=new Uint8Array(0);function r(i){const s=new Uint8Array(t.length+i.length);s.set(t),s.set(i,t.length),t=s}return new ReadableStream({start(){e=n.getReader()},async pull(i){let s;for(;;){if(s===void 0&&t.byteLength>=5){let u=0;for(let c=1;c<5;c++)u=(u<<8)+t[c];s={flags:t[0],length:u}}if(s!==void 0&&t.byteLength>=s.length+5)break;const a=await e.read();if(a.done)break;r(a.value)}if(s===void 0){if(t.byteLength==0){i.close();return}i.error(new G("premature end of stream",q.DataLoss));return}const o=t.subarray(5,5+s.length);t=t.subarray(5+s.length),i.enqueue({flags:s.flags,data:o})}})}function Yh(n,e){const t=new Uint8Array(e.length+5);t.set(e,5);const r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.setUint8(0,n),r.setUint32(1,e.length),t}var dS=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof __values=="function"?__values(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,u){o=n[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(c){s({value:c,done:a})},o)}},Io=function(n){return this instanceof Io?(this.v=n,this):new Io(n)},hS=function(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i={},a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(p){return function(k){return Promise.resolve(k).then(p,h)}}function a(p,k){r[p]&&(i[p]=function(T){return new Promise(function(P,y){s.push([p,T,P,y])>1||u(p,T)})},k&&(i[p]=k(i[p])))}function u(p,k){try{c(r[p](k))}catch(T){g(s[0][3],T)}}function c(p){p.value instanceof Io?Promise.resolve(p.value.v).then(d,h):g(s[0][2],p)}function d(p){u("next",p)}function h(p){u("throw",p)}function g(p,k){p(k),s.shift(),s.length&&u(s[0][0],s[0][1])}},gS=function(n){var e,t;return e={},r("next"),r("throw",function(i){throw i}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(i,s){e[i]=n[i]?function(o){return(t=!t)?{value:Io(n[i](o)),done:!1}:s?s(o):o}:s}};function mS(n){return hS(this,arguments,function*(){yield Io(yield*gS(dS(n)))})}var ey=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof __values=="function"?__values(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,u){o=n[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(c){s({value:c,done:a})},o)}},ps=function(n){return this instanceof ps?(this.v=n,this):new ps(n)},pS=function(n){var e,t;return e={},r("next"),r("throw",function(i){throw i}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(i,s){e[i]=n[i]?function(o){return(t=!t)?{value:ps(n[i](o)),done:!1}:s?s(o):o}:s}},yS=function(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i={},a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(p){return function(k){return Promise.resolve(k).then(p,h)}}function a(p,k){r[p]&&(i[p]=function(T){return new Promise(function(P,y){s.push([p,T,P,y])>1||u(p,T)})},k&&(i[p]=k(i[p])))}function u(p,k){try{c(r[p](k))}catch(T){g(s[0][3],T)}}function c(p){p.value instanceof ps?Promise.resolve(p.value.v).then(d,h):g(s[0][2],p)}function d(p){u("next",p)}function h(p){u("throw",p)}function g(p,k){p(k),s.shift(),s.length&&u(s[0][0],s[0][1])}};function vS(n,e){return fS(n,t=>{switch(t.kind){case Fe.Unary:return wS(e,n,t);case Fe.ServerStreaming:return SS(e,n,t);case Fe.ClientStreaming:return kS(e,n,t);case Fe.BiDiStreaming:return TS(e,n,t);default:return null}})}function wS(n,e,t){return async function(r,i){var s,o;const a=await n.unary(e,t,i==null?void 0:i.signal,i==null?void 0:i.timeoutMs,i==null?void 0:i.headers,r,i==null?void 0:i.contextValues);return(s=i==null?void 0:i.onHeader)===null||s===void 0||s.call(i,a.header),(o=i==null?void 0:i.onTrailer)===null||o===void 0||o.call(i,a.trailer),a.message}}function SS(n,e,t){return function(r,i){return ty(n.stream(e,t,i==null?void 0:i.signal,i==null?void 0:i.timeoutMs,i==null?void 0:i.headers,mS([r]),i==null?void 0:i.contextValues),i)}}function kS(n,e,t){return async function(r,i){var s,o,a,u,c,d;const h=await n.stream(e,t,i==null?void 0:i.signal,i==null?void 0:i.timeoutMs,i==null?void 0:i.headers,r,i==null?void 0:i.contextValues);(c=i==null?void 0:i.onHeader)===null||c===void 0||c.call(i,h.header);let g,p=0;try{for(var k=!0,T=ey(h.message),P;P=await T.next(),s=P.done,!s;k=!0)u=P.value,k=!1,g=u,p++}catch(y){o={error:y}}finally{try{!k&&!s&&(a=T.return)&&await a.call(T)}finally{if(o)throw o.error}}if(!g)throw new G("protocol error: missing response message",q.Unimplemented);if(p>1)throw new G("protocol error: received extra messages for client streaming method",q.Unimplemented);return(d=i==null?void 0:i.onTrailer)===null||d===void 0||d.call(i,h.trailer),g}}function TS(n,e,t){return function(r,i){return ty(n.stream(e,t,i==null?void 0:i.signal,i==null?void 0:i.timeoutMs,i==null?void 0:i.headers,r,i==null?void 0:i.contextValues),i)}}function ty(n,e){const t=function(){return yS(this,arguments,function*(){var r,i;const s=yield ps(n);(r=e==null?void 0:e.onHeader)===null||r===void 0||r.call(e,s.header),yield ps(yield*pS(ey(s.message))),(i=e==null?void 0:e.onTrailer)===null||i===void 0||i.call(e,s.trailer)})}()[Symbol.asyncIterator]();return{[Symbol.asyncIterator]:()=>({next:()=>t.next()})}}function IS(...n){const e=new AbortController,t=n.filter(i=>i!==void 0).concat(e.signal);for(const i of t){if(i.aborted){r.apply(i);break}i.addEventListener("abort",r)}function r(){e.signal.aborted||e.abort(ny(this));for(const i of t)i.removeEventListener("abort",r)}return e}function ES(n){const e=new AbortController,t=()=>{e.abort(new G("the operation timed out",q.DeadlineExceeded))};let r;return n!==void 0&&(n<=0?t():r=setTimeout(t,n)),{signal:e.signal,cleanup:()=>clearTimeout(r)}}function ny(n){if(!n.aborted)return;if(n.reason!==void 0)return n.reason;const e=new Error("This operation was aborted");return e.name="AbortError",e}function Qh(){return{get(n){return n.id in this?this[n.id]:n.defaultValue},set(n,e){return this[n.id]=e,this},delete(n){return delete this[n.id],this}}}const xu=128;function Xh(n){const e=new Headers,t=new TextDecoder().decode(n).split(`\r
`);for(const r of t){if(r==="")continue;const i=r.indexOf(":");if(i>0){const s=r.substring(0,i).trim(),o=r.substring(i+1).trim();e.append(s,o)}}return e}const AS="Content-Type",xS="Grpc-Timeout",ys="Grpc-Status",ry="Grpc-Message",NS="Grpc-Status-Details-Bin",PS="X-User-Agent",CS="X-Grpc-Web",DS="application/grpc-web+proto",OS="application/grpc-web+json";class vr extends O{constructor(e){super(),this.code=0,this.message="",this.details=[],f.util.initPartial(e,this)}static fromBinary(e,t){return new vr().fromBinary(e,t)}static fromJson(e,t){return new vr().fromJson(e,t)}static fromJsonString(e,t){return new vr().fromJsonString(e,t)}static equals(e,t){return f.util.equals(vr,e,t)}}vr.runtime=f;vr.typeName="google.rpc.Status";vr.fields=f.util.newFieldList(()=>[{no:1,name:"code",kind:"scalar",T:5},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"details",kind:"message",T:Ht,repeated:!0}]);const RS="0";function iy(n){var e;const t=n.get(NS);if(t!=null){const i=cS(t,vr);if(i.code==0)return;const s=new G(i.message,i.code,n);return s.details=i.details.map(o=>({type:o.typeUrl.substring(o.typeUrl.lastIndexOf("/")+1),value:o.value})),s}const r=n.get(ys);if(r!=null){if(r===RS)return;const i=parseInt(r,10);return i in q?new G(decodeURIComponent((e=n.get(ry))!==null&&e!==void 0?e:""),i,n):new G(`invalid grpc-status: ${r}`,q.Internal,n)}}function Zh(n,e,t){const r=typeof e=="string"?e:e.typeName,i=typeof t=="string"?t:t.name;return n.toString().replace(/\/?$/,`/${r}/${i}`)}function sy(n,e){return e instanceof n?e:new n(e)}function LS(n,e){function t(r){return r.done===!0?r:{done:r.done,value:sy(n,r.value)}}return{[Symbol.asyncIterator](){const r=e[Symbol.asyncIterator](),i={next:()=>r.next().then(t)};return r.throw!==void 0&&(i.throw=s=>r.throw(s).then(t)),r.return!==void 0&&(i.return=s=>r.return(s).then(t)),i}}}function oy(n,e){var t;return(t=e==null?void 0:e.concat().reverse().reduce((r,i)=>i(r),n))!==null&&t!==void 0?t:n}function BS(n){var e;const t=Object.assign({},n);return(e=t.ignoreUnknownFields)!==null&&e!==void 0||(t.ignoreUnknownFields=!0),t}function eg(n,e,t,r){const i=e?tg(n.I,r):ng(n.I,t);return{parse:(e?tg(n.O,r):ng(n.O,t)).parse,serialize:i.serialize}}function tg(n,e){return{parse(t){try{return n.fromBinary(t,e)}catch(r){const i=r instanceof Error?r.message:String(r);throw new G(`parse binary: ${i}`,q.Internal)}},serialize(t){try{return t.toBinary(e)}catch(r){const i=r instanceof Error?r.message:String(r);throw new G(`serialize binary: ${i}`,q.Internal)}}}}function ng(n,e){var t,r;const i=(t=e==null?void 0:e.textEncoder)!==null&&t!==void 0?t:new TextEncoder,s=(r=e==null?void 0:e.textDecoder)!==null&&r!==void 0?r:new TextDecoder,o=BS(e);return{parse(a){try{const u=s.decode(a);return n.fromJsonString(u,o)}catch(u){throw G.from(u,q.InvalidArgument)}},serialize(a){try{const u=a.toJsonString(o);return i.encode(u)}catch(u){throw G.from(u,q.Internal)}}}}function bS(n){const e=oy(n.next,n.interceptors),[t,r,i]=ay(n),s=Object.assign(Object.assign({},n.req),{message:sy(n.req.method.I,n.req.message),signal:t});return e(s).then(o=>(i(),o),r)}function zS(n){const e=oy(n.next,n.interceptors),[t,r,i]=ay(n),s=Object.assign(Object.assign({},n.req),{message:LS(n.req.method.I,n.req.message),signal:t});let o=!1;return t.addEventListener("abort",function(){var a,u;const c=n.req.message[Symbol.asyncIterator]();o||(a=c.throw)===null||a===void 0||a.call(c,this.reason).catch(()=>{}),(u=c.return)===null||u===void 0||u.call(c).catch(()=>{})}),e(s).then(a=>Object.assign(Object.assign({},a),{message:{[Symbol.asyncIterator](){const u=a.message[Symbol.asyncIterator]();return{next(){return u.next().then(c=>(c.done==!0&&(o=!0,i()),c),r)}}}}}),r)}function ay(n){const{signal:e,cleanup:t}=ES(n.timeoutMs),r=IS(n.signal,e);return[r.signal,function(s){const o=G.from(e.aborted?ny(e):s);return r.abort(o),t(),Promise.reject(o)},function(){t(),r.abort()}]}function FS(){try{new Headers}catch{throw new Error("connect-web requires the fetch API. Are you running on an old version of Node.js? Node.js is not supported in Connect for Web - please stay tuned for Connect for Node.")}}function rg(n,e){const t=iy(n);if(t)throw e.forEach((r,i)=>{t.metadata.append(i,r)}),t;if(!e.has(ys)&&!n.has(ys))throw new G("protocol error: missing status",q.Internal)}function ig(n,e,t,r){const i=new Headers(t??{});return i.set(AS,n?DS:OS),i.set(CS,"1"),i.set(PS,"connect-es/1.6.1"),e!==void 0&&i.set(xS,`${e}m`),i}function JS(n){switch(n){case 400:return q.Internal;case 401:return q.Unauthenticated;case 403:return q.PermissionDenied;case 404:return q.Unimplemented;case 429:return q.Unavailable;case 502:return q.Unavailable;case 503:return q.Unavailable;case 504:return q.Unavailable;default:return q.Unknown}}function sg(n,e){var t;if(n>=200&&n<300)return{foundStatus:e.has(ys),headerError:iy(e)};throw new G(decodeURIComponent((t=e.get(ry))!==null&&t!==void 0?t:`HTTP ${n}`),JS(n),e)}var wi=function(n){return this instanceof wi?(this.v=n,this):new wi(n)},MS=function(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i={},a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(p){return function(k){return Promise.resolve(k).then(p,h)}}function a(p,k){r[p]&&(i[p]=function(T){return new Promise(function(P,y){s.push([p,T,P,y])>1||u(p,T)})},k&&(i[p]=k(i[p])))}function u(p,k){try{c(r[p](k))}catch(T){g(s[0][3],T)}}function c(p){p.value instanceof wi?Promise.resolve(p.value.v).then(d,h):g(s[0][2],p)}function d(p){u("next",p)}function h(p){u("throw",p)}function g(p,k){p(k),s.shift(),s.length&&u(s[0][0],s[0][1])}};function $S(n){var e;FS();const t=(e=n.useBinaryFormat)!==null&&e!==void 0?e:!0;return{async unary(r,i,s,o,a,u,c){var d;const{serialize:h,parse:g}=eg(i,t,n.jsonOptions,n.binaryOptions);return o=o===void 0?n.defaultTimeoutMs:o<=0?void 0:o,await bS({interceptors:n.interceptors,signal:s,timeoutMs:o,req:{stream:!1,service:r,method:i,url:Zh(n.baseUrl,r,i),init:{method:"POST",credentials:(d=n.credentials)!==null&&d!==void 0?d:"same-origin",redirect:"error",mode:"cors"},header:ig(t,o,a),contextValues:c??Qh(),message:u},next:async p=>{var k;const P=await((k=n.fetch)!==null&&k!==void 0?k:globalThis.fetch)(p.url,Object.assign(Object.assign({},p.init),{headers:p.header,signal:p.signal,body:Yh(0,h(p.message))})),{headerError:y}=sg(P.status,P.headers);if(!P.body)throw y!==void 0?y:"missing response body";const m=Gh(P.body).getReader();let v,E;for(;;){const C=await m.read();if(C.done)break;const{flags:N,data:D}=C.value;if((N&Hh)===Hh)throw new G("protocol error: received unsupported compressed output",q.Internal);if(N===xu){if(v!==void 0)throw"extra trailer";v=Xh(D);continue}if(E!==void 0)throw new G("extra message",q.Unimplemented);E=g(D)}if(v===void 0)throw y!==void 0?y:new G("missing trailer",P.headers.has(ys)?q.Unimplemented:q.Unknown);if(rg(v,P.headers),E===void 0)throw new G("missing message",v.has(ys)?q.Unimplemented:q.Unknown);return{stream:!1,service:r,method:i,header:P.headers,message:E,trailer:v}}})},async stream(r,i,s,o,a,u,c){var d;const{serialize:h,parse:g}=eg(i,t,n.jsonOptions,n.binaryOptions);function p(T,P,y,m,v){return MS(this,arguments,function*(){const C=Gh(T).getReader();if(P){if(!(yield wi(C.read())).done)throw"extra data for trailers-only";return yield wi(void 0)}let N=!1;for(;;){const D=yield wi(C.read());if(D.done)break;const{flags:R,data:$}=D.value;if((R&xu)===xu){if(N)throw"extra trailer";N=!0;const M=Xh($);rg(M,m),M.forEach((be,li)=>y.set(li,be));continue}if(N)throw"extra message";yield yield wi(g($))}if("throwIfAborted"in v&&v.throwIfAborted(),!N)throw"missing trailer"})}async function k(T){if(i.kind!=Fe.ServerStreaming)throw"The fetch API does not support streaming request bodies";const P=await T[Symbol.asyncIterator]().next();if(P.done==!0)throw"missing request message";return Yh(0,h(P.value))}return o=o===void 0?n.defaultTimeoutMs:o<=0?void 0:o,zS({interceptors:n.interceptors,signal:s,timeoutMs:o,req:{stream:!0,service:r,method:i,url:Zh(n.baseUrl,r,i),init:{method:"POST",credentials:(d=n.credentials)!==null&&d!==void 0?d:"same-origin",redirect:"error",mode:"cors"},header:ig(t,o,a),contextValues:c??Qh(),message:u},next:async T=>{var P;const m=await((P=n.fetch)!==null&&P!==void 0?P:globalThis.fetch)(T.url,Object.assign(Object.assign({},T.init),{headers:T.header,signal:T.signal,body:await k(T.message)})),{foundStatus:v,headerError:E}=sg(m.status,m.headers);if(E!=null)throw E;if(!m.body)throw"missing response body";const C=new Headers;return Object.assign(Object.assign({},T),{header:m.headers,trailer:C,message:p(m.body,v,C,m.headers,T.signal)})}})}}}var U=(n=>(n[n.NULL=0]="NULL",n[n.BOOLEAN=1]="BOOLEAN",n[n.INTEGER=2]="INTEGER",n[n.LONG=3]="LONG",n[n.DOUBLE=4]="DOUBLE",n[n.STRING=5]="STRING",n[n.BYTES=6]="BYTES",n[n.DATE=7]="DATE",n[n.JSON_OBJECT=8]="JSON_OBJECT",n[n.JSON_ARRAY=9]="JSON_ARRAY",n[n.TEXT=10]="TEXT",n[n.INTEGER_CNT=11]="INTEGER_CNT",n[n.LONG_CNT=12]="LONG_CNT",n[n.TREE=13]="TREE",n))(U||{});f.util.setEnumType(U,"yorkie.v1.ValueType",[{no:0,name:"VALUE_TYPE_NULL"},{no:1,name:"VALUE_TYPE_BOOLEAN"},{no:2,name:"VALUE_TYPE_INTEGER"},{no:3,name:"VALUE_TYPE_LONG"},{no:4,name:"VALUE_TYPE_DOUBLE"},{no:5,name:"VALUE_TYPE_STRING"},{no:6,name:"VALUE_TYPE_BYTES"},{no:7,name:"VALUE_TYPE_DATE"},{no:8,name:"VALUE_TYPE_JSON_OBJECT"},{no:9,name:"VALUE_TYPE_JSON_ARRAY"},{no:10,name:"VALUE_TYPE_TEXT"},{no:11,name:"VALUE_TYPE_INTEGER_CNT"},{no:12,name:"VALUE_TYPE_LONG_CNT"},{no:13,name:"VALUE_TYPE_TREE"}]);var Ii=(n=>(n[n.DOCUMENT_CHANGED=0]="DOCUMENT_CHANGED",n[n.DOCUMENT_WATCHED=1]="DOCUMENT_WATCHED",n[n.DOCUMENT_UNWATCHED=2]="DOCUMENT_UNWATCHED",n[n.DOCUMENT_BROADCAST=3]="DOCUMENT_BROADCAST",n))(Ii||{});f.util.setEnumType(Ii,"yorkie.v1.DocEventType",[{no:0,name:"DOC_EVENT_TYPE_DOCUMENT_CHANGED"},{no:1,name:"DOC_EVENT_TYPE_DOCUMENT_WATCHED"},{no:2,name:"DOC_EVENT_TYPE_DOCUMENT_UNWATCHED"},{no:3,name:"DOC_EVENT_TYPE_DOCUMENT_BROADCAST"}]);const dn=class dn extends O{constructor(t){super();l(this,"root");l(this,"presences",{});f.util.initPartial(t,this)}static fromBinary(t,r){return new dn().fromBinary(t,r)}static fromJson(t,r){return new dn().fromJson(t,r)}static fromJsonString(t,r){return new dn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(dn,t,r)}};l(dn,"runtime",f),l(dn,"typeName","yorkie.v1.Snapshot"),l(dn,"fields",f.util.newFieldList(()=>[{no:1,name:"root",kind:"message",T:Qe},{no:2,name:"presences",kind:"map",K:9,V:{kind:"message",T:nd}}]));let Nc=dn;var ft;let Dr=(ft=class extends O{constructor(t){super();l(this,"documentKey","");l(this,"checkpoint");l(this,"snapshot",new Uint8Array(0));l(this,"changes",[]);l(this,"minSyncedTicket");l(this,"isRemoved",!1);l(this,"versionVector");f.util.initPartial(t,this)}static fromBinary(t,r){return new ft().fromBinary(t,r)}static fromJson(t,r){return new ft().fromJson(t,r)}static fromJsonString(t,r){return new ft().fromJsonString(t,r)}static equals(t,r){return f.util.equals(ft,t,r)}},l(ft,"runtime",f),l(ft,"typeName","yorkie.v1.ChangePack"),l(ft,"fields",f.util.newFieldList(()=>[{no:1,name:"document_key",kind:"scalar",T:9},{no:2,name:"checkpoint",kind:"message",T:cy},{no:3,name:"snapshot",kind:"scalar",T:12},{no:4,name:"changes",kind:"message",T:ly,repeated:!0},{no:5,name:"min_synced_ticket",kind:"message",T:b},{no:6,name:"is_removed",kind:"scalar",T:8},{no:7,name:"version_vector",kind:"message",T:ql}])),ft);var dt;let ly=(dt=class extends O{constructor(t){super();l(this,"id");l(this,"message","");l(this,"operations",[]);l(this,"presenceChange");f.util.initPartial(t,this)}static fromBinary(t,r){return new dt().fromBinary(t,r)}static fromJson(t,r){return new dt().fromJson(t,r)}static fromJsonString(t,r){return new dt().fromJsonString(t,r)}static equals(t,r){return f.util.equals(dt,t,r)}},l(dt,"runtime",f),l(dt,"typeName","yorkie.v1.Change"),l(dt,"fields",f.util.newFieldList(()=>[{no:1,name:"id",kind:"message",T:Vl},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"operations",kind:"message",T:td,repeated:!0},{no:4,name:"presence_change",kind:"message",T:xo}])),dt);var ht;let Vl=(ht=class extends O{constructor(t){super();l(this,"clientSeq",0);l(this,"serverSeq",ne.zero);l(this,"lamport",ne.zero);l(this,"actorId",new Uint8Array(0));l(this,"versionVector");f.util.initPartial(t,this)}static fromBinary(t,r){return new ht().fromBinary(t,r)}static fromJson(t,r){return new ht().fromJson(t,r)}static fromJsonString(t,r){return new ht().fromJsonString(t,r)}static equals(t,r){return f.util.equals(ht,t,r)}},l(ht,"runtime",f),l(ht,"typeName","yorkie.v1.ChangeID"),l(ht,"fields",f.util.newFieldList(()=>[{no:1,name:"client_seq",kind:"scalar",T:13},{no:2,name:"server_seq",kind:"scalar",T:3},{no:3,name:"lamport",kind:"scalar",T:3},{no:4,name:"actor_id",kind:"scalar",T:12},{no:5,name:"version_vector",kind:"message",T:ql}])),ht);var gt;let ql=(gt=class extends O{constructor(t){super();l(this,"vector",{});f.util.initPartial(t,this)}static fromBinary(t,r){return new gt().fromBinary(t,r)}static fromJson(t,r){return new gt().fromJson(t,r)}static fromJsonString(t,r){return new gt().fromJsonString(t,r)}static equals(t,r){return f.util.equals(gt,t,r)}},l(gt,"runtime",f),l(gt,"typeName","yorkie.v1.VersionVector"),l(gt,"fields",f.util.newFieldList(()=>[{no:1,name:"vector",kind:"map",K:9,V:{kind:"scalar",T:3}}])),gt);var mt;let td=(mt=class extends O{constructor(t){super();l(this,"body",{case:void 0});f.util.initPartial(t,this)}static fromBinary(t,r){return new mt().fromBinary(t,r)}static fromJson(t,r){return new mt().fromJson(t,r)}static fromJsonString(t,r){return new mt().fromJsonString(t,r)}static equals(t,r){return f.util.equals(mt,t,r)}},l(mt,"runtime",f),l(mt,"typeName","yorkie.v1.Operation"),l(mt,"fields",f.util.newFieldList(()=>[{no:1,name:"set",kind:"message",T:il,oneof:"body"},{no:2,name:"add",kind:"message",T:sl,oneof:"body"},{no:3,name:"move",kind:"message",T:ol,oneof:"body"},{no:4,name:"remove",kind:"message",T:al,oneof:"body"},{no:5,name:"edit",kind:"message",T:ll,oneof:"body"},{no:6,name:"select",kind:"message",T:Pc,oneof:"body"},{no:7,name:"style",kind:"message",T:ul,oneof:"body"},{no:8,name:"increase",kind:"message",T:cl,oneof:"body"},{no:9,name:"tree_edit",kind:"message",T:fl,oneof:"body"},{no:10,name:"tree_style",kind:"message",T:dl,oneof:"body"},{no:11,name:"array_set",kind:"message",T:Cc,oneof:"body"}])),mt);const hn=class hn extends O{constructor(t){super();l(this,"parentCreatedAt");l(this,"key","");l(this,"value");l(this,"executedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new hn().fromBinary(t,r)}static fromJson(t,r){return new hn().fromJson(t,r)}static fromJsonString(t,r){return new hn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(hn,t,r)}};l(hn,"runtime",f),l(hn,"typeName","yorkie.v1.Operation.Set"),l(hn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:b},{no:2,name:"key",kind:"scalar",T:9},{no:3,name:"value",kind:"message",T:ct},{no:4,name:"executed_at",kind:"message",T:b}]));let il=hn;const gn=class gn extends O{constructor(t){super();l(this,"parentCreatedAt");l(this,"prevCreatedAt");l(this,"value");l(this,"executedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new gn().fromBinary(t,r)}static fromJson(t,r){return new gn().fromJson(t,r)}static fromJsonString(t,r){return new gn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(gn,t,r)}};l(gn,"runtime",f),l(gn,"typeName","yorkie.v1.Operation.Add"),l(gn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:b},{no:2,name:"prev_created_at",kind:"message",T:b},{no:3,name:"value",kind:"message",T:ct},{no:4,name:"executed_at",kind:"message",T:b}]));let sl=gn;const mn=class mn extends O{constructor(t){super();l(this,"parentCreatedAt");l(this,"prevCreatedAt");l(this,"createdAt");l(this,"executedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new mn().fromBinary(t,r)}static fromJson(t,r){return new mn().fromJson(t,r)}static fromJsonString(t,r){return new mn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(mn,t,r)}};l(mn,"runtime",f),l(mn,"typeName","yorkie.v1.Operation.Move"),l(mn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:b},{no:2,name:"prev_created_at",kind:"message",T:b},{no:3,name:"created_at",kind:"message",T:b},{no:4,name:"executed_at",kind:"message",T:b}]));let ol=mn;const pn=class pn extends O{constructor(t){super();l(this,"parentCreatedAt");l(this,"createdAt");l(this,"executedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new pn().fromBinary(t,r)}static fromJson(t,r){return new pn().fromJson(t,r)}static fromJsonString(t,r){return new pn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(pn,t,r)}};l(pn,"runtime",f),l(pn,"typeName","yorkie.v1.Operation.Remove"),l(pn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:b},{no:2,name:"created_at",kind:"message",T:b},{no:3,name:"executed_at",kind:"message",T:b}]));let al=pn;const yn=class yn extends O{constructor(t){super();l(this,"parentCreatedAt");l(this,"from");l(this,"to");l(this,"createdAtMapByActor",{});l(this,"content","");l(this,"executedAt");l(this,"attributes",{});f.util.initPartial(t,this)}static fromBinary(t,r){return new yn().fromBinary(t,r)}static fromJson(t,r){return new yn().fromJson(t,r)}static fromJsonString(t,r){return new yn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(yn,t,r)}};l(yn,"runtime",f),l(yn,"typeName","yorkie.v1.Operation.Edit"),l(yn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:b},{no:2,name:"from",kind:"message",T:Nr},{no:3,name:"to",kind:"message",T:Nr},{no:4,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:b}},{no:5,name:"content",kind:"scalar",T:9},{no:6,name:"executed_at",kind:"message",T:b},{no:7,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}}]));let ll=yn;const vn=class vn extends O{constructor(t){super();l(this,"parentCreatedAt");l(this,"from");l(this,"to");l(this,"executedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new vn().fromBinary(t,r)}static fromJson(t,r){return new vn().fromJson(t,r)}static fromJsonString(t,r){return new vn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(vn,t,r)}};l(vn,"runtime",f),l(vn,"typeName","yorkie.v1.Operation.Select"),l(vn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:b},{no:2,name:"from",kind:"message",T:Nr},{no:3,name:"to",kind:"message",T:Nr},{no:4,name:"executed_at",kind:"message",T:b}]));let Pc=vn;const wn=class wn extends O{constructor(t){super();l(this,"parentCreatedAt");l(this,"from");l(this,"to");l(this,"attributes",{});l(this,"executedAt");l(this,"createdAtMapByActor",{});f.util.initPartial(t,this)}static fromBinary(t,r){return new wn().fromBinary(t,r)}static fromJson(t,r){return new wn().fromJson(t,r)}static fromJsonString(t,r){return new wn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(wn,t,r)}};l(wn,"runtime",f),l(wn,"typeName","yorkie.v1.Operation.Style"),l(wn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:b},{no:2,name:"from",kind:"message",T:Nr},{no:3,name:"to",kind:"message",T:Nr},{no:4,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:5,name:"executed_at",kind:"message",T:b},{no:6,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:b}}]));let ul=wn;const Sn=class Sn extends O{constructor(t){super();l(this,"parentCreatedAt");l(this,"value");l(this,"executedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new Sn().fromBinary(t,r)}static fromJson(t,r){return new Sn().fromJson(t,r)}static fromJsonString(t,r){return new Sn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Sn,t,r)}};l(Sn,"runtime",f),l(Sn,"typeName","yorkie.v1.Operation.Increase"),l(Sn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:b},{no:2,name:"value",kind:"message",T:ct},{no:3,name:"executed_at",kind:"message",T:b}]));let cl=Sn;const kn=class kn extends O{constructor(t){super();l(this,"parentCreatedAt");l(this,"from");l(this,"to");l(this,"createdAtMapByActor",{});l(this,"contents",[]);l(this,"splitLevel",0);l(this,"executedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new kn().fromBinary(t,r)}static fromJson(t,r){return new kn().fromJson(t,r)}static fromJsonString(t,r){return new kn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(kn,t,r)}};l(kn,"runtime",f),l(kn,"typeName","yorkie.v1.Operation.TreeEdit"),l(kn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:b},{no:2,name:"from",kind:"message",T:Ci},{no:3,name:"to",kind:"message",T:Ci},{no:4,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:b}},{no:5,name:"contents",kind:"message",T:kl,repeated:!0},{no:7,name:"split_level",kind:"scalar",T:5},{no:6,name:"executed_at",kind:"message",T:b}]));let fl=kn;const Tn=class Tn extends O{constructor(t){super();l(this,"parentCreatedAt");l(this,"from");l(this,"to");l(this,"attributes",{});l(this,"executedAt");l(this,"attributesToRemove",[]);l(this,"createdAtMapByActor",{});f.util.initPartial(t,this)}static fromBinary(t,r){return new Tn().fromBinary(t,r)}static fromJson(t,r){return new Tn().fromJson(t,r)}static fromJsonString(t,r){return new Tn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Tn,t,r)}};l(Tn,"runtime",f),l(Tn,"typeName","yorkie.v1.Operation.TreeStyle"),l(Tn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:b},{no:2,name:"from",kind:"message",T:Ci},{no:3,name:"to",kind:"message",T:Ci},{no:4,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:5,name:"executed_at",kind:"message",T:b},{no:6,name:"attributes_to_remove",kind:"scalar",T:9,repeated:!0},{no:7,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:b}}]));let dl=Tn;const In=class In extends O{constructor(t){super();l(this,"parentCreatedAt");l(this,"createdAt");l(this,"value");l(this,"executedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new In().fromBinary(t,r)}static fromJson(t,r){return new In().fromJson(t,r)}static fromJsonString(t,r){return new In().fromJsonString(t,r)}static equals(t,r){return f.util.equals(In,t,r)}};l(In,"runtime",f),l(In,"typeName","yorkie.v1.Operation.ArraySet"),l(In,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:b},{no:2,name:"created_at",kind:"message",T:b},{no:3,name:"value",kind:"message",T:ct},{no:4,name:"executed_at",kind:"message",T:b}]));let Cc=In;const En=class En extends O{constructor(t){super();l(this,"createdAt");l(this,"movedAt");l(this,"removedAt");l(this,"type",0);l(this,"value",new Uint8Array(0));f.util.initPartial(t,this)}static fromBinary(t,r){return new En().fromBinary(t,r)}static fromJson(t,r){return new En().fromJson(t,r)}static fromJsonString(t,r){return new En().fromJsonString(t,r)}static equals(t,r){return f.util.equals(En,t,r)}};l(En,"runtime",f),l(En,"typeName","yorkie.v1.JSONElementSimple"),l(En,"fields",f.util.newFieldList(()=>[{no:1,name:"created_at",kind:"message",T:b},{no:2,name:"moved_at",kind:"message",T:b},{no:3,name:"removed_at",kind:"message",T:b},{no:4,name:"type",kind:"enum",T:f.getEnumType(U)},{no:5,name:"value",kind:"scalar",T:12}]));let ct=En;const An=class An extends O{constructor(t){super();l(this,"body",{case:void 0});f.util.initPartial(t,this)}static fromBinary(t,r){return new An().fromBinary(t,r)}static fromJson(t,r){return new An().fromJson(t,r)}static fromJsonString(t,r){return new An().fromJsonString(t,r)}static equals(t,r){return f.util.equals(An,t,r)}};l(An,"runtime",f),l(An,"typeName","yorkie.v1.JSONElement"),l(An,"fields",f.util.newFieldList(()=>[{no:1,name:"json_object",kind:"message",T:hl,oneof:"body"},{no:2,name:"json_array",kind:"message",T:gl,oneof:"body"},{no:3,name:"primitive",kind:"message",T:ml,oneof:"body"},{no:5,name:"text",kind:"message",T:pl,oneof:"body"},{no:6,name:"counter",kind:"message",T:yl,oneof:"body"},{no:7,name:"tree",kind:"message",T:vl,oneof:"body"}]));let Qe=An;const xn=class xn extends O{constructor(t){super();l(this,"nodes",[]);l(this,"createdAt");l(this,"movedAt");l(this,"removedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new xn().fromBinary(t,r)}static fromJson(t,r){return new xn().fromJson(t,r)}static fromJsonString(t,r){return new xn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(xn,t,r)}};l(xn,"runtime",f),l(xn,"typeName","yorkie.v1.JSONElement.JSONObject"),l(xn,"fields",f.util.newFieldList(()=>[{no:1,name:"nodes",kind:"message",T:uy,repeated:!0},{no:2,name:"created_at",kind:"message",T:b},{no:3,name:"moved_at",kind:"message",T:b},{no:4,name:"removed_at",kind:"message",T:b}]));let hl=xn;const Nn=class Nn extends O{constructor(t){super();l(this,"nodes",[]);l(this,"createdAt");l(this,"movedAt");l(this,"removedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new Nn().fromBinary(t,r)}static fromJson(t,r){return new Nn().fromJson(t,r)}static fromJsonString(t,r){return new Nn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Nn,t,r)}};l(Nn,"runtime",f),l(Nn,"typeName","yorkie.v1.JSONElement.JSONArray"),l(Nn,"fields",f.util.newFieldList(()=>[{no:1,name:"nodes",kind:"message",T:wl,repeated:!0},{no:2,name:"created_at",kind:"message",T:b},{no:3,name:"moved_at",kind:"message",T:b},{no:4,name:"removed_at",kind:"message",T:b}]));let gl=Nn;const Pn=class Pn extends O{constructor(t){super();l(this,"type",0);l(this,"value",new Uint8Array(0));l(this,"createdAt");l(this,"movedAt");l(this,"removedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new Pn().fromBinary(t,r)}static fromJson(t,r){return new Pn().fromJson(t,r)}static fromJsonString(t,r){return new Pn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Pn,t,r)}};l(Pn,"runtime",f),l(Pn,"typeName","yorkie.v1.JSONElement.Primitive"),l(Pn,"fields",f.util.newFieldList(()=>[{no:1,name:"type",kind:"enum",T:f.getEnumType(U)},{no:2,name:"value",kind:"scalar",T:12},{no:3,name:"created_at",kind:"message",T:b},{no:4,name:"moved_at",kind:"message",T:b},{no:5,name:"removed_at",kind:"message",T:b}]));let ml=Pn;const Cn=class Cn extends O{constructor(t){super();l(this,"nodes",[]);l(this,"createdAt");l(this,"movedAt");l(this,"removedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new Cn().fromBinary(t,r)}static fromJson(t,r){return new Cn().fromJson(t,r)}static fromJsonString(t,r){return new Cn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Cn,t,r)}};l(Cn,"runtime",f),l(Cn,"typeName","yorkie.v1.JSONElement.Text"),l(Cn,"fields",f.util.newFieldList(()=>[{no:1,name:"nodes",kind:"message",T:Sl,repeated:!0},{no:2,name:"created_at",kind:"message",T:b},{no:3,name:"moved_at",kind:"message",T:b},{no:4,name:"removed_at",kind:"message",T:b}]));let pl=Cn;const Dn=class Dn extends O{constructor(t){super();l(this,"type",0);l(this,"value",new Uint8Array(0));l(this,"createdAt");l(this,"movedAt");l(this,"removedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new Dn().fromBinary(t,r)}static fromJson(t,r){return new Dn().fromJson(t,r)}static fromJsonString(t,r){return new Dn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Dn,t,r)}};l(Dn,"runtime",f),l(Dn,"typeName","yorkie.v1.JSONElement.Counter"),l(Dn,"fields",f.util.newFieldList(()=>[{no:1,name:"type",kind:"enum",T:f.getEnumType(U)},{no:2,name:"value",kind:"scalar",T:12},{no:3,name:"created_at",kind:"message",T:b},{no:4,name:"moved_at",kind:"message",T:b},{no:5,name:"removed_at",kind:"message",T:b}]));let yl=Dn;const On=class On extends O{constructor(t){super();l(this,"nodes",[]);l(this,"createdAt");l(this,"movedAt");l(this,"removedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new On().fromBinary(t,r)}static fromJson(t,r){return new On().fromJson(t,r)}static fromJsonString(t,r){return new On().fromJsonString(t,r)}static equals(t,r){return f.util.equals(On,t,r)}};l(On,"runtime",f),l(On,"typeName","yorkie.v1.JSONElement.Tree"),l(On,"fields",f.util.newFieldList(()=>[{no:1,name:"nodes",kind:"message",T:Ao,repeated:!0},{no:2,name:"created_at",kind:"message",T:b},{no:3,name:"moved_at",kind:"message",T:b},{no:4,name:"removed_at",kind:"message",T:b}]));let vl=On;var pt;let uy=(pt=class extends O{constructor(t){super();l(this,"key","");l(this,"element");f.util.initPartial(t,this)}static fromBinary(t,r){return new pt().fromBinary(t,r)}static fromJson(t,r){return new pt().fromJson(t,r)}static fromJsonString(t,r){return new pt().fromJsonString(t,r)}static equals(t,r){return f.util.equals(pt,t,r)}},l(pt,"runtime",f),l(pt,"typeName","yorkie.v1.RHTNode"),l(pt,"fields",f.util.newFieldList(()=>[{no:1,name:"key",kind:"scalar",T:9},{no:2,name:"element",kind:"message",T:Qe}])),pt);const Kt=class Kt extends O{constructor(t){super();l(this,"next");l(this,"element");f.util.initPartial(t,this)}static fromBinary(t,r){return new Kt().fromBinary(t,r)}static fromJson(t,r){return new Kt().fromJson(t,r)}static fromJsonString(t,r){return new Kt().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Kt,t,r)}};l(Kt,"runtime",f),l(Kt,"typeName","yorkie.v1.RGANode"),l(Kt,"fields",f.util.newFieldList(()=>[{no:1,name:"next",kind:"message",T:Kt},{no:2,name:"element",kind:"message",T:Qe}]));let wl=Kt;const Rn=class Rn extends O{constructor(t){super();l(this,"value","");l(this,"updatedAt");l(this,"isRemoved",!1);f.util.initPartial(t,this)}static fromBinary(t,r){return new Rn().fromBinary(t,r)}static fromJson(t,r){return new Rn().fromJson(t,r)}static fromJsonString(t,r){return new Rn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Rn,t,r)}};l(Rn,"runtime",f),l(Rn,"typeName","yorkie.v1.NodeAttr"),l(Rn,"fields",f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:9},{no:2,name:"updated_at",kind:"message",T:b},{no:3,name:"is_removed",kind:"scalar",T:8}]));let vs=Rn;const Ln=class Ln extends O{constructor(t){super();l(this,"id");l(this,"value","");l(this,"removedAt");l(this,"insPrevId");l(this,"attributes",{});f.util.initPartial(t,this)}static fromBinary(t,r){return new Ln().fromBinary(t,r)}static fromJson(t,r){return new Ln().fromJson(t,r)}static fromJsonString(t,r){return new Ln().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Ln,t,r)}};l(Ln,"runtime",f),l(Ln,"typeName","yorkie.v1.TextNode"),l(Ln,"fields",f.util.newFieldList(()=>[{no:1,name:"id",kind:"message",T:Eo},{no:2,name:"value",kind:"scalar",T:9},{no:3,name:"removed_at",kind:"message",T:b},{no:4,name:"ins_prev_id",kind:"message",T:Eo},{no:5,name:"attributes",kind:"map",K:9,V:{kind:"message",T:vs}}]));let Sl=Ln;const Bn=class Bn extends O{constructor(t){super();l(this,"createdAt");l(this,"offset",0);f.util.initPartial(t,this)}static fromBinary(t,r){return new Bn().fromBinary(t,r)}static fromJson(t,r){return new Bn().fromJson(t,r)}static fromJsonString(t,r){return new Bn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Bn,t,r)}};l(Bn,"runtime",f),l(Bn,"typeName","yorkie.v1.TextNodeID"),l(Bn,"fields",f.util.newFieldList(()=>[{no:1,name:"created_at",kind:"message",T:b},{no:2,name:"offset",kind:"scalar",T:5}]));let Eo=Bn;const bn=class bn extends O{constructor(t){super();l(this,"id");l(this,"type","");l(this,"value","");l(this,"removedAt");l(this,"insPrevId");l(this,"insNextId");l(this,"depth",0);l(this,"attributes",{});f.util.initPartial(t,this)}static fromBinary(t,r){return new bn().fromBinary(t,r)}static fromJson(t,r){return new bn().fromJson(t,r)}static fromJsonString(t,r){return new bn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(bn,t,r)}};l(bn,"runtime",f),l(bn,"typeName","yorkie.v1.TreeNode"),l(bn,"fields",f.util.newFieldList(()=>[{no:1,name:"id",kind:"message",T:Xr},{no:2,name:"type",kind:"scalar",T:9},{no:3,name:"value",kind:"scalar",T:9},{no:4,name:"removed_at",kind:"message",T:b},{no:5,name:"ins_prev_id",kind:"message",T:Xr},{no:6,name:"ins_next_id",kind:"message",T:Xr},{no:7,name:"depth",kind:"scalar",T:5},{no:8,name:"attributes",kind:"map",K:9,V:{kind:"message",T:vs}}]));let Ao=bn;const zn=class zn extends O{constructor(t){super();l(this,"content",[]);f.util.initPartial(t,this)}static fromBinary(t,r){return new zn().fromBinary(t,r)}static fromJson(t,r){return new zn().fromJson(t,r)}static fromJsonString(t,r){return new zn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(zn,t,r)}};l(zn,"runtime",f),l(zn,"typeName","yorkie.v1.TreeNodes"),l(zn,"fields",f.util.newFieldList(()=>[{no:1,name:"content",kind:"message",T:Ao,repeated:!0}]));let kl=zn;const Fn=class Fn extends O{constructor(t){super();l(this,"createdAt");l(this,"offset",0);f.util.initPartial(t,this)}static fromBinary(t,r){return new Fn().fromBinary(t,r)}static fromJson(t,r){return new Fn().fromJson(t,r)}static fromJsonString(t,r){return new Fn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Fn,t,r)}};l(Fn,"runtime",f),l(Fn,"typeName","yorkie.v1.TreeNodeID"),l(Fn,"fields",f.util.newFieldList(()=>[{no:1,name:"created_at",kind:"message",T:b},{no:2,name:"offset",kind:"scalar",T:5}]));let Xr=Fn;const Jn=class Jn extends O{constructor(t){super();l(this,"parentId");l(this,"leftSiblingId");f.util.initPartial(t,this)}static fromBinary(t,r){return new Jn().fromBinary(t,r)}static fromJson(t,r){return new Jn().fromJson(t,r)}static fromJsonString(t,r){return new Jn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Jn,t,r)}};l(Jn,"runtime",f),l(Jn,"typeName","yorkie.v1.TreePos"),l(Jn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_id",kind:"message",T:Xr},{no:2,name:"left_sibling_id",kind:"message",T:Xr}]));let Ci=Jn;const Mn=class Mn extends O{constructor(t){super();l(this,"id","");l(this,"username","");l(this,"createdAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new Mn().fromBinary(t,r)}static fromJson(t,r){return new Mn().fromJson(t,r)}static fromJsonString(t,r){return new Mn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Mn,t,r)}};l(Mn,"runtime",f),l(Mn,"typeName","yorkie.v1.User"),l(Mn,"fields",f.util.newFieldList(()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"username",kind:"scalar",T:9},{no:3,name:"created_at",kind:"message",T:Oe}]));let og=Mn;const $n=class $n extends O{constructor(t){super();l(this,"id","");l(this,"name","");l(this,"publicKey","");l(this,"secretKey","");l(this,"authWebhookUrl","");l(this,"authWebhookMethods",[]);l(this,"eventWebhookUrl","");l(this,"eventWebhookEvents",[]);l(this,"clientDeactivateThreshold","");l(this,"maxSubscribersPerDocument",0);l(this,"maxAttachmentsPerDocument",0);l(this,"maxSizePerDocument",0);l(this,"allowedOrigins",[]);l(this,"createdAt");l(this,"updatedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new $n().fromBinary(t,r)}static fromJson(t,r){return new $n().fromJson(t,r)}static fromJsonString(t,r){return new $n().fromJsonString(t,r)}static equals(t,r){return f.util.equals($n,t,r)}};l($n,"runtime",f),l($n,"typeName","yorkie.v1.Project"),l($n,"fields",f.util.newFieldList(()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"public_key",kind:"scalar",T:9},{no:4,name:"secret_key",kind:"scalar",T:9},{no:5,name:"auth_webhook_url",kind:"scalar",T:9},{no:6,name:"auth_webhook_methods",kind:"scalar",T:9,repeated:!0},{no:7,name:"event_webhook_url",kind:"scalar",T:9},{no:8,name:"event_webhook_events",kind:"scalar",T:9,repeated:!0},{no:9,name:"client_deactivate_threshold",kind:"scalar",T:9},{no:10,name:"max_subscribers_per_document",kind:"scalar",T:5},{no:11,name:"max_attachments_per_document",kind:"scalar",T:5},{no:15,name:"max_size_per_document",kind:"scalar",T:5},{no:14,name:"allowed_origins",kind:"scalar",T:9,repeated:!0},{no:12,name:"created_at",kind:"message",T:Oe},{no:13,name:"updated_at",kind:"message",T:Oe}]));let ag=$n;const Un=class Un extends O{constructor(t){super();l(this,"name");l(this,"authWebhookUrl");l(this,"authWebhookMethods");l(this,"eventWebhookUrl");l(this,"eventWebhookEvents");l(this,"clientDeactivateThreshold");l(this,"maxSubscribersPerDocument");l(this,"maxAttachmentsPerDocument");l(this,"maxSizePerDocument");l(this,"allowedOrigins");f.util.initPartial(t,this)}static fromBinary(t,r){return new Un().fromBinary(t,r)}static fromJson(t,r){return new Un().fromJson(t,r)}static fromJsonString(t,r){return new Un().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Un,t,r)}};l(Un,"runtime",f),l(Un,"typeName","yorkie.v1.UpdatableProjectFields"),l(Un,"fields",f.util.newFieldList(()=>[{no:1,name:"name",kind:"message",T:Ke},{no:2,name:"auth_webhook_url",kind:"message",T:Ke},{no:3,name:"auth_webhook_methods",kind:"message",T:Dc},{no:4,name:"event_webhook_url",kind:"message",T:Ke},{no:5,name:"event_webhook_events",kind:"message",T:Oc},{no:6,name:"client_deactivate_threshold",kind:"message",T:Ke},{no:7,name:"max_subscribers_per_document",kind:"message",T:et},{no:8,name:"max_attachments_per_document",kind:"message",T:et},{no:10,name:"max_size_per_document",kind:"message",T:et},{no:9,name:"allowed_origins",kind:"message",T:Rc}]));let lg=Un;const jn=class jn extends O{constructor(t){super();l(this,"methods",[]);f.util.initPartial(t,this)}static fromBinary(t,r){return new jn().fromBinary(t,r)}static fromJson(t,r){return new jn().fromJson(t,r)}static fromJsonString(t,r){return new jn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(jn,t,r)}};l(jn,"runtime",f),l(jn,"typeName","yorkie.v1.UpdatableProjectFields.AuthWebhookMethods"),l(jn,"fields",f.util.newFieldList(()=>[{no:1,name:"methods",kind:"scalar",T:9,repeated:!0}]));let Dc=jn;const Vn=class Vn extends O{constructor(t){super();l(this,"events",[]);f.util.initPartial(t,this)}static fromBinary(t,r){return new Vn().fromBinary(t,r)}static fromJson(t,r){return new Vn().fromJson(t,r)}static fromJsonString(t,r){return new Vn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Vn,t,r)}};l(Vn,"runtime",f),l(Vn,"typeName","yorkie.v1.UpdatableProjectFields.EventWebhookEvents"),l(Vn,"fields",f.util.newFieldList(()=>[{no:1,name:"events",kind:"scalar",T:9,repeated:!0}]));let Oc=Vn;const qn=class qn extends O{constructor(t){super();l(this,"origins",[]);f.util.initPartial(t,this)}static fromBinary(t,r){return new qn().fromBinary(t,r)}static fromJson(t,r){return new qn().fromJson(t,r)}static fromJsonString(t,r){return new qn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(qn,t,r)}};l(qn,"runtime",f),l(qn,"typeName","yorkie.v1.UpdatableProjectFields.AllowedOrigins"),l(qn,"fields",f.util.newFieldList(()=>[{no:1,name:"origins",kind:"scalar",T:9,repeated:!0}]));let Rc=qn;const Kn=class Kn extends O{constructor(t){super();l(this,"id","");l(this,"key","");l(this,"snapshot","");l(this,"createdAt");l(this,"accessedAt");l(this,"updatedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new Kn().fromBinary(t,r)}static fromJson(t,r){return new Kn().fromJson(t,r)}static fromJsonString(t,r){return new Kn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Kn,t,r)}};l(Kn,"runtime",f),l(Kn,"typeName","yorkie.v1.DocumentSummary"),l(Kn,"fields",f.util.newFieldList(()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"key",kind:"scalar",T:9},{no:3,name:"snapshot",kind:"scalar",T:9},{no:4,name:"created_at",kind:"message",T:Oe},{no:5,name:"accessed_at",kind:"message",T:Oe},{no:6,name:"updated_at",kind:"message",T:Oe}]));let ug=Kn;const Wn=class Wn extends O{constructor(t){super();l(this,"type",0);l(this,"presence");f.util.initPartial(t,this)}static fromBinary(t,r){return new Wn().fromBinary(t,r)}static fromJson(t,r){return new Wn().fromJson(t,r)}static fromJsonString(t,r){return new Wn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Wn,t,r)}};l(Wn,"runtime",f),l(Wn,"typeName","yorkie.v1.PresenceChange"),l(Wn,"fields",f.util.newFieldList(()=>[{no:1,name:"type",kind:"enum",T:f.getEnumType(Di)},{no:2,name:"presence",kind:"message",T:nd}]));let xo=Wn;var Di=(n=>(n[n.UNSPECIFIED=0]="UNSPECIFIED",n[n.PUT=1]="PUT",n[n.DELETE=2]="DELETE",n[n.CLEAR=3]="CLEAR",n))(Di||{});f.util.setEnumType(Di,"yorkie.v1.PresenceChange.ChangeType",[{no:0,name:"CHANGE_TYPE_UNSPECIFIED"},{no:1,name:"CHANGE_TYPE_PUT"},{no:2,name:"CHANGE_TYPE_DELETE"},{no:3,name:"CHANGE_TYPE_CLEAR"}]);var yt;let nd=(yt=class extends O{constructor(t){super();l(this,"data",{});f.util.initPartial(t,this)}static fromBinary(t,r){return new yt().fromBinary(t,r)}static fromJson(t,r){return new yt().fromJson(t,r)}static fromJsonString(t,r){return new yt().fromJsonString(t,r)}static equals(t,r){return f.util.equals(yt,t,r)}},l(yt,"runtime",f),l(yt,"typeName","yorkie.v1.Presence"),l(yt,"fields",f.util.newFieldList(()=>[{no:1,name:"data",kind:"map",K:9,V:{kind:"scalar",T:9}}])),yt);var vt;let cy=(vt=class extends O{constructor(t){super();l(this,"serverSeq",ne.zero);l(this,"clientSeq",0);f.util.initPartial(t,this)}static fromBinary(t,r){return new vt().fromBinary(t,r)}static fromJson(t,r){return new vt().fromJson(t,r)}static fromJsonString(t,r){return new vt().fromJsonString(t,r)}static equals(t,r){return f.util.equals(vt,t,r)}},l(vt,"runtime",f),l(vt,"typeName","yorkie.v1.Checkpoint"),l(vt,"fields",f.util.newFieldList(()=>[{no:1,name:"server_seq",kind:"scalar",T:3},{no:2,name:"client_seq",kind:"scalar",T:13}])),vt);const _n=class _n extends O{constructor(t){super();l(this,"createdAt");l(this,"offset",0);l(this,"relativeOffset",0);f.util.initPartial(t,this)}static fromBinary(t,r){return new _n().fromBinary(t,r)}static fromJson(t,r){return new _n().fromJson(t,r)}static fromJsonString(t,r){return new _n().fromJsonString(t,r)}static equals(t,r){return f.util.equals(_n,t,r)}};l(_n,"runtime",f),l(_n,"typeName","yorkie.v1.TextNodePos"),l(_n,"fields",f.util.newFieldList(()=>[{no:1,name:"created_at",kind:"message",T:b},{no:2,name:"offset",kind:"scalar",T:5},{no:3,name:"relative_offset",kind:"scalar",T:5}]));let Nr=_n;var wt;let b=(wt=class extends O{constructor(t){super();l(this,"lamport",ne.zero);l(this,"delimiter",0);l(this,"actorId",new Uint8Array(0));f.util.initPartial(t,this)}static fromBinary(t,r){return new wt().fromBinary(t,r)}static fromJson(t,r){return new wt().fromJson(t,r)}static fromJsonString(t,r){return new wt().fromJsonString(t,r)}static equals(t,r){return f.util.equals(wt,t,r)}},l(wt,"runtime",f),l(wt,"typeName","yorkie.v1.TimeTicket"),l(wt,"fields",f.util.newFieldList(()=>[{no:1,name:"lamport",kind:"scalar",T:3},{no:2,name:"delimiter",kind:"scalar",T:13},{no:3,name:"actor_id",kind:"scalar",T:12}])),wt);const Hn=class Hn extends O{constructor(t){super();l(this,"topic","");l(this,"payload",new Uint8Array(0));f.util.initPartial(t,this)}static fromBinary(t,r){return new Hn().fromBinary(t,r)}static fromJson(t,r){return new Hn().fromJson(t,r)}static fromJsonString(t,r){return new Hn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Hn,t,r)}};l(Hn,"runtime",f),l(Hn,"typeName","yorkie.v1.DocEventBody"),l(Hn,"fields",f.util.newFieldList(()=>[{no:1,name:"topic",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:12}]));let Lc=Hn;const Gn=class Gn extends O{constructor(t){super();l(this,"type",0);l(this,"publisher","");l(this,"body");f.util.initPartial(t,this)}static fromBinary(t,r){return new Gn().fromBinary(t,r)}static fromJson(t,r){return new Gn().fromJson(t,r)}static fromJsonString(t,r){return new Gn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Gn,t,r)}};l(Gn,"runtime",f),l(Gn,"typeName","yorkie.v1.DocEvent"),l(Gn,"fields",f.util.newFieldList(()=>[{no:1,name:"type",kind:"enum",T:f.getEnumType(Ii)},{no:2,name:"publisher",kind:"scalar",T:9},{no:3,name:"body",kind:"message",T:Lc}]));let Bc=Gn;const Yn=class Yn extends O{constructor(t){super();l(this,"clientKey","");l(this,"metadata",{});f.util.initPartial(t,this)}static fromBinary(t,r){return new Yn().fromBinary(t,r)}static fromJson(t,r){return new Yn().fromJson(t,r)}static fromJsonString(t,r){return new Yn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Yn,t,r)}};l(Yn,"runtime",f),l(Yn,"typeName","yorkie.v1.ActivateClientRequest"),l(Yn,"fields",f.util.newFieldList(()=>[{no:1,name:"client_key",kind:"scalar",T:9},{no:2,name:"metadata",kind:"map",K:9,V:{kind:"scalar",T:9}}]));let bc=Yn;const Qn=class Qn extends O{constructor(t){super();l(this,"clientId","");f.util.initPartial(t,this)}static fromBinary(t,r){return new Qn().fromBinary(t,r)}static fromJson(t,r){return new Qn().fromJson(t,r)}static fromJsonString(t,r){return new Qn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Qn,t,r)}};l(Qn,"runtime",f),l(Qn,"typeName","yorkie.v1.ActivateClientResponse"),l(Qn,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9}]));let zc=Qn;const Xn=class Xn extends O{constructor(t){super();l(this,"clientId","");f.util.initPartial(t,this)}static fromBinary(t,r){return new Xn().fromBinary(t,r)}static fromJson(t,r){return new Xn().fromJson(t,r)}static fromJsonString(t,r){return new Xn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Xn,t,r)}};l(Xn,"runtime",f),l(Xn,"typeName","yorkie.v1.DeactivateClientRequest"),l(Xn,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9}]));let Fc=Xn;const Zn=class Zn extends O{constructor(e){super(),f.util.initPartial(e,this)}static fromBinary(e,t){return new Zn().fromBinary(e,t)}static fromJson(e,t){return new Zn().fromJson(e,t)}static fromJsonString(e,t){return new Zn().fromJsonString(e,t)}static equals(e,t){return f.util.equals(Zn,e,t)}};l(Zn,"runtime",f),l(Zn,"typeName","yorkie.v1.DeactivateClientResponse"),l(Zn,"fields",f.util.newFieldList(()=>[]));let Jc=Zn;const er=class er extends O{constructor(t){super();l(this,"clientId","");l(this,"changePack");f.util.initPartial(t,this)}static fromBinary(t,r){return new er().fromBinary(t,r)}static fromJson(t,r){return new er().fromJson(t,r)}static fromJsonString(t,r){return new er().fromJsonString(t,r)}static equals(t,r){return f.util.equals(er,t,r)}};l(er,"runtime",f),l(er,"typeName","yorkie.v1.AttachDocumentRequest"),l(er,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"change_pack",kind:"message",T:Dr}]));let Mc=er;const tr=class tr extends O{constructor(t){super();l(this,"documentId","");l(this,"maxSizePerDocument",0);l(this,"changePack");f.util.initPartial(t,this)}static fromBinary(t,r){return new tr().fromBinary(t,r)}static fromJson(t,r){return new tr().fromJson(t,r)}static fromJsonString(t,r){return new tr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(tr,t,r)}};l(tr,"runtime",f),l(tr,"typeName","yorkie.v1.AttachDocumentResponse"),l(tr,"fields",f.util.newFieldList(()=>[{no:1,name:"document_id",kind:"scalar",T:9},{no:3,name:"max_size_per_document",kind:"scalar",T:5},{no:2,name:"change_pack",kind:"message",T:Dr}]));let $c=tr;const nr=class nr extends O{constructor(t){super();l(this,"clientId","");l(this,"documentId","");l(this,"changePack");l(this,"removeIfNotAttached",!1);f.util.initPartial(t,this)}static fromBinary(t,r){return new nr().fromBinary(t,r)}static fromJson(t,r){return new nr().fromJson(t,r)}static fromJsonString(t,r){return new nr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(nr,t,r)}};l(nr,"runtime",f),l(nr,"typeName","yorkie.v1.DetachDocumentRequest"),l(nr,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:Dr},{no:4,name:"remove_if_not_attached",kind:"scalar",T:8}]));let Uc=nr;const rr=class rr extends O{constructor(t){super();l(this,"changePack");f.util.initPartial(t,this)}static fromBinary(t,r){return new rr().fromBinary(t,r)}static fromJson(t,r){return new rr().fromJson(t,r)}static fromJsonString(t,r){return new rr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(rr,t,r)}};l(rr,"runtime",f),l(rr,"typeName","yorkie.v1.DetachDocumentResponse"),l(rr,"fields",f.util.newFieldList(()=>[{no:2,name:"change_pack",kind:"message",T:Dr}]));let jc=rr;const ir=class ir extends O{constructor(t){super();l(this,"clientId","");l(this,"documentId","");f.util.initPartial(t,this)}static fromBinary(t,r){return new ir().fromBinary(t,r)}static fromJson(t,r){return new ir().fromJson(t,r)}static fromJsonString(t,r){return new ir().fromJsonString(t,r)}static equals(t,r){return f.util.equals(ir,t,r)}};l(ir,"runtime",f),l(ir,"typeName","yorkie.v1.WatchDocumentRequest"),l(ir,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9}]));let Vc=ir;const sr=class sr extends O{constructor(t){super();l(this,"body",{case:void 0});f.util.initPartial(t,this)}static fromBinary(t,r){return new sr().fromBinary(t,r)}static fromJson(t,r){return new sr().fromJson(t,r)}static fromJsonString(t,r){return new sr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(sr,t,r)}};l(sr,"runtime",f),l(sr,"typeName","yorkie.v1.WatchDocumentResponse"),l(sr,"fields",f.util.newFieldList(()=>[{no:1,name:"initialization",kind:"message",T:Kc,oneof:"body"},{no:2,name:"event",kind:"message",T:Bc,oneof:"body"}]));let qc=sr;const or=class or extends O{constructor(t){super();l(this,"clientIds",[]);f.util.initPartial(t,this)}static fromBinary(t,r){return new or().fromBinary(t,r)}static fromJson(t,r){return new or().fromJson(t,r)}static fromJsonString(t,r){return new or().fromJsonString(t,r)}static equals(t,r){return f.util.equals(or,t,r)}};l(or,"runtime",f),l(or,"typeName","yorkie.v1.WatchDocumentResponse.Initialization"),l(or,"fields",f.util.newFieldList(()=>[{no:1,name:"client_ids",kind:"scalar",T:9,repeated:!0}]));let Kc=or;const ar=class ar extends O{constructor(t){super();l(this,"clientId","");l(this,"documentId","");l(this,"changePack");f.util.initPartial(t,this)}static fromBinary(t,r){return new ar().fromBinary(t,r)}static fromJson(t,r){return new ar().fromJson(t,r)}static fromJsonString(t,r){return new ar().fromJsonString(t,r)}static equals(t,r){return f.util.equals(ar,t,r)}};l(ar,"runtime",f),l(ar,"typeName","yorkie.v1.RemoveDocumentRequest"),l(ar,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:Dr}]));let Wc=ar;const lr=class lr extends O{constructor(t){super();l(this,"changePack");f.util.initPartial(t,this)}static fromBinary(t,r){return new lr().fromBinary(t,r)}static fromJson(t,r){return new lr().fromJson(t,r)}static fromJsonString(t,r){return new lr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(lr,t,r)}};l(lr,"runtime",f),l(lr,"typeName","yorkie.v1.RemoveDocumentResponse"),l(lr,"fields",f.util.newFieldList(()=>[{no:1,name:"change_pack",kind:"message",T:Dr}]));let _c=lr;const ur=class ur extends O{constructor(t){super();l(this,"clientId","");l(this,"documentId","");l(this,"changePack");l(this,"pushOnly",!1);f.util.initPartial(t,this)}static fromBinary(t,r){return new ur().fromBinary(t,r)}static fromJson(t,r){return new ur().fromJson(t,r)}static fromJsonString(t,r){return new ur().fromJsonString(t,r)}static equals(t,r){return f.util.equals(ur,t,r)}};l(ur,"runtime",f),l(ur,"typeName","yorkie.v1.PushPullChangesRequest"),l(ur,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:Dr},{no:4,name:"push_only",kind:"scalar",T:8}]));let Hc=ur;const cr=class cr extends O{constructor(t){super();l(this,"changePack");f.util.initPartial(t,this)}static fromBinary(t,r){return new cr().fromBinary(t,r)}static fromJson(t,r){return new cr().fromJson(t,r)}static fromJsonString(t,r){return new cr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(cr,t,r)}};l(cr,"runtime",f),l(cr,"typeName","yorkie.v1.PushPullChangesResponse"),l(cr,"fields",f.util.newFieldList(()=>[{no:1,name:"change_pack",kind:"message",T:Dr}]));let Gc=cr;const fr=class fr extends O{constructor(t){super();l(this,"clientId","");l(this,"documentId","");l(this,"topic","");l(this,"payload",new Uint8Array(0));f.util.initPartial(t,this)}static fromBinary(t,r){return new fr().fromBinary(t,r)}static fromJson(t,r){return new fr().fromJson(t,r)}static fromJsonString(t,r){return new fr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(fr,t,r)}};l(fr,"runtime",f),l(fr,"typeName","yorkie.v1.BroadcastRequest"),l(fr,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"topic",kind:"scalar",T:9},{no:4,name:"payload",kind:"scalar",T:12}]));let Yc=fr;const dr=class dr extends O{constructor(e){super(),f.util.initPartial(e,this)}static fromBinary(e,t){return new dr().fromBinary(e,t)}static fromJson(e,t){return new dr().fromJson(e,t)}static fromJsonString(e,t){return new dr().fromJsonString(e,t)}static equals(e,t){return f.util.equals(dr,e,t)}};l(dr,"runtime",f),l(dr,"typeName","yorkie.v1.BroadcastResponse"),l(dr,"fields",f.util.newFieldList(()=>[]));let Qc=dr;const US={typeName:"yorkie.v1.YorkieService",methods:{activateClient:{name:"ActivateClient",I:bc,O:zc,kind:Fe.Unary},deactivateClient:{name:"DeactivateClient",I:Fc,O:Jc,kind:Fe.Unary},attachDocument:{name:"AttachDocument",I:Mc,O:$c,kind:Fe.Unary},detachDocument:{name:"DetachDocument",I:Uc,O:jc,kind:Fe.Unary},removeDocument:{name:"RemoveDocument",I:Wc,O:_c,kind:Fe.Unary},pushPullChanges:{name:"PushPullChanges",I:Hc,O:Gc,kind:Fe.Unary},watchDocument:{name:"WatchDocument",I:Vc,O:qc,kind:Fe.ServerStreaming},broadcast:{name:"Broadcast",I:Yc,O:Qc,kind:Fe.Unary}}},jS=f.makeMessageType("google.rpc.ErrorInfo",()=>[{no:1,name:"reason",kind:"scalar",T:9},{no:2,name:"domain",kind:"scalar",T:9},{no:3,name:"metadata",kind:"map",K:9,V:{kind:"scalar",T:9}}]);f.makeMessageType("google.rpc.RetryInfo",()=>[{no:1,name:"retry_delay",kind:"message",T:yr}]);f.makeMessageType("google.rpc.DebugInfo",()=>[{no:1,name:"stack_entries",kind:"scalar",T:9,repeated:!0},{no:2,name:"detail",kind:"scalar",T:9}]);f.makeMessageType("google.rpc.QuotaFailure",()=>[{no:1,name:"violations",kind:"message",T:VS,repeated:!0}]);const VS=f.makeMessageType("google.rpc.QuotaFailure.Violation",()=>[{no:1,name:"subject",kind:"scalar",T:9},{no:2,name:"description",kind:"scalar",T:9}],{localName:"QuotaFailure_Violation"});f.makeMessageType("google.rpc.PreconditionFailure",()=>[{no:1,name:"violations",kind:"message",T:qS,repeated:!0}]);const qS=f.makeMessageType("google.rpc.PreconditionFailure.Violation",()=>[{no:1,name:"type",kind:"scalar",T:9},{no:2,name:"subject",kind:"scalar",T:9},{no:3,name:"description",kind:"scalar",T:9}],{localName:"PreconditionFailure_Violation"});f.makeMessageType("google.rpc.BadRequest",()=>[{no:1,name:"field_violations",kind:"message",T:KS,repeated:!0}]);const KS=f.makeMessageType("google.rpc.BadRequest.FieldViolation",()=>[{no:1,name:"field",kind:"scalar",T:9},{no:2,name:"description",kind:"scalar",T:9},{no:3,name:"reason",kind:"scalar",T:9},{no:4,name:"localized_message",kind:"message",T:_S}],{localName:"BadRequest_FieldViolation"});f.makeMessageType("google.rpc.RequestInfo",()=>[{no:1,name:"request_id",kind:"scalar",T:9},{no:2,name:"serving_data",kind:"scalar",T:9}]);f.makeMessageType("google.rpc.ResourceInfo",()=>[{no:1,name:"resource_type",kind:"scalar",T:9},{no:2,name:"resource_name",kind:"scalar",T:9},{no:3,name:"owner",kind:"scalar",T:9},{no:4,name:"description",kind:"scalar",T:9}]);f.makeMessageType("google.rpc.Help",()=>[{no:1,name:"links",kind:"message",T:WS,repeated:!0}]);const WS=f.makeMessageType("google.rpc.Help.Link",()=>[{no:1,name:"description",kind:"scalar",T:9},{no:2,name:"url",kind:"scalar",T:9}],{localName:"Help_Link"}),_S=f.makeMessageType("google.rpc.LocalizedMessage",()=>[{no:1,name:"locale",kind:"scalar",T:9},{no:2,name:"message",kind:"scalar",T:9}]);var w=(n=>(n.Ok="ok",n.ErrClientNotActivated="ErrClientNotActivated",n.ErrClientNotFound="ErrClientNotFound",n.ErrUnimplemented="ErrUnimplemented",n.ErrInvalidType="ErrInvalidType",n.ErrDummy="ErrDummy",n.ErrDocumentNotAttached="ErrDocumentNotAttached",n.ErrDocumentNotDetached="ErrDocumentNotDetached",n.ErrDocumentRemoved="ErrDocumentRemoved",n.ErrDocumentSizeExceedsLimit="ErrDocumentSizeExceedsLimit",n.ErrInvalidObjectKey="ErrInvalidObjectKey",n.ErrInvalidArgument="ErrInvalidArgument",n.ErrNotInitialized="ErrNotInitialized",n.ErrNotReady="ErrNotReady",n.ErrRefused="ErrRefused",n.ErrContextNotProvided="ErrContextNotProvided",n.ErrPermissionDenied="ErrPermissionDenied",n.ErrUnauthenticated="ErrUnauthenticated",n.ErrTooManySubscribers="ErrTooManySubscribers",n.ErrTooManyAttachments="ErrTooManyAttachments",n))(w||{});class S extends Error{constructor(t,r){super(r);l(this,"name","YorkieError");l(this,"stack");this.code=t,this.message=r,this.toString=()=>`[code=${this.code}]: ${this.message}`}}var un=(n=>(n.Put="put",n.Clear="clear",n))(un||{});const Kl="000000000000000000000000",on=24;class Et{constructor(e,t,r){l(this,"lamport");l(this,"delimiter");l(this,"actorID");this.lamport=e,this.delimiter=t,this.actorID=r}static of(e,t,r){return new Et(e,t,r)}static fromStruct(e){return Et.of(BigInt(e.lamport),e.delimiter,e.actorID)}toIDString(){return`${this.lamport.toString()}:${this.actorID}:${this.delimiter}`}toStruct(){return{lamport:this.getLamportAsString(),delimiter:this.getDelimiter(),actorID:this.getActorID()}}toTestString(){return`${this.lamport.toString()}:${this.actorID.slice(-2)}:${this.delimiter}`}setActor(e){return new Et(this.lamport,this.delimiter,e)}getLamportAsString(){return this.lamport.toString()}getLamport(){return this.lamport}getDelimiter(){return this.delimiter}getActorID(){return this.actorID}after(e){return this.compare(e)>0}equals(e){return this.compare(e)===0}compare(e){if(this.lamport>e.lamport)return 1;if(e.lamport>this.lamport)return-1;const t=this.actorID.localeCompare(e.actorID);return t!==0?t:this.delimiter>e.delimiter?1:e.delimiter>this.delimiter?-1:0}}const Xc=0n,fy=0,no=9223372036854775807n,ws=new Et(Xc,fy,Kl);function nn(n){return n.replace(/["'\\\n\r\f\b\t\u2028\u2029]/g,function(e){switch(e){case'"':case"\\":return"\\"+e;case`
`:return"\\n";case"\r":return"\\r";case"\f":return"\\f";case"\b":return"\\b";case"	":return"\\t";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:return e}})}class Jo{constructor(e){l(this,"createdAt");l(this,"movedAt");l(this,"removedAt");this.createdAt=e}getCreatedAt(){return this.createdAt}getID(){return this.createdAt}getMovedAt(){return this.movedAt}getRemovedAt(){return this.removedAt}getPositionedAt(){return this.movedAt?this.movedAt:this.createdAt}setMovedAt(e){return!this.movedAt||e&&e.after(this.movedAt)?(this.movedAt=e,!0):!1}setRemovedAt(e){this.removedAt=e}remove(e){return e&&e.after(this.getPositionedAt())&&(!this.removedAt||e.after(this.removedAt))?(this.removedAt=e,!0):!1}isRemoved(){return!!this.removedAt}getMetaUsage(){let e=0;return this.getCreatedAt()&&(e+=on),this.getMovedAt()&&(e+=on),this.getRemovedAt()&&(e+=on),e}}class Zr extends Jo{constructor(e){super(e)}}class rd{constructor(e,t){l(this,"strKey");l(this,"value");this.strKey=e,this.value=t}static of(e,t){return new rd(e,t)}isRemoved(){return this.value.isRemoved()}getStrKey(){return this.strKey}getValue(){return this.value}remove(e){return this.value.remove(e)}}class No{constructor(){l(this,"nodeMapByKey");l(this,"nodeMapByCreatedAt");this.nodeMapByKey=new Map,this.nodeMapByCreatedAt=new Map}static create(){return new No}set(e,t,r){let i;const s=this.nodeMapByKey.get(e);s!=null&&!s.isRemoved()&&s.remove(r)&&(i=s.getValue());const o=rd.of(e,t);return this.nodeMapByCreatedAt.set(t.getCreatedAt().toIDString(),o),(s==null||r.after(s.getValue().getPositionedAt()))&&(this.nodeMapByKey.set(e,o),t.setMovedAt(r)),i}delete(e,t){if(!this.nodeMapByCreatedAt.has(e.toIDString()))throw new S(w.ErrInvalidArgument,`fail to find ${e.toIDString()}`);const r=this.nodeMapByCreatedAt.get(e.toIDString());return r.remove(t),r.getValue()}subPathOf(e){const t=this.nodeMapByCreatedAt.get(e.toIDString());if(t)return t.getStrKey()}purge(e){const t=this.nodeMapByCreatedAt.get(e.getCreatedAt().toIDString());if(!t)throw new S(w.ErrInvalidArgument,`fail to find ${e.getCreatedAt().toIDString()}`);const r=this.nodeMapByKey.get(t.getStrKey());t===r&&this.nodeMapByKey.delete(r.getStrKey()),this.nodeMapByCreatedAt.delete(t.getValue().getCreatedAt().toIDString())}deleteByKey(e,t){const r=this.nodeMapByKey.get(e);if(r!=null&&r.remove(t))return r.getValue()}has(e){const t=this.nodeMapByKey.get(e);return t==null?!1:!t.isRemoved()}getByID(e){return this.nodeMapByCreatedAt.get(e.toIDString())}get(e){const t=this.nodeMapByKey.get(e);if(!(!t||t.isRemoved()))return t}*[Symbol.iterator](){for(const[,e]of this.nodeMapByKey)yield e}}class Ye extends Zr{constructor(t,r){super(t);l(this,"memberNodes");this.memberNodes=r}static create(t,r){if(!r)return new Ye(t,No.create());const i=No.create();for(const[s,o]of Object.entries(r))i.set(s,o.deepcopy(),o.getCreatedAt());return new Ye(t,i)}subPathOf(t){return this.memberNodes.subPathOf(t)}purge(t){this.memberNodes.purge(t)}set(t,r,i){return this.memberNodes.set(t,r,i)}delete(t,r){return this.memberNodes.delete(t,r)}deleteByKey(t,r){return this.memberNodes.deleteByKey(t,r)}get(t){const r=this.memberNodes.get(t);return r==null?void 0:r.getValue()}getByID(t){const r=this.memberNodes.getByID(t);return r==null?void 0:r.getValue()}has(t){return this.memberNodes.has(t)}getDataSize(){return{data:0,meta:this.getMetaUsage()}}toJSON(){const t=[];for(const[r,i]of this)t.push(`"${nn(r)}":${i.toJSON()}`);return`{${t.join(",")}}`}toJS(){return JSON.parse(this.toJSON())}toJSForTest(){const t={};for(const[r,i]of this){const{createdAt:s,value:o,type:a}=i.toJSForTest();t[r]={key:r,createdAt:s,value:o,type:a}}return{createdAt:this.getCreatedAt().toTestString(),value:t,type:"YORKIE_OBJECT"}}getKeys(){const t=Array();for(const[r]of this)t.push(r);return t}toSortedJSON(){var i;const t=Array();for(const[s]of this)t.push(s);const r=[];for(const s of t.sort()){const o=(i=this.memberNodes.get(s))==null?void 0:i.getValue();r.push(`"${nn(s)}":${o.toSortedJSON()}`)}return`{${r.join(",")}}`}getRHT(){return this.memberNodes}deepcopy(){const t=Ye.create(this.getCreatedAt());for(const r of this.memberNodes)t.memberNodes.set(r.getStrKey(),r.getValue().deepcopy(),this.getPositionedAt());return t.remove(this.getRemovedAt()),t}getDescendants(t){for(const r of this.memberNodes){const i=r.getValue();if(t(i,this))return;i instanceof Zr&&i.getDescendants(t)}}*[Symbol.iterator](){const t=new Set;for(const r of this.memberNodes)t.has(r.getStrKey())||(t.add(r.getStrKey()),r.isRemoved()||(yield[r.getStrKey(),r.getValue()]))}}var Q=(n=>(n.Local="local",n.Remote="remote",n.UndoRedo="undoredo",n))(Q||{});class jt{constructor(e,t){l(this,"parentCreatedAt");l(this,"executedAt");this.parentCreatedAt=e,this.executedAt=t}getParentCreatedAt(){return this.parentCreatedAt}getExecutedAt(){if(!this.executedAt)throw new S(w.ErrNotReady,"executedAt is not set yet");return this.executedAt}setActor(e){this.executedAt&&(this.executedAt=this.executedAt.setActor(e))}setExecutedAt(e){this.executedAt=e}}class dy{constructor(e){l(this,"value");l(this,"left");l(this,"right");l(this,"parent");l(this,"weight");this.value=e,this.initWeight()}getNodeString(){return`${this.weight}${this.value}`}getValue(){return this.value}getLeftWeight(){return this.hasLeft()?this.left.getWeight():0}getRightWeight(){return this.hasRight()?this.right.getWeight():0}getWeight(){return this.weight}getLeft(){return this.left}getRight(){return this.right}getParent(){return this.parent}hasLeft(){return!!this.left}hasRight(){return!!this.right}hasParent(){return!!this.parent}setLeft(e){this.left=e}setRight(e){this.right=e}setParent(e){this.parent=e}unlink(){this.parent=void 0,this.right=void 0,this.left=void 0}hasLinks(){return this.hasParent()||this.hasLeft()||this.hasRight()}increaseWeight(e){this.weight+=e}initWeight(){this.weight=this.getLength()}}class Po{constructor(e){l(this,"root");this.root=e}get length(){return this.root?this.root.getWeight():0}find(e){if(!this.root||e<0)return[void 0,0];let t=this.root;for(;;)if(t.hasLeft()&&e<=t.getLeftWeight())t=t.getLeft();else if(t.hasRight()&&t.getLeftWeight()+t.getLength()<e)e-=t.getLeftWeight()+t.getLength(),t=t.getRight();else{e-=t.getLeftWeight();break}if(e>t.getLength())throw new S(w.ErrInvalidArgument,`out of index range: pos: ${e} > node.length: ${t.getLength()}`);return this.splayNode(t),[t,e]}indexOf(e){return!e||e!==this.root&&!e.hasLinks()?-1:(this.splayNode(e),this.root.getLeftWeight())}getRoot(){return this.root}insert(e){return this.insertAfter(this.root,e)}insertAfter(e,t){return e?(this.splayNode(e),this.root=t,t.setRight(e.getRight()),e.hasRight()&&e.getRight().setParent(t),t.setLeft(e),e.setParent(t),e.setRight(),this.updateWeight(e),this.updateWeight(t),t):(this.root=t,t)}updateWeight(e){e.initWeight(),e.hasLeft()&&e.increaseWeight(e.getLeftWeight()),e.hasRight()&&e.increaseWeight(e.getRightWeight())}updateTreeWeight(e){for(;e;)this.updateWeight(e),e=e.getParent()}splayNode(e){if(e)for(;;)if(this.isLeftChild(e.getParent())&&this.isRightChild(e))this.rotateLeft(e),this.rotateRight(e);else if(this.isRightChild(e.getParent())&&this.isLeftChild(e))this.rotateRight(e),this.rotateLeft(e);else if(this.isLeftChild(e.getParent())&&this.isLeftChild(e))this.rotateRight(e.getParent()),this.rotateRight(e);else if(this.isRightChild(e.getParent())&&this.isRightChild(e))this.rotateLeft(e.getParent()),this.rotateLeft(e);else{this.isLeftChild(e)?this.rotateRight(e):this.isRightChild(e)&&this.rotateLeft(e),this.updateWeight(e);return}}delete(e){this.splayNode(e);const t=new Po(e.getLeft());t.root&&t.root.setParent();const r=new Po(e.getRight());if(r.root&&r.root.setParent(),t.root){const i=t.getRightmost();t.splayNode(i),t.root.setRight(r.root),r.root&&r.root.setParent(t.root),this.root=t.root}else this.root=r.root;e.unlink(),this.root&&this.updateWeight(this.root)}deleteRange(e,t){if(!t){this.splayNode(e),this.cutOffRight(e);return}this.splayNode(e),this.splayNode(t),t.getLeft()!=e&&this.rotateRight(e),this.cutOffRight(e)}cutOffRight(e){const t=[];this.traversePostorder(e.getRight(),t);for(const r of t)r.initWeight();this.updateTreeWeight(e)}toTestString(){const e=[];return this.traverseInorder(this.root,e),e.map(t=>`[${t.getWeight()},${t.getLength()}]${t.getValue()||""}`).join("")}checkWeight(){const e=[];this.traverseInorder(this.root,e);for(const t of e)if(t.getWeight()!=t.getLength()+t.getLeftWeight()+t.getRightWeight())return!1;return!0}getRightmost(){let e=this.root;for(;e.hasRight();)e=e.getRight();return e}traverseInorder(e,t){e&&(this.traverseInorder(e.getLeft(),t),t.push(e),this.traverseInorder(e.getRight(),t))}traversePostorder(e,t){e&&(this.traversePostorder(e.getLeft(),t),this.traversePostorder(e.getRight(),t),t.push(e))}rotateLeft(e){const t=e.getParent();t.hasParent()?t===t.getParent().getLeft()?t.getParent().setLeft(e):t.getParent().setRight(e):this.root=e,e.setParent(t.getParent()),t.setRight(e.getLeft()),t.hasRight()&&t.getRight().setParent(t),e.setLeft(t),e.getLeft().setParent(e),this.updateWeight(t),this.updateWeight(e)}rotateRight(e){const t=e.getParent();t.hasParent()?t===t.getParent().getLeft()?t.getParent().setLeft(e):t.getParent().setRight(e):this.root=e,e.setParent(t.getParent()),t.setLeft(e.getRight()),t.hasLeft()&&t.getLeft().setParent(t),e.setRight(t),e.getRight().setParent(e),this.updateWeight(t),this.updateWeight(e)}isLeftChild(e){return e&&e.hasParent()?e.getParent().getLeft()===e:!1}isRightChild(e){return e&&e.hasParent()?e.getParent().getRight()===e:!1}}/**
 * @license
 * Copyright 2009 The Closure Library Authors
 * Copyright 2020 Daniel Wirtz / The long.js Authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * SPDX-License-Identifier: Apache-2.0
 */var kt=null;try{kt=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function K(n,e,t){this.low=n|0,this.high=e|0,this.unsigned=!!t}K.prototype.__isLong__;Object.defineProperty(K.prototype,"__isLong__",{value:!0});function Be(n){return(n&&n.__isLong__)===!0}function cg(n){var e=Math.clz32(n&-n);return n?31-e:e}K.isLong=Be;var fg={},dg={};function Bi(n,e){var t,r,i;return e?(n>>>=0,(i=0<=n&&n<256)&&(r=dg[n],r)?r:(t=H(n,0,!0),i&&(dg[n]=t),t)):(n|=0,(i=-128<=n&&n<128)&&(r=fg[n],r)?r:(t=H(n,n<0?-1:0,!1),i&&(fg[n]=t),t))}K.fromInt=Bi;function Tt(n,e){if(isNaN(n))return e?wr:zt;if(e){if(n<0)return wr;if(n>=hy)return py}else{if(n<=-9223372036854776e3)return We;if(n+1>=GS)return my}return n<0?Tt(-n,e).neg():H(n%Ss|0,n/Ss|0,e)}K.fromNumber=Tt;function H(n,e,t){return new K(n,e,t)}K.fromBits=H;var Tl=Math.pow;function id(n,e,t){if(n.length===0)throw Error("empty string");if(typeof e=="number"?(t=e,e=!1):e=!!e,n==="NaN"||n==="Infinity"||n==="+Infinity"||n==="-Infinity")return e?wr:zt;if(t=t||10,t<2||36<t)throw RangeError("radix");var r;if((r=n.indexOf("-"))>0)throw Error("interior hyphen");if(r===0)return id(n.substring(1),e,t).neg();for(var i=Tt(Tl(t,8)),s=zt,o=0;o<n.length;o+=8){var a=Math.min(8,n.length-o),u=parseInt(n.substring(o,o+a),t);if(a<8){var c=Tt(Tl(t,a));s=s.mul(c).add(Tt(u))}else s=s.mul(i),s=s.add(Tt(u))}return s.unsigned=e,s}K.fromString=id;function Ct(n,e){return typeof n=="number"?Tt(n,e):typeof n=="string"?id(n,e):H(n.low,n.high,typeof e=="boolean"?e:n.unsigned)}K.fromValue=Ct;var hg=65536,HS=1<<24,Ss=hg*hg,hy=Ss*Ss,GS=hy/2,gg=Bi(HS),zt=Bi(0);K.ZERO=zt;var wr=Bi(0,!0);K.UZERO=wr;var Qi=Bi(1);K.ONE=Qi;var gy=Bi(1,!0);K.UONE=gy;var Zc=Bi(-1);K.NEG_ONE=Zc;var my=H(-1,2147483647,!1);K.MAX_VALUE=my;var py=H(-1,-1,!0);K.MAX_UNSIGNED_VALUE=py;var We=H(0,-2147483648,!1);K.MIN_VALUE=We;var A=K.prototype;A.toInt=function(){return this.unsigned?this.low>>>0:this.low};A.toNumber=function(){return this.unsigned?(this.high>>>0)*Ss+(this.low>>>0):this.high*Ss+(this.low>>>0)};A.toString=function(e){if(e=e||10,e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(We)){var t=Tt(e),r=this.div(t),i=r.mul(t).sub(this);return r.toString(e)+i.toInt().toString(e)}else return"-"+this.neg().toString(e);for(var s=Tt(Tl(e,6),this.unsigned),o=this,a="";;){var u=o.div(s),c=o.sub(u.mul(s)).toInt()>>>0,d=c.toString(e);if(o=u,o.isZero())return d+a;for(;d.length<6;)d="0"+d;a=""+d+a}};A.getHighBits=function(){return this.high};A.getHighBitsUnsigned=function(){return this.high>>>0};A.getLowBits=function(){return this.low};A.getLowBitsUnsigned=function(){return this.low>>>0};A.getNumBitsAbs=function(){if(this.isNegative())return this.eq(We)?64:this.neg().getNumBitsAbs();for(var e=this.high!=0?this.high:this.low,t=31;t>0&&!(e&1<<t);t--);return this.high!=0?t+33:t+1};A.isSafeInteger=function(){var e=this.high>>21;return e?this.unsigned?!1:e===-1&&!(this.low===0&&this.high===-2097152):!0};A.isZero=function(){return this.high===0&&this.low===0};A.eqz=A.isZero;A.isNegative=function(){return!this.unsigned&&this.high<0};A.isPositive=function(){return this.unsigned||this.high>=0};A.isOdd=function(){return(this.low&1)===1};A.isEven=function(){return(this.low&1)===0};A.equals=function(e){return Be(e)||(e=Ct(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low};A.eq=A.equals;A.notEquals=function(e){return!this.eq(e)};A.neq=A.notEquals;A.ne=A.notEquals;A.lessThan=function(e){return this.comp(e)<0};A.lt=A.lessThan;A.lessThanOrEqual=function(e){return this.comp(e)<=0};A.lte=A.lessThanOrEqual;A.le=A.lessThanOrEqual;A.greaterThan=function(e){return this.comp(e)>0};A.gt=A.greaterThan;A.greaterThanOrEqual=function(e){return this.comp(e)>=0};A.gte=A.greaterThanOrEqual;A.ge=A.greaterThanOrEqual;A.compare=function(e){if(Be(e)||(e=Ct(e)),this.eq(e))return 0;var t=this.isNegative(),r=e.isNegative();return t&&!r?-1:!t&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1};A.comp=A.compare;A.negate=function(){return!this.unsigned&&this.eq(We)?We:this.not().add(Qi)};A.neg=A.negate;A.add=function(e){Be(e)||(e=Ct(e));var t=this.high>>>16,r=this.high&65535,i=this.low>>>16,s=this.low&65535,o=e.high>>>16,a=e.high&65535,u=e.low>>>16,c=e.low&65535,d=0,h=0,g=0,p=0;return p+=s+c,g+=p>>>16,p&=65535,g+=i+u,h+=g>>>16,g&=65535,h+=r+a,d+=h>>>16,h&=65535,d+=t+o,d&=65535,H(g<<16|p,d<<16|h,this.unsigned)};A.subtract=function(e){return Be(e)||(e=Ct(e)),this.add(e.neg())};A.sub=A.subtract;A.multiply=function(e){if(this.isZero())return this;if(Be(e)||(e=Ct(e)),kt){var t=kt.mul(this.low,this.high,e.low,e.high);return H(t,kt.get_high(),this.unsigned)}if(e.isZero())return this.unsigned?wr:zt;if(this.eq(We))return e.isOdd()?We:zt;if(e.eq(We))return this.isOdd()?We:zt;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(gg)&&e.lt(gg))return Tt(this.toNumber()*e.toNumber(),this.unsigned);var r=this.high>>>16,i=this.high&65535,s=this.low>>>16,o=this.low&65535,a=e.high>>>16,u=e.high&65535,c=e.low>>>16,d=e.low&65535,h=0,g=0,p=0,k=0;return k+=o*d,p+=k>>>16,k&=65535,p+=s*d,g+=p>>>16,p&=65535,p+=o*c,g+=p>>>16,p&=65535,g+=i*d,h+=g>>>16,g&=65535,g+=s*c,h+=g>>>16,g&=65535,g+=o*u,h+=g>>>16,g&=65535,h+=r*d+i*c+s*u+o*a,h&=65535,H(p<<16|k,h<<16|g,this.unsigned)};A.mul=A.multiply;A.divide=function(e){if(Be(e)||(e=Ct(e)),e.isZero())throw Error("division by zero");if(kt){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;var t=(this.unsigned?kt.div_u:kt.div_s)(this.low,this.high,e.low,e.high);return H(t,kt.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?wr:zt;var r,i,s;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return wr;if(e.gt(this.shru(1)))return gy;s=wr}else{if(this.eq(We)){if(e.eq(Qi)||e.eq(Zc))return We;if(e.eq(We))return Qi;var o=this.shr(1);return r=o.div(e).shl(1),r.eq(zt)?e.isNegative()?Qi:Zc:(i=this.sub(e.mul(r)),s=r.add(i.div(e)),s)}else if(e.eq(We))return this.unsigned?wr:zt;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();s=zt}for(i=this;i.gte(e);){r=Math.max(1,Math.floor(i.toNumber()/e.toNumber()));for(var a=Math.ceil(Math.log(r)/Math.LN2),u=a<=48?1:Tl(2,a-48),c=Tt(r),d=c.mul(e);d.isNegative()||d.gt(i);)r-=u,c=Tt(r,this.unsigned),d=c.mul(e);c.isZero()&&(c=Qi),s=s.add(c),i=i.sub(d)}return s};A.div=A.divide;A.modulo=function(e){if(Be(e)||(e=Ct(e)),kt){var t=(this.unsigned?kt.rem_u:kt.rem_s)(this.low,this.high,e.low,e.high);return H(t,kt.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))};A.mod=A.modulo;A.rem=A.modulo;A.not=function(){return H(~this.low,~this.high,this.unsigned)};A.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32};A.clz=A.countLeadingZeros;A.countTrailingZeros=function(){return this.low?cg(this.low):cg(this.high)+32};A.ctz=A.countTrailingZeros;A.and=function(e){return Be(e)||(e=Ct(e)),H(this.low&e.low,this.high&e.high,this.unsigned)};A.or=function(e){return Be(e)||(e=Ct(e)),H(this.low|e.low,this.high|e.high,this.unsigned)};A.xor=function(e){return Be(e)||(e=Ct(e)),H(this.low^e.low,this.high^e.high,this.unsigned)};A.shiftLeft=function(e){return Be(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?H(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):H(0,this.low<<e-32,this.unsigned)};A.shl=A.shiftLeft;A.shiftRight=function(e){return Be(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?H(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):H(this.high>>e-32,this.high>=0?0:-1,this.unsigned)};A.shr=A.shiftRight;A.shiftRightUnsigned=function(e){return Be(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?H(this.low>>>e|this.high<<32-e,this.high>>>e,this.unsigned):e===32?H(this.high,0,this.unsigned):H(this.high>>>e-32,0,this.unsigned)};A.shru=A.shiftRightUnsigned;A.shr_u=A.shiftRightUnsigned;A.rotateLeft=function(e){var t;return Be(e)&&(e=e.toInt()),(e&=63)===0?this:e===32?H(this.high,this.low,this.unsigned):e<32?(t=32-e,H(this.low<<e|this.high>>>t,this.high<<e|this.low>>>t,this.unsigned)):(e-=32,t=32-e,H(this.high<<e|this.low>>>t,this.low<<e|this.high>>>t,this.unsigned))};A.rotl=A.rotateLeft;A.rotateRight=function(e){var t;return Be(e)&&(e=e.toInt()),(e&=63)===0?this:e===32?H(this.high,this.low,this.unsigned):e<32?(t=32-e,H(this.high<<t|this.low>>>e,this.low<<t|this.high>>>e,this.unsigned)):(e-=32,t=32-e,H(this.low<<t|this.high>>>e,this.high<<t|this.low>>>e,this.unsigned))};A.rotr=A.rotateRight;A.toSigned=function(){return this.unsigned?H(this.low,this.high,!1):this};A.toUnsigned=function(){return this.unsigned?this:H(this.low,this.high,!0)};A.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()};A.toBytesLE=function(){var e=this.high,t=this.low;return[t&255,t>>>8&255,t>>>16&255,t>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]};A.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,t>>>24,t>>>16&255,t>>>8&255,t&255]};K.fromBytes=function(e,t,r){return r?K.fromBytesLE(e,t):K.fromBytesBE(e,t)};K.fromBytesLE=function(e,t){return new K(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)};K.fromBytesBE=function(e,t){return new K(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)};typeof BigInt=="function"&&(K.fromBigInt=function(e,t){var r=Number(BigInt.asIntN(32,e)),i=Number(BigInt.asIntN(32,e>>BigInt(32)));return H(r,i,t)},K.fromValue=function(e,t){return typeof e=="bigint"?fromBigInt(e,t):Ct(e,t)},A.toBigInt=function(){var e=BigInt(this.low>>>0),t=BigInt(this.unsigned?this.high>>>0:this.high);return t<<BigInt(32)|e});var ve=(n=>(n[n.Null=0]="Null",n[n.Boolean=1]="Boolean",n[n.Integer=2]="Integer",n[n.Long=3]="Long",n[n.Double=4]="Double",n[n.String=5]="String",n[n.Bytes=6]="Bytes",n[n.Date=7]="Date",n))(ve||{});class ce extends Jo{constructor(t,r){super(r);l(this,"valueType");l(this,"value");this.valueType=ce.getPrimitiveType(t),this.value=t===void 0?null:t}static of(t,r){return new ce(t,r)}static valueFromBytes(t,r){switch(t){case 0:return null;case 1:return!!r[0];case 2:return r[0]|r[1]<<8|r[2]<<16|r[3]<<24;case 4:{const i=new DataView(r.buffer);return r.forEach(function(s,o){i.setUint8(o,s)}),i.getFloat64(0,!0)}case 5:return new TextDecoder("utf-8").decode(r);case 3:return K.fromBytesLE(Array.from(r));case 6:return r;case 7:return new Date(K.fromBytesLE(Array.from(r),!0).toNumber());default:throw new S(w.ErrUnimplemented,`unimplemented type: ${t}`)}}getValueSize(){switch(this.valueType){case 0:return 8;case 1:return 4;case 2:return 4;case 3:return 8;case 4:return 8;case 5:return this.value.length*2;case 6:return this.value.length;case 7:return 8;default:throw new S(w.ErrUnimplemented,`unimplemented type: ${this.valueType}`)}}getDataSize(){return{data:this.getValueSize(),meta:this.getMetaUsage()}}toJSON(){return this.valueType===5?`"${nn(this.value)}"`:`${this.value}`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:this.value,type:"YORKIE_PRIMITIVE"}}deepcopy(){const t=ce.of(this.value,this.getCreatedAt());return t.setMovedAt(this.getMovedAt()),t.setRemovedAt(this.getRemovedAt()),t}getType(){return this.valueType}static getPrimitiveType(t){switch(typeof t){case"undefined":return 0;case"boolean":return 1;case"number":return this.isInteger(t)?2:4;case"string":return 5;case"object":if(t===null)return 0;if(t instanceof K)return 3;if(t instanceof Uint8Array)return 6;if(t instanceof Date)return 7}}static isSupport(t){return ce.getPrimitiveType(t)!==void 0}static isInteger(t){return t%1===0}isNumericType(){const t=this.valueType;return t===2||t===3||t===4}getValue(){return this.value}toBytes(){switch(this.valueType){case 0:return new Uint8Array;case 1:return this.value?new Uint8Array([1]):new Uint8Array([0]);case 2:{const t=this.value;return new Uint8Array([t&255,t>>8&255,t>>16&255,t>>24&255])}case 4:{const t=this.value,r=new Uint8Array(8);return new DataView(r.buffer).setFloat64(0,t,!0),r}case 5:return new TextEncoder().encode(this.value);case 3:{const r=this.value.toBytesLE();return Uint8Array.from(r)}case 6:return this.value;case 7:{const t=this.value,r=K.fromNumber(t.getTime(),!0).toBytesLE();return Uint8Array.from(r)}default:throw new S(w.ErrUnimplemented,`unimplemented type: ${this.valueType}`)}}}class Il extends dy{constructor(t){super(t);l(this,"prev");l(this,"next");this.value=t}static createAfter(t,r){const i=new Il(r),s=t.next;return t.next=i,i.prev=t,i.next=s,s&&(s.prev=i),i}remove(t){return this.value.remove(t)}getCreatedAt(){return this.value.getCreatedAt()}getPositionedAt(){return this.value.getPositionedAt()}release(){this.prev&&(this.prev.next=this.next),this.next&&(this.next.prev=this.prev),this.prev=void 0,this.next=void 0}getLength(){return this.value.isRemoved()?0:1}getPrev(){return this.prev}getNext(){return this.next}getValue(){return this.value}isRemoved(){return this.value.isRemoved()}}class Co{constructor(){l(this,"dummyHead");l(this,"last");l(this,"nodeMapByIndex");l(this,"nodeMapByCreatedAt");const e=ce.of(0,ws);e.setRemovedAt(ws),this.dummyHead=new Il(e),this.last=this.dummyHead,this.nodeMapByIndex=new Po,this.nodeMapByCreatedAt=new Map,this.nodeMapByIndex.insert(this.dummyHead),this.nodeMapByCreatedAt.set(this.dummyHead.getCreatedAt().toIDString(),this.dummyHead)}static create(){return new Co}get length(){return this.nodeMapByIndex.length}findNextBeforeExecutedAt(e,t){let r=this.nodeMapByCreatedAt.get(e.toIDString());if(!r)throw new S(w.ErrInvalidArgument,`cant find the given node: ${e.toIDString()}`);for(;r.getNext()&&r.getNext().getPositionedAt().after(t);)r=r.getNext();return r}release(e){this.last===e&&(this.last=e.getPrev()),e.release(),this.nodeMapByIndex.delete(e),this.nodeMapByCreatedAt.delete(e.getValue().getCreatedAt().toIDString())}insertAfter(e,t,r=t.getCreatedAt()){const i=this.findNextBeforeExecutedAt(e,r),s=Il.createAfter(i,t);i===this.last&&(this.last=s),this.nodeMapByIndex.insertAfter(i,s),this.nodeMapByCreatedAt.set(s.getCreatedAt().toIDString(),s)}moveAfter(e,t,r){const i=this.nodeMapByCreatedAt.get(e.toIDString());if(!i)throw new S(w.ErrInvalidArgument,`cant find the given node: ${e.toIDString()}`);const s=this.nodeMapByCreatedAt.get(t.toIDString());if(!s)throw new S(w.ErrInvalidArgument,`cant find the given node: ${t.toIDString()}`);i!==s&&(!s.getValue().getMovedAt()||r.after(s.getValue().getMovedAt()))&&(this.release(s),this.insertAfter(i.getCreatedAt(),s.getValue(),r),s.getValue().setMovedAt(r))}insert(e){this.insertAfter(this.last.getCreatedAt(),e)}getByID(e){return this.nodeMapByCreatedAt.get(e.toIDString())}subPathOf(e){const t=this.nodeMapByCreatedAt.get(e.toIDString());if(t)return String(this.nodeMapByIndex.indexOf(t))}purge(e){const t=this.nodeMapByCreatedAt.get(e.getCreatedAt().toIDString());if(!t)throw new S(w.ErrInvalidArgument,`fail to find the given createdAt: ${e.getCreatedAt().toIDString()}`);this.release(t)}getByIndex(e){if(e>=this.length)return;const[t,r]=this.nodeMapByIndex.find(e);let i=t;if(e===0&&t===this.dummyHead||r>0)do i&&(i=i.getNext());while(i&&i.isRemoved());return i}getPrevCreatedAt(e){let t=this.nodeMapByCreatedAt.get(e.toIDString());do t=t.getPrev();while(this.dummyHead!==t&&t.isRemoved());return t.getValue().getCreatedAt()}delete(e,t){const r=this.nodeMapByCreatedAt.get(e.toIDString()),i=r.isRemoved();return r.remove(t)&&!i&&this.nodeMapByIndex.splayNode(r),r.getValue()}deleteByIndex(e,t){const r=this.getByIndex(e);if(r)return r.remove(t)&&this.nodeMapByIndex.splayNode(r),r.getValue()}getHead(){return this.dummyHead.getValue()}getLast(){return this.last.getValue()}getLastCreatedAt(){return this.last.getCreatedAt()}toTestString(){const e=[];for(const t of this){const r=`${t.getCreatedAt().toIDString()}:${t.getValue().toJSON()}`;t.isRemoved()?e.push(`{${r}}`):e.push(`[${r}]`)}return e.join("")}*[Symbol.iterator](){let e=this.dummyHead.getNext();for(;e;)yield e,e=e.getNext()}}class rt extends Zr{constructor(t,r){super(t);l(this,"elements");this.elements=r}static create(t,r){if(!r)return new rt(t,Co.create());const i=Co.create();for(const s of r)i.insertAfter(i.getLastCreatedAt(),s.deepcopy());return new rt(t,i)}subPathOf(t){return this.elements.subPathOf(t)}purge(t){this.elements.purge(t)}insertAfter(t,r){this.elements.insertAfter(t,r)}moveAfter(t,r,i){this.elements.moveAfter(t,r,i)}get(t){const r=this.elements.getByIndex(t);return r==null?void 0:r.getValue()}getByID(t){const r=this.elements.getByID(t);return r==null?void 0:r.getValue()}getHead(){return this.elements.getHead()}getLast(){return this.elements.getLast()}getPrevCreatedAt(t){return this.elements.getPrevCreatedAt(t)}delete(t,r){return this.elements.delete(t,r)}deleteByIndex(t,r){return this.elements.deleteByIndex(t,r)}getLastCreatedAt(){return this.elements.getLastCreatedAt()}get length(){return this.elements.length}*[Symbol.iterator](){for(const t of this.elements)t.isRemoved()||(yield t.getValue())}toTestString(){return this.elements.toTestString()}getDescendants(t){for(const r of this.elements){const i=r.getValue();if(t(i,this))return;i instanceof Zr&&i.getDescendants(t)}}getDataSize(){return{data:0,meta:this.getMetaUsage()}}toJSON(){const t=[];for(const r of this)t.push(r.toJSON());return`[${t.join(",")}]`}toJS(){return JSON.parse(this.toJSON())}toJSForTest(){const t={};for(let r=0;r<this.length;r++){const{createdAt:i,value:s,type:o}=this.get(r).toJSForTest();t[r]={key:String(r),createdAt:i,value:s,type:o}}return{createdAt:this.getCreatedAt().toTestString(),value:t,type:"YORKIE_ARRAY"}}toSortedJSON(){return this.toJSON()}getElements(){return this.elements}deepcopy(){const t=rt.create(this.getCreatedAt());for(const r of this.elements)t.elements.insertAfter(t.getLastCreatedAt(),r.getValue().deepcopy());return t.remove(this.getRemovedAt()),t}}class ii extends jt{constructor(t,r,i){super(t,i);l(this,"createdAt");this.createdAt=r}static create(t,r,i){return new ii(t,r,i)}execute(t,r){var c;const i=t.findByCreatedAt(this.getParentCreatedAt());if(!i)throw new S(w.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(i instanceof Zr))throw new S(w.ErrInvalidArgument,`only object and array can execute remove: ${i}`);if(r===Q.UndoRedo){let d=i.getByID(this.createdAt);for(;d;){if(d.getRemovedAt())return;d=(c=t.findElementPairByCreatedAt(d.getCreatedAt()))==null?void 0:c.parent}}const s=i.subPathOf(this.createdAt),o=this.toReverseOperation(i),a=i.delete(this.createdAt,this.getExecutedAt());return t.registerRemovedElement(a),{opInfos:i instanceof rt?[{type:"remove",path:t.createPath(this.getParentCreatedAt()),index:Number(s)}]:[{type:"remove",path:t.createPath(this.getParentCreatedAt()),key:s}],reverseOp:o}}toReverseOperation(t){if(t instanceof Ye){const r=t.subPathOf(this.createdAt);if(r!==void 0){const i=t.get(r);if(i!==void 0)return Oi.create(r,i.deepcopy(),this.getParentCreatedAt())}}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.REMOVE.${this.createdAt.toTestString()}`}getCreatedAt(){return this.createdAt}}class Oi extends jt{constructor(t,r,i,s){super(i,s);l(this,"key");l(this,"value");this.key=t,this.value=r}static create(t,r,i,s){return new Oi(t,r,i,s)}execute(t,r){var c;const i=t.findByCreatedAt(this.getParentCreatedAt());if(!i)throw new S(w.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(i instanceof Ye))throw new S(w.ErrInvalidArgument,"fail to execute, only object can execute set");if(r===Q.UndoRedo){let d=i;for(;d;){if(d.getRemovedAt())return;d=(c=t.findElementPairByCreatedAt(d.getCreatedAt()))==null?void 0:c.parent}}const s=i.get(this.key),o=this.toReverseOperation(s),a=this.value.deepcopy(),u=i.set(this.key,a,this.getExecutedAt());return r===Q.UndoRedo&&t.findByCreatedAt(a.getCreatedAt())&&t.deregisterElement(a),t.registerElement(a,i),u&&t.registerRemovedElement(u),{opInfos:[{type:"set",path:t.createPath(this.getParentCreatedAt()),key:this.key}],reverseOp:o}}toReverseOperation(t){let r=ii.create(this.getParentCreatedAt(),this.value.getCreatedAt());return t!==void 0&&!t.isRemoved()&&(r=Oi.create(this.key,t.deepcopy(),this.getParentCreatedAt())),r}getEffectedCreatedAt(){return this.value.getCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.SET.${this.key}=${this.value.toSortedJSON()}`}getKey(){return this.key}getValue(){return this.value}}class Mo extends jt{constructor(t,r,i,s){super(t,s);l(this,"prevCreatedAt");l(this,"value");this.prevCreatedAt=r,this.value=i}static create(t,r,i,s){return new Mo(t,r,i,s)}execute(t){const r=t.findByCreatedAt(this.getParentCreatedAt());if(!r)throw new S(w.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(r instanceof rt))throw new S(w.ErrInvalidArgument,"fail to execute, only array can execute add");const i=r,s=this.value.deepcopy();return i.insertAfter(this.prevCreatedAt,s),t.registerElement(s,i),{opInfos:[{type:"add",path:t.createPath(this.getParentCreatedAt()),index:Number(i.subPathOf(this.getEffectedCreatedAt()))}]}}getEffectedCreatedAt(){return this.value.getCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.ADD.${this.value.toJSON()}`}getPrevCreatedAt(){return this.prevCreatedAt}getValue(){return this.value}}class jr extends jt{constructor(t,r,i,s){super(t,s);l(this,"prevCreatedAt");l(this,"createdAt");this.prevCreatedAt=r,this.createdAt=i}static create(t,r,i,s){return new jr(t,r,i,s)}execute(t){const r=t.findByCreatedAt(this.getParentCreatedAt());if(!r)throw new S(w.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(r instanceof rt))throw new S(w.ErrInvalidArgument,"fail to execute, only array can execute move");const i=r,s=Number(i.subPathOf(this.createdAt));i.moveAfter(this.prevCreatedAt,this.createdAt,this.getExecutedAt());const o=Number(i.subPathOf(this.createdAt));return{opInfos:[{type:"move",path:t.createPath(this.getParentCreatedAt()),index:o,previousIndex:s}]}}getEffectedCreatedAt(){return this.createdAt}toTestString(){return`${this.getParentCreatedAt().toTestString()}.MOVE`}getPrevCreatedAt(){return this.prevCreatedAt}getCreatedAt(){return this.createdAt}}class Vr{constructor(e,t,r,i){l(this,"key");l(this,"value");l(this,"updatedAt");l(this,"_isRemoved");this.key=e,this.value=t,this.updatedAt=r,this._isRemoved=i}static of(e,t,r,i){return new Vr(e,t,r,i)}getKey(){return this.key}getValue(){return this.value}getUpdatedAt(){return this.updatedAt}isRemoved(){return this._isRemoved}toIDString(){return`${this.updatedAt.toIDString()}:${this.key}`}getRemovedAt(){if(this._isRemoved)return this.updatedAt}getDataSize(){return{data:(this.key.length+this.value.length)*2,meta:on}}}class Pr{constructor(){l(this,"nodeMapByKey");l(this,"numberOfRemovedElement");this.nodeMapByKey=new Map,this.numberOfRemovedElement=0}static create(){return new Pr}getNodeMapByKey(){return this.nodeMapByKey}set(e,t,r){const i=this.nodeMapByKey.get(e);if(i&&i.isRemoved()&&r.after(i.getUpdatedAt())&&(this.numberOfRemovedElement-=1),i===void 0||r.after(i.getUpdatedAt())){const s=Vr.of(e,t,r,!1);return this.nodeMapByKey.set(e,s),i!==void 0&&i.isRemoved()?[i,s]:[void 0,s]}return i.isRemoved()?[i,void 0]:[void 0,void 0]}setInternal(e,t,r,i){const s=Vr.of(e,t,r,i);this.nodeMapByKey.set(e,s),i&&this.numberOfRemovedElement++}remove(e,t){const r=this.nodeMapByKey.get(e),i=[];if(r===void 0||t.after(r.getUpdatedAt())){if(r===void 0){this.numberOfRemovedElement+=1;const a=Vr.of(e,"",t,!0);return this.nodeMapByKey.set(e,a),i.push(a),i}const s=r.isRemoved();s||(this.numberOfRemovedElement+=1),s&&i.push(r);const o=Vr.of(e,r.getValue(),t,!0);return this.nodeMapByKey.set(e,o),i.push(o),i}return i}has(e){if(this.nodeMapByKey.has(e)){const t=this.nodeMapByKey.get(e);return t!==void 0&&!t.isRemoved()}return!1}get(e){if(this.nodeMapByKey.has(e))return this.nodeMapByKey.get(e).getValue()}deepcopy(){const e=new Pr;for(const[,t]of this.nodeMapByKey)e.setInternal(t.getKey(),t.getValue(),t.getUpdatedAt(),t.isRemoved());return e}toJSON(){if(!this.size())return"{}";const e=[];for(const[t,r]of this.nodeMapByKey)r.isRemoved()||e.push(`"${nn(t)}":"${nn(r.getValue())}"`);return`{${e.join(",")}}`}size(){return this.nodeMapByKey.size-this.numberOfRemovedElement}toObject(){const e={};for(const[t,r]of this.nodeMapByKey)r.isRemoved()||(e[t]=r.getValue());return e}*[Symbol.iterator](){for(const[,e]of this.nodeMapByKey)yield e}purge(e){const t=this.nodeMapByKey.get(e.getKey());t==null||t.toIDString()!=e.toIDString()||(this.nodeMapByKey.delete(e.getKey()),this.numberOfRemovedElement--)}}function Rt(n){if(n instanceof Map){const e=Array.from(n);return new Map(JSON.parse(JSON.stringify(e)))}return JSON.parse(JSON.stringify(n))}const yy=n=>n?Object.entries(n).length===0:!0,ks=n=>{const e={};for(const[t,r]of Object.entries(n))e[t]=JSON.stringify(r);return e},kr=n=>{const e={};for(const[t,r]of Object.entries(n))e[t]=JSON.parse(r);return e};function YS(n){return n?mg(n.live)+mg(n.gc):0}function mg(n){return n.data+n.meta}function Re(n,...e){for(const t of e)n.data+=t.data,n.meta+=t.meta}function ss(n,e){n.data-=e.data,n.meta-=e.meta}class Do{constructor(e){l(this,"attributes");l(this,"content");this.attributes=Pr.create(),this.content=e}static create(e){return new Do(e)}get length(){return this.content.length}substring(e,t){const r=new Do(this.content.substring(e,t));return r.attributes=this.attributes.deepcopy(),r}setAttr(e,t,r){return this.attributes.set(e,t,r)}getAttrs(){return this.attributes}toString(){return this.content}getDataSize(){const e={data:0,meta:0};e.data+=this.content.length*2;for(const t of this.attributes){const r=t.getDataSize();e.meta+=r.meta,e.data+=r.data}return e}toJSON(){const e=nn(this.content),t=this.attributes.toObject(),r=[];for(const[i,s]of Object.entries(t)){const o=JSON.parse(s),a=typeof o=="string"?`"${nn(i)}":"${nn(o)}"`:`"${nn(i)}":${String(o)}`;r.push(a)}return r.sort(),r.length===0?`{"val":"${e}"}`:`{"attrs":{${r.join(",")}},"val":"${e}"}`}getAttributes(){return this.attributes.toObject()}getContent(){return this.content}purge(e){this.attributes&&e instanceof Vr&&this.attributes.purge(e)}getGCPairs(){const e=[];for(const t of this.attributes)t.getRemovedAt()&&e.push({parent:this,child:t});return e}}class Nt extends Jo{constructor(t,r){super(r);l(this,"rgaTreeSplit");this.rgaTreeSplit=t}static create(t,r){return new Nt(t,r)}edit(t,r,i,s,o){const a=r?Do.create(r):void 0;if(a&&s)for(const[p,k]of Object.entries(s))a.setAttr(p,k,i);const[u,c,d,h]=this.rgaTreeSplit.edit(t,i,a,o);return[h.map(p=>({...p,value:p.value?{attributes:kr(p.value.getAttributes()),content:p.value.getContent()}:{attributes:void 0,content:""},type:"content"})),c,d,[u,u]]}setStyle(t,r,i,s){const o={data:0,meta:0},[,a,u]=this.rgaTreeSplit.findNodeWithSplit(t[1],i),[,c,d]=this.rgaTreeSplit.findNodeWithSplit(t[0],i);Re(o,a,c);const h=[],g=this.rgaTreeSplit.findBetween(d,u),p=[];for(const T of g){const P=T.getCreatedAt().getActorID();let y=no;s!=null&&(y=s.get(P)?s.get(P):0n),T.canStyle(i,y)&&p.push(T)}const k=[];for(const T of p){if(T.isRemoved())continue;const[P,y]=this.rgaTreeSplit.findIndexesFromRange(T.createPosRange());h.push({type:"style",actor:i.getActorID(),from:P,to:y,value:{attributes:kr(r)}});for(const[m,v]of Object.entries(r)){const[E]=T.getValue().setAttr(m,v,i);E!==void 0&&k.push({parent:T.getValue(),child:E});const C=T.getValue().getAttrs().getNodeMapByKey().get(m);C!==void 0&&Re(o,C.getDataSize())}}return[k,o,h]}indexRangeToPosRange(t,r){const i=this.rgaTreeSplit.indexToPos(t);return t===r?[i,i]:[i,this.rgaTreeSplit.indexToPos(r)]}get length(){return this.rgaTreeSplit.length}getTreeByIndex(){return this.rgaTreeSplit.getTreeByIndex()}getTreeByID(){return this.rgaTreeSplit.getTreeByID()}getDataSize(){const t={data:0,meta:0};for(const r of this.rgaTreeSplit){if(r.isRemoved())continue;const i=r.getDataSize();t.data+=i.data,t.meta+=i.meta}return{data:t.data,meta:t.meta+this.getMetaUsage()}}toJSON(){const t=[];for(const r of this.rgaTreeSplit)r.isRemoved()||t.push(r.getValue().toJSON());return`[${t.join(",")}]`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:JSON.parse(this.toJSON()),type:"YORKIE_TEXT"}}toString(){return this.rgaTreeSplit.toString()}values(){const t=[];for(const r of this.rgaTreeSplit)if(!r.isRemoved()){const i=r.getValue();t.push({attributes:kr(i.getAttributes()),content:i.getContent()})}return t}getRGATreeSplit(){return this.rgaTreeSplit}toTestString(){return this.rgaTreeSplit.toTestString()}deepcopy(){const t=new Nt(this.rgaTreeSplit.deepcopy(),this.getCreatedAt());return t.remove(this.getRemovedAt()),t}findIndexesFromRange(t){return this.rgaTreeSplit.findIndexesFromRange(t)}getGCPairs(){const t=[];for(const r of this.rgaTreeSplit){r.getRemovedAt()&&t.push({parent:this.rgaTreeSplit,child:r});for(const i of r.getValue().getGCPairs())t.push(i)}return t}}class $o extends jt{constructor(t,r,i,s,o,a){super(t,a);l(this,"fromPos");l(this,"toPos");l(this,"content");l(this,"attributes");this.fromPos=r,this.toPos=i,this.content=s,this.attributes=o}static create(t,r,i,s,o,a){return new $o(t,r,i,s,o,a)}execute(t,r,i){const s=t.findByCreatedAt(this.getParentCreatedAt());if(!s)throw new S(w.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(s instanceof Nt))throw new S(w.ErrInvalidArgument,"fail to execute, only Text can execute edit");const o=s,[a,u,c]=o.edit([this.fromPos,this.toPos],this.content,this.getExecutedAt(),Object.fromEntries(this.attributes),i);t.acc(c);for(const d of u)t.registerGCPair(d);return{opInfos:a.map(({from:d,to:h,value:g})=>({type:"edit",from:d,to:h,value:g,path:t.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const t=this.getParentCreatedAt().toTestString(),r=this.fromPos.toTestString(),i=this.toPos.toTestString(),s=this.content;return`${t}.EDIT(${r},${i},${s})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getContent(){return this.content}getAttributes(){return this.attributes||new Map}}class Uo extends jt{constructor(t,r,i,s,o){super(t,o);l(this,"fromPos");l(this,"toPos");l(this,"attributes");this.fromPos=r,this.toPos=i,this.attributes=s}static create(t,r,i,s,o){return new Uo(t,r,i,s,o)}execute(t,r,i){const s=t.findByCreatedAt(this.getParentCreatedAt());if(!s)throw new S(w.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(s instanceof Nt))throw new S(w.ErrInvalidArgument,"fail to execute, only Text can execute edit");const o=s,[a,u,c]=o.setStyle([this.fromPos,this.toPos],this.attributes?Object.fromEntries(this.attributes):{},this.getExecutedAt(),i);t.acc(u);for(const d of a)t.registerGCPair(d);return{opInfos:c.map(({from:d,to:h,value:g})=>({type:"style",from:d,to:h,value:g,path:t.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const t=this.getParentCreatedAt().toTestString(),r=this.fromPos.toTestString(),i=this.toPos.toTestString(),s=this.attributes;return`${t}.STYL(${r},${i},${JSON.stringify(s)})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getAttributes(){return this.attributes}}const QS=2,XS="root",an="text";function Js(n,e){let t=0;const r=n.children;for(let i=0;i<e;i++){const s=r[i];!s||s.isRemoved||(t+=s.paddedSize)}return t}class ZS{constructor(e,t=[]){l(this,"type");l(this,"parent");l(this,"_children");l(this,"size");if(this.type=e,this.size=0,this._children=t,this.isText&&this._children.length>0)throw new S(w.ErrRefused,"Text node cannot have children")}updateAncestorsSize(){let e=this.parent;const t=this.isRemoved?-1:1;for(;e&&(e.size+=this.paddedSize*t,!e.isRemoved);)e=e.parent}updateDescendantsSize(){let e=0;for(const t of this._children){const r=t.updateDescendantsSize();t.isRemoved||(e+=r)}return this.size+=e,this.paddedSize}get isText(){return this.type===an}get paddedSize(){return this.size+(this.isText?0:QS)}isAncestorOf(e){return e1(this,e)}get nextSibling(){const e=this.parent.findOffset(this),t=this.parent.children[e+1];if(t)return t}get prevSibling(){const e=this.parent.findOffset(this),t=this.parent.children[e-1];if(t)return t}splitText(e,t){const r={data:0,meta:0};if(e===0||e===this.size)return[void 0,r];const i=this.value.slice(0,e),s=this.value.slice(e);if(!s.length)return[void 0,r];const o=this.getDataSize();this.value=i;const a=this.cloneText(e+t);return a.value=s,this.parent.insertAfterInternal(a,this),Re(r,this.getDataSize(),a.getDataSize()),ss(r,o),[a,r]}get children(){return this._children.filter(e=>!e.isRemoved)}get allChildren(){return[...this._children]}hasTextChild(){return this.children.length>0&&this.children.every(e=>e.isText)}getChildrenText(){return this.isText?this.value:this.hasTextChild()?this.children.map(e=>e.value).join(""):""}append(...e){if(this.isText)throw new S(w.ErrRefused,"Text node cannot have children");this._children.push(...e);for(const t of e)t.parent=this,t.updateAncestorsSize()}prepend(...e){if(this.isText)throw new S(w.ErrRefused,"Text node cannot have children");this._children.unshift(...e);for(const t of e)t.parent=this}insertBefore(e,t){if(this.isText)throw new S(w.ErrRefused,"Text node cannot have children");const r=this._children.indexOf(t);if(r===-1)throw new S(w.ErrInvalidArgument,"child not found");this.insertAtInternal(e,r),e.updateAncestorsSize()}insertAfter(e,t){if(this.isText)throw new S(w.ErrRefused,"Text node cannot have children");const r=this._children.indexOf(t);if(r===-1)throw new S(w.ErrInvalidArgument,"child not found");this.insertAtInternal(e,r+1),e.updateAncestorsSize()}insertAt(e,t){if(this.isText)throw new S(w.ErrRefused,"Text node cannot have children");this.insertAtInternal(e,t),e.updateAncestorsSize()}removeChild(e){if(this.isText)throw new S(w.ErrRefused,"Text node cannot have children");const t=this._children.indexOf(e);if(t===-1)throw new S(w.ErrInvalidArgument,"child not found");this._children.splice(t,1),e.parent=void 0}splitElement(e,t){const r={data:0,meta:0},i=this.getDataSize(),s=this.cloneElement(t);this.parent.insertAfterInternal(s,this),s.updateAncestorsSize();const o=this.children.slice(0,e),a=this.children.slice(e);this._children=o,s._children=a,this.size=this._children.reduce((u,c)=>u+c.paddedSize,0),s.size=s._children.reduce((u,c)=>u+c.paddedSize,0);for(const u of s._children)u.parent=s;return Re(r,this.getDataSize(),s.getDataSize()),ss(r,i),[s,r]}insertAfterInternal(e,t){if(this.isText)throw new S(w.ErrRefused,"Text node cannot have children");const r=this._children.indexOf(t);if(r===-1)throw new S(w.ErrInvalidArgument,"child not found");this.insertAtInternal(e,r+1)}insertAtInternal(e,t){if(this.isText)throw new S(w.ErrRefused,"Text node cannot have children");this._children.splice(t,0,e),e.parent=this}findOffset(e){if(this.isText)throw new S(w.ErrRefused,"Text node cannot have children");if(e.isRemoved){const t=this._children.indexOf(e);return this.allChildren.splice(0,t).filter(i=>!i.isRemoved).length}return this.children.indexOf(e)}findBranchOffset(e){if(this.isText)throw new S(w.ErrRefused,"Text node cannot have children");let t=e;for(;t;){const r=this._children.indexOf(t);if(r!==-1)return r;t=t.parent}return-1}}function e1(n,e){if(n===e)return!1;for(;e.parent;){if(e.parent===n)return!0;e=e.parent}return!1}var de=(n=>(n.Start="Start",n.End="End",n.Text="Text",n))(de||{});function vy(n,e,t,r){if(e>t)throw new S(w.ErrInvalidArgument,`from is greater than to: ${e} > ${t}`);if(e>n.size)throw new S(w.ErrInvalidArgument,`from is out of range: ${e} > ${n.size}`);if(t>n.size)throw new S(w.ErrInvalidArgument,`to is out of range: ${t} > ${n.size}`);if(e===t)return;let i=0;for(const s of n.children){if(e-s.paddedSize<i&&i<t){const o=s.isText?e-i:e-i-1,a=s.isText?t-i:t-i-1,u=!s.isText&&o<0,c=!s.isText&&a>s.size;(s.isText||u)&&r([s,s.isText?"Text":"Start"],c),vy(s,Math.max(0,o),Math.min(a,s.size),r),c&&r([s,"End"],c)}i+=s.paddedSize}}function wy(n,e,t=0){for(const r of n.children)wy(r,e,t+1);e(n,t)}function Wl(n,e,t=0){for(const r of n._children)Wl(r,e,t+1);e(n,t)}function ef(n,e,t=!0){if(e>n.size)throw new S(w.ErrInvalidArgument,`index is out of range: ${e} > ${n.size}`);if(n.isText)return{node:n,offset:e};let r=0,i=0;for(const s of n.children){if(t&&s.isText&&s.size>=e-i)return ef(s,e-i,t);if(e===i)return{node:n,offset:r};if(!t&&s.paddedSize===e-i)return{node:n,offset:r+1};if(s.paddedSize>e-i)return ef(s,e-i-1,t);i+=s.paddedSize,r+=1}return{node:n,offset:r}}function Sy(n){return n.isText||n.children.length===0?n:Sy(n.children[0])}function t1(n,e){if(n.size<e)throw new S(w.ErrInvalidArgument,"unacceptable path");for(let t=0;t<n.children.length;t++){const r=n.children[t];if(r.size<e)e-=r.size;else{n=r;break}}return{node:n,offset:e}}class n1{constructor(e){l(this,"root");this.root=e}tokensBetween(e,t,r){vy(this.root,e,t,r)}traverse(e){wy(this.root,e,0)}traverseAll(e){Wl(this.root,e,0)}findTreePos(e,t=!0){return ef(this.root,e,t)}treePosToPath(e){const t=[];let r=e.node;if(r.isText){const i=r.parent.findOffset(r);if(i===-1)throw new S(w.ErrInvalidArgument,"invalid treePos");const s=Js(r.parent,i);t.push(s+e.offset),r=r.parent}else if(r.hasTextChild()){const i=Js(r,e.offset);t.push(i)}else t.push(e.offset);for(;r.parent;){const i=r.parent.findOffset(r);if(i===-1)throw new S(w.ErrInvalidArgument,"invalid treePos");t.push(i),r=r.parent}return t.reverse()}pathToIndex(e){const t=this.pathToTreePos(e);return this.indexOf(t)}pathToTreePos(e){if(!e.length)throw new S(w.ErrInvalidArgument,"unacceptable path");let t=this.root;for(let r=0;r<e.length-1;r++){const i=e[r];if(t=t.children[i],!t)throw new S(w.ErrInvalidArgument,"unacceptable path")}if(t.hasTextChild())return t1(t,e[e.length-1]);if(t.children.length<e[e.length-1])throw new S(w.ErrInvalidArgument,"unacceptable path");return{node:t,offset:e[e.length-1]}}getRoot(){return this.root}get size(){return this.root.size}findPostorderRight(e){const{node:t,offset:r}=e;if(t.isText){if(t.size===r){const i=t.nextSibling;return i||t.parent}return t}return t.children.length===r?t:Sy(t.children[r])}indexOf(e){let{node:t}=e;const{offset:r}=e;let i=0,s=1;if(t.isText){i+=r;const o=t.parent,a=o.findOffset(t);if(a===-1)throw new S(w.ErrInvalidArgument,"invalid pos");i+=Js(o,a),t=t.parent}else i+=Js(t,r);for(;t!=null&&t.parent;){const o=t.parent,a=o.findOffset(t);if(a===-1)throw new S(w.ErrInvalidArgument,"invalid pos");i+=Js(o,a),s++,t=t.parent}return i+s-1}indexToPath(e){const t=this.findTreePos(e);return this.treePosToPath(t)}}const r1=(n,e)=>n===e?0:n<e?-1:1;class i1{constructor(e,t,r){l(this,"key");l(this,"value");l(this,"parent");l(this,"left");l(this,"right");l(this,"isRed");this.key=e,this.value=t,this.isRed=r}}class s1{constructor(e){l(this,"stack");this.stack=[],this.traverseInorder(e)}traverseInorder(e){e&&(this.traverseInorder(e.left),this.stack.push({key:e.key,value:e.value}),this.traverseInorder(e.right))}}class ky{constructor(e){l(this,"root");l(this,"comparator");l(this,"counter");this.comparator=typeof e<"u"?e:r1,this.counter=0}put(e,t){return this.root=this.putInternal(e,t,this.root),this.root.isRed=!1,t}get(e){const t=this.getInternal(e,this.root);return t?t.value:void 0}remove(e){!this.isRed(this.root.left)&&!this.isRed(this.root.right)&&(this.root.isRed=!0),this.root=this.removeInternal(this.root,e),this.root&&(this.root.isRed=!1)}getIterator(){return new s1(this.root)}values(){const e=[];for(const t of this.getIterator().stack)e.push(t.value);return e}floorEntry(e){let t=this.root;for(;t;){const r=this.comparator(e,t.key);if(r>0)if(t.right)t.right.parent=t,t=t.right;else return t;else if(r<0)if(t.left)t.left.parent=t,t=t.left;else{let i=t.parent,s=t;for(;i&&s===i.left;)s=i,i=i.parent;return i}else return t}}lastEntry(){if(!this.root)return this.root;let e=this.root;for(;e.right;)e=e.right;return e}size(){return this.counter}isEmpty(){return this.counter===0}getInternal(e,t){for(;t;){const r=this.comparator(e,t.key);if(r===0)return t;r<0?t=t.left:r>0&&(t=t.right)}}putInternal(e,t,r){if(!r)return this.counter+=1,new i1(e,t,!0);const i=this.comparator(e,r.key);return i<0?r.left=this.putInternal(e,t,r.left):i>0?r.right=this.putInternal(e,t,r.right):r.value=t,this.isRed(r.right)&&!this.isRed(r.left)&&(r=this.rotateLeft(r)),this.isRed(r.left)&&this.isRed(r.left.left)&&(r=this.rotateRight(r)),this.isRed(r.left)&&this.isRed(r.right)&&this.flipColors(r),r}removeInternal(e,t){if(this.comparator(t,e.key)<0)!this.isRed(e.left)&&!this.isRed(e.left.left)&&(e=this.moveRedLeft(e)),e.left=this.removeInternal(e.left,t);else{if(this.isRed(e.left)&&(e=this.rotateRight(e)),this.comparator(t,e.key)===0&&!e.right){this.counter-=1;return}if(!this.isRed(e.right)&&!this.isRed(e.right.left)&&(e=this.moveRedRight(e)),this.comparator(t,e.key)===0){this.counter-=1;const r=this.min(e.right);e.value=r.value,e.key=r.key,e.right=this.removeMin(e.right)}else e.right=this.removeInternal(e.right,t)}return this.fixUp(e)}min(e){return e.left?this.min(e.left):e}removeMin(e){if(e.left)return!this.isRed(e.left)&&!this.isRed(e.left.left)&&(e=this.moveRedLeft(e)),e.left=this.removeMin(e.left),this.fixUp(e)}fixUp(e){return this.isRed(e.right)&&(e=this.rotateLeft(e)),this.isRed(e.left)&&this.isRed(e.left.left)&&(e=this.rotateRight(e)),this.isRed(e.left)&&this.isRed(e.right)&&this.flipColors(e),e}moveRedLeft(e){return this.flipColors(e),this.isRed(e.right.left)&&(e.right=this.rotateRight(e.right),e=this.rotateLeft(e),this.flipColors(e)),e}moveRedRight(e){return this.flipColors(e),this.isRed(e.left.left)&&(e=this.rotateRight(e),this.flipColors(e)),e}isRed(e){return e&&e.isRed}rotateLeft(e){const t=e.right;return e.right=t.left,t.left=e,t.isRed=t.left.isRed,t.left.isRed=!0,t}rotateRight(e){const t=e.left;return e.left=t.right,t.right=e,t.isRed=t.right.isRed,t.right.isRed=!0,t}flipColors(e){e.isRed=!e.isRed,e.left.isRed=!e.left.isRed,e.right.isRed=!e.right.isRed}}class Ft{constructor(e,t){l(this,"parentID");l(this,"leftSiblingID");this.parentID=e,this.leftSiblingID=t}static of(e,t){return new Ft(e,t)}static fromTreePos(e){const{offset:t}=e;let{node:r}=e,i;return r.isText?(r.parent.children[0]===r&&t===0?i=r.parent:i=r,r=r.parent):t===0?i=r:i=r.children[t-1],Ft.of(r.id,xe.of(i.getCreatedAt(),i.getOffset()+t))}getParentID(){return this.parentID}static fromStruct(e){return Ft.of(xe.of(Et.fromStruct(e.parentID.createdAt),e.parentID.offset),xe.of(Et.fromStruct(e.leftSiblingID.createdAt),e.leftSiblingID.offset))}toStruct(){return{parentID:{createdAt:this.getParentID().getCreatedAt().toStruct(),offset:this.getParentID().getOffset()},leftSiblingID:{createdAt:this.getLeftSiblingID().getCreatedAt().toStruct(),offset:this.getLeftSiblingID().getOffset()}}}toTreeNodePair(e){const t=this.getParentID(),r=this.getLeftSiblingID(),i=e.findFloorNode(t);let s=e.findFloorNode(r);if(!i||!s)throw new S(w.ErrRefused,`cannot find node of CRDTTreePos(${t.toTestString()}, ${r.toTestString()})`);return!r.equals(t)&&r.getOffset()>0&&r.getOffset()===s.id.getOffset()&&s.insPrevID&&(s=e.findFloorNode(s.insPrevID)),[i,s]}getLeftSiblingID(){return this.leftSiblingID}equals(e){return this.getParentID().getCreatedAt().equals(e.getParentID().getCreatedAt())&&this.getParentID().getOffset()===e.getParentID().getOffset()&&this.getLeftSiblingID().getCreatedAt().equals(e.getLeftSiblingID().getCreatedAt())&&this.getLeftSiblingID().getOffset()===e.getLeftSiblingID().getOffset()}}class xe{constructor(e,t){l(this,"createdAt");l(this,"offset");this.createdAt=e,this.offset=t}static of(e,t){return new xe(e,t)}static fromStruct(e){return xe.of(Et.fromStruct(e.createdAt),e.offset)}static createComparator(){return(e,t)=>{const r=e.getCreatedAt().compare(t.getCreatedAt());return r!==0?r:e.getOffset()>t.getOffset()?1:e.getOffset()<t.getOffset()?-1:0}}getCreatedAt(){return this.createdAt}equals(e){return this.createdAt.compare(e.createdAt)===0&&this.offset===e.offset}getOffset(){return this.offset}setOffset(e){this.offset=e}toStruct(){return{createdAt:this.createdAt.toStruct(),offset:this.offset}}toIDString(){return`${this.createdAt.toIDString()}:${this.offset}`}toTestString(){return`${this.createdAt.toTestString()}/${this.offset}`}}class tt extends ZS{constructor(t,r,i,s,o){super(r);l(this,"id");l(this,"removedAt");l(this,"attrs");l(this,"insPrevID");l(this,"insNextID");l(this,"_value","");this.id=t,this.removedAt=o,s&&(this.attrs=s),typeof i=="string"?this.value=i:Array.isArray(i)&&(this._children=i)}toIDString(){return this.id.toIDString()}getRemovedAt(){return this.removedAt}static create(t,r,i,s){return new tt(t,r,i,s)}deepcopy(){var r;const t=new tt(this.id,this.type);return t.removedAt=this.removedAt,t._value=this._value,t.size=this.size,t.attrs=(r=this.attrs)==null?void 0:r.deepcopy(),t._children=this._children.map(i=>{const s=i.deepcopy();return s.parent=t,s}),t.insPrevID=this.insPrevID,t.insNextID=this.insNextID,t}get value(){if(!this.isText)throw new S(w.ErrInvalidType,`cannot get value of element node: ${this.type}`);return this._value}set value(t){if(!this.isText)throw new S(w.ErrInvalidType,`cannot set value of element node: ${this.type}`);this._value=t,this.size=t.length}get isRemoved(){return!!this.removedAt}remove(t){const r=!this.removedAt;(!this.removedAt||this.removedAt.compare(t)>0)&&(this.removedAt=t),r&&this.updateAncestorsSize()}cloneText(t){return new tt(xe.of(this.id.getCreatedAt(),t),this.type,void 0,void 0,this.removedAt)}cloneElement(t){return new tt(xe.of(t(),0),this.type,void 0,void 0,this.removedAt)}split(t,r,i){const[s,o]=this.isText?this.splitText(r,this.id.getOffset()):this.splitElement(r,i);if(s){if(s.insPrevID=this.id,this.insNextID){const a=t.findFloorNode(this.insNextID);a.insPrevID=s.id,s.insNextID=this.insNextID}this.insNextID=s.id,t.registerNode(s)}return[s,o]}getCreatedAt(){return this.id.getCreatedAt()}getOffset(){return this.id.getOffset()}canDelete(t,r){return this.getCreatedAt().getLamport()<=r&&(!this.removedAt||t.after(this.removedAt))}canStyle(t,r){return this.isText?!1:this.getCreatedAt().getLamport()<=r&&(!this.removedAt||t.after(this.removedAt))}setAttrs(t,r){this.attrs||(this.attrs=new Pr);const i=[];for(const[s,o]of Object.entries(t))i.push(this.attrs.set(s,o,r));return i}purge(t){this.attrs&&this.attrs.purge(t)}getDataSize(){const t={data:0,meta:0};if(this.isText&&(t.data+=this.size*2),this.id&&(t.meta+=on),this.removedAt&&(t.meta+=on),this.attrs)for(const r of this.attrs){if(r.getRemovedAt())continue;const i=r.getDataSize();t.meta+=i.meta,t.data+=i.data}return t}getGCPairs(){const t=[];if(!this.attrs)return t;for(const r of this.attrs)r.getRemovedAt()&&t.push({parent:this,child:r});return t}}function tf(n){var t;if(n.isText){const r=n;return{type:r.type,value:r.value}}const e={type:n.type,children:n.children.map(tf)};return n.attrs&&(e.attributes=kr((t=n.attrs)==null?void 0:t.toObject())),e}function sd(n){if(n.isText)return n.value;let e="";return n.attrs&&n.attrs.size()&&(e=" "+Array.from(n.attrs).filter(t=>!t.isRemoved()).sort((t,r)=>t.getKey().localeCompare(r.getKey())).map(t=>{const r=JSON.parse(t.getValue());return typeof r=="string"?`${t.getKey()}="${r}"`:`${t.getKey()}="${nn(t.getValue())}"`}).join(" ")),`<${n.type}${e}>${n.children.map(t=>sd(t)).join("")}</${n.type}>`}function Ty(n){if(n.isText){const e=n;return{type:e.type,value:e.value,size:e.size,isRemoved:e.isRemoved}}return{type:n.type,children:n.children.map(Ty),size:n.size,isRemoved:n.isRemoved}}class Pt extends Jo{constructor(t,r){super(r);l(this,"indexTree");l(this,"nodeMapByID");this.indexTree=new n1(t),this.nodeMapByID=new ky(xe.createComparator()),this.indexTree.traverseAll(i=>{this.nodeMapByID.put(i.id,i)})}static create(t,r){return new Pt(t,r)}findFloorNode(t){const r=this.nodeMapByID.floorEntry(t);if(!(!r||!r.key.getCreatedAt().equals(t.getCreatedAt())))return r.value}registerNode(t){this.nodeMapByID.put(t.id,t)}findNodesAndSplitText(t,r){let i={data:0,meta:0};const[s,o]=t.toTreeNodePair(this);let a=o;const u=s===a,c=a.parent&&!u?a.parent:s;if(a.isText){const[,d]=a.split(this,t.getLeftSiblingID().getOffset()-a.id.getOffset());i=d}if(r){const d=c.allChildren,h=u?0:d.indexOf(a)+1;for(let g=h;g<d.length;g++){const p=d[g];if(!p.id.getCreatedAt().after(r))break;a=p}}return[[c,a],i]}style(t,r,i,s){const o={data:0,meta:0},[[a,u],c]=this.findNodesAndSplitText(t[0],i),[[d,h],g]=this.findNodesAndSplitText(t[1],i);Re(o,g,c);const p=[],k=r?kr(r):{},T=[];return this.traverseInPosRange(a,u,d,h,([P,y])=>{var E;const m=P.getCreatedAt().getActorID();let v=no;if(s!=null&&(v=s.get(m)?s.get(m):0n),P.canStyle(i,v)&&r){const C=P.setAttrs(r,i),N=C.reduce(($,[,M])=>(M&&($[M.getKey()]=k[M.getKey()]),$),{}),D=P.parent,R=P.prevSibling||P.parent;Object.keys(N).length>0&&p.push({type:"style",from:this.toIndex(D,R),to:this.toIndex(P,P),fromPath:this.toPath(D,R),toPath:this.toPath(P,P),actor:i.getActorID(),value:N});for(const[$]of C)$&&T.push({parent:P,child:$});for(const[$]of Object.entries(k)){const M=(E=P.attrs)==null?void 0:E.getNodeMapByKey().get($);M!==void 0&&y!==de.End&&Re(o,M.getDataSize())}}}),[T,p,o]}removeStyle(t,r,i,s){const o={data:0,meta:0},[[a,u],c]=this.findNodesAndSplitText(t[0],i),[[d,h],g]=this.findNodesAndSplitText(t[1],i);Re(o,g,c);const p=[],k=[];return this.traverseInPosRange(a,u,d,h,([T])=>{const P=T.getCreatedAt().getActorID();let y=no;if(s!=null&&(y=s.get(P)?s.get(P):0n),T.canStyle(i,y)&&r){T.attrs||(T.attrs=new Pr);for(const E of r){const C=T.attrs.remove(E,i);for(const N of C)k.push({parent:T,child:N})}const m=T.parent,v=T.prevSibling||T.parent;p.push({actor:i.getActorID(),type:"removeStyle",from:this.toIndex(m,v),to:this.toIndex(T,T),fromPath:this.toPath(m,v),toPath:this.toPath(T,T),value:r})}}),[k,p,o]}edit(t,r,i,s,o,a){const u={data:0,meta:0},[[c,d],h]=this.findNodesAndSplitText(t[0],s),[[g,p],k]=this.findNodesAndSplitText(t[1],s);Re(u,k,h);const T=this.toIndex(c,d),P=this.toPath(c,d),y=[],m=[],v=[];this.traverseInPosRange(c,d,g,p,([N,D],R)=>{if(D===de.Start&&!R)for(const be of N.children)v.push(be);const $=N.getCreatedAt().getActorID();let M=no;a!=null&&(M=a.get($)?a.get($):0n),(N.canDelete(s,M)||y.includes(N.parent))&&((D===de.Text||D===de.Start)&&y.push(N),m.push([N,D]))});const E=this.makeDeletionChanges(m,s),C=[];for(const N of y)N.remove(s),N.isRemoved&&C.push({parent:this,child:N});for(const N of v)N.removedAt||c.append(N);if(i>0){let N=0,D=c,R=d;for(;N<i;)D.split(this,D.findOffset(R)+1,o),R=D,D=D.parent,N++;E.push({type:"content",from:T,to:T,fromPath:P,toPath:P,actor:s.getActorID()})}if(r!=null&&r.length){const N=[];let D=d;for(const R of r)D===c?c.insertAt(R,0):c.insertAfter(R,D),D=R,Wl(R,$=>{c.isRemoved?($.remove(s),C.push({parent:this,child:$})):Re(u,$.getDataSize()),this.nodeMapByID.put($.id,$)}),R.isRemoved||N.push(R);if(N.length){const R=N.map($=>tf($));E.length&&E[E.length-1].from===T?E[E.length-1].value=R:E.push({type:"content",from:T,to:T,fromPath:P,toPath:P,actor:s.getActorID(),value:R})}}return[E,C,u]}editT(t,r,i,s,o){const a=this.findPos(t[0]),u=this.findPos(t[1]);this.edit([a,u],r,i,s,o)}move(t,r,i){throw new S(w.ErrUnimplemented,`not implemented: ${t}, ${r}, ${i}`)}pathToTreePos(t){return this.indexTree.pathToTreePos(t)}purge(t){var s;(s=t.parent)==null||s.removeChild(t),this.nodeMapByID.remove(t.id);const r=t.insPrevID,i=t.insNextID;if(r){const o=this.findFloorNode(r);o.insNextID=i}if(i){const o=this.findFloorNode(i);o.insPrevID=r}t.insPrevID=void 0,t.insNextID=void 0}getGCPairs(){const t=[];return this.indexTree.traverse(r=>{r.getRemovedAt()&&t.push({parent:this,child:r});for(const i of r.getGCPairs())t.push(i)}),t}findPos(t,r=!0){const i=this.indexTree.findTreePos(t,r);return Ft.fromTreePos(i)}pathToPosRange(t){const r=this.pathToIndex(t);return[this.findPos(r),this.findPos(r+1)]}pathToPos(t){const r=this.indexTree.pathToIndex(t);return this.findPos(r)}getRoot(){return this.indexTree.getRoot()}getSize(){return this.indexTree.size}getNodeSize(){return this.nodeMapByID.size()}getIndexTree(){return this.indexTree}toXML(){return sd(this.indexTree.getRoot())}getDataSize(){const t={data:0,meta:0};return this.indexTree.traverse(r=>{if(r.getRemovedAt())return;const i=r.getDataSize();t.data+=i.data,t.meta+=i.meta}),{data:t.data,meta:t.meta+this.getMetaUsage()}}toJSON(){return JSON.stringify(this.getRootTreeNode())}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:JSON.parse(this.toJSON()),type:"YORKIE_TREE"}}toJSInfoForTest(){const t=this.indexTree.getRoot(),r=(i,s=void 0,o=void 0,a=0)=>{var p,k,T,P;let u,c,d;const h=i.isText?{node:i,offset:0}:s&&o?this.toTreePos(s,o):null;h&&(u=this.indexTree.indexOf(h),c=this.indexTree.treePosToPath(h),d=Ft.fromTreePos(h).toStruct());const g={type:i.type,parent:s==null?void 0:s.id.toTestString(),size:i.size,id:i.id.toTestString(),removedAt:(p=i.removedAt)==null?void 0:p.toTestString(),insPrev:(k=i.insPrevID)==null?void 0:k.toTestString(),insNext:(T=i.insNextID)==null?void 0:T.toTestString(),value:i.isText?i.value:void 0,isRemoved:i.isRemoved,children:[],depth:a,attributes:i.attrs?kr((P=i.attrs)==null?void 0:P.toObject()):void 0,index:u,path:c,pos:d};for(let y=0;y<i.allChildren.length;y++){const m=y===0?i:i.allChildren[y-1];g.children.push(r(i.allChildren[y],i,m,a+1))}return g};return r(t)}getRootTreeNode(){return tf(this.indexTree.getRoot())}toTestTreeNode(){return Ty(this.indexTree.getRoot())}toSortedJSON(){return this.toJSON()}deepcopy(){const t=this.getRoot();return new Pt(t.deepcopy(),this.getCreatedAt())}toPath(t,r){const i=this.toTreePos(t,r);return i?this.indexTree.treePosToPath(i):[]}toIndex(t,r){const i=this.toTreePos(t,r);return i?this.indexTree.indexOf(i):-1}indexToPath(t){return this.indexTree.indexToPath(t)}pathToIndex(t){return this.indexTree.pathToIndex(t)}indexRangeToPosRange(t){const r=this.findPos(t[0]);return t[0]===t[1]?[r,r]:[r,this.findPos(t[1])]}indexRangeToPosStructRange(t){const[r,i]=t,s=this.findPos(r);return r===i?[s.toStruct(),s.toStruct()]:[s.toStruct(),this.findPos(i).toStruct()]}posRangeToPathRange(t){const[[r,i]]=this.findNodesAndSplitText(t[0]),[[s,o]]=this.findNodesAndSplitText(t[1]);return[this.toPath(r,i),this.toPath(s,o)]}posRangeToIndexRange(t){const[[r,i]]=this.findNodesAndSplitText(t[0]),[[s,o]]=this.findNodesAndSplitText(t[1]);return[this.toIndex(r,i),this.toIndex(s,o)]}traverseInPosRange(t,r,i,s,o){const a=this.toIndex(t,r),u=this.toIndex(i,s);return this.indexTree.tokensBetween(a,u,o)}toTreePos(t,r){if(!t||!r)return;if(t.isRemoved){let s;for(;t.isRemoved;)s=t,t=s.parent;const o=t.findOffset(s);return{node:t,offset:o}}if(t===r)return{node:t,offset:0};let i=t.findOffset(r);if(!r.isRemoved){if(r.isText)return{node:r,offset:r.paddedSize};i++}return{node:t,offset:i}}makeDeletionChanges(t,r){const i=[],s=[];let o=null,a=null;for(let u=0;u<t.length;u++){const c=t[u],d=t[u+1];o||(o=c),a=c;const h=this.findRightToken(c);(!h||!d||h[0]!==d[0]||h[1]!==d[1])&&(s.push([o,a]),o=null,a=null)}for(const u of s){const[c,d]=u,[h,g]=this.findLeftToken(c),[p,k]=d,T=g===de.Start?h:h.parent,P=k===de.Start?p:p.parent,y=this.toIndex(T,h),m=this.toIndex(P,p);y<m&&(i.length>0&&y===i[i.length-1].to?(i[i.length-1].to=m,i[i.length-1].toPath=this.toPath(P,p)):i.push({type:"content",from:y,to:m,fromPath:this.toPath(T,h),toPath:this.toPath(P,p),actor:r.getActorID()}))}return i.reverse()}findRightToken([t,r]){if(r===de.Start){const u=t.allChildren;return u.length>0?[u[0],u[0].isText?de.Text:de.Start]:[t,de.End]}const i=t.parent,s=i.allChildren,o=s.indexOf(t);if(i&&o===s.length-1)return[i,de.End];const a=s[o+1];return[a,a.isText?de.Text:de.Start]}findLeftToken([t,r]){if(r===de.End){const u=t.allChildren;if(u.length>0){const c=u[u.length-1];return[c,c.isText?de.Text:de.End]}return[t,de.Start]}const i=t.parent,s=i.allChildren,o=s.indexOf(t);if(i&&o===0)return[i,de.Start];const a=s[o-1];return[a,a.isText?de.Text:de.End]}}class jo extends jt{constructor(t,r,i,s,o,a){super(t,a);l(this,"fromPos");l(this,"toPos");l(this,"contents");l(this,"splitLevel");this.fromPos=r,this.toPos=i,this.contents=s,this.splitLevel=o}static create(t,r,i,s,o,a){return new jo(t,r,i,s,o,a)}execute(t,r,i){var h;const s=t.findByCreatedAt(this.getParentCreatedAt());if(!s)throw new S(w.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(s instanceof Pt))throw new S(w.ErrInvalidArgument,"fail to execute, only Tree can execute edit");const o=this.getExecutedAt(),a=s,[u,c,d]=a.edit([this.fromPos,this.toPos],(h=this.contents)==null?void 0:h.map(g=>g.deepcopy()),this.splitLevel,o,(()=>{let g=o.getDelimiter();return this.contents!==void 0&&(g+=this.contents.length),()=>Et.of(o.getLamport(),++g,o.getActorID())})(),i);t.acc(d);for(const g of c)t.registerGCPair(g);return{opInfos:u.map(({from:g,to:p,value:k,splitLevel:T,fromPath:P,toPath:y})=>({type:"tree-edit",path:t.createPath(this.getParentCreatedAt()),from:g,to:p,value:k,splitLevel:T,fromPath:P,toPath:y}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const t=this.getParentCreatedAt().toTestString(),r=`${this.fromPos.getLeftSiblingID().getCreatedAt().toTestString()}/${this.fromPos.getLeftSiblingID().getOffset()}`,i=`${this.toPos.getLeftSiblingID().getCreatedAt().toTestString()}/${this.toPos.getLeftSiblingID().getOffset()}`,s=this.contents||[];return`${t}.EDIT(${r},${i},${s.map(o=>sd(o)).join("")})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getContents(){return this.contents}getSplitLevel(){return this.splitLevel}}class os{constructor(e){l(this,"vector");this.vector=e||new Map}set(e,t){this.vector.set(e,t)}unset(e){this.vector.delete(e)}get(e){return this.vector.get(e)}maxLamport(){let e=BigInt(0);for(const[,t]of this)t>e&&(e=t);return e}max(e){const t=new Map;for(const[r,i]of e){const s=this.vector.get(r),o=s&&s>i?s:i;t.set(r,o)}for(const[r,i]of this){const s=e.get(r),o=s&&s>i?s:i;t.set(r,o)}return new os(t)}afterOrEqual(e){const t=this.vector.get(e.getActorID());return t===void 0?!1:t>=e.getLamport()}deepcopy(){const e=new Map;for(const[t,r]of this.vector)e.set(t,r);return new os(e)}filter(e){const t=new Map;for(const[r]of e){const i=this.vector.get(r);i!==void 0&&t.set(r,i)}return new os(t)}size(){return this.vector.size}*[Symbol.iterator](){for(const[e,t]of this.vector)yield[e,t]}}const Iy=new os(new Map);class Lt{constructor(e,t,r,i,s){l(this,"clientSeq");l(this,"serverSeq");l(this,"actor");l(this,"lamport");l(this,"versionVector");this.clientSeq=e,this.serverSeq=s,this.lamport=t,this.versionVector=i,this.actor=r}hasClocks(){return this.versionVector.size()>0&&this.lamport!=Xc}static of(e,t,r,i,s){return new Lt(e,t,r,i,s)}next(e=!1){if(e)return new Lt(this.clientSeq+1,this.lamport,this.actor,Iy,Xc);const t=this.versionVector.deepcopy();return t.set(this.actor,this.lamport+1n),new Lt(this.clientSeq+1,this.lamport+1n,this.actor,t)}syncClocks(e){if(!e.hasClocks())return this;const t=e.lamport>this.lamport?e.lamport+1n:this.lamport+1n,r=this.versionVector.max(e.versionVector),i=new Lt(this.clientSeq,t,this.actor,r);return i.versionVector.set(this.actor,t),i}setClocks(e,t){const r=e>this.lamport?e+1n:this.lamport+1n;t.unset(Kl);const i=this.versionVector.max(t);return i.set(this.actor,r),Lt.of(this.clientSeq,r,this.actor,i)}createTimeTicket(e){return Et.of(this.lamport,e,this.actor)}setActor(e){return new Lt(this.clientSeq,this.lamport,e,this.versionVector,this.serverSeq)}setLamport(e){return new Lt(this.clientSeq,e,this.actor,this.versionVector,this.serverSeq)}setVersionVector(e){return new Lt(this.clientSeq,this.lamport,this.actor,e,this.serverSeq)}getClientSeq(){return this.clientSeq}getServerSeq(){return this.serverSeq?this.serverSeq.toString():""}getLamport(){return this.lamport}getLamportAsString(){return this.lamport.toString()}getActorID(){return this.actor}getVersionVector(){return this.versionVector}toTestString(){return`${this.lamport.toString()}:${this.actor.slice(-2)}:${this.clientSeq}`}}const o1=new Lt(0,0n,Kl,Iy);class Ts{constructor({id:e,operations:t,presenceChange:r,message:i}){l(this,"id");l(this,"operations");l(this,"presenceChange");l(this,"message");this.id=e,this.operations=t||[],this.presenceChange=r,this.message=i}static create({id:e,operations:t,presenceChange:r,message:i}){return new Ts({id:e,operations:t,presenceChange:r,message:i})}getID(){return this.id}getMessage(){return this.message}hasOperations(){return this.operations.length>0}getOperations(){return this.operations}setActor(e){for(const t of this.operations)t.setActor(e);this.id=this.id.setActor(e)}hasPresenceChange(){return this.presenceChange!==void 0}getPresenceChange(){return this.presenceChange}execute(e,t,r){const i=[],s=[];for(const o of this.operations){const a=o.execute(e,r,this.id.getVersionVector());if(!a)continue;const{opInfos:u,reverseOp:c}=a;i.push(...u),c&&s.unshift(c)}return this.presenceChange&&(this.presenceChange.type===un.Put?t.set(this.id.getActorID(),Rt(this.presenceChange.presence)):t.delete(this.id.getActorID())),{opInfos:i,reverseOps:s}}toTestString(){return`${this.operations.map(e=>e.toTestString()).join(",")}`}toStruct(){return{changeID:he.bytesToHex(he.toChangeID(this.getID()).toBinary()),message:this.getMessage(),operations:this.getOperations().map(e=>he.bytesToHex(he.toOperation(e).toBinary())),presenceChange:this.getPresenceChange()}}static fromStruct(e){const{changeID:t,operations:r,presenceChange:i,message:s}=e;return Ts.create({id:he.bytesToChangeID(he.hexToBytes(t)),operations:r==null?void 0:r.map(o=>he.bytesToOperation(he.hexToBytes(o))),presenceChange:i,message:s})}}class _l{constructor(e,t,r,i,s,o){l(this,"documentKey");l(this,"checkpoint");l(this,"isRemoved");l(this,"changes");l(this,"snapshot");l(this,"versionVector");this.documentKey=e,this.checkpoint=t,this.isRemoved=r,this.changes=i,this.snapshot=o,this.versionVector=s}static create(e,t,r,i,s,o){return new _l(e,t,r,i,s,o)}getDocumentKey(){return this.documentKey}getCheckpoint(){return this.checkpoint}getIsRemoved(){return this.isRemoved}getChanges(){return this.changes}hasChanges(){return this.changes.length>0}getChangeSize(){return this.changes.length}hasSnapshot(){return!!this.snapshot&&!!this.snapshot.length}getSnapshot(){return this.snapshot}getVersionVector(){return this.versionVector}}class as{constructor(e,t){l(this,"serverSeq");l(this,"clientSeq");this.serverSeq=e,this.clientSeq=t}static of(e,t){return new as(e,t)}increaseClientSeq(e){return e===0?this:new as(this.serverSeq,this.clientSeq+e)}forward(e){if(this.equals(e))return this;const t=this.serverSeq>e.serverSeq?this.serverSeq:e.serverSeq,r=Math.max(this.clientSeq,e.clientSeq);return as.of(t,r)}getServerSeqAsString(){return this.serverSeq.toString()}getClientSeq(){return this.clientSeq}getServerSeq(){return this.serverSeq}equals(e){return this.clientSeq===e.clientSeq&&this.serverSeq==e.serverSeq}toTestString(){return`serverSeq=${this.serverSeq}, clientSeq=${this.clientSeq}`}}const a1=new as(0n,0);class ln{constructor(e,t){l(this,"createdAt");l(this,"offset");this.createdAt=e,this.offset=t}static of(e,t){return new ln(e,t)}static fromStruct(e){return ln.of(Et.fromStruct(e.createdAt),e.offset)}getCreatedAt(){return this.createdAt}getOffset(){return this.offset}equals(e){return this.createdAt.compare(e.createdAt)===0&&this.offset===e.offset}hasSameCreatedAt(e){return this.createdAt.compare(e.createdAt)===0}split(e){return new ln(this.createdAt,this.offset+e)}toStruct(){return{createdAt:this.createdAt.toStruct(),offset:this.offset}}toTestString(){return`${this.createdAt.toTestString()}:${this.offset}`}toIDString(){return`${this.createdAt.toIDString()}:${this.offset}`}}const l1=ln.of(ws,0);class $t{constructor(e,t){l(this,"id");l(this,"relativeOffset");this.id=e,this.relativeOffset=t}static of(e,t){return new $t(e,t)}static fromStruct(e){const t=ln.fromStruct(e.id);return $t.of(t,e.relativeOffset)}getID(){return this.id}getRelativeOffset(){return this.relativeOffset}getAbsoluteID(){return ln.of(this.id.getCreatedAt(),this.id.getOffset()+this.relativeOffset)}toTestString(){return`${this.id.toTestString()}:${this.relativeOffset}`}toStruct(){return{id:this.id.toStruct(),relativeOffset:this.relativeOffset}}equals(e){return this.id.equals(e.id)?this.relativeOffset===e.relativeOffset:!1}}class ei extends dy{constructor(t,r,i){super(r);l(this,"id");l(this,"removedAt");l(this,"prev");l(this,"next");l(this,"insPrev");l(this,"insNext");this.id=t,this.removedAt=i}static create(t,r){return new ei(t,r)}static createComparator(){return(t,r)=>{const i=t.getCreatedAt().compare(r.getCreatedAt());return i!==0?i:t.getOffset()>r.getOffset()?1:t.getOffset()<r.getOffset()?-1:0}}getID(){return this.id}getCreatedAt(){return this.id.getCreatedAt()}getLength(){return this.removedAt?0:this.getContentLength()}getContentLength(){return this.value&&this.value.length||0}getPrev(){return this.prev}getNext(){return this.next}getInsPrev(){return this.insPrev}getInsNext(){return this.insNext}getInsPrevID(){return this.insPrev.getID()}setPrev(t){this.prev=t,t&&(t.next=this)}setNext(t){this.next=t,t&&(t.prev=this)}setInsPrev(t){this.insPrev=t,t&&(t.insNext=this)}setInsNext(t){this.insNext=t,t&&(t.insPrev=this)}hasNext(){return!!this.next}hasInsPrev(){return!!this.insPrev}isRemoved(){return!!this.removedAt}getRemovedAt(){return this.removedAt}split(t){return new ei(this.id.split(t),this.splitValue(t),this.removedAt)}canDelete(t,r){const i=!this.removedAt;return this.getCreatedAt().getLamport()<=r&&(!this.removedAt||t.after(this.removedAt))?i:!1}canStyle(t,r){return this.getCreatedAt().getLamport()<=r&&(!this.removedAt||t.after(this.removedAt))}remove(t){this.removedAt=t}createPosRange(){return[$t.of(this.id,0),$t.of(this.id,this.getLength())]}getDataSize(){const t=this.value.getDataSize();return this.id&&(t.meta+=on),this.removedAt&&(t.meta+=on),t}deepcopy(){return new ei(this.id,this.value,this.removedAt)}toTestString(){return`${this.id.toTestString()} ${this.value?this.value:""}`}splitValue(t){const r=this.value;return this.value=r.substring(0,t),r.substring(t,r.length)}toIDString(){return this.id.toIDString()}}class Is{constructor(){l(this,"head");l(this,"treeByIndex");l(this,"treeByID");this.head=ei.create(l1),this.treeByIndex=new Po,this.treeByID=new ky(ei.createComparator()),this.treeByIndex.insert(this.head),this.treeByID.put(this.head.getID(),this.head)}static create(){return new Is}edit(e,t,r,i){const s={data:0,meta:0},[o,a,u]=this.findNodeWithSplit(e[1],t),[c,d,h]=this.findNodeWithSplit(e[0],t);Re(s,a,d);const g=this.findBetween(h,u),[p,k]=this.deleteNodes(g,t,i),T=u?u.getID():o.getID();let P=$t.of(T,0);if(r){const m=this.posToIndex(c.createPosRange()[1],!0),v=this.insertAfter(c,ei.create(ln.of(t,0),r));Re(s,v.getDataSize()),p.length&&p[p.length-1].from===m?p[p.length-1].value=r:p.push({actor:t.getActorID(),from:m,to:m,value:r}),P=$t.of(v.getID(),v.getContentLength())}const y=[];for(const[,m]of k)y.push({parent:this,child:m});return[P,y,s,p]}indexToPos(e){const[t,r]=this.treeByIndex.find(e),i=t;return $t.of(i.getID(),r)}findIndexesFromRange(e){const[t,r]=e;return[this.posToIndex(t,!1),this.posToIndex(r,!0)]}posToIndex(e,t){const r=e.getAbsoluteID(),i=t?this.findFloorNodePreferToLeft(r):this.findFloorNode(r);if(!i)throw new S(w.ErrInvalidArgument,`the node of the given id should be found: ${r.toTestString()}`);const s=this.treeByIndex.indexOf(i),o=i.isRemoved()?0:r.getOffset()-i.getID().getOffset();return s+o}findNode(e){return this.findFloorNode(e)}get length(){return this.treeByIndex.length}getTreeByIndex(){return this.treeByIndex}getTreeByID(){return this.treeByID}toString(){const e=[];for(const t of this)t.isRemoved()||e.push(t.getValue());return e.join("")}*[Symbol.iterator](){let e=this.head.getNext();for(;e;)yield e,e=e.getNext()}getHead(){return this.head}deepcopy(){const e=new Is;let t=this.head.getNext(),r=e.head,i;for(;t;){if(i=e.insertAfter(r,t.deepcopy()),t.hasInsPrev()){const s=e.findNode(t.getInsPrevID());i.setInsPrev(s)}r=i,t=t.getNext()}return e}toTestString(){const e=[];let t=this.head;for(;t;)t.isRemoved()?e.push(`{${t.toTestString()}}`):e.push(`[${t.toTestString()}]`),t=t.getNext();return e.join("")}insertAfter(e,t){const r=e.getNext();return t.setPrev(e),r&&r.setPrev(t),this.treeByID.put(t.getID(),t),this.treeByIndex.insertAfter(e,t),t}findNodeWithSplit(e,t){const r=e.getAbsoluteID();let i=this.findFloorNodePreferToLeft(r);const s=r.getOffset()-i.getID().getOffset(),[,o]=this.splitNode(i,s);for(;i.hasNext()&&i.getNext().getCreatedAt().after(t);)i=i.getNext();return[i,o,i.getNext()]}findFloorNodePreferToLeft(e){let t=this.findFloorNode(e);if(!t)throw new S(w.ErrInvalidArgument,`the node of the given id should be found: ${e.toTestString()}`);if(e.getOffset()>0&&t.getID().getOffset()==e.getOffset()){if(!t.hasInsPrev())return t;t=t.getInsPrev()}return t}findFloorNode(e){const t=this.treeByID.floorEntry(e);if(t&&!(!t.key.equals(e)&&!t.key.hasSameCreatedAt(e)))return t.value}findBetween(e,t){const r=[];let i=e;for(;i&&i!==t;)r.push(i),i=i.getNext();return r}splitNode(e,t){const r={data:0,meta:0};if(t>e.getContentLength())throw new S(w.ErrInvalidArgument,"offset should be less than or equal to length");if(t===0)return[e,r];if(t===e.getContentLength())return[e.getNext(),r];const i=e.getDataSize(),s=e.split(t);this.treeByIndex.updateWeight(s),this.insertAfter(e,s);const o=e.getInsNext();return o&&o.setInsPrev(s),s.setInsPrev(e),Re(r,e.getDataSize(),s.getDataSize()),ss(r,i),[s,r]}deleteNodes(e,t,r){if(!e.length)return[[],new Map];const[i,s]=this.filterNodes(e,t,r),o=new Map,a=this.makeChanges(s,t);for(const u of i)o.set(u.getID().toIDString(),u),u.remove(t);return this.deleteIndexNodes(s),[a,o]}filterNodes(e,t,r){const i=[],s=[],[o,a]=this.findEdgesOfCandidates(e);s.push(o);for(const u of e){const c=u.getCreatedAt().getActorID();let d=no;r!=null&&(d=r.get(c)?r.get(c):0n),u.canDelete(t,d)?i.push(u):s.push(u)}return s.push(a),[i,s]}findEdgesOfCandidates(e){return[e[0].getPrev(),e[e.length-1].getNext()]}makeChanges(e,t){const r=[];let i,s;for(let o=0;o<e.length-1;o++){const a=e[o],u=e[o+1];a.getNext()!=u&&([i]=this.findIndexesFromRange(a.getNext().createPosRange()),u?[,s]=this.findIndexesFromRange(u.getPrev().createPosRange()):s=this.treeByIndex.length,i<s&&r.push({actor:t.getActorID(),from:i,to:s}))}return r.reverse()}deleteIndexNodes(e){for(let t=0;t<e.length-1;t++){const r=e[t],i=e[t+1];r.getNext()!=i&&this.treeByIndex.deleteRange(r,i)}}purge(e){this.treeByIndex.delete(e),this.treeByID.remove(e.getID());const t=e.getPrev(),r=e.getNext(),i=e.getInsPrev(),s=e.getInsNext();t&&t.setNext(r),r&&r.setPrev(t),e.setPrev(void 0),e.setNext(void 0),i&&i.setInsNext(s),s&&s.setInsPrev(i),e.setInsPrev(void 0),e.setInsNext(void 0)}}const pg=n=>n<0?Math.ceil(n):Math.floor(n);var cn=(n=>(n[n.Int=0]="Int",n[n.Long=1]="Long",n))(cn||{});class it extends Jo{constructor(t,r,i){super(i);l(this,"valueType");l(this,"value");switch(this.valueType=t,t){case 0:typeof r=="number"?r>Math.pow(2,31)-1||r<-Math.pow(2,31)?this.value=K.fromNumber(r).toInt():this.value=pg(r):this.value=r.toInt();break;case 1:typeof r=="number"?this.value=K.fromNumber(r):this.value=r;break;default:throw new S(w.ErrUnimplemented,`unimplemented type: ${t}`)}}static create(t,r,i){return new it(t,r,i)}static valueFromBytes(t,r){switch(t){case 0:return r[0]|r[1]<<8|r[2]<<16|r[3]<<24;case 1:return K.fromBytesLE(Array.from(r));default:throw new S(w.ErrUnimplemented,`unimplemented type: ${t}`)}}getDataSize(){return{data:this.valueType===0?4:8,meta:this.getMetaUsage()}}toJSON(){return`${this.value}`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:this.value,type:"YORKIE_COUNTER"}}deepcopy(){const t=it.create(this.valueType,this.value,this.getCreatedAt());return t.setMovedAt(this.getMovedAt()),t}getType(){return this.valueType}static getCounterType(t){switch(typeof t){case"object":return t instanceof K?1:void 0;case"number":return t>Math.pow(2,31)-1||t<-Math.pow(2,31)?1:0;default:return}}static isSupport(t){return!!it.getCounterType(t)}static isInteger(t){return t%1===0}isNumericType(){const t=this.valueType;return t===0||t===1}getValueType(){return this.valueType}getValue(){return this.value}toBytes(){switch(this.valueType){case 0:{const t=this.value;return new Uint8Array([t&255,t>>8&255,t>>16&255,t>>24&255])}case 1:{const r=this.value.toBytesLE();return Uint8Array.from(r)}default:throw new S(w.ErrUnimplemented,`unimplemented type: ${this.valueType}`)}}increase(t){function r(i){if(!i.isNumericType())throw new TypeError(`Unsupported type of value: ${typeof i.getValue()}`)}return r(this),r(t),this.valueType===1?this.value=this.value.add(t.getValue()):t.getType()===ve.Long?this.value=this.value+t.getValue().toInt():this.value=K.fromNumber(this.value+pg(t.getValue())).toInt(),this}}class Es extends jt{constructor(t,r,i){super(t,i);l(this,"value");this.value=r}static create(t,r,i){return new Es(t,r,i)}execute(t){const r=t.findByCreatedAt(this.getParentCreatedAt());if(!r)throw new S(w.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(r instanceof it))throw new S(w.ErrInvalidArgument,"fail to execute, only Counter can execute increase");const i=r,s=this.value.deepcopy();return i.increase(s),{opInfos:[{type:"increase",path:t.createPath(this.getParentCreatedAt()),value:s.getValue()}],reverseOp:this.toReverseOperation()}}toReverseOperation(){const t=this.value.deepcopy(),i=t.getType()===ve.Long?t.getValue().multiply(-1):t.getValue()*-1;return Es.create(this.getParentCreatedAt(),ce.of(i,t.getCreatedAt()))}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.INCREASE.${this.value.toJSON()}`}getValue(){return this.value}}class Tr extends jt{constructor(t,r,i,s,o,a){super(t,a);l(this,"fromPos");l(this,"toPos");l(this,"attributes");l(this,"attributesToRemove");this.fromPos=r,this.toPos=i,this.attributes=s,this.attributesToRemove=o}static create(t,r,i,s,o){return new Tr(t,r,i,s,[],o)}static createTreeRemoveStyleOperation(t,r,i,s,o){return new Tr(t,r,i,new Map,s,o)}execute(t,r,i){const s=t.findByCreatedAt(this.getParentCreatedAt());if(!s)throw new S(w.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(s instanceof Pt))throw new S(w.ErrInvalidArgument,"fail to execute, only Tree can execute edit");const o=s;let a,u,c={data:0,meta:0};if(this.attributes.size){const d={};[...this.attributes].forEach(([h,g])=>d[h]=g),[u,a,c]=o.style([this.fromPos,this.toPos],d,this.getExecutedAt(),i)}else{const d=this.attributesToRemove;[u,a,c]=o.removeStyle([this.fromPos,this.toPos],d,this.getExecutedAt(),i)}t.acc(c);for(const d of u)t.registerGCPair(d);return{opInfos:a.map(({from:d,to:h,value:g,fromPath:p,toPath:k})=>({type:"tree-style",from:d,to:h,value:this.attributes.size?{attributes:g}:{attributesToRemove:g},fromPath:p,toPath:k,path:t.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const t=this.getParentCreatedAt().toTestString(),r=`${this.fromPos.getLeftSiblingID().getCreatedAt().toTestString()}:${this.fromPos.getLeftSiblingID().getOffset()}`,i=`${this.toPos.getLeftSiblingID().getCreatedAt().toTestString()}:${this.toPos.getLeftSiblingID().getOffset()}`;return`${t}.STYLE(${r},${i},${Object.entries(this.attributes||{}).map(([s,o])=>`${s}:"${o}"`).join(" ")})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getAttributes(){return this.attributes}getAttributesToRemove(){return this.attributesToRemove}}function u1(n){const e=new nd,t=e.data;for(const[r,i]of Object.entries(n))t[r]=JSON.stringify(i);return e}function c1(n){if(n.type===un.Put)return new xo({type:Di.PUT,presence:u1(n.presence)});if(n.type===un.Clear)return new xo({type:Di.CLEAR});throw new S(w.ErrUnimplemented,"unimplemented type")}function f1(n){return new cy({serverSeq:n.getServerSeq(),clientSeq:n.getClientSeq()})}function Ey(n){return new Vl({clientSeq:n.getClientSeq(),lamport:n.getLamport(),actorId:pd(n.getActorID()),versionVector:od(n.getVersionVector())})}function F(n){if(n)return new b({lamport:n.getLamport(),delimiter:n.getDelimiter(),actorId:pd(n.getActorID())})}function od(n){if(!n)return;const e=new ql;for(const[t,r]of n)e.vector[t]=BigInt(r.toString());return e}function Ay(n){switch(n){case ve.Null:return U.NULL;case ve.Boolean:return U.BOOLEAN;case ve.Integer:return U.INTEGER;case ve.Long:return U.LONG;case ve.Double:return U.DOUBLE;case ve.String:return U.STRING;case ve.Bytes:return U.BYTES;case ve.Date:return U.DATE;default:throw new S(w.ErrInvalidType,`unsupported type: ${n}`)}}function xy(n){switch(n){case cn.Int:return U.INTEGER_CNT;case cn.Long:return U.LONG_CNT;default:throw new S(w.ErrInvalidType,`unsupported type: ${n}`)}}function Nu(n){if(n instanceof Ye)return new ct({type:U.JSON_OBJECT,createdAt:F(n.getCreatedAt()),value:My(n)});if(n instanceof rt)return new ct({type:U.JSON_ARRAY,createdAt:F(n.getCreatedAt()),value:j1(n)});if(n instanceof Nt)return new ct({type:U.TEXT,createdAt:F(n.getCreatedAt())});if(n instanceof ce)return new ct({type:Ay(n.getType()),createdAt:F(n.getCreatedAt()),value:n.toBytes()});if(n instanceof it)return new ct({type:xy(n.getType()),createdAt:F(n.getCreatedAt()),value:n.toBytes()});if(n instanceof Pt)return new ct({type:U.TREE,createdAt:F(n.getCreatedAt()),value:q1(n)});throw new S(w.ErrUnimplemented,"unimplemented element")}function d1(n){return new Eo({createdAt:F(n.getCreatedAt()),offset:n.getOffset()})}function ua(n){return new Nr({createdAt:F(n.getID().getCreatedAt()),offset:n.getID().getOffset(),relativeOffset:n.getRelativeOffset()})}function ca(n){return new Ci({parentId:ro(n.getParentID()),leftSiblingId:ro(n.getLeftSiblingID())})}function ro(n){return new Xr({createdAt:F(n.getCreatedAt()),offset:n.getOffset()})}function Ny(n){const e=new td;if(n instanceof Oi){const t=n,r=new il;r.parentCreatedAt=F(t.getParentCreatedAt()),r.key=t.getKey(),r.value=Nu(t.getValue()),r.executedAt=F(t.getExecutedAt()),e.body.case="set",e.body.value=r}else if(n instanceof Mo){const t=n,r=new sl;r.parentCreatedAt=F(t.getParentCreatedAt()),r.prevCreatedAt=F(t.getPrevCreatedAt()),r.value=Nu(t.getValue()),r.executedAt=F(t.getExecutedAt()),e.body.case="add",e.body.value=r}else if(n instanceof jr){const t=n,r=new ol;r.parentCreatedAt=F(t.getParentCreatedAt()),r.prevCreatedAt=F(t.getPrevCreatedAt()),r.createdAt=F(t.getCreatedAt()),r.executedAt=F(t.getExecutedAt()),e.body.case="move",e.body.value=r}else if(n instanceof ii){const t=n,r=new al;r.parentCreatedAt=F(t.getParentCreatedAt()),r.createdAt=F(t.getCreatedAt()),r.executedAt=F(t.getExecutedAt()),e.body.case="remove",e.body.value=r}else if(n instanceof $o){const t=n,r=new ll;r.parentCreatedAt=F(t.getParentCreatedAt()),r.from=ua(t.getFromPos()),r.to=ua(t.getToPos()),r.content=t.getContent();const i=r.attributes;for(const[s,o]of t.getAttributes())i[s]=o;r.executedAt=F(t.getExecutedAt()),e.body.case="edit",e.body.value=r}else if(n instanceof Uo){const t=n,r=new ul;r.parentCreatedAt=F(t.getParentCreatedAt()),r.from=ua(t.getFromPos()),r.to=ua(t.getToPos());const i=r.attributes;for(const[s,o]of t.getAttributes())i[s]=o;r.executedAt=F(t.getExecutedAt()),e.body.case="style",e.body.value=r}else if(n instanceof Es){const t=n,r=new cl;r.parentCreatedAt=F(t.getParentCreatedAt()),r.value=Nu(t.getValue()),r.executedAt=F(t.getExecutedAt()),e.body.case="increase",e.body.value=r}else if(n instanceof jo){const t=n,r=new fl;r.parentCreatedAt=F(t.getParentCreatedAt()),r.from=ca(t.getFromPos()),r.to=ca(t.getToPos()),r.contents=w1(t.getContents()),r.splitLevel=t.getSplitLevel(),r.executedAt=F(t.getExecutedAt()),e.body.case="treeEdit",e.body.value=r}else if(n instanceof Tr){const t=n,r=new dl;r.parentCreatedAt=F(t.getParentCreatedAt()),r.from=ca(t.getFromPos()),r.to=ca(t.getToPos());const i=t.getAttributesToRemove();if(i.length>0)r.attributesToRemove=i;else{const s=r.attributes;for(const[o,a]of t.getAttributes())s[o]=a}r.executedAt=F(t.getExecutedAt()),e.body.case="treeStyle",e.body.value=r}else throw new S(w.ErrUnimplemented,"unimplemented operation");return e}function h1(n){const e=[];for(const t of n)e.push(Ny(t));return e}function g1(n){const e=new ly({id:Ey(n.getID()),message:n.getMessage()});return n.hasOperations()&&(e.operations=h1(n.getOperations())),n.hasPresenceChange()&&(e.presenceChange=c1(n.getPresenceChange())),e}function m1(n){const e=[];for(const t of n)e.push(g1(t));return e}function p1(n){const e=[];for(const t of n)e.push(new uy({key:t.getStrKey(),element:ld(t.getValue())}));return e}function y1(n){const e=[];for(const t of n)e.push(new wl({element:ld(t.getValue())}));return e}function v1(n){const e=[];for(const t of n){const r=new Sl;r.id=d1(t.getID()),r.value=t.getValue().getContent(),r.removedAt=F(t.getRemovedAt());const i=r.attributes,s=t.getValue().getAttrs();for(const o of s){const a=new vs;a.value=o.getValue(),a.updatedAt=F(o.getUpdatedAt()),i[o.getKey()]=a}e.push(r)}return e}function w1(n){const e=[];if(!n||!n.length)return e;for(const t of n)e.push(new kl({content:ad(t)}));return e}function S1(n){const e={};for(const t of n)e[t.getKey()]=new vs({value:t.getValue(),updatedAt:F(t.getUpdatedAt()),isRemoved:t.isRemoved()});return e}function ad(n){if(!n)return[];const e=[];return Wl(n,(t,r)=>{const i=new Ao({id:ro(t.id),type:t.type,removedAt:F(t.removedAt),depth:r});t.isText&&(i.value=t.value),t.insPrevID&&(i.insPrevId=ro(t.insPrevID)),t.insNextID&&(i.insNextId=ro(t.insNextID)),t.attrs&&(i.attributes=S1(t.attrs)),e.push(i)}),e}function k1(n){const e=new Qe;return e.body.case="jsonObject",e.body.value=new hl({nodes:p1(n.getRHT()),createdAt:F(n.getCreatedAt()),movedAt:F(n.getMovedAt()),removedAt:F(n.getRemovedAt())}),e}function Py(n){const e=new Qe;return e.body.case="jsonArray",e.body.value=new gl({nodes:y1(n.getElements()),createdAt:F(n.getCreatedAt()),movedAt:F(n.getMovedAt()),removedAt:F(n.getRemovedAt())}),e}function T1(n){const e=new Qe;return e.body.case="primitive",e.body.value=new ml({type:Ay(n.getType()),value:n.toBytes(),createdAt:F(n.getCreatedAt()),movedAt:F(n.getMovedAt()),removedAt:F(n.getRemovedAt())}),e}function I1(n){const e=new Qe;return e.body.case="text",e.body.value=new pl({nodes:v1(n.getRGATreeSplit()),createdAt:F(n.getCreatedAt()),movedAt:F(n.getMovedAt()),removedAt:F(n.getRemovedAt())}),e}function E1(n){const e=new Qe;return e.body.case="counter",e.body.value=new yl({type:xy(n.getType()),value:n.toBytes(),createdAt:F(n.getCreatedAt()),movedAt:F(n.getMovedAt()),removedAt:F(n.getRemovedAt())}),e}function Cy(n){const e=new Qe;return e.body.case="tree",e.body.value=new vl({nodes:ad(n.getRoot()),createdAt:F(n.getCreatedAt()),movedAt:F(n.getMovedAt()),removedAt:F(n.getRemovedAt())}),e}function ld(n){if(n instanceof Ye)return k1(n);if(n instanceof rt)return Py(n);if(n instanceof ce)return T1(n);if(n instanceof Nt)return I1(n);if(n instanceof it)return E1(n);if(n instanceof Pt)return Cy(n);throw new S(w.ErrUnimplemented,"unimplemented element")}function A1(n){return new Dr({documentKey:n.getDocumentKey(),checkpoint:f1(n.getCheckpoint()),isRemoved:n.getIsRemoved(),changes:m1(n.getChanges()),snapshot:n.getSnapshot(),versionVector:od(n.getVersionVector())})}function qs(n){if(!(n instanceof G))return{};const e=n.findDetails(jS);for(const t of e)return t.metadata;return{}}function Lr(n){return qs(n).code??""}function Dy(n){return Lt.of(n.clientSeq,BigInt(n.lamport),gd(n.actorId),ud(n.versionVector),BigInt(n.serverSeq))}function ud(n){if(!n)return;const e=new os;return Object.entries(n.vector).forEach(([t,r])=>{e.set(t,BigInt(r.toString()))}),e}function J(n){if(n)return Et.of(BigInt(n.lamport),n.delimiter,gd(n.actorId))}function cd(n){const e={};return Object.entries(n.data).forEach(([t,r])=>{e[t]=JSON.parse(r)}),e}function x1(n){const e=n.type;if(e===Di.PUT){const t=cd(n.presence);return{type:un.Put,presence:t}}if(e===Di.CLEAR)return{type:un.Clear};throw new S(w.ErrInvalidType,`unsupported type: ${e}`)}function N1(n){const e=new Map;return Object.entries(n).forEach(([t,r])=>{e.set(t,cd(r))}),e}function Oy(n){switch(n){case U.NULL:return ve.Null;case U.BOOLEAN:return ve.Boolean;case U.INTEGER:return ve.Integer;case U.LONG:return ve.Long;case U.DOUBLE:return ve.Double;case U.STRING:return ve.String;case U.BYTES:return ve.Bytes;case U.DATE:return ve.Date}throw new S(w.ErrUnimplemented,`unimplemented value type: ${n}`)}function El(n){switch(n){case U.INTEGER_CNT:return cn.Int;case U.LONG_CNT:return cn.Long}throw new S(w.ErrUnimplemented,`unimplemented value type: ${n}`)}function Pu(n){switch(n.type){case U.JSON_OBJECT:return n.value?Jy(n.value):Ye.create(J(n.createdAt));case U.JSON_ARRAY:return n.value?U1(n.value):rt.create(J(n.createdAt));case U.TEXT:return Nt.create(Is.create(),J(n.createdAt));case U.TREE:return V1(n.value);case U.NULL:case U.BOOLEAN:case U.INTEGER:case U.LONG:case U.DOUBLE:case U.STRING:case U.BYTES:case U.DATE:return ce.of(ce.valueFromBytes(Oy(n.type),n.value),J(n.createdAt));case U.INTEGER_CNT:case U.LONG_CNT:return it.create(El(n.type),it.valueFromBytes(El(n.type),n.value),J(n.createdAt))}}function fa(n){return $t.of(ln.of(J(n.createdAt),n.offset),n.relativeOffset)}function Ry(n){return ln.of(J(n.createdAt),n.offset)}function P1(n){const e=Do.create(n.value);Object.entries(n.attributes).forEach(([r,i])=>{e.setAttr(r,i.value,J(i.updatedAt))});const t=ei.create(Ry(n.id),e);return t.remove(J(n.removedAt)),t}function Fi(n){return Ft.of(io(n.parentId),io(n.leftSiblingId))}function io(n){return xe.of(J(n.createdAt),n.offset)}function C1(n){if(!n.length)return;const e=[];return n.forEach(t=>{const r=fd(t.content);e.push(r)}),e}function fd(n){if(n.length===0)return;const e=[];for(const i of n)e.push(O1(i));const t=e[e.length-1],r=new Map;r.set(n[e.length-1].depth,e[e.length-1]);for(let i=e.length-2;i>=0;i--)r.get(n[i].depth-1).prepend(e[i]),r.set(n[i].depth,e[i]);return t.updateDescendantsSize(),Pt.create(t,ws).getRoot()}function D1(n){const e=Pr.create();for(const[t,r]of Object.entries(n))e.setInternal(t,r.value,J(r.updatedAt),r.isRemoved);return e}function O1(n){const e=io(n.id),t=tt.create(e,n.type),r=Object.entries(n.attributes);return t.isText?t.value=n.value:r.length&&(t.attrs=D1(n.attributes)),n.insPrevId&&(t.insPrevID=io(n.insPrevId)),n.insNextId&&(t.insNextID=io(n.insNextId)),t.removedAt=J(n.removedAt),t}function Ly(n){if(n.body.case==="set"){const e=n.body.value;return Oi.create(e.key,Pu(e.value),J(e.parentCreatedAt),J(e.executedAt))}else if(n.body.case==="add"){const e=n.body.value;return Mo.create(J(e.parentCreatedAt),J(e.prevCreatedAt),Pu(e.value),J(e.executedAt))}else if(n.body.case==="move"){const e=n.body.value;return jr.create(J(e.parentCreatedAt),J(e.prevCreatedAt),J(e.createdAt),J(e.executedAt))}else if(n.body.case==="remove"){const e=n.body.value;return ii.create(J(e.parentCreatedAt),J(e.createdAt),J(e.executedAt))}else if(n.body.case==="edit"){const e=n.body.value,t=new Map;return Object.entries(e.attributes).forEach(([r,i])=>{t.set(r,i)}),$o.create(J(e.parentCreatedAt),fa(e.from),fa(e.to),e.content,t,J(e.executedAt))}else if(n.body.case==="style"){const e=n.body.value,t=new Map;return Object.entries(e.attributes).forEach(([r,i])=>{t.set(r,i)}),Uo.create(J(e.parentCreatedAt),fa(e.from),fa(e.to),t,J(e.executedAt))}else{if(n.body.case==="select")return;if(n.body.case==="increase"){const e=n.body.value;return Es.create(J(e.parentCreatedAt),Pu(e.value),J(e.executedAt))}else if(n.body.case==="treeEdit"){const e=n.body.value;return jo.create(J(e.parentCreatedAt),Fi(e.from),Fi(e.to),C1(e.contents),e.splitLevel,J(e.executedAt))}else if(n.body.case==="treeStyle"){const e=n.body.value,t=new Map,r=e.attributesToRemove;return(r==null?void 0:r.length)>0?Tr.createTreeRemoveStyleOperation(J(e.parentCreatedAt),Fi(e.from),Fi(e.to),r,J(e.executedAt)):(Object.entries(e.attributes).forEach(([i,s])=>{t.set(i,s)}),Tr.create(J(e.parentCreatedAt),Fi(e.from),Fi(e.to),t,J(e.executedAt)))}else throw new S(w.ErrUnimplemented,"unimplemented operation")}}function R1(n){const e=[];for(const t of n){const r=Ly(t);r&&e.push(r)}return e}function By(n){const e=[];for(const t of n)e.push(Ts.create({id:Dy(t.id),operations:R1(t.operations),presenceChange:t.presenceChange?x1(t.presenceChange):void 0,message:t.message}));return e}function L1(n){return as.of(BigInt(n.serverSeq),n.clientSeq)}function B1(n){return _l.create(n.documentKey,L1(n.checkpoint),n.isRemoved,By(n.changes),ud(n.versionVector),n.snapshot)}function by(n){const e=new No;for(const r of n.nodes){const i=dd(r.element);e.set(r.key,i,i.getPositionedAt())}const t=new Ye(J(n.createdAt),e);return t.setMovedAt(J(n.movedAt)),t.setRemovedAt(J(n.removedAt)),t}function zy(n){const e=new Co;for(const r of n.nodes)e.insert(dd(r.element));const t=new rt(J(n.createdAt),e);return t.setMovedAt(J(n.movedAt)),t.setRemovedAt(J(n.removedAt)),t}function b1(n){const e=ce.of(ce.valueFromBytes(Oy(n.type),n.value),J(n.createdAt));return e.setMovedAt(J(n.movedAt)),e.setRemovedAt(J(n.removedAt)),e}function z1(n){const e=new Is;let t=e.getHead();for(const i of n.nodes){const s=e.insertAfter(t,P1(i));i.insPrevId&&s.setInsPrev(e.findNode(Ry(i.insPrevId))),t=s}const r=new Nt(e,J(n.createdAt));return r.setMovedAt(J(n.movedAt)),r.setRemovedAt(J(n.removedAt)),r}function F1(n){const e=it.create(El(n.type),it.valueFromBytes(El(n.type),n.value),J(n.createdAt));return e.setMovedAt(J(n.movedAt)),e.setRemovedAt(J(n.removedAt)),e}function Fy(n){const e=fd(n.nodes);return Pt.create(e,J(n.createdAt))}function dd(n){if(n.body.case==="jsonObject")return by(n.body.value);if(n.body.case==="jsonArray")return zy(n.body.value);if(n.body.case==="primitive")return b1(n.body.value);if(n.body.case==="text")return z1(n.body.value);if(n.body.case==="counter")return F1(n.body.value);if(n.body.case==="tree")return Fy(n.body.value);throw new S(w.ErrUnimplemented,"unimplemented element")}function J1(n){if(!n)return{root:Ye.create(ws),presences:new Map};const e=Nc.fromBinary(n);return{root:dd(e.root),presences:N1(e.presences)}}function M1(n){const e=od(n);return hd(e.toBinary())}function $1(n){const e=md(n),t=ql.fromBinary(e);return ud(t)}function Jy(n){if(!n)throw new S(w.ErrInvalidArgument,"bytes is empty");const e=Qe.fromBinary(n);return by(e.body.value)}function My(n){return ld(n).toBinary()}function U1(n){if(!n)throw new S(w.ErrInvalidArgument,"bytes is empty");const e=Qe.fromBinary(n);return zy(e.body.value)}function j1(n){return Py(n).toBinary()}function V1(n){if(!n)throw new S(w.ErrInvalidArgument,"bytes is empty");const e=Qe.fromBinary(n);return Fy(e.body.value)}function q1(n){return Cy(n).toBinary()}function hd(n){return n?Array.from(n).map(e=>e.toString(16).padStart(2,"0")).join(""):""}function gd(n){return hd(n)}function md(n){return new Uint8Array(n.match(/.{1,2}/g).map(e=>parseInt(e,16)))}function pd(n){return md(n)}function K1(n){const e=Vl.fromBinary(n);return Dy(e)}function W1(n){const e=td.fromBinary(n);return Ly(e)}const he={fromPresence:cd,toChangePack:A1,fromChangePack:B1,fromChanges:By,toTreeNodes:ad,fromTreeNodes:fd,objectToBytes:My,bytesToObject:Jy,bytesToSnapshot:J1,bytesToHex:hd,hexToBytes:md,toHexString:gd,toUint8Array:pd,toOperation:Ny,toChangeID:Ey,PbChangeID:Vl,bytesToChangeID:K1,bytesToOperation:W1,versionVectorToHex:M1,hexToVersionVector:$1};var je=(n=>(n[n.Trivial=0]="Trivial",n[n.Debug=1]="Debug",n[n.Info=2]="Info",n[n.Warn=3]="Warn",n[n.Error=4]="Error",n[n.Fatal=5]="Fatal",n))(je||{});let gi=3;function _1(n){gi=n}const z={trivial:(...n)=>{gi>0||typeof console<"u"&&console.log("YORKIE T:",...n)},debug:(...n)=>{gi>1||typeof console<"u"&&console.log("YORKIE D:",...n)},info:(...n)=>{gi>2||typeof console<"u"&&console.log("YORKIE I:",...n)},warn:(...n)=>{gi>3||typeof console<"u"&&(typeof console.warn<"u"?console.warn("YORKIE W:",...n):console.log("YORKIE W:",...n))},error:(...n)=>{gi>4||typeof console<"u"&&(typeof console.error<"u"?console.error("YORKIE E:",...n):console.log("YORKIE E:",...n))},fatal:(...n)=>{typeof console<"u"&&(typeof console.error<"u"?console.error("YORKIE F:",...n):console.log("YORKIE F:",...n))},isEnabled:n=>gi<=n};function $y(){return"xxxxxxxx-xxxx-4xxxy-xxxx-xxxxxxxxxxx".replace(/[xy]/g,n=>{const e=Math.random()*16|0;return(n==="x"?e:e&3|8).toString(16)})}class H1{constructor(e,t,r,i,s){l(this,"reconnectStreamDelay");l(this,"doc");l(this,"docID");l(this,"syncMode");l(this,"remoteChangeEventReceived");l(this,"watchStream");l(this,"watchLoopTimerID");l(this,"watchAbortController");l(this,"unsubscribeBroadcastEvent");this.reconnectStreamDelay=e,this.doc=t,this.docID=r,this.syncMode=i,this.remoteChangeEventReceived=!1,this.unsubscribeBroadcastEvent=s}changeSyncMode(e){this.syncMode=e}needRealtimeSync(){return this.syncMode===Oa.RealtimeSyncOff?!1:this.syncMode===Oa.RealtimePushOnly?this.doc.hasLocalChanges():this.syncMode!==Oa.Manual&&(this.doc.hasLocalChanges()||this.remoteChangeEventReceived)}async runWatchLoop(e){const t=async()=>{if(this.watchStream)return Promise.resolve();this.watchLoopTimerID&&(clearTimeout(this.watchLoopTimerID),this.watchLoopTimerID=void 0);try{[this.watchStream,this.watchAbortController]=await e(()=>{this.watchStream=void 0,this.watchAbortController=void 0,this.watchLoopTimerID=setTimeout(t,this.reconnectStreamDelay)})}catch{}};await t()}cancelWatchStream(){this.watchStream&&this.watchAbortController&&(this.watchAbortController.abort(),this.watchStream=void 0,this.watchAbortController=void 0),clearTimeout(this.watchLoopTimerID),this.watchLoopTimerID=void 0}}const Cu=()=>{};class G1{constructor(e){l(this,"finalized",!1);l(this,"observers",[]);l(this,"finalError");try{e(this)}catch(t){this.error(t)}}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(!e)throw new S(w.ErrInvalidArgument,"missing observer");if(this.finalized)throw new S(w.ErrRefused,"observable is finalized due to previous error");typeof e=="object"?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Cu),i.error===void 0&&(i.error=Cu),i.complete===void 0&&(i.complete=Cu);const s=$y(),o=this.unsubscribeOne.bind(this,s);if(this.observers.push({subscriptionID:s,observer:i}),this.finalized)try{this.finalError?i.error(this.finalError):i.complete()}catch(a){z.warn(a)}return o}unsubscribeOne(e){var t;this.observers=(t=this.observers)==null?void 0:t.filter(r=>r.subscriptionID!==e)}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e].observer)}catch(r){z.error(r)}}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.observers=void 0)}}function Y1(n){const e=new G1(n);return{subscribe:e.subscribe.bind(e),getProxy:()=>e}}class Xi{constructor(e,t,r,i){l(this,"prevID");l(this,"nextID");l(this,"delimiter");l(this,"message");l(this,"root");l(this,"operations");l(this,"presenceChange");l(this,"previousPresence");l(this,"reversePresenceKeys");this.prevID=e,this.nextID=e.next(),this.delimiter=fy,this.root=t,this.operations=[],this.previousPresence=Rt(r),this.presenceChange=void 0,this.reversePresenceKeys=new Set,this.message=i}static create(e,t,r,i){return new Xi(e,t,r,i)}push(e){this.operations.push(e)}registerElement(e,t){this.root.registerElement(e,t)}registerRemovedElement(e){this.root.registerRemovedElement(e)}registerGCPair(e){this.root.registerGCPair(e)}getNextID(){return this.isPresenceOnlyChange()?this.prevID.next(!0).setLamport(this.prevID.getLamport()).setVersionVector(this.prevID.getVersionVector()):this.nextID}toChange(){const e=this.isPresenceOnlyChange()?this.prevID.next(!0):this.nextID;return Ts.create({id:e,operations:this.operations,presenceChange:this.presenceChange,message:this.message})}isPresenceOnlyChange(){return this.operations.length===0}hasChange(){return this.operations.length>0||this.presenceChange!==void 0}setPresenceChange(e){this.presenceChange=e}setReversePresence(e,t){for(const r of Object.keys(e))t!=null&&t.addToHistory?this.reversePresenceKeys.add(r):this.reversePresenceKeys.delete(r)}getReversePresence(){if(this.reversePresenceKeys.size===0)return;const e={};for(const t of this.reversePresenceKeys)e[t]=this.previousPresence[t];return e}issueTimeTicket(){return this.delimiter+=1,this.nextID.createTimeTicket(this.delimiter)}getLastTimeTicket(){return this.nextID.createTimeTicket(this.delimiter)}acc(e){this.root.acc(e)}}class Oo{constructor(e){l(this,"rootObject");l(this,"elementPairMapByCreatedAt");l(this,"gcElementSetByCreatedAt");l(this,"gcPairMap");l(this,"docSize");this.rootObject=e,this.elementPairMapByCreatedAt=new Map,this.gcElementSetByCreatedAt=new Set,this.gcPairMap=new Map,this.docSize={live:{data:0,meta:0},gc:{data:0,meta:0}},this.registerElement(e,void 0),e.getDescendants(t=>{if(t.getRemovedAt()&&this.registerRemovedElement(t),t instanceof Nt||t instanceof Pt)for(const r of t.getGCPairs())this.registerGCPair(r);return!1})}static create(){return new Oo(Ye.create(ws))}findByCreatedAt(e){const t=this.elementPairMapByCreatedAt.get(e.toIDString());if(t)return t.element}findElementPairByCreatedAt(e){return this.elementPairMapByCreatedAt.get(e.toIDString())}createSubPaths(e){let t=this.elementPairMapByCreatedAt.get(e.toIDString());if(!t)return[];const r=[];for(;t.parent;){const i=t.element.getCreatedAt(),s=t.parent.subPathOf(i);if(s===void 0)throw new S(w.ErrInvalidArgument,`cant find the given element: ${i.toIDString()}`);r.unshift(s),t=this.elementPairMapByCreatedAt.get(t.parent.getCreatedAt().toIDString())}return r.unshift("$"),r}createPath(e){return this.createSubPaths(e).join(".")}registerElement(e,t){this.elementPairMapByCreatedAt.set(e.getCreatedAt().toIDString(),{parent:t,element:e}),Re(this.docSize.live,e.getDataSize()),e instanceof Zr&&e.getDescendants((r,i)=>(this.registerElement(r,i),!1))}deregisterElement(e){let t=0;const r=i=>{const s=i.getCreatedAt().toIDString();ss(this.docSize.gc,i.getDataSize()),this.elementPairMapByCreatedAt.delete(s),this.gcElementSetByCreatedAt.delete(s),t++};return r(e),e instanceof Zr&&e.getDescendants(i=>(r(i),!1)),t}registerRemovedElement(e){Re(this.docSize.gc,e.getDataSize()),ss(this.docSize.live,e.getDataSize()),this.docSize.live.meta+=on,this.gcElementSetByCreatedAt.add(e.getCreatedAt().toIDString())}registerGCPair(e){if(this.gcPairMap.get(e.child.toIDString())){this.gcPairMap.delete(e.child.toIDString());return}this.gcPairMap.set(e.child.toIDString(),e);const r=this.gcPairMap.get(e.child.toIDString()).child.getDataSize();Re(this.docSize.gc,r),ss(this.docSize.live,r),e.child instanceof Vr||(this.docSize.live.meta+=on)}getElementMapSize(){return this.elementPairMapByCreatedAt.size}getGarbageElementSetSize(){const e=new Set;for(const t of this.gcElementSetByCreatedAt){e.add(t);const r=this.elementPairMapByCreatedAt.get(t);r.element instanceof Zr&&r.element.getDescendants(i=>(e.add(i.getCreatedAt().toIDString()),!1))}return e.size}getObject(){return this.rootObject}getGarbageLen(){return this.getGarbageElementSetSize()+this.gcPairMap.size}getDocSize(){return this.docSize}deepcopy(){return new Oo(this.rootObject.deepcopy())}garbageCollect(e){let t=0;for(const r of this.gcElementSetByCreatedAt){const i=this.elementPairMapByCreatedAt.get(r),s=i.element.getRemovedAt();s&&(e!=null&&e.afterOrEqual(s))&&(i.parent.purge(i.element),t+=this.deregisterElement(i.element))}for(const[,r]of this.gcPairMap){const i=r.child.getRemovedAt();i&&(e!=null&&e.afterOrEqual(i))&&(r.parent.purge(r.child),this.gcPairMap.delete(r.child.toIDString()),t+=1)}return t}toJSON(){return this.rootObject.toJSON()}toSortedJSON(){return this.rootObject.toSortedJSON()}getStats(){return{elements:this.getElementMapSize(),gcPairs:this.gcPairMap.size,gcElements:this.getGarbageElementSetSize()}}acc(e){Re(this.docSize.live,e)}}function Uy(n,e){const t=new Ro(n);return new Proxy(e,t.getHandlers())}class Ro{constructor(e){l(this,"context");l(this,"handlers");this.context=e,this.handlers={set:(t,r,i)=>(z.isEnabled(je.Trivial)&&z.trivial(`obj[${r}]=${JSON.stringify(i)}`),Ro.setInternal(e,t,r,i),!0),get:(t,r)=>(z.isEnabled(je.Trivial)&&z.trivial(`obj[${r}]`),r==="getID"?()=>t.getCreatedAt():r==="toJSON"||r==="toString"?()=>t.toJSON():r==="toJS"?()=>t.toJS():r==="toJSForTest"?()=>t.toJSForTest():mi(e,t.get(r))),ownKeys:t=>t.getKeys(),getOwnPropertyDescriptor:()=>({enumerable:!0,configurable:!0}),deleteProperty:(t,r)=>(z.isEnabled(je.Trivial)&&z.trivial(`obj[${r}]`),Ro.deleteInternal(e,t,r),!0)}}static setInternal(e,t,r,i){if(r.includes("."))throw new S(w.ErrInvalidObjectKey,"key must not contain the '.'.");const s=e.issueTimeTicket(),o=Al(e,i,s),a=t.set(r,o,s);e.registerElement(o,t),a&&e.registerRemovedElement(a),e.push(Oi.create(r,o.deepcopy(),t.getCreatedAt(),s))}static buildObjectMembers(e,t){const r={};for(const[i,s]of Object.entries(t)){if(i.includes("."))throw new S(w.ErrInvalidObjectKey,"key must not contain the '.'.");const o=e.issueTimeTicket(),a=Al(e,s,o);r[i]=a}return r}static deleteInternal(e,t,r){const i=e.issueTimeTicket(),s=t.deleteByKey(r,i);s&&(e.push(ii.create(t.getCreatedAt(),s.getCreatedAt(),i)),e.registerRemovedElement(s))}getHandlers(){return this.handlers}}function Q1(n,e){const t=new oe(n,e);return new Proxy(e,t.getHandlers())}function X1(n){return typeof n=="string"||n instanceof String?!isNaN(n):!1}function Z1(n){return["concat","entries","every","filter","find","findIndex","forEach","join","keys","map","reduce","reduceRight","slice","some","toLocaleString","toString","values"].includes(n)}class oe{constructor(e,t){l(this,"context");l(this,"handlers");l(this,"array");this.context=e,this.array=t,this.handlers={get:(r,i,s)=>i==="getID"?()=>r.getCreatedAt():i==="getElementByID"?o=>{const a=r.getByID(o);if(!(!a||a.isRemoved()))return Br(e,a)}:i==="getElementByIndex"?o=>{const a=r.get(o);return Br(e,a)}:i==="getLast"?()=>Br(e,r.getLast()):i==="deleteByID"?o=>{const a=oe.deleteInternalByID(e,r,o);return Br(e,a)}:i==="insertAfter"?(o,a)=>{const u=oe.insertAfterInternal(e,r,o,a);return Br(e,u)}:i==="insertBefore"?(o,a)=>{const u=oe.insertBeforeInternal(e,r,o,a);return Br(e,u)}:i==="moveBefore"?(o,a)=>{oe.moveBeforeInternal(e,r,o,a)}:i==="moveAfter"?(o,a)=>{oe.moveAfterInternal(e,r,o,a)}:i==="moveFront"?o=>{oe.moveFrontInternal(e,r,o)}:i==="moveLast"?o=>{oe.moveLastInternal(e,r,o)}:X1(i)?mi(e,r.get(Number(i))):i==="push"?o=>oe.pushInternal(e,r,o):i==="splice"?(o,a,...u)=>oe.splice(e,r,o,a,...u):i==="length"?r.length:typeof i=="symbol"&&i===Symbol.iterator?oe.iteratorInternal.bind(this,e,r):i==="includes"?(o,a)=>oe.includes(e,r,o,a):i==="indexOf"?(o,a)=>oe.indexOf(e,r,o,a):i==="lastIndexOf"?(o,a)=>oe.lastIndexOf(e,r,o,a):i==="toJSForTest"?()=>r.toJSForTest():i==="toTestString"?()=>oe.toTestString(r):typeof i=="string"&&Z1(i)?(...o)=>{const a=Array.from(r).map(u=>mi(e,u));return Array.prototype[i].apply(a,o)}:Reflect.get(r,i,s),deleteProperty:(r,i)=>(z.isEnabled(je.Trivial)&&z.trivial(`array[${i}]`),oe.deleteInternalByIndex(e,r,Number.parseInt(i)),!0)}}static*iteratorInternal(e,t){for(const r of t)yield Br(e,r)}static buildArrayElements(e,t){const r=[];for(const i of t){const s=e.issueTimeTicket(),o=Al(e,i,s);r.push(o)}return r}static pushInternal(e,t,r){return oe.insertAfterInternal(e,t,t.getLastCreatedAt(),r),t.length}static moveBeforeInternal(e,t,r,i){const s=e.issueTimeTicket(),o=t.getPrevCreatedAt(r);t.moveAfter(o,i,s),e.push(jr.create(t.getCreatedAt(),o,i,s))}static moveAfterInternal(e,t,r,i){const s=e.issueTimeTicket();t.moveAfter(r,i,s),e.push(jr.create(t.getCreatedAt(),r,i,s))}static moveFrontInternal(e,t,r){const i=e.issueTimeTicket(),s=t.getHead();t.moveAfter(s.getCreatedAt(),r,i),e.push(jr.create(t.getCreatedAt(),s.getCreatedAt(),r,i))}static moveLastInternal(e,t,r){const i=e.issueTimeTicket(),s=t.getLastCreatedAt();t.moveAfter(s,r,i),e.push(jr.create(t.getCreatedAt(),s,r,i))}static insertAfterInternal(e,t,r,i){const s=e.issueTimeTicket(),o=Al(e,i,s);return t.insertAfter(r,o),e.registerElement(o,t),e.push(Mo.create(t.getCreatedAt(),r,o.deepcopy(),s)),o}static insertBeforeInternal(e,t,r,i){return oe.insertAfterInternal(e,t,t.getPrevCreatedAt(r),i)}static deleteInternalByIndex(e,t,r){const i=e.issueTimeTicket(),s=t.deleteByIndex(r,i);if(s)return e.push(ii.create(t.getCreatedAt(),s.getCreatedAt(),i)),e.registerRemovedElement(s),s}static deleteInternalByID(e,t,r){const i=e.issueTimeTicket(),s=t.delete(r,i);return e.push(ii.create(t.getCreatedAt(),s.getCreatedAt(),i)),e.registerRemovedElement(s),s}static splice(e,t,r,i,...s){const o=t.length,a=r>=0?Math.min(r,o):Math.max(o+r,0),u=i===void 0?o:i<0?a:Math.min(a+i,o),c=[];for(let d=a;d<u;d++){const h=oe.deleteInternalByIndex(e,t,a);if(h){const g=h.deepcopy();g.setRemovedAt(),c.push(mi(e,g))}}if(s){let d=a===0?t.getHead().getID():t.get(a-1).getID();for(const h of s)d=oe.insertAfterInternal(e,t,d,h).getID()}return c}static includes(e,t,r,i){var a;const s=t.length,o=i===void 0?0:i<0?Math.max(i+s,0):i;if(o>=s)return!1;if(ce.isSupport(r))return Array.from(t).map(c=>mi(e,c)).includes(r,o);for(let u=o;u<s;u++)if(((a=t.get(u))==null?void 0:a.getID())===r.getID())return!0;return!1}static indexOf(e,t,r,i){var a;const s=t.length,o=i===void 0?0:i<0?Math.max(i+s,0):i;if(o>=s)return-1;if(ce.isSupport(r))return Array.from(t).map(c=>mi(e,c)).indexOf(r,o);for(let u=o;u<s;u++)if(((a=t.get(u))==null?void 0:a.getID())===r.getID())return u;return-1}static lastIndexOf(e,t,r,i){var a;const s=t.length,o=i===void 0||i>=s?s-1:i<0?i+s:i;if(o<0)return-1;if(ce.isSupport(r))return Array.from(t).map(c=>mi(e,c)).lastIndexOf(r,o);for(let u=o;u>0;u--)if(((a=t.get(u))==null?void 0:a.getID())===r.getID())return u;return-1}static toTestString(e){return e.toTestString()}getHandlers(){return this.handlers}}class yd{constructor(e,t){l(this,"context");l(this,"text");this.context=e,this.text=t}initialize(e,t){this.context=e,this.text=t}getID(){return this.text.getID()}edit(e,t,r,i){if(!this.context||!this.text)throw new S(w.ErrNotInitialized,"Text is not initialized yet");if(e>t)throw new S(w.ErrInvalidArgument,"from should be less than or equal to to");const s=this.text.indexRangeToPosRange(e,t);z.isEnabled(je.Debug)&&z.debug(`EDIT: f:${e}->${s[0].toTestString()}, t:${t}->${s[1].toTestString()} c:${r}`);const o=i?ks(i):void 0,a=this.context.issueTimeTicket(),[,u,c,d]=this.text.edit(s,r,a,o);this.context.acc(c);for(const h of u)this.context.registerGCPair(h);return this.context.push(new $o(this.text.getCreatedAt(),s[0],s[1],r,o?new Map(Object.entries(o)):new Map,a)),this.text.findIndexesFromRange(d)}delete(e,t){return this.edit(e,t,"")}empty(){return this.edit(0,this.length,"")}setStyle(e,t,r){if(!this.context||!this.text)throw new S(w.ErrNotInitialized,"Text is not initialized yet");if(e>t)throw new S(w.ErrInvalidArgument,"from should be less than or equal to to");const i=this.text.indexRangeToPosRange(e,t);z.isEnabled(je.Debug)&&z.debug(`STYL: f:${e}->${i[0].toTestString()}, t:${t}->${i[1].toTestString()} a:${JSON.stringify(r)}`);const s=ks(r),o=this.context.issueTimeTicket(),[a,u]=this.text.setStyle(i,s,o);this.context.acc(u);for(const c of a)this.context.registerGCPair(c);return this.context.push(new Uo(this.text.getCreatedAt(),i[0],i[1],new Map(Object.entries(s)),o)),!0}indexRangeToPosRange(e){if(!this.context||!this.text)throw new S(w.ErrNotInitialized,"Text is not initialized yet");const t=this.text.indexRangeToPosRange(e[0],e[1]);return[t[0].toStruct(),t[1].toStruct()]}posRangeToIndexRange(e){if(!this.context||!this.text)throw new S(w.ErrNotInitialized,"Text is not initialized yet");const t=this.text.findIndexesFromRange([$t.fromStruct(e[0]),$t.fromStruct(e[1])]);return[t[0],t[1]]}toTestString(){if(!this.context||!this.text)throw new S(w.ErrNotInitialized,"Text is not initialized yet");return this.text.toTestString()}values(){if(!this.context||!this.text)throw new S(w.ErrNotInitialized,"Text is not initialized yet");return this.text.values()}get length(){return this.text.length}getTreeByIndex(){return this.text.getTreeByIndex()}getTreeByID(){return this.text.getTreeByID()}toString(){if(!this.context||!this.text)throw new S(w.ErrNotInitialized,"Text is not initialized yet");return this.text.toString()}toJSON(){if(!this.context||!this.text)throw new S(w.ErrNotInitialized,"Text is not initialized yet");return this.text.toJSON()}toJSForTest(){if(!this.context||!this.text)throw new S(w.ErrNotInitialized,"Text is not initialized yet");return this.text.toJSForTest()}createRangeForTest(e,t){if(!this.context||!this.text)throw new S(w.ErrNotInitialized,"Text is not initialized yet");return this.text.indexRangeToPosRange(e,t)}}class vd{constructor(e,t){l(this,"valueType");l(this,"value");l(this,"context");l(this,"counter");this.valueType=e,this.value=t}initialize(e,t){this.valueType=t.getValueType(),this.context=e,this.counter=t,this.value=t.getValue()}getID(){return this.counter.getID()}getValue(){return this.value}getValueType(){return this.valueType}increase(e){if(!this.context||!this.counter)throw new S(w.ErrNotInitialized,"Counter is not initialized yet");const t=this.context.issueTimeTicket(),r=ce.of(e,t);if(!r.isNumericType())throw new TypeError(`Unsupported type of value: ${typeof r.getValue()}`);return this.counter.increase(r),this.context.push(Es.create(this.counter.getCreatedAt(),r,t)),this}toJSForTest(){if(!this.context||!this.counter)throw new S(w.ErrNotInitialized,"Counter is not initialized yet");return this.counter.toJSForTest()}}function wd(n){if(n.isText)return{type:n.type,value:n.value};const e={type:n.type,children:n.children.map(t=>wd(t))};return n.attrs&&(e.attributes=kr(n.attrs.toObject())),e}function ek(n,e){const t={type:n.isText?n.parent.type:n.type,children:n.isText?n.parent.getChildrenText().length===e?[]:[{type:an,value:n.parent.getChildrenText().slice(e)}]:n.children.slice(e).map(r=>wd(r))};return n.attrs?t.attributes=kr(n.attrs.toObject()):n.isText&&n.parent.attrs&&(t.attributes=kr(n.parent.attrs.toObject())),t}function tk(n,e){const{node:t}=n,r=[...e].slice(0,-1),i=t.isText?t.parent.getChildrenText().length:t.children.length,s=[...r,i],o=[...r],a=[];o[o.length-1]+=1,e.every((c,d)=>c===s[d])||a.push({fromPath:[...e],toPath:s});const u=ek(t,e[e.length-1]);return u&&a.push({fromPath:o,toPath:o,content:u}),a}function nk(n,e){const{node:t,offset:r}=n,i=t.children[r],s=t.children[r-1],{children:o}=i,a=[...e].slice(0,-1),u=[{fromPath:[...e],toPath:[...a,r+1]}];if(!i.children.length)return u;const c=[...a,r-1,s.hasTextChild()?s.getChildrenText().length:s.children.length],d=o.map(h=>wd(h));return u.push({fromPath:c,toPath:c,content:d}),u}function Sd(n,e,t){const{type:r}=n,i=t.issueTimeTicket();if(r===an){jy(n);const{value:s}=n,o=tt.create(xe.of(i,0),r,s);e.append(o)}else{const{children:s=[]}=n,{attributes:o}=n;let a;if(typeof o=="object"&&!yy(o)){const c=ks(o);a=new Pr;for(const[d,h]of Object.entries(c))a.set(d,h,i)}const u=tt.create(xe.of(i,0),r,void 0,a);e.append(u);for(const c of s)Sd(c,u,t)}}function rk(n,e){const{type:t}=e,r=n.issueTimeTicket();let i;if(e.type===an){const{value:s}=e;i=tt.create(xe.of(r,0),t,s)}else if(e){const{children:s=[]}=e,{attributes:o}=e;let a;if(typeof o=="object"&&!yy(o)){const u=ks(o);a=new Pr;for(const[c,d]of Object.entries(u))a.set(c,d,r)}i=tt.create(xe.of(n.issueTimeTicket(),0),t,void 0,a);for(const u of s)Sd(u,i,n)}return i}function jy(n){if(!n.value.length)throw new S(w.ErrInvalidArgument,"text node cannot have empty value");return!0}function yg(n){if(!n.length)return!0;if(n[0].type===an)for(const t of n){const{type:r}=t;if(r!==an)throw new S(w.ErrInvalidArgument,"element node and text node cannot be passed together");jy(t)}else for(const t of n){const{type:r}=t;if(r===an)throw new S(w.ErrInvalidArgument,"element node and text node cannot be passed together")}return!0}class kd{constructor(e){l(this,"initialRoot");l(this,"context");l(this,"tree");this.initialRoot=e}initialize(e,t){this.context=e,this.tree=t}getID(){return this.tree.getID()}buildRoot(e){if(!this.initialRoot)return tt.create(xe.of(e.issueTimeTicket(),0),XS);const t=tt.create(xe.of(e.issueTimeTicket(),0),this.initialRoot.type);for(const r of this.initialRoot.children)Sd(r,t,e);return t}getSize(){if(!this.context||!this.tree)throw new S(w.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getSize()}getNodeSize(){if(!this.context||!this.tree)throw new S(w.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getNodeSize()}getIndexTree(){if(!this.context||!this.tree)throw new S(w.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getIndexTree()}splitByPath(e){if(!this.context||!this.tree)throw new S(w.ErrNotInitialized,"Tree is not initialized yet");if(!e.length)throw new S(w.ErrInvalidArgument,"path should not be empty");const t=this.tree.pathToTreePos(e),r=tk(t,e);for(const i of r){const{fromPath:s,toPath:o,content:a}=i,u=this.tree.pathToPos(s),c=this.tree.pathToPos(o);this.editInternal(u,c,a?[a]:[],0)}}mergeByPath(e){if(!this.context||!this.tree)throw new S(w.ErrNotInitialized,"Tree is not initialized yet");if(!e.length)throw new S(w.ErrInvalidArgument,"path should not be empty");const t=this.tree.pathToTreePos(e);if(t.node.isText)throw new S(w.ErrInvalidArgument,"text node cannot be merged");const r=nk(t,e);for(const i of r){const{fromPath:s,toPath:o,content:a}=i,u=this.tree.pathToPos(s),c=this.tree.pathToPos(o);this.editInternal(u,c,a??[],0)}}styleByPath(e,t){if(!this.context||!this.tree)throw new S(w.ErrNotInitialized,"Tree is not initialized yet");if(!e.length)throw new S(w.ErrInvalidArgument,"path should not be empty");const[r,i]=this.tree.pathToPosRange(e),s=this.context.issueTimeTicket(),o=t?ks(t):void 0,[a,,u]=this.tree.style([r,i],o,s);this.context.acc(u);for(const c of a)this.context.registerGCPair(c);this.context.push(Tr.create(this.tree.getCreatedAt(),r,i,o?new Map(Object.entries(o)):new Map,s))}style(e,t,r){if(!this.context||!this.tree)throw new S(w.ErrNotInitialized,"Tree is not initialized yet");if(e>t)throw new S(w.ErrInvalidArgument,"from should be less than or equal to to");const i=this.tree.findPos(e),s=this.tree.findPos(t),o=this.context.issueTimeTicket(),a=r?ks(r):void 0,[u,,c]=this.tree.style([i,s],a,o);this.context.acc(c);for(const d of u)this.context.registerGCPair(d);this.context.push(Tr.create(this.tree.getCreatedAt(),i,s,a?new Map(Object.entries(a)):new Map,o))}removeStyle(e,t,r){if(!this.context||!this.tree)throw new S(w.ErrNotInitialized,"Tree is not initialized yet");if(e>t)throw new S(w.ErrInvalidArgument,"from should be less than or equal to to");const i=this.tree.findPos(e),s=this.tree.findPos(t),o=this.context.issueTimeTicket(),[a,,u]=this.tree.removeStyle([i,s],r,o);this.context.acc(u);for(const c of a)this.context.registerGCPair(c);this.context.push(Tr.createTreeRemoveStyleOperation(this.tree.getCreatedAt(),i,s,r,o))}editInternal(e,t,r,i=0){var c;if(r.length!==0&&r[0]&&(yg(r),r[0].type!==an))for(const d of r){const{children:h=[]}=d;yg(h)}const s=this.context.getLastTimeTicket();let o=new Array;if(((c=r[0])==null?void 0:c.type)===an){let d="";for(const h of r){const{value:g}=h;d+=g}o.push(tt.create(xe.of(this.context.issueTimeTicket(),0),an,d))}else o=r.map(d=>d&&rk(this.context,d)).filter(d=>d);const[,a,u]=this.tree.edit([e,t],o.length?o.map(d=>d==null?void 0:d.deepcopy()):void 0,i,s,()=>this.context.issueTimeTicket());this.context.acc(u);for(const d of a)this.context.registerGCPair(d);return this.context.push(jo.create(this.tree.getCreatedAt(),e,t,o.length?o:void 0,i,s)),!0}editByPath(e,t,r,i=0){if(!this.context||!this.tree)throw new S(w.ErrNotInitialized,"Tree is not initialized yet");if(e.length!==t.length)throw new S(w.ErrInvalidArgument,"path length should be equal");if(!e.length||!t.length)throw new S(w.ErrInvalidArgument,"path should not be empty");const s=this.tree.pathToPos(e),o=this.tree.pathToPos(t);return this.editInternal(s,o,r?[r]:[],i)}editBulkByPath(e,t,r,i=0){if(!this.context||!this.tree)throw new S(w.ErrNotInitialized,"Tree is not initialized yet");if(e.length!==t.length)throw new S(w.ErrInvalidArgument,"path length should be equal");if(!e.length||!t.length)throw new S(w.ErrInvalidArgument,"path should not be empty");const s=this.tree.pathToPos(e),o=this.tree.pathToPos(t);return this.editInternal(s,o,r,i)}edit(e,t,r,i=0){if(!this.context||!this.tree)throw new S(w.ErrNotInitialized,"Tree is not initialized yet");if(e>t)throw new S(w.ErrInvalidArgument,"from should be less than or equal to to");const s=this.tree.findPos(e),o=this.tree.findPos(t);return this.editInternal(s,o,r?[r]:[],i)}editBulk(e,t,r,i=0){if(!this.context||!this.tree)throw new S(w.ErrNotInitialized,"Tree is not initialized yet");if(e>t)throw new S(w.ErrInvalidArgument,"from should be less than or equal to to");const s=this.tree.findPos(e),o=this.tree.findPos(t);return this.editInternal(s,o,r,i)}toXML(){if(!this.context||!this.tree)throw new S(w.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toXML()}toJSON(){if(!this.context||!this.tree)throw new S(w.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toJSON()}toJSForTest(){if(!this.context||!this.tree)throw new S(w.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toJSForTest()}toJSInfoForTest(){if(!this.context||!this.tree)throw new S(w.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toJSInfoForTest()}getRootTreeNode(){if(!this.context||!this.tree)throw new S(w.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getRootTreeNode()}indexToPath(e){if(!this.context||!this.tree)throw new S(w.ErrNotInitialized,"Tree is not initialized yet");return this.tree.indexToPath(e)}pathToIndex(e){if(!this.context||!this.tree)throw new S(w.ErrNotInitialized,"Tree is not initialized yet");return this.tree.pathToIndex(e)}pathRangeToPosRange(e){if(!this.context||!this.tree)throw new S(w.ErrNotInitialized,"Tree is not initialized yet");const t=[this.tree.pathToIndex(e[0]),this.tree.pathToIndex(e[1])],r=this.tree.indexRangeToPosRange(t);return[r[0].toStruct(),r[1].toStruct()]}indexRangeToPosRange(e){if(!this.context||!this.tree)throw new S(w.ErrNotInitialized,"Tree is not initialized yet");return this.tree.indexRangeToPosStructRange(e)}posRangeToIndexRange(e){if(!this.context||!this.tree)throw new S(w.ErrNotInitialized,"Tree is not initialized yet");const t=[Ft.fromStruct(e[0]),Ft.fromStruct(e[1])];return this.tree.posRangeToIndexRange(t)}posRangeToPathRange(e){if(!this.context||!this.tree)throw new S(w.ErrNotInitialized,"Tree is not initialized yet");const t=[Ft.fromStruct(e[0]),Ft.fromStruct(e[1])];return this.tree.posRangeToPathRange(t)}}function vg(n,e){return Uy(n,e)}function Br(n,e){if(e){if(e instanceof ce)return e;if(e instanceof Ye)return Uy(n,e);if(e instanceof rt)return Q1(n,e);if(e instanceof Nt)return new yd(n,e);if(e instanceof it){const t=new vd(cn.Int,0);return t.initialize(n,e),t}else if(e instanceof Pt){const t=new kd;return t.initialize(n,e),t}}else return;throw new TypeError(`Unsupported type of element: ${typeof e}`)}function mi(n,e){const t=Br(n,e);return t instanceof ce?t.getValue():t}function Al(n,e,t){let r;if(ce.isSupport(e))r=ce.of(e,t);else if(Array.isArray(e))r=rt.create(t,oe.buildArrayElements(n,e));else if(typeof e=="object")e instanceof yd?(r=Nt.create(Is.create(),t),e.initialize(n,r)):e instanceof vd?(r=it.create(e.getValueType(),e.getValue(),t),e.initialize(n,r)):e instanceof kd?(r=Pt.create(e.buildRoot(n),t),e.initialize(n,r)):r=Ye.create(t,Ro.buildObjectMembers(n,e));else throw new TypeError(`Unsupported type of value: ${typeof e}`);return r}class Du{constructor(e,t){l(this,"context");l(this,"presence");this.context=e,this.presence=t}set(e,t){for(const r of Object.keys(e))this.presence[r]=e[r];this.context.setPresenceChange({type:un.Put,presence:Rt(this.presence)}),this.context.setReversePresence(e,t)}get(e){return this.presence[e]}clear(){this.presence={},this.context.setPresenceChange({type:un.Clear})}}const wg=50;class ik{constructor(){l(this,"undoStack",[]);l(this,"redoStack",[])}hasUndo(){return this.undoStack.length>0}hasRedo(){return this.redoStack.length>0}pushUndo(e){this.undoStack.length>=wg&&this.undoStack.shift(),this.undoStack.push(e)}popUndo(){return this.undoStack.pop()}pushRedo(e){this.redoStack.length>=wg&&this.redoStack.shift(),this.redoStack.push(e)}popRedo(){return this.redoStack.pop()}clearRedo(){this.redoStack=[]}getUndoStackForTest(){return this.undoStack}getRedoStackForTest(){return this.redoStack}}const sk="yorkie-devtools-panel",ok="yorkie-devtools-sdk";function ak(n){return[Ee.StatusChanged,Ee.Snapshot,Ee.LocalChange,Ee.RemoteChange,Ee.Initialized,Ee.Watched,Ee.Unwatched,Ee.PresenceChanged].includes(n.type)}function lk(n){return n.every(ak)}let Ji="disconnected";const Sg=new Map,Da=new Map;typeof window<"u"&&(window.docEventsForReplayByDocKey=Da);function da(n,e){(e!=null&&e.force||Ji!=="disconnected")&&window.postMessage({source:ok,...n},"*")}function uk(n){if(!n.isEnableDevtools()||typeof window>"u"||Sg.has(n.getKey()))return;Da.set(n.getKey(),[]);const e=n.subscribe("all",t=>{lk(t)&&(Da.get(n.getKey()).push(t),Ji==="synced"&&da({msg:"doc::sync::partial",docKey:n.getKey(),event:t}))});Sg.set(n.getKey(),[e]),da({msg:"refresh-devtools"},{force:!0}),window.addEventListener("message",t=>{var i;if(((i=t.data)==null?void 0:i.source)!==sk)return;switch(t.data.msg){case"devtools::connect":if(Ji!=="disconnected")break;Ji="connected",da({msg:"doc::available",docKey:n.getKey()}),z.info(`[YD] Devtools connected. Doc: ${n.getKey()}`);break;case"devtools::disconnect":Ji="disconnected",z.info(`[YD] Devtools disconnected. Doc: ${n.getKey()}`);break;case"devtools::subscribe":Ji="synced",da({msg:"doc::sync::full",docKey:n.getKey(),events:Da.get(n.getKey())}),z.info(`[YD] Devtools subscribed. Doc: ${n.getKey()}`);break}})}var br=(n=>(n.Detached="detached",n.Attached="attached",n.Removed="removed",n))(br||{}),Ee=(n=>(n.StatusChanged="status-changed",n.ConnectionChanged="connection-changed",n.SyncStatusChanged="sync-status-changed",n.Snapshot="snapshot",n.LocalChange="local-change",n.RemoteChange="remote-change",n.Initialized="initialized",n.Watched="watched",n.Unwatched="unwatched",n.PresenceChanged="presence-changed",n.Broadcast="broadcast",n.LocalBroadcast="local-broadcast",n.AuthError="auth-error",n))(Ee||{}),nf=(n=>(n.Connected="connected",n.Disconnected="disconnected",n))(nf||{}),rf=(n=>(n.Synced="synced",n.SyncFailed="sync-failed",n))(rf||{});class Vy{constructor(e,t){l(this,"key");l(this,"status");l(this,"opts");l(this,"changeID");l(this,"checkpoint");l(this,"localChanges");l(this,"maxSizeLimit");l(this,"root");l(this,"clone");l(this,"eventStream");l(this,"eventStreamObserver");l(this,"onlineClients");l(this,"presences");l(this,"history");l(this,"internalHistory");l(this,"isUpdating");this.opts=t||{},this.key=e,this.status="detached",this.root=Oo.create(),this.changeID=o1,this.checkpoint=a1,this.localChanges=[],this.maxSizeLimit=0,this.eventStream=Y1(r=>{this.eventStreamObserver=r}),this.onlineClients=new Set,this.presences=new Map,this.isUpdating=!1,this.internalHistory=new ik,this.history={canUndo:this.canUndo.bind(this),canRedo:this.canRedo.bind(this),undo:this.undo.bind(this),redo:this.redo.bind(this)},uk(this)}update(e,t){var o;if(this.getStatus()==="removed")throw new S(w.ErrDocumentRemoved,`${this.key} is removed`);this.ensureClone();const r=this.changeID.getActorID(),i=Xi.create(this.changeID,this.clone.root,this.clone.presences.get(r)||{},t);try{const a=vg(i,this.clone.root.getObject());this.presences.has(r)||this.clone.presences.set(r,{}),this.isUpdating=!0,e(a,new Du(i,this.clone.presences.get(r)))}catch(a){throw this.clone=void 0,a}finally{this.isUpdating=!1}const s=YS((o=this.clone)==null?void 0:o.root.getDocSize());if(!i.isPresenceOnlyChange()&&this.maxSizeLimit>0&&this.maxSizeLimit<s)throw this.clone=void 0,new S(w.ErrDocumentSizeExceedsLimit,`document size exceeded: ${s} > ${this.maxSizeLimit}`);if(i.hasChange()){z.isEnabled(je.Trivial)&&z.trivial(`trying to update a local change: ${this.toJSON()}`);const a=i.toChange(),{opInfos:u,reverseOps:c}=a.execute(this.root,this.presences,Q.Local),d=i.getReversePresence();d&&c.push({type:"presence",value:d}),this.localChanges.push(a),c.length>0&&this.internalHistory.pushUndo(c),u.length>0&&this.internalHistory.clearRedo(),this.changeID=i.getNextID();const h=[];u.length>0&&h.push({type:"local-change",source:Q.Local,value:{message:a.getMessage()||"",operations:u,actor:r,clientSeq:a.getID().getClientSeq(),serverSeq:a.getID().getServerSeq()},rawChange:this.isEnableDevtools()?a.toStruct():void 0}),a.hasPresenceChange()&&h.push({type:"presence-changed",source:Q.Local,value:{clientID:r,presence:this.getPresence(r)}}),this.publish(h),z.isEnabled(je.Trivial)&&z.trivial(`after update a local change: ${this.toJSON()}`)}}subscribe(e,t,r,i){if(typeof e=="string"){if(typeof t!="function")throw new S(w.ErrInvalidArgument,"Second argument must be a callback function");if(e==="presence"){const a=t;return this.eventStream.subscribe(u=>{for(const c of u)c.type!=="initialized"&&c.type!=="watched"&&c.type!=="unwatched"&&c.type!=="presence-changed"||a(c)},r,i)}if(e==="my-presence"){const a=t;return this.eventStream.subscribe(u=>{for(const c of u)c.type!=="initialized"&&c.type!=="presence-changed"||c.type==="presence-changed"&&c.value.clientID!==this.changeID.getActorID()||a(c)},r,i)}if(e==="others"){const a=t;return this.eventStream.subscribe(u=>{for(const c of u)c.type!=="watched"&&c.type!=="unwatched"&&c.type!=="presence-changed"||c.value.clientID!==this.changeID.getActorID()&&a(c)},r,i)}if(e==="connection"){const a=t;return this.eventStream.subscribe(u=>{for(const c of u)c.type==="connection-changed"&&a(c)},r,i)}if(e==="status"){const a=t;return this.eventStream.subscribe(u=>{for(const c of u)c.type==="status-changed"&&a(c)},r,i)}if(e==="sync"){const a=t;return this.eventStream.subscribe(u=>{for(const c of u)c.type==="sync-status-changed"&&a(c)},r,i)}if(e==="local-broadcast"){const a=t;return this.eventStream.subscribe(u=>{for(const c of u)c.type==="local-broadcast"&&a(c)},r)}if(e==="broadcast"){const a=t;return this.eventStream.subscribe(u=>{for(const c of u)c.type==="broadcast"&&a(c)},r)}if(e==="auth-error"){const a=t;return this.eventStream.subscribe(u=>{for(const c of u)c.type==="auth-error"&&a(c)},r)}if(e==="all"){const a=t;return this.eventStream.subscribe(a,r,i)}const s=e,o=t;return this.eventStream.subscribe(a=>{for(const u of a){if(u.type!=="local-change"&&u.type!=="remote-change")continue;const c=[];for(const d of u.value.operations)this.isSameElementOrChildOf(d.path,s)&&c.push(d);c.length&&o({...u,value:{...u.value,operations:c}})}},r,i)}if(typeof e=="function"){const s=e,o=t,a=r;return this.eventStream.subscribe(u=>{for(const c of u)c.type!=="snapshot"&&c.type!=="local-change"&&c.type!=="remote-change"||s(c)},o,a)}throw new S(w.ErrInvalidArgument,`"${e}" is not a valid`)}publish(e){this.eventStreamObserver&&this.eventStreamObserver.next(e)}isSameElementOrChildOf(e,t){if(t===e)return!0;const r=e.split(".");return t.split(".").every((s,o)=>s===r[o])}removePushedLocalChanges(e){for(;this.localChanges.length&&!(this.localChanges[0].getID().getClientSeq()>e);)this.localChanges.shift()}applyChangePack(e){const t=e.hasSnapshot();t?this.applySnapshot(e.getCheckpoint().getServerSeq(),e.getVersionVector(),e.getSnapshot(),e.getCheckpoint().getClientSeq()):(this.applyChanges(e.getChanges(),Q.Remote),this.removePushedLocalChanges(e.getCheckpoint().getClientSeq())),this.checkpoint=this.checkpoint.forward(e.getCheckpoint()),t||this.garbageCollect(e.getVersionVector()),e.getIsRemoved()&&this.applyStatus("removed"),z.isEnabled(je.Trivial)&&z.trivial(`${this.root.toJSON()}`)}getCheckpoint(){return this.checkpoint}getChangeID(){return this.changeID}hasLocalChanges(){return this.localChanges.length>0}ensureClone(){this.clone||(this.clone={root:this.root.deepcopy(),presences:Rt(this.presences)})}createChangePack(){const e=Array.from(this.localChanges),t=this.checkpoint.increaseClientSeq(e.length);return _l.create(this.key,t,!1,e,this.getVersionVector())}setActor(e){for(const t of this.localChanges)t.setActor(e);this.changeID=this.changeID.setActor(e)}isEnableDevtools(){return!!this.opts.enableDevtools}getKey(){return this.key}getStatus(){return this.status}getClone(){return this.clone}getCloneRoot(){if(this.clone)return this.clone.root.getObject()}getRoot(){this.ensureClone();const e=Xi.create(this.changeID.next(),this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});return vg(e,this.clone.root.getObject())}getDocSize(){return this.root.getDocSize()}getMaxSizePerDocument(){return this.maxSizeLimit}setMaxSizePerDocument(e){this.maxSizeLimit=e}garbageCollect(e){return this.opts.disableGC?0:(this.clone&&this.clone.root.garbageCollect(e),this.root.garbageCollect(e))}getRootObject(){return this.root.getObject()}getGarbageLen(){return this.root.getGarbageLen()}getGarbageLenFromClone(){return this.clone.root.getGarbageLen()}toJSON(){return this.root.toJSON()}toSortedJSON(){return this.root.toSortedJSON()}getStats(){return this.root.getStats()}toJSForTest(){return{...this.getRoot().toJSForTest(),key:"root"}}applySnapshot(e,t,r,i=-1){const{root:s,presences:o}=he.bytesToSnapshot(r);this.root=new Oo(s),this.presences=o,this.changeID=this.changeID.setClocks(t.maxLamport(),t),this.clone=void 0,this.removePushedLocalChanges(i),this.applyChanges(this.localChanges,Q.Local),this.publish([{type:"snapshot",source:Q.Remote,value:{serverSeq:e.toString(),snapshot:this.isEnableDevtools()?he.bytesToHex(r):void 0,snapshotVector:he.versionVectorToHex(t)}}])}applyChanges(e,t){z.isEnabled(je.Debug)&&z.debug(`trying to apply ${e.length} remote changes.elements:${this.root.getElementMapSize()}, removeds:${this.root.getGarbageElementSetSize()}`),z.isEnabled(je.Trivial)&&z.trivial(e.map(r=>`${r.getID().toTestString()}	${r.toTestString()}`).join(`
`));for(const r of e)this.applyChange(r,t);z.isEnabled(je.Debug)&&z.debug(`after appling ${e.length} remote changes.elements:${this.root.getElementMapSize()},  removeds:${this.root.getGarbageElementSetSize()}`)}applyChange(e,t){this.ensureClone(),e.execute(this.clone.root,this.clone.presences,t);const r=[],i=e.getID().getActorID();if(e.hasPresenceChange()&&this.onlineClients.has(i)){const o=e.getPresenceChange();switch(o.type){case un.Put:r.push(this.presences.has(i)?{type:"presence-changed",source:t,value:{clientID:i,presence:o.presence}}:{type:"watched",source:Q.Remote,value:{clientID:i,presence:o.presence}});break;case un.Clear:r.push({type:"unwatched",source:Q.Remote,value:{clientID:i,presence:this.getPresence(i)}}),this.removeOnlineClient(i);break}}const{opInfos:s}=e.execute(this.root,this.presences,t);if(this.changeID=this.changeID.syncClocks(e.getID()),s.length>0){const o=this.isEnableDevtools()?e.toStruct():void 0;r.push(t===Q.Remote?{type:"remote-change",source:t,value:{actor:i,clientSeq:e.getID().getClientSeq(),serverSeq:e.getID().getServerSeq(),message:e.getMessage()||"",operations:s},rawChange:o}:{type:"local-change",source:t,value:{actor:i,clientSeq:e.getID().getClientSeq(),serverSeq:e.getID().getServerSeq(),message:e.getMessage()||"",operations:s},rawChange:o})}r.length>0&&this.publish(r)}applyWatchStream(e){if(e.body.case==="initialization"){const t=e.body.value.clientIds,r=new Set;for(const i of t)i!==this.changeID.getActorID()&&r.add(i);this.setOnlineClients(r),this.publish([{type:"initialized",source:Q.Local,value:this.getPresences()}]);return}if(e.body.case==="event"){const{type:t,publisher:r}=e.body.value,i=[];if(t===Ii.DOCUMENT_WATCHED){if(this.onlineClients.has(r)&&this.hasPresence(r))return;this.addOnlineClient(r),this.hasPresence(r)&&i.push({type:"watched",source:Q.Remote,value:{clientID:r,presence:this.getPresence(r)}})}else if(t===Ii.DOCUMENT_UNWATCHED){const s=this.getPresence(r);this.removeOnlineClient(r),s&&i.push({type:"unwatched",source:Q.Remote,value:{clientID:r,presence:s}})}else if(t===Ii.DOCUMENT_BROADCAST&&e.body.value.body){const{topic:s,payload:o}=e.body.value.body,a=new TextDecoder;i.push({type:"broadcast",value:{clientID:r,topic:s,payload:JSON.parse(a.decode(o))}})}i.length>0&&this.publish(i)}}applyStatus(e){this.status=e,e==="detached"&&this.setActor(Kl),this.publish([{source:e==="removed"?Q.Remote:Q.Local,type:"status-changed",value:e==="attached"?{status:e,actorID:this.changeID.getActorID()}:{status:e}}])}applyDocEventForReplay(e){if(e.type==="status-changed"){this.applyStatus(e.value.status),e.value.status==="attached"&&this.setActor(e.value.actorID);return}if(e.type==="snapshot"){const{snapshot:t,serverSeq:r,snapshotVector:i}=e.value;if(!t)return;this.applySnapshot(BigInt(r),he.hexToVersionVector(i),he.hexToBytes(t));return}if(e.type==="local-change"||e.type==="remote-change"){if(!e.rawChange)return;const t=Ts.fromStruct(e.rawChange);this.applyChange(t,e.source)}if(e.type==="initialized"){const t=new Set;for(const{clientID:r,presence:i}of e.value)t.add(r),this.presences.set(r,i);this.setOnlineClients(t);return}if(e.type==="watched"){const{clientID:t,presence:r}=e.value;this.addOnlineClient(t),this.presences.set(t,r);return}if(e.type==="unwatched"){const{clientID:t}=e.value;this.removeOnlineClient(t),this.presences.delete(t)}if(e.type==="presence-changed"){const{clientID:t,presence:r}=e.value;this.presences.set(t,r)}}applyDocEventsForReplay(e){for(const t of e)this.applyDocEventForReplay(t)}getValueByPath(e){if(!e.startsWith("$"))throw new S(w.ErrInvalidArgument,'path must start with "$"');const t=e.split(".");t.shift();let r=this.getRoot();for(const i of t)if(r=r[i],r===void 0)return;return r}setOnlineClients(e){this.onlineClients=e}resetOnlineClients(){this.onlineClients=new Set}addOnlineClient(e){this.onlineClients.add(e)}removeOnlineClient(e){this.onlineClients.delete(e)}hasPresence(e){return this.presences.has(e)}getMyPresence(){if(this.status!=="attached")return{};const e=this.presences.get(this.changeID.getActorID());return e?Rt(e):{}}getPresence(e){if(e===this.changeID.getActorID())return this.getMyPresence();if(!this.onlineClients.has(e))return;const t=this.presences.get(e);return t?Rt(t):void 0}getPresenceForTest(e){const t=this.presences.get(e);return t?Rt(t):void 0}getPresences(){const e=[];e.push({clientID:this.changeID.getActorID(),presence:Rt(this.getMyPresence())});for(const t of this.onlineClients)this.presences.has(t)&&e.push({clientID:t,presence:Rt(this.presences.get(t))});return e}getSelfForTest(){return{clientID:this.getChangeID().getActorID(),presence:this.getMyPresence()}}getOthersForTest(){const e=this.getChangeID().getActorID();return this.getPresences().filter(t=>t.clientID!==e).sort((t,r)=>t.clientID>r.clientID?1:-1)}canUndo(){return this.internalHistory.hasUndo()&&!this.isUpdating}canRedo(){return this.internalHistory.hasRedo()&&!this.isUpdating}undo(){if(this.isUpdating)throw new S(w.ErrRefused,"Undo is not allowed during an update");const e=this.internalHistory.popUndo();if(e===void 0)throw new S(w.ErrRefused,"There is no operation to be undone");this.ensureClone();const t=Xi.create(this.changeID,this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});for(const c of e){if(!(c instanceof jt)){new Du(t,Rt(this.clone.presences.get(this.changeID.getActorID()))).set(c.value,{addToHistory:!0});continue}const d=t.issueTimeTicket();c.setExecutedAt(d),t.push(c)}const r=t.toChange();r.execute(this.clone.root,this.clone.presences,Q.UndoRedo);const{opInfos:i,reverseOps:s}=r.execute(this.root,this.presences,Q.UndoRedo),o=t.getReversePresence();if(o&&s.push({type:"presence",value:o}),s.length>0&&this.internalHistory.pushRedo(s),!r.hasPresenceChange()&&i.length===0)return;this.localChanges.push(r),this.changeID=t.getNextID();const a=this.changeID.getActorID(),u=[];i.length>0&&u.push({type:"local-change",source:Q.UndoRedo,value:{message:r.getMessage()||"",operations:i,actor:a,clientSeq:r.getID().getClientSeq(),serverSeq:r.getID().getServerSeq()},rawChange:this.isEnableDevtools()?r.toStruct():void 0}),r.hasPresenceChange()&&u.push({type:"presence-changed",source:Q.UndoRedo,value:{clientID:a,presence:this.getPresence(a)}}),this.publish(u)}redo(){if(this.isUpdating)throw new S(w.ErrRefused,"Redo is not allowed during an update");const e=this.internalHistory.popRedo();if(e===void 0)throw new S(w.ErrRefused,"There is no operation to be redone");this.ensureClone();const t=Xi.create(this.changeID,this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});for(const c of e){if(!(c instanceof jt)){new Du(t,Rt(this.clone.presences.get(this.changeID.getActorID()))).set(c.value,{addToHistory:!0});continue}const d=t.issueTimeTicket();c.setExecutedAt(d),t.push(c)}const r=t.toChange();r.execute(this.clone.root,this.clone.presences,Q.UndoRedo);const{opInfos:i,reverseOps:s}=r.execute(this.root,this.presences,Q.UndoRedo),o=t.getReversePresence();if(o&&s.push({type:"presence",value:o}),s.length>0&&this.internalHistory.pushUndo(s),!r.hasPresenceChange()&&i.length===0)return;this.localChanges.push(r),this.changeID=t.getNextID();const a=this.changeID.getActorID(),u=[];i.length>0&&u.push({type:"local-change",source:Q.UndoRedo,value:{message:r.getMessage()||"",operations:i,actor:a,clientSeq:r.getID().getClientSeq(),serverSeq:r.getID().getServerSeq()},rawChange:this.isEnableDevtools()?r.toStruct():void 0}),r.hasPresenceChange()&&u.push({type:"presence-changed",source:Q.UndoRedo,value:{clientID:a,presence:this.getPresence(a)}}),this.publish(u)}getUndoStackForTest(){return this.internalHistory.getUndoStackForTest()}getRedoStackForTest(){return this.internalHistory.getRedoStackForTest()}broadcast(e,t,r){const i={type:"local-broadcast",value:{topic:e,payload:t},options:r};this.publish([i])}getVersionVector(){return this.changeID.getVersionVector()}}function ck(n,e){let t=e;return{authInterceptor:s=>async o=>(n&&o.header.set("x-api-key",n),t&&o.header.set("authorization",t),await s(o)),setToken:s=>{t=s}}}const fk="@yorkie-js/sdk",dk="0.6.12",kg={name:fk,version:dk};function hk(n){return e=>async t=>(n?t.header.set("x-yorkie-user-agent",n):t.header.set("x-yorkie-user-agent",kg.name+"/"+kg.version),await e(t))}const gk=n=>{try{if(JSON.stringify(n)===void 0)return!1}catch{return!1}return!0};var Oa=(n=>(n.Manual="manual",n.Realtime="realtime",n.RealtimePushOnly="realtime-pushonly",n.RealtimeSyncOff="realtime-syncoff",n))(Oa||{});const Ms={rpcAddr:"https://api.yorkie.dev",syncLoopDuration:50,retrySyncLoopDelay:1e3,reconnectStreamDelay:1e3},Ou={maxRetries:1/0,initialRetryInterval:1e3,maxBackoff:2e4};class qy{constructor(e){l(this,"id");l(this,"key");l(this,"metadata");l(this,"status");l(this,"attachmentMap");l(this,"apiKey");l(this,"authTokenInjector");l(this,"conditions");l(this,"syncLoopDuration");l(this,"reconnectStreamDelay");l(this,"retrySyncLoopDelay");l(this,"rpcClient");l(this,"setAuthToken");l(this,"taskQueue");l(this,"processing",!1);l(this,"keepalive",!1);e=e||Ms;const t=e.rpcAddr||Ms.rpcAddr;this.key=e.key||$y(),this.metadata=e.metadata||{},this.status="deactivated",this.attachmentMap=new Map,this.apiKey=e.apiKey||"",this.authTokenInjector=e.authTokenInjector,this.conditions={SyncLoop:!1,WatchLoop:!1},this.syncLoopDuration=e.syncLoopDuration??Ms.syncLoopDuration,this.reconnectStreamDelay=e.reconnectStreamDelay??Ms.reconnectStreamDelay,this.retrySyncLoopDelay=e.retrySyncLoopDelay??Ms.retrySyncLoopDelay;const{authInterceptor:r,setToken:i}=ck(this.apiKey);this.setAuthToken=i,this.rpcClient=vS(US,$S({baseUrl:t,interceptors:[r,hk(e==null?void 0:e.userAgent)],fetch:(s,o)=>{const a={...o,keepalive:this.keepalive};return fetch(s,a)}})),this.taskQueue=[]}async activate(){if(this.isActive())return Promise.resolve();if(this.authTokenInjector){const e=await this.authTokenInjector();this.setAuthToken(e)}return this.enqueueTask(async()=>{try{const e=await this.rpcClient.activateClient({clientKey:this.key,metadata:this.metadata},{headers:{"x-shard-key":this.apiKey}});this.id=e.clientId,this.status="activated",this.runSyncLoop(),z.info(`[AC] c:"${this.getKey()}" activated, id:"${this.id}"`),typeof window<"u"&&window.addEventListener("beforeunload",async()=>{await this.deactivate({keepalive:!0})})}catch(e){throw z.error(`[AC] c:"${this.getKey()}" err :`,e),await this.handleConnectError(e),e}})}deactivate(e={keepalive:!1}){if(this.status==="deactivated")return Promise.resolve();const t=async()=>{try{await this.rpcClient.deactivateClient({clientId:this.id},{headers:{"x-shard-key":this.apiKey}}),this.deactivateInternal(),z.info(`[DC] c"${this.getKey()}" deactivated`)}catch(r){throw z.error(`[DC] c:"${this.getKey()}" err :`,r),await this.handleConnectError(r),r}};if(e.keepalive){this.keepalive=!0;const r=t();return this.keepalive=!1,r}return this.enqueueTask(t)}hasDocument(e){return this.attachmentMap.has(e)}attach(e,t={}){if(!this.isActive())throw new S(w.ErrClientNotActivated,`${this.key} is not active`);if(e.getStatus()!==br.Detached)throw new S(w.ErrDocumentNotDetached,`${e.getKey()} is not detached`);e.setActor(this.id),e.update((s,o)=>o.set(t.initialPresence||{}));const r=e.subscribe("local-broadcast",async s=>{var d;const{topic:o,payload:a}=s.value,u=(d=s.options)==null?void 0:d.error,c=s.options;try{await this.broadcast(e.getKey(),o,a,c)}catch(h){h instanceof Error&&(u==null||u(h))}}),i=t.syncMode??"realtime";return this.enqueueTask(async()=>{try{const s=await this.rpcClient.attachDocument({clientId:this.id,changePack:he.toChangePack(e.createChangePack())},{headers:{"x-shard-key":`${this.apiKey}/${e.getKey()}`}});(s.maxSizePerDocument??0)>0&&e.setMaxSizePerDocument(s.maxSizePerDocument);const a=he.fromChangePack(s.changePack);if(e.applyChangePack(a),e.getStatus()===br.Removed)return e;e.applyStatus(br.Attached),this.attachmentMap.set(e.getKey(),new H1(this.reconnectStreamDelay,e,s.documentId,i,r)),i!=="manual"&&await this.runWatchLoop(e.getKey()),z.info(`[AD] c:"${this.getKey()}" attaches d:"${e.getKey()}"`);const u=e.getRootObject();if(t.initialRoot){const c=t.initialRoot;e.update(d=>{for(const[h,g]of Object.entries(c))if(!u.has(h)){const p=h;d[p]=g}})}return e}catch(s){throw z.error(`[AD] c:"${this.getKey()}" err :`,s),await this.handleConnectError(s),s}})}detach(e,t={keepalive:!1}){if(!this.isActive())throw new S(w.ErrClientNotActivated,`${this.key} is not active`);const r=this.attachmentMap.get(e.getKey());if(!r)throw new S(w.ErrDocumentNotAttached,`${e.getKey()} is not attached`);e.update((s,o)=>o.clear());const i=async()=>{try{const s=await this.rpcClient.detachDocument({clientId:this.id,documentId:r.docID,changePack:he.toChangePack(e.createChangePack()),removeIfNotAttached:t.removeIfNotAttached??!1},{headers:{"x-shard-key":`${this.apiKey}/${e.getKey()}`}}),o=he.fromChangePack(s.changePack);return e.applyChangePack(o),e.getStatus()!==br.Removed&&e.applyStatus(br.Detached),this.detachInternal(e.getKey()),z.info(`[DD] c:"${this.getKey()}" detaches d:"${e.getKey()}"`),e}catch(s){throw z.error(`[DD] c:"${this.getKey()}" err :`,s),await this.handleConnectError(s),s}};if(t.keepalive){this.keepalive=!0;const s=i();return this.keepalive=!1,s}return this.enqueueTask(i)}async changeSyncMode(e,t){if(!this.isActive())throw new S(w.ErrClientNotActivated,`${this.key} is not active`);const r=this.attachmentMap.get(e.getKey());if(!r)throw new S(w.ErrDocumentNotAttached,`${e.getKey()} is not attached`);const i=r.syncMode;return i===t?e:(r.changeSyncMode(t),t==="manual"?(r.cancelWatchStream(),e):(t==="realtime"&&(r.remoteChangeEventReceived=!0),i==="manual"&&await this.runWatchLoop(e.getKey()),e))}sync(e){if(!this.isActive())throw new S(w.ErrClientNotActivated,`${this.key} is not active`);if(e){const t=this.attachmentMap.get(e.getKey());if(!t)throw new S(w.ErrDocumentNotAttached,`${e.getKey()} is not attached`);return this.enqueueTask(async()=>this.syncInternal(t,"realtime").catch(async r=>{throw z.error(`[SY] c:"${this.getKey()}" err :`,r),await this.handleConnectError(r),r}))}return this.enqueueTask(async()=>{const t=[];for(const[,r]of this.attachmentMap)t.push(this.syncInternal(r,r.syncMode));return Promise.all(t).catch(async r=>{throw z.error(`[SY] c:"${this.getKey()}" err :`,r),await this.handleConnectError(r),r})})}remove(e){if(!this.isActive())throw new S(w.ErrClientNotActivated,`${this.key} is not active`);const t=this.attachmentMap.get(e.getKey());if(!t)throw new S(w.ErrDocumentNotAttached,`${e.getKey()} is not attached`);e.setActor(this.id);const r=he.toChangePack(e.createChangePack());return r.isRemoved=!0,this.enqueueTask(async()=>{try{const i=await this.rpcClient.removeDocument({clientId:this.id,documentId:t.docID,changePack:r},{headers:{"x-shard-key":`${this.apiKey}/${e.getKey()}`}}),s=he.fromChangePack(i.changePack);e.applyChangePack(s),this.detachInternal(e.getKey()),z.info(`[RD] c:"${this.getKey()}" removes d:"${e.getKey()}"`)}catch(i){throw z.error(`[RD] c:"${this.getKey()}" err :`,i),await this.handleConnectError(i),i}})}getID(){return this.id}getKey(){return this.key}isActive(){return this.status==="activated"}getStatus(){return this.status}getCondition(e){return this.conditions[e]}broadcast(e,t,r,i){if(!this.isActive())throw new S(w.ErrClientNotActivated,`${this.key} is not active`);const s=this.attachmentMap.get(e);if(!s)throw new S(w.ErrDocumentNotAttached,`${e} is not attached`);if(!gk(r))throw new S(w.ErrInvalidArgument,"payload is not serializable");const o=(i==null?void 0:i.maxRetries)??Ou.maxRetries,a=Ou.maxBackoff;let u=0;const c=h=>Math.min(Ou.initialRetryInterval*2**h,a),d=async()=>this.enqueueTask(async()=>{try{await this.rpcClient.broadcast({clientId:this.id,documentId:s.docID,topic:t,payload:new TextEncoder().encode(JSON.stringify(r))},{headers:{"x-shard-key":`${this.apiKey}/${e}`}}),z.info(`[BC] c:"${this.getKey()}" broadcasts d:"${e}" t:"${t}"`)}catch(h){if(z.error(`[BC] c:"${this.getKey()}" err:`,h),await this.handleConnectError(h))if(h instanceof G&&Lr(h)===w.ErrUnauthenticated&&s.doc.publish([{type:Ee.AuthError,value:{reason:qs(h).reason,method:"Broadcast"}}]),u<o)u++,setTimeout(()=>d(),c(u-1)),z.info(`[BC] c:"${this.getKey()}" retry attempt ${u}/${o}`);else throw z.error(`[BC] c:"${this.getKey()}" exceeded maximum retry attempts`),h;else throw h}});return d()}runSyncLoop(){const e=()=>{if(!this.isActive()){z.debug(`[SL] c:"${this.getKey()}" exit sync loop`),this.conditions.SyncLoop=!1;return}const t=[];for(const[,r]of this.attachmentMap)r.needRealtimeSync()&&(r.remoteChangeEventReceived=!1,t.push(this.syncInternal(r,r.syncMode).catch(async i=>{throw i instanceof G&&Lr(i)===w.ErrUnauthenticated&&r.doc.publish([{type:Ee.AuthError,value:{reason:qs(i).reason,method:"PushPull"}}]),i})));Promise.all(t).then(()=>setTimeout(e,this.syncLoopDuration)).catch(async r=>{z.error(`[SL] c:"${this.getKey()}" sync failed:`,r),await this.handleConnectError(r)?setTimeout(e,this.retrySyncLoopDelay):this.conditions.SyncLoop=!1})};z.debug(`[SL] c:"${this.getKey()}" run sync loop`),this.conditions.SyncLoop=!0,e()}async runWatchLoop(e){const t=this.attachmentMap.get(e);if(!t)throw new S(w.ErrDocumentNotAttached,`${e} is not attached`);return this.conditions.WatchLoop=!0,t.runWatchLoop(r=>{if(!this.isActive())return this.conditions.WatchLoop=!1,Promise.reject(new S(w.ErrClientNotActivated,`${this.key} is not active`));const i=new AbortController,s=this.rpcClient.watchDocument({clientId:this.id,documentId:t.docID},{headers:{"x-shard-key":`${this.apiKey}/${e}`},signal:i.signal});return t.doc.publish([{type:Ee.ConnectionChanged,value:nf.Connected}]),z.info(`[WD] c:"${this.getKey()}" watches d:"${e}"`),new Promise((o,a)=>{(async()=>{try{for await(const c of s)this.handleWatchDocumentsResponse(t,c),c.body.case==="initialization"&&o([s,i])}catch(c){t.doc.resetOnlineClients(),t.doc.publish([{type:Ee.Initialized,source:Q.Local,value:t.doc.getPresences()}]),t.doc.publish([{type:Ee.ConnectionChanged,value:nf.Disconnected}]),z.debug(`[WD] c:"${this.getKey()}" unwatches`),await this.handleConnectError(c)?(c instanceof G&&Lr(c)===w.ErrUnauthenticated&&t.doc.publish([{type:Ee.AuthError,value:{reason:qs(c).reason,method:"WatchDocuments"}}]),r()):this.conditions.WatchLoop=!1,a(c)}})()})})}handleWatchDocumentsResponse(e,t){if(t.body.case==="event"&&t.body.value.type===Ii.DOCUMENT_CHANGED){e.remoteChangeEventReceived=!0;return}e.doc.applyWatchStream(t)}deactivateInternal(){this.status="deactivated";for(const[e,t]of this.attachmentMap)this.detachInternal(e),t.doc.applyStatus(br.Detached)}detachInternal(e){const t=this.attachmentMap.get(e);t&&(t.cancelWatchStream(),t.unsubscribeBroadcastEvent(),this.attachmentMap.delete(e))}async syncInternal(e,t){const{doc:r,docID:i}=e,s=r.createChangePack();try{const o=await this.rpcClient.pushPullChanges({clientId:this.id,documentId:i,changePack:he.toChangePack(s),pushOnly:t==="realtime-pushonly"},{headers:{"x-shard-key":`${this.apiKey}/${r.getKey()}`}}),a=he.fromChangePack(o.changePack);if(a.hasChanges()&&(e.syncMode==="realtime-pushonly"||e.syncMode==="realtime-syncoff"))return r;r.applyChangePack(a),e.doc.publish([{type:Ee.SyncStatusChanged,value:rf.Synced}]),r.getStatus()===br.Removed&&this.detachInternal(r.getKey());const u=r.getKey(),c=a.getChangeSize();return z.info(`[PP] c:"${this.getKey()}" sync d:"${u}", push:${s.getChangeSize()} pull:${c} cp:${a.getCheckpoint().toTestString()}`),r}catch(o){throw r.publish([{type:Ee.SyncStatusChanged,value:rf.SyncFailed}]),z.error(`[PP] c:"${this.getKey()}" err :`,o),o}}async handleConnectError(e){if(!(e instanceof G))return!1;if(e.code===q.Canceled||e.code===q.Unknown||e.code===q.ResourceExhausted||e.code===q.Unavailable)return!0;if(Lr(e)===w.ErrUnauthenticated){if(this.authTokenInjector){const t=await this.authTokenInjector(qs(e).reason);this.setAuthToken(t)}return!0}return Lr(e)===w.ErrTooManySubscribers?(z.error(`[WD] c:"${this.getKey()}" err :`,e.rawMessage),!0):(Lr(e)===w.ErrTooManyAttachments||(Lr(e)===w.ErrClientNotActivated||Lr(e)===w.ErrClientNotFound)&&this.deactivateInternal(),!1)}enqueueTask(e){return new Promise((t,r)=>{this.taskQueue.push(()=>e().then(t).catch(r)),this.processing||this.processNext()})}async processNext(){if(this.taskQueue.length===0){this.processing=!1;return}try{this.processing=!0,await this.taskQueue.shift()()}catch{z.error(`[TQ] c:"${this.getKey()}" process failed, id:"${this.id}"`)}this.processNext()}}const Ky={Client:qy,Document:Vy,IntType:cn.Int,LongType:cn.Long};typeof globalThis<"u"&&(globalThis.yorkie={Client:qy,Document:Vy,Primitive:ce,Text:yd,Counter:vd,Tree:kd,LogLevel:je,setLogLevel:_1,IntType:cn.Int,LongType:cn.Long});class mk{constructor(e,t){this.x=e,this.y=t,this.lifetime=0}}const pk=({xPos:n,yPos:e})=>{const[t,r]=Ve.useState([]),i=Ve.useRef(null),[s,o]=Ve.useState([]),a=(u,c)=>{const d=new mk(u,c);s.push(d),o(s),t.push(d),r(t)};return Ve.useEffect(()=>{const c=i.current.getContext("2d"),d=()=>{c.clearRect(0,0,c.canvas.width,c.canvas.height);const h=.7*(1*4e3)/60;for(let g=0;g<s.length;++g){const p=s[g];let k;if(s[g-1]!==void 0?k=s[g-1]:k=p,p.lifetime+=1,p.lifetime>h)s.shift();else{c.lineWidth=5,c.lineJoin="round";const T=0,P=0,y=0;c.strokeStyle=`rgb(${T},${P},${y})`,c.beginPath(),c.moveTo(k.x,k.y),c.lineTo(p.x,p.y),c.stroke(),c.closePath()}}requestAnimationFrame(d)};d()},[s]),Ve.useEffect(()=>{a(n,e)},[n,e]),ue.jsx("canvas",{className:"pen-cursor-canvas",ref:i,width:document.body.clientWidth,height:document.body.clientHeight})},yk="_goUp0_1lnal_1",vk="_goUpAnimation0_1lnal_1",wk="_fadeOut_1lnal_1",Sk="_goUp1_1lnal_16",kk="_goUpAnimation1_1lnal_1",Tk="_goUp2_1lnal_31",Ik="_goUpAnimation2_1lnal_1",Ek="_leftRight0_1lnal_46",Ak="_leftRightAnimation0_1lnal_1",xk="_leftRight1_1lnal_60",Nk="_leftRightAnimation1_1lnal_1",Pk="_leftRight2_1lnal_74",Ck="_leftRightAnimation2_1lnal_1",Ru={goUp0:yk,goUpAnimation0:vk,fadeOut:wk,goUp1:Sk,goUpAnimation1:kk,goUp2:Tk,goUpAnimation2:Ik,leftRight0:Ek,leftRightAnimation0:Ak,leftRight1:xk,leftRightAnimation1:Nk,leftRight2:Pk,leftRightAnimation2:Ck};function Dk({x:n,y:e,timestamp:t,selectedCursorShape:r}){return ue.jsx("div",{className:"single-animation-container",children:ue.jsx("div",{className:`absolute select-none pointer-events-none ${Ru.disappear} text-${t%5+2}xl ${Ru["goUp"+t%3]}`,style:{left:n,top:e},children:ue.jsx("div",{className:Ru["leftRight"+t%3],children:ue.jsx("div",{className:"transform -translate-x-1/2 -translate-y-1/2",children:ue.jsx("img",{src:`./icons/icon_${r}.svg`})})})})})}function Tg(n,e){const t=Ve.useRef(n);Ve.useEffect(()=>{t.current=n},[n]),Ve.useEffect(()=>{function r(){t.current()}if(e!==null){let i=setInterval(r,e);return()=>clearInterval(i)}},[e])}const Ok=({pointerDown:n,xPos:e,yPos:t,selectedCursorShape:r})=>{const[i,s]=Ve.useState([]),o=100;return Tg(()=>{s(a=>a.filter(u=>u.timestamp>Date.now()-4e3))},1e3),Tg(()=>{n&&s(a=>a.concat([{point:{x:e,y:t},timestamp:Date.now()}]))},o),ue.jsx("div",{style:{transform:`translateX(${e}px) translateY(${t}px)`},children:i.map(a=>ue.jsx(Dk,{x:a.point.x,y:a.point.y,timestamp:a.timestamp,selectedCursorShape:r},a.timestamp.toString()))})},Rk=({selectedCursorShape:n,x:e,y:t,pointerDown:r})=>ue.jsxs(ue.Fragment,{children:[ue.jsx("img",{src:`./icons/icon_${n}.svg`,className:`${n}-cursor`,style:{transform:`translate3d(${e}px, ${t}px, 0)`}}),(n==="heart"||n==="thumbs")&&ue.jsx(Ok,{pointerDown:r,xPos:e,yPos:t,selectedCursorShape:n}),n==="pen"&&r&&ue.jsx(pk,{xPos:e,yPos:t})]}),Lk=({handleCursorShapeSelect:n,clientsLength:e})=>{const[t,r]=Ve.useState("cursor"),i=["heart","thumbs","pen","cursor"];return ue.jsxs("div",{className:"cursor-selector-container",children:[ue.jsx("div",{className:"cursor-selections-container",children:i.map(s=>ue.jsx("img",{onClick:()=>{n(s),r(s)},className:`${t===s?"cursor-shape-selected":"cursor-shape-not-selected"}`,src:`./icons/icon_${s}.svg`},s))}),ue.jsx("div",{className:"num-users-container",children:ue.jsx("p",{children:e!==1?`${e} users are here`:"1 user here"})})]})},Ig=new Ky.Client({rpcAddr:"https://api.yorkie.dev",apiKey:"cedaovjuioqlk4pjqn6g"}),fi=new Ky.Document("simultaneous-cursors",{enableDevtools:!0}),Bk=()=>{const[n,e]=Ve.useState([]),t=r=>{fi.update((i,s)=>{s.set({cursorShape:r})})};return Ve.useEffect(()=>{(async()=>{await Ig.activate(),fi.subscribe("presence",a=>{e(fi.getPresences())}),await Ig.attach(fi,{initialPresence:{cursorShape:"cursor",cursor:{xPos:0,yPos:0},pointerDown:!1}})})();const i=()=>{fi.update((a,u)=>{u.set({pointerDown:!1})})},s=()=>{fi.update((a,u)=>{u.set({pointerDown:!0})})},o=a=>{fi.update((u,c)=>{c.set({cursor:{xPos:a.clientX,yPos:a.clientY}})})};return window.addEventListener("mousedown",s),window.addEventListener("mouseup",i),window.addEventListener("mousemove",o),()=>{window.removeEventListener("mousedown",s),window.removeEventListener("mouseup",i),window.removeEventListener("mousemove",o)}},[]),ue.jsxs("div",{className:"general-container",children:[n.map(({clientID:r,presence:{cursorShape:i,cursor:s,pointerDown:o}})=>s?ue.jsx(Rk,{selectedCursorShape:i,x:s.xPos,y:s.yPos,pointerDown:o},r):null),ue.jsx(Lk,{handleCursorShapeSelect:t,clientsLength:n.length})]})};Lu.createRoot(document.getElementById("root")).render(ue.jsx(Bk,{}));
