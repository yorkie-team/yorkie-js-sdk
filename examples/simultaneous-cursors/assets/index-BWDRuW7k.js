var Gp=Object.defineProperty;var Yp=(t,e,n)=>e in t?Gp(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var m=(t,e,n)=>Yp(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var ad={exports:{}},zo={},ld={exports:{}},V={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ls=Symbol.for("react.element"),Qp=Symbol.for("react.portal"),Xp=Symbol.for("react.fragment"),Zp=Symbol.for("react.strict_mode"),em=Symbol.for("react.profiler"),tm=Symbol.for("react.provider"),nm=Symbol.for("react.context"),rm=Symbol.for("react.forward_ref"),im=Symbol.for("react.suspense"),sm=Symbol.for("react.memo"),om=Symbol.for("react.lazy"),cc=Symbol.iterator;function am(t){return t===null||typeof t!="object"?null:(t=cc&&t[cc]||t["@@iterator"],typeof t=="function"?t:null)}var ud={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},cd=Object.assign,fd={};function ri(t,e,n){this.props=t,this.context=e,this.refs=fd,this.updater=n||ud}ri.prototype.isReactComponent={};ri.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ri.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function dd(){}dd.prototype=ri.prototype;function Ql(t,e,n){this.props=t,this.context=e,this.refs=fd,this.updater=n||ud}var Xl=Ql.prototype=new dd;Xl.constructor=Ql;cd(Xl,ri.prototype);Xl.isPureReactComponent=!0;var fc=Array.isArray,hd=Object.prototype.hasOwnProperty,Zl={current:null},gd={key:!0,ref:!0,__self:!0,__source:!0};function pd(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)hd.call(e,r)&&!gd.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:ls,type:t,key:s,ref:o,props:i,_owner:Zl.current}}function lm(t,e){return{$$typeof:ls,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function eu(t){return typeof t=="object"&&t!==null&&t.$$typeof===ls}function um(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var dc=/\/+/g;function ga(t,e){return typeof t=="object"&&t!==null&&t.key!=null?um(""+t.key):e.toString(36)}function Vs(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case ls:case Qp:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+ga(o,0):r,fc(i)?(n="",t!=null&&(n=t.replace(dc,"$&/")+"/"),Vs(i,e,n,"",function(u){return u})):i!=null&&(eu(i)&&(i=lm(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(dc,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",fc(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+ga(s,a);o+=Vs(s,e,n,l,i)}else if(l=am(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+ga(s,a++),o+=Vs(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ss(t,e,n){if(t==null)return t;var r=[],i=0;return Vs(t,r,"","",function(s){return e.call(n,s,i++)}),r}function cm(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Me={current:null},Js={transition:null},fm={ReactCurrentDispatcher:Me,ReactCurrentBatchConfig:Js,ReactCurrentOwner:Zl};V.Children={map:Ss,forEach:function(t,e,n){Ss(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ss(t,function(){e++}),e},toArray:function(t){return Ss(t,function(e){return e})||[]},only:function(t){if(!eu(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};V.Component=ri;V.Fragment=Xp;V.Profiler=em;V.PureComponent=Ql;V.StrictMode=Zp;V.Suspense=im;V.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fm;V.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=cd({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Zl.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)hd.call(e,l)&&!gd.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:ls,type:t.type,key:i,ref:s,props:r,_owner:o}};V.createContext=function(t){return t={$$typeof:nm,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:tm,_context:t},t.Consumer=t};V.createElement=pd;V.createFactory=function(t){var e=pd.bind(null,t);return e.type=t,e};V.createRef=function(){return{current:null}};V.forwardRef=function(t){return{$$typeof:rm,render:t}};V.isValidElement=eu;V.lazy=function(t){return{$$typeof:om,_payload:{_status:-1,_result:t},_init:cm}};V.memo=function(t,e){return{$$typeof:sm,type:t,compare:e===void 0?null:e}};V.startTransition=function(t){var e=Js.transition;Js.transition={};try{t()}finally{Js.transition=e}};V.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};V.useCallback=function(t,e){return Me.current.useCallback(t,e)};V.useContext=function(t){return Me.current.useContext(t)};V.useDebugValue=function(){};V.useDeferredValue=function(t){return Me.current.useDeferredValue(t)};V.useEffect=function(t,e){return Me.current.useEffect(t,e)};V.useId=function(){return Me.current.useId()};V.useImperativeHandle=function(t,e,n){return Me.current.useImperativeHandle(t,e,n)};V.useInsertionEffect=function(t,e){return Me.current.useInsertionEffect(t,e)};V.useLayoutEffect=function(t,e){return Me.current.useLayoutEffect(t,e)};V.useMemo=function(t,e){return Me.current.useMemo(t,e)};V.useReducer=function(t,e,n){return Me.current.useReducer(t,e,n)};V.useRef=function(t){return Me.current.useRef(t)};V.useState=function(t){return Me.current.useState(t)};V.useSyncExternalStore=function(t,e,n){return Me.current.useSyncExternalStore(t,e,n)};V.useTransition=function(){return Me.current.useTransition()};V.version="18.2.0";ld.exports=V;var Ue=ld.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dm=Ue,hm=Symbol.for("react.element"),gm=Symbol.for("react.fragment"),pm=Object.prototype.hasOwnProperty,mm=dm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ym={key:!0,ref:!0,__self:!0,__source:!0};function md(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)pm.call(e,r)&&!ym.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:hm,type:t,key:s,ref:o,props:i,_owner:mm.current}}zo.Fragment=gm;zo.jsx=md;zo.jsxs=md;ad.exports=zo;var ae=ad.exports,Ya={},yd={exports:{}},it={},vd={exports:{}},wd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(R,$){var j=R.length;R.push($);e:for(;0<j;){var le=j-1>>>1,we=R[le];if(0<i(we,$))R[le]=$,R[j]=we,j=le;else break e}}function n(R){return R.length===0?null:R[0]}function r(R){if(R.length===0)return null;var $=R[0],j=R.pop();if(j!==$){R[0]=j;e:for(var le=0,we=R.length,vs=we>>>1;le<vs;){var Kn=2*(le+1)-1,ha=R[Kn],Wn=Kn+1,ws=R[Wn];if(0>i(ha,j))Wn<we&&0>i(ws,ha)?(R[le]=ws,R[Wn]=j,le=Wn):(R[le]=ha,R[Kn]=j,le=Kn);else if(Wn<we&&0>i(ws,j))R[le]=ws,R[Wn]=j,le=Wn;else break e}}return $}function i(R,$){var j=R.sortIndex-$.sortIndex;return j!==0?j:R.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,h=null,g=3,d=!1,v=!1,I=!1,O=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,f=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(R){for(var $=n(u);$!==null;){if($.callback===null)r(u);else if($.startTime<=R)r(u),$.sortIndex=$.expirationTime,e(l,$);else break;$=n(u)}}function k(R){if(I=!1,y(R),!v)if(n(l)!==null)v=!0,fa(N);else{var $=n(u);$!==null&&da(k,$.startTime-R)}}function N(R,$){v=!1,I&&(I=!1,p(_),_=-1),d=!0;var j=g;try{for(y($),h=n(l);h!==null&&(!(h.expirationTime>$)||R&&!Ge());){var le=h.callback;if(typeof le=="function"){h.callback=null,g=h.priorityLevel;var we=le(h.expirationTime<=$);$=t.unstable_now(),typeof we=="function"?h.callback=we:h===n(l)&&r(l),y($)}else r(l);h=n(l)}if(h!==null)var vs=!0;else{var Kn=n(u);Kn!==null&&da(k,Kn.startTime-$),vs=!1}return vs}finally{h=null,g=j,d=!1}}var C=!1,P=null,_=-1,W=5,U=-1;function Ge(){return!(t.unstable_now()-U<W)}function oi(){if(P!==null){var R=t.unstable_now();U=R;var $=!0;try{$=P(!0,R)}finally{$?ai():(C=!1,P=null)}}else C=!1}var ai;if(typeof f=="function")ai=function(){f(oi)};else if(typeof MessageChannel<"u"){var uc=new MessageChannel,Hp=uc.port2;uc.port1.onmessage=oi,ai=function(){Hp.postMessage(null)}}else ai=function(){O(oi,0)};function fa(R){P=R,C||(C=!0,ai())}function da(R,$){_=O(function(){R(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(R){R.callback=null},t.unstable_continueExecution=function(){v||d||(v=!0,fa(N))},t.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W=0<R?Math.floor(1e3/R):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(R){switch(g){case 1:case 2:case 3:var $=3;break;default:$=g}var j=g;g=$;try{return R()}finally{g=j}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(R,$){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var j=g;g=R;try{return $()}finally{g=j}},t.unstable_scheduleCallback=function(R,$,j){var le=t.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?le+j:le):j=le,R){case 1:var we=-1;break;case 2:we=250;break;case 5:we=1073741823;break;case 4:we=1e4;break;default:we=5e3}return we=j+we,R={id:c++,callback:$,priorityLevel:R,startTime:j,expirationTime:we,sortIndex:-1},j>le?(R.sortIndex=j,e(u,R),n(l)===null&&R===n(u)&&(I?(p(_),_=-1):I=!0,da(k,j-le))):(R.sortIndex=we,e(l,R),v||d||(v=!0,fa(N))),R},t.unstable_shouldYield=Ge,t.unstable_wrapCallback=function(R){var $=g;return function(){var j=g;g=$;try{return R.apply(this,arguments)}finally{g=j}}}})(wd);vd.exports=wd;var vm=vd.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sd=Ue,rt=vm;function E(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Td=new Set,Mi={};function hr(t,e){Vr(t,e),Vr(t+"Capture",e)}function Vr(t,e){for(Mi[t]=e,t=0;t<e.length;t++)Td.add(e[t])}var ln=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Qa=Object.prototype.hasOwnProperty,wm=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,hc={},gc={};function Sm(t){return Qa.call(gc,t)?!0:Qa.call(hc,t)?!1:wm.test(t)?gc[t]=!0:(hc[t]=!0,!1)}function Tm(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function km(t,e,n,r){if(e===null||typeof e>"u"||Tm(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Fe(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Ee={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ee[t]=new Fe(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ee[e]=new Fe(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ee[t]=new Fe(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ee[t]=new Fe(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ee[t]=new Fe(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ee[t]=new Fe(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ee[t]=new Fe(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ee[t]=new Fe(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ee[t]=new Fe(t,5,!1,t.toLowerCase(),null,!1,!1)});var tu=/[\-:]([a-z])/g;function nu(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(tu,nu);Ee[e]=new Fe(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(tu,nu);Ee[e]=new Fe(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(tu,nu);Ee[e]=new Fe(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ee[t]=new Fe(t,1,!1,t.toLowerCase(),null,!1,!1)});Ee.xlinkHref=new Fe("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ee[t]=new Fe(t,1,!1,t.toLowerCase(),null,!0,!0)});function ru(t,e,n,r){var i=Ee.hasOwnProperty(e)?Ee[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(km(e,n,i,r)&&(n=null),r||i===null?Sm(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var hn=Sd.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ts=Symbol.for("react.element"),Sr=Symbol.for("react.portal"),Tr=Symbol.for("react.fragment"),iu=Symbol.for("react.strict_mode"),Xa=Symbol.for("react.profiler"),kd=Symbol.for("react.provider"),Ad=Symbol.for("react.context"),su=Symbol.for("react.forward_ref"),Za=Symbol.for("react.suspense"),el=Symbol.for("react.suspense_list"),ou=Symbol.for("react.memo"),wn=Symbol.for("react.lazy"),Id=Symbol.for("react.offscreen"),pc=Symbol.iterator;function li(t){return t===null||typeof t!="object"?null:(t=pc&&t[pc]||t["@@iterator"],typeof t=="function"?t:null)}var re=Object.assign,pa;function vi(t){if(pa===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);pa=e&&e[1]||""}return`
`+pa+t}var ma=!1;function ya(t,e){if(!t||ma)return"";ma=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{ma=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?vi(t):""}function Am(t){switch(t.tag){case 5:return vi(t.type);case 16:return vi("Lazy");case 13:return vi("Suspense");case 19:return vi("SuspenseList");case 0:case 2:case 15:return t=ya(t.type,!1),t;case 11:return t=ya(t.type.render,!1),t;case 1:return t=ya(t.type,!0),t;default:return""}}function tl(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Tr:return"Fragment";case Sr:return"Portal";case Xa:return"Profiler";case iu:return"StrictMode";case Za:return"Suspense";case el:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Ad:return(t.displayName||"Context")+".Consumer";case kd:return(t._context.displayName||"Context")+".Provider";case su:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ou:return e=t.displayName||null,e!==null?e:tl(t.type)||"Memo";case wn:e=t._payload,t=t._init;try{return tl(t(e))}catch{}}return null}function Im(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return tl(e);case 8:return e===iu?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Fn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ed(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Em(t){var e=Ed(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ks(t){t._valueTracker||(t._valueTracker=Em(t))}function Nd(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Ed(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function lo(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function nl(t,e){var n=e.checked;return re({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function mc(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Fn(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function xd(t,e){e=e.checked,e!=null&&ru(t,"checked",e,!1)}function rl(t,e){xd(t,e);var n=Fn(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?il(t,e.type,n):e.hasOwnProperty("defaultValue")&&il(t,e.type,Fn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function yc(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function il(t,e,n){(e!=="number"||lo(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var wi=Array.isArray;function Lr(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Fn(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function sl(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(E(91));return re({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function vc(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(E(92));if(wi(n)){if(1<n.length)throw Error(E(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Fn(n)}}function Cd(t,e){var n=Fn(e.value),r=Fn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function wc(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Pd(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ol(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Pd(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var As,Od=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(As=As||document.createElement("div"),As.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=As.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Fi(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ki={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Nm=["Webkit","ms","Moz","O"];Object.keys(ki).forEach(function(t){Nm.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ki[e]=ki[t]})});function Dd(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ki.hasOwnProperty(t)&&ki[t]?(""+e).trim():e+"px"}function Rd(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Dd(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var xm=re({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function al(t,e){if(e){if(xm[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(E(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(E(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(E(61))}if(e.style!=null&&typeof e.style!="object")throw Error(E(62))}}function ll(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ul=null;function au(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var cl=null,br=null,Mr=null;function Sc(t){if(t=fs(t)){if(typeof cl!="function")throw Error(E(280));var e=t.stateNode;e&&(e=Ko(e),cl(t.stateNode,t.type,e))}}function _d(t){br?Mr?Mr.push(t):Mr=[t]:br=t}function Ld(){if(br){var t=br,e=Mr;if(Mr=br=null,Sc(t),e)for(t=0;t<e.length;t++)Sc(e[t])}}function bd(t,e){return t(e)}function Md(){}var va=!1;function Fd(t,e,n){if(va)return t(e,n);va=!0;try{return bd(t,e,n)}finally{va=!1,(br!==null||Mr!==null)&&(Md(),Ld())}}function Bi(t,e){var n=t.stateNode;if(n===null)return null;var r=Ko(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(E(231,e,typeof n));return n}var fl=!1;if(ln)try{var ui={};Object.defineProperty(ui,"passive",{get:function(){fl=!0}}),window.addEventListener("test",ui,ui),window.removeEventListener("test",ui,ui)}catch{fl=!1}function Cm(t,e,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var Ai=!1,uo=null,co=!1,dl=null,Pm={onError:function(t){Ai=!0,uo=t}};function Om(t,e,n,r,i,s,o,a,l){Ai=!1,uo=null,Cm.apply(Pm,arguments)}function Dm(t,e,n,r,i,s,o,a,l){if(Om.apply(this,arguments),Ai){if(Ai){var u=uo;Ai=!1,uo=null}else throw Error(E(198));co||(co=!0,dl=u)}}function gr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Bd(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Tc(t){if(gr(t)!==t)throw Error(E(188))}function Rm(t){var e=t.alternate;if(!e){if(e=gr(t),e===null)throw Error(E(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Tc(i),t;if(s===r)return Tc(i),e;s=s.sibling}throw Error(E(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(E(189))}}if(n.alternate!==r)throw Error(E(190))}if(n.tag!==3)throw Error(E(188));return n.stateNode.current===n?t:e}function $d(t){return t=Rm(t),t!==null?zd(t):null}function zd(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=zd(t);if(e!==null)return e;t=t.sibling}return null}var Ud=rt.unstable_scheduleCallback,kc=rt.unstable_cancelCallback,_m=rt.unstable_shouldYield,Lm=rt.unstable_requestPaint,ue=rt.unstable_now,bm=rt.unstable_getCurrentPriorityLevel,lu=rt.unstable_ImmediatePriority,jd=rt.unstable_UserBlockingPriority,fo=rt.unstable_NormalPriority,Mm=rt.unstable_LowPriority,Vd=rt.unstable_IdlePriority,Uo=null,Kt=null;function Fm(t){if(Kt&&typeof Kt.onCommitFiberRoot=="function")try{Kt.onCommitFiberRoot(Uo,t,void 0,(t.current.flags&128)===128)}catch{}}var It=Math.clz32?Math.clz32:zm,Bm=Math.log,$m=Math.LN2;function zm(t){return t>>>=0,t===0?32:31-(Bm(t)/$m|0)|0}var Is=64,Es=4194304;function Si(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ho(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Si(a):(s&=o,s!==0&&(r=Si(s)))}else o=n&~i,o!==0?r=Si(o):s!==0&&(r=Si(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-It(e),i=1<<n,r|=t[n],e&=~i;return r}function Um(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function jm(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-It(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=Um(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function hl(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Jd(){var t=Is;return Is<<=1,!(Is&4194240)&&(Is=64),t}function wa(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function us(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-It(e),t[e]=n}function Vm(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-It(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function uu(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-It(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var H=0;function Kd(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Wd,cu,qd,Hd,Gd,gl=!1,Ns=[],xn=null,Cn=null,Pn=null,$i=new Map,zi=new Map,Tn=[],Jm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ac(t,e){switch(t){case"focusin":case"focusout":xn=null;break;case"dragenter":case"dragleave":Cn=null;break;case"mouseover":case"mouseout":Pn=null;break;case"pointerover":case"pointerout":$i.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":zi.delete(e.pointerId)}}function ci(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=fs(e),e!==null&&cu(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Km(t,e,n,r,i){switch(e){case"focusin":return xn=ci(xn,t,e,n,r,i),!0;case"dragenter":return Cn=ci(Cn,t,e,n,r,i),!0;case"mouseover":return Pn=ci(Pn,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return $i.set(s,ci($i.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,zi.set(s,ci(zi.get(s)||null,t,e,n,r,i)),!0}return!1}function Yd(t){var e=Xn(t.target);if(e!==null){var n=gr(e);if(n!==null){if(e=n.tag,e===13){if(e=Bd(n),e!==null){t.blockedOn=e,Gd(t.priority,function(){qd(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ks(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=pl(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);ul=r,n.target.dispatchEvent(r),ul=null}else return e=fs(n),e!==null&&cu(e),t.blockedOn=n,!1;e.shift()}return!0}function Ic(t,e,n){Ks(t)&&n.delete(e)}function Wm(){gl=!1,xn!==null&&Ks(xn)&&(xn=null),Cn!==null&&Ks(Cn)&&(Cn=null),Pn!==null&&Ks(Pn)&&(Pn=null),$i.forEach(Ic),zi.forEach(Ic)}function fi(t,e){t.blockedOn===e&&(t.blockedOn=null,gl||(gl=!0,rt.unstable_scheduleCallback(rt.unstable_NormalPriority,Wm)))}function Ui(t){function e(i){return fi(i,t)}if(0<Ns.length){fi(Ns[0],t);for(var n=1;n<Ns.length;n++){var r=Ns[n];r.blockedOn===t&&(r.blockedOn=null)}}for(xn!==null&&fi(xn,t),Cn!==null&&fi(Cn,t),Pn!==null&&fi(Pn,t),$i.forEach(e),zi.forEach(e),n=0;n<Tn.length;n++)r=Tn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Tn.length&&(n=Tn[0],n.blockedOn===null);)Yd(n),n.blockedOn===null&&Tn.shift()}var Fr=hn.ReactCurrentBatchConfig,go=!0;function qm(t,e,n,r){var i=H,s=Fr.transition;Fr.transition=null;try{H=1,fu(t,e,n,r)}finally{H=i,Fr.transition=s}}function Hm(t,e,n,r){var i=H,s=Fr.transition;Fr.transition=null;try{H=4,fu(t,e,n,r)}finally{H=i,Fr.transition=s}}function fu(t,e,n,r){if(go){var i=pl(t,e,n,r);if(i===null)Pa(t,e,r,po,n),Ac(t,r);else if(Km(i,t,e,n,r))r.stopPropagation();else if(Ac(t,r),e&4&&-1<Jm.indexOf(t)){for(;i!==null;){var s=fs(i);if(s!==null&&Wd(s),s=pl(t,e,n,r),s===null&&Pa(t,e,r,po,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Pa(t,e,r,null,n)}}var po=null;function pl(t,e,n,r){if(po=null,t=au(r),t=Xn(t),t!==null)if(e=gr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Bd(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return po=t,null}function Qd(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(bm()){case lu:return 1;case jd:return 4;case fo:case Mm:return 16;case Vd:return 536870912;default:return 16}default:return 16}}var In=null,du=null,Ws=null;function Xd(){if(Ws)return Ws;var t,e=du,n=e.length,r,i="value"in In?In.value:In.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Ws=i.slice(t,1<r?1-r:void 0)}function qs(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function xs(){return!0}function Ec(){return!1}function st(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?xs:Ec,this.isPropagationStopped=Ec,this}return re(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=xs)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=xs)},persist:function(){},isPersistent:xs}),e}var ii={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hu=st(ii),cs=re({},ii,{view:0,detail:0}),Gm=st(cs),Sa,Ta,di,jo=re({},cs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gu,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==di&&(di&&t.type==="mousemove"?(Sa=t.screenX-di.screenX,Ta=t.screenY-di.screenY):Ta=Sa=0,di=t),Sa)},movementY:function(t){return"movementY"in t?t.movementY:Ta}}),Nc=st(jo),Ym=re({},jo,{dataTransfer:0}),Qm=st(Ym),Xm=re({},cs,{relatedTarget:0}),ka=st(Xm),Zm=re({},ii,{animationName:0,elapsedTime:0,pseudoElement:0}),ey=st(Zm),ty=re({},ii,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ny=st(ty),ry=re({},ii,{data:0}),xc=st(ry),iy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},sy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},oy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ay(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=oy[t])?!!e[t]:!1}function gu(){return ay}var ly=re({},cs,{key:function(t){if(t.key){var e=iy[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=qs(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?sy[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gu,charCode:function(t){return t.type==="keypress"?qs(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?qs(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),uy=st(ly),cy=re({},jo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Cc=st(cy),fy=re({},cs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gu}),dy=st(fy),hy=re({},ii,{propertyName:0,elapsedTime:0,pseudoElement:0}),gy=st(hy),py=re({},jo,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),my=st(py),yy=[9,13,27,32],pu=ln&&"CompositionEvent"in window,Ii=null;ln&&"documentMode"in document&&(Ii=document.documentMode);var vy=ln&&"TextEvent"in window&&!Ii,Zd=ln&&(!pu||Ii&&8<Ii&&11>=Ii),Pc=" ",Oc=!1;function eh(t,e){switch(t){case"keyup":return yy.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function th(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var kr=!1;function wy(t,e){switch(t){case"compositionend":return th(e);case"keypress":return e.which!==32?null:(Oc=!0,Pc);case"textInput":return t=e.data,t===Pc&&Oc?null:t;default:return null}}function Sy(t,e){if(kr)return t==="compositionend"||!pu&&eh(t,e)?(t=Xd(),Ws=du=In=null,kr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Zd&&e.locale!=="ko"?null:e.data;default:return null}}var Ty={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dc(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Ty[t.type]:e==="textarea"}function nh(t,e,n,r){_d(r),e=mo(e,"onChange"),0<e.length&&(n=new hu("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ei=null,ji=null;function ky(t){hh(t,0)}function Vo(t){var e=Er(t);if(Nd(e))return t}function Ay(t,e){if(t==="change")return e}var rh=!1;if(ln){var Aa;if(ln){var Ia="oninput"in document;if(!Ia){var Rc=document.createElement("div");Rc.setAttribute("oninput","return;"),Ia=typeof Rc.oninput=="function"}Aa=Ia}else Aa=!1;rh=Aa&&(!document.documentMode||9<document.documentMode)}function _c(){Ei&&(Ei.detachEvent("onpropertychange",ih),ji=Ei=null)}function ih(t){if(t.propertyName==="value"&&Vo(ji)){var e=[];nh(e,ji,t,au(t)),Fd(ky,e)}}function Iy(t,e,n){t==="focusin"?(_c(),Ei=e,ji=n,Ei.attachEvent("onpropertychange",ih)):t==="focusout"&&_c()}function Ey(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Vo(ji)}function Ny(t,e){if(t==="click")return Vo(e)}function xy(t,e){if(t==="input"||t==="change")return Vo(e)}function Cy(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ct=typeof Object.is=="function"?Object.is:Cy;function Vi(t,e){if(Ct(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Qa.call(e,i)||!Ct(t[i],e[i]))return!1}return!0}function Lc(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function bc(t,e){var n=Lc(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Lc(n)}}function sh(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?sh(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function oh(){for(var t=window,e=lo();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=lo(t.document)}return e}function mu(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Py(t){var e=oh(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&sh(n.ownerDocument.documentElement,n)){if(r!==null&&mu(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=bc(n,s);var o=bc(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Oy=ln&&"documentMode"in document&&11>=document.documentMode,Ar=null,ml=null,Ni=null,yl=!1;function Mc(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;yl||Ar==null||Ar!==lo(r)||(r=Ar,"selectionStart"in r&&mu(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ni&&Vi(Ni,r)||(Ni=r,r=mo(ml,"onSelect"),0<r.length&&(e=new hu("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ar)))}function Cs(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ir={animationend:Cs("Animation","AnimationEnd"),animationiteration:Cs("Animation","AnimationIteration"),animationstart:Cs("Animation","AnimationStart"),transitionend:Cs("Transition","TransitionEnd")},Ea={},ah={};ln&&(ah=document.createElement("div").style,"AnimationEvent"in window||(delete Ir.animationend.animation,delete Ir.animationiteration.animation,delete Ir.animationstart.animation),"TransitionEvent"in window||delete Ir.transitionend.transition);function Jo(t){if(Ea[t])return Ea[t];if(!Ir[t])return t;var e=Ir[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in ah)return Ea[t]=e[n];return t}var lh=Jo("animationend"),uh=Jo("animationiteration"),ch=Jo("animationstart"),fh=Jo("transitionend"),dh=new Map,Fc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function jn(t,e){dh.set(t,e),hr(e,[t])}for(var Na=0;Na<Fc.length;Na++){var xa=Fc[Na],Dy=xa.toLowerCase(),Ry=xa[0].toUpperCase()+xa.slice(1);jn(Dy,"on"+Ry)}jn(lh,"onAnimationEnd");jn(uh,"onAnimationIteration");jn(ch,"onAnimationStart");jn("dblclick","onDoubleClick");jn("focusin","onFocus");jn("focusout","onBlur");jn(fh,"onTransitionEnd");Vr("onMouseEnter",["mouseout","mouseover"]);Vr("onMouseLeave",["mouseout","mouseover"]);Vr("onPointerEnter",["pointerout","pointerover"]);Vr("onPointerLeave",["pointerout","pointerover"]);hr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));hr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));hr("onBeforeInput",["compositionend","keypress","textInput","paste"]);hr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));hr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));hr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ti="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_y=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ti));function Bc(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Dm(r,e,void 0,t),t.currentTarget=null}function hh(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Bc(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Bc(i,a,u),s=l}}}if(co)throw t=dl,co=!1,dl=null,t}function Q(t,e){var n=e[kl];n===void 0&&(n=e[kl]=new Set);var r=t+"__bubble";n.has(r)||(gh(e,t,2,!1),n.add(r))}function Ca(t,e,n){var r=0;e&&(r|=4),gh(n,t,r,e)}var Ps="_reactListening"+Math.random().toString(36).slice(2);function Ji(t){if(!t[Ps]){t[Ps]=!0,Td.forEach(function(n){n!=="selectionchange"&&(_y.has(n)||Ca(n,!1,t),Ca(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ps]||(e[Ps]=!0,Ca("selectionchange",!1,e))}}function gh(t,e,n,r){switch(Qd(e)){case 1:var i=qm;break;case 4:i=Hm;break;default:i=fu}n=i.bind(null,e,n,t),i=void 0,!fl||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Pa(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Xn(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}Fd(function(){var u=s,c=au(n),h=[];e:{var g=dh.get(t);if(g!==void 0){var d=hu,v=t;switch(t){case"keypress":if(qs(n)===0)break e;case"keydown":case"keyup":d=uy;break;case"focusin":v="focus",d=ka;break;case"focusout":v="blur",d=ka;break;case"beforeblur":case"afterblur":d=ka;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":d=Nc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":d=Qm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":d=dy;break;case lh:case uh:case ch:d=ey;break;case fh:d=gy;break;case"scroll":d=Gm;break;case"wheel":d=my;break;case"copy":case"cut":case"paste":d=ny;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":d=Cc}var I=(e&4)!==0,O=!I&&t==="scroll",p=I?g!==null?g+"Capture":null:g;I=[];for(var f=u,y;f!==null;){y=f;var k=y.stateNode;if(y.tag===5&&k!==null&&(y=k,p!==null&&(k=Bi(f,p),k!=null&&I.push(Ki(f,k,y)))),O)break;f=f.return}0<I.length&&(g=new d(g,v,null,n,c),h.push({event:g,listeners:I}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",d=t==="mouseout"||t==="pointerout",g&&n!==ul&&(v=n.relatedTarget||n.fromElement)&&(Xn(v)||v[un]))break e;if((d||g)&&(g=c.window===c?c:(g=c.ownerDocument)?g.defaultView||g.parentWindow:window,d?(v=n.relatedTarget||n.toElement,d=u,v=v?Xn(v):null,v!==null&&(O=gr(v),v!==O||v.tag!==5&&v.tag!==6)&&(v=null)):(d=null,v=u),d!==v)){if(I=Nc,k="onMouseLeave",p="onMouseEnter",f="mouse",(t==="pointerout"||t==="pointerover")&&(I=Cc,k="onPointerLeave",p="onPointerEnter",f="pointer"),O=d==null?g:Er(d),y=v==null?g:Er(v),g=new I(k,f+"leave",d,n,c),g.target=O,g.relatedTarget=y,k=null,Xn(c)===u&&(I=new I(p,f+"enter",v,n,c),I.target=y,I.relatedTarget=O,k=I),O=k,d&&v)t:{for(I=d,p=v,f=0,y=I;y;y=mr(y))f++;for(y=0,k=p;k;k=mr(k))y++;for(;0<f-y;)I=mr(I),f--;for(;0<y-f;)p=mr(p),y--;for(;f--;){if(I===p||p!==null&&I===p.alternate)break t;I=mr(I),p=mr(p)}I=null}else I=null;d!==null&&$c(h,g,d,I,!1),v!==null&&O!==null&&$c(h,O,v,I,!0)}}e:{if(g=u?Er(u):window,d=g.nodeName&&g.nodeName.toLowerCase(),d==="select"||d==="input"&&g.type==="file")var N=Ay;else if(Dc(g))if(rh)N=xy;else{N=Ey;var C=Iy}else(d=g.nodeName)&&d.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(N=Ny);if(N&&(N=N(t,u))){nh(h,N,n,c);break e}C&&C(t,g,u),t==="focusout"&&(C=g._wrapperState)&&C.controlled&&g.type==="number"&&il(g,"number",g.value)}switch(C=u?Er(u):window,t){case"focusin":(Dc(C)||C.contentEditable==="true")&&(Ar=C,ml=u,Ni=null);break;case"focusout":Ni=ml=Ar=null;break;case"mousedown":yl=!0;break;case"contextmenu":case"mouseup":case"dragend":yl=!1,Mc(h,n,c);break;case"selectionchange":if(Oy)break;case"keydown":case"keyup":Mc(h,n,c)}var P;if(pu)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else kr?eh(t,n)&&(_="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(Zd&&n.locale!=="ko"&&(kr||_!=="onCompositionStart"?_==="onCompositionEnd"&&kr&&(P=Xd()):(In=c,du="value"in In?In.value:In.textContent,kr=!0)),C=mo(u,_),0<C.length&&(_=new xc(_,t,null,n,c),h.push({event:_,listeners:C}),P?_.data=P:(P=th(n),P!==null&&(_.data=P)))),(P=vy?wy(t,n):Sy(t,n))&&(u=mo(u,"onBeforeInput"),0<u.length&&(c=new xc("onBeforeInput","beforeinput",null,n,c),h.push({event:c,listeners:u}),c.data=P))}hh(h,e)})}function Ki(t,e,n){return{instance:t,listener:e,currentTarget:n}}function mo(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Bi(t,n),s!=null&&r.unshift(Ki(t,s,i)),s=Bi(t,e),s!=null&&r.push(Ki(t,s,i))),t=t.return}return r}function mr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function $c(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=Bi(n,s),l!=null&&o.unshift(Ki(n,l,a))):i||(l=Bi(n,s),l!=null&&o.push(Ki(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Ly=/\r\n?/g,by=/\u0000|\uFFFD/g;function zc(t){return(typeof t=="string"?t:""+t).replace(Ly,`
`).replace(by,"")}function Os(t,e,n){if(e=zc(e),zc(t)!==e&&n)throw Error(E(425))}function yo(){}var vl=null,wl=null;function Sl(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Tl=typeof setTimeout=="function"?setTimeout:void 0,My=typeof clearTimeout=="function"?clearTimeout:void 0,Uc=typeof Promise=="function"?Promise:void 0,Fy=typeof queueMicrotask=="function"?queueMicrotask:typeof Uc<"u"?function(t){return Uc.resolve(null).then(t).catch(By)}:Tl;function By(t){setTimeout(function(){throw t})}function Oa(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Ui(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Ui(e)}function On(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function jc(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var si=Math.random().toString(36).slice(2),Lt="__reactFiber$"+si,Wi="__reactProps$"+si,un="__reactContainer$"+si,kl="__reactEvents$"+si,$y="__reactListeners$"+si,zy="__reactHandles$"+si;function Xn(t){var e=t[Lt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[un]||n[Lt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=jc(t);t!==null;){if(n=t[Lt])return n;t=jc(t)}return e}t=n,n=t.parentNode}return null}function fs(t){return t=t[Lt]||t[un],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Er(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(E(33))}function Ko(t){return t[Wi]||null}var Al=[],Nr=-1;function Vn(t){return{current:t}}function X(t){0>Nr||(t.current=Al[Nr],Al[Nr]=null,Nr--)}function Y(t,e){Nr++,Al[Nr]=t.current,t.current=e}var Bn={},Oe=Vn(Bn),Je=Vn(!1),or=Bn;function Jr(t,e){var n=t.type.contextTypes;if(!n)return Bn;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Ke(t){return t=t.childContextTypes,t!=null}function vo(){X(Je),X(Oe)}function Vc(t,e,n){if(Oe.current!==Bn)throw Error(E(168));Y(Oe,e),Y(Je,n)}function ph(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(E(108,Im(t)||"Unknown",i));return re({},n,r)}function wo(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Bn,or=Oe.current,Y(Oe,t),Y(Je,Je.current),!0}function Jc(t,e,n){var r=t.stateNode;if(!r)throw Error(E(169));n?(t=ph(t,e,or),r.__reactInternalMemoizedMergedChildContext=t,X(Je),X(Oe),Y(Oe,t)):X(Je),Y(Je,n)}var Yt=null,Wo=!1,Da=!1;function mh(t){Yt===null?Yt=[t]:Yt.push(t)}function Uy(t){Wo=!0,mh(t)}function Jn(){if(!Da&&Yt!==null){Da=!0;var t=0,e=H;try{var n=Yt;for(H=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Yt=null,Wo=!1}catch(i){throw Yt!==null&&(Yt=Yt.slice(t+1)),Ud(lu,Jn),i}finally{H=e,Da=!1}}return null}var xr=[],Cr=0,So=null,To=0,ot=[],at=0,ar=null,Zt=1,en="";function Hn(t,e){xr[Cr++]=To,xr[Cr++]=So,So=t,To=e}function yh(t,e,n){ot[at++]=Zt,ot[at++]=en,ot[at++]=ar,ar=t;var r=Zt;t=en;var i=32-It(r)-1;r&=~(1<<i),n+=1;var s=32-It(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Zt=1<<32-It(e)+i|n<<i|r,en=s+t}else Zt=1<<s|n<<i|r,en=t}function yu(t){t.return!==null&&(Hn(t,1),yh(t,1,0))}function vu(t){for(;t===So;)So=xr[--Cr],xr[Cr]=null,To=xr[--Cr],xr[Cr]=null;for(;t===ar;)ar=ot[--at],ot[at]=null,en=ot[--at],ot[at]=null,Zt=ot[--at],ot[at]=null}var et=null,Qe=null,Z=!1,Tt=null;function vh(t,e){var n=lt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Kc(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,et=t,Qe=On(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,et=t,Qe=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ar!==null?{id:Zt,overflow:en}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=lt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,et=t,Qe=null,!0):!1;default:return!1}}function Il(t){return(t.mode&1)!==0&&(t.flags&128)===0}function El(t){if(Z){var e=Qe;if(e){var n=e;if(!Kc(t,e)){if(Il(t))throw Error(E(418));e=On(n.nextSibling);var r=et;e&&Kc(t,e)?vh(r,n):(t.flags=t.flags&-4097|2,Z=!1,et=t)}}else{if(Il(t))throw Error(E(418));t.flags=t.flags&-4097|2,Z=!1,et=t}}}function Wc(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;et=t}function Ds(t){if(t!==et)return!1;if(!Z)return Wc(t),Z=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Sl(t.type,t.memoizedProps)),e&&(e=Qe)){if(Il(t))throw wh(),Error(E(418));for(;e;)vh(t,e),e=On(e.nextSibling)}if(Wc(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(E(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Qe=On(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Qe=null}}else Qe=et?On(t.stateNode.nextSibling):null;return!0}function wh(){for(var t=Qe;t;)t=On(t.nextSibling)}function Kr(){Qe=et=null,Z=!1}function wu(t){Tt===null?Tt=[t]:Tt.push(t)}var jy=hn.ReactCurrentBatchConfig;function vt(t,e){if(t&&t.defaultProps){e=re({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var ko=Vn(null),Ao=null,Pr=null,Su=null;function Tu(){Su=Pr=Ao=null}function ku(t){var e=ko.current;X(ko),t._currentValue=e}function Nl(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Br(t,e){Ao=t,Su=Pr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(je=!0),t.firstContext=null)}function dt(t){var e=t._currentValue;if(Su!==t)if(t={context:t,memoizedValue:e,next:null},Pr===null){if(Ao===null)throw Error(E(308));Pr=t,Ao.dependencies={lanes:0,firstContext:t}}else Pr=Pr.next=t;return e}var Zn=null;function Au(t){Zn===null?Zn=[t]:Zn.push(t)}function Sh(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Au(e)):(n.next=i.next,i.next=n),e.interleaved=n,cn(t,r)}function cn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Sn=!1;function Iu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Th(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function sn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Dn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,J&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,cn(t,n)}return i=r.interleaved,i===null?(e.next=e,Au(r)):(e.next=i.next,i.next=e),r.interleaved=e,cn(t,n)}function Hs(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,uu(t,n)}}function qc(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Io(t,e,n,r){var i=t.updateQueue;Sn=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(s!==null){var h=i.baseState;o=0,c=u=l=null,a=s;do{var g=a.lane,d=a.eventTime;if((r&g)===g){c!==null&&(c=c.next={eventTime:d,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=t,I=a;switch(g=e,d=n,I.tag){case 1:if(v=I.payload,typeof v=="function"){h=v.call(d,h,g);break e}h=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=I.payload,g=typeof v=="function"?v.call(d,h,g):v,g==null)break e;h=re({},h,g);break e;case 2:Sn=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,g=i.effects,g===null?i.effects=[a]:g.push(a))}else d={eventTime:d,lane:g,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=d,l=h):c=c.next=d,o|=g;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;g=a,a=g.next,g.next=null,i.lastBaseUpdate=g,i.shared.pending=null}}while(!0);if(c===null&&(l=h),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);ur|=o,t.lanes=o,t.memoizedState=h}}function Hc(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(E(191,i));i.call(r)}}}var kh=new Sd.Component().refs;function xl(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:re({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var qo={isMounted:function(t){return(t=t._reactInternals)?gr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=be(),i=_n(t),s=sn(r,i);s.payload=e,n!=null&&(s.callback=n),e=Dn(t,s,i),e!==null&&(Et(e,t,i,r),Hs(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=be(),i=_n(t),s=sn(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Dn(t,s,i),e!==null&&(Et(e,t,i,r),Hs(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=be(),r=_n(t),i=sn(n,r);i.tag=2,e!=null&&(i.callback=e),e=Dn(t,i,r),e!==null&&(Et(e,t,r,n),Hs(e,t,r))}};function Gc(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Vi(n,r)||!Vi(i,s):!0}function Ah(t,e,n){var r=!1,i=Bn,s=e.contextType;return typeof s=="object"&&s!==null?s=dt(s):(i=Ke(e)?or:Oe.current,r=e.contextTypes,s=(r=r!=null)?Jr(t,i):Bn),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=qo,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Yc(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&qo.enqueueReplaceState(e,e.state,null)}function Cl(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=kh,Iu(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=dt(s):(s=Ke(e)?or:Oe.current,i.context=Jr(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(xl(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&qo.enqueueReplaceState(i,i.state,null),Io(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function hi(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(E(309));var r=n.stateNode}if(!r)throw Error(E(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===kh&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(E(284));if(!n._owner)throw Error(E(290,t))}return t}function Rs(t,e){throw t=Object.prototype.toString.call(e),Error(E(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Qc(t){var e=t._init;return e(t._payload)}function Ih(t){function e(p,f){if(t){var y=p.deletions;y===null?(p.deletions=[f],p.flags|=16):y.push(f)}}function n(p,f){if(!t)return null;for(;f!==null;)e(p,f),f=f.sibling;return null}function r(p,f){for(p=new Map;f!==null;)f.key!==null?p.set(f.key,f):p.set(f.index,f),f=f.sibling;return p}function i(p,f){return p=Ln(p,f),p.index=0,p.sibling=null,p}function s(p,f,y){return p.index=y,t?(y=p.alternate,y!==null?(y=y.index,y<f?(p.flags|=2,f):y):(p.flags|=2,f)):(p.flags|=1048576,f)}function o(p){return t&&p.alternate===null&&(p.flags|=2),p}function a(p,f,y,k){return f===null||f.tag!==6?(f=Ba(y,p.mode,k),f.return=p,f):(f=i(f,y),f.return=p,f)}function l(p,f,y,k){var N=y.type;return N===Tr?c(p,f,y.props.children,k,y.key):f!==null&&(f.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===wn&&Qc(N)===f.type)?(k=i(f,y.props),k.ref=hi(p,f,y),k.return=p,k):(k=eo(y.type,y.key,y.props,null,p.mode,k),k.ref=hi(p,f,y),k.return=p,k)}function u(p,f,y,k){return f===null||f.tag!==4||f.stateNode.containerInfo!==y.containerInfo||f.stateNode.implementation!==y.implementation?(f=$a(y,p.mode,k),f.return=p,f):(f=i(f,y.children||[]),f.return=p,f)}function c(p,f,y,k,N){return f===null||f.tag!==7?(f=ir(y,p.mode,k,N),f.return=p,f):(f=i(f,y),f.return=p,f)}function h(p,f,y){if(typeof f=="string"&&f!==""||typeof f=="number")return f=Ba(""+f,p.mode,y),f.return=p,f;if(typeof f=="object"&&f!==null){switch(f.$$typeof){case Ts:return y=eo(f.type,f.key,f.props,null,p.mode,y),y.ref=hi(p,null,f),y.return=p,y;case Sr:return f=$a(f,p.mode,y),f.return=p,f;case wn:var k=f._init;return h(p,k(f._payload),y)}if(wi(f)||li(f))return f=ir(f,p.mode,y,null),f.return=p,f;Rs(p,f)}return null}function g(p,f,y,k){var N=f!==null?f.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return N!==null?null:a(p,f,""+y,k);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Ts:return y.key===N?l(p,f,y,k):null;case Sr:return y.key===N?u(p,f,y,k):null;case wn:return N=y._init,g(p,f,N(y._payload),k)}if(wi(y)||li(y))return N!==null?null:c(p,f,y,k,null);Rs(p,y)}return null}function d(p,f,y,k,N){if(typeof k=="string"&&k!==""||typeof k=="number")return p=p.get(y)||null,a(f,p,""+k,N);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Ts:return p=p.get(k.key===null?y:k.key)||null,l(f,p,k,N);case Sr:return p=p.get(k.key===null?y:k.key)||null,u(f,p,k,N);case wn:var C=k._init;return d(p,f,y,C(k._payload),N)}if(wi(k)||li(k))return p=p.get(y)||null,c(f,p,k,N,null);Rs(f,k)}return null}function v(p,f,y,k){for(var N=null,C=null,P=f,_=f=0,W=null;P!==null&&_<y.length;_++){P.index>_?(W=P,P=null):W=P.sibling;var U=g(p,P,y[_],k);if(U===null){P===null&&(P=W);break}t&&P&&U.alternate===null&&e(p,P),f=s(U,f,_),C===null?N=U:C.sibling=U,C=U,P=W}if(_===y.length)return n(p,P),Z&&Hn(p,_),N;if(P===null){for(;_<y.length;_++)P=h(p,y[_],k),P!==null&&(f=s(P,f,_),C===null?N=P:C.sibling=P,C=P);return Z&&Hn(p,_),N}for(P=r(p,P);_<y.length;_++)W=d(P,p,_,y[_],k),W!==null&&(t&&W.alternate!==null&&P.delete(W.key===null?_:W.key),f=s(W,f,_),C===null?N=W:C.sibling=W,C=W);return t&&P.forEach(function(Ge){return e(p,Ge)}),Z&&Hn(p,_),N}function I(p,f,y,k){var N=li(y);if(typeof N!="function")throw Error(E(150));if(y=N.call(y),y==null)throw Error(E(151));for(var C=N=null,P=f,_=f=0,W=null,U=y.next();P!==null&&!U.done;_++,U=y.next()){P.index>_?(W=P,P=null):W=P.sibling;var Ge=g(p,P,U.value,k);if(Ge===null){P===null&&(P=W);break}t&&P&&Ge.alternate===null&&e(p,P),f=s(Ge,f,_),C===null?N=Ge:C.sibling=Ge,C=Ge,P=W}if(U.done)return n(p,P),Z&&Hn(p,_),N;if(P===null){for(;!U.done;_++,U=y.next())U=h(p,U.value,k),U!==null&&(f=s(U,f,_),C===null?N=U:C.sibling=U,C=U);return Z&&Hn(p,_),N}for(P=r(p,P);!U.done;_++,U=y.next())U=d(P,p,_,U.value,k),U!==null&&(t&&U.alternate!==null&&P.delete(U.key===null?_:U.key),f=s(U,f,_),C===null?N=U:C.sibling=U,C=U);return t&&P.forEach(function(oi){return e(p,oi)}),Z&&Hn(p,_),N}function O(p,f,y,k){if(typeof y=="object"&&y!==null&&y.type===Tr&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Ts:e:{for(var N=y.key,C=f;C!==null;){if(C.key===N){if(N=y.type,N===Tr){if(C.tag===7){n(p,C.sibling),f=i(C,y.props.children),f.return=p,p=f;break e}}else if(C.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===wn&&Qc(N)===C.type){n(p,C.sibling),f=i(C,y.props),f.ref=hi(p,C,y),f.return=p,p=f;break e}n(p,C);break}else e(p,C);C=C.sibling}y.type===Tr?(f=ir(y.props.children,p.mode,k,y.key),f.return=p,p=f):(k=eo(y.type,y.key,y.props,null,p.mode,k),k.ref=hi(p,f,y),k.return=p,p=k)}return o(p);case Sr:e:{for(C=y.key;f!==null;){if(f.key===C)if(f.tag===4&&f.stateNode.containerInfo===y.containerInfo&&f.stateNode.implementation===y.implementation){n(p,f.sibling),f=i(f,y.children||[]),f.return=p,p=f;break e}else{n(p,f);break}else e(p,f);f=f.sibling}f=$a(y,p.mode,k),f.return=p,p=f}return o(p);case wn:return C=y._init,O(p,f,C(y._payload),k)}if(wi(y))return v(p,f,y,k);if(li(y))return I(p,f,y,k);Rs(p,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,f!==null&&f.tag===6?(n(p,f.sibling),f=i(f,y),f.return=p,p=f):(n(p,f),f=Ba(y,p.mode,k),f.return=p,p=f),o(p)):n(p,f)}return O}var Wr=Ih(!0),Eh=Ih(!1),ds={},Wt=Vn(ds),qi=Vn(ds),Hi=Vn(ds);function er(t){if(t===ds)throw Error(E(174));return t}function Eu(t,e){switch(Y(Hi,e),Y(qi,t),Y(Wt,ds),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ol(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=ol(e,t)}X(Wt),Y(Wt,e)}function qr(){X(Wt),X(qi),X(Hi)}function Nh(t){er(Hi.current);var e=er(Wt.current),n=ol(e,t.type);e!==n&&(Y(qi,t),Y(Wt,n))}function Nu(t){qi.current===t&&(X(Wt),X(qi))}var ee=Vn(0);function Eo(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ra=[];function xu(){for(var t=0;t<Ra.length;t++)Ra[t]._workInProgressVersionPrimary=null;Ra.length=0}var Gs=hn.ReactCurrentDispatcher,_a=hn.ReactCurrentBatchConfig,lr=0,ne=null,pe=null,Se=null,No=!1,xi=!1,Gi=0,Vy=0;function Ne(){throw Error(E(321))}function Cu(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ct(t[n],e[n]))return!1;return!0}function Pu(t,e,n,r,i,s){if(lr=s,ne=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Gs.current=t===null||t.memoizedState===null?qy:Hy,t=n(r,i),xi){s=0;do{if(xi=!1,Gi=0,25<=s)throw Error(E(301));s+=1,Se=pe=null,e.updateQueue=null,Gs.current=Gy,t=n(r,i)}while(xi)}if(Gs.current=xo,e=pe!==null&&pe.next!==null,lr=0,Se=pe=ne=null,No=!1,e)throw Error(E(300));return t}function Ou(){var t=Gi!==0;return Gi=0,t}function Rt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Se===null?ne.memoizedState=Se=t:Se=Se.next=t,Se}function ht(){if(pe===null){var t=ne.alternate;t=t!==null?t.memoizedState:null}else t=pe.next;var e=Se===null?ne.memoizedState:Se.next;if(e!==null)Se=e,pe=t;else{if(t===null)throw Error(E(310));pe=t,t={memoizedState:pe.memoizedState,baseState:pe.baseState,baseQueue:pe.baseQueue,queue:pe.queue,next:null},Se===null?ne.memoizedState=Se=t:Se=Se.next=t}return Se}function Yi(t,e){return typeof e=="function"?e(t):e}function La(t){var e=ht(),n=e.queue;if(n===null)throw Error(E(311));n.lastRenderedReducer=t;var r=pe,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var c=u.lane;if((lr&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var h={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,ne.lanes|=c,ur|=c}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,Ct(r,e.memoizedState)||(je=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,ne.lanes|=s,ur|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ba(t){var e=ht(),n=e.queue;if(n===null)throw Error(E(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Ct(s,e.memoizedState)||(je=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function xh(){}function Ch(t,e){var n=ne,r=ht(),i=e(),s=!Ct(r.memoizedState,i);if(s&&(r.memoizedState=i,je=!0),r=r.queue,Du(Dh.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Se!==null&&Se.memoizedState.tag&1){if(n.flags|=2048,Qi(9,Oh.bind(null,n,r,i,e),void 0,null),Te===null)throw Error(E(349));lr&30||Ph(n,e,i)}return i}function Ph(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ne.updateQueue,e===null?(e={lastEffect:null,stores:null},ne.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Oh(t,e,n,r){e.value=n,e.getSnapshot=r,Rh(e)&&_h(t)}function Dh(t,e,n){return n(function(){Rh(e)&&_h(t)})}function Rh(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ct(t,n)}catch{return!0}}function _h(t){var e=cn(t,1);e!==null&&Et(e,t,1,-1)}function Xc(t){var e=Rt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Yi,lastRenderedState:t},e.queue=t,t=t.dispatch=Wy.bind(null,ne,t),[e.memoizedState,t]}function Qi(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ne.updateQueue,e===null?(e={lastEffect:null,stores:null},ne.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Lh(){return ht().memoizedState}function Ys(t,e,n,r){var i=Rt();ne.flags|=t,i.memoizedState=Qi(1|e,n,void 0,r===void 0?null:r)}function Ho(t,e,n,r){var i=ht();r=r===void 0?null:r;var s=void 0;if(pe!==null){var o=pe.memoizedState;if(s=o.destroy,r!==null&&Cu(r,o.deps)){i.memoizedState=Qi(e,n,s,r);return}}ne.flags|=t,i.memoizedState=Qi(1|e,n,s,r)}function Zc(t,e){return Ys(8390656,8,t,e)}function Du(t,e){return Ho(2048,8,t,e)}function bh(t,e){return Ho(4,2,t,e)}function Mh(t,e){return Ho(4,4,t,e)}function Fh(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Bh(t,e,n){return n=n!=null?n.concat([t]):null,Ho(4,4,Fh.bind(null,e,t),n)}function Ru(){}function $h(t,e){var n=ht();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Cu(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function zh(t,e){var n=ht();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Cu(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Uh(t,e,n){return lr&21?(Ct(n,e)||(n=Jd(),ne.lanes|=n,ur|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,je=!0),t.memoizedState=n)}function Jy(t,e){var n=H;H=n!==0&&4>n?n:4,t(!0);var r=_a.transition;_a.transition={};try{t(!1),e()}finally{H=n,_a.transition=r}}function jh(){return ht().memoizedState}function Ky(t,e,n){var r=_n(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Vh(t))Jh(e,n);else if(n=Sh(t,e,n,r),n!==null){var i=be();Et(n,t,r,i),Kh(n,e,r)}}function Wy(t,e,n){var r=_n(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Vh(t))Jh(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Ct(a,o)){var l=e.interleaved;l===null?(i.next=i,Au(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=Sh(t,e,i,r),n!==null&&(i=be(),Et(n,t,r,i),Kh(n,e,r))}}function Vh(t){var e=t.alternate;return t===ne||e!==null&&e===ne}function Jh(t,e){xi=No=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Kh(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,uu(t,n)}}var xo={readContext:dt,useCallback:Ne,useContext:Ne,useEffect:Ne,useImperativeHandle:Ne,useInsertionEffect:Ne,useLayoutEffect:Ne,useMemo:Ne,useReducer:Ne,useRef:Ne,useState:Ne,useDebugValue:Ne,useDeferredValue:Ne,useTransition:Ne,useMutableSource:Ne,useSyncExternalStore:Ne,useId:Ne,unstable_isNewReconciler:!1},qy={readContext:dt,useCallback:function(t,e){return Rt().memoizedState=[t,e===void 0?null:e],t},useContext:dt,useEffect:Zc,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ys(4194308,4,Fh.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ys(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ys(4,2,t,e)},useMemo:function(t,e){var n=Rt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Rt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Ky.bind(null,ne,t),[r.memoizedState,t]},useRef:function(t){var e=Rt();return t={current:t},e.memoizedState=t},useState:Xc,useDebugValue:Ru,useDeferredValue:function(t){return Rt().memoizedState=t},useTransition:function(){var t=Xc(!1),e=t[0];return t=Jy.bind(null,t[1]),Rt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ne,i=Rt();if(Z){if(n===void 0)throw Error(E(407));n=n()}else{if(n=e(),Te===null)throw Error(E(349));lr&30||Ph(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Zc(Dh.bind(null,r,s,t),[t]),r.flags|=2048,Qi(9,Oh.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Rt(),e=Te.identifierPrefix;if(Z){var n=en,r=Zt;n=(r&~(1<<32-It(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Gi++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Vy++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Hy={readContext:dt,useCallback:$h,useContext:dt,useEffect:Du,useImperativeHandle:Bh,useInsertionEffect:bh,useLayoutEffect:Mh,useMemo:zh,useReducer:La,useRef:Lh,useState:function(){return La(Yi)},useDebugValue:Ru,useDeferredValue:function(t){var e=ht();return Uh(e,pe.memoizedState,t)},useTransition:function(){var t=La(Yi)[0],e=ht().memoizedState;return[t,e]},useMutableSource:xh,useSyncExternalStore:Ch,useId:jh,unstable_isNewReconciler:!1},Gy={readContext:dt,useCallback:$h,useContext:dt,useEffect:Du,useImperativeHandle:Bh,useInsertionEffect:bh,useLayoutEffect:Mh,useMemo:zh,useReducer:ba,useRef:Lh,useState:function(){return ba(Yi)},useDebugValue:Ru,useDeferredValue:function(t){var e=ht();return pe===null?e.memoizedState=t:Uh(e,pe.memoizedState,t)},useTransition:function(){var t=ba(Yi)[0],e=ht().memoizedState;return[t,e]},useMutableSource:xh,useSyncExternalStore:Ch,useId:jh,unstable_isNewReconciler:!1};function Hr(t,e){try{var n="",r=e;do n+=Am(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Ma(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Pl(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Yy=typeof WeakMap=="function"?WeakMap:Map;function Wh(t,e,n){n=sn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Po||(Po=!0,$l=r),Pl(t,e)},n}function qh(t,e,n){n=sn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Pl(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Pl(t,e),typeof r!="function"&&(Rn===null?Rn=new Set([this]):Rn.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function ef(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Yy;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=cv.bind(null,t,e,n),e.then(t,t))}function tf(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function nf(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=sn(-1,1),e.tag=2,Dn(n,e,1))),n.lanes|=1),t)}var Qy=hn.ReactCurrentOwner,je=!1;function Re(t,e,n,r){e.child=t===null?Eh(e,null,n,r):Wr(e,t.child,n,r)}function rf(t,e,n,r,i){n=n.render;var s=e.ref;return Br(e,i),r=Pu(t,e,n,r,s,i),n=Ou(),t!==null&&!je?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,fn(t,e,i)):(Z&&n&&yu(e),e.flags|=1,Re(t,e,r,i),e.child)}function sf(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!zu(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Hh(t,e,s,r,i)):(t=eo(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Vi,n(o,r)&&t.ref===e.ref)return fn(t,e,i)}return e.flags|=1,t=Ln(s,r),t.ref=e.ref,t.return=e,e.child=t}function Hh(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Vi(s,r)&&t.ref===e.ref)if(je=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(je=!0);else return e.lanes=t.lanes,fn(t,e,i)}return Ol(t,e,n,r,i)}function Gh(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Y(Dr,Ye),Ye|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Y(Dr,Ye),Ye|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Y(Dr,Ye),Ye|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Y(Dr,Ye),Ye|=r;return Re(t,e,i,n),e.child}function Yh(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Ol(t,e,n,r,i){var s=Ke(n)?or:Oe.current;return s=Jr(e,s),Br(e,i),n=Pu(t,e,n,r,s,i),r=Ou(),t!==null&&!je?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,fn(t,e,i)):(Z&&r&&yu(e),e.flags|=1,Re(t,e,n,i),e.child)}function of(t,e,n,r,i){if(Ke(n)){var s=!0;wo(e)}else s=!1;if(Br(e,i),e.stateNode===null)Qs(t,e),Ah(e,n,r),Cl(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=dt(u):(u=Ke(n)?or:Oe.current,u=Jr(e,u));var c=n.getDerivedStateFromProps,h=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&Yc(e,o,r,u),Sn=!1;var g=e.memoizedState;o.state=g,Io(e,r,o,i),l=e.memoizedState,a!==r||g!==l||Je.current||Sn?(typeof c=="function"&&(xl(e,n,c,r),l=e.memoizedState),(a=Sn||Gc(e,n,a,r,g,l,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Th(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:vt(e.type,a),o.props=u,h=e.pendingProps,g=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=dt(l):(l=Ke(n)?or:Oe.current,l=Jr(e,l));var d=n.getDerivedStateFromProps;(c=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||g!==l)&&Yc(e,o,r,l),Sn=!1,g=e.memoizedState,o.state=g,Io(e,r,o,i);var v=e.memoizedState;a!==h||g!==v||Je.current||Sn?(typeof d=="function"&&(xl(e,n,d,r),v=e.memoizedState),(u=Sn||Gc(e,n,u,r,g,v,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),o.props=r,o.state=v,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return Dl(t,e,n,r,s,i)}function Dl(t,e,n,r,i,s){Yh(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Jc(e,n,!1),fn(t,e,s);r=e.stateNode,Qy.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Wr(e,t.child,null,s),e.child=Wr(e,null,a,s)):Re(t,e,a,s),e.memoizedState=r.state,i&&Jc(e,n,!0),e.child}function Qh(t){var e=t.stateNode;e.pendingContext?Vc(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Vc(t,e.context,!1),Eu(t,e.containerInfo)}function af(t,e,n,r,i){return Kr(),wu(i),e.flags|=256,Re(t,e,n,r),e.child}var Rl={dehydrated:null,treeContext:null,retryLane:0};function _l(t){return{baseLanes:t,cachePool:null,transitions:null}}function Xh(t,e,n){var r=e.pendingProps,i=ee.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Y(ee,i&1),t===null)return El(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Qo(o,r,0,null),t=ir(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=_l(n),e.memoizedState=Rl,t):_u(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return Xy(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Ln(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Ln(a,s):(s=ir(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?_l(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Rl,r}return s=t.child,t=s.sibling,r=Ln(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function _u(t,e){return e=Qo({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function _s(t,e,n,r){return r!==null&&wu(r),Wr(e,t.child,null,n),t=_u(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Xy(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Ma(Error(E(422))),_s(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Qo({mode:"visible",children:r.children},i,0,null),s=ir(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Wr(e,t.child,null,o),e.child.memoizedState=_l(o),e.memoizedState=Rl,s);if(!(e.mode&1))return _s(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(E(419)),r=Ma(s,r,void 0),_s(t,e,o,r)}if(a=(o&t.childLanes)!==0,je||a){if(r=Te,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,cn(t,i),Et(r,t,i,-1))}return $u(),r=Ma(Error(E(421))),_s(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=fv.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Qe=On(i.nextSibling),et=e,Z=!0,Tt=null,t!==null&&(ot[at++]=Zt,ot[at++]=en,ot[at++]=ar,Zt=t.id,en=t.overflow,ar=e),e=_u(e,r.children),e.flags|=4096,e)}function lf(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Nl(t.return,e,n)}function Fa(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Zh(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Re(t,e,r.children,n),r=ee.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&lf(t,n,e);else if(t.tag===19)lf(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Y(ee,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Eo(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Fa(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Eo(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Fa(e,!0,n,null,s);break;case"together":Fa(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Qs(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function fn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ur|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(E(153));if(e.child!==null){for(t=e.child,n=Ln(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ln(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Zy(t,e,n){switch(e.tag){case 3:Qh(e),Kr();break;case 5:Nh(e);break;case 1:Ke(e.type)&&wo(e);break;case 4:Eu(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Y(ko,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Y(ee,ee.current&1),e.flags|=128,null):n&e.child.childLanes?Xh(t,e,n):(Y(ee,ee.current&1),t=fn(t,e,n),t!==null?t.sibling:null);Y(ee,ee.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Zh(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Y(ee,ee.current),r)break;return null;case 22:case 23:return e.lanes=0,Gh(t,e,n)}return fn(t,e,n)}var eg,Ll,tg,ng;eg=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ll=function(){};tg=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,er(Wt.current);var s=null;switch(n){case"input":i=nl(t,i),r=nl(t,r),s=[];break;case"select":i=re({},i,{value:void 0}),r=re({},r,{value:void 0}),s=[];break;case"textarea":i=sl(t,i),r=sl(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=yo)}al(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Mi.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Mi.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Q("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};ng=function(t,e,n,r){n!==r&&(e.flags|=4)};function gi(t,e){if(!Z)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function xe(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function ev(t,e,n){var r=e.pendingProps;switch(vu(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xe(e),null;case 1:return Ke(e.type)&&vo(),xe(e),null;case 3:return r=e.stateNode,qr(),X(Je),X(Oe),xu(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ds(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Tt!==null&&(jl(Tt),Tt=null))),Ll(t,e),xe(e),null;case 5:Nu(e);var i=er(Hi.current);if(n=e.type,t!==null&&e.stateNode!=null)tg(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(E(166));return xe(e),null}if(t=er(Wt.current),Ds(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Lt]=e,r[Wi]=s,t=(e.mode&1)!==0,n){case"dialog":Q("cancel",r),Q("close",r);break;case"iframe":case"object":case"embed":Q("load",r);break;case"video":case"audio":for(i=0;i<Ti.length;i++)Q(Ti[i],r);break;case"source":Q("error",r);break;case"img":case"image":case"link":Q("error",r),Q("load",r);break;case"details":Q("toggle",r);break;case"input":mc(r,s),Q("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Q("invalid",r);break;case"textarea":vc(r,s),Q("invalid",r)}al(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Os(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Os(r.textContent,a,t),i=["children",""+a]):Mi.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Q("scroll",r)}switch(n){case"input":ks(r),yc(r,s,!0);break;case"textarea":ks(r),wc(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=yo)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Pd(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Lt]=e,t[Wi]=r,eg(t,e,!1,!1),e.stateNode=t;e:{switch(o=ll(n,r),n){case"dialog":Q("cancel",t),Q("close",t),i=r;break;case"iframe":case"object":case"embed":Q("load",t),i=r;break;case"video":case"audio":for(i=0;i<Ti.length;i++)Q(Ti[i],t);i=r;break;case"source":Q("error",t),i=r;break;case"img":case"image":case"link":Q("error",t),Q("load",t),i=r;break;case"details":Q("toggle",t),i=r;break;case"input":mc(t,r),i=nl(t,r),Q("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=re({},r,{value:void 0}),Q("invalid",t);break;case"textarea":vc(t,r),i=sl(t,r),Q("invalid",t);break;default:i=r}al(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?Rd(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Od(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Fi(t,l):typeof l=="number"&&Fi(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Mi.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Q("scroll",t):l!=null&&ru(t,s,l,o))}switch(n){case"input":ks(t),yc(t,r,!1);break;case"textarea":ks(t),wc(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Fn(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Lr(t,!!r.multiple,s,!1):r.defaultValue!=null&&Lr(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=yo)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return xe(e),null;case 6:if(t&&e.stateNode!=null)ng(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(E(166));if(n=er(Hi.current),er(Wt.current),Ds(e)){if(r=e.stateNode,n=e.memoizedProps,r[Lt]=e,(s=r.nodeValue!==n)&&(t=et,t!==null))switch(t.tag){case 3:Os(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Os(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Lt]=e,e.stateNode=r}return xe(e),null;case 13:if(X(ee),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Z&&Qe!==null&&e.mode&1&&!(e.flags&128))wh(),Kr(),e.flags|=98560,s=!1;else if(s=Ds(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(E(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(E(317));s[Lt]=e}else Kr(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;xe(e),s=!1}else Tt!==null&&(jl(Tt),Tt=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ee.current&1?ve===0&&(ve=3):$u())),e.updateQueue!==null&&(e.flags|=4),xe(e),null);case 4:return qr(),Ll(t,e),t===null&&Ji(e.stateNode.containerInfo),xe(e),null;case 10:return ku(e.type._context),xe(e),null;case 17:return Ke(e.type)&&vo(),xe(e),null;case 19:if(X(ee),s=e.memoizedState,s===null)return xe(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)gi(s,!1);else{if(ve!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Eo(t),o!==null){for(e.flags|=128,gi(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Y(ee,ee.current&1|2),e.child}t=t.sibling}s.tail!==null&&ue()>Gr&&(e.flags|=128,r=!0,gi(s,!1),e.lanes=4194304)}else{if(!r)if(t=Eo(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),gi(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Z)return xe(e),null}else 2*ue()-s.renderingStartTime>Gr&&n!==1073741824&&(e.flags|=128,r=!0,gi(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=ue(),e.sibling=null,n=ee.current,Y(ee,r?n&1|2:n&1),e):(xe(e),null);case 22:case 23:return Bu(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ye&1073741824&&(xe(e),e.subtreeFlags&6&&(e.flags|=8192)):xe(e),null;case 24:return null;case 25:return null}throw Error(E(156,e.tag))}function tv(t,e){switch(vu(e),e.tag){case 1:return Ke(e.type)&&vo(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return qr(),X(Je),X(Oe),xu(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Nu(e),null;case 13:if(X(ee),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(E(340));Kr()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return X(ee),null;case 4:return qr(),null;case 10:return ku(e.type._context),null;case 22:case 23:return Bu(),null;case 24:return null;default:return null}}var Ls=!1,Ce=!1,nv=typeof WeakSet=="function"?WeakSet:Set,D=null;function Or(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){se(t,e,r)}else n.current=null}function bl(t,e,n){try{n()}catch(r){se(t,e,r)}}var uf=!1;function rv(t,e){if(vl=go,t=oh(),mu(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,c=0,h=t,g=null;t:for(;;){for(var d;h!==n||i!==0&&h.nodeType!==3||(a=o+i),h!==s||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(d=h.firstChild)!==null;)g=h,h=d;for(;;){if(h===t)break t;if(g===n&&++u===i&&(a=o),g===s&&++c===r&&(l=o),(d=h.nextSibling)!==null)break;h=g,g=h.parentNode}h=d}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(wl={focusedElem:t,selectionRange:n},go=!1,D=e;D!==null;)if(e=D,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,D=t;else for(;D!==null;){e=D;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var I=v.memoizedProps,O=v.memoizedState,p=e.stateNode,f=p.getSnapshotBeforeUpdate(e.elementType===e.type?I:vt(e.type,I),O);p.__reactInternalSnapshotBeforeUpdate=f}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(E(163))}}catch(k){se(e,e.return,k)}if(t=e.sibling,t!==null){t.return=e.return,D=t;break}D=e.return}return v=uf,uf=!1,v}function Ci(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&bl(e,n,s)}i=i.next}while(i!==r)}}function Go(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Ml(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function rg(t){var e=t.alternate;e!==null&&(t.alternate=null,rg(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Lt],delete e[Wi],delete e[kl],delete e[$y],delete e[zy])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function ig(t){return t.tag===5||t.tag===3||t.tag===4}function cf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ig(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Fl(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=yo));else if(r!==4&&(t=t.child,t!==null))for(Fl(t,e,n),t=t.sibling;t!==null;)Fl(t,e,n),t=t.sibling}function Bl(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Bl(t,e,n),t=t.sibling;t!==null;)Bl(t,e,n),t=t.sibling}var ke=null,St=!1;function pn(t,e,n){for(n=n.child;n!==null;)sg(t,e,n),n=n.sibling}function sg(t,e,n){if(Kt&&typeof Kt.onCommitFiberUnmount=="function")try{Kt.onCommitFiberUnmount(Uo,n)}catch{}switch(n.tag){case 5:Ce||Or(n,e);case 6:var r=ke,i=St;ke=null,pn(t,e,n),ke=r,St=i,ke!==null&&(St?(t=ke,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ke.removeChild(n.stateNode));break;case 18:ke!==null&&(St?(t=ke,n=n.stateNode,t.nodeType===8?Oa(t.parentNode,n):t.nodeType===1&&Oa(t,n),Ui(t)):Oa(ke,n.stateNode));break;case 4:r=ke,i=St,ke=n.stateNode.containerInfo,St=!0,pn(t,e,n),ke=r,St=i;break;case 0:case 11:case 14:case 15:if(!Ce&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&bl(n,e,o),i=i.next}while(i!==r)}pn(t,e,n);break;case 1:if(!Ce&&(Or(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){se(n,e,a)}pn(t,e,n);break;case 21:pn(t,e,n);break;case 22:n.mode&1?(Ce=(r=Ce)||n.memoizedState!==null,pn(t,e,n),Ce=r):pn(t,e,n);break;default:pn(t,e,n)}}function ff(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new nv),e.forEach(function(r){var i=dv.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function yt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:ke=a.stateNode,St=!1;break e;case 3:ke=a.stateNode.containerInfo,St=!0;break e;case 4:ke=a.stateNode.containerInfo,St=!0;break e}a=a.return}if(ke===null)throw Error(E(160));sg(s,o,i),ke=null,St=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){se(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)og(e,t),e=e.sibling}function og(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(yt(e,t),Dt(t),r&4){try{Ci(3,t,t.return),Go(3,t)}catch(I){se(t,t.return,I)}try{Ci(5,t,t.return)}catch(I){se(t,t.return,I)}}break;case 1:yt(e,t),Dt(t),r&512&&n!==null&&Or(n,n.return);break;case 5:if(yt(e,t),Dt(t),r&512&&n!==null&&Or(n,n.return),t.flags&32){var i=t.stateNode;try{Fi(i,"")}catch(I){se(t,t.return,I)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&xd(i,s),ll(a,o);var u=ll(a,s);for(o=0;o<l.length;o+=2){var c=l[o],h=l[o+1];c==="style"?Rd(i,h):c==="dangerouslySetInnerHTML"?Od(i,h):c==="children"?Fi(i,h):ru(i,c,h,u)}switch(a){case"input":rl(i,s);break;case"textarea":Cd(i,s);break;case"select":var g=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var d=s.value;d!=null?Lr(i,!!s.multiple,d,!1):g!==!!s.multiple&&(s.defaultValue!=null?Lr(i,!!s.multiple,s.defaultValue,!0):Lr(i,!!s.multiple,s.multiple?[]:"",!1))}i[Wi]=s}catch(I){se(t,t.return,I)}}break;case 6:if(yt(e,t),Dt(t),r&4){if(t.stateNode===null)throw Error(E(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(I){se(t,t.return,I)}}break;case 3:if(yt(e,t),Dt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ui(e.containerInfo)}catch(I){se(t,t.return,I)}break;case 4:yt(e,t),Dt(t);break;case 13:yt(e,t),Dt(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Mu=ue())),r&4&&ff(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(Ce=(u=Ce)||c,yt(e,t),Ce=u):yt(e,t),Dt(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(D=t,c=t.child;c!==null;){for(h=D=c;D!==null;){switch(g=D,d=g.child,g.tag){case 0:case 11:case 14:case 15:Ci(4,g,g.return);break;case 1:Or(g,g.return);var v=g.stateNode;if(typeof v.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(I){se(r,n,I)}}break;case 5:Or(g,g.return);break;case 22:if(g.memoizedState!==null){hf(h);continue}}d!==null?(d.return=g,D=d):hf(h)}c=c.sibling}e:for(c=null,h=t;;){if(h.tag===5){if(c===null){c=h;try{i=h.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Dd("display",o))}catch(I){se(t,t.return,I)}}}else if(h.tag===6){if(c===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(I){se(t,t.return,I)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;c===h&&(c=null),h=h.return}c===h&&(c=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:yt(e,t),Dt(t),r&4&&ff(t);break;case 21:break;default:yt(e,t),Dt(t)}}function Dt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(ig(n)){var r=n;break e}n=n.return}throw Error(E(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Fi(i,""),r.flags&=-33);var s=cf(t);Bl(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=cf(t);Fl(t,a,o);break;default:throw Error(E(161))}}catch(l){se(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function iv(t,e,n){D=t,ag(t)}function ag(t,e,n){for(var r=(t.mode&1)!==0;D!==null;){var i=D,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Ls;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Ce;a=Ls;var u=Ce;if(Ls=o,(Ce=l)&&!u)for(D=i;D!==null;)o=D,l=o.child,o.tag===22&&o.memoizedState!==null?gf(i):l!==null?(l.return=o,D=l):gf(i);for(;s!==null;)D=s,ag(s),s=s.sibling;D=i,Ls=a,Ce=u}df(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,D=s):df(t)}}function df(t){for(;D!==null;){var e=D;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ce||Go(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ce)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:vt(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Hc(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Hc(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var h=c.dehydrated;h!==null&&Ui(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(E(163))}Ce||e.flags&512&&Ml(e)}catch(g){se(e,e.return,g)}}if(e===t){D=null;break}if(n=e.sibling,n!==null){n.return=e.return,D=n;break}D=e.return}}function hf(t){for(;D!==null;){var e=D;if(e===t){D=null;break}var n=e.sibling;if(n!==null){n.return=e.return,D=n;break}D=e.return}}function gf(t){for(;D!==null;){var e=D;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Go(4,e)}catch(l){se(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){se(e,i,l)}}var s=e.return;try{Ml(e)}catch(l){se(e,s,l)}break;case 5:var o=e.return;try{Ml(e)}catch(l){se(e,o,l)}}}catch(l){se(e,e.return,l)}if(e===t){D=null;break}var a=e.sibling;if(a!==null){a.return=e.return,D=a;break}D=e.return}}var sv=Math.ceil,Co=hn.ReactCurrentDispatcher,Lu=hn.ReactCurrentOwner,ft=hn.ReactCurrentBatchConfig,J=0,Te=null,de=null,Ae=0,Ye=0,Dr=Vn(0),ve=0,Xi=null,ur=0,Yo=0,bu=0,Pi=null,ze=null,Mu=0,Gr=1/0,Gt=null,Po=!1,$l=null,Rn=null,bs=!1,En=null,Oo=0,Oi=0,zl=null,Xs=-1,Zs=0;function be(){return J&6?ue():Xs!==-1?Xs:Xs=ue()}function _n(t){return t.mode&1?J&2&&Ae!==0?Ae&-Ae:jy.transition!==null?(Zs===0&&(Zs=Jd()),Zs):(t=H,t!==0||(t=window.event,t=t===void 0?16:Qd(t.type)),t):1}function Et(t,e,n,r){if(50<Oi)throw Oi=0,zl=null,Error(E(185));us(t,n,r),(!(J&2)||t!==Te)&&(t===Te&&(!(J&2)&&(Yo|=n),ve===4&&kn(t,Ae)),We(t,r),n===1&&J===0&&!(e.mode&1)&&(Gr=ue()+500,Wo&&Jn()))}function We(t,e){var n=t.callbackNode;jm(t,e);var r=ho(t,t===Te?Ae:0);if(r===0)n!==null&&kc(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&kc(n),e===1)t.tag===0?Uy(pf.bind(null,t)):mh(pf.bind(null,t)),Fy(function(){!(J&6)&&Jn()}),n=null;else{switch(Kd(r)){case 1:n=lu;break;case 4:n=jd;break;case 16:n=fo;break;case 536870912:n=Vd;break;default:n=fo}n=pg(n,lg.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function lg(t,e){if(Xs=-1,Zs=0,J&6)throw Error(E(327));var n=t.callbackNode;if($r()&&t.callbackNode!==n)return null;var r=ho(t,t===Te?Ae:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Do(t,r);else{e=r;var i=J;J|=2;var s=cg();(Te!==t||Ae!==e)&&(Gt=null,Gr=ue()+500,rr(t,e));do try{lv();break}catch(a){ug(t,a)}while(!0);Tu(),Co.current=s,J=i,de!==null?e=0:(Te=null,Ae=0,e=ve)}if(e!==0){if(e===2&&(i=hl(t),i!==0&&(r=i,e=Ul(t,i))),e===1)throw n=Xi,rr(t,0),kn(t,r),We(t,ue()),n;if(e===6)kn(t,r);else{if(i=t.current.alternate,!(r&30)&&!ov(i)&&(e=Do(t,r),e===2&&(s=hl(t),s!==0&&(r=s,e=Ul(t,s))),e===1))throw n=Xi,rr(t,0),kn(t,r),We(t,ue()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(E(345));case 2:Gn(t,ze,Gt);break;case 3:if(kn(t,r),(r&130023424)===r&&(e=Mu+500-ue(),10<e)){if(ho(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){be(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Tl(Gn.bind(null,t,ze,Gt),e);break}Gn(t,ze,Gt);break;case 4:if(kn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-It(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=ue()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*sv(r/1960))-r,10<r){t.timeoutHandle=Tl(Gn.bind(null,t,ze,Gt),r);break}Gn(t,ze,Gt);break;case 5:Gn(t,ze,Gt);break;default:throw Error(E(329))}}}return We(t,ue()),t.callbackNode===n?lg.bind(null,t):null}function Ul(t,e){var n=Pi;return t.current.memoizedState.isDehydrated&&(rr(t,e).flags|=256),t=Do(t,e),t!==2&&(e=ze,ze=n,e!==null&&jl(e)),t}function jl(t){ze===null?ze=t:ze.push.apply(ze,t)}function ov(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Ct(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function kn(t,e){for(e&=~bu,e&=~Yo,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-It(e),r=1<<n;t[n]=-1,e&=~r}}function pf(t){if(J&6)throw Error(E(327));$r();var e=ho(t,0);if(!(e&1))return We(t,ue()),null;var n=Do(t,e);if(t.tag!==0&&n===2){var r=hl(t);r!==0&&(e=r,n=Ul(t,r))}if(n===1)throw n=Xi,rr(t,0),kn(t,e),We(t,ue()),n;if(n===6)throw Error(E(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Gn(t,ze,Gt),We(t,ue()),null}function Fu(t,e){var n=J;J|=1;try{return t(e)}finally{J=n,J===0&&(Gr=ue()+500,Wo&&Jn())}}function cr(t){En!==null&&En.tag===0&&!(J&6)&&$r();var e=J;J|=1;var n=ft.transition,r=H;try{if(ft.transition=null,H=1,t)return t()}finally{H=r,ft.transition=n,J=e,!(J&6)&&Jn()}}function Bu(){Ye=Dr.current,X(Dr)}function rr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,My(n)),de!==null)for(n=de.return;n!==null;){var r=n;switch(vu(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&vo();break;case 3:qr(),X(Je),X(Oe),xu();break;case 5:Nu(r);break;case 4:qr();break;case 13:X(ee);break;case 19:X(ee);break;case 10:ku(r.type._context);break;case 22:case 23:Bu()}n=n.return}if(Te=t,de=t=Ln(t.current,null),Ae=Ye=e,ve=0,Xi=null,bu=Yo=ur=0,ze=Pi=null,Zn!==null){for(e=0;e<Zn.length;e++)if(n=Zn[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Zn=null}return t}function ug(t,e){do{var n=de;try{if(Tu(),Gs.current=xo,No){for(var r=ne.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}No=!1}if(lr=0,Se=pe=ne=null,xi=!1,Gi=0,Lu.current=null,n===null||n.return===null){ve=1,Xi=e,de=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Ae,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,h=c.tag;if(!(c.mode&1)&&(h===0||h===11||h===15)){var g=c.alternate;g?(c.updateQueue=g.updateQueue,c.memoizedState=g.memoizedState,c.lanes=g.lanes):(c.updateQueue=null,c.memoizedState=null)}var d=tf(o);if(d!==null){d.flags&=-257,nf(d,o,a,s,e),d.mode&1&&ef(s,u,e),e=d,l=u;var v=e.updateQueue;if(v===null){var I=new Set;I.add(l),e.updateQueue=I}else v.add(l);break e}else{if(!(e&1)){ef(s,u,e),$u();break e}l=Error(E(426))}}else if(Z&&a.mode&1){var O=tf(o);if(O!==null){!(O.flags&65536)&&(O.flags|=256),nf(O,o,a,s,e),wu(Hr(l,a));break e}}s=l=Hr(l,a),ve!==4&&(ve=2),Pi===null?Pi=[s]:Pi.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var p=Wh(s,l,e);qc(s,p);break e;case 1:a=l;var f=s.type,y=s.stateNode;if(!(s.flags&128)&&(typeof f.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Rn===null||!Rn.has(y)))){s.flags|=65536,e&=-e,s.lanes|=e;var k=qh(s,a,e);qc(s,k);break e}}s=s.return}while(s!==null)}dg(n)}catch(N){e=N,de===n&&n!==null&&(de=n=n.return);continue}break}while(!0)}function cg(){var t=Co.current;return Co.current=xo,t===null?xo:t}function $u(){(ve===0||ve===3||ve===2)&&(ve=4),Te===null||!(ur&268435455)&&!(Yo&268435455)||kn(Te,Ae)}function Do(t,e){var n=J;J|=2;var r=cg();(Te!==t||Ae!==e)&&(Gt=null,rr(t,e));do try{av();break}catch(i){ug(t,i)}while(!0);if(Tu(),J=n,Co.current=r,de!==null)throw Error(E(261));return Te=null,Ae=0,ve}function av(){for(;de!==null;)fg(de)}function lv(){for(;de!==null&&!_m();)fg(de)}function fg(t){var e=gg(t.alternate,t,Ye);t.memoizedProps=t.pendingProps,e===null?dg(t):de=e,Lu.current=null}function dg(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=tv(n,e),n!==null){n.flags&=32767,de=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ve=6,de=null;return}}else if(n=ev(n,e,Ye),n!==null){de=n;return}if(e=e.sibling,e!==null){de=e;return}de=e=t}while(e!==null);ve===0&&(ve=5)}function Gn(t,e,n){var r=H,i=ft.transition;try{ft.transition=null,H=1,uv(t,e,n,r)}finally{ft.transition=i,H=r}return null}function uv(t,e,n,r){do $r();while(En!==null);if(J&6)throw Error(E(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(E(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(Vm(t,s),t===Te&&(de=Te=null,Ae=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||bs||(bs=!0,pg(fo,function(){return $r(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=ft.transition,ft.transition=null;var o=H;H=1;var a=J;J|=4,Lu.current=null,rv(t,n),og(n,t),Py(wl),go=!!vl,wl=vl=null,t.current=n,iv(n),Lm(),J=a,H=o,ft.transition=s}else t.current=n;if(bs&&(bs=!1,En=t,Oo=i),s=t.pendingLanes,s===0&&(Rn=null),Fm(n.stateNode),We(t,ue()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Po)throw Po=!1,t=$l,$l=null,t;return Oo&1&&t.tag!==0&&$r(),s=t.pendingLanes,s&1?t===zl?Oi++:(Oi=0,zl=t):Oi=0,Jn(),null}function $r(){if(En!==null){var t=Kd(Oo),e=ft.transition,n=H;try{if(ft.transition=null,H=16>t?16:t,En===null)var r=!1;else{if(t=En,En=null,Oo=0,J&6)throw Error(E(331));var i=J;for(J|=4,D=t.current;D!==null;){var s=D,o=s.child;if(D.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(D=u;D!==null;){var c=D;switch(c.tag){case 0:case 11:case 15:Ci(8,c,s)}var h=c.child;if(h!==null)h.return=c,D=h;else for(;D!==null;){c=D;var g=c.sibling,d=c.return;if(rg(c),c===u){D=null;break}if(g!==null){g.return=d,D=g;break}D=d}}}var v=s.alternate;if(v!==null){var I=v.child;if(I!==null){v.child=null;do{var O=I.sibling;I.sibling=null,I=O}while(I!==null)}}D=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,D=o;else e:for(;D!==null;){if(s=D,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Ci(9,s,s.return)}var p=s.sibling;if(p!==null){p.return=s.return,D=p;break e}D=s.return}}var f=t.current;for(D=f;D!==null;){o=D;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,D=y;else e:for(o=f;D!==null;){if(a=D,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Go(9,a)}}catch(N){se(a,a.return,N)}if(a===o){D=null;break e}var k=a.sibling;if(k!==null){k.return=a.return,D=k;break e}D=a.return}}if(J=i,Jn(),Kt&&typeof Kt.onPostCommitFiberRoot=="function")try{Kt.onPostCommitFiberRoot(Uo,t)}catch{}r=!0}return r}finally{H=n,ft.transition=e}}return!1}function mf(t,e,n){e=Hr(n,e),e=Wh(t,e,1),t=Dn(t,e,1),e=be(),t!==null&&(us(t,1,e),We(t,e))}function se(t,e,n){if(t.tag===3)mf(t,t,n);else for(;e!==null;){if(e.tag===3){mf(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Rn===null||!Rn.has(r))){t=Hr(n,t),t=qh(e,t,1),e=Dn(e,t,1),t=be(),e!==null&&(us(e,1,t),We(e,t));break}}e=e.return}}function cv(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=be(),t.pingedLanes|=t.suspendedLanes&n,Te===t&&(Ae&n)===n&&(ve===4||ve===3&&(Ae&130023424)===Ae&&500>ue()-Mu?rr(t,0):bu|=n),We(t,e)}function hg(t,e){e===0&&(t.mode&1?(e=Es,Es<<=1,!(Es&130023424)&&(Es=4194304)):e=1);var n=be();t=cn(t,e),t!==null&&(us(t,e,n),We(t,n))}function fv(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),hg(t,n)}function dv(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(E(314))}r!==null&&r.delete(e),hg(t,n)}var gg;gg=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Je.current)je=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return je=!1,Zy(t,e,n);je=!!(t.flags&131072)}else je=!1,Z&&e.flags&1048576&&yh(e,To,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Qs(t,e),t=e.pendingProps;var i=Jr(e,Oe.current);Br(e,n),i=Pu(null,e,r,t,i,n);var s=Ou();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ke(r)?(s=!0,wo(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Iu(e),i.updater=qo,e.stateNode=i,i._reactInternals=e,Cl(e,r,t,n),e=Dl(null,e,r,!0,s,n)):(e.tag=0,Z&&s&&yu(e),Re(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Qs(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=gv(r),t=vt(r,t),i){case 0:e=Ol(null,e,r,t,n);break e;case 1:e=of(null,e,r,t,n);break e;case 11:e=rf(null,e,r,t,n);break e;case 14:e=sf(null,e,r,vt(r.type,t),n);break e}throw Error(E(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:vt(r,i),Ol(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:vt(r,i),of(t,e,r,i,n);case 3:e:{if(Qh(e),t===null)throw Error(E(387));r=e.pendingProps,s=e.memoizedState,i=s.element,Th(t,e),Io(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Hr(Error(E(423)),e),e=af(t,e,r,n,i);break e}else if(r!==i){i=Hr(Error(E(424)),e),e=af(t,e,r,n,i);break e}else for(Qe=On(e.stateNode.containerInfo.firstChild),et=e,Z=!0,Tt=null,n=Eh(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Kr(),r===i){e=fn(t,e,n);break e}Re(t,e,r,n)}e=e.child}return e;case 5:return Nh(e),t===null&&El(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Sl(r,i)?o=null:s!==null&&Sl(r,s)&&(e.flags|=32),Yh(t,e),Re(t,e,o,n),e.child;case 6:return t===null&&El(e),null;case 13:return Xh(t,e,n);case 4:return Eu(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Wr(e,null,r,n):Re(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:vt(r,i),rf(t,e,r,i,n);case 7:return Re(t,e,e.pendingProps,n),e.child;case 8:return Re(t,e,e.pendingProps.children,n),e.child;case 12:return Re(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Y(ko,r._currentValue),r._currentValue=o,s!==null)if(Ct(s.value,o)){if(s.children===i.children&&!Je.current){e=fn(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=sn(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Nl(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(E(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Nl(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Re(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Br(e,n),i=dt(i),r=r(i),e.flags|=1,Re(t,e,r,n),e.child;case 14:return r=e.type,i=vt(r,e.pendingProps),i=vt(r.type,i),sf(t,e,r,i,n);case 15:return Hh(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:vt(r,i),Qs(t,e),e.tag=1,Ke(r)?(t=!0,wo(e)):t=!1,Br(e,n),Ah(e,r,i),Cl(e,r,i,n),Dl(null,e,r,!0,t,n);case 19:return Zh(t,e,n);case 22:return Gh(t,e,n)}throw Error(E(156,e.tag))};function pg(t,e){return Ud(t,e)}function hv(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function lt(t,e,n,r){return new hv(t,e,n,r)}function zu(t){return t=t.prototype,!(!t||!t.isReactComponent)}function gv(t){if(typeof t=="function")return zu(t)?1:0;if(t!=null){if(t=t.$$typeof,t===su)return 11;if(t===ou)return 14}return 2}function Ln(t,e){var n=t.alternate;return n===null?(n=lt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function eo(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")zu(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Tr:return ir(n.children,i,s,e);case iu:o=8,i|=8;break;case Xa:return t=lt(12,n,e,i|2),t.elementType=Xa,t.lanes=s,t;case Za:return t=lt(13,n,e,i),t.elementType=Za,t.lanes=s,t;case el:return t=lt(19,n,e,i),t.elementType=el,t.lanes=s,t;case Id:return Qo(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case kd:o=10;break e;case Ad:o=9;break e;case su:o=11;break e;case ou:o=14;break e;case wn:o=16,r=null;break e}throw Error(E(130,t==null?t:typeof t,""))}return e=lt(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function ir(t,e,n,r){return t=lt(7,t,r,e),t.lanes=n,t}function Qo(t,e,n,r){return t=lt(22,t,r,e),t.elementType=Id,t.lanes=n,t.stateNode={isHidden:!1},t}function Ba(t,e,n){return t=lt(6,t,null,e),t.lanes=n,t}function $a(t,e,n){return e=lt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function pv(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=wa(0),this.expirationTimes=wa(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wa(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Uu(t,e,n,r,i,s,o,a,l){return t=new pv(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=lt(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Iu(s),t}function mv(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Sr,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function mg(t){if(!t)return Bn;t=t._reactInternals;e:{if(gr(t)!==t||t.tag!==1)throw Error(E(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ke(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(E(171))}if(t.tag===1){var n=t.type;if(Ke(n))return ph(t,n,e)}return e}function yg(t,e,n,r,i,s,o,a,l){return t=Uu(n,r,!0,t,i,s,o,a,l),t.context=mg(null),n=t.current,r=be(),i=_n(n),s=sn(r,i),s.callback=e??null,Dn(n,s,i),t.current.lanes=i,us(t,i,r),We(t,r),t}function Xo(t,e,n,r){var i=e.current,s=be(),o=_n(i);return n=mg(n),e.context===null?e.context=n:e.pendingContext=n,e=sn(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Dn(i,e,o),t!==null&&(Et(t,i,o,s),Hs(t,i,o)),o}function Ro(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function yf(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function ju(t,e){yf(t,e),(t=t.alternate)&&yf(t,e)}function yv(){return null}var vg=typeof reportError=="function"?reportError:function(t){console.error(t)};function Vu(t){this._internalRoot=t}Zo.prototype.render=Vu.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(E(409));Xo(t,e,null,null)};Zo.prototype.unmount=Vu.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;cr(function(){Xo(null,t,null,null)}),e[un]=null}};function Zo(t){this._internalRoot=t}Zo.prototype.unstable_scheduleHydration=function(t){if(t){var e=Hd();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Tn.length&&e!==0&&e<Tn[n].priority;n++);Tn.splice(n,0,t),n===0&&Yd(t)}};function Ju(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ea(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function vf(){}function vv(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=Ro(o);s.call(u)}}var o=yg(e,r,t,0,null,!1,!1,"",vf);return t._reactRootContainer=o,t[un]=o.current,Ji(t.nodeType===8?t.parentNode:t),cr(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=Ro(l);a.call(u)}}var l=Uu(t,0,!1,null,null,!1,!1,"",vf);return t._reactRootContainer=l,t[un]=l.current,Ji(t.nodeType===8?t.parentNode:t),cr(function(){Xo(e,l,n,r)}),l}function ta(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Ro(o);a.call(l)}}Xo(e,o,t,i)}else o=vv(n,e,t,i,r);return Ro(o)}Wd=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Si(e.pendingLanes);n!==0&&(uu(e,n|1),We(e,ue()),!(J&6)&&(Gr=ue()+500,Jn()))}break;case 13:cr(function(){var r=cn(t,1);if(r!==null){var i=be();Et(r,t,1,i)}}),ju(t,1)}};cu=function(t){if(t.tag===13){var e=cn(t,134217728);if(e!==null){var n=be();Et(e,t,134217728,n)}ju(t,134217728)}};qd=function(t){if(t.tag===13){var e=_n(t),n=cn(t,e);if(n!==null){var r=be();Et(n,t,e,r)}ju(t,e)}};Hd=function(){return H};Gd=function(t,e){var n=H;try{return H=t,e()}finally{H=n}};cl=function(t,e,n){switch(e){case"input":if(rl(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Ko(r);if(!i)throw Error(E(90));Nd(r),rl(r,i)}}}break;case"textarea":Cd(t,n);break;case"select":e=n.value,e!=null&&Lr(t,!!n.multiple,e,!1)}};bd=Fu;Md=cr;var wv={usingClientEntryPoint:!1,Events:[fs,Er,Ko,_d,Ld,Fu]},pi={findFiberByHostInstance:Xn,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},Sv={bundleType:pi.bundleType,version:pi.version,rendererPackageName:pi.rendererPackageName,rendererConfig:pi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:hn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=$d(t),t===null?null:t.stateNode},findFiberByHostInstance:pi.findFiberByHostInstance||yv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ms=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ms.isDisabled&&Ms.supportsFiber)try{Uo=Ms.inject(Sv),Kt=Ms}catch{}}it.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wv;it.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ju(e))throw Error(E(200));return mv(t,e,null,n)};it.createRoot=function(t,e){if(!Ju(t))throw Error(E(299));var n=!1,r="",i=vg;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Uu(t,1,!1,null,null,n,!1,r,i),t[un]=e.current,Ji(t.nodeType===8?t.parentNode:t),new Vu(e)};it.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(E(188)):(t=Object.keys(t).join(","),Error(E(268,t)));return t=$d(e),t=t===null?null:t.stateNode,t};it.flushSync=function(t){return cr(t)};it.hydrate=function(t,e,n){if(!ea(e))throw Error(E(200));return ta(null,t,e,!0,n)};it.hydrateRoot=function(t,e,n){if(!Ju(t))throw Error(E(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=vg;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=yg(e,null,t,1,n??null,i,!1,s,o),t[un]=e.current,Ji(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Zo(e)};it.render=function(t,e,n){if(!ea(e))throw Error(E(200));return ta(null,t,e,!1,n)};it.unmountComponentAtNode=function(t){if(!ea(t))throw Error(E(40));return t._reactRootContainer?(cr(function(){ta(null,null,t,!1,function(){t._reactRootContainer=null,t[un]=null})}),!0):!1};it.unstable_batchedUpdates=Fu;it.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!ea(n))throw Error(E(200));if(t==null||t._reactInternals===void 0)throw Error(E(38));return ta(t,e,n,!1,r)};it.version="18.2.0-next-9e3b772b8-20220608";function wg(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(wg)}catch(t){console.error(t)}}wg(),yd.exports=it;var Tv=yd.exports,wf=Tv;Ya.createRoot=wf.createRoot,Ya.hydrateRoot=wf.hydrateRoot;var q;(function(t){t[t.Canceled=1]="Canceled",t[t.Unknown=2]="Unknown",t[t.InvalidArgument=3]="InvalidArgument",t[t.DeadlineExceeded=4]="DeadlineExceeded",t[t.NotFound=5]="NotFound",t[t.AlreadyExists=6]="AlreadyExists",t[t.PermissionDenied=7]="PermissionDenied",t[t.ResourceExhausted=8]="ResourceExhausted",t[t.FailedPrecondition=9]="FailedPrecondition",t[t.Aborted=10]="Aborted",t[t.OutOfRange=11]="OutOfRange",t[t.Unimplemented=12]="Unimplemented",t[t.Internal=13]="Internal",t[t.Unavailable=14]="Unavailable",t[t.DataLoss=15]="DataLoss",t[t.Unauthenticated=16]="Unauthenticated"})(q||(q={}));function Sf(t){const e=q[t];return typeof e!="string"?t.toString():e[0].toLowerCase()+e.substring(1).replace(/[A-Z]/g,n=>"_"+n.toLowerCase())}class he extends Error{constructor(e,n=q.Unknown,r,i,s){super(kv(e,n)),this.name="ConnectError",Object.setPrototypeOf(this,new.target.prototype),this.rawMessage=e,this.code=n,this.metadata=new Headers(r??{}),this.details=i??[],this.cause=s}static from(e,n=q.Unknown){return e instanceof he?e:e instanceof Error?e.name=="AbortError"?new he(e.message,q.Canceled):new he(e.message,n,void 0,void 0,e):new he(String(e),n,void 0,void 0,e)}static[Symbol.hasInstance](e){return e instanceof Error?Object.getPrototypeOf(e)===he.prototype?!0:e.name==="ConnectError"&&"code"in e&&typeof e.code=="number"&&"metadata"in e&&"details"in e&&Array.isArray(e.details)&&"rawMessage"in e&&typeof e.rawMessage=="string"&&"cause"in e:!1}findDetails(e){const n="typeName"in e?{findMessage:i=>i===e.typeName?e:void 0}:e,r=[];for(const i of this.details){if("getType"in i){n.findMessage(i.getType().typeName)&&r.push(i);continue}const s=n.findMessage(i.type);if(s)try{r.push(s.fromBinary(i.value))}catch{}}return r}}function kv(t,e){return t.length?`[${Sf(e)}] ${t}`:`[${Sf(e)}]`}function oe(t,e){if(!t)throw new Error(e)}const Av=34028234663852886e22,Iv=-34028234663852886e22,Ev=4294967295,Nv=2147483647,xv=-2147483648;function to(t){if(typeof t!="number")throw new Error("invalid int 32: "+typeof t);if(!Number.isInteger(t)||t>Nv||t<xv)throw new Error("invalid int 32: "+t)}function Vl(t){if(typeof t!="number")throw new Error("invalid uint 32: "+typeof t);if(!Number.isInteger(t)||t>Ev||t<0)throw new Error("invalid uint 32: "+t)}function Sg(t){if(typeof t!="number")throw new Error("invalid float 32: "+typeof t);if(Number.isFinite(t)&&(t>Av||t<Iv))throw new Error("invalid float 32: "+t)}const Tg=Symbol("@bufbuild/protobuf/enum-type");function Cv(t){const e=t[Tg];return oe(e,"missing enum type on enum object"),e}function kg(t,e,n,r){t[Tg]=Ag(e,n.map(i=>({no:i.no,name:i.name,localName:t[i.no]})))}function Ag(t,e,n){const r=Object.create(null),i=Object.create(null),s=[];for(const o of e){const a=Ig(o);s.push(a),r[o.name]=a,i[o.no]=a}return{typeName:t,values:s,findName(o){return r[o]},findNumber(o){return i[o]}}}function Pv(t,e,n){const r={};for(const i of e){const s=Ig(i);r[s.localName]=s.no,r[s.no]=s.localName}return kg(r,t,e),r}function Ig(t){return"localName"in t?t:Object.assign(Object.assign({},t),{localName:t.name})}class Be{equals(e){return this.getType().runtime.util.equals(this.getType(),this,e)}clone(){return this.getType().runtime.util.clone(this)}fromBinary(e,n){const r=this.getType(),i=r.runtime.bin,s=i.makeReadOptions(n);return i.readMessage(this,s.readerFactory(e),e.byteLength,s),this}fromJson(e,n){const r=this.getType(),i=r.runtime.json,s=i.makeReadOptions(n);return i.readMessage(r,e,s,this),this}fromJsonString(e,n){let r;try{r=JSON.parse(e)}catch(i){throw new Error(`cannot decode ${this.getType().typeName} from JSON: ${i instanceof Error?i.message:String(i)}`)}return this.fromJson(r,n)}toBinary(e){const n=this.getType(),r=n.runtime.bin,i=r.makeWriteOptions(e),s=i.writerFactory();return r.writeMessage(this,s,i),s.finish()}toJson(e){const n=this.getType(),r=n.runtime.json,i=r.makeWriteOptions(e);return r.writeMessage(this,i)}toJsonString(e){var n;const r=this.toJson(e);return JSON.stringify(r,null,(n=e==null?void 0:e.prettySpaces)!==null&&n!==void 0?n:0)}toJSON(){return this.toJson({emitDefaultValues:!0})}getType(){return Object.getPrototypeOf(this).constructor}}function Ov(t,e,n,r){var i;const s=(i=r==null?void 0:r.localName)!==null&&i!==void 0?i:e.substring(e.lastIndexOf(".")+1),o={[s]:function(a){t.util.initFields(this),t.util.initPartial(a,this)}}[s];return Object.setPrototypeOf(o.prototype,new Be),Object.assign(o,{runtime:t,typeName:e,fields:t.util.newFieldList(n),fromBinary(a,l){return new o().fromBinary(a,l)},fromJson(a,l){return new o().fromJson(a,l)},fromJsonString(a,l){return new o().fromJsonString(a,l)},equals(a,l){return t.util.equals(o,a,l)}}),o}function Dv(){let t=0,e=0;for(let r=0;r<28;r+=7){let i=this.buf[this.pos++];if(t|=(i&127)<<r,!(i&128))return this.assertBounds(),[t,e]}let n=this.buf[this.pos++];if(t|=(n&15)<<28,e=(n&112)>>4,!(n&128))return this.assertBounds(),[t,e];for(let r=3;r<=31;r+=7){let i=this.buf[this.pos++];if(e|=(i&127)<<r,!(i&128))return this.assertBounds(),[t,e]}throw new Error("invalid varint")}function za(t,e,n){for(let s=0;s<28;s=s+7){const o=t>>>s,a=!(!(o>>>7)&&e==0),l=(a?o|128:o)&255;if(n.push(l),!a)return}const r=t>>>28&15|(e&7)<<4,i=!!(e>>3);if(n.push((i?r|128:r)&255),!!i){for(let s=3;s<31;s=s+7){const o=e>>>s,a=!!(o>>>7),l=(a?o|128:o)&255;if(n.push(l),!a)return}n.push(e>>>31&1)}}const no=4294967296;function Tf(t){const e=t[0]==="-";e&&(t=t.slice(1));const n=1e6;let r=0,i=0;function s(o,a){const l=Number(t.slice(o,a));i*=n,r=r*n+l,r>=no&&(i=i+(r/no|0),r=r%no)}return s(-24,-18),s(-18,-12),s(-12,-6),s(-6),e?Ng(r,i):Ku(r,i)}function Rv(t,e){let n=Ku(t,e);const r=n.hi&2147483648;r&&(n=Ng(n.lo,n.hi));const i=Eg(n.lo,n.hi);return r?"-"+i:i}function Eg(t,e){if({lo:t,hi:e}=_v(t,e),e<=2097151)return String(no*e+t);const n=t&16777215,r=(t>>>24|e<<8)&16777215,i=e>>16&65535;let s=n+r*6777216+i*6710656,o=r+i*8147497,a=i*2;const l=1e7;return s>=l&&(o+=Math.floor(s/l),s%=l),o>=l&&(a+=Math.floor(o/l),o%=l),a.toString()+kf(o)+kf(s)}function _v(t,e){return{lo:t>>>0,hi:e>>>0}}function Ku(t,e){return{lo:t|0,hi:e|0}}function Ng(t,e){return e=~e,t?t=~t+1:e+=1,Ku(t,e)}const kf=t=>{const e=String(t);return"0000000".slice(e.length)+e};function Af(t,e){if(t>=0){for(;t>127;)e.push(t&127|128),t=t>>>7;e.push(t)}else{for(let n=0;n<9;n++)e.push(t&127|128),t=t>>7;e.push(1)}}function Lv(){let t=this.buf[this.pos++],e=t&127;if(!(t&128))return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<7,!(t&128))return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<14,!(t&128))return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<21,!(t&128))return this.assertBounds(),e;t=this.buf[this.pos++],e|=(t&15)<<28;for(let n=5;t&128&&n<10;n++)t=this.buf[this.pos++];if(t&128)throw new Error("invalid varint");return this.assertBounds(),e>>>0}var If={};function bv(){const t=new DataView(new ArrayBuffer(8));if(typeof BigInt=="function"&&typeof t.getBigInt64=="function"&&typeof t.getBigUint64=="function"&&typeof t.setBigInt64=="function"&&typeof t.setBigUint64=="function"&&(typeof process!="object"||typeof If!="object"||If.BUF_BIGINT_DISABLE!=="1")){const i=BigInt("-9223372036854775808"),s=BigInt("9223372036854775807"),o=BigInt("0"),a=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(l){const u=typeof l=="bigint"?l:BigInt(l);if(u>s||u<i)throw new Error(`int64 invalid: ${l}`);return u},uParse(l){const u=typeof l=="bigint"?l:BigInt(l);if(u>a||u<o)throw new Error(`uint64 invalid: ${l}`);return u},enc(l){return t.setBigInt64(0,this.parse(l),!0),{lo:t.getInt32(0,!0),hi:t.getInt32(4,!0)}},uEnc(l){return t.setBigInt64(0,this.uParse(l),!0),{lo:t.getInt32(0,!0),hi:t.getInt32(4,!0)}},dec(l,u){return t.setInt32(0,l,!0),t.setInt32(4,u,!0),t.getBigInt64(0,!0)},uDec(l,u){return t.setInt32(0,l,!0),t.setInt32(4,u,!0),t.getBigUint64(0,!0)}}}const n=i=>oe(/^-?[0-9]+$/.test(i),`int64 invalid: ${i}`),r=i=>oe(/^[0-9]+$/.test(i),`uint64 invalid: ${i}`);return{zero:"0",supported:!1,parse(i){return typeof i!="string"&&(i=i.toString()),n(i),i},uParse(i){return typeof i!="string"&&(i=i.toString()),r(i),i},enc(i){return typeof i!="string"&&(i=i.toString()),n(i),Tf(i)},uEnc(i){return typeof i!="string"&&(i=i.toString()),r(i),Tf(i)},dec(i,s){return Rv(i,s)},uDec(i,s){return Eg(i,s)}}}const ge=bv();var A;(function(t){t[t.DOUBLE=1]="DOUBLE",t[t.FLOAT=2]="FLOAT",t[t.INT64=3]="INT64",t[t.UINT64=4]="UINT64",t[t.INT32=5]="INT32",t[t.FIXED64=6]="FIXED64",t[t.FIXED32=7]="FIXED32",t[t.BOOL=8]="BOOL",t[t.STRING=9]="STRING",t[t.BYTES=12]="BYTES",t[t.UINT32=13]="UINT32",t[t.SFIXED32=15]="SFIXED32",t[t.SFIXED64=16]="SFIXED64",t[t.SINT32=17]="SINT32",t[t.SINT64=18]="SINT64"})(A||(A={}));var $n;(function(t){t[t.BIGINT=0]="BIGINT",t[t.STRING=1]="STRING"})($n||($n={}));function mn(t,e,n){if(e===n)return!0;if(t==A.BYTES){if(!(e instanceof Uint8Array)||!(n instanceof Uint8Array)||e.length!==n.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==n[r])return!1;return!0}switch(t){case A.UINT64:case A.FIXED64:case A.INT64:case A.SFIXED64:case A.SINT64:return e==n}return!1}function Yr(t,e){switch(t){case A.BOOL:return!1;case A.UINT64:case A.FIXED64:case A.INT64:case A.SFIXED64:case A.SINT64:return e==0?ge.zero:"0";case A.DOUBLE:case A.FLOAT:return 0;case A.BYTES:return new Uint8Array(0);case A.STRING:return"";default:return 0}}function xg(t,e){switch(t){case A.BOOL:return e===!1;case A.STRING:return e==="";case A.BYTES:return e instanceof Uint8Array&&!e.byteLength;default:return e==0}}var ce;(function(t){t[t.Varint=0]="Varint",t[t.Bit64=1]="Bit64",t[t.LengthDelimited=2]="LengthDelimited",t[t.StartGroup=3]="StartGroup",t[t.EndGroup=4]="EndGroup",t[t.Bit32=5]="Bit32"})(ce||(ce={}));class Mv{constructor(e){this.stack=[],this.textEncoder=e??new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let e=0;for(let i=0;i<this.chunks.length;i++)e+=this.chunks[i].length;let n=new Uint8Array(e),r=0;for(let i=0;i<this.chunks.length;i++)n.set(this.chunks[i],r),r+=this.chunks[i].length;return this.chunks=[],n}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),n=this.stack.pop();if(!n)throw new Error("invalid state, fork stack empty");return this.chunks=n.chunks,this.buf=n.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,n){return this.uint32((e<<3|n)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(Vl(e);e>127;)this.buf.push(e&127|128),e=e>>>7;return this.buf.push(e),this}int32(e){return to(e),Af(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let n=this.textEncoder.encode(e);return this.uint32(n.byteLength),this.raw(n)}float(e){Sg(e);let n=new Uint8Array(4);return new DataView(n.buffer).setFloat32(0,e,!0),this.raw(n)}double(e){let n=new Uint8Array(8);return new DataView(n.buffer).setFloat64(0,e,!0),this.raw(n)}fixed32(e){Vl(e);let n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,e,!0),this.raw(n)}sfixed32(e){to(e);let n=new Uint8Array(4);return new DataView(n.buffer).setInt32(0,e,!0),this.raw(n)}sint32(e){return to(e),e=(e<<1^e>>31)>>>0,Af(e,this.buf),this}sfixed64(e){let n=new Uint8Array(8),r=new DataView(n.buffer),i=ge.enc(e);return r.setInt32(0,i.lo,!0),r.setInt32(4,i.hi,!0),this.raw(n)}fixed64(e){let n=new Uint8Array(8),r=new DataView(n.buffer),i=ge.uEnc(e);return r.setInt32(0,i.lo,!0),r.setInt32(4,i.hi,!0),this.raw(n)}int64(e){let n=ge.enc(e);return za(n.lo,n.hi,this.buf),this}sint64(e){let n=ge.enc(e),r=n.hi>>31,i=n.lo<<1^r,s=(n.hi<<1|n.lo>>>31)^r;return za(i,s,this.buf),this}uint64(e){let n=ge.uEnc(e);return za(n.lo,n.hi,this.buf),this}}class Fv{constructor(e,n){this.varint64=Dv,this.uint32=Lv,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength),this.textDecoder=n??new TextDecoder}tag(){let e=this.uint32(),n=e>>>3,r=e&7;if(n<=0||r<0||r>5)throw new Error("illegal tag: field no "+n+" wire type "+r);return[n,r]}skip(e,n){let r=this.pos;switch(e){case ce.Varint:for(;this.buf[this.pos++]&128;);break;case ce.Bit64:this.pos+=4;case ce.Bit32:this.pos+=4;break;case ce.LengthDelimited:let i=this.uint32();this.pos+=i;break;case ce.StartGroup:for(;;){const[s,o]=this.tag();if(o===ce.EndGroup){if(n!==void 0&&s!==n)throw new Error("invalid end group tag");break}this.skip(o,s)}break;default:throw new Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(r,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let e=this.uint32();return e>>>1^-(e&1)}int64(){return ge.dec(...this.varint64())}uint64(){return ge.uDec(...this.varint64())}sint64(){let[e,n]=this.varint64(),r=-(e&1);return e=(e>>>1|(n&1)<<31)^r,n=n>>>1^r,ge.dec(e,n)}bool(){let[e,n]=this.varint64();return e!==0||n!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return ge.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return ge.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),n=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(n,n+e)}string(){return this.textDecoder.decode(this.bytes())}}function Bv(t,e,n,r){let i;return{typeName:e,extendee:n,get field(){if(!i){const s=typeof r=="function"?r():r;s.name=e.split(".").pop(),s.jsonName=`[${e}]`,i=t.util.newFieldList([s]).list()[0]}return i},runtime:t}}function Cg(t){const e=t.field.localName,n=Object.create(null);return n[e]=$v(t),[n,()=>n[e]]}function $v(t){const e=t.field;if(e.repeated)return[];if(e.default!==void 0)return e.default;switch(e.kind){case"enum":return e.T.values[0].no;case"scalar":return Yr(e.T,e.L);case"message":const n=e.T,r=new n;return n.fieldWrapper?n.fieldWrapper.unwrapField(r):r;case"map":throw"map fields are not allowed to be extensions"}}function zv(t,e){if(!e.repeated&&(e.kind=="enum"||e.kind=="scalar")){for(let n=t.length-1;n>=0;--n)if(t[n].no==e.no)return[t[n]];return[]}return t.filter(n=>n.no===e.no)}let Xt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),na=[];for(let t=0;t<Xt.length;t++)na[Xt[t].charCodeAt(0)]=t;na[45]=Xt.indexOf("+");na[95]=Xt.indexOf("/");const Wu={dec(t){let e=t.length*3/4;t[t.length-2]=="="?e-=2:t[t.length-1]=="="&&(e-=1);let n=new Uint8Array(e),r=0,i=0,s,o=0;for(let a=0;a<t.length;a++){if(s=na[t.charCodeAt(a)],s===void 0)switch(t[a]){case"=":i=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(i){case 0:o=s,i=1;break;case 1:n[r++]=o<<2|(s&48)>>4,o=s,i=2;break;case 2:n[r++]=(o&15)<<4|(s&60)>>2,o=s,i=3;break;case 3:n[r++]=(o&3)<<6|s,i=0;break}}if(i==1)throw Error("invalid base64 string.");return n.subarray(0,r)},enc(t){let e="",n=0,r,i=0;for(let s=0;s<t.length;s++)switch(r=t[s],n){case 0:e+=Xt[r>>2],i=(r&3)<<4,n=1;break;case 1:e+=Xt[i|r>>4],i=(r&15)<<2,n=2;break;case 2:e+=Xt[i|r>>6],e+=Xt[r&63],n=0;break}return n&&(e+=Xt[i],e+="=",n==1&&(e+="=")),e}};function Uv(t,e,n){Og(e,t);const r=e.runtime.bin.makeReadOptions(n),i=zv(t.getType().runtime.bin.listUnknownFields(t),e.field),[s,o]=Cg(e);for(const a of i)e.runtime.bin.readField(s,r.readerFactory(a.data),e.field,a.wireType,r);return o()}function jv(t,e,n,r){Og(e,t);const i=e.runtime.bin.makeReadOptions(r),s=e.runtime.bin.makeWriteOptions(r);if(Pg(t,e)){const u=t.getType().runtime.bin.listUnknownFields(t).filter(c=>c.no!=e.field.no);t.getType().runtime.bin.discardUnknownFields(t);for(const c of u)t.getType().runtime.bin.onUnknownField(t,c.no,c.wireType,c.data)}const o=s.writerFactory();let a=e.field;!a.opt&&!a.repeated&&(a.kind=="enum"||a.kind=="scalar")&&(a=Object.assign(Object.assign({},e.field),{opt:!0})),e.runtime.bin.writeField(a,n,o,s);const l=i.readerFactory(o.finish());for(;l.pos<l.len;){const[u,c]=l.tag(),h=l.skip(c,u);t.getType().runtime.bin.onUnknownField(t,u,c,h)}}function Pg(t,e){const n=t.getType();return e.extendee.typeName===n.typeName&&!!n.runtime.bin.listUnknownFields(t).find(r=>r.no==e.field.no)}function Og(t,e){oe(t.extendee.typeName==e.getType().typeName,`extension ${t.typeName} can only be applied to message ${t.extendee.typeName}`)}function Dg(t,e){const n=t.localName;if(t.repeated)return e[n].length>0;if(t.oneof)return e[t.oneof.localName].case===n;switch(t.kind){case"enum":case"scalar":return t.opt||t.req?e[n]!==void 0:t.kind=="enum"?e[n]!==t.T.values[0].no:!xg(t.T,e[n]);case"message":return e[n]!==void 0;case"map":return Object.keys(e[n]).length>0}}function Ef(t,e){const n=t.localName,r=!t.opt&&!t.req;if(t.repeated)e[n]=[];else if(t.oneof)e[t.oneof.localName]={case:void 0};else switch(t.kind){case"map":e[n]={};break;case"enum":e[n]=r?t.T.values[0].no:void 0;break;case"scalar":e[n]=r?Yr(t.T,t.L):void 0;break;case"message":e[n]=void 0;break}}function sr(t,e){if(t===null||typeof t!="object"||!Object.getOwnPropertyNames(Be.prototype).every(r=>r in t&&typeof t[r]=="function"))return!1;const n=t.getType();return n===null||typeof n!="function"||!("typeName"in n)||typeof n.typeName!="string"?!1:e===void 0?!0:n.typeName==e.typeName}function Rg(t,e){return sr(e)||!t.fieldWrapper?e:t.fieldWrapper.wrapField(e)}A.DOUBLE,A.FLOAT,A.INT64,A.UINT64,A.INT32,A.UINT32,A.BOOL,A.STRING,A.BYTES;const Nf={ignoreUnknownFields:!1},xf={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0};function Vv(t){return t?Object.assign(Object.assign({},Nf),t):Nf}function Jv(t){return t?Object.assign(Object.assign({},xf),t):xf}const _o=Symbol(),ro=Symbol();function Kv(){return{makeReadOptions:Vv,makeWriteOptions:Jv,readMessage(t,e,n,r){if(e==null||Array.isArray(e)||typeof e!="object")throw new Error(`cannot decode message ${t.typeName} from JSON: ${_t(e)}`);r=r??new t;const i=new Map,s=n.typeRegistry;for(const[o,a]of Object.entries(e)){const l=t.fields.findJsonName(o);if(l){if(l.oneof){if(a===null&&l.kind=="scalar")continue;const u=i.get(l.oneof);if(u!==void 0)throw new Error(`cannot decode message ${t.typeName} from JSON: multiple keys for oneof "${l.oneof.name}" present: "${u}", "${o}"`);i.set(l.oneof,o)}Cf(r,a,l,n,t)}else{let u=!1;if(s!=null&&s.findExtension&&o.startsWith("[")&&o.endsWith("]")){const c=s.findExtension(o.substring(1,o.length-1));if(c&&c.extendee.typeName==t.typeName){u=!0;const[h,g]=Cg(c);Cf(h,a,c.field,n,c),jv(r,c,g(),n)}}if(!u&&!n.ignoreUnknownFields)throw new Error(`cannot decode message ${t.typeName} from JSON: key "${o}" is unknown`)}}return r},writeMessage(t,e){const n=t.getType(),r={};let i;try{for(i of n.fields.byNumber()){if(!Dg(i,t)){if(i.req)throw"required field not set";if(!e.emitDefaultValues||!qv(i))continue}const o=i.oneof?t[i.oneof.localName].value:t[i.localName],a=Pf(i,o,e);a!==void 0&&(r[e.useProtoFieldName?i.name:i.jsonName]=a)}const s=e.typeRegistry;if(s!=null&&s.findExtensionFor)for(const o of n.runtime.bin.listUnknownFields(t)){const a=s.findExtensionFor(n.typeName,o.no);if(a&&Pg(t,a)){const l=Uv(t,a,e),u=Pf(a.field,l,e);u!==void 0&&(r[a.field.jsonName]=u)}}}catch(s){const o=i?`cannot encode field ${n.typeName}.${i.name} to JSON`:`cannot encode message ${n.typeName} to JSON`,a=s instanceof Error?s.message:String(s);throw new Error(o+(a.length>0?`: ${a}`:""))}return r},readScalar(t,e,n){return Di(t,e,n??$n.BIGINT,!0)},writeScalar(t,e,n){if(e!==void 0&&(n||xg(t,e)))return io(t,e)},debug:_t}}function _t(t){if(t===null)return"null";switch(typeof t){case"object":return Array.isArray(t)?"array":"object";case"string":return t.length>100?"string":`"${t.split('"').join('\\"')}"`;default:return String(t)}}function Cf(t,e,n,r,i){let s=n.localName;if(n.repeated){if(oe(n.kind!="map"),e===null)return;if(!Array.isArray(e))throw new Error(`cannot decode field ${i.typeName}.${n.name} from JSON: ${_t(e)}`);const o=t[s];for(const a of e){if(a===null)throw new Error(`cannot decode field ${i.typeName}.${n.name} from JSON: ${_t(a)}`);switch(n.kind){case"message":o.push(n.T.fromJson(a,r));break;case"enum":const l=Ua(n.T,a,r.ignoreUnknownFields,!0);l!==ro&&o.push(l);break;case"scalar":try{o.push(Di(n.T,a,n.L,!0))}catch(u){let c=`cannot decode field ${i.typeName}.${n.name} from JSON: ${_t(a)}`;throw u instanceof Error&&u.message.length>0&&(c+=`: ${u.message}`),new Error(c)}break}}}else if(n.kind=="map"){if(e===null)return;if(typeof e!="object"||Array.isArray(e))throw new Error(`cannot decode field ${i.typeName}.${n.name} from JSON: ${_t(e)}`);const o=t[s];for(const[a,l]of Object.entries(e)){if(l===null)throw new Error(`cannot decode field ${i.typeName}.${n.name} from JSON: map value null`);let u;try{u=Wv(n.K,a)}catch(c){let h=`cannot decode map key for field ${i.typeName}.${n.name} from JSON: ${_t(e)}`;throw c instanceof Error&&c.message.length>0&&(h+=`: ${c.message}`),new Error(h)}switch(n.V.kind){case"message":o[u]=n.V.T.fromJson(l,r);break;case"enum":const c=Ua(n.V.T,l,r.ignoreUnknownFields,!0);c!==ro&&(o[u]=c);break;case"scalar":try{o[u]=Di(n.V.T,l,$n.BIGINT,!0)}catch(h){let g=`cannot decode map value for field ${i.typeName}.${n.name} from JSON: ${_t(e)}`;throw h instanceof Error&&h.message.length>0&&(g+=`: ${h.message}`),new Error(g)}break}}}else switch(n.oneof&&(t=t[n.oneof.localName]={case:s},s="value"),n.kind){case"message":const o=n.T;if(e===null&&o.typeName!="google.protobuf.Value")return;let a=t[s];sr(a)?a.fromJson(e,r):(t[s]=a=o.fromJson(e,r),o.fieldWrapper&&!n.oneof&&(t[s]=o.fieldWrapper.unwrapField(a)));break;case"enum":const l=Ua(n.T,e,r.ignoreUnknownFields,!1);switch(l){case _o:Ef(n,t);break;case ro:break;default:t[s]=l;break}break;case"scalar":try{const u=Di(n.T,e,n.L,!1);switch(u){case _o:Ef(n,t);break;default:t[s]=u;break}}catch(u){let c=`cannot decode field ${i.typeName}.${n.name} from JSON: ${_t(e)}`;throw u instanceof Error&&u.message.length>0&&(c+=`: ${u.message}`),new Error(c)}break}}function Wv(t,e){if(t===A.BOOL)switch(e){case"true":e=!0;break;case"false":e=!1;break}return Di(t,e,$n.BIGINT,!0).toString()}function Di(t,e,n,r){if(e===null)return r?Yr(t,n):_o;switch(t){case A.DOUBLE:case A.FLOAT:if(e==="NaN")return Number.NaN;if(e==="Infinity")return Number.POSITIVE_INFINITY;if(e==="-Infinity")return Number.NEGATIVE_INFINITY;if(e===""||typeof e=="string"&&e.trim().length!==e.length||typeof e!="string"&&typeof e!="number")break;const i=Number(e);if(Number.isNaN(i)||!Number.isFinite(i))break;return t==A.FLOAT&&Sg(i),i;case A.INT32:case A.FIXED32:case A.SFIXED32:case A.SINT32:case A.UINT32:let s;if(typeof e=="number"?s=e:typeof e=="string"&&e.length>0&&e.trim().length===e.length&&(s=Number(e)),s===void 0)break;return t==A.UINT32||t==A.FIXED32?Vl(s):to(s),s;case A.INT64:case A.SFIXED64:case A.SINT64:if(typeof e!="number"&&typeof e!="string")break;const o=ge.parse(e);return n?o.toString():o;case A.FIXED64:case A.UINT64:if(typeof e!="number"&&typeof e!="string")break;const a=ge.uParse(e);return n?a.toString():a;case A.BOOL:if(typeof e!="boolean")break;return e;case A.STRING:if(typeof e!="string")break;try{encodeURIComponent(e)}catch{throw new Error("invalid UTF8")}return e;case A.BYTES:if(e==="")return new Uint8Array(0);if(typeof e!="string")break;return Wu.dec(e)}throw new Error}function Ua(t,e,n,r){if(e===null)return t.typeName=="google.protobuf.NullValue"?0:r?t.values[0].no:_o;switch(typeof e){case"number":if(Number.isInteger(e))return e;break;case"string":const i=t.findName(e);if(i!==void 0)return i.no;if(n)return ro;break}throw new Error(`cannot decode enum ${t.typeName} from JSON: ${_t(e)}`)}function qv(t){return t.repeated||t.kind=="map"?!0:!(t.oneof||t.kind=="message"||t.opt||t.req)}function Pf(t,e,n){if(t.kind=="map"){oe(typeof e=="object"&&e!=null);const r={},i=Object.entries(e);switch(t.V.kind){case"scalar":for(const[o,a]of i)r[o.toString()]=io(t.V.T,a);break;case"message":for(const[o,a]of i)r[o.toString()]=a.toJson(n);break;case"enum":const s=t.V.T;for(const[o,a]of i)r[o.toString()]=ja(s,a,n.enumAsInteger);break}return n.emitDefaultValues||i.length>0?r:void 0}if(t.repeated){oe(Array.isArray(e));const r=[];switch(t.kind){case"scalar":for(let i=0;i<e.length;i++)r.push(io(t.T,e[i]));break;case"enum":for(let i=0;i<e.length;i++)r.push(ja(t.T,e[i],n.enumAsInteger));break;case"message":for(let i=0;i<e.length;i++)r.push(e[i].toJson(n));break}return n.emitDefaultValues||r.length>0?r:void 0}switch(t.kind){case"scalar":return io(t.T,e);case"enum":return ja(t.T,e,n.enumAsInteger);case"message":return Rg(t.T,e).toJson(n)}}function ja(t,e,n){var r;if(oe(typeof e=="number"),t.typeName=="google.protobuf.NullValue")return null;if(n)return e;const i=t.findNumber(e);return(r=i==null?void 0:i.name)!==null&&r!==void 0?r:e}function io(t,e){switch(t){case A.INT32:case A.SFIXED32:case A.SINT32:case A.FIXED32:case A.UINT32:return oe(typeof e=="number"),e;case A.FLOAT:case A.DOUBLE:return oe(typeof e=="number"),Number.isNaN(e)?"NaN":e===Number.POSITIVE_INFINITY?"Infinity":e===Number.NEGATIVE_INFINITY?"-Infinity":e;case A.STRING:return oe(typeof e=="string"),e;case A.BOOL:return oe(typeof e=="boolean"),e;case A.UINT64:case A.FIXED64:case A.INT64:case A.SFIXED64:case A.SINT64:return oe(typeof e=="bigint"||typeof e=="string"||typeof e=="number"),e.toString();case A.BYTES:return oe(e instanceof Uint8Array),Wu.enc(e)}}const yr=Symbol("@bufbuild/protobuf/unknown-fields"),Of={readUnknownFields:!0,readerFactory:t=>new Fv(t)},Df={writeUnknownFields:!0,writerFactory:()=>new Mv};function Hv(t){return t?Object.assign(Object.assign({},Of),t):Of}function Gv(t){return t?Object.assign(Object.assign({},Df),t):Df}function Yv(){return{makeReadOptions:Hv,makeWriteOptions:Gv,listUnknownFields(t){var e;return(e=t[yr])!==null&&e!==void 0?e:[]},discardUnknownFields(t){delete t[yr]},writeUnknownFields(t,e){const r=t[yr];if(r)for(const i of r)e.tag(i.no,i.wireType).raw(i.data)},onUnknownField(t,e,n,r){const i=t;Array.isArray(i[yr])||(i[yr]=[]),i[yr].push({no:e,wireType:n,data:r})},readMessage(t,e,n,r,i){const s=t.getType(),o=i?e.len:e.pos+n;let a,l;for(;e.pos<o&&([a,l]=e.tag(),!(i===!0&&l==ce.EndGroup));){const u=s.fields.find(a);if(!u){const c=e.skip(l,a);r.readUnknownFields&&this.onUnknownField(t,a,l,c);continue}Rf(t,e,u,l,r)}if(i&&(l!=ce.EndGroup||a!==n))throw new Error("invalid end group tag")},readField:Rf,writeMessage(t,e,n){const r=t.getType();for(const i of r.fields.byNumber()){if(!Dg(i,t)){if(i.req)throw new Error(`cannot encode field ${r.typeName}.${i.name} to binary: required field not set`);continue}const s=i.oneof?t[i.oneof.localName].value:t[i.localName];_f(i,s,e,n)}return n.writeUnknownFields&&this.writeUnknownFields(t,e),e},writeField(t,e,n,r){e!==void 0&&_f(t,e,n,r)}}}function Rf(t,e,n,r,i){let{repeated:s,localName:o}=n;switch(n.oneof&&(t=t[n.oneof.localName],t.case!=o&&delete t.value,t.case=o,o="value"),n.kind){case"scalar":case"enum":const a=n.kind=="enum"?A.INT32:n.T;let l=Lo;if(n.kind=="scalar"&&n.L>0&&(l=Xv),s){let g=t[o];if(r==ce.LengthDelimited&&a!=A.STRING&&a!=A.BYTES){let v=e.uint32()+e.pos;for(;e.pos<v;)g.push(l(e,a))}else g.push(l(e,a))}else t[o]=l(e,a);break;case"message":const u=n.T;s?t[o].push(so(e,new u,i,n)):sr(t[o])?so(e,t[o],i,n):(t[o]=so(e,new u,i,n),u.fieldWrapper&&!n.oneof&&!n.repeated&&(t[o]=u.fieldWrapper.unwrapField(t[o])));break;case"map":let[c,h]=Qv(n,e,i);t[o][c]=h;break}}function so(t,e,n,r){const i=e.getType().runtime.bin,s=r==null?void 0:r.delimited;return i.readMessage(e,t,s?r.no:t.uint32(),n,s),e}function Qv(t,e,n){const r=e.uint32(),i=e.pos+r;let s,o;for(;e.pos<i;){const[a]=e.tag();switch(a){case 1:s=Lo(e,t.K);break;case 2:switch(t.V.kind){case"scalar":o=Lo(e,t.V.T);break;case"enum":o=e.int32();break;case"message":o=so(e,new t.V.T,n,void 0);break}break}}if(s===void 0&&(s=Yr(t.K,$n.BIGINT)),typeof s!="string"&&typeof s!="number"&&(s=s.toString()),o===void 0)switch(t.V.kind){case"scalar":o=Yr(t.V.T,$n.BIGINT);break;case"enum":o=t.V.T.values[0].no;break;case"message":o=new t.V.T;break}return[s,o]}function Xv(t,e){const n=Lo(t,e);return typeof n=="bigint"?n.toString():n}function Lo(t,e){switch(e){case A.STRING:return t.string();case A.BOOL:return t.bool();case A.DOUBLE:return t.double();case A.FLOAT:return t.float();case A.INT32:return t.int32();case A.INT64:return t.int64();case A.UINT64:return t.uint64();case A.FIXED64:return t.fixed64();case A.BYTES:return t.bytes();case A.FIXED32:return t.fixed32();case A.SFIXED32:return t.sfixed32();case A.SFIXED64:return t.sfixed64();case A.SINT64:return t.sint64();case A.UINT32:return t.uint32();case A.SINT32:return t.sint32()}}function _f(t,e,n,r){oe(e!==void 0);const i=t.repeated;switch(t.kind){case"scalar":case"enum":let s=t.kind=="enum"?A.INT32:t.T;if(i)if(oe(Array.isArray(e)),t.packed)e0(n,s,t.no,e);else for(const o of e)Ri(n,s,t.no,o);else Ri(n,s,t.no,e);break;case"message":if(i){oe(Array.isArray(e));for(const o of e)Lf(n,r,t,o)}else Lf(n,r,t,e);break;case"map":oe(typeof e=="object"&&e!=null);for(const[o,a]of Object.entries(e))Zv(n,r,t,o,a);break}}function Zv(t,e,n,r,i){t.tag(n.no,ce.LengthDelimited),t.fork();let s=r;switch(n.K){case A.INT32:case A.FIXED32:case A.UINT32:case A.SFIXED32:case A.SINT32:s=Number.parseInt(r);break;case A.BOOL:oe(r=="true"||r=="false"),s=r=="true";break}switch(Ri(t,n.K,1,s),n.V.kind){case"scalar":Ri(t,n.V.T,2,i);break;case"enum":Ri(t,A.INT32,2,i);break;case"message":oe(i!==void 0),t.tag(2,ce.LengthDelimited).bytes(i.toBinary(e));break}t.join()}function Lf(t,e,n,r){const i=Rg(n.T,r);n.delimited?t.tag(n.no,ce.StartGroup).raw(i.toBinary(e)).tag(n.no,ce.EndGroup):t.tag(n.no,ce.LengthDelimited).bytes(i.toBinary(e))}function Ri(t,e,n,r){oe(r!==void 0);let[i,s]=_g(e);t.tag(n,i)[s](r)}function e0(t,e,n,r){if(!r.length)return;t.tag(n,ce.LengthDelimited).fork();let[,i]=_g(e);for(let s=0;s<r.length;s++)t[i](r[s]);t.join()}function _g(t){let e=ce.Varint;switch(t){case A.BYTES:case A.STRING:e=ce.LengthDelimited;break;case A.DOUBLE:case A.FIXED64:case A.SFIXED64:e=ce.Bit64;break;case A.FIXED32:case A.SFIXED32:case A.FLOAT:e=ce.Bit32;break}const n=A[t].toLowerCase();return[e,n]}function t0(){return{setEnumType:kg,initPartial(t,e){if(t===void 0)return;const n=e.getType();for(const r of n.fields.byMember()){const i=r.localName,s=e,o=t;if(o[i]!=null)switch(r.kind){case"oneof":const a=o[i].case;if(a===void 0)continue;const l=r.findField(a);let u=o[i].value;l&&l.kind=="message"&&!sr(u,l.T)?u=new l.T(u):l&&l.kind==="scalar"&&l.T===A.BYTES&&(u=mi(u)),s[i]={case:a,value:u};break;case"scalar":case"enum":let c=o[i];r.T===A.BYTES&&(c=r.repeated?c.map(mi):mi(c)),s[i]=c;break;case"map":switch(r.V.kind){case"scalar":case"enum":if(r.V.T===A.BYTES)for(const[d,v]of Object.entries(o[i]))s[i][d]=mi(v);else Object.assign(s[i],o[i]);break;case"message":const g=r.V.T;for(const d of Object.keys(o[i])){let v=o[i][d];g.fieldWrapper||(v=new g(v)),s[i][d]=v}break}break;case"message":const h=r.T;if(r.repeated)s[i]=o[i].map(g=>sr(g,h)?g:new h(g));else{const g=o[i];h.fieldWrapper?h.typeName==="google.protobuf.BytesValue"?s[i]=mi(g):s[i]=g:s[i]=sr(g,h)?g:new h(g)}break}}},equals(t,e,n){return e===n?!0:!e||!n?!1:t.fields.byMember().every(r=>{const i=e[r.localName],s=n[r.localName];if(r.repeated){if(i.length!==s.length)return!1;switch(r.kind){case"message":return i.every((o,a)=>r.T.equals(o,s[a]));case"scalar":return i.every((o,a)=>mn(r.T,o,s[a]));case"enum":return i.every((o,a)=>mn(A.INT32,o,s[a]))}throw new Error(`repeated cannot contain ${r.kind}`)}switch(r.kind){case"message":return r.T.equals(i,s);case"enum":return mn(A.INT32,i,s);case"scalar":return mn(r.T,i,s);case"oneof":if(i.case!==s.case)return!1;const o=r.findField(i.case);if(o===void 0)return!0;switch(o.kind){case"message":return o.T.equals(i.value,s.value);case"enum":return mn(A.INT32,i.value,s.value);case"scalar":return mn(o.T,i.value,s.value)}throw new Error(`oneof cannot contain ${o.kind}`);case"map":const a=Object.keys(i).concat(Object.keys(s));switch(r.V.kind){case"message":const l=r.V.T;return a.every(c=>l.equals(i[c],s[c]));case"enum":return a.every(c=>mn(A.INT32,i[c],s[c]));case"scalar":const u=r.V.T;return a.every(c=>mn(u,i[c],s[c]))}break}})},clone(t){const e=t.getType(),n=new e,r=n;for(const i of e.fields.byMember()){const s=t[i.localName];let o;if(i.repeated)o=s.map(Fs);else if(i.kind=="map"){o=r[i.localName];for(const[a,l]of Object.entries(s))o[a]=Fs(l)}else i.kind=="oneof"?o=i.findField(s.case)?{case:s.case,value:Fs(s.value)}:{case:void 0}:o=Fs(s);r[i.localName]=o}for(const i of e.runtime.bin.listUnknownFields(t))e.runtime.bin.onUnknownField(r,i.no,i.wireType,i.data);return n}}}function Fs(t){if(t===void 0)return t;if(sr(t))return t.clone();if(t instanceof Uint8Array){const e=new Uint8Array(t.byteLength);return e.set(t),e}return t}function mi(t){return t instanceof Uint8Array?t:new Uint8Array(t)}function n0(t,e,n){return{syntax:t,json:Kv(),bin:Yv(),util:Object.assign(Object.assign({},t0()),{newFieldList:e,initFields:n}),makeMessageType(r,i,s){return Ov(this,r,i,s)},makeEnum:Pv,makeEnumType:Ag,getEnumType:Cv,makeExtension(r,i,s){return Bv(this,r,i,s)}}}class r0{constructor(e,n){this._fields=e,this._normalizer=n}findJsonName(e){if(!this.jsonNames){const n={};for(const r of this.list())n[r.jsonName]=n[r.name]=r;this.jsonNames=n}return this.jsonNames[e]}find(e){if(!this.numbers){const n={};for(const r of this.list())n[r.no]=r;this.numbers=n}return this.numbers[e]}list(){return this.all||(this.all=this._normalizer(this._fields)),this.all}byNumber(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort((e,n)=>e.no-n.no)),this.numbersAsc}byMember(){if(!this.members){this.members=[];const e=this.members;let n;for(const r of this.list())r.oneof?r.oneof!==n&&(n=r.oneof,e.push(n)):e.push(r)}return this.members}}function Lg(t,e){const n=bg(t);return e?n:u0(l0(n))}function i0(t){return Lg(t,!1)}const s0=bg;function bg(t){let e=!1;const n=[];for(let r=0;r<t.length;r++){let i=t.charAt(r);switch(i){case"_":e=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":n.push(i),e=!1;break;default:e&&(e=!1,i=i.toUpperCase()),n.push(i);break}}return n.join("")}const o0=new Set(["constructor","toString","toJSON","valueOf"]),a0=new Set(["getType","clone","equals","fromBinary","fromJson","fromJsonString","toBinary","toJson","toJsonString","toObject"]),Mg=t=>`${t}$`,l0=t=>a0.has(t)?Mg(t):t,u0=t=>o0.has(t)?Mg(t):t;class c0{constructor(e){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.req=!1,this.default=void 0,this.fields=[],this.name=e,this.localName=i0(e)}addField(e){oe(e.oneof===this,`field ${e.name} not one of ${this.name}`),this.fields.push(e)}findField(e){if(!this._lookup){this._lookup=Object.create(null);for(let n=0;n<this.fields.length;n++)this._lookup[this.fields[n].localName]=this.fields[n]}return this._lookup[e]}}function f0(t,e){var n,r,i,s,o,a;const l=[];let u;for(const c of typeof t=="function"?t():t){const h=c;if(h.localName=Lg(c.name,c.oneof!==void 0),h.jsonName=(n=c.jsonName)!==null&&n!==void 0?n:s0(c.name),h.repeated=(r=c.repeated)!==null&&r!==void 0?r:!1,c.kind=="scalar"&&(h.L=(i=c.L)!==null&&i!==void 0?i:$n.BIGINT),h.delimited=(s=c.delimited)!==null&&s!==void 0?s:!1,h.req=(o=c.req)!==null&&o!==void 0?o:!1,h.opt=(a=c.opt)!==null&&a!==void 0?a:!1,c.packed===void 0&&(h.packed=c.kind=="enum"||c.kind=="scalar"&&c.T!=A.BYTES&&c.T!=A.STRING),c.oneof!==void 0){const g=typeof c.oneof=="string"?c.oneof:c.oneof.name;(!u||u.name!=g)&&(u=new c0(g)),h.oneof=u,u.addField(h)}l.push(h)}return l}const w=n0("proto3",t=>new r0(t,e=>f0(e)),t=>{for(const e of t.getType().fields.byMember()){if(e.opt)continue;const n=e.localName,r=t;if(e.repeated){r[n]=[];continue}switch(e.kind){case"oneof":r[n]={case:void 0};break;case"enum":r[n]=0;break;case"map":r[n]={};break;case"scalar":r[n]=Yr(e.T,e.L);break}}});var _e;(function(t){t[t.Unary=0]="Unary",t[t.ServerStreaming=1]="ServerStreaming",t[t.ClientStreaming=2]="ClientStreaming",t[t.BiDiStreaming=3]="BiDiStreaming"})(_e||(_e={}));var bf;(function(t){t[t.NoSideEffects=1]="NoSideEffects",t[t.Idempotent=2]="Idempotent"})(bf||(bf={}));class Pe extends Be{constructor(e){super(),this.seconds=ge.zero,this.nanos=0,w.util.initPartial(e,this)}fromJson(e,n){if(typeof e!="string")throw new Error(`cannot decode google.protobuf.Timestamp from JSON: ${w.json.debug(e)}`);const r=e.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!r)throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");const i=Date.parse(r[1]+"-"+r[2]+"-"+r[3]+"T"+r[4]+":"+r[5]+":"+r[6]+(r[8]?r[8]:"Z"));if(Number.isNaN(i))throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");if(i<Date.parse("0001-01-01T00:00:00Z")||i>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot decode message google.protobuf.Timestamp from JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");return this.seconds=ge.parse(i/1e3),this.nanos=0,r[7]&&(this.nanos=parseInt("1"+r[7]+"0".repeat(9-r[7].length))-1e9),this}toJson(e){const n=Number(this.seconds)*1e3;if(n<Date.parse("0001-01-01T00:00:00Z")||n>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot encode google.protobuf.Timestamp to JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");if(this.nanos<0)throw new Error("cannot encode google.protobuf.Timestamp to JSON: nanos must not be negative");let r="Z";if(this.nanos>0){const i=(this.nanos+1e9).toString().substring(1);i.substring(3)==="000000"?r="."+i.substring(0,3)+"Z":i.substring(6)==="000"?r="."+i.substring(0,6)+"Z":r="."+i+"Z"}return new Date(n).toISOString().replace(".000Z",r)}toDate(){return new Date(Number(this.seconds)*1e3+Math.ceil(this.nanos/1e6))}static now(){return Pe.fromDate(new Date)}static fromDate(e){const n=e.getTime();return new Pe({seconds:ge.parse(Math.floor(n/1e3)),nanos:n%1e3*1e6})}static fromBinary(e,n){return new Pe().fromBinary(e,n)}static fromJson(e,n){return new Pe().fromJson(e,n)}static fromJsonString(e,n){return new Pe().fromJsonString(e,n)}static equals(e,n){return w.util.equals(Pe,e,n)}}Pe.runtime=w;Pe.typeName="google.protobuf.Timestamp";Pe.fields=w.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);class tn extends Be{constructor(e){super(),this.seconds=ge.zero,this.nanos=0,w.util.initPartial(e,this)}fromJson(e,n){if(typeof e!="string")throw new Error(`cannot decode google.protobuf.Duration from JSON: ${w.json.debug(e)}`);const r=e.match(/^(-?[0-9]+)(?:\.([0-9]+))?s/);if(r===null)throw new Error(`cannot decode google.protobuf.Duration from JSON: ${w.json.debug(e)}`);const i=Number(r[1]);if(i>315576e6||i<-315576e6)throw new Error(`cannot decode google.protobuf.Duration from JSON: ${w.json.debug(e)}`);if(this.seconds=ge.parse(i),typeof r[2]=="string"){const s=r[2]+"0".repeat(9-r[2].length);this.nanos=parseInt(s),(i<0||Object.is(i,-0))&&(this.nanos=-this.nanos)}return this}toJson(e){if(Number(this.seconds)>315576e6||Number(this.seconds)<-315576e6)throw new Error("cannot encode google.protobuf.Duration to JSON: value out of range");let n=this.seconds.toString();if(this.nanos!==0){let r=Math.abs(this.nanos).toString();r="0".repeat(9-r.length)+r,r.substring(3)==="000000"?r=r.substring(0,3):r.substring(6)==="000"&&(r=r.substring(0,6)),n+="."+r,this.nanos<0&&Number(this.seconds)==0&&(n="-"+n)}return n+"s"}static fromBinary(e,n){return new tn().fromBinary(e,n)}static fromJson(e,n){return new tn().fromJson(e,n)}static fromJsonString(e,n){return new tn().fromJsonString(e,n)}static equals(e,n){return w.util.equals(tn,e,n)}}tn.runtime=w;tn.typeName="google.protobuf.Duration";tn.fields=w.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);class bt extends Be{constructor(e){super(),this.typeUrl="",this.value=new Uint8Array(0),w.util.initPartial(e,this)}toJson(e){var n;if(this.typeUrl==="")return{};const r=this.typeUrlToName(this.typeUrl),i=(n=e==null?void 0:e.typeRegistry)===null||n===void 0?void 0:n.findMessage(r);if(!i)throw new Error(`cannot encode message google.protobuf.Any to JSON: "${this.typeUrl}" is not in the type registry`);let o=i.fromBinary(this.value).toJson(e);return(r.startsWith("google.protobuf.")||o===null||Array.isArray(o)||typeof o!="object")&&(o={value:o}),o["@type"]=this.typeUrl,o}fromJson(e,n){var r;if(e===null||Array.isArray(e)||typeof e!="object")throw new Error(`cannot decode message google.protobuf.Any from JSON: expected object but got ${e===null?"null":Array.isArray(e)?"array":typeof e}`);if(Object.keys(e).length==0)return this;const i=e["@type"];if(typeof i!="string"||i=="")throw new Error('cannot decode message google.protobuf.Any from JSON: "@type" is empty');const s=this.typeUrlToName(i),o=(r=n==null?void 0:n.typeRegistry)===null||r===void 0?void 0:r.findMessage(s);if(!o)throw new Error(`cannot decode message google.protobuf.Any from JSON: ${i} is not in the type registry`);let a;if(s.startsWith("google.protobuf.")&&Object.prototype.hasOwnProperty.call(e,"value"))a=o.fromJson(e.value,n);else{const l=Object.assign({},e);delete l["@type"],a=o.fromJson(l,n)}return this.packFrom(a),this}packFrom(e){this.value=e.toBinary(),this.typeUrl=this.typeNameToUrl(e.getType().typeName)}unpackTo(e){return this.is(e.getType())?(e.fromBinary(this.value),!0):!1}unpack(e){if(this.typeUrl==="")return;const n=e.findMessage(this.typeUrlToName(this.typeUrl));if(n)return n.fromBinary(this.value)}is(e){if(this.typeUrl==="")return!1;const n=this.typeUrlToName(this.typeUrl);let r="";return typeof e=="string"?r=e:r=e.typeName,n===r}typeNameToUrl(e){return`type.googleapis.com/${e}`}typeUrlToName(e){if(!e.length)throw new Error(`invalid type url: ${e}`);const n=e.lastIndexOf("/"),r=n>=0?e.substring(n+1):e;if(!r.length)throw new Error(`invalid type url: ${e}`);return r}static pack(e){const n=new bt;return n.packFrom(e),n}static fromBinary(e,n){return new bt().fromBinary(e,n)}static fromJson(e,n){return new bt().fromJson(e,n)}static fromJsonString(e,n){return new bt().fromJsonString(e,n)}static equals(e,n){return w.util.equals(bt,e,n)}}bt.runtime=w;bt.typeName="google.protobuf.Any";bt.fields=w.util.newFieldList(()=>[{no:1,name:"type_url",kind:"scalar",T:9},{no:2,name:"value",kind:"scalar",T:12}]);class Mt extends Be{constructor(e){super(),this.value=0,w.util.initPartial(e,this)}toJson(e){return w.json.writeScalar(A.DOUBLE,this.value,!0)}fromJson(e,n){try{this.value=w.json.readScalar(A.DOUBLE,e)}catch(r){let i='cannot decode message google.protobuf.DoubleValue from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,n){return new Mt().fromBinary(e,n)}static fromJson(e,n){return new Mt().fromJson(e,n)}static fromJsonString(e,n){return new Mt().fromJsonString(e,n)}static equals(e,n){return w.util.equals(Mt,e,n)}}Mt.runtime=w;Mt.typeName="google.protobuf.DoubleValue";Mt.fields=w.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:1}]);Mt.fieldWrapper={wrapField(t){return new Mt({value:t})},unwrapField(t){return t.value}};class Ft extends Be{constructor(e){super(),this.value=0,w.util.initPartial(e,this)}toJson(e){return w.json.writeScalar(A.FLOAT,this.value,!0)}fromJson(e,n){try{this.value=w.json.readScalar(A.FLOAT,e)}catch(r){let i='cannot decode message google.protobuf.FloatValue from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,n){return new Ft().fromBinary(e,n)}static fromJson(e,n){return new Ft().fromJson(e,n)}static fromJsonString(e,n){return new Ft().fromJsonString(e,n)}static equals(e,n){return w.util.equals(Ft,e,n)}}Ft.runtime=w;Ft.typeName="google.protobuf.FloatValue";Ft.fields=w.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:2}]);Ft.fieldWrapper={wrapField(t){return new Ft({value:t})},unwrapField(t){return t.value}};class Bt extends Be{constructor(e){super(),this.value=ge.zero,w.util.initPartial(e,this)}toJson(e){return w.json.writeScalar(A.INT64,this.value,!0)}fromJson(e,n){try{this.value=w.json.readScalar(A.INT64,e)}catch(r){let i='cannot decode message google.protobuf.Int64Value from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,n){return new Bt().fromBinary(e,n)}static fromJson(e,n){return new Bt().fromJson(e,n)}static fromJsonString(e,n){return new Bt().fromJsonString(e,n)}static equals(e,n){return w.util.equals(Bt,e,n)}}Bt.runtime=w;Bt.typeName="google.protobuf.Int64Value";Bt.fields=w.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:3}]);Bt.fieldWrapper={wrapField(t){return new Bt({value:t})},unwrapField(t){return t.value}};class $t extends Be{constructor(e){super(),this.value=ge.zero,w.util.initPartial(e,this)}toJson(e){return w.json.writeScalar(A.UINT64,this.value,!0)}fromJson(e,n){try{this.value=w.json.readScalar(A.UINT64,e)}catch(r){let i='cannot decode message google.protobuf.UInt64Value from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,n){return new $t().fromBinary(e,n)}static fromJson(e,n){return new $t().fromJson(e,n)}static fromJsonString(e,n){return new $t().fromJsonString(e,n)}static equals(e,n){return w.util.equals($t,e,n)}}$t.runtime=w;$t.typeName="google.protobuf.UInt64Value";$t.fields=w.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:4}]);$t.fieldWrapper={wrapField(t){return new $t({value:t})},unwrapField(t){return t.value}};class zt extends Be{constructor(e){super(),this.value=0,w.util.initPartial(e,this)}toJson(e){return w.json.writeScalar(A.INT32,this.value,!0)}fromJson(e,n){try{this.value=w.json.readScalar(A.INT32,e)}catch(r){let i='cannot decode message google.protobuf.Int32Value from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,n){return new zt().fromBinary(e,n)}static fromJson(e,n){return new zt().fromJson(e,n)}static fromJsonString(e,n){return new zt().fromJsonString(e,n)}static equals(e,n){return w.util.equals(zt,e,n)}}zt.runtime=w;zt.typeName="google.protobuf.Int32Value";zt.fields=w.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:5}]);zt.fieldWrapper={wrapField(t){return new zt({value:t})},unwrapField(t){return t.value}};class Ut extends Be{constructor(e){super(),this.value=0,w.util.initPartial(e,this)}toJson(e){return w.json.writeScalar(A.UINT32,this.value,!0)}fromJson(e,n){try{this.value=w.json.readScalar(A.UINT32,e)}catch(r){let i='cannot decode message google.protobuf.UInt32Value from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,n){return new Ut().fromBinary(e,n)}static fromJson(e,n){return new Ut().fromJson(e,n)}static fromJsonString(e,n){return new Ut().fromJsonString(e,n)}static equals(e,n){return w.util.equals(Ut,e,n)}}Ut.runtime=w;Ut.typeName="google.protobuf.UInt32Value";Ut.fields=w.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:13}]);Ut.fieldWrapper={wrapField(t){return new Ut({value:t})},unwrapField(t){return t.value}};class jt extends Be{constructor(e){super(),this.value=!1,w.util.initPartial(e,this)}toJson(e){return w.json.writeScalar(A.BOOL,this.value,!0)}fromJson(e,n){try{this.value=w.json.readScalar(A.BOOL,e)}catch(r){let i='cannot decode message google.protobuf.BoolValue from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,n){return new jt().fromBinary(e,n)}static fromJson(e,n){return new jt().fromJson(e,n)}static fromJsonString(e,n){return new jt().fromJsonString(e,n)}static equals(e,n){return w.util.equals(jt,e,n)}}jt.runtime=w;jt.typeName="google.protobuf.BoolValue";jt.fields=w.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:8}]);jt.fieldWrapper={wrapField(t){return new jt({value:t})},unwrapField(t){return t.value}};class Xe extends Be{constructor(e){super(),this.value="",w.util.initPartial(e,this)}toJson(e){return w.json.writeScalar(A.STRING,this.value,!0)}fromJson(e,n){try{this.value=w.json.readScalar(A.STRING,e)}catch(r){let i='cannot decode message google.protobuf.StringValue from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,n){return new Xe().fromBinary(e,n)}static fromJson(e,n){return new Xe().fromJson(e,n)}static fromJsonString(e,n){return new Xe().fromJsonString(e,n)}static equals(e,n){return w.util.equals(Xe,e,n)}}Xe.runtime=w;Xe.typeName="google.protobuf.StringValue";Xe.fields=w.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:9}]);Xe.fieldWrapper={wrapField(t){return new Xe({value:t})},unwrapField(t){return t.value}};class Vt extends Be{constructor(e){super(),this.value=new Uint8Array(0),w.util.initPartial(e,this)}toJson(e){return w.json.writeScalar(A.BYTES,this.value,!0)}fromJson(e,n){try{this.value=w.json.readScalar(A.BYTES,e)}catch(r){let i='cannot decode message google.protobuf.BytesValue from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,n){return new Vt().fromBinary(e,n)}static fromJson(e,n){return new Vt().fromJson(e,n)}static fromJsonString(e,n){return new Vt().fromJsonString(e,n)}static equals(e,n){return w.util.equals(Vt,e,n)}}Vt.runtime=w;Vt.typeName="google.protobuf.BytesValue";Vt.fields=w.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:12}]);Vt.fieldWrapper={wrapField(t){return new Vt({value:t})},unwrapField(t){return t.value}};function d0(t,e,n){try{const r=Wu.dec(t);return e?e.fromBinary(r,n):r}catch(r){throw he.from(r,q.DataLoss)}}function h0(t,e){const n={};for(const[r,i]of Object.entries(t.methods)){const s=e(Object.assign(Object.assign({},i),{localName:r,service:t}));s!=null&&(n[r]=s)}return n}function Mf(t){let e,n=new Uint8Array(0);function r(i){const s=new Uint8Array(n.length+i.length);s.set(n),s.set(i,n.length),n=s}return new ReadableStream({start(){e=t.getReader()},async pull(i){let s;for(;;){if(s===void 0&&n.byteLength>=5){let l=0;for(let u=1;u<5;u++)l=(l<<8)+n[u];s={flags:n[0],length:l}}if(s!==void 0&&n.byteLength>=s.length+5)break;const a=await e.read();if(a.done)break;r(a.value)}if(s===void 0){if(n.byteLength==0){i.close();return}i.error(new he("premature end of stream",q.DataLoss));return}const o=n.subarray(5,5+s.length);n=n.subarray(5+s.length),i.enqueue({flags:s.flags,data:o})}})}function Ff(t,e){const n=new Uint8Array(e.length+5);n.set(e,5);const r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.setUint8(0,t),r.setUint32(1,e.length),n}var g0=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof __values=="function"?__values(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,l){o=t[s](o),i(a,l,o.done,o.value)})}}function i(s,o,a,l){Promise.resolve(l).then(function(u){s({value:u,done:a})},o)}},Zi=function(t){return this instanceof Zi?(this.v=t,this):new Zi(t)},p0=function(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i={},a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(d){return function(v){return Promise.resolve(v).then(d,h)}}function a(d,v){r[d]&&(i[d]=function(I){return new Promise(function(O,p){s.push([d,I,O,p])>1||l(d,I)})},v&&(i[d]=v(i[d])))}function l(d,v){try{u(r[d](v))}catch(I){g(s[0][3],I)}}function u(d){d.value instanceof Zi?Promise.resolve(d.value.v).then(c,h):g(s[0][2],d)}function c(d){l("next",d)}function h(d){l("throw",d)}function g(d,v){d(v),s.shift(),s.length&&l(s[0][0],s[0][1])}},m0=function(t){var e,n;return e={},r("next"),r("throw",function(i){throw i}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(i,s){e[i]=t[i]?function(o){return(n=!n)?{value:Zi(t[i](o)),done:!1}:s?s(o):o}:s}};function y0(t){return p0(this,arguments,function*(){yield Zi(yield*m0(g0(t)))})}var Fg=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof __values=="function"?__values(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,l){o=t[s](o),i(a,l,o.done,o.value)})}}function i(s,o,a,l){Promise.resolve(l).then(function(u){s({value:u,done:a})},o)}},Qr=function(t){return this instanceof Qr?(this.v=t,this):new Qr(t)},v0=function(t){var e,n;return e={},r("next"),r("throw",function(i){throw i}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(i,s){e[i]=t[i]?function(o){return(n=!n)?{value:Qr(t[i](o)),done:!1}:s?s(o):o}:s}},w0=function(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i={},a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(d){return function(v){return Promise.resolve(v).then(d,h)}}function a(d,v){r[d]&&(i[d]=function(I){return new Promise(function(O,p){s.push([d,I,O,p])>1||l(d,I)})},v&&(i[d]=v(i[d])))}function l(d,v){try{u(r[d](v))}catch(I){g(s[0][3],I)}}function u(d){d.value instanceof Qr?Promise.resolve(d.value.v).then(c,h):g(s[0][2],d)}function c(d){l("next",d)}function h(d){l("throw",d)}function g(d,v){d(v),s.shift(),s.length&&l(s[0][0],s[0][1])}};function S0(t,e){return h0(t,n=>{switch(n.kind){case _e.Unary:return T0(e,t,n);case _e.ServerStreaming:return k0(e,t,n);case _e.ClientStreaming:return A0(e,t,n);case _e.BiDiStreaming:return I0(e,t,n);default:return null}})}function T0(t,e,n){return async function(r,i){var s,o;const a=await t.unary(e,n,i==null?void 0:i.signal,i==null?void 0:i.timeoutMs,i==null?void 0:i.headers,r,i==null?void 0:i.contextValues);return(s=i==null?void 0:i.onHeader)===null||s===void 0||s.call(i,a.header),(o=i==null?void 0:i.onTrailer)===null||o===void 0||o.call(i,a.trailer),a.message}}function k0(t,e,n){return function(r,i){return Bg(t.stream(e,n,i==null?void 0:i.signal,i==null?void 0:i.timeoutMs,i==null?void 0:i.headers,y0([r]),i==null?void 0:i.contextValues),i)}}function A0(t,e,n){return async function(r,i){var s,o,a,l,u,c;const h=await t.stream(e,n,i==null?void 0:i.signal,i==null?void 0:i.timeoutMs,i==null?void 0:i.headers,r,i==null?void 0:i.contextValues);(u=i==null?void 0:i.onHeader)===null||u===void 0||u.call(i,h.header);let g;try{for(var d=!0,v=Fg(h.message),I;I=await v.next(),s=I.done,!s;d=!0)l=I.value,d=!1,g=l}catch(O){o={error:O}}finally{try{!d&&!s&&(a=v.return)&&await a.call(v)}finally{if(o)throw o.error}}if(!g)throw new he("protocol error: missing response message",q.Internal);return(c=i==null?void 0:i.onTrailer)===null||c===void 0||c.call(i,h.trailer),g}}function I0(t,e,n){return function(r,i){return Bg(t.stream(e,n,i==null?void 0:i.signal,i==null?void 0:i.timeoutMs,i==null?void 0:i.headers,r,i==null?void 0:i.contextValues),i)}}function Bg(t,e){const n=function(){var r,i;return w0(this,arguments,function*(){const s=yield Qr(t);(r=e==null?void 0:e.onHeader)===null||r===void 0||r.call(e,s.header),yield Qr(yield*v0(Fg(s.message))),(i=e==null?void 0:e.onTrailer)===null||i===void 0||i.call(e,s.trailer)})}()[Symbol.asyncIterator]();return{[Symbol.asyncIterator]:()=>({next:()=>n.next()})}}function E0(...t){const e=new AbortController,n=t.filter(i=>i!==void 0).concat(e.signal);for(const i of n){if(i.aborted){r.apply(i);break}i.addEventListener("abort",r)}function r(){e.signal.aborted||e.abort($g(this));for(const i of n)i.removeEventListener("abort",r)}return e}function N0(t){const e=new AbortController,n=()=>{e.abort(new he("the operation timed out",q.DeadlineExceeded))};let r;return t!==void 0&&(t<=0?n():r=setTimeout(n,t)),{signal:e.signal,cleanup:()=>clearTimeout(r)}}function $g(t){if(!t.aborted)return;if(t.reason!==void 0)return t.reason;const e=new Error("This operation was aborted");return e.name="AbortError",e}function Bf(){return{get(t){return t.id in this?this[t.id]:t.defaultValue},set(t,e){return this[t.id]=e,this},delete(t){return delete this[t.id],this}}}const Va=128;function $f(t){const e=new Headers,n=new TextDecoder().decode(t).split(`\r
`);for(const r of n){if(r==="")continue;const i=r.indexOf(":");if(i>0){const s=r.substring(0,i).trim(),o=r.substring(i+1).trim();e.append(s,o)}}return e}const x0="Content-Type",C0="Grpc-Timeout",zg="Grpc-Status",Ug="Grpc-Message",P0="Grpc-Status-Details-Bin",O0="X-User-Agent",D0="X-Grpc-Web",R0="application/grpc-web+proto",_0="application/grpc-web+json";class nn extends Be{constructor(e){super(),this.code=0,this.message="",this.details=[],w.util.initPartial(e,this)}static fromBinary(e,n){return new nn().fromBinary(e,n)}static fromJson(e,n){return new nn().fromJson(e,n)}static fromJsonString(e,n){return new nn().fromJsonString(e,n)}static equals(e,n){return w.util.equals(nn,e,n)}}nn.runtime=w;nn.typeName="google.rpc.Status";nn.fields=w.util.newFieldList(()=>[{no:1,name:"code",kind:"scalar",T:5},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"details",kind:"message",T:bt,repeated:!0}]);const L0="0";function jg(t){var e;const n=t.get(P0);if(n!=null){const i=d0(n,nn);if(i.code==0)return;const s=new he(i.message,i.code,t);return s.details=i.details.map(o=>({type:o.typeUrl.substring(o.typeUrl.lastIndexOf("/")+1),value:o.value})),s}const r=t.get(zg);if(r!=null){if(r===L0)return;const i=parseInt(r,10);return i in q?new he(decodeURIComponent((e=t.get(Ug))!==null&&e!==void 0?e:""),i,t):new he(`invalid grpc-status: ${r}`,q.Internal,t)}}function zf(t,e,n){const r=typeof e=="string"?e:e.typeName,i=typeof n=="string"?n:n.name;return t.toString().replace(/\/?$/,`/${r}/${i}`)}function Vg(t,e){return e instanceof t?e:new t(e)}function b0(t,e){function n(r){return r.done===!0?r:{done:r.done,value:Vg(t,r.value)}}return{[Symbol.asyncIterator](){const r=e[Symbol.asyncIterator](),i={next:()=>r.next().then(n)};return r.throw!==void 0&&(i.throw=s=>r.throw(s).then(n)),r.return!==void 0&&(i.return=s=>r.return(s).then(n)),i}}}function Jg(t,e){var n;return(n=e==null?void 0:e.concat().reverse().reduce((r,i)=>i(r),t))!==null&&n!==void 0?n:t}function M0(t){var e;const n=Object.assign({},t);return(e=n.ignoreUnknownFields)!==null&&e!==void 0||(n.ignoreUnknownFields=!0),n}function Uf(t,e,n,r){const i=e?jf(t.I,r):Vf(t.I,n);return{parse:(e?jf(t.O,r):Vf(t.O,n)).parse,serialize:i.serialize}}function jf(t,e){return{parse(n){try{return t.fromBinary(n,e)}catch(r){const i=r instanceof Error?r.message:String(r);throw new he(`parse binary: ${i}`,q.InvalidArgument)}},serialize(n){try{return n.toBinary(e)}catch(r){const i=r instanceof Error?r.message:String(r);throw new he(`serialize binary: ${i}`,q.Internal)}}}}function Vf(t,e){var n,r;const i=(n=e==null?void 0:e.textEncoder)!==null&&n!==void 0?n:new TextEncoder,s=(r=e==null?void 0:e.textDecoder)!==null&&r!==void 0?r:new TextDecoder,o=M0(e);return{parse(a){try{const l=s.decode(a);return t.fromJsonString(l,o)}catch(l){throw he.from(l,q.InvalidArgument)}},serialize(a){try{const l=a.toJsonString(o);return i.encode(l)}catch(l){throw he.from(l,q.Internal)}}}}function F0(t){const e=Jg(t.next,t.interceptors),[n,r,i]=Kg(t),s=Object.assign(Object.assign({},t.req),{message:Vg(t.req.method.I,t.req.message),signal:n});return e(s).then(o=>(i(),o),r)}function B0(t){const e=Jg(t.next,t.interceptors),[n,r,i]=Kg(t),s=Object.assign(Object.assign({},t.req),{message:b0(t.req.method.I,t.req.message),signal:n});let o=!1;return n.addEventListener("abort",function(){var a,l;const u=t.req.message[Symbol.asyncIterator]();o||(a=u.throw)===null||a===void 0||a.call(u,this.reason).catch(()=>{}),(l=u.return)===null||l===void 0||l.call(u).catch(()=>{})}),e(s).then(a=>Object.assign(Object.assign({},a),{message:{[Symbol.asyncIterator](){const l=a.message[Symbol.asyncIterator]();return{next(){return l.next().then(u=>(u.done==!0&&(o=!0,i()),u),r)}}}}}),r)}function Kg(t){const{signal:e,cleanup:n}=N0(t.timeoutMs),r=E0(t.signal,e);return[r.signal,function(s){const o=he.from(e.aborted?$g(e):s);return r.abort(o),n(),Promise.reject(o)},function(){n(),r.abort()}]}function $0(){try{new Headers}catch{throw new Error("connect-web requires the fetch API. Are you running on an old version of Node.js? Node.js is not supported in Connect for Web - please stay tuned for Connect for Node.")}}function Jf(t,e){const n=jg(t);if(n)throw e.forEach((r,i)=>{n.metadata.append(i,r)}),n}function Kf(t,e,n,r){const i=new Headers(n??{});return i.set(x0,t?R0:_0),i.set(D0,"1"),i.set(O0,"connect-es/1.4.0"),e!==void 0&&i.set(C0,`${e}m`),i}function z0(t){switch(t){case 400:return q.Internal;case 401:return q.Unauthenticated;case 403:return q.PermissionDenied;case 404:return q.Unimplemented;case 429:return q.Unavailable;case 502:return q.Unavailable;case 503:return q.Unavailable;case 504:return q.Unavailable;default:return q.Unknown}}function Wf(t,e){var n;if(t>=200&&t<300){const r=jg(e);if(r)throw r;return{foundStatus:e.has(zg)}}throw new he(decodeURIComponent((n=e.get(Ug))!==null&&n!==void 0?n:`HTTP ${t}`),z0(t),e)}var tr=function(t){return this instanceof tr?(this.v=t,this):new tr(t)},U0=function(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i={},a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(d){return function(v){return Promise.resolve(v).then(d,h)}}function a(d,v){r[d]&&(i[d]=function(I){return new Promise(function(O,p){s.push([d,I,O,p])>1||l(d,I)})},v&&(i[d]=v(i[d])))}function l(d,v){try{u(r[d](v))}catch(I){g(s[0][3],I)}}function u(d){d.value instanceof tr?Promise.resolve(d.value.v).then(c,h):g(s[0][2],d)}function c(d){l("next",d)}function h(d){l("throw",d)}function g(d,v){d(v),s.shift(),s.length&&l(s[0][0],s[0][1])}};function j0(t){var e;$0();const n=(e=t.useBinaryFormat)!==null&&e!==void 0?e:!0;return{async unary(r,i,s,o,a,l,u){var c;const{serialize:h,parse:g}=Uf(i,n,t.jsonOptions,t.binaryOptions);return o=o===void 0?t.defaultTimeoutMs:o<=0?void 0:o,await F0({interceptors:t.interceptors,signal:s,timeoutMs:o,req:{stream:!1,service:r,method:i,url:zf(t.baseUrl,r,i),init:{method:"POST",credentials:(c=t.credentials)!==null&&c!==void 0?c:"same-origin",redirect:"error",mode:"cors"},header:Kf(n,o,a),contextValues:u??Bf(),message:l},next:async d=>{var v;const O=await((v=t.fetch)!==null&&v!==void 0?v:globalThis.fetch)(d.url,Object.assign(Object.assign({},d.init),{headers:d.header,signal:d.signal,body:Ff(0,h(d.message))}));if(Wf(O.status,O.headers),!O.body)throw"missing response body";const p=Mf(O.body).getReader();let f,y;for(;;){const k=await p.read();if(k.done)break;const{flags:N,data:C}=k.value;if(N===Va){if(f!==void 0)throw"extra trailer";f=$f(C);continue}if(y!==void 0)throw"extra message";y=g(C)}if(f===void 0)throw"missing trailer";if(Jf(f,O.headers),y===void 0)throw"missing message";return{stream:!1,service:r,method:i,header:O.headers,message:y,trailer:f}}})},async stream(r,i,s,o,a,l,u){var c;const{serialize:h,parse:g}=Uf(i,n,t.jsonOptions,t.binaryOptions);function d(I,O,p,f){return U0(this,arguments,function*(){const k=Mf(I).getReader();if(O){if(!(yield tr(k.read())).done)throw"extra data for trailers-only";return yield tr(void 0)}let N=!1;for(;;){const C=yield tr(k.read());if(C.done)break;const{flags:P,data:_}=C.value;if((P&Va)===Va){if(N)throw"extra trailer";N=!0;const W=$f(_);Jf(W,f),W.forEach((U,Ge)=>p.set(Ge,U));continue}if(N)throw"extra message";yield yield tr(g(_))}if(!N)throw"missing trailer"})}async function v(I){if(i.kind!=_e.ServerStreaming)throw"The fetch API does not support streaming request bodies";const O=await I[Symbol.asyncIterator]().next();if(O.done==!0)throw"missing request message";return Ff(0,h(O.value))}return o=o===void 0?t.defaultTimeoutMs:o<=0?void 0:o,B0({interceptors:t.interceptors,signal:s,timeoutMs:o,req:{stream:!0,service:r,method:i,url:zf(t.baseUrl,r,i),init:{method:"POST",credentials:(c=t.credentials)!==null&&c!==void 0?c:"same-origin",redirect:"error",mode:"cors"},header:Kf(n,o,a),contextValues:u??Bf(),message:l},next:async I=>{var O;const f=await((O=t.fetch)!==null&&O!==void 0?O:globalThis.fetch)(I.url,Object.assign(Object.assign({},I.init),{headers:I.header,signal:I.signal,body:await v(I.message)})),{foundStatus:y}=Wf(f.status,f.headers);if(!f.body)throw"missing response body";const k=new Headers;return Object.assign(Object.assign({},I),{header:f.headers,trailer:k,message:d(f.body,y,k,f.headers)})}})}}}const z=w.makeEnum("yorkie.v1.ValueType",[{no:0,name:"VALUE_TYPE_NULL",localName:"NULL"},{no:1,name:"VALUE_TYPE_BOOLEAN",localName:"BOOLEAN"},{no:2,name:"VALUE_TYPE_INTEGER",localName:"INTEGER"},{no:3,name:"VALUE_TYPE_LONG",localName:"LONG"},{no:4,name:"VALUE_TYPE_DOUBLE",localName:"DOUBLE"},{no:5,name:"VALUE_TYPE_STRING",localName:"STRING"},{no:6,name:"VALUE_TYPE_BYTES",localName:"BYTES"},{no:7,name:"VALUE_TYPE_DATE",localName:"DATE"},{no:8,name:"VALUE_TYPE_JSON_OBJECT",localName:"JSON_OBJECT"},{no:9,name:"VALUE_TYPE_JSON_ARRAY",localName:"JSON_ARRAY"},{no:10,name:"VALUE_TYPE_TEXT",localName:"TEXT"},{no:11,name:"VALUE_TYPE_INTEGER_CNT",localName:"INTEGER_CNT"},{no:12,name:"VALUE_TYPE_LONG_CNT",localName:"LONG_CNT"},{no:13,name:"VALUE_TYPE_TREE",localName:"TREE"}]),bo=w.makeEnum("yorkie.v1.DocEventType",[{no:0,name:"DOC_EVENT_TYPE_DOCUMENT_CHANGED",localName:"DOCUMENT_CHANGED"},{no:1,name:"DOC_EVENT_TYPE_DOCUMENT_WATCHED",localName:"DOCUMENT_WATCHED"},{no:2,name:"DOC_EVENT_TYPE_DOCUMENT_UNWATCHED",localName:"DOCUMENT_UNWATCHED"},{no:3,name:"DOC_EVENT_TYPE_DOCUMENT_BROADCAST",localName:"DOCUMENT_BROADCAST"}]),V0=w.makeMessageType("yorkie.v1.Snapshot",()=>[{no:1,name:"root",kind:"message",T:mt},{no:2,name:"presences",kind:"map",K:9,V:{kind:"message",T:Yu}}]),gn=w.makeMessageType("yorkie.v1.ChangePack",()=>[{no:1,name:"document_key",kind:"scalar",T:9},{no:2,name:"checkpoint",kind:"message",T:fp},{no:3,name:"snapshot",kind:"scalar",T:12},{no:4,name:"changes",kind:"message",T:Wg,repeated:!0},{no:5,name:"min_synced_ticket",kind:"message",T:M},{no:6,name:"is_removed",kind:"scalar",T:8}]),Wg=w.makeMessageType("yorkie.v1.Change",()=>[{no:1,name:"id",kind:"message",T:ra},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"operations",kind:"message",T:qu,repeated:!0},{no:4,name:"presence_change",kind:"message",T:Kl}]),ra=w.makeMessageType("yorkie.v1.ChangeID",()=>[{no:1,name:"client_seq",kind:"scalar",T:13},{no:2,name:"server_seq",kind:"scalar",T:3,L:1},{no:3,name:"lamport",kind:"scalar",T:3,L:1},{no:4,name:"actor_id",kind:"scalar",T:12}]),qu=w.makeMessageType("yorkie.v1.Operation",()=>[{no:1,name:"set",kind:"message",T:qg,oneof:"body"},{no:2,name:"add",kind:"message",T:Hg,oneof:"body"},{no:3,name:"move",kind:"message",T:Gg,oneof:"body"},{no:4,name:"remove",kind:"message",T:Yg,oneof:"body"},{no:5,name:"edit",kind:"message",T:Qg,oneof:"body"},{no:6,name:"select",kind:"message",T:J0,oneof:"body"},{no:7,name:"style",kind:"message",T:Xg,oneof:"body"},{no:8,name:"increase",kind:"message",T:Zg,oneof:"body"},{no:9,name:"tree_edit",kind:"message",T:ep,oneof:"body"},{no:10,name:"tree_style",kind:"message",T:tp,oneof:"body"}]),qg=w.makeMessageType("yorkie.v1.Operation.Set",()=>[{no:1,name:"parent_created_at",kind:"message",T:M},{no:2,name:"key",kind:"scalar",T:9},{no:3,name:"value",kind:"message",T:Qt},{no:4,name:"executed_at",kind:"message",T:M}],{localName:"Operation_Set"}),Hg=w.makeMessageType("yorkie.v1.Operation.Add",()=>[{no:1,name:"parent_created_at",kind:"message",T:M},{no:2,name:"prev_created_at",kind:"message",T:M},{no:3,name:"value",kind:"message",T:Qt},{no:4,name:"executed_at",kind:"message",T:M}],{localName:"Operation_Add"}),Gg=w.makeMessageType("yorkie.v1.Operation.Move",()=>[{no:1,name:"parent_created_at",kind:"message",T:M},{no:2,name:"prev_created_at",kind:"message",T:M},{no:3,name:"created_at",kind:"message",T:M},{no:4,name:"executed_at",kind:"message",T:M}],{localName:"Operation_Move"}),Yg=w.makeMessageType("yorkie.v1.Operation.Remove",()=>[{no:1,name:"parent_created_at",kind:"message",T:M},{no:2,name:"created_at",kind:"message",T:M},{no:3,name:"executed_at",kind:"message",T:M}],{localName:"Operation_Remove"}),Qg=w.makeMessageType("yorkie.v1.Operation.Edit",()=>[{no:1,name:"parent_created_at",kind:"message",T:M},{no:2,name:"from",kind:"message",T:fr},{no:3,name:"to",kind:"message",T:fr},{no:4,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:M}},{no:5,name:"content",kind:"scalar",T:9},{no:6,name:"executed_at",kind:"message",T:M},{no:7,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}}],{localName:"Operation_Edit"}),J0=w.makeMessageType("yorkie.v1.Operation.Select",()=>[{no:1,name:"parent_created_at",kind:"message",T:M},{no:2,name:"from",kind:"message",T:fr},{no:3,name:"to",kind:"message",T:fr},{no:4,name:"executed_at",kind:"message",T:M}],{localName:"Operation_Select"}),Xg=w.makeMessageType("yorkie.v1.Operation.Style",()=>[{no:1,name:"parent_created_at",kind:"message",T:M},{no:2,name:"from",kind:"message",T:fr},{no:3,name:"to",kind:"message",T:fr},{no:4,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:5,name:"executed_at",kind:"message",T:M},{no:6,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:M}}],{localName:"Operation_Style"}),Zg=w.makeMessageType("yorkie.v1.Operation.Increase",()=>[{no:1,name:"parent_created_at",kind:"message",T:M},{no:2,name:"value",kind:"message",T:Qt},{no:3,name:"executed_at",kind:"message",T:M}],{localName:"Operation_Increase"}),ep=w.makeMessageType("yorkie.v1.Operation.TreeEdit",()=>[{no:1,name:"parent_created_at",kind:"message",T:M},{no:2,name:"from",kind:"message",T:es},{no:3,name:"to",kind:"message",T:es},{no:4,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:M}},{no:5,name:"contents",kind:"message",T:cp,repeated:!0},{no:7,name:"split_level",kind:"scalar",T:5},{no:6,name:"executed_at",kind:"message",T:M}],{localName:"Operation_TreeEdit"}),tp=w.makeMessageType("yorkie.v1.Operation.TreeStyle",()=>[{no:1,name:"parent_created_at",kind:"message",T:M},{no:2,name:"from",kind:"message",T:es},{no:3,name:"to",kind:"message",T:es},{no:4,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:5,name:"executed_at",kind:"message",T:M},{no:6,name:"attributes_to_remove",kind:"scalar",T:9,repeated:!0},{no:7,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:M}}],{localName:"Operation_TreeStyle"}),Qt=w.makeMessageType("yorkie.v1.JSONElementSimple",()=>[{no:1,name:"created_at",kind:"message",T:M},{no:2,name:"moved_at",kind:"message",T:M},{no:3,name:"removed_at",kind:"message",T:M},{no:4,name:"type",kind:"enum",T:w.getEnumType(z)},{no:5,name:"value",kind:"scalar",T:12}]),mt=w.makeMessageType("yorkie.v1.JSONElement",()=>[{no:1,name:"json_object",kind:"message",T:np,oneof:"body"},{no:2,name:"json_array",kind:"message",T:rp,oneof:"body"},{no:3,name:"primitive",kind:"message",T:ip,oneof:"body"},{no:5,name:"text",kind:"message",T:sp,oneof:"body"},{no:6,name:"counter",kind:"message",T:op,oneof:"body"},{no:7,name:"tree",kind:"message",T:ap,oneof:"body"}]),np=w.makeMessageType("yorkie.v1.JSONElement.JSONObject",()=>[{no:1,name:"nodes",kind:"message",T:lp,repeated:!0},{no:2,name:"created_at",kind:"message",T:M},{no:3,name:"moved_at",kind:"message",T:M},{no:4,name:"removed_at",kind:"message",T:M}],{localName:"JSONElement_JSONObject"}),rp=w.makeMessageType("yorkie.v1.JSONElement.JSONArray",()=>[{no:1,name:"nodes",kind:"message",T:Hu,repeated:!0},{no:2,name:"created_at",kind:"message",T:M},{no:3,name:"moved_at",kind:"message",T:M},{no:4,name:"removed_at",kind:"message",T:M}],{localName:"JSONElement_JSONArray"}),ip=w.makeMessageType("yorkie.v1.JSONElement.Primitive",()=>[{no:1,name:"type",kind:"enum",T:w.getEnumType(z)},{no:2,name:"value",kind:"scalar",T:12},{no:3,name:"created_at",kind:"message",T:M},{no:4,name:"moved_at",kind:"message",T:M},{no:5,name:"removed_at",kind:"message",T:M}],{localName:"JSONElement_Primitive"}),sp=w.makeMessageType("yorkie.v1.JSONElement.Text",()=>[{no:1,name:"nodes",kind:"message",T:up,repeated:!0},{no:2,name:"created_at",kind:"message",T:M},{no:3,name:"moved_at",kind:"message",T:M},{no:4,name:"removed_at",kind:"message",T:M}],{localName:"JSONElement_Text"}),op=w.makeMessageType("yorkie.v1.JSONElement.Counter",()=>[{no:1,name:"type",kind:"enum",T:w.getEnumType(z)},{no:2,name:"value",kind:"scalar",T:12},{no:3,name:"created_at",kind:"message",T:M},{no:4,name:"moved_at",kind:"message",T:M},{no:5,name:"removed_at",kind:"message",T:M}],{localName:"JSONElement_Counter"}),ap=w.makeMessageType("yorkie.v1.JSONElement.Tree",()=>[{no:1,name:"nodes",kind:"message",T:Gu,repeated:!0},{no:2,name:"created_at",kind:"message",T:M},{no:3,name:"moved_at",kind:"message",T:M},{no:4,name:"removed_at",kind:"message",T:M}],{localName:"JSONElement_Tree"}),lp=w.makeMessageType("yorkie.v1.RHTNode",()=>[{no:1,name:"key",kind:"scalar",T:9},{no:2,name:"element",kind:"message",T:mt}]),Hu=w.makeMessageType("yorkie.v1.RGANode",()=>[{no:1,name:"next",kind:"message",T:Hu},{no:2,name:"element",kind:"message",T:mt}]),ia=w.makeMessageType("yorkie.v1.NodeAttr",()=>[{no:1,name:"value",kind:"scalar",T:9},{no:2,name:"updated_at",kind:"message",T:M},{no:3,name:"is_removed",kind:"scalar",T:8}]),up=w.makeMessageType("yorkie.v1.TextNode",()=>[{no:1,name:"id",kind:"message",T:Jl},{no:2,name:"value",kind:"scalar",T:9},{no:3,name:"removed_at",kind:"message",T:M},{no:4,name:"ins_prev_id",kind:"message",T:Jl},{no:5,name:"attributes",kind:"map",K:9,V:{kind:"message",T:ia}}]),Jl=w.makeMessageType("yorkie.v1.TextNodeID",()=>[{no:1,name:"created_at",kind:"message",T:M},{no:2,name:"offset",kind:"scalar",T:5}]),Gu=w.makeMessageType("yorkie.v1.TreeNode",()=>[{no:1,name:"id",kind:"message",T:zr},{no:2,name:"type",kind:"scalar",T:9},{no:3,name:"value",kind:"scalar",T:9},{no:4,name:"removed_at",kind:"message",T:M},{no:5,name:"ins_prev_id",kind:"message",T:zr},{no:6,name:"ins_next_id",kind:"message",T:zr},{no:7,name:"depth",kind:"scalar",T:5},{no:8,name:"attributes",kind:"map",K:9,V:{kind:"message",T:ia}}]),cp=w.makeMessageType("yorkie.v1.TreeNodes",()=>[{no:1,name:"content",kind:"message",T:Gu,repeated:!0}]),zr=w.makeMessageType("yorkie.v1.TreeNodeID",()=>[{no:1,name:"created_at",kind:"message",T:M},{no:2,name:"offset",kind:"scalar",T:5}]),es=w.makeMessageType("yorkie.v1.TreePos",()=>[{no:1,name:"parent_id",kind:"message",T:zr},{no:2,name:"left_sibling_id",kind:"message",T:zr}]);w.makeMessageType("yorkie.v1.User",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"username",kind:"scalar",T:9},{no:3,name:"created_at",kind:"message",T:Pe}]);w.makeMessageType("yorkie.v1.Project",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"public_key",kind:"scalar",T:9},{no:4,name:"secret_key",kind:"scalar",T:9},{no:5,name:"auth_webhook_url",kind:"scalar",T:9},{no:6,name:"auth_webhook_methods",kind:"scalar",T:9,repeated:!0},{no:7,name:"client_deactivate_threshold",kind:"scalar",T:9},{no:8,name:"created_at",kind:"message",T:Pe},{no:9,name:"updated_at",kind:"message",T:Pe}]);w.makeMessageType("yorkie.v1.UpdatableProjectFields",()=>[{no:1,name:"name",kind:"message",T:Xe},{no:2,name:"auth_webhook_url",kind:"message",T:Xe},{no:3,name:"auth_webhook_methods",kind:"message",T:K0},{no:4,name:"client_deactivate_threshold",kind:"message",T:Xe}]);const K0=w.makeMessageType("yorkie.v1.UpdatableProjectFields.AuthWebhookMethods",()=>[{no:1,name:"methods",kind:"scalar",T:9,repeated:!0}],{localName:"UpdatableProjectFields_AuthWebhookMethods"});w.makeMessageType("yorkie.v1.DocumentSummary",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"key",kind:"scalar",T:9},{no:3,name:"snapshot",kind:"scalar",T:9},{no:4,name:"created_at",kind:"message",T:Pe},{no:5,name:"accessed_at",kind:"message",T:Pe},{no:6,name:"updated_at",kind:"message",T:Pe}]);const Kl=w.makeMessageType("yorkie.v1.PresenceChange",()=>[{no:1,name:"type",kind:"enum",T:w.getEnumType(ts)},{no:2,name:"presence",kind:"message",T:Yu}]),ts=w.makeEnum("yorkie.v1.PresenceChange.ChangeType",[{no:0,name:"CHANGE_TYPE_UNSPECIFIED",localName:"UNSPECIFIED"},{no:1,name:"CHANGE_TYPE_PUT",localName:"PUT"},{no:2,name:"CHANGE_TYPE_DELETE",localName:"DELETE"},{no:3,name:"CHANGE_TYPE_CLEAR",localName:"CLEAR"}]),Yu=w.makeMessageType("yorkie.v1.Presence",()=>[{no:1,name:"data",kind:"map",K:9,V:{kind:"scalar",T:9}}]),fp=w.makeMessageType("yorkie.v1.Checkpoint",()=>[{no:1,name:"server_seq",kind:"scalar",T:3,L:1},{no:2,name:"client_seq",kind:"scalar",T:13}]),fr=w.makeMessageType("yorkie.v1.TextNodePos",()=>[{no:1,name:"created_at",kind:"message",T:M},{no:2,name:"offset",kind:"scalar",T:5},{no:3,name:"relative_offset",kind:"scalar",T:5}]),M=w.makeMessageType("yorkie.v1.TimeTicket",()=>[{no:1,name:"lamport",kind:"scalar",T:3,L:1},{no:2,name:"delimiter",kind:"scalar",T:13},{no:3,name:"actor_id",kind:"scalar",T:12}]),W0=w.makeMessageType("yorkie.v1.DocEventBody",()=>[{no:1,name:"topic",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:12}]),q0=w.makeMessageType("yorkie.v1.DocEvent",()=>[{no:1,name:"type",kind:"enum",T:w.getEnumType(bo)},{no:2,name:"publisher",kind:"scalar",T:9},{no:3,name:"body",kind:"message",T:W0}]),H0=w.makeMessageType("yorkie.v1.ActivateClientRequest",()=>[{no:1,name:"client_key",kind:"scalar",T:9}]),G0=w.makeMessageType("yorkie.v1.ActivateClientResponse",()=>[{no:1,name:"client_id",kind:"scalar",T:9}]),Y0=w.makeMessageType("yorkie.v1.DeactivateClientRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9}]),Q0=w.makeMessageType("yorkie.v1.DeactivateClientResponse",[]),X0=w.makeMessageType("yorkie.v1.AttachDocumentRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"change_pack",kind:"message",T:gn}]),Z0=w.makeMessageType("yorkie.v1.AttachDocumentResponse",()=>[{no:1,name:"document_id",kind:"scalar",T:9},{no:2,name:"change_pack",kind:"message",T:gn}]),ew=w.makeMessageType("yorkie.v1.DetachDocumentRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:gn},{no:4,name:"remove_if_not_attached",kind:"scalar",T:8}]),tw=w.makeMessageType("yorkie.v1.DetachDocumentResponse",()=>[{no:2,name:"change_pack",kind:"message",T:gn}]),nw=w.makeMessageType("yorkie.v1.WatchDocumentRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9}]),rw=w.makeMessageType("yorkie.v1.WatchDocumentResponse",()=>[{no:1,name:"initialization",kind:"message",T:iw,oneof:"body"},{no:2,name:"event",kind:"message",T:q0,oneof:"body"}]),iw=w.makeMessageType("yorkie.v1.WatchDocumentResponse.Initialization",()=>[{no:1,name:"client_ids",kind:"scalar",T:9,repeated:!0}],{localName:"WatchDocumentResponse_Initialization"}),sw=w.makeMessageType("yorkie.v1.RemoveDocumentRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:gn}]),ow=w.makeMessageType("yorkie.v1.RemoveDocumentResponse",()=>[{no:1,name:"change_pack",kind:"message",T:gn}]),aw=w.makeMessageType("yorkie.v1.PushPullChangesRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:gn},{no:4,name:"push_only",kind:"scalar",T:8}]),lw=w.makeMessageType("yorkie.v1.PushPullChangesResponse",()=>[{no:1,name:"change_pack",kind:"message",T:gn}]),uw=w.makeMessageType("yorkie.v1.BroadcastRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"topic",kind:"scalar",T:9},{no:4,name:"payload",kind:"scalar",T:12}]),cw=w.makeMessageType("yorkie.v1.BroadcastResponse",[]),fw={typeName:"yorkie.v1.YorkieService",methods:{activateClient:{name:"ActivateClient",I:H0,O:G0,kind:_e.Unary},deactivateClient:{name:"DeactivateClient",I:Y0,O:Q0,kind:_e.Unary},attachDocument:{name:"AttachDocument",I:X0,O:Z0,kind:_e.Unary},detachDocument:{name:"DetachDocument",I:ew,O:tw,kind:_e.Unary},removeDocument:{name:"RemoveDocument",I:sw,O:ow,kind:_e.Unary},pushPullChanges:{name:"PushPullChanges",I:aw,O:lw,kind:_e.Unary},watchDocument:{name:"WatchDocument",I:nw,O:rw,kind:_e.ServerStreaming},broadcast:{name:"Broadcast",I:uw,O:cw,kind:_e.Unary}}};/**
 * @license
 * Copyright 2009 The Closure Library Authors
 * Copyright 2020 Daniel Wirtz / The long.js Authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * SPDX-License-Identifier: Apache-2.0
 */var ut=null;try{ut=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function B(t,e,n){this.low=t|0,this.high=e|0,this.unsigned=!!n}B.prototype.__isLong__;Object.defineProperty(B.prototype,"__isLong__",{value:!0});function De(t){return(t&&t.__isLong__)===!0}function qf(t){var e=Math.clz32(t&-t);return t?31-e:e}B.isLong=De;var Hf={},Gf={};function pr(t,e){var n,r,i;return e?(t>>>=0,(i=0<=t&&t<256)&&(r=Gf[t],r)?r:(n=K(t,0,!0),i&&(Gf[t]=n),n)):(t|=0,(i=-128<=t&&t<128)&&(r=Hf[t],r)?r:(n=K(t,t<0?-1:0,!1),i&&(Hf[t]=n),n))}B.fromInt=pr;function ct(t,e){if(isNaN(t))return e?rn:kt;if(e){if(t<0)return rn;if(t>=dp)return pp}else{if(t<=-Qf)return Ve;if(t+1>=Qf)return gp}return t<0?ct(-t,e).neg():K(t%Xr|0,t/Xr|0,e)}B.fromNumber=ct;function K(t,e,n){return new B(t,e,n)}B.fromBits=K;var Mo=Math.pow;function Qu(t,e,n){if(t.length===0)throw Error("empty string");if(typeof e=="number"?(n=e,e=!1):e=!!e,t==="NaN"||t==="Infinity"||t==="+Infinity"||t==="-Infinity")return e?rn:kt;if(n=n||10,n<2||36<n)throw RangeError("radix");var r;if((r=t.indexOf("-"))>0)throw Error("interior hyphen");if(r===0)return Qu(t.substring(1),e,n).neg();for(var i=ct(Mo(n,8)),s=kt,o=0;o<t.length;o+=8){var a=Math.min(8,t.length-o),l=parseInt(t.substring(o,o+a),n);if(a<8){var u=ct(Mo(n,a));s=s.mul(u).add(ct(l))}else s=s.mul(i),s=s.add(ct(l))}return s.unsigned=e,s}B.fromString=Qu;function Ot(t,e){return typeof t=="number"?ct(t,e):typeof t=="string"?Qu(t,e):K(t.low,t.high,typeof e=="boolean"?e:t.unsigned)}B.fromValue=Ot;var Yf=65536,dw=1<<24,Xr=Yf*Yf,dp=Xr*Xr,Qf=dp/2,Xf=pr(dw),kt=pr(0);B.ZERO=kt;var rn=pr(0,!0);B.UZERO=rn;var Rr=pr(1);B.ONE=Rr;var hp=pr(1,!0);B.UONE=hp;var Wl=pr(-1);B.NEG_ONE=Wl;var gp=K(-1,2147483647,!1);B.MAX_VALUE=gp;var pp=K(-1,-1,!0);B.MAX_UNSIGNED_VALUE=pp;var Ve=K(0,-2147483648,!1);B.MIN_VALUE=Ve;var x=B.prototype;x.toInt=function(){return this.unsigned?this.low>>>0:this.low};x.toNumber=function(){return this.unsigned?(this.high>>>0)*Xr+(this.low>>>0):this.high*Xr+(this.low>>>0)};x.toString=function(e){if(e=e||10,e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(Ve)){var n=ct(e),r=this.div(n),i=r.mul(n).sub(this);return r.toString(e)+i.toInt().toString(e)}else return"-"+this.neg().toString(e);for(var s=ct(Mo(e,6),this.unsigned),o=this,a="";;){var l=o.div(s),u=o.sub(l.mul(s)).toInt()>>>0,c=u.toString(e);if(o=l,o.isZero())return c+a;for(;c.length<6;)c="0"+c;a=""+c+a}};x.getHighBits=function(){return this.high};x.getHighBitsUnsigned=function(){return this.high>>>0};x.getLowBits=function(){return this.low};x.getLowBitsUnsigned=function(){return this.low>>>0};x.getNumBitsAbs=function(){if(this.isNegative())return this.eq(Ve)?64:this.neg().getNumBitsAbs();for(var e=this.high!=0?this.high:this.low,n=31;n>0&&!(e&1<<n);n--);return this.high!=0?n+33:n+1};x.isZero=function(){return this.high===0&&this.low===0};x.eqz=x.isZero;x.isNegative=function(){return!this.unsigned&&this.high<0};x.isPositive=function(){return this.unsigned||this.high>=0};x.isOdd=function(){return(this.low&1)===1};x.isEven=function(){return(this.low&1)===0};x.equals=function(e){return De(e)||(e=Ot(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low};x.eq=x.equals;x.notEquals=function(e){return!this.eq(e)};x.neq=x.notEquals;x.ne=x.notEquals;x.lessThan=function(e){return this.comp(e)<0};x.lt=x.lessThan;x.lessThanOrEqual=function(e){return this.comp(e)<=0};x.lte=x.lessThanOrEqual;x.le=x.lessThanOrEqual;x.greaterThan=function(e){return this.comp(e)>0};x.gt=x.greaterThan;x.greaterThanOrEqual=function(e){return this.comp(e)>=0};x.gte=x.greaterThanOrEqual;x.ge=x.greaterThanOrEqual;x.compare=function(e){if(De(e)||(e=Ot(e)),this.eq(e))return 0;var n=this.isNegative(),r=e.isNegative();return n&&!r?-1:!n&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1};x.comp=x.compare;x.negate=function(){return!this.unsigned&&this.eq(Ve)?Ve:this.not().add(Rr)};x.neg=x.negate;x.add=function(e){De(e)||(e=Ot(e));var n=this.high>>>16,r=this.high&65535,i=this.low>>>16,s=this.low&65535,o=e.high>>>16,a=e.high&65535,l=e.low>>>16,u=e.low&65535,c=0,h=0,g=0,d=0;return d+=s+u,g+=d>>>16,d&=65535,g+=i+l,h+=g>>>16,g&=65535,h+=r+a,c+=h>>>16,h&=65535,c+=n+o,c&=65535,K(g<<16|d,c<<16|h,this.unsigned)};x.subtract=function(e){return De(e)||(e=Ot(e)),this.add(e.neg())};x.sub=x.subtract;x.multiply=function(e){if(this.isZero())return this;if(De(e)||(e=Ot(e)),ut){var n=ut.mul(this.low,this.high,e.low,e.high);return K(n,ut.get_high(),this.unsigned)}if(e.isZero())return this.unsigned?rn:kt;if(this.eq(Ve))return e.isOdd()?Ve:kt;if(e.eq(Ve))return this.isOdd()?Ve:kt;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(Xf)&&e.lt(Xf))return ct(this.toNumber()*e.toNumber(),this.unsigned);var r=this.high>>>16,i=this.high&65535,s=this.low>>>16,o=this.low&65535,a=e.high>>>16,l=e.high&65535,u=e.low>>>16,c=e.low&65535,h=0,g=0,d=0,v=0;return v+=o*c,d+=v>>>16,v&=65535,d+=s*c,g+=d>>>16,d&=65535,d+=o*u,g+=d>>>16,d&=65535,g+=i*c,h+=g>>>16,g&=65535,g+=s*u,h+=g>>>16,g&=65535,g+=o*l,h+=g>>>16,g&=65535,h+=r*c+i*u+s*l+o*a,h&=65535,K(d<<16|v,h<<16|g,this.unsigned)};x.mul=x.multiply;x.divide=function(e){if(De(e)||(e=Ot(e)),e.isZero())throw Error("division by zero");if(ut){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;var n=(this.unsigned?ut.div_u:ut.div_s)(this.low,this.high,e.low,e.high);return K(n,ut.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?rn:kt;var r,i,s;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return rn;if(e.gt(this.shru(1)))return hp;s=rn}else{if(this.eq(Ve)){if(e.eq(Rr)||e.eq(Wl))return Ve;if(e.eq(Ve))return Rr;var o=this.shr(1);return r=o.div(e).shl(1),r.eq(kt)?e.isNegative()?Rr:Wl:(i=this.sub(e.mul(r)),s=r.add(i.div(e)),s)}else if(e.eq(Ve))return this.unsigned?rn:kt;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();s=kt}for(i=this;i.gte(e);){r=Math.max(1,Math.floor(i.toNumber()/e.toNumber()));for(var a=Math.ceil(Math.log(r)/Math.LN2),l=a<=48?1:Mo(2,a-48),u=ct(r),c=u.mul(e);c.isNegative()||c.gt(i);)r-=l,u=ct(r,this.unsigned),c=u.mul(e);u.isZero()&&(u=Rr),s=s.add(u),i=i.sub(c)}return s};x.div=x.divide;x.modulo=function(e){if(De(e)||(e=Ot(e)),ut){var n=(this.unsigned?ut.rem_u:ut.rem_s)(this.low,this.high,e.low,e.high);return K(n,ut.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))};x.mod=x.modulo;x.rem=x.modulo;x.not=function(){return K(~this.low,~this.high,this.unsigned)};x.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32};x.clz=x.countLeadingZeros;x.countTrailingZeros=function(){return this.low?qf(this.low):qf(this.high)+32};x.ctz=x.countTrailingZeros;x.and=function(e){return De(e)||(e=Ot(e)),K(this.low&e.low,this.high&e.high,this.unsigned)};x.or=function(e){return De(e)||(e=Ot(e)),K(this.low|e.low,this.high|e.high,this.unsigned)};x.xor=function(e){return De(e)||(e=Ot(e)),K(this.low^e.low,this.high^e.high,this.unsigned)};x.shiftLeft=function(e){return De(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?K(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):K(0,this.low<<e-32,this.unsigned)};x.shl=x.shiftLeft;x.shiftRight=function(e){return De(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?K(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):K(this.high>>e-32,this.high>=0?0:-1,this.unsigned)};x.shr=x.shiftRight;x.shiftRightUnsigned=function(e){return De(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?K(this.low>>>e|this.high<<32-e,this.high>>>e,this.unsigned):e===32?K(this.high,0,this.unsigned):K(this.high>>>e-32,0,this.unsigned)};x.shru=x.shiftRightUnsigned;x.shr_u=x.shiftRightUnsigned;x.rotateLeft=function(e){var n;return De(e)&&(e=e.toInt()),(e&=63)===0?this:e===32?K(this.high,this.low,this.unsigned):e<32?(n=32-e,K(this.low<<e|this.high>>>n,this.high<<e|this.low>>>n,this.unsigned)):(e-=32,n=32-e,K(this.high<<e|this.low>>>n,this.low<<e|this.high>>>n,this.unsigned))};x.rotl=x.rotateLeft;x.rotateRight=function(e){var n;return De(e)&&(e=e.toInt()),(e&=63)===0?this:e===32?K(this.high,this.low,this.unsigned):e<32?(n=32-e,K(this.high<<n|this.low>>>e,this.low<<n|this.high>>>e,this.unsigned)):(e-=32,n=32-e,K(this.low<<n|this.high>>>e,this.high<<n|this.low>>>e,this.unsigned))};x.rotr=x.rotateRight;x.toSigned=function(){return this.unsigned?K(this.low,this.high,!1):this};x.toUnsigned=function(){return this.unsigned?this:K(this.low,this.high,!0)};x.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()};x.toBytesLE=function(){var e=this.high,n=this.low;return[n&255,n>>>8&255,n>>>16&255,n>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]};x.toBytesBE=function(){var e=this.high,n=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,n>>>24,n>>>16&255,n>>>8&255,n&255]};B.fromBytes=function(e,n,r){return r?B.fromBytesLE(e,n):B.fromBytesBE(e,n)};B.fromBytesLE=function(e,n){return new B(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,n)};B.fromBytesBE=function(e,n){return new B(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],n)};const hw=w.makeMessageType("google.rpc.ErrorInfo",()=>[{no:1,name:"reason",kind:"scalar",T:9},{no:2,name:"domain",kind:"scalar",T:9},{no:3,name:"metadata",kind:"map",K:9,V:{kind:"scalar",T:9}}]);w.makeMessageType("google.rpc.RetryInfo",()=>[{no:1,name:"retry_delay",kind:"message",T:tn}]);w.makeMessageType("google.rpc.DebugInfo",()=>[{no:1,name:"stack_entries",kind:"scalar",T:9,repeated:!0},{no:2,name:"detail",kind:"scalar",T:9}]);w.makeMessageType("google.rpc.QuotaFailure",()=>[{no:1,name:"violations",kind:"message",T:gw,repeated:!0}]);const gw=w.makeMessageType("google.rpc.QuotaFailure.Violation",()=>[{no:1,name:"subject",kind:"scalar",T:9},{no:2,name:"description",kind:"scalar",T:9}],{localName:"QuotaFailure_Violation"});w.makeMessageType("google.rpc.PreconditionFailure",()=>[{no:1,name:"violations",kind:"message",T:pw,repeated:!0}]);const pw=w.makeMessageType("google.rpc.PreconditionFailure.Violation",()=>[{no:1,name:"type",kind:"scalar",T:9},{no:2,name:"subject",kind:"scalar",T:9},{no:3,name:"description",kind:"scalar",T:9}],{localName:"PreconditionFailure_Violation"});w.makeMessageType("google.rpc.BadRequest",()=>[{no:1,name:"field_violations",kind:"message",T:mw,repeated:!0}]);const mw=w.makeMessageType("google.rpc.BadRequest.FieldViolation",()=>[{no:1,name:"field",kind:"scalar",T:9},{no:2,name:"description",kind:"scalar",T:9}],{localName:"BadRequest_FieldViolation"});w.makeMessageType("google.rpc.RequestInfo",()=>[{no:1,name:"request_id",kind:"scalar",T:9},{no:2,name:"serving_data",kind:"scalar",T:9}]);w.makeMessageType("google.rpc.ResourceInfo",()=>[{no:1,name:"resource_type",kind:"scalar",T:9},{no:2,name:"resource_name",kind:"scalar",T:9},{no:3,name:"owner",kind:"scalar",T:9},{no:4,name:"description",kind:"scalar",T:9}]);w.makeMessageType("google.rpc.Help",()=>[{no:1,name:"links",kind:"message",T:yw,repeated:!0}]);const yw=w.makeMessageType("google.rpc.Help.Link",()=>[{no:1,name:"description",kind:"scalar",T:9},{no:2,name:"url",kind:"scalar",T:9}],{localName:"Help_Link"});w.makeMessageType("google.rpc.LocalizedMessage",()=>[{no:1,name:"locale",kind:"scalar",T:9},{no:2,name:"message",kind:"scalar",T:9}]);var S=(t=>(t.Ok="ok",t.ErrClientNotActivated="ErrClientNotActivated",t.ErrClientNotFound="ErrClientNotFound",t.ErrUnimplemented="ErrUnimplemented",t.ErrInvalidType="ErrInvalidType",t.ErrDummy="ErrDummy",t.ErrDocumentNotAttached="ErrDocumentNotAttached",t.ErrDocumentNotDetached="ErrDocumentNotDetached",t.ErrDocumentRemoved="ErrDocumentRemoved",t.ErrInvalidObjectKey="ErrInvalidObjectKey",t.ErrInvalidArgument="ErrInvalidArgument",t.ErrNotInitialized="ErrNotInitialized",t.ErrNotReady="ErrNotReady",t.ErrRefused="ErrRefused",t.ErrContextNotProvided="ErrContextNotProvided",t))(S||{});class T extends Error{constructor(n,r){super(r);m(this,"name","YorkieError");m(this,"stack");this.code=n,this.message=r,this.toString=()=>`[code=${this.code}]: ${this.message}`}}function wt(t){if(t instanceof Map){const e=Array.from(t);return new Map(JSON.parse(JSON.stringify(e)))}return JSON.parse(JSON.stringify(t))}const mp=t=>t?Object.entries(t).length===0:!0,Zr=t=>{const e={};for(const[n,r]of Object.entries(t))e[n]=JSON.stringify(r);return e},Ur=t=>{const e={};for(const[n,r]of Object.entries(t))e[n]=JSON.parse(r);return e};var zn=(t=>(t.Put="put",t.Clear="clear",t))(zn||{});class Ja{constructor(e,n){m(this,"context");m(this,"presence");this.context=e,this.presence=n}set(e,n){for(const r of Object.keys(e))this.presence[r]=e[r];this.context.setPresenceChange({type:"put",presence:wt(this.presence)}),this.context.setReversePresence(e,n)}get(e){return this.presence[e]}clear(){this.presence={},this.context.setPresenceChange({type:"clear"})}}const sa="000000000000000000000000",vw="FFFFFFFFFFFFFFFFFFFFFFFF";class qe{constructor(e,n,r){m(this,"lamport");m(this,"delimiter");m(this,"actorID");this.lamport=e,this.delimiter=n,this.actorID=r}static of(e,n,r){return new qe(e,n,r)}static fromStruct(e){return qe.of(B.fromString(e.lamport,!0),e.delimiter,e.actorID)}toIDString(){return`${this.lamport.toString()}:${this.actorID}:${this.delimiter}`}toStruct(){return{lamport:this.getLamportAsString(),delimiter:this.getDelimiter(),actorID:this.getActorID()}}toTestString(){return`${this.lamport.toString()}:${this.actorID.slice(-2)}:${this.delimiter}`}setActor(e){return new qe(this.lamport,this.delimiter,e)}getLamportAsString(){return this.lamport.toString()}getLamport(){return this.lamport}getDelimiter(){return this.delimiter}getActorID(){return this.actorID}after(e){return this.compare(e)>0}equals(e){return this.compare(e)===0}compare(e){if(this.lamport.greaterThan(e.lamport))return 1;if(e.lamport.greaterThan(this.lamport))return-1;const n=this.actorID.localeCompare(e.actorID);return n!==0?n:this.delimiter>e.delimiter?1:e.delimiter>this.delimiter?-1:0}}const Xu=0,ww=4294967295,Sw=B.MAX_VALUE,Nt=new qe(B.fromNumber(0),Xu,sa);new qe(B.fromNumber(1),Xu+1,sa);const _i=new qe(Sw,ww,vw);function Jt(t){return t.replace(/["'\\\n\r\f\b\t\u2028\u2029]/g,function(e){switch(e){case'"':case"\\":return"\\"+e;case`
`:return"\\n";case"\r":return"\\r";case"\f":return"\\f";case"\b":return"\\b";case"	":return"\\t";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:return e}})}class hs{constructor(e){m(this,"createdAt");m(this,"movedAt");m(this,"removedAt");this.createdAt=e}getCreatedAt(){return this.createdAt}getID(){return this.createdAt}getMovedAt(){return this.movedAt}getRemovedAt(){return this.removedAt}getPositionedAt(){return this.movedAt?this.movedAt:this.createdAt}setMovedAt(e){return!this.movedAt||e&&e.after(this.movedAt)?(this.movedAt=e,!0):!1}setRemovedAt(e){this.removedAt=e}remove(e){return e&&e.after(this.getPositionedAt())&&(!this.removedAt||e.after(this.removedAt))?(this.removedAt=e,!0):!1}isRemoved(){return!!this.removedAt}}class bn extends hs{constructor(e){super(e)}}class Zu{constructor(e,n){m(this,"strKey");m(this,"value");this.strKey=e,this.value=n}static of(e,n){return new Zu(e,n)}isRemoved(){return this.value.isRemoved()}getStrKey(){return this.strKey}getValue(){return this.value}remove(e){return this.value.remove(e)}}class ns{constructor(){m(this,"nodeMapByKey");m(this,"nodeMapByCreatedAt");this.nodeMapByKey=new Map,this.nodeMapByCreatedAt=new Map}static create(){return new ns}set(e,n,r){let i;const s=this.nodeMapByKey.get(e);s!=null&&!s.isRemoved()&&s.remove(r)&&(i=s.getValue());const o=Zu.of(e,n);return this.nodeMapByCreatedAt.set(n.getCreatedAt().toIDString(),o),(s==null||r.after(s.getValue().getPositionedAt()))&&(this.nodeMapByKey.set(e,o),n.setMovedAt(r)),i}delete(e,n){if(!this.nodeMapByCreatedAt.has(e.toIDString()))throw new T(S.ErrInvalidArgument,`fail to find ${e.toIDString()}`);const r=this.nodeMapByCreatedAt.get(e.toIDString());return r.remove(n),r.getValue()}subPathOf(e){const n=this.nodeMapByCreatedAt.get(e.toIDString());if(n)return n.getStrKey()}purge(e){const n=this.nodeMapByCreatedAt.get(e.getCreatedAt().toIDString());if(!n)throw new T(S.ErrInvalidArgument,`fail to find ${e.getCreatedAt().toIDString()}`);const r=this.nodeMapByKey.get(n.getStrKey());n===r&&this.nodeMapByKey.delete(r.getStrKey()),this.nodeMapByCreatedAt.delete(n.getValue().getCreatedAt().toIDString())}deleteByKey(e,n){const r=this.nodeMapByKey.get(e);if(r!=null&&r.remove(n))return r.getValue()}has(e){const n=this.nodeMapByKey.get(e);return n==null?!1:!n.isRemoved()}getByID(e){return this.nodeMapByCreatedAt.get(e.toIDString())}get(e){const n=this.nodeMapByKey.get(e);if(!(!n||n.isRemoved()))return n}*[Symbol.iterator](){for(const[,e]of this.nodeMapByKey)yield e}}class He extends bn{constructor(n,r){super(n);m(this,"memberNodes");this.memberNodes=r}static create(n,r){if(!r)return new He(n,ns.create());const i=ns.create();for(const[s,o]of Object.entries(r))i.set(s,o.deepcopy(),o.getCreatedAt());return new He(n,i)}subPathOf(n){return this.memberNodes.subPathOf(n)}purge(n){this.memberNodes.purge(n)}set(n,r,i){return this.memberNodes.set(n,r,i)}delete(n,r){return this.memberNodes.delete(n,r)}deleteByKey(n,r){return this.memberNodes.deleteByKey(n,r)}get(n){const r=this.memberNodes.get(n);return r==null?void 0:r.getValue()}getByID(n){const r=this.memberNodes.getByID(n);return r==null?void 0:r.getValue()}has(n){return this.memberNodes.has(n)}toJSON(){const n=[];for(const[r,i]of this)n.push(`"${Jt(r)}":${i.toJSON()}`);return`{${n.join(",")}}`}toJS(){return JSON.parse(this.toJSON())}toJSForTest(){const n={};for(const[r,i]of this){const{createdAt:s,value:o,type:a}=i.toJSForTest();n[r]={key:r,createdAt:s,value:o,type:a}}return{createdAt:this.getCreatedAt().toTestString(),value:n,type:"YORKIE_OBJECT"}}getKeys(){const n=Array();for(const[r]of this)n.push(r);return n}toSortedJSON(){var i;const n=Array();for(const[s]of this)n.push(s);const r=[];for(const s of n.sort()){const o=(i=this.memberNodes.get(s))==null?void 0:i.getValue();r.push(`"${Jt(s)}":${o.toSortedJSON()}`)}return`{${r.join(",")}}`}getRHT(){return this.memberNodes}deepcopy(){const n=He.create(this.getCreatedAt());for(const r of this.memberNodes)n.memberNodes.set(r.getStrKey(),r.getValue().deepcopy(),this.getPositionedAt());return n.remove(this.getRemovedAt()),n}getDescendants(n){for(const r of this.memberNodes){const i=r.getValue();if(n(i,this))return;i instanceof bn&&i.getDescendants(n)}}*[Symbol.iterator](){const n=new Set;for(const r of this.memberNodes)n.has(r.getStrKey())||(n.add(r.getStrKey()),r.isRemoved()||(yield[r.getStrKey(),r.getValue()]))}}var G=(t=>(t.Local="local",t.Remote="remote",t.UndoRedo="undoredo",t))(G||{});class Pt{constructor(e,n){m(this,"parentCreatedAt");m(this,"executedAt");this.parentCreatedAt=e,this.executedAt=n}getParentCreatedAt(){return this.parentCreatedAt}getExecutedAt(){if(!this.executedAt)throw new T(S.ErrNotReady,"executedAt is not set yet");return this.executedAt}setActor(e){this.executedAt&&(this.executedAt=this.executedAt.setActor(e))}setExecutedAt(e){this.executedAt=e}}class yp{constructor(e){m(this,"value");m(this,"left");m(this,"right");m(this,"parent");m(this,"weight");this.value=e,this.initWeight()}getNodeString(){return`${this.weight}${this.value}`}getValue(){return this.value}getLeftWeight(){return this.hasLeft()?this.left.getWeight():0}getRightWeight(){return this.hasRight()?this.right.getWeight():0}getWeight(){return this.weight}getLeft(){return this.left}getRight(){return this.right}getParent(){return this.parent}hasLeft(){return!!this.left}hasRight(){return!!this.right}hasParent(){return!!this.parent}setLeft(e){this.left=e}setRight(e){this.right=e}setParent(e){this.parent=e}unlink(){this.parent=void 0,this.right=void 0,this.left=void 0}hasLinks(){return this.hasParent()||this.hasLeft()||this.hasRight()}increaseWeight(e){this.weight+=e}initWeight(){this.weight=this.getLength()}}class rs{constructor(e){m(this,"root");this.root=e}get length(){return this.root?this.root.getWeight():0}find(e){if(!this.root||e<0)return[void 0,0];let n=this.root;for(;;)if(n.hasLeft()&&e<=n.getLeftWeight())n=n.getLeft();else if(n.hasRight()&&n.getLeftWeight()+n.getLength()<e)e-=n.getLeftWeight()+n.getLength(),n=n.getRight();else{e-=n.getLeftWeight();break}if(e>n.getLength())throw new T(S.ErrInvalidArgument,`out of index range: pos: ${e} > node.length: ${n.getLength()}`);return[n,e]}indexOf(e){if(!e||e!==this.root&&!e.hasLinks())return-1;let n=0,r=e,i;for(;r;)(!i||i===r.getRight())&&(n+=r.getLength()+(r.hasLeft()?r.getLeftWeight():0)),i=r,r=r.getParent();return n-e.getLength()}getRoot(){return this.root}insert(e){return this.insertAfter(this.root,e)}insertAfter(e,n){return e?(this.splayNode(e),this.root=n,n.setRight(e.getRight()),e.hasRight()&&e.getRight().setParent(n),n.setLeft(e),e.setParent(n),e.setRight(),this.updateWeight(e),this.updateWeight(n),n):(this.root=n,n)}updateWeight(e){e.initWeight(),e.hasLeft()&&e.increaseWeight(e.getLeftWeight()),e.hasRight()&&e.increaseWeight(e.getRightWeight())}updateTreeWeight(e){for(;e;)this.updateWeight(e),e=e.getParent()}splayNode(e){if(e)for(;;)if(this.isLeftChild(e.getParent())&&this.isRightChild(e))this.rotateLeft(e),this.rotateRight(e);else if(this.isRightChild(e.getParent())&&this.isLeftChild(e))this.rotateRight(e),this.rotateLeft(e);else if(this.isLeftChild(e.getParent())&&this.isLeftChild(e))this.rotateRight(e.getParent()),this.rotateRight(e);else if(this.isRightChild(e.getParent())&&this.isRightChild(e))this.rotateLeft(e.getParent()),this.rotateLeft(e);else{this.isLeftChild(e)?this.rotateRight(e):this.isRightChild(e)&&this.rotateLeft(e),this.updateWeight(e);return}}delete(e){this.splayNode(e);const n=new rs(e.getLeft());n.root&&n.root.setParent();const r=new rs(e.getRight());if(r.root&&r.root.setParent(),n.root){const i=n.getRightmost();n.splayNode(i),n.root.setRight(r.root),r.root&&r.root.setParent(n.root),this.root=n.root}else this.root=r.root;e.unlink(),this.root&&this.updateWeight(this.root)}deleteRange(e,n){if(!n){this.splayNode(e),this.cutOffRight(e);return}this.splayNode(e),this.splayNode(n),n.getLeft()!=e&&this.rotateRight(e),this.cutOffRight(e)}cutOffRight(e){const n=[];this.traversePostorder(e.getRight(),n);for(const r of n)r.initWeight();this.updateTreeWeight(e)}toTestString(){const e=[];return this.traverseInorder(this.root,e),e.map(n=>`[${n.getWeight()},${n.getLength()}]${n.getValue()||""}`).join("")}checkWeight(){const e=[];this.traverseInorder(this.root,e);for(const n of e)if(n.getWeight()!=n.getLength()+n.getLeftWeight()+n.getRightWeight())return!1;return!0}getRightmost(){let e=this.root;for(;e.hasRight();)e=e.getRight();return e}traverseInorder(e,n){e&&(this.traverseInorder(e.getLeft(),n),n.push(e),this.traverseInorder(e.getRight(),n))}traversePostorder(e,n){e&&(this.traversePostorder(e.getLeft(),n),this.traversePostorder(e.getRight(),n),n.push(e))}rotateLeft(e){const n=e.getParent();n.hasParent()?n===n.getParent().getLeft()?n.getParent().setLeft(e):n.getParent().setRight(e):this.root=e,e.setParent(n.getParent()),n.setRight(e.getLeft()),n.hasRight()&&n.getRight().setParent(n),e.setLeft(n),e.getLeft().setParent(e),this.updateWeight(n),this.updateWeight(e)}rotateRight(e){const n=e.getParent();n.hasParent()?n===n.getParent().getLeft()?n.getParent().setLeft(e):n.getParent().setRight(e):this.root=e,e.setParent(n.getParent()),n.setLeft(e.getRight()),n.hasLeft()&&n.getLeft().setParent(n),e.setRight(n),e.getRight().setParent(e),this.updateWeight(n),this.updateWeight(e)}isLeftChild(e){return e&&e.hasParent()?e.getParent().getLeft()===e:!1}isRightChild(e){return e&&e.hasParent()?e.getParent().getRight()===e:!1}}var me=(t=>(t[t.Null=0]="Null",t[t.Boolean=1]="Boolean",t[t.Integer=2]="Integer",t[t.Long=3]="Long",t[t.Double=4]="Double",t[t.String=5]="String",t[t.Bytes=6]="Bytes",t[t.Date=7]="Date",t))(me||{});class te extends hs{constructor(n,r){super(r);m(this,"valueType");m(this,"value");this.valueType=te.getPrimitiveType(n),this.value=n===void 0?null:n}static of(n,r){return new te(n,r)}static valueFromBytes(n,r){switch(n){case 0:return null;case 1:return!!r[0];case 2:return r[0]|r[1]<<8|r[2]<<16|r[3]<<24;case 4:{const i=new DataView(r.buffer);return r.forEach(function(s,o){i.setUint8(o,s)}),i.getFloat64(0,!0)}case 5:return new TextDecoder("utf-8").decode(r);case 3:return B.fromBytesLE(Array.from(r));case 6:return r;case 7:return new Date(B.fromBytesLE(Array.from(r),!0).toNumber());default:throw new T(S.ErrUnimplemented,`unimplemented type: ${n}`)}}toJSON(){return this.valueType===5?`"${Jt(this.value)}"`:`${this.value}`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:this.value,type:"YORKIE_PRIMITIVE"}}deepcopy(){const n=te.of(this.value,this.getCreatedAt());return n.setMovedAt(this.getMovedAt()),n.setRemovedAt(this.getRemovedAt()),n}getType(){return this.valueType}static getPrimitiveType(n){switch(typeof n){case"undefined":return 0;case"boolean":return 1;case"number":return this.isInteger(n)?2:4;case"string":return 5;case"object":if(n===null)return 0;if(n instanceof B)return 3;if(n instanceof Uint8Array)return 6;if(n instanceof Date)return 7}}static isSupport(n){return te.getPrimitiveType(n)!==void 0}static isInteger(n){return n%1===0}isNumericType(){const n=this.valueType;return n===2||n===3||n===4}getValue(){return this.value}toBytes(){switch(this.valueType){case 0:return new Uint8Array;case 1:return this.value?new Uint8Array([1]):new Uint8Array([0]);case 2:{const n=this.value;return new Uint8Array([n&255,n>>8&255,n>>16&255,n>>24&255])}case 4:{const n=this.value,r=new Uint8Array(8);return new DataView(r.buffer).setFloat64(0,n,!0),r}case 5:return new TextEncoder().encode(this.value);case 3:{const r=this.value.toBytesLE();return Uint8Array.from(r)}case 6:return this.value;case 7:{const n=this.value,r=B.fromNumber(n.getTime(),!0).toBytesLE();return Uint8Array.from(r)}default:throw new T(S.ErrUnimplemented,`unimplemented type: ${this.valueType}`)}}}class Fo extends yp{constructor(n){super(n);m(this,"prev");m(this,"next");this.value=n}static createAfter(n,r){const i=new Fo(r),s=n.next;return n.next=i,i.prev=n,i.next=s,s&&(s.prev=i),i}remove(n){return this.value.remove(n)}getCreatedAt(){return this.value.getCreatedAt()}getPositionedAt(){return this.value.getPositionedAt()}release(){this.prev&&(this.prev.next=this.next),this.next&&(this.next.prev=this.prev),this.prev=void 0,this.next=void 0}getLength(){return this.value.isRemoved()?0:1}getPrev(){return this.prev}getNext(){return this.next}getValue(){return this.value}isRemoved(){return this.value.isRemoved()}}class is{constructor(){m(this,"dummyHead");m(this,"last");m(this,"nodeMapByIndex");m(this,"nodeMapByCreatedAt");const e=te.of(0,Nt);e.setRemovedAt(Nt),this.dummyHead=new Fo(e),this.last=this.dummyHead,this.nodeMapByIndex=new rs,this.nodeMapByCreatedAt=new Map,this.nodeMapByIndex.insert(this.dummyHead),this.nodeMapByCreatedAt.set(this.dummyHead.getCreatedAt().toIDString(),this.dummyHead)}static create(){return new is}get length(){return this.nodeMapByIndex.length}findNextBeforeExecutedAt(e,n){let r=this.nodeMapByCreatedAt.get(e.toIDString());if(!r)throw new T(S.ErrInvalidArgument,`cant find the given node: ${e.toIDString()}`);for(;r.getNext()&&r.getNext().getPositionedAt().after(n);)r=r.getNext();return r}release(e){this.last===e&&(this.last=e.getPrev()),e.release(),this.nodeMapByIndex.delete(e),this.nodeMapByCreatedAt.delete(e.getValue().getCreatedAt().toIDString())}insertAfter(e,n,r=n.getCreatedAt()){const i=this.findNextBeforeExecutedAt(e,r),s=Fo.createAfter(i,n);i===this.last&&(this.last=s),this.nodeMapByIndex.insertAfter(i,s),this.nodeMapByCreatedAt.set(s.getCreatedAt().toIDString(),s)}moveAfter(e,n,r){const i=this.nodeMapByCreatedAt.get(e.toIDString());if(!i)throw new T(S.ErrInvalidArgument,`cant find the given node: ${e.toIDString()}`);const s=this.nodeMapByCreatedAt.get(n.toIDString());if(!s)throw new T(S.ErrInvalidArgument,`cant find the given node: ${n.toIDString()}`);i!==s&&(!s.getValue().getMovedAt()||r.after(s.getValue().getMovedAt()))&&(this.release(s),this.insertAfter(i.getCreatedAt(),s.getValue(),r),s.getValue().setMovedAt(r))}insert(e){this.insertAfter(this.last.getCreatedAt(),e)}getByID(e){return this.nodeMapByCreatedAt.get(e.toIDString())}subPathOf(e){const n=this.nodeMapByCreatedAt.get(e.toIDString());if(n)return String(this.nodeMapByIndex.indexOf(n))}purge(e){const n=this.nodeMapByCreatedAt.get(e.getCreatedAt().toIDString());if(!n)throw new T(S.ErrInvalidArgument,`fail to find the given createdAt: ${e.getCreatedAt().toIDString()}`);this.release(n)}getByIndex(e){if(e>=this.length)return;const[n,r]=this.nodeMapByIndex.find(e);let i=n;if(e===0&&n===this.dummyHead||r>0)do i&&(i=i.getNext());while(i&&i.isRemoved());return i}getPrevCreatedAt(e){let n=this.nodeMapByCreatedAt.get(e.toIDString());do n=n.getPrev();while(this.dummyHead!==n&&n.isRemoved());return n.getValue().getCreatedAt()}delete(e,n){const r=this.nodeMapByCreatedAt.get(e.toIDString()),i=r.isRemoved();return r.remove(n)&&!i&&this.nodeMapByIndex.splayNode(r),r.getValue()}deleteByIndex(e,n){const r=this.getByIndex(e);if(r)return r.remove(n)&&this.nodeMapByIndex.splayNode(r),r.getValue()}getHead(){return this.dummyHead.getValue()}getLast(){return this.last.getValue()}getLastCreatedAt(){return this.last.getCreatedAt()}toTestString(){const e=[];for(const n of this){const r=`${n.getCreatedAt().toIDString()}:${n.getValue().toJSON()}`;n.isRemoved()?e.push(`{${r}}`):e.push(`[${r}]`)}return e.join("")}*[Symbol.iterator](){let e=this.dummyHead.getNext();for(;e;)yield e,e=e.getNext()}}class tt extends bn{constructor(n,r){super(n);m(this,"elements");this.elements=r}static create(n,r){if(!r)return new tt(n,is.create());const i=is.create();for(const s of r)i.insertAfter(i.getLastCreatedAt(),s.deepcopy());return new tt(n,i)}subPathOf(n){return this.elements.subPathOf(n)}purge(n){this.elements.purge(n)}insertAfter(n,r){this.elements.insertAfter(n,r)}moveAfter(n,r,i){this.elements.moveAfter(n,r,i)}get(n){const r=this.elements.getByIndex(n);return r==null?void 0:r.getValue()}getByID(n){const r=this.elements.getByID(n);return r==null?void 0:r.getValue()}getHead(){return this.elements.getHead()}getLast(){return this.elements.getLast()}getPrevCreatedAt(n){return this.elements.getPrevCreatedAt(n)}delete(n,r){return this.elements.delete(n,r)}deleteByIndex(n,r){return this.elements.deleteByIndex(n,r)}getLastCreatedAt(){return this.elements.getLastCreatedAt()}get length(){return this.elements.length}*[Symbol.iterator](){for(const n of this.elements)n.isRemoved()||(yield n.getValue())}toTestString(){return this.elements.toTestString()}getDescendants(n){for(const r of this.elements){const i=r.getValue();if(n(i,this))return;i instanceof bn&&i.getDescendants(n)}}toJSON(){const n=[];for(const r of this)n.push(r.toJSON());return`[${n.join(",")}]`}toJS(){return JSON.parse(this.toJSON())}toJSForTest(){const n={};for(let r=0;r<this.length;r++){const{createdAt:i,value:s,type:o}=this.get(r).toJSForTest();n[r]={key:String(r),createdAt:i,value:s,type:o}}return{createdAt:this.getCreatedAt().toTestString(),value:n,type:"YORKIE_ARRAY"}}toSortedJSON(){return this.toJSON()}getElements(){return this.elements}deepcopy(){const n=tt.create(this.getCreatedAt());for(const r of this.elements)n.elements.insertAfter(n.getLastCreatedAt(),r.getValue().deepcopy());return n.remove(this.getRemovedAt()),n}}class Un extends Pt{constructor(n,r,i){super(n,i);m(this,"createdAt");this.createdAt=r}static create(n,r,i){return new Un(n,r,i)}execute(n,r){var u;const i=n.findByCreatedAt(this.getParentCreatedAt());if(!i)throw new T(S.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(i instanceof bn))throw new T(S.ErrInvalidArgument,`only object and array can execute remove: ${i}`);if(r===G.UndoRedo){let c=i.getByID(this.createdAt);for(;c;){if(c.getRemovedAt())return;c=(u=n.findElementPairByCreatedAt(c.getCreatedAt()))==null?void 0:u.parent}}const s=i.subPathOf(this.createdAt),o=this.toReverseOperation(i),a=i.delete(this.createdAt,this.getExecutedAt());return n.registerRemovedElement(a),{opInfos:i instanceof tt?[{type:"remove",path:n.createPath(this.getParentCreatedAt()),index:Number(s)}]:[{type:"remove",path:n.createPath(this.getParentCreatedAt()),key:s}],reverseOp:o}}toReverseOperation(n){if(n instanceof He){const r=n.subPathOf(this.createdAt);if(r!==void 0){const i=n.get(r);if(i!==void 0)return dr.create(r,i.deepcopy(),this.getParentCreatedAt())}}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.REMOVE.${this.createdAt.toTestString()}`}getCreatedAt(){return this.createdAt}}class dr extends Pt{constructor(n,r,i,s){super(i,s);m(this,"key");m(this,"value");this.key=n,this.value=r}static create(n,r,i,s){return new dr(n,r,i,s)}execute(n,r){var u;const i=n.findByCreatedAt(this.getParentCreatedAt());if(!i)throw new T(S.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(i instanceof He))throw new T(S.ErrInvalidArgument,"fail to execute, only object can execute set");if(r===G.UndoRedo){let c=i;for(;c;){if(c.getRemovedAt())return;c=(u=n.findElementPairByCreatedAt(c.getCreatedAt()))==null?void 0:u.parent}}const s=i.get(this.key),o=this.toReverseOperation(s),a=this.value.deepcopy(),l=i.set(this.key,a,this.getExecutedAt());return r===G.UndoRedo&&n.findByCreatedAt(a.getCreatedAt())&&n.deregisterElement(a),n.registerElement(a,i),l&&n.registerRemovedElement(l),{opInfos:[{type:"set",path:n.createPath(this.getParentCreatedAt()),key:this.key}],reverseOp:o}}toReverseOperation(n){let r=Un.create(this.getParentCreatedAt(),this.value.getCreatedAt());return n!==void 0&&!n.isRemoved()&&(r=dr.create(this.key,n.deepcopy(),this.getParentCreatedAt())),r}getEffectedCreatedAt(){return this.value.getCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.SET.${this.key}=${this.value.toSortedJSON()}`}getKey(){return this.key}getValue(){return this.value}}class gs extends Pt{constructor(n,r,i,s){super(n,s);m(this,"prevCreatedAt");m(this,"value");this.prevCreatedAt=r,this.value=i}static create(n,r,i,s){return new gs(n,r,i,s)}execute(n){const r=n.findByCreatedAt(this.getParentCreatedAt());if(!r)throw new T(S.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(r instanceof tt))throw new T(S.ErrInvalidArgument,"fail to execute, only array can execute add");const i=r,s=this.value.deepcopy();return i.insertAfter(this.prevCreatedAt,s),n.registerElement(s,i),{opInfos:[{type:"add",path:n.createPath(this.getParentCreatedAt()),index:Number(i.subPathOf(this.getEffectedCreatedAt()))}]}}getEffectedCreatedAt(){return this.value.getCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.ADD.${this.value.toJSON()}`}getPrevCreatedAt(){return this.prevCreatedAt}getValue(){return this.value}}class Nn extends Pt{constructor(n,r,i,s){super(n,s);m(this,"prevCreatedAt");m(this,"createdAt");this.prevCreatedAt=r,this.createdAt=i}static create(n,r,i,s){return new Nn(n,r,i,s)}execute(n){const r=n.findByCreatedAt(this.getParentCreatedAt());if(!r)throw new T(S.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(r instanceof tt))throw new T(S.ErrInvalidArgument,"fail to execute, only array can execute move");const i=r,s=Number(i.subPathOf(this.createdAt));i.moveAfter(this.prevCreatedAt,this.createdAt,this.getExecutedAt());const o=Number(i.subPathOf(this.createdAt));return{opInfos:[{type:"move",path:n.createPath(this.getParentCreatedAt()),index:o,previousIndex:s}]}}getEffectedCreatedAt(){return this.createdAt}toTestString(){return`${this.getParentCreatedAt().toTestString()}.MOVE`}getPrevCreatedAt(){return this.prevCreatedAt}getCreatedAt(){return this.createdAt}}class nr{constructor(e,n,r,i){m(this,"key");m(this,"value");m(this,"updatedAt");m(this,"_isRemoved");this.key=e,this.value=n,this.updatedAt=r,this._isRemoved=i}static of(e,n,r,i){return new nr(e,n,r,i)}getKey(){return this.key}getValue(){return this.value}getUpdatedAt(){return this.updatedAt}isRemoved(){return this._isRemoved}toIDString(){return`${this.updatedAt.toIDString()}:${this.key}`}getRemovedAt(){if(this._isRemoved)return this.updatedAt}}class dn{constructor(){m(this,"nodeMapByKey");m(this,"numberOfRemovedElement");this.nodeMapByKey=new Map,this.numberOfRemovedElement=0}static create(){return new dn}getNodeMapByKey(){return this.nodeMapByKey}set(e,n,r){const i=this.nodeMapByKey.get(e);if(i&&i.isRemoved()&&r.after(i.getUpdatedAt())&&(this.numberOfRemovedElement-=1),i===void 0||r.after(i.getUpdatedAt())){const s=nr.of(e,n,r,!1);return this.nodeMapByKey.set(e,s),i!==void 0&&i.isRemoved()?[i,s]:[void 0,s]}return i.isRemoved()?[i,void 0]:[void 0,void 0]}setInternal(e,n,r,i){const s=nr.of(e,n,r,i);this.nodeMapByKey.set(e,s),i&&this.numberOfRemovedElement++}remove(e,n){const r=this.nodeMapByKey.get(e),i=[];if(r===void 0||n.after(r.getUpdatedAt())){if(r===void 0){this.numberOfRemovedElement+=1;const a=nr.of(e,"",n,!0);return this.nodeMapByKey.set(e,a),i.push(a),i}const s=r.isRemoved();s||(this.numberOfRemovedElement+=1),s&&i.push(r);const o=nr.of(e,r.getValue(),n,!0);return this.nodeMapByKey.set(e,o),i.push(o),i}return i}has(e){if(this.nodeMapByKey.has(e)){const n=this.nodeMapByKey.get(e);return n!==void 0&&!n.isRemoved()}return!1}get(e){if(this.nodeMapByKey.has(e))return this.nodeMapByKey.get(e).getValue()}deepcopy(){const e=new dn;for(const[,n]of this.nodeMapByKey)e.setInternal(n.getKey(),n.getValue(),n.getUpdatedAt(),n.isRemoved());return e}toJSON(){if(!this.size())return"{}";const e=[];for(const[n,r]of this.nodeMapByKey)r.isRemoved()||e.push(`"${Jt(n)}":"${Jt(r.getValue())}"`);return`{${e.join(",")}}`}size(){return this.nodeMapByKey.size-this.numberOfRemovedElement}toObject(){const e={};for(const[n,r]of this.nodeMapByKey)r.isRemoved()||(e[n]=r.getValue());return e}*[Symbol.iterator](){for(const[,e]of this.nodeMapByKey)yield e}purge(e){const n=this.nodeMapByKey.get(e.getKey());n==null||n.toIDString()!=e.toIDString()||(this.nodeMapByKey.delete(e.getKey()),this.numberOfRemovedElement--)}}class ss{constructor(e){m(this,"attributes");m(this,"content");this.attributes=dn.create(),this.content=e}static create(e){return new ss(e)}get length(){return this.content.length}substring(e,n){const r=new ss(this.content.substring(e,n));return r.attributes=this.attributes.deepcopy(),r}setAttr(e,n,r){return this.attributes.set(e,n,r)}getAttrs(){return this.attributes}toString(){return this.content}toJSON(){const e=Jt(this.content),n=this.attributes.toObject(),r=[];for(const[i,s]of Object.entries(n)){const o=JSON.parse(s),a=typeof o=="string"?`"${Jt(i)}":"${Jt(o)}"`:`"${Jt(i)}":${String(o)}`;r.push(a)}return r.sort(),r.length===0?`{"val":"${e}"}`:`{"attrs":{${r.join(",")}},"val":"${e}"}`}getAttributes(){return this.attributes.toObject()}getContent(){return this.content}purge(e){this.attributes&&e instanceof nr&&this.attributes.purge(e)}getGCPairs(){const e=[];for(const n of this.attributes)n.getRemovedAt()&&e.push({parent:this,child:n});return e}}class gt extends hs{constructor(n,r){super(r);m(this,"rgaTreeSplit");this.rgaTreeSplit=n}static create(n,r){return new gt(n,r)}edit(n,r,i,s,o){const a=r?ss.create(r):void 0;if(a&&s)for(const[d,v]of Object.entries(s))a.setAttr(d,v,i);const[l,u,c,h]=this.rgaTreeSplit.edit(n,i,a,o),g=h.map(d=>({...d,value:d.value?{attributes:Ur(d.value.getAttributes()),content:d.value.getContent()}:{attributes:void 0,content:""},type:"content"}));return[u,g,c,[l,l]]}setStyle(n,r,i,s){const[,o]=this.rgaTreeSplit.findNodeWithSplit(n[1],i),[,a]=this.rgaTreeSplit.findNodeWithSplit(n[0],i),l=[],u=this.rgaTreeSplit.findBetween(a,o),c=new Map,h=[];for(const d of u){const v=d.getCreatedAt().getActorID(),I=s!=null&&s.size?s.has(v)?s.get(v):Nt:_i;if(d.canStyle(i,I)){const O=c.get(v),p=d.getCreatedAt();(!O||p.after(O))&&c.set(v,p),h.push(d)}}const g=[];for(const d of h){if(d.isRemoved())continue;const[v,I]=this.rgaTreeSplit.findIndexesFromRange(d.createPosRange());l.push({type:"style",actor:i.getActorID(),from:v,to:I,value:{attributes:Ur(r)}});for(const[O,p]of Object.entries(r)){const[f]=d.getValue().setAttr(O,p,i);f!==void 0&&g.push({parent:d.getValue(),child:f})}}return[c,g,l]}indexRangeToPosRange(n,r){const i=this.rgaTreeSplit.indexToPos(n);return n===r?[i,i]:[i,this.rgaTreeSplit.indexToPos(r)]}get length(){return this.rgaTreeSplit.length}getTreeByIndex(){return this.rgaTreeSplit.getTreeByIndex()}getTreeByID(){return this.rgaTreeSplit.getTreeByID()}toJSON(){const n=[];for(const r of this.rgaTreeSplit)r.isRemoved()||n.push(r.getValue().toJSON());return`[${n.join(",")}]`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:JSON.parse(this.toJSON()),type:"YORKIE_TEXT"}}toString(){return this.rgaTreeSplit.toString()}values(){const n=[];for(const r of this.rgaTreeSplit)if(!r.isRemoved()){const i=r.getValue();n.push({attributes:Ur(i.getAttributes()),content:i.getContent()})}return n}getRGATreeSplit(){return this.rgaTreeSplit}toTestString(){return this.rgaTreeSplit.toTestString()}deepcopy(){const n=new gt(this.rgaTreeSplit.deepcopy(),this.getCreatedAt());return n.remove(this.getRemovedAt()),n}findIndexesFromRange(n){return this.rgaTreeSplit.findIndexesFromRange(n)}getGCPairs(){const n=[];for(const r of this.rgaTreeSplit){r.getRemovedAt()&&n.push({parent:this.rgaTreeSplit,child:r});for(const i of r.getValue().getGCPairs())n.push(i)}return n}}class ps extends Pt{constructor(n,r,i,s,o,a,l){super(n,l);m(this,"fromPos");m(this,"toPos");m(this,"maxCreatedAtMapByActor");m(this,"content");m(this,"attributes");this.fromPos=r,this.toPos=i,this.maxCreatedAtMapByActor=s,this.content=o,this.attributes=a}static create(n,r,i,s,o,a,l){return new ps(n,r,i,s,o,a,l)}execute(n){const r=n.findByCreatedAt(this.getParentCreatedAt());if(!r)throw new T(S.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(r instanceof gt))throw new T(S.ErrInvalidArgument,"fail to execute, only Text can execute edit");const i=r,[,s,o]=i.edit([this.fromPos,this.toPos],this.content,this.getExecutedAt(),Object.fromEntries(this.attributes),this.maxCreatedAtMapByActor);for(const a of o)n.registerGCPair(a);return{opInfos:s.map(({from:a,to:l,value:u})=>({type:"edit",from:a,to:l,value:u,path:n.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const n=this.getParentCreatedAt().toTestString(),r=this.fromPos.toTestString(),i=this.toPos.toTestString(),s=this.content;return`${n}.EDIT(${r},${i},${s})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getContent(){return this.content}getAttributes(){return this.attributes||new Map}getMaxCreatedAtMapByActor(){return this.maxCreatedAtMapByActor}}class ms extends Pt{constructor(n,r,i,s,o,a){super(n,a);m(this,"fromPos");m(this,"toPos");m(this,"maxCreatedAtMapByActor");m(this,"attributes");this.fromPos=r,this.toPos=i,this.maxCreatedAtMapByActor=s,this.attributes=o}static create(n,r,i,s,o,a){return new ms(n,r,i,s,o,a)}execute(n){const r=n.findByCreatedAt(this.getParentCreatedAt());if(!r)throw new T(S.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(r instanceof gt))throw new T(S.ErrInvalidArgument,"fail to execute, only Text can execute edit");const i=r,[,s,o]=i.setStyle([this.fromPos,this.toPos],this.attributes?Object.fromEntries(this.attributes):{},this.getExecutedAt(),this.maxCreatedAtMapByActor);for(const a of s)n.registerGCPair(a);return{opInfos:o.map(({from:a,to:l,value:u})=>({type:"style",from:a,to:l,value:u,path:n.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const n=this.getParentCreatedAt().toTestString(),r=this.fromPos.toTestString(),i=this.toPos.toTestString(),s=this.attributes;return`${n}.STYL(${r},${i},${JSON.stringify(s)})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getAttributes(){return this.attributes}getMaxCreatedAtMapByActor(){return this.maxCreatedAtMapByActor}}const Tw=2,kw="root",on="text";function yi(t,e){let n=0;const r=t.children;for(let i=0;i<e;i++){const s=r[i];!s||s.isRemoved||(n+=s.paddedSize)}return n}class Aw{constructor(e,n=[]){m(this,"type");m(this,"parent");m(this,"_children");m(this,"size");if(this.type=e,this.size=0,this._children=n,this.isText&&this._children.length>0)throw new T(S.ErrRefused,"Text node cannot have children")}updateAncestorsSize(){let e=this.parent;const n=this.isRemoved?-1:1;for(;e&&(e.size+=this.paddedSize*n,!e.isRemoved);)e=e.parent}updateDescendantsSize(){let e=0;for(const n of this._children){const r=n.updateDescendantsSize();n.isRemoved||(e+=r)}return this.size+=e,this.paddedSize}get isText(){return this.type===on}get paddedSize(){return this.size+(this.isText?0:Tw)}isAncestorOf(e){return Iw(this,e)}get nextSibling(){const e=this.parent.findOffset(this),n=this.parent.children[e+1];if(n)return n}get prevSibling(){const e=this.parent.findOffset(this),n=this.parent.children[e-1];if(n)return n}splitText(e,n){if(e===0||e===this.size)return;const r=this.value.slice(0,e),i=this.value.slice(e);if(!i.length)return;this.value=r;const s=this.cloneText(e+n);return s.value=i,this.parent.insertAfterInternal(s,this),s}get children(){return this._children.filter(e=>!e.isRemoved)}get allChildren(){return[...this._children]}hasTextChild(){return this.children.length>0&&this.children.every(e=>e.isText)}append(...e){if(this.isText)throw new T(S.ErrRefused,"Text node cannot have children");this._children.push(...e);for(const n of e)n.parent=this,n.updateAncestorsSize()}prepend(...e){if(this.isText)throw new T(S.ErrRefused,"Text node cannot have children");this._children.unshift(...e);for(const n of e)n.parent=this}insertBefore(e,n){if(this.isText)throw new T(S.ErrRefused,"Text node cannot have children");const r=this._children.indexOf(n);if(r===-1)throw new T(S.ErrInvalidArgument,"child not found");this.insertAtInternal(e,r),e.updateAncestorsSize()}insertAfter(e,n){if(this.isText)throw new T(S.ErrRefused,"Text node cannot have children");const r=this._children.indexOf(n);if(r===-1)throw new T(S.ErrInvalidArgument,"child not found");this.insertAtInternal(e,r+1),e.updateAncestorsSize()}insertAt(e,n){if(this.isText)throw new T(S.ErrRefused,"Text node cannot have children");this.insertAtInternal(e,n),e.updateAncestorsSize()}removeChild(e){if(this.isText)throw new T(S.ErrRefused,"Text node cannot have children");const n=this._children.indexOf(e);if(n===-1)throw new T(S.ErrInvalidArgument,"child not found");this._children.splice(n,1),e.parent=void 0}splitElement(e,n){const r=this.cloneElement(n);this.parent.insertAfterInternal(r,this),r.updateAncestorsSize();const i=this.children.slice(0,e),s=this.children.slice(e);this._children=i,r._children=s,this.size=this._children.reduce((o,a)=>o+a.paddedSize,0),r.size=r._children.reduce((o,a)=>o+a.paddedSize,0);for(const o of r._children)o.parent=r;return r}insertAfterInternal(e,n){if(this.isText)throw new T(S.ErrRefused,"Text node cannot have children");const r=this._children.indexOf(n);if(r===-1)throw new T(S.ErrInvalidArgument,"child not found");this.insertAtInternal(e,r+1)}insertAtInternal(e,n){if(this.isText)throw new T(S.ErrRefused,"Text node cannot have children");this._children.splice(n,0,e),e.parent=this}findOffset(e){if(this.isText)throw new T(S.ErrRefused,"Text node cannot have children");if(e.isRemoved){const n=this._children.indexOf(e);return this.allChildren.splice(0,n).filter(i=>!i.isRemoved).length}return this.children.indexOf(e)}findBranchOffset(e){if(this.isText)throw new T(S.ErrRefused,"Text node cannot have children");let n=e;for(;n;){const r=this._children.indexOf(n);if(r!==-1)return r;n=n.parent}return-1}}function Iw(t,e){if(t===e)return!1;for(;e.parent;){if(e.parent===t)return!0;e=e.parent}return!1}var fe=(t=>(t.Start="Start",t.End="End",t.Text="Text",t))(fe||{});function vp(t,e,n,r){if(e>n)throw new T(S.ErrInvalidArgument,`from is greater than to: ${e} > ${n}`);if(e>t.size)throw new T(S.ErrInvalidArgument,`from is out of range: ${e} > ${t.size}`);if(n>t.size)throw new T(S.ErrInvalidArgument,`to is out of range: ${n} > ${t.size}`);if(e===n)return;let i=0;for(const s of t.children){if(e-s.paddedSize<i&&i<n){const o=s.isText?e-i:e-i-1,a=s.isText?n-i:n-i-1,l=!s.isText&&o<0,u=!s.isText&&a>s.size;(s.isText||l)&&r([s,s.isText?"Text":"Start"],u),vp(s,Math.max(0,o),Math.min(a,s.size),r),u&&r([s,"End"],u)}i+=s.paddedSize}}function wp(t,e,n=0){for(const r of t.children)wp(r,e,n+1);e(t,n)}function oa(t,e,n=0){for(const r of t._children)oa(r,e,n+1);e(t,n)}function ql(t,e,n=!0){if(e>t.size)throw new T(S.ErrInvalidArgument,`index is out of range: ${e} > ${t.size}`);if(t.isText)return{node:t,offset:e};let r=0,i=0;for(const s of t.children){if(n&&s.isText&&s.size>=e-i)return ql(s,e-i,n);if(e===i)return{node:t,offset:r};if(!n&&s.paddedSize===e-i)return{node:t,offset:r+1};if(s.paddedSize>e-i)return ql(s,e-i-1,n);i+=s.paddedSize,r+=1}return{node:t,offset:r}}function Sp(t){return t.isText||t.children.length===0?t:Sp(t.children[0])}function Ew(t,e){if(t.size<e)throw new T(S.ErrInvalidArgument,"unacceptable path");for(let n=0;n<t.children.length;n++){const r=t.children[n];if(r.size<e)e-=r.size;else{t=r;break}}return{node:t,offset:e}}class Nw{constructor(e){m(this,"root");this.root=e}tokensBetween(e,n,r){vp(this.root,e,n,r)}traverse(e){wp(this.root,e,0)}traverseAll(e){oa(this.root,e,0)}findTreePos(e,n=!0){return ql(this.root,e,n)}treePosToPath(e){const n=[];let r=e.node;if(r.isText){const i=r.parent.findOffset(r);if(i===-1)throw new T(S.ErrInvalidArgument,"invalid treePos");const s=yi(r.parent,i);n.push(s+e.offset),r=r.parent}else if(r.hasTextChild()){const i=yi(r,e.offset);n.push(i)}else n.push(e.offset);for(;r.parent;){const i=r.parent.findOffset(r);if(i===-1)throw new T(S.ErrInvalidArgument,"invalid treePos");n.push(i),r=r.parent}return n.reverse()}pathToIndex(e){const n=this.pathToTreePos(e);return this.indexOf(n)}pathToTreePos(e){if(!e.length)throw new T(S.ErrInvalidArgument,"unacceptable path");let n=this.root;for(let r=0;r<e.length-1;r++){const i=e[r];if(n=n.children[i],!n)throw new T(S.ErrInvalidArgument,"unacceptable path")}if(n.hasTextChild())return Ew(n,e[e.length-1]);if(n.children.length<e[e.length-1])throw new T(S.ErrInvalidArgument,"unacceptable path");return{node:n,offset:e[e.length-1]}}getRoot(){return this.root}get size(){return this.root.size}findPostorderRight(e){const{node:n,offset:r}=e;if(n.isText){if(n.size===r){const i=n.nextSibling;return i||n.parent}return n}return n.children.length===r?n:Sp(n.children[r])}indexOf(e){let{node:n}=e;const{offset:r}=e;let i=0,s=1;if(n.isText){i+=r;const o=n.parent,a=o.findOffset(n);if(a===-1)throw new T(S.ErrInvalidArgument,"invalid pos");i+=yi(o,a),n=n.parent}else i+=yi(n,r);for(;n!=null&&n.parent;){const o=n.parent,a=o.findOffset(n);if(a===-1)throw new T(S.ErrInvalidArgument,"invalid pos");i+=yi(o,a),s++,n=n.parent}return i+s-1}indexToPath(e){const n=this.findTreePos(e);return this.treePosToPath(n)}}const xw=(t,e)=>t===e?0:t<e?-1:1;class Cw{constructor(e,n,r){m(this,"key");m(this,"value");m(this,"parent");m(this,"left");m(this,"right");m(this,"isRed");this.key=e,this.value=n,this.isRed=r}}class Pw{constructor(e){m(this,"stack");this.stack=[],this.traverseInorder(e)}traverseInorder(e){e&&(this.traverseInorder(e.left),this.stack.push({key:e.key,value:e.value}),this.traverseInorder(e.right))}}class Tp{constructor(e){m(this,"root");m(this,"comparator");m(this,"counter");this.comparator=typeof e<"u"?e:xw,this.counter=0}put(e,n){return this.root=this.putInternal(e,n,this.root),this.root.isRed=!1,n}get(e){const n=this.getInternal(e,this.root);return n?n.value:void 0}remove(e){!this.isRed(this.root.left)&&!this.isRed(this.root.right)&&(this.root.isRed=!0),this.root=this.removeInternal(this.root,e),this.root&&(this.root.isRed=!1)}getIterator(){return new Pw(this.root)}values(){const e=[];for(const n of this.getIterator().stack)e.push(n.value);return e}floorEntry(e){let n=this.root;for(;n;){const r=this.comparator(e,n.key);if(r>0)if(n.right)n.right.parent=n,n=n.right;else return n;else if(r<0)if(n.left)n.left.parent=n,n=n.left;else{let i=n.parent,s=n;for(;i&&s===i.left;)s=i,i=i.parent;return i}else return n}}lastEntry(){if(!this.root)return this.root;let e=this.root;for(;e.right;)e=e.right;return e}size(){return this.counter}isEmpty(){return this.counter===0}getInternal(e,n){for(;n;){const r=this.comparator(e,n.key);if(r===0)return n;r<0?n=n.left:r>0&&(n=n.right)}}putInternal(e,n,r){if(!r)return this.counter+=1,new Cw(e,n,!0);const i=this.comparator(e,r.key);return i<0?r.left=this.putInternal(e,n,r.left):i>0?r.right=this.putInternal(e,n,r.right):r.value=n,this.isRed(r.right)&&!this.isRed(r.left)&&(r=this.rotateLeft(r)),this.isRed(r.left)&&this.isRed(r.left.left)&&(r=this.rotateRight(r)),this.isRed(r.left)&&this.isRed(r.right)&&this.flipColors(r),r}removeInternal(e,n){if(this.comparator(n,e.key)<0)!this.isRed(e.left)&&!this.isRed(e.left.left)&&(e=this.moveRedLeft(e)),e.left=this.removeInternal(e.left,n);else{if(this.isRed(e.left)&&(e=this.rotateRight(e)),this.comparator(n,e.key)===0&&!e.right){this.counter-=1;return}if(!this.isRed(e.right)&&!this.isRed(e.right.left)&&(e=this.moveRedRight(e)),this.comparator(n,e.key)===0){this.counter-=1;const r=this.min(e.right);e.value=r.value,e.key=r.key,e.right=this.removeMin(e.right)}else e.right=this.removeInternal(e.right,n)}return this.fixUp(e)}min(e){return e.left?this.min(e.left):e}removeMin(e){if(e.left)return!this.isRed(e.left)&&!this.isRed(e.left.left)&&(e=this.moveRedLeft(e)),e.left=this.removeMin(e.left),this.fixUp(e)}fixUp(e){return this.isRed(e.right)&&(e=this.rotateLeft(e)),this.isRed(e.left)&&this.isRed(e.left.left)&&(e=this.rotateRight(e)),this.isRed(e.left)&&this.isRed(e.right)&&this.flipColors(e),e}moveRedLeft(e){return this.flipColors(e),this.isRed(e.right.left)&&(e.right=this.rotateRight(e.right),e=this.rotateLeft(e),this.flipColors(e)),e}moveRedRight(e){return this.flipColors(e),this.isRed(e.left.left)&&(e=this.rotateRight(e),this.flipColors(e)),e}isRed(e){return e&&e.isRed}rotateLeft(e){const n=e.right;return e.right=n.left,n.left=e,n.isRed=n.left.isRed,n.left.isRed=!0,n}rotateRight(e){const n=e.left;return e.left=n.right,n.right=e,n.isRed=n.right.isRed,n.right.isRed=!0,n}flipColors(e){e.isRed=!e.isRed,e.left.isRed=!e.left.isRed,e.right.isRed=!e.right.isRed}}class At{constructor(e,n){m(this,"parentID");m(this,"leftSiblingID");this.parentID=e,this.leftSiblingID=n}static of(e,n){return new At(e,n)}static fromTreePos(e){const{offset:n}=e;let{node:r}=e,i;return r.isText?(r.parent.children[0]===r&&n===0?i=r.parent:i=r,r=r.parent):n===0?i=r:i=r.children[n-1],At.of(r.id,Ie.of(i.getCreatedAt(),i.getOffset()+n))}getParentID(){return this.parentID}static fromStruct(e){return At.of(Ie.of(qe.fromStruct(e.parentID.createdAt),e.parentID.offset),Ie.of(qe.fromStruct(e.leftSiblingID.createdAt),e.leftSiblingID.offset))}toStruct(){return{parentID:{createdAt:this.getParentID().getCreatedAt().toStruct(),offset:this.getParentID().getOffset()},leftSiblingID:{createdAt:this.getLeftSiblingID().getCreatedAt().toStruct(),offset:this.getLeftSiblingID().getOffset()}}}toTreeNodePair(e){const n=this.getParentID(),r=this.getLeftSiblingID(),i=e.findFloorNode(n);let s=e.findFloorNode(r);if(!i||!s)throw new T(S.ErrRefused,`cannot find node of CRDTTreePos(${n.toTestString()}, ${r.toTestString()})`);return!r.equals(n)&&r.getOffset()>0&&r.getOffset()===s.id.getOffset()&&s.insPrevID&&(s=e.findFloorNode(s.insPrevID)),[i,s]}getLeftSiblingID(){return this.leftSiblingID}equals(e){return this.getParentID().getCreatedAt().equals(e.getParentID().getCreatedAt())&&this.getParentID().getOffset()===e.getParentID().getOffset()&&this.getLeftSiblingID().getCreatedAt().equals(e.getLeftSiblingID().getCreatedAt())&&this.getLeftSiblingID().getOffset()===e.getLeftSiblingID().getOffset()}}class Ie{constructor(e,n){m(this,"createdAt");m(this,"offset");this.createdAt=e,this.offset=n}static of(e,n){return new Ie(e,n)}static fromStruct(e){return Ie.of(qe.fromStruct(e.createdAt),e.offset)}static createComparator(){return(e,n)=>{const r=e.getCreatedAt().compare(n.getCreatedAt());return r!==0?r:e.getOffset()>n.getOffset()?1:e.getOffset()<n.getOffset()?-1:0}}getCreatedAt(){return this.createdAt}equals(e){return this.createdAt.compare(e.createdAt)===0&&this.offset===e.offset}getOffset(){return this.offset}setOffset(e){this.offset=e}toStruct(){return{createdAt:this.createdAt.toStruct(),offset:this.offset}}toIDString(){return`${this.createdAt.toIDString()}:${this.offset}`}toTestString(){return`${this.createdAt.toTestString()}/${this.offset}`}}class Ze extends Aw{constructor(n,r,i,s,o){super(r);m(this,"id");m(this,"removedAt");m(this,"attrs");m(this,"insPrevID");m(this,"insNextID");m(this,"_value","");this.id=n,this.removedAt=o,s&&(this.attrs=s),typeof i=="string"?this.value=i:Array.isArray(i)&&(this._children=i)}toIDString(){return this.id.toIDString()}getRemovedAt(){return this.removedAt}static create(n,r,i,s){return new Ze(n,r,i,s)}deepcopy(){var r;const n=new Ze(this.id,this.type);return n.removedAt=this.removedAt,n._value=this._value,n.size=this.size,n.attrs=(r=this.attrs)==null?void 0:r.deepcopy(),n._children=this._children.map(i=>{const s=i.deepcopy();return s.parent=n,s}),n.insPrevID=this.insPrevID,n.insNextID=this.insNextID,n}get value(){if(!this.isText)throw new T(S.ErrInvalidType,`cannot get value of element node: ${this.type}`);return this._value}set value(n){if(!this.isText)throw new T(S.ErrInvalidType,`cannot set value of element node: ${this.type}`);this._value=n,this.size=n.length}get isRemoved(){return!!this.removedAt}remove(n){const r=!this.removedAt;(!this.removedAt||this.removedAt.compare(n)>0)&&(this.removedAt=n),r&&this.updateAncestorsSize()}cloneText(n){return new Ze(Ie.of(this.id.getCreatedAt(),n),this.type,void 0,void 0,this.removedAt)}cloneElement(n){return new Ze(Ie.of(n(),0),this.type,void 0,void 0,this.removedAt)}split(n,r,i){const s=this.isText?this.splitText(r,this.id.getOffset()):this.splitElement(r,i);if(s){if(s.insPrevID=this.id,this.insNextID){const o=n.findFloorNode(this.insNextID);o.insPrevID=s.id,s.insNextID=this.insNextID}this.insNextID=s.id,n.registerNode(s)}return s}getCreatedAt(){return this.id.getCreatedAt()}getOffset(){return this.id.getOffset()}canDelete(n,r){return!this.getCreatedAt().after(r)&&(!this.removedAt||n.after(this.removedAt))}canStyle(n,r){return this.isText?!1:!this.getCreatedAt().after(r)&&(!this.removedAt||n.after(this.removedAt))}setAttrs(n,r){this.attrs||(this.attrs=new dn);const i=new Array;for(const[s,o]of Object.entries(n))i.push(this.attrs.set(s,o,r));return i}purge(n){this.attrs&&this.attrs.purge(n)}getGCPairs(){const n=[];if(!this.attrs)return n;for(const r of this.attrs)r.getRemovedAt()&&n.push({parent:this,child:r});return n}}function Hl(t){var n;if(t.isText){const r=t;return{type:r.type,value:r.value}}const e={type:t.type,children:t.children.map(Hl)};return t.attrs&&(e.attributes=Ur((n=t.attrs)==null?void 0:n.toObject())),e}function ec(t){if(t.isText)return t.value;let e="";return t.attrs&&t.attrs.size()&&(e=" "+Array.from(t.attrs).filter(n=>!n.isRemoved()).sort((n,r)=>n.getKey().localeCompare(r.getKey())).map(n=>{const r=JSON.parse(n.getValue());return typeof r=="string"?`${n.getKey()}="${r}"`:`${n.getKey()}="${Jt(n.getValue())}"`}).join(" ")),`<${t.type}${e}>${t.children.map(n=>ec(n)).join("")}</${t.type}>`}function kp(t){if(t.isText){const e=t;return{type:e.type,value:e.value,size:e.size,isRemoved:e.isRemoved}}return{type:t.type,children:t.children.map(kp),size:t.size,isRemoved:t.isRemoved}}class pt extends hs{constructor(n,r){super(r);m(this,"indexTree");m(this,"nodeMapByID");this.indexTree=new Nw(n),this.nodeMapByID=new Tp(Ie.createComparator()),this.indexTree.traverseAll(i=>{this.nodeMapByID.put(i.id,i)})}static create(n,r){return new pt(n,r)}findFloorNode(n){const r=this.nodeMapByID.floorEntry(n);if(!(!r||!r.key.getCreatedAt().equals(n.getCreatedAt())))return r.value}registerNode(n){this.nodeMapByID.put(n.id,n)}findNodesAndSplitText(n,r){const[i,s]=n.toTreeNodePair(this);let o=s;const a=i===o,l=o.parent&&!a?o.parent:i;if(o.isText&&o.split(this,n.getLeftSiblingID().getOffset()-o.id.getOffset()),r){const u=l.allChildren,c=a?0:u.indexOf(o)+1;for(let h=c;h<u.length;h++){const g=u[h];if(!g.id.getCreatedAt().after(r))break;o=g}}return[l,o]}style(n,r,i,s){const[o,a]=this.findNodesAndSplitText(n[0],i),[l,u]=this.findNodesAndSplitText(n[1],i),c=[],h=r?Ur(r):{},g=new Map,d=[];return this.traverseInPosRange(o,a,l,u,([v])=>{const I=v.getCreatedAt().getActorID(),O=s?s.has(I)?s.get(I):Nt:_i;if(v.canStyle(i,O)&&r){const p=g.get(I),f=v.getCreatedAt();(!p||f.after(p))&&g.set(I,f);const y=v.setAttrs(r,i),k=y.reduce((P,[,_])=>(_&&(P[_.getKey()]=h[_.getKey()]),P),{}),N=v.parent,C=v.prevSibling||v.parent;Object.keys(k).length>0&&c.push({type:"style",from:this.toIndex(N,C),to:this.toIndex(v,v),fromPath:this.toPath(N,C),toPath:this.toPath(v,v),actor:i.getActorID(),value:k});for(const[P]of y)P&&d.push({parent:v,child:P})}}),[g,d,c]}removeStyle(n,r,i,s){const[o,a]=this.findNodesAndSplitText(n[0],i),[l,u]=this.findNodesAndSplitText(n[1],i),c=[],h=new Map,g=[];return this.traverseInPosRange(o,a,l,u,([d])=>{const v=d.getCreatedAt().getActorID(),I=s?s.has(v)?s.get(v):Nt:_i;if(d.canStyle(i,I)&&r){const O=h.get(v),p=d.getCreatedAt();(!O||p.after(O))&&h.set(v,p),d.attrs||(d.attrs=new dn);for(const k of r){const N=d.attrs.remove(k,i);for(const C of N)g.push({parent:d,child:C})}const f=d.parent,y=d.prevSibling||d.parent;c.push({actor:i.getActorID(),type:"removeStyle",from:this.toIndex(f,y),to:this.toIndex(d,d),fromPath:this.toPath(f,y),toPath:this.toPath(d,d),value:r})}}),[h,g,c]}edit(n,r,i,s,o,a){const[l,u]=this.findNodesAndSplitText(n[0],s),[c,h]=this.findNodesAndSplitText(n[1],s),g=this.toIndex(l,u),d=this.toPath(l,u),v=[],I=[],O=[],p=new Map;this.traverseInPosRange(l,u,c,h,([k,N],C)=>{if(N===fe.Start&&!C)for(const W of k.children)O.push(W);const P=k.getCreatedAt().getActorID(),_=a?a.has(P)?a.get(P):Nt:_i;if(k.canDelete(s,_)||v.includes(k.parent)){const W=p.get(P),U=k.getCreatedAt();(!W||U.after(W))&&p.set(P,U),(N===fe.Text||N===fe.Start)&&v.push(k),I.push([k,N])}});const f=this.makeDeletionChanges(I,s),y=[];for(const k of v)k.remove(s),k.isRemoved&&y.push({parent:this,child:k});for(const k of O)k.removedAt||l.append(k);if(i>0){let k=0,N=l,C=u;for(;k<i;)N.split(this,N.findOffset(C)+1,o),C=N,N=N.parent,k++;f.push({type:"content",from:g,to:g,fromPath:d,toPath:d,actor:s.getActorID()})}if(r!=null&&r.length){const k=[];let N=u;for(const C of r)N===l?l.insertAt(C,0):l.insertAfter(C,N),N=C,oa(C,P=>{l.isRemoved&&(P.remove(s),y.push({parent:this,child:P})),this.nodeMapByID.put(P.id,P)}),C.isRemoved||k.push(C);if(k.length){const C=k.map(P=>Hl(P));f.length&&f[f.length-1].from===g?f[f.length-1].value=C:f.push({type:"content",from:g,to:g,fromPath:d,toPath:d,actor:s.getActorID(),value:C})}}return[f,y,p]}editT(n,r,i,s,o){const a=this.findPos(n[0]),l=this.findPos(n[1]);this.edit([a,l],r,i,s,o)}move(n,r,i){throw new T(S.ErrUnimplemented,`not implemented: ${n}, ${r}, ${i}`)}purge(n){var s;(s=n.parent)==null||s.removeChild(n),this.nodeMapByID.remove(n.id);const r=n.insPrevID,i=n.insNextID;if(r){const o=this.findFloorNode(r);o.insNextID=i}if(i){const o=this.findFloorNode(i);o.insPrevID=r}n.insPrevID=void 0,n.insNextID=void 0}getGCPairs(){const n=[];return this.indexTree.traverse(r=>{r.getRemovedAt()&&n.push({parent:this,child:r});for(const i of r.getGCPairs())n.push(i)}),n}findPos(n,r=!0){const i=this.indexTree.findTreePos(n,r);return At.fromTreePos(i)}pathToPosRange(n){const r=this.pathToIndex(n);return[this.findPos(r),this.findPos(r+1)]}pathToPos(n){const r=this.indexTree.pathToIndex(n);return this.findPos(r)}getRoot(){return this.indexTree.getRoot()}getSize(){return this.indexTree.size}getNodeSize(){return this.nodeMapByID.size()}getIndexTree(){return this.indexTree}toXML(){return ec(this.indexTree.getRoot())}toJSON(){return JSON.stringify(this.getRootTreeNode())}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:JSON.parse(this.toJSON()),type:"YORKIE_TREE"}}toJSInfoForTest(){const n=this.indexTree.getRoot(),r=(i,s=void 0,o=void 0,a=0)=>{var d,v,I,O;let l,u,c;const h=i.isText?{node:i,offset:0}:s&&o?this.toTreePos(s,o):null;h&&(l=this.indexTree.indexOf(h),u=this.indexTree.treePosToPath(h),c=At.fromTreePos(h).toStruct());const g={type:i.type,parent:s==null?void 0:s.id.toTestString(),size:i.size,id:i.id.toTestString(),removedAt:(d=i.removedAt)==null?void 0:d.toTestString(),insPrev:(v=i.insPrevID)==null?void 0:v.toTestString(),insNext:(I=i.insNextID)==null?void 0:I.toTestString(),value:i.isText?i.value:void 0,isRemoved:i.isRemoved,children:[],depth:a,attributes:i.attrs?Ur((O=i.attrs)==null?void 0:O.toObject()):void 0,index:l,path:u,pos:c};for(let p=0;p<i.allChildren.length;p++){const f=p===0?i:i.allChildren[p-1];g.children.push(r(i.allChildren[p],i,f,a+1))}return g};return r(n)}getRootTreeNode(){return Hl(this.indexTree.getRoot())}toTestTreeNode(){return kp(this.indexTree.getRoot())}toSortedJSON(){return this.toJSON()}deepcopy(){const n=this.getRoot();return new pt(n.deepcopy(),this.getCreatedAt())}toPath(n,r){const i=this.toTreePos(n,r);return i?this.indexTree.treePosToPath(i):[]}toIndex(n,r){const i=this.toTreePos(n,r);return i?this.indexTree.indexOf(i):-1}indexToPath(n){return this.indexTree.indexToPath(n)}pathToIndex(n){return this.indexTree.pathToIndex(n)}indexRangeToPosRange(n){const r=this.findPos(n[0]);return n[0]===n[1]?[r,r]:[r,this.findPos(n[1])]}indexRangeToPosStructRange(n){const[r,i]=n,s=this.findPos(r);return r===i?[s.toStruct(),s.toStruct()]:[s.toStruct(),this.findPos(i).toStruct()]}posRangeToPathRange(n){const[r,i]=this.findNodesAndSplitText(n[0]),[s,o]=this.findNodesAndSplitText(n[1]);return[this.toPath(r,i),this.toPath(s,o)]}posRangeToIndexRange(n){const[r,i]=this.findNodesAndSplitText(n[0]),[s,o]=this.findNodesAndSplitText(n[1]);return[this.toIndex(r,i),this.toIndex(s,o)]}traverseInPosRange(n,r,i,s,o){const a=this.toIndex(n,r),l=this.toIndex(i,s);return this.indexTree.tokensBetween(a,l,o)}toTreePos(n,r){if(!n||!r)return;if(n.isRemoved){let s;for(;n.isRemoved;)s=n,n=s.parent;const o=n.findOffset(s);return{node:n,offset:o}}if(n===r)return{node:n,offset:0};let i=n.findOffset(r);if(!r.isRemoved){if(r.isText)return{node:r,offset:r.paddedSize};i++}return{node:n,offset:i}}makeDeletionChanges(n,r){const i=[],s=[];let o=null,a=null;for(let l=0;l<n.length;l++){const u=n[l],c=n[l+1];o||(o=u),a=u;const h=this.findRightToken(u);(!h||!c||h[0]!==c[0]||h[1]!==c[1])&&(s.push([o,a]),o=null,a=null)}for(const l of s){const[u,c]=l,[h,g]=this.findLeftToken(u),[d,v]=c,I=g===fe.Start?h:h.parent,O=v===fe.Start?d:d.parent,p=this.toIndex(I,h),f=this.toIndex(O,d);p<f&&(i.length>0&&p===i[i.length-1].to?(i[i.length-1].to=f,i[i.length-1].toPath=this.toPath(O,d)):i.push({type:"content",from:p,to:f,fromPath:this.toPath(I,h),toPath:this.toPath(O,d),actor:r.getActorID()}))}return i.reverse()}findRightToken([n,r]){if(r===fe.Start){const l=n.allChildren;return l.length>0?[l[0],l[0].isText?fe.Text:fe.Start]:[n,fe.End]}const i=n.parent,s=i.allChildren,o=s.indexOf(n);if(i&&o===s.length-1)return[i,fe.End];const a=s[o+1];return[a,a.isText?fe.Text:fe.Start]}findLeftToken([n,r]){if(r===fe.End){const l=n.allChildren;if(l.length>0){const u=l[l.length-1];return[u,u.isText?fe.Text:fe.End]}return[n,fe.Start]}const i=n.parent,s=i.allChildren,o=s.indexOf(n);if(i&&o===0)return[i,fe.Start];const a=s[o-1];return[a,a.isText?fe.Text:fe.End]}}class ys extends Pt{constructor(n,r,i,s,o,a,l){super(n,l);m(this,"fromPos");m(this,"toPos");m(this,"contents");m(this,"splitLevel");m(this,"maxCreatedAtMapByActor");this.fromPos=r,this.toPos=i,this.contents=s,this.splitLevel=o,this.maxCreatedAtMapByActor=a}static create(n,r,i,s,o,a,l){return new ys(n,r,i,s,o,a,l)}execute(n){var l;const r=n.findByCreatedAt(this.getParentCreatedAt());if(!r)throw new T(S.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(r instanceof pt))throw new T(S.ErrInvalidArgument,"fail to execute, only Tree can execute edit");const i=this.getExecutedAt(),s=r,[o,a]=s.edit([this.fromPos,this.toPos],(l=this.contents)==null?void 0:l.map(u=>u.deepcopy()),this.splitLevel,i,(()=>{let u=i.getDelimiter();return this.contents!==void 0&&(u+=this.contents.length),()=>qe.of(i.getLamport(),++u,i.getActorID())})(),this.maxCreatedAtMapByActor);for(const u of a)n.registerGCPair(u);return{opInfos:o.map(({from:u,to:c,value:h,splitLevel:g,fromPath:d,toPath:v})=>({type:"tree-edit",path:n.createPath(this.getParentCreatedAt()),from:u,to:c,value:h,splitLevel:g,fromPath:d,toPath:v}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const n=this.getParentCreatedAt().toTestString(),r=`${this.fromPos.getLeftSiblingID().getCreatedAt().toTestString()}/${this.fromPos.getLeftSiblingID().getOffset()}`,i=`${this.toPos.getLeftSiblingID().getCreatedAt().toTestString()}/${this.toPos.getLeftSiblingID().getOffset()}`,s=this.contents||[];return`${n}.EDIT(${r},${i},${s.map(o=>ec(o)).join("")})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getContents(){return this.contents}getSplitLevel(){return this.splitLevel}getMaxCreatedAtMapByActor(){return this.maxCreatedAtMapByActor}}class An{constructor(e,n,r,i){m(this,"clientSeq");m(this,"serverSeq");m(this,"lamport");m(this,"actor");this.clientSeq=e,this.serverSeq=i,this.lamport=n,this.actor=r}static of(e,n,r,i){return new An(e,n,r,i)}next(){return new An(this.clientSeq+1,this.lamport.add(1),this.actor)}syncLamport(e){return e.greaterThan(this.lamport)?new An(this.clientSeq,e,this.actor):new An(this.clientSeq,this.lamport.add(1),this.actor)}createTimeTicket(e){return qe.of(this.lamport,e,this.actor)}setActor(e){return new An(this.clientSeq,this.lamport,e,this.serverSeq)}getClientSeq(){return this.clientSeq}getServerSeq(){return this.serverSeq?this.serverSeq.toString():""}getLamport(){return this.lamport}getLamportAsString(){return this.lamport.toString()}getActorID(){return this.actor}toTestString(){return`${this.lamport.toString()}:${this.actor.slice(-2)}:${this.clientSeq}`}}const Ow=new An(0,B.fromInt(0,!0),sa);class ei{constructor({id:e,operations:n,presenceChange:r,message:i}){m(this,"id");m(this,"operations");m(this,"presenceChange");m(this,"message");this.id=e,this.operations=n||[],this.presenceChange=r,this.message=i}static create({id:e,operations:n,presenceChange:r,message:i}){return new ei({id:e,operations:n,presenceChange:r,message:i})}getID(){return this.id}getMessage(){return this.message}hasOperations(){return this.operations.length>0}getOperations(){return this.operations}setActor(e){for(const n of this.operations)n.setActor(e);this.id=this.id.setActor(e)}hasPresenceChange(){return this.presenceChange!==void 0}getPresenceChange(){return this.presenceChange}execute(e,n,r){const i=[],s=[];for(const o of this.operations){const a=o.execute(e,r);if(!a)continue;const{opInfos:l,reverseOp:u}=a;i.push(...l),u&&s.unshift(u)}return this.presenceChange&&(this.presenceChange.type===zn.Put?n.set(this.id.getActorID(),wt(this.presenceChange.presence)):n.delete(this.id.getActorID())),{opInfos:i,reverseOps:s}}toTestString(){return`${this.operations.map(e=>e.toTestString()).join(",")}`}toStruct(){return{changeID:ye.bytesToHex(ye.toChangeID(this.getID()).toBinary()),message:this.getMessage(),operations:this.getOperations().map(e=>ye.bytesToHex(ye.toOperation(e).toBinary())),presenceChange:this.getPresenceChange()}}static fromStruct(e){const{changeID:n,operations:r,presenceChange:i,message:s}=e;return ei.create({id:ye.bytesToChangeID(ye.hexToBytes(n)),operations:r==null?void 0:r.map(o=>ye.bytesToOperation(ye.hexToBytes(o))),presenceChange:i,message:s})}}class aa{constructor(e,n,r,i,s,o){m(this,"documentKey");m(this,"checkpoint");m(this,"isRemoved");m(this,"changes");m(this,"snapshot");m(this,"minSyncedTicket");this.documentKey=e,this.checkpoint=n,this.isRemoved=r,this.changes=i,this.snapshot=s,this.minSyncedTicket=o}static create(e,n,r,i,s,o){return new aa(e,n,r,i,s,o)}getDocumentKey(){return this.documentKey}getCheckpoint(){return this.checkpoint}getIsRemoved(){return this.isRemoved}getChanges(){return this.changes}hasChanges(){return this.changes.length>0}getChangeSize(){return this.changes.length}hasSnapshot(){return!!this.snapshot&&!!this.snapshot.length}getSnapshot(){return this.snapshot}getMinSyncedTicket(){return this.minSyncedTicket}}class jr{constructor(e,n){m(this,"serverSeq");m(this,"clientSeq");this.serverSeq=e,this.clientSeq=n}static of(e,n){return new jr(e,n)}increaseClientSeq(e){return e===0?this:new jr(this.serverSeq,this.clientSeq+e)}forward(e){if(this.equals(e))return this;const n=this.serverSeq.greaterThan(e.serverSeq)?this.serverSeq:e.serverSeq,r=Math.max(this.clientSeq,e.clientSeq);return jr.of(n,r)}getServerSeqAsString(){return this.serverSeq.toString()}getClientSeq(){return this.clientSeq}getServerSeq(){return this.serverSeq}equals(e){return this.clientSeq===e.clientSeq&&this.serverSeq.equals(e.serverSeq)}toTestString(){return`serverSeq=${this.serverSeq}, clientSeq=${this.clientSeq}`}}const Dw=new jr(B.fromInt(0,!0),0);class qt{constructor(e,n){m(this,"createdAt");m(this,"offset");this.createdAt=e,this.offset=n}static of(e,n){return new qt(e,n)}static fromStruct(e){return qt.of(qe.fromStruct(e.createdAt),e.offset)}getCreatedAt(){return this.createdAt}getOffset(){return this.offset}equals(e){return this.createdAt.compare(e.createdAt)===0&&this.offset===e.offset}hasSameCreatedAt(e){return this.createdAt.compare(e.createdAt)===0}split(e){return new qt(this.createdAt,this.offset+e)}toStruct(){return{createdAt:this.createdAt.toStruct(),offset:this.offset}}toTestString(){return`${this.createdAt.toTestString()}:${this.offset}`}toIDString(){return`${this.createdAt.toIDString()}:${this.offset}`}}const Rw=qt.of(Nt,0);class xt{constructor(e,n){m(this,"id");m(this,"relativeOffset");this.id=e,this.relativeOffset=n}static of(e,n){return new xt(e,n)}static fromStruct(e){const n=qt.fromStruct(e.id);return xt.of(n,e.relativeOffset)}getID(){return this.id}getRelativeOffset(){return this.relativeOffset}getAbsoluteID(){return qt.of(this.id.getCreatedAt(),this.id.getOffset()+this.relativeOffset)}toTestString(){return`${this.id.toTestString()}:${this.relativeOffset}`}toStruct(){return{id:this.id.toStruct(),relativeOffset:this.relativeOffset}}equals(e){return this.id.equals(e.id)?this.relativeOffset===e.relativeOffset:!1}}class Mn extends yp{constructor(n,r,i){super(r);m(this,"id");m(this,"removedAt");m(this,"prev");m(this,"next");m(this,"insPrev");m(this,"insNext");this.id=n,this.removedAt=i}static create(n,r){return new Mn(n,r)}static createComparator(){return(n,r)=>{const i=n.getCreatedAt().compare(r.getCreatedAt());return i!==0?i:n.getOffset()>r.getOffset()?1:n.getOffset()<r.getOffset()?-1:0}}getID(){return this.id}getCreatedAt(){return this.id.getCreatedAt()}getLength(){return this.removedAt?0:this.getContentLength()}getContentLength(){return this.value&&this.value.length||0}getPrev(){return this.prev}getNext(){return this.next}getInsPrev(){return this.insPrev}getInsNext(){return this.insNext}getInsPrevID(){return this.insPrev.getID()}setPrev(n){this.prev=n,n&&(n.next=this)}setNext(n){this.next=n,n&&(n.prev=this)}setInsPrev(n){this.insPrev=n,n&&(n.insNext=this)}setInsNext(n){this.insNext=n,n&&(n.insPrev=this)}hasNext(){return!!this.next}hasInsPrev(){return!!this.insPrev}isRemoved(){return!!this.removedAt}getRemovedAt(){return this.removedAt}split(n){return new Mn(this.id.split(n),this.splitValue(n),this.removedAt)}canDelete(n,r){const i=!this.removedAt;return!this.getCreatedAt().after(r)&&(!this.removedAt||n.after(this.removedAt))?i:!1}canStyle(n,r){return!this.getCreatedAt().after(r)&&(!this.removedAt||n.after(this.removedAt))}remove(n){this.removedAt=n}createPosRange(){return[xt.of(this.id,0),xt.of(this.id,this.getLength())]}deepcopy(){return new Mn(this.id,this.value,this.removedAt)}toTestString(){return`${this.id.toTestString()} ${this.value?this.value:""}`}splitValue(n){const r=this.value;return this.value=r.substring(0,n),r.substring(n,r.length)}toIDString(){return this.id.toIDString()}}class ti{constructor(){m(this,"head");m(this,"treeByIndex");m(this,"treeByID");this.head=Mn.create(Rw),this.treeByIndex=new rs,this.treeByID=new Tp(Mn.createComparator()),this.treeByIndex.insert(this.head),this.treeByID.put(this.head.getID(),this.head)}static create(){return new ti}edit(e,n,r,i){const[s,o]=this.findNodeWithSplit(e[1],n),[a,l]=this.findNodeWithSplit(e[0],n),u=this.findBetween(l,o),[c,h,g]=this.deleteNodes(u,n,i),d=o?o.getID():s.getID();let v=xt.of(d,0);if(r){const O=this.posToIndex(a.createPosRange()[1],!0),p=this.insertAfter(a,Mn.create(qt.of(n,0),r));c.length&&c[c.length-1].from===O?c[c.length-1].value=r:c.push({actor:n.getActorID(),from:O,to:O,value:r}),v=xt.of(p.getID(),p.getContentLength())}const I=[];for(const[,O]of g)I.push({parent:this,child:O});return[v,h,I,c]}indexToPos(e){const[n,r]=this.treeByIndex.find(e),i=n;return xt.of(i.getID(),r)}findIndexesFromRange(e){const[n,r]=e;return[this.posToIndex(n,!1),this.posToIndex(r,!0)]}posToIndex(e,n){const r=e.getAbsoluteID(),i=n?this.findFloorNodePreferToLeft(r):this.findFloorNode(r);if(!i)throw new T(S.ErrInvalidArgument,`the node of the given id should be found: ${r.toTestString()}`);const s=this.treeByIndex.indexOf(i),o=i.isRemoved()?0:r.getOffset()-i.getID().getOffset();return s+o}findNode(e){return this.findFloorNode(e)}get length(){return this.treeByIndex.length}getTreeByIndex(){return this.treeByIndex}getTreeByID(){return this.treeByID}toString(){const e=[];for(const n of this)n.isRemoved()||e.push(n.getValue());return e.join("")}*[Symbol.iterator](){let e=this.head.getNext();for(;e;)yield e,e=e.getNext()}getHead(){return this.head}deepcopy(){const e=new ti;let n=this.head.getNext(),r=e.head,i;for(;n;){if(i=e.insertAfter(r,n.deepcopy()),n.hasInsPrev()){const s=e.findNode(n.getInsPrevID());i.setInsPrev(s)}r=i,n=n.getNext()}return e}toTestString(){const e=[];let n=this.head;for(;n;)n.isRemoved()?e.push(`{${n.toTestString()}}`):e.push(`[${n.toTestString()}]`),n=n.getNext();return e.join("")}insertAfter(e,n){const r=e.getNext();return n.setPrev(e),r&&r.setPrev(n),this.treeByID.put(n.getID(),n),this.treeByIndex.insertAfter(e,n),n}findNodeWithSplit(e,n){const r=e.getAbsoluteID();let i=this.findFloorNodePreferToLeft(r);const s=r.getOffset()-i.getID().getOffset();for(this.splitNode(i,s);i.hasNext()&&i.getNext().getCreatedAt().after(n);)i=i.getNext();return[i,i.getNext()]}findFloorNodePreferToLeft(e){let n=this.findFloorNode(e);if(!n)throw new T(S.ErrInvalidArgument,`the node of the given id should be found: ${e.toTestString()}`);if(e.getOffset()>0&&n.getID().getOffset()==e.getOffset()){if(!n.hasInsPrev())return n;n=n.getInsPrev()}return n}findFloorNode(e){const n=this.treeByID.floorEntry(e);if(n&&!(!n.key.equals(e)&&!n.key.hasSameCreatedAt(e)))return n.value}findBetween(e,n){const r=[];let i=e;for(;i&&i!==n;)r.push(i),i=i.getNext();return r}splitNode(e,n){if(n>e.getContentLength())throw new T(S.ErrInvalidArgument,"offset should be less than or equal to length");if(n===0)return e;if(n===e.getContentLength())return e.getNext();const r=e.split(n);this.treeByIndex.updateWeight(r),this.insertAfter(e,r);const i=e.getInsNext();return i&&i.setInsPrev(r),r.setInsPrev(e),r}deleteNodes(e,n,r){if(!e.length)return[[],new Map,new Map];const[i,s]=this.filterNodes(e,n,r),o=new Map,a=new Map,l=this.makeChanges(s,n);for(const u of i){const c=u.getCreatedAt().getActorID();(!o.has(c)||u.getID().getCreatedAt().after(o.get(c)))&&o.set(c,u.getID().getCreatedAt()),a.set(u.getID().toIDString(),u),u.remove(n)}return this.deleteIndexNodes(s),[l,o,a]}filterNodes(e,n,r){const i=!!r,s=[],o=[],[a,l]=this.findEdgesOfCandidates(e);o.push(a);for(const u of e){const c=u.getCreatedAt().getActorID(),h=i?r.has(c)?r.get(c):Nt:_i;u.canDelete(n,h)?s.push(u):o.push(u)}return o.push(l),[s,o]}findEdgesOfCandidates(e){return[e[0].getPrev(),e[e.length-1].getNext()]}makeChanges(e,n){const r=[];let i,s;for(let o=0;o<e.length-1;o++){const a=e[o],l=e[o+1];a.getNext()!=l&&([i]=this.findIndexesFromRange(a.getNext().createPosRange()),l?[,s]=this.findIndexesFromRange(l.getPrev().createPosRange()):s=this.treeByIndex.length,i<s&&r.push({actor:n.getActorID(),from:i,to:s}))}return r.reverse()}deleteIndexNodes(e){for(let n=0;n<e.length-1;n++){const r=e[n],i=e[n+1];r.getNext()!=i&&this.treeByIndex.deleteRange(r,i)}}purge(e){this.treeByIndex.delete(e),this.treeByID.remove(e.getID());const n=e.getPrev(),r=e.getNext(),i=e.getInsPrev(),s=e.getInsNext();n&&n.setNext(r),r&&r.setPrev(n),e.setPrev(void 0),e.setNext(void 0),i&&i.setInsNext(s),s&&s.setInsPrev(i),e.setInsPrev(void 0),e.setInsNext(void 0)}}const Zf=t=>t<0?Math.ceil(t):Math.floor(t);var Ht=(t=>(t[t.IntegerCnt=0]="IntegerCnt",t[t.LongCnt=1]="LongCnt",t))(Ht||{});class nt extends hs{constructor(n,r,i){super(i);m(this,"valueType");m(this,"value");switch(this.valueType=n,n){case 0:typeof r=="number"?r>Math.pow(2,31)-1||r<-Math.pow(2,31)?this.value=B.fromNumber(r).toInt():this.value=Zf(r):this.value=r.toInt();break;case 1:typeof r=="number"?this.value=B.fromNumber(r):this.value=r;break;default:throw new T(S.ErrUnimplemented,`unimplemented type: ${n}`)}}static create(n,r,i){return new nt(n,r,i)}static valueFromBytes(n,r){switch(n){case 0:return r[0]|r[1]<<8|r[2]<<16|r[3]<<24;case 1:return B.fromBytesLE(Array.from(r));default:throw new T(S.ErrUnimplemented,`unimplemented type: ${n}`)}}toJSON(){return`${this.value}`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:this.value,type:"YORKIE_COUNTER"}}deepcopy(){const n=nt.create(this.valueType,this.value,this.getCreatedAt());return n.setMovedAt(this.getMovedAt()),n}getType(){return this.valueType}static getCounterType(n){switch(typeof n){case"object":return n instanceof B?1:void 0;case"number":return n>Math.pow(2,31)-1||n<-Math.pow(2,31)?1:0;default:return}}static isSupport(n){return!!nt.getCounterType(n)}static isInteger(n){return n%1===0}isNumericType(){const n=this.valueType;return n===0||n===1}getValueType(){return this.valueType}getValue(){return this.value}toBytes(){switch(this.valueType){case 0:{const n=this.value;return new Uint8Array([n&255,n>>8&255,n>>16&255,n>>24&255])}case 1:{const r=this.value.toBytesLE();return Uint8Array.from(r)}default:throw new T(S.ErrUnimplemented,`unimplemented type: ${this.valueType}`)}}increase(n){function r(i){if(!i.isNumericType())throw new TypeError(`Unsupported type of value: ${typeof i.getValue()}`)}return r(this),r(n),this.valueType===1?this.value=this.value.add(n.getValue()):n.getType()===me.Long?this.value=this.value+n.getValue().toInt():this.value=B.fromNumber(this.value+Zf(n.getValue())).toInt(),this}}class ni extends Pt{constructor(n,r,i){super(n,i);m(this,"value");this.value=r}static create(n,r,i){return new ni(n,r,i)}execute(n){const r=n.findByCreatedAt(this.getParentCreatedAt());if(!r)throw new T(S.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(r instanceof nt))throw new T(S.ErrInvalidArgument,"fail to execute, only Counter can execute increase");const i=r,s=this.value.deepcopy();return i.increase(s),{opInfos:[{type:"increase",path:n.createPath(this.getParentCreatedAt()),value:s.getValue()}],reverseOp:this.toReverseOperation()}}toReverseOperation(){const n=this.value.deepcopy(),i=n.getType()===me.Long?n.getValue().multiply(-1):n.getValue()*-1;return ni.create(this.getParentCreatedAt(),te.of(i,n.getCreatedAt()))}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.INCREASE.${this.value.toJSON()}`}getValue(){return this.value}}class an extends Pt{constructor(n,r,i,s,o,a,l){super(n,l);m(this,"fromPos");m(this,"toPos");m(this,"maxCreatedAtMapByActor");m(this,"attributes");m(this,"attributesToRemove");this.fromPos=r,this.toPos=i,this.maxCreatedAtMapByActor=s,this.attributes=o,this.attributesToRemove=a}static create(n,r,i,s,o,a){return new an(n,r,i,s,o,new Array,a)}static createTreeRemoveStyleOperation(n,r,i,s,o,a){return new an(n,r,i,s,new Map,o,a)}execute(n){const r=n.findByCreatedAt(this.getParentCreatedAt());if(!r)throw new T(S.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(r instanceof pt))throw new T(S.ErrInvalidArgument,"fail to execute, only Tree can execute edit");const i=r;let s,o;if(this.attributes.size){const a={};[...this.attributes].forEach(([l,u])=>a[l]=u),[,o,s]=i.style([this.fromPos,this.toPos],a,this.getExecutedAt(),this.maxCreatedAtMapByActor)}else{const a=this.attributesToRemove;[,o,s]=i.removeStyle([this.fromPos,this.toPos],a,this.getExecutedAt(),this.maxCreatedAtMapByActor)}for(const a of o)n.registerGCPair(a);return{opInfos:s.map(({from:a,to:l,value:u,fromPath:c,toPath:h})=>({type:"tree-style",from:a,to:l,value:this.attributes.size?{attributes:u}:{attributesToRemove:u},fromPath:c,toPath:h,path:n.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const n=this.getParentCreatedAt().toTestString(),r=`${this.fromPos.getLeftSiblingID().getCreatedAt().toTestString()}:${this.fromPos.getLeftSiblingID().getOffset()}`,i=`${this.toPos.getLeftSiblingID().getCreatedAt().toTestString()}:${this.toPos.getLeftSiblingID().getOffset()}`;return`${n}.STYLE(${r},${i},${Object.entries(this.attributes||{}).map(([s,o])=>`${s}:"${o}"`).join(" ")})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getAttributes(){return this.attributes}getAttributesToRemove(){return this.attributesToRemove}getMaxCreatedAtMapByActor(){return this.maxCreatedAtMapByActor}}function _w(t){const e=new Yu,n=e.data;for(const[r,i]of Object.entries(t))n[r]=JSON.stringify(i);return e}function Lw(t){if(t.type===zn.Put)return new Kl({type:ts.PUT,presence:_w(t.presence)});if(t.type===zn.Clear)return new Kl({type:ts.CLEAR});throw new T(S.ErrUnimplemented,"unimplemented type")}function bw(t){return new fp({serverSeq:t.getServerSeqAsString(),clientSeq:t.getClientSeq()})}function Ap(t){return new ra({clientSeq:t.getClientSeq(),lamport:t.getLamportAsString(),actorId:ac(t.getActorID())})}function L(t){if(t)return new M({lamport:t.getLamportAsString(),delimiter:t.getDelimiter(),actorId:ac(t.getActorID())})}function Ip(t){switch(t){case me.Null:return z.NULL;case me.Boolean:return z.BOOLEAN;case me.Integer:return z.INTEGER;case me.Long:return z.LONG;case me.Double:return z.DOUBLE;case me.String:return z.STRING;case me.Bytes:return z.BYTES;case me.Date:return z.DATE;default:throw new T(S.ErrInvalidType,`unsupported type: ${t}`)}}function Ep(t){switch(t){case Ht.IntegerCnt:return z.INTEGER_CNT;case Ht.LongCnt:return z.LONG_CNT;default:throw new T(S.ErrInvalidType,`unsupported type: ${t}`)}}function Ka(t){if(t instanceof He)return new Qt({type:z.JSON_OBJECT,createdAt:L(t.getCreatedAt()),value:Bp(t)});if(t instanceof tt)return new Qt({type:z.JSON_ARRAY,createdAt:L(t.getCreatedAt()),value:c1(t)});if(t instanceof gt)return new Qt({type:z.TEXT,createdAt:L(t.getCreatedAt())});if(t instanceof te)return new Qt({type:Ip(t.getType()),createdAt:L(t.getCreatedAt()),value:t.toBytes()});if(t instanceof nt)return new Qt({type:Ep(t.getType()),createdAt:L(t.getCreatedAt()),value:t.toBytes()});if(t instanceof pt)return new Qt({type:z.TREE,createdAt:L(t.getCreatedAt()),value:d1(t)});throw new T(S.ErrUnimplemented,"unimplemented element")}function Mw(t){return new Jl({createdAt:L(t.getCreatedAt()),offset:t.getOffset()})}function Bs(t){return new fr({createdAt:L(t.getID().getCreatedAt()),offset:t.getID().getOffset(),relativeOffset:t.getRelativeOffset()})}function $s(t){return new es({parentId:Li(t.getParentID()),leftSiblingId:Li(t.getLeftSiblingID())})}function Li(t){return new zr({createdAt:L(t.getCreatedAt()),offset:t.getOffset()})}function Np(t){const e=new qu;if(t instanceof dr){const n=t,r=new qg;r.parentCreatedAt=L(n.getParentCreatedAt()),r.key=n.getKey(),r.value=Ka(n.getValue()),r.executedAt=L(n.getExecutedAt()),e.body.case="set",e.body.value=r}else if(t instanceof gs){const n=t,r=new Hg;r.parentCreatedAt=L(n.getParentCreatedAt()),r.prevCreatedAt=L(n.getPrevCreatedAt()),r.value=Ka(n.getValue()),r.executedAt=L(n.getExecutedAt()),e.body.case="add",e.body.value=r}else if(t instanceof Nn){const n=t,r=new Gg;r.parentCreatedAt=L(n.getParentCreatedAt()),r.prevCreatedAt=L(n.getPrevCreatedAt()),r.createdAt=L(n.getCreatedAt()),r.executedAt=L(n.getExecutedAt()),e.body.case="move",e.body.value=r}else if(t instanceof Un){const n=t,r=new Yg;r.parentCreatedAt=L(n.getParentCreatedAt()),r.createdAt=L(n.getCreatedAt()),r.executedAt=L(n.getExecutedAt()),e.body.case="remove",e.body.value=r}else if(t instanceof ps){const n=t,r=new Qg;r.parentCreatedAt=L(n.getParentCreatedAt()),r.from=Bs(n.getFromPos()),r.to=Bs(n.getToPos());const i=r.createdAtMapByActor;for(const[o,a]of n.getMaxCreatedAtMapByActor())i[o]=L(a);r.content=n.getContent();const s=r.attributes;for(const[o,a]of n.getAttributes())s[o]=a;r.executedAt=L(n.getExecutedAt()),e.body.case="edit",e.body.value=r}else if(t instanceof ms){const n=t,r=new Xg;r.parentCreatedAt=L(n.getParentCreatedAt()),r.from=Bs(n.getFromPos()),r.to=Bs(n.getToPos());const i=r.createdAtMapByActor;for(const[o,a]of n.getMaxCreatedAtMapByActor())i[o]=L(a);const s=r.attributes;for(const[o,a]of n.getAttributes())s[o]=a;r.executedAt=L(n.getExecutedAt()),e.body.case="style",e.body.value=r}else if(t instanceof ni){const n=t,r=new Zg;r.parentCreatedAt=L(n.getParentCreatedAt()),r.value=Ka(n.getValue()),r.executedAt=L(n.getExecutedAt()),e.body.case="increase",e.body.value=r}else if(t instanceof ys){const n=t,r=new ep,i=r.createdAtMapByActor;for(const[s,o]of n.getMaxCreatedAtMapByActor())i[s]=L(o);r.parentCreatedAt=L(n.getParentCreatedAt()),r.from=$s(n.getFromPos()),r.to=$s(n.getToPos()),r.contents=Vw(n.getContents()),r.splitLevel=n.getSplitLevel(),r.executedAt=L(n.getExecutedAt()),e.body.case="treeEdit",e.body.value=r}else if(t instanceof an){const n=t,r=new tp;r.parentCreatedAt=L(n.getParentCreatedAt()),r.from=$s(n.getFromPos()),r.to=$s(n.getToPos());const i=r.createdAtMapByActor;for(const[o,a]of n.getMaxCreatedAtMapByActor())i[o]=L(a);const s=n.getAttributesToRemove();if(s.length>0)r.attributesToRemove=s;else{const o=r.attributes;for(const[a,l]of n.getAttributes())o[a]=l}r.executedAt=L(n.getExecutedAt()),e.body.case="treeStyle",e.body.value=r}else throw new T(S.ErrUnimplemented,"unimplemented operation");return e}function Fw(t){const e=[];for(const n of t)e.push(Np(n));return e}function Bw(t){const e=new Wg({id:Ap(t.getID()),message:t.getMessage()});return t.hasOperations()&&(e.operations=Fw(t.getOperations())),t.hasPresenceChange()&&(e.presenceChange=Lw(t.getPresenceChange())),e}function $w(t){const e=[];for(const n of t)e.push(Bw(n));return e}function zw(t){const e=[];for(const n of t)e.push(new lp({key:n.getStrKey(),element:nc(n.getValue())}));return e}function Uw(t){const e=[];for(const n of t)e.push(new Hu({element:nc(n.getValue())}));return e}function jw(t){const e=[];for(const n of t){const r=new up;r.id=Mw(n.getID()),r.value=n.getValue().getContent(),r.removedAt=L(n.getRemovedAt());const i=r.attributes,s=n.getValue().getAttrs();for(const o of s){const a=new ia;a.value=o.getValue(),a.updatedAt=L(o.getUpdatedAt()),i[o.getKey()]=a}e.push(r)}return e}function Vw(t){const e=[];if(!t||!t.length)return e;for(const n of t)e.push(new cp({content:tc(n)}));return e}function Jw(t){const e={};for(const n of t)e[n.getKey()]=new ia({value:n.getValue(),updatedAt:L(n.getUpdatedAt()),isRemoved:n.isRemoved()});return e}function tc(t){if(!t)return[];const e=[];return oa(t,(n,r)=>{const i=new Gu({id:Li(n.id),type:n.type,removedAt:L(n.removedAt),depth:r});n.isText&&(i.value=n.value),n.insPrevID&&(i.insPrevId=Li(n.insPrevID)),n.insNextID&&(i.insNextId=Li(n.insNextID)),n.attrs&&(i.attributes=Jw(n.attrs)),e.push(i)}),e}function Kw(t){const e=new mt;return e.body.case="jsonObject",e.body.value=new np({nodes:zw(t.getRHT()),createdAt:L(t.getCreatedAt()),movedAt:L(t.getMovedAt()),removedAt:L(t.getRemovedAt())}),e}function xp(t){const e=new mt;return e.body.case="jsonArray",e.body.value=new rp({nodes:Uw(t.getElements()),createdAt:L(t.getCreatedAt()),movedAt:L(t.getMovedAt()),removedAt:L(t.getRemovedAt())}),e}function Ww(t){const e=new mt;return e.body.case="primitive",e.body.value=new ip({type:Ip(t.getType()),value:t.toBytes(),createdAt:L(t.getCreatedAt()),movedAt:L(t.getMovedAt()),removedAt:L(t.getRemovedAt())}),e}function qw(t){const e=new mt;return e.body.case="text",e.body.value=new sp({nodes:jw(t.getRGATreeSplit()),createdAt:L(t.getCreatedAt()),movedAt:L(t.getMovedAt()),removedAt:L(t.getRemovedAt())}),e}function Hw(t){const e=new mt;return e.body.case="counter",e.body.value=new op({type:Ep(t.getType()),value:t.toBytes(),createdAt:L(t.getCreatedAt()),movedAt:L(t.getMovedAt()),removedAt:L(t.getRemovedAt())}),e}function Cp(t){const e=new mt;return e.body.case="tree",e.body.value=new ap({nodes:tc(t.getRoot()),createdAt:L(t.getCreatedAt()),movedAt:L(t.getMovedAt()),removedAt:L(t.getRemovedAt())}),e}function nc(t){if(t instanceof He)return Kw(t);if(t instanceof tt)return xp(t);if(t instanceof te)return Ww(t);if(t instanceof gt)return qw(t);if(t instanceof nt)return Hw(t);if(t instanceof pt)return Cp(t);throw new T(S.ErrUnimplemented,"unimplemented element")}function Gw(t){return new gn({documentKey:t.getDocumentKey(),checkpoint:bw(t.getCheckpoint()),isRemoved:t.getIsRemoved(),changes:$w(t.getChanges()),snapshot:t.getSnapshot(),minSyncedTicket:L(t.getMinSyncedTicket())})}function ed(t){const e=t.findDetails(hw);for(const n of e)if(n.metadata.code)return n.metadata.code;return""}function Pp(t){let e;return t.serverSeq&&(e=B.fromString(t.serverSeq,!0)),An.of(t.clientSeq,B.fromString(t.lamport,!0),oc(t.actorId),e)}function b(t){if(t)return qe.of(B.fromString(t.lamport,!0),t.delimiter,oc(t.actorId))}function rc(t){const e={};return Object.entries(t.data).forEach(([n,r])=>{e[n]=JSON.parse(r)}),e}function Yw(t){const e=t.type;if(e===ts.PUT){const n=rc(t.presence);return{type:zn.Put,presence:n}}if(e===ts.CLEAR)return{type:zn.Clear};throw new T(S.ErrInvalidType,`unsupported type: ${e}`)}function Qw(t){const e=new Map;return Object.entries(t).forEach(([n,r])=>{e.set(n,rc(r))}),e}function Op(t){switch(t){case z.NULL:return me.Null;case z.BOOLEAN:return me.Boolean;case z.INTEGER:return me.Integer;case z.LONG:return me.Long;case z.DOUBLE:return me.Double;case z.STRING:return me.String;case z.BYTES:return me.Bytes;case z.DATE:return me.Date}throw new T(S.ErrUnimplemented,`unimplemented value type: ${t}`)}function Bo(t){switch(t){case z.INTEGER_CNT:return Ht.IntegerCnt;case z.LONG_CNT:return Ht.LongCnt}throw new T(S.ErrUnimplemented,`unimplemented value type: ${t}`)}function Wa(t){switch(t.type){case z.JSON_OBJECT:return t.value?Fp(t.value):He.create(b(t.createdAt));case z.JSON_ARRAY:return t.value?u1(t.value):tt.create(b(t.createdAt));case z.TEXT:return gt.create(ti.create(),b(t.createdAt));case z.TREE:return f1(t.value);case z.NULL:case z.BOOLEAN:case z.INTEGER:case z.LONG:case z.DOUBLE:case z.STRING:case z.BYTES:case z.DATE:return te.of(te.valueFromBytes(Op(t.type),t.value),b(t.createdAt));case z.INTEGER_CNT:case z.LONG_CNT:return nt.create(Bo(t.type),nt.valueFromBytes(Bo(t.type),t.value),b(t.createdAt))}}function zs(t){return xt.of(qt.of(b(t.createdAt),t.offset),t.relativeOffset)}function Dp(t){return qt.of(b(t.createdAt),t.offset)}function Xw(t){const e=ss.create(t.value);Object.entries(t.attributes).forEach(([r,i])=>{e.setAttr(r,i.value,b(i.updatedAt))});const n=Mn.create(Dp(t.id),e);return n.remove(b(t.removedAt)),n}function vr(t){return At.of(bi(t.parentId),bi(t.leftSiblingId))}function bi(t){return Ie.of(b(t.createdAt),t.offset)}function Zw(t){if(!t.length)return;const e=[];return t.forEach(n=>{const r=ic(n.content);e.push(r)}),e}function ic(t){if(t.length===0)return;const e=[];for(const i of t)e.push(t1(i));const n=e[e.length-1],r=new Map;r.set(t[e.length-1].depth,e[e.length-1]);for(let i=e.length-2;i>=0;i--)r.get(t[i].depth-1).prepend(e[i]),r.set(t[i].depth,e[i]);return n.updateDescendantsSize(),pt.create(n,Nt).getRoot()}function e1(t){const e=dn.create();for(const[n,r]of Object.entries(t))e.setInternal(n,r.value,b(r.updatedAt),r.isRemoved);return e}function t1(t){const e=bi(t.id),n=Ze.create(e,t.type),r=Object.entries(t.attributes);return n.isText?n.value=t.value:r.length&&(n.attrs=e1(t.attributes)),t.insPrevId&&(n.insPrevID=bi(t.insPrevId)),t.insNextId&&(n.insNextID=bi(t.insNextId)),n.removedAt=b(t.removedAt),n}function Rp(t){if(t.body.case==="set"){const e=t.body.value;return dr.create(e.key,Wa(e.value),b(e.parentCreatedAt),b(e.executedAt))}else if(t.body.case==="add"){const e=t.body.value;return gs.create(b(e.parentCreatedAt),b(e.prevCreatedAt),Wa(e.value),b(e.executedAt))}else if(t.body.case==="move"){const e=t.body.value;return Nn.create(b(e.parentCreatedAt),b(e.prevCreatedAt),b(e.createdAt),b(e.executedAt))}else if(t.body.case==="remove"){const e=t.body.value;return Un.create(b(e.parentCreatedAt),b(e.createdAt),b(e.executedAt))}else if(t.body.case==="edit"){const e=t.body.value,n=new Map;Object.entries(e.createdAtMapByActor).forEach(([i,s])=>{n.set(i,b(s))});const r=new Map;return Object.entries(e.attributes).forEach(([i,s])=>{r.set(i,s)}),ps.create(b(e.parentCreatedAt),zs(e.from),zs(e.to),n,e.content,r,b(e.executedAt))}else if(t.body.case==="style"){const e=t.body.value,n=new Map;Object.entries(e.createdAtMapByActor).forEach(([i,s])=>{n.set(i,b(s))});const r=new Map;return Object.entries(e.attributes).forEach(([i,s])=>{r.set(i,s)}),ms.create(b(e.parentCreatedAt),zs(e.from),zs(e.to),n,r,b(e.executedAt))}else{if(t.body.case==="select")return;if(t.body.case==="increase"){const e=t.body.value;return ni.create(b(e.parentCreatedAt),Wa(e.value),b(e.executedAt))}else if(t.body.case==="treeEdit"){const e=t.body.value,n=new Map;return Object.entries(e.createdAtMapByActor).forEach(([r,i])=>{n.set(r,b(i))}),ys.create(b(e.parentCreatedAt),vr(e.from),vr(e.to),Zw(e.contents),e.splitLevel,n,b(e.executedAt))}else if(t.body.case==="treeStyle"){const e=t.body.value,n=new Map,r=e.attributesToRemove,i=new Map;return e!=null&&e.createdAtMapByActor&&Object.entries(e.createdAtMapByActor).forEach(([s,o])=>{i.set(s,b(o))}),(r==null?void 0:r.length)>0?an.createTreeRemoveStyleOperation(b(e.parentCreatedAt),vr(e.from),vr(e.to),i,r,b(e.executedAt)):(Object.entries(e.attributes).forEach(([s,o])=>{n.set(s,o)}),an.create(b(e.parentCreatedAt),vr(e.from),vr(e.to),i,n,b(e.executedAt)))}else throw new T(S.ErrUnimplemented,"unimplemented operation")}}function n1(t){const e=[];for(const n of t){const r=Rp(n);r&&e.push(r)}return e}function _p(t){const e=[];for(const n of t)e.push(ei.create({id:Pp(n.id),operations:n1(n.operations),presenceChange:n.presenceChange?Yw(n.presenceChange):void 0,message:n.message}));return e}function r1(t){return jr.of(B.fromString(t.serverSeq,!0),t.clientSeq)}function i1(t){return aa.create(t.documentKey,r1(t.checkpoint),t.isRemoved,_p(t.changes),t.snapshot,b(t.minSyncedTicket))}function Lp(t){const e=new ns;for(const r of t.nodes){const i=sc(r.element);e.set(r.key,i,i.getPositionedAt())}const n=new He(b(t.createdAt),e);return n.setMovedAt(b(t.movedAt)),n.setRemovedAt(b(t.removedAt)),n}function bp(t){const e=new is;for(const r of t.nodes)e.insert(sc(r.element));const n=new tt(b(t.createdAt),e);return n.setMovedAt(b(t.movedAt)),n.setRemovedAt(b(t.removedAt)),n}function s1(t){const e=te.of(te.valueFromBytes(Op(t.type),t.value),b(t.createdAt));return e.setMovedAt(b(t.movedAt)),e.setRemovedAt(b(t.removedAt)),e}function o1(t){const e=new ti;let n=e.getHead();for(const i of t.nodes){const s=e.insertAfter(n,Xw(i));i.insPrevId&&s.setInsPrev(e.findNode(Dp(i.insPrevId))),n=s}const r=new gt(e,b(t.createdAt));return r.setMovedAt(b(t.movedAt)),r.setRemovedAt(b(t.removedAt)),r}function a1(t){const e=nt.create(Bo(t.type),nt.valueFromBytes(Bo(t.type),t.value),b(t.createdAt));return e.setMovedAt(b(t.movedAt)),e.setRemovedAt(b(t.removedAt)),e}function Mp(t){const e=ic(t.nodes);return pt.create(e,b(t.createdAt))}function sc(t){if(t.body.case==="jsonObject")return Lp(t.body.value);if(t.body.case==="jsonArray")return bp(t.body.value);if(t.body.case==="primitive")return s1(t.body.value);if(t.body.case==="text")return o1(t.body.value);if(t.body.case==="counter")return a1(t.body.value);if(t.body.case==="tree")return Mp(t.body.value);throw new T(S.ErrUnimplemented,"unimplemented element")}function l1(t){if(!t)return{root:He.create(Nt),presences:new Map};const e=V0.fromBinary(t);return{root:sc(e.root),presences:Qw(e.presences)}}function Fp(t){if(!t)throw new T(S.ErrInvalidArgument,"bytes is empty");const e=mt.fromBinary(t);return Lp(e.body.value)}function Bp(t){return nc(t).toBinary()}function u1(t){if(!t)throw new T(S.ErrInvalidArgument,"bytes is empty");const e=mt.fromBinary(t);return bp(e.body.value)}function c1(t){return xp(t).toBinary()}function f1(t){if(!t)throw new T(S.ErrInvalidArgument,"bytes is empty");const e=mt.fromBinary(t);return Mp(e.body.value)}function d1(t){return Cp(t).toBinary()}function $p(t){return t?Array.from(t).map(e=>e.toString(16).padStart(2,"0")).join(""):""}function oc(t){return $p(t)}function zp(t){return new Uint8Array(t.match(/.{1,2}/g).map(e=>parseInt(e,16)))}function ac(t){return zp(t)}function h1(t){const e=ra.fromBinary(t);return Pp(e)}function g1(t){const e=qu.fromBinary(t);return Rp(e)}const ye={fromPresence:rc,toChangePack:Gw,fromChangePack:i1,fromChanges:_p,toTreeNodes:tc,fromTreeNodes:ic,objectToBytes:Bp,bytesToObject:Fp,bytesToSnapshot:l1,bytesToHex:$p,hexToBytes:zp,toHexString:oc,toUint8Array:ac,toOperation:Np,toChangeID:Ap,PbChangeID:ra,bytesToChangeID:h1,bytesToOperation:g1};var Le=(t=>(t[t.Trivial=0]="Trivial",t[t.Debug=1]="Debug",t[t.Info=2]="Info",t[t.Warn=3]="Warn",t[t.Error=4]="Error",t[t.Fatal=5]="Fatal",t))(Le||{});let Yn=3;function Up(t){Yn=t}const F={trivial:(...t)=>{Yn>0||typeof console<"u"&&console.log("YORKIE T:",...t)},debug:(...t)=>{Yn>1||typeof console<"u"&&console.log("YORKIE D:",...t)},info:(...t)=>{Yn>2||typeof console<"u"&&console.log("YORKIE I:",...t)},warn:(...t)=>{Yn>3||typeof console<"u"&&(typeof console.warn<"u"?console.warn("YORKIE W:",...t):console.log("YORKIE W:",...t))},error:(...t)=>{Yn>4||typeof console<"u"&&(typeof console.error<"u"?console.error("YORKIE E:",...t):console.log("YORKIE E:",...t))},fatal:(...t)=>{typeof console<"u"&&(typeof console.error<"u"?console.error("YORKIE F:",...t):console.log("YORKIE F:",...t))},isEnabled:t=>Yn<=t};function jp(){return"xxxxxxxx-xxxx-4xxxy-xxxx-xxxxxxxxxxx".replace(/[xy]/g,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}class p1{constructor(e,n,r,i){m(this,"reconnectStreamDelay");m(this,"doc");m(this,"docID");m(this,"syncMode");m(this,"remoteChangeEventReceived");m(this,"watchStream");m(this,"watchLoopTimerID");m(this,"watchAbortController");this.reconnectStreamDelay=e,this.doc=n,this.docID=r,this.syncMode=i,this.remoteChangeEventReceived=!1}changeSyncMode(e){this.syncMode=e}needRealtimeSync(){return this.syncMode===ao.RealtimeSyncOff?!1:this.syncMode===ao.RealtimePushOnly?this.doc.hasLocalChanges():this.syncMode!==ao.Manual&&(this.doc.hasLocalChanges()||this.remoteChangeEventReceived)}async runWatchLoop(e){const n=async()=>{if(this.watchStream)return Promise.resolve();this.watchLoopTimerID&&(clearTimeout(this.watchLoopTimerID),this.watchLoopTimerID=void 0);try{[this.watchStream,this.watchAbortController]=await e(()=>{this.watchStream=void 0,this.watchAbortController=void 0,this.watchLoopTimerID=setTimeout(n,this.reconnectStreamDelay)})}catch{}};await n()}cancelWatchStream(){this.watchStream&&this.watchAbortController&&(this.watchAbortController.abort(),this.watchStream=void 0,this.watchAbortController=void 0),clearTimeout(this.watchLoopTimerID),this.watchLoopTimerID=void 0}}const qa=()=>{};class m1{constructor(e){m(this,"finalized",!1);m(this,"observers",[]);m(this,"finalError");try{e(this)}catch(n){this.error(n)}}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(!e)throw new T(S.ErrInvalidArgument,"missing observer");if(this.finalized)throw new T(S.ErrRefused,"observable is finalized due to previous error");typeof e=="object"?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=qa),i.error===void 0&&(i.error=qa),i.complete===void 0&&(i.complete=qa);const s=jp(),o=this.unsubscribeOne.bind(this,s);if(this.observers.push({subscriptionID:s,observer:i}),this.finalized)try{this.finalError?i.error(this.finalError):i.complete()}catch(a){F.warn(a)}return o}unsubscribeOne(e){var n;this.observers=(n=this.observers)==null?void 0:n.filter(r=>r.subscriptionID!==e)}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e].observer)}catch(r){F.error(r)}}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.observers=void 0)}}function y1(t){const e=new m1(t);return{subscribe:e.subscribe.bind(e),getProxy:()=>e}}class _r{constructor(e,n,r,i){m(this,"id");m(this,"delimiter");m(this,"message");m(this,"root");m(this,"operations");m(this,"presenceChange");m(this,"previousPresence");m(this,"reversePresenceKeys");this.id=e,this.delimiter=Xu,this.root=n,this.operations=[],this.previousPresence=wt(r),this.presenceChange=void 0,this.reversePresenceKeys=new Set,this.message=i}static create(e,n,r,i){return new _r(e,n,r,i)}push(e){this.operations.push(e)}registerElement(e,n){this.root.registerElement(e,n)}registerRemovedElement(e){this.root.registerRemovedElement(e)}registerGCPair(e){this.root.registerGCPair(e)}getChange(){return ei.create({id:this.id,operations:this.operations,presenceChange:this.presenceChange,message:this.message})}hasChange(){return this.operations.length>0||this.presenceChange!==void 0}setPresenceChange(e){this.presenceChange=e}setReversePresence(e,n){for(const r of Object.keys(e))n!=null&&n.addToHistory?this.reversePresenceKeys.add(r):this.reversePresenceKeys.delete(r)}getReversePresence(){if(this.reversePresenceKeys.size===0)return;const e={};for(const n of this.reversePresenceKeys)e[n]=this.previousPresence[n];return e}issueTimeTicket(){return this.delimiter+=1,this.id.createTimeTicket(this.delimiter)}getLastTimeTicket(){return this.id.createTimeTicket(this.delimiter)}}class os{constructor(e){m(this,"rootObject");m(this,"elementPairMapByCreatedAt");m(this,"gcElementSetByCreatedAt");m(this,"gcPairMap");this.rootObject=e,this.elementPairMapByCreatedAt=new Map,this.gcElementSetByCreatedAt=new Set,this.gcPairMap=new Map,this.registerElement(e,void 0),e.getDescendants(n=>{if(n.getRemovedAt()&&this.registerRemovedElement(n),n instanceof gt||n instanceof pt)for(const r of n.getGCPairs())this.registerGCPair(r);return!1})}static create(){return new os(He.create(Nt))}findByCreatedAt(e){const n=this.elementPairMapByCreatedAt.get(e.toIDString());if(n)return n.element}findElementPairByCreatedAt(e){return this.elementPairMapByCreatedAt.get(e.toIDString())}createSubPaths(e){let n=this.elementPairMapByCreatedAt.get(e.toIDString());if(!n)return[];const r=[];for(;n.parent;){const i=n.element.getCreatedAt(),s=n.parent.subPathOf(i);if(s===void 0)throw new T(S.ErrInvalidArgument,`cant find the given element: ${i.toIDString()}`);r.unshift(s),n=this.elementPairMapByCreatedAt.get(n.parent.getCreatedAt().toIDString())}return r.unshift("$"),r}createPath(e){return this.createSubPaths(e).join(".")}registerElement(e,n){this.elementPairMapByCreatedAt.set(e.getCreatedAt().toIDString(),{parent:n,element:e}),e instanceof bn&&e.getDescendants((r,i)=>(this.registerElement(r,i),!1))}deregisterElement(e){let n=0;const r=i=>{const s=i.getCreatedAt().toIDString();this.elementPairMapByCreatedAt.delete(s),this.gcElementSetByCreatedAt.delete(s),n++};return r(e),e instanceof bn&&e.getDescendants(i=>(r(i),!1)),n}registerRemovedElement(e){this.gcElementSetByCreatedAt.add(e.getCreatedAt().toIDString())}registerGCPair(e){if(this.gcPairMap.get(e.child.toIDString())){this.gcPairMap.delete(e.child.toIDString());return}this.gcPairMap.set(e.child.toIDString(),e)}getElementMapSize(){return this.elementPairMapByCreatedAt.size}getGarbageElementSetSize(){const e=new Set;for(const n of this.gcElementSetByCreatedAt){e.add(n);const r=this.elementPairMapByCreatedAt.get(n);r.element instanceof bn&&r.element.getDescendants(i=>(e.add(i.getCreatedAt().toIDString()),!1))}return e.size}getObject(){return this.rootObject}getGarbageLen(){return this.getGarbageElementSetSize()+this.gcPairMap.size}deepcopy(){return new os(this.rootObject.deepcopy())}garbageCollect(e){let n=0;for(const r of this.gcElementSetByCreatedAt){const i=this.elementPairMapByCreatedAt.get(r);i.element.getRemovedAt()&&e.compare(i.element.getRemovedAt())>=0&&(i.parent.purge(i.element),n+=this.deregisterElement(i.element))}for(const[,r]of this.gcPairMap){const i=r.child.getRemovedAt();i!==void 0&&e.compare(i)>=0&&(r.parent.purge(r.child),this.gcPairMap.delete(r.child.toIDString()),n+=1)}return n}toJSON(){return this.rootObject.toJSON()}toSortedJSON(){return this.rootObject.toSortedJSON()}}function Vp(t,e){const n=new as(t);return new Proxy(e,n.getHandlers())}class as{constructor(e){m(this,"context");m(this,"handlers");this.context=e,this.handlers={set:(n,r,i)=>(F.isEnabled(Le.Trivial)&&F.trivial(`obj[${r}]=${JSON.stringify(i)}`),as.setInternal(e,n,r,i),!0),get:(n,r)=>(F.isEnabled(Le.Trivial)&&F.trivial(`obj[${r}]`),r==="getID"?()=>n.getCreatedAt():r==="toJSON"||r==="toString"?()=>n.toJSON():r==="toJS"?()=>n.toJS():r==="toJSForTest"?()=>n.toJSForTest():Qn(e,n.get(r))),ownKeys:n=>n.getKeys(),getOwnPropertyDescriptor:()=>({enumerable:!0,configurable:!0}),deleteProperty:(n,r)=>(F.isEnabled(Le.Trivial)&&F.trivial(`obj[${r}]`),as.deleteInternal(e,n,r),!0)}}static setInternal(e,n,r,i){if(r.includes("."))throw new T(S.ErrInvalidObjectKey,"key must not contain the '.'.");const s=e.issueTimeTicket(),o=$o(e,i,s),a=n.set(r,o,s);e.registerElement(o,n),a&&e.registerRemovedElement(a),e.push(dr.create(r,o.deepcopy(),n.getCreatedAt(),s))}static buildObjectMembers(e,n){const r={};for(const[i,s]of Object.entries(n)){if(i.includes("."))throw new T(S.ErrInvalidObjectKey,"key must not contain the '.'.");const o=e.issueTimeTicket(),a=$o(e,s,o);r[i]=a}return r}static deleteInternal(e,n,r){const i=e.issueTimeTicket(),s=n.deleteByKey(r,i);s&&(e.push(Un.create(n.getCreatedAt(),s.getCreatedAt(),i)),e.registerRemovedElement(s))}getHandlers(){return this.handlers}}function v1(t,e){const n=new ie(t,e);return new Proxy(e,n.getHandlers())}function w1(t){return typeof t=="string"||t instanceof String?!isNaN(t):!1}function S1(t){return["concat","entries","every","filter","find","findIndex","forEach","join","keys","map","reduce","reduceRight","slice","some","toLocaleString","toString","values"].includes(t)}class ie{constructor(e,n){m(this,"context");m(this,"handlers");m(this,"array");this.context=e,this.array=n,this.handlers={get:(r,i,s)=>i==="getID"?()=>r.getCreatedAt():i==="getElementByID"?o=>{const a=r.getByID(o);if(!(!a||a.isRemoved()))return yn(e,a)}:i==="getElementByIndex"?o=>{const a=r.get(o);return yn(e,a)}:i==="getLast"?()=>yn(e,r.getLast()):i==="deleteByID"?o=>{const a=ie.deleteInternalByID(e,r,o);return yn(e,a)}:i==="insertAfter"?(o,a)=>{const l=ie.insertAfterInternal(e,r,o,a);return yn(e,l)}:i==="insertBefore"?(o,a)=>{const l=ie.insertBeforeInternal(e,r,o,a);return yn(e,l)}:i==="moveBefore"?(o,a)=>{ie.moveBeforeInternal(e,r,o,a)}:i==="moveAfter"?(o,a)=>{ie.moveAfterInternal(e,r,o,a)}:i==="moveFront"?o=>{ie.moveFrontInternal(e,r,o)}:i==="moveLast"?o=>{ie.moveLastInternal(e,r,o)}:w1(i)?Qn(e,r.get(Number(i))):i==="push"?o=>ie.pushInternal(e,r,o):i==="splice"?(o,a,...l)=>ie.splice(e,r,o,a,...l):i==="length"?r.length:typeof i=="symbol"&&i===Symbol.iterator?ie.iteratorInternal.bind(this,e,r):i==="includes"?(o,a)=>ie.includes(e,r,o,a):i==="indexOf"?(o,a)=>ie.indexOf(e,r,o,a):i==="lastIndexOf"?(o,a)=>ie.lastIndexOf(e,r,o,a):i==="toJSForTest"?()=>r.toJSForTest():i==="toTestString"?()=>ie.toTestString(r):typeof i=="string"&&S1(i)?(...o)=>{const a=Array.from(r).map(l=>Qn(e,l));return Array.prototype[i].apply(a,o)}:Reflect.get(r,i,s),deleteProperty:(r,i)=>(F.isEnabled(Le.Trivial)&&F.trivial(`array[${i}]`),ie.deleteInternalByIndex(e,r,Number.parseInt(i)),!0)}}static*iteratorInternal(e,n){for(const r of n)yield yn(e,r)}static buildArrayElements(e,n){const r=[];for(const i of n){const s=e.issueTimeTicket(),o=$o(e,i,s);r.push(o)}return r}static pushInternal(e,n,r){return ie.insertAfterInternal(e,n,n.getLastCreatedAt(),r),n.length}static moveBeforeInternal(e,n,r,i){const s=e.issueTimeTicket(),o=n.getPrevCreatedAt(r);n.moveAfter(o,i,s),e.push(Nn.create(n.getCreatedAt(),o,i,s))}static moveAfterInternal(e,n,r,i){const s=e.issueTimeTicket();n.moveAfter(r,i,s),e.push(Nn.create(n.getCreatedAt(),r,i,s))}static moveFrontInternal(e,n,r){const i=e.issueTimeTicket(),s=n.getHead();n.moveAfter(s.getCreatedAt(),r,i),e.push(Nn.create(n.getCreatedAt(),s.getCreatedAt(),r,i))}static moveLastInternal(e,n,r){const i=e.issueTimeTicket(),s=n.getLastCreatedAt();n.moveAfter(s,r,i),e.push(Nn.create(n.getCreatedAt(),s,r,i))}static insertAfterInternal(e,n,r,i){const s=e.issueTimeTicket(),o=$o(e,i,s);return n.insertAfter(r,o),e.registerElement(o,n),e.push(gs.create(n.getCreatedAt(),r,o.deepcopy(),s)),o}static insertBeforeInternal(e,n,r,i){return ie.insertAfterInternal(e,n,n.getPrevCreatedAt(r),i)}static deleteInternalByIndex(e,n,r){const i=e.issueTimeTicket(),s=n.deleteByIndex(r,i);if(s)return e.push(Un.create(n.getCreatedAt(),s.getCreatedAt(),i)),e.registerRemovedElement(s),s}static deleteInternalByID(e,n,r){const i=e.issueTimeTicket(),s=n.delete(r,i);return e.push(Un.create(n.getCreatedAt(),s.getCreatedAt(),i)),e.registerRemovedElement(s),s}static splice(e,n,r,i,...s){const o=n.length,a=r>=0?Math.min(r,o):Math.max(o+r,0),l=i===void 0?o:i<0?a:Math.min(a+i,o),u=[];for(let c=a;c<l;c++){const h=ie.deleteInternalByIndex(e,n,a);if(h){const g=h.deepcopy();g.setRemovedAt(),u.push(Qn(e,g))}}if(s){let c=a===0?n.getHead().getID():n.get(a-1).getID();for(const h of s)c=ie.insertAfterInternal(e,n,c,h).getID()}return u}static includes(e,n,r,i){var a;const s=n.length,o=i===void 0?0:i<0?Math.max(i+s,0):i;if(o>=s)return!1;if(te.isSupport(r))return Array.from(n).map(u=>Qn(e,u)).includes(r,o);for(let l=o;l<s;l++)if(((a=n.get(l))==null?void 0:a.getID())===r.getID())return!0;return!1}static indexOf(e,n,r,i){var a;const s=n.length,o=i===void 0?0:i<0?Math.max(i+s,0):i;if(o>=s)return-1;if(te.isSupport(r))return Array.from(n).map(u=>Qn(e,u)).indexOf(r,o);for(let l=o;l<s;l++)if(((a=n.get(l))==null?void 0:a.getID())===r.getID())return l;return-1}static lastIndexOf(e,n,r,i){var a;const s=n.length,o=i===void 0||i>=s?s-1:i<0?i+s:i;if(o<0)return-1;if(te.isSupport(r))return Array.from(n).map(u=>Qn(e,u)).lastIndexOf(r,o);for(let l=o;l>0;l--)if(((a=n.get(l))==null?void 0:a.getID())===r.getID())return l;return-1}static toTestString(e){return e.toTestString()}getHandlers(){return this.handlers}}class la{constructor(e,n){m(this,"context");m(this,"text");this.context=e,this.text=n}initialize(e,n){this.context=e,this.text=n}getID(){return this.text.getID()}edit(e,n,r,i){if(!this.context||!this.text)throw new T(S.ErrNotInitialized,"Text is not initialized yet");if(e>n)throw new T(S.ErrInvalidArgument,"from should be less than or equal to to");const s=this.text.indexRangeToPosRange(e,n);F.isEnabled(Le.Debug)&&F.debug(`EDIT: f:${e}->${s[0].toTestString()}, t:${n}->${s[1].toTestString()} c:${r}`);const o=i?Zr(i):void 0,a=this.context.issueTimeTicket(),[l,,u,c]=this.text.edit(s,r,a,o);for(const h of u)this.context.registerGCPair(h);return this.context.push(new ps(this.text.getCreatedAt(),s[0],s[1],l,r,o?new Map(Object.entries(o)):new Map,a)),this.text.findIndexesFromRange(c)}delete(e,n){return this.edit(e,n,"")}empty(){return this.edit(0,this.length,"")}setStyle(e,n,r){if(!this.context||!this.text)throw new T(S.ErrNotInitialized,"Text is not initialized yet");if(e>n)throw new T(S.ErrInvalidArgument,"from should be less than or equal to to");const i=this.text.indexRangeToPosRange(e,n);F.isEnabled(Le.Debug)&&F.debug(`STYL: f:${e}->${i[0].toTestString()}, t:${n}->${i[1].toTestString()} a:${JSON.stringify(r)}`);const s=Zr(r),o=this.context.issueTimeTicket(),[a,l]=this.text.setStyle(i,s,o);for(const u of l)this.context.registerGCPair(u);return this.context.push(new ms(this.text.getCreatedAt(),i[0],i[1],a,new Map(Object.entries(s)),o)),!0}indexRangeToPosRange(e){if(!this.context||!this.text)throw new T(S.ErrNotInitialized,"Text is not initialized yet");const n=this.text.indexRangeToPosRange(e[0],e[1]);return[n[0].toStruct(),n[1].toStruct()]}posRangeToIndexRange(e){if(!this.context||!this.text)throw new T(S.ErrNotInitialized,"Text is not initialized yet");const n=this.text.findIndexesFromRange([xt.fromStruct(e[0]),xt.fromStruct(e[1])]);return[n[0],n[1]]}toTestString(){if(!this.context||!this.text)throw new T(S.ErrNotInitialized,"Text is not initialized yet");return this.text.toTestString()}values(){if(!this.context||!this.text)throw new T(S.ErrNotInitialized,"Text is not initialized yet");return this.text.values()}get length(){return this.text.length}getTreeByIndex(){return this.text.getTreeByIndex()}getTreeByID(){return this.text.getTreeByID()}toString(){if(!this.context||!this.text)throw new T(S.ErrNotInitialized,"Text is not initialized yet");return this.text.toString()}toJSON(){if(!this.context||!this.text)throw new T(S.ErrNotInitialized,"Text is not initialized yet");return this.text.toJSON()}toJSForTest(){if(!this.context||!this.text)throw new T(S.ErrNotInitialized,"Text is not initialized yet");return this.text.toJSForTest()}createRangeForTest(e,n){if(!this.context||!this.text)throw new T(S.ErrNotInitialized,"Text is not initialized yet");return this.text.indexRangeToPosRange(e,n)}}class ua{constructor(e,n){m(this,"valueType");m(this,"value");m(this,"context");m(this,"counter");this.valueType=e,this.value=n}initialize(e,n){this.valueType=n.getValueType(),this.context=e,this.counter=n,this.value=n.getValue()}getID(){return this.counter.getID()}getValue(){return this.value}getValueType(){return this.valueType}increase(e){if(!this.context||!this.counter)throw new T(S.ErrNotInitialized,"Counter is not initialized yet");const n=this.context.issueTimeTicket(),r=te.of(e,n);if(!r.isNumericType())throw new TypeError(`Unsupported type of value: ${typeof r.getValue()}`);return this.counter.increase(r),this.context.push(ni.create(this.counter.getCreatedAt(),r,n)),this}toJSForTest(){if(!this.context||!this.counter)throw new T(S.ErrNotInitialized,"Counter is not initialized yet");return this.counter.toJSForTest()}}function lc(t,e,n){const{type:r}=t,i=n.issueTimeTicket();if(r===on){Jp(t);const{value:s}=t,o=Ze.create(Ie.of(i,0),r,s);e.append(o)}else{const{children:s=[]}=t;let{attributes:o}=t,a;if(typeof o=="object"&&!mp(o)){o=Zr(o),a=new dn;for(const[u,c]of Object.entries(o))a.set(u,c,i)}const l=Ze.create(Ie.of(i,0),r,void 0,a);e.append(l);for(const u of s)lc(u,l,n)}}function T1(t,e){const{type:n}=e,r=t.issueTimeTicket();let i;if(e.type===on){const{value:s}=e;i=Ze.create(Ie.of(r,0),n,s)}else if(e){const{children:s=[]}=e;let{attributes:o}=e,a;if(typeof o=="object"&&!mp(o)){o=Zr(o),a=new dn;for(const[l,u]of Object.entries(o))a.set(l,u,r)}i=Ze.create(Ie.of(t.issueTimeTicket(),0),n,void 0,a);for(const l of s)lc(l,i,t)}return i}function Jp(t){if(!t.value.length)throw new T(S.ErrInvalidArgument,"text node cannot have empty value");return!0}function td(t){if(!t.length)return!0;if(t[0].type===on)for(const n of t){const{type:r}=n;if(r!==on)throw new T(S.ErrInvalidArgument,"element node and text node cannot be passed together");Jp(n)}else for(const n of t){const{type:r}=n;if(r===on)throw new T(S.ErrInvalidArgument,"element node and text node cannot be passed together")}return!0}class ca{constructor(e){m(this,"initialRoot");m(this,"context");m(this,"tree");this.initialRoot=e}initialize(e,n){this.context=e,this.tree=n}getID(){return this.tree.getID()}buildRoot(e){if(!this.initialRoot)return Ze.create(Ie.of(e.issueTimeTicket(),0),kw);const n=Ze.create(Ie.of(e.issueTimeTicket(),0),this.initialRoot.type);for(const r of this.initialRoot.children)lc(r,n,e);return n}getSize(){if(!this.context||!this.tree)throw new T(S.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getSize()}getNodeSize(){if(!this.context||!this.tree)throw new T(S.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getNodeSize()}getIndexTree(){if(!this.context||!this.tree)throw new T(S.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getIndexTree()}styleByPath(e,n){if(!this.context||!this.tree)throw new T(S.ErrNotInitialized,"Tree is not initialized yet");if(!e.length)throw new T(S.ErrInvalidArgument,"path should not be empty");const[r,i]=this.tree.pathToPosRange(e),s=this.context.issueTimeTicket(),o=n?Zr(n):void 0,[a]=this.tree.style([r,i],o,s);this.context.push(an.create(this.tree.getCreatedAt(),r,i,a,o?new Map(Object.entries(o)):new Map,s))}style(e,n,r){if(!this.context||!this.tree)throw new T(S.ErrNotInitialized,"Tree is not initialized yet");if(e>n)throw new T(S.ErrInvalidArgument,"from should be less than or equal to to");const i=this.tree.findPos(e),s=this.tree.findPos(n),o=this.context.issueTimeTicket(),a=r?Zr(r):void 0,[l,u]=this.tree.style([i,s],a,o);for(const c of u)this.context.registerGCPair(c);this.context.push(an.create(this.tree.getCreatedAt(),i,s,l,a?new Map(Object.entries(a)):new Map,o))}removeStyle(e,n,r){if(!this.context||!this.tree)throw new T(S.ErrNotInitialized,"Tree is not initialized yet");if(e>n)throw new T(S.ErrInvalidArgument,"from should be less than or equal to to");const i=this.tree.findPos(e),s=this.tree.findPos(n),o=this.context.issueTimeTicket(),[a,l]=this.tree.removeStyle([i,s],r,o);for(const u of l)this.context.registerGCPair(u);this.context.push(an.createTreeRemoveStyleOperation(this.tree.getCreatedAt(),i,s,a,r,o))}editInternal(e,n,r,i=0){var u;if(r.length!==0&&r[0]&&(td(r),r[0].type!==on))for(const c of r){const{children:h=[]}=c;td(h)}const s=this.context.getLastTimeTicket();let o=new Array;if(((u=r[0])==null?void 0:u.type)===on){let c="";for(const h of r){const{value:g}=h;c+=g}o.push(Ze.create(Ie.of(this.context.issueTimeTicket(),0),on,c))}else o=r.map(c=>c&&T1(this.context,c)).filter(c=>c);const[,a,l]=this.tree.edit([e,n],o.length?o.map(c=>c==null?void 0:c.deepcopy()):void 0,i,s,()=>this.context.issueTimeTicket());for(const c of a)this.context.registerGCPair(c);return this.context.push(ys.create(this.tree.getCreatedAt(),e,n,o.length?o:void 0,i,l,s)),!0}editByPath(e,n,r,i=0){if(!this.context||!this.tree)throw new T(S.ErrNotInitialized,"Tree is not initialized yet");if(e.length!==n.length)throw new T(S.ErrInvalidArgument,"path length should be equal");if(!e.length||!n.length)throw new T(S.ErrInvalidArgument,"path should not be empty");const s=this.tree.pathToPos(e),o=this.tree.pathToPos(n);return this.editInternal(s,o,r?[r]:[],i)}editBulkByPath(e,n,r,i=0){if(!this.context||!this.tree)throw new T(S.ErrNotInitialized,"Tree is not initialized yet");if(e.length!==n.length)throw new T(S.ErrInvalidArgument,"path length should be equal");if(!e.length||!n.length)throw new T(S.ErrInvalidArgument,"path should not be empty");const s=this.tree.pathToPos(e),o=this.tree.pathToPos(n);return this.editInternal(s,o,r,i)}edit(e,n,r,i=0){if(!this.context||!this.tree)throw new T(S.ErrNotInitialized,"Tree is not initialized yet");if(e>n)throw new T(S.ErrInvalidArgument,"from should be less than or equal to to");const s=this.tree.findPos(e),o=this.tree.findPos(n);return this.editInternal(s,o,r?[r]:[],i)}editBulk(e,n,r,i=0){if(!this.context||!this.tree)throw new T(S.ErrNotInitialized,"Tree is not initialized yet");if(e>n)throw new T(S.ErrInvalidArgument,"from should be less than or equal to to");const s=this.tree.findPos(e),o=this.tree.findPos(n);return this.editInternal(s,o,r,i)}toXML(){if(!this.context||!this.tree)throw new T(S.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toXML()}toJSON(){if(!this.context||!this.tree)throw new T(S.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toJSON()}toJSForTest(){if(!this.context||!this.tree)throw new T(S.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toJSForTest()}toJSInfoForTest(){if(!this.context||!this.tree)throw new T(S.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toJSInfoForTest()}getRootTreeNode(){if(!this.context||!this.tree)throw new T(S.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getRootTreeNode()}indexToPath(e){if(!this.context||!this.tree)throw new T(S.ErrNotInitialized,"Tree is not initialized yet");return this.tree.indexToPath(e)}pathToIndex(e){if(!this.context||!this.tree)throw new T(S.ErrNotInitialized,"Tree is not initialized yet");return this.tree.pathToIndex(e)}pathRangeToPosRange(e){if(!this.context||!this.tree)throw new T(S.ErrNotInitialized,"Tree is not initialized yet");const n=[this.tree.pathToIndex(e[0]),this.tree.pathToIndex(e[1])],r=this.tree.indexRangeToPosRange(n);return[r[0].toStruct(),r[1].toStruct()]}indexRangeToPosRange(e){if(!this.context||!this.tree)throw new T(S.ErrNotInitialized,"Tree is not initialized yet");return this.tree.indexRangeToPosStructRange(e)}posRangeToIndexRange(e){if(!this.context||!this.tree)throw new T(S.ErrNotInitialized,"Tree is not initialized yet");const n=[At.fromStruct(e[0]),At.fromStruct(e[1])];return this.tree.posRangeToIndexRange(n)}posRangeToPathRange(e){if(!this.context||!this.tree)throw new T(S.ErrNotInitialized,"Tree is not initialized yet");const n=[At.fromStruct(e[0]),At.fromStruct(e[1])];return this.tree.posRangeToPathRange(n)}}function nd(t,e){return Vp(t,e)}function yn(t,e){if(e){if(e instanceof te)return e;if(e instanceof He)return Vp(t,e);if(e instanceof tt)return v1(t,e);if(e instanceof gt)return new la(t,e);if(e instanceof nt){const n=new ua(Ht.IntegerCnt,0);return n.initialize(t,e),n}else if(e instanceof pt){const n=new ca;return n.initialize(t,e),n}}else return;throw new TypeError(`Unsupported type of element: ${typeof e}`)}function Qn(t,e){const n=yn(t,e);return n instanceof te?n.getValue():n}function $o(t,e,n){let r;if(te.isSupport(e))r=te.of(e,n);else if(Array.isArray(e))r=tt.create(n,ie.buildArrayElements(t,e));else if(typeof e=="object")e instanceof la?(r=gt.create(ti.create(),n),e.initialize(t,r)):e instanceof ua?(r=nt.create(e.getValueType(),e.getValue(),n),e.initialize(t,r)):e instanceof ca?(r=pt.create(e.buildRoot(t),n),e.initialize(t,r)):r=He.create(n,as.buildObjectMembers(t,e));else throw new TypeError(`Unsupported type of value: ${typeof e}`);return r}const rd=50;class k1{constructor(){m(this,"undoStack",[]);m(this,"redoStack",[])}hasUndo(){return this.undoStack.length>0}hasRedo(){return this.redoStack.length>0}pushUndo(e){this.undoStack.length>=rd&&this.undoStack.shift(),this.undoStack.push(e)}popUndo(){return this.undoStack.pop()}pushRedo(e){this.redoStack.length>=rd&&this.redoStack.shift(),this.redoStack.push(e)}popRedo(){return this.redoStack.pop()}clearRedo(){this.redoStack=[]}getUndoStackForTest(){return this.undoStack}getRedoStackForTest(){return this.redoStack}}const A1="yorkie-devtools-panel",I1="yorkie-devtools-sdk";let wr="disconnected";const id=new Map,oo=new Map;typeof window<"u"&&(window.transactionEventsByDocKey=oo);function Us(t,e){(e!=null&&e.force||wr!=="disconnected")&&window.postMessage({source:I1,...t},"*")}function E1(t){if(!t.isEnableDevtools()||typeof window>"u"||id.has(t.getKey()))return;oo.set(t.getKey(),[]);const e=t.subscribe("all",n=>{n.some(r=>r.type!==$e.StatusChanged&&r.type!==$e.Snapshot&&r.type!==$e.LocalChange&&r.type!==$e.RemoteChange&&r.type!==$e.Initialized&&r.type!==$e.Watched&&r.type!==$e.Unwatched&&r.type!==$e.PresenceChanged)||(oo.get(t.getKey()).push(n),wr==="synced"&&Us({msg:"doc::sync::partial",docKey:t.getKey(),event:n}))});id.set(t.getKey(),[e]),Us({msg:"refresh-devtools"},{force:!0}),window.addEventListener("message",n=>{var i;if(((i=n.data)==null?void 0:i.source)!==A1)return;switch(n.data.msg){case"devtools::connect":if(wr!=="disconnected")break;wr="connected",Us({msg:"doc::available",docKey:t.getKey()}),F.info(`[YD] Devtools connected. Doc: ${t.getKey()}`);break;case"devtools::disconnect":wr="disconnected",F.info(`[YD] Devtools disconnected. Doc: ${t.getKey()}`);break;case"devtools::subscribe":wr="synced",Us({msg:"doc::sync::full",docKey:t.getKey(),events:oo.get(t.getKey())}),F.info(`[YD] Devtools subscribed. Doc: ${t.getKey()}`);break}})}var vn=(t=>(t.Detached="detached",t.Attached="attached",t.Removed="removed",t))(vn||{}),$e=(t=>(t.StatusChanged="status-changed",t.ConnectionChanged="connection-changed",t.SyncStatusChanged="sync-status-changed",t.Snapshot="snapshot",t.LocalChange="local-change",t.RemoteChange="remote-change",t.Initialized="initialized",t.Watched="watched",t.Unwatched="unwatched",t.PresenceChanged="presence-changed",t))($e||{}),Gl=(t=>(t.Connected="connected",t.Disconnected="disconnected",t))(Gl||{}),Yl=(t=>(t.Synced="synced",t.SyncFailed="sync-failed",t))(Yl||{});class Kp{constructor(e,n){m(this,"key");m(this,"status");m(this,"opts");m(this,"changeID");m(this,"checkpoint");m(this,"localChanges");m(this,"root");m(this,"clone");m(this,"eventStream");m(this,"eventStreamObserver");m(this,"onlineClients");m(this,"presences");m(this,"history");m(this,"internalHistory");m(this,"isUpdating");this.opts=n||{},this.key=e,this.status="detached",this.root=os.create(),this.changeID=Ow,this.checkpoint=Dw,this.localChanges=[],this.eventStream=y1(r=>{this.eventStreamObserver=r}),this.onlineClients=new Set,this.presences=new Map,this.isUpdating=!1,this.internalHistory=new k1,this.history={canUndo:this.canUndo.bind(this),canRedo:this.canRedo.bind(this),undo:this.undo.bind(this),redo:this.redo.bind(this)},E1(this)}update(e,n){if(this.getStatus()==="removed")throw new T(S.ErrDocumentRemoved,`${this.key} is removed`);this.ensureClone();const r=this.changeID.getActorID(),i=_r.create(this.changeID.next(),this.clone.root,this.clone.presences.get(r)||{},n);try{const s=nd(i,this.clone.root.getObject());this.presences.has(r)||this.clone.presences.set(r,{}),this.isUpdating=!0,e(s,new Ja(i,this.clone.presences.get(r)))}catch(s){throw this.clone=void 0,s}finally{this.isUpdating=!1}if(i.hasChange()){F.isEnabled(Le.Trivial)&&F.trivial(`trying to update a local change: ${this.toJSON()}`);const s=i.getChange(),{opInfos:o,reverseOps:a}=s.execute(this.root,this.presences,G.Local),l=i.getReversePresence();l&&a.push({type:"presence",value:l}),this.localChanges.push(s),a.length>0&&this.internalHistory.pushUndo(a),o.length>0&&this.internalHistory.clearRedo(),this.changeID=s.getID();const u=[];o.length>0&&u.push({type:"local-change",source:G.Local,value:{message:s.getMessage()||"",operations:o,actor:r,clientSeq:s.getID().getClientSeq(),serverSeq:s.getID().getServerSeq()},rawChange:this.isEnableDevtools()?s.toStruct():void 0}),s.hasPresenceChange()&&u.push({type:"presence-changed",source:G.Local,value:{clientID:r,presence:this.getPresence(r)}}),this.publish(u),F.isEnabled(Le.Trivial)&&F.trivial(`after update a local change: ${this.toJSON()}`)}}subscribe(e,n,r,i){if(typeof e=="string"){if(typeof n!="function")throw new T(S.ErrInvalidArgument,"Second argument must be a callback function");if(e==="presence"){const a=n;return this.eventStream.subscribe(l=>{for(const u of l)u.type!=="initialized"&&u.type!=="watched"&&u.type!=="unwatched"&&u.type!=="presence-changed"||a(u)},r,i)}if(e==="my-presence"){const a=n;return this.eventStream.subscribe(l=>{for(const u of l)u.type!=="initialized"&&u.type!=="presence-changed"||u.type==="presence-changed"&&u.value.clientID!==this.changeID.getActorID()||a(u)},r,i)}if(e==="others"){const a=n;return this.eventStream.subscribe(l=>{for(const u of l)u.type!=="watched"&&u.type!=="unwatched"&&u.type!=="presence-changed"||u.value.clientID!==this.changeID.getActorID()&&a(u)},r,i)}if(e==="connection"){const a=n;return this.eventStream.subscribe(l=>{for(const u of l)u.type==="connection-changed"&&a(u)},r,i)}if(e==="status"){const a=n;return this.eventStream.subscribe(l=>{for(const u of l)u.type==="status-changed"&&a(u)},r,i)}if(e==="sync"){const a=n;return this.eventStream.subscribe(l=>{for(const u of l)u.type==="sync-status-changed"&&a(u)},r,i)}if(e==="all"){const a=n;return this.eventStream.subscribe(a,r,i)}const s=e,o=n;return this.eventStream.subscribe(a=>{for(const l of a){if(l.type!=="local-change"&&l.type!=="remote-change")continue;const u=[];for(const c of l.value.operations)this.isSameElementOrChildOf(c.path,s)&&u.push(c);u.length&&o({...l,value:{...l.value,operations:u}})}},r,i)}if(typeof e=="function"){const s=e,o=n,a=r;return this.eventStream.subscribe(l=>{for(const u of l)u.type!=="snapshot"&&u.type!=="local-change"&&u.type!=="remote-change"||s(u)},o,a)}throw new T(S.ErrInvalidArgument,`"${e}" is not a valid`)}publish(e){this.eventStreamObserver&&this.eventStreamObserver.next(e)}isSameElementOrChildOf(e,n){if(n===e)return!0;const r=e.split(".");return n.split(".").every((s,o)=>s===r[o])}applyChangePack(e){for(e.hasSnapshot()?this.applySnapshot(e.getCheckpoint().getServerSeq(),e.getSnapshot()):e.hasChanges()&&this.applyChanges(e.getChanges(),G.Remote);this.localChanges.length&&!(this.localChanges[0].getID().getClientSeq()>e.getCheckpoint().getClientSeq());)this.localChanges.shift();e.hasSnapshot()&&this.applyChanges(this.localChanges,G.Remote),this.checkpoint=this.checkpoint.forward(e.getCheckpoint()),this.garbageCollect(e.getMinSyncedTicket()),e.getIsRemoved()&&this.applyStatus("removed"),F.isEnabled(Le.Trivial)&&F.trivial(`${this.root.toJSON()}`)}getCheckpoint(){return this.checkpoint}getChangeID(){return this.changeID}hasLocalChanges(){return this.localChanges.length>0}ensureClone(){this.clone||(this.clone={root:this.root.deepcopy(),presences:wt(this.presences)})}createChangePack(){const e=Array.from(this.localChanges),n=this.checkpoint.increaseClientSeq(e.length);return aa.create(this.key,n,!1,e)}setActor(e){for(const n of this.localChanges)n.setActor(e);this.changeID=this.changeID.setActor(e)}isEnableDevtools(){return!!this.opts.enableDevtools}getKey(){return this.key}getStatus(){return this.status}getCloneRoot(){if(this.clone)return this.clone.root.getObject()}getRoot(){this.ensureClone();const e=_r.create(this.changeID.next(),this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});return nd(e,this.clone.root.getObject())}garbageCollect(e){return this.opts.disableGC?0:(this.clone&&this.clone.root.garbageCollect(e),this.root.garbageCollect(e))}getRootObject(){return this.root.getObject()}getGarbageLen(){return this.root.getGarbageLen()}getGarbageLenFromClone(){return this.clone.root.getGarbageLen()}toJSON(){return this.root.toJSON()}toSortedJSON(){return this.root.toSortedJSON()}toJSForTest(){return{...this.getRoot().toJSForTest(),key:"root"}}applySnapshot(e,n){const{root:r,presences:i}=ye.bytesToSnapshot(n);this.root=new os(r),this.presences=i,this.changeID=this.changeID.syncLamport(e),this.clone=void 0,this.publish([{type:"snapshot",source:G.Remote,value:{snapshot:this.isEnableDevtools()?ye.bytesToHex(n):void 0,serverSeq:e.toString()}}])}applyChanges(e,n){F.isEnabled(Le.Debug)&&F.debug(`trying to apply ${e.length} remote changes.elements:${this.root.getElementMapSize()}, removeds:${this.root.getGarbageElementSetSize()}`),F.isEnabled(Le.Trivial)&&F.trivial(e.map(r=>`${r.getID().toTestString()}	${r.toTestString()}`).join(`
`));for(const r of e)this.applyChange(r,n);F.isEnabled(Le.Debug)&&F.debug(`after appling ${e.length} remote changes.elements:${this.root.getElementMapSize()},  removeds:${this.root.getGarbageElementSetSize()}`)}applyChange(e,n){this.ensureClone(),e.execute(this.clone.root,this.clone.presences,n);const r=[],i=e.getID().getActorID();if(e.hasPresenceChange()&&this.onlineClients.has(i)){const o=e.getPresenceChange();switch(o.type){case zn.Put:r.push(this.presences.has(i)?{type:"presence-changed",source:n,value:{clientID:i,presence:o.presence}}:{type:"watched",source:G.Remote,value:{clientID:i,presence:o.presence}});break;case zn.Clear:r.push({type:"unwatched",source:G.Remote,value:{clientID:i,presence:this.getPresence(i)}}),this.removeOnlineClient(i);break}}const{opInfos:s}=e.execute(this.root,this.presences,n);if(this.changeID=this.changeID.syncLamport(e.getID().getLamport()),s.length>0){const o=this.isEnableDevtools()?e.toStruct():void 0;r.push(n===G.Remote?{type:"remote-change",source:n,value:{actor:i,clientSeq:e.getID().getClientSeq(),serverSeq:e.getID().getServerSeq(),message:e.getMessage()||"",operations:s},rawChange:o}:{type:"local-change",source:n,value:{actor:i,clientSeq:e.getID().getClientSeq(),serverSeq:e.getID().getServerSeq(),message:e.getMessage()||"",operations:s},rawChange:o})}r.length>0&&this.publish(r)}applyWatchStream(e){if(e.body.case==="initialization"){const n=e.body.value.clientIds,r=new Set;for(const i of n)i!==this.changeID.getActorID()&&r.add(i);this.setOnlineClients(r),this.publish([{type:"initialized",source:G.Local,value:this.getPresences()}]);return}if(e.body.case==="event"){const{type:n,publisher:r}=e.body.value,i=[];if(n===bo.DOCUMENT_WATCHED)this.addOnlineClient(r),this.hasPresence(r)&&i.push({type:"watched",source:G.Remote,value:{clientID:r,presence:this.getPresence(r)}});else if(n===bo.DOCUMENT_UNWATCHED){const s=this.getPresence(r);this.removeOnlineClient(r),s&&i.push({type:"unwatched",source:G.Remote,value:{clientID:r,presence:s}})}i.length>0&&this.publish(i)}}applyStatus(e){this.status=e,e==="detached"&&this.setActor(sa),this.publish([{source:e==="removed"?G.Remote:G.Local,type:"status-changed",value:e==="attached"?{status:e,actorID:this.changeID.getActorID()}:{status:e}}])}applyDocEvent(e){if(e.type==="status-changed"){this.applyStatus(e.value.status),e.value.status==="attached"&&this.setActor(e.value.actorID);return}if(e.type==="snapshot"){const{snapshot:n,serverSeq:r}=e.value;if(!n)return;this.applySnapshot(B.fromString(r),ye.hexToBytes(n));return}if(e.type==="local-change"||e.type==="remote-change"){if(!e.rawChange)return;const n=ei.fromStruct(e.rawChange);this.applyChange(n,e.source)}if(e.type==="initialized"){const n=new Set;for(const{clientID:r,presence:i}of e.value)n.add(r),this.presences.set(r,i);this.setOnlineClients(n);return}if(e.type==="watched"){const{clientID:n,presence:r}=e.value;this.addOnlineClient(n),this.presences.set(n,r);return}if(e.type==="unwatched"){const{clientID:n}=e.value;this.removeOnlineClient(n),this.presences.delete(n)}if(e.type==="presence-changed"){const{clientID:n,presence:r}=e.value;this.presences.set(n,r)}}applyTransactionEvent(e){for(const n of e)this.applyDocEvent(n)}getValueByPath(e){if(!e.startsWith("$"))throw new T(S.ErrInvalidArgument,'path must start with "$"');const n=e.split(".");n.shift();let r=this.getRoot();for(const i of n)if(r=r[i],r===void 0)return;return r}setOnlineClients(e){this.onlineClients=e}resetOnlineClients(){this.onlineClients=new Set}addOnlineClient(e){this.onlineClients.add(e)}removeOnlineClient(e){this.onlineClients.delete(e)}hasPresence(e){return this.presences.has(e)}getMyPresence(){if(this.status!=="attached")return{};const e=this.presences.get(this.changeID.getActorID());return e?wt(e):{}}getPresence(e){if(e===this.changeID.getActorID())return this.getMyPresence();if(!this.onlineClients.has(e))return;const n=this.presences.get(e);return n?wt(n):void 0}getPresenceForTest(e){const n=this.presences.get(e);return n?wt(n):void 0}getPresences(){const e=[];e.push({clientID:this.changeID.getActorID(),presence:wt(this.getMyPresence())});for(const n of this.onlineClients)this.presences.has(n)&&e.push({clientID:n,presence:wt(this.presences.get(n))});return e}getSelfForTest(){return{clientID:this.getChangeID().getActorID(),presence:this.getMyPresence()}}getOthersForTest(){const e=this.getChangeID().getActorID();return this.getPresences().filter(n=>n.clientID!==e).sort((n,r)=>n.clientID>r.clientID?1:-1)}canUndo(){return this.internalHistory.hasUndo()&&!this.isUpdating}canRedo(){return this.internalHistory.hasRedo()&&!this.isUpdating}undo(){if(this.isUpdating)throw new T(S.ErrRefused,"Undo is not allowed during an update");const e=this.internalHistory.popUndo();if(e===void 0)throw new T(S.ErrRefused,"There is no operation to be undone");this.ensureClone();const n=_r.create(this.changeID.next(),this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});for(const u of e){if(!(u instanceof Pt)){new Ja(n,wt(this.clone.presences.get(this.changeID.getActorID()))).set(u.value,{addToHistory:!0});continue}const c=n.issueTimeTicket();u.setExecutedAt(c),n.push(u)}const r=n.getChange();r.execute(this.clone.root,this.clone.presences,G.UndoRedo);const{opInfos:i,reverseOps:s}=r.execute(this.root,this.presences,G.UndoRedo),o=n.getReversePresence();if(o&&s.push({type:"presence",value:o}),s.length>0&&this.internalHistory.pushRedo(s),!r.hasPresenceChange()&&i.length===0)return;this.localChanges.push(r),this.changeID=r.getID();const a=this.changeID.getActorID(),l=[];i.length>0&&l.push({type:"local-change",source:G.UndoRedo,value:{message:r.getMessage()||"",operations:i,actor:a,clientSeq:r.getID().getClientSeq(),serverSeq:r.getID().getServerSeq()},rawChange:this.isEnableDevtools()?r.toStruct():void 0}),r.hasPresenceChange()&&l.push({type:"presence-changed",source:G.UndoRedo,value:{clientID:a,presence:this.getPresence(a)}}),this.publish(l)}redo(){if(this.isUpdating)throw new T(S.ErrRefused,"Redo is not allowed during an update");const e=this.internalHistory.popRedo();if(e===void 0)throw new T(S.ErrRefused,"There is no operation to be redone");this.ensureClone();const n=_r.create(this.changeID.next(),this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});for(const u of e){if(!(u instanceof Pt)){new Ja(n,wt(this.clone.presences.get(this.changeID.getActorID()))).set(u.value,{addToHistory:!0});continue}const c=n.issueTimeTicket();u.setExecutedAt(c),n.push(u)}const r=n.getChange();r.execute(this.clone.root,this.clone.presences,G.UndoRedo);const{opInfos:i,reverseOps:s}=r.execute(this.root,this.presences,G.UndoRedo),o=n.getReversePresence();if(o&&s.push({type:"presence",value:o}),s.length>0&&this.internalHistory.pushUndo(s),!r.hasPresenceChange()&&i.length===0)return;this.localChanges.push(r),this.changeID=r.getID();const a=this.changeID.getActorID(),l=[];i.length>0&&l.push({type:"local-change",source:G.UndoRedo,value:{message:r.getMessage()||"",operations:i,actor:a,clientSeq:r.getID().getClientSeq(),serverSeq:r.getID().getServerSeq()},rawChange:this.isEnableDevtools()?r.toStruct():void 0}),r.hasPresenceChange()&&l.push({type:"presence-changed",source:G.UndoRedo,value:{clientID:a,presence:this.getPresence(a)}}),this.publish(l)}getUndoStackForTest(){return this.internalHistory.getUndoStackForTest()}getRedoStackForTest(){return this.internalHistory.getRedoStackForTest()}}function N1(t,e){return n=>async r=>(t&&r.header.set("x-api-key",t),e&&r.header.set("authorization",e),await n(r))}const x1="yorkie-js-sdk",C1="0.4.31",P1="Yorkie JS SDK",O1="./src/yorkie.ts",D1={access:"public",main:"./dist/yorkie-js-sdk.js",typings:"./dist/yorkie-js-sdk.d.ts"},R1=["dist"],_1={build:"tsc && vite build","build:proto":"npx buf generate","build:docs":"typedoc","build:ghpages":"mkdir -p ghpages/examples && cp -r docs ghpages/api-reference && find ../../examples -name 'dist' -type d -exec sh -c 'cp -r {} ghpages/examples/$(basename $(dirname {}))' \\;",dev:"vite build -c vite.preview.ts && vite preview",test:"vitest run","test:watch":"vitest","test:bench":"vitest bench","test:ci":"vitest run --coverage","test:yorkie.dev":"TEST_RPC_ADDR=https://api.yorkie.dev vitest run --coverage",lint:"eslint . --fix --max-warnings=0 --ext .ts",prepare:"pnpm build"},L1={node:">=18.0.0",npm:">=7.1.0"},b1={type:"git",url:"git+https://github.com/yorkie-team/yorkie-js-sdk.git"},M1={name:"hackerwins",email:"susukang98@gmail.com"},F1="Apache-2.0",B1={url:"https://github.com/yorkie-team/yorkie-js-sdk/issues"},$1="https://github.com/yorkie-team/yorkie-js-sdk#readme",z1={"@buf/googleapis_googleapis.bufbuild_es":"^1.4.0-20240524201209-f0e53af8f2fc.3","@bufbuild/buf":"^1.28.1","@bufbuild/protoc-gen-es":"^1.6.0","@connectrpc/protoc-gen-connect-es":"^1.4.0","@types/google-protobuf":"^3.15.5","@types/long":"^4.0.1","@typescript-eslint/eslint-plugin":"^6.21.0","@typescript-eslint/parser":"^6.21.0","@vitest/coverage-istanbul":"^0.34.5","@vitest/coverage-v8":"^0.34.5",eslint:"^8.19.0","eslint-plugin-jsdoc":"^39.3.3","eslint-plugin-prettier":"^4.2.1","eslint-plugin-tsdoc":"^0.2.16",husky:"^8.0.3",prettier:"^2.7.1","ts-node":"^10.9.1",typedoc:"^0.25.13",typescript:"^5.3.3","typescript-transform-paths":"^3.3.1",vite:"^5.0.12","vite-plugin-commonjs":"^0.10.1","vite-plugin-dts":"^3.9.1","vite-tsconfig-paths":"^4.2.1",vitest:"^0.34.5"},U1={"@bufbuild/protobuf":"^1.6.0","@connectrpc/connect":"^1.4.0","@connectrpc/connect-web":"^1.4.0",long:"^5.2.0"},j1={hooks:{"pre-commit":"pnpm lint"}},sd={name:x1,version:C1,description:P1,main:O1,publishConfig:D1,files:R1,scripts:_1,engines:L1,repository:b1,author:M1,license:F1,bugs:B1,homepage:$1,devDependencies:z1,dependencies:U1,husky:j1};function V1(){return t=>async e=>(e.header.set("x-yorkie-user-agent",sd.name+"/"+sd.version),await t(e))}var ao=(t=>(t.Manual="manual",t.Realtime="realtime",t.RealtimePushOnly="realtime-pushonly",t.RealtimeSyncOff="realtime-syncoff",t))(ao||{});const js={syncLoopDuration:50,retrySyncLoopDelay:1e3,reconnectStreamDelay:1e3};class Wp{constructor(e,n){m(this,"id");m(this,"key");m(this,"status");m(this,"attachmentMap");m(this,"apiKey");m(this,"conditions");m(this,"syncLoopDuration");m(this,"reconnectStreamDelay");m(this,"retrySyncLoopDelay");m(this,"rpcClient");m(this,"taskQueue");m(this,"processing",!1);n=n||js,this.key=n.key?n.key:jp(),this.status="deactivated",this.attachmentMap=new Map,this.apiKey=n.apiKey||"",this.conditions={SyncLoop:!1,WatchLoop:!1},this.syncLoopDuration=n.syncLoopDuration||js.syncLoopDuration,this.reconnectStreamDelay=n.reconnectStreamDelay||js.reconnectStreamDelay,this.retrySyncLoopDelay=n.retrySyncLoopDelay||js.retrySyncLoopDelay,this.rpcClient=S0(fw,j0({baseUrl:e,interceptors:[N1(n.apiKey,n.token),V1()]})),this.taskQueue=[]}activate(){return this.isActive()?Promise.resolve():this.enqueueTask(async()=>this.rpcClient.activateClient({clientKey:this.key},{headers:{"x-shard-key":this.apiKey}}).then(e=>{this.id=e.clientId,this.status="activated",this.runSyncLoop(),F.info(`[AC] c:"${this.getKey()}" activated, id:"${this.id}"`)}).catch(e=>{throw F.error(`[AC] c:"${this.getKey()}" err :`,e),this.handleConnectError(e),e}))}deactivate(){return this.status==="deactivated"?Promise.resolve():this.enqueueTask(async()=>this.rpcClient.deactivateClient({clientId:this.id},{headers:{"x-shard-key":this.apiKey}}).then(()=>{this.deactivateInternal(),F.info(`[DC] c"${this.getKey()}" deactivated`)}).catch(e=>{throw F.error(`[DC] c:"${this.getKey()}" err :`,e),this.handleConnectError(e),e}))}attach(e,n={}){if(!this.isActive())throw new T(S.ErrClientNotActivated,`${this.key} is not active`);if(e.getStatus()!==vn.Detached)throw new T(S.ErrDocumentNotDetached,`${e.getKey()} is not detached`);e.setActor(this.id),e.update((i,s)=>s.set(n.initialPresence||{}));const r=n.syncMode??"realtime";return this.enqueueTask(async()=>this.rpcClient.attachDocument({clientId:this.id,changePack:ye.toChangePack(e.createChangePack())},{headers:{"x-shard-key":`${this.apiKey}/${e.getKey()}`}}).then(async i=>{const s=ye.fromChangePack(i.changePack);return e.applyChangePack(s),e.getStatus()===vn.Removed||(e.applyStatus(vn.Attached),this.attachmentMap.set(e.getKey(),new p1(this.reconnectStreamDelay,e,i.documentId,r)),r!=="manual"&&await this.runWatchLoop(e.getKey()),F.info(`[AD] c:"${this.getKey()}" attaches d:"${e.getKey()}"`)),e}).catch(i=>{throw F.error(`[AD] c:"${this.getKey()}" err :`,i),this.handleConnectError(i),i}))}detach(e,n={}){if(!this.isActive())throw new T(S.ErrClientNotActivated,`${this.key} is not active`);const r=this.attachmentMap.get(e.getKey());if(!r)throw new T(S.ErrDocumentNotAttached,`${e.getKey()} is not attached`);return e.update((i,s)=>s.clear()),this.enqueueTask(async()=>this.rpcClient.detachDocument({clientId:this.id,documentId:r.docID,changePack:ye.toChangePack(e.createChangePack()),removeIfNotAttached:n.removeIfNotAttached??!1},{headers:{"x-shard-key":`${this.apiKey}/${e.getKey()}`}}).then(i=>{const s=ye.fromChangePack(i.changePack);return e.applyChangePack(s),e.getStatus()!==vn.Removed&&e.applyStatus(vn.Detached),this.detachInternal(e.getKey()),F.info(`[DD] c:"${this.getKey()}" detaches d:"${e.getKey()}"`),e}).catch(i=>{throw F.error(`[DD] c:"${this.getKey()}" err :`,i),this.handleConnectError(i),i}))}async changeSyncMode(e,n){if(!this.isActive())throw new T(S.ErrClientNotActivated,`${this.key} is not active`);const r=this.attachmentMap.get(e.getKey());if(!r)throw new T(S.ErrDocumentNotAttached,`${e.getKey()} is not attached`);const i=r.syncMode;return i===n?e:(r.changeSyncMode(n),n==="manual"?(r.cancelWatchStream(),e):(n==="realtime"&&(r.remoteChangeEventReceived=!0),i==="manual"&&await this.runWatchLoop(e.getKey()),e))}sync(e){if(!this.isActive())throw new T(S.ErrClientNotActivated,`${this.key} is not active`);if(e){const n=this.attachmentMap.get(e.getKey());if(!n)throw new T(S.ErrDocumentNotAttached,`${e.getKey()} is not attached`);return this.enqueueTask(async()=>this.syncInternal(n,"realtime").catch(r=>{throw F.error(`[SY] c:"${this.getKey()}" err :`,r),this.handleConnectError(r),r}))}return this.enqueueTask(async()=>{const n=[];for(const[,r]of this.attachmentMap)n.push(this.syncInternal(r,r.syncMode));return Promise.all(n).catch(r=>{throw F.error(`[SY] c:"${this.getKey()}" err :`,r),this.handleConnectError(r),r})})}remove(e){if(!this.isActive())throw new T(S.ErrClientNotActivated,`${this.key} is not active`);const n=this.attachmentMap.get(e.getKey());if(!n)throw new T(S.ErrDocumentNotAttached,`${e.getKey()} is not attached`);e.setActor(this.id);const r=ye.toChangePack(e.createChangePack());return r.isRemoved=!0,this.enqueueTask(async()=>this.rpcClient.removeDocument({clientId:this.id,documentId:n.docID,changePack:r},{headers:{"x-shard-key":`${this.apiKey}/${e.getKey()}`}}).then(i=>{const s=ye.fromChangePack(i.changePack);e.applyChangePack(s),this.detachInternal(e.getKey()),F.info(`[RD] c:"${this.getKey()}" removes d:"${e.getKey()}"`)}).catch(i=>{throw F.error(`[RD] c:"${this.getKey()}" err :`,i),this.handleConnectError(i),i}))}getID(){return this.id}getKey(){return this.key}isActive(){return this.status==="activated"}getStatus(){return this.status}getCondition(e){return this.conditions[e]}runSyncLoop(){const e=()=>{if(!this.isActive()){F.debug(`[SL] c:"${this.getKey()}" exit sync loop`),this.conditions.SyncLoop=!1;return}const n=[];for(const[,r]of this.attachmentMap)r.needRealtimeSync()&&(r.remoteChangeEventReceived=!1,n.push(this.syncInternal(r,r.syncMode)));Promise.all(n).then(()=>setTimeout(e,this.syncLoopDuration)).catch(r=>{F.error(`[SL] c:"${this.getKey()}" sync failed:`,r),this.handleConnectError(r)?setTimeout(e,this.retrySyncLoopDelay):this.conditions.SyncLoop=!1})};F.debug(`[SL] c:"${this.getKey()}" run sync loop`),this.conditions.SyncLoop=!0,e()}async runWatchLoop(e){const n=this.attachmentMap.get(e);if(!n)throw new T(S.ErrDocumentNotAttached,`${e} is not attached`);return this.conditions.WatchLoop=!0,n.runWatchLoop(r=>{if(!this.isActive())return this.conditions.WatchLoop=!1,Promise.reject(new T(S.ErrClientNotActivated,`${this.key} is not active`));const i=new AbortController,s=this.rpcClient.watchDocument({clientId:this.id,documentId:n.docID},{headers:{"x-shard-key":`${this.apiKey}/${e}`},signal:i.signal});return n.doc.publish([{type:$e.ConnectionChanged,value:Gl.Connected}]),F.info(`[WD] c:"${this.getKey()}" watches d:"${e}"`),new Promise((o,a)=>{(async()=>{try{for await(const u of s)this.handleWatchDocumentsResponse(n,u),u.body.case==="initialization"&&o([s,i])}catch(u){n.doc.resetOnlineClients(),n.doc.publish([{type:$e.Initialized,source:G.Local,value:n.doc.getPresences()}]),n.doc.publish([{type:$e.ConnectionChanged,value:Gl.Disconnected}]),F.debug(`[WD] c:"${this.getKey()}" unwatches`),this.handleConnectError(u)?r():this.conditions.WatchLoop=!1,a(u)}})()})})}handleWatchDocumentsResponse(e,n){if(n.body.case==="event"&&n.body.value.type===bo.DOCUMENT_CHANGED){e.remoteChangeEventReceived=!0;return}e.doc.applyWatchStream(n)}deactivateInternal(){this.status="deactivated";for(const[e,n]of this.attachmentMap)this.detachInternal(e),n.doc.applyStatus(vn.Detached)}detachInternal(e){const n=this.attachmentMap.get(e);n&&(n.cancelWatchStream(),this.attachmentMap.delete(e))}syncInternal(e,n){const{doc:r,docID:i}=e,s=r.createChangePack();return this.rpcClient.pushPullChanges({clientId:this.id,documentId:i,changePack:ye.toChangePack(s),pushOnly:n==="realtime-pushonly"},{headers:{"x-shard-key":`${this.apiKey}/${r.getKey()}`}}).then(o=>{const a=ye.fromChangePack(o.changePack);if(a.hasChanges()&&(e.syncMode==="realtime-pushonly"||e.syncMode==="realtime-syncoff"))return r;r.applyChangePack(a),e.doc.publish([{type:$e.SyncStatusChanged,value:Yl.Synced}]),r.getStatus()===vn.Removed&&this.detachInternal(r.getKey());const l=r.getKey(),u=a.getChangeSize();return F.info(`[PP] c:"${this.getKey()}" sync d:"${l}", push:${s.getChangeSize()} pull:${u} cp:${a.getCheckpoint().toTestString()}`),r}).catch(o=>{throw r.publish([{type:$e.SyncStatusChanged,value:Yl.SyncFailed}]),F.error(`[PP] c:"${this.getKey()}" err :`,o),o})}handleConnectError(e){return e instanceof he?e.code===q.Canceled||e.code===q.Unknown||e.code===q.ResourceExhausted||e.code===q.Unavailable?!0:((ed(e)===S.ErrClientNotActivated||ed(e)===S.ErrClientNotFound)&&this.deactivateInternal(),!1):!1}enqueueTask(e){return new Promise((n,r)=>{this.taskQueue.push(()=>e().then(n).catch(r)),this.processing||this.processNext()})}async processNext(){if(this.taskQueue.length===0){this.processing=!1;return}try{this.processing=!0,await this.taskQueue.shift()()}catch{F.error(`[TQ] c:"${this.getKey()}" process failed, id:"${this.id}"`)}this.processNext()}}const qp={Client:Wp,Document:Kp,Primitive:te,Text:la,Counter:ua,Tree:ca,LogLevel:Le,setLogLevel:Up,IntType:Ht.IntegerCnt,LongType:Ht.LongCnt};typeof globalThis<"u"&&(globalThis.yorkie={Client:Wp,Document:Kp,Primitive:te,Text:la,Counter:ua,Tree:ca,LogLevel:Le,setLogLevel:Up,IntType:Ht.IntegerCnt,LongType:Ht.LongCnt});class J1{constructor(e,n){this.x=e,this.y=n,this.lifetime=0}}const K1=({xPos:t,yPos:e})=>{const[n,r]=Ue.useState([]),i=Ue.useRef(null),[s,o]=Ue.useState([]),a=(l,u)=>{const c=new J1(l,u);s.push(c),o(s),n.push(c),r(n)};return Ue.useEffect(()=>{const u=i.current.getContext("2d"),c=()=>{u.clearRect(0,0,u.canvas.width,u.canvas.height);const h=.7*(1*4e3)/60;for(let g=0;g<s.length;++g){const d=s[g];let v;if(s[g-1]!==void 0?v=s[g-1]:v=d,d.lifetime+=1,d.lifetime>h)s.shift();else{u.lineWidth=5,u.lineJoin="round";const I=0,O=0,p=0;u.strokeStyle=`rgb(${I},${O},${p})`,u.beginPath(),u.moveTo(v.x,v.y),u.lineTo(d.x,d.y),u.stroke(),u.closePath()}}requestAnimationFrame(c)};c()},[s]),Ue.useEffect(()=>{a(t,e)},[t,e]),ae.jsx("canvas",{className:"pen-cursor-canvas",ref:i,width:document.body.clientWidth,height:document.body.clientHeight})},W1="_goUp0_1lnal_1",q1="_goUpAnimation0_1lnal_1",H1="_fadeOut_1lnal_1",G1="_goUp1_1lnal_16",Y1="_goUpAnimation1_1lnal_1",Q1="_goUp2_1lnal_31",X1="_goUpAnimation2_1lnal_1",Z1="_leftRight0_1lnal_46",eS="_leftRightAnimation0_1lnal_1",tS="_leftRight1_1lnal_60",nS="_leftRightAnimation1_1lnal_1",rS="_leftRight2_1lnal_74",iS="_leftRightAnimation2_1lnal_1",Ha={goUp0:W1,goUpAnimation0:q1,fadeOut:H1,goUp1:G1,goUpAnimation1:Y1,goUp2:Q1,goUpAnimation2:X1,leftRight0:Z1,leftRightAnimation0:eS,leftRight1:tS,leftRightAnimation1:nS,leftRight2:rS,leftRightAnimation2:iS};function sS({x:t,y:e,timestamp:n,selectedCursorShape:r}){return ae.jsx("div",{className:"single-animation-container",children:ae.jsx("div",{className:`absolute select-none pointer-events-none ${Ha.disappear} text-${n%5+2}xl ${Ha["goUp"+n%3]}`,style:{left:t,top:e},children:ae.jsx("div",{className:Ha["leftRight"+n%3],children:ae.jsx("div",{className:"transform -translate-x-1/2 -translate-y-1/2",children:ae.jsx("img",{src:`./icons/icon_${r}.svg`})})})})})}function od(t,e){const n=Ue.useRef(t);Ue.useEffect(()=>{n.current=t},[t]),Ue.useEffect(()=>{function r(){n.current()}if(e!==null){let i=setInterval(r,e);return()=>clearInterval(i)}},[e])}const oS=({pointerDown:t,xPos:e,yPos:n,selectedCursorShape:r})=>{const[i,s]=Ue.useState([]),o=100;return od(()=>{s(a=>a.filter(l=>l.timestamp>Date.now()-4e3))},1e3),od(()=>{t&&s(a=>a.concat([{point:{x:e,y:n},timestamp:Date.now()}]))},o),ae.jsx("div",{style:{transform:`translateX(${e}px) translateY(${n}px)`},children:i.map(a=>ae.jsx(sS,{x:a.point.x,y:a.point.y,timestamp:a.timestamp,selectedCursorShape:r},a.timestamp.toString()))})},aS=({selectedCursorShape:t,x:e,y:n,pointerDown:r})=>ae.jsxs(ae.Fragment,{children:[ae.jsx("img",{src:`./icons/icon_${t}.svg`,className:`${t}-cursor`,style:{transform:`translate3d(${e}px, ${n}px, 0)`}}),(t==="heart"||t==="thumbs")&&ae.jsx(oS,{pointerDown:r,xPos:e,yPos:n,selectedCursorShape:t}),t==="pen"&&r&&ae.jsx(K1,{xPos:e,yPos:n})]}),lS=({handleCursorShapeSelect:t,clientsLength:e})=>{const[n,r]=Ue.useState("cursor"),i=["heart","thumbs","pen","cursor"];return ae.jsxs("div",{className:"cursor-selector-container",children:[ae.jsx("div",{className:"cursor-selections-container",children:i.map(s=>ae.jsx("img",{onClick:()=>{t(s),r(s)},className:`${n===s?"cursor-shape-selected":"cursor-shape-not-selected"}`,src:`./icons/icon_${s}.svg`},s))}),ae.jsx("div",{className:"num-users-container",children:ae.jsx("p",{children:e!==1?`${e} users are here`:"1 user here"})})]})},Ga=new qp.Client("https://api.yorkie.dev",{apiKey:"cedaovjuioqlk4pjqn6g"}),qn=new qp.Document("simultaneous-cursors",{enableDevtools:!0}),uS=()=>{const[t,e]=Ue.useState([]),n=r=>{qn.update((i,s)=>{s.set({cursorShape:r})})};return Ue.useEffect(()=>{(async()=>{await Ga.activate(),qn.subscribe("presence",a=>{e(qn.getPresences())}),await Ga.attach(qn,{initialPresence:{cursorShape:"cursor",cursor:{xPos:0,yPos:0},pointerDown:!1}}),window.addEventListener("beforeunload",()=>{Ga.deactivate()})})();const i=()=>{qn.update((a,l)=>{l.set({pointerDown:!1})})},s=()=>{qn.update((a,l)=>{l.set({pointerDown:!0})})},o=a=>{qn.update((l,u)=>{u.set({cursor:{xPos:a.clientX,yPos:a.clientY}})})};return window.addEventListener("mousedown",s),window.addEventListener("mouseup",i),window.addEventListener("mousemove",o),()=>{window.removeEventListener("mousedown",s),window.removeEventListener("mouseup",i),window.removeEventListener("mousemove",o)}},[]),ae.jsxs("div",{className:"general-container",children:[t.map(({clientID:r,presence:{cursorShape:i,cursor:s,pointerDown:o}})=>s?ae.jsx(aS,{selectedCursorShape:i,x:s.xPos,y:s.yPos,pointerDown:o},r):null),ae.jsx(lS,{handleCursorShapeSelect:n,clientsLength:t.length})]})};Ya.createRoot(document.getElementById("root")).render(ae.jsx(uS,{}));
