var iv=Object.defineProperty;var sv=(n,e,t)=>e in n?iv(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var l=(n,e,t)=>sv(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();var bm={exports:{}},zl={},zm={exports:{}},W={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jo=Symbol.for("react.element"),ov=Symbol.for("react.portal"),av=Symbol.for("react.fragment"),lv=Symbol.for("react.strict_mode"),uv=Symbol.for("react.profiler"),cv=Symbol.for("react.provider"),fv=Symbol.for("react.context"),dv=Symbol.for("react.forward_ref"),hv=Symbol.for("react.suspense"),mv=Symbol.for("react.memo"),gv=Symbol.for("react.lazy"),Dd=Symbol.iterator;function pv(n){return n===null||typeof n!="object"?null:(n=Dd&&n[Dd]||n["@@iterator"],typeof n=="function"?n:null)}var Fm={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$m=Object.assign,Jm={};function Ps(n,e,t){this.props=n,this.context=e,this.refs=Jm,this.updater=t||Fm}Ps.prototype.isReactComponent={};Ps.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};Ps.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function Mm(){}Mm.prototype=Ps.prototype;function gf(n,e,t){this.props=n,this.context=e,this.refs=Jm,this.updater=t||Fm}var pf=gf.prototype=new Mm;pf.constructor=gf;$m(pf,Ps.prototype);pf.isPureReactComponent=!0;var Od=Array.isArray,Um=Object.prototype.hasOwnProperty,yf={current:null},Vm={key:!0,ref:!0,__self:!0,__source:!0};function jm(n,e,t){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Um.call(e,r)&&!Vm.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=t;else if(1<a){for(var u=Array(a),c=0;c<a;c++)u[c]=arguments[c+2];i.children=u}if(n&&n.defaultProps)for(r in a=n.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Jo,type:n,key:s,ref:o,props:i,_owner:yf.current}}function yv(n,e){return{$$typeof:Jo,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function vf(n){return typeof n=="object"&&n!==null&&n.$$typeof===Jo}function vv(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var Rd=/\/+/g;function cu(n,e){return typeof n=="object"&&n!==null&&n.key!=null?vv(""+n.key):e.toString(36)}function ka(n,e,t,r,i){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case Jo:case ov:o=!0}}if(o)return o=n,i=i(o),n=r===""?"."+cu(o,0):r,Od(i)?(t="",n!=null&&(t=n.replace(Rd,"$&/")+"/"),ka(i,e,t,"",function(c){return c})):i!=null&&(vf(i)&&(i=yv(i,t+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Rd,"$&/")+"/")+n)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Od(n))for(var a=0;a<n.length;a++){s=n[a];var u=r+cu(s,a);o+=ka(s,e,t,u,i)}else if(u=pv(n),typeof u=="function")for(n=u.call(n),a=0;!(s=n.next()).done;)s=s.value,u=r+cu(s,a++),o+=ka(s,e,t,u,i);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Qo(n,e,t){if(n==null)return n;var r=[],i=0;return ka(n,r,"","",function(s){return e.call(t,s,i++)}),r}function wv(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Ue={current:null},Ta={transition:null},Sv={ReactCurrentDispatcher:Ue,ReactCurrentBatchConfig:Ta,ReactCurrentOwner:yf};W.Children={map:Qo,forEach:function(n,e,t){Qo(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return Qo(n,function(){e++}),e},toArray:function(n){return Qo(n,function(e){return e})||[]},only:function(n){if(!vf(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};W.Component=Ps;W.Fragment=av;W.Profiler=uv;W.PureComponent=gf;W.StrictMode=lv;W.Suspense=hv;W.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Sv;W.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=$m({},n.props),i=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=yf.current),e.key!==void 0&&(i=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(u in e)Um.call(e,u)&&!Vm.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&a!==void 0?a[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=t;else if(1<u){a=Array(u);for(var c=0;c<u;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Jo,type:n.type,key:i,ref:s,props:r,_owner:o}};W.createContext=function(n){return n={$$typeof:fv,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:cv,_context:n},n.Consumer=n};W.createElement=jm;W.createFactory=function(n){var e=jm.bind(null,n);return e.type=n,e};W.createRef=function(){return{current:null}};W.forwardRef=function(n){return{$$typeof:dv,render:n}};W.isValidElement=vf;W.lazy=function(n){return{$$typeof:gv,_payload:{_status:-1,_result:n},_init:wv}};W.memo=function(n,e){return{$$typeof:mv,type:n,compare:e===void 0?null:e}};W.startTransition=function(n){var e=Ta.transition;Ta.transition={};try{n()}finally{Ta.transition=e}};W.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};W.useCallback=function(n,e){return Ue.current.useCallback(n,e)};W.useContext=function(n){return Ue.current.useContext(n)};W.useDebugValue=function(){};W.useDeferredValue=function(n){return Ue.current.useDeferredValue(n)};W.useEffect=function(n,e){return Ue.current.useEffect(n,e)};W.useId=function(){return Ue.current.useId()};W.useImperativeHandle=function(n,e,t){return Ue.current.useImperativeHandle(n,e,t)};W.useInsertionEffect=function(n,e){return Ue.current.useInsertionEffect(n,e)};W.useLayoutEffect=function(n,e){return Ue.current.useLayoutEffect(n,e)};W.useMemo=function(n,e){return Ue.current.useMemo(n,e)};W.useReducer=function(n,e,t){return Ue.current.useReducer(n,e,t)};W.useRef=function(n){return Ue.current.useRef(n)};W.useState=function(n){return Ue.current.useState(n)};W.useSyncExternalStore=function(n,e,t){return Ue.current.useSyncExternalStore(n,e,t)};W.useTransition=function(){return Ue.current.useTransition()};W.version="18.2.0";zm.exports=W;var Ke=zm.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kv=Ke,Tv=Symbol.for("react.element"),Iv=Symbol.for("react.fragment"),Av=Object.prototype.hasOwnProperty,Ev=kv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,xv={key:!0,ref:!0,__self:!0,__source:!0};function qm(n,e,t){var r,i={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Av.call(e,r)&&!xv.hasOwnProperty(r)&&(i[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Tv,type:n,key:s,ref:o,props:i,_owner:Ev.current}}zl.Fragment=Iv;zl.jsx=qm;zl.jsxs=qm;bm.exports=zl;var de=bm.exports,qu={},Km={exports:{}},lt={},Wm={exports:{}},Hm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(B,V){var j=B.length;B.push(V);e:for(;0<j;){var he=j-1>>>1,Se=B[he];if(0<i(Se,V))B[he]=V,B[j]=Se,j=he;else break e}}function t(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var V=B[0],j=B.pop();if(j!==V){B[0]=j;e:for(var he=0,Se=B.length,Go=Se>>>1;he<Go;){var hi=2*(he+1)-1,uu=B[hi],mi=hi+1,Yo=B[mi];if(0>i(uu,j))mi<Se&&0>i(Yo,uu)?(B[he]=Yo,B[mi]=j,he=mi):(B[he]=uu,B[hi]=j,he=hi);else if(mi<Se&&0>i(Yo,j))B[he]=Yo,B[mi]=j,he=mi;else break e}}return V}function i(B,V){var j=B.sortIndex-V.sortIndex;return j!==0?j:B.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var u=[],c=[],d=1,h=null,m=3,p=!1,k=!1,T=!1,C=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(B){for(var V=t(c);V!==null;){if(V.callback===null)r(c);else if(V.startTime<=B)r(c),V.sortIndex=V.expirationTime,e(u,V);else break;V=t(c)}}function A(B){if(T=!1,v(B),!k)if(t(u)!==null)k=!0,au(P);else{var V=t(c);V!==null&&lu(A,V.startTime-B)}}function P(B,V){k=!1,T&&(T=!1,y(R),R=-1),p=!0;var j=m;try{for(v(V),h=t(u);h!==null&&(!(h.expirationTime>V)||B&&!Fe());){var he=h.callback;if(typeof he=="function"){h.callback=null,m=h.priorityLevel;var Se=he(h.expirationTime<=V);V=n.unstable_now(),typeof Se=="function"?h.callback=Se:h===t(u)&&r(u),v(V)}else r(u);h=t(u)}if(h!==null)var Go=!0;else{var hi=t(c);hi!==null&&lu(A,hi.startTime-V),Go=!1}return Go}finally{h=null,m=j,p=!1}}var N=!1,O=null,R=-1,M=5,J=-1;function Fe(){return!(n.unstable_now()-J<M)}function di(){if(O!==null){var B=n.unstable_now();J=B;var V=!0;try{V=O(!0,B)}finally{V?Ls():(N=!1,O=null)}}else N=!1}var Ls;if(typeof g=="function")Ls=function(){g(di)};else if(typeof MessageChannel<"u"){var Pd=new MessageChannel,rv=Pd.port2;Pd.port1.onmessage=di,Ls=function(){rv.postMessage(null)}}else Ls=function(){C(di,0)};function au(B){O=B,N||(N=!0,Ls())}function lu(B,V){R=C(function(){B(n.unstable_now())},V)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(B){B.callback=null},n.unstable_continueExecution=function(){k||p||(k=!0,au(P))},n.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<B?Math.floor(1e3/B):5},n.unstable_getCurrentPriorityLevel=function(){return m},n.unstable_getFirstCallbackNode=function(){return t(u)},n.unstable_next=function(B){switch(m){case 1:case 2:case 3:var V=3;break;default:V=m}var j=m;m=V;try{return B()}finally{m=j}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(B,V){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var j=m;m=B;try{return V()}finally{m=j}},n.unstable_scheduleCallback=function(B,V,j){var he=n.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?he+j:he):j=he,B){case 1:var Se=-1;break;case 2:Se=250;break;case 5:Se=1073741823;break;case 4:Se=1e4;break;default:Se=5e3}return Se=j+Se,B={id:d++,callback:V,priorityLevel:B,startTime:j,expirationTime:Se,sortIndex:-1},j>he?(B.sortIndex=j,e(c,B),t(u)===null&&B===t(c)&&(T?(y(R),R=-1):T=!0,lu(A,j-he))):(B.sortIndex=Se,e(u,B),k||p||(k=!0,au(P))),B},n.unstable_shouldYield=Fe,n.unstable_wrapCallback=function(B){var V=m;return function(){var j=m;m=V;try{return B.apply(this,arguments)}finally{m=j}}}})(Hm);Wm.exports=Hm;var Nv=Wm.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _m=Ke,st=Nv;function x(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Gm=new Set,fo={};function zi(n,e){ds(n,e),ds(n+"Capture",e)}function ds(n,e){for(fo[n]=e,n=0;n<e.length;n++)Gm.add(e[n])}var Dr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ku=Object.prototype.hasOwnProperty,Cv=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ld={},Bd={};function Pv(n){return Ku.call(Bd,n)?!0:Ku.call(Ld,n)?!1:Cv.test(n)?Bd[n]=!0:(Ld[n]=!0,!1)}function Dv(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function Ov(n,e,t,r){if(e===null||typeof e>"u"||Dv(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ve(n,e,t,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Pe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Pe[n]=new Ve(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];Pe[e]=new Ve(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){Pe[n]=new Ve(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Pe[n]=new Ve(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Pe[n]=new Ve(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){Pe[n]=new Ve(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){Pe[n]=new Ve(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){Pe[n]=new Ve(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){Pe[n]=new Ve(n,5,!1,n.toLowerCase(),null,!1,!1)});var wf=/[\-:]([a-z])/g;function Sf(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(wf,Sf);Pe[e]=new Ve(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(wf,Sf);Pe[e]=new Ve(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(wf,Sf);Pe[e]=new Ve(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){Pe[n]=new Ve(n,1,!1,n.toLowerCase(),null,!1,!1)});Pe.xlinkHref=new Ve("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){Pe[n]=new Ve(n,1,!1,n.toLowerCase(),null,!0,!0)});function kf(n,e,t,r){var i=Pe.hasOwnProperty(e)?Pe[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Ov(e,t,i,r)&&(t=null),r||i===null?Pv(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):i.mustUseProperty?n[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,r=i.attributeNamespace,t===null?n.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var zr=_m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Xo=Symbol.for("react.element"),ji=Symbol.for("react.portal"),qi=Symbol.for("react.fragment"),Tf=Symbol.for("react.strict_mode"),Wu=Symbol.for("react.profiler"),Ym=Symbol.for("react.provider"),Qm=Symbol.for("react.context"),If=Symbol.for("react.forward_ref"),Hu=Symbol.for("react.suspense"),_u=Symbol.for("react.suspense_list"),Af=Symbol.for("react.memo"),Vr=Symbol.for("react.lazy"),Xm=Symbol.for("react.offscreen"),bd=Symbol.iterator;function Bs(n){return n===null||typeof n!="object"?null:(n=bd&&n[bd]||n["@@iterator"],typeof n=="function"?n:null)}var le=Object.assign,fu;function Ks(n){if(fu===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);fu=e&&e[1]||""}return`
`+fu+n}var du=!1;function hu(n,e){if(!n||du)return"";du=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){r=c}n.call(e.prototype)}else{try{throw Error()}catch(c){r=c}n()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var u=`
`+i[o].replace(" at new "," at ");return n.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",n.displayName)),u}while(1<=o&&0<=a);break}}}finally{du=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?Ks(n):""}function Rv(n){switch(n.tag){case 5:return Ks(n.type);case 16:return Ks("Lazy");case 13:return Ks("Suspense");case 19:return Ks("SuspenseList");case 0:case 2:case 15:return n=hu(n.type,!1),n;case 11:return n=hu(n.type.render,!1),n;case 1:return n=hu(n.type,!0),n;default:return""}}function Gu(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case qi:return"Fragment";case ji:return"Portal";case Wu:return"Profiler";case Tf:return"StrictMode";case Hu:return"Suspense";case _u:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case Qm:return(n.displayName||"Context")+".Consumer";case Ym:return(n._context.displayName||"Context")+".Provider";case If:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Af:return e=n.displayName||null,e!==null?e:Gu(n.type)||"Memo";case Vr:e=n._payload,n=n._init;try{return Gu(n(e))}catch{}}return null}function Lv(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Gu(e);case 8:return e===Tf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function oi(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Zm(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Bv(n){var e=Zm(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function Zo(n){n._valueTracker||(n._valueTracker=Bv(n))}function eg(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=Zm(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function Ma(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Yu(n,e){var t=e.checked;return le({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function zd(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=oi(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function tg(n,e){e=e.checked,e!=null&&kf(n,"checked",e,!1)}function Qu(n,e){tg(n,e);var t=oi(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?Xu(n,e.type,t):e.hasOwnProperty("defaultValue")&&Xu(n,e.type,oi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function Fd(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function Xu(n,e,t){(e!=="number"||Ma(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var Ws=Array.isArray;function rs(n,e,t,r){if(n=n.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<n.length;t++)i=e.hasOwnProperty("$"+n[t].value),n[t].selected!==i&&(n[t].selected=i),i&&r&&(n[t].defaultSelected=!0)}else{for(t=""+oi(t),e=null,i=0;i<n.length;i++){if(n[i].value===t){n[i].selected=!0,r&&(n[i].defaultSelected=!0);return}e!==null||n[i].disabled||(e=n[i])}e!==null&&(e.selected=!0)}}function Zu(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(x(91));return le({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function $d(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(x(92));if(Ws(t)){if(1<t.length)throw Error(x(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:oi(t)}}function ng(n,e){var t=oi(e.value),r=oi(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function Jd(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function rg(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ec(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?rg(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var ea,ig=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,i){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,i)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(ea=ea||document.createElement("div"),ea.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ea.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function ho(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var Ys={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},bv=["Webkit","ms","Moz","O"];Object.keys(Ys).forEach(function(n){bv.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),Ys[e]=Ys[n]})});function sg(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Ys.hasOwnProperty(n)&&Ys[n]?(""+e).trim():e+"px"}function og(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,i=sg(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,i):n[t]=i}}var zv=le({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function tc(n,e){if(e){if(zv[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(x(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(x(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(x(61))}if(e.style!=null&&typeof e.style!="object")throw Error(x(62))}}function nc(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rc=null;function Ef(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var ic=null,is=null,ss=null;function Md(n){if(n=Vo(n)){if(typeof ic!="function")throw Error(x(280));var e=n.stateNode;e&&(e=Ul(e),ic(n.stateNode,n.type,e))}}function ag(n){is?ss?ss.push(n):ss=[n]:is=n}function lg(){if(is){var n=is,e=ss;if(ss=is=null,Md(n),e)for(n=0;n<e.length;n++)Md(e[n])}}function ug(n,e){return n(e)}function cg(){}var mu=!1;function fg(n,e,t){if(mu)return n(e,t);mu=!0;try{return ug(n,e,t)}finally{mu=!1,(is!==null||ss!==null)&&(cg(),lg())}}function mo(n,e){var t=n.stateNode;if(t===null)return null;var r=Ul(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(x(231,e,typeof t));return t}var sc=!1;if(Dr)try{var bs={};Object.defineProperty(bs,"passive",{get:function(){sc=!0}}),window.addEventListener("test",bs,bs),window.removeEventListener("test",bs,bs)}catch{sc=!1}function Fv(n,e,t,r,i,s,o,a,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(d){this.onError(d)}}var Qs=!1,Ua=null,Va=!1,oc=null,$v={onError:function(n){Qs=!0,Ua=n}};function Jv(n,e,t,r,i,s,o,a,u){Qs=!1,Ua=null,Fv.apply($v,arguments)}function Mv(n,e,t,r,i,s,o,a,u){if(Jv.apply(this,arguments),Qs){if(Qs){var c=Ua;Qs=!1,Ua=null}else throw Error(x(198));Va||(Va=!0,oc=c)}}function Fi(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function dg(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function Ud(n){if(Fi(n)!==n)throw Error(x(188))}function Uv(n){var e=n.alternate;if(!e){if(e=Fi(n),e===null)throw Error(x(188));return e!==n?null:n}for(var t=n,r=e;;){var i=t.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){t=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===t)return Ud(i),n;if(s===r)return Ud(i),e;s=s.sibling}throw Error(x(188))}if(t.return!==r.return)t=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===t){o=!0,t=i,r=s;break}if(a===r){o=!0,r=i,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,r=i;break}if(a===r){o=!0,r=s,t=i;break}a=a.sibling}if(!o)throw Error(x(189))}}if(t.alternate!==r)throw Error(x(190))}if(t.tag!==3)throw Error(x(188));return t.stateNode.current===t?n:e}function hg(n){return n=Uv(n),n!==null?mg(n):null}function mg(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=mg(n);if(e!==null)return e;n=n.sibling}return null}var gg=st.unstable_scheduleCallback,Vd=st.unstable_cancelCallback,Vv=st.unstable_shouldYield,jv=st.unstable_requestPaint,ge=st.unstable_now,qv=st.unstable_getCurrentPriorityLevel,xf=st.unstable_ImmediatePriority,pg=st.unstable_UserBlockingPriority,ja=st.unstable_NormalPriority,Kv=st.unstable_LowPriority,yg=st.unstable_IdlePriority,Fl=null,sn=null;function Wv(n){if(sn&&typeof sn.onCommitFiberRoot=="function")try{sn.onCommitFiberRoot(Fl,n,void 0,(n.current.flags&128)===128)}catch{}}var Mt=Math.clz32?Math.clz32:Gv,Hv=Math.log,_v=Math.LN2;function Gv(n){return n>>>=0,n===0?32:31-(Hv(n)/_v|0)|0}var ta=64,na=4194304;function Hs(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function qa(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,i=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~i;a!==0?r=Hs(a):(s&=o,s!==0&&(r=Hs(s)))}else o=t&~i,o!==0?r=Hs(o):s!==0&&(r=Hs(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-Mt(e),i=1<<t,r|=n[t],e&=~i;return r}function Yv(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Qv(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,i=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-Mt(s),a=1<<o,u=i[o];u===-1?(!(a&t)||a&r)&&(i[o]=Yv(a,e)):u<=e&&(n.expiredLanes|=a),s&=~a}}function ac(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function vg(){var n=ta;return ta<<=1,!(ta&4194240)&&(ta=64),n}function gu(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function Mo(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-Mt(e),n[e]=t}function Xv(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var i=31-Mt(t),s=1<<i;e[i]=0,r[i]=-1,n[i]=-1,t&=~s}}function Nf(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-Mt(t),i=1<<r;i&e|n[r]&e&&(n[r]|=e),t&=~i}}var Q=0;function wg(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var Sg,Cf,kg,Tg,Ig,lc=!1,ra=[],Gr=null,Yr=null,Qr=null,go=new Map,po=new Map,qr=[],Zv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function jd(n,e){switch(n){case"focusin":case"focusout":Gr=null;break;case"dragenter":case"dragleave":Yr=null;break;case"mouseover":case"mouseout":Qr=null;break;case"pointerover":case"pointerout":go.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":po.delete(e.pointerId)}}function zs(n,e,t,r,i,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Vo(e),e!==null&&Cf(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),n)}function ew(n,e,t,r,i){switch(e){case"focusin":return Gr=zs(Gr,n,e,t,r,i),!0;case"dragenter":return Yr=zs(Yr,n,e,t,r,i),!0;case"mouseover":return Qr=zs(Qr,n,e,t,r,i),!0;case"pointerover":var s=i.pointerId;return go.set(s,zs(go.get(s)||null,n,e,t,r,i)),!0;case"gotpointercapture":return s=i.pointerId,po.set(s,zs(po.get(s)||null,n,e,t,r,i)),!0}return!1}function Ag(n){var e=Si(n.target);if(e!==null){var t=Fi(e);if(t!==null){if(e=t.tag,e===13){if(e=dg(t),e!==null){n.blockedOn=e,Ig(n.priority,function(){kg(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Ia(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=uc(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);rc=r,t.target.dispatchEvent(r),rc=null}else return e=Vo(t),e!==null&&Cf(e),n.blockedOn=t,!1;e.shift()}return!0}function qd(n,e,t){Ia(n)&&t.delete(e)}function tw(){lc=!1,Gr!==null&&Ia(Gr)&&(Gr=null),Yr!==null&&Ia(Yr)&&(Yr=null),Qr!==null&&Ia(Qr)&&(Qr=null),go.forEach(qd),po.forEach(qd)}function Fs(n,e){n.blockedOn===e&&(n.blockedOn=null,lc||(lc=!0,st.unstable_scheduleCallback(st.unstable_NormalPriority,tw)))}function yo(n){function e(i){return Fs(i,n)}if(0<ra.length){Fs(ra[0],n);for(var t=1;t<ra.length;t++){var r=ra[t];r.blockedOn===n&&(r.blockedOn=null)}}for(Gr!==null&&Fs(Gr,n),Yr!==null&&Fs(Yr,n),Qr!==null&&Fs(Qr,n),go.forEach(e),po.forEach(e),t=0;t<qr.length;t++)r=qr[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<qr.length&&(t=qr[0],t.blockedOn===null);)Ag(t),t.blockedOn===null&&qr.shift()}var os=zr.ReactCurrentBatchConfig,Ka=!0;function nw(n,e,t,r){var i=Q,s=os.transition;os.transition=null;try{Q=1,Pf(n,e,t,r)}finally{Q=i,os.transition=s}}function rw(n,e,t,r){var i=Q,s=os.transition;os.transition=null;try{Q=4,Pf(n,e,t,r)}finally{Q=i,os.transition=s}}function Pf(n,e,t,r){if(Ka){var i=uc(n,e,t,r);if(i===null)Eu(n,e,r,Wa,t),jd(n,r);else if(ew(i,n,e,t,r))r.stopPropagation();else if(jd(n,r),e&4&&-1<Zv.indexOf(n)){for(;i!==null;){var s=Vo(i);if(s!==null&&Sg(s),s=uc(n,e,t,r),s===null&&Eu(n,e,r,Wa,t),s===i)break;i=s}i!==null&&r.stopPropagation()}else Eu(n,e,r,null,t)}}var Wa=null;function uc(n,e,t,r){if(Wa=null,n=Ef(r),n=Si(n),n!==null)if(e=Fi(n),e===null)n=null;else if(t=e.tag,t===13){if(n=dg(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return Wa=n,null}function Eg(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(qv()){case xf:return 1;case pg:return 4;case ja:case Kv:return 16;case yg:return 536870912;default:return 16}default:return 16}}var Wr=null,Df=null,Aa=null;function xg(){if(Aa)return Aa;var n,e=Df,t=e.length,r,i="value"in Wr?Wr.value:Wr.textContent,s=i.length;for(n=0;n<t&&e[n]===i[n];n++);var o=t-n;for(r=1;r<=o&&e[t-r]===i[s-r];r++);return Aa=i.slice(n,1<r?1-r:void 0)}function Ea(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function ia(){return!0}function Kd(){return!1}function ut(n){function e(t,r,i,s,o){this._reactName=t,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?ia:Kd,this.isPropagationStopped=Kd,this}return le(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=ia)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=ia)},persist:function(){},isPersistent:ia}),e}var Ds={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Of=ut(Ds),Uo=le({},Ds,{view:0,detail:0}),iw=ut(Uo),pu,yu,$s,$l=le({},Uo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Rf,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==$s&&($s&&n.type==="mousemove"?(pu=n.screenX-$s.screenX,yu=n.screenY-$s.screenY):yu=pu=0,$s=n),pu)},movementY:function(n){return"movementY"in n?n.movementY:yu}}),Wd=ut($l),sw=le({},$l,{dataTransfer:0}),ow=ut(sw),aw=le({},Uo,{relatedTarget:0}),vu=ut(aw),lw=le({},Ds,{animationName:0,elapsedTime:0,pseudoElement:0}),uw=ut(lw),cw=le({},Ds,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),fw=ut(cw),dw=le({},Ds,{data:0}),Hd=ut(dw),hw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pw(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=gw[n])?!!e[n]:!1}function Rf(){return pw}var yw=le({},Uo,{key:function(n){if(n.key){var e=hw[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=Ea(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?mw[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Rf,charCode:function(n){return n.type==="keypress"?Ea(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Ea(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),vw=ut(yw),ww=le({},$l,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_d=ut(ww),Sw=le({},Uo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Rf}),kw=ut(Sw),Tw=le({},Ds,{propertyName:0,elapsedTime:0,pseudoElement:0}),Iw=ut(Tw),Aw=le({},$l,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Ew=ut(Aw),xw=[9,13,27,32],Lf=Dr&&"CompositionEvent"in window,Xs=null;Dr&&"documentMode"in document&&(Xs=document.documentMode);var Nw=Dr&&"TextEvent"in window&&!Xs,Ng=Dr&&(!Lf||Xs&&8<Xs&&11>=Xs),Gd=" ",Yd=!1;function Cg(n,e){switch(n){case"keyup":return xw.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Pg(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ki=!1;function Cw(n,e){switch(n){case"compositionend":return Pg(e);case"keypress":return e.which!==32?null:(Yd=!0,Gd);case"textInput":return n=e.data,n===Gd&&Yd?null:n;default:return null}}function Pw(n,e){if(Ki)return n==="compositionend"||!Lf&&Cg(n,e)?(n=xg(),Aa=Df=Wr=null,Ki=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Ng&&e.locale!=="ko"?null:e.data;default:return null}}var Dw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qd(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!Dw[n.type]:e==="textarea"}function Dg(n,e,t,r){ag(r),e=Ha(e,"onChange"),0<e.length&&(t=new Of("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var Zs=null,vo=null;function Ow(n){Ug(n,0)}function Jl(n){var e=_i(n);if(eg(e))return n}function Rw(n,e){if(n==="change")return e}var Og=!1;if(Dr){var wu;if(Dr){var Su="oninput"in document;if(!Su){var Xd=document.createElement("div");Xd.setAttribute("oninput","return;"),Su=typeof Xd.oninput=="function"}wu=Su}else wu=!1;Og=wu&&(!document.documentMode||9<document.documentMode)}function Zd(){Zs&&(Zs.detachEvent("onpropertychange",Rg),vo=Zs=null)}function Rg(n){if(n.propertyName==="value"&&Jl(vo)){var e=[];Dg(e,vo,n,Ef(n)),fg(Ow,e)}}function Lw(n,e,t){n==="focusin"?(Zd(),Zs=e,vo=t,Zs.attachEvent("onpropertychange",Rg)):n==="focusout"&&Zd()}function Bw(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Jl(vo)}function bw(n,e){if(n==="click")return Jl(e)}function zw(n,e){if(n==="input"||n==="change")return Jl(e)}function Fw(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var jt=typeof Object.is=="function"?Object.is:Fw;function wo(n,e){if(jt(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var i=t[r];if(!Ku.call(e,i)||!jt(n[i],e[i]))return!1}return!0}function eh(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function th(n,e){var t=eh(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=eh(t)}}function Lg(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?Lg(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function Bg(){for(var n=window,e=Ma();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=Ma(n.document)}return e}function Bf(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function $w(n){var e=Bg(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&Lg(t.ownerDocument.documentElement,t)){if(r!==null&&Bf(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var i=t.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!n.extend&&s>r&&(i=r,r=s,s=i),i=th(t,s);var o=th(t,r);i&&o&&(n.rangeCount!==1||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),n.removeAllRanges(),s>r?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Jw=Dr&&"documentMode"in document&&11>=document.documentMode,Wi=null,cc=null,eo=null,fc=!1;function nh(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;fc||Wi==null||Wi!==Ma(r)||(r=Wi,"selectionStart"in r&&Bf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),eo&&wo(eo,r)||(eo=r,r=Ha(cc,"onSelect"),0<r.length&&(e=new Of("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=Wi)))}function sa(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var Hi={animationend:sa("Animation","AnimationEnd"),animationiteration:sa("Animation","AnimationIteration"),animationstart:sa("Animation","AnimationStart"),transitionend:sa("Transition","TransitionEnd")},ku={},bg={};Dr&&(bg=document.createElement("div").style,"AnimationEvent"in window||(delete Hi.animationend.animation,delete Hi.animationiteration.animation,delete Hi.animationstart.animation),"TransitionEvent"in window||delete Hi.transitionend.transition);function Ml(n){if(ku[n])return ku[n];if(!Hi[n])return n;var e=Hi[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in bg)return ku[n]=e[t];return n}var zg=Ml("animationend"),Fg=Ml("animationiteration"),$g=Ml("animationstart"),Jg=Ml("transitionend"),Mg=new Map,rh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ui(n,e){Mg.set(n,e),zi(e,[n])}for(var Tu=0;Tu<rh.length;Tu++){var Iu=rh[Tu],Mw=Iu.toLowerCase(),Uw=Iu[0].toUpperCase()+Iu.slice(1);ui(Mw,"on"+Uw)}ui(zg,"onAnimationEnd");ui(Fg,"onAnimationIteration");ui($g,"onAnimationStart");ui("dblclick","onDoubleClick");ui("focusin","onFocus");ui("focusout","onBlur");ui(Jg,"onTransitionEnd");ds("onMouseEnter",["mouseout","mouseover"]);ds("onMouseLeave",["mouseout","mouseover"]);ds("onPointerEnter",["pointerout","pointerover"]);ds("onPointerLeave",["pointerout","pointerover"]);zi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));zi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));zi("onBeforeInput",["compositionend","keypress","textInput","paste"]);zi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));zi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));zi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _s="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Vw=new Set("cancel close invalid load scroll toggle".split(" ").concat(_s));function ih(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,Mv(r,e,void 0,n),n.currentTarget=null}function Ug(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,c=a.currentTarget;if(a=a.listener,u!==s&&i.isPropagationStopped())break e;ih(i,a,c),s=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,c=a.currentTarget,a=a.listener,u!==s&&i.isPropagationStopped())break e;ih(i,a,c),s=u}}}if(Va)throw n=oc,Va=!1,oc=null,n}function te(n,e){var t=e[pc];t===void 0&&(t=e[pc]=new Set);var r=n+"__bubble";t.has(r)||(Vg(e,n,2,!1),t.add(r))}function Au(n,e,t){var r=0;e&&(r|=4),Vg(t,n,r,e)}var oa="_reactListening"+Math.random().toString(36).slice(2);function So(n){if(!n[oa]){n[oa]=!0,Gm.forEach(function(t){t!=="selectionchange"&&(Vw.has(t)||Au(t,!1,n),Au(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[oa]||(e[oa]=!0,Au("selectionchange",!1,e))}}function Vg(n,e,t,r){switch(Eg(e)){case 1:var i=nw;break;case 4:i=rw;break;default:i=Pf}t=i.bind(null,e,t,n),i=void 0,!sc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?n.addEventListener(e,t,{capture:!0,passive:i}):n.addEventListener(e,t,!0):i!==void 0?n.addEventListener(e,t,{passive:i}):n.addEventListener(e,t,!1)}function Eu(n,e,t,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Si(a),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}a=a.parentNode}}r=r.return}fg(function(){var c=s,d=Ef(t),h=[];e:{var m=Mg.get(n);if(m!==void 0){var p=Of,k=n;switch(n){case"keypress":if(Ea(t)===0)break e;case"keydown":case"keyup":p=vw;break;case"focusin":k="focus",p=vu;break;case"focusout":k="blur",p=vu;break;case"beforeblur":case"afterblur":p=vu;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=Wd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=ow;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=kw;break;case zg:case Fg:case $g:p=uw;break;case Jg:p=Iw;break;case"scroll":p=iw;break;case"wheel":p=Ew;break;case"copy":case"cut":case"paste":p=fw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=_d}var T=(e&4)!==0,C=!T&&n==="scroll",y=T?m!==null?m+"Capture":null:m;T=[];for(var g=c,v;g!==null;){v=g;var A=v.stateNode;if(v.tag===5&&A!==null&&(v=A,y!==null&&(A=mo(g,y),A!=null&&T.push(ko(g,A,v)))),C)break;g=g.return}0<T.length&&(m=new p(m,k,null,t,d),h.push({event:m,listeners:T}))}}if(!(e&7)){e:{if(m=n==="mouseover"||n==="pointerover",p=n==="mouseout"||n==="pointerout",m&&t!==rc&&(k=t.relatedTarget||t.fromElement)&&(Si(k)||k[Or]))break e;if((p||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,p?(k=t.relatedTarget||t.toElement,p=c,k=k?Si(k):null,k!==null&&(C=Fi(k),k!==C||k.tag!==5&&k.tag!==6)&&(k=null)):(p=null,k=c),p!==k)){if(T=Wd,A="onMouseLeave",y="onMouseEnter",g="mouse",(n==="pointerout"||n==="pointerover")&&(T=_d,A="onPointerLeave",y="onPointerEnter",g="pointer"),C=p==null?m:_i(p),v=k==null?m:_i(k),m=new T(A,g+"leave",p,t,d),m.target=C,m.relatedTarget=v,A=null,Si(d)===c&&(T=new T(y,g+"enter",k,t,d),T.target=v,T.relatedTarget=C,A=T),C=A,p&&k)t:{for(T=p,y=k,g=0,v=T;v;v=Ji(v))g++;for(v=0,A=y;A;A=Ji(A))v++;for(;0<g-v;)T=Ji(T),g--;for(;0<v-g;)y=Ji(y),v--;for(;g--;){if(T===y||y!==null&&T===y.alternate)break t;T=Ji(T),y=Ji(y)}T=null}else T=null;p!==null&&sh(h,m,p,T,!1),k!==null&&C!==null&&sh(h,C,k,T,!0)}}e:{if(m=c?_i(c):window,p=m.nodeName&&m.nodeName.toLowerCase(),p==="select"||p==="input"&&m.type==="file")var P=Rw;else if(Qd(m))if(Og)P=zw;else{P=Bw;var N=Lw}else(p=m.nodeName)&&p.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(P=bw);if(P&&(P=P(n,c))){Dg(h,P,t,d);break e}N&&N(n,m,c),n==="focusout"&&(N=m._wrapperState)&&N.controlled&&m.type==="number"&&Xu(m,"number",m.value)}switch(N=c?_i(c):window,n){case"focusin":(Qd(N)||N.contentEditable==="true")&&(Wi=N,cc=c,eo=null);break;case"focusout":eo=cc=Wi=null;break;case"mousedown":fc=!0;break;case"contextmenu":case"mouseup":case"dragend":fc=!1,nh(h,t,d);break;case"selectionchange":if(Jw)break;case"keydown":case"keyup":nh(h,t,d)}var O;if(Lf)e:{switch(n){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else Ki?Cg(n,t)&&(R="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(R="onCompositionStart");R&&(Ng&&t.locale!=="ko"&&(Ki||R!=="onCompositionStart"?R==="onCompositionEnd"&&Ki&&(O=xg()):(Wr=d,Df="value"in Wr?Wr.value:Wr.textContent,Ki=!0)),N=Ha(c,R),0<N.length&&(R=new Hd(R,n,null,t,d),h.push({event:R,listeners:N}),O?R.data=O:(O=Pg(t),O!==null&&(R.data=O)))),(O=Nw?Cw(n,t):Pw(n,t))&&(c=Ha(c,"onBeforeInput"),0<c.length&&(d=new Hd("onBeforeInput","beforeinput",null,t,d),h.push({event:d,listeners:c}),d.data=O))}Ug(h,e)})}function ko(n,e,t){return{instance:n,listener:e,currentTarget:t}}function Ha(n,e){for(var t=e+"Capture",r=[];n!==null;){var i=n,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=mo(n,t),s!=null&&r.unshift(ko(n,s,i)),s=mo(n,e),s!=null&&r.push(ko(n,s,i))),n=n.return}return r}function Ji(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function sh(n,e,t,r,i){for(var s=e._reactName,o=[];t!==null&&t!==r;){var a=t,u=a.alternate,c=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&c!==null&&(a=c,i?(u=mo(t,s),u!=null&&o.unshift(ko(t,u,a))):i||(u=mo(t,s),u!=null&&o.push(ko(t,u,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var jw=/\r\n?/g,qw=/\u0000|\uFFFD/g;function oh(n){return(typeof n=="string"?n:""+n).replace(jw,`
`).replace(qw,"")}function aa(n,e,t){if(e=oh(e),oh(n)!==e&&t)throw Error(x(425))}function _a(){}var dc=null,hc=null;function mc(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var gc=typeof setTimeout=="function"?setTimeout:void 0,Kw=typeof clearTimeout=="function"?clearTimeout:void 0,ah=typeof Promise=="function"?Promise:void 0,Ww=typeof queueMicrotask=="function"?queueMicrotask:typeof ah<"u"?function(n){return ah.resolve(null).then(n).catch(Hw)}:gc;function Hw(n){setTimeout(function(){throw n})}function xu(n,e){var t=e,r=0;do{var i=t.nextSibling;if(n.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(r===0){n.removeChild(i),yo(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=i}while(t);yo(e)}function Xr(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function lh(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var Os=Math.random().toString(36).slice(2),_t="__reactFiber$"+Os,To="__reactProps$"+Os,Or="__reactContainer$"+Os,pc="__reactEvents$"+Os,_w="__reactListeners$"+Os,Gw="__reactHandles$"+Os;function Si(n){var e=n[_t];if(e)return e;for(var t=n.parentNode;t;){if(e=t[Or]||t[_t]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=lh(n);n!==null;){if(t=n[_t])return t;n=lh(n)}return e}n=t,t=n.parentNode}return null}function Vo(n){return n=n[_t]||n[Or],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function _i(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(x(33))}function Ul(n){return n[To]||null}var yc=[],Gi=-1;function ci(n){return{current:n}}function re(n){0>Gi||(n.current=yc[Gi],yc[Gi]=null,Gi--)}function ee(n,e){Gi++,yc[Gi]=n.current,n.current=e}var ai={},be=ci(ai),Ge=ci(!1),Ni=ai;function hs(n,e){var t=n.type.contextTypes;if(!t)return ai;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in t)i[s]=e[s];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=i),i}function Ye(n){return n=n.childContextTypes,n!=null}function Ga(){re(Ge),re(be)}function uh(n,e,t){if(be.current!==ai)throw Error(x(168));ee(be,e),ee(Ge,t)}function jg(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(x(108,Lv(n)||"Unknown",i));return le({},t,r)}function Ya(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||ai,Ni=be.current,ee(be,n),ee(Ge,Ge.current),!0}function ch(n,e,t){var r=n.stateNode;if(!r)throw Error(x(169));t?(n=jg(n,e,Ni),r.__reactInternalMemoizedMergedChildContext=n,re(Ge),re(be),ee(be,n)):re(Ge),ee(Ge,t)}var vr=null,Vl=!1,Nu=!1;function qg(n){vr===null?vr=[n]:vr.push(n)}function Yw(n){Vl=!0,qg(n)}function fi(){if(!Nu&&vr!==null){Nu=!0;var n=0,e=Q;try{var t=vr;for(Q=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}vr=null,Vl=!1}catch(i){throw vr!==null&&(vr=vr.slice(n+1)),gg(xf,fi),i}finally{Q=e,Nu=!1}}return null}var Yi=[],Qi=0,Qa=null,Xa=0,ct=[],ft=0,Ci=null,kr=1,Tr="";function pi(n,e){Yi[Qi++]=Xa,Yi[Qi++]=Qa,Qa=n,Xa=e}function Kg(n,e,t){ct[ft++]=kr,ct[ft++]=Tr,ct[ft++]=Ci,Ci=n;var r=kr;n=Tr;var i=32-Mt(r)-1;r&=~(1<<i),t+=1;var s=32-Mt(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,kr=1<<32-Mt(e)+i|t<<i|r,Tr=s+n}else kr=1<<s|t<<i|r,Tr=n}function bf(n){n.return!==null&&(pi(n,1),Kg(n,1,0))}function zf(n){for(;n===Qa;)Qa=Yi[--Qi],Yi[Qi]=null,Xa=Yi[--Qi],Yi[Qi]=null;for(;n===Ci;)Ci=ct[--ft],ct[ft]=null,Tr=ct[--ft],ct[ft]=null,kr=ct[--ft],ct[ft]=null}var it=null,tt=null,ie=!1,Ft=null;function Wg(n,e){var t=Tt(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function fh(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,it=n,tt=Xr(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,it=n,tt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Ci!==null?{id:kr,overflow:Tr}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Tt(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,it=n,tt=null,!0):!1;default:return!1}}function vc(n){return(n.mode&1)!==0&&(n.flags&128)===0}function wc(n){if(ie){var e=tt;if(e){var t=e;if(!fh(n,e)){if(vc(n))throw Error(x(418));e=Xr(t.nextSibling);var r=it;e&&fh(n,e)?Wg(r,t):(n.flags=n.flags&-4097|2,ie=!1,it=n)}}else{if(vc(n))throw Error(x(418));n.flags=n.flags&-4097|2,ie=!1,it=n}}}function dh(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;it=n}function la(n){if(n!==it)return!1;if(!ie)return dh(n),ie=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!mc(n.type,n.memoizedProps)),e&&(e=tt)){if(vc(n))throw Hg(),Error(x(418));for(;e;)Wg(n,e),e=Xr(e.nextSibling)}if(dh(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(x(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){tt=Xr(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}tt=null}}else tt=it?Xr(n.stateNode.nextSibling):null;return!0}function Hg(){for(var n=tt;n;)n=Xr(n.nextSibling)}function ms(){tt=it=null,ie=!1}function Ff(n){Ft===null?Ft=[n]:Ft.push(n)}var Qw=zr.ReactCurrentBatchConfig;function Lt(n,e){if(n&&n.defaultProps){e=le({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}var Za=ci(null),el=null,Xi=null,$f=null;function Jf(){$f=Xi=el=null}function Mf(n){var e=Za.current;re(Za),n._currentValue=e}function Sc(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function as(n,e){el=n,$f=Xi=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(We=!0),n.firstContext=null)}function Nt(n){var e=n._currentValue;if($f!==n)if(n={context:n,memoizedValue:e,next:null},Xi===null){if(el===null)throw Error(x(308));Xi=n,el.dependencies={lanes:0,firstContext:n}}else Xi=Xi.next=n;return e}var ki=null;function Uf(n){ki===null?ki=[n]:ki.push(n)}function _g(n,e,t,r){var i=e.interleaved;return i===null?(t.next=t,Uf(e)):(t.next=i.next,i.next=t),e.interleaved=t,Rr(n,r)}function Rr(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var jr=!1;function Vf(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Gg(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Nr(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function Zr(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,H&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Rr(n,t)}return i=r.interleaved,i===null?(e.next=e,Uf(r)):(e.next=i.next,i.next=e),r.interleaved=e,Rr(n,t)}function xa(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,Nf(n,t)}}function hh(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var i=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?i=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?i=s=e:s=s.next=e}else i=s=e;t={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function tl(n,e,t,r){var i=n.updateQueue;jr=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var u=a,c=u.next;u.next=null,o===null?s=c:o.next=c,o=u;var d=n.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=u))}if(s!==null){var h=i.baseState;o=0,d=c=u=null,a=s;do{var m=a.lane,p=a.eventTime;if((r&m)===m){d!==null&&(d=d.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var k=n,T=a;switch(m=e,p=t,T.tag){case 1:if(k=T.payload,typeof k=="function"){h=k.call(p,h,m);break e}h=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=T.payload,m=typeof k=="function"?k.call(p,h,m):k,m==null)break e;h=le({},h,m);break e;case 2:jr=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,m=i.effects,m===null?i.effects=[a]:m.push(a))}else p={eventTime:p,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=p,u=h):d=d.next=p,o|=m;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;m=a,a=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(!0);if(d===null&&(u=h),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Di|=o,n.lanes=o,n.memoizedState=h}}function mh(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],i=r.callback;if(i!==null){if(r.callback=null,r=t,typeof i!="function")throw Error(x(191,i));i.call(r)}}}var Yg=new _m.Component().refs;function kc(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:le({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var jl={isMounted:function(n){return(n=n._reactInternals)?Fi(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=Me(),i=ti(n),s=Nr(r,i);s.payload=e,t!=null&&(s.callback=t),e=Zr(n,s,i),e!==null&&(Ut(e,n,i,r),xa(e,n,i))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=Me(),i=ti(n),s=Nr(r,i);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=Zr(n,s,i),e!==null&&(Ut(e,n,i,r),xa(e,n,i))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Me(),r=ti(n),i=Nr(t,r);i.tag=2,e!=null&&(i.callback=e),e=Zr(n,i,r),e!==null&&(Ut(e,n,r,t),xa(e,n,r))}};function gh(n,e,t,r,i,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!wo(t,r)||!wo(i,s):!0}function Qg(n,e,t){var r=!1,i=ai,s=e.contextType;return typeof s=="object"&&s!==null?s=Nt(s):(i=Ye(e)?Ni:be.current,r=e.contextTypes,s=(r=r!=null)?hs(n,i):ai),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=jl,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=s),e}function ph(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&jl.enqueueReplaceState(e,e.state,null)}function Tc(n,e,t,r){var i=n.stateNode;i.props=t,i.state=n.memoizedState,i.refs=Yg,Vf(n);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Nt(s):(s=Ye(e)?Ni:be.current,i.context=hs(n,s)),i.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(kc(n,e,s,t),i.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&jl.enqueueReplaceState(i,i.state,null),tl(n,t,i,r),i.state=n.memoizedState),typeof i.componentDidMount=="function"&&(n.flags|=4194308)}function Js(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(x(309));var r=t.stateNode}if(!r)throw Error(x(147,n));var i=r,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===Yg&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(x(284));if(!t._owner)throw Error(x(290,n))}return n}function ua(n,e){throw n=Object.prototype.toString.call(e),Error(x(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function yh(n){var e=n._init;return e(n._payload)}function Xg(n){function e(y,g){if(n){var v=y.deletions;v===null?(y.deletions=[g],y.flags|=16):v.push(g)}}function t(y,g){if(!n)return null;for(;g!==null;)e(y,g),g=g.sibling;return null}function r(y,g){for(y=new Map;g!==null;)g.key!==null?y.set(g.key,g):y.set(g.index,g),g=g.sibling;return y}function i(y,g){return y=ni(y,g),y.index=0,y.sibling=null,y}function s(y,g,v){return y.index=v,n?(v=y.alternate,v!==null?(v=v.index,v<g?(y.flags|=2,g):v):(y.flags|=2,g)):(y.flags|=1048576,g)}function o(y){return n&&y.alternate===null&&(y.flags|=2),y}function a(y,g,v,A){return g===null||g.tag!==6?(g=Bu(v,y.mode,A),g.return=y,g):(g=i(g,v),g.return=y,g)}function u(y,g,v,A){var P=v.type;return P===qi?d(y,g,v.props.children,A,v.key):g!==null&&(g.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===Vr&&yh(P)===g.type)?(A=i(g,v.props),A.ref=Js(y,g,v),A.return=y,A):(A=Ra(v.type,v.key,v.props,null,y.mode,A),A.ref=Js(y,g,v),A.return=y,A)}function c(y,g,v,A){return g===null||g.tag!==4||g.stateNode.containerInfo!==v.containerInfo||g.stateNode.implementation!==v.implementation?(g=bu(v,y.mode,A),g.return=y,g):(g=i(g,v.children||[]),g.return=y,g)}function d(y,g,v,A,P){return g===null||g.tag!==7?(g=Ei(v,y.mode,A,P),g.return=y,g):(g=i(g,v),g.return=y,g)}function h(y,g,v){if(typeof g=="string"&&g!==""||typeof g=="number")return g=Bu(""+g,y.mode,v),g.return=y,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Xo:return v=Ra(g.type,g.key,g.props,null,y.mode,v),v.ref=Js(y,null,g),v.return=y,v;case ji:return g=bu(g,y.mode,v),g.return=y,g;case Vr:var A=g._init;return h(y,A(g._payload),v)}if(Ws(g)||Bs(g))return g=Ei(g,y.mode,v,null),g.return=y,g;ua(y,g)}return null}function m(y,g,v,A){var P=g!==null?g.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return P!==null?null:a(y,g,""+v,A);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Xo:return v.key===P?u(y,g,v,A):null;case ji:return v.key===P?c(y,g,v,A):null;case Vr:return P=v._init,m(y,g,P(v._payload),A)}if(Ws(v)||Bs(v))return P!==null?null:d(y,g,v,A,null);ua(y,v)}return null}function p(y,g,v,A,P){if(typeof A=="string"&&A!==""||typeof A=="number")return y=y.get(v)||null,a(g,y,""+A,P);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case Xo:return y=y.get(A.key===null?v:A.key)||null,u(g,y,A,P);case ji:return y=y.get(A.key===null?v:A.key)||null,c(g,y,A,P);case Vr:var N=A._init;return p(y,g,v,N(A._payload),P)}if(Ws(A)||Bs(A))return y=y.get(v)||null,d(g,y,A,P,null);ua(g,A)}return null}function k(y,g,v,A){for(var P=null,N=null,O=g,R=g=0,M=null;O!==null&&R<v.length;R++){O.index>R?(M=O,O=null):M=O.sibling;var J=m(y,O,v[R],A);if(J===null){O===null&&(O=M);break}n&&O&&J.alternate===null&&e(y,O),g=s(J,g,R),N===null?P=J:N.sibling=J,N=J,O=M}if(R===v.length)return t(y,O),ie&&pi(y,R),P;if(O===null){for(;R<v.length;R++)O=h(y,v[R],A),O!==null&&(g=s(O,g,R),N===null?P=O:N.sibling=O,N=O);return ie&&pi(y,R),P}for(O=r(y,O);R<v.length;R++)M=p(O,y,R,v[R],A),M!==null&&(n&&M.alternate!==null&&O.delete(M.key===null?R:M.key),g=s(M,g,R),N===null?P=M:N.sibling=M,N=M);return n&&O.forEach(function(Fe){return e(y,Fe)}),ie&&pi(y,R),P}function T(y,g,v,A){var P=Bs(v);if(typeof P!="function")throw Error(x(150));if(v=P.call(v),v==null)throw Error(x(151));for(var N=P=null,O=g,R=g=0,M=null,J=v.next();O!==null&&!J.done;R++,J=v.next()){O.index>R?(M=O,O=null):M=O.sibling;var Fe=m(y,O,J.value,A);if(Fe===null){O===null&&(O=M);break}n&&O&&Fe.alternate===null&&e(y,O),g=s(Fe,g,R),N===null?P=Fe:N.sibling=Fe,N=Fe,O=M}if(J.done)return t(y,O),ie&&pi(y,R),P;if(O===null){for(;!J.done;R++,J=v.next())J=h(y,J.value,A),J!==null&&(g=s(J,g,R),N===null?P=J:N.sibling=J,N=J);return ie&&pi(y,R),P}for(O=r(y,O);!J.done;R++,J=v.next())J=p(O,y,R,J.value,A),J!==null&&(n&&J.alternate!==null&&O.delete(J.key===null?R:J.key),g=s(J,g,R),N===null?P=J:N.sibling=J,N=J);return n&&O.forEach(function(di){return e(y,di)}),ie&&pi(y,R),P}function C(y,g,v,A){if(typeof v=="object"&&v!==null&&v.type===qi&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Xo:e:{for(var P=v.key,N=g;N!==null;){if(N.key===P){if(P=v.type,P===qi){if(N.tag===7){t(y,N.sibling),g=i(N,v.props.children),g.return=y,y=g;break e}}else if(N.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===Vr&&yh(P)===N.type){t(y,N.sibling),g=i(N,v.props),g.ref=Js(y,N,v),g.return=y,y=g;break e}t(y,N);break}else e(y,N);N=N.sibling}v.type===qi?(g=Ei(v.props.children,y.mode,A,v.key),g.return=y,y=g):(A=Ra(v.type,v.key,v.props,null,y.mode,A),A.ref=Js(y,g,v),A.return=y,y=A)}return o(y);case ji:e:{for(N=v.key;g!==null;){if(g.key===N)if(g.tag===4&&g.stateNode.containerInfo===v.containerInfo&&g.stateNode.implementation===v.implementation){t(y,g.sibling),g=i(g,v.children||[]),g.return=y,y=g;break e}else{t(y,g);break}else e(y,g);g=g.sibling}g=bu(v,y.mode,A),g.return=y,y=g}return o(y);case Vr:return N=v._init,C(y,g,N(v._payload),A)}if(Ws(v))return k(y,g,v,A);if(Bs(v))return T(y,g,v,A);ua(y,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,g!==null&&g.tag===6?(t(y,g.sibling),g=i(g,v),g.return=y,y=g):(t(y,g),g=Bu(v,y.mode,A),g.return=y,y=g),o(y)):t(y,g)}return C}var gs=Xg(!0),Zg=Xg(!1),jo={},on=ci(jo),Io=ci(jo),Ao=ci(jo);function Ti(n){if(n===jo)throw Error(x(174));return n}function jf(n,e){switch(ee(Ao,e),ee(Io,n),ee(on,jo),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ec(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=ec(e,n)}re(on),ee(on,e)}function ps(){re(on),re(Io),re(Ao)}function ep(n){Ti(Ao.current);var e=Ti(on.current),t=ec(e,n.type);e!==t&&(ee(Io,n),ee(on,t))}function qf(n){Io.current===n&&(re(on),re(Io))}var se=ci(0);function nl(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Cu=[];function Kf(){for(var n=0;n<Cu.length;n++)Cu[n]._workInProgressVersionPrimary=null;Cu.length=0}var Na=zr.ReactCurrentDispatcher,Pu=zr.ReactCurrentBatchConfig,Pi=0,ae=null,ve=null,ke=null,rl=!1,to=!1,Eo=0,Xw=0;function De(){throw Error(x(321))}function Wf(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!jt(n[t],e[t]))return!1;return!0}function Hf(n,e,t,r,i,s){if(Pi=s,ae=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Na.current=n===null||n.memoizedState===null?n0:r0,n=t(r,i),to){s=0;do{if(to=!1,Eo=0,25<=s)throw Error(x(301));s+=1,ke=ve=null,e.updateQueue=null,Na.current=i0,n=t(r,i)}while(to)}if(Na.current=il,e=ve!==null&&ve.next!==null,Pi=0,ke=ve=ae=null,rl=!1,e)throw Error(x(300));return n}function _f(){var n=Eo!==0;return Eo=0,n}function Kt(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ke===null?ae.memoizedState=ke=n:ke=ke.next=n,ke}function Ct(){if(ve===null){var n=ae.alternate;n=n!==null?n.memoizedState:null}else n=ve.next;var e=ke===null?ae.memoizedState:ke.next;if(e!==null)ke=e,ve=n;else{if(n===null)throw Error(x(310));ve=n,n={memoizedState:ve.memoizedState,baseState:ve.baseState,baseQueue:ve.baseQueue,queue:ve.queue,next:null},ke===null?ae.memoizedState=ke=n:ke=ke.next=n}return ke}function xo(n,e){return typeof e=="function"?e(n):e}function Du(n){var e=Ct(),t=e.queue;if(t===null)throw Error(x(311));t.lastRenderedReducer=n;var r=ve,i=r.baseQueue,s=t.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,t.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,u=null,c=s;do{var d=c.lane;if((Pi&d)===d)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:n(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(a=u=h,o=r):u=u.next=h,ae.lanes|=d,Di|=d}c=c.next}while(c!==null&&c!==s);u===null?o=r:u.next=a,jt(r,e.memoizedState)||(We=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,t.lastRenderedState=r}if(n=t.interleaved,n!==null){i=n;do s=i.lane,ae.lanes|=s,Di|=s,i=i.next;while(i!==n)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function Ou(n){var e=Ct(),t=e.queue;if(t===null)throw Error(x(311));t.lastRenderedReducer=n;var r=t.dispatch,i=t.pending,s=e.memoizedState;if(i!==null){t.pending=null;var o=i=i.next;do s=n(s,o.action),o=o.next;while(o!==i);jt(s,e.memoizedState)||(We=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,r]}function tp(){}function np(n,e){var t=ae,r=Ct(),i=e(),s=!jt(r.memoizedState,i);if(s&&(r.memoizedState=i,We=!0),r=r.queue,Gf(sp.bind(null,t,r,n),[n]),r.getSnapshot!==e||s||ke!==null&&ke.memoizedState.tag&1){if(t.flags|=2048,No(9,ip.bind(null,t,r,i,e),void 0,null),Te===null)throw Error(x(349));Pi&30||rp(t,e,i)}return i}function rp(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=ae.updateQueue,e===null?(e={lastEffect:null,stores:null},ae.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function ip(n,e,t,r){e.value=t,e.getSnapshot=r,op(e)&&ap(n)}function sp(n,e,t){return t(function(){op(e)&&ap(n)})}function op(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!jt(n,t)}catch{return!0}}function ap(n){var e=Rr(n,1);e!==null&&Ut(e,n,1,-1)}function vh(n){var e=Kt();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xo,lastRenderedState:n},e.queue=n,n=n.dispatch=t0.bind(null,ae,n),[e.memoizedState,n]}function No(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=ae.updateQueue,e===null?(e={lastEffect:null,stores:null},ae.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function lp(){return Ct().memoizedState}function Ca(n,e,t,r){var i=Kt();ae.flags|=n,i.memoizedState=No(1|e,t,void 0,r===void 0?null:r)}function ql(n,e,t,r){var i=Ct();r=r===void 0?null:r;var s=void 0;if(ve!==null){var o=ve.memoizedState;if(s=o.destroy,r!==null&&Wf(r,o.deps)){i.memoizedState=No(e,t,s,r);return}}ae.flags|=n,i.memoizedState=No(1|e,t,s,r)}function wh(n,e){return Ca(8390656,8,n,e)}function Gf(n,e){return ql(2048,8,n,e)}function up(n,e){return ql(4,2,n,e)}function cp(n,e){return ql(4,4,n,e)}function fp(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function dp(n,e,t){return t=t!=null?t.concat([n]):null,ql(4,4,fp.bind(null,e,n),t)}function Yf(){}function hp(n,e){var t=Ct();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&Wf(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function mp(n,e){var t=Ct();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&Wf(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function gp(n,e,t){return Pi&21?(jt(t,e)||(t=vg(),ae.lanes|=t,Di|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,We=!0),n.memoizedState=t)}function Zw(n,e){var t=Q;Q=t!==0&&4>t?t:4,n(!0);var r=Pu.transition;Pu.transition={};try{n(!1),e()}finally{Q=t,Pu.transition=r}}function pp(){return Ct().memoizedState}function e0(n,e,t){var r=ti(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},yp(n))vp(e,t);else if(t=_g(n,e,t,r),t!==null){var i=Me();Ut(t,n,r,i),wp(t,e,r)}}function t0(n,e,t){var r=ti(n),i={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(yp(n))vp(e,i);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(i.hasEagerState=!0,i.eagerState=a,jt(a,o)){var u=e.interleaved;u===null?(i.next=i,Uf(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}t=_g(n,e,i,r),t!==null&&(i=Me(),Ut(t,n,r,i),wp(t,e,r))}}function yp(n){var e=n.alternate;return n===ae||e!==null&&e===ae}function vp(n,e){to=rl=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function wp(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,Nf(n,t)}}var il={readContext:Nt,useCallback:De,useContext:De,useEffect:De,useImperativeHandle:De,useInsertionEffect:De,useLayoutEffect:De,useMemo:De,useReducer:De,useRef:De,useState:De,useDebugValue:De,useDeferredValue:De,useTransition:De,useMutableSource:De,useSyncExternalStore:De,useId:De,unstable_isNewReconciler:!1},n0={readContext:Nt,useCallback:function(n,e){return Kt().memoizedState=[n,e===void 0?null:e],n},useContext:Nt,useEffect:wh,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,Ca(4194308,4,fp.bind(null,e,n),t)},useLayoutEffect:function(n,e){return Ca(4194308,4,n,e)},useInsertionEffect:function(n,e){return Ca(4,2,n,e)},useMemo:function(n,e){var t=Kt();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=Kt();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=e0.bind(null,ae,n),[r.memoizedState,n]},useRef:function(n){var e=Kt();return n={current:n},e.memoizedState=n},useState:vh,useDebugValue:Yf,useDeferredValue:function(n){return Kt().memoizedState=n},useTransition:function(){var n=vh(!1),e=n[0];return n=Zw.bind(null,n[1]),Kt().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=ae,i=Kt();if(ie){if(t===void 0)throw Error(x(407));t=t()}else{if(t=e(),Te===null)throw Error(x(349));Pi&30||rp(r,e,t)}i.memoizedState=t;var s={value:t,getSnapshot:e};return i.queue=s,wh(sp.bind(null,r,s,n),[n]),r.flags|=2048,No(9,ip.bind(null,r,s,t,e),void 0,null),t},useId:function(){var n=Kt(),e=Te.identifierPrefix;if(ie){var t=Tr,r=kr;t=(r&~(1<<32-Mt(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=Eo++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=Xw++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},r0={readContext:Nt,useCallback:hp,useContext:Nt,useEffect:Gf,useImperativeHandle:dp,useInsertionEffect:up,useLayoutEffect:cp,useMemo:mp,useReducer:Du,useRef:lp,useState:function(){return Du(xo)},useDebugValue:Yf,useDeferredValue:function(n){var e=Ct();return gp(e,ve.memoizedState,n)},useTransition:function(){var n=Du(xo)[0],e=Ct().memoizedState;return[n,e]},useMutableSource:tp,useSyncExternalStore:np,useId:pp,unstable_isNewReconciler:!1},i0={readContext:Nt,useCallback:hp,useContext:Nt,useEffect:Gf,useImperativeHandle:dp,useInsertionEffect:up,useLayoutEffect:cp,useMemo:mp,useReducer:Ou,useRef:lp,useState:function(){return Ou(xo)},useDebugValue:Yf,useDeferredValue:function(n){var e=Ct();return ve===null?e.memoizedState=n:gp(e,ve.memoizedState,n)},useTransition:function(){var n=Ou(xo)[0],e=Ct().memoizedState;return[n,e]},useMutableSource:tp,useSyncExternalStore:np,useId:pp,unstable_isNewReconciler:!1};function ys(n,e){try{var t="",r=e;do t+=Rv(r),r=r.return;while(r);var i=t}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:i,digest:null}}function Ru(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function Ic(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var s0=typeof WeakMap=="function"?WeakMap:Map;function Sp(n,e,t){t=Nr(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){ol||(ol=!0,Lc=r),Ic(n,e)},t}function kp(n,e,t){t=Nr(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;t.payload=function(){return r(i)},t.callback=function(){Ic(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){Ic(n,e),typeof r!="function"&&(ei===null?ei=new Set([this]):ei.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function Sh(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new s0;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(t)||(i.add(t),n=w0.bind(null,n,e,t),e.then(n,n))}function kh(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function Th(n,e,t,r,i){return n.mode&1?(n.flags|=65536,n.lanes=i,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Nr(-1,1),e.tag=2,Zr(t,e,1))),t.lanes|=1),n)}var o0=zr.ReactCurrentOwner,We=!1;function $e(n,e,t,r){e.child=n===null?Zg(e,null,t,r):gs(e,n.child,t,r)}function Ih(n,e,t,r,i){t=t.render;var s=e.ref;return as(e,i),r=Hf(n,e,t,r,s,i),t=_f(),n!==null&&!We?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Lr(n,e,i)):(ie&&t&&bf(e),e.flags|=1,$e(n,e,r,i),e.child)}function Ah(n,e,t,r,i){if(n===null){var s=t.type;return typeof s=="function"&&!id(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,Tp(n,e,s,r,i)):(n=Ra(t.type,null,r,e,e.mode,i),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&i)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:wo,t(o,r)&&n.ref===e.ref)return Lr(n,e,i)}return e.flags|=1,n=ni(s,r),n.ref=e.ref,n.return=e,e.child=n}function Tp(n,e,t,r,i){if(n!==null){var s=n.memoizedProps;if(wo(s,r)&&n.ref===e.ref)if(We=!1,e.pendingProps=r=s,(n.lanes&i)!==0)n.flags&131072&&(We=!0);else return e.lanes=n.lanes,Lr(n,e,i)}return Ac(n,e,t,r,i)}function Ip(n,e,t){var r=e.pendingProps,i=r.children,s=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ee(es,et),et|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,ee(es,et),et|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:t,ee(es,et),et|=r}else s!==null?(r=s.baseLanes|t,e.memoizedState=null):r=t,ee(es,et),et|=r;return $e(n,e,i,t),e.child}function Ap(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function Ac(n,e,t,r,i){var s=Ye(t)?Ni:be.current;return s=hs(e,s),as(e,i),t=Hf(n,e,t,r,s,i),r=_f(),n!==null&&!We?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Lr(n,e,i)):(ie&&r&&bf(e),e.flags|=1,$e(n,e,t,i),e.child)}function Eh(n,e,t,r,i){if(Ye(t)){var s=!0;Ya(e)}else s=!1;if(as(e,i),e.stateNode===null)Pa(n,e),Qg(e,t,r),Tc(e,t,r,i),r=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var u=o.context,c=t.contextType;typeof c=="object"&&c!==null?c=Nt(c):(c=Ye(t)?Ni:be.current,c=hs(e,c));var d=t.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||u!==c)&&ph(e,o,r,c),jr=!1;var m=e.memoizedState;o.state=m,tl(e,r,o,i),u=e.memoizedState,a!==r||m!==u||Ge.current||jr?(typeof d=="function"&&(kc(e,t,d,r),u=e.memoizedState),(a=jr||gh(e,t,a,r,m,u,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Gg(n,e),a=e.memoizedProps,c=e.type===e.elementType?a:Lt(e.type,a),o.props=c,h=e.pendingProps,m=o.context,u=t.contextType,typeof u=="object"&&u!==null?u=Nt(u):(u=Ye(t)?Ni:be.current,u=hs(e,u));var p=t.getDerivedStateFromProps;(d=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||m!==u)&&ph(e,o,r,u),jr=!1,m=e.memoizedState,o.state=m,tl(e,r,o,i);var k=e.memoizedState;a!==h||m!==k||Ge.current||jr?(typeof p=="function"&&(kc(e,t,p,r),k=e.memoizedState),(c=jr||gh(e,t,c,r,m,k,u)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,k,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,k,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&m===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&m===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=k),o.props=r,o.state=k,o.context=u,r=c):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&m===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&m===n.memoizedState||(e.flags|=1024),r=!1)}return Ec(n,e,t,r,s,i)}function Ec(n,e,t,r,i,s){Ap(n,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&ch(e,t,!1),Lr(n,e,s);r=e.stateNode,o0.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&o?(e.child=gs(e,n.child,null,s),e.child=gs(e,null,a,s)):$e(n,e,a,s),e.memoizedState=r.state,i&&ch(e,t,!0),e.child}function Ep(n){var e=n.stateNode;e.pendingContext?uh(n,e.pendingContext,e.pendingContext!==e.context):e.context&&uh(n,e.context,!1),jf(n,e.containerInfo)}function xh(n,e,t,r,i){return ms(),Ff(i),e.flags|=256,$e(n,e,t,r),e.child}var xc={dehydrated:null,treeContext:null,retryLane:0};function Nc(n){return{baseLanes:n,cachePool:null,transitions:null}}function xp(n,e,t){var r=e.pendingProps,i=se.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(i|=1),ee(se,i&1),n===null)return wc(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,n=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Hl(o,r,0,null),n=Ei(n,r,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=Nc(t),e.memoizedState=xc,n):Qf(e,o));if(i=n.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return a0(n,e,o,r,a,i,t);if(s){s=r.fallback,o=e.mode,i=n.child,a=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=ni(i,u),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=ni(a,s):(s=Ei(s,o,t,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=n.child.memoizedState,o=o===null?Nc(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=xc,r}return s=n.child,n=s.sibling,r=ni(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function Qf(n,e){return e=Hl({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function ca(n,e,t,r){return r!==null&&Ff(r),gs(e,n.child,null,t),n=Qf(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function a0(n,e,t,r,i,s,o){if(t)return e.flags&256?(e.flags&=-257,r=Ru(Error(x(422))),ca(n,e,o,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Hl({mode:"visible",children:r.children},i,0,null),s=Ei(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&gs(e,n.child,null,o),e.child.memoizedState=Nc(o),e.memoizedState=xc,s);if(!(e.mode&1))return ca(n,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(x(419)),r=Ru(s,r,void 0),ca(n,e,o,r)}if(a=(o&n.childLanes)!==0,We||a){if(r=Te,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Rr(n,i),Ut(r,n,i,-1))}return rd(),r=Ru(Error(x(421))),ca(n,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=n.child,e=S0.bind(null,n),i._reactRetry=e,null):(n=s.treeContext,tt=Xr(i.nextSibling),it=e,ie=!0,Ft=null,n!==null&&(ct[ft++]=kr,ct[ft++]=Tr,ct[ft++]=Ci,kr=n.id,Tr=n.overflow,Ci=e),e=Qf(e,r.children),e.flags|=4096,e)}function Nh(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),Sc(n.return,e,t)}function Lu(n,e,t,r,i){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=t,s.tailMode=i)}function Np(n,e,t){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if($e(n,e,r.children,t),r=se.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Nh(n,t,e);else if(n.tag===19)Nh(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(ee(se,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)n=t.alternate,n!==null&&nl(n)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),Lu(e,!1,i,t,s);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(n=i.alternate,n!==null&&nl(n)===null){e.child=i;break}n=i.sibling,i.sibling=t,t=i,i=n}Lu(e,!0,t,null,s);break;case"together":Lu(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Pa(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Lr(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),Di|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(x(153));if(e.child!==null){for(n=e.child,t=ni(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=ni(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function l0(n,e,t){switch(e.tag){case 3:Ep(e),ms();break;case 5:ep(e);break;case 1:Ye(e.type)&&Ya(e);break;case 4:jf(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;ee(Za,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ee(se,se.current&1),e.flags|=128,null):t&e.child.childLanes?xp(n,e,t):(ee(se,se.current&1),n=Lr(n,e,t),n!==null?n.sibling:null);ee(se,se.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return Np(n,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ee(se,se.current),r)break;return null;case 22:case 23:return e.lanes=0,Ip(n,e,t)}return Lr(n,e,t)}var Cp,Cc,Pp,Dp;Cp=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};Cc=function(){};Pp=function(n,e,t,r){var i=n.memoizedProps;if(i!==r){n=e.stateNode,Ti(on.current);var s=null;switch(t){case"input":i=Yu(n,i),r=Yu(n,r),s=[];break;case"select":i=le({},i,{value:void 0}),r=le({},r,{value:void 0}),s=[];break;case"textarea":i=Zu(n,i),r=Zu(n,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=_a)}tc(t,r);var o;t=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(fo.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var u=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&u!==a&&(u!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(t||(t={}),t[o]=u[o])}else t||(s||(s=[]),s.push(c,t)),t=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(s=s||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(fo.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&te("scroll",n),s||a===u||(s=[])):(s=s||[]).push(c,u))}t&&(s=s||[]).push("style",t);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};Dp=function(n,e,t,r){t!==r&&(e.flags|=4)};function Ms(n,e){if(!ie)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function Oe(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=n,i=i.sibling;else for(i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=n,i=i.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function u0(n,e,t){var r=e.pendingProps;switch(zf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Oe(e),null;case 1:return Ye(e.type)&&Ga(),Oe(e),null;case 3:return r=e.stateNode,ps(),re(Ge),re(be),Kf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(la(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ft!==null&&(zc(Ft),Ft=null))),Cc(n,e),Oe(e),null;case 5:qf(e);var i=Ti(Ao.current);if(t=e.type,n!==null&&e.stateNode!=null)Pp(n,e,t,r,i),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(x(166));return Oe(e),null}if(n=Ti(on.current),la(e)){r=e.stateNode,t=e.type;var s=e.memoizedProps;switch(r[_t]=e,r[To]=s,n=(e.mode&1)!==0,t){case"dialog":te("cancel",r),te("close",r);break;case"iframe":case"object":case"embed":te("load",r);break;case"video":case"audio":for(i=0;i<_s.length;i++)te(_s[i],r);break;case"source":te("error",r);break;case"img":case"image":case"link":te("error",r),te("load",r);break;case"details":te("toggle",r);break;case"input":zd(r,s),te("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},te("invalid",r);break;case"textarea":$d(r,s),te("invalid",r)}tc(t,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&aa(r.textContent,a,n),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&aa(r.textContent,a,n),i=["children",""+a]):fo.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&te("scroll",r)}switch(t){case"input":Zo(r),Fd(r,s,!0);break;case"textarea":Zo(r),Jd(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=_a)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=rg(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=o.createElement(t,{is:r.is}):(n=o.createElement(t),t==="select"&&(o=n,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):n=o.createElementNS(n,t),n[_t]=e,n[To]=r,Cp(n,e,!1,!1),e.stateNode=n;e:{switch(o=nc(t,r),t){case"dialog":te("cancel",n),te("close",n),i=r;break;case"iframe":case"object":case"embed":te("load",n),i=r;break;case"video":case"audio":for(i=0;i<_s.length;i++)te(_s[i],n);i=r;break;case"source":te("error",n),i=r;break;case"img":case"image":case"link":te("error",n),te("load",n),i=r;break;case"details":te("toggle",n),i=r;break;case"input":zd(n,r),i=Yu(n,r),te("invalid",n);break;case"option":i=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},i=le({},r,{value:void 0}),te("invalid",n);break;case"textarea":$d(n,r),i=Zu(n,r),te("invalid",n);break;default:i=r}tc(t,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var u=a[s];s==="style"?og(n,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&ig(n,u)):s==="children"?typeof u=="string"?(t!=="textarea"||u!=="")&&ho(n,u):typeof u=="number"&&ho(n,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(fo.hasOwnProperty(s)?u!=null&&s==="onScroll"&&te("scroll",n):u!=null&&kf(n,s,u,o))}switch(t){case"input":Zo(n),Fd(n,r,!1);break;case"textarea":Zo(n),Jd(n);break;case"option":r.value!=null&&n.setAttribute("value",""+oi(r.value));break;case"select":n.multiple=!!r.multiple,s=r.value,s!=null?rs(n,!!r.multiple,s,!1):r.defaultValue!=null&&rs(n,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(n.onclick=_a)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Oe(e),null;case 6:if(n&&e.stateNode!=null)Dp(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(x(166));if(t=Ti(Ao.current),Ti(on.current),la(e)){if(r=e.stateNode,t=e.memoizedProps,r[_t]=e,(s=r.nodeValue!==t)&&(n=it,n!==null))switch(n.tag){case 3:aa(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&aa(r.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[_t]=e,e.stateNode=r}return Oe(e),null;case 13:if(re(se),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(ie&&tt!==null&&e.mode&1&&!(e.flags&128))Hg(),ms(),e.flags|=98560,s=!1;else if(s=la(e),r!==null&&r.dehydrated!==null){if(n===null){if(!s)throw Error(x(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(x(317));s[_t]=e}else ms(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Oe(e),s=!1}else Ft!==null&&(zc(Ft),Ft=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(n===null||se.current&1?we===0&&(we=3):rd())),e.updateQueue!==null&&(e.flags|=4),Oe(e),null);case 4:return ps(),Cc(n,e),n===null&&So(e.stateNode.containerInfo),Oe(e),null;case 10:return Mf(e.type._context),Oe(e),null;case 17:return Ye(e.type)&&Ga(),Oe(e),null;case 19:if(re(se),s=e.memoizedState,s===null)return Oe(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Ms(s,!1);else{if(we!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=nl(n),o!==null){for(e.flags|=128,Ms(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)s=t,n=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return ee(se,se.current&1|2),e.child}n=n.sibling}s.tail!==null&&ge()>vs&&(e.flags|=128,r=!0,Ms(s,!1),e.lanes=4194304)}else{if(!r)if(n=nl(o),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Ms(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!ie)return Oe(e),null}else 2*ge()-s.renderingStartTime>vs&&t!==1073741824&&(e.flags|=128,r=!0,Ms(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=ge(),e.sibling=null,t=se.current,ee(se,r?t&1|2:t&1),e):(Oe(e),null);case 22:case 23:return nd(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?et&1073741824&&(Oe(e),e.subtreeFlags&6&&(e.flags|=8192)):Oe(e),null;case 24:return null;case 25:return null}throw Error(x(156,e.tag))}function c0(n,e){switch(zf(e),e.tag){case 1:return Ye(e.type)&&Ga(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return ps(),re(Ge),re(be),Kf(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return qf(e),null;case 13:if(re(se),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(x(340));ms()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return re(se),null;case 4:return ps(),null;case 10:return Mf(e.type._context),null;case 22:case 23:return nd(),null;case 24:return null;default:return null}}var fa=!1,Re=!1,f0=typeof WeakSet=="function"?WeakSet:Set,L=null;function Zi(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){ue(n,e,r)}else t.current=null}function Pc(n,e,t){try{t()}catch(r){ue(n,e,r)}}var Ch=!1;function d0(n,e){if(dc=Ka,n=Bg(),Bf(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,u=-1,c=0,d=0,h=n,m=null;t:for(;;){for(var p;h!==t||i!==0&&h.nodeType!==3||(a=o+i),h!==s||r!==0&&h.nodeType!==3||(u=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(p=h.firstChild)!==null;)m=h,h=p;for(;;){if(h===n)break t;if(m===t&&++c===i&&(a=o),m===s&&++d===r&&(u=o),(p=h.nextSibling)!==null)break;h=m,m=h.parentNode}h=p}t=a===-1||u===-1?null:{start:a,end:u}}else t=null}t=t||{start:0,end:0}}else t=null;for(hc={focusedElem:n,selectionRange:t},Ka=!1,L=e;L!==null;)if(e=L,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,L=n;else for(;L!==null;){e=L;try{var k=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var T=k.memoizedProps,C=k.memoizedState,y=e.stateNode,g=y.getSnapshotBeforeUpdate(e.elementType===e.type?T:Lt(e.type,T),C);y.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(x(163))}}catch(A){ue(e,e.return,A)}if(n=e.sibling,n!==null){n.return=e.return,L=n;break}L=e.return}return k=Ch,Ch=!1,k}function no(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&n)===n){var s=i.destroy;i.destroy=void 0,s!==void 0&&Pc(e,t,s)}i=i.next}while(i!==r)}}function Kl(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function Dc(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function Op(n){var e=n.alternate;e!==null&&(n.alternate=null,Op(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[_t],delete e[To],delete e[pc],delete e[_w],delete e[Gw])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Rp(n){return n.tag===5||n.tag===3||n.tag===4}function Ph(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Rp(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Oc(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=_a));else if(r!==4&&(n=n.child,n!==null))for(Oc(n,e,t),n=n.sibling;n!==null;)Oc(n,e,t),n=n.sibling}function Rc(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(Rc(n,e,t),n=n.sibling;n!==null;)Rc(n,e,t),n=n.sibling}var Ie=null,zt=!1;function $r(n,e,t){for(t=t.child;t!==null;)Lp(n,e,t),t=t.sibling}function Lp(n,e,t){if(sn&&typeof sn.onCommitFiberUnmount=="function")try{sn.onCommitFiberUnmount(Fl,t)}catch{}switch(t.tag){case 5:Re||Zi(t,e);case 6:var r=Ie,i=zt;Ie=null,$r(n,e,t),Ie=r,zt=i,Ie!==null&&(zt?(n=Ie,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):Ie.removeChild(t.stateNode));break;case 18:Ie!==null&&(zt?(n=Ie,t=t.stateNode,n.nodeType===8?xu(n.parentNode,t):n.nodeType===1&&xu(n,t),yo(n)):xu(Ie,t.stateNode));break;case 4:r=Ie,i=zt,Ie=t.stateNode.containerInfo,zt=!0,$r(n,e,t),Ie=r,zt=i;break;case 0:case 11:case 14:case 15:if(!Re&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Pc(t,e,o),i=i.next}while(i!==r)}$r(n,e,t);break;case 1:if(!Re&&(Zi(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(a){ue(t,e,a)}$r(n,e,t);break;case 21:$r(n,e,t);break;case 22:t.mode&1?(Re=(r=Re)||t.memoizedState!==null,$r(n,e,t),Re=r):$r(n,e,t);break;default:$r(n,e,t)}}function Dh(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new f0),e.forEach(function(r){var i=k0.bind(null,n,r);t.has(r)||(t.add(r),r.then(i,i))})}}function Ot(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var i=t[r];try{var s=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Ie=a.stateNode,zt=!1;break e;case 3:Ie=a.stateNode.containerInfo,zt=!0;break e;case 4:Ie=a.stateNode.containerInfo,zt=!0;break e}a=a.return}if(Ie===null)throw Error(x(160));Lp(s,o,i),Ie=null,zt=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(c){ue(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Bp(e,n),e=e.sibling}function Bp(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Ot(e,n),qt(n),r&4){try{no(3,n,n.return),Kl(3,n)}catch(T){ue(n,n.return,T)}try{no(5,n,n.return)}catch(T){ue(n,n.return,T)}}break;case 1:Ot(e,n),qt(n),r&512&&t!==null&&Zi(t,t.return);break;case 5:if(Ot(e,n),qt(n),r&512&&t!==null&&Zi(t,t.return),n.flags&32){var i=n.stateNode;try{ho(i,"")}catch(T){ue(n,n.return,T)}}if(r&4&&(i=n.stateNode,i!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,a=n.type,u=n.updateQueue;if(n.updateQueue=null,u!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&tg(i,s),nc(a,o);var c=nc(a,s);for(o=0;o<u.length;o+=2){var d=u[o],h=u[o+1];d==="style"?og(i,h):d==="dangerouslySetInnerHTML"?ig(i,h):d==="children"?ho(i,h):kf(i,d,h,c)}switch(a){case"input":Qu(i,s);break;case"textarea":ng(i,s);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?rs(i,!!s.multiple,p,!1):m!==!!s.multiple&&(s.defaultValue!=null?rs(i,!!s.multiple,s.defaultValue,!0):rs(i,!!s.multiple,s.multiple?[]:"",!1))}i[To]=s}catch(T){ue(n,n.return,T)}}break;case 6:if(Ot(e,n),qt(n),r&4){if(n.stateNode===null)throw Error(x(162));i=n.stateNode,s=n.memoizedProps;try{i.nodeValue=s}catch(T){ue(n,n.return,T)}}break;case 3:if(Ot(e,n),qt(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{yo(e.containerInfo)}catch(T){ue(n,n.return,T)}break;case 4:Ot(e,n),qt(n);break;case 13:Ot(e,n),qt(n),i=n.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(ed=ge())),r&4&&Dh(n);break;case 22:if(d=t!==null&&t.memoizedState!==null,n.mode&1?(Re=(c=Re)||d,Ot(e,n),Re=c):Ot(e,n),qt(n),r&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!d&&n.mode&1)for(L=n,d=n.child;d!==null;){for(h=L=d;L!==null;){switch(m=L,p=m.child,m.tag){case 0:case 11:case 14:case 15:no(4,m,m.return);break;case 1:Zi(m,m.return);var k=m.stateNode;if(typeof k.componentWillUnmount=="function"){r=m,t=m.return;try{e=r,k.props=e.memoizedProps,k.state=e.memoizedState,k.componentWillUnmount()}catch(T){ue(r,t,T)}}break;case 5:Zi(m,m.return);break;case 22:if(m.memoizedState!==null){Rh(h);continue}}p!==null?(p.return=m,L=p):Rh(h)}d=d.sibling}e:for(d=null,h=n;;){if(h.tag===5){if(d===null){d=h;try{i=h.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,u=h.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=sg("display",o))}catch(T){ue(n,n.return,T)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(T){ue(n,n.return,T)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===n)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===n)break e;for(;h.sibling===null;){if(h.return===null||h.return===n)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Ot(e,n),qt(n),r&4&&Dh(n);break;case 21:break;default:Ot(e,n),qt(n)}}function qt(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(Rp(t)){var r=t;break e}t=t.return}throw Error(x(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(ho(i,""),r.flags&=-33);var s=Ph(n);Rc(n,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Ph(n);Oc(n,a,o);break;default:throw Error(x(161))}}catch(u){ue(n,n.return,u)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function h0(n,e,t){L=n,bp(n)}function bp(n,e,t){for(var r=(n.mode&1)!==0;L!==null;){var i=L,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||fa;if(!o){var a=i.alternate,u=a!==null&&a.memoizedState!==null||Re;a=fa;var c=Re;if(fa=o,(Re=u)&&!c)for(L=i;L!==null;)o=L,u=o.child,o.tag===22&&o.memoizedState!==null?Lh(i):u!==null?(u.return=o,L=u):Lh(i);for(;s!==null;)L=s,bp(s),s=s.sibling;L=i,fa=a,Re=c}Oh(n)}else i.subtreeFlags&8772&&s!==null?(s.return=i,L=s):Oh(n)}}function Oh(n){for(;L!==null;){var e=L;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Re||Kl(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Re)if(t===null)r.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:Lt(e.type,t.memoizedProps);r.componentDidUpdate(i,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&mh(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}mh(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&t.focus();break;case"img":u.src&&(t.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&yo(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(x(163))}Re||e.flags&512&&Dc(e)}catch(m){ue(e,e.return,m)}}if(e===n){L=null;break}if(t=e.sibling,t!==null){t.return=e.return,L=t;break}L=e.return}}function Rh(n){for(;L!==null;){var e=L;if(e===n){L=null;break}var t=e.sibling;if(t!==null){t.return=e.return,L=t;break}L=e.return}}function Lh(n){for(;L!==null;){var e=L;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{Kl(4,e)}catch(u){ue(e,t,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){ue(e,i,u)}}var s=e.return;try{Dc(e)}catch(u){ue(e,s,u)}break;case 5:var o=e.return;try{Dc(e)}catch(u){ue(e,o,u)}}}catch(u){ue(e,e.return,u)}if(e===n){L=null;break}var a=e.sibling;if(a!==null){a.return=e.return,L=a;break}L=e.return}}var m0=Math.ceil,sl=zr.ReactCurrentDispatcher,Xf=zr.ReactCurrentOwner,Et=zr.ReactCurrentBatchConfig,H=0,Te=null,ye=null,Ne=0,et=0,es=ci(0),we=0,Co=null,Di=0,Wl=0,Zf=0,ro=null,je=null,ed=0,vs=1/0,dn=null,ol=!1,Lc=null,ei=null,da=!1,Hr=null,al=0,io=0,Bc=null,Da=-1,Oa=0;function Me(){return H&6?ge():Da!==-1?Da:Da=ge()}function ti(n){return n.mode&1?H&2&&Ne!==0?Ne&-Ne:Qw.transition!==null?(Oa===0&&(Oa=vg()),Oa):(n=Q,n!==0||(n=window.event,n=n===void 0?16:Eg(n.type)),n):1}function Ut(n,e,t,r){if(50<io)throw io=0,Bc=null,Error(x(185));Mo(n,t,r),(!(H&2)||n!==Te)&&(n===Te&&(!(H&2)&&(Wl|=t),we===4&&Kr(n,Ne)),Qe(n,r),t===1&&H===0&&!(e.mode&1)&&(vs=ge()+500,Vl&&fi()))}function Qe(n,e){var t=n.callbackNode;Qv(n,e);var r=qa(n,n===Te?Ne:0);if(r===0)t!==null&&Vd(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&Vd(t),e===1)n.tag===0?Yw(Bh.bind(null,n)):qg(Bh.bind(null,n)),Ww(function(){!(H&6)&&fi()}),t=null;else{switch(wg(r)){case 1:t=xf;break;case 4:t=pg;break;case 16:t=ja;break;case 536870912:t=yg;break;default:t=ja}t=jp(t,zp.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function zp(n,e){if(Da=-1,Oa=0,H&6)throw Error(x(327));var t=n.callbackNode;if(ls()&&n.callbackNode!==t)return null;var r=qa(n,n===Te?Ne:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=ll(n,r);else{e=r;var i=H;H|=2;var s=$p();(Te!==n||Ne!==e)&&(dn=null,vs=ge()+500,Ai(n,e));do try{y0();break}catch(a){Fp(n,a)}while(!0);Jf(),sl.current=s,H=i,ye!==null?e=0:(Te=null,Ne=0,e=we)}if(e!==0){if(e===2&&(i=ac(n),i!==0&&(r=i,e=bc(n,i))),e===1)throw t=Co,Ai(n,0),Kr(n,r),Qe(n,ge()),t;if(e===6)Kr(n,r);else{if(i=n.current.alternate,!(r&30)&&!g0(i)&&(e=ll(n,r),e===2&&(s=ac(n),s!==0&&(r=s,e=bc(n,s))),e===1))throw t=Co,Ai(n,0),Kr(n,r),Qe(n,ge()),t;switch(n.finishedWork=i,n.finishedLanes=r,e){case 0:case 1:throw Error(x(345));case 2:yi(n,je,dn);break;case 3:if(Kr(n,r),(r&130023424)===r&&(e=ed+500-ge(),10<e)){if(qa(n,0)!==0)break;if(i=n.suspendedLanes,(i&r)!==r){Me(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=gc(yi.bind(null,n,je,dn),e);break}yi(n,je,dn);break;case 4:if(Kr(n,r),(r&4194240)===r)break;for(e=n.eventTimes,i=-1;0<r;){var o=31-Mt(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=ge()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*m0(r/1960))-r,10<r){n.timeoutHandle=gc(yi.bind(null,n,je,dn),r);break}yi(n,je,dn);break;case 5:yi(n,je,dn);break;default:throw Error(x(329))}}}return Qe(n,ge()),n.callbackNode===t?zp.bind(null,n):null}function bc(n,e){var t=ro;return n.current.memoizedState.isDehydrated&&(Ai(n,e).flags|=256),n=ll(n,e),n!==2&&(e=je,je=t,e!==null&&zc(e)),n}function zc(n){je===null?je=n:je.push.apply(je,n)}function g0(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var i=t[r],s=i.getSnapshot;i=i.value;try{if(!jt(s(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Kr(n,e){for(e&=~Zf,e&=~Wl,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-Mt(e),r=1<<t;n[t]=-1,e&=~r}}function Bh(n){if(H&6)throw Error(x(327));ls();var e=qa(n,0);if(!(e&1))return Qe(n,ge()),null;var t=ll(n,e);if(n.tag!==0&&t===2){var r=ac(n);r!==0&&(e=r,t=bc(n,r))}if(t===1)throw t=Co,Ai(n,0),Kr(n,e),Qe(n,ge()),t;if(t===6)throw Error(x(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,yi(n,je,dn),Qe(n,ge()),null}function td(n,e){var t=H;H|=1;try{return n(e)}finally{H=t,H===0&&(vs=ge()+500,Vl&&fi())}}function Oi(n){Hr!==null&&Hr.tag===0&&!(H&6)&&ls();var e=H;H|=1;var t=Et.transition,r=Q;try{if(Et.transition=null,Q=1,n)return n()}finally{Q=r,Et.transition=t,H=e,!(H&6)&&fi()}}function nd(){et=es.current,re(es)}function Ai(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,Kw(t)),ye!==null)for(t=ye.return;t!==null;){var r=t;switch(zf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ga();break;case 3:ps(),re(Ge),re(be),Kf();break;case 5:qf(r);break;case 4:ps();break;case 13:re(se);break;case 19:re(se);break;case 10:Mf(r.type._context);break;case 22:case 23:nd()}t=t.return}if(Te=n,ye=n=ni(n.current,null),Ne=et=e,we=0,Co=null,Zf=Wl=Di=0,je=ro=null,ki!==null){for(e=0;e<ki.length;e++)if(t=ki[e],r=t.interleaved,r!==null){t.interleaved=null;var i=r.next,s=t.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}t.pending=r}ki=null}return n}function Fp(n,e){do{var t=ye;try{if(Jf(),Na.current=il,rl){for(var r=ae.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}rl=!1}if(Pi=0,ke=ve=ae=null,to=!1,Eo=0,Xf.current=null,t===null||t.return===null){we=1,Co=e,ye=null;break}e:{var s=n,o=t.return,a=t,u=e;if(e=Ne,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=kh(o);if(p!==null){p.flags&=-257,Th(p,o,a,s,e),p.mode&1&&Sh(s,c,e),e=p,u=c;var k=e.updateQueue;if(k===null){var T=new Set;T.add(u),e.updateQueue=T}else k.add(u);break e}else{if(!(e&1)){Sh(s,c,e),rd();break e}u=Error(x(426))}}else if(ie&&a.mode&1){var C=kh(o);if(C!==null){!(C.flags&65536)&&(C.flags|=256),Th(C,o,a,s,e),Ff(ys(u,a));break e}}s=u=ys(u,a),we!==4&&(we=2),ro===null?ro=[s]:ro.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var y=Sp(s,u,e);hh(s,y);break e;case 1:a=u;var g=s.type,v=s.stateNode;if(!(s.flags&128)&&(typeof g.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(ei===null||!ei.has(v)))){s.flags|=65536,e&=-e,s.lanes|=e;var A=kp(s,a,e);hh(s,A);break e}}s=s.return}while(s!==null)}Mp(t)}catch(P){e=P,ye===t&&t!==null&&(ye=t=t.return);continue}break}while(!0)}function $p(){var n=sl.current;return sl.current=il,n===null?il:n}function rd(){(we===0||we===3||we===2)&&(we=4),Te===null||!(Di&268435455)&&!(Wl&268435455)||Kr(Te,Ne)}function ll(n,e){var t=H;H|=2;var r=$p();(Te!==n||Ne!==e)&&(dn=null,Ai(n,e));do try{p0();break}catch(i){Fp(n,i)}while(!0);if(Jf(),H=t,sl.current=r,ye!==null)throw Error(x(261));return Te=null,Ne=0,we}function p0(){for(;ye!==null;)Jp(ye)}function y0(){for(;ye!==null&&!Vv();)Jp(ye)}function Jp(n){var e=Vp(n.alternate,n,et);n.memoizedProps=n.pendingProps,e===null?Mp(n):ye=e,Xf.current=null}function Mp(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=c0(t,e),t!==null){t.flags&=32767,ye=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{we=6,ye=null;return}}else if(t=u0(t,e,et),t!==null){ye=t;return}if(e=e.sibling,e!==null){ye=e;return}ye=e=n}while(e!==null);we===0&&(we=5)}function yi(n,e,t){var r=Q,i=Et.transition;try{Et.transition=null,Q=1,v0(n,e,t,r)}finally{Et.transition=i,Q=r}return null}function v0(n,e,t,r){do ls();while(Hr!==null);if(H&6)throw Error(x(327));t=n.finishedWork;var i=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(x(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(Xv(n,s),n===Te&&(ye=Te=null,Ne=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||da||(da=!0,jp(ja,function(){return ls(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=Et.transition,Et.transition=null;var o=Q;Q=1;var a=H;H|=4,Xf.current=null,d0(n,t),Bp(t,n),$w(hc),Ka=!!dc,hc=dc=null,n.current=t,h0(t),jv(),H=a,Q=o,Et.transition=s}else n.current=t;if(da&&(da=!1,Hr=n,al=i),s=n.pendingLanes,s===0&&(ei=null),Wv(t.stateNode),Qe(n,ge()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)i=e[t],r(i.value,{componentStack:i.stack,digest:i.digest});if(ol)throw ol=!1,n=Lc,Lc=null,n;return al&1&&n.tag!==0&&ls(),s=n.pendingLanes,s&1?n===Bc?io++:(io=0,Bc=n):io=0,fi(),null}function ls(){if(Hr!==null){var n=wg(al),e=Et.transition,t=Q;try{if(Et.transition=null,Q=16>n?16:n,Hr===null)var r=!1;else{if(n=Hr,Hr=null,al=0,H&6)throw Error(x(331));var i=H;for(H|=4,L=n.current;L!==null;){var s=L,o=s.child;if(L.flags&16){var a=s.deletions;if(a!==null){for(var u=0;u<a.length;u++){var c=a[u];for(L=c;L!==null;){var d=L;switch(d.tag){case 0:case 11:case 15:no(8,d,s)}var h=d.child;if(h!==null)h.return=d,L=h;else for(;L!==null;){d=L;var m=d.sibling,p=d.return;if(Op(d),d===c){L=null;break}if(m!==null){m.return=p,L=m;break}L=p}}}var k=s.alternate;if(k!==null){var T=k.child;if(T!==null){k.child=null;do{var C=T.sibling;T.sibling=null,T=C}while(T!==null)}}L=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,L=o;else e:for(;L!==null;){if(s=L,s.flags&2048)switch(s.tag){case 0:case 11:case 15:no(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,L=y;break e}L=s.return}}var g=n.current;for(L=g;L!==null;){o=L;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,L=v;else e:for(o=g;L!==null;){if(a=L,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Kl(9,a)}}catch(P){ue(a,a.return,P)}if(a===o){L=null;break e}var A=a.sibling;if(A!==null){A.return=a.return,L=A;break e}L=a.return}}if(H=i,fi(),sn&&typeof sn.onPostCommitFiberRoot=="function")try{sn.onPostCommitFiberRoot(Fl,n)}catch{}r=!0}return r}finally{Q=t,Et.transition=e}}return!1}function bh(n,e,t){e=ys(t,e),e=Sp(n,e,1),n=Zr(n,e,1),e=Me(),n!==null&&(Mo(n,1,e),Qe(n,e))}function ue(n,e,t){if(n.tag===3)bh(n,n,t);else for(;e!==null;){if(e.tag===3){bh(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ei===null||!ei.has(r))){n=ys(t,n),n=kp(e,n,1),e=Zr(e,n,1),n=Me(),e!==null&&(Mo(e,1,n),Qe(e,n));break}}e=e.return}}function w0(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=Me(),n.pingedLanes|=n.suspendedLanes&t,Te===n&&(Ne&t)===t&&(we===4||we===3&&(Ne&130023424)===Ne&&500>ge()-ed?Ai(n,0):Zf|=t),Qe(n,e)}function Up(n,e){e===0&&(n.mode&1?(e=na,na<<=1,!(na&130023424)&&(na=4194304)):e=1);var t=Me();n=Rr(n,e),n!==null&&(Mo(n,e,t),Qe(n,t))}function S0(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),Up(n,t)}function k0(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,i=n.memoizedState;i!==null&&(t=i.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(x(314))}r!==null&&r.delete(e),Up(n,t)}var Vp;Vp=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||Ge.current)We=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return We=!1,l0(n,e,t);We=!!(n.flags&131072)}else We=!1,ie&&e.flags&1048576&&Kg(e,Xa,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Pa(n,e),n=e.pendingProps;var i=hs(e,be.current);as(e,t),i=Hf(null,e,r,n,i,t);var s=_f();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ye(r)?(s=!0,Ya(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Vf(e),i.updater=jl,e.stateNode=i,i._reactInternals=e,Tc(e,r,n,t),e=Ec(null,e,r,!0,s,t)):(e.tag=0,ie&&s&&bf(e),$e(null,e,i,t),e=e.child),e;case 16:r=e.elementType;e:{switch(Pa(n,e),n=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=I0(r),n=Lt(r,n),i){case 0:e=Ac(null,e,r,n,t);break e;case 1:e=Eh(null,e,r,n,t);break e;case 11:e=Ih(null,e,r,n,t);break e;case 14:e=Ah(null,e,r,Lt(r.type,n),t);break e}throw Error(x(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Lt(r,i),Ac(n,e,r,i,t);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Lt(r,i),Eh(n,e,r,i,t);case 3:e:{if(Ep(e),n===null)throw Error(x(387));r=e.pendingProps,s=e.memoizedState,i=s.element,Gg(n,e),tl(e,r,null,t);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=ys(Error(x(423)),e),e=xh(n,e,r,t,i);break e}else if(r!==i){i=ys(Error(x(424)),e),e=xh(n,e,r,t,i);break e}else for(tt=Xr(e.stateNode.containerInfo.firstChild),it=e,ie=!0,Ft=null,t=Zg(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(ms(),r===i){e=Lr(n,e,t);break e}$e(n,e,r,t)}e=e.child}return e;case 5:return ep(e),n===null&&wc(e),r=e.type,i=e.pendingProps,s=n!==null?n.memoizedProps:null,o=i.children,mc(r,i)?o=null:s!==null&&mc(r,s)&&(e.flags|=32),Ap(n,e),$e(n,e,o,t),e.child;case 6:return n===null&&wc(e),null;case 13:return xp(n,e,t);case 4:return jf(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=gs(e,null,r,t):$e(n,e,r,t),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Lt(r,i),Ih(n,e,r,i,t);case 7:return $e(n,e,e.pendingProps,t),e.child;case 8:return $e(n,e,e.pendingProps.children,t),e.child;case 12:return $e(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,ee(Za,r._currentValue),r._currentValue=o,s!==null)if(jt(s.value,o)){if(s.children===i.children&&!Ge.current){e=Lr(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=Nr(-1,t&-t),u.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?u.next=u:(u.next=d.next,d.next=u),c.pending=u}}s.lanes|=t,u=s.alternate,u!==null&&(u.lanes|=t),Sc(s.return,t,e),a.lanes|=t;break}u=u.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(x(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),Sc(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}$e(n,e,i.children,t),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,as(e,t),i=Nt(i),r=r(i),e.flags|=1,$e(n,e,r,t),e.child;case 14:return r=e.type,i=Lt(r,e.pendingProps),i=Lt(r.type,i),Ah(n,e,r,i,t);case 15:return Tp(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Lt(r,i),Pa(n,e),e.tag=1,Ye(r)?(n=!0,Ya(e)):n=!1,as(e,t),Qg(e,r,i),Tc(e,r,i,t),Ec(null,e,r,!0,n,t);case 19:return Np(n,e,t);case 22:return Ip(n,e,t)}throw Error(x(156,e.tag))};function jp(n,e){return gg(n,e)}function T0(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tt(n,e,t,r){return new T0(n,e,t,r)}function id(n){return n=n.prototype,!(!n||!n.isReactComponent)}function I0(n){if(typeof n=="function")return id(n)?1:0;if(n!=null){if(n=n.$$typeof,n===If)return 11;if(n===Af)return 14}return 2}function ni(n,e){var t=n.alternate;return t===null?(t=Tt(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function Ra(n,e,t,r,i,s){var o=2;if(r=n,typeof n=="function")id(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case qi:return Ei(t.children,i,s,e);case Tf:o=8,i|=8;break;case Wu:return n=Tt(12,t,e,i|2),n.elementType=Wu,n.lanes=s,n;case Hu:return n=Tt(13,t,e,i),n.elementType=Hu,n.lanes=s,n;case _u:return n=Tt(19,t,e,i),n.elementType=_u,n.lanes=s,n;case Xm:return Hl(t,i,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case Ym:o=10;break e;case Qm:o=9;break e;case If:o=11;break e;case Af:o=14;break e;case Vr:o=16,r=null;break e}throw Error(x(130,n==null?n:typeof n,""))}return e=Tt(o,t,e,i),e.elementType=n,e.type=r,e.lanes=s,e}function Ei(n,e,t,r){return n=Tt(7,n,r,e),n.lanes=t,n}function Hl(n,e,t,r){return n=Tt(22,n,r,e),n.elementType=Xm,n.lanes=t,n.stateNode={isHidden:!1},n}function Bu(n,e,t){return n=Tt(6,n,null,e),n.lanes=t,n}function bu(n,e,t){return e=Tt(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function A0(n,e,t,r,i){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gu(0),this.expirationTimes=gu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gu(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function sd(n,e,t,r,i,s,o,a,u){return n=new A0(n,e,t,a,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Tt(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},Vf(s),n}function E0(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ji,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function qp(n){if(!n)return ai;n=n._reactInternals;e:{if(Fi(n)!==n||n.tag!==1)throw Error(x(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ye(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(x(171))}if(n.tag===1){var t=n.type;if(Ye(t))return jg(n,t,e)}return e}function Kp(n,e,t,r,i,s,o,a,u){return n=sd(t,r,!0,n,i,s,o,a,u),n.context=qp(null),t=n.current,r=Me(),i=ti(t),s=Nr(r,i),s.callback=e??null,Zr(t,s,i),n.current.lanes=i,Mo(n,i,r),Qe(n,r),n}function _l(n,e,t,r){var i=e.current,s=Me(),o=ti(i);return t=qp(t),e.context===null?e.context=t:e.pendingContext=t,e=Nr(s,o),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=Zr(i,e,o),n!==null&&(Ut(n,i,o,s),xa(n,i,o)),o}function ul(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function zh(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function od(n,e){zh(n,e),(n=n.alternate)&&zh(n,e)}function x0(){return null}var Wp=typeof reportError=="function"?reportError:function(n){console.error(n)};function ad(n){this._internalRoot=n}Gl.prototype.render=ad.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(x(409));_l(n,e,null,null)};Gl.prototype.unmount=ad.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Oi(function(){_l(null,n,null,null)}),e[Or]=null}};function Gl(n){this._internalRoot=n}Gl.prototype.unstable_scheduleHydration=function(n){if(n){var e=Tg();n={blockedOn:null,target:n,priority:e};for(var t=0;t<qr.length&&e!==0&&e<qr[t].priority;t++);qr.splice(t,0,n),t===0&&Ag(n)}};function ld(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Yl(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Fh(){}function N0(n,e,t,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=ul(o);s.call(c)}}var o=Kp(e,r,n,0,null,!1,!1,"",Fh);return n._reactRootContainer=o,n[Or]=o.current,So(n.nodeType===8?n.parentNode:n),Oi(),o}for(;i=n.lastChild;)n.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=ul(u);a.call(c)}}var u=sd(n,0,!1,null,null,!1,!1,"",Fh);return n._reactRootContainer=u,n[Or]=u.current,So(n.nodeType===8?n.parentNode:n),Oi(function(){_l(e,u,t,r)}),u}function Ql(n,e,t,r,i){var s=t._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var u=ul(o);a.call(u)}}_l(e,o,n,i)}else o=N0(t,e,n,i,r);return ul(o)}Sg=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=Hs(e.pendingLanes);t!==0&&(Nf(e,t|1),Qe(e,ge()),!(H&6)&&(vs=ge()+500,fi()))}break;case 13:Oi(function(){var r=Rr(n,1);if(r!==null){var i=Me();Ut(r,n,1,i)}}),od(n,1)}};Cf=function(n){if(n.tag===13){var e=Rr(n,134217728);if(e!==null){var t=Me();Ut(e,n,134217728,t)}od(n,134217728)}};kg=function(n){if(n.tag===13){var e=ti(n),t=Rr(n,e);if(t!==null){var r=Me();Ut(t,n,e,r)}od(n,e)}};Tg=function(){return Q};Ig=function(n,e){var t=Q;try{return Q=n,e()}finally{Q=t}};ic=function(n,e,t){switch(e){case"input":if(Qu(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var i=Ul(r);if(!i)throw Error(x(90));eg(r),Qu(r,i)}}}break;case"textarea":ng(n,t);break;case"select":e=t.value,e!=null&&rs(n,!!t.multiple,e,!1)}};ug=td;cg=Oi;var C0={usingClientEntryPoint:!1,Events:[Vo,_i,Ul,ag,lg,td]},Us={findFiberByHostInstance:Si,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},P0={bundleType:Us.bundleType,version:Us.version,rendererPackageName:Us.rendererPackageName,rendererConfig:Us.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:zr.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=hg(n),n===null?null:n.stateNode},findFiberByHostInstance:Us.findFiberByHostInstance||x0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ha=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ha.isDisabled&&ha.supportsFiber)try{Fl=ha.inject(P0),sn=ha}catch{}}lt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=C0;lt.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ld(e))throw Error(x(200));return E0(n,e,null,t)};lt.createRoot=function(n,e){if(!ld(n))throw Error(x(299));var t=!1,r="",i=Wp;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=sd(n,1,!1,null,null,t,!1,r,i),n[Or]=e.current,So(n.nodeType===8?n.parentNode:n),new ad(e)};lt.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(x(188)):(n=Object.keys(n).join(","),Error(x(268,n)));return n=hg(e),n=n===null?null:n.stateNode,n};lt.flushSync=function(n){return Oi(n)};lt.hydrate=function(n,e,t){if(!Yl(e))throw Error(x(200));return Ql(null,n,e,!0,t)};lt.hydrateRoot=function(n,e,t){if(!ld(n))throw Error(x(405));var r=t!=null&&t.hydratedSources||null,i=!1,s="",o=Wp;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=Kp(e,null,n,1,t??null,i,!1,s,o),n[Or]=e.current,So(n),r)for(n=0;n<r.length;n++)t=r[n],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new Gl(e)};lt.render=function(n,e,t){if(!Yl(e))throw Error(x(200));return Ql(null,n,e,!1,t)};lt.unmountComponentAtNode=function(n){if(!Yl(n))throw Error(x(40));return n._reactRootContainer?(Oi(function(){Ql(null,null,n,!1,function(){n._reactRootContainer=null,n[Or]=null})}),!0):!1};lt.unstable_batchedUpdates=td;lt.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!Yl(t))throw Error(x(200));if(n==null||n._reactInternals===void 0)throw Error(x(38));return Ql(n,e,t,!1,r)};lt.version="18.2.0-next-9e3b772b8-20220608";function Hp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Hp)}catch(n){console.error(n)}}Hp(),Km.exports=lt;var D0=Km.exports,$h=D0;qu.createRoot=$h.createRoot,qu.hydrateRoot=$h.hydrateRoot;var q;(function(n){n[n.Canceled=1]="Canceled",n[n.Unknown=2]="Unknown",n[n.InvalidArgument=3]="InvalidArgument",n[n.DeadlineExceeded=4]="DeadlineExceeded",n[n.NotFound=5]="NotFound",n[n.AlreadyExists=6]="AlreadyExists",n[n.PermissionDenied=7]="PermissionDenied",n[n.ResourceExhausted=8]="ResourceExhausted",n[n.FailedPrecondition=9]="FailedPrecondition",n[n.Aborted=10]="Aborted",n[n.OutOfRange=11]="OutOfRange",n[n.Unimplemented=12]="Unimplemented",n[n.Internal=13]="Internal",n[n.Unavailable=14]="Unavailable",n[n.DataLoss=15]="DataLoss",n[n.Unauthenticated=16]="Unauthenticated"})(q||(q={}));function Jh(n){const e=q[n];return typeof e!="string"?n.toString():e[0].toLowerCase()+e.substring(1).replace(/[A-Z]/g,t=>"_"+t.toLowerCase())}class Y extends Error{constructor(e,t=q.Unknown,r,i,s){super(O0(e,t)),this.name="ConnectError",Object.setPrototypeOf(this,new.target.prototype),this.rawMessage=e,this.code=t,this.metadata=new Headers(r??{}),this.details=i??[],this.cause=s}static from(e,t=q.Unknown){return e instanceof Y?e:e instanceof Error?e.name=="AbortError"?new Y(e.message,q.Canceled):new Y(e.message,t,void 0,void 0,e):new Y(String(e),t,void 0,void 0,e)}static[Symbol.hasInstance](e){return e instanceof Error?Object.getPrototypeOf(e)===Y.prototype?!0:e.name==="ConnectError"&&"code"in e&&typeof e.code=="number"&&"metadata"in e&&"details"in e&&Array.isArray(e.details)&&"rawMessage"in e&&typeof e.rawMessage=="string"&&"cause"in e:!1}findDetails(e){const t="typeName"in e?{findMessage:i=>i===e.typeName?e:void 0}:e,r=[];for(const i of this.details){if("getType"in i){t.findMessage(i.getType().typeName)&&r.push(i);continue}const s=t.findMessage(i.type);if(s)try{r.push(s.fromBinary(i.value))}catch{}}return r}}function O0(n,e){return n.length?`[${Jh(e)}] ${n}`:`[${Jh(e)}]`}function fe(n,e){if(!n)throw new Error(e)}const R0=34028234663852886e22,L0=-34028234663852886e22,B0=4294967295,b0=2147483647,z0=-2147483648;function La(n){if(typeof n!="number")throw new Error("invalid int 32: "+typeof n);if(!Number.isInteger(n)||n>b0||n<z0)throw new Error("invalid int 32: "+n)}function Fc(n){if(typeof n!="number")throw new Error("invalid uint 32: "+typeof n);if(!Number.isInteger(n)||n>B0||n<0)throw new Error("invalid uint 32: "+n)}function _p(n){if(typeof n!="number")throw new Error("invalid float 32: "+typeof n);if(Number.isFinite(n)&&(n>R0||n<L0))throw new Error("invalid float 32: "+n)}const Gp=Symbol("@bufbuild/protobuf/enum-type");function F0(n){const e=n[Gp];return fe(e,"missing enum type on enum object"),e}function Yp(n,e,t,r){n[Gp]=Qp(e,t.map(i=>({no:i.no,name:i.name,localName:n[i.no]})))}function Qp(n,e,t){const r=Object.create(null),i=Object.create(null),s=[];for(const o of e){const a=Xp(o);s.push(a),r[o.name]=a,i[o.no]=a}return{typeName:n,values:s,findName(o){return r[o]},findNumber(o){return i[o]}}}function $0(n,e,t){const r={};for(const i of e){const s=Xp(i);r[s.localName]=s.no,r[s.no]=s.localName}return Yp(r,n,e),r}function Xp(n){return"localName"in n?n:Object.assign(Object.assign({},n),{localName:n.name})}class D{equals(e){return this.getType().runtime.util.equals(this.getType(),this,e)}clone(){return this.getType().runtime.util.clone(this)}fromBinary(e,t){const r=this.getType(),i=r.runtime.bin,s=i.makeReadOptions(t);return i.readMessage(this,s.readerFactory(e),e.byteLength,s),this}fromJson(e,t){const r=this.getType(),i=r.runtime.json,s=i.makeReadOptions(t);return i.readMessage(r,e,s,this),this}fromJsonString(e,t){let r;try{r=JSON.parse(e)}catch(i){throw new Error(`cannot decode ${this.getType().typeName} from JSON: ${i instanceof Error?i.message:String(i)}`)}return this.fromJson(r,t)}toBinary(e){const t=this.getType(),r=t.runtime.bin,i=r.makeWriteOptions(e),s=i.writerFactory();return r.writeMessage(this,s,i),s.finish()}toJson(e){const t=this.getType(),r=t.runtime.json,i=r.makeWriteOptions(e);return r.writeMessage(this,i)}toJsonString(e){var t;const r=this.toJson(e);return JSON.stringify(r,null,(t=e==null?void 0:e.prettySpaces)!==null&&t!==void 0?t:0)}toJSON(){return this.toJson({emitDefaultValues:!0})}getType(){return Object.getPrototypeOf(this).constructor}}function J0(n,e,t,r){var i;const s=(i=r==null?void 0:r.localName)!==null&&i!==void 0?i:e.substring(e.lastIndexOf(".")+1),o={[s]:function(a){n.util.initFields(this),n.util.initPartial(a,this)}}[s];return Object.setPrototypeOf(o.prototype,new D),Object.assign(o,{runtime:n,typeName:e,fields:n.util.newFieldList(t),fromBinary(a,u){return new o().fromBinary(a,u)},fromJson(a,u){return new o().fromJson(a,u)},fromJsonString(a,u){return new o().fromJsonString(a,u)},equals(a,u){return n.util.equals(o,a,u)}}),o}function M0(){let n=0,e=0;for(let r=0;r<28;r+=7){let i=this.buf[this.pos++];if(n|=(i&127)<<r,!(i&128))return this.assertBounds(),[n,e]}let t=this.buf[this.pos++];if(n|=(t&15)<<28,e=(t&112)>>4,!(t&128))return this.assertBounds(),[n,e];for(let r=3;r<=31;r+=7){let i=this.buf[this.pos++];if(e|=(i&127)<<r,!(i&128))return this.assertBounds(),[n,e]}throw new Error("invalid varint")}function zu(n,e,t){for(let s=0;s<28;s=s+7){const o=n>>>s,a=!(!(o>>>7)&&e==0),u=(a?o|128:o)&255;if(t.push(u),!a)return}const r=n>>>28&15|(e&7)<<4,i=!!(e>>3);if(t.push((i?r|128:r)&255),!!i){for(let s=3;s<31;s=s+7){const o=e>>>s,a=!!(o>>>7),u=(a?o|128:o)&255;if(t.push(u),!a)return}t.push(e>>>31&1)}}const Ba=4294967296;function Mh(n){const e=n[0]==="-";e&&(n=n.slice(1));const t=1e6;let r=0,i=0;function s(o,a){const u=Number(n.slice(o,a));i*=t,r=r*t+u,r>=Ba&&(i=i+(r/Ba|0),r=r%Ba)}return s(-24,-18),s(-18,-12),s(-12,-6),s(-6),e?ey(r,i):ud(r,i)}function U0(n,e){let t=ud(n,e);const r=t.hi&2147483648;r&&(t=ey(t.lo,t.hi));const i=Zp(t.lo,t.hi);return r?"-"+i:i}function Zp(n,e){if({lo:n,hi:e}=V0(n,e),e<=2097151)return String(Ba*e+n);const t=n&16777215,r=(n>>>24|e<<8)&16777215,i=e>>16&65535;let s=t+r*6777216+i*6710656,o=r+i*8147497,a=i*2;const u=1e7;return s>=u&&(o+=Math.floor(s/u),s%=u),o>=u&&(a+=Math.floor(o/u),o%=u),a.toString()+Uh(o)+Uh(s)}function V0(n,e){return{lo:n>>>0,hi:e>>>0}}function ud(n,e){return{lo:n|0,hi:e|0}}function ey(n,e){return e=~e,n?n=~n+1:e+=1,ud(n,e)}const Uh=n=>{const e=String(n);return"0000000".slice(e.length)+e};function Vh(n,e){if(n>=0){for(;n>127;)e.push(n&127|128),n=n>>>7;e.push(n)}else{for(let t=0;t<9;t++)e.push(n&127|128),n=n>>7;e.push(1)}}function j0(){let n=this.buf[this.pos++],e=n&127;if(!(n&128))return this.assertBounds(),e;if(n=this.buf[this.pos++],e|=(n&127)<<7,!(n&128))return this.assertBounds(),e;if(n=this.buf[this.pos++],e|=(n&127)<<14,!(n&128))return this.assertBounds(),e;if(n=this.buf[this.pos++],e|=(n&127)<<21,!(n&128))return this.assertBounds(),e;n=this.buf[this.pos++],e|=(n&15)<<28;for(let t=5;n&128&&t<10;t++)n=this.buf[this.pos++];if(n&128)throw new Error("invalid varint");return this.assertBounds(),e>>>0}var jh={};function q0(){const n=new DataView(new ArrayBuffer(8));if(typeof BigInt=="function"&&typeof n.getBigInt64=="function"&&typeof n.getBigUint64=="function"&&typeof n.setBigInt64=="function"&&typeof n.setBigUint64=="function"&&(typeof process!="object"||typeof jh!="object"||jh.BUF_BIGINT_DISABLE!=="1")){const i=BigInt("-9223372036854775808"),s=BigInt("9223372036854775807"),o=BigInt("0"),a=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(u){const c=typeof u=="bigint"?u:BigInt(u);if(c>s||c<i)throw new Error(`int64 invalid: ${u}`);return c},uParse(u){const c=typeof u=="bigint"?u:BigInt(u);if(c>a||c<o)throw new Error(`uint64 invalid: ${u}`);return c},enc(u){return n.setBigInt64(0,this.parse(u),!0),{lo:n.getInt32(0,!0),hi:n.getInt32(4,!0)}},uEnc(u){return n.setBigInt64(0,this.uParse(u),!0),{lo:n.getInt32(0,!0),hi:n.getInt32(4,!0)}},dec(u,c){return n.setInt32(0,u,!0),n.setInt32(4,c,!0),n.getBigInt64(0,!0)},uDec(u,c){return n.setInt32(0,u,!0),n.setInt32(4,c,!0),n.getBigUint64(0,!0)}}}const t=i=>fe(/^-?[0-9]+$/.test(i),`int64 invalid: ${i}`),r=i=>fe(/^[0-9]+$/.test(i),`uint64 invalid: ${i}`);return{zero:"0",supported:!1,parse(i){return typeof i!="string"&&(i=i.toString()),t(i),i},uParse(i){return typeof i!="string"&&(i=i.toString()),r(i),i},enc(i){return typeof i!="string"&&(i=i.toString()),t(i),Mh(i)},uEnc(i){return typeof i!="string"&&(i=i.toString()),r(i),Mh(i)},dec(i,s){return U0(i,s)},uDec(i,s){return Zp(i,s)}}}const ne=q0();var I;(function(n){n[n.DOUBLE=1]="DOUBLE",n[n.FLOAT=2]="FLOAT",n[n.INT64=3]="INT64",n[n.UINT64=4]="UINT64",n[n.INT32=5]="INT32",n[n.FIXED64=6]="FIXED64",n[n.FIXED32=7]="FIXED32",n[n.BOOL=8]="BOOL",n[n.STRING=9]="STRING",n[n.BYTES=12]="BYTES",n[n.UINT32=13]="UINT32",n[n.SFIXED32=15]="SFIXED32",n[n.SFIXED64=16]="SFIXED64",n[n.SINT32=17]="SINT32",n[n.SINT64=18]="SINT64"})(I||(I={}));var li;(function(n){n[n.BIGINT=0]="BIGINT",n[n.STRING=1]="STRING"})(li||(li={}));function Jr(n,e,t){if(e===t)return!0;if(n==I.BYTES){if(!(e instanceof Uint8Array)||!(t instanceof Uint8Array)||e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}switch(n){case I.UINT64:case I.FIXED64:case I.INT64:case I.SFIXED64:case I.SINT64:return e==t}return!1}function ws(n,e){switch(n){case I.BOOL:return!1;case I.UINT64:case I.FIXED64:case I.INT64:case I.SFIXED64:case I.SINT64:return e==0?ne.zero:"0";case I.DOUBLE:case I.FLOAT:return 0;case I.BYTES:return new Uint8Array(0);case I.STRING:return"";default:return 0}}function ty(n,e){switch(n){case I.BOOL:return e===!1;case I.STRING:return e==="";case I.BYTES:return e instanceof Uint8Array&&!e.byteLength;default:return e==0}}var pe;(function(n){n[n.Varint=0]="Varint",n[n.Bit64=1]="Bit64",n[n.LengthDelimited=2]="LengthDelimited",n[n.StartGroup=3]="StartGroup",n[n.EndGroup=4]="EndGroup",n[n.Bit32=5]="Bit32"})(pe||(pe={}));class K0{constructor(e){this.stack=[],this.textEncoder=e??new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let e=0;for(let i=0;i<this.chunks.length;i++)e+=this.chunks[i].length;let t=new Uint8Array(e),r=0;for(let i=0;i<this.chunks.length;i++)t.set(this.chunks[i],r),r+=this.chunks[i].length;return this.chunks=[],t}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),t=this.stack.pop();if(!t)throw new Error("invalid state, fork stack empty");return this.chunks=t.chunks,this.buf=t.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,t){return this.uint32((e<<3|t)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(Fc(e);e>127;)this.buf.push(e&127|128),e=e>>>7;return this.buf.push(e),this}int32(e){return La(e),Vh(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let t=this.textEncoder.encode(e);return this.uint32(t.byteLength),this.raw(t)}float(e){_p(e);let t=new Uint8Array(4);return new DataView(t.buffer).setFloat32(0,e,!0),this.raw(t)}double(e){let t=new Uint8Array(8);return new DataView(t.buffer).setFloat64(0,e,!0),this.raw(t)}fixed32(e){Fc(e);let t=new Uint8Array(4);return new DataView(t.buffer).setUint32(0,e,!0),this.raw(t)}sfixed32(e){La(e);let t=new Uint8Array(4);return new DataView(t.buffer).setInt32(0,e,!0),this.raw(t)}sint32(e){return La(e),e=(e<<1^e>>31)>>>0,Vh(e,this.buf),this}sfixed64(e){let t=new Uint8Array(8),r=new DataView(t.buffer),i=ne.enc(e);return r.setInt32(0,i.lo,!0),r.setInt32(4,i.hi,!0),this.raw(t)}fixed64(e){let t=new Uint8Array(8),r=new DataView(t.buffer),i=ne.uEnc(e);return r.setInt32(0,i.lo,!0),r.setInt32(4,i.hi,!0),this.raw(t)}int64(e){let t=ne.enc(e);return zu(t.lo,t.hi,this.buf),this}sint64(e){let t=ne.enc(e),r=t.hi>>31,i=t.lo<<1^r,s=(t.hi<<1|t.lo>>>31)^r;return zu(i,s,this.buf),this}uint64(e){let t=ne.uEnc(e);return zu(t.lo,t.hi,this.buf),this}}class W0{constructor(e,t){this.varint64=M0,this.uint32=j0,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength),this.textDecoder=t??new TextDecoder}tag(){let e=this.uint32(),t=e>>>3,r=e&7;if(t<=0||r<0||r>5)throw new Error("illegal tag: field no "+t+" wire type "+r);return[t,r]}skip(e,t){let r=this.pos;switch(e){case pe.Varint:for(;this.buf[this.pos++]&128;);break;case pe.Bit64:this.pos+=4;case pe.Bit32:this.pos+=4;break;case pe.LengthDelimited:let i=this.uint32();this.pos+=i;break;case pe.StartGroup:for(;;){const[s,o]=this.tag();if(o===pe.EndGroup){if(t!==void 0&&s!==t)throw new Error("invalid end group tag");break}this.skip(o,s)}break;default:throw new Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(r,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let e=this.uint32();return e>>>1^-(e&1)}int64(){return ne.dec(...this.varint64())}uint64(){return ne.uDec(...this.varint64())}sint64(){let[e,t]=this.varint64(),r=-(e&1);return e=(e>>>1|(t&1)<<31)^r,t=t>>>1^r,ne.dec(e,t)}bool(){let[e,t]=this.varint64();return e!==0||t!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return ne.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return ne.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),t=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(t,t+e)}string(){return this.textDecoder.decode(this.bytes())}}function H0(n,e,t,r){let i;return{typeName:e,extendee:t,get field(){if(!i){const s=typeof r=="function"?r():r;s.name=e.split(".").pop(),s.jsonName=`[${e}]`,i=n.util.newFieldList([s]).list()[0]}return i},runtime:n}}function ny(n){const e=n.field.localName,t=Object.create(null);return t[e]=_0(n),[t,()=>t[e]]}function _0(n){const e=n.field;if(e.repeated)return[];if(e.default!==void 0)return e.default;switch(e.kind){case"enum":return e.T.values[0].no;case"scalar":return ws(e.T,e.L);case"message":const t=e.T,r=new t;return t.fieldWrapper?t.fieldWrapper.unwrapField(r):r;case"map":throw"map fields are not allowed to be extensions"}}function G0(n,e){if(!e.repeated&&(e.kind=="enum"||e.kind=="scalar")){for(let t=n.length-1;t>=0;--t)if(n[t].no==e.no)return[n[t]];return[]}return n.filter(t=>t.no===e.no)}let wr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),Xl=[];for(let n=0;n<wr.length;n++)Xl[wr[n].charCodeAt(0)]=n;Xl[45]=wr.indexOf("+");Xl[95]=wr.indexOf("/");const cd={dec(n){let e=n.length*3/4;n[n.length-2]=="="?e-=2:n[n.length-1]=="="&&(e-=1);let t=new Uint8Array(e),r=0,i=0,s,o=0;for(let a=0;a<n.length;a++){if(s=Xl[n.charCodeAt(a)],s===void 0)switch(n[a]){case"=":i=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(i){case 0:o=s,i=1;break;case 1:t[r++]=o<<2|(s&48)>>4,o=s,i=2;break;case 2:t[r++]=(o&15)<<4|(s&60)>>2,o=s,i=3;break;case 3:t[r++]=(o&3)<<6|s,i=0;break}}if(i==1)throw Error("invalid base64 string.");return t.subarray(0,r)},enc(n){let e="",t=0,r,i=0;for(let s=0;s<n.length;s++)switch(r=n[s],t){case 0:e+=wr[r>>2],i=(r&3)<<4,t=1;break;case 1:e+=wr[i|r>>4],i=(r&15)<<2,t=2;break;case 2:e+=wr[i|r>>6],e+=wr[r&63],t=0;break}return t&&(e+=wr[i],e+="=",t==1&&(e+="=")),e}};function Y0(n,e,t){iy(e,n);const r=e.runtime.bin.makeReadOptions(t),i=G0(n.getType().runtime.bin.listUnknownFields(n),e.field),[s,o]=ny(e);for(const a of i)e.runtime.bin.readField(s,r.readerFactory(a.data),e.field,a.wireType,r);return o()}function Q0(n,e,t,r){iy(e,n);const i=e.runtime.bin.makeReadOptions(r),s=e.runtime.bin.makeWriteOptions(r);if(ry(n,e)){const c=n.getType().runtime.bin.listUnknownFields(n).filter(d=>d.no!=e.field.no);n.getType().runtime.bin.discardUnknownFields(n);for(const d of c)n.getType().runtime.bin.onUnknownField(n,d.no,d.wireType,d.data)}const o=s.writerFactory();let a=e.field;!a.opt&&!a.repeated&&(a.kind=="enum"||a.kind=="scalar")&&(a=Object.assign(Object.assign({},e.field),{opt:!0})),e.runtime.bin.writeField(a,t,o,s);const u=i.readerFactory(o.finish());for(;u.pos<u.len;){const[c,d]=u.tag(),h=u.skip(d,c);n.getType().runtime.bin.onUnknownField(n,c,d,h)}}function ry(n,e){const t=n.getType();return e.extendee.typeName===t.typeName&&!!t.runtime.bin.listUnknownFields(n).find(r=>r.no==e.field.no)}function iy(n,e){fe(n.extendee.typeName==e.getType().typeName,`extension ${n.typeName} can only be applied to message ${n.extendee.typeName}`)}function sy(n,e){const t=n.localName;if(n.repeated)return e[t].length>0;if(n.oneof)return e[n.oneof.localName].case===t;switch(n.kind){case"enum":case"scalar":return n.opt||n.req?e[t]!==void 0:n.kind=="enum"?e[t]!==n.T.values[0].no:!ty(n.T,e[t]);case"message":return e[t]!==void 0;case"map":return Object.keys(e[t]).length>0}}function qh(n,e){const t=n.localName,r=!n.opt&&!n.req;if(n.repeated)e[t]=[];else if(n.oneof)e[n.oneof.localName]={case:void 0};else switch(n.kind){case"map":e[t]={};break;case"enum":e[t]=r?n.T.values[0].no:void 0;break;case"scalar":e[t]=r?ws(n.T,n.L):void 0;break;case"message":e[t]=void 0;break}}function Sr(n,e){if(n===null||typeof n!="object"||!Object.getOwnPropertyNames(D.prototype).every(r=>r in n&&typeof n[r]=="function"))return!1;const t=n.getType();return t===null||typeof t!="function"||!("typeName"in t)||typeof t.typeName!="string"?!1:e===void 0?!0:t.typeName==e.typeName}function oy(n,e){return Sr(e)||!n.fieldWrapper?e:n.fieldWrapper.wrapField(e)}I.DOUBLE,I.FLOAT,I.INT64,I.UINT64,I.INT32,I.UINT32,I.BOOL,I.STRING,I.BYTES;const Kh={ignoreUnknownFields:!1},Wh={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0};function X0(n){return n?Object.assign(Object.assign({},Kh),n):Kh}function Z0(n){return n?Object.assign(Object.assign({},Wh),n):Wh}const cl=Symbol(),ba=Symbol();function eS(){return{makeReadOptions:X0,makeWriteOptions:Z0,readMessage(n,e,t,r){if(e==null||Array.isArray(e)||typeof e!="object")throw new Error(`cannot decode message ${n.typeName} from JSON: ${Ht(e)}`);r=r??new n;const i=new Map,s=t.typeRegistry;for(const[o,a]of Object.entries(e)){const u=n.fields.findJsonName(o);if(u){if(u.oneof){if(a===null&&u.kind=="scalar")continue;const c=i.get(u.oneof);if(c!==void 0)throw new Error(`cannot decode message ${n.typeName} from JSON: multiple keys for oneof "${u.oneof.name}" present: "${c}", "${o}"`);i.set(u.oneof,o)}Hh(r,a,u,t,n)}else{let c=!1;if(s!=null&&s.findExtension&&o.startsWith("[")&&o.endsWith("]")){const d=s.findExtension(o.substring(1,o.length-1));if(d&&d.extendee.typeName==n.typeName){c=!0;const[h,m]=ny(d);Hh(h,a,d.field,t,d),Q0(r,d,m(),t)}}if(!c&&!t.ignoreUnknownFields)throw new Error(`cannot decode message ${n.typeName} from JSON: key "${o}" is unknown`)}}return r},writeMessage(n,e){const t=n.getType(),r={};let i;try{for(i of t.fields.byNumber()){if(!sy(i,n)){if(i.req)throw"required field not set";if(!e.emitDefaultValues||!nS(i))continue}const o=i.oneof?n[i.oneof.localName].value:n[i.localName],a=_h(i,o,e);a!==void 0&&(r[e.useProtoFieldName?i.name:i.jsonName]=a)}const s=e.typeRegistry;if(s!=null&&s.findExtensionFor)for(const o of t.runtime.bin.listUnknownFields(n)){const a=s.findExtensionFor(t.typeName,o.no);if(a&&ry(n,a)){const u=Y0(n,a,e),c=_h(a.field,u,e);c!==void 0&&(r[a.field.jsonName]=c)}}}catch(s){const o=i?`cannot encode field ${t.typeName}.${i.name} to JSON`:`cannot encode message ${t.typeName} to JSON`,a=s instanceof Error?s.message:String(s);throw new Error(o+(a.length>0?`: ${a}`:""))}return r},readScalar(n,e,t){return so(n,e,t??li.BIGINT,!0)},writeScalar(n,e,t){if(e!==void 0&&(t||ty(n,e)))return za(n,e)},debug:Ht}}function Ht(n){if(n===null)return"null";switch(typeof n){case"object":return Array.isArray(n)?"array":"object";case"string":return n.length>100?"string":`"${n.split('"').join('\\"')}"`;default:return String(n)}}function Hh(n,e,t,r,i){let s=t.localName;if(t.repeated){if(fe(t.kind!="map"),e===null)return;if(!Array.isArray(e))throw new Error(`cannot decode field ${i.typeName}.${t.name} from JSON: ${Ht(e)}`);const o=n[s];for(const a of e){if(a===null)throw new Error(`cannot decode field ${i.typeName}.${t.name} from JSON: ${Ht(a)}`);switch(t.kind){case"message":o.push(t.T.fromJson(a,r));break;case"enum":const u=Fu(t.T,a,r.ignoreUnknownFields,!0);u!==ba&&o.push(u);break;case"scalar":try{o.push(so(t.T,a,t.L,!0))}catch(c){let d=`cannot decode field ${i.typeName}.${t.name} from JSON: ${Ht(a)}`;throw c instanceof Error&&c.message.length>0&&(d+=`: ${c.message}`),new Error(d)}break}}}else if(t.kind=="map"){if(e===null)return;if(typeof e!="object"||Array.isArray(e))throw new Error(`cannot decode field ${i.typeName}.${t.name} from JSON: ${Ht(e)}`);const o=n[s];for(const[a,u]of Object.entries(e)){if(u===null)throw new Error(`cannot decode field ${i.typeName}.${t.name} from JSON: map value null`);let c;try{c=tS(t.K,a)}catch(d){let h=`cannot decode map key for field ${i.typeName}.${t.name} from JSON: ${Ht(e)}`;throw d instanceof Error&&d.message.length>0&&(h+=`: ${d.message}`),new Error(h)}switch(t.V.kind){case"message":o[c]=t.V.T.fromJson(u,r);break;case"enum":const d=Fu(t.V.T,u,r.ignoreUnknownFields,!0);d!==ba&&(o[c]=d);break;case"scalar":try{o[c]=so(t.V.T,u,li.BIGINT,!0)}catch(h){let m=`cannot decode map value for field ${i.typeName}.${t.name} from JSON: ${Ht(e)}`;throw h instanceof Error&&h.message.length>0&&(m+=`: ${h.message}`),new Error(m)}break}}}else switch(t.oneof&&(n=n[t.oneof.localName]={case:s},s="value"),t.kind){case"message":const o=t.T;if(e===null&&o.typeName!="google.protobuf.Value")return;let a=n[s];Sr(a)?a.fromJson(e,r):(n[s]=a=o.fromJson(e,r),o.fieldWrapper&&!t.oneof&&(n[s]=o.fieldWrapper.unwrapField(a)));break;case"enum":const u=Fu(t.T,e,r.ignoreUnknownFields,!1);switch(u){case cl:qh(t,n);break;case ba:break;default:n[s]=u;break}break;case"scalar":try{const c=so(t.T,e,t.L,!1);switch(c){case cl:qh(t,n);break;default:n[s]=c;break}}catch(c){let d=`cannot decode field ${i.typeName}.${t.name} from JSON: ${Ht(e)}`;throw c instanceof Error&&c.message.length>0&&(d+=`: ${c.message}`),new Error(d)}break}}function tS(n,e){if(n===I.BOOL)switch(e){case"true":e=!0;break;case"false":e=!1;break}return so(n,e,li.BIGINT,!0).toString()}function so(n,e,t,r){if(e===null)return r?ws(n,t):cl;switch(n){case I.DOUBLE:case I.FLOAT:if(e==="NaN")return Number.NaN;if(e==="Infinity")return Number.POSITIVE_INFINITY;if(e==="-Infinity")return Number.NEGATIVE_INFINITY;if(e===""||typeof e=="string"&&e.trim().length!==e.length||typeof e!="string"&&typeof e!="number")break;const i=Number(e);if(Number.isNaN(i)||!Number.isFinite(i))break;return n==I.FLOAT&&_p(i),i;case I.INT32:case I.FIXED32:case I.SFIXED32:case I.SINT32:case I.UINT32:let s;if(typeof e=="number"?s=e:typeof e=="string"&&e.length>0&&e.trim().length===e.length&&(s=Number(e)),s===void 0)break;return n==I.UINT32||n==I.FIXED32?Fc(s):La(s),s;case I.INT64:case I.SFIXED64:case I.SINT64:if(typeof e!="number"&&typeof e!="string")break;const o=ne.parse(e);return t?o.toString():o;case I.FIXED64:case I.UINT64:if(typeof e!="number"&&typeof e!="string")break;const a=ne.uParse(e);return t?a.toString():a;case I.BOOL:if(typeof e!="boolean")break;return e;case I.STRING:if(typeof e!="string")break;try{encodeURIComponent(e)}catch{throw new Error("invalid UTF8")}return e;case I.BYTES:if(e==="")return new Uint8Array(0);if(typeof e!="string")break;return cd.dec(e)}throw new Error}function Fu(n,e,t,r){if(e===null)return n.typeName=="google.protobuf.NullValue"?0:r?n.values[0].no:cl;switch(typeof e){case"number":if(Number.isInteger(e))return e;break;case"string":const i=n.findName(e);if(i!==void 0)return i.no;if(t)return ba;break}throw new Error(`cannot decode enum ${n.typeName} from JSON: ${Ht(e)}`)}function nS(n){return n.repeated||n.kind=="map"?!0:!(n.oneof||n.kind=="message"||n.opt||n.req)}function _h(n,e,t){if(n.kind=="map"){fe(typeof e=="object"&&e!=null);const r={},i=Object.entries(e);switch(n.V.kind){case"scalar":for(const[o,a]of i)r[o.toString()]=za(n.V.T,a);break;case"message":for(const[o,a]of i)r[o.toString()]=a.toJson(t);break;case"enum":const s=n.V.T;for(const[o,a]of i)r[o.toString()]=$u(s,a,t.enumAsInteger);break}return t.emitDefaultValues||i.length>0?r:void 0}if(n.repeated){fe(Array.isArray(e));const r=[];switch(n.kind){case"scalar":for(let i=0;i<e.length;i++)r.push(za(n.T,e[i]));break;case"enum":for(let i=0;i<e.length;i++)r.push($u(n.T,e[i],t.enumAsInteger));break;case"message":for(let i=0;i<e.length;i++)r.push(e[i].toJson(t));break}return t.emitDefaultValues||r.length>0?r:void 0}switch(n.kind){case"scalar":return za(n.T,e);case"enum":return $u(n.T,e,t.enumAsInteger);case"message":return oy(n.T,e).toJson(t)}}function $u(n,e,t){var r;if(fe(typeof e=="number"),n.typeName=="google.protobuf.NullValue")return null;if(t)return e;const i=n.findNumber(e);return(r=i==null?void 0:i.name)!==null&&r!==void 0?r:e}function za(n,e){switch(n){case I.INT32:case I.SFIXED32:case I.SINT32:case I.FIXED32:case I.UINT32:return fe(typeof e=="number"),e;case I.FLOAT:case I.DOUBLE:return fe(typeof e=="number"),Number.isNaN(e)?"NaN":e===Number.POSITIVE_INFINITY?"Infinity":e===Number.NEGATIVE_INFINITY?"-Infinity":e;case I.STRING:return fe(typeof e=="string"),e;case I.BOOL:return fe(typeof e=="boolean"),e;case I.UINT64:case I.FIXED64:case I.INT64:case I.SFIXED64:case I.SINT64:return fe(typeof e=="bigint"||typeof e=="string"||typeof e=="number"),e.toString();case I.BYTES:return fe(e instanceof Uint8Array),cd.enc(e)}}const Mi=Symbol("@bufbuild/protobuf/unknown-fields"),Gh={readUnknownFields:!0,readerFactory:n=>new W0(n)},Yh={writeUnknownFields:!0,writerFactory:()=>new K0};function rS(n){return n?Object.assign(Object.assign({},Gh),n):Gh}function iS(n){return n?Object.assign(Object.assign({},Yh),n):Yh}function sS(){return{makeReadOptions:rS,makeWriteOptions:iS,listUnknownFields(n){var e;return(e=n[Mi])!==null&&e!==void 0?e:[]},discardUnknownFields(n){delete n[Mi]},writeUnknownFields(n,e){const r=n[Mi];if(r)for(const i of r)e.tag(i.no,i.wireType).raw(i.data)},onUnknownField(n,e,t,r){const i=n;Array.isArray(i[Mi])||(i[Mi]=[]),i[Mi].push({no:e,wireType:t,data:r})},readMessage(n,e,t,r,i){const s=n.getType(),o=i?e.len:e.pos+t;let a,u;for(;e.pos<o&&([a,u]=e.tag(),!(i===!0&&u==pe.EndGroup));){const c=s.fields.find(a);if(!c){const d=e.skip(u,a);r.readUnknownFields&&this.onUnknownField(n,a,u,d);continue}Qh(n,e,c,u,r)}if(i&&(u!=pe.EndGroup||a!==t))throw new Error("invalid end group tag")},readField:Qh,writeMessage(n,e,t){const r=n.getType();for(const i of r.fields.byNumber()){if(!sy(i,n)){if(i.req)throw new Error(`cannot encode field ${r.typeName}.${i.name} to binary: required field not set`);continue}const s=i.oneof?n[i.oneof.localName].value:n[i.localName];Xh(i,s,e,t)}return t.writeUnknownFields&&this.writeUnknownFields(n,e),e},writeField(n,e,t,r){e!==void 0&&Xh(n,e,t,r)}}}function Qh(n,e,t,r,i){let{repeated:s,localName:o}=t;switch(t.oneof&&(n=n[t.oneof.localName],n.case!=o&&delete n.value,n.case=o,o="value"),t.kind){case"scalar":case"enum":const a=t.kind=="enum"?I.INT32:t.T;let u=fl;if(t.kind=="scalar"&&t.L>0&&(u=aS),s){let m=n[o];if(r==pe.LengthDelimited&&a!=I.STRING&&a!=I.BYTES){let k=e.uint32()+e.pos;for(;e.pos<k;)m.push(u(e,a))}else m.push(u(e,a))}else n[o]=u(e,a);break;case"message":const c=t.T;s?n[o].push(Fa(e,new c,i,t)):Sr(n[o])?Fa(e,n[o],i,t):(n[o]=Fa(e,new c,i,t),c.fieldWrapper&&!t.oneof&&!t.repeated&&(n[o]=c.fieldWrapper.unwrapField(n[o])));break;case"map":let[d,h]=oS(t,e,i);n[o][d]=h;break}}function Fa(n,e,t,r){const i=e.getType().runtime.bin,s=r==null?void 0:r.delimited;return i.readMessage(e,n,s?r.no:n.uint32(),t,s),e}function oS(n,e,t){const r=e.uint32(),i=e.pos+r;let s,o;for(;e.pos<i;){const[a]=e.tag();switch(a){case 1:s=fl(e,n.K);break;case 2:switch(n.V.kind){case"scalar":o=fl(e,n.V.T);break;case"enum":o=e.int32();break;case"message":o=Fa(e,new n.V.T,t,void 0);break}break}}if(s===void 0&&(s=ws(n.K,li.BIGINT)),typeof s!="string"&&typeof s!="number"&&(s=s.toString()),o===void 0)switch(n.V.kind){case"scalar":o=ws(n.V.T,li.BIGINT);break;case"enum":o=n.V.T.values[0].no;break;case"message":o=new n.V.T;break}return[s,o]}function aS(n,e){const t=fl(n,e);return typeof t=="bigint"?t.toString():t}function fl(n,e){switch(e){case I.STRING:return n.string();case I.BOOL:return n.bool();case I.DOUBLE:return n.double();case I.FLOAT:return n.float();case I.INT32:return n.int32();case I.INT64:return n.int64();case I.UINT64:return n.uint64();case I.FIXED64:return n.fixed64();case I.BYTES:return n.bytes();case I.FIXED32:return n.fixed32();case I.SFIXED32:return n.sfixed32();case I.SFIXED64:return n.sfixed64();case I.SINT64:return n.sint64();case I.UINT32:return n.uint32();case I.SINT32:return n.sint32()}}function Xh(n,e,t,r){fe(e!==void 0);const i=n.repeated;switch(n.kind){case"scalar":case"enum":let s=n.kind=="enum"?I.INT32:n.T;if(i)if(fe(Array.isArray(e)),n.packed)uS(t,s,n.no,e);else for(const o of e)oo(t,s,n.no,o);else oo(t,s,n.no,e);break;case"message":if(i){fe(Array.isArray(e));for(const o of e)Zh(t,r,n,o)}else Zh(t,r,n,e);break;case"map":fe(typeof e=="object"&&e!=null);for(const[o,a]of Object.entries(e))lS(t,r,n,o,a);break}}function lS(n,e,t,r,i){n.tag(t.no,pe.LengthDelimited),n.fork();let s=r;switch(t.K){case I.INT32:case I.FIXED32:case I.UINT32:case I.SFIXED32:case I.SINT32:s=Number.parseInt(r);break;case I.BOOL:fe(r=="true"||r=="false"),s=r=="true";break}switch(oo(n,t.K,1,s),t.V.kind){case"scalar":oo(n,t.V.T,2,i);break;case"enum":oo(n,I.INT32,2,i);break;case"message":fe(i!==void 0),n.tag(2,pe.LengthDelimited).bytes(i.toBinary(e));break}n.join()}function Zh(n,e,t,r){const i=oy(t.T,r);t.delimited?n.tag(t.no,pe.StartGroup).raw(i.toBinary(e)).tag(t.no,pe.EndGroup):n.tag(t.no,pe.LengthDelimited).bytes(i.toBinary(e))}function oo(n,e,t,r){fe(r!==void 0);let[i,s]=ay(e);n.tag(t,i)[s](r)}function uS(n,e,t,r){if(!r.length)return;n.tag(t,pe.LengthDelimited).fork();let[,i]=ay(e);for(let s=0;s<r.length;s++)n[i](r[s]);n.join()}function ay(n){let e=pe.Varint;switch(n){case I.BYTES:case I.STRING:e=pe.LengthDelimited;break;case I.DOUBLE:case I.FIXED64:case I.SFIXED64:e=pe.Bit64;break;case I.FIXED32:case I.SFIXED32:case I.FLOAT:e=pe.Bit32;break}const t=I[n].toLowerCase();return[e,t]}function cS(){return{setEnumType:Yp,initPartial(n,e){if(n===void 0)return;const t=e.getType();for(const r of t.fields.byMember()){const i=r.localName,s=e,o=n;if(o[i]!=null)switch(r.kind){case"oneof":const a=o[i].case;if(a===void 0)continue;const u=r.findField(a);let c=o[i].value;u&&u.kind=="message"&&!Sr(c,u.T)?c=new u.T(c):u&&u.kind==="scalar"&&u.T===I.BYTES&&(c=Vs(c)),s[i]={case:a,value:c};break;case"scalar":case"enum":let d=o[i];r.T===I.BYTES&&(d=r.repeated?d.map(Vs):Vs(d)),s[i]=d;break;case"map":switch(r.V.kind){case"scalar":case"enum":if(r.V.T===I.BYTES)for(const[p,k]of Object.entries(o[i]))s[i][p]=Vs(k);else Object.assign(s[i],o[i]);break;case"message":const m=r.V.T;for(const p of Object.keys(o[i])){let k=o[i][p];m.fieldWrapper||(k=new m(k)),s[i][p]=k}break}break;case"message":const h=r.T;if(r.repeated)s[i]=o[i].map(m=>Sr(m,h)?m:new h(m));else{const m=o[i];h.fieldWrapper?h.typeName==="google.protobuf.BytesValue"?s[i]=Vs(m):s[i]=m:s[i]=Sr(m,h)?m:new h(m)}break}}},equals(n,e,t){return e===t?!0:!e||!t?!1:n.fields.byMember().every(r=>{const i=e[r.localName],s=t[r.localName];if(r.repeated){if(i.length!==s.length)return!1;switch(r.kind){case"message":return i.every((o,a)=>r.T.equals(o,s[a]));case"scalar":return i.every((o,a)=>Jr(r.T,o,s[a]));case"enum":return i.every((o,a)=>Jr(I.INT32,o,s[a]))}throw new Error(`repeated cannot contain ${r.kind}`)}switch(r.kind){case"message":let o=i,a=s;return r.T.fieldWrapper&&(o!==void 0&&!Sr(o)&&(o=r.T.fieldWrapper.wrapField(o)),a!==void 0&&!Sr(a)&&(a=r.T.fieldWrapper.wrapField(a))),r.T.equals(o,a);case"enum":return Jr(I.INT32,i,s);case"scalar":return Jr(r.T,i,s);case"oneof":if(i.case!==s.case)return!1;const u=r.findField(i.case);if(u===void 0)return!0;switch(u.kind){case"message":return u.T.equals(i.value,s.value);case"enum":return Jr(I.INT32,i.value,s.value);case"scalar":return Jr(u.T,i.value,s.value)}throw new Error(`oneof cannot contain ${u.kind}`);case"map":const c=Object.keys(i).concat(Object.keys(s));switch(r.V.kind){case"message":const d=r.V.T;return c.every(m=>d.equals(i[m],s[m]));case"enum":return c.every(m=>Jr(I.INT32,i[m],s[m]));case"scalar":const h=r.V.T;return c.every(m=>Jr(h,i[m],s[m]))}break}})},clone(n){const e=n.getType(),t=new e,r=t;for(const i of e.fields.byMember()){const s=n[i.localName];let o;if(i.repeated)o=s.map(ma);else if(i.kind=="map"){o=r[i.localName];for(const[a,u]of Object.entries(s))o[a]=ma(u)}else i.kind=="oneof"?o=i.findField(s.case)?{case:s.case,value:ma(s.value)}:{case:void 0}:o=ma(s);r[i.localName]=o}for(const i of e.runtime.bin.listUnknownFields(n))e.runtime.bin.onUnknownField(r,i.no,i.wireType,i.data);return t}}}function ma(n){if(n===void 0)return n;if(Sr(n))return n.clone();if(n instanceof Uint8Array){const e=new Uint8Array(n.byteLength);return e.set(n),e}return n}function Vs(n){return n instanceof Uint8Array?n:new Uint8Array(n)}function fS(n,e,t){return{syntax:n,json:eS(),bin:sS(),util:Object.assign(Object.assign({},cS()),{newFieldList:e,initFields:t}),makeMessageType(r,i,s){return J0(this,r,i,s)},makeEnum:$0,makeEnumType:Qp,getEnumType:F0,makeExtension(r,i,s){return H0(this,r,i,s)}}}class dS{constructor(e,t){this._fields=e,this._normalizer=t}findJsonName(e){if(!this.jsonNames){const t={};for(const r of this.list())t[r.jsonName]=t[r.name]=r;this.jsonNames=t}return this.jsonNames[e]}find(e){if(!this.numbers){const t={};for(const r of this.list())t[r.no]=r;this.numbers=t}return this.numbers[e]}list(){return this.all||(this.all=this._normalizer(this._fields)),this.all}byNumber(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort((e,t)=>e.no-t.no)),this.numbersAsc}byMember(){if(!this.members){this.members=[];const e=this.members;let t;for(const r of this.list())r.oneof?r.oneof!==t&&(t=r.oneof,e.push(t)):e.push(r)}return this.members}}function ly(n,e){const t=uy(n);return e?t:vS(yS(t))}function hS(n){return ly(n,!1)}const mS=uy;function uy(n){let e=!1;const t=[];for(let r=0;r<n.length;r++){let i=n.charAt(r);switch(i){case"_":e=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":t.push(i),e=!1;break;default:e&&(e=!1,i=i.toUpperCase()),t.push(i);break}}return t.join("")}const gS=new Set(["constructor","toString","toJSON","valueOf"]),pS=new Set(["getType","clone","equals","fromBinary","fromJson","fromJsonString","toBinary","toJson","toJsonString","toObject"]),cy=n=>`${n}$`,yS=n=>pS.has(n)?cy(n):n,vS=n=>gS.has(n)?cy(n):n;class wS{constructor(e){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.req=!1,this.default=void 0,this.fields=[],this.name=e,this.localName=hS(e)}addField(e){fe(e.oneof===this,`field ${e.name} not one of ${this.name}`),this.fields.push(e)}findField(e){if(!this._lookup){this._lookup=Object.create(null);for(let t=0;t<this.fields.length;t++)this._lookup[this.fields[t].localName]=this.fields[t]}return this._lookup[e]}}function SS(n,e){var t,r,i,s,o,a;const u=[];let c;for(const d of typeof n=="function"?n():n){const h=d;if(h.localName=ly(d.name,d.oneof!==void 0),h.jsonName=(t=d.jsonName)!==null&&t!==void 0?t:mS(d.name),h.repeated=(r=d.repeated)!==null&&r!==void 0?r:!1,d.kind=="scalar"&&(h.L=(i=d.L)!==null&&i!==void 0?i:li.BIGINT),h.delimited=(s=d.delimited)!==null&&s!==void 0?s:!1,h.req=(o=d.req)!==null&&o!==void 0?o:!1,h.opt=(a=d.opt)!==null&&a!==void 0?a:!1,d.packed===void 0&&(h.packed=d.kind=="enum"||d.kind=="scalar"&&d.T!=I.BYTES&&d.T!=I.STRING),d.oneof!==void 0){const m=typeof d.oneof=="string"?d.oneof:d.oneof.name;(!c||c.name!=m)&&(c=new wS(m)),h.oneof=c,c.addField(h)}u.push(h)}return u}const f=fS("proto3",n=>new dS(n,e=>SS(e)),n=>{for(const e of n.getType().fields.byMember()){if(e.opt)continue;const t=e.localName,r=n;if(e.repeated){r[t]=[];continue}switch(e.kind){case"oneof":r[t]={case:void 0};break;case"enum":r[t]=0;break;case"map":r[t]={};break;case"scalar":r[t]=ws(e.T,e.L);break}}});var Je;(function(n){n[n.Unary=0]="Unary",n[n.ServerStreaming=1]="ServerStreaming",n[n.ClientStreaming=2]="ClientStreaming",n[n.BiDiStreaming=3]="BiDiStreaming"})(Je||(Je={}));var em;(function(n){n[n.NoSideEffects=1]="NoSideEffects",n[n.Idempotent=2]="Idempotent"})(em||(em={}));class Ee extends D{constructor(e){super(),this.seconds=ne.zero,this.nanos=0,f.util.initPartial(e,this)}fromJson(e,t){if(typeof e!="string")throw new Error(`cannot decode google.protobuf.Timestamp from JSON: ${f.json.debug(e)}`);const r=e.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!r)throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");const i=Date.parse(r[1]+"-"+r[2]+"-"+r[3]+"T"+r[4]+":"+r[5]+":"+r[6]+(r[8]?r[8]:"Z"));if(Number.isNaN(i))throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");if(i<Date.parse("0001-01-01T00:00:00Z")||i>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot decode message google.protobuf.Timestamp from JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");return this.seconds=ne.parse(i/1e3),this.nanos=0,r[7]&&(this.nanos=parseInt("1"+r[7]+"0".repeat(9-r[7].length))-1e9),this}toJson(e){const t=Number(this.seconds)*1e3;if(t<Date.parse("0001-01-01T00:00:00Z")||t>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot encode google.protobuf.Timestamp to JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");if(this.nanos<0)throw new Error("cannot encode google.protobuf.Timestamp to JSON: nanos must not be negative");let r="Z";if(this.nanos>0){const i=(this.nanos+1e9).toString().substring(1);i.substring(3)==="000000"?r="."+i.substring(0,3)+"Z":i.substring(6)==="000"?r="."+i.substring(0,6)+"Z":r="."+i+"Z"}return new Date(t).toISOString().replace(".000Z",r)}toDate(){return new Date(Number(this.seconds)*1e3+Math.ceil(this.nanos/1e6))}static now(){return Ee.fromDate(new Date)}static fromDate(e){const t=e.getTime();return new Ee({seconds:ne.parse(Math.floor(t/1e3)),nanos:t%1e3*1e6})}static fromBinary(e,t){return new Ee().fromBinary(e,t)}static fromJson(e,t){return new Ee().fromJson(e,t)}static fromJsonString(e,t){return new Ee().fromJsonString(e,t)}static equals(e,t){return f.util.equals(Ee,e,t)}}Ee.runtime=f;Ee.typeName="google.protobuf.Timestamp";Ee.fields=f.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);class Ir extends D{constructor(e){super(),this.seconds=ne.zero,this.nanos=0,f.util.initPartial(e,this)}fromJson(e,t){if(typeof e!="string")throw new Error(`cannot decode google.protobuf.Duration from JSON: ${f.json.debug(e)}`);const r=e.match(/^(-?[0-9]+)(?:\.([0-9]+))?s/);if(r===null)throw new Error(`cannot decode google.protobuf.Duration from JSON: ${f.json.debug(e)}`);const i=Number(r[1]);if(i>315576e6||i<-315576e6)throw new Error(`cannot decode google.protobuf.Duration from JSON: ${f.json.debug(e)}`);if(this.seconds=ne.parse(i),typeof r[2]=="string"){const s=r[2]+"0".repeat(9-r[2].length);this.nanos=parseInt(s),(i<0||Object.is(i,-0))&&(this.nanos=-this.nanos)}return this}toJson(e){if(Number(this.seconds)>315576e6||Number(this.seconds)<-315576e6)throw new Error("cannot encode google.protobuf.Duration to JSON: value out of range");let t=this.seconds.toString();if(this.nanos!==0){let r=Math.abs(this.nanos).toString();r="0".repeat(9-r.length)+r,r.substring(3)==="000000"?r=r.substring(0,3):r.substring(6)==="000"&&(r=r.substring(0,6)),t+="."+r,this.nanos<0&&Number(this.seconds)==0&&(t="-"+t)}return t+"s"}static fromBinary(e,t){return new Ir().fromBinary(e,t)}static fromJson(e,t){return new Ir().fromJson(e,t)}static fromJsonString(e,t){return new Ir().fromJsonString(e,t)}static equals(e,t){return f.util.equals(Ir,e,t)}}Ir.runtime=f;Ir.typeName="google.protobuf.Duration";Ir.fields=f.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);class Gt extends D{constructor(e){super(),this.typeUrl="",this.value=new Uint8Array(0),f.util.initPartial(e,this)}toJson(e){var t;if(this.typeUrl==="")return{};const r=this.typeUrlToName(this.typeUrl),i=(t=e==null?void 0:e.typeRegistry)===null||t===void 0?void 0:t.findMessage(r);if(!i)throw new Error(`cannot encode message google.protobuf.Any to JSON: "${this.typeUrl}" is not in the type registry`);let o=i.fromBinary(this.value).toJson(e);return(r.startsWith("google.protobuf.")||o===null||Array.isArray(o)||typeof o!="object")&&(o={value:o}),o["@type"]=this.typeUrl,o}fromJson(e,t){var r;if(e===null||Array.isArray(e)||typeof e!="object")throw new Error(`cannot decode message google.protobuf.Any from JSON: expected object but got ${e===null?"null":Array.isArray(e)?"array":typeof e}`);if(Object.keys(e).length==0)return this;const i=e["@type"];if(typeof i!="string"||i=="")throw new Error('cannot decode message google.protobuf.Any from JSON: "@type" is empty');const s=this.typeUrlToName(i),o=(r=t==null?void 0:t.typeRegistry)===null||r===void 0?void 0:r.findMessage(s);if(!o)throw new Error(`cannot decode message google.protobuf.Any from JSON: ${i} is not in the type registry`);let a;if(s.startsWith("google.protobuf.")&&Object.prototype.hasOwnProperty.call(e,"value"))a=o.fromJson(e.value,t);else{const u=Object.assign({},e);delete u["@type"],a=o.fromJson(u,t)}return this.packFrom(a),this}packFrom(e){this.value=e.toBinary(),this.typeUrl=this.typeNameToUrl(e.getType().typeName)}unpackTo(e){return this.is(e.getType())?(e.fromBinary(this.value),!0):!1}unpack(e){if(this.typeUrl==="")return;const t=e.findMessage(this.typeUrlToName(this.typeUrl));if(t)return t.fromBinary(this.value)}is(e){if(this.typeUrl==="")return!1;const t=this.typeUrlToName(this.typeUrl);let r="";return typeof e=="string"?r=e:r=e.typeName,t===r}typeNameToUrl(e){return`type.googleapis.com/${e}`}typeUrlToName(e){if(!e.length)throw new Error(`invalid type url: ${e}`);const t=e.lastIndexOf("/"),r=t>=0?e.substring(t+1):e;if(!r.length)throw new Error(`invalid type url: ${e}`);return r}static pack(e){const t=new Gt;return t.packFrom(e),t}static fromBinary(e,t){return new Gt().fromBinary(e,t)}static fromJson(e,t){return new Gt().fromJson(e,t)}static fromJsonString(e,t){return new Gt().fromJsonString(e,t)}static equals(e,t){return f.util.equals(Gt,e,t)}}Gt.runtime=f;Gt.typeName="google.protobuf.Any";Gt.fields=f.util.newFieldList(()=>[{no:1,name:"type_url",kind:"scalar",T:9},{no:2,name:"value",kind:"scalar",T:12}]);class Yt extends D{constructor(e){super(),this.value=0,f.util.initPartial(e,this)}toJson(e){return f.json.writeScalar(I.DOUBLE,this.value,!0)}fromJson(e,t){try{this.value=f.json.readScalar(I.DOUBLE,e)}catch(r){let i='cannot decode message google.protobuf.DoubleValue from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new Yt().fromBinary(e,t)}static fromJson(e,t){return new Yt().fromJson(e,t)}static fromJsonString(e,t){return new Yt().fromJsonString(e,t)}static equals(e,t){return f.util.equals(Yt,e,t)}}Yt.runtime=f;Yt.typeName="google.protobuf.DoubleValue";Yt.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:1}]);Yt.fieldWrapper={wrapField(n){return new Yt({value:n})},unwrapField(n){return n.value}};class Qt extends D{constructor(e){super(),this.value=0,f.util.initPartial(e,this)}toJson(e){return f.json.writeScalar(I.FLOAT,this.value,!0)}fromJson(e,t){try{this.value=f.json.readScalar(I.FLOAT,e)}catch(r){let i='cannot decode message google.protobuf.FloatValue from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new Qt().fromBinary(e,t)}static fromJson(e,t){return new Qt().fromJson(e,t)}static fromJsonString(e,t){return new Qt().fromJsonString(e,t)}static equals(e,t){return f.util.equals(Qt,e,t)}}Qt.runtime=f;Qt.typeName="google.protobuf.FloatValue";Qt.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:2}]);Qt.fieldWrapper={wrapField(n){return new Qt({value:n})},unwrapField(n){return n.value}};class Xt extends D{constructor(e){super(),this.value=ne.zero,f.util.initPartial(e,this)}toJson(e){return f.json.writeScalar(I.INT64,this.value,!0)}fromJson(e,t){try{this.value=f.json.readScalar(I.INT64,e)}catch(r){let i='cannot decode message google.protobuf.Int64Value from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new Xt().fromBinary(e,t)}static fromJson(e,t){return new Xt().fromJson(e,t)}static fromJsonString(e,t){return new Xt().fromJsonString(e,t)}static equals(e,t){return f.util.equals(Xt,e,t)}}Xt.runtime=f;Xt.typeName="google.protobuf.Int64Value";Xt.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:3}]);Xt.fieldWrapper={wrapField(n){return new Xt({value:n})},unwrapField(n){return n.value}};class Zt extends D{constructor(e){super(),this.value=ne.zero,f.util.initPartial(e,this)}toJson(e){return f.json.writeScalar(I.UINT64,this.value,!0)}fromJson(e,t){try{this.value=f.json.readScalar(I.UINT64,e)}catch(r){let i='cannot decode message google.protobuf.UInt64Value from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new Zt().fromBinary(e,t)}static fromJson(e,t){return new Zt().fromJson(e,t)}static fromJsonString(e,t){return new Zt().fromJsonString(e,t)}static equals(e,t){return f.util.equals(Zt,e,t)}}Zt.runtime=f;Zt.typeName="google.protobuf.UInt64Value";Zt.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:4}]);Zt.fieldWrapper={wrapField(n){return new Zt({value:n})},unwrapField(n){return n.value}};class nt extends D{constructor(e){super(),this.value=0,f.util.initPartial(e,this)}toJson(e){return f.json.writeScalar(I.INT32,this.value,!0)}fromJson(e,t){try{this.value=f.json.readScalar(I.INT32,e)}catch(r){let i='cannot decode message google.protobuf.Int32Value from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new nt().fromBinary(e,t)}static fromJson(e,t){return new nt().fromJson(e,t)}static fromJsonString(e,t){return new nt().fromJsonString(e,t)}static equals(e,t){return f.util.equals(nt,e,t)}}nt.runtime=f;nt.typeName="google.protobuf.Int32Value";nt.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:5}]);nt.fieldWrapper={wrapField(n){return new nt({value:n})},unwrapField(n){return n.value}};class en extends D{constructor(e){super(),this.value=0,f.util.initPartial(e,this)}toJson(e){return f.json.writeScalar(I.UINT32,this.value,!0)}fromJson(e,t){try{this.value=f.json.readScalar(I.UINT32,e)}catch(r){let i='cannot decode message google.protobuf.UInt32Value from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new en().fromBinary(e,t)}static fromJson(e,t){return new en().fromJson(e,t)}static fromJsonString(e,t){return new en().fromJsonString(e,t)}static equals(e,t){return f.util.equals(en,e,t)}}en.runtime=f;en.typeName="google.protobuf.UInt32Value";en.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:13}]);en.fieldWrapper={wrapField(n){return new en({value:n})},unwrapField(n){return n.value}};class tn extends D{constructor(e){super(),this.value=!1,f.util.initPartial(e,this)}toJson(e){return f.json.writeScalar(I.BOOL,this.value,!0)}fromJson(e,t){try{this.value=f.json.readScalar(I.BOOL,e)}catch(r){let i='cannot decode message google.protobuf.BoolValue from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new tn().fromBinary(e,t)}static fromJson(e,t){return new tn().fromJson(e,t)}static fromJsonString(e,t){return new tn().fromJsonString(e,t)}static equals(e,t){return f.util.equals(tn,e,t)}}tn.runtime=f;tn.typeName="google.protobuf.BoolValue";tn.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:8}]);tn.fieldWrapper={wrapField(n){return new tn({value:n})},unwrapField(n){return n.value}};class He extends D{constructor(e){super(),this.value="",f.util.initPartial(e,this)}toJson(e){return f.json.writeScalar(I.STRING,this.value,!0)}fromJson(e,t){try{this.value=f.json.readScalar(I.STRING,e)}catch(r){let i='cannot decode message google.protobuf.StringValue from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new He().fromBinary(e,t)}static fromJson(e,t){return new He().fromJson(e,t)}static fromJsonString(e,t){return new He().fromJsonString(e,t)}static equals(e,t){return f.util.equals(He,e,t)}}He.runtime=f;He.typeName="google.protobuf.StringValue";He.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:9}]);He.fieldWrapper={wrapField(n){return new He({value:n})},unwrapField(n){return n.value}};class nn extends D{constructor(e){super(),this.value=new Uint8Array(0),f.util.initPartial(e,this)}toJson(e){return f.json.writeScalar(I.BYTES,this.value,!0)}fromJson(e,t){try{this.value=f.json.readScalar(I.BYTES,e)}catch(r){let i='cannot decode message google.protobuf.BytesValue from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new nn().fromBinary(e,t)}static fromJson(e,t){return new nn().fromJson(e,t)}static fromJsonString(e,t){return new nn().fromJsonString(e,t)}static equals(e,t){return f.util.equals(nn,e,t)}}nn.runtime=f;nn.typeName="google.protobuf.BytesValue";nn.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:12}]);nn.fieldWrapper={wrapField(n){return new nn({value:n})},unwrapField(n){return n.value}};function kS(n,e,t){try{const r=cd.dec(n);return e?e.fromBinary(r,t):r}catch(r){throw Y.from(r,q.DataLoss)}}function TS(n,e){const t={};for(const[r,i]of Object.entries(n.methods)){const s=e(Object.assign(Object.assign({},i),{localName:r,service:n}));s!=null&&(t[r]=s)}return t}const tm=1;function nm(n){let e,t=new Uint8Array(0);function r(i){const s=new Uint8Array(t.length+i.length);s.set(t),s.set(i,t.length),t=s}return new ReadableStream({start(){e=n.getReader()},async pull(i){let s;for(;;){if(s===void 0&&t.byteLength>=5){let u=0;for(let c=1;c<5;c++)u=(u<<8)+t[c];s={flags:t[0],length:u}}if(s!==void 0&&t.byteLength>=s.length+5)break;const a=await e.read();if(a.done)break;r(a.value)}if(s===void 0){if(t.byteLength==0){i.close();return}i.error(new Y("premature end of stream",q.DataLoss));return}const o=t.subarray(5,5+s.length);t=t.subarray(5+s.length),i.enqueue({flags:s.flags,data:o})}})}function rm(n,e){const t=new Uint8Array(e.length+5);t.set(e,5);const r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.setUint8(0,n),r.setUint32(1,e.length),t}var IS=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof __values=="function"?__values(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,u){o=n[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(c){s({value:c,done:a})},o)}},Po=function(n){return this instanceof Po?(this.v=n,this):new Po(n)},AS=function(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i={},a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(p){return function(k){return Promise.resolve(k).then(p,h)}}function a(p,k){r[p]&&(i[p]=function(T){return new Promise(function(C,y){s.push([p,T,C,y])>1||u(p,T)})},k&&(i[p]=k(i[p])))}function u(p,k){try{c(r[p](k))}catch(T){m(s[0][3],T)}}function c(p){p.value instanceof Po?Promise.resolve(p.value.v).then(d,h):m(s[0][2],p)}function d(p){u("next",p)}function h(p){u("throw",p)}function m(p,k){p(k),s.shift(),s.length&&u(s[0][0],s[0][1])}},ES=function(n){var e,t;return e={},r("next"),r("throw",function(i){throw i}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(i,s){e[i]=n[i]?function(o){return(t=!t)?{value:Po(n[i](o)),done:!1}:s?s(o):o}:s}};function xS(n){return AS(this,arguments,function*(){yield Po(yield*ES(IS(n)))})}var fy=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof __values=="function"?__values(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,u){o=n[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(c){s({value:c,done:a})},o)}},Ss=function(n){return this instanceof Ss?(this.v=n,this):new Ss(n)},NS=function(n){var e,t;return e={},r("next"),r("throw",function(i){throw i}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(i,s){e[i]=n[i]?function(o){return(t=!t)?{value:Ss(n[i](o)),done:!1}:s?s(o):o}:s}},CS=function(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i={},a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(p){return function(k){return Promise.resolve(k).then(p,h)}}function a(p,k){r[p]&&(i[p]=function(T){return new Promise(function(C,y){s.push([p,T,C,y])>1||u(p,T)})},k&&(i[p]=k(i[p])))}function u(p,k){try{c(r[p](k))}catch(T){m(s[0][3],T)}}function c(p){p.value instanceof Ss?Promise.resolve(p.value.v).then(d,h):m(s[0][2],p)}function d(p){u("next",p)}function h(p){u("throw",p)}function m(p,k){p(k),s.shift(),s.length&&u(s[0][0],s[0][1])}};function PS(n,e){return TS(n,t=>{switch(t.kind){case Je.Unary:return DS(e,n,t);case Je.ServerStreaming:return OS(e,n,t);case Je.ClientStreaming:return RS(e,n,t);case Je.BiDiStreaming:return LS(e,n,t);default:return null}})}function DS(n,e,t){return async function(r,i){var s,o;const a=await n.unary(e,t,i==null?void 0:i.signal,i==null?void 0:i.timeoutMs,i==null?void 0:i.headers,r,i==null?void 0:i.contextValues);return(s=i==null?void 0:i.onHeader)===null||s===void 0||s.call(i,a.header),(o=i==null?void 0:i.onTrailer)===null||o===void 0||o.call(i,a.trailer),a.message}}function OS(n,e,t){return function(r,i){return dy(n.stream(e,t,i==null?void 0:i.signal,i==null?void 0:i.timeoutMs,i==null?void 0:i.headers,xS([r]),i==null?void 0:i.contextValues),i)}}function RS(n,e,t){return async function(r,i){var s,o,a,u,c,d;const h=await n.stream(e,t,i==null?void 0:i.signal,i==null?void 0:i.timeoutMs,i==null?void 0:i.headers,r,i==null?void 0:i.contextValues);(c=i==null?void 0:i.onHeader)===null||c===void 0||c.call(i,h.header);let m,p=0;try{for(var k=!0,T=fy(h.message),C;C=await T.next(),s=C.done,!s;k=!0)u=C.value,k=!1,m=u,p++}catch(y){o={error:y}}finally{try{!k&&!s&&(a=T.return)&&await a.call(T)}finally{if(o)throw o.error}}if(!m)throw new Y("protocol error: missing response message",q.Unimplemented);if(p>1)throw new Y("protocol error: received extra messages for client streaming method",q.Unimplemented);return(d=i==null?void 0:i.onTrailer)===null||d===void 0||d.call(i,h.trailer),m}}function LS(n,e,t){return function(r,i){return dy(n.stream(e,t,i==null?void 0:i.signal,i==null?void 0:i.timeoutMs,i==null?void 0:i.headers,r,i==null?void 0:i.contextValues),i)}}function dy(n,e){const t=function(){return CS(this,arguments,function*(){var r,i;const s=yield Ss(n);(r=e==null?void 0:e.onHeader)===null||r===void 0||r.call(e,s.header),yield Ss(yield*NS(fy(s.message))),(i=e==null?void 0:e.onTrailer)===null||i===void 0||i.call(e,s.trailer)})}()[Symbol.asyncIterator]();return{[Symbol.asyncIterator]:()=>({next:()=>t.next()})}}function BS(...n){const e=new AbortController,t=n.filter(i=>i!==void 0).concat(e.signal);for(const i of t){if(i.aborted){r.apply(i);break}i.addEventListener("abort",r)}function r(){e.signal.aborted||e.abort(hy(this));for(const i of t)i.removeEventListener("abort",r)}return e}function bS(n){const e=new AbortController,t=()=>{e.abort(new Y("the operation timed out",q.DeadlineExceeded))};let r;return n!==void 0&&(n<=0?t():r=setTimeout(t,n)),{signal:e.signal,cleanup:()=>clearTimeout(r)}}function hy(n){if(!n.aborted)return;if(n.reason!==void 0)return n.reason;const e=new Error("This operation was aborted");return e.name="AbortError",e}function im(){return{get(n){return n.id in this?this[n.id]:n.defaultValue},set(n,e){return this[n.id]=e,this},delete(n){return delete this[n.id],this}}}const Ju=128;function sm(n){const e=new Headers,t=new TextDecoder().decode(n).split(`\r
`);for(const r of t){if(r==="")continue;const i=r.indexOf(":");if(i>0){const s=r.substring(0,i).trim(),o=r.substring(i+1).trim();e.append(s,o)}}return e}const zS="Content-Type",FS="Grpc-Timeout",ks="Grpc-Status",my="Grpc-Message",$S="Grpc-Status-Details-Bin",JS="X-User-Agent",MS="X-Grpc-Web",US="application/grpc-web+proto",VS="application/grpc-web+json";class Ar extends D{constructor(e){super(),this.code=0,this.message="",this.details=[],f.util.initPartial(e,this)}static fromBinary(e,t){return new Ar().fromBinary(e,t)}static fromJson(e,t){return new Ar().fromJson(e,t)}static fromJsonString(e,t){return new Ar().fromJsonString(e,t)}static equals(e,t){return f.util.equals(Ar,e,t)}}Ar.runtime=f;Ar.typeName="google.rpc.Status";Ar.fields=f.util.newFieldList(()=>[{no:1,name:"code",kind:"scalar",T:5},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"details",kind:"message",T:Gt,repeated:!0}]);const jS="0";function gy(n){var e;const t=n.get($S);if(t!=null){const i=kS(t,Ar);if(i.code==0)return;const s=new Y(i.message,i.code,n);return s.details=i.details.map(o=>({type:o.typeUrl.substring(o.typeUrl.lastIndexOf("/")+1),value:o.value})),s}const r=n.get(ks);if(r!=null){if(r===jS)return;const i=parseInt(r,10);return i in q?new Y(decodeURIComponent((e=n.get(my))!==null&&e!==void 0?e:""),i,n):new Y(`invalid grpc-status: ${r}`,q.Internal,n)}}function om(n,e,t){const r=typeof e=="string"?e:e.typeName,i=typeof t=="string"?t:t.name;return n.toString().replace(/\/?$/,`/${r}/${i}`)}function py(n,e){return e instanceof n?e:new n(e)}function qS(n,e){function t(r){return r.done===!0?r:{done:r.done,value:py(n,r.value)}}return{[Symbol.asyncIterator](){const r=e[Symbol.asyncIterator](),i={next:()=>r.next().then(t)};return r.throw!==void 0&&(i.throw=s=>r.throw(s).then(t)),r.return!==void 0&&(i.return=s=>r.return(s).then(t)),i}}}function yy(n,e){var t;return(t=e==null?void 0:e.concat().reverse().reduce((r,i)=>i(r),n))!==null&&t!==void 0?t:n}function KS(n){var e;const t=Object.assign({},n);return(e=t.ignoreUnknownFields)!==null&&e!==void 0||(t.ignoreUnknownFields=!0),t}function am(n,e,t,r){const i=e?lm(n.I,r):um(n.I,t);return{parse:(e?lm(n.O,r):um(n.O,t)).parse,serialize:i.serialize}}function lm(n,e){return{parse(t){try{return n.fromBinary(t,e)}catch(r){const i=r instanceof Error?r.message:String(r);throw new Y(`parse binary: ${i}`,q.Internal)}},serialize(t){try{return t.toBinary(e)}catch(r){const i=r instanceof Error?r.message:String(r);throw new Y(`serialize binary: ${i}`,q.Internal)}}}}function um(n,e){var t,r;const i=(t=e==null?void 0:e.textEncoder)!==null&&t!==void 0?t:new TextEncoder,s=(r=e==null?void 0:e.textDecoder)!==null&&r!==void 0?r:new TextDecoder,o=KS(e);return{parse(a){try{const u=s.decode(a);return n.fromJsonString(u,o)}catch(u){throw Y.from(u,q.InvalidArgument)}},serialize(a){try{const u=a.toJsonString(o);return i.encode(u)}catch(u){throw Y.from(u,q.Internal)}}}}function WS(n){const e=yy(n.next,n.interceptors),[t,r,i]=vy(n),s=Object.assign(Object.assign({},n.req),{message:py(n.req.method.I,n.req.message),signal:t});return e(s).then(o=>(i(),o),r)}function HS(n){const e=yy(n.next,n.interceptors),[t,r,i]=vy(n),s=Object.assign(Object.assign({},n.req),{message:qS(n.req.method.I,n.req.message),signal:t});let o=!1;return t.addEventListener("abort",function(){var a,u;const c=n.req.message[Symbol.asyncIterator]();o||(a=c.throw)===null||a===void 0||a.call(c,this.reason).catch(()=>{}),(u=c.return)===null||u===void 0||u.call(c).catch(()=>{})}),e(s).then(a=>Object.assign(Object.assign({},a),{message:{[Symbol.asyncIterator](){const u=a.message[Symbol.asyncIterator]();return{next(){return u.next().then(c=>(c.done==!0&&(o=!0,i()),c),r)}}}}}),r)}function vy(n){const{signal:e,cleanup:t}=bS(n.timeoutMs),r=BS(n.signal,e);return[r.signal,function(s){const o=Y.from(e.aborted?hy(e):s);return r.abort(o),t(),Promise.reject(o)},function(){t(),r.abort()}]}function _S(){try{new Headers}catch{throw new Error("connect-web requires the fetch API. Are you running on an old version of Node.js? Node.js is not supported in Connect for Web - please stay tuned for Connect for Node.")}}function cm(n,e){const t=gy(n);if(t)throw e.forEach((r,i)=>{t.metadata.append(i,r)}),t;if(!e.has(ks)&&!n.has(ks))throw new Y("protocol error: missing status",q.Internal)}function fm(n,e,t,r){const i=new Headers(t??{});return i.set(zS,n?US:VS),i.set(MS,"1"),i.set(JS,"connect-es/1.6.1"),e!==void 0&&i.set(FS,`${e}m`),i}function GS(n){switch(n){case 400:return q.Internal;case 401:return q.Unauthenticated;case 403:return q.PermissionDenied;case 404:return q.Unimplemented;case 429:return q.Unavailable;case 502:return q.Unavailable;case 503:return q.Unavailable;case 504:return q.Unavailable;default:return q.Unknown}}function dm(n,e){var t;if(n>=200&&n<300)return{foundStatus:e.has(ks),headerError:gy(e)};throw new Y(decodeURIComponent((t=e.get(my))!==null&&t!==void 0?t:`HTTP ${n}`),GS(n),e)}var Ii=function(n){return this instanceof Ii?(this.v=n,this):new Ii(n)},YS=function(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i={},a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(p){return function(k){return Promise.resolve(k).then(p,h)}}function a(p,k){r[p]&&(i[p]=function(T){return new Promise(function(C,y){s.push([p,T,C,y])>1||u(p,T)})},k&&(i[p]=k(i[p])))}function u(p,k){try{c(r[p](k))}catch(T){m(s[0][3],T)}}function c(p){p.value instanceof Ii?Promise.resolve(p.value.v).then(d,h):m(s[0][2],p)}function d(p){u("next",p)}function h(p){u("throw",p)}function m(p,k){p(k),s.shift(),s.length&&u(s[0][0],s[0][1])}};function QS(n){var e;_S();const t=(e=n.useBinaryFormat)!==null&&e!==void 0?e:!0;return{async unary(r,i,s,o,a,u,c){var d;const{serialize:h,parse:m}=am(i,t,n.jsonOptions,n.binaryOptions);return o=o===void 0?n.defaultTimeoutMs:o<=0?void 0:o,await WS({interceptors:n.interceptors,signal:s,timeoutMs:o,req:{stream:!1,service:r,method:i,url:om(n.baseUrl,r,i),init:{method:"POST",credentials:(d=n.credentials)!==null&&d!==void 0?d:"same-origin",redirect:"error",mode:"cors"},header:fm(t,o,a),contextValues:c??im(),message:u},next:async p=>{var k;const C=await((k=n.fetch)!==null&&k!==void 0?k:globalThis.fetch)(p.url,Object.assign(Object.assign({},p.init),{headers:p.header,signal:p.signal,body:rm(0,h(p.message))})),{headerError:y}=dm(C.status,C.headers);if(!C.body)throw y!==void 0?y:"missing response body";const g=nm(C.body).getReader();let v,A;for(;;){const P=await g.read();if(P.done)break;const{flags:N,data:O}=P.value;if((N&tm)===tm)throw new Y("protocol error: received unsupported compressed output",q.Internal);if(N===Ju){if(v!==void 0)throw"extra trailer";v=sm(O);continue}if(A!==void 0)throw new Y("extra message",q.Unimplemented);A=m(O)}if(v===void 0)throw y!==void 0?y:new Y("missing trailer",C.headers.has(ks)?q.Unimplemented:q.Unknown);if(cm(v,C.headers),A===void 0)throw new Y("missing message",v.has(ks)?q.Unimplemented:q.Unknown);return{stream:!1,service:r,method:i,header:C.headers,message:A,trailer:v}}})},async stream(r,i,s,o,a,u,c){var d;const{serialize:h,parse:m}=am(i,t,n.jsonOptions,n.binaryOptions);function p(T,C,y,g,v){return YS(this,arguments,function*(){const P=nm(T).getReader();if(C){if(!(yield Ii(P.read())).done)throw"extra data for trailers-only";return yield Ii(void 0)}let N=!1;for(;;){const O=yield Ii(P.read());if(O.done)break;const{flags:R,data:M}=O.value;if((R&Ju)===Ju){if(N)throw"extra trailer";N=!0;const J=sm(M);cm(J,g),J.forEach((Fe,di)=>y.set(di,Fe));continue}if(N)throw"extra message";yield yield Ii(m(M))}if("throwIfAborted"in v&&v.throwIfAborted(),!N)throw"missing trailer"})}async function k(T){if(i.kind!=Je.ServerStreaming)throw"The fetch API does not support streaming request bodies";const C=await T[Symbol.asyncIterator]().next();if(C.done==!0)throw"missing request message";return rm(0,h(C.value))}return o=o===void 0?n.defaultTimeoutMs:o<=0?void 0:o,HS({interceptors:n.interceptors,signal:s,timeoutMs:o,req:{stream:!0,service:r,method:i,url:om(n.baseUrl,r,i),init:{method:"POST",credentials:(d=n.credentials)!==null&&d!==void 0?d:"same-origin",redirect:"error",mode:"cors"},header:fm(t,o,a),contextValues:c??im(),message:u},next:async T=>{var C;const g=await((C=n.fetch)!==null&&C!==void 0?C:globalThis.fetch)(T.url,Object.assign(Object.assign({},T.init),{headers:T.header,signal:T.signal,body:await k(T.message)})),{foundStatus:v,headerError:A}=dm(g.status,g.headers);if(A!=null)throw A;if(!g.body)throw"missing response body";const P=new Headers;return Object.assign(Object.assign({},T),{header:g.headers,trailer:P,message:p(g.body,v,P,g.headers,T.signal)})}})}}}var U=(n=>(n[n.NULL=0]="NULL",n[n.BOOLEAN=1]="BOOLEAN",n[n.INTEGER=2]="INTEGER",n[n.LONG=3]="LONG",n[n.DOUBLE=4]="DOUBLE",n[n.STRING=5]="STRING",n[n.BYTES=6]="BYTES",n[n.DATE=7]="DATE",n[n.JSON_OBJECT=8]="JSON_OBJECT",n[n.JSON_ARRAY=9]="JSON_ARRAY",n[n.TEXT=10]="TEXT",n[n.INTEGER_CNT=11]="INTEGER_CNT",n[n.LONG_CNT=12]="LONG_CNT",n[n.TREE=13]="TREE",n))(U||{});f.util.setEnumType(U,"yorkie.v1.ValueType",[{no:0,name:"VALUE_TYPE_NULL"},{no:1,name:"VALUE_TYPE_BOOLEAN"},{no:2,name:"VALUE_TYPE_INTEGER"},{no:3,name:"VALUE_TYPE_LONG"},{no:4,name:"VALUE_TYPE_DOUBLE"},{no:5,name:"VALUE_TYPE_STRING"},{no:6,name:"VALUE_TYPE_BYTES"},{no:7,name:"VALUE_TYPE_DATE"},{no:8,name:"VALUE_TYPE_JSON_OBJECT"},{no:9,name:"VALUE_TYPE_JSON_ARRAY"},{no:10,name:"VALUE_TYPE_TEXT"},{no:11,name:"VALUE_TYPE_INTEGER_CNT"},{no:12,name:"VALUE_TYPE_LONG_CNT"},{no:13,name:"VALUE_TYPE_TREE"}]);var xi=(n=>(n[n.DOCUMENT_CHANGED=0]="DOCUMENT_CHANGED",n[n.DOCUMENT_WATCHED=1]="DOCUMENT_WATCHED",n[n.DOCUMENT_UNWATCHED=2]="DOCUMENT_UNWATCHED",n[n.DOCUMENT_BROADCAST=3]="DOCUMENT_BROADCAST",n))(xi||{});f.util.setEnumType(xi,"yorkie.v1.DocEventType",[{no:0,name:"DOC_EVENT_TYPE_DOCUMENT_CHANGED"},{no:1,name:"DOC_EVENT_TYPE_DOCUMENT_WATCHED"},{no:2,name:"DOC_EVENT_TYPE_DOCUMENT_UNWATCHED"},{no:3,name:"DOC_EVENT_TYPE_DOCUMENT_BROADCAST"}]);const hn=class hn extends D{constructor(t){super();l(this,"root");l(this,"presences",{});f.util.initPartial(t,this)}static fromBinary(t,r){return new hn().fromBinary(t,r)}static fromJson(t,r){return new hn().fromJson(t,r)}static fromJsonString(t,r){return new hn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(hn,t,r)}};l(hn,"runtime",f),l(hn,"typeName","yorkie.v1.Snapshot"),l(hn,"fields",f.util.newFieldList(()=>[{no:1,name:"root",kind:"message",T:Ze},{no:2,name:"presences",kind:"map",K:9,V:{kind:"message",T:tu}}]));let $c=hn;var ht;let Fr=(ht=class extends D{constructor(t){super();l(this,"documentKey","");l(this,"checkpoint");l(this,"snapshot",new Uint8Array(0));l(this,"changes",[]);l(this,"minSyncedTicket");l(this,"isRemoved",!1);l(this,"versionVector");f.util.initPartial(t,this)}static fromBinary(t,r){return new ht().fromBinary(t,r)}static fromJson(t,r){return new ht().fromJson(t,r)}static fromJsonString(t,r){return new ht().fromJsonString(t,r)}static equals(t,r){return f.util.equals(ht,t,r)}},l(ht,"runtime",f),l(ht,"typeName","yorkie.v1.ChangePack"),l(ht,"fields",f.util.newFieldList(()=>[{no:1,name:"document_key",kind:"scalar",T:9},{no:2,name:"checkpoint",kind:"message",T:ky},{no:3,name:"snapshot",kind:"scalar",T:12},{no:4,name:"changes",kind:"message",T:wy,repeated:!0},{no:5,name:"min_synced_ticket",kind:"message",T:b},{no:6,name:"is_removed",kind:"scalar",T:8},{no:7,name:"version_vector",kind:"message",T:eu}])),ht);var mt;let wy=(mt=class extends D{constructor(t){super();l(this,"id");l(this,"message","");l(this,"operations",[]);l(this,"presenceChange");f.util.initPartial(t,this)}static fromBinary(t,r){return new mt().fromBinary(t,r)}static fromJson(t,r){return new mt().fromJson(t,r)}static fromJsonString(t,r){return new mt().fromJsonString(t,r)}static equals(t,r){return f.util.equals(mt,t,r)}},l(mt,"runtime",f),l(mt,"typeName","yorkie.v1.Change"),l(mt,"fields",f.util.newFieldList(()=>[{no:1,name:"id",kind:"message",T:Zl},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"operations",kind:"message",T:fd,repeated:!0},{no:4,name:"presence_change",kind:"message",T:Ro}])),mt);var gt;let Zl=(gt=class extends D{constructor(t){super();l(this,"clientSeq",0);l(this,"serverSeq",ne.zero);l(this,"lamport",ne.zero);l(this,"actorId",new Uint8Array(0));l(this,"versionVector");f.util.initPartial(t,this)}static fromBinary(t,r){return new gt().fromBinary(t,r)}static fromJson(t,r){return new gt().fromJson(t,r)}static fromJsonString(t,r){return new gt().fromJsonString(t,r)}static equals(t,r){return f.util.equals(gt,t,r)}},l(gt,"runtime",f),l(gt,"typeName","yorkie.v1.ChangeID"),l(gt,"fields",f.util.newFieldList(()=>[{no:1,name:"client_seq",kind:"scalar",T:13},{no:2,name:"server_seq",kind:"scalar",T:3},{no:3,name:"lamport",kind:"scalar",T:3},{no:4,name:"actor_id",kind:"scalar",T:12},{no:5,name:"version_vector",kind:"message",T:eu}])),gt);var pt;let eu=(pt=class extends D{constructor(t){super();l(this,"vector",{});f.util.initPartial(t,this)}static fromBinary(t,r){return new pt().fromBinary(t,r)}static fromJson(t,r){return new pt().fromJson(t,r)}static fromJsonString(t,r){return new pt().fromJsonString(t,r)}static equals(t,r){return f.util.equals(pt,t,r)}},l(pt,"runtime",f),l(pt,"typeName","yorkie.v1.VersionVector"),l(pt,"fields",f.util.newFieldList(()=>[{no:1,name:"vector",kind:"map",K:9,V:{kind:"scalar",T:3}}])),pt);var yt;let fd=(yt=class extends D{constructor(t){super();l(this,"body",{case:void 0});f.util.initPartial(t,this)}static fromBinary(t,r){return new yt().fromBinary(t,r)}static fromJson(t,r){return new yt().fromJson(t,r)}static fromJsonString(t,r){return new yt().fromJsonString(t,r)}static equals(t,r){return f.util.equals(yt,t,r)}},l(yt,"runtime",f),l(yt,"typeName","yorkie.v1.Operation"),l(yt,"fields",f.util.newFieldList(()=>[{no:1,name:"set",kind:"message",T:dl,oneof:"body"},{no:2,name:"add",kind:"message",T:hl,oneof:"body"},{no:3,name:"move",kind:"message",T:ml,oneof:"body"},{no:4,name:"remove",kind:"message",T:gl,oneof:"body"},{no:5,name:"edit",kind:"message",T:pl,oneof:"body"},{no:7,name:"style",kind:"message",T:yl,oneof:"body"},{no:8,name:"increase",kind:"message",T:vl,oneof:"body"},{no:9,name:"tree_edit",kind:"message",T:wl,oneof:"body"},{no:10,name:"tree_style",kind:"message",T:Sl,oneof:"body"},{no:11,name:"array_set",kind:"message",T:kl,oneof:"body"}])),yt);const mn=class mn extends D{constructor(t){super();l(this,"parentCreatedAt");l(this,"key","");l(this,"value");l(this,"executedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new mn().fromBinary(t,r)}static fromJson(t,r){return new mn().fromJson(t,r)}static fromJsonString(t,r){return new mn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(mn,t,r)}};l(mn,"runtime",f),l(mn,"typeName","yorkie.v1.Operation.Set"),l(mn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:b},{no:2,name:"key",kind:"scalar",T:9},{no:3,name:"value",kind:"message",T:dt},{no:4,name:"executed_at",kind:"message",T:b}]));let dl=mn;const gn=class gn extends D{constructor(t){super();l(this,"parentCreatedAt");l(this,"prevCreatedAt");l(this,"value");l(this,"executedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new gn().fromBinary(t,r)}static fromJson(t,r){return new gn().fromJson(t,r)}static fromJsonString(t,r){return new gn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(gn,t,r)}};l(gn,"runtime",f),l(gn,"typeName","yorkie.v1.Operation.Add"),l(gn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:b},{no:2,name:"prev_created_at",kind:"message",T:b},{no:3,name:"value",kind:"message",T:dt},{no:4,name:"executed_at",kind:"message",T:b}]));let hl=gn;const pn=class pn extends D{constructor(t){super();l(this,"parentCreatedAt");l(this,"prevCreatedAt");l(this,"createdAt");l(this,"executedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new pn().fromBinary(t,r)}static fromJson(t,r){return new pn().fromJson(t,r)}static fromJsonString(t,r){return new pn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(pn,t,r)}};l(pn,"runtime",f),l(pn,"typeName","yorkie.v1.Operation.Move"),l(pn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:b},{no:2,name:"prev_created_at",kind:"message",T:b},{no:3,name:"created_at",kind:"message",T:b},{no:4,name:"executed_at",kind:"message",T:b}]));let ml=pn;const yn=class yn extends D{constructor(t){super();l(this,"parentCreatedAt");l(this,"createdAt");l(this,"executedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new yn().fromBinary(t,r)}static fromJson(t,r){return new yn().fromJson(t,r)}static fromJsonString(t,r){return new yn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(yn,t,r)}};l(yn,"runtime",f),l(yn,"typeName","yorkie.v1.Operation.Remove"),l(yn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:b},{no:2,name:"created_at",kind:"message",T:b},{no:3,name:"executed_at",kind:"message",T:b}]));let gl=yn;const vn=class vn extends D{constructor(t){super();l(this,"parentCreatedAt");l(this,"from");l(this,"to");l(this,"createdAtMapByActor",{});l(this,"content","");l(this,"executedAt");l(this,"attributes",{});f.util.initPartial(t,this)}static fromBinary(t,r){return new vn().fromBinary(t,r)}static fromJson(t,r){return new vn().fromJson(t,r)}static fromJsonString(t,r){return new vn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(vn,t,r)}};l(vn,"runtime",f),l(vn,"typeName","yorkie.v1.Operation.Edit"),l(vn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:b},{no:2,name:"from",kind:"message",T:Bi},{no:3,name:"to",kind:"message",T:Bi},{no:4,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:b}},{no:5,name:"content",kind:"scalar",T:9},{no:6,name:"executed_at",kind:"message",T:b},{no:7,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}}]));let pl=vn;const wn=class wn extends D{constructor(t){super();l(this,"parentCreatedAt");l(this,"from");l(this,"to");l(this,"attributes",{});l(this,"executedAt");l(this,"createdAtMapByActor",{});f.util.initPartial(t,this)}static fromBinary(t,r){return new wn().fromBinary(t,r)}static fromJson(t,r){return new wn().fromJson(t,r)}static fromJsonString(t,r){return new wn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(wn,t,r)}};l(wn,"runtime",f),l(wn,"typeName","yorkie.v1.Operation.Style"),l(wn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:b},{no:2,name:"from",kind:"message",T:Bi},{no:3,name:"to",kind:"message",T:Bi},{no:4,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:5,name:"executed_at",kind:"message",T:b},{no:6,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:b}}]));let yl=wn;const Sn=class Sn extends D{constructor(t){super();l(this,"parentCreatedAt");l(this,"value");l(this,"executedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new Sn().fromBinary(t,r)}static fromJson(t,r){return new Sn().fromJson(t,r)}static fromJsonString(t,r){return new Sn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Sn,t,r)}};l(Sn,"runtime",f),l(Sn,"typeName","yorkie.v1.Operation.Increase"),l(Sn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:b},{no:2,name:"value",kind:"message",T:dt},{no:3,name:"executed_at",kind:"message",T:b}]));let vl=Sn;const kn=class kn extends D{constructor(t){super();l(this,"parentCreatedAt");l(this,"from");l(this,"to");l(this,"createdAtMapByActor",{});l(this,"contents",[]);l(this,"splitLevel",0);l(this,"executedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new kn().fromBinary(t,r)}static fromJson(t,r){return new kn().fromJson(t,r)}static fromJsonString(t,r){return new kn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(kn,t,r)}};l(kn,"runtime",f),l(kn,"typeName","yorkie.v1.Operation.TreeEdit"),l(kn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:b},{no:2,name:"from",kind:"message",T:Ri},{no:3,name:"to",kind:"message",T:Ri},{no:4,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:b}},{no:5,name:"contents",kind:"message",T:Dl,repeated:!0},{no:7,name:"split_level",kind:"scalar",T:5},{no:6,name:"executed_at",kind:"message",T:b}]));let wl=kn;const Tn=class Tn extends D{constructor(t){super();l(this,"parentCreatedAt");l(this,"from");l(this,"to");l(this,"attributes",{});l(this,"executedAt");l(this,"attributesToRemove",[]);l(this,"createdAtMapByActor",{});f.util.initPartial(t,this)}static fromBinary(t,r){return new Tn().fromBinary(t,r)}static fromJson(t,r){return new Tn().fromJson(t,r)}static fromJsonString(t,r){return new Tn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Tn,t,r)}};l(Tn,"runtime",f),l(Tn,"typeName","yorkie.v1.Operation.TreeStyle"),l(Tn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:b},{no:2,name:"from",kind:"message",T:Ri},{no:3,name:"to",kind:"message",T:Ri},{no:4,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:5,name:"executed_at",kind:"message",T:b},{no:6,name:"attributes_to_remove",kind:"scalar",T:9,repeated:!0},{no:7,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:b}}]));let Sl=Tn;const In=class In extends D{constructor(t){super();l(this,"parentCreatedAt");l(this,"createdAt");l(this,"value");l(this,"executedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new In().fromBinary(t,r)}static fromJson(t,r){return new In().fromJson(t,r)}static fromJsonString(t,r){return new In().fromJsonString(t,r)}static equals(t,r){return f.util.equals(In,t,r)}};l(In,"runtime",f),l(In,"typeName","yorkie.v1.Operation.ArraySet"),l(In,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:b},{no:2,name:"created_at",kind:"message",T:b},{no:3,name:"value",kind:"message",T:dt},{no:4,name:"executed_at",kind:"message",T:b}]));let kl=In;const An=class An extends D{constructor(t){super();l(this,"createdAt");l(this,"movedAt");l(this,"removedAt");l(this,"type",0);l(this,"value",new Uint8Array(0));f.util.initPartial(t,this)}static fromBinary(t,r){return new An().fromBinary(t,r)}static fromJson(t,r){return new An().fromJson(t,r)}static fromJsonString(t,r){return new An().fromJsonString(t,r)}static equals(t,r){return f.util.equals(An,t,r)}};l(An,"runtime",f),l(An,"typeName","yorkie.v1.JSONElementSimple"),l(An,"fields",f.util.newFieldList(()=>[{no:1,name:"created_at",kind:"message",T:b},{no:2,name:"moved_at",kind:"message",T:b},{no:3,name:"removed_at",kind:"message",T:b},{no:4,name:"type",kind:"enum",T:f.getEnumType(U)},{no:5,name:"value",kind:"scalar",T:12}]));let dt=An;const En=class En extends D{constructor(t){super();l(this,"body",{case:void 0});f.util.initPartial(t,this)}static fromBinary(t,r){return new En().fromBinary(t,r)}static fromJson(t,r){return new En().fromJson(t,r)}static fromJsonString(t,r){return new En().fromJsonString(t,r)}static equals(t,r){return f.util.equals(En,t,r)}};l(En,"runtime",f),l(En,"typeName","yorkie.v1.JSONElement"),l(En,"fields",f.util.newFieldList(()=>[{no:1,name:"json_object",kind:"message",T:Tl,oneof:"body"},{no:2,name:"json_array",kind:"message",T:Il,oneof:"body"},{no:3,name:"primitive",kind:"message",T:Al,oneof:"body"},{no:5,name:"text",kind:"message",T:El,oneof:"body"},{no:6,name:"counter",kind:"message",T:xl,oneof:"body"},{no:7,name:"tree",kind:"message",T:Nl,oneof:"body"}]));let Ze=En;const xn=class xn extends D{constructor(t){super();l(this,"nodes",[]);l(this,"createdAt");l(this,"movedAt");l(this,"removedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new xn().fromBinary(t,r)}static fromJson(t,r){return new xn().fromJson(t,r)}static fromJsonString(t,r){return new xn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(xn,t,r)}};l(xn,"runtime",f),l(xn,"typeName","yorkie.v1.JSONElement.JSONObject"),l(xn,"fields",f.util.newFieldList(()=>[{no:1,name:"nodes",kind:"message",T:Sy,repeated:!0},{no:2,name:"created_at",kind:"message",T:b},{no:3,name:"moved_at",kind:"message",T:b},{no:4,name:"removed_at",kind:"message",T:b}]));let Tl=xn;const Nn=class Nn extends D{constructor(t){super();l(this,"nodes",[]);l(this,"createdAt");l(this,"movedAt");l(this,"removedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new Nn().fromBinary(t,r)}static fromJson(t,r){return new Nn().fromJson(t,r)}static fromJsonString(t,r){return new Nn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Nn,t,r)}};l(Nn,"runtime",f),l(Nn,"typeName","yorkie.v1.JSONElement.JSONArray"),l(Nn,"fields",f.util.newFieldList(()=>[{no:1,name:"nodes",kind:"message",T:Cl,repeated:!0},{no:2,name:"created_at",kind:"message",T:b},{no:3,name:"moved_at",kind:"message",T:b},{no:4,name:"removed_at",kind:"message",T:b}]));let Il=Nn;const Cn=class Cn extends D{constructor(t){super();l(this,"type",0);l(this,"value",new Uint8Array(0));l(this,"createdAt");l(this,"movedAt");l(this,"removedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new Cn().fromBinary(t,r)}static fromJson(t,r){return new Cn().fromJson(t,r)}static fromJsonString(t,r){return new Cn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Cn,t,r)}};l(Cn,"runtime",f),l(Cn,"typeName","yorkie.v1.JSONElement.Primitive"),l(Cn,"fields",f.util.newFieldList(()=>[{no:1,name:"type",kind:"enum",T:f.getEnumType(U)},{no:2,name:"value",kind:"scalar",T:12},{no:3,name:"created_at",kind:"message",T:b},{no:4,name:"moved_at",kind:"message",T:b},{no:5,name:"removed_at",kind:"message",T:b}]));let Al=Cn;const Pn=class Pn extends D{constructor(t){super();l(this,"nodes",[]);l(this,"createdAt");l(this,"movedAt");l(this,"removedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new Pn().fromBinary(t,r)}static fromJson(t,r){return new Pn().fromJson(t,r)}static fromJsonString(t,r){return new Pn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Pn,t,r)}};l(Pn,"runtime",f),l(Pn,"typeName","yorkie.v1.JSONElement.Text"),l(Pn,"fields",f.util.newFieldList(()=>[{no:1,name:"nodes",kind:"message",T:Pl,repeated:!0},{no:2,name:"created_at",kind:"message",T:b},{no:3,name:"moved_at",kind:"message",T:b},{no:4,name:"removed_at",kind:"message",T:b}]));let El=Pn;const Dn=class Dn extends D{constructor(t){super();l(this,"type",0);l(this,"value",new Uint8Array(0));l(this,"createdAt");l(this,"movedAt");l(this,"removedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new Dn().fromBinary(t,r)}static fromJson(t,r){return new Dn().fromJson(t,r)}static fromJsonString(t,r){return new Dn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Dn,t,r)}};l(Dn,"runtime",f),l(Dn,"typeName","yorkie.v1.JSONElement.Counter"),l(Dn,"fields",f.util.newFieldList(()=>[{no:1,name:"type",kind:"enum",T:f.getEnumType(U)},{no:2,name:"value",kind:"scalar",T:12},{no:3,name:"created_at",kind:"message",T:b},{no:4,name:"moved_at",kind:"message",T:b},{no:5,name:"removed_at",kind:"message",T:b}]));let xl=Dn;const On=class On extends D{constructor(t){super();l(this,"nodes",[]);l(this,"createdAt");l(this,"movedAt");l(this,"removedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new On().fromBinary(t,r)}static fromJson(t,r){return new On().fromJson(t,r)}static fromJsonString(t,r){return new On().fromJsonString(t,r)}static equals(t,r){return f.util.equals(On,t,r)}};l(On,"runtime",f),l(On,"typeName","yorkie.v1.JSONElement.Tree"),l(On,"fields",f.util.newFieldList(()=>[{no:1,name:"nodes",kind:"message",T:Oo,repeated:!0},{no:2,name:"created_at",kind:"message",T:b},{no:3,name:"moved_at",kind:"message",T:b},{no:4,name:"removed_at",kind:"message",T:b}]));let Nl=On;var vt;let Sy=(vt=class extends D{constructor(t){super();l(this,"key","");l(this,"element");f.util.initPartial(t,this)}static fromBinary(t,r){return new vt().fromBinary(t,r)}static fromJson(t,r){return new vt().fromJson(t,r)}static fromJsonString(t,r){return new vt().fromJsonString(t,r)}static equals(t,r){return f.util.equals(vt,t,r)}},l(vt,"runtime",f),l(vt,"typeName","yorkie.v1.RHTNode"),l(vt,"fields",f.util.newFieldList(()=>[{no:1,name:"key",kind:"scalar",T:9},{no:2,name:"element",kind:"message",T:Ze}])),vt);const Wt=class Wt extends D{constructor(t){super();l(this,"next");l(this,"element");f.util.initPartial(t,this)}static fromBinary(t,r){return new Wt().fromBinary(t,r)}static fromJson(t,r){return new Wt().fromJson(t,r)}static fromJsonString(t,r){return new Wt().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Wt,t,r)}};l(Wt,"runtime",f),l(Wt,"typeName","yorkie.v1.RGANode"),l(Wt,"fields",f.util.newFieldList(()=>[{no:1,name:"next",kind:"message",T:Wt},{no:2,name:"element",kind:"message",T:Ze}]));let Cl=Wt;const Rn=class Rn extends D{constructor(t){super();l(this,"value","");l(this,"updatedAt");l(this,"isRemoved",!1);f.util.initPartial(t,this)}static fromBinary(t,r){return new Rn().fromBinary(t,r)}static fromJson(t,r){return new Rn().fromJson(t,r)}static fromJsonString(t,r){return new Rn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Rn,t,r)}};l(Rn,"runtime",f),l(Rn,"typeName","yorkie.v1.NodeAttr"),l(Rn,"fields",f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:9},{no:2,name:"updated_at",kind:"message",T:b},{no:3,name:"is_removed",kind:"scalar",T:8}]));let Ts=Rn;const Ln=class Ln extends D{constructor(t){super();l(this,"id");l(this,"value","");l(this,"removedAt");l(this,"insPrevId");l(this,"attributes",{});f.util.initPartial(t,this)}static fromBinary(t,r){return new Ln().fromBinary(t,r)}static fromJson(t,r){return new Ln().fromJson(t,r)}static fromJsonString(t,r){return new Ln().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Ln,t,r)}};l(Ln,"runtime",f),l(Ln,"typeName","yorkie.v1.TextNode"),l(Ln,"fields",f.util.newFieldList(()=>[{no:1,name:"id",kind:"message",T:Do},{no:2,name:"value",kind:"scalar",T:9},{no:3,name:"removed_at",kind:"message",T:b},{no:4,name:"ins_prev_id",kind:"message",T:Do},{no:5,name:"attributes",kind:"map",K:9,V:{kind:"message",T:Ts}}]));let Pl=Ln;const Bn=class Bn extends D{constructor(t){super();l(this,"createdAt");l(this,"offset",0);f.util.initPartial(t,this)}static fromBinary(t,r){return new Bn().fromBinary(t,r)}static fromJson(t,r){return new Bn().fromJson(t,r)}static fromJsonString(t,r){return new Bn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Bn,t,r)}};l(Bn,"runtime",f),l(Bn,"typeName","yorkie.v1.TextNodeID"),l(Bn,"fields",f.util.newFieldList(()=>[{no:1,name:"created_at",kind:"message",T:b},{no:2,name:"offset",kind:"scalar",T:5}]));let Do=Bn;const bn=class bn extends D{constructor(t){super();l(this,"id");l(this,"type","");l(this,"value","");l(this,"removedAt");l(this,"insPrevId");l(this,"insNextId");l(this,"depth",0);l(this,"attributes",{});f.util.initPartial(t,this)}static fromBinary(t,r){return new bn().fromBinary(t,r)}static fromJson(t,r){return new bn().fromJson(t,r)}static fromJsonString(t,r){return new bn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(bn,t,r)}};l(bn,"runtime",f),l(bn,"typeName","yorkie.v1.TreeNode"),l(bn,"fields",f.util.newFieldList(()=>[{no:1,name:"id",kind:"message",T:ri},{no:2,name:"type",kind:"scalar",T:9},{no:3,name:"value",kind:"scalar",T:9},{no:4,name:"removed_at",kind:"message",T:b},{no:5,name:"ins_prev_id",kind:"message",T:ri},{no:6,name:"ins_next_id",kind:"message",T:ri},{no:7,name:"depth",kind:"scalar",T:5},{no:8,name:"attributes",kind:"map",K:9,V:{kind:"message",T:Ts}}]));let Oo=bn;const zn=class zn extends D{constructor(t){super();l(this,"content",[]);f.util.initPartial(t,this)}static fromBinary(t,r){return new zn().fromBinary(t,r)}static fromJson(t,r){return new zn().fromJson(t,r)}static fromJsonString(t,r){return new zn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(zn,t,r)}};l(zn,"runtime",f),l(zn,"typeName","yorkie.v1.TreeNodes"),l(zn,"fields",f.util.newFieldList(()=>[{no:1,name:"content",kind:"message",T:Oo,repeated:!0}]));let Dl=zn;const Fn=class Fn extends D{constructor(t){super();l(this,"createdAt");l(this,"offset",0);f.util.initPartial(t,this)}static fromBinary(t,r){return new Fn().fromBinary(t,r)}static fromJson(t,r){return new Fn().fromJson(t,r)}static fromJsonString(t,r){return new Fn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Fn,t,r)}};l(Fn,"runtime",f),l(Fn,"typeName","yorkie.v1.TreeNodeID"),l(Fn,"fields",f.util.newFieldList(()=>[{no:1,name:"created_at",kind:"message",T:b},{no:2,name:"offset",kind:"scalar",T:5}]));let ri=Fn;const $n=class $n extends D{constructor(t){super();l(this,"parentId");l(this,"leftSiblingId");f.util.initPartial(t,this)}static fromBinary(t,r){return new $n().fromBinary(t,r)}static fromJson(t,r){return new $n().fromJson(t,r)}static fromJsonString(t,r){return new $n().fromJsonString(t,r)}static equals(t,r){return f.util.equals($n,t,r)}};l($n,"runtime",f),l($n,"typeName","yorkie.v1.TreePos"),l($n,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_id",kind:"message",T:ri},{no:2,name:"left_sibling_id",kind:"message",T:ri}]));let Ri=$n;const Jn=class Jn extends D{constructor(t){super();l(this,"id","");l(this,"authProvider","");l(this,"username","");l(this,"createdAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new Jn().fromBinary(t,r)}static fromJson(t,r){return new Jn().fromJson(t,r)}static fromJsonString(t,r){return new Jn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Jn,t,r)}};l(Jn,"runtime",f),l(Jn,"typeName","yorkie.v1.User"),l(Jn,"fields",f.util.newFieldList(()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"auth_provider",kind:"scalar",T:9},{no:3,name:"username",kind:"scalar",T:9},{no:4,name:"created_at",kind:"message",T:Ee}]));let hm=Jn;const Mn=class Mn extends D{constructor(t){super();l(this,"id","");l(this,"name","");l(this,"publicKey","");l(this,"secretKey","");l(this,"authWebhookUrl","");l(this,"authWebhookMethods",[]);l(this,"eventWebhookUrl","");l(this,"eventWebhookEvents",[]);l(this,"clientDeactivateThreshold","");l(this,"maxSubscribersPerDocument",0);l(this,"maxAttachmentsPerDocument",0);l(this,"maxSizePerDocument",0);l(this,"allowedOrigins",[]);l(this,"createdAt");l(this,"updatedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new Mn().fromBinary(t,r)}static fromJson(t,r){return new Mn().fromJson(t,r)}static fromJsonString(t,r){return new Mn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Mn,t,r)}};l(Mn,"runtime",f),l(Mn,"typeName","yorkie.v1.Project"),l(Mn,"fields",f.util.newFieldList(()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"public_key",kind:"scalar",T:9},{no:4,name:"secret_key",kind:"scalar",T:9},{no:5,name:"auth_webhook_url",kind:"scalar",T:9},{no:6,name:"auth_webhook_methods",kind:"scalar",T:9,repeated:!0},{no:7,name:"event_webhook_url",kind:"scalar",T:9},{no:8,name:"event_webhook_events",kind:"scalar",T:9,repeated:!0},{no:9,name:"client_deactivate_threshold",kind:"scalar",T:9},{no:10,name:"max_subscribers_per_document",kind:"scalar",T:5},{no:11,name:"max_attachments_per_document",kind:"scalar",T:5},{no:15,name:"max_size_per_document",kind:"scalar",T:5},{no:14,name:"allowed_origins",kind:"scalar",T:9,repeated:!0},{no:12,name:"created_at",kind:"message",T:Ee},{no:13,name:"updated_at",kind:"message",T:Ee}]));let mm=Mn;const Un=class Un extends D{constructor(t){super();l(this,"timestamp",ne.zero);l(this,"value",0);f.util.initPartial(t,this)}static fromBinary(t,r){return new Un().fromBinary(t,r)}static fromJson(t,r){return new Un().fromJson(t,r)}static fromJsonString(t,r){return new Un().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Un,t,r)}};l(Un,"runtime",f),l(Un,"typeName","yorkie.v1.MetricPoint"),l(Un,"fields",f.util.newFieldList(()=>[{no:1,name:"timestamp",kind:"scalar",T:3},{no:2,name:"value",kind:"scalar",T:5}]));let gm=Un;const Vn=class Vn extends D{constructor(t){super();l(this,"name");l(this,"authWebhookUrl");l(this,"authWebhookMethods");l(this,"eventWebhookUrl");l(this,"eventWebhookEvents");l(this,"clientDeactivateThreshold");l(this,"maxSubscribersPerDocument");l(this,"maxAttachmentsPerDocument");l(this,"maxSizePerDocument");l(this,"allowedOrigins");f.util.initPartial(t,this)}static fromBinary(t,r){return new Vn().fromBinary(t,r)}static fromJson(t,r){return new Vn().fromJson(t,r)}static fromJsonString(t,r){return new Vn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Vn,t,r)}};l(Vn,"runtime",f),l(Vn,"typeName","yorkie.v1.UpdatableProjectFields"),l(Vn,"fields",f.util.newFieldList(()=>[{no:1,name:"name",kind:"message",T:He},{no:2,name:"auth_webhook_url",kind:"message",T:He},{no:3,name:"auth_webhook_methods",kind:"message",T:Jc},{no:4,name:"event_webhook_url",kind:"message",T:He},{no:5,name:"event_webhook_events",kind:"message",T:Mc},{no:6,name:"client_deactivate_threshold",kind:"message",T:He},{no:7,name:"max_subscribers_per_document",kind:"message",T:nt},{no:8,name:"max_attachments_per_document",kind:"message",T:nt},{no:10,name:"max_size_per_document",kind:"message",T:nt},{no:9,name:"allowed_origins",kind:"message",T:Uc}]));let pm=Vn;const jn=class jn extends D{constructor(t){super();l(this,"methods",[]);f.util.initPartial(t,this)}static fromBinary(t,r){return new jn().fromBinary(t,r)}static fromJson(t,r){return new jn().fromJson(t,r)}static fromJsonString(t,r){return new jn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(jn,t,r)}};l(jn,"runtime",f),l(jn,"typeName","yorkie.v1.UpdatableProjectFields.AuthWebhookMethods"),l(jn,"fields",f.util.newFieldList(()=>[{no:1,name:"methods",kind:"scalar",T:9,repeated:!0}]));let Jc=jn;const qn=class qn extends D{constructor(t){super();l(this,"events",[]);f.util.initPartial(t,this)}static fromBinary(t,r){return new qn().fromBinary(t,r)}static fromJson(t,r){return new qn().fromJson(t,r)}static fromJsonString(t,r){return new qn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(qn,t,r)}};l(qn,"runtime",f),l(qn,"typeName","yorkie.v1.UpdatableProjectFields.EventWebhookEvents"),l(qn,"fields",f.util.newFieldList(()=>[{no:1,name:"events",kind:"scalar",T:9,repeated:!0}]));let Mc=qn;const Kn=class Kn extends D{constructor(t){super();l(this,"origins",[]);f.util.initPartial(t,this)}static fromBinary(t,r){return new Kn().fromBinary(t,r)}static fromJson(t,r){return new Kn().fromJson(t,r)}static fromJsonString(t,r){return new Kn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Kn,t,r)}};l(Kn,"runtime",f),l(Kn,"typeName","yorkie.v1.UpdatableProjectFields.AllowedOrigins"),l(Kn,"fields",f.util.newFieldList(()=>[{no:1,name:"origins",kind:"scalar",T:9,repeated:!0}]));let Uc=Kn;const Wn=class Wn extends D{constructor(t){super();l(this,"id","");l(this,"key","");l(this,"root","");l(this,"attachedClients",0);l(this,"documentSize");l(this,"schemaKey","");l(this,"presences",{});l(this,"createdAt");l(this,"accessedAt");l(this,"updatedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new Wn().fromBinary(t,r)}static fromJson(t,r){return new Wn().fromJson(t,r)}static fromJsonString(t,r){return new Wn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Wn,t,r)}};l(Wn,"runtime",f),l(Wn,"typeName","yorkie.v1.DocumentSummary"),l(Wn,"fields",f.util.newFieldList(()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"key",kind:"scalar",T:9},{no:3,name:"root",kind:"scalar",T:9},{no:7,name:"attached_clients",kind:"scalar",T:5},{no:8,name:"document_size",kind:"message",T:qc},{no:9,name:"schema_key",kind:"scalar",T:9},{no:10,name:"presences",kind:"map",K:9,V:{kind:"message",T:tu}},{no:4,name:"created_at",kind:"message",T:Ee},{no:5,name:"accessed_at",kind:"message",T:Ee},{no:6,name:"updated_at",kind:"message",T:Ee}]));let ym=Wn;const Hn=class Hn extends D{constructor(t){super();l(this,"type",0);l(this,"presence");f.util.initPartial(t,this)}static fromBinary(t,r){return new Hn().fromBinary(t,r)}static fromJson(t,r){return new Hn().fromJson(t,r)}static fromJsonString(t,r){return new Hn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Hn,t,r)}};l(Hn,"runtime",f),l(Hn,"typeName","yorkie.v1.PresenceChange"),l(Hn,"fields",f.util.newFieldList(()=>[{no:1,name:"type",kind:"enum",T:f.getEnumType(Li)},{no:2,name:"presence",kind:"message",T:tu}]));let Ro=Hn;var Li=(n=>(n[n.UNSPECIFIED=0]="UNSPECIFIED",n[n.PUT=1]="PUT",n[n.DELETE=2]="DELETE",n[n.CLEAR=3]="CLEAR",n))(Li||{});f.util.setEnumType(Li,"yorkie.v1.PresenceChange.ChangeType",[{no:0,name:"CHANGE_TYPE_UNSPECIFIED"},{no:1,name:"CHANGE_TYPE_PUT"},{no:2,name:"CHANGE_TYPE_DELETE"},{no:3,name:"CHANGE_TYPE_CLEAR"}]);var wt;let tu=(wt=class extends D{constructor(t){super();l(this,"data",{});f.util.initPartial(t,this)}static fromBinary(t,r){return new wt().fromBinary(t,r)}static fromJson(t,r){return new wt().fromJson(t,r)}static fromJsonString(t,r){return new wt().fromJsonString(t,r)}static equals(t,r){return f.util.equals(wt,t,r)}},l(wt,"runtime",f),l(wt,"typeName","yorkie.v1.Presence"),l(wt,"fields",f.util.newFieldList(()=>[{no:1,name:"data",kind:"map",K:9,V:{kind:"scalar",T:9}}])),wt);var St;let ky=(St=class extends D{constructor(t){super();l(this,"serverSeq",ne.zero);l(this,"clientSeq",0);f.util.initPartial(t,this)}static fromBinary(t,r){return new St().fromBinary(t,r)}static fromJson(t,r){return new St().fromJson(t,r)}static fromJsonString(t,r){return new St().fromJsonString(t,r)}static equals(t,r){return f.util.equals(St,t,r)}},l(St,"runtime",f),l(St,"typeName","yorkie.v1.Checkpoint"),l(St,"fields",f.util.newFieldList(()=>[{no:1,name:"server_seq",kind:"scalar",T:3},{no:2,name:"client_seq",kind:"scalar",T:13}])),St);const _n=class _n extends D{constructor(t){super();l(this,"createdAt");l(this,"offset",0);l(this,"relativeOffset",0);f.util.initPartial(t,this)}static fromBinary(t,r){return new _n().fromBinary(t,r)}static fromJson(t,r){return new _n().fromJson(t,r)}static fromJsonString(t,r){return new _n().fromJsonString(t,r)}static equals(t,r){return f.util.equals(_n,t,r)}};l(_n,"runtime",f),l(_n,"typeName","yorkie.v1.TextNodePos"),l(_n,"fields",f.util.newFieldList(()=>[{no:1,name:"created_at",kind:"message",T:b},{no:2,name:"offset",kind:"scalar",T:5},{no:3,name:"relative_offset",kind:"scalar",T:5}]));let Bi=_n;var kt;let b=(kt=class extends D{constructor(t){super();l(this,"lamport",ne.zero);l(this,"delimiter",0);l(this,"actorId",new Uint8Array(0));f.util.initPartial(t,this)}static fromBinary(t,r){return new kt().fromBinary(t,r)}static fromJson(t,r){return new kt().fromJson(t,r)}static fromJsonString(t,r){return new kt().fromJsonString(t,r)}static equals(t,r){return f.util.equals(kt,t,r)}},l(kt,"runtime",f),l(kt,"typeName","yorkie.v1.TimeTicket"),l(kt,"fields",f.util.newFieldList(()=>[{no:1,name:"lamport",kind:"scalar",T:3},{no:2,name:"delimiter",kind:"scalar",T:13},{no:3,name:"actor_id",kind:"scalar",T:12}])),kt);const Gn=class Gn extends D{constructor(t){super();l(this,"topic","");l(this,"payload",new Uint8Array(0));f.util.initPartial(t,this)}static fromBinary(t,r){return new Gn().fromBinary(t,r)}static fromJson(t,r){return new Gn().fromJson(t,r)}static fromJsonString(t,r){return new Gn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Gn,t,r)}};l(Gn,"runtime",f),l(Gn,"typeName","yorkie.v1.DocEventBody"),l(Gn,"fields",f.util.newFieldList(()=>[{no:1,name:"topic",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:12}]));let Vc=Gn;const Yn=class Yn extends D{constructor(t){super();l(this,"type",0);l(this,"publisher","");l(this,"body");f.util.initPartial(t,this)}static fromBinary(t,r){return new Yn().fromBinary(t,r)}static fromJson(t,r){return new Yn().fromJson(t,r)}static fromJsonString(t,r){return new Yn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Yn,t,r)}};l(Yn,"runtime",f),l(Yn,"typeName","yorkie.v1.DocEvent"),l(Yn,"fields",f.util.newFieldList(()=>[{no:1,name:"type",kind:"enum",T:f.getEnumType(xi)},{no:2,name:"publisher",kind:"scalar",T:9},{no:3,name:"body",kind:"message",T:Vc}]));let jc=Yn;const Qn=class Qn extends D{constructor(t){super();l(this,"data",0);l(this,"meta",0);f.util.initPartial(t,this)}static fromBinary(t,r){return new Qn().fromBinary(t,r)}static fromJson(t,r){return new Qn().fromJson(t,r)}static fromJsonString(t,r){return new Qn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Qn,t,r)}};l(Qn,"runtime",f),l(Qn,"typeName","yorkie.v1.DataSize"),l(Qn,"fields",f.util.newFieldList(()=>[{no:1,name:"data",kind:"scalar",T:5},{no:2,name:"meta",kind:"scalar",T:5}]));let Ol=Qn;const Xn=class Xn extends D{constructor(t){super();l(this,"live");l(this,"gc");f.util.initPartial(t,this)}static fromBinary(t,r){return new Xn().fromBinary(t,r)}static fromJson(t,r){return new Xn().fromJson(t,r)}static fromJsonString(t,r){return new Xn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Xn,t,r)}};l(Xn,"runtime",f),l(Xn,"typeName","yorkie.v1.DocSize"),l(Xn,"fields",f.util.newFieldList(()=>[{no:1,name:"live",kind:"message",T:Ol},{no:2,name:"gc",kind:"message",T:Ol}]));let qc=Xn;const Zn=class Zn extends D{constructor(t){super();l(this,"id","");l(this,"name","");l(this,"version",0);l(this,"body","");l(this,"rules",[]);l(this,"createdAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new Zn().fromBinary(t,r)}static fromJson(t,r){return new Zn().fromJson(t,r)}static fromJsonString(t,r){return new Zn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Zn,t,r)}};l(Zn,"runtime",f),l(Zn,"typeName","yorkie.v1.Schema"),l(Zn,"fields",f.util.newFieldList(()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"version",kind:"scalar",T:5},{no:4,name:"body",kind:"scalar",T:9},{no:5,name:"rules",kind:"message",T:Rl,repeated:!0},{no:6,name:"created_at",kind:"message",T:Ee}]));let vm=Zn;const er=class er extends D{constructor(t){super();l(this,"path","");l(this,"type","");f.util.initPartial(t,this)}static fromBinary(t,r){return new er().fromBinary(t,r)}static fromJson(t,r){return new er().fromJson(t,r)}static fromJsonString(t,r){return new er().fromJsonString(t,r)}static equals(t,r){return f.util.equals(er,t,r)}};l(er,"runtime",f),l(er,"typeName","yorkie.v1.Rule"),l(er,"fields",f.util.newFieldList(()=>[{no:1,name:"path",kind:"scalar",T:9},{no:2,name:"type",kind:"scalar",T:9}]));let Rl=er;const tr=class tr extends D{constructor(t){super();l(this,"clientKey","");l(this,"metadata",{});f.util.initPartial(t,this)}static fromBinary(t,r){return new tr().fromBinary(t,r)}static fromJson(t,r){return new tr().fromJson(t,r)}static fromJsonString(t,r){return new tr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(tr,t,r)}};l(tr,"runtime",f),l(tr,"typeName","yorkie.v1.ActivateClientRequest"),l(tr,"fields",f.util.newFieldList(()=>[{no:1,name:"client_key",kind:"scalar",T:9},{no:2,name:"metadata",kind:"map",K:9,V:{kind:"scalar",T:9}}]));let Kc=tr;const nr=class nr extends D{constructor(t){super();l(this,"clientId","");f.util.initPartial(t,this)}static fromBinary(t,r){return new nr().fromBinary(t,r)}static fromJson(t,r){return new nr().fromJson(t,r)}static fromJsonString(t,r){return new nr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(nr,t,r)}};l(nr,"runtime",f),l(nr,"typeName","yorkie.v1.ActivateClientResponse"),l(nr,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9}]));let Wc=nr;const rr=class rr extends D{constructor(t){super();l(this,"clientId","");f.util.initPartial(t,this)}static fromBinary(t,r){return new rr().fromBinary(t,r)}static fromJson(t,r){return new rr().fromJson(t,r)}static fromJsonString(t,r){return new rr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(rr,t,r)}};l(rr,"runtime",f),l(rr,"typeName","yorkie.v1.DeactivateClientRequest"),l(rr,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9}]));let Hc=rr;const ir=class ir extends D{constructor(e){super(),f.util.initPartial(e,this)}static fromBinary(e,t){return new ir().fromBinary(e,t)}static fromJson(e,t){return new ir().fromJson(e,t)}static fromJsonString(e,t){return new ir().fromJsonString(e,t)}static equals(e,t){return f.util.equals(ir,e,t)}};l(ir,"runtime",f),l(ir,"typeName","yorkie.v1.DeactivateClientResponse"),l(ir,"fields",f.util.newFieldList(()=>[]));let _c=ir;const sr=class sr extends D{constructor(t){super();l(this,"clientId","");l(this,"changePack");l(this,"schemaKey","");f.util.initPartial(t,this)}static fromBinary(t,r){return new sr().fromBinary(t,r)}static fromJson(t,r){return new sr().fromJson(t,r)}static fromJsonString(t,r){return new sr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(sr,t,r)}};l(sr,"runtime",f),l(sr,"typeName","yorkie.v1.AttachDocumentRequest"),l(sr,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"change_pack",kind:"message",T:Fr},{no:3,name:"schema_key",kind:"scalar",T:9}]));let Gc=sr;const or=class or extends D{constructor(t){super();l(this,"documentId","");l(this,"changePack");l(this,"maxSizePerDocument",0);l(this,"schemaRules",[]);f.util.initPartial(t,this)}static fromBinary(t,r){return new or().fromBinary(t,r)}static fromJson(t,r){return new or().fromJson(t,r)}static fromJsonString(t,r){return new or().fromJsonString(t,r)}static equals(t,r){return f.util.equals(or,t,r)}};l(or,"runtime",f),l(or,"typeName","yorkie.v1.AttachDocumentResponse"),l(or,"fields",f.util.newFieldList(()=>[{no:1,name:"document_id",kind:"scalar",T:9},{no:2,name:"change_pack",kind:"message",T:Fr},{no:3,name:"max_size_per_document",kind:"scalar",T:5},{no:4,name:"schema_rules",kind:"message",T:Rl,repeated:!0}]));let Yc=or;const ar=class ar extends D{constructor(t){super();l(this,"clientId","");l(this,"documentId","");l(this,"changePack");l(this,"removeIfNotAttached",!1);f.util.initPartial(t,this)}static fromBinary(t,r){return new ar().fromBinary(t,r)}static fromJson(t,r){return new ar().fromJson(t,r)}static fromJsonString(t,r){return new ar().fromJsonString(t,r)}static equals(t,r){return f.util.equals(ar,t,r)}};l(ar,"runtime",f),l(ar,"typeName","yorkie.v1.DetachDocumentRequest"),l(ar,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:Fr},{no:4,name:"remove_if_not_attached",kind:"scalar",T:8}]));let Qc=ar;const lr=class lr extends D{constructor(t){super();l(this,"changePack");f.util.initPartial(t,this)}static fromBinary(t,r){return new lr().fromBinary(t,r)}static fromJson(t,r){return new lr().fromJson(t,r)}static fromJsonString(t,r){return new lr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(lr,t,r)}};l(lr,"runtime",f),l(lr,"typeName","yorkie.v1.DetachDocumentResponse"),l(lr,"fields",f.util.newFieldList(()=>[{no:2,name:"change_pack",kind:"message",T:Fr}]));let Xc=lr;const ur=class ur extends D{constructor(t){super();l(this,"clientId","");l(this,"documentId","");f.util.initPartial(t,this)}static fromBinary(t,r){return new ur().fromBinary(t,r)}static fromJson(t,r){return new ur().fromJson(t,r)}static fromJsonString(t,r){return new ur().fromJsonString(t,r)}static equals(t,r){return f.util.equals(ur,t,r)}};l(ur,"runtime",f),l(ur,"typeName","yorkie.v1.WatchDocumentRequest"),l(ur,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9}]));let Zc=ur;const cr=class cr extends D{constructor(t){super();l(this,"body",{case:void 0});f.util.initPartial(t,this)}static fromBinary(t,r){return new cr().fromBinary(t,r)}static fromJson(t,r){return new cr().fromJson(t,r)}static fromJsonString(t,r){return new cr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(cr,t,r)}};l(cr,"runtime",f),l(cr,"typeName","yorkie.v1.WatchDocumentResponse"),l(cr,"fields",f.util.newFieldList(()=>[{no:1,name:"initialization",kind:"message",T:tf,oneof:"body"},{no:2,name:"event",kind:"message",T:jc,oneof:"body"}]));let ef=cr;const fr=class fr extends D{constructor(t){super();l(this,"clientIds",[]);f.util.initPartial(t,this)}static fromBinary(t,r){return new fr().fromBinary(t,r)}static fromJson(t,r){return new fr().fromJson(t,r)}static fromJsonString(t,r){return new fr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(fr,t,r)}};l(fr,"runtime",f),l(fr,"typeName","yorkie.v1.WatchDocumentResponse.Initialization"),l(fr,"fields",f.util.newFieldList(()=>[{no:1,name:"client_ids",kind:"scalar",T:9,repeated:!0}]));let tf=fr;const dr=class dr extends D{constructor(t){super();l(this,"clientId","");l(this,"documentId","");l(this,"changePack");f.util.initPartial(t,this)}static fromBinary(t,r){return new dr().fromBinary(t,r)}static fromJson(t,r){return new dr().fromJson(t,r)}static fromJsonString(t,r){return new dr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(dr,t,r)}};l(dr,"runtime",f),l(dr,"typeName","yorkie.v1.RemoveDocumentRequest"),l(dr,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:Fr}]));let nf=dr;const hr=class hr extends D{constructor(t){super();l(this,"changePack");f.util.initPartial(t,this)}static fromBinary(t,r){return new hr().fromBinary(t,r)}static fromJson(t,r){return new hr().fromJson(t,r)}static fromJsonString(t,r){return new hr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(hr,t,r)}};l(hr,"runtime",f),l(hr,"typeName","yorkie.v1.RemoveDocumentResponse"),l(hr,"fields",f.util.newFieldList(()=>[{no:1,name:"change_pack",kind:"message",T:Fr}]));let rf=hr;const mr=class mr extends D{constructor(t){super();l(this,"clientId","");l(this,"documentId","");l(this,"changePack");l(this,"pushOnly",!1);f.util.initPartial(t,this)}static fromBinary(t,r){return new mr().fromBinary(t,r)}static fromJson(t,r){return new mr().fromJson(t,r)}static fromJsonString(t,r){return new mr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(mr,t,r)}};l(mr,"runtime",f),l(mr,"typeName","yorkie.v1.PushPullChangesRequest"),l(mr,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:Fr},{no:4,name:"push_only",kind:"scalar",T:8}]));let sf=mr;const gr=class gr extends D{constructor(t){super();l(this,"changePack");f.util.initPartial(t,this)}static fromBinary(t,r){return new gr().fromBinary(t,r)}static fromJson(t,r){return new gr().fromJson(t,r)}static fromJsonString(t,r){return new gr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(gr,t,r)}};l(gr,"runtime",f),l(gr,"typeName","yorkie.v1.PushPullChangesResponse"),l(gr,"fields",f.util.newFieldList(()=>[{no:1,name:"change_pack",kind:"message",T:Fr}]));let of=gr;const pr=class pr extends D{constructor(t){super();l(this,"clientId","");l(this,"documentId","");l(this,"topic","");l(this,"payload",new Uint8Array(0));f.util.initPartial(t,this)}static fromBinary(t,r){return new pr().fromBinary(t,r)}static fromJson(t,r){return new pr().fromJson(t,r)}static fromJsonString(t,r){return new pr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(pr,t,r)}};l(pr,"runtime",f),l(pr,"typeName","yorkie.v1.BroadcastRequest"),l(pr,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"topic",kind:"scalar",T:9},{no:4,name:"payload",kind:"scalar",T:12}]));let af=pr;const yr=class yr extends D{constructor(e){super(),f.util.initPartial(e,this)}static fromBinary(e,t){return new yr().fromBinary(e,t)}static fromJson(e,t){return new yr().fromJson(e,t)}static fromJsonString(e,t){return new yr().fromJsonString(e,t)}static equals(e,t){return f.util.equals(yr,e,t)}};l(yr,"runtime",f),l(yr,"typeName","yorkie.v1.BroadcastResponse"),l(yr,"fields",f.util.newFieldList(()=>[]));let lf=yr;const XS={typeName:"yorkie.v1.YorkieService",methods:{activateClient:{name:"ActivateClient",I:Kc,O:Wc,kind:Je.Unary},deactivateClient:{name:"DeactivateClient",I:Hc,O:_c,kind:Je.Unary},attachDocument:{name:"AttachDocument",I:Gc,O:Yc,kind:Je.Unary},detachDocument:{name:"DetachDocument",I:Qc,O:Xc,kind:Je.Unary},removeDocument:{name:"RemoveDocument",I:nf,O:rf,kind:Je.Unary},pushPullChanges:{name:"PushPullChanges",I:sf,O:of,kind:Je.Unary},watchDocument:{name:"WatchDocument",I:Zc,O:ef,kind:Je.ServerStreaming},broadcast:{name:"Broadcast",I:af,O:lf,kind:Je.Unary}}},ZS=f.makeMessageType("google.rpc.ErrorInfo",()=>[{no:1,name:"reason",kind:"scalar",T:9},{no:2,name:"domain",kind:"scalar",T:9},{no:3,name:"metadata",kind:"map",K:9,V:{kind:"scalar",T:9}}]);f.makeMessageType("google.rpc.RetryInfo",()=>[{no:1,name:"retry_delay",kind:"message",T:Ir}]);f.makeMessageType("google.rpc.DebugInfo",()=>[{no:1,name:"stack_entries",kind:"scalar",T:9,repeated:!0},{no:2,name:"detail",kind:"scalar",T:9}]);f.makeMessageType("google.rpc.QuotaFailure",()=>[{no:1,name:"violations",kind:"message",T:e1,repeated:!0}]);const e1=f.makeMessageType("google.rpc.QuotaFailure.Violation",()=>[{no:1,name:"subject",kind:"scalar",T:9},{no:2,name:"description",kind:"scalar",T:9},{no:3,name:"api_service",kind:"scalar",T:9},{no:4,name:"quota_metric",kind:"scalar",T:9},{no:5,name:"quota_id",kind:"scalar",T:9},{no:6,name:"quota_dimensions",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:7,name:"quota_value",kind:"scalar",T:3},{no:8,name:"future_quota_value",kind:"scalar",T:3,opt:!0}],{localName:"QuotaFailure_Violation"});f.makeMessageType("google.rpc.PreconditionFailure",()=>[{no:1,name:"violations",kind:"message",T:t1,repeated:!0}]);const t1=f.makeMessageType("google.rpc.PreconditionFailure.Violation",()=>[{no:1,name:"type",kind:"scalar",T:9},{no:2,name:"subject",kind:"scalar",T:9},{no:3,name:"description",kind:"scalar",T:9}],{localName:"PreconditionFailure_Violation"});f.makeMessageType("google.rpc.BadRequest",()=>[{no:1,name:"field_violations",kind:"message",T:n1,repeated:!0}]);const n1=f.makeMessageType("google.rpc.BadRequest.FieldViolation",()=>[{no:1,name:"field",kind:"scalar",T:9},{no:2,name:"description",kind:"scalar",T:9},{no:3,name:"reason",kind:"scalar",T:9},{no:4,name:"localized_message",kind:"message",T:i1}],{localName:"BadRequest_FieldViolation"});f.makeMessageType("google.rpc.RequestInfo",()=>[{no:1,name:"request_id",kind:"scalar",T:9},{no:2,name:"serving_data",kind:"scalar",T:9}]);f.makeMessageType("google.rpc.ResourceInfo",()=>[{no:1,name:"resource_type",kind:"scalar",T:9},{no:2,name:"resource_name",kind:"scalar",T:9},{no:3,name:"owner",kind:"scalar",T:9},{no:4,name:"description",kind:"scalar",T:9}]);f.makeMessageType("google.rpc.Help",()=>[{no:1,name:"links",kind:"message",T:r1,repeated:!0}]);const r1=f.makeMessageType("google.rpc.Help.Link",()=>[{no:1,name:"description",kind:"scalar",T:9},{no:2,name:"url",kind:"scalar",T:9}],{localName:"Help_Link"}),i1=f.makeMessageType("google.rpc.LocalizedMessage",()=>[{no:1,name:"locale",kind:"scalar",T:9},{no:2,name:"message",kind:"scalar",T:9}]);var w=(n=>(n.Ok="ok",n.ErrClientNotActivated="ErrClientNotActivated",n.ErrClientNotFound="ErrClientNotFound",n.ErrUnimplemented="ErrUnimplemented",n.ErrInvalidType="ErrInvalidType",n.ErrDummy="ErrDummy",n.ErrDocumentNotAttached="ErrDocumentNotAttached",n.ErrDocumentNotDetached="ErrDocumentNotDetached",n.ErrDocumentRemoved="ErrDocumentRemoved",n.ErrDocumentSizeExceedsLimit="ErrDocumentSizeExceedsLimit",n.ErrDocumentSchemaValidationFailed="ErrDocumentSchemaValidationFailed",n.ErrInvalidObjectKey="ErrInvalidObjectKey",n.ErrInvalidArgument="ErrInvalidArgument",n.ErrNotInitialized="ErrNotInitialized",n.ErrNotReady="ErrNotReady",n.ErrRefused="ErrRefused",n.ErrContextNotProvided="ErrContextNotProvided",n.ErrPermissionDenied="ErrPermissionDenied",n.ErrUnauthenticated="ErrUnauthenticated",n.ErrTooManySubscribers="ErrTooManySubscribers",n.ErrTooManyAttachments="ErrTooManyAttachments",n))(w||{});class S extends Error{constructor(t,r){super(r);l(this,"name","YorkieError");l(this,"stack");this.code=t,this.message=r,this.toString=()=>`[code=${this.code}]: ${this.message}`}}var cn=(n=>(n.Put="put",n.Clear="clear",n))(cn||{});const nu="000000000000000000000000",an=24;class xt{constructor(e,t,r){l(this,"lamport");l(this,"delimiter");l(this,"actorID");this.lamport=e,this.delimiter=t,this.actorID=r}static of(e,t,r){return new xt(e,t,r)}static fromStruct(e){return xt.of(BigInt(e.lamport),e.delimiter,e.actorID)}toIDString(){return`${this.lamport.toString()}:${this.actorID}:${this.delimiter}`}toStruct(){return{lamport:this.getLamportAsString(),delimiter:this.getDelimiter(),actorID:this.getActorID()}}toTestString(){return`${this.lamport.toString()}:${this.actorID.slice(-2)}:${this.delimiter}`}setActor(e){return new xt(this.lamport,this.delimiter,e)}getLamportAsString(){return this.lamport.toString()}getLamport(){return this.lamport}getDelimiter(){return this.delimiter}getActorID(){return this.actorID}after(e){return this.compare(e)>0}equals(e){return this.compare(e)===0}compare(e){if(this.lamport>e.lamport)return 1;if(e.lamport>this.lamport)return-1;const t=this.actorID.localeCompare(e.actorID);return t!==0?t:this.delimiter>e.delimiter?1:e.delimiter>this.delimiter?-1:0}}const uf=0n,Ty=0,ao=9223372036854775807n,Is=new xt(uf,Ty,nu);function rn(n){return n.replace(/["'\\\n\r\f\b\t\u2028\u2029]/g,function(e){switch(e){case'"':case"\\":return"\\"+e;case`
`:return"\\n";case"\r":return"\\r";case"\f":return"\\f";case"\b":return"\\b";case"	":return"\\t";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:return e}})}class qo{constructor(e){l(this,"createdAt");l(this,"movedAt");l(this,"removedAt");this.createdAt=e}getCreatedAt(){return this.createdAt}getID(){return this.createdAt}getMovedAt(){return this.movedAt}getRemovedAt(){return this.removedAt}getPositionedAt(){return this.movedAt?this.movedAt:this.createdAt}setMovedAt(e){return!this.movedAt||e&&e.after(this.movedAt)?(this.movedAt=e,!0):!1}setRemovedAt(e){this.removedAt=e}remove(e){return e&&e.after(this.createdAt)&&(!this.removedAt||e.after(this.removedAt))?(this.removedAt=e,!0):!1}isRemoved(){return!!this.removedAt}getMetaUsage(){let e=0;return this.getCreatedAt()&&(e+=an),this.getMovedAt()&&(e+=an),this.getRemovedAt()&&(e+=an),e}}class ii extends qo{constructor(e){super(e)}}class dd{constructor(e,t){l(this,"strKey");l(this,"value");this.strKey=e,this.value=t}static of(e,t){return new dd(e,t)}isRemoved(){return this.value.isRemoved()}getStrKey(){return this.strKey}getValue(){return this.value}remove(e){return this.value.remove(e)}}class Lo{constructor(){l(this,"nodeMapByKey");l(this,"nodeMapByCreatedAt");this.nodeMapByKey=new Map,this.nodeMapByCreatedAt=new Map}static create(){return new Lo}set(e,t,r){let i;const s=this.nodeMapByKey.get(e);s!=null&&!s.isRemoved()&&s.remove(r)&&(i=s.getValue());const o=dd.of(e,t);return this.nodeMapByCreatedAt.set(t.getCreatedAt().toIDString(),o),(s==null||r.after(s.getValue().getPositionedAt()))&&(this.nodeMapByKey.set(e,o),t.setMovedAt(r)),i}delete(e,t){if(!this.nodeMapByCreatedAt.has(e.toIDString()))throw new S(w.ErrInvalidArgument,`fail to find ${e.toIDString()}`);const r=this.nodeMapByCreatedAt.get(e.toIDString());return r.remove(t),r.getValue()}subPathOf(e){const t=this.nodeMapByCreatedAt.get(e.toIDString());if(t)return t.getStrKey()}purge(e){const t=this.nodeMapByCreatedAt.get(e.getCreatedAt().toIDString());if(!t)throw new S(w.ErrInvalidArgument,`fail to find ${e.getCreatedAt().toIDString()}`);const r=this.nodeMapByKey.get(t.getStrKey());t===r&&this.nodeMapByKey.delete(r.getStrKey()),this.nodeMapByCreatedAt.delete(t.getValue().getCreatedAt().toIDString())}deleteByKey(e,t){const r=this.nodeMapByKey.get(e);if(r!=null&&r.remove(t))return r.getValue()}has(e){const t=this.nodeMapByKey.get(e);return t==null?!1:!t.isRemoved()}getByID(e){return this.nodeMapByCreatedAt.get(e.toIDString())}get(e){const t=this.nodeMapByKey.get(e);if(!(!t||t.isRemoved()))return t}*[Symbol.iterator](){for(const[,e]of this.nodeMapByKey)yield e}}class Le extends ii{constructor(t,r){super(t);l(this,"memberNodes");this.memberNodes=r}static create(t,r){if(!r)return new Le(t,Lo.create());const i=Lo.create();for(const[s,o]of Object.entries(r))i.set(s,o.deepcopy(),o.getCreatedAt());return new Le(t,i)}subPathOf(t){return this.memberNodes.subPathOf(t)}purge(t){this.memberNodes.purge(t)}set(t,r,i){return this.memberNodes.set(t,r,i)}delete(t,r){return this.memberNodes.delete(t,r)}deleteByKey(t,r){return this.memberNodes.deleteByKey(t,r)}get(t){const r=this.memberNodes.get(t);return r==null?void 0:r.getValue()}getByID(t){const r=this.memberNodes.getByID(t);return r==null?void 0:r.getValue()}has(t){return this.memberNodes.has(t)}getDataSize(){return{data:0,meta:this.getMetaUsage()}}toJSON(){const t=[];for(const[r,i]of this)t.push(`"${rn(r)}":${i.toJSON()}`);return`{${t.join(",")}}`}toJS(){return JSON.parse(this.toJSON())}toJSForTest(){const t={};for(const[r,i]of this){const{createdAt:s,value:o,type:a}=i.toJSForTest();t[r]={key:r,createdAt:s,value:o,type:a}}return{createdAt:this.getCreatedAt().toTestString(),value:t,type:"YORKIE_OBJECT"}}getKeys(){const t=Array();for(const[r]of this)t.push(r);return t}toSortedJSON(){var i;const t=Array();for(const[s]of this)t.push(s);const r=[];for(const s of t.sort()){const o=(i=this.memberNodes.get(s))==null?void 0:i.getValue();r.push(`"${rn(s)}":${o.toSortedJSON()}`)}return`{${r.join(",")}}`}getRHT(){return this.memberNodes}deepcopy(){const t=Le.create(this.getCreatedAt());for(const r of this.memberNodes)t.memberNodes.set(r.getStrKey(),r.getValue().deepcopy(),this.getPositionedAt());return t.remove(this.getRemovedAt()),t}getDescendants(t){for(const r of this.memberNodes){const i=r.getValue();if(t(i,this))return;i instanceof ii&&i.getDescendants(t)}}*[Symbol.iterator](){const t=new Set;for(const r of this.memberNodes)t.has(r.getStrKey())||(t.add(r.getStrKey()),r.isRemoved()||(yield[r.getStrKey(),r.getValue()]))}}var X=(n=>(n.Local="local",n.Remote="remote",n.UndoRedo="undoredo",n))(X||{});class Pt{constructor(e,t){l(this,"parentCreatedAt");l(this,"executedAt");this.parentCreatedAt=e,this.executedAt=t}getParentCreatedAt(){return this.parentCreatedAt}getExecutedAt(){if(!this.executedAt)throw new S(w.ErrNotReady,"executedAt is not set yet");return this.executedAt}setActor(e){this.executedAt&&(this.executedAt=this.executedAt.setActor(e))}setExecutedAt(e){this.executedAt=e}}class Iy{constructor(e){l(this,"value");l(this,"left");l(this,"right");l(this,"parent");l(this,"weight");this.value=e,this.initWeight()}getNodeString(){return`${this.weight}${this.value}`}getValue(){return this.value}getLeftWeight(){return this.hasLeft()?this.left.getWeight():0}getRightWeight(){return this.hasRight()?this.right.getWeight():0}getWeight(){return this.weight}getLeft(){return this.left}getRight(){return this.right}getParent(){return this.parent}hasLeft(){return!!this.left}hasRight(){return!!this.right}hasParent(){return!!this.parent}setLeft(e){this.left=e}setRight(e){this.right=e}setParent(e){this.parent=e}unlink(){this.parent=void 0,this.right=void 0,this.left=void 0}hasLinks(){return this.hasParent()||this.hasLeft()||this.hasRight()}increaseWeight(e){this.weight+=e}initWeight(){this.weight=this.getLength()}}class Bo{constructor(e){l(this,"root");this.root=e}get length(){return this.root?this.root.getWeight():0}find(e){if(!this.root||e<0)return[void 0,0];let t=this.root;for(;;)if(t.hasLeft()&&e<=t.getLeftWeight())t=t.getLeft();else if(t.hasRight()&&t.getLeftWeight()+t.getLength()<e)e-=t.getLeftWeight()+t.getLength(),t=t.getRight();else{e-=t.getLeftWeight();break}if(e>t.getLength())throw new S(w.ErrInvalidArgument,`out of index range: pos: ${e} > node.length: ${t.getLength()}`);return this.splayNode(t),[t,e]}indexOf(e){return!e||e!==this.root&&!e.hasLinks()?-1:(this.splayNode(e),this.root.getLeftWeight())}getRoot(){return this.root}insert(e){return this.insertAfter(this.root,e)}insertAfter(e,t){return e?(this.splayNode(e),this.root=t,t.setRight(e.getRight()),e.hasRight()&&e.getRight().setParent(t),t.setLeft(e),e.setParent(t),e.setRight(),this.updateWeight(e),this.updateWeight(t),t):(this.root=t,t)}updateWeight(e){e.initWeight(),e.hasLeft()&&e.increaseWeight(e.getLeftWeight()),e.hasRight()&&e.increaseWeight(e.getRightWeight())}updateTreeWeight(e){for(;e;)this.updateWeight(e),e=e.getParent()}splayNode(e){if(e)for(;;)if(this.isLeftChild(e.getParent())&&this.isRightChild(e))this.rotateLeft(e),this.rotateRight(e);else if(this.isRightChild(e.getParent())&&this.isLeftChild(e))this.rotateRight(e),this.rotateLeft(e);else if(this.isLeftChild(e.getParent())&&this.isLeftChild(e))this.rotateRight(e.getParent()),this.rotateRight(e);else if(this.isRightChild(e.getParent())&&this.isRightChild(e))this.rotateLeft(e.getParent()),this.rotateLeft(e);else{this.isLeftChild(e)?this.rotateRight(e):this.isRightChild(e)&&this.rotateLeft(e),this.updateWeight(e);return}}delete(e){this.splayNode(e);const t=new Bo(e.getLeft());t.root&&t.root.setParent();const r=new Bo(e.getRight());if(r.root&&r.root.setParent(),t.root){const i=t.getRightmost();t.splayNode(i),t.root.setRight(r.root),r.root&&r.root.setParent(t.root),this.root=t.root}else this.root=r.root;e.unlink(),this.root&&this.updateWeight(this.root)}deleteRange(e,t){if(!t){this.splayNode(e),this.cutOffRight(e);return}this.splayNode(e),this.splayNode(t),t.getLeft()!=e&&this.rotateRight(e),this.cutOffRight(e)}cutOffRight(e){const t=[];this.traversePostorder(e.getRight(),t);for(const r of t)r.initWeight();this.updateTreeWeight(e)}toTestString(){const e=[];return this.traverseInorder(this.root,e),e.map(t=>`[${t.getWeight()},${t.getLength()}]${t.getValue()||""}`).join("")}checkWeight(){const e=[];this.traverseInorder(this.root,e);for(const t of e)if(t.getWeight()!=t.getLength()+t.getLeftWeight()+t.getRightWeight())return!1;return!0}getRightmost(){let e=this.root;for(;e.hasRight();)e=e.getRight();return e}traverseInorder(e,t){e&&(this.traverseInorder(e.getLeft(),t),t.push(e),this.traverseInorder(e.getRight(),t))}traversePostorder(e,t){e&&(this.traversePostorder(e.getLeft(),t),this.traversePostorder(e.getRight(),t),t.push(e))}rotateLeft(e){const t=e.getParent();t.hasParent()?t===t.getParent().getLeft()?t.getParent().setLeft(e):t.getParent().setRight(e):this.root=e,e.setParent(t.getParent()),t.setRight(e.getLeft()),t.hasRight()&&t.getRight().setParent(t),e.setLeft(t),e.getLeft().setParent(e),this.updateWeight(t),this.updateWeight(e)}rotateRight(e){const t=e.getParent();t.hasParent()?t===t.getParent().getLeft()?t.getParent().setLeft(e):t.getParent().setRight(e):this.root=e,e.setParent(t.getParent()),t.setLeft(e.getRight()),t.hasLeft()&&t.getLeft().setParent(t),e.setRight(t),e.getRight().setParent(e),this.updateWeight(t),this.updateWeight(e)}isLeftChild(e){return e&&e.hasParent()?e.getParent().getLeft()===e:!1}isRightChild(e){return e&&e.hasParent()?e.getParent().getRight()===e:!1}}/**
 * @license
 * Copyright 2009 The Closure Library Authors
 * Copyright 2020 Daniel Wirtz / The long.js Authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * SPDX-License-Identifier: Apache-2.0
 */var It=null;try{It=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function K(n,e,t){this.low=n|0,this.high=e|0,this.unsigned=!!t}K.prototype.__isLong__;Object.defineProperty(K.prototype,"__isLong__",{value:!0});function ze(n){return(n&&n.__isLong__)===!0}function wm(n){var e=Math.clz32(n&-n);return n?31-e:e}K.isLong=ze;var Sm={},km={};function $i(n,e){var t,r,i;return e?(n>>>=0,(i=0<=n&&n<256)&&(r=km[n],r)?r:(t=_(n,0,!0),i&&(km[n]=t),t)):(n|=0,(i=-128<=n&&n<128)&&(r=Sm[n],r)?r:(t=_(n,n<0?-1:0,!1),i&&(Sm[n]=t),t))}K.fromInt=$i;function At(n,e){if(isNaN(n))return e?Er:$t;if(e){if(n<0)return Er;if(n>=Ay)return Ny}else{if(n<=-Im)return _e;if(n+1>=Im)return xy}return n<0?At(-n,e).neg():_(n%As|0,n/As|0,e)}K.fromNumber=At;function _(n,e,t){return new K(n,e,t)}K.fromBits=_;var Ll=Math.pow;function hd(n,e,t){if(n.length===0)throw Error("empty string");if(typeof e=="number"?(t=e,e=!1):e=!!e,n==="NaN"||n==="Infinity"||n==="+Infinity"||n==="-Infinity")return e?Er:$t;if(t=t||10,t<2||36<t)throw RangeError("radix");var r;if((r=n.indexOf("-"))>0)throw Error("interior hyphen");if(r===0)return hd(n.substring(1),e,t).neg();for(var i=At(Ll(t,8)),s=$t,o=0;o<n.length;o+=8){var a=Math.min(8,n.length-o),u=parseInt(n.substring(o,o+a),t);if(a<8){var c=At(Ll(t,a));s=s.mul(c).add(At(u))}else s=s.mul(i),s=s.add(At(u))}return s.unsigned=e,s}K.fromString=hd;function Dt(n,e){return typeof n=="number"?At(n,e):typeof n=="string"?hd(n,e):_(n.low,n.high,typeof e=="boolean"?e:n.unsigned)}K.fromValue=Dt;var Tm=65536,s1=1<<24,As=Tm*Tm,Ay=As*As,Im=Ay/2,Am=$i(s1),$t=$i(0);K.ZERO=$t;var Er=$i(0,!0);K.UZERO=Er;var ts=$i(1);K.ONE=ts;var Ey=$i(1,!0);K.UONE=Ey;var cf=$i(-1);K.NEG_ONE=cf;var xy=_(-1,2147483647,!1);K.MAX_VALUE=xy;var Ny=_(-1,-1,!0);K.MAX_UNSIGNED_VALUE=Ny;var _e=_(0,-2147483648,!1);K.MIN_VALUE=_e;var E=K.prototype;E.toInt=function(){return this.unsigned?this.low>>>0:this.low};E.toNumber=function(){return this.unsigned?(this.high>>>0)*As+(this.low>>>0):this.high*As+(this.low>>>0)};E.toString=function(e){if(e=e||10,e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(_e)){var t=At(e),r=this.div(t),i=r.mul(t).sub(this);return r.toString(e)+i.toInt().toString(e)}else return"-"+this.neg().toString(e);for(var s=At(Ll(e,6),this.unsigned),o=this,a="";;){var u=o.div(s),c=o.sub(u.mul(s)).toInt()>>>0,d=c.toString(e);if(o=u,o.isZero())return d+a;for(;d.length<6;)d="0"+d;a=""+d+a}};E.getHighBits=function(){return this.high};E.getHighBitsUnsigned=function(){return this.high>>>0};E.getLowBits=function(){return this.low};E.getLowBitsUnsigned=function(){return this.low>>>0};E.getNumBitsAbs=function(){if(this.isNegative())return this.eq(_e)?64:this.neg().getNumBitsAbs();for(var e=this.high!=0?this.high:this.low,t=31;t>0&&!(e&1<<t);t--);return this.high!=0?t+33:t+1};E.isSafeInteger=function(){var e=this.high>>21;return e?this.unsigned?!1:e===-1&&!(this.low===0&&this.high===-2097152):!0};E.isZero=function(){return this.high===0&&this.low===0};E.eqz=E.isZero;E.isNegative=function(){return!this.unsigned&&this.high<0};E.isPositive=function(){return this.unsigned||this.high>=0};E.isOdd=function(){return(this.low&1)===1};E.isEven=function(){return(this.low&1)===0};E.equals=function(e){return ze(e)||(e=Dt(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low};E.eq=E.equals;E.notEquals=function(e){return!this.eq(e)};E.neq=E.notEquals;E.ne=E.notEquals;E.lessThan=function(e){return this.comp(e)<0};E.lt=E.lessThan;E.lessThanOrEqual=function(e){return this.comp(e)<=0};E.lte=E.lessThanOrEqual;E.le=E.lessThanOrEqual;E.greaterThan=function(e){return this.comp(e)>0};E.gt=E.greaterThan;E.greaterThanOrEqual=function(e){return this.comp(e)>=0};E.gte=E.greaterThanOrEqual;E.ge=E.greaterThanOrEqual;E.compare=function(e){if(ze(e)||(e=Dt(e)),this.eq(e))return 0;var t=this.isNegative(),r=e.isNegative();return t&&!r?-1:!t&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1};E.comp=E.compare;E.negate=function(){return!this.unsigned&&this.eq(_e)?_e:this.not().add(ts)};E.neg=E.negate;E.add=function(e){ze(e)||(e=Dt(e));var t=this.high>>>16,r=this.high&65535,i=this.low>>>16,s=this.low&65535,o=e.high>>>16,a=e.high&65535,u=e.low>>>16,c=e.low&65535,d=0,h=0,m=0,p=0;return p+=s+c,m+=p>>>16,p&=65535,m+=i+u,h+=m>>>16,m&=65535,h+=r+a,d+=h>>>16,h&=65535,d+=t+o,d&=65535,_(m<<16|p,d<<16|h,this.unsigned)};E.subtract=function(e){return ze(e)||(e=Dt(e)),this.add(e.neg())};E.sub=E.subtract;E.multiply=function(e){if(this.isZero())return this;if(ze(e)||(e=Dt(e)),It){var t=It.mul(this.low,this.high,e.low,e.high);return _(t,It.get_high(),this.unsigned)}if(e.isZero())return this.unsigned?Er:$t;if(this.eq(_e))return e.isOdd()?_e:$t;if(e.eq(_e))return this.isOdd()?_e:$t;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(Am)&&e.lt(Am))return At(this.toNumber()*e.toNumber(),this.unsigned);var r=this.high>>>16,i=this.high&65535,s=this.low>>>16,o=this.low&65535,a=e.high>>>16,u=e.high&65535,c=e.low>>>16,d=e.low&65535,h=0,m=0,p=0,k=0;return k+=o*d,p+=k>>>16,k&=65535,p+=s*d,m+=p>>>16,p&=65535,p+=o*c,m+=p>>>16,p&=65535,m+=i*d,h+=m>>>16,m&=65535,m+=s*c,h+=m>>>16,m&=65535,m+=o*u,h+=m>>>16,m&=65535,h+=r*d+i*c+s*u+o*a,h&=65535,_(p<<16|k,h<<16|m,this.unsigned)};E.mul=E.multiply;E.divide=function(e){if(ze(e)||(e=Dt(e)),e.isZero())throw Error("division by zero");if(It){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;var t=(this.unsigned?It.div_u:It.div_s)(this.low,this.high,e.low,e.high);return _(t,It.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?Er:$t;var r,i,s;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return Er;if(e.gt(this.shru(1)))return Ey;s=Er}else{if(this.eq(_e)){if(e.eq(ts)||e.eq(cf))return _e;if(e.eq(_e))return ts;var o=this.shr(1);return r=o.div(e).shl(1),r.eq($t)?e.isNegative()?ts:cf:(i=this.sub(e.mul(r)),s=r.add(i.div(e)),s)}else if(e.eq(_e))return this.unsigned?Er:$t;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();s=$t}for(i=this;i.gte(e);){r=Math.max(1,Math.floor(i.toNumber()/e.toNumber()));for(var a=Math.ceil(Math.log(r)/Math.LN2),u=a<=48?1:Ll(2,a-48),c=At(r),d=c.mul(e);d.isNegative()||d.gt(i);)r-=u,c=At(r,this.unsigned),d=c.mul(e);c.isZero()&&(c=ts),s=s.add(c),i=i.sub(d)}return s};E.div=E.divide;E.modulo=function(e){if(ze(e)||(e=Dt(e)),It){var t=(this.unsigned?It.rem_u:It.rem_s)(this.low,this.high,e.low,e.high);return _(t,It.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))};E.mod=E.modulo;E.rem=E.modulo;E.not=function(){return _(~this.low,~this.high,this.unsigned)};E.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32};E.clz=E.countLeadingZeros;E.countTrailingZeros=function(){return this.low?wm(this.low):wm(this.high)+32};E.ctz=E.countTrailingZeros;E.and=function(e){return ze(e)||(e=Dt(e)),_(this.low&e.low,this.high&e.high,this.unsigned)};E.or=function(e){return ze(e)||(e=Dt(e)),_(this.low|e.low,this.high|e.high,this.unsigned)};E.xor=function(e){return ze(e)||(e=Dt(e)),_(this.low^e.low,this.high^e.high,this.unsigned)};E.shiftLeft=function(e){return ze(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?_(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):_(0,this.low<<e-32,this.unsigned)};E.shl=E.shiftLeft;E.shiftRight=function(e){return ze(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?_(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):_(this.high>>e-32,this.high>=0?0:-1,this.unsigned)};E.shr=E.shiftRight;E.shiftRightUnsigned=function(e){return ze(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?_(this.low>>>e|this.high<<32-e,this.high>>>e,this.unsigned):e===32?_(this.high,0,this.unsigned):_(this.high>>>e-32,0,this.unsigned)};E.shru=E.shiftRightUnsigned;E.shr_u=E.shiftRightUnsigned;E.rotateLeft=function(e){var t;return ze(e)&&(e=e.toInt()),(e&=63)===0?this:e===32?_(this.high,this.low,this.unsigned):e<32?(t=32-e,_(this.low<<e|this.high>>>t,this.high<<e|this.low>>>t,this.unsigned)):(e-=32,t=32-e,_(this.high<<e|this.low>>>t,this.low<<e|this.high>>>t,this.unsigned))};E.rotl=E.rotateLeft;E.rotateRight=function(e){var t;return ze(e)&&(e=e.toInt()),(e&=63)===0?this:e===32?_(this.high,this.low,this.unsigned):e<32?(t=32-e,_(this.high<<t|this.low>>>e,this.low<<t|this.high>>>e,this.unsigned)):(e-=32,t=32-e,_(this.low<<t|this.high>>>e,this.high<<t|this.low>>>e,this.unsigned))};E.rotr=E.rotateRight;E.toSigned=function(){return this.unsigned?_(this.low,this.high,!1):this};E.toUnsigned=function(){return this.unsigned?this:_(this.low,this.high,!0)};E.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()};E.toBytesLE=function(){var e=this.high,t=this.low;return[t&255,t>>>8&255,t>>>16&255,t>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]};E.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,t>>>24,t>>>16&255,t>>>8&255,t&255]};K.fromBytes=function(e,t,r){return r?K.fromBytesLE(e,t):K.fromBytesBE(e,t)};K.fromBytesLE=function(e,t){return new K(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)};K.fromBytesBE=function(e,t){return new K(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)};typeof BigInt=="function"&&(K.fromBigInt=function(e,t){var r=Number(BigInt.asIntN(32,e)),i=Number(BigInt.asIntN(32,e>>BigInt(32)));return _(r,i,t)},K.fromValue=function(e,t){return typeof e=="bigint"?K.fromBigInt(e,t):Dt(e,t)},E.toBigInt=function(){var e=BigInt(this.low>>>0),t=BigInt(this.unsigned?this.high>>>0:this.high);return t<<BigInt(32)|e});var Z=(n=>(n[n.Null=0]="Null",n[n.Boolean=1]="Boolean",n[n.Integer=2]="Integer",n[n.Long=3]="Long",n[n.Double=4]="Double",n[n.String=5]="String",n[n.Bytes=6]="Bytes",n[n.Date=7]="Date",n))(Z||{});class oe extends qo{constructor(t,r){super(r);l(this,"valueType");l(this,"value");this.valueType=oe.getPrimitiveType(t),this.value=t===void 0?null:t}static of(t,r){return new oe(t,r)}static valueFromBytes(t,r){switch(t){case 0:return null;case 1:return!!r[0];case 2:return r[0]|r[1]<<8|r[2]<<16|r[3]<<24;case 4:{const i=new DataView(r.buffer);return r.forEach(function(s,o){i.setUint8(o,s)}),i.getFloat64(0,!0)}case 5:return new TextDecoder("utf-8").decode(r);case 3:return K.fromBytesLE(Array.from(r));case 6:return r;case 7:return new Date(K.fromBytesLE(Array.from(r),!0).toNumber());default:throw new S(w.ErrUnimplemented,`unimplemented type: ${t}`)}}getValueSize(){switch(this.valueType){case 0:return 8;case 1:return 4;case 2:return 4;case 3:return 8;case 4:return 8;case 5:return this.value.length*2;case 6:return this.value.length;case 7:return 8;default:throw new S(w.ErrUnimplemented,`unimplemented type: ${this.valueType}`)}}getDataSize(){return{data:this.getValueSize(),meta:this.getMetaUsage()}}toJSON(){return this.valueType===5?`"${rn(this.value)}"`:`${this.value}`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:this.value,type:"YORKIE_PRIMITIVE"}}deepcopy(){const t=oe.of(this.value,this.getCreatedAt());return t.setMovedAt(this.getMovedAt()),t.setRemovedAt(this.getRemovedAt()),t}getType(){return this.valueType}static getPrimitiveType(t){switch(typeof t){case"undefined":return 0;case"boolean":return 1;case"number":return this.isInteger(t)?2:4;case"string":return 5;case"object":if(t===null)return 0;if(t instanceof K)return 3;if(t instanceof Uint8Array)return 6;if(t instanceof Date)return 7}}static isSupport(t){return oe.getPrimitiveType(t)!==void 0}static isInteger(t){return t%1===0}isNumericType(){const t=this.valueType;return t===2||t===3||t===4}getValue(){return this.value}toBytes(){switch(this.valueType){case 0:return new Uint8Array;case 1:return this.value?new Uint8Array([1]):new Uint8Array([0]);case 2:{const t=this.value;return new Uint8Array([t&255,t>>8&255,t>>16&255,t>>24&255])}case 4:{const t=this.value,r=new Uint8Array(8);return new DataView(r.buffer).setFloat64(0,t,!0),r}case 5:return new TextEncoder().encode(this.value);case 3:{const r=this.value.toBytesLE();return Uint8Array.from(r)}case 6:return this.value;case 7:{const t=this.value,r=K.fromNumber(t.getTime(),!0).toBytesLE();return Uint8Array.from(r)}default:throw new S(w.ErrUnimplemented,`unimplemented type: ${this.valueType}`)}}}class Bl extends Iy{constructor(t){super(t);l(this,"prev");l(this,"next");l(this,"movedFrom");this.value=t}static createAfter(t,r){const i=new Bl(r),s=t.next;return t.next=i,i.prev=t,i.next=s,s&&(s.prev=i),i}remove(t){return this.value.remove(t)}getCreatedAt(){return this.value.getCreatedAt()}getPositionedAt(){return this.value.getPositionedAt()}release(){this.prev&&(this.prev.next=this.next),this.next&&(this.next.prev=this.prev),this.prev=void 0,this.next=void 0}getLength(){return this.value.isRemoved()?0:1}getPrev(){return this.prev}getNext(){return this.next}getMovedFrom(){return this.movedFrom}setMovedFrom(t){this.movedFrom=t}getValue(){return this.value}isRemoved(){return this.value.isRemoved()}}class bo{constructor(){l(this,"dummyHead");l(this,"last");l(this,"nodeMapByIndex");l(this,"nodeMapByCreatedAt");const e=oe.of(0,Is);e.setRemovedAt(Is),this.dummyHead=new Bl(e),this.last=this.dummyHead,this.nodeMapByIndex=new Bo,this.nodeMapByCreatedAt=new Map,this.nodeMapByIndex.insert(this.dummyHead),this.nodeMapByCreatedAt.set(this.dummyHead.getCreatedAt().toIDString(),this.dummyHead)}static create(){return new bo}get length(){return this.nodeMapByIndex.length}findNextBeforeExecutedAt(e,t){let r=this.nodeMapByCreatedAt.get(e.toIDString());if(!r)throw new S(w.ErrInvalidArgument,`cant find the given node: ${e.toIDString()}`);for(;r.getValue().getMovedAt()&&r.getValue().getMovedAt().after(t)&&r.getMovedFrom();)r=r.getMovedFrom();for(;r.getNext()&&r.getNext().getPositionedAt().after(t);)r=r.getNext();return r}release(e){this.last===e&&(this.last=e.getPrev()),e.release(),this.nodeMapByIndex.delete(e),this.nodeMapByCreatedAt.delete(e.getValue().getCreatedAt().toIDString())}insertAfter(e,t,r=t.getCreatedAt()){const i=this.findNextBeforeExecutedAt(e,r),s=Bl.createAfter(i,t);return i===this.last&&(this.last=s),this.nodeMapByIndex.insertAfter(i,s),this.nodeMapByCreatedAt.set(s.getCreatedAt().toIDString(),s),s}moveAfter(e,t,r){let i=this.nodeMapByCreatedAt.get(e.toIDString());if(!i)throw new S(w.ErrInvalidArgument,`cant find the given node: ${e.toIDString()}`);let s=this.nodeMapByCreatedAt.get(t.toIDString());if(!s)throw new S(w.ErrInvalidArgument,`cant find the given node: ${t.toIDString()}`);if(i!==s&&r.after(s.getPositionedAt())){const o=s.getPrev();let a=s.getNext();for(this.release(s),s=this.insertAfter(i.getCreatedAt(),s.getValue(),r),s.getValue().setMovedAt(r),s.setMovedFrom(o);a&&a.getPositionedAt().after(r);)i=s,s=a,a=s.getNext(),this.release(s),s=this.insertAfter(i.getCreatedAt(),s.getValue(),r),s.getValue().setMovedAt(r),s.setMovedFrom(o)}}insert(e){this.insertAfter(this.last.getCreatedAt(),e)}getByID(e){return this.nodeMapByCreatedAt.get(e.toIDString())}subPathOf(e){const t=this.nodeMapByCreatedAt.get(e.toIDString());if(t)return String(this.nodeMapByIndex.indexOf(t))}purge(e){const t=this.nodeMapByCreatedAt.get(e.getCreatedAt().toIDString());if(!t)throw new S(w.ErrInvalidArgument,`fail to find the given createdAt: ${e.getCreatedAt().toIDString()}`);this.release(t)}getByIndex(e){if(e>=this.length)return;const[t,r]=this.nodeMapByIndex.find(e);let i=t;if(e===0&&t===this.dummyHead||r>0)do i&&(i=i.getNext());while(i&&i.isRemoved());return i}getPrevCreatedAt(e){let t=this.nodeMapByCreatedAt.get(e.toIDString());do t=t.getPrev();while(this.dummyHead!==t&&t.isRemoved());return t.getValue().getCreatedAt()}delete(e,t){const r=this.nodeMapByCreatedAt.get(e.toIDString()),i=r.isRemoved();return r.remove(t)&&!i&&this.nodeMapByIndex.splayNode(r),r.getValue()}set(e,t,r){const i=this.nodeMapByCreatedAt.get(e.toIDString());if(!i)throw new S(w.ErrInvalidArgument,`cant find the given node: ${e.toIDString()}`);return this.insertAfter(i.getCreatedAt(),t,r),this.delete(e,r)}deleteByIndex(e,t){const r=this.getByIndex(e);if(r)return r.remove(t)&&this.nodeMapByIndex.splayNode(r),r.getValue()}getHead(){return this.dummyHead.getValue()}getLast(){return this.last.getValue()}getLastCreatedAt(){return this.last.getCreatedAt()}toTestString(){const e=[];for(const t of this){const r=`${t.getCreatedAt().toIDString()}:${t.getValue().toJSON()}`;t.isRemoved()?e.push(`{${r}}`):e.push(`[${r}]`)}return e.join("")}*[Symbol.iterator](){let e=this.dummyHead.getNext();for(;e;)yield e,e=e.getNext()}}class Be extends ii{constructor(t,r){super(t);l(this,"elements");this.elements=r}static create(t,r){if(!r)return new Be(t,bo.create());const i=bo.create();for(const s of r)i.insertAfter(i.getLastCreatedAt(),s.deepcopy());return new Be(t,i)}subPathOf(t){return this.elements.subPathOf(t)}purge(t){this.elements.purge(t)}insertAfter(t,r,i){this.elements.insertAfter(t,r,i)}moveAfter(t,r,i){this.elements.moveAfter(t,r,i)}get(t){const r=this.elements.getByIndex(t);return r==null?void 0:r.getValue()}getByID(t){const r=this.elements.getByID(t);return r==null?void 0:r.getValue()}getHead(){return this.elements.getHead()}getLast(){return this.elements.getLast()}getPrevCreatedAt(t){return this.elements.getPrevCreatedAt(t)}delete(t,r){return this.elements.delete(t,r)}deleteByIndex(t,r){return this.elements.deleteByIndex(t,r)}set(t,r,i){return this.elements.set(t,r,i)}getLastCreatedAt(){return this.elements.getLastCreatedAt()}get length(){return this.elements.length}*[Symbol.iterator](){for(const t of this.elements)t.isRemoved()||(yield t.getValue())}toTestString(){return this.elements.toTestString()}getDescendants(t){for(const r of this.elements){const i=r.getValue();if(t(i,this))return;i instanceof ii&&i.getDescendants(t)}}getDataSize(){return{data:0,meta:this.getMetaUsage()}}toJSON(){const t=[];for(const r of this)t.push(r.toJSON());return`[${t.join(",")}]`}toJS(){return JSON.parse(this.toJSON())}toJSForTest(){const t={};for(let r=0;r<this.length;r++){const{createdAt:i,value:s,type:o}=this.get(r).toJSForTest();t[r]={key:String(r),createdAt:i,value:s,type:o}}return{createdAt:this.getCreatedAt().toTestString(),value:t,type:"YORKIE_ARRAY"}}toSortedJSON(){return this.toJSON()}getElements(){return this.elements}deepcopy(){const t=Be.create(this.getCreatedAt());for(const r of this.elements)t.elements.insertAfter(t.getLastCreatedAt(),r.getValue().deepcopy());return t.remove(this.getRemovedAt()),t}}class Rs extends Pt{constructor(t,r,i,s){super(t,s);l(this,"prevCreatedAt");l(this,"value");this.prevCreatedAt=r,this.value=i}static create(t,r,i,s){return new Rs(t,r,i,s)}execute(t){const r=t.findByCreatedAt(this.getParentCreatedAt());if(!r)throw new S(w.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(r instanceof Be))throw new S(w.ErrInvalidArgument,"fail to execute, only array can execute add");const i=r,s=this.value.deepcopy();return i.insertAfter(this.prevCreatedAt,s,this.getExecutedAt()),t.registerElement(s,i),{opInfos:[{type:"add",path:t.createPath(this.getParentCreatedAt()),index:Number(i.subPathOf(this.getEffectedCreatedAt()))}],reverseOp:this.toReverseOperation()}}toReverseOperation(){return Br.create(this.getParentCreatedAt(),this.value.getCreatedAt())}getEffectedCreatedAt(){return this.value.getCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.ADD.${this.value.toJSON()}`}getPrevCreatedAt(){return this.prevCreatedAt}getValue(){return this.value}}class Br extends Pt{constructor(t,r,i){super(t,i);l(this,"createdAt");this.createdAt=r}static create(t,r,i){return new Br(t,r,i)}execute(t,r){var c;const i=t.findByCreatedAt(this.getParentCreatedAt());if(!i)throw new S(w.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(i instanceof ii))throw new S(w.ErrInvalidArgument,`only object and array can execute remove: ${i}`);if(r===X.UndoRedo){let d=i.getByID(this.createdAt);for(;d;){if(d.getRemovedAt())return;d=(c=t.findElementPairByCreatedAt(d.getCreatedAt()))==null?void 0:c.parent}}const s=i.subPathOf(this.createdAt),o=this.toReverseOperation(i),a=i.delete(this.createdAt,this.getExecutedAt());return t.registerRemovedElement(a),{opInfos:i instanceof Be?[{type:"remove",path:t.createPath(this.getParentCreatedAt()),index:Number(s)}]:[{type:"remove",path:t.createPath(this.getParentCreatedAt()),key:s}],reverseOp:o}}toReverseOperation(t){if(t instanceof Be){const r=t.getByID(this.createdAt);if(r!==void 0){const i=t.getPrevCreatedAt(this.createdAt);return Rs.create(this.getParentCreatedAt(),i,r.deepcopy())}}if(t instanceof Le){const r=t.subPathOf(this.createdAt);if(r!==void 0){const i=t.get(r);if(i!==void 0)return bi.create(r,i.deepcopy(),this.getParentCreatedAt())}}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.REMOVE.${this.createdAt.toTestString()}`}getCreatedAt(){return this.createdAt}}class bi extends Pt{constructor(t,r,i,s){super(i,s);l(this,"key");l(this,"value");this.key=t,this.value=r}static create(t,r,i,s){return new bi(t,r,i,s)}execute(t,r){var c;const i=t.findByCreatedAt(this.getParentCreatedAt());if(!i)throw new S(w.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(i instanceof Le))throw new S(w.ErrInvalidArgument,"fail to execute, only object can execute set");if(r===X.UndoRedo){let d=i;for(;d;){if(d.getRemovedAt())return;d=(c=t.findElementPairByCreatedAt(d.getCreatedAt()))==null?void 0:c.parent}}const s=i.get(this.key),o=this.toReverseOperation(s),a=this.value.deepcopy(),u=i.set(this.key,a,this.getExecutedAt());return r===X.UndoRedo&&t.findByCreatedAt(a.getCreatedAt())&&t.deregisterElement(a),t.registerElement(a,i),u&&t.registerRemovedElement(u),{opInfos:[{type:"set",path:t.createPath(this.getParentCreatedAt()),key:this.key}],reverseOp:o}}toReverseOperation(t){let r=Br.create(this.getParentCreatedAt(),this.value.getCreatedAt());return t!==void 0&&!t.isRemoved()&&(r=bi.create(this.key,t.deepcopy(),this.getParentCreatedAt())),r}getEffectedCreatedAt(){return this.value.getCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.SET.${this.key}=${this.value.toSortedJSON()}`}getKey(){return this.key}getValue(){return this.value}}class xr extends Pt{constructor(t,r,i,s){super(t,s);l(this,"prevCreatedAt");l(this,"createdAt");this.prevCreatedAt=r,this.createdAt=i}static create(t,r,i,s){return new xr(t,r,i,s)}execute(t){const r=t.findByCreatedAt(this.getParentCreatedAt());if(!r)throw new S(w.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(r instanceof Be))throw new S(w.ErrInvalidArgument,"fail to execute, only array can execute move");const i=r,s=this.toReverseOperation(i),o=Number(i.subPathOf(this.createdAt));i.moveAfter(this.prevCreatedAt,this.createdAt,this.getExecutedAt());const a=Number(i.subPathOf(this.createdAt));return{opInfos:[{type:"move",path:t.createPath(this.getParentCreatedAt()),index:a,previousIndex:o}],reverseOp:s}}toReverseOperation(t){const r=t.getPrevCreatedAt(this.createdAt);return xr.create(this.getParentCreatedAt(),r,this.createdAt)}getEffectedCreatedAt(){return this.createdAt}toTestString(){return`${this.getParentCreatedAt().toTestString()}.MOVE`}getPrevCreatedAt(){return this.prevCreatedAt}getCreatedAt(){return this.createdAt}}class _r{constructor(e,t,r,i){l(this,"key");l(this,"value");l(this,"updatedAt");l(this,"_isRemoved");this.key=e,this.value=t,this.updatedAt=r,this._isRemoved=i}static of(e,t,r,i){return new _r(e,t,r,i)}getKey(){return this.key}getValue(){return this.value}getUpdatedAt(){return this.updatedAt}isRemoved(){return this._isRemoved}toIDString(){return`${this.updatedAt.toIDString()}:${this.key}`}getRemovedAt(){if(this._isRemoved)return this.updatedAt}getDataSize(){return{data:(this.key.length+this.value.length)*2,meta:an}}}class br{constructor(){l(this,"nodeMapByKey");l(this,"numberOfRemovedElement");this.nodeMapByKey=new Map,this.numberOfRemovedElement=0}static create(){return new br}getNodeMapByKey(){return this.nodeMapByKey}set(e,t,r){const i=this.nodeMapByKey.get(e);if(i&&i.isRemoved()&&r.after(i.getUpdatedAt())&&(this.numberOfRemovedElement-=1),i===void 0||r.after(i.getUpdatedAt())){const s=_r.of(e,t,r,!1);return this.nodeMapByKey.set(e,s),i!==void 0&&i.isRemoved()?[i,s]:[void 0,s]}return i.isRemoved()?[i,void 0]:[void 0,void 0]}setInternal(e,t,r,i){const s=_r.of(e,t,r,i);this.nodeMapByKey.set(e,s),i&&this.numberOfRemovedElement++}remove(e,t){const r=this.nodeMapByKey.get(e),i=[];if(r===void 0||t.after(r.getUpdatedAt())){if(r===void 0){this.numberOfRemovedElement+=1;const a=_r.of(e,"",t,!0);return this.nodeMapByKey.set(e,a),i.push(a),i}const s=r.isRemoved();s||(this.numberOfRemovedElement+=1),s&&i.push(r);const o=_r.of(e,r.getValue(),t,!0);return this.nodeMapByKey.set(e,o),i.push(o),i}return i}has(e){if(this.nodeMapByKey.has(e)){const t=this.nodeMapByKey.get(e);return t!==void 0&&!t.isRemoved()}return!1}get(e){if(this.nodeMapByKey.has(e))return this.nodeMapByKey.get(e).getValue()}deepcopy(){const e=new br;for(const[,t]of this.nodeMapByKey)e.setInternal(t.getKey(),t.getValue(),t.getUpdatedAt(),t.isRemoved());return e}toJSON(){if(!this.size())return"{}";const e=[];for(const[t,r]of this.nodeMapByKey)r.isRemoved()||e.push(`"${rn(t)}":"${rn(r.getValue())}"`);return`{${e.join(",")}}`}size(){return this.nodeMapByKey.size-this.numberOfRemovedElement}toObject(){const e={};for(const[t,r]of this.nodeMapByKey)r.isRemoved()||(e[t]=r.getValue());return e}*[Symbol.iterator](){for(const[,e]of this.nodeMapByKey)yield e}purge(e){const t=this.nodeMapByKey.get(e.getKey());t==null||t.toIDString()!=e.toIDString()||(this.nodeMapByKey.delete(e.getKey()),this.numberOfRemovedElement--)}}function Bt(n){if(n instanceof Map){const e=Array.from(n);return new Map(JSON.parse(JSON.stringify(e)))}return JSON.parse(JSON.stringify(n))}const Cy=n=>n?Object.entries(n).length===0:!0,Es=n=>{const e={};for(const[t,r]of Object.entries(n))e[t]=JSON.stringify(r);return e},Cr=n=>{const e={};for(const[t,r]of Object.entries(n))e[t]=JSON.parse(r);return e};function o1(n){return n?Em(n.live)+Em(n.gc):0}function Em(n){return n.data+n.meta}function xe(n,...e){for(const t of e)n.data+=t.data,n.meta+=t.meta}function us(n,e){n.data-=e.data,n.meta-=e.meta}class zo{constructor(e){l(this,"attributes");l(this,"content");this.attributes=br.create(),this.content=e}static create(e){return new zo(e)}get length(){return this.content.length}substring(e,t){const r=new zo(this.content.substring(e,t));return r.attributes=this.attributes.deepcopy(),r}setAttr(e,t,r){return this.attributes.set(e,t,r)}getAttrs(){return this.attributes}toString(){return this.content}getDataSize(){const e={data:0,meta:0};e.data+=this.content.length*2;for(const t of this.attributes){const r=t.getDataSize();e.meta+=r.meta,e.data+=r.data}return e}toJSON(){const e=rn(this.content),t=this.attributes.toObject(),r=[];for(const[i,s]of Object.entries(t)){const o=JSON.parse(s),a=typeof o=="string"?`"${rn(i)}":"${rn(o)}"`:`"${rn(i)}":${String(o)}`;r.push(a)}return r.sort(),r.length===0?`{"val":"${e}"}`:`{"attrs":{${r.join(",")}},"val":"${e}"}`}getAttributes(){return this.attributes.toObject()}getContent(){return this.content}purge(e){this.attributes&&e instanceof _r&&this.attributes.purge(e)}getGCPairs(){const e=[];for(const t of this.attributes)t.getRemovedAt()&&e.push({parent:this,child:t});return e}}class ot extends qo{constructor(t,r){super(r);l(this,"rgaTreeSplit");this.rgaTreeSplit=t}static create(t,r){return new ot(t,r)}edit(t,r,i,s,o){const a=r?zo.create(r):void 0;if(a&&s)for(const[p,k]of Object.entries(s))a.setAttr(p,k,i);const[u,c,d,h]=this.rgaTreeSplit.edit(t,i,a,o);return[h.map(p=>({...p,value:p.value?{attributes:Cr(p.value.getAttributes()),content:p.value.getContent()}:{attributes:void 0,content:""},type:"content"})),c,d,[u,u]]}setStyle(t,r,i,s){const o={data:0,meta:0},[,a,u]=this.rgaTreeSplit.findNodeWithSplit(t[1],i),[,c,d]=this.rgaTreeSplit.findNodeWithSplit(t[0],i);xe(o,a,c);const h=[],m=this.rgaTreeSplit.findBetween(d,u),p=[];for(const T of m){const C=T.getCreatedAt().getActorID();let y=ao;s!=null&&(y=s.get(C)?s.get(C):0n),T.canStyle(i,y)&&p.push(T)}const k=[];for(const T of p){if(T.isRemoved())continue;const[C,y]=this.rgaTreeSplit.findIndexesFromRange(T.createPosRange());h.push({type:"style",actor:i.getActorID(),from:C,to:y,value:{attributes:Cr(r)}});for(const[g,v]of Object.entries(r)){const[A]=T.getValue().setAttr(g,v,i);A!==void 0&&k.push({parent:T.getValue(),child:A});const P=T.getValue().getAttrs().getNodeMapByKey().get(g);P!==void 0&&xe(o,P.getDataSize())}}return[k,o,h]}indexRangeToPosRange(t,r){const i=this.rgaTreeSplit.indexToPos(t);return t===r?[i,i]:[i,this.rgaTreeSplit.indexToPos(r)]}get length(){return this.rgaTreeSplit.length}getTreeByIndex(){return this.rgaTreeSplit.getTreeByIndex()}getTreeByID(){return this.rgaTreeSplit.getTreeByID()}getDataSize(){const t={data:0,meta:0};for(const r of this.rgaTreeSplit){if(r.isRemoved())continue;const i=r.getDataSize();t.data+=i.data,t.meta+=i.meta}return{data:t.data,meta:t.meta+this.getMetaUsage()}}toJSON(){const t=[];for(const r of this.rgaTreeSplit)r.isRemoved()||t.push(r.getValue().toJSON());return`[${t.join(",")}]`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:JSON.parse(this.toJSON()),type:"YORKIE_TEXT"}}toString(){return this.rgaTreeSplit.toString()}values(){const t=[];for(const r of this.rgaTreeSplit)if(!r.isRemoved()){const i=r.getValue();t.push({attributes:Cr(i.getAttributes()),content:i.getContent()})}return t}getRGATreeSplit(){return this.rgaTreeSplit}toTestString(){return this.rgaTreeSplit.toTestString()}deepcopy(){const t=new ot(this.rgaTreeSplit.deepcopy(),this.getCreatedAt());return t.remove(this.getRemovedAt()),t}findIndexesFromRange(t){return this.rgaTreeSplit.findIndexesFromRange(t)}getGCPairs(){const t=[];for(const r of this.rgaTreeSplit){r.getRemovedAt()&&t.push({parent:this.rgaTreeSplit,child:r});for(const i of r.getValue().getGCPairs())t.push(i)}return t}}class Ko extends Pt{constructor(t,r,i,s,o,a){super(t,a);l(this,"fromPos");l(this,"toPos");l(this,"content");l(this,"attributes");this.fromPos=r,this.toPos=i,this.content=s,this.attributes=o}static create(t,r,i,s,o,a){return new Ko(t,r,i,s,o,a)}execute(t,r,i){const s=t.findByCreatedAt(this.getParentCreatedAt());if(!s)throw new S(w.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(s instanceof ot))throw new S(w.ErrInvalidArgument,"fail to execute, only Text can execute edit");const o=s,[a,u,c]=o.edit([this.fromPos,this.toPos],this.content,this.getExecutedAt(),Object.fromEntries(this.attributes),i);t.acc(c);for(const d of u)t.registerGCPair(d);return{opInfos:a.map(({from:d,to:h,value:m})=>({type:"edit",from:d,to:h,value:m,path:t.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const t=this.getParentCreatedAt().toTestString(),r=this.fromPos.toTestString(),i=this.toPos.toTestString(),s=this.content;return`${t}.EDIT(${r},${i},${s})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getContent(){return this.content}getAttributes(){return this.attributes||new Map}}class Wo extends Pt{constructor(t,r,i,s,o){super(t,o);l(this,"fromPos");l(this,"toPos");l(this,"attributes");this.fromPos=r,this.toPos=i,this.attributes=s}static create(t,r,i,s,o){return new Wo(t,r,i,s,o)}execute(t,r,i){const s=t.findByCreatedAt(this.getParentCreatedAt());if(!s)throw new S(w.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(s instanceof ot))throw new S(w.ErrInvalidArgument,"fail to execute, only Text can execute edit");const o=s,[a,u,c]=o.setStyle([this.fromPos,this.toPos],this.attributes?Object.fromEntries(this.attributes):{},this.getExecutedAt(),i);t.acc(u);for(const d of a)t.registerGCPair(d);return{opInfos:c.map(({from:d,to:h,value:m})=>({type:"style",from:d,to:h,value:m,path:t.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const t=this.getParentCreatedAt().toTestString(),r=this.fromPos.toTestString(),i=this.toPos.toTestString(),s=this.attributes;return`${t}.STYL(${r},${i},${JSON.stringify(s)})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getAttributes(){return this.attributes}}const a1=2,l1="root",ln="text";function js(n,e){let t=0;const r=n.children;for(let i=0;i<e;i++){const s=r[i];!s||s.isRemoved||(t+=s.paddedSize)}return t}class u1{constructor(e,t=[]){l(this,"type");l(this,"parent");l(this,"_children");l(this,"size");if(this.type=e,this.size=0,this._children=t,this.isText&&this._children.length>0)throw new S(w.ErrRefused,"Text node cannot have children")}updateAncestorsSize(){let e=this.parent;const t=this.isRemoved?-1:1;for(;e&&(e.size+=this.paddedSize*t,!e.isRemoved);)e=e.parent}updateDescendantsSize(){let e=0;for(const t of this._children){const r=t.updateDescendantsSize();t.isRemoved||(e+=r)}return this.size+=e,this.paddedSize}get isText(){return this.type===ln}get paddedSize(){return this.size+(this.isText?0:a1)}isAncestorOf(e){return c1(this,e)}get nextSibling(){const e=this.parent.findOffset(this),t=this.parent.children[e+1];if(t)return t}get prevSibling(){const e=this.parent.findOffset(this),t=this.parent.children[e-1];if(t)return t}splitText(e,t){const r={data:0,meta:0};if(e===0||e===this.size)return[void 0,r];const i=this.value.slice(0,e),s=this.value.slice(e);if(!s.length)return[void 0,r];const o=this.getDataSize();this.value=i;const a=this.cloneText(e+t);return a.value=s,this.parent.insertAfterInternal(a,this),xe(r,this.getDataSize(),a.getDataSize()),us(r,o),[a,r]}get children(){return this._children.filter(e=>!e.isRemoved)}get allChildren(){return[...this._children]}hasTextChild(){return this.children.length>0&&this.children.every(e=>e.isText)}getChildrenText(){return this.isText?this.value:this.hasTextChild()?this.children.map(e=>e.value).join(""):""}append(...e){if(this.isText)throw new S(w.ErrRefused,"Text node cannot have children");this._children.push(...e);for(const t of e)t.parent=this,t.updateAncestorsSize()}prepend(...e){if(this.isText)throw new S(w.ErrRefused,"Text node cannot have children");this._children.unshift(...e);for(const t of e)t.parent=this}insertBefore(e,t){if(this.isText)throw new S(w.ErrRefused,"Text node cannot have children");const r=this._children.indexOf(t);if(r===-1)throw new S(w.ErrInvalidArgument,"child not found");this.insertAtInternal(e,r),e.updateAncestorsSize()}insertAfter(e,t){if(this.isText)throw new S(w.ErrRefused,"Text node cannot have children");const r=this._children.indexOf(t);if(r===-1)throw new S(w.ErrInvalidArgument,"child not found");this.insertAtInternal(e,r+1),e.updateAncestorsSize()}insertAt(e,t){if(this.isText)throw new S(w.ErrRefused,"Text node cannot have children");this.insertAtInternal(e,t),e.updateAncestorsSize()}removeChild(e){if(this.isText)throw new S(w.ErrRefused,"Text node cannot have children");const t=this._children.indexOf(e);if(t===-1)throw new S(w.ErrInvalidArgument,"child not found");this._children.splice(t,1),e.parent=void 0}splitElement(e,t){const r={data:0,meta:0},i=this.getDataSize(),s=this.cloneElement(t);this.parent.insertAfterInternal(s,this),s.updateAncestorsSize();const o=this.children.slice(0,e),a=this.children.slice(e);this._children=o,s._children=a,this.size=this._children.reduce((u,c)=>u+c.paddedSize,0),s.size=s._children.reduce((u,c)=>u+c.paddedSize,0);for(const u of s._children)u.parent=s;return xe(r,this.getDataSize(),s.getDataSize()),us(r,i),[s,r]}insertAfterInternal(e,t){if(this.isText)throw new S(w.ErrRefused,"Text node cannot have children");const r=this._children.indexOf(t);if(r===-1)throw new S(w.ErrInvalidArgument,"child not found");this.insertAtInternal(e,r+1)}insertAtInternal(e,t){if(this.isText)throw new S(w.ErrRefused,"Text node cannot have children");this._children.splice(t,0,e),e.parent=this}findOffset(e){if(this.isText)throw new S(w.ErrRefused,"Text node cannot have children");if(e.isRemoved){const t=this._children.indexOf(e);return this.allChildren.splice(0,t).filter(i=>!i.isRemoved).length}return this.children.indexOf(e)}findBranchOffset(e){if(this.isText)throw new S(w.ErrRefused,"Text node cannot have children");let t=e;for(;t;){const r=this._children.indexOf(t);if(r!==-1)return r;t=t.parent}return-1}}function c1(n,e){if(n===e)return!1;for(;e.parent;){if(e.parent===n)return!0;e=e.parent}return!1}var me=(n=>(n.Start="Start",n.End="End",n.Text="Text",n))(me||{});function Py(n,e,t,r){if(e>t)throw new S(w.ErrInvalidArgument,`from is greater than to: ${e} > ${t}`);if(e>n.size)throw new S(w.ErrInvalidArgument,`from is out of range: ${e} > ${n.size}`);if(t>n.size)throw new S(w.ErrInvalidArgument,`to is out of range: ${t} > ${n.size}`);if(e===t)return;let i=0;for(const s of n.children){if(e-s.paddedSize<i&&i<t){const o=s.isText?e-i:e-i-1,a=s.isText?t-i:t-i-1,u=!s.isText&&o<0,c=!s.isText&&a>s.size;(s.isText||u)&&r([s,s.isText?"Text":"Start"],c),Py(s,Math.max(0,o),Math.min(a,s.size),r),c&&r([s,"End"],c)}i+=s.paddedSize}}function Dy(n,e,t=0){for(const r of n.children)Dy(r,e,t+1);e(n,t)}function ru(n,e,t=0){for(const r of n._children)ru(r,e,t+1);e(n,t)}function ff(n,e,t=!0){if(e>n.size)throw new S(w.ErrInvalidArgument,`index is out of range: ${e} > ${n.size}`);if(n.isText)return{node:n,offset:e};let r=0,i=0;for(const s of n.children){if(t&&s.isText&&s.size>=e-i)return ff(s,e-i,t);if(e===i)return{node:n,offset:r};if(!t&&s.paddedSize===e-i)return{node:n,offset:r+1};if(s.paddedSize>e-i)return ff(s,e-i-1,t);i+=s.paddedSize,r+=1}return{node:n,offset:r}}function Oy(n){return n.isText||n.children.length===0?n:Oy(n.children[0])}function f1(n,e){if(n.size<e)throw new S(w.ErrInvalidArgument,"unacceptable path");for(let t=0;t<n.children.length;t++){const r=n.children[t];if(r.size<e)e-=r.size;else{n=r;break}}return{node:n,offset:e}}class d1{constructor(e){l(this,"root");this.root=e}tokensBetween(e,t,r){Py(this.root,e,t,r)}traverse(e){Dy(this.root,e,0)}traverseAll(e){ru(this.root,e,0)}findTreePos(e,t=!0){return ff(this.root,e,t)}treePosToPath(e){const t=[];let r=e.node;if(r.isText){const i=r.parent.findOffset(r);if(i===-1)throw new S(w.ErrInvalidArgument,"invalid treePos");const s=js(r.parent,i);t.push(s+e.offset),r=r.parent}else if(r.hasTextChild()){const i=js(r,e.offset);t.push(i)}else t.push(e.offset);for(;r.parent;){const i=r.parent.findOffset(r);if(i===-1)throw new S(w.ErrInvalidArgument,"invalid treePos");t.push(i),r=r.parent}return t.reverse()}pathToIndex(e){const t=this.pathToTreePos(e);return this.indexOf(t)}pathToTreePos(e){if(!e.length)throw new S(w.ErrInvalidArgument,"unacceptable path");let t=this.root;for(let r=0;r<e.length-1;r++){const i=e[r];if(t=t.children[i],!t)throw new S(w.ErrInvalidArgument,"unacceptable path")}if(t.hasTextChild())return f1(t,e[e.length-1]);if(t.children.length<e[e.length-1])throw new S(w.ErrInvalidArgument,"unacceptable path");return{node:t,offset:e[e.length-1]}}getRoot(){return this.root}get size(){return this.root.size}findPostorderRight(e){const{node:t,offset:r}=e;if(t.isText){if(t.size===r){const i=t.nextSibling;return i||t.parent}return t}return t.children.length===r?t:Oy(t.children[r])}indexOf(e){let{node:t}=e;const{offset:r}=e;let i=0,s=1;if(t.isText){i+=r;const o=t.parent,a=o.findOffset(t);if(a===-1)throw new S(w.ErrInvalidArgument,"invalid pos");i+=js(o,a),t=t.parent}else i+=js(t,r);for(;t!=null&&t.parent;){const o=t.parent,a=o.findOffset(t);if(a===-1)throw new S(w.ErrInvalidArgument,"invalid pos");i+=js(o,a),s++,t=t.parent}return i+s-1}indexToPath(e){const t=this.findTreePos(e);return this.treePosToPath(t)}}const h1=(n,e)=>n===e?0:n<e?-1:1;class m1{constructor(e,t,r){l(this,"key");l(this,"value");l(this,"parent");l(this,"left");l(this,"right");l(this,"isRed");this.key=e,this.value=t,this.isRed=r}}class g1{constructor(e){l(this,"stack");this.stack=[],this.traverseInorder(e)}traverseInorder(e){e&&(this.traverseInorder(e.left),this.stack.push({key:e.key,value:e.value}),this.traverseInorder(e.right))}}class Ry{constructor(e){l(this,"root");l(this,"comparator");l(this,"counter");this.comparator=typeof e<"u"?e:h1,this.counter=0}put(e,t){return this.root=this.putInternal(e,t,this.root),this.root.isRed=!1,t}get(e){const t=this.getInternal(e,this.root);return t?t.value:void 0}remove(e){!this.isRed(this.root.left)&&!this.isRed(this.root.right)&&(this.root.isRed=!0),this.root=this.removeInternal(this.root,e),this.root&&(this.root.isRed=!1)}getIterator(){return new g1(this.root)}values(){const e=[];for(const t of this.getIterator().stack)e.push(t.value);return e}floorEntry(e){let t=this.root;for(;t;){const r=this.comparator(e,t.key);if(r>0)if(t.right)t.right.parent=t,t=t.right;else return t;else if(r<0)if(t.left)t.left.parent=t,t=t.left;else{let i=t.parent,s=t;for(;i&&s===i.left;)s=i,i=i.parent;return i}else return t}}lastEntry(){if(!this.root)return this.root;let e=this.root;for(;e.right;)e=e.right;return e}size(){return this.counter}isEmpty(){return this.counter===0}getInternal(e,t){for(;t;){const r=this.comparator(e,t.key);if(r===0)return t;r<0?t=t.left:r>0&&(t=t.right)}}putInternal(e,t,r){if(!r)return this.counter+=1,new m1(e,t,!0);const i=this.comparator(e,r.key);return i<0?r.left=this.putInternal(e,t,r.left):i>0?r.right=this.putInternal(e,t,r.right):r.value=t,this.isRed(r.right)&&!this.isRed(r.left)&&(r=this.rotateLeft(r)),this.isRed(r.left)&&this.isRed(r.left.left)&&(r=this.rotateRight(r)),this.isRed(r.left)&&this.isRed(r.right)&&this.flipColors(r),r}removeInternal(e,t){if(this.comparator(t,e.key)<0)!this.isRed(e.left)&&!this.isRed(e.left.left)&&(e=this.moveRedLeft(e)),e.left=this.removeInternal(e.left,t);else{if(this.isRed(e.left)&&(e=this.rotateRight(e)),this.comparator(t,e.key)===0&&!e.right){this.counter-=1;return}if(!this.isRed(e.right)&&!this.isRed(e.right.left)&&(e=this.moveRedRight(e)),this.comparator(t,e.key)===0){this.counter-=1;const r=this.min(e.right);e.value=r.value,e.key=r.key,e.right=this.removeMin(e.right)}else e.right=this.removeInternal(e.right,t)}return this.fixUp(e)}min(e){return e.left?this.min(e.left):e}removeMin(e){if(e.left)return!this.isRed(e.left)&&!this.isRed(e.left.left)&&(e=this.moveRedLeft(e)),e.left=this.removeMin(e.left),this.fixUp(e)}fixUp(e){return this.isRed(e.right)&&(e=this.rotateLeft(e)),this.isRed(e.left)&&this.isRed(e.left.left)&&(e=this.rotateRight(e)),this.isRed(e.left)&&this.isRed(e.right)&&this.flipColors(e),e}moveRedLeft(e){return this.flipColors(e),this.isRed(e.right.left)&&(e.right=this.rotateRight(e.right),e=this.rotateLeft(e),this.flipColors(e)),e}moveRedRight(e){return this.flipColors(e),this.isRed(e.left.left)&&(e=this.rotateRight(e),this.flipColors(e)),e}isRed(e){return e&&e.isRed}rotateLeft(e){const t=e.right;return e.right=t.left,t.left=e,t.isRed=t.left.isRed,t.left.isRed=!0,t}rotateRight(e){const t=e.left;return e.left=t.right,t.right=e,t.isRed=t.right.isRed,t.right.isRed=!0,t}flipColors(e){e.isRed=!e.isRed,e.left.isRed=!e.left.isRed,e.right.isRed=!e.right.isRed}}class Jt{constructor(e,t){l(this,"parentID");l(this,"leftSiblingID");this.parentID=e,this.leftSiblingID=t}static of(e,t){return new Jt(e,t)}static fromTreePos(e){const{offset:t}=e;let{node:r}=e,i;return r.isText?(r.parent.children[0]===r&&t===0?i=r.parent:i=r,r=r.parent):t===0?i=r:i=r.children[t-1],Jt.of(r.id,Ce.of(i.getCreatedAt(),i.getOffset()+t))}getParentID(){return this.parentID}static fromStruct(e){return Jt.of(Ce.of(xt.fromStruct(e.parentID.createdAt),e.parentID.offset),Ce.of(xt.fromStruct(e.leftSiblingID.createdAt),e.leftSiblingID.offset))}toStruct(){return{parentID:{createdAt:this.getParentID().getCreatedAt().toStruct(),offset:this.getParentID().getOffset()},leftSiblingID:{createdAt:this.getLeftSiblingID().getCreatedAt().toStruct(),offset:this.getLeftSiblingID().getOffset()}}}toTreeNodePair(e){const t=this.getParentID(),r=this.getLeftSiblingID(),i=e.findFloorNode(t);let s=e.findFloorNode(r);if(!i||!s)throw new S(w.ErrRefused,`cannot find node of CRDTTreePos(${t.toTestString()}, ${r.toTestString()})`);return!r.equals(t)&&r.getOffset()>0&&r.getOffset()===s.id.getOffset()&&s.insPrevID&&(s=e.findFloorNode(s.insPrevID)),[i,s]}getLeftSiblingID(){return this.leftSiblingID}equals(e){return this.getParentID().getCreatedAt().equals(e.getParentID().getCreatedAt())&&this.getParentID().getOffset()===e.getParentID().getOffset()&&this.getLeftSiblingID().getCreatedAt().equals(e.getLeftSiblingID().getCreatedAt())&&this.getLeftSiblingID().getOffset()===e.getLeftSiblingID().getOffset()}}class Ce{constructor(e,t){l(this,"createdAt");l(this,"offset");this.createdAt=e,this.offset=t}static of(e,t){return new Ce(e,t)}static fromStruct(e){return Ce.of(xt.fromStruct(e.createdAt),e.offset)}static createComparator(){return(e,t)=>{const r=e.getCreatedAt().compare(t.getCreatedAt());return r!==0?r:e.getOffset()>t.getOffset()?1:e.getOffset()<t.getOffset()?-1:0}}getCreatedAt(){return this.createdAt}equals(e){return this.createdAt.compare(e.createdAt)===0&&this.offset===e.offset}getOffset(){return this.offset}setOffset(e){this.offset=e}toStruct(){return{createdAt:this.createdAt.toStruct(),offset:this.offset}}toIDString(){return`${this.createdAt.toIDString()}:${this.offset}`}toTestString(){return`${this.createdAt.toTestString()}/${this.offset}`}}class rt extends u1{constructor(t,r,i,s,o){super(r);l(this,"id");l(this,"removedAt");l(this,"attrs");l(this,"insPrevID");l(this,"insNextID");l(this,"_value","");this.id=t,this.removedAt=o,s&&(this.attrs=s),typeof i=="string"?this.value=i:Array.isArray(i)&&(this._children=i)}toIDString(){return this.id.toIDString()}getRemovedAt(){return this.removedAt}static create(t,r,i,s){return new rt(t,r,i,s)}deepcopy(){var r;const t=new rt(this.id,this.type);return t.removedAt=this.removedAt,t._value=this._value,t.size=this.size,t.attrs=(r=this.attrs)==null?void 0:r.deepcopy(),t._children=this._children.map(i=>{const s=i.deepcopy();return s.parent=t,s}),t.insPrevID=this.insPrevID,t.insNextID=this.insNextID,t}get value(){if(!this.isText)throw new S(w.ErrInvalidType,`cannot get value of element node: ${this.type}`);return this._value}set value(t){if(!this.isText)throw new S(w.ErrInvalidType,`cannot set value of element node: ${this.type}`);this._value=t,this.size=t.length}get isRemoved(){return!!this.removedAt}remove(t){const r=!this.removedAt;(!this.removedAt||this.removedAt.compare(t)>0)&&(this.removedAt=t),r&&this.updateAncestorsSize()}cloneText(t){return new rt(Ce.of(this.id.getCreatedAt(),t),this.type,void 0,void 0,this.removedAt)}cloneElement(t){return new rt(Ce.of(t(),0),this.type,void 0,void 0,this.removedAt)}split(t,r,i){const[s,o]=this.isText?this.splitText(r,this.id.getOffset()):this.splitElement(r,i);if(s){if(s.insPrevID=this.id,this.insNextID){const a=t.findFloorNode(this.insNextID);a.insPrevID=s.id,s.insNextID=this.insNextID}this.insNextID=s.id,t.registerNode(s)}return[s,o]}getCreatedAt(){return this.id.getCreatedAt()}getOffset(){return this.id.getOffset()}canDelete(t,r){return this.getCreatedAt().getLamport()<=r&&(!this.removedAt||t.after(this.removedAt))}canStyle(t,r){return this.isText?!1:this.getCreatedAt().getLamport()<=r&&(!this.removedAt||t.after(this.removedAt))}setAttrs(t,r){this.attrs||(this.attrs=new br);const i=[];for(const[s,o]of Object.entries(t))i.push(this.attrs.set(s,o,r));return i}purge(t){this.attrs&&this.attrs.purge(t)}getDataSize(){const t={data:0,meta:0};if(this.isText&&(t.data+=this.size*2),this.id&&(t.meta+=an),this.removedAt&&(t.meta+=an),this.attrs)for(const r of this.attrs){if(r.getRemovedAt())continue;const i=r.getDataSize();t.meta+=i.meta,t.data+=i.data}return t}getGCPairs(){const t=[];if(!this.attrs)return t;for(const r of this.attrs)r.getRemovedAt()&&t.push({parent:this,child:r});return t}}function df(n){var t;if(n.isText){const r=n;return{type:r.type,value:r.value}}const e={type:n.type,children:n.children.map(df)};return n.attrs&&(e.attributes=Cr((t=n.attrs)==null?void 0:t.toObject())),e}function md(n){if(n.isText)return n.value;let e="";return n.attrs&&n.attrs.size()&&(e=" "+Array.from(n.attrs).filter(t=>!t.isRemoved()).sort((t,r)=>t.getKey().localeCompare(r.getKey())).map(t=>{const r=JSON.parse(t.getValue());return typeof r=="string"?`${t.getKey()}="${r}"`:`${t.getKey()}="${rn(t.getValue())}"`}).join(" ")),`<${n.type}${e}>${n.children.map(t=>md(t)).join("")}</${n.type}>`}function Ly(n){if(n.isText){const e=n;return{type:e.type,value:e.value,size:e.size,isRemoved:e.isRemoved}}return{type:n.type,children:n.children.map(Ly),size:n.size,isRemoved:n.isRemoved}}class at extends qo{constructor(t,r){super(r);l(this,"indexTree");l(this,"nodeMapByID");this.indexTree=new d1(t),this.nodeMapByID=new Ry(Ce.createComparator()),this.indexTree.traverseAll(i=>{this.nodeMapByID.put(i.id,i)})}static create(t,r){return new at(t,r)}findFloorNode(t){const r=this.nodeMapByID.floorEntry(t);if(!(!r||!r.key.getCreatedAt().equals(t.getCreatedAt())))return r.value}registerNode(t){this.nodeMapByID.put(t.id,t)}findNodesAndSplitText(t,r){let i={data:0,meta:0};const[s,o]=t.toTreeNodePair(this);let a=o;const u=s===a,c=a.parent&&!u?a.parent:s;if(a.isText){const[,d]=a.split(this,t.getLeftSiblingID().getOffset()-a.id.getOffset());i=d}if(r){const d=c.allChildren,h=u?0:d.indexOf(a)+1;for(let m=h;m<d.length;m++){const p=d[m];if(!p.id.getCreatedAt().after(r))break;a=p}}return[[c,a],i]}style(t,r,i,s){const o={data:0,meta:0},[[a,u],c]=this.findNodesAndSplitText(t[0],i),[[d,h],m]=this.findNodesAndSplitText(t[1],i);xe(o,m,c);const p=[],k=r?Cr(r):{},T=[];return this.traverseInPosRange(a,u,d,h,([C,y])=>{var A;const g=C.getCreatedAt().getActorID();let v=ao;if(s!=null&&(v=s.get(g)?s.get(g):0n),C.canStyle(i,v)&&r){const P=C.setAttrs(r,i),N=P.reduce((M,[,J])=>(J&&(M[J.getKey()]=k[J.getKey()]),M),{}),O=C.parent,R=C.prevSibling||C.parent;Object.keys(N).length>0&&p.push({type:"style",from:this.toIndex(O,R),to:this.toIndex(C,C),fromPath:this.toPath(O,R),toPath:this.toPath(C,C),actor:i.getActorID(),value:N});for(const[M]of P)M&&T.push({parent:C,child:M});for(const[M]of Object.entries(k)){const J=(A=C.attrs)==null?void 0:A.getNodeMapByKey().get(M);J!==void 0&&y!==me.End&&xe(o,J.getDataSize())}}}),[T,p,o]}removeStyle(t,r,i,s){const o={data:0,meta:0},[[a,u],c]=this.findNodesAndSplitText(t[0],i),[[d,h],m]=this.findNodesAndSplitText(t[1],i);xe(o,m,c);const p=[],k=[];return this.traverseInPosRange(a,u,d,h,([T])=>{const C=T.getCreatedAt().getActorID();let y=ao;if(s!=null&&(y=s.get(C)?s.get(C):0n),T.canStyle(i,y)&&r){T.attrs||(T.attrs=new br);for(const A of r){const P=T.attrs.remove(A,i);for(const N of P)k.push({parent:T,child:N})}const g=T.parent,v=T.prevSibling||T.parent;p.push({actor:i.getActorID(),type:"removeStyle",from:this.toIndex(g,v),to:this.toIndex(T,T),fromPath:this.toPath(g,v),toPath:this.toPath(T,T),value:r})}}),[k,p,o]}edit(t,r,i,s,o,a){const u={data:0,meta:0},[[c,d],h]=this.findNodesAndSplitText(t[0],s),[[m,p],k]=this.findNodesAndSplitText(t[1],s);xe(u,k,h);const T=this.toIndex(c,d),C=this.toPath(c,d),y=[],g=[],v=[];this.traverseInPosRange(c,d,m,p,([N,O],R)=>{if(O===me.Start&&!R)for(const Fe of N.children)v.push(Fe);const M=N.getCreatedAt().getActorID();let J=ao;a!=null&&(J=a.get(M)?a.get(M):0n),(N.canDelete(s,J)||y.includes(N.parent))&&((O===me.Text||O===me.Start)&&y.push(N),g.push([N,O]))});const A=this.makeDeletionChanges(g,s),P=[];for(const N of y)N.remove(s),N.isRemoved&&P.push({parent:this,child:N});for(const N of v)N.removedAt||c.append(N);if(i>0){let N=0,O=c,R=d;for(;N<i;)O.split(this,O.findOffset(R)+1,o),R=O,O=O.parent,N++;A.push({type:"content",from:T,to:T,fromPath:C,toPath:C,actor:s.getActorID()})}if(r!=null&&r.length){const N=[];let O=d;for(const R of r)O===c?c.insertAt(R,0):c.insertAfter(R,O),O=R,ru(R,M=>{c.isRemoved?(M.remove(s),P.push({parent:this,child:M})):xe(u,M.getDataSize()),this.nodeMapByID.put(M.id,M)}),R.isRemoved||N.push(R);if(N.length){const R=N.map(M=>df(M));A.length&&A[A.length-1].from===T?A[A.length-1].value=R:A.push({type:"content",from:T,to:T,fromPath:C,toPath:C,actor:s.getActorID(),value:R})}}return[A,P,u]}editT(t,r,i,s,o){const a=this.findPos(t[0]),u=this.findPos(t[1]);this.edit([a,u],r,i,s,o)}move(t,r,i){throw new S(w.ErrUnimplemented,`not implemented: ${t}, ${r}, ${i}`)}pathToTreePos(t){return this.indexTree.pathToTreePos(t)}purge(t){var s;(s=t.parent)==null||s.removeChild(t),this.nodeMapByID.remove(t.id);const r=t.insPrevID,i=t.insNextID;if(r){const o=this.findFloorNode(r);o.insNextID=i}if(i){const o=this.findFloorNode(i);o.insPrevID=r}t.insPrevID=void 0,t.insNextID=void 0}getGCPairs(){const t=[];return this.indexTree.traverse(r=>{r.getRemovedAt()&&t.push({parent:this,child:r});for(const i of r.getGCPairs())t.push(i)}),t}findPos(t,r=!0){const i=this.indexTree.findTreePos(t,r);return Jt.fromTreePos(i)}pathToPosRange(t){const r=this.pathToIndex(t);return[this.findPos(r),this.findPos(r+1)]}pathToPos(t){const r=this.indexTree.pathToIndex(t);return this.findPos(r)}getRoot(){return this.indexTree.getRoot()}getSize(){return this.indexTree.size}getNodeSize(){return this.nodeMapByID.size()}getIndexTree(){return this.indexTree}toXML(){return md(this.indexTree.getRoot())}getDataSize(){const t={data:0,meta:0};return this.indexTree.traverse(r=>{if(r.getRemovedAt())return;const i=r.getDataSize();t.data+=i.data,t.meta+=i.meta}),{data:t.data,meta:t.meta+this.getMetaUsage()}}toJSON(){return JSON.stringify(this.getRootTreeNode())}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:JSON.parse(this.toJSON()),type:"YORKIE_TREE"}}toJSInfoForTest(){const t=this.indexTree.getRoot(),r=(i,s=void 0,o=void 0,a=0)=>{var p,k,T,C;let u,c,d;const h=i.isText?{node:i,offset:0}:s&&o?this.toTreePos(s,o):null;h&&(u=this.indexTree.indexOf(h),c=this.indexTree.treePosToPath(h),d=Jt.fromTreePos(h).toStruct());const m={type:i.type,parent:s==null?void 0:s.id.toTestString(),size:i.size,id:i.id.toTestString(),removedAt:(p=i.removedAt)==null?void 0:p.toTestString(),insPrev:(k=i.insPrevID)==null?void 0:k.toTestString(),insNext:(T=i.insNextID)==null?void 0:T.toTestString(),value:i.isText?i.value:void 0,isRemoved:i.isRemoved,children:[],depth:a,attributes:i.attrs?Cr((C=i.attrs)==null?void 0:C.toObject()):void 0,index:u,path:c,pos:d};for(let y=0;y<i.allChildren.length;y++){const g=y===0?i:i.allChildren[y-1];m.children.push(r(i.allChildren[y],i,g,a+1))}return m};return r(t)}getRootTreeNode(){return df(this.indexTree.getRoot())}toTestTreeNode(){return Ly(this.indexTree.getRoot())}toSortedJSON(){return this.toJSON()}deepcopy(){const t=this.getRoot();return new at(t.deepcopy(),this.getCreatedAt())}toPath(t,r){const i=this.toTreePos(t,r);return i?this.indexTree.treePosToPath(i):[]}toIndex(t,r){const i=this.toTreePos(t,r);return i?this.indexTree.indexOf(i):-1}indexToPath(t){return this.indexTree.indexToPath(t)}pathToIndex(t){return this.indexTree.pathToIndex(t)}indexRangeToPosRange(t){const r=this.findPos(t[0]);return t[0]===t[1]?[r,r]:[r,this.findPos(t[1])]}indexRangeToPosStructRange(t){const[r,i]=t,s=this.findPos(r);return r===i?[s.toStruct(),s.toStruct()]:[s.toStruct(),this.findPos(i).toStruct()]}posRangeToPathRange(t){const[[r,i]]=this.findNodesAndSplitText(t[0]),[[s,o]]=this.findNodesAndSplitText(t[1]);return[this.toPath(r,i),this.toPath(s,o)]}posRangeToIndexRange(t){const[[r,i]]=this.findNodesAndSplitText(t[0]),[[s,o]]=this.findNodesAndSplitText(t[1]);return[this.toIndex(r,i),this.toIndex(s,o)]}traverseInPosRange(t,r,i,s,o){const a=this.toIndex(t,r),u=this.toIndex(i,s);return this.indexTree.tokensBetween(a,u,o)}toTreePos(t,r){if(!t||!r)return;if(t.isRemoved){let s;for(;t.isRemoved;)s=t,t=s.parent;const o=t.findOffset(s);return{node:t,offset:o}}if(t===r)return{node:t,offset:0};let i=t.findOffset(r);if(!r.isRemoved){if(r.isText)return{node:r,offset:r.paddedSize};i++}return{node:t,offset:i}}makeDeletionChanges(t,r){const i=[],s=[];let o=null,a=null;for(let u=0;u<t.length;u++){const c=t[u],d=t[u+1];o||(o=c),a=c;const h=this.findRightToken(c);(!h||!d||h[0]!==d[0]||h[1]!==d[1])&&(s.push([o,a]),o=null,a=null)}for(const u of s){const[c,d]=u,[h,m]=this.findLeftToken(c),[p,k]=d,T=m===me.Start?h:h.parent,C=k===me.Start?p:p.parent,y=this.toIndex(T,h),g=this.toIndex(C,p);y<g&&(i.length>0&&y===i[i.length-1].to?(i[i.length-1].to=g,i[i.length-1].toPath=this.toPath(C,p)):i.push({type:"content",from:y,to:g,fromPath:this.toPath(T,h),toPath:this.toPath(C,p),actor:r.getActorID()}))}return i.reverse()}findRightToken([t,r]){if(r===me.Start){const u=t.allChildren;return u.length>0?[u[0],u[0].isText?me.Text:me.Start]:[t,me.End]}const i=t.parent,s=i.allChildren,o=s.indexOf(t);if(i&&o===s.length-1)return[i,me.End];const a=s[o+1];return[a,a.isText?me.Text:me.Start]}findLeftToken([t,r]){if(r===me.End){const u=t.allChildren;if(u.length>0){const c=u[u.length-1];return[c,c.isText?me.Text:me.End]}return[t,me.Start]}const i=t.parent,s=i.allChildren,o=s.indexOf(t);if(i&&o===0)return[i,me.Start];const a=s[o-1];return[a,a.isText?me.Text:me.End]}}class Ho extends Pt{constructor(t,r,i,s,o,a){super(t,a);l(this,"fromPos");l(this,"toPos");l(this,"contents");l(this,"splitLevel");this.fromPos=r,this.toPos=i,this.contents=s,this.splitLevel=o}static create(t,r,i,s,o,a){return new Ho(t,r,i,s,o,a)}execute(t,r,i){var h;const s=t.findByCreatedAt(this.getParentCreatedAt());if(!s)throw new S(w.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(s instanceof at))throw new S(w.ErrInvalidArgument,"fail to execute, only Tree can execute edit");const o=this.getExecutedAt(),a=s,[u,c,d]=a.edit([this.fromPos,this.toPos],(h=this.contents)==null?void 0:h.map(m=>m.deepcopy()),this.splitLevel,o,(()=>{let m=o.getDelimiter();return this.contents!==void 0&&(m+=this.contents.length),()=>xt.of(o.getLamport(),++m,o.getActorID())})(),i);t.acc(d);for(const m of c)t.registerGCPair(m);return{opInfos:u.map(({from:m,to:p,value:k,splitLevel:T,fromPath:C,toPath:y})=>({type:"tree-edit",path:t.createPath(this.getParentCreatedAt()),from:m,to:p,value:k,splitLevel:T,fromPath:C,toPath:y}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const t=this.getParentCreatedAt().toTestString(),r=`${this.fromPos.getLeftSiblingID().getCreatedAt().toTestString()}/${this.fromPos.getLeftSiblingID().getOffset()}`,i=`${this.toPos.getLeftSiblingID().getCreatedAt().toTestString()}/${this.toPos.getLeftSiblingID().getOffset()}`,s=this.contents||[];return`${t}.EDIT(${r},${i},${s.map(o=>md(o)).join("")})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getContents(){return this.contents}getSplitLevel(){return this.splitLevel}}class cs{constructor(e){l(this,"vector");this.vector=e||new Map}set(e,t){this.vector.set(e,t)}unset(e){this.vector.delete(e)}get(e){return this.vector.get(e)}maxLamport(){let e=BigInt(0);for(const[,t]of this)t>e&&(e=t);return e}max(e){const t=new Map;for(const[r,i]of e){const s=this.vector.get(r),o=s&&s>i?s:i;t.set(r,o)}for(const[r,i]of this){const s=e.get(r),o=s&&s>i?s:i;t.set(r,o)}return new cs(t)}afterOrEqual(e){const t=this.vector.get(e.getActorID());return t===void 0?!1:t>=e.getLamport()}deepcopy(){const e=new Map;for(const[t,r]of this.vector)e.set(t,r);return new cs(e)}filter(e){const t=new Map;for(const[r]of e){const i=this.vector.get(r);i!==void 0&&t.set(r,i)}return new cs(t)}size(){return this.vector.size}*[Symbol.iterator](){for(const[e,t]of this.vector)yield[e,t]}}const By=new cs(new Map);class bt{constructor(e,t,r,i,s){l(this,"clientSeq");l(this,"serverSeq");l(this,"actor");l(this,"lamport");l(this,"versionVector");this.clientSeq=e,this.serverSeq=s,this.lamport=t,this.versionVector=i,this.actor=r}hasClocks(){return this.versionVector.size()>0&&this.lamport!=uf}static of(e,t,r,i,s){return new bt(e,t,r,i,s)}next(e=!1){if(e)return new bt(this.clientSeq+1,this.lamport,this.actor,By,uf);const t=this.versionVector.deepcopy();return t.set(this.actor,this.lamport+1n),new bt(this.clientSeq+1,this.lamport+1n,this.actor,t)}syncClocks(e){if(!e.hasClocks())return this;const t=e.lamport>this.lamport?e.lamport+1n:this.lamport+1n,r=this.versionVector.max(e.versionVector),i=new bt(this.clientSeq,t,this.actor,r);return i.versionVector.set(this.actor,t),i}setClocks(e,t){const r=e>this.lamport?e+1n:this.lamport+1n;t.unset(nu);const i=this.versionVector.max(t);return i.set(this.actor,r),bt.of(this.clientSeq,r,this.actor,i)}createTimeTicket(e){return xt.of(this.lamport,e,this.actor)}setActor(e){return new bt(this.clientSeq,this.lamport,e,this.versionVector,this.serverSeq)}setLamport(e){return new bt(this.clientSeq,e,this.actor,this.versionVector,this.serverSeq)}setVersionVector(e){return new bt(this.clientSeq,this.lamport,this.actor,e,this.serverSeq)}getClientSeq(){return this.clientSeq}getServerSeq(){return this.serverSeq?this.serverSeq.toString():""}getLamport(){return this.lamport}getLamportAsString(){return this.lamport.toString()}getActorID(){return this.actor}getVersionVector(){return this.versionVector}toTestString(){return`${this.lamport.toString()}:${this.actor.slice(-2)}:${this.clientSeq}`}}const p1=new bt(0,0n,nu,By);class xs{constructor({id:e,operations:t,presenceChange:r,message:i}){l(this,"id");l(this,"operations");l(this,"presenceChange");l(this,"message");this.id=e,this.operations=t||[],this.presenceChange=r,this.message=i}static create({id:e,operations:t,presenceChange:r,message:i}){return new xs({id:e,operations:t,presenceChange:r,message:i})}getID(){return this.id}getMessage(){return this.message}hasOperations(){return this.operations.length>0}getOperations(){return this.operations}setActor(e){for(const t of this.operations)t.setActor(e);this.id=this.id.setActor(e)}hasPresenceChange(){return this.presenceChange!==void 0}getPresenceChange(){return this.presenceChange}execute(e,t,r){const i=[],s=[];for(const o of this.operations){const a=o.execute(e,r,this.id.getVersionVector());if(!a)continue;const{opInfos:u,reverseOp:c}=a;i.push(...u),c&&s.unshift(c)}return this.presenceChange&&(this.presenceChange.type===cn.Put?t.set(this.id.getActorID(),Bt(this.presenceChange.presence)):t.delete(this.id.getActorID())),{opInfos:i,reverseOps:s}}toTestString(){return`${this.operations.map(e=>e.toTestString()).join(",")}`}toStruct(){return{changeID:ce.bytesToHex(ce.toChangeID(this.getID()).toBinary()),message:this.getMessage(),operations:this.getOperations().map(e=>ce.bytesToHex(ce.toOperation(e).toBinary())),presenceChange:this.getPresenceChange()}}static fromStruct(e){const{changeID:t,operations:r,presenceChange:i,message:s}=e;return xs.create({id:ce.bytesToChangeID(ce.hexToBytes(t)),operations:r==null?void 0:r.map(o=>ce.bytesToOperation(ce.hexToBytes(o))),presenceChange:i,message:s})}}class iu{constructor(e,t,r,i,s,o){l(this,"documentKey");l(this,"checkpoint");l(this,"isRemoved");l(this,"changes");l(this,"snapshot");l(this,"versionVector");this.documentKey=e,this.checkpoint=t,this.isRemoved=r,this.changes=i,this.snapshot=o,this.versionVector=s}static create(e,t,r,i,s,o){return new iu(e,t,r,i,s,o)}getDocumentKey(){return this.documentKey}getCheckpoint(){return this.checkpoint}getIsRemoved(){return this.isRemoved}getChanges(){return this.changes}hasChanges(){return this.changes.length>0}getChangeSize(){return this.changes.length}hasSnapshot(){return!!this.snapshot&&!!this.snapshot.length}getSnapshot(){return this.snapshot}getVersionVector(){return this.versionVector}}class fs{constructor(e,t){l(this,"serverSeq");l(this,"clientSeq");this.serverSeq=e,this.clientSeq=t}static of(e,t){return new fs(e,t)}increaseClientSeq(e){return e===0?this:new fs(this.serverSeq,this.clientSeq+e)}forward(e){if(this.equals(e))return this;const t=this.serverSeq>e.serverSeq?this.serverSeq:e.serverSeq,r=Math.max(this.clientSeq,e.clientSeq);return fs.of(t,r)}getServerSeqAsString(){return this.serverSeq.toString()}getClientSeq(){return this.clientSeq}getServerSeq(){return this.serverSeq}equals(e){return this.clientSeq===e.clientSeq&&this.serverSeq==e.serverSeq}toTestString(){return`serverSeq=${this.serverSeq}, clientSeq=${this.clientSeq}`}}const y1=new fs(0n,0);class un{constructor(e,t){l(this,"createdAt");l(this,"offset");this.createdAt=e,this.offset=t}static of(e,t){return new un(e,t)}static fromStruct(e){return un.of(xt.fromStruct(e.createdAt),e.offset)}getCreatedAt(){return this.createdAt}getOffset(){return this.offset}equals(e){return this.createdAt.compare(e.createdAt)===0&&this.offset===e.offset}hasSameCreatedAt(e){return this.createdAt.compare(e.createdAt)===0}split(e){return new un(this.createdAt,this.offset+e)}toStruct(){return{createdAt:this.createdAt.toStruct(),offset:this.offset}}toTestString(){return`${this.createdAt.toTestString()}:${this.offset}`}toIDString(){return`${this.createdAt.toIDString()}:${this.offset}`}}const v1=un.of(Is,0);class Vt{constructor(e,t){l(this,"id");l(this,"relativeOffset");this.id=e,this.relativeOffset=t}static of(e,t){return new Vt(e,t)}static fromStruct(e){const t=un.fromStruct(e.id);return Vt.of(t,e.relativeOffset)}getID(){return this.id}getRelativeOffset(){return this.relativeOffset}getAbsoluteID(){return un.of(this.id.getCreatedAt(),this.id.getOffset()+this.relativeOffset)}toTestString(){return`${this.id.toTestString()}:${this.relativeOffset}`}toStruct(){return{id:this.id.toStruct(),relativeOffset:this.relativeOffset}}equals(e){return this.id.equals(e.id)?this.relativeOffset===e.relativeOffset:!1}}class si extends Iy{constructor(t,r,i){super(r);l(this,"id");l(this,"removedAt");l(this,"prev");l(this,"next");l(this,"insPrev");l(this,"insNext");this.id=t,this.removedAt=i}static create(t,r){return new si(t,r)}static createComparator(){return(t,r)=>{const i=t.getCreatedAt().compare(r.getCreatedAt());return i!==0?i:t.getOffset()>r.getOffset()?1:t.getOffset()<r.getOffset()?-1:0}}getID(){return this.id}getCreatedAt(){return this.id.getCreatedAt()}getLength(){return this.removedAt?0:this.getContentLength()}getContentLength(){return this.value&&this.value.length||0}getPrev(){return this.prev}getNext(){return this.next}getInsPrev(){return this.insPrev}getInsNext(){return this.insNext}getInsPrevID(){return this.insPrev.getID()}setPrev(t){this.prev=t,t&&(t.next=this)}setNext(t){this.next=t,t&&(t.prev=this)}setInsPrev(t){this.insPrev=t,t&&(t.insNext=this)}setInsNext(t){this.insNext=t,t&&(t.insPrev=this)}hasNext(){return!!this.next}hasInsPrev(){return!!this.insPrev}isRemoved(){return!!this.removedAt}getRemovedAt(){return this.removedAt}split(t){return new si(this.id.split(t),this.splitValue(t),this.removedAt)}canDelete(t,r){const i=!this.removedAt;return this.getCreatedAt().getLamport()<=r&&(!this.removedAt||t.after(this.removedAt))?i:!1}canStyle(t,r){return this.getCreatedAt().getLamport()<=r&&(!this.removedAt||t.after(this.removedAt))}remove(t){this.removedAt=t}createPosRange(){return[Vt.of(this.id,0),Vt.of(this.id,this.getLength())]}getDataSize(){const t=this.value.getDataSize();return this.id&&(t.meta+=an),this.removedAt&&(t.meta+=an),t}deepcopy(){return new si(this.id,this.value,this.removedAt)}toTestString(){return`${this.id.toTestString()} ${this.value?this.value:""}`}splitValue(t){const r=this.value;return this.value=r.substring(0,t),r.substring(t,r.length)}toIDString(){return this.id.toIDString()}}class Ns{constructor(){l(this,"head");l(this,"treeByIndex");l(this,"treeByID");this.head=si.create(v1),this.treeByIndex=new Bo,this.treeByID=new Ry(si.createComparator()),this.treeByIndex.insert(this.head),this.treeByID.put(this.head.getID(),this.head)}static create(){return new Ns}edit(e,t,r,i){const s={data:0,meta:0},[o,a,u]=this.findNodeWithSplit(e[1],t),[c,d,h]=this.findNodeWithSplit(e[0],t);xe(s,a,d);const m=this.findBetween(h,u),[p,k]=this.deleteNodes(m,t,i),T=u?u.getID():o.getID();let C=Vt.of(T,0);if(r){const g=this.posToIndex(c.createPosRange()[1],!0),v=this.insertAfter(c,si.create(un.of(t,0),r));xe(s,v.getDataSize()),p.length&&p[p.length-1].from===g?p[p.length-1].value=r:p.push({actor:t.getActorID(),from:g,to:g,value:r}),C=Vt.of(v.getID(),v.getContentLength())}const y=[];for(const[,g]of k)y.push({parent:this,child:g});return[C,y,s,p]}indexToPos(e){const[t,r]=this.treeByIndex.find(e),i=t;return Vt.of(i.getID(),r)}findIndexesFromRange(e){const[t,r]=e;return[this.posToIndex(t,!1),this.posToIndex(r,!0)]}posToIndex(e,t){const r=e.getAbsoluteID(),i=t?this.findFloorNodePreferToLeft(r):this.findFloorNode(r);if(!i)throw new S(w.ErrInvalidArgument,`the node of the given id should be found: ${r.toTestString()}`);const s=this.treeByIndex.indexOf(i),o=i.isRemoved()?0:r.getOffset()-i.getID().getOffset();return s+o}findNode(e){return this.findFloorNode(e)}get length(){return this.treeByIndex.length}getTreeByIndex(){return this.treeByIndex}getTreeByID(){return this.treeByID}toString(){const e=[];for(const t of this)t.isRemoved()||e.push(t.getValue());return e.join("")}*[Symbol.iterator](){let e=this.head.getNext();for(;e;)yield e,e=e.getNext()}getHead(){return this.head}deepcopy(){const e=new Ns;let t=this.head.getNext(),r=e.head,i;for(;t;){if(i=e.insertAfter(r,t.deepcopy()),t.hasInsPrev()){const s=e.findNode(t.getInsPrevID());i.setInsPrev(s)}r=i,t=t.getNext()}return e}toTestString(){const e=[];let t=this.head;for(;t;)t.isRemoved()?e.push(`{${t.toTestString()}}`):e.push(`[${t.toTestString()}]`),t=t.getNext();return e.join("")}insertAfter(e,t){const r=e.getNext();return t.setPrev(e),r&&r.setPrev(t),this.treeByID.put(t.getID(),t),this.treeByIndex.insertAfter(e,t),t}findNodeWithSplit(e,t){const r=e.getAbsoluteID();let i=this.findFloorNodePreferToLeft(r);const s=r.getOffset()-i.getID().getOffset(),[,o]=this.splitNode(i,s);for(;i.hasNext()&&i.getNext().getCreatedAt().after(t);)i=i.getNext();return[i,o,i.getNext()]}findFloorNodePreferToLeft(e){let t=this.findFloorNode(e);if(!t)throw new S(w.ErrInvalidArgument,`the node of the given id should be found: ${e.toTestString()}`);if(e.getOffset()>0&&t.getID().getOffset()==e.getOffset()){if(!t.hasInsPrev())return t;t=t.getInsPrev()}return t}findFloorNode(e){const t=this.treeByID.floorEntry(e);if(t&&!(!t.key.equals(e)&&!t.key.hasSameCreatedAt(e)))return t.value}findBetween(e,t){const r=[];let i=e;for(;i&&i!==t;)r.push(i),i=i.getNext();return r}splitNode(e,t){const r={data:0,meta:0};if(t>e.getContentLength())throw new S(w.ErrInvalidArgument,"offset should be less than or equal to length");if(t===0)return[e,r];if(t===e.getContentLength())return[e.getNext(),r];const i=e.getDataSize(),s=e.split(t);this.treeByIndex.updateWeight(s),this.insertAfter(e,s);const o=e.getInsNext();return o&&o.setInsPrev(s),s.setInsPrev(e),xe(r,e.getDataSize(),s.getDataSize()),us(r,i),[s,r]}deleteNodes(e,t,r){if(!e.length)return[[],new Map];const[i,s]=this.filterNodes(e,t,r),o=new Map,a=this.makeChanges(s,t);for(const u of i)o.set(u.getID().toIDString(),u),u.remove(t);return this.deleteIndexNodes(s),[a,o]}filterNodes(e,t,r){const i=[],s=[],[o,a]=this.findEdgesOfCandidates(e);s.push(o);for(const u of e){const c=u.getCreatedAt().getActorID();let d=ao;r!=null&&(d=r.get(c)?r.get(c):0n),u.canDelete(t,d)?i.push(u):s.push(u)}return s.push(a),[i,s]}findEdgesOfCandidates(e){return[e[0].getPrev(),e[e.length-1].getNext()]}makeChanges(e,t){const r=[];let i,s;for(let o=0;o<e.length-1;o++){const a=e[o],u=e[o+1];a.getNext()!=u&&([i]=this.findIndexesFromRange(a.getNext().createPosRange()),u?[,s]=this.findIndexesFromRange(u.getPrev().createPosRange()):s=this.treeByIndex.length,i<s&&r.push({actor:t.getActorID(),from:i,to:s}))}return r.reverse()}deleteIndexNodes(e){for(let t=0;t<e.length-1;t++){const r=e[t],i=e[t+1];r.getNext()!=i&&this.treeByIndex.deleteRange(r,i)}}purge(e){this.treeByIndex.delete(e),this.treeByID.remove(e.getID());const t=e.getPrev(),r=e.getNext(),i=e.getInsPrev(),s=e.getInsNext();t&&t.setNext(r),r&&r.setPrev(t),e.setPrev(void 0),e.setNext(void 0),i&&i.setInsNext(s),s&&s.setInsPrev(i),e.setInsPrev(void 0),e.setInsNext(void 0)}}const xm=n=>n<0?Math.ceil(n):Math.floor(n);var fn=(n=>(n[n.Int=0]="Int",n[n.Long=1]="Long",n))(fn||{});class Xe extends qo{constructor(t,r,i){super(i);l(this,"valueType");l(this,"value");switch(this.valueType=t,t){case 0:typeof r=="number"?r>Math.pow(2,31)-1||r<-Math.pow(2,31)?this.value=K.fromNumber(r).toInt():this.value=xm(r):this.value=r.toInt();break;case 1:typeof r=="number"?this.value=K.fromNumber(r):this.value=r;break;default:throw new S(w.ErrUnimplemented,`unimplemented type: ${t}`)}}static create(t,r,i){return new Xe(t,r,i)}static valueFromBytes(t,r){switch(t){case 0:return r[0]|r[1]<<8|r[2]<<16|r[3]<<24;case 1:return K.fromBytesLE(Array.from(r));default:throw new S(w.ErrUnimplemented,`unimplemented type: ${t}`)}}getDataSize(){return{data:this.valueType===0?4:8,meta:this.getMetaUsage()}}toJSON(){return`${this.value}`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:this.value,type:"YORKIE_COUNTER"}}deepcopy(){const t=Xe.create(this.valueType,this.value,this.getCreatedAt());return t.setMovedAt(this.getMovedAt()),t}getType(){return this.valueType}static getCounterType(t){switch(typeof t){case"object":return t instanceof K?1:void 0;case"number":return t>Math.pow(2,31)-1||t<-Math.pow(2,31)?1:0;default:return}}static isSupport(t){return!!Xe.getCounterType(t)}static isInteger(t){return t%1===0}isNumericType(){const t=this.valueType;return t===0||t===1}getValueType(){return this.valueType}getValue(){return this.value}toBytes(){switch(this.valueType){case 0:{const t=this.value;return new Uint8Array([t&255,t>>8&255,t>>16&255,t>>24&255])}case 1:{const r=this.value.toBytesLE();return Uint8Array.from(r)}default:throw new S(w.ErrUnimplemented,`unimplemented type: ${this.valueType}`)}}increase(t){function r(i){if(!i.isNumericType())throw new TypeError(`Unsupported type of value: ${typeof i.getValue()}`)}return r(this),r(t),this.valueType===1?this.value=this.value.add(t.getValue()):t.getType()===Z.Long?this.value=this.value+t.getValue().toInt():this.value=K.fromNumber(this.value+xm(t.getValue())).toInt(),this}}class Cs extends Pt{constructor(t,r,i){super(t,i);l(this,"value");this.value=r}static create(t,r,i){return new Cs(t,r,i)}execute(t){const r=t.findByCreatedAt(this.getParentCreatedAt());if(!r)throw new S(w.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(r instanceof Xe))throw new S(w.ErrInvalidArgument,"fail to execute, only Counter can execute increase");const i=r,s=this.value.deepcopy();return i.increase(s),{opInfos:[{type:"increase",path:t.createPath(this.getParentCreatedAt()),value:s.getValue()}],reverseOp:this.toReverseOperation()}}toReverseOperation(){const t=this.value.deepcopy(),i=t.getType()===Z.Long?t.getValue().multiply(-1):t.getValue()*-1;return Cs.create(this.getParentCreatedAt(),oe.of(i,t.getCreatedAt()))}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.INCREASE.${this.value.toJSON()}`}getValue(){return this.value}}class Pr extends Pt{constructor(t,r,i,s,o,a){super(t,a);l(this,"fromPos");l(this,"toPos");l(this,"attributes");l(this,"attributesToRemove");this.fromPos=r,this.toPos=i,this.attributes=s,this.attributesToRemove=o}static create(t,r,i,s,o){return new Pr(t,r,i,s,[],o)}static createTreeRemoveStyleOperation(t,r,i,s,o){return new Pr(t,r,i,new Map,s,o)}execute(t,r,i){const s=t.findByCreatedAt(this.getParentCreatedAt());if(!s)throw new S(w.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(s instanceof at))throw new S(w.ErrInvalidArgument,"fail to execute, only Tree can execute edit");const o=s;let a,u,c={data:0,meta:0};if(this.attributes.size){const d={};[...this.attributes].forEach(([h,m])=>d[h]=m),[u,a,c]=o.style([this.fromPos,this.toPos],d,this.getExecutedAt(),i)}else{const d=this.attributesToRemove;[u,a,c]=o.removeStyle([this.fromPos,this.toPos],d,this.getExecutedAt(),i)}t.acc(c);for(const d of u)t.registerGCPair(d);return{opInfos:a.map(({from:d,to:h,value:m,fromPath:p,toPath:k})=>({type:"tree-style",from:d,to:h,value:this.attributes.size?{attributes:m}:{attributesToRemove:m},fromPath:p,toPath:k,path:t.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const t=this.getParentCreatedAt().toTestString(),r=`${this.fromPos.getLeftSiblingID().getCreatedAt().toTestString()}:${this.fromPos.getLeftSiblingID().getOffset()}`,i=`${this.toPos.getLeftSiblingID().getCreatedAt().toTestString()}:${this.toPos.getLeftSiblingID().getOffset()}`;return`${t}.STYLE(${r},${i},${Object.entries(this.attributes||{}).map(([s,o])=>`${s}:"${o}"`).join(" ")})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getAttributes(){return this.attributes}getAttributesToRemove(){return this.attributesToRemove}}class _o extends Pt{constructor(t,r,i,s){super(t,s);l(this,"createdAt");l(this,"value");this.createdAt=r,this.value=i}static create(t,r,i,s){return new _o(t,r,i,s)}execute(t){const r=t.findByCreatedAt(this.getParentCreatedAt());if(!r)throw new S(w.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(r instanceof Be))throw new S(w.ErrInvalidArgument,"fail to execute, only array can execute set");const i=this.value.deepcopy();return r.insertAfter(this.createdAt,i,this.getExecutedAt()),r.delete(this.createdAt,this.getExecutedAt()),t.registerElement(i),{opInfos:[{type:"array-set",path:t.createPath(this.getParentCreatedAt())}],reverseOp:void 0}}getEffectedCreatedAt(){return this.createdAt}toTestString(){return`${this.getParentCreatedAt().toTestString()}.ARRAY_SET.${this.createdAt.toTestString()}=${this.value.toSortedJSON()}`}getCreatedAt(){return this.createdAt}getValue(){return this.value}}function w1(n){const e=new tu,t=e.data;for(const[r,i]of Object.entries(n))t[r]=JSON.stringify(i);return e}function S1(n){if(n.type===cn.Put)return new Ro({type:Li.PUT,presence:w1(n.presence)});if(n.type===cn.Clear)return new Ro({type:Li.CLEAR});throw new S(w.ErrUnimplemented,"unimplemented type")}function k1(n){return new ky({serverSeq:n.getServerSeq(),clientSeq:n.getClientSeq()})}function by(n){return new Zl({clientSeq:n.getClientSeq(),lamport:n.getLamport(),actorId:ou(n.getActorID()),versionVector:gd(n.getVersionVector())})}function z(n){if(n)return new b({lamport:n.getLamport(),delimiter:n.getDelimiter(),actorId:ou(n.getActorID())})}function gd(n){if(!n)return;const e=new eu;for(const[t,r]of n){const i=rk(ou(t));e.vector[i]=BigInt(r.toString())}return e}function zy(n){switch(n){case Z.Null:return U.NULL;case Z.Boolean:return U.BOOLEAN;case Z.Integer:return U.INTEGER;case Z.Long:return U.LONG;case Z.Double:return U.DOUBLE;case Z.String:return U.STRING;case Z.Bytes:return U.BYTES;case Z.Date:return U.DATE;default:throw new S(w.ErrInvalidType,`unsupported type: ${n}`)}}function Fy(n){switch(n){case fn.Int:return U.INTEGER_CNT;case fn.Long:return U.LONG_CNT;default:throw new S(w.ErrInvalidType,`unsupported type: ${n}`)}}function ga(n){if(n instanceof Le)return new dt({type:U.JSON_OBJECT,createdAt:z(n.getCreatedAt()),value:Yy(n)});if(n instanceof Be)return new dt({type:U.JSON_ARRAY,createdAt:z(n.getCreatedAt()),value:Z1(n)});if(n instanceof ot)return new dt({type:U.TEXT,createdAt:z(n.getCreatedAt())});if(n instanceof oe)return new dt({type:zy(n.getType()),createdAt:z(n.getCreatedAt()),value:n.toBytes()});if(n instanceof Xe)return new dt({type:Fy(n.getType()),createdAt:z(n.getCreatedAt()),value:n.toBytes()});if(n instanceof at)return new dt({type:U.TREE,createdAt:z(n.getCreatedAt()),value:tk(n)});throw new S(w.ErrUnimplemented,"unimplemented element")}function T1(n){return new Do({createdAt:z(n.getCreatedAt()),offset:n.getOffset()})}function pa(n){return new Bi({createdAt:z(n.getID().getCreatedAt()),offset:n.getID().getOffset(),relativeOffset:n.getRelativeOffset()})}function ya(n){return new Ri({parentId:lo(n.getParentID()),leftSiblingId:lo(n.getLeftSiblingID())})}function lo(n){return new ri({createdAt:z(n.getCreatedAt()),offset:n.getOffset()})}function $y(n){const e=new fd;if(n instanceof bi){const t=n,r=new dl;r.parentCreatedAt=z(t.getParentCreatedAt()),r.key=t.getKey(),r.value=ga(t.getValue()),r.executedAt=z(t.getExecutedAt()),e.body.case="set",e.body.value=r}else if(n instanceof Rs){const t=n,r=new hl;r.parentCreatedAt=z(t.getParentCreatedAt()),r.prevCreatedAt=z(t.getPrevCreatedAt()),r.value=ga(t.getValue()),r.executedAt=z(t.getExecutedAt()),e.body.case="add",e.body.value=r}else if(n instanceof xr){const t=n,r=new ml;r.parentCreatedAt=z(t.getParentCreatedAt()),r.prevCreatedAt=z(t.getPrevCreatedAt()),r.createdAt=z(t.getCreatedAt()),r.executedAt=z(t.getExecutedAt()),e.body.case="move",e.body.value=r}else if(n instanceof Br){const t=n,r=new gl;r.parentCreatedAt=z(t.getParentCreatedAt()),r.createdAt=z(t.getCreatedAt()),r.executedAt=z(t.getExecutedAt()),e.body.case="remove",e.body.value=r}else if(n instanceof Ko){const t=n,r=new pl;r.parentCreatedAt=z(t.getParentCreatedAt()),r.from=pa(t.getFromPos()),r.to=pa(t.getToPos()),r.content=t.getContent();const i=r.attributes;for(const[s,o]of t.getAttributes())i[s]=o;r.executedAt=z(t.getExecutedAt()),e.body.case="edit",e.body.value=r}else if(n instanceof Wo){const t=n,r=new yl;r.parentCreatedAt=z(t.getParentCreatedAt()),r.from=pa(t.getFromPos()),r.to=pa(t.getToPos());const i=r.attributes;for(const[s,o]of t.getAttributes())i[s]=o;r.executedAt=z(t.getExecutedAt()),e.body.case="style",e.body.value=r}else if(n instanceof Cs){const t=n,r=new vl;r.parentCreatedAt=z(t.getParentCreatedAt()),r.value=ga(t.getValue()),r.executedAt=z(t.getExecutedAt()),e.body.case="increase",e.body.value=r}else if(n instanceof Ho){const t=n,r=new wl;r.parentCreatedAt=z(t.getParentCreatedAt()),r.from=ya(t.getFromPos()),r.to=ya(t.getToPos()),r.contents=P1(t.getContents()),r.splitLevel=t.getSplitLevel(),r.executedAt=z(t.getExecutedAt()),e.body.case="treeEdit",e.body.value=r}else if(n instanceof Pr){const t=n,r=new Sl;r.parentCreatedAt=z(t.getParentCreatedAt()),r.from=ya(t.getFromPos()),r.to=ya(t.getToPos());const i=t.getAttributesToRemove();if(i.length>0)r.attributesToRemove=i;else{const s=r.attributes;for(const[o,a]of t.getAttributes())s[o]=a}r.executedAt=z(t.getExecutedAt()),e.body.case="treeStyle",e.body.value=r}else if(n instanceof _o){const t=n,r=new kl;r.parentCreatedAt=z(t.getParentCreatedAt()),r.createdAt=z(t.getCreatedAt()),r.value=ga(t.getValue()),r.executedAt=z(t.getExecutedAt()),e.body.case="arraySet",e.body.value=r}else throw new S(w.ErrUnimplemented,"unimplemented operation");return e}function I1(n){const e=[];for(const t of n)e.push($y(t));return e}function A1(n){const e=new wy({id:by(n.getID()),message:n.getMessage()});return n.hasOperations()&&(e.operations=I1(n.getOperations())),n.hasPresenceChange()&&(e.presenceChange=S1(n.getPresenceChange())),e}function E1(n){const e=[];for(const t of n)e.push(A1(t));return e}function x1(n){const e=[];for(const t of n)e.push(new Sy({key:t.getStrKey(),element:yd(t.getValue())}));return e}function N1(n){const e=[];for(const t of n)e.push(new Cl({element:yd(t.getValue())}));return e}function C1(n){const e=[];for(const t of n){const r=new Pl;r.id=T1(t.getID()),r.value=t.getValue().getContent(),r.removedAt=z(t.getRemovedAt());const i=r.attributes,s=t.getValue().getAttrs();for(const o of s){const a=new Ts;a.value=o.getValue(),a.updatedAt=z(o.getUpdatedAt()),i[o.getKey()]=a}e.push(r)}return e}function P1(n){const e=[];if(!n||!n.length)return e;for(const t of n)e.push(new Dl({content:pd(t)}));return e}function D1(n){const e={};for(const t of n)e[t.getKey()]=new Ts({value:t.getValue(),updatedAt:z(t.getUpdatedAt()),isRemoved:t.isRemoved()});return e}function pd(n){if(!n)return[];const e=[];return ru(n,(t,r)=>{const i=new Oo({id:lo(t.id),type:t.type,removedAt:z(t.removedAt),depth:r});t.isText&&(i.value=t.value),t.insPrevID&&(i.insPrevId=lo(t.insPrevID)),t.insNextID&&(i.insNextId=lo(t.insNextID)),t.attrs&&(i.attributes=D1(t.attrs)),e.push(i)}),e}function O1(n){const e=new Ze;return e.body.case="jsonObject",e.body.value=new Tl({nodes:x1(n.getRHT()),createdAt:z(n.getCreatedAt()),movedAt:z(n.getMovedAt()),removedAt:z(n.getRemovedAt())}),e}function Jy(n){const e=new Ze;return e.body.case="jsonArray",e.body.value=new Il({nodes:N1(n.getElements()),createdAt:z(n.getCreatedAt()),movedAt:z(n.getMovedAt()),removedAt:z(n.getRemovedAt())}),e}function R1(n){const e=new Ze;return e.body.case="primitive",e.body.value=new Al({type:zy(n.getType()),value:n.toBytes(),createdAt:z(n.getCreatedAt()),movedAt:z(n.getMovedAt()),removedAt:z(n.getRemovedAt())}),e}function L1(n){const e=new Ze;return e.body.case="text",e.body.value=new El({nodes:C1(n.getRGATreeSplit()),createdAt:z(n.getCreatedAt()),movedAt:z(n.getMovedAt()),removedAt:z(n.getRemovedAt())}),e}function B1(n){const e=new Ze;return e.body.case="counter",e.body.value=new xl({type:Fy(n.getType()),value:n.toBytes(),createdAt:z(n.getCreatedAt()),movedAt:z(n.getMovedAt()),removedAt:z(n.getRemovedAt())}),e}function My(n){const e=new Ze;return e.body.case="tree",e.body.value=new Nl({nodes:pd(n.getRoot()),createdAt:z(n.getCreatedAt()),movedAt:z(n.getMovedAt()),removedAt:z(n.getRemovedAt())}),e}function yd(n){if(n instanceof Le)return O1(n);if(n instanceof Be)return Jy(n);if(n instanceof oe)return R1(n);if(n instanceof ot)return L1(n);if(n instanceof Xe)return B1(n);if(n instanceof at)return My(n);throw new S(w.ErrUnimplemented,"unimplemented element")}function b1(n){return new Fr({documentKey:n.getDocumentKey(),checkpoint:k1(n.getCheckpoint()),isRemoved:n.getIsRemoved(),changes:E1(n.getChanges()),snapshot:n.getSnapshot(),versionVector:gd(n.getVersionVector())})}function Gs(n){if(!(n instanceof Y))return{};const e=n.findDetails(ZS);for(const t of e)return t.metadata;return{}}function Mr(n){return Gs(n).code??""}function Uy(n){return bt.of(n.clientSeq,BigInt(n.lamport),Td(n.actorId),vd(n.versionVector),BigInt(n.serverSeq))}function vd(n){if(!n)return;const e=new cs;return Object.entries(n.vector).forEach(([t,r])=>{const i=su(nk(t));e.set(i,BigInt(r.toString()))}),e}function F(n){if(n)return xt.of(BigInt(n.lamport),n.delimiter,Td(n.actorId))}function wd(n){const e={};return Object.entries(n.data).forEach(([t,r])=>{e[t]=JSON.parse(r)}),e}function z1(n){const e=n.type;if(e===Li.PUT){const t=wd(n.presence);return{type:cn.Put,presence:t}}if(e===Li.CLEAR)return{type:cn.Clear};throw new S(w.ErrInvalidType,`unsupported type: ${e}`)}function F1(n){const e=new Map;return Object.entries(n).forEach(([t,r])=>{e.set(t,wd(r))}),e}function Vy(n){switch(n){case U.NULL:return Z.Null;case U.BOOLEAN:return Z.Boolean;case U.INTEGER:return Z.Integer;case U.LONG:return Z.Long;case U.DOUBLE:return Z.Double;case U.STRING:return Z.String;case U.BYTES:return Z.Bytes;case U.DATE:return Z.Date}throw new S(w.ErrUnimplemented,`unimplemented value type: ${n}`)}function bl(n){switch(n){case U.INTEGER_CNT:return fn.Int;case U.LONG_CNT:return fn.Long}throw new S(w.ErrUnimplemented,`unimplemented value type: ${n}`)}function va(n){switch(n.type){case U.JSON_OBJECT:return n.value?Gy(n.value):Le.create(F(n.createdAt));case U.JSON_ARRAY:return n.value?X1(n.value):Be.create(F(n.createdAt));case U.TEXT:return ot.create(Ns.create(),F(n.createdAt));case U.TREE:return ek(n.value);case U.NULL:case U.BOOLEAN:case U.INTEGER:case U.LONG:case U.DOUBLE:case U.STRING:case U.BYTES:case U.DATE:return oe.of(oe.valueFromBytes(Vy(n.type),n.value),F(n.createdAt));case U.INTEGER_CNT:case U.LONG_CNT:return Xe.create(bl(n.type),Xe.valueFromBytes(bl(n.type),n.value),F(n.createdAt))}}function wa(n){return Vt.of(un.of(F(n.createdAt),n.offset),n.relativeOffset)}function jy(n){return un.of(F(n.createdAt),n.offset)}function $1(n){const e=zo.create(n.value);Object.entries(n.attributes).forEach(([r,i])=>{e.setAttr(r,i.value,F(i.updatedAt))});const t=si.create(jy(n.id),e);return t.remove(F(n.removedAt)),t}function Ui(n){return Jt.of(uo(n.parentId),uo(n.leftSiblingId))}function uo(n){return Ce.of(F(n.createdAt),n.offset)}function J1(n){if(!n.length)return;const e=[];return n.forEach(t=>{const r=Sd(t.content);e.push(r)}),e}function Sd(n){if(n.length===0)return;const e=[];for(const i of n)e.push(U1(i));const t=e[e.length-1],r=new Map;r.set(n[e.length-1].depth,e[e.length-1]);for(let i=e.length-2;i>=0;i--)r.get(n[i].depth-1).prepend(e[i]),r.set(n[i].depth,e[i]);return t.updateDescendantsSize(),at.create(t,Is).getRoot()}function M1(n){const e=br.create();for(const[t,r]of Object.entries(n))e.setInternal(t,r.value,F(r.updatedAt),r.isRemoved);return e}function U1(n){const e=uo(n.id),t=rt.create(e,n.type),r=Object.entries(n.attributes);return t.isText?t.value=n.value:r.length&&(t.attrs=M1(n.attributes)),n.insPrevId&&(t.insPrevID=uo(n.insPrevId)),n.insNextId&&(t.insNextID=uo(n.insNextId)),t.removedAt=F(n.removedAt),t}function qy(n){if(n.body.case==="set"){const e=n.body.value;return bi.create(e.key,va(e.value),F(e.parentCreatedAt),F(e.executedAt))}else if(n.body.case==="add"){const e=n.body.value;return Rs.create(F(e.parentCreatedAt),F(e.prevCreatedAt),va(e.value),F(e.executedAt))}else if(n.body.case==="move"){const e=n.body.value;return xr.create(F(e.parentCreatedAt),F(e.prevCreatedAt),F(e.createdAt),F(e.executedAt))}else if(n.body.case==="remove"){const e=n.body.value;return Br.create(F(e.parentCreatedAt),F(e.createdAt),F(e.executedAt))}else if(n.body.case==="edit"){const e=n.body.value,t=new Map;return Object.entries(e.attributes).forEach(([r,i])=>{t.set(r,i)}),Ko.create(F(e.parentCreatedAt),wa(e.from),wa(e.to),e.content,t,F(e.executedAt))}else if(n.body.case==="style"){const e=n.body.value,t=new Map;return Object.entries(e.attributes).forEach(([r,i])=>{t.set(r,i)}),Wo.create(F(e.parentCreatedAt),wa(e.from),wa(e.to),t,F(e.executedAt))}else if(n.body.case==="increase"){const e=n.body.value;return Cs.create(F(e.parentCreatedAt),va(e.value),F(e.executedAt))}else if(n.body.case==="treeEdit"){const e=n.body.value;return Ho.create(F(e.parentCreatedAt),Ui(e.from),Ui(e.to),J1(e.contents),e.splitLevel,F(e.executedAt))}else if(n.body.case==="treeStyle"){const e=n.body.value,t=new Map,r=e.attributesToRemove;return(r==null?void 0:r.length)>0?Pr.createTreeRemoveStyleOperation(F(e.parentCreatedAt),Ui(e.from),Ui(e.to),r,F(e.executedAt)):(Object.entries(e.attributes).forEach(([i,s])=>{t.set(i,s)}),Pr.create(F(e.parentCreatedAt),Ui(e.from),Ui(e.to),t,F(e.executedAt)))}else if(n.body.case==="arraySet"){const e=n.body.value;return _o.create(F(e.parentCreatedAt),F(e.createdAt),va(e.value),F(e.executedAt))}else throw new S(w.ErrUnimplemented,"unimplemented operation")}function V1(n){const e=[];for(const t of n){const r=qy(t);r&&e.push(r)}return e}function Ky(n){const e=[];for(const t of n)e.push(xs.create({id:Uy(t.id),operations:V1(t.operations),presenceChange:t.presenceChange?z1(t.presenceChange):void 0,message:t.message}));return e}function j1(n){return fs.of(BigInt(n.serverSeq),n.clientSeq)}function q1(n){return iu.create(n.documentKey,j1(n.checkpoint),n.isRemoved,Ky(n.changes),vd(n.versionVector),n.snapshot)}function Wy(n){const e=new Lo;for(const r of n.nodes){const i=kd(r.element);e.set(r.key,i,i.getPositionedAt())}const t=new Le(F(n.createdAt),e);return t.setMovedAt(F(n.movedAt)),t.setRemovedAt(F(n.removedAt)),t}function Hy(n){const e=new bo;for(const r of n.nodes)e.insert(kd(r.element));const t=new Be(F(n.createdAt),e);return t.setMovedAt(F(n.movedAt)),t.setRemovedAt(F(n.removedAt)),t}function K1(n){const e=oe.of(oe.valueFromBytes(Vy(n.type),n.value),F(n.createdAt));return e.setMovedAt(F(n.movedAt)),e.setRemovedAt(F(n.removedAt)),e}function W1(n){const e=new Ns;let t=e.getHead();for(const i of n.nodes){const s=e.insertAfter(t,$1(i));i.insPrevId&&s.setInsPrev(e.findNode(jy(i.insPrevId))),t=s}const r=new ot(e,F(n.createdAt));return r.setMovedAt(F(n.movedAt)),r.setRemovedAt(F(n.removedAt)),r}function H1(n){const e=Xe.create(bl(n.type),Xe.valueFromBytes(bl(n.type),n.value),F(n.createdAt));return e.setMovedAt(F(n.movedAt)),e.setRemovedAt(F(n.removedAt)),e}function _y(n){const e=Sd(n.nodes);return at.create(e,F(n.createdAt))}function kd(n){if(n.body.case==="jsonObject")return Wy(n.body.value);if(n.body.case==="jsonArray")return Hy(n.body.value);if(n.body.case==="primitive")return K1(n.body.value);if(n.body.case==="text")return W1(n.body.value);if(n.body.case==="counter")return H1(n.body.value);if(n.body.case==="tree")return _y(n.body.value);throw new S(w.ErrUnimplemented,"unimplemented element")}function _1(n){return n.map(e=>({path:e.path,type:e.type}))}function G1(n){if(!n)return{root:Le.create(Is),presences:new Map};const e=$c.fromBinary(n);return{root:kd(e.root),presences:F1(e.presences)}}function Y1(n){const e=gd(n);return su(e.toBinary())}function Q1(n){const e=Id(n),t=eu.fromBinary(e);return vd(t)}function Gy(n){if(!n)throw new S(w.ErrInvalidArgument,"bytes is empty");const e=Ze.fromBinary(n);return Wy(e.body.value)}function Yy(n){return yd(n).toBinary()}function X1(n){if(!n)throw new S(w.ErrInvalidArgument,"bytes is empty");const e=Ze.fromBinary(n);return Hy(e.body.value)}function Z1(n){return Jy(n).toBinary()}function ek(n){if(!n)throw new S(w.ErrInvalidArgument,"bytes is empty");const e=Ze.fromBinary(n);return _y(e.body.value)}function tk(n){return My(n).toBinary()}function su(n){return n?Array.from(n).map(e=>e.toString(16).padStart(2,"0")).join(""):""}function Td(n){return su(n)}function Id(n){return new Uint8Array(n.match(/.{1,2}/g).map(e=>parseInt(e,16)))}function nk(n){if(typeof window<"u"&&typeof window.atob=="function"){const e=window.atob(n),t=e.length,r=new Uint8Array(t);for(let i=0;i<t;i++)r[i]=e.charCodeAt(i);return r}else if(typeof globalThis<"u"&&typeof globalThis.Buffer<"u"){const e=globalThis.Buffer;return new Uint8Array(e.from(n,"base64"))}else throw new Error("No base64 decoder available")}function ou(n){return Id(n)}function rk(n){if(typeof window<"u"&&typeof window.btoa=="function"){let e="";for(let t=0;t<n.byteLength;t++)e+=String.fromCharCode(n[t]);return window.btoa(e)}else{if(typeof globalThis<"u"&&typeof globalThis.Buffer<"u")return globalThis.Buffer.from(n).toString("base64");throw new Error("No base64 encoder available")}}function ik(n){const e=Zl.fromBinary(n);return Uy(e)}function sk(n){const e=fd.fromBinary(n);return qy(e)}const ce={fromPresence:wd,toChangePack:b1,fromChangePack:q1,fromChanges:Ky,toTreeNodes:pd,fromTreeNodes:Sd,objectToBytes:Yy,bytesToObject:Gy,bytesToSnapshot:G1,bytesToHex:su,hexToBytes:Id,toHexString:Td,toUint8Array:ou,toOperation:$y,toChangeID:by,PbChangeID:Zl,bytesToChangeID:ik,bytesToOperation:sk,versionVectorToHex:Y1,hexToVersionVector:Q1,fromSchemaRules:_1};var qe=(n=>(n[n.Trivial=0]="Trivial",n[n.Debug=1]="Debug",n[n.Info=2]="Info",n[n.Warn=3]="Warn",n[n.Error=4]="Error",n[n.Fatal=5]="Fatal",n))(qe||{});let vi=3;function ok(n){vi=n}const $={trivial:(...n)=>{vi>0||typeof console<"u"&&console.log("YORKIE T:",...n)},debug:(...n)=>{vi>1||typeof console<"u"&&console.log("YORKIE D:",...n)},info:(...n)=>{vi>2||typeof console<"u"&&console.log("YORKIE I:",...n)},warn:(...n)=>{vi>3||typeof console<"u"&&(typeof console.warn<"u"?console.warn("YORKIE W:",...n):console.log("YORKIE W:",...n))},error:(...n)=>{vi>4||typeof console<"u"&&(typeof console.error<"u"?console.error("YORKIE E:",...n):console.log("YORKIE E:",...n))},fatal:(...n)=>{typeof console<"u"&&(typeof console.error<"u"?console.error("YORKIE F:",...n):console.log("YORKIE F:",...n))},isEnabled:n=>vi<=n};function Qy(){return"xxxxxxxx-xxxx-4xxxy-xxxx-xxxxxxxxxxx".replace(/[xy]/g,n=>{const e=Math.random()*16|0;return(n==="x"?e:e&3|8).toString(16)})}class ak{constructor(e,t,r,i,s){l(this,"reconnectStreamDelay");l(this,"doc");l(this,"docID");l(this,"syncMode");l(this,"remoteChangeEventReceived");l(this,"watchStream");l(this,"watchLoopTimerID");l(this,"watchAbortController");l(this,"unsubscribeBroadcastEvent");this.reconnectStreamDelay=e,this.doc=t,this.docID=r,this.syncMode=i,this.remoteChangeEventReceived=!1,this.unsubscribeBroadcastEvent=s}changeSyncMode(e){this.syncMode=e}needRealtimeSync(){return this.syncMode===Ja.RealtimeSyncOff?!1:this.syncMode===Ja.RealtimePushOnly?this.doc.hasLocalChanges():this.syncMode!==Ja.Manual&&(this.doc.hasLocalChanges()||this.remoteChangeEventReceived)}async runWatchLoop(e){const t=async()=>{if(this.watchStream)return Promise.resolve();this.watchLoopTimerID&&(clearTimeout(this.watchLoopTimerID),this.watchLoopTimerID=void 0);try{[this.watchStream,this.watchAbortController]=await e(()=>{this.watchStream=void 0,this.watchAbortController=void 0,this.watchLoopTimerID=setTimeout(t,this.reconnectStreamDelay)})}catch{}};await t()}cancelWatchStream(){this.watchStream&&this.watchAbortController&&(this.watchAbortController.abort(),this.watchStream=void 0,this.watchAbortController=void 0),clearTimeout(this.watchLoopTimerID),this.watchLoopTimerID=void 0}}function lk(n,e){const t=[];for(const r of e){const i=uk(n,r.path),s=ck(i,r);if(!s.valid)for(const o of s.errors||[])t.push(o)}return{valid:t.length===0,errors:t}}function uk(n,e){if(!e.startsWith("$"))throw new Error(`Path must start with $, got ${e}`);const t=e.split(".");let r=n;for(let i=1;i<t.length;i++){const s=t[i];if(!(r instanceof Le))return;r=r.get(s)}return r}function ck(n,e){switch(e.type){case"string":case"boolean":case"integer":case"double":case"long":case"date":case"bytes":case"null":return dk(n,e);case"object":if(!(n instanceof Le))return{valid:!1,errors:[{path:e.path,message:`Expected object at path ${e.path}`}]};break;case"array":if(!(n instanceof Be))return{valid:!1,errors:[{path:e.path,message:`Expected array at path ${e.path}`}]};break;case"yorkie.Text":if(!(n instanceof ot))return{valid:!1,errors:[{path:e.path,message:`Expected yorkie.Text at path ${e.path}`}]};break;case"yorkie.Tree":if(!(n instanceof at))return{valid:!1,errors:[{path:e.path,message:`Expected yorkie.Tree at path ${e.path}`}]};break;case"yorkie.Counter":if(!(n instanceof Xe))return{valid:!1,errors:[{path:e.path,message:`Expected yorkie.Counter at path ${e.path}`}]};break;default:throw new Error(`Unknown rule type: ${e.type}`)}return{valid:!0}}function fk(n){switch(n){case"null":return Z.Null;case"boolean":return Z.Boolean;case"integer":return Z.Integer;case"long":return Z.Long;case"double":return Z.Double;case"string":return Z.String;case"bytes":return Z.Bytes;case"date":return Z.Date;default:throw new Error(`Unknown primitive type: ${n}`)}}function dk(n,e){return n instanceof oe&&n.getType()===fk(e.type)?{valid:!0}:{valid:!1,errors:[{path:e.path,message:`Expected ${e.type} at path ${e.path}`}]}}const Mu=()=>{};class hk{constructor(e){l(this,"finalized",!1);l(this,"observers",[]);l(this,"finalError");try{e(this)}catch(t){this.error(t)}}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(!e)throw new S(w.ErrInvalidArgument,"missing observer");if(this.finalized)throw new S(w.ErrRefused,"observable is finalized due to previous error");typeof e=="object"?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Mu),i.error===void 0&&(i.error=Mu),i.complete===void 0&&(i.complete=Mu);const s=Qy(),o=this.unsubscribeOne.bind(this,s);if(this.observers.push({subscriptionID:s,observer:i}),this.finalized)try{this.finalError?i.error(this.finalError):i.complete()}catch(a){$.warn(a)}return o}unsubscribeOne(e){var t;this.observers=(t=this.observers)==null?void 0:t.filter(r=>r.subscriptionID!==e)}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e].observer)}catch(r){$.error(r)}}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.observers=void 0)}}function mk(n){const e=new hk(n);return{subscribe:e.subscribe.bind(e),getProxy:()=>e}}class ns{constructor(e,t,r,i){l(this,"prevID");l(this,"nextID");l(this,"delimiter");l(this,"message");l(this,"root");l(this,"operations");l(this,"presenceChange");l(this,"previousPresence");l(this,"reversePresenceKeys");this.prevID=e,this.nextID=e.next(),this.delimiter=Ty,this.root=t,this.operations=[],this.previousPresence=Bt(r),this.presenceChange=void 0,this.reversePresenceKeys=new Set,this.message=i}static create(e,t,r,i){return new ns(e,t,r,i)}push(e){this.operations.push(e)}registerElement(e,t){this.root.registerElement(e,t)}registerRemovedElement(e){this.root.registerRemovedElement(e)}registerGCPair(e){this.root.registerGCPair(e)}getNextID(){return this.isPresenceOnlyChange()?this.prevID.next(!0).setLamport(this.prevID.getLamport()).setVersionVector(this.prevID.getVersionVector()):this.nextID}toChange(){const e=this.isPresenceOnlyChange()?this.prevID.next(!0):this.nextID;return xs.create({id:e,operations:this.operations,presenceChange:this.presenceChange,message:this.message})}isPresenceOnlyChange(){return this.operations.length===0}hasChange(){return this.operations.length>0||this.presenceChange!==void 0}setPresenceChange(e){this.presenceChange=e}setReversePresence(e,t){for(const r of Object.keys(e))t!=null&&t.addToHistory?this.reversePresenceKeys.add(r):this.reversePresenceKeys.delete(r)}getReversePresence(){if(this.reversePresenceKeys.size===0)return;const e={};for(const t of this.reversePresenceKeys)e[t]=this.previousPresence[t];return e}issueTimeTicket(){return this.delimiter+=1,this.nextID.createTimeTicket(this.delimiter)}getLastTimeTicket(){return this.nextID.createTimeTicket(this.delimiter)}acc(e){this.root.acc(e)}}class Fo{constructor(e){l(this,"rootObject");l(this,"elementPairMapByCreatedAt");l(this,"gcElementSetByCreatedAt");l(this,"gcPairMap");l(this,"docSize");this.rootObject=e,this.elementPairMapByCreatedAt=new Map,this.gcElementSetByCreatedAt=new Set,this.gcPairMap=new Map,this.docSize={live:{data:0,meta:0},gc:{data:0,meta:0}},this.registerElement(e,void 0),e.getDescendants(t=>{if(t.getRemovedAt()&&this.registerRemovedElement(t),t instanceof ot||t instanceof at)for(const r of t.getGCPairs())this.registerGCPair(r);return!1})}static create(){return new Fo(Le.create(Is))}findByCreatedAt(e){const t=this.elementPairMapByCreatedAt.get(e.toIDString());if(t)return t.element}findElementPairByCreatedAt(e){return this.elementPairMapByCreatedAt.get(e.toIDString())}createSubPaths(e){let t=this.elementPairMapByCreatedAt.get(e.toIDString());if(!t)return[];const r=[];for(;t.parent;){const i=t.element.getCreatedAt(),s=t.parent.subPathOf(i);if(s===void 0)throw new S(w.ErrInvalidArgument,`cant find the given element: ${i.toIDString()}`);r.unshift(s),t=this.elementPairMapByCreatedAt.get(t.parent.getCreatedAt().toIDString())}return r.unshift("$"),r}createPath(e){return this.createSubPaths(e).join(".")}registerElement(e,t){this.elementPairMapByCreatedAt.set(e.getCreatedAt().toIDString(),{parent:t,element:e}),xe(this.docSize.live,e.getDataSize()),e instanceof ii&&e.getDescendants((r,i)=>(this.elementPairMapByCreatedAt.set(r.getCreatedAt().toIDString(),{parent:i,element:r}),xe(this.docSize.live,r.getDataSize()),!1))}deregisterElement(e){let t=0;const r=i=>{const s=i.getCreatedAt().toIDString();us(this.docSize.gc,i.getDataSize()),this.elementPairMapByCreatedAt.delete(s),this.gcElementSetByCreatedAt.delete(s),t++};return r(e),e instanceof ii&&e.getDescendants(i=>(r(i),!1)),t}registerRemovedElement(e){xe(this.docSize.gc,e.getDataSize()),us(this.docSize.live,e.getDataSize()),this.docSize.live.meta+=an,this.gcElementSetByCreatedAt.add(e.getCreatedAt().toIDString())}registerGCPair(e){if(this.gcPairMap.get(e.child.toIDString())){this.gcPairMap.delete(e.child.toIDString());return}this.gcPairMap.set(e.child.toIDString(),e);const r=this.gcPairMap.get(e.child.toIDString()).child.getDataSize();xe(this.docSize.gc,r),us(this.docSize.live,r),e.child instanceof _r||(this.docSize.live.meta+=an)}getElementMapSize(){return this.elementPairMapByCreatedAt.size}getGarbageElementSetSize(){const e=new Set;for(const t of this.gcElementSetByCreatedAt){e.add(t);const r=this.elementPairMapByCreatedAt.get(t);r.element instanceof ii&&r.element.getDescendants(i=>(e.add(i.getCreatedAt().toIDString()),!1))}return e.size}getObject(){return this.rootObject}getGarbageLen(){return this.getGarbageElementSetSize()+this.gcPairMap.size}getDocSize(){return this.docSize}deepcopy(){return new Fo(this.rootObject.deepcopy())}garbageCollect(e){let t=0;for(const r of this.gcElementSetByCreatedAt){const i=this.elementPairMapByCreatedAt.get(r),s=i.element.getRemovedAt();s&&(e!=null&&e.afterOrEqual(s))&&(i.parent.purge(i.element),t+=this.deregisterElement(i.element))}for(const[,r]of this.gcPairMap){const i=r.child.getRemovedAt();i&&(e!=null&&e.afterOrEqual(i))&&(r.parent.purge(r.child),this.gcPairMap.delete(r.child.toIDString()),t+=1)}return t}toJSON(){return this.rootObject.toJSON()}toSortedJSON(){return this.rootObject.toSortedJSON()}getStats(){return{elements:this.getElementMapSize(),gcPairs:this.gcPairMap.size,gcElements:this.getGarbageElementSetSize()}}acc(e){xe(this.docSize.live,e)}}function Xy(n,e){const t=new $o(n);return new Proxy(e,t.getHandlers())}class $o{constructor(e){l(this,"context");l(this,"handlers");this.context=e,this.handlers={set:(t,r,i)=>($.isEnabled(qe.Trivial)&&$.trivial(`obj[${r}]=${JSON.stringify(i)}`),$o.setInternal(e,t,r,i),!0),get:(t,r)=>($.isEnabled(qe.Trivial)&&$.trivial(`obj[${r}]`),r==="getID"?()=>t.getCreatedAt():r==="toJSON"||r==="toString"?()=>t.toJSON():r==="toJS"?()=>t.toJS():r==="toJSForTest"?()=>t.toJSForTest():wi(e,t.get(r))),ownKeys:t=>t.getKeys(),getOwnPropertyDescriptor:()=>({enumerable:!0,configurable:!0}),deleteProperty:(t,r)=>($.isEnabled(qe.Trivial)&&$.trivial(`obj[${r}]`),$o.deleteInternal(e,t,r),!0)}}static setInternal(e,t,r,i){if(r.includes("."))throw new S(w.ErrInvalidObjectKey,"key must not contain the '.'.");const s=e.issueTimeTicket(),o=co(e,i,s),a=t.set(r,o,s);e.registerElement(o,t),a&&e.registerRemovedElement(a),e.push(bi.create(r,o.deepcopy(),t.getCreatedAt(),s))}static buildObjectMembers(e,t){const r={};for(const[i,s]of Object.entries(t)){if(i.includes("."))throw new S(w.ErrInvalidObjectKey,"key must not contain the '.'.");const o=e.issueTimeTicket(),a=co(e,s,o);r[i]=a}return r}static deleteInternal(e,t,r){const i=e.issueTimeTicket(),s=t.deleteByKey(r,i);s&&(e.push(Br.create(t.getCreatedAt(),s.getCreatedAt(),i)),e.registerRemovedElement(s))}getHandlers(){return this.handlers}}function gk(n,e){const t=new G(n,e);return new Proxy(e,t.getHandlers())}function Nm(n){return typeof n=="string"||n instanceof String?!isNaN(n):!1}function pk(n){return["concat","entries","every","filter","find","findIndex","forEach","join","keys","map","reduce","reduceRight","slice","some","toLocaleString","toString","values"].includes(n)}class G{constructor(e,t){l(this,"context");l(this,"handlers");l(this,"array");this.context=e,this.array=t,this.handlers={get:(r,i,s)=>i==="getID"?()=>r.getCreatedAt():i==="getElementByID"?o=>{const a=r.getByID(o);if(!(!a||a.isRemoved()))return Rt(e,a)}:i==="getElementByIndex"?o=>{const a=r.get(o);return Rt(e,a)}:i==="getLast"?()=>Rt(e,r.getLast()):i==="delete"?o=>{const a=G.deleteInternalByIndex(e,r,o);return Rt(e,a)}:i==="deleteByID"?o=>{const a=G.deleteInternalByID(e,r,o);return Rt(e,a)}:i==="insertAfter"?(o,a)=>{const u=G.insertAfterInternal(e,r,o,a);return Rt(e,u)}:i==="insertIntegerAfter"?(o,a)=>{const u=G.insertIntegerAfterInternal(e,r,o,a);return Rt(e,u)}:i==="insertBefore"?(o,a)=>{const u=G.insertBeforeInternal(e,r,o,a);return Rt(e,u)}:i==="setValue"?(o,a)=>{const u=G.setValueInternal(e,r,o,a);return Rt(e,u)}:i==="moveBefore"?(o,a)=>{G.moveBeforeInternal(e,r,o,a)}:i==="moveAfter"?(o,a)=>{G.moveAfterInternal(e,r,o,a)}:i==="moveAfterByIndex"?(o,a)=>{G.moveAfterByIndexInternal(e,r,o,a)}:i==="moveFront"?o=>{G.moveFrontInternal(e,r,o)}:i==="moveLast"?o=>{G.moveLastInternal(e,r,o)}:Nm(i)?wi(e,r.get(Number(i))):i==="push"?o=>G.pushInternal(e,r,o):i==="splice"?(o,a,...u)=>G.splice(e,r,o,a,...u):i==="length"?r.length:typeof i=="symbol"&&i===Symbol.iterator?G.iteratorInternal.bind(this,e,r):i==="includes"?(o,a)=>G.includes(e,r,o,a):i==="indexOf"?(o,a)=>G.indexOf(e,r,o,a):i==="lastIndexOf"?(o,a)=>G.lastIndexOf(e,r,o,a):i==="toJSForTest"?()=>r.toJSForTest():i==="toTestString"?()=>G.toTestString(r):typeof i=="string"&&pk(i)?(...o)=>{const a=Array.from(r).map(u=>wi(e,u));return Array.prototype[i].apply(a,o)}:Reflect.get(r,i,s),set:(r,i,s)=>{if(Nm(i)){const o=Number(i);return G.setValueInternal(e,r,o,s),!0}return Reflect.set(r,i,s)},deleteProperty:(r,i)=>($.isEnabled(qe.Trivial)&&$.trivial(`array[${i}]`),G.deleteInternalByIndex(e,r,Number.parseInt(i)),!0)}}static*iteratorInternal(e,t){for(const r of t)yield Rt(e,r)}static buildArrayElements(e,t){const r=[];for(const i of t){const s=e.issueTimeTicket(),o=co(e,i,s);r.push(o)}return r}static pushInternal(e,t,r){return G.insertAfterInternal(e,t,t.getLastCreatedAt(),r),t.length}static moveBeforeInternal(e,t,r,i){const s=e.issueTimeTicket(),o=t.getPrevCreatedAt(r);t.moveAfter(o,i,s),e.push(xr.create(t.getCreatedAt(),o,i,s))}static moveAfterInternal(e,t,r,i){const s=e.issueTimeTicket();e.push(xr.create(t.getCreatedAt(),r,i,s)),t.moveAfter(r,i,s)}static moveAfterByIndexInternal(e,t,r,i){const s=t.get(r);if(!s)throw new S(w.ErrInvalidArgument,`index out of bounds: ${r}`);const o=t.get(i);if(!o)throw new S(w.ErrInvalidArgument,`index out of bounds: ${i}`);G.moveAfterInternal(e,t,s.getCreatedAt(),o.getCreatedAt())}static moveFrontInternal(e,t,r){const i=e.issueTimeTicket(),s=t.getHead();t.moveAfter(s.getCreatedAt(),r,i),e.push(xr.create(t.getCreatedAt(),s.getCreatedAt(),r,i))}static moveLastInternal(e,t,r){const i=e.issueTimeTicket(),s=t.getLastCreatedAt();t.moveAfter(s,r,i),e.push(xr.create(t.getCreatedAt(),s,r,i))}static insertAfterInternal(e,t,r,i){const s=e.issueTimeTicket(),o=co(e,i,s);return t.insertAfter(r,o),e.registerElement(o,t),e.push(Rs.create(t.getCreatedAt(),r,o.deepcopy(),s)),o}static insertIntegerAfterInternal(e,t,r,i){const s=t.get(r);if(!s)throw new S(w.ErrInvalidArgument,`index out of bounds: ${r}`);return G.insertAfterInternal(e,t,s.getCreatedAt(),i),t}static insertBeforeInternal(e,t,r,i){return G.insertAfterInternal(e,t,t.getPrevCreatedAt(r),i)}static setValueInternal(e,t,r,i){const s=t.get(r);if(!s)throw new S(w.ErrInvalidArgument,`index out of bounds: ${r}`);return G.setByIndexInternal(e,t,s.getCreatedAt(),i),t}static setByIndexInternal(e,t,r,i){const s=e.issueTimeTicket(),o=co(e,i,s),a=o.deepcopy();return e.push(_o.create(t.getCreatedAt(),r,a,s)),t.set(r,o,s),e.registerElement(o,t),o}static deleteInternalByIndex(e,t,r){const i=e.issueTimeTicket(),s=t.deleteByIndex(r,i);if(s)return e.push(Br.create(t.getCreatedAt(),s.getCreatedAt(),i)),e.registerRemovedElement(s),s}static deleteInternalByID(e,t,r){const i=e.issueTimeTicket(),s=t.delete(r,i);return e.push(Br.create(t.getCreatedAt(),s.getCreatedAt(),i)),e.registerRemovedElement(s),s}static splice(e,t,r,i,...s){const o=t.length,a=r>=0?Math.min(r,o):Math.max(o+r,0),u=i===void 0?o:i<0?a:Math.min(a+i,o),c=[];for(let d=a;d<u;d++){const h=G.deleteInternalByIndex(e,t,a);if(h){const m=h.deepcopy();m.setRemovedAt(),c.push(wi(e,m))}}if(s){let d=a===0?t.getHead().getID():t.get(a-1).getID();for(const h of s)d=G.insertAfterInternal(e,t,d,h).getID()}return c}static includes(e,t,r,i){var a;const s=t.length,o=i===void 0?0:i<0?Math.max(i+s,0):i;if(o>=s)return!1;if(oe.isSupport(r))return Array.from(t).map(c=>wi(e,c)).includes(r,o);for(let u=o;u<s;u++)if(((a=t.get(u))==null?void 0:a.getID())===r.getID())return!0;return!1}static indexOf(e,t,r,i){var a;const s=t.length,o=i===void 0?0:i<0?Math.max(i+s,0):i;if(o>=s)return-1;if(oe.isSupport(r))return Array.from(t).map(c=>wi(e,c)).indexOf(r,o);for(let u=o;u<s;u++)if(((a=t.get(u))==null?void 0:a.getID())===r.getID())return u;return-1}static lastIndexOf(e,t,r,i){var a;const s=t.length,o=i===void 0||i>=s?s-1:i<0?i+s:i;if(o<0)return-1;if(oe.isSupport(r))return Array.from(t).map(c=>wi(e,c)).lastIndexOf(r,o);for(let u=o;u>0;u--)if(((a=t.get(u))==null?void 0:a.getID())===r.getID())return u;return-1}static toTestString(e){return e.toTestString()}getHandlers(){return this.handlers}}class Ad{constructor(e,t){l(this,"context");l(this,"text");this.context=e,this.text=t}initialize(e,t){this.context=e,this.text=t}getID(){return this.text.getID()}edit(e,t,r,i){if(!this.context||!this.text)throw new S(w.ErrNotInitialized,"Text is not initialized yet");if(e>t)throw new S(w.ErrInvalidArgument,"from should be less than or equal to to");const s=this.text.indexRangeToPosRange(e,t);$.isEnabled(qe.Debug)&&$.debug(`EDIT: f:${e}->${s[0].toTestString()}, t:${t}->${s[1].toTestString()} c:${r}`);const o=i?Es(i):void 0,a=this.context.issueTimeTicket(),[,u,c,d]=this.text.edit(s,r,a,o);this.context.acc(c);for(const h of u)this.context.registerGCPair(h);return this.context.push(new Ko(this.text.getCreatedAt(),s[0],s[1],r,o?new Map(Object.entries(o)):new Map,a)),this.text.findIndexesFromRange(d)}delete(e,t){return this.edit(e,t,"")}empty(){return this.edit(0,this.length,"")}setStyle(e,t,r){if(!this.context||!this.text)throw new S(w.ErrNotInitialized,"Text is not initialized yet");if(e>t)throw new S(w.ErrInvalidArgument,"from should be less than or equal to to");const i=this.text.indexRangeToPosRange(e,t);$.isEnabled(qe.Debug)&&$.debug(`STYL: f:${e}->${i[0].toTestString()}, t:${t}->${i[1].toTestString()} a:${JSON.stringify(r)}`);const s=Es(r),o=this.context.issueTimeTicket(),[a,u]=this.text.setStyle(i,s,o);this.context.acc(u);for(const c of a)this.context.registerGCPair(c);return this.context.push(new Wo(this.text.getCreatedAt(),i[0],i[1],new Map(Object.entries(s)),o)),!0}indexRangeToPosRange(e){if(!this.context||!this.text)throw new S(w.ErrNotInitialized,"Text is not initialized yet");const t=this.text.indexRangeToPosRange(e[0],e[1]);return[t[0].toStruct(),t[1].toStruct()]}posRangeToIndexRange(e){if(!this.context||!this.text)throw new S(w.ErrNotInitialized,"Text is not initialized yet");const t=this.text.findIndexesFromRange([Vt.fromStruct(e[0]),Vt.fromStruct(e[1])]);return[t[0],t[1]]}toTestString(){if(!this.context||!this.text)throw new S(w.ErrNotInitialized,"Text is not initialized yet");return this.text.toTestString()}values(){if(!this.context||!this.text)throw new S(w.ErrNotInitialized,"Text is not initialized yet");return this.text.values()}get length(){return this.text.length}getTreeByIndex(){return this.text.getTreeByIndex()}getTreeByID(){return this.text.getTreeByID()}toString(){if(!this.context||!this.text)throw new S(w.ErrNotInitialized,"Text is not initialized yet");return this.text.toString()}toJSON(){if(!this.context||!this.text)throw new S(w.ErrNotInitialized,"Text is not initialized yet");return this.text.toJSON()}toJSForTest(){if(!this.context||!this.text)throw new S(w.ErrNotInitialized,"Text is not initialized yet");return this.text.toJSForTest()}createRangeForTest(e,t){if(!this.context||!this.text)throw new S(w.ErrNotInitialized,"Text is not initialized yet");return this.text.indexRangeToPosRange(e,t)}}class Ed{constructor(e,t){l(this,"valueType");l(this,"value");l(this,"context");l(this,"counter");this.valueType=e,this.value=t}initialize(e,t){this.valueType=t.getValueType(),this.context=e,this.counter=t,this.value=t.getValue()}getID(){return this.counter.getID()}getValue(){return this.value}getValueType(){return this.valueType}increase(e){if(!this.context||!this.counter)throw new S(w.ErrNotInitialized,"Counter is not initialized yet");const t=this.context.issueTimeTicket(),r=oe.of(e,t);if(!r.isNumericType())throw new TypeError(`Unsupported type of value: ${typeof r.getValue()}`);return this.counter.increase(r),this.context.push(Cs.create(this.counter.getCreatedAt(),r,t)),this}toJSForTest(){if(!this.context||!this.counter)throw new S(w.ErrNotInitialized,"Counter is not initialized yet");return this.counter.toJSForTest()}}function xd(n){if(n.isText)return{type:n.type,value:n.value};const e={type:n.type,children:n.children.map(t=>xd(t))};return n.attrs&&(e.attributes=Cr(n.attrs.toObject())),e}function yk(n,e){const t={type:n.isText?n.parent.type:n.type,children:n.isText?n.parent.getChildrenText().length===e?[]:[{type:ln,value:n.parent.getChildrenText().slice(e)}]:n.children.slice(e).map(r=>xd(r))};return n.attrs?t.attributes=Cr(n.attrs.toObject()):n.isText&&n.parent.attrs&&(t.attributes=Cr(n.parent.attrs.toObject())),t}function vk(n,e){const{node:t}=n,r=[...e].slice(0,-1),i=t.isText?t.parent.getChildrenText().length:t.children.length,s=[...r,i],o=[...r],a=[];o[o.length-1]+=1,e.every((c,d)=>c===s[d])||a.push({fromPath:[...e],toPath:s});const u=yk(t,e[e.length-1]);return u&&a.push({fromPath:o,toPath:o,content:u}),a}function wk(n,e){const{node:t,offset:r}=n,i=t.children[r],s=t.children[r-1],{children:o}=i,a=[...e].slice(0,-1),u=[{fromPath:[...e],toPath:[...a,r+1]}];if(!i.children.length)return u;const c=[...a,r-1,s.hasTextChild()?s.getChildrenText().length:s.children.length],d=o.map(h=>xd(h));return u.push({fromPath:c,toPath:c,content:d}),u}function Nd(n,e,t){const{type:r}=n,i=t.issueTimeTicket();if(r===ln){Zy(n);const{value:s}=n,o=rt.create(Ce.of(i,0),r,s);e.append(o)}else{const{children:s=[]}=n,{attributes:o}=n;let a;if(typeof o=="object"&&!Cy(o)){const c=Es(o);a=new br;for(const[d,h]of Object.entries(c))a.set(d,h,i)}const u=rt.create(Ce.of(i,0),r,void 0,a);e.append(u);for(const c of s)Nd(c,u,t)}}function Sk(n,e){const{type:t}=e,r=n.issueTimeTicket();let i;if(e.type===ln){const{value:s}=e;i=rt.create(Ce.of(r,0),t,s)}else if(e){const{children:s=[]}=e,{attributes:o}=e;let a;if(typeof o=="object"&&!Cy(o)){const u=Es(o);a=new br;for(const[c,d]of Object.entries(u))a.set(c,d,r)}i=rt.create(Ce.of(n.issueTimeTicket(),0),t,void 0,a);for(const u of s)Nd(u,i,n)}return i}function Zy(n){if(!n.value.length)throw new S(w.ErrInvalidArgument,"text node cannot have empty value");return!0}function Cm(n){if(!n.length)return!0;if(n[0].type===ln)for(const t of n){const{type:r}=t;if(r!==ln)throw new S(w.ErrInvalidArgument,"element node and text node cannot be passed together");Zy(t)}else for(const t of n){const{type:r}=t;if(r===ln)throw new S(w.ErrInvalidArgument,"element node and text node cannot be passed together")}return!0}class Cd{constructor(e){l(this,"initialRoot");l(this,"context");l(this,"tree");this.initialRoot=e}initialize(e,t){this.context=e,this.tree=t}getID(){return this.tree.getID()}buildRoot(e){if(!this.initialRoot)return rt.create(Ce.of(e.issueTimeTicket(),0),l1);const t=rt.create(Ce.of(e.issueTimeTicket(),0),this.initialRoot.type);for(const r of this.initialRoot.children)Nd(r,t,e);return t}getSize(){if(!this.context||!this.tree)throw new S(w.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getSize()}getNodeSize(){if(!this.context||!this.tree)throw new S(w.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getNodeSize()}getIndexTree(){if(!this.context||!this.tree)throw new S(w.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getIndexTree()}splitByPath(e){if(!this.context||!this.tree)throw new S(w.ErrNotInitialized,"Tree is not initialized yet");if(!e.length)throw new S(w.ErrInvalidArgument,"path should not be empty");const t=this.tree.pathToTreePos(e),r=vk(t,e);for(const i of r){const{fromPath:s,toPath:o,content:a}=i,u=this.tree.pathToPos(s),c=this.tree.pathToPos(o);this.editInternal(u,c,a?[a]:[],0)}}mergeByPath(e){if(!this.context||!this.tree)throw new S(w.ErrNotInitialized,"Tree is not initialized yet");if(!e.length)throw new S(w.ErrInvalidArgument,"path should not be empty");const t=this.tree.pathToTreePos(e);if(t.node.isText)throw new S(w.ErrInvalidArgument,"text node cannot be merged");const r=wk(t,e);for(const i of r){const{fromPath:s,toPath:o,content:a}=i,u=this.tree.pathToPos(s),c=this.tree.pathToPos(o);this.editInternal(u,c,a??[],0)}}styleByPath(e,t){if(!this.context||!this.tree)throw new S(w.ErrNotInitialized,"Tree is not initialized yet");if(!e.length)throw new S(w.ErrInvalidArgument,"path should not be empty");const[r,i]=this.tree.pathToPosRange(e),s=this.context.issueTimeTicket(),o=t?Es(t):void 0,[a,,u]=this.tree.style([r,i],o,s);this.context.acc(u);for(const c of a)this.context.registerGCPair(c);this.context.push(Pr.create(this.tree.getCreatedAt(),r,i,o?new Map(Object.entries(o)):new Map,s))}style(e,t,r){if(!this.context||!this.tree)throw new S(w.ErrNotInitialized,"Tree is not initialized yet");if(e>t)throw new S(w.ErrInvalidArgument,"from should be less than or equal to to");const i=this.tree.findPos(e),s=this.tree.findPos(t),o=this.context.issueTimeTicket(),a=r?Es(r):void 0,[u,,c]=this.tree.style([i,s],a,o);this.context.acc(c);for(const d of u)this.context.registerGCPair(d);this.context.push(Pr.create(this.tree.getCreatedAt(),i,s,a?new Map(Object.entries(a)):new Map,o))}removeStyle(e,t,r){if(!this.context||!this.tree)throw new S(w.ErrNotInitialized,"Tree is not initialized yet");if(e>t)throw new S(w.ErrInvalidArgument,"from should be less than or equal to to");const i=this.tree.findPos(e),s=this.tree.findPos(t),o=this.context.issueTimeTicket(),[a,,u]=this.tree.removeStyle([i,s],r,o);this.context.acc(u);for(const c of a)this.context.registerGCPair(c);this.context.push(Pr.createTreeRemoveStyleOperation(this.tree.getCreatedAt(),i,s,r,o))}editInternal(e,t,r,i=0){var c;if(r.length!==0&&r[0]&&(Cm(r),r[0].type!==ln))for(const d of r){const{children:h=[]}=d;Cm(h)}const s=this.context.getLastTimeTicket();let o=new Array;if(((c=r[0])==null?void 0:c.type)===ln){let d="";for(const h of r){const{value:m}=h;d+=m}o.push(rt.create(Ce.of(this.context.issueTimeTicket(),0),ln,d))}else o=r.map(d=>d&&Sk(this.context,d)).filter(d=>d);const[,a,u]=this.tree.edit([e,t],o.length?o.map(d=>d==null?void 0:d.deepcopy()):void 0,i,s,()=>this.context.issueTimeTicket());this.context.acc(u);for(const d of a)this.context.registerGCPair(d);return this.context.push(Ho.create(this.tree.getCreatedAt(),e,t,o.length?o:void 0,i,s)),!0}editByPath(e,t,r,i=0){if(!this.context||!this.tree)throw new S(w.ErrNotInitialized,"Tree is not initialized yet");if(e.length!==t.length)throw new S(w.ErrInvalidArgument,"path length should be equal");if(!e.length||!t.length)throw new S(w.ErrInvalidArgument,"path should not be empty");const s=this.tree.pathToPos(e),o=this.tree.pathToPos(t);return this.editInternal(s,o,r?[r]:[],i)}editBulkByPath(e,t,r,i=0){if(!this.context||!this.tree)throw new S(w.ErrNotInitialized,"Tree is not initialized yet");if(e.length!==t.length)throw new S(w.ErrInvalidArgument,"path length should be equal");if(!e.length||!t.length)throw new S(w.ErrInvalidArgument,"path should not be empty");const s=this.tree.pathToPos(e),o=this.tree.pathToPos(t);return this.editInternal(s,o,r,i)}edit(e,t,r,i=0){if(!this.context||!this.tree)throw new S(w.ErrNotInitialized,"Tree is not initialized yet");if(e>t)throw new S(w.ErrInvalidArgument,"from should be less than or equal to to");const s=this.tree.findPos(e),o=this.tree.findPos(t);return this.editInternal(s,o,r?[r]:[],i)}editBulk(e,t,r,i=0){if(!this.context||!this.tree)throw new S(w.ErrNotInitialized,"Tree is not initialized yet");if(e>t)throw new S(w.ErrInvalidArgument,"from should be less than or equal to to");const s=this.tree.findPos(e),o=this.tree.findPos(t);return this.editInternal(s,o,r,i)}toXML(){if(!this.context||!this.tree)throw new S(w.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toXML()}toJSON(){if(!this.context||!this.tree)throw new S(w.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toJSON()}toJSForTest(){if(!this.context||!this.tree)throw new S(w.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toJSForTest()}toJSInfoForTest(){if(!this.context||!this.tree)throw new S(w.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toJSInfoForTest()}getRootTreeNode(){if(!this.context||!this.tree)throw new S(w.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getRootTreeNode()}indexToPath(e){if(!this.context||!this.tree)throw new S(w.ErrNotInitialized,"Tree is not initialized yet");return this.tree.indexToPath(e)}pathToIndex(e){if(!this.context||!this.tree)throw new S(w.ErrNotInitialized,"Tree is not initialized yet");return this.tree.pathToIndex(e)}pathRangeToPosRange(e){if(!this.context||!this.tree)throw new S(w.ErrNotInitialized,"Tree is not initialized yet");const t=[this.tree.pathToIndex(e[0]),this.tree.pathToIndex(e[1])],r=this.tree.indexRangeToPosRange(t);return[r[0].toStruct(),r[1].toStruct()]}indexRangeToPosRange(e){if(!this.context||!this.tree)throw new S(w.ErrNotInitialized,"Tree is not initialized yet");return this.tree.indexRangeToPosStructRange(e)}posRangeToIndexRange(e){if(!this.context||!this.tree)throw new S(w.ErrNotInitialized,"Tree is not initialized yet");const t=[Jt.fromStruct(e[0]),Jt.fromStruct(e[1])];return this.tree.posRangeToIndexRange(t)}posRangeToPathRange(e){if(!this.context||!this.tree)throw new S(w.ErrNotInitialized,"Tree is not initialized yet");const t=[Jt.fromStruct(e[0]),Jt.fromStruct(e[1])];return this.tree.posRangeToPathRange(t)}}function Pm(n,e){return Xy(n,e)}function Rt(n,e){if(e){if(e instanceof oe)return e;if(e instanceof Le)return Xy(n,e);if(e instanceof Be)return gk(n,e);if(e instanceof ot)return new Ad(n,e);if(e instanceof Xe){const t=new Ed(fn.Int,0);return t.initialize(n,e),t}else if(e instanceof at){const t=new Cd;return t.initialize(n,e),t}}else return;throw new TypeError(`Unsupported type of element: ${typeof e}`)}function wi(n,e){const t=Rt(n,e);return t instanceof oe?t.getValue():t}function co(n,e,t){let r;if(oe.isSupport(e))r=oe.of(e,t);else if(Array.isArray(e))r=Be.create(t,G.buildArrayElements(n,e));else if(typeof e=="object")e instanceof Ad?(r=ot.create(Ns.create(),t),e.initialize(n,r)):e instanceof Ed?(r=Xe.create(e.getValueType(),e.getValue(),t),e.initialize(n,r)):e instanceof Cd?(r=at.create(e.buildRoot(n),t),e.initialize(n,r)):r=Le.create(t,$o.buildObjectMembers(n,e));else throw new TypeError(`Unsupported type of value: ${typeof e}`);return r}class Uu{constructor(e,t){l(this,"context");l(this,"presence");this.context=e,this.presence=t}set(e,t){for(const r of Object.keys(e))this.presence[r]=e[r];this.context.setPresenceChange({type:cn.Put,presence:Bt(this.presence)}),this.context.setReversePresence(e,t)}get(e){return this.presence[e]}clear(){this.presence={},this.context.setPresenceChange({type:cn.Clear})}}const Dm=50;class kk{constructor(){l(this,"undoStack",[]);l(this,"redoStack",[])}hasUndo(){return this.undoStack.length>0}hasRedo(){return this.redoStack.length>0}pushUndo(e){this.undoStack.length>=Dm&&this.undoStack.shift(),this.undoStack.push(e)}popUndo(){return this.undoStack.pop()}pushRedo(e){this.redoStack.length>=Dm&&this.redoStack.shift(),this.redoStack.push(e)}popRedo(){return this.redoStack.pop()}clearRedo(){this.redoStack=[]}getUndoStackForTest(){return this.undoStack}getRedoStackForTest(){return this.redoStack}}const Tk="yorkie-devtools-panel",Ik="yorkie-devtools-sdk";function Ak(n){return[Ae.StatusChanged,Ae.Snapshot,Ae.LocalChange,Ae.RemoteChange,Ae.Initialized,Ae.Watched,Ae.Unwatched,Ae.PresenceChanged].includes(n.type)}function Ek(n){return n.every(Ak)}let Vi="disconnected";const Om=new Map,$a=new Map;typeof window<"u"&&(window.docEventsForReplayByDocKey=$a);function Sa(n,e){(e!=null&&e.force||Vi!=="disconnected")&&window.postMessage({source:Ik,...n},"*")}function xk(n){if(!n.isEnableDevtools()||typeof window>"u"||Om.has(n.getKey()))return;$a.set(n.getKey(),[]);const e=n.subscribe("all",t=>{Ek(t)&&($a.get(n.getKey()).push(t),Vi==="synced"&&Sa({msg:"doc::sync::partial",docKey:n.getKey(),event:t}))});Om.set(n.getKey(),[e]),Sa({msg:"refresh-devtools"},{force:!0}),window.addEventListener("message",t=>{var i;if(((i=t.data)==null?void 0:i.source)!==Tk)return;switch(t.data.msg){case"devtools::connect":if(Vi!=="disconnected")break;Vi="connected",Sa({msg:"doc::available",docKey:n.getKey()}),$.info(`[YD] Devtools connected. Doc: ${n.getKey()}`);break;case"devtools::disconnect":Vi="disconnected",$.info(`[YD] Devtools disconnected. Doc: ${n.getKey()}`);break;case"devtools::subscribe":Vi="synced",Sa({msg:"doc::sync::full",docKey:n.getKey(),events:$a.get(n.getKey())}),$.info(`[YD] Devtools subscribed. Doc: ${n.getKey()}`);break}})}var Ur=(n=>(n.Detached="detached",n.Attached="attached",n.Removed="removed",n))(Ur||{}),Ae=(n=>(n.StatusChanged="status-changed",n.ConnectionChanged="connection-changed",n.SyncStatusChanged="sync-status-changed",n.Snapshot="snapshot",n.LocalChange="local-change",n.RemoteChange="remote-change",n.Initialized="initialized",n.Watched="watched",n.Unwatched="unwatched",n.PresenceChanged="presence-changed",n.Broadcast="broadcast",n.LocalBroadcast="local-broadcast",n.AuthError="auth-error",n))(Ae||{}),hf=(n=>(n.Connected="connected",n.Disconnected="disconnected",n))(hf||{}),mf=(n=>(n.Synced="synced",n.SyncFailed="sync-failed",n))(mf||{});class ev{constructor(e,t){l(this,"key");l(this,"status");l(this,"opts");l(this,"changeID");l(this,"checkpoint");l(this,"localChanges");l(this,"maxSizeLimit");l(this,"schemaRules");l(this,"root");l(this,"clone");l(this,"eventStream");l(this,"eventStreamObserver");l(this,"onlineClients");l(this,"presences");l(this,"history");l(this,"internalHistory");l(this,"isUpdating");this.opts=t||{},this.key=e,this.status="detached",this.root=Fo.create(),this.changeID=p1,this.checkpoint=y1,this.localChanges=[],this.maxSizeLimit=0,this.schemaRules=[],this.eventStream=mk(r=>{this.eventStreamObserver=r}),this.onlineClients=new Set,this.presences=new Map,this.isUpdating=!1,this.internalHistory=new kk,this.history={canUndo:this.canUndo.bind(this),canRedo:this.canRedo.bind(this),undo:this.undo.bind(this),redo:this.redo.bind(this)},xk(this)}update(e,t){var a,u,c;if(this.getStatus()==="removed")throw new S(w.ErrDocumentRemoved,`${this.key} is removed`);this.ensureClone();const r=this.changeID.getActorID(),i=ns.create(this.changeID,this.clone.root,this.clone.presences.get(r)||{},t);try{const d=Pm(i,this.clone.root.getObject());this.presences.has(r)||this.clone.presences.set(r,{}),this.isUpdating=!0,e(d,new Uu(i,this.clone.presences.get(r)))}catch(d){throw this.clone=void 0,d}finally{this.isUpdating=!1}const s=this.getSchemaRules();if(!i.isPresenceOnlyChange()&&s.length>0){const d=lk((a=this.clone)==null?void 0:a.root.getObject(),s);if(!d.valid)throw this.clone=void 0,new S(w.ErrDocumentSchemaValidationFailed,`schema validation failed: ${(u=d.errors)==null?void 0:u.map(h=>h.message).join(", ")}`)}const o=o1((c=this.clone)==null?void 0:c.root.getDocSize());if(!i.isPresenceOnlyChange()&&this.maxSizeLimit>0&&this.maxSizeLimit<o)throw this.clone=void 0,new S(w.ErrDocumentSizeExceedsLimit,`document size exceeded: ${o} > ${this.maxSizeLimit}`);if(i.hasChange()){$.isEnabled(qe.Trivial)&&$.trivial(`trying to update a local change: ${this.toJSON()}`);const d=i.toChange(),{opInfos:h,reverseOps:m}=d.execute(this.root,this.presences,X.Local),p=i.getReversePresence();p&&m.push({type:"presence",value:p}),this.localChanges.push(d),m.length>0&&this.internalHistory.pushUndo(m),h.length>0&&this.internalHistory.clearRedo(),this.changeID=i.getNextID();const k=[];h.length>0&&k.push({type:"local-change",source:X.Local,value:{message:d.getMessage()||"",operations:h,actor:r,clientSeq:d.getID().getClientSeq(),serverSeq:d.getID().getServerSeq()},rawChange:this.isEnableDevtools()?d.toStruct():void 0}),d.hasPresenceChange()&&k.push({type:"presence-changed",source:X.Local,value:{clientID:r,presence:this.getPresence(r)}}),this.publish(k),$.isEnabled(qe.Trivial)&&$.trivial(`after update a local change: ${this.toJSON()}`)}}subscribe(e,t,r,i){if(typeof e=="string"){if(typeof t!="function")throw new S(w.ErrInvalidArgument,"Second argument must be a callback function");if(e==="presence"){const a=t;return this.eventStream.subscribe(u=>{for(const c of u)c.type!=="initialized"&&c.type!=="watched"&&c.type!=="unwatched"&&c.type!=="presence-changed"||a(c)},r,i)}if(e==="my-presence"){const a=t;return this.eventStream.subscribe(u=>{for(const c of u)c.type!=="initialized"&&c.type!=="presence-changed"||c.type==="presence-changed"&&c.value.clientID!==this.changeID.getActorID()||a(c)},r,i)}if(e==="others"){const a=t;return this.eventStream.subscribe(u=>{for(const c of u)c.type!=="watched"&&c.type!=="unwatched"&&c.type!=="presence-changed"||c.value.clientID!==this.changeID.getActorID()&&a(c)},r,i)}if(e==="connection"){const a=t;return this.eventStream.subscribe(u=>{for(const c of u)c.type==="connection-changed"&&a(c)},r,i)}if(e==="status"){const a=t;return this.eventStream.subscribe(u=>{for(const c of u)c.type==="status-changed"&&a(c)},r,i)}if(e==="sync"){const a=t;return this.eventStream.subscribe(u=>{for(const c of u)c.type==="sync-status-changed"&&a(c)},r,i)}if(e==="local-broadcast"){const a=t;return this.eventStream.subscribe(u=>{for(const c of u)c.type==="local-broadcast"&&a(c)},r)}if(e==="broadcast"){const a=t;return this.eventStream.subscribe(u=>{for(const c of u)c.type==="broadcast"&&a(c)},r)}if(e==="auth-error"){const a=t;return this.eventStream.subscribe(u=>{for(const c of u)c.type==="auth-error"&&a(c)},r)}if(e==="all"){const a=t;return this.eventStream.subscribe(a,r,i)}const s=e,o=t;return this.eventStream.subscribe(a=>{for(const u of a){if(u.type!=="local-change"&&u.type!=="remote-change")continue;const c=[];for(const d of u.value.operations)this.isSameElementOrChildOf(d.path,s)&&c.push(d);c.length&&o({...u,value:{...u.value,operations:c}})}},r,i)}if(typeof e=="function"){const s=e,o=t,a=r;return this.eventStream.subscribe(u=>{for(const c of u)c.type!=="snapshot"&&c.type!=="local-change"&&c.type!=="remote-change"||s(c)},o,a)}throw new S(w.ErrInvalidArgument,`"${e}" is not a valid`)}publish(e){this.eventStreamObserver&&this.eventStreamObserver.next(e)}isSameElementOrChildOf(e,t){if(t===e)return!0;const r=e.split(".");return t.split(".").every((s,o)=>s===r[o])}removePushedLocalChanges(e){for(;this.localChanges.length&&!(this.localChanges[0].getID().getClientSeq()>e);)this.localChanges.shift()}applyChangePack(e){const t=e.hasSnapshot();t?this.applySnapshot(e.getCheckpoint().getServerSeq(),e.getVersionVector(),e.getSnapshot(),e.getCheckpoint().getClientSeq()):(this.applyChanges(e.getChanges(),X.Remote),this.removePushedLocalChanges(e.getCheckpoint().getClientSeq())),this.checkpoint=this.checkpoint.forward(e.getCheckpoint()),t||this.garbageCollect(e.getVersionVector()),e.getIsRemoved()&&this.applyStatus("removed"),$.isEnabled(qe.Trivial)&&$.trivial(`${this.root.toJSON()}`)}getCheckpoint(){return this.checkpoint}getChangeID(){return this.changeID}hasLocalChanges(){return this.localChanges.length>0}ensureClone(){this.clone||(this.clone={root:this.root.deepcopy(),presences:Bt(this.presences)})}createChangePack(){const e=Array.from(this.localChanges),t=this.checkpoint.increaseClientSeq(e.length);return iu.create(this.key,t,!1,e,this.getVersionVector())}setActor(e){for(const t of this.localChanges)t.setActor(e);this.changeID=this.changeID.setActor(e)}isEnableDevtools(){return!!this.opts.enableDevtools}getKey(){return this.key}getStatus(){return this.status}getClone(){return this.clone}getCloneRoot(){if(this.clone)return this.clone.root.getObject()}getRoot(){this.ensureClone();const e=ns.create(this.changeID.next(),this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});return Pm(e,this.clone.root.getObject())}getDocSize(){return this.root.getDocSize()}getMaxSizePerDocument(){return this.maxSizeLimit}setMaxSizePerDocument(e){this.maxSizeLimit=e}getSchemaRules(){return this.schemaRules}setSchemaRules(e){this.schemaRules=e}garbageCollect(e){return this.opts.disableGC?0:(this.clone&&this.clone.root.garbageCollect(e),this.root.garbageCollect(e))}getRootObject(){return this.root.getObject()}getGarbageLen(){return this.root.getGarbageLen()}getGarbageLenFromClone(){return this.clone.root.getGarbageLen()}toJSON(){return this.root.toJSON()}toSortedJSON(){return this.root.toSortedJSON()}getStats(){return this.root.getStats()}toJSForTest(){return{...this.getRoot().toJSForTest(),key:"root"}}applySnapshot(e,t,r,i=-1){const{root:s,presences:o}=ce.bytesToSnapshot(r);this.root=new Fo(s),this.presences=o,this.changeID=this.changeID.setClocks(t.maxLamport(),t),this.clone=void 0,this.removePushedLocalChanges(i),this.applyChanges(this.localChanges,X.Local),this.publish([{type:"snapshot",source:X.Remote,value:{serverSeq:e.toString(),snapshot:this.isEnableDevtools()?ce.bytesToHex(r):void 0,snapshotVector:ce.versionVectorToHex(t)}}])}applyChanges(e,t){$.isEnabled(qe.Debug)&&$.debug(`trying to apply ${e.length} remote changes.elements:${this.root.getElementMapSize()}, removeds:${this.root.getGarbageElementSetSize()}`),$.isEnabled(qe.Trivial)&&$.trivial(e.map(r=>`${r.getID().toTestString()}	${r.toTestString()}`).join(`
`));for(const r of e)this.applyChange(r,t);$.isEnabled(qe.Debug)&&$.debug(`after appling ${e.length} remote changes.elements:${this.root.getElementMapSize()},  removeds:${this.root.getGarbageElementSetSize()}`)}applyChange(e,t){this.ensureClone(),e.execute(this.clone.root,this.clone.presences,t);const r=[],i=e.getID().getActorID();if(e.hasPresenceChange()&&this.onlineClients.has(i)){const o=e.getPresenceChange();switch(o.type){case cn.Put:r.push(this.presences.has(i)?{type:"presence-changed",source:t,value:{clientID:i,presence:o.presence}}:{type:"watched",source:X.Remote,value:{clientID:i,presence:o.presence}});break;case cn.Clear:r.push({type:"unwatched",source:X.Remote,value:{clientID:i,presence:this.getPresence(i)}}),this.removeOnlineClient(i);break}}const{opInfos:s}=e.execute(this.root,this.presences,t);if(this.changeID=this.changeID.syncClocks(e.getID()),s.length>0){const o=this.isEnableDevtools()?e.toStruct():void 0;r.push(t===X.Remote?{type:"remote-change",source:t,value:{actor:i,clientSeq:e.getID().getClientSeq(),serverSeq:e.getID().getServerSeq(),message:e.getMessage()||"",operations:s},rawChange:o}:{type:"local-change",source:t,value:{actor:i,clientSeq:e.getID().getClientSeq(),serverSeq:e.getID().getServerSeq(),message:e.getMessage()||"",operations:s},rawChange:o})}r.length>0&&this.publish(r)}applyWatchStream(e){if(e.body.case==="initialization"){const t=e.body.value.clientIds,r=new Set;for(const i of t)i!==this.changeID.getActorID()&&r.add(i);this.setOnlineClients(r),this.publish([{type:"initialized",source:X.Local,value:this.getPresences()}]);return}if(e.body.case==="event"){const{type:t,publisher:r}=e.body.value,i=[];if(t===xi.DOCUMENT_WATCHED){if(this.onlineClients.has(r)&&this.hasPresence(r))return;this.addOnlineClient(r),this.hasPresence(r)&&i.push({type:"watched",source:X.Remote,value:{clientID:r,presence:this.getPresence(r)}})}else if(t===xi.DOCUMENT_UNWATCHED){const s=this.getPresence(r);this.removeOnlineClient(r),s&&i.push({type:"unwatched",source:X.Remote,value:{clientID:r,presence:s}})}else if(t===xi.DOCUMENT_BROADCAST&&e.body.value.body){const{topic:s,payload:o}=e.body.value.body,a=new TextDecoder;i.push({type:"broadcast",value:{clientID:r,topic:s,payload:JSON.parse(a.decode(o))}})}i.length>0&&this.publish(i)}}applyStatus(e){this.status=e,e==="detached"&&this.setActor(nu),this.publish([{source:e==="removed"?X.Remote:X.Local,type:"status-changed",value:e==="attached"?{status:e,actorID:this.changeID.getActorID()}:{status:e}}])}applyDocEventForReplay(e){if(e.type==="status-changed"){this.applyStatus(e.value.status),e.value.status==="attached"&&this.setActor(e.value.actorID);return}if(e.type==="snapshot"){const{snapshot:t,serverSeq:r,snapshotVector:i}=e.value;if(!t)return;this.applySnapshot(BigInt(r),ce.hexToVersionVector(i),ce.hexToBytes(t));return}if(e.type==="local-change"||e.type==="remote-change"){if(!e.rawChange)return;const t=xs.fromStruct(e.rawChange);this.applyChange(t,e.source)}if(e.type==="initialized"){const t=new Set;for(const{clientID:r,presence:i}of e.value)t.add(r),this.presences.set(r,i);this.setOnlineClients(t);return}if(e.type==="watched"){const{clientID:t,presence:r}=e.value;this.addOnlineClient(t),this.presences.set(t,r);return}if(e.type==="unwatched"){const{clientID:t}=e.value;this.removeOnlineClient(t),this.presences.delete(t)}if(e.type==="presence-changed"){const{clientID:t,presence:r}=e.value;this.presences.set(t,r)}}applyDocEventsForReplay(e){for(const t of e)this.applyDocEventForReplay(t)}getValueByPath(e){if(!e.startsWith("$"))throw new S(w.ErrInvalidArgument,'path must start with "$"');const t=e.split(".");t.shift();let r=this.getRoot();for(const i of t)if(r=r[i],r===void 0)return;return r}setOnlineClients(e){this.onlineClients=e}resetOnlineClients(){this.onlineClients=new Set}addOnlineClient(e){this.onlineClients.add(e)}removeOnlineClient(e){this.onlineClients.delete(e)}hasPresence(e){return this.presences.has(e)}getMyPresence(){if(this.status!=="attached")return{};const e=this.presences.get(this.changeID.getActorID());return e?Bt(e):{}}getPresence(e){if(e===this.changeID.getActorID())return this.getMyPresence();if(!this.onlineClients.has(e))return;const t=this.presences.get(e);return t?Bt(t):void 0}getPresenceForTest(e){const t=this.presences.get(e);return t?Bt(t):void 0}getPresences(){const e=[];e.push({clientID:this.changeID.getActorID(),presence:Bt(this.getMyPresence())});for(const t of this.onlineClients)this.presences.has(t)&&e.push({clientID:t,presence:Bt(this.presences.get(t))});return e}getSelfForTest(){return{clientID:this.getChangeID().getActorID(),presence:this.getMyPresence()}}getOthersForTest(){const e=this.getChangeID().getActorID();return this.getPresences().filter(t=>t.clientID!==e).sort((t,r)=>t.clientID>r.clientID?1:-1)}canUndo(){return this.internalHistory.hasUndo()&&!this.isUpdating}canRedo(){return this.internalHistory.hasRedo()&&!this.isUpdating}undo(){if(this.isUpdating)throw new S(w.ErrRefused,"Undo is not allowed during an update");const e=this.internalHistory.popUndo();if(e===void 0)throw new S(w.ErrRefused,"There is no operation to be undone");this.ensureClone();const t=ns.create(this.changeID,this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});for(const c of e){if(!(c instanceof Pt)){new Uu(t,Bt(this.clone.presences.get(this.changeID.getActorID()))).set(c.value,{addToHistory:!0});continue}const d=t.issueTimeTicket();c.setExecutedAt(d),t.push(c)}const r=t.toChange();r.execute(this.clone.root,this.clone.presences,X.UndoRedo);const{opInfos:i,reverseOps:s}=r.execute(this.root,this.presences,X.UndoRedo),o=t.getReversePresence();if(o&&s.push({type:"presence",value:o}),s.length>0&&this.internalHistory.pushRedo(s),!r.hasPresenceChange()&&i.length===0)return;this.localChanges.push(r),this.changeID=t.getNextID();const a=this.changeID.getActorID(),u=[];i.length>0&&u.push({type:"local-change",source:X.UndoRedo,value:{message:r.getMessage()||"",operations:i,actor:a,clientSeq:r.getID().getClientSeq(),serverSeq:r.getID().getServerSeq()},rawChange:this.isEnableDevtools()?r.toStruct():void 0}),r.hasPresenceChange()&&u.push({type:"presence-changed",source:X.UndoRedo,value:{clientID:a,presence:this.getPresence(a)}}),this.publish(u)}redo(){if(this.isUpdating)throw new S(w.ErrRefused,"Redo is not allowed during an update");const e=this.internalHistory.popRedo();if(e===void 0)throw new S(w.ErrRefused,"There is no operation to be redone");this.ensureClone();const t=ns.create(this.changeID,this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});for(const c of e){if(!(c instanceof Pt)){new Uu(t,Bt(this.clone.presences.get(this.changeID.getActorID()))).set(c.value,{addToHistory:!0});continue}const d=t.issueTimeTicket();c.setExecutedAt(d),t.push(c)}const r=t.toChange();r.execute(this.clone.root,this.clone.presences,X.UndoRedo);const{opInfos:i,reverseOps:s}=r.execute(this.root,this.presences,X.UndoRedo),o=t.getReversePresence();if(o&&s.push({type:"presence",value:o}),s.length>0&&this.internalHistory.pushUndo(s),!r.hasPresenceChange()&&i.length===0)return;this.localChanges.push(r),this.changeID=t.getNextID();const a=this.changeID.getActorID(),u=[];i.length>0&&u.push({type:"local-change",source:X.UndoRedo,value:{message:r.getMessage()||"",operations:i,actor:a,clientSeq:r.getID().getClientSeq(),serverSeq:r.getID().getServerSeq()},rawChange:this.isEnableDevtools()?r.toStruct():void 0}),r.hasPresenceChange()&&u.push({type:"presence-changed",source:X.UndoRedo,value:{clientID:a,presence:this.getPresence(a)}}),this.publish(u)}getUndoStackForTest(){return this.internalHistory.getUndoStackForTest()}getRedoStackForTest(){return this.internalHistory.getRedoStackForTest()}broadcast(e,t,r){const i={type:"local-broadcast",value:{topic:e,payload:t},options:r};this.publish([i])}getVersionVector(){return this.changeID.getVersionVector()}}function Nk(n,e){let t=e;return{authInterceptor:s=>async o=>(n&&o.header.set("x-api-key",n),t&&o.header.set("authorization",t),await s(o)),setToken:s=>{t=s}}}const Ck="@yorkie-js/sdk",Pk="0.6.23",Rm={name:Ck,version:Pk};function Dk(n){return e=>async t=>(n?t.header.set("x-yorkie-user-agent",n):t.header.set("x-yorkie-user-agent",Rm.name+"/"+Rm.version),await e(t))}const Ok=n=>{try{if(JSON.stringify(n)===void 0)return!1}catch{return!1}return!0};var Ja=(n=>(n.Manual="manual",n.Realtime="realtime",n.RealtimePushOnly="realtime-pushonly",n.RealtimeSyncOff="realtime-syncoff",n))(Ja||{});const qs={rpcAddr:"https://api.yorkie.dev",syncLoopDuration:50,retrySyncLoopDelay:1e3,reconnectStreamDelay:1e3},Vu={maxRetries:1/0,initialRetryInterval:1e3,maxBackoff:2e4};class tv{constructor(e){l(this,"id");l(this,"key");l(this,"metadata");l(this,"status");l(this,"attachmentMap");l(this,"apiKey");l(this,"authTokenInjector");l(this,"conditions");l(this,"syncLoopDuration");l(this,"reconnectStreamDelay");l(this,"retrySyncLoopDelay");l(this,"rpcClient");l(this,"setAuthToken");l(this,"taskQueue");l(this,"processing",!1);l(this,"keepalive",!1);e=e||qs;const t=e.rpcAddr||qs.rpcAddr;this.key=e.key||Qy(),this.metadata=e.metadata||{},this.status="deactivated",this.attachmentMap=new Map,this.apiKey=e.apiKey||"",this.authTokenInjector=e.authTokenInjector,this.conditions={SyncLoop:!1,WatchLoop:!1},this.syncLoopDuration=e.syncLoopDuration??qs.syncLoopDuration,this.reconnectStreamDelay=e.reconnectStreamDelay??qs.reconnectStreamDelay,this.retrySyncLoopDelay=e.retrySyncLoopDelay??qs.retrySyncLoopDelay;const{authInterceptor:r,setToken:i}=Nk(this.apiKey);this.setAuthToken=i,this.rpcClient=PS(XS,QS({baseUrl:t,interceptors:[r,Dk(e==null?void 0:e.userAgent)],fetch:(s,o)=>{const a={...o,keepalive:this.keepalive};return fetch(s,a)}})),this.taskQueue=[]}async activate(){if(this.isActive())return Promise.resolve();if(this.authTokenInjector){const e=await this.authTokenInjector();this.setAuthToken(e)}return this.enqueueTask(async()=>{try{const e=await this.rpcClient.activateClient({clientKey:this.key,metadata:this.metadata},{headers:{"x-shard-key":`${this.apiKey}/${this.key}`}});this.id=e.clientId,this.status="activated",this.runSyncLoop(),$.info(`[AC] c:"${this.getKey()}" activated, id:"${this.id}"`),typeof window<"u"&&window.addEventListener("beforeunload",async()=>{await this.deactivate({keepalive:!0})})}catch(e){throw $.error(`[AC] c:"${this.getKey()}" err :`,e),await this.handleConnectError(e),e}})}deactivate(e={keepalive:!1}){if(this.status==="deactivated")return Promise.resolve();const t=async()=>{try{await this.rpcClient.deactivateClient({clientId:this.id},{headers:{"x-shard-key":`${this.apiKey}/${this.key}`}}),this.deactivateInternal(),$.info(`[DC] c"${this.getKey()}" deactivated`)}catch(r){throw $.error(`[DC] c:"${this.getKey()}" err :`,r),await this.handleConnectError(r),r}};if(e.keepalive){this.keepalive=!0;const r=t();return this.keepalive=!1,r}return this.enqueueTask(t)}hasDocument(e){return this.attachmentMap.has(e)}attach(e,t={}){if(!this.isActive())throw new S(w.ErrClientNotActivated,`${this.key} is not active`);if(e.getStatus()!==Ur.Detached)throw new S(w.ErrDocumentNotDetached,`${e.getKey()} is not detached`);e.setActor(this.id),e.update((s,o)=>o.set(t.initialPresence||{}));const r=e.subscribe("local-broadcast",async s=>{var d;const{topic:o,payload:a}=s.value,u=(d=s.options)==null?void 0:d.error,c=s.options;try{await this.broadcast(e.getKey(),o,a,c)}catch(h){h instanceof Error&&(u==null||u(h))}}),i=t.syncMode??"realtime";return this.enqueueTask(async()=>{try{const s=await this.rpcClient.attachDocument({clientId:this.id,changePack:ce.toChangePack(e.createChangePack()),schemaKey:t.schema},{headers:{"x-shard-key":`${this.apiKey}/${e.getKey()}`}});(s.maxSizePerDocument??0)>0&&e.setMaxSizePerDocument(s.maxSizePerDocument),s.schemaRules.length>0&&e.setSchemaRules(ce.fromSchemaRules(s.schemaRules));const a=ce.fromChangePack(s.changePack);if(e.applyChangePack(a),e.getStatus()===Ur.Removed)return e;e.applyStatus(Ur.Attached),this.attachmentMap.set(e.getKey(),new ak(this.reconnectStreamDelay,e,s.documentId,i,r)),i!=="manual"&&await this.runWatchLoop(e.getKey()),$.info(`[AD] c:"${this.getKey()}" attaches d:"${e.getKey()}"`);const u=e.getRootObject();if(t.initialRoot){const c=t.initialRoot;e.update(d=>{for(const[h,m]of Object.entries(c))if(!u.has(h)){const p=h;d[p]=m}})}return e}catch(s){throw $.error(`[AD] c:"${this.getKey()}" err :`,s),await this.handleConnectError(s),s}})}detach(e,t={keepalive:!1}){if(!this.isActive())throw new S(w.ErrClientNotActivated,`${this.key} is not active`);const r=this.attachmentMap.get(e.getKey());if(!r)throw new S(w.ErrDocumentNotAttached,`${e.getKey()} is not attached`);e.update((s,o)=>o.clear());const i=async()=>{try{const s=await this.rpcClient.detachDocument({clientId:this.id,documentId:r.docID,changePack:ce.toChangePack(e.createChangePack()),removeIfNotAttached:t.removeIfNotAttached??!1},{headers:{"x-shard-key":`${this.apiKey}/${e.getKey()}`}}),o=ce.fromChangePack(s.changePack);return e.applyChangePack(o),e.getStatus()!==Ur.Removed&&e.applyStatus(Ur.Detached),this.detachInternal(e.getKey()),$.info(`[DD] c:"${this.getKey()}" detaches d:"${e.getKey()}"`),e}catch(s){throw $.error(`[DD] c:"${this.getKey()}" err :`,s),await this.handleConnectError(s),s}};if(t.keepalive){this.keepalive=!0;const s=i();return this.keepalive=!1,s}return this.enqueueTask(i)}async changeSyncMode(e,t){if(!this.isActive())throw new S(w.ErrClientNotActivated,`${this.key} is not active`);const r=this.attachmentMap.get(e.getKey());if(!r)throw new S(w.ErrDocumentNotAttached,`${e.getKey()} is not attached`);const i=r.syncMode;return i===t?e:(r.changeSyncMode(t),t==="manual"?(r.cancelWatchStream(),e):(t==="realtime"&&(r.remoteChangeEventReceived=!0),i==="manual"&&await this.runWatchLoop(e.getKey()),e))}sync(e){if(!this.isActive())throw new S(w.ErrClientNotActivated,`${this.key} is not active`);if(e){const t=this.attachmentMap.get(e.getKey());if(!t)throw new S(w.ErrDocumentNotAttached,`${e.getKey()} is not attached`);return this.enqueueTask(async()=>this.syncInternal(t,"realtime").catch(async r=>{throw $.error(`[SY] c:"${this.getKey()}" err :`,r),await this.handleConnectError(r),r}))}return this.enqueueTask(async()=>{const t=[];for(const[,r]of this.attachmentMap)t.push(this.syncInternal(r,r.syncMode));return Promise.all(t).catch(async r=>{throw $.error(`[SY] c:"${this.getKey()}" err :`,r),await this.handleConnectError(r),r})})}remove(e){if(!this.isActive())throw new S(w.ErrClientNotActivated,`${this.key} is not active`);const t=this.attachmentMap.get(e.getKey());if(!t)throw new S(w.ErrDocumentNotAttached,`${e.getKey()} is not attached`);e.setActor(this.id);const r=ce.toChangePack(e.createChangePack());return r.isRemoved=!0,this.enqueueTask(async()=>{try{const i=await this.rpcClient.removeDocument({clientId:this.id,documentId:t.docID,changePack:r},{headers:{"x-shard-key":`${this.apiKey}/${e.getKey()}`}}),s=ce.fromChangePack(i.changePack);e.applyChangePack(s),this.detachInternal(e.getKey()),$.info(`[RD] c:"${this.getKey()}" removes d:"${e.getKey()}"`)}catch(i){throw $.error(`[RD] c:"${this.getKey()}" err :`,i),await this.handleConnectError(i),i}})}getID(){return this.id}getKey(){return this.key}isActive(){return this.status==="activated"}getStatus(){return this.status}getCondition(e){return this.conditions[e]}broadcast(e,t,r,i){if(!this.isActive())throw new S(w.ErrClientNotActivated,`${this.key} is not active`);const s=this.attachmentMap.get(e);if(!s)throw new S(w.ErrDocumentNotAttached,`${e} is not attached`);if(!Ok(r))throw new S(w.ErrInvalidArgument,"payload is not serializable");const o=(i==null?void 0:i.maxRetries)??Vu.maxRetries,a=Vu.maxBackoff;let u=0;const c=h=>Math.min(Vu.initialRetryInterval*2**h,a),d=async()=>this.enqueueTask(async()=>{try{await this.rpcClient.broadcast({clientId:this.id,documentId:s.docID,topic:t,payload:new TextEncoder().encode(JSON.stringify(r))},{headers:{"x-shard-key":`${this.apiKey}/${e}`}}),$.info(`[BC] c:"${this.getKey()}" broadcasts d:"${e}" t:"${t}"`)}catch(h){if($.error(`[BC] c:"${this.getKey()}" err:`,h),await this.handleConnectError(h))if(h instanceof Y&&Mr(h)===w.ErrUnauthenticated&&s.doc.publish([{type:Ae.AuthError,value:{reason:Gs(h).reason,method:"Broadcast"}}]),u<o)u++,setTimeout(()=>d(),c(u-1)),$.info(`[BC] c:"${this.getKey()}" retry attempt ${u}/${o}`);else throw $.error(`[BC] c:"${this.getKey()}" exceeded maximum retry attempts`),h;else throw h}});return d()}runSyncLoop(){const e=async()=>{if(!this.isActive()){$.debug(`[SL] c:"${this.getKey()}" exit sync loop`),this.conditions.SyncLoop=!1;return}try{await this.enqueueTask(async()=>{const t=[];for(const[,r]of this.attachmentMap)r.needRealtimeSync()&&(r.remoteChangeEventReceived=!1,t.push(this.syncInternal(r,r.syncMode).catch(async i=>{throw i instanceof Y&&Mr(i)===w.ErrUnauthenticated&&r.doc.publish([{type:Ae.AuthError,value:{reason:Gs(i).reason,method:"PushPull"}}]),i})));await Promise.all(t),setTimeout(e,this.syncLoopDuration)})}catch(t){$.error(`[SL] c:"${this.getKey()}" sync failed:`,t),await this.handleConnectError(t)?setTimeout(e,this.retrySyncLoopDelay):this.conditions.SyncLoop=!1}};$.debug(`[SL] c:"${this.getKey()}" run sync loop`),this.conditions.SyncLoop=!0,e()}async runWatchLoop(e){const t=this.attachmentMap.get(e);if(!t)throw new S(w.ErrDocumentNotAttached,`${e} is not attached`);return this.conditions.WatchLoop=!0,t.runWatchLoop(r=>{if(!this.isActive())return this.conditions.WatchLoop=!1,Promise.reject(new S(w.ErrClientNotActivated,`${this.key} is not active`));if(!this.attachmentMap.has(e))return this.conditions.WatchLoop=!1,Promise.reject(new S(w.ErrDocumentNotAttached,`${e} is not attached`));const i=new AbortController,s=this.rpcClient.watchDocument({clientId:this.id,documentId:t.docID},{headers:{"x-shard-key":`${this.apiKey}/${e}`},signal:i.signal});return t.doc.publish([{type:Ae.ConnectionChanged,value:hf.Connected}]),$.info(`[WD] c:"${this.getKey()}" watches d:"${e}"`),new Promise((o,a)=>{(async()=>{try{for await(const c of s)this.handleWatchDocumentsResponse(t,c),c.body.case==="initialization"&&o([s,i])}catch(c){t.doc.resetOnlineClients(),t.doc.publish([{type:Ae.Initialized,source:X.Local,value:t.doc.getPresences()}]),t.doc.publish([{type:Ae.ConnectionChanged,value:hf.Disconnected}]),$.debug(`[WD] c:"${this.getKey()}" unwatches`),await this.handleConnectError(c)?(c instanceof Y&&Mr(c)===w.ErrUnauthenticated&&t.doc.publish([{type:Ae.AuthError,value:{reason:Gs(c).reason,method:"WatchDocuments"}}]),r()):this.conditions.WatchLoop=!1,a(c)}})()})})}handleWatchDocumentsResponse(e,t){if(t.body.case==="event"&&t.body.value.type===xi.DOCUMENT_CHANGED){e.remoteChangeEventReceived=!0;return}e.doc.applyWatchStream(t)}deactivateInternal(){this.status="deactivated";for(const[e,t]of this.attachmentMap)this.detachInternal(e),t.doc.applyStatus(Ur.Detached)}detachInternal(e){const t=this.attachmentMap.get(e);t&&(t.cancelWatchStream(),t.unsubscribeBroadcastEvent(),this.attachmentMap.delete(e))}async syncInternal(e,t){const{doc:r,docID:i}=e,s=r.createChangePack();try{const o=await this.rpcClient.pushPullChanges({clientId:this.id,documentId:i,changePack:ce.toChangePack(s),pushOnly:t==="realtime-pushonly"},{headers:{"x-shard-key":`${this.apiKey}/${r.getKey()}`}}),a=ce.fromChangePack(o.changePack);if(a.hasChanges()&&(e.syncMode==="realtime-pushonly"||e.syncMode==="realtime-syncoff"))return r;r.applyChangePack(a),e.doc.publish([{type:Ae.SyncStatusChanged,value:mf.Synced}]),r.getStatus()===Ur.Removed&&this.detachInternal(r.getKey());const u=r.getKey(),c=a.getChangeSize();return $.info(`[PP] c:"${this.getKey()}" sync d:"${u}", push:${s.getChangeSize()} pull:${c} cp:${a.getCheckpoint().toTestString()}`),r}catch(o){throw r.publish([{type:Ae.SyncStatusChanged,value:mf.SyncFailed}]),$.error(`[PP] c:"${this.getKey()}" err :`,o),o}}async handleConnectError(e){if(!(e instanceof Y))return!1;if(e.code===q.Canceled||e.code===q.Unknown||e.code===q.ResourceExhausted||e.code===q.Unavailable)return!0;if(Mr(e)===w.ErrUnauthenticated){if(this.authTokenInjector){const t=await this.authTokenInjector(Gs(e).reason);this.setAuthToken(t)}return!0}return Mr(e)===w.ErrTooManySubscribers?($.error(`[WD] c:"${this.getKey()}" err :`,e.rawMessage),!0):(Mr(e)===w.ErrTooManyAttachments||(Mr(e)===w.ErrClientNotActivated||Mr(e)===w.ErrClientNotFound)&&this.deactivateInternal(),!1)}enqueueTask(e){return new Promise((t,r)=>{this.taskQueue.push(()=>e().then(t).catch(r)),this.processing||this.processNext()})}async processNext(){if(this.taskQueue.length===0){this.processing=!1;return}try{this.processing=!0,await this.taskQueue.shift()()}catch{$.error(`[TQ] c:"${this.getKey()}" process failed, id:"${this.id}"`)}this.processNext()}}const nv={Client:tv,Document:ev,IntType:fn.Int,LongType:fn.Long};typeof globalThis<"u"&&(globalThis.yorkie={Client:tv,Document:ev,Primitive:oe,Text:Ad,Counter:Ed,Tree:Cd,LogLevel:qe,setLogLevel:ok,IntType:fn.Int,LongType:fn.Long});class Rk{constructor(e,t){this.x=e,this.y=t,this.lifetime=0}}const Lk=({xPos:n,yPos:e})=>{const[t,r]=Ke.useState([]),i=Ke.useRef(null),[s,o]=Ke.useState([]),a=(u,c)=>{const d=new Rk(u,c);s.push(d),o(s),t.push(d),r(t)};return Ke.useEffect(()=>{const c=i.current.getContext("2d"),d=()=>{c.clearRect(0,0,c.canvas.width,c.canvas.height);const h=.7*(1*4e3)/60;for(let m=0;m<s.length;++m){const p=s[m];let k;if(s[m-1]!==void 0?k=s[m-1]:k=p,p.lifetime+=1,p.lifetime>h)s.shift();else{c.lineWidth=5,c.lineJoin="round";const T=0,C=0,y=0;c.strokeStyle=`rgb(${T},${C},${y})`,c.beginPath(),c.moveTo(k.x,k.y),c.lineTo(p.x,p.y),c.stroke(),c.closePath()}}requestAnimationFrame(d)};d()},[s]),Ke.useEffect(()=>{a(n,e)},[n,e]),de.jsx("canvas",{className:"pen-cursor-canvas",ref:i,width:document.body.clientWidth,height:document.body.clientHeight})},Bk="_goUp0_1lnal_1",bk="_goUpAnimation0_1lnal_1",zk="_fadeOut_1lnal_1",Fk="_goUp1_1lnal_16",$k="_goUpAnimation1_1lnal_1",Jk="_goUp2_1lnal_31",Mk="_goUpAnimation2_1lnal_1",Uk="_leftRight0_1lnal_46",Vk="_leftRightAnimation0_1lnal_1",jk="_leftRight1_1lnal_60",qk="_leftRightAnimation1_1lnal_1",Kk="_leftRight2_1lnal_74",Wk="_leftRightAnimation2_1lnal_1",ju={goUp0:Bk,goUpAnimation0:bk,fadeOut:zk,goUp1:Fk,goUpAnimation1:$k,goUp2:Jk,goUpAnimation2:Mk,leftRight0:Uk,leftRightAnimation0:Vk,leftRight1:jk,leftRightAnimation1:qk,leftRight2:Kk,leftRightAnimation2:Wk};function Hk({x:n,y:e,timestamp:t,selectedCursorShape:r}){return de.jsx("div",{className:"single-animation-container",children:de.jsx("div",{className:`absolute select-none pointer-events-none ${ju.disappear} text-${t%5+2}xl ${ju["goUp"+t%3]}`,style:{left:n,top:e},children:de.jsx("div",{className:ju["leftRight"+t%3],children:de.jsx("div",{className:"transform -translate-x-1/2 -translate-y-1/2",children:de.jsx("img",{src:`./icons/icon_${r}.svg`})})})})})}function Lm(n,e){const t=Ke.useRef(n);Ke.useEffect(()=>{t.current=n},[n]),Ke.useEffect(()=>{function r(){t.current()}if(e!==null){let i=setInterval(r,e);return()=>clearInterval(i)}},[e])}const _k=({pointerDown:n,xPos:e,yPos:t,selectedCursorShape:r})=>{const[i,s]=Ke.useState([]),o=100;return Lm(()=>{s(a=>a.filter(u=>u.timestamp>Date.now()-4e3))},1e3),Lm(()=>{n&&s(a=>a.concat([{point:{x:e,y:t},timestamp:Date.now()}]))},o),de.jsx("div",{style:{transform:`translateX(${e}px) translateY(${t}px)`},children:i.map(a=>de.jsx(Hk,{x:a.point.x,y:a.point.y,timestamp:a.timestamp,selectedCursorShape:r},a.timestamp.toString()))})},Gk=({selectedCursorShape:n,x:e,y:t,pointerDown:r})=>de.jsxs(de.Fragment,{children:[de.jsx("img",{src:`./icons/icon_${n}.svg`,className:`${n}-cursor`,style:{transform:`translate3d(${e}px, ${t}px, 0)`}}),(n==="heart"||n==="thumbs")&&de.jsx(_k,{pointerDown:r,xPos:e,yPos:t,selectedCursorShape:n}),n==="pen"&&r&&de.jsx(Lk,{xPos:e,yPos:t})]}),Yk=({handleCursorShapeSelect:n,clientsLength:e})=>{const[t,r]=Ke.useState("cursor"),i=["heart","thumbs","pen","cursor"];return de.jsxs("div",{className:"cursor-selector-container",children:[de.jsx("div",{className:"cursor-selections-container",children:i.map(s=>de.jsx("img",{onClick:()=>{n(s),r(s)},className:`${t===s?"cursor-shape-selected":"cursor-shape-not-selected"}`,src:`./icons/icon_${s}.svg`},s))}),de.jsx("div",{className:"num-users-container",children:de.jsx("p",{children:e!==1?`${e} users are here`:"1 user here"})})]})},Bm=new nv.Client({rpcAddr:"https://api.yorkie.dev",apiKey:"D6sd9E5ehtXBssmeRZ4QQP"}),gi=new nv.Document("simultaneous-cursors",{enableDevtools:!0}),Qk=()=>{const[n,e]=Ke.useState([]),t=r=>{gi.update((i,s)=>{s.set({cursorShape:r})})};return Ke.useEffect(()=>{(async()=>{await Bm.activate(),gi.subscribe("presence",a=>{e(gi.getPresences())}),await Bm.attach(gi,{initialPresence:{cursorShape:"cursor",cursor:{xPos:0,yPos:0},pointerDown:!1}})})();const i=()=>{gi.update((a,u)=>{u.set({pointerDown:!1})})},s=()=>{gi.update((a,u)=>{u.set({pointerDown:!0})})},o=a=>{gi.update((u,c)=>{c.set({cursor:{xPos:a.clientX,yPos:a.clientY}})})};return window.addEventListener("mousedown",s),window.addEventListener("mouseup",i),window.addEventListener("mousemove",o),()=>{window.removeEventListener("mousedown",s),window.removeEventListener("mouseup",i),window.removeEventListener("mousemove",o)}},[]),de.jsxs("div",{className:"general-container",children:[n.map(({clientID:r,presence:{cursorShape:i,cursor:s,pointerDown:o}})=>s?de.jsx(Gk,{selectedCursorShape:i,x:s.xPos,y:s.yPos,pointerDown:o},r):null),de.jsx(Yk,{handleCursorShapeSelect:t,clientsLength:n.length})]})};qu.createRoot(document.getElementById("root")).render(de.jsx(Qk,{}));
