var lv=Object.defineProperty;var uv=(n,e,t)=>e in n?lv(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var l=(n,e,t)=>uv(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();var $g={exports:{}},$l={},Jg={exports:{}},_={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uo=Symbol.for("react.element"),cv=Symbol.for("react.portal"),fv=Symbol.for("react.fragment"),dv=Symbol.for("react.strict_mode"),hv=Symbol.for("react.profiler"),gv=Symbol.for("react.provider"),mv=Symbol.for("react.context"),pv=Symbol.for("react.forward_ref"),yv=Symbol.for("react.suspense"),vv=Symbol.for("react.memo"),wv=Symbol.for("react.lazy"),Od=Symbol.iterator;function Sv(n){return n===null||typeof n!="object"?null:(n=Od&&n[Od]||n["@@iterator"],typeof n=="function"?n:null)}var Ug={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},jg=Object.assign,Vg={};function Os(n,e,t){this.props=n,this.context=e,this.refs=Vg,this.updater=t||Ug}Os.prototype.isReactComponent={};Os.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};Os.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function qg(){}qg.prototype=Os.prototype;function yf(n,e,t){this.props=n,this.context=e,this.refs=Vg,this.updater=t||Ug}var vf=yf.prototype=new qg;vf.constructor=yf;jg(vf,Os.prototype);vf.isPureReactComponent=!0;var Ld=Array.isArray,Kg=Object.prototype.hasOwnProperty,wf={current:null},Wg={key:!0,ref:!0,__self:!0,__source:!0};function Hg(n,e,t){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Kg.call(e,r)&&!Wg.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=t;else if(1<a){for(var u=Array(a),c=0;c<a;c++)u[c]=arguments[c+2];i.children=u}if(n&&n.defaultProps)for(r in a=n.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Uo,type:n,key:s,ref:o,props:i,_owner:wf.current}}function kv(n,e){return{$$typeof:Uo,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function Sf(n){return typeof n=="object"&&n!==null&&n.$$typeof===Uo}function Tv(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var bd=/\/+/g;function fu(n,e){return typeof n=="object"&&n!==null&&n.key!=null?Tv(""+n.key):e.toString(36)}function Ta(n,e,t,r,i){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case Uo:case cv:o=!0}}if(o)return o=n,i=i(o),n=r===""?"."+fu(o,0):r,Ld(i)?(t="",n!=null&&(t=n.replace(bd,"$&/")+"/"),Ta(i,e,t,"",function(c){return c})):i!=null&&(Sf(i)&&(i=kv(i,t+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(bd,"$&/")+"/")+n)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Ld(n))for(var a=0;a<n.length;a++){s=n[a];var u=r+fu(s,a);o+=Ta(s,e,t,u,i)}else if(u=Sv(n),typeof u=="function")for(n=u.call(n),a=0;!(s=n.next()).done;)s=s.value,u=r+fu(s,a++),o+=Ta(s,e,t,u,i);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Qo(n,e,t){if(n==null)return n;var r=[],i=0;return Ta(n,r,"","",function(s){return e.call(t,s,i++)}),r}function Iv(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var je={current:null},Ia={transition:null},xv={ReactCurrentDispatcher:je,ReactCurrentBatchConfig:Ia,ReactCurrentOwner:wf};_.Children={map:Qo,forEach:function(n,e,t){Qo(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return Qo(n,function(){e++}),e},toArray:function(n){return Qo(n,function(e){return e})||[]},only:function(n){if(!Sf(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};_.Component=Os;_.Fragment=fv;_.Profiler=hv;_.PureComponent=yf;_.StrictMode=dv;_.Suspense=yv;_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xv;_.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=jg({},n.props),i=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=wf.current),e.key!==void 0&&(i=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(u in e)Kg.call(e,u)&&!Wg.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&a!==void 0?a[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=t;else if(1<u){a=Array(u);for(var c=0;c<u;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Uo,type:n.type,key:i,ref:s,props:r,_owner:o}};_.createContext=function(n){return n={$$typeof:mv,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:gv,_context:n},n.Consumer=n};_.createElement=Hg;_.createFactory=function(n){var e=Hg.bind(null,n);return e.type=n,e};_.createRef=function(){return{current:null}};_.forwardRef=function(n){return{$$typeof:pv,render:n}};_.isValidElement=Sf;_.lazy=function(n){return{$$typeof:wv,_payload:{_status:-1,_result:n},_init:Iv}};_.memo=function(n,e){return{$$typeof:vv,type:n,compare:e===void 0?null:e}};_.startTransition=function(n){var e=Ia.transition;Ia.transition={};try{n()}finally{Ia.transition=e}};_.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};_.useCallback=function(n,e){return je.current.useCallback(n,e)};_.useContext=function(n){return je.current.useContext(n)};_.useDebugValue=function(){};_.useDeferredValue=function(n){return je.current.useDeferredValue(n)};_.useEffect=function(n,e){return je.current.useEffect(n,e)};_.useId=function(){return je.current.useId()};_.useImperativeHandle=function(n,e,t){return je.current.useImperativeHandle(n,e,t)};_.useInsertionEffect=function(n,e){return je.current.useInsertionEffect(n,e)};_.useLayoutEffect=function(n,e){return je.current.useLayoutEffect(n,e)};_.useMemo=function(n,e){return je.current.useMemo(n,e)};_.useReducer=function(n,e,t){return je.current.useReducer(n,e,t)};_.useRef=function(n){return je.current.useRef(n)};_.useState=function(n){return je.current.useState(n)};_.useSyncExternalStore=function(n,e,t){return je.current.useSyncExternalStore(n,e,t)};_.useTransition=function(){return je.current.useTransition()};_.version="18.2.0";Jg.exports=_;var j=Jg.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Av=j,Ev=Symbol.for("react.element"),Cv=Symbol.for("react.fragment"),Nv=Object.prototype.hasOwnProperty,Pv=Av.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Dv={key:!0,ref:!0,__self:!0,__source:!0};function _g(n,e,t){var r,i={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Nv.call(e,r)&&!Dv.hasOwnProperty(r)&&(i[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Ev,type:n,key:s,ref:o,props:i,_owner:Pv.current}}$l.Fragment=Cv;$l.jsx=_g;$l.jsxs=_g;$g.exports=$l;var B=$g.exports,Ku={},Gg={exports:{}},lt={},Yg={exports:{}},Xg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(L,q){var K=L.length;L.push(q);e:for(;0<K;){var ge=K-1>>>1,Te=L[ge];if(0<i(Te,q))L[ge]=q,L[K]=Te,K=ge;else break e}}function t(L){return L.length===0?null:L[0]}function r(L){if(L.length===0)return null;var q=L[0],K=L.pop();if(K!==q){L[0]=K;e:for(var ge=0,Te=L.length,Yo=Te>>>1;ge<Yo;){var yi=2*(ge+1)-1,cu=L[yi],vi=yi+1,Xo=L[vi];if(0>i(cu,K))vi<Te&&0>i(Xo,cu)?(L[ge]=Xo,L[vi]=K,ge=vi):(L[ge]=cu,L[yi]=K,ge=yi);else if(vi<Te&&0>i(Xo,K))L[ge]=Xo,L[vi]=K,ge=vi;else break e}}return q}function i(L,q){var K=L.sortIndex-q.sortIndex;return K!==0?K:L.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var u=[],c=[],d=1,h=null,g=3,p=!1,v=!1,w=!1,A=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(L){for(var q=t(c);q!==null;){if(q.callback===null)r(c);else if(q.startTime<=L)r(c),q.sortIndex=q.expirationTime,e(u,q);else break;q=t(c)}}function I(L){if(w=!1,S(L),!v)if(t(u)!==null)v=!0,Bs(N);else{var q=t(c);q!==null&&zs(I,q.startTime-L)}}function N(L,q){v=!1,w&&(w=!1,y(R),R=-1),p=!0;var K=g;try{for(S(q),h=t(u);h!==null&&(!(h.expirationTime>q)||L&&!ve());){var ge=h.callback;if(typeof ge=="function"){h.callback=null,g=h.priorityLevel;var Te=ge(h.expirationTime<=q);q=n.unstable_now(),typeof Te=="function"?h.callback=Te:h===t(u)&&r(u),S(q)}else r(u);h=t(u)}if(h!==null)var Yo=!0;else{var yi=t(c);yi!==null&&zs(I,yi.startTime-q),Yo=!1}return Yo}finally{h=null,g=K,p=!1}}var x=!1,C=null,R=-1,z=5,$=-1;function ve(){return!(n.unstable_now()-$<z)}function Wt(){if(C!==null){var L=n.unstable_now();$=L;var q=!0;try{q=C(!0,L)}finally{q?ct():(x=!1,C=null)}}else x=!1}var ct;if(typeof m=="function")ct=function(){m(Wt)};else if(typeof MessageChannel<"u"){var pi=new MessageChannel,uu=pi.port2;pi.port1.onmessage=Wt,ct=function(){uu.postMessage(null)}}else ct=function(){A(Wt,0)};function Bs(L){C=L,x||(x=!0,ct())}function zs(L,q){R=A(function(){L(n.unstable_now())},q)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(L){L.callback=null},n.unstable_continueExecution=function(){v||p||(v=!0,Bs(N))},n.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<L?Math.floor(1e3/L):5},n.unstable_getCurrentPriorityLevel=function(){return g},n.unstable_getFirstCallbackNode=function(){return t(u)},n.unstable_next=function(L){switch(g){case 1:case 2:case 3:var q=3;break;default:q=g}var K=g;g=q;try{return L()}finally{g=K}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(L,q){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var K=g;g=L;try{return q()}finally{g=K}},n.unstable_scheduleCallback=function(L,q,K){var ge=n.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?ge+K:ge):K=ge,L){case 1:var Te=-1;break;case 2:Te=250;break;case 5:Te=1073741823;break;case 4:Te=1e4;break;default:Te=5e3}return Te=K+Te,L={id:d++,callback:q,priorityLevel:L,startTime:K,expirationTime:Te,sortIndex:-1},K>ge?(L.sortIndex=K,e(c,L),t(u)===null&&L===t(c)&&(w?(y(R),R=-1):w=!0,zs(I,K-ge))):(L.sortIndex=Te,e(u,L),v||p||(v=!0,Bs(N))),L},n.unstable_shouldYield=ve,n.unstable_wrapCallback=function(L){var q=g;return function(){var K=g;g=q;try{return L.apply(this,arguments)}finally{g=K}}}})(Xg);Yg.exports=Xg;var Rv=Yg.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qg=j,st=Rv;function D(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Zg=new Set,go={};function $i(n,e){ms(n,e),ms(n+"Capture",e)}function ms(n,e){for(go[n]=e,n=0;n<e.length;n++)Zg.add(e[n])}var br=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Wu=Object.prototype.hasOwnProperty,Ov=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Bd={},zd={};function Lv(n){return Wu.call(zd,n)?!0:Wu.call(Bd,n)?!1:Ov.test(n)?zd[n]=!0:(Bd[n]=!0,!1)}function bv(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function Bv(n,e,t,r){if(e===null||typeof e>"u"||bv(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ve(n,e,t,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Re={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Re[n]=new Ve(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];Re[e]=new Ve(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){Re[n]=new Ve(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Re[n]=new Ve(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Re[n]=new Ve(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){Re[n]=new Ve(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){Re[n]=new Ve(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){Re[n]=new Ve(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){Re[n]=new Ve(n,5,!1,n.toLowerCase(),null,!1,!1)});var kf=/[\-:]([a-z])/g;function Tf(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(kf,Tf);Re[e]=new Ve(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(kf,Tf);Re[e]=new Ve(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(kf,Tf);Re[e]=new Ve(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){Re[n]=new Ve(n,1,!1,n.toLowerCase(),null,!1,!1)});Re.xlinkHref=new Ve("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){Re[n]=new Ve(n,1,!1,n.toLowerCase(),null,!0,!0)});function If(n,e,t,r){var i=Re.hasOwnProperty(e)?Re[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Bv(e,t,i,r)&&(t=null),r||i===null?Lv(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):i.mustUseProperty?n[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,r=i.attributeNamespace,t===null?n.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var Jr=Qg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Zo=Symbol.for("react.element"),Wi=Symbol.for("react.portal"),Hi=Symbol.for("react.fragment"),xf=Symbol.for("react.strict_mode"),Hu=Symbol.for("react.profiler"),em=Symbol.for("react.provider"),tm=Symbol.for("react.context"),Af=Symbol.for("react.forward_ref"),_u=Symbol.for("react.suspense"),Gu=Symbol.for("react.suspense_list"),Ef=Symbol.for("react.memo"),Wr=Symbol.for("react.lazy"),nm=Symbol.for("react.offscreen"),Md=Symbol.iterator;function Ms(n){return n===null||typeof n!="object"?null:(n=Md&&n[Md]||n["@@iterator"],typeof n=="function"?n:null)}var ce=Object.assign,du;function _s(n){if(du===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);du=e&&e[1]||""}return`
`+du+n}var hu=!1;function gu(n,e){if(!n||hu)return"";hu=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){r=c}n.call(e.prototype)}else{try{throw Error()}catch(c){r=c}n()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var u=`
`+i[o].replace(" at new "," at ");return n.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",n.displayName)),u}while(1<=o&&0<=a);break}}}finally{hu=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?_s(n):""}function zv(n){switch(n.tag){case 5:return _s(n.type);case 16:return _s("Lazy");case 13:return _s("Suspense");case 19:return _s("SuspenseList");case 0:case 2:case 15:return n=gu(n.type,!1),n;case 11:return n=gu(n.type.render,!1),n;case 1:return n=gu(n.type,!0),n;default:return""}}function Yu(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Hi:return"Fragment";case Wi:return"Portal";case Hu:return"Profiler";case xf:return"StrictMode";case _u:return"Suspense";case Gu:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case tm:return(n.displayName||"Context")+".Consumer";case em:return(n._context.displayName||"Context")+".Provider";case Af:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Ef:return e=n.displayName||null,e!==null?e:Yu(n.type)||"Memo";case Wr:e=n._payload,n=n._init;try{return Yu(n(e))}catch{}}return null}function Mv(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Yu(e);case 8:return e===xf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ci(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function rm(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Fv(n){var e=rm(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function ea(n){n._valueTracker||(n._valueTracker=Fv(n))}function im(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=rm(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function ja(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Xu(n,e){var t=e.checked;return ce({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function Fd(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=ci(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function sm(n,e){e=e.checked,e!=null&&If(n,"checked",e,!1)}function Qu(n,e){sm(n,e);var t=ci(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?Zu(n,e.type,t):e.hasOwnProperty("defaultValue")&&Zu(n,e.type,ci(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function $d(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function Zu(n,e,t){(e!=="number"||ja(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var Gs=Array.isArray;function os(n,e,t,r){if(n=n.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<n.length;t++)i=e.hasOwnProperty("$"+n[t].value),n[t].selected!==i&&(n[t].selected=i),i&&r&&(n[t].defaultSelected=!0)}else{for(t=""+ci(t),e=null,i=0;i<n.length;i++){if(n[i].value===t){n[i].selected=!0,r&&(n[i].defaultSelected=!0);return}e!==null||n[i].disabled||(e=n[i])}e!==null&&(e.selected=!0)}}function ec(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(D(91));return ce({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Jd(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(D(92));if(Gs(t)){if(1<t.length)throw Error(D(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:ci(t)}}function om(n,e){var t=ci(e.value),r=ci(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function Ud(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function am(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function tc(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?am(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var ta,lm=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,i){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,i)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(ta=ta||document.createElement("div"),ta.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ta.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function mo(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var Zs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$v=["Webkit","ms","Moz","O"];Object.keys(Zs).forEach(function(n){$v.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),Zs[e]=Zs[n]})});function um(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Zs.hasOwnProperty(n)&&Zs[n]?(""+e).trim():e+"px"}function cm(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,i=um(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,i):n[t]=i}}var Jv=ce({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function nc(n,e){if(e){if(Jv[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(D(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(D(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(D(61))}if(e.style!=null&&typeof e.style!="object")throw Error(D(62))}}function rc(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ic=null;function Cf(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var sc=null,as=null,ls=null;function jd(n){if(n=qo(n)){if(typeof sc!="function")throw Error(D(280));var e=n.stateNode;e&&(e=ql(e),sc(n.stateNode,n.type,e))}}function fm(n){as?ls?ls.push(n):ls=[n]:as=n}function dm(){if(as){var n=as,e=ls;if(ls=as=null,jd(n),e)for(n=0;n<e.length;n++)jd(e[n])}}function hm(n,e){return n(e)}function gm(){}var mu=!1;function mm(n,e,t){if(mu)return n(e,t);mu=!0;try{return hm(n,e,t)}finally{mu=!1,(as!==null||ls!==null)&&(gm(),dm())}}function po(n,e){var t=n.stateNode;if(t===null)return null;var r=ql(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(D(231,e,typeof t));return t}var oc=!1;if(br)try{var Fs={};Object.defineProperty(Fs,"passive",{get:function(){oc=!0}}),window.addEventListener("test",Fs,Fs),window.removeEventListener("test",Fs,Fs)}catch{oc=!1}function Uv(n,e,t,r,i,s,o,a,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(d){this.onError(d)}}var eo=!1,Va=null,qa=!1,ac=null,jv={onError:function(n){eo=!0,Va=n}};function Vv(n,e,t,r,i,s,o,a,u){eo=!1,Va=null,Uv.apply(jv,arguments)}function qv(n,e,t,r,i,s,o,a,u){if(Vv.apply(this,arguments),eo){if(eo){var c=Va;eo=!1,Va=null}else throw Error(D(198));qa||(qa=!0,ac=c)}}function Ji(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function pm(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function Vd(n){if(Ji(n)!==n)throw Error(D(188))}function Kv(n){var e=n.alternate;if(!e){if(e=Ji(n),e===null)throw Error(D(188));return e!==n?null:n}for(var t=n,r=e;;){var i=t.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){t=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===t)return Vd(i),n;if(s===r)return Vd(i),e;s=s.sibling}throw Error(D(188))}if(t.return!==r.return)t=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===t){o=!0,t=i,r=s;break}if(a===r){o=!0,r=i,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,r=i;break}if(a===r){o=!0,r=s,t=i;break}a=a.sibling}if(!o)throw Error(D(189))}}if(t.alternate!==r)throw Error(D(190))}if(t.tag!==3)throw Error(D(188));return t.stateNode.current===t?n:e}function ym(n){return n=Kv(n),n!==null?vm(n):null}function vm(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=vm(n);if(e!==null)return e;n=n.sibling}return null}var wm=st.unstable_scheduleCallback,qd=st.unstable_cancelCallback,Wv=st.unstable_shouldYield,Hv=st.unstable_requestPaint,pe=st.unstable_now,_v=st.unstable_getCurrentPriorityLevel,Nf=st.unstable_ImmediatePriority,Sm=st.unstable_UserBlockingPriority,Ka=st.unstable_NormalPriority,Gv=st.unstable_LowPriority,km=st.unstable_IdlePriority,Jl=null,ln=null;function Yv(n){if(ln&&typeof ln.onCommitFiberRoot=="function")try{ln.onCommitFiberRoot(Jl,n,void 0,(n.current.flags&128)===128)}catch{}}var jt=Math.clz32?Math.clz32:Zv,Xv=Math.log,Qv=Math.LN2;function Zv(n){return n>>>=0,n===0?32:31-(Xv(n)/Qv|0)|0}var na=64,ra=4194304;function Ys(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Wa(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,i=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~i;a!==0?r=Ys(a):(s&=o,s!==0&&(r=Ys(s)))}else o=t&~i,o!==0?r=Ys(o):s!==0&&(r=Ys(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-jt(e),i=1<<t,r|=n[t],e&=~i;return r}function e0(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function t0(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,i=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-jt(s),a=1<<o,u=i[o];u===-1?(!(a&t)||a&r)&&(i[o]=e0(a,e)):u<=e&&(n.expiredLanes|=a),s&=~a}}function lc(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Tm(){var n=na;return na<<=1,!(na&4194240)&&(na=64),n}function pu(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function jo(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-jt(e),n[e]=t}function n0(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var i=31-jt(t),s=1<<i;e[i]=0,r[i]=-1,n[i]=-1,t&=~s}}function Pf(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-jt(t),i=1<<r;i&e|n[r]&e&&(n[r]|=e),t&=~i}}var Z=0;function Im(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var xm,Df,Am,Em,Cm,uc=!1,ia=[],Zr=null,ei=null,ti=null,yo=new Map,vo=new Map,_r=[],r0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Kd(n,e){switch(n){case"focusin":case"focusout":Zr=null;break;case"dragenter":case"dragleave":ei=null;break;case"mouseover":case"mouseout":ti=null;break;case"pointerover":case"pointerout":yo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":vo.delete(e.pointerId)}}function $s(n,e,t,r,i,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=qo(e),e!==null&&Df(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),n)}function i0(n,e,t,r,i){switch(e){case"focusin":return Zr=$s(Zr,n,e,t,r,i),!0;case"dragenter":return ei=$s(ei,n,e,t,r,i),!0;case"mouseover":return ti=$s(ti,n,e,t,r,i),!0;case"pointerover":var s=i.pointerId;return yo.set(s,$s(yo.get(s)||null,n,e,t,r,i)),!0;case"gotpointercapture":return s=i.pointerId,vo.set(s,$s(vo.get(s)||null,n,e,t,r,i)),!0}return!1}function Nm(n){var e=Ii(n.target);if(e!==null){var t=Ji(e);if(t!==null){if(e=t.tag,e===13){if(e=pm(t),e!==null){n.blockedOn=e,Cm(n.priority,function(){Am(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function xa(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=cc(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);ic=r,t.target.dispatchEvent(r),ic=null}else return e=qo(t),e!==null&&Df(e),n.blockedOn=t,!1;e.shift()}return!0}function Wd(n,e,t){xa(n)&&t.delete(e)}function s0(){uc=!1,Zr!==null&&xa(Zr)&&(Zr=null),ei!==null&&xa(ei)&&(ei=null),ti!==null&&xa(ti)&&(ti=null),yo.forEach(Wd),vo.forEach(Wd)}function Js(n,e){n.blockedOn===e&&(n.blockedOn=null,uc||(uc=!0,st.unstable_scheduleCallback(st.unstable_NormalPriority,s0)))}function wo(n){function e(i){return Js(i,n)}if(0<ia.length){Js(ia[0],n);for(var t=1;t<ia.length;t++){var r=ia[t];r.blockedOn===n&&(r.blockedOn=null)}}for(Zr!==null&&Js(Zr,n),ei!==null&&Js(ei,n),ti!==null&&Js(ti,n),yo.forEach(e),vo.forEach(e),t=0;t<_r.length;t++)r=_r[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<_r.length&&(t=_r[0],t.blockedOn===null);)Nm(t),t.blockedOn===null&&_r.shift()}var us=Jr.ReactCurrentBatchConfig,Ha=!0;function o0(n,e,t,r){var i=Z,s=us.transition;us.transition=null;try{Z=1,Rf(n,e,t,r)}finally{Z=i,us.transition=s}}function a0(n,e,t,r){var i=Z,s=us.transition;us.transition=null;try{Z=4,Rf(n,e,t,r)}finally{Z=i,us.transition=s}}function Rf(n,e,t,r){if(Ha){var i=cc(n,e,t,r);if(i===null)Eu(n,e,r,_a,t),Kd(n,r);else if(i0(i,n,e,t,r))r.stopPropagation();else if(Kd(n,r),e&4&&-1<r0.indexOf(n)){for(;i!==null;){var s=qo(i);if(s!==null&&xm(s),s=cc(n,e,t,r),s===null&&Eu(n,e,r,_a,t),s===i)break;i=s}i!==null&&r.stopPropagation()}else Eu(n,e,r,null,t)}}var _a=null;function cc(n,e,t,r){if(_a=null,n=Cf(r),n=Ii(n),n!==null)if(e=Ji(n),e===null)n=null;else if(t=e.tag,t===13){if(n=pm(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return _a=n,null}function Pm(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(_v()){case Nf:return 1;case Sm:return 4;case Ka:case Gv:return 16;case km:return 536870912;default:return 16}default:return 16}}var Yr=null,Of=null,Aa=null;function Dm(){if(Aa)return Aa;var n,e=Of,t=e.length,r,i="value"in Yr?Yr.value:Yr.textContent,s=i.length;for(n=0;n<t&&e[n]===i[n];n++);var o=t-n;for(r=1;r<=o&&e[t-r]===i[s-r];r++);return Aa=i.slice(n,1<r?1-r:void 0)}function Ea(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function sa(){return!0}function Hd(){return!1}function ut(n){function e(t,r,i,s,o){this._reactName=t,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?sa:Hd,this.isPropagationStopped=Hd,this}return ce(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=sa)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=sa)},persist:function(){},isPersistent:sa}),e}var Ls={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Lf=ut(Ls),Vo=ce({},Ls,{view:0,detail:0}),l0=ut(Vo),yu,vu,Us,Ul=ce({},Vo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:bf,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Us&&(Us&&n.type==="mousemove"?(yu=n.screenX-Us.screenX,vu=n.screenY-Us.screenY):vu=yu=0,Us=n),yu)},movementY:function(n){return"movementY"in n?n.movementY:vu}}),_d=ut(Ul),u0=ce({},Ul,{dataTransfer:0}),c0=ut(u0),f0=ce({},Vo,{relatedTarget:0}),wu=ut(f0),d0=ce({},Ls,{animationName:0,elapsedTime:0,pseudoElement:0}),h0=ut(d0),g0=ce({},Ls,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),m0=ut(g0),p0=ce({},Ls,{data:0}),Gd=ut(p0),y0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},v0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},w0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function S0(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=w0[n])?!!e[n]:!1}function bf(){return S0}var k0=ce({},Vo,{key:function(n){if(n.key){var e=y0[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=Ea(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?v0[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:bf,charCode:function(n){return n.type==="keypress"?Ea(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Ea(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),T0=ut(k0),I0=ce({},Ul,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Yd=ut(I0),x0=ce({},Vo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:bf}),A0=ut(x0),E0=ce({},Ls,{propertyName:0,elapsedTime:0,pseudoElement:0}),C0=ut(E0),N0=ce({},Ul,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),P0=ut(N0),D0=[9,13,27,32],Bf=br&&"CompositionEvent"in window,to=null;br&&"documentMode"in document&&(to=document.documentMode);var R0=br&&"TextEvent"in window&&!to,Rm=br&&(!Bf||to&&8<to&&11>=to),Xd=" ",Qd=!1;function Om(n,e){switch(n){case"keyup":return D0.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Lm(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var _i=!1;function O0(n,e){switch(n){case"compositionend":return Lm(e);case"keypress":return e.which!==32?null:(Qd=!0,Xd);case"textInput":return n=e.data,n===Xd&&Qd?null:n;default:return null}}function L0(n,e){if(_i)return n==="compositionend"||!Bf&&Om(n,e)?(n=Dm(),Aa=Of=Yr=null,_i=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Rm&&e.locale!=="ko"?null:e.data;default:return null}}var b0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Zd(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!b0[n.type]:e==="textarea"}function bm(n,e,t,r){fm(r),e=Ga(e,"onChange"),0<e.length&&(t=new Lf("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var no=null,So=null;function B0(n){Km(n,0)}function jl(n){var e=Xi(n);if(im(e))return n}function z0(n,e){if(n==="change")return e}var Bm=!1;if(br){var Su;if(br){var ku="oninput"in document;if(!ku){var eh=document.createElement("div");eh.setAttribute("oninput","return;"),ku=typeof eh.oninput=="function"}Su=ku}else Su=!1;Bm=Su&&(!document.documentMode||9<document.documentMode)}function th(){no&&(no.detachEvent("onpropertychange",zm),So=no=null)}function zm(n){if(n.propertyName==="value"&&jl(So)){var e=[];bm(e,So,n,Cf(n)),mm(B0,e)}}function M0(n,e,t){n==="focusin"?(th(),no=e,So=t,no.attachEvent("onpropertychange",zm)):n==="focusout"&&th()}function F0(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return jl(So)}function $0(n,e){if(n==="click")return jl(e)}function J0(n,e){if(n==="input"||n==="change")return jl(e)}function U0(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Kt=typeof Object.is=="function"?Object.is:U0;function ko(n,e){if(Kt(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var i=t[r];if(!Wu.call(e,i)||!Kt(n[i],e[i]))return!1}return!0}function nh(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function rh(n,e){var t=nh(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=nh(t)}}function Mm(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?Mm(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function Fm(){for(var n=window,e=ja();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=ja(n.document)}return e}function zf(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function j0(n){var e=Fm(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&Mm(t.ownerDocument.documentElement,t)){if(r!==null&&zf(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var i=t.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!n.extend&&s>r&&(i=r,r=s,s=i),i=rh(t,s);var o=rh(t,r);i&&o&&(n.rangeCount!==1||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),n.removeAllRanges(),s>r?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var V0=br&&"documentMode"in document&&11>=document.documentMode,Gi=null,fc=null,ro=null,dc=!1;function ih(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;dc||Gi==null||Gi!==ja(r)||(r=Gi,"selectionStart"in r&&zf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ro&&ko(ro,r)||(ro=r,r=Ga(fc,"onSelect"),0<r.length&&(e=new Lf("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=Gi)))}function oa(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var Yi={animationend:oa("Animation","AnimationEnd"),animationiteration:oa("Animation","AnimationIteration"),animationstart:oa("Animation","AnimationStart"),transitionend:oa("Transition","TransitionEnd")},Tu={},$m={};br&&($m=document.createElement("div").style,"AnimationEvent"in window||(delete Yi.animationend.animation,delete Yi.animationiteration.animation,delete Yi.animationstart.animation),"TransitionEvent"in window||delete Yi.transitionend.transition);function Vl(n){if(Tu[n])return Tu[n];if(!Yi[n])return n;var e=Yi[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in $m)return Tu[n]=e[t];return n}var Jm=Vl("animationend"),Um=Vl("animationiteration"),jm=Vl("animationstart"),Vm=Vl("transitionend"),qm=new Map,sh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function hi(n,e){qm.set(n,e),$i(e,[n])}for(var Iu=0;Iu<sh.length;Iu++){var xu=sh[Iu],q0=xu.toLowerCase(),K0=xu[0].toUpperCase()+xu.slice(1);hi(q0,"on"+K0)}hi(Jm,"onAnimationEnd");hi(Um,"onAnimationIteration");hi(jm,"onAnimationStart");hi("dblclick","onDoubleClick");hi("focusin","onFocus");hi("focusout","onBlur");hi(Vm,"onTransitionEnd");ms("onMouseEnter",["mouseout","mouseover"]);ms("onMouseLeave",["mouseout","mouseover"]);ms("onPointerEnter",["pointerout","pointerover"]);ms("onPointerLeave",["pointerout","pointerover"]);$i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));$i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));$i("onBeforeInput",["compositionend","keypress","textInput","paste"]);$i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));$i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));$i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),W0=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xs));function oh(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,qv(r,e,void 0,n),n.currentTarget=null}function Km(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,c=a.currentTarget;if(a=a.listener,u!==s&&i.isPropagationStopped())break e;oh(i,a,c),s=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,c=a.currentTarget,a=a.listener,u!==s&&i.isPropagationStopped())break e;oh(i,a,c),s=u}}}if(qa)throw n=ac,qa=!1,ac=null,n}function re(n,e){var t=e[yc];t===void 0&&(t=e[yc]=new Set);var r=n+"__bubble";t.has(r)||(Wm(e,n,2,!1),t.add(r))}function Au(n,e,t){var r=0;e&&(r|=4),Wm(t,n,r,e)}var aa="_reactListening"+Math.random().toString(36).slice(2);function To(n){if(!n[aa]){n[aa]=!0,Zg.forEach(function(t){t!=="selectionchange"&&(W0.has(t)||Au(t,!1,n),Au(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[aa]||(e[aa]=!0,Au("selectionchange",!1,e))}}function Wm(n,e,t,r){switch(Pm(e)){case 1:var i=o0;break;case 4:i=a0;break;default:i=Rf}t=i.bind(null,e,t,n),i=void 0,!oc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?n.addEventListener(e,t,{capture:!0,passive:i}):n.addEventListener(e,t,!0):i!==void 0?n.addEventListener(e,t,{passive:i}):n.addEventListener(e,t,!1)}function Eu(n,e,t,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Ii(a),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}a=a.parentNode}}r=r.return}mm(function(){var c=s,d=Cf(t),h=[];e:{var g=qm.get(n);if(g!==void 0){var p=Lf,v=n;switch(n){case"keypress":if(Ea(t)===0)break e;case"keydown":case"keyup":p=T0;break;case"focusin":v="focus",p=wu;break;case"focusout":v="blur",p=wu;break;case"beforeblur":case"afterblur":p=wu;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=_d;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=c0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=A0;break;case Jm:case Um:case jm:p=h0;break;case Vm:p=C0;break;case"scroll":p=l0;break;case"wheel":p=P0;break;case"copy":case"cut":case"paste":p=m0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Yd}var w=(e&4)!==0,A=!w&&n==="scroll",y=w?g!==null?g+"Capture":null:g;w=[];for(var m=c,S;m!==null;){S=m;var I=S.stateNode;if(S.tag===5&&I!==null&&(S=I,y!==null&&(I=po(m,y),I!=null&&w.push(Io(m,I,S)))),A)break;m=m.return}0<w.length&&(g=new p(g,v,null,t,d),h.push({event:g,listeners:w}))}}if(!(e&7)){e:{if(g=n==="mouseover"||n==="pointerover",p=n==="mouseout"||n==="pointerout",g&&t!==ic&&(v=t.relatedTarget||t.fromElement)&&(Ii(v)||v[Br]))break e;if((p||g)&&(g=d.window===d?d:(g=d.ownerDocument)?g.defaultView||g.parentWindow:window,p?(v=t.relatedTarget||t.toElement,p=c,v=v?Ii(v):null,v!==null&&(A=Ji(v),v!==A||v.tag!==5&&v.tag!==6)&&(v=null)):(p=null,v=c),p!==v)){if(w=_d,I="onMouseLeave",y="onMouseEnter",m="mouse",(n==="pointerout"||n==="pointerover")&&(w=Yd,I="onPointerLeave",y="onPointerEnter",m="pointer"),A=p==null?g:Xi(p),S=v==null?g:Xi(v),g=new w(I,m+"leave",p,t,d),g.target=A,g.relatedTarget=S,I=null,Ii(d)===c&&(w=new w(y,m+"enter",v,t,d),w.target=S,w.relatedTarget=A,I=w),A=I,p&&v)t:{for(w=p,y=v,m=0,S=w;S;S=ji(S))m++;for(S=0,I=y;I;I=ji(I))S++;for(;0<m-S;)w=ji(w),m--;for(;0<S-m;)y=ji(y),S--;for(;m--;){if(w===y||y!==null&&w===y.alternate)break t;w=ji(w),y=ji(y)}w=null}else w=null;p!==null&&ah(h,g,p,w,!1),v!==null&&A!==null&&ah(h,A,v,w,!0)}}e:{if(g=c?Xi(c):window,p=g.nodeName&&g.nodeName.toLowerCase(),p==="select"||p==="input"&&g.type==="file")var N=z0;else if(Zd(g))if(Bm)N=J0;else{N=F0;var x=M0}else(p=g.nodeName)&&p.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(N=$0);if(N&&(N=N(n,c))){bm(h,N,t,d);break e}x&&x(n,g,c),n==="focusout"&&(x=g._wrapperState)&&x.controlled&&g.type==="number"&&Zu(g,"number",g.value)}switch(x=c?Xi(c):window,n){case"focusin":(Zd(x)||x.contentEditable==="true")&&(Gi=x,fc=c,ro=null);break;case"focusout":ro=fc=Gi=null;break;case"mousedown":dc=!0;break;case"contextmenu":case"mouseup":case"dragend":dc=!1,ih(h,t,d);break;case"selectionchange":if(V0)break;case"keydown":case"keyup":ih(h,t,d)}var C;if(Bf)e:{switch(n){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else _i?Om(n,t)&&(R="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(R="onCompositionStart");R&&(Rm&&t.locale!=="ko"&&(_i||R!=="onCompositionStart"?R==="onCompositionEnd"&&_i&&(C=Dm()):(Yr=d,Of="value"in Yr?Yr.value:Yr.textContent,_i=!0)),x=Ga(c,R),0<x.length&&(R=new Gd(R,n,null,t,d),h.push({event:R,listeners:x}),C?R.data=C:(C=Lm(t),C!==null&&(R.data=C)))),(C=R0?O0(n,t):L0(n,t))&&(c=Ga(c,"onBeforeInput"),0<c.length&&(d=new Gd("onBeforeInput","beforeinput",null,t,d),h.push({event:d,listeners:c}),d.data=C))}Km(h,e)})}function Io(n,e,t){return{instance:n,listener:e,currentTarget:t}}function Ga(n,e){for(var t=e+"Capture",r=[];n!==null;){var i=n,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=po(n,t),s!=null&&r.unshift(Io(n,s,i)),s=po(n,e),s!=null&&r.push(Io(n,s,i))),n=n.return}return r}function ji(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function ah(n,e,t,r,i){for(var s=e._reactName,o=[];t!==null&&t!==r;){var a=t,u=a.alternate,c=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&c!==null&&(a=c,i?(u=po(t,s),u!=null&&o.unshift(Io(t,u,a))):i||(u=po(t,s),u!=null&&o.push(Io(t,u,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var H0=/\r\n?/g,_0=/\u0000|\uFFFD/g;function lh(n){return(typeof n=="string"?n:""+n).replace(H0,`
`).replace(_0,"")}function la(n,e,t){if(e=lh(e),lh(n)!==e&&t)throw Error(D(425))}function Ya(){}var hc=null,gc=null;function mc(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var pc=typeof setTimeout=="function"?setTimeout:void 0,G0=typeof clearTimeout=="function"?clearTimeout:void 0,uh=typeof Promise=="function"?Promise:void 0,Y0=typeof queueMicrotask=="function"?queueMicrotask:typeof uh<"u"?function(n){return uh.resolve(null).then(n).catch(X0)}:pc;function X0(n){setTimeout(function(){throw n})}function Cu(n,e){var t=e,r=0;do{var i=t.nextSibling;if(n.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(r===0){n.removeChild(i),wo(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=i}while(t);wo(e)}function ni(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function ch(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var bs=Math.random().toString(36).slice(2),Xt="__reactFiber$"+bs,xo="__reactProps$"+bs,Br="__reactContainer$"+bs,yc="__reactEvents$"+bs,Q0="__reactListeners$"+bs,Z0="__reactHandles$"+bs;function Ii(n){var e=n[Xt];if(e)return e;for(var t=n.parentNode;t;){if(e=t[Br]||t[Xt]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=ch(n);n!==null;){if(t=n[Xt])return t;n=ch(n)}return e}n=t,t=n.parentNode}return null}function qo(n){return n=n[Xt]||n[Br],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Xi(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(D(33))}function ql(n){return n[xo]||null}var vc=[],Qi=-1;function gi(n){return{current:n}}function se(n){0>Qi||(n.current=vc[Qi],vc[Qi]=null,Qi--)}function ne(n,e){Qi++,vc[Qi]=n.current,n.current=e}var fi={},Me=gi(fi),Ge=gi(!1),Di=fi;function ps(n,e){var t=n.type.contextTypes;if(!t)return fi;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in t)i[s]=e[s];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=i),i}function Ye(n){return n=n.childContextTypes,n!=null}function Xa(){se(Ge),se(Me)}function fh(n,e,t){if(Me.current!==fi)throw Error(D(168));ne(Me,e),ne(Ge,t)}function Hm(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(D(108,Mv(n)||"Unknown",i));return ce({},t,r)}function Qa(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||fi,Di=Me.current,ne(Me,n),ne(Ge,Ge.current),!0}function dh(n,e,t){var r=n.stateNode;if(!r)throw Error(D(169));t?(n=Hm(n,e,Di),r.__reactInternalMemoizedMergedChildContext=n,se(Ge),se(Me),ne(Me,n)):se(Ge),ne(Ge,t)}var Ir=null,Kl=!1,Nu=!1;function _m(n){Ir===null?Ir=[n]:Ir.push(n)}function ew(n){Kl=!0,_m(n)}function mi(){if(!Nu&&Ir!==null){Nu=!0;var n=0,e=Z;try{var t=Ir;for(Z=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}Ir=null,Kl=!1}catch(i){throw Ir!==null&&(Ir=Ir.slice(n+1)),wm(Nf,mi),i}finally{Z=e,Nu=!1}}return null}var Zi=[],es=0,Za=null,el=0,ft=[],dt=0,Ri=null,Er=1,Cr="";function wi(n,e){Zi[es++]=el,Zi[es++]=Za,Za=n,el=e}function Gm(n,e,t){ft[dt++]=Er,ft[dt++]=Cr,ft[dt++]=Ri,Ri=n;var r=Er;n=Cr;var i=32-jt(r)-1;r&=~(1<<i),t+=1;var s=32-jt(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Er=1<<32-jt(e)+i|t<<i|r,Cr=s+n}else Er=1<<s|t<<i|r,Cr=n}function Mf(n){n.return!==null&&(wi(n,1),Gm(n,1,0))}function Ff(n){for(;n===Za;)Za=Zi[--es],Zi[es]=null,el=Zi[--es],Zi[es]=null;for(;n===Ri;)Ri=ft[--dt],ft[dt]=null,Cr=ft[--dt],ft[dt]=null,Er=ft[--dt],ft[dt]=null}var it=null,tt=null,oe=!1,Ft=null;function Ym(n,e){var t=It(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function hh(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,it=n,tt=ni(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,it=n,tt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Ri!==null?{id:Er,overflow:Cr}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=It(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,it=n,tt=null,!0):!1;default:return!1}}function wc(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Sc(n){if(oe){var e=tt;if(e){var t=e;if(!hh(n,e)){if(wc(n))throw Error(D(418));e=ni(t.nextSibling);var r=it;e&&hh(n,e)?Ym(r,t):(n.flags=n.flags&-4097|2,oe=!1,it=n)}}else{if(wc(n))throw Error(D(418));n.flags=n.flags&-4097|2,oe=!1,it=n}}}function gh(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;it=n}function ua(n){if(n!==it)return!1;if(!oe)return gh(n),oe=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!mc(n.type,n.memoizedProps)),e&&(e=tt)){if(wc(n))throw Xm(),Error(D(418));for(;e;)Ym(n,e),e=ni(e.nextSibling)}if(gh(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(D(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){tt=ni(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}tt=null}}else tt=it?ni(n.stateNode.nextSibling):null;return!0}function Xm(){for(var n=tt;n;)n=ni(n.nextSibling)}function ys(){tt=it=null,oe=!1}function $f(n){Ft===null?Ft=[n]:Ft.push(n)}var tw=Jr.ReactCurrentBatchConfig;function bt(n,e){if(n&&n.defaultProps){e=ce({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}var tl=gi(null),nl=null,ts=null,Jf=null;function Uf(){Jf=ts=nl=null}function jf(n){var e=tl.current;se(tl),n._currentValue=e}function kc(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function cs(n,e){nl=n,Jf=ts=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(We=!0),n.firstContext=null)}function Nt(n){var e=n._currentValue;if(Jf!==n)if(n={context:n,memoizedValue:e,next:null},ts===null){if(nl===null)throw Error(D(308));ts=n,nl.dependencies={lanes:0,firstContext:n}}else ts=ts.next=n;return e}var xi=null;function Vf(n){xi===null?xi=[n]:xi.push(n)}function Qm(n,e,t,r){var i=e.interleaved;return i===null?(t.next=t,Vf(e)):(t.next=i.next,i.next=t),e.interleaved=t,zr(n,r)}function zr(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var Hr=!1;function qf(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Zm(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Rr(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function ri(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,G&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,zr(n,t)}return i=r.interleaved,i===null?(e.next=e,Vf(r)):(e.next=i.next,i.next=e),r.interleaved=e,zr(n,t)}function Ca(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,Pf(n,t)}}function mh(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var i=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?i=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?i=s=e:s=s.next=e}else i=s=e;t={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function rl(n,e,t,r){var i=n.updateQueue;Hr=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var u=a,c=u.next;u.next=null,o===null?s=c:o.next=c,o=u;var d=n.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=u))}if(s!==null){var h=i.baseState;o=0,d=c=u=null,a=s;do{var g=a.lane,p=a.eventTime;if((r&g)===g){d!==null&&(d=d.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=n,w=a;switch(g=e,p=t,w.tag){case 1:if(v=w.payload,typeof v=="function"){h=v.call(p,h,g);break e}h=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=w.payload,g=typeof v=="function"?v.call(p,h,g):v,g==null)break e;h=ce({},h,g);break e;case 2:Hr=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,g=i.effects,g===null?i.effects=[a]:g.push(a))}else p={eventTime:p,lane:g,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=p,u=h):d=d.next=p,o|=g;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;g=a,a=g.next,g.next=null,i.lastBaseUpdate=g,i.shared.pending=null}}while(!0);if(d===null&&(u=h),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Li|=o,n.lanes=o,n.memoizedState=h}}function ph(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],i=r.callback;if(i!==null){if(r.callback=null,r=t,typeof i!="function")throw Error(D(191,i));i.call(r)}}}var ep=new Qg.Component().refs;function Tc(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:ce({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var Wl={isMounted:function(n){return(n=n._reactInternals)?Ji(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=Ue(),i=si(n),s=Rr(r,i);s.payload=e,t!=null&&(s.callback=t),e=ri(n,s,i),e!==null&&(Vt(e,n,i,r),Ca(e,n,i))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=Ue(),i=si(n),s=Rr(r,i);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=ri(n,s,i),e!==null&&(Vt(e,n,i,r),Ca(e,n,i))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Ue(),r=si(n),i=Rr(t,r);i.tag=2,e!=null&&(i.callback=e),e=ri(n,i,r),e!==null&&(Vt(e,n,r,t),Ca(e,n,r))}};function yh(n,e,t,r,i,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!ko(t,r)||!ko(i,s):!0}function tp(n,e,t){var r=!1,i=fi,s=e.contextType;return typeof s=="object"&&s!==null?s=Nt(s):(i=Ye(e)?Di:Me.current,r=e.contextTypes,s=(r=r!=null)?ps(n,i):fi),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Wl,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=s),e}function vh(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&Wl.enqueueReplaceState(e,e.state,null)}function Ic(n,e,t,r){var i=n.stateNode;i.props=t,i.state=n.memoizedState,i.refs=ep,qf(n);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Nt(s):(s=Ye(e)?Di:Me.current,i.context=ps(n,s)),i.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Tc(n,e,s,t),i.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Wl.enqueueReplaceState(i,i.state,null),rl(n,t,i,r),i.state=n.memoizedState),typeof i.componentDidMount=="function"&&(n.flags|=4194308)}function js(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(D(309));var r=t.stateNode}if(!r)throw Error(D(147,n));var i=r,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===ep&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(D(284));if(!t._owner)throw Error(D(290,n))}return n}function ca(n,e){throw n=Object.prototype.toString.call(e),Error(D(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function wh(n){var e=n._init;return e(n._payload)}function np(n){function e(y,m){if(n){var S=y.deletions;S===null?(y.deletions=[m],y.flags|=16):S.push(m)}}function t(y,m){if(!n)return null;for(;m!==null;)e(y,m),m=m.sibling;return null}function r(y,m){for(y=new Map;m!==null;)m.key!==null?y.set(m.key,m):y.set(m.index,m),m=m.sibling;return y}function i(y,m){return y=oi(y,m),y.index=0,y.sibling=null,y}function s(y,m,S){return y.index=S,n?(S=y.alternate,S!==null?(S=S.index,S<m?(y.flags|=2,m):S):(y.flags|=2,m)):(y.flags|=1048576,m)}function o(y){return n&&y.alternate===null&&(y.flags|=2),y}function a(y,m,S,I){return m===null||m.tag!==6?(m=Bu(S,y.mode,I),m.return=y,m):(m=i(m,S),m.return=y,m)}function u(y,m,S,I){var N=S.type;return N===Hi?d(y,m,S.props.children,I,S.key):m!==null&&(m.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Wr&&wh(N)===m.type)?(I=i(m,S.props),I.ref=js(y,m,S),I.return=y,I):(I=La(S.type,S.key,S.props,null,y.mode,I),I.ref=js(y,m,S),I.return=y,I)}function c(y,m,S,I){return m===null||m.tag!==4||m.stateNode.containerInfo!==S.containerInfo||m.stateNode.implementation!==S.implementation?(m=zu(S,y.mode,I),m.return=y,m):(m=i(m,S.children||[]),m.return=y,m)}function d(y,m,S,I,N){return m===null||m.tag!==7?(m=Ni(S,y.mode,I,N),m.return=y,m):(m=i(m,S),m.return=y,m)}function h(y,m,S){if(typeof m=="string"&&m!==""||typeof m=="number")return m=Bu(""+m,y.mode,S),m.return=y,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Zo:return S=La(m.type,m.key,m.props,null,y.mode,S),S.ref=js(y,null,m),S.return=y,S;case Wi:return m=zu(m,y.mode,S),m.return=y,m;case Wr:var I=m._init;return h(y,I(m._payload),S)}if(Gs(m)||Ms(m))return m=Ni(m,y.mode,S,null),m.return=y,m;ca(y,m)}return null}function g(y,m,S,I){var N=m!==null?m.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return N!==null?null:a(y,m,""+S,I);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Zo:return S.key===N?u(y,m,S,I):null;case Wi:return S.key===N?c(y,m,S,I):null;case Wr:return N=S._init,g(y,m,N(S._payload),I)}if(Gs(S)||Ms(S))return N!==null?null:d(y,m,S,I,null);ca(y,S)}return null}function p(y,m,S,I,N){if(typeof I=="string"&&I!==""||typeof I=="number")return y=y.get(S)||null,a(m,y,""+I,N);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Zo:return y=y.get(I.key===null?S:I.key)||null,u(m,y,I,N);case Wi:return y=y.get(I.key===null?S:I.key)||null,c(m,y,I,N);case Wr:var x=I._init;return p(y,m,S,x(I._payload),N)}if(Gs(I)||Ms(I))return y=y.get(S)||null,d(m,y,I,N,null);ca(m,I)}return null}function v(y,m,S,I){for(var N=null,x=null,C=m,R=m=0,z=null;C!==null&&R<S.length;R++){C.index>R?(z=C,C=null):z=C.sibling;var $=g(y,C,S[R],I);if($===null){C===null&&(C=z);break}n&&C&&$.alternate===null&&e(y,C),m=s($,m,R),x===null?N=$:x.sibling=$,x=$,C=z}if(R===S.length)return t(y,C),oe&&wi(y,R),N;if(C===null){for(;R<S.length;R++)C=h(y,S[R],I),C!==null&&(m=s(C,m,R),x===null?N=C:x.sibling=C,x=C);return oe&&wi(y,R),N}for(C=r(y,C);R<S.length;R++)z=p(C,y,R,S[R],I),z!==null&&(n&&z.alternate!==null&&C.delete(z.key===null?R:z.key),m=s(z,m,R),x===null?N=z:x.sibling=z,x=z);return n&&C.forEach(function(ve){return e(y,ve)}),oe&&wi(y,R),N}function w(y,m,S,I){var N=Ms(S);if(typeof N!="function")throw Error(D(150));if(S=N.call(S),S==null)throw Error(D(151));for(var x=N=null,C=m,R=m=0,z=null,$=S.next();C!==null&&!$.done;R++,$=S.next()){C.index>R?(z=C,C=null):z=C.sibling;var ve=g(y,C,$.value,I);if(ve===null){C===null&&(C=z);break}n&&C&&ve.alternate===null&&e(y,C),m=s(ve,m,R),x===null?N=ve:x.sibling=ve,x=ve,C=z}if($.done)return t(y,C),oe&&wi(y,R),N;if(C===null){for(;!$.done;R++,$=S.next())$=h(y,$.value,I),$!==null&&(m=s($,m,R),x===null?N=$:x.sibling=$,x=$);return oe&&wi(y,R),N}for(C=r(y,C);!$.done;R++,$=S.next())$=p(C,y,R,$.value,I),$!==null&&(n&&$.alternate!==null&&C.delete($.key===null?R:$.key),m=s($,m,R),x===null?N=$:x.sibling=$,x=$);return n&&C.forEach(function(Wt){return e(y,Wt)}),oe&&wi(y,R),N}function A(y,m,S,I){if(typeof S=="object"&&S!==null&&S.type===Hi&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Zo:e:{for(var N=S.key,x=m;x!==null;){if(x.key===N){if(N=S.type,N===Hi){if(x.tag===7){t(y,x.sibling),m=i(x,S.props.children),m.return=y,y=m;break e}}else if(x.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Wr&&wh(N)===x.type){t(y,x.sibling),m=i(x,S.props),m.ref=js(y,x,S),m.return=y,y=m;break e}t(y,x);break}else e(y,x);x=x.sibling}S.type===Hi?(m=Ni(S.props.children,y.mode,I,S.key),m.return=y,y=m):(I=La(S.type,S.key,S.props,null,y.mode,I),I.ref=js(y,m,S),I.return=y,y=I)}return o(y);case Wi:e:{for(x=S.key;m!==null;){if(m.key===x)if(m.tag===4&&m.stateNode.containerInfo===S.containerInfo&&m.stateNode.implementation===S.implementation){t(y,m.sibling),m=i(m,S.children||[]),m.return=y,y=m;break e}else{t(y,m);break}else e(y,m);m=m.sibling}m=zu(S,y.mode,I),m.return=y,y=m}return o(y);case Wr:return x=S._init,A(y,m,x(S._payload),I)}if(Gs(S))return v(y,m,S,I);if(Ms(S))return w(y,m,S,I);ca(y,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,m!==null&&m.tag===6?(t(y,m.sibling),m=i(m,S),m.return=y,y=m):(t(y,m),m=Bu(S,y.mode,I),m.return=y,y=m),o(y)):t(y,m)}return A}var vs=np(!0),rp=np(!1),Ko={},un=gi(Ko),Ao=gi(Ko),Eo=gi(Ko);function Ai(n){if(n===Ko)throw Error(D(174));return n}function Kf(n,e){switch(ne(Eo,e),ne(Ao,n),ne(un,Ko),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:tc(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=tc(e,n)}se(un),ne(un,e)}function ws(){se(un),se(Ao),se(Eo)}function ip(n){Ai(Eo.current);var e=Ai(un.current),t=tc(e,n.type);e!==t&&(ne(Ao,n),ne(un,t))}function Wf(n){Ao.current===n&&(se(un),se(Ao))}var ae=gi(0);function il(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Pu=[];function Hf(){for(var n=0;n<Pu.length;n++)Pu[n]._workInProgressVersionPrimary=null;Pu.length=0}var Na=Jr.ReactCurrentDispatcher,Du=Jr.ReactCurrentBatchConfig,Oi=0,ue=null,Se=null,Ie=null,sl=!1,io=!1,Co=0,nw=0;function Oe(){throw Error(D(321))}function _f(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!Kt(n[t],e[t]))return!1;return!0}function Gf(n,e,t,r,i,s){if(Oi=s,ue=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Na.current=n===null||n.memoizedState===null?ow:aw,n=t(r,i),io){s=0;do{if(io=!1,Co=0,25<=s)throw Error(D(301));s+=1,Ie=Se=null,e.updateQueue=null,Na.current=lw,n=t(r,i)}while(io)}if(Na.current=ol,e=Se!==null&&Se.next!==null,Oi=0,Ie=Se=ue=null,sl=!1,e)throw Error(D(300));return n}function Yf(){var n=Co!==0;return Co=0,n}function _t(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ie===null?ue.memoizedState=Ie=n:Ie=Ie.next=n,Ie}function Pt(){if(Se===null){var n=ue.alternate;n=n!==null?n.memoizedState:null}else n=Se.next;var e=Ie===null?ue.memoizedState:Ie.next;if(e!==null)Ie=e,Se=n;else{if(n===null)throw Error(D(310));Se=n,n={memoizedState:Se.memoizedState,baseState:Se.baseState,baseQueue:Se.baseQueue,queue:Se.queue,next:null},Ie===null?ue.memoizedState=Ie=n:Ie=Ie.next=n}return Ie}function No(n,e){return typeof e=="function"?e(n):e}function Ru(n){var e=Pt(),t=e.queue;if(t===null)throw Error(D(311));t.lastRenderedReducer=n;var r=Se,i=r.baseQueue,s=t.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,t.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,u=null,c=s;do{var d=c.lane;if((Oi&d)===d)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:n(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(a=u=h,o=r):u=u.next=h,ue.lanes|=d,Li|=d}c=c.next}while(c!==null&&c!==s);u===null?o=r:u.next=a,Kt(r,e.memoizedState)||(We=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,t.lastRenderedState=r}if(n=t.interleaved,n!==null){i=n;do s=i.lane,ue.lanes|=s,Li|=s,i=i.next;while(i!==n)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function Ou(n){var e=Pt(),t=e.queue;if(t===null)throw Error(D(311));t.lastRenderedReducer=n;var r=t.dispatch,i=t.pending,s=e.memoizedState;if(i!==null){t.pending=null;var o=i=i.next;do s=n(s,o.action),o=o.next;while(o!==i);Kt(s,e.memoizedState)||(We=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,r]}function sp(){}function op(n,e){var t=ue,r=Pt(),i=e(),s=!Kt(r.memoizedState,i);if(s&&(r.memoizedState=i,We=!0),r=r.queue,Xf(up.bind(null,t,r,n),[n]),r.getSnapshot!==e||s||Ie!==null&&Ie.memoizedState.tag&1){if(t.flags|=2048,Po(9,lp.bind(null,t,r,i,e),void 0,null),xe===null)throw Error(D(349));Oi&30||ap(t,e,i)}return i}function ap(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=ue.updateQueue,e===null?(e={lastEffect:null,stores:null},ue.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function lp(n,e,t,r){e.value=t,e.getSnapshot=r,cp(e)&&fp(n)}function up(n,e,t){return t(function(){cp(e)&&fp(n)})}function cp(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Kt(n,t)}catch{return!0}}function fp(n){var e=zr(n,1);e!==null&&Vt(e,n,1,-1)}function Sh(n){var e=_t();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:No,lastRenderedState:n},e.queue=n,n=n.dispatch=sw.bind(null,ue,n),[e.memoizedState,n]}function Po(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=ue.updateQueue,e===null?(e={lastEffect:null,stores:null},ue.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function dp(){return Pt().memoizedState}function Pa(n,e,t,r){var i=_t();ue.flags|=n,i.memoizedState=Po(1|e,t,void 0,r===void 0?null:r)}function Hl(n,e,t,r){var i=Pt();r=r===void 0?null:r;var s=void 0;if(Se!==null){var o=Se.memoizedState;if(s=o.destroy,r!==null&&_f(r,o.deps)){i.memoizedState=Po(e,t,s,r);return}}ue.flags|=n,i.memoizedState=Po(1|e,t,s,r)}function kh(n,e){return Pa(8390656,8,n,e)}function Xf(n,e){return Hl(2048,8,n,e)}function hp(n,e){return Hl(4,2,n,e)}function gp(n,e){return Hl(4,4,n,e)}function mp(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function pp(n,e,t){return t=t!=null?t.concat([n]):null,Hl(4,4,mp.bind(null,e,n),t)}function Qf(){}function yp(n,e){var t=Pt();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&_f(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function vp(n,e){var t=Pt();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&_f(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function wp(n,e,t){return Oi&21?(Kt(t,e)||(t=Tm(),ue.lanes|=t,Li|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,We=!0),n.memoizedState=t)}function rw(n,e){var t=Z;Z=t!==0&&4>t?t:4,n(!0);var r=Du.transition;Du.transition={};try{n(!1),e()}finally{Z=t,Du.transition=r}}function Sp(){return Pt().memoizedState}function iw(n,e,t){var r=si(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},kp(n))Tp(e,t);else if(t=Qm(n,e,t,r),t!==null){var i=Ue();Vt(t,n,r,i),Ip(t,e,r)}}function sw(n,e,t){var r=si(n),i={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(kp(n))Tp(e,i);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(i.hasEagerState=!0,i.eagerState=a,Kt(a,o)){var u=e.interleaved;u===null?(i.next=i,Vf(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}t=Qm(n,e,i,r),t!==null&&(i=Ue(),Vt(t,n,r,i),Ip(t,e,r))}}function kp(n){var e=n.alternate;return n===ue||e!==null&&e===ue}function Tp(n,e){io=sl=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function Ip(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,Pf(n,t)}}var ol={readContext:Nt,useCallback:Oe,useContext:Oe,useEffect:Oe,useImperativeHandle:Oe,useInsertionEffect:Oe,useLayoutEffect:Oe,useMemo:Oe,useReducer:Oe,useRef:Oe,useState:Oe,useDebugValue:Oe,useDeferredValue:Oe,useTransition:Oe,useMutableSource:Oe,useSyncExternalStore:Oe,useId:Oe,unstable_isNewReconciler:!1},ow={readContext:Nt,useCallback:function(n,e){return _t().memoizedState=[n,e===void 0?null:e],n},useContext:Nt,useEffect:kh,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,Pa(4194308,4,mp.bind(null,e,n),t)},useLayoutEffect:function(n,e){return Pa(4194308,4,n,e)},useInsertionEffect:function(n,e){return Pa(4,2,n,e)},useMemo:function(n,e){var t=_t();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=_t();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=iw.bind(null,ue,n),[r.memoizedState,n]},useRef:function(n){var e=_t();return n={current:n},e.memoizedState=n},useState:Sh,useDebugValue:Qf,useDeferredValue:function(n){return _t().memoizedState=n},useTransition:function(){var n=Sh(!1),e=n[0];return n=rw.bind(null,n[1]),_t().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=ue,i=_t();if(oe){if(t===void 0)throw Error(D(407));t=t()}else{if(t=e(),xe===null)throw Error(D(349));Oi&30||ap(r,e,t)}i.memoizedState=t;var s={value:t,getSnapshot:e};return i.queue=s,kh(up.bind(null,r,s,n),[n]),r.flags|=2048,Po(9,lp.bind(null,r,s,t,e),void 0,null),t},useId:function(){var n=_t(),e=xe.identifierPrefix;if(oe){var t=Cr,r=Er;t=(r&~(1<<32-jt(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=Co++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=nw++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},aw={readContext:Nt,useCallback:yp,useContext:Nt,useEffect:Xf,useImperativeHandle:pp,useInsertionEffect:hp,useLayoutEffect:gp,useMemo:vp,useReducer:Ru,useRef:dp,useState:function(){return Ru(No)},useDebugValue:Qf,useDeferredValue:function(n){var e=Pt();return wp(e,Se.memoizedState,n)},useTransition:function(){var n=Ru(No)[0],e=Pt().memoizedState;return[n,e]},useMutableSource:sp,useSyncExternalStore:op,useId:Sp,unstable_isNewReconciler:!1},lw={readContext:Nt,useCallback:yp,useContext:Nt,useEffect:Xf,useImperativeHandle:pp,useInsertionEffect:hp,useLayoutEffect:gp,useMemo:vp,useReducer:Ou,useRef:dp,useState:function(){return Ou(No)},useDebugValue:Qf,useDeferredValue:function(n){var e=Pt();return Se===null?e.memoizedState=n:wp(e,Se.memoizedState,n)},useTransition:function(){var n=Ou(No)[0],e=Pt().memoizedState;return[n,e]},useMutableSource:sp,useSyncExternalStore:op,useId:Sp,unstable_isNewReconciler:!1};function Ss(n,e){try{var t="",r=e;do t+=zv(r),r=r.return;while(r);var i=t}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:i,digest:null}}function Lu(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function xc(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var uw=typeof WeakMap=="function"?WeakMap:Map;function xp(n,e,t){t=Rr(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){ll||(ll=!0,bc=r),xc(n,e)},t}function Ap(n,e,t){t=Rr(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;t.payload=function(){return r(i)},t.callback=function(){xc(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){xc(n,e),typeof r!="function"&&(ii===null?ii=new Set([this]):ii.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function Th(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new uw;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(t)||(i.add(t),n=Iw.bind(null,n,e,t),e.then(n,n))}function Ih(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function xh(n,e,t,r,i){return n.mode&1?(n.flags|=65536,n.lanes=i,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Rr(-1,1),e.tag=2,ri(t,e,1))),t.lanes|=1),n)}var cw=Jr.ReactCurrentOwner,We=!1;function $e(n,e,t,r){e.child=n===null?rp(e,null,t,r):vs(e,n.child,t,r)}function Ah(n,e,t,r,i){t=t.render;var s=e.ref;return cs(e,i),r=Gf(n,e,t,r,s,i),t=Yf(),n!==null&&!We?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Mr(n,e,i)):(oe&&t&&Mf(e),e.flags|=1,$e(n,e,r,i),e.child)}function Eh(n,e,t,r,i){if(n===null){var s=t.type;return typeof s=="function"&&!od(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,Ep(n,e,s,r,i)):(n=La(t.type,null,r,e,e.mode,i),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&i)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:ko,t(o,r)&&n.ref===e.ref)return Mr(n,e,i)}return e.flags|=1,n=oi(s,r),n.ref=e.ref,n.return=e,e.child=n}function Ep(n,e,t,r,i){if(n!==null){var s=n.memoizedProps;if(ko(s,r)&&n.ref===e.ref)if(We=!1,e.pendingProps=r=s,(n.lanes&i)!==0)n.flags&131072&&(We=!0);else return e.lanes=n.lanes,Mr(n,e,i)}return Ac(n,e,t,r,i)}function Cp(n,e,t){var r=e.pendingProps,i=r.children,s=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ne(rs,et),et|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,ne(rs,et),et|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:t,ne(rs,et),et|=r}else s!==null?(r=s.baseLanes|t,e.memoizedState=null):r=t,ne(rs,et),et|=r;return $e(n,e,i,t),e.child}function Np(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function Ac(n,e,t,r,i){var s=Ye(t)?Di:Me.current;return s=ps(e,s),cs(e,i),t=Gf(n,e,t,r,s,i),r=Yf(),n!==null&&!We?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Mr(n,e,i)):(oe&&r&&Mf(e),e.flags|=1,$e(n,e,t,i),e.child)}function Ch(n,e,t,r,i){if(Ye(t)){var s=!0;Qa(e)}else s=!1;if(cs(e,i),e.stateNode===null)Da(n,e),tp(e,t,r),Ic(e,t,r,i),r=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var u=o.context,c=t.contextType;typeof c=="object"&&c!==null?c=Nt(c):(c=Ye(t)?Di:Me.current,c=ps(e,c));var d=t.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||u!==c)&&vh(e,o,r,c),Hr=!1;var g=e.memoizedState;o.state=g,rl(e,r,o,i),u=e.memoizedState,a!==r||g!==u||Ge.current||Hr?(typeof d=="function"&&(Tc(e,t,d,r),u=e.memoizedState),(a=Hr||yh(e,t,a,r,g,u,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Zm(n,e),a=e.memoizedProps,c=e.type===e.elementType?a:bt(e.type,a),o.props=c,h=e.pendingProps,g=o.context,u=t.contextType,typeof u=="object"&&u!==null?u=Nt(u):(u=Ye(t)?Di:Me.current,u=ps(e,u));var p=t.getDerivedStateFromProps;(d=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||g!==u)&&vh(e,o,r,u),Hr=!1,g=e.memoizedState,o.state=g,rl(e,r,o,i);var v=e.memoizedState;a!==h||g!==v||Ge.current||Hr?(typeof p=="function"&&(Tc(e,t,p,r),v=e.memoizedState),(c=Hr||yh(e,t,c,r,g,v,u)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&g===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&g===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),o.props=r,o.state=v,o.context=u,r=c):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&g===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&g===n.memoizedState||(e.flags|=1024),r=!1)}return Ec(n,e,t,r,s,i)}function Ec(n,e,t,r,i,s){Np(n,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&dh(e,t,!1),Mr(n,e,s);r=e.stateNode,cw.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&o?(e.child=vs(e,n.child,null,s),e.child=vs(e,null,a,s)):$e(n,e,a,s),e.memoizedState=r.state,i&&dh(e,t,!0),e.child}function Pp(n){var e=n.stateNode;e.pendingContext?fh(n,e.pendingContext,e.pendingContext!==e.context):e.context&&fh(n,e.context,!1),Kf(n,e.containerInfo)}function Nh(n,e,t,r,i){return ys(),$f(i),e.flags|=256,$e(n,e,t,r),e.child}var Cc={dehydrated:null,treeContext:null,retryLane:0};function Nc(n){return{baseLanes:n,cachePool:null,transitions:null}}function Dp(n,e,t){var r=e.pendingProps,i=ae.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(i|=1),ne(ae,i&1),n===null)return Sc(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,n=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Yl(o,r,0,null),n=Ni(n,r,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=Nc(t),e.memoizedState=Cc,n):Zf(e,o));if(i=n.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return fw(n,e,o,r,a,i,t);if(s){s=r.fallback,o=e.mode,i=n.child,a=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=oi(i,u),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=oi(a,s):(s=Ni(s,o,t,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=n.child.memoizedState,o=o===null?Nc(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=Cc,r}return s=n.child,n=s.sibling,r=oi(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function Zf(n,e){return e=Yl({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function fa(n,e,t,r){return r!==null&&$f(r),vs(e,n.child,null,t),n=Zf(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function fw(n,e,t,r,i,s,o){if(t)return e.flags&256?(e.flags&=-257,r=Lu(Error(D(422))),fa(n,e,o,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Yl({mode:"visible",children:r.children},i,0,null),s=Ni(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&vs(e,n.child,null,o),e.child.memoizedState=Nc(o),e.memoizedState=Cc,s);if(!(e.mode&1))return fa(n,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(D(419)),r=Lu(s,r,void 0),fa(n,e,o,r)}if(a=(o&n.childLanes)!==0,We||a){if(r=xe,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,zr(n,i),Vt(r,n,i,-1))}return sd(),r=Lu(Error(D(421))),fa(n,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=n.child,e=xw.bind(null,n),i._reactRetry=e,null):(n=s.treeContext,tt=ni(i.nextSibling),it=e,oe=!0,Ft=null,n!==null&&(ft[dt++]=Er,ft[dt++]=Cr,ft[dt++]=Ri,Er=n.id,Cr=n.overflow,Ri=e),e=Zf(e,r.children),e.flags|=4096,e)}function Ph(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),kc(n.return,e,t)}function bu(n,e,t,r,i){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=t,s.tailMode=i)}function Rp(n,e,t){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if($e(n,e,r.children,t),r=ae.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Ph(n,t,e);else if(n.tag===19)Ph(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(ne(ae,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)n=t.alternate,n!==null&&il(n)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),bu(e,!1,i,t,s);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(n=i.alternate,n!==null&&il(n)===null){e.child=i;break}n=i.sibling,i.sibling=t,t=i,i=n}bu(e,!0,t,null,s);break;case"together":bu(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Da(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Mr(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),Li|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(D(153));if(e.child!==null){for(n=e.child,t=oi(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=oi(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function dw(n,e,t){switch(e.tag){case 3:Pp(e),ys();break;case 5:ip(e);break;case 1:Ye(e.type)&&Qa(e);break;case 4:Kf(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;ne(tl,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ne(ae,ae.current&1),e.flags|=128,null):t&e.child.childLanes?Dp(n,e,t):(ne(ae,ae.current&1),n=Mr(n,e,t),n!==null?n.sibling:null);ne(ae,ae.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return Rp(n,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ne(ae,ae.current),r)break;return null;case 22:case 23:return e.lanes=0,Cp(n,e,t)}return Mr(n,e,t)}var Op,Pc,Lp,bp;Op=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};Pc=function(){};Lp=function(n,e,t,r){var i=n.memoizedProps;if(i!==r){n=e.stateNode,Ai(un.current);var s=null;switch(t){case"input":i=Xu(n,i),r=Xu(n,r),s=[];break;case"select":i=ce({},i,{value:void 0}),r=ce({},r,{value:void 0}),s=[];break;case"textarea":i=ec(n,i),r=ec(n,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=Ya)}nc(t,r);var o;t=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(go.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var u=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&u!==a&&(u!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(t||(t={}),t[o]=u[o])}else t||(s||(s=[]),s.push(c,t)),t=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(s=s||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(go.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&re("scroll",n),s||a===u||(s=[])):(s=s||[]).push(c,u))}t&&(s=s||[]).push("style",t);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};bp=function(n,e,t,r){t!==r&&(e.flags|=4)};function Vs(n,e){if(!oe)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function Le(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=n,i=i.sibling;else for(i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=n,i=i.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function hw(n,e,t){var r=e.pendingProps;switch(Ff(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Le(e),null;case 1:return Ye(e.type)&&Xa(),Le(e),null;case 3:return r=e.stateNode,ws(),se(Ge),se(Me),Hf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(ua(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ft!==null&&(Mc(Ft),Ft=null))),Pc(n,e),Le(e),null;case 5:Wf(e);var i=Ai(Eo.current);if(t=e.type,n!==null&&e.stateNode!=null)Lp(n,e,t,r,i),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(D(166));return Le(e),null}if(n=Ai(un.current),ua(e)){r=e.stateNode,t=e.type;var s=e.memoizedProps;switch(r[Xt]=e,r[xo]=s,n=(e.mode&1)!==0,t){case"dialog":re("cancel",r),re("close",r);break;case"iframe":case"object":case"embed":re("load",r);break;case"video":case"audio":for(i=0;i<Xs.length;i++)re(Xs[i],r);break;case"source":re("error",r);break;case"img":case"image":case"link":re("error",r),re("load",r);break;case"details":re("toggle",r);break;case"input":Fd(r,s),re("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},re("invalid",r);break;case"textarea":Jd(r,s),re("invalid",r)}nc(t,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&la(r.textContent,a,n),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&la(r.textContent,a,n),i=["children",""+a]):go.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&re("scroll",r)}switch(t){case"input":ea(r),$d(r,s,!0);break;case"textarea":ea(r),Ud(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Ya)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=am(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=o.createElement(t,{is:r.is}):(n=o.createElement(t),t==="select"&&(o=n,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):n=o.createElementNS(n,t),n[Xt]=e,n[xo]=r,Op(n,e,!1,!1),e.stateNode=n;e:{switch(o=rc(t,r),t){case"dialog":re("cancel",n),re("close",n),i=r;break;case"iframe":case"object":case"embed":re("load",n),i=r;break;case"video":case"audio":for(i=0;i<Xs.length;i++)re(Xs[i],n);i=r;break;case"source":re("error",n),i=r;break;case"img":case"image":case"link":re("error",n),re("load",n),i=r;break;case"details":re("toggle",n),i=r;break;case"input":Fd(n,r),i=Xu(n,r),re("invalid",n);break;case"option":i=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},i=ce({},r,{value:void 0}),re("invalid",n);break;case"textarea":Jd(n,r),i=ec(n,r),re("invalid",n);break;default:i=r}nc(t,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var u=a[s];s==="style"?cm(n,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&lm(n,u)):s==="children"?typeof u=="string"?(t!=="textarea"||u!=="")&&mo(n,u):typeof u=="number"&&mo(n,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(go.hasOwnProperty(s)?u!=null&&s==="onScroll"&&re("scroll",n):u!=null&&If(n,s,u,o))}switch(t){case"input":ea(n),$d(n,r,!1);break;case"textarea":ea(n),Ud(n);break;case"option":r.value!=null&&n.setAttribute("value",""+ci(r.value));break;case"select":n.multiple=!!r.multiple,s=r.value,s!=null?os(n,!!r.multiple,s,!1):r.defaultValue!=null&&os(n,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(n.onclick=Ya)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Le(e),null;case 6:if(n&&e.stateNode!=null)bp(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(D(166));if(t=Ai(Eo.current),Ai(un.current),ua(e)){if(r=e.stateNode,t=e.memoizedProps,r[Xt]=e,(s=r.nodeValue!==t)&&(n=it,n!==null))switch(n.tag){case 3:la(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&la(r.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[Xt]=e,e.stateNode=r}return Le(e),null;case 13:if(se(ae),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(oe&&tt!==null&&e.mode&1&&!(e.flags&128))Xm(),ys(),e.flags|=98560,s=!1;else if(s=ua(e),r!==null&&r.dehydrated!==null){if(n===null){if(!s)throw Error(D(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(D(317));s[Xt]=e}else ys(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Le(e),s=!1}else Ft!==null&&(Mc(Ft),Ft=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(n===null||ae.current&1?ke===0&&(ke=3):sd())),e.updateQueue!==null&&(e.flags|=4),Le(e),null);case 4:return ws(),Pc(n,e),n===null&&To(e.stateNode.containerInfo),Le(e),null;case 10:return jf(e.type._context),Le(e),null;case 17:return Ye(e.type)&&Xa(),Le(e),null;case 19:if(se(ae),s=e.memoizedState,s===null)return Le(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Vs(s,!1);else{if(ke!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=il(n),o!==null){for(e.flags|=128,Vs(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)s=t,n=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return ne(ae,ae.current&1|2),e.child}n=n.sibling}s.tail!==null&&pe()>ks&&(e.flags|=128,r=!0,Vs(s,!1),e.lanes=4194304)}else{if(!r)if(n=il(o),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Vs(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!oe)return Le(e),null}else 2*pe()-s.renderingStartTime>ks&&t!==1073741824&&(e.flags|=128,r=!0,Vs(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=pe(),e.sibling=null,t=ae.current,ne(ae,r?t&1|2:t&1),e):(Le(e),null);case 22:case 23:return id(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?et&1073741824&&(Le(e),e.subtreeFlags&6&&(e.flags|=8192)):Le(e),null;case 24:return null;case 25:return null}throw Error(D(156,e.tag))}function gw(n,e){switch(Ff(e),e.tag){case 1:return Ye(e.type)&&Xa(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return ws(),se(Ge),se(Me),Hf(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return Wf(e),null;case 13:if(se(ae),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(D(340));ys()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return se(ae),null;case 4:return ws(),null;case 10:return jf(e.type._context),null;case 22:case 23:return id(),null;case 24:return null;default:return null}}var da=!1,be=!1,mw=typeof WeakSet=="function"?WeakSet:Set,b=null;function ns(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){fe(n,e,r)}else t.current=null}function Dc(n,e,t){try{t()}catch(r){fe(n,e,r)}}var Dh=!1;function pw(n,e){if(hc=Ha,n=Fm(),zf(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,u=-1,c=0,d=0,h=n,g=null;t:for(;;){for(var p;h!==t||i!==0&&h.nodeType!==3||(a=o+i),h!==s||r!==0&&h.nodeType!==3||(u=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(p=h.firstChild)!==null;)g=h,h=p;for(;;){if(h===n)break t;if(g===t&&++c===i&&(a=o),g===s&&++d===r&&(u=o),(p=h.nextSibling)!==null)break;h=g,g=h.parentNode}h=p}t=a===-1||u===-1?null:{start:a,end:u}}else t=null}t=t||{start:0,end:0}}else t=null;for(gc={focusedElem:n,selectionRange:t},Ha=!1,b=e;b!==null;)if(e=b,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,b=n;else for(;b!==null;){e=b;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var w=v.memoizedProps,A=v.memoizedState,y=e.stateNode,m=y.getSnapshotBeforeUpdate(e.elementType===e.type?w:bt(e.type,w),A);y.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(D(163))}}catch(I){fe(e,e.return,I)}if(n=e.sibling,n!==null){n.return=e.return,b=n;break}b=e.return}return v=Dh,Dh=!1,v}function so(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&n)===n){var s=i.destroy;i.destroy=void 0,s!==void 0&&Dc(e,t,s)}i=i.next}while(i!==r)}}function _l(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function Rc(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function Bp(n){var e=n.alternate;e!==null&&(n.alternate=null,Bp(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Xt],delete e[xo],delete e[yc],delete e[Q0],delete e[Z0])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function zp(n){return n.tag===5||n.tag===3||n.tag===4}function Rh(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||zp(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Oc(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=Ya));else if(r!==4&&(n=n.child,n!==null))for(Oc(n,e,t),n=n.sibling;n!==null;)Oc(n,e,t),n=n.sibling}function Lc(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(Lc(n,e,t),n=n.sibling;n!==null;)Lc(n,e,t),n=n.sibling}var Ae=null,Mt=!1;function jr(n,e,t){for(t=t.child;t!==null;)Mp(n,e,t),t=t.sibling}function Mp(n,e,t){if(ln&&typeof ln.onCommitFiberUnmount=="function")try{ln.onCommitFiberUnmount(Jl,t)}catch{}switch(t.tag){case 5:be||ns(t,e);case 6:var r=Ae,i=Mt;Ae=null,jr(n,e,t),Ae=r,Mt=i,Ae!==null&&(Mt?(n=Ae,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):Ae.removeChild(t.stateNode));break;case 18:Ae!==null&&(Mt?(n=Ae,t=t.stateNode,n.nodeType===8?Cu(n.parentNode,t):n.nodeType===1&&Cu(n,t),wo(n)):Cu(Ae,t.stateNode));break;case 4:r=Ae,i=Mt,Ae=t.stateNode.containerInfo,Mt=!0,jr(n,e,t),Ae=r,Mt=i;break;case 0:case 11:case 14:case 15:if(!be&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Dc(t,e,o),i=i.next}while(i!==r)}jr(n,e,t);break;case 1:if(!be&&(ns(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(a){fe(t,e,a)}jr(n,e,t);break;case 21:jr(n,e,t);break;case 22:t.mode&1?(be=(r=be)||t.memoizedState!==null,jr(n,e,t),be=r):jr(n,e,t);break;default:jr(n,e,t)}}function Oh(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new mw),e.forEach(function(r){var i=Aw.bind(null,n,r);t.has(r)||(t.add(r),r.then(i,i))})}}function Ot(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var i=t[r];try{var s=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Ae=a.stateNode,Mt=!1;break e;case 3:Ae=a.stateNode.containerInfo,Mt=!0;break e;case 4:Ae=a.stateNode.containerInfo,Mt=!0;break e}a=a.return}if(Ae===null)throw Error(D(160));Mp(s,o,i),Ae=null,Mt=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(c){fe(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Fp(e,n),e=e.sibling}function Fp(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Ot(e,n),Ht(n),r&4){try{so(3,n,n.return),_l(3,n)}catch(w){fe(n,n.return,w)}try{so(5,n,n.return)}catch(w){fe(n,n.return,w)}}break;case 1:Ot(e,n),Ht(n),r&512&&t!==null&&ns(t,t.return);break;case 5:if(Ot(e,n),Ht(n),r&512&&t!==null&&ns(t,t.return),n.flags&32){var i=n.stateNode;try{mo(i,"")}catch(w){fe(n,n.return,w)}}if(r&4&&(i=n.stateNode,i!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,a=n.type,u=n.updateQueue;if(n.updateQueue=null,u!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&sm(i,s),rc(a,o);var c=rc(a,s);for(o=0;o<u.length;o+=2){var d=u[o],h=u[o+1];d==="style"?cm(i,h):d==="dangerouslySetInnerHTML"?lm(i,h):d==="children"?mo(i,h):If(i,d,h,c)}switch(a){case"input":Qu(i,s);break;case"textarea":om(i,s);break;case"select":var g=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?os(i,!!s.multiple,p,!1):g!==!!s.multiple&&(s.defaultValue!=null?os(i,!!s.multiple,s.defaultValue,!0):os(i,!!s.multiple,s.multiple?[]:"",!1))}i[xo]=s}catch(w){fe(n,n.return,w)}}break;case 6:if(Ot(e,n),Ht(n),r&4){if(n.stateNode===null)throw Error(D(162));i=n.stateNode,s=n.memoizedProps;try{i.nodeValue=s}catch(w){fe(n,n.return,w)}}break;case 3:if(Ot(e,n),Ht(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{wo(e.containerInfo)}catch(w){fe(n,n.return,w)}break;case 4:Ot(e,n),Ht(n);break;case 13:Ot(e,n),Ht(n),i=n.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(nd=pe())),r&4&&Oh(n);break;case 22:if(d=t!==null&&t.memoizedState!==null,n.mode&1?(be=(c=be)||d,Ot(e,n),be=c):Ot(e,n),Ht(n),r&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!d&&n.mode&1)for(b=n,d=n.child;d!==null;){for(h=b=d;b!==null;){switch(g=b,p=g.child,g.tag){case 0:case 11:case 14:case 15:so(4,g,g.return);break;case 1:ns(g,g.return);var v=g.stateNode;if(typeof v.componentWillUnmount=="function"){r=g,t=g.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(w){fe(r,t,w)}}break;case 5:ns(g,g.return);break;case 22:if(g.memoizedState!==null){bh(h);continue}}p!==null?(p.return=g,b=p):bh(h)}d=d.sibling}e:for(d=null,h=n;;){if(h.tag===5){if(d===null){d=h;try{i=h.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,u=h.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=um("display",o))}catch(w){fe(n,n.return,w)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(w){fe(n,n.return,w)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===n)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===n)break e;for(;h.sibling===null;){if(h.return===null||h.return===n)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Ot(e,n),Ht(n),r&4&&Oh(n);break;case 21:break;default:Ot(e,n),Ht(n)}}function Ht(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(zp(t)){var r=t;break e}t=t.return}throw Error(D(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(mo(i,""),r.flags&=-33);var s=Rh(n);Lc(n,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Rh(n);Oc(n,a,o);break;default:throw Error(D(161))}}catch(u){fe(n,n.return,u)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function yw(n,e,t){b=n,$p(n)}function $p(n,e,t){for(var r=(n.mode&1)!==0;b!==null;){var i=b,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||da;if(!o){var a=i.alternate,u=a!==null&&a.memoizedState!==null||be;a=da;var c=be;if(da=o,(be=u)&&!c)for(b=i;b!==null;)o=b,u=o.child,o.tag===22&&o.memoizedState!==null?Bh(i):u!==null?(u.return=o,b=u):Bh(i);for(;s!==null;)b=s,$p(s),s=s.sibling;b=i,da=a,be=c}Lh(n)}else i.subtreeFlags&8772&&s!==null?(s.return=i,b=s):Lh(n)}}function Lh(n){for(;b!==null;){var e=b;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:be||_l(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!be)if(t===null)r.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:bt(e.type,t.memoizedProps);r.componentDidUpdate(i,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&ph(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}ph(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&t.focus();break;case"img":u.src&&(t.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&wo(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(D(163))}be||e.flags&512&&Rc(e)}catch(g){fe(e,e.return,g)}}if(e===n){b=null;break}if(t=e.sibling,t!==null){t.return=e.return,b=t;break}b=e.return}}function bh(n){for(;b!==null;){var e=b;if(e===n){b=null;break}var t=e.sibling;if(t!==null){t.return=e.return,b=t;break}b=e.return}}function Bh(n){for(;b!==null;){var e=b;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{_l(4,e)}catch(u){fe(e,t,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){fe(e,i,u)}}var s=e.return;try{Rc(e)}catch(u){fe(e,s,u)}break;case 5:var o=e.return;try{Rc(e)}catch(u){fe(e,o,u)}}}catch(u){fe(e,e.return,u)}if(e===n){b=null;break}var a=e.sibling;if(a!==null){a.return=e.return,b=a;break}b=e.return}}var vw=Math.ceil,al=Jr.ReactCurrentDispatcher,ed=Jr.ReactCurrentOwner,Et=Jr.ReactCurrentBatchConfig,G=0,xe=null,we=null,Pe=0,et=0,rs=gi(0),ke=0,Do=null,Li=0,Gl=0,td=0,oo=null,qe=null,nd=0,ks=1/0,yn=null,ll=!1,bc=null,ii=null,ha=!1,Xr=null,ul=0,ao=0,Bc=null,Ra=-1,Oa=0;function Ue(){return G&6?pe():Ra!==-1?Ra:Ra=pe()}function si(n){return n.mode&1?G&2&&Pe!==0?Pe&-Pe:tw.transition!==null?(Oa===0&&(Oa=Tm()),Oa):(n=Z,n!==0||(n=window.event,n=n===void 0?16:Pm(n.type)),n):1}function Vt(n,e,t,r){if(50<ao)throw ao=0,Bc=null,Error(D(185));jo(n,t,r),(!(G&2)||n!==xe)&&(n===xe&&(!(G&2)&&(Gl|=t),ke===4&&Gr(n,Pe)),Xe(n,r),t===1&&G===0&&!(e.mode&1)&&(ks=pe()+500,Kl&&mi()))}function Xe(n,e){var t=n.callbackNode;t0(n,e);var r=Wa(n,n===xe?Pe:0);if(r===0)t!==null&&qd(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&qd(t),e===1)n.tag===0?ew(zh.bind(null,n)):_m(zh.bind(null,n)),Y0(function(){!(G&6)&&mi()}),t=null;else{switch(Im(r)){case 1:t=Nf;break;case 4:t=Sm;break;case 16:t=Ka;break;case 536870912:t=km;break;default:t=Ka}t=Hp(t,Jp.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function Jp(n,e){if(Ra=-1,Oa=0,G&6)throw Error(D(327));var t=n.callbackNode;if(fs()&&n.callbackNode!==t)return null;var r=Wa(n,n===xe?Pe:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=cl(n,r);else{e=r;var i=G;G|=2;var s=jp();(xe!==n||Pe!==e)&&(yn=null,ks=pe()+500,Ci(n,e));do try{kw();break}catch(a){Up(n,a)}while(!0);Uf(),al.current=s,G=i,we!==null?e=0:(xe=null,Pe=0,e=ke)}if(e!==0){if(e===2&&(i=lc(n),i!==0&&(r=i,e=zc(n,i))),e===1)throw t=Do,Ci(n,0),Gr(n,r),Xe(n,pe()),t;if(e===6)Gr(n,r);else{if(i=n.current.alternate,!(r&30)&&!ww(i)&&(e=cl(n,r),e===2&&(s=lc(n),s!==0&&(r=s,e=zc(n,s))),e===1))throw t=Do,Ci(n,0),Gr(n,r),Xe(n,pe()),t;switch(n.finishedWork=i,n.finishedLanes=r,e){case 0:case 1:throw Error(D(345));case 2:Si(n,qe,yn);break;case 3:if(Gr(n,r),(r&130023424)===r&&(e=nd+500-pe(),10<e)){if(Wa(n,0)!==0)break;if(i=n.suspendedLanes,(i&r)!==r){Ue(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=pc(Si.bind(null,n,qe,yn),e);break}Si(n,qe,yn);break;case 4:if(Gr(n,r),(r&4194240)===r)break;for(e=n.eventTimes,i=-1;0<r;){var o=31-jt(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=pe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*vw(r/1960))-r,10<r){n.timeoutHandle=pc(Si.bind(null,n,qe,yn),r);break}Si(n,qe,yn);break;case 5:Si(n,qe,yn);break;default:throw Error(D(329))}}}return Xe(n,pe()),n.callbackNode===t?Jp.bind(null,n):null}function zc(n,e){var t=oo;return n.current.memoizedState.isDehydrated&&(Ci(n,e).flags|=256),n=cl(n,e),n!==2&&(e=qe,qe=t,e!==null&&Mc(e)),n}function Mc(n){qe===null?qe=n:qe.push.apply(qe,n)}function ww(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var i=t[r],s=i.getSnapshot;i=i.value;try{if(!Kt(s(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Gr(n,e){for(e&=~td,e&=~Gl,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-jt(e),r=1<<t;n[t]=-1,e&=~r}}function zh(n){if(G&6)throw Error(D(327));fs();var e=Wa(n,0);if(!(e&1))return Xe(n,pe()),null;var t=cl(n,e);if(n.tag!==0&&t===2){var r=lc(n);r!==0&&(e=r,t=zc(n,r))}if(t===1)throw t=Do,Ci(n,0),Gr(n,e),Xe(n,pe()),t;if(t===6)throw Error(D(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,Si(n,qe,yn),Xe(n,pe()),null}function rd(n,e){var t=G;G|=1;try{return n(e)}finally{G=t,G===0&&(ks=pe()+500,Kl&&mi())}}function bi(n){Xr!==null&&Xr.tag===0&&!(G&6)&&fs();var e=G;G|=1;var t=Et.transition,r=Z;try{if(Et.transition=null,Z=1,n)return n()}finally{Z=r,Et.transition=t,G=e,!(G&6)&&mi()}}function id(){et=rs.current,se(rs)}function Ci(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,G0(t)),we!==null)for(t=we.return;t!==null;){var r=t;switch(Ff(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Xa();break;case 3:ws(),se(Ge),se(Me),Hf();break;case 5:Wf(r);break;case 4:ws();break;case 13:se(ae);break;case 19:se(ae);break;case 10:jf(r.type._context);break;case 22:case 23:id()}t=t.return}if(xe=n,we=n=oi(n.current,null),Pe=et=e,ke=0,Do=null,td=Gl=Li=0,qe=oo=null,xi!==null){for(e=0;e<xi.length;e++)if(t=xi[e],r=t.interleaved,r!==null){t.interleaved=null;var i=r.next,s=t.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}t.pending=r}xi=null}return n}function Up(n,e){do{var t=we;try{if(Uf(),Na.current=ol,sl){for(var r=ue.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}sl=!1}if(Oi=0,Ie=Se=ue=null,io=!1,Co=0,ed.current=null,t===null||t.return===null){ke=1,Do=e,we=null;break}e:{var s=n,o=t.return,a=t,u=e;if(e=Pe,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var g=d.alternate;g?(d.updateQueue=g.updateQueue,d.memoizedState=g.memoizedState,d.lanes=g.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=Ih(o);if(p!==null){p.flags&=-257,xh(p,o,a,s,e),p.mode&1&&Th(s,c,e),e=p,u=c;var v=e.updateQueue;if(v===null){var w=new Set;w.add(u),e.updateQueue=w}else v.add(u);break e}else{if(!(e&1)){Th(s,c,e),sd();break e}u=Error(D(426))}}else if(oe&&a.mode&1){var A=Ih(o);if(A!==null){!(A.flags&65536)&&(A.flags|=256),xh(A,o,a,s,e),$f(Ss(u,a));break e}}s=u=Ss(u,a),ke!==4&&(ke=2),oo===null?oo=[s]:oo.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var y=xp(s,u,e);mh(s,y);break e;case 1:a=u;var m=s.type,S=s.stateNode;if(!(s.flags&128)&&(typeof m.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(ii===null||!ii.has(S)))){s.flags|=65536,e&=-e,s.lanes|=e;var I=Ap(s,a,e);mh(s,I);break e}}s=s.return}while(s!==null)}qp(t)}catch(N){e=N,we===t&&t!==null&&(we=t=t.return);continue}break}while(!0)}function jp(){var n=al.current;return al.current=ol,n===null?ol:n}function sd(){(ke===0||ke===3||ke===2)&&(ke=4),xe===null||!(Li&268435455)&&!(Gl&268435455)||Gr(xe,Pe)}function cl(n,e){var t=G;G|=2;var r=jp();(xe!==n||Pe!==e)&&(yn=null,Ci(n,e));do try{Sw();break}catch(i){Up(n,i)}while(!0);if(Uf(),G=t,al.current=r,we!==null)throw Error(D(261));return xe=null,Pe=0,ke}function Sw(){for(;we!==null;)Vp(we)}function kw(){for(;we!==null&&!Wv();)Vp(we)}function Vp(n){var e=Wp(n.alternate,n,et);n.memoizedProps=n.pendingProps,e===null?qp(n):we=e,ed.current=null}function qp(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=gw(t,e),t!==null){t.flags&=32767,we=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{ke=6,we=null;return}}else if(t=hw(t,e,et),t!==null){we=t;return}if(e=e.sibling,e!==null){we=e;return}we=e=n}while(e!==null);ke===0&&(ke=5)}function Si(n,e,t){var r=Z,i=Et.transition;try{Et.transition=null,Z=1,Tw(n,e,t,r)}finally{Et.transition=i,Z=r}return null}function Tw(n,e,t,r){do fs();while(Xr!==null);if(G&6)throw Error(D(327));t=n.finishedWork;var i=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(D(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(n0(n,s),n===xe&&(we=xe=null,Pe=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||ha||(ha=!0,Hp(Ka,function(){return fs(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=Et.transition,Et.transition=null;var o=Z;Z=1;var a=G;G|=4,ed.current=null,pw(n,t),Fp(t,n),j0(gc),Ha=!!hc,gc=hc=null,n.current=t,yw(t),Hv(),G=a,Z=o,Et.transition=s}else n.current=t;if(ha&&(ha=!1,Xr=n,ul=i),s=n.pendingLanes,s===0&&(ii=null),Yv(t.stateNode),Xe(n,pe()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)i=e[t],r(i.value,{componentStack:i.stack,digest:i.digest});if(ll)throw ll=!1,n=bc,bc=null,n;return ul&1&&n.tag!==0&&fs(),s=n.pendingLanes,s&1?n===Bc?ao++:(ao=0,Bc=n):ao=0,mi(),null}function fs(){if(Xr!==null){var n=Im(ul),e=Et.transition,t=Z;try{if(Et.transition=null,Z=16>n?16:n,Xr===null)var r=!1;else{if(n=Xr,Xr=null,ul=0,G&6)throw Error(D(331));var i=G;for(G|=4,b=n.current;b!==null;){var s=b,o=s.child;if(b.flags&16){var a=s.deletions;if(a!==null){for(var u=0;u<a.length;u++){var c=a[u];for(b=c;b!==null;){var d=b;switch(d.tag){case 0:case 11:case 15:so(8,d,s)}var h=d.child;if(h!==null)h.return=d,b=h;else for(;b!==null;){d=b;var g=d.sibling,p=d.return;if(Bp(d),d===c){b=null;break}if(g!==null){g.return=p,b=g;break}b=p}}}var v=s.alternate;if(v!==null){var w=v.child;if(w!==null){v.child=null;do{var A=w.sibling;w.sibling=null,w=A}while(w!==null)}}b=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,b=o;else e:for(;b!==null;){if(s=b,s.flags&2048)switch(s.tag){case 0:case 11:case 15:so(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,b=y;break e}b=s.return}}var m=n.current;for(b=m;b!==null;){o=b;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,b=S;else e:for(o=m;b!==null;){if(a=b,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:_l(9,a)}}catch(N){fe(a,a.return,N)}if(a===o){b=null;break e}var I=a.sibling;if(I!==null){I.return=a.return,b=I;break e}b=a.return}}if(G=i,mi(),ln&&typeof ln.onPostCommitFiberRoot=="function")try{ln.onPostCommitFiberRoot(Jl,n)}catch{}r=!0}return r}finally{Z=t,Et.transition=e}}return!1}function Mh(n,e,t){e=Ss(t,e),e=xp(n,e,1),n=ri(n,e,1),e=Ue(),n!==null&&(jo(n,1,e),Xe(n,e))}function fe(n,e,t){if(n.tag===3)Mh(n,n,t);else for(;e!==null;){if(e.tag===3){Mh(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ii===null||!ii.has(r))){n=Ss(t,n),n=Ap(e,n,1),e=ri(e,n,1),n=Ue(),e!==null&&(jo(e,1,n),Xe(e,n));break}}e=e.return}}function Iw(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=Ue(),n.pingedLanes|=n.suspendedLanes&t,xe===n&&(Pe&t)===t&&(ke===4||ke===3&&(Pe&130023424)===Pe&&500>pe()-nd?Ci(n,0):td|=t),Xe(n,e)}function Kp(n,e){e===0&&(n.mode&1?(e=ra,ra<<=1,!(ra&130023424)&&(ra=4194304)):e=1);var t=Ue();n=zr(n,e),n!==null&&(jo(n,e,t),Xe(n,t))}function xw(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),Kp(n,t)}function Aw(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,i=n.memoizedState;i!==null&&(t=i.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(D(314))}r!==null&&r.delete(e),Kp(n,t)}var Wp;Wp=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||Ge.current)We=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return We=!1,dw(n,e,t);We=!!(n.flags&131072)}else We=!1,oe&&e.flags&1048576&&Gm(e,el,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Da(n,e),n=e.pendingProps;var i=ps(e,Me.current);cs(e,t),i=Gf(null,e,r,n,i,t);var s=Yf();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ye(r)?(s=!0,Qa(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,qf(e),i.updater=Wl,e.stateNode=i,i._reactInternals=e,Ic(e,r,n,t),e=Ec(null,e,r,!0,s,t)):(e.tag=0,oe&&s&&Mf(e),$e(null,e,i,t),e=e.child),e;case 16:r=e.elementType;e:{switch(Da(n,e),n=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Cw(r),n=bt(r,n),i){case 0:e=Ac(null,e,r,n,t);break e;case 1:e=Ch(null,e,r,n,t);break e;case 11:e=Ah(null,e,r,n,t);break e;case 14:e=Eh(null,e,r,bt(r.type,n),t);break e}throw Error(D(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:bt(r,i),Ac(n,e,r,i,t);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:bt(r,i),Ch(n,e,r,i,t);case 3:e:{if(Pp(e),n===null)throw Error(D(387));r=e.pendingProps,s=e.memoizedState,i=s.element,Zm(n,e),rl(e,r,null,t);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Ss(Error(D(423)),e),e=Nh(n,e,r,t,i);break e}else if(r!==i){i=Ss(Error(D(424)),e),e=Nh(n,e,r,t,i);break e}else for(tt=ni(e.stateNode.containerInfo.firstChild),it=e,oe=!0,Ft=null,t=rp(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(ys(),r===i){e=Mr(n,e,t);break e}$e(n,e,r,t)}e=e.child}return e;case 5:return ip(e),n===null&&Sc(e),r=e.type,i=e.pendingProps,s=n!==null?n.memoizedProps:null,o=i.children,mc(r,i)?o=null:s!==null&&mc(r,s)&&(e.flags|=32),Np(n,e),$e(n,e,o,t),e.child;case 6:return n===null&&Sc(e),null;case 13:return Dp(n,e,t);case 4:return Kf(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=vs(e,null,r,t):$e(n,e,r,t),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:bt(r,i),Ah(n,e,r,i,t);case 7:return $e(n,e,e.pendingProps,t),e.child;case 8:return $e(n,e,e.pendingProps.children,t),e.child;case 12:return $e(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,ne(tl,r._currentValue),r._currentValue=o,s!==null)if(Kt(s.value,o)){if(s.children===i.children&&!Ge.current){e=Mr(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=Rr(-1,t&-t),u.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?u.next=u:(u.next=d.next,d.next=u),c.pending=u}}s.lanes|=t,u=s.alternate,u!==null&&(u.lanes|=t),kc(s.return,t,e),a.lanes|=t;break}u=u.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(D(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),kc(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}$e(n,e,i.children,t),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,cs(e,t),i=Nt(i),r=r(i),e.flags|=1,$e(n,e,r,t),e.child;case 14:return r=e.type,i=bt(r,e.pendingProps),i=bt(r.type,i),Eh(n,e,r,i,t);case 15:return Ep(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:bt(r,i),Da(n,e),e.tag=1,Ye(r)?(n=!0,Qa(e)):n=!1,cs(e,t),tp(e,r,i),Ic(e,r,i,t),Ec(null,e,r,!0,n,t);case 19:return Rp(n,e,t);case 22:return Cp(n,e,t)}throw Error(D(156,e.tag))};function Hp(n,e){return wm(n,e)}function Ew(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function It(n,e,t,r){return new Ew(n,e,t,r)}function od(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Cw(n){if(typeof n=="function")return od(n)?1:0;if(n!=null){if(n=n.$$typeof,n===Af)return 11;if(n===Ef)return 14}return 2}function oi(n,e){var t=n.alternate;return t===null?(t=It(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function La(n,e,t,r,i,s){var o=2;if(r=n,typeof n=="function")od(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case Hi:return Ni(t.children,i,s,e);case xf:o=8,i|=8;break;case Hu:return n=It(12,t,e,i|2),n.elementType=Hu,n.lanes=s,n;case _u:return n=It(13,t,e,i),n.elementType=_u,n.lanes=s,n;case Gu:return n=It(19,t,e,i),n.elementType=Gu,n.lanes=s,n;case nm:return Yl(t,i,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case em:o=10;break e;case tm:o=9;break e;case Af:o=11;break e;case Ef:o=14;break e;case Wr:o=16,r=null;break e}throw Error(D(130,n==null?n:typeof n,""))}return e=It(o,t,e,i),e.elementType=n,e.type=r,e.lanes=s,e}function Ni(n,e,t,r){return n=It(7,n,r,e),n.lanes=t,n}function Yl(n,e,t,r){return n=It(22,n,r,e),n.elementType=nm,n.lanes=t,n.stateNode={isHidden:!1},n}function Bu(n,e,t){return n=It(6,n,null,e),n.lanes=t,n}function zu(n,e,t){return e=It(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function Nw(n,e,t,r,i){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=pu(0),this.expirationTimes=pu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pu(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function ad(n,e,t,r,i,s,o,a,u){return n=new Nw(n,e,t,a,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=It(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},qf(s),n}function Pw(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Wi,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function _p(n){if(!n)return fi;n=n._reactInternals;e:{if(Ji(n)!==n||n.tag!==1)throw Error(D(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ye(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(D(171))}if(n.tag===1){var t=n.type;if(Ye(t))return Hm(n,t,e)}return e}function Gp(n,e,t,r,i,s,o,a,u){return n=ad(t,r,!0,n,i,s,o,a,u),n.context=_p(null),t=n.current,r=Ue(),i=si(t),s=Rr(r,i),s.callback=e??null,ri(t,s,i),n.current.lanes=i,jo(n,i,r),Xe(n,r),n}function Xl(n,e,t,r){var i=e.current,s=Ue(),o=si(i);return t=_p(t),e.context===null?e.context=t:e.pendingContext=t,e=Rr(s,o),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=ri(i,e,o),n!==null&&(Vt(n,i,o,s),Ca(n,i,o)),o}function fl(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Fh(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function ld(n,e){Fh(n,e),(n=n.alternate)&&Fh(n,e)}function Dw(){return null}var Yp=typeof reportError=="function"?reportError:function(n){console.error(n)};function ud(n){this._internalRoot=n}Ql.prototype.render=ud.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(D(409));Xl(n,e,null,null)};Ql.prototype.unmount=ud.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;bi(function(){Xl(null,n,null,null)}),e[Br]=null}};function Ql(n){this._internalRoot=n}Ql.prototype.unstable_scheduleHydration=function(n){if(n){var e=Em();n={blockedOn:null,target:n,priority:e};for(var t=0;t<_r.length&&e!==0&&e<_r[t].priority;t++);_r.splice(t,0,n),t===0&&Nm(n)}};function cd(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Zl(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function $h(){}function Rw(n,e,t,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=fl(o);s.call(c)}}var o=Gp(e,r,n,0,null,!1,!1,"",$h);return n._reactRootContainer=o,n[Br]=o.current,To(n.nodeType===8?n.parentNode:n),bi(),o}for(;i=n.lastChild;)n.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=fl(u);a.call(c)}}var u=ad(n,0,!1,null,null,!1,!1,"",$h);return n._reactRootContainer=u,n[Br]=u.current,To(n.nodeType===8?n.parentNode:n),bi(function(){Xl(e,u,t,r)}),u}function eu(n,e,t,r,i){var s=t._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var u=fl(o);a.call(u)}}Xl(e,o,n,i)}else o=Rw(t,e,n,i,r);return fl(o)}xm=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=Ys(e.pendingLanes);t!==0&&(Pf(e,t|1),Xe(e,pe()),!(G&6)&&(ks=pe()+500,mi()))}break;case 13:bi(function(){var r=zr(n,1);if(r!==null){var i=Ue();Vt(r,n,1,i)}}),ld(n,1)}};Df=function(n){if(n.tag===13){var e=zr(n,134217728);if(e!==null){var t=Ue();Vt(e,n,134217728,t)}ld(n,134217728)}};Am=function(n){if(n.tag===13){var e=si(n),t=zr(n,e);if(t!==null){var r=Ue();Vt(t,n,e,r)}ld(n,e)}};Em=function(){return Z};Cm=function(n,e){var t=Z;try{return Z=n,e()}finally{Z=t}};sc=function(n,e,t){switch(e){case"input":if(Qu(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var i=ql(r);if(!i)throw Error(D(90));im(r),Qu(r,i)}}}break;case"textarea":om(n,t);break;case"select":e=t.value,e!=null&&os(n,!!t.multiple,e,!1)}};hm=rd;gm=bi;var Ow={usingClientEntryPoint:!1,Events:[qo,Xi,ql,fm,dm,rd]},qs={findFiberByHostInstance:Ii,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},Lw={bundleType:qs.bundleType,version:qs.version,rendererPackageName:qs.rendererPackageName,rendererConfig:qs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Jr.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=ym(n),n===null?null:n.stateNode},findFiberByHostInstance:qs.findFiberByHostInstance||Dw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ga=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ga.isDisabled&&ga.supportsFiber)try{Jl=ga.inject(Lw),ln=ga}catch{}}lt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ow;lt.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!cd(e))throw Error(D(200));return Pw(n,e,null,t)};lt.createRoot=function(n,e){if(!cd(n))throw Error(D(299));var t=!1,r="",i=Yp;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=ad(n,1,!1,null,null,t,!1,r,i),n[Br]=e.current,To(n.nodeType===8?n.parentNode:n),new ud(e)};lt.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(D(188)):(n=Object.keys(n).join(","),Error(D(268,n)));return n=ym(e),n=n===null?null:n.stateNode,n};lt.flushSync=function(n){return bi(n)};lt.hydrate=function(n,e,t){if(!Zl(e))throw Error(D(200));return eu(null,n,e,!0,t)};lt.hydrateRoot=function(n,e,t){if(!cd(n))throw Error(D(405));var r=t!=null&&t.hydratedSources||null,i=!1,s="",o=Yp;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=Gp(e,null,n,1,t??null,i,!1,s,o),n[Br]=e.current,To(n),r)for(n=0;n<r.length;n++)t=r[n],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new Ql(e)};lt.render=function(n,e,t){if(!Zl(e))throw Error(D(200));return eu(null,n,e,!1,t)};lt.unmountComponentAtNode=function(n){if(!Zl(n))throw Error(D(40));return n._reactRootContainer?(bi(function(){eu(null,null,n,!1,function(){n._reactRootContainer=null,n[Br]=null})}),!0):!1};lt.unstable_batchedUpdates=rd;lt.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!Zl(t))throw Error(D(200));if(n==null||n._reactInternals===void 0)throw Error(D(38));return eu(n,e,t,!1,r)};lt.version="18.2.0-next-9e3b772b8-20220608";function Xp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Xp)}catch(n){console.error(n)}}Xp(),Gg.exports=lt;var bw=Gg.exports,Jh=bw;Ku.createRoot=Jh.createRoot,Ku.hydrateRoot=Jh.hydrateRoot;var W;(function(n){n[n.Canceled=1]="Canceled",n[n.Unknown=2]="Unknown",n[n.InvalidArgument=3]="InvalidArgument",n[n.DeadlineExceeded=4]="DeadlineExceeded",n[n.NotFound=5]="NotFound",n[n.AlreadyExists=6]="AlreadyExists",n[n.PermissionDenied=7]="PermissionDenied",n[n.ResourceExhausted=8]="ResourceExhausted",n[n.FailedPrecondition=9]="FailedPrecondition",n[n.Aborted=10]="Aborted",n[n.OutOfRange=11]="OutOfRange",n[n.Unimplemented=12]="Unimplemented",n[n.Internal=13]="Internal",n[n.Unavailable=14]="Unavailable",n[n.DataLoss=15]="DataLoss",n[n.Unauthenticated=16]="Unauthenticated"})(W||(W={}));function Uh(n){const e=W[n];return typeof e!="string"?n.toString():e[0].toLowerCase()+e.substring(1).replace(/[A-Z]/g,t=>"_"+t.toLowerCase())}class Q extends Error{constructor(e,t=W.Unknown,r,i,s){super(Bw(e,t)),this.name="ConnectError",Object.setPrototypeOf(this,new.target.prototype),this.rawMessage=e,this.code=t,this.metadata=new Headers(r??{}),this.details=i??[],this.cause=s}static from(e,t=W.Unknown){return e instanceof Q?e:e instanceof Error?e.name=="AbortError"?new Q(e.message,W.Canceled):new Q(e.message,t,void 0,void 0,e):new Q(String(e),t,void 0,void 0,e)}static[Symbol.hasInstance](e){return e instanceof Error?Object.getPrototypeOf(e)===Q.prototype?!0:e.name==="ConnectError"&&"code"in e&&typeof e.code=="number"&&"metadata"in e&&"details"in e&&Array.isArray(e.details)&&"rawMessage"in e&&typeof e.rawMessage=="string"&&"cause"in e:!1}findDetails(e){const t="typeName"in e?{findMessage:i=>i===e.typeName?e:void 0}:e,r=[];for(const i of this.details){if("getType"in i){t.findMessage(i.getType().typeName)&&r.push(i);continue}const s=t.findMessage(i.type);if(s)try{r.push(s.fromBinary(i.value))}catch{}}return r}}function Bw(n,e){return n.length?`[${Uh(e)}] ${n}`:`[${Uh(e)}]`}function he(n,e){if(!n)throw new Error(e)}const zw=34028234663852886e22,Mw=-34028234663852886e22,Fw=4294967295,$w=2147483647,Jw=-2147483648;function ba(n){if(typeof n!="number")throw new Error("invalid int 32: "+typeof n);if(!Number.isInteger(n)||n>$w||n<Jw)throw new Error("invalid int 32: "+n)}function Fc(n){if(typeof n!="number")throw new Error("invalid uint 32: "+typeof n);if(!Number.isInteger(n)||n>Fw||n<0)throw new Error("invalid uint 32: "+n)}function Qp(n){if(typeof n!="number")throw new Error("invalid float 32: "+typeof n);if(Number.isFinite(n)&&(n>zw||n<Mw))throw new Error("invalid float 32: "+n)}const Zp=Symbol("@bufbuild/protobuf/enum-type");function Uw(n){const e=n[Zp];return he(e,"missing enum type on enum object"),e}function ey(n,e,t,r){n[Zp]=ty(e,t.map(i=>({no:i.no,name:i.name,localName:n[i.no]})))}function ty(n,e,t){const r=Object.create(null),i=Object.create(null),s=[];for(const o of e){const a=ny(o);s.push(a),r[o.name]=a,i[o.no]=a}return{typeName:n,values:s,findName(o){return r[o]},findNumber(o){return i[o]}}}function jw(n,e,t){const r={};for(const i of e){const s=ny(i);r[s.localName]=s.no,r[s.no]=s.localName}return ey(r,n,e),r}function ny(n){return"localName"in n?n:Object.assign(Object.assign({},n),{localName:n.name})}class O{equals(e){return this.getType().runtime.util.equals(this.getType(),this,e)}clone(){return this.getType().runtime.util.clone(this)}fromBinary(e,t){const r=this.getType(),i=r.runtime.bin,s=i.makeReadOptions(t);return i.readMessage(this,s.readerFactory(e),e.byteLength,s),this}fromJson(e,t){const r=this.getType(),i=r.runtime.json,s=i.makeReadOptions(t);return i.readMessage(r,e,s,this),this}fromJsonString(e,t){let r;try{r=JSON.parse(e)}catch(i){throw new Error(`cannot decode ${this.getType().typeName} from JSON: ${i instanceof Error?i.message:String(i)}`)}return this.fromJson(r,t)}toBinary(e){const t=this.getType(),r=t.runtime.bin,i=r.makeWriteOptions(e),s=i.writerFactory();return r.writeMessage(this,s,i),s.finish()}toJson(e){const t=this.getType(),r=t.runtime.json,i=r.makeWriteOptions(e);return r.writeMessage(this,i)}toJsonString(e){var t;const r=this.toJson(e);return JSON.stringify(r,null,(t=e==null?void 0:e.prettySpaces)!==null&&t!==void 0?t:0)}toJSON(){return this.toJson({emitDefaultValues:!0})}getType(){return Object.getPrototypeOf(this).constructor}}function Vw(n,e,t,r){var i;const s=(i=r==null?void 0:r.localName)!==null&&i!==void 0?i:e.substring(e.lastIndexOf(".")+1),o={[s]:function(a){n.util.initFields(this),n.util.initPartial(a,this)}}[s];return Object.setPrototypeOf(o.prototype,new O),Object.assign(o,{runtime:n,typeName:e,fields:n.util.newFieldList(t),fromBinary(a,u){return new o().fromBinary(a,u)},fromJson(a,u){return new o().fromJson(a,u)},fromJsonString(a,u){return new o().fromJsonString(a,u)},equals(a,u){return n.util.equals(o,a,u)}}),o}function qw(){let n=0,e=0;for(let r=0;r<28;r+=7){let i=this.buf[this.pos++];if(n|=(i&127)<<r,!(i&128))return this.assertBounds(),[n,e]}let t=this.buf[this.pos++];if(n|=(t&15)<<28,e=(t&112)>>4,!(t&128))return this.assertBounds(),[n,e];for(let r=3;r<=31;r+=7){let i=this.buf[this.pos++];if(e|=(i&127)<<r,!(i&128))return this.assertBounds(),[n,e]}throw new Error("invalid varint")}function Mu(n,e,t){for(let s=0;s<28;s=s+7){const o=n>>>s,a=!(!(o>>>7)&&e==0),u=(a?o|128:o)&255;if(t.push(u),!a)return}const r=n>>>28&15|(e&7)<<4,i=!!(e>>3);if(t.push((i?r|128:r)&255),!!i){for(let s=3;s<31;s=s+7){const o=e>>>s,a=!!(o>>>7),u=(a?o|128:o)&255;if(t.push(u),!a)return}t.push(e>>>31&1)}}const Ba=4294967296;function jh(n){const e=n[0]==="-";e&&(n=n.slice(1));const t=1e6;let r=0,i=0;function s(o,a){const u=Number(n.slice(o,a));i*=t,r=r*t+u,r>=Ba&&(i=i+(r/Ba|0),r=r%Ba)}return s(-24,-18),s(-18,-12),s(-12,-6),s(-6),e?iy(r,i):fd(r,i)}function Kw(n,e){let t=fd(n,e);const r=t.hi&2147483648;r&&(t=iy(t.lo,t.hi));const i=ry(t.lo,t.hi);return r?"-"+i:i}function ry(n,e){if({lo:n,hi:e}=Ww(n,e),e<=2097151)return String(Ba*e+n);const t=n&16777215,r=(n>>>24|e<<8)&16777215,i=e>>16&65535;let s=t+r*6777216+i*6710656,o=r+i*8147497,a=i*2;const u=1e7;return s>=u&&(o+=Math.floor(s/u),s%=u),o>=u&&(a+=Math.floor(o/u),o%=u),a.toString()+Vh(o)+Vh(s)}function Ww(n,e){return{lo:n>>>0,hi:e>>>0}}function fd(n,e){return{lo:n|0,hi:e|0}}function iy(n,e){return e=~e,n?n=~n+1:e+=1,fd(n,e)}const Vh=n=>{const e=String(n);return"0000000".slice(e.length)+e};function qh(n,e){if(n>=0){for(;n>127;)e.push(n&127|128),n=n>>>7;e.push(n)}else{for(let t=0;t<9;t++)e.push(n&127|128),n=n>>7;e.push(1)}}function Hw(){let n=this.buf[this.pos++],e=n&127;if(!(n&128))return this.assertBounds(),e;if(n=this.buf[this.pos++],e|=(n&127)<<7,!(n&128))return this.assertBounds(),e;if(n=this.buf[this.pos++],e|=(n&127)<<14,!(n&128))return this.assertBounds(),e;if(n=this.buf[this.pos++],e|=(n&127)<<21,!(n&128))return this.assertBounds(),e;n=this.buf[this.pos++],e|=(n&15)<<28;for(let t=5;n&128&&t<10;t++)n=this.buf[this.pos++];if(n&128)throw new Error("invalid varint");return this.assertBounds(),e>>>0}var Kh={};function _w(){const n=new DataView(new ArrayBuffer(8));if(typeof BigInt=="function"&&typeof n.getBigInt64=="function"&&typeof n.getBigUint64=="function"&&typeof n.setBigInt64=="function"&&typeof n.setBigUint64=="function"&&(typeof process!="object"||typeof Kh!="object"||Kh.BUF_BIGINT_DISABLE!=="1")){const i=BigInt("-9223372036854775808"),s=BigInt("9223372036854775807"),o=BigInt("0"),a=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(u){const c=typeof u=="bigint"?u:BigInt(u);if(c>s||c<i)throw new Error(`int64 invalid: ${u}`);return c},uParse(u){const c=typeof u=="bigint"?u:BigInt(u);if(c>a||c<o)throw new Error(`uint64 invalid: ${u}`);return c},enc(u){return n.setBigInt64(0,this.parse(u),!0),{lo:n.getInt32(0,!0),hi:n.getInt32(4,!0)}},uEnc(u){return n.setBigInt64(0,this.uParse(u),!0),{lo:n.getInt32(0,!0),hi:n.getInt32(4,!0)}},dec(u,c){return n.setInt32(0,u,!0),n.setInt32(4,c,!0),n.getBigInt64(0,!0)},uDec(u,c){return n.setInt32(0,u,!0),n.setInt32(4,c,!0),n.getBigUint64(0,!0)}}}const t=i=>he(/^-?[0-9]+$/.test(i),`int64 invalid: ${i}`),r=i=>he(/^[0-9]+$/.test(i),`uint64 invalid: ${i}`);return{zero:"0",supported:!1,parse(i){return typeof i!="string"&&(i=i.toString()),t(i),i},uParse(i){return typeof i!="string"&&(i=i.toString()),r(i),i},enc(i){return typeof i!="string"&&(i=i.toString()),t(i),jh(i)},uEnc(i){return typeof i!="string"&&(i=i.toString()),r(i),jh(i)},dec(i,s){return Kw(i,s)},uDec(i,s){return ry(i,s)}}}const ie=_w();var E;(function(n){n[n.DOUBLE=1]="DOUBLE",n[n.FLOAT=2]="FLOAT",n[n.INT64=3]="INT64",n[n.UINT64=4]="UINT64",n[n.INT32=5]="INT32",n[n.FIXED64=6]="FIXED64",n[n.FIXED32=7]="FIXED32",n[n.BOOL=8]="BOOL",n[n.STRING=9]="STRING",n[n.BYTES=12]="BYTES",n[n.UINT32=13]="UINT32",n[n.SFIXED32=15]="SFIXED32",n[n.SFIXED64=16]="SFIXED64",n[n.SINT32=17]="SINT32",n[n.SINT64=18]="SINT64"})(E||(E={}));var di;(function(n){n[n.BIGINT=0]="BIGINT",n[n.STRING=1]="STRING"})(di||(di={}));function Vr(n,e,t){if(e===t)return!0;if(n==E.BYTES){if(!(e instanceof Uint8Array)||!(t instanceof Uint8Array)||e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}switch(n){case E.UINT64:case E.FIXED64:case E.INT64:case E.SFIXED64:case E.SINT64:return e==t}return!1}function Ts(n,e){switch(n){case E.BOOL:return!1;case E.UINT64:case E.FIXED64:case E.INT64:case E.SFIXED64:case E.SINT64:return e==0?ie.zero:"0";case E.DOUBLE:case E.FLOAT:return 0;case E.BYTES:return new Uint8Array(0);case E.STRING:return"";default:return 0}}function sy(n,e){switch(n){case E.BOOL:return e===!1;case E.STRING:return e==="";case E.BYTES:return e instanceof Uint8Array&&!e.byteLength;default:return e==0}}var ye;(function(n){n[n.Varint=0]="Varint",n[n.Bit64=1]="Bit64",n[n.LengthDelimited=2]="LengthDelimited",n[n.StartGroup=3]="StartGroup",n[n.EndGroup=4]="EndGroup",n[n.Bit32=5]="Bit32"})(ye||(ye={}));class Gw{constructor(e){this.stack=[],this.textEncoder=e??new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let e=0;for(let i=0;i<this.chunks.length;i++)e+=this.chunks[i].length;let t=new Uint8Array(e),r=0;for(let i=0;i<this.chunks.length;i++)t.set(this.chunks[i],r),r+=this.chunks[i].length;return this.chunks=[],t}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),t=this.stack.pop();if(!t)throw new Error("invalid state, fork stack empty");return this.chunks=t.chunks,this.buf=t.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,t){return this.uint32((e<<3|t)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(Fc(e);e>127;)this.buf.push(e&127|128),e=e>>>7;return this.buf.push(e),this}int32(e){return ba(e),qh(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let t=this.textEncoder.encode(e);return this.uint32(t.byteLength),this.raw(t)}float(e){Qp(e);let t=new Uint8Array(4);return new DataView(t.buffer).setFloat32(0,e,!0),this.raw(t)}double(e){let t=new Uint8Array(8);return new DataView(t.buffer).setFloat64(0,e,!0),this.raw(t)}fixed32(e){Fc(e);let t=new Uint8Array(4);return new DataView(t.buffer).setUint32(0,e,!0),this.raw(t)}sfixed32(e){ba(e);let t=new Uint8Array(4);return new DataView(t.buffer).setInt32(0,e,!0),this.raw(t)}sint32(e){return ba(e),e=(e<<1^e>>31)>>>0,qh(e,this.buf),this}sfixed64(e){let t=new Uint8Array(8),r=new DataView(t.buffer),i=ie.enc(e);return r.setInt32(0,i.lo,!0),r.setInt32(4,i.hi,!0),this.raw(t)}fixed64(e){let t=new Uint8Array(8),r=new DataView(t.buffer),i=ie.uEnc(e);return r.setInt32(0,i.lo,!0),r.setInt32(4,i.hi,!0),this.raw(t)}int64(e){let t=ie.enc(e);return Mu(t.lo,t.hi,this.buf),this}sint64(e){let t=ie.enc(e),r=t.hi>>31,i=t.lo<<1^r,s=(t.hi<<1|t.lo>>>31)^r;return Mu(i,s,this.buf),this}uint64(e){let t=ie.uEnc(e);return Mu(t.lo,t.hi,this.buf),this}}class Yw{constructor(e,t){this.varint64=qw,this.uint32=Hw,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength),this.textDecoder=t??new TextDecoder}tag(){let e=this.uint32(),t=e>>>3,r=e&7;if(t<=0||r<0||r>5)throw new Error("illegal tag: field no "+t+" wire type "+r);return[t,r]}skip(e,t){let r=this.pos;switch(e){case ye.Varint:for(;this.buf[this.pos++]&128;);break;case ye.Bit64:this.pos+=4;case ye.Bit32:this.pos+=4;break;case ye.LengthDelimited:let i=this.uint32();this.pos+=i;break;case ye.StartGroup:for(;;){const[s,o]=this.tag();if(o===ye.EndGroup){if(t!==void 0&&s!==t)throw new Error("invalid end group tag");break}this.skip(o,s)}break;default:throw new Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(r,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let e=this.uint32();return e>>>1^-(e&1)}int64(){return ie.dec(...this.varint64())}uint64(){return ie.uDec(...this.varint64())}sint64(){let[e,t]=this.varint64(),r=-(e&1);return e=(e>>>1|(t&1)<<31)^r,t=t>>>1^r,ie.dec(e,t)}bool(){let[e,t]=this.varint64();return e!==0||t!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return ie.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return ie.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),t=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(t,t+e)}string(){return this.textDecoder.decode(this.bytes())}}function Xw(n,e,t,r){let i;return{typeName:e,extendee:t,get field(){if(!i){const s=typeof r=="function"?r():r;s.name=e.split(".").pop(),s.jsonName=`[${e}]`,i=n.util.newFieldList([s]).list()[0]}return i},runtime:n}}function oy(n){const e=n.field.localName,t=Object.create(null);return t[e]=Qw(n),[t,()=>t[e]]}function Qw(n){const e=n.field;if(e.repeated)return[];if(e.default!==void 0)return e.default;switch(e.kind){case"enum":return e.T.values[0].no;case"scalar":return Ts(e.T,e.L);case"message":const t=e.T,r=new t;return t.fieldWrapper?t.fieldWrapper.unwrapField(r):r;case"map":throw"map fields are not allowed to be extensions"}}function Zw(n,e){if(!e.repeated&&(e.kind=="enum"||e.kind=="scalar")){for(let t=n.length-1;t>=0;--t)if(n[t].no==e.no)return[n[t]];return[]}return n.filter(t=>t.no===e.no)}let xr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),tu=[];for(let n=0;n<xr.length;n++)tu[xr[n].charCodeAt(0)]=n;tu[45]=xr.indexOf("+");tu[95]=xr.indexOf("/");const dd={dec(n){let e=n.length*3/4;n[n.length-2]=="="?e-=2:n[n.length-1]=="="&&(e-=1);let t=new Uint8Array(e),r=0,i=0,s,o=0;for(let a=0;a<n.length;a++){if(s=tu[n.charCodeAt(a)],s===void 0)switch(n[a]){case"=":i=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(i){case 0:o=s,i=1;break;case 1:t[r++]=o<<2|(s&48)>>4,o=s,i=2;break;case 2:t[r++]=(o&15)<<4|(s&60)>>2,o=s,i=3;break;case 3:t[r++]=(o&3)<<6|s,i=0;break}}if(i==1)throw Error("invalid base64 string.");return t.subarray(0,r)},enc(n){let e="",t=0,r,i=0;for(let s=0;s<n.length;s++)switch(r=n[s],t){case 0:e+=xr[r>>2],i=(r&3)<<4,t=1;break;case 1:e+=xr[i|r>>4],i=(r&15)<<2,t=2;break;case 2:e+=xr[i|r>>6],e+=xr[r&63],t=0;break}return t&&(e+=xr[i],e+="=",t==1&&(e+="=")),e}};function e1(n,e,t){ly(e,n);const r=e.runtime.bin.makeReadOptions(t),i=Zw(n.getType().runtime.bin.listUnknownFields(n),e.field),[s,o]=oy(e);for(const a of i)e.runtime.bin.readField(s,r.readerFactory(a.data),e.field,a.wireType,r);return o()}function t1(n,e,t,r){ly(e,n);const i=e.runtime.bin.makeReadOptions(r),s=e.runtime.bin.makeWriteOptions(r);if(ay(n,e)){const c=n.getType().runtime.bin.listUnknownFields(n).filter(d=>d.no!=e.field.no);n.getType().runtime.bin.discardUnknownFields(n);for(const d of c)n.getType().runtime.bin.onUnknownField(n,d.no,d.wireType,d.data)}const o=s.writerFactory();let a=e.field;!a.opt&&!a.repeated&&(a.kind=="enum"||a.kind=="scalar")&&(a=Object.assign(Object.assign({},e.field),{opt:!0})),e.runtime.bin.writeField(a,t,o,s);const u=i.readerFactory(o.finish());for(;u.pos<u.len;){const[c,d]=u.tag(),h=u.skip(d,c);n.getType().runtime.bin.onUnknownField(n,c,d,h)}}function ay(n,e){const t=n.getType();return e.extendee.typeName===t.typeName&&!!t.runtime.bin.listUnknownFields(n).find(r=>r.no==e.field.no)}function ly(n,e){he(n.extendee.typeName==e.getType().typeName,`extension ${n.typeName} can only be applied to message ${n.extendee.typeName}`)}function uy(n,e){const t=n.localName;if(n.repeated)return e[t].length>0;if(n.oneof)return e[n.oneof.localName].case===t;switch(n.kind){case"enum":case"scalar":return n.opt||n.req?e[t]!==void 0:n.kind=="enum"?e[t]!==n.T.values[0].no:!sy(n.T,e[t]);case"message":return e[t]!==void 0;case"map":return Object.keys(e[t]).length>0}}function Wh(n,e){const t=n.localName,r=!n.opt&&!n.req;if(n.repeated)e[t]=[];else if(n.oneof)e[n.oneof.localName]={case:void 0};else switch(n.kind){case"map":e[t]={};break;case"enum":e[t]=r?n.T.values[0].no:void 0;break;case"scalar":e[t]=r?Ts(n.T,n.L):void 0;break;case"message":e[t]=void 0;break}}function Ar(n,e){if(n===null||typeof n!="object"||!Object.getOwnPropertyNames(O.prototype).every(r=>r in n&&typeof n[r]=="function"))return!1;const t=n.getType();return t===null||typeof t!="function"||!("typeName"in t)||typeof t.typeName!="string"?!1:e===void 0?!0:t.typeName==e.typeName}function cy(n,e){return Ar(e)||!n.fieldWrapper?e:n.fieldWrapper.wrapField(e)}E.DOUBLE,E.FLOAT,E.INT64,E.UINT64,E.INT32,E.UINT32,E.BOOL,E.STRING,E.BYTES;const Hh={ignoreUnknownFields:!1},_h={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0};function n1(n){return n?Object.assign(Object.assign({},Hh),n):Hh}function r1(n){return n?Object.assign(Object.assign({},_h),n):_h}const dl=Symbol(),za=Symbol();function i1(){return{makeReadOptions:n1,makeWriteOptions:r1,readMessage(n,e,t,r){if(e==null||Array.isArray(e)||typeof e!="object")throw new Error(`cannot decode message ${n.typeName} from JSON: ${Yt(e)}`);r=r??new n;const i=new Map,s=t.typeRegistry;for(const[o,a]of Object.entries(e)){const u=n.fields.findJsonName(o);if(u){if(u.oneof){if(a===null&&u.kind=="scalar")continue;const c=i.get(u.oneof);if(c!==void 0)throw new Error(`cannot decode message ${n.typeName} from JSON: multiple keys for oneof "${u.oneof.name}" present: "${c}", "${o}"`);i.set(u.oneof,o)}Gh(r,a,u,t,n)}else{let c=!1;if(s!=null&&s.findExtension&&o.startsWith("[")&&o.endsWith("]")){const d=s.findExtension(o.substring(1,o.length-1));if(d&&d.extendee.typeName==n.typeName){c=!0;const[h,g]=oy(d);Gh(h,a,d.field,t,d),t1(r,d,g(),t)}}if(!c&&!t.ignoreUnknownFields)throw new Error(`cannot decode message ${n.typeName} from JSON: key "${o}" is unknown`)}}return r},writeMessage(n,e){const t=n.getType(),r={};let i;try{for(i of t.fields.byNumber()){if(!uy(i,n)){if(i.req)throw"required field not set";if(!e.emitDefaultValues||!o1(i))continue}const o=i.oneof?n[i.oneof.localName].value:n[i.localName],a=Yh(i,o,e);a!==void 0&&(r[e.useProtoFieldName?i.name:i.jsonName]=a)}const s=e.typeRegistry;if(s!=null&&s.findExtensionFor)for(const o of t.runtime.bin.listUnknownFields(n)){const a=s.findExtensionFor(t.typeName,o.no);if(a&&ay(n,a)){const u=e1(n,a,e),c=Yh(a.field,u,e);c!==void 0&&(r[a.field.jsonName]=c)}}}catch(s){const o=i?`cannot encode field ${t.typeName}.${i.name} to JSON`:`cannot encode message ${t.typeName} to JSON`,a=s instanceof Error?s.message:String(s);throw new Error(o+(a.length>0?`: ${a}`:""))}return r},readScalar(n,e,t){return lo(n,e,t??di.BIGINT,!0)},writeScalar(n,e,t){if(e!==void 0&&(t||sy(n,e)))return Ma(n,e)},debug:Yt}}function Yt(n){if(n===null)return"null";switch(typeof n){case"object":return Array.isArray(n)?"array":"object";case"string":return n.length>100?"string":`"${n.split('"').join('\\"')}"`;default:return String(n)}}function Gh(n,e,t,r,i){let s=t.localName;if(t.repeated){if(he(t.kind!="map"),e===null)return;if(!Array.isArray(e))throw new Error(`cannot decode field ${i.typeName}.${t.name} from JSON: ${Yt(e)}`);const o=n[s];for(const a of e){if(a===null)throw new Error(`cannot decode field ${i.typeName}.${t.name} from JSON: ${Yt(a)}`);switch(t.kind){case"message":o.push(t.T.fromJson(a,r));break;case"enum":const u=Fu(t.T,a,r.ignoreUnknownFields,!0);u!==za&&o.push(u);break;case"scalar":try{o.push(lo(t.T,a,t.L,!0))}catch(c){let d=`cannot decode field ${i.typeName}.${t.name} from JSON: ${Yt(a)}`;throw c instanceof Error&&c.message.length>0&&(d+=`: ${c.message}`),new Error(d)}break}}}else if(t.kind=="map"){if(e===null)return;if(typeof e!="object"||Array.isArray(e))throw new Error(`cannot decode field ${i.typeName}.${t.name} from JSON: ${Yt(e)}`);const o=n[s];for(const[a,u]of Object.entries(e)){if(u===null)throw new Error(`cannot decode field ${i.typeName}.${t.name} from JSON: map value null`);let c;try{c=s1(t.K,a)}catch(d){let h=`cannot decode map key for field ${i.typeName}.${t.name} from JSON: ${Yt(e)}`;throw d instanceof Error&&d.message.length>0&&(h+=`: ${d.message}`),new Error(h)}switch(t.V.kind){case"message":o[c]=t.V.T.fromJson(u,r);break;case"enum":const d=Fu(t.V.T,u,r.ignoreUnknownFields,!0);d!==za&&(o[c]=d);break;case"scalar":try{o[c]=lo(t.V.T,u,di.BIGINT,!0)}catch(h){let g=`cannot decode map value for field ${i.typeName}.${t.name} from JSON: ${Yt(e)}`;throw h instanceof Error&&h.message.length>0&&(g+=`: ${h.message}`),new Error(g)}break}}}else switch(t.oneof&&(n=n[t.oneof.localName]={case:s},s="value"),t.kind){case"message":const o=t.T;if(e===null&&o.typeName!="google.protobuf.Value")return;let a=n[s];Ar(a)?a.fromJson(e,r):(n[s]=a=o.fromJson(e,r),o.fieldWrapper&&!t.oneof&&(n[s]=o.fieldWrapper.unwrapField(a)));break;case"enum":const u=Fu(t.T,e,r.ignoreUnknownFields,!1);switch(u){case dl:Wh(t,n);break;case za:break;default:n[s]=u;break}break;case"scalar":try{const c=lo(t.T,e,t.L,!1);switch(c){case dl:Wh(t,n);break;default:n[s]=c;break}}catch(c){let d=`cannot decode field ${i.typeName}.${t.name} from JSON: ${Yt(e)}`;throw c instanceof Error&&c.message.length>0&&(d+=`: ${c.message}`),new Error(d)}break}}function s1(n,e){if(n===E.BOOL)switch(e){case"true":e=!0;break;case"false":e=!1;break}return lo(n,e,di.BIGINT,!0).toString()}function lo(n,e,t,r){if(e===null)return r?Ts(n,t):dl;switch(n){case E.DOUBLE:case E.FLOAT:if(e==="NaN")return Number.NaN;if(e==="Infinity")return Number.POSITIVE_INFINITY;if(e==="-Infinity")return Number.NEGATIVE_INFINITY;if(e===""||typeof e=="string"&&e.trim().length!==e.length||typeof e!="string"&&typeof e!="number")break;const i=Number(e);if(Number.isNaN(i)||!Number.isFinite(i))break;return n==E.FLOAT&&Qp(i),i;case E.INT32:case E.FIXED32:case E.SFIXED32:case E.SINT32:case E.UINT32:let s;if(typeof e=="number"?s=e:typeof e=="string"&&e.length>0&&e.trim().length===e.length&&(s=Number(e)),s===void 0)break;return n==E.UINT32||n==E.FIXED32?Fc(s):ba(s),s;case E.INT64:case E.SFIXED64:case E.SINT64:if(typeof e!="number"&&typeof e!="string")break;const o=ie.parse(e);return t?o.toString():o;case E.FIXED64:case E.UINT64:if(typeof e!="number"&&typeof e!="string")break;const a=ie.uParse(e);return t?a.toString():a;case E.BOOL:if(typeof e!="boolean")break;return e;case E.STRING:if(typeof e!="string")break;try{encodeURIComponent(e)}catch{throw new Error("invalid UTF8")}return e;case E.BYTES:if(e==="")return new Uint8Array(0);if(typeof e!="string")break;return dd.dec(e)}throw new Error}function Fu(n,e,t,r){if(e===null)return n.typeName=="google.protobuf.NullValue"?0:r?n.values[0].no:dl;switch(typeof e){case"number":if(Number.isInteger(e))return e;break;case"string":const i=n.findName(e);if(i!==void 0)return i.no;if(t)return za;break}throw new Error(`cannot decode enum ${n.typeName} from JSON: ${Yt(e)}`)}function o1(n){return n.repeated||n.kind=="map"?!0:!(n.oneof||n.kind=="message"||n.opt||n.req)}function Yh(n,e,t){if(n.kind=="map"){he(typeof e=="object"&&e!=null);const r={},i=Object.entries(e);switch(n.V.kind){case"scalar":for(const[o,a]of i)r[o.toString()]=Ma(n.V.T,a);break;case"message":for(const[o,a]of i)r[o.toString()]=a.toJson(t);break;case"enum":const s=n.V.T;for(const[o,a]of i)r[o.toString()]=$u(s,a,t.enumAsInteger);break}return t.emitDefaultValues||i.length>0?r:void 0}if(n.repeated){he(Array.isArray(e));const r=[];switch(n.kind){case"scalar":for(let i=0;i<e.length;i++)r.push(Ma(n.T,e[i]));break;case"enum":for(let i=0;i<e.length;i++)r.push($u(n.T,e[i],t.enumAsInteger));break;case"message":for(let i=0;i<e.length;i++)r.push(e[i].toJson(t));break}return t.emitDefaultValues||r.length>0?r:void 0}switch(n.kind){case"scalar":return Ma(n.T,e);case"enum":return $u(n.T,e,t.enumAsInteger);case"message":return cy(n.T,e).toJson(t)}}function $u(n,e,t){var r;if(he(typeof e=="number"),n.typeName=="google.protobuf.NullValue")return null;if(t)return e;const i=n.findNumber(e);return(r=i==null?void 0:i.name)!==null&&r!==void 0?r:e}function Ma(n,e){switch(n){case E.INT32:case E.SFIXED32:case E.SINT32:case E.FIXED32:case E.UINT32:return he(typeof e=="number"),e;case E.FLOAT:case E.DOUBLE:return he(typeof e=="number"),Number.isNaN(e)?"NaN":e===Number.POSITIVE_INFINITY?"Infinity":e===Number.NEGATIVE_INFINITY?"-Infinity":e;case E.STRING:return he(typeof e=="string"),e;case E.BOOL:return he(typeof e=="boolean"),e;case E.UINT64:case E.FIXED64:case E.INT64:case E.SFIXED64:case E.SINT64:return he(typeof e=="bigint"||typeof e=="string"||typeof e=="number"),e.toString();case E.BYTES:return he(e instanceof Uint8Array),dd.enc(e)}}const Vi=Symbol("@bufbuild/protobuf/unknown-fields"),Xh={readUnknownFields:!0,readerFactory:n=>new Yw(n)},Qh={writeUnknownFields:!0,writerFactory:()=>new Gw};function a1(n){return n?Object.assign(Object.assign({},Xh),n):Xh}function l1(n){return n?Object.assign(Object.assign({},Qh),n):Qh}function u1(){return{makeReadOptions:a1,makeWriteOptions:l1,listUnknownFields(n){var e;return(e=n[Vi])!==null&&e!==void 0?e:[]},discardUnknownFields(n){delete n[Vi]},writeUnknownFields(n,e){const r=n[Vi];if(r)for(const i of r)e.tag(i.no,i.wireType).raw(i.data)},onUnknownField(n,e,t,r){const i=n;Array.isArray(i[Vi])||(i[Vi]=[]),i[Vi].push({no:e,wireType:t,data:r})},readMessage(n,e,t,r,i){const s=n.getType(),o=i?e.len:e.pos+t;let a,u;for(;e.pos<o&&([a,u]=e.tag(),!(i===!0&&u==ye.EndGroup));){const c=s.fields.find(a);if(!c){const d=e.skip(u,a);r.readUnknownFields&&this.onUnknownField(n,a,u,d);continue}Zh(n,e,c,u,r)}if(i&&(u!=ye.EndGroup||a!==t))throw new Error("invalid end group tag")},readField:Zh,writeMessage(n,e,t){const r=n.getType();for(const i of r.fields.byNumber()){if(!uy(i,n)){if(i.req)throw new Error(`cannot encode field ${r.typeName}.${i.name} to binary: required field not set`);continue}const s=i.oneof?n[i.oneof.localName].value:n[i.localName];eg(i,s,e,t)}return t.writeUnknownFields&&this.writeUnknownFields(n,e),e},writeField(n,e,t,r){e!==void 0&&eg(n,e,t,r)}}}function Zh(n,e,t,r,i){let{repeated:s,localName:o}=t;switch(t.oneof&&(n=n[t.oneof.localName],n.case!=o&&delete n.value,n.case=o,o="value"),t.kind){case"scalar":case"enum":const a=t.kind=="enum"?E.INT32:t.T;let u=hl;if(t.kind=="scalar"&&t.L>0&&(u=f1),s){let g=n[o];if(r==ye.LengthDelimited&&a!=E.STRING&&a!=E.BYTES){let v=e.uint32()+e.pos;for(;e.pos<v;)g.push(u(e,a))}else g.push(u(e,a))}else n[o]=u(e,a);break;case"message":const c=t.T;s?n[o].push(Fa(e,new c,i,t)):Ar(n[o])?Fa(e,n[o],i,t):(n[o]=Fa(e,new c,i,t),c.fieldWrapper&&!t.oneof&&!t.repeated&&(n[o]=c.fieldWrapper.unwrapField(n[o])));break;case"map":let[d,h]=c1(t,e,i);n[o][d]=h;break}}function Fa(n,e,t,r){const i=e.getType().runtime.bin,s=r==null?void 0:r.delimited;return i.readMessage(e,n,s?r.no:n.uint32(),t,s),e}function c1(n,e,t){const r=e.uint32(),i=e.pos+r;let s,o;for(;e.pos<i;){const[a]=e.tag();switch(a){case 1:s=hl(e,n.K);break;case 2:switch(n.V.kind){case"scalar":o=hl(e,n.V.T);break;case"enum":o=e.int32();break;case"message":o=Fa(e,new n.V.T,t,void 0);break}break}}if(s===void 0&&(s=Ts(n.K,di.BIGINT)),typeof s!="string"&&typeof s!="number"&&(s=s.toString()),o===void 0)switch(n.V.kind){case"scalar":o=Ts(n.V.T,di.BIGINT);break;case"enum":o=n.V.T.values[0].no;break;case"message":o=new n.V.T;break}return[s,o]}function f1(n,e){const t=hl(n,e);return typeof t=="bigint"?t.toString():t}function hl(n,e){switch(e){case E.STRING:return n.string();case E.BOOL:return n.bool();case E.DOUBLE:return n.double();case E.FLOAT:return n.float();case E.INT32:return n.int32();case E.INT64:return n.int64();case E.UINT64:return n.uint64();case E.FIXED64:return n.fixed64();case E.BYTES:return n.bytes();case E.FIXED32:return n.fixed32();case E.SFIXED32:return n.sfixed32();case E.SFIXED64:return n.sfixed64();case E.SINT64:return n.sint64();case E.UINT32:return n.uint32();case E.SINT32:return n.sint32()}}function eg(n,e,t,r){he(e!==void 0);const i=n.repeated;switch(n.kind){case"scalar":case"enum":let s=n.kind=="enum"?E.INT32:n.T;if(i)if(he(Array.isArray(e)),n.packed)h1(t,s,n.no,e);else for(const o of e)uo(t,s,n.no,o);else uo(t,s,n.no,e);break;case"message":if(i){he(Array.isArray(e));for(const o of e)tg(t,r,n,o)}else tg(t,r,n,e);break;case"map":he(typeof e=="object"&&e!=null);for(const[o,a]of Object.entries(e))d1(t,r,n,o,a);break}}function d1(n,e,t,r,i){n.tag(t.no,ye.LengthDelimited),n.fork();let s=r;switch(t.K){case E.INT32:case E.FIXED32:case E.UINT32:case E.SFIXED32:case E.SINT32:s=Number.parseInt(r);break;case E.BOOL:he(r=="true"||r=="false"),s=r=="true";break}switch(uo(n,t.K,1,s),t.V.kind){case"scalar":uo(n,t.V.T,2,i);break;case"enum":uo(n,E.INT32,2,i);break;case"message":he(i!==void 0),n.tag(2,ye.LengthDelimited).bytes(i.toBinary(e));break}n.join()}function tg(n,e,t,r){const i=cy(t.T,r);t.delimited?n.tag(t.no,ye.StartGroup).raw(i.toBinary(e)).tag(t.no,ye.EndGroup):n.tag(t.no,ye.LengthDelimited).bytes(i.toBinary(e))}function uo(n,e,t,r){he(r!==void 0);let[i,s]=fy(e);n.tag(t,i)[s](r)}function h1(n,e,t,r){if(!r.length)return;n.tag(t,ye.LengthDelimited).fork();let[,i]=fy(e);for(let s=0;s<r.length;s++)n[i](r[s]);n.join()}function fy(n){let e=ye.Varint;switch(n){case E.BYTES:case E.STRING:e=ye.LengthDelimited;break;case E.DOUBLE:case E.FIXED64:case E.SFIXED64:e=ye.Bit64;break;case E.FIXED32:case E.SFIXED32:case E.FLOAT:e=ye.Bit32;break}const t=E[n].toLowerCase();return[e,t]}function g1(){return{setEnumType:ey,initPartial(n,e){if(n===void 0)return;const t=e.getType();for(const r of t.fields.byMember()){const i=r.localName,s=e,o=n;if(o[i]!=null)switch(r.kind){case"oneof":const a=o[i].case;if(a===void 0)continue;const u=r.findField(a);let c=o[i].value;u&&u.kind=="message"&&!Ar(c,u.T)?c=new u.T(c):u&&u.kind==="scalar"&&u.T===E.BYTES&&(c=Ks(c)),s[i]={case:a,value:c};break;case"scalar":case"enum":let d=o[i];r.T===E.BYTES&&(d=r.repeated?d.map(Ks):Ks(d)),s[i]=d;break;case"map":switch(r.V.kind){case"scalar":case"enum":if(r.V.T===E.BYTES)for(const[p,v]of Object.entries(o[i]))s[i][p]=Ks(v);else Object.assign(s[i],o[i]);break;case"message":const g=r.V.T;for(const p of Object.keys(o[i])){let v=o[i][p];g.fieldWrapper||(v=new g(v)),s[i][p]=v}break}break;case"message":const h=r.T;if(r.repeated)s[i]=o[i].map(g=>Ar(g,h)?g:new h(g));else{const g=o[i];h.fieldWrapper?h.typeName==="google.protobuf.BytesValue"?s[i]=Ks(g):s[i]=g:s[i]=Ar(g,h)?g:new h(g)}break}}},equals(n,e,t){return e===t?!0:!e||!t?!1:n.fields.byMember().every(r=>{const i=e[r.localName],s=t[r.localName];if(r.repeated){if(i.length!==s.length)return!1;switch(r.kind){case"message":return i.every((o,a)=>r.T.equals(o,s[a]));case"scalar":return i.every((o,a)=>Vr(r.T,o,s[a]));case"enum":return i.every((o,a)=>Vr(E.INT32,o,s[a]))}throw new Error(`repeated cannot contain ${r.kind}`)}switch(r.kind){case"message":let o=i,a=s;return r.T.fieldWrapper&&(o!==void 0&&!Ar(o)&&(o=r.T.fieldWrapper.wrapField(o)),a!==void 0&&!Ar(a)&&(a=r.T.fieldWrapper.wrapField(a))),r.T.equals(o,a);case"enum":return Vr(E.INT32,i,s);case"scalar":return Vr(r.T,i,s);case"oneof":if(i.case!==s.case)return!1;const u=r.findField(i.case);if(u===void 0)return!0;switch(u.kind){case"message":return u.T.equals(i.value,s.value);case"enum":return Vr(E.INT32,i.value,s.value);case"scalar":return Vr(u.T,i.value,s.value)}throw new Error(`oneof cannot contain ${u.kind}`);case"map":const c=Object.keys(i).concat(Object.keys(s));switch(r.V.kind){case"message":const d=r.V.T;return c.every(g=>d.equals(i[g],s[g]));case"enum":return c.every(g=>Vr(E.INT32,i[g],s[g]));case"scalar":const h=r.V.T;return c.every(g=>Vr(h,i[g],s[g]))}break}})},clone(n){const e=n.getType(),t=new e,r=t;for(const i of e.fields.byMember()){const s=n[i.localName];let o;if(i.repeated)o=s.map(ma);else if(i.kind=="map"){o=r[i.localName];for(const[a,u]of Object.entries(s))o[a]=ma(u)}else i.kind=="oneof"?o=i.findField(s.case)?{case:s.case,value:ma(s.value)}:{case:void 0}:o=ma(s);r[i.localName]=o}for(const i of e.runtime.bin.listUnknownFields(n))e.runtime.bin.onUnknownField(r,i.no,i.wireType,i.data);return t}}}function ma(n){if(n===void 0)return n;if(Ar(n))return n.clone();if(n instanceof Uint8Array){const e=new Uint8Array(n.byteLength);return e.set(n),e}return n}function Ks(n){return n instanceof Uint8Array?n:new Uint8Array(n)}function m1(n,e,t){return{syntax:n,json:i1(),bin:u1(),util:Object.assign(Object.assign({},g1()),{newFieldList:e,initFields:t}),makeMessageType(r,i,s){return Vw(this,r,i,s)},makeEnum:jw,makeEnumType:ty,getEnumType:Uw,makeExtension(r,i,s){return Xw(this,r,i,s)}}}class p1{constructor(e,t){this._fields=e,this._normalizer=t}findJsonName(e){if(!this.jsonNames){const t={};for(const r of this.list())t[r.jsonName]=t[r.name]=r;this.jsonNames=t}return this.jsonNames[e]}find(e){if(!this.numbers){const t={};for(const r of this.list())t[r.no]=r;this.numbers=t}return this.numbers[e]}list(){return this.all||(this.all=this._normalizer(this._fields)),this.all}byNumber(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort((e,t)=>e.no-t.no)),this.numbersAsc}byMember(){if(!this.members){this.members=[];const e=this.members;let t;for(const r of this.list())r.oneof?r.oneof!==t&&(t=r.oneof,e.push(t)):e.push(r)}return this.members}}function dy(n,e){const t=hy(n);return e?t:T1(k1(t))}function y1(n){return dy(n,!1)}const v1=hy;function hy(n){let e=!1;const t=[];for(let r=0;r<n.length;r++){let i=n.charAt(r);switch(i){case"_":e=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":t.push(i),e=!1;break;default:e&&(e=!1,i=i.toUpperCase()),t.push(i);break}}return t.join("")}const w1=new Set(["constructor","toString","toJSON","valueOf"]),S1=new Set(["getType","clone","equals","fromBinary","fromJson","fromJsonString","toBinary","toJson","toJsonString","toObject"]),gy=n=>`${n}$`,k1=n=>S1.has(n)?gy(n):n,T1=n=>w1.has(n)?gy(n):n;class I1{constructor(e){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.req=!1,this.default=void 0,this.fields=[],this.name=e,this.localName=y1(e)}addField(e){he(e.oneof===this,`field ${e.name} not one of ${this.name}`),this.fields.push(e)}findField(e){if(!this._lookup){this._lookup=Object.create(null);for(let t=0;t<this.fields.length;t++)this._lookup[this.fields[t].localName]=this.fields[t]}return this._lookup[e]}}function x1(n,e){var t,r,i,s,o,a;const u=[];let c;for(const d of typeof n=="function"?n():n){const h=d;if(h.localName=dy(d.name,d.oneof!==void 0),h.jsonName=(t=d.jsonName)!==null&&t!==void 0?t:v1(d.name),h.repeated=(r=d.repeated)!==null&&r!==void 0?r:!1,d.kind=="scalar"&&(h.L=(i=d.L)!==null&&i!==void 0?i:di.BIGINT),h.delimited=(s=d.delimited)!==null&&s!==void 0?s:!1,h.req=(o=d.req)!==null&&o!==void 0?o:!1,h.opt=(a=d.opt)!==null&&a!==void 0?a:!1,d.packed===void 0&&(h.packed=d.kind=="enum"||d.kind=="scalar"&&d.T!=E.BYTES&&d.T!=E.STRING),d.oneof!==void 0){const g=typeof d.oneof=="string"?d.oneof:d.oneof.name;(!c||c.name!=g)&&(c=new I1(g)),h.oneof=c,c.addField(h)}u.push(h)}return u}const f=m1("proto3",n=>new p1(n,e=>x1(e)),n=>{for(const e of n.getType().fields.byMember()){if(e.opt)continue;const t=e.localName,r=n;if(e.repeated){r[t]=[];continue}switch(e.kind){case"oneof":r[t]={case:void 0};break;case"enum":r[t]=0;break;case"map":r[t]={};break;case"scalar":r[t]=Ts(e.T,e.L);break}}});var Je;(function(n){n[n.Unary=0]="Unary",n[n.ServerStreaming=1]="ServerStreaming",n[n.ClientStreaming=2]="ClientStreaming",n[n.BiDiStreaming=3]="BiDiStreaming"})(Je||(Je={}));var ng;(function(n){n[n.NoSideEffects=1]="NoSideEffects",n[n.Idempotent=2]="Idempotent"})(ng||(ng={}));class Ce extends O{constructor(e){super(),this.seconds=ie.zero,this.nanos=0,f.util.initPartial(e,this)}fromJson(e,t){if(typeof e!="string")throw new Error(`cannot decode google.protobuf.Timestamp from JSON: ${f.json.debug(e)}`);const r=e.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!r)throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");const i=Date.parse(r[1]+"-"+r[2]+"-"+r[3]+"T"+r[4]+":"+r[5]+":"+r[6]+(r[8]?r[8]:"Z"));if(Number.isNaN(i))throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");if(i<Date.parse("0001-01-01T00:00:00Z")||i>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot decode message google.protobuf.Timestamp from JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");return this.seconds=ie.parse(i/1e3),this.nanos=0,r[7]&&(this.nanos=parseInt("1"+r[7]+"0".repeat(9-r[7].length))-1e9),this}toJson(e){const t=Number(this.seconds)*1e3;if(t<Date.parse("0001-01-01T00:00:00Z")||t>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot encode google.protobuf.Timestamp to JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");if(this.nanos<0)throw new Error("cannot encode google.protobuf.Timestamp to JSON: nanos must not be negative");let r="Z";if(this.nanos>0){const i=(this.nanos+1e9).toString().substring(1);i.substring(3)==="000000"?r="."+i.substring(0,3)+"Z":i.substring(6)==="000"?r="."+i.substring(0,6)+"Z":r="."+i+"Z"}return new Date(t).toISOString().replace(".000Z",r)}toDate(){return new Date(Number(this.seconds)*1e3+Math.ceil(this.nanos/1e6))}static now(){return Ce.fromDate(new Date)}static fromDate(e){const t=e.getTime();return new Ce({seconds:ie.parse(Math.floor(t/1e3)),nanos:t%1e3*1e6})}static fromBinary(e,t){return new Ce().fromBinary(e,t)}static fromJson(e,t){return new Ce().fromJson(e,t)}static fromJsonString(e,t){return new Ce().fromJsonString(e,t)}static equals(e,t){return f.util.equals(Ce,e,t)}}Ce.runtime=f;Ce.typeName="google.protobuf.Timestamp";Ce.fields=f.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);class Nr extends O{constructor(e){super(),this.seconds=ie.zero,this.nanos=0,f.util.initPartial(e,this)}fromJson(e,t){if(typeof e!="string")throw new Error(`cannot decode google.protobuf.Duration from JSON: ${f.json.debug(e)}`);const r=e.match(/^(-?[0-9]+)(?:\.([0-9]+))?s/);if(r===null)throw new Error(`cannot decode google.protobuf.Duration from JSON: ${f.json.debug(e)}`);const i=Number(r[1]);if(i>315576e6||i<-315576e6)throw new Error(`cannot decode google.protobuf.Duration from JSON: ${f.json.debug(e)}`);if(this.seconds=ie.parse(i),typeof r[2]=="string"){const s=r[2]+"0".repeat(9-r[2].length);this.nanos=parseInt(s),(i<0||Object.is(i,-0))&&(this.nanos=-this.nanos)}return this}toJson(e){if(Number(this.seconds)>315576e6||Number(this.seconds)<-315576e6)throw new Error("cannot encode google.protobuf.Duration to JSON: value out of range");let t=this.seconds.toString();if(this.nanos!==0){let r=Math.abs(this.nanos).toString();r="0".repeat(9-r.length)+r,r.substring(3)==="000000"?r=r.substring(0,3):r.substring(6)==="000"&&(r=r.substring(0,6)),t+="."+r,this.nanos<0&&Number(this.seconds)==0&&(t="-"+t)}return t+"s"}static fromBinary(e,t){return new Nr().fromBinary(e,t)}static fromJson(e,t){return new Nr().fromJson(e,t)}static fromJsonString(e,t){return new Nr().fromJsonString(e,t)}static equals(e,t){return f.util.equals(Nr,e,t)}}Nr.runtime=f;Nr.typeName="google.protobuf.Duration";Nr.fields=f.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);class Qt extends O{constructor(e){super(),this.typeUrl="",this.value=new Uint8Array(0),f.util.initPartial(e,this)}toJson(e){var t;if(this.typeUrl==="")return{};const r=this.typeUrlToName(this.typeUrl),i=(t=e==null?void 0:e.typeRegistry)===null||t===void 0?void 0:t.findMessage(r);if(!i)throw new Error(`cannot encode message google.protobuf.Any to JSON: "${this.typeUrl}" is not in the type registry`);let o=i.fromBinary(this.value).toJson(e);return(r.startsWith("google.protobuf.")||o===null||Array.isArray(o)||typeof o!="object")&&(o={value:o}),o["@type"]=this.typeUrl,o}fromJson(e,t){var r;if(e===null||Array.isArray(e)||typeof e!="object")throw new Error(`cannot decode message google.protobuf.Any from JSON: expected object but got ${e===null?"null":Array.isArray(e)?"array":typeof e}`);if(Object.keys(e).length==0)return this;const i=e["@type"];if(typeof i!="string"||i=="")throw new Error('cannot decode message google.protobuf.Any from JSON: "@type" is empty');const s=this.typeUrlToName(i),o=(r=t==null?void 0:t.typeRegistry)===null||r===void 0?void 0:r.findMessage(s);if(!o)throw new Error(`cannot decode message google.protobuf.Any from JSON: ${i} is not in the type registry`);let a;if(s.startsWith("google.protobuf.")&&Object.prototype.hasOwnProperty.call(e,"value"))a=o.fromJson(e.value,t);else{const u=Object.assign({},e);delete u["@type"],a=o.fromJson(u,t)}return this.packFrom(a),this}packFrom(e){this.value=e.toBinary(),this.typeUrl=this.typeNameToUrl(e.getType().typeName)}unpackTo(e){return this.is(e.getType())?(e.fromBinary(this.value),!0):!1}unpack(e){if(this.typeUrl==="")return;const t=e.findMessage(this.typeUrlToName(this.typeUrl));if(t)return t.fromBinary(this.value)}is(e){if(this.typeUrl==="")return!1;const t=this.typeUrlToName(this.typeUrl);let r="";return typeof e=="string"?r=e:r=e.typeName,t===r}typeNameToUrl(e){return`type.googleapis.com/${e}`}typeUrlToName(e){if(!e.length)throw new Error(`invalid type url: ${e}`);const t=e.lastIndexOf("/"),r=t>=0?e.substring(t+1):e;if(!r.length)throw new Error(`invalid type url: ${e}`);return r}static pack(e){const t=new Qt;return t.packFrom(e),t}static fromBinary(e,t){return new Qt().fromBinary(e,t)}static fromJson(e,t){return new Qt().fromJson(e,t)}static fromJsonString(e,t){return new Qt().fromJsonString(e,t)}static equals(e,t){return f.util.equals(Qt,e,t)}}Qt.runtime=f;Qt.typeName="google.protobuf.Any";Qt.fields=f.util.newFieldList(()=>[{no:1,name:"type_url",kind:"scalar",T:9},{no:2,name:"value",kind:"scalar",T:12}]);class Zt extends O{constructor(e){super(),this.value=0,f.util.initPartial(e,this)}toJson(e){return f.json.writeScalar(E.DOUBLE,this.value,!0)}fromJson(e,t){try{this.value=f.json.readScalar(E.DOUBLE,e)}catch(r){let i='cannot decode message google.protobuf.DoubleValue from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new Zt().fromBinary(e,t)}static fromJson(e,t){return new Zt().fromJson(e,t)}static fromJsonString(e,t){return new Zt().fromJsonString(e,t)}static equals(e,t){return f.util.equals(Zt,e,t)}}Zt.runtime=f;Zt.typeName="google.protobuf.DoubleValue";Zt.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:1}]);Zt.fieldWrapper={wrapField(n){return new Zt({value:n})},unwrapField(n){return n.value}};class en extends O{constructor(e){super(),this.value=0,f.util.initPartial(e,this)}toJson(e){return f.json.writeScalar(E.FLOAT,this.value,!0)}fromJson(e,t){try{this.value=f.json.readScalar(E.FLOAT,e)}catch(r){let i='cannot decode message google.protobuf.FloatValue from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new en().fromBinary(e,t)}static fromJson(e,t){return new en().fromJson(e,t)}static fromJsonString(e,t){return new en().fromJsonString(e,t)}static equals(e,t){return f.util.equals(en,e,t)}}en.runtime=f;en.typeName="google.protobuf.FloatValue";en.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:2}]);en.fieldWrapper={wrapField(n){return new en({value:n})},unwrapField(n){return n.value}};class tn extends O{constructor(e){super(),this.value=ie.zero,f.util.initPartial(e,this)}toJson(e){return f.json.writeScalar(E.INT64,this.value,!0)}fromJson(e,t){try{this.value=f.json.readScalar(E.INT64,e)}catch(r){let i='cannot decode message google.protobuf.Int64Value from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new tn().fromBinary(e,t)}static fromJson(e,t){return new tn().fromJson(e,t)}static fromJsonString(e,t){return new tn().fromJsonString(e,t)}static equals(e,t){return f.util.equals(tn,e,t)}}tn.runtime=f;tn.typeName="google.protobuf.Int64Value";tn.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:3}]);tn.fieldWrapper={wrapField(n){return new tn({value:n})},unwrapField(n){return n.value}};class nn extends O{constructor(e){super(),this.value=ie.zero,f.util.initPartial(e,this)}toJson(e){return f.json.writeScalar(E.UINT64,this.value,!0)}fromJson(e,t){try{this.value=f.json.readScalar(E.UINT64,e)}catch(r){let i='cannot decode message google.protobuf.UInt64Value from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new nn().fromBinary(e,t)}static fromJson(e,t){return new nn().fromJson(e,t)}static fromJsonString(e,t){return new nn().fromJsonString(e,t)}static equals(e,t){return f.util.equals(nn,e,t)}}nn.runtime=f;nn.typeName="google.protobuf.UInt64Value";nn.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:4}]);nn.fieldWrapper={wrapField(n){return new nn({value:n})},unwrapField(n){return n.value}};class nt extends O{constructor(e){super(),this.value=0,f.util.initPartial(e,this)}toJson(e){return f.json.writeScalar(E.INT32,this.value,!0)}fromJson(e,t){try{this.value=f.json.readScalar(E.INT32,e)}catch(r){let i='cannot decode message google.protobuf.Int32Value from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new nt().fromBinary(e,t)}static fromJson(e,t){return new nt().fromJson(e,t)}static fromJsonString(e,t){return new nt().fromJsonString(e,t)}static equals(e,t){return f.util.equals(nt,e,t)}}nt.runtime=f;nt.typeName="google.protobuf.Int32Value";nt.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:5}]);nt.fieldWrapper={wrapField(n){return new nt({value:n})},unwrapField(n){return n.value}};class rn extends O{constructor(e){super(),this.value=0,f.util.initPartial(e,this)}toJson(e){return f.json.writeScalar(E.UINT32,this.value,!0)}fromJson(e,t){try{this.value=f.json.readScalar(E.UINT32,e)}catch(r){let i='cannot decode message google.protobuf.UInt32Value from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new rn().fromBinary(e,t)}static fromJson(e,t){return new rn().fromJson(e,t)}static fromJsonString(e,t){return new rn().fromJsonString(e,t)}static equals(e,t){return f.util.equals(rn,e,t)}}rn.runtime=f;rn.typeName="google.protobuf.UInt32Value";rn.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:13}]);rn.fieldWrapper={wrapField(n){return new rn({value:n})},unwrapField(n){return n.value}};class sn extends O{constructor(e){super(),this.value=!1,f.util.initPartial(e,this)}toJson(e){return f.json.writeScalar(E.BOOL,this.value,!0)}fromJson(e,t){try{this.value=f.json.readScalar(E.BOOL,e)}catch(r){let i='cannot decode message google.protobuf.BoolValue from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new sn().fromBinary(e,t)}static fromJson(e,t){return new sn().fromJson(e,t)}static fromJsonString(e,t){return new sn().fromJsonString(e,t)}static equals(e,t){return f.util.equals(sn,e,t)}}sn.runtime=f;sn.typeName="google.protobuf.BoolValue";sn.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:8}]);sn.fieldWrapper={wrapField(n){return new sn({value:n})},unwrapField(n){return n.value}};class He extends O{constructor(e){super(),this.value="",f.util.initPartial(e,this)}toJson(e){return f.json.writeScalar(E.STRING,this.value,!0)}fromJson(e,t){try{this.value=f.json.readScalar(E.STRING,e)}catch(r){let i='cannot decode message google.protobuf.StringValue from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new He().fromBinary(e,t)}static fromJson(e,t){return new He().fromJson(e,t)}static fromJsonString(e,t){return new He().fromJsonString(e,t)}static equals(e,t){return f.util.equals(He,e,t)}}He.runtime=f;He.typeName="google.protobuf.StringValue";He.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:9}]);He.fieldWrapper={wrapField(n){return new He({value:n})},unwrapField(n){return n.value}};class on extends O{constructor(e){super(),this.value=new Uint8Array(0),f.util.initPartial(e,this)}toJson(e){return f.json.writeScalar(E.BYTES,this.value,!0)}fromJson(e,t){try{this.value=f.json.readScalar(E.BYTES,e)}catch(r){let i='cannot decode message google.protobuf.BytesValue from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new on().fromBinary(e,t)}static fromJson(e,t){return new on().fromJson(e,t)}static fromJsonString(e,t){return new on().fromJsonString(e,t)}static equals(e,t){return f.util.equals(on,e,t)}}on.runtime=f;on.typeName="google.protobuf.BytesValue";on.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:12}]);on.fieldWrapper={wrapField(n){return new on({value:n})},unwrapField(n){return n.value}};function A1(n,e,t){try{const r=dd.dec(n);return e?e.fromBinary(r,t):r}catch(r){throw Q.from(r,W.DataLoss)}}function E1(n,e){const t={};for(const[r,i]of Object.entries(n.methods)){const s=e(Object.assign(Object.assign({},i),{localName:r,service:n}));s!=null&&(t[r]=s)}return t}const rg=1;function ig(n){let e,t=new Uint8Array(0);function r(i){const s=new Uint8Array(t.length+i.length);s.set(t),s.set(i,t.length),t=s}return new ReadableStream({start(){e=n.getReader()},async pull(i){let s;for(;;){if(s===void 0&&t.byteLength>=5){let u=0;for(let c=1;c<5;c++)u=(u<<8)+t[c];s={flags:t[0],length:u}}if(s!==void 0&&t.byteLength>=s.length+5)break;const a=await e.read();if(a.done)break;r(a.value)}if(s===void 0){if(t.byteLength==0){i.close();return}i.error(new Q("premature end of stream",W.DataLoss));return}const o=t.subarray(5,5+s.length);t=t.subarray(5+s.length),i.enqueue({flags:s.flags,data:o})}})}function sg(n,e){const t=new Uint8Array(e.length+5);t.set(e,5);const r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.setUint8(0,n),r.setUint32(1,e.length),t}var C1=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof __values=="function"?__values(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,u){o=n[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(c){s({value:c,done:a})},o)}},Ro=function(n){return this instanceof Ro?(this.v=n,this):new Ro(n)},N1=function(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i={},a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(p){return function(v){return Promise.resolve(v).then(p,h)}}function a(p,v){r[p]&&(i[p]=function(w){return new Promise(function(A,y){s.push([p,w,A,y])>1||u(p,w)})},v&&(i[p]=v(i[p])))}function u(p,v){try{c(r[p](v))}catch(w){g(s[0][3],w)}}function c(p){p.value instanceof Ro?Promise.resolve(p.value.v).then(d,h):g(s[0][2],p)}function d(p){u("next",p)}function h(p){u("throw",p)}function g(p,v){p(v),s.shift(),s.length&&u(s[0][0],s[0][1])}},P1=function(n){var e,t;return e={},r("next"),r("throw",function(i){throw i}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(i,s){e[i]=n[i]?function(o){return(t=!t)?{value:Ro(n[i](o)),done:!1}:s?s(o):o}:s}};function D1(n){return N1(this,arguments,function*(){yield Ro(yield*P1(C1(n)))})}var my=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof __values=="function"?__values(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,u){o=n[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(c){s({value:c,done:a})},o)}},Is=function(n){return this instanceof Is?(this.v=n,this):new Is(n)},R1=function(n){var e,t;return e={},r("next"),r("throw",function(i){throw i}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(i,s){e[i]=n[i]?function(o){return(t=!t)?{value:Is(n[i](o)),done:!1}:s?s(o):o}:s}},O1=function(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i={},a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(p){return function(v){return Promise.resolve(v).then(p,h)}}function a(p,v){r[p]&&(i[p]=function(w){return new Promise(function(A,y){s.push([p,w,A,y])>1||u(p,w)})},v&&(i[p]=v(i[p])))}function u(p,v){try{c(r[p](v))}catch(w){g(s[0][3],w)}}function c(p){p.value instanceof Is?Promise.resolve(p.value.v).then(d,h):g(s[0][2],p)}function d(p){u("next",p)}function h(p){u("throw",p)}function g(p,v){p(v),s.shift(),s.length&&u(s[0][0],s[0][1])}};function L1(n,e){return E1(n,t=>{switch(t.kind){case Je.Unary:return b1(e,n,t);case Je.ServerStreaming:return B1(e,n,t);case Je.ClientStreaming:return z1(e,n,t);case Je.BiDiStreaming:return M1(e,n,t);default:return null}})}function b1(n,e,t){return async function(r,i){var s,o;const a=await n.unary(e,t,i==null?void 0:i.signal,i==null?void 0:i.timeoutMs,i==null?void 0:i.headers,r,i==null?void 0:i.contextValues);return(s=i==null?void 0:i.onHeader)===null||s===void 0||s.call(i,a.header),(o=i==null?void 0:i.onTrailer)===null||o===void 0||o.call(i,a.trailer),a.message}}function B1(n,e,t){return function(r,i){return py(n.stream(e,t,i==null?void 0:i.signal,i==null?void 0:i.timeoutMs,i==null?void 0:i.headers,D1([r]),i==null?void 0:i.contextValues),i)}}function z1(n,e,t){return async function(r,i){var s,o,a,u,c,d;const h=await n.stream(e,t,i==null?void 0:i.signal,i==null?void 0:i.timeoutMs,i==null?void 0:i.headers,r,i==null?void 0:i.contextValues);(c=i==null?void 0:i.onHeader)===null||c===void 0||c.call(i,h.header);let g,p=0;try{for(var v=!0,w=my(h.message),A;A=await w.next(),s=A.done,!s;v=!0)u=A.value,v=!1,g=u,p++}catch(y){o={error:y}}finally{try{!v&&!s&&(a=w.return)&&await a.call(w)}finally{if(o)throw o.error}}if(!g)throw new Q("protocol error: missing response message",W.Unimplemented);if(p>1)throw new Q("protocol error: received extra messages for client streaming method",W.Unimplemented);return(d=i==null?void 0:i.onTrailer)===null||d===void 0||d.call(i,h.trailer),g}}function M1(n,e,t){return function(r,i){return py(n.stream(e,t,i==null?void 0:i.signal,i==null?void 0:i.timeoutMs,i==null?void 0:i.headers,r,i==null?void 0:i.contextValues),i)}}function py(n,e){const t=function(){return O1(this,arguments,function*(){var r,i;const s=yield Is(n);(r=e==null?void 0:e.onHeader)===null||r===void 0||r.call(e,s.header),yield Is(yield*R1(my(s.message))),(i=e==null?void 0:e.onTrailer)===null||i===void 0||i.call(e,s.trailer)})}()[Symbol.asyncIterator]();return{[Symbol.asyncIterator]:()=>({next:()=>t.next()})}}function F1(...n){const e=new AbortController,t=n.filter(i=>i!==void 0).concat(e.signal);for(const i of t){if(i.aborted){r.apply(i);break}i.addEventListener("abort",r)}function r(){e.signal.aborted||e.abort(yy(this));for(const i of t)i.removeEventListener("abort",r)}return e}function $1(n){const e=new AbortController,t=()=>{e.abort(new Q("the operation timed out",W.DeadlineExceeded))};let r;return n!==void 0&&(n<=0?t():r=setTimeout(t,n)),{signal:e.signal,cleanup:()=>clearTimeout(r)}}function yy(n){if(!n.aborted)return;if(n.reason!==void 0)return n.reason;const e=new Error("This operation was aborted");return e.name="AbortError",e}function og(){return{get(n){return n.id in this?this[n.id]:n.defaultValue},set(n,e){return this[n.id]=e,this},delete(n){return delete this[n.id],this}}}const Ju=128;function ag(n){const e=new Headers,t=new TextDecoder().decode(n).split(`\r
`);for(const r of t){if(r==="")continue;const i=r.indexOf(":");if(i>0){const s=r.substring(0,i).trim(),o=r.substring(i+1).trim();e.append(s,o)}}return e}const J1="Content-Type",U1="Grpc-Timeout",xs="Grpc-Status",vy="Grpc-Message",j1="Grpc-Status-Details-Bin",V1="X-User-Agent",q1="X-Grpc-Web",K1="application/grpc-web+proto",W1="application/grpc-web+json";class Pr extends O{constructor(e){super(),this.code=0,this.message="",this.details=[],f.util.initPartial(e,this)}static fromBinary(e,t){return new Pr().fromBinary(e,t)}static fromJson(e,t){return new Pr().fromJson(e,t)}static fromJsonString(e,t){return new Pr().fromJsonString(e,t)}static equals(e,t){return f.util.equals(Pr,e,t)}}Pr.runtime=f;Pr.typeName="google.rpc.Status";Pr.fields=f.util.newFieldList(()=>[{no:1,name:"code",kind:"scalar",T:5},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"details",kind:"message",T:Qt,repeated:!0}]);const H1="0";function wy(n){var e;const t=n.get(j1);if(t!=null){const i=A1(t,Pr);if(i.code==0)return;const s=new Q(i.message,i.code,n);return s.details=i.details.map(o=>({type:o.typeUrl.substring(o.typeUrl.lastIndexOf("/")+1),value:o.value})),s}const r=n.get(xs);if(r!=null){if(r===H1)return;const i=parseInt(r,10);return i in W?new Q(decodeURIComponent((e=n.get(vy))!==null&&e!==void 0?e:""),i,n):new Q(`invalid grpc-status: ${r}`,W.Internal,n)}}function lg(n,e,t){const r=typeof e=="string"?e:e.typeName,i=typeof t=="string"?t:t.name;return n.toString().replace(/\/?$/,`/${r}/${i}`)}function Sy(n,e){return e instanceof n?e:new n(e)}function _1(n,e){function t(r){return r.done===!0?r:{done:r.done,value:Sy(n,r.value)}}return{[Symbol.asyncIterator](){const r=e[Symbol.asyncIterator](),i={next:()=>r.next().then(t)};return r.throw!==void 0&&(i.throw=s=>r.throw(s).then(t)),r.return!==void 0&&(i.return=s=>r.return(s).then(t)),i}}}function ky(n,e){var t;return(t=e==null?void 0:e.concat().reverse().reduce((r,i)=>i(r),n))!==null&&t!==void 0?t:n}function G1(n){var e;const t=Object.assign({},n);return(e=t.ignoreUnknownFields)!==null&&e!==void 0||(t.ignoreUnknownFields=!0),t}function ug(n,e,t,r){const i=e?cg(n.I,r):fg(n.I,t);return{parse:(e?cg(n.O,r):fg(n.O,t)).parse,serialize:i.serialize}}function cg(n,e){return{parse(t){try{return n.fromBinary(t,e)}catch(r){const i=r instanceof Error?r.message:String(r);throw new Q(`parse binary: ${i}`,W.Internal)}},serialize(t){try{return t.toBinary(e)}catch(r){const i=r instanceof Error?r.message:String(r);throw new Q(`serialize binary: ${i}`,W.Internal)}}}}function fg(n,e){var t,r;const i=(t=e==null?void 0:e.textEncoder)!==null&&t!==void 0?t:new TextEncoder,s=(r=e==null?void 0:e.textDecoder)!==null&&r!==void 0?r:new TextDecoder,o=G1(e);return{parse(a){try{const u=s.decode(a);return n.fromJsonString(u,o)}catch(u){throw Q.from(u,W.InvalidArgument)}},serialize(a){try{const u=a.toJsonString(o);return i.encode(u)}catch(u){throw Q.from(u,W.Internal)}}}}function Y1(n){const e=ky(n.next,n.interceptors),[t,r,i]=Ty(n),s=Object.assign(Object.assign({},n.req),{message:Sy(n.req.method.I,n.req.message),signal:t});return e(s).then(o=>(i(),o),r)}function X1(n){const e=ky(n.next,n.interceptors),[t,r,i]=Ty(n),s=Object.assign(Object.assign({},n.req),{message:_1(n.req.method.I,n.req.message),signal:t});let o=!1;return t.addEventListener("abort",function(){var a,u;const c=n.req.message[Symbol.asyncIterator]();o||(a=c.throw)===null||a===void 0||a.call(c,this.reason).catch(()=>{}),(u=c.return)===null||u===void 0||u.call(c).catch(()=>{})}),e(s).then(a=>Object.assign(Object.assign({},a),{message:{[Symbol.asyncIterator](){const u=a.message[Symbol.asyncIterator]();return{next(){return u.next().then(c=>(c.done==!0&&(o=!0,i()),c),r)}}}}}),r)}function Ty(n){const{signal:e,cleanup:t}=$1(n.timeoutMs),r=F1(n.signal,e);return[r.signal,function(s){const o=Q.from(e.aborted?yy(e):s);return r.abort(o),t(),Promise.reject(o)},function(){t(),r.abort()}]}function Q1(){try{new Headers}catch{throw new Error("connect-web requires the fetch API. Are you running on an old version of Node.js? Node.js is not supported in Connect for Web - please stay tuned for Connect for Node.")}}function dg(n,e){const t=wy(n);if(t)throw e.forEach((r,i)=>{t.metadata.append(i,r)}),t;if(!e.has(xs)&&!n.has(xs))throw new Q("protocol error: missing status",W.Internal)}function hg(n,e,t,r){const i=new Headers(t??{});return i.set(J1,n?K1:W1),i.set(q1,"1"),i.set(V1,"connect-es/1.6.1"),e!==void 0&&i.set(U1,`${e}m`),i}function Z1(n){switch(n){case 400:return W.Internal;case 401:return W.Unauthenticated;case 403:return W.PermissionDenied;case 404:return W.Unimplemented;case 429:return W.Unavailable;case 502:return W.Unavailable;case 503:return W.Unavailable;case 504:return W.Unavailable;default:return W.Unknown}}function gg(n,e){var t;if(n>=200&&n<300)return{foundStatus:e.has(xs),headerError:wy(e)};throw new Q(decodeURIComponent((t=e.get(vy))!==null&&t!==void 0?t:`HTTP ${n}`),Z1(n),e)}var Ei=function(n){return this instanceof Ei?(this.v=n,this):new Ei(n)},eS=function(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i={},a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(p){return function(v){return Promise.resolve(v).then(p,h)}}function a(p,v){r[p]&&(i[p]=function(w){return new Promise(function(A,y){s.push([p,w,A,y])>1||u(p,w)})},v&&(i[p]=v(i[p])))}function u(p,v){try{c(r[p](v))}catch(w){g(s[0][3],w)}}function c(p){p.value instanceof Ei?Promise.resolve(p.value.v).then(d,h):g(s[0][2],p)}function d(p){u("next",p)}function h(p){u("throw",p)}function g(p,v){p(v),s.shift(),s.length&&u(s[0][0],s[0][1])}};function tS(n){var e;Q1();const t=(e=n.useBinaryFormat)!==null&&e!==void 0?e:!0;return{async unary(r,i,s,o,a,u,c){var d;const{serialize:h,parse:g}=ug(i,t,n.jsonOptions,n.binaryOptions);return o=o===void 0?n.defaultTimeoutMs:o<=0?void 0:o,await Y1({interceptors:n.interceptors,signal:s,timeoutMs:o,req:{stream:!1,service:r,method:i,url:lg(n.baseUrl,r,i),init:{method:"POST",credentials:(d=n.credentials)!==null&&d!==void 0?d:"same-origin",redirect:"error",mode:"cors"},header:hg(t,o,a),contextValues:c??og(),message:u},next:async p=>{var v;const A=await((v=n.fetch)!==null&&v!==void 0?v:globalThis.fetch)(p.url,Object.assign(Object.assign({},p.init),{headers:p.header,signal:p.signal,body:sg(0,h(p.message))})),{headerError:y}=gg(A.status,A.headers);if(!A.body)throw y!==void 0?y:"missing response body";const m=ig(A.body).getReader();let S,I;for(;;){const N=await m.read();if(N.done)break;const{flags:x,data:C}=N.value;if((x&rg)===rg)throw new Q("protocol error: received unsupported compressed output",W.Internal);if(x===Ju){if(S!==void 0)throw"extra trailer";S=ag(C);continue}if(I!==void 0)throw new Q("extra message",W.Unimplemented);I=g(C)}if(S===void 0)throw y!==void 0?y:new Q("missing trailer",A.headers.has(xs)?W.Unimplemented:W.Unknown);if(dg(S,A.headers),I===void 0)throw new Q("missing message",S.has(xs)?W.Unimplemented:W.Unknown);return{stream:!1,service:r,method:i,header:A.headers,message:I,trailer:S}}})},async stream(r,i,s,o,a,u,c){var d;const{serialize:h,parse:g}=ug(i,t,n.jsonOptions,n.binaryOptions);function p(w,A,y,m,S){return eS(this,arguments,function*(){const N=ig(w).getReader();if(A){if(!(yield Ei(N.read())).done)throw"extra data for trailers-only";return yield Ei(void 0)}let x=!1;for(;;){const C=yield Ei(N.read());if(C.done)break;const{flags:R,data:z}=C.value;if((R&Ju)===Ju){if(x)throw"extra trailer";x=!0;const $=ag(z);dg($,m),$.forEach((ve,Wt)=>y.set(Wt,ve));continue}if(x)throw"extra message";yield yield Ei(g(z))}if("throwIfAborted"in S&&S.throwIfAborted(),!x)throw"missing trailer"})}async function v(w){if(i.kind!=Je.ServerStreaming)throw"The fetch API does not support streaming request bodies";const A=await w[Symbol.asyncIterator]().next();if(A.done==!0)throw"missing request message";return sg(0,h(A.value))}return o=o===void 0?n.defaultTimeoutMs:o<=0?void 0:o,X1({interceptors:n.interceptors,signal:s,timeoutMs:o,req:{stream:!0,service:r,method:i,url:lg(n.baseUrl,r,i),init:{method:"POST",credentials:(d=n.credentials)!==null&&d!==void 0?d:"same-origin",redirect:"error",mode:"cors"},header:hg(t,o,a),contextValues:c??og(),message:u},next:async w=>{var A;const m=await((A=n.fetch)!==null&&A!==void 0?A:globalThis.fetch)(w.url,Object.assign(Object.assign({},w.init),{headers:w.header,signal:w.signal,body:await v(w.message)})),{foundStatus:S,headerError:I}=gg(m.status,m.headers);if(I!=null)throw I;if(!m.body)throw"missing response body";const N=new Headers;return Object.assign(Object.assign({},w),{header:m.headers,trailer:N,message:p(m.body,S,N,m.headers,w.signal)})}})}}}var V=(n=>(n[n.NULL=0]="NULL",n[n.BOOLEAN=1]="BOOLEAN",n[n.INTEGER=2]="INTEGER",n[n.LONG=3]="LONG",n[n.DOUBLE=4]="DOUBLE",n[n.STRING=5]="STRING",n[n.BYTES=6]="BYTES",n[n.DATE=7]="DATE",n[n.JSON_OBJECT=8]="JSON_OBJECT",n[n.JSON_ARRAY=9]="JSON_ARRAY",n[n.TEXT=10]="TEXT",n[n.INTEGER_CNT=11]="INTEGER_CNT",n[n.LONG_CNT=12]="LONG_CNT",n[n.TREE=13]="TREE",n))(V||{});f.util.setEnumType(V,"yorkie.v1.ValueType",[{no:0,name:"VALUE_TYPE_NULL"},{no:1,name:"VALUE_TYPE_BOOLEAN"},{no:2,name:"VALUE_TYPE_INTEGER"},{no:3,name:"VALUE_TYPE_LONG"},{no:4,name:"VALUE_TYPE_DOUBLE"},{no:5,name:"VALUE_TYPE_STRING"},{no:6,name:"VALUE_TYPE_BYTES"},{no:7,name:"VALUE_TYPE_DATE"},{no:8,name:"VALUE_TYPE_JSON_OBJECT"},{no:9,name:"VALUE_TYPE_JSON_ARRAY"},{no:10,name:"VALUE_TYPE_TEXT"},{no:11,name:"VALUE_TYPE_INTEGER_CNT"},{no:12,name:"VALUE_TYPE_LONG_CNT"},{no:13,name:"VALUE_TYPE_TREE"}]);var Pi=(n=>(n[n.DOCUMENT_CHANGED=0]="DOCUMENT_CHANGED",n[n.DOCUMENT_WATCHED=1]="DOCUMENT_WATCHED",n[n.DOCUMENT_UNWATCHED=2]="DOCUMENT_UNWATCHED",n[n.DOCUMENT_BROADCAST=3]="DOCUMENT_BROADCAST",n))(Pi||{});f.util.setEnumType(Pi,"yorkie.v1.DocEventType",[{no:0,name:"DOC_EVENT_TYPE_DOCUMENT_CHANGED"},{no:1,name:"DOC_EVENT_TYPE_DOCUMENT_WATCHED"},{no:2,name:"DOC_EVENT_TYPE_DOCUMENT_UNWATCHED"},{no:3,name:"DOC_EVENT_TYPE_DOCUMENT_BROADCAST"}]);const vn=class vn extends O{constructor(t){super();l(this,"root");l(this,"presences",{});f.util.initPartial(t,this)}static fromBinary(t,r){return new vn().fromBinary(t,r)}static fromJson(t,r){return new vn().fromJson(t,r)}static fromJsonString(t,r){return new vn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(vn,t,r)}};l(vn,"runtime",f),l(vn,"typeName","yorkie.v1.Snapshot"),l(vn,"fields",f.util.newFieldList(()=>[{no:1,name:"root",kind:"message",T:Ze},{no:2,name:"presences",kind:"map",K:9,V:{kind:"message",T:iu}}]));let $c=vn;var gt;let Ur=(gt=class extends O{constructor(t){super();l(this,"documentKey","");l(this,"checkpoint");l(this,"snapshot",new Uint8Array(0));l(this,"changes",[]);l(this,"minSyncedTicket");l(this,"isRemoved",!1);l(this,"versionVector");f.util.initPartial(t,this)}static fromBinary(t,r){return new gt().fromBinary(t,r)}static fromJson(t,r){return new gt().fromJson(t,r)}static fromJsonString(t,r){return new gt().fromJsonString(t,r)}static equals(t,r){return f.util.equals(gt,t,r)}},l(gt,"runtime",f),l(gt,"typeName","yorkie.v1.ChangePack"),l(gt,"fields",f.util.newFieldList(()=>[{no:1,name:"document_key",kind:"scalar",T:9},{no:2,name:"checkpoint",kind:"message",T:Ay},{no:3,name:"snapshot",kind:"scalar",T:12},{no:4,name:"changes",kind:"message",T:Iy,repeated:!0},{no:5,name:"min_synced_ticket",kind:"message",T:M},{no:6,name:"is_removed",kind:"scalar",T:8},{no:7,name:"version_vector",kind:"message",T:ru}])),gt);var mt;let Iy=(mt=class extends O{constructor(t){super();l(this,"id");l(this,"message","");l(this,"operations",[]);l(this,"presenceChange");f.util.initPartial(t,this)}static fromBinary(t,r){return new mt().fromBinary(t,r)}static fromJson(t,r){return new mt().fromJson(t,r)}static fromJsonString(t,r){return new mt().fromJsonString(t,r)}static equals(t,r){return f.util.equals(mt,t,r)}},l(mt,"runtime",f),l(mt,"typeName","yorkie.v1.Change"),l(mt,"fields",f.util.newFieldList(()=>[{no:1,name:"id",kind:"message",T:nu},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"operations",kind:"message",T:hd,repeated:!0},{no:4,name:"presence_change",kind:"message",T:bo}])),mt);var pt;let nu=(pt=class extends O{constructor(t){super();l(this,"clientSeq",0);l(this,"serverSeq",ie.zero);l(this,"lamport",ie.zero);l(this,"actorId",new Uint8Array(0));l(this,"versionVector");f.util.initPartial(t,this)}static fromBinary(t,r){return new pt().fromBinary(t,r)}static fromJson(t,r){return new pt().fromJson(t,r)}static fromJsonString(t,r){return new pt().fromJsonString(t,r)}static equals(t,r){return f.util.equals(pt,t,r)}},l(pt,"runtime",f),l(pt,"typeName","yorkie.v1.ChangeID"),l(pt,"fields",f.util.newFieldList(()=>[{no:1,name:"client_seq",kind:"scalar",T:13},{no:2,name:"server_seq",kind:"scalar",T:3},{no:3,name:"lamport",kind:"scalar",T:3},{no:4,name:"actor_id",kind:"scalar",T:12},{no:5,name:"version_vector",kind:"message",T:ru}])),pt);var yt;let ru=(yt=class extends O{constructor(t){super();l(this,"vector",{});f.util.initPartial(t,this)}static fromBinary(t,r){return new yt().fromBinary(t,r)}static fromJson(t,r){return new yt().fromJson(t,r)}static fromJsonString(t,r){return new yt().fromJsonString(t,r)}static equals(t,r){return f.util.equals(yt,t,r)}},l(yt,"runtime",f),l(yt,"typeName","yorkie.v1.VersionVector"),l(yt,"fields",f.util.newFieldList(()=>[{no:1,name:"vector",kind:"map",K:9,V:{kind:"scalar",T:3}}])),yt);var vt;let hd=(vt=class extends O{constructor(t){super();l(this,"body",{case:void 0});f.util.initPartial(t,this)}static fromBinary(t,r){return new vt().fromBinary(t,r)}static fromJson(t,r){return new vt().fromJson(t,r)}static fromJsonString(t,r){return new vt().fromJsonString(t,r)}static equals(t,r){return f.util.equals(vt,t,r)}},l(vt,"runtime",f),l(vt,"typeName","yorkie.v1.Operation"),l(vt,"fields",f.util.newFieldList(()=>[{no:1,name:"set",kind:"message",T:gl,oneof:"body"},{no:2,name:"add",kind:"message",T:ml,oneof:"body"},{no:3,name:"move",kind:"message",T:pl,oneof:"body"},{no:4,name:"remove",kind:"message",T:yl,oneof:"body"},{no:5,name:"edit",kind:"message",T:vl,oneof:"body"},{no:7,name:"style",kind:"message",T:wl,oneof:"body"},{no:8,name:"increase",kind:"message",T:Sl,oneof:"body"},{no:9,name:"tree_edit",kind:"message",T:kl,oneof:"body"},{no:10,name:"tree_style",kind:"message",T:Tl,oneof:"body"},{no:11,name:"array_set",kind:"message",T:Il,oneof:"body"}])),vt);const wn=class wn extends O{constructor(t){super();l(this,"parentCreatedAt");l(this,"key","");l(this,"value");l(this,"executedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new wn().fromBinary(t,r)}static fromJson(t,r){return new wn().fromJson(t,r)}static fromJsonString(t,r){return new wn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(wn,t,r)}};l(wn,"runtime",f),l(wn,"typeName","yorkie.v1.Operation.Set"),l(wn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:M},{no:2,name:"key",kind:"scalar",T:9},{no:3,name:"value",kind:"message",T:ht},{no:4,name:"executed_at",kind:"message",T:M}]));let gl=wn;const Sn=class Sn extends O{constructor(t){super();l(this,"parentCreatedAt");l(this,"prevCreatedAt");l(this,"value");l(this,"executedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new Sn().fromBinary(t,r)}static fromJson(t,r){return new Sn().fromJson(t,r)}static fromJsonString(t,r){return new Sn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Sn,t,r)}};l(Sn,"runtime",f),l(Sn,"typeName","yorkie.v1.Operation.Add"),l(Sn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:M},{no:2,name:"prev_created_at",kind:"message",T:M},{no:3,name:"value",kind:"message",T:ht},{no:4,name:"executed_at",kind:"message",T:M}]));let ml=Sn;const kn=class kn extends O{constructor(t){super();l(this,"parentCreatedAt");l(this,"prevCreatedAt");l(this,"createdAt");l(this,"executedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new kn().fromBinary(t,r)}static fromJson(t,r){return new kn().fromJson(t,r)}static fromJsonString(t,r){return new kn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(kn,t,r)}};l(kn,"runtime",f),l(kn,"typeName","yorkie.v1.Operation.Move"),l(kn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:M},{no:2,name:"prev_created_at",kind:"message",T:M},{no:3,name:"created_at",kind:"message",T:M},{no:4,name:"executed_at",kind:"message",T:M}]));let pl=kn;const Tn=class Tn extends O{constructor(t){super();l(this,"parentCreatedAt");l(this,"createdAt");l(this,"executedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new Tn().fromBinary(t,r)}static fromJson(t,r){return new Tn().fromJson(t,r)}static fromJsonString(t,r){return new Tn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Tn,t,r)}};l(Tn,"runtime",f),l(Tn,"typeName","yorkie.v1.Operation.Remove"),l(Tn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:M},{no:2,name:"created_at",kind:"message",T:M},{no:3,name:"executed_at",kind:"message",T:M}]));let yl=Tn;const In=class In extends O{constructor(t){super();l(this,"parentCreatedAt");l(this,"from");l(this,"to");l(this,"createdAtMapByActor",{});l(this,"content","");l(this,"executedAt");l(this,"attributes",{});f.util.initPartial(t,this)}static fromBinary(t,r){return new In().fromBinary(t,r)}static fromJson(t,r){return new In().fromJson(t,r)}static fromJsonString(t,r){return new In().fromJsonString(t,r)}static equals(t,r){return f.util.equals(In,t,r)}};l(In,"runtime",f),l(In,"typeName","yorkie.v1.Operation.Edit"),l(In,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:M},{no:2,name:"from",kind:"message",T:Mi},{no:3,name:"to",kind:"message",T:Mi},{no:4,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:M}},{no:5,name:"content",kind:"scalar",T:9},{no:6,name:"executed_at",kind:"message",T:M},{no:7,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}}]));let vl=In;const xn=class xn extends O{constructor(t){super();l(this,"parentCreatedAt");l(this,"from");l(this,"to");l(this,"attributes",{});l(this,"executedAt");l(this,"createdAtMapByActor",{});f.util.initPartial(t,this)}static fromBinary(t,r){return new xn().fromBinary(t,r)}static fromJson(t,r){return new xn().fromJson(t,r)}static fromJsonString(t,r){return new xn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(xn,t,r)}};l(xn,"runtime",f),l(xn,"typeName","yorkie.v1.Operation.Style"),l(xn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:M},{no:2,name:"from",kind:"message",T:Mi},{no:3,name:"to",kind:"message",T:Mi},{no:4,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:5,name:"executed_at",kind:"message",T:M},{no:6,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:M}}]));let wl=xn;const An=class An extends O{constructor(t){super();l(this,"parentCreatedAt");l(this,"value");l(this,"executedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new An().fromBinary(t,r)}static fromJson(t,r){return new An().fromJson(t,r)}static fromJsonString(t,r){return new An().fromJsonString(t,r)}static equals(t,r){return f.util.equals(An,t,r)}};l(An,"runtime",f),l(An,"typeName","yorkie.v1.Operation.Increase"),l(An,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:M},{no:2,name:"value",kind:"message",T:ht},{no:3,name:"executed_at",kind:"message",T:M}]));let Sl=An;const En=class En extends O{constructor(t){super();l(this,"parentCreatedAt");l(this,"from");l(this,"to");l(this,"createdAtMapByActor",{});l(this,"contents",[]);l(this,"splitLevel",0);l(this,"executedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new En().fromBinary(t,r)}static fromJson(t,r){return new En().fromJson(t,r)}static fromJsonString(t,r){return new En().fromJsonString(t,r)}static equals(t,r){return f.util.equals(En,t,r)}};l(En,"runtime",f),l(En,"typeName","yorkie.v1.Operation.TreeEdit"),l(En,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:M},{no:2,name:"from",kind:"message",T:Bi},{no:3,name:"to",kind:"message",T:Bi},{no:4,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:M}},{no:5,name:"contents",kind:"message",T:Ol,repeated:!0},{no:7,name:"split_level",kind:"scalar",T:5},{no:6,name:"executed_at",kind:"message",T:M}]));let kl=En;const Cn=class Cn extends O{constructor(t){super();l(this,"parentCreatedAt");l(this,"from");l(this,"to");l(this,"attributes",{});l(this,"executedAt");l(this,"attributesToRemove",[]);l(this,"createdAtMapByActor",{});f.util.initPartial(t,this)}static fromBinary(t,r){return new Cn().fromBinary(t,r)}static fromJson(t,r){return new Cn().fromJson(t,r)}static fromJsonString(t,r){return new Cn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Cn,t,r)}};l(Cn,"runtime",f),l(Cn,"typeName","yorkie.v1.Operation.TreeStyle"),l(Cn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:M},{no:2,name:"from",kind:"message",T:Bi},{no:3,name:"to",kind:"message",T:Bi},{no:4,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:5,name:"executed_at",kind:"message",T:M},{no:6,name:"attributes_to_remove",kind:"scalar",T:9,repeated:!0},{no:7,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:M}}]));let Tl=Cn;const Nn=class Nn extends O{constructor(t){super();l(this,"parentCreatedAt");l(this,"createdAt");l(this,"value");l(this,"executedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new Nn().fromBinary(t,r)}static fromJson(t,r){return new Nn().fromJson(t,r)}static fromJsonString(t,r){return new Nn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Nn,t,r)}};l(Nn,"runtime",f),l(Nn,"typeName","yorkie.v1.Operation.ArraySet"),l(Nn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:M},{no:2,name:"created_at",kind:"message",T:M},{no:3,name:"value",kind:"message",T:ht},{no:4,name:"executed_at",kind:"message",T:M}]));let Il=Nn;const Pn=class Pn extends O{constructor(t){super();l(this,"createdAt");l(this,"movedAt");l(this,"removedAt");l(this,"type",0);l(this,"value",new Uint8Array(0));f.util.initPartial(t,this)}static fromBinary(t,r){return new Pn().fromBinary(t,r)}static fromJson(t,r){return new Pn().fromJson(t,r)}static fromJsonString(t,r){return new Pn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Pn,t,r)}};l(Pn,"runtime",f),l(Pn,"typeName","yorkie.v1.JSONElementSimple"),l(Pn,"fields",f.util.newFieldList(()=>[{no:1,name:"created_at",kind:"message",T:M},{no:2,name:"moved_at",kind:"message",T:M},{no:3,name:"removed_at",kind:"message",T:M},{no:4,name:"type",kind:"enum",T:f.getEnumType(V)},{no:5,name:"value",kind:"scalar",T:12}]));let ht=Pn;const Dn=class Dn extends O{constructor(t){super();l(this,"body",{case:void 0});f.util.initPartial(t,this)}static fromBinary(t,r){return new Dn().fromBinary(t,r)}static fromJson(t,r){return new Dn().fromJson(t,r)}static fromJsonString(t,r){return new Dn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Dn,t,r)}};l(Dn,"runtime",f),l(Dn,"typeName","yorkie.v1.JSONElement"),l(Dn,"fields",f.util.newFieldList(()=>[{no:1,name:"json_object",kind:"message",T:xl,oneof:"body"},{no:2,name:"json_array",kind:"message",T:Al,oneof:"body"},{no:3,name:"primitive",kind:"message",T:El,oneof:"body"},{no:5,name:"text",kind:"message",T:Cl,oneof:"body"},{no:6,name:"counter",kind:"message",T:Nl,oneof:"body"},{no:7,name:"tree",kind:"message",T:Pl,oneof:"body"}]));let Ze=Dn;const Rn=class Rn extends O{constructor(t){super();l(this,"nodes",[]);l(this,"createdAt");l(this,"movedAt");l(this,"removedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new Rn().fromBinary(t,r)}static fromJson(t,r){return new Rn().fromJson(t,r)}static fromJsonString(t,r){return new Rn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Rn,t,r)}};l(Rn,"runtime",f),l(Rn,"typeName","yorkie.v1.JSONElement.JSONObject"),l(Rn,"fields",f.util.newFieldList(()=>[{no:1,name:"nodes",kind:"message",T:xy,repeated:!0},{no:2,name:"created_at",kind:"message",T:M},{no:3,name:"moved_at",kind:"message",T:M},{no:4,name:"removed_at",kind:"message",T:M}]));let xl=Rn;const On=class On extends O{constructor(t){super();l(this,"nodes",[]);l(this,"createdAt");l(this,"movedAt");l(this,"removedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new On().fromBinary(t,r)}static fromJson(t,r){return new On().fromJson(t,r)}static fromJsonString(t,r){return new On().fromJsonString(t,r)}static equals(t,r){return f.util.equals(On,t,r)}};l(On,"runtime",f),l(On,"typeName","yorkie.v1.JSONElement.JSONArray"),l(On,"fields",f.util.newFieldList(()=>[{no:1,name:"nodes",kind:"message",T:Dl,repeated:!0},{no:2,name:"created_at",kind:"message",T:M},{no:3,name:"moved_at",kind:"message",T:M},{no:4,name:"removed_at",kind:"message",T:M}]));let Al=On;const Ln=class Ln extends O{constructor(t){super();l(this,"type",0);l(this,"value",new Uint8Array(0));l(this,"createdAt");l(this,"movedAt");l(this,"removedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new Ln().fromBinary(t,r)}static fromJson(t,r){return new Ln().fromJson(t,r)}static fromJsonString(t,r){return new Ln().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Ln,t,r)}};l(Ln,"runtime",f),l(Ln,"typeName","yorkie.v1.JSONElement.Primitive"),l(Ln,"fields",f.util.newFieldList(()=>[{no:1,name:"type",kind:"enum",T:f.getEnumType(V)},{no:2,name:"value",kind:"scalar",T:12},{no:3,name:"created_at",kind:"message",T:M},{no:4,name:"moved_at",kind:"message",T:M},{no:5,name:"removed_at",kind:"message",T:M}]));let El=Ln;const bn=class bn extends O{constructor(t){super();l(this,"nodes",[]);l(this,"createdAt");l(this,"movedAt");l(this,"removedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new bn().fromBinary(t,r)}static fromJson(t,r){return new bn().fromJson(t,r)}static fromJsonString(t,r){return new bn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(bn,t,r)}};l(bn,"runtime",f),l(bn,"typeName","yorkie.v1.JSONElement.Text"),l(bn,"fields",f.util.newFieldList(()=>[{no:1,name:"nodes",kind:"message",T:Rl,repeated:!0},{no:2,name:"created_at",kind:"message",T:M},{no:3,name:"moved_at",kind:"message",T:M},{no:4,name:"removed_at",kind:"message",T:M}]));let Cl=bn;const Bn=class Bn extends O{constructor(t){super();l(this,"type",0);l(this,"value",new Uint8Array(0));l(this,"createdAt");l(this,"movedAt");l(this,"removedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new Bn().fromBinary(t,r)}static fromJson(t,r){return new Bn().fromJson(t,r)}static fromJsonString(t,r){return new Bn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Bn,t,r)}};l(Bn,"runtime",f),l(Bn,"typeName","yorkie.v1.JSONElement.Counter"),l(Bn,"fields",f.util.newFieldList(()=>[{no:1,name:"type",kind:"enum",T:f.getEnumType(V)},{no:2,name:"value",kind:"scalar",T:12},{no:3,name:"created_at",kind:"message",T:M},{no:4,name:"moved_at",kind:"message",T:M},{no:5,name:"removed_at",kind:"message",T:M}]));let Nl=Bn;const zn=class zn extends O{constructor(t){super();l(this,"nodes",[]);l(this,"createdAt");l(this,"movedAt");l(this,"removedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new zn().fromBinary(t,r)}static fromJson(t,r){return new zn().fromJson(t,r)}static fromJsonString(t,r){return new zn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(zn,t,r)}};l(zn,"runtime",f),l(zn,"typeName","yorkie.v1.JSONElement.Tree"),l(zn,"fields",f.util.newFieldList(()=>[{no:1,name:"nodes",kind:"message",T:Lo,repeated:!0},{no:2,name:"created_at",kind:"message",T:M},{no:3,name:"moved_at",kind:"message",T:M},{no:4,name:"removed_at",kind:"message",T:M}]));let Pl=zn;var wt;let xy=(wt=class extends O{constructor(t){super();l(this,"key","");l(this,"element");f.util.initPartial(t,this)}static fromBinary(t,r){return new wt().fromBinary(t,r)}static fromJson(t,r){return new wt().fromJson(t,r)}static fromJsonString(t,r){return new wt().fromJsonString(t,r)}static equals(t,r){return f.util.equals(wt,t,r)}},l(wt,"runtime",f),l(wt,"typeName","yorkie.v1.RHTNode"),l(wt,"fields",f.util.newFieldList(()=>[{no:1,name:"key",kind:"scalar",T:9},{no:2,name:"element",kind:"message",T:Ze}])),wt);const Gt=class Gt extends O{constructor(t){super();l(this,"next");l(this,"element");f.util.initPartial(t,this)}static fromBinary(t,r){return new Gt().fromBinary(t,r)}static fromJson(t,r){return new Gt().fromJson(t,r)}static fromJsonString(t,r){return new Gt().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Gt,t,r)}};l(Gt,"runtime",f),l(Gt,"typeName","yorkie.v1.RGANode"),l(Gt,"fields",f.util.newFieldList(()=>[{no:1,name:"next",kind:"message",T:Gt},{no:2,name:"element",kind:"message",T:Ze}]));let Dl=Gt;const Mn=class Mn extends O{constructor(t){super();l(this,"value","");l(this,"updatedAt");l(this,"isRemoved",!1);f.util.initPartial(t,this)}static fromBinary(t,r){return new Mn().fromBinary(t,r)}static fromJson(t,r){return new Mn().fromJson(t,r)}static fromJsonString(t,r){return new Mn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Mn,t,r)}};l(Mn,"runtime",f),l(Mn,"typeName","yorkie.v1.NodeAttr"),l(Mn,"fields",f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:9},{no:2,name:"updated_at",kind:"message",T:M},{no:3,name:"is_removed",kind:"scalar",T:8}]));let As=Mn;const Fn=class Fn extends O{constructor(t){super();l(this,"id");l(this,"value","");l(this,"removedAt");l(this,"insPrevId");l(this,"attributes",{});f.util.initPartial(t,this)}static fromBinary(t,r){return new Fn().fromBinary(t,r)}static fromJson(t,r){return new Fn().fromJson(t,r)}static fromJsonString(t,r){return new Fn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Fn,t,r)}};l(Fn,"runtime",f),l(Fn,"typeName","yorkie.v1.TextNode"),l(Fn,"fields",f.util.newFieldList(()=>[{no:1,name:"id",kind:"message",T:Oo},{no:2,name:"value",kind:"scalar",T:9},{no:3,name:"removed_at",kind:"message",T:M},{no:4,name:"ins_prev_id",kind:"message",T:Oo},{no:5,name:"attributes",kind:"map",K:9,V:{kind:"message",T:As}}]));let Rl=Fn;const $n=class $n extends O{constructor(t){super();l(this,"createdAt");l(this,"offset",0);f.util.initPartial(t,this)}static fromBinary(t,r){return new $n().fromBinary(t,r)}static fromJson(t,r){return new $n().fromJson(t,r)}static fromJsonString(t,r){return new $n().fromJsonString(t,r)}static equals(t,r){return f.util.equals($n,t,r)}};l($n,"runtime",f),l($n,"typeName","yorkie.v1.TextNodeID"),l($n,"fields",f.util.newFieldList(()=>[{no:1,name:"created_at",kind:"message",T:M},{no:2,name:"offset",kind:"scalar",T:5}]));let Oo=$n;const Jn=class Jn extends O{constructor(t){super();l(this,"id");l(this,"type","");l(this,"value","");l(this,"removedAt");l(this,"insPrevId");l(this,"insNextId");l(this,"depth",0);l(this,"attributes",{});f.util.initPartial(t,this)}static fromBinary(t,r){return new Jn().fromBinary(t,r)}static fromJson(t,r){return new Jn().fromJson(t,r)}static fromJsonString(t,r){return new Jn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Jn,t,r)}};l(Jn,"runtime",f),l(Jn,"typeName","yorkie.v1.TreeNode"),l(Jn,"fields",f.util.newFieldList(()=>[{no:1,name:"id",kind:"message",T:ai},{no:2,name:"type",kind:"scalar",T:9},{no:3,name:"value",kind:"scalar",T:9},{no:4,name:"removed_at",kind:"message",T:M},{no:5,name:"ins_prev_id",kind:"message",T:ai},{no:6,name:"ins_next_id",kind:"message",T:ai},{no:7,name:"depth",kind:"scalar",T:5},{no:8,name:"attributes",kind:"map",K:9,V:{kind:"message",T:As}}]));let Lo=Jn;const Un=class Un extends O{constructor(t){super();l(this,"content",[]);f.util.initPartial(t,this)}static fromBinary(t,r){return new Un().fromBinary(t,r)}static fromJson(t,r){return new Un().fromJson(t,r)}static fromJsonString(t,r){return new Un().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Un,t,r)}};l(Un,"runtime",f),l(Un,"typeName","yorkie.v1.TreeNodes"),l(Un,"fields",f.util.newFieldList(()=>[{no:1,name:"content",kind:"message",T:Lo,repeated:!0}]));let Ol=Un;const jn=class jn extends O{constructor(t){super();l(this,"createdAt");l(this,"offset",0);f.util.initPartial(t,this)}static fromBinary(t,r){return new jn().fromBinary(t,r)}static fromJson(t,r){return new jn().fromJson(t,r)}static fromJsonString(t,r){return new jn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(jn,t,r)}};l(jn,"runtime",f),l(jn,"typeName","yorkie.v1.TreeNodeID"),l(jn,"fields",f.util.newFieldList(()=>[{no:1,name:"created_at",kind:"message",T:M},{no:2,name:"offset",kind:"scalar",T:5}]));let ai=jn;const Vn=class Vn extends O{constructor(t){super();l(this,"parentId");l(this,"leftSiblingId");f.util.initPartial(t,this)}static fromBinary(t,r){return new Vn().fromBinary(t,r)}static fromJson(t,r){return new Vn().fromJson(t,r)}static fromJsonString(t,r){return new Vn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Vn,t,r)}};l(Vn,"runtime",f),l(Vn,"typeName","yorkie.v1.TreePos"),l(Vn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_id",kind:"message",T:ai},{no:2,name:"left_sibling_id",kind:"message",T:ai}]));let Bi=Vn;const qn=class qn extends O{constructor(t){super();l(this,"id","");l(this,"authProvider","");l(this,"username","");l(this,"createdAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new qn().fromBinary(t,r)}static fromJson(t,r){return new qn().fromJson(t,r)}static fromJsonString(t,r){return new qn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(qn,t,r)}};l(qn,"runtime",f),l(qn,"typeName","yorkie.v1.User"),l(qn,"fields",f.util.newFieldList(()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"auth_provider",kind:"scalar",T:9},{no:3,name:"username",kind:"scalar",T:9},{no:4,name:"created_at",kind:"message",T:Ce}]));let mg=qn;const Kn=class Kn extends O{constructor(t){super();l(this,"id","");l(this,"name","");l(this,"publicKey","");l(this,"secretKey","");l(this,"authWebhookUrl","");l(this,"authWebhookMethods",[]);l(this,"eventWebhookUrl","");l(this,"eventWebhookEvents",[]);l(this,"clientDeactivateThreshold","");l(this,"maxSubscribersPerDocument",0);l(this,"maxAttachmentsPerDocument",0);l(this,"maxSizePerDocument",0);l(this,"allowedOrigins",[]);l(this,"createdAt");l(this,"updatedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new Kn().fromBinary(t,r)}static fromJson(t,r){return new Kn().fromJson(t,r)}static fromJsonString(t,r){return new Kn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Kn,t,r)}};l(Kn,"runtime",f),l(Kn,"typeName","yorkie.v1.Project"),l(Kn,"fields",f.util.newFieldList(()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"public_key",kind:"scalar",T:9},{no:4,name:"secret_key",kind:"scalar",T:9},{no:5,name:"auth_webhook_url",kind:"scalar",T:9},{no:6,name:"auth_webhook_methods",kind:"scalar",T:9,repeated:!0},{no:7,name:"event_webhook_url",kind:"scalar",T:9},{no:8,name:"event_webhook_events",kind:"scalar",T:9,repeated:!0},{no:9,name:"client_deactivate_threshold",kind:"scalar",T:9},{no:10,name:"max_subscribers_per_document",kind:"scalar",T:5},{no:11,name:"max_attachments_per_document",kind:"scalar",T:5},{no:15,name:"max_size_per_document",kind:"scalar",T:5},{no:14,name:"allowed_origins",kind:"scalar",T:9,repeated:!0},{no:12,name:"created_at",kind:"message",T:Ce},{no:13,name:"updated_at",kind:"message",T:Ce}]));let pg=Kn;const Wn=class Wn extends O{constructor(t){super();l(this,"timestamp",ie.zero);l(this,"value",0);f.util.initPartial(t,this)}static fromBinary(t,r){return new Wn().fromBinary(t,r)}static fromJson(t,r){return new Wn().fromJson(t,r)}static fromJsonString(t,r){return new Wn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Wn,t,r)}};l(Wn,"runtime",f),l(Wn,"typeName","yorkie.v1.MetricPoint"),l(Wn,"fields",f.util.newFieldList(()=>[{no:1,name:"timestamp",kind:"scalar",T:3},{no:2,name:"value",kind:"scalar",T:5}]));let yg=Wn;const Hn=class Hn extends O{constructor(t){super();l(this,"name");l(this,"authWebhookUrl");l(this,"authWebhookMethods");l(this,"eventWebhookUrl");l(this,"eventWebhookEvents");l(this,"clientDeactivateThreshold");l(this,"maxSubscribersPerDocument");l(this,"maxAttachmentsPerDocument");l(this,"maxSizePerDocument");l(this,"allowedOrigins");f.util.initPartial(t,this)}static fromBinary(t,r){return new Hn().fromBinary(t,r)}static fromJson(t,r){return new Hn().fromJson(t,r)}static fromJsonString(t,r){return new Hn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Hn,t,r)}};l(Hn,"runtime",f),l(Hn,"typeName","yorkie.v1.UpdatableProjectFields"),l(Hn,"fields",f.util.newFieldList(()=>[{no:1,name:"name",kind:"message",T:He},{no:2,name:"auth_webhook_url",kind:"message",T:He},{no:3,name:"auth_webhook_methods",kind:"message",T:Jc},{no:4,name:"event_webhook_url",kind:"message",T:He},{no:5,name:"event_webhook_events",kind:"message",T:Uc},{no:6,name:"client_deactivate_threshold",kind:"message",T:He},{no:7,name:"max_subscribers_per_document",kind:"message",T:nt},{no:8,name:"max_attachments_per_document",kind:"message",T:nt},{no:10,name:"max_size_per_document",kind:"message",T:nt},{no:9,name:"allowed_origins",kind:"message",T:jc}]));let vg=Hn;const _n=class _n extends O{constructor(t){super();l(this,"methods",[]);f.util.initPartial(t,this)}static fromBinary(t,r){return new _n().fromBinary(t,r)}static fromJson(t,r){return new _n().fromJson(t,r)}static fromJsonString(t,r){return new _n().fromJsonString(t,r)}static equals(t,r){return f.util.equals(_n,t,r)}};l(_n,"runtime",f),l(_n,"typeName","yorkie.v1.UpdatableProjectFields.AuthWebhookMethods"),l(_n,"fields",f.util.newFieldList(()=>[{no:1,name:"methods",kind:"scalar",T:9,repeated:!0}]));let Jc=_n;const Gn=class Gn extends O{constructor(t){super();l(this,"events",[]);f.util.initPartial(t,this)}static fromBinary(t,r){return new Gn().fromBinary(t,r)}static fromJson(t,r){return new Gn().fromJson(t,r)}static fromJsonString(t,r){return new Gn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Gn,t,r)}};l(Gn,"runtime",f),l(Gn,"typeName","yorkie.v1.UpdatableProjectFields.EventWebhookEvents"),l(Gn,"fields",f.util.newFieldList(()=>[{no:1,name:"events",kind:"scalar",T:9,repeated:!0}]));let Uc=Gn;const Yn=class Yn extends O{constructor(t){super();l(this,"origins",[]);f.util.initPartial(t,this)}static fromBinary(t,r){return new Yn().fromBinary(t,r)}static fromJson(t,r){return new Yn().fromJson(t,r)}static fromJsonString(t,r){return new Yn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Yn,t,r)}};l(Yn,"runtime",f),l(Yn,"typeName","yorkie.v1.UpdatableProjectFields.AllowedOrigins"),l(Yn,"fields",f.util.newFieldList(()=>[{no:1,name:"origins",kind:"scalar",T:9,repeated:!0}]));let jc=Yn;const Xn=class Xn extends O{constructor(t){super();l(this,"id","");l(this,"key","");l(this,"root","");l(this,"attachedClients",0);l(this,"documentSize");l(this,"schemaKey","");l(this,"presences",{});l(this,"createdAt");l(this,"accessedAt");l(this,"updatedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new Xn().fromBinary(t,r)}static fromJson(t,r){return new Xn().fromJson(t,r)}static fromJsonString(t,r){return new Xn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Xn,t,r)}};l(Xn,"runtime",f),l(Xn,"typeName","yorkie.v1.DocumentSummary"),l(Xn,"fields",f.util.newFieldList(()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"key",kind:"scalar",T:9},{no:3,name:"root",kind:"scalar",T:9},{no:7,name:"attached_clients",kind:"scalar",T:5},{no:8,name:"document_size",kind:"message",T:Kc},{no:9,name:"schema_key",kind:"scalar",T:9},{no:10,name:"presences",kind:"map",K:9,V:{kind:"message",T:iu}},{no:4,name:"created_at",kind:"message",T:Ce},{no:5,name:"accessed_at",kind:"message",T:Ce},{no:6,name:"updated_at",kind:"message",T:Ce}]));let wg=Xn;const Qn=class Qn extends O{constructor(t){super();l(this,"type",0);l(this,"presence");f.util.initPartial(t,this)}static fromBinary(t,r){return new Qn().fromBinary(t,r)}static fromJson(t,r){return new Qn().fromJson(t,r)}static fromJsonString(t,r){return new Qn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Qn,t,r)}};l(Qn,"runtime",f),l(Qn,"typeName","yorkie.v1.PresenceChange"),l(Qn,"fields",f.util.newFieldList(()=>[{no:1,name:"type",kind:"enum",T:f.getEnumType(zi)},{no:2,name:"presence",kind:"message",T:iu}]));let bo=Qn;var zi=(n=>(n[n.UNSPECIFIED=0]="UNSPECIFIED",n[n.PUT=1]="PUT",n[n.DELETE=2]="DELETE",n[n.CLEAR=3]="CLEAR",n))(zi||{});f.util.setEnumType(zi,"yorkie.v1.PresenceChange.ChangeType",[{no:0,name:"CHANGE_TYPE_UNSPECIFIED"},{no:1,name:"CHANGE_TYPE_PUT"},{no:2,name:"CHANGE_TYPE_DELETE"},{no:3,name:"CHANGE_TYPE_CLEAR"}]);var St;let iu=(St=class extends O{constructor(t){super();l(this,"data",{});f.util.initPartial(t,this)}static fromBinary(t,r){return new St().fromBinary(t,r)}static fromJson(t,r){return new St().fromJson(t,r)}static fromJsonString(t,r){return new St().fromJsonString(t,r)}static equals(t,r){return f.util.equals(St,t,r)}},l(St,"runtime",f),l(St,"typeName","yorkie.v1.Presence"),l(St,"fields",f.util.newFieldList(()=>[{no:1,name:"data",kind:"map",K:9,V:{kind:"scalar",T:9}}])),St);var kt;let Ay=(kt=class extends O{constructor(t){super();l(this,"serverSeq",ie.zero);l(this,"clientSeq",0);f.util.initPartial(t,this)}static fromBinary(t,r){return new kt().fromBinary(t,r)}static fromJson(t,r){return new kt().fromJson(t,r)}static fromJsonString(t,r){return new kt().fromJsonString(t,r)}static equals(t,r){return f.util.equals(kt,t,r)}},l(kt,"runtime",f),l(kt,"typeName","yorkie.v1.Checkpoint"),l(kt,"fields",f.util.newFieldList(()=>[{no:1,name:"server_seq",kind:"scalar",T:3},{no:2,name:"client_seq",kind:"scalar",T:13}])),kt);const Zn=class Zn extends O{constructor(t){super();l(this,"createdAt");l(this,"offset",0);l(this,"relativeOffset",0);f.util.initPartial(t,this)}static fromBinary(t,r){return new Zn().fromBinary(t,r)}static fromJson(t,r){return new Zn().fromJson(t,r)}static fromJsonString(t,r){return new Zn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Zn,t,r)}};l(Zn,"runtime",f),l(Zn,"typeName","yorkie.v1.TextNodePos"),l(Zn,"fields",f.util.newFieldList(()=>[{no:1,name:"created_at",kind:"message",T:M},{no:2,name:"offset",kind:"scalar",T:5},{no:3,name:"relative_offset",kind:"scalar",T:5}]));let Mi=Zn;var Tt;let M=(Tt=class extends O{constructor(t){super();l(this,"lamport",ie.zero);l(this,"delimiter",0);l(this,"actorId",new Uint8Array(0));f.util.initPartial(t,this)}static fromBinary(t,r){return new Tt().fromBinary(t,r)}static fromJson(t,r){return new Tt().fromJson(t,r)}static fromJsonString(t,r){return new Tt().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Tt,t,r)}},l(Tt,"runtime",f),l(Tt,"typeName","yorkie.v1.TimeTicket"),l(Tt,"fields",f.util.newFieldList(()=>[{no:1,name:"lamport",kind:"scalar",T:3},{no:2,name:"delimiter",kind:"scalar",T:13},{no:3,name:"actor_id",kind:"scalar",T:12}])),Tt);const er=class er extends O{constructor(t){super();l(this,"topic","");l(this,"payload",new Uint8Array(0));f.util.initPartial(t,this)}static fromBinary(t,r){return new er().fromBinary(t,r)}static fromJson(t,r){return new er().fromJson(t,r)}static fromJsonString(t,r){return new er().fromJsonString(t,r)}static equals(t,r){return f.util.equals(er,t,r)}};l(er,"runtime",f),l(er,"typeName","yorkie.v1.DocEventBody"),l(er,"fields",f.util.newFieldList(()=>[{no:1,name:"topic",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:12}]));let Vc=er;const tr=class tr extends O{constructor(t){super();l(this,"type",0);l(this,"publisher","");l(this,"body");f.util.initPartial(t,this)}static fromBinary(t,r){return new tr().fromBinary(t,r)}static fromJson(t,r){return new tr().fromJson(t,r)}static fromJsonString(t,r){return new tr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(tr,t,r)}};l(tr,"runtime",f),l(tr,"typeName","yorkie.v1.DocEvent"),l(tr,"fields",f.util.newFieldList(()=>[{no:1,name:"type",kind:"enum",T:f.getEnumType(Pi)},{no:2,name:"publisher",kind:"scalar",T:9},{no:3,name:"body",kind:"message",T:Vc}]));let qc=tr;const nr=class nr extends O{constructor(t){super();l(this,"data",0);l(this,"meta",0);f.util.initPartial(t,this)}static fromBinary(t,r){return new nr().fromBinary(t,r)}static fromJson(t,r){return new nr().fromJson(t,r)}static fromJsonString(t,r){return new nr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(nr,t,r)}};l(nr,"runtime",f),l(nr,"typeName","yorkie.v1.DataSize"),l(nr,"fields",f.util.newFieldList(()=>[{no:1,name:"data",kind:"scalar",T:5},{no:2,name:"meta",kind:"scalar",T:5}]));let Ll=nr;const rr=class rr extends O{constructor(t){super();l(this,"live");l(this,"gc");f.util.initPartial(t,this)}static fromBinary(t,r){return new rr().fromBinary(t,r)}static fromJson(t,r){return new rr().fromJson(t,r)}static fromJsonString(t,r){return new rr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(rr,t,r)}};l(rr,"runtime",f),l(rr,"typeName","yorkie.v1.DocSize"),l(rr,"fields",f.util.newFieldList(()=>[{no:1,name:"live",kind:"message",T:Ll},{no:2,name:"gc",kind:"message",T:Ll}]));let Kc=rr;const ir=class ir extends O{constructor(t){super();l(this,"id","");l(this,"name","");l(this,"version",0);l(this,"body","");l(this,"rules",[]);l(this,"createdAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new ir().fromBinary(t,r)}static fromJson(t,r){return new ir().fromJson(t,r)}static fromJsonString(t,r){return new ir().fromJsonString(t,r)}static equals(t,r){return f.util.equals(ir,t,r)}};l(ir,"runtime",f),l(ir,"typeName","yorkie.v1.Schema"),l(ir,"fields",f.util.newFieldList(()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"version",kind:"scalar",T:5},{no:4,name:"body",kind:"scalar",T:9},{no:5,name:"rules",kind:"message",T:bl,repeated:!0},{no:6,name:"created_at",kind:"message",T:Ce}]));let Sg=ir;const sr=class sr extends O{constructor(t){super();l(this,"path","");l(this,"type","");f.util.initPartial(t,this)}static fromBinary(t,r){return new sr().fromBinary(t,r)}static fromJson(t,r){return new sr().fromJson(t,r)}static fromJsonString(t,r){return new sr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(sr,t,r)}};l(sr,"runtime",f),l(sr,"typeName","yorkie.v1.Rule"),l(sr,"fields",f.util.newFieldList(()=>[{no:1,name:"path",kind:"scalar",T:9},{no:2,name:"type",kind:"scalar",T:9}]));let bl=sr;const or=class or extends O{constructor(t){super();l(this,"clientKey","");l(this,"metadata",{});f.util.initPartial(t,this)}static fromBinary(t,r){return new or().fromBinary(t,r)}static fromJson(t,r){return new or().fromJson(t,r)}static fromJsonString(t,r){return new or().fromJsonString(t,r)}static equals(t,r){return f.util.equals(or,t,r)}};l(or,"runtime",f),l(or,"typeName","yorkie.v1.ActivateClientRequest"),l(or,"fields",f.util.newFieldList(()=>[{no:1,name:"client_key",kind:"scalar",T:9},{no:2,name:"metadata",kind:"map",K:9,V:{kind:"scalar",T:9}}]));let Wc=or;const ar=class ar extends O{constructor(t){super();l(this,"clientId","");f.util.initPartial(t,this)}static fromBinary(t,r){return new ar().fromBinary(t,r)}static fromJson(t,r){return new ar().fromJson(t,r)}static fromJsonString(t,r){return new ar().fromJsonString(t,r)}static equals(t,r){return f.util.equals(ar,t,r)}};l(ar,"runtime",f),l(ar,"typeName","yorkie.v1.ActivateClientResponse"),l(ar,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9}]));let Hc=ar;const lr=class lr extends O{constructor(t){super();l(this,"clientId","");f.util.initPartial(t,this)}static fromBinary(t,r){return new lr().fromBinary(t,r)}static fromJson(t,r){return new lr().fromJson(t,r)}static fromJsonString(t,r){return new lr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(lr,t,r)}};l(lr,"runtime",f),l(lr,"typeName","yorkie.v1.DeactivateClientRequest"),l(lr,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9}]));let _c=lr;const ur=class ur extends O{constructor(e){super(),f.util.initPartial(e,this)}static fromBinary(e,t){return new ur().fromBinary(e,t)}static fromJson(e,t){return new ur().fromJson(e,t)}static fromJsonString(e,t){return new ur().fromJsonString(e,t)}static equals(e,t){return f.util.equals(ur,e,t)}};l(ur,"runtime",f),l(ur,"typeName","yorkie.v1.DeactivateClientResponse"),l(ur,"fields",f.util.newFieldList(()=>[]));let Gc=ur;const cr=class cr extends O{constructor(t){super();l(this,"clientId","");l(this,"changePack");l(this,"schemaKey","");f.util.initPartial(t,this)}static fromBinary(t,r){return new cr().fromBinary(t,r)}static fromJson(t,r){return new cr().fromJson(t,r)}static fromJsonString(t,r){return new cr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(cr,t,r)}};l(cr,"runtime",f),l(cr,"typeName","yorkie.v1.AttachDocumentRequest"),l(cr,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"change_pack",kind:"message",T:Ur},{no:3,name:"schema_key",kind:"scalar",T:9}]));let Yc=cr;const fr=class fr extends O{constructor(t){super();l(this,"documentId","");l(this,"changePack");l(this,"maxSizePerDocument",0);l(this,"schemaRules",[]);f.util.initPartial(t,this)}static fromBinary(t,r){return new fr().fromBinary(t,r)}static fromJson(t,r){return new fr().fromJson(t,r)}static fromJsonString(t,r){return new fr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(fr,t,r)}};l(fr,"runtime",f),l(fr,"typeName","yorkie.v1.AttachDocumentResponse"),l(fr,"fields",f.util.newFieldList(()=>[{no:1,name:"document_id",kind:"scalar",T:9},{no:2,name:"change_pack",kind:"message",T:Ur},{no:3,name:"max_size_per_document",kind:"scalar",T:5},{no:4,name:"schema_rules",kind:"message",T:bl,repeated:!0}]));let Xc=fr;const dr=class dr extends O{constructor(t){super();l(this,"clientId","");l(this,"documentId","");l(this,"changePack");l(this,"removeIfNotAttached",!1);f.util.initPartial(t,this)}static fromBinary(t,r){return new dr().fromBinary(t,r)}static fromJson(t,r){return new dr().fromJson(t,r)}static fromJsonString(t,r){return new dr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(dr,t,r)}};l(dr,"runtime",f),l(dr,"typeName","yorkie.v1.DetachDocumentRequest"),l(dr,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:Ur},{no:4,name:"remove_if_not_attached",kind:"scalar",T:8}]));let Qc=dr;const hr=class hr extends O{constructor(t){super();l(this,"changePack");f.util.initPartial(t,this)}static fromBinary(t,r){return new hr().fromBinary(t,r)}static fromJson(t,r){return new hr().fromJson(t,r)}static fromJsonString(t,r){return new hr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(hr,t,r)}};l(hr,"runtime",f),l(hr,"typeName","yorkie.v1.DetachDocumentResponse"),l(hr,"fields",f.util.newFieldList(()=>[{no:2,name:"change_pack",kind:"message",T:Ur}]));let Zc=hr;const gr=class gr extends O{constructor(t){super();l(this,"clientId","");l(this,"documentId","");f.util.initPartial(t,this)}static fromBinary(t,r){return new gr().fromBinary(t,r)}static fromJson(t,r){return new gr().fromJson(t,r)}static fromJsonString(t,r){return new gr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(gr,t,r)}};l(gr,"runtime",f),l(gr,"typeName","yorkie.v1.WatchDocumentRequest"),l(gr,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9}]));let ef=gr;const mr=class mr extends O{constructor(t){super();l(this,"body",{case:void 0});f.util.initPartial(t,this)}static fromBinary(t,r){return new mr().fromBinary(t,r)}static fromJson(t,r){return new mr().fromJson(t,r)}static fromJsonString(t,r){return new mr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(mr,t,r)}};l(mr,"runtime",f),l(mr,"typeName","yorkie.v1.WatchDocumentResponse"),l(mr,"fields",f.util.newFieldList(()=>[{no:1,name:"initialization",kind:"message",T:nf,oneof:"body"},{no:2,name:"event",kind:"message",T:qc,oneof:"body"}]));let tf=mr;const pr=class pr extends O{constructor(t){super();l(this,"clientIds",[]);f.util.initPartial(t,this)}static fromBinary(t,r){return new pr().fromBinary(t,r)}static fromJson(t,r){return new pr().fromJson(t,r)}static fromJsonString(t,r){return new pr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(pr,t,r)}};l(pr,"runtime",f),l(pr,"typeName","yorkie.v1.WatchDocumentResponse.Initialization"),l(pr,"fields",f.util.newFieldList(()=>[{no:1,name:"client_ids",kind:"scalar",T:9,repeated:!0}]));let nf=pr;const yr=class yr extends O{constructor(t){super();l(this,"clientId","");l(this,"documentId","");l(this,"changePack");f.util.initPartial(t,this)}static fromBinary(t,r){return new yr().fromBinary(t,r)}static fromJson(t,r){return new yr().fromJson(t,r)}static fromJsonString(t,r){return new yr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(yr,t,r)}};l(yr,"runtime",f),l(yr,"typeName","yorkie.v1.RemoveDocumentRequest"),l(yr,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:Ur}]));let rf=yr;const vr=class vr extends O{constructor(t){super();l(this,"changePack");f.util.initPartial(t,this)}static fromBinary(t,r){return new vr().fromBinary(t,r)}static fromJson(t,r){return new vr().fromJson(t,r)}static fromJsonString(t,r){return new vr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(vr,t,r)}};l(vr,"runtime",f),l(vr,"typeName","yorkie.v1.RemoveDocumentResponse"),l(vr,"fields",f.util.newFieldList(()=>[{no:1,name:"change_pack",kind:"message",T:Ur}]));let sf=vr;const wr=class wr extends O{constructor(t){super();l(this,"clientId","");l(this,"documentId","");l(this,"changePack");l(this,"pushOnly",!1);f.util.initPartial(t,this)}static fromBinary(t,r){return new wr().fromBinary(t,r)}static fromJson(t,r){return new wr().fromJson(t,r)}static fromJsonString(t,r){return new wr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(wr,t,r)}};l(wr,"runtime",f),l(wr,"typeName","yorkie.v1.PushPullChangesRequest"),l(wr,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:Ur},{no:4,name:"push_only",kind:"scalar",T:8}]));let of=wr;const Sr=class Sr extends O{constructor(t){super();l(this,"changePack");f.util.initPartial(t,this)}static fromBinary(t,r){return new Sr().fromBinary(t,r)}static fromJson(t,r){return new Sr().fromJson(t,r)}static fromJsonString(t,r){return new Sr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Sr,t,r)}};l(Sr,"runtime",f),l(Sr,"typeName","yorkie.v1.PushPullChangesResponse"),l(Sr,"fields",f.util.newFieldList(()=>[{no:1,name:"change_pack",kind:"message",T:Ur}]));let af=Sr;const kr=class kr extends O{constructor(t){super();l(this,"clientId","");l(this,"documentId","");l(this,"topic","");l(this,"payload",new Uint8Array(0));f.util.initPartial(t,this)}static fromBinary(t,r){return new kr().fromBinary(t,r)}static fromJson(t,r){return new kr().fromJson(t,r)}static fromJsonString(t,r){return new kr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(kr,t,r)}};l(kr,"runtime",f),l(kr,"typeName","yorkie.v1.BroadcastRequest"),l(kr,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"topic",kind:"scalar",T:9},{no:4,name:"payload",kind:"scalar",T:12}]));let lf=kr;const Tr=class Tr extends O{constructor(e){super(),f.util.initPartial(e,this)}static fromBinary(e,t){return new Tr().fromBinary(e,t)}static fromJson(e,t){return new Tr().fromJson(e,t)}static fromJsonString(e,t){return new Tr().fromJsonString(e,t)}static equals(e,t){return f.util.equals(Tr,e,t)}};l(Tr,"runtime",f),l(Tr,"typeName","yorkie.v1.BroadcastResponse"),l(Tr,"fields",f.util.newFieldList(()=>[]));let uf=Tr;const nS={typeName:"yorkie.v1.YorkieService",methods:{activateClient:{name:"ActivateClient",I:Wc,O:Hc,kind:Je.Unary},deactivateClient:{name:"DeactivateClient",I:_c,O:Gc,kind:Je.Unary},attachDocument:{name:"AttachDocument",I:Yc,O:Xc,kind:Je.Unary},detachDocument:{name:"DetachDocument",I:Qc,O:Zc,kind:Je.Unary},removeDocument:{name:"RemoveDocument",I:rf,O:sf,kind:Je.Unary},pushPullChanges:{name:"PushPullChanges",I:of,O:af,kind:Je.Unary},watchDocument:{name:"WatchDocument",I:ef,O:tf,kind:Je.ServerStreaming},broadcast:{name:"Broadcast",I:lf,O:uf,kind:Je.Unary}}},rS=f.makeMessageType("google.rpc.ErrorInfo",()=>[{no:1,name:"reason",kind:"scalar",T:9},{no:2,name:"domain",kind:"scalar",T:9},{no:3,name:"metadata",kind:"map",K:9,V:{kind:"scalar",T:9}}]);f.makeMessageType("google.rpc.RetryInfo",()=>[{no:1,name:"retry_delay",kind:"message",T:Nr}]);f.makeMessageType("google.rpc.DebugInfo",()=>[{no:1,name:"stack_entries",kind:"scalar",T:9,repeated:!0},{no:2,name:"detail",kind:"scalar",T:9}]);f.makeMessageType("google.rpc.QuotaFailure",()=>[{no:1,name:"violations",kind:"message",T:iS,repeated:!0}]);const iS=f.makeMessageType("google.rpc.QuotaFailure.Violation",()=>[{no:1,name:"subject",kind:"scalar",T:9},{no:2,name:"description",kind:"scalar",T:9},{no:3,name:"api_service",kind:"scalar",T:9},{no:4,name:"quota_metric",kind:"scalar",T:9},{no:5,name:"quota_id",kind:"scalar",T:9},{no:6,name:"quota_dimensions",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:7,name:"quota_value",kind:"scalar",T:3},{no:8,name:"future_quota_value",kind:"scalar",T:3,opt:!0}],{localName:"QuotaFailure_Violation"});f.makeMessageType("google.rpc.PreconditionFailure",()=>[{no:1,name:"violations",kind:"message",T:sS,repeated:!0}]);const sS=f.makeMessageType("google.rpc.PreconditionFailure.Violation",()=>[{no:1,name:"type",kind:"scalar",T:9},{no:2,name:"subject",kind:"scalar",T:9},{no:3,name:"description",kind:"scalar",T:9}],{localName:"PreconditionFailure_Violation"});f.makeMessageType("google.rpc.BadRequest",()=>[{no:1,name:"field_violations",kind:"message",T:oS,repeated:!0}]);const oS=f.makeMessageType("google.rpc.BadRequest.FieldViolation",()=>[{no:1,name:"field",kind:"scalar",T:9},{no:2,name:"description",kind:"scalar",T:9},{no:3,name:"reason",kind:"scalar",T:9},{no:4,name:"localized_message",kind:"message",T:lS}],{localName:"BadRequest_FieldViolation"});f.makeMessageType("google.rpc.RequestInfo",()=>[{no:1,name:"request_id",kind:"scalar",T:9},{no:2,name:"serving_data",kind:"scalar",T:9}]);f.makeMessageType("google.rpc.ResourceInfo",()=>[{no:1,name:"resource_type",kind:"scalar",T:9},{no:2,name:"resource_name",kind:"scalar",T:9},{no:3,name:"owner",kind:"scalar",T:9},{no:4,name:"description",kind:"scalar",T:9}]);f.makeMessageType("google.rpc.Help",()=>[{no:1,name:"links",kind:"message",T:aS,repeated:!0}]);const aS=f.makeMessageType("google.rpc.Help.Link",()=>[{no:1,name:"description",kind:"scalar",T:9},{no:2,name:"url",kind:"scalar",T:9}],{localName:"Help_Link"}),lS=f.makeMessageType("google.rpc.LocalizedMessage",()=>[{no:1,name:"locale",kind:"scalar",T:9},{no:2,name:"message",kind:"scalar",T:9}]);var k=(n=>(n.Ok="ok",n.ErrClientNotActivated="ErrClientNotActivated",n.ErrClientNotFound="ErrClientNotFound",n.ErrUnimplemented="ErrUnimplemented",n.ErrInvalidType="ErrInvalidType",n.ErrDummy="ErrDummy",n.ErrDocumentNotAttached="ErrDocumentNotAttached",n.ErrDocumentNotDetached="ErrDocumentNotDetached",n.ErrDocumentRemoved="ErrDocumentRemoved",n.ErrDocumentSizeExceedsLimit="ErrDocumentSizeExceedsLimit",n.ErrDocumentSchemaValidationFailed="ErrDocumentSchemaValidationFailed",n.ErrInvalidObjectKey="ErrInvalidObjectKey",n.ErrInvalidArgument="ErrInvalidArgument",n.ErrNotInitialized="ErrNotInitialized",n.ErrNotReady="ErrNotReady",n.ErrRefused="ErrRefused",n.ErrContextNotProvided="ErrContextNotProvided",n.ErrPermissionDenied="ErrPermissionDenied",n.ErrUnauthenticated="ErrUnauthenticated",n.ErrTooManySubscribers="ErrTooManySubscribers",n.ErrTooManyAttachments="ErrTooManyAttachments",n))(k||{});class T extends Error{constructor(t,r){super(r);l(this,"name","YorkieError");l(this,"stack");this.code=t,this.message=r,this.toString=()=>`[code=${this.code}]: ${this.message}`}}var gn=(n=>(n.Put="put",n.Clear="clear",n))(gn||{});const gd="000000000000000000000000",cn=24;class Ct{constructor(e,t,r){l(this,"lamport");l(this,"delimiter");l(this,"actorID");this.lamport=e,this.delimiter=t,this.actorID=r}static of(e,t,r){return new Ct(e,t,r)}static fromStruct(e){return Ct.of(BigInt(e.lamport),e.delimiter,e.actorID)}toIDString(){return`${this.lamport.toString()}:${this.actorID}:${this.delimiter}`}toStruct(){return{lamport:this.getLamportAsString(),delimiter:this.getDelimiter(),actorID:this.getActorID()}}toTestString(){return`${this.lamport.toString()}:${this.actorID.slice(-2)}:${this.delimiter}`}setActor(e){return new Ct(this.lamport,this.delimiter,e)}getLamportAsString(){return this.lamport.toString()}getLamport(){return this.lamport}getDelimiter(){return this.delimiter}getActorID(){return this.actorID}after(e){return this.compare(e)>0}equals(e){return this.compare(e)===0}compare(e){if(this.lamport>e.lamport)return 1;if(e.lamport>this.lamport)return-1;const t=this.actorID.localeCompare(e.actorID);return t!==0?t:this.delimiter>e.delimiter?1:e.delimiter>this.delimiter?-1:0}}const cf=0n,Ey=0,$a=9223372036854775807n,Es=new Ct(cf,Ey,gd);function an(n){return n.replace(/["'\\\n\r\f\b\t\u2028\u2029]/g,function(e){switch(e){case'"':case"\\":return"\\"+e;case`
`:return"\\n";case"\r":return"\\r";case"\f":return"\\f";case"\b":return"\\b";case"	":return"\\t";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:return e}})}class Wo{constructor(e){l(this,"createdAt");l(this,"movedAt");l(this,"removedAt");this.createdAt=e}getCreatedAt(){return this.createdAt}getID(){return this.createdAt}getMovedAt(){return this.movedAt}getRemovedAt(){return this.removedAt}getPositionedAt(){return this.movedAt?this.movedAt:this.createdAt}setCreatedAt(e){this.createdAt=e}setMovedAt(e){return!this.movedAt||e&&e.after(this.movedAt)?(this.movedAt=e,!0):!1}setRemovedAt(e){this.removedAt=e}remove(e){return e&&e.after(this.createdAt)&&(!this.removedAt||e.after(this.removedAt))?(this.removedAt=e,!0):!1}isRemoved(){return!!this.removedAt}getMetaUsage(){let e=0;return this.getCreatedAt()&&(e+=cn),this.getMovedAt()&&(e+=cn),this.getRemovedAt()&&(e+=cn),e}}class li extends Wo{constructor(e){super(e)}}class md{constructor(e,t){l(this,"strKey");l(this,"value");this.strKey=e,this.value=t}static of(e,t){return new md(e,t)}isRemoved(){return this.value.isRemoved()}getStrKey(){return this.strKey}getValue(){return this.value}remove(e){return this.value.remove(e)}}class Bo{constructor(){l(this,"nodeMapByKey");l(this,"nodeMapByCreatedAt");this.nodeMapByKey=new Map,this.nodeMapByCreatedAt=new Map}static create(){return new Bo}set(e,t,r){let i;const s=this.nodeMapByKey.get(e);s&&!s.isRemoved()&&s.remove(r)&&(i=s.getValue());const o=md.of(e,t);return this.nodeMapByCreatedAt.set(t.getCreatedAt().toIDString(),o),(!s||r.after(s.getValue().getPositionedAt()))&&(this.nodeMapByKey.set(e,o),t.setMovedAt(r)),i}delete(e,t){if(!this.nodeMapByCreatedAt.has(e.toIDString()))throw new T(k.ErrInvalidArgument,`fail to find ${e.toIDString()}`);const r=this.nodeMapByCreatedAt.get(e.toIDString());return r.remove(t),r.getValue()}subPathOf(e){const t=this.nodeMapByCreatedAt.get(e.toIDString());if(t)return t.getStrKey()}purge(e){const t=this.nodeMapByCreatedAt.get(e.getCreatedAt().toIDString());if(!t)throw new T(k.ErrInvalidArgument,`fail to find ${e.getCreatedAt().toIDString()}`);const r=this.nodeMapByKey.get(t.getStrKey());t===r&&this.nodeMapByKey.delete(r.getStrKey()),this.nodeMapByCreatedAt.delete(t.getValue().getCreatedAt().toIDString())}deleteByKey(e,t){const r=this.nodeMapByKey.get(e);if(r&&r.remove(t))return r.getValue()}has(e){const t=this.nodeMapByKey.get(e);return t?!t.isRemoved():!1}getByID(e){return this.nodeMapByCreatedAt.get(e.toIDString())}get(e){const t=this.nodeMapByKey.get(e);if(!(!t||t.isRemoved()))return t}*[Symbol.iterator](){for(const[,e]of this.nodeMapByKey)yield e}}class Be extends li{constructor(t,r){super(t);l(this,"memberNodes");this.memberNodes=r}static create(t,r){if(!r)return new Be(t,Bo.create());const i=Bo.create();for(const[s,o]of Object.entries(r))i.set(s,o.deepcopy(),o.getCreatedAt());return new Be(t,i)}subPathOf(t){return this.memberNodes.subPathOf(t)}purge(t){this.memberNodes.purge(t)}set(t,r,i){return this.memberNodes.set(t,r,i)}delete(t,r){return this.memberNodes.delete(t,r)}deleteByKey(t,r){return this.memberNodes.deleteByKey(t,r)}get(t){const r=this.memberNodes.get(t);return r==null?void 0:r.getValue()}getByID(t){const r=this.memberNodes.getByID(t);return r==null?void 0:r.getValue()}has(t){return this.memberNodes.has(t)}getDataSize(){return{data:0,meta:this.getMetaUsage()}}toJSON(){const t=[];for(const[r,i]of this)t.push(`"${an(r)}":${i.toJSON()}`);return`{${t.join(",")}}`}toJS(){return JSON.parse(this.toJSON())}toJSForTest(){const t={};for(const[r,i]of this){const{createdAt:s,value:o,type:a}=i.toJSForTest();t[r]={key:r,createdAt:s,value:o,type:a}}return{createdAt:this.getCreatedAt().toTestString(),value:t,type:"YORKIE_OBJECT"}}getKeys(){const t=Array();for(const[r]of this)t.push(r);return t}toSortedJSON(){var i;const t=Array();for(const[s]of this)t.push(s);const r=[];for(const s of t.sort()){const o=(i=this.memberNodes.get(s))==null?void 0:i.getValue();r.push(`"${an(s)}":${o.toSortedJSON()}`)}return`{${r.join(",")}}`}getRHT(){return this.memberNodes}deepcopy(){const t=Be.create(this.getCreatedAt());for(const r of this.memberNodes)t.memberNodes.set(r.getStrKey(),r.getValue().deepcopy(),this.getPositionedAt());return t.remove(this.getRemovedAt()),t}getDescendants(t){for(const r of this.memberNodes){const i=r.getValue();if(t(i,this))return;i instanceof li&&i.getDescendants(t)}}*[Symbol.iterator](){const t=new Set;for(const r of this.memberNodes)t.has(r.getStrKey())||(t.add(r.getStrKey()),r.isRemoved()||(yield[r.getStrKey(),r.getValue()]))}}var ee=(n=>(n.Local="local",n.Remote="remote",n.UndoRedo="undoredo",n))(ee||{});class Dt{constructor(e,t){l(this,"parentCreatedAt");l(this,"executedAt");this.parentCreatedAt=e,this.executedAt=t}getParentCreatedAt(){return this.parentCreatedAt}getExecutedAt(){if(!this.executedAt)throw new T(k.ErrNotReady,"executedAt is not set yet");return this.executedAt}setActor(e){this.executedAt&&(this.executedAt=this.executedAt.setActor(e))}setExecutedAt(e){this.executedAt=e}}class Cy{constructor(e){l(this,"value");l(this,"left");l(this,"right");l(this,"parent");l(this,"weight");this.value=e,this.initWeight()}getNodeString(){return`${this.weight}${this.value}`}getValue(){return this.value}getLeftWeight(){return this.hasLeft()?this.left.getWeight():0}getRightWeight(){return this.hasRight()?this.right.getWeight():0}getWeight(){return this.weight}getLeft(){return this.left}getRight(){return this.right}getParent(){return this.parent}hasLeft(){return!!this.left}hasRight(){return!!this.right}hasParent(){return!!this.parent}setLeft(e){this.left=e}setRight(e){this.right=e}setParent(e){this.parent=e}unlink(){this.parent=void 0,this.right=void 0,this.left=void 0}hasLinks(){return this.hasParent()||this.hasLeft()||this.hasRight()}increaseWeight(e){this.weight+=e}initWeight(){this.weight=this.getLength()}}class zo{constructor(e){l(this,"root");this.root=e}get length(){return this.root?this.root.getWeight():0}find(e){if(!this.root||e<0)return[void 0,0];let t=this.root;for(;;)if(t.hasLeft()&&e<=t.getLeftWeight())t=t.getLeft();else if(t.hasRight()&&t.getLeftWeight()+t.getLength()<e)e-=t.getLeftWeight()+t.getLength(),t=t.getRight();else{e-=t.getLeftWeight();break}if(e>t.getLength())throw new T(k.ErrInvalidArgument,`out of index range: pos: ${e} > node.length: ${t.getLength()}`);return this.splayNode(t),[t,e]}indexOf(e){return!e||e!==this.root&&!e.hasLinks()?-1:(this.splayNode(e),this.root.getLeftWeight())}getRoot(){return this.root}insert(e){return this.insertAfter(this.root,e)}insertAfter(e,t){return e?(this.splayNode(e),this.root=t,t.setRight(e.getRight()),e.hasRight()&&e.getRight().setParent(t),t.setLeft(e),e.setParent(t),e.setRight(),this.updateWeight(e),this.updateWeight(t),t):(this.root=t,t)}updateWeight(e){e.initWeight(),e.hasLeft()&&e.increaseWeight(e.getLeftWeight()),e.hasRight()&&e.increaseWeight(e.getRightWeight())}updateTreeWeight(e){for(;e;)this.updateWeight(e),e=e.getParent()}splayNode(e){if(e)for(;;)if(this.isLeftChild(e.getParent())&&this.isRightChild(e))this.rotateLeft(e),this.rotateRight(e);else if(this.isRightChild(e.getParent())&&this.isLeftChild(e))this.rotateRight(e),this.rotateLeft(e);else if(this.isLeftChild(e.getParent())&&this.isLeftChild(e))this.rotateRight(e.getParent()),this.rotateRight(e);else if(this.isRightChild(e.getParent())&&this.isRightChild(e))this.rotateLeft(e.getParent()),this.rotateLeft(e);else{this.isLeftChild(e)?this.rotateRight(e):this.isRightChild(e)&&this.rotateLeft(e),this.updateWeight(e);return}}delete(e){this.splayNode(e);const t=new zo(e.getLeft());t.root&&t.root.setParent();const r=new zo(e.getRight());if(r.root&&r.root.setParent(),t.root){const i=t.getRightmost();t.splayNode(i),t.root.setRight(r.root),r.root&&r.root.setParent(t.root),this.root=t.root}else this.root=r.root;e.unlink(),this.root&&this.updateWeight(this.root)}deleteRange(e,t){if(!t){this.splayNode(e),this.cutOffRight(e);return}this.splayNode(e),this.splayNode(t),t.getLeft()!=e&&this.rotateRight(e),this.cutOffRight(e)}cutOffRight(e){const t=[];this.traversePostorder(e.getRight(),t);for(const r of t)r.initWeight();this.updateTreeWeight(e)}toTestString(){const e=[];return this.traverseInorder(this.root,e),e.map(t=>`[${t.getWeight()},${t.getLength()}]${t.getValue()||""}`).join("")}checkWeight(){const e=[];this.traverseInorder(this.root,e);for(const t of e)if(t.getWeight()!=t.getLength()+t.getLeftWeight()+t.getRightWeight())return!1;return!0}getRightmost(){let e=this.root;for(;e.hasRight();)e=e.getRight();return e}traverseInorder(e,t){e&&(this.traverseInorder(e.getLeft(),t),t.push(e),this.traverseInorder(e.getRight(),t))}traversePostorder(e,t){e&&(this.traversePostorder(e.getLeft(),t),this.traversePostorder(e.getRight(),t),t.push(e))}rotateLeft(e){const t=e.getParent();t.hasParent()?t===t.getParent().getLeft()?t.getParent().setLeft(e):t.getParent().setRight(e):this.root=e,e.setParent(t.getParent()),t.setRight(e.getLeft()),t.hasRight()&&t.getRight().setParent(t),e.setLeft(t),e.getLeft().setParent(e),this.updateWeight(t),this.updateWeight(e)}rotateRight(e){const t=e.getParent();t.hasParent()?t===t.getParent().getLeft()?t.getParent().setLeft(e):t.getParent().setRight(e):this.root=e,e.setParent(t.getParent()),t.setLeft(e.getRight()),t.hasLeft()&&t.getLeft().setParent(t),e.setRight(t),e.getRight().setParent(e),this.updateWeight(t),this.updateWeight(e)}isLeftChild(e){return e&&e.hasParent()?e.getParent().getLeft()===e:!1}isRightChild(e){return e&&e.hasParent()?e.getParent().getRight()===e:!1}}/**
 * @license
 * Copyright 2009 The Closure Library Authors
 * Copyright 2020 Daniel Wirtz / The long.js Authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * SPDX-License-Identifier: Apache-2.0
 */var xt=null;try{xt=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function H(n,e,t){this.low=n|0,this.high=e|0,this.unsigned=!!t}H.prototype.__isLong__;Object.defineProperty(H.prototype,"__isLong__",{value:!0});function Fe(n){return(n&&n.__isLong__)===!0}function kg(n){var e=Math.clz32(n&-n);return n?31-e:e}H.isLong=Fe;var Tg={},Ig={};function Ui(n,e){var t,r,i;return e?(n>>>=0,(i=0<=n&&n<256)&&(r=Ig[n],r)?r:(t=Y(n,0,!0),i&&(Ig[n]=t),t)):(n|=0,(i=-128<=n&&n<128)&&(r=Tg[n],r)?r:(t=Y(n,n<0?-1:0,!1),i&&(Tg[n]=t),t))}H.fromInt=Ui;function At(n,e){if(isNaN(n))return e?Dr:$t;if(e){if(n<0)return Dr;if(n>=Ny)return Ry}else{if(n<=-Ag)return _e;if(n+1>=Ag)return Dy}return n<0?At(-n,e).neg():Y(n%Cs|0,n/Cs|0,e)}H.fromNumber=At;function Y(n,e,t){return new H(n,e,t)}H.fromBits=Y;var Bl=Math.pow;function pd(n,e,t){if(n.length===0)throw Error("empty string");if(typeof e=="number"?(t=e,e=!1):e=!!e,n==="NaN"||n==="Infinity"||n==="+Infinity"||n==="-Infinity")return e?Dr:$t;if(t=t||10,t<2||36<t)throw RangeError("radix");var r;if((r=n.indexOf("-"))>0)throw Error("interior hyphen");if(r===0)return pd(n.substring(1),e,t).neg();for(var i=At(Bl(t,8)),s=$t,o=0;o<n.length;o+=8){var a=Math.min(8,n.length-o),u=parseInt(n.substring(o,o+a),t);if(a<8){var c=At(Bl(t,a));s=s.mul(c).add(At(u))}else s=s.mul(i),s=s.add(At(u))}return s.unsigned=e,s}H.fromString=pd;function Rt(n,e){return typeof n=="number"?At(n,e):typeof n=="string"?pd(n,e):Y(n.low,n.high,typeof e=="boolean"?e:n.unsigned)}H.fromValue=Rt;var xg=65536,uS=1<<24,Cs=xg*xg,Ny=Cs*Cs,Ag=Ny/2,Eg=Ui(uS),$t=Ui(0);H.ZERO=$t;var Dr=Ui(0,!0);H.UZERO=Dr;var is=Ui(1);H.ONE=is;var Py=Ui(1,!0);H.UONE=Py;var ff=Ui(-1);H.NEG_ONE=ff;var Dy=Y(-1,2147483647,!1);H.MAX_VALUE=Dy;var Ry=Y(-1,-1,!0);H.MAX_UNSIGNED_VALUE=Ry;var _e=Y(0,-2147483648,!1);H.MIN_VALUE=_e;var P=H.prototype;P.toInt=function(){return this.unsigned?this.low>>>0:this.low};P.toNumber=function(){return this.unsigned?(this.high>>>0)*Cs+(this.low>>>0):this.high*Cs+(this.low>>>0)};P.toString=function(e){if(e=e||10,e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(_e)){var t=At(e),r=this.div(t),i=r.mul(t).sub(this);return r.toString(e)+i.toInt().toString(e)}else return"-"+this.neg().toString(e);for(var s=At(Bl(e,6),this.unsigned),o=this,a="";;){var u=o.div(s),c=o.sub(u.mul(s)).toInt()>>>0,d=c.toString(e);if(o=u,o.isZero())return d+a;for(;d.length<6;)d="0"+d;a=""+d+a}};P.getHighBits=function(){return this.high};P.getHighBitsUnsigned=function(){return this.high>>>0};P.getLowBits=function(){return this.low};P.getLowBitsUnsigned=function(){return this.low>>>0};P.getNumBitsAbs=function(){if(this.isNegative())return this.eq(_e)?64:this.neg().getNumBitsAbs();for(var e=this.high!=0?this.high:this.low,t=31;t>0&&!(e&1<<t);t--);return this.high!=0?t+33:t+1};P.isSafeInteger=function(){var e=this.high>>21;return e?this.unsigned?!1:e===-1&&!(this.low===0&&this.high===-2097152):!0};P.isZero=function(){return this.high===0&&this.low===0};P.eqz=P.isZero;P.isNegative=function(){return!this.unsigned&&this.high<0};P.isPositive=function(){return this.unsigned||this.high>=0};P.isOdd=function(){return(this.low&1)===1};P.isEven=function(){return(this.low&1)===0};P.equals=function(e){return Fe(e)||(e=Rt(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low};P.eq=P.equals;P.notEquals=function(e){return!this.eq(e)};P.neq=P.notEquals;P.ne=P.notEquals;P.lessThan=function(e){return this.comp(e)<0};P.lt=P.lessThan;P.lessThanOrEqual=function(e){return this.comp(e)<=0};P.lte=P.lessThanOrEqual;P.le=P.lessThanOrEqual;P.greaterThan=function(e){return this.comp(e)>0};P.gt=P.greaterThan;P.greaterThanOrEqual=function(e){return this.comp(e)>=0};P.gte=P.greaterThanOrEqual;P.ge=P.greaterThanOrEqual;P.compare=function(e){if(Fe(e)||(e=Rt(e)),this.eq(e))return 0;var t=this.isNegative(),r=e.isNegative();return t&&!r?-1:!t&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1};P.comp=P.compare;P.negate=function(){return!this.unsigned&&this.eq(_e)?_e:this.not().add(is)};P.neg=P.negate;P.add=function(e){Fe(e)||(e=Rt(e));var t=this.high>>>16,r=this.high&65535,i=this.low>>>16,s=this.low&65535,o=e.high>>>16,a=e.high&65535,u=e.low>>>16,c=e.low&65535,d=0,h=0,g=0,p=0;return p+=s+c,g+=p>>>16,p&=65535,g+=i+u,h+=g>>>16,g&=65535,h+=r+a,d+=h>>>16,h&=65535,d+=t+o,d&=65535,Y(g<<16|p,d<<16|h,this.unsigned)};P.subtract=function(e){return Fe(e)||(e=Rt(e)),this.add(e.neg())};P.sub=P.subtract;P.multiply=function(e){if(this.isZero())return this;if(Fe(e)||(e=Rt(e)),xt){var t=xt.mul(this.low,this.high,e.low,e.high);return Y(t,xt.get_high(),this.unsigned)}if(e.isZero())return this.unsigned?Dr:$t;if(this.eq(_e))return e.isOdd()?_e:$t;if(e.eq(_e))return this.isOdd()?_e:$t;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(Eg)&&e.lt(Eg))return At(this.toNumber()*e.toNumber(),this.unsigned);var r=this.high>>>16,i=this.high&65535,s=this.low>>>16,o=this.low&65535,a=e.high>>>16,u=e.high&65535,c=e.low>>>16,d=e.low&65535,h=0,g=0,p=0,v=0;return v+=o*d,p+=v>>>16,v&=65535,p+=s*d,g+=p>>>16,p&=65535,p+=o*c,g+=p>>>16,p&=65535,g+=i*d,h+=g>>>16,g&=65535,g+=s*c,h+=g>>>16,g&=65535,g+=o*u,h+=g>>>16,g&=65535,h+=r*d+i*c+s*u+o*a,h&=65535,Y(p<<16|v,h<<16|g,this.unsigned)};P.mul=P.multiply;P.divide=function(e){if(Fe(e)||(e=Rt(e)),e.isZero())throw Error("division by zero");if(xt){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;var t=(this.unsigned?xt.div_u:xt.div_s)(this.low,this.high,e.low,e.high);return Y(t,xt.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?Dr:$t;var r,i,s;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return Dr;if(e.gt(this.shru(1)))return Py;s=Dr}else{if(this.eq(_e)){if(e.eq(is)||e.eq(ff))return _e;if(e.eq(_e))return is;var o=this.shr(1);return r=o.div(e).shl(1),r.eq($t)?e.isNegative()?is:ff:(i=this.sub(e.mul(r)),s=r.add(i.div(e)),s)}else if(e.eq(_e))return this.unsigned?Dr:$t;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();s=$t}for(i=this;i.gte(e);){r=Math.max(1,Math.floor(i.toNumber()/e.toNumber()));for(var a=Math.ceil(Math.log(r)/Math.LN2),u=a<=48?1:Bl(2,a-48),c=At(r),d=c.mul(e);d.isNegative()||d.gt(i);)r-=u,c=At(r,this.unsigned),d=c.mul(e);c.isZero()&&(c=is),s=s.add(c),i=i.sub(d)}return s};P.div=P.divide;P.modulo=function(e){if(Fe(e)||(e=Rt(e)),xt){var t=(this.unsigned?xt.rem_u:xt.rem_s)(this.low,this.high,e.low,e.high);return Y(t,xt.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))};P.mod=P.modulo;P.rem=P.modulo;P.not=function(){return Y(~this.low,~this.high,this.unsigned)};P.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32};P.clz=P.countLeadingZeros;P.countTrailingZeros=function(){return this.low?kg(this.low):kg(this.high)+32};P.ctz=P.countTrailingZeros;P.and=function(e){return Fe(e)||(e=Rt(e)),Y(this.low&e.low,this.high&e.high,this.unsigned)};P.or=function(e){return Fe(e)||(e=Rt(e)),Y(this.low|e.low,this.high|e.high,this.unsigned)};P.xor=function(e){return Fe(e)||(e=Rt(e)),Y(this.low^e.low,this.high^e.high,this.unsigned)};P.shiftLeft=function(e){return Fe(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?Y(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):Y(0,this.low<<e-32,this.unsigned)};P.shl=P.shiftLeft;P.shiftRight=function(e){return Fe(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?Y(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):Y(this.high>>e-32,this.high>=0?0:-1,this.unsigned)};P.shr=P.shiftRight;P.shiftRightUnsigned=function(e){return Fe(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?Y(this.low>>>e|this.high<<32-e,this.high>>>e,this.unsigned):e===32?Y(this.high,0,this.unsigned):Y(this.high>>>e-32,0,this.unsigned)};P.shru=P.shiftRightUnsigned;P.shr_u=P.shiftRightUnsigned;P.rotateLeft=function(e){var t;return Fe(e)&&(e=e.toInt()),(e&=63)===0?this:e===32?Y(this.high,this.low,this.unsigned):e<32?(t=32-e,Y(this.low<<e|this.high>>>t,this.high<<e|this.low>>>t,this.unsigned)):(e-=32,t=32-e,Y(this.high<<e|this.low>>>t,this.low<<e|this.high>>>t,this.unsigned))};P.rotl=P.rotateLeft;P.rotateRight=function(e){var t;return Fe(e)&&(e=e.toInt()),(e&=63)===0?this:e===32?Y(this.high,this.low,this.unsigned):e<32?(t=32-e,Y(this.high<<t|this.low>>>e,this.low<<t|this.high>>>e,this.unsigned)):(e-=32,t=32-e,Y(this.low<<t|this.high>>>e,this.high<<t|this.low>>>e,this.unsigned))};P.rotr=P.rotateRight;P.toSigned=function(){return this.unsigned?Y(this.low,this.high,!1):this};P.toUnsigned=function(){return this.unsigned?this:Y(this.low,this.high,!0)};P.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()};P.toBytesLE=function(){var e=this.high,t=this.low;return[t&255,t>>>8&255,t>>>16&255,t>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]};P.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,t>>>24,t>>>16&255,t>>>8&255,t&255]};H.fromBytes=function(e,t,r){return r?H.fromBytesLE(e,t):H.fromBytesBE(e,t)};H.fromBytesLE=function(e,t){return new H(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)};H.fromBytesBE=function(e,t){return new H(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)};typeof BigInt=="function"&&(H.fromBigInt=function(e,t){var r=Number(BigInt.asIntN(32,e)),i=Number(BigInt.asIntN(32,e>>BigInt(32)));return Y(r,i,t)},H.fromValue=function(e,t){return typeof e=="bigint"?H.fromBigInt(e,t):Rt(e,t)},P.toBigInt=function(){var e=BigInt(this.low>>>0),t=BigInt(this.unsigned?this.high>>>0:this.high);return t<<BigInt(32)|e});var te=(n=>(n[n.Null=0]="Null",n[n.Boolean=1]="Boolean",n[n.Integer=2]="Integer",n[n.Long=3]="Long",n[n.Double=4]="Double",n[n.String=5]="String",n[n.Bytes=6]="Bytes",n[n.Date=7]="Date",n))(te||{});class le extends Wo{constructor(t,r){super(r);l(this,"valueType");l(this,"value");this.valueType=le.getPrimitiveType(t),this.value=t===void 0?null:t}static of(t,r){return new le(t,r)}static valueFromBytes(t,r){switch(t){case 0:return null;case 1:return!!r[0];case 2:return r[0]|r[1]<<8|r[2]<<16|r[3]<<24;case 4:{const i=new DataView(r.buffer);return r.forEach(function(s,o){i.setUint8(o,s)}),i.getFloat64(0,!0)}case 5:return new TextDecoder("utf-8").decode(r);case 3:return H.fromBytesLE(Array.from(r));case 6:return r;case 7:return new Date(H.fromBytesLE(Array.from(r),!0).toNumber());default:throw new T(k.ErrUnimplemented,`unimplemented type: ${t}`)}}getValueSize(){switch(this.valueType){case 0:return 8;case 1:return 4;case 2:return 4;case 3:return 8;case 4:return 8;case 5:return this.value.length*2;case 6:return this.value.length;case 7:return 8;default:throw new T(k.ErrUnimplemented,`unimplemented type: ${this.valueType}`)}}getDataSize(){return{data:this.getValueSize(),meta:this.getMetaUsage()}}toJSON(){return this.valueType===5?`"${an(this.value)}"`:`${this.value}`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:this.value,type:"YORKIE_PRIMITIVE"}}deepcopy(){const t=le.of(this.value,this.getCreatedAt());return t.setMovedAt(this.getMovedAt()),t.setRemovedAt(this.getRemovedAt()),t}getType(){return this.valueType}static getPrimitiveType(t){switch(typeof t){case"undefined":return 0;case"boolean":return 1;case"number":return this.isInteger(t)?2:4;case"string":return 5;case"object":if(t===null)return 0;if(t instanceof H)return 3;if(t instanceof Uint8Array)return 6;if(t instanceof Date)return 7}}static isSupport(t){return le.getPrimitiveType(t)!==void 0}static isInteger(t){return t%1===0}isNumericType(){const t=this.valueType;return t===2||t===3||t===4}getValue(){return this.value}toBytes(){switch(this.valueType){case 0:return new Uint8Array;case 1:return this.value?new Uint8Array([1]):new Uint8Array([0]);case 2:{const t=this.value;return new Uint8Array([t&255,t>>8&255,t>>16&255,t>>24&255])}case 4:{const t=this.value,r=new Uint8Array(8);return new DataView(r.buffer).setFloat64(0,t,!0),r}case 5:return new TextEncoder().encode(this.value);case 3:{const r=this.value.toBytesLE();return Uint8Array.from(r)}case 6:return this.value;case 7:{const t=this.value,r=H.fromNumber(t.getTime(),!0).toBytesLE();return Uint8Array.from(r)}default:throw new T(k.ErrUnimplemented,`unimplemented type: ${this.valueType}`)}}}class zl extends Cy{constructor(t){super(t);l(this,"prev");l(this,"next");l(this,"movedFrom");this.value=t}static createAfter(t,r){const i=new zl(r),s=t.next;return t.next=i,i.prev=t,i.next=s,s&&(s.prev=i),i}remove(t){return this.value.remove(t)}getCreatedAt(){return this.value.getCreatedAt()}getPositionedAt(){return this.value.getPositionedAt()}release(){this.prev&&(this.prev.next=this.next),this.next&&(this.next.prev=this.prev),this.prev=void 0,this.next=void 0}getLength(){return this.value.isRemoved()?0:1}getPrev(){return this.prev}getNext(){return this.next}getMovedFrom(){return this.movedFrom}setMovedFrom(t){this.movedFrom=t}getValue(){return this.value}isRemoved(){return this.value.isRemoved()}}class Mo{constructor(){l(this,"dummyHead");l(this,"last");l(this,"nodeMapByIndex");l(this,"nodeMapByCreatedAt");const e=le.of(0,Es);e.setRemovedAt(Es),this.dummyHead=new zl(e),this.last=this.dummyHead,this.nodeMapByIndex=new zo,this.nodeMapByCreatedAt=new Map,this.nodeMapByIndex.insert(this.dummyHead),this.nodeMapByCreatedAt.set(this.dummyHead.getCreatedAt().toIDString(),this.dummyHead)}static create(){return new Mo}get length(){return this.nodeMapByIndex.length}findNextBeforeExecutedAt(e,t){let r=this.nodeMapByCreatedAt.get(e.toIDString());if(!r)throw new T(k.ErrInvalidArgument,`cant find the given node: ${e.toIDString()}`);for(;r.getValue().getMovedAt()&&r.getValue().getMovedAt().after(t)&&r.getMovedFrom();)r=r.getMovedFrom();for(;r.getNext()&&r.getNext().getPositionedAt().after(t);)r=r.getNext();return r}release(e){this.last===e&&(this.last=e.getPrev()),e.release(),this.nodeMapByIndex.delete(e),this.nodeMapByCreatedAt.delete(e.getValue().getCreatedAt().toIDString())}insertAfter(e,t,r=t.getCreatedAt()){const i=this.findNextBeforeExecutedAt(e,r),s=zl.createAfter(i,t);return i===this.last&&(this.last=s),this.nodeMapByIndex.insertAfter(i,s),this.nodeMapByCreatedAt.set(s.getCreatedAt().toIDString(),s),s}moveAfter(e,t,r){let i=this.nodeMapByCreatedAt.get(e.toIDString());if(!i)throw new T(k.ErrInvalidArgument,`cant find the given node: ${e.toIDString()}`);let s=this.nodeMapByCreatedAt.get(t.toIDString());if(!s)throw new T(k.ErrInvalidArgument,`cant find the given node: ${t.toIDString()}`);if(i!==s&&r.after(s.getPositionedAt())){const o=s.getPrev();let a=s.getNext();for(this.release(s),s=this.insertAfter(i.getCreatedAt(),s.getValue(),r),s.getValue().setMovedAt(r),s.setMovedFrom(o);a&&a.getPositionedAt().after(r);)i=s,s=a,a=s.getNext(),this.release(s),s=this.insertAfter(i.getCreatedAt(),s.getValue(),r),s.getValue().setMovedAt(r),s.setMovedFrom(o)}}insert(e){this.insertAfter(this.last.getCreatedAt(),e)}getByID(e){return this.nodeMapByCreatedAt.get(e.toIDString())}subPathOf(e){const t=this.nodeMapByCreatedAt.get(e.toIDString());if(t)return String(this.nodeMapByIndex.indexOf(t))}purge(e){const t=this.nodeMapByCreatedAt.get(e.getCreatedAt().toIDString());if(!t)throw new T(k.ErrInvalidArgument,`fail to find the given createdAt: ${e.getCreatedAt().toIDString()}`);this.release(t)}getByIndex(e){if(e>=this.length)return;const[t,r]=this.nodeMapByIndex.find(e);let i=t;if(e===0&&t===this.dummyHead||r>0)do i&&(i=i.getNext());while(i&&i.isRemoved());return i}getPrevCreatedAt(e){let t=this.nodeMapByCreatedAt.get(e.toIDString());do t=t.getPrev();while(this.dummyHead!==t&&t.isRemoved());return t.getValue().getCreatedAt()}delete(e,t){const r=this.nodeMapByCreatedAt.get(e.toIDString()),i=r.isRemoved();return r.remove(t)&&!i&&this.nodeMapByIndex.splayNode(r),r.getValue()}set(e,t,r){const i=this.nodeMapByCreatedAt.get(e.toIDString());if(!i)throw new T(k.ErrInvalidArgument,`cant find the given node: ${e.toIDString()}`);return this.insertAfter(i.getCreatedAt(),t,r),this.delete(e,r)}deleteByIndex(e,t){const r=this.getByIndex(e);if(r)return r.remove(t)&&this.nodeMapByIndex.splayNode(r),r.getValue()}getHead(){return this.dummyHead.getValue()}getLast(){return this.last.getValue()}getLastCreatedAt(){return this.last.getCreatedAt()}toTestString(){const e=[];for(const t of this){const r=`${t.getCreatedAt().toIDString()}:${t.getValue().toJSON()}`;t.isRemoved()?e.push(`{${r}}`):e.push(`[${r}]`)}return e.join("")}*[Symbol.iterator](){let e=this.dummyHead.getNext();for(;e;)yield e,e=e.getNext()}}class ze extends li{constructor(t,r){super(t);l(this,"elements");this.elements=r}static create(t,r){if(!r)return new ze(t,Mo.create());const i=Mo.create();for(const s of r)i.insertAfter(i.getLastCreatedAt(),s.deepcopy());return new ze(t,i)}subPathOf(t){return this.elements.subPathOf(t)}purge(t){this.elements.purge(t)}insertAfter(t,r,i){this.elements.insertAfter(t,r,i)}moveAfter(t,r,i){this.elements.moveAfter(t,r,i)}get(t){const r=this.elements.getByIndex(t);return r==null?void 0:r.getValue()}getByID(t){const r=this.elements.getByID(t);return r==null?void 0:r.getValue()}getHead(){return this.elements.getHead()}getLast(){return this.elements.getLast()}getPrevCreatedAt(t){return this.elements.getPrevCreatedAt(t)}delete(t,r){return this.elements.delete(t,r)}deleteByIndex(t,r){return this.elements.deleteByIndex(t,r)}set(t,r,i){return this.elements.set(t,r,i)}getLastCreatedAt(){return this.elements.getLastCreatedAt()}get length(){return this.elements.length}*[Symbol.iterator](){for(const t of this.elements)t.isRemoved()||(yield t.getValue())}toTestString(){return this.elements.toTestString()}getDescendants(t){for(const r of this.elements){const i=r.getValue();if(t(i,this))return;i instanceof li&&i.getDescendants(t)}}getDataSize(){return{data:0,meta:this.getMetaUsage()}}toJSON(){const t=[];for(const r of this)t.push(r.toJSON());return`[${t.join(",")}]`}toJS(){return JSON.parse(this.toJSON())}toJSForTest(){const t={};for(let r=0;r<this.length;r++){const{createdAt:i,value:s,type:o}=this.get(r).toJSForTest();t[r]={key:String(r),createdAt:i,value:s,type:o}}return{createdAt:this.getCreatedAt().toTestString(),value:t,type:"YORKIE_ARRAY"}}toSortedJSON(){return this.toJSON()}getElements(){return this.elements}deepcopy(){const t=ze.create(this.getCreatedAt());for(const r of this.elements)t.elements.insertAfter(t.getLastCreatedAt(),r.getValue().deepcopy());return t.remove(this.getRemovedAt()),t}}class Fr extends Dt{constructor(t,r,i,s){super(t,s);l(this,"prevCreatedAt");l(this,"value");this.prevCreatedAt=r,this.value=i}static create(t,r,i,s){return new Fr(t,r,i,s)}execute(t){const r=t.findByCreatedAt(this.getParentCreatedAt());if(!r)throw new T(k.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(r instanceof ze))throw new T(k.ErrInvalidArgument,"fail to execute, only array can execute add");const i=r,s=this.value.deepcopy();return i.insertAfter(this.prevCreatedAt,s,this.getExecutedAt()),t.registerElement(s,i),{opInfos:[{type:"add",path:t.createPath(this.getParentCreatedAt()),index:Number(i.subPathOf(this.getEffectedCreatedAt()))}],reverseOp:this.toReverseOperation()}}toReverseOperation(){return mn.create(this.getParentCreatedAt(),this.value.getCreatedAt())}getEffectedCreatedAt(){return this.value.getCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.ADD.${this.value.toJSON()}`}getPrevCreatedAt(){return this.prevCreatedAt}getValue(){return this.value}setPrevCreatedAt(t){this.prevCreatedAt=t}}class mn extends Dt{constructor(t,r,i){super(t,i);l(this,"createdAt");this.createdAt=r}static create(t,r,i){return new mn(t,r,i)}execute(t,r){var c;const i=t.findByCreatedAt(this.getParentCreatedAt());if(!i)throw new T(k.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(i instanceof li))throw new T(k.ErrInvalidArgument,`only object and array can execute remove: ${i}`);if(r===ee.UndoRedo){let d=i.getByID(this.createdAt);for(;d;){if(d.getRemovedAt())return;d=(c=t.findElementPairByCreatedAt(d.getCreatedAt()))==null?void 0:c.parent}}const s=i.subPathOf(this.createdAt),o=this.toReverseOperation(i),a=i.delete(this.createdAt,this.getExecutedAt());return t.registerRemovedElement(a),{opInfos:i instanceof ze?[{type:"remove",path:t.createPath(this.getParentCreatedAt()),index:Number(s)}]:[{type:"remove",path:t.createPath(this.getParentCreatedAt()),key:s}],reverseOp:o}}toReverseOperation(t){if(t instanceof ze){const r=t.getByID(this.createdAt);if(r!==void 0){const i=t.getPrevCreatedAt(this.createdAt);return Fr.create(this.getParentCreatedAt(),i,r.deepcopy())}}if(t instanceof Be){const r=t.subPathOf(this.createdAt);if(r!==void 0){const i=t.get(r);if(i!==void 0)return Fi.create(r,i.deepcopy(),this.getParentCreatedAt())}}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.REMOVE.${this.createdAt.toTestString()}`}getCreatedAt(){return this.createdAt}setCreatedAt(t){this.createdAt=t}}class Fi extends Dt{constructor(t,r,i,s){super(i,s);l(this,"key");l(this,"value");this.key=t,this.value=r}static create(t,r,i,s){return new Fi(t,r,i,s)}execute(t,r){var c;const i=t.findByCreatedAt(this.getParentCreatedAt());if(!i)throw new T(k.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(i instanceof Be))throw new T(k.ErrInvalidArgument,"fail to execute, only object can execute set");if(r===ee.UndoRedo){let d=i;for(;d;){if(d.getRemovedAt())return;d=(c=t.findElementPairByCreatedAt(d.getCreatedAt()))==null?void 0:c.parent}}const s=i.get(this.key),o=this.toReverseOperation(s),a=this.value.deepcopy(),u=i.set(this.key,a,this.getExecutedAt());return r===ee.UndoRedo&&t.findByCreatedAt(a.getCreatedAt())&&t.deregisterElement(a),t.registerElement(a,i),u&&t.registerRemovedElement(u),{opInfos:[{type:"set",path:t.createPath(this.getParentCreatedAt()),key:this.key}],reverseOp:o}}toReverseOperation(t){let r=mn.create(this.getParentCreatedAt(),this.value.getCreatedAt());return t!==void 0&&!t.isRemoved()&&(r=Fi.create(this.key,t.deepcopy(),this.getParentCreatedAt())),r}getEffectedCreatedAt(){return this.value.getCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.SET.${this.key}=${this.value.toSortedJSON()}`}getKey(){return this.key}getValue(){return this.value}}class Jt extends Dt{constructor(t,r,i,s){super(t,s);l(this,"prevCreatedAt");l(this,"createdAt");this.prevCreatedAt=r,this.createdAt=i}static create(t,r,i,s){return new Jt(t,r,i,s)}execute(t){const r=t.findByCreatedAt(this.getParentCreatedAt());if(!r)throw new T(k.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(r instanceof ze))throw new T(k.ErrInvalidArgument,"fail to execute, only array can execute move");const i=r,s=this.toReverseOperation(i),o=Number(i.subPathOf(this.createdAt));i.moveAfter(this.prevCreatedAt,this.createdAt,this.getExecutedAt());const a=Number(i.subPathOf(this.createdAt));return{opInfos:[{type:"move",path:t.createPath(this.getParentCreatedAt()),index:a,previousIndex:o}],reverseOp:s}}toReverseOperation(t){const r=t.getPrevCreatedAt(this.createdAt);return Jt.create(this.getParentCreatedAt(),r,this.createdAt)}getEffectedCreatedAt(){return this.createdAt}toTestString(){return`${this.getParentCreatedAt().toTestString()}.MOVE`}getPrevCreatedAt(){return this.prevCreatedAt}getCreatedAt(){return this.createdAt}setPrevCreatedAt(t){this.prevCreatedAt=t}setCreatedAt(t){this.createdAt=t}}class Qr{constructor(e,t,r,i){l(this,"key");l(this,"value");l(this,"updatedAt");l(this,"_isRemoved");this.key=e,this.value=t,this.updatedAt=r,this._isRemoved=i}static of(e,t,r,i){return new Qr(e,t,r,i)}getKey(){return this.key}getValue(){return this.value}getUpdatedAt(){return this.updatedAt}isRemoved(){return this._isRemoved}toIDString(){return`${this.updatedAt.toIDString()}:${this.key}`}getRemovedAt(){if(this._isRemoved)return this.updatedAt}getDataSize(){return{data:(this.key.length+this.value.length)*2,meta:cn}}}class $r{constructor(){l(this,"nodeMapByKey");l(this,"numberOfRemovedElement");this.nodeMapByKey=new Map,this.numberOfRemovedElement=0}static create(){return new $r}getNodeMapByKey(){return this.nodeMapByKey}set(e,t,r){const i=this.nodeMapByKey.get(e);if(i&&i.isRemoved()&&r.after(i.getUpdatedAt())&&(this.numberOfRemovedElement-=1),i===void 0||r.after(i.getUpdatedAt())){const s=Qr.of(e,t,r,!1);return this.nodeMapByKey.set(e,s),i!==void 0&&i.isRemoved()?[i,s]:[void 0,s]}return i.isRemoved()?[i,void 0]:[void 0,void 0]}setInternal(e,t,r,i){const s=Qr.of(e,t,r,i);this.nodeMapByKey.set(e,s),i&&this.numberOfRemovedElement++}remove(e,t){const r=this.nodeMapByKey.get(e),i=[];if(r===void 0||t.after(r.getUpdatedAt())){if(r===void 0){this.numberOfRemovedElement+=1;const a=Qr.of(e,"",t,!0);return this.nodeMapByKey.set(e,a),i.push(a),i}const s=r.isRemoved();s||(this.numberOfRemovedElement+=1),s&&i.push(r);const o=Qr.of(e,r.getValue(),t,!0);return this.nodeMapByKey.set(e,o),i.push(o),i}return i}has(e){if(this.nodeMapByKey.has(e)){const t=this.nodeMapByKey.get(e);return t!==void 0&&!t.isRemoved()}return!1}get(e){if(this.nodeMapByKey.has(e))return this.nodeMapByKey.get(e).getValue()}deepcopy(){const e=new $r;for(const[,t]of this.nodeMapByKey)e.setInternal(t.getKey(),t.getValue(),t.getUpdatedAt(),t.isRemoved());return e}toJSON(){if(!this.size())return"{}";const e=[];for(const[t,r]of this.nodeMapByKey)r.isRemoved()||e.push(`"${an(t)}":"${an(r.getValue())}"`);return`{${e.join(",")}}`}size(){return this.nodeMapByKey.size-this.numberOfRemovedElement}toObject(){const e={};for(const[t,r]of this.nodeMapByKey)r.isRemoved()||(e[t]=r.getValue());return e}*[Symbol.iterator](){for(const[,e]of this.nodeMapByKey)yield e}purge(e){const t=this.nodeMapByKey.get(e.getKey());t==null||t.toIDString()!=e.toIDString()||(this.nodeMapByKey.delete(e.getKey()),this.numberOfRemovedElement--)}}function Bt(n){if(n instanceof Map){const e=Array.from(n);return new Map(JSON.parse(JSON.stringify(e)))}return JSON.parse(JSON.stringify(n))}const Oy=n=>n?Object.entries(n).length===0:!0,Ns=n=>{const e={};for(const[t,r]of Object.entries(n))e[t]=JSON.stringify(r);return e},Or=n=>{const e={};for(const[t,r]of Object.entries(n))e[t]=JSON.parse(r);return e};function cS(n){return n?Cg(n.live)+Cg(n.gc):0}function Cg(n){return n.data+n.meta}function Ne(n,...e){for(const t of e)n.data+=t.data,n.meta+=t.meta}function ds(n,e){n.data-=e.data,n.meta-=e.meta}class Fo{constructor(e){l(this,"attributes");l(this,"content");this.attributes=$r.create(),this.content=e}static create(e){return new Fo(e)}get length(){return this.content.length}substring(e,t){const r=new Fo(this.content.substring(e,t));return r.attributes=this.attributes.deepcopy(),r}setAttr(e,t,r){return this.attributes.set(e,t,r)}getAttrs(){return this.attributes}toString(){return this.content}getDataSize(){const e={data:0,meta:0};e.data+=this.content.length*2;for(const t of this.attributes){const r=t.getDataSize();e.meta+=r.meta,e.data+=r.data}return e}toJSON(){const e=an(this.content),t=this.attributes.toObject(),r=[];for(const[i,s]of Object.entries(t)){const o=JSON.parse(s),a=typeof o=="string"?`"${an(i)}":"${an(o)}"`:`"${an(i)}":${String(o)}`;r.push(a)}return r.sort(),r.length===0?`{"val":"${e}"}`:`{"attrs":{${r.join(",")}},"val":"${e}"}`}getAttributes(){return this.attributes.toObject()}getContent(){return this.content}purge(e){this.attributes&&e instanceof Qr&&this.attributes.purge(e)}getGCPairs(){const e=[];for(const t of this.attributes)t.getRemovedAt()&&e.push({parent:this,child:t});return e}}class ot extends Wo{constructor(t,r){super(r);l(this,"rgaTreeSplit");this.rgaTreeSplit=t}static create(t,r){return new ot(t,r)}edit(t,r,i,s,o){const a=r?Fo.create(r):void 0;if(a&&s)for(const[p,v]of Object.entries(s))a.setAttr(p,v,i);const[u,c,d,h]=this.rgaTreeSplit.edit(t,i,a,o);return[h.map(p=>({...p,value:p.value?{attributes:Or(p.value.getAttributes()),content:p.value.getContent()}:{attributes:void 0,content:""},type:"content"})),c,d,[u,u]]}setStyle(t,r,i,s){const o={data:0,meta:0},[,a,u]=this.rgaTreeSplit.findNodeWithSplit(t[1],i),[,c,d]=this.rgaTreeSplit.findNodeWithSplit(t[0],i);Ne(o,a,c);const h=[],g=this.rgaTreeSplit.findBetween(d,u),p=[];for(const w of g){const A=w.getCreatedAt().getActorID();let y=$a;s!=null&&(y=s.get(A)?s.get(A):0n),w.canStyle(i,y)&&p.push(w)}const v=[];for(const w of p){if(w.isRemoved())continue;const[A,y]=this.rgaTreeSplit.findIndexesFromRange(w.createPosRange());h.push({type:"style",actor:i.getActorID(),from:A,to:y,value:{attributes:Or(r)}});for(const[m,S]of Object.entries(r)){const[I]=w.getValue().setAttr(m,S,i);I!==void 0&&v.push({parent:w.getValue(),child:I});const N=w.getValue().getAttrs().getNodeMapByKey().get(m);N!==void 0&&Ne(o,N.getDataSize())}}return[v,o,h]}indexRangeToPosRange(t,r){const i=this.rgaTreeSplit.indexToPos(t);return t===r?[i,i]:[i,this.rgaTreeSplit.indexToPos(r)]}get length(){return this.rgaTreeSplit.length}getTreeByIndex(){return this.rgaTreeSplit.getTreeByIndex()}getTreeByID(){return this.rgaTreeSplit.getTreeByID()}getDataSize(){const t={data:0,meta:0};for(const r of this.rgaTreeSplit){if(r.isRemoved())continue;const i=r.getDataSize();t.data+=i.data,t.meta+=i.meta}return{data:t.data,meta:t.meta+this.getMetaUsage()}}toJSON(){const t=[];for(const r of this.rgaTreeSplit)r.isRemoved()||t.push(r.getValue().toJSON());return`[${t.join(",")}]`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:JSON.parse(this.toJSON()),type:"YORKIE_TEXT"}}toString(){return this.rgaTreeSplit.toString()}values(){const t=[];for(const r of this.rgaTreeSplit)if(!r.isRemoved()){const i=r.getValue();t.push({attributes:Or(i.getAttributes()),content:i.getContent()})}return t}getRGATreeSplit(){return this.rgaTreeSplit}toTestString(){return this.rgaTreeSplit.toTestString()}deepcopy(){const t=new ot(this.rgaTreeSplit.deepcopy(),this.getCreatedAt());return t.remove(this.getRemovedAt()),t}findIndexesFromRange(t){return this.rgaTreeSplit.findIndexesFromRange(t)}getGCPairs(){const t=[];for(const r of this.rgaTreeSplit){r.getRemovedAt()&&t.push({parent:this.rgaTreeSplit,child:r});for(const i of r.getValue().getGCPairs())t.push(i)}return t}}class Ho extends Dt{constructor(t,r,i,s,o,a){super(t,a);l(this,"fromPos");l(this,"toPos");l(this,"content");l(this,"attributes");this.fromPos=r,this.toPos=i,this.content=s,this.attributes=o}static create(t,r,i,s,o,a){return new Ho(t,r,i,s,o,a)}execute(t,r,i){const s=t.findByCreatedAt(this.getParentCreatedAt());if(!s)throw new T(k.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(s instanceof ot))throw new T(k.ErrInvalidArgument,"fail to execute, only Text can execute edit");const o=s,[a,u,c]=o.edit([this.fromPos,this.toPos],this.content,this.getExecutedAt(),Object.fromEntries(this.attributes),i);t.acc(c);for(const d of u)t.registerGCPair(d);return{opInfos:a.map(({from:d,to:h,value:g})=>({type:"edit",from:d,to:h,value:g,path:t.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const t=this.getParentCreatedAt().toTestString(),r=this.fromPos.toTestString(),i=this.toPos.toTestString(),s=this.content;return`${t}.EDIT(${r},${i},${s})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getContent(){return this.content}getAttributes(){return this.attributes||new Map}}class _o extends Dt{constructor(t,r,i,s,o){super(t,o);l(this,"fromPos");l(this,"toPos");l(this,"attributes");this.fromPos=r,this.toPos=i,this.attributes=s}static create(t,r,i,s,o){return new _o(t,r,i,s,o)}execute(t,r,i){const s=t.findByCreatedAt(this.getParentCreatedAt());if(!s)throw new T(k.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(s instanceof ot))throw new T(k.ErrInvalidArgument,"fail to execute, only Text can execute edit");const o=s,[a,u,c]=o.setStyle([this.fromPos,this.toPos],this.attributes?Object.fromEntries(this.attributes):{},this.getExecutedAt(),i);t.acc(u);for(const d of a)t.registerGCPair(d);return{opInfos:c.map(({from:d,to:h,value:g})=>({type:"style",from:d,to:h,value:g,path:t.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const t=this.getParentCreatedAt().toTestString(),r=this.fromPos.toTestString(),i=this.toPos.toTestString(),s=this.attributes;return`${t}.STYL(${r},${i},${JSON.stringify(s)})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getAttributes(){return this.attributes}}const fS=2,dS="root",fn="text";function Ws(n,e){let t=0;const r=n.children;for(let i=0;i<e;i++){const s=r[i];!s||s.isRemoved||(t+=s.paddedSize)}return t}class hS{constructor(e,t=[]){l(this,"type");l(this,"parent");l(this,"_children");l(this,"size");if(this.type=e,this.size=0,this._children=t,this.isText&&this._children.length>0)throw new T(k.ErrRefused,"Text node cannot have children")}updateAncestorsSize(){let e=this.parent;const t=this.isRemoved?-1:1;for(;e&&(e.size+=this.paddedSize*t,!e.isRemoved);)e=e.parent}updateDescendantsSize(){let e=0;for(const t of this._children){const r=t.updateDescendantsSize();t.isRemoved||(e+=r)}return this.size+=e,this.paddedSize}get isText(){return this.type===fn}get paddedSize(){return this.size+(this.isText?0:fS)}isAncestorOf(e){return gS(this,e)}get nextSibling(){const e=this.parent.findOffset(this),t=this.parent.children[e+1];if(t)return t}get prevSibling(){const e=this.parent.findOffset(this),t=this.parent.children[e-1];if(t)return t}splitText(e,t){const r={data:0,meta:0};if(e===0||e===this.size)return[void 0,r];const i=this.value.slice(0,e),s=this.value.slice(e);if(!s.length)return[void 0,r];const o=this.getDataSize();this.value=i;const a=this.cloneText(e+t);return a.value=s,this.parent.insertAfterInternal(a,this),Ne(r,this.getDataSize(),a.getDataSize()),ds(r,o),[a,r]}get children(){return this._children.filter(e=>!e.isRemoved)}get allChildren(){return[...this._children]}hasTextChild(){return this.children.length>0&&this.children.every(e=>e.isText)}getChildrenText(){return this.isText?this.value:this.hasTextChild()?this.children.map(e=>e.value).join(""):""}append(...e){if(this.isText)throw new T(k.ErrRefused,"Text node cannot have children");this._children.push(...e);for(const t of e)t.parent=this,t.updateAncestorsSize()}prepend(...e){if(this.isText)throw new T(k.ErrRefused,"Text node cannot have children");this._children.unshift(...e);for(const t of e)t.parent=this}insertBefore(e,t){if(this.isText)throw new T(k.ErrRefused,"Text node cannot have children");const r=this._children.indexOf(t);if(r===-1)throw new T(k.ErrInvalidArgument,"child not found");this.insertAtInternal(e,r),e.updateAncestorsSize()}insertAfter(e,t){if(this.isText)throw new T(k.ErrRefused,"Text node cannot have children");const r=this._children.indexOf(t);if(r===-1)throw new T(k.ErrInvalidArgument,"child not found");this.insertAtInternal(e,r+1),e.updateAncestorsSize()}insertAt(e,t){if(this.isText)throw new T(k.ErrRefused,"Text node cannot have children");this.insertAtInternal(e,t),e.updateAncestorsSize()}removeChild(e){if(this.isText)throw new T(k.ErrRefused,"Text node cannot have children");const t=this._children.indexOf(e);if(t===-1)throw new T(k.ErrInvalidArgument,"child not found");this._children.splice(t,1),e.parent=void 0}splitElement(e,t){const r={data:0,meta:0},i=this.getDataSize(),s=this.cloneElement(t);this.parent.insertAfterInternal(s,this),s.updateAncestorsSize();const o=this.children.slice(0,e),a=this.children.slice(e);this._children=o,s._children=a,this.size=this._children.reduce((u,c)=>u+c.paddedSize,0),s.size=s._children.reduce((u,c)=>u+c.paddedSize,0);for(const u of s._children)u.parent=s;return Ne(r,this.getDataSize(),s.getDataSize()),ds(r,i),[s,r]}insertAfterInternal(e,t){if(this.isText)throw new T(k.ErrRefused,"Text node cannot have children");const r=this._children.indexOf(t);if(r===-1)throw new T(k.ErrInvalidArgument,"child not found");this.insertAtInternal(e,r+1)}insertAtInternal(e,t){if(this.isText)throw new T(k.ErrRefused,"Text node cannot have children");this._children.splice(t,0,e),e.parent=this}findOffset(e){if(this.isText)throw new T(k.ErrRefused,"Text node cannot have children");if(e.isRemoved){const t=this._children.indexOf(e);return this.allChildren.splice(0,t).filter(i=>!i.isRemoved).length}return this.children.indexOf(e)}findBranchOffset(e){if(this.isText)throw new T(k.ErrRefused,"Text node cannot have children");let t=e;for(;t;){const r=this._children.indexOf(t);if(r!==-1)return r;t=t.parent}return-1}}function gS(n,e){if(n===e)return!1;for(;e.parent;){if(e.parent===n)return!0;e=e.parent}return!1}var me=(n=>(n.Start="Start",n.End="End",n.Text="Text",n))(me||{});function Ly(n,e,t,r){if(e>t)throw new T(k.ErrInvalidArgument,`from is greater than to: ${e} > ${t}`);if(e>n.size)throw new T(k.ErrInvalidArgument,`from is out of range: ${e} > ${n.size}`);if(t>n.size)throw new T(k.ErrInvalidArgument,`to is out of range: ${t} > ${n.size}`);if(e===t)return;let i=0;for(const s of n.children){if(e-s.paddedSize<i&&i<t){const o=s.isText?e-i:e-i-1,a=s.isText?t-i:t-i-1,u=!s.isText&&o<0,c=!s.isText&&a>s.size;(s.isText||u)&&r([s,s.isText?"Text":"Start"],c),Ly(s,Math.max(0,o),Math.min(a,s.size),r),c&&r([s,"End"],c)}i+=s.paddedSize}}function by(n,e,t=0){for(const r of n.children)by(r,e,t+1);e(n,t)}function su(n,e,t=0){for(const r of n._children)su(r,e,t+1);e(n,t)}function df(n,e,t=!0){if(e>n.size)throw new T(k.ErrInvalidArgument,`index is out of range: ${e} > ${n.size}`);if(n.isText)return{node:n,offset:e};let r=0,i=0;for(const s of n.children){if(t&&s.isText&&s.size>=e-i)return df(s,e-i,t);if(e===i)return{node:n,offset:r};if(!t&&s.paddedSize===e-i)return{node:n,offset:r+1};if(s.paddedSize>e-i)return df(s,e-i-1,t);i+=s.paddedSize,r+=1}return{node:n,offset:r}}function By(n){return n.isText||n.children.length===0?n:By(n.children[0])}function mS(n,e){if(n.size<e)throw new T(k.ErrInvalidArgument,"unacceptable path");for(let t=0;t<n.children.length;t++){const r=n.children[t];if(r.size<e)e-=r.size;else{n=r;break}}return{node:n,offset:e}}class pS{constructor(e){l(this,"root");this.root=e}tokensBetween(e,t,r){Ly(this.root,e,t,r)}traverse(e){by(this.root,e,0)}traverseAll(e){su(this.root,e,0)}findTreePos(e,t=!0){return df(this.root,e,t)}treePosToPath(e){const t=[];let r=e.node;if(r.isText){const i=r.parent.findOffset(r);if(i===-1)throw new T(k.ErrInvalidArgument,"invalid treePos");const s=Ws(r.parent,i);t.push(s+e.offset),r=r.parent}else if(r.hasTextChild()){const i=Ws(r,e.offset);t.push(i)}else t.push(e.offset);for(;r.parent;){const i=r.parent.findOffset(r);if(i===-1)throw new T(k.ErrInvalidArgument,"invalid treePos");t.push(i),r=r.parent}return t.reverse()}pathToIndex(e){const t=this.pathToTreePos(e);return this.indexOf(t)}pathToTreePos(e){if(!e.length)throw new T(k.ErrInvalidArgument,"unacceptable path");let t=this.root;for(let r=0;r<e.length-1;r++){const i=e[r];if(t=t.children[i],!t)throw new T(k.ErrInvalidArgument,"unacceptable path")}if(t.hasTextChild())return mS(t,e[e.length-1]);if(t.children.length<e[e.length-1])throw new T(k.ErrInvalidArgument,"unacceptable path");return{node:t,offset:e[e.length-1]}}getRoot(){return this.root}get size(){return this.root.size}findPostorderRight(e){const{node:t,offset:r}=e;if(t.isText){if(t.size===r){const i=t.nextSibling;return i||t.parent}return t}return t.children.length===r?t:By(t.children[r])}indexOf(e){let{node:t}=e;const{offset:r}=e;let i=0,s=1;if(t.isText){i+=r;const o=t.parent,a=o.findOffset(t);if(a===-1)throw new T(k.ErrInvalidArgument,"invalid pos");i+=Ws(o,a),t=t.parent}else i+=Ws(t,r);for(;t!=null&&t.parent;){const o=t.parent,a=o.findOffset(t);if(a===-1)throw new T(k.ErrInvalidArgument,"invalid pos");i+=Ws(o,a),s++,t=t.parent}return i+s-1}indexToPath(e){const t=this.findTreePos(e);return this.treePosToPath(t)}}const yS=(n,e)=>n===e?0:n<e?-1:1;class vS{constructor(e,t,r){l(this,"key");l(this,"value");l(this,"parent");l(this,"left");l(this,"right");l(this,"isRed");this.key=e,this.value=t,this.isRed=r}}class wS{constructor(e){l(this,"stack");this.stack=[],this.traverseInorder(e)}traverseInorder(e){e&&(this.traverseInorder(e.left),this.stack.push({key:e.key,value:e.value}),this.traverseInorder(e.right))}}class zy{constructor(e){l(this,"root");l(this,"comparator");l(this,"counter");this.comparator=typeof e<"u"?e:yS,this.counter=0}put(e,t){return this.root=this.putInternal(e,t,this.root),this.root.isRed=!1,t}get(e){const t=this.getInternal(e,this.root);return t?t.value:void 0}remove(e){!this.isRed(this.root.left)&&!this.isRed(this.root.right)&&(this.root.isRed=!0),this.root=this.removeInternal(this.root,e),this.root&&(this.root.isRed=!1)}getIterator(){return new wS(this.root)}values(){const e=[];for(const t of this.getIterator().stack)e.push(t.value);return e}floorEntry(e){let t=this.root;for(;t;){const r=this.comparator(e,t.key);if(r>0)if(t.right)t.right.parent=t,t=t.right;else return t;else if(r<0)if(t.left)t.left.parent=t,t=t.left;else{let i=t.parent,s=t;for(;i&&s===i.left;)s=i,i=i.parent;return i}else return t}}lastEntry(){if(!this.root)return this.root;let e=this.root;for(;e.right;)e=e.right;return e}size(){return this.counter}isEmpty(){return this.counter===0}getInternal(e,t){for(;t;){const r=this.comparator(e,t.key);if(r===0)return t;r<0?t=t.left:r>0&&(t=t.right)}}putInternal(e,t,r){if(!r)return this.counter+=1,new vS(e,t,!0);const i=this.comparator(e,r.key);return i<0?r.left=this.putInternal(e,t,r.left):i>0?r.right=this.putInternal(e,t,r.right):r.value=t,this.isRed(r.right)&&!this.isRed(r.left)&&(r=this.rotateLeft(r)),this.isRed(r.left)&&this.isRed(r.left.left)&&(r=this.rotateRight(r)),this.isRed(r.left)&&this.isRed(r.right)&&this.flipColors(r),r}removeInternal(e,t){if(this.comparator(t,e.key)<0)!this.isRed(e.left)&&!this.isRed(e.left.left)&&(e=this.moveRedLeft(e)),e.left=this.removeInternal(e.left,t);else{if(this.isRed(e.left)&&(e=this.rotateRight(e)),this.comparator(t,e.key)===0&&!e.right){this.counter-=1;return}if(!this.isRed(e.right)&&!this.isRed(e.right.left)&&(e=this.moveRedRight(e)),this.comparator(t,e.key)===0){this.counter-=1;const r=this.min(e.right);e.value=r.value,e.key=r.key,e.right=this.removeMin(e.right)}else e.right=this.removeInternal(e.right,t)}return this.fixUp(e)}min(e){return e.left?this.min(e.left):e}removeMin(e){if(e.left)return!this.isRed(e.left)&&!this.isRed(e.left.left)&&(e=this.moveRedLeft(e)),e.left=this.removeMin(e.left),this.fixUp(e)}fixUp(e){return this.isRed(e.right)&&(e=this.rotateLeft(e)),this.isRed(e.left)&&this.isRed(e.left.left)&&(e=this.rotateRight(e)),this.isRed(e.left)&&this.isRed(e.right)&&this.flipColors(e),e}moveRedLeft(e){return this.flipColors(e),this.isRed(e.right.left)&&(e.right=this.rotateRight(e.right),e=this.rotateLeft(e),this.flipColors(e)),e}moveRedRight(e){return this.flipColors(e),this.isRed(e.left.left)&&(e=this.rotateRight(e),this.flipColors(e)),e}isRed(e){return e&&e.isRed}rotateLeft(e){const t=e.right;return e.right=t.left,t.left=e,t.isRed=t.left.isRed,t.left.isRed=!0,t}rotateRight(e){const t=e.left;return e.left=t.right,t.right=e,t.isRed=t.right.isRed,t.right.isRed=!0,t}flipColors(e){e.isRed=!e.isRed,e.left.isRed=!e.left.isRed,e.right.isRed=!e.right.isRed}}class Ut{constructor(e,t){l(this,"parentID");l(this,"leftSiblingID");this.parentID=e,this.leftSiblingID=t}static of(e,t){return new Ut(e,t)}static fromTreePos(e){const{offset:t}=e;let{node:r}=e,i;return r.isText?(r.parent.children[0]===r&&t===0?i=r.parent:i=r,r=r.parent):t===0?i=r:i=r.children[t-1],Ut.of(r.id,De.of(i.getCreatedAt(),i.getOffset()+t))}getParentID(){return this.parentID}static fromStruct(e){return Ut.of(De.of(Ct.fromStruct(e.parentID.createdAt),e.parentID.offset),De.of(Ct.fromStruct(e.leftSiblingID.createdAt),e.leftSiblingID.offset))}toStruct(){return{parentID:{createdAt:this.getParentID().getCreatedAt().toStruct(),offset:this.getParentID().getOffset()},leftSiblingID:{createdAt:this.getLeftSiblingID().getCreatedAt().toStruct(),offset:this.getLeftSiblingID().getOffset()}}}toTreeNodePair(e){const t=this.getParentID(),r=this.getLeftSiblingID(),i=e.findFloorNode(t);let s=e.findFloorNode(r);if(!i||!s)throw new T(k.ErrRefused,`cannot find node of CRDTTreePos(${t.toTestString()}, ${r.toTestString()})`);return!r.equals(t)&&r.getOffset()>0&&r.getOffset()===s.id.getOffset()&&s.insPrevID&&(s=e.findFloorNode(s.insPrevID)),[i,s]}getLeftSiblingID(){return this.leftSiblingID}equals(e){return this.getParentID().getCreatedAt().equals(e.getParentID().getCreatedAt())&&this.getParentID().getOffset()===e.getParentID().getOffset()&&this.getLeftSiblingID().getCreatedAt().equals(e.getLeftSiblingID().getCreatedAt())&&this.getLeftSiblingID().getOffset()===e.getLeftSiblingID().getOffset()}}class De{constructor(e,t){l(this,"createdAt");l(this,"offset");this.createdAt=e,this.offset=t}static of(e,t){return new De(e,t)}static fromStruct(e){return De.of(Ct.fromStruct(e.createdAt),e.offset)}static createComparator(){return(e,t)=>{const r=e.getCreatedAt().compare(t.getCreatedAt());return r!==0?r:e.getOffset()>t.getOffset()?1:e.getOffset()<t.getOffset()?-1:0}}getCreatedAt(){return this.createdAt}equals(e){return this.createdAt.compare(e.createdAt)===0&&this.offset===e.offset}getOffset(){return this.offset}setOffset(e){this.offset=e}toStruct(){return{createdAt:this.createdAt.toStruct(),offset:this.offset}}toIDString(){return`${this.createdAt.toIDString()}:${this.offset}`}toTestString(){return`${this.createdAt.toTestString()}/${this.offset}`}}class rt extends hS{constructor(t,r,i,s,o){super(r);l(this,"id");l(this,"removedAt");l(this,"attrs");l(this,"insPrevID");l(this,"insNextID");l(this,"_value","");this.id=t,this.removedAt=o,s&&(this.attrs=s),typeof i=="string"?this.value=i:Array.isArray(i)&&(this._children=i)}toIDString(){return this.id.toIDString()}getRemovedAt(){return this.removedAt}static create(t,r,i,s){return new rt(t,r,i,s)}deepcopy(){var r;const t=new rt(this.id,this.type);return t.removedAt=this.removedAt,t._value=this._value,t.size=this.size,t.attrs=(r=this.attrs)==null?void 0:r.deepcopy(),t._children=this._children.map(i=>{const s=i.deepcopy();return s.parent=t,s}),t.insPrevID=this.insPrevID,t.insNextID=this.insNextID,t}get value(){if(!this.isText)throw new T(k.ErrInvalidType,`cannot get value of element node: ${this.type}`);return this._value}set value(t){if(!this.isText)throw new T(k.ErrInvalidType,`cannot set value of element node: ${this.type}`);this._value=t,this.size=t.length}get isRemoved(){return!!this.removedAt}remove(t){const r=!this.removedAt;(!this.removedAt||this.removedAt.compare(t)>0)&&(this.removedAt=t),r&&this.updateAncestorsSize()}cloneText(t){return new rt(De.of(this.id.getCreatedAt(),t),this.type,void 0,void 0,this.removedAt)}cloneElement(t){return new rt(De.of(t(),0),this.type,void 0,void 0,this.removedAt)}split(t,r,i){const[s,o]=this.isText?this.splitText(r,this.id.getOffset()):this.splitElement(r,i);if(s){if(s.insPrevID=this.id,this.insNextID){const a=t.findFloorNode(this.insNextID);a.insPrevID=s.id,s.insNextID=this.insNextID}this.insNextID=s.id,t.registerNode(s)}return[s,o]}getCreatedAt(){return this.id.getCreatedAt()}getOffset(){return this.id.getOffset()}canDelete(t,r){return this.getCreatedAt().getLamport()<=r&&(!this.removedAt||t.after(this.removedAt))}canStyle(t,r){return this.isText?!1:this.getCreatedAt().getLamport()<=r&&(!this.removedAt||t.after(this.removedAt))}setAttrs(t,r){this.attrs||(this.attrs=new $r);const i=[];for(const[s,o]of Object.entries(t))i.push(this.attrs.set(s,o,r));return i}purge(t){this.attrs&&this.attrs.purge(t)}getDataSize(){const t={data:0,meta:0};if(this.isText&&(t.data+=this.size*2),this.id&&(t.meta+=cn),this.removedAt&&(t.meta+=cn),this.attrs)for(const r of this.attrs){if(r.getRemovedAt())continue;const i=r.getDataSize();t.meta+=i.meta,t.data+=i.data}return t}getGCPairs(){const t=[];if(!this.attrs)return t;for(const r of this.attrs)r.getRemovedAt()&&t.push({parent:this,child:r});return t}}function hf(n){var t;if(n.isText){const r=n;return{type:r.type,value:r.value}}const e={type:n.type,children:n.children.map(hf)};return n.attrs&&(e.attributes=Or((t=n.attrs)==null?void 0:t.toObject())),e}function yd(n){if(n.isText)return n.value;let e="";return n.attrs&&n.attrs.size()&&(e=" "+Array.from(n.attrs).filter(t=>!t.isRemoved()).sort((t,r)=>t.getKey().localeCompare(r.getKey())).map(t=>{const r=JSON.parse(t.getValue());return typeof r=="string"?`${t.getKey()}="${r}"`:`${t.getKey()}="${an(t.getValue())}"`}).join(" ")),`<${n.type}${e}>${n.children.map(t=>yd(t)).join("")}</${n.type}>`}function My(n){if(n.isText){const e=n;return{type:e.type,value:e.value,size:e.size,isRemoved:e.isRemoved}}return{type:n.type,children:n.children.map(My),size:n.size,isRemoved:n.isRemoved}}class at extends Wo{constructor(t,r){super(r);l(this,"indexTree");l(this,"nodeMapByID");this.indexTree=new pS(t),this.nodeMapByID=new zy(De.createComparator()),this.indexTree.traverseAll(i=>{this.nodeMapByID.put(i.id,i)})}static create(t,r){return new at(t,r)}findFloorNode(t){const r=this.nodeMapByID.floorEntry(t);if(!(!r||!r.key.getCreatedAt().equals(t.getCreatedAt())))return r.value}registerNode(t){this.nodeMapByID.put(t.id,t)}findNodesAndSplitText(t,r){let i={data:0,meta:0};const[s,o]=t.toTreeNodePair(this);let a=o;const u=s===a,c=a.parent&&!u?a.parent:s;if(a.isText){const[,d]=a.split(this,t.getLeftSiblingID().getOffset()-a.id.getOffset());i=d}if(r){const d=c.allChildren,h=u?0:d.indexOf(a)+1;for(let g=h;g<d.length;g++){const p=d[g];if(!p.id.getCreatedAt().after(r))break;a=p}}return[[c,a],i]}style(t,r,i,s){const o={data:0,meta:0},[[a,u],c]=this.findNodesAndSplitText(t[0],i),[[d,h],g]=this.findNodesAndSplitText(t[1],i);Ne(o,g,c);const p=[],v=r?Or(r):{},w=[];return this.traverseInPosRange(a,u,d,h,([A,y])=>{var I;const m=A.getCreatedAt().getActorID();let S=$a;if(s!=null&&(S=s.get(m)?s.get(m):0n),A.canStyle(i,S)&&r){const N=A.setAttrs(r,i),x=N.reduce((z,[,$])=>($&&(z[$.getKey()]=v[$.getKey()]),z),{}),C=A.parent,R=A.prevSibling||A.parent;Object.keys(x).length>0&&p.push({type:"style",from:this.toIndex(C,R),to:this.toIndex(A,A),fromPath:this.toPath(C,R),toPath:this.toPath(A,A),actor:i.getActorID(),value:x});for(const[z]of N)z&&w.push({parent:A,child:z});for(const[z]of Object.entries(v)){const $=(I=A.attrs)==null?void 0:I.getNodeMapByKey().get(z);$!==void 0&&y!==me.End&&Ne(o,$.getDataSize())}}}),[w,p,o]}removeStyle(t,r,i,s){const o={data:0,meta:0},[[a,u],c]=this.findNodesAndSplitText(t[0],i),[[d,h],g]=this.findNodesAndSplitText(t[1],i);Ne(o,g,c);const p=[],v=[];return this.traverseInPosRange(a,u,d,h,([w])=>{const A=w.getCreatedAt().getActorID();let y=$a;if(s!=null&&(y=s.get(A)?s.get(A):0n),w.canStyle(i,y)&&r){w.attrs||(w.attrs=new $r);for(const I of r){const N=w.attrs.remove(I,i);for(const x of N)v.push({parent:w,child:x})}const m=w.parent,S=w.prevSibling||w.parent;p.push({actor:i.getActorID(),type:"removeStyle",from:this.toIndex(m,S),to:this.toIndex(w,w),fromPath:this.toPath(m,S),toPath:this.toPath(w,w),value:r})}}),[v,p,o]}edit(t,r,i,s,o,a){const u={data:0,meta:0},[[c,d],h]=this.findNodesAndSplitText(t[0],s),[[g,p],v]=this.findNodesAndSplitText(t[1],s);Ne(u,v,h);const w=this.toIndex(c,d),A=this.toPath(c,d),y=[],m=[],S=[];this.traverseInPosRange(c,d,g,p,([x,C],R)=>{if(C===me.Start&&!R)for(const ve of x.children)S.push(ve);const z=x.getCreatedAt().getActorID();let $=$a;a!=null&&($=a.get(z)?a.get(z):0n),(x.canDelete(s,$)||y.includes(x.parent))&&((C===me.Text||C===me.Start)&&y.push(x),m.push([x,C]))});const I=this.makeDeletionChanges(m,s),N=[];for(const x of y)x.remove(s),x.isRemoved&&N.push({parent:this,child:x});for(const x of S)x.removedAt||c.append(x);if(i>0){let x=0,C=c,R=d;for(;x<i;)C.split(this,C.findOffset(R)+1,o),R=C,C=C.parent,x++;I.push({type:"content",from:w,to:w,fromPath:A,toPath:A,actor:s.getActorID()})}if(r!=null&&r.length){const x=[];let C=d;for(const R of r)C===c?c.insertAt(R,0):c.insertAfter(R,C),C=R,su(R,z=>{c.isRemoved?(z.remove(s),N.push({parent:this,child:z})):Ne(u,z.getDataSize()),this.nodeMapByID.put(z.id,z)}),R.isRemoved||x.push(R);if(x.length){const R=x.map(z=>hf(z));I.length&&I[I.length-1].from===w?I[I.length-1].value=R:I.push({type:"content",from:w,to:w,fromPath:A,toPath:A,actor:s.getActorID(),value:R})}}return[I,N,u]}editT(t,r,i,s,o){const a=this.findPos(t[0]),u=this.findPos(t[1]);this.edit([a,u],r,i,s,o)}move(t,r,i){throw new T(k.ErrUnimplemented,`not implemented: ${t}, ${r}, ${i}`)}pathToTreePos(t){return this.indexTree.pathToTreePos(t)}purge(t){var s;(s=t.parent)==null||s.removeChild(t),this.nodeMapByID.remove(t.id);const r=t.insPrevID,i=t.insNextID;if(r){const o=this.findFloorNode(r);o.insNextID=i}if(i){const o=this.findFloorNode(i);o.insPrevID=r}t.insPrevID=void 0,t.insNextID=void 0}getGCPairs(){const t=[];return this.indexTree.traverse(r=>{r.getRemovedAt()&&t.push({parent:this,child:r});for(const i of r.getGCPairs())t.push(i)}),t}findPos(t,r=!0){const i=this.indexTree.findTreePos(t,r);return Ut.fromTreePos(i)}pathToPosRange(t){const r=this.pathToIndex(t);return[this.findPos(r),this.findPos(r+1)]}pathToPos(t){const r=this.indexTree.pathToIndex(t);return this.findPos(r)}getRoot(){return this.indexTree.getRoot()}getSize(){return this.indexTree.size}getNodeSize(){return this.nodeMapByID.size()}getIndexTree(){return this.indexTree}toXML(){return yd(this.indexTree.getRoot())}getDataSize(){const t={data:0,meta:0};return this.indexTree.traverse(r=>{if(r.getRemovedAt())return;const i=r.getDataSize();t.data+=i.data,t.meta+=i.meta}),{data:t.data,meta:t.meta+this.getMetaUsage()}}toJSON(){return JSON.stringify(this.getRootTreeNode())}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:JSON.parse(this.toJSON()),type:"YORKIE_TREE"}}toJSInfoForTest(){const t=this.indexTree.getRoot(),r=(i,s=void 0,o=void 0,a=0)=>{var p,v,w,A;let u,c,d;const h=i.isText?{node:i,offset:0}:s&&o?this.toTreePos(s,o):null;h&&(u=this.indexTree.indexOf(h),c=this.indexTree.treePosToPath(h),d=Ut.fromTreePos(h).toStruct());const g={type:i.type,parent:s==null?void 0:s.id.toTestString(),size:i.size,id:i.id.toTestString(),removedAt:(p=i.removedAt)==null?void 0:p.toTestString(),insPrev:(v=i.insPrevID)==null?void 0:v.toTestString(),insNext:(w=i.insNextID)==null?void 0:w.toTestString(),value:i.isText?i.value:void 0,isRemoved:i.isRemoved,children:[],depth:a,attributes:i.attrs?Or((A=i.attrs)==null?void 0:A.toObject()):void 0,index:u,path:c,pos:d};for(let y=0;y<i.allChildren.length;y++){const m=y===0?i:i.allChildren[y-1];g.children.push(r(i.allChildren[y],i,m,a+1))}return g};return r(t)}getRootTreeNode(){return hf(this.indexTree.getRoot())}toTestTreeNode(){return My(this.indexTree.getRoot())}toSortedJSON(){return this.toJSON()}deepcopy(){const t=this.getRoot();return new at(t.deepcopy(),this.getCreatedAt())}toPath(t,r){const i=this.toTreePos(t,r);return i?this.indexTree.treePosToPath(i):[]}toIndex(t,r){const i=this.toTreePos(t,r);return i?this.indexTree.indexOf(i):-1}indexToPath(t){return this.indexTree.indexToPath(t)}pathToIndex(t){return this.indexTree.pathToIndex(t)}indexRangeToPosRange(t){const r=this.findPos(t[0]);return t[0]===t[1]?[r,r]:[r,this.findPos(t[1])]}indexRangeToPosStructRange(t){const[r,i]=t,s=this.findPos(r);return r===i?[s.toStruct(),s.toStruct()]:[s.toStruct(),this.findPos(i).toStruct()]}posRangeToPathRange(t){const[[r,i]]=this.findNodesAndSplitText(t[0]),[[s,o]]=this.findNodesAndSplitText(t[1]);return[this.toPath(r,i),this.toPath(s,o)]}posRangeToIndexRange(t){const[[r,i]]=this.findNodesAndSplitText(t[0]),[[s,o]]=this.findNodesAndSplitText(t[1]);return[this.toIndex(r,i),this.toIndex(s,o)]}traverseInPosRange(t,r,i,s,o){const a=this.toIndex(t,r),u=this.toIndex(i,s);return this.indexTree.tokensBetween(a,u,o)}toTreePos(t,r){if(!t||!r)return;if(t.isRemoved){let s;for(;t.isRemoved;)s=t,t=s.parent;const o=t.findOffset(s);return{node:t,offset:o}}if(t===r)return{node:t,offset:0};let i=t.findOffset(r);if(!r.isRemoved){if(r.isText)return{node:r,offset:r.paddedSize};i++}return{node:t,offset:i}}makeDeletionChanges(t,r){const i=[],s=[];let o=null,a=null;for(let u=0;u<t.length;u++){const c=t[u],d=t[u+1];o||(o=c),a=c;const h=this.findRightToken(c);(!h||!d||h[0]!==d[0]||h[1]!==d[1])&&(s.push([o,a]),o=null,a=null)}for(const u of s){const[c,d]=u,[h,g]=this.findLeftToken(c),[p,v]=d,w=g===me.Start?h:h.parent,A=v===me.Start?p:p.parent,y=this.toIndex(w,h),m=this.toIndex(A,p);y<m&&(i.length>0&&y===i[i.length-1].to?(i[i.length-1].to=m,i[i.length-1].toPath=this.toPath(A,p)):i.push({type:"content",from:y,to:m,fromPath:this.toPath(w,h),toPath:this.toPath(A,p),actor:r.getActorID()}))}return i.reverse()}findRightToken([t,r]){if(r===me.Start){const u=t.allChildren;return u.length>0?[u[0],u[0].isText?me.Text:me.Start]:[t,me.End]}const i=t.parent,s=i.allChildren,o=s.indexOf(t);if(i&&o===s.length-1)return[i,me.End];const a=s[o+1];return[a,a.isText?me.Text:me.Start]}findLeftToken([t,r]){if(r===me.End){const u=t.allChildren;if(u.length>0){const c=u[u.length-1];return[c,c.isText?me.Text:me.End]}return[t,me.Start]}const i=t.parent,s=i.allChildren,o=s.indexOf(t);if(i&&o===0)return[i,me.Start];const a=s[o-1];return[a,a.isText?me.Text:me.End]}}class Go extends Dt{constructor(t,r,i,s,o,a){super(t,a);l(this,"fromPos");l(this,"toPos");l(this,"contents");l(this,"splitLevel");this.fromPos=r,this.toPos=i,this.contents=s,this.splitLevel=o}static create(t,r,i,s,o,a){return new Go(t,r,i,s,o,a)}execute(t,r,i){var h;const s=t.findByCreatedAt(this.getParentCreatedAt());if(!s)throw new T(k.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(s instanceof at))throw new T(k.ErrInvalidArgument,"fail to execute, only Tree can execute edit");const o=this.getExecutedAt(),a=s,[u,c,d]=a.edit([this.fromPos,this.toPos],(h=this.contents)==null?void 0:h.map(g=>g.deepcopy()),this.splitLevel,o,(()=>{let g=o.getDelimiter();return this.contents!==void 0&&(g+=this.contents.length),()=>Ct.of(o.getLamport(),++g,o.getActorID())})(),i);t.acc(d);for(const g of c)t.registerGCPair(g);return{opInfos:u.map(({from:g,to:p,value:v,splitLevel:w,fromPath:A,toPath:y})=>({type:"tree-edit",path:t.createPath(this.getParentCreatedAt()),from:g,to:p,value:v,splitLevel:w,fromPath:A,toPath:y}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const t=this.getParentCreatedAt().toTestString(),r=`${this.fromPos.getLeftSiblingID().getCreatedAt().toTestString()}/${this.fromPos.getLeftSiblingID().getOffset()}`,i=`${this.toPos.getLeftSiblingID().getCreatedAt().toTestString()}/${this.toPos.getLeftSiblingID().getOffset()}`,s=this.contents||[];return`${t}.EDIT(${r},${i},${s.map(o=>yd(o)).join("")})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getContents(){return this.contents}getSplitLevel(){return this.splitLevel}}class hs{constructor(e){l(this,"vector");this.vector=e||new Map}set(e,t){this.vector.set(e,t)}unset(e){this.vector.delete(e)}get(e){return this.vector.get(e)}has(e){return this.vector.has(e)}maxLamport(){let e=BigInt(0);for(const[,t]of this)t>e&&(e=t);return e}max(e){const t=new Map;for(const[r,i]of e){const s=this.vector.get(r),o=s&&s>i?s:i;t.set(r,o)}for(const[r,i]of this){const s=e.get(r),o=s&&s>i?s:i;t.set(r,o)}return new hs(t)}afterOrEqual(e){const t=this.vector.get(e.getActorID());return t===void 0?!1:t>=e.getLamport()}deepcopy(){const e=new Map;for(const[t,r]of this.vector)e.set(t,r);return new hs(e)}filter(e){const t=new Map;for(const[r]of e){const i=this.vector.get(r);i!==void 0&&t.set(r,i)}return new hs(t)}size(){return this.vector.size}*[Symbol.iterator](){for(const[e,t]of this.vector)yield[e,t]}}const Fy=new hs(new Map);class zt{constructor(e,t,r,i,s){l(this,"clientSeq");l(this,"serverSeq");l(this,"actor");l(this,"lamport");l(this,"versionVector");this.clientSeq=e,this.serverSeq=s,this.lamport=t,this.versionVector=i,this.actor=r}hasClocks(){return this.versionVector.size()>0&&this.lamport!=cf}static of(e,t,r,i,s){return new zt(e,t,r,i,s)}next(e=!1){if(e)return new zt(this.clientSeq+1,this.lamport,this.actor,Fy,cf);const t=this.versionVector.deepcopy();return t.set(this.actor,this.lamport+1n),new zt(this.clientSeq+1,this.lamport+1n,this.actor,t)}syncClocks(e){if(!e.hasClocks())return this;const t=e.lamport>this.lamport?e.lamport+1n:this.lamport+1n,r=this.versionVector.max(e.versionVector),i=new zt(this.clientSeq,t,this.actor,r);return i.versionVector.set(this.actor,t),i}setClocks(e,t){const r=e>this.lamport?e+1n:this.lamport+1n,i=this.versionVector.max(t);return i.set(this.actor,r),zt.of(this.clientSeq,r,this.actor,i)}createTimeTicket(e){return Ct.of(this.lamport,e,this.actor)}setActor(e){return new zt(this.clientSeq,this.lamport,e,this.versionVector,this.serverSeq)}setLamport(e){return new zt(this.clientSeq,e,this.actor,this.versionVector,this.serverSeq)}setVersionVector(e){return new zt(this.clientSeq,this.lamport,this.actor,e,this.serverSeq)}getClientSeq(){return this.clientSeq}getServerSeq(){return this.serverSeq?this.serverSeq.toString():""}getLamport(){return this.lamport}getLamportAsString(){return this.lamport.toString()}getActorID(){return this.actor}getVersionVector(){return this.versionVector}toTestString(){return`${this.lamport.toString()}:${this.actor.slice(-2)}:${this.clientSeq}`}}const SS=new zt(0,0n,gd,Fy);class Ps{constructor({id:e,operations:t,presenceChange:r,message:i}){l(this,"id");l(this,"operations");l(this,"presenceChange");l(this,"message");this.id=e,this.operations=t||[],this.presenceChange=r,this.message=i}static create({id:e,operations:t,presenceChange:r,message:i}){return new Ps({id:e,operations:t,presenceChange:r,message:i})}getID(){return this.id}getMessage(){return this.message}hasOperations(){return this.operations.length>0}getOperations(){return this.operations}setActor(e){for(const t of this.operations)t.setActor(e);this.id=this.id.setActor(e)}hasPresenceChange(){return this.presenceChange!==void 0}getPresenceChange(){return this.presenceChange}execute(e,t,r){const i=[],s=[];for(const o of this.operations){const a=o.execute(e,r,this.id.getVersionVector());if(!a)continue;const{opInfos:u,reverseOp:c}=a;i.push(...u),c&&s.unshift(c)}return this.presenceChange&&(this.presenceChange.type===gn.Put?t.set(this.id.getActorID(),Bt(this.presenceChange.presence)):t.delete(this.id.getActorID())),{opInfos:i,reverseOps:s}}toTestString(){return`${this.operations.map(e=>e.toTestString()).join(",")}`}toStruct(){return{changeID:de.bytesToHex(de.toChangeID(this.getID()).toBinary()),message:this.getMessage(),operations:this.getOperations().map(e=>de.bytesToHex(de.toOperation(e).toBinary())),presenceChange:this.getPresenceChange()}}static fromStruct(e){const{changeID:t,operations:r,presenceChange:i,message:s}=e;return Ps.create({id:de.bytesToChangeID(de.hexToBytes(t)),operations:r==null?void 0:r.map(o=>de.bytesToOperation(de.hexToBytes(o))),presenceChange:i,message:s})}}class ou{constructor(e,t,r,i,s,o){l(this,"documentKey");l(this,"checkpoint");l(this,"isRemoved");l(this,"changes");l(this,"snapshot");l(this,"versionVector");this.documentKey=e,this.checkpoint=t,this.isRemoved=r,this.changes=i,this.snapshot=o,this.versionVector=s}static create(e,t,r,i,s,o){return new ou(e,t,r,i,s,o)}getDocumentKey(){return this.documentKey}getCheckpoint(){return this.checkpoint}getIsRemoved(){return this.isRemoved}getChanges(){return this.changes}hasChanges(){return this.changes.length>0}getChangeSize(){return this.changes.length}hasSnapshot(){return!!this.snapshot&&!!this.snapshot.length}getSnapshot(){return this.snapshot}getVersionVector(){return this.versionVector}}class gs{constructor(e,t){l(this,"serverSeq");l(this,"clientSeq");this.serverSeq=e,this.clientSeq=t}static of(e,t){return new gs(e,t)}increaseClientSeq(e){return e===0?this:new gs(this.serverSeq,this.clientSeq+e)}forward(e){if(this.equals(e))return this;const t=this.serverSeq>e.serverSeq?this.serverSeq:e.serverSeq,r=Math.max(this.clientSeq,e.clientSeq);return gs.of(t,r)}getServerSeqAsString(){return this.serverSeq.toString()}getClientSeq(){return this.clientSeq}getServerSeq(){return this.serverSeq}equals(e){return this.clientSeq===e.clientSeq&&this.serverSeq==e.serverSeq}toTestString(){return`serverSeq=${this.serverSeq}, clientSeq=${this.clientSeq}`}}const kS=new gs(0n,0);class dn{constructor(e,t){l(this,"createdAt");l(this,"offset");this.createdAt=e,this.offset=t}static of(e,t){return new dn(e,t)}static fromStruct(e){return dn.of(Ct.fromStruct(e.createdAt),e.offset)}getCreatedAt(){return this.createdAt}getOffset(){return this.offset}equals(e){return this.createdAt.compare(e.createdAt)===0&&this.offset===e.offset}hasSameCreatedAt(e){return this.createdAt.compare(e.createdAt)===0}split(e){return new dn(this.createdAt,this.offset+e)}toStruct(){return{createdAt:this.createdAt.toStruct(),offset:this.offset}}toTestString(){return`${this.createdAt.toTestString()}:${this.offset}`}toIDString(){return`${this.createdAt.toIDString()}:${this.offset}`}}const TS=dn.of(Es,0);class qt{constructor(e,t){l(this,"id");l(this,"relativeOffset");this.id=e,this.relativeOffset=t}static of(e,t){return new qt(e,t)}static fromStruct(e){const t=dn.fromStruct(e.id);return qt.of(t,e.relativeOffset)}getID(){return this.id}getRelativeOffset(){return this.relativeOffset}getAbsoluteID(){return dn.of(this.id.getCreatedAt(),this.id.getOffset()+this.relativeOffset)}toTestString(){return`${this.id.toTestString()}:${this.relativeOffset}`}toStruct(){return{id:this.id.toStruct(),relativeOffset:this.relativeOffset}}equals(e){return this.id.equals(e.id)?this.relativeOffset===e.relativeOffset:!1}}class ui extends Cy{constructor(t,r,i){super(r);l(this,"id");l(this,"removedAt");l(this,"prev");l(this,"next");l(this,"insPrev");l(this,"insNext");this.id=t,this.removedAt=i}static create(t,r){return new ui(t,r)}static createComparator(){return(t,r)=>{const i=t.getCreatedAt().compare(r.getCreatedAt());return i!==0?i:t.getOffset()>r.getOffset()?1:t.getOffset()<r.getOffset()?-1:0}}getID(){return this.id}getCreatedAt(){return this.id.getCreatedAt()}getLength(){return this.removedAt?0:this.getContentLength()}getContentLength(){return this.value&&this.value.length||0}getPrev(){return this.prev}getNext(){return this.next}getInsPrev(){return this.insPrev}getInsNext(){return this.insNext}getInsPrevID(){return this.insPrev.getID()}setPrev(t){this.prev=t,t&&(t.next=this)}setNext(t){this.next=t,t&&(t.prev=this)}setInsPrev(t){this.insPrev=t,t&&(t.insNext=this)}setInsNext(t){this.insNext=t,t&&(t.insPrev=this)}hasNext(){return!!this.next}hasInsPrev(){return!!this.insPrev}isRemoved(){return!!this.removedAt}getRemovedAt(){return this.removedAt}split(t){return new ui(this.id.split(t),this.splitValue(t),this.removedAt)}canRemove(t){return t?!this.removedAt:!1}canStyle(t,r){return this.getCreatedAt().getLamport()<=r&&(!this.removedAt||t.after(this.removedAt))}setRemovedAt(t){this.removedAt=t}remove(t,r){if(!this.removedAt){this.removedAt=t;return}!r&&t.after(this.removedAt)&&(this.removedAt=t)}createPosRange(){return[qt.of(this.id,0),qt.of(this.id,this.getLength())]}getDataSize(){const t=this.value.getDataSize();return this.id&&(t.meta+=cn),this.removedAt&&(t.meta+=cn),t}deepcopy(){return new ui(this.id,this.value,this.removedAt)}toTestString(){return`${this.id.toTestString()} ${this.value?this.value:""}`}splitValue(t){const r=this.value;return this.value=r.substring(0,t),r.substring(t,r.length)}toIDString(){return this.id.toIDString()}}class Ds{constructor(){l(this,"head");l(this,"treeByIndex");l(this,"treeByID");this.head=ui.create(TS),this.treeByIndex=new zo,this.treeByID=new zy(ui.createComparator()),this.treeByIndex.insert(this.head),this.treeByID.put(this.head.getID(),this.head)}static create(){return new Ds}edit(e,t,r,i){const s={data:0,meta:0},[o,a,u]=this.findNodeWithSplit(e[1],t),[c,d,h]=this.findNodeWithSplit(e[0],t);Ne(s,a,d);const g=this.findBetween(h,u),[p,v]=this.deleteNodes(g,t,i),w=u?u.getID():o.getID();let A=qt.of(w,0);if(r){const m=this.posToIndex(c.createPosRange()[1],!0),S=this.insertAfter(c,ui.create(dn.of(t,0),r));Ne(s,S.getDataSize()),p.length&&p[p.length-1].from===m?p[p.length-1].value=r:p.push({actor:t.getActorID(),from:m,to:m,value:r}),A=qt.of(S.getID(),S.getContentLength())}const y=[];for(const[,m]of v)y.push({parent:this,child:m});return[A,y,s,p]}indexToPos(e){const[t,r]=this.treeByIndex.find(e),i=t;return qt.of(i.getID(),r)}findIndexesFromRange(e){const[t,r]=e;return[this.posToIndex(t,!1),this.posToIndex(r,!0)]}posToIndex(e,t){const r=e.getAbsoluteID(),i=t?this.findFloorNodePreferToLeft(r):this.findFloorNode(r);if(!i)throw new T(k.ErrInvalidArgument,`the node of the given id should be found: ${r.toTestString()}`);const s=this.treeByIndex.indexOf(i),o=i.isRemoved()?0:r.getOffset()-i.getID().getOffset();return s+o}findNode(e){return this.findFloorNode(e)}get length(){return this.treeByIndex.length}getTreeByIndex(){return this.treeByIndex}getTreeByID(){return this.treeByID}toString(){const e=[];for(const t of this)t.isRemoved()||e.push(t.getValue());return e.join("")}*[Symbol.iterator](){let e=this.head.getNext();for(;e;)yield e,e=e.getNext()}getHead(){return this.head}deepcopy(){const e=new Ds;let t=this.head.getNext(),r=e.head,i;for(;t;){if(i=e.insertAfter(r,t.deepcopy()),t.hasInsPrev()){const s=e.findNode(t.getInsPrevID());i.setInsPrev(s)}r=i,t=t.getNext()}return e}toTestString(){const e=[];let t=this.head;for(;t;)t.isRemoved()?e.push(`{${t.toTestString()}}`):e.push(`[${t.toTestString()}]`),t=t.getNext();return e.join("")}insertAfter(e,t){const r=e.getNext();return t.setPrev(e),r&&r.setPrev(t),this.treeByID.put(t.getID(),t),this.treeByIndex.insertAfter(e,t),t}findNodeWithSplit(e,t){const r=e.getAbsoluteID();let i=this.findFloorNodePreferToLeft(r);const s=r.getOffset()-i.getID().getOffset(),[,o]=this.splitNode(i,s);for(;i.hasNext()&&i.getNext().getCreatedAt().after(t);)i=i.getNext();return[i,o,i.getNext()]}findFloorNodePreferToLeft(e){let t=this.findFloorNode(e);if(!t)throw new T(k.ErrInvalidArgument,`the node of the given id should be found: ${e.toTestString()}`);if(e.getOffset()>0&&t.getID().getOffset()==e.getOffset()){if(!t.hasInsPrev())return t;t=t.getInsPrev()}return t}findFloorNode(e){const t=this.treeByID.floorEntry(e);if(t&&!(!t.key.equals(e)&&!t.key.hasSameCreatedAt(e)))return t.value}findBetween(e,t){const r=[];let i=e;for(;i&&i!==t;)r.push(i),i=i.getNext();return r}splitNode(e,t){const r={data:0,meta:0};if(t>e.getContentLength())throw new T(k.ErrInvalidArgument,"offset should be less than or equal to length");if(t===0)return[e,r];if(t===e.getContentLength())return[e.getNext(),r];const i=e.getDataSize(),s=e.split(t);this.treeByIndex.updateWeight(s),this.insertAfter(e,s);const o=e.getInsNext();return o&&o.setInsPrev(s),s.setInsPrev(e),Ne(r,e.getDataSize(),s.getDataSize()),ds(r,i),[s,r]}deleteNodes(e,t,r){if(!e.length)return[[],new Map];const i=r===void 0,s=[],o=[],[a,u]=this.findEdgesOfCandidates(e);o.push(a);for(const h of e)h.canRemove(i||r.afterOrEqual(h.getCreatedAt()))?s.push(h):o.push(h);o.push(u);const c=this.makeChanges(o,t),d=new Map;for(const h of s)d.set(h.getID().toIDString(),h),h.remove(t,h.isRemoved()&&(i||r.afterOrEqual(h.getRemovedAt())));return this.deleteIndexNodes(o),[c,d]}findEdgesOfCandidates(e){return[e[0].getPrev(),e[e.length-1].getNext()]}makeChanges(e,t){const r=[];let i,s;for(let o=0;o<e.length-1;o++){const a=e[o],u=e[o+1];a.getNext()!=u&&([i]=this.findIndexesFromRange(a.getNext().createPosRange()),u?[,s]=this.findIndexesFromRange(u.getPrev().createPosRange()):s=this.treeByIndex.length,i<s&&r.push({actor:t.getActorID(),from:i,to:s}))}return r.reverse()}deleteIndexNodes(e){for(let t=0;t<e.length-1;t++){const r=e[t],i=e[t+1];r.getNext()!=i&&this.treeByIndex.deleteRange(r,i)}}purge(e){this.treeByIndex.delete(e),this.treeByID.remove(e.getID());const t=e.getPrev(),r=e.getNext(),i=e.getInsPrev(),s=e.getInsNext();t&&t.setNext(r),r&&r.setPrev(t),e.setPrev(void 0),e.setNext(void 0),i&&i.setInsNext(s),s&&s.setInsPrev(i),e.setInsPrev(void 0),e.setInsNext(void 0)}}const Ng=n=>n<0?Math.ceil(n):Math.floor(n);var pn=(n=>(n[n.Int=0]="Int",n[n.Long=1]="Long",n))(pn||{});class Qe extends Wo{constructor(t,r,i){super(i);l(this,"valueType");l(this,"value");switch(this.valueType=t,t){case 0:typeof r=="number"?r>Math.pow(2,31)-1||r<-Math.pow(2,31)?this.value=H.fromNumber(r).toInt():this.value=Ng(r):this.value=r.toInt();break;case 1:typeof r=="number"?this.value=H.fromNumber(r):this.value=r;break;default:throw new T(k.ErrUnimplemented,`unimplemented type: ${t}`)}}static create(t,r,i){return new Qe(t,r,i)}static valueFromBytes(t,r){switch(t){case 0:return r[0]|r[1]<<8|r[2]<<16|r[3]<<24;case 1:return H.fromBytesLE(Array.from(r));default:throw new T(k.ErrUnimplemented,`unimplemented type: ${t}`)}}getDataSize(){return{data:this.valueType===0?4:8,meta:this.getMetaUsage()}}toJSON(){return`${this.value}`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:this.value,type:"YORKIE_COUNTER"}}deepcopy(){const t=Qe.create(this.valueType,this.value,this.getCreatedAt());return t.setMovedAt(this.getMovedAt()),t}getType(){return this.valueType}static getCounterType(t){switch(typeof t){case"object":return t instanceof H?1:void 0;case"number":return t>Math.pow(2,31)-1||t<-Math.pow(2,31)?1:0;default:return}}static isSupport(t){return!!Qe.getCounterType(t)}static isInteger(t){return t%1===0}isNumericType(){const t=this.valueType;return t===0||t===1}getValueType(){return this.valueType}getValue(){return this.value}toBytes(){switch(this.valueType){case 0:{const t=this.value;return new Uint8Array([t&255,t>>8&255,t>>16&255,t>>24&255])}case 1:{const r=this.value.toBytesLE();return Uint8Array.from(r)}default:throw new T(k.ErrUnimplemented,`unimplemented type: ${this.valueType}`)}}increase(t){function r(i){if(!i.isNumericType())throw new TypeError(`Unsupported type of value: ${typeof i.getValue()}`)}return r(this),r(t),this.valueType===1?this.value=this.value.add(t.getValue()):t.getType()===te.Long?this.value=this.value+t.getValue().toInt():this.value=H.fromNumber(this.value+Ng(t.getValue())).toInt(),this}}class Rs extends Dt{constructor(t,r,i){super(t,i);l(this,"value");this.value=r}static create(t,r,i){return new Rs(t,r,i)}execute(t){const r=t.findByCreatedAt(this.getParentCreatedAt());if(!r)throw new T(k.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(r instanceof Qe))throw new T(k.ErrInvalidArgument,"fail to execute, only Counter can execute increase");const i=r,s=this.value.deepcopy();return i.increase(s),{opInfos:[{type:"increase",path:t.createPath(this.getParentCreatedAt()),value:s.getValue()}],reverseOp:this.toReverseOperation()}}toReverseOperation(){const t=this.value.deepcopy(),i=t.getType()===te.Long?t.getValue().multiply(-1):t.getValue()*-1;return Rs.create(this.getParentCreatedAt(),le.of(i,t.getCreatedAt()))}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.INCREASE.${this.value.toJSON()}`}getValue(){return this.value}}class Lr extends Dt{constructor(t,r,i,s,o,a){super(t,a);l(this,"fromPos");l(this,"toPos");l(this,"attributes");l(this,"attributesToRemove");this.fromPos=r,this.toPos=i,this.attributes=s,this.attributesToRemove=o}static create(t,r,i,s,o){return new Lr(t,r,i,s,[],o)}static createTreeRemoveStyleOperation(t,r,i,s,o){return new Lr(t,r,i,new Map,s,o)}execute(t,r,i){const s=t.findByCreatedAt(this.getParentCreatedAt());if(!s)throw new T(k.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(s instanceof at))throw new T(k.ErrInvalidArgument,"fail to execute, only Tree can execute edit");const o=s;let a,u,c={data:0,meta:0};if(this.attributes.size){const d={};[...this.attributes].forEach(([h,g])=>d[h]=g),[u,a,c]=o.style([this.fromPos,this.toPos],d,this.getExecutedAt(),i)}else{const d=this.attributesToRemove;[u,a,c]=o.removeStyle([this.fromPos,this.toPos],d,this.getExecutedAt(),i)}t.acc(c);for(const d of u)t.registerGCPair(d);return{opInfos:a.map(({from:d,to:h,value:g,fromPath:p,toPath:v})=>({type:"tree-style",from:d,to:h,value:this.attributes.size?{attributes:g}:{attributesToRemove:g},fromPath:p,toPath:v,path:t.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const t=this.getParentCreatedAt().toTestString(),r=`${this.fromPos.getLeftSiblingID().getCreatedAt().toTestString()}:${this.fromPos.getLeftSiblingID().getOffset()}`,i=`${this.toPos.getLeftSiblingID().getCreatedAt().toTestString()}:${this.toPos.getLeftSiblingID().getOffset()}`;return`${t}.STYLE(${r},${i},${Object.entries(this.attributes||{}).map(([s,o])=>`${s}:"${o}"`).join(" ")})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getAttributes(){return this.attributes}getAttributesToRemove(){return this.attributesToRemove}}class hn extends Dt{constructor(t,r,i,s){super(t,s);l(this,"createdAt");l(this,"value");this.createdAt=r,this.value=i}static create(t,r,i,s){return new hn(t,r,i,s)}execute(t){const r=t.findByCreatedAt(this.getParentCreatedAt());if(!r)throw new T(k.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(r instanceof ze))throw new T(k.ErrInvalidArgument,"fail to execute, only array can execute set");const i=r.getByID(this.createdAt).deepcopy(),s=this.toReverseOperation(this.value,i),o=this.value.deepcopy();return r.insertAfter(this.createdAt,o,this.getExecutedAt()),r.delete(this.createdAt,this.getExecutedAt()),t.registerElement(o),{opInfos:[{type:"array-set",path:t.createPath(this.getParentCreatedAt())}],reverseOp:s}}toReverseOperation(t,r){return hn.create(this.getParentCreatedAt(),t.getCreatedAt(),r)}getEffectedCreatedAt(){return this.createdAt}toTestString(){return`${this.getParentCreatedAt().toTestString()}.ARRAY_SET.${this.createdAt.toTestString()}=${this.value.toSortedJSON()}`}getCreatedAt(){return this.createdAt}getValue(){return this.value}setCreatedAt(t){this.createdAt=t}}function IS(n){const e=new iu,t=e.data;for(const[r,i]of Object.entries(n))t[r]=JSON.stringify(i);return e}function xS(n){if(n.type===gn.Put)return new bo({type:zi.PUT,presence:IS(n.presence)});if(n.type===gn.Clear)return new bo({type:zi.CLEAR});throw new T(k.ErrUnimplemented,"unimplemented type")}function AS(n){return new Ay({serverSeq:n.getServerSeq(),clientSeq:n.getClientSeq()})}function $y(n){return new nu({clientSeq:n.getClientSeq(),lamport:n.getLamport(),actorId:lu(n.getActorID()),versionVector:vd(n.getVersionVector())})}function F(n){if(n)return new M({lamport:n.getLamport(),delimiter:n.getDelimiter(),actorId:lu(n.getActorID())})}function vd(n){if(!n)return;const e=new ru;for(const[t,r]of n){const i=ak(lu(t));e.vector[i]=BigInt(r.toString())}return e}function Jy(n){switch(n){case te.Null:return V.NULL;case te.Boolean:return V.BOOLEAN;case te.Integer:return V.INTEGER;case te.Long:return V.LONG;case te.Double:return V.DOUBLE;case te.String:return V.STRING;case te.Bytes:return V.BYTES;case te.Date:return V.DATE;default:throw new T(k.ErrInvalidType,`unsupported type: ${n}`)}}function Uy(n){switch(n){case pn.Int:return V.INTEGER_CNT;case pn.Long:return V.LONG_CNT;default:throw new T(k.ErrInvalidType,`unsupported type: ${n}`)}}function pa(n){if(n instanceof Be)return new ht({type:V.JSON_OBJECT,createdAt:F(n.getCreatedAt()),value:ev(n)});if(n instanceof ze)return new ht({type:V.JSON_ARRAY,createdAt:F(n.getCreatedAt()),value:rk(n)});if(n instanceof ot)return new ht({type:V.TEXT,createdAt:F(n.getCreatedAt())});if(n instanceof le)return new ht({type:Jy(n.getType()),createdAt:F(n.getCreatedAt()),value:n.toBytes()});if(n instanceof Qe)return new ht({type:Uy(n.getType()),createdAt:F(n.getCreatedAt()),value:n.toBytes()});if(n instanceof at)return new ht({type:V.TREE,createdAt:F(n.getCreatedAt()),value:sk(n)});throw new T(k.ErrUnimplemented,"unimplemented element")}function ES(n){return new Oo({createdAt:F(n.getCreatedAt()),offset:n.getOffset()})}function ya(n){return new Mi({createdAt:F(n.getID().getCreatedAt()),offset:n.getID().getOffset(),relativeOffset:n.getRelativeOffset()})}function va(n){return new Bi({parentId:co(n.getParentID()),leftSiblingId:co(n.getLeftSiblingID())})}function co(n){return new ai({createdAt:F(n.getCreatedAt()),offset:n.getOffset()})}function jy(n){const e=new hd;if(n instanceof Fi){const t=n,r=new gl;r.parentCreatedAt=F(t.getParentCreatedAt()),r.key=t.getKey(),r.value=pa(t.getValue()),r.executedAt=F(t.getExecutedAt()),e.body.case="set",e.body.value=r}else if(n instanceof Fr){const t=n,r=new ml;r.parentCreatedAt=F(t.getParentCreatedAt()),r.prevCreatedAt=F(t.getPrevCreatedAt()),r.value=pa(t.getValue()),r.executedAt=F(t.getExecutedAt()),e.body.case="add",e.body.value=r}else if(n instanceof Jt){const t=n,r=new pl;r.parentCreatedAt=F(t.getParentCreatedAt()),r.prevCreatedAt=F(t.getPrevCreatedAt()),r.createdAt=F(t.getCreatedAt()),r.executedAt=F(t.getExecutedAt()),e.body.case="move",e.body.value=r}else if(n instanceof mn){const t=n,r=new yl;r.parentCreatedAt=F(t.getParentCreatedAt()),r.createdAt=F(t.getCreatedAt()),r.executedAt=F(t.getExecutedAt()),e.body.case="remove",e.body.value=r}else if(n instanceof Ho){const t=n,r=new vl;r.parentCreatedAt=F(t.getParentCreatedAt()),r.from=ya(t.getFromPos()),r.to=ya(t.getToPos()),r.content=t.getContent();const i=r.attributes;for(const[s,o]of t.getAttributes())i[s]=o;r.executedAt=F(t.getExecutedAt()),e.body.case="edit",e.body.value=r}else if(n instanceof _o){const t=n,r=new wl;r.parentCreatedAt=F(t.getParentCreatedAt()),r.from=ya(t.getFromPos()),r.to=ya(t.getToPos());const i=r.attributes;for(const[s,o]of t.getAttributes())i[s]=o;r.executedAt=F(t.getExecutedAt()),e.body.case="style",e.body.value=r}else if(n instanceof Rs){const t=n,r=new Sl;r.parentCreatedAt=F(t.getParentCreatedAt()),r.value=pa(t.getValue()),r.executedAt=F(t.getExecutedAt()),e.body.case="increase",e.body.value=r}else if(n instanceof Go){const t=n,r=new kl;r.parentCreatedAt=F(t.getParentCreatedAt()),r.from=va(t.getFromPos()),r.to=va(t.getToPos()),r.contents=LS(t.getContents()),r.splitLevel=t.getSplitLevel(),r.executedAt=F(t.getExecutedAt()),e.body.case="treeEdit",e.body.value=r}else if(n instanceof Lr){const t=n,r=new Tl;r.parentCreatedAt=F(t.getParentCreatedAt()),r.from=va(t.getFromPos()),r.to=va(t.getToPos());const i=t.getAttributesToRemove();if(i.length>0)r.attributesToRemove=i;else{const s=r.attributes;for(const[o,a]of t.getAttributes())s[o]=a}r.executedAt=F(t.getExecutedAt()),e.body.case="treeStyle",e.body.value=r}else if(n instanceof hn){const t=n,r=new Il;r.parentCreatedAt=F(t.getParentCreatedAt()),r.createdAt=F(t.getCreatedAt()),r.value=pa(t.getValue()),r.executedAt=F(t.getExecutedAt()),e.body.case="arraySet",e.body.value=r}else throw new T(k.ErrUnimplemented,"unimplemented operation");return e}function CS(n){const e=[];for(const t of n)e.push(jy(t));return e}function NS(n){const e=new Iy({id:$y(n.getID()),message:n.getMessage()});return n.hasOperations()&&(e.operations=CS(n.getOperations())),n.hasPresenceChange()&&(e.presenceChange=xS(n.getPresenceChange())),e}function PS(n){const e=[];for(const t of n)e.push(NS(t));return e}function DS(n){const e=[];for(const t of n)e.push(new xy({key:t.getStrKey(),element:Sd(t.getValue())}));return e}function RS(n){const e=[];for(const t of n)e.push(new Dl({element:Sd(t.getValue())}));return e}function OS(n){const e=[];for(const t of n){const r=new Rl;r.id=ES(t.getID()),r.value=t.getValue().getContent(),r.removedAt=F(t.getRemovedAt());const i=r.attributes,s=t.getValue().getAttrs();for(const o of s){const a=new As;a.value=o.getValue(),a.updatedAt=F(o.getUpdatedAt()),i[o.getKey()]=a}e.push(r)}return e}function LS(n){const e=[];if(!n||!n.length)return e;for(const t of n)e.push(new Ol({content:wd(t)}));return e}function bS(n){const e={};for(const t of n)e[t.getKey()]=new As({value:t.getValue(),updatedAt:F(t.getUpdatedAt()),isRemoved:t.isRemoved()});return e}function wd(n){if(!n)return[];const e=[];return su(n,(t,r)=>{const i=new Lo({id:co(t.id),type:t.type,removedAt:F(t.removedAt),depth:r});t.isText&&(i.value=t.value),t.insPrevID&&(i.insPrevId=co(t.insPrevID)),t.insNextID&&(i.insNextId=co(t.insNextID)),t.attrs&&(i.attributes=bS(t.attrs)),e.push(i)}),e}function BS(n){const e=new Ze;return e.body.case="jsonObject",e.body.value=new xl({nodes:DS(n.getRHT()),createdAt:F(n.getCreatedAt()),movedAt:F(n.getMovedAt()),removedAt:F(n.getRemovedAt())}),e}function Vy(n){const e=new Ze;return e.body.case="jsonArray",e.body.value=new Al({nodes:RS(n.getElements()),createdAt:F(n.getCreatedAt()),movedAt:F(n.getMovedAt()),removedAt:F(n.getRemovedAt())}),e}function zS(n){const e=new Ze;return e.body.case="primitive",e.body.value=new El({type:Jy(n.getType()),value:n.toBytes(),createdAt:F(n.getCreatedAt()),movedAt:F(n.getMovedAt()),removedAt:F(n.getRemovedAt())}),e}function MS(n){const e=new Ze;return e.body.case="text",e.body.value=new Cl({nodes:OS(n.getRGATreeSplit()),createdAt:F(n.getCreatedAt()),movedAt:F(n.getMovedAt()),removedAt:F(n.getRemovedAt())}),e}function FS(n){const e=new Ze;return e.body.case="counter",e.body.value=new Nl({type:Uy(n.getType()),value:n.toBytes(),createdAt:F(n.getCreatedAt()),movedAt:F(n.getMovedAt()),removedAt:F(n.getRemovedAt())}),e}function qy(n){const e=new Ze;return e.body.case="tree",e.body.value=new Pl({nodes:wd(n.getRoot()),createdAt:F(n.getCreatedAt()),movedAt:F(n.getMovedAt()),removedAt:F(n.getRemovedAt())}),e}function Sd(n){if(n instanceof Be)return BS(n);if(n instanceof ze)return Vy(n);if(n instanceof le)return zS(n);if(n instanceof ot)return MS(n);if(n instanceof Qe)return FS(n);if(n instanceof at)return qy(n);throw new T(k.ErrUnimplemented,"unimplemented element")}function $S(n){return new Ur({documentKey:n.getDocumentKey(),checkpoint:AS(n.getCheckpoint()),isRemoved:n.getIsRemoved(),changes:PS(n.getChanges()),snapshot:n.getSnapshot(),versionVector:vd(n.getVersionVector())})}function Qs(n){if(!(n instanceof Q))return{};const e=n.findDetails(rS);for(const t of e)return t.metadata;return{}}function qr(n){return Qs(n).code??""}function Ky(n){return zt.of(n.clientSeq,BigInt(n.lamport),Ad(n.actorId),kd(n.versionVector),BigInt(n.serverSeq))}function kd(n){if(!n)return;const e=new hs;return Object.entries(n.vector).forEach(([t,r])=>{const i=au(ok(t));e.set(i,BigInt(r.toString()))}),e}function J(n){if(n)return Ct.of(BigInt(n.lamport),n.delimiter,Ad(n.actorId))}function Td(n){const e={};return Object.entries(n.data).forEach(([t,r])=>{e[t]=JSON.parse(r)}),e}function JS(n){const e=n.type;if(e===zi.PUT){const t=Td(n.presence);return{type:gn.Put,presence:t}}if(e===zi.CLEAR)return{type:gn.Clear};throw new T(k.ErrInvalidType,`unsupported type: ${e}`)}function US(n){const e=new Map;return Object.entries(n).forEach(([t,r])=>{e.set(t,Td(r))}),e}function Wy(n){switch(n){case V.NULL:return te.Null;case V.BOOLEAN:return te.Boolean;case V.INTEGER:return te.Integer;case V.LONG:return te.Long;case V.DOUBLE:return te.Double;case V.STRING:return te.String;case V.BYTES:return te.Bytes;case V.DATE:return te.Date}throw new T(k.ErrUnimplemented,`unimplemented value type: ${n}`)}function Ml(n){switch(n){case V.INTEGER_CNT:return pn.Int;case V.LONG_CNT:return pn.Long}throw new T(k.ErrUnimplemented,`unimplemented value type: ${n}`)}function wa(n){switch(n.type){case V.JSON_OBJECT:return n.value?Zy(n.value):Be.create(J(n.createdAt));case V.JSON_ARRAY:return n.value?nk(n.value):ze.create(J(n.createdAt));case V.TEXT:return ot.create(Ds.create(),J(n.createdAt));case V.TREE:return ik(n.value);case V.NULL:case V.BOOLEAN:case V.INTEGER:case V.LONG:case V.DOUBLE:case V.STRING:case V.BYTES:case V.DATE:return le.of(le.valueFromBytes(Wy(n.type),n.value),J(n.createdAt));case V.INTEGER_CNT:case V.LONG_CNT:return Qe.create(Ml(n.type),Qe.valueFromBytes(Ml(n.type),n.value),J(n.createdAt))}}function Sa(n){return qt.of(dn.of(J(n.createdAt),n.offset),n.relativeOffset)}function Hy(n){return dn.of(J(n.createdAt),n.offset)}function jS(n){const e=Fo.create(n.value);Object.entries(n.attributes).forEach(([r,i])=>{e.setAttr(r,i.value,J(i.updatedAt))});const t=ui.create(Hy(n.id),e);return t.setRemovedAt(J(n.removedAt)),t}function qi(n){return Ut.of(fo(n.parentId),fo(n.leftSiblingId))}function fo(n){return De.of(J(n.createdAt),n.offset)}function VS(n){if(!n.length)return;const e=[];return n.forEach(t=>{const r=Id(t.content);e.push(r)}),e}function Id(n){if(n.length===0)return;const e=[];for(const i of n)e.push(KS(i));const t=e[e.length-1],r=new Map;r.set(n[e.length-1].depth,e[e.length-1]);for(let i=e.length-2;i>=0;i--)r.get(n[i].depth-1).prepend(e[i]),r.set(n[i].depth,e[i]);return t.updateDescendantsSize(),at.create(t,Es).getRoot()}function qS(n){const e=$r.create();for(const[t,r]of Object.entries(n))e.setInternal(t,r.value,J(r.updatedAt),r.isRemoved);return e}function KS(n){const e=fo(n.id),t=rt.create(e,n.type),r=Object.entries(n.attributes);return t.isText?t.value=n.value:r.length&&(t.attrs=qS(n.attributes)),n.insPrevId&&(t.insPrevID=fo(n.insPrevId)),n.insNextId&&(t.insNextID=fo(n.insNextId)),t.removedAt=J(n.removedAt),t}function _y(n){if(n.body.case==="set"){const e=n.body.value;return Fi.create(e.key,wa(e.value),J(e.parentCreatedAt),J(e.executedAt))}else if(n.body.case==="add"){const e=n.body.value;return Fr.create(J(e.parentCreatedAt),J(e.prevCreatedAt),wa(e.value),J(e.executedAt))}else if(n.body.case==="move"){const e=n.body.value;return Jt.create(J(e.parentCreatedAt),J(e.prevCreatedAt),J(e.createdAt),J(e.executedAt))}else if(n.body.case==="remove"){const e=n.body.value;return mn.create(J(e.parentCreatedAt),J(e.createdAt),J(e.executedAt))}else if(n.body.case==="edit"){const e=n.body.value,t=new Map;return Object.entries(e.attributes).forEach(([r,i])=>{t.set(r,i)}),Ho.create(J(e.parentCreatedAt),Sa(e.from),Sa(e.to),e.content,t,J(e.executedAt))}else if(n.body.case==="style"){const e=n.body.value,t=new Map;return Object.entries(e.attributes).forEach(([r,i])=>{t.set(r,i)}),_o.create(J(e.parentCreatedAt),Sa(e.from),Sa(e.to),t,J(e.executedAt))}else if(n.body.case==="increase"){const e=n.body.value;return Rs.create(J(e.parentCreatedAt),wa(e.value),J(e.executedAt))}else if(n.body.case==="treeEdit"){const e=n.body.value;return Go.create(J(e.parentCreatedAt),qi(e.from),qi(e.to),VS(e.contents),e.splitLevel,J(e.executedAt))}else if(n.body.case==="treeStyle"){const e=n.body.value,t=new Map,r=e.attributesToRemove;return(r==null?void 0:r.length)>0?Lr.createTreeRemoveStyleOperation(J(e.parentCreatedAt),qi(e.from),qi(e.to),r,J(e.executedAt)):(Object.entries(e.attributes).forEach(([i,s])=>{t.set(i,s)}),Lr.create(J(e.parentCreatedAt),qi(e.from),qi(e.to),t,J(e.executedAt)))}else if(n.body.case==="arraySet"){const e=n.body.value;return hn.create(J(e.parentCreatedAt),J(e.createdAt),wa(e.value),J(e.executedAt))}else throw new T(k.ErrUnimplemented,"unimplemented operation")}function WS(n){const e=[];for(const t of n){const r=_y(t);r&&e.push(r)}return e}function Gy(n){const e=[];for(const t of n)e.push(Ps.create({id:Ky(t.id),operations:WS(t.operations),presenceChange:t.presenceChange?JS(t.presenceChange):void 0,message:t.message}));return e}function HS(n){return gs.of(BigInt(n.serverSeq),n.clientSeq)}function _S(n){return ou.create(n.documentKey,HS(n.checkpoint),n.isRemoved,Gy(n.changes),kd(n.versionVector),n.snapshot)}function Yy(n){const e=new Bo;for(const r of n.nodes){const i=xd(r.element);e.set(r.key,i,i.getPositionedAt())}const t=new Be(J(n.createdAt),e);return t.setMovedAt(J(n.movedAt)),t.setRemovedAt(J(n.removedAt)),t}function Xy(n){const e=new Mo;for(const r of n.nodes)e.insert(xd(r.element));const t=new ze(J(n.createdAt),e);return t.setMovedAt(J(n.movedAt)),t.setRemovedAt(J(n.removedAt)),t}function GS(n){const e=le.of(le.valueFromBytes(Wy(n.type),n.value),J(n.createdAt));return e.setMovedAt(J(n.movedAt)),e.setRemovedAt(J(n.removedAt)),e}function YS(n){const e=new Ds;let t=e.getHead();for(const i of n.nodes){const s=e.insertAfter(t,jS(i));i.insPrevId&&s.setInsPrev(e.findNode(Hy(i.insPrevId))),t=s}const r=new ot(e,J(n.createdAt));return r.setMovedAt(J(n.movedAt)),r.setRemovedAt(J(n.removedAt)),r}function XS(n){const e=Qe.create(Ml(n.type),Qe.valueFromBytes(Ml(n.type),n.value),J(n.createdAt));return e.setMovedAt(J(n.movedAt)),e.setRemovedAt(J(n.removedAt)),e}function Qy(n){const e=Id(n.nodes);return at.create(e,J(n.createdAt))}function xd(n){if(n.body.case==="jsonObject")return Yy(n.body.value);if(n.body.case==="jsonArray")return Xy(n.body.value);if(n.body.case==="primitive")return GS(n.body.value);if(n.body.case==="text")return YS(n.body.value);if(n.body.case==="counter")return XS(n.body.value);if(n.body.case==="tree")return Qy(n.body.value);throw new T(k.ErrUnimplemented,"unimplemented element")}function QS(n){return n.map(e=>({path:e.path,type:e.type}))}function ZS(n){if(!n)return{root:Be.create(Es),presences:new Map};const e=$c.fromBinary(n);return{root:xd(e.root),presences:US(e.presences)}}function ek(n){const e=vd(n);return au(e.toBinary())}function tk(n){const e=Ed(n),t=ru.fromBinary(e);return kd(t)}function Zy(n){if(!n)throw new T(k.ErrInvalidArgument,"bytes is empty");const e=Ze.fromBinary(n);return Yy(e.body.value)}function ev(n){return Sd(n).toBinary()}function nk(n){if(!n)throw new T(k.ErrInvalidArgument,"bytes is empty");const e=Ze.fromBinary(n);return Xy(e.body.value)}function rk(n){return Vy(n).toBinary()}function ik(n){if(!n)throw new T(k.ErrInvalidArgument,"bytes is empty");const e=Ze.fromBinary(n);return Qy(e.body.value)}function sk(n){return qy(n).toBinary()}function au(n){return n?Array.from(n).map(e=>e.toString(16).padStart(2,"0")).join(""):""}function Ad(n){return au(n)}function Ed(n){return new Uint8Array(n.match(/.{1,2}/g).map(e=>parseInt(e,16)))}function ok(n){if(typeof window<"u"&&typeof window.atob=="function"){const e=window.atob(n),t=e.length,r=new Uint8Array(t);for(let i=0;i<t;i++)r[i]=e.charCodeAt(i);return r}else if(typeof globalThis<"u"&&typeof globalThis.Buffer<"u"){const e=globalThis.Buffer;return new Uint8Array(e.from(n,"base64"))}else throw new Error("No base64 decoder available")}function lu(n){return Ed(n)}function ak(n){if(typeof window<"u"&&typeof window.btoa=="function"){let e="";for(let t=0;t<n.byteLength;t++)e+=String.fromCharCode(n[t]);return window.btoa(e)}else{if(typeof globalThis<"u"&&typeof globalThis.Buffer<"u")return globalThis.Buffer.from(n).toString("base64");throw new Error("No base64 encoder available")}}function lk(n){const e=nu.fromBinary(n);return Ky(e)}function uk(n){const e=hd.fromBinary(n);return _y(e)}const de={fromPresence:Td,toChangePack:$S,fromChangePack:_S,fromChanges:Gy,toTreeNodes:wd,fromTreeNodes:Id,objectToBytes:ev,bytesToObject:Zy,bytesToSnapshot:ZS,bytesToHex:au,hexToBytes:Ed,toHexString:Ad,toUint8Array:lu,toOperation:jy,toChangeID:$y,PbChangeID:nu,bytesToChangeID:lk,bytesToOperation:uk,versionVectorToHex:ek,hexToVersionVector:tk,fromSchemaRules:QS};var Ke=(n=>(n[n.Trivial=0]="Trivial",n[n.Debug=1]="Debug",n[n.Info=2]="Info",n[n.Warn=3]="Warn",n[n.Error=4]="Error",n[n.Fatal=5]="Fatal",n))(Ke||{});let ki=3;function ck(n){ki=n}const U={trivial:(...n)=>{ki>0||typeof console<"u"&&console.log("YORKIE T:",...n)},debug:(...n)=>{ki>1||typeof console<"u"&&console.log("YORKIE D:",...n)},info:(...n)=>{ki>2||typeof console<"u"&&console.log("YORKIE I:",...n)},warn:(...n)=>{ki>3||typeof console<"u"&&(typeof console.warn<"u"?console.warn("YORKIE W:",...n):console.log("YORKIE W:",...n))},error:(...n)=>{ki>4||typeof console<"u"&&(typeof console.error<"u"?console.error("YORKIE E:",...n):console.log("YORKIE E:",...n))},fatal:(...n)=>{typeof console<"u"&&(typeof console.error<"u"?console.error("YORKIE F:",...n):console.log("YORKIE F:",...n))},isEnabled:n=>ki<=n};function tv(){return"xxxxxxxx-xxxx-4xxxy-xxxx-xxxxxxxxxxx".replace(/[xy]/g,n=>{const e=Math.random()*16|0;return(n==="x"?e:e&3|8).toString(16)})}class fk{constructor(e,t,r,i,s){l(this,"reconnectStreamDelay");l(this,"doc");l(this,"docID");l(this,"syncMode");l(this,"remoteChangeEventReceived");l(this,"cancelled");l(this,"watchStream");l(this,"watchLoopTimerID");l(this,"watchAbortController");l(this,"unsubscribeBroadcastEvent");this.reconnectStreamDelay=e,this.doc=t,this.docID=r,this.syncMode=i,this.remoteChangeEventReceived=!1,this.cancelled=!1,this.unsubscribeBroadcastEvent=s}changeSyncMode(e){this.syncMode=e}needRealtimeSync(){return this.syncMode===Ua.RealtimeSyncOff?!1:this.syncMode===Ua.RealtimePushOnly?this.doc.hasLocalChanges():this.syncMode!==Ua.Manual&&(this.doc.hasLocalChanges()||this.remoteChangeEventReceived)}async runWatchLoop(e){const t=async()=>{if(this.watchStream)return Promise.resolve();this.watchLoopTimerID&&(clearTimeout(this.watchLoopTimerID),this.watchLoopTimerID=void 0);try{[this.watchStream,this.watchAbortController]=await e(()=>{this.watchStream=void 0,this.watchAbortController=void 0,this.cancelled||(this.watchLoopTimerID=setTimeout(t,this.reconnectStreamDelay))})}catch{}};await t()}cancelWatchStream(){this.cancelled=!0,this.watchStream&&this.watchAbortController&&(this.watchAbortController.abort(),this.watchStream=void 0,this.watchAbortController=void 0),clearTimeout(this.watchLoopTimerID),this.watchLoopTimerID=void 0}}function dk(n,e){const t=[];for(const r of e){const i=hk(n,r.path),s=gk(i,r);if(!s.valid)for(const o of s.errors||[])t.push(o)}return{valid:t.length===0,errors:t}}function hk(n,e){if(!e.startsWith("$"))throw new Error(`Path must start with $, got ${e}`);const t=e.split(".");let r=n;for(let i=1;i<t.length;i++){const s=t[i];if(!(r instanceof Be))return;r=r.get(s)}return r}function gk(n,e){switch(e.type){case"string":case"boolean":case"integer":case"double":case"long":case"date":case"bytes":case"null":return pk(n,e);case"object":if(!(n instanceof Be))return{valid:!1,errors:[{path:e.path,message:`expected object at path ${e.path}`}]};break;case"array":if(!(n instanceof ze))return{valid:!1,errors:[{path:e.path,message:`expected array at path ${e.path}`}]};break;case"yorkie.Text":if(!(n instanceof ot))return{valid:!1,errors:[{path:e.path,message:`expected yorkie.Text at path ${e.path}`}]};break;case"yorkie.Tree":if(!(n instanceof at))return{valid:!1,errors:[{path:e.path,message:`expected yorkie.Tree at path ${e.path}`}]};break;case"yorkie.Counter":if(!(n instanceof Qe))return{valid:!1,errors:[{path:e.path,message:`expected yorkie.Counter at path ${e.path}`}]};break;default:throw new Error(`Unknown rule type: ${e.type}`)}return{valid:!0}}function mk(n){switch(n){case"null":return te.Null;case"boolean":return te.Boolean;case"integer":return te.Integer;case"long":return te.Long;case"double":return te.Double;case"string":return te.String;case"bytes":return te.Bytes;case"date":return te.Date;default:throw new Error(`Unknown primitive type: ${n}`)}}function pk(n,e){return n instanceof le&&n.getType()===mk(e.type)?{valid:!0}:{valid:!1,errors:[{path:e.path,message:`expected ${e.type} at path ${e.path}`}]}}const Uu=()=>{};class yk{constructor(e){l(this,"finalized",!1);l(this,"observers",[]);l(this,"finalError");try{e(this)}catch(t){this.error(t)}}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(!e)throw new T(k.ErrInvalidArgument,"missing observer");if(this.finalized)throw new T(k.ErrRefused,"observable is finalized due to previous error");typeof e=="object"?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Uu),i.error===void 0&&(i.error=Uu),i.complete===void 0&&(i.complete=Uu);const s=tv(),o=this.unsubscribeOne.bind(this,s);if(this.observers.push({subscriptionID:s,observer:i}),this.finalized)try{this.finalError?i.error(this.finalError):i.complete()}catch(a){U.warn(a)}return o}unsubscribeOne(e){var t;this.observers=(t=this.observers)==null?void 0:t.filter(r=>r.subscriptionID!==e)}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e].observer)}catch(r){U.error(r)}}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.observers=void 0)}}function vk(n){const e=new yk(n);return{subscribe:e.subscribe.bind(e),getProxy:()=>e}}class ss{constructor(e,t,r,i){l(this,"prevID");l(this,"nextID");l(this,"delimiter");l(this,"message");l(this,"root");l(this,"operations");l(this,"presenceChange");l(this,"previousPresence");l(this,"reversePresenceKeys");this.prevID=e,this.nextID=e.next(),this.delimiter=Ey,this.root=t,this.operations=[],this.previousPresence=Bt(r),this.presenceChange=void 0,this.reversePresenceKeys=new Set,this.message=i}static create(e,t,r,i){return new ss(e,t,r,i)}push(e){this.operations.push(e)}registerElement(e,t){this.root.registerElement(e,t)}registerRemovedElement(e){this.root.registerRemovedElement(e)}registerGCPair(e){this.root.registerGCPair(e)}getNextID(){return this.isPresenceOnlyChange()?this.prevID.next(!0).setLamport(this.prevID.getLamport()).setVersionVector(this.prevID.getVersionVector()):this.nextID}toChange(){const e=this.isPresenceOnlyChange()?this.prevID.next(!0):this.nextID;return Ps.create({id:e,operations:this.operations,presenceChange:this.presenceChange,message:this.message})}isPresenceOnlyChange(){return this.operations.length===0}hasChange(){return this.operations.length>0||this.presenceChange!==void 0}setPresenceChange(e){this.presenceChange=e}setReversePresence(e,t){for(const r of Object.keys(e))t!=null&&t.addToHistory?this.reversePresenceKeys.add(r):this.reversePresenceKeys.delete(r)}getReversePresence(){if(this.reversePresenceKeys.size===0)return;const e={};for(const t of this.reversePresenceKeys)e[t]=this.previousPresence[t];return e}issueTimeTicket(){return this.delimiter+=1,this.nextID.createTimeTicket(this.delimiter)}getLastTimeTicket(){return this.nextID.createTimeTicket(this.delimiter)}acc(e){this.root.acc(e)}}class $o{constructor(e){l(this,"rootObject");l(this,"elementPairMapByCreatedAt");l(this,"gcElementSetByCreatedAt");l(this,"gcPairMap");l(this,"docSize");this.rootObject=e,this.elementPairMapByCreatedAt=new Map,this.gcElementSetByCreatedAt=new Set,this.gcPairMap=new Map,this.docSize={live:{data:0,meta:0},gc:{data:0,meta:0}},this.registerElement(e,void 0),e.getDescendants(t=>{if(t.getRemovedAt()&&this.registerRemovedElement(t),t instanceof ot||t instanceof at)for(const r of t.getGCPairs())this.registerGCPair(r);return!1})}static create(){return new $o(Be.create(Es))}findByCreatedAt(e){const t=this.elementPairMapByCreatedAt.get(e.toIDString());if(t)return t.element}findElementPairByCreatedAt(e){return this.elementPairMapByCreatedAt.get(e.toIDString())}createSubPaths(e){let t=this.elementPairMapByCreatedAt.get(e.toIDString());if(!t)return[];const r=[];for(;t.parent;){const i=t.element.getCreatedAt(),s=t.parent.subPathOf(i);if(s===void 0)throw new T(k.ErrInvalidArgument,`cant find the given element: ${i.toIDString()}`);r.unshift(s),t=this.elementPairMapByCreatedAt.get(t.parent.getCreatedAt().toIDString())}return r.unshift("$"),r}createPath(e){return this.createSubPaths(e).join(".")}registerElement(e,t){this.elementPairMapByCreatedAt.set(e.getCreatedAt().toIDString(),{parent:t,element:e}),Ne(this.docSize.live,e.getDataSize()),e instanceof li&&e.getDescendants((r,i)=>(this.elementPairMapByCreatedAt.set(r.getCreatedAt().toIDString(),{parent:i,element:r}),Ne(this.docSize.live,r.getDataSize()),!1))}deregisterElement(e){let t=0;const r=i=>{const s=i.getCreatedAt().toIDString();ds(this.docSize.gc,i.getDataSize()),this.elementPairMapByCreatedAt.delete(s),this.gcElementSetByCreatedAt.delete(s),t++};return r(e),e instanceof li&&e.getDescendants(i=>(r(i),!1)),t}registerRemovedElement(e){Ne(this.docSize.gc,e.getDataSize()),ds(this.docSize.live,e.getDataSize()),this.docSize.live.meta+=cn,this.gcElementSetByCreatedAt.add(e.getCreatedAt().toIDString())}registerGCPair(e){if(this.gcPairMap.get(e.child.toIDString())){this.gcPairMap.delete(e.child.toIDString());return}this.gcPairMap.set(e.child.toIDString(),e);const r=this.gcPairMap.get(e.child.toIDString()).child.getDataSize();Ne(this.docSize.gc,r),ds(this.docSize.live,r),e.child instanceof Qr||(this.docSize.live.meta+=cn)}getElementMapSize(){return this.elementPairMapByCreatedAt.size}getGarbageElementSetSize(){const e=new Set;for(const t of this.gcElementSetByCreatedAt){e.add(t);const r=this.elementPairMapByCreatedAt.get(t);r.element instanceof li&&r.element.getDescendants(i=>(e.add(i.getCreatedAt().toIDString()),!1))}return e.size}getObject(){return this.rootObject}getGarbageLen(){return this.getGarbageElementSetSize()+this.gcPairMap.size}getDocSize(){return this.docSize}deepcopy(){return new $o(this.rootObject.deepcopy())}garbageCollect(e){let t=0;for(const r of this.gcElementSetByCreatedAt){const i=this.elementPairMapByCreatedAt.get(r),s=i.element.getRemovedAt();s&&(e!=null&&e.afterOrEqual(s))&&(i.parent.purge(i.element),t+=this.deregisterElement(i.element))}for(const[,r]of this.gcPairMap){const i=r.child.getRemovedAt();i&&(e!=null&&e.afterOrEqual(i))&&(r.parent.purge(r.child),this.gcPairMap.delete(r.child.toIDString()),t+=1)}return t}toJSON(){return this.rootObject.toJSON()}toSortedJSON(){return this.rootObject.toSortedJSON()}getStats(){return{elements:this.getElementMapSize(),gcPairs:this.gcPairMap.size,gcElements:this.getGarbageElementSetSize()}}acc(e){Ne(this.docSize.live,e)}}function nv(n,e){const t=new Jo(n);return new Proxy(e,t.getHandlers())}class Jo{constructor(e){l(this,"context");l(this,"handlers");this.context=e,this.handlers={set:(t,r,i)=>(U.isEnabled(Ke.Trivial)&&U.trivial(`obj[${r}]=${JSON.stringify(i)}`),Jo.setInternal(e,t,r,i),!0),get:(t,r)=>(U.isEnabled(Ke.Trivial)&&U.trivial(`obj[${r}]`),r==="getID"?()=>t.getCreatedAt():r==="toJSON"||r==="toString"?()=>t.toJSON():r==="toJS"?()=>t.toJS():r==="toJSForTest"?()=>t.toJSForTest():Ti(e,t.get(r))),ownKeys:t=>t.getKeys(),getOwnPropertyDescriptor:()=>({enumerable:!0,configurable:!0}),deleteProperty:(t,r)=>(U.isEnabled(Ke.Trivial)&&U.trivial(`obj[${r}]`),Jo.deleteInternal(e,t,r),!0)}}static setInternal(e,t,r,i){if(r.includes("."))throw new T(k.ErrInvalidObjectKey,"key must not contain the '.'.");const s=e.issueTimeTicket(),o=ho(e,i,s),a=t.set(r,o,s);e.registerElement(o,t),a&&e.registerRemovedElement(a),e.push(Fi.create(r,o.deepcopy(),t.getCreatedAt(),s))}static buildObjectMembers(e,t){const r={};for(const[i,s]of Object.entries(t)){if(i.includes("."))throw new T(k.ErrInvalidObjectKey,"key must not contain the '.'.");const o=e.issueTimeTicket(),a=ho(e,s,o);r[i]=a}return r}static deleteInternal(e,t,r){const i=e.issueTimeTicket(),s=t.deleteByKey(r,i);s&&(e.push(mn.create(t.getCreatedAt(),s.getCreatedAt(),i)),e.registerRemovedElement(s))}getHandlers(){return this.handlers}}function wk(n,e){const t=new X(n,e);return new Proxy(e,t.getHandlers())}function Pg(n){return typeof n=="string"||n instanceof String?!isNaN(n):!1}function Sk(n){return["concat","entries","every","filter","find","findIndex","forEach","join","keys","map","reduce","reduceRight","slice","some","toLocaleString","toString","values"].includes(n)}class X{constructor(e,t){l(this,"context");l(this,"handlers");l(this,"array");this.context=e,this.array=t,this.handlers={get:(r,i,s)=>i==="getID"?()=>r.getCreatedAt():i==="getElementByID"?o=>{const a=r.getByID(o);if(!(!a||a.isRemoved()))return Lt(e,a)}:i==="getElementByIndex"?o=>{const a=r.get(o);return Lt(e,a)}:i==="getLast"?()=>Lt(e,r.getLast()):i==="delete"?o=>{const a=X.deleteInternalByIndex(e,r,o);return Lt(e,a)}:i==="deleteByID"?o=>{const a=X.deleteInternalByID(e,r,o);return Lt(e,a)}:i==="insertAfter"?(o,a)=>{const u=X.insertAfterInternal(e,r,o,a);return Lt(e,u)}:i==="insertIntegerAfter"?(o,a)=>{const u=X.insertIntegerAfterInternal(e,r,o,a);return Lt(e,u)}:i==="insertBefore"?(o,a)=>{const u=X.insertBeforeInternal(e,r,o,a);return Lt(e,u)}:i==="setValue"?(o,a)=>{const u=X.setValueInternal(e,r,o,a);return Lt(e,u)}:i==="moveBefore"?(o,a)=>{X.moveBeforeInternal(e,r,o,a)}:i==="moveAfter"?(o,a)=>{X.moveAfterInternal(e,r,o,a)}:i==="moveAfterByIndex"?(o,a)=>{X.moveAfterByIndexInternal(e,r,o,a)}:i==="moveFront"?o=>{X.moveFrontInternal(e,r,o)}:i==="moveLast"?o=>{X.moveLastInternal(e,r,o)}:Pg(i)?Ti(e,r.get(Number(i))):i==="push"?o=>X.pushInternal(e,r,o):i==="splice"?(o,a,...u)=>X.splice(e,r,o,a,...u):i==="length"?r.length:typeof i=="symbol"&&i===Symbol.iterator?X.iteratorInternal.bind(this,e,r):i==="includes"?(o,a)=>X.includes(e,r,o,a):i==="indexOf"?(o,a)=>X.indexOf(e,r,o,a):i==="lastIndexOf"?(o,a)=>X.lastIndexOf(e,r,o,a):i==="toJSForTest"?()=>r.toJSForTest():i==="toTestString"?()=>X.toTestString(r):typeof i=="string"&&Sk(i)?(...o)=>{const a=Array.from(r).map(u=>Ti(e,u));return Array.prototype[i].apply(a,o)}:Reflect.get(r,i,s),set:(r,i,s)=>{if(Pg(i)){const o=Number(i);return X.setValueInternal(e,r,o,s),!0}return Reflect.set(r,i,s)},deleteProperty:(r,i)=>(U.isEnabled(Ke.Trivial)&&U.trivial(`array[${i}]`),X.deleteInternalByIndex(e,r,Number.parseInt(i)),!0)}}static*iteratorInternal(e,t){for(const r of t)yield Lt(e,r)}static buildArrayElements(e,t){const r=[];for(const i of t){const s=e.issueTimeTicket(),o=ho(e,i,s);r.push(o)}return r}static pushInternal(e,t,r){return X.insertAfterInternal(e,t,t.getLastCreatedAt(),r),t.length}static moveBeforeInternal(e,t,r,i){const s=e.issueTimeTicket(),o=t.getPrevCreatedAt(r);t.moveAfter(o,i,s),e.push(Jt.create(t.getCreatedAt(),o,i,s))}static moveAfterInternal(e,t,r,i){const s=e.issueTimeTicket();e.push(Jt.create(t.getCreatedAt(),r,i,s)),t.moveAfter(r,i,s)}static moveAfterByIndexInternal(e,t,r,i){const s=t.get(r);if(!s)throw new T(k.ErrInvalidArgument,`index out of bounds: ${r}`);const o=t.get(i);if(!o)throw new T(k.ErrInvalidArgument,`index out of bounds: ${i}`);X.moveAfterInternal(e,t,s.getCreatedAt(),o.getCreatedAt())}static moveFrontInternal(e,t,r){const i=e.issueTimeTicket(),s=t.getHead();t.moveAfter(s.getCreatedAt(),r,i),e.push(Jt.create(t.getCreatedAt(),s.getCreatedAt(),r,i))}static moveLastInternal(e,t,r){const i=e.issueTimeTicket(),s=t.getLastCreatedAt();t.moveAfter(s,r,i),e.push(Jt.create(t.getCreatedAt(),s,r,i))}static insertAfterInternal(e,t,r,i){const s=e.issueTimeTicket(),o=ho(e,i,s);return t.insertAfter(r,o),e.registerElement(o,t),e.push(Fr.create(t.getCreatedAt(),r,o.deepcopy(),s)),o}static insertIntegerAfterInternal(e,t,r,i){const s=t.get(r);if(!s)throw new T(k.ErrInvalidArgument,`index out of bounds: ${r}`);return X.insertAfterInternal(e,t,s.getCreatedAt(),i),t}static insertBeforeInternal(e,t,r,i){return X.insertAfterInternal(e,t,t.getPrevCreatedAt(r),i)}static setValueInternal(e,t,r,i){const s=t.get(r);if(!s)throw new T(k.ErrInvalidArgument,`index out of bounds: ${r}`);return X.setByIndexInternal(e,t,s.getCreatedAt(),i),t}static setByIndexInternal(e,t,r,i){const s=e.issueTimeTicket(),o=ho(e,i,s),a=o.deepcopy();return e.push(hn.create(t.getCreatedAt(),r,a,s)),t.set(r,o,s),e.registerElement(o,t),o}static deleteInternalByIndex(e,t,r){const i=e.issueTimeTicket(),s=t.deleteByIndex(r,i);if(s)return e.push(mn.create(t.getCreatedAt(),s.getCreatedAt(),i)),e.registerRemovedElement(s),s}static deleteInternalByID(e,t,r){const i=e.issueTimeTicket(),s=t.delete(r,i);return e.push(mn.create(t.getCreatedAt(),s.getCreatedAt(),i)),e.registerRemovedElement(s),s}static splice(e,t,r,i,...s){const o=t.length,a=r>=0?Math.min(r,o):Math.max(o+r,0),u=i===void 0?o:i<0?a:Math.min(a+i,o),c=[];for(let d=a;d<u;d++){const h=X.deleteInternalByIndex(e,t,a);if(h){const g=h.deepcopy();g.setRemovedAt(),c.push(Ti(e,g))}}if(s){let d=a===0?t.getHead().getID():t.get(a-1).getID();for(const h of s)d=X.insertAfterInternal(e,t,d,h).getID()}return c}static includes(e,t,r,i){var a;const s=t.length,o=i===void 0?0:i<0?Math.max(i+s,0):i;if(o>=s)return!1;if(le.isSupport(r))return Array.from(t).map(c=>Ti(e,c)).includes(r,o);for(let u=o;u<s;u++)if(((a=t.get(u))==null?void 0:a.getID())===r.getID())return!0;return!1}static indexOf(e,t,r,i){var a;const s=t.length,o=i===void 0?0:i<0?Math.max(i+s,0):i;if(o>=s)return-1;if(le.isSupport(r))return Array.from(t).map(c=>Ti(e,c)).indexOf(r,o);for(let u=o;u<s;u++)if(((a=t.get(u))==null?void 0:a.getID())===r.getID())return u;return-1}static lastIndexOf(e,t,r,i){var a;const s=t.length,o=i===void 0||i>=s?s-1:i<0?i+s:i;if(o<0)return-1;if(le.isSupport(r))return Array.from(t).map(c=>Ti(e,c)).lastIndexOf(r,o);for(let u=o;u>0;u--)if(((a=t.get(u))==null?void 0:a.getID())===r.getID())return u;return-1}static toTestString(e){return e.toTestString()}getHandlers(){return this.handlers}}class Cd{constructor(e,t){l(this,"context");l(this,"text");this.context=e,this.text=t}initialize(e,t){this.context=e,this.text=t}getID(){return this.text.getID()}edit(e,t,r,i){if(!this.context||!this.text)throw new T(k.ErrNotInitialized,"Text is not initialized yet");if(e>t)throw new T(k.ErrInvalidArgument,"from should be less than or equal to to");const s=this.text.indexRangeToPosRange(e,t);U.isEnabled(Ke.Debug)&&U.debug(`EDIT: f:${e}->${s[0].toTestString()}, t:${t}->${s[1].toTestString()} c:${r}`);const o=i?Ns(i):void 0,a=this.context.issueTimeTicket(),[,u,c,d]=this.text.edit(s,r,a,o);this.context.acc(c);for(const h of u)this.context.registerGCPair(h);return this.context.push(new Ho(this.text.getCreatedAt(),s[0],s[1],r,o?new Map(Object.entries(o)):new Map,a)),this.text.findIndexesFromRange(d)}delete(e,t){return this.edit(e,t,"")}empty(){return this.edit(0,this.length,"")}setStyle(e,t,r){if(!this.context||!this.text)throw new T(k.ErrNotInitialized,"Text is not initialized yet");if(e>t)throw new T(k.ErrInvalidArgument,"from should be less than or equal to to");const i=this.text.indexRangeToPosRange(e,t);U.isEnabled(Ke.Debug)&&U.debug(`STYL: f:${e}->${i[0].toTestString()}, t:${t}->${i[1].toTestString()} a:${JSON.stringify(r)}`);const s=Ns(r),o=this.context.issueTimeTicket(),[a,u]=this.text.setStyle(i,s,o);this.context.acc(u);for(const c of a)this.context.registerGCPair(c);return this.context.push(new _o(this.text.getCreatedAt(),i[0],i[1],new Map(Object.entries(s)),o)),!0}indexRangeToPosRange(e){if(!this.context||!this.text)throw new T(k.ErrNotInitialized,"Text is not initialized yet");const t=this.text.indexRangeToPosRange(e[0],e[1]);return[t[0].toStruct(),t[1].toStruct()]}posRangeToIndexRange(e){if(!this.context||!this.text)throw new T(k.ErrNotInitialized,"Text is not initialized yet");const t=this.text.findIndexesFromRange([qt.fromStruct(e[0]),qt.fromStruct(e[1])]);return[t[0],t[1]]}toTestString(){if(!this.context||!this.text)throw new T(k.ErrNotInitialized,"Text is not initialized yet");return this.text.toTestString()}values(){if(!this.context||!this.text)throw new T(k.ErrNotInitialized,"Text is not initialized yet");return this.text.values()}get length(){return this.text.length}getTreeByIndex(){return this.text.getTreeByIndex()}getTreeByID(){return this.text.getTreeByID()}toString(){if(!this.context||!this.text)throw new T(k.ErrNotInitialized,"Text is not initialized yet");return this.text.toString()}toJSON(){if(!this.context||!this.text)throw new T(k.ErrNotInitialized,"Text is not initialized yet");return this.text.toJSON()}toJSForTest(){if(!this.context||!this.text)throw new T(k.ErrNotInitialized,"Text is not initialized yet");return this.text.toJSForTest()}createRangeForTest(e,t){if(!this.context||!this.text)throw new T(k.ErrNotInitialized,"Text is not initialized yet");return this.text.indexRangeToPosRange(e,t)}}class Nd{constructor(e,t){l(this,"valueType");l(this,"value");l(this,"context");l(this,"counter");this.valueType=e,this.value=t}initialize(e,t){this.valueType=t.getValueType(),this.context=e,this.counter=t,this.value=t.getValue()}getID(){return this.counter.getID()}getValue(){return this.value}getValueType(){return this.valueType}increase(e){if(!this.context||!this.counter)throw new T(k.ErrNotInitialized,"Counter is not initialized yet");const t=this.context.issueTimeTicket(),r=le.of(e,t);if(!r.isNumericType())throw new TypeError(`Unsupported type of value: ${typeof r.getValue()}`);return this.counter.increase(r),this.context.push(Rs.create(this.counter.getCreatedAt(),r,t)),this}toJSForTest(){if(!this.context||!this.counter)throw new T(k.ErrNotInitialized,"Counter is not initialized yet");return this.counter.toJSForTest()}}function Pd(n){if(n.isText)return{type:n.type,value:n.value};const e={type:n.type,children:n.children.map(t=>Pd(t))};return n.attrs&&(e.attributes=Or(n.attrs.toObject())),e}function kk(n,e){const t={type:n.isText?n.parent.type:n.type,children:n.isText?n.parent.getChildrenText().length===e?[]:[{type:fn,value:n.parent.getChildrenText().slice(e)}]:n.children.slice(e).map(r=>Pd(r))};return n.attrs?t.attributes=Or(n.attrs.toObject()):n.isText&&n.parent.attrs&&(t.attributes=Or(n.parent.attrs.toObject())),t}function Tk(n,e){const{node:t}=n,r=[...e].slice(0,-1),i=t.isText?t.parent.getChildrenText().length:t.children.length,s=[...r,i],o=[...r],a=[];o[o.length-1]+=1,e.every((c,d)=>c===s[d])||a.push({fromPath:[...e],toPath:s});const u=kk(t,e[e.length-1]);return u&&a.push({fromPath:o,toPath:o,content:u}),a}function Ik(n,e){const{node:t,offset:r}=n,i=t.children[r],s=t.children[r-1],{children:o}=i,a=[...e].slice(0,-1),u=[{fromPath:[...e],toPath:[...a,r+1]}];if(!i.children.length)return u;const c=[...a,r-1,s.hasTextChild()?s.getChildrenText().length:s.children.length],d=o.map(h=>Pd(h));return u.push({fromPath:c,toPath:c,content:d}),u}function Dd(n,e,t){const{type:r}=n,i=t.issueTimeTicket();if(r===fn){rv(n);const{value:s}=n,o=rt.create(De.of(i,0),r,s);e.append(o)}else{const{children:s=[]}=n,{attributes:o}=n;let a;if(typeof o=="object"&&!Oy(o)){const c=Ns(o);a=new $r;for(const[d,h]of Object.entries(c))a.set(d,h,i)}const u=rt.create(De.of(i,0),r,void 0,a);e.append(u);for(const c of s)Dd(c,u,t)}}function xk(n,e){const{type:t}=e,r=n.issueTimeTicket();let i;if(e.type===fn){const{value:s}=e;i=rt.create(De.of(r,0),t,s)}else if(e){const{children:s=[]}=e,{attributes:o}=e;let a;if(typeof o=="object"&&!Oy(o)){const u=Ns(o);a=new $r;for(const[c,d]of Object.entries(u))a.set(c,d,r)}i=rt.create(De.of(n.issueTimeTicket(),0),t,void 0,a);for(const u of s)Dd(u,i,n)}return i}function rv(n){if(!n.value.length)throw new T(k.ErrInvalidArgument,"text node cannot have empty value");return!0}function Dg(n){if(!n.length)return!0;if(n[0].type===fn)for(const t of n){const{type:r}=t;if(r!==fn)throw new T(k.ErrInvalidArgument,"element node and text node cannot be passed together");rv(t)}else for(const t of n){const{type:r}=t;if(r===fn)throw new T(k.ErrInvalidArgument,"element node and text node cannot be passed together")}return!0}class Rd{constructor(e){l(this,"initialRoot");l(this,"context");l(this,"tree");this.initialRoot=e}initialize(e,t){this.context=e,this.tree=t}getID(){return this.tree.getID()}buildRoot(e){if(!this.initialRoot)return rt.create(De.of(e.issueTimeTicket(),0),dS);const t=rt.create(De.of(e.issueTimeTicket(),0),this.initialRoot.type);for(const r of this.initialRoot.children)Dd(r,t,e);return t}getSize(){if(!this.context||!this.tree)throw new T(k.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getSize()}getNodeSize(){if(!this.context||!this.tree)throw new T(k.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getNodeSize()}getIndexTree(){if(!this.context||!this.tree)throw new T(k.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getIndexTree()}splitByPath(e){if(!this.context||!this.tree)throw new T(k.ErrNotInitialized,"Tree is not initialized yet");if(!e.length)throw new T(k.ErrInvalidArgument,"path should not be empty");const t=this.tree.pathToTreePos(e),r=Tk(t,e);for(const i of r){const{fromPath:s,toPath:o,content:a}=i,u=this.tree.pathToPos(s),c=this.tree.pathToPos(o);this.editInternal(u,c,a?[a]:[],0)}}mergeByPath(e){if(!this.context||!this.tree)throw new T(k.ErrNotInitialized,"Tree is not initialized yet");if(!e.length)throw new T(k.ErrInvalidArgument,"path should not be empty");const t=this.tree.pathToTreePos(e);if(t.node.isText)throw new T(k.ErrInvalidArgument,"text node cannot be merged");const r=Ik(t,e);for(const i of r){const{fromPath:s,toPath:o,content:a}=i,u=this.tree.pathToPos(s),c=this.tree.pathToPos(o);this.editInternal(u,c,a??[],0)}}styleByPath(e,t){if(!this.context||!this.tree)throw new T(k.ErrNotInitialized,"Tree is not initialized yet");if(!e.length)throw new T(k.ErrInvalidArgument,"path should not be empty");const[r,i]=this.tree.pathToPosRange(e),s=this.context.issueTimeTicket(),o=t?Ns(t):void 0,[a,,u]=this.tree.style([r,i],o,s);this.context.acc(u);for(const c of a)this.context.registerGCPair(c);this.context.push(Lr.create(this.tree.getCreatedAt(),r,i,o?new Map(Object.entries(o)):new Map,s))}style(e,t,r){if(!this.context||!this.tree)throw new T(k.ErrNotInitialized,"Tree is not initialized yet");if(e>t)throw new T(k.ErrInvalidArgument,"from should be less than or equal to to");const i=this.tree.findPos(e),s=this.tree.findPos(t),o=this.context.issueTimeTicket(),a=r?Ns(r):void 0,[u,,c]=this.tree.style([i,s],a,o);this.context.acc(c);for(const d of u)this.context.registerGCPair(d);this.context.push(Lr.create(this.tree.getCreatedAt(),i,s,a?new Map(Object.entries(a)):new Map,o))}removeStyle(e,t,r){if(!this.context||!this.tree)throw new T(k.ErrNotInitialized,"Tree is not initialized yet");if(e>t)throw new T(k.ErrInvalidArgument,"from should be less than or equal to to");const i=this.tree.findPos(e),s=this.tree.findPos(t),o=this.context.issueTimeTicket(),[a,,u]=this.tree.removeStyle([i,s],r,o);this.context.acc(u);for(const c of a)this.context.registerGCPair(c);this.context.push(Lr.createTreeRemoveStyleOperation(this.tree.getCreatedAt(),i,s,r,o))}editInternal(e,t,r,i=0){var c;if(r.length!==0&&r[0]&&(Dg(r),r[0].type!==fn))for(const d of r){const{children:h=[]}=d;Dg(h)}const s=this.context.getLastTimeTicket();let o=new Array;if(((c=r[0])==null?void 0:c.type)===fn){let d="";for(const h of r){const{value:g}=h;d+=g}o.push(rt.create(De.of(this.context.issueTimeTicket(),0),fn,d))}else o=r.map(d=>d&&xk(this.context,d)).filter(d=>d);const[,a,u]=this.tree.edit([e,t],o.length?o.map(d=>d==null?void 0:d.deepcopy()):void 0,i,s,()=>this.context.issueTimeTicket());this.context.acc(u);for(const d of a)this.context.registerGCPair(d);return this.context.push(Go.create(this.tree.getCreatedAt(),e,t,o.length?o:void 0,i,s)),!0}editByPath(e,t,r,i=0){if(!this.context||!this.tree)throw new T(k.ErrNotInitialized,"Tree is not initialized yet");if(e.length!==t.length)throw new T(k.ErrInvalidArgument,"path length should be equal");if(!e.length||!t.length)throw new T(k.ErrInvalidArgument,"path should not be empty");const s=this.tree.pathToPos(e),o=this.tree.pathToPos(t);return this.editInternal(s,o,r?[r]:[],i)}editBulkByPath(e,t,r,i=0){if(!this.context||!this.tree)throw new T(k.ErrNotInitialized,"Tree is not initialized yet");if(e.length!==t.length)throw new T(k.ErrInvalidArgument,"path length should be equal");if(!e.length||!t.length)throw new T(k.ErrInvalidArgument,"path should not be empty");const s=this.tree.pathToPos(e),o=this.tree.pathToPos(t);return this.editInternal(s,o,r,i)}edit(e,t,r,i=0){if(!this.context||!this.tree)throw new T(k.ErrNotInitialized,"Tree is not initialized yet");if(e>t)throw new T(k.ErrInvalidArgument,"from should be less than or equal to to");const s=this.tree.findPos(e),o=this.tree.findPos(t);return this.editInternal(s,o,r?[r]:[],i)}editBulk(e,t,r,i=0){if(!this.context||!this.tree)throw new T(k.ErrNotInitialized,"Tree is not initialized yet");if(e>t)throw new T(k.ErrInvalidArgument,"from should be less than or equal to to");const s=this.tree.findPos(e),o=this.tree.findPos(t);return this.editInternal(s,o,r,i)}toXML(){if(!this.context||!this.tree)throw new T(k.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toXML()}toJSON(){if(!this.context||!this.tree)throw new T(k.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toJSON()}toJSForTest(){if(!this.context||!this.tree)throw new T(k.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toJSForTest()}toJSInfoForTest(){if(!this.context||!this.tree)throw new T(k.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toJSInfoForTest()}getRootTreeNode(){if(!this.context||!this.tree)throw new T(k.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getRootTreeNode()}indexToPath(e){if(!this.context||!this.tree)throw new T(k.ErrNotInitialized,"Tree is not initialized yet");return this.tree.indexToPath(e)}pathToIndex(e){if(!this.context||!this.tree)throw new T(k.ErrNotInitialized,"Tree is not initialized yet");return this.tree.pathToIndex(e)}pathRangeToPosRange(e){if(!this.context||!this.tree)throw new T(k.ErrNotInitialized,"Tree is not initialized yet");const t=[this.tree.pathToIndex(e[0]),this.tree.pathToIndex(e[1])],r=this.tree.indexRangeToPosRange(t);return[r[0].toStruct(),r[1].toStruct()]}indexRangeToPosRange(e){if(!this.context||!this.tree)throw new T(k.ErrNotInitialized,"Tree is not initialized yet");return this.tree.indexRangeToPosStructRange(e)}posRangeToIndexRange(e){if(!this.context||!this.tree)throw new T(k.ErrNotInitialized,"Tree is not initialized yet");const t=[Ut.fromStruct(e[0]),Ut.fromStruct(e[1])];return this.tree.posRangeToIndexRange(t)}posRangeToPathRange(e){if(!this.context||!this.tree)throw new T(k.ErrNotInitialized,"Tree is not initialized yet");const t=[Ut.fromStruct(e[0]),Ut.fromStruct(e[1])];return this.tree.posRangeToPathRange(t)}}function Rg(n,e){return nv(n,e)}function Lt(n,e){if(e){if(e instanceof le)return e;if(e instanceof Be)return nv(n,e);if(e instanceof ze)return wk(n,e);if(e instanceof ot)return new Cd(n,e);if(e instanceof Qe){const t=new Nd(pn.Int,0);return t.initialize(n,e),t}else if(e instanceof at){const t=new Rd;return t.initialize(n,e),t}}else return;throw new TypeError(`Unsupported type of element: ${typeof e}`)}function Ti(n,e){const t=Lt(n,e);return t instanceof le?t.getValue():t}function ho(n,e,t){let r;if(le.isSupport(e))r=le.of(e,t);else if(Array.isArray(e))r=ze.create(t,X.buildArrayElements(n,e));else if(typeof e=="object")e instanceof Cd?(r=ot.create(Ds.create(),t),e.initialize(n,r)):e instanceof Nd?(r=Qe.create(e.getValueType(),e.getValue(),t),e.initialize(n,r)):e instanceof Rd?(r=at.create(e.buildRoot(n),t),e.initialize(n,r)):r=Be.create(t,Jo.buildObjectMembers(n,e));else throw new TypeError(`Unsupported type of value: ${typeof e}`);return r}class ju{constructor(e,t){l(this,"context");l(this,"presence");this.context=e,this.presence=t}set(e,t){for(const r of Object.keys(e))this.presence[r]=e[r];this.context.setPresenceChange({type:gn.Put,presence:Bt(this.presence)}),this.context.setReversePresence(e,t)}get(e){return this.presence[e]}clear(){this.presence={},this.context.setPresenceChange({type:gn.Clear})}}const Og=50;class Ak{constructor(){l(this,"undoStack",[]);l(this,"redoStack",[])}hasUndo(){return this.undoStack.length>0}hasRedo(){return this.redoStack.length>0}pushUndo(e){this.undoStack.length>=Og&&this.undoStack.shift(),this.undoStack.push(e)}popUndo(){return this.undoStack.pop()}pushRedo(e){this.redoStack.length>=Og&&this.redoStack.shift(),this.redoStack.push(e)}popRedo(){return this.redoStack.pop()}clearRedo(){this.redoStack=[]}getUndoStackForTest(){return this.undoStack}getRedoStackForTest(){return this.redoStack}reconcileCreatedAt(e,t){const r=i=>{for(const s of i)for(const o of s)(o instanceof hn||o instanceof mn||o instanceof Jt)&&o.getCreatedAt()===e&&o.setCreatedAt(t),(o instanceof Fr||o instanceof Jt)&&o.getPrevCreatedAt()===e&&o.setPrevCreatedAt(t)};r(this.undoStack),r(this.redoStack)}}const Ek="yorkie-devtools-panel",Ck="yorkie-devtools-sdk";function Nk(n){return[Ee.StatusChanged,Ee.Snapshot,Ee.LocalChange,Ee.RemoteChange,Ee.Initialized,Ee.Watched,Ee.Unwatched,Ee.PresenceChanged].includes(n.type)}function Pk(n){return n.every(Nk)}let Ki="disconnected";const Lg=new Map,Ja=new Map;typeof window<"u"&&(window.docEventsForReplayByDocKey=Ja);function ka(n,e){(e!=null&&e.force||Ki!=="disconnected")&&window.postMessage({source:Ck,...n},"*")}function Dk(n){if(!n.isEnableDevtools()||typeof window>"u"||Lg.has(n.getKey()))return;Ja.set(n.getKey(),[]);const e=n.subscribe("all",t=>{Pk(t)&&(Ja.get(n.getKey()).push(t),Ki==="synced"&&ka({msg:"doc::sync::partial",docKey:n.getKey(),event:t}))});Lg.set(n.getKey(),[e]),ka({msg:"refresh-devtools"},{force:!0}),window.addEventListener("message",t=>{var i;if(((i=t.data)==null?void 0:i.source)!==Ek)return;switch(t.data.msg){case"devtools::connect":if(Ki!=="disconnected")break;Ki="connected",ka({msg:"doc::available",docKey:n.getKey()}),U.info(`[YD] Devtools connected. Doc: ${n.getKey()}`);break;case"devtools::disconnect":Ki="disconnected",U.info(`[YD] Devtools disconnected. Doc: ${n.getKey()}`);break;case"devtools::subscribe":Ki="synced",ka({msg:"doc::sync::full",docKey:n.getKey(),events:Ja.get(n.getKey())}),U.info(`[YD] Devtools subscribed. Doc: ${n.getKey()}`);break}})}var Kr=(n=>(n.Detached="detached",n.Attached="attached",n.Removed="removed",n))(Kr||{}),Ee=(n=>(n.StatusChanged="status-changed",n.ConnectionChanged="connection-changed",n.SyncStatusChanged="sync-status-changed",n.Snapshot="snapshot",n.LocalChange="local-change",n.RemoteChange="remote-change",n.Initialized="initialized",n.Watched="watched",n.Unwatched="unwatched",n.PresenceChanged="presence-changed",n.Broadcast="broadcast",n.LocalBroadcast="local-broadcast",n.AuthError="auth-error",n))(Ee||{}),Fl=(n=>(n.Connected="connected",n.Disconnected="disconnected",n))(Fl||{}),gf=(n=>(n.Synced="synced",n.SyncFailed="sync-failed",n))(gf||{});class iv{constructor(e,t){l(this,"key");l(this,"status");l(this,"opts");l(this,"changeID");l(this,"checkpoint");l(this,"localChanges");l(this,"maxSizeLimit");l(this,"schemaRules");l(this,"root");l(this,"clone");l(this,"eventStream");l(this,"eventStreamObserver");l(this,"onlineClients");l(this,"presences");l(this,"history");l(this,"internalHistory");l(this,"isUpdating");this.opts=t||{},this.key=e,this.status="detached",this.root=$o.create(),this.changeID=SS,this.checkpoint=kS,this.localChanges=[],this.maxSizeLimit=0,this.schemaRules=[],this.eventStream=vk(r=>{this.eventStreamObserver=r}),this.onlineClients=new Set,this.presences=new Map,this.isUpdating=!1,this.internalHistory=new Ak,this.history={canUndo:this.canUndo.bind(this),canRedo:this.canRedo.bind(this),undo:this.undo.bind(this),redo:this.redo.bind(this)},Dk(this)}update(e,t){var a,u,c;if(this.getStatus()==="removed")throw new T(k.ErrDocumentRemoved,`${this.key} is removed`);this.ensureClone();const r=this.changeID.getActorID(),i=ss.create(this.changeID,this.clone.root,this.clone.presences.get(r)||{},t);try{const d=Rg(i,this.clone.root.getObject());this.presences.has(r)||this.clone.presences.set(r,{}),this.isUpdating=!0,e(d,new ju(i,this.clone.presences.get(r)))}catch(d){throw this.clone=void 0,d}finally{this.isUpdating=!1}const s=this.getSchemaRules();if(!i.isPresenceOnlyChange()&&s.length>0){const d=dk((a=this.clone)==null?void 0:a.root.getObject(),s);if(!d.valid)throw this.clone=void 0,new T(k.ErrDocumentSchemaValidationFailed,`schema validation failed: ${(u=d.errors)==null?void 0:u.map(h=>h.message).join(", ")}`)}const o=cS((c=this.clone)==null?void 0:c.root.getDocSize());if(!i.isPresenceOnlyChange()&&this.maxSizeLimit>0&&this.maxSizeLimit<o)throw this.clone=void 0,new T(k.ErrDocumentSizeExceedsLimit,`document size exceeded: ${o} > ${this.maxSizeLimit}`);if(i.hasChange()){U.isEnabled(Ke.Trivial)&&U.trivial(`trying to update a local change: ${this.toJSON()}`);const d=i.toChange(),{opInfos:h,reverseOps:g}=d.execute(this.root,this.presences,ee.Local);for(const w of d.getOperations())w instanceof hn&&this.internalHistory.reconcileCreatedAt(w.getCreatedAt(),w.getValue().getCreatedAt());const p=i.getReversePresence();p&&g.push({type:"presence",value:p}),this.localChanges.push(d),g.length>0&&this.internalHistory.pushUndo(g),h.length>0&&this.internalHistory.clearRedo(),this.changeID=i.getNextID();const v=[];h.length>0&&v.push({type:"local-change",source:ee.Local,value:{message:d.getMessage()||"",operations:h,actor:r,clientSeq:d.getID().getClientSeq(),serverSeq:d.getID().getServerSeq()},rawChange:this.isEnableDevtools()?d.toStruct():void 0}),d.hasPresenceChange()&&v.push({type:"presence-changed",source:ee.Local,value:{clientID:r,presence:this.getPresence(r)}}),this.publish(v),U.isEnabled(Ke.Trivial)&&U.trivial(`after update a local change: ${this.toJSON()}`)}}subscribe(e,t,r,i){if(typeof e=="string"){if(typeof t!="function")throw new T(k.ErrInvalidArgument,"Second argument must be a callback function");if(e==="presence"){const a=t;return this.eventStream.subscribe(u=>{for(const c of u)c.type!=="initialized"&&c.type!=="watched"&&c.type!=="unwatched"&&c.type!=="presence-changed"||a(c)},r,i)}if(e==="my-presence"){const a=t;return this.eventStream.subscribe(u=>{for(const c of u)c.type!=="initialized"&&c.type!=="presence-changed"||c.type==="presence-changed"&&c.value.clientID!==this.changeID.getActorID()||a(c)},r,i)}if(e==="others"){const a=t;return this.eventStream.subscribe(u=>{for(const c of u)c.type!=="watched"&&c.type!=="unwatched"&&c.type!=="presence-changed"||c.value.clientID!==this.changeID.getActorID()&&a(c)},r,i)}if(e==="connection"){const a=t;return this.eventStream.subscribe(u=>{for(const c of u)c.type==="connection-changed"&&a(c)},r,i)}if(e==="status"){const a=t;return this.eventStream.subscribe(u=>{for(const c of u)c.type==="status-changed"&&a(c)},r,i)}if(e==="sync"){const a=t;return this.eventStream.subscribe(u=>{for(const c of u)c.type==="sync-status-changed"&&a(c)},r,i)}if(e==="local-broadcast"){const a=t;return this.eventStream.subscribe(u=>{for(const c of u)c.type==="local-broadcast"&&a(c)},r)}if(e==="broadcast"){const a=t;return this.eventStream.subscribe(u=>{for(const c of u)c.type==="broadcast"&&a(c)},r)}if(e==="auth-error"){const a=t;return this.eventStream.subscribe(u=>{for(const c of u)c.type==="auth-error"&&a(c)},r)}if(e==="all"){const a=t;return this.eventStream.subscribe(a,r,i)}const s=e,o=t;return this.eventStream.subscribe(a=>{for(const u of a){if(u.type!=="local-change"&&u.type!=="remote-change")continue;const c=[];for(const d of u.value.operations)this.isSameElementOrChildOf(d.path,s)&&c.push(d);c.length&&o({...u,value:{...u.value,operations:c}})}},r,i)}if(typeof e=="function"){const s=e,o=t,a=r;return this.eventStream.subscribe(u=>{for(const c of u)c.type!=="snapshot"&&c.type!=="local-change"&&c.type!=="remote-change"||s(c)},o,a)}throw new T(k.ErrInvalidArgument,`"${e}" is not a valid`)}publish(e){this.eventStreamObserver&&this.eventStreamObserver.next(e)}isSameElementOrChildOf(e,t){if(t===e)return!0;const r=e.split(".");return t.split(".").every((s,o)=>s===r[o])}removePushedLocalChanges(e){for(;this.localChanges.length&&!(this.localChanges[0].getID().getClientSeq()>e);)this.localChanges.shift()}applyChangePack(e){const t=e.hasSnapshot();t?this.applySnapshot(e.getCheckpoint().getServerSeq(),e.getVersionVector(),e.getSnapshot(),e.getCheckpoint().getClientSeq()):(this.applyChanges(e.getChanges(),ee.Remote),this.removePushedLocalChanges(e.getCheckpoint().getClientSeq())),this.checkpoint=this.checkpoint.forward(e.getCheckpoint()),t||this.garbageCollect(e.getVersionVector()),e.getIsRemoved()&&this.applyStatus("removed"),U.isEnabled(Ke.Trivial)&&U.trivial(`${this.root.toJSON()}`)}getCheckpoint(){return this.checkpoint}getChangeID(){return this.changeID}hasLocalChanges(){return this.localChanges.length>0}ensureClone(){this.clone||(this.clone={root:this.root.deepcopy(),presences:Bt(this.presences)})}createChangePack(){const e=Array.from(this.localChanges),t=this.checkpoint.increaseClientSeq(e.length);return ou.create(this.key,t,!1,e,this.getVersionVector())}setActor(e){for(const t of this.localChanges)t.setActor(e);this.changeID=this.changeID.setActor(e)}isEnableDevtools(){return!!this.opts.enableDevtools}getKey(){return this.key}getStatus(){return this.status}getClone(){return this.clone}getCloneRoot(){if(this.clone)return this.clone.root.getObject()}getRoot(){this.ensureClone();const e=ss.create(this.changeID.next(),this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});return Rg(e,this.clone.root.getObject())}getDocSize(){return this.root.getDocSize()}getMaxSizePerDocument(){return this.maxSizeLimit}setMaxSizePerDocument(e){this.maxSizeLimit=e}getSchemaRules(){return this.schemaRules}setSchemaRules(e){this.schemaRules=e}garbageCollect(e){return this.opts.disableGC?0:(this.clone&&this.clone.root.garbageCollect(e),this.root.garbageCollect(e))}getRootObject(){return this.root.getObject()}getGarbageLen(){return this.root.getGarbageLen()}getGarbageLenFromClone(){return this.clone.root.getGarbageLen()}toJSON(){return this.root.toJSON()}toSortedJSON(){return this.root.toSortedJSON()}getStats(){return this.root.getStats()}toJSForTest(){return{...this.getRoot().toJSForTest(),key:"root"}}applySnapshot(e,t,r,i=-1){const{root:s,presences:o}=de.bytesToSnapshot(r);this.root=new $o(s),this.presences=o,this.changeID=this.changeID.setClocks(t.maxLamport(),t),this.clone=void 0,this.removePushedLocalChanges(i),this.applyChanges(this.localChanges,ee.Local),this.publish([{type:"snapshot",source:ee.Remote,value:{serverSeq:e.toString(),snapshot:this.isEnableDevtools()?de.bytesToHex(r):void 0,snapshotVector:de.versionVectorToHex(t)}}])}applyChanges(e,t){U.isEnabled(Ke.Debug)&&U.debug(`trying to apply ${e.length} remote changes.elements:${this.root.getElementMapSize()}, removeds:${this.root.getGarbageElementSetSize()}`),U.isEnabled(Ke.Trivial)&&U.trivial(e.map(r=>`${r.getID().toTestString()}	${r.toTestString()}`).join(`
`));for(const r of e)this.applyChange(r,t);U.isEnabled(Ke.Debug)&&U.debug(`after appling ${e.length} remote changes.elements:${this.root.getElementMapSize()},  removeds:${this.root.getGarbageElementSetSize()}`)}applyChange(e,t){this.ensureClone(),e.execute(this.clone.root,this.clone.presences,t);const r=[],i=e.getID().getActorID();if(e.hasPresenceChange()&&this.onlineClients.has(i)){const o=e.getPresenceChange();switch(o.type){case gn.Put:r.push(this.presences.has(i)?{type:"presence-changed",source:t,value:{clientID:i,presence:o.presence}}:{type:"watched",source:ee.Remote,value:{clientID:i,presence:o.presence}});break;case gn.Clear:r.push({type:"unwatched",source:ee.Remote,value:{clientID:i,presence:this.getPresence(i)}}),this.removeOnlineClient(i);break}}const{opInfos:s}=e.execute(this.root,this.presences,t);if(this.changeID=this.changeID.syncClocks(e.getID()),s.length>0){const o=this.isEnableDevtools()?e.toStruct():void 0;r.push(t===ee.Remote?{type:"remote-change",source:t,value:{actor:i,clientSeq:e.getID().getClientSeq(),serverSeq:e.getID().getServerSeq(),message:e.getMessage()||"",operations:s},rawChange:o}:{type:"local-change",source:t,value:{actor:i,clientSeq:e.getID().getClientSeq(),serverSeq:e.getID().getServerSeq(),message:e.getMessage()||"",operations:s},rawChange:o})}r.length>0&&this.publish(r)}applyWatchStream(e){if(e.body.case==="initialization"){const t=e.body.value.clientIds,r=new Set;for(const i of t)i!==this.changeID.getActorID()&&r.add(i);this.setOnlineClients(r),this.publish([{type:"initialized",source:ee.Local,value:this.getPresences()}]);return}if(e.body.case==="event"){const{type:t,publisher:r}=e.body.value,i=[];if(t===Pi.DOCUMENT_WATCHED){if(this.onlineClients.has(r)&&this.hasPresence(r))return;this.addOnlineClient(r),this.hasPresence(r)&&i.push({type:"watched",source:ee.Remote,value:{clientID:r,presence:this.getPresence(r)}})}else if(t===Pi.DOCUMENT_UNWATCHED){const s=this.getPresence(r);this.removeOnlineClient(r),s&&i.push({type:"unwatched",source:ee.Remote,value:{clientID:r,presence:s}})}else if(t===Pi.DOCUMENT_BROADCAST&&e.body.value.body){const{topic:s,payload:o}=e.body.value.body,a=new TextDecoder;i.push({type:"broadcast",value:{clientID:r,topic:s,payload:JSON.parse(a.decode(o))}})}i.length>0&&this.publish(i)}}applyStatus(e){this.status=e,e==="detached"&&this.setActor(gd),this.publish([{source:e==="removed"?ee.Remote:ee.Local,type:"status-changed",value:e==="attached"?{status:e,actorID:this.changeID.getActorID()}:{status:e}}])}applyDocEventForReplay(e){if(e.type==="status-changed"){this.applyStatus(e.value.status),e.value.status==="attached"&&this.setActor(e.value.actorID);return}if(e.type==="snapshot"){const{snapshot:t,serverSeq:r,snapshotVector:i}=e.value;if(!t)return;this.applySnapshot(BigInt(r),de.hexToVersionVector(i),de.hexToBytes(t));return}if(e.type==="local-change"||e.type==="remote-change"){if(!e.rawChange)return;const t=Ps.fromStruct(e.rawChange);this.applyChange(t,e.source)}if(e.type==="initialized"){const t=new Set;for(const{clientID:r,presence:i}of e.value)t.add(r),this.presences.set(r,i);this.setOnlineClients(t);return}if(e.type==="watched"){const{clientID:t,presence:r}=e.value;this.addOnlineClient(t),this.presences.set(t,r);return}if(e.type==="unwatched"){const{clientID:t}=e.value;this.removeOnlineClient(t),this.presences.delete(t)}if(e.type==="presence-changed"){const{clientID:t,presence:r}=e.value;this.presences.set(t,r)}}applyDocEventsForReplay(e){for(const t of e)this.applyDocEventForReplay(t)}getValueByPath(e){if(!e.startsWith("$"))throw new T(k.ErrInvalidArgument,'path must start with "$"');const t=e.split(".");t.shift();let r=this.getRoot();for(const i of t)if(r=r[i],r===void 0)return;return r}setOnlineClients(e){this.onlineClients=e}resetOnlineClients(){this.onlineClients=new Set}addOnlineClient(e){this.onlineClients.add(e)}removeOnlineClient(e){this.onlineClients.delete(e)}hasPresence(e){return this.presences.has(e)}getMyPresence(){if(this.status!=="attached")return{};const e=this.presences.get(this.changeID.getActorID());return e?Bt(e):{}}getPresence(e){if(e===this.changeID.getActorID())return this.getMyPresence();if(!this.onlineClients.has(e))return;const t=this.presences.get(e);return t?Bt(t):void 0}getPresenceForTest(e){const t=this.presences.get(e);return t?Bt(t):void 0}getPresences(){const e=[];e.push({clientID:this.changeID.getActorID(),presence:Bt(this.getMyPresence())});for(const t of this.onlineClients)this.presences.has(t)&&e.push({clientID:t,presence:Bt(this.presences.get(t))});return e}getSelfForTest(){return{clientID:this.getChangeID().getActorID(),presence:this.getMyPresence()}}getOthersForTest(){const e=this.getChangeID().getActorID();return this.getPresences().filter(t=>t.clientID!==e).sort((t,r)=>t.clientID>r.clientID?1:-1)}canUndo(){return this.internalHistory.hasUndo()&&!this.isUpdating}canRedo(){return this.internalHistory.hasRedo()&&!this.isUpdating}undo(){if(this.isUpdating)throw new T(k.ErrRefused,"Undo is not allowed during an update");const e=this.internalHistory.popUndo();if(e===void 0)throw new T(k.ErrRefused,"There is no operation to be undone");this.ensureClone();const t=ss.create(this.changeID,this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});for(const c of e){if(!(c instanceof Dt)){new ju(t,Bt(this.clone.presences.get(this.changeID.getActorID()))).set(c.value,{addToHistory:!0});continue}const d=t.issueTimeTicket();if(c.setExecutedAt(d),c instanceof hn){const h=c.getCreatedAt();c.getValue().setCreatedAt(d),this.internalHistory.reconcileCreatedAt(h,d)}else if(c instanceof Fr){const h=c.getValue().getCreatedAt();c.getValue().setCreatedAt(d),this.internalHistory.reconcileCreatedAt(h,d)}t.push(c)}const r=t.toChange();r.execute(this.clone.root,this.clone.presences,ee.UndoRedo);const{opInfos:i,reverseOps:s}=r.execute(this.root,this.presences,ee.UndoRedo),o=t.getReversePresence();if(o&&s.push({type:"presence",value:o}),s.length>0&&this.internalHistory.pushRedo(s),!r.hasPresenceChange()&&i.length===0)return;this.localChanges.push(r),this.changeID=t.getNextID();const a=this.changeID.getActorID(),u=[];i.length>0&&u.push({type:"local-change",source:ee.UndoRedo,value:{message:r.getMessage()||"",operations:i,actor:a,clientSeq:r.getID().getClientSeq(),serverSeq:r.getID().getServerSeq()},rawChange:this.isEnableDevtools()?r.toStruct():void 0}),r.hasPresenceChange()&&u.push({type:"presence-changed",source:ee.UndoRedo,value:{clientID:a,presence:this.getPresence(a)}}),this.publish(u)}redo(){if(this.isUpdating)throw new T(k.ErrRefused,"Redo is not allowed during an update");const e=this.internalHistory.popRedo();if(e===void 0)throw new T(k.ErrRefused,"There is no operation to be redone");this.ensureClone();const t=ss.create(this.changeID,this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});for(const c of e){if(!(c instanceof Dt)){new ju(t,Bt(this.clone.presences.get(this.changeID.getActorID()))).set(c.value,{addToHistory:!0});continue}const d=t.issueTimeTicket();if(c.setExecutedAt(d),c instanceof hn){const h=c.getCreatedAt();c.getValue().setCreatedAt(d),this.internalHistory.reconcileCreatedAt(h,d)}else if(c instanceof Fr){const h=c.getValue().getCreatedAt();c.getValue().setCreatedAt(d),this.internalHistory.reconcileCreatedAt(h,d)}t.push(c)}const r=t.toChange();r.execute(this.clone.root,this.clone.presences,ee.UndoRedo);const{opInfos:i,reverseOps:s}=r.execute(this.root,this.presences,ee.UndoRedo),o=t.getReversePresence();if(o&&s.push({type:"presence",value:o}),s.length>0&&this.internalHistory.pushUndo(s),!r.hasPresenceChange()&&i.length===0)return;this.localChanges.push(r),this.changeID=t.getNextID();const a=this.changeID.getActorID(),u=[];i.length>0&&u.push({type:"local-change",source:ee.UndoRedo,value:{message:r.getMessage()||"",operations:i,actor:a,clientSeq:r.getID().getClientSeq(),serverSeq:r.getID().getServerSeq()},rawChange:this.isEnableDevtools()?r.toStruct():void 0}),r.hasPresenceChange()&&u.push({type:"presence-changed",source:ee.UndoRedo,value:{clientID:a,presence:this.getPresence(a)}}),this.publish(u)}getUndoStackForTest(){return this.internalHistory.getUndoStackForTest()}getRedoStackForTest(){return this.internalHistory.getRedoStackForTest()}broadcast(e,t,r){const i={type:"local-broadcast",value:{topic:e,payload:t},options:r};this.publish([i])}getVersionVector(){return this.changeID.getVersionVector()}}function Rk(n,e){let t=e;return{authInterceptor:s=>async o=>(n&&o.header.set("x-api-key",n),t&&o.header.set("authorization",t),await s(o)),setToken:s=>{t=s}}}const Ok="@yorkie-js/sdk",Lk="0.6.27",bg={name:Ok,version:Lk};function bk(n){return e=>async t=>(n?t.header.set("x-yorkie-user-agent",n):t.header.set("x-yorkie-user-agent",bg.name+"/"+bg.version),await e(t))}const Bk=n=>{try{if(JSON.stringify(n)===void 0)return!1}catch{return!1}return!0};var Ua=(n=>(n.Manual="manual",n.Realtime="realtime",n.RealtimePushOnly="realtime-pushonly",n.RealtimeSyncOff="realtime-syncoff",n))(Ua||{});const Hs={rpcAddr:"https://api.yorkie.dev",syncLoopDuration:50,retrySyncLoopDelay:1e3,reconnectStreamDelay:1e3},Vu={maxRetries:1/0,initialRetryInterval:1e3,maxBackoff:2e4};class sv{constructor(e){l(this,"id");l(this,"key");l(this,"metadata");l(this,"status");l(this,"attachmentMap");l(this,"apiKey");l(this,"authTokenInjector");l(this,"conditions");l(this,"syncLoopDuration");l(this,"reconnectStreamDelay");l(this,"retrySyncLoopDelay");l(this,"rpcClient");l(this,"setAuthToken");l(this,"taskQueue");l(this,"processing",!1);l(this,"keepalive",!1);e=e||Hs;const t=e.rpcAddr||Hs.rpcAddr;this.key=e.key||tv(),this.metadata=e.metadata||{},this.status="deactivated",this.attachmentMap=new Map,this.apiKey=e.apiKey||"",this.authTokenInjector=e.authTokenInjector,this.conditions={SyncLoop:!1,WatchLoop:!1},this.syncLoopDuration=e.syncLoopDuration??Hs.syncLoopDuration,this.reconnectStreamDelay=e.reconnectStreamDelay??Hs.reconnectStreamDelay,this.retrySyncLoopDelay=e.retrySyncLoopDelay??Hs.retrySyncLoopDelay;const{authInterceptor:r,setToken:i}=Rk(this.apiKey);this.setAuthToken=i,this.rpcClient=L1(nS,tS({baseUrl:t,interceptors:[r,bk(e==null?void 0:e.userAgent)],fetch:(s,o)=>{const a={...o,keepalive:this.keepalive};return fetch(s,a)}})),this.taskQueue=[]}async activate(){if(this.isActive())return Promise.resolve();if(this.authTokenInjector){const e=await this.authTokenInjector();this.setAuthToken(e)}return this.enqueueTask(async()=>{try{const e=await this.rpcClient.activateClient({clientKey:this.key,metadata:this.metadata},{headers:{"x-shard-key":`${this.apiKey}/${this.key}`}});this.id=e.clientId,this.status="activated",this.runSyncLoop(),U.info(`[AC] c:"${this.getKey()}" activated, id:"${this.id}"`),typeof window<"u"&&window.addEventListener("beforeunload",async()=>{await this.deactivate({keepalive:!0})})}catch(e){throw U.error(`[AC] c:"${this.getKey()}" err :`,e),await this.handleConnectError(e),e}})}deactivate(e={keepalive:!1}){if(this.status==="deactivated")return Promise.resolve();const t=async()=>{try{await this.rpcClient.deactivateClient({clientId:this.id},{headers:{"x-shard-key":`${this.apiKey}/${this.key}`}}),this.deactivateInternal(),U.info(`[DC] c"${this.getKey()}" deactivated`)}catch(r){throw U.error(`[DC] c:"${this.getKey()}" err :`,r),await this.handleConnectError(r),r}};if(e.keepalive){this.keepalive=!0;const r=t();return this.keepalive=!1,r}return this.enqueueTask(t)}hasDocument(e){return this.attachmentMap.has(e)}attach(e,t={}){if(!this.isActive())throw new T(k.ErrClientNotActivated,`${this.key} is not active`);if(e.getStatus()!==Kr.Detached)throw new T(k.ErrDocumentNotDetached,`${e.getKey()} is not detached`);e.setActor(this.id),e.update((s,o)=>o.set(t.initialPresence||{}));const r=e.subscribe("local-broadcast",async s=>{var d;const{topic:o,payload:a}=s.value,u=(d=s.options)==null?void 0:d.error,c=s.options;try{await this.broadcast(e.getKey(),o,a,c)}catch(h){h instanceof Error&&(u==null||u(h))}}),i=t.syncMode??"realtime";return this.enqueueTask(async()=>{try{const s=await this.rpcClient.attachDocument({clientId:this.id,changePack:de.toChangePack(e.createChangePack()),schemaKey:t.schema},{headers:{"x-shard-key":`${this.apiKey}/${e.getKey()}`}});(s.maxSizePerDocument??0)>0&&e.setMaxSizePerDocument(s.maxSizePerDocument),s.schemaRules.length>0&&e.setSchemaRules(de.fromSchemaRules(s.schemaRules));const a=de.fromChangePack(s.changePack);if(e.applyChangePack(a),e.getStatus()===Kr.Removed)return e;e.applyStatus(Kr.Attached),this.attachmentMap.set(e.getKey(),new fk(this.reconnectStreamDelay,e,s.documentId,i,r)),i!=="manual"&&await this.runWatchLoop(e.getKey()),U.info(`[AD] c:"${this.getKey()}" attaches d:"${e.getKey()}"`);const u=e.getRootObject();if(t.initialRoot){const c=t.initialRoot;e.update(d=>{for(const[h,g]of Object.entries(c))if(!u.has(h)){const p=h;d[p]=g}})}return e}catch(s){throw U.error(`[AD] c:"${this.getKey()}" err :`,s),await this.handleConnectError(s),s}})}detach(e,t={keepalive:!1}){if(!this.isActive())throw new T(k.ErrClientNotActivated,`${this.key} is not active`);const r=this.attachmentMap.get(e.getKey());if(!r)throw new T(k.ErrDocumentNotAttached,`${e.getKey()} is not attached`);e.update((s,o)=>o.clear());const i=async()=>{try{const s=await this.rpcClient.detachDocument({clientId:this.id,documentId:r.docID,changePack:de.toChangePack(e.createChangePack()),removeIfNotAttached:t.removeIfNotAttached??!1},{headers:{"x-shard-key":`${this.apiKey}/${e.getKey()}`}}),o=de.fromChangePack(s.changePack);return e.applyChangePack(o),e.getStatus()!==Kr.Removed&&e.applyStatus(Kr.Detached),this.detachInternal(e.getKey()),U.info(`[DD] c:"${this.getKey()}" detaches d:"${e.getKey()}"`),e}catch(s){throw U.error(`[DD] c:"${this.getKey()}" err :`,s),await this.handleConnectError(s),s}};if(t.keepalive){this.keepalive=!0;const s=i();return this.keepalive=!1,s}return this.enqueueTask(i)}async changeSyncMode(e,t){if(!this.isActive())throw new T(k.ErrClientNotActivated,`${this.key} is not active`);const r=this.attachmentMap.get(e.getKey());if(!r)throw new T(k.ErrDocumentNotAttached,`${e.getKey()} is not attached`);const i=r.syncMode;return i===t?e:(r.changeSyncMode(t),t==="manual"?(r.cancelWatchStream(),e):(t==="realtime"&&(r.remoteChangeEventReceived=!0),i==="manual"&&await this.runWatchLoop(e.getKey()),e))}sync(e){if(!this.isActive())throw new T(k.ErrClientNotActivated,`${this.key} is not active`);if(e){const t=this.attachmentMap.get(e.getKey());if(!t)throw new T(k.ErrDocumentNotAttached,`${e.getKey()} is not attached`);return this.enqueueTask(async()=>this.syncInternal(t,"realtime").catch(async r=>{throw U.error(`[SY] c:"${this.getKey()}" err :`,r),await this.handleConnectError(r),r}))}return this.enqueueTask(async()=>{const t=[];for(const[,r]of this.attachmentMap)t.push(this.syncInternal(r,r.syncMode));return Promise.all(t).catch(async r=>{throw U.error(`[SY] c:"${this.getKey()}" err :`,r),await this.handleConnectError(r),r})})}remove(e){if(!this.isActive())throw new T(k.ErrClientNotActivated,`${this.key} is not active`);const t=this.attachmentMap.get(e.getKey());if(!t)throw new T(k.ErrDocumentNotAttached,`${e.getKey()} is not attached`);e.setActor(this.id);const r=de.toChangePack(e.createChangePack());return r.isRemoved=!0,this.enqueueTask(async()=>{try{const i=await this.rpcClient.removeDocument({clientId:this.id,documentId:t.docID,changePack:r},{headers:{"x-shard-key":`${this.apiKey}/${e.getKey()}`}}),s=de.fromChangePack(i.changePack);e.applyChangePack(s),this.detachInternal(e.getKey()),U.info(`[RD] c:"${this.getKey()}" removes d:"${e.getKey()}"`)}catch(i){throw U.error(`[RD] c:"${this.getKey()}" err :`,i),await this.handleConnectError(i),i}})}getID(){return this.id}getKey(){return this.key}isActive(){return this.status==="activated"}getStatus(){return this.status}getCondition(e){return this.conditions[e]}broadcast(e,t,r,i){if(!this.isActive())throw new T(k.ErrClientNotActivated,`${this.key} is not active`);const s=this.attachmentMap.get(e);if(!s)throw new T(k.ErrDocumentNotAttached,`${e} is not attached`);if(!Bk(r))throw new T(k.ErrInvalidArgument,"payload is not serializable");const o=(i==null?void 0:i.maxRetries)??Vu.maxRetries,a=Vu.maxBackoff;let u=0;const c=h=>Math.min(Vu.initialRetryInterval*2**h,a),d=async()=>this.enqueueTask(async()=>{try{await this.rpcClient.broadcast({clientId:this.id,documentId:s.docID,topic:t,payload:new TextEncoder().encode(JSON.stringify(r))},{headers:{"x-shard-key":`${this.apiKey}/${e}`}}),U.info(`[BC] c:"${this.getKey()}" broadcasts d:"${e}" t:"${t}"`)}catch(h){if(U.error(`[BC] c:"${this.getKey()}" err:`,h),await this.handleConnectError(h))if(h instanceof Q&&qr(h)===k.ErrUnauthenticated&&s.doc.publish([{type:Ee.AuthError,value:{reason:Qs(h).reason,method:"Broadcast"}}]),u<o)u++,setTimeout(()=>d(),c(u-1)),U.info(`[BC] c:"${this.getKey()}" retry attempt ${u}/${o}`);else throw U.error(`[BC] c:"${this.getKey()}" exceeded maximum retry attempts`),h;else throw h}});return d()}runSyncLoop(){const e=async()=>{if(!this.isActive()){U.debug(`[SL] c:"${this.getKey()}" exit sync loop`),this.conditions.SyncLoop=!1;return}try{await this.enqueueTask(async()=>{const t=[];for(const[,r]of this.attachmentMap)r.needRealtimeSync()&&(r.remoteChangeEventReceived=!1,t.push(this.syncInternal(r,r.syncMode).catch(async i=>{throw i instanceof Q&&qr(i)===k.ErrUnauthenticated&&r.doc.publish([{type:Ee.AuthError,value:{reason:Qs(i).reason,method:"PushPull"}}]),i})));await Promise.all(t),setTimeout(e,this.syncLoopDuration)})}catch(t){U.error(`[SL] c:"${this.getKey()}" sync failed:`,t),await this.handleConnectError(t)?setTimeout(e,this.retrySyncLoopDelay):this.conditions.SyncLoop=!1}};U.debug(`[SL] c:"${this.getKey()}" run sync loop`),this.conditions.SyncLoop=!0,e()}async runWatchLoop(e){const t=this.attachmentMap.get(e);if(!t)throw new T(k.ErrDocumentNotAttached,`${e} is not attached`);return this.conditions.WatchLoop=!0,t.runWatchLoop(r=>{if(!this.isActive())return this.conditions.WatchLoop=!1,Promise.reject(new T(k.ErrClientNotActivated,`${this.key} is not active`));if(!this.attachmentMap.has(e))return this.conditions.WatchLoop=!1,Promise.reject(new T(k.ErrDocumentNotAttached,`${e} is not attached`));const i=new AbortController,s=this.rpcClient.watchDocument({clientId:this.id,documentId:t.docID},{headers:{"x-shard-key":`${this.apiKey}/${e}`},signal:i.signal});return t.doc.publish([{type:Ee.ConnectionChanged,value:Fl.Connected}]),U.info(`[WD] c:"${this.getKey()}" watches d:"${e}"`),t.remoteChangeEventReceived=!0,new Promise((o,a)=>{(async()=>{try{for await(const c of s)this.handleWatchDocumentsResponse(t,c),c.body.case==="initialization"&&o([s,i])}catch(c){t.doc.resetOnlineClients(),t.doc.publish([{type:Ee.Initialized,source:ee.Local,value:t.doc.getPresences()}]),t.doc.publish([{type:Ee.ConnectionChanged,value:Fl.Disconnected}]),U.debug(`[WD] c:"${this.getKey()}" unwatches`),await this.handleConnectError(c)?(c instanceof Q&&qr(c)===k.ErrUnauthenticated&&t.doc.publish([{type:Ee.AuthError,value:{reason:Qs(c).reason,method:"WatchDocuments"}}]),r()):this.conditions.WatchLoop=!1,a(c)}})()})})}handleWatchDocumentsResponse(e,t){if(t.body.case==="event"&&t.body.value.type===Pi.DOCUMENT_CHANGED){e.remoteChangeEventReceived=!0;return}e.doc.applyWatchStream(t)}deactivateInternal(){this.status="deactivated";for(const[e,t]of this.attachmentMap)this.detachInternal(e),t.doc.applyStatus(Kr.Detached)}detachInternal(e){const t=this.attachmentMap.get(e);t&&(t.cancelWatchStream(),t.doc.resetOnlineClients(),t.unsubscribeBroadcastEvent(),this.attachmentMap.delete(e))}async syncInternal(e,t){const{doc:r,docID:i}=e,s=r.createChangePack();try{const o=await this.rpcClient.pushPullChanges({clientId:this.id,documentId:i,changePack:de.toChangePack(s),pushOnly:t==="realtime-pushonly"},{headers:{"x-shard-key":`${this.apiKey}/${r.getKey()}`}}),a=de.fromChangePack(o.changePack);if(a.hasChanges()&&(e.syncMode==="realtime-pushonly"||e.syncMode==="realtime-syncoff"))return r;r.applyChangePack(a),e.doc.publish([{type:Ee.SyncStatusChanged,value:gf.Synced}]),r.getStatus()===Kr.Removed&&this.detachInternal(r.getKey());const u=r.getKey(),c=a.getChangeSize();return U.info(`[PP] c:"${this.getKey()}" sync d:"${u}", push:${s.getChangeSize()} pull:${c} cp:${a.getCheckpoint().toTestString()}`),r}catch(o){throw r.publish([{type:Ee.SyncStatusChanged,value:gf.SyncFailed}]),U.error(`[PP] c:"${this.getKey()}" err :`,o),o}}async handleConnectError(e){if(!(e instanceof Q))return!1;if(e.code===W.Canceled||e.code===W.Unknown||e.code===W.ResourceExhausted||e.code===W.Unavailable)return!0;if(qr(e)===k.ErrUnauthenticated){if(this.authTokenInjector){const t=await this.authTokenInjector(Qs(e).reason);this.setAuthToken(t)}return!0}return qr(e)===k.ErrTooManySubscribers?(U.error(`[WD] c:"${this.getKey()}" err :`,e.rawMessage),!0):(qr(e)===k.ErrTooManyAttachments||(qr(e)===k.ErrClientNotActivated||qr(e)===k.ErrClientNotFound)&&this.deactivateInternal(),!1)}enqueueTask(e){return new Promise((t,r)=>{this.taskQueue.push(()=>e().then(t).catch(r)),this.processing||this.processNext()})}async processNext(){if(this.taskQueue.length===0){this.processing=!1;return}try{this.processing=!0,await this.taskQueue.shift()()}catch{U.error(`[TQ] c:"${this.getKey()}" process failed, id:"${this.id}"`)}this.processNext()}}pn.Int,pn.Long;typeof globalThis<"u"&&(globalThis.yorkie={Client:sv,Document:iv,Primitive:le,Text:Cd,Counter:Nd,Tree:Rd,LogLevel:Ke,setLogLevel:ck,IntType:pn.Int,LongType:pn.Long});const zk="@yorkie-js/react",Mk="0.6.27",Bg={name:zk,version:Mk},ov=j.createContext({client:void 0,loading:!0,error:void 0});function Fk(n){const[e,t]=j.useState(void 0),[r,i]=j.useState(!0),[s,o]=j.useState(void 0),[a,u]=j.useState(!1);return j.useEffect(()=>{u(!0)},[]),j.useEffect(()=>{i(!0),o(void 0);async function c(){if(a)try{const d=new sv(n);await d.activate(),t(d)}catch(d){o(d instanceof Error?d:new Error("Failed to activate client"))}finally{i(!1)}}return c(),()=>{e!=null&&e.isActive()&&e.deactivate({keepalive:!0})}},[n.apiKey,n.rpcAddr,a]),{client:e,loading:r,error:s}}const $k=({children:n,...e})=>{const t=j.useMemo(()=>({userAgent:Bg.name+"/"+Bg.version,...e}),[e.apiKey,e.rpcAddr]),{client:r,loading:i,error:s}=Fk(t);return B.jsx(ov.Provider,{value:{client:r,loading:i,error:s},children:n})},Jk=()=>{const n=j.useContext(ov);if(!n)throw new Error("useYorkie must be used under YorkieProvider");return{client:n.client,loading:n.loading,error:n.error}};function Uk(n){const e=new Set;let t=n;const r=()=>{e.forEach(u=>u(t))};return{subscribe:u=>(e.add(u),()=>e.delete(u)),getSnapshot:()=>t,setState:u=>{const c=t;t=typeof u=="function"?u(c):u,c!==t&&r()},destroy:()=>{e.clear()}}}const jk=n=>Uk(n);function Vk(n,e,t=Object.is){const r=j.useRef(e),i=j.useRef(t),s=j.useRef(void 0);r.current=e,i.current=t;const o=()=>{const a=n.getSnapshot(),u=r.current?r.current(a):a;return s.current!==void 0&&i.current(s.current,u)?s.current:(s.current=u,u)};return j.useSyncExternalStore(n.subscribe,o,o)}function qk(n,e,t,r,i,s,o){const a=j.useRef(i),u=j.useRef(s),[c,d]=j.useState(!1);j.useEffect(()=>{d(!0)},[]),j.useEffect(()=>{if(t){o.setState(v=>({...v,loading:!1,error:t}));return}if(!n||e||!c){o.setState(v=>({...v,loading:!0}));return}o.setState(v=>({...v,loading:!0,error:void 0}));const h=new iv(r),g=[];g.push(h.subscribe(()=>{o.setState(v=>({...v,root:h.getRoot()}))})),g.push(h.subscribe("presence",()=>{o.setState(v=>({...v,presences:h.getPresences()}))})),g.push(h.subscribe("connection",v=>{o.setState(w=>({...w,connection:v.value}))}));async function p(){try{await(n==null?void 0:n.attach(h,{initialRoot:a.current,initialPresence:u.current}));const v=w=>{try{h.update(w)}catch(A){o.setState(y=>({...y,error:A instanceof Error?A:new Error("Failed to update document")}))}};o.setState(w=>({...w,doc:h,root:h.getRoot(),presences:h.getPresences(),update:v}))}catch(v){o.setState(w=>({...w,error:v instanceof Error?v:new Error("Failed to attach document")}))}finally{o.setState(v=>({...v,loading:!1}))}}return p(),()=>{n&&n.hasDocument(r)&&n.detach(h);for(const v of g)v()}},[n,e,t,r,o,c])}const av=j.createContext(void 0),Kk=({docKey:n,initialRoot:e={},initialPresence:t={},children:r})=>{const{client:i,loading:s,error:o}=Jk(),a=j.useRef(void 0);a.current||(a.current=jk({doc:void 0,root:e,presences:[],connection:Fl.Disconnected,update:()=>{},loading:!0,error:void 0}));const u=a.current;return qk(i,s,o,n,e,t,u),B.jsx(av.Provider,{value:u,children:r})};function Wk(){const n=j.useContext(av);if(!n)throw new Error("useDocument must be used within a DocumentProvider");return Vk(n)}class zg{constructor(e,t){this.x=e,this.y=t,this.lifetime=0}}function mf(n,e){if(n.length<3)return n;let t=0,r=0;const[i,s]=[n[0],n[n.length-1]],o=s.x-i.x,a=s.y-i.y,u=Math.hypot(o,a)||1;for(let c=1;c<n.length-1;c++){const d=n[c],h=Math.abs(a*d.x-o*d.y+s.x*i.y-s.y*i.x)/u;h>t&&(t=h,r=c)}if(t>e){const c=mf(n.slice(0,r+1),e),d=mf(n.slice(r),e);return c.slice(0,-1).concat(d)}return[i,s]}function Hk(n,e){const[t,r,i,s]=n,o=e*e,a=o*e;return{x:.5*(2*r.x+(-t.x+i.x)*e+(2*t.x-5*r.x+4*i.x-s.x)*o+(-t.x+3*r.x-3*i.x+s.x)*a),y:.5*(2*r.y+(-t.y+i.y)*e+(2*t.y-5*r.y+4*i.y-s.y)*o+(-t.y+3*r.y-3*i.y+s.y)*a)}}function _k(n,e,t,r,i,s){const o=i-t,a=s-r,u=n-t,c=e-r,d=o*o+a*a||1;let h=(u*o+c*a)/d;h<0?h=0:h>1&&(h=1);const g=t+h*o,p=r+h*a;return Math.hypot(n-g,e-p)}const Mg=6;function Gk({xPos:n,yPos:e,tool:t="pen",color:r="black",maxTrail:i=128,rdpEpsilon:s=0,splineStep:o=.019,pointerDown:a=!1,visible:u=!0,resetNonce:c=0}){const d=j.useRef(null),h=j.useRef([]),g=j.useRef(!1),p=j.useRef({x:null,y:null});return j.useEffect(()=>{var w;const v=(w=d.current)==null?void 0:w.getContext("2d");v&&(h.current=[],v.clearRect(0,0,v.canvas.width,v.canvas.height),g.current=!1,p.current={x:null,y:null})},[c]),j.useEffect(()=>{if(!a){g.current=!1,p.current={x:null,y:null};return}if(t==="eraser"){h.current=h.current.filter(m=>{const S=m.points;if(S.length<2)return!0;const I=Math.max(m.width,Mg)*.75;for(let N=1;N<S.length;N++){const x=S[N-1],C=S[N],R=Math.min(x.x,C.x)-I,z=Math.max(x.x,C.x)+I,$=Math.min(x.y,C.y)-I,ve=Math.max(x.y,C.y)+I;if(!(n<R||n>z||e<$||e>ve)&&_k(n,e,x.x,x.y,C.x,C.y)<=I)return!1}return!0});return}if(!g.current){const m=new zg(n,e);t==="fading"&&(m.age=0),h.current.push({tool:t,color:r,width:Mg,points:[m]}),g.current=!0,p.current={x:n,y:e};return}const v=p.current,w=n-v.x,A=e-v.y,y=Math.hypot(w,A);if(y>0){const m=Math.ceil(y/15),S=h.current.at(-1);for(let I=1;I<=m;I++){const N=I/m,x=v.x+w*N,C=v.y+A*N,R=new zg(x,C);S.tool==="eraser"&&(R.erase=!0),S.tool==="fading"&&(R.age=0),S.points.push(R)}p.current={x:n,y:e}}},[n,e,t,a]),j.useEffect(()=>{const v=d.current,w=v.getContext("2d"),A=window.devicePixelRatio||1;v.width=window.innerWidth*A,v.height=window.innerHeight*A,v.style.width=`${window.innerWidth}px`,v.style.height=`${window.innerHeight}px`,w.setTransform(A,0,0,A,0,0)},[]),j.useEffect(()=>{var S;if(!u){const I=(S=d.current)==null?void 0:S.getContext("2d");I&&I.clearRect(0,0,I.canvas.width,I.canvas.height);return}const v=d.current,w=v.getContext("2d");let A,y=!0;function m(){y&&(w.clearRect(0,0,v.width,v.height),h.current.forEach(I=>{let N=I.points;if(I.tool==="fading"&&(N=I.points=N.map(C=>(C.age++,C)).filter(C=>C.age<i)),N.length<2)return;const x=mf(N,s);if(w.save(),w.lineWidth=I.width,w.lineCap="round",w.lineJoin="round",I.tool==="eraser"?(w.globalCompositeOperation="destination-out",w.strokeStyle="rgba(0,0,0,1)",w.globalAlpha=1):(w.globalCompositeOperation="source-over",w.strokeStyle=I.color,w.globalAlpha=I.tool==="highlighter"?.3:1),x.length>=4){w.beginPath(),w.moveTo(x[0].x,x[0].y);for(let C=0;C<=x.length-4;C++)for(let R=0;R<=1;R+=o){const z=Hk([x[C],x[C+1],x[C+2],x[C+3]],R);w.lineTo(z.x,z.y)}w.lineTo(x.at(-1).x,x.at(-1).y),w.stroke(),w.closePath()}else w.beginPath(),w.moveTo(x[0].x,x[0].y),x.slice(1).forEach(C=>w.lineTo(C.x,C.y)),w.stroke(),w.closePath();if(w.restore(),I.tool==="pencil"){w.save(),w.strokeStyle=I.color,w.lineWidth=Math.max(1,I.width*.5),w.globalAlpha=.6;const C=.3;for(let R=1;R<x.length;R++){if(Math.random()>C)continue;const z=x[R],$=x[R-1],ve=z.x-$.x,Wt=z.y-$.y,ct=Math.atan2(Wt,ve)+(Math.random()-.5)*.8,pi=I.width*(.8+Math.random()*.4),uu=z.x+Math.cos(ct)*pi/2,Bs=z.y+Math.sin(ct)*pi/2,zs=z.x-Math.cos(ct)*pi/2,L=z.y-Math.sin(ct)*pi/2;w.beginPath(),w.moveTo(uu,Bs),w.lineTo(zs,L),w.stroke(),w.closePath()}w.restore()}}),A=requestAnimationFrame(m))}return m(),()=>{y=!1,A&&cancelAnimationFrame(A)}},[i,s,o,u]),B.jsx("canvas",{ref:d,style:{position:"fixed",left:0,top:0,pointerEvents:"none",zIndex:1e4,display:u?"block":"none"}})}const Yk="_goUp0_1lnal_1",Xk="_goUpAnimation0_1lnal_1",Qk="_fadeOut_1lnal_1",Zk="_goUp1_1lnal_16",eT="_goUpAnimation1_1lnal_1",tT="_goUp2_1lnal_31",nT="_goUpAnimation2_1lnal_1",rT="_leftRight0_1lnal_46",iT="_leftRightAnimation0_1lnal_1",sT="_leftRight1_1lnal_60",oT="_leftRightAnimation1_1lnal_1",aT="_leftRight2_1lnal_74",lT="_leftRightAnimation2_1lnal_1",qu={goUp0:Yk,goUpAnimation0:Xk,fadeOut:Qk,goUp1:Zk,goUpAnimation1:eT,goUp2:tT,goUpAnimation2:nT,leftRight0:rT,leftRightAnimation0:iT,leftRight1:sT,leftRightAnimation1:oT,leftRight2:aT,leftRightAnimation2:lT};function uT({x:n,y:e,timestamp:t,selectedCursorShape:r}){return B.jsx("div",{className:"single-animation-container",children:B.jsx("div",{className:`absolute select-none pointer-events-none ${qu.disappear} text-${t%5+2}xl ${qu["goUp"+t%3]}`,style:{left:n,top:e},children:B.jsx("div",{className:qu["leftRight"+t%3],children:B.jsx("div",{className:"transform -translate-x-1/2 -translate-y-full",children:B.jsx("img",{src:`./icons/icon_${r}.svg`})})})})})}function Fg(n,e){const t=j.useRef(n);j.useEffect(()=>{t.current=n},[n]),j.useEffect(()=>{function r(){t.current()}if(e!==null){let i=setInterval(r,e);return()=>clearInterval(i)}},[e])}function cT({pointerDown:n,xPos:e,yPos:t,selectedCursorShape:r}){const[i,s]=j.useState([]),o=100;return Fg(()=>{s(a=>a.filter(u=>u.timestamp>Date.now()-4e3))},1e3),Fg(()=>{n&&s(a=>a.concat([{point:{x:e,y:t},timestamp:Date.now()}]))},o),B.jsx("div",{style:{transform:`translateX(${e-30}px) translateY(${t-40}px)`},children:i.map(a=>B.jsx(uT,{x:a.point.x,y:a.point.y,timestamp:a.timestamp,selectedCursorShape:r},a.timestamp.toString()))})}function fT({type:n,color:e}){switch(n){case"cursor":return B.jsxs("svg",{width:"36",height:"36",viewBox:"0 0 36 36",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[B.jsx("rect",{width:"36",height:"36",rx:"8",fill:"none"}),B.jsx("path",{d:"M26.83 16.1571C27.5067 15.8939 27.845 15.7624 27.94 15.5763C28.0223 15.4151 28.0198 15.2237 27.9333 15.0648C27.8335 14.8813 27.4918 14.7586 26.8084 14.5133L9.379 8.2566C8.81992 8.0559 8.54037 7.95556 8.35762 8.01884C8.19874 8.07387 8.07387 8.19873 8.01884 8.35762C7.95556 8.54037 8.0559 8.81992 8.2566 9.379L14.5133 26.8085C14.7586 27.4918 14.8812 27.8335 15.0647 27.9333C15.2237 28.0198 15.4151 28.0224 15.5763 27.9401C15.7623 27.8451 15.8939 27.5067 16.1571 26.83L19.0055 19.5054C19.0571 19.3728 19.0829 19.3065 19.1227 19.2507C19.1579 19.2013 19.2012 19.158 19.2507 19.1227C19.3065 19.0829 19.3728 19.0571 19.5053 19.0056L26.83 16.1571Z",fill:e,stroke:"#FEFDFB",strokeWidth:"0.5",strokeLinecap:"round",strokeLinejoin:"round"})]});case"pen":case"fading":return B.jsxs("svg",{width:"36",height:"36",viewBox:"0 0 36 36",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[B.jsx("rect",{width:"36",height:"36",rx:"8",fill:"none"}),B.jsxs("g",{clipPath:"url(#clip0_pen_colored)",children:[B.jsx("path",{d:"M9.73233 23.3904C9.5808 25.0085 10.7676 26.444 12.3854 26.5994C12.9205 26.6508 13.4605 26.5868 13.9688 26.4116L19.4305 24.5293C19.7215 24.429 19.9921 24.2771 20.2294 24.081L29.278 16.6002C29.8655 16.1145 30.0216 15.2781 29.6488 14.6132C28.3855 12.3598 26.7262 10.3528 24.7505 8.68832C24.1676 8.19717 23.3167 8.19323 22.7292 8.67897L13.6806 16.1597C13.4434 16.3559 13.2433 16.5931 13.0901 16.8602L10.2145 21.8705C9.94688 22.3368 9.78246 22.8551 9.73233 23.3904Z",fill:e,stroke:"#FEFDFB",strokeWidth:"0.5"}),B.jsx("path",{d:"M12.8764 26.3737C12.6642 26.5735 12.5267 26.6302 12.3106 26.7193C11.5383 27.0378 10.9542 27.2786 10.5095 27.4286C10.0767 27.5745 9.71876 27.6564 9.43664 27.5928C8.73307 27.4343 8.22552 26.8204 8.20212 26.0996C8.19273 25.8105 8.34043 25.4743 8.56515 25.0767C8.79602 24.6682 9.14239 24.1397 9.59453 23.45C9.72852 23.2455 9.81002 23.1212 10.0462 22.9503C10.1856 22.8495 10.4138 22.772 10.6132 22.7243C10.8125 22.6765 11.0511 22.6423 11.221 22.6691C11.4774 22.7182 12.3182 23.2516 12.6629 23.6686C13.0076 24.0856 13.2168 24.4982 13.342 24.8621C13.2168 24.4982 13.0076 24.0856 12.6629 23.6686",fill:e,stroke:"#FEFDFB",strokeWidth:"0.5"}),B.jsx("path",{d:"M19.5496 20.8585C19.0985 21.2314 18.4197 21.1031 18.1358 20.5913C17.7721 19.9354 17.2902 19.3524 16.7144 18.8719C16.2651 18.4969 16.2666 17.806 16.7177 17.4331L23.7284 11.6371C24.0468 11.3739 24.2059 11.2424 24.36 11.1593C24.9929 10.818 25.7691 10.8916 26.3266 11.3458C26.4623 11.4564 26.5939 11.6156 26.857 11.9339C27.1202 12.2522 27.2518 12.4114 27.3349 12.5655C27.6762 13.1984 27.6026 13.9746 27.1484 14.532C27.0378 14.6678 26.8787 14.7994 26.5603 15.0626L19.5496 20.8585Z",fill:"#FEFDFB"})]}),B.jsx("defs",{children:B.jsx("clipPath",{id:"clip0_pen_colored",children:B.jsx("rect",{width:"16.8889",height:"32",fill:"white",transform:"translate(11 36) rotate(-129.582)"})})})]});case"line":return B.jsx("svg",{width:"22",height:"23",viewBox:"0 0 22 23",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:B.jsx("path",{d:"M7.95167 5.6812C3.39223 10.5957 2.69919 11.4214 2.79038 11.8145C2.88157 12.188 2.64448 12.5615 1.45902 13.8786L0 15.4906V16.5521C0 17.8103 0.364756 18.4393 2.1703 20.3462L3.30104 21.5256L2.06087 21.6239C1.05779 21.7026 0.8207 21.7812 0.765987 22.0761C0.601847 22.9803 0.711274 23 7.93344 23C15.1556 23 15.265 22.9803 15.1009 22.0761C15.0462 21.7615 14.7726 21.7222 12.4199 21.6632L9.79369 21.6043L10.2132 21.1325C10.505 20.7983 10.7603 20.6803 11.1068 20.759C11.5263 20.8376 12.1464 20.2479 16.8517 15.1761C21.0099 10.6744 22.086 9.41624 21.9948 9.12137C21.8489 8.5906 13.8242 0 13.4777 0C13.3318 0 10.8515 2.55555 7.95167 5.6812ZM15.8669 14.2521L11.3074 19.1667L8.62647 16.2769L5.92728 13.3675L9.10065 9.94701C11.964 6.84103 12.2376 6.48718 12.0552 6.11368C11.9275 5.87778 11.7087 5.70085 11.5263 5.70085C11.3621 5.70085 9.81193 7.21453 8.11581 9.04273L4.99715 12.4043L4.65063 11.9915C4.30412 11.5786 4.32235 11.559 8.84532 6.68376L13.4048 1.76923L16.9064 5.54359L20.4263 9.33761L15.8669 14.2521ZM6.87564 16.3556C8.40762 18.0068 9.66602 19.4419 9.66602 19.5598C9.66602 19.6581 9.28303 20.1692 8.80885 20.6803L7.95167 21.6239H6.67503H5.38015L3.33751 19.4222C0.765987 16.6504 0.747749 16.5915 2.49858 14.7043C3.17337 13.9573 3.8117 13.3675 3.92112 13.3675C4.01231 13.3675 5.34367 14.7239 6.87564 16.3556Z",fill:e})});case"highlighter":return B.jsxs("svg",{width:"23",height:"24",viewBox:"0 0 23 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[B.jsx("path",{d:"M17.9456 0.210907C17.7178 0.338861 14.6852 3.63367 11.2255 7.53625C6.41316 12.9423 4.91821 14.7176 4.91821 15.0215C4.91821 15.2934 5.50196 16.0612 7.08233 17.8525C8.93322 19.9477 9.31764 20.2996 9.68781 20.2996C10.058 20.2996 10.8695 19.4519 16.3937 13.2142C19.8535 9.3276 22.7579 5.98481 22.8434 5.79288C22.9288 5.60095 23 5.1851 23 4.84922C23 4.30542 22.8576 4.0975 21.3342 2.35413C19.2128 -0.0769892 18.8996 -0.268919 17.9456 0.210907ZM14.5286 12.1426L12.6777 14.2218L11.5387 12.9423L10.3997 11.6628L12.2506 9.58351L14.1015 7.50426L15.2405 8.7838L16.3795 10.0633L14.5286 12.1426Z",fill:e}),B.jsx("path",{d:"M3.63688 17.4527C3.20975 18.2684 2.73991 19.2121 2.58329 19.5319L2.2843 20.1397L3.7223 21.7551L5.1603 23.3705L7.03967 22.123L8.91903 20.8914L6.74068 18.4283C5.54472 17.0848 4.51961 15.9812 4.4769 15.9812C4.43418 15.9812 4.04977 16.653 3.63688 17.4527Z",fill:e,opacity:.85})]});default:return B.jsx("img",{src:`./icons/icon_${n}.svg`,alt:n,style:{display:"block"}})}}function dT({selectedCursorShape:n,x:e,y:t,pointerDown:r,fadeEnabled:i,color:s,visible:o=!0,resetNonce:a=0,overInteractive:u=!1,animate:c=!0}){const d=n,h=i&&d==="pen"?"fading":d,g=n==="pen"&&i?"fading":n==="eraser"?"line":n,p=["pen","highlighter","eraser","fading"],A={pen:{w:36,h:36,tipX:18,tipY:38},highlighter:{w:23,h:24,tipX:5,tipY:-8}}[g==="fading"?"pen":g],m=!!A?`translate(${-(A.w/2)+A.tipX}px, ${-A.h+A.tipY}px)`:"translate(-50%, -100%)";return B.jsxs(B.Fragment,{children:[!u&&B.jsx("div",{className:`${n}-cursor${c?" animated-remote-cursor":""}`,style:{position:"fixed",transform:`translate3d(${e}px, ${t}px, 0) ${m}`,pointerEvents:"none",zIndex:10001},children:B.jsx(fT,{type:g,color:s})}),(n==="heart"||n==="thumbs")&&B.jsx(cT,{pointerDown:r,xPos:e,yPos:t,selectedCursorShape:n}),p.includes(h)&&B.jsx(Gk,{xPos:e,yPos:t,tool:h,color:s,pointerDown:r,visible:o,resetNonce:a})]})}function hT({handleCursorShapeSelect:n,clientsLength:e,fadeEnabled:t,onFadeSet:r,color:i,onColorChange:s}){const[o,a]=j.useState("cursor"),[u,c]=j.useState(!1),d=j.useRef(null),h=["heart","thumbs","pen","cursor"],g=v=>{if(v==="pen"){r(!1),a("pen"),n("pen"),c(!0);return}a(v),n(v),c(!1)},p=v=>{a(v),n(v)};return B.jsxs(B.Fragment,{children:[u&&B.jsxs("div",{className:"yc-panel yc-draw-tools yc-fade-in",onMouseDown:v=>v.stopPropagation(),onMouseUp:v=>v.stopPropagation(),"data-native-cursor":!0,children:[B.jsx("button",{className:"yc-close-btn",onClick:()=>{c(!1)},title:"Close","data-native-cursor":!0,children:""}),[{key:"pen",icon:"pen"},{key:"fading",icon:"fading"},{key:"highlighter",icon:"highlighter"}].map(v=>{const w=v.icon==="pen"?o==="pen"&&!t:v.icon==="fading"?o==="pen"&&t:o===v.icon;return B.jsx("button",{className:"yc-tool-icon","data-selected":w,"data-faded":!w,"data-native-cursor":!0,title:v.icon==="fading"?"Fading Pen":v.icon.charAt(0).toUpperCase()+v.icon.slice(1),onClick:()=>{v.icon==="pen"?(r(!1),p("pen")):v.icon==="fading"?(r(!0),p("pen")):(r(!1),p(v.icon))},children:B.jsx("img",{src:`./icons/icon_${v.icon}.svg`,alt:v.icon})},v.key)}),B.jsx("button",{ref:d,className:"yc-tool-icon","data-selected":o==="eraser","data-faded":o!=="eraser","data-native-cursor":!0,title:"Eraser (line erase)",onClick:()=>{r(!1),p("eraser")},children:B.jsx("img",{src:"./icons/icon_eraser.svg",alt:"Eraser"})}),B.jsx("input",{type:"color",className:"yc-color-chip",value:i,"aria-label":"Color",title:"Color",onChange:v=>s(v.target.value),"data-native-cursor":!0,onMouseDown:v=>v.stopPropagation(),onMouseUp:v=>v.stopPropagation()})]}),B.jsxs("div",{className:"yc-combined-bar","data-native-cursor":!0,children:[B.jsx("div",{className:"yc-combined-icons",role:"toolbar","aria-label":"Cursor selector","data-native-cursor":!0,children:h.map(v=>{const w=v==="pen"?["pen","highlighter","eraser"].includes(o):o===v;return B.jsx("button",{className:"yc-nav-btn","data-selected":w,onClick:()=>g(v),title:v,"aria-pressed":w,"data-native-cursor":!0,children:B.jsx("img",{src:`./icons/icon_${v}.svg`,alt:`${v} cursor`,style:{filter:w?"brightness(0) invert(1)":"none"}})},v)})}),B.jsx("div",{className:"yc-divider","aria-hidden":"true","data-native-cursor":!0}),B.jsxs("div",{className:"yc-count-pill","data-native-cursor":!0,title:`${e} user${e===1?"":"s"} online`,"aria-label":`${e} user${e===1?"":"s"} online`,children:[B.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:B.jsx("path",{fill:"currentColor",d:"M12 12.75c2.899 0 5.25-2.351 5.25-5.25S14.899 2.25 12 2.25 6.75 4.601 6.75 7.5 9.101 12.75 12 12.75Zm0 1.5c-3.005 0-9 1.51-9 4.5v.75a.75.75 0 0 0 .75.75h16.5a.75.75 0 0 0 .75-.75v-.75c0-2.99-5.995-4.5-9-4.5Z"})}),B.jsx("span",{children:e})]})]})]})}function gT(){const n=Math.floor(Math.random()*360),e=70,t=55,r=p=>p.toString(16).padStart(2,"0"),i=(1-Math.abs(2*t/100-1))*(e/100),s=i*(1-Math.abs(n/60%2-1)),o=t/100-i/2;let a,u,c;n<60?[a,u,c]=[i,s,0]:n<120?[a,u,c]=[s,i,0]:n<180?[a,u,c]=[0,i,s]:n<240?[a,u,c]=[0,s,i]:n<300?[a,u,c]=[s,0,i]:[a,u,c]=[i,0,s];const d=Math.round((a+o)*255),h=Math.round((u+o)*255),g=Math.round((c+o)*255);return`#${r(d)}${r(h)}${r(g)}`}const pf={cursorShape:"cursor",cursor:{xPos:0,yPos:0},pointerDown:!1,color:gT(),fadeEnabled:!1,overInteractive:!1},mT=2;function pT(){const{doc:n,presences:e,update:t,loading:r,error:i}=Wk(),[s,o]=j.useState(!1),[a,u]=j.useState(pf.color),c=j.useRef(null),d=j.useRef(null),h=j.useRef({x:0,y:0}),g=j.useRef(!1),p=A=>{t((y,m)=>m.set({cursorShape:A}))},v=A=>{o(A),t((y,m)=>m.set({fadeEnabled:A}))},w=A=>{u(A),t((y,m)=>m.set({color:A}))};return j.useEffect(()=>{if(r||i)return;const A='button, input, select, textarea, [role="button"], a, [data-native-cursor]',y=()=>{g.current=!0,t((x,C)=>C.set({pointerDown:!0}))},m=()=>{g.current=!1,t((x,C)=>C.set({pointerDown:!1}))},S=x=>{const C=!!(x.target.closest&&x.target.closest(A));d.current={x:x.clientX,y:x.clientY,overInteractive:C}};let I;const N=()=>{const x=d.current;if(x){const C=h.current,R=x.x-C.x,z=x.y-C.y,$=Math.hypot(R,z);(g.current||$>=mT)&&(h.current={x:x.x,y:x.y},t((Wt,ct)=>ct.set({cursor:{xPos:x.x,yPos:x.y},overInteractive:x.overInteractive}))),d.current=null}I=requestAnimationFrame(N)};return I=requestAnimationFrame(N),window.addEventListener("mousedown",y),window.addEventListener("mouseup",m),window.addEventListener("mousemove",S),()=>{cancelAnimationFrame(I),window.removeEventListener("mousedown",y),window.removeEventListener("mouseup",m),window.removeEventListener("mousemove",S)}},[r,i,t]),j.useEffect(()=>{var y;if(!n)return;const A=(y=n.getMyPresence)==null?void 0:y.call(n);A&&(o(A.fadeEnabled??!1),u(A.color??pf.color))},[e,n]),r?B.jsx("div",{className:"general-container",children:"Loading..."}):i?B.jsxs("div",{className:"general-container",children:["Error: ",i.message]}):B.jsxs("div",{className:"general-container",onMouseDown:A=>{const y=A.target.tagName;["INPUT","SELECT","TEXTAREA","BUTTON"].includes(y)||A.preventDefault()},children:[e.map(({clientID:A,presence:y},m)=>{const{cursorShape:S,cursor:I,pointerDown:N,color:x="#000000",fadeEnabled:C=!1,overInteractive:R=!1}=y;m===0&&c.current===null&&(c.current=A);const z=A===c.current;return I&&B.jsx(dT,{selectedCursorShape:S,x:I.xPos,y:I.yPos,pointerDown:N,fadeEnabled:C,color:x,overInteractive:R,animate:!z},A)}),B.jsx(hT,{handleCursorShapeSelect:p,clientsLength:e.length,fadeEnabled:s,onFadeSet:v,color:a,onColorChange:w})]})}function yT(){return B.jsx($k,{apiKey:"D6sd9E5ehtXBssmeRZ4QQP",rpcAddr:"https://api.yorkie.dev",children:B.jsx(Kk,{docKey:"simultaneous-cursors",initialPresence:pf,children:B.jsx(pT,{})})})}Ku.createRoot(document.getElementById("root")).render(B.jsx(j.StrictMode,{children:B.jsx(yT,{})}));
