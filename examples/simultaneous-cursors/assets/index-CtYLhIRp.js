var Fy=Object.defineProperty;var Jy=(n,e,t)=>e in n?Fy(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var u=(n,e,t)=>Jy(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();var pg={exports:{}},Tl={},yg={exports:{}},K={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Po=Symbol.for("react.element"),$y=Symbol.for("react.portal"),Uy=Symbol.for("react.fragment"),jy=Symbol.for("react.strict_mode"),Vy=Symbol.for("react.profiler"),qy=Symbol.for("react.provider"),Ky=Symbol.for("react.context"),Wy=Symbol.for("react.forward_ref"),_y=Symbol.for("react.suspense"),Hy=Symbol.for("react.memo"),Gy=Symbol.for("react.lazy"),pd=Symbol.iterator;function Yy(n){return n===null||typeof n!="object"?null:(n=pd&&n[pd]||n["@@iterator"],typeof n=="function"?n:null)}var vg={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},wg=Object.assign,Sg={};function ks(n,e,t){this.props=n,this.context=e,this.refs=Sg,this.updater=t||vg}ks.prototype.isReactComponent={};ks.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};ks.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function kg(){}kg.prototype=ks.prototype;function Qc(n,e,t){this.props=n,this.context=e,this.refs=Sg,this.updater=t||vg}var Xc=Qc.prototype=new kg;Xc.constructor=Qc;wg(Xc,ks.prototype);Xc.isPureReactComponent=!0;var yd=Array.isArray,Tg=Object.prototype.hasOwnProperty,Zc={current:null},Ag={key:!0,ref:!0,__self:!0,__source:!0};function Ig(n,e,t){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Tg.call(e,r)&&!Ag.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=t;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(n&&n.defaultProps)for(r in a=n.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Po,type:n,key:s,ref:o,props:i,_owner:Zc.current}}function Qy(n,e){return{$$typeof:Po,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function ef(n){return typeof n=="object"&&n!==null&&n.$$typeof===Po}function Xy(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var vd=/\/+/g;function _l(n,e){return typeof n=="object"&&n!==null&&n.key!=null?Xy(""+n.key):e.toString(36)}function ua(n,e,t,r,i){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case Po:case $y:o=!0}}if(o)return o=n,i=i(o),n=r===""?"."+_l(o,0):r,yd(i)?(t="",n!=null&&(t=n.replace(vd,"$&/")+"/"),ua(i,e,t,"",function(c){return c})):i!=null&&(ef(i)&&(i=Qy(i,t+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(vd,"$&/")+"/")+n)),e.push(i)),1;if(o=0,r=r===""?".":r+":",yd(n))for(var a=0;a<n.length;a++){s=n[a];var l=r+_l(s,a);o+=ua(s,e,t,l,i)}else if(l=Yy(n),typeof l=="function")for(n=l.call(n),a=0;!(s=n.next()).done;)s=s.value,l=r+_l(s,a++),o+=ua(s,e,t,l,i);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Uo(n,e,t){if(n==null)return n;var r=[],i=0;return ua(n,r,"","",function(s){return e.call(t,s,i++)}),r}function Zy(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Fe={current:null},ca={transition:null},ev={ReactCurrentDispatcher:Fe,ReactCurrentBatchConfig:ca,ReactCurrentOwner:Zc};K.Children={map:Uo,forEach:function(n,e,t){Uo(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return Uo(n,function(){e++}),e},toArray:function(n){return Uo(n,function(e){return e})||[]},only:function(n){if(!ef(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};K.Component=ks;K.Fragment=Uy;K.Profiler=Vy;K.PureComponent=Qc;K.StrictMode=jy;K.Suspense=_y;K.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ev;K.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=wg({},n.props),i=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Zc.current),e.key!==void 0&&(i=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)Tg.call(e,l)&&!Ag.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=t;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Po,type:n.type,key:i,ref:s,props:r,_owner:o}};K.createContext=function(n){return n={$$typeof:Ky,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:qy,_context:n},n.Consumer=n};K.createElement=Ig;K.createFactory=function(n){var e=Ig.bind(null,n);return e.type=n,e};K.createRef=function(){return{current:null}};K.forwardRef=function(n){return{$$typeof:Wy,render:n}};K.isValidElement=ef;K.lazy=function(n){return{$$typeof:Gy,_payload:{_status:-1,_result:n},_init:Zy}};K.memo=function(n,e){return{$$typeof:Hy,type:n,compare:e===void 0?null:e}};K.startTransition=function(n){var e=ca.transition;ca.transition={};try{n()}finally{ca.transition=e}};K.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};K.useCallback=function(n,e){return Fe.current.useCallback(n,e)};K.useContext=function(n){return Fe.current.useContext(n)};K.useDebugValue=function(){};K.useDeferredValue=function(n){return Fe.current.useDeferredValue(n)};K.useEffect=function(n,e){return Fe.current.useEffect(n,e)};K.useId=function(){return Fe.current.useId()};K.useImperativeHandle=function(n,e,t){return Fe.current.useImperativeHandle(n,e,t)};K.useInsertionEffect=function(n,e){return Fe.current.useInsertionEffect(n,e)};K.useLayoutEffect=function(n,e){return Fe.current.useLayoutEffect(n,e)};K.useMemo=function(n,e){return Fe.current.useMemo(n,e)};K.useReducer=function(n,e,t){return Fe.current.useReducer(n,e,t)};K.useRef=function(n){return Fe.current.useRef(n)};K.useState=function(n){return Fe.current.useState(n)};K.useSyncExternalStore=function(n,e,t){return Fe.current.useSyncExternalStore(n,e,t)};K.useTransition=function(){return Fe.current.useTransition()};K.version="18.2.0";yg.exports=K;var je=yg.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tv=je,nv=Symbol.for("react.element"),rv=Symbol.for("react.fragment"),iv=Object.prototype.hasOwnProperty,sv=tv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ov={key:!0,ref:!0,__self:!0,__source:!0};function Eg(n,e,t){var r,i={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)iv.call(e,r)&&!ov.hasOwnProperty(r)&&(i[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:nv,type:n,key:s,ref:o,props:i,_owner:sv.current}}Tl.Fragment=rv;Tl.jsx=Eg;Tl.jsxs=Eg;pg.exports=Tl;var ue=pg.exports,Pu={},xg={exports:{}},it={},Cg={exports:{}},Ng={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(B,U){var j=B.length;B.push(U);e:for(;0<j;){var fe=j-1>>>1,ke=B[fe];if(0<i(ke,U))B[fe]=U,B[j]=ke,j=fe;else break e}}function t(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var U=B[0],j=B.pop();if(j!==U){B[0]=j;e:for(var fe=0,ke=B.length,Jo=ke>>>1;fe<Jo;){var oi=2*(fe+1)-1,Wl=B[oi],ai=oi+1,$o=B[ai];if(0>i(Wl,j))ai<ke&&0>i($o,Wl)?(B[fe]=$o,B[ai]=j,fe=ai):(B[fe]=Wl,B[oi]=j,fe=oi);else if(ai<ke&&0>i($o,j))B[fe]=$o,B[ai]=j,fe=ai;else break e}}return U}function i(B,U){var j=B.sortIndex-U.sortIndex;return j!==0?j:B.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,h=null,m=3,y=!1,w=!1,T=!1,P=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(B){for(var U=t(c);U!==null;){if(U.callback===null)r(c);else if(U.startTime<=B)r(c),U.sortIndex=U.expirationTime,e(l,U);else break;U=t(c)}}function I(B){if(T=!1,v(B),!w)if(t(l)!==null)w=!0,ql(E);else{var U=t(c);U!==null&&Kl(I,U.startTime-B)}}function E(B,U){w=!1,T&&(T=!1,p(R),R=-1),y=!0;var j=m;try{for(v(U),h=t(l);h!==null&&(!(h.expirationTime>U)||B&&!Se());){var fe=h.callback;if(typeof fe=="function"){h.callback=null,m=h.priorityLevel;var ke=fe(h.expirationTime<=U);U=n.unstable_now(),typeof ke=="function"?h.callback=ke:h===t(l)&&r(l),v(U)}else r(l);h=t(l)}if(h!==null)var Jo=!0;else{var oi=t(c);oi!==null&&Kl(I,oi.startTime-U),Jo=!1}return Jo}finally{h=null,m=j,y=!1}}var N=!1,D=null,R=-1,W=5,J=-1;function Se(){return!(n.unstable_now()-J<W)}function Ut(){if(D!==null){var B=n.unstable_now();J=B;var U=!0;try{U=D(!0,B)}finally{U?Is():(N=!1,D=null)}}else N=!1}var Is;if(typeof g=="function")Is=function(){g(Ut)};else if(typeof MessageChannel<"u"){var md=new MessageChannel,zy=md.port2;md.port1.onmessage=Ut,Is=function(){zy.postMessage(null)}}else Is=function(){P(Ut,0)};function ql(B){D=B,N||(N=!0,Is())}function Kl(B,U){R=P(function(){B(n.unstable_now())},U)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(B){B.callback=null},n.unstable_continueExecution=function(){w||y||(w=!0,ql(E))},n.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W=0<B?Math.floor(1e3/B):5},n.unstable_getCurrentPriorityLevel=function(){return m},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(B){switch(m){case 1:case 2:case 3:var U=3;break;default:U=m}var j=m;m=U;try{return B()}finally{m=j}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(B,U){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var j=m;m=B;try{return U()}finally{m=j}},n.unstable_scheduleCallback=function(B,U,j){var fe=n.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?fe+j:fe):j=fe,B){case 1:var ke=-1;break;case 2:ke=250;break;case 5:ke=1073741823;break;case 4:ke=1e4;break;default:ke=5e3}return ke=j+ke,B={id:d++,callback:U,priorityLevel:B,startTime:j,expirationTime:ke,sortIndex:-1},j>fe?(B.sortIndex=j,e(c,B),t(l)===null&&B===t(c)&&(T?(p(R),R=-1):T=!0,Kl(I,j-fe))):(B.sortIndex=ke,e(l,B),w||y||(w=!0,ql(E))),B},n.unstable_shouldYield=Se,n.unstable_wrapCallback=function(B){var U=m;return function(){var j=m;m=U;try{return B.apply(this,arguments)}finally{m=j}}}})(Ng);Cg.exports=Ng;var av=Cg.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pg=je,rt=av;function C(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Dg=new Set,to={};function Di(n,e){ss(n,e),ss(n+"Capture",e)}function ss(n,e){for(to[n]=e,n=0;n<e.length;n++)Dg.add(e[n])}var Sr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Du=Object.prototype.hasOwnProperty,lv=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,wd={},Sd={};function uv(n){return Du.call(Sd,n)?!0:Du.call(wd,n)?!1:lv.test(n)?Sd[n]=!0:(wd[n]=!0,!1)}function cv(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function fv(n,e,t,r){if(e===null||typeof e>"u"||cv(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Je(n,e,t,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Ne={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Ne[n]=new Je(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];Ne[e]=new Je(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){Ne[n]=new Je(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Ne[n]=new Je(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Ne[n]=new Je(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){Ne[n]=new Je(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){Ne[n]=new Je(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){Ne[n]=new Je(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){Ne[n]=new Je(n,5,!1,n.toLowerCase(),null,!1,!1)});var tf=/[\-:]([a-z])/g;function nf(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(tf,nf);Ne[e]=new Je(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(tf,nf);Ne[e]=new Je(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(tf,nf);Ne[e]=new Je(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){Ne[n]=new Je(n,1,!1,n.toLowerCase(),null,!1,!1)});Ne.xlinkHref=new Je("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){Ne[n]=new Je(n,1,!1,n.toLowerCase(),null,!0,!0)});function rf(n,e,t,r){var i=Ne.hasOwnProperty(e)?Ne[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(fv(e,t,i,r)&&(t=null),r||i===null?uv(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):i.mustUseProperty?n[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,r=i.attributeNamespace,t===null?n.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var xr=Pg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,jo=Symbol.for("react.element"),zi=Symbol.for("react.portal"),Fi=Symbol.for("react.fragment"),sf=Symbol.for("react.strict_mode"),Ou=Symbol.for("react.profiler"),Og=Symbol.for("react.provider"),Rg=Symbol.for("react.context"),of=Symbol.for("react.forward_ref"),Ru=Symbol.for("react.suspense"),Lu=Symbol.for("react.suspense_list"),af=Symbol.for("react.memo"),Lr=Symbol.for("react.lazy"),Lg=Symbol.for("react.offscreen"),kd=Symbol.iterator;function Es(n){return n===null||typeof n!="object"?null:(n=kd&&n[kd]||n["@@iterator"],typeof n=="function"?n:null)}var se=Object.assign,Hl;function Ms(n){if(Hl===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);Hl=e&&e[1]||""}return`
`+Hl+n}var Gl=!1;function Yl(n,e){if(!n||Gl)return"";Gl=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){r=c}n.call(e.prototype)}else{try{throw Error()}catch(c){r=c}n()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{Gl=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?Ms(n):""}function dv(n){switch(n.tag){case 5:return Ms(n.type);case 16:return Ms("Lazy");case 13:return Ms("Suspense");case 19:return Ms("SuspenseList");case 0:case 2:case 15:return n=Yl(n.type,!1),n;case 11:return n=Yl(n.type.render,!1),n;case 1:return n=Yl(n.type,!0),n;default:return""}}function Bu(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Fi:return"Fragment";case zi:return"Portal";case Ou:return"Profiler";case sf:return"StrictMode";case Ru:return"Suspense";case Lu:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case Rg:return(n.displayName||"Context")+".Consumer";case Og:return(n._context.displayName||"Context")+".Provider";case of:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case af:return e=n.displayName||null,e!==null?e:Bu(n.type)||"Memo";case Lr:e=n._payload,n=n._init;try{return Bu(n(e))}catch{}}return null}function hv(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Bu(e);case 8:return e===sf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Xr(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Bg(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function gv(n){var e=Bg(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function Vo(n){n._valueTracker||(n._valueTracker=gv(n))}function bg(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=Bg(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function Na(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function bu(n,e){var t=e.checked;return se({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function Td(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=Xr(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Mg(n,e){e=e.checked,e!=null&&rf(n,"checked",e,!1)}function Mu(n,e){Mg(n,e);var t=Xr(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?zu(n,e.type,t):e.hasOwnProperty("defaultValue")&&zu(n,e.type,Xr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function Ad(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function zu(n,e,t){(e!=="number"||Na(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var zs=Array.isArray;function Qi(n,e,t,r){if(n=n.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<n.length;t++)i=e.hasOwnProperty("$"+n[t].value),n[t].selected!==i&&(n[t].selected=i),i&&r&&(n[t].defaultSelected=!0)}else{for(t=""+Xr(t),e=null,i=0;i<n.length;i++){if(n[i].value===t){n[i].selected=!0,r&&(n[i].defaultSelected=!0);return}e!==null||n[i].disabled||(e=n[i])}e!==null&&(e.selected=!0)}}function Fu(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(C(91));return se({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Id(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(C(92));if(zs(t)){if(1<t.length)throw Error(C(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:Xr(t)}}function zg(n,e){var t=Xr(e.value),r=Xr(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function Ed(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function Fg(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ju(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?Fg(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var qo,Jg=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,i){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,i)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(qo=qo||document.createElement("div"),qo.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=qo.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function no(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var Us={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},mv=["Webkit","ms","Moz","O"];Object.keys(Us).forEach(function(n){mv.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),Us[e]=Us[n]})});function $g(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Us.hasOwnProperty(n)&&Us[n]?(""+e).trim():e+"px"}function Ug(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,i=$g(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,i):n[t]=i}}var pv=se({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function $u(n,e){if(e){if(pv[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(C(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(C(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(C(61))}if(e.style!=null&&typeof e.style!="object")throw Error(C(62))}}function Uu(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ju=null;function lf(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Vu=null,Xi=null,Zi=null;function xd(n){if(n=Ro(n)){if(typeof Vu!="function")throw Error(C(280));var e=n.stateNode;e&&(e=Cl(e),Vu(n.stateNode,n.type,e))}}function jg(n){Xi?Zi?Zi.push(n):Zi=[n]:Xi=n}function Vg(){if(Xi){var n=Xi,e=Zi;if(Zi=Xi=null,xd(n),e)for(n=0;n<e.length;n++)xd(e[n])}}function qg(n,e){return n(e)}function Kg(){}var Ql=!1;function Wg(n,e,t){if(Ql)return n(e,t);Ql=!0;try{return qg(n,e,t)}finally{Ql=!1,(Xi!==null||Zi!==null)&&(Kg(),Vg())}}function ro(n,e){var t=n.stateNode;if(t===null)return null;var r=Cl(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(C(231,e,typeof t));return t}var qu=!1;if(Sr)try{var xs={};Object.defineProperty(xs,"passive",{get:function(){qu=!0}}),window.addEventListener("test",xs,xs),window.removeEventListener("test",xs,xs)}catch{qu=!1}function yv(n,e,t,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(d){this.onError(d)}}var js=!1,Pa=null,Da=!1,Ku=null,vv={onError:function(n){js=!0,Pa=n}};function wv(n,e,t,r,i,s,o,a,l){js=!1,Pa=null,yv.apply(vv,arguments)}function Sv(n,e,t,r,i,s,o,a,l){if(wv.apply(this,arguments),js){if(js){var c=Pa;js=!1,Pa=null}else throw Error(C(198));Da||(Da=!0,Ku=c)}}function Oi(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function _g(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function Cd(n){if(Oi(n)!==n)throw Error(C(188))}function kv(n){var e=n.alternate;if(!e){if(e=Oi(n),e===null)throw Error(C(188));return e!==n?null:n}for(var t=n,r=e;;){var i=t.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){t=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===t)return Cd(i),n;if(s===r)return Cd(i),e;s=s.sibling}throw Error(C(188))}if(t.return!==r.return)t=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===t){o=!0,t=i,r=s;break}if(a===r){o=!0,r=i,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,r=i;break}if(a===r){o=!0,r=s,t=i;break}a=a.sibling}if(!o)throw Error(C(189))}}if(t.alternate!==r)throw Error(C(190))}if(t.tag!==3)throw Error(C(188));return t.stateNode.current===t?n:e}function Hg(n){return n=kv(n),n!==null?Gg(n):null}function Gg(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=Gg(n);if(e!==null)return e;n=n.sibling}return null}var Yg=rt.unstable_scheduleCallback,Nd=rt.unstable_cancelCallback,Tv=rt.unstable_shouldYield,Av=rt.unstable_requestPaint,he=rt.unstable_now,Iv=rt.unstable_getCurrentPriorityLevel,uf=rt.unstable_ImmediatePriority,Qg=rt.unstable_UserBlockingPriority,Oa=rt.unstable_NormalPriority,Ev=rt.unstable_LowPriority,Xg=rt.unstable_IdlePriority,Al=null,rn=null;function xv(n){if(rn&&typeof rn.onCommitFiberRoot=="function")try{rn.onCommitFiberRoot(Al,n,void 0,(n.current.flags&128)===128)}catch{}}var bt=Math.clz32?Math.clz32:Pv,Cv=Math.log,Nv=Math.LN2;function Pv(n){return n>>>=0,n===0?32:31-(Cv(n)/Nv|0)|0}var Ko=64,Wo=4194304;function Fs(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Ra(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,i=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~i;a!==0?r=Fs(a):(s&=o,s!==0&&(r=Fs(s)))}else o=t&~i,o!==0?r=Fs(o):s!==0&&(r=Fs(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-bt(e),i=1<<t,r|=n[t],e&=~i;return r}function Dv(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ov(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,i=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-bt(s),a=1<<o,l=i[o];l===-1?(!(a&t)||a&r)&&(i[o]=Dv(a,e)):l<=e&&(n.expiredLanes|=a),s&=~a}}function Wu(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Zg(){var n=Ko;return Ko<<=1,!(Ko&4194240)&&(Ko=64),n}function Xl(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function Do(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-bt(e),n[e]=t}function Rv(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var i=31-bt(t),s=1<<i;e[i]=0,r[i]=-1,n[i]=-1,t&=~s}}function cf(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-bt(t),i=1<<r;i&e|n[r]&e&&(n[r]|=e),t&=~i}}var Y=0;function em(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var tm,ff,nm,rm,im,_u=!1,_o=[],$r=null,Ur=null,jr=null,io=new Map,so=new Map,br=[],Lv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Pd(n,e){switch(n){case"focusin":case"focusout":$r=null;break;case"dragenter":case"dragleave":Ur=null;break;case"mouseover":case"mouseout":jr=null;break;case"pointerover":case"pointerout":io.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":so.delete(e.pointerId)}}function Cs(n,e,t,r,i,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Ro(e),e!==null&&ff(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),n)}function Bv(n,e,t,r,i){switch(e){case"focusin":return $r=Cs($r,n,e,t,r,i),!0;case"dragenter":return Ur=Cs(Ur,n,e,t,r,i),!0;case"mouseover":return jr=Cs(jr,n,e,t,r,i),!0;case"pointerover":var s=i.pointerId;return io.set(s,Cs(io.get(s)||null,n,e,t,r,i)),!0;case"gotpointercapture":return s=i.pointerId,so.set(s,Cs(so.get(s)||null,n,e,t,r,i)),!0}return!1}function sm(n){var e=hi(n.target);if(e!==null){var t=Oi(e);if(t!==null){if(e=t.tag,e===13){if(e=_g(t),e!==null){n.blockedOn=e,im(n.priority,function(){nm(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function fa(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=Hu(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);ju=r,t.target.dispatchEvent(r),ju=null}else return e=Ro(t),e!==null&&ff(e),n.blockedOn=t,!1;e.shift()}return!0}function Dd(n,e,t){fa(n)&&t.delete(e)}function bv(){_u=!1,$r!==null&&fa($r)&&($r=null),Ur!==null&&fa(Ur)&&(Ur=null),jr!==null&&fa(jr)&&(jr=null),io.forEach(Dd),so.forEach(Dd)}function Ns(n,e){n.blockedOn===e&&(n.blockedOn=null,_u||(_u=!0,rt.unstable_scheduleCallback(rt.unstable_NormalPriority,bv)))}function oo(n){function e(i){return Ns(i,n)}if(0<_o.length){Ns(_o[0],n);for(var t=1;t<_o.length;t++){var r=_o[t];r.blockedOn===n&&(r.blockedOn=null)}}for($r!==null&&Ns($r,n),Ur!==null&&Ns(Ur,n),jr!==null&&Ns(jr,n),io.forEach(e),so.forEach(e),t=0;t<br.length;t++)r=br[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<br.length&&(t=br[0],t.blockedOn===null);)sm(t),t.blockedOn===null&&br.shift()}var es=xr.ReactCurrentBatchConfig,La=!0;function Mv(n,e,t,r){var i=Y,s=es.transition;es.transition=null;try{Y=1,df(n,e,t,r)}finally{Y=i,es.transition=s}}function zv(n,e,t,r){var i=Y,s=es.transition;es.transition=null;try{Y=4,df(n,e,t,r)}finally{Y=i,es.transition=s}}function df(n,e,t,r){if(La){var i=Hu(n,e,t,r);if(i===null)lu(n,e,r,Ba,t),Pd(n,r);else if(Bv(i,n,e,t,r))r.stopPropagation();else if(Pd(n,r),e&4&&-1<Lv.indexOf(n)){for(;i!==null;){var s=Ro(i);if(s!==null&&tm(s),s=Hu(n,e,t,r),s===null&&lu(n,e,r,Ba,t),s===i)break;i=s}i!==null&&r.stopPropagation()}else lu(n,e,r,null,t)}}var Ba=null;function Hu(n,e,t,r){if(Ba=null,n=lf(r),n=hi(n),n!==null)if(e=Oi(n),e===null)n=null;else if(t=e.tag,t===13){if(n=_g(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return Ba=n,null}function om(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Iv()){case uf:return 1;case Qg:return 4;case Oa:case Ev:return 16;case Xg:return 536870912;default:return 16}default:return 16}}var zr=null,hf=null,da=null;function am(){if(da)return da;var n,e=hf,t=e.length,r,i="value"in zr?zr.value:zr.textContent,s=i.length;for(n=0;n<t&&e[n]===i[n];n++);var o=t-n;for(r=1;r<=o&&e[t-r]===i[s-r];r++);return da=i.slice(n,1<r?1-r:void 0)}function ha(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function Ho(){return!0}function Od(){return!1}function st(n){function e(t,r,i,s,o){this._reactName=t,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Ho:Od,this.isPropagationStopped=Od,this}return se(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=Ho)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=Ho)},persist:function(){},isPersistent:Ho}),e}var Ts={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},gf=st(Ts),Oo=se({},Ts,{view:0,detail:0}),Fv=st(Oo),Zl,eu,Ps,Il=se({},Oo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mf,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Ps&&(Ps&&n.type==="mousemove"?(Zl=n.screenX-Ps.screenX,eu=n.screenY-Ps.screenY):eu=Zl=0,Ps=n),Zl)},movementY:function(n){return"movementY"in n?n.movementY:eu}}),Rd=st(Il),Jv=se({},Il,{dataTransfer:0}),$v=st(Jv),Uv=se({},Oo,{relatedTarget:0}),tu=st(Uv),jv=se({},Ts,{animationName:0,elapsedTime:0,pseudoElement:0}),Vv=st(jv),qv=se({},Ts,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Kv=st(qv),Wv=se({},Ts,{data:0}),Ld=st(Wv),_v={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Hv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Gv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Yv(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=Gv[n])?!!e[n]:!1}function mf(){return Yv}var Qv=se({},Oo,{key:function(n){if(n.key){var e=_v[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=ha(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Hv[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mf,charCode:function(n){return n.type==="keypress"?ha(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?ha(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Xv=st(Qv),Zv=se({},Il,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Bd=st(Zv),ew=se({},Oo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mf}),tw=st(ew),nw=se({},Ts,{propertyName:0,elapsedTime:0,pseudoElement:0}),rw=st(nw),iw=se({},Il,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),sw=st(iw),ow=[9,13,27,32],pf=Sr&&"CompositionEvent"in window,Vs=null;Sr&&"documentMode"in document&&(Vs=document.documentMode);var aw=Sr&&"TextEvent"in window&&!Vs,lm=Sr&&(!pf||Vs&&8<Vs&&11>=Vs),bd=" ",Md=!1;function um(n,e){switch(n){case"keyup":return ow.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function cm(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ji=!1;function lw(n,e){switch(n){case"compositionend":return cm(e);case"keypress":return e.which!==32?null:(Md=!0,bd);case"textInput":return n=e.data,n===bd&&Md?null:n;default:return null}}function uw(n,e){if(Ji)return n==="compositionend"||!pf&&um(n,e)?(n=am(),da=hf=zr=null,Ji=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return lm&&e.locale!=="ko"?null:e.data;default:return null}}var cw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zd(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!cw[n.type]:e==="textarea"}function fm(n,e,t,r){jg(r),e=ba(e,"onChange"),0<e.length&&(t=new gf("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var qs=null,ao=null;function fw(n){Tm(n,0)}function El(n){var e=ji(n);if(bg(e))return n}function dw(n,e){if(n==="change")return e}var dm=!1;if(Sr){var nu;if(Sr){var ru="oninput"in document;if(!ru){var Fd=document.createElement("div");Fd.setAttribute("oninput","return;"),ru=typeof Fd.oninput=="function"}nu=ru}else nu=!1;dm=nu&&(!document.documentMode||9<document.documentMode)}function Jd(){qs&&(qs.detachEvent("onpropertychange",hm),ao=qs=null)}function hm(n){if(n.propertyName==="value"&&El(ao)){var e=[];fm(e,ao,n,lf(n)),Wg(fw,e)}}function hw(n,e,t){n==="focusin"?(Jd(),qs=e,ao=t,qs.attachEvent("onpropertychange",hm)):n==="focusout"&&Jd()}function gw(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return El(ao)}function mw(n,e){if(n==="click")return El(e)}function pw(n,e){if(n==="input"||n==="change")return El(e)}function yw(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Jt=typeof Object.is=="function"?Object.is:yw;function lo(n,e){if(Jt(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var i=t[r];if(!Du.call(e,i)||!Jt(n[i],e[i]))return!1}return!0}function $d(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Ud(n,e){var t=$d(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=$d(t)}}function gm(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?gm(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function mm(){for(var n=window,e=Na();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=Na(n.document)}return e}function yf(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function vw(n){var e=mm(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&gm(t.ownerDocument.documentElement,t)){if(r!==null&&yf(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var i=t.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!n.extend&&s>r&&(i=r,r=s,s=i),i=Ud(t,s);var o=Ud(t,r);i&&o&&(n.rangeCount!==1||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),n.removeAllRanges(),s>r?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var ww=Sr&&"documentMode"in document&&11>=document.documentMode,$i=null,Gu=null,Ks=null,Yu=!1;function jd(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;Yu||$i==null||$i!==Na(r)||(r=$i,"selectionStart"in r&&yf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ks&&lo(Ks,r)||(Ks=r,r=ba(Gu,"onSelect"),0<r.length&&(e=new gf("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=$i)))}function Go(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var Ui={animationend:Go("Animation","AnimationEnd"),animationiteration:Go("Animation","AnimationIteration"),animationstart:Go("Animation","AnimationStart"),transitionend:Go("Transition","TransitionEnd")},iu={},pm={};Sr&&(pm=document.createElement("div").style,"AnimationEvent"in window||(delete Ui.animationend.animation,delete Ui.animationiteration.animation,delete Ui.animationstart.animation),"TransitionEvent"in window||delete Ui.transitionend.transition);function xl(n){if(iu[n])return iu[n];if(!Ui[n])return n;var e=Ui[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in pm)return iu[n]=e[t];return n}var ym=xl("animationend"),vm=xl("animationiteration"),wm=xl("animationstart"),Sm=xl("transitionend"),km=new Map,Vd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ri(n,e){km.set(n,e),Di(e,[n])}for(var su=0;su<Vd.length;su++){var ou=Vd[su],Sw=ou.toLowerCase(),kw=ou[0].toUpperCase()+ou.slice(1);ri(Sw,"on"+kw)}ri(ym,"onAnimationEnd");ri(vm,"onAnimationIteration");ri(wm,"onAnimationStart");ri("dblclick","onDoubleClick");ri("focusin","onFocus");ri("focusout","onBlur");ri(Sm,"onTransitionEnd");ss("onMouseEnter",["mouseout","mouseover"]);ss("onMouseLeave",["mouseout","mouseover"]);ss("onPointerEnter",["pointerout","pointerover"]);ss("onPointerLeave",["pointerout","pointerover"]);Di("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Di("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Di("onBeforeInput",["compositionend","keypress","textInput","paste"]);Di("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Di("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Di("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Js="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Tw=new Set("cancel close invalid load scroll toggle".split(" ").concat(Js));function qd(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,Sv(r,e,void 0,n),n.currentTarget=null}function Tm(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;qd(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;qd(i,a,c),s=l}}}if(Da)throw n=Ku,Da=!1,Ku=null,n}function Z(n,e){var t=e[tc];t===void 0&&(t=e[tc]=new Set);var r=n+"__bubble";t.has(r)||(Am(e,n,2,!1),t.add(r))}function au(n,e,t){var r=0;e&&(r|=4),Am(t,n,r,e)}var Yo="_reactListening"+Math.random().toString(36).slice(2);function uo(n){if(!n[Yo]){n[Yo]=!0,Dg.forEach(function(t){t!=="selectionchange"&&(Tw.has(t)||au(t,!1,n),au(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Yo]||(e[Yo]=!0,au("selectionchange",!1,e))}}function Am(n,e,t,r){switch(om(e)){case 1:var i=Mv;break;case 4:i=zv;break;default:i=df}t=i.bind(null,e,t,n),i=void 0,!qu||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?n.addEventListener(e,t,{capture:!0,passive:i}):n.addEventListener(e,t,!0):i!==void 0?n.addEventListener(e,t,{passive:i}):n.addEventListener(e,t,!1)}function lu(n,e,t,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=hi(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}Wg(function(){var c=s,d=lf(t),h=[];e:{var m=km.get(n);if(m!==void 0){var y=gf,w=n;switch(n){case"keypress":if(ha(t)===0)break e;case"keydown":case"keyup":y=Xv;break;case"focusin":w="focus",y=tu;break;case"focusout":w="blur",y=tu;break;case"beforeblur":case"afterblur":y=tu;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=Rd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=$v;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=tw;break;case ym:case vm:case wm:y=Vv;break;case Sm:y=rw;break;case"scroll":y=Fv;break;case"wheel":y=sw;break;case"copy":case"cut":case"paste":y=Kv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=Bd}var T=(e&4)!==0,P=!T&&n==="scroll",p=T?m!==null?m+"Capture":null:m;T=[];for(var g=c,v;g!==null;){v=g;var I=v.stateNode;if(v.tag===5&&I!==null&&(v=I,p!==null&&(I=ro(g,p),I!=null&&T.push(co(g,I,v)))),P)break;g=g.return}0<T.length&&(m=new y(m,w,null,t,d),h.push({event:m,listeners:T}))}}if(!(e&7)){e:{if(m=n==="mouseover"||n==="pointerover",y=n==="mouseout"||n==="pointerout",m&&t!==ju&&(w=t.relatedTarget||t.fromElement)&&(hi(w)||w[kr]))break e;if((y||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,y?(w=t.relatedTarget||t.toElement,y=c,w=w?hi(w):null,w!==null&&(P=Oi(w),w!==P||w.tag!==5&&w.tag!==6)&&(w=null)):(y=null,w=c),y!==w)){if(T=Rd,I="onMouseLeave",p="onMouseEnter",g="mouse",(n==="pointerout"||n==="pointerover")&&(T=Bd,I="onPointerLeave",p="onPointerEnter",g="pointer"),P=y==null?m:ji(y),v=w==null?m:ji(w),m=new T(I,g+"leave",y,t,d),m.target=P,m.relatedTarget=v,I=null,hi(d)===c&&(T=new T(p,g+"enter",w,t,d),T.target=v,T.relatedTarget=P,I=T),P=I,y&&w)t:{for(T=y,p=w,g=0,v=T;v;v=Li(v))g++;for(v=0,I=p;I;I=Li(I))v++;for(;0<g-v;)T=Li(T),g--;for(;0<v-g;)p=Li(p),v--;for(;g--;){if(T===p||p!==null&&T===p.alternate)break t;T=Li(T),p=Li(p)}T=null}else T=null;y!==null&&Kd(h,m,y,T,!1),w!==null&&P!==null&&Kd(h,P,w,T,!0)}}e:{if(m=c?ji(c):window,y=m.nodeName&&m.nodeName.toLowerCase(),y==="select"||y==="input"&&m.type==="file")var E=dw;else if(zd(m))if(dm)E=pw;else{E=gw;var N=hw}else(y=m.nodeName)&&y.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(E=mw);if(E&&(E=E(n,c))){fm(h,E,t,d);break e}N&&N(n,m,c),n==="focusout"&&(N=m._wrapperState)&&N.controlled&&m.type==="number"&&zu(m,"number",m.value)}switch(N=c?ji(c):window,n){case"focusin":(zd(N)||N.contentEditable==="true")&&($i=N,Gu=c,Ks=null);break;case"focusout":Ks=Gu=$i=null;break;case"mousedown":Yu=!0;break;case"contextmenu":case"mouseup":case"dragend":Yu=!1,jd(h,t,d);break;case"selectionchange":if(ww)break;case"keydown":case"keyup":jd(h,t,d)}var D;if(pf)e:{switch(n){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else Ji?um(n,t)&&(R="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(R="onCompositionStart");R&&(lm&&t.locale!=="ko"&&(Ji||R!=="onCompositionStart"?R==="onCompositionEnd"&&Ji&&(D=am()):(zr=d,hf="value"in zr?zr.value:zr.textContent,Ji=!0)),N=ba(c,R),0<N.length&&(R=new Ld(R,n,null,t,d),h.push({event:R,listeners:N}),D?R.data=D:(D=cm(t),D!==null&&(R.data=D)))),(D=aw?lw(n,t):uw(n,t))&&(c=ba(c,"onBeforeInput"),0<c.length&&(d=new Ld("onBeforeInput","beforeinput",null,t,d),h.push({event:d,listeners:c}),d.data=D))}Tm(h,e)})}function co(n,e,t){return{instance:n,listener:e,currentTarget:t}}function ba(n,e){for(var t=e+"Capture",r=[];n!==null;){var i=n,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=ro(n,t),s!=null&&r.unshift(co(n,s,i)),s=ro(n,e),s!=null&&r.push(co(n,s,i))),n=n.return}return r}function Li(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Kd(n,e,t,r,i){for(var s=e._reactName,o=[];t!==null&&t!==r;){var a=t,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=ro(t,s),l!=null&&o.unshift(co(t,l,a))):i||(l=ro(t,s),l!=null&&o.push(co(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var Aw=/\r\n?/g,Iw=/\u0000|\uFFFD/g;function Wd(n){return(typeof n=="string"?n:""+n).replace(Aw,`
`).replace(Iw,"")}function Qo(n,e,t){if(e=Wd(e),Wd(n)!==e&&t)throw Error(C(425))}function Ma(){}var Qu=null,Xu=null;function Zu(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ec=typeof setTimeout=="function"?setTimeout:void 0,Ew=typeof clearTimeout=="function"?clearTimeout:void 0,_d=typeof Promise=="function"?Promise:void 0,xw=typeof queueMicrotask=="function"?queueMicrotask:typeof _d<"u"?function(n){return _d.resolve(null).then(n).catch(Cw)}:ec;function Cw(n){setTimeout(function(){throw n})}function uu(n,e){var t=e,r=0;do{var i=t.nextSibling;if(n.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(r===0){n.removeChild(i),oo(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=i}while(t);oo(e)}function Vr(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function Hd(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var As=Math.random().toString(36).slice(2),Wt="__reactFiber$"+As,fo="__reactProps$"+As,kr="__reactContainer$"+As,tc="__reactEvents$"+As,Nw="__reactListeners$"+As,Pw="__reactHandles$"+As;function hi(n){var e=n[Wt];if(e)return e;for(var t=n.parentNode;t;){if(e=t[kr]||t[Wt]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=Hd(n);n!==null;){if(t=n[Wt])return t;n=Hd(n)}return e}n=t,t=n.parentNode}return null}function Ro(n){return n=n[Wt]||n[kr],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function ji(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(C(33))}function Cl(n){return n[fo]||null}var nc=[],Vi=-1;function ii(n){return{current:n}}function ee(n){0>Vi||(n.current=nc[Vi],nc[Vi]=null,Vi--)}function X(n,e){Vi++,nc[Vi]=n.current,n.current=e}var Zr={},Le=ii(Zr),Ke=ii(!1),Ti=Zr;function os(n,e){var t=n.type.contextTypes;if(!t)return Zr;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in t)i[s]=e[s];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=i),i}function We(n){return n=n.childContextTypes,n!=null}function za(){ee(Ke),ee(Le)}function Gd(n,e,t){if(Le.current!==Zr)throw Error(C(168));X(Le,e),X(Ke,t)}function Im(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(C(108,hv(n)||"Unknown",i));return se({},t,r)}function Fa(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Zr,Ti=Le.current,X(Le,n),X(Ke,Ke.current),!0}function Yd(n,e,t){var r=n.stateNode;if(!r)throw Error(C(169));t?(n=Im(n,e,Ti),r.__reactInternalMemoizedMergedChildContext=n,ee(Ke),ee(Le),X(Le,n)):ee(Ke),X(Ke,t)}var ur=null,Nl=!1,cu=!1;function Em(n){ur===null?ur=[n]:ur.push(n)}function Dw(n){Nl=!0,Em(n)}function si(){if(!cu&&ur!==null){cu=!0;var n=0,e=Y;try{var t=ur;for(Y=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}ur=null,Nl=!1}catch(i){throw ur!==null&&(ur=ur.slice(n+1)),Yg(uf,si),i}finally{Y=e,cu=!1}}return null}var qi=[],Ki=0,Ja=null,$a=0,ot=[],at=0,Ai=null,dr=1,hr="";function ui(n,e){qi[Ki++]=$a,qi[Ki++]=Ja,Ja=n,$a=e}function xm(n,e,t){ot[at++]=dr,ot[at++]=hr,ot[at++]=Ai,Ai=n;var r=dr;n=hr;var i=32-bt(r)-1;r&=~(1<<i),t+=1;var s=32-bt(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,dr=1<<32-bt(e)+i|t<<i|r,hr=s+n}else dr=1<<s|t<<i|r,hr=n}function vf(n){n.return!==null&&(ui(n,1),xm(n,1,0))}function wf(n){for(;n===Ja;)Ja=qi[--Ki],qi[Ki]=null,$a=qi[--Ki],qi[Ki]=null;for(;n===Ai;)Ai=ot[--at],ot[at]=null,hr=ot[--at],ot[at]=null,dr=ot[--at],ot[at]=null}var et=null,Qe=null,te=!1,Rt=null;function Cm(n,e){var t=vt(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function Qd(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,et=n,Qe=Vr(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,et=n,Qe=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Ai!==null?{id:dr,overflow:hr}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=vt(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,et=n,Qe=null,!0):!1;default:return!1}}function rc(n){return(n.mode&1)!==0&&(n.flags&128)===0}function ic(n){if(te){var e=Qe;if(e){var t=e;if(!Qd(n,e)){if(rc(n))throw Error(C(418));e=Vr(t.nextSibling);var r=et;e&&Qd(n,e)?Cm(r,t):(n.flags=n.flags&-4097|2,te=!1,et=n)}}else{if(rc(n))throw Error(C(418));n.flags=n.flags&-4097|2,te=!1,et=n}}}function Xd(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;et=n}function Xo(n){if(n!==et)return!1;if(!te)return Xd(n),te=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!Zu(n.type,n.memoizedProps)),e&&(e=Qe)){if(rc(n))throw Nm(),Error(C(418));for(;e;)Cm(n,e),e=Vr(e.nextSibling)}if(Xd(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(C(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){Qe=Vr(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}Qe=null}}else Qe=et?Vr(n.stateNode.nextSibling):null;return!0}function Nm(){for(var n=Qe;n;)n=Vr(n.nextSibling)}function as(){Qe=et=null,te=!1}function Sf(n){Rt===null?Rt=[n]:Rt.push(n)}var Ow=xr.ReactCurrentBatchConfig;function Pt(n,e){if(n&&n.defaultProps){e=se({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}var Ua=ii(null),ja=null,Wi=null,kf=null;function Tf(){kf=Wi=ja=null}function Af(n){var e=Ua.current;ee(Ua),n._currentValue=e}function sc(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function ts(n,e){ja=n,kf=Wi=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(Ve=!0),n.firstContext=null)}function At(n){var e=n._currentValue;if(kf!==n)if(n={context:n,memoizedValue:e,next:null},Wi===null){if(ja===null)throw Error(C(308));Wi=n,ja.dependencies={lanes:0,firstContext:n}}else Wi=Wi.next=n;return e}var gi=null;function If(n){gi===null?gi=[n]:gi.push(n)}function Pm(n,e,t,r){var i=e.interleaved;return i===null?(t.next=t,If(e)):(t.next=i.next,i.next=t),e.interleaved=t,Tr(n,r)}function Tr(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var Br=!1;function Ef(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Dm(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function yr(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function qr(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,_&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Tr(n,t)}return i=r.interleaved,i===null?(e.next=e,If(r)):(e.next=i.next,i.next=e),r.interleaved=e,Tr(n,t)}function ga(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,cf(n,t)}}function Zd(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var i=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?i=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?i=s=e:s=s.next=e}else i=s=e;t={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function Va(n,e,t,r){var i=n.updateQueue;Br=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var d=n.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(s!==null){var h=i.baseState;o=0,d=c=l=null,a=s;do{var m=a.lane,y=a.eventTime;if((r&m)===m){d!==null&&(d=d.next={eventTime:y,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var w=n,T=a;switch(m=e,y=t,T.tag){case 1:if(w=T.payload,typeof w=="function"){h=w.call(y,h,m);break e}h=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=T.payload,m=typeof w=="function"?w.call(y,h,m):w,m==null)break e;h=se({},h,m);break e;case 2:Br=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,m=i.effects,m===null?i.effects=[a]:m.push(a))}else y={eventTime:y,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=y,l=h):d=d.next=y,o|=m;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;m=a,a=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(!0);if(d===null&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Ei|=o,n.lanes=o,n.memoizedState=h}}function eh(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],i=r.callback;if(i!==null){if(r.callback=null,r=t,typeof i!="function")throw Error(C(191,i));i.call(r)}}}var Om=new Pg.Component().refs;function oc(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:se({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var Pl={isMounted:function(n){return(n=n._reactInternals)?Oi(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=ze(),i=Wr(n),s=yr(r,i);s.payload=e,t!=null&&(s.callback=t),e=qr(n,s,i),e!==null&&(Mt(e,n,i,r),ga(e,n,i))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=ze(),i=Wr(n),s=yr(r,i);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=qr(n,s,i),e!==null&&(Mt(e,n,i,r),ga(e,n,i))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=ze(),r=Wr(n),i=yr(t,r);i.tag=2,e!=null&&(i.callback=e),e=qr(n,i,r),e!==null&&(Mt(e,n,r,t),ga(e,n,r))}};function th(n,e,t,r,i,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!lo(t,r)||!lo(i,s):!0}function Rm(n,e,t){var r=!1,i=Zr,s=e.contextType;return typeof s=="object"&&s!==null?s=At(s):(i=We(e)?Ti:Le.current,r=e.contextTypes,s=(r=r!=null)?os(n,i):Zr),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Pl,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=s),e}function nh(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&Pl.enqueueReplaceState(e,e.state,null)}function ac(n,e,t,r){var i=n.stateNode;i.props=t,i.state=n.memoizedState,i.refs=Om,Ef(n);var s=e.contextType;typeof s=="object"&&s!==null?i.context=At(s):(s=We(e)?Ti:Le.current,i.context=os(n,s)),i.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(oc(n,e,s,t),i.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Pl.enqueueReplaceState(i,i.state,null),Va(n,t,i,r),i.state=n.memoizedState),typeof i.componentDidMount=="function"&&(n.flags|=4194308)}function Ds(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(C(309));var r=t.stateNode}if(!r)throw Error(C(147,n));var i=r,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===Om&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(C(284));if(!t._owner)throw Error(C(290,n))}return n}function Zo(n,e){throw n=Object.prototype.toString.call(e),Error(C(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function rh(n){var e=n._init;return e(n._payload)}function Lm(n){function e(p,g){if(n){var v=p.deletions;v===null?(p.deletions=[g],p.flags|=16):v.push(g)}}function t(p,g){if(!n)return null;for(;g!==null;)e(p,g),g=g.sibling;return null}function r(p,g){for(p=new Map;g!==null;)g.key!==null?p.set(g.key,g):p.set(g.index,g),g=g.sibling;return p}function i(p,g){return p=_r(p,g),p.index=0,p.sibling=null,p}function s(p,g,v){return p.index=v,n?(v=p.alternate,v!==null?(v=v.index,v<g?(p.flags|=2,g):v):(p.flags|=2,g)):(p.flags|=1048576,g)}function o(p){return n&&p.alternate===null&&(p.flags|=2),p}function a(p,g,v,I){return g===null||g.tag!==6?(g=yu(v,p.mode,I),g.return=p,g):(g=i(g,v),g.return=p,g)}function l(p,g,v,I){var E=v.type;return E===Fi?d(p,g,v.props.children,I,v.key):g!==null&&(g.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Lr&&rh(E)===g.type)?(I=i(g,v.props),I.ref=Ds(p,g,v),I.return=p,I):(I=Sa(v.type,v.key,v.props,null,p.mode,I),I.ref=Ds(p,g,v),I.return=p,I)}function c(p,g,v,I){return g===null||g.tag!==4||g.stateNode.containerInfo!==v.containerInfo||g.stateNode.implementation!==v.implementation?(g=vu(v,p.mode,I),g.return=p,g):(g=i(g,v.children||[]),g.return=p,g)}function d(p,g,v,I,E){return g===null||g.tag!==7?(g=wi(v,p.mode,I,E),g.return=p,g):(g=i(g,v),g.return=p,g)}function h(p,g,v){if(typeof g=="string"&&g!==""||typeof g=="number")return g=yu(""+g,p.mode,v),g.return=p,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case jo:return v=Sa(g.type,g.key,g.props,null,p.mode,v),v.ref=Ds(p,null,g),v.return=p,v;case zi:return g=vu(g,p.mode,v),g.return=p,g;case Lr:var I=g._init;return h(p,I(g._payload),v)}if(zs(g)||Es(g))return g=wi(g,p.mode,v,null),g.return=p,g;Zo(p,g)}return null}function m(p,g,v,I){var E=g!==null?g.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return E!==null?null:a(p,g,""+v,I);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case jo:return v.key===E?l(p,g,v,I):null;case zi:return v.key===E?c(p,g,v,I):null;case Lr:return E=v._init,m(p,g,E(v._payload),I)}if(zs(v)||Es(v))return E!==null?null:d(p,g,v,I,null);Zo(p,v)}return null}function y(p,g,v,I,E){if(typeof I=="string"&&I!==""||typeof I=="number")return p=p.get(v)||null,a(g,p,""+I,E);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case jo:return p=p.get(I.key===null?v:I.key)||null,l(g,p,I,E);case zi:return p=p.get(I.key===null?v:I.key)||null,c(g,p,I,E);case Lr:var N=I._init;return y(p,g,v,N(I._payload),E)}if(zs(I)||Es(I))return p=p.get(v)||null,d(g,p,I,E,null);Zo(g,I)}return null}function w(p,g,v,I){for(var E=null,N=null,D=g,R=g=0,W=null;D!==null&&R<v.length;R++){D.index>R?(W=D,D=null):W=D.sibling;var J=m(p,D,v[R],I);if(J===null){D===null&&(D=W);break}n&&D&&J.alternate===null&&e(p,D),g=s(J,g,R),N===null?E=J:N.sibling=J,N=J,D=W}if(R===v.length)return t(p,D),te&&ui(p,R),E;if(D===null){for(;R<v.length;R++)D=h(p,v[R],I),D!==null&&(g=s(D,g,R),N===null?E=D:N.sibling=D,N=D);return te&&ui(p,R),E}for(D=r(p,D);R<v.length;R++)W=y(D,p,R,v[R],I),W!==null&&(n&&W.alternate!==null&&D.delete(W.key===null?R:W.key),g=s(W,g,R),N===null?E=W:N.sibling=W,N=W);return n&&D.forEach(function(Se){return e(p,Se)}),te&&ui(p,R),E}function T(p,g,v,I){var E=Es(v);if(typeof E!="function")throw Error(C(150));if(v=E.call(v),v==null)throw Error(C(151));for(var N=E=null,D=g,R=g=0,W=null,J=v.next();D!==null&&!J.done;R++,J=v.next()){D.index>R?(W=D,D=null):W=D.sibling;var Se=m(p,D,J.value,I);if(Se===null){D===null&&(D=W);break}n&&D&&Se.alternate===null&&e(p,D),g=s(Se,g,R),N===null?E=Se:N.sibling=Se,N=Se,D=W}if(J.done)return t(p,D),te&&ui(p,R),E;if(D===null){for(;!J.done;R++,J=v.next())J=h(p,J.value,I),J!==null&&(g=s(J,g,R),N===null?E=J:N.sibling=J,N=J);return te&&ui(p,R),E}for(D=r(p,D);!J.done;R++,J=v.next())J=y(D,p,R,J.value,I),J!==null&&(n&&J.alternate!==null&&D.delete(J.key===null?R:J.key),g=s(J,g,R),N===null?E=J:N.sibling=J,N=J);return n&&D.forEach(function(Ut){return e(p,Ut)}),te&&ui(p,R),E}function P(p,g,v,I){if(typeof v=="object"&&v!==null&&v.type===Fi&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case jo:e:{for(var E=v.key,N=g;N!==null;){if(N.key===E){if(E=v.type,E===Fi){if(N.tag===7){t(p,N.sibling),g=i(N,v.props.children),g.return=p,p=g;break e}}else if(N.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Lr&&rh(E)===N.type){t(p,N.sibling),g=i(N,v.props),g.ref=Ds(p,N,v),g.return=p,p=g;break e}t(p,N);break}else e(p,N);N=N.sibling}v.type===Fi?(g=wi(v.props.children,p.mode,I,v.key),g.return=p,p=g):(I=Sa(v.type,v.key,v.props,null,p.mode,I),I.ref=Ds(p,g,v),I.return=p,p=I)}return o(p);case zi:e:{for(N=v.key;g!==null;){if(g.key===N)if(g.tag===4&&g.stateNode.containerInfo===v.containerInfo&&g.stateNode.implementation===v.implementation){t(p,g.sibling),g=i(g,v.children||[]),g.return=p,p=g;break e}else{t(p,g);break}else e(p,g);g=g.sibling}g=vu(v,p.mode,I),g.return=p,p=g}return o(p);case Lr:return N=v._init,P(p,g,N(v._payload),I)}if(zs(v))return w(p,g,v,I);if(Es(v))return T(p,g,v,I);Zo(p,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,g!==null&&g.tag===6?(t(p,g.sibling),g=i(g,v),g.return=p,p=g):(t(p,g),g=yu(v,p.mode,I),g.return=p,p=g),o(p)):t(p,g)}return P}var ls=Lm(!0),Bm=Lm(!1),Lo={},sn=ii(Lo),ho=ii(Lo),go=ii(Lo);function mi(n){if(n===Lo)throw Error(C(174));return n}function xf(n,e){switch(X(go,e),X(ho,n),X(sn,Lo),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ju(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=Ju(e,n)}ee(sn),X(sn,e)}function us(){ee(sn),ee(ho),ee(go)}function bm(n){mi(go.current);var e=mi(sn.current),t=Ju(e,n.type);e!==t&&(X(ho,n),X(sn,t))}function Cf(n){ho.current===n&&(ee(sn),ee(ho))}var re=ii(0);function qa(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var fu=[];function Nf(){for(var n=0;n<fu.length;n++)fu[n]._workInProgressVersionPrimary=null;fu.length=0}var ma=xr.ReactCurrentDispatcher,du=xr.ReactCurrentBatchConfig,Ii=0,ie=null,ye=null,Te=null,Ka=!1,Ws=!1,mo=0,Rw=0;function Pe(){throw Error(C(321))}function Pf(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!Jt(n[t],e[t]))return!1;return!0}function Df(n,e,t,r,i,s){if(Ii=s,ie=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ma.current=n===null||n.memoizedState===null?Mw:zw,n=t(r,i),Ws){s=0;do{if(Ws=!1,mo=0,25<=s)throw Error(C(301));s+=1,Te=ye=null,e.updateQueue=null,ma.current=Fw,n=t(r,i)}while(Ws)}if(ma.current=Wa,e=ye!==null&&ye.next!==null,Ii=0,Te=ye=ie=null,Ka=!1,e)throw Error(C(300));return n}function Of(){var n=mo!==0;return mo=0,n}function Vt(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Te===null?ie.memoizedState=Te=n:Te=Te.next=n,Te}function It(){if(ye===null){var n=ie.alternate;n=n!==null?n.memoizedState:null}else n=ye.next;var e=Te===null?ie.memoizedState:Te.next;if(e!==null)Te=e,ye=n;else{if(n===null)throw Error(C(310));ye=n,n={memoizedState:ye.memoizedState,baseState:ye.baseState,baseQueue:ye.baseQueue,queue:ye.queue,next:null},Te===null?ie.memoizedState=Te=n:Te=Te.next=n}return Te}function po(n,e){return typeof e=="function"?e(n):e}function hu(n){var e=It(),t=e.queue;if(t===null)throw Error(C(311));t.lastRenderedReducer=n;var r=ye,i=r.baseQueue,s=t.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,t.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var d=c.lane;if((Ii&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:n(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,ie.lanes|=d,Ei|=d}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,Jt(r,e.memoizedState)||(Ve=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,t.lastRenderedState=r}if(n=t.interleaved,n!==null){i=n;do s=i.lane,ie.lanes|=s,Ei|=s,i=i.next;while(i!==n)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function gu(n){var e=It(),t=e.queue;if(t===null)throw Error(C(311));t.lastRenderedReducer=n;var r=t.dispatch,i=t.pending,s=e.memoizedState;if(i!==null){t.pending=null;var o=i=i.next;do s=n(s,o.action),o=o.next;while(o!==i);Jt(s,e.memoizedState)||(Ve=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,r]}function Mm(){}function zm(n,e){var t=ie,r=It(),i=e(),s=!Jt(r.memoizedState,i);if(s&&(r.memoizedState=i,Ve=!0),r=r.queue,Rf($m.bind(null,t,r,n),[n]),r.getSnapshot!==e||s||Te!==null&&Te.memoizedState.tag&1){if(t.flags|=2048,yo(9,Jm.bind(null,t,r,i,e),void 0,null),Ae===null)throw Error(C(349));Ii&30||Fm(t,e,i)}return i}function Fm(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=ie.updateQueue,e===null?(e={lastEffect:null,stores:null},ie.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function Jm(n,e,t,r){e.value=t,e.getSnapshot=r,Um(e)&&jm(n)}function $m(n,e,t){return t(function(){Um(e)&&jm(n)})}function Um(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Jt(n,t)}catch{return!0}}function jm(n){var e=Tr(n,1);e!==null&&Mt(e,n,1,-1)}function ih(n){var e=Vt();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:po,lastRenderedState:n},e.queue=n,n=n.dispatch=bw.bind(null,ie,n),[e.memoizedState,n]}function yo(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=ie.updateQueue,e===null?(e={lastEffect:null,stores:null},ie.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function Vm(){return It().memoizedState}function pa(n,e,t,r){var i=Vt();ie.flags|=n,i.memoizedState=yo(1|e,t,void 0,r===void 0?null:r)}function Dl(n,e,t,r){var i=It();r=r===void 0?null:r;var s=void 0;if(ye!==null){var o=ye.memoizedState;if(s=o.destroy,r!==null&&Pf(r,o.deps)){i.memoizedState=yo(e,t,s,r);return}}ie.flags|=n,i.memoizedState=yo(1|e,t,s,r)}function sh(n,e){return pa(8390656,8,n,e)}function Rf(n,e){return Dl(2048,8,n,e)}function qm(n,e){return Dl(4,2,n,e)}function Km(n,e){return Dl(4,4,n,e)}function Wm(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function _m(n,e,t){return t=t!=null?t.concat([n]):null,Dl(4,4,Wm.bind(null,e,n),t)}function Lf(){}function Hm(n,e){var t=It();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&Pf(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function Gm(n,e){var t=It();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&Pf(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function Ym(n,e,t){return Ii&21?(Jt(t,e)||(t=Zg(),ie.lanes|=t,Ei|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,Ve=!0),n.memoizedState=t)}function Lw(n,e){var t=Y;Y=t!==0&&4>t?t:4,n(!0);var r=du.transition;du.transition={};try{n(!1),e()}finally{Y=t,du.transition=r}}function Qm(){return It().memoizedState}function Bw(n,e,t){var r=Wr(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},Xm(n))Zm(e,t);else if(t=Pm(n,e,t,r),t!==null){var i=ze();Mt(t,n,r,i),ep(t,e,r)}}function bw(n,e,t){var r=Wr(n),i={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(Xm(n))Zm(e,i);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(i.hasEagerState=!0,i.eagerState=a,Jt(a,o)){var l=e.interleaved;l===null?(i.next=i,If(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}t=Pm(n,e,i,r),t!==null&&(i=ze(),Mt(t,n,r,i),ep(t,e,r))}}function Xm(n){var e=n.alternate;return n===ie||e!==null&&e===ie}function Zm(n,e){Ws=Ka=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function ep(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,cf(n,t)}}var Wa={readContext:At,useCallback:Pe,useContext:Pe,useEffect:Pe,useImperativeHandle:Pe,useInsertionEffect:Pe,useLayoutEffect:Pe,useMemo:Pe,useReducer:Pe,useRef:Pe,useState:Pe,useDebugValue:Pe,useDeferredValue:Pe,useTransition:Pe,useMutableSource:Pe,useSyncExternalStore:Pe,useId:Pe,unstable_isNewReconciler:!1},Mw={readContext:At,useCallback:function(n,e){return Vt().memoizedState=[n,e===void 0?null:e],n},useContext:At,useEffect:sh,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,pa(4194308,4,Wm.bind(null,e,n),t)},useLayoutEffect:function(n,e){return pa(4194308,4,n,e)},useInsertionEffect:function(n,e){return pa(4,2,n,e)},useMemo:function(n,e){var t=Vt();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=Vt();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=Bw.bind(null,ie,n),[r.memoizedState,n]},useRef:function(n){var e=Vt();return n={current:n},e.memoizedState=n},useState:ih,useDebugValue:Lf,useDeferredValue:function(n){return Vt().memoizedState=n},useTransition:function(){var n=ih(!1),e=n[0];return n=Lw.bind(null,n[1]),Vt().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=ie,i=Vt();if(te){if(t===void 0)throw Error(C(407));t=t()}else{if(t=e(),Ae===null)throw Error(C(349));Ii&30||Fm(r,e,t)}i.memoizedState=t;var s={value:t,getSnapshot:e};return i.queue=s,sh($m.bind(null,r,s,n),[n]),r.flags|=2048,yo(9,Jm.bind(null,r,s,t,e),void 0,null),t},useId:function(){var n=Vt(),e=Ae.identifierPrefix;if(te){var t=hr,r=dr;t=(r&~(1<<32-bt(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=mo++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=Rw++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},zw={readContext:At,useCallback:Hm,useContext:At,useEffect:Rf,useImperativeHandle:_m,useInsertionEffect:qm,useLayoutEffect:Km,useMemo:Gm,useReducer:hu,useRef:Vm,useState:function(){return hu(po)},useDebugValue:Lf,useDeferredValue:function(n){var e=It();return Ym(e,ye.memoizedState,n)},useTransition:function(){var n=hu(po)[0],e=It().memoizedState;return[n,e]},useMutableSource:Mm,useSyncExternalStore:zm,useId:Qm,unstable_isNewReconciler:!1},Fw={readContext:At,useCallback:Hm,useContext:At,useEffect:Rf,useImperativeHandle:_m,useInsertionEffect:qm,useLayoutEffect:Km,useMemo:Gm,useReducer:gu,useRef:Vm,useState:function(){return gu(po)},useDebugValue:Lf,useDeferredValue:function(n){var e=It();return ye===null?e.memoizedState=n:Ym(e,ye.memoizedState,n)},useTransition:function(){var n=gu(po)[0],e=It().memoizedState;return[n,e]},useMutableSource:Mm,useSyncExternalStore:zm,useId:Qm,unstable_isNewReconciler:!1};function cs(n,e){try{var t="",r=e;do t+=dv(r),r=r.return;while(r);var i=t}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:i,digest:null}}function mu(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function lc(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var Jw=typeof WeakMap=="function"?WeakMap:Map;function tp(n,e,t){t=yr(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){Ha||(Ha=!0,vc=r),lc(n,e)},t}function np(n,e,t){t=yr(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;t.payload=function(){return r(i)},t.callback=function(){lc(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){lc(n,e),typeof r!="function"&&(Kr===null?Kr=new Set([this]):Kr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function oh(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new Jw;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(t)||(i.add(t),n=Zw.bind(null,n,e,t),e.then(n,n))}function ah(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function lh(n,e,t,r,i){return n.mode&1?(n.flags|=65536,n.lanes=i,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=yr(-1,1),e.tag=2,qr(t,e,1))),t.lanes|=1),n)}var $w=xr.ReactCurrentOwner,Ve=!1;function be(n,e,t,r){e.child=n===null?Bm(e,null,t,r):ls(e,n.child,t,r)}function uh(n,e,t,r,i){t=t.render;var s=e.ref;return ts(e,i),r=Df(n,e,t,r,s,i),t=Of(),n!==null&&!Ve?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Ar(n,e,i)):(te&&t&&vf(e),e.flags|=1,be(n,e,r,i),e.child)}function ch(n,e,t,r,i){if(n===null){var s=t.type;return typeof s=="function"&&!Uf(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,rp(n,e,s,r,i)):(n=Sa(t.type,null,r,e,e.mode,i),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&i)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:lo,t(o,r)&&n.ref===e.ref)return Ar(n,e,i)}return e.flags|=1,n=_r(s,r),n.ref=e.ref,n.return=e,e.child=n}function rp(n,e,t,r,i){if(n!==null){var s=n.memoizedProps;if(lo(s,r)&&n.ref===e.ref)if(Ve=!1,e.pendingProps=r=s,(n.lanes&i)!==0)n.flags&131072&&(Ve=!0);else return e.lanes=n.lanes,Ar(n,e,i)}return uc(n,e,t,r,i)}function ip(n,e,t){var r=e.pendingProps,i=r.children,s=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},X(Hi,Ye),Ye|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,X(Hi,Ye),Ye|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:t,X(Hi,Ye),Ye|=r}else s!==null?(r=s.baseLanes|t,e.memoizedState=null):r=t,X(Hi,Ye),Ye|=r;return be(n,e,i,t),e.child}function sp(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function uc(n,e,t,r,i){var s=We(t)?Ti:Le.current;return s=os(e,s),ts(e,i),t=Df(n,e,t,r,s,i),r=Of(),n!==null&&!Ve?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Ar(n,e,i)):(te&&r&&vf(e),e.flags|=1,be(n,e,t,i),e.child)}function fh(n,e,t,r,i){if(We(t)){var s=!0;Fa(e)}else s=!1;if(ts(e,i),e.stateNode===null)ya(n,e),Rm(e,t,r),ac(e,t,r,i),r=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=t.contextType;typeof c=="object"&&c!==null?c=At(c):(c=We(t)?Ti:Le.current,c=os(e,c));var d=t.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&nh(e,o,r,c),Br=!1;var m=e.memoizedState;o.state=m,Va(e,r,o,i),l=e.memoizedState,a!==r||m!==l||Ke.current||Br?(typeof d=="function"&&(oc(e,t,d,r),l=e.memoizedState),(a=Br||th(e,t,a,r,m,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Dm(n,e),a=e.memoizedProps,c=e.type===e.elementType?a:Pt(e.type,a),o.props=c,h=e.pendingProps,m=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=At(l):(l=We(t)?Ti:Le.current,l=os(e,l));var y=t.getDerivedStateFromProps;(d=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||m!==l)&&nh(e,o,r,l),Br=!1,m=e.memoizedState,o.state=m,Va(e,r,o,i);var w=e.memoizedState;a!==h||m!==w||Ke.current||Br?(typeof y=="function"&&(oc(e,t,y,r),w=e.memoizedState),(c=Br||th(e,t,c,r,m,w,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,w,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,w,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&m===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&m===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=w),o.props=r,o.state=w,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&m===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&m===n.memoizedState||(e.flags|=1024),r=!1)}return cc(n,e,t,r,s,i)}function cc(n,e,t,r,i,s){sp(n,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Yd(e,t,!1),Ar(n,e,s);r=e.stateNode,$w.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&o?(e.child=ls(e,n.child,null,s),e.child=ls(e,null,a,s)):be(n,e,a,s),e.memoizedState=r.state,i&&Yd(e,t,!0),e.child}function op(n){var e=n.stateNode;e.pendingContext?Gd(n,e.pendingContext,e.pendingContext!==e.context):e.context&&Gd(n,e.context,!1),xf(n,e.containerInfo)}function dh(n,e,t,r,i){return as(),Sf(i),e.flags|=256,be(n,e,t,r),e.child}var fc={dehydrated:null,treeContext:null,retryLane:0};function dc(n){return{baseLanes:n,cachePool:null,transitions:null}}function ap(n,e,t){var r=e.pendingProps,i=re.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(i|=1),X(re,i&1),n===null)return ic(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,n=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Ll(o,r,0,null),n=wi(n,r,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=dc(t),e.memoizedState=fc,n):Bf(e,o));if(i=n.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return Uw(n,e,o,r,a,i,t);if(s){s=r.fallback,o=e.mode,i=n.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=_r(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=_r(a,s):(s=wi(s,o,t,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=n.child.memoizedState,o=o===null?dc(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=fc,r}return s=n.child,n=s.sibling,r=_r(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function Bf(n,e){return e=Ll({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function ea(n,e,t,r){return r!==null&&Sf(r),ls(e,n.child,null,t),n=Bf(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function Uw(n,e,t,r,i,s,o){if(t)return e.flags&256?(e.flags&=-257,r=mu(Error(C(422))),ea(n,e,o,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Ll({mode:"visible",children:r.children},i,0,null),s=wi(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&ls(e,n.child,null,o),e.child.memoizedState=dc(o),e.memoizedState=fc,s);if(!(e.mode&1))return ea(n,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(C(419)),r=mu(s,r,void 0),ea(n,e,o,r)}if(a=(o&n.childLanes)!==0,Ve||a){if(r=Ae,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Tr(n,i),Mt(r,n,i,-1))}return $f(),r=mu(Error(C(421))),ea(n,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=n.child,e=e0.bind(null,n),i._reactRetry=e,null):(n=s.treeContext,Qe=Vr(i.nextSibling),et=e,te=!0,Rt=null,n!==null&&(ot[at++]=dr,ot[at++]=hr,ot[at++]=Ai,dr=n.id,hr=n.overflow,Ai=e),e=Bf(e,r.children),e.flags|=4096,e)}function hh(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),sc(n.return,e,t)}function pu(n,e,t,r,i){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=t,s.tailMode=i)}function lp(n,e,t){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(be(n,e,r.children,t),r=re.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&hh(n,t,e);else if(n.tag===19)hh(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(X(re,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)n=t.alternate,n!==null&&qa(n)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),pu(e,!1,i,t,s);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(n=i.alternate,n!==null&&qa(n)===null){e.child=i;break}n=i.sibling,i.sibling=t,t=i,i=n}pu(e,!0,t,null,s);break;case"together":pu(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ya(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Ar(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),Ei|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(C(153));if(e.child!==null){for(n=e.child,t=_r(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=_r(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function jw(n,e,t){switch(e.tag){case 3:op(e),as();break;case 5:bm(e);break;case 1:We(e.type)&&Fa(e);break;case 4:xf(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;X(Ua,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(X(re,re.current&1),e.flags|=128,null):t&e.child.childLanes?ap(n,e,t):(X(re,re.current&1),n=Ar(n,e,t),n!==null?n.sibling:null);X(re,re.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return lp(n,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),X(re,re.current),r)break;return null;case 22:case 23:return e.lanes=0,ip(n,e,t)}return Ar(n,e,t)}var up,hc,cp,fp;up=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};hc=function(){};cp=function(n,e,t,r){var i=n.memoizedProps;if(i!==r){n=e.stateNode,mi(sn.current);var s=null;switch(t){case"input":i=bu(n,i),r=bu(n,r),s=[];break;case"select":i=se({},i,{value:void 0}),r=se({},r,{value:void 0}),s=[];break;case"textarea":i=Fu(n,i),r=Fu(n,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=Ma)}$u(t,r);var o;t=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(to.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(s||(s=[]),s.push(c,t)),t=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(to.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Z("scroll",n),s||a===l||(s=[])):(s=s||[]).push(c,l))}t&&(s=s||[]).push("style",t);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};fp=function(n,e,t,r){t!==r&&(e.flags|=4)};function Os(n,e){if(!te)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function De(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=n,i=i.sibling;else for(i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=n,i=i.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function Vw(n,e,t){var r=e.pendingProps;switch(wf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return De(e),null;case 1:return We(e.type)&&za(),De(e),null;case 3:return r=e.stateNode,us(),ee(Ke),ee(Le),Nf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(Xo(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Rt!==null&&(kc(Rt),Rt=null))),hc(n,e),De(e),null;case 5:Cf(e);var i=mi(go.current);if(t=e.type,n!==null&&e.stateNode!=null)cp(n,e,t,r,i),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(C(166));return De(e),null}if(n=mi(sn.current),Xo(e)){r=e.stateNode,t=e.type;var s=e.memoizedProps;switch(r[Wt]=e,r[fo]=s,n=(e.mode&1)!==0,t){case"dialog":Z("cancel",r),Z("close",r);break;case"iframe":case"object":case"embed":Z("load",r);break;case"video":case"audio":for(i=0;i<Js.length;i++)Z(Js[i],r);break;case"source":Z("error",r);break;case"img":case"image":case"link":Z("error",r),Z("load",r);break;case"details":Z("toggle",r);break;case"input":Td(r,s),Z("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Z("invalid",r);break;case"textarea":Id(r,s),Z("invalid",r)}$u(t,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Qo(r.textContent,a,n),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Qo(r.textContent,a,n),i=["children",""+a]):to.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Z("scroll",r)}switch(t){case"input":Vo(r),Ad(r,s,!0);break;case"textarea":Vo(r),Ed(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Ma)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Fg(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=o.createElement(t,{is:r.is}):(n=o.createElement(t),t==="select"&&(o=n,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):n=o.createElementNS(n,t),n[Wt]=e,n[fo]=r,up(n,e,!1,!1),e.stateNode=n;e:{switch(o=Uu(t,r),t){case"dialog":Z("cancel",n),Z("close",n),i=r;break;case"iframe":case"object":case"embed":Z("load",n),i=r;break;case"video":case"audio":for(i=0;i<Js.length;i++)Z(Js[i],n);i=r;break;case"source":Z("error",n),i=r;break;case"img":case"image":case"link":Z("error",n),Z("load",n),i=r;break;case"details":Z("toggle",n),i=r;break;case"input":Td(n,r),i=bu(n,r),Z("invalid",n);break;case"option":i=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},i=se({},r,{value:void 0}),Z("invalid",n);break;case"textarea":Id(n,r),i=Fu(n,r),Z("invalid",n);break;default:i=r}$u(t,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?Ug(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Jg(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&no(n,l):typeof l=="number"&&no(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(to.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Z("scroll",n):l!=null&&rf(n,s,l,o))}switch(t){case"input":Vo(n),Ad(n,r,!1);break;case"textarea":Vo(n),Ed(n);break;case"option":r.value!=null&&n.setAttribute("value",""+Xr(r.value));break;case"select":n.multiple=!!r.multiple,s=r.value,s!=null?Qi(n,!!r.multiple,s,!1):r.defaultValue!=null&&Qi(n,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(n.onclick=Ma)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return De(e),null;case 6:if(n&&e.stateNode!=null)fp(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(C(166));if(t=mi(go.current),mi(sn.current),Xo(e)){if(r=e.stateNode,t=e.memoizedProps,r[Wt]=e,(s=r.nodeValue!==t)&&(n=et,n!==null))switch(n.tag){case 3:Qo(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Qo(r.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[Wt]=e,e.stateNode=r}return De(e),null;case 13:if(ee(re),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(te&&Qe!==null&&e.mode&1&&!(e.flags&128))Nm(),as(),e.flags|=98560,s=!1;else if(s=Xo(e),r!==null&&r.dehydrated!==null){if(n===null){if(!s)throw Error(C(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(C(317));s[Wt]=e}else as(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;De(e),s=!1}else Rt!==null&&(kc(Rt),Rt=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(n===null||re.current&1?we===0&&(we=3):$f())),e.updateQueue!==null&&(e.flags|=4),De(e),null);case 4:return us(),hc(n,e),n===null&&uo(e.stateNode.containerInfo),De(e),null;case 10:return Af(e.type._context),De(e),null;case 17:return We(e.type)&&za(),De(e),null;case 19:if(ee(re),s=e.memoizedState,s===null)return De(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Os(s,!1);else{if(we!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=qa(n),o!==null){for(e.flags|=128,Os(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)s=t,n=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return X(re,re.current&1|2),e.child}n=n.sibling}s.tail!==null&&he()>fs&&(e.flags|=128,r=!0,Os(s,!1),e.lanes=4194304)}else{if(!r)if(n=qa(o),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Os(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!te)return De(e),null}else 2*he()-s.renderingStartTime>fs&&t!==1073741824&&(e.flags|=128,r=!0,Os(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=he(),e.sibling=null,t=re.current,X(re,r?t&1|2:t&1),e):(De(e),null);case 22:case 23:return Jf(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ye&1073741824&&(De(e),e.subtreeFlags&6&&(e.flags|=8192)):De(e),null;case 24:return null;case 25:return null}throw Error(C(156,e.tag))}function qw(n,e){switch(wf(e),e.tag){case 1:return We(e.type)&&za(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return us(),ee(Ke),ee(Le),Nf(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return Cf(e),null;case 13:if(ee(re),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(C(340));as()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return ee(re),null;case 4:return us(),null;case 10:return Af(e.type._context),null;case 22:case 23:return Jf(),null;case 24:return null;default:return null}}var ta=!1,Oe=!1,Kw=typeof WeakSet=="function"?WeakSet:Set,L=null;function _i(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){ae(n,e,r)}else t.current=null}function gc(n,e,t){try{t()}catch(r){ae(n,e,r)}}var gh=!1;function Ww(n,e){if(Qu=La,n=mm(),yf(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,c=0,d=0,h=n,m=null;t:for(;;){for(var y;h!==t||i!==0&&h.nodeType!==3||(a=o+i),h!==s||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(y=h.firstChild)!==null;)m=h,h=y;for(;;){if(h===n)break t;if(m===t&&++c===i&&(a=o),m===s&&++d===r&&(l=o),(y=h.nextSibling)!==null)break;h=m,m=h.parentNode}h=y}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(Xu={focusedElem:n,selectionRange:t},La=!1,L=e;L!==null;)if(e=L,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,L=n;else for(;L!==null;){e=L;try{var w=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var T=w.memoizedProps,P=w.memoizedState,p=e.stateNode,g=p.getSnapshotBeforeUpdate(e.elementType===e.type?T:Pt(e.type,T),P);p.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(C(163))}}catch(I){ae(e,e.return,I)}if(n=e.sibling,n!==null){n.return=e.return,L=n;break}L=e.return}return w=gh,gh=!1,w}function _s(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&n)===n){var s=i.destroy;i.destroy=void 0,s!==void 0&&gc(e,t,s)}i=i.next}while(i!==r)}}function Ol(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function mc(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function dp(n){var e=n.alternate;e!==null&&(n.alternate=null,dp(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Wt],delete e[fo],delete e[tc],delete e[Nw],delete e[Pw])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function hp(n){return n.tag===5||n.tag===3||n.tag===4}function mh(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||hp(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function pc(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=Ma));else if(r!==4&&(n=n.child,n!==null))for(pc(n,e,t),n=n.sibling;n!==null;)pc(n,e,t),n=n.sibling}function yc(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(yc(n,e,t),n=n.sibling;n!==null;)yc(n,e,t),n=n.sibling}var Ie=null,Ot=!1;function Nr(n,e,t){for(t=t.child;t!==null;)gp(n,e,t),t=t.sibling}function gp(n,e,t){if(rn&&typeof rn.onCommitFiberUnmount=="function")try{rn.onCommitFiberUnmount(Al,t)}catch{}switch(t.tag){case 5:Oe||_i(t,e);case 6:var r=Ie,i=Ot;Ie=null,Nr(n,e,t),Ie=r,Ot=i,Ie!==null&&(Ot?(n=Ie,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):Ie.removeChild(t.stateNode));break;case 18:Ie!==null&&(Ot?(n=Ie,t=t.stateNode,n.nodeType===8?uu(n.parentNode,t):n.nodeType===1&&uu(n,t),oo(n)):uu(Ie,t.stateNode));break;case 4:r=Ie,i=Ot,Ie=t.stateNode.containerInfo,Ot=!0,Nr(n,e,t),Ie=r,Ot=i;break;case 0:case 11:case 14:case 15:if(!Oe&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&gc(t,e,o),i=i.next}while(i!==r)}Nr(n,e,t);break;case 1:if(!Oe&&(_i(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(a){ae(t,e,a)}Nr(n,e,t);break;case 21:Nr(n,e,t);break;case 22:t.mode&1?(Oe=(r=Oe)||t.memoizedState!==null,Nr(n,e,t),Oe=r):Nr(n,e,t);break;default:Nr(n,e,t)}}function ph(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new Kw),e.forEach(function(r){var i=t0.bind(null,n,r);t.has(r)||(t.add(r),r.then(i,i))})}}function Nt(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var i=t[r];try{var s=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Ie=a.stateNode,Ot=!1;break e;case 3:Ie=a.stateNode.containerInfo,Ot=!0;break e;case 4:Ie=a.stateNode.containerInfo,Ot=!0;break e}a=a.return}if(Ie===null)throw Error(C(160));gp(s,o,i),Ie=null,Ot=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){ae(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)mp(e,n),e=e.sibling}function mp(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Nt(e,n),jt(n),r&4){try{_s(3,n,n.return),Ol(3,n)}catch(T){ae(n,n.return,T)}try{_s(5,n,n.return)}catch(T){ae(n,n.return,T)}}break;case 1:Nt(e,n),jt(n),r&512&&t!==null&&_i(t,t.return);break;case 5:if(Nt(e,n),jt(n),r&512&&t!==null&&_i(t,t.return),n.flags&32){var i=n.stateNode;try{no(i,"")}catch(T){ae(n,n.return,T)}}if(r&4&&(i=n.stateNode,i!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&Mg(i,s),Uu(a,o);var c=Uu(a,s);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?Ug(i,h):d==="dangerouslySetInnerHTML"?Jg(i,h):d==="children"?no(i,h):rf(i,d,h,c)}switch(a){case"input":Mu(i,s);break;case"textarea":zg(i,s);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var y=s.value;y!=null?Qi(i,!!s.multiple,y,!1):m!==!!s.multiple&&(s.defaultValue!=null?Qi(i,!!s.multiple,s.defaultValue,!0):Qi(i,!!s.multiple,s.multiple?[]:"",!1))}i[fo]=s}catch(T){ae(n,n.return,T)}}break;case 6:if(Nt(e,n),jt(n),r&4){if(n.stateNode===null)throw Error(C(162));i=n.stateNode,s=n.memoizedProps;try{i.nodeValue=s}catch(T){ae(n,n.return,T)}}break;case 3:if(Nt(e,n),jt(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{oo(e.containerInfo)}catch(T){ae(n,n.return,T)}break;case 4:Nt(e,n),jt(n);break;case 13:Nt(e,n),jt(n),i=n.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(zf=he())),r&4&&ph(n);break;case 22:if(d=t!==null&&t.memoizedState!==null,n.mode&1?(Oe=(c=Oe)||d,Nt(e,n),Oe=c):Nt(e,n),jt(n),r&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!d&&n.mode&1)for(L=n,d=n.child;d!==null;){for(h=L=d;L!==null;){switch(m=L,y=m.child,m.tag){case 0:case 11:case 14:case 15:_s(4,m,m.return);break;case 1:_i(m,m.return);var w=m.stateNode;if(typeof w.componentWillUnmount=="function"){r=m,t=m.return;try{e=r,w.props=e.memoizedProps,w.state=e.memoizedState,w.componentWillUnmount()}catch(T){ae(r,t,T)}}break;case 5:_i(m,m.return);break;case 22:if(m.memoizedState!==null){vh(h);continue}}y!==null?(y.return=m,L=y):vh(h)}d=d.sibling}e:for(d=null,h=n;;){if(h.tag===5){if(d===null){d=h;try{i=h.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=$g("display",o))}catch(T){ae(n,n.return,T)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(T){ae(n,n.return,T)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===n)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===n)break e;for(;h.sibling===null;){if(h.return===null||h.return===n)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Nt(e,n),jt(n),r&4&&ph(n);break;case 21:break;default:Nt(e,n),jt(n)}}function jt(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(hp(t)){var r=t;break e}t=t.return}throw Error(C(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(no(i,""),r.flags&=-33);var s=mh(n);yc(n,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=mh(n);pc(n,a,o);break;default:throw Error(C(161))}}catch(l){ae(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function _w(n,e,t){L=n,pp(n)}function pp(n,e,t){for(var r=(n.mode&1)!==0;L!==null;){var i=L,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||ta;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Oe;a=ta;var c=Oe;if(ta=o,(Oe=l)&&!c)for(L=i;L!==null;)o=L,l=o.child,o.tag===22&&o.memoizedState!==null?wh(i):l!==null?(l.return=o,L=l):wh(i);for(;s!==null;)L=s,pp(s),s=s.sibling;L=i,ta=a,Oe=c}yh(n)}else i.subtreeFlags&8772&&s!==null?(s.return=i,L=s):yh(n)}}function yh(n){for(;L!==null;){var e=L;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Oe||Ol(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Oe)if(t===null)r.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:Pt(e.type,t.memoizedProps);r.componentDidUpdate(i,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&eh(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}eh(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&oo(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(C(163))}Oe||e.flags&512&&mc(e)}catch(m){ae(e,e.return,m)}}if(e===n){L=null;break}if(t=e.sibling,t!==null){t.return=e.return,L=t;break}L=e.return}}function vh(n){for(;L!==null;){var e=L;if(e===n){L=null;break}var t=e.sibling;if(t!==null){t.return=e.return,L=t;break}L=e.return}}function wh(n){for(;L!==null;){var e=L;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{Ol(4,e)}catch(l){ae(e,t,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){ae(e,i,l)}}var s=e.return;try{mc(e)}catch(l){ae(e,s,l)}break;case 5:var o=e.return;try{mc(e)}catch(l){ae(e,o,l)}}}catch(l){ae(e,e.return,l)}if(e===n){L=null;break}var a=e.sibling;if(a!==null){a.return=e.return,L=a;break}L=e.return}}var Hw=Math.ceil,_a=xr.ReactCurrentDispatcher,bf=xr.ReactCurrentOwner,kt=xr.ReactCurrentBatchConfig,_=0,Ae=null,pe=null,xe=0,Ye=0,Hi=ii(0),we=0,vo=null,Ei=0,Rl=0,Mf=0,Hs=null,$e=null,zf=0,fs=1/0,un=null,Ha=!1,vc=null,Kr=null,na=!1,Fr=null,Ga=0,Gs=0,wc=null,va=-1,wa=0;function ze(){return _&6?he():va!==-1?va:va=he()}function Wr(n){return n.mode&1?_&2&&xe!==0?xe&-xe:Ow.transition!==null?(wa===0&&(wa=Zg()),wa):(n=Y,n!==0||(n=window.event,n=n===void 0?16:om(n.type)),n):1}function Mt(n,e,t,r){if(50<Gs)throw Gs=0,wc=null,Error(C(185));Do(n,t,r),(!(_&2)||n!==Ae)&&(n===Ae&&(!(_&2)&&(Rl|=t),we===4&&Mr(n,xe)),_e(n,r),t===1&&_===0&&!(e.mode&1)&&(fs=he()+500,Nl&&si()))}function _e(n,e){var t=n.callbackNode;Ov(n,e);var r=Ra(n,n===Ae?xe:0);if(r===0)t!==null&&Nd(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&Nd(t),e===1)n.tag===0?Dw(Sh.bind(null,n)):Em(Sh.bind(null,n)),xw(function(){!(_&6)&&si()}),t=null;else{switch(em(r)){case 1:t=uf;break;case 4:t=Qg;break;case 16:t=Oa;break;case 536870912:t=Xg;break;default:t=Oa}t=Ip(t,yp.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function yp(n,e){if(va=-1,wa=0,_&6)throw Error(C(327));var t=n.callbackNode;if(ns()&&n.callbackNode!==t)return null;var r=Ra(n,n===Ae?xe:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=Ya(n,r);else{e=r;var i=_;_|=2;var s=wp();(Ae!==n||xe!==e)&&(un=null,fs=he()+500,vi(n,e));do try{Qw();break}catch(a){vp(n,a)}while(!0);Tf(),_a.current=s,_=i,pe!==null?e=0:(Ae=null,xe=0,e=we)}if(e!==0){if(e===2&&(i=Wu(n),i!==0&&(r=i,e=Sc(n,i))),e===1)throw t=vo,vi(n,0),Mr(n,r),_e(n,he()),t;if(e===6)Mr(n,r);else{if(i=n.current.alternate,!(r&30)&&!Gw(i)&&(e=Ya(n,r),e===2&&(s=Wu(n),s!==0&&(r=s,e=Sc(n,s))),e===1))throw t=vo,vi(n,0),Mr(n,r),_e(n,he()),t;switch(n.finishedWork=i,n.finishedLanes=r,e){case 0:case 1:throw Error(C(345));case 2:ci(n,$e,un);break;case 3:if(Mr(n,r),(r&130023424)===r&&(e=zf+500-he(),10<e)){if(Ra(n,0)!==0)break;if(i=n.suspendedLanes,(i&r)!==r){ze(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=ec(ci.bind(null,n,$e,un),e);break}ci(n,$e,un);break;case 4:if(Mr(n,r),(r&4194240)===r)break;for(e=n.eventTimes,i=-1;0<r;){var o=31-bt(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=he()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Hw(r/1960))-r,10<r){n.timeoutHandle=ec(ci.bind(null,n,$e,un),r);break}ci(n,$e,un);break;case 5:ci(n,$e,un);break;default:throw Error(C(329))}}}return _e(n,he()),n.callbackNode===t?yp.bind(null,n):null}function Sc(n,e){var t=Hs;return n.current.memoizedState.isDehydrated&&(vi(n,e).flags|=256),n=Ya(n,e),n!==2&&(e=$e,$e=t,e!==null&&kc(e)),n}function kc(n){$e===null?$e=n:$e.push.apply($e,n)}function Gw(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var i=t[r],s=i.getSnapshot;i=i.value;try{if(!Jt(s(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Mr(n,e){for(e&=~Mf,e&=~Rl,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-bt(e),r=1<<t;n[t]=-1,e&=~r}}function Sh(n){if(_&6)throw Error(C(327));ns();var e=Ra(n,0);if(!(e&1))return _e(n,he()),null;var t=Ya(n,e);if(n.tag!==0&&t===2){var r=Wu(n);r!==0&&(e=r,t=Sc(n,r))}if(t===1)throw t=vo,vi(n,0),Mr(n,e),_e(n,he()),t;if(t===6)throw Error(C(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,ci(n,$e,un),_e(n,he()),null}function Ff(n,e){var t=_;_|=1;try{return n(e)}finally{_=t,_===0&&(fs=he()+500,Nl&&si())}}function xi(n){Fr!==null&&Fr.tag===0&&!(_&6)&&ns();var e=_;_|=1;var t=kt.transition,r=Y;try{if(kt.transition=null,Y=1,n)return n()}finally{Y=r,kt.transition=t,_=e,!(_&6)&&si()}}function Jf(){Ye=Hi.current,ee(Hi)}function vi(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,Ew(t)),pe!==null)for(t=pe.return;t!==null;){var r=t;switch(wf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&za();break;case 3:us(),ee(Ke),ee(Le),Nf();break;case 5:Cf(r);break;case 4:us();break;case 13:ee(re);break;case 19:ee(re);break;case 10:Af(r.type._context);break;case 22:case 23:Jf()}t=t.return}if(Ae=n,pe=n=_r(n.current,null),xe=Ye=e,we=0,vo=null,Mf=Rl=Ei=0,$e=Hs=null,gi!==null){for(e=0;e<gi.length;e++)if(t=gi[e],r=t.interleaved,r!==null){t.interleaved=null;var i=r.next,s=t.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}t.pending=r}gi=null}return n}function vp(n,e){do{var t=pe;try{if(Tf(),ma.current=Wa,Ka){for(var r=ie.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Ka=!1}if(Ii=0,Te=ye=ie=null,Ws=!1,mo=0,bf.current=null,t===null||t.return===null){we=1,vo=e,pe=null;break}e:{var s=n,o=t.return,a=t,l=e;if(e=xe,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var y=ah(o);if(y!==null){y.flags&=-257,lh(y,o,a,s,e),y.mode&1&&oh(s,c,e),e=y,l=c;var w=e.updateQueue;if(w===null){var T=new Set;T.add(l),e.updateQueue=T}else w.add(l);break e}else{if(!(e&1)){oh(s,c,e),$f();break e}l=Error(C(426))}}else if(te&&a.mode&1){var P=ah(o);if(P!==null){!(P.flags&65536)&&(P.flags|=256),lh(P,o,a,s,e),Sf(cs(l,a));break e}}s=l=cs(l,a),we!==4&&(we=2),Hs===null?Hs=[s]:Hs.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var p=tp(s,l,e);Zd(s,p);break e;case 1:a=l;var g=s.type,v=s.stateNode;if(!(s.flags&128)&&(typeof g.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Kr===null||!Kr.has(v)))){s.flags|=65536,e&=-e,s.lanes|=e;var I=np(s,a,e);Zd(s,I);break e}}s=s.return}while(s!==null)}kp(t)}catch(E){e=E,pe===t&&t!==null&&(pe=t=t.return);continue}break}while(!0)}function wp(){var n=_a.current;return _a.current=Wa,n===null?Wa:n}function $f(){(we===0||we===3||we===2)&&(we=4),Ae===null||!(Ei&268435455)&&!(Rl&268435455)||Mr(Ae,xe)}function Ya(n,e){var t=_;_|=2;var r=wp();(Ae!==n||xe!==e)&&(un=null,vi(n,e));do try{Yw();break}catch(i){vp(n,i)}while(!0);if(Tf(),_=t,_a.current=r,pe!==null)throw Error(C(261));return Ae=null,xe=0,we}function Yw(){for(;pe!==null;)Sp(pe)}function Qw(){for(;pe!==null&&!Tv();)Sp(pe)}function Sp(n){var e=Ap(n.alternate,n,Ye);n.memoizedProps=n.pendingProps,e===null?kp(n):pe=e,bf.current=null}function kp(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=qw(t,e),t!==null){t.flags&=32767,pe=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{we=6,pe=null;return}}else if(t=Vw(t,e,Ye),t!==null){pe=t;return}if(e=e.sibling,e!==null){pe=e;return}pe=e=n}while(e!==null);we===0&&(we=5)}function ci(n,e,t){var r=Y,i=kt.transition;try{kt.transition=null,Y=1,Xw(n,e,t,r)}finally{kt.transition=i,Y=r}return null}function Xw(n,e,t,r){do ns();while(Fr!==null);if(_&6)throw Error(C(327));t=n.finishedWork;var i=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(C(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(Rv(n,s),n===Ae&&(pe=Ae=null,xe=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||na||(na=!0,Ip(Oa,function(){return ns(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=kt.transition,kt.transition=null;var o=Y;Y=1;var a=_;_|=4,bf.current=null,Ww(n,t),mp(t,n),vw(Xu),La=!!Qu,Xu=Qu=null,n.current=t,_w(t),Av(),_=a,Y=o,kt.transition=s}else n.current=t;if(na&&(na=!1,Fr=n,Ga=i),s=n.pendingLanes,s===0&&(Kr=null),xv(t.stateNode),_e(n,he()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)i=e[t],r(i.value,{componentStack:i.stack,digest:i.digest});if(Ha)throw Ha=!1,n=vc,vc=null,n;return Ga&1&&n.tag!==0&&ns(),s=n.pendingLanes,s&1?n===wc?Gs++:(Gs=0,wc=n):Gs=0,si(),null}function ns(){if(Fr!==null){var n=em(Ga),e=kt.transition,t=Y;try{if(kt.transition=null,Y=16>n?16:n,Fr===null)var r=!1;else{if(n=Fr,Fr=null,Ga=0,_&6)throw Error(C(331));var i=_;for(_|=4,L=n.current;L!==null;){var s=L,o=s.child;if(L.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(L=c;L!==null;){var d=L;switch(d.tag){case 0:case 11:case 15:_s(8,d,s)}var h=d.child;if(h!==null)h.return=d,L=h;else for(;L!==null;){d=L;var m=d.sibling,y=d.return;if(dp(d),d===c){L=null;break}if(m!==null){m.return=y,L=m;break}L=y}}}var w=s.alternate;if(w!==null){var T=w.child;if(T!==null){w.child=null;do{var P=T.sibling;T.sibling=null,T=P}while(T!==null)}}L=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,L=o;else e:for(;L!==null;){if(s=L,s.flags&2048)switch(s.tag){case 0:case 11:case 15:_s(9,s,s.return)}var p=s.sibling;if(p!==null){p.return=s.return,L=p;break e}L=s.return}}var g=n.current;for(L=g;L!==null;){o=L;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,L=v;else e:for(o=g;L!==null;){if(a=L,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Ol(9,a)}}catch(E){ae(a,a.return,E)}if(a===o){L=null;break e}var I=a.sibling;if(I!==null){I.return=a.return,L=I;break e}L=a.return}}if(_=i,si(),rn&&typeof rn.onPostCommitFiberRoot=="function")try{rn.onPostCommitFiberRoot(Al,n)}catch{}r=!0}return r}finally{Y=t,kt.transition=e}}return!1}function kh(n,e,t){e=cs(t,e),e=tp(n,e,1),n=qr(n,e,1),e=ze(),n!==null&&(Do(n,1,e),_e(n,e))}function ae(n,e,t){if(n.tag===3)kh(n,n,t);else for(;e!==null;){if(e.tag===3){kh(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Kr===null||!Kr.has(r))){n=cs(t,n),n=np(e,n,1),e=qr(e,n,1),n=ze(),e!==null&&(Do(e,1,n),_e(e,n));break}}e=e.return}}function Zw(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=ze(),n.pingedLanes|=n.suspendedLanes&t,Ae===n&&(xe&t)===t&&(we===4||we===3&&(xe&130023424)===xe&&500>he()-zf?vi(n,0):Mf|=t),_e(n,e)}function Tp(n,e){e===0&&(n.mode&1?(e=Wo,Wo<<=1,!(Wo&130023424)&&(Wo=4194304)):e=1);var t=ze();n=Tr(n,e),n!==null&&(Do(n,e,t),_e(n,t))}function e0(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),Tp(n,t)}function t0(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,i=n.memoizedState;i!==null&&(t=i.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(C(314))}r!==null&&r.delete(e),Tp(n,t)}var Ap;Ap=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||Ke.current)Ve=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return Ve=!1,jw(n,e,t);Ve=!!(n.flags&131072)}else Ve=!1,te&&e.flags&1048576&&xm(e,$a,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ya(n,e),n=e.pendingProps;var i=os(e,Le.current);ts(e,t),i=Df(null,e,r,n,i,t);var s=Of();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,We(r)?(s=!0,Fa(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Ef(e),i.updater=Pl,e.stateNode=i,i._reactInternals=e,ac(e,r,n,t),e=cc(null,e,r,!0,s,t)):(e.tag=0,te&&s&&vf(e),be(null,e,i,t),e=e.child),e;case 16:r=e.elementType;e:{switch(ya(n,e),n=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=r0(r),n=Pt(r,n),i){case 0:e=uc(null,e,r,n,t);break e;case 1:e=fh(null,e,r,n,t);break e;case 11:e=uh(null,e,r,n,t);break e;case 14:e=ch(null,e,r,Pt(r.type,n),t);break e}throw Error(C(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Pt(r,i),uc(n,e,r,i,t);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Pt(r,i),fh(n,e,r,i,t);case 3:e:{if(op(e),n===null)throw Error(C(387));r=e.pendingProps,s=e.memoizedState,i=s.element,Dm(n,e),Va(e,r,null,t);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=cs(Error(C(423)),e),e=dh(n,e,r,t,i);break e}else if(r!==i){i=cs(Error(C(424)),e),e=dh(n,e,r,t,i);break e}else for(Qe=Vr(e.stateNode.containerInfo.firstChild),et=e,te=!0,Rt=null,t=Bm(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(as(),r===i){e=Ar(n,e,t);break e}be(n,e,r,t)}e=e.child}return e;case 5:return bm(e),n===null&&ic(e),r=e.type,i=e.pendingProps,s=n!==null?n.memoizedProps:null,o=i.children,Zu(r,i)?o=null:s!==null&&Zu(r,s)&&(e.flags|=32),sp(n,e),be(n,e,o,t),e.child;case 6:return n===null&&ic(e),null;case 13:return ap(n,e,t);case 4:return xf(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=ls(e,null,r,t):be(n,e,r,t),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Pt(r,i),uh(n,e,r,i,t);case 7:return be(n,e,e.pendingProps,t),e.child;case 8:return be(n,e,e.pendingProps.children,t),e.child;case 12:return be(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,X(Ua,r._currentValue),r._currentValue=o,s!==null)if(Jt(s.value,o)){if(s.children===i.children&&!Ke.current){e=Ar(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=yr(-1,t&-t),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),sc(s.return,t,e),a.lanes|=t;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(C(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),sc(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}be(n,e,i.children,t),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,ts(e,t),i=At(i),r=r(i),e.flags|=1,be(n,e,r,t),e.child;case 14:return r=e.type,i=Pt(r,e.pendingProps),i=Pt(r.type,i),ch(n,e,r,i,t);case 15:return rp(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Pt(r,i),ya(n,e),e.tag=1,We(r)?(n=!0,Fa(e)):n=!1,ts(e,t),Rm(e,r,i),ac(e,r,i,t),cc(null,e,r,!0,n,t);case 19:return lp(n,e,t);case 22:return ip(n,e,t)}throw Error(C(156,e.tag))};function Ip(n,e){return Yg(n,e)}function n0(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vt(n,e,t,r){return new n0(n,e,t,r)}function Uf(n){return n=n.prototype,!(!n||!n.isReactComponent)}function r0(n){if(typeof n=="function")return Uf(n)?1:0;if(n!=null){if(n=n.$$typeof,n===of)return 11;if(n===af)return 14}return 2}function _r(n,e){var t=n.alternate;return t===null?(t=vt(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function Sa(n,e,t,r,i,s){var o=2;if(r=n,typeof n=="function")Uf(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case Fi:return wi(t.children,i,s,e);case sf:o=8,i|=8;break;case Ou:return n=vt(12,t,e,i|2),n.elementType=Ou,n.lanes=s,n;case Ru:return n=vt(13,t,e,i),n.elementType=Ru,n.lanes=s,n;case Lu:return n=vt(19,t,e,i),n.elementType=Lu,n.lanes=s,n;case Lg:return Ll(t,i,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case Og:o=10;break e;case Rg:o=9;break e;case of:o=11;break e;case af:o=14;break e;case Lr:o=16,r=null;break e}throw Error(C(130,n==null?n:typeof n,""))}return e=vt(o,t,e,i),e.elementType=n,e.type=r,e.lanes=s,e}function wi(n,e,t,r){return n=vt(7,n,r,e),n.lanes=t,n}function Ll(n,e,t,r){return n=vt(22,n,r,e),n.elementType=Lg,n.lanes=t,n.stateNode={isHidden:!1},n}function yu(n,e,t){return n=vt(6,n,null,e),n.lanes=t,n}function vu(n,e,t){return e=vt(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function i0(n,e,t,r,i){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Xl(0),this.expirationTimes=Xl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xl(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function jf(n,e,t,r,i,s,o,a,l){return n=new i0(n,e,t,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=vt(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ef(s),n}function s0(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:zi,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function Ep(n){if(!n)return Zr;n=n._reactInternals;e:{if(Oi(n)!==n||n.tag!==1)throw Error(C(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(We(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(C(171))}if(n.tag===1){var t=n.type;if(We(t))return Im(n,t,e)}return e}function xp(n,e,t,r,i,s,o,a,l){return n=jf(t,r,!0,n,i,s,o,a,l),n.context=Ep(null),t=n.current,r=ze(),i=Wr(t),s=yr(r,i),s.callback=e??null,qr(t,s,i),n.current.lanes=i,Do(n,i,r),_e(n,r),n}function Bl(n,e,t,r){var i=e.current,s=ze(),o=Wr(i);return t=Ep(t),e.context===null?e.context=t:e.pendingContext=t,e=yr(s,o),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=qr(i,e,o),n!==null&&(Mt(n,i,o,s),ga(n,i,o)),o}function Qa(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Th(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function Vf(n,e){Th(n,e),(n=n.alternate)&&Th(n,e)}function o0(){return null}var Cp=typeof reportError=="function"?reportError:function(n){console.error(n)};function qf(n){this._internalRoot=n}bl.prototype.render=qf.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(C(409));Bl(n,e,null,null)};bl.prototype.unmount=qf.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;xi(function(){Bl(null,n,null,null)}),e[kr]=null}};function bl(n){this._internalRoot=n}bl.prototype.unstable_scheduleHydration=function(n){if(n){var e=rm();n={blockedOn:null,target:n,priority:e};for(var t=0;t<br.length&&e!==0&&e<br[t].priority;t++);br.splice(t,0,n),t===0&&sm(n)}};function Kf(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Ml(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Ah(){}function a0(n,e,t,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=Qa(o);s.call(c)}}var o=xp(e,r,n,0,null,!1,!1,"",Ah);return n._reactRootContainer=o,n[kr]=o.current,uo(n.nodeType===8?n.parentNode:n),xi(),o}for(;i=n.lastChild;)n.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=Qa(l);a.call(c)}}var l=jf(n,0,!1,null,null,!1,!1,"",Ah);return n._reactRootContainer=l,n[kr]=l.current,uo(n.nodeType===8?n.parentNode:n),xi(function(){Bl(e,l,t,r)}),l}function zl(n,e,t,r,i){var s=t._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Qa(o);a.call(l)}}Bl(e,o,n,i)}else o=a0(t,e,n,i,r);return Qa(o)}tm=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=Fs(e.pendingLanes);t!==0&&(cf(e,t|1),_e(e,he()),!(_&6)&&(fs=he()+500,si()))}break;case 13:xi(function(){var r=Tr(n,1);if(r!==null){var i=ze();Mt(r,n,1,i)}}),Vf(n,1)}};ff=function(n){if(n.tag===13){var e=Tr(n,134217728);if(e!==null){var t=ze();Mt(e,n,134217728,t)}Vf(n,134217728)}};nm=function(n){if(n.tag===13){var e=Wr(n),t=Tr(n,e);if(t!==null){var r=ze();Mt(t,n,e,r)}Vf(n,e)}};rm=function(){return Y};im=function(n,e){var t=Y;try{return Y=n,e()}finally{Y=t}};Vu=function(n,e,t){switch(e){case"input":if(Mu(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var i=Cl(r);if(!i)throw Error(C(90));bg(r),Mu(r,i)}}}break;case"textarea":zg(n,t);break;case"select":e=t.value,e!=null&&Qi(n,!!t.multiple,e,!1)}};qg=Ff;Kg=xi;var l0={usingClientEntryPoint:!1,Events:[Ro,ji,Cl,jg,Vg,Ff]},Rs={findFiberByHostInstance:hi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},u0={bundleType:Rs.bundleType,version:Rs.version,rendererPackageName:Rs.rendererPackageName,rendererConfig:Rs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:xr.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Hg(n),n===null?null:n.stateNode},findFiberByHostInstance:Rs.findFiberByHostInstance||o0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ra=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ra.isDisabled&&ra.supportsFiber)try{Al=ra.inject(u0),rn=ra}catch{}}it.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=l0;it.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Kf(e))throw Error(C(200));return s0(n,e,null,t)};it.createRoot=function(n,e){if(!Kf(n))throw Error(C(299));var t=!1,r="",i=Cp;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=jf(n,1,!1,null,null,t,!1,r,i),n[kr]=e.current,uo(n.nodeType===8?n.parentNode:n),new qf(e)};it.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(C(188)):(n=Object.keys(n).join(","),Error(C(268,n)));return n=Hg(e),n=n===null?null:n.stateNode,n};it.flushSync=function(n){return xi(n)};it.hydrate=function(n,e,t){if(!Ml(e))throw Error(C(200));return zl(null,n,e,!0,t)};it.hydrateRoot=function(n,e,t){if(!Kf(n))throw Error(C(405));var r=t!=null&&t.hydratedSources||null,i=!1,s="",o=Cp;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=xp(e,null,n,1,t??null,i,!1,s,o),n[kr]=e.current,uo(n),r)for(n=0;n<r.length;n++)t=r[n],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new bl(e)};it.render=function(n,e,t){if(!Ml(e))throw Error(C(200));return zl(null,n,e,!1,t)};it.unmountComponentAtNode=function(n){if(!Ml(n))throw Error(C(40));return n._reactRootContainer?(xi(function(){zl(null,null,n,!1,function(){n._reactRootContainer=null,n[kr]=null})}),!0):!1};it.unstable_batchedUpdates=Ff;it.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!Ml(t))throw Error(C(200));if(n==null||n._reactInternals===void 0)throw Error(C(38));return zl(n,e,t,!1,r)};it.version="18.2.0-next-9e3b772b8-20220608";function Np(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Np)}catch(n){console.error(n)}}Np(),xg.exports=it;var c0=xg.exports,Ih=c0;Pu.createRoot=Ih.createRoot,Pu.hydrateRoot=Ih.hydrateRoot;var V;(function(n){n[n.Canceled=1]="Canceled",n[n.Unknown=2]="Unknown",n[n.InvalidArgument=3]="InvalidArgument",n[n.DeadlineExceeded=4]="DeadlineExceeded",n[n.NotFound=5]="NotFound",n[n.AlreadyExists=6]="AlreadyExists",n[n.PermissionDenied=7]="PermissionDenied",n[n.ResourceExhausted=8]="ResourceExhausted",n[n.FailedPrecondition=9]="FailedPrecondition",n[n.Aborted=10]="Aborted",n[n.OutOfRange=11]="OutOfRange",n[n.Unimplemented=12]="Unimplemented",n[n.Internal=13]="Internal",n[n.Unavailable=14]="Unavailable",n[n.DataLoss=15]="DataLoss",n[n.Unauthenticated=16]="Unauthenticated"})(V||(V={}));function Eh(n){const e=V[n];return typeof e!="string"?n.toString():e[0].toLowerCase()+e.substring(1).replace(/[A-Z]/g,t=>"_"+t.toLowerCase())}class G extends Error{constructor(e,t=V.Unknown,r,i,s){super(f0(e,t)),this.name="ConnectError",Object.setPrototypeOf(this,new.target.prototype),this.rawMessage=e,this.code=t,this.metadata=new Headers(r??{}),this.details=i??[],this.cause=s}static from(e,t=V.Unknown){return e instanceof G?e:e instanceof Error?e.name=="AbortError"?new G(e.message,V.Canceled):new G(e.message,t,void 0,void 0,e):new G(String(e),t,void 0,void 0,e)}static[Symbol.hasInstance](e){return e instanceof Error?Object.getPrototypeOf(e)===G.prototype?!0:e.name==="ConnectError"&&"code"in e&&typeof e.code=="number"&&"metadata"in e&&"details"in e&&Array.isArray(e.details)&&"rawMessage"in e&&typeof e.rawMessage=="string"&&"cause"in e:!1}findDetails(e){const t="typeName"in e?{findMessage:i=>i===e.typeName?e:void 0}:e,r=[];for(const i of this.details){if("getType"in i){t.findMessage(i.getType().typeName)&&r.push(i);continue}const s=t.findMessage(i.type);if(s)try{r.push(s.fromBinary(i.value))}catch{}}return r}}function f0(n,e){return n.length?`[${Eh(e)}] ${n}`:`[${Eh(e)}]`}function le(n,e){if(!n)throw new Error(e)}const d0=34028234663852886e22,h0=-34028234663852886e22,g0=4294967295,m0=2147483647,p0=-2147483648;function ka(n){if(typeof n!="number")throw new Error("invalid int 32: "+typeof n);if(!Number.isInteger(n)||n>m0||n<p0)throw new Error("invalid int 32: "+n)}function Tc(n){if(typeof n!="number")throw new Error("invalid uint 32: "+typeof n);if(!Number.isInteger(n)||n>g0||n<0)throw new Error("invalid uint 32: "+n)}function Pp(n){if(typeof n!="number")throw new Error("invalid float 32: "+typeof n);if(Number.isFinite(n)&&(n>d0||n<h0))throw new Error("invalid float 32: "+n)}const Dp=Symbol("@bufbuild/protobuf/enum-type");function y0(n){const e=n[Dp];return le(e,"missing enum type on enum object"),e}function Op(n,e,t,r){n[Dp]=Rp(e,t.map(i=>({no:i.no,name:i.name,localName:n[i.no]})))}function Rp(n,e,t){const r=Object.create(null),i=Object.create(null),s=[];for(const o of e){const a=Lp(o);s.push(a),r[o.name]=a,i[o.no]=a}return{typeName:n,values:s,findName(o){return r[o]},findNumber(o){return i[o]}}}function v0(n,e,t){const r={};for(const i of e){const s=Lp(i);r[s.localName]=s.no,r[s.no]=s.localName}return Op(r,n,e),r}function Lp(n){return"localName"in n?n:Object.assign(Object.assign({},n),{localName:n.name})}class O{equals(e){return this.getType().runtime.util.equals(this.getType(),this,e)}clone(){return this.getType().runtime.util.clone(this)}fromBinary(e,t){const r=this.getType(),i=r.runtime.bin,s=i.makeReadOptions(t);return i.readMessage(this,s.readerFactory(e),e.byteLength,s),this}fromJson(e,t){const r=this.getType(),i=r.runtime.json,s=i.makeReadOptions(t);return i.readMessage(r,e,s,this),this}fromJsonString(e,t){let r;try{r=JSON.parse(e)}catch(i){throw new Error(`cannot decode ${this.getType().typeName} from JSON: ${i instanceof Error?i.message:String(i)}`)}return this.fromJson(r,t)}toBinary(e){const t=this.getType(),r=t.runtime.bin,i=r.makeWriteOptions(e),s=i.writerFactory();return r.writeMessage(this,s,i),s.finish()}toJson(e){const t=this.getType(),r=t.runtime.json,i=r.makeWriteOptions(e);return r.writeMessage(this,i)}toJsonString(e){var t;const r=this.toJson(e);return JSON.stringify(r,null,(t=e==null?void 0:e.prettySpaces)!==null&&t!==void 0?t:0)}toJSON(){return this.toJson({emitDefaultValues:!0})}getType(){return Object.getPrototypeOf(this).constructor}}function w0(n,e,t,r){var i;const s=(i=r==null?void 0:r.localName)!==null&&i!==void 0?i:e.substring(e.lastIndexOf(".")+1),o={[s]:function(a){n.util.initFields(this),n.util.initPartial(a,this)}}[s];return Object.setPrototypeOf(o.prototype,new O),Object.assign(o,{runtime:n,typeName:e,fields:n.util.newFieldList(t),fromBinary(a,l){return new o().fromBinary(a,l)},fromJson(a,l){return new o().fromJson(a,l)},fromJsonString(a,l){return new o().fromJsonString(a,l)},equals(a,l){return n.util.equals(o,a,l)}}),o}function S0(){let n=0,e=0;for(let r=0;r<28;r+=7){let i=this.buf[this.pos++];if(n|=(i&127)<<r,!(i&128))return this.assertBounds(),[n,e]}let t=this.buf[this.pos++];if(n|=(t&15)<<28,e=(t&112)>>4,!(t&128))return this.assertBounds(),[n,e];for(let r=3;r<=31;r+=7){let i=this.buf[this.pos++];if(e|=(i&127)<<r,!(i&128))return this.assertBounds(),[n,e]}throw new Error("invalid varint")}function wu(n,e,t){for(let s=0;s<28;s=s+7){const o=n>>>s,a=!(!(o>>>7)&&e==0),l=(a?o|128:o)&255;if(t.push(l),!a)return}const r=n>>>28&15|(e&7)<<4,i=!!(e>>3);if(t.push((i?r|128:r)&255),!!i){for(let s=3;s<31;s=s+7){const o=e>>>s,a=!!(o>>>7),l=(a?o|128:o)&255;if(t.push(l),!a)return}t.push(e>>>31&1)}}const Ta=4294967296;function xh(n){const e=n[0]==="-";e&&(n=n.slice(1));const t=1e6;let r=0,i=0;function s(o,a){const l=Number(n.slice(o,a));i*=t,r=r*t+l,r>=Ta&&(i=i+(r/Ta|0),r=r%Ta)}return s(-24,-18),s(-18,-12),s(-12,-6),s(-6),e?bp(r,i):Wf(r,i)}function k0(n,e){let t=Wf(n,e);const r=t.hi&2147483648;r&&(t=bp(t.lo,t.hi));const i=Bp(t.lo,t.hi);return r?"-"+i:i}function Bp(n,e){if({lo:n,hi:e}=T0(n,e),e<=2097151)return String(Ta*e+n);const t=n&16777215,r=(n>>>24|e<<8)&16777215,i=e>>16&65535;let s=t+r*6777216+i*6710656,o=r+i*8147497,a=i*2;const l=1e7;return s>=l&&(o+=Math.floor(s/l),s%=l),o>=l&&(a+=Math.floor(o/l),o%=l),a.toString()+Ch(o)+Ch(s)}function T0(n,e){return{lo:n>>>0,hi:e>>>0}}function Wf(n,e){return{lo:n|0,hi:e|0}}function bp(n,e){return e=~e,n?n=~n+1:e+=1,Wf(n,e)}const Ch=n=>{const e=String(n);return"0000000".slice(e.length)+e};function Nh(n,e){if(n>=0){for(;n>127;)e.push(n&127|128),n=n>>>7;e.push(n)}else{for(let t=0;t<9;t++)e.push(n&127|128),n=n>>7;e.push(1)}}function A0(){let n=this.buf[this.pos++],e=n&127;if(!(n&128))return this.assertBounds(),e;if(n=this.buf[this.pos++],e|=(n&127)<<7,!(n&128))return this.assertBounds(),e;if(n=this.buf[this.pos++],e|=(n&127)<<14,!(n&128))return this.assertBounds(),e;if(n=this.buf[this.pos++],e|=(n&127)<<21,!(n&128))return this.assertBounds(),e;n=this.buf[this.pos++],e|=(n&15)<<28;for(let t=5;n&128&&t<10;t++)n=this.buf[this.pos++];if(n&128)throw new Error("invalid varint");return this.assertBounds(),e>>>0}var Ph={};function I0(){const n=new DataView(new ArrayBuffer(8));if(typeof BigInt=="function"&&typeof n.getBigInt64=="function"&&typeof n.getBigUint64=="function"&&typeof n.setBigInt64=="function"&&typeof n.setBigUint64=="function"&&(typeof process!="object"||typeof Ph!="object"||Ph.BUF_BIGINT_DISABLE!=="1")){const i=BigInt("-9223372036854775808"),s=BigInt("9223372036854775807"),o=BigInt("0"),a=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(l){const c=typeof l=="bigint"?l:BigInt(l);if(c>s||c<i)throw new Error(`int64 invalid: ${l}`);return c},uParse(l){const c=typeof l=="bigint"?l:BigInt(l);if(c>a||c<o)throw new Error(`uint64 invalid: ${l}`);return c},enc(l){return n.setBigInt64(0,this.parse(l),!0),{lo:n.getInt32(0,!0),hi:n.getInt32(4,!0)}},uEnc(l){return n.setBigInt64(0,this.uParse(l),!0),{lo:n.getInt32(0,!0),hi:n.getInt32(4,!0)}},dec(l,c){return n.setInt32(0,l,!0),n.setInt32(4,c,!0),n.getBigInt64(0,!0)},uDec(l,c){return n.setInt32(0,l,!0),n.setInt32(4,c,!0),n.getBigUint64(0,!0)}}}const t=i=>le(/^-?[0-9]+$/.test(i),`int64 invalid: ${i}`),r=i=>le(/^[0-9]+$/.test(i),`uint64 invalid: ${i}`);return{zero:"0",supported:!1,parse(i){return typeof i!="string"&&(i=i.toString()),t(i),i},uParse(i){return typeof i!="string"&&(i=i.toString()),r(i),i},enc(i){return typeof i!="string"&&(i=i.toString()),t(i),xh(i)},uEnc(i){return typeof i!="string"&&(i=i.toString()),r(i),xh(i)},dec(i,s){return k0(i,s)},uDec(i,s){return Bp(i,s)}}}const ne=I0();var A;(function(n){n[n.DOUBLE=1]="DOUBLE",n[n.FLOAT=2]="FLOAT",n[n.INT64=3]="INT64",n[n.UINT64=4]="UINT64",n[n.INT32=5]="INT32",n[n.FIXED64=6]="FIXED64",n[n.FIXED32=7]="FIXED32",n[n.BOOL=8]="BOOL",n[n.STRING=9]="STRING",n[n.BYTES=12]="BYTES",n[n.UINT32=13]="UINT32",n[n.SFIXED32=15]="SFIXED32",n[n.SFIXED64=16]="SFIXED64",n[n.SINT32=17]="SINT32",n[n.SINT64=18]="SINT64"})(A||(A={}));var ei;(function(n){n[n.BIGINT=0]="BIGINT",n[n.STRING=1]="STRING"})(ei||(ei={}));function Pr(n,e,t){if(e===t)return!0;if(n==A.BYTES){if(!(e instanceof Uint8Array)||!(t instanceof Uint8Array)||e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}switch(n){case A.UINT64:case A.FIXED64:case A.INT64:case A.SFIXED64:case A.SINT64:return e==t}return!1}function ds(n,e){switch(n){case A.BOOL:return!1;case A.UINT64:case A.FIXED64:case A.INT64:case A.SFIXED64:case A.SINT64:return e==0?ne.zero:"0";case A.DOUBLE:case A.FLOAT:return 0;case A.BYTES:return new Uint8Array(0);case A.STRING:return"";default:return 0}}function Mp(n,e){switch(n){case A.BOOL:return e===!1;case A.STRING:return e==="";case A.BYTES:return e instanceof Uint8Array&&!e.byteLength;default:return e==0}}var ge;(function(n){n[n.Varint=0]="Varint",n[n.Bit64=1]="Bit64",n[n.LengthDelimited=2]="LengthDelimited",n[n.StartGroup=3]="StartGroup",n[n.EndGroup=4]="EndGroup",n[n.Bit32=5]="Bit32"})(ge||(ge={}));class E0{constructor(e){this.stack=[],this.textEncoder=e??new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let e=0;for(let i=0;i<this.chunks.length;i++)e+=this.chunks[i].length;let t=new Uint8Array(e),r=0;for(let i=0;i<this.chunks.length;i++)t.set(this.chunks[i],r),r+=this.chunks[i].length;return this.chunks=[],t}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),t=this.stack.pop();if(!t)throw new Error("invalid state, fork stack empty");return this.chunks=t.chunks,this.buf=t.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,t){return this.uint32((e<<3|t)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(Tc(e);e>127;)this.buf.push(e&127|128),e=e>>>7;return this.buf.push(e),this}int32(e){return ka(e),Nh(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let t=this.textEncoder.encode(e);return this.uint32(t.byteLength),this.raw(t)}float(e){Pp(e);let t=new Uint8Array(4);return new DataView(t.buffer).setFloat32(0,e,!0),this.raw(t)}double(e){let t=new Uint8Array(8);return new DataView(t.buffer).setFloat64(0,e,!0),this.raw(t)}fixed32(e){Tc(e);let t=new Uint8Array(4);return new DataView(t.buffer).setUint32(0,e,!0),this.raw(t)}sfixed32(e){ka(e);let t=new Uint8Array(4);return new DataView(t.buffer).setInt32(0,e,!0),this.raw(t)}sint32(e){return ka(e),e=(e<<1^e>>31)>>>0,Nh(e,this.buf),this}sfixed64(e){let t=new Uint8Array(8),r=new DataView(t.buffer),i=ne.enc(e);return r.setInt32(0,i.lo,!0),r.setInt32(4,i.hi,!0),this.raw(t)}fixed64(e){let t=new Uint8Array(8),r=new DataView(t.buffer),i=ne.uEnc(e);return r.setInt32(0,i.lo,!0),r.setInt32(4,i.hi,!0),this.raw(t)}int64(e){let t=ne.enc(e);return wu(t.lo,t.hi,this.buf),this}sint64(e){let t=ne.enc(e),r=t.hi>>31,i=t.lo<<1^r,s=(t.hi<<1|t.lo>>>31)^r;return wu(i,s,this.buf),this}uint64(e){let t=ne.uEnc(e);return wu(t.lo,t.hi,this.buf),this}}class x0{constructor(e,t){this.varint64=S0,this.uint32=A0,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength),this.textDecoder=t??new TextDecoder}tag(){let e=this.uint32(),t=e>>>3,r=e&7;if(t<=0||r<0||r>5)throw new Error("illegal tag: field no "+t+" wire type "+r);return[t,r]}skip(e,t){let r=this.pos;switch(e){case ge.Varint:for(;this.buf[this.pos++]&128;);break;case ge.Bit64:this.pos+=4;case ge.Bit32:this.pos+=4;break;case ge.LengthDelimited:let i=this.uint32();this.pos+=i;break;case ge.StartGroup:for(;;){const[s,o]=this.tag();if(o===ge.EndGroup){if(t!==void 0&&s!==t)throw new Error("invalid end group tag");break}this.skip(o,s)}break;default:throw new Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(r,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let e=this.uint32();return e>>>1^-(e&1)}int64(){return ne.dec(...this.varint64())}uint64(){return ne.uDec(...this.varint64())}sint64(){let[e,t]=this.varint64(),r=-(e&1);return e=(e>>>1|(t&1)<<31)^r,t=t>>>1^r,ne.dec(e,t)}bool(){let[e,t]=this.varint64();return e!==0||t!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return ne.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return ne.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),t=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(t,t+e)}string(){return this.textDecoder.decode(this.bytes())}}function C0(n,e,t,r){let i;return{typeName:e,extendee:t,get field(){if(!i){const s=typeof r=="function"?r():r;s.name=e.split(".").pop(),s.jsonName=`[${e}]`,i=n.util.newFieldList([s]).list()[0]}return i},runtime:n}}function zp(n){const e=n.field.localName,t=Object.create(null);return t[e]=N0(n),[t,()=>t[e]]}function N0(n){const e=n.field;if(e.repeated)return[];if(e.default!==void 0)return e.default;switch(e.kind){case"enum":return e.T.values[0].no;case"scalar":return ds(e.T,e.L);case"message":const t=e.T,r=new t;return t.fieldWrapper?t.fieldWrapper.unwrapField(r):r;case"map":throw"map fields are not allowed to be extensions"}}function P0(n,e){if(!e.repeated&&(e.kind=="enum"||e.kind=="scalar")){for(let t=n.length-1;t>=0;--t)if(n[t].no==e.no)return[n[t]];return[]}return n.filter(t=>t.no===e.no)}let fr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),Fl=[];for(let n=0;n<fr.length;n++)Fl[fr[n].charCodeAt(0)]=n;Fl[45]=fr.indexOf("+");Fl[95]=fr.indexOf("/");const _f={dec(n){let e=n.length*3/4;n[n.length-2]=="="?e-=2:n[n.length-1]=="="&&(e-=1);let t=new Uint8Array(e),r=0,i=0,s,o=0;for(let a=0;a<n.length;a++){if(s=Fl[n.charCodeAt(a)],s===void 0)switch(n[a]){case"=":i=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(i){case 0:o=s,i=1;break;case 1:t[r++]=o<<2|(s&48)>>4,o=s,i=2;break;case 2:t[r++]=(o&15)<<4|(s&60)>>2,o=s,i=3;break;case 3:t[r++]=(o&3)<<6|s,i=0;break}}if(i==1)throw Error("invalid base64 string.");return t.subarray(0,r)},enc(n){let e="",t=0,r,i=0;for(let s=0;s<n.length;s++)switch(r=n[s],t){case 0:e+=fr[r>>2],i=(r&3)<<4,t=1;break;case 1:e+=fr[i|r>>4],i=(r&15)<<2,t=2;break;case 2:e+=fr[i|r>>6],e+=fr[r&63],t=0;break}return t&&(e+=fr[i],e+="=",t==1&&(e+="=")),e}};function D0(n,e,t){Jp(e,n);const r=e.runtime.bin.makeReadOptions(t),i=P0(n.getType().runtime.bin.listUnknownFields(n),e.field),[s,o]=zp(e);for(const a of i)e.runtime.bin.readField(s,r.readerFactory(a.data),e.field,a.wireType,r);return o()}function O0(n,e,t,r){Jp(e,n);const i=e.runtime.bin.makeReadOptions(r),s=e.runtime.bin.makeWriteOptions(r);if(Fp(n,e)){const c=n.getType().runtime.bin.listUnknownFields(n).filter(d=>d.no!=e.field.no);n.getType().runtime.bin.discardUnknownFields(n);for(const d of c)n.getType().runtime.bin.onUnknownField(n,d.no,d.wireType,d.data)}const o=s.writerFactory();let a=e.field;!a.opt&&!a.repeated&&(a.kind=="enum"||a.kind=="scalar")&&(a=Object.assign(Object.assign({},e.field),{opt:!0})),e.runtime.bin.writeField(a,t,o,s);const l=i.readerFactory(o.finish());for(;l.pos<l.len;){const[c,d]=l.tag(),h=l.skip(d,c);n.getType().runtime.bin.onUnknownField(n,c,d,h)}}function Fp(n,e){const t=n.getType();return e.extendee.typeName===t.typeName&&!!t.runtime.bin.listUnknownFields(n).find(r=>r.no==e.field.no)}function Jp(n,e){le(n.extendee.typeName==e.getType().typeName,`extension ${n.typeName} can only be applied to message ${n.extendee.typeName}`)}function $p(n,e){const t=n.localName;if(n.repeated)return e[t].length>0;if(n.oneof)return e[n.oneof.localName].case===t;switch(n.kind){case"enum":case"scalar":return n.opt||n.req?e[t]!==void 0:n.kind=="enum"?e[t]!==n.T.values[0].no:!Mp(n.T,e[t]);case"message":return e[t]!==void 0;case"map":return Object.keys(e[t]).length>0}}function Dh(n,e){const t=n.localName,r=!n.opt&&!n.req;if(n.repeated)e[t]=[];else if(n.oneof)e[n.oneof.localName]={case:void 0};else switch(n.kind){case"map":e[t]={};break;case"enum":e[t]=r?n.T.values[0].no:void 0;break;case"scalar":e[t]=r?ds(n.T,n.L):void 0;break;case"message":e[t]=void 0;break}}function Si(n,e){if(n===null||typeof n!="object"||!Object.getOwnPropertyNames(O.prototype).every(r=>r in n&&typeof n[r]=="function"))return!1;const t=n.getType();return t===null||typeof t!="function"||!("typeName"in t)||typeof t.typeName!="string"?!1:e===void 0?!0:t.typeName==e.typeName}function Up(n,e){return Si(e)||!n.fieldWrapper?e:n.fieldWrapper.wrapField(e)}A.DOUBLE,A.FLOAT,A.INT64,A.UINT64,A.INT32,A.UINT32,A.BOOL,A.STRING,A.BYTES;const Oh={ignoreUnknownFields:!1},Rh={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0};function R0(n){return n?Object.assign(Object.assign({},Oh),n):Oh}function L0(n){return n?Object.assign(Object.assign({},Rh),n):Rh}const Xa=Symbol(),Aa=Symbol();function B0(){return{makeReadOptions:R0,makeWriteOptions:L0,readMessage(n,e,t,r){if(e==null||Array.isArray(e)||typeof e!="object")throw new Error(`cannot decode message ${n.typeName} from JSON: ${Kt(e)}`);r=r??new n;const i=new Map,s=t.typeRegistry;for(const[o,a]of Object.entries(e)){const l=n.fields.findJsonName(o);if(l){if(l.oneof){if(a===null&&l.kind=="scalar")continue;const c=i.get(l.oneof);if(c!==void 0)throw new Error(`cannot decode message ${n.typeName} from JSON: multiple keys for oneof "${l.oneof.name}" present: "${c}", "${o}"`);i.set(l.oneof,o)}Lh(r,a,l,t,n)}else{let c=!1;if(s!=null&&s.findExtension&&o.startsWith("[")&&o.endsWith("]")){const d=s.findExtension(o.substring(1,o.length-1));if(d&&d.extendee.typeName==n.typeName){c=!0;const[h,m]=zp(d);Lh(h,a,d.field,t,d),O0(r,d,m(),t)}}if(!c&&!t.ignoreUnknownFields)throw new Error(`cannot decode message ${n.typeName} from JSON: key "${o}" is unknown`)}}return r},writeMessage(n,e){const t=n.getType(),r={};let i;try{for(i of t.fields.byNumber()){if(!$p(i,n)){if(i.req)throw"required field not set";if(!e.emitDefaultValues||!M0(i))continue}const o=i.oneof?n[i.oneof.localName].value:n[i.localName],a=Bh(i,o,e);a!==void 0&&(r[e.useProtoFieldName?i.name:i.jsonName]=a)}const s=e.typeRegistry;if(s!=null&&s.findExtensionFor)for(const o of t.runtime.bin.listUnknownFields(n)){const a=s.findExtensionFor(t.typeName,o.no);if(a&&Fp(n,a)){const l=D0(n,a,e),c=Bh(a.field,l,e);c!==void 0&&(r[a.field.jsonName]=c)}}}catch(s){const o=i?`cannot encode field ${t.typeName}.${i.name} to JSON`:`cannot encode message ${t.typeName} to JSON`,a=s instanceof Error?s.message:String(s);throw new Error(o+(a.length>0?`: ${a}`:""))}return r},readScalar(n,e,t){return Ys(n,e,t??ei.BIGINT,!0)},writeScalar(n,e,t){if(e!==void 0&&(t||Mp(n,e)))return Ia(n,e)},debug:Kt}}function Kt(n){if(n===null)return"null";switch(typeof n){case"object":return Array.isArray(n)?"array":"object";case"string":return n.length>100?"string":`"${n.split('"').join('\\"')}"`;default:return String(n)}}function Lh(n,e,t,r,i){let s=t.localName;if(t.repeated){if(le(t.kind!="map"),e===null)return;if(!Array.isArray(e))throw new Error(`cannot decode field ${i.typeName}.${t.name} from JSON: ${Kt(e)}`);const o=n[s];for(const a of e){if(a===null)throw new Error(`cannot decode field ${i.typeName}.${t.name} from JSON: ${Kt(a)}`);switch(t.kind){case"message":o.push(t.T.fromJson(a,r));break;case"enum":const l=Su(t.T,a,r.ignoreUnknownFields,!0);l!==Aa&&o.push(l);break;case"scalar":try{o.push(Ys(t.T,a,t.L,!0))}catch(c){let d=`cannot decode field ${i.typeName}.${t.name} from JSON: ${Kt(a)}`;throw c instanceof Error&&c.message.length>0&&(d+=`: ${c.message}`),new Error(d)}break}}}else if(t.kind=="map"){if(e===null)return;if(typeof e!="object"||Array.isArray(e))throw new Error(`cannot decode field ${i.typeName}.${t.name} from JSON: ${Kt(e)}`);const o=n[s];for(const[a,l]of Object.entries(e)){if(l===null)throw new Error(`cannot decode field ${i.typeName}.${t.name} from JSON: map value null`);let c;try{c=b0(t.K,a)}catch(d){let h=`cannot decode map key for field ${i.typeName}.${t.name} from JSON: ${Kt(e)}`;throw d instanceof Error&&d.message.length>0&&(h+=`: ${d.message}`),new Error(h)}switch(t.V.kind){case"message":o[c]=t.V.T.fromJson(l,r);break;case"enum":const d=Su(t.V.T,l,r.ignoreUnknownFields,!0);d!==Aa&&(o[c]=d);break;case"scalar":try{o[c]=Ys(t.V.T,l,ei.BIGINT,!0)}catch(h){let m=`cannot decode map value for field ${i.typeName}.${t.name} from JSON: ${Kt(e)}`;throw h instanceof Error&&h.message.length>0&&(m+=`: ${h.message}`),new Error(m)}break}}}else switch(t.oneof&&(n=n[t.oneof.localName]={case:s},s="value"),t.kind){case"message":const o=t.T;if(e===null&&o.typeName!="google.protobuf.Value")return;let a=n[s];Si(a)?a.fromJson(e,r):(n[s]=a=o.fromJson(e,r),o.fieldWrapper&&!t.oneof&&(n[s]=o.fieldWrapper.unwrapField(a)));break;case"enum":const l=Su(t.T,e,r.ignoreUnknownFields,!1);switch(l){case Xa:Dh(t,n);break;case Aa:break;default:n[s]=l;break}break;case"scalar":try{const c=Ys(t.T,e,t.L,!1);switch(c){case Xa:Dh(t,n);break;default:n[s]=c;break}}catch(c){let d=`cannot decode field ${i.typeName}.${t.name} from JSON: ${Kt(e)}`;throw c instanceof Error&&c.message.length>0&&(d+=`: ${c.message}`),new Error(d)}break}}function b0(n,e){if(n===A.BOOL)switch(e){case"true":e=!0;break;case"false":e=!1;break}return Ys(n,e,ei.BIGINT,!0).toString()}function Ys(n,e,t,r){if(e===null)return r?ds(n,t):Xa;switch(n){case A.DOUBLE:case A.FLOAT:if(e==="NaN")return Number.NaN;if(e==="Infinity")return Number.POSITIVE_INFINITY;if(e==="-Infinity")return Number.NEGATIVE_INFINITY;if(e===""||typeof e=="string"&&e.trim().length!==e.length||typeof e!="string"&&typeof e!="number")break;const i=Number(e);if(Number.isNaN(i)||!Number.isFinite(i))break;return n==A.FLOAT&&Pp(i),i;case A.INT32:case A.FIXED32:case A.SFIXED32:case A.SINT32:case A.UINT32:let s;if(typeof e=="number"?s=e:typeof e=="string"&&e.length>0&&e.trim().length===e.length&&(s=Number(e)),s===void 0)break;return n==A.UINT32||n==A.FIXED32?Tc(s):ka(s),s;case A.INT64:case A.SFIXED64:case A.SINT64:if(typeof e!="number"&&typeof e!="string")break;const o=ne.parse(e);return t?o.toString():o;case A.FIXED64:case A.UINT64:if(typeof e!="number"&&typeof e!="string")break;const a=ne.uParse(e);return t?a.toString():a;case A.BOOL:if(typeof e!="boolean")break;return e;case A.STRING:if(typeof e!="string")break;try{encodeURIComponent(e)}catch{throw new Error("invalid UTF8")}return e;case A.BYTES:if(e==="")return new Uint8Array(0);if(typeof e!="string")break;return _f.dec(e)}throw new Error}function Su(n,e,t,r){if(e===null)return n.typeName=="google.protobuf.NullValue"?0:r?n.values[0].no:Xa;switch(typeof e){case"number":if(Number.isInteger(e))return e;break;case"string":const i=n.findName(e);if(i!==void 0)return i.no;if(t)return Aa;break}throw new Error(`cannot decode enum ${n.typeName} from JSON: ${Kt(e)}`)}function M0(n){return n.repeated||n.kind=="map"?!0:!(n.oneof||n.kind=="message"||n.opt||n.req)}function Bh(n,e,t){if(n.kind=="map"){le(typeof e=="object"&&e!=null);const r={},i=Object.entries(e);switch(n.V.kind){case"scalar":for(const[o,a]of i)r[o.toString()]=Ia(n.V.T,a);break;case"message":for(const[o,a]of i)r[o.toString()]=a.toJson(t);break;case"enum":const s=n.V.T;for(const[o,a]of i)r[o.toString()]=ku(s,a,t.enumAsInteger);break}return t.emitDefaultValues||i.length>0?r:void 0}if(n.repeated){le(Array.isArray(e));const r=[];switch(n.kind){case"scalar":for(let i=0;i<e.length;i++)r.push(Ia(n.T,e[i]));break;case"enum":for(let i=0;i<e.length;i++)r.push(ku(n.T,e[i],t.enumAsInteger));break;case"message":for(let i=0;i<e.length;i++)r.push(e[i].toJson(t));break}return t.emitDefaultValues||r.length>0?r:void 0}switch(n.kind){case"scalar":return Ia(n.T,e);case"enum":return ku(n.T,e,t.enumAsInteger);case"message":return Up(n.T,e).toJson(t)}}function ku(n,e,t){var r;if(le(typeof e=="number"),n.typeName=="google.protobuf.NullValue")return null;if(t)return e;const i=n.findNumber(e);return(r=i==null?void 0:i.name)!==null&&r!==void 0?r:e}function Ia(n,e){switch(n){case A.INT32:case A.SFIXED32:case A.SINT32:case A.FIXED32:case A.UINT32:return le(typeof e=="number"),e;case A.FLOAT:case A.DOUBLE:return le(typeof e=="number"),Number.isNaN(e)?"NaN":e===Number.POSITIVE_INFINITY?"Infinity":e===Number.NEGATIVE_INFINITY?"-Infinity":e;case A.STRING:return le(typeof e=="string"),e;case A.BOOL:return le(typeof e=="boolean"),e;case A.UINT64:case A.FIXED64:case A.INT64:case A.SFIXED64:case A.SINT64:return le(typeof e=="bigint"||typeof e=="string"||typeof e=="number"),e.toString();case A.BYTES:return le(e instanceof Uint8Array),_f.enc(e)}}const Bi=Symbol("@bufbuild/protobuf/unknown-fields"),bh={readUnknownFields:!0,readerFactory:n=>new x0(n)},Mh={writeUnknownFields:!0,writerFactory:()=>new E0};function z0(n){return n?Object.assign(Object.assign({},bh),n):bh}function F0(n){return n?Object.assign(Object.assign({},Mh),n):Mh}function J0(){return{makeReadOptions:z0,makeWriteOptions:F0,listUnknownFields(n){var e;return(e=n[Bi])!==null&&e!==void 0?e:[]},discardUnknownFields(n){delete n[Bi]},writeUnknownFields(n,e){const r=n[Bi];if(r)for(const i of r)e.tag(i.no,i.wireType).raw(i.data)},onUnknownField(n,e,t,r){const i=n;Array.isArray(i[Bi])||(i[Bi]=[]),i[Bi].push({no:e,wireType:t,data:r})},readMessage(n,e,t,r,i){const s=n.getType(),o=i?e.len:e.pos+t;let a,l;for(;e.pos<o&&([a,l]=e.tag(),!(i===!0&&l==ge.EndGroup));){const c=s.fields.find(a);if(!c){const d=e.skip(l,a);r.readUnknownFields&&this.onUnknownField(n,a,l,d);continue}zh(n,e,c,l,r)}if(i&&(l!=ge.EndGroup||a!==t))throw new Error("invalid end group tag")},readField:zh,writeMessage(n,e,t){const r=n.getType();for(const i of r.fields.byNumber()){if(!$p(i,n)){if(i.req)throw new Error(`cannot encode field ${r.typeName}.${i.name} to binary: required field not set`);continue}const s=i.oneof?n[i.oneof.localName].value:n[i.localName];Fh(i,s,e,t)}return t.writeUnknownFields&&this.writeUnknownFields(n,e),e},writeField(n,e,t,r){e!==void 0&&Fh(n,e,t,r)}}}function zh(n,e,t,r,i){let{repeated:s,localName:o}=t;switch(t.oneof&&(n=n[t.oneof.localName],n.case!=o&&delete n.value,n.case=o,o="value"),t.kind){case"scalar":case"enum":const a=t.kind=="enum"?A.INT32:t.T;let l=Za;if(t.kind=="scalar"&&t.L>0&&(l=U0),s){let m=n[o];if(r==ge.LengthDelimited&&a!=A.STRING&&a!=A.BYTES){let w=e.uint32()+e.pos;for(;e.pos<w;)m.push(l(e,a))}else m.push(l(e,a))}else n[o]=l(e,a);break;case"message":const c=t.T;s?n[o].push(Ea(e,new c,i,t)):Si(n[o])?Ea(e,n[o],i,t):(n[o]=Ea(e,new c,i,t),c.fieldWrapper&&!t.oneof&&!t.repeated&&(n[o]=c.fieldWrapper.unwrapField(n[o])));break;case"map":let[d,h]=$0(t,e,i);n[o][d]=h;break}}function Ea(n,e,t,r){const i=e.getType().runtime.bin,s=r==null?void 0:r.delimited;return i.readMessage(e,n,s?r.no:n.uint32(),t,s),e}function $0(n,e,t){const r=e.uint32(),i=e.pos+r;let s,o;for(;e.pos<i;){const[a]=e.tag();switch(a){case 1:s=Za(e,n.K);break;case 2:switch(n.V.kind){case"scalar":o=Za(e,n.V.T);break;case"enum":o=e.int32();break;case"message":o=Ea(e,new n.V.T,t,void 0);break}break}}if(s===void 0&&(s=ds(n.K,ei.BIGINT)),typeof s!="string"&&typeof s!="number"&&(s=s.toString()),o===void 0)switch(n.V.kind){case"scalar":o=ds(n.V.T,ei.BIGINT);break;case"enum":o=n.V.T.values[0].no;break;case"message":o=new n.V.T;break}return[s,o]}function U0(n,e){const t=Za(n,e);return typeof t=="bigint"?t.toString():t}function Za(n,e){switch(e){case A.STRING:return n.string();case A.BOOL:return n.bool();case A.DOUBLE:return n.double();case A.FLOAT:return n.float();case A.INT32:return n.int32();case A.INT64:return n.int64();case A.UINT64:return n.uint64();case A.FIXED64:return n.fixed64();case A.BYTES:return n.bytes();case A.FIXED32:return n.fixed32();case A.SFIXED32:return n.sfixed32();case A.SFIXED64:return n.sfixed64();case A.SINT64:return n.sint64();case A.UINT32:return n.uint32();case A.SINT32:return n.sint32()}}function Fh(n,e,t,r){le(e!==void 0);const i=n.repeated;switch(n.kind){case"scalar":case"enum":let s=n.kind=="enum"?A.INT32:n.T;if(i)if(le(Array.isArray(e)),n.packed)V0(t,s,n.no,e);else for(const o of e)Qs(t,s,n.no,o);else Qs(t,s,n.no,e);break;case"message":if(i){le(Array.isArray(e));for(const o of e)Jh(t,r,n,o)}else Jh(t,r,n,e);break;case"map":le(typeof e=="object"&&e!=null);for(const[o,a]of Object.entries(e))j0(t,r,n,o,a);break}}function j0(n,e,t,r,i){n.tag(t.no,ge.LengthDelimited),n.fork();let s=r;switch(t.K){case A.INT32:case A.FIXED32:case A.UINT32:case A.SFIXED32:case A.SINT32:s=Number.parseInt(r);break;case A.BOOL:le(r=="true"||r=="false"),s=r=="true";break}switch(Qs(n,t.K,1,s),t.V.kind){case"scalar":Qs(n,t.V.T,2,i);break;case"enum":Qs(n,A.INT32,2,i);break;case"message":le(i!==void 0),n.tag(2,ge.LengthDelimited).bytes(i.toBinary(e));break}n.join()}function Jh(n,e,t,r){const i=Up(t.T,r);t.delimited?n.tag(t.no,ge.StartGroup).raw(i.toBinary(e)).tag(t.no,ge.EndGroup):n.tag(t.no,ge.LengthDelimited).bytes(i.toBinary(e))}function Qs(n,e,t,r){le(r!==void 0);let[i,s]=jp(e);n.tag(t,i)[s](r)}function V0(n,e,t,r){if(!r.length)return;n.tag(t,ge.LengthDelimited).fork();let[,i]=jp(e);for(let s=0;s<r.length;s++)n[i](r[s]);n.join()}function jp(n){let e=ge.Varint;switch(n){case A.BYTES:case A.STRING:e=ge.LengthDelimited;break;case A.DOUBLE:case A.FIXED64:case A.SFIXED64:e=ge.Bit64;break;case A.FIXED32:case A.SFIXED32:case A.FLOAT:e=ge.Bit32;break}const t=A[n].toLowerCase();return[e,t]}function q0(){return{setEnumType:Op,initPartial(n,e){if(n===void 0)return;const t=e.getType();for(const r of t.fields.byMember()){const i=r.localName,s=e,o=n;if(o[i]!=null)switch(r.kind){case"oneof":const a=o[i].case;if(a===void 0)continue;const l=r.findField(a);let c=o[i].value;l&&l.kind=="message"&&!Si(c,l.T)?c=new l.T(c):l&&l.kind==="scalar"&&l.T===A.BYTES&&(c=Ls(c)),s[i]={case:a,value:c};break;case"scalar":case"enum":let d=o[i];r.T===A.BYTES&&(d=r.repeated?d.map(Ls):Ls(d)),s[i]=d;break;case"map":switch(r.V.kind){case"scalar":case"enum":if(r.V.T===A.BYTES)for(const[y,w]of Object.entries(o[i]))s[i][y]=Ls(w);else Object.assign(s[i],o[i]);break;case"message":const m=r.V.T;for(const y of Object.keys(o[i])){let w=o[i][y];m.fieldWrapper||(w=new m(w)),s[i][y]=w}break}break;case"message":const h=r.T;if(r.repeated)s[i]=o[i].map(m=>Si(m,h)?m:new h(m));else{const m=o[i];h.fieldWrapper?h.typeName==="google.protobuf.BytesValue"?s[i]=Ls(m):s[i]=m:s[i]=Si(m,h)?m:new h(m)}break}}},equals(n,e,t){return e===t?!0:!e||!t?!1:n.fields.byMember().every(r=>{const i=e[r.localName],s=t[r.localName];if(r.repeated){if(i.length!==s.length)return!1;switch(r.kind){case"message":return i.every((o,a)=>r.T.equals(o,s[a]));case"scalar":return i.every((o,a)=>Pr(r.T,o,s[a]));case"enum":return i.every((o,a)=>Pr(A.INT32,o,s[a]))}throw new Error(`repeated cannot contain ${r.kind}`)}switch(r.kind){case"message":return r.T.equals(i,s);case"enum":return Pr(A.INT32,i,s);case"scalar":return Pr(r.T,i,s);case"oneof":if(i.case!==s.case)return!1;const o=r.findField(i.case);if(o===void 0)return!0;switch(o.kind){case"message":return o.T.equals(i.value,s.value);case"enum":return Pr(A.INT32,i.value,s.value);case"scalar":return Pr(o.T,i.value,s.value)}throw new Error(`oneof cannot contain ${o.kind}`);case"map":const a=Object.keys(i).concat(Object.keys(s));switch(r.V.kind){case"message":const l=r.V.T;return a.every(d=>l.equals(i[d],s[d]));case"enum":return a.every(d=>Pr(A.INT32,i[d],s[d]));case"scalar":const c=r.V.T;return a.every(d=>Pr(c,i[d],s[d]))}break}})},clone(n){const e=n.getType(),t=new e,r=t;for(const i of e.fields.byMember()){const s=n[i.localName];let o;if(i.repeated)o=s.map(ia);else if(i.kind=="map"){o=r[i.localName];for(const[a,l]of Object.entries(s))o[a]=ia(l)}else i.kind=="oneof"?o=i.findField(s.case)?{case:s.case,value:ia(s.value)}:{case:void 0}:o=ia(s);r[i.localName]=o}for(const i of e.runtime.bin.listUnknownFields(n))e.runtime.bin.onUnknownField(r,i.no,i.wireType,i.data);return t}}}function ia(n){if(n===void 0)return n;if(Si(n))return n.clone();if(n instanceof Uint8Array){const e=new Uint8Array(n.byteLength);return e.set(n),e}return n}function Ls(n){return n instanceof Uint8Array?n:new Uint8Array(n)}function K0(n,e,t){return{syntax:n,json:B0(),bin:J0(),util:Object.assign(Object.assign({},q0()),{newFieldList:e,initFields:t}),makeMessageType(r,i,s){return w0(this,r,i,s)},makeEnum:v0,makeEnumType:Rp,getEnumType:y0,makeExtension(r,i,s){return C0(this,r,i,s)}}}class W0{constructor(e,t){this._fields=e,this._normalizer=t}findJsonName(e){if(!this.jsonNames){const t={};for(const r of this.list())t[r.jsonName]=t[r.name]=r;this.jsonNames=t}return this.jsonNames[e]}find(e){if(!this.numbers){const t={};for(const r of this.list())t[r.no]=r;this.numbers=t}return this.numbers[e]}list(){return this.all||(this.all=this._normalizer(this._fields)),this.all}byNumber(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort((e,t)=>e.no-t.no)),this.numbersAsc}byMember(){if(!this.members){this.members=[];const e=this.members;let t;for(const r of this.list())r.oneof?r.oneof!==t&&(t=r.oneof,e.push(t)):e.push(r)}return this.members}}function Vp(n,e){const t=qp(n);return e?t:X0(Q0(t))}function _0(n){return Vp(n,!1)}const H0=qp;function qp(n){let e=!1;const t=[];for(let r=0;r<n.length;r++){let i=n.charAt(r);switch(i){case"_":e=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":t.push(i),e=!1;break;default:e&&(e=!1,i=i.toUpperCase()),t.push(i);break}}return t.join("")}const G0=new Set(["constructor","toString","toJSON","valueOf"]),Y0=new Set(["getType","clone","equals","fromBinary","fromJson","fromJsonString","toBinary","toJson","toJsonString","toObject"]),Kp=n=>`${n}$`,Q0=n=>Y0.has(n)?Kp(n):n,X0=n=>G0.has(n)?Kp(n):n;class Z0{constructor(e){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.req=!1,this.default=void 0,this.fields=[],this.name=e,this.localName=_0(e)}addField(e){le(e.oneof===this,`field ${e.name} not one of ${this.name}`),this.fields.push(e)}findField(e){if(!this._lookup){this._lookup=Object.create(null);for(let t=0;t<this.fields.length;t++)this._lookup[this.fields[t].localName]=this.fields[t]}return this._lookup[e]}}function eS(n,e){var t,r,i,s,o,a;const l=[];let c;for(const d of typeof n=="function"?n():n){const h=d;if(h.localName=Vp(d.name,d.oneof!==void 0),h.jsonName=(t=d.jsonName)!==null&&t!==void 0?t:H0(d.name),h.repeated=(r=d.repeated)!==null&&r!==void 0?r:!1,d.kind=="scalar"&&(h.L=(i=d.L)!==null&&i!==void 0?i:ei.BIGINT),h.delimited=(s=d.delimited)!==null&&s!==void 0?s:!1,h.req=(o=d.req)!==null&&o!==void 0?o:!1,h.opt=(a=d.opt)!==null&&a!==void 0?a:!1,d.packed===void 0&&(h.packed=d.kind=="enum"||d.kind=="scalar"&&d.T!=A.BYTES&&d.T!=A.STRING),d.oneof!==void 0){const m=typeof d.oneof=="string"?d.oneof:d.oneof.name;(!c||c.name!=m)&&(c=new Z0(m)),h.oneof=c,c.addField(h)}l.push(h)}return l}const f=K0("proto3",n=>new W0(n,e=>eS(e)),n=>{for(const e of n.getType().fields.byMember()){if(e.opt)continue;const t=e.localName,r=n;if(e.repeated){r[t]=[];continue}switch(e.kind){case"oneof":r[t]={case:void 0};break;case"enum":r[t]=0;break;case"map":r[t]={};break;case"scalar":r[t]=ds(e.T,e.L);break}}});var Me;(function(n){n[n.Unary=0]="Unary",n[n.ServerStreaming=1]="ServerStreaming",n[n.ClientStreaming=2]="ClientStreaming",n[n.BiDiStreaming=3]="BiDiStreaming"})(Me||(Me={}));var $h;(function(n){n[n.NoSideEffects=1]="NoSideEffects",n[n.Idempotent=2]="Idempotent"})($h||($h={}));class Re extends O{constructor(e){super(),this.seconds=ne.zero,this.nanos=0,f.util.initPartial(e,this)}fromJson(e,t){if(typeof e!="string")throw new Error(`cannot decode google.protobuf.Timestamp from JSON: ${f.json.debug(e)}`);const r=e.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!r)throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");const i=Date.parse(r[1]+"-"+r[2]+"-"+r[3]+"T"+r[4]+":"+r[5]+":"+r[6]+(r[8]?r[8]:"Z"));if(Number.isNaN(i))throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");if(i<Date.parse("0001-01-01T00:00:00Z")||i>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot decode message google.protobuf.Timestamp from JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");return this.seconds=ne.parse(i/1e3),this.nanos=0,r[7]&&(this.nanos=parseInt("1"+r[7]+"0".repeat(9-r[7].length))-1e9),this}toJson(e){const t=Number(this.seconds)*1e3;if(t<Date.parse("0001-01-01T00:00:00Z")||t>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot encode google.protobuf.Timestamp to JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");if(this.nanos<0)throw new Error("cannot encode google.protobuf.Timestamp to JSON: nanos must not be negative");let r="Z";if(this.nanos>0){const i=(this.nanos+1e9).toString().substring(1);i.substring(3)==="000000"?r="."+i.substring(0,3)+"Z":i.substring(6)==="000"?r="."+i.substring(0,6)+"Z":r="."+i+"Z"}return new Date(t).toISOString().replace(".000Z",r)}toDate(){return new Date(Number(this.seconds)*1e3+Math.ceil(this.nanos/1e6))}static now(){return Re.fromDate(new Date)}static fromDate(e){const t=e.getTime();return new Re({seconds:ne.parse(Math.floor(t/1e3)),nanos:t%1e3*1e6})}static fromBinary(e,t){return new Re().fromBinary(e,t)}static fromJson(e,t){return new Re().fromJson(e,t)}static fromJsonString(e,t){return new Re().fromJsonString(e,t)}static equals(e,t){return f.util.equals(Re,e,t)}}Re.runtime=f;Re.typeName="google.protobuf.Timestamp";Re.fields=f.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);class gr extends O{constructor(e){super(),this.seconds=ne.zero,this.nanos=0,f.util.initPartial(e,this)}fromJson(e,t){if(typeof e!="string")throw new Error(`cannot decode google.protobuf.Duration from JSON: ${f.json.debug(e)}`);const r=e.match(/^(-?[0-9]+)(?:\.([0-9]+))?s/);if(r===null)throw new Error(`cannot decode google.protobuf.Duration from JSON: ${f.json.debug(e)}`);const i=Number(r[1]);if(i>315576e6||i<-315576e6)throw new Error(`cannot decode google.protobuf.Duration from JSON: ${f.json.debug(e)}`);if(this.seconds=ne.parse(i),typeof r[2]=="string"){const s=r[2]+"0".repeat(9-r[2].length);this.nanos=parseInt(s),(i<0||Object.is(i,-0))&&(this.nanos=-this.nanos)}return this}toJson(e){if(Number(this.seconds)>315576e6||Number(this.seconds)<-315576e6)throw new Error("cannot encode google.protobuf.Duration to JSON: value out of range");let t=this.seconds.toString();if(this.nanos!==0){let r=Math.abs(this.nanos).toString();r="0".repeat(9-r.length)+r,r.substring(3)==="000000"?r=r.substring(0,3):r.substring(6)==="000"&&(r=r.substring(0,6)),t+="."+r,this.nanos<0&&Number(this.seconds)==0&&(t="-"+t)}return t+"s"}static fromBinary(e,t){return new gr().fromBinary(e,t)}static fromJson(e,t){return new gr().fromJson(e,t)}static fromJsonString(e,t){return new gr().fromJsonString(e,t)}static equals(e,t){return f.util.equals(gr,e,t)}}gr.runtime=f;gr.typeName="google.protobuf.Duration";gr.fields=f.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);class _t extends O{constructor(e){super(),this.typeUrl="",this.value=new Uint8Array(0),f.util.initPartial(e,this)}toJson(e){var t;if(this.typeUrl==="")return{};const r=this.typeUrlToName(this.typeUrl),i=(t=e==null?void 0:e.typeRegistry)===null||t===void 0?void 0:t.findMessage(r);if(!i)throw new Error(`cannot encode message google.protobuf.Any to JSON: "${this.typeUrl}" is not in the type registry`);let o=i.fromBinary(this.value).toJson(e);return(r.startsWith("google.protobuf.")||o===null||Array.isArray(o)||typeof o!="object")&&(o={value:o}),o["@type"]=this.typeUrl,o}fromJson(e,t){var r;if(e===null||Array.isArray(e)||typeof e!="object")throw new Error(`cannot decode message google.protobuf.Any from JSON: expected object but got ${e===null?"null":Array.isArray(e)?"array":typeof e}`);if(Object.keys(e).length==0)return this;const i=e["@type"];if(typeof i!="string"||i=="")throw new Error('cannot decode message google.protobuf.Any from JSON: "@type" is empty');const s=this.typeUrlToName(i),o=(r=t==null?void 0:t.typeRegistry)===null||r===void 0?void 0:r.findMessage(s);if(!o)throw new Error(`cannot decode message google.protobuf.Any from JSON: ${i} is not in the type registry`);let a;if(s.startsWith("google.protobuf.")&&Object.prototype.hasOwnProperty.call(e,"value"))a=o.fromJson(e.value,t);else{const l=Object.assign({},e);delete l["@type"],a=o.fromJson(l,t)}return this.packFrom(a),this}packFrom(e){this.value=e.toBinary(),this.typeUrl=this.typeNameToUrl(e.getType().typeName)}unpackTo(e){return this.is(e.getType())?(e.fromBinary(this.value),!0):!1}unpack(e){if(this.typeUrl==="")return;const t=e.findMessage(this.typeUrlToName(this.typeUrl));if(t)return t.fromBinary(this.value)}is(e){if(this.typeUrl==="")return!1;const t=this.typeUrlToName(this.typeUrl);let r="";return typeof e=="string"?r=e:r=e.typeName,t===r}typeNameToUrl(e){return`type.googleapis.com/${e}`}typeUrlToName(e){if(!e.length)throw new Error(`invalid type url: ${e}`);const t=e.lastIndexOf("/"),r=t>=0?e.substring(t+1):e;if(!r.length)throw new Error(`invalid type url: ${e}`);return r}static pack(e){const t=new _t;return t.packFrom(e),t}static fromBinary(e,t){return new _t().fromBinary(e,t)}static fromJson(e,t){return new _t().fromJson(e,t)}static fromJsonString(e,t){return new _t().fromJsonString(e,t)}static equals(e,t){return f.util.equals(_t,e,t)}}_t.runtime=f;_t.typeName="google.protobuf.Any";_t.fields=f.util.newFieldList(()=>[{no:1,name:"type_url",kind:"scalar",T:9},{no:2,name:"value",kind:"scalar",T:12}]);class Ht extends O{constructor(e){super(),this.value=0,f.util.initPartial(e,this)}toJson(e){return f.json.writeScalar(A.DOUBLE,this.value,!0)}fromJson(e,t){try{this.value=f.json.readScalar(A.DOUBLE,e)}catch(r){let i='cannot decode message google.protobuf.DoubleValue from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new Ht().fromBinary(e,t)}static fromJson(e,t){return new Ht().fromJson(e,t)}static fromJsonString(e,t){return new Ht().fromJsonString(e,t)}static equals(e,t){return f.util.equals(Ht,e,t)}}Ht.runtime=f;Ht.typeName="google.protobuf.DoubleValue";Ht.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:1}]);Ht.fieldWrapper={wrapField(n){return new Ht({value:n})},unwrapField(n){return n.value}};class Gt extends O{constructor(e){super(),this.value=0,f.util.initPartial(e,this)}toJson(e){return f.json.writeScalar(A.FLOAT,this.value,!0)}fromJson(e,t){try{this.value=f.json.readScalar(A.FLOAT,e)}catch(r){let i='cannot decode message google.protobuf.FloatValue from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new Gt().fromBinary(e,t)}static fromJson(e,t){return new Gt().fromJson(e,t)}static fromJsonString(e,t){return new Gt().fromJsonString(e,t)}static equals(e,t){return f.util.equals(Gt,e,t)}}Gt.runtime=f;Gt.typeName="google.protobuf.FloatValue";Gt.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:2}]);Gt.fieldWrapper={wrapField(n){return new Gt({value:n})},unwrapField(n){return n.value}};class Yt extends O{constructor(e){super(),this.value=ne.zero,f.util.initPartial(e,this)}toJson(e){return f.json.writeScalar(A.INT64,this.value,!0)}fromJson(e,t){try{this.value=f.json.readScalar(A.INT64,e)}catch(r){let i='cannot decode message google.protobuf.Int64Value from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new Yt().fromBinary(e,t)}static fromJson(e,t){return new Yt().fromJson(e,t)}static fromJsonString(e,t){return new Yt().fromJsonString(e,t)}static equals(e,t){return f.util.equals(Yt,e,t)}}Yt.runtime=f;Yt.typeName="google.protobuf.Int64Value";Yt.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:3}]);Yt.fieldWrapper={wrapField(n){return new Yt({value:n})},unwrapField(n){return n.value}};class Qt extends O{constructor(e){super(),this.value=ne.zero,f.util.initPartial(e,this)}toJson(e){return f.json.writeScalar(A.UINT64,this.value,!0)}fromJson(e,t){try{this.value=f.json.readScalar(A.UINT64,e)}catch(r){let i='cannot decode message google.protobuf.UInt64Value from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new Qt().fromBinary(e,t)}static fromJson(e,t){return new Qt().fromJson(e,t)}static fromJsonString(e,t){return new Qt().fromJsonString(e,t)}static equals(e,t){return f.util.equals(Qt,e,t)}}Qt.runtime=f;Qt.typeName="google.protobuf.UInt64Value";Qt.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:4}]);Qt.fieldWrapper={wrapField(n){return new Qt({value:n})},unwrapField(n){return n.value}};class Xt extends O{constructor(e){super(),this.value=0,f.util.initPartial(e,this)}toJson(e){return f.json.writeScalar(A.INT32,this.value,!0)}fromJson(e,t){try{this.value=f.json.readScalar(A.INT32,e)}catch(r){let i='cannot decode message google.protobuf.Int32Value from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new Xt().fromBinary(e,t)}static fromJson(e,t){return new Xt().fromJson(e,t)}static fromJsonString(e,t){return new Xt().fromJsonString(e,t)}static equals(e,t){return f.util.equals(Xt,e,t)}}Xt.runtime=f;Xt.typeName="google.protobuf.Int32Value";Xt.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:5}]);Xt.fieldWrapper={wrapField(n){return new Xt({value:n})},unwrapField(n){return n.value}};class Zt extends O{constructor(e){super(),this.value=0,f.util.initPartial(e,this)}toJson(e){return f.json.writeScalar(A.UINT32,this.value,!0)}fromJson(e,t){try{this.value=f.json.readScalar(A.UINT32,e)}catch(r){let i='cannot decode message google.protobuf.UInt32Value from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new Zt().fromBinary(e,t)}static fromJson(e,t){return new Zt().fromJson(e,t)}static fromJsonString(e,t){return new Zt().fromJsonString(e,t)}static equals(e,t){return f.util.equals(Zt,e,t)}}Zt.runtime=f;Zt.typeName="google.protobuf.UInt32Value";Zt.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:13}]);Zt.fieldWrapper={wrapField(n){return new Zt({value:n})},unwrapField(n){return n.value}};class en extends O{constructor(e){super(),this.value=!1,f.util.initPartial(e,this)}toJson(e){return f.json.writeScalar(A.BOOL,this.value,!0)}fromJson(e,t){try{this.value=f.json.readScalar(A.BOOL,e)}catch(r){let i='cannot decode message google.protobuf.BoolValue from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new en().fromBinary(e,t)}static fromJson(e,t){return new en().fromJson(e,t)}static fromJsonString(e,t){return new en().fromJsonString(e,t)}static equals(e,t){return f.util.equals(en,e,t)}}en.runtime=f;en.typeName="google.protobuf.BoolValue";en.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:8}]);en.fieldWrapper={wrapField(n){return new en({value:n})},unwrapField(n){return n.value}};class Xe extends O{constructor(e){super(),this.value="",f.util.initPartial(e,this)}toJson(e){return f.json.writeScalar(A.STRING,this.value,!0)}fromJson(e,t){try{this.value=f.json.readScalar(A.STRING,e)}catch(r){let i='cannot decode message google.protobuf.StringValue from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new Xe().fromBinary(e,t)}static fromJson(e,t){return new Xe().fromJson(e,t)}static fromJsonString(e,t){return new Xe().fromJsonString(e,t)}static equals(e,t){return f.util.equals(Xe,e,t)}}Xe.runtime=f;Xe.typeName="google.protobuf.StringValue";Xe.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:9}]);Xe.fieldWrapper={wrapField(n){return new Xe({value:n})},unwrapField(n){return n.value}};class tn extends O{constructor(e){super(),this.value=new Uint8Array(0),f.util.initPartial(e,this)}toJson(e){return f.json.writeScalar(A.BYTES,this.value,!0)}fromJson(e,t){try{this.value=f.json.readScalar(A.BYTES,e)}catch(r){let i='cannot decode message google.protobuf.BytesValue from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new tn().fromBinary(e,t)}static fromJson(e,t){return new tn().fromJson(e,t)}static fromJsonString(e,t){return new tn().fromJsonString(e,t)}static equals(e,t){return f.util.equals(tn,e,t)}}tn.runtime=f;tn.typeName="google.protobuf.BytesValue";tn.fields=f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:12}]);tn.fieldWrapper={wrapField(n){return new tn({value:n})},unwrapField(n){return n.value}};function tS(n,e,t){try{const r=_f.dec(n);return e?e.fromBinary(r,t):r}catch(r){throw G.from(r,V.DataLoss)}}function nS(n,e){const t={};for(const[r,i]of Object.entries(n.methods)){const s=e(Object.assign(Object.assign({},i),{localName:r,service:n}));s!=null&&(t[r]=s)}return t}const Uh=1;function jh(n){let e,t=new Uint8Array(0);function r(i){const s=new Uint8Array(t.length+i.length);s.set(t),s.set(i,t.length),t=s}return new ReadableStream({start(){e=n.getReader()},async pull(i){let s;for(;;){if(s===void 0&&t.byteLength>=5){let l=0;for(let c=1;c<5;c++)l=(l<<8)+t[c];s={flags:t[0],length:l}}if(s!==void 0&&t.byteLength>=s.length+5)break;const a=await e.read();if(a.done)break;r(a.value)}if(s===void 0){if(t.byteLength==0){i.close();return}i.error(new G("premature end of stream",V.DataLoss));return}const o=t.subarray(5,5+s.length);t=t.subarray(5+s.length),i.enqueue({flags:s.flags,data:o})}})}function Vh(n,e){const t=new Uint8Array(e.length+5);t.set(e,5);const r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.setUint8(0,n),r.setUint32(1,e.length),t}var rS=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof __values=="function"?__values(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,l){o=n[s](o),i(a,l,o.done,o.value)})}}function i(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}},wo=function(n){return this instanceof wo?(this.v=n,this):new wo(n)},iS=function(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i={},a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(y){return function(w){return Promise.resolve(w).then(y,h)}}function a(y,w){r[y]&&(i[y]=function(T){return new Promise(function(P,p){s.push([y,T,P,p])>1||l(y,T)})},w&&(i[y]=w(i[y])))}function l(y,w){try{c(r[y](w))}catch(T){m(s[0][3],T)}}function c(y){y.value instanceof wo?Promise.resolve(y.value.v).then(d,h):m(s[0][2],y)}function d(y){l("next",y)}function h(y){l("throw",y)}function m(y,w){y(w),s.shift(),s.length&&l(s[0][0],s[0][1])}},sS=function(n){var e,t;return e={},r("next"),r("throw",function(i){throw i}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(i,s){e[i]=n[i]?function(o){return(t=!t)?{value:wo(n[i](o)),done:!1}:s?s(o):o}:s}};function oS(n){return iS(this,arguments,function*(){yield wo(yield*sS(rS(n)))})}var Wp=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof __values=="function"?__values(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,l){o=n[s](o),i(a,l,o.done,o.value)})}}function i(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}},hs=function(n){return this instanceof hs?(this.v=n,this):new hs(n)},aS=function(n){var e,t;return e={},r("next"),r("throw",function(i){throw i}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(i,s){e[i]=n[i]?function(o){return(t=!t)?{value:hs(n[i](o)),done:!1}:s?s(o):o}:s}},lS=function(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i={},a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(y){return function(w){return Promise.resolve(w).then(y,h)}}function a(y,w){r[y]&&(i[y]=function(T){return new Promise(function(P,p){s.push([y,T,P,p])>1||l(y,T)})},w&&(i[y]=w(i[y])))}function l(y,w){try{c(r[y](w))}catch(T){m(s[0][3],T)}}function c(y){y.value instanceof hs?Promise.resolve(y.value.v).then(d,h):m(s[0][2],y)}function d(y){l("next",y)}function h(y){l("throw",y)}function m(y,w){y(w),s.shift(),s.length&&l(s[0][0],s[0][1])}};function uS(n,e){return nS(n,t=>{switch(t.kind){case Me.Unary:return cS(e,n,t);case Me.ServerStreaming:return fS(e,n,t);case Me.ClientStreaming:return dS(e,n,t);case Me.BiDiStreaming:return hS(e,n,t);default:return null}})}function cS(n,e,t){return async function(r,i){var s,o;const a=await n.unary(e,t,i==null?void 0:i.signal,i==null?void 0:i.timeoutMs,i==null?void 0:i.headers,r,i==null?void 0:i.contextValues);return(s=i==null?void 0:i.onHeader)===null||s===void 0||s.call(i,a.header),(o=i==null?void 0:i.onTrailer)===null||o===void 0||o.call(i,a.trailer),a.message}}function fS(n,e,t){return function(r,i){return _p(n.stream(e,t,i==null?void 0:i.signal,i==null?void 0:i.timeoutMs,i==null?void 0:i.headers,oS([r]),i==null?void 0:i.contextValues),i)}}function dS(n,e,t){return async function(r,i){var s,o,a,l,c,d;const h=await n.stream(e,t,i==null?void 0:i.signal,i==null?void 0:i.timeoutMs,i==null?void 0:i.headers,r,i==null?void 0:i.contextValues);(c=i==null?void 0:i.onHeader)===null||c===void 0||c.call(i,h.header);let m,y=0;try{for(var w=!0,T=Wp(h.message),P;P=await T.next(),s=P.done,!s;w=!0)l=P.value,w=!1,m=l,y++}catch(p){o={error:p}}finally{try{!w&&!s&&(a=T.return)&&await a.call(T)}finally{if(o)throw o.error}}if(!m)throw new G("protocol error: missing response message",V.Unimplemented);if(y>1)throw new G("protocol error: received extra messages for client streaming method",V.Unimplemented);return(d=i==null?void 0:i.onTrailer)===null||d===void 0||d.call(i,h.trailer),m}}function hS(n,e,t){return function(r,i){return _p(n.stream(e,t,i==null?void 0:i.signal,i==null?void 0:i.timeoutMs,i==null?void 0:i.headers,r,i==null?void 0:i.contextValues),i)}}function _p(n,e){const t=function(){return lS(this,arguments,function*(){var r,i;const s=yield hs(n);(r=e==null?void 0:e.onHeader)===null||r===void 0||r.call(e,s.header),yield hs(yield*aS(Wp(s.message))),(i=e==null?void 0:e.onTrailer)===null||i===void 0||i.call(e,s.trailer)})}()[Symbol.asyncIterator]();return{[Symbol.asyncIterator]:()=>({next:()=>t.next()})}}function gS(...n){const e=new AbortController,t=n.filter(i=>i!==void 0).concat(e.signal);for(const i of t){if(i.aborted){r.apply(i);break}i.addEventListener("abort",r)}function r(){e.signal.aborted||e.abort(Hp(this));for(const i of t)i.removeEventListener("abort",r)}return e}function mS(n){const e=new AbortController,t=()=>{e.abort(new G("the operation timed out",V.DeadlineExceeded))};let r;return n!==void 0&&(n<=0?t():r=setTimeout(t,n)),{signal:e.signal,cleanup:()=>clearTimeout(r)}}function Hp(n){if(!n.aborted)return;if(n.reason!==void 0)return n.reason;const e=new Error("This operation was aborted");return e.name="AbortError",e}function qh(){return{get(n){return n.id in this?this[n.id]:n.defaultValue},set(n,e){return this[n.id]=e,this},delete(n){return delete this[n.id],this}}}const Tu=128;function Kh(n){const e=new Headers,t=new TextDecoder().decode(n).split(`\r
`);for(const r of t){if(r==="")continue;const i=r.indexOf(":");if(i>0){const s=r.substring(0,i).trim(),o=r.substring(i+1).trim();e.append(s,o)}}return e}const pS="Content-Type",yS="Grpc-Timeout",gs="Grpc-Status",Gp="Grpc-Message",vS="Grpc-Status-Details-Bin",wS="X-User-Agent",SS="X-Grpc-Web",kS="application/grpc-web+proto",TS="application/grpc-web+json";class mr extends O{constructor(e){super(),this.code=0,this.message="",this.details=[],f.util.initPartial(e,this)}static fromBinary(e,t){return new mr().fromBinary(e,t)}static fromJson(e,t){return new mr().fromJson(e,t)}static fromJsonString(e,t){return new mr().fromJsonString(e,t)}static equals(e,t){return f.util.equals(mr,e,t)}}mr.runtime=f;mr.typeName="google.rpc.Status";mr.fields=f.util.newFieldList(()=>[{no:1,name:"code",kind:"scalar",T:5},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"details",kind:"message",T:_t,repeated:!0}]);const AS="0";function Yp(n){var e;const t=n.get(vS);if(t!=null){const i=tS(t,mr);if(i.code==0)return;const s=new G(i.message,i.code,n);return s.details=i.details.map(o=>({type:o.typeUrl.substring(o.typeUrl.lastIndexOf("/")+1),value:o.value})),s}const r=n.get(gs);if(r!=null){if(r===AS)return;const i=parseInt(r,10);return i in V?new G(decodeURIComponent((e=n.get(Gp))!==null&&e!==void 0?e:""),i,n):new G(`invalid grpc-status: ${r}`,V.Internal,n)}}function Wh(n,e,t){const r=typeof e=="string"?e:e.typeName,i=typeof t=="string"?t:t.name;return n.toString().replace(/\/?$/,`/${r}/${i}`)}function Qp(n,e){return e instanceof n?e:new n(e)}function IS(n,e){function t(r){return r.done===!0?r:{done:r.done,value:Qp(n,r.value)}}return{[Symbol.asyncIterator](){const r=e[Symbol.asyncIterator](),i={next:()=>r.next().then(t)};return r.throw!==void 0&&(i.throw=s=>r.throw(s).then(t)),r.return!==void 0&&(i.return=s=>r.return(s).then(t)),i}}}function Xp(n,e){var t;return(t=e==null?void 0:e.concat().reverse().reduce((r,i)=>i(r),n))!==null&&t!==void 0?t:n}function ES(n){var e;const t=Object.assign({},n);return(e=t.ignoreUnknownFields)!==null&&e!==void 0||(t.ignoreUnknownFields=!0),t}function _h(n,e,t,r){const i=e?Hh(n.I,r):Gh(n.I,t);return{parse:(e?Hh(n.O,r):Gh(n.O,t)).parse,serialize:i.serialize}}function Hh(n,e){return{parse(t){try{return n.fromBinary(t,e)}catch(r){const i=r instanceof Error?r.message:String(r);throw new G(`parse binary: ${i}`,V.Internal)}},serialize(t){try{return t.toBinary(e)}catch(r){const i=r instanceof Error?r.message:String(r);throw new G(`serialize binary: ${i}`,V.Internal)}}}}function Gh(n,e){var t,r;const i=(t=e==null?void 0:e.textEncoder)!==null&&t!==void 0?t:new TextEncoder,s=(r=e==null?void 0:e.textDecoder)!==null&&r!==void 0?r:new TextDecoder,o=ES(e);return{parse(a){try{const l=s.decode(a);return n.fromJsonString(l,o)}catch(l){throw G.from(l,V.InvalidArgument)}},serialize(a){try{const l=a.toJsonString(o);return i.encode(l)}catch(l){throw G.from(l,V.Internal)}}}}function xS(n){const e=Xp(n.next,n.interceptors),[t,r,i]=Zp(n),s=Object.assign(Object.assign({},n.req),{message:Qp(n.req.method.I,n.req.message),signal:t});return e(s).then(o=>(i(),o),r)}function CS(n){const e=Xp(n.next,n.interceptors),[t,r,i]=Zp(n),s=Object.assign(Object.assign({},n.req),{message:IS(n.req.method.I,n.req.message),signal:t});let o=!1;return t.addEventListener("abort",function(){var a,l;const c=n.req.message[Symbol.asyncIterator]();o||(a=c.throw)===null||a===void 0||a.call(c,this.reason).catch(()=>{}),(l=c.return)===null||l===void 0||l.call(c).catch(()=>{})}),e(s).then(a=>Object.assign(Object.assign({},a),{message:{[Symbol.asyncIterator](){const l=a.message[Symbol.asyncIterator]();return{next(){return l.next().then(c=>(c.done==!0&&(o=!0,i()),c),r)}}}}}),r)}function Zp(n){const{signal:e,cleanup:t}=mS(n.timeoutMs),r=gS(n.signal,e);return[r.signal,function(s){const o=G.from(e.aborted?Hp(e):s);return r.abort(o),t(),Promise.reject(o)},function(){t(),r.abort()}]}function NS(){try{new Headers}catch{throw new Error("connect-web requires the fetch API. Are you running on an old version of Node.js? Node.js is not supported in Connect for Web - please stay tuned for Connect for Node.")}}function Yh(n,e){const t=Yp(n);if(t)throw e.forEach((r,i)=>{t.metadata.append(i,r)}),t;if(!e.has(gs)&&!n.has(gs))throw new G("protocol error: missing status",V.Internal)}function Qh(n,e,t,r){const i=new Headers(t??{});return i.set(pS,n?kS:TS),i.set(SS,"1"),i.set(wS,"connect-es/1.6.1"),e!==void 0&&i.set(yS,`${e}m`),i}function PS(n){switch(n){case 400:return V.Internal;case 401:return V.Unauthenticated;case 403:return V.PermissionDenied;case 404:return V.Unimplemented;case 429:return V.Unavailable;case 502:return V.Unavailable;case 503:return V.Unavailable;case 504:return V.Unavailable;default:return V.Unknown}}function Xh(n,e){var t;if(n>=200&&n<300)return{foundStatus:e.has(gs),headerError:Yp(e)};throw new G(decodeURIComponent((t=e.get(Gp))!==null&&t!==void 0?t:`HTTP ${n}`),PS(n),e)}var pi=function(n){return this instanceof pi?(this.v=n,this):new pi(n)},DS=function(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i={},a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(y){return function(w){return Promise.resolve(w).then(y,h)}}function a(y,w){r[y]&&(i[y]=function(T){return new Promise(function(P,p){s.push([y,T,P,p])>1||l(y,T)})},w&&(i[y]=w(i[y])))}function l(y,w){try{c(r[y](w))}catch(T){m(s[0][3],T)}}function c(y){y.value instanceof pi?Promise.resolve(y.value.v).then(d,h):m(s[0][2],y)}function d(y){l("next",y)}function h(y){l("throw",y)}function m(y,w){y(w),s.shift(),s.length&&l(s[0][0],s[0][1])}};function OS(n){var e;NS();const t=(e=n.useBinaryFormat)!==null&&e!==void 0?e:!0;return{async unary(r,i,s,o,a,l,c){var d;const{serialize:h,parse:m}=_h(i,t,n.jsonOptions,n.binaryOptions);return o=o===void 0?n.defaultTimeoutMs:o<=0?void 0:o,await xS({interceptors:n.interceptors,signal:s,timeoutMs:o,req:{stream:!1,service:r,method:i,url:Wh(n.baseUrl,r,i),init:{method:"POST",credentials:(d=n.credentials)!==null&&d!==void 0?d:"same-origin",redirect:"error",mode:"cors"},header:Qh(t,o,a),contextValues:c??qh(),message:l},next:async y=>{var w;const P=await((w=n.fetch)!==null&&w!==void 0?w:globalThis.fetch)(y.url,Object.assign(Object.assign({},y.init),{headers:y.header,signal:y.signal,body:Vh(0,h(y.message))})),{headerError:p}=Xh(P.status,P.headers);if(!P.body)throw p!==void 0?p:"missing response body";const g=jh(P.body).getReader();let v,I;for(;;){const E=await g.read();if(E.done)break;const{flags:N,data:D}=E.value;if((N&Uh)===Uh)throw new G("protocol error: received unsupported compressed output",V.Internal);if(N===Tu){if(v!==void 0)throw"extra trailer";v=Kh(D);continue}if(I!==void 0)throw new G("extra message",V.Unimplemented);I=m(D)}if(v===void 0)throw p!==void 0?p:new G("missing trailer",P.headers.has(gs)?V.Unimplemented:V.Unknown);if(Yh(v,P.headers),I===void 0)throw new G("missing message",v.has(gs)?V.Unimplemented:V.Unknown);return{stream:!1,service:r,method:i,header:P.headers,message:I,trailer:v}}})},async stream(r,i,s,o,a,l,c){var d;const{serialize:h,parse:m}=_h(i,t,n.jsonOptions,n.binaryOptions);function y(T,P,p,g,v){return DS(this,arguments,function*(){const E=jh(T).getReader();if(P){if(!(yield pi(E.read())).done)throw"extra data for trailers-only";return yield pi(void 0)}let N=!1;for(;;){const D=yield pi(E.read());if(D.done)break;const{flags:R,data:W}=D.value;if((R&Tu)===Tu){if(N)throw"extra trailer";N=!0;const J=Kh(W);Yh(J,g),J.forEach((Se,Ut)=>p.set(Ut,Se));continue}if(N)throw"extra message";yield yield pi(m(W))}if("throwIfAborted"in v&&v.throwIfAborted(),!N)throw"missing trailer"})}async function w(T){if(i.kind!=Me.ServerStreaming)throw"The fetch API does not support streaming request bodies";const P=await T[Symbol.asyncIterator]().next();if(P.done==!0)throw"missing request message";return Vh(0,h(P.value))}return o=o===void 0?n.defaultTimeoutMs:o<=0?void 0:o,CS({interceptors:n.interceptors,signal:s,timeoutMs:o,req:{stream:!0,service:r,method:i,url:Wh(n.baseUrl,r,i),init:{method:"POST",credentials:(d=n.credentials)!==null&&d!==void 0?d:"same-origin",redirect:"error",mode:"cors"},header:Qh(t,o,a),contextValues:c??qh(),message:l},next:async T=>{var P;const g=await((P=n.fetch)!==null&&P!==void 0?P:globalThis.fetch)(T.url,Object.assign(Object.assign({},T.init),{headers:T.header,signal:T.signal,body:await w(T.message)})),{foundStatus:v,headerError:I}=Xh(g.status,g.headers);if(I!=null)throw I;if(!g.body)throw"missing response body";const E=new Headers;return Object.assign(Object.assign({},T),{header:g.headers,trailer:E,message:y(g.body,v,E,g.headers,T.signal)})}})}}}var $=(n=>(n[n.NULL=0]="NULL",n[n.BOOLEAN=1]="BOOLEAN",n[n.INTEGER=2]="INTEGER",n[n.LONG=3]="LONG",n[n.DOUBLE=4]="DOUBLE",n[n.STRING=5]="STRING",n[n.BYTES=6]="BYTES",n[n.DATE=7]="DATE",n[n.JSON_OBJECT=8]="JSON_OBJECT",n[n.JSON_ARRAY=9]="JSON_ARRAY",n[n.TEXT=10]="TEXT",n[n.INTEGER_CNT=11]="INTEGER_CNT",n[n.LONG_CNT=12]="LONG_CNT",n[n.TREE=13]="TREE",n))($||{});f.util.setEnumType($,"yorkie.v1.ValueType",[{no:0,name:"VALUE_TYPE_NULL"},{no:1,name:"VALUE_TYPE_BOOLEAN"},{no:2,name:"VALUE_TYPE_INTEGER"},{no:3,name:"VALUE_TYPE_LONG"},{no:4,name:"VALUE_TYPE_DOUBLE"},{no:5,name:"VALUE_TYPE_STRING"},{no:6,name:"VALUE_TYPE_BYTES"},{no:7,name:"VALUE_TYPE_DATE"},{no:8,name:"VALUE_TYPE_JSON_OBJECT"},{no:9,name:"VALUE_TYPE_JSON_ARRAY"},{no:10,name:"VALUE_TYPE_TEXT"},{no:11,name:"VALUE_TYPE_INTEGER_CNT"},{no:12,name:"VALUE_TYPE_LONG_CNT"},{no:13,name:"VALUE_TYPE_TREE"}]);var ki=(n=>(n[n.DOCUMENT_CHANGED=0]="DOCUMENT_CHANGED",n[n.DOCUMENT_WATCHED=1]="DOCUMENT_WATCHED",n[n.DOCUMENT_UNWATCHED=2]="DOCUMENT_UNWATCHED",n[n.DOCUMENT_BROADCAST=3]="DOCUMENT_BROADCAST",n))(ki||{});f.util.setEnumType(ki,"yorkie.v1.DocEventType",[{no:0,name:"DOC_EVENT_TYPE_DOCUMENT_CHANGED"},{no:1,name:"DOC_EVENT_TYPE_DOCUMENT_WATCHED"},{no:2,name:"DOC_EVENT_TYPE_DOCUMENT_UNWATCHED"},{no:3,name:"DOC_EVENT_TYPE_DOCUMENT_BROADCAST"}]);const cn=class cn extends O{constructor(t){super();u(this,"root");u(this,"presences",{});f.util.initPartial(t,this)}static fromBinary(t,r){return new cn().fromBinary(t,r)}static fromJson(t,r){return new cn().fromJson(t,r)}static fromJsonString(t,r){return new cn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(cn,t,r)}};u(cn,"runtime",f),u(cn,"typeName","yorkie.v1.Snapshot"),u(cn,"fields",f.util.newFieldList(()=>[{no:1,name:"root",kind:"message",T:Ge},{no:2,name:"presences",kind:"map",K:9,V:{kind:"message",T:Gf}}]));let Ac=cn;var ut;let Cr=(ut=class extends O{constructor(t){super();u(this,"documentKey","");u(this,"checkpoint");u(this,"snapshot",new Uint8Array(0));u(this,"changes",[]);u(this,"minSyncedTicket");u(this,"isRemoved",!1);u(this,"versionVector");f.util.initPartial(t,this)}static fromBinary(t,r){return new ut().fromBinary(t,r)}static fromJson(t,r){return new ut().fromJson(t,r)}static fromJsonString(t,r){return new ut().fromJsonString(t,r)}static equals(t,r){return f.util.equals(ut,t,r)}},u(ut,"runtime",f),u(ut,"typeName","yorkie.v1.ChangePack"),u(ut,"fields",f.util.newFieldList(()=>[{no:1,name:"document_key",kind:"scalar",T:9},{no:2,name:"checkpoint",kind:"message",T:ny},{no:3,name:"snapshot",kind:"scalar",T:12},{no:4,name:"changes",kind:"message",T:ey,repeated:!0},{no:5,name:"min_synced_ticket",kind:"message",T:b},{no:6,name:"is_removed",kind:"scalar",T:8},{no:7,name:"version_vector",kind:"message",T:$l}])),ut);var ct;let ey=(ct=class extends O{constructor(t){super();u(this,"id");u(this,"message","");u(this,"operations",[]);u(this,"presenceChange");f.util.initPartial(t,this)}static fromBinary(t,r){return new ct().fromBinary(t,r)}static fromJson(t,r){return new ct().fromJson(t,r)}static fromJsonString(t,r){return new ct().fromJsonString(t,r)}static equals(t,r){return f.util.equals(ct,t,r)}},u(ct,"runtime",f),u(ct,"typeName","yorkie.v1.Change"),u(ct,"fields",f.util.newFieldList(()=>[{no:1,name:"id",kind:"message",T:Jl},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"operations",kind:"message",T:Hf,repeated:!0},{no:4,name:"presence_change",kind:"message",T:To}])),ct);var ft;let Jl=(ft=class extends O{constructor(t){super();u(this,"clientSeq",0);u(this,"serverSeq",ne.zero);u(this,"lamport",ne.zero);u(this,"actorId",new Uint8Array(0));u(this,"versionVector");f.util.initPartial(t,this)}static fromBinary(t,r){return new ft().fromBinary(t,r)}static fromJson(t,r){return new ft().fromJson(t,r)}static fromJsonString(t,r){return new ft().fromJsonString(t,r)}static equals(t,r){return f.util.equals(ft,t,r)}},u(ft,"runtime",f),u(ft,"typeName","yorkie.v1.ChangeID"),u(ft,"fields",f.util.newFieldList(()=>[{no:1,name:"client_seq",kind:"scalar",T:13},{no:2,name:"server_seq",kind:"scalar",T:3},{no:3,name:"lamport",kind:"scalar",T:3},{no:4,name:"actor_id",kind:"scalar",T:12},{no:5,name:"version_vector",kind:"message",T:$l}])),ft);var dt;let $l=(dt=class extends O{constructor(t){super();u(this,"vector",{});f.util.initPartial(t,this)}static fromBinary(t,r){return new dt().fromBinary(t,r)}static fromJson(t,r){return new dt().fromJson(t,r)}static fromJsonString(t,r){return new dt().fromJsonString(t,r)}static equals(t,r){return f.util.equals(dt,t,r)}},u(dt,"runtime",f),u(dt,"typeName","yorkie.v1.VersionVector"),u(dt,"fields",f.util.newFieldList(()=>[{no:1,name:"vector",kind:"map",K:9,V:{kind:"scalar",T:3}}])),dt);var ht;let Hf=(ht=class extends O{constructor(t){super();u(this,"body",{case:void 0});f.util.initPartial(t,this)}static fromBinary(t,r){return new ht().fromBinary(t,r)}static fromJson(t,r){return new ht().fromJson(t,r)}static fromJsonString(t,r){return new ht().fromJsonString(t,r)}static equals(t,r){return f.util.equals(ht,t,r)}},u(ht,"runtime",f),u(ht,"typeName","yorkie.v1.Operation"),u(ht,"fields",f.util.newFieldList(()=>[{no:1,name:"set",kind:"message",T:el,oneof:"body"},{no:2,name:"add",kind:"message",T:tl,oneof:"body"},{no:3,name:"move",kind:"message",T:nl,oneof:"body"},{no:4,name:"remove",kind:"message",T:rl,oneof:"body"},{no:5,name:"edit",kind:"message",T:il,oneof:"body"},{no:6,name:"select",kind:"message",T:Ic,oneof:"body"},{no:7,name:"style",kind:"message",T:sl,oneof:"body"},{no:8,name:"increase",kind:"message",T:ol,oneof:"body"},{no:9,name:"tree_edit",kind:"message",T:al,oneof:"body"},{no:10,name:"tree_style",kind:"message",T:ll,oneof:"body"},{no:11,name:"array_set",kind:"message",T:Ec,oneof:"body"}])),ht);const fn=class fn extends O{constructor(t){super();u(this,"parentCreatedAt");u(this,"key","");u(this,"value");u(this,"executedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new fn().fromBinary(t,r)}static fromJson(t,r){return new fn().fromJson(t,r)}static fromJsonString(t,r){return new fn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(fn,t,r)}};u(fn,"runtime",f),u(fn,"typeName","yorkie.v1.Operation.Set"),u(fn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:b},{no:2,name:"key",kind:"scalar",T:9},{no:3,name:"value",kind:"message",T:lt},{no:4,name:"executed_at",kind:"message",T:b}]));let el=fn;const dn=class dn extends O{constructor(t){super();u(this,"parentCreatedAt");u(this,"prevCreatedAt");u(this,"value");u(this,"executedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new dn().fromBinary(t,r)}static fromJson(t,r){return new dn().fromJson(t,r)}static fromJsonString(t,r){return new dn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(dn,t,r)}};u(dn,"runtime",f),u(dn,"typeName","yorkie.v1.Operation.Add"),u(dn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:b},{no:2,name:"prev_created_at",kind:"message",T:b},{no:3,name:"value",kind:"message",T:lt},{no:4,name:"executed_at",kind:"message",T:b}]));let tl=dn;const hn=class hn extends O{constructor(t){super();u(this,"parentCreatedAt");u(this,"prevCreatedAt");u(this,"createdAt");u(this,"executedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new hn().fromBinary(t,r)}static fromJson(t,r){return new hn().fromJson(t,r)}static fromJsonString(t,r){return new hn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(hn,t,r)}};u(hn,"runtime",f),u(hn,"typeName","yorkie.v1.Operation.Move"),u(hn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:b},{no:2,name:"prev_created_at",kind:"message",T:b},{no:3,name:"created_at",kind:"message",T:b},{no:4,name:"executed_at",kind:"message",T:b}]));let nl=hn;const gn=class gn extends O{constructor(t){super();u(this,"parentCreatedAt");u(this,"createdAt");u(this,"executedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new gn().fromBinary(t,r)}static fromJson(t,r){return new gn().fromJson(t,r)}static fromJsonString(t,r){return new gn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(gn,t,r)}};u(gn,"runtime",f),u(gn,"typeName","yorkie.v1.Operation.Remove"),u(gn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:b},{no:2,name:"created_at",kind:"message",T:b},{no:3,name:"executed_at",kind:"message",T:b}]));let rl=gn;const mn=class mn extends O{constructor(t){super();u(this,"parentCreatedAt");u(this,"from");u(this,"to");u(this,"createdAtMapByActor",{});u(this,"content","");u(this,"executedAt");u(this,"attributes",{});f.util.initPartial(t,this)}static fromBinary(t,r){return new mn().fromBinary(t,r)}static fromJson(t,r){return new mn().fromJson(t,r)}static fromJsonString(t,r){return new mn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(mn,t,r)}};u(mn,"runtime",f),u(mn,"typeName","yorkie.v1.Operation.Edit"),u(mn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:b},{no:2,name:"from",kind:"message",T:Ir},{no:3,name:"to",kind:"message",T:Ir},{no:4,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:b}},{no:5,name:"content",kind:"scalar",T:9},{no:6,name:"executed_at",kind:"message",T:b},{no:7,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}}]));let il=mn;const pn=class pn extends O{constructor(t){super();u(this,"parentCreatedAt");u(this,"from");u(this,"to");u(this,"executedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new pn().fromBinary(t,r)}static fromJson(t,r){return new pn().fromJson(t,r)}static fromJsonString(t,r){return new pn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(pn,t,r)}};u(pn,"runtime",f),u(pn,"typeName","yorkie.v1.Operation.Select"),u(pn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:b},{no:2,name:"from",kind:"message",T:Ir},{no:3,name:"to",kind:"message",T:Ir},{no:4,name:"executed_at",kind:"message",T:b}]));let Ic=pn;const yn=class yn extends O{constructor(t){super();u(this,"parentCreatedAt");u(this,"from");u(this,"to");u(this,"attributes",{});u(this,"executedAt");u(this,"createdAtMapByActor",{});f.util.initPartial(t,this)}static fromBinary(t,r){return new yn().fromBinary(t,r)}static fromJson(t,r){return new yn().fromJson(t,r)}static fromJsonString(t,r){return new yn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(yn,t,r)}};u(yn,"runtime",f),u(yn,"typeName","yorkie.v1.Operation.Style"),u(yn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:b},{no:2,name:"from",kind:"message",T:Ir},{no:3,name:"to",kind:"message",T:Ir},{no:4,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:5,name:"executed_at",kind:"message",T:b},{no:6,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:b}}]));let sl=yn;const vn=class vn extends O{constructor(t){super();u(this,"parentCreatedAt");u(this,"value");u(this,"executedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new vn().fromBinary(t,r)}static fromJson(t,r){return new vn().fromJson(t,r)}static fromJsonString(t,r){return new vn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(vn,t,r)}};u(vn,"runtime",f),u(vn,"typeName","yorkie.v1.Operation.Increase"),u(vn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:b},{no:2,name:"value",kind:"message",T:lt},{no:3,name:"executed_at",kind:"message",T:b}]));let ol=vn;const wn=class wn extends O{constructor(t){super();u(this,"parentCreatedAt");u(this,"from");u(this,"to");u(this,"createdAtMapByActor",{});u(this,"contents",[]);u(this,"splitLevel",0);u(this,"executedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new wn().fromBinary(t,r)}static fromJson(t,r){return new wn().fromJson(t,r)}static fromJsonString(t,r){return new wn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(wn,t,r)}};u(wn,"runtime",f),u(wn,"typeName","yorkie.v1.Operation.TreeEdit"),u(wn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:b},{no:2,name:"from",kind:"message",T:Ci},{no:3,name:"to",kind:"message",T:Ci},{no:4,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:b}},{no:5,name:"contents",kind:"message",T:yl,repeated:!0},{no:7,name:"split_level",kind:"scalar",T:5},{no:6,name:"executed_at",kind:"message",T:b}]));let al=wn;const Sn=class Sn extends O{constructor(t){super();u(this,"parentCreatedAt");u(this,"from");u(this,"to");u(this,"attributes",{});u(this,"executedAt");u(this,"attributesToRemove",[]);u(this,"createdAtMapByActor",{});f.util.initPartial(t,this)}static fromBinary(t,r){return new Sn().fromBinary(t,r)}static fromJson(t,r){return new Sn().fromJson(t,r)}static fromJsonString(t,r){return new Sn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Sn,t,r)}};u(Sn,"runtime",f),u(Sn,"typeName","yorkie.v1.Operation.TreeStyle"),u(Sn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:b},{no:2,name:"from",kind:"message",T:Ci},{no:3,name:"to",kind:"message",T:Ci},{no:4,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:5,name:"executed_at",kind:"message",T:b},{no:6,name:"attributes_to_remove",kind:"scalar",T:9,repeated:!0},{no:7,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:b}}]));let ll=Sn;const kn=class kn extends O{constructor(t){super();u(this,"parentCreatedAt");u(this,"createdAt");u(this,"value");u(this,"executedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new kn().fromBinary(t,r)}static fromJson(t,r){return new kn().fromJson(t,r)}static fromJsonString(t,r){return new kn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(kn,t,r)}};u(kn,"runtime",f),u(kn,"typeName","yorkie.v1.Operation.ArraySet"),u(kn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:b},{no:2,name:"created_at",kind:"message",T:b},{no:3,name:"value",kind:"message",T:lt},{no:4,name:"executed_at",kind:"message",T:b}]));let Ec=kn;const Tn=class Tn extends O{constructor(t){super();u(this,"createdAt");u(this,"movedAt");u(this,"removedAt");u(this,"type",0);u(this,"value",new Uint8Array(0));f.util.initPartial(t,this)}static fromBinary(t,r){return new Tn().fromBinary(t,r)}static fromJson(t,r){return new Tn().fromJson(t,r)}static fromJsonString(t,r){return new Tn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Tn,t,r)}};u(Tn,"runtime",f),u(Tn,"typeName","yorkie.v1.JSONElementSimple"),u(Tn,"fields",f.util.newFieldList(()=>[{no:1,name:"created_at",kind:"message",T:b},{no:2,name:"moved_at",kind:"message",T:b},{no:3,name:"removed_at",kind:"message",T:b},{no:4,name:"type",kind:"enum",T:f.getEnumType($)},{no:5,name:"value",kind:"scalar",T:12}]));let lt=Tn;const An=class An extends O{constructor(t){super();u(this,"body",{case:void 0});f.util.initPartial(t,this)}static fromBinary(t,r){return new An().fromBinary(t,r)}static fromJson(t,r){return new An().fromJson(t,r)}static fromJsonString(t,r){return new An().fromJsonString(t,r)}static equals(t,r){return f.util.equals(An,t,r)}};u(An,"runtime",f),u(An,"typeName","yorkie.v1.JSONElement"),u(An,"fields",f.util.newFieldList(()=>[{no:1,name:"json_object",kind:"message",T:ul,oneof:"body"},{no:2,name:"json_array",kind:"message",T:cl,oneof:"body"},{no:3,name:"primitive",kind:"message",T:fl,oneof:"body"},{no:5,name:"text",kind:"message",T:dl,oneof:"body"},{no:6,name:"counter",kind:"message",T:hl,oneof:"body"},{no:7,name:"tree",kind:"message",T:gl,oneof:"body"}]));let Ge=An;const In=class In extends O{constructor(t){super();u(this,"nodes",[]);u(this,"createdAt");u(this,"movedAt");u(this,"removedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new In().fromBinary(t,r)}static fromJson(t,r){return new In().fromJson(t,r)}static fromJsonString(t,r){return new In().fromJsonString(t,r)}static equals(t,r){return f.util.equals(In,t,r)}};u(In,"runtime",f),u(In,"typeName","yorkie.v1.JSONElement.JSONObject"),u(In,"fields",f.util.newFieldList(()=>[{no:1,name:"nodes",kind:"message",T:ty,repeated:!0},{no:2,name:"created_at",kind:"message",T:b},{no:3,name:"moved_at",kind:"message",T:b},{no:4,name:"removed_at",kind:"message",T:b}]));let ul=In;const En=class En extends O{constructor(t){super();u(this,"nodes",[]);u(this,"createdAt");u(this,"movedAt");u(this,"removedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new En().fromBinary(t,r)}static fromJson(t,r){return new En().fromJson(t,r)}static fromJsonString(t,r){return new En().fromJsonString(t,r)}static equals(t,r){return f.util.equals(En,t,r)}};u(En,"runtime",f),u(En,"typeName","yorkie.v1.JSONElement.JSONArray"),u(En,"fields",f.util.newFieldList(()=>[{no:1,name:"nodes",kind:"message",T:ml,repeated:!0},{no:2,name:"created_at",kind:"message",T:b},{no:3,name:"moved_at",kind:"message",T:b},{no:4,name:"removed_at",kind:"message",T:b}]));let cl=En;const xn=class xn extends O{constructor(t){super();u(this,"type",0);u(this,"value",new Uint8Array(0));u(this,"createdAt");u(this,"movedAt");u(this,"removedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new xn().fromBinary(t,r)}static fromJson(t,r){return new xn().fromJson(t,r)}static fromJsonString(t,r){return new xn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(xn,t,r)}};u(xn,"runtime",f),u(xn,"typeName","yorkie.v1.JSONElement.Primitive"),u(xn,"fields",f.util.newFieldList(()=>[{no:1,name:"type",kind:"enum",T:f.getEnumType($)},{no:2,name:"value",kind:"scalar",T:12},{no:3,name:"created_at",kind:"message",T:b},{no:4,name:"moved_at",kind:"message",T:b},{no:5,name:"removed_at",kind:"message",T:b}]));let fl=xn;const Cn=class Cn extends O{constructor(t){super();u(this,"nodes",[]);u(this,"createdAt");u(this,"movedAt");u(this,"removedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new Cn().fromBinary(t,r)}static fromJson(t,r){return new Cn().fromJson(t,r)}static fromJsonString(t,r){return new Cn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Cn,t,r)}};u(Cn,"runtime",f),u(Cn,"typeName","yorkie.v1.JSONElement.Text"),u(Cn,"fields",f.util.newFieldList(()=>[{no:1,name:"nodes",kind:"message",T:pl,repeated:!0},{no:2,name:"created_at",kind:"message",T:b},{no:3,name:"moved_at",kind:"message",T:b},{no:4,name:"removed_at",kind:"message",T:b}]));let dl=Cn;const Nn=class Nn extends O{constructor(t){super();u(this,"type",0);u(this,"value",new Uint8Array(0));u(this,"createdAt");u(this,"movedAt");u(this,"removedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new Nn().fromBinary(t,r)}static fromJson(t,r){return new Nn().fromJson(t,r)}static fromJsonString(t,r){return new Nn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Nn,t,r)}};u(Nn,"runtime",f),u(Nn,"typeName","yorkie.v1.JSONElement.Counter"),u(Nn,"fields",f.util.newFieldList(()=>[{no:1,name:"type",kind:"enum",T:f.getEnumType($)},{no:2,name:"value",kind:"scalar",T:12},{no:3,name:"created_at",kind:"message",T:b},{no:4,name:"moved_at",kind:"message",T:b},{no:5,name:"removed_at",kind:"message",T:b}]));let hl=Nn;const Pn=class Pn extends O{constructor(t){super();u(this,"nodes",[]);u(this,"createdAt");u(this,"movedAt");u(this,"removedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new Pn().fromBinary(t,r)}static fromJson(t,r){return new Pn().fromJson(t,r)}static fromJsonString(t,r){return new Pn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Pn,t,r)}};u(Pn,"runtime",f),u(Pn,"typeName","yorkie.v1.JSONElement.Tree"),u(Pn,"fields",f.util.newFieldList(()=>[{no:1,name:"nodes",kind:"message",T:ko,repeated:!0},{no:2,name:"created_at",kind:"message",T:b},{no:3,name:"moved_at",kind:"message",T:b},{no:4,name:"removed_at",kind:"message",T:b}]));let gl=Pn;var gt;let ty=(gt=class extends O{constructor(t){super();u(this,"key","");u(this,"element");f.util.initPartial(t,this)}static fromBinary(t,r){return new gt().fromBinary(t,r)}static fromJson(t,r){return new gt().fromJson(t,r)}static fromJsonString(t,r){return new gt().fromJsonString(t,r)}static equals(t,r){return f.util.equals(gt,t,r)}},u(gt,"runtime",f),u(gt,"typeName","yorkie.v1.RHTNode"),u(gt,"fields",f.util.newFieldList(()=>[{no:1,name:"key",kind:"scalar",T:9},{no:2,name:"element",kind:"message",T:Ge}])),gt);const qt=class qt extends O{constructor(t){super();u(this,"next");u(this,"element");f.util.initPartial(t,this)}static fromBinary(t,r){return new qt().fromBinary(t,r)}static fromJson(t,r){return new qt().fromJson(t,r)}static fromJsonString(t,r){return new qt().fromJsonString(t,r)}static equals(t,r){return f.util.equals(qt,t,r)}};u(qt,"runtime",f),u(qt,"typeName","yorkie.v1.RGANode"),u(qt,"fields",f.util.newFieldList(()=>[{no:1,name:"next",kind:"message",T:qt},{no:2,name:"element",kind:"message",T:Ge}]));let ml=qt;const Dn=class Dn extends O{constructor(t){super();u(this,"value","");u(this,"updatedAt");u(this,"isRemoved",!1);f.util.initPartial(t,this)}static fromBinary(t,r){return new Dn().fromBinary(t,r)}static fromJson(t,r){return new Dn().fromJson(t,r)}static fromJsonString(t,r){return new Dn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Dn,t,r)}};u(Dn,"runtime",f),u(Dn,"typeName","yorkie.v1.NodeAttr"),u(Dn,"fields",f.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:9},{no:2,name:"updated_at",kind:"message",T:b},{no:3,name:"is_removed",kind:"scalar",T:8}]));let ms=Dn;const On=class On extends O{constructor(t){super();u(this,"id");u(this,"value","");u(this,"removedAt");u(this,"insPrevId");u(this,"attributes",{});f.util.initPartial(t,this)}static fromBinary(t,r){return new On().fromBinary(t,r)}static fromJson(t,r){return new On().fromJson(t,r)}static fromJsonString(t,r){return new On().fromJsonString(t,r)}static equals(t,r){return f.util.equals(On,t,r)}};u(On,"runtime",f),u(On,"typeName","yorkie.v1.TextNode"),u(On,"fields",f.util.newFieldList(()=>[{no:1,name:"id",kind:"message",T:So},{no:2,name:"value",kind:"scalar",T:9},{no:3,name:"removed_at",kind:"message",T:b},{no:4,name:"ins_prev_id",kind:"message",T:So},{no:5,name:"attributes",kind:"map",K:9,V:{kind:"message",T:ms}}]));let pl=On;const Rn=class Rn extends O{constructor(t){super();u(this,"createdAt");u(this,"offset",0);f.util.initPartial(t,this)}static fromBinary(t,r){return new Rn().fromBinary(t,r)}static fromJson(t,r){return new Rn().fromJson(t,r)}static fromJsonString(t,r){return new Rn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Rn,t,r)}};u(Rn,"runtime",f),u(Rn,"typeName","yorkie.v1.TextNodeID"),u(Rn,"fields",f.util.newFieldList(()=>[{no:1,name:"created_at",kind:"message",T:b},{no:2,name:"offset",kind:"scalar",T:5}]));let So=Rn;const Ln=class Ln extends O{constructor(t){super();u(this,"id");u(this,"type","");u(this,"value","");u(this,"removedAt");u(this,"insPrevId");u(this,"insNextId");u(this,"depth",0);u(this,"attributes",{});f.util.initPartial(t,this)}static fromBinary(t,r){return new Ln().fromBinary(t,r)}static fromJson(t,r){return new Ln().fromJson(t,r)}static fromJsonString(t,r){return new Ln().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Ln,t,r)}};u(Ln,"runtime",f),u(Ln,"typeName","yorkie.v1.TreeNode"),u(Ln,"fields",f.util.newFieldList(()=>[{no:1,name:"id",kind:"message",T:Hr},{no:2,name:"type",kind:"scalar",T:9},{no:3,name:"value",kind:"scalar",T:9},{no:4,name:"removed_at",kind:"message",T:b},{no:5,name:"ins_prev_id",kind:"message",T:Hr},{no:6,name:"ins_next_id",kind:"message",T:Hr},{no:7,name:"depth",kind:"scalar",T:5},{no:8,name:"attributes",kind:"map",K:9,V:{kind:"message",T:ms}}]));let ko=Ln;const Bn=class Bn extends O{constructor(t){super();u(this,"content",[]);f.util.initPartial(t,this)}static fromBinary(t,r){return new Bn().fromBinary(t,r)}static fromJson(t,r){return new Bn().fromJson(t,r)}static fromJsonString(t,r){return new Bn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Bn,t,r)}};u(Bn,"runtime",f),u(Bn,"typeName","yorkie.v1.TreeNodes"),u(Bn,"fields",f.util.newFieldList(()=>[{no:1,name:"content",kind:"message",T:ko,repeated:!0}]));let yl=Bn;const bn=class bn extends O{constructor(t){super();u(this,"createdAt");u(this,"offset",0);f.util.initPartial(t,this)}static fromBinary(t,r){return new bn().fromBinary(t,r)}static fromJson(t,r){return new bn().fromJson(t,r)}static fromJsonString(t,r){return new bn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(bn,t,r)}};u(bn,"runtime",f),u(bn,"typeName","yorkie.v1.TreeNodeID"),u(bn,"fields",f.util.newFieldList(()=>[{no:1,name:"created_at",kind:"message",T:b},{no:2,name:"offset",kind:"scalar",T:5}]));let Hr=bn;const Mn=class Mn extends O{constructor(t){super();u(this,"parentId");u(this,"leftSiblingId");f.util.initPartial(t,this)}static fromBinary(t,r){return new Mn().fromBinary(t,r)}static fromJson(t,r){return new Mn().fromJson(t,r)}static fromJsonString(t,r){return new Mn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Mn,t,r)}};u(Mn,"runtime",f),u(Mn,"typeName","yorkie.v1.TreePos"),u(Mn,"fields",f.util.newFieldList(()=>[{no:1,name:"parent_id",kind:"message",T:Hr},{no:2,name:"left_sibling_id",kind:"message",T:Hr}]));let Ci=Mn;const zn=class zn extends O{constructor(t){super();u(this,"id","");u(this,"username","");u(this,"createdAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new zn().fromBinary(t,r)}static fromJson(t,r){return new zn().fromJson(t,r)}static fromJsonString(t,r){return new zn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(zn,t,r)}};u(zn,"runtime",f),u(zn,"typeName","yorkie.v1.User"),u(zn,"fields",f.util.newFieldList(()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"username",kind:"scalar",T:9},{no:3,name:"created_at",kind:"message",T:Re}]));let Zh=zn;const Fn=class Fn extends O{constructor(t){super();u(this,"id","");u(this,"name","");u(this,"publicKey","");u(this,"secretKey","");u(this,"authWebhookUrl","");u(this,"authWebhookMethods",[]);u(this,"clientDeactivateThreshold","");u(this,"createdAt");u(this,"updatedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new Fn().fromBinary(t,r)}static fromJson(t,r){return new Fn().fromJson(t,r)}static fromJsonString(t,r){return new Fn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Fn,t,r)}};u(Fn,"runtime",f),u(Fn,"typeName","yorkie.v1.Project"),u(Fn,"fields",f.util.newFieldList(()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"public_key",kind:"scalar",T:9},{no:4,name:"secret_key",kind:"scalar",T:9},{no:5,name:"auth_webhook_url",kind:"scalar",T:9},{no:6,name:"auth_webhook_methods",kind:"scalar",T:9,repeated:!0},{no:7,name:"client_deactivate_threshold",kind:"scalar",T:9},{no:8,name:"created_at",kind:"message",T:Re},{no:9,name:"updated_at",kind:"message",T:Re}]));let eg=Fn;const Jn=class Jn extends O{constructor(t){super();u(this,"name");u(this,"authWebhookUrl");u(this,"authWebhookMethods");u(this,"clientDeactivateThreshold");f.util.initPartial(t,this)}static fromBinary(t,r){return new Jn().fromBinary(t,r)}static fromJson(t,r){return new Jn().fromJson(t,r)}static fromJsonString(t,r){return new Jn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Jn,t,r)}};u(Jn,"runtime",f),u(Jn,"typeName","yorkie.v1.UpdatableProjectFields"),u(Jn,"fields",f.util.newFieldList(()=>[{no:1,name:"name",kind:"message",T:Xe},{no:2,name:"auth_webhook_url",kind:"message",T:Xe},{no:3,name:"auth_webhook_methods",kind:"message",T:xc},{no:4,name:"client_deactivate_threshold",kind:"message",T:Xe}]));let tg=Jn;const $n=class $n extends O{constructor(t){super();u(this,"methods",[]);f.util.initPartial(t,this)}static fromBinary(t,r){return new $n().fromBinary(t,r)}static fromJson(t,r){return new $n().fromJson(t,r)}static fromJsonString(t,r){return new $n().fromJsonString(t,r)}static equals(t,r){return f.util.equals($n,t,r)}};u($n,"runtime",f),u($n,"typeName","yorkie.v1.UpdatableProjectFields.AuthWebhookMethods"),u($n,"fields",f.util.newFieldList(()=>[{no:1,name:"methods",kind:"scalar",T:9,repeated:!0}]));let xc=$n;const Un=class Un extends O{constructor(t){super();u(this,"id","");u(this,"key","");u(this,"snapshot","");u(this,"createdAt");u(this,"accessedAt");u(this,"updatedAt");f.util.initPartial(t,this)}static fromBinary(t,r){return new Un().fromBinary(t,r)}static fromJson(t,r){return new Un().fromJson(t,r)}static fromJsonString(t,r){return new Un().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Un,t,r)}};u(Un,"runtime",f),u(Un,"typeName","yorkie.v1.DocumentSummary"),u(Un,"fields",f.util.newFieldList(()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"key",kind:"scalar",T:9},{no:3,name:"snapshot",kind:"scalar",T:9},{no:4,name:"created_at",kind:"message",T:Re},{no:5,name:"accessed_at",kind:"message",T:Re},{no:6,name:"updated_at",kind:"message",T:Re}]));let ng=Un;const jn=class jn extends O{constructor(t){super();u(this,"type",0);u(this,"presence");f.util.initPartial(t,this)}static fromBinary(t,r){return new jn().fromBinary(t,r)}static fromJson(t,r){return new jn().fromJson(t,r)}static fromJsonString(t,r){return new jn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(jn,t,r)}};u(jn,"runtime",f),u(jn,"typeName","yorkie.v1.PresenceChange"),u(jn,"fields",f.util.newFieldList(()=>[{no:1,name:"type",kind:"enum",T:f.getEnumType(Ni)},{no:2,name:"presence",kind:"message",T:Gf}]));let To=jn;var Ni=(n=>(n[n.UNSPECIFIED=0]="UNSPECIFIED",n[n.PUT=1]="PUT",n[n.DELETE=2]="DELETE",n[n.CLEAR=3]="CLEAR",n))(Ni||{});f.util.setEnumType(Ni,"yorkie.v1.PresenceChange.ChangeType",[{no:0,name:"CHANGE_TYPE_UNSPECIFIED"},{no:1,name:"CHANGE_TYPE_PUT"},{no:2,name:"CHANGE_TYPE_DELETE"},{no:3,name:"CHANGE_TYPE_CLEAR"}]);var mt;let Gf=(mt=class extends O{constructor(t){super();u(this,"data",{});f.util.initPartial(t,this)}static fromBinary(t,r){return new mt().fromBinary(t,r)}static fromJson(t,r){return new mt().fromJson(t,r)}static fromJsonString(t,r){return new mt().fromJsonString(t,r)}static equals(t,r){return f.util.equals(mt,t,r)}},u(mt,"runtime",f),u(mt,"typeName","yorkie.v1.Presence"),u(mt,"fields",f.util.newFieldList(()=>[{no:1,name:"data",kind:"map",K:9,V:{kind:"scalar",T:9}}])),mt);var pt;let ny=(pt=class extends O{constructor(t){super();u(this,"serverSeq",ne.zero);u(this,"clientSeq",0);f.util.initPartial(t,this)}static fromBinary(t,r){return new pt().fromBinary(t,r)}static fromJson(t,r){return new pt().fromJson(t,r)}static fromJsonString(t,r){return new pt().fromJsonString(t,r)}static equals(t,r){return f.util.equals(pt,t,r)}},u(pt,"runtime",f),u(pt,"typeName","yorkie.v1.Checkpoint"),u(pt,"fields",f.util.newFieldList(()=>[{no:1,name:"server_seq",kind:"scalar",T:3},{no:2,name:"client_seq",kind:"scalar",T:13}])),pt);const Vn=class Vn extends O{constructor(t){super();u(this,"createdAt");u(this,"offset",0);u(this,"relativeOffset",0);f.util.initPartial(t,this)}static fromBinary(t,r){return new Vn().fromBinary(t,r)}static fromJson(t,r){return new Vn().fromJson(t,r)}static fromJsonString(t,r){return new Vn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Vn,t,r)}};u(Vn,"runtime",f),u(Vn,"typeName","yorkie.v1.TextNodePos"),u(Vn,"fields",f.util.newFieldList(()=>[{no:1,name:"created_at",kind:"message",T:b},{no:2,name:"offset",kind:"scalar",T:5},{no:3,name:"relative_offset",kind:"scalar",T:5}]));let Ir=Vn;var yt;let b=(yt=class extends O{constructor(t){super();u(this,"lamport",ne.zero);u(this,"delimiter",0);u(this,"actorId",new Uint8Array(0));f.util.initPartial(t,this)}static fromBinary(t,r){return new yt().fromBinary(t,r)}static fromJson(t,r){return new yt().fromJson(t,r)}static fromJsonString(t,r){return new yt().fromJsonString(t,r)}static equals(t,r){return f.util.equals(yt,t,r)}},u(yt,"runtime",f),u(yt,"typeName","yorkie.v1.TimeTicket"),u(yt,"fields",f.util.newFieldList(()=>[{no:1,name:"lamport",kind:"scalar",T:3},{no:2,name:"delimiter",kind:"scalar",T:13},{no:3,name:"actor_id",kind:"scalar",T:12}])),yt);const qn=class qn extends O{constructor(t){super();u(this,"topic","");u(this,"payload",new Uint8Array(0));f.util.initPartial(t,this)}static fromBinary(t,r){return new qn().fromBinary(t,r)}static fromJson(t,r){return new qn().fromJson(t,r)}static fromJsonString(t,r){return new qn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(qn,t,r)}};u(qn,"runtime",f),u(qn,"typeName","yorkie.v1.DocEventBody"),u(qn,"fields",f.util.newFieldList(()=>[{no:1,name:"topic",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:12}]));let Cc=qn;const Kn=class Kn extends O{constructor(t){super();u(this,"type",0);u(this,"publisher","");u(this,"body");f.util.initPartial(t,this)}static fromBinary(t,r){return new Kn().fromBinary(t,r)}static fromJson(t,r){return new Kn().fromJson(t,r)}static fromJsonString(t,r){return new Kn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Kn,t,r)}};u(Kn,"runtime",f),u(Kn,"typeName","yorkie.v1.DocEvent"),u(Kn,"fields",f.util.newFieldList(()=>[{no:1,name:"type",kind:"enum",T:f.getEnumType(ki)},{no:2,name:"publisher",kind:"scalar",T:9},{no:3,name:"body",kind:"message",T:Cc}]));let Nc=Kn;const Wn=class Wn extends O{constructor(t){super();u(this,"clientKey","");u(this,"metadata",{});f.util.initPartial(t,this)}static fromBinary(t,r){return new Wn().fromBinary(t,r)}static fromJson(t,r){return new Wn().fromJson(t,r)}static fromJsonString(t,r){return new Wn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Wn,t,r)}};u(Wn,"runtime",f),u(Wn,"typeName","yorkie.v1.ActivateClientRequest"),u(Wn,"fields",f.util.newFieldList(()=>[{no:1,name:"client_key",kind:"scalar",T:9},{no:2,name:"metadata",kind:"map",K:9,V:{kind:"scalar",T:9}}]));let Pc=Wn;const _n=class _n extends O{constructor(t){super();u(this,"clientId","");f.util.initPartial(t,this)}static fromBinary(t,r){return new _n().fromBinary(t,r)}static fromJson(t,r){return new _n().fromJson(t,r)}static fromJsonString(t,r){return new _n().fromJsonString(t,r)}static equals(t,r){return f.util.equals(_n,t,r)}};u(_n,"runtime",f),u(_n,"typeName","yorkie.v1.ActivateClientResponse"),u(_n,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9}]));let Dc=_n;const Hn=class Hn extends O{constructor(t){super();u(this,"clientId","");f.util.initPartial(t,this)}static fromBinary(t,r){return new Hn().fromBinary(t,r)}static fromJson(t,r){return new Hn().fromJson(t,r)}static fromJsonString(t,r){return new Hn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Hn,t,r)}};u(Hn,"runtime",f),u(Hn,"typeName","yorkie.v1.DeactivateClientRequest"),u(Hn,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9}]));let Oc=Hn;const Gn=class Gn extends O{constructor(e){super(),f.util.initPartial(e,this)}static fromBinary(e,t){return new Gn().fromBinary(e,t)}static fromJson(e,t){return new Gn().fromJson(e,t)}static fromJsonString(e,t){return new Gn().fromJsonString(e,t)}static equals(e,t){return f.util.equals(Gn,e,t)}};u(Gn,"runtime",f),u(Gn,"typeName","yorkie.v1.DeactivateClientResponse"),u(Gn,"fields",f.util.newFieldList(()=>[]));let Rc=Gn;const Yn=class Yn extends O{constructor(t){super();u(this,"clientId","");u(this,"changePack");f.util.initPartial(t,this)}static fromBinary(t,r){return new Yn().fromBinary(t,r)}static fromJson(t,r){return new Yn().fromJson(t,r)}static fromJsonString(t,r){return new Yn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Yn,t,r)}};u(Yn,"runtime",f),u(Yn,"typeName","yorkie.v1.AttachDocumentRequest"),u(Yn,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"change_pack",kind:"message",T:Cr}]));let Lc=Yn;const Qn=class Qn extends O{constructor(t){super();u(this,"documentId","");u(this,"changePack");f.util.initPartial(t,this)}static fromBinary(t,r){return new Qn().fromBinary(t,r)}static fromJson(t,r){return new Qn().fromJson(t,r)}static fromJsonString(t,r){return new Qn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Qn,t,r)}};u(Qn,"runtime",f),u(Qn,"typeName","yorkie.v1.AttachDocumentResponse"),u(Qn,"fields",f.util.newFieldList(()=>[{no:1,name:"document_id",kind:"scalar",T:9},{no:2,name:"change_pack",kind:"message",T:Cr}]));let Bc=Qn;const Xn=class Xn extends O{constructor(t){super();u(this,"clientId","");u(this,"documentId","");u(this,"changePack");u(this,"removeIfNotAttached",!1);f.util.initPartial(t,this)}static fromBinary(t,r){return new Xn().fromBinary(t,r)}static fromJson(t,r){return new Xn().fromJson(t,r)}static fromJsonString(t,r){return new Xn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Xn,t,r)}};u(Xn,"runtime",f),u(Xn,"typeName","yorkie.v1.DetachDocumentRequest"),u(Xn,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:Cr},{no:4,name:"remove_if_not_attached",kind:"scalar",T:8}]));let bc=Xn;const Zn=class Zn extends O{constructor(t){super();u(this,"changePack");f.util.initPartial(t,this)}static fromBinary(t,r){return new Zn().fromBinary(t,r)}static fromJson(t,r){return new Zn().fromJson(t,r)}static fromJsonString(t,r){return new Zn().fromJsonString(t,r)}static equals(t,r){return f.util.equals(Zn,t,r)}};u(Zn,"runtime",f),u(Zn,"typeName","yorkie.v1.DetachDocumentResponse"),u(Zn,"fields",f.util.newFieldList(()=>[{no:2,name:"change_pack",kind:"message",T:Cr}]));let Mc=Zn;const er=class er extends O{constructor(t){super();u(this,"clientId","");u(this,"documentId","");f.util.initPartial(t,this)}static fromBinary(t,r){return new er().fromBinary(t,r)}static fromJson(t,r){return new er().fromJson(t,r)}static fromJsonString(t,r){return new er().fromJsonString(t,r)}static equals(t,r){return f.util.equals(er,t,r)}};u(er,"runtime",f),u(er,"typeName","yorkie.v1.WatchDocumentRequest"),u(er,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9}]));let zc=er;const tr=class tr extends O{constructor(t){super();u(this,"body",{case:void 0});f.util.initPartial(t,this)}static fromBinary(t,r){return new tr().fromBinary(t,r)}static fromJson(t,r){return new tr().fromJson(t,r)}static fromJsonString(t,r){return new tr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(tr,t,r)}};u(tr,"runtime",f),u(tr,"typeName","yorkie.v1.WatchDocumentResponse"),u(tr,"fields",f.util.newFieldList(()=>[{no:1,name:"initialization",kind:"message",T:Jc,oneof:"body"},{no:2,name:"event",kind:"message",T:Nc,oneof:"body"}]));let Fc=tr;const nr=class nr extends O{constructor(t){super();u(this,"clientIds",[]);f.util.initPartial(t,this)}static fromBinary(t,r){return new nr().fromBinary(t,r)}static fromJson(t,r){return new nr().fromJson(t,r)}static fromJsonString(t,r){return new nr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(nr,t,r)}};u(nr,"runtime",f),u(nr,"typeName","yorkie.v1.WatchDocumentResponse.Initialization"),u(nr,"fields",f.util.newFieldList(()=>[{no:1,name:"client_ids",kind:"scalar",T:9,repeated:!0}]));let Jc=nr;const rr=class rr extends O{constructor(t){super();u(this,"clientId","");u(this,"documentId","");u(this,"changePack");f.util.initPartial(t,this)}static fromBinary(t,r){return new rr().fromBinary(t,r)}static fromJson(t,r){return new rr().fromJson(t,r)}static fromJsonString(t,r){return new rr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(rr,t,r)}};u(rr,"runtime",f),u(rr,"typeName","yorkie.v1.RemoveDocumentRequest"),u(rr,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:Cr}]));let $c=rr;const ir=class ir extends O{constructor(t){super();u(this,"changePack");f.util.initPartial(t,this)}static fromBinary(t,r){return new ir().fromBinary(t,r)}static fromJson(t,r){return new ir().fromJson(t,r)}static fromJsonString(t,r){return new ir().fromJsonString(t,r)}static equals(t,r){return f.util.equals(ir,t,r)}};u(ir,"runtime",f),u(ir,"typeName","yorkie.v1.RemoveDocumentResponse"),u(ir,"fields",f.util.newFieldList(()=>[{no:1,name:"change_pack",kind:"message",T:Cr}]));let Uc=ir;const sr=class sr extends O{constructor(t){super();u(this,"clientId","");u(this,"documentId","");u(this,"changePack");u(this,"pushOnly",!1);f.util.initPartial(t,this)}static fromBinary(t,r){return new sr().fromBinary(t,r)}static fromJson(t,r){return new sr().fromJson(t,r)}static fromJsonString(t,r){return new sr().fromJsonString(t,r)}static equals(t,r){return f.util.equals(sr,t,r)}};u(sr,"runtime",f),u(sr,"typeName","yorkie.v1.PushPullChangesRequest"),u(sr,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:Cr},{no:4,name:"push_only",kind:"scalar",T:8}]));let jc=sr;const or=class or extends O{constructor(t){super();u(this,"changePack");f.util.initPartial(t,this)}static fromBinary(t,r){return new or().fromBinary(t,r)}static fromJson(t,r){return new or().fromJson(t,r)}static fromJsonString(t,r){return new or().fromJsonString(t,r)}static equals(t,r){return f.util.equals(or,t,r)}};u(or,"runtime",f),u(or,"typeName","yorkie.v1.PushPullChangesResponse"),u(or,"fields",f.util.newFieldList(()=>[{no:1,name:"change_pack",kind:"message",T:Cr}]));let Vc=or;const ar=class ar extends O{constructor(t){super();u(this,"clientId","");u(this,"documentId","");u(this,"topic","");u(this,"payload",new Uint8Array(0));f.util.initPartial(t,this)}static fromBinary(t,r){return new ar().fromBinary(t,r)}static fromJson(t,r){return new ar().fromJson(t,r)}static fromJsonString(t,r){return new ar().fromJsonString(t,r)}static equals(t,r){return f.util.equals(ar,t,r)}};u(ar,"runtime",f),u(ar,"typeName","yorkie.v1.BroadcastRequest"),u(ar,"fields",f.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"topic",kind:"scalar",T:9},{no:4,name:"payload",kind:"scalar",T:12}]));let qc=ar;const lr=class lr extends O{constructor(e){super(),f.util.initPartial(e,this)}static fromBinary(e,t){return new lr().fromBinary(e,t)}static fromJson(e,t){return new lr().fromJson(e,t)}static fromJsonString(e,t){return new lr().fromJsonString(e,t)}static equals(e,t){return f.util.equals(lr,e,t)}};u(lr,"runtime",f),u(lr,"typeName","yorkie.v1.BroadcastResponse"),u(lr,"fields",f.util.newFieldList(()=>[]));let Kc=lr;const RS={typeName:"yorkie.v1.YorkieService",methods:{activateClient:{name:"ActivateClient",I:Pc,O:Dc,kind:Me.Unary},deactivateClient:{name:"DeactivateClient",I:Oc,O:Rc,kind:Me.Unary},attachDocument:{name:"AttachDocument",I:Lc,O:Bc,kind:Me.Unary},detachDocument:{name:"DetachDocument",I:bc,O:Mc,kind:Me.Unary},removeDocument:{name:"RemoveDocument",I:$c,O:Uc,kind:Me.Unary},pushPullChanges:{name:"PushPullChanges",I:jc,O:Vc,kind:Me.Unary},watchDocument:{name:"WatchDocument",I:zc,O:Fc,kind:Me.ServerStreaming},broadcast:{name:"Broadcast",I:qc,O:Kc,kind:Me.Unary}}},LS=f.makeMessageType("google.rpc.ErrorInfo",()=>[{no:1,name:"reason",kind:"scalar",T:9},{no:2,name:"domain",kind:"scalar",T:9},{no:3,name:"metadata",kind:"map",K:9,V:{kind:"scalar",T:9}}]);f.makeMessageType("google.rpc.RetryInfo",()=>[{no:1,name:"retry_delay",kind:"message",T:gr}]);f.makeMessageType("google.rpc.DebugInfo",()=>[{no:1,name:"stack_entries",kind:"scalar",T:9,repeated:!0},{no:2,name:"detail",kind:"scalar",T:9}]);f.makeMessageType("google.rpc.QuotaFailure",()=>[{no:1,name:"violations",kind:"message",T:BS,repeated:!0}]);const BS=f.makeMessageType("google.rpc.QuotaFailure.Violation",()=>[{no:1,name:"subject",kind:"scalar",T:9},{no:2,name:"description",kind:"scalar",T:9}],{localName:"QuotaFailure_Violation"});f.makeMessageType("google.rpc.PreconditionFailure",()=>[{no:1,name:"violations",kind:"message",T:bS,repeated:!0}]);const bS=f.makeMessageType("google.rpc.PreconditionFailure.Violation",()=>[{no:1,name:"type",kind:"scalar",T:9},{no:2,name:"subject",kind:"scalar",T:9},{no:3,name:"description",kind:"scalar",T:9}],{localName:"PreconditionFailure_Violation"});f.makeMessageType("google.rpc.BadRequest",()=>[{no:1,name:"field_violations",kind:"message",T:MS,repeated:!0}]);const MS=f.makeMessageType("google.rpc.BadRequest.FieldViolation",()=>[{no:1,name:"field",kind:"scalar",T:9},{no:2,name:"description",kind:"scalar",T:9},{no:3,name:"reason",kind:"scalar",T:9},{no:4,name:"localized_message",kind:"message",T:FS}],{localName:"BadRequest_FieldViolation"});f.makeMessageType("google.rpc.RequestInfo",()=>[{no:1,name:"request_id",kind:"scalar",T:9},{no:2,name:"serving_data",kind:"scalar",T:9}]);f.makeMessageType("google.rpc.ResourceInfo",()=>[{no:1,name:"resource_type",kind:"scalar",T:9},{no:2,name:"resource_name",kind:"scalar",T:9},{no:3,name:"owner",kind:"scalar",T:9},{no:4,name:"description",kind:"scalar",T:9}]);f.makeMessageType("google.rpc.Help",()=>[{no:1,name:"links",kind:"message",T:zS,repeated:!0}]);const zS=f.makeMessageType("google.rpc.Help.Link",()=>[{no:1,name:"description",kind:"scalar",T:9},{no:2,name:"url",kind:"scalar",T:9}],{localName:"Help_Link"}),FS=f.makeMessageType("google.rpc.LocalizedMessage",()=>[{no:1,name:"locale",kind:"scalar",T:9},{no:2,name:"message",kind:"scalar",T:9}]);var S=(n=>(n.Ok="ok",n.ErrClientNotActivated="ErrClientNotActivated",n.ErrClientNotFound="ErrClientNotFound",n.ErrUnimplemented="ErrUnimplemented",n.ErrInvalidType="ErrInvalidType",n.ErrDummy="ErrDummy",n.ErrDocumentNotAttached="ErrDocumentNotAttached",n.ErrDocumentNotDetached="ErrDocumentNotDetached",n.ErrDocumentRemoved="ErrDocumentRemoved",n.ErrInvalidObjectKey="ErrInvalidObjectKey",n.ErrInvalidArgument="ErrInvalidArgument",n.ErrNotInitialized="ErrNotInitialized",n.ErrNotReady="ErrNotReady",n.ErrRefused="ErrRefused",n.ErrContextNotProvided="ErrContextNotProvided",n.ErrPermissionDenied="ErrPermissionDenied",n.ErrUnauthenticated="ErrUnauthenticated",n.ErrTooManySubscribers="ErrTooManySubscribers",n.ErrTooManyAttachments="ErrTooManyAttachments",n))(S||{});class k extends Error{constructor(t,r){super(r);u(this,"name","YorkieError");u(this,"stack");this.code=t,this.message=r,this.toString=()=>`[code=${this.code}]: ${this.message}`}}function Dt(n){if(n instanceof Map){const e=Array.from(n);return new Map(JSON.parse(JSON.stringify(e)))}return JSON.parse(JSON.stringify(n))}const ry=n=>n?Object.entries(n).length===0:!0,ps=n=>{const e={};for(const[t,r]of Object.entries(n))e[t]=JSON.stringify(r);return e},vr=n=>{const e={};for(const[t,r]of Object.entries(n))e[t]=JSON.parse(r);return e};var ti=(n=>(n.Put="put",n.Clear="clear",n))(ti||{});class Au{constructor(e,t){u(this,"context");u(this,"presence");this.context=e,this.presence=t}set(e,t){for(const r of Object.keys(e))this.presence[r]=e[r];this.context.setPresenceChange({type:"put",presence:Dt(this.presence)}),this.context.setReversePresence(e,t)}get(e){return this.presence[e]}clear(){this.presence={},this.context.setPresenceChange({type:"clear"})}}const Ul="000000000000000000000000",Gr=24;class Tt{constructor(e,t,r){u(this,"lamport");u(this,"delimiter");u(this,"actorID");this.lamport=e,this.delimiter=t,this.actorID=r}static of(e,t,r){return new Tt(e,t,r)}static fromStruct(e){return Tt.of(BigInt(e.lamport),e.delimiter,e.actorID)}toIDString(){return`${this.lamport.toString()}:${this.actorID}:${this.delimiter}`}toStruct(){return{lamport:this.getLamportAsString(),delimiter:this.getDelimiter(),actorID:this.getActorID()}}toTestString(){return`${this.lamport.toString()}:${this.actorID.slice(-2)}:${this.delimiter}`}setActor(e){return new Tt(this.lamport,this.delimiter,e)}getLamportAsString(){return this.lamport.toString()}getLamport(){return this.lamport}getDelimiter(){return this.delimiter}getActorID(){return this.actorID}after(e){return this.compare(e)>0}equals(e){return this.compare(e)===0}compare(e){if(this.lamport>e.lamport)return 1;if(e.lamport>this.lamport)return-1;const t=this.actorID.localeCompare(e.actorID);return t!==0?t:this.delimiter>e.delimiter?1:e.delimiter>this.delimiter?-1:0}}const iy=0,Xs=9223372036854775807n,zt=new Tt(0n,iy,Ul);function nn(n){return n.replace(/["'\\\n\r\f\b\t\u2028\u2029]/g,function(e){switch(e){case'"':case"\\":return"\\"+e;case`
`:return"\\n";case"\r":return"\\r";case"\f":return"\\f";case"\b":return"\\b";case"	":return"\\t";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:return e}})}class Bo{constructor(e){u(this,"createdAt");u(this,"movedAt");u(this,"removedAt");this.createdAt=e}getCreatedAt(){return this.createdAt}getID(){return this.createdAt}getMovedAt(){return this.movedAt}getRemovedAt(){return this.removedAt}getPositionedAt(){return this.movedAt?this.movedAt:this.createdAt}setMovedAt(e){return!this.movedAt||e&&e.after(this.movedAt)?(this.movedAt=e,!0):!1}setRemovedAt(e){this.removedAt=e}remove(e){return e&&e.after(this.getPositionedAt())&&(!this.removedAt||e.after(this.removedAt))?(this.removedAt=e,!0):!1}isRemoved(){return!!this.removedAt}getMetaUsage(){let e=0;return this.getCreatedAt()&&(e+=Gr),this.getMovedAt()&&(e+=Gr),this.getRemovedAt()&&(e+=Gr),e}}class Yr extends Bo{constructor(e){super(e)}}class Yf{constructor(e,t){u(this,"strKey");u(this,"value");this.strKey=e,this.value=t}static of(e,t){return new Yf(e,t)}isRemoved(){return this.value.isRemoved()}getStrKey(){return this.strKey}getValue(){return this.value}remove(e){return this.value.remove(e)}}class Ao{constructor(){u(this,"nodeMapByKey");u(this,"nodeMapByCreatedAt");this.nodeMapByKey=new Map,this.nodeMapByCreatedAt=new Map}static create(){return new Ao}set(e,t,r){let i;const s=this.nodeMapByKey.get(e);s!=null&&!s.isRemoved()&&s.remove(r)&&(i=s.getValue());const o=Yf.of(e,t);return this.nodeMapByCreatedAt.set(t.getCreatedAt().toIDString(),o),(s==null||r.after(s.getValue().getPositionedAt()))&&(this.nodeMapByKey.set(e,o),t.setMovedAt(r)),i}delete(e,t){if(!this.nodeMapByCreatedAt.has(e.toIDString()))throw new k(S.ErrInvalidArgument,`fail to find ${e.toIDString()}`);const r=this.nodeMapByCreatedAt.get(e.toIDString());return r.remove(t),r.getValue()}subPathOf(e){const t=this.nodeMapByCreatedAt.get(e.toIDString());if(t)return t.getStrKey()}purge(e){const t=this.nodeMapByCreatedAt.get(e.getCreatedAt().toIDString());if(!t)throw new k(S.ErrInvalidArgument,`fail to find ${e.getCreatedAt().toIDString()}`);const r=this.nodeMapByKey.get(t.getStrKey());t===r&&this.nodeMapByKey.delete(r.getStrKey()),this.nodeMapByCreatedAt.delete(t.getValue().getCreatedAt().toIDString())}deleteByKey(e,t){const r=this.nodeMapByKey.get(e);if(r!=null&&r.remove(t))return r.getValue()}has(e){const t=this.nodeMapByKey.get(e);return t==null?!1:!t.isRemoved()}getByID(e){return this.nodeMapByCreatedAt.get(e.toIDString())}get(e){const t=this.nodeMapByKey.get(e);if(!(!t||t.isRemoved()))return t}*[Symbol.iterator](){for(const[,e]of this.nodeMapByKey)yield e}}class He extends Yr{constructor(t,r){super(t);u(this,"memberNodes");this.memberNodes=r}static create(t,r){if(!r)return new He(t,Ao.create());const i=Ao.create();for(const[s,o]of Object.entries(r))i.set(s,o.deepcopy(),o.getCreatedAt());return new He(t,i)}subPathOf(t){return this.memberNodes.subPathOf(t)}purge(t){this.memberNodes.purge(t)}set(t,r,i){return this.memberNodes.set(t,r,i)}delete(t,r){return this.memberNodes.delete(t,r)}deleteByKey(t,r){return this.memberNodes.deleteByKey(t,r)}get(t){const r=this.memberNodes.get(t);return r==null?void 0:r.getValue()}getByID(t){const r=this.memberNodes.getByID(t);return r==null?void 0:r.getValue()}has(t){return this.memberNodes.has(t)}getDataSize(){return{data:0,meta:this.getMetaUsage()}}toJSON(){const t=[];for(const[r,i]of this)t.push(`"${nn(r)}":${i.toJSON()}`);return`{${t.join(",")}}`}toJS(){return JSON.parse(this.toJSON())}toJSForTest(){const t={};for(const[r,i]of this){const{createdAt:s,value:o,type:a}=i.toJSForTest();t[r]={key:r,createdAt:s,value:o,type:a}}return{createdAt:this.getCreatedAt().toTestString(),value:t,type:"YORKIE_OBJECT"}}getKeys(){const t=Array();for(const[r]of this)t.push(r);return t}toSortedJSON(){var i;const t=Array();for(const[s]of this)t.push(s);const r=[];for(const s of t.sort()){const o=(i=this.memberNodes.get(s))==null?void 0:i.getValue();r.push(`"${nn(s)}":${o.toSortedJSON()}`)}return`{${r.join(",")}}`}getRHT(){return this.memberNodes}deepcopy(){const t=He.create(this.getCreatedAt());for(const r of this.memberNodes)t.memberNodes.set(r.getStrKey(),r.getValue().deepcopy(),this.getPositionedAt());return t.remove(this.getRemovedAt()),t}getDescendants(t){for(const r of this.memberNodes){const i=r.getValue();if(t(i,this))return;i instanceof Yr&&i.getDescendants(t)}}*[Symbol.iterator](){const t=new Set;for(const r of this.memberNodes)t.has(r.getStrKey())||(t.add(r.getStrKey()),r.isRemoved()||(yield[r.getStrKey(),r.getValue()]))}}var Q=(n=>(n.Local="local",n.Remote="remote",n.UndoRedo="undoredo",n))(Q||{});class $t{constructor(e,t){u(this,"parentCreatedAt");u(this,"executedAt");this.parentCreatedAt=e,this.executedAt=t}getParentCreatedAt(){return this.parentCreatedAt}getExecutedAt(){if(!this.executedAt)throw new k(S.ErrNotReady,"executedAt is not set yet");return this.executedAt}setActor(e){this.executedAt&&(this.executedAt=this.executedAt.setActor(e))}setExecutedAt(e){this.executedAt=e}}class sy{constructor(e){u(this,"value");u(this,"left");u(this,"right");u(this,"parent");u(this,"weight");this.value=e,this.initWeight()}getNodeString(){return`${this.weight}${this.value}`}getValue(){return this.value}getLeftWeight(){return this.hasLeft()?this.left.getWeight():0}getRightWeight(){return this.hasRight()?this.right.getWeight():0}getWeight(){return this.weight}getLeft(){return this.left}getRight(){return this.right}getParent(){return this.parent}hasLeft(){return!!this.left}hasRight(){return!!this.right}hasParent(){return!!this.parent}setLeft(e){this.left=e}setRight(e){this.right=e}setParent(e){this.parent=e}unlink(){this.parent=void 0,this.right=void 0,this.left=void 0}hasLinks(){return this.hasParent()||this.hasLeft()||this.hasRight()}increaseWeight(e){this.weight+=e}initWeight(){this.weight=this.getLength()}}class Io{constructor(e){u(this,"root");this.root=e}get length(){return this.root?this.root.getWeight():0}find(e){if(!this.root||e<0)return[void 0,0];let t=this.root;for(;;)if(t.hasLeft()&&e<=t.getLeftWeight())t=t.getLeft();else if(t.hasRight()&&t.getLeftWeight()+t.getLength()<e)e-=t.getLeftWeight()+t.getLength(),t=t.getRight();else{e-=t.getLeftWeight();break}if(e>t.getLength())throw new k(S.ErrInvalidArgument,`out of index range: pos: ${e} > node.length: ${t.getLength()}`);return this.splayNode(t),[t,e]}indexOf(e){return!e||e!==this.root&&!e.hasLinks()?-1:(this.splayNode(e),this.root.getLeftWeight())}getRoot(){return this.root}insert(e){return this.insertAfter(this.root,e)}insertAfter(e,t){return e?(this.splayNode(e),this.root=t,t.setRight(e.getRight()),e.hasRight()&&e.getRight().setParent(t),t.setLeft(e),e.setParent(t),e.setRight(),this.updateWeight(e),this.updateWeight(t),t):(this.root=t,t)}updateWeight(e){e.initWeight(),e.hasLeft()&&e.increaseWeight(e.getLeftWeight()),e.hasRight()&&e.increaseWeight(e.getRightWeight())}updateTreeWeight(e){for(;e;)this.updateWeight(e),e=e.getParent()}splayNode(e){if(e)for(;;)if(this.isLeftChild(e.getParent())&&this.isRightChild(e))this.rotateLeft(e),this.rotateRight(e);else if(this.isRightChild(e.getParent())&&this.isLeftChild(e))this.rotateRight(e),this.rotateLeft(e);else if(this.isLeftChild(e.getParent())&&this.isLeftChild(e))this.rotateRight(e.getParent()),this.rotateRight(e);else if(this.isRightChild(e.getParent())&&this.isRightChild(e))this.rotateLeft(e.getParent()),this.rotateLeft(e);else{this.isLeftChild(e)?this.rotateRight(e):this.isRightChild(e)&&this.rotateLeft(e),this.updateWeight(e);return}}delete(e){this.splayNode(e);const t=new Io(e.getLeft());t.root&&t.root.setParent();const r=new Io(e.getRight());if(r.root&&r.root.setParent(),t.root){const i=t.getRightmost();t.splayNode(i),t.root.setRight(r.root),r.root&&r.root.setParent(t.root),this.root=t.root}else this.root=r.root;e.unlink(),this.root&&this.updateWeight(this.root)}deleteRange(e,t){if(!t){this.splayNode(e),this.cutOffRight(e);return}this.splayNode(e),this.splayNode(t),t.getLeft()!=e&&this.rotateRight(e),this.cutOffRight(e)}cutOffRight(e){const t=[];this.traversePostorder(e.getRight(),t);for(const r of t)r.initWeight();this.updateTreeWeight(e)}toTestString(){const e=[];return this.traverseInorder(this.root,e),e.map(t=>`[${t.getWeight()},${t.getLength()}]${t.getValue()||""}`).join("")}checkWeight(){const e=[];this.traverseInorder(this.root,e);for(const t of e)if(t.getWeight()!=t.getLength()+t.getLeftWeight()+t.getRightWeight())return!1;return!0}getRightmost(){let e=this.root;for(;e.hasRight();)e=e.getRight();return e}traverseInorder(e,t){e&&(this.traverseInorder(e.getLeft(),t),t.push(e),this.traverseInorder(e.getRight(),t))}traversePostorder(e,t){e&&(this.traversePostorder(e.getLeft(),t),this.traversePostorder(e.getRight(),t),t.push(e))}rotateLeft(e){const t=e.getParent();t.hasParent()?t===t.getParent().getLeft()?t.getParent().setLeft(e):t.getParent().setRight(e):this.root=e,e.setParent(t.getParent()),t.setRight(e.getLeft()),t.hasRight()&&t.getRight().setParent(t),e.setLeft(t),e.getLeft().setParent(e),this.updateWeight(t),this.updateWeight(e)}rotateRight(e){const t=e.getParent();t.hasParent()?t===t.getParent().getLeft()?t.getParent().setLeft(e):t.getParent().setRight(e):this.root=e,e.setParent(t.getParent()),t.setLeft(e.getRight()),t.hasLeft()&&t.getLeft().setParent(t),e.setRight(t),e.getRight().setParent(e),this.updateWeight(t),this.updateWeight(e)}isLeftChild(e){return e&&e.hasParent()?e.getParent().getLeft()===e:!1}isRightChild(e){return e&&e.hasParent()?e.getParent().getRight()===e:!1}}/**
 * @license
 * Copyright 2009 The Closure Library Authors
 * Copyright 2020 Daniel Wirtz / The long.js Authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * SPDX-License-Identifier: Apache-2.0
 */var wt=null;try{wt=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function q(n,e,t){this.low=n|0,this.high=e|0,this.unsigned=!!t}q.prototype.__isLong__;Object.defineProperty(q.prototype,"__isLong__",{value:!0});function Be(n){return(n&&n.__isLong__)===!0}function rg(n){var e=Math.clz32(n&-n);return n?31-e:e}q.isLong=Be;var ig={},sg={};function Ri(n,e){var t,r,i;return e?(n>>>=0,(i=0<=n&&n<256)&&(r=sg[n],r)?r:(t=H(n,0,!0),i&&(sg[n]=t),t)):(n|=0,(i=-128<=n&&n<128)&&(r=ig[n],r)?r:(t=H(n,n<0?-1:0,!1),i&&(ig[n]=t),t))}q.fromInt=Ri;function St(n,e){if(isNaN(n))return e?pr:Lt;if(e){if(n<0)return pr;if(n>=oy)return uy}else{if(n<=-9223372036854776e3)return qe;if(n+1>=$S)return ly}return n<0?St(-n,e).neg():H(n%ys|0,n/ys|0,e)}q.fromNumber=St;function H(n,e,t){return new q(n,e,t)}q.fromBits=H;var vl=Math.pow;function Qf(n,e,t){if(n.length===0)throw Error("empty string");if(typeof e=="number"?(t=e,e=!1):e=!!e,n==="NaN"||n==="Infinity"||n==="+Infinity"||n==="-Infinity")return e?pr:Lt;if(t=t||10,t<2||36<t)throw RangeError("radix");var r;if((r=n.indexOf("-"))>0)throw Error("interior hyphen");if(r===0)return Qf(n.substring(1),e,t).neg();for(var i=St(vl(t,8)),s=Lt,o=0;o<n.length;o+=8){var a=Math.min(8,n.length-o),l=parseInt(n.substring(o,o+a),t);if(a<8){var c=St(vl(t,a));s=s.mul(c).add(St(l))}else s=s.mul(i),s=s.add(St(l))}return s.unsigned=e,s}q.fromString=Qf;function Ct(n,e){return typeof n=="number"?St(n,e):typeof n=="string"?Qf(n,e):H(n.low,n.high,typeof e=="boolean"?e:n.unsigned)}q.fromValue=Ct;var og=65536,JS=1<<24,ys=og*og,oy=ys*ys,$S=oy/2,ag=Ri(JS),Lt=Ri(0);q.ZERO=Lt;var pr=Ri(0,!0);q.UZERO=pr;var Gi=Ri(1);q.ONE=Gi;var ay=Ri(1,!0);q.UONE=ay;var Wc=Ri(-1);q.NEG_ONE=Wc;var ly=H(-1,2147483647,!1);q.MAX_VALUE=ly;var uy=H(-1,-1,!0);q.MAX_UNSIGNED_VALUE=uy;var qe=H(0,-2147483648,!1);q.MIN_VALUE=qe;var x=q.prototype;x.toInt=function(){return this.unsigned?this.low>>>0:this.low};x.toNumber=function(){return this.unsigned?(this.high>>>0)*ys+(this.low>>>0):this.high*ys+(this.low>>>0)};x.toString=function(e){if(e=e||10,e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(qe)){var t=St(e),r=this.div(t),i=r.mul(t).sub(this);return r.toString(e)+i.toInt().toString(e)}else return"-"+this.neg().toString(e);for(var s=St(vl(e,6),this.unsigned),o=this,a="";;){var l=o.div(s),c=o.sub(l.mul(s)).toInt()>>>0,d=c.toString(e);if(o=l,o.isZero())return d+a;for(;d.length<6;)d="0"+d;a=""+d+a}};x.getHighBits=function(){return this.high};x.getHighBitsUnsigned=function(){return this.high>>>0};x.getLowBits=function(){return this.low};x.getLowBitsUnsigned=function(){return this.low>>>0};x.getNumBitsAbs=function(){if(this.isNegative())return this.eq(qe)?64:this.neg().getNumBitsAbs();for(var e=this.high!=0?this.high:this.low,t=31;t>0&&!(e&1<<t);t--);return this.high!=0?t+33:t+1};x.isSafeInteger=function(){var e=this.high>>21;return e?this.unsigned?!1:e===-1&&!(this.low===0&&this.high===-2097152):!0};x.isZero=function(){return this.high===0&&this.low===0};x.eqz=x.isZero;x.isNegative=function(){return!this.unsigned&&this.high<0};x.isPositive=function(){return this.unsigned||this.high>=0};x.isOdd=function(){return(this.low&1)===1};x.isEven=function(){return(this.low&1)===0};x.equals=function(e){return Be(e)||(e=Ct(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low};x.eq=x.equals;x.notEquals=function(e){return!this.eq(e)};x.neq=x.notEquals;x.ne=x.notEquals;x.lessThan=function(e){return this.comp(e)<0};x.lt=x.lessThan;x.lessThanOrEqual=function(e){return this.comp(e)<=0};x.lte=x.lessThanOrEqual;x.le=x.lessThanOrEqual;x.greaterThan=function(e){return this.comp(e)>0};x.gt=x.greaterThan;x.greaterThanOrEqual=function(e){return this.comp(e)>=0};x.gte=x.greaterThanOrEqual;x.ge=x.greaterThanOrEqual;x.compare=function(e){if(Be(e)||(e=Ct(e)),this.eq(e))return 0;var t=this.isNegative(),r=e.isNegative();return t&&!r?-1:!t&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1};x.comp=x.compare;x.negate=function(){return!this.unsigned&&this.eq(qe)?qe:this.not().add(Gi)};x.neg=x.negate;x.add=function(e){Be(e)||(e=Ct(e));var t=this.high>>>16,r=this.high&65535,i=this.low>>>16,s=this.low&65535,o=e.high>>>16,a=e.high&65535,l=e.low>>>16,c=e.low&65535,d=0,h=0,m=0,y=0;return y+=s+c,m+=y>>>16,y&=65535,m+=i+l,h+=m>>>16,m&=65535,h+=r+a,d+=h>>>16,h&=65535,d+=t+o,d&=65535,H(m<<16|y,d<<16|h,this.unsigned)};x.subtract=function(e){return Be(e)||(e=Ct(e)),this.add(e.neg())};x.sub=x.subtract;x.multiply=function(e){if(this.isZero())return this;if(Be(e)||(e=Ct(e)),wt){var t=wt.mul(this.low,this.high,e.low,e.high);return H(t,wt.get_high(),this.unsigned)}if(e.isZero())return this.unsigned?pr:Lt;if(this.eq(qe))return e.isOdd()?qe:Lt;if(e.eq(qe))return this.isOdd()?qe:Lt;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(ag)&&e.lt(ag))return St(this.toNumber()*e.toNumber(),this.unsigned);var r=this.high>>>16,i=this.high&65535,s=this.low>>>16,o=this.low&65535,a=e.high>>>16,l=e.high&65535,c=e.low>>>16,d=e.low&65535,h=0,m=0,y=0,w=0;return w+=o*d,y+=w>>>16,w&=65535,y+=s*d,m+=y>>>16,y&=65535,y+=o*c,m+=y>>>16,y&=65535,m+=i*d,h+=m>>>16,m&=65535,m+=s*c,h+=m>>>16,m&=65535,m+=o*l,h+=m>>>16,m&=65535,h+=r*d+i*c+s*l+o*a,h&=65535,H(y<<16|w,h<<16|m,this.unsigned)};x.mul=x.multiply;x.divide=function(e){if(Be(e)||(e=Ct(e)),e.isZero())throw Error("division by zero");if(wt){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;var t=(this.unsigned?wt.div_u:wt.div_s)(this.low,this.high,e.low,e.high);return H(t,wt.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?pr:Lt;var r,i,s;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return pr;if(e.gt(this.shru(1)))return ay;s=pr}else{if(this.eq(qe)){if(e.eq(Gi)||e.eq(Wc))return qe;if(e.eq(qe))return Gi;var o=this.shr(1);return r=o.div(e).shl(1),r.eq(Lt)?e.isNegative()?Gi:Wc:(i=this.sub(e.mul(r)),s=r.add(i.div(e)),s)}else if(e.eq(qe))return this.unsigned?pr:Lt;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();s=Lt}for(i=this;i.gte(e);){r=Math.max(1,Math.floor(i.toNumber()/e.toNumber()));for(var a=Math.ceil(Math.log(r)/Math.LN2),l=a<=48?1:vl(2,a-48),c=St(r),d=c.mul(e);d.isNegative()||d.gt(i);)r-=l,c=St(r,this.unsigned),d=c.mul(e);c.isZero()&&(c=Gi),s=s.add(c),i=i.sub(d)}return s};x.div=x.divide;x.modulo=function(e){if(Be(e)||(e=Ct(e)),wt){var t=(this.unsigned?wt.rem_u:wt.rem_s)(this.low,this.high,e.low,e.high);return H(t,wt.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))};x.mod=x.modulo;x.rem=x.modulo;x.not=function(){return H(~this.low,~this.high,this.unsigned)};x.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32};x.clz=x.countLeadingZeros;x.countTrailingZeros=function(){return this.low?rg(this.low):rg(this.high)+32};x.ctz=x.countTrailingZeros;x.and=function(e){return Be(e)||(e=Ct(e)),H(this.low&e.low,this.high&e.high,this.unsigned)};x.or=function(e){return Be(e)||(e=Ct(e)),H(this.low|e.low,this.high|e.high,this.unsigned)};x.xor=function(e){return Be(e)||(e=Ct(e)),H(this.low^e.low,this.high^e.high,this.unsigned)};x.shiftLeft=function(e){return Be(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?H(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):H(0,this.low<<e-32,this.unsigned)};x.shl=x.shiftLeft;x.shiftRight=function(e){return Be(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?H(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):H(this.high>>e-32,this.high>=0?0:-1,this.unsigned)};x.shr=x.shiftRight;x.shiftRightUnsigned=function(e){return Be(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?H(this.low>>>e|this.high<<32-e,this.high>>>e,this.unsigned):e===32?H(this.high,0,this.unsigned):H(this.high>>>e-32,0,this.unsigned)};x.shru=x.shiftRightUnsigned;x.shr_u=x.shiftRightUnsigned;x.rotateLeft=function(e){var t;return Be(e)&&(e=e.toInt()),(e&=63)===0?this:e===32?H(this.high,this.low,this.unsigned):e<32?(t=32-e,H(this.low<<e|this.high>>>t,this.high<<e|this.low>>>t,this.unsigned)):(e-=32,t=32-e,H(this.high<<e|this.low>>>t,this.low<<e|this.high>>>t,this.unsigned))};x.rotl=x.rotateLeft;x.rotateRight=function(e){var t;return Be(e)&&(e=e.toInt()),(e&=63)===0?this:e===32?H(this.high,this.low,this.unsigned):e<32?(t=32-e,H(this.high<<t|this.low>>>e,this.low<<t|this.high>>>e,this.unsigned)):(e-=32,t=32-e,H(this.low<<t|this.high>>>e,this.high<<t|this.low>>>e,this.unsigned))};x.rotr=x.rotateRight;x.toSigned=function(){return this.unsigned?H(this.low,this.high,!1):this};x.toUnsigned=function(){return this.unsigned?this:H(this.low,this.high,!0)};x.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()};x.toBytesLE=function(){var e=this.high,t=this.low;return[t&255,t>>>8&255,t>>>16&255,t>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]};x.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,t>>>24,t>>>16&255,t>>>8&255,t&255]};q.fromBytes=function(e,t,r){return r?q.fromBytesLE(e,t):q.fromBytesBE(e,t)};q.fromBytesLE=function(e,t){return new q(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)};q.fromBytesBE=function(e,t){return new q(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)};typeof BigInt=="function"&&(q.fromBigInt=function(e,t){var r=Number(BigInt.asIntN(32,e)),i=Number(BigInt.asIntN(32,e>>BigInt(32)));return H(r,i,t)},q.fromValue=function(e,t){return typeof e=="bigint"?fromBigInt(e,t):Ct(e,t)},x.toBigInt=function(){var e=BigInt(this.low>>>0),t=BigInt(this.unsigned?this.high>>>0:this.high);return t<<BigInt(32)|e});var ve=(n=>(n[n.Null=0]="Null",n[n.Boolean=1]="Boolean",n[n.Integer=2]="Integer",n[n.Long=3]="Long",n[n.Double=4]="Double",n[n.String=5]="String",n[n.Bytes=6]="Bytes",n[n.Date=7]="Date",n))(ve||{});class ce extends Bo{constructor(t,r){super(r);u(this,"valueType");u(this,"value");this.valueType=ce.getPrimitiveType(t),this.value=t===void 0?null:t}static of(t,r){return new ce(t,r)}static valueFromBytes(t,r){switch(t){case 0:return null;case 1:return!!r[0];case 2:return r[0]|r[1]<<8|r[2]<<16|r[3]<<24;case 4:{const i=new DataView(r.buffer);return r.forEach(function(s,o){i.setUint8(o,s)}),i.getFloat64(0,!0)}case 5:return new TextDecoder("utf-8").decode(r);case 3:return q.fromBytesLE(Array.from(r));case 6:return r;case 7:return new Date(q.fromBytesLE(Array.from(r),!0).toNumber());default:throw new k(S.ErrUnimplemented,`unimplemented type: ${t}`)}}getValueSize(){switch(this.valueType){case 0:return 8;case 1:return 4;case 2:return 4;case 3:return 8;case 4:return 8;case 5:return this.value.length*2;case 6:return this.value.length;case 7:return 8;default:throw new k(S.ErrUnimplemented,`unimplemented type: ${this.valueType}`)}}getDataSize(){return{data:this.getValueSize(),meta:this.getMetaUsage()}}toJSON(){return this.valueType===5?`"${nn(this.value)}"`:`${this.value}`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:this.value,type:"YORKIE_PRIMITIVE"}}deepcopy(){const t=ce.of(this.value,this.getCreatedAt());return t.setMovedAt(this.getMovedAt()),t.setRemovedAt(this.getRemovedAt()),t}getType(){return this.valueType}static getPrimitiveType(t){switch(typeof t){case"undefined":return 0;case"boolean":return 1;case"number":return this.isInteger(t)?2:4;case"string":return 5;case"object":if(t===null)return 0;if(t instanceof q)return 3;if(t instanceof Uint8Array)return 6;if(t instanceof Date)return 7}}static isSupport(t){return ce.getPrimitiveType(t)!==void 0}static isInteger(t){return t%1===0}isNumericType(){const t=this.valueType;return t===2||t===3||t===4}getValue(){return this.value}toBytes(){switch(this.valueType){case 0:return new Uint8Array;case 1:return this.value?new Uint8Array([1]):new Uint8Array([0]);case 2:{const t=this.value;return new Uint8Array([t&255,t>>8&255,t>>16&255,t>>24&255])}case 4:{const t=this.value,r=new Uint8Array(8);return new DataView(r.buffer).setFloat64(0,t,!0),r}case 5:return new TextEncoder().encode(this.value);case 3:{const r=this.value.toBytesLE();return Uint8Array.from(r)}case 6:return this.value;case 7:{const t=this.value,r=q.fromNumber(t.getTime(),!0).toBytesLE();return Uint8Array.from(r)}default:throw new k(S.ErrUnimplemented,`unimplemented type: ${this.valueType}`)}}}class wl extends sy{constructor(t){super(t);u(this,"prev");u(this,"next");this.value=t}static createAfter(t,r){const i=new wl(r),s=t.next;return t.next=i,i.prev=t,i.next=s,s&&(s.prev=i),i}remove(t){return this.value.remove(t)}getCreatedAt(){return this.value.getCreatedAt()}getPositionedAt(){return this.value.getPositionedAt()}release(){this.prev&&(this.prev.next=this.next),this.next&&(this.next.prev=this.prev),this.prev=void 0,this.next=void 0}getLength(){return this.value.isRemoved()?0:1}getPrev(){return this.prev}getNext(){return this.next}getValue(){return this.value}isRemoved(){return this.value.isRemoved()}}class Eo{constructor(){u(this,"dummyHead");u(this,"last");u(this,"nodeMapByIndex");u(this,"nodeMapByCreatedAt");const e=ce.of(0,zt);e.setRemovedAt(zt),this.dummyHead=new wl(e),this.last=this.dummyHead,this.nodeMapByIndex=new Io,this.nodeMapByCreatedAt=new Map,this.nodeMapByIndex.insert(this.dummyHead),this.nodeMapByCreatedAt.set(this.dummyHead.getCreatedAt().toIDString(),this.dummyHead)}static create(){return new Eo}get length(){return this.nodeMapByIndex.length}findNextBeforeExecutedAt(e,t){let r=this.nodeMapByCreatedAt.get(e.toIDString());if(!r)throw new k(S.ErrInvalidArgument,`cant find the given node: ${e.toIDString()}`);for(;r.getNext()&&r.getNext().getPositionedAt().after(t);)r=r.getNext();return r}release(e){this.last===e&&(this.last=e.getPrev()),e.release(),this.nodeMapByIndex.delete(e),this.nodeMapByCreatedAt.delete(e.getValue().getCreatedAt().toIDString())}insertAfter(e,t,r=t.getCreatedAt()){const i=this.findNextBeforeExecutedAt(e,r),s=wl.createAfter(i,t);i===this.last&&(this.last=s),this.nodeMapByIndex.insertAfter(i,s),this.nodeMapByCreatedAt.set(s.getCreatedAt().toIDString(),s)}moveAfter(e,t,r){const i=this.nodeMapByCreatedAt.get(e.toIDString());if(!i)throw new k(S.ErrInvalidArgument,`cant find the given node: ${e.toIDString()}`);const s=this.nodeMapByCreatedAt.get(t.toIDString());if(!s)throw new k(S.ErrInvalidArgument,`cant find the given node: ${t.toIDString()}`);i!==s&&(!s.getValue().getMovedAt()||r.after(s.getValue().getMovedAt()))&&(this.release(s),this.insertAfter(i.getCreatedAt(),s.getValue(),r),s.getValue().setMovedAt(r))}insert(e){this.insertAfter(this.last.getCreatedAt(),e)}getByID(e){return this.nodeMapByCreatedAt.get(e.toIDString())}subPathOf(e){const t=this.nodeMapByCreatedAt.get(e.toIDString());if(t)return String(this.nodeMapByIndex.indexOf(t))}purge(e){const t=this.nodeMapByCreatedAt.get(e.getCreatedAt().toIDString());if(!t)throw new k(S.ErrInvalidArgument,`fail to find the given createdAt: ${e.getCreatedAt().toIDString()}`);this.release(t)}getByIndex(e){if(e>=this.length)return;const[t,r]=this.nodeMapByIndex.find(e);let i=t;if(e===0&&t===this.dummyHead||r>0)do i&&(i=i.getNext());while(i&&i.isRemoved());return i}getPrevCreatedAt(e){let t=this.nodeMapByCreatedAt.get(e.toIDString());do t=t.getPrev();while(this.dummyHead!==t&&t.isRemoved());return t.getValue().getCreatedAt()}delete(e,t){const r=this.nodeMapByCreatedAt.get(e.toIDString()),i=r.isRemoved();return r.remove(t)&&!i&&this.nodeMapByIndex.splayNode(r),r.getValue()}deleteByIndex(e,t){const r=this.getByIndex(e);if(r)return r.remove(t)&&this.nodeMapByIndex.splayNode(r),r.getValue()}getHead(){return this.dummyHead.getValue()}getLast(){return this.last.getValue()}getLastCreatedAt(){return this.last.getCreatedAt()}toTestString(){const e=[];for(const t of this){const r=`${t.getCreatedAt().toIDString()}:${t.getValue().toJSON()}`;t.isRemoved()?e.push(`{${r}}`):e.push(`[${r}]`)}return e.join("")}*[Symbol.iterator](){let e=this.dummyHead.getNext();for(;e;)yield e,e=e.getNext()}}class tt extends Yr{constructor(t,r){super(t);u(this,"elements");this.elements=r}static create(t,r){if(!r)return new tt(t,Eo.create());const i=Eo.create();for(const s of r)i.insertAfter(i.getLastCreatedAt(),s.deepcopy());return new tt(t,i)}subPathOf(t){return this.elements.subPathOf(t)}purge(t){this.elements.purge(t)}insertAfter(t,r){this.elements.insertAfter(t,r)}moveAfter(t,r,i){this.elements.moveAfter(t,r,i)}get(t){const r=this.elements.getByIndex(t);return r==null?void 0:r.getValue()}getByID(t){const r=this.elements.getByID(t);return r==null?void 0:r.getValue()}getHead(){return this.elements.getHead()}getLast(){return this.elements.getLast()}getPrevCreatedAt(t){return this.elements.getPrevCreatedAt(t)}delete(t,r){return this.elements.delete(t,r)}deleteByIndex(t,r){return this.elements.deleteByIndex(t,r)}getLastCreatedAt(){return this.elements.getLastCreatedAt()}get length(){return this.elements.length}*[Symbol.iterator](){for(const t of this.elements)t.isRemoved()||(yield t.getValue())}toTestString(){return this.elements.toTestString()}getDescendants(t){for(const r of this.elements){const i=r.getValue();if(t(i,this))return;i instanceof Yr&&i.getDescendants(t)}}getDataSize(){return{data:0,meta:this.getMetaUsage()}}toJSON(){const t=[];for(const r of this)t.push(r.toJSON());return`[${t.join(",")}]`}toJS(){return JSON.parse(this.toJSON())}toJSForTest(){const t={};for(let r=0;r<this.length;r++){const{createdAt:i,value:s,type:o}=this.get(r).toJSForTest();t[r]={key:String(r),createdAt:i,value:s,type:o}}return{createdAt:this.getCreatedAt().toTestString(),value:t,type:"YORKIE_ARRAY"}}toSortedJSON(){return this.toJSON()}getElements(){return this.elements}deepcopy(){const t=tt.create(this.getCreatedAt());for(const r of this.elements)t.elements.insertAfter(t.getLastCreatedAt(),r.getValue().deepcopy());return t.remove(this.getRemovedAt()),t}}class ni extends $t{constructor(t,r,i){super(t,i);u(this,"createdAt");this.createdAt=r}static create(t,r,i){return new ni(t,r,i)}execute(t,r){var c;const i=t.findByCreatedAt(this.getParentCreatedAt());if(!i)throw new k(S.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(i instanceof Yr))throw new k(S.ErrInvalidArgument,`only object and array can execute remove: ${i}`);if(r===Q.UndoRedo){let d=i.getByID(this.createdAt);for(;d;){if(d.getRemovedAt())return;d=(c=t.findElementPairByCreatedAt(d.getCreatedAt()))==null?void 0:c.parent}}const s=i.subPathOf(this.createdAt),o=this.toReverseOperation(i),a=i.delete(this.createdAt,this.getExecutedAt());return t.registerRemovedElement(a),{opInfos:i instanceof tt?[{type:"remove",path:t.createPath(this.getParentCreatedAt()),index:Number(s)}]:[{type:"remove",path:t.createPath(this.getParentCreatedAt()),key:s}],reverseOp:o}}toReverseOperation(t){if(t instanceof He){const r=t.subPathOf(this.createdAt);if(r!==void 0){const i=t.get(r);if(i!==void 0)return Pi.create(r,i.deepcopy(),this.getParentCreatedAt())}}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.REMOVE.${this.createdAt.toTestString()}`}getCreatedAt(){return this.createdAt}}class Pi extends $t{constructor(t,r,i,s){super(i,s);u(this,"key");u(this,"value");this.key=t,this.value=r}static create(t,r,i,s){return new Pi(t,r,i,s)}execute(t,r){var c;const i=t.findByCreatedAt(this.getParentCreatedAt());if(!i)throw new k(S.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(i instanceof He))throw new k(S.ErrInvalidArgument,"fail to execute, only object can execute set");if(r===Q.UndoRedo){let d=i;for(;d;){if(d.getRemovedAt())return;d=(c=t.findElementPairByCreatedAt(d.getCreatedAt()))==null?void 0:c.parent}}const s=i.get(this.key),o=this.toReverseOperation(s),a=this.value.deepcopy(),l=i.set(this.key,a,this.getExecutedAt());return r===Q.UndoRedo&&t.findByCreatedAt(a.getCreatedAt())&&t.deregisterElement(a),t.registerElement(a,i),l&&t.registerRemovedElement(l),{opInfos:[{type:"set",path:t.createPath(this.getParentCreatedAt()),key:this.key}],reverseOp:o}}toReverseOperation(t){let r=ni.create(this.getParentCreatedAt(),this.value.getCreatedAt());return t!==void 0&&!t.isRemoved()&&(r=Pi.create(this.key,t.deepcopy(),this.getParentCreatedAt())),r}getEffectedCreatedAt(){return this.value.getCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.SET.${this.key}=${this.value.toSortedJSON()}`}getKey(){return this.key}getValue(){return this.value}}class bo extends $t{constructor(t,r,i,s){super(t,s);u(this,"prevCreatedAt");u(this,"value");this.prevCreatedAt=r,this.value=i}static create(t,r,i,s){return new bo(t,r,i,s)}execute(t){const r=t.findByCreatedAt(this.getParentCreatedAt());if(!r)throw new k(S.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(r instanceof tt))throw new k(S.ErrInvalidArgument,"fail to execute, only array can execute add");const i=r,s=this.value.deepcopy();return i.insertAfter(this.prevCreatedAt,s),t.registerElement(s,i),{opInfos:[{type:"add",path:t.createPath(this.getParentCreatedAt()),index:Number(i.subPathOf(this.getEffectedCreatedAt()))}]}}getEffectedCreatedAt(){return this.value.getCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.ADD.${this.value.toJSON()}`}getPrevCreatedAt(){return this.prevCreatedAt}getValue(){return this.value}}class Jr extends $t{constructor(t,r,i,s){super(t,s);u(this,"prevCreatedAt");u(this,"createdAt");this.prevCreatedAt=r,this.createdAt=i}static create(t,r,i,s){return new Jr(t,r,i,s)}execute(t){const r=t.findByCreatedAt(this.getParentCreatedAt());if(!r)throw new k(S.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(r instanceof tt))throw new k(S.ErrInvalidArgument,"fail to execute, only array can execute move");const i=r,s=Number(i.subPathOf(this.createdAt));i.moveAfter(this.prevCreatedAt,this.createdAt,this.getExecutedAt());const o=Number(i.subPathOf(this.createdAt));return{opInfos:[{type:"move",path:t.createPath(this.getParentCreatedAt()),index:o,previousIndex:s}]}}getEffectedCreatedAt(){return this.createdAt}toTestString(){return`${this.getParentCreatedAt().toTestString()}.MOVE`}getPrevCreatedAt(){return this.prevCreatedAt}getCreatedAt(){return this.createdAt}}class yi{constructor(e,t,r,i){u(this,"key");u(this,"value");u(this,"updatedAt");u(this,"_isRemoved");this.key=e,this.value=t,this.updatedAt=r,this._isRemoved=i}static of(e,t,r,i){return new yi(e,t,r,i)}getKey(){return this.key}getValue(){return this.value}getUpdatedAt(){return this.updatedAt}isRemoved(){return this._isRemoved}toIDString(){return`${this.updatedAt.toIDString()}:${this.key}`}getRemovedAt(){if(this._isRemoved)return this.updatedAt}getDataSize(){return{data:(this.key.length+this.value.length)*2,meta:Gr}}}class Er{constructor(){u(this,"nodeMapByKey");u(this,"numberOfRemovedElement");this.nodeMapByKey=new Map,this.numberOfRemovedElement=0}static create(){return new Er}getNodeMapByKey(){return this.nodeMapByKey}set(e,t,r){const i=this.nodeMapByKey.get(e);if(i&&i.isRemoved()&&r.after(i.getUpdatedAt())&&(this.numberOfRemovedElement-=1),i===void 0||r.after(i.getUpdatedAt())){const s=yi.of(e,t,r,!1);return this.nodeMapByKey.set(e,s),i!==void 0&&i.isRemoved()?[i,s]:[void 0,s]}return i.isRemoved()?[i,void 0]:[void 0,void 0]}setInternal(e,t,r,i){const s=yi.of(e,t,r,i);this.nodeMapByKey.set(e,s),i&&this.numberOfRemovedElement++}remove(e,t){const r=this.nodeMapByKey.get(e),i=[];if(r===void 0||t.after(r.getUpdatedAt())){if(r===void 0){this.numberOfRemovedElement+=1;const a=yi.of(e,"",t,!0);return this.nodeMapByKey.set(e,a),i.push(a),i}const s=r.isRemoved();s||(this.numberOfRemovedElement+=1),s&&i.push(r);const o=yi.of(e,r.getValue(),t,!0);return this.nodeMapByKey.set(e,o),i.push(o),i}return i}has(e){if(this.nodeMapByKey.has(e)){const t=this.nodeMapByKey.get(e);return t!==void 0&&!t.isRemoved()}return!1}get(e){if(this.nodeMapByKey.has(e))return this.nodeMapByKey.get(e).getValue()}deepcopy(){const e=new Er;for(const[,t]of this.nodeMapByKey)e.setInternal(t.getKey(),t.getValue(),t.getUpdatedAt(),t.isRemoved());return e}toJSON(){if(!this.size())return"{}";const e=[];for(const[t,r]of this.nodeMapByKey)r.isRemoved()||e.push(`"${nn(t)}":"${nn(r.getValue())}"`);return`{${e.join(",")}}`}size(){return this.nodeMapByKey.size-this.numberOfRemovedElement}toObject(){const e={};for(const[t,r]of this.nodeMapByKey)r.isRemoved()||(e[t]=r.getValue());return e}*[Symbol.iterator](){for(const[,e]of this.nodeMapByKey)yield e}purge(e){const t=this.nodeMapByKey.get(e.getKey());t==null||t.toIDString()!=e.toIDString()||(this.nodeMapByKey.delete(e.getKey()),this.numberOfRemovedElement--)}}class xo{constructor(e){u(this,"attributes");u(this,"content");this.attributes=Er.create(),this.content=e}static create(e){return new xo(e)}get length(){return this.content.length}substring(e,t){const r=new xo(this.content.substring(e,t));return r.attributes=this.attributes.deepcopy(),r}setAttr(e,t,r){return this.attributes.set(e,t,r)}getAttrs(){return this.attributes}toString(){return this.content}getDataSize(){const e={data:0,meta:0};e.data+=this.content.length*2;for(const t of this.attributes){const r=t.getDataSize();e.meta+=r.meta,e.data+=r.data}return e}toJSON(){const e=nn(this.content),t=this.attributes.toObject(),r=[];for(const[i,s]of Object.entries(t)){const o=JSON.parse(s),a=typeof o=="string"?`"${nn(i)}":"${nn(o)}"`:`"${nn(i)}":${String(o)}`;r.push(a)}return r.sort(),r.length===0?`{"val":"${e}"}`:`{"attrs":{${r.join(",")}},"val":"${e}"}`}getAttributes(){return this.attributes.toObject()}getContent(){return this.content}purge(e){this.attributes&&e instanceof yi&&this.attributes.purge(e)}getGCPairs(){const e=[];for(const t of this.attributes)t.getRemovedAt()&&e.push({parent:this,child:t});return e}}class Et extends Bo{constructor(t,r){super(r);u(this,"rgaTreeSplit");this.rgaTreeSplit=t}static create(t,r){return new Et(t,r)}edit(t,r,i,s,o,a){const l=r?xo.create(r):void 0;if(l&&s)for(const[w,T]of Object.entries(s))l.setAttr(w,T,i);const[c,d,h,m]=this.rgaTreeSplit.edit(t,i,l,o,a),y=m.map(w=>({...w,value:w.value?{attributes:vr(w.value.getAttributes()),content:w.value.getContent()}:{attributes:void 0,content:""},type:"content"}));return[d,y,h,[c,c]]}setStyle(t,r,i,s,o){const[,a]=this.rgaTreeSplit.findNodeWithSplit(t[1],i),[,l]=this.rgaTreeSplit.findNodeWithSplit(t[0],i),c=[],d=this.rgaTreeSplit.findBetween(l,a),h=new Map,m=[];for(const w of d){const T=w.getCreatedAt().getActorID();let P,p=0n;if(o===void 0&&s===void 0?p=Xs:o.size()>0?p=o.get(T)?o.get(T):0n:P=s.has(T)?s.get(T):zt,w.canStyle(i,P,p)){const g=h.get(T),v=w.getCreatedAt();(!g||v.after(g))&&h.set(T,v),m.push(w)}}const y=[];for(const w of m){if(w.isRemoved())continue;const[T,P]=this.rgaTreeSplit.findIndexesFromRange(w.createPosRange());c.push({type:"style",actor:i.getActorID(),from:T,to:P,value:{attributes:vr(r)}});for(const[p,g]of Object.entries(r)){const[v]=w.getValue().setAttr(p,g,i);v!==void 0&&y.push({parent:w.getValue(),child:v})}}return[h,y,c]}indexRangeToPosRange(t,r){const i=this.rgaTreeSplit.indexToPos(t);return t===r?[i,i]:[i,this.rgaTreeSplit.indexToPos(r)]}get length(){return this.rgaTreeSplit.length}getTreeByIndex(){return this.rgaTreeSplit.getTreeByIndex()}getTreeByID(){return this.rgaTreeSplit.getTreeByID()}getDataSize(){const t={data:0,meta:0};for(const r of this.rgaTreeSplit){if(r.isRemoved())continue;const i=r.getDataSize();t.data+=i.data,t.meta+=i.meta}return{data:t.data,meta:t.meta+this.getMetaUsage()}}toJSON(){const t=[];for(const r of this.rgaTreeSplit)r.isRemoved()||t.push(r.getValue().toJSON());return`[${t.join(",")}]`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:JSON.parse(this.toJSON()),type:"YORKIE_TEXT"}}toString(){return this.rgaTreeSplit.toString()}values(){const t=[];for(const r of this.rgaTreeSplit)if(!r.isRemoved()){const i=r.getValue();t.push({attributes:vr(i.getAttributes()),content:i.getContent()})}return t}getRGATreeSplit(){return this.rgaTreeSplit}toTestString(){return this.rgaTreeSplit.toTestString()}deepcopy(){const t=new Et(this.rgaTreeSplit.deepcopy(),this.getCreatedAt());return t.remove(this.getRemovedAt()),t}findIndexesFromRange(t){return this.rgaTreeSplit.findIndexesFromRange(t)}getGCPairs(){const t=[];for(const r of this.rgaTreeSplit){r.getRemovedAt()&&t.push({parent:this.rgaTreeSplit,child:r});for(const i of r.getValue().getGCPairs())t.push(i)}return t}}class Mo extends $t{constructor(t,r,i,s,o,a,l){super(t,l);u(this,"fromPos");u(this,"toPos");u(this,"maxCreatedAtMapByActor");u(this,"content");u(this,"attributes");this.fromPos=r,this.toPos=i,this.maxCreatedAtMapByActor=s,this.content=o,this.attributes=a}static create(t,r,i,s,o,a,l){return new Mo(t,r,i,s,o,a,l)}execute(t,r,i){const s=t.findByCreatedAt(this.getParentCreatedAt());if(!s)throw new k(S.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(s instanceof Et))throw new k(S.ErrInvalidArgument,"fail to execute, only Text can execute edit");const o=s,[,a,l]=o.edit([this.fromPos,this.toPos],this.content,this.getExecutedAt(),Object.fromEntries(this.attributes),this.maxCreatedAtMapByActor,i);for(const c of l)t.registerGCPair(c);return{opInfos:a.map(({from:c,to:d,value:h})=>({type:"edit",from:c,to:d,value:h,path:t.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const t=this.getParentCreatedAt().toTestString(),r=this.fromPos.toTestString(),i=this.toPos.toTestString(),s=this.content;return`${t}.EDIT(${r},${i},${s})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getContent(){return this.content}getAttributes(){return this.attributes||new Map}getMaxCreatedAtMapByActor(){return this.maxCreatedAtMapByActor}}class zo extends $t{constructor(t,r,i,s,o,a){super(t,a);u(this,"fromPos");u(this,"toPos");u(this,"maxCreatedAtMapByActor");u(this,"attributes");this.fromPos=r,this.toPos=i,this.maxCreatedAtMapByActor=s,this.attributes=o}static create(t,r,i,s,o,a){return new zo(t,r,i,s,o,a)}execute(t,r,i){const s=t.findByCreatedAt(this.getParentCreatedAt());if(!s)throw new k(S.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(s instanceof Et))throw new k(S.ErrInvalidArgument,"fail to execute, only Text can execute edit");const o=s,[,a,l]=o.setStyle([this.fromPos,this.toPos],this.attributes?Object.fromEntries(this.attributes):{},this.getExecutedAt(),this.maxCreatedAtMapByActor,i);for(const c of a)t.registerGCPair(c);return{opInfos:l.map(({from:c,to:d,value:h})=>({type:"style",from:c,to:d,value:h,path:t.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const t=this.getParentCreatedAt().toTestString(),r=this.fromPos.toTestString(),i=this.toPos.toTestString(),s=this.attributes;return`${t}.STYL(${r},${i},${JSON.stringify(s)})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getAttributes(){return this.attributes}getMaxCreatedAtMapByActor(){return this.maxCreatedAtMapByActor}}const US=2,jS="root",on="text";function Bs(n,e){let t=0;const r=n.children;for(let i=0;i<e;i++){const s=r[i];!s||s.isRemoved||(t+=s.paddedSize)}return t}class VS{constructor(e,t=[]){u(this,"type");u(this,"parent");u(this,"_children");u(this,"size");if(this.type=e,this.size=0,this._children=t,this.isText&&this._children.length>0)throw new k(S.ErrRefused,"Text node cannot have children")}updateAncestorsSize(){let e=this.parent;const t=this.isRemoved?-1:1;for(;e&&(e.size+=this.paddedSize*t,!e.isRemoved);)e=e.parent}updateDescendantsSize(){let e=0;for(const t of this._children){const r=t.updateDescendantsSize();t.isRemoved||(e+=r)}return this.size+=e,this.paddedSize}get isText(){return this.type===on}get paddedSize(){return this.size+(this.isText?0:US)}isAncestorOf(e){return qS(this,e)}get nextSibling(){const e=this.parent.findOffset(this),t=this.parent.children[e+1];if(t)return t}get prevSibling(){const e=this.parent.findOffset(this),t=this.parent.children[e-1];if(t)return t}splitText(e,t){if(e===0||e===this.size)return;const r=this.value.slice(0,e),i=this.value.slice(e);if(!i.length)return;this.value=r;const s=this.cloneText(e+t);return s.value=i,this.parent.insertAfterInternal(s,this),s}get children(){return this._children.filter(e=>!e.isRemoved)}get allChildren(){return[...this._children]}hasTextChild(){return this.children.length>0&&this.children.every(e=>e.isText)}getChildrenText(){return this.isText?this.value:this.hasTextChild()?this.children.map(e=>e.value).join(""):""}append(...e){if(this.isText)throw new k(S.ErrRefused,"Text node cannot have children");this._children.push(...e);for(const t of e)t.parent=this,t.updateAncestorsSize()}prepend(...e){if(this.isText)throw new k(S.ErrRefused,"Text node cannot have children");this._children.unshift(...e);for(const t of e)t.parent=this}insertBefore(e,t){if(this.isText)throw new k(S.ErrRefused,"Text node cannot have children");const r=this._children.indexOf(t);if(r===-1)throw new k(S.ErrInvalidArgument,"child not found");this.insertAtInternal(e,r),e.updateAncestorsSize()}insertAfter(e,t){if(this.isText)throw new k(S.ErrRefused,"Text node cannot have children");const r=this._children.indexOf(t);if(r===-1)throw new k(S.ErrInvalidArgument,"child not found");this.insertAtInternal(e,r+1),e.updateAncestorsSize()}insertAt(e,t){if(this.isText)throw new k(S.ErrRefused,"Text node cannot have children");this.insertAtInternal(e,t),e.updateAncestorsSize()}removeChild(e){if(this.isText)throw new k(S.ErrRefused,"Text node cannot have children");const t=this._children.indexOf(e);if(t===-1)throw new k(S.ErrInvalidArgument,"child not found");this._children.splice(t,1),e.parent=void 0}splitElement(e,t){const r=this.cloneElement(t);this.parent.insertAfterInternal(r,this),r.updateAncestorsSize();const i=this.children.slice(0,e),s=this.children.slice(e);this._children=i,r._children=s,this.size=this._children.reduce((o,a)=>o+a.paddedSize,0),r.size=r._children.reduce((o,a)=>o+a.paddedSize,0);for(const o of r._children)o.parent=r;return r}insertAfterInternal(e,t){if(this.isText)throw new k(S.ErrRefused,"Text node cannot have children");const r=this._children.indexOf(t);if(r===-1)throw new k(S.ErrInvalidArgument,"child not found");this.insertAtInternal(e,r+1)}insertAtInternal(e,t){if(this.isText)throw new k(S.ErrRefused,"Text node cannot have children");this._children.splice(t,0,e),e.parent=this}findOffset(e){if(this.isText)throw new k(S.ErrRefused,"Text node cannot have children");if(e.isRemoved){const t=this._children.indexOf(e);return this.allChildren.splice(0,t).filter(i=>!i.isRemoved).length}return this.children.indexOf(e)}findBranchOffset(e){if(this.isText)throw new k(S.ErrRefused,"Text node cannot have children");let t=e;for(;t;){const r=this._children.indexOf(t);if(r!==-1)return r;t=t.parent}return-1}}function qS(n,e){if(n===e)return!1;for(;e.parent;){if(e.parent===n)return!0;e=e.parent}return!1}var me=(n=>(n.Start="Start",n.End="End",n.Text="Text",n))(me||{});function cy(n,e,t,r){if(e>t)throw new k(S.ErrInvalidArgument,`from is greater than to: ${e} > ${t}`);if(e>n.size)throw new k(S.ErrInvalidArgument,`from is out of range: ${e} > ${n.size}`);if(t>n.size)throw new k(S.ErrInvalidArgument,`to is out of range: ${t} > ${n.size}`);if(e===t)return;let i=0;for(const s of n.children){if(e-s.paddedSize<i&&i<t){const o=s.isText?e-i:e-i-1,a=s.isText?t-i:t-i-1,l=!s.isText&&o<0,c=!s.isText&&a>s.size;(s.isText||l)&&r([s,s.isText?"Text":"Start"],c),cy(s,Math.max(0,o),Math.min(a,s.size),r),c&&r([s,"End"],c)}i+=s.paddedSize}}function fy(n,e,t=0){for(const r of n.children)fy(r,e,t+1);e(n,t)}function jl(n,e,t=0){for(const r of n._children)jl(r,e,t+1);e(n,t)}function _c(n,e,t=!0){if(e>n.size)throw new k(S.ErrInvalidArgument,`index is out of range: ${e} > ${n.size}`);if(n.isText)return{node:n,offset:e};let r=0,i=0;for(const s of n.children){if(t&&s.isText&&s.size>=e-i)return _c(s,e-i,t);if(e===i)return{node:n,offset:r};if(!t&&s.paddedSize===e-i)return{node:n,offset:r+1};if(s.paddedSize>e-i)return _c(s,e-i-1,t);i+=s.paddedSize,r+=1}return{node:n,offset:r}}function dy(n){return n.isText||n.children.length===0?n:dy(n.children[0])}function KS(n,e){if(n.size<e)throw new k(S.ErrInvalidArgument,"unacceptable path");for(let t=0;t<n.children.length;t++){const r=n.children[t];if(r.size<e)e-=r.size;else{n=r;break}}return{node:n,offset:e}}class WS{constructor(e){u(this,"root");this.root=e}tokensBetween(e,t,r){cy(this.root,e,t,r)}traverse(e){fy(this.root,e,0)}traverseAll(e){jl(this.root,e,0)}findTreePos(e,t=!0){return _c(this.root,e,t)}treePosToPath(e){const t=[];let r=e.node;if(r.isText){const i=r.parent.findOffset(r);if(i===-1)throw new k(S.ErrInvalidArgument,"invalid treePos");const s=Bs(r.parent,i);t.push(s+e.offset),r=r.parent}else if(r.hasTextChild()){const i=Bs(r,e.offset);t.push(i)}else t.push(e.offset);for(;r.parent;){const i=r.parent.findOffset(r);if(i===-1)throw new k(S.ErrInvalidArgument,"invalid treePos");t.push(i),r=r.parent}return t.reverse()}pathToIndex(e){const t=this.pathToTreePos(e);return this.indexOf(t)}pathToTreePos(e){if(!e.length)throw new k(S.ErrInvalidArgument,"unacceptable path");let t=this.root;for(let r=0;r<e.length-1;r++){const i=e[r];if(t=t.children[i],!t)throw new k(S.ErrInvalidArgument,"unacceptable path")}if(t.hasTextChild())return KS(t,e[e.length-1]);if(t.children.length<e[e.length-1])throw new k(S.ErrInvalidArgument,"unacceptable path");return{node:t,offset:e[e.length-1]}}getRoot(){return this.root}get size(){return this.root.size}findPostorderRight(e){const{node:t,offset:r}=e;if(t.isText){if(t.size===r){const i=t.nextSibling;return i||t.parent}return t}return t.children.length===r?t:dy(t.children[r])}indexOf(e){let{node:t}=e;const{offset:r}=e;let i=0,s=1;if(t.isText){i+=r;const o=t.parent,a=o.findOffset(t);if(a===-1)throw new k(S.ErrInvalidArgument,"invalid pos");i+=Bs(o,a),t=t.parent}else i+=Bs(t,r);for(;t!=null&&t.parent;){const o=t.parent,a=o.findOffset(t);if(a===-1)throw new k(S.ErrInvalidArgument,"invalid pos");i+=Bs(o,a),s++,t=t.parent}return i+s-1}indexToPath(e){const t=this.findTreePos(e);return this.treePosToPath(t)}}const _S=(n,e)=>n===e?0:n<e?-1:1;class HS{constructor(e,t,r){u(this,"key");u(this,"value");u(this,"parent");u(this,"left");u(this,"right");u(this,"isRed");this.key=e,this.value=t,this.isRed=r}}class GS{constructor(e){u(this,"stack");this.stack=[],this.traverseInorder(e)}traverseInorder(e){e&&(this.traverseInorder(e.left),this.stack.push({key:e.key,value:e.value}),this.traverseInorder(e.right))}}class hy{constructor(e){u(this,"root");u(this,"comparator");u(this,"counter");this.comparator=typeof e<"u"?e:_S,this.counter=0}put(e,t){return this.root=this.putInternal(e,t,this.root),this.root.isRed=!1,t}get(e){const t=this.getInternal(e,this.root);return t?t.value:void 0}remove(e){!this.isRed(this.root.left)&&!this.isRed(this.root.right)&&(this.root.isRed=!0),this.root=this.removeInternal(this.root,e),this.root&&(this.root.isRed=!1)}getIterator(){return new GS(this.root)}values(){const e=[];for(const t of this.getIterator().stack)e.push(t.value);return e}floorEntry(e){let t=this.root;for(;t;){const r=this.comparator(e,t.key);if(r>0)if(t.right)t.right.parent=t,t=t.right;else return t;else if(r<0)if(t.left)t.left.parent=t,t=t.left;else{let i=t.parent,s=t;for(;i&&s===i.left;)s=i,i=i.parent;return i}else return t}}lastEntry(){if(!this.root)return this.root;let e=this.root;for(;e.right;)e=e.right;return e}size(){return this.counter}isEmpty(){return this.counter===0}getInternal(e,t){for(;t;){const r=this.comparator(e,t.key);if(r===0)return t;r<0?t=t.left:r>0&&(t=t.right)}}putInternal(e,t,r){if(!r)return this.counter+=1,new HS(e,t,!0);const i=this.comparator(e,r.key);return i<0?r.left=this.putInternal(e,t,r.left):i>0?r.right=this.putInternal(e,t,r.right):r.value=t,this.isRed(r.right)&&!this.isRed(r.left)&&(r=this.rotateLeft(r)),this.isRed(r.left)&&this.isRed(r.left.left)&&(r=this.rotateRight(r)),this.isRed(r.left)&&this.isRed(r.right)&&this.flipColors(r),r}removeInternal(e,t){if(this.comparator(t,e.key)<0)!this.isRed(e.left)&&!this.isRed(e.left.left)&&(e=this.moveRedLeft(e)),e.left=this.removeInternal(e.left,t);else{if(this.isRed(e.left)&&(e=this.rotateRight(e)),this.comparator(t,e.key)===0&&!e.right){this.counter-=1;return}if(!this.isRed(e.right)&&!this.isRed(e.right.left)&&(e=this.moveRedRight(e)),this.comparator(t,e.key)===0){this.counter-=1;const r=this.min(e.right);e.value=r.value,e.key=r.key,e.right=this.removeMin(e.right)}else e.right=this.removeInternal(e.right,t)}return this.fixUp(e)}min(e){return e.left?this.min(e.left):e}removeMin(e){if(e.left)return!this.isRed(e.left)&&!this.isRed(e.left.left)&&(e=this.moveRedLeft(e)),e.left=this.removeMin(e.left),this.fixUp(e)}fixUp(e){return this.isRed(e.right)&&(e=this.rotateLeft(e)),this.isRed(e.left)&&this.isRed(e.left.left)&&(e=this.rotateRight(e)),this.isRed(e.left)&&this.isRed(e.right)&&this.flipColors(e),e}moveRedLeft(e){return this.flipColors(e),this.isRed(e.right.left)&&(e.right=this.rotateRight(e.right),e=this.rotateLeft(e),this.flipColors(e)),e}moveRedRight(e){return this.flipColors(e),this.isRed(e.left.left)&&(e=this.rotateRight(e),this.flipColors(e)),e}isRed(e){return e&&e.isRed}rotateLeft(e){const t=e.right;return e.right=t.left,t.left=e,t.isRed=t.left.isRed,t.left.isRed=!0,t}rotateRight(e){const t=e.left;return e.left=t.right,t.right=e,t.isRed=t.right.isRed,t.right.isRed=!0,t}flipColors(e){e.isRed=!e.isRed,e.left.isRed=!e.left.isRed,e.right.isRed=!e.right.isRed}}class Bt{constructor(e,t){u(this,"parentID");u(this,"leftSiblingID");this.parentID=e,this.leftSiblingID=t}static of(e,t){return new Bt(e,t)}static fromTreePos(e){const{offset:t}=e;let{node:r}=e,i;return r.isText?(r.parent.children[0]===r&&t===0?i=r.parent:i=r,r=r.parent):t===0?i=r:i=r.children[t-1],Bt.of(r.id,Ce.of(i.getCreatedAt(),i.getOffset()+t))}getParentID(){return this.parentID}static fromStruct(e){return Bt.of(Ce.of(Tt.fromStruct(e.parentID.createdAt),e.parentID.offset),Ce.of(Tt.fromStruct(e.leftSiblingID.createdAt),e.leftSiblingID.offset))}toStruct(){return{parentID:{createdAt:this.getParentID().getCreatedAt().toStruct(),offset:this.getParentID().getOffset()},leftSiblingID:{createdAt:this.getLeftSiblingID().getCreatedAt().toStruct(),offset:this.getLeftSiblingID().getOffset()}}}toTreeNodePair(e){const t=this.getParentID(),r=this.getLeftSiblingID(),i=e.findFloorNode(t);let s=e.findFloorNode(r);if(!i||!s)throw new k(S.ErrRefused,`cannot find node of CRDTTreePos(${t.toTestString()}, ${r.toTestString()})`);return!r.equals(t)&&r.getOffset()>0&&r.getOffset()===s.id.getOffset()&&s.insPrevID&&(s=e.findFloorNode(s.insPrevID)),[i,s]}getLeftSiblingID(){return this.leftSiblingID}equals(e){return this.getParentID().getCreatedAt().equals(e.getParentID().getCreatedAt())&&this.getParentID().getOffset()===e.getParentID().getOffset()&&this.getLeftSiblingID().getCreatedAt().equals(e.getLeftSiblingID().getCreatedAt())&&this.getLeftSiblingID().getOffset()===e.getLeftSiblingID().getOffset()}}class Ce{constructor(e,t){u(this,"createdAt");u(this,"offset");this.createdAt=e,this.offset=t}static of(e,t){return new Ce(e,t)}static fromStruct(e){return Ce.of(Tt.fromStruct(e.createdAt),e.offset)}static createComparator(){return(e,t)=>{const r=e.getCreatedAt().compare(t.getCreatedAt());return r!==0?r:e.getOffset()>t.getOffset()?1:e.getOffset()<t.getOffset()?-1:0}}getCreatedAt(){return this.createdAt}equals(e){return this.createdAt.compare(e.createdAt)===0&&this.offset===e.offset}getOffset(){return this.offset}setOffset(e){this.offset=e}toStruct(){return{createdAt:this.createdAt.toStruct(),offset:this.offset}}toIDString(){return`${this.createdAt.toIDString()}:${this.offset}`}toTestString(){return`${this.createdAt.toTestString()}/${this.offset}`}}class Ze extends VS{constructor(t,r,i,s,o){super(r);u(this,"id");u(this,"removedAt");u(this,"attrs");u(this,"insPrevID");u(this,"insNextID");u(this,"_value","");this.id=t,this.removedAt=o,s&&(this.attrs=s),typeof i=="string"?this.value=i:Array.isArray(i)&&(this._children=i)}toIDString(){return this.id.toIDString()}getRemovedAt(){return this.removedAt}static create(t,r,i,s){return new Ze(t,r,i,s)}deepcopy(){var r;const t=new Ze(this.id,this.type);return t.removedAt=this.removedAt,t._value=this._value,t.size=this.size,t.attrs=(r=this.attrs)==null?void 0:r.deepcopy(),t._children=this._children.map(i=>{const s=i.deepcopy();return s.parent=t,s}),t.insPrevID=this.insPrevID,t.insNextID=this.insNextID,t}get value(){if(!this.isText)throw new k(S.ErrInvalidType,`cannot get value of element node: ${this.type}`);return this._value}set value(t){if(!this.isText)throw new k(S.ErrInvalidType,`cannot set value of element node: ${this.type}`);this._value=t,this.size=t.length}get isRemoved(){return!!this.removedAt}remove(t){const r=!this.removedAt;(!this.removedAt||this.removedAt.compare(t)>0)&&(this.removedAt=t),r&&this.updateAncestorsSize()}cloneText(t){return new Ze(Ce.of(this.id.getCreatedAt(),t),this.type,void 0,void 0,this.removedAt)}cloneElement(t){return new Ze(Ce.of(t(),0),this.type,void 0,void 0,this.removedAt)}split(t,r,i){const s=this.isText?this.splitText(r,this.id.getOffset()):this.splitElement(r,i);if(s){if(s.insPrevID=this.id,this.insNextID){const o=t.findFloorNode(this.insNextID);o.insPrevID=s.id,s.insNextID=this.insNextID}this.insNextID=s.id,t.registerNode(s)}return s}getCreatedAt(){return this.id.getCreatedAt()}getOffset(){return this.id.getOffset()}canDelete(t,r,i){return(r?!this.getCreatedAt().after(r):this.getCreatedAt().getLamport()<=i)&&(!this.removedAt||t.after(this.removedAt))}canStyle(t,r,i){return this.isText?!1:(r?!this.getCreatedAt().after(r):this.getCreatedAt().getLamport()<=i)&&(!this.removedAt||t.after(this.removedAt))}setAttrs(t,r){this.attrs||(this.attrs=new Er);const i=[];for(const[s,o]of Object.entries(t))i.push(this.attrs.set(s,o,r));return i}purge(t){this.attrs&&this.attrs.purge(t)}getDataSize(){const t={data:0,meta:0};if(this.isText&&(t.data+=this.size*2),this.id&&(t.meta+=Gr),this.removedAt&&(t.meta+=Gr),this.attrs)for(const r of this.attrs){if(r.getRemovedAt())continue;const i=r.getDataSize();t.meta+=i.meta,t.data+=i.data}return t}getGCPairs(){const t=[];if(!this.attrs)return t;for(const r of this.attrs)r.getRemovedAt()&&t.push({parent:this,child:r});return t}}function Hc(n){var t;if(n.isText){const r=n;return{type:r.type,value:r.value}}const e={type:n.type,children:n.children.map(Hc)};return n.attrs&&(e.attributes=vr((t=n.attrs)==null?void 0:t.toObject())),e}function Xf(n){if(n.isText)return n.value;let e="";return n.attrs&&n.attrs.size()&&(e=" "+Array.from(n.attrs).filter(t=>!t.isRemoved()).sort((t,r)=>t.getKey().localeCompare(r.getKey())).map(t=>{const r=JSON.parse(t.getValue());return typeof r=="string"?`${t.getKey()}="${r}"`:`${t.getKey()}="${nn(t.getValue())}"`}).join(" ")),`<${n.type}${e}>${n.children.map(t=>Xf(t)).join("")}</${n.type}>`}function gy(n){if(n.isText){const e=n;return{type:e.type,value:e.value,size:e.size,isRemoved:e.isRemoved}}return{type:n.type,children:n.children.map(gy),size:n.size,isRemoved:n.isRemoved}}class xt extends Bo{constructor(t,r){super(r);u(this,"indexTree");u(this,"nodeMapByID");this.indexTree=new WS(t),this.nodeMapByID=new hy(Ce.createComparator()),this.indexTree.traverseAll(i=>{this.nodeMapByID.put(i.id,i)})}static create(t,r){return new xt(t,r)}findFloorNode(t){const r=this.nodeMapByID.floorEntry(t);if(!(!r||!r.key.getCreatedAt().equals(t.getCreatedAt())))return r.value}registerNode(t){this.nodeMapByID.put(t.id,t)}findNodesAndSplitText(t,r){const[i,s]=t.toTreeNodePair(this);let o=s;const a=i===o,l=o.parent&&!a?o.parent:i;if(o.isText&&o.split(this,t.getLeftSiblingID().getOffset()-o.id.getOffset()),r){const c=l.allChildren,d=a?0:c.indexOf(o)+1;for(let h=d;h<c.length;h++){const m=c[h];if(!m.id.getCreatedAt().after(r))break;o=m}}return[l,o]}style(t,r,i,s,o){const[a,l]=this.findNodesAndSplitText(t[0],i),[c,d]=this.findNodesAndSplitText(t[1],i),h=[],m=r?vr(r):{},y=new Map,w=[];return this.traverseInPosRange(a,l,c,d,([T])=>{const P=T.getCreatedAt().getActorID();let p,g=0n;if(o===void 0&&s===void 0?g=Xs:o.size()>0?g=o.get(P)?o.get(P):0n:p=s.has(P)?s.get(P):zt,T.canStyle(i,p,g)&&r){const v=y.get(P),I=T.getCreatedAt();(!v||I.after(v))&&y.set(P,I);const E=T.setAttrs(r,i),N=E.reduce((W,[,J])=>(J&&(W[J.getKey()]=m[J.getKey()]),W),{}),D=T.parent,R=T.prevSibling||T.parent;Object.keys(N).length>0&&h.push({type:"style",from:this.toIndex(D,R),to:this.toIndex(T,T),fromPath:this.toPath(D,R),toPath:this.toPath(T,T),actor:i.getActorID(),value:N});for(const[W]of E)W&&w.push({parent:T,child:W})}}),[y,w,h]}removeStyle(t,r,i,s,o){const[a,l]=this.findNodesAndSplitText(t[0],i),[c,d]=this.findNodesAndSplitText(t[1],i),h=[],m=new Map,y=[];return this.traverseInPosRange(a,l,c,d,([w])=>{const T=w.getCreatedAt().getActorID();let P,p=0n;if(o===void 0&&s===void 0?p=Xs:o.size()>0?p=o.get(T)?o.get(T):0n:P=s.has(T)?s.get(T):zt,w.canStyle(i,P,p)&&r){const g=m.get(T),v=w.getCreatedAt();(!g||v.after(g))&&m.set(T,v),w.attrs||(w.attrs=new Er);for(const N of r){const D=w.attrs.remove(N,i);for(const R of D)y.push({parent:w,child:R})}const I=w.parent,E=w.prevSibling||w.parent;h.push({actor:i.getActorID(),type:"removeStyle",from:this.toIndex(I,E),to:this.toIndex(w,w),fromPath:this.toPath(I,E),toPath:this.toPath(w,w),value:r})}}),[m,y,h]}edit(t,r,i,s,o,a,l){const[c,d]=this.findNodesAndSplitText(t[0],s),[h,m]=this.findNodesAndSplitText(t[1],s),y=this.toIndex(c,d),w=this.toPath(c,d),T=[],P=[],p=[],g=new Map;this.traverseInPosRange(c,d,h,m,([E,N],D)=>{if(N===me.Start&&!D)for(const Se of E.children)p.push(Se);const R=E.getCreatedAt().getActorID();let W,J=0n;if(l===void 0&&a===void 0?J=Xs:l.size()>0?J=l.get(R)?l.get(R):0n:W=a.has(R)?a.get(R):zt,E.canDelete(s,W,J)||T.includes(E.parent)){const Se=g.get(R),Ut=E.getCreatedAt();(!Se||Ut.after(Se))&&g.set(R,Ut),(N===me.Text||N===me.Start)&&T.push(E),P.push([E,N])}});const v=this.makeDeletionChanges(P,s),I=[];for(const E of T)E.remove(s),E.isRemoved&&I.push({parent:this,child:E});for(const E of p)E.removedAt||c.append(E);if(i>0){let E=0,N=c,D=d;for(;E<i;)N.split(this,N.findOffset(D)+1,o),D=N,N=N.parent,E++;v.push({type:"content",from:y,to:y,fromPath:w,toPath:w,actor:s.getActorID()})}if(r!=null&&r.length){const E=[];let N=d;for(const D of r)N===c?c.insertAt(D,0):c.insertAfter(D,N),N=D,jl(D,R=>{c.isRemoved&&(R.remove(s),I.push({parent:this,child:R})),this.nodeMapByID.put(R.id,R)}),D.isRemoved||E.push(D);if(E.length){const D=E.map(R=>Hc(R));v.length&&v[v.length-1].from===y?v[v.length-1].value=D:v.push({type:"content",from:y,to:y,fromPath:w,toPath:w,actor:s.getActorID(),value:D})}}return[v,I,g]}editT(t,r,i,s,o){const a=this.findPos(t[0]),l=this.findPos(t[1]);this.edit([a,l],r,i,s,o)}move(t,r,i){throw new k(S.ErrUnimplemented,`not implemented: ${t}, ${r}, ${i}`)}pathToTreePos(t){return this.indexTree.pathToTreePos(t)}purge(t){var s;(s=t.parent)==null||s.removeChild(t),this.nodeMapByID.remove(t.id);const r=t.insPrevID,i=t.insNextID;if(r){const o=this.findFloorNode(r);o.insNextID=i}if(i){const o=this.findFloorNode(i);o.insPrevID=r}t.insPrevID=void 0,t.insNextID=void 0}getGCPairs(){const t=[];return this.indexTree.traverse(r=>{r.getRemovedAt()&&t.push({parent:this,child:r});for(const i of r.getGCPairs())t.push(i)}),t}findPos(t,r=!0){const i=this.indexTree.findTreePos(t,r);return Bt.fromTreePos(i)}pathToPosRange(t){const r=this.pathToIndex(t);return[this.findPos(r),this.findPos(r+1)]}pathToPos(t){const r=this.indexTree.pathToIndex(t);return this.findPos(r)}getRoot(){return this.indexTree.getRoot()}getSize(){return this.indexTree.size}getNodeSize(){return this.nodeMapByID.size()}getIndexTree(){return this.indexTree}toXML(){return Xf(this.indexTree.getRoot())}getDataSize(){const t={data:0,meta:0};return this.indexTree.traverse(r=>{if(r.getRemovedAt())return;const i=r.getDataSize();t.data+=i.data,t.meta+=i.meta}),{data:t.data,meta:t.meta+this.getMetaUsage()}}toJSON(){return JSON.stringify(this.getRootTreeNode())}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:JSON.parse(this.toJSON()),type:"YORKIE_TREE"}}toJSInfoForTest(){const t=this.indexTree.getRoot(),r=(i,s=void 0,o=void 0,a=0)=>{var y,w,T,P;let l,c,d;const h=i.isText?{node:i,offset:0}:s&&o?this.toTreePos(s,o):null;h&&(l=this.indexTree.indexOf(h),c=this.indexTree.treePosToPath(h),d=Bt.fromTreePos(h).toStruct());const m={type:i.type,parent:s==null?void 0:s.id.toTestString(),size:i.size,id:i.id.toTestString(),removedAt:(y=i.removedAt)==null?void 0:y.toTestString(),insPrev:(w=i.insPrevID)==null?void 0:w.toTestString(),insNext:(T=i.insNextID)==null?void 0:T.toTestString(),value:i.isText?i.value:void 0,isRemoved:i.isRemoved,children:[],depth:a,attributes:i.attrs?vr((P=i.attrs)==null?void 0:P.toObject()):void 0,index:l,path:c,pos:d};for(let p=0;p<i.allChildren.length;p++){const g=p===0?i:i.allChildren[p-1];m.children.push(r(i.allChildren[p],i,g,a+1))}return m};return r(t)}getRootTreeNode(){return Hc(this.indexTree.getRoot())}toTestTreeNode(){return gy(this.indexTree.getRoot())}toSortedJSON(){return this.toJSON()}deepcopy(){const t=this.getRoot();return new xt(t.deepcopy(),this.getCreatedAt())}toPath(t,r){const i=this.toTreePos(t,r);return i?this.indexTree.treePosToPath(i):[]}toIndex(t,r){const i=this.toTreePos(t,r);return i?this.indexTree.indexOf(i):-1}indexToPath(t){return this.indexTree.indexToPath(t)}pathToIndex(t){return this.indexTree.pathToIndex(t)}indexRangeToPosRange(t){const r=this.findPos(t[0]);return t[0]===t[1]?[r,r]:[r,this.findPos(t[1])]}indexRangeToPosStructRange(t){const[r,i]=t,s=this.findPos(r);return r===i?[s.toStruct(),s.toStruct()]:[s.toStruct(),this.findPos(i).toStruct()]}posRangeToPathRange(t){const[r,i]=this.findNodesAndSplitText(t[0]),[s,o]=this.findNodesAndSplitText(t[1]);return[this.toPath(r,i),this.toPath(s,o)]}posRangeToIndexRange(t){const[r,i]=this.findNodesAndSplitText(t[0]),[s,o]=this.findNodesAndSplitText(t[1]);return[this.toIndex(r,i),this.toIndex(s,o)]}traverseInPosRange(t,r,i,s,o){const a=this.toIndex(t,r),l=this.toIndex(i,s);return this.indexTree.tokensBetween(a,l,o)}toTreePos(t,r){if(!t||!r)return;if(t.isRemoved){let s;for(;t.isRemoved;)s=t,t=s.parent;const o=t.findOffset(s);return{node:t,offset:o}}if(t===r)return{node:t,offset:0};let i=t.findOffset(r);if(!r.isRemoved){if(r.isText)return{node:r,offset:r.paddedSize};i++}return{node:t,offset:i}}makeDeletionChanges(t,r){const i=[],s=[];let o=null,a=null;for(let l=0;l<t.length;l++){const c=t[l],d=t[l+1];o||(o=c),a=c;const h=this.findRightToken(c);(!h||!d||h[0]!==d[0]||h[1]!==d[1])&&(s.push([o,a]),o=null,a=null)}for(const l of s){const[c,d]=l,[h,m]=this.findLeftToken(c),[y,w]=d,T=m===me.Start?h:h.parent,P=w===me.Start?y:y.parent,p=this.toIndex(T,h),g=this.toIndex(P,y);p<g&&(i.length>0&&p===i[i.length-1].to?(i[i.length-1].to=g,i[i.length-1].toPath=this.toPath(P,y)):i.push({type:"content",from:p,to:g,fromPath:this.toPath(T,h),toPath:this.toPath(P,y),actor:r.getActorID()}))}return i.reverse()}findRightToken([t,r]){if(r===me.Start){const l=t.allChildren;return l.length>0?[l[0],l[0].isText?me.Text:me.Start]:[t,me.End]}const i=t.parent,s=i.allChildren,o=s.indexOf(t);if(i&&o===s.length-1)return[i,me.End];const a=s[o+1];return[a,a.isText?me.Text:me.Start]}findLeftToken([t,r]){if(r===me.End){const l=t.allChildren;if(l.length>0){const c=l[l.length-1];return[c,c.isText?me.Text:me.End]}return[t,me.Start]}const i=t.parent,s=i.allChildren,o=s.indexOf(t);if(i&&o===0)return[i,me.Start];const a=s[o-1];return[a,a.isText?me.Text:me.End]}}class Fo extends $t{constructor(t,r,i,s,o,a,l){super(t,l);u(this,"fromPos");u(this,"toPos");u(this,"contents");u(this,"splitLevel");u(this,"maxCreatedAtMapByActor");this.fromPos=r,this.toPos=i,this.contents=s,this.splitLevel=o,this.maxCreatedAtMapByActor=a}static create(t,r,i,s,o,a,l){return new Fo(t,r,i,s,o,a,l)}execute(t,r,i){var d;const s=t.findByCreatedAt(this.getParentCreatedAt());if(!s)throw new k(S.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(s instanceof xt))throw new k(S.ErrInvalidArgument,"fail to execute, only Tree can execute edit");const o=this.getExecutedAt(),a=s,[l,c]=a.edit([this.fromPos,this.toPos],(d=this.contents)==null?void 0:d.map(h=>h.deepcopy()),this.splitLevel,o,(()=>{let h=o.getDelimiter();return this.contents!==void 0&&(h+=this.contents.length),()=>Tt.of(o.getLamport(),++h,o.getActorID())})(),this.maxCreatedAtMapByActor,i);for(const h of c)t.registerGCPair(h);return{opInfos:l.map(({from:h,to:m,value:y,splitLevel:w,fromPath:T,toPath:P})=>({type:"tree-edit",path:t.createPath(this.getParentCreatedAt()),from:h,to:m,value:y,splitLevel:w,fromPath:T,toPath:P}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const t=this.getParentCreatedAt().toTestString(),r=`${this.fromPos.getLeftSiblingID().getCreatedAt().toTestString()}/${this.fromPos.getLeftSiblingID().getOffset()}`,i=`${this.toPos.getLeftSiblingID().getCreatedAt().toTestString()}/${this.toPos.getLeftSiblingID().getOffset()}`,s=this.contents||[];return`${t}.EDIT(${r},${i},${s.map(o=>Xf(o)).join("")})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getContents(){return this.contents}getSplitLevel(){return this.splitLevel}getMaxCreatedAtMapByActor(){return this.maxCreatedAtMapByActor}}class rs{constructor(e){u(this,"vector");this.vector=e||new Map}set(e,t){this.vector.set(e,t)}unset(e){this.vector.delete(e)}get(e){return this.vector.get(e)}maxLamport(){let e=BigInt(0);for(const[,t]of this)t>e&&(e=t);return e}max(e){const t=new Map;for(const[r,i]of e){const s=this.vector.get(r),o=s&&s>i?s:i;t.set(r,o)}for(const[r,i]of this){const s=e.get(r),o=s&&s>i?s:i;t.set(r,o)}return new rs(t)}afterOrEqual(e){const t=this.vector.get(e.getActorID());return t===void 0?!1:t>=e.getLamport()}deepcopy(){const e=new Map;for(const[t,r]of this.vector)e.set(t,r);return new rs(e)}filter(e){const t=new Map;for(const[r]of e){const i=this.vector.get(r);i!==void 0&&t.set(r,i)}return new rs(t)}size(){return this.vector.size}*[Symbol.iterator](){for(const[e,t]of this.vector)yield[e,t]}}const YS=new rs(new Map);class cr{constructor(e,t,r,i,s){u(this,"clientSeq");u(this,"serverSeq");u(this,"lamport");u(this,"actor");u(this,"versionVector");this.clientSeq=e,this.serverSeq=s,this.lamport=t,this.versionVector=i,this.actor=r}static of(e,t,r,i,s){return new cr(e,t,r,i,s)}next(){const e=this.versionVector.deepcopy();return e.set(this.actor,this.lamport+1n),new cr(this.clientSeq+1,this.lamport+1n,this.actor,e)}syncClocks(e){const t=e.lamport>this.lamport?e.lamport+1n:this.lamport+1n;let r=e.versionVector;r.size()===0&&(r=r.deepcopy(),r.set(e.actor,e.lamport));const i=this.versionVector.max(r),s=new cr(this.clientSeq,t,this.actor,i);return s.versionVector.set(this.actor,t),s}setClocks(e,t){const r=e>this.lamport?e+1n:this.lamport+1n;t.unset(Ul);const i=this.versionVector.max(t);return i.set(this.actor,r),cr.of(this.clientSeq,r,this.actor,i)}createTimeTicket(e){return Tt.of(this.lamport,e,this.actor)}setActor(e){return new cr(this.clientSeq,this.lamport,e,this.versionVector,this.serverSeq)}setVersionVector(e){return new cr(this.clientSeq,this.lamport,this.actor,e,this.serverSeq)}getClientSeq(){return this.clientSeq}getServerSeq(){return this.serverSeq?this.serverSeq.toString():""}getLamport(){return this.lamport}getLamportAsString(){return this.lamport.toString()}getActorID(){return this.actor}getVersionVector(){return this.versionVector}toTestString(){return`${this.lamport.toString()}:${this.actor.slice(-2)}:${this.clientSeq}`}}const QS=new cr(0,0n,Ul,YS);class vs{constructor({id:e,operations:t,presenceChange:r,message:i}){u(this,"id");u(this,"operations");u(this,"presenceChange");u(this,"message");this.id=e,this.operations=t||[],this.presenceChange=r,this.message=i}static create({id:e,operations:t,presenceChange:r,message:i}){return new vs({id:e,operations:t,presenceChange:r,message:i})}getID(){return this.id}getMessage(){return this.message}hasOperations(){return this.operations.length>0}getOperations(){return this.operations}setActor(e){for(const t of this.operations)t.setActor(e);this.id=this.id.setActor(e)}hasPresenceChange(){return this.presenceChange!==void 0}getPresenceChange(){return this.presenceChange}execute(e,t,r){const i=[],s=[];for(const o of this.operations){const a=o.execute(e,r,this.id.getVersionVector());if(!a)continue;const{opInfos:l,reverseOp:c}=a;i.push(...l),c&&s.unshift(c)}return this.presenceChange&&(this.presenceChange.type===ti.Put?t.set(this.id.getActorID(),Dt(this.presenceChange.presence)):t.delete(this.id.getActorID())),{opInfos:i,reverseOps:s}}toTestString(){return`${this.operations.map(e=>e.toTestString()).join(",")}`}toStruct(){return{changeID:de.bytesToHex(de.toChangeID(this.getID()).toBinary()),message:this.getMessage(),operations:this.getOperations().map(e=>de.bytesToHex(de.toOperation(e).toBinary())),presenceChange:this.getPresenceChange()}}static fromStruct(e){const{changeID:t,operations:r,presenceChange:i,message:s}=e;return vs.create({id:de.bytesToChangeID(de.hexToBytes(t)),operations:r==null?void 0:r.map(o=>de.bytesToOperation(de.hexToBytes(o))),presenceChange:i,message:s})}}class Vl{constructor(e,t,r,i,s,o,a){u(this,"documentKey");u(this,"checkpoint");u(this,"isRemoved");u(this,"changes");u(this,"snapshot");u(this,"minSyncedTicket");u(this,"versionVector");this.documentKey=e,this.checkpoint=t,this.isRemoved=r,this.changes=i,this.snapshot=o,this.minSyncedTicket=a,this.versionVector=s}static create(e,t,r,i,s,o,a){return new Vl(e,t,r,i,s,o,a)}getDocumentKey(){return this.documentKey}getCheckpoint(){return this.checkpoint}getIsRemoved(){return this.isRemoved}getChanges(){return this.changes}hasChanges(){return this.changes.length>0}getChangeSize(){return this.changes.length}hasSnapshot(){return!!this.snapshot&&!!this.snapshot.length}getSnapshot(){return this.snapshot}getMinSyncedTicket(){return this.minSyncedTicket}getVersionVector(){return this.versionVector}}class is{constructor(e,t){u(this,"serverSeq");u(this,"clientSeq");this.serverSeq=e,this.clientSeq=t}static of(e,t){return new is(e,t)}increaseClientSeq(e){return e===0?this:new is(this.serverSeq,this.clientSeq+e)}forward(e){if(this.equals(e))return this;const t=this.serverSeq>e.serverSeq?this.serverSeq:e.serverSeq,r=Math.max(this.clientSeq,e.clientSeq);return is.of(t,r)}getServerSeqAsString(){return this.serverSeq.toString()}getClientSeq(){return this.clientSeq}getServerSeq(){return this.serverSeq}equals(e){return this.clientSeq===e.clientSeq&&this.serverSeq==e.serverSeq}toTestString(){return`serverSeq=${this.serverSeq}, clientSeq=${this.clientSeq}`}}const XS=new is(0n,0);class an{constructor(e,t){u(this,"createdAt");u(this,"offset");this.createdAt=e,this.offset=t}static of(e,t){return new an(e,t)}static fromStruct(e){return an.of(Tt.fromStruct(e.createdAt),e.offset)}getCreatedAt(){return this.createdAt}getOffset(){return this.offset}equals(e){return this.createdAt.compare(e.createdAt)===0&&this.offset===e.offset}hasSameCreatedAt(e){return this.createdAt.compare(e.createdAt)===0}split(e){return new an(this.createdAt,this.offset+e)}toStruct(){return{createdAt:this.createdAt.toStruct(),offset:this.offset}}toTestString(){return`${this.createdAt.toTestString()}:${this.offset}`}toIDString(){return`${this.createdAt.toIDString()}:${this.offset}`}}const ZS=an.of(zt,0);class Ft{constructor(e,t){u(this,"id");u(this,"relativeOffset");this.id=e,this.relativeOffset=t}static of(e,t){return new Ft(e,t)}static fromStruct(e){const t=an.fromStruct(e.id);return Ft.of(t,e.relativeOffset)}getID(){return this.id}getRelativeOffset(){return this.relativeOffset}getAbsoluteID(){return an.of(this.id.getCreatedAt(),this.id.getOffset()+this.relativeOffset)}toTestString(){return`${this.id.toTestString()}:${this.relativeOffset}`}toStruct(){return{id:this.id.toStruct(),relativeOffset:this.relativeOffset}}equals(e){return this.id.equals(e.id)?this.relativeOffset===e.relativeOffset:!1}}class Qr extends sy{constructor(t,r,i){super(r);u(this,"id");u(this,"removedAt");u(this,"prev");u(this,"next");u(this,"insPrev");u(this,"insNext");this.id=t,this.removedAt=i}static create(t,r){return new Qr(t,r)}static createComparator(){return(t,r)=>{const i=t.getCreatedAt().compare(r.getCreatedAt());return i!==0?i:t.getOffset()>r.getOffset()?1:t.getOffset()<r.getOffset()?-1:0}}getID(){return this.id}getCreatedAt(){return this.id.getCreatedAt()}getLength(){return this.removedAt?0:this.getContentLength()}getContentLength(){return this.value&&this.value.length||0}getPrev(){return this.prev}getNext(){return this.next}getInsPrev(){return this.insPrev}getInsNext(){return this.insNext}getInsPrevID(){return this.insPrev.getID()}setPrev(t){this.prev=t,t&&(t.next=this)}setNext(t){this.next=t,t&&(t.prev=this)}setInsPrev(t){this.insPrev=t,t&&(t.insNext=this)}setInsNext(t){this.insNext=t,t&&(t.insPrev=this)}hasNext(){return!!this.next}hasInsPrev(){return!!this.insPrev}isRemoved(){return!!this.removedAt}getRemovedAt(){return this.removedAt}split(t){return new Qr(this.id.split(t),this.splitValue(t),this.removedAt)}canDelete(t,r,i){const s=!this.removedAt;return(r?!this.getCreatedAt().after(r):this.getCreatedAt().getLamport()<=i)&&(!this.removedAt||t.after(this.removedAt))?s:!1}canStyle(t,r,i){return(r?!this.getCreatedAt().after(r):this.getCreatedAt().getLamport()<=i)&&(!this.removedAt||t.after(this.removedAt))}remove(t){this.removedAt=t}createPosRange(){return[Ft.of(this.id,0),Ft.of(this.id,this.getLength())]}getDataSize(){const t=this.value.getDataSize();return this.id&&(t.meta+=Gr),this.removedAt&&(t.meta+=Gr),t}deepcopy(){return new Qr(this.id,this.value,this.removedAt)}toTestString(){return`${this.id.toTestString()} ${this.value?this.value:""}`}splitValue(t){const r=this.value;return this.value=r.substring(0,t),r.substring(t,r.length)}toIDString(){return this.id.toIDString()}}class ws{constructor(){u(this,"head");u(this,"treeByIndex");u(this,"treeByID");this.head=Qr.create(ZS),this.treeByIndex=new Io,this.treeByID=new hy(Qr.createComparator()),this.treeByIndex.insert(this.head),this.treeByID.put(this.head.getID(),this.head)}static create(){return new ws}edit(e,t,r,i,s){const[o,a]=this.findNodeWithSplit(e[1],t),[l,c]=this.findNodeWithSplit(e[0],t),d=this.findBetween(c,a),[h,m,y]=this.deleteNodes(d,t,i,s),w=a?a.getID():o.getID();let T=Ft.of(w,0);if(r){const p=this.posToIndex(l.createPosRange()[1],!0),g=this.insertAfter(l,Qr.create(an.of(t,0),r));h.length&&h[h.length-1].from===p?h[h.length-1].value=r:h.push({actor:t.getActorID(),from:p,to:p,value:r}),T=Ft.of(g.getID(),g.getContentLength())}const P=[];for(const[,p]of y)P.push({parent:this,child:p});return[T,m,P,h]}indexToPos(e){const[t,r]=this.treeByIndex.find(e),i=t;return Ft.of(i.getID(),r)}findIndexesFromRange(e){const[t,r]=e;return[this.posToIndex(t,!1),this.posToIndex(r,!0)]}posToIndex(e,t){const r=e.getAbsoluteID(),i=t?this.findFloorNodePreferToLeft(r):this.findFloorNode(r);if(!i)throw new k(S.ErrInvalidArgument,`the node of the given id should be found: ${r.toTestString()}`);const s=this.treeByIndex.indexOf(i),o=i.isRemoved()?0:r.getOffset()-i.getID().getOffset();return s+o}findNode(e){return this.findFloorNode(e)}get length(){return this.treeByIndex.length}getTreeByIndex(){return this.treeByIndex}getTreeByID(){return this.treeByID}toString(){const e=[];for(const t of this)t.isRemoved()||e.push(t.getValue());return e.join("")}*[Symbol.iterator](){let e=this.head.getNext();for(;e;)yield e,e=e.getNext()}getHead(){return this.head}deepcopy(){const e=new ws;let t=this.head.getNext(),r=e.head,i;for(;t;){if(i=e.insertAfter(r,t.deepcopy()),t.hasInsPrev()){const s=e.findNode(t.getInsPrevID());i.setInsPrev(s)}r=i,t=t.getNext()}return e}toTestString(){const e=[];let t=this.head;for(;t;)t.isRemoved()?e.push(`{${t.toTestString()}}`):e.push(`[${t.toTestString()}]`),t=t.getNext();return e.join("")}insertAfter(e,t){const r=e.getNext();return t.setPrev(e),r&&r.setPrev(t),this.treeByID.put(t.getID(),t),this.treeByIndex.insertAfter(e,t),t}findNodeWithSplit(e,t){const r=e.getAbsoluteID();let i=this.findFloorNodePreferToLeft(r);const s=r.getOffset()-i.getID().getOffset();for(this.splitNode(i,s);i.hasNext()&&i.getNext().getCreatedAt().after(t);)i=i.getNext();return[i,i.getNext()]}findFloorNodePreferToLeft(e){let t=this.findFloorNode(e);if(!t)throw new k(S.ErrInvalidArgument,`the node of the given id should be found: ${e.toTestString()}`);if(e.getOffset()>0&&t.getID().getOffset()==e.getOffset()){if(!t.hasInsPrev())return t;t=t.getInsPrev()}return t}findFloorNode(e){const t=this.treeByID.floorEntry(e);if(t&&!(!t.key.equals(e)&&!t.key.hasSameCreatedAt(e)))return t.value}findBetween(e,t){const r=[];let i=e;for(;i&&i!==t;)r.push(i),i=i.getNext();return r}splitNode(e,t){if(t>e.getContentLength())throw new k(S.ErrInvalidArgument,"offset should be less than or equal to length");if(t===0)return e;if(t===e.getContentLength())return e.getNext();const r=e.split(t);this.treeByIndex.updateWeight(r),this.insertAfter(e,r);const i=e.getInsNext();return i&&i.setInsPrev(r),r.setInsPrev(e),r}deleteNodes(e,t,r,i){if(!e.length)return[[],new Map,new Map];const[s,o]=this.filterNodes(e,t,r,i),a=new Map,l=new Map,c=this.makeChanges(o,t);for(const d of s){const h=d.getCreatedAt().getActorID();(!a.has(h)||d.getID().getCreatedAt().after(a.get(h)))&&a.set(h,d.getID().getCreatedAt()),l.set(d.getID().toIDString(),d),d.remove(t)}return this.deleteIndexNodes(o),[c,a,l]}filterNodes(e,t,r,i){const s=[],o=[],[a,l]=this.findEdgesOfCandidates(e);o.push(a);for(const c of e){const d=c.getCreatedAt().getActorID();let h,m=0n;i===void 0&&r===void 0?m=Xs:i.size()>0?m=i.get(d)?i.get(d):0n:h=r.has(d)?r.get(d):zt,c.canDelete(t,h,m)?s.push(c):o.push(c)}return o.push(l),[s,o]}findEdgesOfCandidates(e){return[e[0].getPrev(),e[e.length-1].getNext()]}makeChanges(e,t){const r=[];let i,s;for(let o=0;o<e.length-1;o++){const a=e[o],l=e[o+1];a.getNext()!=l&&([i]=this.findIndexesFromRange(a.getNext().createPosRange()),l?[,s]=this.findIndexesFromRange(l.getPrev().createPosRange()):s=this.treeByIndex.length,i<s&&r.push({actor:t.getActorID(),from:i,to:s}))}return r.reverse()}deleteIndexNodes(e){for(let t=0;t<e.length-1;t++){const r=e[t],i=e[t+1];r.getNext()!=i&&this.treeByIndex.deleteRange(r,i)}}purge(e){this.treeByIndex.delete(e),this.treeByID.remove(e.getID());const t=e.getPrev(),r=e.getNext(),i=e.getInsPrev(),s=e.getInsNext();t&&t.setNext(r),r&&r.setPrev(t),e.setPrev(void 0),e.setNext(void 0),i&&i.setInsNext(s),s&&s.setInsPrev(i),e.setInsPrev(void 0),e.setInsNext(void 0)}}const lg=n=>n<0?Math.ceil(n):Math.floor(n);var ln=(n=>(n[n.Int=0]="Int",n[n.Long=1]="Long",n))(ln||{});class nt extends Bo{constructor(t,r,i){super(i);u(this,"valueType");u(this,"value");switch(this.valueType=t,t){case 0:typeof r=="number"?r>Math.pow(2,31)-1||r<-Math.pow(2,31)?this.value=q.fromNumber(r).toInt():this.value=lg(r):this.value=r.toInt();break;case 1:typeof r=="number"?this.value=q.fromNumber(r):this.value=r;break;default:throw new k(S.ErrUnimplemented,`unimplemented type: ${t}`)}}static create(t,r,i){return new nt(t,r,i)}static valueFromBytes(t,r){switch(t){case 0:return r[0]|r[1]<<8|r[2]<<16|r[3]<<24;case 1:return q.fromBytesLE(Array.from(r));default:throw new k(S.ErrUnimplemented,`unimplemented type: ${t}`)}}getDataSize(){return{data:this.valueType===0?4:8,meta:this.getMetaUsage()}}toJSON(){return`${this.value}`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:this.value,type:"YORKIE_COUNTER"}}deepcopy(){const t=nt.create(this.valueType,this.value,this.getCreatedAt());return t.setMovedAt(this.getMovedAt()),t}getType(){return this.valueType}static getCounterType(t){switch(typeof t){case"object":return t instanceof q?1:void 0;case"number":return t>Math.pow(2,31)-1||t<-Math.pow(2,31)?1:0;default:return}}static isSupport(t){return!!nt.getCounterType(t)}static isInteger(t){return t%1===0}isNumericType(){const t=this.valueType;return t===0||t===1}getValueType(){return this.valueType}getValue(){return this.value}toBytes(){switch(this.valueType){case 0:{const t=this.value;return new Uint8Array([t&255,t>>8&255,t>>16&255,t>>24&255])}case 1:{const r=this.value.toBytesLE();return Uint8Array.from(r)}default:throw new k(S.ErrUnimplemented,`unimplemented type: ${this.valueType}`)}}increase(t){function r(i){if(!i.isNumericType())throw new TypeError(`Unsupported type of value: ${typeof i.getValue()}`)}return r(this),r(t),this.valueType===1?this.value=this.value.add(t.getValue()):t.getType()===ve.Long?this.value=this.value+t.getValue().toInt():this.value=q.fromNumber(this.value+lg(t.getValue())).toInt(),this}}class Ss extends $t{constructor(t,r,i){super(t,i);u(this,"value");this.value=r}static create(t,r,i){return new Ss(t,r,i)}execute(t){const r=t.findByCreatedAt(this.getParentCreatedAt());if(!r)throw new k(S.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(r instanceof nt))throw new k(S.ErrInvalidArgument,"fail to execute, only Counter can execute increase");const i=r,s=this.value.deepcopy();return i.increase(s),{opInfos:[{type:"increase",path:t.createPath(this.getParentCreatedAt()),value:s.getValue()}],reverseOp:this.toReverseOperation()}}toReverseOperation(){const t=this.value.deepcopy(),i=t.getType()===ve.Long?t.getValue().multiply(-1):t.getValue()*-1;return Ss.create(this.getParentCreatedAt(),ce.of(i,t.getCreatedAt()))}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.INCREASE.${this.value.toJSON()}`}getValue(){return this.value}}class wr extends $t{constructor(t,r,i,s,o,a,l){super(t,l);u(this,"fromPos");u(this,"toPos");u(this,"maxCreatedAtMapByActor");u(this,"attributes");u(this,"attributesToRemove");this.fromPos=r,this.toPos=i,this.maxCreatedAtMapByActor=s,this.attributes=o,this.attributesToRemove=a}static create(t,r,i,s,o,a){return new wr(t,r,i,s,o,[],a)}static createTreeRemoveStyleOperation(t,r,i,s,o,a){return new wr(t,r,i,s,new Map,o,a)}execute(t,r,i){const s=t.findByCreatedAt(this.getParentCreatedAt());if(!s)throw new k(S.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(s instanceof xt))throw new k(S.ErrInvalidArgument,"fail to execute, only Tree can execute edit");const o=s;let a,l;if(this.attributes.size){const c={};[...this.attributes].forEach(([d,h])=>c[d]=h),[,l,a]=o.style([this.fromPos,this.toPos],c,this.getExecutedAt(),this.maxCreatedAtMapByActor,i)}else{const c=this.attributesToRemove;[,l,a]=o.removeStyle([this.fromPos,this.toPos],c,this.getExecutedAt(),this.maxCreatedAtMapByActor,i)}for(const c of l)t.registerGCPair(c);return{opInfos:a.map(({from:c,to:d,value:h,fromPath:m,toPath:y})=>({type:"tree-style",from:c,to:d,value:this.attributes.size?{attributes:h}:{attributesToRemove:h},fromPath:m,toPath:y,path:t.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const t=this.getParentCreatedAt().toTestString(),r=`${this.fromPos.getLeftSiblingID().getCreatedAt().toTestString()}:${this.fromPos.getLeftSiblingID().getOffset()}`,i=`${this.toPos.getLeftSiblingID().getCreatedAt().toTestString()}:${this.toPos.getLeftSiblingID().getOffset()}`;return`${t}.STYLE(${r},${i},${Object.entries(this.attributes||{}).map(([s,o])=>`${s}:"${o}"`).join(" ")})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getAttributes(){return this.attributes}getAttributesToRemove(){return this.attributesToRemove}getMaxCreatedAtMapByActor(){return this.maxCreatedAtMapByActor}}function e1(n){const e=new Gf,t=e.data;for(const[r,i]of Object.entries(n))t[r]=JSON.stringify(i);return e}function t1(n){if(n.type===ti.Put)return new To({type:Ni.PUT,presence:e1(n.presence)});if(n.type===ti.Clear)return new To({type:Ni.CLEAR});throw new k(S.ErrUnimplemented,"unimplemented type")}function n1(n){return new ny({serverSeq:n.getServerSeq(),clientSeq:n.getClientSeq()})}function my(n){return new Jl({clientSeq:n.getClientSeq(),lamport:n.getLamport(),actorId:ud(n.getActorID()),versionVector:Zf(n.getVersionVector())})}function M(n){if(n)return new b({lamport:n.getLamport(),delimiter:n.getDelimiter(),actorId:ud(n.getActorID())})}function Zf(n){if(!n)return;const e=new $l;for(const[t,r]of n)e.vector[t]=BigInt(r.toString());return e}function py(n){switch(n){case ve.Null:return $.NULL;case ve.Boolean:return $.BOOLEAN;case ve.Integer:return $.INTEGER;case ve.Long:return $.LONG;case ve.Double:return $.DOUBLE;case ve.String:return $.STRING;case ve.Bytes:return $.BYTES;case ve.Date:return $.DATE;default:throw new k(S.ErrInvalidType,`unsupported type: ${n}`)}}function yy(n){switch(n){case ln.Int:return $.INTEGER_CNT;case ln.Long:return $.LONG_CNT;default:throw new k(S.ErrInvalidType,`unsupported type: ${n}`)}}function Iu(n){if(n instanceof He)return new lt({type:$.JSON_OBJECT,createdAt:M(n.getCreatedAt()),value:Dy(n)});if(n instanceof tt)return new lt({type:$.JSON_ARRAY,createdAt:M(n.getCreatedAt()),value:L1(n)});if(n instanceof Et)return new lt({type:$.TEXT,createdAt:M(n.getCreatedAt())});if(n instanceof ce)return new lt({type:py(n.getType()),createdAt:M(n.getCreatedAt()),value:n.toBytes()});if(n instanceof nt)return new lt({type:yy(n.getType()),createdAt:M(n.getCreatedAt()),value:n.toBytes()});if(n instanceof xt)return new lt({type:$.TREE,createdAt:M(n.getCreatedAt()),value:b1(n)});throw new k(S.ErrUnimplemented,"unimplemented element")}function r1(n){return new So({createdAt:M(n.getCreatedAt()),offset:n.getOffset()})}function sa(n){return new Ir({createdAt:M(n.getID().getCreatedAt()),offset:n.getID().getOffset(),relativeOffset:n.getRelativeOffset()})}function oa(n){return new Ci({parentId:Zs(n.getParentID()),leftSiblingId:Zs(n.getLeftSiblingID())})}function Zs(n){return new Hr({createdAt:M(n.getCreatedAt()),offset:n.getOffset()})}function vy(n){const e=new Hf;if(n instanceof Pi){const t=n,r=new el;r.parentCreatedAt=M(t.getParentCreatedAt()),r.key=t.getKey(),r.value=Iu(t.getValue()),r.executedAt=M(t.getExecutedAt()),e.body.case="set",e.body.value=r}else if(n instanceof bo){const t=n,r=new tl;r.parentCreatedAt=M(t.getParentCreatedAt()),r.prevCreatedAt=M(t.getPrevCreatedAt()),r.value=Iu(t.getValue()),r.executedAt=M(t.getExecutedAt()),e.body.case="add",e.body.value=r}else if(n instanceof Jr){const t=n,r=new nl;r.parentCreatedAt=M(t.getParentCreatedAt()),r.prevCreatedAt=M(t.getPrevCreatedAt()),r.createdAt=M(t.getCreatedAt()),r.executedAt=M(t.getExecutedAt()),e.body.case="move",e.body.value=r}else if(n instanceof ni){const t=n,r=new rl;r.parentCreatedAt=M(t.getParentCreatedAt()),r.createdAt=M(t.getCreatedAt()),r.executedAt=M(t.getExecutedAt()),e.body.case="remove",e.body.value=r}else if(n instanceof Mo){const t=n,r=new il;r.parentCreatedAt=M(t.getParentCreatedAt()),r.from=sa(t.getFromPos()),r.to=sa(t.getToPos());const i=r.createdAtMapByActor;for(const[o,a]of t.getMaxCreatedAtMapByActor())i[o]=M(a);r.content=t.getContent();const s=r.attributes;for(const[o,a]of t.getAttributes())s[o]=a;r.executedAt=M(t.getExecutedAt()),e.body.case="edit",e.body.value=r}else if(n instanceof zo){const t=n,r=new sl;r.parentCreatedAt=M(t.getParentCreatedAt()),r.from=sa(t.getFromPos()),r.to=sa(t.getToPos());const i=r.createdAtMapByActor;for(const[o,a]of t.getMaxCreatedAtMapByActor())i[o]=M(a);const s=r.attributes;for(const[o,a]of t.getAttributes())s[o]=a;r.executedAt=M(t.getExecutedAt()),e.body.case="style",e.body.value=r}else if(n instanceof Ss){const t=n,r=new ol;r.parentCreatedAt=M(t.getParentCreatedAt()),r.value=Iu(t.getValue()),r.executedAt=M(t.getExecutedAt()),e.body.case="increase",e.body.value=r}else if(n instanceof Fo){const t=n,r=new al,i=r.createdAtMapByActor;for(const[s,o]of t.getMaxCreatedAtMapByActor())i[s]=M(o);r.parentCreatedAt=M(t.getParentCreatedAt()),r.from=oa(t.getFromPos()),r.to=oa(t.getToPos()),r.contents=c1(t.getContents()),r.splitLevel=t.getSplitLevel(),r.executedAt=M(t.getExecutedAt()),e.body.case="treeEdit",e.body.value=r}else if(n instanceof wr){const t=n,r=new ll;r.parentCreatedAt=M(t.getParentCreatedAt()),r.from=oa(t.getFromPos()),r.to=oa(t.getToPos());const i=r.createdAtMapByActor;for(const[o,a]of t.getMaxCreatedAtMapByActor())i[o]=M(a);const s=t.getAttributesToRemove();if(s.length>0)r.attributesToRemove=s;else{const o=r.attributes;for(const[a,l]of t.getAttributes())o[a]=l}r.executedAt=M(t.getExecutedAt()),e.body.case="treeStyle",e.body.value=r}else throw new k(S.ErrUnimplemented,"unimplemented operation");return e}function i1(n){const e=[];for(const t of n)e.push(vy(t));return e}function s1(n){const e=new ey({id:my(n.getID()),message:n.getMessage()});return n.hasOperations()&&(e.operations=i1(n.getOperations())),n.hasPresenceChange()&&(e.presenceChange=t1(n.getPresenceChange())),e}function o1(n){const e=[];for(const t of n)e.push(s1(t));return e}function a1(n){const e=[];for(const t of n)e.push(new ty({key:t.getStrKey(),element:td(t.getValue())}));return e}function l1(n){const e=[];for(const t of n)e.push(new ml({element:td(t.getValue())}));return e}function u1(n){const e=[];for(const t of n){const r=new pl;r.id=r1(t.getID()),r.value=t.getValue().getContent(),r.removedAt=M(t.getRemovedAt());const i=r.attributes,s=t.getValue().getAttrs();for(const o of s){const a=new ms;a.value=o.getValue(),a.updatedAt=M(o.getUpdatedAt()),i[o.getKey()]=a}e.push(r)}return e}function c1(n){const e=[];if(!n||!n.length)return e;for(const t of n)e.push(new yl({content:ed(t)}));return e}function f1(n){const e={};for(const t of n)e[t.getKey()]=new ms({value:t.getValue(),updatedAt:M(t.getUpdatedAt()),isRemoved:t.isRemoved()});return e}function ed(n){if(!n)return[];const e=[];return jl(n,(t,r)=>{const i=new ko({id:Zs(t.id),type:t.type,removedAt:M(t.removedAt),depth:r});t.isText&&(i.value=t.value),t.insPrevID&&(i.insPrevId=Zs(t.insPrevID)),t.insNextID&&(i.insNextId=Zs(t.insNextID)),t.attrs&&(i.attributes=f1(t.attrs)),e.push(i)}),e}function d1(n){const e=new Ge;return e.body.case="jsonObject",e.body.value=new ul({nodes:a1(n.getRHT()),createdAt:M(n.getCreatedAt()),movedAt:M(n.getMovedAt()),removedAt:M(n.getRemovedAt())}),e}function wy(n){const e=new Ge;return e.body.case="jsonArray",e.body.value=new cl({nodes:l1(n.getElements()),createdAt:M(n.getCreatedAt()),movedAt:M(n.getMovedAt()),removedAt:M(n.getRemovedAt())}),e}function h1(n){const e=new Ge;return e.body.case="primitive",e.body.value=new fl({type:py(n.getType()),value:n.toBytes(),createdAt:M(n.getCreatedAt()),movedAt:M(n.getMovedAt()),removedAt:M(n.getRemovedAt())}),e}function g1(n){const e=new Ge;return e.body.case="text",e.body.value=new dl({nodes:u1(n.getRGATreeSplit()),createdAt:M(n.getCreatedAt()),movedAt:M(n.getMovedAt()),removedAt:M(n.getRemovedAt())}),e}function m1(n){const e=new Ge;return e.body.case="counter",e.body.value=new hl({type:yy(n.getType()),value:n.toBytes(),createdAt:M(n.getCreatedAt()),movedAt:M(n.getMovedAt()),removedAt:M(n.getRemovedAt())}),e}function Sy(n){const e=new Ge;return e.body.case="tree",e.body.value=new gl({nodes:ed(n.getRoot()),createdAt:M(n.getCreatedAt()),movedAt:M(n.getMovedAt()),removedAt:M(n.getRemovedAt())}),e}function td(n){if(n instanceof He)return d1(n);if(n instanceof tt)return wy(n);if(n instanceof ce)return h1(n);if(n instanceof Et)return g1(n);if(n instanceof nt)return m1(n);if(n instanceof xt)return Sy(n);throw new k(S.ErrUnimplemented,"unimplemented element")}function p1(n){return new Cr({documentKey:n.getDocumentKey(),checkpoint:n1(n.getCheckpoint()),isRemoved:n.getIsRemoved(),changes:o1(n.getChanges()),snapshot:n.getSnapshot(),versionVector:Zf(n.getVersionVector()),minSyncedTicket:M(n.getMinSyncedTicket())})}function $s(n){if(!(n instanceof G))return{};const e=n.findDetails(LS);for(const t of e)return t.metadata;return{}}function Dr(n){return $s(n).code??""}function ky(n){return cr.of(n.clientSeq,BigInt(n.lamport),ad(n.actorId),nd(n.versionVector),BigInt(n.serverSeq))}function nd(n){if(!n)return;const e=new rs;return Object.entries(n.vector).forEach(([t,r])=>{e.set(t,BigInt(r.toString()))}),e}function z(n){if(n)return Tt.of(BigInt(n.lamport),n.delimiter,ad(n.actorId))}function rd(n){const e={};return Object.entries(n.data).forEach(([t,r])=>{e[t]=JSON.parse(r)}),e}function y1(n){const e=n.type;if(e===Ni.PUT){const t=rd(n.presence);return{type:ti.Put,presence:t}}if(e===Ni.CLEAR)return{type:ti.Clear};throw new k(S.ErrInvalidType,`unsupported type: ${e}`)}function v1(n){const e=new Map;return Object.entries(n).forEach(([t,r])=>{e.set(t,rd(r))}),e}function Ty(n){switch(n){case $.NULL:return ve.Null;case $.BOOLEAN:return ve.Boolean;case $.INTEGER:return ve.Integer;case $.LONG:return ve.Long;case $.DOUBLE:return ve.Double;case $.STRING:return ve.String;case $.BYTES:return ve.Bytes;case $.DATE:return ve.Date}throw new k(S.ErrUnimplemented,`unimplemented value type: ${n}`)}function Sl(n){switch(n){case $.INTEGER_CNT:return ln.Int;case $.LONG_CNT:return ln.Long}throw new k(S.ErrUnimplemented,`unimplemented value type: ${n}`)}function Eu(n){switch(n.type){case $.JSON_OBJECT:return n.value?Py(n.value):He.create(z(n.createdAt));case $.JSON_ARRAY:return n.value?R1(n.value):tt.create(z(n.createdAt));case $.TEXT:return Et.create(ws.create(),z(n.createdAt));case $.TREE:return B1(n.value);case $.NULL:case $.BOOLEAN:case $.INTEGER:case $.LONG:case $.DOUBLE:case $.STRING:case $.BYTES:case $.DATE:return ce.of(ce.valueFromBytes(Ty(n.type),n.value),z(n.createdAt));case $.INTEGER_CNT:case $.LONG_CNT:return nt.create(Sl(n.type),nt.valueFromBytes(Sl(n.type),n.value),z(n.createdAt))}}function aa(n){return Ft.of(an.of(z(n.createdAt),n.offset),n.relativeOffset)}function Ay(n){return an.of(z(n.createdAt),n.offset)}function w1(n){const e=xo.create(n.value);Object.entries(n.attributes).forEach(([r,i])=>{e.setAttr(r,i.value,z(i.updatedAt))});const t=Qr.create(Ay(n.id),e);return t.remove(z(n.removedAt)),t}function bi(n){return Bt.of(eo(n.parentId),eo(n.leftSiblingId))}function eo(n){return Ce.of(z(n.createdAt),n.offset)}function S1(n){if(!n.length)return;const e=[];return n.forEach(t=>{const r=id(t.content);e.push(r)}),e}function id(n){if(n.length===0)return;const e=[];for(const i of n)e.push(T1(i));const t=e[e.length-1],r=new Map;r.set(n[e.length-1].depth,e[e.length-1]);for(let i=e.length-2;i>=0;i--)r.get(n[i].depth-1).prepend(e[i]),r.set(n[i].depth,e[i]);return t.updateDescendantsSize(),xt.create(t,zt).getRoot()}function k1(n){const e=Er.create();for(const[t,r]of Object.entries(n))e.setInternal(t,r.value,z(r.updatedAt),r.isRemoved);return e}function T1(n){const e=eo(n.id),t=Ze.create(e,n.type),r=Object.entries(n.attributes);return t.isText?t.value=n.value:r.length&&(t.attrs=k1(n.attributes)),n.insPrevId&&(t.insPrevID=eo(n.insPrevId)),n.insNextId&&(t.insNextID=eo(n.insNextId)),t.removedAt=z(n.removedAt),t}function Iy(n){if(n.body.case==="set"){const e=n.body.value;return Pi.create(e.key,Eu(e.value),z(e.parentCreatedAt),z(e.executedAt))}else if(n.body.case==="add"){const e=n.body.value;return bo.create(z(e.parentCreatedAt),z(e.prevCreatedAt),Eu(e.value),z(e.executedAt))}else if(n.body.case==="move"){const e=n.body.value;return Jr.create(z(e.parentCreatedAt),z(e.prevCreatedAt),z(e.createdAt),z(e.executedAt))}else if(n.body.case==="remove"){const e=n.body.value;return ni.create(z(e.parentCreatedAt),z(e.createdAt),z(e.executedAt))}else if(n.body.case==="edit"){const e=n.body.value,t=new Map;Object.entries(e.createdAtMapByActor).forEach(([i,s])=>{t.set(i,z(s))});const r=new Map;return Object.entries(e.attributes).forEach(([i,s])=>{r.set(i,s)}),Mo.create(z(e.parentCreatedAt),aa(e.from),aa(e.to),t,e.content,r,z(e.executedAt))}else if(n.body.case==="style"){const e=n.body.value,t=new Map;Object.entries(e.createdAtMapByActor).forEach(([i,s])=>{t.set(i,z(s))});const r=new Map;return Object.entries(e.attributes).forEach(([i,s])=>{r.set(i,s)}),zo.create(z(e.parentCreatedAt),aa(e.from),aa(e.to),t,r,z(e.executedAt))}else{if(n.body.case==="select")return;if(n.body.case==="increase"){const e=n.body.value;return Ss.create(z(e.parentCreatedAt),Eu(e.value),z(e.executedAt))}else if(n.body.case==="treeEdit"){const e=n.body.value,t=new Map;return Object.entries(e.createdAtMapByActor).forEach(([r,i])=>{t.set(r,z(i))}),Fo.create(z(e.parentCreatedAt),bi(e.from),bi(e.to),S1(e.contents),e.splitLevel,t,z(e.executedAt))}else if(n.body.case==="treeStyle"){const e=n.body.value,t=new Map,r=e.attributesToRemove,i=new Map;return e!=null&&e.createdAtMapByActor&&Object.entries(e.createdAtMapByActor).forEach(([s,o])=>{i.set(s,z(o))}),(r==null?void 0:r.length)>0?wr.createTreeRemoveStyleOperation(z(e.parentCreatedAt),bi(e.from),bi(e.to),i,r,z(e.executedAt)):(Object.entries(e.attributes).forEach(([s,o])=>{t.set(s,o)}),wr.create(z(e.parentCreatedAt),bi(e.from),bi(e.to),i,t,z(e.executedAt)))}else throw new k(S.ErrUnimplemented,"unimplemented operation")}}function A1(n){const e=[];for(const t of n){const r=Iy(t);r&&e.push(r)}return e}function Ey(n){const e=[];for(const t of n)e.push(vs.create({id:ky(t.id),operations:A1(t.operations),presenceChange:t.presenceChange?y1(t.presenceChange):void 0,message:t.message}));return e}function I1(n){return is.of(BigInt(n.serverSeq),n.clientSeq)}function E1(n){return Vl.create(n.documentKey,I1(n.checkpoint),n.isRemoved,Ey(n.changes),nd(n.versionVector),n.snapshot,z(n.minSyncedTicket))}function xy(n){const e=new Ao;for(const r of n.nodes){const i=sd(r.element);e.set(r.key,i,i.getPositionedAt())}const t=new He(z(n.createdAt),e);return t.setMovedAt(z(n.movedAt)),t.setRemovedAt(z(n.removedAt)),t}function Cy(n){const e=new Eo;for(const r of n.nodes)e.insert(sd(r.element));const t=new tt(z(n.createdAt),e);return t.setMovedAt(z(n.movedAt)),t.setRemovedAt(z(n.removedAt)),t}function x1(n){const e=ce.of(ce.valueFromBytes(Ty(n.type),n.value),z(n.createdAt));return e.setMovedAt(z(n.movedAt)),e.setRemovedAt(z(n.removedAt)),e}function C1(n){const e=new ws;let t=e.getHead();for(const i of n.nodes){const s=e.insertAfter(t,w1(i));i.insPrevId&&s.setInsPrev(e.findNode(Ay(i.insPrevId))),t=s}const r=new Et(e,z(n.createdAt));return r.setMovedAt(z(n.movedAt)),r.setRemovedAt(z(n.removedAt)),r}function N1(n){const e=nt.create(Sl(n.type),nt.valueFromBytes(Sl(n.type),n.value),z(n.createdAt));return e.setMovedAt(z(n.movedAt)),e.setRemovedAt(z(n.removedAt)),e}function Ny(n){const e=id(n.nodes);return xt.create(e,z(n.createdAt))}function sd(n){if(n.body.case==="jsonObject")return xy(n.body.value);if(n.body.case==="jsonArray")return Cy(n.body.value);if(n.body.case==="primitive")return x1(n.body.value);if(n.body.case==="text")return C1(n.body.value);if(n.body.case==="counter")return N1(n.body.value);if(n.body.case==="tree")return Ny(n.body.value);throw new k(S.ErrUnimplemented,"unimplemented element")}function P1(n){if(!n)return{root:He.create(zt),presences:new Map};const e=Ac.fromBinary(n);return{root:sd(e.root),presences:v1(e.presences)}}function D1(n){const e=Zf(n);return od(e.toBinary())}function O1(n){const e=ld(n),t=$l.fromBinary(e);return nd(t)}function Py(n){if(!n)throw new k(S.ErrInvalidArgument,"bytes is empty");const e=Ge.fromBinary(n);return xy(e.body.value)}function Dy(n){return td(n).toBinary()}function R1(n){if(!n)throw new k(S.ErrInvalidArgument,"bytes is empty");const e=Ge.fromBinary(n);return Cy(e.body.value)}function L1(n){return wy(n).toBinary()}function B1(n){if(!n)throw new k(S.ErrInvalidArgument,"bytes is empty");const e=Ge.fromBinary(n);return Ny(e.body.value)}function b1(n){return Sy(n).toBinary()}function od(n){return n?Array.from(n).map(e=>e.toString(16).padStart(2,"0")).join(""):""}function ad(n){return od(n)}function ld(n){return new Uint8Array(n.match(/.{1,2}/g).map(e=>parseInt(e,16)))}function ud(n){return ld(n)}function M1(n){const e=Jl.fromBinary(n);return ky(e)}function z1(n){const e=Hf.fromBinary(n);return Iy(e)}const de={fromPresence:rd,toChangePack:p1,fromChangePack:E1,fromChanges:Ey,toTreeNodes:ed,fromTreeNodes:id,objectToBytes:Dy,bytesToObject:Py,bytesToSnapshot:P1,bytesToHex:od,hexToBytes:ld,toHexString:ad,toUint8Array:ud,toOperation:vy,toChangeID:my,PbChangeID:Jl,bytesToChangeID:M1,bytesToOperation:z1,versionVectorToHex:D1,hexToVersionVector:O1};var Ue=(n=>(n[n.Trivial=0]="Trivial",n[n.Debug=1]="Debug",n[n.Info=2]="Info",n[n.Warn=3]="Warn",n[n.Error=4]="Error",n[n.Fatal=5]="Fatal",n))(Ue||{});let fi=3;function F1(n){fi=n}const F={trivial:(...n)=>{fi>0||typeof console<"u"&&console.log("YORKIE T:",...n)},debug:(...n)=>{fi>1||typeof console<"u"&&console.log("YORKIE D:",...n)},info:(...n)=>{fi>2||typeof console<"u"&&console.log("YORKIE I:",...n)},warn:(...n)=>{fi>3||typeof console<"u"&&(typeof console.warn<"u"?console.warn("YORKIE W:",...n):console.log("YORKIE W:",...n))},error:(...n)=>{fi>4||typeof console<"u"&&(typeof console.error<"u"?console.error("YORKIE E:",...n):console.log("YORKIE E:",...n))},fatal:(...n)=>{typeof console<"u"&&(typeof console.error<"u"?console.error("YORKIE F:",...n):console.log("YORKIE F:",...n))},isEnabled:n=>fi<=n};function Oy(){return"xxxxxxxx-xxxx-4xxxy-xxxx-xxxxxxxxxxx".replace(/[xy]/g,n=>{const e=Math.random()*16|0;return(n==="x"?e:e&3|8).toString(16)})}class J1{constructor(e,t,r,i,s){u(this,"reconnectStreamDelay");u(this,"doc");u(this,"docID");u(this,"syncMode");u(this,"remoteChangeEventReceived");u(this,"watchStream");u(this,"watchLoopTimerID");u(this,"watchAbortController");u(this,"unsubscribeBroadcastEvent");this.reconnectStreamDelay=e,this.doc=t,this.docID=r,this.syncMode=i,this.remoteChangeEventReceived=!1,this.unsubscribeBroadcastEvent=s}changeSyncMode(e){this.syncMode=e}needRealtimeSync(){return this.syncMode===Ca.RealtimeSyncOff?!1:this.syncMode===Ca.RealtimePushOnly?this.doc.hasLocalChanges():this.syncMode!==Ca.Manual&&(this.doc.hasLocalChanges()||this.remoteChangeEventReceived)}async runWatchLoop(e){const t=async()=>{if(this.watchStream)return Promise.resolve();this.watchLoopTimerID&&(clearTimeout(this.watchLoopTimerID),this.watchLoopTimerID=void 0);try{[this.watchStream,this.watchAbortController]=await e(()=>{this.watchStream=void 0,this.watchAbortController=void 0,this.watchLoopTimerID=setTimeout(t,this.reconnectStreamDelay)})}catch{}};await t()}cancelWatchStream(){this.watchStream&&this.watchAbortController&&(this.watchAbortController.abort(),this.watchStream=void 0,this.watchAbortController=void 0),clearTimeout(this.watchLoopTimerID),this.watchLoopTimerID=void 0}}const xu=()=>{};class $1{constructor(e){u(this,"finalized",!1);u(this,"observers",[]);u(this,"finalError");try{e(this)}catch(t){this.error(t)}}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(!e)throw new k(S.ErrInvalidArgument,"missing observer");if(this.finalized)throw new k(S.ErrRefused,"observable is finalized due to previous error");typeof e=="object"?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=xu),i.error===void 0&&(i.error=xu),i.complete===void 0&&(i.complete=xu);const s=Oy(),o=this.unsubscribeOne.bind(this,s);if(this.observers.push({subscriptionID:s,observer:i}),this.finalized)try{this.finalError?i.error(this.finalError):i.complete()}catch(a){F.warn(a)}return o}unsubscribeOne(e){var t;this.observers=(t=this.observers)==null?void 0:t.filter(r=>r.subscriptionID!==e)}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e].observer)}catch(r){F.error(r)}}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.observers=void 0)}}function U1(n){const e=new $1(n);return{subscribe:e.subscribe.bind(e),getProxy:()=>e}}class Yi{constructor(e,t,r,i){u(this,"id");u(this,"delimiter");u(this,"message");u(this,"root");u(this,"operations");u(this,"presenceChange");u(this,"previousPresence");u(this,"reversePresenceKeys");this.id=e,this.delimiter=iy,this.root=t,this.operations=[],this.previousPresence=Dt(r),this.presenceChange=void 0,this.reversePresenceKeys=new Set,this.message=i}static create(e,t,r,i){return new Yi(e,t,r,i)}push(e){this.operations.push(e)}registerElement(e,t){this.root.registerElement(e,t)}registerRemovedElement(e){this.root.registerRemovedElement(e)}registerGCPair(e){this.root.registerGCPair(e)}getChange(){return vs.create({id:this.id,operations:this.operations,presenceChange:this.presenceChange,message:this.message})}hasChange(){return this.operations.length>0||this.presenceChange!==void 0}setPresenceChange(e){this.presenceChange=e}setReversePresence(e,t){for(const r of Object.keys(e))t!=null&&t.addToHistory?this.reversePresenceKeys.add(r):this.reversePresenceKeys.delete(r)}getReversePresence(){if(this.reversePresenceKeys.size===0)return;const e={};for(const t of this.reversePresenceKeys)e[t]=this.previousPresence[t];return e}issueTimeTicket(){return this.delimiter+=1,this.id.createTimeTicket(this.delimiter)}getLastTimeTicket(){return this.id.createTimeTicket(this.delimiter)}}class Co{constructor(e){u(this,"rootObject");u(this,"elementPairMapByCreatedAt");u(this,"gcElementSetByCreatedAt");u(this,"gcPairMap");this.rootObject=e,this.elementPairMapByCreatedAt=new Map,this.gcElementSetByCreatedAt=new Set,this.gcPairMap=new Map,this.registerElement(e,void 0),e.getDescendants(t=>{if(t.getRemovedAt()&&this.registerRemovedElement(t),t instanceof Et||t instanceof xt)for(const r of t.getGCPairs())this.registerGCPair(r);return!1})}static create(){return new Co(He.create(zt))}findByCreatedAt(e){const t=this.elementPairMapByCreatedAt.get(e.toIDString());if(t)return t.element}findElementPairByCreatedAt(e){return this.elementPairMapByCreatedAt.get(e.toIDString())}createSubPaths(e){let t=this.elementPairMapByCreatedAt.get(e.toIDString());if(!t)return[];const r=[];for(;t.parent;){const i=t.element.getCreatedAt(),s=t.parent.subPathOf(i);if(s===void 0)throw new k(S.ErrInvalidArgument,`cant find the given element: ${i.toIDString()}`);r.unshift(s),t=this.elementPairMapByCreatedAt.get(t.parent.getCreatedAt().toIDString())}return r.unshift("$"),r}createPath(e){return this.createSubPaths(e).join(".")}registerElement(e,t){this.elementPairMapByCreatedAt.set(e.getCreatedAt().toIDString(),{parent:t,element:e}),e instanceof Yr&&e.getDescendants((r,i)=>(this.registerElement(r,i),!1))}deregisterElement(e){let t=0;const r=i=>{const s=i.getCreatedAt().toIDString();this.elementPairMapByCreatedAt.delete(s),this.gcElementSetByCreatedAt.delete(s),t++};return r(e),e instanceof Yr&&e.getDescendants(i=>(r(i),!1)),t}registerRemovedElement(e){this.gcElementSetByCreatedAt.add(e.getCreatedAt().toIDString())}registerGCPair(e){if(this.gcPairMap.get(e.child.toIDString())){this.gcPairMap.delete(e.child.toIDString());return}this.gcPairMap.set(e.child.toIDString(),e)}getElementMapSize(){return this.elementPairMapByCreatedAt.size}getGarbageElementSetSize(){const e=new Set;for(const t of this.gcElementSetByCreatedAt){e.add(t);const r=this.elementPairMapByCreatedAt.get(t);r.element instanceof Yr&&r.element.getDescendants(i=>(e.add(i.getCreatedAt().toIDString()),!1))}return e.size}getObject(){return this.rootObject}getGarbageLen(){return this.getGarbageElementSetSize()+this.gcPairMap.size}getDocSize(){const e={live:{data:0,meta:0},gc:{data:0,meta:0}};for(const[t,r]of this.elementPairMapByCreatedAt)this.gcElementSetByCreatedAt.has(t)?(e.gc.data+=r.element.getDataSize().data,e.gc.meta+=r.element.getDataSize().meta):(e.live.data+=r.element.getDataSize().data,e.live.meta+=r.element.getDataSize().meta);for(const t of this.gcPairMap.values()){const r=t.child.getDataSize();e.gc.data+=r.data,e.gc.meta+=r.meta}return e}deepcopy(){return new Co(this.rootObject.deepcopy())}garbageCollect(e){let t=0;for(const r of this.gcElementSetByCreatedAt){const i=this.elementPairMapByCreatedAt.get(r),s=i.element.getRemovedAt();s&&(e!=null&&e.afterOrEqual(s))&&(i.parent.purge(i.element),t+=this.deregisterElement(i.element))}for(const[,r]of this.gcPairMap){const i=r.child.getRemovedAt();i&&(e!=null&&e.afterOrEqual(i))&&(r.parent.purge(r.child),this.gcPairMap.delete(r.child.toIDString()),t+=1)}return t}toJSON(){return this.rootObject.toJSON()}toSortedJSON(){return this.rootObject.toSortedJSON()}getStats(){return{elements:this.getElementMapSize(),gcPairs:this.gcPairMap.size,gcElements:this.getGarbageElementSetSize()}}}function Ry(n,e){const t=new No(n);return new Proxy(e,t.getHandlers())}class No{constructor(e){u(this,"context");u(this,"handlers");this.context=e,this.handlers={set:(t,r,i)=>(F.isEnabled(Ue.Trivial)&&F.trivial(`obj[${r}]=${JSON.stringify(i)}`),No.setInternal(e,t,r,i),!0),get:(t,r)=>(F.isEnabled(Ue.Trivial)&&F.trivial(`obj[${r}]`),r==="getID"?()=>t.getCreatedAt():r==="toJSON"||r==="toString"?()=>t.toJSON():r==="toJS"?()=>t.toJS():r==="toJSForTest"?()=>t.toJSForTest():di(e,t.get(r))),ownKeys:t=>t.getKeys(),getOwnPropertyDescriptor:()=>({enumerable:!0,configurable:!0}),deleteProperty:(t,r)=>(F.isEnabled(Ue.Trivial)&&F.trivial(`obj[${r}]`),No.deleteInternal(e,t,r),!0)}}static setInternal(e,t,r,i){if(r.includes("."))throw new k(S.ErrInvalidObjectKey,"key must not contain the '.'.");const s=e.issueTimeTicket(),o=kl(e,i,s),a=t.set(r,o,s);e.registerElement(o,t),a&&e.registerRemovedElement(a),e.push(Pi.create(r,o.deepcopy(),t.getCreatedAt(),s))}static buildObjectMembers(e,t){const r={};for(const[i,s]of Object.entries(t)){if(i.includes("."))throw new k(S.ErrInvalidObjectKey,"key must not contain the '.'.");const o=e.issueTimeTicket(),a=kl(e,s,o);r[i]=a}return r}static deleteInternal(e,t,r){const i=e.issueTimeTicket(),s=t.deleteByKey(r,i);s&&(e.push(ni.create(t.getCreatedAt(),s.getCreatedAt(),i)),e.registerRemovedElement(s))}getHandlers(){return this.handlers}}function j1(n,e){const t=new oe(n,e);return new Proxy(e,t.getHandlers())}function V1(n){return typeof n=="string"||n instanceof String?!isNaN(n):!1}function q1(n){return["concat","entries","every","filter","find","findIndex","forEach","join","keys","map","reduce","reduceRight","slice","some","toLocaleString","toString","values"].includes(n)}class oe{constructor(e,t){u(this,"context");u(this,"handlers");u(this,"array");this.context=e,this.array=t,this.handlers={get:(r,i,s)=>i==="getID"?()=>r.getCreatedAt():i==="getElementByID"?o=>{const a=r.getByID(o);if(!(!a||a.isRemoved()))return Or(e,a)}:i==="getElementByIndex"?o=>{const a=r.get(o);return Or(e,a)}:i==="getLast"?()=>Or(e,r.getLast()):i==="deleteByID"?o=>{const a=oe.deleteInternalByID(e,r,o);return Or(e,a)}:i==="insertAfter"?(o,a)=>{const l=oe.insertAfterInternal(e,r,o,a);return Or(e,l)}:i==="insertBefore"?(o,a)=>{const l=oe.insertBeforeInternal(e,r,o,a);return Or(e,l)}:i==="moveBefore"?(o,a)=>{oe.moveBeforeInternal(e,r,o,a)}:i==="moveAfter"?(o,a)=>{oe.moveAfterInternal(e,r,o,a)}:i==="moveFront"?o=>{oe.moveFrontInternal(e,r,o)}:i==="moveLast"?o=>{oe.moveLastInternal(e,r,o)}:V1(i)?di(e,r.get(Number(i))):i==="push"?o=>oe.pushInternal(e,r,o):i==="splice"?(o,a,...l)=>oe.splice(e,r,o,a,...l):i==="length"?r.length:typeof i=="symbol"&&i===Symbol.iterator?oe.iteratorInternal.bind(this,e,r):i==="includes"?(o,a)=>oe.includes(e,r,o,a):i==="indexOf"?(o,a)=>oe.indexOf(e,r,o,a):i==="lastIndexOf"?(o,a)=>oe.lastIndexOf(e,r,o,a):i==="toJSForTest"?()=>r.toJSForTest():i==="toTestString"?()=>oe.toTestString(r):typeof i=="string"&&q1(i)?(...o)=>{const a=Array.from(r).map(l=>di(e,l));return Array.prototype[i].apply(a,o)}:Reflect.get(r,i,s),deleteProperty:(r,i)=>(F.isEnabled(Ue.Trivial)&&F.trivial(`array[${i}]`),oe.deleteInternalByIndex(e,r,Number.parseInt(i)),!0)}}static*iteratorInternal(e,t){for(const r of t)yield Or(e,r)}static buildArrayElements(e,t){const r=[];for(const i of t){const s=e.issueTimeTicket(),o=kl(e,i,s);r.push(o)}return r}static pushInternal(e,t,r){return oe.insertAfterInternal(e,t,t.getLastCreatedAt(),r),t.length}static moveBeforeInternal(e,t,r,i){const s=e.issueTimeTicket(),o=t.getPrevCreatedAt(r);t.moveAfter(o,i,s),e.push(Jr.create(t.getCreatedAt(),o,i,s))}static moveAfterInternal(e,t,r,i){const s=e.issueTimeTicket();t.moveAfter(r,i,s),e.push(Jr.create(t.getCreatedAt(),r,i,s))}static moveFrontInternal(e,t,r){const i=e.issueTimeTicket(),s=t.getHead();t.moveAfter(s.getCreatedAt(),r,i),e.push(Jr.create(t.getCreatedAt(),s.getCreatedAt(),r,i))}static moveLastInternal(e,t,r){const i=e.issueTimeTicket(),s=t.getLastCreatedAt();t.moveAfter(s,r,i),e.push(Jr.create(t.getCreatedAt(),s,r,i))}static insertAfterInternal(e,t,r,i){const s=e.issueTimeTicket(),o=kl(e,i,s);return t.insertAfter(r,o),e.registerElement(o,t),e.push(bo.create(t.getCreatedAt(),r,o.deepcopy(),s)),o}static insertBeforeInternal(e,t,r,i){return oe.insertAfterInternal(e,t,t.getPrevCreatedAt(r),i)}static deleteInternalByIndex(e,t,r){const i=e.issueTimeTicket(),s=t.deleteByIndex(r,i);if(s)return e.push(ni.create(t.getCreatedAt(),s.getCreatedAt(),i)),e.registerRemovedElement(s),s}static deleteInternalByID(e,t,r){const i=e.issueTimeTicket(),s=t.delete(r,i);return e.push(ni.create(t.getCreatedAt(),s.getCreatedAt(),i)),e.registerRemovedElement(s),s}static splice(e,t,r,i,...s){const o=t.length,a=r>=0?Math.min(r,o):Math.max(o+r,0),l=i===void 0?o:i<0?a:Math.min(a+i,o),c=[];for(let d=a;d<l;d++){const h=oe.deleteInternalByIndex(e,t,a);if(h){const m=h.deepcopy();m.setRemovedAt(),c.push(di(e,m))}}if(s){let d=a===0?t.getHead().getID():t.get(a-1).getID();for(const h of s)d=oe.insertAfterInternal(e,t,d,h).getID()}return c}static includes(e,t,r,i){var a;const s=t.length,o=i===void 0?0:i<0?Math.max(i+s,0):i;if(o>=s)return!1;if(ce.isSupport(r))return Array.from(t).map(c=>di(e,c)).includes(r,o);for(let l=o;l<s;l++)if(((a=t.get(l))==null?void 0:a.getID())===r.getID())return!0;return!1}static indexOf(e,t,r,i){var a;const s=t.length,o=i===void 0?0:i<0?Math.max(i+s,0):i;if(o>=s)return-1;if(ce.isSupport(r))return Array.from(t).map(c=>di(e,c)).indexOf(r,o);for(let l=o;l<s;l++)if(((a=t.get(l))==null?void 0:a.getID())===r.getID())return l;return-1}static lastIndexOf(e,t,r,i){var a;const s=t.length,o=i===void 0||i>=s?s-1:i<0?i+s:i;if(o<0)return-1;if(ce.isSupport(r))return Array.from(t).map(c=>di(e,c)).lastIndexOf(r,o);for(let l=o;l>0;l--)if(((a=t.get(l))==null?void 0:a.getID())===r.getID())return l;return-1}static toTestString(e){return e.toTestString()}getHandlers(){return this.handlers}}class cd{constructor(e,t){u(this,"context");u(this,"text");this.context=e,this.text=t}initialize(e,t){this.context=e,this.text=t}getID(){return this.text.getID()}edit(e,t,r,i){if(!this.context||!this.text)throw new k(S.ErrNotInitialized,"Text is not initialized yet");if(e>t)throw new k(S.ErrInvalidArgument,"from should be less than or equal to to");const s=this.text.indexRangeToPosRange(e,t);F.isEnabled(Ue.Debug)&&F.debug(`EDIT: f:${e}->${s[0].toTestString()}, t:${t}->${s[1].toTestString()} c:${r}`);const o=i?ps(i):void 0,a=this.context.issueTimeTicket(),[l,,c,d]=this.text.edit(s,r,a,o);for(const h of c)this.context.registerGCPair(h);return this.context.push(new Mo(this.text.getCreatedAt(),s[0],s[1],l,r,o?new Map(Object.entries(o)):new Map,a)),this.text.findIndexesFromRange(d)}delete(e,t){return this.edit(e,t,"")}empty(){return this.edit(0,this.length,"")}setStyle(e,t,r){if(!this.context||!this.text)throw new k(S.ErrNotInitialized,"Text is not initialized yet");if(e>t)throw new k(S.ErrInvalidArgument,"from should be less than or equal to to");const i=this.text.indexRangeToPosRange(e,t);F.isEnabled(Ue.Debug)&&F.debug(`STYL: f:${e}->${i[0].toTestString()}, t:${t}->${i[1].toTestString()} a:${JSON.stringify(r)}`);const s=ps(r),o=this.context.issueTimeTicket(),[a,l]=this.text.setStyle(i,s,o);for(const c of l)this.context.registerGCPair(c);return this.context.push(new zo(this.text.getCreatedAt(),i[0],i[1],a,new Map(Object.entries(s)),o)),!0}indexRangeToPosRange(e){if(!this.context||!this.text)throw new k(S.ErrNotInitialized,"Text is not initialized yet");const t=this.text.indexRangeToPosRange(e[0],e[1]);return[t[0].toStruct(),t[1].toStruct()]}posRangeToIndexRange(e){if(!this.context||!this.text)throw new k(S.ErrNotInitialized,"Text is not initialized yet");const t=this.text.findIndexesFromRange([Ft.fromStruct(e[0]),Ft.fromStruct(e[1])]);return[t[0],t[1]]}toTestString(){if(!this.context||!this.text)throw new k(S.ErrNotInitialized,"Text is not initialized yet");return this.text.toTestString()}values(){if(!this.context||!this.text)throw new k(S.ErrNotInitialized,"Text is not initialized yet");return this.text.values()}get length(){return this.text.length}getTreeByIndex(){return this.text.getTreeByIndex()}getTreeByID(){return this.text.getTreeByID()}toString(){if(!this.context||!this.text)throw new k(S.ErrNotInitialized,"Text is not initialized yet");return this.text.toString()}toJSON(){if(!this.context||!this.text)throw new k(S.ErrNotInitialized,"Text is not initialized yet");return this.text.toJSON()}toJSForTest(){if(!this.context||!this.text)throw new k(S.ErrNotInitialized,"Text is not initialized yet");return this.text.toJSForTest()}createRangeForTest(e,t){if(!this.context||!this.text)throw new k(S.ErrNotInitialized,"Text is not initialized yet");return this.text.indexRangeToPosRange(e,t)}}class fd{constructor(e,t){u(this,"valueType");u(this,"value");u(this,"context");u(this,"counter");this.valueType=e,this.value=t}initialize(e,t){this.valueType=t.getValueType(),this.context=e,this.counter=t,this.value=t.getValue()}getID(){return this.counter.getID()}getValue(){return this.value}getValueType(){return this.valueType}increase(e){if(!this.context||!this.counter)throw new k(S.ErrNotInitialized,"Counter is not initialized yet");const t=this.context.issueTimeTicket(),r=ce.of(e,t);if(!r.isNumericType())throw new TypeError(`Unsupported type of value: ${typeof r.getValue()}`);return this.counter.increase(r),this.context.push(Ss.create(this.counter.getCreatedAt(),r,t)),this}toJSForTest(){if(!this.context||!this.counter)throw new k(S.ErrNotInitialized,"Counter is not initialized yet");return this.counter.toJSForTest()}}function dd(n){if(n.isText)return{type:n.type,value:n.value};const e={type:n.type,children:n.children.map(t=>dd(t))};return n.attrs&&(e.attributes=vr(n.attrs.toObject())),e}function K1(n,e){const t={type:n.isText?n.parent.type:n.type,children:n.isText?n.parent.getChildrenText().length===e?[]:[{type:on,value:n.parent.getChildrenText().slice(e)}]:n.children.slice(e).map(r=>dd(r))};return n.attrs?t.attributes=vr(n.attrs.toObject()):n.isText&&n.parent.attrs&&(t.attributes=vr(n.parent.attrs.toObject())),t}function W1(n,e){const{node:t}=n,r=[...e].slice(0,-1),i=t.isText?t.parent.getChildrenText().length:t.children.length,s=[...r,i],o=[...r],a=[];o[o.length-1]+=1,e.every((c,d)=>c===s[d])||a.push({fromPath:[...e],toPath:s});const l=K1(t,e[e.length-1]);return l&&a.push({fromPath:o,toPath:o,content:l}),a}function _1(n,e){const{node:t,offset:r}=n,i=t.children[r],s=t.children[r-1],{children:o}=i,a=[...e].slice(0,-1),l=[{fromPath:[...e],toPath:[...a,r+1]}];if(!i.children.length)return l;const c=[...a,r-1,s.hasTextChild()?s.getChildrenText().length:s.children.length],d=o.map(h=>dd(h));return l.push({fromPath:c,toPath:c,content:d}),l}function hd(n,e,t){const{type:r}=n,i=t.issueTimeTicket();if(r===on){Ly(n);const{value:s}=n,o=Ze.create(Ce.of(i,0),r,s);e.append(o)}else{const{children:s=[]}=n,{attributes:o}=n;let a;if(typeof o=="object"&&!ry(o)){const c=ps(o);a=new Er;for(const[d,h]of Object.entries(c))a.set(d,h,i)}const l=Ze.create(Ce.of(i,0),r,void 0,a);e.append(l);for(const c of s)hd(c,l,t)}}function H1(n,e){const{type:t}=e,r=n.issueTimeTicket();let i;if(e.type===on){const{value:s}=e;i=Ze.create(Ce.of(r,0),t,s)}else if(e){const{children:s=[]}=e,{attributes:o}=e;let a;if(typeof o=="object"&&!ry(o)){const l=ps(o);a=new Er;for(const[c,d]of Object.entries(l))a.set(c,d,r)}i=Ze.create(Ce.of(n.issueTimeTicket(),0),t,void 0,a);for(const l of s)hd(l,i,n)}return i}function Ly(n){if(!n.value.length)throw new k(S.ErrInvalidArgument,"text node cannot have empty value");return!0}function ug(n){if(!n.length)return!0;if(n[0].type===on)for(const t of n){const{type:r}=t;if(r!==on)throw new k(S.ErrInvalidArgument,"element node and text node cannot be passed together");Ly(t)}else for(const t of n){const{type:r}=t;if(r===on)throw new k(S.ErrInvalidArgument,"element node and text node cannot be passed together")}return!0}class gd{constructor(e){u(this,"initialRoot");u(this,"context");u(this,"tree");this.initialRoot=e}initialize(e,t){this.context=e,this.tree=t}getID(){return this.tree.getID()}buildRoot(e){if(!this.initialRoot)return Ze.create(Ce.of(e.issueTimeTicket(),0),jS);const t=Ze.create(Ce.of(e.issueTimeTicket(),0),this.initialRoot.type);for(const r of this.initialRoot.children)hd(r,t,e);return t}getSize(){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getSize()}getNodeSize(){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getNodeSize()}getIndexTree(){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getIndexTree()}splitByPath(e){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");if(!e.length)throw new k(S.ErrInvalidArgument,"path should not be empty");const t=this.tree.pathToTreePos(e),r=W1(t,e);for(const i of r){const{fromPath:s,toPath:o,content:a}=i,l=this.tree.pathToPos(s),c=this.tree.pathToPos(o);this.editInternal(l,c,a?[a]:[],0)}}mergeByPath(e){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");if(!e.length)throw new k(S.ErrInvalidArgument,"path should not be empty");const t=this.tree.pathToTreePos(e);if(t.node.isText)throw new k(S.ErrInvalidArgument,"text node cannot be merged");const r=_1(t,e);for(const i of r){const{fromPath:s,toPath:o,content:a}=i,l=this.tree.pathToPos(s),c=this.tree.pathToPos(o);this.editInternal(l,c,a??[],0)}}styleByPath(e,t){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");if(!e.length)throw new k(S.ErrInvalidArgument,"path should not be empty");const[r,i]=this.tree.pathToPosRange(e),s=this.context.issueTimeTicket(),o=t?ps(t):void 0,[a]=this.tree.style([r,i],o,s);this.context.push(wr.create(this.tree.getCreatedAt(),r,i,a,o?new Map(Object.entries(o)):new Map,s))}style(e,t,r){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");if(e>t)throw new k(S.ErrInvalidArgument,"from should be less than or equal to to");const i=this.tree.findPos(e),s=this.tree.findPos(t),o=this.context.issueTimeTicket(),a=r?ps(r):void 0,[l,c]=this.tree.style([i,s],a,o);for(const d of c)this.context.registerGCPair(d);this.context.push(wr.create(this.tree.getCreatedAt(),i,s,l,a?new Map(Object.entries(a)):new Map,o))}removeStyle(e,t,r){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");if(e>t)throw new k(S.ErrInvalidArgument,"from should be less than or equal to to");const i=this.tree.findPos(e),s=this.tree.findPos(t),o=this.context.issueTimeTicket(),[a,l]=this.tree.removeStyle([i,s],r,o);for(const c of l)this.context.registerGCPair(c);this.context.push(wr.createTreeRemoveStyleOperation(this.tree.getCreatedAt(),i,s,a,r,o))}editInternal(e,t,r,i=0){var c;if(r.length!==0&&r[0]&&(ug(r),r[0].type!==on))for(const d of r){const{children:h=[]}=d;ug(h)}const s=this.context.getLastTimeTicket();let o=new Array;if(((c=r[0])==null?void 0:c.type)===on){let d="";for(const h of r){const{value:m}=h;d+=m}o.push(Ze.create(Ce.of(this.context.issueTimeTicket(),0),on,d))}else o=r.map(d=>d&&H1(this.context,d)).filter(d=>d);const[,a,l]=this.tree.edit([e,t],o.length?o.map(d=>d==null?void 0:d.deepcopy()):void 0,i,s,()=>this.context.issueTimeTicket());for(const d of a)this.context.registerGCPair(d);return this.context.push(Fo.create(this.tree.getCreatedAt(),e,t,o.length?o:void 0,i,l,s)),!0}editByPath(e,t,r,i=0){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");if(e.length!==t.length)throw new k(S.ErrInvalidArgument,"path length should be equal");if(!e.length||!t.length)throw new k(S.ErrInvalidArgument,"path should not be empty");const s=this.tree.pathToPos(e),o=this.tree.pathToPos(t);return this.editInternal(s,o,r?[r]:[],i)}editBulkByPath(e,t,r,i=0){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");if(e.length!==t.length)throw new k(S.ErrInvalidArgument,"path length should be equal");if(!e.length||!t.length)throw new k(S.ErrInvalidArgument,"path should not be empty");const s=this.tree.pathToPos(e),o=this.tree.pathToPos(t);return this.editInternal(s,o,r,i)}edit(e,t,r,i=0){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");if(e>t)throw new k(S.ErrInvalidArgument,"from should be less than or equal to to");const s=this.tree.findPos(e),o=this.tree.findPos(t);return this.editInternal(s,o,r?[r]:[],i)}editBulk(e,t,r,i=0){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");if(e>t)throw new k(S.ErrInvalidArgument,"from should be less than or equal to to");const s=this.tree.findPos(e),o=this.tree.findPos(t);return this.editInternal(s,o,r,i)}toXML(){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toXML()}toJSON(){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toJSON()}toJSForTest(){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toJSForTest()}toJSInfoForTest(){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toJSInfoForTest()}getRootTreeNode(){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getRootTreeNode()}indexToPath(e){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");return this.tree.indexToPath(e)}pathToIndex(e){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");return this.tree.pathToIndex(e)}pathRangeToPosRange(e){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");const t=[this.tree.pathToIndex(e[0]),this.tree.pathToIndex(e[1])],r=this.tree.indexRangeToPosRange(t);return[r[0].toStruct(),r[1].toStruct()]}indexRangeToPosRange(e){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");return this.tree.indexRangeToPosStructRange(e)}posRangeToIndexRange(e){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");const t=[Bt.fromStruct(e[0]),Bt.fromStruct(e[1])];return this.tree.posRangeToIndexRange(t)}posRangeToPathRange(e){if(!this.context||!this.tree)throw new k(S.ErrNotInitialized,"Tree is not initialized yet");const t=[Bt.fromStruct(e[0]),Bt.fromStruct(e[1])];return this.tree.posRangeToPathRange(t)}}function cg(n,e){return Ry(n,e)}function Or(n,e){if(e){if(e instanceof ce)return e;if(e instanceof He)return Ry(n,e);if(e instanceof tt)return j1(n,e);if(e instanceof Et)return new cd(n,e);if(e instanceof nt){const t=new fd(ln.Int,0);return t.initialize(n,e),t}else if(e instanceof xt){const t=new gd;return t.initialize(n,e),t}}else return;throw new TypeError(`Unsupported type of element: ${typeof e}`)}function di(n,e){const t=Or(n,e);return t instanceof ce?t.getValue():t}function kl(n,e,t){let r;if(ce.isSupport(e))r=ce.of(e,t);else if(Array.isArray(e))r=tt.create(t,oe.buildArrayElements(n,e));else if(typeof e=="object")e instanceof cd?(r=Et.create(ws.create(),t),e.initialize(n,r)):e instanceof fd?(r=nt.create(e.getValueType(),e.getValue(),t),e.initialize(n,r)):e instanceof gd?(r=xt.create(e.buildRoot(n),t),e.initialize(n,r)):r=He.create(t,No.buildObjectMembers(n,e));else throw new TypeError(`Unsupported type of value: ${typeof e}`);return r}const fg=50;class G1{constructor(){u(this,"undoStack",[]);u(this,"redoStack",[])}hasUndo(){return this.undoStack.length>0}hasRedo(){return this.redoStack.length>0}pushUndo(e){this.undoStack.length>=fg&&this.undoStack.shift(),this.undoStack.push(e)}popUndo(){return this.undoStack.pop()}pushRedo(e){this.redoStack.length>=fg&&this.redoStack.shift(),this.redoStack.push(e)}popRedo(){return this.redoStack.pop()}clearRedo(){this.redoStack=[]}getUndoStackForTest(){return this.undoStack}getRedoStackForTest(){return this.redoStack}}const Y1="yorkie-devtools-panel",Q1="yorkie-devtools-sdk";function X1(n){return[Ee.StatusChanged,Ee.Snapshot,Ee.LocalChange,Ee.RemoteChange,Ee.Initialized,Ee.Watched,Ee.Unwatched,Ee.PresenceChanged].includes(n.type)}function Z1(n){return n.every(X1)}let Mi="disconnected";const dg=new Map,xa=new Map;typeof window<"u"&&(window.docEventsForReplayByDocKey=xa);function la(n,e){(e!=null&&e.force||Mi!=="disconnected")&&window.postMessage({source:Q1,...n},"*")}function ek(n){if(!n.isEnableDevtools()||typeof window>"u"||dg.has(n.getKey()))return;xa.set(n.getKey(),[]);const e=n.subscribe("all",t=>{Z1(t)&&(xa.get(n.getKey()).push(t),Mi==="synced"&&la({msg:"doc::sync::partial",docKey:n.getKey(),event:t}))});dg.set(n.getKey(),[e]),la({msg:"refresh-devtools"},{force:!0}),window.addEventListener("message",t=>{var i;if(((i=t.data)==null?void 0:i.source)!==Y1)return;switch(t.data.msg){case"devtools::connect":if(Mi!=="disconnected")break;Mi="connected",la({msg:"doc::available",docKey:n.getKey()}),F.info(`[YD] Devtools connected. Doc: ${n.getKey()}`);break;case"devtools::disconnect":Mi="disconnected",F.info(`[YD] Devtools disconnected. Doc: ${n.getKey()}`);break;case"devtools::subscribe":Mi="synced",la({msg:"doc::sync::full",docKey:n.getKey(),events:xa.get(n.getKey())}),F.info(`[YD] Devtools subscribed. Doc: ${n.getKey()}`);break}})}var Rr=(n=>(n.Detached="detached",n.Attached="attached",n.Removed="removed",n))(Rr||{}),Ee=(n=>(n.StatusChanged="status-changed",n.ConnectionChanged="connection-changed",n.SyncStatusChanged="sync-status-changed",n.Snapshot="snapshot",n.LocalChange="local-change",n.RemoteChange="remote-change",n.Initialized="initialized",n.Watched="watched",n.Unwatched="unwatched",n.PresenceChanged="presence-changed",n.Broadcast="broadcast",n.LocalBroadcast="local-broadcast",n.AuthError="auth-error",n))(Ee||{}),Gc=(n=>(n.Connected="connected",n.Disconnected="disconnected",n))(Gc||{}),Yc=(n=>(n.Synced="synced",n.SyncFailed="sync-failed",n))(Yc||{});class By{constructor(e,t){u(this,"key");u(this,"status");u(this,"opts");u(this,"changeID");u(this,"checkpoint");u(this,"localChanges");u(this,"root");u(this,"clone");u(this,"eventStream");u(this,"eventStreamObserver");u(this,"onlineClients");u(this,"presences");u(this,"history");u(this,"internalHistory");u(this,"isUpdating");this.opts=t||{},this.key=e,this.status="detached",this.root=Co.create(),this.changeID=QS,this.checkpoint=XS,this.localChanges=[],this.eventStream=U1(r=>{this.eventStreamObserver=r}),this.onlineClients=new Set,this.presences=new Map,this.isUpdating=!1,this.internalHistory=new G1,this.history={canUndo:this.canUndo.bind(this),canRedo:this.canRedo.bind(this),undo:this.undo.bind(this),redo:this.redo.bind(this)},ek(this)}update(e,t){if(this.getStatus()==="removed")throw new k(S.ErrDocumentRemoved,`${this.key} is removed`);this.ensureClone();const r=this.changeID.getActorID(),i=Yi.create(this.changeID.next(),this.clone.root,this.clone.presences.get(r)||{},t);try{const s=cg(i,this.clone.root.getObject());this.presences.has(r)||this.clone.presences.set(r,{}),this.isUpdating=!0,e(s,new Au(i,this.clone.presences.get(r)))}catch(s){throw this.clone=void 0,s}finally{this.isUpdating=!1}if(i.hasChange()){F.isEnabled(Ue.Trivial)&&F.trivial(`trying to update a local change: ${this.toJSON()}`);const s=i.getChange(),{opInfos:o,reverseOps:a}=s.execute(this.root,this.presences,Q.Local),l=i.getReversePresence();l&&a.push({type:"presence",value:l}),this.localChanges.push(s),a.length>0&&this.internalHistory.pushUndo(a),o.length>0&&this.internalHistory.clearRedo(),this.changeID=s.getID();const c=[];o.length>0&&c.push({type:"local-change",source:Q.Local,value:{message:s.getMessage()||"",operations:o,actor:r,clientSeq:s.getID().getClientSeq(),serverSeq:s.getID().getServerSeq()},rawChange:this.isEnableDevtools()?s.toStruct():void 0}),s.hasPresenceChange()&&c.push({type:"presence-changed",source:Q.Local,value:{clientID:r,presence:this.getPresence(r)}}),this.publish(c),F.isEnabled(Ue.Trivial)&&F.trivial(`after update a local change: ${this.toJSON()}`)}}subscribe(e,t,r,i){if(typeof e=="string"){if(typeof t!="function")throw new k(S.ErrInvalidArgument,"Second argument must be a callback function");if(e==="presence"){const a=t;return this.eventStream.subscribe(l=>{for(const c of l)c.type!=="initialized"&&c.type!=="watched"&&c.type!=="unwatched"&&c.type!=="presence-changed"||a(c)},r,i)}if(e==="my-presence"){const a=t;return this.eventStream.subscribe(l=>{for(const c of l)c.type!=="initialized"&&c.type!=="presence-changed"||c.type==="presence-changed"&&c.value.clientID!==this.changeID.getActorID()||a(c)},r,i)}if(e==="others"){const a=t;return this.eventStream.subscribe(l=>{for(const c of l)c.type!=="watched"&&c.type!=="unwatched"&&c.type!=="presence-changed"||c.value.clientID!==this.changeID.getActorID()&&a(c)},r,i)}if(e==="connection"){const a=t;return this.eventStream.subscribe(l=>{for(const c of l)c.type==="connection-changed"&&a(c)},r,i)}if(e==="status"){const a=t;return this.eventStream.subscribe(l=>{for(const c of l)c.type==="status-changed"&&a(c)},r,i)}if(e==="sync"){const a=t;return this.eventStream.subscribe(l=>{for(const c of l)c.type==="sync-status-changed"&&a(c)},r,i)}if(e==="local-broadcast"){const a=t;return this.eventStream.subscribe(l=>{for(const c of l)c.type==="local-broadcast"&&a(c)},r)}if(e==="broadcast"){const a=t;return this.eventStream.subscribe(l=>{for(const c of l)c.type==="broadcast"&&a(c)},r)}if(e==="auth-error"){const a=t;return this.eventStream.subscribe(l=>{for(const c of l)c.type==="auth-error"&&a(c)},r)}if(e==="all"){const a=t;return this.eventStream.subscribe(a,r,i)}const s=e,o=t;return this.eventStream.subscribe(a=>{for(const l of a){if(l.type!=="local-change"&&l.type!=="remote-change")continue;const c=[];for(const d of l.value.operations)this.isSameElementOrChildOf(d.path,s)&&c.push(d);c.length&&o({...l,value:{...l.value,operations:c}})}},r,i)}if(typeof e=="function"){const s=e,o=t,a=r;return this.eventStream.subscribe(l=>{for(const c of l)c.type!=="snapshot"&&c.type!=="local-change"&&c.type!=="remote-change"||s(c)},o,a)}throw new k(S.ErrInvalidArgument,`"${e}" is not a valid`)}publish(e){this.eventStreamObserver&&this.eventStreamObserver.next(e)}isSameElementOrChildOf(e,t){if(t===e)return!0;const r=e.split(".");return t.split(".").every((s,o)=>s===r[o])}removePushedLocalChanges(e){for(;this.localChanges.length&&!(this.localChanges[0].getID().getClientSeq()>e);)this.localChanges.shift()}applyChangePack(e){const t=e.hasSnapshot();t?this.applySnapshot(e.getCheckpoint().getServerSeq(),e.getVersionVector(),e.getSnapshot(),e.getCheckpoint().getClientSeq()):(this.applyChanges(e.getChanges(),Q.Remote),this.removePushedLocalChanges(e.getCheckpoint().getClientSeq())),this.checkpoint=this.checkpoint.forward(e.getCheckpoint()),t||this.garbageCollect(e.getVersionVector()),e.getIsRemoved()&&this.applyStatus("removed"),F.isEnabled(Ue.Trivial)&&F.trivial(`${this.root.toJSON()}`)}getCheckpoint(){return this.checkpoint}getChangeID(){return this.changeID}hasLocalChanges(){return this.localChanges.length>0}ensureClone(){this.clone||(this.clone={root:this.root.deepcopy(),presences:Dt(this.presences)})}createChangePack(){const e=Array.from(this.localChanges),t=this.checkpoint.increaseClientSeq(e.length);return Vl.create(this.key,t,!1,e,this.getVersionVector())}setActor(e){for(const t of this.localChanges)t.setActor(e);this.changeID=this.changeID.setActor(e)}isEnableDevtools(){return!!this.opts.enableDevtools}getKey(){return this.key}getStatus(){return this.status}getCloneRoot(){if(this.clone)return this.clone.root.getObject()}getRoot(){this.ensureClone();const e=Yi.create(this.changeID.next(),this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});return cg(e,this.clone.root.getObject())}getDocSize(){return this.root.getDocSize()}garbageCollect(e){return this.opts.disableGC?0:(this.clone&&this.clone.root.garbageCollect(e),this.root.garbageCollect(e))}getRootObject(){return this.root.getObject()}getGarbageLen(){return this.root.getGarbageLen()}getGarbageLenFromClone(){return this.clone.root.getGarbageLen()}toJSON(){return this.root.toJSON()}toSortedJSON(){return this.root.toSortedJSON()}getStats(){return this.root.getStats()}toJSForTest(){return{...this.getRoot().toJSForTest(),key:"root"}}applySnapshot(e,t,r,i=-1){const{root:s,presences:o}=de.bytesToSnapshot(r);this.root=new Co(s),this.presences=o,this.changeID=this.changeID.setClocks(t.maxLamport(),t),this.clone=void 0,this.removePushedLocalChanges(i),this.applyChanges(this.localChanges,Q.Local),this.publish([{type:"snapshot",source:Q.Remote,value:{serverSeq:e.toString(),snapshot:this.isEnableDevtools()?de.bytesToHex(r):void 0,snapshotVector:de.versionVectorToHex(t)}}])}applyChanges(e,t){F.isEnabled(Ue.Debug)&&F.debug(`trying to apply ${e.length} remote changes.elements:${this.root.getElementMapSize()}, removeds:${this.root.getGarbageElementSetSize()}`),F.isEnabled(Ue.Trivial)&&F.trivial(e.map(r=>`${r.getID().toTestString()}	${r.toTestString()}`).join(`
`));for(const r of e)this.applyChange(r,t);F.isEnabled(Ue.Debug)&&F.debug(`after appling ${e.length} remote changes.elements:${this.root.getElementMapSize()},  removeds:${this.root.getGarbageElementSetSize()}`)}applyChange(e,t){this.ensureClone(),e.execute(this.clone.root,this.clone.presences,t);const r=[],i=e.getID().getActorID();if(e.hasPresenceChange()&&this.onlineClients.has(i)){const o=e.getPresenceChange();switch(o.type){case ti.Put:r.push(this.presences.has(i)?{type:"presence-changed",source:t,value:{clientID:i,presence:o.presence}}:{type:"watched",source:Q.Remote,value:{clientID:i,presence:o.presence}});break;case ti.Clear:r.push({type:"unwatched",source:Q.Remote,value:{clientID:i,presence:this.getPresence(i)}}),this.removeOnlineClient(i);break}}const{opInfos:s}=e.execute(this.root,this.presences,t);if(this.changeID=this.changeID.syncClocks(e.getID()),s.length>0){const o=this.isEnableDevtools()?e.toStruct():void 0;r.push(t===Q.Remote?{type:"remote-change",source:t,value:{actor:i,clientSeq:e.getID().getClientSeq(),serverSeq:e.getID().getServerSeq(),message:e.getMessage()||"",operations:s},rawChange:o}:{type:"local-change",source:t,value:{actor:i,clientSeq:e.getID().getClientSeq(),serverSeq:e.getID().getServerSeq(),message:e.getMessage()||"",operations:s},rawChange:o})}r.length>0&&this.publish(r)}applyWatchStream(e){if(e.body.case==="initialization"){const t=e.body.value.clientIds,r=new Set;for(const i of t)i!==this.changeID.getActorID()&&r.add(i);this.setOnlineClients(r),this.publish([{type:"initialized",source:Q.Local,value:this.getPresences()}]);return}if(e.body.case==="event"){const{type:t,publisher:r}=e.body.value,i=[];if(t===ki.DOCUMENT_WATCHED){if(this.onlineClients.has(r)&&this.hasPresence(r))return;this.addOnlineClient(r),this.hasPresence(r)&&i.push({type:"watched",source:Q.Remote,value:{clientID:r,presence:this.getPresence(r)}})}else if(t===ki.DOCUMENT_UNWATCHED){const s=this.getPresence(r);this.removeOnlineClient(r),s&&i.push({type:"unwatched",source:Q.Remote,value:{clientID:r,presence:s}})}else if(t===ki.DOCUMENT_BROADCAST&&e.body.value.body){const{topic:s,payload:o}=e.body.value.body,a=new TextDecoder;i.push({type:"broadcast",value:{clientID:r,topic:s,payload:JSON.parse(a.decode(o))}})}i.length>0&&this.publish(i)}}applyStatus(e){this.status=e,e==="detached"&&this.setActor(Ul),this.publish([{source:e==="removed"?Q.Remote:Q.Local,type:"status-changed",value:e==="attached"?{status:e,actorID:this.changeID.getActorID()}:{status:e}}])}applyDocEventForReplay(e){if(e.type==="status-changed"){this.applyStatus(e.value.status),e.value.status==="attached"&&this.setActor(e.value.actorID);return}if(e.type==="snapshot"){const{snapshot:t,serverSeq:r,snapshotVector:i}=e.value;if(!t)return;this.applySnapshot(BigInt(r),de.hexToVersionVector(i),de.hexToBytes(t));return}if(e.type==="local-change"||e.type==="remote-change"){if(!e.rawChange)return;const t=vs.fromStruct(e.rawChange);this.applyChange(t,e.source)}if(e.type==="initialized"){const t=new Set;for(const{clientID:r,presence:i}of e.value)t.add(r),this.presences.set(r,i);this.setOnlineClients(t);return}if(e.type==="watched"){const{clientID:t,presence:r}=e.value;this.addOnlineClient(t),this.presences.set(t,r);return}if(e.type==="unwatched"){const{clientID:t}=e.value;this.removeOnlineClient(t),this.presences.delete(t)}if(e.type==="presence-changed"){const{clientID:t,presence:r}=e.value;this.presences.set(t,r)}}applyDocEventsForReplay(e){for(const t of e)this.applyDocEventForReplay(t)}getValueByPath(e){if(!e.startsWith("$"))throw new k(S.ErrInvalidArgument,'path must start with "$"');const t=e.split(".");t.shift();let r=this.getRoot();for(const i of t)if(r=r[i],r===void 0)return;return r}setOnlineClients(e){this.onlineClients=e}resetOnlineClients(){this.onlineClients=new Set}addOnlineClient(e){this.onlineClients.add(e)}removeOnlineClient(e){this.onlineClients.delete(e)}hasPresence(e){return this.presences.has(e)}getMyPresence(){if(this.status!=="attached")return{};const e=this.presences.get(this.changeID.getActorID());return e?Dt(e):{}}getPresence(e){if(e===this.changeID.getActorID())return this.getMyPresence();if(!this.onlineClients.has(e))return;const t=this.presences.get(e);return t?Dt(t):void 0}getPresenceForTest(e){const t=this.presences.get(e);return t?Dt(t):void 0}getPresences(){const e=[];e.push({clientID:this.changeID.getActorID(),presence:Dt(this.getMyPresence())});for(const t of this.onlineClients)this.presences.has(t)&&e.push({clientID:t,presence:Dt(this.presences.get(t))});return e}getSelfForTest(){return{clientID:this.getChangeID().getActorID(),presence:this.getMyPresence()}}getOthersForTest(){const e=this.getChangeID().getActorID();return this.getPresences().filter(t=>t.clientID!==e).sort((t,r)=>t.clientID>r.clientID?1:-1)}canUndo(){return this.internalHistory.hasUndo()&&!this.isUpdating}filterVersionVector(e){const r=this.changeID.getVersionVector().filter(e);this.changeID=this.changeID.setVersionVector(r)}canRedo(){return this.internalHistory.hasRedo()&&!this.isUpdating}undo(){if(this.isUpdating)throw new k(S.ErrRefused,"Undo is not allowed during an update");const e=this.internalHistory.popUndo();if(e===void 0)throw new k(S.ErrRefused,"There is no operation to be undone");this.ensureClone();const t=Yi.create(this.changeID.next(),this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});for(const c of e){if(!(c instanceof $t)){new Au(t,Dt(this.clone.presences.get(this.changeID.getActorID()))).set(c.value,{addToHistory:!0});continue}const d=t.issueTimeTicket();c.setExecutedAt(d),t.push(c)}const r=t.getChange();r.execute(this.clone.root,this.clone.presences,Q.UndoRedo);const{opInfos:i,reverseOps:s}=r.execute(this.root,this.presences,Q.UndoRedo),o=t.getReversePresence();if(o&&s.push({type:"presence",value:o}),s.length>0&&this.internalHistory.pushRedo(s),!r.hasPresenceChange()&&i.length===0)return;this.localChanges.push(r),this.changeID=r.getID();const a=this.changeID.getActorID(),l=[];i.length>0&&l.push({type:"local-change",source:Q.UndoRedo,value:{message:r.getMessage()||"",operations:i,actor:a,clientSeq:r.getID().getClientSeq(),serverSeq:r.getID().getServerSeq()},rawChange:this.isEnableDevtools()?r.toStruct():void 0}),r.hasPresenceChange()&&l.push({type:"presence-changed",source:Q.UndoRedo,value:{clientID:a,presence:this.getPresence(a)}}),this.publish(l)}redo(){if(this.isUpdating)throw new k(S.ErrRefused,"Redo is not allowed during an update");const e=this.internalHistory.popRedo();if(e===void 0)throw new k(S.ErrRefused,"There is no operation to be redone");this.ensureClone();const t=Yi.create(this.changeID.next(),this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});for(const c of e){if(!(c instanceof $t)){new Au(t,Dt(this.clone.presences.get(this.changeID.getActorID()))).set(c.value,{addToHistory:!0});continue}const d=t.issueTimeTicket();c.setExecutedAt(d),t.push(c)}const r=t.getChange();r.execute(this.clone.root,this.clone.presences,Q.UndoRedo);const{opInfos:i,reverseOps:s}=r.execute(this.root,this.presences,Q.UndoRedo),o=t.getReversePresence();if(o&&s.push({type:"presence",value:o}),s.length>0&&this.internalHistory.pushUndo(s),!r.hasPresenceChange()&&i.length===0)return;this.localChanges.push(r),this.changeID=r.getID();const a=this.changeID.getActorID(),l=[];i.length>0&&l.push({type:"local-change",source:Q.UndoRedo,value:{message:r.getMessage()||"",operations:i,actor:a,clientSeq:r.getID().getClientSeq(),serverSeq:r.getID().getServerSeq()},rawChange:this.isEnableDevtools()?r.toStruct():void 0}),r.hasPresenceChange()&&l.push({type:"presence-changed",source:Q.UndoRedo,value:{clientID:a,presence:this.getPresence(a)}}),this.publish(l)}getUndoStackForTest(){return this.internalHistory.getUndoStackForTest()}getRedoStackForTest(){return this.internalHistory.getRedoStackForTest()}broadcast(e,t,r){const i={type:"local-broadcast",value:{topic:e,payload:t},options:r};this.publish([i])}getVersionVector(){return this.changeID.getVersionVector()}}function tk(n,e){let t=e;return{authInterceptor:s=>async o=>(n&&o.header.set("x-api-key",n),t&&o.header.set("authorization",t),await s(o)),setToken:s=>{t=s}}}const nk="@yorkie-js/sdk",rk="0.6.9",hg={name:nk,version:rk};function ik(n){return e=>async t=>(n?t.header.set("x-yorkie-user-agent",n):t.header.set("x-yorkie-user-agent",hg.name+"/"+hg.version),await e(t))}const sk=n=>{try{if(JSON.stringify(n)===void 0)return!1}catch{return!1}return!0};var Ca=(n=>(n.Manual="manual",n.Realtime="realtime",n.RealtimePushOnly="realtime-pushonly",n.RealtimeSyncOff="realtime-syncoff",n))(Ca||{});const bs={rpcAddr:"https://api.yorkie.dev",syncLoopDuration:50,retrySyncLoopDelay:1e3,reconnectStreamDelay:1e3},Cu={maxRetries:1/0,initialRetryInterval:1e3,maxBackoff:2e4};class by{constructor(e){u(this,"id");u(this,"key");u(this,"metadata");u(this,"status");u(this,"attachmentMap");u(this,"apiKey");u(this,"authTokenInjector");u(this,"conditions");u(this,"syncLoopDuration");u(this,"reconnectStreamDelay");u(this,"retrySyncLoopDelay");u(this,"rpcClient");u(this,"setAuthToken");u(this,"taskQueue");u(this,"processing",!1);u(this,"keepalive",!1);e=e||bs;const t=e.rpcAddr||bs.rpcAddr;this.key=e.key||Oy(),this.metadata=e.metadata||{},this.status="deactivated",this.attachmentMap=new Map,this.apiKey=e.apiKey||"",this.authTokenInjector=e.authTokenInjector,this.conditions={SyncLoop:!1,WatchLoop:!1},this.syncLoopDuration=e.syncLoopDuration??bs.syncLoopDuration,this.reconnectStreamDelay=e.reconnectStreamDelay??bs.reconnectStreamDelay,this.retrySyncLoopDelay=e.retrySyncLoopDelay??bs.retrySyncLoopDelay;const{authInterceptor:r,setToken:i}=tk(this.apiKey);this.setAuthToken=i,this.rpcClient=uS(RS,OS({baseUrl:t,interceptors:[r,ik(e==null?void 0:e.userAgent)],fetch:(s,o)=>{const a={...o,keepalive:this.keepalive};return fetch(s,a)}})),this.taskQueue=[]}async activate(){if(this.isActive())return Promise.resolve();if(this.authTokenInjector){const e=await this.authTokenInjector();this.setAuthToken(e)}return this.enqueueTask(async()=>{try{const e=await this.rpcClient.activateClient({clientKey:this.key,metadata:this.metadata},{headers:{"x-shard-key":this.apiKey}});this.id=e.clientId,this.status="activated",this.runSyncLoop(),F.info(`[AC] c:"${this.getKey()}" activated, id:"${this.id}"`),typeof window<"u"&&window.addEventListener("beforeunload",async()=>{await this.deactivate({keepalive:!0})})}catch(e){throw F.error(`[AC] c:"${this.getKey()}" err :`,e),await this.handleConnectError(e),e}})}deactivate(e={keepalive:!1}){if(this.status==="deactivated")return Promise.resolve();const t=async()=>{try{await this.rpcClient.deactivateClient({clientId:this.id},{headers:{"x-shard-key":this.apiKey}}),this.deactivateInternal(),F.info(`[DC] c"${this.getKey()}" deactivated`)}catch(r){throw F.error(`[DC] c:"${this.getKey()}" err :`,r),await this.handleConnectError(r),r}};if(e.keepalive){this.keepalive=!0;const r=t();return this.keepalive=!1,r}return this.enqueueTask(t)}hasDocument(e){return this.attachmentMap.has(e)}attach(e,t={}){if(!this.isActive())throw new k(S.ErrClientNotActivated,`${this.key} is not active`);if(e.getStatus()!==Rr.Detached)throw new k(S.ErrDocumentNotDetached,`${e.getKey()} is not detached`);e.setActor(this.id),e.update((s,o)=>o.set(t.initialPresence||{}));const r=e.subscribe("local-broadcast",async s=>{var d;const{topic:o,payload:a}=s.value,l=(d=s.options)==null?void 0:d.error,c=s.options;try{await this.broadcast(e.getKey(),o,a,c)}catch(h){h instanceof Error&&(l==null||l(h))}}),i=t.syncMode??"realtime";return this.enqueueTask(async()=>{try{const s=await this.rpcClient.attachDocument({clientId:this.id,changePack:de.toChangePack(e.createChangePack())},{headers:{"x-shard-key":`${this.apiKey}/${e.getKey()}`}}),o=de.fromChangePack(s.changePack);if(e.applyChangePack(o),e.getStatus()===Rr.Removed)return e;e.applyStatus(Rr.Attached),this.attachmentMap.set(e.getKey(),new J1(this.reconnectStreamDelay,e,s.documentId,i,r)),i!=="manual"&&await this.runWatchLoop(e.getKey()),F.info(`[AD] c:"${this.getKey()}" attaches d:"${e.getKey()}"`);const a=e.getRootObject();if(t.initialRoot){const l=t.initialRoot;e.update(c=>{for(const[d,h]of Object.entries(l))if(!a.has(d)){const m=d;c[m]=h}})}return e}catch(s){throw F.error(`[AD] c:"${this.getKey()}" err :`,s),await this.handleConnectError(s),s}})}detach(e,t={keepalive:!1}){if(!this.isActive())throw new k(S.ErrClientNotActivated,`${this.key} is not active`);const r=this.attachmentMap.get(e.getKey());if(!r)throw new k(S.ErrDocumentNotAttached,`${e.getKey()} is not attached`);e.update((s,o)=>o.clear());const i=async()=>{try{const s=await this.rpcClient.detachDocument({clientId:this.id,documentId:r.docID,changePack:de.toChangePack(e.createChangePack()),removeIfNotAttached:t.removeIfNotAttached??!1},{headers:{"x-shard-key":`${this.apiKey}/${e.getKey()}`}}),o=de.fromChangePack(s.changePack);return e.applyChangePack(o),e.getStatus()!==Rr.Removed&&e.applyStatus(Rr.Detached),this.detachInternal(e.getKey()),F.info(`[DD] c:"${this.getKey()}" detaches d:"${e.getKey()}"`),e}catch(s){throw F.error(`[DD] c:"${this.getKey()}" err :`,s),await this.handleConnectError(s),s}};if(t.keepalive){this.keepalive=!0;const s=i();return this.keepalive=!1,s}return this.enqueueTask(i)}async changeSyncMode(e,t){if(!this.isActive())throw new k(S.ErrClientNotActivated,`${this.key} is not active`);const r=this.attachmentMap.get(e.getKey());if(!r)throw new k(S.ErrDocumentNotAttached,`${e.getKey()} is not attached`);const i=r.syncMode;return i===t?e:(r.changeSyncMode(t),t==="manual"?(r.cancelWatchStream(),e):(t==="realtime"&&(r.remoteChangeEventReceived=!0),i==="manual"&&await this.runWatchLoop(e.getKey()),e))}sync(e){if(!this.isActive())throw new k(S.ErrClientNotActivated,`${this.key} is not active`);if(e){const t=this.attachmentMap.get(e.getKey());if(!t)throw new k(S.ErrDocumentNotAttached,`${e.getKey()} is not attached`);return this.enqueueTask(async()=>this.syncInternal(t,"realtime").catch(async r=>{throw F.error(`[SY] c:"${this.getKey()}" err :`,r),await this.handleConnectError(r),r}))}return this.enqueueTask(async()=>{const t=[];for(const[,r]of this.attachmentMap)t.push(this.syncInternal(r,r.syncMode));return Promise.all(t).catch(async r=>{throw F.error(`[SY] c:"${this.getKey()}" err :`,r),await this.handleConnectError(r),r})})}remove(e){if(!this.isActive())throw new k(S.ErrClientNotActivated,`${this.key} is not active`);const t=this.attachmentMap.get(e.getKey());if(!t)throw new k(S.ErrDocumentNotAttached,`${e.getKey()} is not attached`);e.setActor(this.id);const r=de.toChangePack(e.createChangePack());return r.isRemoved=!0,this.enqueueTask(async()=>{try{const i=await this.rpcClient.removeDocument({clientId:this.id,documentId:t.docID,changePack:r},{headers:{"x-shard-key":`${this.apiKey}/${e.getKey()}`}}),s=de.fromChangePack(i.changePack);e.applyChangePack(s),this.detachInternal(e.getKey()),F.info(`[RD] c:"${this.getKey()}" removes d:"${e.getKey()}"`)}catch(i){throw F.error(`[RD] c:"${this.getKey()}" err :`,i),await this.handleConnectError(i),i}})}getID(){return this.id}getKey(){return this.key}isActive(){return this.status==="activated"}getStatus(){return this.status}getCondition(e){return this.conditions[e]}broadcast(e,t,r,i){if(!this.isActive())throw new k(S.ErrClientNotActivated,`${this.key} is not active`);const s=this.attachmentMap.get(e);if(!s)throw new k(S.ErrDocumentNotAttached,`${e} is not attached`);if(!sk(r))throw new k(S.ErrInvalidArgument,"payload is not serializable");const o=(i==null?void 0:i.maxRetries)??Cu.maxRetries,a=Cu.maxBackoff;let l=0;const c=h=>Math.min(Cu.initialRetryInterval*2**h,a),d=async()=>this.enqueueTask(async()=>{try{await this.rpcClient.broadcast({clientId:this.id,documentId:s.docID,topic:t,payload:new TextEncoder().encode(JSON.stringify(r))},{headers:{"x-shard-key":`${this.apiKey}/${e}`}}),F.info(`[BC] c:"${this.getKey()}" broadcasts d:"${e}" t:"${t}"`)}catch(h){if(F.error(`[BC] c:"${this.getKey()}" err:`,h),await this.handleConnectError(h))if(h instanceof G&&Dr(h)===S.ErrUnauthenticated&&s.doc.publish([{type:Ee.AuthError,value:{reason:$s(h).reason,method:"Broadcast"}}]),l<o)l++,setTimeout(()=>d(),c(l-1)),F.info(`[BC] c:"${this.getKey()}" retry attempt ${l}/${o}`);else throw F.error(`[BC] c:"${this.getKey()}" exceeded maximum retry attempts`),h;else throw h}});return d()}runSyncLoop(){const e=()=>{if(!this.isActive()){F.debug(`[SL] c:"${this.getKey()}" exit sync loop`),this.conditions.SyncLoop=!1;return}const t=[];for(const[,r]of this.attachmentMap)r.needRealtimeSync()&&(r.remoteChangeEventReceived=!1,t.push(this.syncInternal(r,r.syncMode).catch(async i=>{throw i instanceof G&&Dr(i)===S.ErrUnauthenticated&&r.doc.publish([{type:Ee.AuthError,value:{reason:$s(i).reason,method:"PushPull"}}]),i})));Promise.all(t).then(()=>setTimeout(e,this.syncLoopDuration)).catch(async r=>{F.error(`[SL] c:"${this.getKey()}" sync failed:`,r),await this.handleConnectError(r)?setTimeout(e,this.retrySyncLoopDelay):this.conditions.SyncLoop=!1})};F.debug(`[SL] c:"${this.getKey()}" run sync loop`),this.conditions.SyncLoop=!0,e()}async runWatchLoop(e){const t=this.attachmentMap.get(e);if(!t)throw new k(S.ErrDocumentNotAttached,`${e} is not attached`);return this.conditions.WatchLoop=!0,t.runWatchLoop(r=>{if(!this.isActive())return this.conditions.WatchLoop=!1,Promise.reject(new k(S.ErrClientNotActivated,`${this.key} is not active`));const i=new AbortController,s=this.rpcClient.watchDocument({clientId:this.id,documentId:t.docID},{headers:{"x-shard-key":`${this.apiKey}/${e}`},signal:i.signal});return t.doc.publish([{type:Ee.ConnectionChanged,value:Gc.Connected}]),F.info(`[WD] c:"${this.getKey()}" watches d:"${e}"`),new Promise((o,a)=>{(async()=>{try{for await(const c of s)this.handleWatchDocumentsResponse(t,c),c.body.case==="initialization"&&o([s,i])}catch(c){t.doc.resetOnlineClients(),t.doc.publish([{type:Ee.Initialized,source:Q.Local,value:t.doc.getPresences()}]),t.doc.publish([{type:Ee.ConnectionChanged,value:Gc.Disconnected}]),F.debug(`[WD] c:"${this.getKey()}" unwatches`),await this.handleConnectError(c)?(c instanceof G&&Dr(c)===S.ErrUnauthenticated&&t.doc.publish([{type:Ee.AuthError,value:{reason:$s(c).reason,method:"WatchDocuments"}}]),r()):this.conditions.WatchLoop=!1,a(c)}})()})})}handleWatchDocumentsResponse(e,t){if(t.body.case==="event"&&t.body.value.type===ki.DOCUMENT_CHANGED){e.remoteChangeEventReceived=!0;return}e.doc.applyWatchStream(t)}deactivateInternal(){this.status="deactivated";for(const[e,t]of this.attachmentMap)this.detachInternal(e),t.doc.applyStatus(Rr.Detached)}detachInternal(e){const t=this.attachmentMap.get(e);t&&(t.cancelWatchStream(),t.unsubscribeBroadcastEvent(),this.attachmentMap.delete(e))}async syncInternal(e,t){const{doc:r,docID:i}=e,s=r.createChangePack();try{const o=await this.rpcClient.pushPullChanges({clientId:this.id,documentId:i,changePack:de.toChangePack(s),pushOnly:t==="realtime-pushonly"},{headers:{"x-shard-key":`${this.apiKey}/${r.getKey()}`}}),a=de.fromChangePack(o.changePack);if(a.hasChanges()&&(e.syncMode==="realtime-pushonly"||e.syncMode==="realtime-syncoff"))return r;r.applyChangePack(a),e.doc.publish([{type:Ee.SyncStatusChanged,value:Yc.Synced}]),r.getStatus()===Rr.Removed&&this.detachInternal(r.getKey());const l=r.getKey(),c=a.getChangeSize();return F.info(`[PP] c:"${this.getKey()}" sync d:"${l}", push:${s.getChangeSize()} pull:${c} cp:${a.getCheckpoint().toTestString()}`),r}catch(o){throw r.publish([{type:Ee.SyncStatusChanged,value:Yc.SyncFailed}]),F.error(`[PP] c:"${this.getKey()}" err :`,o),o}}async handleConnectError(e){if(!(e instanceof G))return!1;if(e.code===V.Canceled||e.code===V.Unknown||e.code===V.ResourceExhausted||e.code===V.Unavailable)return!0;if(Dr(e)===S.ErrUnauthenticated){if(this.authTokenInjector){const t=await this.authTokenInjector($s(e).reason);this.setAuthToken(t)}return!0}return Dr(e)===S.ErrTooManySubscribers?(F.error(`[WD] c:"${this.getKey()}" err :`,e.rawMessage),!0):(Dr(e)===S.ErrTooManyAttachments||(Dr(e)===S.ErrClientNotActivated||Dr(e)===S.ErrClientNotFound)&&this.deactivateInternal(),!1)}enqueueTask(e){return new Promise((t,r)=>{this.taskQueue.push(()=>e().then(t).catch(r)),this.processing||this.processNext()})}async processNext(){if(this.taskQueue.length===0){this.processing=!1;return}try{this.processing=!0,await this.taskQueue.shift()()}catch{F.error(`[TQ] c:"${this.getKey()}" process failed, id:"${this.id}"`)}this.processNext()}}const My={Client:by,Document:By,IntType:ln.Int,LongType:ln.Long};typeof globalThis<"u"&&(globalThis.yorkie={Client:by,Document:By,Primitive:ce,Text:cd,Counter:fd,Tree:gd,LogLevel:Ue,setLogLevel:F1,IntType:ln.Int,LongType:ln.Long});class ok{constructor(e,t){this.x=e,this.y=t,this.lifetime=0}}const ak=({xPos:n,yPos:e})=>{const[t,r]=je.useState([]),i=je.useRef(null),[s,o]=je.useState([]),a=(l,c)=>{const d=new ok(l,c);s.push(d),o(s),t.push(d),r(t)};return je.useEffect(()=>{const c=i.current.getContext("2d"),d=()=>{c.clearRect(0,0,c.canvas.width,c.canvas.height);const h=.7*(1*4e3)/60;for(let m=0;m<s.length;++m){const y=s[m];let w;if(s[m-1]!==void 0?w=s[m-1]:w=y,y.lifetime+=1,y.lifetime>h)s.shift();else{c.lineWidth=5,c.lineJoin="round";const T=0,P=0,p=0;c.strokeStyle=`rgb(${T},${P},${p})`,c.beginPath(),c.moveTo(w.x,w.y),c.lineTo(y.x,y.y),c.stroke(),c.closePath()}}requestAnimationFrame(d)};d()},[s]),je.useEffect(()=>{a(n,e)},[n,e]),ue.jsx("canvas",{className:"pen-cursor-canvas",ref:i,width:document.body.clientWidth,height:document.body.clientHeight})},lk="_goUp0_1lnal_1",uk="_goUpAnimation0_1lnal_1",ck="_fadeOut_1lnal_1",fk="_goUp1_1lnal_16",dk="_goUpAnimation1_1lnal_1",hk="_goUp2_1lnal_31",gk="_goUpAnimation2_1lnal_1",mk="_leftRight0_1lnal_46",pk="_leftRightAnimation0_1lnal_1",yk="_leftRight1_1lnal_60",vk="_leftRightAnimation1_1lnal_1",wk="_leftRight2_1lnal_74",Sk="_leftRightAnimation2_1lnal_1",Nu={goUp0:lk,goUpAnimation0:uk,fadeOut:ck,goUp1:fk,goUpAnimation1:dk,goUp2:hk,goUpAnimation2:gk,leftRight0:mk,leftRightAnimation0:pk,leftRight1:yk,leftRightAnimation1:vk,leftRight2:wk,leftRightAnimation2:Sk};function kk({x:n,y:e,timestamp:t,selectedCursorShape:r}){return ue.jsx("div",{className:"single-animation-container",children:ue.jsx("div",{className:`absolute select-none pointer-events-none ${Nu.disappear} text-${t%5+2}xl ${Nu["goUp"+t%3]}`,style:{left:n,top:e},children:ue.jsx("div",{className:Nu["leftRight"+t%3],children:ue.jsx("div",{className:"transform -translate-x-1/2 -translate-y-1/2",children:ue.jsx("img",{src:`./icons/icon_${r}.svg`})})})})})}function gg(n,e){const t=je.useRef(n);je.useEffect(()=>{t.current=n},[n]),je.useEffect(()=>{function r(){t.current()}if(e!==null){let i=setInterval(r,e);return()=>clearInterval(i)}},[e])}const Tk=({pointerDown:n,xPos:e,yPos:t,selectedCursorShape:r})=>{const[i,s]=je.useState([]),o=100;return gg(()=>{s(a=>a.filter(l=>l.timestamp>Date.now()-4e3))},1e3),gg(()=>{n&&s(a=>a.concat([{point:{x:e,y:t},timestamp:Date.now()}]))},o),ue.jsx("div",{style:{transform:`translateX(${e}px) translateY(${t}px)`},children:i.map(a=>ue.jsx(kk,{x:a.point.x,y:a.point.y,timestamp:a.timestamp,selectedCursorShape:r},a.timestamp.toString()))})},Ak=({selectedCursorShape:n,x:e,y:t,pointerDown:r})=>ue.jsxs(ue.Fragment,{children:[ue.jsx("img",{src:`./icons/icon_${n}.svg`,className:`${n}-cursor`,style:{transform:`translate3d(${e}px, ${t}px, 0)`}}),(n==="heart"||n==="thumbs")&&ue.jsx(Tk,{pointerDown:r,xPos:e,yPos:t,selectedCursorShape:n}),n==="pen"&&r&&ue.jsx(ak,{xPos:e,yPos:t})]}),Ik=({handleCursorShapeSelect:n,clientsLength:e})=>{const[t,r]=je.useState("cursor"),i=["heart","thumbs","pen","cursor"];return ue.jsxs("div",{className:"cursor-selector-container",children:[ue.jsx("div",{className:"cursor-selections-container",children:i.map(s=>ue.jsx("img",{onClick:()=>{n(s),r(s)},className:`${t===s?"cursor-shape-selected":"cursor-shape-not-selected"}`,src:`./icons/icon_${s}.svg`},s))}),ue.jsx("div",{className:"num-users-container",children:ue.jsx("p",{children:e!==1?`${e} users are here`:"1 user here"})})]})},mg=new My.Client({rpcAddr:"https://api.yorkie.dev",apiKey:"cedaovjuioqlk4pjqn6g"}),li=new My.Document("simultaneous-cursors",{enableDevtools:!0}),Ek=()=>{const[n,e]=je.useState([]),t=r=>{li.update((i,s)=>{s.set({cursorShape:r})})};return je.useEffect(()=>{(async()=>{await mg.activate(),li.subscribe("presence",a=>{e(li.getPresences())}),await mg.attach(li,{initialPresence:{cursorShape:"cursor",cursor:{xPos:0,yPos:0},pointerDown:!1}})})();const i=()=>{li.update((a,l)=>{l.set({pointerDown:!1})})},s=()=>{li.update((a,l)=>{l.set({pointerDown:!0})})},o=a=>{li.update((l,c)=>{c.set({cursor:{xPos:a.clientX,yPos:a.clientY}})})};return window.addEventListener("mousedown",s),window.addEventListener("mouseup",i),window.addEventListener("mousemove",o),()=>{window.removeEventListener("mousedown",s),window.removeEventListener("mouseup",i),window.removeEventListener("mousemove",o)}},[]),ue.jsxs("div",{className:"general-container",children:[n.map(({clientID:r,presence:{cursorShape:i,cursor:s,pointerDown:o}})=>s?ue.jsx(Ak,{selectedCursorShape:i,x:s.xPos,y:s.yPos,pointerDown:o},r):null),ue.jsx(Ik,{handleCursorShapeSelect:t,clientsLength:n.length})]})};Pu.createRoot(document.getElementById("root")).render(ue.jsx(Ek,{}));
