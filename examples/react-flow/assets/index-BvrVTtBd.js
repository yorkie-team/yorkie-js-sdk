var BE=Object.defineProperty;var zE=(n,t,e)=>t in n?BE(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var v=(n,t,e)=>zE(n,typeof t!="symbol"?t+"":t,e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const u of a)if(u.type==="childList")for(const c of u.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function e(a){const u={};return a.integrity&&(u.integrity=a.integrity),a.referrerPolicy&&(u.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?u.credentials="include":a.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(a){if(a.ep)return;a.ep=!0;const u=e(a);fetch(a.href,u)}})();function L1(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var tm={exports:{}},tu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ow;function LE(){if(Ow)return tu;Ow=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(i,a,u){var c=null;if(u!==void 0&&(c=""+u),a.key!==void 0&&(c=""+a.key),"key"in a){u={};for(var d in a)d!=="key"&&(u[d]=a[d])}else u=a;return a=u.ref,{$$typeof:n,type:i,key:c,ref:a!==void 0?a:null,props:u}}return tu.Fragment=t,tu.jsx=e,tu.jsxs=e,tu}var Iw;function _E(){return Iw||(Iw=1,tm.exports=LE()),tm.exports}var Z=_E(),em={exports:{}},eu={},nm={exports:{}},rm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rw;function UE(){return Rw||(Rw=1,function(n){function t(D,B){var P=D.length;D.push(B);t:for(;0<P;){var U=P-1>>>1,N=D[U];if(0<a(N,B))D[U]=B,D[P]=N,P=U;else break t}}function e(D){return D.length===0?null:D[0]}function i(D){if(D.length===0)return null;var B=D[0],P=D.pop();if(P!==B){D[0]=P;t:for(var U=0,N=D.length,q=N>>>1;U<q;){var Q=2*(U+1)-1,et=D[Q],ut=Q+1,gt=D[ut];if(0>a(et,P))ut<N&&0>a(gt,et)?(D[U]=gt,D[ut]=P,U=ut):(D[U]=et,D[Q]=P,U=Q);else if(ut<N&&0>a(gt,P))D[U]=gt,D[ut]=P,U=ut;else break t}}return B}function a(D,B){var P=D.sortIndex-B.sortIndex;return P!==0?P:D.id-B.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;n.unstable_now=function(){return u.now()}}else{var c=Date,d=c.now();n.unstable_now=function(){return c.now()-d}}var h=[],g=[],y=1,w=null,p=3,b=!1,x=!1,C=!1,I=!1,O=typeof setTimeout=="function"?setTimeout:null,z=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;function k(D){for(var B=e(g);B!==null;){if(B.callback===null)i(g);else if(B.startTime<=D)i(g),B.sortIndex=B.expirationTime,t(h,B);else break;B=e(g)}}function L(D){if(C=!1,k(D),!x)if(e(h)!==null)x=!0,V||(V=!0,ot());else{var B=e(g);B!==null&&j(L,B.startTime-D)}}var V=!1,H=-1,tt=5,nt=-1;function it(){return I?!0:!(n.unstable_now()-nt<tt)}function ft(){if(I=!1,V){var D=n.unstable_now();nt=D;var B=!0;try{t:{x=!1,C&&(C=!1,z(H),H=-1),b=!0;var P=p;try{e:{for(k(D),w=e(h);w!==null&&!(w.expirationTime>D&&it());){var U=w.callback;if(typeof U=="function"){w.callback=null,p=w.priorityLevel;var N=U(w.expirationTime<=D);if(D=n.unstable_now(),typeof N=="function"){w.callback=N,k(D),B=!0;break e}w===e(h)&&i(h),k(D)}else i(h);w=e(h)}if(w!==null)B=!0;else{var q=e(g);q!==null&&j(L,q.startTime-D),B=!1}}break t}finally{w=null,p=P,b=!1}B=void 0}}finally{B?ot():V=!1}}}var ot;if(typeof E=="function")ot=function(){E(ft)};else if(typeof MessageChannel<"u"){var ct=new MessageChannel,R=ct.port2;ct.port1.onmessage=ft,ot=function(){R.postMessage(null)}}else ot=function(){O(ft,0)};function j(D,B){H=O(function(){D(n.unstable_now())},B)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(D){D.callback=null},n.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):tt=0<D?Math.floor(1e3/D):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_next=function(D){switch(p){case 1:case 2:case 3:var B=3;break;default:B=p}var P=p;p=B;try{return D()}finally{p=P}},n.unstable_requestPaint=function(){I=!0},n.unstable_runWithPriority=function(D,B){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var P=p;p=D;try{return B()}finally{p=P}},n.unstable_scheduleCallback=function(D,B,P){var U=n.unstable_now();switch(typeof P=="object"&&P!==null?(P=P.delay,P=typeof P=="number"&&0<P?U+P:U):P=U,D){case 1:var N=-1;break;case 2:N=250;break;case 5:N=1073741823;break;case 4:N=1e4;break;default:N=5e3}return N=P+N,D={id:y++,callback:B,priorityLevel:D,startTime:P,expirationTime:N,sortIndex:-1},P>U?(D.sortIndex=P,t(g,D),e(h)===null&&D===e(g)&&(C?(z(H),H=-1):C=!0,j(L,P-U))):(D.sortIndex=N,t(h,D),x||b||(x=!0,V||(V=!0,ot()))),D},n.unstable_shouldYield=it,n.unstable_wrapCallback=function(D){var B=p;return function(){var P=p;p=B;try{return D.apply(this,arguments)}finally{p=P}}}}(rm)),rm}var Mw;function qE(){return Mw||(Mw=1,nm.exports=UE()),nm.exports}var im={exports:{}},Rt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bw;function PE(){if(Bw)return Rt;Bw=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),w=Symbol.iterator;function p(N){return N===null||typeof N!="object"?null:(N=w&&N[w]||N["@@iterator"],typeof N=="function"?N:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,C={};function I(N,q,Q){this.props=N,this.context=q,this.refs=C,this.updater=Q||b}I.prototype.isReactComponent={},I.prototype.setState=function(N,q){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,q,"setState")},I.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function O(){}O.prototype=I.prototype;function z(N,q,Q){this.props=N,this.context=q,this.refs=C,this.updater=Q||b}var E=z.prototype=new O;E.constructor=z,x(E,I.prototype),E.isPureReactComponent=!0;var k=Array.isArray,L={H:null,A:null,T:null,S:null,V:null},V=Object.prototype.hasOwnProperty;function H(N,q,Q,et,ut,gt){return Q=gt.ref,{$$typeof:n,type:N,key:q,ref:Q!==void 0?Q:null,props:gt}}function tt(N,q){return H(N.type,q,void 0,void 0,void 0,N.props)}function nt(N){return typeof N=="object"&&N!==null&&N.$$typeof===n}function it(N){var q={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(Q){return q[Q]})}var ft=/\/+/g;function ot(N,q){return typeof N=="object"&&N!==null&&N.key!=null?it(""+N.key):q.toString(36)}function ct(){}function R(N){switch(N.status){case"fulfilled":return N.value;case"rejected":throw N.reason;default:switch(typeof N.status=="string"?N.then(ct,ct):(N.status="pending",N.then(function(q){N.status==="pending"&&(N.status="fulfilled",N.value=q)},function(q){N.status==="pending"&&(N.status="rejected",N.reason=q)})),N.status){case"fulfilled":return N.value;case"rejected":throw N.reason}}throw N}function j(N,q,Q,et,ut){var gt=typeof N;(gt==="undefined"||gt==="boolean")&&(N=null);var dt=!1;if(N===null)dt=!0;else switch(gt){case"bigint":case"string":case"number":dt=!0;break;case"object":switch(N.$$typeof){case n:case t:dt=!0;break;case y:return dt=N._init,j(dt(N._payload),q,Q,et,ut)}}if(dt)return ut=ut(N),dt=et===""?"."+ot(N,0):et,k(ut)?(Q="",dt!=null&&(Q=dt.replace(ft,"$&/")+"/"),j(ut,q,Q,"",function(Dt){return Dt})):ut!=null&&(nt(ut)&&(ut=tt(ut,Q+(ut.key==null||N&&N.key===ut.key?"":(""+ut.key).replace(ft,"$&/")+"/")+dt)),q.push(ut)),1;dt=0;var mt=et===""?".":et+":";if(k(N))for(var pt=0;pt<N.length;pt++)et=N[pt],gt=mt+ot(et,pt),dt+=j(et,q,Q,gt,ut);else if(pt=p(N),typeof pt=="function")for(N=pt.call(N),pt=0;!(et=N.next()).done;)et=et.value,gt=mt+ot(et,pt++),dt+=j(et,q,Q,gt,ut);else if(gt==="object"){if(typeof N.then=="function")return j(R(N),q,Q,et,ut);throw q=String(N),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.")}return dt}function D(N,q,Q){if(N==null)return N;var et=[],ut=0;return j(N,et,"","",function(gt){return q.call(Q,gt,ut++)}),et}function B(N){if(N._status===-1){var q=N._result;q=q(),q.then(function(Q){(N._status===0||N._status===-1)&&(N._status=1,N._result=Q)},function(Q){(N._status===0||N._status===-1)&&(N._status=2,N._result=Q)}),N._status===-1&&(N._status=0,N._result=q)}if(N._status===1)return N._result.default;throw N._result}var P=typeof reportError=="function"?reportError:function(N){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof N=="object"&&N!==null&&typeof N.message=="string"?String(N.message):String(N),error:N});if(!window.dispatchEvent(q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",N);return}console.error(N)};function U(){}return Rt.Children={map:D,forEach:function(N,q,Q){D(N,function(){q.apply(this,arguments)},Q)},count:function(N){var q=0;return D(N,function(){q++}),q},toArray:function(N){return D(N,function(q){return q})||[]},only:function(N){if(!nt(N))throw Error("React.Children.only expected to receive a single React element child.");return N}},Rt.Component=I,Rt.Fragment=e,Rt.Profiler=a,Rt.PureComponent=z,Rt.StrictMode=i,Rt.Suspense=h,Rt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=L,Rt.__COMPILER_RUNTIME={__proto__:null,c:function(N){return L.H.useMemoCache(N)}},Rt.cache=function(N){return function(){return N.apply(null,arguments)}},Rt.cloneElement=function(N,q,Q){if(N==null)throw Error("The argument must be a React element, but you passed "+N+".");var et=x({},N.props),ut=N.key,gt=void 0;if(q!=null)for(dt in q.ref!==void 0&&(gt=void 0),q.key!==void 0&&(ut=""+q.key),q)!V.call(q,dt)||dt==="key"||dt==="__self"||dt==="__source"||dt==="ref"&&q.ref===void 0||(et[dt]=q[dt]);var dt=arguments.length-2;if(dt===1)et.children=Q;else if(1<dt){for(var mt=Array(dt),pt=0;pt<dt;pt++)mt[pt]=arguments[pt+2];et.children=mt}return H(N.type,ut,void 0,void 0,gt,et)},Rt.createContext=function(N){return N={$$typeof:c,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null},N.Provider=N,N.Consumer={$$typeof:u,_context:N},N},Rt.createElement=function(N,q,Q){var et,ut={},gt=null;if(q!=null)for(et in q.key!==void 0&&(gt=""+q.key),q)V.call(q,et)&&et!=="key"&&et!=="__self"&&et!=="__source"&&(ut[et]=q[et]);var dt=arguments.length-2;if(dt===1)ut.children=Q;else if(1<dt){for(var mt=Array(dt),pt=0;pt<dt;pt++)mt[pt]=arguments[pt+2];ut.children=mt}if(N&&N.defaultProps)for(et in dt=N.defaultProps,dt)ut[et]===void 0&&(ut[et]=dt[et]);return H(N,gt,void 0,void 0,null,ut)},Rt.createRef=function(){return{current:null}},Rt.forwardRef=function(N){return{$$typeof:d,render:N}},Rt.isValidElement=nt,Rt.lazy=function(N){return{$$typeof:y,_payload:{_status:-1,_result:N},_init:B}},Rt.memo=function(N,q){return{$$typeof:g,type:N,compare:q===void 0?null:q}},Rt.startTransition=function(N){var q=L.T,Q={};L.T=Q;try{var et=N(),ut=L.S;ut!==null&&ut(Q,et),typeof et=="object"&&et!==null&&typeof et.then=="function"&&et.then(U,P)}catch(gt){P(gt)}finally{L.T=q}},Rt.unstable_useCacheRefresh=function(){return L.H.useCacheRefresh()},Rt.use=function(N){return L.H.use(N)},Rt.useActionState=function(N,q,Q){return L.H.useActionState(N,q,Q)},Rt.useCallback=function(N,q){return L.H.useCallback(N,q)},Rt.useContext=function(N){return L.H.useContext(N)},Rt.useDebugValue=function(){},Rt.useDeferredValue=function(N,q){return L.H.useDeferredValue(N,q)},Rt.useEffect=function(N,q,Q){var et=L.H;if(typeof Q=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return et.useEffect(N,q)},Rt.useId=function(){return L.H.useId()},Rt.useImperativeHandle=function(N,q,Q){return L.H.useImperativeHandle(N,q,Q)},Rt.useInsertionEffect=function(N,q){return L.H.useInsertionEffect(N,q)},Rt.useLayoutEffect=function(N,q){return L.H.useLayoutEffect(N,q)},Rt.useMemo=function(N,q){return L.H.useMemo(N,q)},Rt.useOptimistic=function(N,q){return L.H.useOptimistic(N,q)},Rt.useReducer=function(N,q,Q){return L.H.useReducer(N,q,Q)},Rt.useRef=function(N){return L.H.useRef(N)},Rt.useState=function(N){return L.H.useState(N)},Rt.useSyncExternalStore=function(N,q,Q){return L.H.useSyncExternalStore(N,q,Q)},Rt.useTransition=function(){return L.H.useTransition()},Rt.version="19.1.0",Rt}var zw;function _u(){return zw||(zw=1,im.exports=PE()),im.exports}var sm={exports:{}},qe={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lw;function JE(){if(Lw)return qe;Lw=1;var n=_u();function t(h){var g="https://react.dev/errors/"+h;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)g+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+h+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var i={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},a=Symbol.for("react.portal");function u(h,g,y){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:w==null?null:""+w,children:h,containerInfo:g,implementation:y}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(h,g){if(h==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return qe.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,qe.createPortal=function(h,g){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(t(299));return u(h,g,null,y)},qe.flushSync=function(h){var g=c.T,y=i.p;try{if(c.T=null,i.p=2,h)return h()}finally{c.T=g,i.p=y,i.d.f()}},qe.preconnect=function(h,g){typeof h=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,i.d.C(h,g))},qe.prefetchDNS=function(h){typeof h=="string"&&i.d.D(h)},qe.preinit=function(h,g){if(typeof h=="string"&&g&&typeof g.as=="string"){var y=g.as,w=d(y,g.crossOrigin),p=typeof g.integrity=="string"?g.integrity:void 0,b=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;y==="style"?i.d.S(h,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:w,integrity:p,fetchPriority:b}):y==="script"&&i.d.X(h,{crossOrigin:w,integrity:p,fetchPriority:b,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},qe.preinitModule=function(h,g){if(typeof h=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var y=d(g.as,g.crossOrigin);i.d.M(h,{crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&i.d.M(h)},qe.preload=function(h,g){if(typeof h=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var y=g.as,w=d(y,g.crossOrigin);i.d.L(h,y,{crossOrigin:w,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},qe.preloadModule=function(h,g){if(typeof h=="string")if(g){var y=d(g.as,g.crossOrigin);i.d.m(h,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else i.d.m(h)},qe.requestFormReset=function(h){i.d.r(h)},qe.unstable_batchedUpdates=function(h,g){return h(g)},qe.useFormState=function(h,g,y){return c.H.useFormState(h,g,y)},qe.useFormStatus=function(){return c.H.useHostTransitionStatus()},qe.version="19.1.0",qe}var _w;function _1(){if(_w)return sm.exports;_w=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),sm.exports=JE(),sm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uw;function HE(){if(Uw)return eu;Uw=1;var n=qE(),t=_u(),e=_1();function i(r){var s="https://react.dev/errors/"+r;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function u(r){var s=r,o=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(o=s.return),r=s.return;while(r)}return s.tag===3?o:null}function c(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function d(r){if(u(r)!==r)throw Error(i(188))}function h(r){var s=r.alternate;if(!s){if(s=u(r),s===null)throw Error(i(188));return s!==r?null:r}for(var o=r,l=s;;){var f=o.return;if(f===null)break;var m=f.alternate;if(m===null){if(l=f.return,l!==null){o=l;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===o)return d(f),r;if(m===l)return d(f),s;m=m.sibling}throw Error(i(188))}if(o.return!==l.return)o=f,l=m;else{for(var S=!1,T=f.child;T;){if(T===o){S=!0,o=f,l=m;break}if(T===l){S=!0,l=f,o=m;break}T=T.sibling}if(!S){for(T=m.child;T;){if(T===o){S=!0,o=m,l=f;break}if(T===l){S=!0,l=m,o=f;break}T=T.sibling}if(!S)throw Error(i(189))}}if(o.alternate!==l)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?r:s}function g(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r;for(r=r.child;r!==null;){if(s=g(r),s!==null)return s;r=r.sibling}return null}var y=Object.assign,w=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),O=Symbol.for("react.provider"),z=Symbol.for("react.consumer"),E=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),V=Symbol.for("react.suspense_list"),H=Symbol.for("react.memo"),tt=Symbol.for("react.lazy"),nt=Symbol.for("react.activity"),it=Symbol.for("react.memo_cache_sentinel"),ft=Symbol.iterator;function ot(r){return r===null||typeof r!="object"?null:(r=ft&&r[ft]||r["@@iterator"],typeof r=="function"?r:null)}var ct=Symbol.for("react.client.reference");function R(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===ct?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case x:return"Fragment";case I:return"Profiler";case C:return"StrictMode";case L:return"Suspense";case V:return"SuspenseList";case nt:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case b:return"Portal";case E:return(r.displayName||"Context")+".Provider";case z:return(r._context.displayName||"Context")+".Consumer";case k:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case H:return s=r.displayName||null,s!==null?s:R(r.type)||"Memo";case tt:s=r._payload,r=r._init;try{return R(r(s))}catch{}}return null}var j=Array.isArray,D=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,B=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,P={pending:!1,data:null,method:null,action:null},U=[],N=-1;function q(r){return{current:r}}function Q(r){0>N||(r.current=U[N],U[N]=null,N--)}function et(r,s){N++,U[N]=r.current,r.current=s}var ut=q(null),gt=q(null),dt=q(null),mt=q(null);function pt(r,s){switch(et(dt,s),et(gt,r),et(ut,null),s.nodeType){case 9:case 11:r=(r=s.documentElement)&&(r=r.namespaceURI)?iw(r):0;break;default:if(r=s.tagName,s=s.namespaceURI)s=iw(s),r=sw(s,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}Q(ut),et(ut,r)}function Dt(){Q(ut),Q(gt),Q(dt)}function Vt(r){r.memoizedState!==null&&et(mt,r);var s=ut.current,o=sw(s,r.type);s!==o&&(et(gt,r),et(ut,o))}function Ot(r){gt.current===r&&(Q(ut),Q(gt)),mt.current===r&&(Q(mt),Kl._currentValue=P)}var St=Object.prototype.hasOwnProperty,Yt=n.unstable_scheduleCallback,qt=n.unstable_cancelCallback,Se=n.unstable_shouldYield,en=n.unstable_requestPaint,Oe=n.unstable_now,Fo=n.unstable_getCurrentPriorityLevel,Ma=n.unstable_ImmediatePriority,rs=n.unstable_UserBlockingPriority,is=n.unstable_NormalPriority,Ks=n.unstable_LowPriority,ss=n.unstable_IdlePriority,Zo=n.log,Fs=n.unstable_setDisableYieldValue,qn=null,Ee=null;function tr(r){if(typeof Zo=="function"&&Fs(r),Ee&&typeof Ee.setStrictMode=="function")try{Ee.setStrictMode(qn,r)}catch{}}var Ie=Math.clz32?Math.clz32:$d,Jd=Math.log,Hd=Math.LN2;function $d(r){return r>>>=0,r===0?32:31-(Jd(r)/Hd|0)|0}var Ba=256,za=4194304;function Nr(r){var s=r&42;if(s!==0)return s;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function La(r,s,o){var l=r.pendingLanes;if(l===0)return 0;var f=0,m=r.suspendedLanes,S=r.pingedLanes;r=r.warmLanes;var T=l&134217727;return T!==0?(l=T&~m,l!==0?f=Nr(l):(S&=T,S!==0?f=Nr(S):o||(o=T&~r,o!==0&&(f=Nr(o))))):(T=l&~m,T!==0?f=Nr(T):S!==0?f=Nr(S):o||(o=l&~r,o!==0&&(f=Nr(o)))),f===0?0:s!==0&&s!==f&&(s&m)===0&&(m=f&-f,o=s&-s,m>=o||m===32&&(o&4194048)!==0)?s:f}function Zs(r,s){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&s)===0}function Vd(r,s){switch(r){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Xu(){var r=Ba;return Ba<<=1,(Ba&4194048)===0&&(Ba=256),r}function Ku(){var r=za;return za<<=1,(za&62914560)===0&&(za=4194304),r}function Qo(r){for(var s=[],o=0;31>o;o++)s.push(r);return s}function Qs(r,s){r.pendingLanes|=s,s!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function jd(r,s,o,l,f,m){var S=r.pendingLanes;r.pendingLanes=o,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=o,r.entangledLanes&=o,r.errorRecoveryDisabledLanes&=o,r.shellSuspendCounter=0;var T=r.entanglements,M=r.expirationTimes,G=r.hiddenUpdates;for(o=S&~o;0<o;){var st=31-Ie(o),lt=1<<st;T[st]=0,M[st]=-1;var K=G[st];if(K!==null)for(G[st]=null,st=0;st<K.length;st++){var F=K[st];F!==null&&(F.lane&=-536870913)}o&=~lt}l!==0&&Wo(r,l,0),m!==0&&f===0&&r.tag!==0&&(r.suspendedLanes|=m&~(S&~s))}function Wo(r,s,o){r.pendingLanes|=s,r.suspendedLanes&=~s;var l=31-Ie(s);r.entangledLanes|=s,r.entanglements[l]=r.entanglements[l]|1073741824|o&4194090}function Fu(r,s){var o=r.entangledLanes|=s;for(r=r.entanglements;o;){var l=31-Ie(o),f=1<<l;f&s|r[l]&s&&(r[l]|=s),o&=~f}}function tl(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function el(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function Zu(){var r=B.p;return r!==0?r:(r=window.event,r===void 0?32:Aw(r.type))}function Yd(r,s){var o=B.p;try{return B.p=r,s()}finally{B.p=o}}var er=Math.random().toString(36).slice(2),Ne="__reactFiber$"+er,_e="__reactProps$"+er,as="__reactContainer$"+er,nl="__reactEvents$"+er,Gd="__reactListeners$"+er,Xd="__reactHandles$"+er,Qu="__reactResources$"+er,Ws="__reactMarker$"+er;function rl(r){delete r[Ne],delete r[_e],delete r[nl],delete r[Gd],delete r[Xd]}function Cr(r){var s=r[Ne];if(s)return s;for(var o=r.parentNode;o;){if(s=o[as]||o[Ne]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(r=uw(r);r!==null;){if(o=r[Ne])return o;r=uw(r)}return s}r=o,o=r.parentNode}return null}function Dr(r){if(r=r[Ne]||r[as]){var s=r.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return r}return null}function ta(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r.stateNode;throw Error(i(33))}function os(r){var s=r[Qu];return s||(s=r[Qu]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function ye(r){r[Ws]=!0}var Wu=new Set,tc={};function kr(r,s){ls(r,s),ls(r+"Capture",s)}function ls(r,s){for(tc[r]=s,r=0;r<s.length;r++)Wu.add(s[r])}var ec=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),nc={},rc={};function Kd(r){return St.call(rc,r)?!0:St.call(nc,r)?!1:ec.test(r)?rc[r]=!0:(nc[r]=!0,!1)}function _a(r,s,o){if(Kd(s))if(o===null)r.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":r.removeAttribute(s);return;case"boolean":var l=s.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){r.removeAttribute(s);return}}r.setAttribute(s,""+o)}}function Ua(r,s,o){if(o===null)r.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(s);return}r.setAttribute(s,""+o)}}function Pn(r,s,o,l){if(l===null)r.removeAttribute(o);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttributeNS(s,o,""+l)}}var il,sl;function us(r){if(il===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);il=s&&s[1]||"",sl=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+il+r+sl}var al=!1;function ol(r,s){if(!r||al)return"";al=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(s){var lt=function(){throw Error()};if(Object.defineProperty(lt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(lt,[])}catch(F){var K=F}Reflect.construct(r,[],lt)}else{try{lt.call()}catch(F){K=F}r.call(lt.prototype)}}else{try{throw Error()}catch(F){K=F}(lt=r())&&typeof lt.catch=="function"&&lt.catch(function(){})}}catch(F){if(F&&K&&typeof F.stack=="string")return[F.stack,K.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=l.DetermineComponentFrameRoot(),S=m[0],T=m[1];if(S&&T){var M=S.split(`
`),G=T.split(`
`);for(f=l=0;l<M.length&&!M[l].includes("DetermineComponentFrameRoot");)l++;for(;f<G.length&&!G[f].includes("DetermineComponentFrameRoot");)f++;if(l===M.length||f===G.length)for(l=M.length-1,f=G.length-1;1<=l&&0<=f&&M[l]!==G[f];)f--;for(;1<=l&&0<=f;l--,f--)if(M[l]!==G[f]){if(l!==1||f!==1)do if(l--,f--,0>f||M[l]!==G[f]){var st=`
`+M[l].replace(" at new "," at ");return r.displayName&&st.includes("<anonymous>")&&(st=st.replace("<anonymous>",r.displayName)),st}while(1<=l&&0<=f);break}}}finally{al=!1,Error.prepareStackTrace=o}return(o=r?r.displayName||r.name:"")?us(o):""}function Fd(r){switch(r.tag){case 26:case 27:case 5:return us(r.type);case 16:return us("Lazy");case 13:return us("Suspense");case 19:return us("SuspenseList");case 0:case 15:return ol(r.type,!1);case 11:return ol(r.type.render,!1);case 1:return ol(r.type,!0);case 31:return us("Activity");default:return""}}function ic(r){try{var s="";do s+=Fd(r),r=r.return;while(r);return s}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function Ve(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function sc(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function qa(r){var s=sc(r)?"checked":"value",o=Object.getOwnPropertyDescriptor(r.constructor.prototype,s),l=""+r[s];if(!r.hasOwnProperty(s)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var f=o.get,m=o.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return f.call(this)},set:function(S){l=""+S,m.call(this,S)}}),Object.defineProperty(r,s,{enumerable:o.enumerable}),{getValue:function(){return l},setValue:function(S){l=""+S},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function Pa(r){r._valueTracker||(r._valueTracker=qa(r))}function ac(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var o=s.getValue(),l="";return r&&(l=sc(r)?r.checked?"true":"false":r.value),r=l,r!==o?(s.setValue(r),!0):!1}function cs(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var Zd=/[\n"\\]/g;function je(r){return r.replace(Zd,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Ja(r,s,o,l,f,m,S,T){r.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?r.type=S:r.removeAttribute("type"),s!=null?S==="number"?(s===0&&r.value===""||r.value!=s)&&(r.value=""+Ve(s)):r.value!==""+Ve(s)&&(r.value=""+Ve(s)):S!=="submit"&&S!=="reset"||r.removeAttribute("value"),s!=null?Qd(r,S,Ve(s)):o!=null?Qd(r,S,Ve(o)):l!=null&&r.removeAttribute("value"),f==null&&m!=null&&(r.defaultChecked=!!m),f!=null&&(r.checked=f&&typeof f!="function"&&typeof f!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?r.name=""+Ve(T):r.removeAttribute("name")}function ep(r,s,o,l,f,m,S,T){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(r.type=m),s!=null||o!=null){if(!(m!=="submit"&&m!=="reset"||s!=null))return;o=o!=null?""+Ve(o):"",s=s!=null?""+Ve(s):o,T||s===r.value||(r.value=s),r.defaultValue=s}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,r.checked=T?r.checked:!!l,r.defaultChecked=!!l,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(r.name=S)}function Qd(r,s,o){s==="number"&&cs(r.ownerDocument)===r||r.defaultValue===""+o||(r.defaultValue=""+o)}function Ha(r,s,o,l){if(r=r.options,s){s={};for(var f=0;f<o.length;f++)s["$"+o[f]]=!0;for(o=0;o<r.length;o++)f=s.hasOwnProperty("$"+r[o].value),r[o].selected!==f&&(r[o].selected=f),f&&l&&(r[o].defaultSelected=!0)}else{for(o=""+Ve(o),s=null,f=0;f<r.length;f++){if(r[f].value===o){r[f].selected=!0,l&&(r[f].defaultSelected=!0);return}s!==null||r[f].disabled||(s=r[f])}s!==null&&(s.selected=!0)}}function np(r,s,o){if(s!=null&&(s=""+Ve(s),s!==r.value&&(r.value=s),o==null)){r.defaultValue!==s&&(r.defaultValue=s);return}r.defaultValue=o!=null?""+Ve(o):""}function rp(r,s,o,l){if(s==null){if(l!=null){if(o!=null)throw Error(i(92));if(j(l)){if(1<l.length)throw Error(i(93));l=l[0]}o=l}o==null&&(o=""),s=o}o=Ve(s),r.defaultValue=o,l=r.textContent,l===o&&l!==""&&l!==null&&(r.value=l)}function $a(r,s){if(s){var o=r.firstChild;if(o&&o===r.lastChild&&o.nodeType===3){o.nodeValue=s;return}}r.textContent=s}var IT=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ip(r,s,o){var l=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?l?r.setProperty(s,""):s==="float"?r.cssFloat="":r[s]="":l?r.setProperty(s,o):typeof o!="number"||o===0||IT.has(s)?s==="float"?r.cssFloat=o:r[s]=(""+o).trim():r[s]=o+"px"}function sp(r,s,o){if(s!=null&&typeof s!="object")throw Error(i(62));if(r=r.style,o!=null){for(var l in o)!o.hasOwnProperty(l)||s!=null&&s.hasOwnProperty(l)||(l.indexOf("--")===0?r.setProperty(l,""):l==="float"?r.cssFloat="":r[l]="");for(var f in s)l=s[f],s.hasOwnProperty(f)&&o[f]!==l&&ip(r,f,l)}else for(var m in s)s.hasOwnProperty(m)&&ip(r,m,s[m])}function Wd(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var RT=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),MT=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function oc(r){return MT.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}var th=null;function eh(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Va=null,ja=null;function ap(r){var s=Dr(r);if(s&&(r=s.stateNode)){var o=r[_e]||null;t:switch(r=s.stateNode,s.type){case"input":if(Ja(r,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=r;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+je(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var l=o[s];if(l!==r&&l.form===r.form){var f=l[_e]||null;if(!f)throw Error(i(90));Ja(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(s=0;s<o.length;s++)l=o[s],l.form===r.form&&ac(l)}break t;case"textarea":np(r,o.value,o.defaultValue);break t;case"select":s=o.value,s!=null&&Ha(r,!!o.multiple,s,!1)}}}var nh=!1;function op(r,s,o){if(nh)return r(s,o);nh=!0;try{var l=r(s);return l}finally{if(nh=!1,(Va!==null||ja!==null)&&(Yc(),Va&&(s=Va,r=ja,ja=Va=null,ap(s),r)))for(s=0;s<r.length;s++)ap(r[s])}}function ll(r,s){var o=r.stateNode;if(o===null)return null;var l=o[_e]||null;if(l===null)return null;o=l[s];t:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(r=r.type,l=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!l;break t;default:r=!1}if(r)return null;if(o&&typeof o!="function")throw Error(i(231,s,typeof o));return o}var Or=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),rh=!1;if(Or)try{var ul={};Object.defineProperty(ul,"passive",{get:function(){rh=!0}}),window.addEventListener("test",ul,ul),window.removeEventListener("test",ul,ul)}catch{rh=!1}var fs=null,ih=null,lc=null;function lp(){if(lc)return lc;var r,s=ih,o=s.length,l,f="value"in fs?fs.value:fs.textContent,m=f.length;for(r=0;r<o&&s[r]===f[r];r++);var S=o-r;for(l=1;l<=S&&s[o-l]===f[m-l];l++);return lc=f.slice(r,1<l?1-l:void 0)}function uc(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function cc(){return!0}function up(){return!1}function Ye(r){function s(o,l,f,m,S){this._reactName=o,this._targetInst=f,this.type=l,this.nativeEvent=m,this.target=S,this.currentTarget=null;for(var T in r)r.hasOwnProperty(T)&&(o=r[T],this[T]=o?o(m):m[T]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?cc:up,this.isPropagationStopped=up,this}return y(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=cc)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=cc)},persist:function(){},isPersistent:cc}),s}var ea={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fc=Ye(ea),cl=y({},ea,{view:0,detail:0}),BT=Ye(cl),sh,ah,fl,dc=y({},cl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:lh,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==fl&&(fl&&r.type==="mousemove"?(sh=r.screenX-fl.screenX,ah=r.screenY-fl.screenY):ah=sh=0,fl=r),sh)},movementY:function(r){return"movementY"in r?r.movementY:ah}}),cp=Ye(dc),zT=y({},dc,{dataTransfer:0}),LT=Ye(zT),_T=y({},cl,{relatedTarget:0}),oh=Ye(_T),UT=y({},ea,{animationName:0,elapsedTime:0,pseudoElement:0}),qT=Ye(UT),PT=y({},ea,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),JT=Ye(PT),HT=y({},ea,{data:0}),fp=Ye(HT),$T={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},VT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function YT(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=jT[r])?!!s[r]:!1}function lh(){return YT}var GT=y({},cl,{key:function(r){if(r.key){var s=$T[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=uc(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?VT[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:lh,charCode:function(r){return r.type==="keypress"?uc(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?uc(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),XT=Ye(GT),KT=y({},dc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),dp=Ye(KT),FT=y({},cl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:lh}),ZT=Ye(FT),QT=y({},ea,{propertyName:0,elapsedTime:0,pseudoElement:0}),WT=Ye(QT),tA=y({},dc,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),eA=Ye(tA),nA=y({},ea,{newState:0,oldState:0}),rA=Ye(nA),iA=[9,13,27,32],uh=Or&&"CompositionEvent"in window,dl=null;Or&&"documentMode"in document&&(dl=document.documentMode);var sA=Or&&"TextEvent"in window&&!dl,hp=Or&&(!uh||dl&&8<dl&&11>=dl),gp=" ",mp=!1;function yp(r,s){switch(r){case"keyup":return iA.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function pp(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Ya=!1;function aA(r,s){switch(r){case"compositionend":return pp(s);case"keypress":return s.which!==32?null:(mp=!0,gp);case"textInput":return r=s.data,r===gp&&mp?null:r;default:return null}}function oA(r,s){if(Ya)return r==="compositionend"||!uh&&yp(r,s)?(r=lp(),lc=ih=fs=null,Ya=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return hp&&s.locale!=="ko"?null:s.data;default:return null}}var lA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vp(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!lA[r.type]:s==="textarea"}function wp(r,s,o,l){Va?ja?ja.push(l):ja=[l]:Va=l,s=Qc(s,"onChange"),0<s.length&&(o=new fc("onChange","change",null,o,l),r.push({event:o,listeners:s}))}var hl=null,gl=null;function uA(r){Wv(r,0)}function hc(r){var s=ta(r);if(ac(s))return r}function bp(r,s){if(r==="change")return s}var Sp=!1;if(Or){var ch;if(Or){var fh="oninput"in document;if(!fh){var xp=document.createElement("div");xp.setAttribute("oninput","return;"),fh=typeof xp.oninput=="function"}ch=fh}else ch=!1;Sp=ch&&(!document.documentMode||9<document.documentMode)}function Tp(){hl&&(hl.detachEvent("onpropertychange",Ap),gl=hl=null)}function Ap(r){if(r.propertyName==="value"&&hc(gl)){var s=[];wp(s,gl,r,eh(r)),op(uA,s)}}function cA(r,s,o){r==="focusin"?(Tp(),hl=s,gl=o,hl.attachEvent("onpropertychange",Ap)):r==="focusout"&&Tp()}function fA(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return hc(gl)}function dA(r,s){if(r==="click")return hc(s)}function hA(r,s){if(r==="input"||r==="change")return hc(s)}function gA(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var nn=typeof Object.is=="function"?Object.is:gA;function ml(r,s){if(nn(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var o=Object.keys(r),l=Object.keys(s);if(o.length!==l.length)return!1;for(l=0;l<o.length;l++){var f=o[l];if(!St.call(s,f)||!nn(r[f],s[f]))return!1}return!0}function Ep(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Np(r,s){var o=Ep(r);r=0;for(var l;o;){if(o.nodeType===3){if(l=r+o.textContent.length,r<=s&&l>=s)return{node:o,offset:s-r};r=l}t:{for(;o;){if(o.nextSibling){o=o.nextSibling;break t}o=o.parentNode}o=void 0}o=Ep(o)}}function Cp(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?Cp(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function Dp(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var s=cs(r.document);s instanceof r.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)r=s.contentWindow;else break;s=cs(r.document)}return s}function dh(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}var mA=Or&&"documentMode"in document&&11>=document.documentMode,Ga=null,hh=null,yl=null,gh=!1;function kp(r,s,o){var l=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;gh||Ga==null||Ga!==cs(l)||(l=Ga,"selectionStart"in l&&dh(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),yl&&ml(yl,l)||(yl=l,l=Qc(hh,"onSelect"),0<l.length&&(s=new fc("onSelect","select",null,s,o),r.push({event:s,listeners:l}),s.target=Ga)))}function na(r,s){var o={};return o[r.toLowerCase()]=s.toLowerCase(),o["Webkit"+r]="webkit"+s,o["Moz"+r]="moz"+s,o}var Xa={animationend:na("Animation","AnimationEnd"),animationiteration:na("Animation","AnimationIteration"),animationstart:na("Animation","AnimationStart"),transitionrun:na("Transition","TransitionRun"),transitionstart:na("Transition","TransitionStart"),transitioncancel:na("Transition","TransitionCancel"),transitionend:na("Transition","TransitionEnd")},mh={},Op={};Or&&(Op=document.createElement("div").style,"AnimationEvent"in window||(delete Xa.animationend.animation,delete Xa.animationiteration.animation,delete Xa.animationstart.animation),"TransitionEvent"in window||delete Xa.transitionend.transition);function ra(r){if(mh[r])return mh[r];if(!Xa[r])return r;var s=Xa[r],o;for(o in s)if(s.hasOwnProperty(o)&&o in Op)return mh[r]=s[o];return r}var Ip=ra("animationend"),Rp=ra("animationiteration"),Mp=ra("animationstart"),yA=ra("transitionrun"),pA=ra("transitionstart"),vA=ra("transitioncancel"),Bp=ra("transitionend"),zp=new Map,yh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");yh.push("scrollEnd");function Jn(r,s){zp.set(r,s),kr(s,[r])}var Lp=new WeakMap;function yn(r,s){if(typeof r=="object"&&r!==null){var o=Lp.get(r);return o!==void 0?o:(s={value:r,source:s,stack:ic(s)},Lp.set(r,s),s)}return{value:r,source:s,stack:ic(s)}}var pn=[],Ka=0,ph=0;function gc(){for(var r=Ka,s=ph=Ka=0;s<r;){var o=pn[s];pn[s++]=null;var l=pn[s];pn[s++]=null;var f=pn[s];pn[s++]=null;var m=pn[s];if(pn[s++]=null,l!==null&&f!==null){var S=l.pending;S===null?f.next=f:(f.next=S.next,S.next=f),l.pending=f}m!==0&&_p(o,f,m)}}function mc(r,s,o,l){pn[Ka++]=r,pn[Ka++]=s,pn[Ka++]=o,pn[Ka++]=l,ph|=l,r.lanes|=l,r=r.alternate,r!==null&&(r.lanes|=l)}function vh(r,s,o,l){return mc(r,s,o,l),yc(r)}function Fa(r,s){return mc(r,null,null,s),yc(r)}function _p(r,s,o){r.lanes|=o;var l=r.alternate;l!==null&&(l.lanes|=o);for(var f=!1,m=r.return;m!==null;)m.childLanes|=o,l=m.alternate,l!==null&&(l.childLanes|=o),m.tag===22&&(r=m.stateNode,r===null||r._visibility&1||(f=!0)),r=m,m=m.return;return r.tag===3?(m=r.stateNode,f&&s!==null&&(f=31-Ie(o),r=m.hiddenUpdates,l=r[f],l===null?r[f]=[s]:l.push(s),s.lane=o|536870912),m):null}function yc(r){if(50<Jl)throw Jl=0,Ag=null,Error(i(185));for(var s=r.return;s!==null;)r=s,s=r.return;return r.tag===3?r.stateNode:null}var Za={};function wA(r,s,o,l){this.tag=r,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function rn(r,s,o,l){return new wA(r,s,o,l)}function wh(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Ir(r,s){var o=r.alternate;return o===null?(o=rn(r.tag,s,r.key,r.mode),o.elementType=r.elementType,o.type=r.type,o.stateNode=r.stateNode,o.alternate=r,r.alternate=o):(o.pendingProps=s,o.type=r.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=r.flags&65011712,o.childLanes=r.childLanes,o.lanes=r.lanes,o.child=r.child,o.memoizedProps=r.memoizedProps,o.memoizedState=r.memoizedState,o.updateQueue=r.updateQueue,s=r.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=r.sibling,o.index=r.index,o.ref=r.ref,o.refCleanup=r.refCleanup,o}function Up(r,s){r.flags&=65011714;var o=r.alternate;return o===null?(r.childLanes=0,r.lanes=s,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,s=o.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),r}function pc(r,s,o,l,f,m){var S=0;if(l=r,typeof r=="function")wh(r)&&(S=1);else if(typeof r=="string")S=SE(r,o,ut.current)?26:r==="html"||r==="head"||r==="body"?27:5;else t:switch(r){case nt:return r=rn(31,o,s,f),r.elementType=nt,r.lanes=m,r;case x:return ia(o.children,f,m,s);case C:S=8,f|=24;break;case I:return r=rn(12,o,s,f|2),r.elementType=I,r.lanes=m,r;case L:return r=rn(13,o,s,f),r.elementType=L,r.lanes=m,r;case V:return r=rn(19,o,s,f),r.elementType=V,r.lanes=m,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case O:case E:S=10;break t;case z:S=9;break t;case k:S=11;break t;case H:S=14;break t;case tt:S=16,l=null;break t}S=29,o=Error(i(130,r===null?"null":typeof r,"")),l=null}return s=rn(S,o,s,f),s.elementType=r,s.type=l,s.lanes=m,s}function ia(r,s,o,l){return r=rn(7,r,l,s),r.lanes=o,r}function bh(r,s,o){return r=rn(6,r,null,s),r.lanes=o,r}function Sh(r,s,o){return s=rn(4,r.children!==null?r.children:[],r.key,s),s.lanes=o,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}var Qa=[],Wa=0,vc=null,wc=0,vn=[],wn=0,sa=null,Rr=1,Mr="";function aa(r,s){Qa[Wa++]=wc,Qa[Wa++]=vc,vc=r,wc=s}function qp(r,s,o){vn[wn++]=Rr,vn[wn++]=Mr,vn[wn++]=sa,sa=r;var l=Rr;r=Mr;var f=32-Ie(l)-1;l&=~(1<<f),o+=1;var m=32-Ie(s)+f;if(30<m){var S=f-f%5;m=(l&(1<<S)-1).toString(32),l>>=S,f-=S,Rr=1<<32-Ie(s)+f|o<<f|l,Mr=m+r}else Rr=1<<m|o<<f|l,Mr=r}function xh(r){r.return!==null&&(aa(r,1),qp(r,1,0))}function Th(r){for(;r===vc;)vc=Qa[--Wa],Qa[Wa]=null,wc=Qa[--Wa],Qa[Wa]=null;for(;r===sa;)sa=vn[--wn],vn[wn]=null,Mr=vn[--wn],vn[wn]=null,Rr=vn[--wn],vn[wn]=null}var He=null,ae=null,jt=!1,oa=null,nr=!1,Ah=Error(i(519));function la(r){var s=Error(i(418,""));throw wl(yn(s,r)),Ah}function Pp(r){var s=r.stateNode,o=r.type,l=r.memoizedProps;switch(s[Ne]=r,s[_e]=l,o){case"dialog":Lt("cancel",s),Lt("close",s);break;case"iframe":case"object":case"embed":Lt("load",s);break;case"video":case"audio":for(o=0;o<$l.length;o++)Lt($l[o],s);break;case"source":Lt("error",s);break;case"img":case"image":case"link":Lt("error",s),Lt("load",s);break;case"details":Lt("toggle",s);break;case"input":Lt("invalid",s),ep(s,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),Pa(s);break;case"select":Lt("invalid",s);break;case"textarea":Lt("invalid",s),rp(s,l.value,l.defaultValue,l.children),Pa(s)}o=l.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||l.suppressHydrationWarning===!0||rw(s.textContent,o)?(l.popover!=null&&(Lt("beforetoggle",s),Lt("toggle",s)),l.onScroll!=null&&Lt("scroll",s),l.onScrollEnd!=null&&Lt("scrollend",s),l.onClick!=null&&(s.onclick=Wc),s=!0):s=!1,s||la(r)}function Jp(r){for(He=r.return;He;)switch(He.tag){case 5:case 13:nr=!1;return;case 27:case 3:nr=!0;return;default:He=He.return}}function pl(r){if(r!==He)return!1;if(!jt)return Jp(r),jt=!0,!1;var s=r.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=r.type,o=!(o!=="form"&&o!=="button")||Pg(r.type,r.memoizedProps)),o=!o),o&&ae&&la(r),Jp(r),s===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));t:{for(r=r.nextSibling,s=0;r;){if(r.nodeType===8)if(o=r.data,o==="/$"){if(s===0){ae=$n(r.nextSibling);break t}s--}else o!=="$"&&o!=="$!"&&o!=="$?"||s++;r=r.nextSibling}ae=null}}else s===27?(s=ae,Cs(r.type)?(r=Vg,Vg=null,ae=r):ae=s):ae=He?$n(r.stateNode.nextSibling):null;return!0}function vl(){ae=He=null,jt=!1}function Hp(){var r=oa;return r!==null&&(Ke===null?Ke=r:Ke.push.apply(Ke,r),oa=null),r}function wl(r){oa===null?oa=[r]:oa.push(r)}var Eh=q(null),ua=null,Br=null;function ds(r,s,o){et(Eh,s._currentValue),s._currentValue=o}function zr(r){r._currentValue=Eh.current,Q(Eh)}function Nh(r,s,o){for(;r!==null;){var l=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,l!==null&&(l.childLanes|=s)):l!==null&&(l.childLanes&s)!==s&&(l.childLanes|=s),r===o)break;r=r.return}}function Ch(r,s,o,l){var f=r.child;for(f!==null&&(f.return=r);f!==null;){var m=f.dependencies;if(m!==null){var S=f.child;m=m.firstContext;t:for(;m!==null;){var T=m;m=f;for(var M=0;M<s.length;M++)if(T.context===s[M]){m.lanes|=o,T=m.alternate,T!==null&&(T.lanes|=o),Nh(m.return,o,r),l||(S=null);break t}m=T.next}}else if(f.tag===18){if(S=f.return,S===null)throw Error(i(341));S.lanes|=o,m=S.alternate,m!==null&&(m.lanes|=o),Nh(S,o,r),S=null}else S=f.child;if(S!==null)S.return=f;else for(S=f;S!==null;){if(S===r){S=null;break}if(f=S.sibling,f!==null){f.return=S.return,S=f;break}S=S.return}f=S}}function bl(r,s,o,l){r=null;for(var f=s,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var S=f.alternate;if(S===null)throw Error(i(387));if(S=S.memoizedProps,S!==null){var T=f.type;nn(f.pendingProps.value,S.value)||(r!==null?r.push(T):r=[T])}}else if(f===mt.current){if(S=f.alternate,S===null)throw Error(i(387));S.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(r!==null?r.push(Kl):r=[Kl])}f=f.return}r!==null&&Ch(s,r,o,l),s.flags|=262144}function bc(r){for(r=r.firstContext;r!==null;){if(!nn(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function ca(r){ua=r,Br=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function Ue(r){return $p(ua,r)}function Sc(r,s){return ua===null&&ca(r),$p(r,s)}function $p(r,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},Br===null){if(r===null)throw Error(i(308));Br=s,r.dependencies={lanes:0,firstContext:s},r.flags|=524288}else Br=Br.next=s;return o}var bA=typeof AbortController<"u"?AbortController:function(){var r=[],s=this.signal={aborted:!1,addEventListener:function(o,l){r.push(l)}};this.abort=function(){s.aborted=!0,r.forEach(function(o){return o()})}},SA=n.unstable_scheduleCallback,xA=n.unstable_NormalPriority,xe={$$typeof:E,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Dh(){return{controller:new bA,data:new Map,refCount:0}}function Sl(r){r.refCount--,r.refCount===0&&SA(xA,function(){r.controller.abort()})}var xl=null,kh=0,to=0,eo=null;function TA(r,s){if(xl===null){var o=xl=[];kh=0,to=Ig(),eo={status:"pending",value:void 0,then:function(l){o.push(l)}}}return kh++,s.then(Vp,Vp),s}function Vp(){if(--kh===0&&xl!==null){eo!==null&&(eo.status="fulfilled");var r=xl;xl=null,to=0,eo=null;for(var s=0;s<r.length;s++)(0,r[s])()}}function AA(r,s){var o=[],l={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return r.then(function(){l.status="fulfilled",l.value=s;for(var f=0;f<o.length;f++)(0,o[f])(s)},function(f){for(l.status="rejected",l.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),l}var jp=D.S;D.S=function(r,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&TA(r,s),jp!==null&&jp(r,s)};var fa=q(null);function Oh(){var r=fa.current;return r!==null?r:ee.pooledCache}function xc(r,s){s===null?et(fa,fa.current):et(fa,s.pool)}function Yp(){var r=Oh();return r===null?null:{parent:xe._currentValue,pool:r}}var Tl=Error(i(460)),Gp=Error(i(474)),Tc=Error(i(542)),Ih={then:function(){}};function Xp(r){return r=r.status,r==="fulfilled"||r==="rejected"}function Ac(){}function Kp(r,s,o){switch(o=r[o],o===void 0?r.push(s):o!==s&&(s.then(Ac,Ac),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,Zp(r),r;default:if(typeof s.status=="string")s.then(Ac,Ac);else{if(r=ee,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=s,r.status="pending",r.then(function(l){if(s.status==="pending"){var f=s;f.status="fulfilled",f.value=l}},function(l){if(s.status==="pending"){var f=s;f.status="rejected",f.reason=l}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,Zp(r),r}throw Al=s,Tl}}var Al=null;function Fp(){if(Al===null)throw Error(i(459));var r=Al;return Al=null,r}function Zp(r){if(r===Tl||r===Tc)throw Error(i(483))}var hs=!1;function Rh(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Mh(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function gs(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function ms(r,s,o){var l=r.updateQueue;if(l===null)return null;if(l=l.shared,(Xt&2)!==0){var f=l.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),l.pending=s,s=yc(r),_p(r,null,o),s}return mc(r,l,s,o),yc(r)}function El(r,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var l=s.lanes;l&=r.pendingLanes,o|=l,s.lanes=o,Fu(r,o)}}function Bh(r,s){var o=r.updateQueue,l=r.alternate;if(l!==null&&(l=l.updateQueue,o===l)){var f=null,m=null;if(o=o.firstBaseUpdate,o!==null){do{var S={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};m===null?f=m=S:m=m.next=S,o=o.next}while(o!==null);m===null?f=m=s:m=m.next=s}else f=m=s;o={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:l.shared,callbacks:l.callbacks},r.updateQueue=o;return}r=o.lastBaseUpdate,r===null?o.firstBaseUpdate=s:r.next=s,o.lastBaseUpdate=s}var zh=!1;function Nl(){if(zh){var r=eo;if(r!==null)throw r}}function Cl(r,s,o,l){zh=!1;var f=r.updateQueue;hs=!1;var m=f.firstBaseUpdate,S=f.lastBaseUpdate,T=f.shared.pending;if(T!==null){f.shared.pending=null;var M=T,G=M.next;M.next=null,S===null?m=G:S.next=G,S=M;var st=r.alternate;st!==null&&(st=st.updateQueue,T=st.lastBaseUpdate,T!==S&&(T===null?st.firstBaseUpdate=G:T.next=G,st.lastBaseUpdate=M))}if(m!==null){var lt=f.baseState;S=0,st=G=M=null,T=m;do{var K=T.lane&-536870913,F=K!==T.lane;if(F?(Pt&K)===K:(l&K)===K){K!==0&&K===to&&(zh=!0),st!==null&&(st=st.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});t:{var kt=r,Nt=T;K=s;var Qt=o;switch(Nt.tag){case 1:if(kt=Nt.payload,typeof kt=="function"){lt=kt.call(Qt,lt,K);break t}lt=kt;break t;case 3:kt.flags=kt.flags&-65537|128;case 0:if(kt=Nt.payload,K=typeof kt=="function"?kt.call(Qt,lt,K):kt,K==null)break t;lt=y({},lt,K);break t;case 2:hs=!0}}K=T.callback,K!==null&&(r.flags|=64,F&&(r.flags|=8192),F=f.callbacks,F===null?f.callbacks=[K]:F.push(K))}else F={lane:K,tag:T.tag,payload:T.payload,callback:T.callback,next:null},st===null?(G=st=F,M=lt):st=st.next=F,S|=K;if(T=T.next,T===null){if(T=f.shared.pending,T===null)break;F=T,T=F.next,F.next=null,f.lastBaseUpdate=F,f.shared.pending=null}}while(!0);st===null&&(M=lt),f.baseState=M,f.firstBaseUpdate=G,f.lastBaseUpdate=st,m===null&&(f.shared.lanes=0),Ts|=S,r.lanes=S,r.memoizedState=lt}}function Qp(r,s){if(typeof r!="function")throw Error(i(191,r));r.call(s)}function Wp(r,s){var o=r.callbacks;if(o!==null)for(r.callbacks=null,r=0;r<o.length;r++)Qp(o[r],s)}var no=q(null),Ec=q(0);function t0(r,s){r=Hr,et(Ec,r),et(no,s),Hr=r|s.baseLanes}function Lh(){et(Ec,Hr),et(no,no.current)}function _h(){Hr=Ec.current,Q(no),Q(Ec)}var ys=0,Mt=null,Ft=null,pe=null,Nc=!1,ro=!1,da=!1,Cc=0,Dl=0,io=null,EA=0;function de(){throw Error(i(321))}function Uh(r,s){if(s===null)return!1;for(var o=0;o<s.length&&o<r.length;o++)if(!nn(r[o],s[o]))return!1;return!0}function qh(r,s,o,l,f,m){return ys=m,Mt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,D.H=r===null||r.memoizedState===null?_0:U0,da=!1,m=o(l,f),da=!1,ro&&(m=n0(s,o,l,f)),e0(r),m}function e0(r){D.H=Mc;var s=Ft!==null&&Ft.next!==null;if(ys=0,pe=Ft=Mt=null,Nc=!1,Dl=0,io=null,s)throw Error(i(300));r===null||Ce||(r=r.dependencies,r!==null&&bc(r)&&(Ce=!0))}function n0(r,s,o,l){Mt=r;var f=0;do{if(ro&&(io=null),Dl=0,ro=!1,25<=f)throw Error(i(301));if(f+=1,pe=Ft=null,r.updateQueue!=null){var m=r.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}D.H=RA,m=s(o,l)}while(ro);return m}function NA(){var r=D.H,s=r.useState()[0];return s=typeof s.then=="function"?kl(s):s,r=r.useState()[0],(Ft!==null?Ft.memoizedState:null)!==r&&(Mt.flags|=1024),s}function Ph(){var r=Cc!==0;return Cc=0,r}function Jh(r,s,o){s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~o}function Hh(r){if(Nc){for(r=r.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Nc=!1}ys=0,pe=Ft=Mt=null,ro=!1,Dl=Cc=0,io=null}function Ge(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pe===null?Mt.memoizedState=pe=r:pe=pe.next=r,pe}function ve(){if(Ft===null){var r=Mt.alternate;r=r!==null?r.memoizedState:null}else r=Ft.next;var s=pe===null?Mt.memoizedState:pe.next;if(s!==null)pe=s,Ft=r;else{if(r===null)throw Mt.alternate===null?Error(i(467)):Error(i(310));Ft=r,r={memoizedState:Ft.memoizedState,baseState:Ft.baseState,baseQueue:Ft.baseQueue,queue:Ft.queue,next:null},pe===null?Mt.memoizedState=pe=r:pe=pe.next=r}return pe}function $h(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function kl(r){var s=Dl;return Dl+=1,io===null&&(io=[]),r=Kp(io,r,s),s=Mt,(pe===null?s.memoizedState:pe.next)===null&&(s=s.alternate,D.H=s===null||s.memoizedState===null?_0:U0),r}function Dc(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return kl(r);if(r.$$typeof===E)return Ue(r)}throw Error(i(438,String(r)))}function Vh(r){var s=null,o=Mt.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var l=Mt.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(s={data:l.data.map(function(f){return f.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=$h(),Mt.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(r),l=0;l<r;l++)o[l]=it;return s.index++,o}function Lr(r,s){return typeof s=="function"?s(r):s}function kc(r){var s=ve();return jh(s,Ft,r)}function jh(r,s,o){var l=r.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=o;var f=r.baseQueue,m=l.pending;if(m!==null){if(f!==null){var S=f.next;f.next=m.next,m.next=S}s.baseQueue=f=m,l.pending=null}if(m=r.baseState,f===null)r.memoizedState=m;else{s=f.next;var T=S=null,M=null,G=s,st=!1;do{var lt=G.lane&-536870913;if(lt!==G.lane?(Pt&lt)===lt:(ys&lt)===lt){var K=G.revertLane;if(K===0)M!==null&&(M=M.next={lane:0,revertLane:0,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),lt===to&&(st=!0);else if((ys&K)===K){G=G.next,K===to&&(st=!0);continue}else lt={lane:0,revertLane:G.revertLane,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},M===null?(T=M=lt,S=m):M=M.next=lt,Mt.lanes|=K,Ts|=K;lt=G.action,da&&o(m,lt),m=G.hasEagerState?G.eagerState:o(m,lt)}else K={lane:lt,revertLane:G.revertLane,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},M===null?(T=M=K,S=m):M=M.next=K,Mt.lanes|=lt,Ts|=lt;G=G.next}while(G!==null&&G!==s);if(M===null?S=m:M.next=T,!nn(m,r.memoizedState)&&(Ce=!0,st&&(o=eo,o!==null)))throw o;r.memoizedState=m,r.baseState=S,r.baseQueue=M,l.lastRenderedState=m}return f===null&&(l.lanes=0),[r.memoizedState,l.dispatch]}function Yh(r){var s=ve(),o=s.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=r;var l=o.dispatch,f=o.pending,m=s.memoizedState;if(f!==null){o.pending=null;var S=f=f.next;do m=r(m,S.action),S=S.next;while(S!==f);nn(m,s.memoizedState)||(Ce=!0),s.memoizedState=m,s.baseQueue===null&&(s.baseState=m),o.lastRenderedState=m}return[m,l]}function r0(r,s,o){var l=Mt,f=ve(),m=jt;if(m){if(o===void 0)throw Error(i(407));o=o()}else o=s();var S=!nn((Ft||f).memoizedState,o);S&&(f.memoizedState=o,Ce=!0),f=f.queue;var T=a0.bind(null,l,f,r);if(Ol(2048,8,T,[r]),f.getSnapshot!==s||S||pe!==null&&pe.memoizedState.tag&1){if(l.flags|=2048,so(9,Oc(),s0.bind(null,l,f,o,s),null),ee===null)throw Error(i(349));m||(ys&124)!==0||i0(l,s,o)}return o}function i0(r,s,o){r.flags|=16384,r={getSnapshot:s,value:o},s=Mt.updateQueue,s===null?(s=$h(),Mt.updateQueue=s,s.stores=[r]):(o=s.stores,o===null?s.stores=[r]:o.push(r))}function s0(r,s,o,l){s.value=o,s.getSnapshot=l,o0(s)&&l0(r)}function a0(r,s,o){return o(function(){o0(s)&&l0(r)})}function o0(r){var s=r.getSnapshot;r=r.value;try{var o=s();return!nn(r,o)}catch{return!0}}function l0(r){var s=Fa(r,2);s!==null&&un(s,r,2)}function Gh(r){var s=Ge();if(typeof r=="function"){var o=r;if(r=o(),da){tr(!0);try{o()}finally{tr(!1)}}}return s.memoizedState=s.baseState=r,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Lr,lastRenderedState:r},s}function u0(r,s,o,l){return r.baseState=o,jh(r,Ft,typeof l=="function"?l:Lr)}function CA(r,s,o,l,f){if(Rc(r))throw Error(i(485));if(r=s.action,r!==null){var m={payload:f,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){m.listeners.push(S)}};D.T!==null?o(!0):m.isTransition=!1,l(m),o=s.pending,o===null?(m.next=s.pending=m,c0(s,m)):(m.next=o.next,s.pending=o.next=m)}}function c0(r,s){var o=s.action,l=s.payload,f=r.state;if(s.isTransition){var m=D.T,S={};D.T=S;try{var T=o(f,l),M=D.S;M!==null&&M(S,T),f0(r,s,T)}catch(G){Xh(r,s,G)}finally{D.T=m}}else try{m=o(f,l),f0(r,s,m)}catch(G){Xh(r,s,G)}}function f0(r,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(l){d0(r,s,l)},function(l){return Xh(r,s,l)}):d0(r,s,o)}function d0(r,s,o){s.status="fulfilled",s.value=o,h0(s),r.state=o,s=r.pending,s!==null&&(o=s.next,o===s?r.pending=null:(o=o.next,s.next=o,c0(r,o)))}function Xh(r,s,o){var l=r.pending;if(r.pending=null,l!==null){l=l.next;do s.status="rejected",s.reason=o,h0(s),s=s.next;while(s!==l)}r.action=null}function h0(r){r=r.listeners;for(var s=0;s<r.length;s++)(0,r[s])()}function g0(r,s){return s}function m0(r,s){if(jt){var o=ee.formState;if(o!==null){t:{var l=Mt;if(jt){if(ae){e:{for(var f=ae,m=nr;f.nodeType!==8;){if(!m){f=null;break e}if(f=$n(f.nextSibling),f===null){f=null;break e}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){ae=$n(f.nextSibling),l=f.data==="F!";break t}}la(l)}l=!1}l&&(s=o[0])}}return o=Ge(),o.memoizedState=o.baseState=s,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:g0,lastRenderedState:s},o.queue=l,o=B0.bind(null,Mt,l),l.dispatch=o,l=Gh(!1),m=Wh.bind(null,Mt,!1,l.queue),l=Ge(),f={state:s,dispatch:null,action:r,pending:null},l.queue=f,o=CA.bind(null,Mt,f,m,o),f.dispatch=o,l.memoizedState=r,[s,o,!1]}function y0(r){var s=ve();return p0(s,Ft,r)}function p0(r,s,o){if(s=jh(r,s,g0)[0],r=kc(Lr)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var l=kl(s)}catch(S){throw S===Tl?Tc:S}else l=s;s=ve();var f=s.queue,m=f.dispatch;return o!==s.memoizedState&&(Mt.flags|=2048,so(9,Oc(),DA.bind(null,f,o),null)),[l,m,r]}function DA(r,s){r.action=s}function v0(r){var s=ve(),o=Ft;if(o!==null)return p0(s,o,r);ve(),s=s.memoizedState,o=ve();var l=o.queue.dispatch;return o.memoizedState=r,[s,l,!1]}function so(r,s,o,l){return r={tag:r,create:o,deps:l,inst:s,next:null},s=Mt.updateQueue,s===null&&(s=$h(),Mt.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=r.next=r:(l=o.next,o.next=r,r.next=l,s.lastEffect=r),r}function Oc(){return{destroy:void 0,resource:void 0}}function w0(){return ve().memoizedState}function Ic(r,s,o,l){var f=Ge();l=l===void 0?null:l,Mt.flags|=r,f.memoizedState=so(1|s,Oc(),o,l)}function Ol(r,s,o,l){var f=ve();l=l===void 0?null:l;var m=f.memoizedState.inst;Ft!==null&&l!==null&&Uh(l,Ft.memoizedState.deps)?f.memoizedState=so(s,m,o,l):(Mt.flags|=r,f.memoizedState=so(1|s,m,o,l))}function b0(r,s){Ic(8390656,8,r,s)}function S0(r,s){Ol(2048,8,r,s)}function x0(r,s){return Ol(4,2,r,s)}function T0(r,s){return Ol(4,4,r,s)}function A0(r,s){if(typeof s=="function"){r=r();var o=s(r);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function E0(r,s,o){o=o!=null?o.concat([r]):null,Ol(4,4,A0.bind(null,s,r),o)}function Kh(){}function N0(r,s){var o=ve();s=s===void 0?null:s;var l=o.memoizedState;return s!==null&&Uh(s,l[1])?l[0]:(o.memoizedState=[r,s],r)}function C0(r,s){var o=ve();s=s===void 0?null:s;var l=o.memoizedState;if(s!==null&&Uh(s,l[1]))return l[0];if(l=r(),da){tr(!0);try{r()}finally{tr(!1)}}return o.memoizedState=[l,s],l}function Fh(r,s,o){return o===void 0||(ys&1073741824)!==0?r.memoizedState=s:(r.memoizedState=o,r=Ov(),Mt.lanes|=r,Ts|=r,o)}function D0(r,s,o,l){return nn(o,s)?o:no.current!==null?(r=Fh(r,o,l),nn(r,s)||(Ce=!0),r):(ys&42)===0?(Ce=!0,r.memoizedState=o):(r=Ov(),Mt.lanes|=r,Ts|=r,s)}function k0(r,s,o,l,f){var m=B.p;B.p=m!==0&&8>m?m:8;var S=D.T,T={};D.T=T,Wh(r,!1,s,o);try{var M=f(),G=D.S;if(G!==null&&G(T,M),M!==null&&typeof M=="object"&&typeof M.then=="function"){var st=AA(M,l);Il(r,s,st,ln(r))}else Il(r,s,l,ln(r))}catch(lt){Il(r,s,{then:function(){},status:"rejected",reason:lt},ln())}finally{B.p=m,D.T=S}}function kA(){}function Zh(r,s,o,l){if(r.tag!==5)throw Error(i(476));var f=O0(r).queue;k0(r,f,s,P,o===null?kA:function(){return I0(r),o(l)})}function O0(r){var s=r.memoizedState;if(s!==null)return s;s={memoizedState:P,baseState:P,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Lr,lastRenderedState:P},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Lr,lastRenderedState:o},next:null},r.memoizedState=s,r=r.alternate,r!==null&&(r.memoizedState=s),s}function I0(r){var s=O0(r).next.queue;Il(r,s,{},ln())}function Qh(){return Ue(Kl)}function R0(){return ve().memoizedState}function M0(){return ve().memoizedState}function OA(r){for(var s=r.return;s!==null;){switch(s.tag){case 24:case 3:var o=ln();r=gs(o);var l=ms(s,r,o);l!==null&&(un(l,s,o),El(l,s,o)),s={cache:Dh()},r.payload=s;return}s=s.return}}function IA(r,s,o){var l=ln();o={lane:l,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},Rc(r)?z0(s,o):(o=vh(r,s,o,l),o!==null&&(un(o,r,l),L0(o,s,l)))}function B0(r,s,o){var l=ln();Il(r,s,o,l)}function Il(r,s,o,l){var f={lane:l,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(Rc(r))z0(s,f);else{var m=r.alternate;if(r.lanes===0&&(m===null||m.lanes===0)&&(m=s.lastRenderedReducer,m!==null))try{var S=s.lastRenderedState,T=m(S,o);if(f.hasEagerState=!0,f.eagerState=T,nn(T,S))return mc(r,s,f,0),ee===null&&gc(),!1}catch{}finally{}if(o=vh(r,s,f,l),o!==null)return un(o,r,l),L0(o,s,l),!0}return!1}function Wh(r,s,o,l){if(l={lane:2,revertLane:Ig(),action:l,hasEagerState:!1,eagerState:null,next:null},Rc(r)){if(s)throw Error(i(479))}else s=vh(r,o,l,2),s!==null&&un(s,r,2)}function Rc(r){var s=r.alternate;return r===Mt||s!==null&&s===Mt}function z0(r,s){ro=Nc=!0;var o=r.pending;o===null?s.next=s:(s.next=o.next,o.next=s),r.pending=s}function L0(r,s,o){if((o&4194048)!==0){var l=s.lanes;l&=r.pendingLanes,o|=l,s.lanes=o,Fu(r,o)}}var Mc={readContext:Ue,use:Dc,useCallback:de,useContext:de,useEffect:de,useImperativeHandle:de,useLayoutEffect:de,useInsertionEffect:de,useMemo:de,useReducer:de,useRef:de,useState:de,useDebugValue:de,useDeferredValue:de,useTransition:de,useSyncExternalStore:de,useId:de,useHostTransitionStatus:de,useFormState:de,useActionState:de,useOptimistic:de,useMemoCache:de,useCacheRefresh:de},_0={readContext:Ue,use:Dc,useCallback:function(r,s){return Ge().memoizedState=[r,s===void 0?null:s],r},useContext:Ue,useEffect:b0,useImperativeHandle:function(r,s,o){o=o!=null?o.concat([r]):null,Ic(4194308,4,A0.bind(null,s,r),o)},useLayoutEffect:function(r,s){return Ic(4194308,4,r,s)},useInsertionEffect:function(r,s){Ic(4,2,r,s)},useMemo:function(r,s){var o=Ge();s=s===void 0?null:s;var l=r();if(da){tr(!0);try{r()}finally{tr(!1)}}return o.memoizedState=[l,s],l},useReducer:function(r,s,o){var l=Ge();if(o!==void 0){var f=o(s);if(da){tr(!0);try{o(s)}finally{tr(!1)}}}else f=s;return l.memoizedState=l.baseState=f,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:f},l.queue=r,r=r.dispatch=IA.bind(null,Mt,r),[l.memoizedState,r]},useRef:function(r){var s=Ge();return r={current:r},s.memoizedState=r},useState:function(r){r=Gh(r);var s=r.queue,o=B0.bind(null,Mt,s);return s.dispatch=o,[r.memoizedState,o]},useDebugValue:Kh,useDeferredValue:function(r,s){var o=Ge();return Fh(o,r,s)},useTransition:function(){var r=Gh(!1);return r=k0.bind(null,Mt,r.queue,!0,!1),Ge().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,s,o){var l=Mt,f=Ge();if(jt){if(o===void 0)throw Error(i(407));o=o()}else{if(o=s(),ee===null)throw Error(i(349));(Pt&124)!==0||i0(l,s,o)}f.memoizedState=o;var m={value:o,getSnapshot:s};return f.queue=m,b0(a0.bind(null,l,m,r),[r]),l.flags|=2048,so(9,Oc(),s0.bind(null,l,m,o,s),null),o},useId:function(){var r=Ge(),s=ee.identifierPrefix;if(jt){var o=Mr,l=Rr;o=(l&~(1<<32-Ie(l)-1)).toString(32)+o,s="«"+s+"R"+o,o=Cc++,0<o&&(s+="H"+o.toString(32)),s+="»"}else o=EA++,s="«"+s+"r"+o.toString(32)+"»";return r.memoizedState=s},useHostTransitionStatus:Qh,useFormState:m0,useActionState:m0,useOptimistic:function(r){var s=Ge();s.memoizedState=s.baseState=r;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=Wh.bind(null,Mt,!0,o),o.dispatch=s,[r,s]},useMemoCache:Vh,useCacheRefresh:function(){return Ge().memoizedState=OA.bind(null,Mt)}},U0={readContext:Ue,use:Dc,useCallback:N0,useContext:Ue,useEffect:S0,useImperativeHandle:E0,useInsertionEffect:x0,useLayoutEffect:T0,useMemo:C0,useReducer:kc,useRef:w0,useState:function(){return kc(Lr)},useDebugValue:Kh,useDeferredValue:function(r,s){var o=ve();return D0(o,Ft.memoizedState,r,s)},useTransition:function(){var r=kc(Lr)[0],s=ve().memoizedState;return[typeof r=="boolean"?r:kl(r),s]},useSyncExternalStore:r0,useId:R0,useHostTransitionStatus:Qh,useFormState:y0,useActionState:y0,useOptimistic:function(r,s){var o=ve();return u0(o,Ft,r,s)},useMemoCache:Vh,useCacheRefresh:M0},RA={readContext:Ue,use:Dc,useCallback:N0,useContext:Ue,useEffect:S0,useImperativeHandle:E0,useInsertionEffect:x0,useLayoutEffect:T0,useMemo:C0,useReducer:Yh,useRef:w0,useState:function(){return Yh(Lr)},useDebugValue:Kh,useDeferredValue:function(r,s){var o=ve();return Ft===null?Fh(o,r,s):D0(o,Ft.memoizedState,r,s)},useTransition:function(){var r=Yh(Lr)[0],s=ve().memoizedState;return[typeof r=="boolean"?r:kl(r),s]},useSyncExternalStore:r0,useId:R0,useHostTransitionStatus:Qh,useFormState:v0,useActionState:v0,useOptimistic:function(r,s){var o=ve();return Ft!==null?u0(o,Ft,r,s):(o.baseState=r,[r,o.queue.dispatch])},useMemoCache:Vh,useCacheRefresh:M0},ao=null,Rl=0;function Bc(r){var s=Rl;return Rl+=1,ao===null&&(ao=[]),Kp(ao,r,s)}function Ml(r,s){s=s.props.ref,r.ref=s!==void 0?s:null}function zc(r,s){throw s.$$typeof===w?Error(i(525)):(r=Object.prototype.toString.call(s),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r)))}function q0(r){var s=r._init;return s(r._payload)}function P0(r){function s(J,_){if(r){var Y=J.deletions;Y===null?(J.deletions=[_],J.flags|=16):Y.push(_)}}function o(J,_){if(!r)return null;for(;_!==null;)s(J,_),_=_.sibling;return null}function l(J){for(var _=new Map;J!==null;)J.key!==null?_.set(J.key,J):_.set(J.index,J),J=J.sibling;return _}function f(J,_){return J=Ir(J,_),J.index=0,J.sibling=null,J}function m(J,_,Y){return J.index=Y,r?(Y=J.alternate,Y!==null?(Y=Y.index,Y<_?(J.flags|=67108866,_):Y):(J.flags|=67108866,_)):(J.flags|=1048576,_)}function S(J){return r&&J.alternate===null&&(J.flags|=67108866),J}function T(J,_,Y,at){return _===null||_.tag!==6?(_=bh(Y,J.mode,at),_.return=J,_):(_=f(_,Y),_.return=J,_)}function M(J,_,Y,at){var vt=Y.type;return vt===x?st(J,_,Y.props.children,at,Y.key):_!==null&&(_.elementType===vt||typeof vt=="object"&&vt!==null&&vt.$$typeof===tt&&q0(vt)===_.type)?(_=f(_,Y.props),Ml(_,Y),_.return=J,_):(_=pc(Y.type,Y.key,Y.props,null,J.mode,at),Ml(_,Y),_.return=J,_)}function G(J,_,Y,at){return _===null||_.tag!==4||_.stateNode.containerInfo!==Y.containerInfo||_.stateNode.implementation!==Y.implementation?(_=Sh(Y,J.mode,at),_.return=J,_):(_=f(_,Y.children||[]),_.return=J,_)}function st(J,_,Y,at,vt){return _===null||_.tag!==7?(_=ia(Y,J.mode,at,vt),_.return=J,_):(_=f(_,Y),_.return=J,_)}function lt(J,_,Y){if(typeof _=="string"&&_!==""||typeof _=="number"||typeof _=="bigint")return _=bh(""+_,J.mode,Y),_.return=J,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case p:return Y=pc(_.type,_.key,_.props,null,J.mode,Y),Ml(Y,_),Y.return=J,Y;case b:return _=Sh(_,J.mode,Y),_.return=J,_;case tt:var at=_._init;return _=at(_._payload),lt(J,_,Y)}if(j(_)||ot(_))return _=ia(_,J.mode,Y,null),_.return=J,_;if(typeof _.then=="function")return lt(J,Bc(_),Y);if(_.$$typeof===E)return lt(J,Sc(J,_),Y);zc(J,_)}return null}function K(J,_,Y,at){var vt=_!==null?_.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return vt!==null?null:T(J,_,""+Y,at);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case p:return Y.key===vt?M(J,_,Y,at):null;case b:return Y.key===vt?G(J,_,Y,at):null;case tt:return vt=Y._init,Y=vt(Y._payload),K(J,_,Y,at)}if(j(Y)||ot(Y))return vt!==null?null:st(J,_,Y,at,null);if(typeof Y.then=="function")return K(J,_,Bc(Y),at);if(Y.$$typeof===E)return K(J,_,Sc(J,Y),at);zc(J,Y)}return null}function F(J,_,Y,at,vt){if(typeof at=="string"&&at!==""||typeof at=="number"||typeof at=="bigint")return J=J.get(Y)||null,T(_,J,""+at,vt);if(typeof at=="object"&&at!==null){switch(at.$$typeof){case p:return J=J.get(at.key===null?Y:at.key)||null,M(_,J,at,vt);case b:return J=J.get(at.key===null?Y:at.key)||null,G(_,J,at,vt);case tt:var Bt=at._init;return at=Bt(at._payload),F(J,_,Y,at,vt)}if(j(at)||ot(at))return J=J.get(Y)||null,st(_,J,at,vt,null);if(typeof at.then=="function")return F(J,_,Y,Bc(at),vt);if(at.$$typeof===E)return F(J,_,Y,Sc(_,at),vt);zc(_,at)}return null}function kt(J,_,Y,at){for(var vt=null,Bt=null,bt=_,Ct=_=0,ke=null;bt!==null&&Ct<Y.length;Ct++){bt.index>Ct?(ke=bt,bt=null):ke=bt.sibling;var $t=K(J,bt,Y[Ct],at);if($t===null){bt===null&&(bt=ke);break}r&&bt&&$t.alternate===null&&s(J,bt),_=m($t,_,Ct),Bt===null?vt=$t:Bt.sibling=$t,Bt=$t,bt=ke}if(Ct===Y.length)return o(J,bt),jt&&aa(J,Ct),vt;if(bt===null){for(;Ct<Y.length;Ct++)bt=lt(J,Y[Ct],at),bt!==null&&(_=m(bt,_,Ct),Bt===null?vt=bt:Bt.sibling=bt,Bt=bt);return jt&&aa(J,Ct),vt}for(bt=l(bt);Ct<Y.length;Ct++)ke=F(bt,J,Ct,Y[Ct],at),ke!==null&&(r&&ke.alternate!==null&&bt.delete(ke.key===null?Ct:ke.key),_=m(ke,_,Ct),Bt===null?vt=ke:Bt.sibling=ke,Bt=ke);return r&&bt.forEach(function(Rs){return s(J,Rs)}),jt&&aa(J,Ct),vt}function Nt(J,_,Y,at){if(Y==null)throw Error(i(151));for(var vt=null,Bt=null,bt=_,Ct=_=0,ke=null,$t=Y.next();bt!==null&&!$t.done;Ct++,$t=Y.next()){bt.index>Ct?(ke=bt,bt=null):ke=bt.sibling;var Rs=K(J,bt,$t.value,at);if(Rs===null){bt===null&&(bt=ke);break}r&&bt&&Rs.alternate===null&&s(J,bt),_=m(Rs,_,Ct),Bt===null?vt=Rs:Bt.sibling=Rs,Bt=Rs,bt=ke}if($t.done)return o(J,bt),jt&&aa(J,Ct),vt;if(bt===null){for(;!$t.done;Ct++,$t=Y.next())$t=lt(J,$t.value,at),$t!==null&&(_=m($t,_,Ct),Bt===null?vt=$t:Bt.sibling=$t,Bt=$t);return jt&&aa(J,Ct),vt}for(bt=l(bt);!$t.done;Ct++,$t=Y.next())$t=F(bt,J,Ct,$t.value,at),$t!==null&&(r&&$t.alternate!==null&&bt.delete($t.key===null?Ct:$t.key),_=m($t,_,Ct),Bt===null?vt=$t:Bt.sibling=$t,Bt=$t);return r&&bt.forEach(function(ME){return s(J,ME)}),jt&&aa(J,Ct),vt}function Qt(J,_,Y,at){if(typeof Y=="object"&&Y!==null&&Y.type===x&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case p:t:{for(var vt=Y.key;_!==null;){if(_.key===vt){if(vt=Y.type,vt===x){if(_.tag===7){o(J,_.sibling),at=f(_,Y.props.children),at.return=J,J=at;break t}}else if(_.elementType===vt||typeof vt=="object"&&vt!==null&&vt.$$typeof===tt&&q0(vt)===_.type){o(J,_.sibling),at=f(_,Y.props),Ml(at,Y),at.return=J,J=at;break t}o(J,_);break}else s(J,_);_=_.sibling}Y.type===x?(at=ia(Y.props.children,J.mode,at,Y.key),at.return=J,J=at):(at=pc(Y.type,Y.key,Y.props,null,J.mode,at),Ml(at,Y),at.return=J,J=at)}return S(J);case b:t:{for(vt=Y.key;_!==null;){if(_.key===vt)if(_.tag===4&&_.stateNode.containerInfo===Y.containerInfo&&_.stateNode.implementation===Y.implementation){o(J,_.sibling),at=f(_,Y.children||[]),at.return=J,J=at;break t}else{o(J,_);break}else s(J,_);_=_.sibling}at=Sh(Y,J.mode,at),at.return=J,J=at}return S(J);case tt:return vt=Y._init,Y=vt(Y._payload),Qt(J,_,Y,at)}if(j(Y))return kt(J,_,Y,at);if(ot(Y)){if(vt=ot(Y),typeof vt!="function")throw Error(i(150));return Y=vt.call(Y),Nt(J,_,Y,at)}if(typeof Y.then=="function")return Qt(J,_,Bc(Y),at);if(Y.$$typeof===E)return Qt(J,_,Sc(J,Y),at);zc(J,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint"?(Y=""+Y,_!==null&&_.tag===6?(o(J,_.sibling),at=f(_,Y),at.return=J,J=at):(o(J,_),at=bh(Y,J.mode,at),at.return=J,J=at),S(J)):o(J,_)}return function(J,_,Y,at){try{Rl=0;var vt=Qt(J,_,Y,at);return ao=null,vt}catch(bt){if(bt===Tl||bt===Tc)throw bt;var Bt=rn(29,bt,null,J.mode);return Bt.lanes=at,Bt.return=J,Bt}finally{}}}var oo=P0(!0),J0=P0(!1),bn=q(null),rr=null;function ps(r){var s=r.alternate;et(Te,Te.current&1),et(bn,r),rr===null&&(s===null||no.current!==null||s.memoizedState!==null)&&(rr=r)}function H0(r){if(r.tag===22){if(et(Te,Te.current),et(bn,r),rr===null){var s=r.alternate;s!==null&&s.memoizedState!==null&&(rr=r)}}else vs()}function vs(){et(Te,Te.current),et(bn,bn.current)}function _r(r){Q(bn),rr===r&&(rr=null),Q(Te)}var Te=q(0);function Lc(r){for(var s=r;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||$g(o)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function tg(r,s,o,l){s=r.memoizedState,o=o(l,s),o=o==null?s:y({},s,o),r.memoizedState=o,r.lanes===0&&(r.updateQueue.baseState=o)}var eg={enqueueSetState:function(r,s,o){r=r._reactInternals;var l=ln(),f=gs(l);f.payload=s,o!=null&&(f.callback=o),s=ms(r,f,l),s!==null&&(un(s,r,l),El(s,r,l))},enqueueReplaceState:function(r,s,o){r=r._reactInternals;var l=ln(),f=gs(l);f.tag=1,f.payload=s,o!=null&&(f.callback=o),s=ms(r,f,l),s!==null&&(un(s,r,l),El(s,r,l))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var o=ln(),l=gs(o);l.tag=2,s!=null&&(l.callback=s),s=ms(r,l,o),s!==null&&(un(s,r,o),El(s,r,o))}};function $0(r,s,o,l,f,m,S){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(l,m,S):s.prototype&&s.prototype.isPureReactComponent?!ml(o,l)||!ml(f,m):!0}function V0(r,s,o,l){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,l),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,l),s.state!==r&&eg.enqueueReplaceState(s,s.state,null)}function ha(r,s){var o=s;if("ref"in s){o={};for(var l in s)l!=="ref"&&(o[l]=s[l])}if(r=r.defaultProps){o===s&&(o=y({},o));for(var f in r)o[f]===void 0&&(o[f]=r[f])}return o}var _c=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)};function j0(r){_c(r)}function Y0(r){console.error(r)}function G0(r){_c(r)}function Uc(r,s){try{var o=r.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(l){setTimeout(function(){throw l})}}function X0(r,s,o){try{var l=r.onCaughtError;l(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function ng(r,s,o){return o=gs(o),o.tag=3,o.payload={element:null},o.callback=function(){Uc(r,s)},o}function K0(r){return r=gs(r),r.tag=3,r}function F0(r,s,o,l){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var m=l.value;r.payload=function(){return f(m)},r.callback=function(){X0(s,o,l)}}var S=o.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(r.callback=function(){X0(s,o,l),typeof f!="function"&&(As===null?As=new Set([this]):As.add(this));var T=l.stack;this.componentDidCatch(l.value,{componentStack:T!==null?T:""})})}function MA(r,s,o,l,f){if(o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(s=o.alternate,s!==null&&bl(s,o,f,!0),o=bn.current,o!==null){switch(o.tag){case 13:return rr===null?Ng():o.alternate===null&&oe===0&&(oe=3),o.flags&=-257,o.flags|=65536,o.lanes=f,l===Ih?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([l]):s.add(l),Dg(r,l,f)),!1;case 22:return o.flags|=65536,l===Ih?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([l])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([l]):o.add(l)),Dg(r,l,f)),!1}throw Error(i(435,o.tag))}return Dg(r,l,f),Ng(),!1}if(jt)return s=bn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=f,l!==Ah&&(r=Error(i(422),{cause:l}),wl(yn(r,o)))):(l!==Ah&&(s=Error(i(423),{cause:l}),wl(yn(s,o))),r=r.current.alternate,r.flags|=65536,f&=-f,r.lanes|=f,l=yn(l,o),f=ng(r.stateNode,l,f),Bh(r,f),oe!==4&&(oe=2)),!1;var m=Error(i(520),{cause:l});if(m=yn(m,o),Pl===null?Pl=[m]:Pl.push(m),oe!==4&&(oe=2),s===null)return!0;l=yn(l,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,r=f&-f,o.lanes|=r,r=ng(o.stateNode,l,r),Bh(o,r),!1;case 1:if(s=o.type,m=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(As===null||!As.has(m))))return o.flags|=65536,f&=-f,o.lanes|=f,f=K0(f),F0(f,r,o,l),Bh(o,f),!1}o=o.return}while(o!==null);return!1}var Z0=Error(i(461)),Ce=!1;function Re(r,s,o,l){s.child=r===null?J0(s,null,o,l):oo(s,r.child,o,l)}function Q0(r,s,o,l,f){o=o.render;var m=s.ref;if("ref"in l){var S={};for(var T in l)T!=="ref"&&(S[T]=l[T])}else S=l;return ca(s),l=qh(r,s,o,S,m,f),T=Ph(),r!==null&&!Ce?(Jh(r,s,f),Ur(r,s,f)):(jt&&T&&xh(s),s.flags|=1,Re(r,s,l,f),s.child)}function W0(r,s,o,l,f){if(r===null){var m=o.type;return typeof m=="function"&&!wh(m)&&m.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=m,tv(r,s,m,l,f)):(r=pc(o.type,null,l,s,s.mode,f),r.ref=s.ref,r.return=s,s.child=r)}if(m=r.child,!cg(r,f)){var S=m.memoizedProps;if(o=o.compare,o=o!==null?o:ml,o(S,l)&&r.ref===s.ref)return Ur(r,s,f)}return s.flags|=1,r=Ir(m,l),r.ref=s.ref,r.return=s,s.child=r}function tv(r,s,o,l,f){if(r!==null){var m=r.memoizedProps;if(ml(m,l)&&r.ref===s.ref)if(Ce=!1,s.pendingProps=l=m,cg(r,f))(r.flags&131072)!==0&&(Ce=!0);else return s.lanes=r.lanes,Ur(r,s,f)}return rg(r,s,o,l,f)}function ev(r,s,o){var l=s.pendingProps,f=l.children,m=r!==null?r.memoizedState:null;if(l.mode==="hidden"){if((s.flags&128)!==0){if(l=m!==null?m.baseLanes|o:o,r!==null){for(f=s.child=r.child,m=0;f!==null;)m=m|f.lanes|f.childLanes,f=f.sibling;s.childLanes=m&~l}else s.childLanes=0,s.child=null;return nv(r,s,l,o)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},r!==null&&xc(s,m!==null?m.cachePool:null),m!==null?t0(s,m):Lh(),H0(s);else return s.lanes=s.childLanes=536870912,nv(r,s,m!==null?m.baseLanes|o:o,o)}else m!==null?(xc(s,m.cachePool),t0(s,m),vs(),s.memoizedState=null):(r!==null&&xc(s,null),Lh(),vs());return Re(r,s,f,o),s.child}function nv(r,s,o,l){var f=Oh();return f=f===null?null:{parent:xe._currentValue,pool:f},s.memoizedState={baseLanes:o,cachePool:f},r!==null&&xc(s,null),Lh(),H0(s),r!==null&&bl(r,s,l,!0),null}function qc(r,s){var o=s.ref;if(o===null)r!==null&&r.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(i(284));(r===null||r.ref!==o)&&(s.flags|=4194816)}}function rg(r,s,o,l,f){return ca(s),o=qh(r,s,o,l,void 0,f),l=Ph(),r!==null&&!Ce?(Jh(r,s,f),Ur(r,s,f)):(jt&&l&&xh(s),s.flags|=1,Re(r,s,o,f),s.child)}function rv(r,s,o,l,f,m){return ca(s),s.updateQueue=null,o=n0(s,l,o,f),e0(r),l=Ph(),r!==null&&!Ce?(Jh(r,s,m),Ur(r,s,m)):(jt&&l&&xh(s),s.flags|=1,Re(r,s,o,m),s.child)}function iv(r,s,o,l,f){if(ca(s),s.stateNode===null){var m=Za,S=o.contextType;typeof S=="object"&&S!==null&&(m=Ue(S)),m=new o(l,m),s.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=eg,s.stateNode=m,m._reactInternals=s,m=s.stateNode,m.props=l,m.state=s.memoizedState,m.refs={},Rh(s),S=o.contextType,m.context=typeof S=="object"&&S!==null?Ue(S):Za,m.state=s.memoizedState,S=o.getDerivedStateFromProps,typeof S=="function"&&(tg(s,o,S,l),m.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(S=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),S!==m.state&&eg.enqueueReplaceState(m,m.state,null),Cl(s,l,m,f),Nl(),m.state=s.memoizedState),typeof m.componentDidMount=="function"&&(s.flags|=4194308),l=!0}else if(r===null){m=s.stateNode;var T=s.memoizedProps,M=ha(o,T);m.props=M;var G=m.context,st=o.contextType;S=Za,typeof st=="object"&&st!==null&&(S=Ue(st));var lt=o.getDerivedStateFromProps;st=typeof lt=="function"||typeof m.getSnapshotBeforeUpdate=="function",T=s.pendingProps!==T,st||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(T||G!==S)&&V0(s,m,l,S),hs=!1;var K=s.memoizedState;m.state=K,Cl(s,l,m,f),Nl(),G=s.memoizedState,T||K!==G||hs?(typeof lt=="function"&&(tg(s,o,lt,l),G=s.memoizedState),(M=hs||$0(s,o,M,l,K,G,S))?(st||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(s.flags|=4194308)):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=l,s.memoizedState=G),m.props=l,m.state=G,m.context=S,l=M):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),l=!1)}else{m=s.stateNode,Mh(r,s),S=s.memoizedProps,st=ha(o,S),m.props=st,lt=s.pendingProps,K=m.context,G=o.contextType,M=Za,typeof G=="object"&&G!==null&&(M=Ue(G)),T=o.getDerivedStateFromProps,(G=typeof T=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(S!==lt||K!==M)&&V0(s,m,l,M),hs=!1,K=s.memoizedState,m.state=K,Cl(s,l,m,f),Nl();var F=s.memoizedState;S!==lt||K!==F||hs||r!==null&&r.dependencies!==null&&bc(r.dependencies)?(typeof T=="function"&&(tg(s,o,T,l),F=s.memoizedState),(st=hs||$0(s,o,st,l,K,F,M)||r!==null&&r.dependencies!==null&&bc(r.dependencies))?(G||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(l,F,M),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(l,F,M)),typeof m.componentDidUpdate=="function"&&(s.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof m.componentDidUpdate!="function"||S===r.memoizedProps&&K===r.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||S===r.memoizedProps&&K===r.memoizedState||(s.flags|=1024),s.memoizedProps=l,s.memoizedState=F),m.props=l,m.state=F,m.context=M,l=st):(typeof m.componentDidUpdate!="function"||S===r.memoizedProps&&K===r.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||S===r.memoizedProps&&K===r.memoizedState||(s.flags|=1024),l=!1)}return m=l,qc(r,s),l=(s.flags&128)!==0,m||l?(m=s.stateNode,o=l&&typeof o.getDerivedStateFromError!="function"?null:m.render(),s.flags|=1,r!==null&&l?(s.child=oo(s,r.child,null,f),s.child=oo(s,null,o,f)):Re(r,s,o,f),s.memoizedState=m.state,r=s.child):r=Ur(r,s,f),r}function sv(r,s,o,l){return vl(),s.flags|=256,Re(r,s,o,l),s.child}var ig={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function sg(r){return{baseLanes:r,cachePool:Yp()}}function ag(r,s,o){return r=r!==null?r.childLanes&~o:0,s&&(r|=Sn),r}function av(r,s,o){var l=s.pendingProps,f=!1,m=(s.flags&128)!==0,S;if((S=m)||(S=r!==null&&r.memoizedState===null?!1:(Te.current&2)!==0),S&&(f=!0,s.flags&=-129),S=(s.flags&32)!==0,s.flags&=-33,r===null){if(jt){if(f?ps(s):vs(),jt){var T=ae,M;if(M=T){t:{for(M=T,T=nr;M.nodeType!==8;){if(!T){T=null;break t}if(M=$n(M.nextSibling),M===null){T=null;break t}}T=M}T!==null?(s.memoizedState={dehydrated:T,treeContext:sa!==null?{id:Rr,overflow:Mr}:null,retryLane:536870912,hydrationErrors:null},M=rn(18,null,null,0),M.stateNode=T,M.return=s,s.child=M,He=s,ae=null,M=!0):M=!1}M||la(s)}if(T=s.memoizedState,T!==null&&(T=T.dehydrated,T!==null))return $g(T)?s.lanes=32:s.lanes=536870912,null;_r(s)}return T=l.children,l=l.fallback,f?(vs(),f=s.mode,T=Pc({mode:"hidden",children:T},f),l=ia(l,f,o,null),T.return=s,l.return=s,T.sibling=l,s.child=T,f=s.child,f.memoizedState=sg(o),f.childLanes=ag(r,S,o),s.memoizedState=ig,l):(ps(s),og(s,T))}if(M=r.memoizedState,M!==null&&(T=M.dehydrated,T!==null)){if(m)s.flags&256?(ps(s),s.flags&=-257,s=lg(r,s,o)):s.memoizedState!==null?(vs(),s.child=r.child,s.flags|=128,s=null):(vs(),f=l.fallback,T=s.mode,l=Pc({mode:"visible",children:l.children},T),f=ia(f,T,o,null),f.flags|=2,l.return=s,f.return=s,l.sibling=f,s.child=l,oo(s,r.child,null,o),l=s.child,l.memoizedState=sg(o),l.childLanes=ag(r,S,o),s.memoizedState=ig,s=f);else if(ps(s),$g(T)){if(S=T.nextSibling&&T.nextSibling.dataset,S)var G=S.dgst;S=G,l=Error(i(419)),l.stack="",l.digest=S,wl({value:l,source:null,stack:null}),s=lg(r,s,o)}else if(Ce||bl(r,s,o,!1),S=(o&r.childLanes)!==0,Ce||S){if(S=ee,S!==null&&(l=o&-o,l=(l&42)!==0?1:tl(l),l=(l&(S.suspendedLanes|o))!==0?0:l,l!==0&&l!==M.retryLane))throw M.retryLane=l,Fa(r,l),un(S,r,l),Z0;T.data==="$?"||Ng(),s=lg(r,s,o)}else T.data==="$?"?(s.flags|=192,s.child=r.child,s=null):(r=M.treeContext,ae=$n(T.nextSibling),He=s,jt=!0,oa=null,nr=!1,r!==null&&(vn[wn++]=Rr,vn[wn++]=Mr,vn[wn++]=sa,Rr=r.id,Mr=r.overflow,sa=s),s=og(s,l.children),s.flags|=4096);return s}return f?(vs(),f=l.fallback,T=s.mode,M=r.child,G=M.sibling,l=Ir(M,{mode:"hidden",children:l.children}),l.subtreeFlags=M.subtreeFlags&65011712,G!==null?f=Ir(G,f):(f=ia(f,T,o,null),f.flags|=2),f.return=s,l.return=s,l.sibling=f,s.child=l,l=f,f=s.child,T=r.child.memoizedState,T===null?T=sg(o):(M=T.cachePool,M!==null?(G=xe._currentValue,M=M.parent!==G?{parent:G,pool:G}:M):M=Yp(),T={baseLanes:T.baseLanes|o,cachePool:M}),f.memoizedState=T,f.childLanes=ag(r,S,o),s.memoizedState=ig,l):(ps(s),o=r.child,r=o.sibling,o=Ir(o,{mode:"visible",children:l.children}),o.return=s,o.sibling=null,r!==null&&(S=s.deletions,S===null?(s.deletions=[r],s.flags|=16):S.push(r)),s.child=o,s.memoizedState=null,o)}function og(r,s){return s=Pc({mode:"visible",children:s},r.mode),s.return=r,r.child=s}function Pc(r,s){return r=rn(22,r,null,s),r.lanes=0,r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},r}function lg(r,s,o){return oo(s,r.child,null,o),r=og(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function ov(r,s,o){r.lanes|=s;var l=r.alternate;l!==null&&(l.lanes|=s),Nh(r.return,s,o)}function ug(r,s,o,l,f){var m=r.memoizedState;m===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:l,tail:o,tailMode:f}:(m.isBackwards=s,m.rendering=null,m.renderingStartTime=0,m.last=l,m.tail=o,m.tailMode=f)}function lv(r,s,o){var l=s.pendingProps,f=l.revealOrder,m=l.tail;if(Re(r,s,l.children,o),l=Te.current,(l&2)!==0)l=l&1|2,s.flags|=128;else{if(r!==null&&(r.flags&128)!==0)t:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&ov(r,o,s);else if(r.tag===19)ov(r,o,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break t;for(;r.sibling===null;){if(r.return===null||r.return===s)break t;r=r.return}r.sibling.return=r.return,r=r.sibling}l&=1}switch(et(Te,l),f){case"forwards":for(o=s.child,f=null;o!==null;)r=o.alternate,r!==null&&Lc(r)===null&&(f=o),o=o.sibling;o=f,o===null?(f=s.child,s.child=null):(f=o.sibling,o.sibling=null),ug(s,!1,f,o,m);break;case"backwards":for(o=null,f=s.child,s.child=null;f!==null;){if(r=f.alternate,r!==null&&Lc(r)===null){s.child=f;break}r=f.sibling,f.sibling=o,o=f,f=r}ug(s,!0,o,null,m);break;case"together":ug(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Ur(r,s,o){if(r!==null&&(s.dependencies=r.dependencies),Ts|=s.lanes,(o&s.childLanes)===0)if(r!==null){if(bl(r,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(r!==null&&s.child!==r.child)throw Error(i(153));if(s.child!==null){for(r=s.child,o=Ir(r,r.pendingProps),s.child=o,o.return=s;r.sibling!==null;)r=r.sibling,o=o.sibling=Ir(r,r.pendingProps),o.return=s;o.sibling=null}return s.child}function cg(r,s){return(r.lanes&s)!==0?!0:(r=r.dependencies,!!(r!==null&&bc(r)))}function BA(r,s,o){switch(s.tag){case 3:pt(s,s.stateNode.containerInfo),ds(s,xe,r.memoizedState.cache),vl();break;case 27:case 5:Vt(s);break;case 4:pt(s,s.stateNode.containerInfo);break;case 10:ds(s,s.type,s.memoizedProps.value);break;case 13:var l=s.memoizedState;if(l!==null)return l.dehydrated!==null?(ps(s),s.flags|=128,null):(o&s.child.childLanes)!==0?av(r,s,o):(ps(s),r=Ur(r,s,o),r!==null?r.sibling:null);ps(s);break;case 19:var f=(r.flags&128)!==0;if(l=(o&s.childLanes)!==0,l||(bl(r,s,o,!1),l=(o&s.childLanes)!==0),f){if(l)return lv(r,s,o);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),et(Te,Te.current),l)break;return null;case 22:case 23:return s.lanes=0,ev(r,s,o);case 24:ds(s,xe,r.memoizedState.cache)}return Ur(r,s,o)}function uv(r,s,o){if(r!==null)if(r.memoizedProps!==s.pendingProps)Ce=!0;else{if(!cg(r,o)&&(s.flags&128)===0)return Ce=!1,BA(r,s,o);Ce=(r.flags&131072)!==0}else Ce=!1,jt&&(s.flags&1048576)!==0&&qp(s,wc,s.index);switch(s.lanes=0,s.tag){case 16:t:{r=s.pendingProps;var l=s.elementType,f=l._init;if(l=f(l._payload),s.type=l,typeof l=="function")wh(l)?(r=ha(l,r),s.tag=1,s=iv(null,s,l,r,o)):(s.tag=0,s=rg(null,s,l,r,o));else{if(l!=null){if(f=l.$$typeof,f===k){s.tag=11,s=Q0(null,s,l,r,o);break t}else if(f===H){s.tag=14,s=W0(null,s,l,r,o);break t}}throw s=R(l)||l,Error(i(306,s,""))}}return s;case 0:return rg(r,s,s.type,s.pendingProps,o);case 1:return l=s.type,f=ha(l,s.pendingProps),iv(r,s,l,f,o);case 3:t:{if(pt(s,s.stateNode.containerInfo),r===null)throw Error(i(387));l=s.pendingProps;var m=s.memoizedState;f=m.element,Mh(r,s),Cl(s,l,null,o);var S=s.memoizedState;if(l=S.cache,ds(s,xe,l),l!==m.cache&&Ch(s,[xe],o,!0),Nl(),l=S.element,m.isDehydrated)if(m={element:l,isDehydrated:!1,cache:S.cache},s.updateQueue.baseState=m,s.memoizedState=m,s.flags&256){s=sv(r,s,l,o);break t}else if(l!==f){f=yn(Error(i(424)),s),wl(f),s=sv(r,s,l,o);break t}else{switch(r=s.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(ae=$n(r.firstChild),He=s,jt=!0,oa=null,nr=!0,o=J0(s,null,l,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(vl(),l===f){s=Ur(r,s,o);break t}Re(r,s,l,o)}s=s.child}return s;case 26:return qc(r,s),r===null?(o=hw(s.type,null,s.pendingProps,null))?s.memoizedState=o:jt||(o=s.type,r=s.pendingProps,l=tf(dt.current).createElement(o),l[Ne]=s,l[_e]=r,Be(l,o,r),ye(l),s.stateNode=l):s.memoizedState=hw(s.type,r.memoizedProps,s.pendingProps,r.memoizedState),null;case 27:return Vt(s),r===null&&jt&&(l=s.stateNode=cw(s.type,s.pendingProps,dt.current),He=s,nr=!0,f=ae,Cs(s.type)?(Vg=f,ae=$n(l.firstChild)):ae=f),Re(r,s,s.pendingProps.children,o),qc(r,s),r===null&&(s.flags|=4194304),s.child;case 5:return r===null&&jt&&((f=l=ae)&&(l=lE(l,s.type,s.pendingProps,nr),l!==null?(s.stateNode=l,He=s,ae=$n(l.firstChild),nr=!1,f=!0):f=!1),f||la(s)),Vt(s),f=s.type,m=s.pendingProps,S=r!==null?r.memoizedProps:null,l=m.children,Pg(f,m)?l=null:S!==null&&Pg(f,S)&&(s.flags|=32),s.memoizedState!==null&&(f=qh(r,s,NA,null,null,o),Kl._currentValue=f),qc(r,s),Re(r,s,l,o),s.child;case 6:return r===null&&jt&&((r=o=ae)&&(o=uE(o,s.pendingProps,nr),o!==null?(s.stateNode=o,He=s,ae=null,r=!0):r=!1),r||la(s)),null;case 13:return av(r,s,o);case 4:return pt(s,s.stateNode.containerInfo),l=s.pendingProps,r===null?s.child=oo(s,null,l,o):Re(r,s,l,o),s.child;case 11:return Q0(r,s,s.type,s.pendingProps,o);case 7:return Re(r,s,s.pendingProps,o),s.child;case 8:return Re(r,s,s.pendingProps.children,o),s.child;case 12:return Re(r,s,s.pendingProps.children,o),s.child;case 10:return l=s.pendingProps,ds(s,s.type,l.value),Re(r,s,l.children,o),s.child;case 9:return f=s.type._context,l=s.pendingProps.children,ca(s),f=Ue(f),l=l(f),s.flags|=1,Re(r,s,l,o),s.child;case 14:return W0(r,s,s.type,s.pendingProps,o);case 15:return tv(r,s,s.type,s.pendingProps,o);case 19:return lv(r,s,o);case 31:return l=s.pendingProps,o=s.mode,l={mode:l.mode,children:l.children},r===null?(o=Pc(l,o),o.ref=s.ref,s.child=o,o.return=s,s=o):(o=Ir(r.child,l),o.ref=s.ref,s.child=o,o.return=s,s=o),s;case 22:return ev(r,s,o);case 24:return ca(s),l=Ue(xe),r===null?(f=Oh(),f===null&&(f=ee,m=Dh(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=o),f=m),s.memoizedState={parent:l,cache:f},Rh(s),ds(s,xe,f)):((r.lanes&o)!==0&&(Mh(r,s),Cl(s,null,null,o),Nl()),f=r.memoizedState,m=s.memoizedState,f.parent!==l?(f={parent:l,cache:l},s.memoizedState=f,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=f),ds(s,xe,l)):(l=m.cache,ds(s,xe,l),l!==f.cache&&Ch(s,[xe],o,!0))),Re(r,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function qr(r){r.flags|=4}function cv(r,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!vw(s)){if(s=bn.current,s!==null&&((Pt&4194048)===Pt?rr!==null:(Pt&62914560)!==Pt&&(Pt&536870912)===0||s!==rr))throw Al=Ih,Gp;r.flags|=8192}}function Jc(r,s){s!==null&&(r.flags|=4),r.flags&16384&&(s=r.tag!==22?Ku():536870912,r.lanes|=s,fo|=s)}function Bl(r,s){if(!jt)switch(r.tailMode){case"hidden":s=r.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?r.tail=null:o.sibling=null;break;case"collapsed":o=r.tail;for(var l=null;o!==null;)o.alternate!==null&&(l=o),o=o.sibling;l===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:l.sibling=null}}function se(r){var s=r.alternate!==null&&r.alternate.child===r.child,o=0,l=0;if(s)for(var f=r.child;f!==null;)o|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=r,f=f.sibling;else for(f=r.child;f!==null;)o|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=r,f=f.sibling;return r.subtreeFlags|=l,r.childLanes=o,s}function zA(r,s,o){var l=s.pendingProps;switch(Th(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return se(s),null;case 1:return se(s),null;case 3:return o=s.stateNode,l=null,r!==null&&(l=r.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),zr(xe),Dt(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(r===null||r.child===null)&&(pl(s)?qr(s):r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Hp())),se(s),null;case 26:return o=s.memoizedState,r===null?(qr(s),o!==null?(se(s),cv(s,o)):(se(s),s.flags&=-16777217)):o?o!==r.memoizedState?(qr(s),se(s),cv(s,o)):(se(s),s.flags&=-16777217):(r.memoizedProps!==l&&qr(s),se(s),s.flags&=-16777217),null;case 27:Ot(s),o=dt.current;var f=s.type;if(r!==null&&s.stateNode!=null)r.memoizedProps!==l&&qr(s);else{if(!l){if(s.stateNode===null)throw Error(i(166));return se(s),null}r=ut.current,pl(s)?Pp(s):(r=cw(f,l,o),s.stateNode=r,qr(s))}return se(s),null;case 5:if(Ot(s),o=s.type,r!==null&&s.stateNode!=null)r.memoizedProps!==l&&qr(s);else{if(!l){if(s.stateNode===null)throw Error(i(166));return se(s),null}if(r=ut.current,pl(s))Pp(s);else{switch(f=tf(dt.current),r){case 1:r=f.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:r=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":r=f.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":r=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":r=f.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof l.is=="string"?f.createElement("select",{is:l.is}):f.createElement("select"),l.multiple?r.multiple=!0:l.size&&(r.size=l.size);break;default:r=typeof l.is=="string"?f.createElement(o,{is:l.is}):f.createElement(o)}}r[Ne]=s,r[_e]=l;t:for(f=s.child;f!==null;){if(f.tag===5||f.tag===6)r.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===s)break t;for(;f.sibling===null;){if(f.return===null||f.return===s)break t;f=f.return}f.sibling.return=f.return,f=f.sibling}s.stateNode=r;t:switch(Be(r,o,l),o){case"button":case"input":case"select":case"textarea":r=!!l.autoFocus;break t;case"img":r=!0;break t;default:r=!1}r&&qr(s)}}return se(s),s.flags&=-16777217,null;case 6:if(r&&s.stateNode!=null)r.memoizedProps!==l&&qr(s);else{if(typeof l!="string"&&s.stateNode===null)throw Error(i(166));if(r=dt.current,pl(s)){if(r=s.stateNode,o=s.memoizedProps,l=null,f=He,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}r[Ne]=s,r=!!(r.nodeValue===o||l!==null&&l.suppressHydrationWarning===!0||rw(r.nodeValue,o)),r||la(s)}else r=tf(r).createTextNode(l),r[Ne]=s,s.stateNode=r}return se(s),null;case 13:if(l=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(f=pl(s),l!==null&&l.dehydrated!==null){if(r===null){if(!f)throw Error(i(318));if(f=s.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(317));f[Ne]=s}else vl(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;se(s),f=!1}else f=Hp(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=f),f=!0;if(!f)return s.flags&256?(_r(s),s):(_r(s),null)}if(_r(s),(s.flags&128)!==0)return s.lanes=o,s;if(o=l!==null,r=r!==null&&r.memoizedState!==null,o){l=s.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool);var m=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),m!==f&&(l.flags|=2048)}return o!==r&&o&&(s.child.flags|=8192),Jc(s,s.updateQueue),se(s),null;case 4:return Dt(),r===null&&zg(s.stateNode.containerInfo),se(s),null;case 10:return zr(s.type),se(s),null;case 19:if(Q(Te),f=s.memoizedState,f===null)return se(s),null;if(l=(s.flags&128)!==0,m=f.rendering,m===null)if(l)Bl(f,!1);else{if(oe!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(m=Lc(r),m!==null){for(s.flags|=128,Bl(f,!1),r=m.updateQueue,s.updateQueue=r,Jc(s,r),s.subtreeFlags=0,r=o,o=s.child;o!==null;)Up(o,r),o=o.sibling;return et(Te,Te.current&1|2),s.child}r=r.sibling}f.tail!==null&&Oe()>Vc&&(s.flags|=128,l=!0,Bl(f,!1),s.lanes=4194304)}else{if(!l)if(r=Lc(m),r!==null){if(s.flags|=128,l=!0,r=r.updateQueue,s.updateQueue=r,Jc(s,r),Bl(f,!0),f.tail===null&&f.tailMode==="hidden"&&!m.alternate&&!jt)return se(s),null}else 2*Oe()-f.renderingStartTime>Vc&&o!==536870912&&(s.flags|=128,l=!0,Bl(f,!1),s.lanes=4194304);f.isBackwards?(m.sibling=s.child,s.child=m):(r=f.last,r!==null?r.sibling=m:s.child=m,f.last=m)}return f.tail!==null?(s=f.tail,f.rendering=s,f.tail=s.sibling,f.renderingStartTime=Oe(),s.sibling=null,r=Te.current,et(Te,l?r&1|2:r&1),s):(se(s),null);case 22:case 23:return _r(s),_h(),l=s.memoizedState!==null,r!==null?r.memoizedState!==null!==l&&(s.flags|=8192):l&&(s.flags|=8192),l?(o&536870912)!==0&&(s.flags&128)===0&&(se(s),s.subtreeFlags&6&&(s.flags|=8192)):se(s),o=s.updateQueue,o!==null&&Jc(s,o.retryQueue),o=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),l=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),l!==o&&(s.flags|=2048),r!==null&&Q(fa),null;case 24:return o=null,r!==null&&(o=r.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),zr(xe),se(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function LA(r,s){switch(Th(s),s.tag){case 1:return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return zr(xe),Dt(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 26:case 27:case 5:return Ot(s),null;case 13:if(_r(s),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(i(340));vl()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return Q(Te),null;case 4:return Dt(),null;case 10:return zr(s.type),null;case 22:case 23:return _r(s),_h(),r!==null&&Q(fa),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 24:return zr(xe),null;case 25:return null;default:return null}}function fv(r,s){switch(Th(s),s.tag){case 3:zr(xe),Dt();break;case 26:case 27:case 5:Ot(s);break;case 4:Dt();break;case 13:_r(s);break;case 19:Q(Te);break;case 10:zr(s.type);break;case 22:case 23:_r(s),_h(),r!==null&&Q(fa);break;case 24:zr(xe)}}function zl(r,s){try{var o=s.updateQueue,l=o!==null?o.lastEffect:null;if(l!==null){var f=l.next;o=f;do{if((o.tag&r)===r){l=void 0;var m=o.create,S=o.inst;l=m(),S.destroy=l}o=o.next}while(o!==f)}}catch(T){Wt(s,s.return,T)}}function ws(r,s,o){try{var l=s.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var m=f.next;l=m;do{if((l.tag&r)===r){var S=l.inst,T=S.destroy;if(T!==void 0){S.destroy=void 0,f=s;var M=o,G=T;try{G()}catch(st){Wt(f,M,st)}}}l=l.next}while(l!==m)}}catch(st){Wt(s,s.return,st)}}function dv(r){var s=r.updateQueue;if(s!==null){var o=r.stateNode;try{Wp(s,o)}catch(l){Wt(r,r.return,l)}}}function hv(r,s,o){o.props=ha(r.type,r.memoizedProps),o.state=r.memoizedState;try{o.componentWillUnmount()}catch(l){Wt(r,s,l)}}function Ll(r,s){try{var o=r.ref;if(o!==null){switch(r.tag){case 26:case 27:case 5:var l=r.stateNode;break;case 30:l=r.stateNode;break;default:l=r.stateNode}typeof o=="function"?r.refCleanup=o(l):o.current=l}}catch(f){Wt(r,s,f)}}function ir(r,s){var o=r.ref,l=r.refCleanup;if(o!==null)if(typeof l=="function")try{l()}catch(f){Wt(r,s,f)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){Wt(r,s,f)}else o.current=null}function gv(r){var s=r.type,o=r.memoizedProps,l=r.stateNode;try{t:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&l.focus();break t;case"img":o.src?l.src=o.src:o.srcSet&&(l.srcset=o.srcSet)}}catch(f){Wt(r,r.return,f)}}function fg(r,s,o){try{var l=r.stateNode;rE(l,r.type,o,s),l[_e]=s}catch(f){Wt(r,r.return,f)}}function mv(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&Cs(r.type)||r.tag===4}function dg(r){t:for(;;){for(;r.sibling===null;){if(r.return===null||mv(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&Cs(r.type)||r.flags&2||r.child===null||r.tag===4)continue t;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function hg(r,s,o){var l=r.tag;if(l===5||l===6)r=r.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(r,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(r),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=Wc));else if(l!==4&&(l===27&&Cs(r.type)&&(o=r.stateNode,s=null),r=r.child,r!==null))for(hg(r,s,o),r=r.sibling;r!==null;)hg(r,s,o),r=r.sibling}function Hc(r,s,o){var l=r.tag;if(l===5||l===6)r=r.stateNode,s?o.insertBefore(r,s):o.appendChild(r);else if(l!==4&&(l===27&&Cs(r.type)&&(o=r.stateNode),r=r.child,r!==null))for(Hc(r,s,o),r=r.sibling;r!==null;)Hc(r,s,o),r=r.sibling}function yv(r){var s=r.stateNode,o=r.memoizedProps;try{for(var l=r.type,f=s.attributes;f.length;)s.removeAttributeNode(f[0]);Be(s,l,o),s[Ne]=r,s[_e]=o}catch(m){Wt(r,r.return,m)}}var Pr=!1,he=!1,gg=!1,pv=typeof WeakSet=="function"?WeakSet:Set,De=null;function _A(r,s){if(r=r.containerInfo,Ug=of,r=Dp(r),dh(r)){if("selectionStart"in r)var o={start:r.selectionStart,end:r.selectionEnd};else t:{o=(o=r.ownerDocument)&&o.defaultView||window;var l=o.getSelection&&o.getSelection();if(l&&l.rangeCount!==0){o=l.anchorNode;var f=l.anchorOffset,m=l.focusNode;l=l.focusOffset;try{o.nodeType,m.nodeType}catch{o=null;break t}var S=0,T=-1,M=-1,G=0,st=0,lt=r,K=null;e:for(;;){for(var F;lt!==o||f!==0&&lt.nodeType!==3||(T=S+f),lt!==m||l!==0&&lt.nodeType!==3||(M=S+l),lt.nodeType===3&&(S+=lt.nodeValue.length),(F=lt.firstChild)!==null;)K=lt,lt=F;for(;;){if(lt===r)break e;if(K===o&&++G===f&&(T=S),K===m&&++st===l&&(M=S),(F=lt.nextSibling)!==null)break;lt=K,K=lt.parentNode}lt=F}o=T===-1||M===-1?null:{start:T,end:M}}else o=null}o=o||{start:0,end:0}}else o=null;for(qg={focusedElem:r,selectionRange:o},of=!1,De=s;De!==null;)if(s=De,r=s.child,(s.subtreeFlags&1024)!==0&&r!==null)r.return=s,De=r;else for(;De!==null;){switch(s=De,m=s.alternate,r=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((r&1024)!==0&&m!==null){r=void 0,o=s,f=m.memoizedProps,m=m.memoizedState,l=o.stateNode;try{var kt=ha(o.type,f,o.elementType===o.type);r=l.getSnapshotBeforeUpdate(kt,m),l.__reactInternalSnapshotBeforeUpdate=r}catch(Nt){Wt(o,o.return,Nt)}}break;case 3:if((r&1024)!==0){if(r=s.stateNode.containerInfo,o=r.nodeType,o===9)Hg(r);else if(o===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":Hg(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=s.sibling,r!==null){r.return=s.return,De=r;break}De=s.return}}function vv(r,s,o){var l=o.flags;switch(o.tag){case 0:case 11:case 15:bs(r,o),l&4&&zl(5,o);break;case 1:if(bs(r,o),l&4)if(r=o.stateNode,s===null)try{r.componentDidMount()}catch(S){Wt(o,o.return,S)}else{var f=ha(o.type,s.memoizedProps);s=s.memoizedState;try{r.componentDidUpdate(f,s,r.__reactInternalSnapshotBeforeUpdate)}catch(S){Wt(o,o.return,S)}}l&64&&dv(o),l&512&&Ll(o,o.return);break;case 3:if(bs(r,o),l&64&&(r=o.updateQueue,r!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{Wp(r,s)}catch(S){Wt(o,o.return,S)}}break;case 27:s===null&&l&4&&yv(o);case 26:case 5:bs(r,o),s===null&&l&4&&gv(o),l&512&&Ll(o,o.return);break;case 12:bs(r,o);break;case 13:bs(r,o),l&4&&Sv(r,o),l&64&&(r=o.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(o=YA.bind(null,o),cE(r,o))));break;case 22:if(l=o.memoizedState!==null||Pr,!l){s=s!==null&&s.memoizedState!==null||he,f=Pr;var m=he;Pr=l,(he=s)&&!m?Ss(r,o,(o.subtreeFlags&8772)!==0):bs(r,o),Pr=f,he=m}break;case 30:break;default:bs(r,o)}}function wv(r){var s=r.alternate;s!==null&&(r.alternate=null,wv(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&rl(s)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var ne=null,Xe=!1;function Jr(r,s,o){for(o=o.child;o!==null;)bv(r,s,o),o=o.sibling}function bv(r,s,o){if(Ee&&typeof Ee.onCommitFiberUnmount=="function")try{Ee.onCommitFiberUnmount(qn,o)}catch{}switch(o.tag){case 26:he||ir(o,s),Jr(r,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:he||ir(o,s);var l=ne,f=Xe;Cs(o.type)&&(ne=o.stateNode,Xe=!1),Jr(r,s,o),jl(o.stateNode),ne=l,Xe=f;break;case 5:he||ir(o,s);case 6:if(l=ne,f=Xe,ne=null,Jr(r,s,o),ne=l,Xe=f,ne!==null)if(Xe)try{(ne.nodeType===9?ne.body:ne.nodeName==="HTML"?ne.ownerDocument.body:ne).removeChild(o.stateNode)}catch(m){Wt(o,s,m)}else try{ne.removeChild(o.stateNode)}catch(m){Wt(o,s,m)}break;case 18:ne!==null&&(Xe?(r=ne,lw(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,o.stateNode),Wl(r)):lw(ne,o.stateNode));break;case 4:l=ne,f=Xe,ne=o.stateNode.containerInfo,Xe=!0,Jr(r,s,o),ne=l,Xe=f;break;case 0:case 11:case 14:case 15:he||ws(2,o,s),he||ws(4,o,s),Jr(r,s,o);break;case 1:he||(ir(o,s),l=o.stateNode,typeof l.componentWillUnmount=="function"&&hv(o,s,l)),Jr(r,s,o);break;case 21:Jr(r,s,o);break;case 22:he=(l=he)||o.memoizedState!==null,Jr(r,s,o),he=l;break;default:Jr(r,s,o)}}function Sv(r,s){if(s.memoizedState===null&&(r=s.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{Wl(r)}catch(o){Wt(s,s.return,o)}}function UA(r){switch(r.tag){case 13:case 19:var s=r.stateNode;return s===null&&(s=r.stateNode=new pv),s;case 22:return r=r.stateNode,s=r._retryCache,s===null&&(s=r._retryCache=new pv),s;default:throw Error(i(435,r.tag))}}function mg(r,s){var o=UA(r);s.forEach(function(l){var f=GA.bind(null,r,l);o.has(l)||(o.add(l),l.then(f,f))})}function sn(r,s){var o=s.deletions;if(o!==null)for(var l=0;l<o.length;l++){var f=o[l],m=r,S=s,T=S;t:for(;T!==null;){switch(T.tag){case 27:if(Cs(T.type)){ne=T.stateNode,Xe=!1;break t}break;case 5:ne=T.stateNode,Xe=!1;break t;case 3:case 4:ne=T.stateNode.containerInfo,Xe=!0;break t}T=T.return}if(ne===null)throw Error(i(160));bv(m,S,f),ne=null,Xe=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)xv(s,r),s=s.sibling}var Hn=null;function xv(r,s){var o=r.alternate,l=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:sn(s,r),an(r),l&4&&(ws(3,r,r.return),zl(3,r),ws(5,r,r.return));break;case 1:sn(s,r),an(r),l&512&&(he||o===null||ir(o,o.return)),l&64&&Pr&&(r=r.updateQueue,r!==null&&(l=r.callbacks,l!==null&&(o=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=o===null?l:o.concat(l))));break;case 26:var f=Hn;if(sn(s,r),an(r),l&512&&(he||o===null||ir(o,o.return)),l&4){var m=o!==null?o.memoizedState:null;if(l=r.memoizedState,o===null)if(l===null)if(r.stateNode===null){t:{l=r.type,o=r.memoizedProps,f=f.ownerDocument||f;e:switch(l){case"title":m=f.getElementsByTagName("title")[0],(!m||m[Ws]||m[Ne]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(l),f.head.insertBefore(m,f.querySelector("head > title"))),Be(m,l,o),m[Ne]=r,ye(m),l=m;break t;case"link":var S=yw("link","href",f).get(l+(o.href||""));if(S){for(var T=0;T<S.length;T++)if(m=S[T],m.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&m.getAttribute("rel")===(o.rel==null?null:o.rel)&&m.getAttribute("title")===(o.title==null?null:o.title)&&m.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){S.splice(T,1);break e}}m=f.createElement(l),Be(m,l,o),f.head.appendChild(m);break;case"meta":if(S=yw("meta","content",f).get(l+(o.content||""))){for(T=0;T<S.length;T++)if(m=S[T],m.getAttribute("content")===(o.content==null?null:""+o.content)&&m.getAttribute("name")===(o.name==null?null:o.name)&&m.getAttribute("property")===(o.property==null?null:o.property)&&m.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&m.getAttribute("charset")===(o.charSet==null?null:o.charSet)){S.splice(T,1);break e}}m=f.createElement(l),Be(m,l,o),f.head.appendChild(m);break;default:throw Error(i(468,l))}m[Ne]=r,ye(m),l=m}r.stateNode=l}else pw(f,r.type,r.stateNode);else r.stateNode=mw(f,l,r.memoizedProps);else m!==l?(m===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):m.count--,l===null?pw(f,r.type,r.stateNode):mw(f,l,r.memoizedProps)):l===null&&r.stateNode!==null&&fg(r,r.memoizedProps,o.memoizedProps)}break;case 27:sn(s,r),an(r),l&512&&(he||o===null||ir(o,o.return)),o!==null&&l&4&&fg(r,r.memoizedProps,o.memoizedProps);break;case 5:if(sn(s,r),an(r),l&512&&(he||o===null||ir(o,o.return)),r.flags&32){f=r.stateNode;try{$a(f,"")}catch(F){Wt(r,r.return,F)}}l&4&&r.stateNode!=null&&(f=r.memoizedProps,fg(r,f,o!==null?o.memoizedProps:f)),l&1024&&(gg=!0);break;case 6:if(sn(s,r),an(r),l&4){if(r.stateNode===null)throw Error(i(162));l=r.memoizedProps,o=r.stateNode;try{o.nodeValue=l}catch(F){Wt(r,r.return,F)}}break;case 3:if(rf=null,f=Hn,Hn=ef(s.containerInfo),sn(s,r),Hn=f,an(r),l&4&&o!==null&&o.memoizedState.isDehydrated)try{Wl(s.containerInfo)}catch(F){Wt(r,r.return,F)}gg&&(gg=!1,Tv(r));break;case 4:l=Hn,Hn=ef(r.stateNode.containerInfo),sn(s,r),an(r),Hn=l;break;case 12:sn(s,r),an(r);break;case 13:sn(s,r),an(r),r.child.flags&8192&&r.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Sg=Oe()),l&4&&(l=r.updateQueue,l!==null&&(r.updateQueue=null,mg(r,l)));break;case 22:f=r.memoizedState!==null;var M=o!==null&&o.memoizedState!==null,G=Pr,st=he;if(Pr=G||f,he=st||M,sn(s,r),he=st,Pr=G,an(r),l&8192)t:for(s=r.stateNode,s._visibility=f?s._visibility&-2:s._visibility|1,f&&(o===null||M||Pr||he||ga(r)),o=null,s=r;;){if(s.tag===5||s.tag===26){if(o===null){M=o=s;try{if(m=M.stateNode,f)S=m.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{T=M.stateNode;var lt=M.memoizedProps.style,K=lt!=null&&lt.hasOwnProperty("display")?lt.display:null;T.style.display=K==null||typeof K=="boolean"?"":(""+K).trim()}}catch(F){Wt(M,M.return,F)}}}else if(s.tag===6){if(o===null){M=s;try{M.stateNode.nodeValue=f?"":M.memoizedProps}catch(F){Wt(M,M.return,F)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===r)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break t;for(;s.sibling===null;){if(s.return===null||s.return===r)break t;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}l&4&&(l=r.updateQueue,l!==null&&(o=l.retryQueue,o!==null&&(l.retryQueue=null,mg(r,o))));break;case 19:sn(s,r),an(r),l&4&&(l=r.updateQueue,l!==null&&(r.updateQueue=null,mg(r,l)));break;case 30:break;case 21:break;default:sn(s,r),an(r)}}function an(r){var s=r.flags;if(s&2){try{for(var o,l=r.return;l!==null;){if(mv(l)){o=l;break}l=l.return}if(o==null)throw Error(i(160));switch(o.tag){case 27:var f=o.stateNode,m=dg(r);Hc(r,m,f);break;case 5:var S=o.stateNode;o.flags&32&&($a(S,""),o.flags&=-33);var T=dg(r);Hc(r,T,S);break;case 3:case 4:var M=o.stateNode.containerInfo,G=dg(r);hg(r,G,M);break;default:throw Error(i(161))}}catch(st){Wt(r,r.return,st)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function Tv(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var s=r;Tv(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),r=r.sibling}}function bs(r,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)vv(r,s.alternate,s),s=s.sibling}function ga(r){for(r=r.child;r!==null;){var s=r;switch(s.tag){case 0:case 11:case 14:case 15:ws(4,s,s.return),ga(s);break;case 1:ir(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&hv(s,s.return,o),ga(s);break;case 27:jl(s.stateNode);case 26:case 5:ir(s,s.return),ga(s);break;case 22:s.memoizedState===null&&ga(s);break;case 30:ga(s);break;default:ga(s)}r=r.sibling}}function Ss(r,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var l=s.alternate,f=r,m=s,S=m.flags;switch(m.tag){case 0:case 11:case 15:Ss(f,m,o),zl(4,m);break;case 1:if(Ss(f,m,o),l=m,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(G){Wt(l,l.return,G)}if(l=m,f=l.updateQueue,f!==null){var T=l.stateNode;try{var M=f.shared.hiddenCallbacks;if(M!==null)for(f.shared.hiddenCallbacks=null,f=0;f<M.length;f++)Qp(M[f],T)}catch(G){Wt(l,l.return,G)}}o&&S&64&&dv(m),Ll(m,m.return);break;case 27:yv(m);case 26:case 5:Ss(f,m,o),o&&l===null&&S&4&&gv(m),Ll(m,m.return);break;case 12:Ss(f,m,o);break;case 13:Ss(f,m,o),o&&S&4&&Sv(f,m);break;case 22:m.memoizedState===null&&Ss(f,m,o),Ll(m,m.return);break;case 30:break;default:Ss(f,m,o)}s=s.sibling}}function yg(r,s){var o=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),r=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(r=s.memoizedState.cachePool.pool),r!==o&&(r!=null&&r.refCount++,o!=null&&Sl(o))}function pg(r,s){r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&Sl(r))}function sr(r,s,o,l){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Av(r,s,o,l),s=s.sibling}function Av(r,s,o,l){var f=s.flags;switch(s.tag){case 0:case 11:case 15:sr(r,s,o,l),f&2048&&zl(9,s);break;case 1:sr(r,s,o,l);break;case 3:sr(r,s,o,l),f&2048&&(r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&Sl(r)));break;case 12:if(f&2048){sr(r,s,o,l),r=s.stateNode;try{var m=s.memoizedProps,S=m.id,T=m.onPostCommit;typeof T=="function"&&T(S,s.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(M){Wt(s,s.return,M)}}else sr(r,s,o,l);break;case 13:sr(r,s,o,l);break;case 23:break;case 22:m=s.stateNode,S=s.alternate,s.memoizedState!==null?m._visibility&2?sr(r,s,o,l):_l(r,s):m._visibility&2?sr(r,s,o,l):(m._visibility|=2,lo(r,s,o,l,(s.subtreeFlags&10256)!==0)),f&2048&&yg(S,s);break;case 24:sr(r,s,o,l),f&2048&&pg(s.alternate,s);break;default:sr(r,s,o,l)}}function lo(r,s,o,l,f){for(f=f&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var m=r,S=s,T=o,M=l,G=S.flags;switch(S.tag){case 0:case 11:case 15:lo(m,S,T,M,f),zl(8,S);break;case 23:break;case 22:var st=S.stateNode;S.memoizedState!==null?st._visibility&2?lo(m,S,T,M,f):_l(m,S):(st._visibility|=2,lo(m,S,T,M,f)),f&&G&2048&&yg(S.alternate,S);break;case 24:lo(m,S,T,M,f),f&&G&2048&&pg(S.alternate,S);break;default:lo(m,S,T,M,f)}s=s.sibling}}function _l(r,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=r,l=s,f=l.flags;switch(l.tag){case 22:_l(o,l),f&2048&&yg(l.alternate,l);break;case 24:_l(o,l),f&2048&&pg(l.alternate,l);break;default:_l(o,l)}s=s.sibling}}var Ul=8192;function uo(r){if(r.subtreeFlags&Ul)for(r=r.child;r!==null;)Ev(r),r=r.sibling}function Ev(r){switch(r.tag){case 26:uo(r),r.flags&Ul&&r.memoizedState!==null&&TE(Hn,r.memoizedState,r.memoizedProps);break;case 5:uo(r);break;case 3:case 4:var s=Hn;Hn=ef(r.stateNode.containerInfo),uo(r),Hn=s;break;case 22:r.memoizedState===null&&(s=r.alternate,s!==null&&s.memoizedState!==null?(s=Ul,Ul=16777216,uo(r),Ul=s):uo(r));break;default:uo(r)}}function Nv(r){var s=r.alternate;if(s!==null&&(r=s.child,r!==null)){s.child=null;do s=r.sibling,r.sibling=null,r=s;while(r!==null)}}function ql(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var l=s[o];De=l,Dv(l,r)}Nv(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Cv(r),r=r.sibling}function Cv(r){switch(r.tag){case 0:case 11:case 15:ql(r),r.flags&2048&&ws(9,r,r.return);break;case 3:ql(r);break;case 12:ql(r);break;case 22:var s=r.stateNode;r.memoizedState!==null&&s._visibility&2&&(r.return===null||r.return.tag!==13)?(s._visibility&=-3,$c(r)):ql(r);break;default:ql(r)}}function $c(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var l=s[o];De=l,Dv(l,r)}Nv(r)}for(r=r.child;r!==null;){switch(s=r,s.tag){case 0:case 11:case 15:ws(8,s,s.return),$c(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,$c(s));break;default:$c(s)}r=r.sibling}}function Dv(r,s){for(;De!==null;){var o=De;switch(o.tag){case 0:case 11:case 15:ws(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var l=o.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Sl(o.memoizedState.cache)}if(l=o.child,l!==null)l.return=o,De=l;else t:for(o=r;De!==null;){l=De;var f=l.sibling,m=l.return;if(wv(l),l===o){De=null;break t}if(f!==null){f.return=m,De=f;break t}De=m}}}var qA={getCacheForType:function(r){var s=Ue(xe),o=s.data.get(r);return o===void 0&&(o=r(),s.data.set(r,o)),o}},PA=typeof WeakMap=="function"?WeakMap:Map,Xt=0,ee=null,zt=null,Pt=0,Kt=0,on=null,xs=!1,co=!1,vg=!1,Hr=0,oe=0,Ts=0,ma=0,wg=0,Sn=0,fo=0,Pl=null,Ke=null,bg=!1,Sg=0,Vc=1/0,jc=null,As=null,Me=0,Es=null,ho=null,go=0,xg=0,Tg=null,kv=null,Jl=0,Ag=null;function ln(){if((Xt&2)!==0&&Pt!==0)return Pt&-Pt;if(D.T!==null){var r=to;return r!==0?r:Ig()}return Zu()}function Ov(){Sn===0&&(Sn=(Pt&536870912)===0||jt?Xu():536870912);var r=bn.current;return r!==null&&(r.flags|=32),Sn}function un(r,s,o){(r===ee&&(Kt===2||Kt===9)||r.cancelPendingCommit!==null)&&(mo(r,0),Ns(r,Pt,Sn,!1)),Qs(r,o),((Xt&2)===0||r!==ee)&&(r===ee&&((Xt&2)===0&&(ma|=o),oe===4&&Ns(r,Pt,Sn,!1)),ar(r))}function Iv(r,s,o){if((Xt&6)!==0)throw Error(i(327));var l=!o&&(s&124)===0&&(s&r.expiredLanes)===0||Zs(r,s),f=l?$A(r,s):Cg(r,s,!0),m=l;do{if(f===0){co&&!l&&Ns(r,s,0,!1);break}else{if(o=r.current.alternate,m&&!JA(o)){f=Cg(r,s,!1),m=!1;continue}if(f===2){if(m=s,r.errorRecoveryDisabledLanes&m)var S=0;else S=r.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){s=S;t:{var T=r;f=Pl;var M=T.current.memoizedState.isDehydrated;if(M&&(mo(T,S).flags|=256),S=Cg(T,S,!1),S!==2){if(vg&&!M){T.errorRecoveryDisabledLanes|=m,ma|=m,f=4;break t}m=Ke,Ke=f,m!==null&&(Ke===null?Ke=m:Ke.push.apply(Ke,m))}f=S}if(m=!1,f!==2)continue}}if(f===1){mo(r,0),Ns(r,s,0,!0);break}t:{switch(l=r,m=f,m){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:Ns(l,s,Sn,!xs);break t;case 2:Ke=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(f=Sg+300-Oe(),10<f)){if(Ns(l,s,Sn,!xs),La(l,0,!0)!==0)break t;l.timeoutHandle=aw(Rv.bind(null,l,o,Ke,jc,bg,s,Sn,ma,fo,xs,m,2,-0,0),f);break t}Rv(l,o,Ke,jc,bg,s,Sn,ma,fo,xs,m,0,-0,0)}}break}while(!0);ar(r)}function Rv(r,s,o,l,f,m,S,T,M,G,st,lt,K,F){if(r.timeoutHandle=-1,lt=s.subtreeFlags,(lt&8192||(lt&16785408)===16785408)&&(Xl={stylesheets:null,count:0,unsuspend:xE},Ev(s),lt=AE(),lt!==null)){r.cancelPendingCommit=lt(qv.bind(null,r,s,m,o,l,f,S,T,M,st,1,K,F)),Ns(r,m,S,!G);return}qv(r,s,m,o,l,f,S,T,M)}function JA(r){for(var s=r;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var l=0;l<o.length;l++){var f=o[l],m=f.getSnapshot;f=f.value;try{if(!nn(m(),f))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Ns(r,s,o,l){s&=~wg,s&=~ma,r.suspendedLanes|=s,r.pingedLanes&=~s,l&&(r.warmLanes|=s),l=r.expirationTimes;for(var f=s;0<f;){var m=31-Ie(f),S=1<<m;l[m]=-1,f&=~S}o!==0&&Wo(r,o,s)}function Yc(){return(Xt&6)===0?(Hl(0),!1):!0}function Eg(){if(zt!==null){if(Kt===0)var r=zt.return;else r=zt,Br=ua=null,Hh(r),ao=null,Rl=0,r=zt;for(;r!==null;)fv(r.alternate,r),r=r.return;zt=null}}function mo(r,s){var o=r.timeoutHandle;o!==-1&&(r.timeoutHandle=-1,sE(o)),o=r.cancelPendingCommit,o!==null&&(r.cancelPendingCommit=null,o()),Eg(),ee=r,zt=o=Ir(r.current,null),Pt=s,Kt=0,on=null,xs=!1,co=Zs(r,s),vg=!1,fo=Sn=wg=ma=Ts=oe=0,Ke=Pl=null,bg=!1,(s&8)!==0&&(s|=s&32);var l=r.entangledLanes;if(l!==0)for(r=r.entanglements,l&=s;0<l;){var f=31-Ie(l),m=1<<f;s|=r[f],l&=~m}return Hr=s,gc(),o}function Mv(r,s){Mt=null,D.H=Mc,s===Tl||s===Tc?(s=Fp(),Kt=3):s===Gp?(s=Fp(),Kt=4):Kt=s===Z0?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,on=s,zt===null&&(oe=1,Uc(r,yn(s,r.current)))}function Bv(){var r=D.H;return D.H=Mc,r===null?Mc:r}function zv(){var r=D.A;return D.A=qA,r}function Ng(){oe=4,xs||(Pt&4194048)!==Pt&&bn.current!==null||(co=!0),(Ts&134217727)===0&&(ma&134217727)===0||ee===null||Ns(ee,Pt,Sn,!1)}function Cg(r,s,o){var l=Xt;Xt|=2;var f=Bv(),m=zv();(ee!==r||Pt!==s)&&(jc=null,mo(r,s)),s=!1;var S=oe;t:do try{if(Kt!==0&&zt!==null){var T=zt,M=on;switch(Kt){case 8:Eg(),S=6;break t;case 3:case 2:case 9:case 6:bn.current===null&&(s=!0);var G=Kt;if(Kt=0,on=null,yo(r,T,M,G),o&&co){S=0;break t}break;default:G=Kt,Kt=0,on=null,yo(r,T,M,G)}}HA(),S=oe;break}catch(st){Mv(r,st)}while(!0);return s&&r.shellSuspendCounter++,Br=ua=null,Xt=l,D.H=f,D.A=m,zt===null&&(ee=null,Pt=0,gc()),S}function HA(){for(;zt!==null;)Lv(zt)}function $A(r,s){var o=Xt;Xt|=2;var l=Bv(),f=zv();ee!==r||Pt!==s?(jc=null,Vc=Oe()+500,mo(r,s)):co=Zs(r,s);t:do try{if(Kt!==0&&zt!==null){s=zt;var m=on;e:switch(Kt){case 1:Kt=0,on=null,yo(r,s,m,1);break;case 2:case 9:if(Xp(m)){Kt=0,on=null,_v(s);break}s=function(){Kt!==2&&Kt!==9||ee!==r||(Kt=7),ar(r)},m.then(s,s);break t;case 3:Kt=7;break t;case 4:Kt=5;break t;case 7:Xp(m)?(Kt=0,on=null,_v(s)):(Kt=0,on=null,yo(r,s,m,7));break;case 5:var S=null;switch(zt.tag){case 26:S=zt.memoizedState;case 5:case 27:var T=zt;if(!S||vw(S)){Kt=0,on=null;var M=T.sibling;if(M!==null)zt=M;else{var G=T.return;G!==null?(zt=G,Gc(G)):zt=null}break e}}Kt=0,on=null,yo(r,s,m,5);break;case 6:Kt=0,on=null,yo(r,s,m,6);break;case 8:Eg(),oe=6;break t;default:throw Error(i(462))}}VA();break}catch(st){Mv(r,st)}while(!0);return Br=ua=null,D.H=l,D.A=f,Xt=o,zt!==null?0:(ee=null,Pt=0,gc(),oe)}function VA(){for(;zt!==null&&!Se();)Lv(zt)}function Lv(r){var s=uv(r.alternate,r,Hr);r.memoizedProps=r.pendingProps,s===null?Gc(r):zt=s}function _v(r){var s=r,o=s.alternate;switch(s.tag){case 15:case 0:s=rv(o,s,s.pendingProps,s.type,void 0,Pt);break;case 11:s=rv(o,s,s.pendingProps,s.type.render,s.ref,Pt);break;case 5:Hh(s);default:fv(o,s),s=zt=Up(s,Hr),s=uv(o,s,Hr)}r.memoizedProps=r.pendingProps,s===null?Gc(r):zt=s}function yo(r,s,o,l){Br=ua=null,Hh(s),ao=null,Rl=0;var f=s.return;try{if(MA(r,f,s,o,Pt)){oe=1,Uc(r,yn(o,r.current)),zt=null;return}}catch(m){if(f!==null)throw zt=f,m;oe=1,Uc(r,yn(o,r.current)),zt=null;return}s.flags&32768?(jt||l===1?r=!0:co||(Pt&536870912)!==0?r=!1:(xs=r=!0,(l===2||l===9||l===3||l===6)&&(l=bn.current,l!==null&&l.tag===13&&(l.flags|=16384))),Uv(s,r)):Gc(s)}function Gc(r){var s=r;do{if((s.flags&32768)!==0){Uv(s,xs);return}r=s.return;var o=zA(s.alternate,s,Hr);if(o!==null){zt=o;return}if(s=s.sibling,s!==null){zt=s;return}zt=s=r}while(s!==null);oe===0&&(oe=5)}function Uv(r,s){do{var o=LA(r.alternate,r);if(o!==null){o.flags&=32767,zt=o;return}if(o=r.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(r=r.sibling,r!==null)){zt=r;return}zt=r=o}while(r!==null);oe=6,zt=null}function qv(r,s,o,l,f,m,S,T,M){r.cancelPendingCommit=null;do Xc();while(Me!==0);if((Xt&6)!==0)throw Error(i(327));if(s!==null){if(s===r.current)throw Error(i(177));if(m=s.lanes|s.childLanes,m|=ph,jd(r,o,m,S,T,M),r===ee&&(zt=ee=null,Pt=0),ho=s,Es=r,go=o,xg=m,Tg=f,kv=l,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,XA(is,function(){return Vv(),null})):(r.callbackNode=null,r.callbackPriority=0),l=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||l){l=D.T,D.T=null,f=B.p,B.p=2,S=Xt,Xt|=4;try{_A(r,s,o)}finally{Xt=S,B.p=f,D.T=l}}Me=1,Pv(),Jv(),Hv()}}function Pv(){if(Me===1){Me=0;var r=Es,s=ho,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=D.T,D.T=null;var l=B.p;B.p=2;var f=Xt;Xt|=4;try{xv(s,r);var m=qg,S=Dp(r.containerInfo),T=m.focusedElem,M=m.selectionRange;if(S!==T&&T&&T.ownerDocument&&Cp(T.ownerDocument.documentElement,T)){if(M!==null&&dh(T)){var G=M.start,st=M.end;if(st===void 0&&(st=G),"selectionStart"in T)T.selectionStart=G,T.selectionEnd=Math.min(st,T.value.length);else{var lt=T.ownerDocument||document,K=lt&&lt.defaultView||window;if(K.getSelection){var F=K.getSelection(),kt=T.textContent.length,Nt=Math.min(M.start,kt),Qt=M.end===void 0?Nt:Math.min(M.end,kt);!F.extend&&Nt>Qt&&(S=Qt,Qt=Nt,Nt=S);var J=Np(T,Nt),_=Np(T,Qt);if(J&&_&&(F.rangeCount!==1||F.anchorNode!==J.node||F.anchorOffset!==J.offset||F.focusNode!==_.node||F.focusOffset!==_.offset)){var Y=lt.createRange();Y.setStart(J.node,J.offset),F.removeAllRanges(),Nt>Qt?(F.addRange(Y),F.extend(_.node,_.offset)):(Y.setEnd(_.node,_.offset),F.addRange(Y))}}}}for(lt=[],F=T;F=F.parentNode;)F.nodeType===1&&lt.push({element:F,left:F.scrollLeft,top:F.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<lt.length;T++){var at=lt[T];at.element.scrollLeft=at.left,at.element.scrollTop=at.top}}of=!!Ug,qg=Ug=null}finally{Xt=f,B.p=l,D.T=o}}r.current=s,Me=2}}function Jv(){if(Me===2){Me=0;var r=Es,s=ho,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=D.T,D.T=null;var l=B.p;B.p=2;var f=Xt;Xt|=4;try{vv(r,s.alternate,s)}finally{Xt=f,B.p=l,D.T=o}}Me=3}}function Hv(){if(Me===4||Me===3){Me=0,en();var r=Es,s=ho,o=go,l=kv;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Me=5:(Me=0,ho=Es=null,$v(r,r.pendingLanes));var f=r.pendingLanes;if(f===0&&(As=null),el(o),s=s.stateNode,Ee&&typeof Ee.onCommitFiberRoot=="function")try{Ee.onCommitFiberRoot(qn,s,void 0,(s.current.flags&128)===128)}catch{}if(l!==null){s=D.T,f=B.p,B.p=2,D.T=null;try{for(var m=r.onRecoverableError,S=0;S<l.length;S++){var T=l[S];m(T.value,{componentStack:T.stack})}}finally{D.T=s,B.p=f}}(go&3)!==0&&Xc(),ar(r),f=r.pendingLanes,(o&4194090)!==0&&(f&42)!==0?r===Ag?Jl++:(Jl=0,Ag=r):Jl=0,Hl(0)}}function $v(r,s){(r.pooledCacheLanes&=s)===0&&(s=r.pooledCache,s!=null&&(r.pooledCache=null,Sl(s)))}function Xc(r){return Pv(),Jv(),Hv(),Vv()}function Vv(){if(Me!==5)return!1;var r=Es,s=xg;xg=0;var o=el(go),l=D.T,f=B.p;try{B.p=32>o?32:o,D.T=null,o=Tg,Tg=null;var m=Es,S=go;if(Me=0,ho=Es=null,go=0,(Xt&6)!==0)throw Error(i(331));var T=Xt;if(Xt|=4,Cv(m.current),Av(m,m.current,S,o),Xt=T,Hl(0,!1),Ee&&typeof Ee.onPostCommitFiberRoot=="function")try{Ee.onPostCommitFiberRoot(qn,m)}catch{}return!0}finally{B.p=f,D.T=l,$v(r,s)}}function jv(r,s,o){s=yn(o,s),s=ng(r.stateNode,s,2),r=ms(r,s,2),r!==null&&(Qs(r,2),ar(r))}function Wt(r,s,o){if(r.tag===3)jv(r,r,o);else for(;s!==null;){if(s.tag===3){jv(s,r,o);break}else if(s.tag===1){var l=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(As===null||!As.has(l))){r=yn(o,r),o=K0(2),l=ms(s,o,2),l!==null&&(F0(o,l,s,r),Qs(l,2),ar(l));break}}s=s.return}}function Dg(r,s,o){var l=r.pingCache;if(l===null){l=r.pingCache=new PA;var f=new Set;l.set(s,f)}else f=l.get(s),f===void 0&&(f=new Set,l.set(s,f));f.has(o)||(vg=!0,f.add(o),r=jA.bind(null,r,s,o),s.then(r,r))}function jA(r,s,o){var l=r.pingCache;l!==null&&l.delete(s),r.pingedLanes|=r.suspendedLanes&o,r.warmLanes&=~o,ee===r&&(Pt&o)===o&&(oe===4||oe===3&&(Pt&62914560)===Pt&&300>Oe()-Sg?(Xt&2)===0&&mo(r,0):wg|=o,fo===Pt&&(fo=0)),ar(r)}function Yv(r,s){s===0&&(s=Ku()),r=Fa(r,s),r!==null&&(Qs(r,s),ar(r))}function YA(r){var s=r.memoizedState,o=0;s!==null&&(o=s.retryLane),Yv(r,o)}function GA(r,s){var o=0;switch(r.tag){case 13:var l=r.stateNode,f=r.memoizedState;f!==null&&(o=f.retryLane);break;case 19:l=r.stateNode;break;case 22:l=r.stateNode._retryCache;break;default:throw Error(i(314))}l!==null&&l.delete(s),Yv(r,o)}function XA(r,s){return Yt(r,s)}var Kc=null,po=null,kg=!1,Fc=!1,Og=!1,ya=0;function ar(r){r!==po&&r.next===null&&(po===null?Kc=po=r:po=po.next=r),Fc=!0,kg||(kg=!0,FA())}function Hl(r,s){if(!Og&&Fc){Og=!0;do for(var o=!1,l=Kc;l!==null;){if(r!==0){var f=l.pendingLanes;if(f===0)var m=0;else{var S=l.suspendedLanes,T=l.pingedLanes;m=(1<<31-Ie(42|r)+1)-1,m&=f&~(S&~T),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(o=!0,Fv(l,m))}else m=Pt,m=La(l,l===ee?m:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(m&3)===0||Zs(l,m)||(o=!0,Fv(l,m));l=l.next}while(o);Og=!1}}function KA(){Gv()}function Gv(){Fc=kg=!1;var r=0;ya!==0&&(iE()&&(r=ya),ya=0);for(var s=Oe(),o=null,l=Kc;l!==null;){var f=l.next,m=Xv(l,s);m===0?(l.next=null,o===null?Kc=f:o.next=f,f===null&&(po=o)):(o=l,(r!==0||(m&3)!==0)&&(Fc=!0)),l=f}Hl(r)}function Xv(r,s){for(var o=r.suspendedLanes,l=r.pingedLanes,f=r.expirationTimes,m=r.pendingLanes&-62914561;0<m;){var S=31-Ie(m),T=1<<S,M=f[S];M===-1?((T&o)===0||(T&l)!==0)&&(f[S]=Vd(T,s)):M<=s&&(r.expiredLanes|=T),m&=~T}if(s=ee,o=Pt,o=La(r,r===s?o:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),l=r.callbackNode,o===0||r===s&&(Kt===2||Kt===9)||r.cancelPendingCommit!==null)return l!==null&&l!==null&&qt(l),r.callbackNode=null,r.callbackPriority=0;if((o&3)===0||Zs(r,o)){if(s=o&-o,s===r.callbackPriority)return s;switch(l!==null&&qt(l),el(o)){case 2:case 8:o=rs;break;case 32:o=is;break;case 268435456:o=ss;break;default:o=is}return l=Kv.bind(null,r),o=Yt(o,l),r.callbackPriority=s,r.callbackNode=o,s}return l!==null&&l!==null&&qt(l),r.callbackPriority=2,r.callbackNode=null,2}function Kv(r,s){if(Me!==0&&Me!==5)return r.callbackNode=null,r.callbackPriority=0,null;var o=r.callbackNode;if(Xc()&&r.callbackNode!==o)return null;var l=Pt;return l=La(r,r===ee?l:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),l===0?null:(Iv(r,l,s),Xv(r,Oe()),r.callbackNode!=null&&r.callbackNode===o?Kv.bind(null,r):null)}function Fv(r,s){if(Xc())return null;Iv(r,s,!0)}function FA(){aE(function(){(Xt&6)!==0?Yt(Ma,KA):Gv()})}function Ig(){return ya===0&&(ya=Xu()),ya}function Zv(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:oc(""+r)}function Qv(r,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,r.id&&o.setAttribute("form",r.id),s.parentNode.insertBefore(o,s),r=new FormData(r),o.parentNode.removeChild(o),r}function ZA(r,s,o,l,f){if(s==="submit"&&o&&o.stateNode===f){var m=Zv((f[_e]||null).action),S=l.submitter;S&&(s=(s=S[_e]||null)?Zv(s.formAction):S.getAttribute("formAction"),s!==null&&(m=s,S=null));var T=new fc("action","action",null,l,f);r.push({event:T,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(ya!==0){var M=S?Qv(f,S):new FormData(f);Zh(o,{pending:!0,data:M,method:f.method,action:m},null,M)}}else typeof m=="function"&&(T.preventDefault(),M=S?Qv(f,S):new FormData(f),Zh(o,{pending:!0,data:M,method:f.method,action:m},m,M))},currentTarget:f}]})}}for(var Rg=0;Rg<yh.length;Rg++){var Mg=yh[Rg],QA=Mg.toLowerCase(),WA=Mg[0].toUpperCase()+Mg.slice(1);Jn(QA,"on"+WA)}Jn(Ip,"onAnimationEnd"),Jn(Rp,"onAnimationIteration"),Jn(Mp,"onAnimationStart"),Jn("dblclick","onDoubleClick"),Jn("focusin","onFocus"),Jn("focusout","onBlur"),Jn(yA,"onTransitionRun"),Jn(pA,"onTransitionStart"),Jn(vA,"onTransitionCancel"),Jn(Bp,"onTransitionEnd"),ls("onMouseEnter",["mouseout","mouseover"]),ls("onMouseLeave",["mouseout","mouseover"]),ls("onPointerEnter",["pointerout","pointerover"]),ls("onPointerLeave",["pointerout","pointerover"]),kr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),kr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),kr("onBeforeInput",["compositionend","keypress","textInput","paste"]),kr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),kr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),kr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $l="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tE=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat($l));function Wv(r,s){s=(s&4)!==0;for(var o=0;o<r.length;o++){var l=r[o],f=l.event;l=l.listeners;t:{var m=void 0;if(s)for(var S=l.length-1;0<=S;S--){var T=l[S],M=T.instance,G=T.currentTarget;if(T=T.listener,M!==m&&f.isPropagationStopped())break t;m=T,f.currentTarget=G;try{m(f)}catch(st){_c(st)}f.currentTarget=null,m=M}else for(S=0;S<l.length;S++){if(T=l[S],M=T.instance,G=T.currentTarget,T=T.listener,M!==m&&f.isPropagationStopped())break t;m=T,f.currentTarget=G;try{m(f)}catch(st){_c(st)}f.currentTarget=null,m=M}}}}function Lt(r,s){var o=s[nl];o===void 0&&(o=s[nl]=new Set);var l=r+"__bubble";o.has(l)||(tw(s,r,2,!1),o.add(l))}function Bg(r,s,o){var l=0;s&&(l|=4),tw(o,r,l,s)}var Zc="_reactListening"+Math.random().toString(36).slice(2);function zg(r){if(!r[Zc]){r[Zc]=!0,Wu.forEach(function(o){o!=="selectionchange"&&(tE.has(o)||Bg(o,!1,r),Bg(o,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[Zc]||(s[Zc]=!0,Bg("selectionchange",!1,s))}}function tw(r,s,o,l){switch(Aw(s)){case 2:var f=CE;break;case 8:f=DE;break;default:f=Kg}o=f.bind(null,s,o,r),f=void 0,!rh||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),l?f!==void 0?r.addEventListener(s,o,{capture:!0,passive:f}):r.addEventListener(s,o,!0):f!==void 0?r.addEventListener(s,o,{passive:f}):r.addEventListener(s,o,!1)}function Lg(r,s,o,l,f){var m=l;if((s&1)===0&&(s&2)===0&&l!==null)t:for(;;){if(l===null)return;var S=l.tag;if(S===3||S===4){var T=l.stateNode.containerInfo;if(T===f)break;if(S===4)for(S=l.return;S!==null;){var M=S.tag;if((M===3||M===4)&&S.stateNode.containerInfo===f)return;S=S.return}for(;T!==null;){if(S=Cr(T),S===null)return;if(M=S.tag,M===5||M===6||M===26||M===27){l=m=S;continue t}T=T.parentNode}}l=l.return}op(function(){var G=m,st=eh(o),lt=[];t:{var K=zp.get(r);if(K!==void 0){var F=fc,kt=r;switch(r){case"keypress":if(uc(o)===0)break t;case"keydown":case"keyup":F=XT;break;case"focusin":kt="focus",F=oh;break;case"focusout":kt="blur",F=oh;break;case"beforeblur":case"afterblur":F=oh;break;case"click":if(o.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":F=cp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":F=LT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":F=ZT;break;case Ip:case Rp:case Mp:F=qT;break;case Bp:F=WT;break;case"scroll":case"scrollend":F=BT;break;case"wheel":F=eA;break;case"copy":case"cut":case"paste":F=JT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":F=dp;break;case"toggle":case"beforetoggle":F=rA}var Nt=(s&4)!==0,Qt=!Nt&&(r==="scroll"||r==="scrollend"),J=Nt?K!==null?K+"Capture":null:K;Nt=[];for(var _=G,Y;_!==null;){var at=_;if(Y=at.stateNode,at=at.tag,at!==5&&at!==26&&at!==27||Y===null||J===null||(at=ll(_,J),at!=null&&Nt.push(Vl(_,at,Y))),Qt)break;_=_.return}0<Nt.length&&(K=new F(K,kt,null,o,st),lt.push({event:K,listeners:Nt}))}}if((s&7)===0){t:{if(K=r==="mouseover"||r==="pointerover",F=r==="mouseout"||r==="pointerout",K&&o!==th&&(kt=o.relatedTarget||o.fromElement)&&(Cr(kt)||kt[as]))break t;if((F||K)&&(K=st.window===st?st:(K=st.ownerDocument)?K.defaultView||K.parentWindow:window,F?(kt=o.relatedTarget||o.toElement,F=G,kt=kt?Cr(kt):null,kt!==null&&(Qt=u(kt),Nt=kt.tag,kt!==Qt||Nt!==5&&Nt!==27&&Nt!==6)&&(kt=null)):(F=null,kt=G),F!==kt)){if(Nt=cp,at="onMouseLeave",J="onMouseEnter",_="mouse",(r==="pointerout"||r==="pointerover")&&(Nt=dp,at="onPointerLeave",J="onPointerEnter",_="pointer"),Qt=F==null?K:ta(F),Y=kt==null?K:ta(kt),K=new Nt(at,_+"leave",F,o,st),K.target=Qt,K.relatedTarget=Y,at=null,Cr(st)===G&&(Nt=new Nt(J,_+"enter",kt,o,st),Nt.target=Y,Nt.relatedTarget=Qt,at=Nt),Qt=at,F&&kt)e:{for(Nt=F,J=kt,_=0,Y=Nt;Y;Y=vo(Y))_++;for(Y=0,at=J;at;at=vo(at))Y++;for(;0<_-Y;)Nt=vo(Nt),_--;for(;0<Y-_;)J=vo(J),Y--;for(;_--;){if(Nt===J||J!==null&&Nt===J.alternate)break e;Nt=vo(Nt),J=vo(J)}Nt=null}else Nt=null;F!==null&&ew(lt,K,F,Nt,!1),kt!==null&&Qt!==null&&ew(lt,Qt,kt,Nt,!0)}}t:{if(K=G?ta(G):window,F=K.nodeName&&K.nodeName.toLowerCase(),F==="select"||F==="input"&&K.type==="file")var vt=bp;else if(vp(K))if(Sp)vt=hA;else{vt=fA;var Bt=cA}else F=K.nodeName,!F||F.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?G&&Wd(G.elementType)&&(vt=bp):vt=dA;if(vt&&(vt=vt(r,G))){wp(lt,vt,o,st);break t}Bt&&Bt(r,K,G),r==="focusout"&&G&&K.type==="number"&&G.memoizedProps.value!=null&&Qd(K,"number",K.value)}switch(Bt=G?ta(G):window,r){case"focusin":(vp(Bt)||Bt.contentEditable==="true")&&(Ga=Bt,hh=G,yl=null);break;case"focusout":yl=hh=Ga=null;break;case"mousedown":gh=!0;break;case"contextmenu":case"mouseup":case"dragend":gh=!1,kp(lt,o,st);break;case"selectionchange":if(mA)break;case"keydown":case"keyup":kp(lt,o,st)}var bt;if(uh)t:{switch(r){case"compositionstart":var Ct="onCompositionStart";break t;case"compositionend":Ct="onCompositionEnd";break t;case"compositionupdate":Ct="onCompositionUpdate";break t}Ct=void 0}else Ya?yp(r,o)&&(Ct="onCompositionEnd"):r==="keydown"&&o.keyCode===229&&(Ct="onCompositionStart");Ct&&(hp&&o.locale!=="ko"&&(Ya||Ct!=="onCompositionStart"?Ct==="onCompositionEnd"&&Ya&&(bt=lp()):(fs=st,ih="value"in fs?fs.value:fs.textContent,Ya=!0)),Bt=Qc(G,Ct),0<Bt.length&&(Ct=new fp(Ct,r,null,o,st),lt.push({event:Ct,listeners:Bt}),bt?Ct.data=bt:(bt=pp(o),bt!==null&&(Ct.data=bt)))),(bt=sA?aA(r,o):oA(r,o))&&(Ct=Qc(G,"onBeforeInput"),0<Ct.length&&(Bt=new fp("onBeforeInput","beforeinput",null,o,st),lt.push({event:Bt,listeners:Ct}),Bt.data=bt)),ZA(lt,r,G,o,st)}Wv(lt,s)})}function Vl(r,s,o){return{instance:r,listener:s,currentTarget:o}}function Qc(r,s){for(var o=s+"Capture",l=[];r!==null;){var f=r,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=ll(r,o),f!=null&&l.unshift(Vl(r,f,m)),f=ll(r,s),f!=null&&l.push(Vl(r,f,m))),r.tag===3)return l;r=r.return}return[]}function vo(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function ew(r,s,o,l,f){for(var m=s._reactName,S=[];o!==null&&o!==l;){var T=o,M=T.alternate,G=T.stateNode;if(T=T.tag,M!==null&&M===l)break;T!==5&&T!==26&&T!==27||G===null||(M=G,f?(G=ll(o,m),G!=null&&S.unshift(Vl(o,G,M))):f||(G=ll(o,m),G!=null&&S.push(Vl(o,G,M)))),o=o.return}S.length!==0&&r.push({event:s,listeners:S})}var eE=/\r\n?/g,nE=/\u0000|\uFFFD/g;function nw(r){return(typeof r=="string"?r:""+r).replace(eE,`
`).replace(nE,"")}function rw(r,s){return s=nw(s),nw(r)===s}function Wc(){}function Zt(r,s,o,l,f,m){switch(o){case"children":typeof l=="string"?s==="body"||s==="textarea"&&l===""||$a(r,l):(typeof l=="number"||typeof l=="bigint")&&s!=="body"&&$a(r,""+l);break;case"className":Ua(r,"class",l);break;case"tabIndex":Ua(r,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Ua(r,o,l);break;case"style":sp(r,l,m);break;case"data":if(s!=="object"){Ua(r,"data",l);break}case"src":case"href":if(l===""&&(s!=="a"||o!=="href")){r.removeAttribute(o);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){r.removeAttribute(o);break}l=oc(""+l),r.setAttribute(o,l);break;case"action":case"formAction":if(typeof l=="function"){r.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(o==="formAction"?(s!=="input"&&Zt(r,s,"name",f.name,f,null),Zt(r,s,"formEncType",f.formEncType,f,null),Zt(r,s,"formMethod",f.formMethod,f,null),Zt(r,s,"formTarget",f.formTarget,f,null)):(Zt(r,s,"encType",f.encType,f,null),Zt(r,s,"method",f.method,f,null),Zt(r,s,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){r.removeAttribute(o);break}l=oc(""+l),r.setAttribute(o,l);break;case"onClick":l!=null&&(r.onclick=Wc);break;case"onScroll":l!=null&&Lt("scroll",r);break;case"onScrollEnd":l!=null&&Lt("scrollend",r);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(o=l.__html,o!=null){if(f.children!=null)throw Error(i(60));r.innerHTML=o}}break;case"multiple":r.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":r.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){r.removeAttribute("xlink:href");break}o=oc(""+l),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?r.setAttribute(o,""+l):r.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?r.setAttribute(o,""):r.removeAttribute(o);break;case"capture":case"download":l===!0?r.setAttribute(o,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?r.setAttribute(o,l):r.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?r.setAttribute(o,l):r.removeAttribute(o);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?r.removeAttribute(o):r.setAttribute(o,l);break;case"popover":Lt("beforetoggle",r),Lt("toggle",r),_a(r,"popover",l);break;case"xlinkActuate":Pn(r,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Pn(r,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Pn(r,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Pn(r,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Pn(r,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Pn(r,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Pn(r,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Pn(r,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Pn(r,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":_a(r,"is",l);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=RT.get(o)||o,_a(r,o,l))}}function _g(r,s,o,l,f,m){switch(o){case"style":sp(r,l,m);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(o=l.__html,o!=null){if(f.children!=null)throw Error(i(60));r.innerHTML=o}}break;case"children":typeof l=="string"?$a(r,l):(typeof l=="number"||typeof l=="bigint")&&$a(r,""+l);break;case"onScroll":l!=null&&Lt("scroll",r);break;case"onScrollEnd":l!=null&&Lt("scrollend",r);break;case"onClick":l!=null&&(r.onclick=Wc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!tc.hasOwnProperty(o))t:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),s=o.slice(2,f?o.length-7:void 0),m=r[_e]||null,m=m!=null?m[o]:null,typeof m=="function"&&r.removeEventListener(s,m,f),typeof l=="function")){typeof m!="function"&&m!==null&&(o in r?r[o]=null:r.hasAttribute(o)&&r.removeAttribute(o)),r.addEventListener(s,l,f);break t}o in r?r[o]=l:l===!0?r.setAttribute(o,""):_a(r,o,l)}}}function Be(r,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Lt("error",r),Lt("load",r);var l=!1,f=!1,m;for(m in o)if(o.hasOwnProperty(m)){var S=o[m];if(S!=null)switch(m){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:Zt(r,s,m,S,o,null)}}f&&Zt(r,s,"srcSet",o.srcSet,o,null),l&&Zt(r,s,"src",o.src,o,null);return;case"input":Lt("invalid",r);var T=m=S=f=null,M=null,G=null;for(l in o)if(o.hasOwnProperty(l)){var st=o[l];if(st!=null)switch(l){case"name":f=st;break;case"type":S=st;break;case"checked":M=st;break;case"defaultChecked":G=st;break;case"value":m=st;break;case"defaultValue":T=st;break;case"children":case"dangerouslySetInnerHTML":if(st!=null)throw Error(i(137,s));break;default:Zt(r,s,l,st,o,null)}}ep(r,m,T,M,G,S,f,!1),Pa(r);return;case"select":Lt("invalid",r),l=S=m=null;for(f in o)if(o.hasOwnProperty(f)&&(T=o[f],T!=null))switch(f){case"value":m=T;break;case"defaultValue":S=T;break;case"multiple":l=T;default:Zt(r,s,f,T,o,null)}s=m,o=S,r.multiple=!!l,s!=null?Ha(r,!!l,s,!1):o!=null&&Ha(r,!!l,o,!0);return;case"textarea":Lt("invalid",r),m=f=l=null;for(S in o)if(o.hasOwnProperty(S)&&(T=o[S],T!=null))switch(S){case"value":l=T;break;case"defaultValue":f=T;break;case"children":m=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(i(91));break;default:Zt(r,s,S,T,o,null)}rp(r,l,f,m),Pa(r);return;case"option":for(M in o)if(o.hasOwnProperty(M)&&(l=o[M],l!=null))switch(M){case"selected":r.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Zt(r,s,M,l,o,null)}return;case"dialog":Lt("beforetoggle",r),Lt("toggle",r),Lt("cancel",r),Lt("close",r);break;case"iframe":case"object":Lt("load",r);break;case"video":case"audio":for(l=0;l<$l.length;l++)Lt($l[l],r);break;case"image":Lt("error",r),Lt("load",r);break;case"details":Lt("toggle",r);break;case"embed":case"source":case"link":Lt("error",r),Lt("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(G in o)if(o.hasOwnProperty(G)&&(l=o[G],l!=null))switch(G){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:Zt(r,s,G,l,o,null)}return;default:if(Wd(s)){for(st in o)o.hasOwnProperty(st)&&(l=o[st],l!==void 0&&_g(r,s,st,l,o,void 0));return}}for(T in o)o.hasOwnProperty(T)&&(l=o[T],l!=null&&Zt(r,s,T,l,o,null))}function rE(r,s,o,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,S=null,T=null,M=null,G=null,st=null;for(F in o){var lt=o[F];if(o.hasOwnProperty(F)&&lt!=null)switch(F){case"checked":break;case"value":break;case"defaultValue":M=lt;default:l.hasOwnProperty(F)||Zt(r,s,F,null,l,lt)}}for(var K in l){var F=l[K];if(lt=o[K],l.hasOwnProperty(K)&&(F!=null||lt!=null))switch(K){case"type":m=F;break;case"name":f=F;break;case"checked":G=F;break;case"defaultChecked":st=F;break;case"value":S=F;break;case"defaultValue":T=F;break;case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(i(137,s));break;default:F!==lt&&Zt(r,s,K,F,l,lt)}}Ja(r,S,T,M,G,st,m,f);return;case"select":F=S=T=K=null;for(m in o)if(M=o[m],o.hasOwnProperty(m)&&M!=null)switch(m){case"value":break;case"multiple":F=M;default:l.hasOwnProperty(m)||Zt(r,s,m,null,l,M)}for(f in l)if(m=l[f],M=o[f],l.hasOwnProperty(f)&&(m!=null||M!=null))switch(f){case"value":K=m;break;case"defaultValue":T=m;break;case"multiple":S=m;default:m!==M&&Zt(r,s,f,m,l,M)}s=T,o=S,l=F,K!=null?Ha(r,!!o,K,!1):!!l!=!!o&&(s!=null?Ha(r,!!o,s,!0):Ha(r,!!o,o?[]:"",!1));return;case"textarea":F=K=null;for(T in o)if(f=o[T],o.hasOwnProperty(T)&&f!=null&&!l.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:Zt(r,s,T,null,l,f)}for(S in l)if(f=l[S],m=o[S],l.hasOwnProperty(S)&&(f!=null||m!=null))switch(S){case"value":K=f;break;case"defaultValue":F=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(i(91));break;default:f!==m&&Zt(r,s,S,f,l,m)}np(r,K,F);return;case"option":for(var kt in o)if(K=o[kt],o.hasOwnProperty(kt)&&K!=null&&!l.hasOwnProperty(kt))switch(kt){case"selected":r.selected=!1;break;default:Zt(r,s,kt,null,l,K)}for(M in l)if(K=l[M],F=o[M],l.hasOwnProperty(M)&&K!==F&&(K!=null||F!=null))switch(M){case"selected":r.selected=K&&typeof K!="function"&&typeof K!="symbol";break;default:Zt(r,s,M,K,l,F)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Nt in o)K=o[Nt],o.hasOwnProperty(Nt)&&K!=null&&!l.hasOwnProperty(Nt)&&Zt(r,s,Nt,null,l,K);for(G in l)if(K=l[G],F=o[G],l.hasOwnProperty(G)&&K!==F&&(K!=null||F!=null))switch(G){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(i(137,s));break;default:Zt(r,s,G,K,l,F)}return;default:if(Wd(s)){for(var Qt in o)K=o[Qt],o.hasOwnProperty(Qt)&&K!==void 0&&!l.hasOwnProperty(Qt)&&_g(r,s,Qt,void 0,l,K);for(st in l)K=l[st],F=o[st],!l.hasOwnProperty(st)||K===F||K===void 0&&F===void 0||_g(r,s,st,K,l,F);return}}for(var J in o)K=o[J],o.hasOwnProperty(J)&&K!=null&&!l.hasOwnProperty(J)&&Zt(r,s,J,null,l,K);for(lt in l)K=l[lt],F=o[lt],!l.hasOwnProperty(lt)||K===F||K==null&&F==null||Zt(r,s,lt,K,l,F)}var Ug=null,qg=null;function tf(r){return r.nodeType===9?r:r.ownerDocument}function iw(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function sw(r,s){if(r===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&s==="foreignObject"?0:r}function Pg(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Jg=null;function iE(){var r=window.event;return r&&r.type==="popstate"?r===Jg?!1:(Jg=r,!0):(Jg=null,!1)}var aw=typeof setTimeout=="function"?setTimeout:void 0,sE=typeof clearTimeout=="function"?clearTimeout:void 0,ow=typeof Promise=="function"?Promise:void 0,aE=typeof queueMicrotask=="function"?queueMicrotask:typeof ow<"u"?function(r){return ow.resolve(null).then(r).catch(oE)}:aw;function oE(r){setTimeout(function(){throw r})}function Cs(r){return r==="head"}function lw(r,s){var o=s,l=0,f=0;do{var m=o.nextSibling;if(r.removeChild(o),m&&m.nodeType===8)if(o=m.data,o==="/$"){if(0<l&&8>l){o=l;var S=r.ownerDocument;if(o&1&&jl(S.documentElement),o&2&&jl(S.body),o&4)for(o=S.head,jl(o),S=o.firstChild;S;){var T=S.nextSibling,M=S.nodeName;S[Ws]||M==="SCRIPT"||M==="STYLE"||M==="LINK"&&S.rel.toLowerCase()==="stylesheet"||o.removeChild(S),S=T}}if(f===0){r.removeChild(m),Wl(s);return}f--}else o==="$"||o==="$?"||o==="$!"?f++:l=o.charCodeAt(0)-48;else l=0;o=m}while(o);Wl(s)}function Hg(r){var s=r.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Hg(o),rl(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}r.removeChild(o)}}function lE(r,s,o,l){for(;r.nodeType===1;){var f=o;if(r.nodeName.toLowerCase()!==s.toLowerCase()){if(!l&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(l){if(!r[Ws])switch(s){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(m=r.getAttribute("rel"),m==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(m!==f.rel||r.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||r.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||r.getAttribute("title")!==(f.title==null?null:f.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(m=r.getAttribute("src"),(m!==(f.src==null?null:f.src)||r.getAttribute("type")!==(f.type==null?null:f.type)||r.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(s==="input"&&r.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&r.getAttribute("name")===m)return r}else return r;if(r=$n(r.nextSibling),r===null)break}return null}function uE(r,s,o){if(s==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!o||(r=$n(r.nextSibling),r===null))return null;return r}function $g(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState==="complete"}function cE(r,s){var o=r.ownerDocument;if(r.data!=="$?"||o.readyState==="complete")s();else{var l=function(){s(),o.removeEventListener("DOMContentLoaded",l)};o.addEventListener("DOMContentLoaded",l),r._reactRetry=l}}function $n(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return r}var Vg=null;function uw(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var o=r.data;if(o==="$"||o==="$!"||o==="$?"){if(s===0)return r;s--}else o==="/$"&&s++}r=r.previousSibling}return null}function cw(r,s,o){switch(s=tf(o),r){case"html":if(r=s.documentElement,!r)throw Error(i(452));return r;case"head":if(r=s.head,!r)throw Error(i(453));return r;case"body":if(r=s.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function jl(r){for(var s=r.attributes;s.length;)r.removeAttributeNode(s[0]);rl(r)}var xn=new Map,fw=new Set;function ef(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var $r=B.d;B.d={f:fE,r:dE,D:hE,C:gE,L:mE,m:yE,X:vE,S:pE,M:wE};function fE(){var r=$r.f(),s=Yc();return r||s}function dE(r){var s=Dr(r);s!==null&&s.tag===5&&s.type==="form"?I0(s):$r.r(r)}var wo=typeof document>"u"?null:document;function dw(r,s,o){var l=wo;if(l&&typeof s=="string"&&s){var f=je(s);f='link[rel="'+r+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),fw.has(f)||(fw.add(f),r={rel:r,crossOrigin:o,href:s},l.querySelector(f)===null&&(s=l.createElement("link"),Be(s,"link",r),ye(s),l.head.appendChild(s)))}}function hE(r){$r.D(r),dw("dns-prefetch",r,null)}function gE(r,s){$r.C(r,s),dw("preconnect",r,s)}function mE(r,s,o){$r.L(r,s,o);var l=wo;if(l&&r&&s){var f='link[rel="preload"][as="'+je(s)+'"]';s==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+je(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+je(o.imageSizes)+'"]')):f+='[href="'+je(r)+'"]';var m=f;switch(s){case"style":m=bo(r);break;case"script":m=So(r)}xn.has(m)||(r=y({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:r,as:s},o),xn.set(m,r),l.querySelector(f)!==null||s==="style"&&l.querySelector(Yl(m))||s==="script"&&l.querySelector(Gl(m))||(s=l.createElement("link"),Be(s,"link",r),ye(s),l.head.appendChild(s)))}}function yE(r,s){$r.m(r,s);var o=wo;if(o&&r){var l=s&&typeof s.as=="string"?s.as:"script",f='link[rel="modulepreload"][as="'+je(l)+'"][href="'+je(r)+'"]',m=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=So(r)}if(!xn.has(m)&&(r=y({rel:"modulepreload",href:r},s),xn.set(m,r),o.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Gl(m)))return}l=o.createElement("link"),Be(l,"link",r),ye(l),o.head.appendChild(l)}}}function pE(r,s,o){$r.S(r,s,o);var l=wo;if(l&&r){var f=os(l).hoistableStyles,m=bo(r);s=s||"default";var S=f.get(m);if(!S){var T={loading:0,preload:null};if(S=l.querySelector(Yl(m)))T.loading=5;else{r=y({rel:"stylesheet",href:r,"data-precedence":s},o),(o=xn.get(m))&&jg(r,o);var M=S=l.createElement("link");ye(M),Be(M,"link",r),M._p=new Promise(function(G,st){M.onload=G,M.onerror=st}),M.addEventListener("load",function(){T.loading|=1}),M.addEventListener("error",function(){T.loading|=2}),T.loading|=4,nf(S,s,l)}S={type:"stylesheet",instance:S,count:1,state:T},f.set(m,S)}}}function vE(r,s){$r.X(r,s);var o=wo;if(o&&r){var l=os(o).hoistableScripts,f=So(r),m=l.get(f);m||(m=o.querySelector(Gl(f)),m||(r=y({src:r,async:!0},s),(s=xn.get(f))&&Yg(r,s),m=o.createElement("script"),ye(m),Be(m,"link",r),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(f,m))}}function wE(r,s){$r.M(r,s);var o=wo;if(o&&r){var l=os(o).hoistableScripts,f=So(r),m=l.get(f);m||(m=o.querySelector(Gl(f)),m||(r=y({src:r,async:!0,type:"module"},s),(s=xn.get(f))&&Yg(r,s),m=o.createElement("script"),ye(m),Be(m,"link",r),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(f,m))}}function hw(r,s,o,l){var f=(f=dt.current)?ef(f):null;if(!f)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=bo(o.href),o=os(f).hoistableStyles,l=o.get(s),l||(l={type:"style",instance:null,count:0,state:null},o.set(s,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){r=bo(o.href);var m=os(f).hoistableStyles,S=m.get(r);if(S||(f=f.ownerDocument||f,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(r,S),(m=f.querySelector(Yl(r)))&&!m._p&&(S.instance=m,S.state.loading=5),xn.has(r)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},xn.set(r,o),m||bE(f,r,o,S.state))),s&&l===null)throw Error(i(528,""));return S}if(s&&l!==null)throw Error(i(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=So(o),o=os(f).hoistableScripts,l=o.get(s),l||(l={type:"script",instance:null,count:0,state:null},o.set(s,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function bo(r){return'href="'+je(r)+'"'}function Yl(r){return'link[rel="stylesheet"]['+r+"]"}function gw(r){return y({},r,{"data-precedence":r.precedence,precedence:null})}function bE(r,s,o,l){r.querySelector('link[rel="preload"][as="style"]['+s+"]")?l.loading=1:(s=r.createElement("link"),l.preload=s,s.addEventListener("load",function(){return l.loading|=1}),s.addEventListener("error",function(){return l.loading|=2}),Be(s,"link",o),ye(s),r.head.appendChild(s))}function So(r){return'[src="'+je(r)+'"]'}function Gl(r){return"script[async]"+r}function mw(r,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var l=r.querySelector('style[data-href~="'+je(o.href)+'"]');if(l)return s.instance=l,ye(l),l;var f=y({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return l=(r.ownerDocument||r).createElement("style"),ye(l),Be(l,"style",f),nf(l,o.precedence,r),s.instance=l;case"stylesheet":f=bo(o.href);var m=r.querySelector(Yl(f));if(m)return s.state.loading|=4,s.instance=m,ye(m),m;l=gw(o),(f=xn.get(f))&&jg(l,f),m=(r.ownerDocument||r).createElement("link"),ye(m);var S=m;return S._p=new Promise(function(T,M){S.onload=T,S.onerror=M}),Be(m,"link",l),s.state.loading|=4,nf(m,o.precedence,r),s.instance=m;case"script":return m=So(o.src),(f=r.querySelector(Gl(m)))?(s.instance=f,ye(f),f):(l=o,(f=xn.get(m))&&(l=y({},o),Yg(l,f)),r=r.ownerDocument||r,f=r.createElement("script"),ye(f),Be(f,"link",l),r.head.appendChild(f),s.instance=f);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(l=s.instance,s.state.loading|=4,nf(l,o.precedence,r));return s.instance}function nf(r,s,o){for(var l=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,m=f,S=0;S<l.length;S++){var T=l[S];if(T.dataset.precedence===s)m=T;else if(m!==f)break}m?m.parentNode.insertBefore(r,m.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(r,s.firstChild))}function jg(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.title==null&&(r.title=s.title)}function Yg(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.integrity==null&&(r.integrity=s.integrity)}var rf=null;function yw(r,s,o){if(rf===null){var l=new Map,f=rf=new Map;f.set(o,l)}else f=rf,l=f.get(o),l||(l=new Map,f.set(o,l));if(l.has(r))return l;for(l.set(r,null),o=o.getElementsByTagName(r),f=0;f<o.length;f++){var m=o[f];if(!(m[Ws]||m[Ne]||r==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var S=m.getAttribute(s)||"";S=r+S;var T=l.get(S);T?T.push(m):l.set(S,[m])}}return l}function pw(r,s,o){r=r.ownerDocument||r,r.head.insertBefore(o,s==="title"?r.querySelector("head > title"):null)}function SE(r,s,o){if(o===1||s.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return r=s.disabled,typeof s.precedence=="string"&&r==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function vw(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}var Xl=null;function xE(){}function TE(r,s,o){if(Xl===null)throw Error(i(475));var l=Xl;if(s.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var f=bo(o.href),m=r.querySelector(Yl(f));if(m){r=m._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(l.count++,l=sf.bind(l),r.then(l,l)),s.state.loading|=4,s.instance=m,ye(m);return}m=r.ownerDocument||r,o=gw(o),(f=xn.get(f))&&jg(o,f),m=m.createElement("link"),ye(m);var S=m;S._p=new Promise(function(T,M){S.onload=T,S.onerror=M}),Be(m,"link",o),s.instance=m}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(s,r),(r=s.state.preload)&&(s.state.loading&3)===0&&(l.count++,s=sf.bind(l),r.addEventListener("load",s),r.addEventListener("error",s))}}function AE(){if(Xl===null)throw Error(i(475));var r=Xl;return r.stylesheets&&r.count===0&&Gg(r,r.stylesheets),0<r.count?function(s){var o=setTimeout(function(){if(r.stylesheets&&Gg(r,r.stylesheets),r.unsuspend){var l=r.unsuspend;r.unsuspend=null,l()}},6e4);return r.unsuspend=s,function(){r.unsuspend=null,clearTimeout(o)}}:null}function sf(){if(this.count--,this.count===0){if(this.stylesheets)Gg(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var af=null;function Gg(r,s){r.stylesheets=null,r.unsuspend!==null&&(r.count++,af=new Map,s.forEach(EE,r),af=null,sf.call(r))}function EE(r,s){if(!(s.state.loading&4)){var o=af.get(r);if(o)var l=o.get(null);else{o=new Map,af.set(r,o);for(var f=r.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var S=f[m];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(o.set(S.dataset.precedence,S),l=S)}l&&o.set(null,l)}f=s.instance,S=f.getAttribute("data-precedence"),m=o.get(S)||l,m===l&&o.set(null,f),o.set(S,f),this.count++,l=sf.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),m?m.parentNode.insertBefore(f,m.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(f,r.firstChild)),s.state.loading|=4}}var Kl={$$typeof:E,Provider:null,Consumer:null,_currentValue:P,_currentValue2:P,_threadCount:0};function NE(r,s,o,l,f,m,S,T){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Qo(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qo(0),this.hiddenUpdates=Qo(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=T,this.incompleteTransitions=new Map}function ww(r,s,o,l,f,m,S,T,M,G,st,lt){return r=new NE(r,s,o,S,T,M,G,lt),s=1,m===!0&&(s|=24),m=rn(3,null,null,s),r.current=m,m.stateNode=r,s=Dh(),s.refCount++,r.pooledCache=s,s.refCount++,m.memoizedState={element:l,isDehydrated:o,cache:s},Rh(m),r}function bw(r){return r?(r=Za,r):Za}function Sw(r,s,o,l,f,m){f=bw(f),l.context===null?l.context=f:l.pendingContext=f,l=gs(s),l.payload={element:o},m=m===void 0?null:m,m!==null&&(l.callback=m),o=ms(r,l,s),o!==null&&(un(o,r,s),El(o,r,s))}function xw(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var o=r.retryLane;r.retryLane=o!==0&&o<s?o:s}}function Xg(r,s){xw(r,s),(r=r.alternate)&&xw(r,s)}function Tw(r){if(r.tag===13){var s=Fa(r,67108864);s!==null&&un(s,r,67108864),Xg(r,67108864)}}var of=!0;function CE(r,s,o,l){var f=D.T;D.T=null;var m=B.p;try{B.p=2,Kg(r,s,o,l)}finally{B.p=m,D.T=f}}function DE(r,s,o,l){var f=D.T;D.T=null;var m=B.p;try{B.p=8,Kg(r,s,o,l)}finally{B.p=m,D.T=f}}function Kg(r,s,o,l){if(of){var f=Fg(l);if(f===null)Lg(r,s,l,lf,o),Ew(r,l);else if(OE(f,r,s,o,l))l.stopPropagation();else if(Ew(r,l),s&4&&-1<kE.indexOf(r)){for(;f!==null;){var m=Dr(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var S=Nr(m.pendingLanes);if(S!==0){var T=m;for(T.pendingLanes|=2,T.entangledLanes|=2;S;){var M=1<<31-Ie(S);T.entanglements[1]|=M,S&=~M}ar(m),(Xt&6)===0&&(Vc=Oe()+500,Hl(0))}}break;case 13:T=Fa(m,2),T!==null&&un(T,m,2),Yc(),Xg(m,2)}if(m=Fg(l),m===null&&Lg(r,s,l,lf,o),m===f)break;f=m}f!==null&&l.stopPropagation()}else Lg(r,s,l,null,o)}}function Fg(r){return r=eh(r),Zg(r)}var lf=null;function Zg(r){if(lf=null,r=Cr(r),r!==null){var s=u(r);if(s===null)r=null;else{var o=s.tag;if(o===13){if(r=c(s),r!==null)return r;r=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null)}}return lf=r,null}function Aw(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Fo()){case Ma:return 2;case rs:return 8;case is:case Ks:return 32;case ss:return 268435456;default:return 32}default:return 32}}var Qg=!1,Ds=null,ks=null,Os=null,Fl=new Map,Zl=new Map,Is=[],kE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ew(r,s){switch(r){case"focusin":case"focusout":Ds=null;break;case"dragenter":case"dragleave":ks=null;break;case"mouseover":case"mouseout":Os=null;break;case"pointerover":case"pointerout":Fl.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zl.delete(s.pointerId)}}function Ql(r,s,o,l,f,m){return r===null||r.nativeEvent!==m?(r={blockedOn:s,domEventName:o,eventSystemFlags:l,nativeEvent:m,targetContainers:[f]},s!==null&&(s=Dr(s),s!==null&&Tw(s)),r):(r.eventSystemFlags|=l,s=r.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),r)}function OE(r,s,o,l,f){switch(s){case"focusin":return Ds=Ql(Ds,r,s,o,l,f),!0;case"dragenter":return ks=Ql(ks,r,s,o,l,f),!0;case"mouseover":return Os=Ql(Os,r,s,o,l,f),!0;case"pointerover":var m=f.pointerId;return Fl.set(m,Ql(Fl.get(m)||null,r,s,o,l,f)),!0;case"gotpointercapture":return m=f.pointerId,Zl.set(m,Ql(Zl.get(m)||null,r,s,o,l,f)),!0}return!1}function Nw(r){var s=Cr(r.target);if(s!==null){var o=u(s);if(o!==null){if(s=o.tag,s===13){if(s=c(o),s!==null){r.blockedOn=s,Yd(r.priority,function(){if(o.tag===13){var l=ln();l=tl(l);var f=Fa(o,l);f!==null&&un(f,o,l),Xg(o,l)}});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){r.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}r.blockedOn=null}function uf(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var o=Fg(r.nativeEvent);if(o===null){o=r.nativeEvent;var l=new o.constructor(o.type,o);th=l,o.target.dispatchEvent(l),th=null}else return s=Dr(o),s!==null&&Tw(s),r.blockedOn=o,!1;s.shift()}return!0}function Cw(r,s,o){uf(r)&&o.delete(s)}function IE(){Qg=!1,Ds!==null&&uf(Ds)&&(Ds=null),ks!==null&&uf(ks)&&(ks=null),Os!==null&&uf(Os)&&(Os=null),Fl.forEach(Cw),Zl.forEach(Cw)}function cf(r,s){r.blockedOn===s&&(r.blockedOn=null,Qg||(Qg=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,IE)))}var ff=null;function Dw(r){ff!==r&&(ff=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){ff===r&&(ff=null);for(var s=0;s<r.length;s+=3){var o=r[s],l=r[s+1],f=r[s+2];if(typeof l!="function"){if(Zg(l||o)===null)continue;break}var m=Dr(o);m!==null&&(r.splice(s,3),s-=3,Zh(m,{pending:!0,data:f,method:o.method,action:l},l,f))}}))}function Wl(r){function s(M){return cf(M,r)}Ds!==null&&cf(Ds,r),ks!==null&&cf(ks,r),Os!==null&&cf(Os,r),Fl.forEach(s),Zl.forEach(s);for(var o=0;o<Is.length;o++){var l=Is[o];l.blockedOn===r&&(l.blockedOn=null)}for(;0<Is.length&&(o=Is[0],o.blockedOn===null);)Nw(o),o.blockedOn===null&&Is.shift();if(o=(r.ownerDocument||r).$$reactFormReplay,o!=null)for(l=0;l<o.length;l+=3){var f=o[l],m=o[l+1],S=f[_e]||null;if(typeof m=="function")S||Dw(o);else if(S){var T=null;if(m&&m.hasAttribute("formAction")){if(f=m,S=m[_e]||null)T=S.formAction;else if(Zg(f)!==null)continue}else T=S.action;typeof T=="function"?o[l+1]=T:(o.splice(l,3),l-=3),Dw(o)}}}function Wg(r){this._internalRoot=r}df.prototype.render=Wg.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(i(409));var o=s.current,l=ln();Sw(o,l,r,s,null,null)},df.prototype.unmount=Wg.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;Sw(r.current,2,null,r,null,null),Yc(),s[as]=null}};function df(r){this._internalRoot=r}df.prototype.unstable_scheduleHydration=function(r){if(r){var s=Zu();r={blockedOn:null,target:r,priority:s};for(var o=0;o<Is.length&&s!==0&&s<Is[o].priority;o++);Is.splice(o,0,r),o===0&&Nw(r)}};var kw=t.version;if(kw!=="19.1.0")throw Error(i(527,kw,"19.1.0"));B.findDOMNode=function(r){var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=h(s),r=r!==null?g(r):null,r=r===null?null:r.stateNode,r};var RE={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:D,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hf.isDisabled&&hf.supportsFiber)try{qn=hf.inject(RE),Ee=hf}catch{}}return eu.createRoot=function(r,s){if(!a(r))throw Error(i(299));var o=!1,l="",f=j0,m=Y0,S=G0,T=null;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(l=s.identifierPrefix),s.onUncaughtError!==void 0&&(f=s.onUncaughtError),s.onCaughtError!==void 0&&(m=s.onCaughtError),s.onRecoverableError!==void 0&&(S=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(T=s.unstable_transitionCallbacks)),s=ww(r,1,!1,null,null,o,l,f,m,S,T,null),r[as]=s.current,zg(r),new Wg(s)},eu.hydrateRoot=function(r,s,o){if(!a(r))throw Error(i(299));var l=!1,f="",m=j0,S=Y0,T=G0,M=null,G=null;return o!=null&&(o.unstable_strictMode===!0&&(l=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(m=o.onUncaughtError),o.onCaughtError!==void 0&&(S=o.onCaughtError),o.onRecoverableError!==void 0&&(T=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(M=o.unstable_transitionCallbacks),o.formState!==void 0&&(G=o.formState)),s=ww(r,1,!0,s,o??null,l,f,m,S,T,M,G),s.context=bw(null),o=s.current,l=ln(),l=tl(l),f=gs(l),f.callback=null,ms(o,f,l),o=l,s.current.lanes=o,Qs(s,o),ar(s),r[as]=s.current,zg(r),new df(s)},eu.version="19.1.0",eu}var qw;function $E(){if(qw)return em.exports;qw=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),em.exports=HE(),em.exports}var VE=$E();const jE="@yorkie-js/react",YE="0.6.10",Pw={name:jE,version:YE};var W=_u();const GE=L1(W);var _t;(function(n){n[n.Canceled=1]="Canceled",n[n.Unknown=2]="Unknown",n[n.InvalidArgument=3]="InvalidArgument",n[n.DeadlineExceeded=4]="DeadlineExceeded",n[n.NotFound=5]="NotFound",n[n.AlreadyExists=6]="AlreadyExists",n[n.PermissionDenied=7]="PermissionDenied",n[n.ResourceExhausted=8]="ResourceExhausted",n[n.FailedPrecondition=9]="FailedPrecondition",n[n.Aborted=10]="Aborted",n[n.OutOfRange=11]="OutOfRange",n[n.Unimplemented=12]="Unimplemented",n[n.Internal=13]="Internal",n[n.Unavailable=14]="Unavailable",n[n.DataLoss=15]="DataLoss",n[n.Unauthenticated=16]="Unauthenticated"})(_t||(_t={}));function Jw(n){const t=_t[n];return typeof t!="string"?n.toString():t[0].toLowerCase()+t.substring(1).replace(/[A-Z]/g,e=>"_"+e.toLowerCase())}class Gt extends Error{constructor(t,e=_t.Unknown,i,a,u){super(XE(t,e)),this.name="ConnectError",Object.setPrototypeOf(this,new.target.prototype),this.rawMessage=t,this.code=e,this.metadata=new Headers(i??{}),this.details=a??[],this.cause=u}static from(t,e=_t.Unknown){return t instanceof Gt?t:t instanceof Error?t.name=="AbortError"?new Gt(t.message,_t.Canceled):new Gt(t.message,e,void 0,void 0,t):new Gt(String(t),e,void 0,void 0,t)}static[Symbol.hasInstance](t){return t instanceof Error?Object.getPrototypeOf(t)===Gt.prototype?!0:t.name==="ConnectError"&&"code"in t&&typeof t.code=="number"&&"metadata"in t&&"details"in t&&Array.isArray(t.details)&&"rawMessage"in t&&typeof t.rawMessage=="string"&&"cause"in t:!1}findDetails(t){const e="typeName"in t?{findMessage:a=>a===t.typeName?t:void 0}:t,i=[];for(const a of this.details){if("getType"in a){e.findMessage(a.getType().typeName)&&i.push(a);continue}const u=e.findMessage(a.type);if(u)try{i.push(u.fromBinary(a.value))}catch{}}return i}}function XE(n,t){return n.length?`[${Jw(t)}] ${n}`:`[${Jw(t)}]`}function ue(n,t){if(!n)throw new Error(t)}const KE=34028234663852886e22,FE=-34028234663852886e22,ZE=4294967295,QE=2147483647,WE=-2147483648;function Df(n){if(typeof n!="number")throw new Error("invalid int 32: "+typeof n);if(!Number.isInteger(n)||n>QE||n<WE)throw new Error("invalid int 32: "+n)}function Dm(n){if(typeof n!="number")throw new Error("invalid uint 32: "+typeof n);if(!Number.isInteger(n)||n>ZE||n<0)throw new Error("invalid uint 32: "+n)}function U1(n){if(typeof n!="number")throw new Error("invalid float 32: "+typeof n);if(Number.isFinite(n)&&(n>KE||n<FE))throw new Error("invalid float 32: "+n)}const q1=Symbol("@bufbuild/protobuf/enum-type");function tN(n){const t=n[q1];return ue(t,"missing enum type on enum object"),t}function P1(n,t,e,i){n[q1]=J1(t,e.map(a=>({no:a.no,name:a.name,localName:n[a.no]})))}function J1(n,t,e){const i=Object.create(null),a=Object.create(null),u=[];for(const c of t){const d=H1(c);u.push(d),i[c.name]=d,a[c.no]=d}return{typeName:n,values:u,findName(c){return i[c]},findNumber(c){return a[c]}}}function eN(n,t,e){const i={};for(const a of t){const u=H1(a);i[u.localName]=u.no,i[u.no]=u.localName}return P1(i,n,t),i}function H1(n){return"localName"in n?n:Object.assign(Object.assign({},n),{localName:n.name})}class yt{equals(t){return this.getType().runtime.util.equals(this.getType(),this,t)}clone(){return this.getType().runtime.util.clone(this)}fromBinary(t,e){const i=this.getType(),a=i.runtime.bin,u=a.makeReadOptions(e);return a.readMessage(this,u.readerFactory(t),t.byteLength,u),this}fromJson(t,e){const i=this.getType(),a=i.runtime.json,u=a.makeReadOptions(e);return a.readMessage(i,t,u,this),this}fromJsonString(t,e){let i;try{i=JSON.parse(t)}catch(a){throw new Error(`cannot decode ${this.getType().typeName} from JSON: ${a instanceof Error?a.message:String(a)}`)}return this.fromJson(i,e)}toBinary(t){const e=this.getType(),i=e.runtime.bin,a=i.makeWriteOptions(t),u=a.writerFactory();return i.writeMessage(this,u,a),u.finish()}toJson(t){const e=this.getType(),i=e.runtime.json,a=i.makeWriteOptions(t);return i.writeMessage(this,a)}toJsonString(t){var e;const i=this.toJson(t);return JSON.stringify(i,null,(e=t==null?void 0:t.prettySpaces)!==null&&e!==void 0?e:0)}toJSON(){return this.toJson({emitDefaultValues:!0})}getType(){return Object.getPrototypeOf(this).constructor}}function nN(n,t,e,i){var a;const u=(a=i==null?void 0:i.localName)!==null&&a!==void 0?a:t.substring(t.lastIndexOf(".")+1),c={[u]:function(d){n.util.initFields(this),n.util.initPartial(d,this)}}[u];return Object.setPrototypeOf(c.prototype,new yt),Object.assign(c,{runtime:n,typeName:t,fields:n.util.newFieldList(e),fromBinary(d,h){return new c().fromBinary(d,h)},fromJson(d,h){return new c().fromJson(d,h)},fromJsonString(d,h){return new c().fromJsonString(d,h)},equals(d,h){return n.util.equals(c,d,h)}}),c}function rN(){let n=0,t=0;for(let i=0;i<28;i+=7){let a=this.buf[this.pos++];if(n|=(a&127)<<i,(a&128)==0)return this.assertBounds(),[n,t]}let e=this.buf[this.pos++];if(n|=(e&15)<<28,t=(e&112)>>4,(e&128)==0)return this.assertBounds(),[n,t];for(let i=3;i<=31;i+=7){let a=this.buf[this.pos++];if(t|=(a&127)<<i,(a&128)==0)return this.assertBounds(),[n,t]}throw new Error("invalid varint")}function am(n,t,e){for(let u=0;u<28;u=u+7){const c=n>>>u,d=!(!(c>>>7)&&t==0),h=(d?c|128:c)&255;if(e.push(h),!d)return}const i=n>>>28&15|(t&7)<<4,a=t>>3!=0;if(e.push((a?i|128:i)&255),!!a){for(let u=3;u<31;u=u+7){const c=t>>>u,d=!!(c>>>7),h=(d?c|128:c)&255;if(e.push(h),!d)return}e.push(t>>>31&1)}}const kf=4294967296;function Hw(n){const t=n[0]==="-";t&&(n=n.slice(1));const e=1e6;let i=0,a=0;function u(c,d){const h=Number(n.slice(c,d));a*=e,i=i*e+h,i>=kf&&(a=a+(i/kf|0),i=i%kf)}return u(-24,-18),u(-18,-12),u(-12,-6),u(-6),t?V1(i,a):py(i,a)}function iN(n,t){let e=py(n,t);const i=e.hi&2147483648;i&&(e=V1(e.lo,e.hi));const a=$1(e.lo,e.hi);return i?"-"+a:a}function $1(n,t){if({lo:n,hi:t}=sN(n,t),t<=2097151)return String(kf*t+n);const e=n&16777215,i=(n>>>24|t<<8)&16777215,a=t>>16&65535;let u=e+i*6777216+a*6710656,c=i+a*8147497,d=a*2;const h=1e7;return u>=h&&(c+=Math.floor(u/h),u%=h),c>=h&&(d+=Math.floor(c/h),c%=h),d.toString()+$w(c)+$w(u)}function sN(n,t){return{lo:n>>>0,hi:t>>>0}}function py(n,t){return{lo:n|0,hi:t|0}}function V1(n,t){return t=~t,n?n=~n+1:t+=1,py(n,t)}const $w=n=>{const t=String(n);return"0000000".slice(t.length)+t};function Vw(n,t){if(n>=0){for(;n>127;)t.push(n&127|128),n=n>>>7;t.push(n)}else{for(let e=0;e<9;e++)t.push(n&127|128),n=n>>7;t.push(1)}}function aN(){let n=this.buf[this.pos++],t=n&127;if((n&128)==0)return this.assertBounds(),t;if(n=this.buf[this.pos++],t|=(n&127)<<7,(n&128)==0)return this.assertBounds(),t;if(n=this.buf[this.pos++],t|=(n&127)<<14,(n&128)==0)return this.assertBounds(),t;if(n=this.buf[this.pos++],t|=(n&127)<<21,(n&128)==0)return this.assertBounds(),t;n=this.buf[this.pos++],t|=(n&15)<<28;for(let e=5;(n&128)!==0&&e<10;e++)n=this.buf[this.pos++];if((n&128)!=0)throw new Error("invalid varint");return this.assertBounds(),t>>>0}var jw={};function oN(){const n=new DataView(new ArrayBuffer(8));if(typeof BigInt=="function"&&typeof n.getBigInt64=="function"&&typeof n.getBigUint64=="function"&&typeof n.setBigInt64=="function"&&typeof n.setBigUint64=="function"&&(typeof process!="object"||typeof jw!="object"||jw.BUF_BIGINT_DISABLE!=="1")){const a=BigInt("-9223372036854775808"),u=BigInt("9223372036854775807"),c=BigInt("0"),d=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(h){const g=typeof h=="bigint"?h:BigInt(h);if(g>u||g<a)throw new Error(`int64 invalid: ${h}`);return g},uParse(h){const g=typeof h=="bigint"?h:BigInt(h);if(g>d||g<c)throw new Error(`uint64 invalid: ${h}`);return g},enc(h){return n.setBigInt64(0,this.parse(h),!0),{lo:n.getInt32(0,!0),hi:n.getInt32(4,!0)}},uEnc(h){return n.setBigInt64(0,this.uParse(h),!0),{lo:n.getInt32(0,!0),hi:n.getInt32(4,!0)}},dec(h,g){return n.setInt32(0,h,!0),n.setInt32(4,g,!0),n.getBigInt64(0,!0)},uDec(h,g){return n.setInt32(0,h,!0),n.setInt32(4,g,!0),n.getBigUint64(0,!0)}}}const e=a=>ue(/^-?[0-9]+$/.test(a),`int64 invalid: ${a}`),i=a=>ue(/^[0-9]+$/.test(a),`uint64 invalid: ${a}`);return{zero:"0",supported:!1,parse(a){return typeof a!="string"&&(a=a.toString()),e(a),a},uParse(a){return typeof a!="string"&&(a=a.toString()),i(a),a},enc(a){return typeof a!="string"&&(a=a.toString()),e(a),Hw(a)},uEnc(a){return typeof a!="string"&&(a=a.toString()),i(a),Hw(a)},dec(a,u){return iN(a,u)},uDec(a,u){return $1(a,u)}}}const re=oN();var rt;(function(n){n[n.DOUBLE=1]="DOUBLE",n[n.FLOAT=2]="FLOAT",n[n.INT64=3]="INT64",n[n.UINT64=4]="UINT64",n[n.INT32=5]="INT32",n[n.FIXED64=6]="FIXED64",n[n.FIXED32=7]="FIXED32",n[n.BOOL=8]="BOOL",n[n.STRING=9]="STRING",n[n.BYTES=12]="BYTES",n[n.UINT32=13]="UINT32",n[n.SFIXED32=15]="SFIXED32",n[n.SFIXED64=16]="SFIXED64",n[n.SINT32=17]="SINT32",n[n.SINT64=18]="SINT64"})(rt||(rt={}));var Gs;(function(n){n[n.BIGINT=0]="BIGINT",n[n.STRING=1]="STRING"})(Gs||(Gs={}));function Ms(n,t,e){if(t===e)return!0;if(n==rt.BYTES){if(!(t instanceof Uint8Array)||!(e instanceof Uint8Array)||t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0}switch(n){case rt.UINT64:case rt.FIXED64:case rt.INT64:case rt.SFIXED64:case rt.SINT64:return t==e}return!1}function Bo(n,t){switch(n){case rt.BOOL:return!1;case rt.UINT64:case rt.FIXED64:case rt.INT64:case rt.SFIXED64:case rt.SINT64:return t==0?re.zero:"0";case rt.DOUBLE:case rt.FLOAT:return 0;case rt.BYTES:return new Uint8Array(0);case rt.STRING:return"";default:return 0}}function j1(n,t){switch(n){case rt.BOOL:return t===!1;case rt.STRING:return t==="";case rt.BYTES:return t instanceof Uint8Array&&!t.byteLength;default:return t==0}}var me;(function(n){n[n.Varint=0]="Varint",n[n.Bit64=1]="Bit64",n[n.LengthDelimited=2]="LengthDelimited",n[n.StartGroup=3]="StartGroup",n[n.EndGroup=4]="EndGroup",n[n.Bit32=5]="Bit32"})(me||(me={}));class lN{constructor(t){this.stack=[],this.textEncoder=t??new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let t=0;for(let a=0;a<this.chunks.length;a++)t+=this.chunks[a].length;let e=new Uint8Array(t),i=0;for(let a=0;a<this.chunks.length;a++)e.set(this.chunks[a],i),i+=this.chunks[a].length;return this.chunks=[],e}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let t=this.finish(),e=this.stack.pop();if(!e)throw new Error("invalid state, fork stack empty");return this.chunks=e.chunks,this.buf=e.buf,this.uint32(t.byteLength),this.raw(t)}tag(t,e){return this.uint32((t<<3|e)>>>0)}raw(t){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(t),this}uint32(t){for(Dm(t);t>127;)this.buf.push(t&127|128),t=t>>>7;return this.buf.push(t),this}int32(t){return Df(t),Vw(t,this.buf),this}bool(t){return this.buf.push(t?1:0),this}bytes(t){return this.uint32(t.byteLength),this.raw(t)}string(t){let e=this.textEncoder.encode(t);return this.uint32(e.byteLength),this.raw(e)}float(t){U1(t);let e=new Uint8Array(4);return new DataView(e.buffer).setFloat32(0,t,!0),this.raw(e)}double(t){let e=new Uint8Array(8);return new DataView(e.buffer).setFloat64(0,t,!0),this.raw(e)}fixed32(t){Dm(t);let e=new Uint8Array(4);return new DataView(e.buffer).setUint32(0,t,!0),this.raw(e)}sfixed32(t){Df(t);let e=new Uint8Array(4);return new DataView(e.buffer).setInt32(0,t,!0),this.raw(e)}sint32(t){return Df(t),t=(t<<1^t>>31)>>>0,Vw(t,this.buf),this}sfixed64(t){let e=new Uint8Array(8),i=new DataView(e.buffer),a=re.enc(t);return i.setInt32(0,a.lo,!0),i.setInt32(4,a.hi,!0),this.raw(e)}fixed64(t){let e=new Uint8Array(8),i=new DataView(e.buffer),a=re.uEnc(t);return i.setInt32(0,a.lo,!0),i.setInt32(4,a.hi,!0),this.raw(e)}int64(t){let e=re.enc(t);return am(e.lo,e.hi,this.buf),this}sint64(t){let e=re.enc(t),i=e.hi>>31,a=e.lo<<1^i,u=(e.hi<<1|e.lo>>>31)^i;return am(a,u,this.buf),this}uint64(t){let e=re.uEnc(t);return am(e.lo,e.hi,this.buf),this}}class uN{constructor(t,e){this.varint64=rN,this.uint32=aN,this.buf=t,this.len=t.length,this.pos=0,this.view=new DataView(t.buffer,t.byteOffset,t.byteLength),this.textDecoder=e??new TextDecoder}tag(){let t=this.uint32(),e=t>>>3,i=t&7;if(e<=0||i<0||i>5)throw new Error("illegal tag: field no "+e+" wire type "+i);return[e,i]}skip(t,e){let i=this.pos;switch(t){case me.Varint:for(;this.buf[this.pos++]&128;);break;case me.Bit64:this.pos+=4;case me.Bit32:this.pos+=4;break;case me.LengthDelimited:let a=this.uint32();this.pos+=a;break;case me.StartGroup:for(;;){const[u,c]=this.tag();if(c===me.EndGroup){if(e!==void 0&&u!==e)throw new Error("invalid end group tag");break}this.skip(c,u)}break;default:throw new Error("cant skip wire type "+t)}return this.assertBounds(),this.buf.subarray(i,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let t=this.uint32();return t>>>1^-(t&1)}int64(){return re.dec(...this.varint64())}uint64(){return re.uDec(...this.varint64())}sint64(){let[t,e]=this.varint64(),i=-(t&1);return t=(t>>>1|(e&1)<<31)^i,e=e>>>1^i,re.dec(t,e)}bool(){let[t,e]=this.varint64();return t!==0||e!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return re.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return re.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let t=this.uint32(),e=this.pos;return this.pos+=t,this.assertBounds(),this.buf.subarray(e,e+t)}string(){return this.textDecoder.decode(this.bytes())}}function cN(n,t,e,i){let a;return{typeName:t,extendee:e,get field(){if(!a){const u=typeof i=="function"?i():i;u.name=t.split(".").pop(),u.jsonName=`[${t}]`,a=n.util.newFieldList([u]).list()[0]}return a},runtime:n}}function Y1(n){const t=n.field.localName,e=Object.create(null);return e[t]=fN(n),[e,()=>e[t]]}function fN(n){const t=n.field;if(t.repeated)return[];if(t.default!==void 0)return t.default;switch(t.kind){case"enum":return t.T.values[0].no;case"scalar":return Bo(t.T,t.L);case"message":const e=t.T,i=new e;return e.fieldWrapper?e.fieldWrapper.unwrapField(i):i;case"map":throw"map fields are not allowed to be extensions"}}function dN(n,t){if(!t.repeated&&(t.kind=="enum"||t.kind=="scalar")){for(let e=n.length-1;e>=0;--e)if(n[e].no==t.no)return[n[e]];return[]}return n.filter(e=>e.no===t.no)}let Vi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),xd=[];for(let n=0;n<Vi.length;n++)xd[Vi[n].charCodeAt(0)]=n;xd[45]=Vi.indexOf("+");xd[95]=Vi.indexOf("/");const vy={dec(n){let t=n.length*3/4;n[n.length-2]=="="?t-=2:n[n.length-1]=="="&&(t-=1);let e=new Uint8Array(t),i=0,a=0,u,c=0;for(let d=0;d<n.length;d++){if(u=xd[n.charCodeAt(d)],u===void 0)switch(n[d]){case"=":a=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(a){case 0:c=u,a=1;break;case 1:e[i++]=c<<2|(u&48)>>4,c=u,a=2;break;case 2:e[i++]=(c&15)<<4|(u&60)>>2,c=u,a=3;break;case 3:e[i++]=(c&3)<<6|u,a=0;break}}if(a==1)throw Error("invalid base64 string.");return e.subarray(0,i)},enc(n){let t="",e=0,i,a=0;for(let u=0;u<n.length;u++)switch(i=n[u],e){case 0:t+=Vi[i>>2],a=(i&3)<<4,e=1;break;case 1:t+=Vi[a|i>>4],a=(i&15)<<2,e=2;break;case 2:t+=Vi[a|i>>6],t+=Vi[i&63],e=0;break}return e&&(t+=Vi[a],t+="=",e==1&&(t+="=")),t}};function hN(n,t,e){X1(t,n);const i=t.runtime.bin.makeReadOptions(e),a=dN(n.getType().runtime.bin.listUnknownFields(n),t.field),[u,c]=Y1(t);for(const d of a)t.runtime.bin.readField(u,i.readerFactory(d.data),t.field,d.wireType,i);return c()}function gN(n,t,e,i){X1(t,n);const a=t.runtime.bin.makeReadOptions(i),u=t.runtime.bin.makeWriteOptions(i);if(G1(n,t)){const g=n.getType().runtime.bin.listUnknownFields(n).filter(y=>y.no!=t.field.no);n.getType().runtime.bin.discardUnknownFields(n);for(const y of g)n.getType().runtime.bin.onUnknownField(n,y.no,y.wireType,y.data)}const c=u.writerFactory();let d=t.field;!d.opt&&!d.repeated&&(d.kind=="enum"||d.kind=="scalar")&&(d=Object.assign(Object.assign({},t.field),{opt:!0})),t.runtime.bin.writeField(d,e,c,u);const h=a.readerFactory(c.finish());for(;h.pos<h.len;){const[g,y]=h.tag(),w=h.skip(y,g);n.getType().runtime.bin.onUnknownField(n,g,y,w)}}function G1(n,t){const e=n.getType();return t.extendee.typeName===e.typeName&&!!e.runtime.bin.listUnknownFields(n).find(i=>i.no==t.field.no)}function X1(n,t){ue(n.extendee.typeName==t.getType().typeName,`extension ${n.typeName} can only be applied to message ${n.extendee.typeName}`)}function K1(n,t){const e=n.localName;if(n.repeated)return t[e].length>0;if(n.oneof)return t[n.oneof.localName].case===e;switch(n.kind){case"enum":case"scalar":return n.opt||n.req?t[e]!==void 0:n.kind=="enum"?t[e]!==n.T.values[0].no:!j1(n.T,t[e]);case"message":return t[e]!==void 0;case"map":return Object.keys(t[e]).length>0}}function Yw(n,t){const e=n.localName,i=!n.opt&&!n.req;if(n.repeated)t[e]=[];else if(n.oneof)t[n.oneof.localName]={case:void 0};else switch(n.kind){case"map":t[e]={};break;case"enum":t[e]=i?n.T.values[0].no:void 0;break;case"scalar":t[e]=i?Bo(n.T,n.L):void 0;break;case"message":t[e]=void 0;break}}function Ta(n,t){if(n===null||typeof n!="object"||!Object.getOwnPropertyNames(yt.prototype).every(i=>i in n&&typeof n[i]=="function"))return!1;const e=n.getType();return e===null||typeof e!="function"||!("typeName"in e)||typeof e.typeName!="string"?!1:t===void 0?!0:e.typeName==t.typeName}function F1(n,t){return Ta(t)||!n.fieldWrapper?t:n.fieldWrapper.wrapField(t)}rt.DOUBLE,rt.FLOAT,rt.INT64,rt.UINT64,rt.INT32,rt.UINT32,rt.BOOL,rt.STRING,rt.BYTES;const Gw={ignoreUnknownFields:!1},Xw={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0};function mN(n){return n?Object.assign(Object.assign({},Gw),n):Gw}function yN(n){return n?Object.assign(Object.assign({},Xw),n):Xw}const qf=Symbol(),Of=Symbol();function pN(){return{makeReadOptions:mN,makeWriteOptions:yN,readMessage(n,t,e,i){if(t==null||Array.isArray(t)||typeof t!="object")throw new Error(`cannot decode message ${n.typeName} from JSON: ${lr(t)}`);i=i??new n;const a=new Map,u=e.typeRegistry;for(const[c,d]of Object.entries(t)){const h=n.fields.findJsonName(c);if(h){if(h.oneof){if(d===null&&h.kind=="scalar")continue;const g=a.get(h.oneof);if(g!==void 0)throw new Error(`cannot decode message ${n.typeName} from JSON: multiple keys for oneof "${h.oneof.name}" present: "${g}", "${c}"`);a.set(h.oneof,c)}Kw(i,d,h,e,n)}else{let g=!1;if(u!=null&&u.findExtension&&c.startsWith("[")&&c.endsWith("]")){const y=u.findExtension(c.substring(1,c.length-1));if(y&&y.extendee.typeName==n.typeName){g=!0;const[w,p]=Y1(y);Kw(w,d,y.field,e,y),gN(i,y,p(),e)}}if(!g&&!e.ignoreUnknownFields)throw new Error(`cannot decode message ${n.typeName} from JSON: key "${c}" is unknown`)}}return i},writeMessage(n,t){const e=n.getType(),i={};let a;try{for(a of e.fields.byNumber()){if(!K1(a,n)){if(a.req)throw"required field not set";if(!t.emitDefaultValues||!wN(a))continue}const c=a.oneof?n[a.oneof.localName].value:n[a.localName],d=Fw(a,c,t);d!==void 0&&(i[t.useProtoFieldName?a.name:a.jsonName]=d)}const u=t.typeRegistry;if(u!=null&&u.findExtensionFor)for(const c of e.runtime.bin.listUnknownFields(n)){const d=u.findExtensionFor(e.typeName,c.no);if(d&&G1(n,d)){const h=hN(n,d,t),g=Fw(d.field,h,t);g!==void 0&&(i[d.field.jsonName]=g)}}}catch(u){const c=a?`cannot encode field ${e.typeName}.${a.name} to JSON`:`cannot encode message ${e.typeName} to JSON`,d=u instanceof Error?u.message:String(u);throw new Error(c+(d.length>0?`: ${d}`:""))}return i},readScalar(n,t,e){return cu(n,t,e??Gs.BIGINT,!0)},writeScalar(n,t,e){if(t!==void 0&&(e||j1(n,t)))return If(n,t)},debug:lr}}function lr(n){if(n===null)return"null";switch(typeof n){case"object":return Array.isArray(n)?"array":"object";case"string":return n.length>100?"string":`"${n.split('"').join('\\"')}"`;default:return String(n)}}function Kw(n,t,e,i,a){let u=e.localName;if(e.repeated){if(ue(e.kind!="map"),t===null)return;if(!Array.isArray(t))throw new Error(`cannot decode field ${a.typeName}.${e.name} from JSON: ${lr(t)}`);const c=n[u];for(const d of t){if(d===null)throw new Error(`cannot decode field ${a.typeName}.${e.name} from JSON: ${lr(d)}`);switch(e.kind){case"message":c.push(e.T.fromJson(d,i));break;case"enum":const h=om(e.T,d,i.ignoreUnknownFields,!0);h!==Of&&c.push(h);break;case"scalar":try{c.push(cu(e.T,d,e.L,!0))}catch(g){let y=`cannot decode field ${a.typeName}.${e.name} from JSON: ${lr(d)}`;throw g instanceof Error&&g.message.length>0&&(y+=`: ${g.message}`),new Error(y)}break}}}else if(e.kind=="map"){if(t===null)return;if(typeof t!="object"||Array.isArray(t))throw new Error(`cannot decode field ${a.typeName}.${e.name} from JSON: ${lr(t)}`);const c=n[u];for(const[d,h]of Object.entries(t)){if(h===null)throw new Error(`cannot decode field ${a.typeName}.${e.name} from JSON: map value null`);let g;try{g=vN(e.K,d)}catch(y){let w=`cannot decode map key for field ${a.typeName}.${e.name} from JSON: ${lr(t)}`;throw y instanceof Error&&y.message.length>0&&(w+=`: ${y.message}`),new Error(w)}switch(e.V.kind){case"message":c[g]=e.V.T.fromJson(h,i);break;case"enum":const y=om(e.V.T,h,i.ignoreUnknownFields,!0);y!==Of&&(c[g]=y);break;case"scalar":try{c[g]=cu(e.V.T,h,Gs.BIGINT,!0)}catch(w){let p=`cannot decode map value for field ${a.typeName}.${e.name} from JSON: ${lr(t)}`;throw w instanceof Error&&w.message.length>0&&(p+=`: ${w.message}`),new Error(p)}break}}}else switch(e.oneof&&(n=n[e.oneof.localName]={case:u},u="value"),e.kind){case"message":const c=e.T;if(t===null&&c.typeName!="google.protobuf.Value")return;let d=n[u];Ta(d)?d.fromJson(t,i):(n[u]=d=c.fromJson(t,i),c.fieldWrapper&&!e.oneof&&(n[u]=c.fieldWrapper.unwrapField(d)));break;case"enum":const h=om(e.T,t,i.ignoreUnknownFields,!1);switch(h){case qf:Yw(e,n);break;case Of:break;default:n[u]=h;break}break;case"scalar":try{const g=cu(e.T,t,e.L,!1);switch(g){case qf:Yw(e,n);break;default:n[u]=g;break}}catch(g){let y=`cannot decode field ${a.typeName}.${e.name} from JSON: ${lr(t)}`;throw g instanceof Error&&g.message.length>0&&(y+=`: ${g.message}`),new Error(y)}break}}function vN(n,t){if(n===rt.BOOL)switch(t){case"true":t=!0;break;case"false":t=!1;break}return cu(n,t,Gs.BIGINT,!0).toString()}function cu(n,t,e,i){if(t===null)return i?Bo(n,e):qf;switch(n){case rt.DOUBLE:case rt.FLOAT:if(t==="NaN")return Number.NaN;if(t==="Infinity")return Number.POSITIVE_INFINITY;if(t==="-Infinity")return Number.NEGATIVE_INFINITY;if(t===""||typeof t=="string"&&t.trim().length!==t.length||typeof t!="string"&&typeof t!="number")break;const a=Number(t);if(Number.isNaN(a)||!Number.isFinite(a))break;return n==rt.FLOAT&&U1(a),a;case rt.INT32:case rt.FIXED32:case rt.SFIXED32:case rt.SINT32:case rt.UINT32:let u;if(typeof t=="number"?u=t:typeof t=="string"&&t.length>0&&t.trim().length===t.length&&(u=Number(t)),u===void 0)break;return n==rt.UINT32||n==rt.FIXED32?Dm(u):Df(u),u;case rt.INT64:case rt.SFIXED64:case rt.SINT64:if(typeof t!="number"&&typeof t!="string")break;const c=re.parse(t);return e?c.toString():c;case rt.FIXED64:case rt.UINT64:if(typeof t!="number"&&typeof t!="string")break;const d=re.uParse(t);return e?d.toString():d;case rt.BOOL:if(typeof t!="boolean")break;return t;case rt.STRING:if(typeof t!="string")break;try{encodeURIComponent(t)}catch{throw new Error("invalid UTF8")}return t;case rt.BYTES:if(t==="")return new Uint8Array(0);if(typeof t!="string")break;return vy.dec(t)}throw new Error}function om(n,t,e,i){if(t===null)return n.typeName=="google.protobuf.NullValue"?0:i?n.values[0].no:qf;switch(typeof t){case"number":if(Number.isInteger(t))return t;break;case"string":const a=n.findName(t);if(a!==void 0)return a.no;if(e)return Of;break}throw new Error(`cannot decode enum ${n.typeName} from JSON: ${lr(t)}`)}function wN(n){return n.repeated||n.kind=="map"?!0:!(n.oneof||n.kind=="message"||n.opt||n.req)}function Fw(n,t,e){if(n.kind=="map"){ue(typeof t=="object"&&t!=null);const i={},a=Object.entries(t);switch(n.V.kind){case"scalar":for(const[c,d]of a)i[c.toString()]=If(n.V.T,d);break;case"message":for(const[c,d]of a)i[c.toString()]=d.toJson(e);break;case"enum":const u=n.V.T;for(const[c,d]of a)i[c.toString()]=lm(u,d,e.enumAsInteger);break}return e.emitDefaultValues||a.length>0?i:void 0}if(n.repeated){ue(Array.isArray(t));const i=[];switch(n.kind){case"scalar":for(let a=0;a<t.length;a++)i.push(If(n.T,t[a]));break;case"enum":for(let a=0;a<t.length;a++)i.push(lm(n.T,t[a],e.enumAsInteger));break;case"message":for(let a=0;a<t.length;a++)i.push(t[a].toJson(e));break}return e.emitDefaultValues||i.length>0?i:void 0}switch(n.kind){case"scalar":return If(n.T,t);case"enum":return lm(n.T,t,e.enumAsInteger);case"message":return F1(n.T,t).toJson(e)}}function lm(n,t,e){var i;if(ue(typeof t=="number"),n.typeName=="google.protobuf.NullValue")return null;if(e)return t;const a=n.findNumber(t);return(i=a==null?void 0:a.name)!==null&&i!==void 0?i:t}function If(n,t){switch(n){case rt.INT32:case rt.SFIXED32:case rt.SINT32:case rt.FIXED32:case rt.UINT32:return ue(typeof t=="number"),t;case rt.FLOAT:case rt.DOUBLE:return ue(typeof t=="number"),Number.isNaN(t)?"NaN":t===Number.POSITIVE_INFINITY?"Infinity":t===Number.NEGATIVE_INFINITY?"-Infinity":t;case rt.STRING:return ue(typeof t=="string"),t;case rt.BOOL:return ue(typeof t=="boolean"),t;case rt.UINT64:case rt.FIXED64:case rt.INT64:case rt.SFIXED64:case rt.SINT64:return ue(typeof t=="bigint"||typeof t=="string"||typeof t=="number"),t.toString();case rt.BYTES:return ue(t instanceof Uint8Array),vy.enc(t)}}const xo=Symbol("@bufbuild/protobuf/unknown-fields"),Zw={readUnknownFields:!0,readerFactory:n=>new uN(n)},Qw={writeUnknownFields:!0,writerFactory:()=>new lN};function bN(n){return n?Object.assign(Object.assign({},Zw),n):Zw}function SN(n){return n?Object.assign(Object.assign({},Qw),n):Qw}function xN(){return{makeReadOptions:bN,makeWriteOptions:SN,listUnknownFields(n){var t;return(t=n[xo])!==null&&t!==void 0?t:[]},discardUnknownFields(n){delete n[xo]},writeUnknownFields(n,t){const i=n[xo];if(i)for(const a of i)t.tag(a.no,a.wireType).raw(a.data)},onUnknownField(n,t,e,i){const a=n;Array.isArray(a[xo])||(a[xo]=[]),a[xo].push({no:t,wireType:e,data:i})},readMessage(n,t,e,i,a){const u=n.getType(),c=a?t.len:t.pos+e;let d,h;for(;t.pos<c&&([d,h]=t.tag(),!(a===!0&&h==me.EndGroup));){const g=u.fields.find(d);if(!g){const y=t.skip(h,d);i.readUnknownFields&&this.onUnknownField(n,d,h,y);continue}Ww(n,t,g,h,i)}if(a&&(h!=me.EndGroup||d!==e))throw new Error("invalid end group tag")},readField:Ww,writeMessage(n,t,e){const i=n.getType();for(const a of i.fields.byNumber()){if(!K1(a,n)){if(a.req)throw new Error(`cannot encode field ${i.typeName}.${a.name} to binary: required field not set`);continue}const u=a.oneof?n[a.oneof.localName].value:n[a.localName];tb(a,u,t,e)}return e.writeUnknownFields&&this.writeUnknownFields(n,t),t},writeField(n,t,e,i){t!==void 0&&tb(n,t,e,i)}}}function Ww(n,t,e,i,a){let{repeated:u,localName:c}=e;switch(e.oneof&&(n=n[e.oneof.localName],n.case!=c&&delete n.value,n.case=c,c="value"),e.kind){case"scalar":case"enum":const d=e.kind=="enum"?rt.INT32:e.T;let h=Pf;if(e.kind=="scalar"&&e.L>0&&(h=AN),u){let p=n[c];if(i==me.LengthDelimited&&d!=rt.STRING&&d!=rt.BYTES){let x=t.uint32()+t.pos;for(;t.pos<x;)p.push(h(t,d))}else p.push(h(t,d))}else n[c]=h(t,d);break;case"message":const g=e.T;u?n[c].push(Rf(t,new g,a,e)):Ta(n[c])?Rf(t,n[c],a,e):(n[c]=Rf(t,new g,a,e),g.fieldWrapper&&!e.oneof&&!e.repeated&&(n[c]=g.fieldWrapper.unwrapField(n[c])));break;case"map":let[y,w]=TN(e,t,a);n[c][y]=w;break}}function Rf(n,t,e,i){const a=t.getType().runtime.bin,u=i==null?void 0:i.delimited;return a.readMessage(t,n,u?i.no:n.uint32(),e,u),t}function TN(n,t,e){const i=t.uint32(),a=t.pos+i;let u,c;for(;t.pos<a;){const[d]=t.tag();switch(d){case 1:u=Pf(t,n.K);break;case 2:switch(n.V.kind){case"scalar":c=Pf(t,n.V.T);break;case"enum":c=t.int32();break;case"message":c=Rf(t,new n.V.T,e,void 0);break}break}}if(u===void 0&&(u=Bo(n.K,Gs.BIGINT)),typeof u!="string"&&typeof u!="number"&&(u=u.toString()),c===void 0)switch(n.V.kind){case"scalar":c=Bo(n.V.T,Gs.BIGINT);break;case"enum":c=n.V.T.values[0].no;break;case"message":c=new n.V.T;break}return[u,c]}function AN(n,t){const e=Pf(n,t);return typeof e=="bigint"?e.toString():e}function Pf(n,t){switch(t){case rt.STRING:return n.string();case rt.BOOL:return n.bool();case rt.DOUBLE:return n.double();case rt.FLOAT:return n.float();case rt.INT32:return n.int32();case rt.INT64:return n.int64();case rt.UINT64:return n.uint64();case rt.FIXED64:return n.fixed64();case rt.BYTES:return n.bytes();case rt.FIXED32:return n.fixed32();case rt.SFIXED32:return n.sfixed32();case rt.SFIXED64:return n.sfixed64();case rt.SINT64:return n.sint64();case rt.UINT32:return n.uint32();case rt.SINT32:return n.sint32()}}function tb(n,t,e,i){ue(t!==void 0);const a=n.repeated;switch(n.kind){case"scalar":case"enum":let u=n.kind=="enum"?rt.INT32:n.T;if(a)if(ue(Array.isArray(t)),n.packed)NN(e,u,n.no,t);else for(const c of t)fu(e,u,n.no,c);else fu(e,u,n.no,t);break;case"message":if(a){ue(Array.isArray(t));for(const c of t)eb(e,i,n,c)}else eb(e,i,n,t);break;case"map":ue(typeof t=="object"&&t!=null);for(const[c,d]of Object.entries(t))EN(e,i,n,c,d);break}}function EN(n,t,e,i,a){n.tag(e.no,me.LengthDelimited),n.fork();let u=i;switch(e.K){case rt.INT32:case rt.FIXED32:case rt.UINT32:case rt.SFIXED32:case rt.SINT32:u=Number.parseInt(i);break;case rt.BOOL:ue(i=="true"||i=="false"),u=i=="true";break}switch(fu(n,e.K,1,u),e.V.kind){case"scalar":fu(n,e.V.T,2,a);break;case"enum":fu(n,rt.INT32,2,a);break;case"message":ue(a!==void 0),n.tag(2,me.LengthDelimited).bytes(a.toBinary(t));break}n.join()}function eb(n,t,e,i){const a=F1(e.T,i);e.delimited?n.tag(e.no,me.StartGroup).raw(a.toBinary(t)).tag(e.no,me.EndGroup):n.tag(e.no,me.LengthDelimited).bytes(a.toBinary(t))}function fu(n,t,e,i){ue(i!==void 0);let[a,u]=Z1(t);n.tag(e,a)[u](i)}function NN(n,t,e,i){if(!i.length)return;n.tag(e,me.LengthDelimited).fork();let[,a]=Z1(t);for(let u=0;u<i.length;u++)n[a](i[u]);n.join()}function Z1(n){let t=me.Varint;switch(n){case rt.BYTES:case rt.STRING:t=me.LengthDelimited;break;case rt.DOUBLE:case rt.FIXED64:case rt.SFIXED64:t=me.Bit64;break;case rt.FIXED32:case rt.SFIXED32:case rt.FLOAT:t=me.Bit32;break}const e=rt[n].toLowerCase();return[t,e]}function CN(){return{setEnumType:P1,initPartial(n,t){if(n===void 0)return;const e=t.getType();for(const i of e.fields.byMember()){const a=i.localName,u=t,c=n;if(c[a]!=null)switch(i.kind){case"oneof":const d=c[a].case;if(d===void 0)continue;const h=i.findField(d);let g=c[a].value;h&&h.kind=="message"&&!Ta(g,h.T)?g=new h.T(g):h&&h.kind==="scalar"&&h.T===rt.BYTES&&(g=nu(g)),u[a]={case:d,value:g};break;case"scalar":case"enum":let y=c[a];i.T===rt.BYTES&&(y=i.repeated?y.map(nu):nu(y)),u[a]=y;break;case"map":switch(i.V.kind){case"scalar":case"enum":if(i.V.T===rt.BYTES)for(const[b,x]of Object.entries(c[a]))u[a][b]=nu(x);else Object.assign(u[a],c[a]);break;case"message":const p=i.V.T;for(const b of Object.keys(c[a])){let x=c[a][b];p.fieldWrapper||(x=new p(x)),u[a][b]=x}break}break;case"message":const w=i.T;if(i.repeated)u[a]=c[a].map(p=>Ta(p,w)?p:new w(p));else{const p=c[a];w.fieldWrapper?w.typeName==="google.protobuf.BytesValue"?u[a]=nu(p):u[a]=p:u[a]=Ta(p,w)?p:new w(p)}break}}},equals(n,t,e){return t===e?!0:!t||!e?!1:n.fields.byMember().every(i=>{const a=t[i.localName],u=e[i.localName];if(i.repeated){if(a.length!==u.length)return!1;switch(i.kind){case"message":return a.every((c,d)=>i.T.equals(c,u[d]));case"scalar":return a.every((c,d)=>Ms(i.T,c,u[d]));case"enum":return a.every((c,d)=>Ms(rt.INT32,c,u[d]))}throw new Error(`repeated cannot contain ${i.kind}`)}switch(i.kind){case"message":return i.T.equals(a,u);case"enum":return Ms(rt.INT32,a,u);case"scalar":return Ms(i.T,a,u);case"oneof":if(a.case!==u.case)return!1;const c=i.findField(a.case);if(c===void 0)return!0;switch(c.kind){case"message":return c.T.equals(a.value,u.value);case"enum":return Ms(rt.INT32,a.value,u.value);case"scalar":return Ms(c.T,a.value,u.value)}throw new Error(`oneof cannot contain ${c.kind}`);case"map":const d=Object.keys(a).concat(Object.keys(u));switch(i.V.kind){case"message":const h=i.V.T;return d.every(y=>h.equals(a[y],u[y]));case"enum":return d.every(y=>Ms(rt.INT32,a[y],u[y]));case"scalar":const g=i.V.T;return d.every(y=>Ms(g,a[y],u[y]))}break}})},clone(n){const t=n.getType(),e=new t,i=e;for(const a of t.fields.byMember()){const u=n[a.localName];let c;if(a.repeated)c=u.map(gf);else if(a.kind=="map"){c=i[a.localName];for(const[d,h]of Object.entries(u))c[d]=gf(h)}else a.kind=="oneof"?c=a.findField(u.case)?{case:u.case,value:gf(u.value)}:{case:void 0}:c=gf(u);i[a.localName]=c}for(const a of t.runtime.bin.listUnknownFields(n))t.runtime.bin.onUnknownField(i,a.no,a.wireType,a.data);return e}}}function gf(n){if(n===void 0)return n;if(Ta(n))return n.clone();if(n instanceof Uint8Array){const t=new Uint8Array(n.byteLength);return t.set(n),t}return n}function nu(n){return n instanceof Uint8Array?n:new Uint8Array(n)}function DN(n,t,e){return{syntax:n,json:pN(),bin:xN(),util:Object.assign(Object.assign({},CN()),{newFieldList:t,initFields:e}),makeMessageType(i,a,u){return nN(this,i,a,u)},makeEnum:eN,makeEnumType:J1,getEnumType:tN,makeExtension(i,a,u){return cN(this,i,a,u)}}}class kN{constructor(t,e){this._fields=t,this._normalizer=e}findJsonName(t){if(!this.jsonNames){const e={};for(const i of this.list())e[i.jsonName]=e[i.name]=i;this.jsonNames=e}return this.jsonNames[t]}find(t){if(!this.numbers){const e={};for(const i of this.list())e[i.no]=i;this.numbers=e}return this.numbers[t]}list(){return this.all||(this.all=this._normalizer(this._fields)),this.all}byNumber(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort((t,e)=>t.no-e.no)),this.numbersAsc}byMember(){if(!this.members){this.members=[];const t=this.members;let e;for(const i of this.list())i.oneof?i.oneof!==e&&(e=i.oneof,t.push(e)):t.push(i)}return this.members}}function Q1(n,t){const e=W1(n);return t?e:zN(BN(e))}function ON(n){return Q1(n,!1)}const IN=W1;function W1(n){let t=!1;const e=[];for(let i=0;i<n.length;i++){let a=n.charAt(i);switch(a){case"_":t=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":e.push(a),t=!1;break;default:t&&(t=!1,a=a.toUpperCase()),e.push(a);break}}return e.join("")}const RN=new Set(["constructor","toString","toJSON","valueOf"]),MN=new Set(["getType","clone","equals","fromBinary","fromJson","fromJsonString","toBinary","toJson","toJsonString","toObject"]),tS=n=>`${n}$`,BN=n=>MN.has(n)?tS(n):n,zN=n=>RN.has(n)?tS(n):n;class LN{constructor(t){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.req=!1,this.default=void 0,this.fields=[],this.name=t,this.localName=ON(t)}addField(t){ue(t.oneof===this,`field ${t.name} not one of ${this.name}`),this.fields.push(t)}findField(t){if(!this._lookup){this._lookup=Object.create(null);for(let e=0;e<this.fields.length;e++)this._lookup[this.fields[e].localName]=this.fields[e]}return this._lookup[t]}}function _N(n,t){var e,i,a,u,c,d;const h=[];let g;for(const y of typeof n=="function"?n():n){const w=y;if(w.localName=Q1(y.name,y.oneof!==void 0),w.jsonName=(e=y.jsonName)!==null&&e!==void 0?e:IN(y.name),w.repeated=(i=y.repeated)!==null&&i!==void 0?i:!1,y.kind=="scalar"&&(w.L=(a=y.L)!==null&&a!==void 0?a:Gs.BIGINT),w.delimited=(u=y.delimited)!==null&&u!==void 0?u:!1,w.req=(c=y.req)!==null&&c!==void 0?c:!1,w.opt=(d=y.opt)!==null&&d!==void 0?d:!1,y.packed===void 0&&(w.packed=y.kind=="enum"||y.kind=="scalar"&&y.T!=rt.BYTES&&y.T!=rt.STRING),y.oneof!==void 0){const p=typeof y.oneof=="string"?y.oneof:y.oneof.name;(!g||g.name!=p)&&(g=new LN(p)),w.oneof=g,g.addField(w)}h.push(w)}return h}const A=DN("proto3",n=>new kN(n,t=>_N(t)),n=>{for(const t of n.getType().fields.byMember()){if(t.opt)continue;const e=t.localName,i=n;if(t.repeated){i[e]=[];continue}switch(t.kind){case"oneof":i[e]={case:void 0};break;case"enum":i[e]=0;break;case"map":i[e]={};break;case"scalar":i[e]=Bo(t.T,t.L);break}}});var $e;(function(n){n[n.Unary=0]="Unary",n[n.ServerStreaming=1]="ServerStreaming",n[n.ClientStreaming=2]="ClientStreaming",n[n.BiDiStreaming=3]="BiDiStreaming"})($e||($e={}));var nb;(function(n){n[n.NoSideEffects=1]="NoSideEffects",n[n.Idempotent=2]="Idempotent"})(nb||(nb={}));class Pe extends yt{constructor(t){super(),this.seconds=re.zero,this.nanos=0,A.util.initPartial(t,this)}fromJson(t,e){if(typeof t!="string")throw new Error(`cannot decode google.protobuf.Timestamp from JSON: ${A.json.debug(t)}`);const i=t.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!i)throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");const a=Date.parse(i[1]+"-"+i[2]+"-"+i[3]+"T"+i[4]+":"+i[5]+":"+i[6]+(i[8]?i[8]:"Z"));if(Number.isNaN(a))throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");if(a<Date.parse("0001-01-01T00:00:00Z")||a>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot decode message google.protobuf.Timestamp from JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");return this.seconds=re.parse(a/1e3),this.nanos=0,i[7]&&(this.nanos=parseInt("1"+i[7]+"0".repeat(9-i[7].length))-1e9),this}toJson(t){const e=Number(this.seconds)*1e3;if(e<Date.parse("0001-01-01T00:00:00Z")||e>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot encode google.protobuf.Timestamp to JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");if(this.nanos<0)throw new Error("cannot encode google.protobuf.Timestamp to JSON: nanos must not be negative");let i="Z";if(this.nanos>0){const a=(this.nanos+1e9).toString().substring(1);a.substring(3)==="000000"?i="."+a.substring(0,3)+"Z":a.substring(6)==="000"?i="."+a.substring(0,6)+"Z":i="."+a+"Z"}return new Date(e).toISOString().replace(".000Z",i)}toDate(){return new Date(Number(this.seconds)*1e3+Math.ceil(this.nanos/1e6))}static now(){return Pe.fromDate(new Date)}static fromDate(t){const e=t.getTime();return new Pe({seconds:re.parse(Math.floor(e/1e3)),nanos:e%1e3*1e6})}static fromBinary(t,e){return new Pe().fromBinary(t,e)}static fromJson(t,e){return new Pe().fromJson(t,e)}static fromJsonString(t,e){return new Pe().fromJsonString(t,e)}static equals(t,e){return A.util.equals(Pe,t,e)}}Pe.runtime=A;Pe.typeName="google.protobuf.Timestamp";Pe.fields=A.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);class ji extends yt{constructor(t){super(),this.seconds=re.zero,this.nanos=0,A.util.initPartial(t,this)}fromJson(t,e){if(typeof t!="string")throw new Error(`cannot decode google.protobuf.Duration from JSON: ${A.json.debug(t)}`);const i=t.match(/^(-?[0-9]+)(?:\.([0-9]+))?s/);if(i===null)throw new Error(`cannot decode google.protobuf.Duration from JSON: ${A.json.debug(t)}`);const a=Number(i[1]);if(a>315576e6||a<-315576e6)throw new Error(`cannot decode google.protobuf.Duration from JSON: ${A.json.debug(t)}`);if(this.seconds=re.parse(a),typeof i[2]=="string"){const u=i[2]+"0".repeat(9-i[2].length);this.nanos=parseInt(u),(a<0||Object.is(a,-0))&&(this.nanos=-this.nanos)}return this}toJson(t){if(Number(this.seconds)>315576e6||Number(this.seconds)<-315576e6)throw new Error("cannot encode google.protobuf.Duration to JSON: value out of range");let e=this.seconds.toString();if(this.nanos!==0){let i=Math.abs(this.nanos).toString();i="0".repeat(9-i.length)+i,i.substring(3)==="000000"?i=i.substring(0,3):i.substring(6)==="000"&&(i=i.substring(0,6)),e+="."+i,this.nanos<0&&Number(this.seconds)==0&&(e="-"+e)}return e+"s"}static fromBinary(t,e){return new ji().fromBinary(t,e)}static fromJson(t,e){return new ji().fromJson(t,e)}static fromJsonString(t,e){return new ji().fromJsonString(t,e)}static equals(t,e){return A.util.equals(ji,t,e)}}ji.runtime=A;ji.typeName="google.protobuf.Duration";ji.fields=A.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);class ur extends yt{constructor(t){super(),this.typeUrl="",this.value=new Uint8Array(0),A.util.initPartial(t,this)}toJson(t){var e;if(this.typeUrl==="")return{};const i=this.typeUrlToName(this.typeUrl),a=(e=t==null?void 0:t.typeRegistry)===null||e===void 0?void 0:e.findMessage(i);if(!a)throw new Error(`cannot encode message google.protobuf.Any to JSON: "${this.typeUrl}" is not in the type registry`);let c=a.fromBinary(this.value).toJson(t);return(i.startsWith("google.protobuf.")||c===null||Array.isArray(c)||typeof c!="object")&&(c={value:c}),c["@type"]=this.typeUrl,c}fromJson(t,e){var i;if(t===null||Array.isArray(t)||typeof t!="object")throw new Error(`cannot decode message google.protobuf.Any from JSON: expected object but got ${t===null?"null":Array.isArray(t)?"array":typeof t}`);if(Object.keys(t).length==0)return this;const a=t["@type"];if(typeof a!="string"||a=="")throw new Error('cannot decode message google.protobuf.Any from JSON: "@type" is empty');const u=this.typeUrlToName(a),c=(i=e==null?void 0:e.typeRegistry)===null||i===void 0?void 0:i.findMessage(u);if(!c)throw new Error(`cannot decode message google.protobuf.Any from JSON: ${a} is not in the type registry`);let d;if(u.startsWith("google.protobuf.")&&Object.prototype.hasOwnProperty.call(t,"value"))d=c.fromJson(t.value,e);else{const h=Object.assign({},t);delete h["@type"],d=c.fromJson(h,e)}return this.packFrom(d),this}packFrom(t){this.value=t.toBinary(),this.typeUrl=this.typeNameToUrl(t.getType().typeName)}unpackTo(t){return this.is(t.getType())?(t.fromBinary(this.value),!0):!1}unpack(t){if(this.typeUrl==="")return;const e=t.findMessage(this.typeUrlToName(this.typeUrl));if(e)return e.fromBinary(this.value)}is(t){if(this.typeUrl==="")return!1;const e=this.typeUrlToName(this.typeUrl);let i="";return typeof t=="string"?i=t:i=t.typeName,e===i}typeNameToUrl(t){return`type.googleapis.com/${t}`}typeUrlToName(t){if(!t.length)throw new Error(`invalid type url: ${t}`);const e=t.lastIndexOf("/"),i=e>=0?t.substring(e+1):t;if(!i.length)throw new Error(`invalid type url: ${t}`);return i}static pack(t){const e=new ur;return e.packFrom(t),e}static fromBinary(t,e){return new ur().fromBinary(t,e)}static fromJson(t,e){return new ur().fromJson(t,e)}static fromJsonString(t,e){return new ur().fromJsonString(t,e)}static equals(t,e){return A.util.equals(ur,t,e)}}ur.runtime=A;ur.typeName="google.protobuf.Any";ur.fields=A.util.newFieldList(()=>[{no:1,name:"type_url",kind:"scalar",T:9},{no:2,name:"value",kind:"scalar",T:12}]);class cr extends yt{constructor(t){super(),this.value=0,A.util.initPartial(t,this)}toJson(t){return A.json.writeScalar(rt.DOUBLE,this.value,!0)}fromJson(t,e){try{this.value=A.json.readScalar(rt.DOUBLE,t)}catch(i){let a='cannot decode message google.protobuf.DoubleValue from JSON"';throw i instanceof Error&&i.message.length>0&&(a+=`: ${i.message}`),new Error(a)}return this}static fromBinary(t,e){return new cr().fromBinary(t,e)}static fromJson(t,e){return new cr().fromJson(t,e)}static fromJsonString(t,e){return new cr().fromJsonString(t,e)}static equals(t,e){return A.util.equals(cr,t,e)}}cr.runtime=A;cr.typeName="google.protobuf.DoubleValue";cr.fields=A.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:1}]);cr.fieldWrapper={wrapField(n){return new cr({value:n})},unwrapField(n){return n.value}};class fr extends yt{constructor(t){super(),this.value=0,A.util.initPartial(t,this)}toJson(t){return A.json.writeScalar(rt.FLOAT,this.value,!0)}fromJson(t,e){try{this.value=A.json.readScalar(rt.FLOAT,t)}catch(i){let a='cannot decode message google.protobuf.FloatValue from JSON"';throw i instanceof Error&&i.message.length>0&&(a+=`: ${i.message}`),new Error(a)}return this}static fromBinary(t,e){return new fr().fromBinary(t,e)}static fromJson(t,e){return new fr().fromJson(t,e)}static fromJsonString(t,e){return new fr().fromJsonString(t,e)}static equals(t,e){return A.util.equals(fr,t,e)}}fr.runtime=A;fr.typeName="google.protobuf.FloatValue";fr.fields=A.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:2}]);fr.fieldWrapper={wrapField(n){return new fr({value:n})},unwrapField(n){return n.value}};class dr extends yt{constructor(t){super(),this.value=re.zero,A.util.initPartial(t,this)}toJson(t){return A.json.writeScalar(rt.INT64,this.value,!0)}fromJson(t,e){try{this.value=A.json.readScalar(rt.INT64,t)}catch(i){let a='cannot decode message google.protobuf.Int64Value from JSON"';throw i instanceof Error&&i.message.length>0&&(a+=`: ${i.message}`),new Error(a)}return this}static fromBinary(t,e){return new dr().fromBinary(t,e)}static fromJson(t,e){return new dr().fromJson(t,e)}static fromJsonString(t,e){return new dr().fromJsonString(t,e)}static equals(t,e){return A.util.equals(dr,t,e)}}dr.runtime=A;dr.typeName="google.protobuf.Int64Value";dr.fields=A.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:3}]);dr.fieldWrapper={wrapField(n){return new dr({value:n})},unwrapField(n){return n.value}};class hr extends yt{constructor(t){super(),this.value=re.zero,A.util.initPartial(t,this)}toJson(t){return A.json.writeScalar(rt.UINT64,this.value,!0)}fromJson(t,e){try{this.value=A.json.readScalar(rt.UINT64,t)}catch(i){let a='cannot decode message google.protobuf.UInt64Value from JSON"';throw i instanceof Error&&i.message.length>0&&(a+=`: ${i.message}`),new Error(a)}return this}static fromBinary(t,e){return new hr().fromBinary(t,e)}static fromJson(t,e){return new hr().fromJson(t,e)}static fromJsonString(t,e){return new hr().fromJsonString(t,e)}static equals(t,e){return A.util.equals(hr,t,e)}}hr.runtime=A;hr.typeName="google.protobuf.UInt64Value";hr.fields=A.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:4}]);hr.fieldWrapper={wrapField(n){return new hr({value:n})},unwrapField(n){return n.value}};class gr extends yt{constructor(t){super(),this.value=0,A.util.initPartial(t,this)}toJson(t){return A.json.writeScalar(rt.INT32,this.value,!0)}fromJson(t,e){try{this.value=A.json.readScalar(rt.INT32,t)}catch(i){let a='cannot decode message google.protobuf.Int32Value from JSON"';throw i instanceof Error&&i.message.length>0&&(a+=`: ${i.message}`),new Error(a)}return this}static fromBinary(t,e){return new gr().fromBinary(t,e)}static fromJson(t,e){return new gr().fromJson(t,e)}static fromJsonString(t,e){return new gr().fromJsonString(t,e)}static equals(t,e){return A.util.equals(gr,t,e)}}gr.runtime=A;gr.typeName="google.protobuf.Int32Value";gr.fields=A.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:5}]);gr.fieldWrapper={wrapField(n){return new gr({value:n})},unwrapField(n){return n.value}};class mr extends yt{constructor(t){super(),this.value=0,A.util.initPartial(t,this)}toJson(t){return A.json.writeScalar(rt.UINT32,this.value,!0)}fromJson(t,e){try{this.value=A.json.readScalar(rt.UINT32,t)}catch(i){let a='cannot decode message google.protobuf.UInt32Value from JSON"';throw i instanceof Error&&i.message.length>0&&(a+=`: ${i.message}`),new Error(a)}return this}static fromBinary(t,e){return new mr().fromBinary(t,e)}static fromJson(t,e){return new mr().fromJson(t,e)}static fromJsonString(t,e){return new mr().fromJsonString(t,e)}static equals(t,e){return A.util.equals(mr,t,e)}}mr.runtime=A;mr.typeName="google.protobuf.UInt32Value";mr.fields=A.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:13}]);mr.fieldWrapper={wrapField(n){return new mr({value:n})},unwrapField(n){return n.value}};class yr extends yt{constructor(t){super(),this.value=!1,A.util.initPartial(t,this)}toJson(t){return A.json.writeScalar(rt.BOOL,this.value,!0)}fromJson(t,e){try{this.value=A.json.readScalar(rt.BOOL,t)}catch(i){let a='cannot decode message google.protobuf.BoolValue from JSON"';throw i instanceof Error&&i.message.length>0&&(a+=`: ${i.message}`),new Error(a)}return this}static fromBinary(t,e){return new yr().fromBinary(t,e)}static fromJson(t,e){return new yr().fromJson(t,e)}static fromJsonString(t,e){return new yr().fromJsonString(t,e)}static equals(t,e){return A.util.equals(yr,t,e)}}yr.runtime=A;yr.typeName="google.protobuf.BoolValue";yr.fields=A.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:8}]);yr.fieldWrapper={wrapField(n){return new yr({value:n})},unwrapField(n){return n.value}};class fn extends yt{constructor(t){super(),this.value="",A.util.initPartial(t,this)}toJson(t){return A.json.writeScalar(rt.STRING,this.value,!0)}fromJson(t,e){try{this.value=A.json.readScalar(rt.STRING,t)}catch(i){let a='cannot decode message google.protobuf.StringValue from JSON"';throw i instanceof Error&&i.message.length>0&&(a+=`: ${i.message}`),new Error(a)}return this}static fromBinary(t,e){return new fn().fromBinary(t,e)}static fromJson(t,e){return new fn().fromJson(t,e)}static fromJsonString(t,e){return new fn().fromJsonString(t,e)}static equals(t,e){return A.util.equals(fn,t,e)}}fn.runtime=A;fn.typeName="google.protobuf.StringValue";fn.fields=A.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:9}]);fn.fieldWrapper={wrapField(n){return new fn({value:n})},unwrapField(n){return n.value}};class pr extends yt{constructor(t){super(),this.value=new Uint8Array(0),A.util.initPartial(t,this)}toJson(t){return A.json.writeScalar(rt.BYTES,this.value,!0)}fromJson(t,e){try{this.value=A.json.readScalar(rt.BYTES,t)}catch(i){let a='cannot decode message google.protobuf.BytesValue from JSON"';throw i instanceof Error&&i.message.length>0&&(a+=`: ${i.message}`),new Error(a)}return this}static fromBinary(t,e){return new pr().fromBinary(t,e)}static fromJson(t,e){return new pr().fromJson(t,e)}static fromJsonString(t,e){return new pr().fromJsonString(t,e)}static equals(t,e){return A.util.equals(pr,t,e)}}pr.runtime=A;pr.typeName="google.protobuf.BytesValue";pr.fields=A.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:12}]);pr.fieldWrapper={wrapField(n){return new pr({value:n})},unwrapField(n){return n.value}};function UN(n,t,e){try{const i=vy.dec(n);return t?t.fromBinary(i,e):i}catch(i){throw Gt.from(i,_t.DataLoss)}}function qN(n,t){const e={};for(const[i,a]of Object.entries(n.methods)){const u=t(Object.assign(Object.assign({},a),{localName:i,service:n}));u!=null&&(e[i]=u)}return e}const rb=1;function ib(n){let t,e=new Uint8Array(0);function i(a){const u=new Uint8Array(e.length+a.length);u.set(e),u.set(a,e.length),e=u}return new ReadableStream({start(){t=n.getReader()},async pull(a){let u;for(;;){if(u===void 0&&e.byteLength>=5){let h=0;for(let g=1;g<5;g++)h=(h<<8)+e[g];u={flags:e[0],length:h}}if(u!==void 0&&e.byteLength>=u.length+5)break;const d=await t.read();if(d.done)break;i(d.value)}if(u===void 0){if(e.byteLength==0){a.close();return}a.error(new Gt("premature end of stream",_t.DataLoss));return}const c=e.subarray(5,5+u.length);e=e.subarray(5+u.length),a.enqueue({flags:u.flags,data:c})}})}function sb(n,t){const e=new Uint8Array(t.length+5);e.set(t,5);const i=new DataView(e.buffer,e.byteOffset,e.byteLength);return i.setUint8(0,n),i.setUint32(1,t.length),e}var PN=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=n[Symbol.asyncIterator],e;return t?t.call(n):(n=typeof __values=="function"?__values(n):n[Symbol.iterator](),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e);function i(u){e[u]=n[u]&&function(c){return new Promise(function(d,h){c=n[u](c),a(d,h,c.done,c.value)})}}function a(u,c,d,h){Promise.resolve(h).then(function(g){u({value:g,done:d})},c)}},pu=function(n){return this instanceof pu?(this.v=n,this):new pu(n)},JN=function(n,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=e.apply(n,t||[]),a,u=[];return a={},d("next"),d("throw"),d("return",c),a[Symbol.asyncIterator]=function(){return this},a;function c(b){return function(x){return Promise.resolve(x).then(b,w)}}function d(b,x){i[b]&&(a[b]=function(C){return new Promise(function(I,O){u.push([b,C,I,O])>1||h(b,C)})},x&&(a[b]=x(a[b])))}function h(b,x){try{g(i[b](x))}catch(C){p(u[0][3],C)}}function g(b){b.value instanceof pu?Promise.resolve(b.value.v).then(y,w):p(u[0][2],b)}function y(b){h("next",b)}function w(b){h("throw",b)}function p(b,x){b(x),u.shift(),u.length&&h(u[0][0],u[0][1])}},HN=function(n){var t,e;return t={},i("next"),i("throw",function(a){throw a}),i("return"),t[Symbol.iterator]=function(){return this},t;function i(a,u){t[a]=n[a]?function(c){return(e=!e)?{value:pu(n[a](c)),done:!1}:u?u(c):c}:u}};function $N(n){return JN(this,arguments,function*(){yield pu(yield*HN(PN(n)))})}var eS=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=n[Symbol.asyncIterator],e;return t?t.call(n):(n=typeof __values=="function"?__values(n):n[Symbol.iterator](),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e);function i(u){e[u]=n[u]&&function(c){return new Promise(function(d,h){c=n[u](c),a(d,h,c.done,c.value)})}}function a(u,c,d,h){Promise.resolve(h).then(function(g){u({value:g,done:d})},c)}},zo=function(n){return this instanceof zo?(this.v=n,this):new zo(n)},VN=function(n){var t,e;return t={},i("next"),i("throw",function(a){throw a}),i("return"),t[Symbol.iterator]=function(){return this},t;function i(a,u){t[a]=n[a]?function(c){return(e=!e)?{value:zo(n[a](c)),done:!1}:u?u(c):c}:u}},jN=function(n,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=e.apply(n,t||[]),a,u=[];return a={},d("next"),d("throw"),d("return",c),a[Symbol.asyncIterator]=function(){return this},a;function c(b){return function(x){return Promise.resolve(x).then(b,w)}}function d(b,x){i[b]&&(a[b]=function(C){return new Promise(function(I,O){u.push([b,C,I,O])>1||h(b,C)})},x&&(a[b]=x(a[b])))}function h(b,x){try{g(i[b](x))}catch(C){p(u[0][3],C)}}function g(b){b.value instanceof zo?Promise.resolve(b.value.v).then(y,w):p(u[0][2],b)}function y(b){h("next",b)}function w(b){h("throw",b)}function p(b,x){b(x),u.shift(),u.length&&h(u[0][0],u[0][1])}};function YN(n,t){return qN(n,e=>{switch(e.kind){case $e.Unary:return GN(t,n,e);case $e.ServerStreaming:return XN(t,n,e);case $e.ClientStreaming:return KN(t,n,e);case $e.BiDiStreaming:return FN(t,n,e);default:return null}})}function GN(n,t,e){return async function(i,a){var u,c;const d=await n.unary(t,e,a==null?void 0:a.signal,a==null?void 0:a.timeoutMs,a==null?void 0:a.headers,i,a==null?void 0:a.contextValues);return(u=a==null?void 0:a.onHeader)===null||u===void 0||u.call(a,d.header),(c=a==null?void 0:a.onTrailer)===null||c===void 0||c.call(a,d.trailer),d.message}}function XN(n,t,e){return function(i,a){return nS(n.stream(t,e,a==null?void 0:a.signal,a==null?void 0:a.timeoutMs,a==null?void 0:a.headers,$N([i]),a==null?void 0:a.contextValues),a)}}function KN(n,t,e){return async function(i,a){var u,c,d,h,g,y;const w=await n.stream(t,e,a==null?void 0:a.signal,a==null?void 0:a.timeoutMs,a==null?void 0:a.headers,i,a==null?void 0:a.contextValues);(g=a==null?void 0:a.onHeader)===null||g===void 0||g.call(a,w.header);let p,b=0;try{for(var x=!0,C=eS(w.message),I;I=await C.next(),u=I.done,!u;x=!0)h=I.value,x=!1,p=h,b++}catch(O){c={error:O}}finally{try{!x&&!u&&(d=C.return)&&await d.call(C)}finally{if(c)throw c.error}}if(!p)throw new Gt("protocol error: missing response message",_t.Unimplemented);if(b>1)throw new Gt("protocol error: received extra messages for client streaming method",_t.Unimplemented);return(y=a==null?void 0:a.onTrailer)===null||y===void 0||y.call(a,w.trailer),p}}function FN(n,t,e){return function(i,a){return nS(n.stream(t,e,a==null?void 0:a.signal,a==null?void 0:a.timeoutMs,a==null?void 0:a.headers,i,a==null?void 0:a.contextValues),a)}}function nS(n,t){const e=function(){return jN(this,arguments,function*(){var i,a;const u=yield zo(n);(i=t==null?void 0:t.onHeader)===null||i===void 0||i.call(t,u.header),yield zo(yield*VN(eS(u.message))),(a=t==null?void 0:t.onTrailer)===null||a===void 0||a.call(t,u.trailer)})}()[Symbol.asyncIterator]();return{[Symbol.asyncIterator]:()=>({next:()=>e.next()})}}function ZN(...n){const t=new AbortController,e=n.filter(a=>a!==void 0).concat(t.signal);for(const a of e){if(a.aborted){i.apply(a);break}a.addEventListener("abort",i)}function i(){t.signal.aborted||t.abort(rS(this));for(const a of e)a.removeEventListener("abort",i)}return t}function QN(n){const t=new AbortController,e=()=>{t.abort(new Gt("the operation timed out",_t.DeadlineExceeded))};let i;return n!==void 0&&(n<=0?e():i=setTimeout(e,n)),{signal:t.signal,cleanup:()=>clearTimeout(i)}}function rS(n){if(!n.aborted)return;if(n.reason!==void 0)return n.reason;const t=new Error("This operation was aborted");return t.name="AbortError",t}function ab(){return{get(n){return n.id in this?this[n.id]:n.defaultValue},set(n,t){return this[n.id]=t,this},delete(n){return delete this[n.id],this}}}const um=128;function ob(n){const t=new Headers,e=new TextDecoder().decode(n).split(`\r
`);for(const i of e){if(i==="")continue;const a=i.indexOf(":");if(a>0){const u=i.substring(0,a).trim(),c=i.substring(a+1).trim();t.append(u,c)}}return t}const WN="Content-Type",t2="Grpc-Timeout",Lo="Grpc-Status",iS="Grpc-Message",e2="Grpc-Status-Details-Bin",n2="X-User-Agent",r2="X-Grpc-Web",i2="application/grpc-web+proto",s2="application/grpc-web+json";class Yi extends yt{constructor(t){super(),this.code=0,this.message="",this.details=[],A.util.initPartial(t,this)}static fromBinary(t,e){return new Yi().fromBinary(t,e)}static fromJson(t,e){return new Yi().fromJson(t,e)}static fromJsonString(t,e){return new Yi().fromJsonString(t,e)}static equals(t,e){return A.util.equals(Yi,t,e)}}Yi.runtime=A;Yi.typeName="google.rpc.Status";Yi.fields=A.util.newFieldList(()=>[{no:1,name:"code",kind:"scalar",T:5},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"details",kind:"message",T:ur,repeated:!0}]);const a2="0";function sS(n){var t;const e=n.get(e2);if(e!=null){const a=UN(e,Yi);if(a.code==0)return;const u=new Gt(a.message,a.code,n);return u.details=a.details.map(c=>({type:c.typeUrl.substring(c.typeUrl.lastIndexOf("/")+1),value:c.value})),u}const i=n.get(Lo);if(i!=null){if(i===a2)return;const a=parseInt(i,10);return a in _t?new Gt(decodeURIComponent((t=n.get(iS))!==null&&t!==void 0?t:""),a,n):new Gt(`invalid grpc-status: ${i}`,_t.Internal,n)}}function lb(n,t,e){const i=typeof t=="string"?t:t.typeName,a=typeof e=="string"?e:e.name;return n.toString().replace(/\/?$/,`/${i}/${a}`)}function aS(n,t){return t instanceof n?t:new n(t)}function o2(n,t){function e(i){return i.done===!0?i:{done:i.done,value:aS(n,i.value)}}return{[Symbol.asyncIterator](){const i=t[Symbol.asyncIterator](),a={next:()=>i.next().then(e)};return i.throw!==void 0&&(a.throw=u=>i.throw(u).then(e)),i.return!==void 0&&(a.return=u=>i.return(u).then(e)),a}}}function oS(n,t){var e;return(e=t==null?void 0:t.concat().reverse().reduce((i,a)=>a(i),n))!==null&&e!==void 0?e:n}function l2(n){var t;const e=Object.assign({},n);return(t=e.ignoreUnknownFields)!==null&&t!==void 0||(e.ignoreUnknownFields=!0),e}function ub(n,t,e,i){const a=t?cb(n.I,i):fb(n.I,e);return{parse:(t?cb(n.O,i):fb(n.O,e)).parse,serialize:a.serialize}}function cb(n,t){return{parse(e){try{return n.fromBinary(e,t)}catch(i){const a=i instanceof Error?i.message:String(i);throw new Gt(`parse binary: ${a}`,_t.Internal)}},serialize(e){try{return e.toBinary(t)}catch(i){const a=i instanceof Error?i.message:String(i);throw new Gt(`serialize binary: ${a}`,_t.Internal)}}}}function fb(n,t){var e,i;const a=(e=t==null?void 0:t.textEncoder)!==null&&e!==void 0?e:new TextEncoder,u=(i=t==null?void 0:t.textDecoder)!==null&&i!==void 0?i:new TextDecoder,c=l2(t);return{parse(d){try{const h=u.decode(d);return n.fromJsonString(h,c)}catch(h){throw Gt.from(h,_t.InvalidArgument)}},serialize(d){try{const h=d.toJsonString(c);return a.encode(h)}catch(h){throw Gt.from(h,_t.Internal)}}}}function u2(n){const t=oS(n.next,n.interceptors),[e,i,a]=lS(n),u=Object.assign(Object.assign({},n.req),{message:aS(n.req.method.I,n.req.message),signal:e});return t(u).then(c=>(a(),c),i)}function c2(n){const t=oS(n.next,n.interceptors),[e,i,a]=lS(n),u=Object.assign(Object.assign({},n.req),{message:o2(n.req.method.I,n.req.message),signal:e});let c=!1;return e.addEventListener("abort",function(){var d,h;const g=n.req.message[Symbol.asyncIterator]();c||(d=g.throw)===null||d===void 0||d.call(g,this.reason).catch(()=>{}),(h=g.return)===null||h===void 0||h.call(g).catch(()=>{})}),t(u).then(d=>Object.assign(Object.assign({},d),{message:{[Symbol.asyncIterator](){const h=d.message[Symbol.asyncIterator]();return{next(){return h.next().then(g=>(g.done==!0&&(c=!0,a()),g),i)}}}}}),i)}function lS(n){const{signal:t,cleanup:e}=QN(n.timeoutMs),i=ZN(n.signal,t);return[i.signal,function(u){const c=Gt.from(t.aborted?rS(t):u);return i.abort(c),e(),Promise.reject(c)},function(){e(),i.abort()}]}function f2(){try{new Headers}catch{throw new Error("connect-web requires the fetch API. Are you running on an old version of Node.js? Node.js is not supported in Connect for Web - please stay tuned for Connect for Node.")}}function db(n,t){const e=sS(n);if(e)throw t.forEach((i,a)=>{e.metadata.append(a,i)}),e;if(!t.has(Lo)&&!n.has(Lo))throw new Gt("protocol error: missing status",_t.Internal)}function hb(n,t,e,i){const a=new Headers(e??{});return a.set(WN,n?i2:s2),a.set(r2,"1"),a.set(n2,"connect-es/1.6.1"),t!==void 0&&a.set(t2,`${t}m`),a}function d2(n){switch(n){case 400:return _t.Internal;case 401:return _t.Unauthenticated;case 403:return _t.PermissionDenied;case 404:return _t.Unimplemented;case 429:return _t.Unavailable;case 502:return _t.Unavailable;case 503:return _t.Unavailable;case 504:return _t.Unavailable;default:return _t.Unknown}}function gb(n,t){var e;if(n>=200&&n<300)return{foundStatus:t.has(Lo),headerError:sS(t)};throw new Gt(decodeURIComponent((e=t.get(iS))!==null&&e!==void 0?e:`HTTP ${n}`),d2(n),t)}var ba=function(n){return this instanceof ba?(this.v=n,this):new ba(n)},h2=function(n,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=e.apply(n,t||[]),a,u=[];return a={},d("next"),d("throw"),d("return",c),a[Symbol.asyncIterator]=function(){return this},a;function c(b){return function(x){return Promise.resolve(x).then(b,w)}}function d(b,x){i[b]&&(a[b]=function(C){return new Promise(function(I,O){u.push([b,C,I,O])>1||h(b,C)})},x&&(a[b]=x(a[b])))}function h(b,x){try{g(i[b](x))}catch(C){p(u[0][3],C)}}function g(b){b.value instanceof ba?Promise.resolve(b.value.v).then(y,w):p(u[0][2],b)}function y(b){h("next",b)}function w(b){h("throw",b)}function p(b,x){b(x),u.shift(),u.length&&h(u[0][0],u[0][1])}};function g2(n){var t;f2();const e=(t=n.useBinaryFormat)!==null&&t!==void 0?t:!0;return{async unary(i,a,u,c,d,h,g){var y;const{serialize:w,parse:p}=ub(a,e,n.jsonOptions,n.binaryOptions);return c=c===void 0?n.defaultTimeoutMs:c<=0?void 0:c,await u2({interceptors:n.interceptors,signal:u,timeoutMs:c,req:{stream:!1,service:i,method:a,url:lb(n.baseUrl,i,a),init:{method:"POST",credentials:(y=n.credentials)!==null&&y!==void 0?y:"same-origin",redirect:"error",mode:"cors"},header:hb(e,c,d),contextValues:g??ab(),message:h},next:async b=>{var x;const I=await((x=n.fetch)!==null&&x!==void 0?x:globalThis.fetch)(b.url,Object.assign(Object.assign({},b.init),{headers:b.header,signal:b.signal,body:sb(0,w(b.message))})),{headerError:O}=gb(I.status,I.headers);if(!I.body)throw O!==void 0?O:"missing response body";const z=ib(I.body).getReader();let E,k;for(;;){const L=await z.read();if(L.done)break;const{flags:V,data:H}=L.value;if((V&rb)===rb)throw new Gt("protocol error: received unsupported compressed output",_t.Internal);if(V===um){if(E!==void 0)throw"extra trailer";E=ob(H);continue}if(k!==void 0)throw new Gt("extra message",_t.Unimplemented);k=p(H)}if(E===void 0)throw O!==void 0?O:new Gt("missing trailer",I.headers.has(Lo)?_t.Unimplemented:_t.Unknown);if(db(E,I.headers),k===void 0)throw new Gt("missing message",E.has(Lo)?_t.Unimplemented:_t.Unknown);return{stream:!1,service:i,method:a,header:I.headers,message:k,trailer:E}}})},async stream(i,a,u,c,d,h,g){var y;const{serialize:w,parse:p}=ub(a,e,n.jsonOptions,n.binaryOptions);function b(C,I,O,z,E){return h2(this,arguments,function*(){const L=ib(C).getReader();if(I){if(!(yield ba(L.read())).done)throw"extra data for trailers-only";return yield ba(void 0)}let V=!1;for(;;){const H=yield ba(L.read());if(H.done)break;const{flags:tt,data:nt}=H.value;if((tt&um)===um){if(V)throw"extra trailer";V=!0;const it=ob(nt);db(it,z),it.forEach((ft,ot)=>O.set(ot,ft));continue}if(V)throw"extra message";yield yield ba(p(nt))}if("throwIfAborted"in E&&E.throwIfAborted(),!V)throw"missing trailer"})}async function x(C){if(a.kind!=$e.ServerStreaming)throw"The fetch API does not support streaming request bodies";const I=await C[Symbol.asyncIterator]().next();if(I.done==!0)throw"missing request message";return sb(0,w(I.value))}return c=c===void 0?n.defaultTimeoutMs:c<=0?void 0:c,c2({interceptors:n.interceptors,signal:u,timeoutMs:c,req:{stream:!0,service:i,method:a,url:lb(n.baseUrl,i,a),init:{method:"POST",credentials:(y=n.credentials)!==null&&y!==void 0?y:"same-origin",redirect:"error",mode:"cors"},header:hb(e,c,d),contextValues:g??ab(),message:h},next:async C=>{var I;const z=await((I=n.fetch)!==null&&I!==void 0?I:globalThis.fetch)(C.url,Object.assign(Object.assign({},C.init),{headers:C.header,signal:C.signal,body:await x(C.message)})),{foundStatus:E,headerError:k}=gb(z.status,z.headers);if(k!=null)throw k;if(!z.body)throw"missing response body";const L=new Headers;return Object.assign(Object.assign({},C),{header:z.headers,trailer:L,message:b(z.body,E,L,z.headers,C.signal)})}})}}}var It=(n=>(n[n.NULL=0]="NULL",n[n.BOOLEAN=1]="BOOLEAN",n[n.INTEGER=2]="INTEGER",n[n.LONG=3]="LONG",n[n.DOUBLE=4]="DOUBLE",n[n.STRING=5]="STRING",n[n.BYTES=6]="BYTES",n[n.DATE=7]="DATE",n[n.JSON_OBJECT=8]="JSON_OBJECT",n[n.JSON_ARRAY=9]="JSON_ARRAY",n[n.TEXT=10]="TEXT",n[n.INTEGER_CNT=11]="INTEGER_CNT",n[n.LONG_CNT=12]="LONG_CNT",n[n.TREE=13]="TREE",n))(It||{});A.util.setEnumType(It,"yorkie.v1.ValueType",[{no:0,name:"VALUE_TYPE_NULL"},{no:1,name:"VALUE_TYPE_BOOLEAN"},{no:2,name:"VALUE_TYPE_INTEGER"},{no:3,name:"VALUE_TYPE_LONG"},{no:4,name:"VALUE_TYPE_DOUBLE"},{no:5,name:"VALUE_TYPE_STRING"},{no:6,name:"VALUE_TYPE_BYTES"},{no:7,name:"VALUE_TYPE_DATE"},{no:8,name:"VALUE_TYPE_JSON_OBJECT"},{no:9,name:"VALUE_TYPE_JSON_ARRAY"},{no:10,name:"VALUE_TYPE_TEXT"},{no:11,name:"VALUE_TYPE_INTEGER_CNT"},{no:12,name:"VALUE_TYPE_LONG_CNT"},{no:13,name:"VALUE_TYPE_TREE"}]);var Aa=(n=>(n[n.DOCUMENT_CHANGED=0]="DOCUMENT_CHANGED",n[n.DOCUMENT_WATCHED=1]="DOCUMENT_WATCHED",n[n.DOCUMENT_UNWATCHED=2]="DOCUMENT_UNWATCHED",n[n.DOCUMENT_BROADCAST=3]="DOCUMENT_BROADCAST",n))(Aa||{});A.util.setEnumType(Aa,"yorkie.v1.DocEventType",[{no:0,name:"DOC_EVENT_TYPE_DOCUMENT_CHANGED"},{no:1,name:"DOC_EVENT_TYPE_DOCUMENT_WATCHED"},{no:2,name:"DOC_EVENT_TYPE_DOCUMENT_UNWATCHED"},{no:3,name:"DOC_EVENT_TYPE_DOCUMENT_BROADCAST"}]);const jr=class jr extends yt{constructor(e){super();v(this,"root");v(this,"presences",{});A.util.initPartial(e,this)}static fromBinary(e,i){return new jr().fromBinary(e,i)}static fromJson(e,i){return new jr().fromJson(e,i)}static fromJsonString(e,i){return new jr().fromJsonString(e,i)}static equals(e,i){return A.util.equals(jr,e,i)}};v(jr,"runtime",A),v(jr,"typeName","yorkie.v1.Snapshot"),v(jr,"fields",A.util.newFieldList(()=>[{no:1,name:"root",kind:"message",T:tn},{no:2,name:"presences",kind:"map",K:9,V:{kind:"message",T:by}}]));let km=jr;var An;let es=(An=class extends yt{constructor(e){super();v(this,"documentKey","");v(this,"checkpoint");v(this,"snapshot",new Uint8Array(0));v(this,"changes",[]);v(this,"minSyncedTicket");v(this,"isRemoved",!1);v(this,"versionVector");A.util.initPartial(e,this)}static fromBinary(e,i){return new An().fromBinary(e,i)}static fromJson(e,i){return new An().fromJson(e,i)}static fromJsonString(e,i){return new An().fromJsonString(e,i)}static equals(e,i){return A.util.equals(An,e,i)}},v(An,"runtime",A),v(An,"typeName","yorkie.v1.ChangePack"),v(An,"fields",A.util.newFieldList(()=>[{no:1,name:"document_key",kind:"scalar",T:9},{no:2,name:"checkpoint",kind:"message",T:fS},{no:3,name:"snapshot",kind:"scalar",T:12},{no:4,name:"changes",kind:"message",T:uS,repeated:!0},{no:5,name:"min_synced_ticket",kind:"message",T:wt},{no:6,name:"is_removed",kind:"scalar",T:8},{no:7,name:"version_vector",kind:"message",T:Ad}])),An);var En;let uS=(En=class extends yt{constructor(e){super();v(this,"id");v(this,"message","");v(this,"operations",[]);v(this,"presenceChange");A.util.initPartial(e,this)}static fromBinary(e,i){return new En().fromBinary(e,i)}static fromJson(e,i){return new En().fromJson(e,i)}static fromJsonString(e,i){return new En().fromJsonString(e,i)}static equals(e,i){return A.util.equals(En,e,i)}},v(En,"runtime",A),v(En,"typeName","yorkie.v1.Change"),v(En,"fields",A.util.newFieldList(()=>[{no:1,name:"id",kind:"message",T:Td},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"operations",kind:"message",T:wy,repeated:!0},{no:4,name:"presence_change",kind:"message",T:bu}])),En);var Nn;let Td=(Nn=class extends yt{constructor(e){super();v(this,"clientSeq",0);v(this,"serverSeq",re.zero);v(this,"lamport",re.zero);v(this,"actorId",new Uint8Array(0));v(this,"versionVector");A.util.initPartial(e,this)}static fromBinary(e,i){return new Nn().fromBinary(e,i)}static fromJson(e,i){return new Nn().fromJson(e,i)}static fromJsonString(e,i){return new Nn().fromJsonString(e,i)}static equals(e,i){return A.util.equals(Nn,e,i)}},v(Nn,"runtime",A),v(Nn,"typeName","yorkie.v1.ChangeID"),v(Nn,"fields",A.util.newFieldList(()=>[{no:1,name:"client_seq",kind:"scalar",T:13},{no:2,name:"server_seq",kind:"scalar",T:3},{no:3,name:"lamport",kind:"scalar",T:3},{no:4,name:"actor_id",kind:"scalar",T:12},{no:5,name:"version_vector",kind:"message",T:Ad}])),Nn);var Cn;let Ad=(Cn=class extends yt{constructor(e){super();v(this,"vector",{});A.util.initPartial(e,this)}static fromBinary(e,i){return new Cn().fromBinary(e,i)}static fromJson(e,i){return new Cn().fromJson(e,i)}static fromJsonString(e,i){return new Cn().fromJsonString(e,i)}static equals(e,i){return A.util.equals(Cn,e,i)}},v(Cn,"runtime",A),v(Cn,"typeName","yorkie.v1.VersionVector"),v(Cn,"fields",A.util.newFieldList(()=>[{no:1,name:"vector",kind:"map",K:9,V:{kind:"scalar",T:3}}])),Cn);var Dn;let wy=(Dn=class extends yt{constructor(e){super();v(this,"body",{case:void 0});A.util.initPartial(e,this)}static fromBinary(e,i){return new Dn().fromBinary(e,i)}static fromJson(e,i){return new Dn().fromJson(e,i)}static fromJsonString(e,i){return new Dn().fromJsonString(e,i)}static equals(e,i){return A.util.equals(Dn,e,i)}},v(Dn,"runtime",A),v(Dn,"typeName","yorkie.v1.Operation"),v(Dn,"fields",A.util.newFieldList(()=>[{no:1,name:"set",kind:"message",T:Jf,oneof:"body"},{no:2,name:"add",kind:"message",T:Hf,oneof:"body"},{no:3,name:"move",kind:"message",T:$f,oneof:"body"},{no:4,name:"remove",kind:"message",T:Vf,oneof:"body"},{no:5,name:"edit",kind:"message",T:jf,oneof:"body"},{no:6,name:"select",kind:"message",T:Om,oneof:"body"},{no:7,name:"style",kind:"message",T:Yf,oneof:"body"},{no:8,name:"increase",kind:"message",T:Gf,oneof:"body"},{no:9,name:"tree_edit",kind:"message",T:Xf,oneof:"body"},{no:10,name:"tree_style",kind:"message",T:Kf,oneof:"body"},{no:11,name:"array_set",kind:"message",T:Im,oneof:"body"}])),Dn);const Yr=class Yr extends yt{constructor(e){super();v(this,"parentCreatedAt");v(this,"key","");v(this,"value");v(this,"executedAt");A.util.initPartial(e,this)}static fromBinary(e,i){return new Yr().fromBinary(e,i)}static fromJson(e,i){return new Yr().fromJson(e,i)}static fromJsonString(e,i){return new Yr().fromJsonString(e,i)}static equals(e,i){return A.util.equals(Yr,e,i)}};v(Yr,"runtime",A),v(Yr,"typeName","yorkie.v1.Operation.Set"),v(Yr,"fields",A.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:wt},{no:2,name:"key",kind:"scalar",T:9},{no:3,name:"value",kind:"message",T:Tn},{no:4,name:"executed_at",kind:"message",T:wt}]));let Jf=Yr;const Gr=class Gr extends yt{constructor(e){super();v(this,"parentCreatedAt");v(this,"prevCreatedAt");v(this,"value");v(this,"executedAt");A.util.initPartial(e,this)}static fromBinary(e,i){return new Gr().fromBinary(e,i)}static fromJson(e,i){return new Gr().fromJson(e,i)}static fromJsonString(e,i){return new Gr().fromJsonString(e,i)}static equals(e,i){return A.util.equals(Gr,e,i)}};v(Gr,"runtime",A),v(Gr,"typeName","yorkie.v1.Operation.Add"),v(Gr,"fields",A.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:wt},{no:2,name:"prev_created_at",kind:"message",T:wt},{no:3,name:"value",kind:"message",T:Tn},{no:4,name:"executed_at",kind:"message",T:wt}]));let Hf=Gr;const Xr=class Xr extends yt{constructor(e){super();v(this,"parentCreatedAt");v(this,"prevCreatedAt");v(this,"createdAt");v(this,"executedAt");A.util.initPartial(e,this)}static fromBinary(e,i){return new Xr().fromBinary(e,i)}static fromJson(e,i){return new Xr().fromJson(e,i)}static fromJsonString(e,i){return new Xr().fromJsonString(e,i)}static equals(e,i){return A.util.equals(Xr,e,i)}};v(Xr,"runtime",A),v(Xr,"typeName","yorkie.v1.Operation.Move"),v(Xr,"fields",A.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:wt},{no:2,name:"prev_created_at",kind:"message",T:wt},{no:3,name:"created_at",kind:"message",T:wt},{no:4,name:"executed_at",kind:"message",T:wt}]));let $f=Xr;const Kr=class Kr extends yt{constructor(e){super();v(this,"parentCreatedAt");v(this,"createdAt");v(this,"executedAt");A.util.initPartial(e,this)}static fromBinary(e,i){return new Kr().fromBinary(e,i)}static fromJson(e,i){return new Kr().fromJson(e,i)}static fromJsonString(e,i){return new Kr().fromJsonString(e,i)}static equals(e,i){return A.util.equals(Kr,e,i)}};v(Kr,"runtime",A),v(Kr,"typeName","yorkie.v1.Operation.Remove"),v(Kr,"fields",A.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:wt},{no:2,name:"created_at",kind:"message",T:wt},{no:3,name:"executed_at",kind:"message",T:wt}]));let Vf=Kr;const Fr=class Fr extends yt{constructor(e){super();v(this,"parentCreatedAt");v(this,"from");v(this,"to");v(this,"createdAtMapByActor",{});v(this,"content","");v(this,"executedAt");v(this,"attributes",{});A.util.initPartial(e,this)}static fromBinary(e,i){return new Fr().fromBinary(e,i)}static fromJson(e,i){return new Fr().fromJson(e,i)}static fromJsonString(e,i){return new Fr().fromJsonString(e,i)}static equals(e,i){return A.util.equals(Fr,e,i)}};v(Fr,"runtime",A),v(Fr,"typeName","yorkie.v1.Operation.Edit"),v(Fr,"fields",A.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:wt},{no:2,name:"from",kind:"message",T:Qi},{no:3,name:"to",kind:"message",T:Qi},{no:4,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:wt}},{no:5,name:"content",kind:"scalar",T:9},{no:6,name:"executed_at",kind:"message",T:wt},{no:7,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}}]));let jf=Fr;const Zr=class Zr extends yt{constructor(e){super();v(this,"parentCreatedAt");v(this,"from");v(this,"to");v(this,"executedAt");A.util.initPartial(e,this)}static fromBinary(e,i){return new Zr().fromBinary(e,i)}static fromJson(e,i){return new Zr().fromJson(e,i)}static fromJsonString(e,i){return new Zr().fromJsonString(e,i)}static equals(e,i){return A.util.equals(Zr,e,i)}};v(Zr,"runtime",A),v(Zr,"typeName","yorkie.v1.Operation.Select"),v(Zr,"fields",A.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:wt},{no:2,name:"from",kind:"message",T:Qi},{no:3,name:"to",kind:"message",T:Qi},{no:4,name:"executed_at",kind:"message",T:wt}]));let Om=Zr;const Qr=class Qr extends yt{constructor(e){super();v(this,"parentCreatedAt");v(this,"from");v(this,"to");v(this,"attributes",{});v(this,"executedAt");v(this,"createdAtMapByActor",{});A.util.initPartial(e,this)}static fromBinary(e,i){return new Qr().fromBinary(e,i)}static fromJson(e,i){return new Qr().fromJson(e,i)}static fromJsonString(e,i){return new Qr().fromJsonString(e,i)}static equals(e,i){return A.util.equals(Qr,e,i)}};v(Qr,"runtime",A),v(Qr,"typeName","yorkie.v1.Operation.Style"),v(Qr,"fields",A.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:wt},{no:2,name:"from",kind:"message",T:Qi},{no:3,name:"to",kind:"message",T:Qi},{no:4,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:5,name:"executed_at",kind:"message",T:wt},{no:6,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:wt}}]));let Yf=Qr;const Wr=class Wr extends yt{constructor(e){super();v(this,"parentCreatedAt");v(this,"value");v(this,"executedAt");A.util.initPartial(e,this)}static fromBinary(e,i){return new Wr().fromBinary(e,i)}static fromJson(e,i){return new Wr().fromJson(e,i)}static fromJsonString(e,i){return new Wr().fromJsonString(e,i)}static equals(e,i){return A.util.equals(Wr,e,i)}};v(Wr,"runtime",A),v(Wr,"typeName","yorkie.v1.Operation.Increase"),v(Wr,"fields",A.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:wt},{no:2,name:"value",kind:"message",T:Tn},{no:3,name:"executed_at",kind:"message",T:wt}]));let Gf=Wr;const ti=class ti extends yt{constructor(e){super();v(this,"parentCreatedAt");v(this,"from");v(this,"to");v(this,"createdAtMapByActor",{});v(this,"contents",[]);v(this,"splitLevel",0);v(this,"executedAt");A.util.initPartial(e,this)}static fromBinary(e,i){return new ti().fromBinary(e,i)}static fromJson(e,i){return new ti().fromJson(e,i)}static fromJsonString(e,i){return new ti().fromJsonString(e,i)}static equals(e,i){return A.util.equals(ti,e,i)}};v(ti,"runtime",A),v(ti,"typeName","yorkie.v1.Operation.TreeEdit"),v(ti,"fields",A.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:wt},{no:2,name:"from",kind:"message",T:Ca},{no:3,name:"to",kind:"message",T:Ca},{no:4,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:wt}},{no:5,name:"contents",kind:"message",T:id,repeated:!0},{no:7,name:"split_level",kind:"scalar",T:5},{no:6,name:"executed_at",kind:"message",T:wt}]));let Xf=ti;const ei=class ei extends yt{constructor(e){super();v(this,"parentCreatedAt");v(this,"from");v(this,"to");v(this,"attributes",{});v(this,"executedAt");v(this,"attributesToRemove",[]);v(this,"createdAtMapByActor",{});A.util.initPartial(e,this)}static fromBinary(e,i){return new ei().fromBinary(e,i)}static fromJson(e,i){return new ei().fromJson(e,i)}static fromJsonString(e,i){return new ei().fromJsonString(e,i)}static equals(e,i){return A.util.equals(ei,e,i)}};v(ei,"runtime",A),v(ei,"typeName","yorkie.v1.Operation.TreeStyle"),v(ei,"fields",A.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:wt},{no:2,name:"from",kind:"message",T:Ca},{no:3,name:"to",kind:"message",T:Ca},{no:4,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:5,name:"executed_at",kind:"message",T:wt},{no:6,name:"attributes_to_remove",kind:"scalar",T:9,repeated:!0},{no:7,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:wt}}]));let Kf=ei;const ni=class ni extends yt{constructor(e){super();v(this,"parentCreatedAt");v(this,"createdAt");v(this,"value");v(this,"executedAt");A.util.initPartial(e,this)}static fromBinary(e,i){return new ni().fromBinary(e,i)}static fromJson(e,i){return new ni().fromJson(e,i)}static fromJsonString(e,i){return new ni().fromJsonString(e,i)}static equals(e,i){return A.util.equals(ni,e,i)}};v(ni,"runtime",A),v(ni,"typeName","yorkie.v1.Operation.ArraySet"),v(ni,"fields",A.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:wt},{no:2,name:"created_at",kind:"message",T:wt},{no:3,name:"value",kind:"message",T:Tn},{no:4,name:"executed_at",kind:"message",T:wt}]));let Im=ni;const ri=class ri extends yt{constructor(e){super();v(this,"createdAt");v(this,"movedAt");v(this,"removedAt");v(this,"type",0);v(this,"value",new Uint8Array(0));A.util.initPartial(e,this)}static fromBinary(e,i){return new ri().fromBinary(e,i)}static fromJson(e,i){return new ri().fromJson(e,i)}static fromJsonString(e,i){return new ri().fromJsonString(e,i)}static equals(e,i){return A.util.equals(ri,e,i)}};v(ri,"runtime",A),v(ri,"typeName","yorkie.v1.JSONElementSimple"),v(ri,"fields",A.util.newFieldList(()=>[{no:1,name:"created_at",kind:"message",T:wt},{no:2,name:"moved_at",kind:"message",T:wt},{no:3,name:"removed_at",kind:"message",T:wt},{no:4,name:"type",kind:"enum",T:A.getEnumType(It)},{no:5,name:"value",kind:"scalar",T:12}]));let Tn=ri;const ii=class ii extends yt{constructor(e){super();v(this,"body",{case:void 0});A.util.initPartial(e,this)}static fromBinary(e,i){return new ii().fromBinary(e,i)}static fromJson(e,i){return new ii().fromJson(e,i)}static fromJsonString(e,i){return new ii().fromJsonString(e,i)}static equals(e,i){return A.util.equals(ii,e,i)}};v(ii,"runtime",A),v(ii,"typeName","yorkie.v1.JSONElement"),v(ii,"fields",A.util.newFieldList(()=>[{no:1,name:"json_object",kind:"message",T:Ff,oneof:"body"},{no:2,name:"json_array",kind:"message",T:Zf,oneof:"body"},{no:3,name:"primitive",kind:"message",T:Qf,oneof:"body"},{no:5,name:"text",kind:"message",T:Wf,oneof:"body"},{no:6,name:"counter",kind:"message",T:td,oneof:"body"},{no:7,name:"tree",kind:"message",T:ed,oneof:"body"}]));let tn=ii;const si=class si extends yt{constructor(e){super();v(this,"nodes",[]);v(this,"createdAt");v(this,"movedAt");v(this,"removedAt");A.util.initPartial(e,this)}static fromBinary(e,i){return new si().fromBinary(e,i)}static fromJson(e,i){return new si().fromJson(e,i)}static fromJsonString(e,i){return new si().fromJsonString(e,i)}static equals(e,i){return A.util.equals(si,e,i)}};v(si,"runtime",A),v(si,"typeName","yorkie.v1.JSONElement.JSONObject"),v(si,"fields",A.util.newFieldList(()=>[{no:1,name:"nodes",kind:"message",T:cS,repeated:!0},{no:2,name:"created_at",kind:"message",T:wt},{no:3,name:"moved_at",kind:"message",T:wt},{no:4,name:"removed_at",kind:"message",T:wt}]));let Ff=si;const ai=class ai extends yt{constructor(e){super();v(this,"nodes",[]);v(this,"createdAt");v(this,"movedAt");v(this,"removedAt");A.util.initPartial(e,this)}static fromBinary(e,i){return new ai().fromBinary(e,i)}static fromJson(e,i){return new ai().fromJson(e,i)}static fromJsonString(e,i){return new ai().fromJsonString(e,i)}static equals(e,i){return A.util.equals(ai,e,i)}};v(ai,"runtime",A),v(ai,"typeName","yorkie.v1.JSONElement.JSONArray"),v(ai,"fields",A.util.newFieldList(()=>[{no:1,name:"nodes",kind:"message",T:nd,repeated:!0},{no:2,name:"created_at",kind:"message",T:wt},{no:3,name:"moved_at",kind:"message",T:wt},{no:4,name:"removed_at",kind:"message",T:wt}]));let Zf=ai;const oi=class oi extends yt{constructor(e){super();v(this,"type",0);v(this,"value",new Uint8Array(0));v(this,"createdAt");v(this,"movedAt");v(this,"removedAt");A.util.initPartial(e,this)}static fromBinary(e,i){return new oi().fromBinary(e,i)}static fromJson(e,i){return new oi().fromJson(e,i)}static fromJsonString(e,i){return new oi().fromJsonString(e,i)}static equals(e,i){return A.util.equals(oi,e,i)}};v(oi,"runtime",A),v(oi,"typeName","yorkie.v1.JSONElement.Primitive"),v(oi,"fields",A.util.newFieldList(()=>[{no:1,name:"type",kind:"enum",T:A.getEnumType(It)},{no:2,name:"value",kind:"scalar",T:12},{no:3,name:"created_at",kind:"message",T:wt},{no:4,name:"moved_at",kind:"message",T:wt},{no:5,name:"removed_at",kind:"message",T:wt}]));let Qf=oi;const li=class li extends yt{constructor(e){super();v(this,"nodes",[]);v(this,"createdAt");v(this,"movedAt");v(this,"removedAt");A.util.initPartial(e,this)}static fromBinary(e,i){return new li().fromBinary(e,i)}static fromJson(e,i){return new li().fromJson(e,i)}static fromJsonString(e,i){return new li().fromJsonString(e,i)}static equals(e,i){return A.util.equals(li,e,i)}};v(li,"runtime",A),v(li,"typeName","yorkie.v1.JSONElement.Text"),v(li,"fields",A.util.newFieldList(()=>[{no:1,name:"nodes",kind:"message",T:rd,repeated:!0},{no:2,name:"created_at",kind:"message",T:wt},{no:3,name:"moved_at",kind:"message",T:wt},{no:4,name:"removed_at",kind:"message",T:wt}]));let Wf=li;const ui=class ui extends yt{constructor(e){super();v(this,"type",0);v(this,"value",new Uint8Array(0));v(this,"createdAt");v(this,"movedAt");v(this,"removedAt");A.util.initPartial(e,this)}static fromBinary(e,i){return new ui().fromBinary(e,i)}static fromJson(e,i){return new ui().fromJson(e,i)}static fromJsonString(e,i){return new ui().fromJsonString(e,i)}static equals(e,i){return A.util.equals(ui,e,i)}};v(ui,"runtime",A),v(ui,"typeName","yorkie.v1.JSONElement.Counter"),v(ui,"fields",A.util.newFieldList(()=>[{no:1,name:"type",kind:"enum",T:A.getEnumType(It)},{no:2,name:"value",kind:"scalar",T:12},{no:3,name:"created_at",kind:"message",T:wt},{no:4,name:"moved_at",kind:"message",T:wt},{no:5,name:"removed_at",kind:"message",T:wt}]));let td=ui;const ci=class ci extends yt{constructor(e){super();v(this,"nodes",[]);v(this,"createdAt");v(this,"movedAt");v(this,"removedAt");A.util.initPartial(e,this)}static fromBinary(e,i){return new ci().fromBinary(e,i)}static fromJson(e,i){return new ci().fromJson(e,i)}static fromJsonString(e,i){return new ci().fromJsonString(e,i)}static equals(e,i){return A.util.equals(ci,e,i)}};v(ci,"runtime",A),v(ci,"typeName","yorkie.v1.JSONElement.Tree"),v(ci,"fields",A.util.newFieldList(()=>[{no:1,name:"nodes",kind:"message",T:wu,repeated:!0},{no:2,name:"created_at",kind:"message",T:wt},{no:3,name:"moved_at",kind:"message",T:wt},{no:4,name:"removed_at",kind:"message",T:wt}]));let ed=ci;var kn;let cS=(kn=class extends yt{constructor(e){super();v(this,"key","");v(this,"element");A.util.initPartial(e,this)}static fromBinary(e,i){return new kn().fromBinary(e,i)}static fromJson(e,i){return new kn().fromJson(e,i)}static fromJsonString(e,i){return new kn().fromJsonString(e,i)}static equals(e,i){return A.util.equals(kn,e,i)}},v(kn,"runtime",A),v(kn,"typeName","yorkie.v1.RHTNode"),v(kn,"fields",A.util.newFieldList(()=>[{no:1,name:"key",kind:"scalar",T:9},{no:2,name:"element",kind:"message",T:tn}])),kn);const or=class or extends yt{constructor(e){super();v(this,"next");v(this,"element");A.util.initPartial(e,this)}static fromBinary(e,i){return new or().fromBinary(e,i)}static fromJson(e,i){return new or().fromJson(e,i)}static fromJsonString(e,i){return new or().fromJsonString(e,i)}static equals(e,i){return A.util.equals(or,e,i)}};v(or,"runtime",A),v(or,"typeName","yorkie.v1.RGANode"),v(or,"fields",A.util.newFieldList(()=>[{no:1,name:"next",kind:"message",T:or},{no:2,name:"element",kind:"message",T:tn}]));let nd=or;const fi=class fi extends yt{constructor(e){super();v(this,"value","");v(this,"updatedAt");v(this,"isRemoved",!1);A.util.initPartial(e,this)}static fromBinary(e,i){return new fi().fromBinary(e,i)}static fromJson(e,i){return new fi().fromJson(e,i)}static fromJsonString(e,i){return new fi().fromJsonString(e,i)}static equals(e,i){return A.util.equals(fi,e,i)}};v(fi,"runtime",A),v(fi,"typeName","yorkie.v1.NodeAttr"),v(fi,"fields",A.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:9},{no:2,name:"updated_at",kind:"message",T:wt},{no:3,name:"is_removed",kind:"scalar",T:8}]));let _o=fi;const di=class di extends yt{constructor(e){super();v(this,"id");v(this,"value","");v(this,"removedAt");v(this,"insPrevId");v(this,"attributes",{});A.util.initPartial(e,this)}static fromBinary(e,i){return new di().fromBinary(e,i)}static fromJson(e,i){return new di().fromJson(e,i)}static fromJsonString(e,i){return new di().fromJsonString(e,i)}static equals(e,i){return A.util.equals(di,e,i)}};v(di,"runtime",A),v(di,"typeName","yorkie.v1.TextNode"),v(di,"fields",A.util.newFieldList(()=>[{no:1,name:"id",kind:"message",T:vu},{no:2,name:"value",kind:"scalar",T:9},{no:3,name:"removed_at",kind:"message",T:wt},{no:4,name:"ins_prev_id",kind:"message",T:vu},{no:5,name:"attributes",kind:"map",K:9,V:{kind:"message",T:_o}}]));let rd=di;const hi=class hi extends yt{constructor(e){super();v(this,"createdAt");v(this,"offset",0);A.util.initPartial(e,this)}static fromBinary(e,i){return new hi().fromBinary(e,i)}static fromJson(e,i){return new hi().fromJson(e,i)}static fromJsonString(e,i){return new hi().fromJsonString(e,i)}static equals(e,i){return A.util.equals(hi,e,i)}};v(hi,"runtime",A),v(hi,"typeName","yorkie.v1.TextNodeID"),v(hi,"fields",A.util.newFieldList(()=>[{no:1,name:"created_at",kind:"message",T:wt},{no:2,name:"offset",kind:"scalar",T:5}]));let vu=hi;const gi=class gi extends yt{constructor(e){super();v(this,"id");v(this,"type","");v(this,"value","");v(this,"removedAt");v(this,"insPrevId");v(this,"insNextId");v(this,"depth",0);v(this,"attributes",{});A.util.initPartial(e,this)}static fromBinary(e,i){return new gi().fromBinary(e,i)}static fromJson(e,i){return new gi().fromJson(e,i)}static fromJsonString(e,i){return new gi().fromJsonString(e,i)}static equals(e,i){return A.util.equals(gi,e,i)}};v(gi,"runtime",A),v(gi,"typeName","yorkie.v1.TreeNode"),v(gi,"fields",A.util.newFieldList(()=>[{no:1,name:"id",kind:"message",T:Hs},{no:2,name:"type",kind:"scalar",T:9},{no:3,name:"value",kind:"scalar",T:9},{no:4,name:"removed_at",kind:"message",T:wt},{no:5,name:"ins_prev_id",kind:"message",T:Hs},{no:6,name:"ins_next_id",kind:"message",T:Hs},{no:7,name:"depth",kind:"scalar",T:5},{no:8,name:"attributes",kind:"map",K:9,V:{kind:"message",T:_o}}]));let wu=gi;const mi=class mi extends yt{constructor(e){super();v(this,"content",[]);A.util.initPartial(e,this)}static fromBinary(e,i){return new mi().fromBinary(e,i)}static fromJson(e,i){return new mi().fromJson(e,i)}static fromJsonString(e,i){return new mi().fromJsonString(e,i)}static equals(e,i){return A.util.equals(mi,e,i)}};v(mi,"runtime",A),v(mi,"typeName","yorkie.v1.TreeNodes"),v(mi,"fields",A.util.newFieldList(()=>[{no:1,name:"content",kind:"message",T:wu,repeated:!0}]));let id=mi;const yi=class yi extends yt{constructor(e){super();v(this,"createdAt");v(this,"offset",0);A.util.initPartial(e,this)}static fromBinary(e,i){return new yi().fromBinary(e,i)}static fromJson(e,i){return new yi().fromJson(e,i)}static fromJsonString(e,i){return new yi().fromJsonString(e,i)}static equals(e,i){return A.util.equals(yi,e,i)}};v(yi,"runtime",A),v(yi,"typeName","yorkie.v1.TreeNodeID"),v(yi,"fields",A.util.newFieldList(()=>[{no:1,name:"created_at",kind:"message",T:wt},{no:2,name:"offset",kind:"scalar",T:5}]));let Hs=yi;const pi=class pi extends yt{constructor(e){super();v(this,"parentId");v(this,"leftSiblingId");A.util.initPartial(e,this)}static fromBinary(e,i){return new pi().fromBinary(e,i)}static fromJson(e,i){return new pi().fromJson(e,i)}static fromJsonString(e,i){return new pi().fromJsonString(e,i)}static equals(e,i){return A.util.equals(pi,e,i)}};v(pi,"runtime",A),v(pi,"typeName","yorkie.v1.TreePos"),v(pi,"fields",A.util.newFieldList(()=>[{no:1,name:"parent_id",kind:"message",T:Hs},{no:2,name:"left_sibling_id",kind:"message",T:Hs}]));let Ca=pi;const vi=class vi extends yt{constructor(e){super();v(this,"id","");v(this,"username","");v(this,"createdAt");A.util.initPartial(e,this)}static fromBinary(e,i){return new vi().fromBinary(e,i)}static fromJson(e,i){return new vi().fromJson(e,i)}static fromJsonString(e,i){return new vi().fromJsonString(e,i)}static equals(e,i){return A.util.equals(vi,e,i)}};v(vi,"runtime",A),v(vi,"typeName","yorkie.v1.User"),v(vi,"fields",A.util.newFieldList(()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"username",kind:"scalar",T:9},{no:3,name:"created_at",kind:"message",T:Pe}]));let mb=vi;const wi=class wi extends yt{constructor(e){super();v(this,"id","");v(this,"name","");v(this,"publicKey","");v(this,"secretKey","");v(this,"authWebhookUrl","");v(this,"authWebhookMethods",[]);v(this,"clientDeactivateThreshold","");v(this,"createdAt");v(this,"updatedAt");A.util.initPartial(e,this)}static fromBinary(e,i){return new wi().fromBinary(e,i)}static fromJson(e,i){return new wi().fromJson(e,i)}static fromJsonString(e,i){return new wi().fromJsonString(e,i)}static equals(e,i){return A.util.equals(wi,e,i)}};v(wi,"runtime",A),v(wi,"typeName","yorkie.v1.Project"),v(wi,"fields",A.util.newFieldList(()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"public_key",kind:"scalar",T:9},{no:4,name:"secret_key",kind:"scalar",T:9},{no:5,name:"auth_webhook_url",kind:"scalar",T:9},{no:6,name:"auth_webhook_methods",kind:"scalar",T:9,repeated:!0},{no:7,name:"client_deactivate_threshold",kind:"scalar",T:9},{no:8,name:"created_at",kind:"message",T:Pe},{no:9,name:"updated_at",kind:"message",T:Pe}]));let yb=wi;const bi=class bi extends yt{constructor(e){super();v(this,"name");v(this,"authWebhookUrl");v(this,"authWebhookMethods");v(this,"clientDeactivateThreshold");A.util.initPartial(e,this)}static fromBinary(e,i){return new bi().fromBinary(e,i)}static fromJson(e,i){return new bi().fromJson(e,i)}static fromJsonString(e,i){return new bi().fromJsonString(e,i)}static equals(e,i){return A.util.equals(bi,e,i)}};v(bi,"runtime",A),v(bi,"typeName","yorkie.v1.UpdatableProjectFields"),v(bi,"fields",A.util.newFieldList(()=>[{no:1,name:"name",kind:"message",T:fn},{no:2,name:"auth_webhook_url",kind:"message",T:fn},{no:3,name:"auth_webhook_methods",kind:"message",T:Rm},{no:4,name:"client_deactivate_threshold",kind:"message",T:fn}]));let pb=bi;const Si=class Si extends yt{constructor(e){super();v(this,"methods",[]);A.util.initPartial(e,this)}static fromBinary(e,i){return new Si().fromBinary(e,i)}static fromJson(e,i){return new Si().fromJson(e,i)}static fromJsonString(e,i){return new Si().fromJsonString(e,i)}static equals(e,i){return A.util.equals(Si,e,i)}};v(Si,"runtime",A),v(Si,"typeName","yorkie.v1.UpdatableProjectFields.AuthWebhookMethods"),v(Si,"fields",A.util.newFieldList(()=>[{no:1,name:"methods",kind:"scalar",T:9,repeated:!0}]));let Rm=Si;const xi=class xi extends yt{constructor(e){super();v(this,"id","");v(this,"key","");v(this,"snapshot","");v(this,"createdAt");v(this,"accessedAt");v(this,"updatedAt");A.util.initPartial(e,this)}static fromBinary(e,i){return new xi().fromBinary(e,i)}static fromJson(e,i){return new xi().fromJson(e,i)}static fromJsonString(e,i){return new xi().fromJsonString(e,i)}static equals(e,i){return A.util.equals(xi,e,i)}};v(xi,"runtime",A),v(xi,"typeName","yorkie.v1.DocumentSummary"),v(xi,"fields",A.util.newFieldList(()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"key",kind:"scalar",T:9},{no:3,name:"snapshot",kind:"scalar",T:9},{no:4,name:"created_at",kind:"message",T:Pe},{no:5,name:"accessed_at",kind:"message",T:Pe},{no:6,name:"updated_at",kind:"message",T:Pe}]));let vb=xi;const Ti=class Ti extends yt{constructor(e){super();v(this,"type",0);v(this,"presence");A.util.initPartial(e,this)}static fromBinary(e,i){return new Ti().fromBinary(e,i)}static fromJson(e,i){return new Ti().fromJson(e,i)}static fromJsonString(e,i){return new Ti().fromJsonString(e,i)}static equals(e,i){return A.util.equals(Ti,e,i)}};v(Ti,"runtime",A),v(Ti,"typeName","yorkie.v1.PresenceChange"),v(Ti,"fields",A.util.newFieldList(()=>[{no:1,name:"type",kind:"enum",T:A.getEnumType(Da)},{no:2,name:"presence",kind:"message",T:by}]));let bu=Ti;var Da=(n=>(n[n.UNSPECIFIED=0]="UNSPECIFIED",n[n.PUT=1]="PUT",n[n.DELETE=2]="DELETE",n[n.CLEAR=3]="CLEAR",n))(Da||{});A.util.setEnumType(Da,"yorkie.v1.PresenceChange.ChangeType",[{no:0,name:"CHANGE_TYPE_UNSPECIFIED"},{no:1,name:"CHANGE_TYPE_PUT"},{no:2,name:"CHANGE_TYPE_DELETE"},{no:3,name:"CHANGE_TYPE_CLEAR"}]);var On;let by=(On=class extends yt{constructor(e){super();v(this,"data",{});A.util.initPartial(e,this)}static fromBinary(e,i){return new On().fromBinary(e,i)}static fromJson(e,i){return new On().fromJson(e,i)}static fromJsonString(e,i){return new On().fromJsonString(e,i)}static equals(e,i){return A.util.equals(On,e,i)}},v(On,"runtime",A),v(On,"typeName","yorkie.v1.Presence"),v(On,"fields",A.util.newFieldList(()=>[{no:1,name:"data",kind:"map",K:9,V:{kind:"scalar",T:9}}])),On);var In;let fS=(In=class extends yt{constructor(e){super();v(this,"serverSeq",re.zero);v(this,"clientSeq",0);A.util.initPartial(e,this)}static fromBinary(e,i){return new In().fromBinary(e,i)}static fromJson(e,i){return new In().fromJson(e,i)}static fromJsonString(e,i){return new In().fromJsonString(e,i)}static equals(e,i){return A.util.equals(In,e,i)}},v(In,"runtime",A),v(In,"typeName","yorkie.v1.Checkpoint"),v(In,"fields",A.util.newFieldList(()=>[{no:1,name:"server_seq",kind:"scalar",T:3},{no:2,name:"client_seq",kind:"scalar",T:13}])),In);const Ai=class Ai extends yt{constructor(e){super();v(this,"createdAt");v(this,"offset",0);v(this,"relativeOffset",0);A.util.initPartial(e,this)}static fromBinary(e,i){return new Ai().fromBinary(e,i)}static fromJson(e,i){return new Ai().fromJson(e,i)}static fromJsonString(e,i){return new Ai().fromJsonString(e,i)}static equals(e,i){return A.util.equals(Ai,e,i)}};v(Ai,"runtime",A),v(Ai,"typeName","yorkie.v1.TextNodePos"),v(Ai,"fields",A.util.newFieldList(()=>[{no:1,name:"created_at",kind:"message",T:wt},{no:2,name:"offset",kind:"scalar",T:5},{no:3,name:"relative_offset",kind:"scalar",T:5}]));let Qi=Ai;var Rn;let wt=(Rn=class extends yt{constructor(e){super();v(this,"lamport",re.zero);v(this,"delimiter",0);v(this,"actorId",new Uint8Array(0));A.util.initPartial(e,this)}static fromBinary(e,i){return new Rn().fromBinary(e,i)}static fromJson(e,i){return new Rn().fromJson(e,i)}static fromJsonString(e,i){return new Rn().fromJsonString(e,i)}static equals(e,i){return A.util.equals(Rn,e,i)}},v(Rn,"runtime",A),v(Rn,"typeName","yorkie.v1.TimeTicket"),v(Rn,"fields",A.util.newFieldList(()=>[{no:1,name:"lamport",kind:"scalar",T:3},{no:2,name:"delimiter",kind:"scalar",T:13},{no:3,name:"actor_id",kind:"scalar",T:12}])),Rn);const Ei=class Ei extends yt{constructor(e){super();v(this,"topic","");v(this,"payload",new Uint8Array(0));A.util.initPartial(e,this)}static fromBinary(e,i){return new Ei().fromBinary(e,i)}static fromJson(e,i){return new Ei().fromJson(e,i)}static fromJsonString(e,i){return new Ei().fromJsonString(e,i)}static equals(e,i){return A.util.equals(Ei,e,i)}};v(Ei,"runtime",A),v(Ei,"typeName","yorkie.v1.DocEventBody"),v(Ei,"fields",A.util.newFieldList(()=>[{no:1,name:"topic",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:12}]));let Mm=Ei;const Ni=class Ni extends yt{constructor(e){super();v(this,"type",0);v(this,"publisher","");v(this,"body");A.util.initPartial(e,this)}static fromBinary(e,i){return new Ni().fromBinary(e,i)}static fromJson(e,i){return new Ni().fromJson(e,i)}static fromJsonString(e,i){return new Ni().fromJsonString(e,i)}static equals(e,i){return A.util.equals(Ni,e,i)}};v(Ni,"runtime",A),v(Ni,"typeName","yorkie.v1.DocEvent"),v(Ni,"fields",A.util.newFieldList(()=>[{no:1,name:"type",kind:"enum",T:A.getEnumType(Aa)},{no:2,name:"publisher",kind:"scalar",T:9},{no:3,name:"body",kind:"message",T:Mm}]));let Bm=Ni;const Ci=class Ci extends yt{constructor(e){super();v(this,"clientKey","");v(this,"metadata",{});A.util.initPartial(e,this)}static fromBinary(e,i){return new Ci().fromBinary(e,i)}static fromJson(e,i){return new Ci().fromJson(e,i)}static fromJsonString(e,i){return new Ci().fromJsonString(e,i)}static equals(e,i){return A.util.equals(Ci,e,i)}};v(Ci,"runtime",A),v(Ci,"typeName","yorkie.v1.ActivateClientRequest"),v(Ci,"fields",A.util.newFieldList(()=>[{no:1,name:"client_key",kind:"scalar",T:9},{no:2,name:"metadata",kind:"map",K:9,V:{kind:"scalar",T:9}}]));let zm=Ci;const Di=class Di extends yt{constructor(e){super();v(this,"clientId","");A.util.initPartial(e,this)}static fromBinary(e,i){return new Di().fromBinary(e,i)}static fromJson(e,i){return new Di().fromJson(e,i)}static fromJsonString(e,i){return new Di().fromJsonString(e,i)}static equals(e,i){return A.util.equals(Di,e,i)}};v(Di,"runtime",A),v(Di,"typeName","yorkie.v1.ActivateClientResponse"),v(Di,"fields",A.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9}]));let Lm=Di;const ki=class ki extends yt{constructor(e){super();v(this,"clientId","");A.util.initPartial(e,this)}static fromBinary(e,i){return new ki().fromBinary(e,i)}static fromJson(e,i){return new ki().fromJson(e,i)}static fromJsonString(e,i){return new ki().fromJsonString(e,i)}static equals(e,i){return A.util.equals(ki,e,i)}};v(ki,"runtime",A),v(ki,"typeName","yorkie.v1.DeactivateClientRequest"),v(ki,"fields",A.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9}]));let _m=ki;const Oi=class Oi extends yt{constructor(t){super(),A.util.initPartial(t,this)}static fromBinary(t,e){return new Oi().fromBinary(t,e)}static fromJson(t,e){return new Oi().fromJson(t,e)}static fromJsonString(t,e){return new Oi().fromJsonString(t,e)}static equals(t,e){return A.util.equals(Oi,t,e)}};v(Oi,"runtime",A),v(Oi,"typeName","yorkie.v1.DeactivateClientResponse"),v(Oi,"fields",A.util.newFieldList(()=>[]));let Um=Oi;const Ii=class Ii extends yt{constructor(e){super();v(this,"clientId","");v(this,"changePack");A.util.initPartial(e,this)}static fromBinary(e,i){return new Ii().fromBinary(e,i)}static fromJson(e,i){return new Ii().fromJson(e,i)}static fromJsonString(e,i){return new Ii().fromJsonString(e,i)}static equals(e,i){return A.util.equals(Ii,e,i)}};v(Ii,"runtime",A),v(Ii,"typeName","yorkie.v1.AttachDocumentRequest"),v(Ii,"fields",A.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"change_pack",kind:"message",T:es}]));let qm=Ii;const Ri=class Ri extends yt{constructor(e){super();v(this,"documentId","");v(this,"changePack");A.util.initPartial(e,this)}static fromBinary(e,i){return new Ri().fromBinary(e,i)}static fromJson(e,i){return new Ri().fromJson(e,i)}static fromJsonString(e,i){return new Ri().fromJsonString(e,i)}static equals(e,i){return A.util.equals(Ri,e,i)}};v(Ri,"runtime",A),v(Ri,"typeName","yorkie.v1.AttachDocumentResponse"),v(Ri,"fields",A.util.newFieldList(()=>[{no:1,name:"document_id",kind:"scalar",T:9},{no:2,name:"change_pack",kind:"message",T:es}]));let Pm=Ri;const Mi=class Mi extends yt{constructor(e){super();v(this,"clientId","");v(this,"documentId","");v(this,"changePack");v(this,"removeIfNotAttached",!1);A.util.initPartial(e,this)}static fromBinary(e,i){return new Mi().fromBinary(e,i)}static fromJson(e,i){return new Mi().fromJson(e,i)}static fromJsonString(e,i){return new Mi().fromJsonString(e,i)}static equals(e,i){return A.util.equals(Mi,e,i)}};v(Mi,"runtime",A),v(Mi,"typeName","yorkie.v1.DetachDocumentRequest"),v(Mi,"fields",A.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:es},{no:4,name:"remove_if_not_attached",kind:"scalar",T:8}]));let Jm=Mi;const Bi=class Bi extends yt{constructor(e){super();v(this,"changePack");A.util.initPartial(e,this)}static fromBinary(e,i){return new Bi().fromBinary(e,i)}static fromJson(e,i){return new Bi().fromJson(e,i)}static fromJsonString(e,i){return new Bi().fromJsonString(e,i)}static equals(e,i){return A.util.equals(Bi,e,i)}};v(Bi,"runtime",A),v(Bi,"typeName","yorkie.v1.DetachDocumentResponse"),v(Bi,"fields",A.util.newFieldList(()=>[{no:2,name:"change_pack",kind:"message",T:es}]));let Hm=Bi;const zi=class zi extends yt{constructor(e){super();v(this,"clientId","");v(this,"documentId","");A.util.initPartial(e,this)}static fromBinary(e,i){return new zi().fromBinary(e,i)}static fromJson(e,i){return new zi().fromJson(e,i)}static fromJsonString(e,i){return new zi().fromJsonString(e,i)}static equals(e,i){return A.util.equals(zi,e,i)}};v(zi,"runtime",A),v(zi,"typeName","yorkie.v1.WatchDocumentRequest"),v(zi,"fields",A.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9}]));let $m=zi;const Li=class Li extends yt{constructor(e){super();v(this,"body",{case:void 0});A.util.initPartial(e,this)}static fromBinary(e,i){return new Li().fromBinary(e,i)}static fromJson(e,i){return new Li().fromJson(e,i)}static fromJsonString(e,i){return new Li().fromJsonString(e,i)}static equals(e,i){return A.util.equals(Li,e,i)}};v(Li,"runtime",A),v(Li,"typeName","yorkie.v1.WatchDocumentResponse"),v(Li,"fields",A.util.newFieldList(()=>[{no:1,name:"initialization",kind:"message",T:jm,oneof:"body"},{no:2,name:"event",kind:"message",T:Bm,oneof:"body"}]));let Vm=Li;const _i=class _i extends yt{constructor(e){super();v(this,"clientIds",[]);A.util.initPartial(e,this)}static fromBinary(e,i){return new _i().fromBinary(e,i)}static fromJson(e,i){return new _i().fromJson(e,i)}static fromJsonString(e,i){return new _i().fromJsonString(e,i)}static equals(e,i){return A.util.equals(_i,e,i)}};v(_i,"runtime",A),v(_i,"typeName","yorkie.v1.WatchDocumentResponse.Initialization"),v(_i,"fields",A.util.newFieldList(()=>[{no:1,name:"client_ids",kind:"scalar",T:9,repeated:!0}]));let jm=_i;const Ui=class Ui extends yt{constructor(e){super();v(this,"clientId","");v(this,"documentId","");v(this,"changePack");A.util.initPartial(e,this)}static fromBinary(e,i){return new Ui().fromBinary(e,i)}static fromJson(e,i){return new Ui().fromJson(e,i)}static fromJsonString(e,i){return new Ui().fromJsonString(e,i)}static equals(e,i){return A.util.equals(Ui,e,i)}};v(Ui,"runtime",A),v(Ui,"typeName","yorkie.v1.RemoveDocumentRequest"),v(Ui,"fields",A.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:es}]));let Ym=Ui;const qi=class qi extends yt{constructor(e){super();v(this,"changePack");A.util.initPartial(e,this)}static fromBinary(e,i){return new qi().fromBinary(e,i)}static fromJson(e,i){return new qi().fromJson(e,i)}static fromJsonString(e,i){return new qi().fromJsonString(e,i)}static equals(e,i){return A.util.equals(qi,e,i)}};v(qi,"runtime",A),v(qi,"typeName","yorkie.v1.RemoveDocumentResponse"),v(qi,"fields",A.util.newFieldList(()=>[{no:1,name:"change_pack",kind:"message",T:es}]));let Gm=qi;const Pi=class Pi extends yt{constructor(e){super();v(this,"clientId","");v(this,"documentId","");v(this,"changePack");v(this,"pushOnly",!1);A.util.initPartial(e,this)}static fromBinary(e,i){return new Pi().fromBinary(e,i)}static fromJson(e,i){return new Pi().fromJson(e,i)}static fromJsonString(e,i){return new Pi().fromJsonString(e,i)}static equals(e,i){return A.util.equals(Pi,e,i)}};v(Pi,"runtime",A),v(Pi,"typeName","yorkie.v1.PushPullChangesRequest"),v(Pi,"fields",A.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:es},{no:4,name:"push_only",kind:"scalar",T:8}]));let Xm=Pi;const Ji=class Ji extends yt{constructor(e){super();v(this,"changePack");A.util.initPartial(e,this)}static fromBinary(e,i){return new Ji().fromBinary(e,i)}static fromJson(e,i){return new Ji().fromJson(e,i)}static fromJsonString(e,i){return new Ji().fromJsonString(e,i)}static equals(e,i){return A.util.equals(Ji,e,i)}};v(Ji,"runtime",A),v(Ji,"typeName","yorkie.v1.PushPullChangesResponse"),v(Ji,"fields",A.util.newFieldList(()=>[{no:1,name:"change_pack",kind:"message",T:es}]));let Km=Ji;const Hi=class Hi extends yt{constructor(e){super();v(this,"clientId","");v(this,"documentId","");v(this,"topic","");v(this,"payload",new Uint8Array(0));A.util.initPartial(e,this)}static fromBinary(e,i){return new Hi().fromBinary(e,i)}static fromJson(e,i){return new Hi().fromJson(e,i)}static fromJsonString(e,i){return new Hi().fromJsonString(e,i)}static equals(e,i){return A.util.equals(Hi,e,i)}};v(Hi,"runtime",A),v(Hi,"typeName","yorkie.v1.BroadcastRequest"),v(Hi,"fields",A.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"topic",kind:"scalar",T:9},{no:4,name:"payload",kind:"scalar",T:12}]));let Fm=Hi;const $i=class $i extends yt{constructor(t){super(),A.util.initPartial(t,this)}static fromBinary(t,e){return new $i().fromBinary(t,e)}static fromJson(t,e){return new $i().fromJson(t,e)}static fromJsonString(t,e){return new $i().fromJsonString(t,e)}static equals(t,e){return A.util.equals($i,t,e)}};v($i,"runtime",A),v($i,"typeName","yorkie.v1.BroadcastResponse"),v($i,"fields",A.util.newFieldList(()=>[]));let Zm=$i;const m2={typeName:"yorkie.v1.YorkieService",methods:{activateClient:{name:"ActivateClient",I:zm,O:Lm,kind:$e.Unary},deactivateClient:{name:"DeactivateClient",I:_m,O:Um,kind:$e.Unary},attachDocument:{name:"AttachDocument",I:qm,O:Pm,kind:$e.Unary},detachDocument:{name:"DetachDocument",I:Jm,O:Hm,kind:$e.Unary},removeDocument:{name:"RemoveDocument",I:Ym,O:Gm,kind:$e.Unary},pushPullChanges:{name:"PushPullChanges",I:Xm,O:Km,kind:$e.Unary},watchDocument:{name:"WatchDocument",I:$m,O:Vm,kind:$e.ServerStreaming},broadcast:{name:"Broadcast",I:Fm,O:Zm,kind:$e.Unary}}},y2=A.makeMessageType("google.rpc.ErrorInfo",()=>[{no:1,name:"reason",kind:"scalar",T:9},{no:2,name:"domain",kind:"scalar",T:9},{no:3,name:"metadata",kind:"map",K:9,V:{kind:"scalar",T:9}}]);A.makeMessageType("google.rpc.RetryInfo",()=>[{no:1,name:"retry_delay",kind:"message",T:ji}]);A.makeMessageType("google.rpc.DebugInfo",()=>[{no:1,name:"stack_entries",kind:"scalar",T:9,repeated:!0},{no:2,name:"detail",kind:"scalar",T:9}]);A.makeMessageType("google.rpc.QuotaFailure",()=>[{no:1,name:"violations",kind:"message",T:p2,repeated:!0}]);const p2=A.makeMessageType("google.rpc.QuotaFailure.Violation",()=>[{no:1,name:"subject",kind:"scalar",T:9},{no:2,name:"description",kind:"scalar",T:9}],{localName:"QuotaFailure_Violation"});A.makeMessageType("google.rpc.PreconditionFailure",()=>[{no:1,name:"violations",kind:"message",T:v2,repeated:!0}]);const v2=A.makeMessageType("google.rpc.PreconditionFailure.Violation",()=>[{no:1,name:"type",kind:"scalar",T:9},{no:2,name:"subject",kind:"scalar",T:9},{no:3,name:"description",kind:"scalar",T:9}],{localName:"PreconditionFailure_Violation"});A.makeMessageType("google.rpc.BadRequest",()=>[{no:1,name:"field_violations",kind:"message",T:w2,repeated:!0}]);const w2=A.makeMessageType("google.rpc.BadRequest.FieldViolation",()=>[{no:1,name:"field",kind:"scalar",T:9},{no:2,name:"description",kind:"scalar",T:9},{no:3,name:"reason",kind:"scalar",T:9},{no:4,name:"localized_message",kind:"message",T:S2}],{localName:"BadRequest_FieldViolation"});A.makeMessageType("google.rpc.RequestInfo",()=>[{no:1,name:"request_id",kind:"scalar",T:9},{no:2,name:"serving_data",kind:"scalar",T:9}]);A.makeMessageType("google.rpc.ResourceInfo",()=>[{no:1,name:"resource_type",kind:"scalar",T:9},{no:2,name:"resource_name",kind:"scalar",T:9},{no:3,name:"owner",kind:"scalar",T:9},{no:4,name:"description",kind:"scalar",T:9}]);A.makeMessageType("google.rpc.Help",()=>[{no:1,name:"links",kind:"message",T:b2,repeated:!0}]);const b2=A.makeMessageType("google.rpc.Help.Link",()=>[{no:1,name:"description",kind:"scalar",T:9},{no:2,name:"url",kind:"scalar",T:9}],{localName:"Help_Link"}),S2=A.makeMessageType("google.rpc.LocalizedMessage",()=>[{no:1,name:"locale",kind:"scalar",T:9},{no:2,name:"message",kind:"scalar",T:9}]);var $=(n=>(n.Ok="ok",n.ErrClientNotActivated="ErrClientNotActivated",n.ErrClientNotFound="ErrClientNotFound",n.ErrUnimplemented="ErrUnimplemented",n.ErrInvalidType="ErrInvalidType",n.ErrDummy="ErrDummy",n.ErrDocumentNotAttached="ErrDocumentNotAttached",n.ErrDocumentNotDetached="ErrDocumentNotDetached",n.ErrDocumentRemoved="ErrDocumentRemoved",n.ErrInvalidObjectKey="ErrInvalidObjectKey",n.ErrInvalidArgument="ErrInvalidArgument",n.ErrNotInitialized="ErrNotInitialized",n.ErrNotReady="ErrNotReady",n.ErrRefused="ErrRefused",n.ErrContextNotProvided="ErrContextNotProvided",n.ErrPermissionDenied="ErrPermissionDenied",n.ErrUnauthenticated="ErrUnauthenticated",n.ErrTooManySubscribers="ErrTooManySubscribers",n.ErrTooManyAttachments="ErrTooManyAttachments",n))($||{});class X extends Error{constructor(e,i){super(i);v(this,"name","YorkieError");v(this,"stack");this.code=e,this.message=i,this.toString=()=>`[code=${this.code}]: ${this.message}`}}var xr=(n=>(n.Put="put",n.Clear="clear",n))(xr||{});const Ed="000000000000000000000000",$s=24;class zn{constructor(t,e,i){v(this,"lamport");v(this,"delimiter");v(this,"actorID");this.lamport=t,this.delimiter=e,this.actorID=i}static of(t,e,i){return new zn(t,e,i)}static fromStruct(t){return zn.of(BigInt(t.lamport),t.delimiter,t.actorID)}toIDString(){return`${this.lamport.toString()}:${this.actorID}:${this.delimiter}`}toStruct(){return{lamport:this.getLamportAsString(),delimiter:this.getDelimiter(),actorID:this.getActorID()}}toTestString(){return`${this.lamport.toString()}:${this.actorID.slice(-2)}:${this.delimiter}`}setActor(t){return new zn(this.lamport,this.delimiter,t)}getLamportAsString(){return this.lamport.toString()}getLamport(){return this.lamport}getDelimiter(){return this.delimiter}getActorID(){return this.actorID}after(t){return this.compare(t)>0}equals(t){return this.compare(t)===0}compare(t){if(this.lamport>t.lamport)return 1;if(t.lamport>this.lamport)return-1;const e=this.actorID.localeCompare(t.actorID);return e!==0?e:this.delimiter>t.delimiter?1:t.delimiter>this.delimiter?-1:0}}const Qm=0n,dS=0,du=9223372036854775807n,Uo=new zn(Qm,dS,Ed);function vr(n){return n.replace(/["'\\\n\r\f\b\t\u2028\u2029]/g,function(t){switch(t){case'"':case"\\":return"\\"+t;case`
`:return"\\n";case"\r":return"\\r";case"\f":return"\\f";case"\b":return"\\b";case"	":return"\\t";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:return t}})}class Uu{constructor(t){v(this,"createdAt");v(this,"movedAt");v(this,"removedAt");this.createdAt=t}getCreatedAt(){return this.createdAt}getID(){return this.createdAt}getMovedAt(){return this.movedAt}getRemovedAt(){return this.removedAt}getPositionedAt(){return this.movedAt?this.movedAt:this.createdAt}setMovedAt(t){return!this.movedAt||t&&t.after(this.movedAt)?(this.movedAt=t,!0):!1}setRemovedAt(t){this.removedAt=t}remove(t){return t&&t.after(this.getPositionedAt())&&(!this.removedAt||t.after(this.removedAt))?(this.removedAt=t,!0):!1}isRemoved(){return!!this.removedAt}getMetaUsage(){let t=0;return this.getCreatedAt()&&(t+=$s),this.getMovedAt()&&(t+=$s),this.getRemovedAt()&&(t+=$s),t}}class Vs extends Uu{constructor(t){super(t)}}class Sy{constructor(t,e){v(this,"strKey");v(this,"value");this.strKey=t,this.value=e}static of(t,e){return new Sy(t,e)}isRemoved(){return this.value.isRemoved()}getStrKey(){return this.strKey}getValue(){return this.value}remove(t){return this.value.remove(t)}}class Su{constructor(){v(this,"nodeMapByKey");v(this,"nodeMapByCreatedAt");this.nodeMapByKey=new Map,this.nodeMapByCreatedAt=new Map}static create(){return new Su}set(t,e,i){let a;const u=this.nodeMapByKey.get(t);u!=null&&!u.isRemoved()&&u.remove(i)&&(a=u.getValue());const c=Sy.of(t,e);return this.nodeMapByCreatedAt.set(e.getCreatedAt().toIDString(),c),(u==null||i.after(u.getValue().getPositionedAt()))&&(this.nodeMapByKey.set(t,c),e.setMovedAt(i)),a}delete(t,e){if(!this.nodeMapByCreatedAt.has(t.toIDString()))throw new X($.ErrInvalidArgument,`fail to find ${t.toIDString()}`);const i=this.nodeMapByCreatedAt.get(t.toIDString());return i.remove(e),i.getValue()}subPathOf(t){const e=this.nodeMapByCreatedAt.get(t.toIDString());if(e)return e.getStrKey()}purge(t){const e=this.nodeMapByCreatedAt.get(t.getCreatedAt().toIDString());if(!e)throw new X($.ErrInvalidArgument,`fail to find ${t.getCreatedAt().toIDString()}`);const i=this.nodeMapByKey.get(e.getStrKey());e===i&&this.nodeMapByKey.delete(i.getStrKey()),this.nodeMapByCreatedAt.delete(e.getValue().getCreatedAt().toIDString())}deleteByKey(t,e){const i=this.nodeMapByKey.get(t);if(i!=null&&i.remove(e))return i.getValue()}has(t){const e=this.nodeMapByKey.get(t);return e==null?!1:!e.isRemoved()}getByID(t){return this.nodeMapByCreatedAt.get(t.toIDString())}get(t){const e=this.nodeMapByKey.get(t);if(!(!e||e.isRemoved()))return e}*[Symbol.iterator](){for(const[,t]of this.nodeMapByKey)yield t}}class We extends Vs{constructor(e,i){super(e);v(this,"memberNodes");this.memberNodes=i}static create(e,i){if(!i)return new We(e,Su.create());const a=Su.create();for(const[u,c]of Object.entries(i))a.set(u,c.deepcopy(),c.getCreatedAt());return new We(e,a)}subPathOf(e){return this.memberNodes.subPathOf(e)}purge(e){this.memberNodes.purge(e)}set(e,i,a){return this.memberNodes.set(e,i,a)}delete(e,i){return this.memberNodes.delete(e,i)}deleteByKey(e,i){return this.memberNodes.deleteByKey(e,i)}get(e){const i=this.memberNodes.get(e);return i==null?void 0:i.getValue()}getByID(e){const i=this.memberNodes.getByID(e);return i==null?void 0:i.getValue()}has(e){return this.memberNodes.has(e)}getDataSize(){return{data:0,meta:this.getMetaUsage()}}toJSON(){const e=[];for(const[i,a]of this)e.push(`"${vr(i)}":${a.toJSON()}`);return`{${e.join(",")}}`}toJS(){return JSON.parse(this.toJSON())}toJSForTest(){const e={};for(const[i,a]of this){const{createdAt:u,value:c,type:d}=a.toJSForTest();e[i]={key:i,createdAt:u,value:c,type:d}}return{createdAt:this.getCreatedAt().toTestString(),value:e,type:"YORKIE_OBJECT"}}getKeys(){const e=Array();for(const[i]of this)e.push(i);return e}toSortedJSON(){var a;const e=Array();for(const[u]of this)e.push(u);const i=[];for(const u of e.sort()){const c=(a=this.memberNodes.get(u))==null?void 0:a.getValue();i.push(`"${vr(u)}":${c.toSortedJSON()}`)}return`{${i.join(",")}}`}getRHT(){return this.memberNodes}deepcopy(){const e=We.create(this.getCreatedAt());for(const i of this.memberNodes)e.memberNodes.set(i.getStrKey(),i.getValue().deepcopy(),this.getPositionedAt());return e.remove(this.getRemovedAt()),e}getDescendants(e){for(const i of this.memberNodes){const a=i.getValue();if(e(a,this))return;a instanceof Vs&&a.getDescendants(e)}}*[Symbol.iterator](){const e=new Set;for(const i of this.memberNodes)e.has(i.getStrKey())||(e.add(i.getStrKey()),i.isRemoved()||(yield[i.getStrKey(),i.getValue()]))}}var te=(n=>(n.Local="local",n.Remote="remote",n.UndoRedo="undoredo",n))(te||{});class Qn{constructor(t,e){v(this,"parentCreatedAt");v(this,"executedAt");this.parentCreatedAt=t,this.executedAt=e}getParentCreatedAt(){return this.parentCreatedAt}getExecutedAt(){if(!this.executedAt)throw new X($.ErrNotReady,"executedAt is not set yet");return this.executedAt}setActor(t){this.executedAt&&(this.executedAt=this.executedAt.setActor(t))}setExecutedAt(t){this.executedAt=t}}class hS{constructor(t){v(this,"value");v(this,"left");v(this,"right");v(this,"parent");v(this,"weight");this.value=t,this.initWeight()}getNodeString(){return`${this.weight}${this.value}`}getValue(){return this.value}getLeftWeight(){return this.hasLeft()?this.left.getWeight():0}getRightWeight(){return this.hasRight()?this.right.getWeight():0}getWeight(){return this.weight}getLeft(){return this.left}getRight(){return this.right}getParent(){return this.parent}hasLeft(){return!!this.left}hasRight(){return!!this.right}hasParent(){return!!this.parent}setLeft(t){this.left=t}setRight(t){this.right=t}setParent(t){this.parent=t}unlink(){this.parent=void 0,this.right=void 0,this.left=void 0}hasLinks(){return this.hasParent()||this.hasLeft()||this.hasRight()}increaseWeight(t){this.weight+=t}initWeight(){this.weight=this.getLength()}}class xu{constructor(t){v(this,"root");this.root=t}get length(){return this.root?this.root.getWeight():0}find(t){if(!this.root||t<0)return[void 0,0];let e=this.root;for(;;)if(e.hasLeft()&&t<=e.getLeftWeight())e=e.getLeft();else if(e.hasRight()&&e.getLeftWeight()+e.getLength()<t)t-=e.getLeftWeight()+e.getLength(),e=e.getRight();else{t-=e.getLeftWeight();break}if(t>e.getLength())throw new X($.ErrInvalidArgument,`out of index range: pos: ${t} > node.length: ${e.getLength()}`);return this.splayNode(e),[e,t]}indexOf(t){return!t||t!==this.root&&!t.hasLinks()?-1:(this.splayNode(t),this.root.getLeftWeight())}getRoot(){return this.root}insert(t){return this.insertAfter(this.root,t)}insertAfter(t,e){return t?(this.splayNode(t),this.root=e,e.setRight(t.getRight()),t.hasRight()&&t.getRight().setParent(e),e.setLeft(t),t.setParent(e),t.setRight(),this.updateWeight(t),this.updateWeight(e),e):(this.root=e,e)}updateWeight(t){t.initWeight(),t.hasLeft()&&t.increaseWeight(t.getLeftWeight()),t.hasRight()&&t.increaseWeight(t.getRightWeight())}updateTreeWeight(t){for(;t;)this.updateWeight(t),t=t.getParent()}splayNode(t){if(t)for(;;)if(this.isLeftChild(t.getParent())&&this.isRightChild(t))this.rotateLeft(t),this.rotateRight(t);else if(this.isRightChild(t.getParent())&&this.isLeftChild(t))this.rotateRight(t),this.rotateLeft(t);else if(this.isLeftChild(t.getParent())&&this.isLeftChild(t))this.rotateRight(t.getParent()),this.rotateRight(t);else if(this.isRightChild(t.getParent())&&this.isRightChild(t))this.rotateLeft(t.getParent()),this.rotateLeft(t);else{this.isLeftChild(t)?this.rotateRight(t):this.isRightChild(t)&&this.rotateLeft(t),this.updateWeight(t);return}}delete(t){this.splayNode(t);const e=new xu(t.getLeft());e.root&&e.root.setParent();const i=new xu(t.getRight());if(i.root&&i.root.setParent(),e.root){const a=e.getRightmost();e.splayNode(a),e.root.setRight(i.root),i.root&&i.root.setParent(e.root),this.root=e.root}else this.root=i.root;t.unlink(),this.root&&this.updateWeight(this.root)}deleteRange(t,e){if(!e){this.splayNode(t),this.cutOffRight(t);return}this.splayNode(t),this.splayNode(e),e.getLeft()!=t&&this.rotateRight(t),this.cutOffRight(t)}cutOffRight(t){const e=[];this.traversePostorder(t.getRight(),e);for(const i of e)i.initWeight();this.updateTreeWeight(t)}toTestString(){const t=[];return this.traverseInorder(this.root,t),t.map(e=>`[${e.getWeight()},${e.getLength()}]${e.getValue()||""}`).join("")}checkWeight(){const t=[];this.traverseInorder(this.root,t);for(const e of t)if(e.getWeight()!=e.getLength()+e.getLeftWeight()+e.getRightWeight())return!1;return!0}getRightmost(){let t=this.root;for(;t.hasRight();)t=t.getRight();return t}traverseInorder(t,e){t&&(this.traverseInorder(t.getLeft(),e),e.push(t),this.traverseInorder(t.getRight(),e))}traversePostorder(t,e){t&&(this.traversePostorder(t.getLeft(),e),this.traversePostorder(t.getRight(),e),e.push(t))}rotateLeft(t){const e=t.getParent();e.hasParent()?e===e.getParent().getLeft()?e.getParent().setLeft(t):e.getParent().setRight(t):this.root=t,t.setParent(e.getParent()),e.setRight(t.getLeft()),e.hasRight()&&e.getRight().setParent(e),t.setLeft(e),t.getLeft().setParent(t),this.updateWeight(e),this.updateWeight(t)}rotateRight(t){const e=t.getParent();e.hasParent()?e===e.getParent().getLeft()?e.getParent().setLeft(t):e.getParent().setRight(t):this.root=t,t.setParent(e.getParent()),e.setLeft(t.getRight()),e.hasLeft()&&e.getLeft().setParent(e),t.setRight(e),t.getRight().setParent(t),this.updateWeight(e),this.updateWeight(t)}isLeftChild(t){return t&&t.hasParent()?t.getParent().getLeft()===t:!1}isRightChild(t){return t&&t.hasParent()?t.getParent().getRight()===t:!1}}/**
 * @license
 * Copyright 2009 The Closure Library Authors
 * Copyright 2020 Daniel Wirtz / The long.js Authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * SPDX-License-Identifier: Apache-2.0
 */var Mn=null;try{Mn=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function Ut(n,t,e){this.low=n|0,this.high=t|0,this.unsigned=!!e}Ut.prototype.__isLong__;Object.defineProperty(Ut.prototype,"__isLong__",{value:!0});function Je(n){return(n&&n.__isLong__)===!0}function wb(n){var t=Math.clz32(n&-n);return n?31-t:t}Ut.isLong=Je;var bb={},Sb={};function Ra(n,t){var e,i,a;return t?(n>>>=0,(a=0<=n&&n<256)&&(i=Sb[n],i)?i:(e=Jt(n,0,!0),a&&(Sb[n]=e),e)):(n|=0,(a=-128<=n&&n<128)&&(i=bb[n],i)?i:(e=Jt(n,n<0?-1:0,!1),a&&(bb[n]=e),e))}Ut.fromInt=Ra;function Bn(n,t){if(isNaN(n))return t?Gi:Xn;if(t){if(n<0)return Gi;if(n>=gS)return pS}else{if(n<=-9223372036854776e3)return Ze;if(n+1>=T2)return yS}return n<0?Bn(-n,t).neg():Jt(n%qo|0,n/qo|0,t)}Ut.fromNumber=Bn;function Jt(n,t,e){return new Ut(n,t,e)}Ut.fromBits=Jt;var sd=Math.pow;function xy(n,t,e){if(n.length===0)throw Error("empty string");if(typeof t=="number"?(e=t,t=!1):t=!!t,n==="NaN"||n==="Infinity"||n==="+Infinity"||n==="-Infinity")return t?Gi:Xn;if(e=e||10,e<2||36<e)throw RangeError("radix");var i;if((i=n.indexOf("-"))>0)throw Error("interior hyphen");if(i===0)return xy(n.substring(1),t,e).neg();for(var a=Bn(sd(e,8)),u=Xn,c=0;c<n.length;c+=8){var d=Math.min(8,n.length-c),h=parseInt(n.substring(c,c+d),e);if(d<8){var g=Bn(sd(e,d));u=u.mul(g).add(Bn(h))}else u=u.mul(a),u=u.add(Bn(h))}return u.unsigned=t,u}Ut.fromString=xy;function Un(n,t){return typeof n=="number"?Bn(n,t):typeof n=="string"?xy(n,t):Jt(n.low,n.high,typeof t=="boolean"?t:n.unsigned)}Ut.fromValue=Un;var xb=65536,x2=1<<24,qo=xb*xb,gS=qo*qo,T2=gS/2,Tb=Ra(x2),Xn=Ra(0);Ut.ZERO=Xn;var Gi=Ra(0,!0);Ut.UZERO=Gi;var No=Ra(1);Ut.ONE=No;var mS=Ra(1,!0);Ut.UONE=mS;var Wm=Ra(-1);Ut.NEG_ONE=Wm;var yS=Jt(-1,2147483647,!1);Ut.MAX_VALUE=yS;var pS=Jt(-1,-1,!0);Ut.MAX_UNSIGNED_VALUE=pS;var Ze=Jt(0,-2147483648,!1);Ut.MIN_VALUE=Ze;var ht=Ut.prototype;ht.toInt=function(){return this.unsigned?this.low>>>0:this.low};ht.toNumber=function(){return this.unsigned?(this.high>>>0)*qo+(this.low>>>0):this.high*qo+(this.low>>>0)};ht.toString=function(t){if(t=t||10,t<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(Ze)){var e=Bn(t),i=this.div(e),a=i.mul(e).sub(this);return i.toString(t)+a.toInt().toString(t)}else return"-"+this.neg().toString(t);for(var u=Bn(sd(t,6),this.unsigned),c=this,d="";;){var h=c.div(u),g=c.sub(h.mul(u)).toInt()>>>0,y=g.toString(t);if(c=h,c.isZero())return y+d;for(;y.length<6;)y="0"+y;d=""+y+d}};ht.getHighBits=function(){return this.high};ht.getHighBitsUnsigned=function(){return this.high>>>0};ht.getLowBits=function(){return this.low};ht.getLowBitsUnsigned=function(){return this.low>>>0};ht.getNumBitsAbs=function(){if(this.isNegative())return this.eq(Ze)?64:this.neg().getNumBitsAbs();for(var t=this.high!=0?this.high:this.low,e=31;e>0&&(t&1<<e)==0;e--);return this.high!=0?e+33:e+1};ht.isSafeInteger=function(){var t=this.high>>21;return t?this.unsigned?!1:t===-1&&!(this.low===0&&this.high===-2097152):!0};ht.isZero=function(){return this.high===0&&this.low===0};ht.eqz=ht.isZero;ht.isNegative=function(){return!this.unsigned&&this.high<0};ht.isPositive=function(){return this.unsigned||this.high>=0};ht.isOdd=function(){return(this.low&1)===1};ht.isEven=function(){return(this.low&1)===0};ht.equals=function(t){return Je(t)||(t=Un(t)),this.unsigned!==t.unsigned&&this.high>>>31===1&&t.high>>>31===1?!1:this.high===t.high&&this.low===t.low};ht.eq=ht.equals;ht.notEquals=function(t){return!this.eq(t)};ht.neq=ht.notEquals;ht.ne=ht.notEquals;ht.lessThan=function(t){return this.comp(t)<0};ht.lt=ht.lessThan;ht.lessThanOrEqual=function(t){return this.comp(t)<=0};ht.lte=ht.lessThanOrEqual;ht.le=ht.lessThanOrEqual;ht.greaterThan=function(t){return this.comp(t)>0};ht.gt=ht.greaterThan;ht.greaterThanOrEqual=function(t){return this.comp(t)>=0};ht.gte=ht.greaterThanOrEqual;ht.ge=ht.greaterThanOrEqual;ht.compare=function(t){if(Je(t)||(t=Un(t)),this.eq(t))return 0;var e=this.isNegative(),i=t.isNegative();return e&&!i?-1:!e&&i?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1};ht.comp=ht.compare;ht.negate=function(){return!this.unsigned&&this.eq(Ze)?Ze:this.not().add(No)};ht.neg=ht.negate;ht.add=function(t){Je(t)||(t=Un(t));var e=this.high>>>16,i=this.high&65535,a=this.low>>>16,u=this.low&65535,c=t.high>>>16,d=t.high&65535,h=t.low>>>16,g=t.low&65535,y=0,w=0,p=0,b=0;return b+=u+g,p+=b>>>16,b&=65535,p+=a+h,w+=p>>>16,p&=65535,w+=i+d,y+=w>>>16,w&=65535,y+=e+c,y&=65535,Jt(p<<16|b,y<<16|w,this.unsigned)};ht.subtract=function(t){return Je(t)||(t=Un(t)),this.add(t.neg())};ht.sub=ht.subtract;ht.multiply=function(t){if(this.isZero())return this;if(Je(t)||(t=Un(t)),Mn){var e=Mn.mul(this.low,this.high,t.low,t.high);return Jt(e,Mn.get_high(),this.unsigned)}if(t.isZero())return this.unsigned?Gi:Xn;if(this.eq(Ze))return t.isOdd()?Ze:Xn;if(t.eq(Ze))return this.isOdd()?Ze:Xn;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(Tb)&&t.lt(Tb))return Bn(this.toNumber()*t.toNumber(),this.unsigned);var i=this.high>>>16,a=this.high&65535,u=this.low>>>16,c=this.low&65535,d=t.high>>>16,h=t.high&65535,g=t.low>>>16,y=t.low&65535,w=0,p=0,b=0,x=0;return x+=c*y,b+=x>>>16,x&=65535,b+=u*y,p+=b>>>16,b&=65535,b+=c*g,p+=b>>>16,b&=65535,p+=a*y,w+=p>>>16,p&=65535,p+=u*g,w+=p>>>16,p&=65535,p+=c*h,w+=p>>>16,p&=65535,w+=i*y+a*g+u*h+c*d,w&=65535,Jt(b<<16|x,w<<16|p,this.unsigned)};ht.mul=ht.multiply;ht.divide=function(t){if(Je(t)||(t=Un(t)),t.isZero())throw Error("division by zero");if(Mn){if(!this.unsigned&&this.high===-2147483648&&t.low===-1&&t.high===-1)return this;var e=(this.unsigned?Mn.div_u:Mn.div_s)(this.low,this.high,t.low,t.high);return Jt(e,Mn.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?Gi:Xn;var i,a,u;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return Gi;if(t.gt(this.shru(1)))return mS;u=Gi}else{if(this.eq(Ze)){if(t.eq(No)||t.eq(Wm))return Ze;if(t.eq(Ze))return No;var c=this.shr(1);return i=c.div(t).shl(1),i.eq(Xn)?t.isNegative()?No:Wm:(a=this.sub(t.mul(i)),u=i.add(a.div(t)),u)}else if(t.eq(Ze))return this.unsigned?Gi:Xn;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();u=Xn}for(a=this;a.gte(t);){i=Math.max(1,Math.floor(a.toNumber()/t.toNumber()));for(var d=Math.ceil(Math.log(i)/Math.LN2),h=d<=48?1:sd(2,d-48),g=Bn(i),y=g.mul(t);y.isNegative()||y.gt(a);)i-=h,g=Bn(i,this.unsigned),y=g.mul(t);g.isZero()&&(g=No),u=u.add(g),a=a.sub(y)}return u};ht.div=ht.divide;ht.modulo=function(t){if(Je(t)||(t=Un(t)),Mn){var e=(this.unsigned?Mn.rem_u:Mn.rem_s)(this.low,this.high,t.low,t.high);return Jt(e,Mn.get_high(),this.unsigned)}return this.sub(this.div(t).mul(t))};ht.mod=ht.modulo;ht.rem=ht.modulo;ht.not=function(){return Jt(~this.low,~this.high,this.unsigned)};ht.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32};ht.clz=ht.countLeadingZeros;ht.countTrailingZeros=function(){return this.low?wb(this.low):wb(this.high)+32};ht.ctz=ht.countTrailingZeros;ht.and=function(t){return Je(t)||(t=Un(t)),Jt(this.low&t.low,this.high&t.high,this.unsigned)};ht.or=function(t){return Je(t)||(t=Un(t)),Jt(this.low|t.low,this.high|t.high,this.unsigned)};ht.xor=function(t){return Je(t)||(t=Un(t)),Jt(this.low^t.low,this.high^t.high,this.unsigned)};ht.shiftLeft=function(t){return Je(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?Jt(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):Jt(0,this.low<<t-32,this.unsigned)};ht.shl=ht.shiftLeft;ht.shiftRight=function(t){return Je(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?Jt(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):Jt(this.high>>t-32,this.high>=0?0:-1,this.unsigned)};ht.shr=ht.shiftRight;ht.shiftRightUnsigned=function(t){return Je(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?Jt(this.low>>>t|this.high<<32-t,this.high>>>t,this.unsigned):t===32?Jt(this.high,0,this.unsigned):Jt(this.high>>>t-32,0,this.unsigned)};ht.shru=ht.shiftRightUnsigned;ht.shr_u=ht.shiftRightUnsigned;ht.rotateLeft=function(t){var e;return Je(t)&&(t=t.toInt()),(t&=63)===0?this:t===32?Jt(this.high,this.low,this.unsigned):t<32?(e=32-t,Jt(this.low<<t|this.high>>>e,this.high<<t|this.low>>>e,this.unsigned)):(t-=32,e=32-t,Jt(this.high<<t|this.low>>>e,this.low<<t|this.high>>>e,this.unsigned))};ht.rotl=ht.rotateLeft;ht.rotateRight=function(t){var e;return Je(t)&&(t=t.toInt()),(t&=63)===0?this:t===32?Jt(this.high,this.low,this.unsigned):t<32?(e=32-t,Jt(this.high<<e|this.low>>>t,this.low<<e|this.high>>>t,this.unsigned)):(t-=32,e=32-t,Jt(this.low<<e|this.high>>>t,this.high<<e|this.low>>>t,this.unsigned))};ht.rotr=ht.rotateRight;ht.toSigned=function(){return this.unsigned?Jt(this.low,this.high,!1):this};ht.toUnsigned=function(){return this.unsigned?this:Jt(this.low,this.high,!0)};ht.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()};ht.toBytesLE=function(){var t=this.high,e=this.low;return[e&255,e>>>8&255,e>>>16&255,e>>>24,t&255,t>>>8&255,t>>>16&255,t>>>24]};ht.toBytesBE=function(){var t=this.high,e=this.low;return[t>>>24,t>>>16&255,t>>>8&255,t&255,e>>>24,e>>>16&255,e>>>8&255,e&255]};Ut.fromBytes=function(t,e,i){return i?Ut.fromBytesLE(t,e):Ut.fromBytesBE(t,e)};Ut.fromBytesLE=function(t,e){return new Ut(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,e)};Ut.fromBytesBE=function(t,e){return new Ut(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],e)};typeof BigInt=="function"&&(Ut.fromBigInt=function(t,e){var i=Number(BigInt.asIntN(32,t)),a=Number(BigInt.asIntN(32,t>>BigInt(32)));return Jt(i,a,e)},Ut.fromValue=function(t,e){return typeof t=="bigint"?fromBigInt(t,e):Un(t,e)},ht.toBigInt=function(){var t=BigInt(this.low>>>0),e=BigInt(this.unsigned?this.high>>>0:this.high);return e<<BigInt(32)|t});var Ae=(n=>(n[n.Null=0]="Null",n[n.Boolean=1]="Boolean",n[n.Integer=2]="Integer",n[n.Long=3]="Long",n[n.Double=4]="Double",n[n.String=5]="String",n[n.Bytes=6]="Bytes",n[n.Date=7]="Date",n))(Ae||{});class ce extends Uu{constructor(e,i){super(i);v(this,"valueType");v(this,"value");this.valueType=ce.getPrimitiveType(e),this.value=e===void 0?null:e}static of(e,i){return new ce(e,i)}static valueFromBytes(e,i){switch(e){case 0:return null;case 1:return!!i[0];case 2:return i[0]|i[1]<<8|i[2]<<16|i[3]<<24;case 4:{const a=new DataView(i.buffer);return i.forEach(function(u,c){a.setUint8(c,u)}),a.getFloat64(0,!0)}case 5:return new TextDecoder("utf-8").decode(i);case 3:return Ut.fromBytesLE(Array.from(i));case 6:return i;case 7:return new Date(Ut.fromBytesLE(Array.from(i),!0).toNumber());default:throw new X($.ErrUnimplemented,`unimplemented type: ${e}`)}}getValueSize(){switch(this.valueType){case 0:return 8;case 1:return 4;case 2:return 4;case 3:return 8;case 4:return 8;case 5:return this.value.length*2;case 6:return this.value.length;case 7:return 8;default:throw new X($.ErrUnimplemented,`unimplemented type: ${this.valueType}`)}}getDataSize(){return{data:this.getValueSize(),meta:this.getMetaUsage()}}toJSON(){return this.valueType===5?`"${vr(this.value)}"`:`${this.value}`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:this.value,type:"YORKIE_PRIMITIVE"}}deepcopy(){const e=ce.of(this.value,this.getCreatedAt());return e.setMovedAt(this.getMovedAt()),e.setRemovedAt(this.getRemovedAt()),e}getType(){return this.valueType}static getPrimitiveType(e){switch(typeof e){case"undefined":return 0;case"boolean":return 1;case"number":return this.isInteger(e)?2:4;case"string":return 5;case"object":if(e===null)return 0;if(e instanceof Ut)return 3;if(e instanceof Uint8Array)return 6;if(e instanceof Date)return 7}}static isSupport(e){return ce.getPrimitiveType(e)!==void 0}static isInteger(e){return e%1===0}isNumericType(){const e=this.valueType;return e===2||e===3||e===4}getValue(){return this.value}toBytes(){switch(this.valueType){case 0:return new Uint8Array;case 1:return this.value?new Uint8Array([1]):new Uint8Array([0]);case 2:{const e=this.value;return new Uint8Array([e&255,e>>8&255,e>>16&255,e>>24&255])}case 4:{const e=this.value,i=new Uint8Array(8);return new DataView(i.buffer).setFloat64(0,e,!0),i}case 5:return new TextEncoder().encode(this.value);case 3:{const i=this.value.toBytesLE();return Uint8Array.from(i)}case 6:return this.value;case 7:{const e=this.value,i=Ut.fromNumber(e.getTime(),!0).toBytesLE();return Uint8Array.from(i)}default:throw new X($.ErrUnimplemented,`unimplemented type: ${this.valueType}`)}}}class ad extends hS{constructor(e){super(e);v(this,"prev");v(this,"next");this.value=e}static createAfter(e,i){const a=new ad(i),u=e.next;return e.next=a,a.prev=e,a.next=u,u&&(u.prev=a),a}remove(e){return this.value.remove(e)}getCreatedAt(){return this.value.getCreatedAt()}getPositionedAt(){return this.value.getPositionedAt()}release(){this.prev&&(this.prev.next=this.next),this.next&&(this.next.prev=this.prev),this.prev=void 0,this.next=void 0}getLength(){return this.value.isRemoved()?0:1}getPrev(){return this.prev}getNext(){return this.next}getValue(){return this.value}isRemoved(){return this.value.isRemoved()}}class Tu{constructor(){v(this,"dummyHead");v(this,"last");v(this,"nodeMapByIndex");v(this,"nodeMapByCreatedAt");const t=ce.of(0,Uo);t.setRemovedAt(Uo),this.dummyHead=new ad(t),this.last=this.dummyHead,this.nodeMapByIndex=new xu,this.nodeMapByCreatedAt=new Map,this.nodeMapByIndex.insert(this.dummyHead),this.nodeMapByCreatedAt.set(this.dummyHead.getCreatedAt().toIDString(),this.dummyHead)}static create(){return new Tu}get length(){return this.nodeMapByIndex.length}findNextBeforeExecutedAt(t,e){let i=this.nodeMapByCreatedAt.get(t.toIDString());if(!i)throw new X($.ErrInvalidArgument,`cant find the given node: ${t.toIDString()}`);for(;i.getNext()&&i.getNext().getPositionedAt().after(e);)i=i.getNext();return i}release(t){this.last===t&&(this.last=t.getPrev()),t.release(),this.nodeMapByIndex.delete(t),this.nodeMapByCreatedAt.delete(t.getValue().getCreatedAt().toIDString())}insertAfter(t,e,i=e.getCreatedAt()){const a=this.findNextBeforeExecutedAt(t,i),u=ad.createAfter(a,e);a===this.last&&(this.last=u),this.nodeMapByIndex.insertAfter(a,u),this.nodeMapByCreatedAt.set(u.getCreatedAt().toIDString(),u)}moveAfter(t,e,i){const a=this.nodeMapByCreatedAt.get(t.toIDString());if(!a)throw new X($.ErrInvalidArgument,`cant find the given node: ${t.toIDString()}`);const u=this.nodeMapByCreatedAt.get(e.toIDString());if(!u)throw new X($.ErrInvalidArgument,`cant find the given node: ${e.toIDString()}`);a!==u&&(!u.getValue().getMovedAt()||i.after(u.getValue().getMovedAt()))&&(this.release(u),this.insertAfter(a.getCreatedAt(),u.getValue(),i),u.getValue().setMovedAt(i))}insert(t){this.insertAfter(this.last.getCreatedAt(),t)}getByID(t){return this.nodeMapByCreatedAt.get(t.toIDString())}subPathOf(t){const e=this.nodeMapByCreatedAt.get(t.toIDString());if(e)return String(this.nodeMapByIndex.indexOf(e))}purge(t){const e=this.nodeMapByCreatedAt.get(t.getCreatedAt().toIDString());if(!e)throw new X($.ErrInvalidArgument,`fail to find the given createdAt: ${t.getCreatedAt().toIDString()}`);this.release(e)}getByIndex(t){if(t>=this.length)return;const[e,i]=this.nodeMapByIndex.find(t);let a=e;if(t===0&&e===this.dummyHead||i>0)do a&&(a=a.getNext());while(a&&a.isRemoved());return a}getPrevCreatedAt(t){let e=this.nodeMapByCreatedAt.get(t.toIDString());do e=e.getPrev();while(this.dummyHead!==e&&e.isRemoved());return e.getValue().getCreatedAt()}delete(t,e){const i=this.nodeMapByCreatedAt.get(t.toIDString()),a=i.isRemoved();return i.remove(e)&&!a&&this.nodeMapByIndex.splayNode(i),i.getValue()}deleteByIndex(t,e){const i=this.getByIndex(t);if(i)return i.remove(e)&&this.nodeMapByIndex.splayNode(i),i.getValue()}getHead(){return this.dummyHead.getValue()}getLast(){return this.last.getValue()}getLastCreatedAt(){return this.last.getCreatedAt()}toTestString(){const t=[];for(const e of this){const i=`${e.getCreatedAt().toIDString()}:${e.getValue().toJSON()}`;e.isRemoved()?t.push(`{${i}}`):t.push(`[${i}]`)}return t.join("")}*[Symbol.iterator](){let t=this.dummyHead.getNext();for(;t;)yield t,t=t.getNext()}}class hn extends Vs{constructor(e,i){super(e);v(this,"elements");this.elements=i}static create(e,i){if(!i)return new hn(e,Tu.create());const a=Tu.create();for(const u of i)a.insertAfter(a.getLastCreatedAt(),u.deepcopy());return new hn(e,a)}subPathOf(e){return this.elements.subPathOf(e)}purge(e){this.elements.purge(e)}insertAfter(e,i){this.elements.insertAfter(e,i)}moveAfter(e,i,a){this.elements.moveAfter(e,i,a)}get(e){const i=this.elements.getByIndex(e);return i==null?void 0:i.getValue()}getByID(e){const i=this.elements.getByID(e);return i==null?void 0:i.getValue()}getHead(){return this.elements.getHead()}getLast(){return this.elements.getLast()}getPrevCreatedAt(e){return this.elements.getPrevCreatedAt(e)}delete(e,i){return this.elements.delete(e,i)}deleteByIndex(e,i){return this.elements.deleteByIndex(e,i)}getLastCreatedAt(){return this.elements.getLastCreatedAt()}get length(){return this.elements.length}*[Symbol.iterator](){for(const e of this.elements)e.isRemoved()||(yield e.getValue())}toTestString(){return this.elements.toTestString()}getDescendants(e){for(const i of this.elements){const a=i.getValue();if(e(a,this))return;a instanceof Vs&&a.getDescendants(e)}}getDataSize(){return{data:0,meta:this.getMetaUsage()}}toJSON(){const e=[];for(const i of this)e.push(i.toJSON());return`[${e.join(",")}]`}toJS(){return JSON.parse(this.toJSON())}toJSForTest(){const e={};for(let i=0;i<this.length;i++){const{createdAt:a,value:u,type:c}=this.get(i).toJSForTest();e[i]={key:String(i),createdAt:a,value:u,type:c}}return{createdAt:this.getCreatedAt().toTestString(),value:e,type:"YORKIE_ARRAY"}}toSortedJSON(){return this.toJSON()}getElements(){return this.elements}deepcopy(){const e=hn.create(this.getCreatedAt());for(const i of this.elements)e.elements.insertAfter(e.getLastCreatedAt(),i.getValue().deepcopy());return e.remove(this.getRemovedAt()),e}}class Xs extends Qn{constructor(e,i,a){super(e,a);v(this,"createdAt");this.createdAt=i}static create(e,i,a){return new Xs(e,i,a)}execute(e,i){var g;const a=e.findByCreatedAt(this.getParentCreatedAt());if(!a)throw new X($.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(a instanceof Vs))throw new X($.ErrInvalidArgument,`only object and array can execute remove: ${a}`);if(i===te.UndoRedo){let y=a.getByID(this.createdAt);for(;y;){if(y.getRemovedAt())return;y=(g=e.findElementPairByCreatedAt(y.getCreatedAt()))==null?void 0:g.parent}}const u=a.subPathOf(this.createdAt),c=this.toReverseOperation(a),d=a.delete(this.createdAt,this.getExecutedAt());return e.registerRemovedElement(d),{opInfos:a instanceof hn?[{type:"remove",path:e.createPath(this.getParentCreatedAt()),index:Number(u)}]:[{type:"remove",path:e.createPath(this.getParentCreatedAt()),key:u}],reverseOp:c}}toReverseOperation(e){if(e instanceof We){const i=e.subPathOf(this.createdAt);if(i!==void 0){const a=e.get(i);if(a!==void 0)return ka.create(i,a.deepcopy(),this.getParentCreatedAt())}}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.REMOVE.${this.createdAt.toTestString()}`}getCreatedAt(){return this.createdAt}}class ka extends Qn{constructor(e,i,a,u){super(a,u);v(this,"key");v(this,"value");this.key=e,this.value=i}static create(e,i,a,u){return new ka(e,i,a,u)}execute(e,i){var g;const a=e.findByCreatedAt(this.getParentCreatedAt());if(!a)throw new X($.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(a instanceof We))throw new X($.ErrInvalidArgument,"fail to execute, only object can execute set");if(i===te.UndoRedo){let y=a;for(;y;){if(y.getRemovedAt())return;y=(g=e.findElementPairByCreatedAt(y.getCreatedAt()))==null?void 0:g.parent}}const u=a.get(this.key),c=this.toReverseOperation(u),d=this.value.deepcopy(),h=a.set(this.key,d,this.getExecutedAt());return i===te.UndoRedo&&e.findByCreatedAt(d.getCreatedAt())&&e.deregisterElement(d),e.registerElement(d,a),h&&e.registerRemovedElement(h),{opInfos:[{type:"set",path:e.createPath(this.getParentCreatedAt()),key:this.key}],reverseOp:c}}toReverseOperation(e){let i=Xs.create(this.getParentCreatedAt(),this.value.getCreatedAt());return e!==void 0&&!e.isRemoved()&&(i=ka.create(this.key,e.deepcopy(),this.getParentCreatedAt())),i}getEffectedCreatedAt(){return this.value.getCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.SET.${this.key}=${this.value.toSortedJSON()}`}getKey(){return this.key}getValue(){return this.value}}class qu extends Qn{constructor(e,i,a,u){super(e,u);v(this,"prevCreatedAt");v(this,"value");this.prevCreatedAt=i,this.value=a}static create(e,i,a,u){return new qu(e,i,a,u)}execute(e){const i=e.findByCreatedAt(this.getParentCreatedAt());if(!i)throw new X($.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(i instanceof hn))throw new X($.ErrInvalidArgument,"fail to execute, only array can execute add");const a=i,u=this.value.deepcopy();return a.insertAfter(this.prevCreatedAt,u),e.registerElement(u,a),{opInfos:[{type:"add",path:e.createPath(this.getParentCreatedAt()),index:Number(a.subPathOf(this.getEffectedCreatedAt()))}]}}getEffectedCreatedAt(){return this.value.getCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.ADD.${this.value.toJSON()}`}getPrevCreatedAt(){return this.prevCreatedAt}getValue(){return this.value}}class Js extends Qn{constructor(e,i,a,u){super(e,u);v(this,"prevCreatedAt");v(this,"createdAt");this.prevCreatedAt=i,this.createdAt=a}static create(e,i,a,u){return new Js(e,i,a,u)}execute(e){const i=e.findByCreatedAt(this.getParentCreatedAt());if(!i)throw new X($.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(i instanceof hn))throw new X($.ErrInvalidArgument,"fail to execute, only array can execute move");const a=i,u=Number(a.subPathOf(this.createdAt));a.moveAfter(this.prevCreatedAt,this.createdAt,this.getExecutedAt());const c=Number(a.subPathOf(this.createdAt));return{opInfos:[{type:"move",path:e.createPath(this.getParentCreatedAt()),index:c,previousIndex:u}]}}getEffectedCreatedAt(){return this.createdAt}toTestString(){return`${this.getParentCreatedAt().toTestString()}.MOVE`}getPrevCreatedAt(){return this.prevCreatedAt}getCreatedAt(){return this.createdAt}}class Sa{constructor(t,e,i,a){v(this,"key");v(this,"value");v(this,"updatedAt");v(this,"_isRemoved");this.key=t,this.value=e,this.updatedAt=i,this._isRemoved=a}static of(t,e,i,a){return new Sa(t,e,i,a)}getKey(){return this.key}getValue(){return this.value}getUpdatedAt(){return this.updatedAt}isRemoved(){return this._isRemoved}toIDString(){return`${this.updatedAt.toIDString()}:${this.key}`}getRemovedAt(){if(this._isRemoved)return this.updatedAt}getDataSize(){return{data:(this.key.length+this.value.length)*2,meta:$s}}}class Wi{constructor(){v(this,"nodeMapByKey");v(this,"numberOfRemovedElement");this.nodeMapByKey=new Map,this.numberOfRemovedElement=0}static create(){return new Wi}getNodeMapByKey(){return this.nodeMapByKey}set(t,e,i){const a=this.nodeMapByKey.get(t);if(a&&a.isRemoved()&&i.after(a.getUpdatedAt())&&(this.numberOfRemovedElement-=1),a===void 0||i.after(a.getUpdatedAt())){const u=Sa.of(t,e,i,!1);return this.nodeMapByKey.set(t,u),a!==void 0&&a.isRemoved()?[a,u]:[void 0,u]}return a.isRemoved()?[a,void 0]:[void 0,void 0]}setInternal(t,e,i,a){const u=Sa.of(t,e,i,a);this.nodeMapByKey.set(t,u),a&&this.numberOfRemovedElement++}remove(t,e){const i=this.nodeMapByKey.get(t),a=[];if(i===void 0||e.after(i.getUpdatedAt())){if(i===void 0){this.numberOfRemovedElement+=1;const d=Sa.of(t,"",e,!0);return this.nodeMapByKey.set(t,d),a.push(d),a}const u=i.isRemoved();u||(this.numberOfRemovedElement+=1),u&&a.push(i);const c=Sa.of(t,i.getValue(),e,!0);return this.nodeMapByKey.set(t,c),a.push(c),a}return a}has(t){if(this.nodeMapByKey.has(t)){const e=this.nodeMapByKey.get(t);return e!==void 0&&!e.isRemoved()}return!1}get(t){if(this.nodeMapByKey.has(t))return this.nodeMapByKey.get(t).getValue()}deepcopy(){const t=new Wi;for(const[,e]of this.nodeMapByKey)t.setInternal(e.getKey(),e.getValue(),e.getUpdatedAt(),e.isRemoved());return t}toJSON(){if(!this.size())return"{}";const t=[];for(const[e,i]of this.nodeMapByKey)i.isRemoved()||t.push(`"${vr(e)}":"${vr(i.getValue())}"`);return`{${t.join(",")}}`}size(){return this.nodeMapByKey.size-this.numberOfRemovedElement}toObject(){const t={};for(const[e,i]of this.nodeMapByKey)i.isRemoved()||(t[e]=i.getValue());return t}*[Symbol.iterator](){for(const[,t]of this.nodeMapByKey)yield t}purge(t){const e=this.nodeMapByKey.get(t.getKey());e==null||e.toIDString()!=t.toIDString()||(this.nodeMapByKey.delete(t.getKey()),this.numberOfRemovedElement--)}}function Vn(n){if(n instanceof Map){const t=Array.from(n);return new Map(JSON.parse(JSON.stringify(t)))}return JSON.parse(JSON.stringify(n))}const vS=n=>n?Object.entries(n).length===0:!0,Po=n=>{const t={};for(const[e,i]of Object.entries(n))t[e]=JSON.stringify(i);return t},Ki=n=>{const t={};for(const[e,i]of Object.entries(n))t[e]=JSON.parse(i);return t};class Au{constructor(t){v(this,"attributes");v(this,"content");this.attributes=Wi.create(),this.content=t}static create(t){return new Au(t)}get length(){return this.content.length}substring(t,e){const i=new Au(this.content.substring(t,e));return i.attributes=this.attributes.deepcopy(),i}setAttr(t,e,i){return this.attributes.set(t,e,i)}getAttrs(){return this.attributes}toString(){return this.content}getDataSize(){const t={data:0,meta:0};t.data+=this.content.length*2;for(const e of this.attributes){const i=e.getDataSize();t.meta+=i.meta,t.data+=i.data}return t}toJSON(){const t=vr(this.content),e=this.attributes.toObject(),i=[];for(const[a,u]of Object.entries(e)){const c=JSON.parse(u),d=typeof c=="string"?`"${vr(a)}":"${vr(c)}"`:`"${vr(a)}":${String(c)}`;i.push(d)}return i.sort(),i.length===0?`{"val":"${t}"}`:`{"attrs":{${i.join(",")}},"val":"${t}"}`}getAttributes(){return this.attributes.toObject()}getContent(){return this.content}purge(t){this.attributes&&t instanceof Sa&&this.attributes.purge(t)}getGCPairs(){const t=[];for(const e of this.attributes)e.getRemovedAt()&&t.push({parent:this,child:e});return t}}class Ln extends Uu{constructor(e,i){super(i);v(this,"rgaTreeSplit");this.rgaTreeSplit=e}static create(e,i){return new Ln(e,i)}edit(e,i,a,u,c){const d=i?Au.create(i):void 0;if(d&&u)for(const[p,b]of Object.entries(u))d.setAttr(p,b,a);const[h,g,y]=this.rgaTreeSplit.edit(e,a,d,c);return[y.map(p=>({...p,value:p.value?{attributes:Ki(p.value.getAttributes()),content:p.value.getContent()}:{attributes:void 0,content:""},type:"content"})),g,[h,h]]}setStyle(e,i,a,u){const[,c]=this.rgaTreeSplit.findNodeWithSplit(e[1],a),[,d]=this.rgaTreeSplit.findNodeWithSplit(e[0],a),h=[],g=this.rgaTreeSplit.findBetween(d,c),y=[];for(const p of g){const b=p.getCreatedAt().getActorID();let x=du;u!=null&&(x=u.get(b)?u.get(b):0n),p.canStyle(a,x)&&y.push(p)}const w=[];for(const p of y){if(p.isRemoved())continue;const[b,x]=this.rgaTreeSplit.findIndexesFromRange(p.createPosRange());h.push({type:"style",actor:a.getActorID(),from:b,to:x,value:{attributes:Ki(i)}});for(const[C,I]of Object.entries(i)){const[O]=p.getValue().setAttr(C,I,a);O!==void 0&&w.push({parent:p.getValue(),child:O})}}return[w,h]}indexRangeToPosRange(e,i){const a=this.rgaTreeSplit.indexToPos(e);return e===i?[a,a]:[a,this.rgaTreeSplit.indexToPos(i)]}get length(){return this.rgaTreeSplit.length}getTreeByIndex(){return this.rgaTreeSplit.getTreeByIndex()}getTreeByID(){return this.rgaTreeSplit.getTreeByID()}getDataSize(){const e={data:0,meta:0};for(const i of this.rgaTreeSplit){if(i.isRemoved())continue;const a=i.getDataSize();e.data+=a.data,e.meta+=a.meta}return{data:e.data,meta:e.meta+this.getMetaUsage()}}toJSON(){const e=[];for(const i of this.rgaTreeSplit)i.isRemoved()||e.push(i.getValue().toJSON());return`[${e.join(",")}]`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:JSON.parse(this.toJSON()),type:"YORKIE_TEXT"}}toString(){return this.rgaTreeSplit.toString()}values(){const e=[];for(const i of this.rgaTreeSplit)if(!i.isRemoved()){const a=i.getValue();e.push({attributes:Ki(a.getAttributes()),content:a.getContent()})}return e}getRGATreeSplit(){return this.rgaTreeSplit}toTestString(){return this.rgaTreeSplit.toTestString()}deepcopy(){const e=new Ln(this.rgaTreeSplit.deepcopy(),this.getCreatedAt());return e.remove(this.getRemovedAt()),e}findIndexesFromRange(e){return this.rgaTreeSplit.findIndexesFromRange(e)}getGCPairs(){const e=[];for(const i of this.rgaTreeSplit){i.getRemovedAt()&&e.push({parent:this.rgaTreeSplit,child:i});for(const a of i.getValue().getGCPairs())e.push(a)}return e}}class Pu extends Qn{constructor(e,i,a,u,c,d){super(e,d);v(this,"fromPos");v(this,"toPos");v(this,"content");v(this,"attributes");this.fromPos=i,this.toPos=a,this.content=u,this.attributes=c}static create(e,i,a,u,c,d){return new Pu(e,i,a,u,c,d)}execute(e,i,a){const u=e.findByCreatedAt(this.getParentCreatedAt());if(!u)throw new X($.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(u instanceof Ln))throw new X($.ErrInvalidArgument,"fail to execute, only Text can execute edit");const c=u,[d,h]=c.edit([this.fromPos,this.toPos],this.content,this.getExecutedAt(),Object.fromEntries(this.attributes),a);for(const g of h)e.registerGCPair(g);return{opInfos:d.map(({from:g,to:y,value:w})=>({type:"edit",from:g,to:y,value:w,path:e.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),i=this.fromPos.toTestString(),a=this.toPos.toTestString(),u=this.content;return`${e}.EDIT(${i},${a},${u})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getContent(){return this.content}getAttributes(){return this.attributes||new Map}}class Ju extends Qn{constructor(e,i,a,u,c){super(e,c);v(this,"fromPos");v(this,"toPos");v(this,"attributes");this.fromPos=i,this.toPos=a,this.attributes=u}static create(e,i,a,u,c){return new Ju(e,i,a,u,c)}execute(e,i,a){const u=e.findByCreatedAt(this.getParentCreatedAt());if(!u)throw new X($.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(u instanceof Ln))throw new X($.ErrInvalidArgument,"fail to execute, only Text can execute edit");const c=u,[d,h]=c.setStyle([this.fromPos,this.toPos],this.attributes?Object.fromEntries(this.attributes):{},this.getExecutedAt(),a);for(const g of d)e.registerGCPair(g);return{opInfos:h.map(({from:g,to:y,value:w})=>({type:"style",from:g,to:y,value:w,path:e.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),i=this.fromPos.toTestString(),a=this.toPos.toTestString(),u=this.attributes;return`${e}.STYL(${i},${a},${JSON.stringify(u)})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getAttributes(){return this.attributes}}const A2=2,E2="root",wr="text";function ru(n,t){let e=0;const i=n.children;for(let a=0;a<t;a++){const u=i[a];!u||u.isRemoved||(e+=u.paddedSize)}return e}class N2{constructor(t,e=[]){v(this,"type");v(this,"parent");v(this,"_children");v(this,"size");if(this.type=t,this.size=0,this._children=e,this.isText&&this._children.length>0)throw new X($.ErrRefused,"Text node cannot have children")}updateAncestorsSize(){let t=this.parent;const e=this.isRemoved?-1:1;for(;t&&(t.size+=this.paddedSize*e,!t.isRemoved);)t=t.parent}updateDescendantsSize(){let t=0;for(const e of this._children){const i=e.updateDescendantsSize();e.isRemoved||(t+=i)}return this.size+=t,this.paddedSize}get isText(){return this.type===wr}get paddedSize(){return this.size+(this.isText?0:A2)}isAncestorOf(t){return C2(this,t)}get nextSibling(){const t=this.parent.findOffset(this),e=this.parent.children[t+1];if(e)return e}get prevSibling(){const t=this.parent.findOffset(this),e=this.parent.children[t-1];if(e)return e}splitText(t,e){if(t===0||t===this.size)return;const i=this.value.slice(0,t),a=this.value.slice(t);if(!a.length)return;this.value=i;const u=this.cloneText(t+e);return u.value=a,this.parent.insertAfterInternal(u,this),u}get children(){return this._children.filter(t=>!t.isRemoved)}get allChildren(){return[...this._children]}hasTextChild(){return this.children.length>0&&this.children.every(t=>t.isText)}getChildrenText(){return this.isText?this.value:this.hasTextChild()?this.children.map(t=>t.value).join(""):""}append(...t){if(this.isText)throw new X($.ErrRefused,"Text node cannot have children");this._children.push(...t);for(const e of t)e.parent=this,e.updateAncestorsSize()}prepend(...t){if(this.isText)throw new X($.ErrRefused,"Text node cannot have children");this._children.unshift(...t);for(const e of t)e.parent=this}insertBefore(t,e){if(this.isText)throw new X($.ErrRefused,"Text node cannot have children");const i=this._children.indexOf(e);if(i===-1)throw new X($.ErrInvalidArgument,"child not found");this.insertAtInternal(t,i),t.updateAncestorsSize()}insertAfter(t,e){if(this.isText)throw new X($.ErrRefused,"Text node cannot have children");const i=this._children.indexOf(e);if(i===-1)throw new X($.ErrInvalidArgument,"child not found");this.insertAtInternal(t,i+1),t.updateAncestorsSize()}insertAt(t,e){if(this.isText)throw new X($.ErrRefused,"Text node cannot have children");this.insertAtInternal(t,e),t.updateAncestorsSize()}removeChild(t){if(this.isText)throw new X($.ErrRefused,"Text node cannot have children");const e=this._children.indexOf(t);if(e===-1)throw new X($.ErrInvalidArgument,"child not found");this._children.splice(e,1),t.parent=void 0}splitElement(t,e){const i=this.cloneElement(e);this.parent.insertAfterInternal(i,this),i.updateAncestorsSize();const a=this.children.slice(0,t),u=this.children.slice(t);this._children=a,i._children=u,this.size=this._children.reduce((c,d)=>c+d.paddedSize,0),i.size=i._children.reduce((c,d)=>c+d.paddedSize,0);for(const c of i._children)c.parent=i;return i}insertAfterInternal(t,e){if(this.isText)throw new X($.ErrRefused,"Text node cannot have children");const i=this._children.indexOf(e);if(i===-1)throw new X($.ErrInvalidArgument,"child not found");this.insertAtInternal(t,i+1)}insertAtInternal(t,e){if(this.isText)throw new X($.ErrRefused,"Text node cannot have children");this._children.splice(e,0,t),t.parent=this}findOffset(t){if(this.isText)throw new X($.ErrRefused,"Text node cannot have children");if(t.isRemoved){const e=this._children.indexOf(t);return this.allChildren.splice(0,e).filter(a=>!a.isRemoved).length}return this.children.indexOf(t)}findBranchOffset(t){if(this.isText)throw new X($.ErrRefused,"Text node cannot have children");let e=t;for(;e;){const i=this._children.indexOf(e);if(i!==-1)return i;e=e.parent}return-1}}function C2(n,t){if(n===t)return!1;for(;t.parent;){if(t.parent===n)return!0;t=t.parent}return!1}var we=(n=>(n.Start="Start",n.End="End",n.Text="Text",n))(we||{});function wS(n,t,e,i){if(t>e)throw new X($.ErrInvalidArgument,`from is greater than to: ${t} > ${e}`);if(t>n.size)throw new X($.ErrInvalidArgument,`from is out of range: ${t} > ${n.size}`);if(e>n.size)throw new X($.ErrInvalidArgument,`to is out of range: ${e} > ${n.size}`);if(t===e)return;let a=0;for(const u of n.children){if(t-u.paddedSize<a&&a<e){const c=u.isText?t-a:t-a-1,d=u.isText?e-a:e-a-1,h=!u.isText&&c<0,g=!u.isText&&d>u.size;(u.isText||h)&&i([u,u.isText?"Text":"Start"],g),wS(u,Math.max(0,c),Math.min(d,u.size),i),g&&i([u,"End"],g)}a+=u.paddedSize}}function bS(n,t,e=0){for(const i of n.children)bS(i,t,e+1);t(n,e)}function Nd(n,t,e=0){for(const i of n._children)Nd(i,t,e+1);t(n,e)}function ty(n,t,e=!0){if(t>n.size)throw new X($.ErrInvalidArgument,`index is out of range: ${t} > ${n.size}`);if(n.isText)return{node:n,offset:t};let i=0,a=0;for(const u of n.children){if(e&&u.isText&&u.size>=t-a)return ty(u,t-a,e);if(t===a)return{node:n,offset:i};if(!e&&u.paddedSize===t-a)return{node:n,offset:i+1};if(u.paddedSize>t-a)return ty(u,t-a-1,e);a+=u.paddedSize,i+=1}return{node:n,offset:i}}function SS(n){return n.isText||n.children.length===0?n:SS(n.children[0])}function D2(n,t){if(n.size<t)throw new X($.ErrInvalidArgument,"unacceptable path");for(let e=0;e<n.children.length;e++){const i=n.children[e];if(i.size<t)t-=i.size;else{n=i;break}}return{node:n,offset:t}}class k2{constructor(t){v(this,"root");this.root=t}tokensBetween(t,e,i){wS(this.root,t,e,i)}traverse(t){bS(this.root,t,0)}traverseAll(t){Nd(this.root,t,0)}findTreePos(t,e=!0){return ty(this.root,t,e)}treePosToPath(t){const e=[];let i=t.node;if(i.isText){const a=i.parent.findOffset(i);if(a===-1)throw new X($.ErrInvalidArgument,"invalid treePos");const u=ru(i.parent,a);e.push(u+t.offset),i=i.parent}else if(i.hasTextChild()){const a=ru(i,t.offset);e.push(a)}else e.push(t.offset);for(;i.parent;){const a=i.parent.findOffset(i);if(a===-1)throw new X($.ErrInvalidArgument,"invalid treePos");e.push(a),i=i.parent}return e.reverse()}pathToIndex(t){const e=this.pathToTreePos(t);return this.indexOf(e)}pathToTreePos(t){if(!t.length)throw new X($.ErrInvalidArgument,"unacceptable path");let e=this.root;for(let i=0;i<t.length-1;i++){const a=t[i];if(e=e.children[a],!e)throw new X($.ErrInvalidArgument,"unacceptable path")}if(e.hasTextChild())return D2(e,t[t.length-1]);if(e.children.length<t[t.length-1])throw new X($.ErrInvalidArgument,"unacceptable path");return{node:e,offset:t[t.length-1]}}getRoot(){return this.root}get size(){return this.root.size}findPostorderRight(t){const{node:e,offset:i}=t;if(e.isText){if(e.size===i){const a=e.nextSibling;return a||e.parent}return e}return e.children.length===i?e:SS(e.children[i])}indexOf(t){let{node:e}=t;const{offset:i}=t;let a=0,u=1;if(e.isText){a+=i;const c=e.parent,d=c.findOffset(e);if(d===-1)throw new X($.ErrInvalidArgument,"invalid pos");a+=ru(c,d),e=e.parent}else a+=ru(e,i);for(;e!=null&&e.parent;){const c=e.parent,d=c.findOffset(e);if(d===-1)throw new X($.ErrInvalidArgument,"invalid pos");a+=ru(c,d),u++,e=e.parent}return a+u-1}indexToPath(t){const e=this.findTreePos(t);return this.treePosToPath(e)}}const O2=(n,t)=>n===t?0:n<t?-1:1;class I2{constructor(t,e,i){v(this,"key");v(this,"value");v(this,"parent");v(this,"left");v(this,"right");v(this,"isRed");this.key=t,this.value=e,this.isRed=i}}class R2{constructor(t){v(this,"stack");this.stack=[],this.traverseInorder(t)}traverseInorder(t){t&&(this.traverseInorder(t.left),this.stack.push({key:t.key,value:t.value}),this.traverseInorder(t.right))}}class xS{constructor(t){v(this,"root");v(this,"comparator");v(this,"counter");this.comparator=typeof t<"u"?t:O2,this.counter=0}put(t,e){return this.root=this.putInternal(t,e,this.root),this.root.isRed=!1,e}get(t){const e=this.getInternal(t,this.root);return e?e.value:void 0}remove(t){!this.isRed(this.root.left)&&!this.isRed(this.root.right)&&(this.root.isRed=!0),this.root=this.removeInternal(this.root,t),this.root&&(this.root.isRed=!1)}getIterator(){return new R2(this.root)}values(){const t=[];for(const e of this.getIterator().stack)t.push(e.value);return t}floorEntry(t){let e=this.root;for(;e;){const i=this.comparator(t,e.key);if(i>0)if(e.right)e.right.parent=e,e=e.right;else return e;else if(i<0)if(e.left)e.left.parent=e,e=e.left;else{let a=e.parent,u=e;for(;a&&u===a.left;)u=a,a=a.parent;return a}else return e}}lastEntry(){if(!this.root)return this.root;let t=this.root;for(;t.right;)t=t.right;return t}size(){return this.counter}isEmpty(){return this.counter===0}getInternal(t,e){for(;e;){const i=this.comparator(t,e.key);if(i===0)return e;i<0?e=e.left:i>0&&(e=e.right)}}putInternal(t,e,i){if(!i)return this.counter+=1,new I2(t,e,!0);const a=this.comparator(t,i.key);return a<0?i.left=this.putInternal(t,e,i.left):a>0?i.right=this.putInternal(t,e,i.right):i.value=e,this.isRed(i.right)&&!this.isRed(i.left)&&(i=this.rotateLeft(i)),this.isRed(i.left)&&this.isRed(i.left.left)&&(i=this.rotateRight(i)),this.isRed(i.left)&&this.isRed(i.right)&&this.flipColors(i),i}removeInternal(t,e){if(this.comparator(e,t.key)<0)!this.isRed(t.left)&&!this.isRed(t.left.left)&&(t=this.moveRedLeft(t)),t.left=this.removeInternal(t.left,e);else{if(this.isRed(t.left)&&(t=this.rotateRight(t)),this.comparator(e,t.key)===0&&!t.right){this.counter-=1;return}if(!this.isRed(t.right)&&!this.isRed(t.right.left)&&(t=this.moveRedRight(t)),this.comparator(e,t.key)===0){this.counter-=1;const i=this.min(t.right);t.value=i.value,t.key=i.key,t.right=this.removeMin(t.right)}else t.right=this.removeInternal(t.right,e)}return this.fixUp(t)}min(t){return t.left?this.min(t.left):t}removeMin(t){if(t.left)return!this.isRed(t.left)&&!this.isRed(t.left.left)&&(t=this.moveRedLeft(t)),t.left=this.removeMin(t.left),this.fixUp(t)}fixUp(t){return this.isRed(t.right)&&(t=this.rotateLeft(t)),this.isRed(t.left)&&this.isRed(t.left.left)&&(t=this.rotateRight(t)),this.isRed(t.left)&&this.isRed(t.right)&&this.flipColors(t),t}moveRedLeft(t){return this.flipColors(t),this.isRed(t.right.left)&&(t.right=this.rotateRight(t.right),t=this.rotateLeft(t),this.flipColors(t)),t}moveRedRight(t){return this.flipColors(t),this.isRed(t.left.left)&&(t=this.rotateRight(t),this.flipColors(t)),t}isRed(t){return t&&t.isRed}rotateLeft(t){const e=t.right;return t.right=e.left,e.left=t,e.isRed=e.left.isRed,e.left.isRed=!0,e}rotateRight(t){const e=t.left;return t.left=e.right,e.right=t,e.isRed=e.right.isRed,e.right.isRed=!0,e}flipColors(t){t.isRed=!t.isRed,t.left.isRed=!t.left.isRed,t.right.isRed=!t.right.isRed}}class Kn{constructor(t,e){v(this,"parentID");v(this,"leftSiblingID");this.parentID=t,this.leftSiblingID=e}static of(t,e){return new Kn(t,e)}static fromTreePos(t){const{offset:e}=t;let{node:i}=t,a;return i.isText?(i.parent.children[0]===i&&e===0?a=i.parent:a=i,i=i.parent):e===0?a=i:a=i.children[e-1],Kn.of(i.id,Le.of(a.getCreatedAt(),a.getOffset()+e))}getParentID(){return this.parentID}static fromStruct(t){return Kn.of(Le.of(zn.fromStruct(t.parentID.createdAt),t.parentID.offset),Le.of(zn.fromStruct(t.leftSiblingID.createdAt),t.leftSiblingID.offset))}toStruct(){return{parentID:{createdAt:this.getParentID().getCreatedAt().toStruct(),offset:this.getParentID().getOffset()},leftSiblingID:{createdAt:this.getLeftSiblingID().getCreatedAt().toStruct(),offset:this.getLeftSiblingID().getOffset()}}}toTreeNodePair(t){const e=this.getParentID(),i=this.getLeftSiblingID(),a=t.findFloorNode(e);let u=t.findFloorNode(i);if(!a||!u)throw new X($.ErrRefused,`cannot find node of CRDTTreePos(${e.toTestString()}, ${i.toTestString()})`);return!i.equals(e)&&i.getOffset()>0&&i.getOffset()===u.id.getOffset()&&u.insPrevID&&(u=t.findFloorNode(u.insPrevID)),[a,u]}getLeftSiblingID(){return this.leftSiblingID}equals(t){return this.getParentID().getCreatedAt().equals(t.getParentID().getCreatedAt())&&this.getParentID().getOffset()===t.getParentID().getOffset()&&this.getLeftSiblingID().getCreatedAt().equals(t.getLeftSiblingID().getCreatedAt())&&this.getLeftSiblingID().getOffset()===t.getLeftSiblingID().getOffset()}}class Le{constructor(t,e){v(this,"createdAt");v(this,"offset");this.createdAt=t,this.offset=e}static of(t,e){return new Le(t,e)}static fromStruct(t){return Le.of(zn.fromStruct(t.createdAt),t.offset)}static createComparator(){return(t,e)=>{const i=t.getCreatedAt().compare(e.getCreatedAt());return i!==0?i:t.getOffset()>e.getOffset()?1:t.getOffset()<e.getOffset()?-1:0}}getCreatedAt(){return this.createdAt}equals(t){return this.createdAt.compare(t.createdAt)===0&&this.offset===t.offset}getOffset(){return this.offset}setOffset(t){this.offset=t}toStruct(){return{createdAt:this.createdAt.toStruct(),offset:this.offset}}toIDString(){return`${this.createdAt.toIDString()}:${this.offset}`}toTestString(){return`${this.createdAt.toTestString()}/${this.offset}`}}class dn extends N2{constructor(e,i,a,u,c){super(i);v(this,"id");v(this,"removedAt");v(this,"attrs");v(this,"insPrevID");v(this,"insNextID");v(this,"_value","");this.id=e,this.removedAt=c,u&&(this.attrs=u),typeof a=="string"?this.value=a:Array.isArray(a)&&(this._children=a)}toIDString(){return this.id.toIDString()}getRemovedAt(){return this.removedAt}static create(e,i,a,u){return new dn(e,i,a,u)}deepcopy(){var i;const e=new dn(this.id,this.type);return e.removedAt=this.removedAt,e._value=this._value,e.size=this.size,e.attrs=(i=this.attrs)==null?void 0:i.deepcopy(),e._children=this._children.map(a=>{const u=a.deepcopy();return u.parent=e,u}),e.insPrevID=this.insPrevID,e.insNextID=this.insNextID,e}get value(){if(!this.isText)throw new X($.ErrInvalidType,`cannot get value of element node: ${this.type}`);return this._value}set value(e){if(!this.isText)throw new X($.ErrInvalidType,`cannot set value of element node: ${this.type}`);this._value=e,this.size=e.length}get isRemoved(){return!!this.removedAt}remove(e){const i=!this.removedAt;(!this.removedAt||this.removedAt.compare(e)>0)&&(this.removedAt=e),i&&this.updateAncestorsSize()}cloneText(e){return new dn(Le.of(this.id.getCreatedAt(),e),this.type,void 0,void 0,this.removedAt)}cloneElement(e){return new dn(Le.of(e(),0),this.type,void 0,void 0,this.removedAt)}split(e,i,a){const u=this.isText?this.splitText(i,this.id.getOffset()):this.splitElement(i,a);if(u){if(u.insPrevID=this.id,this.insNextID){const c=e.findFloorNode(this.insNextID);c.insPrevID=u.id,u.insNextID=this.insNextID}this.insNextID=u.id,e.registerNode(u)}return u}getCreatedAt(){return this.id.getCreatedAt()}getOffset(){return this.id.getOffset()}canDelete(e,i){return this.getCreatedAt().getLamport()<=i&&(!this.removedAt||e.after(this.removedAt))}canStyle(e,i){return this.isText?!1:this.getCreatedAt().getLamport()<=i&&(!this.removedAt||e.after(this.removedAt))}setAttrs(e,i){this.attrs||(this.attrs=new Wi);const a=[];for(const[u,c]of Object.entries(e))a.push(this.attrs.set(u,c,i));return a}purge(e){this.attrs&&this.attrs.purge(e)}getDataSize(){const e={data:0,meta:0};if(this.isText&&(e.data+=this.size*2),this.id&&(e.meta+=$s),this.removedAt&&(e.meta+=$s),this.attrs)for(const i of this.attrs){if(i.getRemovedAt())continue;const a=i.getDataSize();e.meta+=a.meta,e.data+=a.data}return e}getGCPairs(){const e=[];if(!this.attrs)return e;for(const i of this.attrs)i.getRemovedAt()&&e.push({parent:this,child:i});return e}}function ey(n){var e;if(n.isText){const i=n;return{type:i.type,value:i.value}}const t={type:n.type,children:n.children.map(ey)};return n.attrs&&(t.attributes=Ki((e=n.attrs)==null?void 0:e.toObject())),t}function Ty(n){if(n.isText)return n.value;let t="";return n.attrs&&n.attrs.size()&&(t=" "+Array.from(n.attrs).filter(e=>!e.isRemoved()).sort((e,i)=>e.getKey().localeCompare(i.getKey())).map(e=>{const i=JSON.parse(e.getValue());return typeof i=="string"?`${e.getKey()}="${i}"`:`${e.getKey()}="${vr(e.getValue())}"`}).join(" ")),`<${n.type}${t}>${n.children.map(e=>Ty(e)).join("")}</${n.type}>`}function TS(n){if(n.isText){const t=n;return{type:t.type,value:t.value,size:t.size,isRemoved:t.isRemoved}}return{type:n.type,children:n.children.map(TS),size:n.size,isRemoved:n.isRemoved}}class _n extends Uu{constructor(e,i){super(i);v(this,"indexTree");v(this,"nodeMapByID");this.indexTree=new k2(e),this.nodeMapByID=new xS(Le.createComparator()),this.indexTree.traverseAll(a=>{this.nodeMapByID.put(a.id,a)})}static create(e,i){return new _n(e,i)}findFloorNode(e){const i=this.nodeMapByID.floorEntry(e);if(!(!i||!i.key.getCreatedAt().equals(e.getCreatedAt())))return i.value}registerNode(e){this.nodeMapByID.put(e.id,e)}findNodesAndSplitText(e,i){const[a,u]=e.toTreeNodePair(this);let c=u;const d=a===c,h=c.parent&&!d?c.parent:a;if(c.isText&&c.split(this,e.getLeftSiblingID().getOffset()-c.id.getOffset()),i){const g=h.allChildren,y=d?0:g.indexOf(c)+1;for(let w=y;w<g.length;w++){const p=g[w];if(!p.id.getCreatedAt().after(i))break;c=p}}return[h,c]}style(e,i,a,u){const[c,d]=this.findNodesAndSplitText(e[0],a),[h,g]=this.findNodesAndSplitText(e[1],a),y=[],w=i?Ki(i):{},p=[];return this.traverseInPosRange(c,d,h,g,([b])=>{const x=b.getCreatedAt().getActorID();let C=du;if(u!=null&&(C=u.get(x)?u.get(x):0n),b.canStyle(a,C)&&i){const I=b.setAttrs(i,a),O=I.reduce((k,[,L])=>(L&&(k[L.getKey()]=w[L.getKey()]),k),{}),z=b.parent,E=b.prevSibling||b.parent;Object.keys(O).length>0&&y.push({type:"style",from:this.toIndex(z,E),to:this.toIndex(b,b),fromPath:this.toPath(z,E),toPath:this.toPath(b,b),actor:a.getActorID(),value:O});for(const[k]of I)k&&p.push({parent:b,child:k})}}),[p,y]}removeStyle(e,i,a,u){const[c,d]=this.findNodesAndSplitText(e[0],a),[h,g]=this.findNodesAndSplitText(e[1],a),y=[],w=[];return this.traverseInPosRange(c,d,h,g,([p])=>{const b=p.getCreatedAt().getActorID();let x=du;if(u!=null&&(x=u.get(b)?u.get(b):0n),p.canStyle(a,x)&&i){p.attrs||(p.attrs=new Wi);for(const O of i){const z=p.attrs.remove(O,a);for(const E of z)w.push({parent:p,child:E})}const C=p.parent,I=p.prevSibling||p.parent;y.push({actor:a.getActorID(),type:"removeStyle",from:this.toIndex(C,I),to:this.toIndex(p,p),fromPath:this.toPath(C,I),toPath:this.toPath(p,p),value:i})}}),[w,y]}edit(e,i,a,u,c,d){const[h,g]=this.findNodesAndSplitText(e[0],u),[y,w]=this.findNodesAndSplitText(e[1],u),p=this.toIndex(h,g),b=this.toPath(h,g),x=[],C=[],I=[];this.traverseInPosRange(h,g,y,w,([E,k],L)=>{if(k===we.Start&&!L)for(const tt of E.children)I.push(tt);const V=E.getCreatedAt().getActorID();let H=du;d!=null&&(H=d.get(V)?d.get(V):0n),(E.canDelete(u,H)||x.includes(E.parent))&&((k===we.Text||k===we.Start)&&x.push(E),C.push([E,k]))});const O=this.makeDeletionChanges(C,u),z=[];for(const E of x)E.remove(u),E.isRemoved&&z.push({parent:this,child:E});for(const E of I)E.removedAt||h.append(E);if(a>0){let E=0,k=h,L=g;for(;E<a;)k.split(this,k.findOffset(L)+1,c),L=k,k=k.parent,E++;O.push({type:"content",from:p,to:p,fromPath:b,toPath:b,actor:u.getActorID()})}if(i!=null&&i.length){const E=[];let k=g;for(const L of i)k===h?h.insertAt(L,0):h.insertAfter(L,k),k=L,Nd(L,V=>{h.isRemoved&&(V.remove(u),z.push({parent:this,child:V})),this.nodeMapByID.put(V.id,V)}),L.isRemoved||E.push(L);if(E.length){const L=E.map(V=>ey(V));O.length&&O[O.length-1].from===p?O[O.length-1].value=L:O.push({type:"content",from:p,to:p,fromPath:b,toPath:b,actor:u.getActorID(),value:L})}}return[O,z]}editT(e,i,a,u,c){const d=this.findPos(e[0]),h=this.findPos(e[1]);this.edit([d,h],i,a,u,c)}move(e,i,a){throw new X($.ErrUnimplemented,`not implemented: ${e}, ${i}, ${a}`)}pathToTreePos(e){return this.indexTree.pathToTreePos(e)}purge(e){var u;(u=e.parent)==null||u.removeChild(e),this.nodeMapByID.remove(e.id);const i=e.insPrevID,a=e.insNextID;if(i){const c=this.findFloorNode(i);c.insNextID=a}if(a){const c=this.findFloorNode(a);c.insPrevID=i}e.insPrevID=void 0,e.insNextID=void 0}getGCPairs(){const e=[];return this.indexTree.traverse(i=>{i.getRemovedAt()&&e.push({parent:this,child:i});for(const a of i.getGCPairs())e.push(a)}),e}findPos(e,i=!0){const a=this.indexTree.findTreePos(e,i);return Kn.fromTreePos(a)}pathToPosRange(e){const i=this.pathToIndex(e);return[this.findPos(i),this.findPos(i+1)]}pathToPos(e){const i=this.indexTree.pathToIndex(e);return this.findPos(i)}getRoot(){return this.indexTree.getRoot()}getSize(){return this.indexTree.size}getNodeSize(){return this.nodeMapByID.size()}getIndexTree(){return this.indexTree}toXML(){return Ty(this.indexTree.getRoot())}getDataSize(){const e={data:0,meta:0};return this.indexTree.traverse(i=>{if(i.getRemovedAt())return;const a=i.getDataSize();e.data+=a.data,e.meta+=a.meta}),{data:e.data,meta:e.meta+this.getMetaUsage()}}toJSON(){return JSON.stringify(this.getRootTreeNode())}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:JSON.parse(this.toJSON()),type:"YORKIE_TREE"}}toJSInfoForTest(){const e=this.indexTree.getRoot(),i=(a,u=void 0,c=void 0,d=0)=>{var b,x,C,I;let h,g,y;const w=a.isText?{node:a,offset:0}:u&&c?this.toTreePos(u,c):null;w&&(h=this.indexTree.indexOf(w),g=this.indexTree.treePosToPath(w),y=Kn.fromTreePos(w).toStruct());const p={type:a.type,parent:u==null?void 0:u.id.toTestString(),size:a.size,id:a.id.toTestString(),removedAt:(b=a.removedAt)==null?void 0:b.toTestString(),insPrev:(x=a.insPrevID)==null?void 0:x.toTestString(),insNext:(C=a.insNextID)==null?void 0:C.toTestString(),value:a.isText?a.value:void 0,isRemoved:a.isRemoved,children:[],depth:d,attributes:a.attrs?Ki((I=a.attrs)==null?void 0:I.toObject()):void 0,index:h,path:g,pos:y};for(let O=0;O<a.allChildren.length;O++){const z=O===0?a:a.allChildren[O-1];p.children.push(i(a.allChildren[O],a,z,d+1))}return p};return i(e)}getRootTreeNode(){return ey(this.indexTree.getRoot())}toTestTreeNode(){return TS(this.indexTree.getRoot())}toSortedJSON(){return this.toJSON()}deepcopy(){const e=this.getRoot();return new _n(e.deepcopy(),this.getCreatedAt())}toPath(e,i){const a=this.toTreePos(e,i);return a?this.indexTree.treePosToPath(a):[]}toIndex(e,i){const a=this.toTreePos(e,i);return a?this.indexTree.indexOf(a):-1}indexToPath(e){return this.indexTree.indexToPath(e)}pathToIndex(e){return this.indexTree.pathToIndex(e)}indexRangeToPosRange(e){const i=this.findPos(e[0]);return e[0]===e[1]?[i,i]:[i,this.findPos(e[1])]}indexRangeToPosStructRange(e){const[i,a]=e,u=this.findPos(i);return i===a?[u.toStruct(),u.toStruct()]:[u.toStruct(),this.findPos(a).toStruct()]}posRangeToPathRange(e){const[i,a]=this.findNodesAndSplitText(e[0]),[u,c]=this.findNodesAndSplitText(e[1]);return[this.toPath(i,a),this.toPath(u,c)]}posRangeToIndexRange(e){const[i,a]=this.findNodesAndSplitText(e[0]),[u,c]=this.findNodesAndSplitText(e[1]);return[this.toIndex(i,a),this.toIndex(u,c)]}traverseInPosRange(e,i,a,u,c){const d=this.toIndex(e,i),h=this.toIndex(a,u);return this.indexTree.tokensBetween(d,h,c)}toTreePos(e,i){if(!e||!i)return;if(e.isRemoved){let u;for(;e.isRemoved;)u=e,e=u.parent;const c=e.findOffset(u);return{node:e,offset:c}}if(e===i)return{node:e,offset:0};let a=e.findOffset(i);if(!i.isRemoved){if(i.isText)return{node:i,offset:i.paddedSize};a++}return{node:e,offset:a}}makeDeletionChanges(e,i){const a=[],u=[];let c=null,d=null;for(let h=0;h<e.length;h++){const g=e[h],y=e[h+1];c||(c=g),d=g;const w=this.findRightToken(g);(!w||!y||w[0]!==y[0]||w[1]!==y[1])&&(u.push([c,d]),c=null,d=null)}for(const h of u){const[g,y]=h,[w,p]=this.findLeftToken(g),[b,x]=y,C=p===we.Start?w:w.parent,I=x===we.Start?b:b.parent,O=this.toIndex(C,w),z=this.toIndex(I,b);O<z&&(a.length>0&&O===a[a.length-1].to?(a[a.length-1].to=z,a[a.length-1].toPath=this.toPath(I,b)):a.push({type:"content",from:O,to:z,fromPath:this.toPath(C,w),toPath:this.toPath(I,b),actor:i.getActorID()}))}return a.reverse()}findRightToken([e,i]){if(i===we.Start){const h=e.allChildren;return h.length>0?[h[0],h[0].isText?we.Text:we.Start]:[e,we.End]}const a=e.parent,u=a.allChildren,c=u.indexOf(e);if(a&&c===u.length-1)return[a,we.End];const d=u[c+1];return[d,d.isText?we.Text:we.Start]}findLeftToken([e,i]){if(i===we.End){const h=e.allChildren;if(h.length>0){const g=h[h.length-1];return[g,g.isText?we.Text:we.End]}return[e,we.Start]}const a=e.parent,u=a.allChildren,c=u.indexOf(e);if(a&&c===0)return[a,we.Start];const d=u[c-1];return[d,d.isText?we.Text:we.End]}}class Hu extends Qn{constructor(e,i,a,u,c,d){super(e,d);v(this,"fromPos");v(this,"toPos");v(this,"contents");v(this,"splitLevel");this.fromPos=i,this.toPos=a,this.contents=u,this.splitLevel=c}static create(e,i,a,u,c,d){return new Hu(e,i,a,u,c,d)}execute(e,i,a){var y;const u=e.findByCreatedAt(this.getParentCreatedAt());if(!u)throw new X($.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(u instanceof _n))throw new X($.ErrInvalidArgument,"fail to execute, only Tree can execute edit");const c=this.getExecutedAt(),d=u,[h,g]=d.edit([this.fromPos,this.toPos],(y=this.contents)==null?void 0:y.map(w=>w.deepcopy()),this.splitLevel,c,(()=>{let w=c.getDelimiter();return this.contents!==void 0&&(w+=this.contents.length),()=>zn.of(c.getLamport(),++w,c.getActorID())})(),a);for(const w of g)e.registerGCPair(w);return{opInfos:h.map(({from:w,to:p,value:b,splitLevel:x,fromPath:C,toPath:I})=>({type:"tree-edit",path:e.createPath(this.getParentCreatedAt()),from:w,to:p,value:b,splitLevel:x,fromPath:C,toPath:I}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),i=`${this.fromPos.getLeftSiblingID().getCreatedAt().toTestString()}/${this.fromPos.getLeftSiblingID().getOffset()}`,a=`${this.toPos.getLeftSiblingID().getCreatedAt().toTestString()}/${this.toPos.getLeftSiblingID().getOffset()}`,u=this.contents||[];return`${e}.EDIT(${i},${a},${u.map(c=>Ty(c)).join("")})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getContents(){return this.contents}getSplitLevel(){return this.splitLevel}}class Oo{constructor(t){v(this,"vector");this.vector=t||new Map}set(t,e){this.vector.set(t,e)}unset(t){this.vector.delete(t)}get(t){return this.vector.get(t)}maxLamport(){let t=BigInt(0);for(const[,e]of this)e>t&&(t=e);return t}max(t){const e=new Map;for(const[i,a]of t){const u=this.vector.get(i),c=u&&u>a?u:a;e.set(i,c)}for(const[i,a]of this){const u=t.get(i),c=u&&u>a?u:a;e.set(i,c)}return new Oo(e)}afterOrEqual(t){const e=this.vector.get(t.getActorID());return e===void 0?!1:e>=t.getLamport()}deepcopy(){const t=new Map;for(const[e,i]of this.vector)t.set(e,i);return new Oo(t)}filter(t){const e=new Map;for(const[i]of t){const a=this.vector.get(i);a!==void 0&&e.set(i,a)}return new Oo(e)}size(){return this.vector.size}*[Symbol.iterator](){for(const[t,e]of this.vector)yield[t,e]}}const AS=new Oo(new Map);class jn{constructor(t,e,i,a,u){v(this,"clientSeq");v(this,"serverSeq");v(this,"actor");v(this,"lamport");v(this,"versionVector");this.clientSeq=t,this.serverSeq=u,this.lamport=e,this.versionVector=a,this.actor=i}hasClocks(){return this.versionVector.size()>0&&this.lamport!=Qm}static of(t,e,i,a,u){return new jn(t,e,i,a,u)}next(t=!1){if(t)return new jn(this.clientSeq+1,this.lamport,this.actor,AS,Qm);const e=this.versionVector.deepcopy();return e.set(this.actor,this.lamport+1n),new jn(this.clientSeq+1,this.lamport+1n,this.actor,e)}syncClocks(t){if(!t.hasClocks())return this;const e=t.lamport>this.lamport?t.lamport+1n:this.lamport+1n,i=this.versionVector.max(t.versionVector),a=new jn(this.clientSeq,e,this.actor,i);return a.versionVector.set(this.actor,e),a}setClocks(t,e){const i=t>this.lamport?t+1n:this.lamport+1n;e.unset(Ed);const a=this.versionVector.max(e);return a.set(this.actor,i),jn.of(this.clientSeq,i,this.actor,a)}createTimeTicket(t){return zn.of(this.lamport,t,this.actor)}setActor(t){return new jn(this.clientSeq,this.lamport,t,this.versionVector,this.serverSeq)}setLamport(t){return new jn(this.clientSeq,t,this.actor,this.versionVector,this.serverSeq)}setVersionVector(t){return new jn(this.clientSeq,this.lamport,this.actor,t,this.serverSeq)}getClientSeq(){return this.clientSeq}getServerSeq(){return this.serverSeq?this.serverSeq.toString():""}getLamport(){return this.lamport}getLamportAsString(){return this.lamport.toString()}getActorID(){return this.actor}getVersionVector(){return this.versionVector}toTestString(){return`${this.lamport.toString()}:${this.actor.slice(-2)}:${this.clientSeq}`}}const M2=new jn(0,0n,Ed,AS);class Jo{constructor({id:t,operations:e,presenceChange:i,message:a}){v(this,"id");v(this,"operations");v(this,"presenceChange");v(this,"message");this.id=t,this.operations=e||[],this.presenceChange=i,this.message=a}static create({id:t,operations:e,presenceChange:i,message:a}){return new Jo({id:t,operations:e,presenceChange:i,message:a})}getID(){return this.id}getMessage(){return this.message}hasOperations(){return this.operations.length>0}getOperations(){return this.operations}setActor(t){for(const e of this.operations)e.setActor(t);this.id=this.id.setActor(t)}hasPresenceChange(){return this.presenceChange!==void 0}getPresenceChange(){return this.presenceChange}execute(t,e,i){const a=[],u=[];for(const c of this.operations){const d=c.execute(t,i,this.id.getVersionVector());if(!d)continue;const{opInfos:h,reverseOp:g}=d;a.push(...h),g&&u.unshift(g)}return this.presenceChange&&(this.presenceChange.type===xr.Put?e.set(this.id.getActorID(),Vn(this.presenceChange.presence)):e.delete(this.id.getActorID())),{opInfos:a,reverseOps:u}}toTestString(){return`${this.operations.map(t=>t.toTestString()).join(",")}`}toStruct(){return{changeID:ge.bytesToHex(ge.toChangeID(this.getID()).toBinary()),message:this.getMessage(),operations:this.getOperations().map(t=>ge.bytesToHex(ge.toOperation(t).toBinary())),presenceChange:this.getPresenceChange()}}static fromStruct(t){const{changeID:e,operations:i,presenceChange:a,message:u}=t;return Jo.create({id:ge.bytesToChangeID(ge.hexToBytes(e)),operations:i==null?void 0:i.map(c=>ge.bytesToOperation(ge.hexToBytes(c))),presenceChange:a,message:u})}}class Cd{constructor(t,e,i,a,u,c){v(this,"documentKey");v(this,"checkpoint");v(this,"isRemoved");v(this,"changes");v(this,"snapshot");v(this,"versionVector");this.documentKey=t,this.checkpoint=e,this.isRemoved=i,this.changes=a,this.snapshot=c,this.versionVector=u}static create(t,e,i,a,u,c){return new Cd(t,e,i,a,u,c)}getDocumentKey(){return this.documentKey}getCheckpoint(){return this.checkpoint}getIsRemoved(){return this.isRemoved}getChanges(){return this.changes}hasChanges(){return this.changes.length>0}getChangeSize(){return this.changes.length}hasSnapshot(){return!!this.snapshot&&!!this.snapshot.length}getSnapshot(){return this.snapshot}getVersionVector(){return this.versionVector}}class Io{constructor(t,e){v(this,"serverSeq");v(this,"clientSeq");this.serverSeq=t,this.clientSeq=e}static of(t,e){return new Io(t,e)}increaseClientSeq(t){return t===0?this:new Io(this.serverSeq,this.clientSeq+t)}forward(t){if(this.equals(t))return this;const e=this.serverSeq>t.serverSeq?this.serverSeq:t.serverSeq,i=Math.max(this.clientSeq,t.clientSeq);return Io.of(e,i)}getServerSeqAsString(){return this.serverSeq.toString()}getClientSeq(){return this.clientSeq}getServerSeq(){return this.serverSeq}equals(t){return this.clientSeq===t.clientSeq&&this.serverSeq==t.serverSeq}toTestString(){return`serverSeq=${this.serverSeq}, clientSeq=${this.clientSeq}`}}const B2=new Io(0n,0);class br{constructor(t,e){v(this,"createdAt");v(this,"offset");this.createdAt=t,this.offset=e}static of(t,e){return new br(t,e)}static fromStruct(t){return br.of(zn.fromStruct(t.createdAt),t.offset)}getCreatedAt(){return this.createdAt}getOffset(){return this.offset}equals(t){return this.createdAt.compare(t.createdAt)===0&&this.offset===t.offset}hasSameCreatedAt(t){return this.createdAt.compare(t.createdAt)===0}split(t){return new br(this.createdAt,this.offset+t)}toStruct(){return{createdAt:this.createdAt.toStruct(),offset:this.offset}}toTestString(){return`${this.createdAt.toTestString()}:${this.offset}`}toIDString(){return`${this.createdAt.toIDString()}:${this.offset}`}}const z2=br.of(Uo,0);class Zn{constructor(t,e){v(this,"id");v(this,"relativeOffset");this.id=t,this.relativeOffset=e}static of(t,e){return new Zn(t,e)}static fromStruct(t){const e=br.fromStruct(t.id);return Zn.of(e,t.relativeOffset)}getID(){return this.id}getRelativeOffset(){return this.relativeOffset}getAbsoluteID(){return br.of(this.id.getCreatedAt(),this.id.getOffset()+this.relativeOffset)}toTestString(){return`${this.id.toTestString()}:${this.relativeOffset}`}toStruct(){return{id:this.id.toStruct(),relativeOffset:this.relativeOffset}}equals(t){return this.id.equals(t.id)?this.relativeOffset===t.relativeOffset:!1}}class js extends hS{constructor(e,i,a){super(i);v(this,"id");v(this,"removedAt");v(this,"prev");v(this,"next");v(this,"insPrev");v(this,"insNext");this.id=e,this.removedAt=a}static create(e,i){return new js(e,i)}static createComparator(){return(e,i)=>{const a=e.getCreatedAt().compare(i.getCreatedAt());return a!==0?a:e.getOffset()>i.getOffset()?1:e.getOffset()<i.getOffset()?-1:0}}getID(){return this.id}getCreatedAt(){return this.id.getCreatedAt()}getLength(){return this.removedAt?0:this.getContentLength()}getContentLength(){return this.value&&this.value.length||0}getPrev(){return this.prev}getNext(){return this.next}getInsPrev(){return this.insPrev}getInsNext(){return this.insNext}getInsPrevID(){return this.insPrev.getID()}setPrev(e){this.prev=e,e&&(e.next=this)}setNext(e){this.next=e,e&&(e.prev=this)}setInsPrev(e){this.insPrev=e,e&&(e.insNext=this)}setInsNext(e){this.insNext=e,e&&(e.insPrev=this)}hasNext(){return!!this.next}hasInsPrev(){return!!this.insPrev}isRemoved(){return!!this.removedAt}getRemovedAt(){return this.removedAt}split(e){return new js(this.id.split(e),this.splitValue(e),this.removedAt)}canDelete(e,i){const a=!this.removedAt;return this.getCreatedAt().getLamport()<=i&&(!this.removedAt||e.after(this.removedAt))?a:!1}canStyle(e,i){return this.getCreatedAt().getLamport()<=i&&(!this.removedAt||e.after(this.removedAt))}remove(e){this.removedAt=e}createPosRange(){return[Zn.of(this.id,0),Zn.of(this.id,this.getLength())]}getDataSize(){const e=this.value.getDataSize();return this.id&&(e.meta+=$s),this.removedAt&&(e.meta+=$s),e}deepcopy(){return new js(this.id,this.value,this.removedAt)}toTestString(){return`${this.id.toTestString()} ${this.value?this.value:""}`}splitValue(e){const i=this.value;return this.value=i.substring(0,e),i.substring(e,i.length)}toIDString(){return this.id.toIDString()}}class Ho{constructor(){v(this,"head");v(this,"treeByIndex");v(this,"treeByID");this.head=js.create(z2),this.treeByIndex=new xu,this.treeByID=new xS(js.createComparator()),this.treeByIndex.insert(this.head),this.treeByID.put(this.head.getID(),this.head)}static create(){return new Ho}edit(t,e,i,a){const[u,c]=this.findNodeWithSplit(t[1],e),[d,h]=this.findNodeWithSplit(t[0],e),g=this.findBetween(h,c),[y,w]=this.deleteNodes(g,e,a),p=c?c.getID():u.getID();let b=Zn.of(p,0);if(i){const C=this.posToIndex(d.createPosRange()[1],!0),I=this.insertAfter(d,js.create(br.of(e,0),i));y.length&&y[y.length-1].from===C?y[y.length-1].value=i:y.push({actor:e.getActorID(),from:C,to:C,value:i}),b=Zn.of(I.getID(),I.getContentLength())}const x=[];for(const[,C]of w)x.push({parent:this,child:C});return[b,x,y]}indexToPos(t){const[e,i]=this.treeByIndex.find(t),a=e;return Zn.of(a.getID(),i)}findIndexesFromRange(t){const[e,i]=t;return[this.posToIndex(e,!1),this.posToIndex(i,!0)]}posToIndex(t,e){const i=t.getAbsoluteID(),a=e?this.findFloorNodePreferToLeft(i):this.findFloorNode(i);if(!a)throw new X($.ErrInvalidArgument,`the node of the given id should be found: ${i.toTestString()}`);const u=this.treeByIndex.indexOf(a),c=a.isRemoved()?0:i.getOffset()-a.getID().getOffset();return u+c}findNode(t){return this.findFloorNode(t)}get length(){return this.treeByIndex.length}getTreeByIndex(){return this.treeByIndex}getTreeByID(){return this.treeByID}toString(){const t=[];for(const e of this)e.isRemoved()||t.push(e.getValue());return t.join("")}*[Symbol.iterator](){let t=this.head.getNext();for(;t;)yield t,t=t.getNext()}getHead(){return this.head}deepcopy(){const t=new Ho;let e=this.head.getNext(),i=t.head,a;for(;e;){if(a=t.insertAfter(i,e.deepcopy()),e.hasInsPrev()){const u=t.findNode(e.getInsPrevID());a.setInsPrev(u)}i=a,e=e.getNext()}return t}toTestString(){const t=[];let e=this.head;for(;e;)e.isRemoved()?t.push(`{${e.toTestString()}}`):t.push(`[${e.toTestString()}]`),e=e.getNext();return t.join("")}insertAfter(t,e){const i=t.getNext();return e.setPrev(t),i&&i.setPrev(e),this.treeByID.put(e.getID(),e),this.treeByIndex.insertAfter(t,e),e}findNodeWithSplit(t,e){const i=t.getAbsoluteID();let a=this.findFloorNodePreferToLeft(i);const u=i.getOffset()-a.getID().getOffset();for(this.splitNode(a,u);a.hasNext()&&a.getNext().getCreatedAt().after(e);)a=a.getNext();return[a,a.getNext()]}findFloorNodePreferToLeft(t){let e=this.findFloorNode(t);if(!e)throw new X($.ErrInvalidArgument,`the node of the given id should be found: ${t.toTestString()}`);if(t.getOffset()>0&&e.getID().getOffset()==t.getOffset()){if(!e.hasInsPrev())return e;e=e.getInsPrev()}return e}findFloorNode(t){const e=this.treeByID.floorEntry(t);if(e&&!(!e.key.equals(t)&&!e.key.hasSameCreatedAt(t)))return e.value}findBetween(t,e){const i=[];let a=t;for(;a&&a!==e;)i.push(a),a=a.getNext();return i}splitNode(t,e){if(e>t.getContentLength())throw new X($.ErrInvalidArgument,"offset should be less than or equal to length");if(e===0)return t;if(e===t.getContentLength())return t.getNext();const i=t.split(e);this.treeByIndex.updateWeight(i),this.insertAfter(t,i);const a=t.getInsNext();return a&&a.setInsPrev(i),i.setInsPrev(t),i}deleteNodes(t,e,i){if(!t.length)return[[],new Map];const[a,u]=this.filterNodes(t,e,i),c=new Map,d=this.makeChanges(u,e);for(const h of a)c.set(h.getID().toIDString(),h),h.remove(e);return this.deleteIndexNodes(u),[d,c]}filterNodes(t,e,i){const a=[],u=[],[c,d]=this.findEdgesOfCandidates(t);u.push(c);for(const h of t){const g=h.getCreatedAt().getActorID();let y=du;i!=null&&(y=i.get(g)?i.get(g):0n),h.canDelete(e,y)?a.push(h):u.push(h)}return u.push(d),[a,u]}findEdgesOfCandidates(t){return[t[0].getPrev(),t[t.length-1].getNext()]}makeChanges(t,e){const i=[];let a,u;for(let c=0;c<t.length-1;c++){const d=t[c],h=t[c+1];d.getNext()!=h&&([a]=this.findIndexesFromRange(d.getNext().createPosRange()),h?[,u]=this.findIndexesFromRange(h.getPrev().createPosRange()):u=this.treeByIndex.length,a<u&&i.push({actor:e.getActorID(),from:a,to:u}))}return i.reverse()}deleteIndexNodes(t){for(let e=0;e<t.length-1;e++){const i=t[e],a=t[e+1];i.getNext()!=a&&this.treeByIndex.deleteRange(i,a)}}purge(t){this.treeByIndex.delete(t),this.treeByID.remove(t.getID());const e=t.getPrev(),i=t.getNext(),a=t.getInsPrev(),u=t.getInsNext();e&&e.setNext(i),i&&i.setPrev(e),t.setPrev(void 0),t.setNext(void 0),a&&a.setInsNext(u),u&&u.setInsPrev(a),t.setInsPrev(void 0),t.setInsNext(void 0)}}const Ab=n=>n<0?Math.ceil(n):Math.floor(n);var Tr=(n=>(n[n.Int=0]="Int",n[n.Long=1]="Long",n))(Tr||{});class gn extends Uu{constructor(e,i,a){super(a);v(this,"valueType");v(this,"value");switch(this.valueType=e,e){case 0:typeof i=="number"?i>Math.pow(2,31)-1||i<-Math.pow(2,31)?this.value=Ut.fromNumber(i).toInt():this.value=Ab(i):this.value=i.toInt();break;case 1:typeof i=="number"?this.value=Ut.fromNumber(i):this.value=i;break;default:throw new X($.ErrUnimplemented,`unimplemented type: ${e}`)}}static create(e,i,a){return new gn(e,i,a)}static valueFromBytes(e,i){switch(e){case 0:return i[0]|i[1]<<8|i[2]<<16|i[3]<<24;case 1:return Ut.fromBytesLE(Array.from(i));default:throw new X($.ErrUnimplemented,`unimplemented type: ${e}`)}}getDataSize(){return{data:this.valueType===0?4:8,meta:this.getMetaUsage()}}toJSON(){return`${this.value}`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:this.value,type:"YORKIE_COUNTER"}}deepcopy(){const e=gn.create(this.valueType,this.value,this.getCreatedAt());return e.setMovedAt(this.getMovedAt()),e}getType(){return this.valueType}static getCounterType(e){switch(typeof e){case"object":return e instanceof Ut?1:void 0;case"number":return e>Math.pow(2,31)-1||e<-Math.pow(2,31)?1:0;default:return}}static isSupport(e){return!!gn.getCounterType(e)}static isInteger(e){return e%1===0}isNumericType(){const e=this.valueType;return e===0||e===1}getValueType(){return this.valueType}getValue(){return this.value}toBytes(){switch(this.valueType){case 0:{const e=this.value;return new Uint8Array([e&255,e>>8&255,e>>16&255,e>>24&255])}case 1:{const i=this.value.toBytesLE();return Uint8Array.from(i)}default:throw new X($.ErrUnimplemented,`unimplemented type: ${this.valueType}`)}}increase(e){function i(a){if(!a.isNumericType())throw new TypeError(`Unsupported type of value: ${typeof a.getValue()}`)}return i(this),i(e),this.valueType===1?this.value=this.value.add(e.getValue()):e.getType()===Ae.Long?this.value=this.value+e.getValue().toInt():this.value=Ut.fromNumber(this.value+Ab(e.getValue())).toInt(),this}}class $o extends Qn{constructor(e,i,a){super(e,a);v(this,"value");this.value=i}static create(e,i,a){return new $o(e,i,a)}execute(e){const i=e.findByCreatedAt(this.getParentCreatedAt());if(!i)throw new X($.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(i instanceof gn))throw new X($.ErrInvalidArgument,"fail to execute, only Counter can execute increase");const a=i,u=this.value.deepcopy();return a.increase(u),{opInfos:[{type:"increase",path:e.createPath(this.getParentCreatedAt()),value:u.getValue()}],reverseOp:this.toReverseOperation()}}toReverseOperation(){const e=this.value.deepcopy(),a=e.getType()===Ae.Long?e.getValue().multiply(-1):e.getValue()*-1;return $o.create(this.getParentCreatedAt(),ce.of(a,e.getCreatedAt()))}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.INCREASE.${this.value.toJSON()}`}getValue(){return this.value}}class Fi extends Qn{constructor(e,i,a,u,c,d){super(e,d);v(this,"fromPos");v(this,"toPos");v(this,"attributes");v(this,"attributesToRemove");this.fromPos=i,this.toPos=a,this.attributes=u,this.attributesToRemove=c}static create(e,i,a,u,c){return new Fi(e,i,a,u,[],c)}static createTreeRemoveStyleOperation(e,i,a,u,c){return new Fi(e,i,a,new Map,u,c)}execute(e,i,a){const u=e.findByCreatedAt(this.getParentCreatedAt());if(!u)throw new X($.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(u instanceof _n))throw new X($.ErrInvalidArgument,"fail to execute, only Tree can execute edit");const c=u;let d,h;if(this.attributes.size){const g={};[...this.attributes].forEach(([y,w])=>g[y]=w),[h,d]=c.style([this.fromPos,this.toPos],g,this.getExecutedAt(),a)}else{const g=this.attributesToRemove;[h,d]=c.removeStyle([this.fromPos,this.toPos],g,this.getExecutedAt(),a)}for(const g of h)e.registerGCPair(g);return{opInfos:d.map(({from:g,to:y,value:w,fromPath:p,toPath:b})=>({type:"tree-style",from:g,to:y,value:this.attributes.size?{attributes:w}:{attributesToRemove:w},fromPath:p,toPath:b,path:e.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),i=`${this.fromPos.getLeftSiblingID().getCreatedAt().toTestString()}:${this.fromPos.getLeftSiblingID().getOffset()}`,a=`${this.toPos.getLeftSiblingID().getCreatedAt().toTestString()}:${this.toPos.getLeftSiblingID().getOffset()}`;return`${e}.STYLE(${i},${a},${Object.entries(this.attributes||{}).map(([u,c])=>`${u}:"${c}"`).join(" ")})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getAttributes(){return this.attributes}getAttributesToRemove(){return this.attributesToRemove}}function L2(n){const t=new by,e=t.data;for(const[i,a]of Object.entries(n))e[i]=JSON.stringify(a);return t}function _2(n){if(n.type===xr.Put)return new bu({type:Da.PUT,presence:L2(n.presence)});if(n.type===xr.Clear)return new bu({type:Da.CLEAR});throw new X($.ErrUnimplemented,"unimplemented type")}function U2(n){return new fS({serverSeq:n.getServerSeq(),clientSeq:n.getClientSeq()})}function ES(n){return new Td({clientSeq:n.getClientSeq(),lamport:n.getLamport(),actorId:By(n.getActorID()),versionVector:Ay(n.getVersionVector())})}function At(n){if(n)return new wt({lamport:n.getLamport(),delimiter:n.getDelimiter(),actorId:By(n.getActorID())})}function Ay(n){if(!n)return;const t=new Ad;for(const[e,i]of n)t.vector[e]=BigInt(i.toString());return t}function NS(n){switch(n){case Ae.Null:return It.NULL;case Ae.Boolean:return It.BOOLEAN;case Ae.Integer:return It.INTEGER;case Ae.Long:return It.LONG;case Ae.Double:return It.DOUBLE;case Ae.String:return It.STRING;case Ae.Bytes:return It.BYTES;case Ae.Date:return It.DATE;default:throw new X($.ErrInvalidType,`unsupported type: ${n}`)}}function CS(n){switch(n){case Tr.Int:return It.INTEGER_CNT;case Tr.Long:return It.LONG_CNT;default:throw new X($.ErrInvalidType,`unsupported type: ${n}`)}}function cm(n){if(n instanceof We)return new Tn({type:It.JSON_OBJECT,createdAt:At(n.getCreatedAt()),value:PS(n)});if(n instanceof hn)return new Tn({type:It.JSON_ARRAY,createdAt:At(n.getCreatedAt()),value:mC(n)});if(n instanceof Ln)return new Tn({type:It.TEXT,createdAt:At(n.getCreatedAt())});if(n instanceof ce)return new Tn({type:NS(n.getType()),createdAt:At(n.getCreatedAt()),value:n.toBytes()});if(n instanceof gn)return new Tn({type:CS(n.getType()),createdAt:At(n.getCreatedAt()),value:n.toBytes()});if(n instanceof _n)return new Tn({type:It.TREE,createdAt:At(n.getCreatedAt()),value:pC(n)});throw new X($.ErrUnimplemented,"unimplemented element")}function q2(n){return new vu({createdAt:At(n.getCreatedAt()),offset:n.getOffset()})}function mf(n){return new Qi({createdAt:At(n.getID().getCreatedAt()),offset:n.getID().getOffset(),relativeOffset:n.getRelativeOffset()})}function yf(n){return new Ca({parentId:hu(n.getParentID()),leftSiblingId:hu(n.getLeftSiblingID())})}function hu(n){return new Hs({createdAt:At(n.getCreatedAt()),offset:n.getOffset()})}function DS(n){const t=new wy;if(n instanceof ka){const e=n,i=new Jf;i.parentCreatedAt=At(e.getParentCreatedAt()),i.key=e.getKey(),i.value=cm(e.getValue()),i.executedAt=At(e.getExecutedAt()),t.body.case="set",t.body.value=i}else if(n instanceof qu){const e=n,i=new Hf;i.parentCreatedAt=At(e.getParentCreatedAt()),i.prevCreatedAt=At(e.getPrevCreatedAt()),i.value=cm(e.getValue()),i.executedAt=At(e.getExecutedAt()),t.body.case="add",t.body.value=i}else if(n instanceof Js){const e=n,i=new $f;i.parentCreatedAt=At(e.getParentCreatedAt()),i.prevCreatedAt=At(e.getPrevCreatedAt()),i.createdAt=At(e.getCreatedAt()),i.executedAt=At(e.getExecutedAt()),t.body.case="move",t.body.value=i}else if(n instanceof Xs){const e=n,i=new Vf;i.parentCreatedAt=At(e.getParentCreatedAt()),i.createdAt=At(e.getCreatedAt()),i.executedAt=At(e.getExecutedAt()),t.body.case="remove",t.body.value=i}else if(n instanceof Pu){const e=n,i=new jf;i.parentCreatedAt=At(e.getParentCreatedAt()),i.from=mf(e.getFromPos()),i.to=mf(e.getToPos()),i.content=e.getContent();const a=i.attributes;for(const[u,c]of e.getAttributes())a[u]=c;i.executedAt=At(e.getExecutedAt()),t.body.case="edit",t.body.value=i}else if(n instanceof Ju){const e=n,i=new Yf;i.parentCreatedAt=At(e.getParentCreatedAt()),i.from=mf(e.getFromPos()),i.to=mf(e.getToPos());const a=i.attributes;for(const[u,c]of e.getAttributes())a[u]=c;i.executedAt=At(e.getExecutedAt()),t.body.case="style",t.body.value=i}else if(n instanceof $o){const e=n,i=new Gf;i.parentCreatedAt=At(e.getParentCreatedAt()),i.value=cm(e.getValue()),i.executedAt=At(e.getExecutedAt()),t.body.case="increase",t.body.value=i}else if(n instanceof Hu){const e=n,i=new Xf;i.parentCreatedAt=At(e.getParentCreatedAt()),i.from=yf(e.getFromPos()),i.to=yf(e.getToPos()),i.contents=Y2(e.getContents()),i.splitLevel=e.getSplitLevel(),i.executedAt=At(e.getExecutedAt()),t.body.case="treeEdit",t.body.value=i}else if(n instanceof Fi){const e=n,i=new Kf;i.parentCreatedAt=At(e.getParentCreatedAt()),i.from=yf(e.getFromPos()),i.to=yf(e.getToPos());const a=e.getAttributesToRemove();if(a.length>0)i.attributesToRemove=a;else{const u=i.attributes;for(const[c,d]of e.getAttributes())u[c]=d}i.executedAt=At(e.getExecutedAt()),t.body.case="treeStyle",t.body.value=i}else throw new X($.ErrUnimplemented,"unimplemented operation");return t}function P2(n){const t=[];for(const e of n)t.push(DS(e));return t}function J2(n){const t=new uS({id:ES(n.getID()),message:n.getMessage()});return n.hasOperations()&&(t.operations=P2(n.getOperations())),n.hasPresenceChange()&&(t.presenceChange=_2(n.getPresenceChange())),t}function H2(n){const t=[];for(const e of n)t.push(J2(e));return t}function $2(n){const t=[];for(const e of n)t.push(new cS({key:e.getStrKey(),element:Ny(e.getValue())}));return t}function V2(n){const t=[];for(const e of n)t.push(new nd({element:Ny(e.getValue())}));return t}function j2(n){const t=[];for(const e of n){const i=new rd;i.id=q2(e.getID()),i.value=e.getValue().getContent(),i.removedAt=At(e.getRemovedAt());const a=i.attributes,u=e.getValue().getAttrs();for(const c of u){const d=new _o;d.value=c.getValue(),d.updatedAt=At(c.getUpdatedAt()),a[c.getKey()]=d}t.push(i)}return t}function Y2(n){const t=[];if(!n||!n.length)return t;for(const e of n)t.push(new id({content:Ey(e)}));return t}function G2(n){const t={};for(const e of n)t[e.getKey()]=new _o({value:e.getValue(),updatedAt:At(e.getUpdatedAt()),isRemoved:e.isRemoved()});return t}function Ey(n){if(!n)return[];const t=[];return Nd(n,(e,i)=>{const a=new wu({id:hu(e.id),type:e.type,removedAt:At(e.removedAt),depth:i});e.isText&&(a.value=e.value),e.insPrevID&&(a.insPrevId=hu(e.insPrevID)),e.insNextID&&(a.insNextId=hu(e.insNextID)),e.attrs&&(a.attributes=G2(e.attrs)),t.push(a)}),t}function X2(n){const t=new tn;return t.body.case="jsonObject",t.body.value=new Ff({nodes:$2(n.getRHT()),createdAt:At(n.getCreatedAt()),movedAt:At(n.getMovedAt()),removedAt:At(n.getRemovedAt())}),t}function kS(n){const t=new tn;return t.body.case="jsonArray",t.body.value=new Zf({nodes:V2(n.getElements()),createdAt:At(n.getCreatedAt()),movedAt:At(n.getMovedAt()),removedAt:At(n.getRemovedAt())}),t}function K2(n){const t=new tn;return t.body.case="primitive",t.body.value=new Qf({type:NS(n.getType()),value:n.toBytes(),createdAt:At(n.getCreatedAt()),movedAt:At(n.getMovedAt()),removedAt:At(n.getRemovedAt())}),t}function F2(n){const t=new tn;return t.body.case="text",t.body.value=new Wf({nodes:j2(n.getRGATreeSplit()),createdAt:At(n.getCreatedAt()),movedAt:At(n.getMovedAt()),removedAt:At(n.getRemovedAt())}),t}function Z2(n){const t=new tn;return t.body.case="counter",t.body.value=new td({type:CS(n.getType()),value:n.toBytes(),createdAt:At(n.getCreatedAt()),movedAt:At(n.getMovedAt()),removedAt:At(n.getRemovedAt())}),t}function OS(n){const t=new tn;return t.body.case="tree",t.body.value=new ed({nodes:Ey(n.getRoot()),createdAt:At(n.getCreatedAt()),movedAt:At(n.getMovedAt()),removedAt:At(n.getRemovedAt())}),t}function Ny(n){if(n instanceof We)return X2(n);if(n instanceof hn)return kS(n);if(n instanceof ce)return K2(n);if(n instanceof Ln)return F2(n);if(n instanceof gn)return Z2(n);if(n instanceof _n)return OS(n);throw new X($.ErrUnimplemented,"unimplemented element")}function Q2(n){return new es({documentKey:n.getDocumentKey(),checkpoint:U2(n.getCheckpoint()),isRemoved:n.getIsRemoved(),changes:H2(n.getChanges()),snapshot:n.getSnapshot(),versionVector:Ay(n.getVersionVector())})}function ou(n){if(!(n instanceof Gt))return{};const t=n.findDetails(y2);for(const e of t)return e.metadata;return{}}function Bs(n){return ou(n).code??""}function IS(n){return jn.of(n.clientSeq,BigInt(n.lamport),Ry(n.actorId),Cy(n.versionVector),BigInt(n.serverSeq))}function Cy(n){if(!n)return;const t=new Oo;return Object.entries(n.vector).forEach(([e,i])=>{t.set(e,BigInt(i.toString()))}),t}function Et(n){if(n)return zn.of(BigInt(n.lamport),n.delimiter,Ry(n.actorId))}function Dy(n){const t={};return Object.entries(n.data).forEach(([e,i])=>{t[e]=JSON.parse(i)}),t}function W2(n){const t=n.type;if(t===Da.PUT){const e=Dy(n.presence);return{type:xr.Put,presence:e}}if(t===Da.CLEAR)return{type:xr.Clear};throw new X($.ErrInvalidType,`unsupported type: ${t}`)}function tC(n){const t=new Map;return Object.entries(n).forEach(([e,i])=>{t.set(e,Dy(i))}),t}function RS(n){switch(n){case It.NULL:return Ae.Null;case It.BOOLEAN:return Ae.Boolean;case It.INTEGER:return Ae.Integer;case It.LONG:return Ae.Long;case It.DOUBLE:return Ae.Double;case It.STRING:return Ae.String;case It.BYTES:return Ae.Bytes;case It.DATE:return Ae.Date}throw new X($.ErrUnimplemented,`unimplemented value type: ${n}`)}function od(n){switch(n){case It.INTEGER_CNT:return Tr.Int;case It.LONG_CNT:return Tr.Long}throw new X($.ErrUnimplemented,`unimplemented value type: ${n}`)}function fm(n){switch(n.type){case It.JSON_OBJECT:return n.value?qS(n.value):We.create(Et(n.createdAt));case It.JSON_ARRAY:return n.value?gC(n.value):hn.create(Et(n.createdAt));case It.TEXT:return Ln.create(Ho.create(),Et(n.createdAt));case It.TREE:return yC(n.value);case It.NULL:case It.BOOLEAN:case It.INTEGER:case It.LONG:case It.DOUBLE:case It.STRING:case It.BYTES:case It.DATE:return ce.of(ce.valueFromBytes(RS(n.type),n.value),Et(n.createdAt));case It.INTEGER_CNT:case It.LONG_CNT:return gn.create(od(n.type),gn.valueFromBytes(od(n.type),n.value),Et(n.createdAt))}}function pf(n){return Zn.of(br.of(Et(n.createdAt),n.offset),n.relativeOffset)}function MS(n){return br.of(Et(n.createdAt),n.offset)}function eC(n){const t=Au.create(n.value);Object.entries(n.attributes).forEach(([i,a])=>{t.setAttr(i,a.value,Et(a.updatedAt))});const e=js.create(MS(n.id),t);return e.remove(Et(n.removedAt)),e}function To(n){return Kn.of(gu(n.parentId),gu(n.leftSiblingId))}function gu(n){return Le.of(Et(n.createdAt),n.offset)}function nC(n){if(!n.length)return;const t=[];return n.forEach(e=>{const i=ky(e.content);t.push(i)}),t}function ky(n){if(n.length===0)return;const t=[];for(const a of n)t.push(iC(a));const e=t[t.length-1],i=new Map;i.set(n[t.length-1].depth,t[t.length-1]);for(let a=t.length-2;a>=0;a--)i.get(n[a].depth-1).prepend(t[a]),i.set(n[a].depth,t[a]);return e.updateDescendantsSize(),_n.create(e,Uo).getRoot()}function rC(n){const t=Wi.create();for(const[e,i]of Object.entries(n))t.setInternal(e,i.value,Et(i.updatedAt),i.isRemoved);return t}function iC(n){const t=gu(n.id),e=dn.create(t,n.type),i=Object.entries(n.attributes);return e.isText?e.value=n.value:i.length&&(e.attrs=rC(n.attributes)),n.insPrevId&&(e.insPrevID=gu(n.insPrevId)),n.insNextId&&(e.insNextID=gu(n.insNextId)),e.removedAt=Et(n.removedAt),e}function BS(n){if(n.body.case==="set"){const t=n.body.value;return ka.create(t.key,fm(t.value),Et(t.parentCreatedAt),Et(t.executedAt))}else if(n.body.case==="add"){const t=n.body.value;return qu.create(Et(t.parentCreatedAt),Et(t.prevCreatedAt),fm(t.value),Et(t.executedAt))}else if(n.body.case==="move"){const t=n.body.value;return Js.create(Et(t.parentCreatedAt),Et(t.prevCreatedAt),Et(t.createdAt),Et(t.executedAt))}else if(n.body.case==="remove"){const t=n.body.value;return Xs.create(Et(t.parentCreatedAt),Et(t.createdAt),Et(t.executedAt))}else if(n.body.case==="edit"){const t=n.body.value,e=new Map;return Object.entries(t.attributes).forEach(([i,a])=>{e.set(i,a)}),Pu.create(Et(t.parentCreatedAt),pf(t.from),pf(t.to),t.content,e,Et(t.executedAt))}else if(n.body.case==="style"){const t=n.body.value,e=new Map;return Object.entries(t.attributes).forEach(([i,a])=>{e.set(i,a)}),Ju.create(Et(t.parentCreatedAt),pf(t.from),pf(t.to),e,Et(t.executedAt))}else{if(n.body.case==="select")return;if(n.body.case==="increase"){const t=n.body.value;return $o.create(Et(t.parentCreatedAt),fm(t.value),Et(t.executedAt))}else if(n.body.case==="treeEdit"){const t=n.body.value;return Hu.create(Et(t.parentCreatedAt),To(t.from),To(t.to),nC(t.contents),t.splitLevel,Et(t.executedAt))}else if(n.body.case==="treeStyle"){const t=n.body.value,e=new Map,i=t.attributesToRemove;return(i==null?void 0:i.length)>0?Fi.createTreeRemoveStyleOperation(Et(t.parentCreatedAt),To(t.from),To(t.to),i,Et(t.executedAt)):(Object.entries(t.attributes).forEach(([a,u])=>{e.set(a,u)}),Fi.create(Et(t.parentCreatedAt),To(t.from),To(t.to),e,Et(t.executedAt)))}else throw new X($.ErrUnimplemented,"unimplemented operation")}}function sC(n){const t=[];for(const e of n){const i=BS(e);i&&t.push(i)}return t}function zS(n){const t=[];for(const e of n)t.push(Jo.create({id:IS(e.id),operations:sC(e.operations),presenceChange:e.presenceChange?W2(e.presenceChange):void 0,message:e.message}));return t}function aC(n){return Io.of(BigInt(n.serverSeq),n.clientSeq)}function oC(n){return Cd.create(n.documentKey,aC(n.checkpoint),n.isRemoved,zS(n.changes),Cy(n.versionVector),n.snapshot)}function LS(n){const t=new Su;for(const i of n.nodes){const a=Oy(i.element);t.set(i.key,a,a.getPositionedAt())}const e=new We(Et(n.createdAt),t);return e.setMovedAt(Et(n.movedAt)),e.setRemovedAt(Et(n.removedAt)),e}function _S(n){const t=new Tu;for(const i of n.nodes)t.insert(Oy(i.element));const e=new hn(Et(n.createdAt),t);return e.setMovedAt(Et(n.movedAt)),e.setRemovedAt(Et(n.removedAt)),e}function lC(n){const t=ce.of(ce.valueFromBytes(RS(n.type),n.value),Et(n.createdAt));return t.setMovedAt(Et(n.movedAt)),t.setRemovedAt(Et(n.removedAt)),t}function uC(n){const t=new Ho;let e=t.getHead();for(const a of n.nodes){const u=t.insertAfter(e,eC(a));a.insPrevId&&u.setInsPrev(t.findNode(MS(a.insPrevId))),e=u}const i=new Ln(t,Et(n.createdAt));return i.setMovedAt(Et(n.movedAt)),i.setRemovedAt(Et(n.removedAt)),i}function cC(n){const t=gn.create(od(n.type),gn.valueFromBytes(od(n.type),n.value),Et(n.createdAt));return t.setMovedAt(Et(n.movedAt)),t.setRemovedAt(Et(n.removedAt)),t}function US(n){const t=ky(n.nodes);return _n.create(t,Et(n.createdAt))}function Oy(n){if(n.body.case==="jsonObject")return LS(n.body.value);if(n.body.case==="jsonArray")return _S(n.body.value);if(n.body.case==="primitive")return lC(n.body.value);if(n.body.case==="text")return uC(n.body.value);if(n.body.case==="counter")return cC(n.body.value);if(n.body.case==="tree")return US(n.body.value);throw new X($.ErrUnimplemented,"unimplemented element")}function fC(n){if(!n)return{root:We.create(Uo),presences:new Map};const t=km.fromBinary(n);return{root:Oy(t.root),presences:tC(t.presences)}}function dC(n){const t=Ay(n);return Iy(t.toBinary())}function hC(n){const t=My(n),e=Ad.fromBinary(t);return Cy(e)}function qS(n){if(!n)throw new X($.ErrInvalidArgument,"bytes is empty");const t=tn.fromBinary(n);return LS(t.body.value)}function PS(n){return Ny(n).toBinary()}function gC(n){if(!n)throw new X($.ErrInvalidArgument,"bytes is empty");const t=tn.fromBinary(n);return _S(t.body.value)}function mC(n){return kS(n).toBinary()}function yC(n){if(!n)throw new X($.ErrInvalidArgument,"bytes is empty");const t=tn.fromBinary(n);return US(t.body.value)}function pC(n){return OS(n).toBinary()}function Iy(n){return n?Array.from(n).map(t=>t.toString(16).padStart(2,"0")).join(""):""}function Ry(n){return Iy(n)}function My(n){return new Uint8Array(n.match(/.{1,2}/g).map(t=>parseInt(t,16)))}function By(n){return My(n)}function vC(n){const t=Td.fromBinary(n);return IS(t)}function wC(n){const t=wy.fromBinary(n);return BS(t)}const ge={fromPresence:Dy,toChangePack:Q2,fromChangePack:oC,fromChanges:zS,toTreeNodes:Ey,fromTreeNodes:ky,objectToBytes:PS,bytesToObject:qS,bytesToSnapshot:fC,bytesToHex:Iy,hexToBytes:My,toHexString:Ry,toUint8Array:By,toOperation:DS,toChangeID:ES,PbChangeID:Td,bytesToChangeID:vC,bytesToOperation:wC,versionVectorToHex:dC,hexToVersionVector:hC};var Fe=(n=>(n[n.Trivial=0]="Trivial",n[n.Debug=1]="Debug",n[n.Info=2]="Info",n[n.Warn=3]="Warn",n[n.Error=4]="Error",n[n.Fatal=5]="Fatal",n))(Fe||{});let pa=3;function bC(n){pa=n}const xt={trivial:(...n)=>{pa>0||typeof console<"u"&&console.log("YORKIE T:",...n)},debug:(...n)=>{pa>1||typeof console<"u"&&console.log("YORKIE D:",...n)},info:(...n)=>{pa>2||typeof console<"u"&&console.log("YORKIE I:",...n)},warn:(...n)=>{pa>3||typeof console<"u"&&(typeof console.warn<"u"?console.warn("YORKIE W:",...n):console.log("YORKIE W:",...n))},error:(...n)=>{pa>4||typeof console<"u"&&(typeof console.error<"u"?console.error("YORKIE E:",...n):console.log("YORKIE E:",...n))},fatal:(...n)=>{typeof console<"u"&&(typeof console.error<"u"?console.error("YORKIE F:",...n):console.log("YORKIE F:",...n))},isEnabled:n=>pa<=n};function JS(){return"xxxxxxxx-xxxx-4xxxy-xxxx-xxxxxxxxxxx".replace(/[xy]/g,n=>{const t=Math.random()*16|0;return(n==="x"?t:t&3|8).toString(16)})}class SC{constructor(t,e,i,a,u){v(this,"reconnectStreamDelay");v(this,"doc");v(this,"docID");v(this,"syncMode");v(this,"remoteChangeEventReceived");v(this,"watchStream");v(this,"watchLoopTimerID");v(this,"watchAbortController");v(this,"unsubscribeBroadcastEvent");this.reconnectStreamDelay=t,this.doc=e,this.docID=i,this.syncMode=a,this.remoteChangeEventReceived=!1,this.unsubscribeBroadcastEvent=u}changeSyncMode(t){this.syncMode=t}needRealtimeSync(){return this.syncMode===Bf.RealtimeSyncOff?!1:this.syncMode===Bf.RealtimePushOnly?this.doc.hasLocalChanges():this.syncMode!==Bf.Manual&&(this.doc.hasLocalChanges()||this.remoteChangeEventReceived)}async runWatchLoop(t){const e=async()=>{if(this.watchStream)return Promise.resolve();this.watchLoopTimerID&&(clearTimeout(this.watchLoopTimerID),this.watchLoopTimerID=void 0);try{[this.watchStream,this.watchAbortController]=await t(()=>{this.watchStream=void 0,this.watchAbortController=void 0,this.watchLoopTimerID=setTimeout(e,this.reconnectStreamDelay)})}catch{}};await e()}cancelWatchStream(){this.watchStream&&this.watchAbortController&&(this.watchAbortController.abort(),this.watchStream=void 0,this.watchAbortController=void 0),clearTimeout(this.watchLoopTimerID),this.watchLoopTimerID=void 0}}const dm=()=>{};class xC{constructor(t){v(this,"finalized",!1);v(this,"observers",[]);v(this,"finalError");try{t(this)}catch(e){this.error(e)}}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,i){let a;if(!t)throw new X($.ErrInvalidArgument,"missing observer");if(this.finalized)throw new X($.ErrRefused,"observable is finalized due to previous error");typeof t=="object"?a=t:a={next:t,error:e,complete:i},a.next===void 0&&(a.next=dm),a.error===void 0&&(a.error=dm),a.complete===void 0&&(a.complete=dm);const u=JS(),c=this.unsubscribeOne.bind(this,u);if(this.observers.push({subscriptionID:u,observer:a}),this.finalized)try{this.finalError?a.error(this.finalError):a.complete()}catch(d){xt.warn(d)}return c}unsubscribeOne(t){var e;this.observers=(e=this.observers)==null?void 0:e.filter(i=>i.subscriptionID!==t)}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){if(this.observers!==void 0&&this.observers[t]!==void 0)try{e(this.observers[t].observer)}catch(i){xt.error(i)}}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.observers=void 0)}}function TC(n){const t=new xC(n);return{subscribe:t.subscribe.bind(t),getProxy:()=>t}}class Co{constructor(t,e,i,a){v(this,"prevID");v(this,"nextID");v(this,"delimiter");v(this,"message");v(this,"root");v(this,"operations");v(this,"presenceChange");v(this,"previousPresence");v(this,"reversePresenceKeys");this.prevID=t,this.nextID=t.next(),this.delimiter=dS,this.root=e,this.operations=[],this.previousPresence=Vn(i),this.presenceChange=void 0,this.reversePresenceKeys=new Set,this.message=a}static create(t,e,i,a){return new Co(t,e,i,a)}push(t){this.operations.push(t)}registerElement(t,e){this.root.registerElement(t,e)}registerRemovedElement(t){this.root.registerRemovedElement(t)}registerGCPair(t){this.root.registerGCPair(t)}getNextID(){return this.operations.length===0?this.prevID.next(!0).setLamport(this.prevID.getLamport()).setVersionVector(this.prevID.getVersionVector()):this.nextID}toChange(){const t=this.operations.length===0?this.prevID.next(!0):this.nextID;return Jo.create({id:t,operations:this.operations,presenceChange:this.presenceChange,message:this.message})}hasChange(){return this.operations.length>0||this.presenceChange!==void 0}setPresenceChange(t){this.presenceChange=t}setReversePresence(t,e){for(const i of Object.keys(t))e!=null&&e.addToHistory?this.reversePresenceKeys.add(i):this.reversePresenceKeys.delete(i)}getReversePresence(){if(this.reversePresenceKeys.size===0)return;const t={};for(const e of this.reversePresenceKeys)t[e]=this.previousPresence[e];return t}issueTimeTicket(){return this.delimiter+=1,this.nextID.createTimeTicket(this.delimiter)}getLastTimeTicket(){return this.nextID.createTimeTicket(this.delimiter)}}class Eu{constructor(t){v(this,"rootObject");v(this,"elementPairMapByCreatedAt");v(this,"gcElementSetByCreatedAt");v(this,"gcPairMap");this.rootObject=t,this.elementPairMapByCreatedAt=new Map,this.gcElementSetByCreatedAt=new Set,this.gcPairMap=new Map,this.registerElement(t,void 0),t.getDescendants(e=>{if(e.getRemovedAt()&&this.registerRemovedElement(e),e instanceof Ln||e instanceof _n)for(const i of e.getGCPairs())this.registerGCPair(i);return!1})}static create(){return new Eu(We.create(Uo))}findByCreatedAt(t){const e=this.elementPairMapByCreatedAt.get(t.toIDString());if(e)return e.element}findElementPairByCreatedAt(t){return this.elementPairMapByCreatedAt.get(t.toIDString())}createSubPaths(t){let e=this.elementPairMapByCreatedAt.get(t.toIDString());if(!e)return[];const i=[];for(;e.parent;){const a=e.element.getCreatedAt(),u=e.parent.subPathOf(a);if(u===void 0)throw new X($.ErrInvalidArgument,`cant find the given element: ${a.toIDString()}`);i.unshift(u),e=this.elementPairMapByCreatedAt.get(e.parent.getCreatedAt().toIDString())}return i.unshift("$"),i}createPath(t){return this.createSubPaths(t).join(".")}registerElement(t,e){this.elementPairMapByCreatedAt.set(t.getCreatedAt().toIDString(),{parent:e,element:t}),t instanceof Vs&&t.getDescendants((i,a)=>(this.registerElement(i,a),!1))}deregisterElement(t){let e=0;const i=a=>{const u=a.getCreatedAt().toIDString();this.elementPairMapByCreatedAt.delete(u),this.gcElementSetByCreatedAt.delete(u),e++};return i(t),t instanceof Vs&&t.getDescendants(a=>(i(a),!1)),e}registerRemovedElement(t){this.gcElementSetByCreatedAt.add(t.getCreatedAt().toIDString())}registerGCPair(t){if(this.gcPairMap.get(t.child.toIDString())){this.gcPairMap.delete(t.child.toIDString());return}this.gcPairMap.set(t.child.toIDString(),t)}getElementMapSize(){return this.elementPairMapByCreatedAt.size}getGarbageElementSetSize(){const t=new Set;for(const e of this.gcElementSetByCreatedAt){t.add(e);const i=this.elementPairMapByCreatedAt.get(e);i.element instanceof Vs&&i.element.getDescendants(a=>(t.add(a.getCreatedAt().toIDString()),!1))}return t.size}getObject(){return this.rootObject}getGarbageLen(){return this.getGarbageElementSetSize()+this.gcPairMap.size}getDocSize(){const t={live:{data:0,meta:0},gc:{data:0,meta:0}};for(const[e,i]of this.elementPairMapByCreatedAt)this.gcElementSetByCreatedAt.has(e)?(t.gc.data+=i.element.getDataSize().data,t.gc.meta+=i.element.getDataSize().meta):(t.live.data+=i.element.getDataSize().data,t.live.meta+=i.element.getDataSize().meta);for(const e of this.gcPairMap.values()){const i=e.child.getDataSize();t.gc.data+=i.data,t.gc.meta+=i.meta}return t}deepcopy(){return new Eu(this.rootObject.deepcopy())}garbageCollect(t){let e=0;for(const i of this.gcElementSetByCreatedAt){const a=this.elementPairMapByCreatedAt.get(i),u=a.element.getRemovedAt();u&&(t!=null&&t.afterOrEqual(u))&&(a.parent.purge(a.element),e+=this.deregisterElement(a.element))}for(const[,i]of this.gcPairMap){const a=i.child.getRemovedAt();a&&(t!=null&&t.afterOrEqual(a))&&(i.parent.purge(i.child),this.gcPairMap.delete(i.child.toIDString()),e+=1)}return e}toJSON(){return this.rootObject.toJSON()}toSortedJSON(){return this.rootObject.toSortedJSON()}getStats(){return{elements:this.getElementMapSize(),gcPairs:this.gcPairMap.size,gcElements:this.getGarbageElementSetSize()}}}function HS(n,t){const e=new Nu(n);return new Proxy(t,e.getHandlers())}class Nu{constructor(t){v(this,"context");v(this,"handlers");this.context=t,this.handlers={set:(e,i,a)=>(xt.isEnabled(Fe.Trivial)&&xt.trivial(`obj[${i}]=${JSON.stringify(a)}`),Nu.setInternal(t,e,i,a),!0),get:(e,i)=>(xt.isEnabled(Fe.Trivial)&&xt.trivial(`obj[${i}]`),i==="getID"?()=>e.getCreatedAt():i==="toJSON"||i==="toString"?()=>e.toJSON():i==="toJS"?()=>e.toJS():i==="toJSForTest"?()=>e.toJSForTest():va(t,e.get(i))),ownKeys:e=>e.getKeys(),getOwnPropertyDescriptor:()=>({enumerable:!0,configurable:!0}),deleteProperty:(e,i)=>(xt.isEnabled(Fe.Trivial)&&xt.trivial(`obj[${i}]`),Nu.deleteInternal(t,e,i),!0)}}static setInternal(t,e,i,a){if(i.includes("."))throw new X($.ErrInvalidObjectKey,"key must not contain the '.'.");const u=t.issueTimeTicket(),c=ld(t,a,u),d=e.set(i,c,u);t.registerElement(c,e),d&&t.registerRemovedElement(d),t.push(ka.create(i,c.deepcopy(),e.getCreatedAt(),u))}static buildObjectMembers(t,e){const i={};for(const[a,u]of Object.entries(e)){if(a.includes("."))throw new X($.ErrInvalidObjectKey,"key must not contain the '.'.");const c=t.issueTimeTicket(),d=ld(t,u,c);i[a]=d}return i}static deleteInternal(t,e,i){const a=t.issueTimeTicket(),u=e.deleteByKey(i,a);u&&(t.push(Xs.create(e.getCreatedAt(),u.getCreatedAt(),a)),t.registerRemovedElement(u))}getHandlers(){return this.handlers}}function AC(n,t){const e=new le(n,t);return new Proxy(t,e.getHandlers())}function EC(n){return typeof n=="string"||n instanceof String?!isNaN(n):!1}function NC(n){return["concat","entries","every","filter","find","findIndex","forEach","join","keys","map","reduce","reduceRight","slice","some","toLocaleString","toString","values"].includes(n)}class le{constructor(t,e){v(this,"context");v(this,"handlers");v(this,"array");this.context=t,this.array=e,this.handlers={get:(i,a,u)=>a==="getID"?()=>i.getCreatedAt():a==="getElementByID"?c=>{const d=i.getByID(c);if(!(!d||d.isRemoved()))return _s(t,d)}:a==="getElementByIndex"?c=>{const d=i.get(c);return _s(t,d)}:a==="getLast"?()=>_s(t,i.getLast()):a==="deleteByID"?c=>{const d=le.deleteInternalByID(t,i,c);return _s(t,d)}:a==="insertAfter"?(c,d)=>{const h=le.insertAfterInternal(t,i,c,d);return _s(t,h)}:a==="insertBefore"?(c,d)=>{const h=le.insertBeforeInternal(t,i,c,d);return _s(t,h)}:a==="moveBefore"?(c,d)=>{le.moveBeforeInternal(t,i,c,d)}:a==="moveAfter"?(c,d)=>{le.moveAfterInternal(t,i,c,d)}:a==="moveFront"?c=>{le.moveFrontInternal(t,i,c)}:a==="moveLast"?c=>{le.moveLastInternal(t,i,c)}:EC(a)?va(t,i.get(Number(a))):a==="push"?c=>le.pushInternal(t,i,c):a==="splice"?(c,d,...h)=>le.splice(t,i,c,d,...h):a==="length"?i.length:typeof a=="symbol"&&a===Symbol.iterator?le.iteratorInternal.bind(this,t,i):a==="includes"?(c,d)=>le.includes(t,i,c,d):a==="indexOf"?(c,d)=>le.indexOf(t,i,c,d):a==="lastIndexOf"?(c,d)=>le.lastIndexOf(t,i,c,d):a==="toJSForTest"?()=>i.toJSForTest():a==="toTestString"?()=>le.toTestString(i):typeof a=="string"&&NC(a)?(...c)=>{const d=Array.from(i).map(h=>va(t,h));return Array.prototype[a].apply(d,c)}:Reflect.get(i,a,u),deleteProperty:(i,a)=>(xt.isEnabled(Fe.Trivial)&&xt.trivial(`array[${a}]`),le.deleteInternalByIndex(t,i,Number.parseInt(a)),!0)}}static*iteratorInternal(t,e){for(const i of e)yield _s(t,i)}static buildArrayElements(t,e){const i=[];for(const a of e){const u=t.issueTimeTicket(),c=ld(t,a,u);i.push(c)}return i}static pushInternal(t,e,i){return le.insertAfterInternal(t,e,e.getLastCreatedAt(),i),e.length}static moveBeforeInternal(t,e,i,a){const u=t.issueTimeTicket(),c=e.getPrevCreatedAt(i);e.moveAfter(c,a,u),t.push(Js.create(e.getCreatedAt(),c,a,u))}static moveAfterInternal(t,e,i,a){const u=t.issueTimeTicket();e.moveAfter(i,a,u),t.push(Js.create(e.getCreatedAt(),i,a,u))}static moveFrontInternal(t,e,i){const a=t.issueTimeTicket(),u=e.getHead();e.moveAfter(u.getCreatedAt(),i,a),t.push(Js.create(e.getCreatedAt(),u.getCreatedAt(),i,a))}static moveLastInternal(t,e,i){const a=t.issueTimeTicket(),u=e.getLastCreatedAt();e.moveAfter(u,i,a),t.push(Js.create(e.getCreatedAt(),u,i,a))}static insertAfterInternal(t,e,i,a){const u=t.issueTimeTicket(),c=ld(t,a,u);return e.insertAfter(i,c),t.registerElement(c,e),t.push(qu.create(e.getCreatedAt(),i,c.deepcopy(),u)),c}static insertBeforeInternal(t,e,i,a){return le.insertAfterInternal(t,e,e.getPrevCreatedAt(i),a)}static deleteInternalByIndex(t,e,i){const a=t.issueTimeTicket(),u=e.deleteByIndex(i,a);if(u)return t.push(Xs.create(e.getCreatedAt(),u.getCreatedAt(),a)),t.registerRemovedElement(u),u}static deleteInternalByID(t,e,i){const a=t.issueTimeTicket(),u=e.delete(i,a);return t.push(Xs.create(e.getCreatedAt(),u.getCreatedAt(),a)),t.registerRemovedElement(u),u}static splice(t,e,i,a,...u){const c=e.length,d=i>=0?Math.min(i,c):Math.max(c+i,0),h=a===void 0?c:a<0?d:Math.min(d+a,c),g=[];for(let y=d;y<h;y++){const w=le.deleteInternalByIndex(t,e,d);if(w){const p=w.deepcopy();p.setRemovedAt(),g.push(va(t,p))}}if(u){let y=d===0?e.getHead().getID():e.get(d-1).getID();for(const w of u)y=le.insertAfterInternal(t,e,y,w).getID()}return g}static includes(t,e,i,a){var d;const u=e.length,c=a===void 0?0:a<0?Math.max(a+u,0):a;if(c>=u)return!1;if(ce.isSupport(i))return Array.from(e).map(g=>va(t,g)).includes(i,c);for(let h=c;h<u;h++)if(((d=e.get(h))==null?void 0:d.getID())===i.getID())return!0;return!1}static indexOf(t,e,i,a){var d;const u=e.length,c=a===void 0?0:a<0?Math.max(a+u,0):a;if(c>=u)return-1;if(ce.isSupport(i))return Array.from(e).map(g=>va(t,g)).indexOf(i,c);for(let h=c;h<u;h++)if(((d=e.get(h))==null?void 0:d.getID())===i.getID())return h;return-1}static lastIndexOf(t,e,i,a){var d;const u=e.length,c=a===void 0||a>=u?u-1:a<0?a+u:a;if(c<0)return-1;if(ce.isSupport(i))return Array.from(e).map(g=>va(t,g)).lastIndexOf(i,c);for(let h=c;h>0;h--)if(((d=e.get(h))==null?void 0:d.getID())===i.getID())return h;return-1}static toTestString(t){return t.toTestString()}getHandlers(){return this.handlers}}class zy{constructor(t,e){v(this,"context");v(this,"text");this.context=t,this.text=e}initialize(t,e){this.context=t,this.text=e}getID(){return this.text.getID()}edit(t,e,i,a){if(!this.context||!this.text)throw new X($.ErrNotInitialized,"Text is not initialized yet");if(t>e)throw new X($.ErrInvalidArgument,"from should be less than or equal to to");const u=this.text.indexRangeToPosRange(t,e);xt.isEnabled(Fe.Debug)&&xt.debug(`EDIT: f:${t}->${u[0].toTestString()}, t:${e}->${u[1].toTestString()} c:${i}`);const c=a?Po(a):void 0,d=this.context.issueTimeTicket(),[,h,g]=this.text.edit(u,i,d,c);for(const y of h)this.context.registerGCPair(y);return this.context.push(new Pu(this.text.getCreatedAt(),u[0],u[1],i,c?new Map(Object.entries(c)):new Map,d)),this.text.findIndexesFromRange(g)}delete(t,e){return this.edit(t,e,"")}empty(){return this.edit(0,this.length,"")}setStyle(t,e,i){if(!this.context||!this.text)throw new X($.ErrNotInitialized,"Text is not initialized yet");if(t>e)throw new X($.ErrInvalidArgument,"from should be less than or equal to to");const a=this.text.indexRangeToPosRange(t,e);xt.isEnabled(Fe.Debug)&&xt.debug(`STYL: f:${t}->${a[0].toTestString()}, t:${e}->${a[1].toTestString()} a:${JSON.stringify(i)}`);const u=Po(i),c=this.context.issueTimeTicket(),[d]=this.text.setStyle(a,u,c);for(const h of d)this.context.registerGCPair(h);return this.context.push(new Ju(this.text.getCreatedAt(),a[0],a[1],new Map(Object.entries(u)),c)),!0}indexRangeToPosRange(t){if(!this.context||!this.text)throw new X($.ErrNotInitialized,"Text is not initialized yet");const e=this.text.indexRangeToPosRange(t[0],t[1]);return[e[0].toStruct(),e[1].toStruct()]}posRangeToIndexRange(t){if(!this.context||!this.text)throw new X($.ErrNotInitialized,"Text is not initialized yet");const e=this.text.findIndexesFromRange([Zn.fromStruct(t[0]),Zn.fromStruct(t[1])]);return[e[0],e[1]]}toTestString(){if(!this.context||!this.text)throw new X($.ErrNotInitialized,"Text is not initialized yet");return this.text.toTestString()}values(){if(!this.context||!this.text)throw new X($.ErrNotInitialized,"Text is not initialized yet");return this.text.values()}get length(){return this.text.length}getTreeByIndex(){return this.text.getTreeByIndex()}getTreeByID(){return this.text.getTreeByID()}toString(){if(!this.context||!this.text)throw new X($.ErrNotInitialized,"Text is not initialized yet");return this.text.toString()}toJSON(){if(!this.context||!this.text)throw new X($.ErrNotInitialized,"Text is not initialized yet");return this.text.toJSON()}toJSForTest(){if(!this.context||!this.text)throw new X($.ErrNotInitialized,"Text is not initialized yet");return this.text.toJSForTest()}createRangeForTest(t,e){if(!this.context||!this.text)throw new X($.ErrNotInitialized,"Text is not initialized yet");return this.text.indexRangeToPosRange(t,e)}}class Ly{constructor(t,e){v(this,"valueType");v(this,"value");v(this,"context");v(this,"counter");this.valueType=t,this.value=e}initialize(t,e){this.valueType=e.getValueType(),this.context=t,this.counter=e,this.value=e.getValue()}getID(){return this.counter.getID()}getValue(){return this.value}getValueType(){return this.valueType}increase(t){if(!this.context||!this.counter)throw new X($.ErrNotInitialized,"Counter is not initialized yet");const e=this.context.issueTimeTicket(),i=ce.of(t,e);if(!i.isNumericType())throw new TypeError(`Unsupported type of value: ${typeof i.getValue()}`);return this.counter.increase(i),this.context.push($o.create(this.counter.getCreatedAt(),i,e)),this}toJSForTest(){if(!this.context||!this.counter)throw new X($.ErrNotInitialized,"Counter is not initialized yet");return this.counter.toJSForTest()}}function _y(n){if(n.isText)return{type:n.type,value:n.value};const t={type:n.type,children:n.children.map(e=>_y(e))};return n.attrs&&(t.attributes=Ki(n.attrs.toObject())),t}function CC(n,t){const e={type:n.isText?n.parent.type:n.type,children:n.isText?n.parent.getChildrenText().length===t?[]:[{type:wr,value:n.parent.getChildrenText().slice(t)}]:n.children.slice(t).map(i=>_y(i))};return n.attrs?e.attributes=Ki(n.attrs.toObject()):n.isText&&n.parent.attrs&&(e.attributes=Ki(n.parent.attrs.toObject())),e}function DC(n,t){const{node:e}=n,i=[...t].slice(0,-1),a=e.isText?e.parent.getChildrenText().length:e.children.length,u=[...i,a],c=[...i],d=[];c[c.length-1]+=1,t.every((g,y)=>g===u[y])||d.push({fromPath:[...t],toPath:u});const h=CC(e,t[t.length-1]);return h&&d.push({fromPath:c,toPath:c,content:h}),d}function kC(n,t){const{node:e,offset:i}=n,a=e.children[i],u=e.children[i-1],{children:c}=a,d=[...t].slice(0,-1),h=[{fromPath:[...t],toPath:[...d,i+1]}];if(!a.children.length)return h;const g=[...d,i-1,u.hasTextChild()?u.getChildrenText().length:u.children.length],y=c.map(w=>_y(w));return h.push({fromPath:g,toPath:g,content:y}),h}function Uy(n,t,e){const{type:i}=n,a=e.issueTimeTicket();if(i===wr){$S(n);const{value:u}=n,c=dn.create(Le.of(a,0),i,u);t.append(c)}else{const{children:u=[]}=n,{attributes:c}=n;let d;if(typeof c=="object"&&!vS(c)){const g=Po(c);d=new Wi;for(const[y,w]of Object.entries(g))d.set(y,w,a)}const h=dn.create(Le.of(a,0),i,void 0,d);t.append(h);for(const g of u)Uy(g,h,e)}}function OC(n,t){const{type:e}=t,i=n.issueTimeTicket();let a;if(t.type===wr){const{value:u}=t;a=dn.create(Le.of(i,0),e,u)}else if(t){const{children:u=[]}=t,{attributes:c}=t;let d;if(typeof c=="object"&&!vS(c)){const h=Po(c);d=new Wi;for(const[g,y]of Object.entries(h))d.set(g,y,i)}a=dn.create(Le.of(n.issueTimeTicket(),0),e,void 0,d);for(const h of u)Uy(h,a,n)}return a}function $S(n){if(!n.value.length)throw new X($.ErrInvalidArgument,"text node cannot have empty value");return!0}function Eb(n){if(!n.length)return!0;if(n[0].type===wr)for(const e of n){const{type:i}=e;if(i!==wr)throw new X($.ErrInvalidArgument,"element node and text node cannot be passed together");$S(e)}else for(const e of n){const{type:i}=e;if(i===wr)throw new X($.ErrInvalidArgument,"element node and text node cannot be passed together")}return!0}class qy{constructor(t){v(this,"initialRoot");v(this,"context");v(this,"tree");this.initialRoot=t}initialize(t,e){this.context=t,this.tree=e}getID(){return this.tree.getID()}buildRoot(t){if(!this.initialRoot)return dn.create(Le.of(t.issueTimeTicket(),0),E2);const e=dn.create(Le.of(t.issueTimeTicket(),0),this.initialRoot.type);for(const i of this.initialRoot.children)Uy(i,e,t);return e}getSize(){if(!this.context||!this.tree)throw new X($.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getSize()}getNodeSize(){if(!this.context||!this.tree)throw new X($.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getNodeSize()}getIndexTree(){if(!this.context||!this.tree)throw new X($.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getIndexTree()}splitByPath(t){if(!this.context||!this.tree)throw new X($.ErrNotInitialized,"Tree is not initialized yet");if(!t.length)throw new X($.ErrInvalidArgument,"path should not be empty");const e=this.tree.pathToTreePos(t),i=DC(e,t);for(const a of i){const{fromPath:u,toPath:c,content:d}=a,h=this.tree.pathToPos(u),g=this.tree.pathToPos(c);this.editInternal(h,g,d?[d]:[],0)}}mergeByPath(t){if(!this.context||!this.tree)throw new X($.ErrNotInitialized,"Tree is not initialized yet");if(!t.length)throw new X($.ErrInvalidArgument,"path should not be empty");const e=this.tree.pathToTreePos(t);if(e.node.isText)throw new X($.ErrInvalidArgument,"text node cannot be merged");const i=kC(e,t);for(const a of i){const{fromPath:u,toPath:c,content:d}=a,h=this.tree.pathToPos(u),g=this.tree.pathToPos(c);this.editInternal(h,g,d??[],0)}}styleByPath(t,e){if(!this.context||!this.tree)throw new X($.ErrNotInitialized,"Tree is not initialized yet");if(!t.length)throw new X($.ErrInvalidArgument,"path should not be empty");const[i,a]=this.tree.pathToPosRange(t),u=this.context.issueTimeTicket(),c=e?Po(e):void 0,[d]=this.tree.style([i,a],c,u);for(const h of d)this.context.registerGCPair(h);this.context.push(Fi.create(this.tree.getCreatedAt(),i,a,c?new Map(Object.entries(c)):new Map,u))}style(t,e,i){if(!this.context||!this.tree)throw new X($.ErrNotInitialized,"Tree is not initialized yet");if(t>e)throw new X($.ErrInvalidArgument,"from should be less than or equal to to");const a=this.tree.findPos(t),u=this.tree.findPos(e),c=this.context.issueTimeTicket(),d=i?Po(i):void 0,[h]=this.tree.style([a,u],d,c);for(const g of h)this.context.registerGCPair(g);this.context.push(Fi.create(this.tree.getCreatedAt(),a,u,d?new Map(Object.entries(d)):new Map,c))}removeStyle(t,e,i){if(!this.context||!this.tree)throw new X($.ErrNotInitialized,"Tree is not initialized yet");if(t>e)throw new X($.ErrInvalidArgument,"from should be less than or equal to to");const a=this.tree.findPos(t),u=this.tree.findPos(e),c=this.context.issueTimeTicket(),[d]=this.tree.removeStyle([a,u],i,c);for(const h of d)this.context.registerGCPair(h);this.context.push(Fi.createTreeRemoveStyleOperation(this.tree.getCreatedAt(),a,u,i,c))}editInternal(t,e,i,a=0){var h;if(i.length!==0&&i[0]&&(Eb(i),i[0].type!==wr))for(const g of i){const{children:y=[]}=g;Eb(y)}const u=this.context.getLastTimeTicket();let c=new Array;if(((h=i[0])==null?void 0:h.type)===wr){let g="";for(const y of i){const{value:w}=y;g+=w}c.push(dn.create(Le.of(this.context.issueTimeTicket(),0),wr,g))}else c=i.map(g=>g&&OC(this.context,g)).filter(g=>g);const[,d]=this.tree.edit([t,e],c.length?c.map(g=>g==null?void 0:g.deepcopy()):void 0,a,u,()=>this.context.issueTimeTicket());for(const g of d)this.context.registerGCPair(g);return this.context.push(Hu.create(this.tree.getCreatedAt(),t,e,c.length?c:void 0,a,u)),!0}editByPath(t,e,i,a=0){if(!this.context||!this.tree)throw new X($.ErrNotInitialized,"Tree is not initialized yet");if(t.length!==e.length)throw new X($.ErrInvalidArgument,"path length should be equal");if(!t.length||!e.length)throw new X($.ErrInvalidArgument,"path should not be empty");const u=this.tree.pathToPos(t),c=this.tree.pathToPos(e);return this.editInternal(u,c,i?[i]:[],a)}editBulkByPath(t,e,i,a=0){if(!this.context||!this.tree)throw new X($.ErrNotInitialized,"Tree is not initialized yet");if(t.length!==e.length)throw new X($.ErrInvalidArgument,"path length should be equal");if(!t.length||!e.length)throw new X($.ErrInvalidArgument,"path should not be empty");const u=this.tree.pathToPos(t),c=this.tree.pathToPos(e);return this.editInternal(u,c,i,a)}edit(t,e,i,a=0){if(!this.context||!this.tree)throw new X($.ErrNotInitialized,"Tree is not initialized yet");if(t>e)throw new X($.ErrInvalidArgument,"from should be less than or equal to to");const u=this.tree.findPos(t),c=this.tree.findPos(e);return this.editInternal(u,c,i?[i]:[],a)}editBulk(t,e,i,a=0){if(!this.context||!this.tree)throw new X($.ErrNotInitialized,"Tree is not initialized yet");if(t>e)throw new X($.ErrInvalidArgument,"from should be less than or equal to to");const u=this.tree.findPos(t),c=this.tree.findPos(e);return this.editInternal(u,c,i,a)}toXML(){if(!this.context||!this.tree)throw new X($.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toXML()}toJSON(){if(!this.context||!this.tree)throw new X($.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toJSON()}toJSForTest(){if(!this.context||!this.tree)throw new X($.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toJSForTest()}toJSInfoForTest(){if(!this.context||!this.tree)throw new X($.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toJSInfoForTest()}getRootTreeNode(){if(!this.context||!this.tree)throw new X($.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getRootTreeNode()}indexToPath(t){if(!this.context||!this.tree)throw new X($.ErrNotInitialized,"Tree is not initialized yet");return this.tree.indexToPath(t)}pathToIndex(t){if(!this.context||!this.tree)throw new X($.ErrNotInitialized,"Tree is not initialized yet");return this.tree.pathToIndex(t)}pathRangeToPosRange(t){if(!this.context||!this.tree)throw new X($.ErrNotInitialized,"Tree is not initialized yet");const e=[this.tree.pathToIndex(t[0]),this.tree.pathToIndex(t[1])],i=this.tree.indexRangeToPosRange(e);return[i[0].toStruct(),i[1].toStruct()]}indexRangeToPosRange(t){if(!this.context||!this.tree)throw new X($.ErrNotInitialized,"Tree is not initialized yet");return this.tree.indexRangeToPosStructRange(t)}posRangeToIndexRange(t){if(!this.context||!this.tree)throw new X($.ErrNotInitialized,"Tree is not initialized yet");const e=[Kn.fromStruct(t[0]),Kn.fromStruct(t[1])];return this.tree.posRangeToIndexRange(e)}posRangeToPathRange(t){if(!this.context||!this.tree)throw new X($.ErrNotInitialized,"Tree is not initialized yet");const e=[Kn.fromStruct(t[0]),Kn.fromStruct(t[1])];return this.tree.posRangeToPathRange(e)}}function Nb(n,t){return HS(n,t)}function _s(n,t){if(t){if(t instanceof ce)return t;if(t instanceof We)return HS(n,t);if(t instanceof hn)return AC(n,t);if(t instanceof Ln)return new zy(n,t);if(t instanceof gn){const e=new Ly(Tr.Int,0);return e.initialize(n,t),e}else if(t instanceof _n){const e=new qy;return e.initialize(n,t),e}}else return;throw new TypeError(`Unsupported type of element: ${typeof t}`)}function va(n,t){const e=_s(n,t);return e instanceof ce?e.getValue():e}function ld(n,t,e){let i;if(ce.isSupport(t))i=ce.of(t,e);else if(Array.isArray(t))i=hn.create(e,le.buildArrayElements(n,t));else if(typeof t=="object")t instanceof zy?(i=Ln.create(Ho.create(),e),t.initialize(n,i)):t instanceof Ly?(i=gn.create(t.getValueType(),t.getValue(),e),t.initialize(n,i)):t instanceof qy?(i=_n.create(t.buildRoot(n),e),t.initialize(n,i)):i=We.create(e,Nu.buildObjectMembers(n,t));else throw new TypeError(`Unsupported type of value: ${typeof t}`);return i}class hm{constructor(t,e){v(this,"context");v(this,"presence");this.context=t,this.presence=e}set(t,e){for(const i of Object.keys(t))this.presence[i]=t[i];this.context.setPresenceChange({type:xr.Put,presence:Vn(this.presence)}),this.context.setReversePresence(t,e)}get(t){return this.presence[t]}clear(){this.presence={},this.context.setPresenceChange({type:xr.Clear})}}const Cb=50;class IC{constructor(){v(this,"undoStack",[]);v(this,"redoStack",[])}hasUndo(){return this.undoStack.length>0}hasRedo(){return this.redoStack.length>0}pushUndo(t){this.undoStack.length>=Cb&&this.undoStack.shift(),this.undoStack.push(t)}popUndo(){return this.undoStack.pop()}pushRedo(t){this.redoStack.length>=Cb&&this.redoStack.shift(),this.redoStack.push(t)}popRedo(){return this.redoStack.pop()}clearRedo(){this.redoStack=[]}getUndoStackForTest(){return this.undoStack}getRedoStackForTest(){return this.redoStack}}const RC="yorkie-devtools-panel",MC="yorkie-devtools-sdk";function BC(n){return[ze.StatusChanged,ze.Snapshot,ze.LocalChange,ze.RemoteChange,ze.Initialized,ze.Watched,ze.Unwatched,ze.PresenceChanged].includes(n.type)}function zC(n){return n.every(BC)}let Eo="disconnected";const Db=new Map,Mf=new Map;typeof window<"u"&&(window.docEventsForReplayByDocKey=Mf);function vf(n,t){(t!=null&&t.force||Eo!=="disconnected")&&window.postMessage({source:MC,...n},"*")}function LC(n){if(!n.isEnableDevtools()||typeof window>"u"||Db.has(n.getKey()))return;Mf.set(n.getKey(),[]);const t=n.subscribe("all",e=>{zC(e)&&(Mf.get(n.getKey()).push(e),Eo==="synced"&&vf({msg:"doc::sync::partial",docKey:n.getKey(),event:e}))});Db.set(n.getKey(),[t]),vf({msg:"refresh-devtools"},{force:!0}),window.addEventListener("message",e=>{var a;if(((a=e.data)==null?void 0:a.source)!==RC)return;switch(e.data.msg){case"devtools::connect":if(Eo!=="disconnected")break;Eo="connected",vf({msg:"doc::available",docKey:n.getKey()}),xt.info(`[YD] Devtools connected. Doc: ${n.getKey()}`);break;case"devtools::disconnect":Eo="disconnected",xt.info(`[YD] Devtools disconnected. Doc: ${n.getKey()}`);break;case"devtools::subscribe":Eo="synced",vf({msg:"doc::sync::full",docKey:n.getKey(),events:Mf.get(n.getKey())}),xt.info(`[YD] Devtools subscribed. Doc: ${n.getKey()}`);break}})}var Us=(n=>(n.Detached="detached",n.Attached="attached",n.Removed="removed",n))(Us||{}),ze=(n=>(n.StatusChanged="status-changed",n.ConnectionChanged="connection-changed",n.SyncStatusChanged="sync-status-changed",n.Snapshot="snapshot",n.LocalChange="local-change",n.RemoteChange="remote-change",n.Initialized="initialized",n.Watched="watched",n.Unwatched="unwatched",n.PresenceChanged="presence-changed",n.Broadcast="broadcast",n.LocalBroadcast="local-broadcast",n.AuthError="auth-error",n))(ze||{}),ud=(n=>(n.Connected="connected",n.Disconnected="disconnected",n))(ud||{}),ny=(n=>(n.Synced="synced",n.SyncFailed="sync-failed",n))(ny||{});class VS{constructor(t,e){v(this,"key");v(this,"status");v(this,"opts");v(this,"changeID");v(this,"checkpoint");v(this,"localChanges");v(this,"root");v(this,"clone");v(this,"eventStream");v(this,"eventStreamObserver");v(this,"onlineClients");v(this,"presences");v(this,"history");v(this,"internalHistory");v(this,"isUpdating");this.opts=e||{},this.key=t,this.status="detached",this.root=Eu.create(),this.changeID=M2,this.checkpoint=B2,this.localChanges=[],this.eventStream=TC(i=>{this.eventStreamObserver=i}),this.onlineClients=new Set,this.presences=new Map,this.isUpdating=!1,this.internalHistory=new IC,this.history={canUndo:this.canUndo.bind(this),canRedo:this.canRedo.bind(this),undo:this.undo.bind(this),redo:this.redo.bind(this)},LC(this)}update(t,e){if(this.getStatus()==="removed")throw new X($.ErrDocumentRemoved,`${this.key} is removed`);this.ensureClone();const i=this.changeID.getActorID(),a=Co.create(this.changeID,this.clone.root,this.clone.presences.get(i)||{},e);try{const u=Nb(a,this.clone.root.getObject());this.presences.has(i)||this.clone.presences.set(i,{}),this.isUpdating=!0,t(u,new hm(a,this.clone.presences.get(i)))}catch(u){throw this.clone=void 0,u}finally{this.isUpdating=!1}if(a.hasChange()){xt.isEnabled(Fe.Trivial)&&xt.trivial(`trying to update a local change: ${this.toJSON()}`);const u=a.toChange(),{opInfos:c,reverseOps:d}=u.execute(this.root,this.presences,te.Local),h=a.getReversePresence();h&&d.push({type:"presence",value:h}),this.localChanges.push(u),d.length>0&&this.internalHistory.pushUndo(d),c.length>0&&this.internalHistory.clearRedo(),this.changeID=a.getNextID();const g=[];c.length>0&&g.push({type:"local-change",source:te.Local,value:{message:u.getMessage()||"",operations:c,actor:i,clientSeq:u.getID().getClientSeq(),serverSeq:u.getID().getServerSeq()},rawChange:this.isEnableDevtools()?u.toStruct():void 0}),u.hasPresenceChange()&&g.push({type:"presence-changed",source:te.Local,value:{clientID:i,presence:this.getPresence(i)}}),this.publish(g),xt.isEnabled(Fe.Trivial)&&xt.trivial(`after update a local change: ${this.toJSON()}`)}}subscribe(t,e,i,a){if(typeof t=="string"){if(typeof e!="function")throw new X($.ErrInvalidArgument,"Second argument must be a callback function");if(t==="presence"){const d=e;return this.eventStream.subscribe(h=>{for(const g of h)g.type!=="initialized"&&g.type!=="watched"&&g.type!=="unwatched"&&g.type!=="presence-changed"||d(g)},i,a)}if(t==="my-presence"){const d=e;return this.eventStream.subscribe(h=>{for(const g of h)g.type!=="initialized"&&g.type!=="presence-changed"||g.type==="presence-changed"&&g.value.clientID!==this.changeID.getActorID()||d(g)},i,a)}if(t==="others"){const d=e;return this.eventStream.subscribe(h=>{for(const g of h)g.type!=="watched"&&g.type!=="unwatched"&&g.type!=="presence-changed"||g.value.clientID!==this.changeID.getActorID()&&d(g)},i,a)}if(t==="connection"){const d=e;return this.eventStream.subscribe(h=>{for(const g of h)g.type==="connection-changed"&&d(g)},i,a)}if(t==="status"){const d=e;return this.eventStream.subscribe(h=>{for(const g of h)g.type==="status-changed"&&d(g)},i,a)}if(t==="sync"){const d=e;return this.eventStream.subscribe(h=>{for(const g of h)g.type==="sync-status-changed"&&d(g)},i,a)}if(t==="local-broadcast"){const d=e;return this.eventStream.subscribe(h=>{for(const g of h)g.type==="local-broadcast"&&d(g)},i)}if(t==="broadcast"){const d=e;return this.eventStream.subscribe(h=>{for(const g of h)g.type==="broadcast"&&d(g)},i)}if(t==="auth-error"){const d=e;return this.eventStream.subscribe(h=>{for(const g of h)g.type==="auth-error"&&d(g)},i)}if(t==="all"){const d=e;return this.eventStream.subscribe(d,i,a)}const u=t,c=e;return this.eventStream.subscribe(d=>{for(const h of d){if(h.type!=="local-change"&&h.type!=="remote-change")continue;const g=[];for(const y of h.value.operations)this.isSameElementOrChildOf(y.path,u)&&g.push(y);g.length&&c({...h,value:{...h.value,operations:g}})}},i,a)}if(typeof t=="function"){const u=t,c=e,d=i;return this.eventStream.subscribe(h=>{for(const g of h)g.type!=="snapshot"&&g.type!=="local-change"&&g.type!=="remote-change"||u(g)},c,d)}throw new X($.ErrInvalidArgument,`"${t}" is not a valid`)}publish(t){this.eventStreamObserver&&this.eventStreamObserver.next(t)}isSameElementOrChildOf(t,e){if(e===t)return!0;const i=t.split(".");return e.split(".").every((u,c)=>u===i[c])}removePushedLocalChanges(t){for(;this.localChanges.length&&!(this.localChanges[0].getID().getClientSeq()>t);)this.localChanges.shift()}applyChangePack(t){const e=t.hasSnapshot();e?this.applySnapshot(t.getCheckpoint().getServerSeq(),t.getVersionVector(),t.getSnapshot(),t.getCheckpoint().getClientSeq()):(this.applyChanges(t.getChanges(),te.Remote),this.removePushedLocalChanges(t.getCheckpoint().getClientSeq())),this.checkpoint=this.checkpoint.forward(t.getCheckpoint()),e||this.garbageCollect(t.getVersionVector()),t.getIsRemoved()&&this.applyStatus("removed"),xt.isEnabled(Fe.Trivial)&&xt.trivial(`${this.root.toJSON()}`)}getCheckpoint(){return this.checkpoint}getChangeID(){return this.changeID}hasLocalChanges(){return this.localChanges.length>0}ensureClone(){this.clone||(this.clone={root:this.root.deepcopy(),presences:Vn(this.presences)})}createChangePack(){const t=Array.from(this.localChanges),e=this.checkpoint.increaseClientSeq(t.length);return Cd.create(this.key,e,!1,t,this.getVersionVector())}setActor(t){for(const e of this.localChanges)e.setActor(t);this.changeID=this.changeID.setActor(t)}isEnableDevtools(){return!!this.opts.enableDevtools}getKey(){return this.key}getStatus(){return this.status}getCloneRoot(){if(this.clone)return this.clone.root.getObject()}getRoot(){this.ensureClone();const t=Co.create(this.changeID.next(),this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});return Nb(t,this.clone.root.getObject())}getDocSize(){return this.root.getDocSize()}garbageCollect(t){return this.opts.disableGC?0:(this.clone&&this.clone.root.garbageCollect(t),this.root.garbageCollect(t))}getRootObject(){return this.root.getObject()}getGarbageLen(){return this.root.getGarbageLen()}getGarbageLenFromClone(){return this.clone.root.getGarbageLen()}toJSON(){return this.root.toJSON()}toSortedJSON(){return this.root.toSortedJSON()}getStats(){return this.root.getStats()}toJSForTest(){return{...this.getRoot().toJSForTest(),key:"root"}}applySnapshot(t,e,i,a=-1){const{root:u,presences:c}=ge.bytesToSnapshot(i);this.root=new Eu(u),this.presences=c,this.changeID=this.changeID.setClocks(e.maxLamport(),e),this.clone=void 0,this.removePushedLocalChanges(a),this.applyChanges(this.localChanges,te.Local),this.publish([{type:"snapshot",source:te.Remote,value:{serverSeq:t.toString(),snapshot:this.isEnableDevtools()?ge.bytesToHex(i):void 0,snapshotVector:ge.versionVectorToHex(e)}}])}applyChanges(t,e){xt.isEnabled(Fe.Debug)&&xt.debug(`trying to apply ${t.length} remote changes.elements:${this.root.getElementMapSize()}, removeds:${this.root.getGarbageElementSetSize()}`),xt.isEnabled(Fe.Trivial)&&xt.trivial(t.map(i=>`${i.getID().toTestString()}	${i.toTestString()}`).join(`
`));for(const i of t)this.applyChange(i,e);xt.isEnabled(Fe.Debug)&&xt.debug(`after appling ${t.length} remote changes.elements:${this.root.getElementMapSize()},  removeds:${this.root.getGarbageElementSetSize()}`)}applyChange(t,e){this.ensureClone(),t.execute(this.clone.root,this.clone.presences,e);const i=[],a=t.getID().getActorID();if(t.hasPresenceChange()&&this.onlineClients.has(a)){const c=t.getPresenceChange();switch(c.type){case xr.Put:i.push(this.presences.has(a)?{type:"presence-changed",source:e,value:{clientID:a,presence:c.presence}}:{type:"watched",source:te.Remote,value:{clientID:a,presence:c.presence}});break;case xr.Clear:i.push({type:"unwatched",source:te.Remote,value:{clientID:a,presence:this.getPresence(a)}}),this.removeOnlineClient(a);break}}const{opInfos:u}=t.execute(this.root,this.presences,e);if(this.changeID=this.changeID.syncClocks(t.getID()),u.length>0){const c=this.isEnableDevtools()?t.toStruct():void 0;i.push(e===te.Remote?{type:"remote-change",source:e,value:{actor:a,clientSeq:t.getID().getClientSeq(),serverSeq:t.getID().getServerSeq(),message:t.getMessage()||"",operations:u},rawChange:c}:{type:"local-change",source:e,value:{actor:a,clientSeq:t.getID().getClientSeq(),serverSeq:t.getID().getServerSeq(),message:t.getMessage()||"",operations:u},rawChange:c})}i.length>0&&this.publish(i)}applyWatchStream(t){if(t.body.case==="initialization"){const e=t.body.value.clientIds,i=new Set;for(const a of e)a!==this.changeID.getActorID()&&i.add(a);this.setOnlineClients(i),this.publish([{type:"initialized",source:te.Local,value:this.getPresences()}]);return}if(t.body.case==="event"){const{type:e,publisher:i}=t.body.value,a=[];if(e===Aa.DOCUMENT_WATCHED){if(this.onlineClients.has(i)&&this.hasPresence(i))return;this.addOnlineClient(i),this.hasPresence(i)&&a.push({type:"watched",source:te.Remote,value:{clientID:i,presence:this.getPresence(i)}})}else if(e===Aa.DOCUMENT_UNWATCHED){const u=this.getPresence(i);this.removeOnlineClient(i),u&&a.push({type:"unwatched",source:te.Remote,value:{clientID:i,presence:u}})}else if(e===Aa.DOCUMENT_BROADCAST&&t.body.value.body){const{topic:u,payload:c}=t.body.value.body,d=new TextDecoder;a.push({type:"broadcast",value:{clientID:i,topic:u,payload:JSON.parse(d.decode(c))}})}a.length>0&&this.publish(a)}}applyStatus(t){this.status=t,t==="detached"&&this.setActor(Ed),this.publish([{source:t==="removed"?te.Remote:te.Local,type:"status-changed",value:t==="attached"?{status:t,actorID:this.changeID.getActorID()}:{status:t}}])}applyDocEventForReplay(t){if(t.type==="status-changed"){this.applyStatus(t.value.status),t.value.status==="attached"&&this.setActor(t.value.actorID);return}if(t.type==="snapshot"){const{snapshot:e,serverSeq:i,snapshotVector:a}=t.value;if(!e)return;this.applySnapshot(BigInt(i),ge.hexToVersionVector(a),ge.hexToBytes(e));return}if(t.type==="local-change"||t.type==="remote-change"){if(!t.rawChange)return;const e=Jo.fromStruct(t.rawChange);this.applyChange(e,t.source)}if(t.type==="initialized"){const e=new Set;for(const{clientID:i,presence:a}of t.value)e.add(i),this.presences.set(i,a);this.setOnlineClients(e);return}if(t.type==="watched"){const{clientID:e,presence:i}=t.value;this.addOnlineClient(e),this.presences.set(e,i);return}if(t.type==="unwatched"){const{clientID:e}=t.value;this.removeOnlineClient(e),this.presences.delete(e)}if(t.type==="presence-changed"){const{clientID:e,presence:i}=t.value;this.presences.set(e,i)}}applyDocEventsForReplay(t){for(const e of t)this.applyDocEventForReplay(e)}getValueByPath(t){if(!t.startsWith("$"))throw new X($.ErrInvalidArgument,'path must start with "$"');const e=t.split(".");e.shift();let i=this.getRoot();for(const a of e)if(i=i[a],i===void 0)return;return i}setOnlineClients(t){this.onlineClients=t}resetOnlineClients(){this.onlineClients=new Set}addOnlineClient(t){this.onlineClients.add(t)}removeOnlineClient(t){this.onlineClients.delete(t)}hasPresence(t){return this.presences.has(t)}getMyPresence(){if(this.status!=="attached")return{};const t=this.presences.get(this.changeID.getActorID());return t?Vn(t):{}}getPresence(t){if(t===this.changeID.getActorID())return this.getMyPresence();if(!this.onlineClients.has(t))return;const e=this.presences.get(t);return e?Vn(e):void 0}getPresenceForTest(t){const e=this.presences.get(t);return e?Vn(e):void 0}getPresences(){const t=[];t.push({clientID:this.changeID.getActorID(),presence:Vn(this.getMyPresence())});for(const e of this.onlineClients)this.presences.has(e)&&t.push({clientID:e,presence:Vn(this.presences.get(e))});return t}getSelfForTest(){return{clientID:this.getChangeID().getActorID(),presence:this.getMyPresence()}}getOthersForTest(){const t=this.getChangeID().getActorID();return this.getPresences().filter(e=>e.clientID!==t).sort((e,i)=>e.clientID>i.clientID?1:-1)}canUndo(){return this.internalHistory.hasUndo()&&!this.isUpdating}canRedo(){return this.internalHistory.hasRedo()&&!this.isUpdating}undo(){if(this.isUpdating)throw new X($.ErrRefused,"Undo is not allowed during an update");const t=this.internalHistory.popUndo();if(t===void 0)throw new X($.ErrRefused,"There is no operation to be undone");this.ensureClone();const e=Co.create(this.changeID,this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});for(const g of t){if(!(g instanceof Qn)){new hm(e,Vn(this.clone.presences.get(this.changeID.getActorID()))).set(g.value,{addToHistory:!0});continue}const y=e.issueTimeTicket();g.setExecutedAt(y),e.push(g)}const i=e.toChange();i.execute(this.clone.root,this.clone.presences,te.UndoRedo);const{opInfos:a,reverseOps:u}=i.execute(this.root,this.presences,te.UndoRedo),c=e.getReversePresence();if(c&&u.push({type:"presence",value:c}),u.length>0&&this.internalHistory.pushRedo(u),!i.hasPresenceChange()&&a.length===0)return;this.localChanges.push(i),this.changeID=e.getNextID();const d=this.changeID.getActorID(),h=[];a.length>0&&h.push({type:"local-change",source:te.UndoRedo,value:{message:i.getMessage()||"",operations:a,actor:d,clientSeq:i.getID().getClientSeq(),serverSeq:i.getID().getServerSeq()},rawChange:this.isEnableDevtools()?i.toStruct():void 0}),i.hasPresenceChange()&&h.push({type:"presence-changed",source:te.UndoRedo,value:{clientID:d,presence:this.getPresence(d)}}),this.publish(h)}redo(){if(this.isUpdating)throw new X($.ErrRefused,"Redo is not allowed during an update");const t=this.internalHistory.popRedo();if(t===void 0)throw new X($.ErrRefused,"There is no operation to be redone");this.ensureClone();const e=Co.create(this.changeID,this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});for(const g of t){if(!(g instanceof Qn)){new hm(e,Vn(this.clone.presences.get(this.changeID.getActorID()))).set(g.value,{addToHistory:!0});continue}const y=e.issueTimeTicket();g.setExecutedAt(y),e.push(g)}const i=e.toChange();i.execute(this.clone.root,this.clone.presences,te.UndoRedo);const{opInfos:a,reverseOps:u}=i.execute(this.root,this.presences,te.UndoRedo),c=e.getReversePresence();if(c&&u.push({type:"presence",value:c}),u.length>0&&this.internalHistory.pushUndo(u),!i.hasPresenceChange()&&a.length===0)return;this.localChanges.push(i),this.changeID=e.getNextID();const d=this.changeID.getActorID(),h=[];a.length>0&&h.push({type:"local-change",source:te.UndoRedo,value:{message:i.getMessage()||"",operations:a,actor:d,clientSeq:i.getID().getClientSeq(),serverSeq:i.getID().getServerSeq()},rawChange:this.isEnableDevtools()?i.toStruct():void 0}),i.hasPresenceChange()&&h.push({type:"presence-changed",source:te.UndoRedo,value:{clientID:d,presence:this.getPresence(d)}}),this.publish(h)}getUndoStackForTest(){return this.internalHistory.getUndoStackForTest()}getRedoStackForTest(){return this.internalHistory.getRedoStackForTest()}broadcast(t,e,i){const a={type:"local-broadcast",value:{topic:t,payload:e},options:i};this.publish([a])}getVersionVector(){return this.changeID.getVersionVector()}}function _C(n,t){let e=t;return{authInterceptor:u=>async c=>(n&&c.header.set("x-api-key",n),e&&c.header.set("authorization",e),await u(c)),setToken:u=>{e=u}}}const UC="@yorkie-js/sdk",qC="0.6.10",kb={name:UC,version:qC};function PC(n){return t=>async e=>(n?e.header.set("x-yorkie-user-agent",n):e.header.set("x-yorkie-user-agent",kb.name+"/"+kb.version),await t(e))}const JC=n=>{try{if(JSON.stringify(n)===void 0)return!1}catch{return!1}return!0};var Bf=(n=>(n.Manual="manual",n.Realtime="realtime",n.RealtimePushOnly="realtime-pushonly",n.RealtimeSyncOff="realtime-syncoff",n))(Bf||{});const iu={rpcAddr:"https://api.yorkie.dev",syncLoopDuration:50,retrySyncLoopDelay:1e3,reconnectStreamDelay:1e3},gm={maxRetries:1/0,initialRetryInterval:1e3,maxBackoff:2e4};class jS{constructor(t){v(this,"id");v(this,"key");v(this,"metadata");v(this,"status");v(this,"attachmentMap");v(this,"apiKey");v(this,"authTokenInjector");v(this,"conditions");v(this,"syncLoopDuration");v(this,"reconnectStreamDelay");v(this,"retrySyncLoopDelay");v(this,"rpcClient");v(this,"setAuthToken");v(this,"taskQueue");v(this,"processing",!1);v(this,"keepalive",!1);t=t||iu;const e=t.rpcAddr||iu.rpcAddr;this.key=t.key||JS(),this.metadata=t.metadata||{},this.status="deactivated",this.attachmentMap=new Map,this.apiKey=t.apiKey||"",this.authTokenInjector=t.authTokenInjector,this.conditions={SyncLoop:!1,WatchLoop:!1},this.syncLoopDuration=t.syncLoopDuration??iu.syncLoopDuration,this.reconnectStreamDelay=t.reconnectStreamDelay??iu.reconnectStreamDelay,this.retrySyncLoopDelay=t.retrySyncLoopDelay??iu.retrySyncLoopDelay;const{authInterceptor:i,setToken:a}=_C(this.apiKey);this.setAuthToken=a,this.rpcClient=YN(m2,g2({baseUrl:e,interceptors:[i,PC(t==null?void 0:t.userAgent)],fetch:(u,c)=>{const d={...c,keepalive:this.keepalive};return fetch(u,d)}})),this.taskQueue=[]}async activate(){if(this.isActive())return Promise.resolve();if(this.authTokenInjector){const t=await this.authTokenInjector();this.setAuthToken(t)}return this.enqueueTask(async()=>{try{const t=await this.rpcClient.activateClient({clientKey:this.key,metadata:this.metadata},{headers:{"x-shard-key":this.apiKey}});this.id=t.clientId,this.status="activated",this.runSyncLoop(),xt.info(`[AC] c:"${this.getKey()}" activated, id:"${this.id}"`),typeof window<"u"&&window.addEventListener("beforeunload",async()=>{await this.deactivate({keepalive:!0})})}catch(t){throw xt.error(`[AC] c:"${this.getKey()}" err :`,t),await this.handleConnectError(t),t}})}deactivate(t={keepalive:!1}){if(this.status==="deactivated")return Promise.resolve();const e=async()=>{try{await this.rpcClient.deactivateClient({clientId:this.id},{headers:{"x-shard-key":this.apiKey}}),this.deactivateInternal(),xt.info(`[DC] c"${this.getKey()}" deactivated`)}catch(i){throw xt.error(`[DC] c:"${this.getKey()}" err :`,i),await this.handleConnectError(i),i}};if(t.keepalive){this.keepalive=!0;const i=e();return this.keepalive=!1,i}return this.enqueueTask(e)}hasDocument(t){return this.attachmentMap.has(t)}attach(t,e={}){if(!this.isActive())throw new X($.ErrClientNotActivated,`${this.key} is not active`);if(t.getStatus()!==Us.Detached)throw new X($.ErrDocumentNotDetached,`${t.getKey()} is not detached`);t.setActor(this.id),t.update((u,c)=>c.set(e.initialPresence||{}));const i=t.subscribe("local-broadcast",async u=>{var y;const{topic:c,payload:d}=u.value,h=(y=u.options)==null?void 0:y.error,g=u.options;try{await this.broadcast(t.getKey(),c,d,g)}catch(w){w instanceof Error&&(h==null||h(w))}}),a=e.syncMode??"realtime";return this.enqueueTask(async()=>{try{const u=await this.rpcClient.attachDocument({clientId:this.id,changePack:ge.toChangePack(t.createChangePack())},{headers:{"x-shard-key":`${this.apiKey}/${t.getKey()}`}}),c=ge.fromChangePack(u.changePack);if(t.applyChangePack(c),t.getStatus()===Us.Removed)return t;t.applyStatus(Us.Attached),this.attachmentMap.set(t.getKey(),new SC(this.reconnectStreamDelay,t,u.documentId,a,i)),a!=="manual"&&await this.runWatchLoop(t.getKey()),xt.info(`[AD] c:"${this.getKey()}" attaches d:"${t.getKey()}"`);const d=t.getRootObject();if(e.initialRoot){const h=e.initialRoot;t.update(g=>{for(const[y,w]of Object.entries(h))if(!d.has(y)){const p=y;g[p]=w}})}return t}catch(u){throw xt.error(`[AD] c:"${this.getKey()}" err :`,u),await this.handleConnectError(u),u}})}detach(t,e={keepalive:!1}){if(!this.isActive())throw new X($.ErrClientNotActivated,`${this.key} is not active`);const i=this.attachmentMap.get(t.getKey());if(!i)throw new X($.ErrDocumentNotAttached,`${t.getKey()} is not attached`);t.update((u,c)=>c.clear());const a=async()=>{try{const u=await this.rpcClient.detachDocument({clientId:this.id,documentId:i.docID,changePack:ge.toChangePack(t.createChangePack()),removeIfNotAttached:e.removeIfNotAttached??!1},{headers:{"x-shard-key":`${this.apiKey}/${t.getKey()}`}}),c=ge.fromChangePack(u.changePack);return t.applyChangePack(c),t.getStatus()!==Us.Removed&&t.applyStatus(Us.Detached),this.detachInternal(t.getKey()),xt.info(`[DD] c:"${this.getKey()}" detaches d:"${t.getKey()}"`),t}catch(u){throw xt.error(`[DD] c:"${this.getKey()}" err :`,u),await this.handleConnectError(u),u}};if(e.keepalive){this.keepalive=!0;const u=a();return this.keepalive=!1,u}return this.enqueueTask(a)}async changeSyncMode(t,e){if(!this.isActive())throw new X($.ErrClientNotActivated,`${this.key} is not active`);const i=this.attachmentMap.get(t.getKey());if(!i)throw new X($.ErrDocumentNotAttached,`${t.getKey()} is not attached`);const a=i.syncMode;return a===e?t:(i.changeSyncMode(e),e==="manual"?(i.cancelWatchStream(),t):(e==="realtime"&&(i.remoteChangeEventReceived=!0),a==="manual"&&await this.runWatchLoop(t.getKey()),t))}sync(t){if(!this.isActive())throw new X($.ErrClientNotActivated,`${this.key} is not active`);if(t){const e=this.attachmentMap.get(t.getKey());if(!e)throw new X($.ErrDocumentNotAttached,`${t.getKey()} is not attached`);return this.enqueueTask(async()=>this.syncInternal(e,"realtime").catch(async i=>{throw xt.error(`[SY] c:"${this.getKey()}" err :`,i),await this.handleConnectError(i),i}))}return this.enqueueTask(async()=>{const e=[];for(const[,i]of this.attachmentMap)e.push(this.syncInternal(i,i.syncMode));return Promise.all(e).catch(async i=>{throw xt.error(`[SY] c:"${this.getKey()}" err :`,i),await this.handleConnectError(i),i})})}remove(t){if(!this.isActive())throw new X($.ErrClientNotActivated,`${this.key} is not active`);const e=this.attachmentMap.get(t.getKey());if(!e)throw new X($.ErrDocumentNotAttached,`${t.getKey()} is not attached`);t.setActor(this.id);const i=ge.toChangePack(t.createChangePack());return i.isRemoved=!0,this.enqueueTask(async()=>{try{const a=await this.rpcClient.removeDocument({clientId:this.id,documentId:e.docID,changePack:i},{headers:{"x-shard-key":`${this.apiKey}/${t.getKey()}`}}),u=ge.fromChangePack(a.changePack);t.applyChangePack(u),this.detachInternal(t.getKey()),xt.info(`[RD] c:"${this.getKey()}" removes d:"${t.getKey()}"`)}catch(a){throw xt.error(`[RD] c:"${this.getKey()}" err :`,a),await this.handleConnectError(a),a}})}getID(){return this.id}getKey(){return this.key}isActive(){return this.status==="activated"}getStatus(){return this.status}getCondition(t){return this.conditions[t]}broadcast(t,e,i,a){if(!this.isActive())throw new X($.ErrClientNotActivated,`${this.key} is not active`);const u=this.attachmentMap.get(t);if(!u)throw new X($.ErrDocumentNotAttached,`${t} is not attached`);if(!JC(i))throw new X($.ErrInvalidArgument,"payload is not serializable");const c=(a==null?void 0:a.maxRetries)??gm.maxRetries,d=gm.maxBackoff;let h=0;const g=w=>Math.min(gm.initialRetryInterval*2**w,d),y=async()=>this.enqueueTask(async()=>{try{await this.rpcClient.broadcast({clientId:this.id,documentId:u.docID,topic:e,payload:new TextEncoder().encode(JSON.stringify(i))},{headers:{"x-shard-key":`${this.apiKey}/${t}`}}),xt.info(`[BC] c:"${this.getKey()}" broadcasts d:"${t}" t:"${e}"`)}catch(w){if(xt.error(`[BC] c:"${this.getKey()}" err:`,w),await this.handleConnectError(w))if(w instanceof Gt&&Bs(w)===$.ErrUnauthenticated&&u.doc.publish([{type:ze.AuthError,value:{reason:ou(w).reason,method:"Broadcast"}}]),h<c)h++,setTimeout(()=>y(),g(h-1)),xt.info(`[BC] c:"${this.getKey()}" retry attempt ${h}/${c}`);else throw xt.error(`[BC] c:"${this.getKey()}" exceeded maximum retry attempts`),w;else throw w}});return y()}runSyncLoop(){const t=()=>{if(!this.isActive()){xt.debug(`[SL] c:"${this.getKey()}" exit sync loop`),this.conditions.SyncLoop=!1;return}const e=[];for(const[,i]of this.attachmentMap)i.needRealtimeSync()&&(i.remoteChangeEventReceived=!1,e.push(this.syncInternal(i,i.syncMode).catch(async a=>{throw a instanceof Gt&&Bs(a)===$.ErrUnauthenticated&&i.doc.publish([{type:ze.AuthError,value:{reason:ou(a).reason,method:"PushPull"}}]),a})));Promise.all(e).then(()=>setTimeout(t,this.syncLoopDuration)).catch(async i=>{xt.error(`[SL] c:"${this.getKey()}" sync failed:`,i),await this.handleConnectError(i)?setTimeout(t,this.retrySyncLoopDelay):this.conditions.SyncLoop=!1})};xt.debug(`[SL] c:"${this.getKey()}" run sync loop`),this.conditions.SyncLoop=!0,t()}async runWatchLoop(t){const e=this.attachmentMap.get(t);if(!e)throw new X($.ErrDocumentNotAttached,`${t} is not attached`);return this.conditions.WatchLoop=!0,e.runWatchLoop(i=>{if(!this.isActive())return this.conditions.WatchLoop=!1,Promise.reject(new X($.ErrClientNotActivated,`${this.key} is not active`));const a=new AbortController,u=this.rpcClient.watchDocument({clientId:this.id,documentId:e.docID},{headers:{"x-shard-key":`${this.apiKey}/${t}`},signal:a.signal});return e.doc.publish([{type:ze.ConnectionChanged,value:ud.Connected}]),xt.info(`[WD] c:"${this.getKey()}" watches d:"${t}"`),new Promise((c,d)=>{(async()=>{try{for await(const g of u)this.handleWatchDocumentsResponse(e,g),g.body.case==="initialization"&&c([u,a])}catch(g){e.doc.resetOnlineClients(),e.doc.publish([{type:ze.Initialized,source:te.Local,value:e.doc.getPresences()}]),e.doc.publish([{type:ze.ConnectionChanged,value:ud.Disconnected}]),xt.debug(`[WD] c:"${this.getKey()}" unwatches`),await this.handleConnectError(g)?(g instanceof Gt&&Bs(g)===$.ErrUnauthenticated&&e.doc.publish([{type:ze.AuthError,value:{reason:ou(g).reason,method:"WatchDocuments"}}]),i()):this.conditions.WatchLoop=!1,d(g)}})()})})}handleWatchDocumentsResponse(t,e){if(e.body.case==="event"&&e.body.value.type===Aa.DOCUMENT_CHANGED){t.remoteChangeEventReceived=!0;return}t.doc.applyWatchStream(e)}deactivateInternal(){this.status="deactivated";for(const[t,e]of this.attachmentMap)this.detachInternal(t),e.doc.applyStatus(Us.Detached)}detachInternal(t){const e=this.attachmentMap.get(t);e&&(e.cancelWatchStream(),e.unsubscribeBroadcastEvent(),this.attachmentMap.delete(t))}async syncInternal(t,e){const{doc:i,docID:a}=t,u=i.createChangePack();try{const c=await this.rpcClient.pushPullChanges({clientId:this.id,documentId:a,changePack:ge.toChangePack(u),pushOnly:e==="realtime-pushonly"},{headers:{"x-shard-key":`${this.apiKey}/${i.getKey()}`}}),d=ge.fromChangePack(c.changePack);if(d.hasChanges()&&(t.syncMode==="realtime-pushonly"||t.syncMode==="realtime-syncoff"))return i;i.applyChangePack(d),t.doc.publish([{type:ze.SyncStatusChanged,value:ny.Synced}]),i.getStatus()===Us.Removed&&this.detachInternal(i.getKey());const h=i.getKey(),g=d.getChangeSize();return xt.info(`[PP] c:"${this.getKey()}" sync d:"${h}", push:${u.getChangeSize()} pull:${g} cp:${d.getCheckpoint().toTestString()}`),i}catch(c){throw i.publish([{type:ze.SyncStatusChanged,value:ny.SyncFailed}]),xt.error(`[PP] c:"${this.getKey()}" err :`,c),c}}async handleConnectError(t){if(!(t instanceof Gt))return!1;if(t.code===_t.Canceled||t.code===_t.Unknown||t.code===_t.ResourceExhausted||t.code===_t.Unavailable)return!0;if(Bs(t)===$.ErrUnauthenticated){if(this.authTokenInjector){const e=await this.authTokenInjector(ou(t).reason);this.setAuthToken(e)}return!0}return Bs(t)===$.ErrTooManySubscribers?(xt.error(`[WD] c:"${this.getKey()}" err :`,t.rawMessage),!0):(Bs(t)===$.ErrTooManyAttachments||(Bs(t)===$.ErrClientNotActivated||Bs(t)===$.ErrClientNotFound)&&this.deactivateInternal(),!1)}enqueueTask(t){return new Promise((e,i)=>{this.taskQueue.push(()=>t().then(e).catch(i)),this.processing||this.processNext()})}async processNext(){if(this.taskQueue.length===0){this.processing=!1;return}try{this.processing=!0,await this.taskQueue.shift()()}catch{xt.error(`[TQ] c:"${this.getKey()}" process failed, id:"${this.id}"`)}this.processNext()}}Tr.Int,Tr.Long;typeof globalThis<"u"&&(globalThis.yorkie={Client:jS,Document:VS,Primitive:ce,Text:zy,Counter:Ly,Tree:qy,LogLevel:Fe,setLogLevel:bC,IntType:Tr.Int,LongType:Tr.Long});const YS=W.createContext({client:void 0,loading:!0,error:void 0});function HC(n){const[t,e]=W.useState(void 0),[i,a]=W.useState(!0),[u,c]=W.useState(void 0),[d,h]=W.useState(!1);return W.useEffect(()=>{h(!0)},[]),W.useEffect(()=>{a(!0),c(void 0);async function g(){if(d)try{const y=new jS(n);await y.activate(),e(y)}catch(y){c(y instanceof Error?y:new Error("Failed to activate client"))}finally{a(!1)}}return g(),()=>{t!=null&&t.isActive()&&t.deactivate({keepalive:!0})}},[n.apiKey,n.rpcAddr,d]),{client:t,loading:i,error:u}}const $C=({children:n,...t})=>{const e=W.useMemo(()=>({userAgent:Pw.name+"/"+Pw.version,...t}),[t.apiKey,t.rpcAddr]),{client:i,loading:a,error:u}=HC(e);return Z.jsx(YS.Provider,{value:{client:i,loading:a,error:u},children:n})},VC=()=>{const n=W.useContext(YS);if(!n)throw new Error("useYorkie must be used under YorkieProvider");return{client:n.client,loading:n.loading,error:n.error}};function jC(n,t,e,i,a,u){const[c,d]=W.useState(),[h,g]=W.useState(!0),[y,w]=W.useState(),[p,b]=W.useState(a),[x,C]=W.useState([]),[I,O]=W.useState(ud.Disconnected);W.useEffect(()=>{if(e){g(!1),w(e);return}if(!n||t){g(!0);return}g(!0),w(void 0);const E=new VS(i),k=[];k.push(E.subscribe(()=>{b(E.getRoot())})),k.push(E.subscribe("presence",()=>{C(E.getPresences())})),k.push(E.subscribe("connection",V=>{O(V.value)}));async function L(){try{await(n==null?void 0:n.attach(E,{initialRoot:a,initialPresence:u})),d(E),b(E.getRoot()),C(E.getPresences())}catch(V){w(V instanceof Error?V:new Error("Failed to attach document"))}finally{g(!1)}}return L(),()=>{n&&n.hasDocument(i)&&n.detach(E);for(const V of k)V()}},[n,t,e,i]);const z=W.useCallback(E=>{if(c)try{c.update(E)}catch(k){w(k instanceof Error?k:new Error("Failed to update document"))}},[c]);return{doc:c,root:p,presences:x,connection:I,update:z,loading:h,error:y}}const GS=W.createContext(null),YC=({docKey:n,initialRoot:t={},initialPresence:e={},children:i})=>{const{client:a,loading:u,error:c}=VC(),{doc:d,root:h,presences:g,connection:y,update:w,loading:p,error:b}=jC(a,u,c,n,t,e);return Z.jsx(GS.Provider,{value:{doc:d,root:h,presences:g,connection:y,update:w,loading:p,error:b},children:i})},GC=()=>{const n=W.useContext(GS);if(!n)throw new Error("useDocument must be used within a DocumentProvider");return{doc:n.doc,root:n.root,presences:n.presences,connection:n.connection,update:n.update,loading:n.loading,error:n.error}};function be(n){if(typeof n=="string"||typeof n=="number")return""+n;let t="";if(Array.isArray(n))for(let e=0,i;e<n.length;e++)(i=be(n[e]))!==""&&(t+=(t&&" ")+i);else for(let e in n)n[e]&&(t+=(t&&" ")+e);return t}var XC={value:()=>{}};function Dd(){for(var n=0,t=arguments.length,e={},i;n<t;++n){if(!(i=arguments[n]+"")||i in e||/[\s.]/.test(i))throw new Error("illegal type: "+i);e[i]=[]}return new zf(e)}function zf(n){this._=n}function KC(n,t){return n.trim().split(/^|\s+/).map(function(e){var i="",a=e.indexOf(".");if(a>=0&&(i=e.slice(a+1),e=e.slice(0,a)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:i}})}zf.prototype=Dd.prototype={constructor:zf,on:function(n,t){var e=this._,i=KC(n+"",e),a,u=-1,c=i.length;if(arguments.length<2){for(;++u<c;)if((a=(n=i[u]).type)&&(a=FC(e[a],n.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++u<c;)if(a=(n=i[u]).type)e[a]=Ob(e[a],n.name,t);else if(t==null)for(a in e)e[a]=Ob(e[a],n.name,null);return this},copy:function(){var n={},t=this._;for(var e in t)n[e]=t[e].slice();return new zf(n)},call:function(n,t){if((a=arguments.length-2)>0)for(var e=new Array(a),i=0,a,u;i<a;++i)e[i]=arguments[i+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(u=this._[n],i=0,a=u.length;i<a;++i)u[i].value.apply(t,e)},apply:function(n,t,e){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var i=this._[n],a=0,u=i.length;a<u;++a)i[a].value.apply(t,e)}};function FC(n,t){for(var e=0,i=n.length,a;e<i;++e)if((a=n[e]).name===t)return a.value}function Ob(n,t,e){for(var i=0,a=n.length;i<a;++i)if(n[i].name===t){n[i]=XC,n=n.slice(0,i).concat(n.slice(i+1));break}return e!=null&&n.push({name:t,value:e}),n}var ry="http://www.w3.org/1999/xhtml";const Ib={svg:"http://www.w3.org/2000/svg",xhtml:ry,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function kd(n){var t=n+="",e=t.indexOf(":");return e>=0&&(t=n.slice(0,e))!=="xmlns"&&(n=n.slice(e+1)),Ib.hasOwnProperty(t)?{space:Ib[t],local:n}:n}function ZC(n){return function(){var t=this.ownerDocument,e=this.namespaceURI;return e===ry&&t.documentElement.namespaceURI===ry?t.createElement(n):t.createElementNS(e,n)}}function QC(n){return function(){return this.ownerDocument.createElementNS(n.space,n.local)}}function XS(n){var t=kd(n);return(t.local?QC:ZC)(t)}function WC(){}function Py(n){return n==null?WC:function(){return this.querySelector(n)}}function t3(n){typeof n!="function"&&(n=Py(n));for(var t=this._groups,e=t.length,i=new Array(e),a=0;a<e;++a)for(var u=t[a],c=u.length,d=i[a]=new Array(c),h,g,y=0;y<c;++y)(h=u[y])&&(g=n.call(h,h.__data__,y,u))&&("__data__"in h&&(g.__data__=h.__data__),d[y]=g);return new mn(i,this._parents)}function e3(n){return n==null?[]:Array.isArray(n)?n:Array.from(n)}function n3(){return[]}function KS(n){return n==null?n3:function(){return this.querySelectorAll(n)}}function r3(n){return function(){return e3(n.apply(this,arguments))}}function i3(n){typeof n=="function"?n=r3(n):n=KS(n);for(var t=this._groups,e=t.length,i=[],a=[],u=0;u<e;++u)for(var c=t[u],d=c.length,h,g=0;g<d;++g)(h=c[g])&&(i.push(n.call(h,h.__data__,g,c)),a.push(h));return new mn(i,a)}function FS(n){return function(){return this.matches(n)}}function ZS(n){return function(t){return t.matches(n)}}var s3=Array.prototype.find;function a3(n){return function(){return s3.call(this.children,n)}}function o3(){return this.firstElementChild}function l3(n){return this.select(n==null?o3:a3(typeof n=="function"?n:ZS(n)))}var u3=Array.prototype.filter;function c3(){return Array.from(this.children)}function f3(n){return function(){return u3.call(this.children,n)}}function d3(n){return this.selectAll(n==null?c3:f3(typeof n=="function"?n:ZS(n)))}function h3(n){typeof n!="function"&&(n=FS(n));for(var t=this._groups,e=t.length,i=new Array(e),a=0;a<e;++a)for(var u=t[a],c=u.length,d=i[a]=[],h,g=0;g<c;++g)(h=u[g])&&n.call(h,h.__data__,g,u)&&d.push(h);return new mn(i,this._parents)}function QS(n){return new Array(n.length)}function g3(){return new mn(this._enter||this._groups.map(QS),this._parents)}function cd(n,t){this.ownerDocument=n.ownerDocument,this.namespaceURI=n.namespaceURI,this._next=null,this._parent=n,this.__data__=t}cd.prototype={constructor:cd,appendChild:function(n){return this._parent.insertBefore(n,this._next)},insertBefore:function(n,t){return this._parent.insertBefore(n,t)},querySelector:function(n){return this._parent.querySelector(n)},querySelectorAll:function(n){return this._parent.querySelectorAll(n)}};function m3(n){return function(){return n}}function y3(n,t,e,i,a,u){for(var c=0,d,h=t.length,g=u.length;c<g;++c)(d=t[c])?(d.__data__=u[c],i[c]=d):e[c]=new cd(n,u[c]);for(;c<h;++c)(d=t[c])&&(a[c]=d)}function p3(n,t,e,i,a,u,c){var d,h,g=new Map,y=t.length,w=u.length,p=new Array(y),b;for(d=0;d<y;++d)(h=t[d])&&(p[d]=b=c.call(h,h.__data__,d,t)+"",g.has(b)?a[d]=h:g.set(b,h));for(d=0;d<w;++d)b=c.call(n,u[d],d,u)+"",(h=g.get(b))?(i[d]=h,h.__data__=u[d],g.delete(b)):e[d]=new cd(n,u[d]);for(d=0;d<y;++d)(h=t[d])&&g.get(p[d])===h&&(a[d]=h)}function v3(n){return n.__data__}function w3(n,t){if(!arguments.length)return Array.from(this,v3);var e=t?p3:y3,i=this._parents,a=this._groups;typeof n!="function"&&(n=m3(n));for(var u=a.length,c=new Array(u),d=new Array(u),h=new Array(u),g=0;g<u;++g){var y=i[g],w=a[g],p=w.length,b=b3(n.call(y,y&&y.__data__,g,i)),x=b.length,C=d[g]=new Array(x),I=c[g]=new Array(x),O=h[g]=new Array(p);e(y,w,C,I,O,b,t);for(var z=0,E=0,k,L;z<x;++z)if(k=C[z]){for(z>=E&&(E=z+1);!(L=I[E])&&++E<x;);k._next=L||null}}return c=new mn(c,i),c._enter=d,c._exit=h,c}function b3(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function S3(){return new mn(this._exit||this._groups.map(QS),this._parents)}function x3(n,t,e){var i=this.enter(),a=this,u=this.exit();return typeof n=="function"?(i=n(i),i&&(i=i.selection())):i=i.append(n+""),t!=null&&(a=t(a),a&&(a=a.selection())),e==null?u.remove():e(u),i&&a?i.merge(a).order():a}function T3(n){for(var t=n.selection?n.selection():n,e=this._groups,i=t._groups,a=e.length,u=i.length,c=Math.min(a,u),d=new Array(a),h=0;h<c;++h)for(var g=e[h],y=i[h],w=g.length,p=d[h]=new Array(w),b,x=0;x<w;++x)(b=g[x]||y[x])&&(p[x]=b);for(;h<a;++h)d[h]=e[h];return new mn(d,this._parents)}function A3(){for(var n=this._groups,t=-1,e=n.length;++t<e;)for(var i=n[t],a=i.length-1,u=i[a],c;--a>=0;)(c=i[a])&&(u&&c.compareDocumentPosition(u)^4&&u.parentNode.insertBefore(c,u),u=c);return this}function E3(n){n||(n=N3);function t(w,p){return w&&p?n(w.__data__,p.__data__):!w-!p}for(var e=this._groups,i=e.length,a=new Array(i),u=0;u<i;++u){for(var c=e[u],d=c.length,h=a[u]=new Array(d),g,y=0;y<d;++y)(g=c[y])&&(h[y]=g);h.sort(t)}return new mn(a,this._parents).order()}function N3(n,t){return n<t?-1:n>t?1:n>=t?0:NaN}function C3(){var n=arguments[0];return arguments[0]=this,n.apply(null,arguments),this}function D3(){return Array.from(this)}function k3(){for(var n=this._groups,t=0,e=n.length;t<e;++t)for(var i=n[t],a=0,u=i.length;a<u;++a){var c=i[a];if(c)return c}return null}function O3(){let n=0;for(const t of this)++n;return n}function I3(){return!this.node()}function R3(n){for(var t=this._groups,e=0,i=t.length;e<i;++e)for(var a=t[e],u=0,c=a.length,d;u<c;++u)(d=a[u])&&n.call(d,d.__data__,u,a);return this}function M3(n){return function(){this.removeAttribute(n)}}function B3(n){return function(){this.removeAttributeNS(n.space,n.local)}}function z3(n,t){return function(){this.setAttribute(n,t)}}function L3(n,t){return function(){this.setAttributeNS(n.space,n.local,t)}}function _3(n,t){return function(){var e=t.apply(this,arguments);e==null?this.removeAttribute(n):this.setAttribute(n,e)}}function U3(n,t){return function(){var e=t.apply(this,arguments);e==null?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,e)}}function q3(n,t){var e=kd(n);if(arguments.length<2){var i=this.node();return e.local?i.getAttributeNS(e.space,e.local):i.getAttribute(e)}return this.each((t==null?e.local?B3:M3:typeof t=="function"?e.local?U3:_3:e.local?L3:z3)(e,t))}function WS(n){return n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView}function P3(n){return function(){this.style.removeProperty(n)}}function J3(n,t,e){return function(){this.style.setProperty(n,t,e)}}function H3(n,t,e){return function(){var i=t.apply(this,arguments);i==null?this.style.removeProperty(n):this.style.setProperty(n,i,e)}}function $3(n,t,e){return arguments.length>1?this.each((t==null?P3:typeof t=="function"?H3:J3)(n,t,e??"")):Vo(this.node(),n)}function Vo(n,t){return n.style.getPropertyValue(t)||WS(n).getComputedStyle(n,null).getPropertyValue(t)}function V3(n){return function(){delete this[n]}}function j3(n,t){return function(){this[n]=t}}function Y3(n,t){return function(){var e=t.apply(this,arguments);e==null?delete this[n]:this[n]=e}}function G3(n,t){return arguments.length>1?this.each((t==null?V3:typeof t=="function"?Y3:j3)(n,t)):this.node()[n]}function tx(n){return n.trim().split(/^|\s+/)}function Jy(n){return n.classList||new ex(n)}function ex(n){this._node=n,this._names=tx(n.getAttribute("class")||"")}ex.prototype={add:function(n){var t=this._names.indexOf(n);t<0&&(this._names.push(n),this._node.setAttribute("class",this._names.join(" ")))},remove:function(n){var t=this._names.indexOf(n);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(n){return this._names.indexOf(n)>=0}};function nx(n,t){for(var e=Jy(n),i=-1,a=t.length;++i<a;)e.add(t[i])}function rx(n,t){for(var e=Jy(n),i=-1,a=t.length;++i<a;)e.remove(t[i])}function X3(n){return function(){nx(this,n)}}function K3(n){return function(){rx(this,n)}}function F3(n,t){return function(){(t.apply(this,arguments)?nx:rx)(this,n)}}function Z3(n,t){var e=tx(n+"");if(arguments.length<2){for(var i=Jy(this.node()),a=-1,u=e.length;++a<u;)if(!i.contains(e[a]))return!1;return!0}return this.each((typeof t=="function"?F3:t?X3:K3)(e,t))}function Q3(){this.textContent=""}function W3(n){return function(){this.textContent=n}}function tD(n){return function(){var t=n.apply(this,arguments);this.textContent=t??""}}function eD(n){return arguments.length?this.each(n==null?Q3:(typeof n=="function"?tD:W3)(n)):this.node().textContent}function nD(){this.innerHTML=""}function rD(n){return function(){this.innerHTML=n}}function iD(n){return function(){var t=n.apply(this,arguments);this.innerHTML=t??""}}function sD(n){return arguments.length?this.each(n==null?nD:(typeof n=="function"?iD:rD)(n)):this.node().innerHTML}function aD(){this.nextSibling&&this.parentNode.appendChild(this)}function oD(){return this.each(aD)}function lD(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function uD(){return this.each(lD)}function cD(n){var t=typeof n=="function"?n:XS(n);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function fD(){return null}function dD(n,t){var e=typeof n=="function"?n:XS(n),i=t==null?fD:typeof t=="function"?t:Py(t);return this.select(function(){return this.insertBefore(e.apply(this,arguments),i.apply(this,arguments)||null)})}function hD(){var n=this.parentNode;n&&n.removeChild(this)}function gD(){return this.each(hD)}function mD(){var n=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(n,this.nextSibling):n}function yD(){var n=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(n,this.nextSibling):n}function pD(n){return this.select(n?yD:mD)}function vD(n){return arguments.length?this.property("__data__",n):this.node().__data__}function wD(n){return function(t){n.call(this,t,this.__data__)}}function bD(n){return n.trim().split(/^|\s+/).map(function(t){var e="",i=t.indexOf(".");return i>=0&&(e=t.slice(i+1),t=t.slice(0,i)),{type:t,name:e}})}function SD(n){return function(){var t=this.__on;if(t){for(var e=0,i=-1,a=t.length,u;e<a;++e)u=t[e],(!n.type||u.type===n.type)&&u.name===n.name?this.removeEventListener(u.type,u.listener,u.options):t[++i]=u;++i?t.length=i:delete this.__on}}}function xD(n,t,e){return function(){var i=this.__on,a,u=wD(t);if(i){for(var c=0,d=i.length;c<d;++c)if((a=i[c]).type===n.type&&a.name===n.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=u,a.options=e),a.value=t;return}}this.addEventListener(n.type,u,e),a={type:n.type,name:n.name,value:t,listener:u,options:e},i?i.push(a):this.__on=[a]}}function TD(n,t,e){var i=bD(n+""),a,u=i.length,c;if(arguments.length<2){var d=this.node().__on;if(d){for(var h=0,g=d.length,y;h<g;++h)for(a=0,y=d[h];a<u;++a)if((c=i[a]).type===y.type&&c.name===y.name)return y.value}return}for(d=t?xD:SD,a=0;a<u;++a)this.each(d(i[a],t,e));return this}function ix(n,t,e){var i=WS(n),a=i.CustomEvent;typeof a=="function"?a=new a(t,e):(a=i.document.createEvent("Event"),e?(a.initEvent(t,e.bubbles,e.cancelable),a.detail=e.detail):a.initEvent(t,!1,!1)),n.dispatchEvent(a)}function AD(n,t){return function(){return ix(this,n,t)}}function ED(n,t){return function(){return ix(this,n,t.apply(this,arguments))}}function ND(n,t){return this.each((typeof t=="function"?ED:AD)(n,t))}function*CD(){for(var n=this._groups,t=0,e=n.length;t<e;++t)for(var i=n[t],a=0,u=i.length,c;a<u;++a)(c=i[a])&&(yield c)}var sx=[null];function mn(n,t){this._groups=n,this._parents=t}function $u(){return new mn([[document.documentElement]],sx)}function DD(){return this}mn.prototype=$u.prototype={constructor:mn,select:t3,selectAll:i3,selectChild:l3,selectChildren:d3,filter:h3,data:w3,enter:g3,exit:S3,join:x3,merge:T3,selection:DD,order:A3,sort:E3,call:C3,nodes:D3,node:k3,size:O3,empty:I3,each:R3,attr:q3,style:$3,property:G3,classed:Z3,text:eD,html:sD,raise:oD,lower:uD,append:cD,insert:dD,remove:gD,clone:pD,datum:vD,on:TD,dispatch:ND,[Symbol.iterator]:CD};function cn(n){return typeof n=="string"?new mn([[document.querySelector(n)]],[document.documentElement]):new mn([[n]],sx)}function kD(n){let t;for(;t=n.sourceEvent;)n=t;return n}function Yn(n,t){if(n=kD(n),t===void 0&&(t=n.currentTarget),t){var e=t.ownerSVGElement||t;if(e.createSVGPoint){var i=e.createSVGPoint();return i.x=n.clientX,i.y=n.clientY,i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}if(t.getBoundingClientRect){var a=t.getBoundingClientRect();return[n.clientX-a.left-t.clientLeft,n.clientY-a.top-t.clientTop]}}return[n.pageX,n.pageY]}const OD={passive:!1},Cu={capture:!0,passive:!1};function mm(n){n.stopImmediatePropagation()}function Ro(n){n.preventDefault(),n.stopImmediatePropagation()}function ax(n){var t=n.document.documentElement,e=cn(n).on("dragstart.drag",Ro,Cu);"onselectstart"in t?e.on("selectstart.drag",Ro,Cu):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function ox(n,t){var e=n.document.documentElement,i=cn(n).on("dragstart.drag",null);t&&(i.on("click.drag",Ro,Cu),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in e?i.on("selectstart.drag",null):(e.style.MozUserSelect=e.__noselect,delete e.__noselect)}const wf=n=>()=>n;function iy(n,{sourceEvent:t,subject:e,target:i,identifier:a,active:u,x:c,y:d,dx:h,dy:g,dispatch:y}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:e,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:a,enumerable:!0,configurable:!0},active:{value:u,enumerable:!0,configurable:!0},x:{value:c,enumerable:!0,configurable:!0},y:{value:d,enumerable:!0,configurable:!0},dx:{value:h,enumerable:!0,configurable:!0},dy:{value:g,enumerable:!0,configurable:!0},_:{value:y}})}iy.prototype.on=function(){var n=this._.on.apply(this._,arguments);return n===this._?this:n};function ID(n){return!n.ctrlKey&&!n.button}function RD(){return this.parentNode}function MD(n,t){return t??{x:n.x,y:n.y}}function BD(){return navigator.maxTouchPoints||"ontouchstart"in this}function lx(){var n=ID,t=RD,e=MD,i=BD,a={},u=Dd("start","drag","end"),c=0,d,h,g,y,w=0;function p(k){k.on("mousedown.drag",b).filter(i).on("touchstart.drag",I).on("touchmove.drag",O,OD).on("touchend.drag touchcancel.drag",z).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function b(k,L){if(!(y||!n.call(this,k,L))){var V=E(this,t.call(this,k,L),k,L,"mouse");V&&(cn(k.view).on("mousemove.drag",x,Cu).on("mouseup.drag",C,Cu),ax(k.view),mm(k),g=!1,d=k.clientX,h=k.clientY,V("start",k))}}function x(k){if(Ro(k),!g){var L=k.clientX-d,V=k.clientY-h;g=L*L+V*V>w}a.mouse("drag",k)}function C(k){cn(k.view).on("mousemove.drag mouseup.drag",null),ox(k.view,g),Ro(k),a.mouse("end",k)}function I(k,L){if(n.call(this,k,L)){var V=k.changedTouches,H=t.call(this,k,L),tt=V.length,nt,it;for(nt=0;nt<tt;++nt)(it=E(this,H,k,L,V[nt].identifier,V[nt]))&&(mm(k),it("start",k,V[nt]))}}function O(k){var L=k.changedTouches,V=L.length,H,tt;for(H=0;H<V;++H)(tt=a[L[H].identifier])&&(Ro(k),tt("drag",k,L[H]))}function z(k){var L=k.changedTouches,V=L.length,H,tt;for(y&&clearTimeout(y),y=setTimeout(function(){y=null},500),H=0;H<V;++H)(tt=a[L[H].identifier])&&(mm(k),tt("end",k,L[H]))}function E(k,L,V,H,tt,nt){var it=u.copy(),ft=Yn(nt||V,L),ot,ct,R;if((R=e.call(k,new iy("beforestart",{sourceEvent:V,target:p,identifier:tt,active:c,x:ft[0],y:ft[1],dx:0,dy:0,dispatch:it}),H))!=null)return ot=R.x-ft[0]||0,ct=R.y-ft[1]||0,function j(D,B,P){var U=ft,N;switch(D){case"start":a[tt]=j,N=c++;break;case"end":delete a[tt],--c;case"drag":ft=Yn(P||B,L),N=c;break}it.call(D,k,new iy(D,{sourceEvent:B,subject:R,target:p,identifier:tt,active:N,x:ft[0]+ot,y:ft[1]+ct,dx:ft[0]-U[0],dy:ft[1]-U[1],dispatch:it}),H)}}return p.filter=function(k){return arguments.length?(n=typeof k=="function"?k:wf(!!k),p):n},p.container=function(k){return arguments.length?(t=typeof k=="function"?k:wf(k),p):t},p.subject=function(k){return arguments.length?(e=typeof k=="function"?k:wf(k),p):e},p.touchable=function(k){return arguments.length?(i=typeof k=="function"?k:wf(!!k),p):i},p.on=function(){var k=u.on.apply(u,arguments);return k===u?p:k},p.clickDistance=function(k){return arguments.length?(w=(k=+k)*k,p):Math.sqrt(w)},p}function Hy(n,t,e){n.prototype=t.prototype=e,e.constructor=n}function ux(n,t){var e=Object.create(n.prototype);for(var i in t)e[i]=t[i];return e}function Vu(){}var Du=.7,fd=1/Du,Mo="\\s*([+-]?\\d+)\\s*",ku="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Sr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",zD=/^#([0-9a-f]{3,8})$/,LD=new RegExp(`^rgb\\(${Mo},${Mo},${Mo}\\)$`),_D=new RegExp(`^rgb\\(${Sr},${Sr},${Sr}\\)$`),UD=new RegExp(`^rgba\\(${Mo},${Mo},${Mo},${ku}\\)$`),qD=new RegExp(`^rgba\\(${Sr},${Sr},${Sr},${ku}\\)$`),PD=new RegExp(`^hsl\\(${ku},${Sr},${Sr}\\)$`),JD=new RegExp(`^hsla\\(${ku},${Sr},${Sr},${ku}\\)$`),Rb={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Hy(Vu,Ou,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:Mb,formatHex:Mb,formatHex8:HD,formatHsl:$D,formatRgb:Bb,toString:Bb});function Mb(){return this.rgb().formatHex()}function HD(){return this.rgb().formatHex8()}function $D(){return cx(this).formatHsl()}function Bb(){return this.rgb().formatRgb()}function Ou(n){var t,e;return n=(n+"").trim().toLowerCase(),(t=zD.exec(n))?(e=t[1].length,t=parseInt(t[1],16),e===6?zb(t):e===3?new Qe(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):e===8?bf(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):e===4?bf(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=LD.exec(n))?new Qe(t[1],t[2],t[3],1):(t=_D.exec(n))?new Qe(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=UD.exec(n))?bf(t[1],t[2],t[3],t[4]):(t=qD.exec(n))?bf(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=PD.exec(n))?Ub(t[1],t[2]/100,t[3]/100,1):(t=JD.exec(n))?Ub(t[1],t[2]/100,t[3]/100,t[4]):Rb.hasOwnProperty(n)?zb(Rb[n]):n==="transparent"?new Qe(NaN,NaN,NaN,0):null}function zb(n){return new Qe(n>>16&255,n>>8&255,n&255,1)}function bf(n,t,e,i){return i<=0&&(n=t=e=NaN),new Qe(n,t,e,i)}function VD(n){return n instanceof Vu||(n=Ou(n)),n?(n=n.rgb(),new Qe(n.r,n.g,n.b,n.opacity)):new Qe}function sy(n,t,e,i){return arguments.length===1?VD(n):new Qe(n,t,e,i??1)}function Qe(n,t,e,i){this.r=+n,this.g=+t,this.b=+e,this.opacity=+i}Hy(Qe,sy,ux(Vu,{brighter(n){return n=n==null?fd:Math.pow(fd,n),new Qe(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?Du:Math.pow(Du,n),new Qe(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new Qe(Ea(this.r),Ea(this.g),Ea(this.b),dd(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Lb,formatHex:Lb,formatHex8:jD,formatRgb:_b,toString:_b}));function Lb(){return`#${xa(this.r)}${xa(this.g)}${xa(this.b)}`}function jD(){return`#${xa(this.r)}${xa(this.g)}${xa(this.b)}${xa((isNaN(this.opacity)?1:this.opacity)*255)}`}function _b(){const n=dd(this.opacity);return`${n===1?"rgb(":"rgba("}${Ea(this.r)}, ${Ea(this.g)}, ${Ea(this.b)}${n===1?")":`, ${n})`}`}function dd(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function Ea(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function xa(n){return n=Ea(n),(n<16?"0":"")+n.toString(16)}function Ub(n,t,e,i){return i<=0?n=t=e=NaN:e<=0||e>=1?n=t=NaN:t<=0&&(n=NaN),new Gn(n,t,e,i)}function cx(n){if(n instanceof Gn)return new Gn(n.h,n.s,n.l,n.opacity);if(n instanceof Vu||(n=Ou(n)),!n)return new Gn;if(n instanceof Gn)return n;n=n.rgb();var t=n.r/255,e=n.g/255,i=n.b/255,a=Math.min(t,e,i),u=Math.max(t,e,i),c=NaN,d=u-a,h=(u+a)/2;return d?(t===u?c=(e-i)/d+(e<i)*6:e===u?c=(i-t)/d+2:c=(t-e)/d+4,d/=h<.5?u+a:2-u-a,c*=60):d=h>0&&h<1?0:c,new Gn(c,d,h,n.opacity)}function YD(n,t,e,i){return arguments.length===1?cx(n):new Gn(n,t,e,i??1)}function Gn(n,t,e,i){this.h=+n,this.s=+t,this.l=+e,this.opacity=+i}Hy(Gn,YD,ux(Vu,{brighter(n){return n=n==null?fd:Math.pow(fd,n),new Gn(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?Du:Math.pow(Du,n),new Gn(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,t=isNaN(n)||isNaN(this.s)?0:this.s,e=this.l,i=e+(e<.5?e:1-e)*t,a=2*e-i;return new Qe(ym(n>=240?n-240:n+120,a,i),ym(n,a,i),ym(n<120?n+240:n-120,a,i),this.opacity)},clamp(){return new Gn(qb(this.h),Sf(this.s),Sf(this.l),dd(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=dd(this.opacity);return`${n===1?"hsl(":"hsla("}${qb(this.h)}, ${Sf(this.s)*100}%, ${Sf(this.l)*100}%${n===1?")":`, ${n})`}`}}));function qb(n){return n=(n||0)%360,n<0?n+360:n}function Sf(n){return Math.max(0,Math.min(1,n||0))}function ym(n,t,e){return(n<60?t+(e-t)*n/60:n<180?e:n<240?t+(e-t)*(240-n)/60:t)*255}const fx=n=>()=>n;function GD(n,t){return function(e){return n+e*t}}function XD(n,t,e){return n=Math.pow(n,e),t=Math.pow(t,e)-n,e=1/e,function(i){return Math.pow(n+i*t,e)}}function KD(n){return(n=+n)==1?dx:function(t,e){return e-t?XD(t,e,n):fx(isNaN(t)?e:t)}}function dx(n,t){var e=t-n;return e?GD(n,e):fx(isNaN(n)?t:n)}const Pb=function n(t){var e=KD(t);function i(a,u){var c=e((a=sy(a)).r,(u=sy(u)).r),d=e(a.g,u.g),h=e(a.b,u.b),g=dx(a.opacity,u.opacity);return function(y){return a.r=c(y),a.g=d(y),a.b=h(y),a.opacity=g(y),a+""}}return i.gamma=n,i}(1);function qs(n,t){return n=+n,t=+t,function(e){return n*(1-e)+t*e}}var ay=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,pm=new RegExp(ay.source,"g");function FD(n){return function(){return n}}function ZD(n){return function(t){return n(t)+""}}function QD(n,t){var e=ay.lastIndex=pm.lastIndex=0,i,a,u,c=-1,d=[],h=[];for(n=n+"",t=t+"";(i=ay.exec(n))&&(a=pm.exec(t));)(u=a.index)>e&&(u=t.slice(e,u),d[c]?d[c]+=u:d[++c]=u),(i=i[0])===(a=a[0])?d[c]?d[c]+=a:d[++c]=a:(d[++c]=null,h.push({i:c,x:qs(i,a)})),e=pm.lastIndex;return e<t.length&&(u=t.slice(e),d[c]?d[c]+=u:d[++c]=u),d.length<2?h[0]?ZD(h[0].x):FD(t):(t=h.length,function(g){for(var y=0,w;y<t;++y)d[(w=h[y]).i]=w.x(g);return d.join("")})}var Jb=180/Math.PI,oy={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function hx(n,t,e,i,a,u){var c,d,h;return(c=Math.sqrt(n*n+t*t))&&(n/=c,t/=c),(h=n*e+t*i)&&(e-=n*h,i-=t*h),(d=Math.sqrt(e*e+i*i))&&(e/=d,i/=d,h/=d),n*i<t*e&&(n=-n,t=-t,h=-h,c=-c),{translateX:a,translateY:u,rotate:Math.atan2(t,n)*Jb,skewX:Math.atan(h)*Jb,scaleX:c,scaleY:d}}var xf;function WD(n){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(n+"");return t.isIdentity?oy:hx(t.a,t.b,t.c,t.d,t.e,t.f)}function tk(n){return n==null||(xf||(xf=document.createElementNS("http://www.w3.org/2000/svg","g")),xf.setAttribute("transform",n),!(n=xf.transform.baseVal.consolidate()))?oy:(n=n.matrix,hx(n.a,n.b,n.c,n.d,n.e,n.f))}function gx(n,t,e,i){function a(g){return g.length?g.pop()+" ":""}function u(g,y,w,p,b,x){if(g!==w||y!==p){var C=b.push("translate(",null,t,null,e);x.push({i:C-4,x:qs(g,w)},{i:C-2,x:qs(y,p)})}else(w||p)&&b.push("translate("+w+t+p+e)}function c(g,y,w,p){g!==y?(g-y>180?y+=360:y-g>180&&(g+=360),p.push({i:w.push(a(w)+"rotate(",null,i)-2,x:qs(g,y)})):y&&w.push(a(w)+"rotate("+y+i)}function d(g,y,w,p){g!==y?p.push({i:w.push(a(w)+"skewX(",null,i)-2,x:qs(g,y)}):y&&w.push(a(w)+"skewX("+y+i)}function h(g,y,w,p,b,x){if(g!==w||y!==p){var C=b.push(a(b)+"scale(",null,",",null,")");x.push({i:C-4,x:qs(g,w)},{i:C-2,x:qs(y,p)})}else(w!==1||p!==1)&&b.push(a(b)+"scale("+w+","+p+")")}return function(g,y){var w=[],p=[];return g=n(g),y=n(y),u(g.translateX,g.translateY,y.translateX,y.translateY,w,p),c(g.rotate,y.rotate,w,p),d(g.skewX,y.skewX,w,p),h(g.scaleX,g.scaleY,y.scaleX,y.scaleY,w,p),g=y=null,function(b){for(var x=-1,C=p.length,I;++x<C;)w[(I=p[x]).i]=I.x(b);return w.join("")}}}var ek=gx(WD,"px, ","px)","deg)"),nk=gx(tk,", ",")",")"),rk=1e-12;function Hb(n){return((n=Math.exp(n))+1/n)/2}function ik(n){return((n=Math.exp(n))-1/n)/2}function sk(n){return((n=Math.exp(2*n))-1)/(n+1)}const ak=function n(t,e,i){function a(u,c){var d=u[0],h=u[1],g=u[2],y=c[0],w=c[1],p=c[2],b=y-d,x=w-h,C=b*b+x*x,I,O;if(C<rk)O=Math.log(p/g)/t,I=function(H){return[d+H*b,h+H*x,g*Math.exp(t*H*O)]};else{var z=Math.sqrt(C),E=(p*p-g*g+i*C)/(2*g*e*z),k=(p*p-g*g-i*C)/(2*p*e*z),L=Math.log(Math.sqrt(E*E+1)-E),V=Math.log(Math.sqrt(k*k+1)-k);O=(V-L)/t,I=function(H){var tt=H*O,nt=Hb(L),it=g/(e*z)*(nt*sk(t*tt+L)-ik(L));return[d+it*b,h+it*x,g*nt/Hb(t*tt+L)]}}return I.duration=O*1e3*t/Math.SQRT2,I}return a.rho=function(u){var c=Math.max(.001,+u),d=c*c,h=d*d;return n(c,d,h)},a}(Math.SQRT2,2,4);var jo=0,lu=0,su=0,mx=1e3,hd,uu,gd=0,Oa=0,Od=0,Iu=typeof performance=="object"&&performance.now?performance:Date,yx=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function $y(){return Oa||(yx(ok),Oa=Iu.now()+Od)}function ok(){Oa=0}function md(){this._call=this._time=this._next=null}md.prototype=px.prototype={constructor:md,restart:function(n,t,e){if(typeof n!="function")throw new TypeError("callback is not a function");e=(e==null?$y():+e)+(t==null?0:+t),!this._next&&uu!==this&&(uu?uu._next=this:hd=this,uu=this),this._call=n,this._time=e,ly()},stop:function(){this._call&&(this._call=null,this._time=1/0,ly())}};function px(n,t,e){var i=new md;return i.restart(n,t,e),i}function lk(){$y(),++jo;for(var n=hd,t;n;)(t=Oa-n._time)>=0&&n._call.call(void 0,t),n=n._next;--jo}function $b(){Oa=(gd=Iu.now())+Od,jo=lu=0;try{lk()}finally{jo=0,ck(),Oa=0}}function uk(){var n=Iu.now(),t=n-gd;t>mx&&(Od-=t,gd=n)}function ck(){for(var n,t=hd,e,i=1/0;t;)t._call?(i>t._time&&(i=t._time),n=t,t=t._next):(e=t._next,t._next=null,t=n?n._next=e:hd=e);uu=n,ly(i)}function ly(n){if(!jo){lu&&(lu=clearTimeout(lu));var t=n-Oa;t>24?(n<1/0&&(lu=setTimeout($b,n-Iu.now()-Od)),su&&(su=clearInterval(su))):(su||(gd=Iu.now(),su=setInterval(uk,mx)),jo=1,yx($b))}}function Vb(n,t,e){var i=new md;return t=t==null?0:+t,i.restart(a=>{i.stop(),n(a+t)},t,e),i}var fk=Dd("start","end","cancel","interrupt"),dk=[],vx=0,jb=1,uy=2,Lf=3,Yb=4,cy=5,_f=6;function Id(n,t,e,i,a,u){var c=n.__transition;if(!c)n.__transition={};else if(e in c)return;hk(n,e,{name:t,index:i,group:a,on:fk,tween:dk,time:u.time,delay:u.delay,duration:u.duration,ease:u.ease,timer:null,state:vx})}function Vy(n,t){var e=Wn(n,t);if(e.state>vx)throw new Error("too late; already scheduled");return e}function Er(n,t){var e=Wn(n,t);if(e.state>Lf)throw new Error("too late; already running");return e}function Wn(n,t){var e=n.__transition;if(!e||!(e=e[t]))throw new Error("transition not found");return e}function hk(n,t,e){var i=n.__transition,a;i[t]=e,e.timer=px(u,0,e.time);function u(g){e.state=jb,e.timer.restart(c,e.delay,e.time),e.delay<=g&&c(g-e.delay)}function c(g){var y,w,p,b;if(e.state!==jb)return h();for(y in i)if(b=i[y],b.name===e.name){if(b.state===Lf)return Vb(c);b.state===Yb?(b.state=_f,b.timer.stop(),b.on.call("interrupt",n,n.__data__,b.index,b.group),delete i[y]):+y<t&&(b.state=_f,b.timer.stop(),b.on.call("cancel",n,n.__data__,b.index,b.group),delete i[y])}if(Vb(function(){e.state===Lf&&(e.state=Yb,e.timer.restart(d,e.delay,e.time),d(g))}),e.state=uy,e.on.call("start",n,n.__data__,e.index,e.group),e.state===uy){for(e.state=Lf,a=new Array(p=e.tween.length),y=0,w=-1;y<p;++y)(b=e.tween[y].value.call(n,n.__data__,e.index,e.group))&&(a[++w]=b);a.length=w+1}}function d(g){for(var y=g<e.duration?e.ease.call(null,g/e.duration):(e.timer.restart(h),e.state=cy,1),w=-1,p=a.length;++w<p;)a[w].call(n,y);e.state===cy&&(e.on.call("end",n,n.__data__,e.index,e.group),h())}function h(){e.state=_f,e.timer.stop(),delete i[t];for(var g in i)return;delete n.__transition}}function Uf(n,t){var e=n.__transition,i,a,u=!0,c;if(e){t=t==null?null:t+"";for(c in e){if((i=e[c]).name!==t){u=!1;continue}a=i.state>uy&&i.state<cy,i.state=_f,i.timer.stop(),i.on.call(a?"interrupt":"cancel",n,n.__data__,i.index,i.group),delete e[c]}u&&delete n.__transition}}function gk(n){return this.each(function(){Uf(this,n)})}function mk(n,t){var e,i;return function(){var a=Er(this,n),u=a.tween;if(u!==e){i=e=u;for(var c=0,d=i.length;c<d;++c)if(i[c].name===t){i=i.slice(),i.splice(c,1);break}}a.tween=i}}function yk(n,t,e){var i,a;if(typeof e!="function")throw new Error;return function(){var u=Er(this,n),c=u.tween;if(c!==i){a=(i=c).slice();for(var d={name:t,value:e},h=0,g=a.length;h<g;++h)if(a[h].name===t){a[h]=d;break}h===g&&a.push(d)}u.tween=a}}function pk(n,t){var e=this._id;if(n+="",arguments.length<2){for(var i=Wn(this.node(),e).tween,a=0,u=i.length,c;a<u;++a)if((c=i[a]).name===n)return c.value;return null}return this.each((t==null?mk:yk)(e,n,t))}function jy(n,t,e){var i=n._id;return n.each(function(){var a=Er(this,i);(a.value||(a.value={}))[t]=e.apply(this,arguments)}),function(a){return Wn(a,i).value[t]}}function wx(n,t){var e;return(typeof t=="number"?qs:t instanceof Ou?Pb:(e=Ou(t))?(t=e,Pb):QD)(n,t)}function vk(n){return function(){this.removeAttribute(n)}}function wk(n){return function(){this.removeAttributeNS(n.space,n.local)}}function bk(n,t,e){var i,a=e+"",u;return function(){var c=this.getAttribute(n);return c===a?null:c===i?u:u=t(i=c,e)}}function Sk(n,t,e){var i,a=e+"",u;return function(){var c=this.getAttributeNS(n.space,n.local);return c===a?null:c===i?u:u=t(i=c,e)}}function xk(n,t,e){var i,a,u;return function(){var c,d=e(this),h;return d==null?void this.removeAttribute(n):(c=this.getAttribute(n),h=d+"",c===h?null:c===i&&h===a?u:(a=h,u=t(i=c,d)))}}function Tk(n,t,e){var i,a,u;return function(){var c,d=e(this),h;return d==null?void this.removeAttributeNS(n.space,n.local):(c=this.getAttributeNS(n.space,n.local),h=d+"",c===h?null:c===i&&h===a?u:(a=h,u=t(i=c,d)))}}function Ak(n,t){var e=kd(n),i=e==="transform"?nk:wx;return this.attrTween(n,typeof t=="function"?(e.local?Tk:xk)(e,i,jy(this,"attr."+n,t)):t==null?(e.local?wk:vk)(e):(e.local?Sk:bk)(e,i,t))}function Ek(n,t){return function(e){this.setAttribute(n,t.call(this,e))}}function Nk(n,t){return function(e){this.setAttributeNS(n.space,n.local,t.call(this,e))}}function Ck(n,t){var e,i;function a(){var u=t.apply(this,arguments);return u!==i&&(e=(i=u)&&Nk(n,u)),e}return a._value=t,a}function Dk(n,t){var e,i;function a(){var u=t.apply(this,arguments);return u!==i&&(e=(i=u)&&Ek(n,u)),e}return a._value=t,a}function kk(n,t){var e="attr."+n;if(arguments.length<2)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;var i=kd(n);return this.tween(e,(i.local?Ck:Dk)(i,t))}function Ok(n,t){return function(){Vy(this,n).delay=+t.apply(this,arguments)}}function Ik(n,t){return t=+t,function(){Vy(this,n).delay=t}}function Rk(n){var t=this._id;return arguments.length?this.each((typeof n=="function"?Ok:Ik)(t,n)):Wn(this.node(),t).delay}function Mk(n,t){return function(){Er(this,n).duration=+t.apply(this,arguments)}}function Bk(n,t){return t=+t,function(){Er(this,n).duration=t}}function zk(n){var t=this._id;return arguments.length?this.each((typeof n=="function"?Mk:Bk)(t,n)):Wn(this.node(),t).duration}function Lk(n,t){if(typeof t!="function")throw new Error;return function(){Er(this,n).ease=t}}function _k(n){var t=this._id;return arguments.length?this.each(Lk(t,n)):Wn(this.node(),t).ease}function Uk(n,t){return function(){var e=t.apply(this,arguments);if(typeof e!="function")throw new Error;Er(this,n).ease=e}}function qk(n){if(typeof n!="function")throw new Error;return this.each(Uk(this._id,n))}function Pk(n){typeof n!="function"&&(n=FS(n));for(var t=this._groups,e=t.length,i=new Array(e),a=0;a<e;++a)for(var u=t[a],c=u.length,d=i[a]=[],h,g=0;g<c;++g)(h=u[g])&&n.call(h,h.__data__,g,u)&&d.push(h);return new ts(i,this._parents,this._name,this._id)}function Jk(n){if(n._id!==this._id)throw new Error;for(var t=this._groups,e=n._groups,i=t.length,a=e.length,u=Math.min(i,a),c=new Array(i),d=0;d<u;++d)for(var h=t[d],g=e[d],y=h.length,w=c[d]=new Array(y),p,b=0;b<y;++b)(p=h[b]||g[b])&&(w[b]=p);for(;d<i;++d)c[d]=t[d];return new ts(c,this._parents,this._name,this._id)}function Hk(n){return(n+"").trim().split(/^|\s+/).every(function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||t==="start"})}function $k(n,t,e){var i,a,u=Hk(t)?Vy:Er;return function(){var c=u(this,n),d=c.on;d!==i&&(a=(i=d).copy()).on(t,e),c.on=a}}function Vk(n,t){var e=this._id;return arguments.length<2?Wn(this.node(),e).on.on(n):this.each($k(e,n,t))}function jk(n){return function(){var t=this.parentNode;for(var e in this.__transition)if(+e!==n)return;t&&t.removeChild(this)}}function Yk(){return this.on("end.remove",jk(this._id))}function Gk(n){var t=this._name,e=this._id;typeof n!="function"&&(n=Py(n));for(var i=this._groups,a=i.length,u=new Array(a),c=0;c<a;++c)for(var d=i[c],h=d.length,g=u[c]=new Array(h),y,w,p=0;p<h;++p)(y=d[p])&&(w=n.call(y,y.__data__,p,d))&&("__data__"in y&&(w.__data__=y.__data__),g[p]=w,Id(g[p],t,e,p,g,Wn(y,e)));return new ts(u,this._parents,t,e)}function Xk(n){var t=this._name,e=this._id;typeof n!="function"&&(n=KS(n));for(var i=this._groups,a=i.length,u=[],c=[],d=0;d<a;++d)for(var h=i[d],g=h.length,y,w=0;w<g;++w)if(y=h[w]){for(var p=n.call(y,y.__data__,w,h),b,x=Wn(y,e),C=0,I=p.length;C<I;++C)(b=p[C])&&Id(b,t,e,C,p,x);u.push(p),c.push(y)}return new ts(u,c,t,e)}var Kk=$u.prototype.constructor;function Fk(){return new Kk(this._groups,this._parents)}function Zk(n,t){var e,i,a;return function(){var u=Vo(this,n),c=(this.style.removeProperty(n),Vo(this,n));return u===c?null:u===e&&c===i?a:a=t(e=u,i=c)}}function bx(n){return function(){this.style.removeProperty(n)}}function Qk(n,t,e){var i,a=e+"",u;return function(){var c=Vo(this,n);return c===a?null:c===i?u:u=t(i=c,e)}}function Wk(n,t,e){var i,a,u;return function(){var c=Vo(this,n),d=e(this),h=d+"";return d==null&&(h=d=(this.style.removeProperty(n),Vo(this,n))),c===h?null:c===i&&h===a?u:(a=h,u=t(i=c,d))}}function tO(n,t){var e,i,a,u="style."+t,c="end."+u,d;return function(){var h=Er(this,n),g=h.on,y=h.value[u]==null?d||(d=bx(t)):void 0;(g!==e||a!==y)&&(i=(e=g).copy()).on(c,a=y),h.on=i}}function eO(n,t,e){var i=(n+="")=="transform"?ek:wx;return t==null?this.styleTween(n,Zk(n,i)).on("end.style."+n,bx(n)):typeof t=="function"?this.styleTween(n,Wk(n,i,jy(this,"style."+n,t))).each(tO(this._id,n)):this.styleTween(n,Qk(n,i,t),e).on("end.style."+n,null)}function nO(n,t,e){return function(i){this.style.setProperty(n,t.call(this,i),e)}}function rO(n,t,e){var i,a;function u(){var c=t.apply(this,arguments);return c!==a&&(i=(a=c)&&nO(n,c,e)),i}return u._value=t,u}function iO(n,t,e){var i="style."+(n+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(t==null)return this.tween(i,null);if(typeof t!="function")throw new Error;return this.tween(i,rO(n,t,e??""))}function sO(n){return function(){this.textContent=n}}function aO(n){return function(){var t=n(this);this.textContent=t??""}}function oO(n){return this.tween("text",typeof n=="function"?aO(jy(this,"text",n)):sO(n==null?"":n+""))}function lO(n){return function(t){this.textContent=n.call(this,t)}}function uO(n){var t,e;function i(){var a=n.apply(this,arguments);return a!==e&&(t=(e=a)&&lO(a)),t}return i._value=n,i}function cO(n){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(n==null)return this.tween(t,null);if(typeof n!="function")throw new Error;return this.tween(t,uO(n))}function fO(){for(var n=this._name,t=this._id,e=Sx(),i=this._groups,a=i.length,u=0;u<a;++u)for(var c=i[u],d=c.length,h,g=0;g<d;++g)if(h=c[g]){var y=Wn(h,t);Id(h,n,e,g,c,{time:y.time+y.delay+y.duration,delay:0,duration:y.duration,ease:y.ease})}return new ts(i,this._parents,n,e)}function dO(){var n,t,e=this,i=e._id,a=e.size();return new Promise(function(u,c){var d={value:c},h={value:function(){--a===0&&u()}};e.each(function(){var g=Er(this,i),y=g.on;y!==n&&(t=(n=y).copy(),t._.cancel.push(d),t._.interrupt.push(d),t._.end.push(h)),g.on=t}),a===0&&u()})}var hO=0;function ts(n,t,e,i){this._groups=n,this._parents=t,this._name=e,this._id=i}function Sx(){return++hO}var Vr=$u.prototype;ts.prototype={constructor:ts,select:Gk,selectAll:Xk,selectChild:Vr.selectChild,selectChildren:Vr.selectChildren,filter:Pk,merge:Jk,selection:Fk,transition:fO,call:Vr.call,nodes:Vr.nodes,node:Vr.node,size:Vr.size,empty:Vr.empty,each:Vr.each,on:Vk,attr:Ak,attrTween:kk,style:eO,styleTween:iO,text:oO,textTween:cO,remove:Yk,tween:pk,delay:Rk,duration:zk,ease:_k,easeVarying:qk,end:dO,[Symbol.iterator]:Vr[Symbol.iterator]};function gO(n){return((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2}var mO={time:null,delay:0,duration:250,ease:gO};function yO(n,t){for(var e;!(e=n.__transition)||!(e=e[t]);)if(!(n=n.parentNode))throw new Error(`transition ${t} not found`);return e}function pO(n){var t,e;n instanceof ts?(t=n._id,n=n._name):(t=Sx(),(e=mO).time=$y(),n=n==null?null:n+"");for(var i=this._groups,a=i.length,u=0;u<a;++u)for(var c=i[u],d=c.length,h,g=0;g<d;++g)(h=c[g])&&Id(h,n,t,g,c,e||yO(h,t));return new ts(i,this._parents,n,t)}$u.prototype.interrupt=gk;$u.prototype.transition=pO;const Tf=n=>()=>n;function vO(n,{sourceEvent:t,target:e,transform:i,dispatch:a}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:e,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:a}})}function Xi(n,t,e){this.k=n,this.x=t,this.y=e}Xi.prototype={constructor:Xi,scale:function(n){return n===1?this:new Xi(this.k*n,this.x,this.y)},translate:function(n,t){return n===0&t===0?this:new Xi(this.k,this.x+this.k*n,this.y+this.k*t)},apply:function(n){return[n[0]*this.k+this.x,n[1]*this.k+this.y]},applyX:function(n){return n*this.k+this.x},applyY:function(n){return n*this.k+this.y},invert:function(n){return[(n[0]-this.x)/this.k,(n[1]-this.y)/this.k]},invertX:function(n){return(n-this.x)/this.k},invertY:function(n){return(n-this.y)/this.k},rescaleX:function(n){return n.copy().domain(n.range().map(this.invertX,this).map(n.invert,n))},rescaleY:function(n){return n.copy().domain(n.range().map(this.invertY,this).map(n.invert,n))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Rd=new Xi(1,0,0);xx.prototype=Xi.prototype;function xx(n){for(;!n.__zoom;)if(!(n=n.parentNode))return Rd;return n.__zoom}function vm(n){n.stopImmediatePropagation()}function au(n){n.preventDefault(),n.stopImmediatePropagation()}function wO(n){return(!n.ctrlKey||n.type==="wheel")&&!n.button}function bO(){var n=this;return n instanceof SVGElement?(n=n.ownerSVGElement||n,n.hasAttribute("viewBox")?(n=n.viewBox.baseVal,[[n.x,n.y],[n.x+n.width,n.y+n.height]]):[[0,0],[n.width.baseVal.value,n.height.baseVal.value]]):[[0,0],[n.clientWidth,n.clientHeight]]}function Gb(){return this.__zoom||Rd}function SO(n){return-n.deltaY*(n.deltaMode===1?.05:n.deltaMode?1:.002)*(n.ctrlKey?10:1)}function xO(){return navigator.maxTouchPoints||"ontouchstart"in this}function TO(n,t,e){var i=n.invertX(t[0][0])-e[0][0],a=n.invertX(t[1][0])-e[1][0],u=n.invertY(t[0][1])-e[0][1],c=n.invertY(t[1][1])-e[1][1];return n.translate(a>i?(i+a)/2:Math.min(0,i)||Math.max(0,a),c>u?(u+c)/2:Math.min(0,u)||Math.max(0,c))}function Tx(){var n=wO,t=bO,e=TO,i=SO,a=xO,u=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],d=250,h=ak,g=Dd("start","zoom","end"),y,w,p,b=500,x=150,C=0,I=10;function O(R){R.property("__zoom",Gb).on("wheel.zoom",tt,{passive:!1}).on("mousedown.zoom",nt).on("dblclick.zoom",it).filter(a).on("touchstart.zoom",ft).on("touchmove.zoom",ot).on("touchend.zoom touchcancel.zoom",ct).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}O.transform=function(R,j,D,B){var P=R.selection?R.selection():R;P.property("__zoom",Gb),R!==P?L(R,j,D,B):P.interrupt().each(function(){V(this,arguments).event(B).start().zoom(null,typeof j=="function"?j.apply(this,arguments):j).end()})},O.scaleBy=function(R,j,D,B){O.scaleTo(R,function(){var P=this.__zoom.k,U=typeof j=="function"?j.apply(this,arguments):j;return P*U},D,B)},O.scaleTo=function(R,j,D,B){O.transform(R,function(){var P=t.apply(this,arguments),U=this.__zoom,N=D==null?k(P):typeof D=="function"?D.apply(this,arguments):D,q=U.invert(N),Q=typeof j=="function"?j.apply(this,arguments):j;return e(E(z(U,Q),N,q),P,c)},D,B)},O.translateBy=function(R,j,D,B){O.transform(R,function(){return e(this.__zoom.translate(typeof j=="function"?j.apply(this,arguments):j,typeof D=="function"?D.apply(this,arguments):D),t.apply(this,arguments),c)},null,B)},O.translateTo=function(R,j,D,B,P){O.transform(R,function(){var U=t.apply(this,arguments),N=this.__zoom,q=B==null?k(U):typeof B=="function"?B.apply(this,arguments):B;return e(Rd.translate(q[0],q[1]).scale(N.k).translate(typeof j=="function"?-j.apply(this,arguments):-j,typeof D=="function"?-D.apply(this,arguments):-D),U,c)},B,P)};function z(R,j){return j=Math.max(u[0],Math.min(u[1],j)),j===R.k?R:new Xi(j,R.x,R.y)}function E(R,j,D){var B=j[0]-D[0]*R.k,P=j[1]-D[1]*R.k;return B===R.x&&P===R.y?R:new Xi(R.k,B,P)}function k(R){return[(+R[0][0]+ +R[1][0])/2,(+R[0][1]+ +R[1][1])/2]}function L(R,j,D,B){R.on("start.zoom",function(){V(this,arguments).event(B).start()}).on("interrupt.zoom end.zoom",function(){V(this,arguments).event(B).end()}).tween("zoom",function(){var P=this,U=arguments,N=V(P,U).event(B),q=t.apply(P,U),Q=D==null?k(q):typeof D=="function"?D.apply(P,U):D,et=Math.max(q[1][0]-q[0][0],q[1][1]-q[0][1]),ut=P.__zoom,gt=typeof j=="function"?j.apply(P,U):j,dt=h(ut.invert(Q).concat(et/ut.k),gt.invert(Q).concat(et/gt.k));return function(mt){if(mt===1)mt=gt;else{var pt=dt(mt),Dt=et/pt[2];mt=new Xi(Dt,Q[0]-pt[0]*Dt,Q[1]-pt[1]*Dt)}N.zoom(null,mt)}})}function V(R,j,D){return!D&&R.__zooming||new H(R,j)}function H(R,j){this.that=R,this.args=j,this.active=0,this.sourceEvent=null,this.extent=t.apply(R,j),this.taps=0}H.prototype={event:function(R){return R&&(this.sourceEvent=R),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(R,j){return this.mouse&&R!=="mouse"&&(this.mouse[1]=j.invert(this.mouse[0])),this.touch0&&R!=="touch"&&(this.touch0[1]=j.invert(this.touch0[0])),this.touch1&&R!=="touch"&&(this.touch1[1]=j.invert(this.touch1[0])),this.that.__zoom=j,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(R){var j=cn(this.that).datum();g.call(R,this.that,new vO(R,{sourceEvent:this.sourceEvent,target:O,transform:this.that.__zoom,dispatch:g}),j)}};function tt(R,...j){if(!n.apply(this,arguments))return;var D=V(this,j).event(R),B=this.__zoom,P=Math.max(u[0],Math.min(u[1],B.k*Math.pow(2,i.apply(this,arguments)))),U=Yn(R);if(D.wheel)(D.mouse[0][0]!==U[0]||D.mouse[0][1]!==U[1])&&(D.mouse[1]=B.invert(D.mouse[0]=U)),clearTimeout(D.wheel);else{if(B.k===P)return;D.mouse=[U,B.invert(U)],Uf(this),D.start()}au(R),D.wheel=setTimeout(N,x),D.zoom("mouse",e(E(z(B,P),D.mouse[0],D.mouse[1]),D.extent,c));function N(){D.wheel=null,D.end()}}function nt(R,...j){if(p||!n.apply(this,arguments))return;var D=R.currentTarget,B=V(this,j,!0).event(R),P=cn(R.view).on("mousemove.zoom",Q,!0).on("mouseup.zoom",et,!0),U=Yn(R,D),N=R.clientX,q=R.clientY;ax(R.view),vm(R),B.mouse=[U,this.__zoom.invert(U)],Uf(this),B.start();function Q(ut){if(au(ut),!B.moved){var gt=ut.clientX-N,dt=ut.clientY-q;B.moved=gt*gt+dt*dt>C}B.event(ut).zoom("mouse",e(E(B.that.__zoom,B.mouse[0]=Yn(ut,D),B.mouse[1]),B.extent,c))}function et(ut){P.on("mousemove.zoom mouseup.zoom",null),ox(ut.view,B.moved),au(ut),B.event(ut).end()}}function it(R,...j){if(n.apply(this,arguments)){var D=this.__zoom,B=Yn(R.changedTouches?R.changedTouches[0]:R,this),P=D.invert(B),U=D.k*(R.shiftKey?.5:2),N=e(E(z(D,U),B,P),t.apply(this,j),c);au(R),d>0?cn(this).transition().duration(d).call(L,N,B,R):cn(this).call(O.transform,N,B,R)}}function ft(R,...j){if(n.apply(this,arguments)){var D=R.touches,B=D.length,P=V(this,j,R.changedTouches.length===B).event(R),U,N,q,Q;for(vm(R),N=0;N<B;++N)q=D[N],Q=Yn(q,this),Q=[Q,this.__zoom.invert(Q),q.identifier],P.touch0?!P.touch1&&P.touch0[2]!==Q[2]&&(P.touch1=Q,P.taps=0):(P.touch0=Q,U=!0,P.taps=1+!!y);y&&(y=clearTimeout(y)),U&&(P.taps<2&&(w=Q[0],y=setTimeout(function(){y=null},b)),Uf(this),P.start())}}function ot(R,...j){if(this.__zooming){var D=V(this,j).event(R),B=R.changedTouches,P=B.length,U,N,q,Q;for(au(R),U=0;U<P;++U)N=B[U],q=Yn(N,this),D.touch0&&D.touch0[2]===N.identifier?D.touch0[0]=q:D.touch1&&D.touch1[2]===N.identifier&&(D.touch1[0]=q);if(N=D.that.__zoom,D.touch1){var et=D.touch0[0],ut=D.touch0[1],gt=D.touch1[0],dt=D.touch1[1],mt=(mt=gt[0]-et[0])*mt+(mt=gt[1]-et[1])*mt,pt=(pt=dt[0]-ut[0])*pt+(pt=dt[1]-ut[1])*pt;N=z(N,Math.sqrt(mt/pt)),q=[(et[0]+gt[0])/2,(et[1]+gt[1])/2],Q=[(ut[0]+dt[0])/2,(ut[1]+dt[1])/2]}else if(D.touch0)q=D.touch0[0],Q=D.touch0[1];else return;D.zoom("touch",e(E(N,q,Q),D.extent,c))}}function ct(R,...j){if(this.__zooming){var D=V(this,j).event(R),B=R.changedTouches,P=B.length,U,N;for(vm(R),p&&clearTimeout(p),p=setTimeout(function(){p=null},b),U=0;U<P;++U)N=B[U],D.touch0&&D.touch0[2]===N.identifier?delete D.touch0:D.touch1&&D.touch1[2]===N.identifier&&delete D.touch1;if(D.touch1&&!D.touch0&&(D.touch0=D.touch1,delete D.touch1),D.touch0)D.touch0[1]=this.__zoom.invert(D.touch0[0]);else if(D.end(),D.taps===2&&(N=Yn(N,this),Math.hypot(w[0]-N[0],w[1]-N[1])<I)){var q=cn(this).on("dblclick.zoom");q&&q.apply(this,arguments)}}}return O.wheelDelta=function(R){return arguments.length?(i=typeof R=="function"?R:Tf(+R),O):i},O.filter=function(R){return arguments.length?(n=typeof R=="function"?R:Tf(!!R),O):n},O.touchable=function(R){return arguments.length?(a=typeof R=="function"?R:Tf(!!R),O):a},O.extent=function(R){return arguments.length?(t=typeof R=="function"?R:Tf([[+R[0][0],+R[0][1]],[+R[1][0],+R[1][1]]]),O):t},O.scaleExtent=function(R){return arguments.length?(u[0]=+R[0],u[1]=+R[1],O):[u[0],u[1]]},O.translateExtent=function(R){return arguments.length?(c[0][0]=+R[0][0],c[1][0]=+R[1][0],c[0][1]=+R[0][1],c[1][1]=+R[1][1],O):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},O.constrain=function(R){return arguments.length?(e=R,O):e},O.duration=function(R){return arguments.length?(d=+R,O):d},O.interpolate=function(R){return arguments.length?(h=R,O):h},O.on=function(){var R=g.on.apply(g,arguments);return R===g?O:R},O.clickDistance=function(R){return arguments.length?(C=(R=+R)*R,O):Math.sqrt(C)},O.tapDistance=function(R){return arguments.length?(I=+R,O):I},O}const Ar={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:n=>`Node type "${n}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:n=>`The old edge with id=${n} does not exist.`,error009:n=>`Marker type "${n}" doesn't exist.`,error008:(n,{id:t,sourceHandle:e,targetHandle:i})=>`Couldn't create edge for ${n} handle id: "${n==="source"?e:i}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:n=>`Edge type "${n}" not found. Using fallback type "default".`,error012:n=>`Node with id "${n}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(n="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${n}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},Ru=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Ax=["Enter"," ","Escape"];var Yo;(function(n){n.Strict="strict",n.Loose="loose"})(Yo||(Yo={}));var Na;(function(n){n.Free="free",n.Vertical="vertical",n.Horizontal="horizontal"})(Na||(Na={}));var Mu;(function(n){n.Partial="partial",n.Full="full"})(Mu||(Mu={}));const Ex={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var Ps;(function(n){n.Bezier="default",n.Straight="straight",n.Step="step",n.SmoothStep="smoothstep",n.SimpleBezier="simplebezier"})(Ps||(Ps={}));var yd;(function(n){n.Arrow="arrow",n.ArrowClosed="arrowclosed"})(yd||(yd={}));var Tt;(function(n){n.Left="left",n.Top="top",n.Right="right",n.Bottom="bottom"})(Tt||(Tt={}));const Xb={[Tt.Left]:Tt.Right,[Tt.Right]:Tt.Left,[Tt.Top]:Tt.Bottom,[Tt.Bottom]:Tt.Top};function Nx(n){return n===null?null:n?"valid":"invalid"}const Cx=n=>"id"in n&&"source"in n&&"target"in n,AO=n=>"id"in n&&"position"in n&&!("source"in n)&&!("target"in n),Yy=n=>"id"in n&&"internals"in n&&!("source"in n)&&!("target"in n),ju=(n,t=[0,0])=>{const{width:e,height:i}=ns(n),a=n.origin??t,u=e*a[0],c=i*a[1];return{x:n.position.x-u,y:n.position.y-c}},EO=(n,t={nodeOrigin:[0,0],nodeLookup:void 0})=>{if(n.length===0)return{x:0,y:0,width:0,height:0};const e=n.reduce((i,a)=>{const u=typeof a=="string";let c=!t.nodeLookup&&!u?a:void 0;t.nodeLookup&&(c=u?t.nodeLookup.get(a):Yy(a)?a:t.nodeLookup.get(a.id));const d=c?pd(c,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return Md(i,d)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Bd(e)},Yu=(n,t={})=>{if(n.size===0)return{x:0,y:0,width:0,height:0};let e={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return n.forEach(i=>{if(t.filter===void 0||t.filter(i)){const a=pd(i);e=Md(e,a)}}),Bd(e)},Dx=(n,t,[e,i,a]=[0,0,1],u=!1,c=!1)=>{const d={...Gu(t,[e,i,a]),width:t.width/a,height:t.height/a},h=[];for(const g of n.values()){const{measured:y,selectable:w=!0,hidden:p=!1}=g;if(c&&!w||p)continue;const b=y.width??g.width??g.initialWidth??null,x=y.height??g.height??g.initialHeight??null,C=Bu(d,Xo(g)),I=(b??0)*(x??0),O=u&&C>0;(!g.internals.handleBounds||O||C>=I||g.dragging)&&h.push(g)}return h},NO=(n,t)=>{const e=new Set;return n.forEach(i=>{e.add(i.id)}),t.filter(i=>e.has(i.source)||e.has(i.target))};function CO(n,t){const e=new Map,i=t!=null&&t.nodes?new Set(t.nodes.map(a=>a.id)):null;return n.forEach(a=>{a.measured.width&&a.measured.height&&((t==null?void 0:t.includeHiddenNodes)||!a.hidden)&&(!i||i.has(a.id))&&e.set(a.id,a)}),e}async function DO({nodes:n,width:t,height:e,panZoom:i,minZoom:a,maxZoom:u},c){if(n.size===0)return Promise.resolve(!0);const d=CO(n,c),h=Yu(d),g=Gy(h,t,e,(c==null?void 0:c.minZoom)??a,(c==null?void 0:c.maxZoom)??u,(c==null?void 0:c.padding)??.1);return await i.setViewport(g,{duration:c==null?void 0:c.duration}),Promise.resolve(!0)}function kx({nodeId:n,nextPosition:t,nodeLookup:e,nodeOrigin:i=[0,0],nodeExtent:a,onError:u}){const c=e.get(n),d=c.parentId?e.get(c.parentId):void 0,{x:h,y:g}=d?d.internals.positionAbsolute:{x:0,y:0},y=c.origin??i;let w=a;if(c.extent==="parent"&&!c.expandParent)if(!d)u==null||u("005",Ar.error005());else{const b=d.measured.width,x=d.measured.height;b&&x&&(w=[[h,g],[h+b,g+x]])}else d&&Ko(c.extent)&&(w=[[c.extent[0][0]+h,c.extent[0][1]+g],[c.extent[1][0]+h,c.extent[1][1]+g]]);const p=Ko(w)?Ia(t,w,c.measured):t;return(c.measured.width===void 0||c.measured.height===void 0)&&(u==null||u("015",Ar.error015())),{position:{x:p.x-h+(c.measured.width??0)*y[0],y:p.y-g+(c.measured.height??0)*y[1]},positionAbsolute:p}}async function kO({nodesToRemove:n=[],edgesToRemove:t=[],nodes:e,edges:i,onBeforeDelete:a}){const u=new Set(n.map(p=>p.id)),c=[];for(const p of e){if(p.deletable===!1)continue;const b=u.has(p.id),x=!b&&p.parentId&&c.find(C=>C.id===p.parentId);(b||x)&&c.push(p)}const d=new Set(t.map(p=>p.id)),h=i.filter(p=>p.deletable!==!1),y=NO(c,h);for(const p of h)d.has(p.id)&&!y.find(x=>x.id===p.id)&&y.push(p);if(!a)return{edges:y,nodes:c};const w=await a({nodes:c,edges:y});return typeof w=="boolean"?w?{edges:y,nodes:c}:{edges:[],nodes:[]}:w}const Go=(n,t=0,e=1)=>Math.min(Math.max(n,t),e),Ia=(n={x:0,y:0},t,e)=>({x:Go(n.x,t[0][0],t[1][0]-((e==null?void 0:e.width)??0)),y:Go(n.y,t[0][1],t[1][1]-((e==null?void 0:e.height)??0))});function Ox(n,t,e){const{width:i,height:a}=ns(e),{x:u,y:c}=e.internals.positionAbsolute;return Ia(n,[[u,c],[u+i,c+a]],t)}const Kb=(n,t,e)=>n<t?Go(Math.abs(n-t),1,t)/t:n>e?-Go(Math.abs(n-e),1,t)/t:0,Ix=(n,t,e=15,i=40)=>{const a=Kb(n.x,i,t.width-i)*e,u=Kb(n.y,i,t.height-i)*e;return[a,u]},Md=(n,t)=>({x:Math.min(n.x,t.x),y:Math.min(n.y,t.y),x2:Math.max(n.x2,t.x2),y2:Math.max(n.y2,t.y2)}),fy=({x:n,y:t,width:e,height:i})=>({x:n,y:t,x2:n+e,y2:t+i}),Bd=({x:n,y:t,x2:e,y2:i})=>({x:n,y:t,width:e-n,height:i-t}),Xo=(n,t=[0,0])=>{var a,u;const{x:e,y:i}=Yy(n)?n.internals.positionAbsolute:ju(n,t);return{x:e,y:i,width:((a=n.measured)==null?void 0:a.width)??n.width??n.initialWidth??0,height:((u=n.measured)==null?void 0:u.height)??n.height??n.initialHeight??0}},pd=(n,t=[0,0])=>{var a,u;const{x:e,y:i}=Yy(n)?n.internals.positionAbsolute:ju(n,t);return{x:e,y:i,x2:e+(((a=n.measured)==null?void 0:a.width)??n.width??n.initialWidth??0),y2:i+(((u=n.measured)==null?void 0:u.height)??n.height??n.initialHeight??0)}},Rx=(n,t)=>Bd(Md(fy(n),fy(t))),Bu=(n,t)=>{const e=Math.max(0,Math.min(n.x+n.width,t.x+t.width)-Math.max(n.x,t.x)),i=Math.max(0,Math.min(n.y+n.height,t.y+t.height)-Math.max(n.y,t.y));return Math.ceil(e*i)},Fb=n=>Fn(n.width)&&Fn(n.height)&&Fn(n.x)&&Fn(n.y),Fn=n=>!isNaN(n)&&isFinite(n),OO=(n,t)=>{},zd=(n,t=[1,1])=>({x:t[0]*Math.round(n.x/t[0]),y:t[1]*Math.round(n.y/t[1])}),Gu=({x:n,y:t},[e,i,a],u=!1,c=[1,1])=>{const d={x:(n-e)/a,y:(t-i)/a};return u?zd(d,c):d},vd=({x:n,y:t},[e,i,a])=>({x:n*a+e,y:t*a+i});function Ao(n,t){if(typeof n=="number")return Math.floor(t-t/(1+n));if(typeof n=="string"&&n.endsWith("px")){const e=parseFloat(n);if(!Number.isNaN(e))return Math.floor(e)}if(typeof n=="string"&&n.endsWith("%")){const e=parseFloat(n);if(!Number.isNaN(e))return Math.floor(t*e*.01)}return console.error(`[React Flow] The padding value "${n}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function IO(n,t,e){if(typeof n=="string"||typeof n=="number"){const i=Ao(n,e),a=Ao(n,t);return{top:i,right:a,bottom:i,left:a,x:a*2,y:i*2}}if(typeof n=="object"){const i=Ao(n.top??n.y??0,e),a=Ao(n.bottom??n.y??0,e),u=Ao(n.left??n.x??0,t),c=Ao(n.right??n.x??0,t);return{top:i,right:c,bottom:a,left:u,x:u+c,y:i+a}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function RO(n,t,e,i,a,u){const{x:c,y:d}=vd(n,[t,e,i]),{x:h,y:g}=vd({x:n.x+n.width,y:n.y+n.height},[t,e,i]),y=a-h,w=u-g;return{left:Math.floor(c),top:Math.floor(d),right:Math.floor(y),bottom:Math.floor(w)}}const Gy=(n,t,e,i,a,u)=>{const c=IO(u,t,e),d=(t-c.x)/n.width,h=(e-c.y)/n.height,g=Math.min(d,h),y=Go(g,i,a),w=n.x+n.width/2,p=n.y+n.height/2,b=t/2-w*y,x=e/2-p*y,C=RO(n,b,x,y,t,e),I={left:Math.min(C.left-c.left,0),top:Math.min(C.top-c.top,0),right:Math.min(C.right-c.right,0),bottom:Math.min(C.bottom-c.bottom,0)};return{x:b-I.left+I.right,y:x-I.top+I.bottom,zoom:y}},wd=()=>{var n;return typeof navigator<"u"&&((n=navigator==null?void 0:navigator.userAgent)==null?void 0:n.indexOf("Mac"))>=0};function Ko(n){return n!==void 0&&n!=="parent"}function ns(n){var t,e;return{width:((t=n.measured)==null?void 0:t.width)??n.width??n.initialWidth??0,height:((e=n.measured)==null?void 0:e.height)??n.height??n.initialHeight??0}}function Mx(n){var t,e;return(((t=n.measured)==null?void 0:t.width)??n.width??n.initialWidth)!==void 0&&(((e=n.measured)==null?void 0:e.height)??n.height??n.initialHeight)!==void 0}function Bx(n,t={width:0,height:0},e,i,a){const u={...n},c=i.get(e);if(c){const d=c.origin||a;u.x+=c.internals.positionAbsolute.x-(t.width??0)*d[0],u.y+=c.internals.positionAbsolute.y-(t.height??0)*d[1]}return u}function Zb(n,t){if(n.size!==t.size)return!1;for(const e of n)if(!t.has(e))return!1;return!0}function mu(n,{snapGrid:t=[0,0],snapToGrid:e=!1,transform:i,containerBounds:a}){const{x:u,y:c}=Zi(n),d=Gu({x:u-((a==null?void 0:a.left)??0),y:c-((a==null?void 0:a.top)??0)},i),{x:h,y:g}=e?zd(d,t):d;return{xSnapped:h,ySnapped:g,...d}}const Xy=n=>({width:n.offsetWidth,height:n.offsetHeight}),zx=n=>{var t;return((t=n==null?void 0:n.getRootNode)==null?void 0:t.call(n))||(window==null?void 0:window.document)},MO=["INPUT","SELECT","TEXTAREA"];function Lx(n){var i,a;const t=((a=(i=n.composedPath)==null?void 0:i.call(n))==null?void 0:a[0])||n.target;return(t==null?void 0:t.nodeType)!==1?!1:MO.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey")}const _x=n=>"clientX"in n,Zi=(n,t)=>{var u,c;const e=_x(n),i=e?n.clientX:(u=n.touches)==null?void 0:u[0].clientX,a=e?n.clientY:(c=n.touches)==null?void 0:c[0].clientY;return{x:i-((t==null?void 0:t.left)??0),y:a-((t==null?void 0:t.top)??0)}},Qb=(n,t,e,i,a)=>{const u=t.querySelectorAll(`.${n}`);return!u||!u.length?null:Array.from(u).map(c=>{const d=c.getBoundingClientRect();return{id:c.getAttribute("data-handleid"),type:n,nodeId:a,position:c.getAttribute("data-handlepos"),x:(d.left-e.left)/i,y:(d.top-e.top)/i,...Xy(c)}})};function Ux({sourceX:n,sourceY:t,targetX:e,targetY:i,sourceControlX:a,sourceControlY:u,targetControlX:c,targetControlY:d}){const h=n*.125+a*.375+c*.375+e*.125,g=t*.125+u*.375+d*.375+i*.125,y=Math.abs(h-n),w=Math.abs(g-t);return[h,g,y,w]}function Af(n,t){return n>=0?.5*n:t*25*Math.sqrt(-n)}function Wb({pos:n,x1:t,y1:e,x2:i,y2:a,c:u}){switch(n){case Tt.Left:return[t-Af(t-i,u),e];case Tt.Right:return[t+Af(i-t,u),e];case Tt.Top:return[t,e-Af(e-a,u)];case Tt.Bottom:return[t,e+Af(a-e,u)]}}function qx({sourceX:n,sourceY:t,sourcePosition:e=Tt.Bottom,targetX:i,targetY:a,targetPosition:u=Tt.Top,curvature:c=.25}){const[d,h]=Wb({pos:e,x1:n,y1:t,x2:i,y2:a,c}),[g,y]=Wb({pos:u,x1:i,y1:a,x2:n,y2:t,c}),[w,p,b,x]=Ux({sourceX:n,sourceY:t,targetX:i,targetY:a,sourceControlX:d,sourceControlY:h,targetControlX:g,targetControlY:y});return[`M${n},${t} C${d},${h} ${g},${y} ${i},${a}`,w,p,b,x]}function Px({sourceX:n,sourceY:t,targetX:e,targetY:i}){const a=Math.abs(e-n)/2,u=e<n?e+a:e-a,c=Math.abs(i-t)/2,d=i<t?i+c:i-c;return[u,d,a,c]}function BO({sourceNode:n,targetNode:t,selected:e=!1,zIndex:i=0,elevateOnSelect:a=!1}){if(!a)return i;const u=e||t.selected||n.selected,c=Math.max(n.internals.z||0,t.internals.z||0,1e3);return i+(u?c:0)}function zO({sourceNode:n,targetNode:t,width:e,height:i,transform:a}){const u=Md(pd(n),pd(t));u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const c={x:-a[0]/a[2],y:-a[1]/a[2],width:e/a[2],height:i/a[2]};return Bu(c,Bd(u))>0}const LO=({source:n,sourceHandle:t,target:e,targetHandle:i})=>`xy-edge__${n}${t||""}-${e}${i||""}`,_O=(n,t)=>t.some(e=>e.source===n.source&&e.target===n.target&&(e.sourceHandle===n.sourceHandle||!e.sourceHandle&&!n.sourceHandle)&&(e.targetHandle===n.targetHandle||!e.targetHandle&&!n.targetHandle)),UO=(n,t)=>{if(!n.source||!n.target)return t;let e;return Cx(n)?e={...n}:e={...n,id:LO(n)},_O(e,t)?t:(e.sourceHandle===null&&delete e.sourceHandle,e.targetHandle===null&&delete e.targetHandle,t.concat(e))};function Jx({sourceX:n,sourceY:t,targetX:e,targetY:i}){const[a,u,c,d]=Px({sourceX:n,sourceY:t,targetX:e,targetY:i});return[`M ${n},${t}L ${e},${i}`,a,u,c,d]}const t1={[Tt.Left]:{x:-1,y:0},[Tt.Right]:{x:1,y:0},[Tt.Top]:{x:0,y:-1},[Tt.Bottom]:{x:0,y:1}},qO=({source:n,sourcePosition:t=Tt.Bottom,target:e})=>t===Tt.Left||t===Tt.Right?n.x<e.x?{x:1,y:0}:{x:-1,y:0}:n.y<e.y?{x:0,y:1}:{x:0,y:-1},e1=(n,t)=>Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2));function PO({source:n,sourcePosition:t=Tt.Bottom,target:e,targetPosition:i=Tt.Top,center:a,offset:u}){const c=t1[t],d=t1[i],h={x:n.x+c.x*u,y:n.y+c.y*u},g={x:e.x+d.x*u,y:e.y+d.y*u},y=qO({source:h,sourcePosition:t,target:g}),w=y.x!==0?"x":"y",p=y[w];let b=[],x,C;const I={x:0,y:0},O={x:0,y:0},[z,E,k,L]=Px({sourceX:n.x,sourceY:n.y,targetX:e.x,targetY:e.y});if(c[w]*d[w]===-1){x=a.x??z,C=a.y??E;const H=[{x,y:h.y},{x,y:g.y}],tt=[{x:h.x,y:C},{x:g.x,y:C}];c[w]===p?b=w==="x"?H:tt:b=w==="x"?tt:H}else{const H=[{x:h.x,y:g.y}],tt=[{x:g.x,y:h.y}];if(w==="x"?b=c.x===p?tt:H:b=c.y===p?H:tt,t===i){const ct=Math.abs(n[w]-e[w]);if(ct<=u){const R=Math.min(u-1,u-ct);c[w]===p?I[w]=(h[w]>n[w]?-1:1)*R:O[w]=(g[w]>e[w]?-1:1)*R}}if(t!==i){const ct=w==="x"?"y":"x",R=c[w]===d[ct],j=h[ct]>g[ct],D=h[ct]<g[ct];(c[w]===1&&(!R&&j||R&&D)||c[w]!==1&&(!R&&D||R&&j))&&(b=w==="x"?H:tt)}const nt={x:h.x+I.x,y:h.y+I.y},it={x:g.x+O.x,y:g.y+O.y},ft=Math.max(Math.abs(nt.x-b[0].x),Math.abs(it.x-b[0].x)),ot=Math.max(Math.abs(nt.y-b[0].y),Math.abs(it.y-b[0].y));ft>=ot?(x=(nt.x+it.x)/2,C=b[0].y):(x=b[0].x,C=(nt.y+it.y)/2)}return[[n,{x:h.x+I.x,y:h.y+I.y},...b,{x:g.x+O.x,y:g.y+O.y},e],x,C,k,L]}function JO(n,t,e,i){const a=Math.min(e1(n,t)/2,e1(t,e)/2,i),{x:u,y:c}=t;if(n.x===u&&u===e.x||n.y===c&&c===e.y)return`L${u} ${c}`;if(n.y===c){const g=n.x<e.x?-1:1,y=n.y<e.y?1:-1;return`L ${u+a*g},${c}Q ${u},${c} ${u},${c+a*y}`}const d=n.x<e.x?1:-1,h=n.y<e.y?-1:1;return`L ${u},${c+a*h}Q ${u},${c} ${u+a*d},${c}`}function dy({sourceX:n,sourceY:t,sourcePosition:e=Tt.Bottom,targetX:i,targetY:a,targetPosition:u=Tt.Top,borderRadius:c=5,centerX:d,centerY:h,offset:g=20}){const[y,w,p,b,x]=PO({source:{x:n,y:t},sourcePosition:e,target:{x:i,y:a},targetPosition:u,center:{x:d,y:h},offset:g});return[y.reduce((I,O,z)=>{let E="";return z>0&&z<y.length-1?E=JO(y[z-1],O,y[z+1],c):E=`${z===0?"M":"L"}${O.x} ${O.y}`,I+=E,I},""),w,p,b,x]}function n1(n){var t;return n&&!!(n.internals.handleBounds||(t=n.handles)!=null&&t.length)&&!!(n.measured.width||n.width||n.initialWidth)}function HO(n){var w;const{sourceNode:t,targetNode:e}=n;if(!n1(t)||!n1(e))return null;const i=t.internals.handleBounds||r1(t.handles),a=e.internals.handleBounds||r1(e.handles),u=i1((i==null?void 0:i.source)??[],n.sourceHandle),c=i1(n.connectionMode===Yo.Strict?(a==null?void 0:a.target)??[]:((a==null?void 0:a.target)??[]).concat((a==null?void 0:a.source)??[]),n.targetHandle);if(!u||!c)return(w=n.onError)==null||w.call(n,"008",Ar.error008(u?"target":"source",{id:n.id,sourceHandle:n.sourceHandle,targetHandle:n.targetHandle})),null;const d=(u==null?void 0:u.position)||Tt.Bottom,h=(c==null?void 0:c.position)||Tt.Top,g=zu(t,u,d),y=zu(e,c,h);return{sourceX:g.x,sourceY:g.y,targetX:y.x,targetY:y.y,sourcePosition:d,targetPosition:h}}function r1(n){if(!n)return null;const t=[],e=[];for(const i of n)i.width=i.width??1,i.height=i.height??1,i.type==="source"?t.push(i):i.type==="target"&&e.push(i);return{source:t,target:e}}function zu(n,t,e=Tt.Left,i=!1){const a=((t==null?void 0:t.x)??0)+n.internals.positionAbsolute.x,u=((t==null?void 0:t.y)??0)+n.internals.positionAbsolute.y,{width:c,height:d}=t??ns(n);if(i)return{x:a+c/2,y:u+d/2};switch((t==null?void 0:t.position)??e){case Tt.Top:return{x:a+c/2,y:u};case Tt.Right:return{x:a+c,y:u+d/2};case Tt.Bottom:return{x:a+c/2,y:u+d};case Tt.Left:return{x:a,y:u+d/2}}}function i1(n,t){return n&&(t?n.find(e=>e.id===t):n[0])||null}function hy(n,t){return n?typeof n=="string"?n:`${t?`${t}__`:""}${Object.keys(n).sort().map(i=>`${i}=${n[i]}`).join("&")}`:""}function $O(n,{id:t,defaultColor:e,defaultMarkerStart:i,defaultMarkerEnd:a}){const u=new Set;return n.reduce((c,d)=>([d.markerStart||i,d.markerEnd||a].forEach(h=>{if(h&&typeof h=="object"){const g=hy(h,t);u.has(g)||(c.push({id:g,color:h.color||e,...h}),u.add(g))}}),c),[]).sort((c,d)=>c.id.localeCompare(d.id))}const Ky={nodeOrigin:[0,0],nodeExtent:Ru,elevateNodesOnSelect:!0,defaults:{}},VO={...Ky,checkEquality:!0};function Fy(n,t){const e={...n};for(const i in t)t[i]!==void 0&&(e[i]=t[i]);return e}function jO(n,t,e){const i=Fy(Ky,e);for(const a of n.values())if(a.parentId)Zy(a,n,t,i);else{const u=ju(a,i.nodeOrigin),c=Ko(a.extent)?a.extent:i.nodeExtent,d=Ia(u,c,ns(a));a.internals.positionAbsolute=d}}function gy(n,t,e,i){var h,g;const a=Fy(VO,i);let u=!0;const c=new Map(t),d=a!=null&&a.elevateNodesOnSelect?1e3:0;t.clear(),e.clear();for(const y of n){let w=c.get(y.id);if(a.checkEquality&&y===(w==null?void 0:w.internals.userNode))t.set(y.id,w);else{const p=ju(y,a.nodeOrigin),b=Ko(y.extent)?y.extent:a.nodeExtent,x=Ia(p,b,ns(y));w={...a.defaults,...y,measured:{width:(h=y.measured)==null?void 0:h.width,height:(g=y.measured)==null?void 0:g.height},internals:{positionAbsolute:x,handleBounds:y.measured?w==null?void 0:w.internals.handleBounds:void 0,z:Hx(y,d),userNode:y}},t.set(y.id,w)}(!w.measured||!w.measured.width||!w.measured.height)&&!w.hidden&&(u=!1),y.parentId&&Zy(w,t,e,i)}return u}function YO(n,t){if(!n.parentId)return;const e=t.get(n.parentId);e?e.set(n.id,n):t.set(n.parentId,new Map([[n.id,n]]))}function Zy(n,t,e,i){const{elevateNodesOnSelect:a,nodeOrigin:u,nodeExtent:c}=Fy(Ky,i),d=n.parentId,h=t.get(d);if(!h){console.warn(`Parent node ${d} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}YO(n,e);const g=a?1e3:0,{x:y,y:w,z:p}=GO(n,h,u,c,g),{positionAbsolute:b}=n.internals,x=y!==b.x||w!==b.y;(x||p!==n.internals.z)&&t.set(n.id,{...n,internals:{...n.internals,positionAbsolute:x?{x:y,y:w}:b,z:p}})}function Hx(n,t){return(Fn(n.zIndex)?n.zIndex:0)+(n.selected?t:0)}function GO(n,t,e,i,a){const{x:u,y:c}=t.internals.positionAbsolute,d=ns(n),h=ju(n,e),g=Ko(n.extent)?Ia(h,n.extent,d):h;let y=Ia({x:u+g.x,y:c+g.y},i,d);n.extent==="parent"&&(y=Ox(y,d,t));const w=Hx(n,a),p=t.internals.z??0;return{x:y.x,y:y.y,z:p>w?p:w}}function Qy(n,t,e,i=[0,0]){var c;const a=[],u=new Map;for(const d of n){const h=t.get(d.parentId);if(!h)continue;const g=((c=u.get(d.parentId))==null?void 0:c.expandedRect)??Xo(h),y=Rx(g,d.rect);u.set(d.parentId,{expandedRect:y,parent:h})}return u.size>0&&u.forEach(({expandedRect:d,parent:h},g)=>{var E;const y=h.internals.positionAbsolute,w=ns(h),p=h.origin??i,b=d.x<y.x?Math.round(Math.abs(y.x-d.x)):0,x=d.y<y.y?Math.round(Math.abs(y.y-d.y)):0,C=Math.max(w.width,Math.round(d.width)),I=Math.max(w.height,Math.round(d.height)),O=(C-w.width)*p[0],z=(I-w.height)*p[1];(b>0||x>0||O||z)&&(a.push({id:g,type:"position",position:{x:h.position.x-b+O,y:h.position.y-x+z}}),(E=e.get(g))==null||E.forEach(k=>{n.some(L=>L.id===k.id)||a.push({id:k.id,type:"position",position:{x:k.position.x+b,y:k.position.y+x}})})),(w.width<d.width||w.height<d.height||b||x)&&a.push({id:g,type:"dimensions",setAttributes:!0,dimensions:{width:C+(b?p[0]*b-O:0),height:I+(x?p[1]*x-z:0)}})}),a}function XO(n,t,e,i,a,u){const c=i==null?void 0:i.querySelector(".xyflow__viewport");let d=!1;if(!c)return{changes:[],updatedInternals:d};const h=[],g=window.getComputedStyle(c),{m22:y}=new window.DOMMatrixReadOnly(g.transform),w=[];for(const p of n.values()){const b=t.get(p.id);if(!b)continue;if(b.hidden){t.set(b.id,{...b,internals:{...b.internals,handleBounds:void 0}}),d=!0;continue}const x=Xy(p.nodeElement),C=b.measured.width!==x.width||b.measured.height!==x.height;if(!!(x.width&&x.height&&(C||!b.internals.handleBounds||p.force))){const O=p.nodeElement.getBoundingClientRect(),z=Ko(b.extent)?b.extent:u;let{positionAbsolute:E}=b.internals;b.parentId&&b.extent==="parent"?E=Ox(E,x,t.get(b.parentId)):z&&(E=Ia(E,z,x));const k={...b,measured:x,internals:{...b.internals,positionAbsolute:E,handleBounds:{source:Qb("source",p.nodeElement,O,y,b.id),target:Qb("target",p.nodeElement,O,y,b.id)}}};t.set(b.id,k),b.parentId&&Zy(k,t,e,{nodeOrigin:a}),d=!0,C&&(h.push({id:b.id,type:"dimensions",dimensions:x}),b.expandParent&&b.parentId&&w.push({id:b.id,parentId:b.parentId,rect:Xo(k,a)}))}}if(w.length>0){const p=Qy(w,t,e,a);h.push(...p)}return{changes:h,updatedInternals:d}}async function KO({delta:n,panZoom:t,transform:e,translateExtent:i,width:a,height:u}){if(!t||!n.x&&!n.y)return Promise.resolve(!1);const c=await t.setViewportConstrained({x:e[0]+n.x,y:e[1]+n.y,zoom:e[2]},[[0,0],[a,u]],i),d=!!c&&(c.x!==e[0]||c.y!==e[1]||c.k!==e[2]);return Promise.resolve(d)}function s1(n,t,e,i,a,u){let c=a;const d=i.get(c)||new Map;i.set(c,d.set(e,t)),c=`${a}-${n}`;const h=i.get(c)||new Map;if(i.set(c,h.set(e,t)),u){c=`${a}-${n}-${u}`;const g=i.get(c)||new Map;i.set(c,g.set(e,t))}}function $x(n,t,e){n.clear(),t.clear();for(const i of e){const{source:a,target:u,sourceHandle:c=null,targetHandle:d=null}=i,h={edgeId:i.id,source:a,target:u,sourceHandle:c,targetHandle:d},g=`${a}-${c}--${u}-${d}`,y=`${u}-${d}--${a}-${c}`;s1("source",h,y,n,a,c),s1("target",h,g,n,u,d),t.set(i.id,i)}}function Vx(n,t){if(!n.parentId)return!1;const e=t.get(n.parentId);return e?e.selected?!0:Vx(e,t):!1}function a1(n,t,e){var a;let i=n;do{if((a=i==null?void 0:i.matches)!=null&&a.call(i,t))return!0;if(i===e)return!1;i=i==null?void 0:i.parentElement}while(i);return!1}function FO(n,t,e,i){const a=new Map;for(const[u,c]of n)if((c.selected||c.id===i)&&(!c.parentId||!Vx(c,n))&&(c.draggable||t&&typeof c.draggable>"u")){const d=n.get(u);d&&a.set(u,{id:u,position:d.position||{x:0,y:0},distance:{x:e.x-d.internals.positionAbsolute.x,y:e.y-d.internals.positionAbsolute.y},extent:d.extent,parentId:d.parentId,origin:d.origin,expandParent:d.expandParent,internals:{positionAbsolute:d.internals.positionAbsolute||{x:0,y:0}},measured:{width:d.measured.width??0,height:d.measured.height??0}})}return a}function wm({nodeId:n,dragItems:t,nodeLookup:e,dragging:i=!0}){var c,d,h;const a=[];for(const[g,y]of t){const w=(c=e.get(g))==null?void 0:c.internals.userNode;w&&a.push({...w,position:y.position,dragging:i})}if(!n)return[a[0],a];const u=(d=e.get(n))==null?void 0:d.internals.userNode;return[u?{...u,position:((h=t.get(n))==null?void 0:h.position)||u.position,dragging:i}:a[0],a]}function ZO({onNodeMouseDown:n,getStoreItems:t,onDragStart:e,onDrag:i,onDragStop:a}){let u={x:null,y:null},c=0,d=new Map,h=!1,g={x:0,y:0},y=null,w=!1,p=null,b=!1;function x({noDragClassName:I,handleSelector:O,domNode:z,isSelectable:E,nodeId:k,nodeClickDistance:L=0}){p=cn(z);function V({x:it,y:ft},ot){const{nodeLookup:ct,nodeExtent:R,snapGrid:j,snapToGrid:D,nodeOrigin:B,onNodeDrag:P,onSelectionDrag:U,onError:N,updateNodePositions:q}=t();u={x:it,y:ft};let Q=!1,et={x:0,y:0,x2:0,y2:0};if(d.size>1&&R){const ut=Yu(d);et=fy(ut)}for(const[ut,gt]of d){if(!ct.has(ut))continue;let dt={x:it-gt.distance.x,y:ft-gt.distance.y};D&&(dt=zd(dt,j));let mt=[[R[0][0],R[0][1]],[R[1][0],R[1][1]]];if(d.size>1&&R&&!gt.extent){const{positionAbsolute:Vt}=gt.internals,Ot=Vt.x-et.x+R[0][0],St=Vt.x+gt.measured.width-et.x2+R[1][0],Yt=Vt.y-et.y+R[0][1],qt=Vt.y+gt.measured.height-et.y2+R[1][1];mt=[[Ot,Yt],[St,qt]]}const{position:pt,positionAbsolute:Dt}=kx({nodeId:ut,nextPosition:dt,nodeLookup:ct,nodeExtent:mt,nodeOrigin:B,onError:N});Q=Q||gt.position.x!==pt.x||gt.position.y!==pt.y,gt.position=pt,gt.internals.positionAbsolute=Dt}if(Q&&(q(d,!0),ot&&(i||P||!k&&U))){const[ut,gt]=wm({nodeId:k,dragItems:d,nodeLookup:ct});i==null||i(ot,d,ut,gt),P==null||P(ot,ut,gt),k||U==null||U(ot,gt)}}async function H(){if(!y)return;const{transform:it,panBy:ft,autoPanSpeed:ot,autoPanOnNodeDrag:ct}=t();if(!ct){h=!1,cancelAnimationFrame(c);return}const[R,j]=Ix(g,y,ot);(R!==0||j!==0)&&(u.x=(u.x??0)-R/it[2],u.y=(u.y??0)-j/it[2],await ft({x:R,y:j})&&V(u,null)),c=requestAnimationFrame(H)}function tt(it){var Q;const{nodeLookup:ft,multiSelectionActive:ot,nodesDraggable:ct,transform:R,snapGrid:j,snapToGrid:D,selectNodesOnDrag:B,onNodeDragStart:P,onSelectionDragStart:U,unselectNodesAndEdges:N}=t();w=!0,(!B||!E)&&!ot&&k&&((Q=ft.get(k))!=null&&Q.selected||N()),E&&B&&k&&(n==null||n(k));const q=mu(it.sourceEvent,{transform:R,snapGrid:j,snapToGrid:D,containerBounds:y});if(u=q,d=FO(ft,ct,q,k),d.size>0&&(e||P||!k&&U)){const[et,ut]=wm({nodeId:k,dragItems:d,nodeLookup:ft});e==null||e(it.sourceEvent,d,et,ut),P==null||P(it.sourceEvent,et,ut),k||U==null||U(it.sourceEvent,ut)}}const nt=lx().clickDistance(L).on("start",it=>{const{domNode:ft,nodeDragThreshold:ot,transform:ct,snapGrid:R,snapToGrid:j}=t();y=(ft==null?void 0:ft.getBoundingClientRect())||null,b=!1,ot===0&&tt(it),u=mu(it.sourceEvent,{transform:ct,snapGrid:R,snapToGrid:j,containerBounds:y}),g=Zi(it.sourceEvent,y)}).on("drag",it=>{const{autoPanOnNodeDrag:ft,transform:ot,snapGrid:ct,snapToGrid:R,nodeDragThreshold:j,nodeLookup:D}=t(),B=mu(it.sourceEvent,{transform:ot,snapGrid:ct,snapToGrid:R,containerBounds:y});if((it.sourceEvent.type==="touchmove"&&it.sourceEvent.touches.length>1||k&&!D.has(k))&&(b=!0),!b){if(!h&&ft&&w&&(h=!0,H()),!w){const P=B.xSnapped-(u.x??0),U=B.ySnapped-(u.y??0);Math.sqrt(P*P+U*U)>j&&tt(it)}(u.x!==B.xSnapped||u.y!==B.ySnapped)&&d&&w&&(g=Zi(it.sourceEvent,y),V(B,it.sourceEvent))}}).on("end",it=>{if(!(!w||b)&&(h=!1,w=!1,cancelAnimationFrame(c),d.size>0)){const{nodeLookup:ft,updateNodePositions:ot,onNodeDragStop:ct,onSelectionDragStop:R}=t();if(ot(d,!1),a||ct||!k&&R){const[j,D]=wm({nodeId:k,dragItems:d,nodeLookup:ft,dragging:!1});a==null||a(it.sourceEvent,d,j,D),ct==null||ct(it.sourceEvent,j,D),k||R==null||R(it.sourceEvent,D)}}}).filter(it=>{const ft=it.target;return!it.button&&(!I||!a1(ft,`.${I}`,z))&&(!O||a1(ft,O,z))});p.call(nt)}function C(){p==null||p.on(".drag",null)}return{update:x,destroy:C}}function QO(n,t,e){const i=[],a={x:n.x-e,y:n.y-e,width:e*2,height:e*2};for(const u of t.values())Bu(a,Xo(u))>0&&i.push(u);return i}const WO=250;function tI(n,t,e,i){var d,h;let a=[],u=1/0;const c=QO(n,e,t+WO);for(const g of c){const y=[...((d=g.internals.handleBounds)==null?void 0:d.source)??[],...((h=g.internals.handleBounds)==null?void 0:h.target)??[]];for(const w of y){if(i.nodeId===w.nodeId&&i.type===w.type&&i.id===w.id)continue;const{x:p,y:b}=zu(g,w,w.position,!0),x=Math.sqrt(Math.pow(p-n.x,2)+Math.pow(b-n.y,2));x>t||(x<u?(a=[{...w,x:p,y:b}],u=x):x===u&&a.push({...w,x:p,y:b}))}}if(!a.length)return null;if(a.length>1){const g=i.type==="source"?"target":"source";return a.find(y=>y.type===g)??a[0]}return a[0]}function jx(n,t,e,i,a,u=!1){var g,y,w;const c=i.get(n);if(!c)return null;const d=a==="strict"?(g=c.internals.handleBounds)==null?void 0:g[t]:[...((y=c.internals.handleBounds)==null?void 0:y.source)??[],...((w=c.internals.handleBounds)==null?void 0:w.target)??[]],h=(e?d==null?void 0:d.find(p=>p.id===e):d==null?void 0:d[0])??null;return h&&u?{...h,...zu(c,h,h.position,!0)}:h}function Yx(n,t){return n||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function eI(n,t){let e=null;return t?e=!0:n&&!t&&(e=!1),e}const Gx=()=>!0;function nI(n,{connectionMode:t,connectionRadius:e,handleId:i,nodeId:a,edgeUpdaterType:u,isTarget:c,domNode:d,nodeLookup:h,lib:g,autoPanOnConnect:y,flowId:w,panBy:p,cancelConnection:b,onConnectStart:x,onConnect:C,onConnectEnd:I,isValidConnection:O=Gx,onReconnectEnd:z,updateConnection:E,getTransform:k,getFromHandle:L,autoPanSpeed:V}){const H=zx(n.target);let tt=0,nt;const{x:it,y:ft}=Zi(n),ot=H==null?void 0:H.elementFromPoint(it,ft),ct=Yx(u,ot),R=d==null?void 0:d.getBoundingClientRect();if(!R||!ct)return;const j=jx(a,ct,i,h,t);if(!j)return;let D=Zi(n,R),B=!1,P=null,U=!1,N=null;function q(){if(!y||!R)return;const[Dt,Vt]=Ix(D,R,V);p({x:Dt,y:Vt}),tt=requestAnimationFrame(q)}const Q={...j,nodeId:a,type:ct,position:j.position},et=h.get(a),gt={inProgress:!0,isValid:null,from:zu(et,Q,Tt.Left,!0),fromHandle:Q,fromPosition:Q.position,fromNode:et,to:D,toHandle:null,toPosition:Xb[Q.position],toNode:null};E(gt);let dt=gt;x==null||x(n,{nodeId:a,handleId:i,handleType:ct});function mt(Dt){if(!L()||!Q){pt(Dt);return}const Vt=k();D=Zi(Dt,R),nt=tI(Gu(D,Vt,!1,[1,1]),e,h,Q),B||(q(),B=!0);const Ot=Xx(Dt,{handle:nt,connectionMode:t,fromNodeId:a,fromHandleId:i,fromType:c?"target":"source",isValidConnection:O,doc:H,lib:g,flowId:w,nodeLookup:h});N=Ot.handleDomNode,P=Ot.connection,U=eI(!!nt,Ot.isValid);const St={...dt,isValid:U,to:nt&&U?vd({x:nt.x,y:nt.y},Vt):D,toHandle:Ot.toHandle,toPosition:U&&Ot.toHandle?Ot.toHandle.position:Xb[Q.position],toNode:Ot.toHandle?h.get(Ot.toHandle.nodeId):null};U&&nt&&dt.toHandle&&St.toHandle&&dt.toHandle.type===St.toHandle.type&&dt.toHandle.nodeId===St.toHandle.nodeId&&dt.toHandle.id===St.toHandle.id&&dt.to.x===St.to.x&&dt.to.y===St.to.y||(E(St),dt=St)}function pt(Dt){(nt||N)&&P&&U&&(C==null||C(P));const{inProgress:Vt,...Ot}=dt,St={...Ot,toPosition:dt.toHandle?dt.toPosition:null};I==null||I(Dt,St),u&&(z==null||z(Dt,St)),b(),cancelAnimationFrame(tt),B=!1,U=!1,P=null,N=null,H.removeEventListener("mousemove",mt),H.removeEventListener("mouseup",pt),H.removeEventListener("touchmove",mt),H.removeEventListener("touchend",pt)}H.addEventListener("mousemove",mt),H.addEventListener("mouseup",pt),H.addEventListener("touchmove",mt),H.addEventListener("touchend",pt)}function Xx(n,{handle:t,connectionMode:e,fromNodeId:i,fromHandleId:a,fromType:u,doc:c,lib:d,flowId:h,isValidConnection:g=Gx,nodeLookup:y}){const w=u==="target",p=t?c.querySelector(`.${d}-flow__handle[data-id="${h}-${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`):null,{x:b,y:x}=Zi(n),C=c.elementFromPoint(b,x),I=C!=null&&C.classList.contains(`${d}-flow__handle`)?C:p,O={handleDomNode:I,isValid:!1,connection:null,toHandle:null};if(I){const z=Yx(void 0,I),E=I.getAttribute("data-nodeid"),k=I.getAttribute("data-handleid"),L=I.classList.contains("connectable"),V=I.classList.contains("connectableend");if(!E||!z)return O;const H={source:w?E:i,sourceHandle:w?k:a,target:w?i:E,targetHandle:w?a:k};O.connection=H;const nt=L&&V&&(e===Yo.Strict?w&&z==="source"||!w&&z==="target":E!==i||k!==a);O.isValid=nt&&g(H),O.toHandle=jx(E,z,k,y,e,!1)}return O}const my={onPointerDown:nI,isValid:Xx};function rI({domNode:n,panZoom:t,getTransform:e,getViewScale:i}){const a=cn(n);function u({translateExtent:d,width:h,height:g,zoomStep:y=10,pannable:w=!0,zoomable:p=!0,inversePan:b=!1}){const x=E=>{const k=e();if(E.sourceEvent.type!=="wheel"||!t)return;const L=-E.sourceEvent.deltaY*(E.sourceEvent.deltaMode===1?.05:E.sourceEvent.deltaMode?1:.002)*y,V=k[2]*Math.pow(2,L);t.scaleTo(V)};let C=[0,0];const I=E=>{(E.sourceEvent.type==="mousedown"||E.sourceEvent.type==="touchstart")&&(C=[E.sourceEvent.clientX??E.sourceEvent.touches[0].clientX,E.sourceEvent.clientY??E.sourceEvent.touches[0].clientY])},O=E=>{const k=e();if(E.sourceEvent.type!=="mousemove"&&E.sourceEvent.type!=="touchmove"||!t)return;const L=[E.sourceEvent.clientX??E.sourceEvent.touches[0].clientX,E.sourceEvent.clientY??E.sourceEvent.touches[0].clientY],V=[L[0]-C[0],L[1]-C[1]];C=L;const H=i()*Math.max(k[2],Math.log(k[2]))*(b?-1:1),tt={x:k[0]-V[0]*H,y:k[1]-V[1]*H},nt=[[0,0],[h,g]];t.setViewportConstrained({x:tt.x,y:tt.y,zoom:k[2]},nt,d)},z=Tx().on("start",I).on("zoom",w?O:null).on("zoom.wheel",p?x:null);a.call(z,{})}function c(){a.on("zoom",null)}return{update:u,destroy:c,pointer:Yn}}const iI=(n,t)=>n.x!==t.x||n.y!==t.y||n.zoom!==t.k,Ld=n=>({x:n.x,y:n.y,zoom:n.k}),bm=({x:n,y:t,zoom:e})=>Rd.translate(n,t).scale(e),Do=(n,t)=>n.target.closest(`.${t}`),Kx=(n,t)=>t===2&&Array.isArray(n)&&n.includes(2),Sm=(n,t=0,e=()=>{})=>{const i=typeof t=="number"&&t>0;return i||e(),i?n.transition().duration(t).on("end",e):n},Fx=n=>{const t=n.ctrlKey&&wd()?10:1;return-n.deltaY*(n.deltaMode===1?.05:n.deltaMode?1:.002)*t};function sI({zoomPanValues:n,noWheelClassName:t,d3Selection:e,d3Zoom:i,panOnScrollMode:a,panOnScrollSpeed:u,zoomOnPinch:c,onPanZoomStart:d,onPanZoom:h,onPanZoomEnd:g}){return y=>{if(Do(y,t))return!1;y.preventDefault(),y.stopImmediatePropagation();const w=e.property("__zoom").k||1;if(y.ctrlKey&&c){const I=Yn(y),O=Fx(y),z=w*Math.pow(2,O);i.scaleTo(e,z,I,y);return}const p=y.deltaMode===1?20:1;let b=a===Na.Vertical?0:y.deltaX*p,x=a===Na.Horizontal?0:y.deltaY*p;!wd()&&y.shiftKey&&a!==Na.Vertical&&(b=y.deltaY*p,x=0),i.translateBy(e,-(b/w)*u,-(x/w)*u,{internal:!0});const C=Ld(e.property("__zoom"));clearTimeout(n.panScrollTimeout),n.isPanScrolling||(n.isPanScrolling=!0,d==null||d(y,C)),n.isPanScrolling&&(h==null||h(y,C),n.panScrollTimeout=setTimeout(()=>{g==null||g(y,C),n.isPanScrolling=!1},150))}}function aI({noWheelClassName:n,preventScrolling:t,d3ZoomHandler:e}){return function(i,a){if(!t&&i.type==="wheel"&&!i.ctrlKey||Do(i,n))return null;i.preventDefault(),e.call(this,i,a)}}function oI({zoomPanValues:n,onDraggingChange:t,onPanZoomStart:e}){return i=>{var u,c,d;if((u=i.sourceEvent)!=null&&u.internal)return;const a=Ld(i.transform);n.mouseButton=((c=i.sourceEvent)==null?void 0:c.button)||0,n.isZoomingOrPanning=!0,n.prevViewport=a,((d=i.sourceEvent)==null?void 0:d.type)==="mousedown"&&t(!0),e&&(e==null||e(i.sourceEvent,a))}}function lI({zoomPanValues:n,panOnDrag:t,onPaneContextMenu:e,onTransformChange:i,onPanZoom:a}){return u=>{var c,d;n.usedRightMouseButton=!!(e&&Kx(t,n.mouseButton??0)),(c=u.sourceEvent)!=null&&c.sync||i([u.transform.x,u.transform.y,u.transform.k]),a&&!((d=u.sourceEvent)!=null&&d.internal)&&(a==null||a(u.sourceEvent,Ld(u.transform)))}}function uI({zoomPanValues:n,panOnDrag:t,panOnScroll:e,onDraggingChange:i,onPanZoomEnd:a,onPaneContextMenu:u}){return c=>{var d;if(!((d=c.sourceEvent)!=null&&d.internal)&&(n.isZoomingOrPanning=!1,u&&Kx(t,n.mouseButton??0)&&!n.usedRightMouseButton&&c.sourceEvent&&u(c.sourceEvent),n.usedRightMouseButton=!1,i(!1),a&&iI(n.prevViewport,c.transform))){const h=Ld(c.transform);n.prevViewport=h,clearTimeout(n.timerId),n.timerId=setTimeout(()=>{a==null||a(c.sourceEvent,h)},e?150:0)}}}function cI({zoomActivationKeyPressed:n,zoomOnScroll:t,zoomOnPinch:e,panOnDrag:i,panOnScroll:a,zoomOnDoubleClick:u,userSelectionActive:c,noWheelClassName:d,noPanClassName:h,lib:g}){return y=>{var x;const w=n||t,p=e&&y.ctrlKey;if(y.button===1&&y.type==="mousedown"&&(Do(y,`${g}-flow__node`)||Do(y,`${g}-flow__edge`)))return!0;if(!i&&!w&&!a&&!u&&!e||c||Do(y,d)&&y.type==="wheel"||Do(y,h)&&(y.type!=="wheel"||a&&y.type==="wheel"&&!n)||!e&&y.ctrlKey&&y.type==="wheel")return!1;if(!e&&y.type==="touchstart"&&((x=y.touches)==null?void 0:x.length)>1)return y.preventDefault(),!1;if(!w&&!a&&!p&&y.type==="wheel"||!i&&(y.type==="mousedown"||y.type==="touchstart")||Array.isArray(i)&&!i.includes(y.button)&&y.type==="mousedown")return!1;const b=Array.isArray(i)&&i.includes(y.button)||!y.button||y.button<=1;return(!y.ctrlKey||y.type==="wheel")&&b}}function fI({domNode:n,minZoom:t,maxZoom:e,paneClickDistance:i,translateExtent:a,viewport:u,onPanZoom:c,onPanZoomStart:d,onPanZoomEnd:h,onDraggingChange:g}){const y={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},w=n.getBoundingClientRect(),p=Tx().clickDistance(!Fn(i)||i<0?0:i).scaleExtent([t,e]).translateExtent(a),b=cn(n).call(p);E({x:u.x,y:u.y,zoom:Go(u.zoom,t,e)},[[0,0],[w.width,w.height]],a);const x=b.on("wheel.zoom"),C=b.on("dblclick.zoom");p.wheelDelta(Fx);function I(ot,ct){return b?new Promise(R=>{p==null||p.transform(Sm(b,ct==null?void 0:ct.duration,()=>R(!0)),ot)}):Promise.resolve(!1)}function O({noWheelClassName:ot,noPanClassName:ct,onPaneContextMenu:R,userSelectionActive:j,panOnScroll:D,panOnDrag:B,panOnScrollMode:P,panOnScrollSpeed:U,preventScrolling:N,zoomOnPinch:q,zoomOnScroll:Q,zoomOnDoubleClick:et,zoomActivationKeyPressed:ut,lib:gt,onTransformChange:dt}){j&&!y.isZoomingOrPanning&&z();const pt=D&&!ut&&!j?sI({zoomPanValues:y,noWheelClassName:ot,d3Selection:b,d3Zoom:p,panOnScrollMode:P,panOnScrollSpeed:U,zoomOnPinch:q,onPanZoomStart:d,onPanZoom:c,onPanZoomEnd:h}):aI({noWheelClassName:ot,preventScrolling:N,d3ZoomHandler:x});if(b.on("wheel.zoom",pt,{passive:!1}),!j){const Vt=oI({zoomPanValues:y,onDraggingChange:g,onPanZoomStart:d});p.on("start",Vt);const Ot=lI({zoomPanValues:y,panOnDrag:B,onPaneContextMenu:!!R,onPanZoom:c,onTransformChange:dt});p.on("zoom",Ot);const St=uI({zoomPanValues:y,panOnDrag:B,panOnScroll:D,onPaneContextMenu:R,onPanZoomEnd:h,onDraggingChange:g});p.on("end",St)}const Dt=cI({zoomActivationKeyPressed:ut,panOnDrag:B,zoomOnScroll:Q,panOnScroll:D,zoomOnDoubleClick:et,zoomOnPinch:q,userSelectionActive:j,noPanClassName:ct,noWheelClassName:ot,lib:gt});p.filter(Dt),et?b.on("dblclick.zoom",C):b.on("dblclick.zoom",null)}function z(){p.on("zoom",null)}async function E(ot,ct,R){const j=bm(ot),D=p==null?void 0:p.constrain()(j,ct,R);return D&&await I(D),new Promise(B=>B(D))}async function k(ot,ct){const R=bm(ot);return await I(R,ct),new Promise(j=>j(R))}function L(ot){if(b){const ct=bm(ot),R=b.property("__zoom");(R.k!==ot.zoom||R.x!==ot.x||R.y!==ot.y)&&(p==null||p.transform(b,ct,null,{sync:!0}))}}function V(){const ot=b?xx(b.node()):{x:0,y:0,k:1};return{x:ot.x,y:ot.y,zoom:ot.k}}function H(ot,ct){return b?new Promise(R=>{p==null||p.scaleTo(Sm(b,ct==null?void 0:ct.duration,()=>R(!0)),ot)}):Promise.resolve(!1)}function tt(ot,ct){return b?new Promise(R=>{p==null||p.scaleBy(Sm(b,ct==null?void 0:ct.duration,()=>R(!0)),ot)}):Promise.resolve(!1)}function nt(ot){p==null||p.scaleExtent(ot)}function it(ot){p==null||p.translateExtent(ot)}function ft(ot){const ct=!Fn(ot)||ot<0?0:ot;p==null||p.clickDistance(ct)}return{update:O,destroy:z,setViewport:k,setViewportConstrained:E,getViewport:V,scaleTo:H,scaleBy:tt,setScaleExtent:nt,setTranslateExtent:it,syncViewport:L,setClickDistance:ft}}var yu;(function(n){n.Line="line",n.Handle="handle"})(yu||(yu={}));function dI({width:n,prevWidth:t,height:e,prevHeight:i,affectsX:a,affectsY:u}){const c=n-t,d=e-i,h=[c>0?1:c<0?-1:0,d>0?1:d<0?-1:0];return c&&a&&(h[0]=h[0]*-1),d&&u&&(h[1]=h[1]*-1),h}function hI(n){const t=n.includes("right")||n.includes("left"),e=n.includes("bottom")||n.includes("top"),i=n.includes("left"),a=n.includes("top");return{isHorizontal:t,isVertical:e,affectsX:i,affectsY:a}}function zs(n,t){return Math.max(0,t-n)}function Ls(n,t){return Math.max(0,n-t)}function Ef(n,t,e){return Math.max(0,t-n,n-e)}function o1(n,t){return n?!t:t}function gI(n,t,e,i,a,u,c,d){let{affectsX:h,affectsY:g}=t;const{isHorizontal:y,isVertical:w}=t,p=y&&w,{xSnapped:b,ySnapped:x}=e,{minWidth:C,maxWidth:I,minHeight:O,maxHeight:z}=i,{x:E,y:k,width:L,height:V,aspectRatio:H}=n;let tt=Math.floor(y?b-n.pointerX:0),nt=Math.floor(w?x-n.pointerY:0);const it=L+(h?-tt:tt),ft=V+(g?-nt:nt),ot=-u[0]*L,ct=-u[1]*V;let R=Ef(it,C,I),j=Ef(ft,O,z);if(c){let P=0,U=0;h&&tt<0?P=zs(E+tt+ot,c[0][0]):!h&&tt>0&&(P=Ls(E+it+ot,c[1][0])),g&&nt<0?U=zs(k+nt+ct,c[0][1]):!g&&nt>0&&(U=Ls(k+ft+ct,c[1][1])),R=Math.max(R,P),j=Math.max(j,U)}if(d){let P=0,U=0;h&&tt>0?P=Ls(E+tt,d[0][0]):!h&&tt<0&&(P=zs(E+it,d[1][0])),g&&nt>0?U=Ls(k+nt,d[0][1]):!g&&nt<0&&(U=zs(k+ft,d[1][1])),R=Math.max(R,P),j=Math.max(j,U)}if(a){if(y){const P=Ef(it/H,O,z)*H;if(R=Math.max(R,P),c){let U=0;!h&&!g||h&&!g&&p?U=Ls(k+ct+it/H,c[1][1])*H:U=zs(k+ct+(h?tt:-tt)/H,c[0][1])*H,R=Math.max(R,U)}if(d){let U=0;!h&&!g||h&&!g&&p?U=zs(k+it/H,d[1][1])*H:U=Ls(k+(h?tt:-tt)/H,d[0][1])*H,R=Math.max(R,U)}}if(w){const P=Ef(ft*H,C,I)/H;if(j=Math.max(j,P),c){let U=0;!h&&!g||g&&!h&&p?U=Ls(E+ft*H+ot,c[1][0])/H:U=zs(E+(g?nt:-nt)*H+ot,c[0][0])/H,j=Math.max(j,U)}if(d){let U=0;!h&&!g||g&&!h&&p?U=zs(E+ft*H,d[1][0])/H:U=Ls(E+(g?nt:-nt)*H,d[0][0])/H,j=Math.max(j,U)}}}nt=nt+(nt<0?j:-j),tt=tt+(tt<0?R:-R),a&&(p?it>ft*H?nt=(o1(h,g)?-tt:tt)/H:tt=(o1(h,g)?-nt:nt)*H:y?(nt=tt/H,g=h):(tt=nt*H,h=g));const D=h?E+tt:E,B=g?k+nt:k;return{width:L+(h?-tt:tt),height:V+(g?-nt:nt),x:u[0]*tt*(h?-1:1)+D,y:u[1]*nt*(g?-1:1)+B}}const Zx={width:0,height:0,x:0,y:0},mI={...Zx,pointerX:0,pointerY:0,aspectRatio:1};function yI(n){return[[0,0],[n.measured.width,n.measured.height]]}function pI(n,t,e){const i=t.position.x+n.position.x,a=t.position.y+n.position.y,u=n.measured.width??0,c=n.measured.height??0,d=e[0]*u,h=e[1]*c;return[[i-d,a-h],[i+u-d,a+c-h]]}function vI({domNode:n,nodeId:t,getStoreItems:e,onChange:i,onEnd:a}){const u=cn(n);function c({controlPosition:h,boundaries:g,keepAspectRatio:y,onResizeStart:w,onResize:p,onResizeEnd:b,shouldResize:x}){let C={...Zx},I={...mI};const O=hI(h);let z,E=null,k=[],L,V,H;const tt=lx().on("start",nt=>{const{nodeLookup:it,transform:ft,snapGrid:ot,snapToGrid:ct,nodeOrigin:R,paneDomNode:j}=e();if(z=it.get(t),!z)return;E=(j==null?void 0:j.getBoundingClientRect())??null;const{xSnapped:D,ySnapped:B}=mu(nt.sourceEvent,{transform:ft,snapGrid:ot,snapToGrid:ct,containerBounds:E});C={width:z.measured.width??0,height:z.measured.height??0,x:z.position.x??0,y:z.position.y??0},I={...C,pointerX:D,pointerY:B,aspectRatio:C.width/C.height},L=void 0,z.parentId&&(z.extent==="parent"||z.expandParent)&&(L=it.get(z.parentId),V=L&&z.extent==="parent"?yI(L):void 0),k=[],H=void 0;for(const[P,U]of it)if(U.parentId===t&&(k.push({id:P,position:{...U.position},extent:U.extent}),U.extent==="parent"||U.expandParent)){const N=pI(U,z,U.origin??R);H?H=[[Math.min(N[0][0],H[0][0]),Math.min(N[0][1],H[0][1])],[Math.max(N[1][0],H[1][0]),Math.max(N[1][1],H[1][1])]]:H=N}w==null||w(nt,{...C})}).on("drag",nt=>{const{transform:it,snapGrid:ft,snapToGrid:ot,nodeOrigin:ct}=e(),R=mu(nt.sourceEvent,{transform:it,snapGrid:ft,snapToGrid:ot,containerBounds:E}),j=[];if(!z)return;const{x:D,y:B,width:P,height:U}=C,N={},q=z.origin??ct,{width:Q,height:et,x:ut,y:gt}=gI(I,O,R,g,y,q,V,H),dt=Q!==P,mt=et!==U,pt=ut!==D&&dt,Dt=gt!==B&&mt;if(!pt&&!Dt&&!dt&&!mt)return;if((pt||Dt||q[0]===1||q[1]===1)&&(N.x=pt?ut:C.x,N.y=Dt?gt:C.y,C.x=N.x,C.y=N.y,k.length>0)){const Yt=ut-D,qt=gt-B;for(const Se of k)Se.position={x:Se.position.x-Yt+q[0]*(Q-P),y:Se.position.y-qt+q[1]*(et-U)},j.push(Se)}if((dt||mt)&&(N.width=dt?Q:C.width,N.height=mt?et:C.height,C.width=N.width,C.height=N.height),L&&z.expandParent){const Yt=q[0]*(N.width??0);N.x&&N.x<Yt&&(C.x=Yt,I.x=I.x-(N.x-Yt));const qt=q[1]*(N.height??0);N.y&&N.y<qt&&(C.y=qt,I.y=I.y-(N.y-qt))}const Vt=dI({width:C.width,prevWidth:P,height:C.height,prevHeight:U,affectsX:O.affectsX,affectsY:O.affectsY}),Ot={...C,direction:Vt};(x==null?void 0:x(nt,Ot))!==!1&&(p==null||p(nt,Ot),i(N,j))}).on("end",nt=>{b==null||b(nt,{...C}),a==null||a()});u.call(tt)}function d(){u.on(".drag",null)}return{update:c,destroy:d}}var xm={exports:{}},Tm={},Am={exports:{}},Em={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l1;function wI(){if(l1)return Em;l1=1;var n=_u();function t(w,p){return w===p&&(w!==0||1/w===1/p)||w!==w&&p!==p}var e=typeof Object.is=="function"?Object.is:t,i=n.useState,a=n.useEffect,u=n.useLayoutEffect,c=n.useDebugValue;function d(w,p){var b=p(),x=i({inst:{value:b,getSnapshot:p}}),C=x[0].inst,I=x[1];return u(function(){C.value=b,C.getSnapshot=p,h(C)&&I({inst:C})},[w,b,p]),a(function(){return h(C)&&I({inst:C}),w(function(){h(C)&&I({inst:C})})},[w]),c(b),b}function h(w){var p=w.getSnapshot;w=w.value;try{var b=p();return!e(w,b)}catch{return!0}}function g(w,p){return p()}var y=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?g:d;return Em.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:y,Em}var u1;function bI(){return u1||(u1=1,Am.exports=wI()),Am.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var c1;function SI(){if(c1)return Tm;c1=1;var n=_u(),t=bI();function e(g,y){return g===y&&(g!==0||1/g===1/y)||g!==g&&y!==y}var i=typeof Object.is=="function"?Object.is:e,a=t.useSyncExternalStore,u=n.useRef,c=n.useEffect,d=n.useMemo,h=n.useDebugValue;return Tm.useSyncExternalStoreWithSelector=function(g,y,w,p,b){var x=u(null);if(x.current===null){var C={hasValue:!1,value:null};x.current=C}else C=x.current;x=d(function(){function O(V){if(!z){if(z=!0,E=V,V=p(V),b!==void 0&&C.hasValue){var H=C.value;if(b(H,V))return k=H}return k=V}if(H=k,i(E,V))return H;var tt=p(V);return b!==void 0&&b(H,tt)?(E=V,H):(E=V,k=tt)}var z=!1,E,k,L=w===void 0?null:w;return[function(){return O(y())},L===null?void 0:function(){return O(L())}]},[y,w,p,b]);var I=a(g,x[0],x[1]);return c(function(){C.hasValue=!0,C.value=I},[I]),h(I),I},Tm}var f1;function xI(){return f1||(f1=1,xm.exports=SI()),xm.exports}var TI=xI();const AI=L1(TI),EI={},d1=n=>{let t;const e=new Set,i=(y,w)=>{const p=typeof y=="function"?y(t):y;if(!Object.is(p,t)){const b=t;t=w??(typeof p!="object"||p===null)?p:Object.assign({},t,p),e.forEach(x=>x(t,b))}},a=()=>t,h={setState:i,getState:a,getInitialState:()=>g,subscribe:y=>(e.add(y),()=>e.delete(y)),destroy:()=>{(EI?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),e.clear()}},g=t=n(i,a,h);return h},NI=n=>n?d1(n):d1,{useDebugValue:CI}=GE,{useSyncExternalStoreWithSelector:DI}=AI,kI=n=>n;function Qx(n,t=kI,e){const i=DI(n.subscribe,n.getState,n.getServerState||n.getInitialState,t,e);return CI(i),i}const h1=(n,t)=>{const e=NI(n),i=(a,u=t)=>Qx(e,a,u);return Object.assign(i,e),i},OI=(n,t)=>n?h1(n,t):h1;function fe(n,t){if(Object.is(n,t))return!0;if(typeof n!="object"||n===null||typeof t!="object"||t===null)return!1;if(n instanceof Map&&t instanceof Map){if(n.size!==t.size)return!1;for(const[i,a]of n)if(!Object.is(a,t.get(i)))return!1;return!0}if(n instanceof Set&&t instanceof Set){if(n.size!==t.size)return!1;for(const i of n)if(!t.has(i))return!1;return!0}const e=Object.keys(n);if(e.length!==Object.keys(t).length)return!1;for(const i of e)if(!Object.prototype.hasOwnProperty.call(t,i)||!Object.is(n[i],t[i]))return!1;return!0}_1();const _d=W.createContext(null),II=_d.Provider,Wx=Ar.error001();function Ht(n,t){const e=W.useContext(_d);if(e===null)throw new Error(Wx);return Qx(e,n,t)}function ie(){const n=W.useContext(_d);if(n===null)throw new Error(Wx);return W.useMemo(()=>({getState:n.getState,setState:n.setState,subscribe:n.subscribe}),[n])}const g1={display:"none"},RI={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},tT="react-flow__node-desc",eT="react-flow__edge-desc",MI="react-flow__aria-live",BI=n=>n.ariaLiveMessage;function zI({rfId:n}){const t=Ht(BI);return Z.jsx("div",{id:`${MI}-${n}`,"aria-live":"assertive","aria-atomic":"true",style:RI,children:t})}function LI({rfId:n,disableKeyboardA11y:t}){return Z.jsxs(Z.Fragment,{children:[Z.jsxs("div",{id:`${tT}-${n}`,style:g1,children:["Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "]}),Z.jsx("div",{id:`${eT}-${n}`,style:g1,children:"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."}),!t&&Z.jsx(zI,{rfId:n})]})}const _I=n=>n.userSelectionActive?"none":"all",Ud=W.forwardRef(({position:n="top-left",children:t,className:e,style:i,...a},u)=>{const c=Ht(_I),d=`${n}`.split("-");return Z.jsx("div",{className:be(["react-flow__panel",e,...d]),style:{...i,pointerEvents:c},ref:u,...a,children:t})});Ud.displayName="Panel";function UI({proOptions:n,position:t="bottom-right"}){return n!=null&&n.hideAttribution?null:Z.jsx(Ud,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:Z.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const qI=n=>{const t=[],e=[];for(const[,i]of n.nodeLookup)i.selected&&t.push(i.internals.userNode);for(const[,i]of n.edgeLookup)i.selected&&e.push(i);return{selectedNodes:t,selectedEdges:e}},Nf=n=>n.id;function PI(n,t){return fe(n.selectedNodes.map(Nf),t.selectedNodes.map(Nf))&&fe(n.selectedEdges.map(Nf),t.selectedEdges.map(Nf))}function JI({onSelectionChange:n}){const t=ie(),{selectedNodes:e,selectedEdges:i}=Ht(qI,PI);return W.useEffect(()=>{const a={nodes:e,edges:i};n==null||n(a),t.getState().onSelectionChangeHandlers.forEach(u=>u(a))},[e,i,n]),null}const HI=n=>!!n.onSelectionChangeHandlers;function $I({onSelectionChange:n}){const t=Ht(HI);return n||t?Z.jsx(JI,{onSelectionChange:n}):null}const nT=[0,0],VI={x:0,y:0,zoom:1},jI=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","onBeforeDelete","debug","autoPanSpeed","paneClickDistance"],m1=[...jI,"rfId"],YI=n=>({setNodes:n.setNodes,setEdges:n.setEdges,setMinZoom:n.setMinZoom,setMaxZoom:n.setMaxZoom,setTranslateExtent:n.setTranslateExtent,setNodeExtent:n.setNodeExtent,reset:n.reset,setDefaultNodesAndEdges:n.setDefaultNodesAndEdges,setPaneClickDistance:n.setPaneClickDistance}),y1={translateExtent:Ru,nodeOrigin:nT,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1",paneClickDistance:0};function GI(n){const{setNodes:t,setEdges:e,setMinZoom:i,setMaxZoom:a,setTranslateExtent:u,setNodeExtent:c,reset:d,setDefaultNodesAndEdges:h,setPaneClickDistance:g}=Ht(YI,fe),y=ie();W.useEffect(()=>(h(n.defaultNodes,n.defaultEdges),()=>{w.current=y1,d()}),[]);const w=W.useRef(y1);return W.useEffect(()=>{for(const p of m1){const b=n[p],x=w.current[p];b!==x&&(typeof n[p]>"u"||(p==="nodes"?t(b):p==="edges"?e(b):p==="minZoom"?i(b):p==="maxZoom"?a(b):p==="translateExtent"?u(b):p==="nodeExtent"?c(b):p==="paneClickDistance"?g(b):p==="fitView"?y.setState({fitViewQueued:b}):p==="fitViewOptions"?y.setState({fitViewOptions:b}):y.setState({[p]:b})))}w.current=n},m1.map(p=>n[p])),null}function p1(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function XI(n){var i;const[t,e]=W.useState(n==="system"?null:n);return W.useEffect(()=>{if(n!=="system"){e(n);return}const a=p1(),u=()=>e(a!=null&&a.matches?"dark":"light");return u(),a==null||a.addEventListener("change",u),()=>{a==null||a.removeEventListener("change",u)}},[n]),t!==null?t:(i=p1())!=null&&i.matches?"dark":"light"}const v1=typeof document<"u"?document:null;function Lu(n=null,t={target:v1,actInsideInputWithModifier:!0}){const[e,i]=W.useState(!1),a=W.useRef(!1),u=W.useRef(new Set([])),[c,d]=W.useMemo(()=>{if(n!==null){const g=(Array.isArray(n)?n:[n]).filter(w=>typeof w=="string").map(w=>w.replace("+",`
`).replace(`

`,`
+`).split(`
`)),y=g.reduce((w,p)=>w.concat(...p),[]);return[g,y]}return[[],[]]},[n]);return W.useEffect(()=>{const h=(t==null?void 0:t.target)||v1;if(n!==null){const g=p=>{var C,I;if(a.current=p.ctrlKey||p.metaKey||p.shiftKey||p.altKey,(!a.current||a.current&&!t.actInsideInputWithModifier)&&Lx(p))return!1;const x=b1(p.code,d);if(u.current.add(p[x]),w1(c,u.current,!1)){const O=((I=(C=p.composedPath)==null?void 0:C.call(p))==null?void 0:I[0])||p.target,z=(O==null?void 0:O.nodeName)==="BUTTON"||(O==null?void 0:O.nodeName)==="A";t.preventDefault!==!1&&(a.current||!z)&&p.preventDefault(),i(!0)}},y=p=>{const b=b1(p.code,d);w1(c,u.current,!0)?(i(!1),u.current.clear()):u.current.delete(p[b]),p.key==="Meta"&&u.current.clear(),a.current=!1},w=()=>{u.current.clear(),i(!1)};return h==null||h.addEventListener("keydown",g),h==null||h.addEventListener("keyup",y),window.addEventListener("blur",w),window.addEventListener("contextmenu",w),()=>{h==null||h.removeEventListener("keydown",g),h==null||h.removeEventListener("keyup",y),window.removeEventListener("blur",w),window.removeEventListener("contextmenu",w)}}},[n,i]),e}function w1(n,t,e){return n.filter(i=>e||i.length===t.size).some(i=>i.every(a=>t.has(a)))}function b1(n,t){return t.includes(n)?"code":"key"}const KI=()=>{const n=ie();return W.useMemo(()=>({zoomIn:t=>{const{panZoom:e}=n.getState();return e?e.scaleBy(1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomOut:t=>{const{panZoom:e}=n.getState();return e?e.scaleBy(1/1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomTo:(t,e)=>{const{panZoom:i}=n.getState();return i?i.scaleTo(t,{duration:e==null?void 0:e.duration}):Promise.resolve(!1)},getZoom:()=>n.getState().transform[2],setViewport:async(t,e)=>{const{transform:[i,a,u],panZoom:c}=n.getState();return c?(await c.setViewport({x:t.x??i,y:t.y??a,zoom:t.zoom??u},{duration:e==null?void 0:e.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[t,e,i]=n.getState().transform;return{x:t,y:e,zoom:i}},setCenter:async(t,e,i)=>{const{width:a,height:u,maxZoom:c,panZoom:d}=n.getState(),h=typeof(i==null?void 0:i.zoom)<"u"?i.zoom:c,g=a/2-t*h,y=u/2-e*h;return d?(await d.setViewport({x:g,y,zoom:h},{duration:i==null?void 0:i.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitBounds:async(t,e)=>{const{width:i,height:a,minZoom:u,maxZoom:c,panZoom:d}=n.getState(),h=Gy(t,i,a,u,c,(e==null?void 0:e.padding)??.1);return d?(await d.setViewport(h,{duration:e==null?void 0:e.duration}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,e={})=>{const{transform:i,snapGrid:a,snapToGrid:u,domNode:c}=n.getState();if(!c)return t;const{x:d,y:h}=c.getBoundingClientRect(),g={x:t.x-d,y:t.y-h},y=e.snapGrid??a,w=e.snapToGrid??u;return Gu(g,i,w,y)},flowToScreenPosition:t=>{const{transform:e,domNode:i}=n.getState();if(!i)return t;const{x:a,y:u}=i.getBoundingClientRect(),c=vd(t,e);return{x:c.x+a,y:c.y+u}}}),[])};function rT(n,t){const e=[],i=new Map,a=[];for(const u of n)if(u.type==="add"){a.push(u);continue}else if(u.type==="remove"||u.type==="replace")i.set(u.id,[u]);else{const c=i.get(u.id);c?c.push(u):i.set(u.id,[u])}for(const u of t){const c=i.get(u.id);if(!c){e.push(u);continue}if(c[0].type==="remove")continue;if(c[0].type==="replace"){e.push({...c[0].item});continue}const d={...u};for(const h of c)FI(h,d);e.push(d)}return a.length&&a.forEach(u=>{u.index!==void 0?e.splice(u.index,0,{...u.item}):e.push({...u.item})}),e}function FI(n,t){switch(n.type){case"select":{t.selected=n.selected;break}case"position":{typeof n.position<"u"&&(t.position=n.position),typeof n.dragging<"u"&&(t.dragging=n.dragging);break}case"dimensions":{typeof n.dimensions<"u"&&(t.measured??(t.measured={}),t.measured.width=n.dimensions.width,t.measured.height=n.dimensions.height,n.setAttributes&&(t.width=n.dimensions.width,t.height=n.dimensions.height)),typeof n.resizing=="boolean"&&(t.resizing=n.resizing);break}}}function ZI(n,t){return rT(n,t)}function QI(n,t){return rT(n,t)}function wa(n,t){return{id:n,type:"select",selected:t}}function ko(n,t=new Set,e=!1){const i=[];for(const[a,u]of n){const c=t.has(a);!(u.selected===void 0&&!c)&&u.selected!==c&&(e&&(u.selected=c),i.push(wa(u.id,c)))}return i}function S1({items:n=[],lookup:t}){var a;const e=[],i=new Map(n.map(u=>[u.id,u]));for(const[u,c]of n.entries()){const d=t.get(c.id),h=((a=d==null?void 0:d.internals)==null?void 0:a.userNode)??d;h!==void 0&&h!==c&&e.push({id:c.id,item:c,type:"replace"}),h===void 0&&e.push({item:c,type:"add",index:u})}for(const[u]of t)i.get(u)===void 0&&e.push({id:u,type:"remove"});return e}function x1(n){return{id:n.id,type:"remove"}}const T1=n=>AO(n),WI=n=>Cx(n);function iT(n){return W.forwardRef(n)}const tR=typeof window<"u"?W.useLayoutEffect:W.useEffect;function A1(n){const[t,e]=W.useState(BigInt(0)),[i]=W.useState(()=>eR(()=>e(a=>a+BigInt(1))));return tR(()=>{const a=i.get();a.length&&(n(a),i.reset())},[t]),i}function eR(n){let t=[];return{get:()=>t,reset:()=>{t=[]},push:e=>{t.push(e),n()}}}const sT=W.createContext(null);function nR({children:n}){const t=ie(),e=W.useCallback(d=>{const{nodes:h=[],setNodes:g,hasDefaultNodes:y,onNodesChange:w,nodeLookup:p}=t.getState();let b=h;for(const x of d)b=typeof x=="function"?x(b):x;y?g(b):w&&w(S1({items:b,lookup:p}))},[]),i=A1(e),a=W.useCallback(d=>{const{edges:h=[],setEdges:g,hasDefaultEdges:y,onEdgesChange:w,edgeLookup:p}=t.getState();let b=h;for(const x of d)b=typeof x=="function"?x(b):x;y?g(b):w&&w(S1({items:b,lookup:p}))},[]),u=A1(a),c=W.useMemo(()=>({nodeQueue:i,edgeQueue:u}),[]);return Z.jsx(sT.Provider,{value:c,children:n})}function rR(){const n=W.useContext(sT);if(!n)throw new Error("useBatchContext must be used within a BatchProvider");return n}const iR=n=>!!n.panZoom;function Wy(){const n=KI(),t=ie(),e=rR(),i=Ht(iR),a=W.useMemo(()=>{const u=w=>t.getState().nodeLookup.get(w),c=w=>{e.nodeQueue.push(w)},d=w=>{e.edgeQueue.push(w)},h=w=>{var O,z;const{nodeLookup:p,nodeOrigin:b}=t.getState(),x=T1(w)?w:p.get(w.id),C=x.parentId?Bx(x.position,x.measured,x.parentId,p,b):x.position,I={...x,position:C,width:((O=x.measured)==null?void 0:O.width)??x.width,height:((z=x.measured)==null?void 0:z.height)??x.height};return Xo(I)},g=(w,p,b={replace:!1})=>{c(x=>x.map(C=>{if(C.id===w){const I=typeof p=="function"?p(C):p;return b.replace&&T1(I)?I:{...C,...I}}return C}))},y=(w,p,b={replace:!1})=>{d(x=>x.map(C=>{if(C.id===w){const I=typeof p=="function"?p(C):p;return b.replace&&WI(I)?I:{...C,...I}}return C}))};return{getNodes:()=>t.getState().nodes.map(w=>({...w})),getNode:w=>{var p;return(p=u(w))==null?void 0:p.internals.userNode},getInternalNode:u,getEdges:()=>{const{edges:w=[]}=t.getState();return w.map(p=>({...p}))},getEdge:w=>t.getState().edgeLookup.get(w),setNodes:c,setEdges:d,addNodes:w=>{const p=Array.isArray(w)?w:[w];e.nodeQueue.push(b=>[...b,...p])},addEdges:w=>{const p=Array.isArray(w)?w:[w];e.edgeQueue.push(b=>[...b,...p])},toObject:()=>{const{nodes:w=[],edges:p=[],transform:b}=t.getState(),[x,C,I]=b;return{nodes:w.map(O=>({...O})),edges:p.map(O=>({...O})),viewport:{x,y:C,zoom:I}}},deleteElements:async({nodes:w=[],edges:p=[]})=>{const{nodes:b,edges:x,onNodesDelete:C,onEdgesDelete:I,triggerNodeChanges:O,triggerEdgeChanges:z,onDelete:E,onBeforeDelete:k}=t.getState(),{nodes:L,edges:V}=await kO({nodesToRemove:w,edgesToRemove:p,nodes:b,edges:x,onBeforeDelete:k}),H=V.length>0,tt=L.length>0;if(H){const nt=V.map(x1);I==null||I(V),z(nt)}if(tt){const nt=L.map(x1);C==null||C(L),O(nt)}return(tt||H)&&(E==null||E({nodes:L,edges:V})),{deletedNodes:L,deletedEdges:V}},getIntersectingNodes:(w,p=!0,b)=>{const x=Fb(w),C=x?w:h(w),I=b!==void 0;return C?(b||t.getState().nodes).filter(O=>{const z=t.getState().nodeLookup.get(O.id);if(z&&!x&&(O.id===w.id||!z.internals.positionAbsolute))return!1;const E=Xo(I?O:z),k=Bu(E,C);return p&&k>0||k>=C.width*C.height}):[]},isNodeIntersecting:(w,p,b=!0)=>{const C=Fb(w)?w:h(w);if(!C)return!1;const I=Bu(C,p);return b&&I>0||I>=C.width*C.height},updateNode:g,updateNodeData:(w,p,b={replace:!1})=>{g(w,x=>{const C=typeof p=="function"?p(x):p;return b.replace?{...x,data:C}:{...x,data:{...x.data,...C}}},b)},updateEdge:y,updateEdgeData:(w,p,b={replace:!1})=>{y(w,x=>{const C=typeof p=="function"?p(x):p;return b.replace?{...x,data:C}:{...x,data:{...x.data,...C}}},b)},getNodesBounds:w=>{const{nodeLookup:p,nodeOrigin:b}=t.getState();return EO(w,{nodeLookup:p,nodeOrigin:b})},getHandleConnections:({type:w,id:p,nodeId:b})=>{var x;return Array.from(((x=t.getState().connectionLookup.get(`${b}-${w}${p?`-${p}`:""}`))==null?void 0:x.values())??[])},getNodeConnections:({type:w,handleId:p,nodeId:b})=>{var x;return Array.from(((x=t.getState().connectionLookup.get(`${b}${w?p?`-${w}-${p}`:`-${w}`:""}`))==null?void 0:x.values())??[])},fitView:async w=>{const p=t.getState().fitViewResolver??Promise.withResolvers();return t.setState({fitViewQueued:!0,fitViewOptions:w,fitViewResolver:p}),e.nodeQueue.push(b=>[...b]),p.promise}}},[]);return W.useMemo(()=>({...a,...n,viewportInitialized:i}),[i])}const E1=n=>n.selected,sR={actInsideInputWithModifier:!1},aR=typeof window<"u"?window:void 0;function oR({deleteKeyCode:n,multiSelectionKeyCode:t}){const e=ie(),{deleteElements:i}=Wy(),a=Lu(n,sR),u=Lu(t,{target:aR});W.useEffect(()=>{if(a){const{edges:c,nodes:d}=e.getState();i({nodes:d.filter(E1),edges:c.filter(E1)}),e.setState({nodesSelectionActive:!1})}},[a]),W.useEffect(()=>{e.setState({multiSelectionActive:u})},[u])}function lR(n){const t=ie();W.useEffect(()=>{const e=()=>{var a,u;if(!n.current)return!1;const i=Xy(n.current);(i.height===0||i.width===0)&&((u=(a=t.getState()).onError)==null||u.call(a,"004",Ar.error004())),t.setState({width:i.width||500,height:i.height||500})};if(n.current){e(),window.addEventListener("resize",e);const i=new ResizeObserver(()=>e());return i.observe(n.current),()=>{window.removeEventListener("resize",e),i&&n.current&&i.unobserve(n.current)}}},[])}const qd={position:"absolute",width:"100%",height:"100%",top:0,left:0},uR=n=>({userSelectionActive:n.userSelectionActive,lib:n.lib});function cR({onPaneContextMenu:n,zoomOnScroll:t=!0,zoomOnPinch:e=!0,panOnScroll:i=!1,panOnScrollSpeed:a=.5,panOnScrollMode:u=Na.Free,zoomOnDoubleClick:c=!0,panOnDrag:d=!0,defaultViewport:h,translateExtent:g,minZoom:y,maxZoom:w,zoomActivationKeyCode:p,preventScrolling:b=!0,children:x,noWheelClassName:C,noPanClassName:I,onViewportChange:O,isControlledViewport:z,paneClickDistance:E}){const k=ie(),L=W.useRef(null),{userSelectionActive:V,lib:H}=Ht(uR,fe),tt=Lu(p),nt=W.useRef();lR(L);const it=W.useCallback(ft=>{O==null||O({x:ft[0],y:ft[1],zoom:ft[2]}),z||k.setState({transform:ft})},[O,z]);return W.useEffect(()=>{if(L.current){nt.current=fI({domNode:L.current,minZoom:y,maxZoom:w,translateExtent:g,viewport:h,paneClickDistance:E,onDraggingChange:R=>k.setState({paneDragging:R}),onPanZoomStart:(R,j)=>{const{onViewportChangeStart:D,onMoveStart:B}=k.getState();B==null||B(R,j),D==null||D(j)},onPanZoom:(R,j)=>{const{onViewportChange:D,onMove:B}=k.getState();B==null||B(R,j),D==null||D(j)},onPanZoomEnd:(R,j)=>{const{onViewportChangeEnd:D,onMoveEnd:B}=k.getState();B==null||B(R,j),D==null||D(j)}});const{x:ft,y:ot,zoom:ct}=nt.current.getViewport();return k.setState({panZoom:nt.current,transform:[ft,ot,ct],domNode:L.current.closest(".react-flow")}),()=>{var R;(R=nt.current)==null||R.destroy()}}},[]),W.useEffect(()=>{var ft;(ft=nt.current)==null||ft.update({onPaneContextMenu:n,zoomOnScroll:t,zoomOnPinch:e,panOnScroll:i,panOnScrollSpeed:a,panOnScrollMode:u,zoomOnDoubleClick:c,panOnDrag:d,zoomActivationKeyPressed:tt,preventScrolling:b,noPanClassName:I,userSelectionActive:V,noWheelClassName:C,lib:H,onTransformChange:it})},[n,t,e,i,a,u,c,d,tt,b,I,V,C,H,it]),Z.jsx("div",{className:"react-flow__renderer",ref:L,style:qd,children:x})}const fR=n=>({userSelectionActive:n.userSelectionActive,userSelectionRect:n.userSelectionRect});function dR(){const{userSelectionActive:n,userSelectionRect:t}=Ht(fR,fe);return n&&t?Z.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}const Nm=(n,t)=>e=>{e.target===t.current&&(n==null||n(e))},hR=n=>({userSelectionActive:n.userSelectionActive,elementsSelectable:n.elementsSelectable,connectionInProgress:n.connection.inProgress,dragging:n.paneDragging});function gR({isSelecting:n,selectionKeyPressed:t,selectionMode:e=Mu.Full,panOnDrag:i,selectionOnDrag:a,onSelectionStart:u,onSelectionEnd:c,onPaneClick:d,onPaneContextMenu:h,onPaneScroll:g,onPaneMouseEnter:y,onPaneMouseMove:w,onPaneMouseLeave:p,children:b}){const x=ie(),{userSelectionActive:C,elementsSelectable:I,dragging:O,connectionInProgress:z}=Ht(hR,fe),E=I&&(n||C),k=W.useRef(null),L=W.useRef(),V=W.useRef(new Set),H=W.useRef(new Set),tt=W.useRef(!1),nt=W.useRef(!1),it=B=>{if(tt.current||z){tt.current=!1;return}d==null||d(B),x.getState().resetSelectedElements(),x.setState({nodesSelectionActive:!1})},ft=B=>{if(Array.isArray(i)&&(i!=null&&i.includes(2))){B.preventDefault();return}h==null||h(B)},ot=g?B=>g(B):void 0,ct=B=>{var Q,et;const{resetSelectedElements:P,domNode:U}=x.getState();if(L.current=U==null?void 0:U.getBoundingClientRect(),!I||!n||B.button!==0||B.target!==k.current||!L.current)return;(et=(Q=B.target)==null?void 0:Q.setPointerCapture)==null||et.call(Q,B.pointerId),nt.current=!0,tt.current=!1;const{x:N,y:q}=Zi(B.nativeEvent,L.current);P(),x.setState({userSelectionRect:{width:0,height:0,startX:N,startY:q,x:N,y:q}}),u==null||u(B)},R=B=>{const{userSelectionRect:P,transform:U,nodeLookup:N,edgeLookup:q,connectionLookup:Q,triggerNodeChanges:et,triggerEdgeChanges:ut,defaultEdgeOptions:gt}=x.getState();if(!L.current||!P)return;tt.current=!0;const{x:dt,y:mt}=Zi(B.nativeEvent,L.current),{startX:pt,startY:Dt}=P,Vt={startX:pt,startY:Dt,x:dt<pt?dt:pt,y:mt<Dt?mt:Dt,width:Math.abs(dt-pt),height:Math.abs(mt-Dt)},Ot=V.current,St=H.current;V.current=new Set(Dx(N,Vt,U,e===Mu.Partial,!0).map(qt=>qt.id)),H.current=new Set;const Yt=(gt==null?void 0:gt.selectable)??!0;for(const qt of V.current){const Se=Q.get(qt);if(Se)for(const{edgeId:en}of Se.values()){const Oe=q.get(en);Oe&&(Oe.selectable??Yt)&&H.current.add(en)}}if(!Zb(Ot,V.current)){const qt=ko(N,V.current,!0);et(qt)}if(!Zb(St,H.current)){const qt=ko(q,H.current);ut(qt)}x.setState({userSelectionRect:Vt,userSelectionActive:!0,nodesSelectionActive:!1})},j=B=>{var U,N;if(B.button!==0||!nt.current)return;(N=(U=B.target)==null?void 0:U.releasePointerCapture)==null||N.call(U,B.pointerId);const{userSelectionRect:P}=x.getState();!C&&P&&B.target===k.current&&(it==null||it(B)),x.setState({userSelectionActive:!1,userSelectionRect:null,nodesSelectionActive:V.current.size>0}),c==null||c(B),(t||a)&&(tt.current=!1),nt.current=!1},D=i===!0||Array.isArray(i)&&i.includes(0);return Z.jsxs("div",{className:be(["react-flow__pane",{draggable:D,dragging:O,selection:n}]),onClick:E?void 0:Nm(it,k),onContextMenu:Nm(ft,k),onWheel:Nm(ot,k),onPointerEnter:E?void 0:y,onPointerDown:E?ct:w,onPointerMove:E?R:w,onPointerUp:E?j:void 0,onPointerLeave:p,ref:k,style:qd,children:[b,Z.jsx(dR,{})]})}function yy({id:n,store:t,unselect:e=!1,nodeRef:i}){const{addSelectedNodes:a,unselectNodesAndEdges:u,multiSelectionActive:c,nodeLookup:d,onError:h}=t.getState(),g=d.get(n);if(!g){h==null||h("012",Ar.error012(n));return}t.setState({nodesSelectionActive:!1}),g.selected?(e||g.selected&&c)&&(u({nodes:[g],edges:[]}),requestAnimationFrame(()=>{var y;return(y=i==null?void 0:i.current)==null?void 0:y.blur()})):a([n])}function aT({nodeRef:n,disabled:t=!1,noDragClassName:e,handleSelector:i,nodeId:a,isSelectable:u,nodeClickDistance:c}){const d=ie(),[h,g]=W.useState(!1),y=W.useRef();return W.useEffect(()=>{y.current=ZO({getStoreItems:()=>d.getState(),onNodeMouseDown:w=>{yy({id:w,store:d,nodeRef:n})},onDragStart:()=>{g(!0)},onDragStop:()=>{g(!1)}})},[]),W.useEffect(()=>{var w,p;if(t)(w=y.current)==null||w.destroy();else if(n.current)return(p=y.current)==null||p.update({noDragClassName:e,handleSelector:i,domNode:n.current,isSelectable:u,nodeId:a,nodeClickDistance:c}),()=>{var b;(b=y.current)==null||b.destroy()}},[e,i,t,u,n,a]),h}const mR=n=>t=>t.selected&&(t.draggable||n&&typeof t.draggable>"u");function oT(){const n=ie();return W.useCallback(e=>{const{nodeExtent:i,snapToGrid:a,snapGrid:u,nodesDraggable:c,onError:d,updateNodePositions:h,nodeLookup:g,nodeOrigin:y}=n.getState(),w=new Map,p=mR(c),b=a?u[0]:5,x=a?u[1]:5,C=e.direction.x*b*e.factor,I=e.direction.y*x*e.factor;for(const[,O]of g){if(!p(O))continue;let z={x:O.internals.positionAbsolute.x+C,y:O.internals.positionAbsolute.y+I};a&&(z=zd(z,u));const{position:E,positionAbsolute:k}=kx({nodeId:O.id,nextPosition:z,nodeLookup:g,nodeExtent:i,nodeOrigin:y,onError:d});O.position=E,O.internals.positionAbsolute=k,w.set(O.id,O)}h(w)},[])}const tp=W.createContext(null),yR=tp.Provider;tp.Consumer;const lT=()=>W.useContext(tp),pR=n=>({connectOnClick:n.connectOnClick,noPanClassName:n.noPanClassName,rfId:n.rfId}),vR=(n,t,e)=>i=>{const{connectionClickStartHandle:a,connectionMode:u,connection:c}=i,{fromHandle:d,toHandle:h,isValid:g}=c,y=(h==null?void 0:h.nodeId)===n&&(h==null?void 0:h.id)===t&&(h==null?void 0:h.type)===e;return{connectingFrom:(d==null?void 0:d.nodeId)===n&&(d==null?void 0:d.id)===t&&(d==null?void 0:d.type)===e,connectingTo:y,clickConnecting:(a==null?void 0:a.nodeId)===n&&(a==null?void 0:a.id)===t&&(a==null?void 0:a.type)===e,isPossibleEndHandle:u===Yo.Strict?(d==null?void 0:d.type)!==e:n!==(d==null?void 0:d.nodeId)||t!==(d==null?void 0:d.id),connectionInProcess:!!d,clickConnectionInProcess:!!a,valid:y&&g}};function wR({type:n="source",position:t=Tt.Top,isValidConnection:e,isConnectable:i=!0,isConnectableStart:a=!0,isConnectableEnd:u=!0,id:c,onConnect:d,children:h,className:g,onMouseDown:y,onTouchStart:w,...p},b){var j,D;const x=c||null,C=n==="target",I=ie(),O=lT(),{connectOnClick:z,noPanClassName:E,rfId:k}=Ht(pR,fe),{connectingFrom:L,connectingTo:V,clickConnecting:H,isPossibleEndHandle:tt,connectionInProcess:nt,clickConnectionInProcess:it,valid:ft}=Ht(vR(O,x,n),fe);O||(D=(j=I.getState()).onError)==null||D.call(j,"010",Ar.error010());const ot=B=>{const{defaultEdgeOptions:P,onConnect:U,hasDefaultEdges:N}=I.getState(),q={...P,...B};if(N){const{edges:Q,setEdges:et}=I.getState();et(UO(q,Q))}U==null||U(q),d==null||d(q)},ct=B=>{if(!O)return;const P=_x(B.nativeEvent);if(a&&(P&&B.button===0||!P)){const U=I.getState();my.onPointerDown(B.nativeEvent,{autoPanOnConnect:U.autoPanOnConnect,connectionMode:U.connectionMode,connectionRadius:U.connectionRadius,domNode:U.domNode,nodeLookup:U.nodeLookup,lib:U.lib,isTarget:C,handleId:x,nodeId:O,flowId:U.rfId,panBy:U.panBy,cancelConnection:U.cancelConnection,onConnectStart:U.onConnectStart,onConnectEnd:U.onConnectEnd,updateConnection:U.updateConnection,onConnect:ot,isValidConnection:e||U.isValidConnection,getTransform:()=>I.getState().transform,getFromHandle:()=>I.getState().connection.fromHandle,autoPanSpeed:U.autoPanSpeed})}P?y==null||y(B):w==null||w(B)},R=B=>{const{onClickConnectStart:P,onClickConnectEnd:U,connectionClickStartHandle:N,connectionMode:q,isValidConnection:Q,lib:et,rfId:ut,nodeLookup:gt,connection:dt}=I.getState();if(!O||!N&&!a)return;if(!N){P==null||P(B.nativeEvent,{nodeId:O,handleId:x,handleType:n}),I.setState({connectionClickStartHandle:{nodeId:O,type:n,id:x}});return}const mt=zx(B.target),pt=e||Q,{connection:Dt,isValid:Vt}=my.isValid(B.nativeEvent,{handle:{nodeId:O,id:x,type:n},connectionMode:q,fromNodeId:N.nodeId,fromHandleId:N.id||null,fromType:N.type,isValidConnection:pt,flowId:ut,doc:mt,lib:et,nodeLookup:gt});Vt&&Dt&&ot(Dt);const Ot=structuredClone(dt);delete Ot.inProgress,Ot.toPosition=Ot.toHandle?Ot.toHandle.position:null,U==null||U(B,Ot),I.setState({connectionClickStartHandle:null})};return Z.jsx("div",{"data-handleid":x,"data-nodeid":O,"data-handlepos":t,"data-id":`${k}-${O}-${x}-${n}`,className:be(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",E,g,{source:!C,target:C,connectable:i,connectablestart:a,connectableend:u,clickconnecting:H,connectingfrom:L,connectingto:V,valid:ft,connectionindicator:i&&(!nt||tt)&&(nt||it?u:a)}]),onMouseDown:ct,onTouchStart:ct,onClick:z?R:void 0,ref:b,...p,children:h})}const bd=W.memo(iT(wR));function bR({data:n,isConnectable:t,sourcePosition:e=Tt.Bottom}){return Z.jsxs(Z.Fragment,{children:[n==null?void 0:n.label,Z.jsx(bd,{type:"source",position:e,isConnectable:t})]})}function SR({data:n,isConnectable:t,targetPosition:e=Tt.Top,sourcePosition:i=Tt.Bottom}){return Z.jsxs(Z.Fragment,{children:[Z.jsx(bd,{type:"target",position:e,isConnectable:t}),n==null?void 0:n.label,Z.jsx(bd,{type:"source",position:i,isConnectable:t})]})}function xR(){return null}function TR({data:n,isConnectable:t,targetPosition:e=Tt.Top}){return Z.jsxs(Z.Fragment,{children:[Z.jsx(bd,{type:"target",position:e,isConnectable:t}),n==null?void 0:n.label]})}const Sd={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},N1={input:bR,default:SR,output:TR,group:xR};function AR(n){var t,e,i,a;return n.internals.handleBounds===void 0?{width:n.width??n.initialWidth??((t=n.style)==null?void 0:t.width),height:n.height??n.initialHeight??((e=n.style)==null?void 0:e.height)}:{width:n.width??((i=n.style)==null?void 0:i.width),height:n.height??((a=n.style)==null?void 0:a.height)}}const ER=n=>{const{width:t,height:e,x:i,y:a}=Yu(n.nodeLookup,{filter:u=>!!u.selected});return{width:Fn(t)?t:null,height:Fn(e)?e:null,userSelectionActive:n.userSelectionActive,transformString:`translate(${n.transform[0]}px,${n.transform[1]}px) scale(${n.transform[2]}) translate(${i}px,${a}px)`}};function NR({onSelectionContextMenu:n,noPanClassName:t,disableKeyboardA11y:e}){const i=ie(),{width:a,height:u,transformString:c,userSelectionActive:d}=Ht(ER,fe),h=oT(),g=W.useRef(null);if(W.useEffect(()=>{var p;e||(p=g.current)==null||p.focus({preventScroll:!0})},[e]),aT({nodeRef:g}),d||!a||!u)return null;const y=n?p=>{const b=i.getState().nodes.filter(x=>x.selected);n(p,b)}:void 0,w=p=>{Object.prototype.hasOwnProperty.call(Sd,p.key)&&(p.preventDefault(),h({direction:Sd[p.key],factor:p.shiftKey?4:1}))};return Z.jsx("div",{className:be(["react-flow__nodesselection","react-flow__container",t]),style:{transform:c},children:Z.jsx("div",{ref:g,className:"react-flow__nodesselection-rect",onContextMenu:y,tabIndex:e?void 0:-1,onKeyDown:e?void 0:w,style:{width:a,height:u}})})}const C1=typeof window<"u"?window:void 0,CR=n=>({nodesSelectionActive:n.nodesSelectionActive,userSelectionActive:n.userSelectionActive});function uT({children:n,onPaneClick:t,onPaneMouseEnter:e,onPaneMouseMove:i,onPaneMouseLeave:a,onPaneContextMenu:u,onPaneScroll:c,paneClickDistance:d,deleteKeyCode:h,selectionKeyCode:g,selectionOnDrag:y,selectionMode:w,onSelectionStart:p,onSelectionEnd:b,multiSelectionKeyCode:x,panActivationKeyCode:C,zoomActivationKeyCode:I,elementsSelectable:O,zoomOnScroll:z,zoomOnPinch:E,panOnScroll:k,panOnScrollSpeed:L,panOnScrollMode:V,zoomOnDoubleClick:H,panOnDrag:tt,defaultViewport:nt,translateExtent:it,minZoom:ft,maxZoom:ot,preventScrolling:ct,onSelectionContextMenu:R,noWheelClassName:j,noPanClassName:D,disableKeyboardA11y:B,onViewportChange:P,isControlledViewport:U}){const{nodesSelectionActive:N,userSelectionActive:q}=Ht(CR),Q=Lu(g,{target:C1}),et=Lu(C,{target:C1}),ut=et||tt,gt=et||k,dt=y&&ut!==!0,mt=Q||q||dt;return oR({deleteKeyCode:h,multiSelectionKeyCode:x}),Z.jsx(cR,{onPaneContextMenu:u,elementsSelectable:O,zoomOnScroll:z,zoomOnPinch:E,panOnScroll:gt,panOnScrollSpeed:L,panOnScrollMode:V,zoomOnDoubleClick:H,panOnDrag:!Q&&ut,defaultViewport:nt,translateExtent:it,minZoom:ft,maxZoom:ot,zoomActivationKeyCode:I,preventScrolling:ct,noWheelClassName:j,noPanClassName:D,onViewportChange:P,isControlledViewport:U,paneClickDistance:d,children:Z.jsxs(gR,{onSelectionStart:p,onSelectionEnd:b,onPaneClick:t,onPaneMouseEnter:e,onPaneMouseMove:i,onPaneMouseLeave:a,onPaneContextMenu:u,onPaneScroll:c,panOnDrag:ut,isSelecting:!!mt,selectionMode:w,selectionKeyPressed:Q,selectionOnDrag:dt,children:[n,N&&Z.jsx(NR,{onSelectionContextMenu:R,noPanClassName:D,disableKeyboardA11y:B})]})})}uT.displayName="FlowRenderer";const DR=W.memo(uT),kR=n=>t=>n?Dx(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map(e=>e.id):Array.from(t.nodeLookup.keys());function OR(n){return Ht(W.useCallback(kR(n),[n]),fe)}const IR=n=>n.updateNodeInternals;function RR(){const n=Ht(IR),[t]=W.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(e=>{const i=new Map;e.forEach(a=>{const u=a.target.getAttribute("data-id");i.set(u,{id:u,nodeElement:a.target,force:!0})}),n(i)}));return W.useEffect(()=>()=>{t==null||t.disconnect()},[t]),t}function MR({node:n,nodeType:t,hasDimensions:e,resizeObserver:i}){const a=ie(),u=W.useRef(null),c=W.useRef(null),d=W.useRef(n.sourcePosition),h=W.useRef(n.targetPosition),g=W.useRef(t),y=e&&!!n.internals.handleBounds;return W.useEffect(()=>{u.current&&!n.hidden&&(!y||c.current!==u.current)&&(c.current&&(i==null||i.unobserve(c.current)),i==null||i.observe(u.current),c.current=u.current)},[y,n.hidden]),W.useEffect(()=>()=>{c.current&&(i==null||i.unobserve(c.current),c.current=null)},[]),W.useEffect(()=>{if(u.current){const w=g.current!==t,p=d.current!==n.sourcePosition,b=h.current!==n.targetPosition;(w||p||b)&&(g.current=t,d.current=n.sourcePosition,h.current=n.targetPosition,a.getState().updateNodeInternals(new Map([[n.id,{id:n.id,nodeElement:u.current,force:!0}]])))}},[n.id,t,n.sourcePosition,n.targetPosition]),u}function BR({id:n,onClick:t,onMouseEnter:e,onMouseMove:i,onMouseLeave:a,onContextMenu:u,onDoubleClick:c,nodesDraggable:d,elementsSelectable:h,nodesConnectable:g,nodesFocusable:y,resizeObserver:w,noDragClassName:p,noPanClassName:b,disableKeyboardA11y:x,rfId:C,nodeTypes:I,nodeClickDistance:O,onError:z}){const{node:E,internals:k,isParent:L}=Ht(mt=>{const pt=mt.nodeLookup.get(n),Dt=mt.parentLookup.has(n);return{node:pt,internals:pt.internals,isParent:Dt}},fe);let V=E.type||"default",H=(I==null?void 0:I[V])||N1[V];H===void 0&&(z==null||z("003",Ar.error003(V)),V="default",H=N1.default);const tt=!!(E.draggable||d&&typeof E.draggable>"u"),nt=!!(E.selectable||h&&typeof E.selectable>"u"),it=!!(E.connectable||g&&typeof E.connectable>"u"),ft=!!(E.focusable||y&&typeof E.focusable>"u"),ot=ie(),ct=Mx(E),R=MR({node:E,nodeType:V,hasDimensions:ct,resizeObserver:w}),j=aT({nodeRef:R,disabled:E.hidden||!tt,noDragClassName:p,handleSelector:E.dragHandle,nodeId:n,isSelectable:nt,nodeClickDistance:O}),D=oT();if(E.hidden)return null;const B=ns(E),P=AR(E),U=nt||tt||t||e||i||a,N=e?mt=>e(mt,{...k.userNode}):void 0,q=i?mt=>i(mt,{...k.userNode}):void 0,Q=a?mt=>a(mt,{...k.userNode}):void 0,et=u?mt=>u(mt,{...k.userNode}):void 0,ut=c?mt=>c(mt,{...k.userNode}):void 0,gt=mt=>{const{selectNodesOnDrag:pt,nodeDragThreshold:Dt}=ot.getState();nt&&(!pt||!tt||Dt>0)&&yy({id:n,store:ot,nodeRef:R}),t&&t(mt,{...k.userNode})},dt=mt=>{if(!(Lx(mt.nativeEvent)||x))if(Ax.includes(mt.key)&&nt){const pt=mt.key==="Escape";yy({id:n,store:ot,unselect:pt,nodeRef:R})}else tt&&E.selected&&Object.prototype.hasOwnProperty.call(Sd,mt.key)&&(mt.preventDefault(),ot.setState({ariaLiveMessage:`Moved selected node ${mt.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~k.positionAbsolute.x}, y: ${~~k.positionAbsolute.y}`}),D({direction:Sd[mt.key],factor:mt.shiftKey?4:1}))};return Z.jsx("div",{className:be(["react-flow__node",`react-flow__node-${V}`,{[b]:tt},E.className,{selected:E.selected,selectable:nt,parent:L,draggable:tt,dragging:j}]),ref:R,style:{zIndex:k.z,transform:`translate(${k.positionAbsolute.x}px,${k.positionAbsolute.y}px)`,pointerEvents:U?"all":"none",visibility:ct?"visible":"hidden",...E.style,...P},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:N,onMouseMove:q,onMouseLeave:Q,onContextMenu:et,onClick:gt,onDoubleClick:ut,onKeyDown:ft?dt:void 0,tabIndex:ft?0:void 0,role:ft?"button":void 0,"aria-describedby":x?void 0:`${tT}-${C}`,"aria-label":E.ariaLabel,children:Z.jsx(yR,{value:n,children:Z.jsx(H,{id:n,data:E.data,type:V,positionAbsoluteX:k.positionAbsolute.x,positionAbsoluteY:k.positionAbsolute.y,selected:E.selected??!1,selectable:nt,draggable:tt,deletable:E.deletable??!0,isConnectable:it,sourcePosition:E.sourcePosition,targetPosition:E.targetPosition,dragging:j,dragHandle:E.dragHandle,zIndex:k.z,parentId:E.parentId,...B})})})}const zR=n=>({nodesDraggable:n.nodesDraggable,nodesConnectable:n.nodesConnectable,nodesFocusable:n.nodesFocusable,elementsSelectable:n.elementsSelectable,onError:n.onError});function cT(n){const{nodesDraggable:t,nodesConnectable:e,nodesFocusable:i,elementsSelectable:a,onError:u}=Ht(zR,fe),c=OR(n.onlyRenderVisibleElements),d=RR();return Z.jsx("div",{className:"react-flow__nodes",style:qd,children:c.map(h=>Z.jsx(BR,{id:h,nodeTypes:n.nodeTypes,nodeExtent:n.nodeExtent,onClick:n.onNodeClick,onMouseEnter:n.onNodeMouseEnter,onMouseMove:n.onNodeMouseMove,onMouseLeave:n.onNodeMouseLeave,onContextMenu:n.onNodeContextMenu,onDoubleClick:n.onNodeDoubleClick,noDragClassName:n.noDragClassName,noPanClassName:n.noPanClassName,rfId:n.rfId,disableKeyboardA11y:n.disableKeyboardA11y,resizeObserver:d,nodesDraggable:t,nodesConnectable:e,nodesFocusable:i,elementsSelectable:a,nodeClickDistance:n.nodeClickDistance,onError:u},h))})}cT.displayName="NodeRenderer";const LR=W.memo(cT);function _R(n){return Ht(W.useCallback(e=>{if(!n)return e.edges.map(a=>a.id);const i=[];if(e.width&&e.height)for(const a of e.edges){const u=e.nodeLookup.get(a.source),c=e.nodeLookup.get(a.target);u&&c&&zO({sourceNode:u,targetNode:c,width:e.width,height:e.height,transform:e.transform})&&i.push(a.id)}return i},[n]),fe)}const UR=({color:n="none",strokeWidth:t=1})=>Z.jsx("polyline",{style:{stroke:n,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),qR=({color:n="none",strokeWidth:t=1})=>Z.jsx("polyline",{style:{stroke:n,fill:n,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),D1={[yd.Arrow]:UR,[yd.ArrowClosed]:qR};function PR(n){const t=ie();return W.useMemo(()=>{var a,u;return Object.prototype.hasOwnProperty.call(D1,n)?D1[n]:((u=(a=t.getState()).onError)==null||u.call(a,"009",Ar.error009(n)),null)},[n])}const JR=({id:n,type:t,color:e,width:i=12.5,height:a=12.5,markerUnits:u="strokeWidth",strokeWidth:c,orient:d="auto-start-reverse"})=>{const h=PR(t);return h?Z.jsx("marker",{className:"react-flow__arrowhead",id:n,markerWidth:`${i}`,markerHeight:`${a}`,viewBox:"-10 -10 20 20",markerUnits:u,orient:d,refX:"0",refY:"0",children:Z.jsx(h,{color:e,strokeWidth:c})}):null},fT=({defaultColor:n,rfId:t})=>{const e=Ht(u=>u.edges),i=Ht(u=>u.defaultEdgeOptions),a=W.useMemo(()=>$O(e,{id:t,defaultColor:n,defaultMarkerStart:i==null?void 0:i.markerStart,defaultMarkerEnd:i==null?void 0:i.markerEnd}),[e,i,t,n]);return a.length?Z.jsx("svg",{className:"react-flow__marker",children:Z.jsx("defs",{children:a.map(u=>Z.jsx(JR,{id:u.id,type:u.type,color:u.color,width:u.width,height:u.height,markerUnits:u.markerUnits,strokeWidth:u.strokeWidth,orient:u.orient},u.id))})}):null};fT.displayName="MarkerDefinitions";var HR=W.memo(fT);function dT({x:n,y:t,label:e,labelStyle:i,labelShowBg:a=!0,labelBgStyle:u,labelBgPadding:c=[2,4],labelBgBorderRadius:d=2,children:h,className:g,...y}){const[w,p]=W.useState({x:1,y:0,width:0,height:0}),b=be(["react-flow__edge-textwrapper",g]),x=W.useRef(null);return W.useEffect(()=>{if(x.current){const C=x.current.getBBox();p({x:C.x,y:C.y,width:C.width,height:C.height})}},[e]),e?Z.jsxs("g",{transform:`translate(${n-w.width/2} ${t-w.height/2})`,className:b,visibility:w.width?"visible":"hidden",...y,children:[a&&Z.jsx("rect",{width:w.width+2*c[0],x:-c[0],y:-c[1],height:w.height+2*c[1],className:"react-flow__edge-textbg",style:u,rx:d,ry:d}),Z.jsx("text",{className:"react-flow__edge-text",y:w.height/2,dy:"0.3em",ref:x,style:i,children:e}),h]}):null}dT.displayName="EdgeText";const $R=W.memo(dT);function Pd({path:n,labelX:t,labelY:e,label:i,labelStyle:a,labelShowBg:u,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:h,interactionWidth:g=20,...y}){return Z.jsxs(Z.Fragment,{children:[Z.jsx("path",{...y,d:n,fill:"none",className:be(["react-flow__edge-path",y.className])}),g&&Z.jsx("path",{d:n,fill:"none",strokeOpacity:0,strokeWidth:g,className:"react-flow__edge-interaction"}),i&&Fn(t)&&Fn(e)?Z.jsx($R,{x:t,y:e,label:i,labelStyle:a,labelShowBg:u,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:h}):null]})}function k1({pos:n,x1:t,y1:e,x2:i,y2:a}){return n===Tt.Left||n===Tt.Right?[.5*(t+i),e]:[t,.5*(e+a)]}function hT({sourceX:n,sourceY:t,sourcePosition:e=Tt.Bottom,targetX:i,targetY:a,targetPosition:u=Tt.Top}){const[c,d]=k1({pos:e,x1:n,y1:t,x2:i,y2:a}),[h,g]=k1({pos:u,x1:i,y1:a,x2:n,y2:t}),[y,w,p,b]=Ux({sourceX:n,sourceY:t,targetX:i,targetY:a,sourceControlX:c,sourceControlY:d,targetControlX:h,targetControlY:g});return[`M${n},${t} C${c},${d} ${h},${g} ${i},${a}`,y,w,p,b]}function gT(n){return W.memo(({id:t,sourceX:e,sourceY:i,targetX:a,targetY:u,sourcePosition:c=Tt.Bottom,targetPosition:d=Tt.Top,label:h,labelStyle:g,labelShowBg:y,labelBgStyle:w,labelBgPadding:p,labelBgBorderRadius:b,style:x,markerEnd:C,markerStart:I,interactionWidth:O})=>{const[z,E,k]=hT({sourceX:e,sourceY:i,sourcePosition:c,targetX:a,targetY:u,targetPosition:d}),L=n.isInternal?void 0:t;return Z.jsx(Pd,{id:L,path:z,labelX:E,labelY:k,label:h,labelStyle:g,labelShowBg:y,labelBgStyle:w,labelBgPadding:p,labelBgBorderRadius:b,style:x,markerEnd:C,markerStart:I,interactionWidth:O})})}const VR=gT({isInternal:!1}),mT=gT({isInternal:!0});VR.displayName="SimpleBezierEdge";mT.displayName="SimpleBezierEdgeInternal";function yT(n){return W.memo(({id:t,sourceX:e,sourceY:i,targetX:a,targetY:u,label:c,labelStyle:d,labelShowBg:h,labelBgStyle:g,labelBgPadding:y,labelBgBorderRadius:w,style:p,sourcePosition:b=Tt.Bottom,targetPosition:x=Tt.Top,markerEnd:C,markerStart:I,pathOptions:O,interactionWidth:z})=>{const[E,k,L]=dy({sourceX:e,sourceY:i,sourcePosition:b,targetX:a,targetY:u,targetPosition:x,borderRadius:O==null?void 0:O.borderRadius,offset:O==null?void 0:O.offset}),V=n.isInternal?void 0:t;return Z.jsx(Pd,{id:V,path:E,labelX:k,labelY:L,label:c,labelStyle:d,labelShowBg:h,labelBgStyle:g,labelBgPadding:y,labelBgBorderRadius:w,style:p,markerEnd:C,markerStart:I,interactionWidth:z})})}const pT=yT({isInternal:!1}),vT=yT({isInternal:!0});pT.displayName="SmoothStepEdge";vT.displayName="SmoothStepEdgeInternal";function wT(n){return W.memo(({id:t,...e})=>{var a;const i=n.isInternal?void 0:t;return Z.jsx(pT,{...e,id:i,pathOptions:W.useMemo(()=>{var u;return{borderRadius:0,offset:(u=e.pathOptions)==null?void 0:u.offset}},[(a=e.pathOptions)==null?void 0:a.offset])})})}const jR=wT({isInternal:!1}),bT=wT({isInternal:!0});jR.displayName="StepEdge";bT.displayName="StepEdgeInternal";function ST(n){return W.memo(({id:t,sourceX:e,sourceY:i,targetX:a,targetY:u,label:c,labelStyle:d,labelShowBg:h,labelBgStyle:g,labelBgPadding:y,labelBgBorderRadius:w,style:p,markerEnd:b,markerStart:x,interactionWidth:C})=>{const[I,O,z]=Jx({sourceX:e,sourceY:i,targetX:a,targetY:u}),E=n.isInternal?void 0:t;return Z.jsx(Pd,{id:E,path:I,labelX:O,labelY:z,label:c,labelStyle:d,labelShowBg:h,labelBgStyle:g,labelBgPadding:y,labelBgBorderRadius:w,style:p,markerEnd:b,markerStart:x,interactionWidth:C})})}const YR=ST({isInternal:!1}),xT=ST({isInternal:!0});YR.displayName="StraightEdge";xT.displayName="StraightEdgeInternal";function TT(n){return W.memo(({id:t,sourceX:e,sourceY:i,targetX:a,targetY:u,sourcePosition:c=Tt.Bottom,targetPosition:d=Tt.Top,label:h,labelStyle:g,labelShowBg:y,labelBgStyle:w,labelBgPadding:p,labelBgBorderRadius:b,style:x,markerEnd:C,markerStart:I,pathOptions:O,interactionWidth:z})=>{const[E,k,L]=qx({sourceX:e,sourceY:i,sourcePosition:c,targetX:a,targetY:u,targetPosition:d,curvature:O==null?void 0:O.curvature}),V=n.isInternal?void 0:t;return Z.jsx(Pd,{id:V,path:E,labelX:k,labelY:L,label:h,labelStyle:g,labelShowBg:y,labelBgStyle:w,labelBgPadding:p,labelBgBorderRadius:b,style:x,markerEnd:C,markerStart:I,interactionWidth:z})})}const GR=TT({isInternal:!1}),AT=TT({isInternal:!0});GR.displayName="BezierEdge";AT.displayName="BezierEdgeInternal";const O1={default:AT,straight:xT,step:bT,smoothstep:vT,simplebezier:mT},I1={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},XR=(n,t,e)=>e===Tt.Left?n-t:e===Tt.Right?n+t:n,KR=(n,t,e)=>e===Tt.Top?n-t:e===Tt.Bottom?n+t:n,R1="react-flow__edgeupdater";function M1({position:n,centerX:t,centerY:e,radius:i=10,onMouseDown:a,onMouseEnter:u,onMouseOut:c,type:d}){return Z.jsx("circle",{onMouseDown:a,onMouseEnter:u,onMouseOut:c,className:be([R1,`${R1}-${d}`]),cx:XR(t,i,n),cy:KR(e,i,n),r:i,stroke:"transparent",fill:"transparent"})}function FR({isReconnectable:n,reconnectRadius:t,edge:e,sourceX:i,sourceY:a,targetX:u,targetY:c,sourcePosition:d,targetPosition:h,onReconnect:g,onReconnectStart:y,onReconnectEnd:w,setReconnecting:p,setUpdateHover:b}){const x=ie(),C=(k,L)=>{if(k.button!==0)return;const{autoPanOnConnect:V,domNode:H,isValidConnection:tt,connectionMode:nt,connectionRadius:it,lib:ft,onConnectStart:ot,onConnectEnd:ct,cancelConnection:R,nodeLookup:j,rfId:D,panBy:B,updateConnection:P}=x.getState(),U=L.type==="target";p(!0),y==null||y(k,e,L.type);const N=(Q,et)=>{p(!1),w==null||w(Q,e,L.type,et)},q=Q=>g==null?void 0:g(e,Q);my.onPointerDown(k.nativeEvent,{autoPanOnConnect:V,connectionMode:nt,connectionRadius:it,domNode:H,handleId:L.id,nodeId:L.nodeId,nodeLookup:j,isTarget:U,edgeUpdaterType:L.type,lib:ft,flowId:D,cancelConnection:R,panBy:B,isValidConnection:tt,onConnect:q,onConnectStart:ot,onConnectEnd:ct,onReconnectEnd:N,updateConnection:P,getTransform:()=>x.getState().transform,getFromHandle:()=>x.getState().connection.fromHandle})},I=k=>C(k,{nodeId:e.target,id:e.targetHandle??null,type:"target"}),O=k=>C(k,{nodeId:e.source,id:e.sourceHandle??null,type:"source"}),z=()=>b(!0),E=()=>b(!1);return Z.jsxs(Z.Fragment,{children:[(n===!0||n==="source")&&Z.jsx(M1,{position:d,centerX:i,centerY:a,radius:t,onMouseDown:I,onMouseEnter:z,onMouseOut:E,type:"source"}),(n===!0||n==="target")&&Z.jsx(M1,{position:h,centerX:u,centerY:c,radius:t,onMouseDown:O,onMouseEnter:z,onMouseOut:E,type:"target"})]})}function ZR({id:n,edgesFocusable:t,edgesReconnectable:e,elementsSelectable:i,onClick:a,onDoubleClick:u,onContextMenu:c,onMouseEnter:d,onMouseMove:h,onMouseLeave:g,reconnectRadius:y,onReconnect:w,onReconnectStart:p,onReconnectEnd:b,rfId:x,edgeTypes:C,noPanClassName:I,onError:O,disableKeyboardA11y:z}){let E=Ht(St=>St.edgeLookup.get(n));const k=Ht(St=>St.defaultEdgeOptions);E=k?{...k,...E}:E;let L=E.type||"default",V=(C==null?void 0:C[L])||O1[L];V===void 0&&(O==null||O("011",Ar.error011(L)),L="default",V=O1.default);const H=!!(E.focusable||t&&typeof E.focusable>"u"),tt=typeof w<"u"&&(E.reconnectable||e&&typeof E.reconnectable>"u"),nt=!!(E.selectable||i&&typeof E.selectable>"u"),it=W.useRef(null),[ft,ot]=W.useState(!1),[ct,R]=W.useState(!1),j=ie(),{zIndex:D,sourceX:B,sourceY:P,targetX:U,targetY:N,sourcePosition:q,targetPosition:Q}=Ht(W.useCallback(St=>{const Yt=St.nodeLookup.get(E.source),qt=St.nodeLookup.get(E.target);if(!Yt||!qt)return{zIndex:E.zIndex,...I1};const Se=HO({id:n,sourceNode:Yt,targetNode:qt,sourceHandle:E.sourceHandle||null,targetHandle:E.targetHandle||null,connectionMode:St.connectionMode,onError:O});return{zIndex:BO({selected:E.selected,zIndex:E.zIndex,sourceNode:Yt,targetNode:qt,elevateOnSelect:St.elevateEdgesOnSelect}),...Se||I1}},[E.source,E.target,E.sourceHandle,E.targetHandle,E.selected,E.zIndex]),fe),et=W.useMemo(()=>E.markerStart?`url('#${hy(E.markerStart,x)}')`:void 0,[E.markerStart,x]),ut=W.useMemo(()=>E.markerEnd?`url('#${hy(E.markerEnd,x)}')`:void 0,[E.markerEnd,x]);if(E.hidden||B===null||P===null||U===null||N===null)return null;const gt=St=>{var en;const{addSelectedEdges:Yt,unselectNodesAndEdges:qt,multiSelectionActive:Se}=j.getState();nt&&(j.setState({nodesSelectionActive:!1}),E.selected&&Se?(qt({nodes:[],edges:[E]}),(en=it.current)==null||en.blur()):Yt([n])),a&&a(St,E)},dt=u?St=>{u(St,{...E})}:void 0,mt=c?St=>{c(St,{...E})}:void 0,pt=d?St=>{d(St,{...E})}:void 0,Dt=h?St=>{h(St,{...E})}:void 0,Vt=g?St=>{g(St,{...E})}:void 0,Ot=St=>{var Yt;if(!z&&Ax.includes(St.key)&&nt){const{unselectNodesAndEdges:qt,addSelectedEdges:Se}=j.getState();St.key==="Escape"?((Yt=it.current)==null||Yt.blur(),qt({edges:[E]})):Se([n])}};return Z.jsx("svg",{style:{zIndex:D},children:Z.jsxs("g",{className:be(["react-flow__edge",`react-flow__edge-${L}`,E.className,I,{selected:E.selected,animated:E.animated,inactive:!nt&&!a,updating:ft,selectable:nt}]),onClick:gt,onDoubleClick:dt,onContextMenu:mt,onMouseEnter:pt,onMouseMove:Dt,onMouseLeave:Vt,onKeyDown:H?Ot:void 0,tabIndex:H?0:void 0,role:H?"button":"img","data-id":n,"data-testid":`rf__edge-${n}`,"aria-label":E.ariaLabel===null?void 0:E.ariaLabel||`Edge from ${E.source} to ${E.target}`,"aria-describedby":H?`${eT}-${x}`:void 0,ref:it,children:[!ct&&Z.jsx(V,{id:n,source:E.source,target:E.target,type:E.type,selected:E.selected,animated:E.animated,selectable:nt,deletable:E.deletable??!0,label:E.label,labelStyle:E.labelStyle,labelShowBg:E.labelShowBg,labelBgStyle:E.labelBgStyle,labelBgPadding:E.labelBgPadding,labelBgBorderRadius:E.labelBgBorderRadius,sourceX:B,sourceY:P,targetX:U,targetY:N,sourcePosition:q,targetPosition:Q,data:E.data,style:E.style,sourceHandleId:E.sourceHandle,targetHandleId:E.targetHandle,markerStart:et,markerEnd:ut,pathOptions:"pathOptions"in E?E.pathOptions:void 0,interactionWidth:E.interactionWidth}),tt&&Z.jsx(FR,{edge:E,isReconnectable:tt,reconnectRadius:y,onReconnect:w,onReconnectStart:p,onReconnectEnd:b,sourceX:B,sourceY:P,targetX:U,targetY:N,sourcePosition:q,targetPosition:Q,setUpdateHover:ot,setReconnecting:R})]})})}const QR=n=>({edgesFocusable:n.edgesFocusable,edgesReconnectable:n.edgesReconnectable,elementsSelectable:n.elementsSelectable,connectionMode:n.connectionMode,onError:n.onError});function ET({defaultMarkerColor:n,onlyRenderVisibleElements:t,rfId:e,edgeTypes:i,noPanClassName:a,onReconnect:u,onEdgeContextMenu:c,onEdgeMouseEnter:d,onEdgeMouseMove:h,onEdgeMouseLeave:g,onEdgeClick:y,reconnectRadius:w,onEdgeDoubleClick:p,onReconnectStart:b,onReconnectEnd:x,disableKeyboardA11y:C}){const{edgesFocusable:I,edgesReconnectable:O,elementsSelectable:z,onError:E}=Ht(QR,fe),k=_R(t);return Z.jsxs("div",{className:"react-flow__edges",children:[Z.jsx(HR,{defaultColor:n,rfId:e}),k.map(L=>Z.jsx(ZR,{id:L,edgesFocusable:I,edgesReconnectable:O,elementsSelectable:z,noPanClassName:a,onReconnect:u,onContextMenu:c,onMouseEnter:d,onMouseMove:h,onMouseLeave:g,onClick:y,reconnectRadius:w,onDoubleClick:p,onReconnectStart:b,onReconnectEnd:x,rfId:e,onError:E,edgeTypes:i,disableKeyboardA11y:C},L))]})}ET.displayName="EdgeRenderer";const WR=W.memo(ET),tM=n=>`translate(${n.transform[0]}px,${n.transform[1]}px) scale(${n.transform[2]})`;function eM({children:n}){const t=Ht(tM);return Z.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:n})}function nM(n){const t=Wy(),e=W.useRef(!1);W.useEffect(()=>{!e.current&&t.viewportInitialized&&n&&(setTimeout(()=>n(t),1),e.current=!0)},[n,t.viewportInitialized])}const rM=n=>{var t;return(t=n.panZoom)==null?void 0:t.syncViewport};function iM(n){const t=Ht(rM),e=ie();return W.useEffect(()=>{n&&(t==null||t(n),e.setState({transform:[n.x,n.y,n.zoom]}))},[n,t]),null}function sM(n){return n.connection.inProgress?{...n.connection,to:Gu(n.connection.to,n.transform)}:{...n.connection}}function aM(n){return sM}function oM(n){const t=aM();return Ht(t,fe)}const lM=n=>({nodesConnectable:n.nodesConnectable,isValid:n.connection.isValid,inProgress:n.connection.inProgress,width:n.width,height:n.height});function uM({containerStyle:n,style:t,type:e,component:i}){const{nodesConnectable:a,width:u,height:c,isValid:d,inProgress:h}=Ht(lM,fe);return!(u&&a&&h)?null:Z.jsx("svg",{style:n,width:u,height:c,className:"react-flow__connectionline react-flow__container",children:Z.jsx("g",{className:be(["react-flow__connection",Nx(d)]),children:Z.jsx(NT,{style:t,type:e,CustomComponent:i,isValid:d})})})}const NT=({style:n,type:t=Ps.Bezier,CustomComponent:e,isValid:i})=>{const{inProgress:a,from:u,fromNode:c,fromHandle:d,fromPosition:h,to:g,toNode:y,toHandle:w,toPosition:p}=oM();if(!a)return;if(e)return Z.jsx(e,{connectionLineType:t,connectionLineStyle:n,fromNode:c,fromHandle:d,fromX:u.x,fromY:u.y,toX:g.x,toY:g.y,fromPosition:h,toPosition:p,connectionStatus:Nx(i),toNode:y,toHandle:w});let b="";const x={sourceX:u.x,sourceY:u.y,sourcePosition:h,targetX:g.x,targetY:g.y,targetPosition:p};switch(t){case Ps.Bezier:[b]=qx(x);break;case Ps.SimpleBezier:[b]=hT(x);break;case Ps.Step:[b]=dy({...x,borderRadius:0});break;case Ps.SmoothStep:[b]=dy(x);break;default:[b]=Jx(x)}return Z.jsx("path",{d:b,fill:"none",className:"react-flow__connection-path",style:n})};NT.displayName="ConnectionLine";const cM={};function B1(n=cM){W.useRef(n),ie(),W.useEffect(()=>{},[n])}function fM(){ie(),W.useRef(!1),W.useEffect(()=>{},[])}function CT({nodeTypes:n,edgeTypes:t,onInit:e,onNodeClick:i,onEdgeClick:a,onNodeDoubleClick:u,onEdgeDoubleClick:c,onNodeMouseEnter:d,onNodeMouseMove:h,onNodeMouseLeave:g,onNodeContextMenu:y,onSelectionContextMenu:w,onSelectionStart:p,onSelectionEnd:b,connectionLineType:x,connectionLineStyle:C,connectionLineComponent:I,connectionLineContainerStyle:O,selectionKeyCode:z,selectionOnDrag:E,selectionMode:k,multiSelectionKeyCode:L,panActivationKeyCode:V,zoomActivationKeyCode:H,deleteKeyCode:tt,onlyRenderVisibleElements:nt,elementsSelectable:it,defaultViewport:ft,translateExtent:ot,minZoom:ct,maxZoom:R,preventScrolling:j,defaultMarkerColor:D,zoomOnScroll:B,zoomOnPinch:P,panOnScroll:U,panOnScrollSpeed:N,panOnScrollMode:q,zoomOnDoubleClick:Q,panOnDrag:et,onPaneClick:ut,onPaneMouseEnter:gt,onPaneMouseMove:dt,onPaneMouseLeave:mt,onPaneScroll:pt,onPaneContextMenu:Dt,paneClickDistance:Vt,nodeClickDistance:Ot,onEdgeContextMenu:St,onEdgeMouseEnter:Yt,onEdgeMouseMove:qt,onEdgeMouseLeave:Se,reconnectRadius:en,onReconnect:Oe,onReconnectStart:Fo,onReconnectEnd:Ma,noDragClassName:rs,noWheelClassName:is,noPanClassName:Ks,disableKeyboardA11y:ss,nodeExtent:Zo,rfId:Fs,viewport:qn,onViewportChange:Ee}){return B1(n),B1(t),fM(),nM(e),iM(qn),Z.jsx(DR,{onPaneClick:ut,onPaneMouseEnter:gt,onPaneMouseMove:dt,onPaneMouseLeave:mt,onPaneContextMenu:Dt,onPaneScroll:pt,paneClickDistance:Vt,deleteKeyCode:tt,selectionKeyCode:z,selectionOnDrag:E,selectionMode:k,onSelectionStart:p,onSelectionEnd:b,multiSelectionKeyCode:L,panActivationKeyCode:V,zoomActivationKeyCode:H,elementsSelectable:it,zoomOnScroll:B,zoomOnPinch:P,zoomOnDoubleClick:Q,panOnScroll:U,panOnScrollSpeed:N,panOnScrollMode:q,panOnDrag:et,defaultViewport:ft,translateExtent:ot,minZoom:ct,maxZoom:R,onSelectionContextMenu:w,preventScrolling:j,noDragClassName:rs,noWheelClassName:is,noPanClassName:Ks,disableKeyboardA11y:ss,onViewportChange:Ee,isControlledViewport:!!qn,children:Z.jsxs(eM,{children:[Z.jsx(WR,{edgeTypes:t,onEdgeClick:a,onEdgeDoubleClick:c,onReconnect:Oe,onReconnectStart:Fo,onReconnectEnd:Ma,onlyRenderVisibleElements:nt,onEdgeContextMenu:St,onEdgeMouseEnter:Yt,onEdgeMouseMove:qt,onEdgeMouseLeave:Se,reconnectRadius:en,defaultMarkerColor:D,noPanClassName:Ks,disableKeyboardA11y:ss,rfId:Fs}),Z.jsx(uM,{style:C,type:x,component:I,containerStyle:O}),Z.jsx("div",{className:"react-flow__edgelabel-renderer"}),Z.jsx(LR,{nodeTypes:n,onNodeClick:i,onNodeDoubleClick:u,onNodeMouseEnter:d,onNodeMouseMove:h,onNodeMouseLeave:g,onNodeContextMenu:y,nodeClickDistance:Ot,onlyRenderVisibleElements:nt,noPanClassName:Ks,noDragClassName:rs,disableKeyboardA11y:ss,nodeExtent:Zo,rfId:Fs}),Z.jsx("div",{className:"react-flow__viewport-portal"})]})})}CT.displayName="GraphView";const dM=W.memo(CT),z1=({nodes:n,edges:t,defaultNodes:e,defaultEdges:i,width:a,height:u,fitView:c,nodeOrigin:d,nodeExtent:h}={})=>{const g=new Map,y=new Map,w=new Map,p=new Map,b=i??t??[],x=e??n??[],C=d??[0,0],I=h??Ru;$x(w,p,b),gy(x,g,y,{nodeOrigin:C,nodeExtent:I,elevateNodesOnSelect:!1});let O=[0,0,1];if(c&&a&&u){const z=Yu(g,{filter:V=>!!((V.width||V.initialWidth)&&(V.height||V.initialHeight))}),{x:E,y:k,zoom:L}=Gy(z,a,u,.5,2,.1);O=[E,k,L]}return{rfId:"1",width:0,height:0,transform:O,nodes:x,nodeLookup:g,parentLookup:y,edges:b,edgeLookup:p,connectionLookup:w,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:e!==void 0,hasDefaultEdges:i!==void 0,panZoom:null,minZoom:.5,maxZoom:2,translateExtent:Ru,nodeExtent:I,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:Yo.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:C,nodeDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:c??!1,fitViewOptions:void 0,fitViewResolver:null,connection:{...Ex},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanSpeed:15,connectionRadius:20,onError:OO,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1}},hM=({nodes:n,edges:t,defaultNodes:e,defaultEdges:i,width:a,height:u,fitView:c,nodeOrigin:d,nodeExtent:h})=>OI((g,y)=>{async function w(){const{nodeLookup:p,panZoom:b,fitViewOptions:x,fitViewResolver:C,width:I,height:O,minZoom:z,maxZoom:E}=y();b&&(await DO({nodes:p,width:I,height:O,panZoom:b,minZoom:z,maxZoom:E},x),C==null||C.resolve(!0),g({fitViewResolver:null}))}return{...z1({nodes:n,edges:t,width:a,height:u,fitView:c,nodeOrigin:d,nodeExtent:h,defaultNodes:e,defaultEdges:i}),setNodes:p=>{const{nodeLookup:b,parentLookup:x,nodeOrigin:C,elevateNodesOnSelect:I,fitViewQueued:O}=y(),z=gy(p,b,x,{nodeOrigin:C,nodeExtent:h,elevateNodesOnSelect:I,checkEquality:!0});O&&z?(w(),g({nodes:p,fitViewQueued:!1,fitViewOptions:void 0})):g({nodes:p})},setEdges:p=>{const{connectionLookup:b,edgeLookup:x}=y();$x(b,x,p),g({edges:p})},setDefaultNodesAndEdges:(p,b)=>{if(p){const{setNodes:x}=y();x(p),g({hasDefaultNodes:!0})}if(b){const{setEdges:x}=y();x(b),g({hasDefaultEdges:!0})}},updateNodeInternals:p=>{const{triggerNodeChanges:b,nodeLookup:x,parentLookup:C,domNode:I,nodeOrigin:O,nodeExtent:z,debug:E,fitViewQueued:k}=y(),{changes:L,updatedInternals:V}=XO(p,x,C,I,O,z);V&&(jO(x,C,{nodeOrigin:O,nodeExtent:z}),k?(w(),g({fitViewQueued:!1,fitViewOptions:void 0})):g({}),(L==null?void 0:L.length)>0&&(E&&console.log("React Flow: trigger node changes",L),b==null||b(L)))},updateNodePositions:(p,b=!1)=>{const x=[],C=[],{nodeLookup:I,triggerNodeChanges:O}=y();for(const[z,E]of p){const k=I.get(z),L=!!(k!=null&&k.expandParent&&(k!=null&&k.parentId)&&(E!=null&&E.position)),V={id:z,type:"position",position:L?{x:Math.max(0,E.position.x),y:Math.max(0,E.position.y)}:E.position,dragging:b};L&&k.parentId&&x.push({id:z,parentId:k.parentId,rect:{...E.internals.positionAbsolute,width:E.measured.width??0,height:E.measured.height??0}}),C.push(V)}if(x.length>0){const{parentLookup:z,nodeOrigin:E}=y(),k=Qy(x,I,z,E);C.push(...k)}O(C)},triggerNodeChanges:p=>{const{onNodesChange:b,setNodes:x,nodes:C,hasDefaultNodes:I,debug:O}=y();if(p!=null&&p.length){if(I){const z=ZI(p,C);x(z)}O&&console.log("React Flow: trigger node changes",p),b==null||b(p)}},triggerEdgeChanges:p=>{const{onEdgesChange:b,setEdges:x,edges:C,hasDefaultEdges:I,debug:O}=y();if(p!=null&&p.length){if(I){const z=QI(p,C);x(z)}O&&console.log("React Flow: trigger edge changes",p),b==null||b(p)}},addSelectedNodes:p=>{const{multiSelectionActive:b,edgeLookup:x,nodeLookup:C,triggerNodeChanges:I,triggerEdgeChanges:O}=y();if(b){const z=p.map(E=>wa(E,!0));I(z);return}I(ko(C,new Set([...p]),!0)),O(ko(x))},addSelectedEdges:p=>{const{multiSelectionActive:b,edgeLookup:x,nodeLookup:C,triggerNodeChanges:I,triggerEdgeChanges:O}=y();if(b){const z=p.map(E=>wa(E,!0));O(z);return}O(ko(x,new Set([...p]))),I(ko(C,new Set,!0))},unselectNodesAndEdges:({nodes:p,edges:b}={})=>{const{edges:x,nodes:C,nodeLookup:I,triggerNodeChanges:O,triggerEdgeChanges:z}=y(),E=p||C,k=b||x,L=E.map(H=>{const tt=I.get(H.id);return tt&&(tt.selected=!1),wa(H.id,!1)}),V=k.map(H=>wa(H.id,!1));O(L),z(V)},setMinZoom:p=>{const{panZoom:b,maxZoom:x}=y();b==null||b.setScaleExtent([p,x]),g({minZoom:p})},setMaxZoom:p=>{const{panZoom:b,minZoom:x}=y();b==null||b.setScaleExtent([x,p]),g({maxZoom:p})},setTranslateExtent:p=>{var b;(b=y().panZoom)==null||b.setTranslateExtent(p),g({translateExtent:p})},setPaneClickDistance:p=>{var b;(b=y().panZoom)==null||b.setClickDistance(p)},resetSelectedElements:()=>{const{edges:p,nodes:b,triggerNodeChanges:x,triggerEdgeChanges:C}=y(),I=b.reduce((z,E)=>E.selected?[...z,wa(E.id,!1)]:z,[]),O=p.reduce((z,E)=>E.selected?[...z,wa(E.id,!1)]:z,[]);x(I),C(O)},setNodeExtent:p=>{const{nodes:b,nodeLookup:x,parentLookup:C,nodeOrigin:I,elevateNodesOnSelect:O,nodeExtent:z}=y();p[0][0]===z[0][0]&&p[0][1]===z[0][1]&&p[1][0]===z[1][0]&&p[1][1]===z[1][1]||(gy(b,x,C,{nodeOrigin:I,nodeExtent:p,elevateNodesOnSelect:O,checkEquality:!1}),g({nodeExtent:p}))},panBy:p=>{const{transform:b,width:x,height:C,panZoom:I,translateExtent:O}=y();return KO({delta:p,panZoom:I,transform:b,translateExtent:O,width:x,height:C})},cancelConnection:()=>{g({connection:{...Ex}})},updateConnection:p=>{g({connection:p})},reset:()=>g({...z1()})}},Object.is);function gM({initialNodes:n,initialEdges:t,defaultNodes:e,defaultEdges:i,initialWidth:a,initialHeight:u,fitView:c,nodeOrigin:d,nodeExtent:h,children:g}){const[y]=W.useState(()=>hM({nodes:n,edges:t,defaultNodes:e,defaultEdges:i,width:a,height:u,fitView:c,nodeOrigin:d,nodeExtent:h}));return Z.jsx(II,{value:y,children:Z.jsx(nR,{children:g})})}function mM({children:n,nodes:t,edges:e,defaultNodes:i,defaultEdges:a,width:u,height:c,fitView:d,nodeOrigin:h,nodeExtent:g}){return W.useContext(_d)?Z.jsx(Z.Fragment,{children:n}):Z.jsx(gM,{initialNodes:t,initialEdges:e,defaultNodes:i,defaultEdges:a,initialWidth:u,initialHeight:c,fitView:d,nodeOrigin:h,nodeExtent:g,children:n})}const yM={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function pM({nodes:n,edges:t,defaultNodes:e,defaultEdges:i,className:a,nodeTypes:u,edgeTypes:c,onNodeClick:d,onEdgeClick:h,onInit:g,onMove:y,onMoveStart:w,onMoveEnd:p,onConnect:b,onConnectStart:x,onConnectEnd:C,onClickConnectStart:I,onClickConnectEnd:O,onNodeMouseEnter:z,onNodeMouseMove:E,onNodeMouseLeave:k,onNodeContextMenu:L,onNodeDoubleClick:V,onNodeDragStart:H,onNodeDrag:tt,onNodeDragStop:nt,onNodesDelete:it,onEdgesDelete:ft,onDelete:ot,onSelectionChange:ct,onSelectionDragStart:R,onSelectionDrag:j,onSelectionDragStop:D,onSelectionContextMenu:B,onSelectionStart:P,onSelectionEnd:U,onBeforeDelete:N,connectionMode:q,connectionLineType:Q=Ps.Bezier,connectionLineStyle:et,connectionLineComponent:ut,connectionLineContainerStyle:gt,deleteKeyCode:dt="Backspace",selectionKeyCode:mt="Shift",selectionOnDrag:pt=!1,selectionMode:Dt=Mu.Full,panActivationKeyCode:Vt="Space",multiSelectionKeyCode:Ot=wd()?"Meta":"Control",zoomActivationKeyCode:St=wd()?"Meta":"Control",snapToGrid:Yt,snapGrid:qt,onlyRenderVisibleElements:Se=!1,selectNodesOnDrag:en,nodesDraggable:Oe,nodesConnectable:Fo,nodesFocusable:Ma,nodeOrigin:rs=nT,edgesFocusable:is,edgesReconnectable:Ks,elementsSelectable:ss=!0,defaultViewport:Zo=VI,minZoom:Fs=.5,maxZoom:qn=2,translateExtent:Ee=Ru,preventScrolling:tr=!0,nodeExtent:Ie,defaultMarkerColor:Jd="#b1b1b7",zoomOnScroll:Hd=!0,zoomOnPinch:$d=!0,panOnScroll:Ba=!1,panOnScrollSpeed:za=.5,panOnScrollMode:Nr=Na.Free,zoomOnDoubleClick:La=!0,panOnDrag:Zs=!0,onPaneClick:Vd,onPaneMouseEnter:Xu,onPaneMouseMove:Ku,onPaneMouseLeave:Qo,onPaneScroll:Qs,onPaneContextMenu:jd,paneClickDistance:Wo=0,nodeClickDistance:Fu=0,children:tl,onReconnect:el,onReconnectStart:Zu,onReconnectEnd:Yd,onEdgeContextMenu:er,onEdgeDoubleClick:Ne,onEdgeMouseEnter:_e,onEdgeMouseMove:as,onEdgeMouseLeave:nl,reconnectRadius:Gd=10,onNodesChange:Xd,onEdgesChange:Qu,noDragClassName:Ws="nodrag",noWheelClassName:rl="nowheel",noPanClassName:Cr="nopan",fitView:Dr,fitViewOptions:ta,connectOnClick:os,attributionPosition:ye,proOptions:Wu,defaultEdgeOptions:tc,elevateNodesOnSelect:kr,elevateEdgesOnSelect:ls,disableKeyboardA11y:ec=!1,autoPanOnConnect:nc,autoPanOnNodeDrag:rc,autoPanSpeed:Kd,connectionRadius:_a,isValidConnection:Ua,onError:Pn,style:il,id:sl,nodeDragThreshold:us,viewport:al,onViewportChange:ol,width:Fd,height:ic,colorMode:Ve="light",debug:sc,onScroll:qa,...Pa},ac){const cs=sl||"1",Zd=XI(Ve),je=W.useCallback(Ja=>{Ja.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),qa==null||qa(Ja)},[qa]);return Z.jsx("div",{"data-testid":"rf__wrapper",...Pa,onScroll:je,style:{...il,...yM},ref:ac,className:be(["react-flow",a,Zd]),id:sl,children:Z.jsxs(mM,{nodes:n,edges:t,width:Fd,height:ic,fitView:Dr,nodeOrigin:rs,nodeExtent:Ie,children:[Z.jsx(dM,{onInit:g,onNodeClick:d,onEdgeClick:h,onNodeMouseEnter:z,onNodeMouseMove:E,onNodeMouseLeave:k,onNodeContextMenu:L,onNodeDoubleClick:V,nodeTypes:u,edgeTypes:c,connectionLineType:Q,connectionLineStyle:et,connectionLineComponent:ut,connectionLineContainerStyle:gt,selectionKeyCode:mt,selectionOnDrag:pt,selectionMode:Dt,deleteKeyCode:dt,multiSelectionKeyCode:Ot,panActivationKeyCode:Vt,zoomActivationKeyCode:St,onlyRenderVisibleElements:Se,defaultViewport:Zo,translateExtent:Ee,minZoom:Fs,maxZoom:qn,preventScrolling:tr,zoomOnScroll:Hd,zoomOnPinch:$d,zoomOnDoubleClick:La,panOnScroll:Ba,panOnScrollSpeed:za,panOnScrollMode:Nr,panOnDrag:Zs,onPaneClick:Vd,onPaneMouseEnter:Xu,onPaneMouseMove:Ku,onPaneMouseLeave:Qo,onPaneScroll:Qs,onPaneContextMenu:jd,paneClickDistance:Wo,nodeClickDistance:Fu,onSelectionContextMenu:B,onSelectionStart:P,onSelectionEnd:U,onReconnect:el,onReconnectStart:Zu,onReconnectEnd:Yd,onEdgeContextMenu:er,onEdgeDoubleClick:Ne,onEdgeMouseEnter:_e,onEdgeMouseMove:as,onEdgeMouseLeave:nl,reconnectRadius:Gd,defaultMarkerColor:Jd,noDragClassName:Ws,noWheelClassName:rl,noPanClassName:Cr,rfId:cs,disableKeyboardA11y:ec,nodeExtent:Ie,viewport:al,onViewportChange:ol}),Z.jsx(GI,{nodes:n,edges:t,defaultNodes:e,defaultEdges:i,onConnect:b,onConnectStart:x,onConnectEnd:C,onClickConnectStart:I,onClickConnectEnd:O,nodesDraggable:Oe,nodesConnectable:Fo,nodesFocusable:Ma,edgesFocusable:is,edgesReconnectable:Ks,elementsSelectable:ss,elevateNodesOnSelect:kr,elevateEdgesOnSelect:ls,minZoom:Fs,maxZoom:qn,nodeExtent:Ie,onNodesChange:Xd,onEdgesChange:Qu,snapToGrid:Yt,snapGrid:qt,connectionMode:q,translateExtent:Ee,connectOnClick:os,defaultEdgeOptions:tc,fitView:Dr,fitViewOptions:ta,onNodesDelete:it,onEdgesDelete:ft,onDelete:ot,onNodeDragStart:H,onNodeDrag:tt,onNodeDragStop:nt,onSelectionDrag:j,onSelectionDragStart:R,onSelectionDragStop:D,onMove:y,onMoveStart:w,onMoveEnd:p,noPanClassName:Cr,nodeOrigin:rs,rfId:cs,autoPanOnConnect:nc,autoPanOnNodeDrag:rc,autoPanSpeed:Kd,onError:Pn,connectionRadius:_a,isValidConnection:Ua,selectNodesOnDrag:en,nodeDragThreshold:us,onBeforeDelete:N,paneClickDistance:Wo,debug:sc}),Z.jsx($I,{onSelectionChange:ct}),tl,Z.jsx(UI,{proOptions:Wu,position:ye}),Z.jsx(LI,{rfId:cs,disableKeyboardA11y:ec})]})})}var vM=iT(pM);function wM({dimensions:n,lineWidth:t,variant:e,className:i}){return Z.jsx("path",{strokeWidth:t,d:`M${n[0]/2} 0 V${n[1]} M0 ${n[1]/2} H${n[0]}`,className:be(["react-flow__background-pattern",e,i])})}function bM({radius:n,className:t}){return Z.jsx("circle",{cx:n,cy:n,r:n,className:be(["react-flow__background-pattern","dots",t])})}var Ys;(function(n){n.Lines="lines",n.Dots="dots",n.Cross="cross"})(Ys||(Ys={}));const SM={[Ys.Dots]:1,[Ys.Lines]:1,[Ys.Cross]:6},xM=n=>({transform:n.transform,patternId:`pattern-${n.rfId}`});function DT({id:n,variant:t=Ys.Dots,gap:e=20,size:i,lineWidth:a=1,offset:u=0,color:c,bgColor:d,style:h,className:g,patternClassName:y}){const w=W.useRef(null),{transform:p,patternId:b}=Ht(xM,fe),x=i||SM[t],C=t===Ys.Dots,I=t===Ys.Cross,O=Array.isArray(e)?e:[e,e],z=[O[0]*p[2]||1,O[1]*p[2]||1],E=x*p[2],k=Array.isArray(u)?u:[u,u],L=I?[E,E]:z,V=[k[0]*p[2]||1+L[0]/2,k[1]*p[2]||1+L[1]/2],H=`${b}${n||""}`;return Z.jsxs("svg",{className:be(["react-flow__background",g]),style:{...h,...qd,"--xy-background-color-props":d,"--xy-background-pattern-color-props":c},ref:w,"data-testid":"rf__background",children:[Z.jsx("pattern",{id:H,x:p[0]%z[0],y:p[1]%z[1],width:z[0],height:z[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${V[0]},-${V[1]})`,children:C?Z.jsx(bM,{radius:E/2,className:y}):Z.jsx(wM,{dimensions:L,lineWidth:a,variant:t,className:y})}),Z.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${H})`})]})}DT.displayName="Background";const TM=W.memo(DT);function AM(){return Z.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:Z.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function EM(){return Z.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:Z.jsx("path",{d:"M0 0h32v4.2H0z"})})}function NM(){return Z.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:Z.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function CM(){return Z.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:Z.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function DM(){return Z.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:Z.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function Cf({children:n,className:t,...e}){return Z.jsx("button",{type:"button",className:be(["react-flow__controls-button",t]),...e,children:n})}const kM=n=>({isInteractive:n.nodesDraggable||n.nodesConnectable||n.elementsSelectable,minZoomReached:n.transform[2]<=n.minZoom,maxZoomReached:n.transform[2]>=n.maxZoom});function kT({style:n,showZoom:t=!0,showFitView:e=!0,showInteractive:i=!0,fitViewOptions:a,onZoomIn:u,onZoomOut:c,onFitView:d,onInteractiveChange:h,className:g,children:y,position:w="bottom-left",orientation:p="vertical","aria-label":b="React Flow controls"}){const x=ie(),{isInteractive:C,minZoomReached:I,maxZoomReached:O}=Ht(kM,fe),{zoomIn:z,zoomOut:E,fitView:k}=Wy(),L=()=>{z(),u==null||u()},V=()=>{E(),c==null||c()},H=()=>{k(a),d==null||d()},tt=()=>{x.setState({nodesDraggable:!C,nodesConnectable:!C,elementsSelectable:!C}),h==null||h(!C)},nt=p==="horizontal"?"horizontal":"vertical";return Z.jsxs(Ud,{className:be(["react-flow__controls",nt,g]),position:w,style:n,"data-testid":"rf__controls","aria-label":b,children:[t&&Z.jsxs(Z.Fragment,{children:[Z.jsx(Cf,{onClick:L,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:O,children:Z.jsx(AM,{})}),Z.jsx(Cf,{onClick:V,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:I,children:Z.jsx(EM,{})})]}),e&&Z.jsx(Cf,{className:"react-flow__controls-fitview",onClick:H,title:"fit view","aria-label":"fit view",children:Z.jsx(NM,{})}),i&&Z.jsx(Cf,{className:"react-flow__controls-interactive",onClick:tt,title:"toggle interactivity","aria-label":"toggle interactivity",children:C?Z.jsx(DM,{}):Z.jsx(CM,{})}),y]})}kT.displayName="Controls";const OM=W.memo(kT);function IM({id:n,x:t,y:e,width:i,height:a,style:u,color:c,strokeColor:d,strokeWidth:h,className:g,borderRadius:y,shapeRendering:w,selected:p,onClick:b}){const{background:x,backgroundColor:C}=u||{},I=c||x||C;return Z.jsx("rect",{className:be(["react-flow__minimap-node",{selected:p},g]),x:t,y:e,rx:y,ry:y,width:i,height:a,style:{fill:I,stroke:d,strokeWidth:h},shapeRendering:w,onClick:b?O=>b(O,n):void 0})}const RM=W.memo(IM),MM=n=>n.nodes.map(t=>t.id),Cm=n=>n instanceof Function?n:()=>n;function BM({nodeStrokeColor:n,nodeColor:t,nodeClassName:e="",nodeBorderRadius:i=5,nodeStrokeWidth:a,nodeComponent:u=RM,onClick:c}){const d=Ht(MM,fe),h=Cm(t),g=Cm(n),y=Cm(e),w=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return Z.jsx(Z.Fragment,{children:d.map(p=>Z.jsx(LM,{id:p,nodeColorFunc:h,nodeStrokeColorFunc:g,nodeClassNameFunc:y,nodeBorderRadius:i,nodeStrokeWidth:a,NodeComponent:u,onClick:c,shapeRendering:w},p))})}function zM({id:n,nodeColorFunc:t,nodeStrokeColorFunc:e,nodeClassNameFunc:i,nodeBorderRadius:a,nodeStrokeWidth:u,shapeRendering:c,NodeComponent:d,onClick:h}){const{node:g,x:y,y:w,width:p,height:b}=Ht(x=>{const C=x.nodeLookup.get(n),{x:I,y:O}=C.internals.positionAbsolute,{width:z,height:E}=ns(C);return{node:C,x:I,y:O,width:z,height:E}},fe);return!g||g.hidden||!Mx(g)?null:Z.jsx(d,{x:y,y:w,width:p,height:b,style:g.style,selected:!!g.selected,className:i(g),color:t(g),borderRadius:a,strokeColor:e(g),strokeWidth:u,shapeRendering:c,onClick:h,id:g.id})}const LM=W.memo(zM);var _M=W.memo(BM);const UM=200,qM=150,PM=n=>!n.hidden,JM=n=>{const t={x:-n.transform[0]/n.transform[2],y:-n.transform[1]/n.transform[2],width:n.width/n.transform[2],height:n.height/n.transform[2]};return{viewBB:t,boundingRect:n.nodeLookup.size>0?Rx(Yu(n.nodeLookup,{filter:PM}),t):t,rfId:n.rfId,panZoom:n.panZoom,translateExtent:n.translateExtent,flowWidth:n.width,flowHeight:n.height}},HM="react-flow__minimap-desc";function OT({style:n,className:t,nodeStrokeColor:e,nodeColor:i,nodeClassName:a="",nodeBorderRadius:u=5,nodeStrokeWidth:c,nodeComponent:d,bgColor:h,maskColor:g,maskStrokeColor:y,maskStrokeWidth:w,position:p="bottom-right",onClick:b,onNodeClick:x,pannable:C=!1,zoomable:I=!1,ariaLabel:O="React Flow mini map",inversePan:z,zoomStep:E=10,offsetScale:k=5}){const L=ie(),V=W.useRef(null),{boundingRect:H,viewBB:tt,rfId:nt,panZoom:it,translateExtent:ft,flowWidth:ot,flowHeight:ct}=Ht(JM,fe),R=(n==null?void 0:n.width)??UM,j=(n==null?void 0:n.height)??qM,D=H.width/R,B=H.height/j,P=Math.max(D,B),U=P*R,N=P*j,q=k*P,Q=H.x-(U-H.width)/2-q,et=H.y-(N-H.height)/2-q,ut=U+q*2,gt=N+q*2,dt=`${HM}-${nt}`,mt=W.useRef(0),pt=W.useRef();mt.current=P,W.useEffect(()=>{if(V.current&&it)return pt.current=rI({domNode:V.current,panZoom:it,getTransform:()=>L.getState().transform,getViewScale:()=>mt.current}),()=>{var Ot;(Ot=pt.current)==null||Ot.destroy()}},[it]),W.useEffect(()=>{var Ot;(Ot=pt.current)==null||Ot.update({translateExtent:ft,width:ot,height:ct,inversePan:z,pannable:C,zoomStep:E,zoomable:I})},[C,I,z,E,ft,ot,ct]);const Dt=b?Ot=>{var qt;const[St,Yt]=((qt=pt.current)==null?void 0:qt.pointer(Ot))||[0,0];b(Ot,{x:St,y:Yt})}:void 0,Vt=x?W.useCallback((Ot,St)=>{const Yt=L.getState().nodeLookup.get(St);x(Ot,Yt)},[]):void 0;return Z.jsx(Ud,{position:p,style:{...n,"--xy-minimap-background-color-props":typeof h=="string"?h:void 0,"--xy-minimap-mask-background-color-props":typeof g=="string"?g:void 0,"--xy-minimap-mask-stroke-color-props":typeof y=="string"?y:void 0,"--xy-minimap-mask-stroke-width-props":typeof w=="number"?w*P:void 0,"--xy-minimap-node-background-color-props":typeof i=="string"?i:void 0,"--xy-minimap-node-stroke-color-props":typeof e=="string"?e:void 0,"--xy-minimap-node-stroke-width-props":typeof c=="string"?c:void 0},className:be(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:Z.jsxs("svg",{width:R,height:j,viewBox:`${Q} ${et} ${ut} ${gt}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":dt,ref:V,onClick:Dt,children:[O&&Z.jsx("title",{id:dt,children:O}),Z.jsx(_M,{onClick:Vt,nodeColor:i,nodeStrokeColor:e,nodeBorderRadius:u,nodeClassName:a,nodeStrokeWidth:c,nodeComponent:d}),Z.jsx("path",{className:"react-flow__minimap-mask",d:`M${Q-q},${et-q}h${ut+q*2}v${gt+q*2}h${-ut-q*2}z
        M${tt.x},${tt.y}h${tt.width}v${tt.height}h${-tt.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}OT.displayName="MiniMap";const $M=W.memo(OT);function VM({nodeId:n,position:t,variant:e=yu.Handle,className:i,style:a={},children:u,color:c,minWidth:d=10,minHeight:h=10,maxWidth:g=Number.MAX_VALUE,maxHeight:y=Number.MAX_VALUE,keepAspectRatio:w=!1,shouldResize:p,onResizeStart:b,onResize:x,onResizeEnd:C}){const I=lT(),O=typeof n=="string"?n:I,z=ie(),E=W.useRef(null),k=e===yu.Line?"right":"bottom-right",L=t??k,V=W.useRef(null);W.useEffect(()=>{if(!(!E.current||!O))return V.current||(V.current=vI({domNode:E.current,nodeId:O,getStoreItems:()=>{const{nodeLookup:it,transform:ft,snapGrid:ot,snapToGrid:ct,nodeOrigin:R,domNode:j}=z.getState();return{nodeLookup:it,transform:ft,snapGrid:ot,snapToGrid:ct,nodeOrigin:R,paneDomNode:j}},onChange:(it,ft)=>{const{triggerNodeChanges:ot,nodeLookup:ct,parentLookup:R,nodeOrigin:j}=z.getState(),D=[],B={x:it.x,y:it.y},P=ct.get(O);if(P&&P.expandParent&&P.parentId){const U=P.origin??j,N=it.width??P.measured.width??0,q=it.height??P.measured.height??0,Q={id:P.id,parentId:P.parentId,rect:{width:N,height:q,...Bx({x:it.x??P.position.x,y:it.y??P.position.y},{width:N,height:q},P.parentId,ct,U)}},et=Qy([Q],ct,R,j);D.push(...et),B.x=it.x?Math.max(U[0]*N,it.x):void 0,B.y=it.y?Math.max(U[1]*q,it.y):void 0}if(B.x!==void 0&&B.y!==void 0){const U={id:O,type:"position",position:{...B}};D.push(U)}if(it.width!==void 0&&it.height!==void 0){const U={id:O,type:"dimensions",resizing:!0,setAttributes:!0,dimensions:{width:it.width,height:it.height}};D.push(U)}for(const U of ft){const N={...U,type:"position"};D.push(N)}ot(D)},onEnd:()=>{const it={id:O,type:"dimensions",resizing:!1};z.getState().triggerNodeChanges([it])}})),V.current.update({controlPosition:L,boundaries:{minWidth:d,minHeight:h,maxWidth:g,maxHeight:y},keepAspectRatio:w,onResizeStart:b,onResize:x,onResizeEnd:C,shouldResize:p}),()=>{var it;(it=V.current)==null||it.destroy()}},[L,d,h,g,y,w,b,x,C,p]);const H=L.split("-"),tt=e===yu.Line?"borderColor":"backgroundColor",nt=c?{...a,[tt]:c}:a;return Z.jsx("div",{className:be(["react-flow__resize-control","nodrag",...H,e,i]),ref:E,style:nt,children:u})}W.memo(VM);function jM(){const{root:n,update:t,loading:e,error:i}=GC(),a=W.useCallback(c=>{t(d=>{for(const h of c)switch(h.type){case"add":d.nodes.push(h.item);break;case"replace":{const g=d.nodes.findIndex(y=>y.id===h.id);d.nodes[g]=h.item}break;case"remove":{const g=d.nodes.findIndex(y=>y.id===h.id);d.nodes.deleteByID(d.nodes[g].getID())}break;case"position":{const g=d.nodes.findIndex(y=>y.id===h.id);d.nodes[g].position=h.position}break;case"select":{const g=d.nodes.findIndex(y=>y.id===h.id);d.nodes[g].selected=h.selected}break}})},[t]),u=W.useCallback(c=>{t(d=>{for(const h of c)switch(h.type){case"add":d.edges.push(h.item);break;case"replace":{const g=d.edges.findIndex(y=>y.id===h.id);d.edges[g]=h.item}break;case"remove":{const g=d.edges.findIndex(y=>y.id===h.id);d.edges.deleteByID(d.edges[g].getID())}break;case"select":{const g=d.edges.findIndex(y=>y.id===h.id);d.edges[g].selected=h.selected}break}})},[t]);return e?Z.jsx("div",{children:"Loading..."}):i?Z.jsxs("div",{children:["Error: ",i.message]}):Z.jsx("div",{style:{position:"fixed",inset:0,height:"100vh"},children:Z.jsxs(vM,{nodes:n.nodes,edges:n.edges,onNodesChange:a,onEdgesChange:u,fitView:!0,children:[Z.jsx(TM,{gap:10,size:1,color:"silver"}),Z.jsx(OM,{orientation:"horizontal",showInteractive:!1}),Z.jsx($M,{})]})})}const YM=[{id:"1",type:"input",data:{label:"Multiplayer"},position:{x:250,y:25}},{id:"2",data:{label:"Graph"},position:{x:100,y:125}},{id:"3",data:{label:"React Flow"},position:{x:250,y:225},style:{borderColor:"#FF0072"}},{id:"4",type:"output",data:{label:"Yorkie"},position:{x:100,y:325},style:{borderColor:"#944DFA"}}],GM=[{id:"e1-2",source:"1",target:"2",type:"smoothstep"},{id:"e2-3",source:"2",target:"3",label:"with"},{id:"e3-4",source:"3",target:"4",label:"and",animated:!0}],XM={nodes:YM,edges:GM};VE.createRoot(document.getElementById("root")).render(Z.jsxs(W.StrictMode,{children:[Z.jsx($C,{apiKey:"cedaovjuioqlk4pjqn6g",rpcAddr:"https://api.yorkie.dev",children:Z.jsx(YC,{docKey:`react-flow-${new Date().toISOString().substring(0,10).replace(/-/g,"")}`,initialRoot:XM,children:Z.jsx(jM,{})})}),","]}));
