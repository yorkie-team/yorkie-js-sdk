var DN=Object.defineProperty;var IN=(n,t,e)=>t in n?DN(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var y=(n,t,e)=>IN(n,typeof t!="symbol"?t+"":t,e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function e(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(a){if(a.ep)return;a.ep=!0;const l=e(a);fetch(a.href,l)}})();function O1(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Bm={exports:{}},Cu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wb;function ON(){if(wb)return Cu;wb=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(r,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var d in a)d!=="key"&&(l[d]=a[d])}else l=a;return a=l.ref,{$$typeof:n,type:r,key:c,ref:a!==void 0?a:null,props:l}}return Cu.Fragment=t,Cu.jsx=e,Cu.jsxs=e,Cu}var bb;function MN(){return bb||(bb=1,Bm.exports=ON()),Bm.exports}var tt=MN(),zm={exports:{}},ku={},Lm={exports:{}},_m={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sb;function RN(){return Sb||(Sb=1,function(n){function t(I,z){var K=I.length;I.push(z);t:for(;0<K;){var J=K-1>>>1,k=I[J];if(0<a(k,z))I[J]=z,I[K]=k,K=J;else break t}}function e(I){return I.length===0?null:I[0]}function r(I){if(I.length===0)return null;var z=I[0],K=I.pop();if(K!==z){I[0]=K;t:for(var J=0,k=I.length,U=k>>>1;J<U;){var Z=2*(J+1)-1,it=I[Z],lt=Z+1,yt=I[lt];if(0>a(it,K))lt<k&&0>a(yt,it)?(I[J]=yt,I[lt]=K,J=lt):(I[J]=it,I[Z]=K,J=Z);else if(lt<k&&0>a(yt,K))I[J]=yt,I[lt]=K,J=lt;else break t}}return z}function a(I,z){var K=I.sortIndex-z.sortIndex;return K!==0?K:I.id-z.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();n.unstable_now=function(){return c.now()-d}}var h=[],g=[],p=1,w=null,v=3,b=!1,T=!1,A=!1,C=!1,D=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function O(I){for(var z=e(g);z!==null;){if(z.callback===null)r(g);else if(z.startTime<=I)r(g),z.sortIndex=z.expirationTime,t(h,z);else break;z=e(g)}}function B(I){if(A=!1,O(I),!T)if(e(h)!==null)T=!0,_||(_=!0,rt());else{var z=e(g);z!==null&&Y(B,z.startTime-I)}}var _=!1,P=-1,V=5,W=-1;function ft(){return C?!0:!(n.unstable_now()-W<V)}function nt(){if(C=!1,_){var I=n.unstable_now();W=I;var z=!0;try{t:{T=!1,A&&(A=!1,L(P),P=-1),b=!0;var K=v;try{e:{for(O(I),w=e(h);w!==null&&!(w.expirationTime>I&&ft());){var J=w.callback;if(typeof J=="function"){w.callback=null,v=w.priorityLevel;var k=J(w.expirationTime<=I);if(I=n.unstable_now(),typeof k=="function"){w.callback=k,O(I),z=!0;break e}w===e(h)&&r(h),O(I)}else r(h);w=e(h)}if(w!==null)z=!0;else{var U=e(g);U!==null&&Y(B,U.startTime-I),z=!1}}break t}finally{w=null,v=K,b=!1}z=void 0}}finally{z?rt():_=!1}}}var rt;if(typeof N=="function")rt=function(){N(nt)};else if(typeof MessageChannel<"u"){var ot=new MessageChannel,M=ot.port2;ot.port1.onmessage=nt,rt=function(){M.postMessage(null)}}else rt=function(){D(nt,0)};function Y(I,z){P=D(function(){I(n.unstable_now())},z)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(I){I.callback=null},n.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<I?Math.floor(1e3/I):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_next=function(I){switch(v){case 1:case 2:case 3:var z=3;break;default:z=v}var K=v;v=z;try{return I()}finally{v=K}},n.unstable_requestPaint=function(){C=!0},n.unstable_runWithPriority=function(I,z){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var K=v;v=I;try{return z()}finally{v=K}},n.unstable_scheduleCallback=function(I,z,K){var J=n.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?J+K:J):K=J,I){case 1:var k=-1;break;case 2:k=250;break;case 5:k=1073741823;break;case 4:k=1e4;break;default:k=5e3}return k=K+k,I={id:p++,callback:z,priorityLevel:I,startTime:K,expirationTime:k,sortIndex:-1},K>J?(I.sortIndex=K,t(g,I),e(h)===null&&I===e(g)&&(A?(L(P),P=-1):A=!0,Y(B,K-J))):(I.sortIndex=k,t(h,I),T||b||(T=!0,_||(_=!0,rt()))),I},n.unstable_shouldYield=ft,n.unstable_wrapCallback=function(I){var z=v;return function(){var K=v;v=z;try{return I.apply(this,arguments)}finally{v=K}}}}(_m)),_m}var xb;function BN(){return xb||(xb=1,Lm.exports=RN()),Lm.exports}var Um={exports:{}},Bt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tb;function zN(){if(Tb)return Bt;Tb=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),w=Symbol.iterator;function v(k){return k===null||typeof k!="object"?null:(k=w&&k[w]||k["@@iterator"],typeof k=="function"?k:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},T=Object.assign,A={};function C(k,U,Z){this.props=k,this.context=U,this.refs=A,this.updater=Z||b}C.prototype.isReactComponent={},C.prototype.setState=function(k,U){if(typeof k!="object"&&typeof k!="function"&&k!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,k,U,"setState")},C.prototype.forceUpdate=function(k){this.updater.enqueueForceUpdate(this,k,"forceUpdate")};function D(){}D.prototype=C.prototype;function L(k,U,Z){this.props=k,this.context=U,this.refs=A,this.updater=Z||b}var N=L.prototype=new D;N.constructor=L,T(N,C.prototype),N.isPureReactComponent=!0;var O=Array.isArray,B={H:null,A:null,T:null,S:null,V:null},_=Object.prototype.hasOwnProperty;function P(k,U,Z,it,lt,yt){return Z=yt.ref,{$$typeof:n,type:k,key:U,ref:Z!==void 0?Z:null,props:yt}}function V(k,U){return P(k.type,U,void 0,void 0,void 0,k.props)}function W(k){return typeof k=="object"&&k!==null&&k.$$typeof===n}function ft(k){var U={"=":"=0",":":"=2"};return"$"+k.replace(/[=:]/g,function(Z){return U[Z]})}var nt=/\/+/g;function rt(k,U){return typeof k=="object"&&k!==null&&k.key!=null?ft(""+k.key):U.toString(36)}function ot(){}function M(k){switch(k.status){case"fulfilled":return k.value;case"rejected":throw k.reason;default:switch(typeof k.status=="string"?k.then(ot,ot):(k.status="pending",k.then(function(U){k.status==="pending"&&(k.status="fulfilled",k.value=U)},function(U){k.status==="pending"&&(k.status="rejected",k.reason=U)})),k.status){case"fulfilled":return k.value;case"rejected":throw k.reason}}throw k}function Y(k,U,Z,it,lt){var yt=typeof k;(yt==="undefined"||yt==="boolean")&&(k=null);var dt=!1;if(k===null)dt=!0;else switch(yt){case"bigint":case"string":case"number":dt=!0;break;case"object":switch(k.$$typeof){case n:case t:dt=!0;break;case p:return dt=k._init,Y(dt(k._payload),U,Z,it,lt)}}if(dt)return lt=lt(k),dt=it===""?"."+rt(k,0):it,O(lt)?(Z="",dt!=null&&(Z=dt.replace(nt,"$&/")+"/"),Y(lt,U,Z,"",function(St){return St})):lt!=null&&(W(lt)&&(lt=V(lt,Z+(lt.key==null||k&&k.key===lt.key?"":(""+lt.key).replace(nt,"$&/")+"/")+dt)),U.push(lt)),1;dt=0;var pt=it===""?".":it+":";if(O(k))for(var mt=0;mt<k.length;mt++)it=k[mt],yt=pt+rt(it,mt),dt+=Y(it,U,Z,yt,lt);else if(mt=v(k),typeof mt=="function")for(k=mt.call(k),mt=0;!(it=k.next()).done;)it=it.value,yt=pt+rt(it,mt++),dt+=Y(it,U,Z,yt,lt);else if(yt==="object"){if(typeof k.then=="function")return Y(M(k),U,Z,it,lt);throw U=String(k),Error("Objects are not valid as a React child (found: "+(U==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":U)+"). If you meant to render a collection of children, use an array instead.")}return dt}function I(k,U,Z){if(k==null)return k;var it=[],lt=0;return Y(k,it,"","",function(yt){return U.call(Z,yt,lt++)}),it}function z(k){if(k._status===-1){var U=k._result;U=U(),U.then(function(Z){(k._status===0||k._status===-1)&&(k._status=1,k._result=Z)},function(Z){(k._status===0||k._status===-1)&&(k._status=2,k._result=Z)}),k._status===-1&&(k._status=0,k._result=U)}if(k._status===1)return k._result.default;throw k._result}var K=typeof reportError=="function"?reportError:function(k){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var U=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof k=="object"&&k!==null&&typeof k.message=="string"?String(k.message):String(k),error:k});if(!window.dispatchEvent(U))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",k);return}console.error(k)};function J(){}return Bt.Children={map:I,forEach:function(k,U,Z){I(k,function(){U.apply(this,arguments)},Z)},count:function(k){var U=0;return I(k,function(){U++}),U},toArray:function(k){return I(k,function(U){return U})||[]},only:function(k){if(!W(k))throw Error("React.Children.only expected to receive a single React element child.");return k}},Bt.Component=C,Bt.Fragment=e,Bt.Profiler=a,Bt.PureComponent=L,Bt.StrictMode=r,Bt.Suspense=h,Bt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=B,Bt.__COMPILER_RUNTIME={__proto__:null,c:function(k){return B.H.useMemoCache(k)}},Bt.cache=function(k){return function(){return k.apply(null,arguments)}},Bt.cloneElement=function(k,U,Z){if(k==null)throw Error("The argument must be a React element, but you passed "+k+".");var it=T({},k.props),lt=k.key,yt=void 0;if(U!=null)for(dt in U.ref!==void 0&&(yt=void 0),U.key!==void 0&&(lt=""+U.key),U)!_.call(U,dt)||dt==="key"||dt==="__self"||dt==="__source"||dt==="ref"&&U.ref===void 0||(it[dt]=U[dt]);var dt=arguments.length-2;if(dt===1)it.children=Z;else if(1<dt){for(var pt=Array(dt),mt=0;mt<dt;mt++)pt[mt]=arguments[mt+2];it.children=pt}return P(k.type,lt,void 0,void 0,yt,it)},Bt.createContext=function(k){return k={$$typeof:c,_currentValue:k,_currentValue2:k,_threadCount:0,Provider:null,Consumer:null},k.Provider=k,k.Consumer={$$typeof:l,_context:k},k},Bt.createElement=function(k,U,Z){var it,lt={},yt=null;if(U!=null)for(it in U.key!==void 0&&(yt=""+U.key),U)_.call(U,it)&&it!=="key"&&it!=="__self"&&it!=="__source"&&(lt[it]=U[it]);var dt=arguments.length-2;if(dt===1)lt.children=Z;else if(1<dt){for(var pt=Array(dt),mt=0;mt<dt;mt++)pt[mt]=arguments[mt+2];lt.children=pt}if(k&&k.defaultProps)for(it in dt=k.defaultProps,dt)lt[it]===void 0&&(lt[it]=dt[it]);return P(k,yt,void 0,void 0,null,lt)},Bt.createRef=function(){return{current:null}},Bt.forwardRef=function(k){return{$$typeof:d,render:k}},Bt.isValidElement=W,Bt.lazy=function(k){return{$$typeof:p,_payload:{_status:-1,_result:k},_init:z}},Bt.memo=function(k,U){return{$$typeof:g,type:k,compare:U===void 0?null:U}},Bt.startTransition=function(k){var U=B.T,Z={};B.T=Z;try{var it=k(),lt=B.S;lt!==null&&lt(Z,it),typeof it=="object"&&it!==null&&typeof it.then=="function"&&it.then(J,K)}catch(yt){K(yt)}finally{B.T=U}},Bt.unstable_useCacheRefresh=function(){return B.H.useCacheRefresh()},Bt.use=function(k){return B.H.use(k)},Bt.useActionState=function(k,U,Z){return B.H.useActionState(k,U,Z)},Bt.useCallback=function(k,U){return B.H.useCallback(k,U)},Bt.useContext=function(k){return B.H.useContext(k)},Bt.useDebugValue=function(){},Bt.useDeferredValue=function(k,U){return B.H.useDeferredValue(k,U)},Bt.useEffect=function(k,U,Z){var it=B.H;if(typeof Z=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return it.useEffect(k,U)},Bt.useId=function(){return B.H.useId()},Bt.useImperativeHandle=function(k,U,Z){return B.H.useImperativeHandle(k,U,Z)},Bt.useInsertionEffect=function(k,U){return B.H.useInsertionEffect(k,U)},Bt.useLayoutEffect=function(k,U){return B.H.useLayoutEffect(k,U)},Bt.useMemo=function(k,U){return B.H.useMemo(k,U)},Bt.useOptimistic=function(k,U){return B.H.useOptimistic(k,U)},Bt.useReducer=function(k,U,Z){return B.H.useReducer(k,U,Z)},Bt.useRef=function(k){return B.H.useRef(k)},Bt.useState=function(k){return B.H.useState(k)},Bt.useSyncExternalStore=function(k,U,Z){return B.H.useSyncExternalStore(k,U,Z)},Bt.useTransition=function(){return B.H.useTransition()},Bt.version="19.1.0",Bt}var Ab;function fc(){return Ab||(Ab=1,Um.exports=zN()),Um.exports}var qm={exports:{}},He={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Eb;function LN(){if(Eb)return He;Eb=1;var n=fc();function t(h){var g="https://react.dev/errors/"+h;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)g+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+h+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var r={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(h,g,p){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:w==null?null:""+w,children:h,containerInfo:g,implementation:p}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(h,g){if(h==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return He.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,He.createPortal=function(h,g){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(t(299));return l(h,g,null,p)},He.flushSync=function(h){var g=c.T,p=r.p;try{if(c.T=null,r.p=2,h)return h()}finally{c.T=g,r.p=p,r.d.f()}},He.preconnect=function(h,g){typeof h=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,r.d.C(h,g))},He.prefetchDNS=function(h){typeof h=="string"&&r.d.D(h)},He.preinit=function(h,g){if(typeof h=="string"&&g&&typeof g.as=="string"){var p=g.as,w=d(p,g.crossOrigin),v=typeof g.integrity=="string"?g.integrity:void 0,b=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;p==="style"?r.d.S(h,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:w,integrity:v,fetchPriority:b}):p==="script"&&r.d.X(h,{crossOrigin:w,integrity:v,fetchPriority:b,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},He.preinitModule=function(h,g){if(typeof h=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var p=d(g.as,g.crossOrigin);r.d.M(h,{crossOrigin:p,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&r.d.M(h)},He.preload=function(h,g){if(typeof h=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var p=g.as,w=d(p,g.crossOrigin);r.d.L(h,p,{crossOrigin:w,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},He.preloadModule=function(h,g){if(typeof h=="string")if(g){var p=d(g.as,g.crossOrigin);r.d.m(h,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:p,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else r.d.m(h)},He.requestFormReset=function(h){r.d.r(h)},He.unstable_batchedUpdates=function(h,g){return h(g)},He.useFormState=function(h,g,p){return c.H.useFormState(h,g,p)},He.useFormStatus=function(){return c.H.useHostTransitionStatus()},He.version="19.1.0",He}var Nb;function M1(){if(Nb)return qm.exports;Nb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),qm.exports=LN(),qm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cb;function _N(){if(Cb)return ku;Cb=1;var n=BN(),t=fc(),e=M1();function r(i){var s="https://react.dev/errors/"+i;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+i+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var s=i,o=i;if(i.alternate)for(;s.return;)s=s.return;else{i=s;do s=i,(s.flags&4098)!==0&&(o=s.return),i=s.return;while(i)}return s.tag===3?o:null}function c(i){if(i.tag===13){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function d(i){if(l(i)!==i)throw Error(r(188))}function h(i){var s=i.alternate;if(!s){if(s=l(i),s===null)throw Error(r(188));return s!==i?null:i}for(var o=i,u=s;;){var f=o.return;if(f===null)break;var m=f.alternate;if(m===null){if(u=f.return,u!==null){o=u;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===o)return d(f),i;if(m===u)return d(f),s;m=m.sibling}throw Error(r(188))}if(o.return!==u.return)o=f,u=m;else{for(var S=!1,E=f.child;E;){if(E===o){S=!0,o=f,u=m;break}if(E===u){S=!0,u=f,o=m;break}E=E.sibling}if(!S){for(E=m.child;E;){if(E===o){S=!0,o=m,u=f;break}if(E===u){S=!0,u=m,o=f;break}E=E.sibling}if(!S)throw Error(r(189))}}if(o.alternate!==u)throw Error(r(190))}if(o.tag!==3)throw Error(r(188));return o.stateNode.current===o?i:s}function g(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i;for(i=i.child;i!==null;){if(s=g(i),s!==null)return s;i=i.sibling}return null}var p=Object.assign,w=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),D=Symbol.for("react.provider"),L=Symbol.for("react.consumer"),N=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),B=Symbol.for("react.suspense"),_=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),V=Symbol.for("react.lazy"),W=Symbol.for("react.activity"),ft=Symbol.for("react.memo_cache_sentinel"),nt=Symbol.iterator;function rt(i){return i===null||typeof i!="object"?null:(i=nt&&i[nt]||i["@@iterator"],typeof i=="function"?i:null)}var ot=Symbol.for("react.client.reference");function M(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===ot?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case T:return"Fragment";case C:return"Profiler";case A:return"StrictMode";case B:return"Suspense";case _:return"SuspenseList";case W:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case b:return"Portal";case N:return(i.displayName||"Context")+".Provider";case L:return(i._context.displayName||"Context")+".Consumer";case O:var s=i.render;return i=i.displayName,i||(i=s.displayName||s.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case P:return s=i.displayName||null,s!==null?s:M(i.type)||"Memo";case V:s=i._payload,i=i._init;try{return M(i(s))}catch{}}return null}var Y=Array.isArray,I=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,z=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K={pending:!1,data:null,method:null,action:null},J=[],k=-1;function U(i){return{current:i}}function Z(i){0>k||(i.current=J[k],J[k]=null,k--)}function it(i,s){k++,J[k]=i.current,i.current=s}var lt=U(null),yt=U(null),dt=U(null),pt=U(null);function mt(i,s){switch(it(dt,s),it(yt,i),it(lt,null),s.nodeType){case 9:case 11:i=(i=s.documentElement)&&(i=i.namespaceURI)?Kw(i):0;break;default:if(i=s.tagName,s=s.namespaceURI)s=Kw(s),i=Gw(s,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}Z(lt),it(lt,i)}function St(){Z(lt),Z(yt),Z(dt)}function Jt(i){i.memoizedState!==null&&it(pt,i);var s=lt.current,o=Gw(s,i.type);s!==o&&(it(yt,i),it(lt,o))}function Rt(i){yt.current===i&&(Z(lt),Z(yt)),pt.current===i&&(Z(pt),xu._currentValue=K)}var Nt=Object.prototype.hasOwnProperty,Ot=n.unstable_scheduleCallback,kt=n.unstable_cancelCallback,Zt=n.unstable_shouldYield,le=n.unstable_requestPaint,be=n.unstable_now,Is=n.unstable_getCurrentPriorityLevel,ya=n.unstable_ImmediatePriority,pa=n.unstable_UserBlockingPriority,Rr=n.unstable_NormalPriority,va=n.unstable_LowPriority,Os=n.unstable_IdlePriority,xl=n.log,io=n.unstable_setDisableYieldValue,bn=null,Ne=null;function Vn(i){if(typeof xl=="function"&&io(i),Ne&&typeof Ne.setStrictMode=="function")try{Ne.setStrictMode(bn,i)}catch{}}var Ke=Math.clz32?Math.clz32:xh,Tl=Math.log,Sh=Math.LN2;function xh(i){return i>>>=0,i===0?32:31-(Tl(i)/Sh|0)|0}var so=256,ao=4194304;function Br(i){var s=i&42;if(s!==0)return s;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function oo(i,s,o){var u=i.pendingLanes;if(u===0)return 0;var f=0,m=i.suspendedLanes,S=i.pingedLanes;i=i.warmLanes;var E=u&134217727;return E!==0?(u=E&~m,u!==0?f=Br(u):(S&=E,S!==0?f=Br(S):o||(o=E&~i,o!==0&&(f=Br(o))))):(E=u&~m,E!==0?f=Br(E):S!==0?f=Br(S):o||(o=u&~i,o!==0&&(f=Br(o)))),f===0?0:s!==0&&s!==f&&(s&m)===0&&(m=f&-f,o=s&-s,m>=o||m===32&&(o&4194048)!==0)?s:f}function wa(i,s){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&s)===0}function Th(i,s){switch(i){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Sc(){var i=so;return so<<=1,(so&4194048)===0&&(so=256),i}function xc(){var i=ao;return ao<<=1,(ao&62914560)===0&&(ao=4194304),i}function Al(i){for(var s=[],o=0;31>o;o++)s.push(i);return s}function ba(i,s){i.pendingLanes|=s,s!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Ah(i,s,o,u,f,m){var S=i.pendingLanes;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=o,i.entangledLanes&=o,i.errorRecoveryDisabledLanes&=o,i.shellSuspendCounter=0;var E=i.entanglements,R=i.expirationTimes,X=i.hiddenUpdates;for(o=S&~o;0<o;){var at=31-Ke(o),ct=1<<at;E[at]=0,R[at]=-1;var F=X[at];if(F!==null)for(X[at]=null,at=0;at<F.length;at++){var Q=F[at];Q!==null&&(Q.lane&=-536870913)}o&=~ct}u!==0&&Tc(i,u,0),m!==0&&f===0&&i.tag!==0&&(i.suspendedLanes|=m&~(S&~s))}function Tc(i,s,o){i.pendingLanes|=s,i.suspendedLanes&=~s;var u=31-Ke(s);i.entangledLanes|=s,i.entanglements[u]=i.entanglements[u]|1073741824|o&4194090}function El(i,s){var o=i.entangledLanes|=s;for(i=i.entanglements;o;){var u=31-Ke(o),f=1<<u;f&s|i[u]&s&&(i[u]|=s),o&=~f}}function Nl(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Cl(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Ac(){var i=z.p;return i!==0?i:(i=window.event,i===void 0?32:hb(i.type))}function Eh(i,s){var o=z.p;try{return z.p=i,s()}finally{z.p=o}}var lr=Math.random().toString(36).slice(2),Oe="__reactFiber$"+lr,Je="__reactProps$"+lr,Ms="__reactContainer$"+lr,kl="__reactEvents$"+lr,Nh="__reactListeners$"+lr,Ch="__reactHandles$"+lr,Ec="__reactResources$"+lr,Sa="__reactMarker$"+lr;function Dl(i){delete i[Oe],delete i[Je],delete i[kl],delete i[Nh],delete i[Ch]}function Rs(i){var s=i[Oe];if(s)return s;for(var o=i.parentNode;o;){if(s=o[Ms]||o[Oe]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(i=Qw(i);i!==null;){if(o=i[Oe])return o;i=Qw(i)}return s}i=o,o=i.parentNode}return null}function zr(i){if(i=i[Oe]||i[Ms]){var s=i.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return i}return null}function Bs(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i.stateNode;throw Error(r(33))}function Lr(i){var s=i[Ec];return s||(s=i[Ec]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Se(i){i[Sa]=!0}var Nc=new Set,Cc={};function _r(i,s){zs(i,s),zs(i+"Capture",s)}function zs(i,s){for(Cc[i]=s,i=0;i<s.length;i++)Nc.add(s[i])}var kh=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Il={},kc={};function Dh(i){return Nt.call(kc,i)?!0:Nt.call(Il,i)?!1:kh.test(i)?kc[i]=!0:(Il[i]=!0,!1)}function lo(i,s,o){if(Dh(s))if(o===null)i.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":i.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){i.removeAttribute(s);return}}i.setAttribute(s,""+o)}}function uo(i,s,o){if(o===null)i.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(s);return}i.setAttribute(s,""+o)}}function jn(i,s,o,u){if(u===null)i.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(o);return}i.setAttributeNS(s,o,""+u)}}var Ol,Dc;function Ur(i){if(Ol===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);Ol=s&&s[1]||"",Dc=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ol+i+Dc}var Ml=!1;function Rl(i,s){if(!i||Ml)return"";Ml=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var ct=function(){throw Error()};if(Object.defineProperty(ct.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ct,[])}catch(Q){var F=Q}Reflect.construct(i,[],ct)}else{try{ct.call()}catch(Q){F=Q}i.call(ct.prototype)}}else{try{throw Error()}catch(Q){F=Q}(ct=i())&&typeof ct.catch=="function"&&ct.catch(function(){})}}catch(Q){if(Q&&F&&typeof Q.stack=="string")return[Q.stack,F.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=u.DetermineComponentFrameRoot(),S=m[0],E=m[1];if(S&&E){var R=S.split(`
`),X=E.split(`
`);for(f=u=0;u<R.length&&!R[u].includes("DetermineComponentFrameRoot");)u++;for(;f<X.length&&!X[f].includes("DetermineComponentFrameRoot");)f++;if(u===R.length||f===X.length)for(u=R.length-1,f=X.length-1;1<=u&&0<=f&&R[u]!==X[f];)f--;for(;1<=u&&0<=f;u--,f--)if(R[u]!==X[f]){if(u!==1||f!==1)do if(u--,f--,0>f||R[u]!==X[f]){var at=`
`+R[u].replace(" at new "," at ");return i.displayName&&at.includes("<anonymous>")&&(at=at.replace("<anonymous>",i.displayName)),at}while(1<=u&&0<=f);break}}}finally{Ml=!1,Error.prepareStackTrace=o}return(o=i?i.displayName||i.name:"")?Ur(o):""}function Ih(i){switch(i.tag){case 26:case 27:case 5:return Ur(i.type);case 16:return Ur("Lazy");case 13:return Ur("Suspense");case 19:return Ur("SuspenseList");case 0:case 15:return Rl(i.type,!1);case 11:return Rl(i.type.render,!1);case 1:return Rl(i.type,!0);case 31:return Ur("Activity");default:return""}}function Ic(i){try{var s="";do s+=Ih(i),i=i.return;while(i);return s}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function Xe(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Oc(i){var s=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Oh(i){var s=Oc(i)?"checked":"value",o=Object.getOwnPropertyDescriptor(i.constructor.prototype,s),u=""+i[s];if(!i.hasOwnProperty(s)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var f=o.get,m=o.set;return Object.defineProperty(i,s,{configurable:!0,get:function(){return f.call(this)},set:function(S){u=""+S,m.call(this,S)}}),Object.defineProperty(i,s,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(S){u=""+S},stopTracking:function(){i._valueTracker=null,delete i[s]}}}}function co(i){i._valueTracker||(i._valueTracker=Oh(i))}function xa(i){if(!i)return!1;var s=i._valueTracker;if(!s)return!0;var o=s.getValue(),u="";return i&&(u=Oc(i)?i.checked?"true":"false":i.value),i=u,i!==o?(s.setValue(i),!0):!1}function fo(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Mh=/[\n"\\]/g;function Fe(i){return i.replace(Mh,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Ta(i,s,o,u,f,m,S,E){i.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?i.type=S:i.removeAttribute("type"),s!=null?S==="number"?(s===0&&i.value===""||i.value!=s)&&(i.value=""+Xe(s)):i.value!==""+Xe(s)&&(i.value=""+Xe(s)):S!=="submit"&&S!=="reset"||i.removeAttribute("value"),s!=null?Bl(i,S,Xe(s)):o!=null?Bl(i,S,Xe(o)):u!=null&&i.removeAttribute("value"),f==null&&m!=null&&(i.defaultChecked=!!m),f!=null&&(i.checked=f&&typeof f!="function"&&typeof f!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?i.name=""+Xe(E):i.removeAttribute("name")}function Mc(i,s,o,u,f,m,S,E){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(i.type=m),s!=null||o!=null){if(!(m!=="submit"&&m!=="reset"||s!=null))return;o=o!=null?""+Xe(o):"",s=s!=null?""+Xe(s):o,E||s===i.value||(i.value=s),i.defaultValue=s}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,i.checked=E?i.checked:!!u,i.defaultChecked=!!u,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(i.name=S)}function Bl(i,s,o){s==="number"&&fo(i.ownerDocument)===i||i.defaultValue===""+o||(i.defaultValue=""+o)}function qr(i,s,o,u){if(i=i.options,s){s={};for(var f=0;f<o.length;f++)s["$"+o[f]]=!0;for(o=0;o<i.length;o++)f=s.hasOwnProperty("$"+i[o].value),i[o].selected!==f&&(i[o].selected=f),f&&u&&(i[o].defaultSelected=!0)}else{for(o=""+Xe(o),s=null,f=0;f<i.length;f++){if(i[f].value===o){i[f].selected=!0,u&&(i[f].defaultSelected=!0);return}s!==null||i[f].disabled||(s=i[f])}s!==null&&(s.selected=!0)}}function jp(i,s,o){if(s!=null&&(s=""+Xe(s),s!==i.value&&(i.value=s),o==null)){i.defaultValue!==s&&(i.defaultValue=s);return}i.defaultValue=o!=null?""+Xe(o):""}function Yp(i,s,o,u){if(s==null){if(u!=null){if(o!=null)throw Error(r(92));if(Y(u)){if(1<u.length)throw Error(r(93));u=u[0]}o=u}o==null&&(o=""),s=o}o=Xe(s),i.defaultValue=o,u=i.textContent,u===o&&u!==""&&u!==null&&(i.value=u)}function ho(i,s){if(s){var o=i.firstChild;if(o&&o===i.lastChild&&o.nodeType===3){o.nodeValue=s;return}}i.textContent=s}var NA=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Kp(i,s,o){var u=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?i.setProperty(s,""):s==="float"?i.cssFloat="":i[s]="":u?i.setProperty(s,o):typeof o!="number"||o===0||NA.has(s)?s==="float"?i.cssFloat=o:i[s]=(""+o).trim():i[s]=o+"px"}function Gp(i,s,o){if(s!=null&&typeof s!="object")throw Error(r(62));if(i=i.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?i.setProperty(u,""):u==="float"?i.cssFloat="":i[u]="");for(var f in s)u=s[f],s.hasOwnProperty(f)&&o[f]!==u&&Kp(i,f,u)}else for(var m in s)s.hasOwnProperty(m)&&Kp(i,m,s[m])}function Rh(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var CA=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),kA=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Rc(i){return kA.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var Bh=null;function zh(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var go=null,mo=null;function Xp(i){var s=zr(i);if(s&&(i=s.stateNode)){var o=i[Je]||null;t:switch(i=s.stateNode,s.type){case"input":if(Ta(i,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=i;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Fe(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var u=o[s];if(u!==i&&u.form===i.form){var f=u[Je]||null;if(!f)throw Error(r(90));Ta(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(s=0;s<o.length;s++)u=o[s],u.form===i.form&&xa(u)}break t;case"textarea":jp(i,o.value,o.defaultValue);break t;case"select":s=o.value,s!=null&&qr(i,!!o.multiple,s,!1)}}}var Lh=!1;function Fp(i,s,o){if(Lh)return i(s,o);Lh=!0;try{var u=i(s);return u}finally{if(Lh=!1,(go!==null||mo!==null)&&(wf(),go&&(s=go,i=mo,mo=go=null,Xp(s),i)))for(s=0;s<i.length;s++)Xp(i[s])}}function zl(i,s){var o=i.stateNode;if(o===null)return null;var u=o[Je]||null;if(u===null)return null;o=u[s];t:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(i=i.type,u=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!u;break t;default:i=!1}if(i)return null;if(o&&typeof o!="function")throw Error(r(231,s,typeof o));return o}var Pr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_h=!1;if(Pr)try{var Ll={};Object.defineProperty(Ll,"passive",{get:function(){_h=!0}}),window.addEventListener("test",Ll,Ll),window.removeEventListener("test",Ll,Ll)}catch{_h=!1}var Ls=null,Uh=null,Bc=null;function Zp(){if(Bc)return Bc;var i,s=Uh,o=s.length,u,f="value"in Ls?Ls.value:Ls.textContent,m=f.length;for(i=0;i<o&&s[i]===f[i];i++);var S=o-i;for(u=1;u<=S&&s[o-u]===f[m-u];u++);return Bc=f.slice(i,1<u?1-u:void 0)}function zc(i){var s=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&s===13&&(i=13)):i=s,i===10&&(i=13),32<=i||i===13?i:0}function Lc(){return!0}function Qp(){return!1}function Ze(i){function s(o,u,f,m,S){this._reactName=o,this._targetInst=f,this.type=u,this.nativeEvent=m,this.target=S,this.currentTarget=null;for(var E in i)i.hasOwnProperty(E)&&(o=i[E],this[E]=o?o(m):m[E]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Lc:Qp,this.isPropagationStopped=Qp,this}return p(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Lc)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Lc)},persist:function(){},isPersistent:Lc}),s}var Aa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_c=Ze(Aa),_l=p({},Aa,{view:0,detail:0}),DA=Ze(_l),qh,Ph,Ul,Uc=p({},_l,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$h,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Ul&&(Ul&&i.type==="mousemove"?(qh=i.screenX-Ul.screenX,Ph=i.screenY-Ul.screenY):Ph=qh=0,Ul=i),qh)},movementY:function(i){return"movementY"in i?i.movementY:Ph}}),Wp=Ze(Uc),IA=p({},Uc,{dataTransfer:0}),OA=Ze(IA),MA=p({},_l,{relatedTarget:0}),Jh=Ze(MA),RA=p({},Aa,{animationName:0,elapsedTime:0,pseudoElement:0}),BA=Ze(RA),zA=p({},Aa,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),LA=Ze(zA),_A=p({},Aa,{data:0}),t0=Ze(_A),UA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},PA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function JA(i){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(i):(i=PA[i])?!!s[i]:!1}function $h(){return JA}var $A=p({},_l,{key:function(i){if(i.key){var s=UA[i.key]||i.key;if(s!=="Unidentified")return s}return i.type==="keypress"?(i=zc(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?qA[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$h,charCode:function(i){return i.type==="keypress"?zc(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?zc(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),HA=Ze($A),VA=p({},Uc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),e0=Ze(VA),jA=p({},_l,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$h}),YA=Ze(jA),KA=p({},Aa,{propertyName:0,elapsedTime:0,pseudoElement:0}),GA=Ze(KA),XA=p({},Uc,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),FA=Ze(XA),ZA=p({},Aa,{newState:0,oldState:0}),QA=Ze(ZA),WA=[9,13,27,32],Hh=Pr&&"CompositionEvent"in window,ql=null;Pr&&"documentMode"in document&&(ql=document.documentMode);var tE=Pr&&"TextEvent"in window&&!ql,n0=Pr&&(!Hh||ql&&8<ql&&11>=ql),r0=" ",i0=!1;function s0(i,s){switch(i){case"keyup":return WA.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function a0(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var yo=!1;function eE(i,s){switch(i){case"compositionend":return a0(s);case"keypress":return s.which!==32?null:(i0=!0,r0);case"textInput":return i=s.data,i===r0&&i0?null:i;default:return null}}function nE(i,s){if(yo)return i==="compositionend"||!Hh&&s0(i,s)?(i=Zp(),Bc=Uh=Ls=null,yo=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return n0&&s.locale!=="ko"?null:s.data;default:return null}}var rE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function o0(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s==="input"?!!rE[i.type]:s==="textarea"}function l0(i,s,o,u){go?mo?mo.push(u):mo=[u]:go=u,s=Ef(s,"onChange"),0<s.length&&(o=new _c("onChange","change",null,o,u),i.push({event:o,listeners:s}))}var Pl=null,Jl=null;function iE(i){$w(i,0)}function qc(i){var s=Bs(i);if(xa(s))return i}function u0(i,s){if(i==="change")return s}var c0=!1;if(Pr){var Vh;if(Pr){var jh="oninput"in document;if(!jh){var f0=document.createElement("div");f0.setAttribute("oninput","return;"),jh=typeof f0.oninput=="function"}Vh=jh}else Vh=!1;c0=Vh&&(!document.documentMode||9<document.documentMode)}function d0(){Pl&&(Pl.detachEvent("onpropertychange",h0),Jl=Pl=null)}function h0(i){if(i.propertyName==="value"&&qc(Jl)){var s=[];l0(s,Jl,i,zh(i)),Fp(iE,s)}}function sE(i,s,o){i==="focusin"?(d0(),Pl=s,Jl=o,Pl.attachEvent("onpropertychange",h0)):i==="focusout"&&d0()}function aE(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return qc(Jl)}function oE(i,s){if(i==="click")return qc(s)}function lE(i,s){if(i==="input"||i==="change")return qc(s)}function uE(i,s){return i===s&&(i!==0||1/i===1/s)||i!==i&&s!==s}var on=typeof Object.is=="function"?Object.is:uE;function $l(i,s){if(on(i,s))return!0;if(typeof i!="object"||i===null||typeof s!="object"||s===null)return!1;var o=Object.keys(i),u=Object.keys(s);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var f=o[u];if(!Nt.call(s,f)||!on(i[f],s[f]))return!1}return!0}function g0(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function m0(i,s){var o=g0(i);i=0;for(var u;o;){if(o.nodeType===3){if(u=i+o.textContent.length,i<=s&&u>=s)return{node:o,offset:s-i};i=u}t:{for(;o;){if(o.nextSibling){o=o.nextSibling;break t}o=o.parentNode}o=void 0}o=g0(o)}}function y0(i,s){return i&&s?i===s?!0:i&&i.nodeType===3?!1:s&&s.nodeType===3?y0(i,s.parentNode):"contains"in i?i.contains(s):i.compareDocumentPosition?!!(i.compareDocumentPosition(s)&16):!1:!1}function p0(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var s=fo(i.document);s instanceof i.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)i=s.contentWindow;else break;s=fo(i.document)}return s}function Yh(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s&&(s==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||s==="textarea"||i.contentEditable==="true")}var cE=Pr&&"documentMode"in document&&11>=document.documentMode,po=null,Kh=null,Hl=null,Gh=!1;function v0(i,s,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Gh||po==null||po!==fo(u)||(u=po,"selectionStart"in u&&Yh(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Hl&&$l(Hl,u)||(Hl=u,u=Ef(Kh,"onSelect"),0<u.length&&(s=new _c("onSelect","select",null,s,o),i.push({event:s,listeners:u}),s.target=po)))}function Ea(i,s){var o={};return o[i.toLowerCase()]=s.toLowerCase(),o["Webkit"+i]="webkit"+s,o["Moz"+i]="moz"+s,o}var vo={animationend:Ea("Animation","AnimationEnd"),animationiteration:Ea("Animation","AnimationIteration"),animationstart:Ea("Animation","AnimationStart"),transitionrun:Ea("Transition","TransitionRun"),transitionstart:Ea("Transition","TransitionStart"),transitioncancel:Ea("Transition","TransitionCancel"),transitionend:Ea("Transition","TransitionEnd")},Xh={},w0={};Pr&&(w0=document.createElement("div").style,"AnimationEvent"in window||(delete vo.animationend.animation,delete vo.animationiteration.animation,delete vo.animationstart.animation),"TransitionEvent"in window||delete vo.transitionend.transition);function Na(i){if(Xh[i])return Xh[i];if(!vo[i])return i;var s=vo[i],o;for(o in s)if(s.hasOwnProperty(o)&&o in w0)return Xh[i]=s[o];return i}var b0=Na("animationend"),S0=Na("animationiteration"),x0=Na("animationstart"),fE=Na("transitionrun"),dE=Na("transitionstart"),hE=Na("transitioncancel"),T0=Na("transitionend"),A0=new Map,Fh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Fh.push("scrollEnd");function Yn(i,s){A0.set(i,s),_r(s,[i])}var E0=new WeakMap;function Sn(i,s){if(typeof i=="object"&&i!==null){var o=E0.get(i);return o!==void 0?o:(s={value:i,source:s,stack:Ic(s)},E0.set(i,s),s)}return{value:i,source:s,stack:Ic(s)}}var xn=[],wo=0,Zh=0;function Pc(){for(var i=wo,s=Zh=wo=0;s<i;){var o=xn[s];xn[s++]=null;var u=xn[s];xn[s++]=null;var f=xn[s];xn[s++]=null;var m=xn[s];if(xn[s++]=null,u!==null&&f!==null){var S=u.pending;S===null?f.next=f:(f.next=S.next,S.next=f),u.pending=f}m!==0&&N0(o,f,m)}}function Jc(i,s,o,u){xn[wo++]=i,xn[wo++]=s,xn[wo++]=o,xn[wo++]=u,Zh|=u,i.lanes|=u,i=i.alternate,i!==null&&(i.lanes|=u)}function Qh(i,s,o,u){return Jc(i,s,o,u),$c(i)}function bo(i,s){return Jc(i,null,null,s),$c(i)}function N0(i,s,o){i.lanes|=o;var u=i.alternate;u!==null&&(u.lanes|=o);for(var f=!1,m=i.return;m!==null;)m.childLanes|=o,u=m.alternate,u!==null&&(u.childLanes|=o),m.tag===22&&(i=m.stateNode,i===null||i._visibility&1||(f=!0)),i=m,m=m.return;return i.tag===3?(m=i.stateNode,f&&s!==null&&(f=31-Ke(o),i=m.hiddenUpdates,u=i[f],u===null?i[f]=[s]:u.push(s),s.lane=o|536870912),m):null}function $c(i){if(50<gu)throw gu=0,im=null,Error(r(185));for(var s=i.return;s!==null;)i=s,s=i.return;return i.tag===3?i.stateNode:null}var So={};function gE(i,s,o,u){this.tag=i,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ln(i,s,o,u){return new gE(i,s,o,u)}function Wh(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Jr(i,s){var o=i.alternate;return o===null?(o=ln(i.tag,s,i.key,i.mode),o.elementType=i.elementType,o.type=i.type,o.stateNode=i.stateNode,o.alternate=i,i.alternate=o):(o.pendingProps=s,o.type=i.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=i.flags&65011712,o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,s=i.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=i.sibling,o.index=i.index,o.ref=i.ref,o.refCleanup=i.refCleanup,o}function C0(i,s){i.flags&=65011714;var o=i.alternate;return o===null?(i.childLanes=0,i.lanes=s,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,s=o.dependencies,i.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),i}function Hc(i,s,o,u,f,m){var S=0;if(u=i,typeof i=="function")Wh(i)&&(S=1);else if(typeof i=="string")S=yN(i,o,lt.current)?26:i==="html"||i==="head"||i==="body"?27:5;else t:switch(i){case W:return i=ln(31,o,s,f),i.elementType=W,i.lanes=m,i;case T:return Ca(o.children,f,m,s);case A:S=8,f|=24;break;case C:return i=ln(12,o,s,f|2),i.elementType=C,i.lanes=m,i;case B:return i=ln(13,o,s,f),i.elementType=B,i.lanes=m,i;case _:return i=ln(19,o,s,f),i.elementType=_,i.lanes=m,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case D:case N:S=10;break t;case L:S=9;break t;case O:S=11;break t;case P:S=14;break t;case V:S=16,u=null;break t}S=29,o=Error(r(130,i===null?"null":typeof i,"")),u=null}return s=ln(S,o,s,f),s.elementType=i,s.type=u,s.lanes=m,s}function Ca(i,s,o,u){return i=ln(7,i,u,s),i.lanes=o,i}function tg(i,s,o){return i=ln(6,i,null,s),i.lanes=o,i}function eg(i,s,o){return s=ln(4,i.children!==null?i.children:[],i.key,s),s.lanes=o,s.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},s}var xo=[],To=0,Vc=null,jc=0,Tn=[],An=0,ka=null,$r=1,Hr="";function Da(i,s){xo[To++]=jc,xo[To++]=Vc,Vc=i,jc=s}function k0(i,s,o){Tn[An++]=$r,Tn[An++]=Hr,Tn[An++]=ka,ka=i;var u=$r;i=Hr;var f=32-Ke(u)-1;u&=~(1<<f),o+=1;var m=32-Ke(s)+f;if(30<m){var S=f-f%5;m=(u&(1<<S)-1).toString(32),u>>=S,f-=S,$r=1<<32-Ke(s)+f|o<<f|u,Hr=m+i}else $r=1<<m|o<<f|u,Hr=i}function ng(i){i.return!==null&&(Da(i,1),k0(i,1,0))}function rg(i){for(;i===Vc;)Vc=xo[--To],xo[To]=null,jc=xo[--To],xo[To]=null;for(;i===ka;)ka=Tn[--An],Tn[An]=null,Hr=Tn[--An],Tn[An]=null,$r=Tn[--An],Tn[An]=null}var Ge=null,de=null,Kt=!1,Ia=null,ur=!1,ig=Error(r(519));function Oa(i){var s=Error(r(418,""));throw Yl(Sn(s,i)),ig}function D0(i){var s=i.stateNode,o=i.type,u=i.memoizedProps;switch(s[Oe]=i,s[Je]=u,o){case"dialog":Ut("cancel",s),Ut("close",s);break;case"iframe":case"object":case"embed":Ut("load",s);break;case"video":case"audio":for(o=0;o<yu.length;o++)Ut(yu[o],s);break;case"source":Ut("error",s);break;case"img":case"image":case"link":Ut("error",s),Ut("load",s);break;case"details":Ut("toggle",s);break;case"input":Ut("invalid",s),Mc(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),co(s);break;case"select":Ut("invalid",s);break;case"textarea":Ut("invalid",s),Yp(s,u.value,u.defaultValue,u.children),co(s)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||u.suppressHydrationWarning===!0||Yw(s.textContent,o)?(u.popover!=null&&(Ut("beforetoggle",s),Ut("toggle",s)),u.onScroll!=null&&Ut("scroll",s),u.onScrollEnd!=null&&Ut("scrollend",s),u.onClick!=null&&(s.onclick=Nf),s=!0):s=!1,s||Oa(i)}function I0(i){for(Ge=i.return;Ge;)switch(Ge.tag){case 5:case 13:ur=!1;return;case 27:case 3:ur=!0;return;default:Ge=Ge.return}}function Vl(i){if(i!==Ge)return!1;if(!Kt)return I0(i),Kt=!0,!1;var s=i.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=i.type,o=!(o!=="form"&&o!=="button")||bm(i.type,i.memoizedProps)),o=!o),o&&de&&Oa(i),I0(i),s===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));t:{for(i=i.nextSibling,s=0;i;){if(i.nodeType===8)if(o=i.data,o==="/$"){if(s===0){de=Gn(i.nextSibling);break t}s--}else o!=="$"&&o!=="$!"&&o!=="$?"||s++;i=i.nextSibling}de=null}}else s===27?(s=de,Qs(i.type)?(i=Am,Am=null,de=i):de=s):de=Ge?Gn(i.stateNode.nextSibling):null;return!0}function jl(){de=Ge=null,Kt=!1}function O0(){var i=Ia;return i!==null&&(tn===null?tn=i:tn.push.apply(tn,i),Ia=null),i}function Yl(i){Ia===null?Ia=[i]:Ia.push(i)}var sg=U(null),Ma=null,Vr=null;function _s(i,s,o){it(sg,s._currentValue),s._currentValue=o}function jr(i){i._currentValue=sg.current,Z(sg)}function ag(i,s,o){for(;i!==null;){var u=i.alternate;if((i.childLanes&s)!==s?(i.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),i===o)break;i=i.return}}function og(i,s,o,u){var f=i.child;for(f!==null&&(f.return=i);f!==null;){var m=f.dependencies;if(m!==null){var S=f.child;m=m.firstContext;t:for(;m!==null;){var E=m;m=f;for(var R=0;R<s.length;R++)if(E.context===s[R]){m.lanes|=o,E=m.alternate,E!==null&&(E.lanes|=o),ag(m.return,o,i),u||(S=null);break t}m=E.next}}else if(f.tag===18){if(S=f.return,S===null)throw Error(r(341));S.lanes|=o,m=S.alternate,m!==null&&(m.lanes|=o),ag(S,o,i),S=null}else S=f.child;if(S!==null)S.return=f;else for(S=f;S!==null;){if(S===i){S=null;break}if(f=S.sibling,f!==null){f.return=S.return,S=f;break}S=S.return}f=S}}function Kl(i,s,o,u){i=null;for(var f=s,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var S=f.alternate;if(S===null)throw Error(r(387));if(S=S.memoizedProps,S!==null){var E=f.type;on(f.pendingProps.value,S.value)||(i!==null?i.push(E):i=[E])}}else if(f===pt.current){if(S=f.alternate,S===null)throw Error(r(387));S.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(i!==null?i.push(xu):i=[xu])}f=f.return}i!==null&&og(s,i,o,u),s.flags|=262144}function Yc(i){for(i=i.firstContext;i!==null;){if(!on(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Ra(i){Ma=i,Vr=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function $e(i){return M0(Ma,i)}function Kc(i,s){return Ma===null&&Ra(i),M0(i,s)}function M0(i,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},Vr===null){if(i===null)throw Error(r(308));Vr=s,i.dependencies={lanes:0,firstContext:s},i.flags|=524288}else Vr=Vr.next=s;return o}var mE=typeof AbortController<"u"?AbortController:function(){var i=[],s=this.signal={aborted:!1,addEventListener:function(o,u){i.push(u)}};this.abort=function(){s.aborted=!0,i.forEach(function(o){return o()})}},yE=n.unstable_scheduleCallback,pE=n.unstable_NormalPriority,Ce={$$typeof:N,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function lg(){return{controller:new mE,data:new Map,refCount:0}}function Gl(i){i.refCount--,i.refCount===0&&yE(pE,function(){i.controller.abort()})}var Xl=null,ug=0,Ao=0,Eo=null;function vE(i,s){if(Xl===null){var o=Xl=[];ug=0,Ao=fm(),Eo={status:"pending",value:void 0,then:function(u){o.push(u)}}}return ug++,s.then(R0,R0),s}function R0(){if(--ug===0&&Xl!==null){Eo!==null&&(Eo.status="fulfilled");var i=Xl;Xl=null,Ao=0,Eo=null;for(var s=0;s<i.length;s++)(0,i[s])()}}function wE(i,s){var o=[],u={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return i.then(function(){u.status="fulfilled",u.value=s;for(var f=0;f<o.length;f++)(0,o[f])(s)},function(f){for(u.status="rejected",u.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),u}var B0=I.S;I.S=function(i,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&vE(i,s),B0!==null&&B0(i,s)};var Ba=U(null);function cg(){var i=Ba.current;return i!==null?i:ie.pooledCache}function Gc(i,s){s===null?it(Ba,Ba.current):it(Ba,s.pool)}function z0(){var i=cg();return i===null?null:{parent:Ce._currentValue,pool:i}}var Fl=Error(r(460)),L0=Error(r(474)),Xc=Error(r(542)),fg={then:function(){}};function _0(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Fc(){}function U0(i,s,o){switch(o=i[o],o===void 0?i.push(s):o!==s&&(s.then(Fc,Fc),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,P0(i),i;default:if(typeof s.status=="string")s.then(Fc,Fc);else{if(i=ie,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=s,i.status="pending",i.then(function(u){if(s.status==="pending"){var f=s;f.status="fulfilled",f.value=u}},function(u){if(s.status==="pending"){var f=s;f.status="rejected",f.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,P0(i),i}throw Zl=s,Fl}}var Zl=null;function q0(){if(Zl===null)throw Error(r(459));var i=Zl;return Zl=null,i}function P0(i){if(i===Fl||i===Xc)throw Error(r(483))}var Us=!1;function dg(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function hg(i,s){i=i.updateQueue,s.updateQueue===i&&(s.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function qs(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Ps(i,s,o){var u=i.updateQueue;if(u===null)return null;if(u=u.shared,(Xt&2)!==0){var f=u.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),u.pending=s,s=$c(i),N0(i,null,o),s}return Jc(i,u,s,o),$c(i)}function Ql(i,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var u=s.lanes;u&=i.pendingLanes,o|=u,s.lanes=o,El(i,o)}}function gg(i,s){var o=i.updateQueue,u=i.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var f=null,m=null;if(o=o.firstBaseUpdate,o!==null){do{var S={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};m===null?f=m=S:m=m.next=S,o=o.next}while(o!==null);m===null?f=m=s:m=m.next=s}else f=m=s;o={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:u.shared,callbacks:u.callbacks},i.updateQueue=o;return}i=o.lastBaseUpdate,i===null?o.firstBaseUpdate=s:i.next=s,o.lastBaseUpdate=s}var mg=!1;function Wl(){if(mg){var i=Eo;if(i!==null)throw i}}function tu(i,s,o,u){mg=!1;var f=i.updateQueue;Us=!1;var m=f.firstBaseUpdate,S=f.lastBaseUpdate,E=f.shared.pending;if(E!==null){f.shared.pending=null;var R=E,X=R.next;R.next=null,S===null?m=X:S.next=X,S=R;var at=i.alternate;at!==null&&(at=at.updateQueue,E=at.lastBaseUpdate,E!==S&&(E===null?at.firstBaseUpdate=X:E.next=X,at.lastBaseUpdate=R))}if(m!==null){var ct=f.baseState;S=0,at=X=R=null,E=m;do{var F=E.lane&-536870913,Q=F!==E.lane;if(Q?(Ht&F)===F:(u&F)===F){F!==0&&F===Ao&&(mg=!0),at!==null&&(at=at.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});t:{var It=i,Ct=E;F=s;var te=o;switch(Ct.tag){case 1:if(It=Ct.payload,typeof It=="function"){ct=It.call(te,ct,F);break t}ct=It;break t;case 3:It.flags=It.flags&-65537|128;case 0:if(It=Ct.payload,F=typeof It=="function"?It.call(te,ct,F):It,F==null)break t;ct=p({},ct,F);break t;case 2:Us=!0}}F=E.callback,F!==null&&(i.flags|=64,Q&&(i.flags|=8192),Q=f.callbacks,Q===null?f.callbacks=[F]:Q.push(F))}else Q={lane:F,tag:E.tag,payload:E.payload,callback:E.callback,next:null},at===null?(X=at=Q,R=ct):at=at.next=Q,S|=F;if(E=E.next,E===null){if(E=f.shared.pending,E===null)break;Q=E,E=Q.next,Q.next=null,f.lastBaseUpdate=Q,f.shared.pending=null}}while(!0);at===null&&(R=ct),f.baseState=R,f.firstBaseUpdate=X,f.lastBaseUpdate=at,m===null&&(f.shared.lanes=0),Gs|=S,i.lanes=S,i.memoizedState=ct}}function J0(i,s){if(typeof i!="function")throw Error(r(191,i));i.call(s)}function $0(i,s){var o=i.callbacks;if(o!==null)for(i.callbacks=null,i=0;i<o.length;i++)J0(o[i],s)}var No=U(null),Zc=U(0);function H0(i,s){i=Qr,it(Zc,i),it(No,s),Qr=i|s.baseLanes}function yg(){it(Zc,Qr),it(No,No.current)}function pg(){Qr=Zc.current,Z(No),Z(Zc)}var Js=0,zt=null,Qt=null,xe=null,Qc=!1,Co=!1,za=!1,Wc=0,eu=0,ko=null,bE=0;function ye(){throw Error(r(321))}function vg(i,s){if(s===null)return!1;for(var o=0;o<s.length&&o<i.length;o++)if(!on(i[o],s[o]))return!1;return!0}function wg(i,s,o,u,f,m){return Js=m,zt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,I.H=i===null||i.memoizedState===null?Nv:Cv,za=!1,m=o(u,f),za=!1,Co&&(m=j0(s,o,u,f)),V0(i),m}function V0(i){I.H=af;var s=Qt!==null&&Qt.next!==null;if(Js=0,xe=Qt=zt=null,Qc=!1,eu=0,ko=null,s)throw Error(r(300));i===null||Me||(i=i.dependencies,i!==null&&Yc(i)&&(Me=!0))}function j0(i,s,o,u){zt=i;var f=0;do{if(Co&&(ko=null),eu=0,Co=!1,25<=f)throw Error(r(301));if(f+=1,xe=Qt=null,i.updateQueue!=null){var m=i.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}I.H=CE,m=s(o,u)}while(Co);return m}function SE(){var i=I.H,s=i.useState()[0];return s=typeof s.then=="function"?nu(s):s,i=i.useState()[0],(Qt!==null?Qt.memoizedState:null)!==i&&(zt.flags|=1024),s}function bg(){var i=Wc!==0;return Wc=0,i}function Sg(i,s,o){s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~o}function xg(i){if(Qc){for(i=i.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}Qc=!1}Js=0,xe=Qt=zt=null,Co=!1,eu=Wc=0,ko=null}function Qe(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xe===null?zt.memoizedState=xe=i:xe=xe.next=i,xe}function Te(){if(Qt===null){var i=zt.alternate;i=i!==null?i.memoizedState:null}else i=Qt.next;var s=xe===null?zt.memoizedState:xe.next;if(s!==null)xe=s,Qt=i;else{if(i===null)throw zt.alternate===null?Error(r(467)):Error(r(310));Qt=i,i={memoizedState:Qt.memoizedState,baseState:Qt.baseState,baseQueue:Qt.baseQueue,queue:Qt.queue,next:null},xe===null?zt.memoizedState=xe=i:xe=xe.next=i}return xe}function Tg(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function nu(i){var s=eu;return eu+=1,ko===null&&(ko=[]),i=U0(ko,i,s),s=zt,(xe===null?s.memoizedState:xe.next)===null&&(s=s.alternate,I.H=s===null||s.memoizedState===null?Nv:Cv),i}function tf(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return nu(i);if(i.$$typeof===N)return $e(i)}throw Error(r(438,String(i)))}function Ag(i){var s=null,o=zt.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var u=zt.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(f){return f.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=Tg(),zt.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(i),u=0;u<i;u++)o[u]=ft;return s.index++,o}function Yr(i,s){return typeof s=="function"?s(i):s}function ef(i){var s=Te();return Eg(s,Qt,i)}function Eg(i,s,o){var u=i.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=o;var f=i.baseQueue,m=u.pending;if(m!==null){if(f!==null){var S=f.next;f.next=m.next,m.next=S}s.baseQueue=f=m,u.pending=null}if(m=i.baseState,f===null)i.memoizedState=m;else{s=f.next;var E=S=null,R=null,X=s,at=!1;do{var ct=X.lane&-536870913;if(ct!==X.lane?(Ht&ct)===ct:(Js&ct)===ct){var F=X.revertLane;if(F===0)R!==null&&(R=R.next={lane:0,revertLane:0,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),ct===Ao&&(at=!0);else if((Js&F)===F){X=X.next,F===Ao&&(at=!0);continue}else ct={lane:0,revertLane:X.revertLane,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},R===null?(E=R=ct,S=m):R=R.next=ct,zt.lanes|=F,Gs|=F;ct=X.action,za&&o(m,ct),m=X.hasEagerState?X.eagerState:o(m,ct)}else F={lane:ct,revertLane:X.revertLane,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},R===null?(E=R=F,S=m):R=R.next=F,zt.lanes|=ct,Gs|=ct;X=X.next}while(X!==null&&X!==s);if(R===null?S=m:R.next=E,!on(m,i.memoizedState)&&(Me=!0,at&&(o=Eo,o!==null)))throw o;i.memoizedState=m,i.baseState=S,i.baseQueue=R,u.lastRenderedState=m}return f===null&&(u.lanes=0),[i.memoizedState,u.dispatch]}function Ng(i){var s=Te(),o=s.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=i;var u=o.dispatch,f=o.pending,m=s.memoizedState;if(f!==null){o.pending=null;var S=f=f.next;do m=i(m,S.action),S=S.next;while(S!==f);on(m,s.memoizedState)||(Me=!0),s.memoizedState=m,s.baseQueue===null&&(s.baseState=m),o.lastRenderedState=m}return[m,u]}function Y0(i,s,o){var u=zt,f=Te(),m=Kt;if(m){if(o===void 0)throw Error(r(407));o=o()}else o=s();var S=!on((Qt||f).memoizedState,o);S&&(f.memoizedState=o,Me=!0),f=f.queue;var E=X0.bind(null,u,f,i);if(ru(2048,8,E,[i]),f.getSnapshot!==s||S||xe!==null&&xe.memoizedState.tag&1){if(u.flags|=2048,Do(9,nf(),G0.bind(null,u,f,o,s),null),ie===null)throw Error(r(349));m||(Js&124)!==0||K0(u,s,o)}return o}function K0(i,s,o){i.flags|=16384,i={getSnapshot:s,value:o},s=zt.updateQueue,s===null?(s=Tg(),zt.updateQueue=s,s.stores=[i]):(o=s.stores,o===null?s.stores=[i]:o.push(i))}function G0(i,s,o,u){s.value=o,s.getSnapshot=u,F0(s)&&Z0(i)}function X0(i,s,o){return o(function(){F0(s)&&Z0(i)})}function F0(i){var s=i.getSnapshot;i=i.value;try{var o=s();return!on(i,o)}catch{return!0}}function Z0(i){var s=bo(i,2);s!==null&&hn(s,i,2)}function Cg(i){var s=Qe();if(typeof i=="function"){var o=i;if(i=o(),za){Vn(!0);try{o()}finally{Vn(!1)}}}return s.memoizedState=s.baseState=i,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yr,lastRenderedState:i},s}function Q0(i,s,o,u){return i.baseState=o,Eg(i,Qt,typeof u=="function"?u:Yr)}function xE(i,s,o,u,f){if(sf(i))throw Error(r(485));if(i=s.action,i!==null){var m={payload:f,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){m.listeners.push(S)}};I.T!==null?o(!0):m.isTransition=!1,u(m),o=s.pending,o===null?(m.next=s.pending=m,W0(s,m)):(m.next=o.next,s.pending=o.next=m)}}function W0(i,s){var o=s.action,u=s.payload,f=i.state;if(s.isTransition){var m=I.T,S={};I.T=S;try{var E=o(f,u),R=I.S;R!==null&&R(S,E),tv(i,s,E)}catch(X){kg(i,s,X)}finally{I.T=m}}else try{m=o(f,u),tv(i,s,m)}catch(X){kg(i,s,X)}}function tv(i,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){ev(i,s,u)},function(u){return kg(i,s,u)}):ev(i,s,o)}function ev(i,s,o){s.status="fulfilled",s.value=o,nv(s),i.state=o,s=i.pending,s!==null&&(o=s.next,o===s?i.pending=null:(o=o.next,s.next=o,W0(i,o)))}function kg(i,s,o){var u=i.pending;if(i.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=o,nv(s),s=s.next;while(s!==u)}i.action=null}function nv(i){i=i.listeners;for(var s=0;s<i.length;s++)(0,i[s])()}function rv(i,s){return s}function iv(i,s){if(Kt){var o=ie.formState;if(o!==null){t:{var u=zt;if(Kt){if(de){e:{for(var f=de,m=ur;f.nodeType!==8;){if(!m){f=null;break e}if(f=Gn(f.nextSibling),f===null){f=null;break e}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){de=Gn(f.nextSibling),u=f.data==="F!";break t}}Oa(u)}u=!1}u&&(s=o[0])}}return o=Qe(),o.memoizedState=o.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:rv,lastRenderedState:s},o.queue=u,o=Tv.bind(null,zt,u),u.dispatch=o,u=Cg(!1),m=Rg.bind(null,zt,!1,u.queue),u=Qe(),f={state:s,dispatch:null,action:i,pending:null},u.queue=f,o=xE.bind(null,zt,f,m,o),f.dispatch=o,u.memoizedState=i,[s,o,!1]}function sv(i){var s=Te();return av(s,Qt,i)}function av(i,s,o){if(s=Eg(i,s,rv)[0],i=ef(Yr)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=nu(s)}catch(S){throw S===Fl?Xc:S}else u=s;s=Te();var f=s.queue,m=f.dispatch;return o!==s.memoizedState&&(zt.flags|=2048,Do(9,nf(),TE.bind(null,f,o),null)),[u,m,i]}function TE(i,s){i.action=s}function ov(i){var s=Te(),o=Qt;if(o!==null)return av(s,o,i);Te(),s=s.memoizedState,o=Te();var u=o.queue.dispatch;return o.memoizedState=i,[s,u,!1]}function Do(i,s,o,u){return i={tag:i,create:o,deps:u,inst:s,next:null},s=zt.updateQueue,s===null&&(s=Tg(),zt.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=i.next=i:(u=o.next,o.next=i,i.next=u,s.lastEffect=i),i}function nf(){return{destroy:void 0,resource:void 0}}function lv(){return Te().memoizedState}function rf(i,s,o,u){var f=Qe();u=u===void 0?null:u,zt.flags|=i,f.memoizedState=Do(1|s,nf(),o,u)}function ru(i,s,o,u){var f=Te();u=u===void 0?null:u;var m=f.memoizedState.inst;Qt!==null&&u!==null&&vg(u,Qt.memoizedState.deps)?f.memoizedState=Do(s,m,o,u):(zt.flags|=i,f.memoizedState=Do(1|s,m,o,u))}function uv(i,s){rf(8390656,8,i,s)}function cv(i,s){ru(2048,8,i,s)}function fv(i,s){return ru(4,2,i,s)}function dv(i,s){return ru(4,4,i,s)}function hv(i,s){if(typeof s=="function"){i=i();var o=s(i);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return i=i(),s.current=i,function(){s.current=null}}function gv(i,s,o){o=o!=null?o.concat([i]):null,ru(4,4,hv.bind(null,s,i),o)}function Dg(){}function mv(i,s){var o=Te();s=s===void 0?null:s;var u=o.memoizedState;return s!==null&&vg(s,u[1])?u[0]:(o.memoizedState=[i,s],i)}function yv(i,s){var o=Te();s=s===void 0?null:s;var u=o.memoizedState;if(s!==null&&vg(s,u[1]))return u[0];if(u=i(),za){Vn(!0);try{i()}finally{Vn(!1)}}return o.memoizedState=[u,s],u}function Ig(i,s,o){return o===void 0||(Js&1073741824)!==0?i.memoizedState=s:(i.memoizedState=o,i=ww(),zt.lanes|=i,Gs|=i,o)}function pv(i,s,o,u){return on(o,s)?o:No.current!==null?(i=Ig(i,o,u),on(i,s)||(Me=!0),i):(Js&42)===0?(Me=!0,i.memoizedState=o):(i=ww(),zt.lanes|=i,Gs|=i,s)}function vv(i,s,o,u,f){var m=z.p;z.p=m!==0&&8>m?m:8;var S=I.T,E={};I.T=E,Rg(i,!1,s,o);try{var R=f(),X=I.S;if(X!==null&&X(E,R),R!==null&&typeof R=="object"&&typeof R.then=="function"){var at=wE(R,u);iu(i,s,at,dn(i))}else iu(i,s,u,dn(i))}catch(ct){iu(i,s,{then:function(){},status:"rejected",reason:ct},dn())}finally{z.p=m,I.T=S}}function AE(){}function Og(i,s,o,u){if(i.tag!==5)throw Error(r(476));var f=wv(i).queue;vv(i,f,s,K,o===null?AE:function(){return bv(i),o(u)})}function wv(i){var s=i.memoizedState;if(s!==null)return s;s={memoizedState:K,baseState:K,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yr,lastRenderedState:K},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yr,lastRenderedState:o},next:null},i.memoizedState=s,i=i.alternate,i!==null&&(i.memoizedState=s),s}function bv(i){var s=wv(i).next.queue;iu(i,s,{},dn())}function Mg(){return $e(xu)}function Sv(){return Te().memoizedState}function xv(){return Te().memoizedState}function EE(i){for(var s=i.return;s!==null;){switch(s.tag){case 24:case 3:var o=dn();i=qs(o);var u=Ps(s,i,o);u!==null&&(hn(u,s,o),Ql(u,s,o)),s={cache:lg()},i.payload=s;return}s=s.return}}function NE(i,s,o){var u=dn();o={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},sf(i)?Av(s,o):(o=Qh(i,s,o,u),o!==null&&(hn(o,i,u),Ev(o,s,u)))}function Tv(i,s,o){var u=dn();iu(i,s,o,u)}function iu(i,s,o,u){var f={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(sf(i))Av(s,f);else{var m=i.alternate;if(i.lanes===0&&(m===null||m.lanes===0)&&(m=s.lastRenderedReducer,m!==null))try{var S=s.lastRenderedState,E=m(S,o);if(f.hasEagerState=!0,f.eagerState=E,on(E,S))return Jc(i,s,f,0),ie===null&&Pc(),!1}catch{}finally{}if(o=Qh(i,s,f,u),o!==null)return hn(o,i,u),Ev(o,s,u),!0}return!1}function Rg(i,s,o,u){if(u={lane:2,revertLane:fm(),action:u,hasEagerState:!1,eagerState:null,next:null},sf(i)){if(s)throw Error(r(479))}else s=Qh(i,o,u,2),s!==null&&hn(s,i,2)}function sf(i){var s=i.alternate;return i===zt||s!==null&&s===zt}function Av(i,s){Co=Qc=!0;var o=i.pending;o===null?s.next=s:(s.next=o.next,o.next=s),i.pending=s}function Ev(i,s,o){if((o&4194048)!==0){var u=s.lanes;u&=i.pendingLanes,o|=u,s.lanes=o,El(i,o)}}var af={readContext:$e,use:tf,useCallback:ye,useContext:ye,useEffect:ye,useImperativeHandle:ye,useLayoutEffect:ye,useInsertionEffect:ye,useMemo:ye,useReducer:ye,useRef:ye,useState:ye,useDebugValue:ye,useDeferredValue:ye,useTransition:ye,useSyncExternalStore:ye,useId:ye,useHostTransitionStatus:ye,useFormState:ye,useActionState:ye,useOptimistic:ye,useMemoCache:ye,useCacheRefresh:ye},Nv={readContext:$e,use:tf,useCallback:function(i,s){return Qe().memoizedState=[i,s===void 0?null:s],i},useContext:$e,useEffect:uv,useImperativeHandle:function(i,s,o){o=o!=null?o.concat([i]):null,rf(4194308,4,hv.bind(null,s,i),o)},useLayoutEffect:function(i,s){return rf(4194308,4,i,s)},useInsertionEffect:function(i,s){rf(4,2,i,s)},useMemo:function(i,s){var o=Qe();s=s===void 0?null:s;var u=i();if(za){Vn(!0);try{i()}finally{Vn(!1)}}return o.memoizedState=[u,s],u},useReducer:function(i,s,o){var u=Qe();if(o!==void 0){var f=o(s);if(za){Vn(!0);try{o(s)}finally{Vn(!1)}}}else f=s;return u.memoizedState=u.baseState=f,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:f},u.queue=i,i=i.dispatch=NE.bind(null,zt,i),[u.memoizedState,i]},useRef:function(i){var s=Qe();return i={current:i},s.memoizedState=i},useState:function(i){i=Cg(i);var s=i.queue,o=Tv.bind(null,zt,s);return s.dispatch=o,[i.memoizedState,o]},useDebugValue:Dg,useDeferredValue:function(i,s){var o=Qe();return Ig(o,i,s)},useTransition:function(){var i=Cg(!1);return i=vv.bind(null,zt,i.queue,!0,!1),Qe().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,s,o){var u=zt,f=Qe();if(Kt){if(o===void 0)throw Error(r(407));o=o()}else{if(o=s(),ie===null)throw Error(r(349));(Ht&124)!==0||K0(u,s,o)}f.memoizedState=o;var m={value:o,getSnapshot:s};return f.queue=m,uv(X0.bind(null,u,m,i),[i]),u.flags|=2048,Do(9,nf(),G0.bind(null,u,m,o,s),null),o},useId:function(){var i=Qe(),s=ie.identifierPrefix;if(Kt){var o=Hr,u=$r;o=(u&~(1<<32-Ke(u)-1)).toString(32)+o,s="«"+s+"R"+o,o=Wc++,0<o&&(s+="H"+o.toString(32)),s+="»"}else o=bE++,s="«"+s+"r"+o.toString(32)+"»";return i.memoizedState=s},useHostTransitionStatus:Mg,useFormState:iv,useActionState:iv,useOptimistic:function(i){var s=Qe();s.memoizedState=s.baseState=i;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=Rg.bind(null,zt,!0,o),o.dispatch=s,[i,s]},useMemoCache:Ag,useCacheRefresh:function(){return Qe().memoizedState=EE.bind(null,zt)}},Cv={readContext:$e,use:tf,useCallback:mv,useContext:$e,useEffect:cv,useImperativeHandle:gv,useInsertionEffect:fv,useLayoutEffect:dv,useMemo:yv,useReducer:ef,useRef:lv,useState:function(){return ef(Yr)},useDebugValue:Dg,useDeferredValue:function(i,s){var o=Te();return pv(o,Qt.memoizedState,i,s)},useTransition:function(){var i=ef(Yr)[0],s=Te().memoizedState;return[typeof i=="boolean"?i:nu(i),s]},useSyncExternalStore:Y0,useId:Sv,useHostTransitionStatus:Mg,useFormState:sv,useActionState:sv,useOptimistic:function(i,s){var o=Te();return Q0(o,Qt,i,s)},useMemoCache:Ag,useCacheRefresh:xv},CE={readContext:$e,use:tf,useCallback:mv,useContext:$e,useEffect:cv,useImperativeHandle:gv,useInsertionEffect:fv,useLayoutEffect:dv,useMemo:yv,useReducer:Ng,useRef:lv,useState:function(){return Ng(Yr)},useDebugValue:Dg,useDeferredValue:function(i,s){var o=Te();return Qt===null?Ig(o,i,s):pv(o,Qt.memoizedState,i,s)},useTransition:function(){var i=Ng(Yr)[0],s=Te().memoizedState;return[typeof i=="boolean"?i:nu(i),s]},useSyncExternalStore:Y0,useId:Sv,useHostTransitionStatus:Mg,useFormState:ov,useActionState:ov,useOptimistic:function(i,s){var o=Te();return Qt!==null?Q0(o,Qt,i,s):(o.baseState=i,[i,o.queue.dispatch])},useMemoCache:Ag,useCacheRefresh:xv},Io=null,su=0;function of(i){var s=su;return su+=1,Io===null&&(Io=[]),U0(Io,i,s)}function au(i,s){s=s.props.ref,i.ref=s!==void 0?s:null}function lf(i,s){throw s.$$typeof===w?Error(r(525)):(i=Object.prototype.toString.call(s),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":i)))}function kv(i){var s=i._init;return s(i._payload)}function Dv(i){function s(H,q){if(i){var G=H.deletions;G===null?(H.deletions=[q],H.flags|=16):G.push(q)}}function o(H,q){if(!i)return null;for(;q!==null;)s(H,q),q=q.sibling;return null}function u(H){for(var q=new Map;H!==null;)H.key!==null?q.set(H.key,H):q.set(H.index,H),H=H.sibling;return q}function f(H,q){return H=Jr(H,q),H.index=0,H.sibling=null,H}function m(H,q,G){return H.index=G,i?(G=H.alternate,G!==null?(G=G.index,G<q?(H.flags|=67108866,q):G):(H.flags|=67108866,q)):(H.flags|=1048576,q)}function S(H){return i&&H.alternate===null&&(H.flags|=67108866),H}function E(H,q,G,ut){return q===null||q.tag!==6?(q=tg(G,H.mode,ut),q.return=H,q):(q=f(q,G),q.return=H,q)}function R(H,q,G,ut){var wt=G.type;return wt===T?at(H,q,G.props.children,ut,G.key):q!==null&&(q.elementType===wt||typeof wt=="object"&&wt!==null&&wt.$$typeof===V&&kv(wt)===q.type)?(q=f(q,G.props),au(q,G),q.return=H,q):(q=Hc(G.type,G.key,G.props,null,H.mode,ut),au(q,G),q.return=H,q)}function X(H,q,G,ut){return q===null||q.tag!==4||q.stateNode.containerInfo!==G.containerInfo||q.stateNode.implementation!==G.implementation?(q=eg(G,H.mode,ut),q.return=H,q):(q=f(q,G.children||[]),q.return=H,q)}function at(H,q,G,ut,wt){return q===null||q.tag!==7?(q=Ca(G,H.mode,ut,wt),q.return=H,q):(q=f(q,G),q.return=H,q)}function ct(H,q,G){if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return q=tg(""+q,H.mode,G),q.return=H,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case v:return G=Hc(q.type,q.key,q.props,null,H.mode,G),au(G,q),G.return=H,G;case b:return q=eg(q,H.mode,G),q.return=H,q;case V:var ut=q._init;return q=ut(q._payload),ct(H,q,G)}if(Y(q)||rt(q))return q=Ca(q,H.mode,G,null),q.return=H,q;if(typeof q.then=="function")return ct(H,of(q),G);if(q.$$typeof===N)return ct(H,Kc(H,q),G);lf(H,q)}return null}function F(H,q,G,ut){var wt=q!==null?q.key:null;if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return wt!==null?null:E(H,q,""+G,ut);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case v:return G.key===wt?R(H,q,G,ut):null;case b:return G.key===wt?X(H,q,G,ut):null;case V:return wt=G._init,G=wt(G._payload),F(H,q,G,ut)}if(Y(G)||rt(G))return wt!==null?null:at(H,q,G,ut,null);if(typeof G.then=="function")return F(H,q,of(G),ut);if(G.$$typeof===N)return F(H,q,Kc(H,G),ut);lf(H,G)}return null}function Q(H,q,G,ut,wt){if(typeof ut=="string"&&ut!==""||typeof ut=="number"||typeof ut=="bigint")return H=H.get(G)||null,E(q,H,""+ut,wt);if(typeof ut=="object"&&ut!==null){switch(ut.$$typeof){case v:return H=H.get(ut.key===null?G:ut.key)||null,R(q,H,ut,wt);case b:return H=H.get(ut.key===null?G:ut.key)||null,X(q,H,ut,wt);case V:var Lt=ut._init;return ut=Lt(ut._payload),Q(H,q,G,ut,wt)}if(Y(ut)||rt(ut))return H=H.get(G)||null,at(q,H,ut,wt,null);if(typeof ut.then=="function")return Q(H,q,G,of(ut),wt);if(ut.$$typeof===N)return Q(H,q,G,Kc(q,ut),wt);lf(q,ut)}return null}function It(H,q,G,ut){for(var wt=null,Lt=null,xt=q,Dt=q=0,Be=null;xt!==null&&Dt<G.length;Dt++){xt.index>Dt?(Be=xt,xt=null):Be=xt.sibling;var Yt=F(H,xt,G[Dt],ut);if(Yt===null){xt===null&&(xt=Be);break}i&&xt&&Yt.alternate===null&&s(H,xt),q=m(Yt,q,Dt),Lt===null?wt=Yt:Lt.sibling=Yt,Lt=Yt,xt=Be}if(Dt===G.length)return o(H,xt),Kt&&Da(H,Dt),wt;if(xt===null){for(;Dt<G.length;Dt++)xt=ct(H,G[Dt],ut),xt!==null&&(q=m(xt,q,Dt),Lt===null?wt=xt:Lt.sibling=xt,Lt=xt);return Kt&&Da(H,Dt),wt}for(xt=u(xt);Dt<G.length;Dt++)Be=Q(xt,H,Dt,G[Dt],ut),Be!==null&&(i&&Be.alternate!==null&&xt.delete(Be.key===null?Dt:Be.key),q=m(Be,q,Dt),Lt===null?wt=Be:Lt.sibling=Be,Lt=Be);return i&&xt.forEach(function(ra){return s(H,ra)}),Kt&&Da(H,Dt),wt}function Ct(H,q,G,ut){if(G==null)throw Error(r(151));for(var wt=null,Lt=null,xt=q,Dt=q=0,Be=null,Yt=G.next();xt!==null&&!Yt.done;Dt++,Yt=G.next()){xt.index>Dt?(Be=xt,xt=null):Be=xt.sibling;var ra=F(H,xt,Yt.value,ut);if(ra===null){xt===null&&(xt=Be);break}i&&xt&&ra.alternate===null&&s(H,xt),q=m(ra,q,Dt),Lt===null?wt=ra:Lt.sibling=ra,Lt=ra,xt=Be}if(Yt.done)return o(H,xt),Kt&&Da(H,Dt),wt;if(xt===null){for(;!Yt.done;Dt++,Yt=G.next())Yt=ct(H,Yt.value,ut),Yt!==null&&(q=m(Yt,q,Dt),Lt===null?wt=Yt:Lt.sibling=Yt,Lt=Yt);return Kt&&Da(H,Dt),wt}for(xt=u(xt);!Yt.done;Dt++,Yt=G.next())Yt=Q(xt,H,Dt,Yt.value,ut),Yt!==null&&(i&&Yt.alternate!==null&&xt.delete(Yt.key===null?Dt:Yt.key),q=m(Yt,q,Dt),Lt===null?wt=Yt:Lt.sibling=Yt,Lt=Yt);return i&&xt.forEach(function(kN){return s(H,kN)}),Kt&&Da(H,Dt),wt}function te(H,q,G,ut){if(typeof G=="object"&&G!==null&&G.type===T&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case v:t:{for(var wt=G.key;q!==null;){if(q.key===wt){if(wt=G.type,wt===T){if(q.tag===7){o(H,q.sibling),ut=f(q,G.props.children),ut.return=H,H=ut;break t}}else if(q.elementType===wt||typeof wt=="object"&&wt!==null&&wt.$$typeof===V&&kv(wt)===q.type){o(H,q.sibling),ut=f(q,G.props),au(ut,G),ut.return=H,H=ut;break t}o(H,q);break}else s(H,q);q=q.sibling}G.type===T?(ut=Ca(G.props.children,H.mode,ut,G.key),ut.return=H,H=ut):(ut=Hc(G.type,G.key,G.props,null,H.mode,ut),au(ut,G),ut.return=H,H=ut)}return S(H);case b:t:{for(wt=G.key;q!==null;){if(q.key===wt)if(q.tag===4&&q.stateNode.containerInfo===G.containerInfo&&q.stateNode.implementation===G.implementation){o(H,q.sibling),ut=f(q,G.children||[]),ut.return=H,H=ut;break t}else{o(H,q);break}else s(H,q);q=q.sibling}ut=eg(G,H.mode,ut),ut.return=H,H=ut}return S(H);case V:return wt=G._init,G=wt(G._payload),te(H,q,G,ut)}if(Y(G))return It(H,q,G,ut);if(rt(G)){if(wt=rt(G),typeof wt!="function")throw Error(r(150));return G=wt.call(G),Ct(H,q,G,ut)}if(typeof G.then=="function")return te(H,q,of(G),ut);if(G.$$typeof===N)return te(H,q,Kc(H,G),ut);lf(H,G)}return typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint"?(G=""+G,q!==null&&q.tag===6?(o(H,q.sibling),ut=f(q,G),ut.return=H,H=ut):(o(H,q),ut=tg(G,H.mode,ut),ut.return=H,H=ut),S(H)):o(H,q)}return function(H,q,G,ut){try{su=0;var wt=te(H,q,G,ut);return Io=null,wt}catch(xt){if(xt===Fl||xt===Xc)throw xt;var Lt=ln(29,xt,null,H.mode);return Lt.lanes=ut,Lt.return=H,Lt}finally{}}}var Oo=Dv(!0),Iv=Dv(!1),En=U(null),cr=null;function $s(i){var s=i.alternate;it(ke,ke.current&1),it(En,i),cr===null&&(s===null||No.current!==null||s.memoizedState!==null)&&(cr=i)}function Ov(i){if(i.tag===22){if(it(ke,ke.current),it(En,i),cr===null){var s=i.alternate;s!==null&&s.memoizedState!==null&&(cr=i)}}else Hs()}function Hs(){it(ke,ke.current),it(En,En.current)}function Kr(i){Z(En),cr===i&&(cr=null),Z(ke)}var ke=U(0);function uf(i){for(var s=i;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||Tm(o)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function Bg(i,s,o,u){s=i.memoizedState,o=o(u,s),o=o==null?s:p({},s,o),i.memoizedState=o,i.lanes===0&&(i.updateQueue.baseState=o)}var zg={enqueueSetState:function(i,s,o){i=i._reactInternals;var u=dn(),f=qs(u);f.payload=s,o!=null&&(f.callback=o),s=Ps(i,f,u),s!==null&&(hn(s,i,u),Ql(s,i,u))},enqueueReplaceState:function(i,s,o){i=i._reactInternals;var u=dn(),f=qs(u);f.tag=1,f.payload=s,o!=null&&(f.callback=o),s=Ps(i,f,u),s!==null&&(hn(s,i,u),Ql(s,i,u))},enqueueForceUpdate:function(i,s){i=i._reactInternals;var o=dn(),u=qs(o);u.tag=2,s!=null&&(u.callback=s),s=Ps(i,u,o),s!==null&&(hn(s,i,o),Ql(s,i,o))}};function Mv(i,s,o,u,f,m,S){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(u,m,S):s.prototype&&s.prototype.isPureReactComponent?!$l(o,u)||!$l(f,m):!0}function Rv(i,s,o,u){i=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,u),s.state!==i&&zg.enqueueReplaceState(s,s.state,null)}function La(i,s){var o=s;if("ref"in s){o={};for(var u in s)u!=="ref"&&(o[u]=s[u])}if(i=i.defaultProps){o===s&&(o=p({},o));for(var f in i)o[f]===void 0&&(o[f]=i[f])}return o}var cf=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function Bv(i){cf(i)}function zv(i){console.error(i)}function Lv(i){cf(i)}function ff(i,s){try{var o=i.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function _v(i,s,o){try{var u=i.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Lg(i,s,o){return o=qs(o),o.tag=3,o.payload={element:null},o.callback=function(){ff(i,s)},o}function Uv(i){return i=qs(i),i.tag=3,i}function qv(i,s,o,u){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var m=u.value;i.payload=function(){return f(m)},i.callback=function(){_v(s,o,u)}}var S=o.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(i.callback=function(){_v(s,o,u),typeof f!="function"&&(Xs===null?Xs=new Set([this]):Xs.add(this));var E=u.stack;this.componentDidCatch(u.value,{componentStack:E!==null?E:""})})}function kE(i,s,o,u,f){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=o.alternate,s!==null&&Kl(s,o,f,!0),o=En.current,o!==null){switch(o.tag){case 13:return cr===null?am():o.alternate===null&&he===0&&(he=3),o.flags&=-257,o.flags|=65536,o.lanes=f,u===fg?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([u]):s.add(u),lm(i,u,f)),!1;case 22:return o.flags|=65536,u===fg?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([u]):o.add(u)),lm(i,u,f)),!1}throw Error(r(435,o.tag))}return lm(i,u,f),am(),!1}if(Kt)return s=En.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=f,u!==ig&&(i=Error(r(422),{cause:u}),Yl(Sn(i,o)))):(u!==ig&&(s=Error(r(423),{cause:u}),Yl(Sn(s,o))),i=i.current.alternate,i.flags|=65536,f&=-f,i.lanes|=f,u=Sn(u,o),f=Lg(i.stateNode,u,f),gg(i,f),he!==4&&(he=2)),!1;var m=Error(r(520),{cause:u});if(m=Sn(m,o),hu===null?hu=[m]:hu.push(m),he!==4&&(he=2),s===null)return!0;u=Sn(u,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,i=f&-f,o.lanes|=i,i=Lg(o.stateNode,u,i),gg(o,i),!1;case 1:if(s=o.type,m=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Xs===null||!Xs.has(m))))return o.flags|=65536,f&=-f,o.lanes|=f,f=Uv(f),qv(f,i,o,u),gg(o,f),!1}o=o.return}while(o!==null);return!1}var Pv=Error(r(461)),Me=!1;function ze(i,s,o,u){s.child=i===null?Iv(s,null,o,u):Oo(s,i.child,o,u)}function Jv(i,s,o,u,f){o=o.render;var m=s.ref;if("ref"in u){var S={};for(var E in u)E!=="ref"&&(S[E]=u[E])}else S=u;return Ra(s),u=wg(i,s,o,S,m,f),E=bg(),i!==null&&!Me?(Sg(i,s,f),Gr(i,s,f)):(Kt&&E&&ng(s),s.flags|=1,ze(i,s,u,f),s.child)}function $v(i,s,o,u,f){if(i===null){var m=o.type;return typeof m=="function"&&!Wh(m)&&m.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=m,Hv(i,s,m,u,f)):(i=Hc(o.type,null,u,s,s.mode,f),i.ref=s.ref,i.return=s,s.child=i)}if(m=i.child,!Vg(i,f)){var S=m.memoizedProps;if(o=o.compare,o=o!==null?o:$l,o(S,u)&&i.ref===s.ref)return Gr(i,s,f)}return s.flags|=1,i=Jr(m,u),i.ref=s.ref,i.return=s,s.child=i}function Hv(i,s,o,u,f){if(i!==null){var m=i.memoizedProps;if($l(m,u)&&i.ref===s.ref)if(Me=!1,s.pendingProps=u=m,Vg(i,f))(i.flags&131072)!==0&&(Me=!0);else return s.lanes=i.lanes,Gr(i,s,f)}return _g(i,s,o,u,f)}function Vv(i,s,o){var u=s.pendingProps,f=u.children,m=i!==null?i.memoizedState:null;if(u.mode==="hidden"){if((s.flags&128)!==0){if(u=m!==null?m.baseLanes|o:o,i!==null){for(f=s.child=i.child,m=0;f!==null;)m=m|f.lanes|f.childLanes,f=f.sibling;s.childLanes=m&~u}else s.childLanes=0,s.child=null;return jv(i,s,u,o)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},i!==null&&Gc(s,m!==null?m.cachePool:null),m!==null?H0(s,m):yg(),Ov(s);else return s.lanes=s.childLanes=536870912,jv(i,s,m!==null?m.baseLanes|o:o,o)}else m!==null?(Gc(s,m.cachePool),H0(s,m),Hs(),s.memoizedState=null):(i!==null&&Gc(s,null),yg(),Hs());return ze(i,s,f,o),s.child}function jv(i,s,o,u){var f=cg();return f=f===null?null:{parent:Ce._currentValue,pool:f},s.memoizedState={baseLanes:o,cachePool:f},i!==null&&Gc(s,null),yg(),Ov(s),i!==null&&Kl(i,s,u,!0),null}function df(i,s){var o=s.ref;if(o===null)i!==null&&i.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(r(284));(i===null||i.ref!==o)&&(s.flags|=4194816)}}function _g(i,s,o,u,f){return Ra(s),o=wg(i,s,o,u,void 0,f),u=bg(),i!==null&&!Me?(Sg(i,s,f),Gr(i,s,f)):(Kt&&u&&ng(s),s.flags|=1,ze(i,s,o,f),s.child)}function Yv(i,s,o,u,f,m){return Ra(s),s.updateQueue=null,o=j0(s,u,o,f),V0(i),u=bg(),i!==null&&!Me?(Sg(i,s,m),Gr(i,s,m)):(Kt&&u&&ng(s),s.flags|=1,ze(i,s,o,m),s.child)}function Kv(i,s,o,u,f){if(Ra(s),s.stateNode===null){var m=So,S=o.contextType;typeof S=="object"&&S!==null&&(m=$e(S)),m=new o(u,m),s.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=zg,s.stateNode=m,m._reactInternals=s,m=s.stateNode,m.props=u,m.state=s.memoizedState,m.refs={},dg(s),S=o.contextType,m.context=typeof S=="object"&&S!==null?$e(S):So,m.state=s.memoizedState,S=o.getDerivedStateFromProps,typeof S=="function"&&(Bg(s,o,S,u),m.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(S=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),S!==m.state&&zg.enqueueReplaceState(m,m.state,null),tu(s,u,m,f),Wl(),m.state=s.memoizedState),typeof m.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(i===null){m=s.stateNode;var E=s.memoizedProps,R=La(o,E);m.props=R;var X=m.context,at=o.contextType;S=So,typeof at=="object"&&at!==null&&(S=$e(at));var ct=o.getDerivedStateFromProps;at=typeof ct=="function"||typeof m.getSnapshotBeforeUpdate=="function",E=s.pendingProps!==E,at||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(E||X!==S)&&Rv(s,m,u,S),Us=!1;var F=s.memoizedState;m.state=F,tu(s,u,m,f),Wl(),X=s.memoizedState,E||F!==X||Us?(typeof ct=="function"&&(Bg(s,o,ct,u),X=s.memoizedState),(R=Us||Mv(s,o,R,u,F,X,S))?(at||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(s.flags|=4194308)):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=X),m.props=u,m.state=X,m.context=S,u=R):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{m=s.stateNode,hg(i,s),S=s.memoizedProps,at=La(o,S),m.props=at,ct=s.pendingProps,F=m.context,X=o.contextType,R=So,typeof X=="object"&&X!==null&&(R=$e(X)),E=o.getDerivedStateFromProps,(X=typeof E=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(S!==ct||F!==R)&&Rv(s,m,u,R),Us=!1,F=s.memoizedState,m.state=F,tu(s,u,m,f),Wl();var Q=s.memoizedState;S!==ct||F!==Q||Us||i!==null&&i.dependencies!==null&&Yc(i.dependencies)?(typeof E=="function"&&(Bg(s,o,E,u),Q=s.memoizedState),(at=Us||Mv(s,o,at,u,F,Q,R)||i!==null&&i.dependencies!==null&&Yc(i.dependencies))?(X||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(u,Q,R),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(u,Q,R)),typeof m.componentDidUpdate=="function"&&(s.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof m.componentDidUpdate!="function"||S===i.memoizedProps&&F===i.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||S===i.memoizedProps&&F===i.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=Q),m.props=u,m.state=Q,m.context=R,u=at):(typeof m.componentDidUpdate!="function"||S===i.memoizedProps&&F===i.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||S===i.memoizedProps&&F===i.memoizedState||(s.flags|=1024),u=!1)}return m=u,df(i,s),u=(s.flags&128)!==0,m||u?(m=s.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:m.render(),s.flags|=1,i!==null&&u?(s.child=Oo(s,i.child,null,f),s.child=Oo(s,null,o,f)):ze(i,s,o,f),s.memoizedState=m.state,i=s.child):i=Gr(i,s,f),i}function Gv(i,s,o,u){return jl(),s.flags|=256,ze(i,s,o,u),s.child}var Ug={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function qg(i){return{baseLanes:i,cachePool:z0()}}function Pg(i,s,o){return i=i!==null?i.childLanes&~o:0,s&&(i|=Nn),i}function Xv(i,s,o){var u=s.pendingProps,f=!1,m=(s.flags&128)!==0,S;if((S=m)||(S=i!==null&&i.memoizedState===null?!1:(ke.current&2)!==0),S&&(f=!0,s.flags&=-129),S=(s.flags&32)!==0,s.flags&=-33,i===null){if(Kt){if(f?$s(s):Hs(),Kt){var E=de,R;if(R=E){t:{for(R=E,E=ur;R.nodeType!==8;){if(!E){E=null;break t}if(R=Gn(R.nextSibling),R===null){E=null;break t}}E=R}E!==null?(s.memoizedState={dehydrated:E,treeContext:ka!==null?{id:$r,overflow:Hr}:null,retryLane:536870912,hydrationErrors:null},R=ln(18,null,null,0),R.stateNode=E,R.return=s,s.child=R,Ge=s,de=null,R=!0):R=!1}R||Oa(s)}if(E=s.memoizedState,E!==null&&(E=E.dehydrated,E!==null))return Tm(E)?s.lanes=32:s.lanes=536870912,null;Kr(s)}return E=u.children,u=u.fallback,f?(Hs(),f=s.mode,E=hf({mode:"hidden",children:E},f),u=Ca(u,f,o,null),E.return=s,u.return=s,E.sibling=u,s.child=E,f=s.child,f.memoizedState=qg(o),f.childLanes=Pg(i,S,o),s.memoizedState=Ug,u):($s(s),Jg(s,E))}if(R=i.memoizedState,R!==null&&(E=R.dehydrated,E!==null)){if(m)s.flags&256?($s(s),s.flags&=-257,s=$g(i,s,o)):s.memoizedState!==null?(Hs(),s.child=i.child,s.flags|=128,s=null):(Hs(),f=u.fallback,E=s.mode,u=hf({mode:"visible",children:u.children},E),f=Ca(f,E,o,null),f.flags|=2,u.return=s,f.return=s,u.sibling=f,s.child=u,Oo(s,i.child,null,o),u=s.child,u.memoizedState=qg(o),u.childLanes=Pg(i,S,o),s.memoizedState=Ug,s=f);else if($s(s),Tm(E)){if(S=E.nextSibling&&E.nextSibling.dataset,S)var X=S.dgst;S=X,u=Error(r(419)),u.stack="",u.digest=S,Yl({value:u,source:null,stack:null}),s=$g(i,s,o)}else if(Me||Kl(i,s,o,!1),S=(o&i.childLanes)!==0,Me||S){if(S=ie,S!==null&&(u=o&-o,u=(u&42)!==0?1:Nl(u),u=(u&(S.suspendedLanes|o))!==0?0:u,u!==0&&u!==R.retryLane))throw R.retryLane=u,bo(i,u),hn(S,i,u),Pv;E.data==="$?"||am(),s=$g(i,s,o)}else E.data==="$?"?(s.flags|=192,s.child=i.child,s=null):(i=R.treeContext,de=Gn(E.nextSibling),Ge=s,Kt=!0,Ia=null,ur=!1,i!==null&&(Tn[An++]=$r,Tn[An++]=Hr,Tn[An++]=ka,$r=i.id,Hr=i.overflow,ka=s),s=Jg(s,u.children),s.flags|=4096);return s}return f?(Hs(),f=u.fallback,E=s.mode,R=i.child,X=R.sibling,u=Jr(R,{mode:"hidden",children:u.children}),u.subtreeFlags=R.subtreeFlags&65011712,X!==null?f=Jr(X,f):(f=Ca(f,E,o,null),f.flags|=2),f.return=s,u.return=s,u.sibling=f,s.child=u,u=f,f=s.child,E=i.child.memoizedState,E===null?E=qg(o):(R=E.cachePool,R!==null?(X=Ce._currentValue,R=R.parent!==X?{parent:X,pool:X}:R):R=z0(),E={baseLanes:E.baseLanes|o,cachePool:R}),f.memoizedState=E,f.childLanes=Pg(i,S,o),s.memoizedState=Ug,u):($s(s),o=i.child,i=o.sibling,o=Jr(o,{mode:"visible",children:u.children}),o.return=s,o.sibling=null,i!==null&&(S=s.deletions,S===null?(s.deletions=[i],s.flags|=16):S.push(i)),s.child=o,s.memoizedState=null,o)}function Jg(i,s){return s=hf({mode:"visible",children:s},i.mode),s.return=i,i.child=s}function hf(i,s){return i=ln(22,i,null,s),i.lanes=0,i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},i}function $g(i,s,o){return Oo(s,i.child,null,o),i=Jg(s,s.pendingProps.children),i.flags|=2,s.memoizedState=null,i}function Fv(i,s,o){i.lanes|=s;var u=i.alternate;u!==null&&(u.lanes|=s),ag(i.return,s,o)}function Hg(i,s,o,u,f){var m=i.memoizedState;m===null?i.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:f}:(m.isBackwards=s,m.rendering=null,m.renderingStartTime=0,m.last=u,m.tail=o,m.tailMode=f)}function Zv(i,s,o){var u=s.pendingProps,f=u.revealOrder,m=u.tail;if(ze(i,s,u.children,o),u=ke.current,(u&2)!==0)u=u&1|2,s.flags|=128;else{if(i!==null&&(i.flags&128)!==0)t:for(i=s.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Fv(i,o,s);else if(i.tag===19)Fv(i,o,s);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break t;for(;i.sibling===null;){if(i.return===null||i.return===s)break t;i=i.return}i.sibling.return=i.return,i=i.sibling}u&=1}switch(it(ke,u),f){case"forwards":for(o=s.child,f=null;o!==null;)i=o.alternate,i!==null&&uf(i)===null&&(f=o),o=o.sibling;o=f,o===null?(f=s.child,s.child=null):(f=o.sibling,o.sibling=null),Hg(s,!1,f,o,m);break;case"backwards":for(o=null,f=s.child,s.child=null;f!==null;){if(i=f.alternate,i!==null&&uf(i)===null){s.child=f;break}i=f.sibling,f.sibling=o,o=f,f=i}Hg(s,!0,o,null,m);break;case"together":Hg(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Gr(i,s,o){if(i!==null&&(s.dependencies=i.dependencies),Gs|=s.lanes,(o&s.childLanes)===0)if(i!==null){if(Kl(i,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(i!==null&&s.child!==i.child)throw Error(r(153));if(s.child!==null){for(i=s.child,o=Jr(i,i.pendingProps),s.child=o,o.return=s;i.sibling!==null;)i=i.sibling,o=o.sibling=Jr(i,i.pendingProps),o.return=s;o.sibling=null}return s.child}function Vg(i,s){return(i.lanes&s)!==0?!0:(i=i.dependencies,!!(i!==null&&Yc(i)))}function DE(i,s,o){switch(s.tag){case 3:mt(s,s.stateNode.containerInfo),_s(s,Ce,i.memoizedState.cache),jl();break;case 27:case 5:Jt(s);break;case 4:mt(s,s.stateNode.containerInfo);break;case 10:_s(s,s.type,s.memoizedProps.value);break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?($s(s),s.flags|=128,null):(o&s.child.childLanes)!==0?Xv(i,s,o):($s(s),i=Gr(i,s,o),i!==null?i.sibling:null);$s(s);break;case 19:var f=(i.flags&128)!==0;if(u=(o&s.childLanes)!==0,u||(Kl(i,s,o,!1),u=(o&s.childLanes)!==0),f){if(u)return Zv(i,s,o);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),it(ke,ke.current),u)break;return null;case 22:case 23:return s.lanes=0,Vv(i,s,o);case 24:_s(s,Ce,i.memoizedState.cache)}return Gr(i,s,o)}function Qv(i,s,o){if(i!==null)if(i.memoizedProps!==s.pendingProps)Me=!0;else{if(!Vg(i,o)&&(s.flags&128)===0)return Me=!1,DE(i,s,o);Me=(i.flags&131072)!==0}else Me=!1,Kt&&(s.flags&1048576)!==0&&k0(s,jc,s.index);switch(s.lanes=0,s.tag){case 16:t:{i=s.pendingProps;var u=s.elementType,f=u._init;if(u=f(u._payload),s.type=u,typeof u=="function")Wh(u)?(i=La(u,i),s.tag=1,s=Kv(null,s,u,i,o)):(s.tag=0,s=_g(null,s,u,i,o));else{if(u!=null){if(f=u.$$typeof,f===O){s.tag=11,s=Jv(null,s,u,i,o);break t}else if(f===P){s.tag=14,s=$v(null,s,u,i,o);break t}}throw s=M(u)||u,Error(r(306,s,""))}}return s;case 0:return _g(i,s,s.type,s.pendingProps,o);case 1:return u=s.type,f=La(u,s.pendingProps),Kv(i,s,u,f,o);case 3:t:{if(mt(s,s.stateNode.containerInfo),i===null)throw Error(r(387));u=s.pendingProps;var m=s.memoizedState;f=m.element,hg(i,s),tu(s,u,null,o);var S=s.memoizedState;if(u=S.cache,_s(s,Ce,u),u!==m.cache&&og(s,[Ce],o,!0),Wl(),u=S.element,m.isDehydrated)if(m={element:u,isDehydrated:!1,cache:S.cache},s.updateQueue.baseState=m,s.memoizedState=m,s.flags&256){s=Gv(i,s,u,o);break t}else if(u!==f){f=Sn(Error(r(424)),s),Yl(f),s=Gv(i,s,u,o);break t}else{switch(i=s.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(de=Gn(i.firstChild),Ge=s,Kt=!0,Ia=null,ur=!0,o=Iv(s,null,u,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(jl(),u===f){s=Gr(i,s,o);break t}ze(i,s,u,o)}s=s.child}return s;case 26:return df(i,s),i===null?(o=nb(s.type,null,s.pendingProps,null))?s.memoizedState=o:Kt||(o=s.type,i=s.pendingProps,u=Cf(dt.current).createElement(o),u[Oe]=s,u[Je]=i,_e(u,o,i),Se(u),s.stateNode=u):s.memoizedState=nb(s.type,i.memoizedProps,s.pendingProps,i.memoizedState),null;case 27:return Jt(s),i===null&&Kt&&(u=s.stateNode=Ww(s.type,s.pendingProps,dt.current),Ge=s,ur=!0,f=de,Qs(s.type)?(Am=f,de=Gn(u.firstChild)):de=f),ze(i,s,s.pendingProps.children,o),df(i,s),i===null&&(s.flags|=4194304),s.child;case 5:return i===null&&Kt&&((f=u=de)&&(u=rN(u,s.type,s.pendingProps,ur),u!==null?(s.stateNode=u,Ge=s,de=Gn(u.firstChild),ur=!1,f=!0):f=!1),f||Oa(s)),Jt(s),f=s.type,m=s.pendingProps,S=i!==null?i.memoizedProps:null,u=m.children,bm(f,m)?u=null:S!==null&&bm(f,S)&&(s.flags|=32),s.memoizedState!==null&&(f=wg(i,s,SE,null,null,o),xu._currentValue=f),df(i,s),ze(i,s,u,o),s.child;case 6:return i===null&&Kt&&((i=o=de)&&(o=iN(o,s.pendingProps,ur),o!==null?(s.stateNode=o,Ge=s,de=null,i=!0):i=!1),i||Oa(s)),null;case 13:return Xv(i,s,o);case 4:return mt(s,s.stateNode.containerInfo),u=s.pendingProps,i===null?s.child=Oo(s,null,u,o):ze(i,s,u,o),s.child;case 11:return Jv(i,s,s.type,s.pendingProps,o);case 7:return ze(i,s,s.pendingProps,o),s.child;case 8:return ze(i,s,s.pendingProps.children,o),s.child;case 12:return ze(i,s,s.pendingProps.children,o),s.child;case 10:return u=s.pendingProps,_s(s,s.type,u.value),ze(i,s,u.children,o),s.child;case 9:return f=s.type._context,u=s.pendingProps.children,Ra(s),f=$e(f),u=u(f),s.flags|=1,ze(i,s,u,o),s.child;case 14:return $v(i,s,s.type,s.pendingProps,o);case 15:return Hv(i,s,s.type,s.pendingProps,o);case 19:return Zv(i,s,o);case 31:return u=s.pendingProps,o=s.mode,u={mode:u.mode,children:u.children},i===null?(o=hf(u,o),o.ref=s.ref,s.child=o,o.return=s,s=o):(o=Jr(i.child,u),o.ref=s.ref,s.child=o,o.return=s,s=o),s;case 22:return Vv(i,s,o);case 24:return Ra(s),u=$e(Ce),i===null?(f=cg(),f===null&&(f=ie,m=lg(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=o),f=m),s.memoizedState={parent:u,cache:f},dg(s),_s(s,Ce,f)):((i.lanes&o)!==0&&(hg(i,s),tu(s,null,null,o),Wl()),f=i.memoizedState,m=s.memoizedState,f.parent!==u?(f={parent:u,cache:u},s.memoizedState=f,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=f),_s(s,Ce,u)):(u=m.cache,_s(s,Ce,u),u!==f.cache&&og(s,[Ce],o,!0))),ze(i,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function Xr(i){i.flags|=4}function Wv(i,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!ob(s)){if(s=En.current,s!==null&&((Ht&4194048)===Ht?cr!==null:(Ht&62914560)!==Ht&&(Ht&536870912)===0||s!==cr))throw Zl=fg,L0;i.flags|=8192}}function gf(i,s){s!==null&&(i.flags|=4),i.flags&16384&&(s=i.tag!==22?xc():536870912,i.lanes|=s,zo|=s)}function ou(i,s){if(!Kt)switch(i.tailMode){case"hidden":s=i.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?i.tail=null:o.sibling=null;break;case"collapsed":o=i.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s||i.tail===null?i.tail=null:i.tail.sibling=null:u.sibling=null}}function ue(i){var s=i.alternate!==null&&i.alternate.child===i.child,o=0,u=0;if(s)for(var f=i.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags&65011712,u|=f.flags&65011712,f.return=i,f=f.sibling;else for(f=i.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=i,f=f.sibling;return i.subtreeFlags|=u,i.childLanes=o,s}function IE(i,s,o){var u=s.pendingProps;switch(rg(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ue(s),null;case 1:return ue(s),null;case 3:return o=s.stateNode,u=null,i!==null&&(u=i.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),jr(Ce),St(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(i===null||i.child===null)&&(Vl(s)?Xr(s):i===null||i.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,O0())),ue(s),null;case 26:return o=s.memoizedState,i===null?(Xr(s),o!==null?(ue(s),Wv(s,o)):(ue(s),s.flags&=-16777217)):o?o!==i.memoizedState?(Xr(s),ue(s),Wv(s,o)):(ue(s),s.flags&=-16777217):(i.memoizedProps!==u&&Xr(s),ue(s),s.flags&=-16777217),null;case 27:Rt(s),o=dt.current;var f=s.type;if(i!==null&&s.stateNode!=null)i.memoizedProps!==u&&Xr(s);else{if(!u){if(s.stateNode===null)throw Error(r(166));return ue(s),null}i=lt.current,Vl(s)?D0(s):(i=Ww(f,u,o),s.stateNode=i,Xr(s))}return ue(s),null;case 5:if(Rt(s),o=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==u&&Xr(s);else{if(!u){if(s.stateNode===null)throw Error(r(166));return ue(s),null}if(i=lt.current,Vl(s))D0(s);else{switch(f=Cf(dt.current),i){case 1:i=f.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:i=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":i=f.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":i=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":i=f.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof u.is=="string"?f.createElement("select",{is:u.is}):f.createElement("select"),u.multiple?i.multiple=!0:u.size&&(i.size=u.size);break;default:i=typeof u.is=="string"?f.createElement(o,{is:u.is}):f.createElement(o)}}i[Oe]=s,i[Je]=u;t:for(f=s.child;f!==null;){if(f.tag===5||f.tag===6)i.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===s)break t;for(;f.sibling===null;){if(f.return===null||f.return===s)break t;f=f.return}f.sibling.return=f.return,f=f.sibling}s.stateNode=i;t:switch(_e(i,o,u),o){case"button":case"input":case"select":case"textarea":i=!!u.autoFocus;break t;case"img":i=!0;break t;default:i=!1}i&&Xr(s)}}return ue(s),s.flags&=-16777217,null;case 6:if(i&&s.stateNode!=null)i.memoizedProps!==u&&Xr(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(r(166));if(i=dt.current,Vl(s)){if(i=s.stateNode,o=s.memoizedProps,u=null,f=Ge,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}i[Oe]=s,i=!!(i.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||Yw(i.nodeValue,o)),i||Oa(s)}else i=Cf(i).createTextNode(u),i[Oe]=s,s.stateNode=i}return ue(s),null;case 13:if(u=s.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(f=Vl(s),u!==null&&u.dehydrated!==null){if(i===null){if(!f)throw Error(r(318));if(f=s.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[Oe]=s}else jl(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;ue(s),f=!1}else f=O0(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=f),f=!0;if(!f)return s.flags&256?(Kr(s),s):(Kr(s),null)}if(Kr(s),(s.flags&128)!==0)return s.lanes=o,s;if(o=u!==null,i=i!==null&&i.memoizedState!==null,o){u=s.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool);var m=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),m!==f&&(u.flags|=2048)}return o!==i&&o&&(s.child.flags|=8192),gf(s,s.updateQueue),ue(s),null;case 4:return St(),i===null&&mm(s.stateNode.containerInfo),ue(s),null;case 10:return jr(s.type),ue(s),null;case 19:if(Z(ke),f=s.memoizedState,f===null)return ue(s),null;if(u=(s.flags&128)!==0,m=f.rendering,m===null)if(u)ou(f,!1);else{if(he!==0||i!==null&&(i.flags&128)!==0)for(i=s.child;i!==null;){if(m=uf(i),m!==null){for(s.flags|=128,ou(f,!1),i=m.updateQueue,s.updateQueue=i,gf(s,i),s.subtreeFlags=0,i=o,o=s.child;o!==null;)C0(o,i),o=o.sibling;return it(ke,ke.current&1|2),s.child}i=i.sibling}f.tail!==null&&be()>pf&&(s.flags|=128,u=!0,ou(f,!1),s.lanes=4194304)}else{if(!u)if(i=uf(m),i!==null){if(s.flags|=128,u=!0,i=i.updateQueue,s.updateQueue=i,gf(s,i),ou(f,!0),f.tail===null&&f.tailMode==="hidden"&&!m.alternate&&!Kt)return ue(s),null}else 2*be()-f.renderingStartTime>pf&&o!==536870912&&(s.flags|=128,u=!0,ou(f,!1),s.lanes=4194304);f.isBackwards?(m.sibling=s.child,s.child=m):(i=f.last,i!==null?i.sibling=m:s.child=m,f.last=m)}return f.tail!==null?(s=f.tail,f.rendering=s,f.tail=s.sibling,f.renderingStartTime=be(),s.sibling=null,i=ke.current,it(ke,u?i&1|2:i&1),s):(ue(s),null);case 22:case 23:return Kr(s),pg(),u=s.memoizedState!==null,i!==null?i.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(o&536870912)!==0&&(s.flags&128)===0&&(ue(s),s.subtreeFlags&6&&(s.flags|=8192)):ue(s),o=s.updateQueue,o!==null&&gf(s,o.retryQueue),o=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==o&&(s.flags|=2048),i!==null&&Z(Ba),null;case 24:return o=null,i!==null&&(o=i.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),jr(Ce),ue(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function OE(i,s){switch(rg(s),s.tag){case 1:return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 3:return jr(Ce),St(),i=s.flags,(i&65536)!==0&&(i&128)===0?(s.flags=i&-65537|128,s):null;case 26:case 27:case 5:return Rt(s),null;case 13:if(Kr(s),i=s.memoizedState,i!==null&&i.dehydrated!==null){if(s.alternate===null)throw Error(r(340));jl()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 19:return Z(ke),null;case 4:return St(),null;case 10:return jr(s.type),null;case 22:case 23:return Kr(s),pg(),i!==null&&Z(Ba),i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 24:return jr(Ce),null;case 25:return null;default:return null}}function tw(i,s){switch(rg(s),s.tag){case 3:jr(Ce),St();break;case 26:case 27:case 5:Rt(s);break;case 4:St();break;case 13:Kr(s);break;case 19:Z(ke);break;case 10:jr(s.type);break;case 22:case 23:Kr(s),pg(),i!==null&&Z(Ba);break;case 24:jr(Ce)}}function lu(i,s){try{var o=s.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var f=u.next;o=f;do{if((o.tag&i)===i){u=void 0;var m=o.create,S=o.inst;u=m(),S.destroy=u}o=o.next}while(o!==f)}}catch(E){ne(s,s.return,E)}}function Vs(i,s,o){try{var u=s.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var m=f.next;u=m;do{if((u.tag&i)===i){var S=u.inst,E=S.destroy;if(E!==void 0){S.destroy=void 0,f=s;var R=o,X=E;try{X()}catch(at){ne(f,R,at)}}}u=u.next}while(u!==m)}}catch(at){ne(s,s.return,at)}}function ew(i){var s=i.updateQueue;if(s!==null){var o=i.stateNode;try{$0(s,o)}catch(u){ne(i,i.return,u)}}}function nw(i,s,o){o.props=La(i.type,i.memoizedProps),o.state=i.memoizedState;try{o.componentWillUnmount()}catch(u){ne(i,s,u)}}function uu(i,s){try{var o=i.ref;if(o!==null){switch(i.tag){case 26:case 27:case 5:var u=i.stateNode;break;case 30:u=i.stateNode;break;default:u=i.stateNode}typeof o=="function"?i.refCleanup=o(u):o.current=u}}catch(f){ne(i,s,f)}}function fr(i,s){var o=i.ref,u=i.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(f){ne(i,s,f)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){ne(i,s,f)}else o.current=null}function rw(i){var s=i.type,o=i.memoizedProps,u=i.stateNode;try{t:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break t;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(f){ne(i,i.return,f)}}function jg(i,s,o){try{var u=i.stateNode;QE(u,i.type,o,s),u[Je]=s}catch(f){ne(i,i.return,f)}}function iw(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Qs(i.type)||i.tag===4}function Yg(i){t:for(;;){for(;i.sibling===null;){if(i.return===null||iw(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Qs(i.type)||i.flags&2||i.child===null||i.tag===4)continue t;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Kg(i,s,o){var u=i.tag;if(u===5||u===6)i=i.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(i,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(i),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=Nf));else if(u!==4&&(u===27&&Qs(i.type)&&(o=i.stateNode,s=null),i=i.child,i!==null))for(Kg(i,s,o),i=i.sibling;i!==null;)Kg(i,s,o),i=i.sibling}function mf(i,s,o){var u=i.tag;if(u===5||u===6)i=i.stateNode,s?o.insertBefore(i,s):o.appendChild(i);else if(u!==4&&(u===27&&Qs(i.type)&&(o=i.stateNode),i=i.child,i!==null))for(mf(i,s,o),i=i.sibling;i!==null;)mf(i,s,o),i=i.sibling}function sw(i){var s=i.stateNode,o=i.memoizedProps;try{for(var u=i.type,f=s.attributes;f.length;)s.removeAttributeNode(f[0]);_e(s,u,o),s[Oe]=i,s[Je]=o}catch(m){ne(i,i.return,m)}}var Fr=!1,pe=!1,Gg=!1,aw=typeof WeakSet=="function"?WeakSet:Set,Re=null;function ME(i,s){if(i=i.containerInfo,vm=Rf,i=p0(i),Yh(i)){if("selectionStart"in i)var o={start:i.selectionStart,end:i.selectionEnd};else t:{o=(o=i.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var f=u.anchorOffset,m=u.focusNode;u=u.focusOffset;try{o.nodeType,m.nodeType}catch{o=null;break t}var S=0,E=-1,R=-1,X=0,at=0,ct=i,F=null;e:for(;;){for(var Q;ct!==o||f!==0&&ct.nodeType!==3||(E=S+f),ct!==m||u!==0&&ct.nodeType!==3||(R=S+u),ct.nodeType===3&&(S+=ct.nodeValue.length),(Q=ct.firstChild)!==null;)F=ct,ct=Q;for(;;){if(ct===i)break e;if(F===o&&++X===f&&(E=S),F===m&&++at===u&&(R=S),(Q=ct.nextSibling)!==null)break;ct=F,F=ct.parentNode}ct=Q}o=E===-1||R===-1?null:{start:E,end:R}}else o=null}o=o||{start:0,end:0}}else o=null;for(wm={focusedElem:i,selectionRange:o},Rf=!1,Re=s;Re!==null;)if(s=Re,i=s.child,(s.subtreeFlags&1024)!==0&&i!==null)i.return=s,Re=i;else for(;Re!==null;){switch(s=Re,m=s.alternate,i=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&m!==null){i=void 0,o=s,f=m.memoizedProps,m=m.memoizedState,u=o.stateNode;try{var It=La(o.type,f,o.elementType===o.type);i=u.getSnapshotBeforeUpdate(It,m),u.__reactInternalSnapshotBeforeUpdate=i}catch(Ct){ne(o,o.return,Ct)}}break;case 3:if((i&1024)!==0){if(i=s.stateNode.containerInfo,o=i.nodeType,o===9)xm(i);else if(o===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":xm(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=s.sibling,i!==null){i.return=s.return,Re=i;break}Re=s.return}}function ow(i,s,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:js(i,o),u&4&&lu(5,o);break;case 1:if(js(i,o),u&4)if(i=o.stateNode,s===null)try{i.componentDidMount()}catch(S){ne(o,o.return,S)}else{var f=La(o.type,s.memoizedProps);s=s.memoizedState;try{i.componentDidUpdate(f,s,i.__reactInternalSnapshotBeforeUpdate)}catch(S){ne(o,o.return,S)}}u&64&&ew(o),u&512&&uu(o,o.return);break;case 3:if(js(i,o),u&64&&(i=o.updateQueue,i!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{$0(i,s)}catch(S){ne(o,o.return,S)}}break;case 27:s===null&&u&4&&sw(o);case 26:case 5:js(i,o),s===null&&u&4&&rw(o),u&512&&uu(o,o.return);break;case 12:js(i,o);break;case 13:js(i,o),u&4&&cw(i,o),u&64&&(i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(o=JE.bind(null,o),sN(i,o))));break;case 22:if(u=o.memoizedState!==null||Fr,!u){s=s!==null&&s.memoizedState!==null||pe,f=Fr;var m=pe;Fr=u,(pe=s)&&!m?Ys(i,o,(o.subtreeFlags&8772)!==0):js(i,o),Fr=f,pe=m}break;case 30:break;default:js(i,o)}}function lw(i){var s=i.alternate;s!==null&&(i.alternate=null,lw(s)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(s=i.stateNode,s!==null&&Dl(s)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var se=null,We=!1;function Zr(i,s,o){for(o=o.child;o!==null;)uw(i,s,o),o=o.sibling}function uw(i,s,o){if(Ne&&typeof Ne.onCommitFiberUnmount=="function")try{Ne.onCommitFiberUnmount(bn,o)}catch{}switch(o.tag){case 26:pe||fr(o,s),Zr(i,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:pe||fr(o,s);var u=se,f=We;Qs(o.type)&&(se=o.stateNode,We=!1),Zr(i,s,o),vu(o.stateNode),se=u,We=f;break;case 5:pe||fr(o,s);case 6:if(u=se,f=We,se=null,Zr(i,s,o),se=u,We=f,se!==null)if(We)try{(se.nodeType===9?se.body:se.nodeName==="HTML"?se.ownerDocument.body:se).removeChild(o.stateNode)}catch(m){ne(o,s,m)}else try{se.removeChild(o.stateNode)}catch(m){ne(o,s,m)}break;case 18:se!==null&&(We?(i=se,Zw(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,o.stateNode),Nu(i)):Zw(se,o.stateNode));break;case 4:u=se,f=We,se=o.stateNode.containerInfo,We=!0,Zr(i,s,o),se=u,We=f;break;case 0:case 11:case 14:case 15:pe||Vs(2,o,s),pe||Vs(4,o,s),Zr(i,s,o);break;case 1:pe||(fr(o,s),u=o.stateNode,typeof u.componentWillUnmount=="function"&&nw(o,s,u)),Zr(i,s,o);break;case 21:Zr(i,s,o);break;case 22:pe=(u=pe)||o.memoizedState!==null,Zr(i,s,o),pe=u;break;default:Zr(i,s,o)}}function cw(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Nu(i)}catch(o){ne(s,s.return,o)}}function RE(i){switch(i.tag){case 13:case 19:var s=i.stateNode;return s===null&&(s=i.stateNode=new aw),s;case 22:return i=i.stateNode,s=i._retryCache,s===null&&(s=i._retryCache=new aw),s;default:throw Error(r(435,i.tag))}}function Xg(i,s){var o=RE(i);s.forEach(function(u){var f=$E.bind(null,i,u);o.has(u)||(o.add(u),u.then(f,f))})}function un(i,s){var o=s.deletions;if(o!==null)for(var u=0;u<o.length;u++){var f=o[u],m=i,S=s,E=S;t:for(;E!==null;){switch(E.tag){case 27:if(Qs(E.type)){se=E.stateNode,We=!1;break t}break;case 5:se=E.stateNode,We=!1;break t;case 3:case 4:se=E.stateNode.containerInfo,We=!0;break t}E=E.return}if(se===null)throw Error(r(160));uw(m,S,f),se=null,We=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)fw(s,i),s=s.sibling}var Kn=null;function fw(i,s){var o=i.alternate,u=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:un(s,i),cn(i),u&4&&(Vs(3,i,i.return),lu(3,i),Vs(5,i,i.return));break;case 1:un(s,i),cn(i),u&512&&(pe||o===null||fr(o,o.return)),u&64&&Fr&&(i=i.updateQueue,i!==null&&(u=i.callbacks,u!==null&&(o=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var f=Kn;if(un(s,i),cn(i),u&512&&(pe||o===null||fr(o,o.return)),u&4){var m=o!==null?o.memoizedState:null;if(u=i.memoizedState,o===null)if(u===null)if(i.stateNode===null){t:{u=i.type,o=i.memoizedProps,f=f.ownerDocument||f;e:switch(u){case"title":m=f.getElementsByTagName("title")[0],(!m||m[Sa]||m[Oe]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(u),f.head.insertBefore(m,f.querySelector("head > title"))),_e(m,u,o),m[Oe]=i,Se(m),u=m;break t;case"link":var S=sb("link","href",f).get(u+(o.href||""));if(S){for(var E=0;E<S.length;E++)if(m=S[E],m.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&m.getAttribute("rel")===(o.rel==null?null:o.rel)&&m.getAttribute("title")===(o.title==null?null:o.title)&&m.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){S.splice(E,1);break e}}m=f.createElement(u),_e(m,u,o),f.head.appendChild(m);break;case"meta":if(S=sb("meta","content",f).get(u+(o.content||""))){for(E=0;E<S.length;E++)if(m=S[E],m.getAttribute("content")===(o.content==null?null:""+o.content)&&m.getAttribute("name")===(o.name==null?null:o.name)&&m.getAttribute("property")===(o.property==null?null:o.property)&&m.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&m.getAttribute("charset")===(o.charSet==null?null:o.charSet)){S.splice(E,1);break e}}m=f.createElement(u),_e(m,u,o),f.head.appendChild(m);break;default:throw Error(r(468,u))}m[Oe]=i,Se(m),u=m}i.stateNode=u}else ab(f,i.type,i.stateNode);else i.stateNode=ib(f,u,i.memoizedProps);else m!==u?(m===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):m.count--,u===null?ab(f,i.type,i.stateNode):ib(f,u,i.memoizedProps)):u===null&&i.stateNode!==null&&jg(i,i.memoizedProps,o.memoizedProps)}break;case 27:un(s,i),cn(i),u&512&&(pe||o===null||fr(o,o.return)),o!==null&&u&4&&jg(i,i.memoizedProps,o.memoizedProps);break;case 5:if(un(s,i),cn(i),u&512&&(pe||o===null||fr(o,o.return)),i.flags&32){f=i.stateNode;try{ho(f,"")}catch(Q){ne(i,i.return,Q)}}u&4&&i.stateNode!=null&&(f=i.memoizedProps,jg(i,f,o!==null?o.memoizedProps:f)),u&1024&&(Gg=!0);break;case 6:if(un(s,i),cn(i),u&4){if(i.stateNode===null)throw Error(r(162));u=i.memoizedProps,o=i.stateNode;try{o.nodeValue=u}catch(Q){ne(i,i.return,Q)}}break;case 3:if(If=null,f=Kn,Kn=kf(s.containerInfo),un(s,i),Kn=f,cn(i),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Nu(s.containerInfo)}catch(Q){ne(i,i.return,Q)}Gg&&(Gg=!1,dw(i));break;case 4:u=Kn,Kn=kf(i.stateNode.containerInfo),un(s,i),cn(i),Kn=u;break;case 12:un(s,i),cn(i);break;case 13:un(s,i),cn(i),i.child.flags&8192&&i.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(em=be()),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Xg(i,u)));break;case 22:f=i.memoizedState!==null;var R=o!==null&&o.memoizedState!==null,X=Fr,at=pe;if(Fr=X||f,pe=at||R,un(s,i),pe=at,Fr=X,cn(i),u&8192)t:for(s=i.stateNode,s._visibility=f?s._visibility&-2:s._visibility|1,f&&(o===null||R||Fr||pe||_a(i)),o=null,s=i;;){if(s.tag===5||s.tag===26){if(o===null){R=o=s;try{if(m=R.stateNode,f)S=m.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{E=R.stateNode;var ct=R.memoizedProps.style,F=ct!=null&&ct.hasOwnProperty("display")?ct.display:null;E.style.display=F==null||typeof F=="boolean"?"":(""+F).trim()}}catch(Q){ne(R,R.return,Q)}}}else if(s.tag===6){if(o===null){R=s;try{R.stateNode.nodeValue=f?"":R.memoizedProps}catch(Q){ne(R,R.return,Q)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===i)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break t;for(;s.sibling===null;){if(s.return===null||s.return===i)break t;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=i.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Xg(i,o))));break;case 19:un(s,i),cn(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Xg(i,u)));break;case 30:break;case 21:break;default:un(s,i),cn(i)}}function cn(i){var s=i.flags;if(s&2){try{for(var o,u=i.return;u!==null;){if(iw(u)){o=u;break}u=u.return}if(o==null)throw Error(r(160));switch(o.tag){case 27:var f=o.stateNode,m=Yg(i);mf(i,m,f);break;case 5:var S=o.stateNode;o.flags&32&&(ho(S,""),o.flags&=-33);var E=Yg(i);mf(i,E,S);break;case 3:case 4:var R=o.stateNode.containerInfo,X=Yg(i);Kg(i,X,R);break;default:throw Error(r(161))}}catch(at){ne(i,i.return,at)}i.flags&=-3}s&4096&&(i.flags&=-4097)}function dw(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var s=i;dw(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),i=i.sibling}}function js(i,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)ow(i,s.alternate,s),s=s.sibling}function _a(i){for(i=i.child;i!==null;){var s=i;switch(s.tag){case 0:case 11:case 14:case 15:Vs(4,s,s.return),_a(s);break;case 1:fr(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&nw(s,s.return,o),_a(s);break;case 27:vu(s.stateNode);case 26:case 5:fr(s,s.return),_a(s);break;case 22:s.memoizedState===null&&_a(s);break;case 30:_a(s);break;default:_a(s)}i=i.sibling}}function Ys(i,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,f=i,m=s,S=m.flags;switch(m.tag){case 0:case 11:case 15:Ys(f,m,o),lu(4,m);break;case 1:if(Ys(f,m,o),u=m,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(X){ne(u,u.return,X)}if(u=m,f=u.updateQueue,f!==null){var E=u.stateNode;try{var R=f.shared.hiddenCallbacks;if(R!==null)for(f.shared.hiddenCallbacks=null,f=0;f<R.length;f++)J0(R[f],E)}catch(X){ne(u,u.return,X)}}o&&S&64&&ew(m),uu(m,m.return);break;case 27:sw(m);case 26:case 5:Ys(f,m,o),o&&u===null&&S&4&&rw(m),uu(m,m.return);break;case 12:Ys(f,m,o);break;case 13:Ys(f,m,o),o&&S&4&&cw(f,m);break;case 22:m.memoizedState===null&&Ys(f,m,o),uu(m,m.return);break;case 30:break;default:Ys(f,m,o)}s=s.sibling}}function Fg(i,s){var o=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),i=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(i=s.memoizedState.cachePool.pool),i!==o&&(i!=null&&i.refCount++,o!=null&&Gl(o))}function Zg(i,s){i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&Gl(i))}function dr(i,s,o,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)hw(i,s,o,u),s=s.sibling}function hw(i,s,o,u){var f=s.flags;switch(s.tag){case 0:case 11:case 15:dr(i,s,o,u),f&2048&&lu(9,s);break;case 1:dr(i,s,o,u);break;case 3:dr(i,s,o,u),f&2048&&(i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&Gl(i)));break;case 12:if(f&2048){dr(i,s,o,u),i=s.stateNode;try{var m=s.memoizedProps,S=m.id,E=m.onPostCommit;typeof E=="function"&&E(S,s.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(R){ne(s,s.return,R)}}else dr(i,s,o,u);break;case 13:dr(i,s,o,u);break;case 23:break;case 22:m=s.stateNode,S=s.alternate,s.memoizedState!==null?m._visibility&2?dr(i,s,o,u):cu(i,s):m._visibility&2?dr(i,s,o,u):(m._visibility|=2,Mo(i,s,o,u,(s.subtreeFlags&10256)!==0)),f&2048&&Fg(S,s);break;case 24:dr(i,s,o,u),f&2048&&Zg(s.alternate,s);break;default:dr(i,s,o,u)}}function Mo(i,s,o,u,f){for(f=f&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var m=i,S=s,E=o,R=u,X=S.flags;switch(S.tag){case 0:case 11:case 15:Mo(m,S,E,R,f),lu(8,S);break;case 23:break;case 22:var at=S.stateNode;S.memoizedState!==null?at._visibility&2?Mo(m,S,E,R,f):cu(m,S):(at._visibility|=2,Mo(m,S,E,R,f)),f&&X&2048&&Fg(S.alternate,S);break;case 24:Mo(m,S,E,R,f),f&&X&2048&&Zg(S.alternate,S);break;default:Mo(m,S,E,R,f)}s=s.sibling}}function cu(i,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=i,u=s,f=u.flags;switch(u.tag){case 22:cu(o,u),f&2048&&Fg(u.alternate,u);break;case 24:cu(o,u),f&2048&&Zg(u.alternate,u);break;default:cu(o,u)}s=s.sibling}}var fu=8192;function Ro(i){if(i.subtreeFlags&fu)for(i=i.child;i!==null;)gw(i),i=i.sibling}function gw(i){switch(i.tag){case 26:Ro(i),i.flags&fu&&i.memoizedState!==null&&vN(Kn,i.memoizedState,i.memoizedProps);break;case 5:Ro(i);break;case 3:case 4:var s=Kn;Kn=kf(i.stateNode.containerInfo),Ro(i),Kn=s;break;case 22:i.memoizedState===null&&(s=i.alternate,s!==null&&s.memoizedState!==null?(s=fu,fu=16777216,Ro(i),fu=s):Ro(i));break;default:Ro(i)}}function mw(i){var s=i.alternate;if(s!==null&&(i=s.child,i!==null)){s.child=null;do s=i.sibling,i.sibling=null,i=s;while(i!==null)}}function du(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];Re=u,pw(u,i)}mw(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)yw(i),i=i.sibling}function yw(i){switch(i.tag){case 0:case 11:case 15:du(i),i.flags&2048&&Vs(9,i,i.return);break;case 3:du(i);break;case 12:du(i);break;case 22:var s=i.stateNode;i.memoizedState!==null&&s._visibility&2&&(i.return===null||i.return.tag!==13)?(s._visibility&=-3,yf(i)):du(i);break;default:du(i)}}function yf(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];Re=u,pw(u,i)}mw(i)}for(i=i.child;i!==null;){switch(s=i,s.tag){case 0:case 11:case 15:Vs(8,s,s.return),yf(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,yf(s));break;default:yf(s)}i=i.sibling}}function pw(i,s){for(;Re!==null;){var o=Re;switch(o.tag){case 0:case 11:case 15:Vs(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Gl(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,Re=u;else t:for(o=i;Re!==null;){u=Re;var f=u.sibling,m=u.return;if(lw(u),u===o){Re=null;break t}if(f!==null){f.return=m,Re=f;break t}Re=m}}}var BE={getCacheForType:function(i){var s=$e(Ce),o=s.data.get(i);return o===void 0&&(o=i(),s.data.set(i,o)),o}},zE=typeof WeakMap=="function"?WeakMap:Map,Xt=0,ie=null,_t=null,Ht=0,Ft=0,fn=null,Ks=!1,Bo=!1,Qg=!1,Qr=0,he=0,Gs=0,Ua=0,Wg=0,Nn=0,zo=0,hu=null,tn=null,tm=!1,em=0,pf=1/0,vf=null,Xs=null,Le=0,Fs=null,Lo=null,_o=0,nm=0,rm=null,vw=null,gu=0,im=null;function dn(){if((Xt&2)!==0&&Ht!==0)return Ht&-Ht;if(I.T!==null){var i=Ao;return i!==0?i:fm()}return Ac()}function ww(){Nn===0&&(Nn=(Ht&536870912)===0||Kt?Sc():536870912);var i=En.current;return i!==null&&(i.flags|=32),Nn}function hn(i,s,o){(i===ie&&(Ft===2||Ft===9)||i.cancelPendingCommit!==null)&&(Uo(i,0),Zs(i,Ht,Nn,!1)),ba(i,o),((Xt&2)===0||i!==ie)&&(i===ie&&((Xt&2)===0&&(Ua|=o),he===4&&Zs(i,Ht,Nn,!1)),hr(i))}function bw(i,s,o){if((Xt&6)!==0)throw Error(r(327));var u=!o&&(s&124)===0&&(s&i.expiredLanes)===0||wa(i,s),f=u?UE(i,s):om(i,s,!0),m=u;do{if(f===0){Bo&&!u&&Zs(i,s,0,!1);break}else{if(o=i.current.alternate,m&&!LE(o)){f=om(i,s,!1),m=!1;continue}if(f===2){if(m=s,i.errorRecoveryDisabledLanes&m)var S=0;else S=i.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){s=S;t:{var E=i;f=hu;var R=E.current.memoizedState.isDehydrated;if(R&&(Uo(E,S).flags|=256),S=om(E,S,!1),S!==2){if(Qg&&!R){E.errorRecoveryDisabledLanes|=m,Ua|=m,f=4;break t}m=tn,tn=f,m!==null&&(tn===null?tn=m:tn.push.apply(tn,m))}f=S}if(m=!1,f!==2)continue}}if(f===1){Uo(i,0),Zs(i,s,0,!0);break}t:{switch(u=i,m=f,m){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:Zs(u,s,Nn,!Ks);break t;case 2:tn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(f=em+300-be(),10<f)){if(Zs(u,s,Nn,!Ks),oo(u,0,!0)!==0)break t;u.timeoutHandle=Xw(Sw.bind(null,u,o,tn,vf,tm,s,Nn,Ua,zo,Ks,m,2,-0,0),f);break t}Sw(u,o,tn,vf,tm,s,Nn,Ua,zo,Ks,m,0,-0,0)}}break}while(!0);hr(i)}function Sw(i,s,o,u,f,m,S,E,R,X,at,ct,F,Q){if(i.timeoutHandle=-1,ct=s.subtreeFlags,(ct&8192||(ct&16785408)===16785408)&&(Su={stylesheets:null,count:0,unsuspend:pN},gw(s),ct=wN(),ct!==null)){i.cancelPendingCommit=ct(kw.bind(null,i,s,m,o,u,f,S,E,R,at,1,F,Q)),Zs(i,m,S,!X);return}kw(i,s,m,o,u,f,S,E,R)}function LE(i){for(var s=i;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var f=o[u],m=f.getSnapshot;f=f.value;try{if(!on(m(),f))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Zs(i,s,o,u){s&=~Wg,s&=~Ua,i.suspendedLanes|=s,i.pingedLanes&=~s,u&&(i.warmLanes|=s),u=i.expirationTimes;for(var f=s;0<f;){var m=31-Ke(f),S=1<<m;u[m]=-1,f&=~S}o!==0&&Tc(i,o,s)}function wf(){return(Xt&6)===0?(mu(0),!1):!0}function sm(){if(_t!==null){if(Ft===0)var i=_t.return;else i=_t,Vr=Ma=null,xg(i),Io=null,su=0,i=_t;for(;i!==null;)tw(i.alternate,i),i=i.return;_t=null}}function Uo(i,s){var o=i.timeoutHandle;o!==-1&&(i.timeoutHandle=-1,tN(o)),o=i.cancelPendingCommit,o!==null&&(i.cancelPendingCommit=null,o()),sm(),ie=i,_t=o=Jr(i.current,null),Ht=s,Ft=0,fn=null,Ks=!1,Bo=wa(i,s),Qg=!1,zo=Nn=Wg=Ua=Gs=he=0,tn=hu=null,tm=!1,(s&8)!==0&&(s|=s&32);var u=i.entangledLanes;if(u!==0)for(i=i.entanglements,u&=s;0<u;){var f=31-Ke(u),m=1<<f;s|=i[f],u&=~m}return Qr=s,Pc(),o}function xw(i,s){zt=null,I.H=af,s===Fl||s===Xc?(s=q0(),Ft=3):s===L0?(s=q0(),Ft=4):Ft=s===Pv?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,fn=s,_t===null&&(he=1,ff(i,Sn(s,i.current)))}function Tw(){var i=I.H;return I.H=af,i===null?af:i}function Aw(){var i=I.A;return I.A=BE,i}function am(){he=4,Ks||(Ht&4194048)!==Ht&&En.current!==null||(Bo=!0),(Gs&134217727)===0&&(Ua&134217727)===0||ie===null||Zs(ie,Ht,Nn,!1)}function om(i,s,o){var u=Xt;Xt|=2;var f=Tw(),m=Aw();(ie!==i||Ht!==s)&&(vf=null,Uo(i,s)),s=!1;var S=he;t:do try{if(Ft!==0&&_t!==null){var E=_t,R=fn;switch(Ft){case 8:sm(),S=6;break t;case 3:case 2:case 9:case 6:En.current===null&&(s=!0);var X=Ft;if(Ft=0,fn=null,qo(i,E,R,X),o&&Bo){S=0;break t}break;default:X=Ft,Ft=0,fn=null,qo(i,E,R,X)}}_E(),S=he;break}catch(at){xw(i,at)}while(!0);return s&&i.shellSuspendCounter++,Vr=Ma=null,Xt=u,I.H=f,I.A=m,_t===null&&(ie=null,Ht=0,Pc()),S}function _E(){for(;_t!==null;)Ew(_t)}function UE(i,s){var o=Xt;Xt|=2;var u=Tw(),f=Aw();ie!==i||Ht!==s?(vf=null,pf=be()+500,Uo(i,s)):Bo=wa(i,s);t:do try{if(Ft!==0&&_t!==null){s=_t;var m=fn;e:switch(Ft){case 1:Ft=0,fn=null,qo(i,s,m,1);break;case 2:case 9:if(_0(m)){Ft=0,fn=null,Nw(s);break}s=function(){Ft!==2&&Ft!==9||ie!==i||(Ft=7),hr(i)},m.then(s,s);break t;case 3:Ft=7;break t;case 4:Ft=5;break t;case 7:_0(m)?(Ft=0,fn=null,Nw(s)):(Ft=0,fn=null,qo(i,s,m,7));break;case 5:var S=null;switch(_t.tag){case 26:S=_t.memoizedState;case 5:case 27:var E=_t;if(!S||ob(S)){Ft=0,fn=null;var R=E.sibling;if(R!==null)_t=R;else{var X=E.return;X!==null?(_t=X,bf(X)):_t=null}break e}}Ft=0,fn=null,qo(i,s,m,5);break;case 6:Ft=0,fn=null,qo(i,s,m,6);break;case 8:sm(),he=6;break t;default:throw Error(r(462))}}qE();break}catch(at){xw(i,at)}while(!0);return Vr=Ma=null,I.H=u,I.A=f,Xt=o,_t!==null?0:(ie=null,Ht=0,Pc(),he)}function qE(){for(;_t!==null&&!Zt();)Ew(_t)}function Ew(i){var s=Qv(i.alternate,i,Qr);i.memoizedProps=i.pendingProps,s===null?bf(i):_t=s}function Nw(i){var s=i,o=s.alternate;switch(s.tag){case 15:case 0:s=Yv(o,s,s.pendingProps,s.type,void 0,Ht);break;case 11:s=Yv(o,s,s.pendingProps,s.type.render,s.ref,Ht);break;case 5:xg(s);default:tw(o,s),s=_t=C0(s,Qr),s=Qv(o,s,Qr)}i.memoizedProps=i.pendingProps,s===null?bf(i):_t=s}function qo(i,s,o,u){Vr=Ma=null,xg(s),Io=null,su=0;var f=s.return;try{if(kE(i,f,s,o,Ht)){he=1,ff(i,Sn(o,i.current)),_t=null;return}}catch(m){if(f!==null)throw _t=f,m;he=1,ff(i,Sn(o,i.current)),_t=null;return}s.flags&32768?(Kt||u===1?i=!0:Bo||(Ht&536870912)!==0?i=!1:(Ks=i=!0,(u===2||u===9||u===3||u===6)&&(u=En.current,u!==null&&u.tag===13&&(u.flags|=16384))),Cw(s,i)):bf(s)}function bf(i){var s=i;do{if((s.flags&32768)!==0){Cw(s,Ks);return}i=s.return;var o=IE(s.alternate,s,Qr);if(o!==null){_t=o;return}if(s=s.sibling,s!==null){_t=s;return}_t=s=i}while(s!==null);he===0&&(he=5)}function Cw(i,s){do{var o=OE(i.alternate,i);if(o!==null){o.flags&=32767,_t=o;return}if(o=i.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(i=i.sibling,i!==null)){_t=i;return}_t=i=o}while(i!==null);he=6,_t=null}function kw(i,s,o,u,f,m,S,E,R){i.cancelPendingCommit=null;do Sf();while(Le!==0);if((Xt&6)!==0)throw Error(r(327));if(s!==null){if(s===i.current)throw Error(r(177));if(m=s.lanes|s.childLanes,m|=Zh,Ah(i,o,m,S,E,R),i===ie&&(_t=ie=null,Ht=0),Lo=s,Fs=i,_o=o,nm=m,rm=f,vw=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,HE(Rr,function(){return Rw(),null})):(i.callbackNode=null,i.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=I.T,I.T=null,f=z.p,z.p=2,S=Xt,Xt|=4;try{ME(i,s,o)}finally{Xt=S,z.p=f,I.T=u}}Le=1,Dw(),Iw(),Ow()}}function Dw(){if(Le===1){Le=0;var i=Fs,s=Lo,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=I.T,I.T=null;var u=z.p;z.p=2;var f=Xt;Xt|=4;try{fw(s,i);var m=wm,S=p0(i.containerInfo),E=m.focusedElem,R=m.selectionRange;if(S!==E&&E&&E.ownerDocument&&y0(E.ownerDocument.documentElement,E)){if(R!==null&&Yh(E)){var X=R.start,at=R.end;if(at===void 0&&(at=X),"selectionStart"in E)E.selectionStart=X,E.selectionEnd=Math.min(at,E.value.length);else{var ct=E.ownerDocument||document,F=ct&&ct.defaultView||window;if(F.getSelection){var Q=F.getSelection(),It=E.textContent.length,Ct=Math.min(R.start,It),te=R.end===void 0?Ct:Math.min(R.end,It);!Q.extend&&Ct>te&&(S=te,te=Ct,Ct=S);var H=m0(E,Ct),q=m0(E,te);if(H&&q&&(Q.rangeCount!==1||Q.anchorNode!==H.node||Q.anchorOffset!==H.offset||Q.focusNode!==q.node||Q.focusOffset!==q.offset)){var G=ct.createRange();G.setStart(H.node,H.offset),Q.removeAllRanges(),Ct>te?(Q.addRange(G),Q.extend(q.node,q.offset)):(G.setEnd(q.node,q.offset),Q.addRange(G))}}}}for(ct=[],Q=E;Q=Q.parentNode;)Q.nodeType===1&&ct.push({element:Q,left:Q.scrollLeft,top:Q.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<ct.length;E++){var ut=ct[E];ut.element.scrollLeft=ut.left,ut.element.scrollTop=ut.top}}Rf=!!vm,wm=vm=null}finally{Xt=f,z.p=u,I.T=o}}i.current=s,Le=2}}function Iw(){if(Le===2){Le=0;var i=Fs,s=Lo,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=I.T,I.T=null;var u=z.p;z.p=2;var f=Xt;Xt|=4;try{ow(i,s.alternate,s)}finally{Xt=f,z.p=u,I.T=o}}Le=3}}function Ow(){if(Le===4||Le===3){Le=0,le();var i=Fs,s=Lo,o=_o,u=vw;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Le=5:(Le=0,Lo=Fs=null,Mw(i,i.pendingLanes));var f=i.pendingLanes;if(f===0&&(Xs=null),Cl(o),s=s.stateNode,Ne&&typeof Ne.onCommitFiberRoot=="function")try{Ne.onCommitFiberRoot(bn,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=I.T,f=z.p,z.p=2,I.T=null;try{for(var m=i.onRecoverableError,S=0;S<u.length;S++){var E=u[S];m(E.value,{componentStack:E.stack})}}finally{I.T=s,z.p=f}}(_o&3)!==0&&Sf(),hr(i),f=i.pendingLanes,(o&4194090)!==0&&(f&42)!==0?i===im?gu++:(gu=0,im=i):gu=0,mu(0)}}function Mw(i,s){(i.pooledCacheLanes&=s)===0&&(s=i.pooledCache,s!=null&&(i.pooledCache=null,Gl(s)))}function Sf(i){return Dw(),Iw(),Ow(),Rw()}function Rw(){if(Le!==5)return!1;var i=Fs,s=nm;nm=0;var o=Cl(_o),u=I.T,f=z.p;try{z.p=32>o?32:o,I.T=null,o=rm,rm=null;var m=Fs,S=_o;if(Le=0,Lo=Fs=null,_o=0,(Xt&6)!==0)throw Error(r(331));var E=Xt;if(Xt|=4,yw(m.current),hw(m,m.current,S,o),Xt=E,mu(0,!1),Ne&&typeof Ne.onPostCommitFiberRoot=="function")try{Ne.onPostCommitFiberRoot(bn,m)}catch{}return!0}finally{z.p=f,I.T=u,Mw(i,s)}}function Bw(i,s,o){s=Sn(o,s),s=Lg(i.stateNode,s,2),i=Ps(i,s,2),i!==null&&(ba(i,2),hr(i))}function ne(i,s,o){if(i.tag===3)Bw(i,i,o);else for(;s!==null;){if(s.tag===3){Bw(s,i,o);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Xs===null||!Xs.has(u))){i=Sn(o,i),o=Uv(2),u=Ps(s,o,2),u!==null&&(qv(o,u,s,i),ba(u,2),hr(u));break}}s=s.return}}function lm(i,s,o){var u=i.pingCache;if(u===null){u=i.pingCache=new zE;var f=new Set;u.set(s,f)}else f=u.get(s),f===void 0&&(f=new Set,u.set(s,f));f.has(o)||(Qg=!0,f.add(o),i=PE.bind(null,i,s,o),s.then(i,i))}function PE(i,s,o){var u=i.pingCache;u!==null&&u.delete(s),i.pingedLanes|=i.suspendedLanes&o,i.warmLanes&=~o,ie===i&&(Ht&o)===o&&(he===4||he===3&&(Ht&62914560)===Ht&&300>be()-em?(Xt&2)===0&&Uo(i,0):Wg|=o,zo===Ht&&(zo=0)),hr(i)}function zw(i,s){s===0&&(s=xc()),i=bo(i,s),i!==null&&(ba(i,s),hr(i))}function JE(i){var s=i.memoizedState,o=0;s!==null&&(o=s.retryLane),zw(i,o)}function $E(i,s){var o=0;switch(i.tag){case 13:var u=i.stateNode,f=i.memoizedState;f!==null&&(o=f.retryLane);break;case 19:u=i.stateNode;break;case 22:u=i.stateNode._retryCache;break;default:throw Error(r(314))}u!==null&&u.delete(s),zw(i,o)}function HE(i,s){return Ot(i,s)}var xf=null,Po=null,um=!1,Tf=!1,cm=!1,qa=0;function hr(i){i!==Po&&i.next===null&&(Po===null?xf=Po=i:Po=Po.next=i),Tf=!0,um||(um=!0,jE())}function mu(i,s){if(!cm&&Tf){cm=!0;do for(var o=!1,u=xf;u!==null;){if(i!==0){var f=u.pendingLanes;if(f===0)var m=0;else{var S=u.suspendedLanes,E=u.pingedLanes;m=(1<<31-Ke(42|i)+1)-1,m&=f&~(S&~E),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(o=!0,qw(u,m))}else m=Ht,m=oo(u,u===ie?m:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(m&3)===0||wa(u,m)||(o=!0,qw(u,m));u=u.next}while(o);cm=!1}}function VE(){Lw()}function Lw(){Tf=um=!1;var i=0;qa!==0&&(WE()&&(i=qa),qa=0);for(var s=be(),o=null,u=xf;u!==null;){var f=u.next,m=_w(u,s);m===0?(u.next=null,o===null?xf=f:o.next=f,f===null&&(Po=o)):(o=u,(i!==0||(m&3)!==0)&&(Tf=!0)),u=f}mu(i)}function _w(i,s){for(var o=i.suspendedLanes,u=i.pingedLanes,f=i.expirationTimes,m=i.pendingLanes&-62914561;0<m;){var S=31-Ke(m),E=1<<S,R=f[S];R===-1?((E&o)===0||(E&u)!==0)&&(f[S]=Th(E,s)):R<=s&&(i.expiredLanes|=E),m&=~E}if(s=ie,o=Ht,o=oo(i,i===s?o:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u=i.callbackNode,o===0||i===s&&(Ft===2||Ft===9)||i.cancelPendingCommit!==null)return u!==null&&u!==null&&kt(u),i.callbackNode=null,i.callbackPriority=0;if((o&3)===0||wa(i,o)){if(s=o&-o,s===i.callbackPriority)return s;switch(u!==null&&kt(u),Cl(o)){case 2:case 8:o=pa;break;case 32:o=Rr;break;case 268435456:o=Os;break;default:o=Rr}return u=Uw.bind(null,i),o=Ot(o,u),i.callbackPriority=s,i.callbackNode=o,s}return u!==null&&u!==null&&kt(u),i.callbackPriority=2,i.callbackNode=null,2}function Uw(i,s){if(Le!==0&&Le!==5)return i.callbackNode=null,i.callbackPriority=0,null;var o=i.callbackNode;if(Sf()&&i.callbackNode!==o)return null;var u=Ht;return u=oo(i,i===ie?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u===0?null:(bw(i,u,s),_w(i,be()),i.callbackNode!=null&&i.callbackNode===o?Uw.bind(null,i):null)}function qw(i,s){if(Sf())return null;bw(i,s,!0)}function jE(){eN(function(){(Xt&6)!==0?Ot(ya,VE):Lw()})}function fm(){return qa===0&&(qa=Sc()),qa}function Pw(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Rc(""+i)}function Jw(i,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,i.id&&o.setAttribute("form",i.id),s.parentNode.insertBefore(o,s),i=new FormData(i),o.parentNode.removeChild(o),i}function YE(i,s,o,u,f){if(s==="submit"&&o&&o.stateNode===f){var m=Pw((f[Je]||null).action),S=u.submitter;S&&(s=(s=S[Je]||null)?Pw(s.formAction):S.getAttribute("formAction"),s!==null&&(m=s,S=null));var E=new _c("action","action",null,u,f);i.push({event:E,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(qa!==0){var R=S?Jw(f,S):new FormData(f);Og(o,{pending:!0,data:R,method:f.method,action:m},null,R)}}else typeof m=="function"&&(E.preventDefault(),R=S?Jw(f,S):new FormData(f),Og(o,{pending:!0,data:R,method:f.method,action:m},m,R))},currentTarget:f}]})}}for(var dm=0;dm<Fh.length;dm++){var hm=Fh[dm],KE=hm.toLowerCase(),GE=hm[0].toUpperCase()+hm.slice(1);Yn(KE,"on"+GE)}Yn(b0,"onAnimationEnd"),Yn(S0,"onAnimationIteration"),Yn(x0,"onAnimationStart"),Yn("dblclick","onDoubleClick"),Yn("focusin","onFocus"),Yn("focusout","onBlur"),Yn(fE,"onTransitionRun"),Yn(dE,"onTransitionStart"),Yn(hE,"onTransitionCancel"),Yn(T0,"onTransitionEnd"),zs("onMouseEnter",["mouseout","mouseover"]),zs("onMouseLeave",["mouseout","mouseover"]),zs("onPointerEnter",["pointerout","pointerover"]),zs("onPointerLeave",["pointerout","pointerover"]),_r("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),_r("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),_r("onBeforeInput",["compositionend","keypress","textInput","paste"]),_r("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),_r("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),_r("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var yu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),XE=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(yu));function $w(i,s){s=(s&4)!==0;for(var o=0;o<i.length;o++){var u=i[o],f=u.event;u=u.listeners;t:{var m=void 0;if(s)for(var S=u.length-1;0<=S;S--){var E=u[S],R=E.instance,X=E.currentTarget;if(E=E.listener,R!==m&&f.isPropagationStopped())break t;m=E,f.currentTarget=X;try{m(f)}catch(at){cf(at)}f.currentTarget=null,m=R}else for(S=0;S<u.length;S++){if(E=u[S],R=E.instance,X=E.currentTarget,E=E.listener,R!==m&&f.isPropagationStopped())break t;m=E,f.currentTarget=X;try{m(f)}catch(at){cf(at)}f.currentTarget=null,m=R}}}}function Ut(i,s){var o=s[kl];o===void 0&&(o=s[kl]=new Set);var u=i+"__bubble";o.has(u)||(Hw(s,i,2,!1),o.add(u))}function gm(i,s,o){var u=0;s&&(u|=4),Hw(o,i,u,s)}var Af="_reactListening"+Math.random().toString(36).slice(2);function mm(i){if(!i[Af]){i[Af]=!0,Nc.forEach(function(o){o!=="selectionchange"&&(XE.has(o)||gm(o,!1,i),gm(o,!0,i))});var s=i.nodeType===9?i:i.ownerDocument;s===null||s[Af]||(s[Af]=!0,gm("selectionchange",!1,s))}}function Hw(i,s,o,u){switch(hb(s)){case 2:var f=xN;break;case 8:f=TN;break;default:f=Dm}o=f.bind(null,s,o,i),f=void 0,!_h||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),u?f!==void 0?i.addEventListener(s,o,{capture:!0,passive:f}):i.addEventListener(s,o,!0):f!==void 0?i.addEventListener(s,o,{passive:f}):i.addEventListener(s,o,!1)}function ym(i,s,o,u,f){var m=u;if((s&1)===0&&(s&2)===0&&u!==null)t:for(;;){if(u===null)return;var S=u.tag;if(S===3||S===4){var E=u.stateNode.containerInfo;if(E===f)break;if(S===4)for(S=u.return;S!==null;){var R=S.tag;if((R===3||R===4)&&S.stateNode.containerInfo===f)return;S=S.return}for(;E!==null;){if(S=Rs(E),S===null)return;if(R=S.tag,R===5||R===6||R===26||R===27){u=m=S;continue t}E=E.parentNode}}u=u.return}Fp(function(){var X=m,at=zh(o),ct=[];t:{var F=A0.get(i);if(F!==void 0){var Q=_c,It=i;switch(i){case"keypress":if(zc(o)===0)break t;case"keydown":case"keyup":Q=HA;break;case"focusin":It="focus",Q=Jh;break;case"focusout":It="blur",Q=Jh;break;case"beforeblur":case"afterblur":Q=Jh;break;case"click":if(o.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Q=Wp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Q=OA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Q=YA;break;case b0:case S0:case x0:Q=BA;break;case T0:Q=GA;break;case"scroll":case"scrollend":Q=DA;break;case"wheel":Q=FA;break;case"copy":case"cut":case"paste":Q=LA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Q=e0;break;case"toggle":case"beforetoggle":Q=QA}var Ct=(s&4)!==0,te=!Ct&&(i==="scroll"||i==="scrollend"),H=Ct?F!==null?F+"Capture":null:F;Ct=[];for(var q=X,G;q!==null;){var ut=q;if(G=ut.stateNode,ut=ut.tag,ut!==5&&ut!==26&&ut!==27||G===null||H===null||(ut=zl(q,H),ut!=null&&Ct.push(pu(q,ut,G))),te)break;q=q.return}0<Ct.length&&(F=new Q(F,It,null,o,at),ct.push({event:F,listeners:Ct}))}}if((s&7)===0){t:{if(F=i==="mouseover"||i==="pointerover",Q=i==="mouseout"||i==="pointerout",F&&o!==Bh&&(It=o.relatedTarget||o.fromElement)&&(Rs(It)||It[Ms]))break t;if((Q||F)&&(F=at.window===at?at:(F=at.ownerDocument)?F.defaultView||F.parentWindow:window,Q?(It=o.relatedTarget||o.toElement,Q=X,It=It?Rs(It):null,It!==null&&(te=l(It),Ct=It.tag,It!==te||Ct!==5&&Ct!==27&&Ct!==6)&&(It=null)):(Q=null,It=X),Q!==It)){if(Ct=Wp,ut="onMouseLeave",H="onMouseEnter",q="mouse",(i==="pointerout"||i==="pointerover")&&(Ct=e0,ut="onPointerLeave",H="onPointerEnter",q="pointer"),te=Q==null?F:Bs(Q),G=It==null?F:Bs(It),F=new Ct(ut,q+"leave",Q,o,at),F.target=te,F.relatedTarget=G,ut=null,Rs(at)===X&&(Ct=new Ct(H,q+"enter",It,o,at),Ct.target=G,Ct.relatedTarget=te,ut=Ct),te=ut,Q&&It)e:{for(Ct=Q,H=It,q=0,G=Ct;G;G=Jo(G))q++;for(G=0,ut=H;ut;ut=Jo(ut))G++;for(;0<q-G;)Ct=Jo(Ct),q--;for(;0<G-q;)H=Jo(H),G--;for(;q--;){if(Ct===H||H!==null&&Ct===H.alternate)break e;Ct=Jo(Ct),H=Jo(H)}Ct=null}else Ct=null;Q!==null&&Vw(ct,F,Q,Ct,!1),It!==null&&te!==null&&Vw(ct,te,It,Ct,!0)}}t:{if(F=X?Bs(X):window,Q=F.nodeName&&F.nodeName.toLowerCase(),Q==="select"||Q==="input"&&F.type==="file")var wt=u0;else if(o0(F))if(c0)wt=lE;else{wt=aE;var Lt=sE}else Q=F.nodeName,!Q||Q.toLowerCase()!=="input"||F.type!=="checkbox"&&F.type!=="radio"?X&&Rh(X.elementType)&&(wt=u0):wt=oE;if(wt&&(wt=wt(i,X))){l0(ct,wt,o,at);break t}Lt&&Lt(i,F,X),i==="focusout"&&X&&F.type==="number"&&X.memoizedProps.value!=null&&Bl(F,"number",F.value)}switch(Lt=X?Bs(X):window,i){case"focusin":(o0(Lt)||Lt.contentEditable==="true")&&(po=Lt,Kh=X,Hl=null);break;case"focusout":Hl=Kh=po=null;break;case"mousedown":Gh=!0;break;case"contextmenu":case"mouseup":case"dragend":Gh=!1,v0(ct,o,at);break;case"selectionchange":if(cE)break;case"keydown":case"keyup":v0(ct,o,at)}var xt;if(Hh)t:{switch(i){case"compositionstart":var Dt="onCompositionStart";break t;case"compositionend":Dt="onCompositionEnd";break t;case"compositionupdate":Dt="onCompositionUpdate";break t}Dt=void 0}else yo?s0(i,o)&&(Dt="onCompositionEnd"):i==="keydown"&&o.keyCode===229&&(Dt="onCompositionStart");Dt&&(n0&&o.locale!=="ko"&&(yo||Dt!=="onCompositionStart"?Dt==="onCompositionEnd"&&yo&&(xt=Zp()):(Ls=at,Uh="value"in Ls?Ls.value:Ls.textContent,yo=!0)),Lt=Ef(X,Dt),0<Lt.length&&(Dt=new t0(Dt,i,null,o,at),ct.push({event:Dt,listeners:Lt}),xt?Dt.data=xt:(xt=a0(o),xt!==null&&(Dt.data=xt)))),(xt=tE?eE(i,o):nE(i,o))&&(Dt=Ef(X,"onBeforeInput"),0<Dt.length&&(Lt=new t0("onBeforeInput","beforeinput",null,o,at),ct.push({event:Lt,listeners:Dt}),Lt.data=xt)),YE(ct,i,X,o,at)}$w(ct,s)})}function pu(i,s,o){return{instance:i,listener:s,currentTarget:o}}function Ef(i,s){for(var o=s+"Capture",u=[];i!==null;){var f=i,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=zl(i,o),f!=null&&u.unshift(pu(i,f,m)),f=zl(i,s),f!=null&&u.push(pu(i,f,m))),i.tag===3)return u;i=i.return}return[]}function Jo(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function Vw(i,s,o,u,f){for(var m=s._reactName,S=[];o!==null&&o!==u;){var E=o,R=E.alternate,X=E.stateNode;if(E=E.tag,R!==null&&R===u)break;E!==5&&E!==26&&E!==27||X===null||(R=X,f?(X=zl(o,m),X!=null&&S.unshift(pu(o,X,R))):f||(X=zl(o,m),X!=null&&S.push(pu(o,X,R)))),o=o.return}S.length!==0&&i.push({event:s,listeners:S})}var FE=/\r\n?/g,ZE=/\u0000|\uFFFD/g;function jw(i){return(typeof i=="string"?i:""+i).replace(FE,`
`).replace(ZE,"")}function Yw(i,s){return s=jw(s),jw(i)===s}function Nf(){}function Wt(i,s,o,u,f,m){switch(o){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||ho(i,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&ho(i,""+u);break;case"className":uo(i,"class",u);break;case"tabIndex":uo(i,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":uo(i,o,u);break;case"style":Gp(i,u,m);break;case"data":if(s!=="object"){uo(i,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||o!=="href")){i.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(o);break}u=Rc(""+u),i.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){i.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(o==="formAction"?(s!=="input"&&Wt(i,s,"name",f.name,f,null),Wt(i,s,"formEncType",f.formEncType,f,null),Wt(i,s,"formMethod",f.formMethod,f,null),Wt(i,s,"formTarget",f.formTarget,f,null)):(Wt(i,s,"encType",f.encType,f,null),Wt(i,s,"method",f.method,f,null),Wt(i,s,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(o);break}u=Rc(""+u),i.setAttribute(o,u);break;case"onClick":u!=null&&(i.onclick=Nf);break;case"onScroll":u!=null&&Ut("scroll",i);break;case"onScrollEnd":u!=null&&Ut("scrollend",i);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(r(60));i.innerHTML=o}}break;case"multiple":i.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":i.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){i.removeAttribute("xlink:href");break}o=Rc(""+u),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(o,""+u):i.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(o,""):i.removeAttribute(o);break;case"capture":case"download":u===!0?i.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(o,u):i.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?i.setAttribute(o,u):i.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?i.removeAttribute(o):i.setAttribute(o,u);break;case"popover":Ut("beforetoggle",i),Ut("toggle",i),lo(i,"popover",u);break;case"xlinkActuate":jn(i,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":jn(i,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":jn(i,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":jn(i,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":jn(i,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":jn(i,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":jn(i,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":jn(i,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":jn(i,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":lo(i,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=CA.get(o)||o,lo(i,o,u))}}function pm(i,s,o,u,f,m){switch(o){case"style":Gp(i,u,m);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(r(60));i.innerHTML=o}}break;case"children":typeof u=="string"?ho(i,u):(typeof u=="number"||typeof u=="bigint")&&ho(i,""+u);break;case"onScroll":u!=null&&Ut("scroll",i);break;case"onScrollEnd":u!=null&&Ut("scrollend",i);break;case"onClick":u!=null&&(i.onclick=Nf);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Cc.hasOwnProperty(o))t:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),s=o.slice(2,f?o.length-7:void 0),m=i[Je]||null,m=m!=null?m[o]:null,typeof m=="function"&&i.removeEventListener(s,m,f),typeof u=="function")){typeof m!="function"&&m!==null&&(o in i?i[o]=null:i.hasAttribute(o)&&i.removeAttribute(o)),i.addEventListener(s,u,f);break t}o in i?i[o]=u:u===!0?i.setAttribute(o,""):lo(i,o,u)}}}function _e(i,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ut("error",i),Ut("load",i);var u=!1,f=!1,m;for(m in o)if(o.hasOwnProperty(m)){var S=o[m];if(S!=null)switch(m){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:Wt(i,s,m,S,o,null)}}f&&Wt(i,s,"srcSet",o.srcSet,o,null),u&&Wt(i,s,"src",o.src,o,null);return;case"input":Ut("invalid",i);var E=m=S=f=null,R=null,X=null;for(u in o)if(o.hasOwnProperty(u)){var at=o[u];if(at!=null)switch(u){case"name":f=at;break;case"type":S=at;break;case"checked":R=at;break;case"defaultChecked":X=at;break;case"value":m=at;break;case"defaultValue":E=at;break;case"children":case"dangerouslySetInnerHTML":if(at!=null)throw Error(r(137,s));break;default:Wt(i,s,u,at,o,null)}}Mc(i,m,E,R,X,S,f,!1),co(i);return;case"select":Ut("invalid",i),u=S=m=null;for(f in o)if(o.hasOwnProperty(f)&&(E=o[f],E!=null))switch(f){case"value":m=E;break;case"defaultValue":S=E;break;case"multiple":u=E;default:Wt(i,s,f,E,o,null)}s=m,o=S,i.multiple=!!u,s!=null?qr(i,!!u,s,!1):o!=null&&qr(i,!!u,o,!0);return;case"textarea":Ut("invalid",i),m=f=u=null;for(S in o)if(o.hasOwnProperty(S)&&(E=o[S],E!=null))switch(S){case"value":u=E;break;case"defaultValue":f=E;break;case"children":m=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(r(91));break;default:Wt(i,s,S,E,o,null)}Yp(i,u,f,m),co(i);return;case"option":for(R in o)if(o.hasOwnProperty(R)&&(u=o[R],u!=null))switch(R){case"selected":i.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:Wt(i,s,R,u,o,null)}return;case"dialog":Ut("beforetoggle",i),Ut("toggle",i),Ut("cancel",i),Ut("close",i);break;case"iframe":case"object":Ut("load",i);break;case"video":case"audio":for(u=0;u<yu.length;u++)Ut(yu[u],i);break;case"image":Ut("error",i),Ut("load",i);break;case"details":Ut("toggle",i);break;case"embed":case"source":case"link":Ut("error",i),Ut("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(X in o)if(o.hasOwnProperty(X)&&(u=o[X],u!=null))switch(X){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:Wt(i,s,X,u,o,null)}return;default:if(Rh(s)){for(at in o)o.hasOwnProperty(at)&&(u=o[at],u!==void 0&&pm(i,s,at,u,o,void 0));return}}for(E in o)o.hasOwnProperty(E)&&(u=o[E],u!=null&&Wt(i,s,E,u,o,null))}function QE(i,s,o,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,S=null,E=null,R=null,X=null,at=null;for(Q in o){var ct=o[Q];if(o.hasOwnProperty(Q)&&ct!=null)switch(Q){case"checked":break;case"value":break;case"defaultValue":R=ct;default:u.hasOwnProperty(Q)||Wt(i,s,Q,null,u,ct)}}for(var F in u){var Q=u[F];if(ct=o[F],u.hasOwnProperty(F)&&(Q!=null||ct!=null))switch(F){case"type":m=Q;break;case"name":f=Q;break;case"checked":X=Q;break;case"defaultChecked":at=Q;break;case"value":S=Q;break;case"defaultValue":E=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(r(137,s));break;default:Q!==ct&&Wt(i,s,F,Q,u,ct)}}Ta(i,S,E,R,X,at,m,f);return;case"select":Q=S=E=F=null;for(m in o)if(R=o[m],o.hasOwnProperty(m)&&R!=null)switch(m){case"value":break;case"multiple":Q=R;default:u.hasOwnProperty(m)||Wt(i,s,m,null,u,R)}for(f in u)if(m=u[f],R=o[f],u.hasOwnProperty(f)&&(m!=null||R!=null))switch(f){case"value":F=m;break;case"defaultValue":E=m;break;case"multiple":S=m;default:m!==R&&Wt(i,s,f,m,u,R)}s=E,o=S,u=Q,F!=null?qr(i,!!o,F,!1):!!u!=!!o&&(s!=null?qr(i,!!o,s,!0):qr(i,!!o,o?[]:"",!1));return;case"textarea":Q=F=null;for(E in o)if(f=o[E],o.hasOwnProperty(E)&&f!=null&&!u.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:Wt(i,s,E,null,u,f)}for(S in u)if(f=u[S],m=o[S],u.hasOwnProperty(S)&&(f!=null||m!=null))switch(S){case"value":F=f;break;case"defaultValue":Q=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==m&&Wt(i,s,S,f,u,m)}jp(i,F,Q);return;case"option":for(var It in o)if(F=o[It],o.hasOwnProperty(It)&&F!=null&&!u.hasOwnProperty(It))switch(It){case"selected":i.selected=!1;break;default:Wt(i,s,It,null,u,F)}for(R in u)if(F=u[R],Q=o[R],u.hasOwnProperty(R)&&F!==Q&&(F!=null||Q!=null))switch(R){case"selected":i.selected=F&&typeof F!="function"&&typeof F!="symbol";break;default:Wt(i,s,R,F,u,Q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ct in o)F=o[Ct],o.hasOwnProperty(Ct)&&F!=null&&!u.hasOwnProperty(Ct)&&Wt(i,s,Ct,null,u,F);for(X in u)if(F=u[X],Q=o[X],u.hasOwnProperty(X)&&F!==Q&&(F!=null||Q!=null))switch(X){case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(r(137,s));break;default:Wt(i,s,X,F,u,Q)}return;default:if(Rh(s)){for(var te in o)F=o[te],o.hasOwnProperty(te)&&F!==void 0&&!u.hasOwnProperty(te)&&pm(i,s,te,void 0,u,F);for(at in u)F=u[at],Q=o[at],!u.hasOwnProperty(at)||F===Q||F===void 0&&Q===void 0||pm(i,s,at,F,u,Q);return}}for(var H in o)F=o[H],o.hasOwnProperty(H)&&F!=null&&!u.hasOwnProperty(H)&&Wt(i,s,H,null,u,F);for(ct in u)F=u[ct],Q=o[ct],!u.hasOwnProperty(ct)||F===Q||F==null&&Q==null||Wt(i,s,ct,F,u,Q)}var vm=null,wm=null;function Cf(i){return i.nodeType===9?i:i.ownerDocument}function Kw(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Gw(i,s){if(i===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&s==="foreignObject"?0:i}function bm(i,s){return i==="textarea"||i==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Sm=null;function WE(){var i=window.event;return i&&i.type==="popstate"?i===Sm?!1:(Sm=i,!0):(Sm=null,!1)}var Xw=typeof setTimeout=="function"?setTimeout:void 0,tN=typeof clearTimeout=="function"?clearTimeout:void 0,Fw=typeof Promise=="function"?Promise:void 0,eN=typeof queueMicrotask=="function"?queueMicrotask:typeof Fw<"u"?function(i){return Fw.resolve(null).then(i).catch(nN)}:Xw;function nN(i){setTimeout(function(){throw i})}function Qs(i){return i==="head"}function Zw(i,s){var o=s,u=0,f=0;do{var m=o.nextSibling;if(i.removeChild(o),m&&m.nodeType===8)if(o=m.data,o==="/$"){if(0<u&&8>u){o=u;var S=i.ownerDocument;if(o&1&&vu(S.documentElement),o&2&&vu(S.body),o&4)for(o=S.head,vu(o),S=o.firstChild;S;){var E=S.nextSibling,R=S.nodeName;S[Sa]||R==="SCRIPT"||R==="STYLE"||R==="LINK"&&S.rel.toLowerCase()==="stylesheet"||o.removeChild(S),S=E}}if(f===0){i.removeChild(m),Nu(s);return}f--}else o==="$"||o==="$?"||o==="$!"?f++:u=o.charCodeAt(0)-48;else u=0;o=m}while(o);Nu(s)}function xm(i){var s=i.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":xm(o),Dl(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}i.removeChild(o)}}function rN(i,s,o,u){for(;i.nodeType===1;){var f=o;if(i.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(u){if(!i[Sa])switch(s){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(m=i.getAttribute("rel"),m==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(m!==f.rel||i.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||i.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||i.getAttribute("title")!==(f.title==null?null:f.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(m=i.getAttribute("src"),(m!==(f.src==null?null:f.src)||i.getAttribute("type")!==(f.type==null?null:f.type)||i.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(s==="input"&&i.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&i.getAttribute("name")===m)return i}else return i;if(i=Gn(i.nextSibling),i===null)break}return null}function iN(i,s,o){if(s==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!o||(i=Gn(i.nextSibling),i===null))return null;return i}function Tm(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState==="complete"}function sN(i,s){var o=i.ownerDocument;if(i.data!=="$?"||o.readyState==="complete")s();else{var u=function(){s(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),i._reactRetry=u}}function Gn(i){for(;i!=null;i=i.nextSibling){var s=i.nodeType;if(s===1||s===3)break;if(s===8){if(s=i.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return i}var Am=null;function Qw(i){i=i.previousSibling;for(var s=0;i;){if(i.nodeType===8){var o=i.data;if(o==="$"||o==="$!"||o==="$?"){if(s===0)return i;s--}else o==="/$"&&s++}i=i.previousSibling}return null}function Ww(i,s,o){switch(s=Cf(o),i){case"html":if(i=s.documentElement,!i)throw Error(r(452));return i;case"head":if(i=s.head,!i)throw Error(r(453));return i;case"body":if(i=s.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}function vu(i){for(var s=i.attributes;s.length;)i.removeAttributeNode(s[0]);Dl(i)}var Cn=new Map,tb=new Set;function kf(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Wr=z.d;z.d={f:aN,r:oN,D:lN,C:uN,L:cN,m:fN,X:hN,S:dN,M:gN};function aN(){var i=Wr.f(),s=wf();return i||s}function oN(i){var s=zr(i);s!==null&&s.tag===5&&s.type==="form"?bv(s):Wr.r(i)}var $o=typeof document>"u"?null:document;function eb(i,s,o){var u=$o;if(u&&typeof s=="string"&&s){var f=Fe(s);f='link[rel="'+i+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),tb.has(f)||(tb.add(f),i={rel:i,crossOrigin:o,href:s},u.querySelector(f)===null&&(s=u.createElement("link"),_e(s,"link",i),Se(s),u.head.appendChild(s)))}}function lN(i){Wr.D(i),eb("dns-prefetch",i,null)}function uN(i,s){Wr.C(i,s),eb("preconnect",i,s)}function cN(i,s,o){Wr.L(i,s,o);var u=$o;if(u&&i&&s){var f='link[rel="preload"][as="'+Fe(s)+'"]';s==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+Fe(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+Fe(o.imageSizes)+'"]')):f+='[href="'+Fe(i)+'"]';var m=f;switch(s){case"style":m=Ho(i);break;case"script":m=Vo(i)}Cn.has(m)||(i=p({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:i,as:s},o),Cn.set(m,i),u.querySelector(f)!==null||s==="style"&&u.querySelector(wu(m))||s==="script"&&u.querySelector(bu(m))||(s=u.createElement("link"),_e(s,"link",i),Se(s),u.head.appendChild(s)))}}function fN(i,s){Wr.m(i,s);var o=$o;if(o&&i){var u=s&&typeof s.as=="string"?s.as:"script",f='link[rel="modulepreload"][as="'+Fe(u)+'"][href="'+Fe(i)+'"]',m=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=Vo(i)}if(!Cn.has(m)&&(i=p({rel:"modulepreload",href:i},s),Cn.set(m,i),o.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(bu(m)))return}u=o.createElement("link"),_e(u,"link",i),Se(u),o.head.appendChild(u)}}}function dN(i,s,o){Wr.S(i,s,o);var u=$o;if(u&&i){var f=Lr(u).hoistableStyles,m=Ho(i);s=s||"default";var S=f.get(m);if(!S){var E={loading:0,preload:null};if(S=u.querySelector(wu(m)))E.loading=5;else{i=p({rel:"stylesheet",href:i,"data-precedence":s},o),(o=Cn.get(m))&&Em(i,o);var R=S=u.createElement("link");Se(R),_e(R,"link",i),R._p=new Promise(function(X,at){R.onload=X,R.onerror=at}),R.addEventListener("load",function(){E.loading|=1}),R.addEventListener("error",function(){E.loading|=2}),E.loading|=4,Df(S,s,u)}S={type:"stylesheet",instance:S,count:1,state:E},f.set(m,S)}}}function hN(i,s){Wr.X(i,s);var o=$o;if(o&&i){var u=Lr(o).hoistableScripts,f=Vo(i),m=u.get(f);m||(m=o.querySelector(bu(f)),m||(i=p({src:i,async:!0},s),(s=Cn.get(f))&&Nm(i,s),m=o.createElement("script"),Se(m),_e(m,"link",i),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(f,m))}}function gN(i,s){Wr.M(i,s);var o=$o;if(o&&i){var u=Lr(o).hoistableScripts,f=Vo(i),m=u.get(f);m||(m=o.querySelector(bu(f)),m||(i=p({src:i,async:!0,type:"module"},s),(s=Cn.get(f))&&Nm(i,s),m=o.createElement("script"),Se(m),_e(m,"link",i),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(f,m))}}function nb(i,s,o,u){var f=(f=dt.current)?kf(f):null;if(!f)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=Ho(o.href),o=Lr(f).hoistableStyles,u=o.get(s),u||(u={type:"style",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){i=Ho(o.href);var m=Lr(f).hoistableStyles,S=m.get(i);if(S||(f=f.ownerDocument||f,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(i,S),(m=f.querySelector(wu(i)))&&!m._p&&(S.instance=m,S.state.loading=5),Cn.has(i)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Cn.set(i,o),m||mN(f,i,o,S.state))),s&&u===null)throw Error(r(528,""));return S}if(s&&u!==null)throw Error(r(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Vo(o),o=Lr(f).hoistableScripts,u=o.get(s),u||(u={type:"script",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function Ho(i){return'href="'+Fe(i)+'"'}function wu(i){return'link[rel="stylesheet"]['+i+"]"}function rb(i){return p({},i,{"data-precedence":i.precedence,precedence:null})}function mN(i,s,o,u){i.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=i.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),_e(s,"link",o),Se(s),i.head.appendChild(s))}function Vo(i){return'[src="'+Fe(i)+'"]'}function bu(i){return"script[async]"+i}function ib(i,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var u=i.querySelector('style[data-href~="'+Fe(o.href)+'"]');if(u)return s.instance=u,Se(u),u;var f=p({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(i.ownerDocument||i).createElement("style"),Se(u),_e(u,"style",f),Df(u,o.precedence,i),s.instance=u;case"stylesheet":f=Ho(o.href);var m=i.querySelector(wu(f));if(m)return s.state.loading|=4,s.instance=m,Se(m),m;u=rb(o),(f=Cn.get(f))&&Em(u,f),m=(i.ownerDocument||i).createElement("link"),Se(m);var S=m;return S._p=new Promise(function(E,R){S.onload=E,S.onerror=R}),_e(m,"link",u),s.state.loading|=4,Df(m,o.precedence,i),s.instance=m;case"script":return m=Vo(o.src),(f=i.querySelector(bu(m)))?(s.instance=f,Se(f),f):(u=o,(f=Cn.get(m))&&(u=p({},o),Nm(u,f)),i=i.ownerDocument||i,f=i.createElement("script"),Se(f),_e(f,"link",u),i.head.appendChild(f),s.instance=f);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,Df(u,o.precedence,i));return s.instance}function Df(i,s,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,m=f,S=0;S<u.length;S++){var E=u[S];if(E.dataset.precedence===s)m=E;else if(m!==f)break}m?m.parentNode.insertBefore(i,m.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(i,s.firstChild))}function Em(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.title==null&&(i.title=s.title)}function Nm(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.integrity==null&&(i.integrity=s.integrity)}var If=null;function sb(i,s,o){if(If===null){var u=new Map,f=If=new Map;f.set(o,u)}else f=If,u=f.get(o),u||(u=new Map,f.set(o,u));if(u.has(i))return u;for(u.set(i,null),o=o.getElementsByTagName(i),f=0;f<o.length;f++){var m=o[f];if(!(m[Sa]||m[Oe]||i==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var S=m.getAttribute(s)||"";S=i+S;var E=u.get(S);E?E.push(m):u.set(S,[m])}}return u}function ab(i,s,o){i=i.ownerDocument||i,i.head.insertBefore(o,s==="title"?i.querySelector("head > title"):null)}function yN(i,s,o){if(o===1||s.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return i=s.disabled,typeof s.precedence=="string"&&i==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function ob(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}var Su=null;function pN(){}function vN(i,s,o){if(Su===null)throw Error(r(475));var u=Su;if(s.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var f=Ho(o.href),m=i.querySelector(wu(f));if(m){i=m._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(u.count++,u=Of.bind(u),i.then(u,u)),s.state.loading|=4,s.instance=m,Se(m);return}m=i.ownerDocument||i,o=rb(o),(f=Cn.get(f))&&Em(o,f),m=m.createElement("link"),Se(m);var S=m;S._p=new Promise(function(E,R){S.onload=E,S.onerror=R}),_e(m,"link",o),s.instance=m}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(s,i),(i=s.state.preload)&&(s.state.loading&3)===0&&(u.count++,s=Of.bind(u),i.addEventListener("load",s),i.addEventListener("error",s))}}function wN(){if(Su===null)throw Error(r(475));var i=Su;return i.stylesheets&&i.count===0&&Cm(i,i.stylesheets),0<i.count?function(s){var o=setTimeout(function(){if(i.stylesheets&&Cm(i,i.stylesheets),i.unsuspend){var u=i.unsuspend;i.unsuspend=null,u()}},6e4);return i.unsuspend=s,function(){i.unsuspend=null,clearTimeout(o)}}:null}function Of(){if(this.count--,this.count===0){if(this.stylesheets)Cm(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Mf=null;function Cm(i,s){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Mf=new Map,s.forEach(bN,i),Mf=null,Of.call(i))}function bN(i,s){if(!(s.state.loading&4)){var o=Mf.get(i);if(o)var u=o.get(null);else{o=new Map,Mf.set(i,o);for(var f=i.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var S=f[m];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(o.set(S.dataset.precedence,S),u=S)}u&&o.set(null,u)}f=s.instance,S=f.getAttribute("data-precedence"),m=o.get(S)||u,m===u&&o.set(null,f),o.set(S,f),this.count++,u=Of.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),m?m.parentNode.insertBefore(f,m.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(f,i.firstChild)),s.state.loading|=4}}var xu={$$typeof:N,Provider:null,Consumer:null,_currentValue:K,_currentValue2:K,_threadCount:0};function SN(i,s,o,u,f,m,S,E){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Al(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Al(0),this.hiddenUpdates=Al(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=E,this.incompleteTransitions=new Map}function lb(i,s,o,u,f,m,S,E,R,X,at,ct){return i=new SN(i,s,o,S,E,R,X,ct),s=1,m===!0&&(s|=24),m=ln(3,null,null,s),i.current=m,m.stateNode=i,s=lg(),s.refCount++,i.pooledCache=s,s.refCount++,m.memoizedState={element:u,isDehydrated:o,cache:s},dg(m),i}function ub(i){return i?(i=So,i):So}function cb(i,s,o,u,f,m){f=ub(f),u.context===null?u.context=f:u.pendingContext=f,u=qs(s),u.payload={element:o},m=m===void 0?null:m,m!==null&&(u.callback=m),o=Ps(i,u,s),o!==null&&(hn(o,i,s),Ql(o,i,s))}function fb(i,s){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var o=i.retryLane;i.retryLane=o!==0&&o<s?o:s}}function km(i,s){fb(i,s),(i=i.alternate)&&fb(i,s)}function db(i){if(i.tag===13){var s=bo(i,67108864);s!==null&&hn(s,i,67108864),km(i,67108864)}}var Rf=!0;function xN(i,s,o,u){var f=I.T;I.T=null;var m=z.p;try{z.p=2,Dm(i,s,o,u)}finally{z.p=m,I.T=f}}function TN(i,s,o,u){var f=I.T;I.T=null;var m=z.p;try{z.p=8,Dm(i,s,o,u)}finally{z.p=m,I.T=f}}function Dm(i,s,o,u){if(Rf){var f=Im(u);if(f===null)ym(i,s,u,Bf,o),gb(i,u);else if(EN(f,i,s,o,u))u.stopPropagation();else if(gb(i,u),s&4&&-1<AN.indexOf(i)){for(;f!==null;){var m=zr(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var S=Br(m.pendingLanes);if(S!==0){var E=m;for(E.pendingLanes|=2,E.entangledLanes|=2;S;){var R=1<<31-Ke(S);E.entanglements[1]|=R,S&=~R}hr(m),(Xt&6)===0&&(pf=be()+500,mu(0))}}break;case 13:E=bo(m,2),E!==null&&hn(E,m,2),wf(),km(m,2)}if(m=Im(u),m===null&&ym(i,s,u,Bf,o),m===f)break;f=m}f!==null&&u.stopPropagation()}else ym(i,s,u,null,o)}}function Im(i){return i=zh(i),Om(i)}var Bf=null;function Om(i){if(Bf=null,i=Rs(i),i!==null){var s=l(i);if(s===null)i=null;else{var o=s.tag;if(o===13){if(i=c(s),i!==null)return i;i=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null)}}return Bf=i,null}function hb(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Is()){case ya:return 2;case pa:return 8;case Rr:case va:return 32;case Os:return 268435456;default:return 32}default:return 32}}var Mm=!1,Ws=null,ta=null,ea=null,Tu=new Map,Au=new Map,na=[],AN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function gb(i,s){switch(i){case"focusin":case"focusout":Ws=null;break;case"dragenter":case"dragleave":ta=null;break;case"mouseover":case"mouseout":ea=null;break;case"pointerover":case"pointerout":Tu.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Au.delete(s.pointerId)}}function Eu(i,s,o,u,f,m){return i===null||i.nativeEvent!==m?(i={blockedOn:s,domEventName:o,eventSystemFlags:u,nativeEvent:m,targetContainers:[f]},s!==null&&(s=zr(s),s!==null&&db(s)),i):(i.eventSystemFlags|=u,s=i.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),i)}function EN(i,s,o,u,f){switch(s){case"focusin":return Ws=Eu(Ws,i,s,o,u,f),!0;case"dragenter":return ta=Eu(ta,i,s,o,u,f),!0;case"mouseover":return ea=Eu(ea,i,s,o,u,f),!0;case"pointerover":var m=f.pointerId;return Tu.set(m,Eu(Tu.get(m)||null,i,s,o,u,f)),!0;case"gotpointercapture":return m=f.pointerId,Au.set(m,Eu(Au.get(m)||null,i,s,o,u,f)),!0}return!1}function mb(i){var s=Rs(i.target);if(s!==null){var o=l(s);if(o!==null){if(s=o.tag,s===13){if(s=c(o),s!==null){i.blockedOn=s,Eh(i.priority,function(){if(o.tag===13){var u=dn();u=Nl(u);var f=bo(o,u);f!==null&&hn(f,o,u),km(o,u)}});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){i.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}i.blockedOn=null}function zf(i){if(i.blockedOn!==null)return!1;for(var s=i.targetContainers;0<s.length;){var o=Im(i.nativeEvent);if(o===null){o=i.nativeEvent;var u=new o.constructor(o.type,o);Bh=u,o.target.dispatchEvent(u),Bh=null}else return s=zr(o),s!==null&&db(s),i.blockedOn=o,!1;s.shift()}return!0}function yb(i,s,o){zf(i)&&o.delete(s)}function NN(){Mm=!1,Ws!==null&&zf(Ws)&&(Ws=null),ta!==null&&zf(ta)&&(ta=null),ea!==null&&zf(ea)&&(ea=null),Tu.forEach(yb),Au.forEach(yb)}function Lf(i,s){i.blockedOn===s&&(i.blockedOn=null,Mm||(Mm=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,NN)))}var _f=null;function pb(i){_f!==i&&(_f=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){_f===i&&(_f=null);for(var s=0;s<i.length;s+=3){var o=i[s],u=i[s+1],f=i[s+2];if(typeof u!="function"){if(Om(u||o)===null)continue;break}var m=zr(o);m!==null&&(i.splice(s,3),s-=3,Og(m,{pending:!0,data:f,method:o.method,action:u},u,f))}}))}function Nu(i){function s(R){return Lf(R,i)}Ws!==null&&Lf(Ws,i),ta!==null&&Lf(ta,i),ea!==null&&Lf(ea,i),Tu.forEach(s),Au.forEach(s);for(var o=0;o<na.length;o++){var u=na[o];u.blockedOn===i&&(u.blockedOn=null)}for(;0<na.length&&(o=na[0],o.blockedOn===null);)mb(o),o.blockedOn===null&&na.shift();if(o=(i.ownerDocument||i).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var f=o[u],m=o[u+1],S=f[Je]||null;if(typeof m=="function")S||pb(o);else if(S){var E=null;if(m&&m.hasAttribute("formAction")){if(f=m,S=m[Je]||null)E=S.formAction;else if(Om(f)!==null)continue}else E=S.action;typeof E=="function"?o[u+1]=E:(o.splice(u,3),u-=3),pb(o)}}}function Rm(i){this._internalRoot=i}Uf.prototype.render=Rm.prototype.render=function(i){var s=this._internalRoot;if(s===null)throw Error(r(409));var o=s.current,u=dn();cb(o,u,i,s,null,null)},Uf.prototype.unmount=Rm.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var s=i.containerInfo;cb(i.current,2,null,i,null,null),wf(),s[Ms]=null}};function Uf(i){this._internalRoot=i}Uf.prototype.unstable_scheduleHydration=function(i){if(i){var s=Ac();i={blockedOn:null,target:i,priority:s};for(var o=0;o<na.length&&s!==0&&s<na[o].priority;o++);na.splice(o,0,i),o===0&&mb(i)}};var vb=t.version;if(vb!=="19.1.0")throw Error(r(527,vb,"19.1.0"));z.findDOMNode=function(i){var s=i._reactInternals;if(s===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=h(s),i=i!==null?g(i):null,i=i===null?null:i.stateNode,i};var CN={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:I,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var qf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!qf.isDisabled&&qf.supportsFiber)try{bn=qf.inject(CN),Ne=qf}catch{}}return ku.createRoot=function(i,s){if(!a(i))throw Error(r(299));var o=!1,u="",f=Bv,m=zv,S=Lv,E=null;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(f=s.onUncaughtError),s.onCaughtError!==void 0&&(m=s.onCaughtError),s.onRecoverableError!==void 0&&(S=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(E=s.unstable_transitionCallbacks)),s=lb(i,1,!1,null,null,o,u,f,m,S,E,null),i[Ms]=s.current,mm(i),new Rm(s)},ku.hydrateRoot=function(i,s,o){if(!a(i))throw Error(r(299));var u=!1,f="",m=Bv,S=zv,E=Lv,R=null,X=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(m=o.onUncaughtError),o.onCaughtError!==void 0&&(S=o.onCaughtError),o.onRecoverableError!==void 0&&(E=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(R=o.unstable_transitionCallbacks),o.formState!==void 0&&(X=o.formState)),s=lb(i,1,!0,s,o??null,u,f,m,S,E,R,X),s.context=ub(null),o=s.current,u=dn(),u=Nl(u),f=qs(u),f.callback=null,Ps(o,f,u),o=u,s.current.lanes=o,ba(s,o),hr(s),i[Ms]=s.current,mm(i),new Uf(s)},ku.version="19.1.0",ku}var kb;function UN(){if(kb)return zm.exports;kb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),zm.exports=_N(),zm.exports}var qN=UN(),qt;(function(n){n[n.Canceled=1]="Canceled",n[n.Unknown=2]="Unknown",n[n.InvalidArgument=3]="InvalidArgument",n[n.DeadlineExceeded=4]="DeadlineExceeded",n[n.NotFound=5]="NotFound",n[n.AlreadyExists=6]="AlreadyExists",n[n.PermissionDenied=7]="PermissionDenied",n[n.ResourceExhausted=8]="ResourceExhausted",n[n.FailedPrecondition=9]="FailedPrecondition",n[n.Aborted=10]="Aborted",n[n.OutOfRange=11]="OutOfRange",n[n.Unimplemented=12]="Unimplemented",n[n.Internal=13]="Internal",n[n.Unavailable=14]="Unavailable",n[n.DataLoss=15]="DataLoss",n[n.Unauthenticated=16]="Unauthenticated"})(qt||(qt={}));function Db(n){const t=qt[n];return typeof t!="string"?n.toString():t[0].toLowerCase()+t.substring(1).replace(/[A-Z]/g,e=>"_"+e.toLowerCase())}class ee extends Error{constructor(t,e=qt.Unknown,r,a,l){super(PN(t,e)),this.name="ConnectError",Object.setPrototypeOf(this,new.target.prototype),this.rawMessage=t,this.code=e,this.metadata=new Headers(r??{}),this.details=a??[],this.cause=l}static from(t,e=qt.Unknown){return t instanceof ee?t:t instanceof Error?t.name=="AbortError"?new ee(t.message,qt.Canceled):new ee(t.message,e,void 0,void 0,t):new ee(String(t),e,void 0,void 0,t)}static[Symbol.hasInstance](t){return t instanceof Error?Object.getPrototypeOf(t)===ee.prototype?!0:t.name==="ConnectError"&&"code"in t&&typeof t.code=="number"&&"metadata"in t&&"details"in t&&Array.isArray(t.details)&&"rawMessage"in t&&typeof t.rawMessage=="string"&&"cause"in t:!1}findDetails(t){const e="typeName"in t?{findMessage:a=>a===t.typeName?t:void 0}:t,r=[];for(const a of this.details){if("getType"in a){e.findMessage(a.getType().typeName)&&r.push(a);continue}const l=e.findMessage(a.type);if(l)try{r.push(l.fromBinary(a.value))}catch{}}return r}}function PN(n,t){return n.length?`[${Db(t)}] ${n}`:`[${Db(t)}]`}function me(n,t){if(!n)throw new Error(t)}const JN=34028234663852886e22,$N=-34028234663852886e22,HN=4294967295,VN=2147483647,jN=-2147483648;function nd(n){if(typeof n!="number")throw new Error("invalid int 32: "+typeof n);if(!Number.isInteger(n)||n>VN||n<jN)throw new Error("invalid int 32: "+n)}function ay(n){if(typeof n!="number")throw new Error("invalid uint 32: "+typeof n);if(!Number.isInteger(n)||n>HN||n<0)throw new Error("invalid uint 32: "+n)}function R1(n){if(typeof n!="number")throw new Error("invalid float 32: "+typeof n);if(Number.isFinite(n)&&(n>JN||n<$N))throw new Error("invalid float 32: "+n)}const B1=Symbol("@bufbuild/protobuf/enum-type");function YN(n){const t=n[B1];return me(t,"missing enum type on enum object"),t}function z1(n,t,e,r){n[B1]=L1(t,e.map(a=>({no:a.no,name:a.name,localName:n[a.no]})))}function L1(n,t,e){const r=Object.create(null),a=Object.create(null),l=[];for(const c of t){const d=_1(c);l.push(d),r[c.name]=d,a[c.no]=d}return{typeName:n,values:l,findName(c){return r[c]},findNumber(c){return a[c]}}}function KN(n,t,e){const r={};for(const a of t){const l=_1(a);r[l.localName]=l.no,r[l.no]=l.localName}return z1(r,n,t),r}function _1(n){return"localName"in n?n:Object.assign(Object.assign({},n),{localName:n.name})}class gt{equals(t){return this.getType().runtime.util.equals(this.getType(),this,t)}clone(){return this.getType().runtime.util.clone(this)}fromBinary(t,e){const r=this.getType(),a=r.runtime.bin,l=a.makeReadOptions(e);return a.readMessage(this,l.readerFactory(t),t.byteLength,l),this}fromJson(t,e){const r=this.getType(),a=r.runtime.json,l=a.makeReadOptions(e);return a.readMessage(r,t,l,this),this}fromJsonString(t,e){let r;try{r=JSON.parse(t)}catch(a){throw new Error(`cannot decode ${this.getType().typeName} from JSON: ${a instanceof Error?a.message:String(a)}`)}return this.fromJson(r,e)}toBinary(t){const e=this.getType(),r=e.runtime.bin,a=r.makeWriteOptions(t),l=a.writerFactory();return r.writeMessage(this,l,a),l.finish()}toJson(t){const e=this.getType(),r=e.runtime.json,a=r.makeWriteOptions(t);return r.writeMessage(this,a)}toJsonString(t){var e;const r=this.toJson(t);return JSON.stringify(r,null,(e=t==null?void 0:t.prettySpaces)!==null&&e!==void 0?e:0)}toJSON(){return this.toJson({emitDefaultValues:!0})}getType(){return Object.getPrototypeOf(this).constructor}}function GN(n,t,e,r){var a;const l=(a=r==null?void 0:r.localName)!==null&&a!==void 0?a:t.substring(t.lastIndexOf(".")+1),c={[l]:function(d){n.util.initFields(this),n.util.initPartial(d,this)}}[l];return Object.setPrototypeOf(c.prototype,new gt),Object.assign(c,{runtime:n,typeName:t,fields:n.util.newFieldList(e),fromBinary(d,h){return new c().fromBinary(d,h)},fromJson(d,h){return new c().fromJson(d,h)},fromJsonString(d,h){return new c().fromJsonString(d,h)},equals(d,h){return n.util.equals(c,d,h)}}),c}function XN(){let n=0,t=0;for(let r=0;r<28;r+=7){let a=this.buf[this.pos++];if(n|=(a&127)<<r,(a&128)==0)return this.assertBounds(),[n,t]}let e=this.buf[this.pos++];if(n|=(e&15)<<28,t=(e&112)>>4,(e&128)==0)return this.assertBounds(),[n,t];for(let r=3;r<=31;r+=7){let a=this.buf[this.pos++];if(t|=(a&127)<<r,(a&128)==0)return this.assertBounds(),[n,t]}throw new Error("invalid varint")}function Pm(n,t,e){for(let l=0;l<28;l=l+7){const c=n>>>l,d=!(!(c>>>7)&&t==0),h=(d?c|128:c)&255;if(e.push(h),!d)return}const r=n>>>28&15|(t&7)<<4,a=t>>3!=0;if(e.push((a?r|128:r)&255),!!a){for(let l=3;l<31;l=l+7){const c=t>>>l,d=!!(c>>>7),h=(d?c|128:c)&255;if(e.push(h),!d)return}e.push(t>>>31&1)}}const rd=4294967296;function Ib(n){const t=n[0]==="-";t&&(n=n.slice(1));const e=1e6;let r=0,a=0;function l(c,d){const h=Number(n.slice(c,d));a*=e,r=r*e+h,r>=rd&&(a=a+(r/rd|0),r=r%rd)}return l(-24,-18),l(-18,-12),l(-12,-6),l(-6),t?q1(r,a):op(r,a)}function FN(n,t){let e=op(n,t);const r=e.hi&2147483648;r&&(e=q1(e.lo,e.hi));const a=U1(e.lo,e.hi);return r?"-"+a:a}function U1(n,t){if({lo:n,hi:t}=ZN(n,t),t<=2097151)return String(rd*t+n);const e=n&16777215,r=(n>>>24|t<<8)&16777215,a=t>>16&65535;let l=e+r*6777216+a*6710656,c=r+a*8147497,d=a*2;const h=1e7;return l>=h&&(c+=Math.floor(l/h),l%=h),c>=h&&(d+=Math.floor(c/h),c%=h),d.toString()+Ob(c)+Ob(l)}function ZN(n,t){return{lo:n>>>0,hi:t>>>0}}function op(n,t){return{lo:n|0,hi:t|0}}function q1(n,t){return t=~t,n?n=~n+1:t+=1,op(n,t)}const Ob=n=>{const t=String(n);return"0000000".slice(t.length)+t};function Mb(n,t){if(n>=0){for(;n>127;)t.push(n&127|128),n=n>>>7;t.push(n)}else{for(let e=0;e<9;e++)t.push(n&127|128),n=n>>7;t.push(1)}}function QN(){let n=this.buf[this.pos++],t=n&127;if((n&128)==0)return this.assertBounds(),t;if(n=this.buf[this.pos++],t|=(n&127)<<7,(n&128)==0)return this.assertBounds(),t;if(n=this.buf[this.pos++],t|=(n&127)<<14,(n&128)==0)return this.assertBounds(),t;if(n=this.buf[this.pos++],t|=(n&127)<<21,(n&128)==0)return this.assertBounds(),t;n=this.buf[this.pos++],t|=(n&15)<<28;for(let e=5;(n&128)!==0&&e<10;e++)n=this.buf[this.pos++];if((n&128)!=0)throw new Error("invalid varint");return this.assertBounds(),t>>>0}var Rb={};function WN(){const n=new DataView(new ArrayBuffer(8));if(typeof BigInt=="function"&&typeof n.getBigInt64=="function"&&typeof n.getBigUint64=="function"&&typeof n.setBigInt64=="function"&&typeof n.setBigUint64=="function"&&(typeof process!="object"||typeof Rb!="object"||Rb.BUF_BIGINT_DISABLE!=="1")){const a=BigInt("-9223372036854775808"),l=BigInt("9223372036854775807"),c=BigInt("0"),d=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(h){const g=typeof h=="bigint"?h:BigInt(h);if(g>l||g<a)throw new Error(`int64 invalid: ${h}`);return g},uParse(h){const g=typeof h=="bigint"?h:BigInt(h);if(g>d||g<c)throw new Error(`uint64 invalid: ${h}`);return g},enc(h){return n.setBigInt64(0,this.parse(h),!0),{lo:n.getInt32(0,!0),hi:n.getInt32(4,!0)}},uEnc(h){return n.setBigInt64(0,this.uParse(h),!0),{lo:n.getInt32(0,!0),hi:n.getInt32(4,!0)}},dec(h,g){return n.setInt32(0,h,!0),n.setInt32(4,g,!0),n.getBigInt64(0,!0)},uDec(h,g){return n.setInt32(0,h,!0),n.setInt32(4,g,!0),n.getBigUint64(0,!0)}}}const e=a=>me(/^-?[0-9]+$/.test(a),`int64 invalid: ${a}`),r=a=>me(/^[0-9]+$/.test(a),`uint64 invalid: ${a}`);return{zero:"0",supported:!1,parse(a){return typeof a!="string"&&(a=a.toString()),e(a),a},uParse(a){return typeof a!="string"&&(a=a.toString()),r(a),a},enc(a){return typeof a!="string"&&(a=a.toString()),e(a),Ib(a)},uEnc(a){return typeof a!="string"&&(a=a.toString()),r(a),Ib(a)},dec(a,l){return FN(a,l)},uDec(a,l){return U1(a,l)}}}const $t=WN();var st;(function(n){n[n.DOUBLE=1]="DOUBLE",n[n.FLOAT=2]="FLOAT",n[n.INT64=3]="INT64",n[n.UINT64=4]="UINT64",n[n.INT32=5]="INT32",n[n.FIXED64=6]="FIXED64",n[n.FIXED32=7]="FIXED32",n[n.BOOL=8]="BOOL",n[n.STRING=9]="STRING",n[n.BYTES=12]="BYTES",n[n.UINT32=13]="UINT32",n[n.SFIXED32=15]="SFIXED32",n[n.SFIXED64=16]="SFIXED64",n[n.SINT32=17]="SINT32",n[n.SINT64=18]="SINT64"})(st||(st={}));var ga;(function(n){n[n.BIGINT=0]="BIGINT",n[n.STRING=1]="STRING"})(ga||(ga={}));function ia(n,t,e){if(t===e)return!0;if(n==st.BYTES){if(!(t instanceof Uint8Array)||!(e instanceof Uint8Array)||t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}switch(n){case st.UINT64:case st.FIXED64:case st.INT64:case st.SFIXED64:case st.SINT64:return t==e}return!1}function il(n,t){switch(n){case st.BOOL:return!1;case st.UINT64:case st.FIXED64:case st.INT64:case st.SFIXED64:case st.SINT64:return t==0?$t.zero:"0";case st.DOUBLE:case st.FLOAT:return 0;case st.BYTES:return new Uint8Array(0);case st.STRING:return"";default:return 0}}function P1(n,t){switch(n){case st.BOOL:return t===!1;case st.STRING:return t==="";case st.BYTES:return t instanceof Uint8Array&&!t.byteLength;default:return t==0}}var we;(function(n){n[n.Varint=0]="Varint",n[n.Bit64=1]="Bit64",n[n.LengthDelimited=2]="LengthDelimited",n[n.StartGroup=3]="StartGroup",n[n.EndGroup=4]="EndGroup",n[n.Bit32=5]="Bit32"})(we||(we={}));class t2{constructor(t){this.stack=[],this.textEncoder=t??new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let t=0;for(let a=0;a<this.chunks.length;a++)t+=this.chunks[a].length;let e=new Uint8Array(t),r=0;for(let a=0;a<this.chunks.length;a++)e.set(this.chunks[a],r),r+=this.chunks[a].length;return this.chunks=[],e}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let t=this.finish(),e=this.stack.pop();if(!e)throw new Error("invalid state, fork stack empty");return this.chunks=e.chunks,this.buf=e.buf,this.uint32(t.byteLength),this.raw(t)}tag(t,e){return this.uint32((t<<3|e)>>>0)}raw(t){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(t),this}uint32(t){for(ay(t);t>127;)this.buf.push(t&127|128),t=t>>>7;return this.buf.push(t),this}int32(t){return nd(t),Mb(t,this.buf),this}bool(t){return this.buf.push(t?1:0),this}bytes(t){return this.uint32(t.byteLength),this.raw(t)}string(t){let e=this.textEncoder.encode(t);return this.uint32(e.byteLength),this.raw(e)}float(t){R1(t);let e=new Uint8Array(4);return new DataView(e.buffer).setFloat32(0,t,!0),this.raw(e)}double(t){let e=new Uint8Array(8);return new DataView(e.buffer).setFloat64(0,t,!0),this.raw(e)}fixed32(t){ay(t);let e=new Uint8Array(4);return new DataView(e.buffer).setUint32(0,t,!0),this.raw(e)}sfixed32(t){nd(t);let e=new Uint8Array(4);return new DataView(e.buffer).setInt32(0,t,!0),this.raw(e)}sint32(t){return nd(t),t=(t<<1^t>>31)>>>0,Mb(t,this.buf),this}sfixed64(t){let e=new Uint8Array(8),r=new DataView(e.buffer),a=$t.enc(t);return r.setInt32(0,a.lo,!0),r.setInt32(4,a.hi,!0),this.raw(e)}fixed64(t){let e=new Uint8Array(8),r=new DataView(e.buffer),a=$t.uEnc(t);return r.setInt32(0,a.lo,!0),r.setInt32(4,a.hi,!0),this.raw(e)}int64(t){let e=$t.enc(t);return Pm(e.lo,e.hi,this.buf),this}sint64(t){let e=$t.enc(t),r=e.hi>>31,a=e.lo<<1^r,l=(e.hi<<1|e.lo>>>31)^r;return Pm(a,l,this.buf),this}uint64(t){let e=$t.uEnc(t);return Pm(e.lo,e.hi,this.buf),this}}class e2{constructor(t,e){this.varint64=XN,this.uint32=QN,this.buf=t,this.len=t.length,this.pos=0,this.view=new DataView(t.buffer,t.byteOffset,t.byteLength),this.textDecoder=e??new TextDecoder}tag(){let t=this.uint32(),e=t>>>3,r=t&7;if(e<=0||r<0||r>5)throw new Error("illegal tag: field no "+e+" wire type "+r);return[e,r]}skip(t,e){let r=this.pos;switch(t){case we.Varint:for(;this.buf[this.pos++]&128;);break;case we.Bit64:this.pos+=4;case we.Bit32:this.pos+=4;break;case we.LengthDelimited:let a=this.uint32();this.pos+=a;break;case we.StartGroup:for(;;){const[l,c]=this.tag();if(c===we.EndGroup){if(e!==void 0&&l!==e)throw new Error("invalid end group tag");break}this.skip(c,l)}break;default:throw new Error("cant skip wire type "+t)}return this.assertBounds(),this.buf.subarray(r,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let t=this.uint32();return t>>>1^-(t&1)}int64(){return $t.dec(...this.varint64())}uint64(){return $t.uDec(...this.varint64())}sint64(){let[t,e]=this.varint64(),r=-(t&1);return t=(t>>>1|(e&1)<<31)^r,e=e>>>1^r,$t.dec(t,e)}bool(){let[t,e]=this.varint64();return t!==0||e!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return $t.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return $t.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let t=this.uint32(),e=this.pos;return this.pos+=t,this.assertBounds(),this.buf.subarray(e,e+t)}string(){return this.textDecoder.decode(this.bytes())}}function n2(n,t,e,r){let a;return{typeName:t,extendee:e,get field(){if(!a){const l=typeof r=="function"?r():r;l.name=t.split(".").pop(),l.jsonName=`[${t}]`,a=n.util.newFieldList([l]).list()[0]}return a},runtime:n}}function J1(n){const t=n.field.localName,e=Object.create(null);return e[t]=r2(n),[e,()=>e[t]]}function r2(n){const t=n.field;if(t.repeated)return[];if(t.default!==void 0)return t.default;switch(t.kind){case"enum":return t.T.values[0].no;case"scalar":return il(t.T,t.L);case"message":const e=t.T,r=new e;return e.fieldWrapper?e.fieldWrapper.unwrapField(r):r;case"map":throw"map fields are not allowed to be extensions"}}function i2(n,t){if(!t.repeated&&(t.kind=="enum"||t.kind=="scalar")){for(let e=n.length-1;e>=0;--e)if(n[e].no==t.no)return[n[e]];return[]}return n.filter(e=>e.no===t.no)}let ps="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),th=[];for(let n=0;n<ps.length;n++)th[ps[n].charCodeAt(0)]=n;th[45]=ps.indexOf("+");th[95]=ps.indexOf("/");const lp={dec(n){let t=n.length*3/4;n[n.length-2]=="="?t-=2:n[n.length-1]=="="&&(t-=1);let e=new Uint8Array(t),r=0,a=0,l,c=0;for(let d=0;d<n.length;d++){if(l=th[n.charCodeAt(d)],l===void 0)switch(n[d]){case"=":a=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(a){case 0:c=l,a=1;break;case 1:e[r++]=c<<2|(l&48)>>4,c=l,a=2;break;case 2:e[r++]=(c&15)<<4|(l&60)>>2,c=l,a=3;break;case 3:e[r++]=(c&3)<<6|l,a=0;break}}if(a==1)throw Error("invalid base64 string.");return e.subarray(0,r)},enc(n){let t="",e=0,r,a=0;for(let l=0;l<n.length;l++)switch(r=n[l],e){case 0:t+=ps[r>>2],a=(r&3)<<4,e=1;break;case 1:t+=ps[a|r>>4],a=(r&15)<<2,e=2;break;case 2:t+=ps[a|r>>6],t+=ps[r&63],e=0;break}return e&&(t+=ps[a],t+="=",e==1&&(t+="=")),t}};function s2(n,t,e){H1(t,n);const r=t.runtime.bin.makeReadOptions(e),a=i2(n.getType().runtime.bin.listUnknownFields(n),t.field),[l,c]=J1(t);for(const d of a)t.runtime.bin.readField(l,r.readerFactory(d.data),t.field,d.wireType,r);return c()}function a2(n,t,e,r){H1(t,n);const a=t.runtime.bin.makeReadOptions(r),l=t.runtime.bin.makeWriteOptions(r);if($1(n,t)){const g=n.getType().runtime.bin.listUnknownFields(n).filter(p=>p.no!=t.field.no);n.getType().runtime.bin.discardUnknownFields(n);for(const p of g)n.getType().runtime.bin.onUnknownField(n,p.no,p.wireType,p.data)}const c=l.writerFactory();let d=t.field;!d.opt&&!d.repeated&&(d.kind=="enum"||d.kind=="scalar")&&(d=Object.assign(Object.assign({},t.field),{opt:!0})),t.runtime.bin.writeField(d,e,c,l);const h=a.readerFactory(c.finish());for(;h.pos<h.len;){const[g,p]=h.tag(),w=h.skip(p,g);n.getType().runtime.bin.onUnknownField(n,g,p,w)}}function $1(n,t){const e=n.getType();return t.extendee.typeName===e.typeName&&!!e.runtime.bin.listUnknownFields(n).find(r=>r.no==t.field.no)}function H1(n,t){me(n.extendee.typeName==t.getType().typeName,`extension ${n.typeName} can only be applied to message ${n.extendee.typeName}`)}function V1(n,t){const e=n.localName;if(n.repeated)return t[e].length>0;if(n.oneof)return t[n.oneof.localName].case===e;switch(n.kind){case"enum":case"scalar":return n.opt||n.req?t[e]!==void 0:n.kind=="enum"?t[e]!==n.T.values[0].no:!P1(n.T,t[e]);case"message":return t[e]!==void 0;case"map":return Object.keys(t[e]).length>0}}function Bb(n,t){const e=n.localName,r=!n.opt&&!n.req;if(n.repeated)t[e]=[];else if(n.oneof)t[n.oneof.localName]={case:void 0};else switch(n.kind){case"map":t[e]={};break;case"enum":t[e]=r?n.T.values[0].no:void 0;break;case"scalar":t[e]=r?il(n.T,n.L):void 0;break;case"message":t[e]=void 0;break}}function vs(n,t){if(n===null||typeof n!="object"||!Object.getOwnPropertyNames(gt.prototype).every(r=>r in n&&typeof n[r]=="function"))return!1;const e=n.getType();return e===null||typeof e!="function"||!("typeName"in e)||typeof e.typeName!="string"?!1:t===void 0?!0:e.typeName==t.typeName}function j1(n,t){return vs(t)||!n.fieldWrapper?t:n.fieldWrapper.wrapField(t)}st.DOUBLE,st.FLOAT,st.INT64,st.UINT64,st.INT32,st.UINT32,st.BOOL,st.STRING,st.BYTES;const zb={ignoreUnknownFields:!1},Lb={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0};function o2(n){return n?Object.assign(Object.assign({},zb),n):zb}function l2(n){return n?Object.assign(Object.assign({},Lb),n):Lb}const hd=Symbol(),id=Symbol();function u2(){return{makeReadOptions:o2,makeWriteOptions:l2,readMessage(n,t,e,r){if(t==null||Array.isArray(t)||typeof t!="object")throw new Error(`cannot decode message ${n.typeName} from JSON: ${mr(t)}`);r=r??new n;const a=new Map,l=e.typeRegistry;for(const[c,d]of Object.entries(t)){const h=n.fields.findJsonName(c);if(h){if(h.oneof){if(d===null&&h.kind=="scalar")continue;const g=a.get(h.oneof);if(g!==void 0)throw new Error(`cannot decode message ${n.typeName} from JSON: multiple keys for oneof "${h.oneof.name}" present: "${g}", "${c}"`);a.set(h.oneof,c)}_b(r,d,h,e,n)}else{let g=!1;if(l!=null&&l.findExtension&&c.startsWith("[")&&c.endsWith("]")){const p=l.findExtension(c.substring(1,c.length-1));if(p&&p.extendee.typeName==n.typeName){g=!0;const[w,v]=J1(p);_b(w,d,p.field,e,p),a2(r,p,v(),e)}}if(!g&&!e.ignoreUnknownFields)throw new Error(`cannot decode message ${n.typeName} from JSON: key "${c}" is unknown`)}}return r},writeMessage(n,t){const e=n.getType(),r={};let a;try{for(a of e.fields.byNumber()){if(!V1(a,n)){if(a.req)throw"required field not set";if(!t.emitDefaultValues||!f2(a))continue}const c=a.oneof?n[a.oneof.localName].value:n[a.localName],d=Ub(a,c,t);d!==void 0&&(r[t.useProtoFieldName?a.name:a.jsonName]=d)}const l=t.typeRegistry;if(l!=null&&l.findExtensionFor)for(const c of e.runtime.bin.listUnknownFields(n)){const d=l.findExtensionFor(e.typeName,c.no);if(d&&$1(n,d)){const h=s2(n,d,t),g=Ub(d.field,h,t);g!==void 0&&(r[d.field.jsonName]=g)}}}catch(l){const c=a?`cannot encode field ${e.typeName}.${a.name} to JSON`:`cannot encode message ${e.typeName} to JSON`,d=l instanceof Error?l.message:String(l);throw new Error(c+(d.length>0?`: ${d}`:""))}return r},readScalar(n,t,e){return Uu(n,t,e??ga.BIGINT,!0)},writeScalar(n,t,e){if(t!==void 0&&(e||P1(n,t)))return sd(n,t)},debug:mr}}function mr(n){if(n===null)return"null";switch(typeof n){case"object":return Array.isArray(n)?"array":"object";case"string":return n.length>100?"string":`"${n.split('"').join('\\"')}"`;default:return String(n)}}function _b(n,t,e,r,a){let l=e.localName;if(e.repeated){if(me(e.kind!="map"),t===null)return;if(!Array.isArray(t))throw new Error(`cannot decode field ${a.typeName}.${e.name} from JSON: ${mr(t)}`);const c=n[l];for(const d of t){if(d===null)throw new Error(`cannot decode field ${a.typeName}.${e.name} from JSON: ${mr(d)}`);switch(e.kind){case"message":c.push(e.T.fromJson(d,r));break;case"enum":const h=Jm(e.T,d,r.ignoreUnknownFields,!0);h!==id&&c.push(h);break;case"scalar":try{c.push(Uu(e.T,d,e.L,!0))}catch(g){let p=`cannot decode field ${a.typeName}.${e.name} from JSON: ${mr(d)}`;throw g instanceof Error&&g.message.length>0&&(p+=`: ${g.message}`),new Error(p)}break}}}else if(e.kind=="map"){if(t===null)return;if(typeof t!="object"||Array.isArray(t))throw new Error(`cannot decode field ${a.typeName}.${e.name} from JSON: ${mr(t)}`);const c=n[l];for(const[d,h]of Object.entries(t)){if(h===null)throw new Error(`cannot decode field ${a.typeName}.${e.name} from JSON: map value null`);let g;try{g=c2(e.K,d)}catch(p){let w=`cannot decode map key for field ${a.typeName}.${e.name} from JSON: ${mr(t)}`;throw p instanceof Error&&p.message.length>0&&(w+=`: ${p.message}`),new Error(w)}switch(e.V.kind){case"message":c[g]=e.V.T.fromJson(h,r);break;case"enum":const p=Jm(e.V.T,h,r.ignoreUnknownFields,!0);p!==id&&(c[g]=p);break;case"scalar":try{c[g]=Uu(e.V.T,h,ga.BIGINT,!0)}catch(w){let v=`cannot decode map value for field ${a.typeName}.${e.name} from JSON: ${mr(t)}`;throw w instanceof Error&&w.message.length>0&&(v+=`: ${w.message}`),new Error(v)}break}}}else switch(e.oneof&&(n=n[e.oneof.localName]={case:l},l="value"),e.kind){case"message":const c=e.T;if(t===null&&c.typeName!="google.protobuf.Value")return;let d=n[l];vs(d)?d.fromJson(t,r):(n[l]=d=c.fromJson(t,r),c.fieldWrapper&&!e.oneof&&(n[l]=c.fieldWrapper.unwrapField(d)));break;case"enum":const h=Jm(e.T,t,r.ignoreUnknownFields,!1);switch(h){case hd:Bb(e,n);break;case id:break;default:n[l]=h;break}break;case"scalar":try{const g=Uu(e.T,t,e.L,!1);switch(g){case hd:Bb(e,n);break;default:n[l]=g;break}}catch(g){let p=`cannot decode field ${a.typeName}.${e.name} from JSON: ${mr(t)}`;throw g instanceof Error&&g.message.length>0&&(p+=`: ${g.message}`),new Error(p)}break}}function c2(n,t){if(n===st.BOOL)switch(t){case"true":t=!0;break;case"false":t=!1;break}return Uu(n,t,ga.BIGINT,!0).toString()}function Uu(n,t,e,r){if(t===null)return r?il(n,e):hd;switch(n){case st.DOUBLE:case st.FLOAT:if(t==="NaN")return Number.NaN;if(t==="Infinity")return Number.POSITIVE_INFINITY;if(t==="-Infinity")return Number.NEGATIVE_INFINITY;if(t===""||typeof t=="string"&&t.trim().length!==t.length||typeof t!="string"&&typeof t!="number")break;const a=Number(t);if(Number.isNaN(a)||!Number.isFinite(a))break;return n==st.FLOAT&&R1(a),a;case st.INT32:case st.FIXED32:case st.SFIXED32:case st.SINT32:case st.UINT32:let l;if(typeof t=="number"?l=t:typeof t=="string"&&t.length>0&&t.trim().length===t.length&&(l=Number(t)),l===void 0)break;return n==st.UINT32||n==st.FIXED32?ay(l):nd(l),l;case st.INT64:case st.SFIXED64:case st.SINT64:if(typeof t!="number"&&typeof t!="string")break;const c=$t.parse(t);return e?c.toString():c;case st.FIXED64:case st.UINT64:if(typeof t!="number"&&typeof t!="string")break;const d=$t.uParse(t);return e?d.toString():d;case st.BOOL:if(typeof t!="boolean")break;return t;case st.STRING:if(typeof t!="string")break;try{encodeURIComponent(t)}catch{throw new Error("invalid UTF8")}return t;case st.BYTES:if(t==="")return new Uint8Array(0);if(typeof t!="string")break;return lp.dec(t)}throw new Error}function Jm(n,t,e,r){if(t===null)return n.typeName=="google.protobuf.NullValue"?0:r?n.values[0].no:hd;switch(typeof t){case"number":if(Number.isInteger(t))return t;break;case"string":const a=n.findName(t);if(a!==void 0)return a.no;if(e)return id;break}throw new Error(`cannot decode enum ${n.typeName} from JSON: ${mr(t)}`)}function f2(n){return n.repeated||n.kind=="map"?!0:!(n.oneof||n.kind=="message"||n.opt||n.req)}function Ub(n,t,e){if(n.kind=="map"){me(typeof t=="object"&&t!=null);const r={},a=Object.entries(t);switch(n.V.kind){case"scalar":for(const[c,d]of a)r[c.toString()]=sd(n.V.T,d);break;case"message":for(const[c,d]of a)r[c.toString()]=d.toJson(e);break;case"enum":const l=n.V.T;for(const[c,d]of a)r[c.toString()]=$m(l,d,e.enumAsInteger);break}return e.emitDefaultValues||a.length>0?r:void 0}if(n.repeated){me(Array.isArray(t));const r=[];switch(n.kind){case"scalar":for(let a=0;a<t.length;a++)r.push(sd(n.T,t[a]));break;case"enum":for(let a=0;a<t.length;a++)r.push($m(n.T,t[a],e.enumAsInteger));break;case"message":for(let a=0;a<t.length;a++)r.push(t[a].toJson(e));break}return e.emitDefaultValues||r.length>0?r:void 0}switch(n.kind){case"scalar":return sd(n.T,t);case"enum":return $m(n.T,t,e.enumAsInteger);case"message":return j1(n.T,t).toJson(e)}}function $m(n,t,e){var r;if(me(typeof t=="number"),n.typeName=="google.protobuf.NullValue")return null;if(e)return t;const a=n.findNumber(t);return(r=a==null?void 0:a.name)!==null&&r!==void 0?r:t}function sd(n,t){switch(n){case st.INT32:case st.SFIXED32:case st.SINT32:case st.FIXED32:case st.UINT32:return me(typeof t=="number"),t;case st.FLOAT:case st.DOUBLE:return me(typeof t=="number"),Number.isNaN(t)?"NaN":t===Number.POSITIVE_INFINITY?"Infinity":t===Number.NEGATIVE_INFINITY?"-Infinity":t;case st.STRING:return me(typeof t=="string"),t;case st.BOOL:return me(typeof t=="boolean"),t;case st.UINT64:case st.FIXED64:case st.INT64:case st.SFIXED64:case st.SINT64:return me(typeof t=="bigint"||typeof t=="string"||typeof t=="number"),t.toString();case st.BYTES:return me(t instanceof Uint8Array),lp.enc(t)}}const jo=Symbol("@bufbuild/protobuf/unknown-fields"),qb={readUnknownFields:!0,readerFactory:n=>new e2(n)},Pb={writeUnknownFields:!0,writerFactory:()=>new t2};function d2(n){return n?Object.assign(Object.assign({},qb),n):qb}function h2(n){return n?Object.assign(Object.assign({},Pb),n):Pb}function g2(){return{makeReadOptions:d2,makeWriteOptions:h2,listUnknownFields(n){var t;return(t=n[jo])!==null&&t!==void 0?t:[]},discardUnknownFields(n){delete n[jo]},writeUnknownFields(n,t){const r=n[jo];if(r)for(const a of r)t.tag(a.no,a.wireType).raw(a.data)},onUnknownField(n,t,e,r){const a=n;Array.isArray(a[jo])||(a[jo]=[]),a[jo].push({no:t,wireType:e,data:r})},readMessage(n,t,e,r,a){const l=n.getType(),c=a?t.len:t.pos+e;let d,h;for(;t.pos<c&&([d,h]=t.tag(),!(a===!0&&h==we.EndGroup));){const g=l.fields.find(d);if(!g){const p=t.skip(h,d);r.readUnknownFields&&this.onUnknownField(n,d,h,p);continue}Jb(n,t,g,h,r)}if(a&&(h!=we.EndGroup||d!==e))throw new Error("invalid end group tag")},readField:Jb,writeMessage(n,t,e){const r=n.getType();for(const a of r.fields.byNumber()){if(!V1(a,n)){if(a.req)throw new Error(`cannot encode field ${r.typeName}.${a.name} to binary: required field not set`);continue}const l=a.oneof?n[a.oneof.localName].value:n[a.localName];$b(a,l,t,e)}return e.writeUnknownFields&&this.writeUnknownFields(n,t),t},writeField(n,t,e,r){t!==void 0&&$b(n,t,e,r)}}}function Jb(n,t,e,r,a){let{repeated:l,localName:c}=e;switch(e.oneof&&(n=n[e.oneof.localName],n.case!=c&&delete n.value,n.case=c,c="value"),e.kind){case"scalar":case"enum":const d=e.kind=="enum"?st.INT32:e.T;let h=gd;if(e.kind=="scalar"&&e.L>0&&(h=y2),l){let v=n[c];if(r==we.LengthDelimited&&d!=st.STRING&&d!=st.BYTES){let T=t.uint32()+t.pos;for(;t.pos<T;)v.push(h(t,d))}else v.push(h(t,d))}else n[c]=h(t,d);break;case"message":const g=e.T;l?n[c].push(ad(t,new g,a,e)):vs(n[c])?ad(t,n[c],a,e):(n[c]=ad(t,new g,a,e),g.fieldWrapper&&!e.oneof&&!e.repeated&&(n[c]=g.fieldWrapper.unwrapField(n[c])));break;case"map":let[p,w]=m2(e,t,a);n[c][p]=w;break}}function ad(n,t,e,r){const a=t.getType().runtime.bin,l=r==null?void 0:r.delimited;return a.readMessage(t,n,l?r.no:n.uint32(),e,l),t}function m2(n,t,e){const r=t.uint32(),a=t.pos+r;let l,c;for(;t.pos<a;){const[d]=t.tag();switch(d){case 1:l=gd(t,n.K);break;case 2:switch(n.V.kind){case"scalar":c=gd(t,n.V.T);break;case"enum":c=t.int32();break;case"message":c=ad(t,new n.V.T,e,void 0);break}break}}if(l===void 0&&(l=il(n.K,ga.BIGINT)),typeof l!="string"&&typeof l!="number"&&(l=l.toString()),c===void 0)switch(n.V.kind){case"scalar":c=il(n.V.T,ga.BIGINT);break;case"enum":c=n.V.T.values[0].no;break;case"message":c=new n.V.T;break}return[l,c]}function y2(n,t){const e=gd(n,t);return typeof e=="bigint"?e.toString():e}function gd(n,t){switch(t){case st.STRING:return n.string();case st.BOOL:return n.bool();case st.DOUBLE:return n.double();case st.FLOAT:return n.float();case st.INT32:return n.int32();case st.INT64:return n.int64();case st.UINT64:return n.uint64();case st.FIXED64:return n.fixed64();case st.BYTES:return n.bytes();case st.FIXED32:return n.fixed32();case st.SFIXED32:return n.sfixed32();case st.SFIXED64:return n.sfixed64();case st.SINT64:return n.sint64();case st.UINT32:return n.uint32();case st.SINT32:return n.sint32()}}function $b(n,t,e,r){me(t!==void 0);const a=n.repeated;switch(n.kind){case"scalar":case"enum":let l=n.kind=="enum"?st.INT32:n.T;if(a)if(me(Array.isArray(t)),n.packed)v2(e,l,n.no,t);else for(const c of t)qu(e,l,n.no,c);else qu(e,l,n.no,t);break;case"message":if(a){me(Array.isArray(t));for(const c of t)Hb(e,r,n,c)}else Hb(e,r,n,t);break;case"map":me(typeof t=="object"&&t!=null);for(const[c,d]of Object.entries(t))p2(e,r,n,c,d);break}}function p2(n,t,e,r,a){n.tag(e.no,we.LengthDelimited),n.fork();let l=r;switch(e.K){case st.INT32:case st.FIXED32:case st.UINT32:case st.SFIXED32:case st.SINT32:l=Number.parseInt(r);break;case st.BOOL:me(r=="true"||r=="false"),l=r=="true";break}switch(qu(n,e.K,1,l),e.V.kind){case"scalar":qu(n,e.V.T,2,a);break;case"enum":qu(n,st.INT32,2,a);break;case"message":me(a!==void 0),n.tag(2,we.LengthDelimited).bytes(a.toBinary(t));break}n.join()}function Hb(n,t,e,r){const a=j1(e.T,r);e.delimited?n.tag(e.no,we.StartGroup).raw(a.toBinary(t)).tag(e.no,we.EndGroup):n.tag(e.no,we.LengthDelimited).bytes(a.toBinary(t))}function qu(n,t,e,r){me(r!==void 0);let[a,l]=Y1(t);n.tag(e,a)[l](r)}function v2(n,t,e,r){if(!r.length)return;n.tag(e,we.LengthDelimited).fork();let[,a]=Y1(t);for(let l=0;l<r.length;l++)n[a](r[l]);n.join()}function Y1(n){let t=we.Varint;switch(n){case st.BYTES:case st.STRING:t=we.LengthDelimited;break;case st.DOUBLE:case st.FIXED64:case st.SFIXED64:t=we.Bit64;break;case st.FIXED32:case st.SFIXED32:case st.FLOAT:t=we.Bit32;break}const e=st[n].toLowerCase();return[t,e]}function w2(){return{setEnumType:z1,initPartial(n,t){if(n===void 0)return;const e=t.getType();for(const r of e.fields.byMember()){const a=r.localName,l=t,c=n;if(c[a]!=null)switch(r.kind){case"oneof":const d=c[a].case;if(d===void 0)continue;const h=r.findField(d);let g=c[a].value;h&&h.kind=="message"&&!vs(g,h.T)?g=new h.T(g):h&&h.kind==="scalar"&&h.T===st.BYTES&&(g=Du(g)),l[a]={case:d,value:g};break;case"scalar":case"enum":let p=c[a];r.T===st.BYTES&&(p=r.repeated?p.map(Du):Du(p)),l[a]=p;break;case"map":switch(r.V.kind){case"scalar":case"enum":if(r.V.T===st.BYTES)for(const[b,T]of Object.entries(c[a]))l[a][b]=Du(T);else Object.assign(l[a],c[a]);break;case"message":const v=r.V.T;for(const b of Object.keys(c[a])){let T=c[a][b];v.fieldWrapper||(T=new v(T)),l[a][b]=T}break}break;case"message":const w=r.T;if(r.repeated)l[a]=c[a].map(v=>vs(v,w)?v:new w(v));else{const v=c[a];w.fieldWrapper?w.typeName==="google.protobuf.BytesValue"?l[a]=Du(v):l[a]=v:l[a]=vs(v,w)?v:new w(v)}break}}},equals(n,t,e){return t===e?!0:!t||!e?!1:n.fields.byMember().every(r=>{const a=t[r.localName],l=e[r.localName];if(r.repeated){if(a.length!==l.length)return!1;switch(r.kind){case"message":return a.every((c,d)=>r.T.equals(c,l[d]));case"scalar":return a.every((c,d)=>ia(r.T,c,l[d]));case"enum":return a.every((c,d)=>ia(st.INT32,c,l[d]))}throw new Error(`repeated cannot contain ${r.kind}`)}switch(r.kind){case"message":let c=a,d=l;return r.T.fieldWrapper&&(c!==void 0&&!vs(c)&&(c=r.T.fieldWrapper.wrapField(c)),d!==void 0&&!vs(d)&&(d=r.T.fieldWrapper.wrapField(d))),r.T.equals(c,d);case"enum":return ia(st.INT32,a,l);case"scalar":return ia(r.T,a,l);case"oneof":if(a.case!==l.case)return!1;const h=r.findField(a.case);if(h===void 0)return!0;switch(h.kind){case"message":return h.T.equals(a.value,l.value);case"enum":return ia(st.INT32,a.value,l.value);case"scalar":return ia(h.T,a.value,l.value)}throw new Error(`oneof cannot contain ${h.kind}`);case"map":const g=Object.keys(a).concat(Object.keys(l));switch(r.V.kind){case"message":const p=r.V.T;return g.every(v=>p.equals(a[v],l[v]));case"enum":return g.every(v=>ia(st.INT32,a[v],l[v]));case"scalar":const w=r.V.T;return g.every(v=>ia(w,a[v],l[v]))}break}})},clone(n){const t=n.getType(),e=new t,r=e;for(const a of t.fields.byMember()){const l=n[a.localName];let c;if(a.repeated)c=l.map(Pf);else if(a.kind=="map"){c=r[a.localName];for(const[d,h]of Object.entries(l))c[d]=Pf(h)}else a.kind=="oneof"?c=a.findField(l.case)?{case:l.case,value:Pf(l.value)}:{case:void 0}:c=Pf(l);r[a.localName]=c}for(const a of t.runtime.bin.listUnknownFields(n))t.runtime.bin.onUnknownField(r,a.no,a.wireType,a.data);return e}}}function Pf(n){if(n===void 0)return n;if(vs(n))return n.clone();if(n instanceof Uint8Array){const t=new Uint8Array(n.byteLength);return t.set(n),t}return n}function Du(n){return n instanceof Uint8Array?n:new Uint8Array(n)}function b2(n,t,e){return{syntax:n,json:u2(),bin:g2(),util:Object.assign(Object.assign({},w2()),{newFieldList:t,initFields:e}),makeMessageType(r,a,l){return GN(this,r,a,l)},makeEnum:KN,makeEnumType:L1,getEnumType:YN,makeExtension(r,a,l){return n2(this,r,a,l)}}}class S2{constructor(t,e){this._fields=t,this._normalizer=e}findJsonName(t){if(!this.jsonNames){const e={};for(const r of this.list())e[r.jsonName]=e[r.name]=r;this.jsonNames=e}return this.jsonNames[t]}find(t){if(!this.numbers){const e={};for(const r of this.list())e[r.no]=r;this.numbers=e}return this.numbers[t]}list(){return this.all||(this.all=this._normalizer(this._fields)),this.all}byNumber(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort((t,e)=>t.no-e.no)),this.numbersAsc}byMember(){if(!this.members){this.members=[];const t=this.members;let e;for(const r of this.list())r.oneof?r.oneof!==e&&(e=r.oneof,t.push(e)):t.push(r)}return this.members}}function K1(n,t){const e=G1(n);return t?e:C2(N2(e))}function x2(n){return K1(n,!1)}const T2=G1;function G1(n){let t=!1;const e=[];for(let r=0;r<n.length;r++){let a=n.charAt(r);switch(a){case"_":t=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":e.push(a),t=!1;break;default:t&&(t=!1,a=a.toUpperCase()),e.push(a);break}}return e.join("")}const A2=new Set(["constructor","toString","toJSON","valueOf"]),E2=new Set(["getType","clone","equals","fromBinary","fromJson","fromJsonString","toBinary","toJson","toJsonString","toObject"]),X1=n=>`${n}$`,N2=n=>E2.has(n)?X1(n):n,C2=n=>A2.has(n)?X1(n):n;class k2{constructor(t){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.req=!1,this.default=void 0,this.fields=[],this.name=t,this.localName=x2(t)}addField(t){me(t.oneof===this,`field ${t.name} not one of ${this.name}`),this.fields.push(t)}findField(t){if(!this._lookup){this._lookup=Object.create(null);for(let e=0;e<this.fields.length;e++)this._lookup[this.fields[e].localName]=this.fields[e]}return this._lookup[t]}}function D2(n,t){var e,r,a,l,c,d;const h=[];let g;for(const p of typeof n=="function"?n():n){const w=p;if(w.localName=K1(p.name,p.oneof!==void 0),w.jsonName=(e=p.jsonName)!==null&&e!==void 0?e:T2(p.name),w.repeated=(r=p.repeated)!==null&&r!==void 0?r:!1,p.kind=="scalar"&&(w.L=(a=p.L)!==null&&a!==void 0?a:ga.BIGINT),w.delimited=(l=p.delimited)!==null&&l!==void 0?l:!1,w.req=(c=p.req)!==null&&c!==void 0?c:!1,w.opt=(d=p.opt)!==null&&d!==void 0?d:!1,p.packed===void 0&&(w.packed=p.kind=="enum"||p.kind=="scalar"&&p.T!=st.BYTES&&p.T!=st.STRING),p.oneof!==void 0){const v=typeof p.oneof=="string"?p.oneof:p.oneof.name;(!g||g.name!=v)&&(g=new k2(v)),w.oneof=g,g.addField(w)}h.push(w)}return h}const x=b2("proto3",n=>new S2(n,t=>D2(t)),n=>{for(const t of n.getType().fields.byMember()){if(t.opt)continue;const e=t.localName,r=n;if(t.repeated){r[e]=[];continue}switch(t.kind){case"oneof":r[e]={case:void 0};break;case"enum":r[e]=0;break;case"map":r[e]={};break;case"scalar":r[e]=il(t.T,t.L);break}}});var De;(function(n){n[n.Unary=0]="Unary",n[n.ServerStreaming=1]="ServerStreaming",n[n.ClientStreaming=2]="ClientStreaming",n[n.BiDiStreaming=3]="BiDiStreaming"})(De||(De={}));var Vb;(function(n){n[n.NoSideEffects=1]="NoSideEffects",n[n.Idempotent=2]="Idempotent"})(Vb||(Vb={}));class Ue extends gt{constructor(t){super(),this.seconds=$t.zero,this.nanos=0,x.util.initPartial(t,this)}fromJson(t,e){if(typeof t!="string")throw new Error(`cannot decode google.protobuf.Timestamp from JSON: ${x.json.debug(t)}`);const r=t.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!r)throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");const a=Date.parse(r[1]+"-"+r[2]+"-"+r[3]+"T"+r[4]+":"+r[5]+":"+r[6]+(r[8]?r[8]:"Z"));if(Number.isNaN(a))throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");if(a<Date.parse("0001-01-01T00:00:00Z")||a>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot decode message google.protobuf.Timestamp from JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");return this.seconds=$t.parse(a/1e3),this.nanos=0,r[7]&&(this.nanos=parseInt("1"+r[7]+"0".repeat(9-r[7].length))-1e9),this}toJson(t){const e=Number(this.seconds)*1e3;if(e<Date.parse("0001-01-01T00:00:00Z")||e>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot encode google.protobuf.Timestamp to JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");if(this.nanos<0)throw new Error("cannot encode google.protobuf.Timestamp to JSON: nanos must not be negative");let r="Z";if(this.nanos>0){const a=(this.nanos+1e9).toString().substring(1);a.substring(3)==="000000"?r="."+a.substring(0,3)+"Z":a.substring(6)==="000"?r="."+a.substring(0,6)+"Z":r="."+a+"Z"}return new Date(e).toISOString().replace(".000Z",r)}toDate(){return new Date(Number(this.seconds)*1e3+Math.ceil(this.nanos/1e6))}static now(){return Ue.fromDate(new Date)}static fromDate(t){const e=t.getTime();return new Ue({seconds:$t.parse(Math.floor(e/1e3)),nanos:e%1e3*1e6})}static fromBinary(t,e){return new Ue().fromBinary(t,e)}static fromJson(t,e){return new Ue().fromJson(t,e)}static fromJsonString(t,e){return new Ue().fromJsonString(t,e)}static equals(t,e){return x.util.equals(Ue,t,e)}}Ue.runtime=x;Ue.typeName="google.protobuf.Timestamp";Ue.fields=x.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);class ws extends gt{constructor(t){super(),this.seconds=$t.zero,this.nanos=0,x.util.initPartial(t,this)}fromJson(t,e){if(typeof t!="string")throw new Error(`cannot decode google.protobuf.Duration from JSON: ${x.json.debug(t)}`);const r=t.match(/^(-?[0-9]+)(?:\.([0-9]+))?s/);if(r===null)throw new Error(`cannot decode google.protobuf.Duration from JSON: ${x.json.debug(t)}`);const a=Number(r[1]);if(a>315576e6||a<-315576e6)throw new Error(`cannot decode google.protobuf.Duration from JSON: ${x.json.debug(t)}`);if(this.seconds=$t.parse(a),typeof r[2]=="string"){const l=r[2]+"0".repeat(9-r[2].length);this.nanos=parseInt(l),(a<0||Object.is(a,-0))&&(this.nanos=-this.nanos)}return this}toJson(t){if(Number(this.seconds)>315576e6||Number(this.seconds)<-315576e6)throw new Error("cannot encode google.protobuf.Duration to JSON: value out of range");let e=this.seconds.toString();if(this.nanos!==0){let r=Math.abs(this.nanos).toString();r="0".repeat(9-r.length)+r,r.substring(3)==="000000"?r=r.substring(0,3):r.substring(6)==="000"&&(r=r.substring(0,6)),e+="."+r,this.nanos<0&&Number(this.seconds)==0&&(e="-"+e)}return e+"s"}static fromBinary(t,e){return new ws().fromBinary(t,e)}static fromJson(t,e){return new ws().fromJson(t,e)}static fromJsonString(t,e){return new ws().fromJsonString(t,e)}static equals(t,e){return x.util.equals(ws,t,e)}}ws.runtime=x;ws.typeName="google.protobuf.Duration";ws.fields=x.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);class pr extends gt{constructor(t){super(),this.typeUrl="",this.value=new Uint8Array(0),x.util.initPartial(t,this)}toJson(t){var e;if(this.typeUrl==="")return{};const r=this.typeUrlToName(this.typeUrl),a=(e=t==null?void 0:t.typeRegistry)===null||e===void 0?void 0:e.findMessage(r);if(!a)throw new Error(`cannot encode message google.protobuf.Any to JSON: "${this.typeUrl}" is not in the type registry`);let c=a.fromBinary(this.value).toJson(t);return(r.startsWith("google.protobuf.")||c===null||Array.isArray(c)||typeof c!="object")&&(c={value:c}),c["@type"]=this.typeUrl,c}fromJson(t,e){var r;if(t===null||Array.isArray(t)||typeof t!="object")throw new Error(`cannot decode message google.protobuf.Any from JSON: expected object but got ${t===null?"null":Array.isArray(t)?"array":typeof t}`);if(Object.keys(t).length==0)return this;const a=t["@type"];if(typeof a!="string"||a=="")throw new Error('cannot decode message google.protobuf.Any from JSON: "@type" is empty');const l=this.typeUrlToName(a),c=(r=e==null?void 0:e.typeRegistry)===null||r===void 0?void 0:r.findMessage(l);if(!c)throw new Error(`cannot decode message google.protobuf.Any from JSON: ${a} is not in the type registry`);let d;if(l.startsWith("google.protobuf.")&&Object.prototype.hasOwnProperty.call(t,"value"))d=c.fromJson(t.value,e);else{const h=Object.assign({},t);delete h["@type"],d=c.fromJson(h,e)}return this.packFrom(d),this}packFrom(t){this.value=t.toBinary(),this.typeUrl=this.typeNameToUrl(t.getType().typeName)}unpackTo(t){return this.is(t.getType())?(t.fromBinary(this.value),!0):!1}unpack(t){if(this.typeUrl==="")return;const e=t.findMessage(this.typeUrlToName(this.typeUrl));if(e)return e.fromBinary(this.value)}is(t){if(this.typeUrl==="")return!1;const e=this.typeUrlToName(this.typeUrl);let r="";return typeof t=="string"?r=t:r=t.typeName,e===r}typeNameToUrl(t){return`type.googleapis.com/${t}`}typeUrlToName(t){if(!t.length)throw new Error(`invalid type url: ${t}`);const e=t.lastIndexOf("/"),r=e>=0?t.substring(e+1):t;if(!r.length)throw new Error(`invalid type url: ${t}`);return r}static pack(t){const e=new pr;return e.packFrom(t),e}static fromBinary(t,e){return new pr().fromBinary(t,e)}static fromJson(t,e){return new pr().fromJson(t,e)}static fromJsonString(t,e){return new pr().fromJsonString(t,e)}static equals(t,e){return x.util.equals(pr,t,e)}}pr.runtime=x;pr.typeName="google.protobuf.Any";pr.fields=x.util.newFieldList(()=>[{no:1,name:"type_url",kind:"scalar",T:9},{no:2,name:"value",kind:"scalar",T:12}]);class vr extends gt{constructor(t){super(),this.value=0,x.util.initPartial(t,this)}toJson(t){return x.json.writeScalar(st.DOUBLE,this.value,!0)}fromJson(t,e){try{this.value=x.json.readScalar(st.DOUBLE,t)}catch(r){let a='cannot decode message google.protobuf.DoubleValue from JSON"';throw r instanceof Error&&r.message.length>0&&(a+=`: ${r.message}`),new Error(a)}return this}static fromBinary(t,e){return new vr().fromBinary(t,e)}static fromJson(t,e){return new vr().fromJson(t,e)}static fromJsonString(t,e){return new vr().fromJsonString(t,e)}static equals(t,e){return x.util.equals(vr,t,e)}}vr.runtime=x;vr.typeName="google.protobuf.DoubleValue";vr.fields=x.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:1}]);vr.fieldWrapper={wrapField(n){return new vr({value:n})},unwrapField(n){return n.value}};class wr extends gt{constructor(t){super(),this.value=0,x.util.initPartial(t,this)}toJson(t){return x.json.writeScalar(st.FLOAT,this.value,!0)}fromJson(t,e){try{this.value=x.json.readScalar(st.FLOAT,t)}catch(r){let a='cannot decode message google.protobuf.FloatValue from JSON"';throw r instanceof Error&&r.message.length>0&&(a+=`: ${r.message}`),new Error(a)}return this}static fromBinary(t,e){return new wr().fromBinary(t,e)}static fromJson(t,e){return new wr().fromJson(t,e)}static fromJsonString(t,e){return new wr().fromJsonString(t,e)}static equals(t,e){return x.util.equals(wr,t,e)}}wr.runtime=x;wr.typeName="google.protobuf.FloatValue";wr.fields=x.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:2}]);wr.fieldWrapper={wrapField(n){return new wr({value:n})},unwrapField(n){return n.value}};class Un extends gt{constructor(t){super(),this.value=$t.zero,x.util.initPartial(t,this)}toJson(t){return x.json.writeScalar(st.INT64,this.value,!0)}fromJson(t,e){try{this.value=x.json.readScalar(st.INT64,t)}catch(r){let a='cannot decode message google.protobuf.Int64Value from JSON"';throw r instanceof Error&&r.message.length>0&&(a+=`: ${r.message}`),new Error(a)}return this}static fromBinary(t,e){return new Un().fromBinary(t,e)}static fromJson(t,e){return new Un().fromJson(t,e)}static fromJsonString(t,e){return new Un().fromJsonString(t,e)}static equals(t,e){return x.util.equals(Un,t,e)}}Un.runtime=x;Un.typeName="google.protobuf.Int64Value";Un.fields=x.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:3}]);Un.fieldWrapper={wrapField(n){return new Un({value:n})},unwrapField(n){return n.value}};class qn extends gt{constructor(t){super(),this.value=$t.zero,x.util.initPartial(t,this)}toJson(t){return x.json.writeScalar(st.UINT64,this.value,!0)}fromJson(t,e){try{this.value=x.json.readScalar(st.UINT64,t)}catch(r){let a='cannot decode message google.protobuf.UInt64Value from JSON"';throw r instanceof Error&&r.message.length>0&&(a+=`: ${r.message}`),new Error(a)}return this}static fromBinary(t,e){return new qn().fromBinary(t,e)}static fromJson(t,e){return new qn().fromJson(t,e)}static fromJsonString(t,e){return new qn().fromJsonString(t,e)}static equals(t,e){return x.util.equals(qn,t,e)}}qn.runtime=x;qn.typeName="google.protobuf.UInt64Value";qn.fields=x.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:4}]);qn.fieldWrapper={wrapField(n){return new qn({value:n})},unwrapField(n){return n.value}};class mn extends gt{constructor(t){super(),this.value=0,x.util.initPartial(t,this)}toJson(t){return x.json.writeScalar(st.INT32,this.value,!0)}fromJson(t,e){try{this.value=x.json.readScalar(st.INT32,t)}catch(r){let a='cannot decode message google.protobuf.Int32Value from JSON"';throw r instanceof Error&&r.message.length>0&&(a+=`: ${r.message}`),new Error(a)}return this}static fromBinary(t,e){return new mn().fromBinary(t,e)}static fromJson(t,e){return new mn().fromJson(t,e)}static fromJsonString(t,e){return new mn().fromJsonString(t,e)}static equals(t,e){return x.util.equals(mn,t,e)}}mn.runtime=x;mn.typeName="google.protobuf.Int32Value";mn.fields=x.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:5}]);mn.fieldWrapper={wrapField(n){return new mn({value:n})},unwrapField(n){return n.value}};class br extends gt{constructor(t){super(),this.value=0,x.util.initPartial(t,this)}toJson(t){return x.json.writeScalar(st.UINT32,this.value,!0)}fromJson(t,e){try{this.value=x.json.readScalar(st.UINT32,t)}catch(r){let a='cannot decode message google.protobuf.UInt32Value from JSON"';throw r instanceof Error&&r.message.length>0&&(a+=`: ${r.message}`),new Error(a)}return this}static fromBinary(t,e){return new br().fromBinary(t,e)}static fromJson(t,e){return new br().fromJson(t,e)}static fromJsonString(t,e){return new br().fromJsonString(t,e)}static equals(t,e){return x.util.equals(br,t,e)}}br.runtime=x;br.typeName="google.protobuf.UInt32Value";br.fields=x.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:13}]);br.fieldWrapper={wrapField(n){return new br({value:n})},unwrapField(n){return n.value}};class tr extends gt{constructor(t){super(),this.value=!1,x.util.initPartial(t,this)}toJson(t){return x.json.writeScalar(st.BOOL,this.value,!0)}fromJson(t,e){try{this.value=x.json.readScalar(st.BOOL,t)}catch(r){let a='cannot decode message google.protobuf.BoolValue from JSON"';throw r instanceof Error&&r.message.length>0&&(a+=`: ${r.message}`),new Error(a)}return this}static fromBinary(t,e){return new tr().fromBinary(t,e)}static fromJson(t,e){return new tr().fromJson(t,e)}static fromJsonString(t,e){return new tr().fromJsonString(t,e)}static equals(t,e){return x.util.equals(tr,t,e)}}tr.runtime=x;tr.typeName="google.protobuf.BoolValue";tr.fields=x.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:8}]);tr.fieldWrapper={wrapField(n){return new tr({value:n})},unwrapField(n){return n.value}};class Ae extends gt{constructor(t){super(),this.value="",x.util.initPartial(t,this)}toJson(t){return x.json.writeScalar(st.STRING,this.value,!0)}fromJson(t,e){try{this.value=x.json.readScalar(st.STRING,t)}catch(r){let a='cannot decode message google.protobuf.StringValue from JSON"';throw r instanceof Error&&r.message.length>0&&(a+=`: ${r.message}`),new Error(a)}return this}static fromBinary(t,e){return new Ae().fromBinary(t,e)}static fromJson(t,e){return new Ae().fromJson(t,e)}static fromJsonString(t,e){return new Ae().fromJsonString(t,e)}static equals(t,e){return x.util.equals(Ae,t,e)}}Ae.runtime=x;Ae.typeName="google.protobuf.StringValue";Ae.fields=x.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:9}]);Ae.fieldWrapper={wrapField(n){return new Ae({value:n})},unwrapField(n){return n.value}};class Sr extends gt{constructor(t){super(),this.value=new Uint8Array(0),x.util.initPartial(t,this)}toJson(t){return x.json.writeScalar(st.BYTES,this.value,!0)}fromJson(t,e){try{this.value=x.json.readScalar(st.BYTES,t)}catch(r){let a='cannot decode message google.protobuf.BytesValue from JSON"';throw r instanceof Error&&r.message.length>0&&(a+=`: ${r.message}`),new Error(a)}return this}static fromBinary(t,e){return new Sr().fromBinary(t,e)}static fromJson(t,e){return new Sr().fromJson(t,e)}static fromJsonString(t,e){return new Sr().fromJsonString(t,e)}static equals(t,e){return x.util.equals(Sr,t,e)}}Sr.runtime=x;Sr.typeName="google.protobuf.BytesValue";Sr.fields=x.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:12}]);Sr.fieldWrapper={wrapField(n){return new Sr({value:n})},unwrapField(n){return n.value}};function I2(n,t,e){try{const r=lp.dec(n);return t?t.fromBinary(r,e):r}catch(r){throw ee.from(r,qt.DataLoss)}}function O2(n,t){const e={};for(const[r,a]of Object.entries(n.methods)){const l=t(Object.assign(Object.assign({},a),{localName:r,service:n}));l!=null&&(e[r]=l)}return e}const jb=1;function Yb(n){let t,e=new Uint8Array(0);function r(a){const l=new Uint8Array(e.length+a.length);l.set(e),l.set(a,e.length),e=l}return new ReadableStream({start(){t=n.getReader()},async pull(a){let l;for(;;){if(l===void 0&&e.byteLength>=5){let h=0;for(let g=1;g<5;g++)h=(h<<8)+e[g];l={flags:e[0],length:h}}if(l!==void 0&&e.byteLength>=l.length+5)break;const d=await t.read();if(d.done)break;r(d.value)}if(l===void 0){if(e.byteLength==0){a.close();return}a.error(new ee("premature end of stream",qt.DataLoss));return}const c=e.subarray(5,5+l.length);e=e.subarray(5+l.length),a.enqueue({flags:l.flags,data:c})}})}function Kb(n,t){const e=new Uint8Array(t.length+5);e.set(t,5);const r=new DataView(e.buffer,e.byteOffset,e.byteLength);return r.setUint8(0,n),r.setUint32(1,t.length),e}var M2=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=n[Symbol.asyncIterator],e;return t?t.call(n):(n=typeof __values=="function"?__values(n):n[Symbol.iterator](),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(l){e[l]=n[l]&&function(c){return new Promise(function(d,h){c=n[l](c),a(d,h,c.done,c.value)})}}function a(l,c,d,h){Promise.resolve(h).then(function(g){l({value:g,done:d})},c)}},Ku=function(n){return this instanceof Ku?(this.v=n,this):new Ku(n)},R2=function(n,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=e.apply(n,t||[]),a,l=[];return a={},d("next"),d("throw"),d("return",c),a[Symbol.asyncIterator]=function(){return this},a;function c(b){return function(T){return Promise.resolve(T).then(b,w)}}function d(b,T){r[b]&&(a[b]=function(A){return new Promise(function(C,D){l.push([b,A,C,D])>1||h(b,A)})},T&&(a[b]=T(a[b])))}function h(b,T){try{g(r[b](T))}catch(A){v(l[0][3],A)}}function g(b){b.value instanceof Ku?Promise.resolve(b.value.v).then(p,w):v(l[0][2],b)}function p(b){h("next",b)}function w(b){h("throw",b)}function v(b,T){b(T),l.shift(),l.length&&h(l[0][0],l[0][1])}},B2=function(n){var t,e;return t={},r("next"),r("throw",function(a){throw a}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(a,l){t[a]=n[a]?function(c){return(e=!e)?{value:Ku(n[a](c)),done:!1}:l?l(c):c}:l}};function z2(n){return R2(this,arguments,function*(){yield Ku(yield*B2(M2(n)))})}var F1=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=n[Symbol.asyncIterator],e;return t?t.call(n):(n=typeof __values=="function"?__values(n):n[Symbol.iterator](),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(l){e[l]=n[l]&&function(c){return new Promise(function(d,h){c=n[l](c),a(d,h,c.done,c.value)})}}function a(l,c,d,h){Promise.resolve(h).then(function(g){l({value:g,done:d})},c)}},sl=function(n){return this instanceof sl?(this.v=n,this):new sl(n)},L2=function(n){var t,e;return t={},r("next"),r("throw",function(a){throw a}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(a,l){t[a]=n[a]?function(c){return(e=!e)?{value:sl(n[a](c)),done:!1}:l?l(c):c}:l}},_2=function(n,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=e.apply(n,t||[]),a,l=[];return a={},d("next"),d("throw"),d("return",c),a[Symbol.asyncIterator]=function(){return this},a;function c(b){return function(T){return Promise.resolve(T).then(b,w)}}function d(b,T){r[b]&&(a[b]=function(A){return new Promise(function(C,D){l.push([b,A,C,D])>1||h(b,A)})},T&&(a[b]=T(a[b])))}function h(b,T){try{g(r[b](T))}catch(A){v(l[0][3],A)}}function g(b){b.value instanceof sl?Promise.resolve(b.value.v).then(p,w):v(l[0][2],b)}function p(b){h("next",b)}function w(b){h("throw",b)}function v(b,T){b(T),l.shift(),l.length&&h(l[0][0],l[0][1])}};function U2(n,t){return O2(n,e=>{switch(e.kind){case De.Unary:return q2(t,n,e);case De.ServerStreaming:return P2(t,n,e);case De.ClientStreaming:return J2(t,n,e);case De.BiDiStreaming:return $2(t,n,e);default:return null}})}function q2(n,t,e){return async function(r,a){var l,c;const d=await n.unary(t,e,a==null?void 0:a.signal,a==null?void 0:a.timeoutMs,a==null?void 0:a.headers,r,a==null?void 0:a.contextValues);return(l=a==null?void 0:a.onHeader)===null||l===void 0||l.call(a,d.header),(c=a==null?void 0:a.onTrailer)===null||c===void 0||c.call(a,d.trailer),d.message}}function P2(n,t,e){return function(r,a){return Z1(n.stream(t,e,a==null?void 0:a.signal,a==null?void 0:a.timeoutMs,a==null?void 0:a.headers,z2([r]),a==null?void 0:a.contextValues),a)}}function J2(n,t,e){return async function(r,a){var l,c,d,h,g,p;const w=await n.stream(t,e,a==null?void 0:a.signal,a==null?void 0:a.timeoutMs,a==null?void 0:a.headers,r,a==null?void 0:a.contextValues);(g=a==null?void 0:a.onHeader)===null||g===void 0||g.call(a,w.header);let v,b=0;try{for(var T=!0,A=F1(w.message),C;C=await A.next(),l=C.done,!l;T=!0)h=C.value,T=!1,v=h,b++}catch(D){c={error:D}}finally{try{!T&&!l&&(d=A.return)&&await d.call(A)}finally{if(c)throw c.error}}if(!v)throw new ee("protocol error: missing response message",qt.Unimplemented);if(b>1)throw new ee("protocol error: received extra messages for client streaming method",qt.Unimplemented);return(p=a==null?void 0:a.onTrailer)===null||p===void 0||p.call(a,w.trailer),v}}function $2(n,t,e){return function(r,a){return Z1(n.stream(t,e,a==null?void 0:a.signal,a==null?void 0:a.timeoutMs,a==null?void 0:a.headers,r,a==null?void 0:a.contextValues),a)}}function Z1(n,t){const e=function(){return _2(this,arguments,function*(){var r,a;const l=yield sl(n);(r=t==null?void 0:t.onHeader)===null||r===void 0||r.call(t,l.header),yield sl(yield*L2(F1(l.message))),(a=t==null?void 0:t.onTrailer)===null||a===void 0||a.call(t,l.trailer)})}()[Symbol.asyncIterator]();return{[Symbol.asyncIterator]:()=>({next:()=>e.next()})}}function H2(...n){const t=new AbortController,e=n.filter(a=>a!==void 0).concat(t.signal);for(const a of e){if(a.aborted){r.apply(a);break}a.addEventListener("abort",r)}function r(){t.signal.aborted||t.abort(Q1(this));for(const a of e)a.removeEventListener("abort",r)}return t}function V2(n){const t=new AbortController,e=()=>{t.abort(new ee("the operation timed out",qt.DeadlineExceeded))};let r;return n!==void 0&&(n<=0?e():r=setTimeout(e,n)),{signal:t.signal,cleanup:()=>clearTimeout(r)}}function Q1(n){if(!n.aborted)return;if(n.reason!==void 0)return n.reason;const t=new Error("This operation was aborted");return t.name="AbortError",t}function Gb(){return{get(n){return n.id in this?this[n.id]:n.defaultValue},set(n,t){return this[n.id]=t,this},delete(n){return delete this[n.id],this}}}const Hm=128;function Xb(n){const t=new Headers,e=new TextDecoder().decode(n).split(`\r
`);for(const r of e){if(r==="")continue;const a=r.indexOf(":");if(a>0){const l=r.substring(0,a).trim(),c=r.substring(a+1).trim();t.append(l,c)}}return t}const j2="Content-Type",Y2="Grpc-Timeout",al="Grpc-Status",W1="Grpc-Message",K2="Grpc-Status-Details-Bin",G2="X-User-Agent",X2="X-Grpc-Web",F2="application/grpc-web+proto",Z2="application/grpc-web+json";class bs extends gt{constructor(t){super(),this.code=0,this.message="",this.details=[],x.util.initPartial(t,this)}static fromBinary(t,e){return new bs().fromBinary(t,e)}static fromJson(t,e){return new bs().fromJson(t,e)}static fromJsonString(t,e){return new bs().fromJsonString(t,e)}static equals(t,e){return x.util.equals(bs,t,e)}}bs.runtime=x;bs.typeName="google.rpc.Status";bs.fields=x.util.newFieldList(()=>[{no:1,name:"code",kind:"scalar",T:5},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"details",kind:"message",T:pr,repeated:!0}]);const Q2="0";function tx(n){var t;const e=n.get(K2);if(e!=null){const a=I2(e,bs);if(a.code==0)return;const l=new ee(a.message,a.code,n);return l.details=a.details.map(c=>({type:c.typeUrl.substring(c.typeUrl.lastIndexOf("/")+1),value:c.value})),l}const r=n.get(al);if(r!=null){if(r===Q2)return;const a=parseInt(r,10);return a in qt?new ee(decodeURIComponent((t=n.get(W1))!==null&&t!==void 0?t:""),a,n):new ee(`invalid grpc-status: ${r}`,qt.Internal,n)}}function Fb(n,t,e){const r=typeof t=="string"?t:t.typeName,a=typeof e=="string"?e:e.name;return n.toString().replace(/\/?$/,`/${r}/${a}`)}function ex(n,t){return t instanceof n?t:new n(t)}function W2(n,t){function e(r){return r.done===!0?r:{done:r.done,value:ex(n,r.value)}}return{[Symbol.asyncIterator](){const r=t[Symbol.asyncIterator](),a={next:()=>r.next().then(e)};return r.throw!==void 0&&(a.throw=l=>r.throw(l).then(e)),r.return!==void 0&&(a.return=l=>r.return(l).then(e)),a}}}function nx(n,t){var e;return(e=t==null?void 0:t.concat().reverse().reduce((r,a)=>a(r),n))!==null&&e!==void 0?e:n}function tC(n){var t;const e=Object.assign({},n);return(t=e.ignoreUnknownFields)!==null&&t!==void 0||(e.ignoreUnknownFields=!0),e}function Zb(n,t,e,r){const a=t?Qb(n.I,r):Wb(n.I,e);return{parse:(t?Qb(n.O,r):Wb(n.O,e)).parse,serialize:a.serialize}}function Qb(n,t){return{parse(e){try{return n.fromBinary(e,t)}catch(r){const a=r instanceof Error?r.message:String(r);throw new ee(`parse binary: ${a}`,qt.Internal)}},serialize(e){try{return e.toBinary(t)}catch(r){const a=r instanceof Error?r.message:String(r);throw new ee(`serialize binary: ${a}`,qt.Internal)}}}}function Wb(n,t){var e,r;const a=(e=t==null?void 0:t.textEncoder)!==null&&e!==void 0?e:new TextEncoder,l=(r=t==null?void 0:t.textDecoder)!==null&&r!==void 0?r:new TextDecoder,c=tC(t);return{parse(d){try{const h=l.decode(d);return n.fromJsonString(h,c)}catch(h){throw ee.from(h,qt.InvalidArgument)}},serialize(d){try{const h=d.toJsonString(c);return a.encode(h)}catch(h){throw ee.from(h,qt.Internal)}}}}function eC(n){const t=nx(n.next,n.interceptors),[e,r,a]=rx(n),l=Object.assign(Object.assign({},n.req),{message:ex(n.req.method.I,n.req.message),signal:e});return t(l).then(c=>(a(),c),r)}function nC(n){const t=nx(n.next,n.interceptors),[e,r,a]=rx(n),l=Object.assign(Object.assign({},n.req),{message:W2(n.req.method.I,n.req.message),signal:e});let c=!1;return e.addEventListener("abort",function(){var d,h;const g=n.req.message[Symbol.asyncIterator]();c||(d=g.throw)===null||d===void 0||d.call(g,this.reason).catch(()=>{}),(h=g.return)===null||h===void 0||h.call(g).catch(()=>{})}),t(l).then(d=>Object.assign(Object.assign({},d),{message:{[Symbol.asyncIterator](){const h=d.message[Symbol.asyncIterator]();return{next(){return h.next().then(g=>(g.done==!0&&(c=!0,a()),g),r)}}}}}),r)}function rx(n){const{signal:t,cleanup:e}=V2(n.timeoutMs),r=H2(n.signal,t);return[r.signal,function(l){const c=ee.from(t.aborted?Q1(t):l);return r.abort(c),e(),Promise.reject(c)},function(){e(),r.abort()}]}function rC(){try{new Headers}catch{throw new Error("connect-web requires the fetch API. Are you running on an old version of Node.js? Node.js is not supported in Connect for Web - please stay tuned for Connect for Node.")}}function tS(n,t){const e=tx(n);if(e)throw t.forEach((r,a)=>{e.metadata.append(a,r)}),e;if(!t.has(al)&&!n.has(al))throw new ee("protocol error: missing status",qt.Internal)}function eS(n,t,e,r){const a=new Headers(e??{});return a.set(j2,n?F2:Z2),a.set(X2,"1"),a.set(G2,"connect-es/1.6.1"),t!==void 0&&a.set(Y2,`${t}m`),a}function iC(n){switch(n){case 400:return qt.Internal;case 401:return qt.Unauthenticated;case 403:return qt.PermissionDenied;case 404:return qt.Unimplemented;case 429:return qt.Unavailable;case 502:return qt.Unavailable;case 503:return qt.Unavailable;case 504:return qt.Unavailable;default:return qt.Unknown}}function nS(n,t){var e;if(n>=200&&n<300)return{foundStatus:t.has(al),headerError:tx(t)};throw new ee(decodeURIComponent((e=t.get(W1))!==null&&e!==void 0?e:`HTTP ${n}`),iC(n),t)}var Va=function(n){return this instanceof Va?(this.v=n,this):new Va(n)},sC=function(n,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=e.apply(n,t||[]),a,l=[];return a={},d("next"),d("throw"),d("return",c),a[Symbol.asyncIterator]=function(){return this},a;function c(b){return function(T){return Promise.resolve(T).then(b,w)}}function d(b,T){r[b]&&(a[b]=function(A){return new Promise(function(C,D){l.push([b,A,C,D])>1||h(b,A)})},T&&(a[b]=T(a[b])))}function h(b,T){try{g(r[b](T))}catch(A){v(l[0][3],A)}}function g(b){b.value instanceof Va?Promise.resolve(b.value.v).then(p,w):v(l[0][2],b)}function p(b){h("next",b)}function w(b){h("throw",b)}function v(b,T){b(T),l.shift(),l.length&&h(l[0][0],l[0][1])}};function aC(n){var t;rC();const e=(t=n.useBinaryFormat)!==null&&t!==void 0?t:!0;return{async unary(r,a,l,c,d,h,g){var p;const{serialize:w,parse:v}=Zb(a,e,n.jsonOptions,n.binaryOptions);return c=c===void 0?n.defaultTimeoutMs:c<=0?void 0:c,await eC({interceptors:n.interceptors,signal:l,timeoutMs:c,req:{stream:!1,service:r,method:a,url:Fb(n.baseUrl,r,a),init:{method:"POST",credentials:(p=n.credentials)!==null&&p!==void 0?p:"same-origin",redirect:"error",mode:"cors"},header:eS(e,c,d),contextValues:g??Gb(),message:h},next:async b=>{var T;const C=await((T=n.fetch)!==null&&T!==void 0?T:globalThis.fetch)(b.url,Object.assign(Object.assign({},b.init),{headers:b.header,signal:b.signal,body:Kb(0,w(b.message))})),{headerError:D}=nS(C.status,C.headers);if(!C.body)throw D!==void 0?D:"missing response body";const L=Yb(C.body).getReader();let N,O;for(;;){const B=await L.read();if(B.done)break;const{flags:_,data:P}=B.value;if((_&jb)===jb)throw new ee("protocol error: received unsupported compressed output",qt.Internal);if(_===Hm){if(N!==void 0)throw"extra trailer";N=Xb(P);continue}if(O!==void 0)throw new ee("extra message",qt.Unimplemented);O=v(P)}if(N===void 0)throw D!==void 0?D:new ee("missing trailer",C.headers.has(al)?qt.Unimplemented:qt.Unknown);if(tS(N,C.headers),O===void 0)throw new ee("missing message",N.has(al)?qt.Unimplemented:qt.Unknown);return{stream:!1,service:r,method:a,header:C.headers,message:O,trailer:N}}})},async stream(r,a,l,c,d,h,g){var p;const{serialize:w,parse:v}=Zb(a,e,n.jsonOptions,n.binaryOptions);function b(A,C,D,L,N){return sC(this,arguments,function*(){const B=Yb(A).getReader();if(C){if(!(yield Va(B.read())).done)throw"extra data for trailers-only";return yield Va(void 0)}let _=!1;for(;;){const P=yield Va(B.read());if(P.done)break;const{flags:V,data:W}=P.value;if((V&Hm)===Hm){if(_)throw"extra trailer";_=!0;const ft=Xb(W);tS(ft,L),ft.forEach((nt,rt)=>D.set(rt,nt));continue}if(_)throw"extra message";yield yield Va(v(W))}if("throwIfAborted"in N&&N.throwIfAborted(),!_)throw"missing trailer"})}async function T(A){if(a.kind!=De.ServerStreaming)throw"The fetch API does not support streaming request bodies";const C=await A[Symbol.asyncIterator]().next();if(C.done==!0)throw"missing request message";return Kb(0,w(C.value))}return c=c===void 0?n.defaultTimeoutMs:c<=0?void 0:c,nC({interceptors:n.interceptors,signal:l,timeoutMs:c,req:{stream:!0,service:r,method:a,url:Fb(n.baseUrl,r,a),init:{method:"POST",credentials:(p=n.credentials)!==null&&p!==void 0?p:"same-origin",redirect:"error",mode:"cors"},header:eS(e,c,d),contextValues:g??Gb(),message:h},next:async A=>{var C;const L=await((C=n.fetch)!==null&&C!==void 0?C:globalThis.fetch)(A.url,Object.assign(Object.assign({},A.init),{headers:A.header,signal:A.signal,body:await T(A.message)})),{foundStatus:N,headerError:O}=nS(L.status,L.headers);if(O!=null)throw O;if(!L.body)throw"missing response body";const B=new Headers;return Object.assign(Object.assign({},A),{header:L.headers,trailer:B,message:b(L.body,N,B,L.headers,A.signal)})}})}}}var Mt=(n=>(n[n.NULL=0]="NULL",n[n.BOOLEAN=1]="BOOLEAN",n[n.INTEGER=2]="INTEGER",n[n.LONG=3]="LONG",n[n.DOUBLE=4]="DOUBLE",n[n.STRING=5]="STRING",n[n.BYTES=6]="BYTES",n[n.DATE=7]="DATE",n[n.JSON_OBJECT=8]="JSON_OBJECT",n[n.JSON_ARRAY=9]="JSON_ARRAY",n[n.TEXT=10]="TEXT",n[n.INTEGER_CNT=11]="INTEGER_CNT",n[n.LONG_CNT=12]="LONG_CNT",n[n.TREE=13]="TREE",n))(Mt||{});x.util.setEnumType(Mt,"yorkie.v1.ValueType",[{no:0,name:"VALUE_TYPE_NULL"},{no:1,name:"VALUE_TYPE_BOOLEAN"},{no:2,name:"VALUE_TYPE_INTEGER"},{no:3,name:"VALUE_TYPE_LONG"},{no:4,name:"VALUE_TYPE_DOUBLE"},{no:5,name:"VALUE_TYPE_STRING"},{no:6,name:"VALUE_TYPE_BYTES"},{no:7,name:"VALUE_TYPE_DATE"},{no:8,name:"VALUE_TYPE_JSON_OBJECT"},{no:9,name:"VALUE_TYPE_JSON_ARRAY"},{no:10,name:"VALUE_TYPE_TEXT"},{no:11,name:"VALUE_TYPE_INTEGER_CNT"},{no:12,name:"VALUE_TYPE_LONG_CNT"},{no:13,name:"VALUE_TYPE_TREE"}]);var Ka=(n=>(n[n.DOCUMENT_CHANGED=0]="DOCUMENT_CHANGED",n[n.DOCUMENT_WATCHED=1]="DOCUMENT_WATCHED",n[n.DOCUMENT_UNWATCHED=2]="DOCUMENT_UNWATCHED",n[n.DOCUMENT_BROADCAST=3]="DOCUMENT_BROADCAST",n))(Ka||{});x.util.setEnumType(Ka,"yorkie.v1.DocEventType",[{no:0,name:"DOC_EVENT_TYPE_DOCUMENT_CHANGED"},{no:1,name:"DOC_EVENT_TYPE_DOCUMENT_WATCHED"},{no:2,name:"DOC_EVENT_TYPE_DOCUMENT_UNWATCHED"},{no:3,name:"DOC_EVENT_TYPE_DOCUMENT_BROADCAST"}]);const ei=class ei extends gt{constructor(e){super();y(this,"root");y(this,"presences",{});x.util.initPartial(e,this)}static fromBinary(e,r){return new ei().fromBinary(e,r)}static fromJson(e,r){return new ei().fromJson(e,r)}static fromJsonString(e,r){return new ei().fromJsonString(e,r)}static equals(e,r){return x.util.equals(ei,e,r)}};y(ei,"runtime",x),y(ei,"typeName","yorkie.v1.Snapshot"),y(ei,"fields",x.util.newFieldList(()=>[{no:1,name:"root",kind:"message",T:an},{no:2,name:"presences",kind:"map",K:9,V:{kind:"message",T:rh}}]));let oy=ei;var Dn;let ks=(Dn=class extends gt{constructor(e){super();y(this,"documentKey","");y(this,"checkpoint");y(this,"snapshot",new Uint8Array(0));y(this,"changes",[]);y(this,"minSyncedTicket");y(this,"isRemoved",!1);y(this,"versionVector");x.util.initPartial(e,this)}static fromBinary(e,r){return new Dn().fromBinary(e,r)}static fromJson(e,r){return new Dn().fromJson(e,r)}static fromJsonString(e,r){return new Dn().fromJsonString(e,r)}static equals(e,r){return x.util.equals(Dn,e,r)}},y(Dn,"runtime",x),y(Dn,"typeName","yorkie.v1.ChangePack"),y(Dn,"fields",x.util.newFieldList(()=>[{no:1,name:"document_key",kind:"scalar",T:9},{no:2,name:"checkpoint",kind:"message",T:ax},{no:3,name:"snapshot",kind:"scalar",T:12},{no:4,name:"changes",kind:"message",T:ix,repeated:!0},{no:5,name:"min_synced_ticket",kind:"message",T:bt},{no:6,name:"is_removed",kind:"scalar",T:8},{no:7,name:"version_vector",kind:"message",T:nh}])),Dn);var In;let ix=(In=class extends gt{constructor(e){super();y(this,"id");y(this,"message","");y(this,"operations",[]);y(this,"presenceChange");x.util.initPartial(e,this)}static fromBinary(e,r){return new In().fromBinary(e,r)}static fromJson(e,r){return new In().fromJson(e,r)}static fromJsonString(e,r){return new In().fromJsonString(e,r)}static equals(e,r){return x.util.equals(In,e,r)}},y(In,"runtime",x),y(In,"typeName","yorkie.v1.Change"),y(In,"fields",x.util.newFieldList(()=>[{no:1,name:"id",kind:"message",T:eh},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"operations",kind:"message",T:up,repeated:!0},{no:4,name:"presence_change",kind:"message",T:Fu}])),In);var On;let eh=(On=class extends gt{constructor(e){super();y(this,"clientSeq",0);y(this,"serverSeq",$t.zero);y(this,"lamport",$t.zero);y(this,"actorId",new Uint8Array(0));y(this,"versionVector");x.util.initPartial(e,this)}static fromBinary(e,r){return new On().fromBinary(e,r)}static fromJson(e,r){return new On().fromJson(e,r)}static fromJsonString(e,r){return new On().fromJsonString(e,r)}static equals(e,r){return x.util.equals(On,e,r)}},y(On,"runtime",x),y(On,"typeName","yorkie.v1.ChangeID"),y(On,"fields",x.util.newFieldList(()=>[{no:1,name:"client_seq",kind:"scalar",T:13},{no:2,name:"server_seq",kind:"scalar",T:3},{no:3,name:"lamport",kind:"scalar",T:3},{no:4,name:"actor_id",kind:"scalar",T:12},{no:5,name:"version_vector",kind:"message",T:nh}])),On);var Mn;let nh=(Mn=class extends gt{constructor(e){super();y(this,"vector",{});x.util.initPartial(e,this)}static fromBinary(e,r){return new Mn().fromBinary(e,r)}static fromJson(e,r){return new Mn().fromJson(e,r)}static fromJsonString(e,r){return new Mn().fromJsonString(e,r)}static equals(e,r){return x.util.equals(Mn,e,r)}},y(Mn,"runtime",x),y(Mn,"typeName","yorkie.v1.VersionVector"),y(Mn,"fields",x.util.newFieldList(()=>[{no:1,name:"vector",kind:"map",K:9,V:{kind:"scalar",T:3}}])),Mn);var Rn;let up=(Rn=class extends gt{constructor(e){super();y(this,"body",{case:void 0});x.util.initPartial(e,this)}static fromBinary(e,r){return new Rn().fromBinary(e,r)}static fromJson(e,r){return new Rn().fromJson(e,r)}static fromJsonString(e,r){return new Rn().fromJsonString(e,r)}static equals(e,r){return x.util.equals(Rn,e,r)}},y(Rn,"runtime",x),y(Rn,"typeName","yorkie.v1.Operation"),y(Rn,"fields",x.util.newFieldList(()=>[{no:1,name:"set",kind:"message",T:md,oneof:"body"},{no:2,name:"add",kind:"message",T:yd,oneof:"body"},{no:3,name:"move",kind:"message",T:pd,oneof:"body"},{no:4,name:"remove",kind:"message",T:vd,oneof:"body"},{no:5,name:"edit",kind:"message",T:wd,oneof:"body"},{no:7,name:"style",kind:"message",T:bd,oneof:"body"},{no:8,name:"increase",kind:"message",T:Sd,oneof:"body"},{no:9,name:"tree_edit",kind:"message",T:xd,oneof:"body"},{no:10,name:"tree_style",kind:"message",T:Td,oneof:"body"},{no:11,name:"array_set",kind:"message",T:Ad,oneof:"body"}])),Rn);const ni=class ni extends gt{constructor(e){super();y(this,"parentCreatedAt");y(this,"key","");y(this,"value");y(this,"executedAt");x.util.initPartial(e,this)}static fromBinary(e,r){return new ni().fromBinary(e,r)}static fromJson(e,r){return new ni().fromJson(e,r)}static fromJsonString(e,r){return new ni().fromJsonString(e,r)}static equals(e,r){return x.util.equals(ni,e,r)}};y(ni,"runtime",x),y(ni,"typeName","yorkie.v1.Operation.Set"),y(ni,"fields",x.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:bt},{no:2,name:"key",kind:"scalar",T:9},{no:3,name:"value",kind:"message",T:kn},{no:4,name:"executed_at",kind:"message",T:bt}]));let md=ni;const ri=class ri extends gt{constructor(e){super();y(this,"parentCreatedAt");y(this,"prevCreatedAt");y(this,"value");y(this,"executedAt");x.util.initPartial(e,this)}static fromBinary(e,r){return new ri().fromBinary(e,r)}static fromJson(e,r){return new ri().fromJson(e,r)}static fromJsonString(e,r){return new ri().fromJsonString(e,r)}static equals(e,r){return x.util.equals(ri,e,r)}};y(ri,"runtime",x),y(ri,"typeName","yorkie.v1.Operation.Add"),y(ri,"fields",x.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:bt},{no:2,name:"prev_created_at",kind:"message",T:bt},{no:3,name:"value",kind:"message",T:kn},{no:4,name:"executed_at",kind:"message",T:bt}]));let yd=ri;const ii=class ii extends gt{constructor(e){super();y(this,"parentCreatedAt");y(this,"prevCreatedAt");y(this,"createdAt");y(this,"executedAt");x.util.initPartial(e,this)}static fromBinary(e,r){return new ii().fromBinary(e,r)}static fromJson(e,r){return new ii().fromJson(e,r)}static fromJsonString(e,r){return new ii().fromJsonString(e,r)}static equals(e,r){return x.util.equals(ii,e,r)}};y(ii,"runtime",x),y(ii,"typeName","yorkie.v1.Operation.Move"),y(ii,"fields",x.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:bt},{no:2,name:"prev_created_at",kind:"message",T:bt},{no:3,name:"created_at",kind:"message",T:bt},{no:4,name:"executed_at",kind:"message",T:bt}]));let pd=ii;const si=class si extends gt{constructor(e){super();y(this,"parentCreatedAt");y(this,"createdAt");y(this,"executedAt");x.util.initPartial(e,this)}static fromBinary(e,r){return new si().fromBinary(e,r)}static fromJson(e,r){return new si().fromJson(e,r)}static fromJsonString(e,r){return new si().fromJsonString(e,r)}static equals(e,r){return x.util.equals(si,e,r)}};y(si,"runtime",x),y(si,"typeName","yorkie.v1.Operation.Remove"),y(si,"fields",x.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:bt},{no:2,name:"created_at",kind:"message",T:bt},{no:3,name:"executed_at",kind:"message",T:bt}]));let vd=si;const ai=class ai extends gt{constructor(e){super();y(this,"parentCreatedAt");y(this,"from");y(this,"to");y(this,"createdAtMapByActor",{});y(this,"content","");y(this,"executedAt");y(this,"attributes",{});x.util.initPartial(e,this)}static fromBinary(e,r){return new ai().fromBinary(e,r)}static fromJson(e,r){return new ai().fromJson(e,r)}static fromJsonString(e,r){return new ai().fromJsonString(e,r)}static equals(e,r){return x.util.equals(ai,e,r)}};y(ai,"runtime",x),y(ai,"typeName","yorkie.v1.Operation.Edit"),y(ai,"fields",x.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:bt},{no:2,name:"from",kind:"message",T:Qa},{no:3,name:"to",kind:"message",T:Qa},{no:4,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:bt}},{no:5,name:"content",kind:"scalar",T:9},{no:6,name:"executed_at",kind:"message",T:bt},{no:7,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}}]));let wd=ai;const oi=class oi extends gt{constructor(e){super();y(this,"parentCreatedAt");y(this,"from");y(this,"to");y(this,"attributes",{});y(this,"executedAt");y(this,"createdAtMapByActor",{});x.util.initPartial(e,this)}static fromBinary(e,r){return new oi().fromBinary(e,r)}static fromJson(e,r){return new oi().fromJson(e,r)}static fromJsonString(e,r){return new oi().fromJsonString(e,r)}static equals(e,r){return x.util.equals(oi,e,r)}};y(oi,"runtime",x),y(oi,"typeName","yorkie.v1.Operation.Style"),y(oi,"fields",x.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:bt},{no:2,name:"from",kind:"message",T:Qa},{no:3,name:"to",kind:"message",T:Qa},{no:4,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:5,name:"executed_at",kind:"message",T:bt},{no:6,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:bt}}]));let bd=oi;const li=class li extends gt{constructor(e){super();y(this,"parentCreatedAt");y(this,"value");y(this,"executedAt");x.util.initPartial(e,this)}static fromBinary(e,r){return new li().fromBinary(e,r)}static fromJson(e,r){return new li().fromJson(e,r)}static fromJsonString(e,r){return new li().fromJsonString(e,r)}static equals(e,r){return x.util.equals(li,e,r)}};y(li,"runtime",x),y(li,"typeName","yorkie.v1.Operation.Increase"),y(li,"fields",x.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:bt},{no:2,name:"value",kind:"message",T:kn},{no:3,name:"executed_at",kind:"message",T:bt}]));let Sd=li;const ui=class ui extends gt{constructor(e){super();y(this,"parentCreatedAt");y(this,"from");y(this,"to");y(this,"createdAtMapByActor",{});y(this,"contents",[]);y(this,"splitLevel",0);y(this,"executedAt");x.util.initPartial(e,this)}static fromBinary(e,r){return new ui().fromBinary(e,r)}static fromJson(e,r){return new ui().fromJson(e,r)}static fromJsonString(e,r){return new ui().fromJsonString(e,r)}static equals(e,r){return x.util.equals(ui,e,r)}};y(ui,"runtime",x),y(ui,"typeName","yorkie.v1.Operation.TreeEdit"),y(ui,"fields",x.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:bt},{no:2,name:"from",kind:"message",T:Fa},{no:3,name:"to",kind:"message",T:Fa},{no:4,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:bt}},{no:5,name:"contents",kind:"message",T:Rd,repeated:!0},{no:7,name:"split_level",kind:"scalar",T:5},{no:6,name:"executed_at",kind:"message",T:bt}]));let xd=ui;const ci=class ci extends gt{constructor(e){super();y(this,"parentCreatedAt");y(this,"from");y(this,"to");y(this,"attributes",{});y(this,"executedAt");y(this,"attributesToRemove",[]);y(this,"createdAtMapByActor",{});x.util.initPartial(e,this)}static fromBinary(e,r){return new ci().fromBinary(e,r)}static fromJson(e,r){return new ci().fromJson(e,r)}static fromJsonString(e,r){return new ci().fromJsonString(e,r)}static equals(e,r){return x.util.equals(ci,e,r)}};y(ci,"runtime",x),y(ci,"typeName","yorkie.v1.Operation.TreeStyle"),y(ci,"fields",x.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:bt},{no:2,name:"from",kind:"message",T:Fa},{no:3,name:"to",kind:"message",T:Fa},{no:4,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:5,name:"executed_at",kind:"message",T:bt},{no:6,name:"attributes_to_remove",kind:"scalar",T:9,repeated:!0},{no:7,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:bt}}]));let Td=ci;const fi=class fi extends gt{constructor(e){super();y(this,"parentCreatedAt");y(this,"createdAt");y(this,"value");y(this,"executedAt");x.util.initPartial(e,this)}static fromBinary(e,r){return new fi().fromBinary(e,r)}static fromJson(e,r){return new fi().fromJson(e,r)}static fromJsonString(e,r){return new fi().fromJsonString(e,r)}static equals(e,r){return x.util.equals(fi,e,r)}};y(fi,"runtime",x),y(fi,"typeName","yorkie.v1.Operation.ArraySet"),y(fi,"fields",x.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:bt},{no:2,name:"created_at",kind:"message",T:bt},{no:3,name:"value",kind:"message",T:kn},{no:4,name:"executed_at",kind:"message",T:bt}]));let Ad=fi;const di=class di extends gt{constructor(e){super();y(this,"createdAt");y(this,"movedAt");y(this,"removedAt");y(this,"type",0);y(this,"value",new Uint8Array(0));x.util.initPartial(e,this)}static fromBinary(e,r){return new di().fromBinary(e,r)}static fromJson(e,r){return new di().fromJson(e,r)}static fromJsonString(e,r){return new di().fromJsonString(e,r)}static equals(e,r){return x.util.equals(di,e,r)}};y(di,"runtime",x),y(di,"typeName","yorkie.v1.JSONElementSimple"),y(di,"fields",x.util.newFieldList(()=>[{no:1,name:"created_at",kind:"message",T:bt},{no:2,name:"moved_at",kind:"message",T:bt},{no:3,name:"removed_at",kind:"message",T:bt},{no:4,name:"type",kind:"enum",T:x.getEnumType(Mt)},{no:5,name:"value",kind:"scalar",T:12}]));let kn=di;const hi=class hi extends gt{constructor(e){super();y(this,"body",{case:void 0});x.util.initPartial(e,this)}static fromBinary(e,r){return new hi().fromBinary(e,r)}static fromJson(e,r){return new hi().fromJson(e,r)}static fromJsonString(e,r){return new hi().fromJsonString(e,r)}static equals(e,r){return x.util.equals(hi,e,r)}};y(hi,"runtime",x),y(hi,"typeName","yorkie.v1.JSONElement"),y(hi,"fields",x.util.newFieldList(()=>[{no:1,name:"json_object",kind:"message",T:Ed,oneof:"body"},{no:2,name:"json_array",kind:"message",T:Nd,oneof:"body"},{no:3,name:"primitive",kind:"message",T:Cd,oneof:"body"},{no:5,name:"text",kind:"message",T:kd,oneof:"body"},{no:6,name:"counter",kind:"message",T:Dd,oneof:"body"},{no:7,name:"tree",kind:"message",T:Id,oneof:"body"}]));let an=hi;const gi=class gi extends gt{constructor(e){super();y(this,"nodes",[]);y(this,"createdAt");y(this,"movedAt");y(this,"removedAt");x.util.initPartial(e,this)}static fromBinary(e,r){return new gi().fromBinary(e,r)}static fromJson(e,r){return new gi().fromJson(e,r)}static fromJsonString(e,r){return new gi().fromJsonString(e,r)}static equals(e,r){return x.util.equals(gi,e,r)}};y(gi,"runtime",x),y(gi,"typeName","yorkie.v1.JSONElement.JSONObject"),y(gi,"fields",x.util.newFieldList(()=>[{no:1,name:"nodes",kind:"message",T:sx,repeated:!0},{no:2,name:"created_at",kind:"message",T:bt},{no:3,name:"moved_at",kind:"message",T:bt},{no:4,name:"removed_at",kind:"message",T:bt}]));let Ed=gi;const mi=class mi extends gt{constructor(e){super();y(this,"nodes",[]);y(this,"createdAt");y(this,"movedAt");y(this,"removedAt");x.util.initPartial(e,this)}static fromBinary(e,r){return new mi().fromBinary(e,r)}static fromJson(e,r){return new mi().fromJson(e,r)}static fromJsonString(e,r){return new mi().fromJsonString(e,r)}static equals(e,r){return x.util.equals(mi,e,r)}};y(mi,"runtime",x),y(mi,"typeName","yorkie.v1.JSONElement.JSONArray"),y(mi,"fields",x.util.newFieldList(()=>[{no:1,name:"nodes",kind:"message",T:Od,repeated:!0},{no:2,name:"created_at",kind:"message",T:bt},{no:3,name:"moved_at",kind:"message",T:bt},{no:4,name:"removed_at",kind:"message",T:bt}]));let Nd=mi;const yi=class yi extends gt{constructor(e){super();y(this,"type",0);y(this,"value",new Uint8Array(0));y(this,"createdAt");y(this,"movedAt");y(this,"removedAt");x.util.initPartial(e,this)}static fromBinary(e,r){return new yi().fromBinary(e,r)}static fromJson(e,r){return new yi().fromJson(e,r)}static fromJsonString(e,r){return new yi().fromJsonString(e,r)}static equals(e,r){return x.util.equals(yi,e,r)}};y(yi,"runtime",x),y(yi,"typeName","yorkie.v1.JSONElement.Primitive"),y(yi,"fields",x.util.newFieldList(()=>[{no:1,name:"type",kind:"enum",T:x.getEnumType(Mt)},{no:2,name:"value",kind:"scalar",T:12},{no:3,name:"created_at",kind:"message",T:bt},{no:4,name:"moved_at",kind:"message",T:bt},{no:5,name:"removed_at",kind:"message",T:bt}]));let Cd=yi;const pi=class pi extends gt{constructor(e){super();y(this,"nodes",[]);y(this,"createdAt");y(this,"movedAt");y(this,"removedAt");x.util.initPartial(e,this)}static fromBinary(e,r){return new pi().fromBinary(e,r)}static fromJson(e,r){return new pi().fromJson(e,r)}static fromJsonString(e,r){return new pi().fromJsonString(e,r)}static equals(e,r){return x.util.equals(pi,e,r)}};y(pi,"runtime",x),y(pi,"typeName","yorkie.v1.JSONElement.Text"),y(pi,"fields",x.util.newFieldList(()=>[{no:1,name:"nodes",kind:"message",T:Md,repeated:!0},{no:2,name:"created_at",kind:"message",T:bt},{no:3,name:"moved_at",kind:"message",T:bt},{no:4,name:"removed_at",kind:"message",T:bt}]));let kd=pi;const vi=class vi extends gt{constructor(e){super();y(this,"type",0);y(this,"value",new Uint8Array(0));y(this,"createdAt");y(this,"movedAt");y(this,"removedAt");x.util.initPartial(e,this)}static fromBinary(e,r){return new vi().fromBinary(e,r)}static fromJson(e,r){return new vi().fromJson(e,r)}static fromJsonString(e,r){return new vi().fromJsonString(e,r)}static equals(e,r){return x.util.equals(vi,e,r)}};y(vi,"runtime",x),y(vi,"typeName","yorkie.v1.JSONElement.Counter"),y(vi,"fields",x.util.newFieldList(()=>[{no:1,name:"type",kind:"enum",T:x.getEnumType(Mt)},{no:2,name:"value",kind:"scalar",T:12},{no:3,name:"created_at",kind:"message",T:bt},{no:4,name:"moved_at",kind:"message",T:bt},{no:5,name:"removed_at",kind:"message",T:bt}]));let Dd=vi;const wi=class wi extends gt{constructor(e){super();y(this,"nodes",[]);y(this,"createdAt");y(this,"movedAt");y(this,"removedAt");x.util.initPartial(e,this)}static fromBinary(e,r){return new wi().fromBinary(e,r)}static fromJson(e,r){return new wi().fromJson(e,r)}static fromJsonString(e,r){return new wi().fromJsonString(e,r)}static equals(e,r){return x.util.equals(wi,e,r)}};y(wi,"runtime",x),y(wi,"typeName","yorkie.v1.JSONElement.Tree"),y(wi,"fields",x.util.newFieldList(()=>[{no:1,name:"nodes",kind:"message",T:Xu,repeated:!0},{no:2,name:"created_at",kind:"message",T:bt},{no:3,name:"moved_at",kind:"message",T:bt},{no:4,name:"removed_at",kind:"message",T:bt}]));let Id=wi;var Bn;let sx=(Bn=class extends gt{constructor(e){super();y(this,"key","");y(this,"element");x.util.initPartial(e,this)}static fromBinary(e,r){return new Bn().fromBinary(e,r)}static fromJson(e,r){return new Bn().fromJson(e,r)}static fromJsonString(e,r){return new Bn().fromJsonString(e,r)}static equals(e,r){return x.util.equals(Bn,e,r)}},y(Bn,"runtime",x),y(Bn,"typeName","yorkie.v1.RHTNode"),y(Bn,"fields",x.util.newFieldList(()=>[{no:1,name:"key",kind:"scalar",T:9},{no:2,name:"element",kind:"message",T:an}])),Bn);const gr=class gr extends gt{constructor(e){super();y(this,"next");y(this,"element");x.util.initPartial(e,this)}static fromBinary(e,r){return new gr().fromBinary(e,r)}static fromJson(e,r){return new gr().fromJson(e,r)}static fromJsonString(e,r){return new gr().fromJsonString(e,r)}static equals(e,r){return x.util.equals(gr,e,r)}};y(gr,"runtime",x),y(gr,"typeName","yorkie.v1.RGANode"),y(gr,"fields",x.util.newFieldList(()=>[{no:1,name:"next",kind:"message",T:gr},{no:2,name:"element",kind:"message",T:an}]));let Od=gr;const bi=class bi extends gt{constructor(e){super();y(this,"value","");y(this,"updatedAt");y(this,"isRemoved",!1);x.util.initPartial(e,this)}static fromBinary(e,r){return new bi().fromBinary(e,r)}static fromJson(e,r){return new bi().fromJson(e,r)}static fromJsonString(e,r){return new bi().fromJsonString(e,r)}static equals(e,r){return x.util.equals(bi,e,r)}};y(bi,"runtime",x),y(bi,"typeName","yorkie.v1.NodeAttr"),y(bi,"fields",x.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:9},{no:2,name:"updated_at",kind:"message",T:bt},{no:3,name:"is_removed",kind:"scalar",T:8}]));let ol=bi;const Si=class Si extends gt{constructor(e){super();y(this,"id");y(this,"value","");y(this,"removedAt");y(this,"insPrevId");y(this,"attributes",{});x.util.initPartial(e,this)}static fromBinary(e,r){return new Si().fromBinary(e,r)}static fromJson(e,r){return new Si().fromJson(e,r)}static fromJsonString(e,r){return new Si().fromJsonString(e,r)}static equals(e,r){return x.util.equals(Si,e,r)}};y(Si,"runtime",x),y(Si,"typeName","yorkie.v1.TextNode"),y(Si,"fields",x.util.newFieldList(()=>[{no:1,name:"id",kind:"message",T:Gu},{no:2,name:"value",kind:"scalar",T:9},{no:3,name:"removed_at",kind:"message",T:bt},{no:4,name:"ins_prev_id",kind:"message",T:Gu},{no:5,name:"attributes",kind:"map",K:9,V:{kind:"message",T:ol}}]));let Md=Si;const xi=class xi extends gt{constructor(e){super();y(this,"createdAt");y(this,"offset",0);x.util.initPartial(e,this)}static fromBinary(e,r){return new xi().fromBinary(e,r)}static fromJson(e,r){return new xi().fromJson(e,r)}static fromJsonString(e,r){return new xi().fromJsonString(e,r)}static equals(e,r){return x.util.equals(xi,e,r)}};y(xi,"runtime",x),y(xi,"typeName","yorkie.v1.TextNodeID"),y(xi,"fields",x.util.newFieldList(()=>[{no:1,name:"created_at",kind:"message",T:bt},{no:2,name:"offset",kind:"scalar",T:5}]));let Gu=xi;const Ti=class Ti extends gt{constructor(e){super();y(this,"id");y(this,"type","");y(this,"value","");y(this,"removedAt");y(this,"insPrevId");y(this,"insNextId");y(this,"depth",0);y(this,"attributes",{});x.util.initPartial(e,this)}static fromBinary(e,r){return new Ti().fromBinary(e,r)}static fromJson(e,r){return new Ti().fromJson(e,r)}static fromJsonString(e,r){return new Ti().fromJsonString(e,r)}static equals(e,r){return x.util.equals(Ti,e,r)}};y(Ti,"runtime",x),y(Ti,"typeName","yorkie.v1.TreeNode"),y(Ti,"fields",x.util.newFieldList(()=>[{no:1,name:"id",kind:"message",T:ca},{no:2,name:"type",kind:"scalar",T:9},{no:3,name:"value",kind:"scalar",T:9},{no:4,name:"removed_at",kind:"message",T:bt},{no:5,name:"ins_prev_id",kind:"message",T:ca},{no:6,name:"ins_next_id",kind:"message",T:ca},{no:7,name:"depth",kind:"scalar",T:5},{no:8,name:"attributes",kind:"map",K:9,V:{kind:"message",T:ol}}]));let Xu=Ti;const Ai=class Ai extends gt{constructor(e){super();y(this,"content",[]);x.util.initPartial(e,this)}static fromBinary(e,r){return new Ai().fromBinary(e,r)}static fromJson(e,r){return new Ai().fromJson(e,r)}static fromJsonString(e,r){return new Ai().fromJsonString(e,r)}static equals(e,r){return x.util.equals(Ai,e,r)}};y(Ai,"runtime",x),y(Ai,"typeName","yorkie.v1.TreeNodes"),y(Ai,"fields",x.util.newFieldList(()=>[{no:1,name:"content",kind:"message",T:Xu,repeated:!0}]));let Rd=Ai;const Ei=class Ei extends gt{constructor(e){super();y(this,"createdAt");y(this,"offset",0);x.util.initPartial(e,this)}static fromBinary(e,r){return new Ei().fromBinary(e,r)}static fromJson(e,r){return new Ei().fromJson(e,r)}static fromJsonString(e,r){return new Ei().fromJsonString(e,r)}static equals(e,r){return x.util.equals(Ei,e,r)}};y(Ei,"runtime",x),y(Ei,"typeName","yorkie.v1.TreeNodeID"),y(Ei,"fields",x.util.newFieldList(()=>[{no:1,name:"created_at",kind:"message",T:bt},{no:2,name:"offset",kind:"scalar",T:5}]));let ca=Ei;const Ni=class Ni extends gt{constructor(e){super();y(this,"parentId");y(this,"leftSiblingId");x.util.initPartial(e,this)}static fromBinary(e,r){return new Ni().fromBinary(e,r)}static fromJson(e,r){return new Ni().fromJson(e,r)}static fromJsonString(e,r){return new Ni().fromJsonString(e,r)}static equals(e,r){return x.util.equals(Ni,e,r)}};y(Ni,"runtime",x),y(Ni,"typeName","yorkie.v1.TreePos"),y(Ni,"fields",x.util.newFieldList(()=>[{no:1,name:"parent_id",kind:"message",T:ca},{no:2,name:"left_sibling_id",kind:"message",T:ca}]));let Fa=Ni;const Ci=class Ci extends gt{constructor(e){super();y(this,"id","");y(this,"authProvider","");y(this,"username","");y(this,"createdAt");x.util.initPartial(e,this)}static fromBinary(e,r){return new Ci().fromBinary(e,r)}static fromJson(e,r){return new Ci().fromJson(e,r)}static fromJsonString(e,r){return new Ci().fromJsonString(e,r)}static equals(e,r){return x.util.equals(Ci,e,r)}};y(Ci,"runtime",x),y(Ci,"typeName","yorkie.v1.User"),y(Ci,"fields",x.util.newFieldList(()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"auth_provider",kind:"scalar",T:9},{no:3,name:"username",kind:"scalar",T:9},{no:4,name:"created_at",kind:"message",T:Ue}]));let rS=Ci;const ki=class ki extends gt{constructor(e){super();y(this,"id","");y(this,"name","");y(this,"publicKey","");y(this,"secretKey","");y(this,"authWebhookUrl","");y(this,"authWebhookMethods",[]);y(this,"authWebhookMaxRetries",$t.zero);y(this,"authWebhookMinWaitInterval","");y(this,"authWebhookMaxWaitInterval","");y(this,"authWebhookRequestTimeout","");y(this,"eventWebhookUrl","");y(this,"eventWebhookEvents",[]);y(this,"eventWebhookMaxRetries",$t.zero);y(this,"eventWebhookMinWaitInterval","");y(this,"eventWebhookMaxWaitInterval","");y(this,"eventWebhookRequestTimeout","");y(this,"clientDeactivateThreshold","");y(this,"snapshotThreshold",$t.zero);y(this,"snapshotInterval",$t.zero);y(this,"maxSubscribersPerDocument",0);y(this,"maxAttachmentsPerDocument",0);y(this,"maxSizePerDocument",0);y(this,"removeOnDetach",!1);y(this,"allowedOrigins",[]);y(this,"createdAt");y(this,"updatedAt");x.util.initPartial(e,this)}static fromBinary(e,r){return new ki().fromBinary(e,r)}static fromJson(e,r){return new ki().fromJson(e,r)}static fromJsonString(e,r){return new ki().fromJsonString(e,r)}static equals(e,r){return x.util.equals(ki,e,r)}};y(ki,"runtime",x),y(ki,"typeName","yorkie.v1.Project"),y(ki,"fields",x.util.newFieldList(()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"public_key",kind:"scalar",T:9},{no:4,name:"secret_key",kind:"scalar",T:9},{no:5,name:"auth_webhook_url",kind:"scalar",T:9},{no:6,name:"auth_webhook_methods",kind:"scalar",T:9,repeated:!0},{no:17,name:"auth_webhook_max_retries",kind:"scalar",T:4},{no:18,name:"auth_webhook_min_wait_interval",kind:"scalar",T:9},{no:19,name:"auth_webhook_max_wait_interval",kind:"scalar",T:9},{no:20,name:"auth_webhook_request_timeout",kind:"scalar",T:9},{no:7,name:"event_webhook_url",kind:"scalar",T:9},{no:8,name:"event_webhook_events",kind:"scalar",T:9,repeated:!0},{no:21,name:"event_webhook_max_retries",kind:"scalar",T:4},{no:22,name:"event_webhook_min_wait_interval",kind:"scalar",T:9},{no:23,name:"event_webhook_max_wait_interval",kind:"scalar",T:9},{no:24,name:"event_webhook_request_timeout",kind:"scalar",T:9},{no:9,name:"client_deactivate_threshold",kind:"scalar",T:9},{no:25,name:"snapshot_threshold",kind:"scalar",T:3},{no:26,name:"snapshot_interval",kind:"scalar",T:3},{no:10,name:"max_subscribers_per_document",kind:"scalar",T:5},{no:11,name:"max_attachments_per_document",kind:"scalar",T:5},{no:15,name:"max_size_per_document",kind:"scalar",T:5},{no:16,name:"remove_on_detach",kind:"scalar",T:8},{no:14,name:"allowed_origins",kind:"scalar",T:9,repeated:!0},{no:12,name:"created_at",kind:"message",T:Ue},{no:13,name:"updated_at",kind:"message",T:Ue}]));let iS=ki;const Di=class Di extends gt{constructor(e){super();y(this,"timestamp",$t.zero);y(this,"value",0);x.util.initPartial(e,this)}static fromBinary(e,r){return new Di().fromBinary(e,r)}static fromJson(e,r){return new Di().fromJson(e,r)}static fromJsonString(e,r){return new Di().fromJsonString(e,r)}static equals(e,r){return x.util.equals(Di,e,r)}};y(Di,"runtime",x),y(Di,"typeName","yorkie.v1.MetricPoint"),y(Di,"fields",x.util.newFieldList(()=>[{no:1,name:"timestamp",kind:"scalar",T:3},{no:2,name:"value",kind:"scalar",T:5}]));let sS=Di;const Ii=class Ii extends gt{constructor(e){super();y(this,"name");y(this,"authWebhookUrl");y(this,"authWebhookMethods");y(this,"authWebhookMaxRetries");y(this,"authWebhookMinWaitInterval");y(this,"authWebhookMaxWaitInterval");y(this,"authWebhookRequestTimeout");y(this,"eventWebhookUrl");y(this,"eventWebhookEvents");y(this,"eventWebhookMaxRetries");y(this,"eventWebhookMinWaitInterval");y(this,"eventWebhookMaxWaitInterval");y(this,"eventWebhookRequestTimeout");y(this,"snapshotThreshold");y(this,"snapshotInterval");y(this,"clientDeactivateThreshold");y(this,"maxSubscribersPerDocument");y(this,"maxAttachmentsPerDocument");y(this,"maxSizePerDocument");y(this,"removeOnDetach");y(this,"allowedOrigins");x.util.initPartial(e,this)}static fromBinary(e,r){return new Ii().fromBinary(e,r)}static fromJson(e,r){return new Ii().fromJson(e,r)}static fromJsonString(e,r){return new Ii().fromJsonString(e,r)}static equals(e,r){return x.util.equals(Ii,e,r)}};y(Ii,"runtime",x),y(Ii,"typeName","yorkie.v1.UpdatableProjectFields"),y(Ii,"fields",x.util.newFieldList(()=>[{no:1,name:"name",kind:"message",T:Ae},{no:2,name:"auth_webhook_url",kind:"message",T:Ae},{no:3,name:"auth_webhook_methods",kind:"message",T:ly},{no:12,name:"auth_webhook_max_retries",kind:"message",T:qn},{no:13,name:"auth_webhook_min_wait_interval",kind:"message",T:Ae},{no:14,name:"auth_webhook_max_wait_interval",kind:"message",T:Ae},{no:15,name:"auth_webhook_request_timeout",kind:"message",T:Ae},{no:4,name:"event_webhook_url",kind:"message",T:Ae},{no:5,name:"event_webhook_events",kind:"message",T:uy},{no:16,name:"event_webhook_max_retries",kind:"message",T:qn},{no:17,name:"event_webhook_min_wait_interval",kind:"message",T:Ae},{no:18,name:"event_webhook_max_wait_interval",kind:"message",T:Ae},{no:19,name:"event_webhook_request_timeout",kind:"message",T:Ae},{no:20,name:"snapshot_threshold",kind:"message",T:Un},{no:21,name:"snapshot_interval",kind:"message",T:Un},{no:6,name:"client_deactivate_threshold",kind:"message",T:Ae},{no:7,name:"max_subscribers_per_document",kind:"message",T:mn},{no:8,name:"max_attachments_per_document",kind:"message",T:mn},{no:10,name:"max_size_per_document",kind:"message",T:mn},{no:11,name:"remove_on_detach",kind:"message",T:tr},{no:9,name:"allowed_origins",kind:"message",T:cy}]));let aS=Ii;const Oi=class Oi extends gt{constructor(e){super();y(this,"methods",[]);x.util.initPartial(e,this)}static fromBinary(e,r){return new Oi().fromBinary(e,r)}static fromJson(e,r){return new Oi().fromJson(e,r)}static fromJsonString(e,r){return new Oi().fromJsonString(e,r)}static equals(e,r){return x.util.equals(Oi,e,r)}};y(Oi,"runtime",x),y(Oi,"typeName","yorkie.v1.UpdatableProjectFields.AuthWebhookMethods"),y(Oi,"fields",x.util.newFieldList(()=>[{no:1,name:"methods",kind:"scalar",T:9,repeated:!0}]));let ly=Oi;const Mi=class Mi extends gt{constructor(e){super();y(this,"events",[]);x.util.initPartial(e,this)}static fromBinary(e,r){return new Mi().fromBinary(e,r)}static fromJson(e,r){return new Mi().fromJson(e,r)}static fromJsonString(e,r){return new Mi().fromJsonString(e,r)}static equals(e,r){return x.util.equals(Mi,e,r)}};y(Mi,"runtime",x),y(Mi,"typeName","yorkie.v1.UpdatableProjectFields.EventWebhookEvents"),y(Mi,"fields",x.util.newFieldList(()=>[{no:1,name:"events",kind:"scalar",T:9,repeated:!0}]));let uy=Mi;const Ri=class Ri extends gt{constructor(e){super();y(this,"origins",[]);x.util.initPartial(e,this)}static fromBinary(e,r){return new Ri().fromBinary(e,r)}static fromJson(e,r){return new Ri().fromJson(e,r)}static fromJsonString(e,r){return new Ri().fromJsonString(e,r)}static equals(e,r){return x.util.equals(Ri,e,r)}};y(Ri,"runtime",x),y(Ri,"typeName","yorkie.v1.UpdatableProjectFields.AllowedOrigins"),y(Ri,"fields",x.util.newFieldList(()=>[{no:1,name:"origins",kind:"scalar",T:9,repeated:!0}]));let cy=Ri;const Bi=class Bi extends gt{constructor(e){super();y(this,"id","");y(this,"key","");y(this,"root","");y(this,"attachedClients",0);y(this,"documentSize");y(this,"schemaKey","");y(this,"presences",{});y(this,"createdAt");y(this,"accessedAt");y(this,"updatedAt");x.util.initPartial(e,this)}static fromBinary(e,r){return new Bi().fromBinary(e,r)}static fromJson(e,r){return new Bi().fromJson(e,r)}static fromJsonString(e,r){return new Bi().fromJsonString(e,r)}static equals(e,r){return x.util.equals(Bi,e,r)}};y(Bi,"runtime",x),y(Bi,"typeName","yorkie.v1.DocumentSummary"),y(Bi,"fields",x.util.newFieldList(()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"key",kind:"scalar",T:9},{no:3,name:"root",kind:"scalar",T:9},{no:7,name:"attached_clients",kind:"scalar",T:5},{no:8,name:"document_size",kind:"message",T:gy},{no:9,name:"schema_key",kind:"scalar",T:9},{no:10,name:"presences",kind:"map",K:9,V:{kind:"message",T:rh}},{no:4,name:"created_at",kind:"message",T:Ue},{no:5,name:"accessed_at",kind:"message",T:Ue},{no:6,name:"updated_at",kind:"message",T:Ue}]));let oS=Bi;const zi=class zi extends gt{constructor(e){super();y(this,"type",0);y(this,"presence");x.util.initPartial(e,this)}static fromBinary(e,r){return new zi().fromBinary(e,r)}static fromJson(e,r){return new zi().fromJson(e,r)}static fromJsonString(e,r){return new zi().fromJsonString(e,r)}static equals(e,r){return x.util.equals(zi,e,r)}};y(zi,"runtime",x),y(zi,"typeName","yorkie.v1.PresenceChange"),y(zi,"fields",x.util.newFieldList(()=>[{no:1,name:"type",kind:"enum",T:x.getEnumType(Za)},{no:2,name:"presence",kind:"message",T:rh}]));let Fu=zi;var Za=(n=>(n[n.UNSPECIFIED=0]="UNSPECIFIED",n[n.PUT=1]="PUT",n[n.DELETE=2]="DELETE",n[n.CLEAR=3]="CLEAR",n))(Za||{});x.util.setEnumType(Za,"yorkie.v1.PresenceChange.ChangeType",[{no:0,name:"CHANGE_TYPE_UNSPECIFIED"},{no:1,name:"CHANGE_TYPE_PUT"},{no:2,name:"CHANGE_TYPE_DELETE"},{no:3,name:"CHANGE_TYPE_CLEAR"}]);var zn;let rh=(zn=class extends gt{constructor(e){super();y(this,"data",{});x.util.initPartial(e,this)}static fromBinary(e,r){return new zn().fromBinary(e,r)}static fromJson(e,r){return new zn().fromJson(e,r)}static fromJsonString(e,r){return new zn().fromJsonString(e,r)}static equals(e,r){return x.util.equals(zn,e,r)}},y(zn,"runtime",x),y(zn,"typeName","yorkie.v1.Presence"),y(zn,"fields",x.util.newFieldList(()=>[{no:1,name:"data",kind:"map",K:9,V:{kind:"scalar",T:9}}])),zn);var Ln;let ax=(Ln=class extends gt{constructor(e){super();y(this,"serverSeq",$t.zero);y(this,"clientSeq",0);x.util.initPartial(e,this)}static fromBinary(e,r){return new Ln().fromBinary(e,r)}static fromJson(e,r){return new Ln().fromJson(e,r)}static fromJsonString(e,r){return new Ln().fromJsonString(e,r)}static equals(e,r){return x.util.equals(Ln,e,r)}},y(Ln,"runtime",x),y(Ln,"typeName","yorkie.v1.Checkpoint"),y(Ln,"fields",x.util.newFieldList(()=>[{no:1,name:"server_seq",kind:"scalar",T:3},{no:2,name:"client_seq",kind:"scalar",T:13}])),Ln);const Li=class Li extends gt{constructor(e){super();y(this,"createdAt");y(this,"offset",0);y(this,"relativeOffset",0);x.util.initPartial(e,this)}static fromBinary(e,r){return new Li().fromBinary(e,r)}static fromJson(e,r){return new Li().fromJson(e,r)}static fromJsonString(e,r){return new Li().fromJsonString(e,r)}static equals(e,r){return x.util.equals(Li,e,r)}};y(Li,"runtime",x),y(Li,"typeName","yorkie.v1.TextNodePos"),y(Li,"fields",x.util.newFieldList(()=>[{no:1,name:"created_at",kind:"message",T:bt},{no:2,name:"offset",kind:"scalar",T:5},{no:3,name:"relative_offset",kind:"scalar",T:5}]));let Qa=Li;var _n;let bt=(_n=class extends gt{constructor(e){super();y(this,"lamport",$t.zero);y(this,"delimiter",0);y(this,"actorId",new Uint8Array(0));x.util.initPartial(e,this)}static fromBinary(e,r){return new _n().fromBinary(e,r)}static fromJson(e,r){return new _n().fromJson(e,r)}static fromJsonString(e,r){return new _n().fromJsonString(e,r)}static equals(e,r){return x.util.equals(_n,e,r)}},y(_n,"runtime",x),y(_n,"typeName","yorkie.v1.TimeTicket"),y(_n,"fields",x.util.newFieldList(()=>[{no:1,name:"lamport",kind:"scalar",T:3},{no:2,name:"delimiter",kind:"scalar",T:13},{no:3,name:"actor_id",kind:"scalar",T:12}])),_n);const _i=class _i extends gt{constructor(e){super();y(this,"topic","");y(this,"payload",new Uint8Array(0));x.util.initPartial(e,this)}static fromBinary(e,r){return new _i().fromBinary(e,r)}static fromJson(e,r){return new _i().fromJson(e,r)}static fromJsonString(e,r){return new _i().fromJsonString(e,r)}static equals(e,r){return x.util.equals(_i,e,r)}};y(_i,"runtime",x),y(_i,"typeName","yorkie.v1.DocEventBody"),y(_i,"fields",x.util.newFieldList(()=>[{no:1,name:"topic",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:12}]));let fy=_i;const Ui=class Ui extends gt{constructor(e){super();y(this,"type",0);y(this,"publisher","");y(this,"body");x.util.initPartial(e,this)}static fromBinary(e,r){return new Ui().fromBinary(e,r)}static fromJson(e,r){return new Ui().fromJson(e,r)}static fromJsonString(e,r){return new Ui().fromJsonString(e,r)}static equals(e,r){return x.util.equals(Ui,e,r)}};y(Ui,"runtime",x),y(Ui,"typeName","yorkie.v1.DocEvent"),y(Ui,"fields",x.util.newFieldList(()=>[{no:1,name:"type",kind:"enum",T:x.getEnumType(Ka)},{no:2,name:"publisher",kind:"scalar",T:9},{no:3,name:"body",kind:"message",T:fy}]));let dy=Ui;const qi=class qi extends gt{constructor(e){super();y(this,"type",0);y(this,"count",$t.zero);y(this,"seq",$t.zero);x.util.initPartial(e,this)}static fromBinary(e,r){return new qi().fromBinary(e,r)}static fromJson(e,r){return new qi().fromJson(e,r)}static fromJsonString(e,r){return new qi().fromJsonString(e,r)}static equals(e,r){return x.util.equals(qi,e,r)}};y(qi,"runtime",x),y(qi,"typeName","yorkie.v1.PresenceEvent"),y(qi,"fields",x.util.newFieldList(()=>[{no:1,name:"type",kind:"enum",T:x.getEnumType(cp)},{no:2,name:"count",kind:"scalar",T:3},{no:3,name:"seq",kind:"scalar",T:3}]));let hy=qi;var cp=(n=>(n[n.UNSPECIFIED=0]="UNSPECIFIED",n[n.COUNT_CHANGED=1]="COUNT_CHANGED",n))(cp||{});x.util.setEnumType(cp,"yorkie.v1.PresenceEvent.Type",[{no:0,name:"TYPE_UNSPECIFIED"},{no:1,name:"TYPE_COUNT_CHANGED"}]);const Pi=class Pi extends gt{constructor(e){super();y(this,"data",0);y(this,"meta",0);x.util.initPartial(e,this)}static fromBinary(e,r){return new Pi().fromBinary(e,r)}static fromJson(e,r){return new Pi().fromJson(e,r)}static fromJsonString(e,r){return new Pi().fromJsonString(e,r)}static equals(e,r){return x.util.equals(Pi,e,r)}};y(Pi,"runtime",x),y(Pi,"typeName","yorkie.v1.DataSize"),y(Pi,"fields",x.util.newFieldList(()=>[{no:1,name:"data",kind:"scalar",T:5},{no:2,name:"meta",kind:"scalar",T:5}]));let Bd=Pi;const Ji=class Ji extends gt{constructor(e){super();y(this,"live");y(this,"gc");x.util.initPartial(e,this)}static fromBinary(e,r){return new Ji().fromBinary(e,r)}static fromJson(e,r){return new Ji().fromJson(e,r)}static fromJsonString(e,r){return new Ji().fromJsonString(e,r)}static equals(e,r){return x.util.equals(Ji,e,r)}};y(Ji,"runtime",x),y(Ji,"typeName","yorkie.v1.DocSize"),y(Ji,"fields",x.util.newFieldList(()=>[{no:1,name:"live",kind:"message",T:Bd},{no:2,name:"gc",kind:"message",T:Bd}]));let gy=Ji;const $i=class $i extends gt{constructor(e){super();y(this,"id","");y(this,"name","");y(this,"version",0);y(this,"body","");y(this,"rules",[]);y(this,"createdAt");x.util.initPartial(e,this)}static fromBinary(e,r){return new $i().fromBinary(e,r)}static fromJson(e,r){return new $i().fromJson(e,r)}static fromJsonString(e,r){return new $i().fromJsonString(e,r)}static equals(e,r){return x.util.equals($i,e,r)}};y($i,"runtime",x),y($i,"typeName","yorkie.v1.Schema"),y($i,"fields",x.util.newFieldList(()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"version",kind:"scalar",T:5},{no:4,name:"body",kind:"scalar",T:9},{no:5,name:"rules",kind:"message",T:zd,repeated:!0},{no:6,name:"created_at",kind:"message",T:Ue}]));let lS=$i;const Hi=class Hi extends gt{constructor(e){super();y(this,"path","");y(this,"type","");x.util.initPartial(e,this)}static fromBinary(e,r){return new Hi().fromBinary(e,r)}static fromJson(e,r){return new Hi().fromJson(e,r)}static fromJsonString(e,r){return new Hi().fromJsonString(e,r)}static equals(e,r){return x.util.equals(Hi,e,r)}};y(Hi,"runtime",x),y(Hi,"typeName","yorkie.v1.Rule"),y(Hi,"fields",x.util.newFieldList(()=>[{no:1,name:"path",kind:"scalar",T:9},{no:2,name:"type",kind:"scalar",T:9}]));let zd=Hi;const Vi=class Vi extends gt{constructor(e){super();y(this,"clientKey","");y(this,"metadata",{});x.util.initPartial(e,this)}static fromBinary(e,r){return new Vi().fromBinary(e,r)}static fromJson(e,r){return new Vi().fromJson(e,r)}static fromJsonString(e,r){return new Vi().fromJsonString(e,r)}static equals(e,r){return x.util.equals(Vi,e,r)}};y(Vi,"runtime",x),y(Vi,"typeName","yorkie.v1.ActivateClientRequest"),y(Vi,"fields",x.util.newFieldList(()=>[{no:1,name:"client_key",kind:"scalar",T:9},{no:2,name:"metadata",kind:"map",K:9,V:{kind:"scalar",T:9}}]));let my=Vi;const ji=class ji extends gt{constructor(e){super();y(this,"clientId","");x.util.initPartial(e,this)}static fromBinary(e,r){return new ji().fromBinary(e,r)}static fromJson(e,r){return new ji().fromJson(e,r)}static fromJsonString(e,r){return new ji().fromJsonString(e,r)}static equals(e,r){return x.util.equals(ji,e,r)}};y(ji,"runtime",x),y(ji,"typeName","yorkie.v1.ActivateClientResponse"),y(ji,"fields",x.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9}]));let yy=ji;const Yi=class Yi extends gt{constructor(e){super();y(this,"clientId","");y(this,"synchronous",!1);x.util.initPartial(e,this)}static fromBinary(e,r){return new Yi().fromBinary(e,r)}static fromJson(e,r){return new Yi().fromJson(e,r)}static fromJsonString(e,r){return new Yi().fromJsonString(e,r)}static equals(e,r){return x.util.equals(Yi,e,r)}};y(Yi,"runtime",x),y(Yi,"typeName","yorkie.v1.DeactivateClientRequest"),y(Yi,"fields",x.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"synchronous",kind:"scalar",T:8}]));let py=Yi;const Ki=class Ki extends gt{constructor(t){super(),x.util.initPartial(t,this)}static fromBinary(t,e){return new Ki().fromBinary(t,e)}static fromJson(t,e){return new Ki().fromJson(t,e)}static fromJsonString(t,e){return new Ki().fromJsonString(t,e)}static equals(t,e){return x.util.equals(Ki,t,e)}};y(Ki,"runtime",x),y(Ki,"typeName","yorkie.v1.DeactivateClientResponse"),y(Ki,"fields",x.util.newFieldList(()=>[]));let vy=Ki;const Gi=class Gi extends gt{constructor(e){super();y(this,"clientId","");y(this,"changePack");y(this,"schemaKey","");x.util.initPartial(e,this)}static fromBinary(e,r){return new Gi().fromBinary(e,r)}static fromJson(e,r){return new Gi().fromJson(e,r)}static fromJsonString(e,r){return new Gi().fromJsonString(e,r)}static equals(e,r){return x.util.equals(Gi,e,r)}};y(Gi,"runtime",x),y(Gi,"typeName","yorkie.v1.AttachDocumentRequest"),y(Gi,"fields",x.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"change_pack",kind:"message",T:ks},{no:3,name:"schema_key",kind:"scalar",T:9}]));let wy=Gi;const Xi=class Xi extends gt{constructor(e){super();y(this,"documentId","");y(this,"changePack");y(this,"maxSizePerDocument",0);y(this,"schemaRules",[]);x.util.initPartial(e,this)}static fromBinary(e,r){return new Xi().fromBinary(e,r)}static fromJson(e,r){return new Xi().fromJson(e,r)}static fromJsonString(e,r){return new Xi().fromJsonString(e,r)}static equals(e,r){return x.util.equals(Xi,e,r)}};y(Xi,"runtime",x),y(Xi,"typeName","yorkie.v1.AttachDocumentResponse"),y(Xi,"fields",x.util.newFieldList(()=>[{no:1,name:"document_id",kind:"scalar",T:9},{no:2,name:"change_pack",kind:"message",T:ks},{no:3,name:"max_size_per_document",kind:"scalar",T:5},{no:4,name:"schema_rules",kind:"message",T:zd,repeated:!0}]));let by=Xi;const Fi=class Fi extends gt{constructor(e){super();y(this,"clientId","");y(this,"documentId","");y(this,"changePack");y(this,"removeIfNotAttached",!1);x.util.initPartial(e,this)}static fromBinary(e,r){return new Fi().fromBinary(e,r)}static fromJson(e,r){return new Fi().fromJson(e,r)}static fromJsonString(e,r){return new Fi().fromJsonString(e,r)}static equals(e,r){return x.util.equals(Fi,e,r)}};y(Fi,"runtime",x),y(Fi,"typeName","yorkie.v1.DetachDocumentRequest"),y(Fi,"fields",x.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:ks},{no:4,name:"remove_if_not_attached",kind:"scalar",T:8}]));let Sy=Fi;const Zi=class Zi extends gt{constructor(e){super();y(this,"changePack");x.util.initPartial(e,this)}static fromBinary(e,r){return new Zi().fromBinary(e,r)}static fromJson(e,r){return new Zi().fromJson(e,r)}static fromJsonString(e,r){return new Zi().fromJsonString(e,r)}static equals(e,r){return x.util.equals(Zi,e,r)}};y(Zi,"runtime",x),y(Zi,"typeName","yorkie.v1.DetachDocumentResponse"),y(Zi,"fields",x.util.newFieldList(()=>[{no:2,name:"change_pack",kind:"message",T:ks}]));let xy=Zi;const Qi=class Qi extends gt{constructor(e){super();y(this,"clientId","");y(this,"documentId","");x.util.initPartial(e,this)}static fromBinary(e,r){return new Qi().fromBinary(e,r)}static fromJson(e,r){return new Qi().fromJson(e,r)}static fromJsonString(e,r){return new Qi().fromJsonString(e,r)}static equals(e,r){return x.util.equals(Qi,e,r)}};y(Qi,"runtime",x),y(Qi,"typeName","yorkie.v1.WatchDocumentRequest"),y(Qi,"fields",x.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9}]));let Ty=Qi;const Wi=class Wi extends gt{constructor(e){super();y(this,"body",{case:void 0});x.util.initPartial(e,this)}static fromBinary(e,r){return new Wi().fromBinary(e,r)}static fromJson(e,r){return new Wi().fromJson(e,r)}static fromJsonString(e,r){return new Wi().fromJsonString(e,r)}static equals(e,r){return x.util.equals(Wi,e,r)}};y(Wi,"runtime",x),y(Wi,"typeName","yorkie.v1.WatchDocumentResponse"),y(Wi,"fields",x.util.newFieldList(()=>[{no:1,name:"initialization",kind:"message",T:Ey,oneof:"body"},{no:2,name:"event",kind:"message",T:dy,oneof:"body"}]));let Ay=Wi;const ts=class ts extends gt{constructor(e){super();y(this,"clientIds",[]);x.util.initPartial(e,this)}static fromBinary(e,r){return new ts().fromBinary(e,r)}static fromJson(e,r){return new ts().fromJson(e,r)}static fromJsonString(e,r){return new ts().fromJsonString(e,r)}static equals(e,r){return x.util.equals(ts,e,r)}};y(ts,"runtime",x),y(ts,"typeName","yorkie.v1.WatchDocumentResponse.Initialization"),y(ts,"fields",x.util.newFieldList(()=>[{no:1,name:"client_ids",kind:"scalar",T:9,repeated:!0}]));let Ey=ts;const es=class es extends gt{constructor(e){super();y(this,"clientId","");y(this,"documentId","");y(this,"changePack");x.util.initPartial(e,this)}static fromBinary(e,r){return new es().fromBinary(e,r)}static fromJson(e,r){return new es().fromJson(e,r)}static fromJsonString(e,r){return new es().fromJsonString(e,r)}static equals(e,r){return x.util.equals(es,e,r)}};y(es,"runtime",x),y(es,"typeName","yorkie.v1.RemoveDocumentRequest"),y(es,"fields",x.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:ks}]));let Ny=es;const ns=class ns extends gt{constructor(e){super();y(this,"changePack");x.util.initPartial(e,this)}static fromBinary(e,r){return new ns().fromBinary(e,r)}static fromJson(e,r){return new ns().fromJson(e,r)}static fromJsonString(e,r){return new ns().fromJsonString(e,r)}static equals(e,r){return x.util.equals(ns,e,r)}};y(ns,"runtime",x),y(ns,"typeName","yorkie.v1.RemoveDocumentResponse"),y(ns,"fields",x.util.newFieldList(()=>[{no:1,name:"change_pack",kind:"message",T:ks}]));let Cy=ns;const rs=class rs extends gt{constructor(e){super();y(this,"clientId","");y(this,"documentId","");y(this,"changePack");y(this,"pushOnly",!1);x.util.initPartial(e,this)}static fromBinary(e,r){return new rs().fromBinary(e,r)}static fromJson(e,r){return new rs().fromJson(e,r)}static fromJsonString(e,r){return new rs().fromJsonString(e,r)}static equals(e,r){return x.util.equals(rs,e,r)}};y(rs,"runtime",x),y(rs,"typeName","yorkie.v1.PushPullChangesRequest"),y(rs,"fields",x.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:ks},{no:4,name:"push_only",kind:"scalar",T:8}]));let ky=rs;const is=class is extends gt{constructor(e){super();y(this,"changePack");x.util.initPartial(e,this)}static fromBinary(e,r){return new is().fromBinary(e,r)}static fromJson(e,r){return new is().fromJson(e,r)}static fromJsonString(e,r){return new is().fromJsonString(e,r)}static equals(e,r){return x.util.equals(is,e,r)}};y(is,"runtime",x),y(is,"typeName","yorkie.v1.PushPullChangesResponse"),y(is,"fields",x.util.newFieldList(()=>[{no:1,name:"change_pack",kind:"message",T:ks}]));let Dy=is;const ss=class ss extends gt{constructor(e){super();y(this,"clientId","");y(this,"documentId","");y(this,"topic","");y(this,"payload",new Uint8Array(0));x.util.initPartial(e,this)}static fromBinary(e,r){return new ss().fromBinary(e,r)}static fromJson(e,r){return new ss().fromJson(e,r)}static fromJsonString(e,r){return new ss().fromJsonString(e,r)}static equals(e,r){return x.util.equals(ss,e,r)}};y(ss,"runtime",x),y(ss,"typeName","yorkie.v1.BroadcastRequest"),y(ss,"fields",x.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"topic",kind:"scalar",T:9},{no:4,name:"payload",kind:"scalar",T:12}]));let Iy=ss;const as=class as extends gt{constructor(t){super(),x.util.initPartial(t,this)}static fromBinary(t,e){return new as().fromBinary(t,e)}static fromJson(t,e){return new as().fromJson(t,e)}static fromJsonString(t,e){return new as().fromJsonString(t,e)}static equals(t,e){return x.util.equals(as,t,e)}};y(as,"runtime",x),y(as,"typeName","yorkie.v1.BroadcastResponse"),y(as,"fields",x.util.newFieldList(()=>[]));let Oy=as;const os=class os extends gt{constructor(e){super();y(this,"clientId","");y(this,"presenceKey","");x.util.initPartial(e,this)}static fromBinary(e,r){return new os().fromBinary(e,r)}static fromJson(e,r){return new os().fromJson(e,r)}static fromJsonString(e,r){return new os().fromJsonString(e,r)}static equals(e,r){return x.util.equals(os,e,r)}};y(os,"runtime",x),y(os,"typeName","yorkie.v1.AttachPresenceRequest"),y(os,"fields",x.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"presence_key",kind:"scalar",T:9}]));let My=os;const ls=class ls extends gt{constructor(e){super();y(this,"presenceId","");y(this,"count",$t.zero);x.util.initPartial(e,this)}static fromBinary(e,r){return new ls().fromBinary(e,r)}static fromJson(e,r){return new ls().fromJson(e,r)}static fromJsonString(e,r){return new ls().fromJsonString(e,r)}static equals(e,r){return x.util.equals(ls,e,r)}};y(ls,"runtime",x),y(ls,"typeName","yorkie.v1.AttachPresenceResponse"),y(ls,"fields",x.util.newFieldList(()=>[{no:1,name:"presence_id",kind:"scalar",T:9},{no:2,name:"count",kind:"scalar",T:3}]));let Ry=ls;const us=class us extends gt{constructor(e){super();y(this,"clientId","");y(this,"presenceId","");y(this,"presenceKey","");x.util.initPartial(e,this)}static fromBinary(e,r){return new us().fromBinary(e,r)}static fromJson(e,r){return new us().fromJson(e,r)}static fromJsonString(e,r){return new us().fromJsonString(e,r)}static equals(e,r){return x.util.equals(us,e,r)}};y(us,"runtime",x),y(us,"typeName","yorkie.v1.DetachPresenceRequest"),y(us,"fields",x.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"presence_id",kind:"scalar",T:9},{no:3,name:"presence_key",kind:"scalar",T:9}]));let By=us;const cs=class cs extends gt{constructor(e){super();y(this,"count",$t.zero);x.util.initPartial(e,this)}static fromBinary(e,r){return new cs().fromBinary(e,r)}static fromJson(e,r){return new cs().fromJson(e,r)}static fromJsonString(e,r){return new cs().fromJsonString(e,r)}static equals(e,r){return x.util.equals(cs,e,r)}};y(cs,"runtime",x),y(cs,"typeName","yorkie.v1.DetachPresenceResponse"),y(cs,"fields",x.util.newFieldList(()=>[{no:1,name:"count",kind:"scalar",T:3}]));let zy=cs;const fs=class fs extends gt{constructor(e){super();y(this,"clientId","");y(this,"presenceId","");y(this,"presenceKey","");x.util.initPartial(e,this)}static fromBinary(e,r){return new fs().fromBinary(e,r)}static fromJson(e,r){return new fs().fromJson(e,r)}static fromJsonString(e,r){return new fs().fromJsonString(e,r)}static equals(e,r){return x.util.equals(fs,e,r)}};y(fs,"runtime",x),y(fs,"typeName","yorkie.v1.RefreshPresenceRequest"),y(fs,"fields",x.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"presence_id",kind:"scalar",T:9},{no:3,name:"presence_key",kind:"scalar",T:9}]));let Ly=fs;const ds=class ds extends gt{constructor(e){super();y(this,"count",$t.zero);x.util.initPartial(e,this)}static fromBinary(e,r){return new ds().fromBinary(e,r)}static fromJson(e,r){return new ds().fromJson(e,r)}static fromJsonString(e,r){return new ds().fromJsonString(e,r)}static equals(e,r){return x.util.equals(ds,e,r)}};y(ds,"runtime",x),y(ds,"typeName","yorkie.v1.RefreshPresenceResponse"),y(ds,"fields",x.util.newFieldList(()=>[{no:1,name:"count",kind:"scalar",T:3}]));let _y=ds;const hs=class hs extends gt{constructor(e){super();y(this,"clientId","");y(this,"presenceKey","");x.util.initPartial(e,this)}static fromBinary(e,r){return new hs().fromBinary(e,r)}static fromJson(e,r){return new hs().fromJson(e,r)}static fromJsonString(e,r){return new hs().fromJsonString(e,r)}static equals(e,r){return x.util.equals(hs,e,r)}};y(hs,"runtime",x),y(hs,"typeName","yorkie.v1.WatchPresenceRequest"),y(hs,"fields",x.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"presence_key",kind:"scalar",T:9}]));let Uy=hs;const gs=class gs extends gt{constructor(e){super();y(this,"body",{case:void 0});x.util.initPartial(e,this)}static fromBinary(e,r){return new gs().fromBinary(e,r)}static fromJson(e,r){return new gs().fromJson(e,r)}static fromJsonString(e,r){return new gs().fromJsonString(e,r)}static equals(e,r){return x.util.equals(gs,e,r)}};y(gs,"runtime",x),y(gs,"typeName","yorkie.v1.WatchPresenceResponse"),y(gs,"fields",x.util.newFieldList(()=>[{no:1,name:"initialized",kind:"message",T:Py,oneof:"body"},{no:2,name:"event",kind:"message",T:hy,oneof:"body"}]));let qy=gs;const ms=class ms extends gt{constructor(e){super();y(this,"count",$t.zero);y(this,"seq",$t.zero);x.util.initPartial(e,this)}static fromBinary(e,r){return new ms().fromBinary(e,r)}static fromJson(e,r){return new ms().fromJson(e,r)}static fromJsonString(e,r){return new ms().fromJsonString(e,r)}static equals(e,r){return x.util.equals(ms,e,r)}};y(ms,"runtime",x),y(ms,"typeName","yorkie.v1.WatchPresenceInitialized"),y(ms,"fields",x.util.newFieldList(()=>[{no:1,name:"count",kind:"scalar",T:3},{no:2,name:"seq",kind:"scalar",T:3}]));let Py=ms;const oC={typeName:"yorkie.v1.YorkieService",methods:{activateClient:{name:"ActivateClient",I:my,O:yy,kind:De.Unary},deactivateClient:{name:"DeactivateClient",I:py,O:vy,kind:De.Unary},attachDocument:{name:"AttachDocument",I:wy,O:by,kind:De.Unary},detachDocument:{name:"DetachDocument",I:Sy,O:xy,kind:De.Unary},removeDocument:{name:"RemoveDocument",I:Ny,O:Cy,kind:De.Unary},pushPullChanges:{name:"PushPullChanges",I:ky,O:Dy,kind:De.Unary},watchDocument:{name:"WatchDocument",I:Ty,O:Ay,kind:De.ServerStreaming},broadcast:{name:"Broadcast",I:Iy,O:Oy,kind:De.Unary},attachPresence:{name:"AttachPresence",I:My,O:Ry,kind:De.Unary},detachPresence:{name:"DetachPresence",I:By,O:zy,kind:De.Unary},refreshPresence:{name:"RefreshPresence",I:Ly,O:_y,kind:De.Unary},watchPresence:{name:"WatchPresence",I:Uy,O:qy,kind:De.ServerStreaming}}},lC=x.makeMessageType("google.rpc.ErrorInfo",()=>[{no:1,name:"reason",kind:"scalar",T:9},{no:2,name:"domain",kind:"scalar",T:9},{no:3,name:"metadata",kind:"map",K:9,V:{kind:"scalar",T:9}}]);x.makeMessageType("google.rpc.RetryInfo",()=>[{no:1,name:"retry_delay",kind:"message",T:ws}]);x.makeMessageType("google.rpc.DebugInfo",()=>[{no:1,name:"stack_entries",kind:"scalar",T:9,repeated:!0},{no:2,name:"detail",kind:"scalar",T:9}]);x.makeMessageType("google.rpc.QuotaFailure",()=>[{no:1,name:"violations",kind:"message",T:uC,repeated:!0}]);const uC=x.makeMessageType("google.rpc.QuotaFailure.Violation",()=>[{no:1,name:"subject",kind:"scalar",T:9},{no:2,name:"description",kind:"scalar",T:9},{no:3,name:"api_service",kind:"scalar",T:9},{no:4,name:"quota_metric",kind:"scalar",T:9},{no:5,name:"quota_id",kind:"scalar",T:9},{no:6,name:"quota_dimensions",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:7,name:"quota_value",kind:"scalar",T:3},{no:8,name:"future_quota_value",kind:"scalar",T:3,opt:!0}],{localName:"QuotaFailure_Violation"});x.makeMessageType("google.rpc.PreconditionFailure",()=>[{no:1,name:"violations",kind:"message",T:cC,repeated:!0}]);const cC=x.makeMessageType("google.rpc.PreconditionFailure.Violation",()=>[{no:1,name:"type",kind:"scalar",T:9},{no:2,name:"subject",kind:"scalar",T:9},{no:3,name:"description",kind:"scalar",T:9}],{localName:"PreconditionFailure_Violation"});x.makeMessageType("google.rpc.BadRequest",()=>[{no:1,name:"field_violations",kind:"message",T:fC,repeated:!0}]);const fC=x.makeMessageType("google.rpc.BadRequest.FieldViolation",()=>[{no:1,name:"field",kind:"scalar",T:9},{no:2,name:"description",kind:"scalar",T:9},{no:3,name:"reason",kind:"scalar",T:9},{no:4,name:"localized_message",kind:"message",T:hC}],{localName:"BadRequest_FieldViolation"});x.makeMessageType("google.rpc.RequestInfo",()=>[{no:1,name:"request_id",kind:"scalar",T:9},{no:2,name:"serving_data",kind:"scalar",T:9}]);x.makeMessageType("google.rpc.ResourceInfo",()=>[{no:1,name:"resource_type",kind:"scalar",T:9},{no:2,name:"resource_name",kind:"scalar",T:9},{no:3,name:"owner",kind:"scalar",T:9},{no:4,name:"description",kind:"scalar",T:9}]);x.makeMessageType("google.rpc.Help",()=>[{no:1,name:"links",kind:"message",T:dC,repeated:!0}]);const dC=x.makeMessageType("google.rpc.Help.Link",()=>[{no:1,name:"description",kind:"scalar",T:9},{no:2,name:"url",kind:"scalar",T:9}],{localName:"Help_Link"}),hC=x.makeMessageType("google.rpc.LocalizedMessage",()=>[{no:1,name:"locale",kind:"scalar",T:9},{no:2,name:"message",kind:"scalar",T:9}]);var $=(n=>(n.Ok="ok",n.ErrClientNotActivated="ErrClientNotActivated",n.ErrClientNotFound="ErrClientNotFound",n.ErrUnimplemented="ErrUnimplemented",n.ErrInvalidType="ErrInvalidType",n.ErrDummy="ErrDummy",n.ErrDocumentNotAttached="ErrDocumentNotAttached",n.ErrDocumentNotDetached="ErrDocumentNotDetached",n.ErrDocumentRemoved="ErrDocumentRemoved",n.ErrDocumentSizeExceedsLimit="ErrDocumentSizeExceedsLimit",n.ErrDocumentSchemaValidationFailed="ErrDocumentSchemaValidationFailed",n.ErrInvalidObjectKey="ErrInvalidObjectKey",n.ErrInvalidArgument="ErrInvalidArgument",n.ErrNotInitialized="ErrNotInitialized",n.ErrNotReady="ErrNotReady",n.ErrRefused="ErrRefused",n.ErrContextNotProvided="ErrContextNotProvided",n.ErrPermissionDenied="ErrPermissionDenied",n.ErrUnauthenticated="ErrUnauthenticated",n.ErrTooManySubscribers="ErrTooManySubscribers",n.ErrTooManyAttachments="ErrTooManyAttachments",n))($||{});class j extends Error{constructor(e,r){super(r);y(this,"name","YorkieError");y(this,"stack");this.code=e,this.message=r,this.toString=()=>`[code=${this.code}]: ${this.message}`}}var kr=(n=>(n.Put="put",n.Clear="clear",n))(kr||{});const fp="000000000000000000000000",Ar=24;class $n{constructor(t,e,r){y(this,"lamport");y(this,"delimiter");y(this,"actorID");this.lamport=t,this.delimiter=e,this.actorID=r}static of(t,e,r){return new $n(t,e,r)}static fromStruct(t){return $n.of(BigInt(t.lamport),t.delimiter,t.actorID)}toIDString(){return`${this.lamport.toString()}:${this.actorID}:${this.delimiter}`}toStruct(){return{lamport:this.getLamportAsString(),delimiter:this.getDelimiter(),actorID:this.getActorID()}}toTestString(){return`${this.lamport.toString()}:${this.actorID.slice(-2)}:${this.delimiter}`}setActor(t){return new $n(this.lamport,this.delimiter,t)}getLamportAsString(){return this.lamport.toString()}getLamport(){return this.lamport}getDelimiter(){return this.delimiter}getActorID(){return this.actorID}after(t){return this.compare(t)>0}equals(t){return this.compare(t)===0}compare(t){if(this.lamport>t.lamport)return 1;if(t.lamport>this.lamport)return-1;const e=this.actorID.localeCompare(t.actorID);return e!==0?e:this.delimiter>t.delimiter?1:t.delimiter>this.delimiter?-1:0}}const Jy=0n,ox=0,$y=9223372036854775807n,ll=new $n(Jy,ox,fp);function xr(n){return n.replace(/["'\\\n\r\f\b\t\u2028\u2029]/g,function(t){switch(t){case'"':case"\\":return"\\"+t;case`
`:return"\\n";case"\r":return"\\r";case"\f":return"\\f";case"\b":return"\\b";case"	":return"\\t";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:return t}})}class dc{constructor(t){y(this,"createdAt");y(this,"movedAt");y(this,"removedAt");this.createdAt=t}getCreatedAt(){return this.createdAt}getID(){return this.createdAt}getMovedAt(){return this.movedAt}getRemovedAt(){return this.removedAt}getPositionedAt(){return this.movedAt?this.movedAt:this.createdAt}setCreatedAt(t){this.createdAt=t}setMovedAt(t){return!this.movedAt||t&&t.after(this.movedAt)?(this.movedAt=t,!0):!1}setRemovedAt(t){this.removedAt=t}remove(t){return t&&t.after(this.createdAt)&&(!this.removedAt||t.after(this.removedAt))?(this.removedAt=t,!0):!1}isRemoved(){return!!this.removedAt}getMetaUsage(){let t=0;return this.getCreatedAt()&&(t+=Ar),this.getMovedAt()&&(t+=Ar),this.getRemovedAt()&&(t+=Ar),t}}class fa extends dc{constructor(t){super(t)}}class Ld{constructor(t,e){y(this,"strKey");y(this,"value");this.strKey=t,this.value=e}static of(t,e){return new Ld(t,e)}isRemoved(){return this.value.isRemoved()}getStrKey(){return this.strKey}getValue(){return this.value}remove(t){return this.value.remove(t)}}class ul{constructor(){y(this,"nodeMapByKey");y(this,"nodeMapByCreatedAt");this.nodeMapByKey=new Map,this.nodeMapByCreatedAt=new Map}static create(){return new ul}set(t,e,r){let a;const l=this.nodeMapByKey.get(t);l&&!l.isRemoved()&&l.remove(r)&&(a=l.getValue());const c=Ld.of(t,e);return this.nodeMapByCreatedAt.set(e.getCreatedAt().toIDString(),c),(!l||r.after(l.getValue().getPositionedAt()))&&(this.nodeMapByKey.set(t,c),e.setMovedAt(r)),a}delete(t,e){if(!this.nodeMapByCreatedAt.has(t.toIDString()))throw new j($.ErrInvalidArgument,`fail to find ${t.toIDString()}`);const r=this.nodeMapByCreatedAt.get(t.toIDString());return r.remove(e),r.getValue()}subPathOf(t){const e=this.nodeMapByCreatedAt.get(t.toIDString());if(e)return e.getStrKey()}purge(t){const e=this.nodeMapByCreatedAt.get(t.getCreatedAt().toIDString());if(!e)throw new j($.ErrInvalidArgument,`fail to find ${t.getCreatedAt().toIDString()}`);const r=this.nodeMapByKey.get(e.getStrKey());e===r&&this.nodeMapByKey.delete(r.getStrKey()),this.nodeMapByCreatedAt.delete(e.getValue().getCreatedAt().toIDString())}deleteByKey(t,e){const r=this.nodeMapByKey.get(t);if(r&&r.remove(e))return r.getValue()}has(t){const e=this.nodeMapByKey.get(t);return e?!e.isRemoved():!1}getByID(t){return this.nodeMapByCreatedAt.get(t.toIDString())}get(t){const e=this.nodeMapByKey.get(t);if(!(!e||e.isRemoved()))return e}deepcopy(){const t=ul.create();for(const[,e]of this.nodeMapByCreatedAt)t.nodeMapByCreatedAt.set(e.getValue().getCreatedAt().toIDString(),Ld.of(e.getStrKey(),e.getValue().deepcopy()));for(const[e,r]of this.nodeMapByKey)t.nodeMapByKey.set(e,t.nodeMapByCreatedAt.get(r.getValue().getCreatedAt().toIDString()));return t}*[Symbol.iterator](){for(const[,t]of this.nodeMapByCreatedAt)yield t}}class Ve extends fa{constructor(e,r){super(e);y(this,"memberNodes");this.memberNodes=r}static create(e,r){if(!r)return new Ve(e,ul.create());const a=ul.create();for(const[l,c]of Object.entries(r))a.set(l,c.deepcopy(),c.getCreatedAt());return new Ve(e,a)}subPathOf(e){return this.memberNodes.subPathOf(e)}purge(e){this.memberNodes.purge(e)}set(e,r,a){return this.memberNodes.set(e,r,a)}delete(e,r){return this.memberNodes.delete(e,r)}deleteByKey(e,r){return this.memberNodes.deleteByKey(e,r)}get(e){const r=this.memberNodes.get(e);return r==null?void 0:r.getValue()}getByID(e){const r=this.memberNodes.getByID(e);return r==null?void 0:r.getValue()}has(e){return this.memberNodes.has(e)}getDataSize(){return{data:0,meta:this.getMetaUsage()}}toJSON(){const e=[];for(const[r,a]of this)e.push(`"${xr(r)}":${a.toJSON()}`);return`{${e.join(",")}}`}toJS(){return JSON.parse(this.toJSON())}toJSForTest(){const e={};for(const[r,a]of this){const{createdAt:l,value:c,type:d}=a.toJSForTest();e[r]={key:r,createdAt:l,value:c,type:d}}return{createdAt:this.getCreatedAt().toTestString(),value:e,type:"YORKIE_OBJECT"}}getKeys(){const e=Array();for(const[r]of this)e.push(r);return e}toSortedJSON(){var a;const e=new Set;for(const[l]of this)e.add(l);const r=[];for(const l of Array.from(e).sort()){const c=(a=this.memberNodes.get(l))==null?void 0:a.getValue();r.push(`"${xr(l)}":${c.toSortedJSON()}`)}return`{${r.join(",")}}`}getRHT(){return this.memberNodes}deepcopy(){const e=Ve.create(this.getCreatedAt());return e.memberNodes=this.memberNodes.deepcopy(),e.setRemovedAt(this.getRemovedAt()),e.setMovedAt(this.getMovedAt()),e}getDescendants(e){for(const r of this.memberNodes){const a=r.getValue();if(e(a,this))return;a instanceof fa&&a.getDescendants(e)}}*[Symbol.iterator](){for(const e of this.memberNodes)e.isRemoved()||(yield[e.getStrKey(),e.getValue()])}}var ae=(n=>(n.Local="local",n.Remote="remote",n.UndoRedo="undoredo",n))(ae||{});class ar{constructor(t,e){y(this,"parentCreatedAt");y(this,"executedAt");this.parentCreatedAt=t,this.executedAt=e}getParentCreatedAt(){return this.parentCreatedAt}getExecutedAt(){if(!this.executedAt)throw new j($.ErrNotReady,"executedAt is not set yet");return this.executedAt}setActor(t){this.executedAt&&(this.executedAt=this.executedAt.setActor(t))}setExecutedAt(t){this.executedAt=t}}class lx{constructor(t){y(this,"value");y(this,"left");y(this,"right");y(this,"parent");y(this,"weight");this.value=t,this.initWeight()}getNodeString(){return`${this.weight}${this.value}`}getValue(){return this.value}getLeftWeight(){return this.hasLeft()?this.left.getWeight():0}getRightWeight(){return this.hasRight()?this.right.getWeight():0}getWeight(){return this.weight}getLeft(){return this.left}getRight(){return this.right}getParent(){return this.parent}hasLeft(){return!!this.left}hasRight(){return!!this.right}hasParent(){return!!this.parent}setLeft(t){this.left=t}setRight(t){this.right=t}setParent(t){this.parent=t}unlink(){this.parent=void 0,this.right=void 0,this.left=void 0}hasLinks(){return this.hasParent()||this.hasLeft()||this.hasRight()}increaseWeight(t){this.weight+=t}initWeight(){this.weight=this.getLength()}}class Zu{constructor(t){y(this,"root");this.root=t}get length(){return this.root?this.root.getWeight():0}find(t){if(!this.root||t<0)return[void 0,0];let e=this.root;for(;;)if(e.hasLeft()&&t<=e.getLeftWeight())e=e.getLeft();else if(e.hasRight()&&e.getLeftWeight()+e.getLength()<t)t-=e.getLeftWeight()+e.getLength(),e=e.getRight();else{t-=e.getLeftWeight();break}if(t>e.getLength())throw new j($.ErrInvalidArgument,`out of index range: pos: ${t} > node.length: ${e.getLength()}`);return this.splayNode(e),[e,t]}indexOf(t){return!t||t!==this.root&&!t.hasLinks()?-1:(this.splayNode(t),this.root.getLeftWeight())}getRoot(){return this.root}insert(t){return this.insertAfter(this.root,t)}insertAfter(t,e){return t?(this.splayNode(t),this.root=e,e.setRight(t.getRight()),t.hasRight()&&t.getRight().setParent(e),e.setLeft(t),t.setParent(e),t.setRight(),this.updateWeight(t),this.updateWeight(e),e):(this.root=e,e)}updateWeight(t){t.initWeight(),t.hasLeft()&&t.increaseWeight(t.getLeftWeight()),t.hasRight()&&t.increaseWeight(t.getRightWeight())}updateTreeWeight(t){for(;t;)this.updateWeight(t),t=t.getParent()}splayNode(t){if(t)for(;;)if(this.isLeftChild(t.getParent())&&this.isRightChild(t))this.rotateLeft(t),this.rotateRight(t);else if(this.isRightChild(t.getParent())&&this.isLeftChild(t))this.rotateRight(t),this.rotateLeft(t);else if(this.isLeftChild(t.getParent())&&this.isLeftChild(t))this.rotateRight(t.getParent()),this.rotateRight(t);else if(this.isRightChild(t.getParent())&&this.isRightChild(t))this.rotateLeft(t.getParent()),this.rotateLeft(t);else{this.isLeftChild(t)?this.rotateRight(t):this.isRightChild(t)&&this.rotateLeft(t),this.updateWeight(t);return}}delete(t){this.splayNode(t);const e=new Zu(t.getLeft());e.root&&e.root.setParent();const r=new Zu(t.getRight());if(r.root&&r.root.setParent(),e.root){const a=e.getRightmost();e.splayNode(a),e.root.setRight(r.root),r.root&&r.root.setParent(e.root),this.root=e.root}else this.root=r.root;t.unlink(),this.root&&this.updateWeight(this.root)}deleteRange(t,e){if(!e){this.splayNode(t),this.cutOffRight(t);return}this.splayNode(t),this.splayNode(e),e.getLeft()!=t&&this.rotateRight(t),this.cutOffRight(t)}cutOffRight(t){const e=[];this.traversePostorder(t.getRight(),e);for(const r of e)r.initWeight();this.updateTreeWeight(t)}toTestString(){const t=[];return this.traverseInorder(this.root,t),t.map(e=>`[${e.getWeight()},${e.getLength()}]${e.getValue()||""}`).join("")}checkWeight(){const t=[];this.traverseInorder(this.root,t);for(const e of t)if(e.getWeight()!=e.getLength()+e.getLeftWeight()+e.getRightWeight())return!1;return!0}getRightmost(){let t=this.root;for(;t.hasRight();)t=t.getRight();return t}traverseInorder(t,e){t&&(this.traverseInorder(t.getLeft(),e),e.push(t),this.traverseInorder(t.getRight(),e))}traversePostorder(t,e){t&&(this.traversePostorder(t.getLeft(),e),this.traversePostorder(t.getRight(),e),e.push(t))}rotateLeft(t){const e=t.getParent();e.hasParent()?e===e.getParent().getLeft()?e.getParent().setLeft(t):e.getParent().setRight(t):this.root=t,t.setParent(e.getParent()),e.setRight(t.getLeft()),e.hasRight()&&e.getRight().setParent(e),t.setLeft(e),t.getLeft().setParent(t),this.updateWeight(e),this.updateWeight(t)}rotateRight(t){const e=t.getParent();e.hasParent()?e===e.getParent().getLeft()?e.getParent().setLeft(t):e.getParent().setRight(t):this.root=t,t.setParent(e.getParent()),e.setLeft(t.getRight()),e.hasLeft()&&e.getLeft().setParent(e),t.setRight(e),t.getRight().setParent(t),this.updateWeight(e),this.updateWeight(t)}isLeftChild(t){return t&&t.hasParent()?t.getParent().getLeft()===t:!1}isRightChild(t){return t&&t.hasParent()?t.getParent().getRight()===t:!1}}/**
 * @license
 * Copyright 2009 The Closure Library Authors
 * Copyright 2020 Daniel Wirtz / The long.js Authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * SPDX-License-Identifier: Apache-2.0
 */var Pn=null;try{Pn=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function Pt(n,t,e){this.low=n|0,this.high=t|0,this.unsigned=!!e}Pt.prototype.__isLong__;Object.defineProperty(Pt.prototype,"__isLong__",{value:!0});function Ye(n){return(n&&n.__isLong__)===!0}function uS(n){var t=Math.clz32(n&-n);return n?31-t:t}Pt.isLong=Ye;var cS={},fS={};function ro(n,t){var e,r,a;return t?(n>>>=0,(a=0<=n&&n<256)&&(r=fS[n],r)?r:(e=jt(n,0,!0),a&&(fS[n]=e),e)):(n|=0,(a=-128<=n&&n<128)&&(r=cS[n],r)?r:(e=jt(n,n<0?-1:0,!1),a&&(cS[n]=e),e))}Pt.fromInt=ro;function Jn(n,t){if(isNaN(n))return t?Ss:er;if(t){if(n<0)return Ss;if(n>=ux)return dx}else{if(n<=-hS)return nn;if(n+1>=hS)return fx}return n<0?Jn(-n,t).neg():jt(n%cl|0,n/cl|0,t)}Pt.fromNumber=Jn;function jt(n,t,e){return new Pt(n,t,e)}Pt.fromBits=jt;var _d=Math.pow;function dp(n,t,e){if(n.length===0)throw Error("empty string");if(typeof t=="number"?(e=t,t=!1):t=!!t,n==="NaN"||n==="Infinity"||n==="+Infinity"||n==="-Infinity")return t?Ss:er;if(e=e||10,e<2||36<e)throw RangeError("radix");var r;if((r=n.indexOf("-"))>0)throw Error("interior hyphen");if(r===0)return dp(n.substring(1),t,e).neg();for(var a=Jn(_d(e,8)),l=er,c=0;c<n.length;c+=8){var d=Math.min(8,n.length-c),h=parseInt(n.substring(c,c+d),e);if(d<8){var g=Jn(_d(e,d));l=l.mul(g).add(Jn(h))}else l=l.mul(a),l=l.add(Jn(h))}return l.unsigned=t,l}Pt.fromString=dp;function Hn(n,t){return typeof n=="number"?Jn(n,t):typeof n=="string"?dp(n,t):jt(n.low,n.high,typeof t=="boolean"?t:n.unsigned)}Pt.fromValue=Hn;var dS=65536,gC=1<<24,cl=dS*dS,ux=cl*cl,hS=ux/2,gS=ro(gC),er=ro(0);Pt.ZERO=er;var Ss=ro(0,!0);Pt.UZERO=Ss;var Zo=ro(1);Pt.ONE=Zo;var cx=ro(1,!0);Pt.UONE=cx;var Hy=ro(-1);Pt.NEG_ONE=Hy;var fx=jt(-1,2147483647,!1);Pt.MAX_VALUE=fx;var dx=jt(-1,-1,!0);Pt.MAX_UNSIGNED_VALUE=dx;var nn=jt(0,-2147483648,!1);Pt.MIN_VALUE=nn;var ht=Pt.prototype;ht.toInt=function(){return this.unsigned?this.low>>>0:this.low};ht.toNumber=function(){return this.unsigned?(this.high>>>0)*cl+(this.low>>>0):this.high*cl+(this.low>>>0)};ht.toString=function(t){if(t=t||10,t<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(nn)){var e=Jn(t),r=this.div(e),a=r.mul(e).sub(this);return r.toString(t)+a.toInt().toString(t)}else return"-"+this.neg().toString(t);for(var l=Jn(_d(t,6),this.unsigned),c=this,d="";;){var h=c.div(l),g=c.sub(h.mul(l)).toInt()>>>0,p=g.toString(t);if(c=h,c.isZero())return p+d;for(;p.length<6;)p="0"+p;d=""+p+d}};ht.getHighBits=function(){return this.high};ht.getHighBitsUnsigned=function(){return this.high>>>0};ht.getLowBits=function(){return this.low};ht.getLowBitsUnsigned=function(){return this.low>>>0};ht.getNumBitsAbs=function(){if(this.isNegative())return this.eq(nn)?64:this.neg().getNumBitsAbs();for(var t=this.high!=0?this.high:this.low,e=31;e>0&&(t&1<<e)==0;e--);return this.high!=0?e+33:e+1};ht.isSafeInteger=function(){var t=this.high>>21;return t?this.unsigned?!1:t===-1&&!(this.low===0&&this.high===-2097152):!0};ht.isZero=function(){return this.high===0&&this.low===0};ht.eqz=ht.isZero;ht.isNegative=function(){return!this.unsigned&&this.high<0};ht.isPositive=function(){return this.unsigned||this.high>=0};ht.isOdd=function(){return(this.low&1)===1};ht.isEven=function(){return(this.low&1)===0};ht.equals=function(t){return Ye(t)||(t=Hn(t)),this.unsigned!==t.unsigned&&this.high>>>31===1&&t.high>>>31===1?!1:this.high===t.high&&this.low===t.low};ht.eq=ht.equals;ht.notEquals=function(t){return!this.eq(t)};ht.neq=ht.notEquals;ht.ne=ht.notEquals;ht.lessThan=function(t){return this.comp(t)<0};ht.lt=ht.lessThan;ht.lessThanOrEqual=function(t){return this.comp(t)<=0};ht.lte=ht.lessThanOrEqual;ht.le=ht.lessThanOrEqual;ht.greaterThan=function(t){return this.comp(t)>0};ht.gt=ht.greaterThan;ht.greaterThanOrEqual=function(t){return this.comp(t)>=0};ht.gte=ht.greaterThanOrEqual;ht.ge=ht.greaterThanOrEqual;ht.compare=function(t){if(Ye(t)||(t=Hn(t)),this.eq(t))return 0;var e=this.isNegative(),r=t.isNegative();return e&&!r?-1:!e&&r?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1};ht.comp=ht.compare;ht.negate=function(){return!this.unsigned&&this.eq(nn)?nn:this.not().add(Zo)};ht.neg=ht.negate;ht.add=function(t){Ye(t)||(t=Hn(t));var e=this.high>>>16,r=this.high&65535,a=this.low>>>16,l=this.low&65535,c=t.high>>>16,d=t.high&65535,h=t.low>>>16,g=t.low&65535,p=0,w=0,v=0,b=0;return b+=l+g,v+=b>>>16,b&=65535,v+=a+h,w+=v>>>16,v&=65535,w+=r+d,p+=w>>>16,w&=65535,p+=e+c,p&=65535,jt(v<<16|b,p<<16|w,this.unsigned)};ht.subtract=function(t){return Ye(t)||(t=Hn(t)),this.add(t.neg())};ht.sub=ht.subtract;ht.multiply=function(t){if(this.isZero())return this;if(Ye(t)||(t=Hn(t)),Pn){var e=Pn.mul(this.low,this.high,t.low,t.high);return jt(e,Pn.get_high(),this.unsigned)}if(t.isZero())return this.unsigned?Ss:er;if(this.eq(nn))return t.isOdd()?nn:er;if(t.eq(nn))return this.isOdd()?nn:er;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(gS)&&t.lt(gS))return Jn(this.toNumber()*t.toNumber(),this.unsigned);var r=this.high>>>16,a=this.high&65535,l=this.low>>>16,c=this.low&65535,d=t.high>>>16,h=t.high&65535,g=t.low>>>16,p=t.low&65535,w=0,v=0,b=0,T=0;return T+=c*p,b+=T>>>16,T&=65535,b+=l*p,v+=b>>>16,b&=65535,b+=c*g,v+=b>>>16,b&=65535,v+=a*p,w+=v>>>16,v&=65535,v+=l*g,w+=v>>>16,v&=65535,v+=c*h,w+=v>>>16,v&=65535,w+=r*p+a*g+l*h+c*d,w&=65535,jt(b<<16|T,w<<16|v,this.unsigned)};ht.mul=ht.multiply;ht.divide=function(t){if(Ye(t)||(t=Hn(t)),t.isZero())throw Error("division by zero");if(Pn){if(!this.unsigned&&this.high===-2147483648&&t.low===-1&&t.high===-1)return this;var e=(this.unsigned?Pn.div_u:Pn.div_s)(this.low,this.high,t.low,t.high);return jt(e,Pn.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?Ss:er;var r,a,l;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return Ss;if(t.gt(this.shru(1)))return cx;l=Ss}else{if(this.eq(nn)){if(t.eq(Zo)||t.eq(Hy))return nn;if(t.eq(nn))return Zo;var c=this.shr(1);return r=c.div(t).shl(1),r.eq(er)?t.isNegative()?Zo:Hy:(a=this.sub(t.mul(r)),l=r.add(a.div(t)),l)}else if(t.eq(nn))return this.unsigned?Ss:er;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();l=er}for(a=this;a.gte(t);){r=Math.max(1,Math.floor(a.toNumber()/t.toNumber()));for(var d=Math.ceil(Math.log(r)/Math.LN2),h=d<=48?1:_d(2,d-48),g=Jn(r),p=g.mul(t);p.isNegative()||p.gt(a);)r-=h,g=Jn(r,this.unsigned),p=g.mul(t);g.isZero()&&(g=Zo),l=l.add(g),a=a.sub(p)}return l};ht.div=ht.divide;ht.modulo=function(t){if(Ye(t)||(t=Hn(t)),Pn){var e=(this.unsigned?Pn.rem_u:Pn.rem_s)(this.low,this.high,t.low,t.high);return jt(e,Pn.get_high(),this.unsigned)}return this.sub(this.div(t).mul(t))};ht.mod=ht.modulo;ht.rem=ht.modulo;ht.not=function(){return jt(~this.low,~this.high,this.unsigned)};ht.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32};ht.clz=ht.countLeadingZeros;ht.countTrailingZeros=function(){return this.low?uS(this.low):uS(this.high)+32};ht.ctz=ht.countTrailingZeros;ht.and=function(t){return Ye(t)||(t=Hn(t)),jt(this.low&t.low,this.high&t.high,this.unsigned)};ht.or=function(t){return Ye(t)||(t=Hn(t)),jt(this.low|t.low,this.high|t.high,this.unsigned)};ht.xor=function(t){return Ye(t)||(t=Hn(t)),jt(this.low^t.low,this.high^t.high,this.unsigned)};ht.shiftLeft=function(t){return Ye(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?jt(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):jt(0,this.low<<t-32,this.unsigned)};ht.shl=ht.shiftLeft;ht.shiftRight=function(t){return Ye(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?jt(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):jt(this.high>>t-32,this.high>=0?0:-1,this.unsigned)};ht.shr=ht.shiftRight;ht.shiftRightUnsigned=function(t){return Ye(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?jt(this.low>>>t|this.high<<32-t,this.high>>>t,this.unsigned):t===32?jt(this.high,0,this.unsigned):jt(this.high>>>t-32,0,this.unsigned)};ht.shru=ht.shiftRightUnsigned;ht.shr_u=ht.shiftRightUnsigned;ht.rotateLeft=function(t){var e;return Ye(t)&&(t=t.toInt()),(t&=63)===0?this:t===32?jt(this.high,this.low,this.unsigned):t<32?(e=32-t,jt(this.low<<t|this.high>>>e,this.high<<t|this.low>>>e,this.unsigned)):(t-=32,e=32-t,jt(this.high<<t|this.low>>>e,this.low<<t|this.high>>>e,this.unsigned))};ht.rotl=ht.rotateLeft;ht.rotateRight=function(t){var e;return Ye(t)&&(t=t.toInt()),(t&=63)===0?this:t===32?jt(this.high,this.low,this.unsigned):t<32?(e=32-t,jt(this.high<<e|this.low>>>t,this.low<<e|this.high>>>t,this.unsigned)):(t-=32,e=32-t,jt(this.low<<e|this.high>>>t,this.high<<e|this.low>>>t,this.unsigned))};ht.rotr=ht.rotateRight;ht.toSigned=function(){return this.unsigned?jt(this.low,this.high,!1):this};ht.toUnsigned=function(){return this.unsigned?this:jt(this.low,this.high,!0)};ht.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()};ht.toBytesLE=function(){var t=this.high,e=this.low;return[e&255,e>>>8&255,e>>>16&255,e>>>24,t&255,t>>>8&255,t>>>16&255,t>>>24]};ht.toBytesBE=function(){var t=this.high,e=this.low;return[t>>>24,t>>>16&255,t>>>8&255,t&255,e>>>24,e>>>16&255,e>>>8&255,e&255]};Pt.fromBytes=function(t,e,r){return r?Pt.fromBytesLE(t,e):Pt.fromBytesBE(t,e)};Pt.fromBytesLE=function(t,e){return new Pt(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,e)};Pt.fromBytesBE=function(t,e){return new Pt(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],e)};typeof BigInt=="function"&&(Pt.fromBigInt=function(t,e){var r=Number(BigInt.asIntN(32,t)),a=Number(BigInt.asIntN(32,t>>BigInt(32)));return jt(r,a,e)},Pt.fromValue=function(t,e){return typeof t=="bigint"?Pt.fromBigInt(t,e):Hn(t,e)},ht.toBigInt=function(){var t=BigInt(this.low>>>0),e=BigInt(this.unsigned?this.high>>>0:this.high);return e<<BigInt(32)|t});var re=(n=>(n[n.Null=0]="Null",n[n.Boolean=1]="Boolean",n[n.Integer=2]="Integer",n[n.Long=3]="Long",n[n.Double=4]="Double",n[n.String=5]="String",n[n.Bytes=6]="Bytes",n[n.Date=7]="Date",n))(re||{});class ce extends dc{constructor(e,r){super(r);y(this,"valueType");y(this,"value");this.valueType=ce.getPrimitiveType(e),this.value=e===void 0?null:e}static of(e,r){return new ce(e,r)}static valueFromBytes(e,r){switch(e){case 0:return null;case 1:return!!r[0];case 2:return r[0]|r[1]<<8|r[2]<<16|r[3]<<24;case 4:{const a=new DataView(r.buffer);return r.forEach(function(l,c){a.setUint8(c,l)}),a.getFloat64(0,!0)}case 5:return new TextDecoder("utf-8").decode(r);case 3:return Pt.fromBytesLE(Array.from(r));case 6:return r;case 7:return new Date(Pt.fromBytesLE(Array.from(r),!0).toNumber());default:throw new j($.ErrUnimplemented,`unimplemented type: ${e}`)}}getValueSize(){switch(this.valueType){case 0:return 8;case 1:return 4;case 2:return 4;case 3:return 8;case 4:return 8;case 5:return this.value.length*2;case 6:return this.value.length;case 7:return 8;default:throw new j($.ErrUnimplemented,`unimplemented type: ${this.valueType}`)}}getDataSize(){return{data:this.getValueSize(),meta:this.getMetaUsage()}}toJSON(){return this.valueType===5?`"${xr(this.value)}"`:`${this.value}`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:this.value,type:"YORKIE_PRIMITIVE"}}deepcopy(){const e=ce.of(this.value,this.getCreatedAt());return e.setMovedAt(this.getMovedAt()),e.setRemovedAt(this.getRemovedAt()),e}getType(){return this.valueType}static getPrimitiveType(e){switch(typeof e){case"undefined":return 0;case"boolean":return 1;case"number":return this.isInteger(e)?2:4;case"string":return 5;case"object":if(e===null)return 0;if(e instanceof Pt)return 3;if(e instanceof Uint8Array)return 6;if(e instanceof Date)return 7}}static isSupport(e){return ce.getPrimitiveType(e)!==void 0}static isInteger(e){return e%1===0}isNumericType(){const e=this.valueType;return e===2||e===3||e===4}getValue(){return this.value}toBytes(){switch(this.valueType){case 0:return new Uint8Array;case 1:return this.value?new Uint8Array([1]):new Uint8Array([0]);case 2:{const e=this.value;return new Uint8Array([e&255,e>>8&255,e>>16&255,e>>24&255])}case 4:{const e=this.value,r=new Uint8Array(8);return new DataView(r.buffer).setFloat64(0,e,!0),r}case 5:return new TextEncoder().encode(this.value);case 3:{const r=this.value.toBytesLE();return Uint8Array.from(r)}case 6:return this.value;case 7:{const e=this.value,r=Pt.fromNumber(e.getTime(),!0).toBytesLE();return Uint8Array.from(r)}default:throw new j($.ErrUnimplemented,`unimplemented type: ${this.valueType}`)}}}class Ud extends lx{constructor(e){super(e);y(this,"prev");y(this,"next");y(this,"movedFrom");this.value=e}static createAfter(e,r){const a=new Ud(r),l=e.next;return e.next=a,a.prev=e,a.next=l,l&&(l.prev=a),a}remove(e){return this.value.remove(e)}getCreatedAt(){return this.value.getCreatedAt()}getPositionedAt(){return this.value.getPositionedAt()}release(){this.prev&&(this.prev.next=this.next),this.next&&(this.next.prev=this.prev),this.prev=void 0,this.next=void 0}getLength(){return this.value.isRemoved()?0:1}getPrev(){return this.prev}getNext(){return this.next}getMovedFrom(){return this.movedFrom}setMovedFrom(e){this.movedFrom=e}getValue(){return this.value}isRemoved(){return this.value.isRemoved()}}class Qu{constructor(){y(this,"dummyHead");y(this,"last");y(this,"nodeMapByIndex");y(this,"nodeMapByCreatedAt");const t=ce.of(0,ll);t.setRemovedAt(ll),this.dummyHead=new Ud(t),this.last=this.dummyHead,this.nodeMapByIndex=new Zu,this.nodeMapByCreatedAt=new Map,this.nodeMapByIndex.insert(this.dummyHead),this.nodeMapByCreatedAt.set(this.dummyHead.getCreatedAt().toIDString(),this.dummyHead)}static create(){return new Qu}get length(){return this.nodeMapByIndex.length}findNextBeforeExecutedAt(t,e){let r=this.nodeMapByCreatedAt.get(t.toIDString());if(!r)throw new j($.ErrInvalidArgument,`cant find the given node: ${t.toIDString()}`);for(;r.getValue().getMovedAt()&&r.getValue().getMovedAt().after(e)&&r.getMovedFrom();)r=r.getMovedFrom();for(;r.getNext()&&r.getNext().getPositionedAt().after(e);)r=r.getNext();return r}release(t){this.last===t&&(this.last=t.getPrev()),t.release(),this.nodeMapByIndex.delete(t),this.nodeMapByCreatedAt.delete(t.getValue().getCreatedAt().toIDString())}insertAfter(t,e,r=e.getCreatedAt()){const a=this.findNextBeforeExecutedAt(t,r),l=Ud.createAfter(a,e);return a===this.last&&(this.last=l),this.nodeMapByIndex.insertAfter(a,l),this.nodeMapByCreatedAt.set(l.getCreatedAt().toIDString(),l),l}moveAfter(t,e,r){let a=this.nodeMapByCreatedAt.get(t.toIDString());if(!a)throw new j($.ErrInvalidArgument,`cant find the given node: ${t.toIDString()}`);let l=this.nodeMapByCreatedAt.get(e.toIDString());if(!l)throw new j($.ErrInvalidArgument,`cant find the given node: ${e.toIDString()}`);if(a!==l&&r.after(l.getPositionedAt())){const c=l.getPrev();let d=l.getNext();for(this.release(l),l=this.insertAfter(a.getCreatedAt(),l.getValue(),r),l.getValue().setMovedAt(r),l.setMovedFrom(c);d&&d.getPositionedAt().after(r);)a=l,l=d,d=l.getNext(),this.release(l),l=this.insertAfter(a.getCreatedAt(),l.getValue(),r),l.getValue().setMovedAt(r),l.setMovedFrom(c)}}insert(t){this.insertAfter(this.last.getCreatedAt(),t)}getByID(t){return this.nodeMapByCreatedAt.get(t.toIDString())}subPathOf(t){const e=this.nodeMapByCreatedAt.get(t.toIDString());if(e)return String(this.nodeMapByIndex.indexOf(e))}purge(t){const e=this.nodeMapByCreatedAt.get(t.getCreatedAt().toIDString());if(!e)throw new j($.ErrInvalidArgument,`fail to find the given createdAt: ${t.getCreatedAt().toIDString()}`);this.release(e)}getByIndex(t){if(t>=this.length)return;const[e,r]=this.nodeMapByIndex.find(t);let a=e;if(t===0&&e===this.dummyHead||r>0)do a&&(a=a.getNext());while(a&&a.isRemoved());return a}getPrevCreatedAt(t){let e=this.nodeMapByCreatedAt.get(t.toIDString());do e=e.getPrev();while(this.dummyHead!==e&&e.isRemoved());return e.getValue().getCreatedAt()}delete(t,e){const r=this.nodeMapByCreatedAt.get(t.toIDString()),a=r.isRemoved();return r.remove(e)&&!a&&this.nodeMapByIndex.splayNode(r),r.getValue()}set(t,e,r){const a=this.nodeMapByCreatedAt.get(t.toIDString());if(!a)throw new j($.ErrInvalidArgument,`cant find the given node: ${t.toIDString()}`);return this.insertAfter(a.getCreatedAt(),e,r),this.delete(t,r)}deleteByIndex(t,e){const r=this.getByIndex(t);if(r)return r.remove(e)&&this.nodeMapByIndex.splayNode(r),r.getValue()}getHead(){return this.dummyHead.getValue()}getLast(){return this.last.getValue()}getLastCreatedAt(){return this.last.getCreatedAt()}toTestString(){const t=[];for(const e of this){const r=`${e.getCreatedAt().toIDString()}:${e.getValue().toJSON()}`;e.isRemoved()?t.push(`{${r}}`):t.push(`[${r}]`)}return t.join("")}*[Symbol.iterator](){let t=this.dummyHead.getNext();for(;t;)yield t,t=t.getNext()}}class je extends fa{constructor(e,r){super(e);y(this,"elements");this.elements=r}static create(e,r){if(!r)return new je(e,Qu.create());const a=Qu.create();for(const l of r)a.insertAfter(a.getLastCreatedAt(),l.deepcopy());return new je(e,a)}subPathOf(e){return this.elements.subPathOf(e)}purge(e){this.elements.purge(e)}insertAfter(e,r,a){this.elements.insertAfter(e,r,a)}moveAfter(e,r,a){this.elements.moveAfter(e,r,a)}get(e){const r=this.elements.getByIndex(e);return r==null?void 0:r.getValue()}getByID(e){const r=this.elements.getByID(e);return r==null?void 0:r.getValue()}getHead(){return this.elements.getHead()}getLast(){return this.elements.getLast()}getPrevCreatedAt(e){return this.elements.getPrevCreatedAt(e)}delete(e,r){return this.elements.delete(e,r)}deleteByIndex(e,r){return this.elements.deleteByIndex(e,r)}set(e,r,a){return this.elements.set(e,r,a)}getLastCreatedAt(){return this.elements.getLastCreatedAt()}get length(){return this.elements.length}*[Symbol.iterator](){for(const e of this.elements)e.isRemoved()||(yield e.getValue())}toTestString(){return this.elements.toTestString()}getDescendants(e){for(const r of this.elements){const a=r.getValue();if(e(a,this))return;a instanceof fa&&a.getDescendants(e)}}getDataSize(){return{data:0,meta:this.getMetaUsage()}}toJSON(){const e=[];for(const r of this)e.push(r.toJSON());return`[${e.join(",")}]`}toJS(){return JSON.parse(this.toJSON())}toJSForTest(){const e={};for(let r=0;r<this.length;r++){const{createdAt:a,value:l,type:c}=this.get(r).toJSForTest();e[r]={key:String(r),createdAt:a,value:l,type:c}}return{createdAt:this.getCreatedAt().toTestString(),value:e,type:"YORKIE_ARRAY"}}toSortedJSON(){return this.toJSON()}getElements(){return this.elements}deepcopy(){const e=je.create(this.getCreatedAt());for(const r of this.elements)e.elements.insertAfter(e.getLastCreatedAt(),r.getValue().deepcopy());return e.setRemovedAt(this.getRemovedAt()),e.setMovedAt(this.getMovedAt()),e}}class ma extends ar{constructor(e,r,a,l){super(e,l);y(this,"prevCreatedAt");y(this,"value");this.prevCreatedAt=r,this.value=a}static create(e,r,a,l){return new ma(e,r,a,l)}execute(e){const r=e.findByCreatedAt(this.getParentCreatedAt());if(!r)throw new j($.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(r instanceof je))throw new j($.ErrInvalidArgument,"fail to execute, only array can execute add");const a=r,l=this.value.deepcopy();return a.insertAfter(this.prevCreatedAt,l,this.getExecutedAt()),e.registerElement(l,a),{opInfos:[{type:"add",path:e.createPath(this.getParentCreatedAt()),index:Number(a.subPathOf(this.getEffectedCreatedAt()))}],reverseOp:this.toReverseOperation()}}toReverseOperation(){return Dr.create(this.getParentCreatedAt(),this.value.getCreatedAt())}getEffectedCreatedAt(){return this.value.getCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.ADD.${this.value.toJSON()}`}getPrevCreatedAt(){return this.prevCreatedAt}getValue(){return this.value}setPrevCreatedAt(e){this.prevCreatedAt=e}}class Dr extends ar{constructor(e,r,a){super(e,a);y(this,"createdAt");this.createdAt=r}static create(e,r,a){return new Dr(e,r,a)}execute(e,r){var g;const a=e.findByCreatedAt(this.getParentCreatedAt());if(!a)throw new j($.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(a instanceof fa))throw new j($.ErrInvalidArgument,`only object and array can execute remove: ${a}`);if(r===ae.UndoRedo){let p=a.getByID(this.createdAt);for(;p;){if(p.getRemovedAt())return;p=(g=e.findElementPairByCreatedAt(p.getCreatedAt()))==null?void 0:g.parent}}const l=a.subPathOf(this.createdAt),c=this.toReverseOperation(a),d=a.delete(this.createdAt,this.getExecutedAt());return e.registerRemovedElement(d),{opInfos:a instanceof je?[{type:"remove",path:e.createPath(this.getParentCreatedAt()),index:Number(l)}]:[{type:"remove",path:e.createPath(this.getParentCreatedAt()),key:l}],reverseOp:c}}toReverseOperation(e){if(e instanceof je){const r=e.getByID(this.createdAt);if(r!==void 0){const a=e.getPrevCreatedAt(this.createdAt);return ma.create(this.getParentCreatedAt(),a,r.deepcopy())}}if(e instanceof Ve){const r=e.subPathOf(this.createdAt);if(r!==void 0){const a=e.get(r);if(a!==void 0)return Wa.create(r,a.deepcopy(),this.getParentCreatedAt())}}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.REMOVE.${this.createdAt.toTestString()}`}getCreatedAt(){return this.createdAt}setCreatedAt(e){this.createdAt=e}}class Wa extends ar{constructor(e,r,a,l){super(a,l);y(this,"key");y(this,"value");this.key=e,this.value=r}static create(e,r,a,l){return new Wa(e,r,a,l)}execute(e,r){var g;const a=e.findByCreatedAt(this.getParentCreatedAt());if(!a)throw new j($.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(a instanceof Ve))throw new j($.ErrInvalidArgument,"fail to execute, only object can execute set");if(r===ae.UndoRedo){let p=a;for(;p;){if(p.getRemovedAt())return;p=(g=e.findElementPairByCreatedAt(p.getCreatedAt()))==null?void 0:g.parent}}const l=a.get(this.key),c=this.toReverseOperation(l),d=this.value.deepcopy(),h=a.set(this.key,d,this.getExecutedAt());return r===ae.UndoRedo&&e.findByCreatedAt(d.getCreatedAt())&&e.deregisterElement(d),e.registerElement(d,a),h&&e.registerRemovedElement(h),{opInfos:[{type:"set",path:e.createPath(this.getParentCreatedAt()),key:this.key}],reverseOp:c}}toReverseOperation(e){let r=Dr.create(this.getParentCreatedAt(),this.value.getCreatedAt());return e!==void 0&&!e.isRemoved()&&(r=Wa.create(this.key,e.deepcopy(),this.getParentCreatedAt())),r}getEffectedCreatedAt(){return this.value.getCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.SET.${this.key}=${this.value.toSortedJSON()}`}getKey(){return this.key}getValue(){return this.value}}class nr extends ar{constructor(e,r,a,l){super(e,l);y(this,"prevCreatedAt");y(this,"createdAt");this.prevCreatedAt=r,this.createdAt=a}static create(e,r,a,l){return new nr(e,r,a,l)}execute(e){const r=e.findByCreatedAt(this.getParentCreatedAt());if(!r)throw new j($.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(r instanceof je))throw new j($.ErrInvalidArgument,"fail to execute, only array can execute move");const a=r,l=this.toReverseOperation(a),c=Number(a.subPathOf(this.createdAt));a.moveAfter(this.prevCreatedAt,this.createdAt,this.getExecutedAt());const d=Number(a.subPathOf(this.createdAt));return{opInfos:[{type:"move",path:e.createPath(this.getParentCreatedAt()),index:d,previousIndex:c}],reverseOp:l}}toReverseOperation(e){const r=e.getPrevCreatedAt(this.createdAt);return nr.create(this.getParentCreatedAt(),r,this.createdAt)}getEffectedCreatedAt(){return this.createdAt}toTestString(){return`${this.getParentCreatedAt().toTestString()}.MOVE`}getPrevCreatedAt(){return this.prevCreatedAt}getCreatedAt(){return this.createdAt}setPrevCreatedAt(e){this.prevCreatedAt=e}setCreatedAt(e){this.createdAt=e}}class ua{constructor(t,e,r,a){y(this,"key");y(this,"value");y(this,"updatedAt");y(this,"_isRemoved");this.key=t,this.value=e,this.updatedAt=r,this._isRemoved=a}static of(t,e,r,a){return new ua(t,e,r,a)}getKey(){return this.key}getValue(){return this.value}getUpdatedAt(){return this.updatedAt}isRemoved(){return this._isRemoved}toIDString(){return`${this.updatedAt.toIDString()}:${this.key}`}getRemovedAt(){if(this._isRemoved)return this.updatedAt}getDataSize(){return{data:(this.key.length+this.value.length)*2,meta:Ar}}}class Es{constructor(){y(this,"nodeMapByKey");y(this,"numberOfRemovedElement");this.nodeMapByKey=new Map,this.numberOfRemovedElement=0}static create(){return new Es}getNodeMapByKey(){return this.nodeMapByKey}set(t,e,r){const a=this.nodeMapByKey.get(t);if(a&&a.isRemoved()&&r.after(a.getUpdatedAt())&&(this.numberOfRemovedElement-=1),a===void 0||r.after(a.getUpdatedAt())){const l=ua.of(t,e,r,!1);return this.nodeMapByKey.set(t,l),a!==void 0&&a.isRemoved()?[a,l]:[void 0,l]}return a.isRemoved()?[a,void 0]:[void 0,void 0]}setInternal(t,e,r,a){const l=ua.of(t,e,r,a);this.nodeMapByKey.set(t,l),a&&this.numberOfRemovedElement++}remove(t,e){const r=this.nodeMapByKey.get(t),a=[];if(r===void 0||e.after(r.getUpdatedAt())){if(r===void 0){this.numberOfRemovedElement+=1;const d=ua.of(t,"",e,!0);return this.nodeMapByKey.set(t,d),a.push(d),a}const l=r.isRemoved();l||(this.numberOfRemovedElement+=1),l&&a.push(r);const c=ua.of(t,r.getValue(),e,!0);return this.nodeMapByKey.set(t,c),a.push(c),a}return a}has(t){if(this.nodeMapByKey.has(t)){const e=this.nodeMapByKey.get(t);return e!==void 0&&!e.isRemoved()}return!1}get(t){if(this.nodeMapByKey.has(t))return this.nodeMapByKey.get(t).getValue()}deepcopy(){const t=new Es;for(const[,e]of this.nodeMapByKey)t.setInternal(e.getKey(),e.getValue(),e.getUpdatedAt(),e.isRemoved());return t}toJSON(){if(!this.size())return"{}";const t=[];for(const[e,r]of this.nodeMapByKey)r.isRemoved()||t.push(`"${xr(e)}":"${xr(r.getValue())}"`);return`{${t.join(",")}}`}size(){return this.nodeMapByKey.size-this.numberOfRemovedElement}toObject(){const t={};for(const[e,r]of this.nodeMapByKey)r.isRemoved()||(t[e]=r.getValue());return t}*[Symbol.iterator](){for(const[,t]of this.nodeMapByKey)yield t}purge(t){const e=this.nodeMapByKey.get(t.getKey());e==null||e.toIDString()!=t.toIDString()||(this.nodeMapByKey.delete(t.getKey()),this.numberOfRemovedElement--)}}function Fn(n){if(n instanceof Map){const t=Array.from(n);return new Map(JSON.parse(JSON.stringify(t)))}return JSON.parse(JSON.stringify(n))}const hx=n=>n?Object.entries(n).length===0:!0,fl=n=>{const t={};for(const[e,r]of Object.entries(n))t[e]=JSON.stringify(r);return t},Ts=n=>{const t={};for(const[e,r]of Object.entries(n))t[e]=JSON.parse(r);return t};function mC(n){return n?mS(n.live)+mS(n.gc):0}function mS(n){return n.data+n.meta}function qe(n,...t){for(const e of t)n.data+=e.data,n.meta+=e.meta}function ja(n,t){n.data-=t.data,n.meta-=t.meta}class Wu{constructor(t){y(this,"attributes");y(this,"content");this.attributes=Es.create(),this.content=t}static create(t){return new Wu(t)}get length(){return this.content.length}substring(t,e){const r=new Wu(this.content.substring(t,e));return r.attributes=this.attributes.deepcopy(),r}setAttr(t,e,r){return this.attributes.set(t,e,r)}getAttrs(){return this.attributes}toString(){return this.content}getDataSize(){const t={data:0,meta:0};t.data+=this.content.length*2;for(const e of this.attributes){const r=e.getDataSize();t.meta+=r.meta,t.data+=r.data}return t}toJSON(){const t=xr(this.content),e=this.attributes.toObject(),r=[];for(const[a,l]of Object.entries(e)){const c=JSON.parse(l),d=typeof c=="string"?`"${xr(a)}":"${xr(c)}"`:`"${xr(a)}":${String(c)}`;r.push(d)}return r.sort(),r.length===0?`{"val":"${t}"}`:`{"attrs":{${r.join(",")}},"val":"${t}"}`}getAttributes(){return this.attributes.toObject()}getContent(){return this.content}purge(t){this.attributes&&t instanceof ua&&this.attributes.purge(t)}getGCPairs(){const t=[];for(const e of this.attributes)e.getRemovedAt()&&t.push({parent:this,child:e});return t}}class pn extends dc{constructor(e,r){super(r);y(this,"rgaTreeSplit");this.rgaTreeSplit=e}static create(e,r){return new pn(e,r)}edit(e,r,a,l,c){const d=r?Wu.create(r):void 0;if(d&&l)for(const[b,T]of Object.entries(l))d.setAttr(b,T,a);const[h,g,p,w]=this.rgaTreeSplit.edit(e,a,d,c);return[w.map(b=>({...b,value:b.value?{attributes:Ts(b.value.getAttributes()),content:b.value.getContent()}:{attributes:void 0,content:""},type:"content"})),g,p,[h,h]]}setStyle(e,r,a,l){const c={data:0,meta:0},[,d,h]=this.rgaTreeSplit.findNodeWithSplit(e[1],a),[,g,p]=this.rgaTreeSplit.findNodeWithSplit(e[0],a);qe(c,d,g);const w=[],v=this.rgaTreeSplit.findBetween(p,h),b=[];for(const A of v){const C=A.getCreatedAt().getActorID();let D=$y;l!=null&&(D=l.get(C)?l.get(C):0n),A.canStyle(a,D)&&b.push(A)}const T=[];for(const A of b){if(A.isRemoved())continue;const[C,D]=this.rgaTreeSplit.findIndexesFromRange(A.createPosRange());w.push({type:"style",actor:a.getActorID(),from:C,to:D,value:{attributes:Ts(r)}});for(const[L,N]of Object.entries(r)){const[O]=A.getValue().setAttr(L,N,a);O!==void 0&&T.push({parent:A.getValue(),child:O});const B=A.getValue().getAttrs().getNodeMapByKey().get(L);B!==void 0&&qe(c,B.getDataSize())}}return[T,c,w]}indexRangeToPosRange(e,r){const a=this.rgaTreeSplit.indexToPos(e);return e===r?[a,a]:[a,this.rgaTreeSplit.indexToPos(r)]}get length(){return this.rgaTreeSplit.length}getTreeByIndex(){return this.rgaTreeSplit.getTreeByIndex()}getTreeByID(){return this.rgaTreeSplit.getTreeByID()}getDataSize(){const e={data:0,meta:0};for(const r of this.rgaTreeSplit){if(r.isRemoved())continue;const a=r.getDataSize();e.data+=a.data,e.meta+=a.meta}return{data:e.data,meta:e.meta+this.getMetaUsage()}}toJSON(){const e=[];for(const r of this.rgaTreeSplit)r.isRemoved()||e.push(r.getValue().toJSON());return`[${e.join(",")}]`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:JSON.parse(this.toJSON()),type:"YORKIE_TEXT"}}toString(){return this.rgaTreeSplit.toString()}values(){const e=[];for(const r of this.rgaTreeSplit)if(!r.isRemoved()){const a=r.getValue();e.push({attributes:Ts(a.getAttributes()),content:a.getContent()})}return e}getRGATreeSplit(){return this.rgaTreeSplit}toTestString(){return this.rgaTreeSplit.toTestString()}deepcopy(){const e=new pn(this.rgaTreeSplit.deepcopy(),this.getCreatedAt());return e.setRemovedAt(this.getRemovedAt()),e.setMovedAt(this.getMovedAt()),e}findIndexesFromRange(e){return this.rgaTreeSplit.findIndexesFromRange(e)}getGCPairs(){const e=[];for(const r of this.rgaTreeSplit){r.getRemovedAt()&&e.push({parent:this.rgaTreeSplit,child:r});for(const a of r.getValue().getGCPairs())e.push(a)}return e}}class hc extends ar{constructor(e,r,a,l,c,d){super(e,d);y(this,"fromPos");y(this,"toPos");y(this,"content");y(this,"attributes");this.fromPos=r,this.toPos=a,this.content=l,this.attributes=c}static create(e,r,a,l,c,d){return new hc(e,r,a,l,c,d)}execute(e,r,a){const l=e.findByCreatedAt(this.getParentCreatedAt());if(!l)throw new j($.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(l instanceof pn))throw new j($.ErrInvalidArgument,"fail to execute, only Text can execute edit");const c=l,[d,h,g]=c.edit([this.fromPos,this.toPos],this.content,this.getExecutedAt(),Object.fromEntries(this.attributes),a);e.acc(g);for(const p of h)e.registerGCPair(p);return{opInfos:d.map(({from:p,to:w,value:v})=>({type:"edit",from:p,to:w,value:v,path:e.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),r=this.fromPos.toTestString(),a=this.toPos.toTestString(),l=this.content;return`${e}.EDIT(${r},${a},${l})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getContent(){return this.content}getAttributes(){return this.attributes||new Map}}class gc extends ar{constructor(e,r,a,l,c){super(e,c);y(this,"fromPos");y(this,"toPos");y(this,"attributes");this.fromPos=r,this.toPos=a,this.attributes=l}static create(e,r,a,l,c){return new gc(e,r,a,l,c)}execute(e,r,a){const l=e.findByCreatedAt(this.getParentCreatedAt());if(!l)throw new j($.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(l instanceof pn))throw new j($.ErrInvalidArgument,"fail to execute, only Text can execute edit");const c=l,[d,h,g]=c.setStyle([this.fromPos,this.toPos],this.attributes?Object.fromEntries(this.attributes):{},this.getExecutedAt(),a);e.acc(h);for(const p of d)e.registerGCPair(p);return{opInfos:g.map(({from:p,to:w,value:v})=>({type:"style",from:p,to:w,value:v,path:e.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),r=this.fromPos.toTestString(),a=this.toPos.toTestString(),l=this.attributes;return`${e}.STYL(${r},${a},${JSON.stringify(l)})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getAttributes(){return this.attributes}}const yC=2,pC="root",Er="text";function Iu(n,t,e=!1){let r=0;const a=e?n.allChildren:n.children;for(let l=0;l<t;l++){const c=a[l];!c||!e&&c.isRemoved||(r+=c.paddedSize(e))}return r}class vC{constructor(t,e=[]){y(this,"type");y(this,"parent");y(this,"_children");y(this,"visibleSize");y(this,"totalSize");if(this.type=t,this.visibleSize=0,this.totalSize=0,this._children=e,this.isText&&this._children.length>0)throw new j($.ErrRefused,"Text node cannot have children")}updateAncestorsSize(t,e=!1){let r=this.parent;for(;r;){if(e)r.totalSize+=t;else if(r.visibleSize+=t,r.isRemoved)break;r=r.parent}}updateDescendantsSize(t=!1){let e=0;for(const r of this._children){const a=r.updateDescendantsSize(t);!t&&r.isRemoved||(e+=a)}return t?this.totalSize+=e:this.visibleSize+=e,this.paddedSize(t)}get isText(){return this.type===Er}paddedSize(t=!1){let e=this.visibleSize;return t&&(e=this.totalSize),this.isText||(e+=yC),e}isAncestorOf(t){return wC(this,t)}get nextSibling(){const t=this.parent.findOffset(this),e=this.parent.children[t+1];if(e)return e}get prevSibling(){const t=this.parent.findOffset(this),e=this.parent.children[t-1];if(e)return e}splitText(t,e){const r={data:0,meta:0};if(t===0||t===this.visibleSize)return[void 0,r];const a=this.value.slice(0,t),l=this.value.slice(t);if(!l.length)return[void 0,r];const c=this.getDataSize();this.value=a;const d=this.cloneText(t+e);return d.value=l,this.parent.insertAfterInternal(d,this),qe(r,this.getDataSize(),d.getDataSize()),ja(r,c),[d,r]}get children(){return this._children.filter(t=>!t.isRemoved)}get allChildren(){return[...this._children]}hasTextChild(){return this.children.length>0&&this.children.every(t=>t.isText)}getChildrenText(){return this.isText?this.value:this.hasTextChild()?this.children.map(t=>t.value).join(""):""}append(...t){if(this.isText)throw new j($.ErrRefused,"Text node cannot have children");this._children.push(...t);for(const e of t)e.parent=this,e.updateAncestorsSize(e.paddedSize()),e.updateAncestorsSize(e.paddedSize(!0),!0)}prepend(...t){if(this.isText)throw new j($.ErrRefused,"Text node cannot have children");this._children.unshift(...t);for(const e of t)e.parent=this}insertBefore(t,e){if(this.isText)throw new j($.ErrRefused,"Text node cannot have children");const r=this._children.indexOf(e);if(r===-1)throw new j($.ErrInvalidArgument,"child not found");this.insertAtInternal(t,r),t.updateAncestorsSize(t.paddedSize()),t.updateAncestorsSize(t.paddedSize(!0),!0)}insertAfter(t,e){if(this.isText)throw new j($.ErrRefused,"Text node cannot have children");const r=this._children.indexOf(e);if(r===-1)throw new j($.ErrInvalidArgument,"child not found");this.insertAtInternal(t,r+1),t.updateAncestorsSize(t.paddedSize()),t.updateAncestorsSize(t.paddedSize(!0),!0)}insertAt(t,e){if(this.isText)throw new j($.ErrRefused,"Text node cannot have children");this.insertAtInternal(t,e),t.updateAncestorsSize(t.paddedSize()),t.updateAncestorsSize(t.paddedSize(!0),!0)}removeChild(t){if(this.isText)throw new j($.ErrRefused,"Text node cannot have children");const e=this._children.indexOf(t);if(e===-1)throw new j($.ErrInvalidArgument,"child not found");this._children.splice(e,1),t.updateAncestorsSize(-t.paddedSize(!0),!0),t.parent=void 0}splitElement(t,e){const r={data:0,meta:0},a=this.getDataSize(),l=this.cloneElement(e);this.parent.insertAfterInternal(l,this),l.updateAncestorsSize(l.paddedSize()),l.updateAncestorsSize(l.paddedSize(!0),!0);const c=this.children.slice(0,t),d=this.children.slice(t);this._children=c,l._children=d,this.visibleSize=this._children.reduce((h,g)=>h+g.paddedSize(),0),this.totalSize=this._children.reduce((h,g)=>h+g.paddedSize(!0),0),l.visibleSize=l._children.reduce((h,g)=>h+g.paddedSize(!0),0),l.totalSize=l._children.reduce((h,g)=>h+g.paddedSize(!0),0);for(const h of l._children)h.parent=l;return qe(r,this.getDataSize(),l.getDataSize()),ja(r,a),[l,r]}insertAfterInternal(t,e){if(this.isText)throw new j($.ErrRefused,"Text node cannot have children");const r=this._children.indexOf(e);if(r===-1)throw new j($.ErrInvalidArgument,"child not found");this.insertAtInternal(t,r+1)}insertAtInternal(t,e){if(this.isText)throw new j($.ErrRefused,"Text node cannot have children");this._children.splice(e,0,t),t.parent=this}findOffset(t,e=!1){if(this.isText)throw new j($.ErrRefused,"Text node cannot have children");if(e)return this._children.indexOf(t);if(t.isRemoved){const r=this._children.indexOf(t);return this.allChildren.splice(0,r).filter(l=>!l.isRemoved).length}return this.children.indexOf(t)}findBranchOffset(t){if(this.isText)throw new j($.ErrRefused,"Text node cannot have children");let e=t;for(;e;){const r=this._children.indexOf(e);if(r!==-1)return r;e=e.parent}return-1}}function wC(n,t){if(n===t)return!1;for(;t.parent;){if(t.parent===n)return!0;t=t.parent}return!1}var ve=(n=>(n.Start="Start",n.End="End",n.Text="Text",n))(ve||{});function gx(n,t,e,r,a=!1){if(t>e)throw new j($.ErrInvalidArgument,`from is greater than to: ${t} > ${e}`);const l=a?n.totalSize:n.visibleSize;if(t>l)throw new j($.ErrInvalidArgument,`from is out of range: ${t} > ${l}`);if(e>l)throw new j($.ErrInvalidArgument,`to is out of range: ${e} > ${l}`);if(t===e)return;let c=0;const d=a?n._children:n.children;for(const h of d){if(t-h.paddedSize(a)<c&&c<e){const g=h.isText?t-c:t-c-1,p=h.isText?e-c:e-c-1,w=a?h.totalSize:h.visibleSize,v=!h.isText&&g<0,b=!h.isText&&p>w;(h.isText||v)&&r([h,h.isText?"Text":"Start"],b),gx(h,Math.max(0,g),Math.min(p,w),r,a),b&&r([h,"End"],b)}c+=h.paddedSize(a)}}function mx(n,t,e=0){for(const r of n.children)mx(r,t,e+1);t(n,e)}function ih(n,t,e=0){for(const r of n._children)ih(r,t,e+1);t(n,e)}function Vy(n,t,e=!0){if(t>n.visibleSize)throw new j($.ErrInvalidArgument,`index is out of range: ${t} > ${n.visibleSize}`);if(n.isText)return{node:n,offset:t};let r=0,a=0;for(const l of n.children){if(e&&l.isText&&l.visibleSize>=t-a)return Vy(l,t-a,e);if(t===a)return{node:n,offset:r};if(!e&&l.paddedSize()===t-a)return{node:n,offset:r+1};if(l.paddedSize()>t-a)return Vy(l,t-a-1,e);a+=l.paddedSize(),r+=1}return{node:n,offset:r}}function yx(n){return n.isText||n.children.length===0?n:yx(n.children[0])}function bC(n,t){if(n.visibleSize<t)throw new j($.ErrInvalidArgument,"unacceptable path");for(let e=0;e<n.children.length;e++){const r=n.children[e];if(r.visibleSize<t)t-=r.visibleSize;else{n=r;break}}return{node:n,offset:t}}class SC{constructor(t){y(this,"root");this.root=t}tokensBetween(t,e,r,a=!1){gx(this.root,t,e,r,a)}traverse(t){mx(this.root,t,0)}traverseAll(t){ih(this.root,t,0)}findTreePos(t,e=!0){return Vy(this.root,t,e)}treePosToPath(t){const e=[];let r=t.node;if(r.isText){const a=r.parent.findOffset(r);if(a===-1)throw new j($.ErrInvalidArgument,"invalid treePos");const l=Iu(r.parent,a);e.push(l+t.offset),r=r.parent}else if(r.hasTextChild()){const a=Iu(r,t.offset);e.push(a)}else e.push(t.offset);for(;r.parent;){const a=r.parent.findOffset(r);if(a===-1)throw new j($.ErrInvalidArgument,"invalid treePos");e.push(a),r=r.parent}return e.reverse()}pathToIndex(t){const e=this.pathToTreePos(t);return this.indexOf(e)}pathToTreePos(t){if(!t.length)throw new j($.ErrInvalidArgument,"unacceptable path");let e=this.root;for(let r=0;r<t.length-1;r++){const a=t[r];if(e=e.children[a],!e)throw new j($.ErrInvalidArgument,"unacceptable path")}if(e.hasTextChild())return bC(e,t[t.length-1]);if(e.children.length<t[t.length-1])throw new j($.ErrInvalidArgument,"unacceptable path");return{node:e,offset:t[t.length-1]}}getRoot(){return this.root}get size(){return this.root.visibleSize}findPostorderRight(t){const{node:e,offset:r}=t;if(e.isText){if(e.visibleSize===r){const a=e.nextSibling;return a||e.parent}return e}return e.children.length===r?e:yx(e.children[r])}indexOf(t,e=!1){let{node:r}=t;const{offset:a}=t;let l=0,c=1;if(r.isText){l+=a;const d=r.parent,h=d.findOffset(r,e);if(h===-1)throw new j($.ErrInvalidArgument,"invalid pos");l+=Iu(d,h,e),r=r.parent}else l+=Iu(r,a,e);for(;r!=null&&r.parent;){const d=r.parent,h=d.findOffset(r,e);if(h===-1)throw new j($.ErrInvalidArgument,"invalid pos");l+=Iu(d,h,e),c++,r=r.parent}return l+c-1}indexToPath(t){const e=this.findTreePos(t);return this.treePosToPath(e)}}const xC=(n,t)=>n===t?0:n<t?-1:1;class TC{constructor(t,e,r){y(this,"key");y(this,"value");y(this,"parent");y(this,"left");y(this,"right");y(this,"isRed");this.key=t,this.value=e,this.isRed=r}}class AC{constructor(t){y(this,"stack");this.stack=[],this.traverseInorder(t)}traverseInorder(t){t&&(this.traverseInorder(t.left),this.stack.push({key:t.key,value:t.value}),this.traverseInorder(t.right))}}class px{constructor(t){y(this,"root");y(this,"comparator");y(this,"counter");this.comparator=typeof t<"u"?t:xC,this.counter=0}put(t,e){return this.root=this.putInternal(t,e,this.root),this.root.isRed=!1,e}get(t){const e=this.getInternal(t,this.root);return e?e.value:void 0}remove(t){!this.isRed(this.root.left)&&!this.isRed(this.root.right)&&(this.root.isRed=!0),this.root=this.removeInternal(this.root,t),this.root&&(this.root.isRed=!1)}getIterator(){return new AC(this.root)}values(){const t=[];for(const e of this.getIterator().stack)t.push(e.value);return t}floorEntry(t){let e=this.root;for(;e;){const r=this.comparator(t,e.key);if(r>0)if(e.right)e.right.parent=e,e=e.right;else return e;else if(r<0)if(e.left)e.left.parent=e,e=e.left;else{let a=e.parent,l=e;for(;a&&l===a.left;)l=a,a=a.parent;return a}else return e}}lastEntry(){if(!this.root)return this.root;let t=this.root;for(;t.right;)t=t.right;return t}size(){return this.counter}isEmpty(){return this.counter===0}getInternal(t,e){for(;e;){const r=this.comparator(t,e.key);if(r===0)return e;r<0?e=e.left:r>0&&(e=e.right)}}putInternal(t,e,r){if(!r)return this.counter+=1,new TC(t,e,!0);const a=this.comparator(t,r.key);return a<0?r.left=this.putInternal(t,e,r.left):a>0?r.right=this.putInternal(t,e,r.right):r.value=e,this.isRed(r.right)&&!this.isRed(r.left)&&(r=this.rotateLeft(r)),this.isRed(r.left)&&this.isRed(r.left.left)&&(r=this.rotateRight(r)),this.isRed(r.left)&&this.isRed(r.right)&&this.flipColors(r),r}removeInternal(t,e){if(this.comparator(e,t.key)<0)!this.isRed(t.left)&&!this.isRed(t.left.left)&&(t=this.moveRedLeft(t)),t.left=this.removeInternal(t.left,e);else{if(this.isRed(t.left)&&(t=this.rotateRight(t)),this.comparator(e,t.key)===0&&!t.right){this.counter-=1;return}if(!this.isRed(t.right)&&!this.isRed(t.right.left)&&(t=this.moveRedRight(t)),this.comparator(e,t.key)===0){this.counter-=1;const r=this.min(t.right);t.value=r.value,t.key=r.key,t.right=this.removeMin(t.right)}else t.right=this.removeInternal(t.right,e)}return this.fixUp(t)}min(t){return t.left?this.min(t.left):t}removeMin(t){if(t.left)return!this.isRed(t.left)&&!this.isRed(t.left.left)&&(t=this.moveRedLeft(t)),t.left=this.removeMin(t.left),this.fixUp(t)}fixUp(t){return this.isRed(t.right)&&(t=this.rotateLeft(t)),this.isRed(t.left)&&this.isRed(t.left.left)&&(t=this.rotateRight(t)),this.isRed(t.left)&&this.isRed(t.right)&&this.flipColors(t),t}moveRedLeft(t){return this.flipColors(t),this.isRed(t.right.left)&&(t.right=this.rotateRight(t.right),t=this.rotateLeft(t),this.flipColors(t)),t}moveRedRight(t){return this.flipColors(t),this.isRed(t.left.left)&&(t=this.rotateRight(t),this.flipColors(t)),t}isRed(t){return t&&t.isRed}rotateLeft(t){const e=t.right;return t.right=e.left,e.left=t,e.isRed=e.left.isRed,e.left.isRed=!0,e}rotateRight(t){const e=t.left;return t.left=e.right,e.right=t,e.isRed=e.right.isRed,e.right.isRed=!0,e}flipColors(t){t.isRed=!t.isRed,t.left.isRed=!t.left.isRed,t.right.isRed=!t.right.isRed}}class rr{constructor(t,e){y(this,"parentID");y(this,"leftSiblingID");this.parentID=t,this.leftSiblingID=e}static of(t,e){return new rr(t,e)}static fromTreePos(t){const{offset:e}=t;let{node:r}=t,a;return r.isText?(r.parent.children[0]===r&&e===0?a=r.parent:a=r,r=r.parent):e===0?a=r:a=r.children[e-1],rr.of(r.id,Pe.of(a.getCreatedAt(),a.getOffset()+e))}getParentID(){return this.parentID}static fromStruct(t){return rr.of(Pe.of($n.fromStruct(t.parentID.createdAt),t.parentID.offset),Pe.of($n.fromStruct(t.leftSiblingID.createdAt),t.leftSiblingID.offset))}toStruct(){return{parentID:{createdAt:this.getParentID().getCreatedAt().toStruct(),offset:this.getParentID().getOffset()},leftSiblingID:{createdAt:this.getLeftSiblingID().getCreatedAt().toStruct(),offset:this.getLeftSiblingID().getOffset()}}}toTreeNodePair(t){const e=this.getParentID(),r=this.getLeftSiblingID(),a=t.findFloorNode(e);let l=t.findFloorNode(r);if(!a||!l)throw new j($.ErrRefused,`cannot find node of CRDTTreePos(${e.toTestString()}, ${r.toTestString()})`);return!r.equals(e)&&r.getOffset()>0&&r.getOffset()===l.id.getOffset()&&l.insPrevID&&(l=t.findFloorNode(l.insPrevID)),[a,l]}getLeftSiblingID(){return this.leftSiblingID}equals(t){return this.getParentID().getCreatedAt().equals(t.getParentID().getCreatedAt())&&this.getParentID().getOffset()===t.getParentID().getOffset()&&this.getLeftSiblingID().getCreatedAt().equals(t.getLeftSiblingID().getCreatedAt())&&this.getLeftSiblingID().getOffset()===t.getLeftSiblingID().getOffset()}}class Pe{constructor(t,e){y(this,"createdAt");y(this,"offset");this.createdAt=t,this.offset=e}static of(t,e){return new Pe(t,e)}static fromStruct(t){return Pe.of($n.fromStruct(t.createdAt),t.offset)}static createComparator(){return(t,e)=>{const r=t.getCreatedAt().compare(e.getCreatedAt());return r!==0?r:t.getOffset()>e.getOffset()?1:t.getOffset()<e.getOffset()?-1:0}}getCreatedAt(){return this.createdAt}equals(t){return this.createdAt.compare(t.createdAt)===0&&this.offset===t.offset}getOffset(){return this.offset}setOffset(t){this.offset=t}toStruct(){return{createdAt:this.createdAt.toStruct(),offset:this.offset}}toIDString(){return`${this.createdAt.toIDString()}:${this.offset}`}toTestString(){return`${this.createdAt.toTestString()}/${this.offset}`}}class yn extends vC{constructor(e,r,a,l,c){super(r);y(this,"id");y(this,"removedAt");y(this,"attrs");y(this,"insPrevID");y(this,"insNextID");y(this,"_value","");this.id=e,this.removedAt=c,l&&(this.attrs=l),typeof a=="string"?this.value=a:Array.isArray(a)&&(this._children=a)}toIDString(){return this.id.toIDString()}getRemovedAt(){return this.removedAt}static create(e,r,a,l){return new yn(e,r,a,l)}deepcopy(){var r;const e=new yn(this.id,this.type);return e.removedAt=this.removedAt,e._value=this._value,e.visibleSize=this.visibleSize,e.totalSize=this.totalSize,e.attrs=(r=this.attrs)==null?void 0:r.deepcopy(),e._children=this._children.map(a=>{const l=a.deepcopy();return l.parent=e,l}),e.insPrevID=this.insPrevID,e.insNextID=this.insNextID,e}get value(){if(!this.isText)throw new j($.ErrInvalidType,`cannot get value of element node: ${this.type}`);return this._value}set value(e){if(!this.isText)throw new j($.ErrInvalidType,`cannot set value of element node: ${this.type}`);this._value=e,this.visibleSize=e.length,this.totalSize=e.length}get isRemoved(){return!!this.removedAt}remove(e){return this.removedAt?(e.after(this.removedAt)&&(this.removedAt=e),!1):(this.removedAt=e,this.updateAncestorsSize(-this.paddedSize()),!0)}cloneText(e){return new yn(Pe.of(this.id.getCreatedAt(),e),this.type,void 0,void 0,this.removedAt)}cloneElement(e){return new yn(Pe.of(e(),0),this.type,void 0,void 0,this.removedAt)}split(e,r,a){const[l,c]=this.isText?this.splitText(r,this.id.getOffset()):this.splitElement(r,a);if(l){if(l.insPrevID=this.id,this.insNextID){const d=e.findFloorNode(this.insNextID);d.insPrevID=l.id,l.insNextID=this.insNextID}this.insNextID=l.id,e.registerNode(l)}return[l,c]}getCreatedAt(){return this.id.getCreatedAt()}getOffset(){return this.id.getOffset()}canDelete(e,r,a){return r?!!(!this.removedAt||!a&&(e!=null&&e.after(this.removedAt))):!1}canStyle(e,r){return this.isText?!1:this.getCreatedAt().getLamport()<=r&&(!this.removedAt||e.after(this.removedAt))}setAttrs(e,r){this.attrs||(this.attrs=new Es);const a=[];for(const[l,c]of Object.entries(e))a.push(this.attrs.set(l,c,r));return a}purge(e){this.attrs&&this.attrs.purge(e)}getDataSize(){const e={data:0,meta:0};if(this.isText&&(e.data+=this.visibleSize*2),this.id&&(e.meta+=Ar),this.removedAt&&(e.meta+=Ar),this.attrs)for(const r of this.attrs){if(r.getRemovedAt())continue;const a=r.getDataSize();e.meta+=a.meta,e.data+=a.data}return e}getGCPairs(){const e=[];if(!this.attrs)return e;for(const r of this.attrs)r.getRemovedAt()&&e.push({parent:this,child:r});return e}}function jy(n){var e;if(n.isText){const r=n;return{type:r.type,value:r.value}}const t={type:n.type,children:n.children.map(jy)};return n.attrs&&(t.attributes=Ts((e=n.attrs)==null?void 0:e.toObject())),t}function hp(n){if(n.isText)return n.value;let t="";return n.attrs&&n.attrs.size()&&(t=" "+Array.from(n.attrs).filter(e=>!e.isRemoved()).sort((e,r)=>e.getKey().localeCompare(r.getKey())).map(e=>{const r=JSON.parse(e.getValue());return typeof r=="string"?`${e.getKey()}="${r}"`:`${e.getKey()}="${xr(e.getValue())}"`}).join(" ")),`<${n.type}${t}>${n.children.map(e=>hp(e)).join("")}</${n.type}>`}function vx(n){if(n.isText){const t=n;return{type:t.type,value:t.value,visibleSize:t.visibleSize,isRemoved:t.isRemoved}}return{type:n.type,children:n.children.map(vx),visibleSize:n.visibleSize,isRemoved:n.isRemoved}}class vn extends dc{constructor(e,r){super(r);y(this,"indexTree");y(this,"nodeMapByID");this.indexTree=new SC(e),this.nodeMapByID=new px(Pe.createComparator()),this.indexTree.traverseAll(a=>{this.nodeMapByID.put(a.id,a)})}static create(e,r){return new vn(e,r)}findFloorNode(e){const r=this.nodeMapByID.floorEntry(e);if(!(!r||!r.key.getCreatedAt().equals(e.getCreatedAt())))return r.value}registerNode(e){this.nodeMapByID.put(e.id,e)}findNodesAndSplitText(e,r){let a={data:0,meta:0};const[l,c]=e.toTreeNodePair(this);let d=c;const h=l===d,g=d.parent&&!h?d.parent:l;if(d.isText){const[,p]=d.split(this,e.getLeftSiblingID().getOffset()-d.id.getOffset());a=p}if(r){const p=g.allChildren,w=h?0:p.indexOf(d)+1;for(let v=w;v<p.length;v++){const b=p[v];if(!b.id.getCreatedAt().after(r))break;d=b}}return[[g,d],a]}style(e,r,a,l){const c={data:0,meta:0},[[d,h],g]=this.findNodesAndSplitText(e[0],a),[[p,w],v]=this.findNodesAndSplitText(e[1],a);qe(c,v,g);const b=[],T=r?Ts(r):{},A=[];return this.traverseInPosRange(d,h,p,w,([C,D])=>{var O;const L=C.getCreatedAt().getActorID();let N=$y;if(l!=null&&(N=l.get(L)?l.get(L):0n),C.canStyle(a,N)&&r){const B=C.setAttrs(r,a),_=B.reduce((W,[,ft])=>(ft&&(W[ft.getKey()]=T[ft.getKey()]),W),{}),P=C.parent,V=C.prevSibling||C.parent;Object.keys(_).length>0&&b.push({type:"style",from:this.toIndex(P,V),to:this.toIndex(C,C),fromPath:this.toPath(P,V),toPath:this.toPath(C,C),actor:a.getActorID(),value:_});for(const[W]of B)W&&A.push({parent:C,child:W});for(const[W]of Object.entries(T)){const ft=(O=C.attrs)==null?void 0:O.getNodeMapByKey().get(W);ft!==void 0&&D!==ve.End&&qe(c,ft.getDataSize())}}}),[A,b,c]}removeStyle(e,r,a,l){const c={data:0,meta:0},[[d,h],g]=this.findNodesAndSplitText(e[0],a),[[p,w],v]=this.findNodesAndSplitText(e[1],a);qe(c,v,g);const b=[],T=[];return this.traverseInPosRange(d,h,p,w,([A])=>{const C=A.getCreatedAt().getActorID();let D=$y;if(l!=null&&(D=l.get(C)?l.get(C):0n),A.canStyle(a,D)&&r){A.attrs||(A.attrs=new Es);for(const O of r){const B=A.attrs.remove(O,a);for(const _ of B)T.push({parent:A,child:_})}const L=A.parent,N=A.prevSibling||A.parent;b.push({actor:a.getActorID(),type:"removeStyle",from:this.toIndex(L,N),to:this.toIndex(A,A),fromPath:this.toPath(L,N),toPath:this.toPath(A,A),value:r})}}),[T,b,c]}edit(e,r,a,l,c,d){const h={data:0,meta:0},[[g,p],w]=this.findNodesAndSplitText(e[0],l),[[v,b],T]=this.findNodesAndSplitText(e[1],l);qe(h,T,w);const A=this.toIndex(g,p),C=this.toPath(g,p),D=[],L=[],N=[];this.traverseInPosRange(g,p,v,b,([_,P],V)=>{if(P===ve.Start&&!V)for(const ot of _.children)N.push(ot);const W=d===void 0;let ft=!1;const nt=d==null?void 0:d.get(_.id.getCreatedAt().getActorID());ft=W||nt!==void 0&&nt>=_.id.getCreatedAt().getLamport();let rt=!1;if(_.removedAt){const ot=d==null?void 0:d.get(_.removedAt.getActorID());rt=W||ot!==void 0&&ot>=_.removedAt.getLamport()}(_.canDelete(l,ft,rt)||D.includes(_.parent))&&((P===ve.Text||P===ve.Start)&&D.push(_),L.push([_,P]))},!0);const O=this.makeDeletionChanges(L,l),B=[];for(const _ of D)_.remove(l),_.isRemoved&&B.push({parent:this,child:_});for(const _ of N)_.removedAt||g.append(_);if(a>0){let _=0,P=g,V=p;for(;_<a;)P.split(this,P.findOffset(V)+1,c),V=P,P=P.parent,_++;O.push({type:"content",from:A,to:A,fromPath:C,toPath:C,actor:l.getActorID()})}if(r!=null&&r.length){const _=[];let P=p;for(const V of r)P===g?g.insertAt(V,0):g.insertAfter(V,P),P=V,ih(V,W=>{g.isRemoved?(W.remove(l),B.push({parent:this,child:W})):qe(h,W.getDataSize()),this.nodeMapByID.put(W.id,W)}),V.isRemoved||_.push(V);if(_.length){const V=_.map(W=>jy(W));O.length&&O[O.length-1].from===A?O[O.length-1].value=V:O.push({type:"content",from:A,to:A,fromPath:C,toPath:C,actor:l.getActorID(),value:V})}}return[O,B,h]}editT(e,r,a,l,c){const d=this.findPos(e[0]),h=this.findPos(e[1]);return this.edit([d,h],r,a,l,c)}move(e,r,a){throw new j($.ErrUnimplemented,`not implemented: ${e}, ${r}, ${a}`)}pathToTreePos(e){return this.indexTree.pathToTreePos(e)}purge(e){var l;(l=e.parent)==null||l.removeChild(e),this.nodeMapByID.remove(e.id);const r=e.insPrevID,a=e.insNextID;if(r){const c=this.findFloorNode(r);c.insNextID=a}if(a){const c=this.findFloorNode(a);c.insPrevID=r}e.insPrevID=void 0,e.insNextID=void 0}getGCPairs(){const e=[];return this.indexTree.traverse(r=>{r.getRemovedAt()&&e.push({parent:this,child:r});for(const a of r.getGCPairs())e.push(a)}),e}findPos(e,r=!0){const a=this.indexTree.findTreePos(e,r);return rr.fromTreePos(a)}pathToPosRange(e){const r=this.pathToIndex(e);return[this.findPos(r),this.findPos(r+1)]}pathToPos(e){const r=this.indexTree.pathToIndex(e);return this.findPos(r)}getRoot(){return this.indexTree.getRoot()}getSize(){return this.indexTree.size}getNodeSize(){return this.nodeMapByID.size()}getIndexTree(){return this.indexTree}toXML(){return hp(this.indexTree.getRoot())}getDataSize(){const e={data:0,meta:0};return this.indexTree.traverse(r=>{if(r.getRemovedAt())return;const a=r.getDataSize();e.data+=a.data,e.meta+=a.meta}),{data:e.data,meta:e.meta+this.getMetaUsage()}}toJSON(){return JSON.stringify(this.getRootTreeNode())}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:JSON.parse(this.toJSON()),type:"YORKIE_TREE"}}toJSInfoForTest(){const e=this.indexTree.getRoot(),r=(a,l=void 0,c=void 0,d=0)=>{var b,T,A,C;let h,g,p;const w=a.isText?{node:a,offset:0}:l&&c?this.toTreePos(l,c):null;w&&(h=this.indexTree.indexOf(w),g=this.indexTree.treePosToPath(w),p=rr.fromTreePos(w).toStruct());const v={type:a.type,parent:l==null?void 0:l.id.toTestString(),size:a.visibleSize,id:a.id.toTestString(),removedAt:(b=a.removedAt)==null?void 0:b.toTestString(),insPrev:(T=a.insPrevID)==null?void 0:T.toTestString(),insNext:(A=a.insNextID)==null?void 0:A.toTestString(),value:a.isText?a.value:void 0,isRemoved:a.isRemoved,children:[],depth:d,attributes:a.attrs?Ts((C=a.attrs)==null?void 0:C.toObject()):void 0,index:h,path:g,pos:p};for(let D=0;D<a.allChildren.length;D++){const L=D===0?a:a.allChildren[D-1];v.children.push(r(a.allChildren[D],a,L,d+1))}return v};return r(e)}getRootTreeNode(){return jy(this.indexTree.getRoot())}toTestTreeNode(){return vx(this.indexTree.getRoot())}toSortedJSON(){return this.toJSON()}deepcopy(){const e=this.getRoot(),r=new vn(e.deepcopy(),this.getCreatedAt());return r.setRemovedAt(this.getRemovedAt()),r.setMovedAt(this.getMovedAt()),r}toPath(e,r){const a=this.toTreePos(e,r);return a?this.indexTree.treePosToPath(a):[]}toIndex(e,r,a=!1){const l=this.toTreePos(e,r,a);return l?this.indexTree.indexOf(l,a):-1}indexToPath(e){return this.indexTree.indexToPath(e)}pathToIndex(e){return this.indexTree.pathToIndex(e)}indexRangeToPosRange(e){const r=this.findPos(e[0]);return e[0]===e[1]?[r,r]:[r,this.findPos(e[1])]}indexRangeToPosStructRange(e){const[r,a]=e,l=this.findPos(r);return r===a?[l.toStruct(),l.toStruct()]:[l.toStruct(),this.findPos(a).toStruct()]}posRangeToPathRange(e){const[[r,a]]=this.findNodesAndSplitText(e[0]),[[l,c]]=this.findNodesAndSplitText(e[1]);return[this.toPath(r,a),this.toPath(l,c)]}posRangeToIndexRange(e){const[[r,a]]=this.findNodesAndSplitText(e[0]),[[l,c]]=this.findNodesAndSplitText(e[1]);return[this.toIndex(r,a),this.toIndex(l,c)]}traverseInPosRange(e,r,a,l,c,d=!1){const h=this.toIndex(e,r,d),g=this.toIndex(a,l,d);this.indexTree.tokensBetween(h,g,c,d)}toTreePos(e,r,a=!1){if(!e||!r)return;if(!a&&e.isRemoved){let c;for(;e.isRemoved;)c=e,e=c.parent;const d=e.findOffset(c,a);return{node:e,offset:d}}if(e===r)return{node:e,offset:0};let l=e.findOffset(r,a);if(a||!r.isRemoved){if(r.isText)return{node:r,offset:r.paddedSize(a)};l++}return{node:e,offset:l}}makeDeletionChanges(e,r){const a=[],l=[];let c=null,d=null;for(let h=0;h<e.length;h++){const g=e[h],p=e[h+1];c||(c=g),d=g;const w=this.findRightToken(g);(!w||!p||w[0]!==p[0]||w[1]!==p[1])&&(l.push([c,d]),c=null,d=null)}for(const h of l){const[g,p]=h,[w,v]=this.findLeftToken(g),[b,T]=p,A=v===ve.Start?w:w.parent,C=T===ve.Start?b:b.parent,D=this.toIndex(A,w),L=this.toIndex(C,b);D<L&&(a.length>0&&D===a[a.length-1].to?(a[a.length-1].to=L,a[a.length-1].toPath=this.toPath(C,b)):a.push({type:"content",from:D,to:L,fromPath:this.toPath(A,w),toPath:this.toPath(C,b),actor:r.getActorID()}))}return a.reverse()}findRightToken([e,r]){if(r===ve.Start){const h=e.allChildren;return h.length>0?[h[0],h[0].isText?ve.Text:ve.Start]:[e,ve.End]}const a=e.parent,l=a.allChildren,c=l.indexOf(e);if(a&&c===l.length-1)return[a,ve.End];const d=l[c+1];return[d,d.isText?ve.Text:ve.Start]}findLeftToken([e,r]){if(r===ve.End){const h=e.allChildren;if(h.length>0){const g=h[h.length-1];return[g,g.isText?ve.Text:ve.End]}return[e,ve.Start]}const a=e.parent,l=a.allChildren,c=l.indexOf(e);if(a&&c===0)return[a,ve.Start];const d=l[c-1];return[d,d.isText?ve.Text:ve.End]}}class mc extends ar{constructor(e,r,a,l,c,d){super(e,d);y(this,"fromPos");y(this,"toPos");y(this,"contents");y(this,"splitLevel");this.fromPos=r,this.toPos=a,this.contents=l,this.splitLevel=c}static create(e,r,a,l,c,d){return new mc(e,r,a,l,c,d)}execute(e,r,a){var w;const l=e.findByCreatedAt(this.getParentCreatedAt());if(!l)throw new j($.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(l instanceof vn))throw new j($.ErrInvalidArgument,"fail to execute, only Tree can execute edit");const c=this.getExecutedAt(),d=l,[h,g,p]=d.edit([this.fromPos,this.toPos],(w=this.contents)==null?void 0:w.map(v=>v.deepcopy()),this.splitLevel,c,(()=>{let v=c.getDelimiter();return this.contents!==void 0&&(v+=this.contents.length),()=>$n.of(c.getLamport(),++v,c.getActorID())})(),a);e.acc(p);for(const v of g)e.registerGCPair(v);return{opInfos:h.map(({from:v,to:b,value:T,splitLevel:A,fromPath:C,toPath:D})=>({type:"tree-edit",path:e.createPath(this.getParentCreatedAt()),from:v,to:b,value:T,splitLevel:A,fromPath:C,toPath:D}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),r=`${this.fromPos.getLeftSiblingID().getCreatedAt().toTestString()}/${this.fromPos.getLeftSiblingID().getOffset()}`,a=`${this.toPos.getLeftSiblingID().getCreatedAt().toTestString()}/${this.toPos.getLeftSiblingID().getOffset()}`,l=this.contents||[];return`${e}.EDIT(${r},${a},${l.map(c=>hp(c)).join("")})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getContents(){return this.contents}getSplitLevel(){return this.splitLevel}}class tl{constructor(t){y(this,"vector");this.vector=t||new Map}set(t,e){this.vector.set(t,e)}unset(t){this.vector.delete(t)}get(t){return this.vector.get(t)}has(t){return this.vector.has(t)}maxLamport(){let t=BigInt(0);for(const[,e]of this)e>t&&(t=e);return t}max(t){const e=new Map;for(const[r,a]of t){const l=this.vector.get(r),c=l&&l>a?l:a;e.set(r,c)}for(const[r,a]of this){const l=t.get(r),c=l&&l>a?l:a;e.set(r,c)}return new tl(e)}afterOrEqual(t){const e=this.vector.get(t.getActorID());return e===void 0?!1:e>=t.getLamport()}deepcopy(){const t=new Map;for(const[e,r]of this.vector)t.set(e,r);return new tl(t)}filter(t){const e=new Map;for(const[r]of t){const a=this.vector.get(r);a!==void 0&&e.set(r,a)}return new tl(e)}size(){return this.vector.size}*[Symbol.iterator](){for(const[t,e]of this.vector)yield[t,e]}}const wx=new tl(new Map);class Zn{constructor(t,e,r,a,l){y(this,"clientSeq");y(this,"serverSeq");y(this,"actor");y(this,"lamport");y(this,"versionVector");this.clientSeq=t,this.serverSeq=l,this.lamport=e,this.versionVector=a,this.actor=r}hasClocks(){return this.versionVector.size()>0&&this.lamport!=Jy}static of(t,e,r,a,l){return new Zn(t,e,r,a,l)}next(t=!1){if(t)return new Zn(this.clientSeq+1,this.lamport,this.actor,wx,Jy);const e=this.versionVector.deepcopy();return e.set(this.actor,this.lamport+1n),new Zn(this.clientSeq+1,this.lamport+1n,this.actor,e)}syncClocks(t){if(!t.hasClocks())return this;const e=t.lamport>this.lamport?t.lamport+1n:this.lamport+1n,r=this.versionVector.max(t.versionVector),a=new Zn(this.clientSeq,e,this.actor,r);return a.versionVector.set(this.actor,e),a}setClocks(t,e){const r=t>this.lamport?t+1n:this.lamport+1n,a=this.versionVector.max(e);return a.set(this.actor,r),Zn.of(this.clientSeq,r,this.actor,a)}createTimeTicket(t){return $n.of(this.lamport,t,this.actor)}setActor(t){return new Zn(this.clientSeq,this.lamport,t,this.versionVector,this.serverSeq)}setLamport(t){return new Zn(this.clientSeq,t,this.actor,this.versionVector,this.serverSeq)}setVersionVector(t){return new Zn(this.clientSeq,this.lamport,this.actor,t,this.serverSeq)}getClientSeq(){return this.clientSeq}getServerSeq(){return this.serverSeq?this.serverSeq.toString():""}getLamport(){return this.lamport}getLamportAsString(){return this.lamport.toString()}getActorID(){return this.actor}getVersionVector(){return this.versionVector}toTestString(){return`${this.lamport.toString()}:${this.actor.slice(-2)}:${this.clientSeq}`}}const EC=new Zn(0,0n,fp,wx);class dl{constructor({id:t,operations:e,presenceChange:r,message:a}){y(this,"id");y(this,"operations");y(this,"presenceChange");y(this,"message");this.id=t,this.operations=e||[],this.presenceChange=r,this.message=a}static create({id:t,operations:e,presenceChange:r,message:a}){return new dl({id:t,operations:e,presenceChange:r,message:a})}getID(){return this.id}getMessage(){return this.message}hasOperations(){return this.operations.length>0}getOperations(){return this.operations}setActor(t){for(const e of this.operations)e.setActor(t);this.id=this.id.setActor(t)}hasPresenceChange(){return this.presenceChange!==void 0}getPresenceChange(){return this.presenceChange}execute(t,e,r){const a=[],l=[];for(const c of this.operations){const d=c.execute(t,r,this.id.getVersionVector());if(!d)continue;const{opInfos:h,reverseOp:g}=d;a.push(...h),g&&l.unshift(g)}return this.presenceChange&&(this.presenceChange.type===kr.Put?e.set(this.id.getActorID(),Fn(this.presenceChange.presence)):e.delete(this.id.getActorID())),{opInfos:a,reverseOps:l}}toTestString(){return`${this.operations.map(t=>t.toTestString()).join(",")}`}toStruct(){return{changeID:ge.bytesToHex(ge.toChangeID(this.getID()).toBinary()),message:this.getMessage(),operations:this.getOperations().map(t=>ge.bytesToHex(ge.toOperation(t).toBinary())),presenceChange:this.getPresenceChange()}}static fromStruct(t){const{changeID:e,operations:r,presenceChange:a,message:l}=t;return dl.create({id:ge.bytesToChangeID(ge.hexToBytes(e)),operations:r==null?void 0:r.map(c=>ge.bytesToOperation(ge.hexToBytes(c))),presenceChange:a,message:l})}}class sh{constructor(t,e,r,a,l,c){y(this,"documentKey");y(this,"checkpoint");y(this,"isRemoved");y(this,"changes");y(this,"snapshot");y(this,"versionVector");this.documentKey=t,this.checkpoint=e,this.isRemoved=r,this.changes=a,this.snapshot=c,this.versionVector=l}static create(t,e,r,a,l,c){return new sh(t,e,r,a,l,c)}getDocumentKey(){return this.documentKey}getCheckpoint(){return this.checkpoint}getIsRemoved(){return this.isRemoved}getChanges(){return this.changes}hasChanges(){return this.changes.length>0}getChangeSize(){return this.changes.length}hasSnapshot(){return!!this.snapshot&&!!this.snapshot.length}getSnapshot(){return this.snapshot}getVersionVector(){return this.versionVector}}class el{constructor(t,e){y(this,"serverSeq");y(this,"clientSeq");this.serverSeq=t,this.clientSeq=e}static of(t,e){return new el(t,e)}increaseClientSeq(t){return t===0?this:new el(this.serverSeq,this.clientSeq+t)}forward(t){if(this.equals(t))return this;const e=this.serverSeq>t.serverSeq?this.serverSeq:t.serverSeq,r=Math.max(this.clientSeq,t.clientSeq);return el.of(e,r)}getServerSeqAsString(){return this.serverSeq.toString()}getClientSeq(){return this.clientSeq}getServerSeq(){return this.serverSeq}equals(t){return this.clientSeq===t.clientSeq&&this.serverSeq==t.serverSeq}toTestString(){return`serverSeq=${this.serverSeq}, clientSeq=${this.clientSeq}`}}const NC=new el(0n,0);class Nr{constructor(t,e){y(this,"createdAt");y(this,"offset");this.createdAt=t,this.offset=e}static of(t,e){return new Nr(t,e)}static fromStruct(t){return Nr.of($n.fromStruct(t.createdAt),t.offset)}getCreatedAt(){return this.createdAt}getOffset(){return this.offset}equals(t){return this.createdAt.compare(t.createdAt)===0&&this.offset===t.offset}hasSameCreatedAt(t){return this.createdAt.compare(t.createdAt)===0}split(t){return new Nr(this.createdAt,this.offset+t)}toStruct(){return{createdAt:this.createdAt.toStruct(),offset:this.offset}}toTestString(){return`${this.createdAt.toTestString()}:${this.offset}`}toIDString(){return`${this.createdAt.toIDString()}:${this.offset}`}}const CC=Nr.of(ll,0);class sr{constructor(t,e){y(this,"id");y(this,"relativeOffset");this.id=t,this.relativeOffset=e}static of(t,e){return new sr(t,e)}static fromStruct(t){const e=Nr.fromStruct(t.id);return sr.of(e,t.relativeOffset)}getID(){return this.id}getRelativeOffset(){return this.relativeOffset}getAbsoluteID(){return Nr.of(this.id.getCreatedAt(),this.id.getOffset()+this.relativeOffset)}toTestString(){return`${this.id.toTestString()}:${this.relativeOffset}`}toStruct(){return{id:this.id.toStruct(),relativeOffset:this.relativeOffset}}equals(t){return this.id.equals(t.id)?this.relativeOffset===t.relativeOffset:!1}}class da extends lx{constructor(e,r,a){super(r);y(this,"id");y(this,"removedAt");y(this,"prev");y(this,"next");y(this,"insPrev");y(this,"insNext");this.id=e,this.removedAt=a}static create(e,r){return new da(e,r)}static createComparator(){return(e,r)=>{const a=e.getCreatedAt().compare(r.getCreatedAt());return a!==0?a:e.getOffset()>r.getOffset()?1:e.getOffset()<r.getOffset()?-1:0}}getID(){return this.id}getCreatedAt(){return this.id.getCreatedAt()}getLength(){return this.removedAt?0:this.getContentLength()}getContentLength(){return this.value&&this.value.length||0}getPrev(){return this.prev}getNext(){return this.next}getInsPrev(){return this.insPrev}getInsNext(){return this.insNext}getInsPrevID(){return this.insPrev.getID()}setPrev(e){this.prev=e,e&&(e.next=this)}setNext(e){this.next=e,e&&(e.prev=this)}setInsPrev(e){this.insPrev=e,e&&(e.insNext=this)}setInsNext(e){this.insNext=e,e&&(e.insPrev=this)}hasNext(){return!!this.next}hasInsPrev(){return!!this.insPrev}isRemoved(){return!!this.removedAt}getRemovedAt(){return this.removedAt}split(e){return new da(this.id.split(e),this.splitValue(e),this.removedAt)}canRemove(e,r,a){return r?!!(!this.removedAt||!a&&(e!=null&&e.after(this.removedAt))):!1}canStyle(e,r){return this.getCreatedAt().getLamport()<=r&&(!this.removedAt||e.after(this.removedAt))}setRemovedAt(e){this.removedAt=e}remove(e){if(!this.removedAt){this.removedAt=e;return}e.after(this.removedAt)&&(this.removedAt=e)}createPosRange(){return[sr.of(this.id,0),sr.of(this.id,this.getLength())]}getDataSize(){const e=this.value.getDataSize();return this.id&&(e.meta+=Ar),this.removedAt&&(e.meta+=Ar),e}deepcopy(){return new da(this.id,this.value,this.removedAt)}toTestString(){return`${this.id.toTestString()} ${this.value?this.value:""}`}splitValue(e){const r=this.value;return this.value=r.substring(0,e),r.substring(e,r.length)}toIDString(){return this.id.toIDString()}}class hl{constructor(){y(this,"head");y(this,"treeByIndex");y(this,"treeByID");this.head=da.create(CC),this.treeByIndex=new Zu,this.treeByID=new px(da.createComparator()),this.treeByIndex.insert(this.head),this.treeByID.put(this.head.getID(),this.head)}static create(){return new hl}edit(t,e,r,a){const l={data:0,meta:0},[c,d,h]=this.findNodeWithSplit(t[1],e),[g,p,w]=this.findNodeWithSplit(t[0],e);qe(l,d,p);const v=this.findBetween(w,h),[b,T]=this.deleteNodes(v,e,a),A=h?h.getID():c.getID();let C=sr.of(A,0);if(r){const L=this.posToIndex(g.createPosRange()[1],!0),N=this.insertAfter(g,da.create(Nr.of(e,0),r));qe(l,N.getDataSize()),b.length&&b[b.length-1].from===L?b[b.length-1].value=r:b.push({actor:e.getActorID(),from:L,to:L,value:r}),C=sr.of(N.getID(),N.getContentLength())}const D=[];for(const[,L]of T)D.push({parent:this,child:L});return[C,D,l,b]}indexToPos(t){const[e,r]=this.treeByIndex.find(t),a=e;return sr.of(a.getID(),r)}findIndexesFromRange(t){const[e,r]=t;return[this.posToIndex(e,!1),this.posToIndex(r,!0)]}posToIndex(t,e){const r=t.getAbsoluteID(),a=e?this.findFloorNodePreferToLeft(r):this.findFloorNode(r);if(!a)throw new j($.ErrInvalidArgument,`the node of the given id should be found: ${r.toTestString()}`);const l=this.treeByIndex.indexOf(a),c=a.isRemoved()?0:r.getOffset()-a.getID().getOffset();return l+c}findNode(t){return this.findFloorNode(t)}get length(){return this.treeByIndex.length}getTreeByIndex(){return this.treeByIndex}getTreeByID(){return this.treeByID}toString(){const t=[];for(const e of this)e.isRemoved()||t.push(e.getValue());return t.join("")}*[Symbol.iterator](){let t=this.head.getNext();for(;t;)yield t,t=t.getNext()}getHead(){return this.head}deepcopy(){const t=new hl;let e=this.head.getNext(),r=t.head,a;for(;e;){if(a=t.insertAfter(r,e.deepcopy()),e.hasInsPrev()){const l=t.findNode(e.getInsPrevID());a.setInsPrev(l)}r=a,e=e.getNext()}return t}toTestString(){const t=[];let e=this.head;for(;e;)e.isRemoved()?t.push(`{${e.toTestString()}}`):t.push(`[${e.toTestString()}]`),e=e.getNext();return t.join("")}insertAfter(t,e){const r=t.getNext();return e.setPrev(t),r&&r.setPrev(e),this.treeByID.put(e.getID(),e),this.treeByIndex.insertAfter(t,e),e}findNodeWithSplit(t,e){const r=t.getAbsoluteID();let a=this.findFloorNodePreferToLeft(r);const l=r.getOffset()-a.getID().getOffset(),[,c]=this.splitNode(a,l);for(;a.hasNext()&&a.getNext().getCreatedAt().after(e);)a=a.getNext();return[a,c,a.getNext()]}findFloorNodePreferToLeft(t){let e=this.findFloorNode(t);if(!e)throw new j($.ErrInvalidArgument,`the node of the given id should be found: ${t.toTestString()}`);if(t.getOffset()>0&&e.getID().getOffset()==t.getOffset()){if(!e.hasInsPrev())return e;e=e.getInsPrev()}return e}findFloorNode(t){const e=this.treeByID.floorEntry(t);if(e&&!(!e.key.equals(t)&&!e.key.hasSameCreatedAt(t)))return e.value}findBetween(t,e){const r=[];let a=t;for(;a&&a!==e;)r.push(a),a=a.getNext();return r}splitNode(t,e){const r={data:0,meta:0};if(e>t.getContentLength())throw new j($.ErrInvalidArgument,"offset should be less than or equal to length");if(e===0)return[t,r];if(e===t.getContentLength())return[t.getNext(),r];const a=t.getDataSize(),l=t.split(e);this.treeByIndex.updateWeight(l),this.insertAfter(t,l);const c=t.getInsNext();return c&&c.setInsPrev(l),l.setInsPrev(t),qe(r,t.getDataSize(),l.getDataSize()),ja(r,a),[l,r]}deleteNodes(t,e,r){if(!t.length)return[[],new Map];const a=r===void 0||r.size()===0,l=[],c=[],[d,h]=this.findEdgesOfCandidates(t);c.push(d);for(const w of t){let v=!1;if(a)v=!0;else{const T=r==null?void 0:r.get(w.getCreatedAt().getActorID());T&&T>=w.getCreatedAt().getLamport()&&(v=!0)}let b=!1;if(w.getRemovedAt()){const T=r==null?void 0:r.get(w.getRemovedAt().getActorID());(a||T&&T>=w.getRemovedAt().getLamport())&&(b=!0)}w.canRemove(e,v,b)?l.push(w):c.push(w)}c.push(h);const g=this.makeChanges(c,e),p=new Map;for(const w of l)p.set(w.getID().toIDString(),w),w.remove(e);return this.deleteIndexNodes(c),[g,p]}findEdgesOfCandidates(t){return[t[0].getPrev(),t[t.length-1].getNext()]}makeChanges(t,e){const r=[];let a,l;for(let c=0;c<t.length-1;c++){const d=t[c],h=t[c+1];d.getNext()!=h&&([a]=this.findIndexesFromRange(d.getNext().createPosRange()),h?[,l]=this.findIndexesFromRange(h.getPrev().createPosRange()):l=this.treeByIndex.length,a<l&&r.push({actor:e.getActorID(),from:a,to:l}))}return r.reverse()}deleteIndexNodes(t){for(let e=0;e<t.length-1;e++){const r=t[e],a=t[e+1];r.getNext()!=a&&this.treeByIndex.deleteRange(r,a)}}purge(t){this.treeByIndex.delete(t),this.treeByID.remove(t.getID());const e=t.getPrev(),r=t.getNext(),a=t.getInsPrev(),l=t.getInsNext();e&&e.setNext(r),r&&r.setPrev(e),t.setPrev(void 0),t.setNext(void 0),a&&a.setInsNext(l),l&&l.setInsPrev(a),t.setInsPrev(void 0),t.setInsNext(void 0)}}const yS=n=>n<0?Math.ceil(n):Math.floor(n);var Ir=(n=>(n[n.Int=0]="Int",n[n.Long=1]="Long",n))(Ir||{});class sn extends dc{constructor(e,r,a){super(a);y(this,"valueType");y(this,"value");switch(this.valueType=e,e){case 0:typeof r=="number"?r>Math.pow(2,31)-1||r<-Math.pow(2,31)?this.value=Pt.fromNumber(r).toInt():this.value=yS(r):this.value=r.toInt();break;case 1:typeof r=="number"?this.value=Pt.fromNumber(r):this.value=r;break;default:throw new j($.ErrUnimplemented,`unimplemented type: ${e}`)}}static create(e,r,a){return new sn(e,r,a)}static valueFromBytes(e,r){switch(e){case 0:return r[0]|r[1]<<8|r[2]<<16|r[3]<<24;case 1:return Pt.fromBytesLE(Array.from(r));default:throw new j($.ErrUnimplemented,`unimplemented type: ${e}`)}}getDataSize(){return{data:this.valueType===0?4:8,meta:this.getMetaUsage()}}toJSON(){return`${this.value}`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:this.value,type:"YORKIE_COUNTER"}}deepcopy(){const e=sn.create(this.valueType,this.value,this.getCreatedAt());return e.setRemovedAt(this.getRemovedAt()),e.setMovedAt(this.getMovedAt()),e}getType(){return this.valueType}static getCounterType(e){switch(typeof e){case"object":return e instanceof Pt?1:void 0;case"number":return e>Math.pow(2,31)-1||e<-Math.pow(2,31)?1:0;default:return}}static isSupport(e){return!!sn.getCounterType(e)}static isInteger(e){return e%1===0}isNumericType(){const e=this.valueType;return e===0||e===1}getValueType(){return this.valueType}getValue(){return this.value}toBytes(){switch(this.valueType){case 0:{const e=this.value;return new Uint8Array([e&255,e>>8&255,e>>16&255,e>>24&255])}case 1:{const r=this.value.toBytesLE();return Uint8Array.from(r)}default:throw new j($.ErrUnimplemented,`unimplemented type: ${this.valueType}`)}}increase(e){function r(a){if(!a.isNumericType())throw new TypeError(`Unsupported type of value: ${typeof a.getValue()}`)}return r(this),r(e),this.valueType===1?this.value=this.value.add(e.getValue()):e.getType()===re.Long?this.value=this.value+e.getValue().toInt():this.value=Pt.fromNumber(this.value+yS(e.getValue())).toInt(),this}}class gl extends ar{constructor(e,r,a){super(e,a);y(this,"value");this.value=r}static create(e,r,a){return new gl(e,r,a)}execute(e){const r=e.findByCreatedAt(this.getParentCreatedAt());if(!r)throw new j($.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(r instanceof sn))throw new j($.ErrInvalidArgument,"fail to execute, only Counter can execute increase");const a=r,l=this.value.deepcopy();return a.increase(l),{opInfos:[{type:"increase",path:e.createPath(this.getParentCreatedAt()),value:l.getValue()}],reverseOp:this.toReverseOperation()}}toReverseOperation(){const e=this.value.deepcopy(),a=e.getType()===re.Long?e.getValue().multiply(-1):e.getValue()*-1;return gl.create(this.getParentCreatedAt(),ce.of(a,e.getCreatedAt()))}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.INCREASE.${this.value.toJSON()}`}getValue(){return this.value}}class As extends ar{constructor(e,r,a,l,c,d){super(e,d);y(this,"fromPos");y(this,"toPos");y(this,"attributes");y(this,"attributesToRemove");this.fromPos=r,this.toPos=a,this.attributes=l,this.attributesToRemove=c}static create(e,r,a,l,c){return new As(e,r,a,l,[],c)}static createTreeRemoveStyleOperation(e,r,a,l,c){return new As(e,r,a,new Map,l,c)}execute(e,r,a){const l=e.findByCreatedAt(this.getParentCreatedAt());if(!l)throw new j($.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(l instanceof vn))throw new j($.ErrInvalidArgument,"fail to execute, only Tree can execute edit");const c=l;let d,h,g={data:0,meta:0};if(this.attributes.size){const p={};[...this.attributes].forEach(([w,v])=>p[w]=v),[h,d,g]=c.style([this.fromPos,this.toPos],p,this.getExecutedAt(),a)}else{const p=this.attributesToRemove;[h,d,g]=c.removeStyle([this.fromPos,this.toPos],p,this.getExecutedAt(),a)}e.acc(g);for(const p of h)e.registerGCPair(p);return{opInfos:d.map(({from:p,to:w,value:v,fromPath:b,toPath:T})=>({type:"tree-style",from:p,to:w,value:this.attributes.size?{attributes:v}:{attributesToRemove:v},fromPath:b,toPath:T,path:e.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),r=`${this.fromPos.getLeftSiblingID().getCreatedAt().toTestString()}:${this.fromPos.getLeftSiblingID().getOffset()}`,a=`${this.toPos.getLeftSiblingID().getCreatedAt().toTestString()}:${this.toPos.getLeftSiblingID().getOffset()}`;return`${e}.STYLE(${r},${a},${Object.entries(this.attributes||{}).map(([l,c])=>`${l}:"${c}"`).join(" ")})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getAttributes(){return this.attributes}getAttributesToRemove(){return this.attributesToRemove}}class Ns extends ar{constructor(e,r,a,l){super(e,l);y(this,"createdAt");y(this,"value");this.createdAt=r,this.value=a}static create(e,r,a,l){return new Ns(e,r,a,l)}execute(e){const r=e.findByCreatedAt(this.getParentCreatedAt());if(!r)throw new j($.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(r instanceof je))throw new j($.ErrInvalidArgument,"fail to execute, only array can execute set");const a=r.getByID(this.createdAt).deepcopy(),l=this.toReverseOperation(this.value,a),c=this.value.deepcopy();return r.insertAfter(this.createdAt,c,this.getExecutedAt()),r.delete(this.createdAt,this.getExecutedAt()),e.registerElement(c),{opInfos:[{type:"array-set",path:e.createPath(this.getParentCreatedAt())}],reverseOp:l}}toReverseOperation(e,r){return Ns.create(this.getParentCreatedAt(),e.getCreatedAt(),r)}getEffectedCreatedAt(){return this.createdAt}toTestString(){return`${this.getParentCreatedAt().toTestString()}.ARRAY_SET.${this.createdAt.toTestString()}=${this.value.toSortedJSON()}`}getCreatedAt(){return this.createdAt}getValue(){return this.value}setCreatedAt(e){this.createdAt=e}}function kC(n){const t=new rh,e=t.data;for(const[r,a]of Object.entries(n))e[r]=JSON.stringify(a);return t}function DC(n){if(n.type===kr.Put)return new Fu({type:Za.PUT,presence:kC(n.presence)});if(n.type===kr.Clear)return new Fu({type:Za.CLEAR});throw new j($.ErrUnimplemented,"unimplemented type")}function IC(n){return new ax({serverSeq:n.getServerSeq(),clientSeq:n.getClientSeq()})}function bx(n){return new eh({clientSeq:n.getClientSeq(),lamport:n.getLamport(),actorId:oh(n.getActorID()),versionVector:gp(n.getVersionVector())})}function Tt(n){if(n)return new bt({lamport:n.getLamport(),delimiter:n.getDelimiter(),actorId:oh(n.getActorID())})}function gp(n){if(!n)return;const t=new nh;for(const[e,r]of n){const a=dk(oh(e));t.vector[a]=BigInt(r.toString())}return t}function Sx(n){switch(n){case re.Null:return Mt.NULL;case re.Boolean:return Mt.BOOLEAN;case re.Integer:return Mt.INTEGER;case re.Long:return Mt.LONG;case re.Double:return Mt.DOUBLE;case re.String:return Mt.STRING;case re.Bytes:return Mt.BYTES;case re.Date:return Mt.DATE;default:throw new j($.ErrInvalidType,`unsupported type: ${n}`)}}function xx(n){switch(n){case Ir.Int:return Mt.INTEGER_CNT;case Ir.Long:return Mt.LONG_CNT;default:throw new j($.ErrInvalidType,`unsupported type: ${n}`)}}function Jf(n){if(n instanceof Ve)return new kn({type:Mt.JSON_OBJECT,createdAt:Tt(n.getCreatedAt()),value:zx(n)});if(n instanceof je)return new kn({type:Mt.JSON_ARRAY,createdAt:Tt(n.getCreatedAt()),value:lk(n)});if(n instanceof pn)return new kn({type:Mt.TEXT,createdAt:Tt(n.getCreatedAt())});if(n instanceof ce)return new kn({type:Sx(n.getType()),createdAt:Tt(n.getCreatedAt()),value:n.toBytes()});if(n instanceof sn)return new kn({type:xx(n.getType()),createdAt:Tt(n.getCreatedAt()),value:n.toBytes()});if(n instanceof vn)return new kn({type:Mt.TREE,createdAt:Tt(n.getCreatedAt()),value:ck(n)});throw new j($.ErrUnimplemented,"unimplemented element")}function OC(n){return new Gu({createdAt:Tt(n.getCreatedAt()),offset:n.getOffset()})}function $f(n){return new Qa({createdAt:Tt(n.getID().getCreatedAt()),offset:n.getID().getOffset(),relativeOffset:n.getRelativeOffset()})}function Hf(n){return new Fa({parentId:Pu(n.getParentID()),leftSiblingId:Pu(n.getLeftSiblingID())})}function Pu(n){return new ca({createdAt:Tt(n.getCreatedAt()),offset:n.getOffset()})}function Tx(n){const t=new up;if(n instanceof Wa){const e=n,r=new md;r.parentCreatedAt=Tt(e.getParentCreatedAt()),r.key=e.getKey(),r.value=Jf(e.getValue()),r.executedAt=Tt(e.getExecutedAt()),t.body.case="set",t.body.value=r}else if(n instanceof ma){const e=n,r=new yd;r.parentCreatedAt=Tt(e.getParentCreatedAt()),r.prevCreatedAt=Tt(e.getPrevCreatedAt()),r.value=Jf(e.getValue()),r.executedAt=Tt(e.getExecutedAt()),t.body.case="add",t.body.value=r}else if(n instanceof nr){const e=n,r=new pd;r.parentCreatedAt=Tt(e.getParentCreatedAt()),r.prevCreatedAt=Tt(e.getPrevCreatedAt()),r.createdAt=Tt(e.getCreatedAt()),r.executedAt=Tt(e.getExecutedAt()),t.body.case="move",t.body.value=r}else if(n instanceof Dr){const e=n,r=new vd;r.parentCreatedAt=Tt(e.getParentCreatedAt()),r.createdAt=Tt(e.getCreatedAt()),r.executedAt=Tt(e.getExecutedAt()),t.body.case="remove",t.body.value=r}else if(n instanceof hc){const e=n,r=new wd;r.parentCreatedAt=Tt(e.getParentCreatedAt()),r.from=$f(e.getFromPos()),r.to=$f(e.getToPos()),r.content=e.getContent();const a=r.attributes;for(const[l,c]of e.getAttributes())a[l]=c;r.executedAt=Tt(e.getExecutedAt()),t.body.case="edit",t.body.value=r}else if(n instanceof gc){const e=n,r=new bd;r.parentCreatedAt=Tt(e.getParentCreatedAt()),r.from=$f(e.getFromPos()),r.to=$f(e.getToPos());const a=r.attributes;for(const[l,c]of e.getAttributes())a[l]=c;r.executedAt=Tt(e.getExecutedAt()),t.body.case="style",t.body.value=r}else if(n instanceof gl){const e=n,r=new Sd;r.parentCreatedAt=Tt(e.getParentCreatedAt()),r.value=Jf(e.getValue()),r.executedAt=Tt(e.getExecutedAt()),t.body.case="increase",t.body.value=r}else if(n instanceof mc){const e=n,r=new xd;r.parentCreatedAt=Tt(e.getParentCreatedAt()),r.from=Hf(e.getFromPos()),r.to=Hf(e.getToPos()),r.contents=UC(e.getContents()),r.splitLevel=e.getSplitLevel(),r.executedAt=Tt(e.getExecutedAt()),t.body.case="treeEdit",t.body.value=r}else if(n instanceof As){const e=n,r=new Td;r.parentCreatedAt=Tt(e.getParentCreatedAt()),r.from=Hf(e.getFromPos()),r.to=Hf(e.getToPos());const a=e.getAttributesToRemove();if(a.length>0)r.attributesToRemove=a;else{const l=r.attributes;for(const[c,d]of e.getAttributes())l[c]=d}r.executedAt=Tt(e.getExecutedAt()),t.body.case="treeStyle",t.body.value=r}else if(n instanceof Ns){const e=n,r=new Ad;r.parentCreatedAt=Tt(e.getParentCreatedAt()),r.createdAt=Tt(e.getCreatedAt()),r.value=Jf(e.getValue()),r.executedAt=Tt(e.getExecutedAt()),t.body.case="arraySet",t.body.value=r}else throw new j($.ErrUnimplemented,"unimplemented operation");return t}function MC(n){const t=[];for(const e of n)t.push(Tx(e));return t}function RC(n){const t=new ix({id:bx(n.getID()),message:n.getMessage()});return n.hasOperations()&&(t.operations=MC(n.getOperations())),n.hasPresenceChange()&&(t.presenceChange=DC(n.getPresenceChange())),t}function BC(n){const t=[];for(const e of n)t.push(RC(e));return t}function zC(n){const t=[];for(const e of n)t.push(new sx({key:e.getStrKey(),element:yp(e.getValue())}));return t}function LC(n){const t=[];for(const e of n)t.push(new Od({element:yp(e.getValue())}));return t}function _C(n){const t=[];for(const e of n){const r=new Md;r.id=OC(e.getID()),r.value=e.getValue().getContent(),r.removedAt=Tt(e.getRemovedAt());const a=r.attributes,l=e.getValue().getAttrs();for(const c of l){const d=new ol;d.value=c.getValue(),d.updatedAt=Tt(c.getUpdatedAt()),a[c.getKey()]=d}t.push(r)}return t}function UC(n){const t=[];if(!n||!n.length)return t;for(const e of n)t.push(new Rd({content:mp(e)}));return t}function qC(n){const t={};for(const e of n)t[e.getKey()]=new ol({value:e.getValue(),updatedAt:Tt(e.getUpdatedAt()),isRemoved:e.isRemoved()});return t}function mp(n){if(!n)return[];const t=[];return ih(n,(e,r)=>{const a=new Xu({id:Pu(e.id),type:e.type,removedAt:Tt(e.removedAt),depth:r});e.isText&&(a.value=e.value),e.insPrevID&&(a.insPrevId=Pu(e.insPrevID)),e.insNextID&&(a.insNextId=Pu(e.insNextID)),e.attrs&&(a.attributes=qC(e.attrs)),t.push(a)}),t}function PC(n){const t=new an;return t.body.case="jsonObject",t.body.value=new Ed({nodes:zC(n.getRHT()),createdAt:Tt(n.getCreatedAt()),movedAt:Tt(n.getMovedAt()),removedAt:Tt(n.getRemovedAt())}),t}function Ax(n){const t=new an;return t.body.case="jsonArray",t.body.value=new Nd({nodes:LC(n.getElements()),createdAt:Tt(n.getCreatedAt()),movedAt:Tt(n.getMovedAt()),removedAt:Tt(n.getRemovedAt())}),t}function JC(n){const t=new an;return t.body.case="primitive",t.body.value=new Cd({type:Sx(n.getType()),value:n.toBytes(),createdAt:Tt(n.getCreatedAt()),movedAt:Tt(n.getMovedAt()),removedAt:Tt(n.getRemovedAt())}),t}function $C(n){const t=new an;return t.body.case="text",t.body.value=new kd({nodes:_C(n.getRGATreeSplit()),createdAt:Tt(n.getCreatedAt()),movedAt:Tt(n.getMovedAt()),removedAt:Tt(n.getRemovedAt())}),t}function HC(n){const t=new an;return t.body.case="counter",t.body.value=new Dd({type:xx(n.getType()),value:n.toBytes(),createdAt:Tt(n.getCreatedAt()),movedAt:Tt(n.getMovedAt()),removedAt:Tt(n.getRemovedAt())}),t}function Ex(n){const t=new an;return t.body.case="tree",t.body.value=new Id({nodes:mp(n.getRoot()),createdAt:Tt(n.getCreatedAt()),movedAt:Tt(n.getMovedAt()),removedAt:Tt(n.getRemovedAt())}),t}function yp(n){if(n instanceof Ve)return PC(n);if(n instanceof je)return Ax(n);if(n instanceof ce)return JC(n);if(n instanceof pn)return $C(n);if(n instanceof sn)return HC(n);if(n instanceof vn)return Ex(n);throw new j($.ErrUnimplemented,"unimplemented element")}function VC(n){return new ks({documentKey:n.getDocumentKey(),checkpoint:IC(n.getCheckpoint()),isRemoved:n.getIsRemoved(),changes:BC(n.getChanges()),snapshot:n.getSnapshot(),versionVector:gp(n.getVersionVector())})}function Ru(n){if(!(n instanceof ee))return{};const t=n.findDetails(lC);for(const e of t)return e.metadata;return{}}function Xo(n){return Ru(n).code??""}function Vm(n,t){return n instanceof ee&&Xo(n)===t}function Nx(n){return Zn.of(n.clientSeq,BigInt(n.lamport),Sp(n.actorId),pp(n.versionVector),BigInt(n.serverSeq))}function pp(n){if(!n)return;const t=new tl;return Object.entries(n.vector).forEach(([e,r])=>{const a=ah(fk(e));t.set(a,BigInt(r.toString()))}),t}function At(n){if(n)return $n.of(BigInt(n.lamport),n.delimiter,Sp(n.actorId))}function vp(n){const t={};return Object.entries(n.data).forEach(([e,r])=>{t[e]=JSON.parse(r)}),t}function jC(n){const t=n.type;if(t===Za.PUT){const e=vp(n.presence);return{type:kr.Put,presence:e}}if(t===Za.CLEAR)return{type:kr.Clear};throw new j($.ErrInvalidType,`unsupported type: ${t}`)}function YC(n){const t=new Map;return Object.entries(n).forEach(([e,r])=>{t.set(e,vp(r))}),t}function Cx(n){switch(n){case Mt.NULL:return re.Null;case Mt.BOOLEAN:return re.Boolean;case Mt.INTEGER:return re.Integer;case Mt.LONG:return re.Long;case Mt.DOUBLE:return re.Double;case Mt.STRING:return re.String;case Mt.BYTES:return re.Bytes;case Mt.DATE:return re.Date}throw new j($.ErrUnimplemented,`unimplemented value type: ${n}`)}function qd(n){switch(n){case Mt.INTEGER_CNT:return Ir.Int;case Mt.LONG_CNT:return Ir.Long}throw new j($.ErrUnimplemented,`unimplemented value type: ${n}`)}function Vf(n){switch(n.type){case Mt.JSON_OBJECT:return n.value?Bx(n.value):Ve.create(At(n.createdAt));case Mt.JSON_ARRAY:return n.value?ok(n.value):je.create(At(n.createdAt));case Mt.TEXT:return pn.create(hl.create(),At(n.createdAt));case Mt.TREE:return uk(n.value);case Mt.NULL:case Mt.BOOLEAN:case Mt.INTEGER:case Mt.LONG:case Mt.DOUBLE:case Mt.STRING:case Mt.BYTES:case Mt.DATE:return ce.of(ce.valueFromBytes(Cx(n.type),n.value),At(n.createdAt));case Mt.INTEGER_CNT:case Mt.LONG_CNT:return sn.create(qd(n.type),sn.valueFromBytes(qd(n.type),n.value),At(n.createdAt))}}function jf(n){return sr.of(Nr.of(At(n.createdAt),n.offset),n.relativeOffset)}function kx(n){return Nr.of(At(n.createdAt),n.offset)}function KC(n){const t=Wu.create(n.value);Object.entries(n.attributes).forEach(([r,a])=>{t.setAttr(r,a.value,At(a.updatedAt))});const e=da.create(kx(n.id),t);return e.setRemovedAt(At(n.removedAt)),e}function Yo(n){return rr.of(Ju(n.parentId),Ju(n.leftSiblingId))}function Ju(n){return Pe.of(At(n.createdAt),n.offset)}function GC(n){if(!n.length)return;const t=[];return n.forEach(e=>{const r=wp(e.content);t.push(r)}),t}function wp(n){if(n.length===0)return;const t=[];for(const a of n)t.push(FC(a));const e=t[t.length-1],r=new Map;r.set(n[t.length-1].depth,t[t.length-1]);for(let a=t.length-2;a>=0;a--)r.get(n[a].depth-1).prepend(t[a]),r.set(n[a].depth,t[a]);return e.updateDescendantsSize(),e.updateDescendantsSize(!0),vn.create(e,ll).getRoot()}function XC(n){const t=Es.create();for(const[e,r]of Object.entries(n))t.setInternal(e,r.value,At(r.updatedAt),r.isRemoved);return t}function FC(n){const t=Ju(n.id),e=yn.create(t,n.type),r=Object.entries(n.attributes);return e.isText?e.value=n.value:r.length&&(e.attrs=XC(n.attributes)),n.insPrevId&&(e.insPrevID=Ju(n.insPrevId)),n.insNextId&&(e.insNextID=Ju(n.insNextId)),e.removedAt=At(n.removedAt),e}function Dx(n){if(n.body.case==="set"){const t=n.body.value;return Wa.create(t.key,Vf(t.value),At(t.parentCreatedAt),At(t.executedAt))}else if(n.body.case==="add"){const t=n.body.value;return ma.create(At(t.parentCreatedAt),At(t.prevCreatedAt),Vf(t.value),At(t.executedAt))}else if(n.body.case==="move"){const t=n.body.value;return nr.create(At(t.parentCreatedAt),At(t.prevCreatedAt),At(t.createdAt),At(t.executedAt))}else if(n.body.case==="remove"){const t=n.body.value;return Dr.create(At(t.parentCreatedAt),At(t.createdAt),At(t.executedAt))}else if(n.body.case==="edit"){const t=n.body.value,e=new Map;return Object.entries(t.attributes).forEach(([r,a])=>{e.set(r,a)}),hc.create(At(t.parentCreatedAt),jf(t.from),jf(t.to),t.content,e,At(t.executedAt))}else if(n.body.case==="style"){const t=n.body.value,e=new Map;return Object.entries(t.attributes).forEach(([r,a])=>{e.set(r,a)}),gc.create(At(t.parentCreatedAt),jf(t.from),jf(t.to),e,At(t.executedAt))}else if(n.body.case==="increase"){const t=n.body.value;return gl.create(At(t.parentCreatedAt),Vf(t.value),At(t.executedAt))}else if(n.body.case==="treeEdit"){const t=n.body.value;return mc.create(At(t.parentCreatedAt),Yo(t.from),Yo(t.to),GC(t.contents),t.splitLevel,At(t.executedAt))}else if(n.body.case==="treeStyle"){const t=n.body.value,e=new Map,r=t.attributesToRemove;return(r==null?void 0:r.length)>0?As.createTreeRemoveStyleOperation(At(t.parentCreatedAt),Yo(t.from),Yo(t.to),r,At(t.executedAt)):(Object.entries(t.attributes).forEach(([a,l])=>{e.set(a,l)}),As.create(At(t.parentCreatedAt),Yo(t.from),Yo(t.to),e,At(t.executedAt)))}else if(n.body.case==="arraySet"){const t=n.body.value;return Ns.create(At(t.parentCreatedAt),At(t.createdAt),Vf(t.value),At(t.executedAt))}else throw new j($.ErrUnimplemented,"unimplemented operation")}function ZC(n){const t=[];for(const e of n){const r=Dx(e);r&&t.push(r)}return t}function Ix(n){const t=[];for(const e of n)t.push(dl.create({id:Nx(e.id),operations:ZC(e.operations),presenceChange:e.presenceChange?jC(e.presenceChange):void 0,message:e.message}));return t}function QC(n){return el.of(BigInt(n.serverSeq),n.clientSeq)}function WC(n){return sh.create(n.documentKey,QC(n.checkpoint),n.isRemoved,Ix(n.changes),pp(n.versionVector),n.snapshot)}function Ox(n){const t=new ul;for(const r of n.nodes){const a=bp(r.element);t.set(r.key,a,a.getPositionedAt())}const e=new Ve(At(n.createdAt),t);return e.setMovedAt(At(n.movedAt)),e.setRemovedAt(At(n.removedAt)),e}function Mx(n){const t=new Qu;for(const r of n.nodes)t.insert(bp(r.element));const e=new je(At(n.createdAt),t);return e.setMovedAt(At(n.movedAt)),e.setRemovedAt(At(n.removedAt)),e}function tk(n){const t=ce.of(ce.valueFromBytes(Cx(n.type),n.value),At(n.createdAt));return t.setMovedAt(At(n.movedAt)),t.setRemovedAt(At(n.removedAt)),t}function ek(n){const t=new hl;let e=t.getHead();for(const a of n.nodes){const l=t.insertAfter(e,KC(a));a.insPrevId&&l.setInsPrev(t.findNode(kx(a.insPrevId))),e=l}const r=new pn(t,At(n.createdAt));return r.setMovedAt(At(n.movedAt)),r.setRemovedAt(At(n.removedAt)),r}function nk(n){const t=sn.create(qd(n.type),sn.valueFromBytes(qd(n.type),n.value),At(n.createdAt));return t.setMovedAt(At(n.movedAt)),t.setRemovedAt(At(n.removedAt)),t}function Rx(n){const t=wp(n.nodes);return vn.create(t,At(n.createdAt))}function bp(n){if(n.body.case==="jsonObject")return Ox(n.body.value);if(n.body.case==="jsonArray")return Mx(n.body.value);if(n.body.case==="primitive")return tk(n.body.value);if(n.body.case==="text")return ek(n.body.value);if(n.body.case==="counter")return nk(n.body.value);if(n.body.case==="tree")return Rx(n.body.value);throw new j($.ErrUnimplemented,"unimplemented element")}function rk(n){return n.map(t=>({path:t.path,type:t.type}))}function ik(n){if(!n)return{root:Ve.create(ll),presences:new Map};const t=oy.fromBinary(n);return{root:bp(t.root),presences:YC(t.presences)}}function sk(n){const t=gp(n);return ah(t.toBinary())}function ak(n){const t=xp(n),e=nh.fromBinary(t);return pp(e)}function Bx(n){if(!n)throw new j($.ErrInvalidArgument,"bytes is empty");const t=an.fromBinary(n);return Ox(t.body.value)}function zx(n){return yp(n).toBinary()}function ok(n){if(!n)throw new j($.ErrInvalidArgument,"bytes is empty");const t=an.fromBinary(n);return Mx(t.body.value)}function lk(n){return Ax(n).toBinary()}function uk(n){if(!n)throw new j($.ErrInvalidArgument,"bytes is empty");const t=an.fromBinary(n);return Rx(t.body.value)}function ck(n){return Ex(n).toBinary()}function ah(n){return n?Array.from(n).map(t=>t.toString(16).padStart(2,"0")).join(""):""}function Sp(n){return ah(n)}function xp(n){return new Uint8Array(n.match(/.{1,2}/g).map(t=>parseInt(t,16)))}function fk(n){if(typeof window<"u"&&typeof window.atob=="function"){const t=window.atob(n),e=t.length,r=new Uint8Array(e);for(let a=0;a<e;a++)r[a]=t.charCodeAt(a);return r}else if(typeof globalThis<"u"&&typeof globalThis.Buffer<"u"){const t=globalThis.Buffer;return new Uint8Array(t.from(n,"base64"))}else throw new Error("No base64 decoder available")}function oh(n){return xp(n)}function dk(n){if(typeof window<"u"&&typeof window.btoa=="function"){let t="";for(let e=0;e<n.byteLength;e++)t+=String.fromCharCode(n[e]);return window.btoa(t)}else{if(typeof globalThis<"u"&&typeof globalThis.Buffer<"u")return globalThis.Buffer.from(n).toString("base64");throw new Error("No base64 encoder available")}}function hk(n){const t=eh.fromBinary(n);return Nx(t)}function gk(n){const t=up.fromBinary(n);return Dx(t)}const ge={fromPresence:vp,toChangePack:VC,fromChangePack:WC,fromChanges:Ix,toTreeNodes:mp,fromTreeNodes:wp,objectToBytes:zx,bytesToObject:Bx,bytesToSnapshot:ik,bytesToHex:ah,hexToBytes:xp,toHexString:Sp,toUint8Array:oh,toOperation:Tx,toChangeID:bx,PbChangeID:eh,bytesToChangeID:hk,bytesToOperation:gk,versionVectorToHex:sk,hexToVersionVector:ak,fromSchemaRules:rk};var en=(n=>(n[n.Trivial=0]="Trivial",n[n.Debug=1]="Debug",n[n.Info=2]="Info",n[n.Warn=3]="Warn",n[n.Error=4]="Error",n[n.Fatal=5]="Fatal",n))(en||{});let Pa=3;function mk(n){Pa=n}const vt={trivial:(...n)=>{Pa>0||typeof console<"u"&&console.log("YORKIE T:",...n)},debug:(...n)=>{Pa>1||typeof console<"u"&&console.log("YORKIE D:",...n)},info:(...n)=>{Pa>2||typeof console<"u"&&console.log("YORKIE I:",...n)},warn:(...n)=>{Pa>3||typeof console<"u"&&(typeof console.warn<"u"?console.warn("YORKIE W:",...n):console.log("YORKIE W:",...n))},error:(...n)=>{Pa>4||typeof console<"u"&&(typeof console.error<"u"?console.error("YORKIE E:",...n):console.log("YORKIE E:",...n))},fatal:(...n)=>{typeof console<"u"&&(typeof console.error<"u"?console.error("YORKIE F:",...n):console.log("YORKIE F:",...n))},isEnabled:n=>Pa<=n};function Lx(){return"xxxxxxxx-xxxx-4xxxy-xxxx-xxxxxxxxxxx".replace(/[xy]/g,n=>{const t=Math.random()*16|0;return(n==="x"?t:t&3|8).toString(16)})}const jm=()=>{};class yk{constructor(t){y(this,"finalized",!1);y(this,"observers",[]);y(this,"finalError");try{t(this)}catch(e){this.error(e)}}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,r){let a;if(!t)throw new j($.ErrInvalidArgument,"missing observer");if(this.finalized)throw new j($.ErrRefused,"observable is finalized due to previous error");typeof t=="object"?a=t:a={next:t,error:e,complete:r},a.next===void 0&&(a.next=jm),a.error===void 0&&(a.error=jm),a.complete===void 0&&(a.complete=jm);const l=Lx(),c=this.unsubscribeOne.bind(this,l);if(this.observers.push({subscriptionID:l,observer:a}),this.finalized)try{this.finalError?a.error(this.finalError):a.complete()}catch(d){vt.warn(d)}return c}unsubscribeOne(t){var e;this.observers=(e=this.observers)==null?void 0:e.filter(r=>r.subscriptionID!==t)}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){if(this.observers!==void 0&&this.observers[t]!==void 0)try{e(this.observers[t].observer)}catch(r){vt.error(r)}}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.observers=void 0)}}function _x(n){const t=new yk(n);return{subscribe:t.subscribe.bind(t),getProxy:()=>t}}class $u{constructor(t,e,r,a){y(this,"prevID");y(this,"nextID");y(this,"delimiter");y(this,"message");y(this,"root");y(this,"operations");y(this,"presenceChange");y(this,"previousPresence");y(this,"reversePresenceKeys");this.prevID=t,this.nextID=t.next(),this.delimiter=ox,this.root=e,this.operations=[],this.previousPresence=Fn(r),this.presenceChange=void 0,this.reversePresenceKeys=new Set,this.message=a}static create(t,e,r,a){return new $u(t,e,r,a)}push(t){this.operations.push(t)}registerElement(t,e){this.root.registerElement(t,e)}registerRemovedElement(t){this.root.registerRemovedElement(t)}registerGCPair(t){this.root.registerGCPair(t)}getNextID(){return this.isPresenceOnlyChange()?this.prevID.next(!0).setLamport(this.prevID.getLamport()).setVersionVector(this.prevID.getVersionVector()):this.nextID}toChange(){const t=this.isPresenceOnlyChange()?this.prevID.next(!0):this.nextID;return dl.create({id:t,operations:this.operations,presenceChange:this.presenceChange,message:this.message})}isPresenceOnlyChange(){return this.operations.length===0}hasChange(){return this.operations.length>0||this.presenceChange!==void 0}setPresenceChange(t){this.presenceChange=t}setReversePresence(t,e){for(const r of Object.keys(t))e!=null&&e.addToHistory?this.reversePresenceKeys.add(r):this.reversePresenceKeys.delete(r)}getReversePresence(){if(this.reversePresenceKeys.size===0)return;const t={};for(const e of this.reversePresenceKeys)t[e]=this.previousPresence[e];return t}issueTimeTicket(){return this.delimiter+=1,this.nextID.createTimeTicket(this.delimiter)}getLastTimeTicket(){return this.nextID.createTimeTicket(this.delimiter)}acc(t){this.root.acc(t)}}function Ux(n,t){const e=new tc(n);return new Proxy(t,e.getHandlers())}class tc{constructor(t){y(this,"context");y(this,"handlers");this.context=t,this.handlers={set:(e,r,a)=>(vt.isEnabled(en.Trivial)&&vt.trivial(`obj[${r}]=${JSON.stringify(a)}`),tc.setInternal(t,e,r,a),!0),get:(e,r)=>(vt.isEnabled(en.Trivial)&&vt.trivial(`obj[${r}]`),r==="getID"?()=>e.getCreatedAt():r==="toJSON"||r==="toString"?()=>e.toJSON():r==="toJS"?()=>e.toJS():r==="toJSForTest"?()=>e.toJSForTest():Ja(t,e.get(r))),ownKeys:e=>e.getKeys(),getOwnPropertyDescriptor:()=>({enumerable:!0,configurable:!0}),deleteProperty:(e,r)=>(vt.isEnabled(en.Trivial)&&vt.trivial(`obj[${r}]`),tc.deleteInternal(t,e,r),!0)}}static setInternal(t,e,r,a){if(r.includes("."))throw new j($.ErrInvalidObjectKey,"key must not contain the '.'.");const l=t.issueTimeTicket(),c=Hu(t,a,l),d=e.set(r,c,l);t.registerElement(c,e),d&&t.registerRemovedElement(d),t.push(Wa.create(r,c.deepcopy(),e.getCreatedAt(),l))}static buildObjectMembers(t,e){const r={};for(const[a,l]of Object.entries(e)){if(a.includes("."))throw new j($.ErrInvalidObjectKey,"key must not contain the '.'.");const c=t.issueTimeTicket(),d=Hu(t,l,c);r[a]=d}return r}static deleteInternal(t,e,r){const a=t.issueTimeTicket(),l=e.deleteByKey(r,a);l&&(t.push(Dr.create(e.getCreatedAt(),l.getCreatedAt(),a)),t.registerRemovedElement(l))}getHandlers(){return this.handlers}}function pk(n,t){const e=new Gt(n,t);return new Proxy(t,e.getHandlers())}function pS(n){return typeof n=="string"||n instanceof String?!isNaN(n):!1}function vk(n){return["concat","entries","every","filter","find","findIndex","forEach","join","keys","map","reduce","reduceRight","slice","some","toLocaleString","toString","values"].includes(n)}class Gt{constructor(t,e){y(this,"context");y(this,"handlers");y(this,"array");this.context=t,this.array=e,this.handlers={get:(r,a,l)=>a==="getID"?()=>r.getCreatedAt():a==="getElementByID"?c=>{const d=r.getByID(c);if(!(!d||d.isRemoved()))return Xn(t,d)}:a==="getElementByIndex"?c=>{const d=r.get(c);return Xn(t,d)}:a==="getLast"?()=>Xn(t,r.getLast()):a==="delete"?c=>{const d=Gt.deleteInternalByIndex(t,r,c);return Xn(t,d)}:a==="deleteByID"?c=>{const d=Gt.deleteInternalByID(t,r,c);return Xn(t,d)}:a==="insertAfter"?(c,d)=>{const h=Gt.insertAfterInternal(t,r,c,d);return Xn(t,h)}:a==="insertIntegerAfter"?(c,d)=>{const h=Gt.insertIntegerAfterInternal(t,r,c,d);return Xn(t,h)}:a==="insertBefore"?(c,d)=>{const h=Gt.insertBeforeInternal(t,r,c,d);return Xn(t,h)}:a==="setValue"?(c,d)=>{const h=Gt.setValueInternal(t,r,c,d);return Xn(t,h)}:a==="moveBefore"?(c,d)=>{Gt.moveBeforeInternal(t,r,c,d)}:a==="moveAfter"?(c,d)=>{Gt.moveAfterInternal(t,r,c,d)}:a==="moveAfterByIndex"?(c,d)=>{Gt.moveAfterByIndexInternal(t,r,c,d)}:a==="moveFront"?c=>{Gt.moveFrontInternal(t,r,c)}:a==="moveLast"?c=>{Gt.moveLastInternal(t,r,c)}:pS(a)?Ja(t,r.get(Number(a))):a==="push"?c=>Gt.pushInternal(t,r,c):a==="splice"?(c,d,...h)=>Gt.splice(t,r,c,d,...h):a==="length"?r.length:typeof a=="symbol"&&a===Symbol.iterator?Gt.iteratorInternal.bind(this,t,r):a==="includes"?(c,d)=>Gt.includes(t,r,c,d):a==="indexOf"?(c,d)=>Gt.indexOf(t,r,c,d):a==="lastIndexOf"?(c,d)=>Gt.lastIndexOf(t,r,c,d):a==="toJSForTest"?()=>r.toJSForTest():a==="toTestString"?()=>Gt.toTestString(r):typeof a=="string"&&vk(a)?(...c)=>{const d=Array.from(r).map(h=>Ja(t,h));return Array.prototype[a].apply(d,c)}:Reflect.get(r,a,l),set:(r,a,l)=>{if(pS(a)){const c=Number(a);return Gt.setValueInternal(t,r,c,l),!0}return Reflect.set(r,a,l)},deleteProperty:(r,a)=>(vt.isEnabled(en.Trivial)&&vt.trivial(`array[${a}]`),Gt.deleteInternalByIndex(t,r,Number.parseInt(a)),!0)}}static*iteratorInternal(t,e){for(const r of e)yield Xn(t,r)}static buildArrayElements(t,e){const r=[];for(const a of e){const l=t.issueTimeTicket(),c=Hu(t,a,l);r.push(c)}return r}static pushInternal(t,e,r){return Gt.insertAfterInternal(t,e,e.getLastCreatedAt(),r),e.length}static moveBeforeInternal(t,e,r,a){const l=t.issueTimeTicket(),c=e.getPrevCreatedAt(r);e.moveAfter(c,a,l),t.push(nr.create(e.getCreatedAt(),c,a,l))}static moveAfterInternal(t,e,r,a){const l=t.issueTimeTicket();t.push(nr.create(e.getCreatedAt(),r,a,l)),e.moveAfter(r,a,l)}static moveAfterByIndexInternal(t,e,r,a){const l=e.get(r);if(!l)throw new j($.ErrInvalidArgument,`index out of bounds: ${r}`);const c=e.get(a);if(!c)throw new j($.ErrInvalidArgument,`index out of bounds: ${a}`);Gt.moveAfterInternal(t,e,l.getCreatedAt(),c.getCreatedAt())}static moveFrontInternal(t,e,r){const a=t.issueTimeTicket(),l=e.getHead();e.moveAfter(l.getCreatedAt(),r,a),t.push(nr.create(e.getCreatedAt(),l.getCreatedAt(),r,a))}static moveLastInternal(t,e,r){const a=t.issueTimeTicket(),l=e.getLastCreatedAt();e.moveAfter(l,r,a),t.push(nr.create(e.getCreatedAt(),l,r,a))}static insertAfterInternal(t,e,r,a){const l=t.issueTimeTicket(),c=Hu(t,a,l);return e.insertAfter(r,c),t.registerElement(c,e),t.push(ma.create(e.getCreatedAt(),r,c.deepcopy(),l)),c}static insertIntegerAfterInternal(t,e,r,a){const l=e.get(r);if(!l)throw new j($.ErrInvalidArgument,`index out of bounds: ${r}`);return Gt.insertAfterInternal(t,e,l.getCreatedAt(),a),e}static insertBeforeInternal(t,e,r,a){return Gt.insertAfterInternal(t,e,e.getPrevCreatedAt(r),a)}static setValueInternal(t,e,r,a){const l=e.get(r);if(!l)throw new j($.ErrInvalidArgument,`index out of bounds: ${r}`);return Gt.setByIndexInternal(t,e,l.getCreatedAt(),a),e}static setByIndexInternal(t,e,r,a){const l=t.issueTimeTicket(),c=Hu(t,a,l),d=c.deepcopy();return t.push(Ns.create(e.getCreatedAt(),r,d,l)),e.set(r,c,l),t.registerElement(c,e),c}static deleteInternalByIndex(t,e,r){const a=t.issueTimeTicket(),l=e.deleteByIndex(r,a);if(l)return t.push(Dr.create(e.getCreatedAt(),l.getCreatedAt(),a)),t.registerRemovedElement(l),l}static deleteInternalByID(t,e,r){const a=t.issueTimeTicket(),l=e.delete(r,a);return t.push(Dr.create(e.getCreatedAt(),l.getCreatedAt(),a)),t.registerRemovedElement(l),l}static splice(t,e,r,a,...l){const c=e.length,d=r>=0?Math.min(r,c):Math.max(c+r,0),h=a===void 0?c:a<0?d:Math.min(d+a,c),g=[];for(let p=d;p<h;p++){const w=Gt.deleteInternalByIndex(t,e,d);if(w){const v=w.deepcopy();v.setRemovedAt(),g.push(Ja(t,v))}}if(l){let p=d===0?e.getHead().getID():e.get(d-1).getID();for(const w of l)p=Gt.insertAfterInternal(t,e,p,w).getID()}return g}static includes(t,e,r,a){var d;const l=e.length,c=a===void 0?0:a<0?Math.max(a+l,0):a;if(c>=l)return!1;if(ce.isSupport(r))return Array.from(e).map(g=>Ja(t,g)).includes(r,c);for(let h=c;h<l;h++)if(((d=e.get(h))==null?void 0:d.getID())===r.getID())return!0;return!1}static indexOf(t,e,r,a){var d;const l=e.length,c=a===void 0?0:a<0?Math.max(a+l,0):a;if(c>=l)return-1;if(ce.isSupport(r))return Array.from(e).map(g=>Ja(t,g)).indexOf(r,c);for(let h=c;h<l;h++)if(((d=e.get(h))==null?void 0:d.getID())===r.getID())return h;return-1}static lastIndexOf(t,e,r,a){var d;const l=e.length,c=a===void 0||a>=l?l-1:a<0?a+l:a;if(c<0)return-1;if(ce.isSupport(r))return Array.from(e).map(g=>Ja(t,g)).lastIndexOf(r,c);for(let h=c;h>0;h--)if(((d=e.get(h))==null?void 0:d.getID())===r.getID())return h;return-1}static toTestString(t){return t.toTestString()}getHandlers(){return this.handlers}}class Tp{constructor(t,e){y(this,"context");y(this,"text");this.context=t,this.text=e}initialize(t,e){this.context=t,this.text=e}getID(){return this.text.getID()}edit(t,e,r,a){if(!this.context||!this.text)throw new j($.ErrNotInitialized,"Text is not initialized yet");if(t>e)throw new j($.ErrInvalidArgument,"from should be less than or equal to to");const l=this.text.indexRangeToPosRange(t,e);vt.isEnabled(en.Debug)&&vt.debug(`EDIT: f:${t}->${l[0].toTestString()}, t:${e}->${l[1].toTestString()} c:${r}`);const c=a?fl(a):void 0,d=this.context.issueTimeTicket(),[,h,g,p]=this.text.edit(l,r,d,c);this.context.acc(g);for(const w of h)this.context.registerGCPair(w);return this.context.push(new hc(this.text.getCreatedAt(),l[0],l[1],r,c?new Map(Object.entries(c)):new Map,d)),this.text.findIndexesFromRange(p)}delete(t,e){return this.edit(t,e,"")}empty(){return this.edit(0,this.length,"")}setStyle(t,e,r){if(!this.context||!this.text)throw new j($.ErrNotInitialized,"Text is not initialized yet");if(t>e)throw new j($.ErrInvalidArgument,"from should be less than or equal to to");const a=this.text.indexRangeToPosRange(t,e);vt.isEnabled(en.Debug)&&vt.debug(`STYL: f:${t}->${a[0].toTestString()}, t:${e}->${a[1].toTestString()} a:${JSON.stringify(r)}`);const l=fl(r),c=this.context.issueTimeTicket(),[d,h]=this.text.setStyle(a,l,c);this.context.acc(h);for(const g of d)this.context.registerGCPair(g);return this.context.push(new gc(this.text.getCreatedAt(),a[0],a[1],new Map(Object.entries(l)),c)),!0}indexRangeToPosRange(t){if(!this.context||!this.text)throw new j($.ErrNotInitialized,"Text is not initialized yet");const e=this.text.indexRangeToPosRange(t[0],t[1]);return[e[0].toStruct(),e[1].toStruct()]}posRangeToIndexRange(t){if(!this.context||!this.text)throw new j($.ErrNotInitialized,"Text is not initialized yet");const e=this.text.findIndexesFromRange([sr.fromStruct(t[0]),sr.fromStruct(t[1])]);return[e[0],e[1]]}toTestString(){if(!this.context||!this.text)throw new j($.ErrNotInitialized,"Text is not initialized yet");return this.text.toTestString()}values(){if(!this.context||!this.text)throw new j($.ErrNotInitialized,"Text is not initialized yet");return this.text.values()}get length(){return this.text.length}getTreeByIndex(){return this.text.getTreeByIndex()}getTreeByID(){return this.text.getTreeByID()}toString(){if(!this.context||!this.text)throw new j($.ErrNotInitialized,"Text is not initialized yet");return this.text.toString()}toJSON(){if(!this.context||!this.text)throw new j($.ErrNotInitialized,"Text is not initialized yet");return this.text.toJSON()}toJSForTest(){if(!this.context||!this.text)throw new j($.ErrNotInitialized,"Text is not initialized yet");return this.text.toJSForTest()}createRangeForTest(t,e){if(!this.context||!this.text)throw new j($.ErrNotInitialized,"Text is not initialized yet");return this.text.indexRangeToPosRange(t,e)}}class Ap{constructor(t,e){y(this,"valueType");y(this,"value");y(this,"context");y(this,"counter");this.valueType=t,this.value=e}initialize(t,e){this.valueType=e.getValueType(),this.context=t,this.counter=e,this.value=e.getValue()}getID(){return this.counter.getID()}getValue(){return this.value}getValueType(){return this.valueType}increase(t){if(!this.context||!this.counter)throw new j($.ErrNotInitialized,"Counter is not initialized yet");const e=this.context.issueTimeTicket(),r=ce.of(t,e);if(!r.isNumericType())throw new TypeError(`Unsupported type of value: ${typeof r.getValue()}`);return this.counter.increase(r),this.context.push(gl.create(this.counter.getCreatedAt(),r,e)),this}toJSForTest(){if(!this.context||!this.counter)throw new j($.ErrNotInitialized,"Counter is not initialized yet");return this.counter.toJSForTest()}}function Ep(n){if(n.isText)return{type:n.type,value:n.value};const t={type:n.type,children:n.children.map(e=>Ep(e))};return n.attrs&&(t.attributes=Ts(n.attrs.toObject())),t}function wk(n,t){const e={type:n.isText?n.parent.type:n.type,children:n.isText?n.parent.getChildrenText().length===t?[]:[{type:Er,value:n.parent.getChildrenText().slice(t)}]:n.children.slice(t).map(r=>Ep(r))};return n.attrs?e.attributes=Ts(n.attrs.toObject()):n.isText&&n.parent.attrs&&(e.attributes=Ts(n.parent.attrs.toObject())),e}function bk(n,t){const{node:e}=n,r=[...t].slice(0,-1),a=e.isText?e.parent.getChildrenText().length:e.children.length,l=[...r,a],c=[...r],d=[];c[c.length-1]+=1,t.every((g,p)=>g===l[p])||d.push({fromPath:[...t],toPath:l});const h=wk(e,t[t.length-1]);return h&&d.push({fromPath:c,toPath:c,content:h}),d}function Sk(n,t){const{node:e,offset:r}=n,a=e.children[r],l=e.children[r-1],{children:c}=a,d=[...t].slice(0,-1),h=[{fromPath:[...t],toPath:[...d,r+1]}];if(!a.children.length)return h;const g=[...d,r-1,l.hasTextChild()?l.getChildrenText().length:l.children.length],p=c.map(w=>Ep(w));return h.push({fromPath:g,toPath:g,content:p}),h}function Np(n,t,e){const{type:r}=n,a=e.issueTimeTicket();if(r===Er){qx(n);const{value:l}=n,c=yn.create(Pe.of(a,0),r,l);t.append(c)}else{const{children:l=[]}=n,{attributes:c}=n;let d;if(typeof c=="object"&&!hx(c)){const g=fl(c);d=new Es;for(const[p,w]of Object.entries(g))d.set(p,w,a)}const h=yn.create(Pe.of(a,0),r,void 0,d);t.append(h);for(const g of l)Np(g,h,e)}}function xk(n,t){const{type:e}=t,r=n.issueTimeTicket();let a;if(t.type===Er){const{value:l}=t;a=yn.create(Pe.of(r,0),e,l)}else if(t){const{children:l=[]}=t,{attributes:c}=t;let d;if(typeof c=="object"&&!hx(c)){const h=fl(c);d=new Es;for(const[g,p]of Object.entries(h))d.set(g,p,r)}a=yn.create(Pe.of(n.issueTimeTicket(),0),e,void 0,d);for(const h of l)Np(h,a,n)}return a}function qx(n){if(!n.value.length)throw new j($.ErrInvalidArgument,"text node cannot have empty value");return!0}function vS(n){if(!n.length)return!0;if(n[0].type===Er)for(const e of n){const{type:r}=e;if(r!==Er)throw new j($.ErrInvalidArgument,"element node and text node cannot be passed together");qx(e)}else for(const e of n){const{type:r}=e;if(r===Er)throw new j($.ErrInvalidArgument,"element node and text node cannot be passed together")}return!0}class Cp{constructor(t){y(this,"initialRoot");y(this,"context");y(this,"tree");this.initialRoot=t}initialize(t,e){this.context=t,this.tree=e}getID(){return this.tree.getID()}buildRoot(t){if(!this.initialRoot)return yn.create(Pe.of(t.issueTimeTicket(),0),pC);const e=yn.create(Pe.of(t.issueTimeTicket(),0),this.initialRoot.type);for(const r of this.initialRoot.children)Np(r,e,t);return e}getSize(){if(!this.context||!this.tree)throw new j($.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getSize()}getNodeSize(){if(!this.context||!this.tree)throw new j($.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getNodeSize()}getIndexTree(){if(!this.context||!this.tree)throw new j($.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getIndexTree()}splitByPath(t){if(!this.context||!this.tree)throw new j($.ErrNotInitialized,"Tree is not initialized yet");if(!t.length)throw new j($.ErrInvalidArgument,"path should not be empty");const e=this.tree.pathToTreePos(t),r=bk(e,t);for(const a of r){const{fromPath:l,toPath:c,content:d}=a,h=this.tree.pathToPos(l),g=this.tree.pathToPos(c);this.editInternal(h,g,d?[d]:[],0)}}mergeByPath(t){if(!this.context||!this.tree)throw new j($.ErrNotInitialized,"Tree is not initialized yet");if(!t.length)throw new j($.ErrInvalidArgument,"path should not be empty");const e=this.tree.pathToTreePos(t);if(e.node.isText)throw new j($.ErrInvalidArgument,"text node cannot be merged");const r=Sk(e,t);for(const a of r){const{fromPath:l,toPath:c,content:d}=a,h=this.tree.pathToPos(l),g=this.tree.pathToPos(c);this.editInternal(h,g,d??[],0)}}styleByPath(t,e){if(!this.context||!this.tree)throw new j($.ErrNotInitialized,"Tree is not initialized yet");if(!t.length)throw new j($.ErrInvalidArgument,"path should not be empty");const[r,a]=this.tree.pathToPosRange(t),l=this.context.issueTimeTicket(),c=e?fl(e):void 0,[d,,h]=this.tree.style([r,a],c,l);this.context.acc(h);for(const g of d)this.context.registerGCPair(g);this.context.push(As.create(this.tree.getCreatedAt(),r,a,c?new Map(Object.entries(c)):new Map,l))}style(t,e,r){if(!this.context||!this.tree)throw new j($.ErrNotInitialized,"Tree is not initialized yet");if(t>e)throw new j($.ErrInvalidArgument,"from should be less than or equal to to");const a=this.tree.findPos(t),l=this.tree.findPos(e),c=this.context.issueTimeTicket(),d=r?fl(r):void 0,[h,,g]=this.tree.style([a,l],d,c);this.context.acc(g);for(const p of h)this.context.registerGCPair(p);this.context.push(As.create(this.tree.getCreatedAt(),a,l,d?new Map(Object.entries(d)):new Map,c))}removeStyle(t,e,r){if(!this.context||!this.tree)throw new j($.ErrNotInitialized,"Tree is not initialized yet");if(t>e)throw new j($.ErrInvalidArgument,"from should be less than or equal to to");const a=this.tree.findPos(t),l=this.tree.findPos(e),c=this.context.issueTimeTicket(),[d,,h]=this.tree.removeStyle([a,l],r,c);this.context.acc(h);for(const g of d)this.context.registerGCPair(g);this.context.push(As.createTreeRemoveStyleOperation(this.tree.getCreatedAt(),a,l,r,c))}editInternal(t,e,r,a=0){var g;if(r.length!==0&&r[0]&&(vS(r),r[0].type!==Er))for(const p of r){const{children:w=[]}=p;vS(w)}const l=this.context.getLastTimeTicket();let c=new Array;if(((g=r[0])==null?void 0:g.type)===Er){let p="";for(const w of r){const{value:v}=w;p+=v}c.push(yn.create(Pe.of(this.context.issueTimeTicket(),0),Er,p))}else c=r.map(p=>p&&xk(this.context,p)).filter(p=>p);const[,d,h]=this.tree.edit([t,e],c.length?c.map(p=>p==null?void 0:p.deepcopy()):void 0,a,l,()=>this.context.issueTimeTicket());this.context.acc(h);for(const p of d)this.context.registerGCPair(p);return this.context.push(mc.create(this.tree.getCreatedAt(),t,e,c.length?c:void 0,a,l)),!0}editByPath(t,e,r,a=0){if(!this.context||!this.tree)throw new j($.ErrNotInitialized,"Tree is not initialized yet");if(t.length!==e.length)throw new j($.ErrInvalidArgument,"path length should be equal");if(!t.length||!e.length)throw new j($.ErrInvalidArgument,"path should not be empty");const l=this.tree.pathToPos(t),c=this.tree.pathToPos(e);return this.editInternal(l,c,r?[r]:[],a)}editBulkByPath(t,e,r,a=0){if(!this.context||!this.tree)throw new j($.ErrNotInitialized,"Tree is not initialized yet");if(t.length!==e.length)throw new j($.ErrInvalidArgument,"path length should be equal");if(!t.length||!e.length)throw new j($.ErrInvalidArgument,"path should not be empty");const l=this.tree.pathToPos(t),c=this.tree.pathToPos(e);return this.editInternal(l,c,r,a)}edit(t,e,r,a=0){if(!this.context||!this.tree)throw new j($.ErrNotInitialized,"Tree is not initialized yet");if(t>e)throw new j($.ErrInvalidArgument,"from should be less than or equal to to");const l=this.tree.findPos(t),c=this.tree.findPos(e);return this.editInternal(l,c,r?[r]:[],a)}editBulk(t,e,r,a=0){if(!this.context||!this.tree)throw new j($.ErrNotInitialized,"Tree is not initialized yet");if(t>e)throw new j($.ErrInvalidArgument,"from should be less than or equal to to");const l=this.tree.findPos(t),c=this.tree.findPos(e);return this.editInternal(l,c,r,a)}toXML(){if(!this.context||!this.tree)throw new j($.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toXML()}toJSON(){if(!this.context||!this.tree)throw new j($.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toJSON()}toJSForTest(){if(!this.context||!this.tree)throw new j($.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toJSForTest()}toJSInfoForTest(){if(!this.context||!this.tree)throw new j($.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toJSInfoForTest()}getRootTreeNode(){if(!this.context||!this.tree)throw new j($.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getRootTreeNode()}indexToPath(t){if(!this.context||!this.tree)throw new j($.ErrNotInitialized,"Tree is not initialized yet");return this.tree.indexToPath(t)}pathToIndex(t){if(!this.context||!this.tree)throw new j($.ErrNotInitialized,"Tree is not initialized yet");return this.tree.pathToIndex(t)}pathRangeToPosRange(t){if(!this.context||!this.tree)throw new j($.ErrNotInitialized,"Tree is not initialized yet");const e=[this.tree.pathToIndex(t[0]),this.tree.pathToIndex(t[1])],r=this.tree.indexRangeToPosRange(e);return[r[0].toStruct(),r[1].toStruct()]}indexRangeToPosRange(t){if(!this.context||!this.tree)throw new j($.ErrNotInitialized,"Tree is not initialized yet");return this.tree.indexRangeToPosStructRange(t)}posRangeToIndexRange(t){if(!this.context||!this.tree)throw new j($.ErrNotInitialized,"Tree is not initialized yet");const e=[rr.fromStruct(t[0]),rr.fromStruct(t[1])];return this.tree.posRangeToIndexRange(e)}posRangeToPathRange(t){if(!this.context||!this.tree)throw new j($.ErrNotInitialized,"Tree is not initialized yet");const e=[rr.fromStruct(t[0]),rr.fromStruct(t[1])];return this.tree.posRangeToPathRange(e)}}function wS(n,t){return Ux(n,t)}function Xn(n,t){if(t){if(t instanceof ce)return t;if(t instanceof Ve)return Ux(n,t);if(t instanceof je)return pk(n,t);if(t instanceof pn)return new Tp(n,t);if(t instanceof sn){const e=new Ap(Ir.Int,0);return e.initialize(n,t),e}else if(t instanceof vn){const e=new Cp;return e.initialize(n,t),e}}else return;throw new TypeError(`Unsupported type of element: ${typeof t}`)}function Ja(n,t){const e=Xn(n,t);return e instanceof ce?e.getValue():e}function Hu(n,t,e){let r;if(ce.isSupport(t))r=ce.of(t,e);else if(Array.isArray(t))r=je.create(e,Gt.buildArrayElements(n,t));else if(typeof t=="object")t instanceof Tp?(r=pn.create(hl.create(),e),t.initialize(n,r)):t instanceof Ap?(r=sn.create(t.getValueType(),t.getValue(),e),t.initialize(n,r)):t instanceof Cp?(r=vn.create(t.buildRoot(n),e),t.initialize(n,r)):r=Ve.create(e,tc.buildObjectMembers(n,t));else throw new TypeError(`Unsupported type of value: ${typeof t}`);return r}class ec{constructor(t){y(this,"rootObject");y(this,"elementPairMapByCreatedAt");y(this,"gcElementSetByCreatedAt");y(this,"gcPairMap");y(this,"docSize");this.rootObject=t,this.elementPairMapByCreatedAt=new Map,this.gcElementSetByCreatedAt=new Set,this.gcPairMap=new Map,this.docSize={live:{data:0,meta:0},gc:{data:0,meta:0}},this.registerElement(t,void 0),t.getDescendants(e=>{if(e.getRemovedAt()&&this.registerRemovedElement(e),e instanceof pn||e instanceof vn)for(const r of e.getGCPairs())this.registerGCPair(r);return!1})}static create(){return new ec(Ve.create(ll))}findByCreatedAt(t){const e=this.elementPairMapByCreatedAt.get(t.toIDString());if(e)return e.element}findElementPairByCreatedAt(t){return this.elementPairMapByCreatedAt.get(t.toIDString())}createSubPaths(t){let e=this.elementPairMapByCreatedAt.get(t.toIDString());if(!e)return[];const r=[];for(;e.parent;){const a=e.element.getCreatedAt(),l=e.parent.subPathOf(a);if(l===void 0)throw new j($.ErrInvalidArgument,`cant find the given element: ${a.toIDString()}`);r.unshift(l),e=this.elementPairMapByCreatedAt.get(e.parent.getCreatedAt().toIDString())}return r.unshift("$"),r}createPath(t){return this.createSubPaths(t).join(".")}registerElement(t,e){this.elementPairMapByCreatedAt.set(t.getCreatedAt().toIDString(),{parent:e,element:t}),qe(this.docSize.live,t.getDataSize()),t instanceof fa&&t.getDescendants((r,a)=>(this.elementPairMapByCreatedAt.set(r.getCreatedAt().toIDString(),{parent:a,element:r}),qe(this.docSize.live,r.getDataSize()),!1))}deregisterElement(t){let e=0;const r=a=>{const l=a.getCreatedAt().toIDString();ja(this.docSize.gc,a.getDataSize()),this.elementPairMapByCreatedAt.delete(l),this.gcElementSetByCreatedAt.delete(l),e++};return r(t),t instanceof fa&&t.getDescendants(a=>(r(a),!1)),e}registerRemovedElement(t){qe(this.docSize.gc,t.getDataSize()),ja(this.docSize.live,t.getDataSize()),this.docSize.live.meta+=Ar,this.gcElementSetByCreatedAt.add(t.getCreatedAt().toIDString())}registerGCPair(t){if(this.gcPairMap.get(t.child.toIDString())){this.gcPairMap.delete(t.child.toIDString());return}this.gcPairMap.set(t.child.toIDString(),t);const r=this.gcPairMap.get(t.child.toIDString()).child.getDataSize();qe(this.docSize.gc,r),ja(this.docSize.live,r),t.child instanceof ua||(this.docSize.live.meta+=Ar)}getElementMapSize(){return this.elementPairMapByCreatedAt.size}getGarbageElementSetSize(){const t=new Set;for(const e of this.gcElementSetByCreatedAt){t.add(e);const r=this.elementPairMapByCreatedAt.get(e);r.element instanceof fa&&r.element.getDescendants(a=>(t.add(a.getCreatedAt().toIDString()),!1))}return t.size}getObject(){return this.rootObject}getGarbageLen(){return this.getGarbageElementSetSize()+this.gcPairMap.size}getDocSize(){return this.docSize}deepcopy(){return new ec(this.rootObject.deepcopy())}garbageCollect(t){let e=0;for(const r of this.gcElementSetByCreatedAt){const a=this.elementPairMapByCreatedAt.get(r),l=a.element.getRemovedAt();l&&(t!=null&&t.afterOrEqual(l))&&(a.parent.purge(a.element),e+=this.deregisterElement(a.element))}for(const[,r]of this.gcPairMap){const a=r.child.getRemovedAt();a&&(t!=null&&t.afterOrEqual(a))&&(r.parent.purge(r.child),ja(this.docSize.gc,r.child.getDataSize()),this.gcPairMap.delete(r.child.toIDString()),e+=1)}return e}toJSON(){return this.rootObject.toJSON()}toSortedJSON(){return this.rootObject.toSortedJSON()}getStats(){return{elements:this.getElementMapSize(),gcPairs:this.gcPairMap.size,gcElements:this.getGarbageElementSetSize()}}acc(t){qe(this.docSize.live,t)}*getGCElementPairs(){for(const t of this.gcElementSetByCreatedAt){const e=this.elementPairMapByCreatedAt.get(t);e&&(yield e)}}}class bS{constructor(t,e){y(this,"context");y(this,"presence");this.context=t,this.presence=e}set(t,e){for(const r of Object.keys(t))this.presence[r]=t[r];this.context.setPresenceChange({type:kr.Put,presence:Fn(this.presence)}),this.context.setReversePresence(t,e)}get(t){return this.presence[t]}clear(){this.presence={},this.context.setPresenceChange({type:kr.Clear})}}const SS=50;class Tk{constructor(){y(this,"undoStack",[]);y(this,"redoStack",[])}hasUndo(){return this.undoStack.length>0}hasRedo(){return this.redoStack.length>0}pushUndo(t){this.undoStack.length>=SS&&this.undoStack.shift(),this.undoStack.push(t)}popUndo(){return this.undoStack.pop()}pushRedo(t){this.redoStack.length>=SS&&this.redoStack.shift(),this.redoStack.push(t)}popRedo(){return this.redoStack.pop()}clearRedo(){this.redoStack=[]}getUndoStackForTest(){return this.undoStack}getRedoStackForTest(){return this.redoStack}reconcileCreatedAt(t,e){const r=a=>{for(const l of a)for(const c of l)(c instanceof Ns||c instanceof Dr||c instanceof nr)&&c.getCreatedAt()===t&&c.setCreatedAt(e),(c instanceof ma||c instanceof nr)&&c.getPrevCreatedAt()===t&&c.setPrevCreatedAt(e)};r(this.undoStack),r(this.redoStack)}}function Ak(n,t){const e=[];for(const r of t){const a=Ek(n,r.path),l=Nk(a,r);if(!l.valid)for(const c of l.errors||[])e.push(c)}return{valid:e.length===0,errors:e}}function Ek(n,t){if(!t.startsWith("$"))throw new Error(`Path must start with $, got ${t}`);const e=t.split(".");let r=n;for(let a=1;a<e.length;a++){const l=e[a];if(!(r instanceof Ve))return;r=r.get(l)}return r}function Nk(n,t){switch(t.type){case"string":case"boolean":case"integer":case"double":case"long":case"date":case"bytes":case"null":return kk(n,t);case"object":if(!(n instanceof Ve))return{valid:!1,errors:[{path:t.path,message:`expected object at path ${t.path}`}]};break;case"array":if(!(n instanceof je))return{valid:!1,errors:[{path:t.path,message:`expected array at path ${t.path}`}]};break;case"yorkie.Text":if(!(n instanceof pn))return{valid:!1,errors:[{path:t.path,message:`expected yorkie.Text at path ${t.path}`}]};break;case"yorkie.Tree":if(!(n instanceof vn))return{valid:!1,errors:[{path:t.path,message:`expected yorkie.Tree at path ${t.path}`}]};break;case"yorkie.Counter":if(!(n instanceof sn))return{valid:!1,errors:[{path:t.path,message:`expected yorkie.Counter at path ${t.path}`}]};break;default:throw new Error(`Unknown rule type: ${t.type}`)}return{valid:!0}}function Ck(n){switch(n){case"null":return re.Null;case"boolean":return re.Boolean;case"integer":return re.Integer;case"long":return re.Long;case"double":return re.Double;case"string":return re.String;case"bytes":return re.Bytes;case"date":return re.Date;default:throw new Error(`Unknown primitive type: ${n}`)}}function kk(n,t){return n instanceof ce&&n.getType()===Ck(t.type)?{valid:!0}:{valid:!1,errors:[{path:t.path,message:`expected ${t.type} at path ${t.path}`}]}}const Dk="yorkie-devtools-panel",Ik="yorkie-devtools-sdk";function Ok(n){return[Ie.StatusChanged,Ie.Snapshot,Ie.LocalChange,Ie.RemoteChange,Ie.Initialized,Ie.Watched,Ie.Unwatched,Ie.PresenceChanged].includes(n.type)}function Mk(n){return n.every(Ok)}let Fo="disconnected";const xS=new Map,od=new Map;typeof window<"u"&&(window.docEventsForReplayByDocKey=od);function Yf(n,t){(t!=null&&t.force||Fo!=="disconnected")&&window.postMessage({source:Ik,...n},"*")}function Rk(n){if(!n.isEnableDevtools()||typeof window>"u"||xS.has(n.getKey()))return;od.set(n.getKey(),[]);const t=n.subscribe("all",e=>{Mk(e)&&(od.get(n.getKey()).push(e),Fo==="synced"&&Yf({msg:"doc::sync::partial",docKey:n.getKey(),event:e}))});xS.set(n.getKey(),[t]),Yf({msg:"refresh-devtools"},{force:!0}),window.addEventListener("message",e=>{var a;if(((a=e.data)==null?void 0:a.source)!==Dk)return;switch(e.data.msg){case"devtools::connect":if(Fo!=="disconnected")break;Fo="connected",Yf({msg:"doc::available",docKey:n.getKey()}),vt.info(`[YD] Devtools connected. Doc: ${n.getKey()}`);break;case"devtools::disconnect":Fo="disconnected",vt.info(`[YD] Devtools disconnected. Doc: ${n.getKey()}`);break;case"devtools::subscribe":Fo="synced",Yf({msg:"doc::sync::full",docKey:n.getKey(),events:od.get(n.getKey())}),vt.info(`[YD] Devtools subscribed. Doc: ${n.getKey()}`);break}})}var oa=(n=>(n.Detached="detached",n.Attached="attached",n.Removed="removed",n))(oa||{}),Ie=(n=>(n.StatusChanged="status-changed",n.ConnectionChanged="connection-changed",n.SyncStatusChanged="sync-status-changed",n.Snapshot="snapshot",n.LocalChange="local-change",n.RemoteChange="remote-change",n.Initialized="initialized",n.Watched="watched",n.Unwatched="unwatched",n.PresenceChanged="presence-changed",n.Broadcast="broadcast",n.LocalBroadcast="local-broadcast",n.AuthError="auth-error",n))(Ie||{}),Vu=(n=>(n.Connected="connected",n.Disconnected="disconnected",n))(Vu||{}),Yy=(n=>(n.Synced="synced",n.SyncFailed="sync-failed",n))(Yy||{});class ys{constructor(t,e){y(this,"key");y(this,"status");y(this,"opts");y(this,"maxSizeLimit");y(this,"schemaRules");y(this,"changeID");y(this,"checkpoint");y(this,"localChanges");y(this,"root");y(this,"presences");y(this,"clone");y(this,"internalHistory");y(this,"isUpdating");y(this,"onlineClients");y(this,"eventStream");y(this,"eventStreamObserver");y(this,"history");this.key=t,this.status="detached",this.opts=e||{},this.maxSizeLimit=0,this.schemaRules=[],this.changeID=EC,this.checkpoint=NC,this.localChanges=[],this.root=ec.create(),this.presences=new Map,this.onlineClients=new Set,this.internalHistory=new Tk,this.isUpdating=!1,this.eventStream=_x(r=>this.eventStreamObserver=r),this.history={canUndo:()=>this.internalHistory.hasUndo()&&!this.isUpdating,canRedo:()=>this.internalHistory.hasRedo()&&!this.isUpdating,undo:()=>this.executeUndoRedo(!0),redo:()=>this.executeUndoRedo(!1)},Rk(this)}update(t,e){var d,h,g;if(this.getStatus()==="removed")throw new j($.ErrDocumentRemoved,`${this.key} is removed`);this.ensureClone();const r=this.changeID.getActorID(),a=$u.create(this.changeID,this.clone.root,this.clone.presences.get(r)||{},e);try{const p=wS(a,this.clone.root.getObject());this.presences.has(r)||this.clone.presences.set(r,{}),this.isUpdating=!0,t(p,new bS(a,this.clone.presences.get(r)))}catch(p){throw this.clone=void 0,p}finally{this.isUpdating=!1}const l=this.getSchemaRules();if(!a.isPresenceOnlyChange()&&l.length){const p=Ak((d=this.clone)==null?void 0:d.root.getObject(),l);if(!p.valid)throw this.clone=void 0,new j($.ErrDocumentSchemaValidationFailed,`schema validation failed: ${(h=p.errors)==null?void 0:h.map(w=>w.message).join(", ")}`)}const c=mC((g=this.clone)==null?void 0:g.root.getDocSize());if(!a.isPresenceOnlyChange()&&this.maxSizeLimit>0&&this.maxSizeLimit<c)throw this.clone=void 0,new j($.ErrDocumentSizeExceedsLimit,`document size exceeded: ${c} > ${this.maxSizeLimit}`);if(a.hasChange()){vt.isEnabled(en.Trivial)&&vt.trivial(`trying to update a local change: ${this.toJSON()}`);const p=a.toChange(),{opInfos:w,reverseOps:v}=p.execute(this.root,this.presences,ae.Local);for(const A of p.getOperations())A instanceof Ns&&this.internalHistory.reconcileCreatedAt(A.getCreatedAt(),A.getValue().getCreatedAt());const b=a.getReversePresence();b&&v.push({type:"presence",value:b}),this.localChanges.push(p),v.length&&this.internalHistory.pushUndo(v),w.length&&this.internalHistory.clearRedo(),this.changeID=a.getNextID();const T=[];w.length&&T.push({type:"local-change",source:ae.Local,value:{message:p.getMessage()||"",operations:w,actor:r,clientSeq:p.getID().getClientSeq(),serverSeq:p.getID().getServerSeq()},rawChange:this.isEnableDevtools()?p.toStruct():void 0}),p.hasPresenceChange()&&T.push({type:"presence-changed",source:ae.Local,value:{clientID:r,presence:this.getPresence(r)}}),this.publish(T),vt.isEnabled(en.Trivial)&&vt.trivial(`after update a local change: ${this.toJSON()}`)}}subscribe(t,e,r,a){if(typeof t=="string"){if(typeof e!="function")throw new j($.ErrInvalidArgument,"Second argument must be a callback function");if(t==="presence"){const d=e;return this.eventStream.subscribe(h=>{for(const g of h)g.type!=="initialized"&&g.type!=="watched"&&g.type!=="unwatched"&&g.type!=="presence-changed"||d(g)},r,a)}if(t==="my-presence"){const d=e;return this.eventStream.subscribe(h=>{for(const g of h)g.type!=="initialized"&&g.type!=="presence-changed"||g.type==="presence-changed"&&g.value.clientID!==this.changeID.getActorID()||d(g)},r,a)}if(t==="others"){const d=e;return this.eventStream.subscribe(h=>{for(const g of h)g.type!=="watched"&&g.type!=="unwatched"&&g.type!=="presence-changed"||g.value.clientID!==this.changeID.getActorID()&&d(g)},r,a)}if(t==="connection"){const d=e;return this.eventStream.subscribe(h=>{for(const g of h)g.type==="connection-changed"&&d(g)},r,a)}if(t==="status"){const d=e;return this.eventStream.subscribe(h=>{for(const g of h)g.type==="status-changed"&&d(g)},r,a)}if(t==="sync"){const d=e;return this.eventStream.subscribe(h=>{for(const g of h)g.type==="sync-status-changed"&&d(g)},r,a)}if(t==="local-broadcast"){const d=e;return this.eventStream.subscribe(h=>{for(const g of h)g.type==="local-broadcast"&&d(g)},r)}if(t==="broadcast"){const d=e;return this.eventStream.subscribe(h=>{for(const g of h)g.type==="broadcast"&&d(g)},r)}if(t==="auth-error"){const d=e;return this.eventStream.subscribe(h=>{for(const g of h)g.type==="auth-error"&&d(g)},r)}if(t==="all"){const d=e;return this.eventStream.subscribe(d,r,a)}const l=t,c=e;return this.eventStream.subscribe(d=>{for(const h of d){if(h.type!=="local-change"&&h.type!=="remote-change")continue;const g=[];for(const p of h.value.operations)this.isSameElementOrChildOf(p.path,l)&&g.push(p);g.length&&c({...h,value:{...h.value,operations:g}})}},r,a)}if(typeof t=="function"){const l=t,c=e,d=r;return this.eventStream.subscribe(h=>{for(const g of h)g.type!=="snapshot"&&g.type!=="local-change"&&g.type!=="remote-change"||l(g)},c,d)}throw new j($.ErrInvalidArgument,`"${t}" is not a valid`)}publish(t){this.eventStreamObserver&&this.eventStreamObserver.next(t)}applyChangePack(t){t.hasSnapshot()?this.applySnapshot(t.getCheckpoint().getServerSeq(),t.getVersionVector(),t.getSnapshot(),t.getCheckpoint().getClientSeq()):(this.applyChanges(t.getChanges(),ae.Remote),this.removePushedLocalChanges(t.getCheckpoint().getClientSeq())),this.checkpoint=this.checkpoint.forward(t.getCheckpoint()),t.hasSnapshot()||this.garbageCollect(t.getVersionVector()),t.getIsRemoved()&&this.applyStatus("removed"),vt.isEnabled(en.Trivial)&&vt.trivial(`${this.root.toJSON()}`)}getCheckpoint(){return this.checkpoint}getChangeID(){return this.changeID}hasLocalChanges(){return this.localChanges.length>0}ensureClone(){this.clone||(this.clone={root:this.root.deepcopy(),presences:Fn(this.presences)})}createChangePack(){const t=Array.from(this.localChanges),e=this.checkpoint.increaseClientSeq(t.length);return sh.create(this.key,e,!1,t,this.getVersionVector())}setActor(t){for(const e of this.localChanges)e.setActor(t);this.changeID=this.changeID.setActor(t)}isEnableDevtools(){return!!this.opts.enableDevtools}getKey(){return this.key}getStatus(){return this.status}getClone(){return this.clone}getCloneRoot(){if(this.clone)return this.clone.root.getObject()}getRoot(){this.ensureClone();const t=$u.create(this.changeID.next(),this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});return wS(t,this.clone.root.getObject())}getDocSize(){return this.root.getDocSize()}getMaxSizePerDocument(){return this.maxSizeLimit}setMaxSizePerDocument(t){this.maxSizeLimit=t}getSchemaRules(){return this.schemaRules}setSchemaRules(t){this.schemaRules=t}garbageCollect(t){return this.opts.disableGC?0:(this.clone&&this.clone.root.garbageCollect(t),this.root.garbageCollect(t))}getRootObject(){return this.root.getObject()}getGarbageLen(){return this.root.getGarbageLen()}getRootCRDT(){return this.root}getGarbageLenFromClone(){return this.clone.root.getGarbageLen()}toJSON(){return this.root.toJSON()}toSortedJSON(){return this.root.toSortedJSON()}getStats(){return this.root.getStats()}toJSForTest(){return{...this.getRoot().toJSForTest(),key:"root"}}applySnapshot(t,e,r,a=-1){const{root:l,presences:c}=ge.bytesToSnapshot(r);this.root=new ec(l),this.presences=c,this.changeID=this.changeID.setClocks(e.maxLamport(),e),this.clone=void 0,this.removePushedLocalChanges(a),this.applyChanges(this.localChanges,ae.Local),this.publish([{type:"snapshot",source:ae.Remote,value:{serverSeq:t.toString(),snapshot:this.isEnableDevtools()?ge.bytesToHex(r):void 0,snapshotVector:ge.versionVectorToHex(e)}}])}applyChanges(t,e){vt.isEnabled(en.Debug)&&vt.debug(`trying to apply ${t.length} remote changes.elements:${this.root.getElementMapSize()}, removeds:${this.root.getGarbageElementSetSize()}`),vt.isEnabled(en.Trivial)&&vt.trivial(t.map(r=>`${r.getID().toTestString()}	${r.toTestString()}`).join(`
`));for(const r of t)this.applyChange(r,e);vt.isEnabled(en.Debug)&&vt.debug(`after appling ${t.length} remote changes.elements:${this.root.getElementMapSize()},  removeds:${this.root.getGarbageElementSetSize()}`)}applyChange(t,e){this.ensureClone(),t.execute(this.clone.root,this.clone.presences,e);const r=[],a=t.getID().getActorID();if(t.hasPresenceChange()&&this.onlineClients.has(a)){const c=t.getPresenceChange();switch(c.type){case kr.Put:r.push(this.presences.has(a)?{type:"presence-changed",source:e,value:{clientID:a,presence:c.presence}}:{type:"watched",source:ae.Remote,value:{clientID:a,presence:c.presence}});break;case kr.Clear:r.push({type:"unwatched",source:ae.Remote,value:{clientID:a,presence:this.getPresence(a)}}),this.removeOnlineClient(a);break}}const{opInfos:l}=t.execute(this.root,this.presences,e);if(this.changeID=this.changeID.syncClocks(t.getID()),l.length){const c=this.isEnableDevtools()?t.toStruct():void 0;r.push(e===ae.Remote?{type:"remote-change",source:e,value:{actor:a,clientSeq:t.getID().getClientSeq(),serverSeq:t.getID().getServerSeq(),message:t.getMessage()||"",operations:l},rawChange:c}:{type:"local-change",source:e,value:{actor:a,clientSeq:t.getID().getClientSeq(),serverSeq:t.getID().getServerSeq(),message:t.getMessage()||"",operations:l},rawChange:c})}r.length&&this.publish(r)}applyWatchStream(t){if(t.body.case==="initialization"){const e=t.body.value.clientIds,r=new Set;for(const a of e)a!==this.changeID.getActorID()&&r.add(a);this.setOnlineClients(r),this.publish([{type:"initialized",source:ae.Local,value:this.getPresences()}]);return}if(t.body.case==="event"){const{type:e,publisher:r}=t.body.value,a=[];if(e===Ka.DOCUMENT_WATCHED){if(this.onlineClients.has(r)&&this.hasPresence(r))return;this.addOnlineClient(r),this.hasPresence(r)&&a.push({type:"watched",source:ae.Remote,value:{clientID:r,presence:this.getPresence(r)}})}else if(e===Ka.DOCUMENT_UNWATCHED){const l=this.getPresence(r);this.removeOnlineClient(r),l&&a.push({type:"unwatched",source:ae.Remote,value:{clientID:r,presence:l}})}else if(e===Ka.DOCUMENT_BROADCAST&&t.body.value.body){const{topic:l,payload:c}=t.body.value.body,d=new TextDecoder;a.push({type:"broadcast",value:{clientID:r,topic:l,payload:JSON.parse(d.decode(c))}})}a.length&&this.publish(a)}}applyStatus(t){this.status=t,t==="detached"&&this.setActor(fp),this.publish([{source:t==="removed"?ae.Remote:ae.Local,type:"status-changed",value:t==="attached"?{status:t,actorID:this.changeID.getActorID()}:{status:t}}])}applyDocEventsForReplay(t){for(const e of t){if(e.type==="status-changed"){this.applyStatus(e.value.status),e.value.status==="attached"&&this.setActor(e.value.actorID);continue}if(e.type==="snapshot"){const{snapshot:r,serverSeq:a,snapshotVector:l}=e.value;if(!r)continue;this.applySnapshot(BigInt(a),ge.hexToVersionVector(l),ge.hexToBytes(r));continue}if(e.type==="local-change"||e.type==="remote-change"){if(!e.rawChange)continue;const r=dl.fromStruct(e.rawChange);this.applyChange(r,e.source)}if(e.type==="initialized"){const r=new Set;for(const{clientID:a,presence:l}of e.value)r.add(a),this.presences.set(a,l);this.setOnlineClients(r)}else if(e.type==="watched"){const{clientID:r,presence:a}=e.value;this.addOnlineClient(r),this.presences.set(r,a)}else if(e.type==="unwatched"){const{clientID:r}=e.value;this.removeOnlineClient(r),this.presences.delete(r)}else if(e.type==="presence-changed"){const{clientID:r,presence:a}=e.value;this.presences.set(r,a)}}}getValueByPath(t){if(!t.startsWith("$"))throw new j($.ErrInvalidArgument,'path must start with "$"');const e=t.split(".");e.shift();let r=this.getRoot();for(const a of e)if(r=r[a],!r)return;return r}setOnlineClients(t){this.onlineClients=t}resetOnlineClients(){this.onlineClients=new Set}addOnlineClient(t){this.onlineClients.add(t)}removeOnlineClient(t){this.onlineClients.delete(t)}hasPresence(t){return this.presences.has(t)}getMyPresence(){if(this.status!=="attached")return{};const t=this.presences.get(this.changeID.getActorID());return t?Fn(t):{}}getOthersPresences(){const t=[],e=this.changeID.getActorID();for(const r of this.onlineClients)r!==e&&this.presences.has(r)&&t.push({clientID:r,presence:Fn(this.presences.get(r))});return t}getPresence(t){if(t===this.changeID.getActorID())return this.getMyPresence();if(!this.onlineClients.has(t))return;const e=this.presences.get(t);return e?Fn(e):void 0}getPresences(){const t=[];t.push({clientID:this.changeID.getActorID(),presence:Fn(this.getMyPresence())});for(const e of this.onlineClients)this.presences.has(e)&&t.push({clientID:e,presence:Fn(this.presences.get(e))});return t}getPresenceForTest(t){const e=this.presences.get(t);return e?Fn(e):void 0}getSelfForTest(){return{clientID:this.getChangeID().getActorID(),presence:this.getMyPresence()}}getOthersForTest(){const t=this.getChangeID().getActorID();return this.getPresences().filter(e=>e.clientID!==t).sort((e,r)=>e.clientID>r.clientID?1:-1)}getUndoStackForTest(){return this.internalHistory.getUndoStackForTest()}getRedoStackForTest(){return this.internalHistory.getRedoStackForTest()}broadcast(t,e,r){this.publish([{type:"local-broadcast",value:{topic:t,payload:e},options:r}])}getVersionVector(){return this.changeID.getVersionVector()}isSameElementOrChildOf(t,e){if(e===t)return!0;const r=t.split(".");return e.split(".").every((a,l)=>a===r[l])}removePushedLocalChanges(t){for(;this.localChanges.length&&!(this.localChanges[0].getID().getClientSeq()>t);)this.localChanges.shift()}executeUndoRedo(t){if(this.isUpdating)throw new j($.ErrRefused,`${t?"Undo":"Redo"} is not allowed during an update`);const e=t?this.internalHistory.popUndo():this.internalHistory.popRedo();if(!e)throw new j($.ErrRefused,`There is no operation to be ${t?"undone":"redone"}`);this.ensureClone();const r=$u.create(this.changeID,this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});for(const p of e){if(!(p instanceof ar)){new bS(r,Fn(this.clone.presences.get(this.changeID.getActorID()))).set(p.value,{addToHistory:!0});continue}const w=r.issueTimeTicket();if(p.setExecutedAt(w),p instanceof Ns){const v=p.getCreatedAt();p.getValue().setCreatedAt(w),this.internalHistory.reconcileCreatedAt(v,w)}else if(p instanceof ma){const v=p.getValue().getCreatedAt();p.getValue().setCreatedAt(w),this.internalHistory.reconcileCreatedAt(v,w)}r.push(p)}const a=r.toChange();a.execute(this.clone.root,this.clone.presences,ae.UndoRedo);const{opInfos:l,reverseOps:c}=a.execute(this.root,this.presences,ae.UndoRedo),d=r.getReversePresence();if(d&&c.push({type:"presence",value:d}),c.length&&(t?this.internalHistory.pushRedo(c):this.internalHistory.pushUndo(c)),!a.hasPresenceChange()&&!l.length)return;this.localChanges.push(a),this.changeID=r.getNextID();const h=this.changeID.getActorID(),g=[];l.length&&g.push({type:"local-change",source:ae.UndoRedo,value:{message:a.getMessage()||"",operations:l,actor:h,clientSeq:a.getID().getClientSeq(),serverSeq:a.getID().getServerSeq()},rawChange:this.isEnableDevtools()?a.toStruct():void 0}),a.hasPresenceChange()&&g.push({type:"presence-changed",source:ae.UndoRedo,value:{clientID:h,presence:this.getPresence(h)}}),this.publish(g)}}class TS{constructor(t,e,r,a,l){y(this,"resource");y(this,"resourceID");y(this,"syncMode");y(this,"changeEventReceived");y(this,"lastHeartbeatTime");y(this,"reconnectStreamDelay");y(this,"cancelled");y(this,"watchStream");y(this,"watchLoopTimerID");y(this,"watchAbortController");y(this,"unsubscribeBroadcastEvent");this.reconnectStreamDelay=t,this.resource=e,this.resourceID=r,this.syncMode=a,this.changeEventReceived=a!==void 0?!1:void 0,this.lastHeartbeatTime=Date.now(),this.cancelled=!1,this.unsubscribeBroadcastEvent=l}changeSyncMode(t){this.syncMode=t}needRealtimeSync(){return this.syncMode===zu.RealtimeSyncOff?!1:this.syncMode===zu.RealtimePushOnly?this.resource.hasLocalChanges():this.syncMode!==zu.Manual&&(this.resource.hasLocalChanges()||(this.changeEventReceived??!1))}needSync(t){return this.resource instanceof ys?this.needRealtimeSync():this.syncMode===zu.Manual?!1:Date.now()-this.lastHeartbeatTime>=t}updateHeartbeatTime(){this.lastHeartbeatTime=Date.now()}async runWatchLoop(t){const e=async()=>{if(this.watchStream)return Promise.resolve();this.watchLoopTimerID&&(clearTimeout(this.watchLoopTimerID),this.watchLoopTimerID=void 0);try{[this.watchStream,this.watchAbortController]=await t(()=>{this.watchStream=void 0,this.watchAbortController=void 0,this.cancelled||(this.watchLoopTimerID=setTimeout(e,this.reconnectStreamDelay))})}catch{}};await e()}cancelWatchStream(){this.cancelled=!0,this.watchStream&&this.watchAbortController&&(this.watchAbortController.abort(),this.watchStream=void 0,this.watchAbortController=void 0),clearTimeout(this.watchLoopTimerID),this.watchLoopTimerID=void 0}}function Bk(n,t){let e=t;return{authInterceptor:l=>async c=>(n&&c.header.set("x-api-key",n),e&&c.header.set("authorization",e),await l(c)),setToken:l=>{e=l}}}const zk="@yorkie-js/sdk",Lk="0.6.35",AS={name:zk,version:Lk};function _k(n){return t=>async e=>(n?e.header.set("x-yorkie-user-agent",n):e.header.set("x-yorkie-user-agent",AS.name+"/"+AS.version),await t(e))}const Uk=n=>{try{if(JSON.stringify(n)===void 0)return!1}catch{return!1}return!0};var Bu=(n=>(n.Detached="detached",n.Attached="attached",n.Removed="removed",n))(Bu||{}),Pd=(n=>(n.Changed="changed",n.Initialized="initialized",n))(Pd||{});class $a{constructor(t){y(this,"key");y(this,"status");y(this,"actorID");y(this,"presenceID");y(this,"count");y(this,"seq");y(this,"eventStream");y(this,"eventStreamObserver");this.key=t,this.status="detached",this.count=0,this.seq=0,this.eventStream=_x(e=>this.eventStreamObserver=e)}getKey(){return this.key}getStatus(){return this.status}applyStatus(t){this.status=t}isAttached(){return this.status==="attached"}getActorID(){return this.actorID}setActor(t){this.actorID=t}getPresenceID(){return this.presenceID}setPresenceID(t){this.presenceID=t}getCount(){return this.count}updateCount(t,e){return e===0||e>this.seq?(this.count=t,this.seq=e,!0):!1}hasLocalChanges(){return!1}subscribe(t){return this.eventStream.subscribe(t)}publish(t){this.eventStreamObserver&&this.eventStreamObserver.next(t)}}var zu=(n=>(n.Manual="manual",n.Realtime="realtime",n.RealtimePushOnly="realtime-pushonly",n.RealtimeSyncOff="realtime-syncoff",n))(zu||{});const Ko={rpcAddr:"https://api.yorkie.dev",syncLoopDuration:50,retrySyncLoopDelay:1e3,reconnectStreamDelay:1e3,presenceHeartbeatInterval:3e4},Ym={maxRetries:1/0,initialRetryInterval:1e3,maxBackoff:2e4};class Px{constructor(t){y(this,"id");y(this,"key");y(this,"metadata");y(this,"status");y(this,"attachmentMap");y(this,"apiKey");y(this,"authTokenInjector");y(this,"conditions");y(this,"syncLoopDuration");y(this,"reconnectStreamDelay");y(this,"retrySyncLoopDelay");y(this,"presenceHeartbeatInterval");y(this,"rpcClient");y(this,"setAuthToken");y(this,"taskQueue");y(this,"processing",!1);y(this,"keepalive",!1);t=t||Ko;const e=t.rpcAddr||Ko.rpcAddr;this.key=t.key||Lx(),this.metadata=t.metadata||{},this.status="deactivated",this.attachmentMap=new Map,this.apiKey=t.apiKey||"",this.authTokenInjector=t.authTokenInjector,this.conditions={SyncLoop:!1,WatchLoop:!1},this.syncLoopDuration=t.syncLoopDuration??Ko.syncLoopDuration,this.reconnectStreamDelay=t.reconnectStreamDelay??Ko.reconnectStreamDelay,this.retrySyncLoopDelay=t.retrySyncLoopDelay??Ko.retrySyncLoopDelay,this.presenceHeartbeatInterval=t.presenceHeartbeatInterval??Ko.presenceHeartbeatInterval;const{authInterceptor:r,setToken:a}=Bk(this.apiKey);this.setAuthToken=a,this.rpcClient=U2(oC,aC({baseUrl:e,interceptors:[r,_k(t==null?void 0:t.userAgent)],fetch:(l,c)=>fetch(l,{...c,keepalive:this.keepalive})})),this.taskQueue=[]}async activate(){if(this.isActive())return Promise.resolve();if(this.authTokenInjector){const t=await this.authTokenInjector();this.setAuthToken(t)}return this.enqueueTask(async()=>{try{const t=await this.rpcClient.activateClient({clientKey:this.key,metadata:this.metadata},{headers:{"x-shard-key":`${this.apiKey}/${this.key}`}});this.id=t.clientId,this.status="activated",this.runSyncLoop(),vt.info(`[AC] c:"${this.getKey()}" activated, id:"${this.id}"`),typeof window<"u"&&window.addEventListener("beforeunload",async()=>{await this.deactivate({keepalive:!0})})}catch(t){throw vt.error(`[AC] c:"${this.getKey()}" err :`,t),await this.handleConnectError(t),t}})}deactivate(t={keepalive:!1,synchronous:!1}){if(this.status==="deactivated")return Promise.resolve();const e=async()=>{try{await this.rpcClient.deactivateClient({clientId:this.id,synchronous:t.synchronous},{headers:{"x-shard-key":`${this.apiKey}/${this.key}`}}),this.deactivateInternal(),vt.info(`[DC] c"${this.getKey()}" deactivated`)}catch(r){throw vt.error(`[DC] c:"${this.getKey()}" err :`,r),await this.handleConnectError(r),r}};if(t.keepalive){this.keepalive=!0;const r=e();return this.keepalive=!1,r}return this.enqueueTask(e)}has(t){return this.attachmentMap.has(t)}attach(t,e){return t instanceof $a?this.attachPresence(t,e):this.attachDocument(t,e)}attachDocument(t,e={}){if(!this.isActive())throw new j($.ErrClientNotActivated,`${this.key} is not active`);if(t.getStatus()!==oa.Detached)throw new j($.ErrDocumentNotDetached,`${t.getKey()} is not detached`);t.setActor(this.id),t.update((l,c)=>c.set(e.initialPresence||{}));const r=t.subscribe("local-broadcast",async l=>{var p;const{topic:c,payload:d}=l.value,h=(p=l.options)==null?void 0:p.error,g=l.options;try{await this.broadcast(t.getKey(),c,d,g)}catch(w){w instanceof Error&&(h==null||h(w))}}),a=e.syncMode??"realtime";return this.enqueueTask(async()=>{try{const l=await this.rpcClient.attachDocument({clientId:this.id,changePack:ge.toChangePack(t.createChangePack()),schemaKey:e.schema},{headers:{"x-shard-key":`${this.apiKey}/${t.getKey()}`}});(l.maxSizePerDocument??0)>0&&t.setMaxSizePerDocument(l.maxSizePerDocument),l.schemaRules.length>0&&t.setSchemaRules(ge.fromSchemaRules(l.schemaRules));const d=ge.fromChangePack(l.changePack);if(t.applyChangePack(d),t.getStatus()===oa.Removed)return t;t.applyStatus(oa.Attached),this.attachmentMap.set(t.getKey(),new TS(this.reconnectStreamDelay,t,l.documentId,a,r)),a!=="manual"&&await this.runWatchLoop(t.getKey()),vt.info(`[AD] c:"${this.getKey()}" attaches d:"${t.getKey()}"`);const h=t.getRootObject();if(e.initialRoot){const g=e.initialRoot;t.update(p=>{for(const[w,v]of Object.entries(g))if(!h.has(w)){const b=w;p[b]=v}})}return t}catch(l){throw vt.error(`[AD] c:"${this.getKey()}" err :`,l),await this.handleConnectError(l),l}})}detach(t,e){return t instanceof $a?this.detachPresence(t):this.detachDocument(t,e)}detachDocument(t,e={keepalive:!1}){if(!this.isActive())throw new j($.ErrClientNotActivated,`${this.key} is not active`);const r=this.attachmentMap.get(t.getKey());if(!r)throw new j($.ErrDocumentNotAttached,`${t.getKey()} is not attached`);t.update((l,c)=>c.clear());const a=async()=>{try{const l=await this.rpcClient.detachDocument({clientId:this.id,documentId:r.resourceID,changePack:ge.toChangePack(t.createChangePack()),removeIfNotAttached:e.removeIfNotAttached??!1},{headers:{"x-shard-key":`${this.apiKey}/${t.getKey()}`}}),c=ge.fromChangePack(l.changePack);return t.applyChangePack(c),t.getStatus()!==oa.Removed&&t.applyStatus(oa.Detached),this.detachInternal(t.getKey()),vt.info(`[DD] c:"${this.getKey()}" detaches d:"${t.getKey()}"`),t}catch(l){throw vt.error(`[DD] c:"${this.getKey()}" err :`,l),await this.handleConnectError(l),l}};if(e.keepalive){this.keepalive=!0;const l=a();return this.keepalive=!1,l}return this.enqueueTask(a)}async attachPresence(t,e={}){if(!this.isActive())throw new j($.ErrClientNotActivated,`${this.key} is not active`);if(t.getStatus()!==Bu.Detached)throw new j($.ErrDocumentNotDetached,`${t.getKey()} is not detached`);t.setActor(this.id);const r=async()=>{try{const a=await this.rpcClient.attachPresence({clientId:this.id,presenceKey:t.getKey()},{headers:{"x-shard-key":`${this.apiKey}/${t.getKey()}`}});t.setPresenceID(a.presenceId),t.updateCount(Number(a.count),0),t.applyStatus(Bu.Attached);const l=e.isRealtime!==!1?"realtime":"manual",c=new TS(this.reconnectStreamDelay,t,a.presenceId,l);return this.attachmentMap.set(t.getKey(),c),l==="realtime"&&await this.runWatchLoop(t.getKey()),vt.info(`[AP] c:"${this.getKey()}" attaches p:"${t.getKey()}" mode:${l} count:${t.getCount()}`),t}catch(a){throw vt.error(`[AP] c:"${this.getKey()}" err :`,a),await this.handleConnectError(a),a}};return this.enqueueTask(r)}async detachPresence(t){if(!this.isActive())throw new j($.ErrClientNotActivated,`${this.key} is not active`);if(!this.attachmentMap.has(t.getKey()))throw new j($.ErrDocumentNotAttached,`${t.getKey()} is not attached`);const e=async()=>{try{const r=await this.rpcClient.detachPresence({clientId:this.id,presenceId:t.getPresenceID(),presenceKey:t.getKey()},{headers:{"x-shard-key":`${this.apiKey}/${t.getKey()}`}});return t.updateCount(Number(r.count),0),t.applyStatus(Bu.Detached),this.detachInternal(t.getKey()),vt.info(`[DP] c:"${this.getKey()}" detaches p:"${t.getKey()}" count:${t.getCount()}`),t}catch(r){throw vt.error(`[DP] c:"${this.getKey()}" err :`,r),await this.handleConnectError(r),r}};return this.enqueueTask(e)}async changeSyncMode(t,e){if(!this.isActive())throw new j($.ErrClientNotActivated,`${this.key} is not active`);const r=this.attachmentMap.get(t.getKey());if(!r)throw new j($.ErrDocumentNotAttached,`${t.getKey()} is not attached`);const a=r.syncMode;return a===e?t:(r.changeSyncMode(e),e==="manual"?(r.cancelWatchStream(),t):(e==="realtime"&&(r.changeEventReceived=!0),a==="manual"&&await this.runWatchLoop(t.getKey()),t))}sync(t){if(!this.isActive())throw new j($.ErrClientNotActivated,`${this.key} is not active`);if(t instanceof $a){const e=this.attachmentMap.get(t.getKey());if(!e)throw new j($.ErrDocumentNotAttached,`${t.getKey()} is not attached`);return this.enqueueTask(async()=>this.syncInternal(e).catch(async r=>{throw vt.error(`[SY] c:"${this.getKey()}" err :`,r),await this.handleConnectError(r),r}))}if(t instanceof ys){const e=this.attachmentMap.get(t.getKey());if(!e)throw new j($.ErrDocumentNotAttached,`${t.getKey()} is not attached`);return this.enqueueTask(async()=>this.syncInternal(e,"realtime").catch(async r=>{throw vt.error(`[SY] c:"${this.getKey()}" err :`,r),await this.handleConnectError(r),r}))}return this.enqueueTask(async()=>{const e=[];for(const[,r]of this.attachmentMap)r.syncMode!==void 0&&r.resource instanceof ys&&e.push(this.syncInternal(r,r.syncMode));return Promise.all(e).catch(async r=>{throw vt.error(`[SY] c:"${this.getKey()}" err :`,r),await this.handleConnectError(r),r})})}remove(t){if(!this.isActive())throw new j($.ErrClientNotActivated,`${this.key} is not active`);const e=this.attachmentMap.get(t.getKey());if(!e)throw new j($.ErrDocumentNotAttached,`${t.getKey()} is not attached`);t.setActor(this.id);const r=ge.toChangePack(t.createChangePack());return r.isRemoved=!0,this.enqueueTask(async()=>{try{const a=await this.rpcClient.removeDocument({clientId:this.id,documentId:e.resourceID,changePack:r},{headers:{"x-shard-key":`${this.apiKey}/${t.getKey()}`}}),l=ge.fromChangePack(a.changePack);t.applyChangePack(l),this.detachInternal(t.getKey()),vt.info(`[RD] c:"${this.getKey()}" removes d:"${t.getKey()}"`)}catch(a){throw vt.error(`[RD] c:"${this.getKey()}" err :`,a),await this.handleConnectError(a),a}})}getID(){return this.id}getKey(){return this.key}isActive(){return this.status==="activated"}getStatus(){return this.status}getCondition(t){return this.conditions[t]}broadcast(t,e,r,a){if(!this.isActive())throw new j($.ErrClientNotActivated,`${this.key} is not active`);const l=this.attachmentMap.get(t);if(!l)throw new j($.ErrDocumentNotAttached,`${t} is not attached`);if(!Uk(r))throw new j($.ErrInvalidArgument,"payload is not serializable");const c=(a==null?void 0:a.maxRetries)??Ym.maxRetries,d=Ym.maxBackoff;let h=0;const g=w=>Math.min(Ym.initialRetryInterval*2**w,d),p=async()=>this.enqueueTask(async()=>{try{await this.rpcClient.broadcast({clientId:this.id,documentId:l.resourceID,topic:e,payload:new TextEncoder().encode(JSON.stringify(r))},{headers:{"x-shard-key":`${this.apiKey}/${t}`}}),vt.info(`[BC] c:"${this.getKey()}" broadcasts d:"${t}" t:"${e}"`)}catch(w){if(vt.error(`[BC] c:"${this.getKey()}" err:`,w),await this.handleConnectError(w))if(Vm(w,$.ErrUnauthenticated)&&l.resource instanceof ys&&l.resource.publish([{type:Ie.AuthError,value:{reason:Ru(w).reason,method:"Broadcast"}}]),h<c)h++,setTimeout(()=>p(),g(h-1)),vt.info(`[BC] c:"${this.getKey()}" retry attempt ${h}/${c}`);else throw vt.error(`[BC] c:"${this.getKey()}" exceeded maximum retry attempts`),w;else throw w}});return p()}runSyncLoop(){const t=async()=>{if(!this.isActive()){vt.debug(`[SL] c:"${this.getKey()}" exit sync loop`),this.conditions.SyncLoop=!1;return}try{await this.enqueueTask(async()=>{const e=[];for(const[,r]of this.attachmentMap)r.needSync(this.presenceHeartbeatInterval)&&(r.changeEventReceived!==void 0&&(r.changeEventReceived=!1),e.push(this.syncInternal(r,r.syncMode).catch(a=>{throw Vm(a,$.ErrUnauthenticated)&&r.resource.publish([{type:Ie.AuthError,value:{reason:Ru(a).reason,method:"PushPull"}}]),a})));await Promise.all(e),setTimeout(t,this.syncLoopDuration)})}catch(e){vt.error(`[SL] c:"${this.getKey()}" sync failed:`,e),await this.handleConnectError(e)?setTimeout(t,this.retrySyncLoopDelay):this.conditions.SyncLoop=!1}};vt.debug(`[SL] c:"${this.getKey()}" run sync loop`),this.conditions.SyncLoop=!0,t()}async runWatchLoop(t){const e=this.attachmentMap.get(t);if(!e)throw new j($.ErrDocumentNotAttached,`${t} is not attached`);return this.conditions.WatchLoop=!0,e.runWatchLoop(r=>{if(!this.isActive())return this.conditions.WatchLoop=!1,Promise.reject(new j($.ErrClientNotActivated,`${this.key} is not active`));if(!this.attachmentMap.has(t))return this.conditions.WatchLoop=!1,Promise.reject(new j($.ErrDocumentNotAttached,`${t} is not attached`));const a=new AbortController;return e.resource instanceof ys?this.createDocumentWatchStream(e,t,a,r):e.resource instanceof $a?this.createPresenceWatchStream(e,t,a,r):Promise.reject(new j($.ErrClientNotActivated,`Unknown resource type for ${t}`))})}createDocumentWatchStream(t,e,r,a){const l=this.rpcClient.watchDocument({clientId:this.id,documentId:t.resourceID},{headers:{"x-shard-key":`${this.apiKey}/${e}`},signal:r.signal});return t.resource.publish([{type:Ie.ConnectionChanged,value:Vu.Connected}]),vt.info(`[WD] c:"${this.getKey()}" watches d:"${e}"`),t.changeEventReceived!==void 0&&(t.changeEventReceived=!0),new Promise((c,d)=>{(async()=>{try{for await(const g of l)this.handleWatchDocumentResponse(t,g),g.body.case==="initialization"&&c([l,r]);t.resource.resetOnlineClients(),t.resource.publish([{type:Ie.Initialized,source:ae.Local,value:t.resource.getPresences()}]),t.resource.publish([{type:Ie.ConnectionChanged,value:Vu.Disconnected}]),vt.debug(`[WD] c:"${this.getKey()}" unwatches (stream ended)`),a()}catch(g){t.resource.resetOnlineClients(),t.resource.publish([{type:Ie.Initialized,source:ae.Local,value:t.resource.getPresences()}]),t.resource.publish([{type:Ie.ConnectionChanged,value:Vu.Disconnected}]),vt.debug(`[WD] c:"${this.getKey()}" unwatches`),await this.handleConnectError(g)?(Vm(g,$.ErrUnauthenticated)&&t.resource.publish([{type:Ie.AuthError,value:{reason:Ru(g).reason,method:"WatchDocument"}}]),a()):this.conditions.WatchLoop=!1,d(g)}})()})}createPresenceWatchStream(t,e,r,a){const l=this.rpcClient.watchPresence({clientId:this.id,presenceKey:e},{headers:{"x-shard-key":`${this.apiKey}/${e}`},signal:r.signal});return vt.info(`[WP] c:"${this.getKey()}" watches p:"${e}"`),new Promise((c,d)=>{(async()=>{try{let g=!0;for await(const p of l)this.handleWatchPresenceResponse(t,p),g&&(g=!1,c([l,r]));vt.debug(`[WP] c:"${this.getKey()}" p:"${e}" stream ended`),a()}catch(g){if(g instanceof Error&&g.name==="AbortError"){vt.debug(`[WP] c:"${this.getKey()}" p:"${e}" stream aborted`);return}vt.debug(`[WP] c:"${this.getKey()}" p:"${e}" err:`,g),await this.handleConnectError(g)?a():this.conditions.WatchLoop=!1,d(g)}})()})}handleWatchPresenceResponse(t,e){if(e.body.case==="initialized"){const{count:r,seq:a}=e.body.value;t.resource.updateCount(Number(r),Number(a))&&t.resource.publish({type:Pd.Initialized,count:Number(r)})}else if(e.body.case==="event"){const{count:r,seq:a}=e.body.value;t.resource.updateCount(Number(r),Number(a))&&t.resource.publish({type:Pd.Changed,count:Number(r)})}}handleWatchDocumentResponse(t,e){if(e.body.case==="event"&&e.body.value.type===Ka.DOCUMENT_CHANGED){t.changeEventReceived!==void 0&&(t.changeEventReceived=!0);return}t.resource.applyWatchStream(e)}deactivateInternal(){this.status="deactivated";for(const[t,e]of this.attachmentMap)this.detachInternal(t),e.resource instanceof ys?e.resource.applyStatus(oa.Detached):e.resource instanceof $a&&e.resource.applyStatus(Bu.Detached)}detachInternal(t){var r;const e=this.attachmentMap.get(t);e&&(e.cancelWatchStream(),e.resource instanceof ys&&e.resource.resetOnlineClients(),(r=e.unsubscribeBroadcastEvent)==null||r.call(e),this.attachmentMap.delete(t))}async syncInternal(t,e){const{resource:r}=t;if(r instanceof $a){try{const d=await this.rpcClient.refreshPresence({clientId:this.id,presenceId:r.getPresenceID(),presenceKey:r.getKey()},{headers:{"x-shard-key":`${this.apiKey}/${r.getKey()}`}});r.updateCount(Number(d.count),0),t.updateHeartbeatTime(),vt.debug(`[RP] c:"${this.getKey()}" refreshes p:"${r.getKey()}" mode:${t.syncMode}`)}catch(d){throw vt.error(`[RP] c:"${this.getKey()}" err :`,d),d}return r}const a=r,{resourceID:l}=t,c=a.createChangePack();try{const d=await this.rpcClient.pushPullChanges({clientId:this.id,documentId:l,changePack:ge.toChangePack(c),pushOnly:e==="realtime-pushonly"},{headers:{"x-shard-key":`${this.apiKey}/${a.getKey()}`}}),h=ge.fromChangePack(d.changePack);if(h.hasChanges()&&(t.syncMode==="realtime-pushonly"||t.syncMode==="realtime-syncoff"))return a;a.applyChangePack(h),t.resource.publish([{type:Ie.SyncStatusChanged,value:Yy.Synced}]),a.getStatus()===oa.Removed&&this.detachInternal(a.getKey());const g=a.getKey(),p=h.getChangeSize();return vt.info(`[PP] c:"${this.getKey()}" sync d:"${g}", push:${c.getChangeSize()} pull:${p} cp:${h.getCheckpoint().toTestString()}`),a}catch(d){throw a.publish([{type:Ie.SyncStatusChanged,value:Yy.SyncFailed}]),vt.error(`[PP] c:"${this.getKey()}" err :`,d),d}}async handleConnectError(t){if(!(t instanceof ee))return!1;if(t.code===qt.Canceled||t.code===qt.Unknown||t.code===qt.ResourceExhausted||t.code===qt.Unavailable)return!0;if(Xo(t)===$.ErrUnauthenticated){if(this.authTokenInjector){const e=await this.authTokenInjector(Ru(t).reason);this.setAuthToken(e)}return!0}return Xo(t)===$.ErrTooManySubscribers?(vt.error(`[WD] c:"${this.getKey()}" err :`,t.rawMessage),!0):(Xo(t)===$.ErrTooManyAttachments||(Xo(t)===$.ErrClientNotActivated||Xo(t)===$.ErrClientNotFound)&&this.deactivateInternal(),!1)}enqueueTask(t){return new Promise((e,r)=>{this.taskQueue.push(()=>t().then(e).catch(r)),this.processing||this.processNext()})}async processNext(){if(this.taskQueue.length===0){this.processing=!1;return}try{this.processing=!0,await this.taskQueue.shift()()}catch{vt.error(`[TQ] c:"${this.getKey()}" process failed, id:"${this.id}"`)}this.processNext()}}Ir.Int,Ir.Long;typeof globalThis<"u"&&(globalThis.yorkie={Client:Px,Document:ys,Primitive:ce,Text:Tp,Counter:Ap,Tree:Cp,Presence:$a,PresenceEventType:Pd,LogLevel:en,setLogLevel:mk,IntType:Ir.Int,LongType:Ir.Long});const qk="@yorkie-js/react",Pk="0.6.35",ES={name:qk,version:Pk};var et=fc();const Jk=O1(et),Jx=et.createContext({client:void 0,loading:!0,error:void 0});function $k(n){const[t,e]=et.useState(void 0),[r,a]=et.useState(!0),[l,c]=et.useState(void 0),[d,h]=et.useState(!1);return et.useEffect(()=>{h(!0)},[]),et.useEffect(()=>{a(!0),c(void 0);async function g(){if(d)try{const p=new Px(n);await p.activate(),e(p)}catch(p){c(p instanceof Error?p:new Error("Failed to activate client"))}finally{a(!1)}}return g(),()=>{t!=null&&t.isActive()&&t.deactivate({keepalive:!0})}},[n.apiKey,n.rpcAddr,d]),{client:t,loading:r,error:l}}const Hk=({children:n,...t})=>{const e=et.useMemo(()=>({userAgent:ES.name+"/"+ES.version,...t}),[t.apiKey,t.rpcAddr]),{client:r,loading:a,error:l}=$k(e);return tt.jsx(Jx.Provider,{value:{client:r,loading:a,error:l},children:n})},Vk=()=>{const n=et.useContext(Jx);if(!n)throw new Error("useYorkie must be used under YorkieProvider");return{client:n.client,loading:n.loading,error:n.error}};function jk(n){const t=new Set;let e=n;const r=()=>{t.forEach(h=>h(e))};return{subscribe:h=>(t.add(h),()=>t.delete(h)),getSnapshot:()=>e,setState:h=>{const g=e;e=typeof h=="function"?h(g):h,g!==e&&r()},destroy:()=>{t.clear()}}}const Yk=n=>jk(n);function Kk(n,t,e=Object.is){const r=et.useRef(t),a=et.useRef(e),l=et.useRef(void 0);r.current=t,a.current=e;const c=()=>{const d=n.getSnapshot(),h=r.current?r.current(d):d;return l.current!==void 0&&a.current(l.current,h)?l.current:(l.current=h,h)};return et.useSyncExternalStore(n.subscribe,c,c)}function Gk(n,t,e,r,a,l,c){const d=et.useRef(a),h=et.useRef(l),[g,p]=et.useState(!1);et.useEffect(()=>{p(!0)},[]),et.useEffect(()=>{if(e){c.setState(T=>({...T,loading:!1,error:e}));return}if(!n||t||!g){c.setState(T=>({...T,loading:!0}));return}c.setState(T=>({...T,loading:!0,error:void 0}));const w=new ys(r),v=[];v.push(w.subscribe(()=>{c.setState(T=>({...T,root:w.getRoot()}))})),v.push(w.subscribe("presence",()=>{c.setState(T=>({...T,presences:w.getPresences()}))})),v.push(w.subscribe("connection",T=>{c.setState(A=>({...A,connection:T.value}))}));async function b(){try{await(n==null?void 0:n.attach(w,{initialRoot:d.current,initialPresence:h.current}));const T=A=>{try{w.update(A)}catch(C){c.setState(D=>({...D,error:C instanceof Error?C:new Error("Failed to update document")}))}};c.setState(A=>({...A,doc:w,root:w.getRoot(),presences:w.getPresences(),update:T}))}catch(T){c.setState(A=>({...A,error:T instanceof Error?T:new Error("Failed to attach document")}))}finally{c.setState(T=>({...T,loading:!1}))}}return b(),()=>{n&&n.has(r)&&n.detach(w);for(const T of v)T()}},[n,t,e,r,c,g])}const $x=et.createContext(void 0),Xk=({docKey:n,initialRoot:t={},initialPresence:e={},children:r})=>{const{client:a,loading:l,error:c}=Vk(),d=et.useRef(void 0);d.current||(d.current=Yk({doc:void 0,root:t,presences:[],connection:Vu.Disconnected,update:()=>{},loading:!0,error:void 0}));const h=d.current;return Gk(a,l,c,n,t,e,h),tt.jsx($x.Provider,{value:h,children:r})};function Fk(){const n=et.useContext($x);if(!n)throw new Error("useDocument must be used within a DocumentProvider");return Kk(n)}et.createContext(void 0);function Ee(n){if(typeof n=="string"||typeof n=="number")return""+n;let t="";if(Array.isArray(n))for(let e=0,r;e<n.length;e++)(r=Ee(n[e]))!==""&&(t+=(t&&" ")+r);else for(let e in n)n[e]&&(t+=(t&&" ")+e);return t}var Zk={value:()=>{}};function lh(){for(var n=0,t=arguments.length,e={},r;n<t;++n){if(!(r=arguments[n]+"")||r in e||/[\s.]/.test(r))throw new Error("illegal type: "+r);e[r]=[]}return new ld(e)}function ld(n){this._=n}function Qk(n,t){return n.trim().split(/^|\s+/).map(function(e){var r="",a=e.indexOf(".");if(a>=0&&(r=e.slice(a+1),e=e.slice(0,a)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:r}})}ld.prototype=lh.prototype={constructor:ld,on:function(n,t){var e=this._,r=Qk(n+"",e),a,l=-1,c=r.length;if(arguments.length<2){for(;++l<c;)if((a=(n=r[l]).type)&&(a=Wk(e[a],n.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++l<c;)if(a=(n=r[l]).type)e[a]=NS(e[a],n.name,t);else if(t==null)for(a in e)e[a]=NS(e[a],n.name,null);return this},copy:function(){var n={},t=this._;for(var e in t)n[e]=t[e].slice();return new ld(n)},call:function(n,t){if((a=arguments.length-2)>0)for(var e=new Array(a),r=0,a,l;r<a;++r)e[r]=arguments[r+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(l=this._[n],r=0,a=l.length;r<a;++r)l[r].value.apply(t,e)},apply:function(n,t,e){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var r=this._[n],a=0,l=r.length;a<l;++a)r[a].value.apply(t,e)}};function Wk(n,t){for(var e=0,r=n.length,a;e<r;++e)if((a=n[e]).name===t)return a.value}function NS(n,t,e){for(var r=0,a=n.length;r<a;++r)if(n[r].name===t){n[r]=Zk,n=n.slice(0,r).concat(n.slice(r+1));break}return e!=null&&n.push({name:t,value:e}),n}var Ky="http://www.w3.org/1999/xhtml";const CS={svg:"http://www.w3.org/2000/svg",xhtml:Ky,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function uh(n){var t=n+="",e=t.indexOf(":");return e>=0&&(t=n.slice(0,e))!=="xmlns"&&(n=n.slice(e+1)),CS.hasOwnProperty(t)?{space:CS[t],local:n}:n}function tD(n){return function(){var t=this.ownerDocument,e=this.namespaceURI;return e===Ky&&t.documentElement.namespaceURI===Ky?t.createElement(n):t.createElementNS(e,n)}}function eD(n){return function(){return this.ownerDocument.createElementNS(n.space,n.local)}}function Hx(n){var t=uh(n);return(t.local?eD:tD)(t)}function nD(){}function kp(n){return n==null?nD:function(){return this.querySelector(n)}}function rD(n){typeof n!="function"&&(n=kp(n));for(var t=this._groups,e=t.length,r=new Array(e),a=0;a<e;++a)for(var l=t[a],c=l.length,d=r[a]=new Array(c),h,g,p=0;p<c;++p)(h=l[p])&&(g=n.call(h,h.__data__,p,l))&&("__data__"in h&&(g.__data__=h.__data__),d[p]=g);return new wn(r,this._parents)}function iD(n){return n==null?[]:Array.isArray(n)?n:Array.from(n)}function sD(){return[]}function Vx(n){return n==null?sD:function(){return this.querySelectorAll(n)}}function aD(n){return function(){return iD(n.apply(this,arguments))}}function oD(n){typeof n=="function"?n=aD(n):n=Vx(n);for(var t=this._groups,e=t.length,r=[],a=[],l=0;l<e;++l)for(var c=t[l],d=c.length,h,g=0;g<d;++g)(h=c[g])&&(r.push(n.call(h,h.__data__,g,c)),a.push(h));return new wn(r,a)}function jx(n){return function(){return this.matches(n)}}function Yx(n){return function(t){return t.matches(n)}}var lD=Array.prototype.find;function uD(n){return function(){return lD.call(this.children,n)}}function cD(){return this.firstElementChild}function fD(n){return this.select(n==null?cD:uD(typeof n=="function"?n:Yx(n)))}var dD=Array.prototype.filter;function hD(){return Array.from(this.children)}function gD(n){return function(){return dD.call(this.children,n)}}function mD(n){return this.selectAll(n==null?hD:gD(typeof n=="function"?n:Yx(n)))}function yD(n){typeof n!="function"&&(n=jx(n));for(var t=this._groups,e=t.length,r=new Array(e),a=0;a<e;++a)for(var l=t[a],c=l.length,d=r[a]=[],h,g=0;g<c;++g)(h=l[g])&&n.call(h,h.__data__,g,l)&&d.push(h);return new wn(r,this._parents)}function Kx(n){return new Array(n.length)}function pD(){return new wn(this._enter||this._groups.map(Kx),this._parents)}function Jd(n,t){this.ownerDocument=n.ownerDocument,this.namespaceURI=n.namespaceURI,this._next=null,this._parent=n,this.__data__=t}Jd.prototype={constructor:Jd,appendChild:function(n){return this._parent.insertBefore(n,this._next)},insertBefore:function(n,t){return this._parent.insertBefore(n,t)},querySelector:function(n){return this._parent.querySelector(n)},querySelectorAll:function(n){return this._parent.querySelectorAll(n)}};function vD(n){return function(){return n}}function wD(n,t,e,r,a,l){for(var c=0,d,h=t.length,g=l.length;c<g;++c)(d=t[c])?(d.__data__=l[c],r[c]=d):e[c]=new Jd(n,l[c]);for(;c<h;++c)(d=t[c])&&(a[c]=d)}function bD(n,t,e,r,a,l,c){var d,h,g=new Map,p=t.length,w=l.length,v=new Array(p),b;for(d=0;d<p;++d)(h=t[d])&&(v[d]=b=c.call(h,h.__data__,d,t)+"",g.has(b)?a[d]=h:g.set(b,h));for(d=0;d<w;++d)b=c.call(n,l[d],d,l)+"",(h=g.get(b))?(r[d]=h,h.__data__=l[d],g.delete(b)):e[d]=new Jd(n,l[d]);for(d=0;d<p;++d)(h=t[d])&&g.get(v[d])===h&&(a[d]=h)}function SD(n){return n.__data__}function xD(n,t){if(!arguments.length)return Array.from(this,SD);var e=t?bD:wD,r=this._parents,a=this._groups;typeof n!="function"&&(n=vD(n));for(var l=a.length,c=new Array(l),d=new Array(l),h=new Array(l),g=0;g<l;++g){var p=r[g],w=a[g],v=w.length,b=TD(n.call(p,p&&p.__data__,g,r)),T=b.length,A=d[g]=new Array(T),C=c[g]=new Array(T),D=h[g]=new Array(v);e(p,w,A,C,D,b,t);for(var L=0,N=0,O,B;L<T;++L)if(O=A[L]){for(L>=N&&(N=L+1);!(B=C[N])&&++N<T;);O._next=B||null}}return c=new wn(c,r),c._enter=d,c._exit=h,c}function TD(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function AD(){return new wn(this._exit||this._groups.map(Kx),this._parents)}function ED(n,t,e){var r=this.enter(),a=this,l=this.exit();return typeof n=="function"?(r=n(r),r&&(r=r.selection())):r=r.append(n+""),t!=null&&(a=t(a),a&&(a=a.selection())),e==null?l.remove():e(l),r&&a?r.merge(a).order():a}function ND(n){for(var t=n.selection?n.selection():n,e=this._groups,r=t._groups,a=e.length,l=r.length,c=Math.min(a,l),d=new Array(a),h=0;h<c;++h)for(var g=e[h],p=r[h],w=g.length,v=d[h]=new Array(w),b,T=0;T<w;++T)(b=g[T]||p[T])&&(v[T]=b);for(;h<a;++h)d[h]=e[h];return new wn(d,this._parents)}function CD(){for(var n=this._groups,t=-1,e=n.length;++t<e;)for(var r=n[t],a=r.length-1,l=r[a],c;--a>=0;)(c=r[a])&&(l&&c.compareDocumentPosition(l)^4&&l.parentNode.insertBefore(c,l),l=c);return this}function kD(n){n||(n=DD);function t(w,v){return w&&v?n(w.__data__,v.__data__):!w-!v}for(var e=this._groups,r=e.length,a=new Array(r),l=0;l<r;++l){for(var c=e[l],d=c.length,h=a[l]=new Array(d),g,p=0;p<d;++p)(g=c[p])&&(h[p]=g);h.sort(t)}return new wn(a,this._parents).order()}function DD(n,t){return n<t?-1:n>t?1:n>=t?0:NaN}function ID(){var n=arguments[0];return arguments[0]=this,n.apply(null,arguments),this}function OD(){return Array.from(this)}function MD(){for(var n=this._groups,t=0,e=n.length;t<e;++t)for(var r=n[t],a=0,l=r.length;a<l;++a){var c=r[a];if(c)return c}return null}function RD(){let n=0;for(const t of this)++n;return n}function BD(){return!this.node()}function zD(n){for(var t=this._groups,e=0,r=t.length;e<r;++e)for(var a=t[e],l=0,c=a.length,d;l<c;++l)(d=a[l])&&n.call(d,d.__data__,l,a);return this}function LD(n){return function(){this.removeAttribute(n)}}function _D(n){return function(){this.removeAttributeNS(n.space,n.local)}}function UD(n,t){return function(){this.setAttribute(n,t)}}function qD(n,t){return function(){this.setAttributeNS(n.space,n.local,t)}}function PD(n,t){return function(){var e=t.apply(this,arguments);e==null?this.removeAttribute(n):this.setAttribute(n,e)}}function JD(n,t){return function(){var e=t.apply(this,arguments);e==null?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,e)}}function $D(n,t){var e=uh(n);if(arguments.length<2){var r=this.node();return e.local?r.getAttributeNS(e.space,e.local):r.getAttribute(e)}return this.each((t==null?e.local?_D:LD:typeof t=="function"?e.local?JD:PD:e.local?qD:UD)(e,t))}function Gx(n){return n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView}function HD(n){return function(){this.style.removeProperty(n)}}function VD(n,t,e){return function(){this.style.setProperty(n,t,e)}}function jD(n,t,e){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(n):this.style.setProperty(n,r,e)}}function YD(n,t,e){return arguments.length>1?this.each((t==null?HD:typeof t=="function"?jD:VD)(n,t,e??"")):ml(this.node(),n)}function ml(n,t){return n.style.getPropertyValue(t)||Gx(n).getComputedStyle(n,null).getPropertyValue(t)}function KD(n){return function(){delete this[n]}}function GD(n,t){return function(){this[n]=t}}function XD(n,t){return function(){var e=t.apply(this,arguments);e==null?delete this[n]:this[n]=e}}function FD(n,t){return arguments.length>1?this.each((t==null?KD:typeof t=="function"?XD:GD)(n,t)):this.node()[n]}function Xx(n){return n.trim().split(/^|\s+/)}function Dp(n){return n.classList||new Fx(n)}function Fx(n){this._node=n,this._names=Xx(n.getAttribute("class")||"")}Fx.prototype={add:function(n){var t=this._names.indexOf(n);t<0&&(this._names.push(n),this._node.setAttribute("class",this._names.join(" ")))},remove:function(n){var t=this._names.indexOf(n);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(n){return this._names.indexOf(n)>=0}};function Zx(n,t){for(var e=Dp(n),r=-1,a=t.length;++r<a;)e.add(t[r])}function Qx(n,t){for(var e=Dp(n),r=-1,a=t.length;++r<a;)e.remove(t[r])}function ZD(n){return function(){Zx(this,n)}}function QD(n){return function(){Qx(this,n)}}function WD(n,t){return function(){(t.apply(this,arguments)?Zx:Qx)(this,n)}}function t3(n,t){var e=Xx(n+"");if(arguments.length<2){for(var r=Dp(this.node()),a=-1,l=e.length;++a<l;)if(!r.contains(e[a]))return!1;return!0}return this.each((typeof t=="function"?WD:t?ZD:QD)(e,t))}function e3(){this.textContent=""}function n3(n){return function(){this.textContent=n}}function r3(n){return function(){var t=n.apply(this,arguments);this.textContent=t??""}}function i3(n){return arguments.length?this.each(n==null?e3:(typeof n=="function"?r3:n3)(n)):this.node().textContent}function s3(){this.innerHTML=""}function a3(n){return function(){this.innerHTML=n}}function o3(n){return function(){var t=n.apply(this,arguments);this.innerHTML=t??""}}function l3(n){return arguments.length?this.each(n==null?s3:(typeof n=="function"?o3:a3)(n)):this.node().innerHTML}function u3(){this.nextSibling&&this.parentNode.appendChild(this)}function c3(){return this.each(u3)}function f3(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function d3(){return this.each(f3)}function h3(n){var t=typeof n=="function"?n:Hx(n);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function g3(){return null}function m3(n,t){var e=typeof n=="function"?n:Hx(n),r=t==null?g3:typeof t=="function"?t:kp(t);return this.select(function(){return this.insertBefore(e.apply(this,arguments),r.apply(this,arguments)||null)})}function y3(){var n=this.parentNode;n&&n.removeChild(this)}function p3(){return this.each(y3)}function v3(){var n=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(n,this.nextSibling):n}function w3(){var n=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(n,this.nextSibling):n}function b3(n){return this.select(n?w3:v3)}function S3(n){return arguments.length?this.property("__data__",n):this.node().__data__}function x3(n){return function(t){n.call(this,t,this.__data__)}}function T3(n){return n.trim().split(/^|\s+/).map(function(t){var e="",r=t.indexOf(".");return r>=0&&(e=t.slice(r+1),t=t.slice(0,r)),{type:t,name:e}})}function A3(n){return function(){var t=this.__on;if(t){for(var e=0,r=-1,a=t.length,l;e<a;++e)l=t[e],(!n.type||l.type===n.type)&&l.name===n.name?this.removeEventListener(l.type,l.listener,l.options):t[++r]=l;++r?t.length=r:delete this.__on}}}function E3(n,t,e){return function(){var r=this.__on,a,l=x3(t);if(r){for(var c=0,d=r.length;c<d;++c)if((a=r[c]).type===n.type&&a.name===n.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=l,a.options=e),a.value=t;return}}this.addEventListener(n.type,l,e),a={type:n.type,name:n.name,value:t,listener:l,options:e},r?r.push(a):this.__on=[a]}}function N3(n,t,e){var r=T3(n+""),a,l=r.length,c;if(arguments.length<2){var d=this.node().__on;if(d){for(var h=0,g=d.length,p;h<g;++h)for(a=0,p=d[h];a<l;++a)if((c=r[a]).type===p.type&&c.name===p.name)return p.value}return}for(d=t?E3:A3,a=0;a<l;++a)this.each(d(r[a],t,e));return this}function Wx(n,t,e){var r=Gx(n),a=r.CustomEvent;typeof a=="function"?a=new a(t,e):(a=r.document.createEvent("Event"),e?(a.initEvent(t,e.bubbles,e.cancelable),a.detail=e.detail):a.initEvent(t,!1,!1)),n.dispatchEvent(a)}function C3(n,t){return function(){return Wx(this,n,t)}}function k3(n,t){return function(){return Wx(this,n,t.apply(this,arguments))}}function D3(n,t){return this.each((typeof t=="function"?k3:C3)(n,t))}function*I3(){for(var n=this._groups,t=0,e=n.length;t<e;++t)for(var r=n[t],a=0,l=r.length,c;a<l;++a)(c=r[a])&&(yield c)}var tT=[null];function wn(n,t){this._groups=n,this._parents=t}function yc(){return new wn([[document.documentElement]],tT)}function O3(){return this}wn.prototype=yc.prototype={constructor:wn,select:rD,selectAll:oD,selectChild:fD,selectChildren:mD,filter:yD,data:xD,enter:pD,exit:AD,join:ED,merge:ND,selection:O3,order:CD,sort:kD,call:ID,nodes:OD,node:MD,size:RD,empty:BD,each:zD,attr:$D,style:YD,property:FD,classed:t3,text:i3,html:l3,raise:c3,lower:d3,append:h3,insert:m3,remove:p3,clone:b3,datum:S3,on:N3,dispatch:D3,[Symbol.iterator]:I3};function gn(n){return typeof n=="string"?new wn([[document.querySelector(n)]],[document.documentElement]):new wn([[n]],tT)}function M3(n){let t;for(;t=n.sourceEvent;)n=t;return n}function Qn(n,t){if(n=M3(n),t===void 0&&(t=n.currentTarget),t){var e=t.ownerSVGElement||t;if(e.createSVGPoint){var r=e.createSVGPoint();return r.x=n.clientX,r.y=n.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var a=t.getBoundingClientRect();return[n.clientX-a.left-t.clientLeft,n.clientY-a.top-t.clientTop]}}return[n.pageX,n.pageY]}const R3={passive:!1},nc={capture:!0,passive:!1};function Km(n){n.stopImmediatePropagation()}function nl(n){n.preventDefault(),n.stopImmediatePropagation()}function eT(n){var t=n.document.documentElement,e=gn(n).on("dragstart.drag",nl,nc);"onselectstart"in t?e.on("selectstart.drag",nl,nc):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function nT(n,t){var e=n.document.documentElement,r=gn(n).on("dragstart.drag",null);t&&(r.on("click.drag",nl,nc),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in e?r.on("selectstart.drag",null):(e.style.MozUserSelect=e.__noselect,delete e.__noselect)}const Kf=n=>()=>n;function Gy(n,{sourceEvent:t,subject:e,target:r,identifier:a,active:l,x:c,y:d,dx:h,dy:g,dispatch:p}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:e,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:a,enumerable:!0,configurable:!0},active:{value:l,enumerable:!0,configurable:!0},x:{value:c,enumerable:!0,configurable:!0},y:{value:d,enumerable:!0,configurable:!0},dx:{value:h,enumerable:!0,configurable:!0},dy:{value:g,enumerable:!0,configurable:!0},_:{value:p}})}Gy.prototype.on=function(){var n=this._.on.apply(this._,arguments);return n===this._?this:n};function B3(n){return!n.ctrlKey&&!n.button}function z3(){return this.parentNode}function L3(n,t){return t??{x:n.x,y:n.y}}function _3(){return navigator.maxTouchPoints||"ontouchstart"in this}function rT(){var n=B3,t=z3,e=L3,r=_3,a={},l=lh("start","drag","end"),c=0,d,h,g,p,w=0;function v(O){O.on("mousedown.drag",b).filter(r).on("touchstart.drag",C).on("touchmove.drag",D,R3).on("touchend.drag touchcancel.drag",L).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function b(O,B){if(!(p||!n.call(this,O,B))){var _=N(this,t.call(this,O,B),O,B,"mouse");_&&(gn(O.view).on("mousemove.drag",T,nc).on("mouseup.drag",A,nc),eT(O.view),Km(O),g=!1,d=O.clientX,h=O.clientY,_("start",O))}}function T(O){if(nl(O),!g){var B=O.clientX-d,_=O.clientY-h;g=B*B+_*_>w}a.mouse("drag",O)}function A(O){gn(O.view).on("mousemove.drag mouseup.drag",null),nT(O.view,g),nl(O),a.mouse("end",O)}function C(O,B){if(n.call(this,O,B)){var _=O.changedTouches,P=t.call(this,O,B),V=_.length,W,ft;for(W=0;W<V;++W)(ft=N(this,P,O,B,_[W].identifier,_[W]))&&(Km(O),ft("start",O,_[W]))}}function D(O){var B=O.changedTouches,_=B.length,P,V;for(P=0;P<_;++P)(V=a[B[P].identifier])&&(nl(O),V("drag",O,B[P]))}function L(O){var B=O.changedTouches,_=B.length,P,V;for(p&&clearTimeout(p),p=setTimeout(function(){p=null},500),P=0;P<_;++P)(V=a[B[P].identifier])&&(Km(O),V("end",O,B[P]))}function N(O,B,_,P,V,W){var ft=l.copy(),nt=Qn(W||_,B),rt,ot,M;if((M=e.call(O,new Gy("beforestart",{sourceEvent:_,target:v,identifier:V,active:c,x:nt[0],y:nt[1],dx:0,dy:0,dispatch:ft}),P))!=null)return rt=M.x-nt[0]||0,ot=M.y-nt[1]||0,function Y(I,z,K){var J=nt,k;switch(I){case"start":a[V]=Y,k=c++;break;case"end":delete a[V],--c;case"drag":nt=Qn(K||z,B),k=c;break}ft.call(I,O,new Gy(I,{sourceEvent:z,subject:M,target:v,identifier:V,active:k,x:nt[0]+rt,y:nt[1]+ot,dx:nt[0]-J[0],dy:nt[1]-J[1],dispatch:ft}),P)}}return v.filter=function(O){return arguments.length?(n=typeof O=="function"?O:Kf(!!O),v):n},v.container=function(O){return arguments.length?(t=typeof O=="function"?O:Kf(O),v):t},v.subject=function(O){return arguments.length?(e=typeof O=="function"?O:Kf(O),v):e},v.touchable=function(O){return arguments.length?(r=typeof O=="function"?O:Kf(!!O),v):r},v.on=function(){var O=l.on.apply(l,arguments);return O===l?v:O},v.clickDistance=function(O){return arguments.length?(w=(O=+O)*O,v):Math.sqrt(w)},v}function Ip(n,t,e){n.prototype=t.prototype=e,e.constructor=n}function iT(n,t){var e=Object.create(n.prototype);for(var r in t)e[r]=t[r];return e}function pc(){}var rc=.7,$d=1/rc,rl="\\s*([+-]?\\d+)\\s*",ic="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Cr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",U3=/^#([0-9a-f]{3,8})$/,q3=new RegExp(`^rgb\\(${rl},${rl},${rl}\\)$`),P3=new RegExp(`^rgb\\(${Cr},${Cr},${Cr}\\)$`),J3=new RegExp(`^rgba\\(${rl},${rl},${rl},${ic}\\)$`),$3=new RegExp(`^rgba\\(${Cr},${Cr},${Cr},${ic}\\)$`),H3=new RegExp(`^hsl\\(${ic},${Cr},${Cr}\\)$`),V3=new RegExp(`^hsla\\(${ic},${Cr},${Cr},${ic}\\)$`),kS={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ip(pc,to,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:DS,formatHex:DS,formatHex8:j3,formatHsl:Y3,formatRgb:IS,toString:IS});function DS(){return this.rgb().formatHex()}function j3(){return this.rgb().formatHex8()}function Y3(){return sT(this).formatHsl()}function IS(){return this.rgb().formatRgb()}function to(n){var t,e;return n=(n+"").trim().toLowerCase(),(t=U3.exec(n))?(e=t[1].length,t=parseInt(t[1],16),e===6?OS(t):e===3?new rn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):e===8?Gf(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):e===4?Gf(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=q3.exec(n))?new rn(t[1],t[2],t[3],1):(t=P3.exec(n))?new rn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=J3.exec(n))?Gf(t[1],t[2],t[3],t[4]):(t=$3.exec(n))?Gf(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=H3.exec(n))?BS(t[1],t[2]/100,t[3]/100,1):(t=V3.exec(n))?BS(t[1],t[2]/100,t[3]/100,t[4]):kS.hasOwnProperty(n)?OS(kS[n]):n==="transparent"?new rn(NaN,NaN,NaN,0):null}function OS(n){return new rn(n>>16&255,n>>8&255,n&255,1)}function Gf(n,t,e,r){return r<=0&&(n=t=e=NaN),new rn(n,t,e,r)}function K3(n){return n instanceof pc||(n=to(n)),n?(n=n.rgb(),new rn(n.r,n.g,n.b,n.opacity)):new rn}function Xy(n,t,e,r){return arguments.length===1?K3(n):new rn(n,t,e,r??1)}function rn(n,t,e,r){this.r=+n,this.g=+t,this.b=+e,this.opacity=+r}Ip(rn,Xy,iT(pc,{brighter(n){return n=n==null?$d:Math.pow($d,n),new rn(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?rc:Math.pow(rc,n),new rn(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new rn(Ga(this.r),Ga(this.g),Ga(this.b),Hd(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:MS,formatHex:MS,formatHex8:G3,formatRgb:RS,toString:RS}));function MS(){return`#${Ya(this.r)}${Ya(this.g)}${Ya(this.b)}`}function G3(){return`#${Ya(this.r)}${Ya(this.g)}${Ya(this.b)}${Ya((isNaN(this.opacity)?1:this.opacity)*255)}`}function RS(){const n=Hd(this.opacity);return`${n===1?"rgb(":"rgba("}${Ga(this.r)}, ${Ga(this.g)}, ${Ga(this.b)}${n===1?")":`, ${n})`}`}function Hd(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function Ga(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function Ya(n){return n=Ga(n),(n<16?"0":"")+n.toString(16)}function BS(n,t,e,r){return r<=0?n=t=e=NaN:e<=0||e>=1?n=t=NaN:t<=0&&(n=NaN),new Wn(n,t,e,r)}function sT(n){if(n instanceof Wn)return new Wn(n.h,n.s,n.l,n.opacity);if(n instanceof pc||(n=to(n)),!n)return new Wn;if(n instanceof Wn)return n;n=n.rgb();var t=n.r/255,e=n.g/255,r=n.b/255,a=Math.min(t,e,r),l=Math.max(t,e,r),c=NaN,d=l-a,h=(l+a)/2;return d?(t===l?c=(e-r)/d+(e<r)*6:e===l?c=(r-t)/d+2:c=(t-e)/d+4,d/=h<.5?l+a:2-l-a,c*=60):d=h>0&&h<1?0:c,new Wn(c,d,h,n.opacity)}function X3(n,t,e,r){return arguments.length===1?sT(n):new Wn(n,t,e,r??1)}function Wn(n,t,e,r){this.h=+n,this.s=+t,this.l=+e,this.opacity=+r}Ip(Wn,X3,iT(pc,{brighter(n){return n=n==null?$d:Math.pow($d,n),new Wn(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?rc:Math.pow(rc,n),new Wn(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,t=isNaN(n)||isNaN(this.s)?0:this.s,e=this.l,r=e+(e<.5?e:1-e)*t,a=2*e-r;return new rn(Gm(n>=240?n-240:n+120,a,r),Gm(n,a,r),Gm(n<120?n+240:n-120,a,r),this.opacity)},clamp(){return new Wn(zS(this.h),Xf(this.s),Xf(this.l),Hd(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=Hd(this.opacity);return`${n===1?"hsl(":"hsla("}${zS(this.h)}, ${Xf(this.s)*100}%, ${Xf(this.l)*100}%${n===1?")":`, ${n})`}`}}));function zS(n){return n=(n||0)%360,n<0?n+360:n}function Xf(n){return Math.max(0,Math.min(1,n||0))}function Gm(n,t,e){return(n<60?t+(e-t)*n/60:n<180?e:n<240?t+(e-t)*(240-n)/60:t)*255}const Op=n=>()=>n;function F3(n,t){return function(e){return n+e*t}}function Z3(n,t,e){return n=Math.pow(n,e),t=Math.pow(t,e)-n,e=1/e,function(r){return Math.pow(n+r*t,e)}}function Q3(n){return(n=+n)==1?aT:function(t,e){return e-t?Z3(t,e,n):Op(isNaN(t)?e:t)}}function aT(n,t){var e=t-n;return e?F3(n,e):Op(isNaN(n)?t:n)}const Vd=function n(t){var e=Q3(t);function r(a,l){var c=e((a=Xy(a)).r,(l=Xy(l)).r),d=e(a.g,l.g),h=e(a.b,l.b),g=aT(a.opacity,l.opacity);return function(p){return a.r=c(p),a.g=d(p),a.b=h(p),a.opacity=g(p),a+""}}return r.gamma=n,r}(1);function W3(n,t){t||(t=[]);var e=n?Math.min(t.length,n.length):0,r=t.slice(),a;return function(l){for(a=0;a<e;++a)r[a]=n[a]*(1-l)+t[a]*l;return r}}function tI(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function eI(n,t){var e=t?t.length:0,r=n?Math.min(e,n.length):0,a=new Array(r),l=new Array(e),c;for(c=0;c<r;++c)a[c]=ju(n[c],t[c]);for(;c<e;++c)l[c]=t[c];return function(d){for(c=0;c<r;++c)l[c]=a[c](d);return l}}function nI(n,t){var e=new Date;return n=+n,t=+t,function(r){return e.setTime(n*(1-r)+t*r),e}}function yr(n,t){return n=+n,t=+t,function(e){return n*(1-e)+t*e}}function rI(n,t){var e={},r={},a;(n===null||typeof n!="object")&&(n={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in n?e[a]=ju(n[a],t[a]):r[a]=t[a];return function(l){for(a in e)r[a]=e[a](l);return r}}var Fy=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Xm=new RegExp(Fy.source,"g");function iI(n){return function(){return n}}function sI(n){return function(t){return n(t)+""}}function oT(n,t){var e=Fy.lastIndex=Xm.lastIndex=0,r,a,l,c=-1,d=[],h=[];for(n=n+"",t=t+"";(r=Fy.exec(n))&&(a=Xm.exec(t));)(l=a.index)>e&&(l=t.slice(e,l),d[c]?d[c]+=l:d[++c]=l),(r=r[0])===(a=a[0])?d[c]?d[c]+=a:d[++c]=a:(d[++c]=null,h.push({i:c,x:yr(r,a)})),e=Xm.lastIndex;return e<t.length&&(l=t.slice(e),d[c]?d[c]+=l:d[++c]=l),d.length<2?h[0]?sI(h[0].x):iI(t):(t=h.length,function(g){for(var p=0,w;p<t;++p)d[(w=h[p]).i]=w.x(g);return d.join("")})}function ju(n,t){var e=typeof t,r;return t==null||e==="boolean"?Op(t):(e==="number"?yr:e==="string"?(r=to(t))?(t=r,Vd):oT:t instanceof to?Vd:t instanceof Date?nI:tI(t)?W3:Array.isArray(t)?eI:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?rI:yr)(n,t)}var LS=180/Math.PI,Zy={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function lT(n,t,e,r,a,l){var c,d,h;return(c=Math.sqrt(n*n+t*t))&&(n/=c,t/=c),(h=n*e+t*r)&&(e-=n*h,r-=t*h),(d=Math.sqrt(e*e+r*r))&&(e/=d,r/=d,h/=d),n*r<t*e&&(n=-n,t=-t,h=-h,c=-c),{translateX:a,translateY:l,rotate:Math.atan2(t,n)*LS,skewX:Math.atan(h)*LS,scaleX:c,scaleY:d}}var Ff;function aI(n){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(n+"");return t.isIdentity?Zy:lT(t.a,t.b,t.c,t.d,t.e,t.f)}function oI(n){return n==null||(Ff||(Ff=document.createElementNS("http://www.w3.org/2000/svg","g")),Ff.setAttribute("transform",n),!(n=Ff.transform.baseVal.consolidate()))?Zy:(n=n.matrix,lT(n.a,n.b,n.c,n.d,n.e,n.f))}function uT(n,t,e,r){function a(g){return g.length?g.pop()+" ":""}function l(g,p,w,v,b,T){if(g!==w||p!==v){var A=b.push("translate(",null,t,null,e);T.push({i:A-4,x:yr(g,w)},{i:A-2,x:yr(p,v)})}else(w||v)&&b.push("translate("+w+t+v+e)}function c(g,p,w,v){g!==p?(g-p>180?p+=360:p-g>180&&(g+=360),v.push({i:w.push(a(w)+"rotate(",null,r)-2,x:yr(g,p)})):p&&w.push(a(w)+"rotate("+p+r)}function d(g,p,w,v){g!==p?v.push({i:w.push(a(w)+"skewX(",null,r)-2,x:yr(g,p)}):p&&w.push(a(w)+"skewX("+p+r)}function h(g,p,w,v,b,T){if(g!==w||p!==v){var A=b.push(a(b)+"scale(",null,",",null,")");T.push({i:A-4,x:yr(g,w)},{i:A-2,x:yr(p,v)})}else(w!==1||v!==1)&&b.push(a(b)+"scale("+w+","+v+")")}return function(g,p){var w=[],v=[];return g=n(g),p=n(p),l(g.translateX,g.translateY,p.translateX,p.translateY,w,v),c(g.rotate,p.rotate,w,v),d(g.skewX,p.skewX,w,v),h(g.scaleX,g.scaleY,p.scaleX,p.scaleY,w,v),g=p=null,function(b){for(var T=-1,A=v.length,C;++T<A;)w[(C=v[T]).i]=C.x(b);return w.join("")}}}var lI=uT(aI,"px, ","px)","deg)"),uI=uT(oI,", ",")",")"),cI=1e-12;function _S(n){return((n=Math.exp(n))+1/n)/2}function fI(n){return((n=Math.exp(n))-1/n)/2}function dI(n){return((n=Math.exp(2*n))-1)/(n+1)}const ud=function n(t,e,r){function a(l,c){var d=l[0],h=l[1],g=l[2],p=c[0],w=c[1],v=c[2],b=p-d,T=w-h,A=b*b+T*T,C,D;if(A<cI)D=Math.log(v/g)/t,C=function(P){return[d+P*b,h+P*T,g*Math.exp(t*P*D)]};else{var L=Math.sqrt(A),N=(v*v-g*g+r*A)/(2*g*e*L),O=(v*v-g*g-r*A)/(2*v*e*L),B=Math.log(Math.sqrt(N*N+1)-N),_=Math.log(Math.sqrt(O*O+1)-O);D=(_-B)/t,C=function(P){var V=P*D,W=_S(B),ft=g/(e*L)*(W*dI(t*V+B)-fI(B));return[d+ft*b,h+ft*T,g*W/_S(t*V+B)]}}return C.duration=D*1e3*t/Math.SQRT2,C}return a.rho=function(l){var c=Math.max(.001,+l),d=c*c,h=d*d;return n(c,d,h)},a}(Math.SQRT2,2,4);var yl=0,Lu=0,Ou=0,cT=1e3,jd,_u,Yd=0,eo=0,ch=0,sc=typeof performance=="object"&&performance.now?performance:Date,fT=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function Mp(){return eo||(fT(hI),eo=sc.now()+ch)}function hI(){eo=0}function Kd(){this._call=this._time=this._next=null}Kd.prototype=dT.prototype={constructor:Kd,restart:function(n,t,e){if(typeof n!="function")throw new TypeError("callback is not a function");e=(e==null?Mp():+e)+(t==null?0:+t),!this._next&&_u!==this&&(_u?_u._next=this:jd=this,_u=this),this._call=n,this._time=e,Qy()},stop:function(){this._call&&(this._call=null,this._time=1/0,Qy())}};function dT(n,t,e){var r=new Kd;return r.restart(n,t,e),r}function gI(){Mp(),++yl;for(var n=jd,t;n;)(t=eo-n._time)>=0&&n._call.call(void 0,t),n=n._next;--yl}function US(){eo=(Yd=sc.now())+ch,yl=Lu=0;try{gI()}finally{yl=0,yI(),eo=0}}function mI(){var n=sc.now(),t=n-Yd;t>cT&&(ch-=t,Yd=n)}function yI(){for(var n,t=jd,e,r=1/0;t;)t._call?(r>t._time&&(r=t._time),n=t,t=t._next):(e=t._next,t._next=null,t=n?n._next=e:jd=e);_u=n,Qy(r)}function Qy(n){if(!yl){Lu&&(Lu=clearTimeout(Lu));var t=n-eo;t>24?(n<1/0&&(Lu=setTimeout(US,n-sc.now()-ch)),Ou&&(Ou=clearInterval(Ou))):(Ou||(Yd=sc.now(),Ou=setInterval(mI,cT)),yl=1,fT(US))}}function qS(n,t,e){var r=new Kd;return t=t==null?0:+t,r.restart(a=>{r.stop(),n(a+t)},t,e),r}var pI=lh("start","end","cancel","interrupt"),vI=[],hT=0,PS=1,Wy=2,cd=3,JS=4,tp=5,fd=6;function fh(n,t,e,r,a,l){var c=n.__transition;if(!c)n.__transition={};else if(e in c)return;wI(n,e,{name:t,index:r,group:a,on:pI,tween:vI,time:l.time,delay:l.delay,duration:l.duration,ease:l.ease,timer:null,state:hT})}function Rp(n,t){var e=or(n,t);if(e.state>hT)throw new Error("too late; already scheduled");return e}function Mr(n,t){var e=or(n,t);if(e.state>cd)throw new Error("too late; already running");return e}function or(n,t){var e=n.__transition;if(!e||!(e=e[t]))throw new Error("transition not found");return e}function wI(n,t,e){var r=n.__transition,a;r[t]=e,e.timer=dT(l,0,e.time);function l(g){e.state=PS,e.timer.restart(c,e.delay,e.time),e.delay<=g&&c(g-e.delay)}function c(g){var p,w,v,b;if(e.state!==PS)return h();for(p in r)if(b=r[p],b.name===e.name){if(b.state===cd)return qS(c);b.state===JS?(b.state=fd,b.timer.stop(),b.on.call("interrupt",n,n.__data__,b.index,b.group),delete r[p]):+p<t&&(b.state=fd,b.timer.stop(),b.on.call("cancel",n,n.__data__,b.index,b.group),delete r[p])}if(qS(function(){e.state===cd&&(e.state=JS,e.timer.restart(d,e.delay,e.time),d(g))}),e.state=Wy,e.on.call("start",n,n.__data__,e.index,e.group),e.state===Wy){for(e.state=cd,a=new Array(v=e.tween.length),p=0,w=-1;p<v;++p)(b=e.tween[p].value.call(n,n.__data__,e.index,e.group))&&(a[++w]=b);a.length=w+1}}function d(g){for(var p=g<e.duration?e.ease.call(null,g/e.duration):(e.timer.restart(h),e.state=tp,1),w=-1,v=a.length;++w<v;)a[w].call(n,p);e.state===tp&&(e.on.call("end",n,n.__data__,e.index,e.group),h())}function h(){e.state=fd,e.timer.stop(),delete r[t];for(var g in r)return;delete n.__transition}}function dd(n,t){var e=n.__transition,r,a,l=!0,c;if(e){t=t==null?null:t+"";for(c in e){if((r=e[c]).name!==t){l=!1;continue}a=r.state>Wy&&r.state<tp,r.state=fd,r.timer.stop(),r.on.call(a?"interrupt":"cancel",n,n.__data__,r.index,r.group),delete e[c]}l&&delete n.__transition}}function bI(n){return this.each(function(){dd(this,n)})}function SI(n,t){var e,r;return function(){var a=Mr(this,n),l=a.tween;if(l!==e){r=e=l;for(var c=0,d=r.length;c<d;++c)if(r[c].name===t){r=r.slice(),r.splice(c,1);break}}a.tween=r}}function xI(n,t,e){var r,a;if(typeof e!="function")throw new Error;return function(){var l=Mr(this,n),c=l.tween;if(c!==r){a=(r=c).slice();for(var d={name:t,value:e},h=0,g=a.length;h<g;++h)if(a[h].name===t){a[h]=d;break}h===g&&a.push(d)}l.tween=a}}function TI(n,t){var e=this._id;if(n+="",arguments.length<2){for(var r=or(this.node(),e).tween,a=0,l=r.length,c;a<l;++a)if((c=r[a]).name===n)return c.value;return null}return this.each((t==null?SI:xI)(e,n,t))}function Bp(n,t,e){var r=n._id;return n.each(function(){var a=Mr(this,r);(a.value||(a.value={}))[t]=e.apply(this,arguments)}),function(a){return or(a,r).value[t]}}function gT(n,t){var e;return(typeof t=="number"?yr:t instanceof to?Vd:(e=to(t))?(t=e,Vd):oT)(n,t)}function AI(n){return function(){this.removeAttribute(n)}}function EI(n){return function(){this.removeAttributeNS(n.space,n.local)}}function NI(n,t,e){var r,a=e+"",l;return function(){var c=this.getAttribute(n);return c===a?null:c===r?l:l=t(r=c,e)}}function CI(n,t,e){var r,a=e+"",l;return function(){var c=this.getAttributeNS(n.space,n.local);return c===a?null:c===r?l:l=t(r=c,e)}}function kI(n,t,e){var r,a,l;return function(){var c,d=e(this),h;return d==null?void this.removeAttribute(n):(c=this.getAttribute(n),h=d+"",c===h?null:c===r&&h===a?l:(a=h,l=t(r=c,d)))}}function DI(n,t,e){var r,a,l;return function(){var c,d=e(this),h;return d==null?void this.removeAttributeNS(n.space,n.local):(c=this.getAttributeNS(n.space,n.local),h=d+"",c===h?null:c===r&&h===a?l:(a=h,l=t(r=c,d)))}}function II(n,t){var e=uh(n),r=e==="transform"?uI:gT;return this.attrTween(n,typeof t=="function"?(e.local?DI:kI)(e,r,Bp(this,"attr."+n,t)):t==null?(e.local?EI:AI)(e):(e.local?CI:NI)(e,r,t))}function OI(n,t){return function(e){this.setAttribute(n,t.call(this,e))}}function MI(n,t){return function(e){this.setAttributeNS(n.space,n.local,t.call(this,e))}}function RI(n,t){var e,r;function a(){var l=t.apply(this,arguments);return l!==r&&(e=(r=l)&&MI(n,l)),e}return a._value=t,a}function BI(n,t){var e,r;function a(){var l=t.apply(this,arguments);return l!==r&&(e=(r=l)&&OI(n,l)),e}return a._value=t,a}function zI(n,t){var e="attr."+n;if(arguments.length<2)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;var r=uh(n);return this.tween(e,(r.local?RI:BI)(r,t))}function LI(n,t){return function(){Rp(this,n).delay=+t.apply(this,arguments)}}function _I(n,t){return t=+t,function(){Rp(this,n).delay=t}}function UI(n){var t=this._id;return arguments.length?this.each((typeof n=="function"?LI:_I)(t,n)):or(this.node(),t).delay}function qI(n,t){return function(){Mr(this,n).duration=+t.apply(this,arguments)}}function PI(n,t){return t=+t,function(){Mr(this,n).duration=t}}function JI(n){var t=this._id;return arguments.length?this.each((typeof n=="function"?qI:PI)(t,n)):or(this.node(),t).duration}function $I(n,t){if(typeof t!="function")throw new Error;return function(){Mr(this,n).ease=t}}function HI(n){var t=this._id;return arguments.length?this.each($I(t,n)):or(this.node(),t).ease}function VI(n,t){return function(){var e=t.apply(this,arguments);if(typeof e!="function")throw new Error;Mr(this,n).ease=e}}function jI(n){if(typeof n!="function")throw new Error;return this.each(VI(this._id,n))}function YI(n){typeof n!="function"&&(n=jx(n));for(var t=this._groups,e=t.length,r=new Array(e),a=0;a<e;++a)for(var l=t[a],c=l.length,d=r[a]=[],h,g=0;g<c;++g)(h=l[g])&&n.call(h,h.__data__,g,l)&&d.push(h);return new Cs(r,this._parents,this._name,this._id)}function KI(n){if(n._id!==this._id)throw new Error;for(var t=this._groups,e=n._groups,r=t.length,a=e.length,l=Math.min(r,a),c=new Array(r),d=0;d<l;++d)for(var h=t[d],g=e[d],p=h.length,w=c[d]=new Array(p),v,b=0;b<p;++b)(v=h[b]||g[b])&&(w[b]=v);for(;d<r;++d)c[d]=t[d];return new Cs(c,this._parents,this._name,this._id)}function GI(n){return(n+"").trim().split(/^|\s+/).every(function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||t==="start"})}function XI(n,t,e){var r,a,l=GI(t)?Rp:Mr;return function(){var c=l(this,n),d=c.on;d!==r&&(a=(r=d).copy()).on(t,e),c.on=a}}function FI(n,t){var e=this._id;return arguments.length<2?or(this.node(),e).on.on(n):this.each(XI(e,n,t))}function ZI(n){return function(){var t=this.parentNode;for(var e in this.__transition)if(+e!==n)return;t&&t.removeChild(this)}}function QI(){return this.on("end.remove",ZI(this._id))}function WI(n){var t=this._name,e=this._id;typeof n!="function"&&(n=kp(n));for(var r=this._groups,a=r.length,l=new Array(a),c=0;c<a;++c)for(var d=r[c],h=d.length,g=l[c]=new Array(h),p,w,v=0;v<h;++v)(p=d[v])&&(w=n.call(p,p.__data__,v,d))&&("__data__"in p&&(w.__data__=p.__data__),g[v]=w,fh(g[v],t,e,v,g,or(p,e)));return new Cs(l,this._parents,t,e)}function tO(n){var t=this._name,e=this._id;typeof n!="function"&&(n=Vx(n));for(var r=this._groups,a=r.length,l=[],c=[],d=0;d<a;++d)for(var h=r[d],g=h.length,p,w=0;w<g;++w)if(p=h[w]){for(var v=n.call(p,p.__data__,w,h),b,T=or(p,e),A=0,C=v.length;A<C;++A)(b=v[A])&&fh(b,t,e,A,v,T);l.push(v),c.push(p)}return new Cs(l,c,t,e)}var eO=yc.prototype.constructor;function nO(){return new eO(this._groups,this._parents)}function rO(n,t){var e,r,a;return function(){var l=ml(this,n),c=(this.style.removeProperty(n),ml(this,n));return l===c?null:l===e&&c===r?a:a=t(e=l,r=c)}}function mT(n){return function(){this.style.removeProperty(n)}}function iO(n,t,e){var r,a=e+"",l;return function(){var c=ml(this,n);return c===a?null:c===r?l:l=t(r=c,e)}}function sO(n,t,e){var r,a,l;return function(){var c=ml(this,n),d=e(this),h=d+"";return d==null&&(h=d=(this.style.removeProperty(n),ml(this,n))),c===h?null:c===r&&h===a?l:(a=h,l=t(r=c,d))}}function aO(n,t){var e,r,a,l="style."+t,c="end."+l,d;return function(){var h=Mr(this,n),g=h.on,p=h.value[l]==null?d||(d=mT(t)):void 0;(g!==e||a!==p)&&(r=(e=g).copy()).on(c,a=p),h.on=r}}function oO(n,t,e){var r=(n+="")=="transform"?lI:gT;return t==null?this.styleTween(n,rO(n,r)).on("end.style."+n,mT(n)):typeof t=="function"?this.styleTween(n,sO(n,r,Bp(this,"style."+n,t))).each(aO(this._id,n)):this.styleTween(n,iO(n,r,t),e).on("end.style."+n,null)}function lO(n,t,e){return function(r){this.style.setProperty(n,t.call(this,r),e)}}function uO(n,t,e){var r,a;function l(){var c=t.apply(this,arguments);return c!==a&&(r=(a=c)&&lO(n,c,e)),r}return l._value=t,l}function cO(n,t,e){var r="style."+(n+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,uO(n,t,e??""))}function fO(n){return function(){this.textContent=n}}function dO(n){return function(){var t=n(this);this.textContent=t??""}}function hO(n){return this.tween("text",typeof n=="function"?dO(Bp(this,"text",n)):fO(n==null?"":n+""))}function gO(n){return function(t){this.textContent=n.call(this,t)}}function mO(n){var t,e;function r(){var a=n.apply(this,arguments);return a!==e&&(t=(e=a)&&gO(a)),t}return r._value=n,r}function yO(n){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(n==null)return this.tween(t,null);if(typeof n!="function")throw new Error;return this.tween(t,mO(n))}function pO(){for(var n=this._name,t=this._id,e=yT(),r=this._groups,a=r.length,l=0;l<a;++l)for(var c=r[l],d=c.length,h,g=0;g<d;++g)if(h=c[g]){var p=or(h,t);fh(h,n,e,g,c,{time:p.time+p.delay+p.duration,delay:0,duration:p.duration,ease:p.ease})}return new Cs(r,this._parents,n,e)}function vO(){var n,t,e=this,r=e._id,a=e.size();return new Promise(function(l,c){var d={value:c},h={value:function(){--a===0&&l()}};e.each(function(){var g=Mr(this,r),p=g.on;p!==n&&(t=(n=p).copy(),t._.cancel.push(d),t._.interrupt.push(d),t._.end.push(h)),g.on=t}),a===0&&l()})}var wO=0;function Cs(n,t,e,r){this._groups=n,this._parents=t,this._name=e,this._id=r}function yT(){return++wO}var ti=yc.prototype;Cs.prototype={constructor:Cs,select:WI,selectAll:tO,selectChild:ti.selectChild,selectChildren:ti.selectChildren,filter:YI,merge:KI,selection:nO,transition:pO,call:ti.call,nodes:ti.nodes,node:ti.node,size:ti.size,empty:ti.empty,each:ti.each,on:FI,attr:II,attrTween:zI,style:oO,styleTween:cO,text:hO,textTween:yO,remove:QI,tween:TI,delay:UI,duration:JI,ease:HI,easeVarying:jI,end:vO,[Symbol.iterator]:ti[Symbol.iterator]};function bO(n){return((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2}var SO={time:null,delay:0,duration:250,ease:bO};function xO(n,t){for(var e;!(e=n.__transition)||!(e=e[t]);)if(!(n=n.parentNode))throw new Error(`transition ${t} not found`);return e}function TO(n){var t,e;n instanceof Cs?(t=n._id,n=n._name):(t=yT(),(e=SO).time=Mp(),n=n==null?null:n+"");for(var r=this._groups,a=r.length,l=0;l<a;++l)for(var c=r[l],d=c.length,h,g=0;g<d;++g)(h=c[g])&&fh(h,n,t,g,c,e||xO(h,t));return new Cs(r,this._parents,n,t)}yc.prototype.interrupt=bI;yc.prototype.transition=TO;const Zf=n=>()=>n;function AO(n,{sourceEvent:t,target:e,transform:r,dispatch:a}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:e,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:a}})}function xs(n,t,e){this.k=n,this.x=t,this.y=e}xs.prototype={constructor:xs,scale:function(n){return n===1?this:new xs(this.k*n,this.x,this.y)},translate:function(n,t){return n===0&t===0?this:new xs(this.k,this.x+this.k*n,this.y+this.k*t)},apply:function(n){return[n[0]*this.k+this.x,n[1]*this.k+this.y]},applyX:function(n){return n*this.k+this.x},applyY:function(n){return n*this.k+this.y},invert:function(n){return[(n[0]-this.x)/this.k,(n[1]-this.y)/this.k]},invertX:function(n){return(n-this.x)/this.k},invertY:function(n){return(n-this.y)/this.k},rescaleX:function(n){return n.copy().domain(n.range().map(this.invertX,this).map(n.invert,n))},rescaleY:function(n){return n.copy().domain(n.range().map(this.invertY,this).map(n.invert,n))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var dh=new xs(1,0,0);pT.prototype=xs.prototype;function pT(n){for(;!n.__zoom;)if(!(n=n.parentNode))return dh;return n.__zoom}function Fm(n){n.stopImmediatePropagation()}function Mu(n){n.preventDefault(),n.stopImmediatePropagation()}function EO(n){return(!n.ctrlKey||n.type==="wheel")&&!n.button}function NO(){var n=this;return n instanceof SVGElement?(n=n.ownerSVGElement||n,n.hasAttribute("viewBox")?(n=n.viewBox.baseVal,[[n.x,n.y],[n.x+n.width,n.y+n.height]]):[[0,0],[n.width.baseVal.value,n.height.baseVal.value]]):[[0,0],[n.clientWidth,n.clientHeight]]}function $S(){return this.__zoom||dh}function CO(n){return-n.deltaY*(n.deltaMode===1?.05:n.deltaMode?1:.002)*(n.ctrlKey?10:1)}function kO(){return navigator.maxTouchPoints||"ontouchstart"in this}function DO(n,t,e){var r=n.invertX(t[0][0])-e[0][0],a=n.invertX(t[1][0])-e[1][0],l=n.invertY(t[0][1])-e[0][1],c=n.invertY(t[1][1])-e[1][1];return n.translate(a>r?(r+a)/2:Math.min(0,r)||Math.max(0,a),c>l?(l+c)/2:Math.min(0,l)||Math.max(0,c))}function vT(){var n=EO,t=NO,e=DO,r=CO,a=kO,l=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],d=250,h=ud,g=lh("start","zoom","end"),p,w,v,b=500,T=150,A=0,C=10;function D(M){M.property("__zoom",$S).on("wheel.zoom",V,{passive:!1}).on("mousedown.zoom",W).on("dblclick.zoom",ft).filter(a).on("touchstart.zoom",nt).on("touchmove.zoom",rt).on("touchend.zoom touchcancel.zoom",ot).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}D.transform=function(M,Y,I,z){var K=M.selection?M.selection():M;K.property("__zoom",$S),M!==K?B(M,Y,I,z):K.interrupt().each(function(){_(this,arguments).event(z).start().zoom(null,typeof Y=="function"?Y.apply(this,arguments):Y).end()})},D.scaleBy=function(M,Y,I,z){D.scaleTo(M,function(){var K=this.__zoom.k,J=typeof Y=="function"?Y.apply(this,arguments):Y;return K*J},I,z)},D.scaleTo=function(M,Y,I,z){D.transform(M,function(){var K=t.apply(this,arguments),J=this.__zoom,k=I==null?O(K):typeof I=="function"?I.apply(this,arguments):I,U=J.invert(k),Z=typeof Y=="function"?Y.apply(this,arguments):Y;return e(N(L(J,Z),k,U),K,c)},I,z)},D.translateBy=function(M,Y,I,z){D.transform(M,function(){return e(this.__zoom.translate(typeof Y=="function"?Y.apply(this,arguments):Y,typeof I=="function"?I.apply(this,arguments):I),t.apply(this,arguments),c)},null,z)},D.translateTo=function(M,Y,I,z,K){D.transform(M,function(){var J=t.apply(this,arguments),k=this.__zoom,U=z==null?O(J):typeof z=="function"?z.apply(this,arguments):z;return e(dh.translate(U[0],U[1]).scale(k.k).translate(typeof Y=="function"?-Y.apply(this,arguments):-Y,typeof I=="function"?-I.apply(this,arguments):-I),J,c)},z,K)};function L(M,Y){return Y=Math.max(l[0],Math.min(l[1],Y)),Y===M.k?M:new xs(Y,M.x,M.y)}function N(M,Y,I){var z=Y[0]-I[0]*M.k,K=Y[1]-I[1]*M.k;return z===M.x&&K===M.y?M:new xs(M.k,z,K)}function O(M){return[(+M[0][0]+ +M[1][0])/2,(+M[0][1]+ +M[1][1])/2]}function B(M,Y,I,z){M.on("start.zoom",function(){_(this,arguments).event(z).start()}).on("interrupt.zoom end.zoom",function(){_(this,arguments).event(z).end()}).tween("zoom",function(){var K=this,J=arguments,k=_(K,J).event(z),U=t.apply(K,J),Z=I==null?O(U):typeof I=="function"?I.apply(K,J):I,it=Math.max(U[1][0]-U[0][0],U[1][1]-U[0][1]),lt=K.__zoom,yt=typeof Y=="function"?Y.apply(K,J):Y,dt=h(lt.invert(Z).concat(it/lt.k),yt.invert(Z).concat(it/yt.k));return function(pt){if(pt===1)pt=yt;else{var mt=dt(pt),St=it/mt[2];pt=new xs(St,Z[0]-mt[0]*St,Z[1]-mt[1]*St)}k.zoom(null,pt)}})}function _(M,Y,I){return!I&&M.__zooming||new P(M,Y)}function P(M,Y){this.that=M,this.args=Y,this.active=0,this.sourceEvent=null,this.extent=t.apply(M,Y),this.taps=0}P.prototype={event:function(M){return M&&(this.sourceEvent=M),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(M,Y){return this.mouse&&M!=="mouse"&&(this.mouse[1]=Y.invert(this.mouse[0])),this.touch0&&M!=="touch"&&(this.touch0[1]=Y.invert(this.touch0[0])),this.touch1&&M!=="touch"&&(this.touch1[1]=Y.invert(this.touch1[0])),this.that.__zoom=Y,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(M){var Y=gn(this.that).datum();g.call(M,this.that,new AO(M,{sourceEvent:this.sourceEvent,target:D,transform:this.that.__zoom,dispatch:g}),Y)}};function V(M,...Y){if(!n.apply(this,arguments))return;var I=_(this,Y).event(M),z=this.__zoom,K=Math.max(l[0],Math.min(l[1],z.k*Math.pow(2,r.apply(this,arguments)))),J=Qn(M);if(I.wheel)(I.mouse[0][0]!==J[0]||I.mouse[0][1]!==J[1])&&(I.mouse[1]=z.invert(I.mouse[0]=J)),clearTimeout(I.wheel);else{if(z.k===K)return;I.mouse=[J,z.invert(J)],dd(this),I.start()}Mu(M),I.wheel=setTimeout(k,T),I.zoom("mouse",e(N(L(z,K),I.mouse[0],I.mouse[1]),I.extent,c));function k(){I.wheel=null,I.end()}}function W(M,...Y){if(v||!n.apply(this,arguments))return;var I=M.currentTarget,z=_(this,Y,!0).event(M),K=gn(M.view).on("mousemove.zoom",Z,!0).on("mouseup.zoom",it,!0),J=Qn(M,I),k=M.clientX,U=M.clientY;eT(M.view),Fm(M),z.mouse=[J,this.__zoom.invert(J)],dd(this),z.start();function Z(lt){if(Mu(lt),!z.moved){var yt=lt.clientX-k,dt=lt.clientY-U;z.moved=yt*yt+dt*dt>A}z.event(lt).zoom("mouse",e(N(z.that.__zoom,z.mouse[0]=Qn(lt,I),z.mouse[1]),z.extent,c))}function it(lt){K.on("mousemove.zoom mouseup.zoom",null),nT(lt.view,z.moved),Mu(lt),z.event(lt).end()}}function ft(M,...Y){if(n.apply(this,arguments)){var I=this.__zoom,z=Qn(M.changedTouches?M.changedTouches[0]:M,this),K=I.invert(z),J=I.k*(M.shiftKey?.5:2),k=e(N(L(I,J),z,K),t.apply(this,Y),c);Mu(M),d>0?gn(this).transition().duration(d).call(B,k,z,M):gn(this).call(D.transform,k,z,M)}}function nt(M,...Y){if(n.apply(this,arguments)){var I=M.touches,z=I.length,K=_(this,Y,M.changedTouches.length===z).event(M),J,k,U,Z;for(Fm(M),k=0;k<z;++k)U=I[k],Z=Qn(U,this),Z=[Z,this.__zoom.invert(Z),U.identifier],K.touch0?!K.touch1&&K.touch0[2]!==Z[2]&&(K.touch1=Z,K.taps=0):(K.touch0=Z,J=!0,K.taps=1+!!p);p&&(p=clearTimeout(p)),J&&(K.taps<2&&(w=Z[0],p=setTimeout(function(){p=null},b)),dd(this),K.start())}}function rt(M,...Y){if(this.__zooming){var I=_(this,Y).event(M),z=M.changedTouches,K=z.length,J,k,U,Z;for(Mu(M),J=0;J<K;++J)k=z[J],U=Qn(k,this),I.touch0&&I.touch0[2]===k.identifier?I.touch0[0]=U:I.touch1&&I.touch1[2]===k.identifier&&(I.touch1[0]=U);if(k=I.that.__zoom,I.touch1){var it=I.touch0[0],lt=I.touch0[1],yt=I.touch1[0],dt=I.touch1[1],pt=(pt=yt[0]-it[0])*pt+(pt=yt[1]-it[1])*pt,mt=(mt=dt[0]-lt[0])*mt+(mt=dt[1]-lt[1])*mt;k=L(k,Math.sqrt(pt/mt)),U=[(it[0]+yt[0])/2,(it[1]+yt[1])/2],Z=[(lt[0]+dt[0])/2,(lt[1]+dt[1])/2]}else if(I.touch0)U=I.touch0[0],Z=I.touch0[1];else return;I.zoom("touch",e(N(k,U,Z),I.extent,c))}}function ot(M,...Y){if(this.__zooming){var I=_(this,Y).event(M),z=M.changedTouches,K=z.length,J,k;for(Fm(M),v&&clearTimeout(v),v=setTimeout(function(){v=null},b),J=0;J<K;++J)k=z[J],I.touch0&&I.touch0[2]===k.identifier?delete I.touch0:I.touch1&&I.touch1[2]===k.identifier&&delete I.touch1;if(I.touch1&&!I.touch0&&(I.touch0=I.touch1,delete I.touch1),I.touch0)I.touch0[1]=this.__zoom.invert(I.touch0[0]);else if(I.end(),I.taps===2&&(k=Qn(k,this),Math.hypot(w[0]-k[0],w[1]-k[1])<C)){var U=gn(this).on("dblclick.zoom");U&&U.apply(this,arguments)}}}return D.wheelDelta=function(M){return arguments.length?(r=typeof M=="function"?M:Zf(+M),D):r},D.filter=function(M){return arguments.length?(n=typeof M=="function"?M:Zf(!!M),D):n},D.touchable=function(M){return arguments.length?(a=typeof M=="function"?M:Zf(!!M),D):a},D.extent=function(M){return arguments.length?(t=typeof M=="function"?M:Zf([[+M[0][0],+M[0][1]],[+M[1][0],+M[1][1]]]),D):t},D.scaleExtent=function(M){return arguments.length?(l[0]=+M[0],l[1]=+M[1],D):[l[0],l[1]]},D.translateExtent=function(M){return arguments.length?(c[0][0]=+M[0][0],c[1][0]=+M[1][0],c[0][1]=+M[0][1],c[1][1]=+M[1][1],D):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},D.constrain=function(M){return arguments.length?(e=M,D):e},D.duration=function(M){return arguments.length?(d=+M,D):d},D.interpolate=function(M){return arguments.length?(h=M,D):h},D.on=function(){var M=g.on.apply(g,arguments);return M===g?D:M},D.clickDistance=function(M){return arguments.length?(A=(M=+M)*M,D):Math.sqrt(A)},D.tapDistance=function(M){return arguments.length?(C=+M,D):C},D}const Or={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:n=>`Node type "${n}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:n=>`The old edge with id=${n} does not exist.`,error009:n=>`Marker type "${n}" doesn't exist.`,error008:(n,{id:t,sourceHandle:e,targetHandle:r})=>`Couldn't create edge for ${n} handle id: "${n==="source"?e:r}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:n=>`Edge type "${n}" not found. Using fallback type "default".`,error012:n=>`Node with id "${n}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(n="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${n}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},ac=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],wT=["Enter"," ","Escape"],bT={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:n,x:t,y:e})=>`Moved selected node ${n}. New position, x: ${t}, y: ${e}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var pl;(function(n){n.Strict="strict",n.Loose="loose"})(pl||(pl={}));var Xa;(function(n){n.Free="free",n.Vertical="vertical",n.Horizontal="horizontal"})(Xa||(Xa={}));var oc;(function(n){n.Partial="partial",n.Full="full"})(oc||(oc={}));const ST={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var la;(function(n){n.Bezier="default",n.Straight="straight",n.Step="step",n.SmoothStep="smoothstep",n.SimpleBezier="simplebezier"})(la||(la={}));var Gd;(function(n){n.Arrow="arrow",n.ArrowClosed="arrowclosed"})(Gd||(Gd={}));var Et;(function(n){n.Left="left",n.Top="top",n.Right="right",n.Bottom="bottom"})(Et||(Et={}));const HS={[Et.Left]:Et.Right,[Et.Right]:Et.Left,[Et.Top]:Et.Bottom,[Et.Bottom]:Et.Top};function xT(n){return n===null?null:n?"valid":"invalid"}const TT=n=>"id"in n&&"source"in n&&"target"in n,IO=n=>"id"in n&&"position"in n&&!("source"in n)&&!("target"in n),zp=n=>"id"in n&&"internals"in n&&!("source"in n)&&!("target"in n),vc=(n,t=[0,0])=>{const{width:e,height:r}=Ds(n),a=n.origin??t,l=e*a[0],c=r*a[1];return{x:n.position.x-l,y:n.position.y-c}},OO=(n,t={nodeOrigin:[0,0]})=>{if(n.length===0)return{x:0,y:0,width:0,height:0};const e=n.reduce((r,a)=>{const l=typeof a=="string";let c=!t.nodeLookup&&!l?a:void 0;t.nodeLookup&&(c=l?t.nodeLookup.get(a):zp(a)?a:t.nodeLookup.get(a.id));const d=c?Xd(c,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return hh(r,d)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return gh(e)},wc=(n,t={})=>{if(n.size===0)return{x:0,y:0,width:0,height:0};let e={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return n.forEach(r=>{if(t.filter===void 0||t.filter(r)){const a=Xd(r);e=hh(e,a)}}),gh(e)},Lp=(n,t,[e,r,a]=[0,0,1],l=!1,c=!1)=>{const d={...bc(t,[e,r,a]),width:t.width/a,height:t.height/a},h=[];for(const g of n.values()){const{measured:p,selectable:w=!0,hidden:v=!1}=g;if(c&&!w||v)continue;const b=p.width??g.width??g.initialWidth??null,T=p.height??g.height??g.initialHeight??null,A=lc(d,wl(g)),C=(b??0)*(T??0),D=l&&A>0;(!g.internals.handleBounds||D||A>=C||g.dragging)&&h.push(g)}return h},MO=(n,t)=>{const e=new Set;return n.forEach(r=>{e.add(r.id)}),t.filter(r=>e.has(r.source)||e.has(r.target))};function RO(n,t){const e=new Map,r=t!=null&&t.nodes?new Set(t.nodes.map(a=>a.id)):null;return n.forEach(a=>{a.measured.width&&a.measured.height&&((t==null?void 0:t.includeHiddenNodes)||!a.hidden)&&(!r||r.has(a.id))&&e.set(a.id,a)}),e}async function BO({nodes:n,width:t,height:e,panZoom:r,minZoom:a,maxZoom:l},c){if(n.size===0)return Promise.resolve(!0);const d=RO(n,c),h=wc(d),g=_p(h,t,e,(c==null?void 0:c.minZoom)??a,(c==null?void 0:c.maxZoom)??l,(c==null?void 0:c.padding)??.1);return await r.setViewport(g,{duration:c==null?void 0:c.duration,ease:c==null?void 0:c.ease,interpolate:c==null?void 0:c.interpolate}),Promise.resolve(!0)}function AT({nodeId:n,nextPosition:t,nodeLookup:e,nodeOrigin:r=[0,0],nodeExtent:a,onError:l}){const c=e.get(n),d=c.parentId?e.get(c.parentId):void 0,{x:h,y:g}=d?d.internals.positionAbsolute:{x:0,y:0},p=c.origin??r;let w=c.extent||a;if(c.extent==="parent"&&!c.expandParent)if(!d)l==null||l("005",Or.error005());else{const b=d.measured.width,T=d.measured.height;b&&T&&(w=[[h,g],[h+b,g+T]])}else d&&bl(c.extent)&&(w=[[c.extent[0][0]+h,c.extent[0][1]+g],[c.extent[1][0]+h,c.extent[1][1]+g]]);const v=bl(w)?no(t,w,c.measured):t;return(c.measured.width===void 0||c.measured.height===void 0)&&(l==null||l("015",Or.error015())),{position:{x:v.x-h+(c.measured.width??0)*p[0],y:v.y-g+(c.measured.height??0)*p[1]},positionAbsolute:v}}async function zO({nodesToRemove:n=[],edgesToRemove:t=[],nodes:e,edges:r,onBeforeDelete:a}){const l=new Set(n.map(v=>v.id)),c=[];for(const v of e){if(v.deletable===!1)continue;const b=l.has(v.id),T=!b&&v.parentId&&c.find(A=>A.id===v.parentId);(b||T)&&c.push(v)}const d=new Set(t.map(v=>v.id)),h=r.filter(v=>v.deletable!==!1),p=MO(c,h);for(const v of h)d.has(v.id)&&!p.find(T=>T.id===v.id)&&p.push(v);if(!a)return{edges:p,nodes:c};const w=await a({nodes:c,edges:p});return typeof w=="boolean"?w?{edges:p,nodes:c}:{edges:[],nodes:[]}:w}const vl=(n,t=0,e=1)=>Math.min(Math.max(n,t),e),no=(n={x:0,y:0},t,e)=>({x:vl(n.x,t[0][0],t[1][0]-((e==null?void 0:e.width)??0)),y:vl(n.y,t[0][1],t[1][1]-((e==null?void 0:e.height)??0))});function ET(n,t,e){const{width:r,height:a}=Ds(e),{x:l,y:c}=e.internals.positionAbsolute;return no(n,[[l,c],[l+r,c+a]],t)}const VS=(n,t,e)=>n<t?vl(Math.abs(n-t),1,t)/t:n>e?-vl(Math.abs(n-e),1,t)/t:0,NT=(n,t,e=15,r=40)=>{const a=VS(n.x,r,t.width-r)*e,l=VS(n.y,r,t.height-r)*e;return[a,l]},hh=(n,t)=>({x:Math.min(n.x,t.x),y:Math.min(n.y,t.y),x2:Math.max(n.x2,t.x2),y2:Math.max(n.y2,t.y2)}),ep=({x:n,y:t,width:e,height:r})=>({x:n,y:t,x2:n+e,y2:t+r}),gh=({x:n,y:t,x2:e,y2:r})=>({x:n,y:t,width:e-n,height:r-t}),wl=(n,t=[0,0])=>{var a,l;const{x:e,y:r}=zp(n)?n.internals.positionAbsolute:vc(n,t);return{x:e,y:r,width:((a=n.measured)==null?void 0:a.width)??n.width??n.initialWidth??0,height:((l=n.measured)==null?void 0:l.height)??n.height??n.initialHeight??0}},Xd=(n,t=[0,0])=>{var a,l;const{x:e,y:r}=zp(n)?n.internals.positionAbsolute:vc(n,t);return{x:e,y:r,x2:e+(((a=n.measured)==null?void 0:a.width)??n.width??n.initialWidth??0),y2:r+(((l=n.measured)==null?void 0:l.height)??n.height??n.initialHeight??0)}},CT=(n,t)=>gh(hh(ep(n),ep(t))),lc=(n,t)=>{const e=Math.max(0,Math.min(n.x+n.width,t.x+t.width)-Math.max(n.x,t.x)),r=Math.max(0,Math.min(n.y+n.height,t.y+t.height)-Math.max(n.y,t.y));return Math.ceil(e*r)},jS=n=>ir(n.width)&&ir(n.height)&&ir(n.x)&&ir(n.y),ir=n=>!isNaN(n)&&isFinite(n),LO=(n,t)=>{},mh=(n,t=[1,1])=>({x:t[0]*Math.round(n.x/t[0]),y:t[1]*Math.round(n.y/t[1])}),bc=({x:n,y:t},[e,r,a],l=!1,c=[1,1])=>{const d={x:(n-e)/a,y:(t-r)/a};return l?mh(d,c):d},Fd=({x:n,y:t},[e,r,a])=>({x:n*a+e,y:t*a+r});function Go(n,t){if(typeof n=="number")return Math.floor((t-t/(1+n))*.5);if(typeof n=="string"&&n.endsWith("px")){const e=parseFloat(n);if(!Number.isNaN(e))return Math.floor(e)}if(typeof n=="string"&&n.endsWith("%")){const e=parseFloat(n);if(!Number.isNaN(e))return Math.floor(t*e*.01)}return console.error(`[React Flow] The padding value "${n}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function _O(n,t,e){if(typeof n=="string"||typeof n=="number"){const r=Go(n,e),a=Go(n,t);return{top:r,right:a,bottom:r,left:a,x:a*2,y:r*2}}if(typeof n=="object"){const r=Go(n.top??n.y??0,e),a=Go(n.bottom??n.y??0,e),l=Go(n.left??n.x??0,t),c=Go(n.right??n.x??0,t);return{top:r,right:c,bottom:a,left:l,x:l+c,y:r+a}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function UO(n,t,e,r,a,l){const{x:c,y:d}=Fd(n,[t,e,r]),{x:h,y:g}=Fd({x:n.x+n.width,y:n.y+n.height},[t,e,r]),p=a-h,w=l-g;return{left:Math.floor(c),top:Math.floor(d),right:Math.floor(p),bottom:Math.floor(w)}}const _p=(n,t,e,r,a,l)=>{const c=_O(l,t,e),d=(t-c.x)/n.width,h=(e-c.y)/n.height,g=Math.min(d,h),p=vl(g,r,a),w=n.x+n.width/2,v=n.y+n.height/2,b=t/2-w*p,T=e/2-v*p,A=UO(n,b,T,p,t,e),C={left:Math.min(A.left-c.left,0),top:Math.min(A.top-c.top,0),right:Math.min(A.right-c.right,0),bottom:Math.min(A.bottom-c.bottom,0)};return{x:b-C.left+C.right,y:T-C.top+C.bottom,zoom:p}},Zd=()=>{var n;return typeof navigator<"u"&&((n=navigator==null?void 0:navigator.userAgent)==null?void 0:n.indexOf("Mac"))>=0};function bl(n){return n!==void 0&&n!=="parent"}function Ds(n){var t,e;return{width:((t=n.measured)==null?void 0:t.width)??n.width??n.initialWidth??0,height:((e=n.measured)==null?void 0:e.height)??n.height??n.initialHeight??0}}function kT(n){var t,e;return(((t=n.measured)==null?void 0:t.width)??n.width??n.initialWidth)!==void 0&&(((e=n.measured)==null?void 0:e.height)??n.height??n.initialHeight)!==void 0}function DT(n,t={width:0,height:0},e,r,a){const l={...n},c=r.get(e);if(c){const d=c.origin||a;l.x+=c.internals.positionAbsolute.x-(t.width??0)*d[0],l.y+=c.internals.positionAbsolute.y-(t.height??0)*d[1]}return l}function YS(n,t){if(n.size!==t.size)return!1;for(const e of n)if(!t.has(e))return!1;return!0}function qO(){let n,t;return{promise:new Promise((r,a)=>{n=r,t=a}),resolve:n,reject:t}}function PO(n){return{...bT,...n||{}}}function Yu(n,{snapGrid:t=[0,0],snapToGrid:e=!1,transform:r,containerBounds:a}){const{x:l,y:c}=Tr(n),d=bc({x:l-((a==null?void 0:a.left)??0),y:c-((a==null?void 0:a.top)??0)},r),{x:h,y:g}=e?mh(d,t):d;return{xSnapped:h,ySnapped:g,...d}}const Up=n=>({width:n.offsetWidth,height:n.offsetHeight}),IT=n=>{var t;return((t=n==null?void 0:n.getRootNode)==null?void 0:t.call(n))||(window==null?void 0:window.document)},JO=["INPUT","SELECT","TEXTAREA"];function OT(n){var r,a;const t=((a=(r=n.composedPath)==null?void 0:r.call(n))==null?void 0:a[0])||n.target;return(t==null?void 0:t.nodeType)!==1?!1:JO.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey")}const MT=n=>"clientX"in n,Tr=(n,t)=>{var l,c;const e=MT(n),r=e?n.clientX:(l=n.touches)==null?void 0:l[0].clientX,a=e?n.clientY:(c=n.touches)==null?void 0:c[0].clientY;return{x:r-((t==null?void 0:t.left)??0),y:a-((t==null?void 0:t.top)??0)}},KS=(n,t,e,r,a)=>{const l=t.querySelectorAll(`.${n}`);return!l||!l.length?null:Array.from(l).map(c=>{const d=c.getBoundingClientRect();return{id:c.getAttribute("data-handleid"),type:n,nodeId:a,position:c.getAttribute("data-handlepos"),x:(d.left-e.left)/r,y:(d.top-e.top)/r,...Up(c)}})};function RT({sourceX:n,sourceY:t,targetX:e,targetY:r,sourceControlX:a,sourceControlY:l,targetControlX:c,targetControlY:d}){const h=n*.125+a*.375+c*.375+e*.125,g=t*.125+l*.375+d*.375+r*.125,p=Math.abs(h-n),w=Math.abs(g-t);return[h,g,p,w]}function Qf(n,t){return n>=0?.5*n:t*25*Math.sqrt(-n)}function GS({pos:n,x1:t,y1:e,x2:r,y2:a,c:l}){switch(n){case Et.Left:return[t-Qf(t-r,l),e];case Et.Right:return[t+Qf(r-t,l),e];case Et.Top:return[t,e-Qf(e-a,l)];case Et.Bottom:return[t,e+Qf(a-e,l)]}}function BT({sourceX:n,sourceY:t,sourcePosition:e=Et.Bottom,targetX:r,targetY:a,targetPosition:l=Et.Top,curvature:c=.25}){const[d,h]=GS({pos:e,x1:n,y1:t,x2:r,y2:a,c}),[g,p]=GS({pos:l,x1:r,y1:a,x2:n,y2:t,c}),[w,v,b,T]=RT({sourceX:n,sourceY:t,targetX:r,targetY:a,sourceControlX:d,sourceControlY:h,targetControlX:g,targetControlY:p});return[`M${n},${t} C${d},${h} ${g},${p} ${r},${a}`,w,v,b,T]}function zT({sourceX:n,sourceY:t,targetX:e,targetY:r}){const a=Math.abs(e-n)/2,l=e<n?e+a:e-a,c=Math.abs(r-t)/2,d=r<t?r+c:r-c;return[l,d,a,c]}function $O({sourceNode:n,targetNode:t,selected:e=!1,zIndex:r,elevateOnSelect:a=!1}){if(r!==void 0)return r;const l=a&&e?1e3:0,c=Math.max(n.parentId?n.internals.z:0,t.parentId?t.internals.z:0);return l+c}function HO({sourceNode:n,targetNode:t,width:e,height:r,transform:a}){const l=hh(Xd(n),Xd(t));l.x===l.x2&&(l.x2+=1),l.y===l.y2&&(l.y2+=1);const c={x:-a[0]/a[2],y:-a[1]/a[2],width:e/a[2],height:r/a[2]};return lc(c,gh(l))>0}const VO=({source:n,sourceHandle:t,target:e,targetHandle:r})=>`xy-edge__${n}${t||""}-${e}${r||""}`,jO=(n,t)=>t.some(e=>e.source===n.source&&e.target===n.target&&(e.sourceHandle===n.sourceHandle||!e.sourceHandle&&!n.sourceHandle)&&(e.targetHandle===n.targetHandle||!e.targetHandle&&!n.targetHandle)),YO=(n,t)=>{if(!n.source||!n.target)return t;let e;return TT(n)?e={...n}:e={...n,id:VO(n)},jO(e,t)?t:(e.sourceHandle===null&&delete e.sourceHandle,e.targetHandle===null&&delete e.targetHandle,t.concat(e))};function LT({sourceX:n,sourceY:t,targetX:e,targetY:r}){const[a,l,c,d]=zT({sourceX:n,sourceY:t,targetX:e,targetY:r});return[`M ${n},${t}L ${e},${r}`,a,l,c,d]}const XS={[Et.Left]:{x:-1,y:0},[Et.Right]:{x:1,y:0},[Et.Top]:{x:0,y:-1},[Et.Bottom]:{x:0,y:1}},KO=({source:n,sourcePosition:t=Et.Bottom,target:e})=>t===Et.Left||t===Et.Right?n.x<e.x?{x:1,y:0}:{x:-1,y:0}:n.y<e.y?{x:0,y:1}:{x:0,y:-1},FS=(n,t)=>Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2));function GO({source:n,sourcePosition:t=Et.Bottom,target:e,targetPosition:r=Et.Top,center:a,offset:l,stepPosition:c}){const d=XS[t],h=XS[r],g={x:n.x+d.x*l,y:n.y+d.y*l},p={x:e.x+h.x*l,y:e.y+h.y*l},w=KO({source:g,sourcePosition:t,target:p}),v=w.x!==0?"x":"y",b=w[v];let T=[],A,C;const D={x:0,y:0},L={x:0,y:0},[,,N,O]=zT({sourceX:n.x,sourceY:n.y,targetX:e.x,targetY:e.y});if(d[v]*h[v]===-1){v==="x"?(A=a.x??g.x+(p.x-g.x)*c,C=a.y??(g.y+p.y)/2):(A=a.x??(g.x+p.x)/2,C=a.y??g.y+(p.y-g.y)*c);const _=[{x:A,y:g.y},{x:A,y:p.y}],P=[{x:g.x,y:C},{x:p.x,y:C}];d[v]===b?T=v==="x"?_:P:T=v==="x"?P:_}else{const _=[{x:g.x,y:p.y}],P=[{x:p.x,y:g.y}];if(v==="x"?T=d.x===b?P:_:T=d.y===b?_:P,t===r){const rt=Math.abs(n[v]-e[v]);if(rt<=l){const ot=Math.min(l-1,l-rt);d[v]===b?D[v]=(g[v]>n[v]?-1:1)*ot:L[v]=(p[v]>e[v]?-1:1)*ot}}if(t!==r){const rt=v==="x"?"y":"x",ot=d[v]===h[rt],M=g[rt]>p[rt],Y=g[rt]<p[rt];(d[v]===1&&(!ot&&M||ot&&Y)||d[v]!==1&&(!ot&&Y||ot&&M))&&(T=v==="x"?_:P)}const V={x:g.x+D.x,y:g.y+D.y},W={x:p.x+L.x,y:p.y+L.y},ft=Math.max(Math.abs(V.x-T[0].x),Math.abs(W.x-T[0].x)),nt=Math.max(Math.abs(V.y-T[0].y),Math.abs(W.y-T[0].y));ft>=nt?(A=(V.x+W.x)/2,C=T[0].y):(A=T[0].x,C=(V.y+W.y)/2)}return[[n,{x:g.x+D.x,y:g.y+D.y},...T,{x:p.x+L.x,y:p.y+L.y},e],A,C,N,O]}function XO(n,t,e,r){const a=Math.min(FS(n,t)/2,FS(t,e)/2,r),{x:l,y:c}=t;if(n.x===l&&l===e.x||n.y===c&&c===e.y)return`L${l} ${c}`;if(n.y===c){const g=n.x<e.x?-1:1,p=n.y<e.y?1:-1;return`L ${l+a*g},${c}Q ${l},${c} ${l},${c+a*p}`}const d=n.x<e.x?1:-1,h=n.y<e.y?-1:1;return`L ${l},${c+a*h}Q ${l},${c} ${l+a*d},${c}`}function np({sourceX:n,sourceY:t,sourcePosition:e=Et.Bottom,targetX:r,targetY:a,targetPosition:l=Et.Top,borderRadius:c=5,centerX:d,centerY:h,offset:g=20,stepPosition:p=.5}){const[w,v,b,T,A]=GO({source:{x:n,y:t},sourcePosition:e,target:{x:r,y:a},targetPosition:l,center:{x:d,y:h},offset:g,stepPosition:p});return[w.reduce((D,L,N)=>{let O="";return N>0&&N<w.length-1?O=XO(w[N-1],L,w[N+1],c):O=`${N===0?"M":"L"}${L.x} ${L.y}`,D+=O,D},""),v,b,T,A]}function ZS(n){var t;return n&&!!(n.internals.handleBounds||(t=n.handles)!=null&&t.length)&&!!(n.measured.width||n.width||n.initialWidth)}function FO(n){var w;const{sourceNode:t,targetNode:e}=n;if(!ZS(t)||!ZS(e))return null;const r=t.internals.handleBounds||QS(t.handles),a=e.internals.handleBounds||QS(e.handles),l=WS((r==null?void 0:r.source)??[],n.sourceHandle),c=WS(n.connectionMode===pl.Strict?(a==null?void 0:a.target)??[]:((a==null?void 0:a.target)??[]).concat((a==null?void 0:a.source)??[]),n.targetHandle);if(!l||!c)return(w=n.onError)==null||w.call(n,"008",Or.error008(l?"target":"source",{id:n.id,sourceHandle:n.sourceHandle,targetHandle:n.targetHandle})),null;const d=(l==null?void 0:l.position)||Et.Bottom,h=(c==null?void 0:c.position)||Et.Top,g=uc(t,l,d),p=uc(e,c,h);return{sourceX:g.x,sourceY:g.y,targetX:p.x,targetY:p.y,sourcePosition:d,targetPosition:h}}function QS(n){if(!n)return null;const t=[],e=[];for(const r of n)r.width=r.width??1,r.height=r.height??1,r.type==="source"?t.push(r):r.type==="target"&&e.push(r);return{source:t,target:e}}function uc(n,t,e=Et.Left,r=!1){const a=((t==null?void 0:t.x)??0)+n.internals.positionAbsolute.x,l=((t==null?void 0:t.y)??0)+n.internals.positionAbsolute.y,{width:c,height:d}=t??Ds(n);if(r)return{x:a+c/2,y:l+d/2};switch((t==null?void 0:t.position)??e){case Et.Top:return{x:a+c/2,y:l};case Et.Right:return{x:a+c,y:l+d/2};case Et.Bottom:return{x:a+c/2,y:l+d};case Et.Left:return{x:a,y:l+d/2}}}function WS(n,t){return n&&(t?n.find(e=>e.id===t):n[0])||null}function rp(n,t){return n?typeof n=="string"?n:`${t?`${t}__`:""}${Object.keys(n).sort().map(r=>`${r}=${n[r]}`).join("&")}`:""}function ZO(n,{id:t,defaultColor:e,defaultMarkerStart:r,defaultMarkerEnd:a}){const l=new Set;return n.reduce((c,d)=>([d.markerStart||r,d.markerEnd||a].forEach(h=>{if(h&&typeof h=="object"){const g=rp(h,t);l.has(g)||(c.push({id:g,color:h.color||e,...h}),l.add(g))}}),c),[]).sort((c,d)=>c.id.localeCompare(d.id))}const qp={nodeOrigin:[0,0],nodeExtent:ac,elevateNodesOnSelect:!0,defaults:{}},QO={...qp,checkEquality:!0};function Pp(n,t){const e={...n};for(const r in t)t[r]!==void 0&&(e[r]=t[r]);return e}function WO(n,t,e){const r=Pp(qp,e);for(const a of n.values())if(a.parentId)Jp(a,n,t,r);else{const l=vc(a,r.nodeOrigin),c=bl(a.extent)?a.extent:r.nodeExtent,d=no(l,c,Ds(a));a.internals.positionAbsolute=d}}function ip(n,t,e,r){var h,g;const a=Pp(QO,r);let l=n.length>0;const c=new Map(t),d=a!=null&&a.elevateNodesOnSelect?1e3:0;t.clear(),e.clear();for(const p of n){let w=c.get(p.id);if(a.checkEquality&&p===(w==null?void 0:w.internals.userNode))t.set(p.id,w);else{const v=vc(p,a.nodeOrigin),b=bl(p.extent)?p.extent:a.nodeExtent,T=no(v,b,Ds(p));w={...a.defaults,...p,measured:{width:(h=p.measured)==null?void 0:h.width,height:(g=p.measured)==null?void 0:g.height},internals:{positionAbsolute:T,handleBounds:p.measured?w==null?void 0:w.internals.handleBounds:void 0,z:_T(p,d),userNode:p}},t.set(p.id,w)}(w.measured===void 0||w.measured.width===void 0||w.measured.height===void 0)&&!w.hidden&&(l=!1),p.parentId&&Jp(w,t,e,r)}return l}function tM(n,t){if(!n.parentId)return;const e=t.get(n.parentId);e?e.set(n.id,n):t.set(n.parentId,new Map([[n.id,n]]))}function Jp(n,t,e,r){const{elevateNodesOnSelect:a,nodeOrigin:l,nodeExtent:c}=Pp(qp,r),d=n.parentId,h=t.get(d);if(!h){console.warn(`Parent node ${d} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}tM(n,e);const g=a?1e3:0,{x:p,y:w,z:v}=eM(n,h,l,c,g),{positionAbsolute:b}=n.internals,T=p!==b.x||w!==b.y;(T||v!==n.internals.z)&&t.set(n.id,{...n,internals:{...n.internals,positionAbsolute:T?{x:p,y:w}:b,z:v}})}function _T(n,t){return(ir(n.zIndex)?n.zIndex:0)+(n.selected?t:0)}function eM(n,t,e,r,a){const{x:l,y:c}=t.internals.positionAbsolute,d=Ds(n),h=vc(n,e),g=bl(n.extent)?no(h,n.extent,d):h;let p=no({x:l+g.x,y:c+g.y},r,d);n.extent==="parent"&&(p=ET(p,d,t));const w=_T(n,a),v=t.internals.z??0;return{x:p.x,y:p.y,z:v>=w?v+1:w}}function $p(n,t,e,r=[0,0]){var c;const a=[],l=new Map;for(const d of n){const h=t.get(d.parentId);if(!h)continue;const g=((c=l.get(d.parentId))==null?void 0:c.expandedRect)??wl(h),p=CT(g,d.rect);l.set(d.parentId,{expandedRect:p,parent:h})}return l.size>0&&l.forEach(({expandedRect:d,parent:h},g)=>{var N;const p=h.internals.positionAbsolute,w=Ds(h),v=h.origin??r,b=d.x<p.x?Math.round(Math.abs(p.x-d.x)):0,T=d.y<p.y?Math.round(Math.abs(p.y-d.y)):0,A=Math.max(w.width,Math.round(d.width)),C=Math.max(w.height,Math.round(d.height)),D=(A-w.width)*v[0],L=(C-w.height)*v[1];(b>0||T>0||D||L)&&(a.push({id:g,type:"position",position:{x:h.position.x-b+D,y:h.position.y-T+L}}),(N=e.get(g))==null||N.forEach(O=>{n.some(B=>B.id===O.id)||a.push({id:O.id,type:"position",position:{x:O.position.x+b,y:O.position.y+T}})})),(w.width<d.width||w.height<d.height||b||T)&&a.push({id:g,type:"dimensions",setAttributes:!0,dimensions:{width:A+(b?v[0]*b-D:0),height:C+(T?v[1]*T-L:0)}})}),a}function nM(n,t,e,r,a,l){const c=r==null?void 0:r.querySelector(".xyflow__viewport");let d=!1;if(!c)return{changes:[],updatedInternals:d};const h=[],g=window.getComputedStyle(c),{m22:p}=new window.DOMMatrixReadOnly(g.transform),w=[];for(const v of n.values()){const b=t.get(v.id);if(!b)continue;if(b.hidden){t.set(b.id,{...b,internals:{...b.internals,handleBounds:void 0}}),d=!0;continue}const T=Up(v.nodeElement),A=b.measured.width!==T.width||b.measured.height!==T.height;if(!!(T.width&&T.height&&(A||!b.internals.handleBounds||v.force))){const D=v.nodeElement.getBoundingClientRect(),L=bl(b.extent)?b.extent:l;let{positionAbsolute:N}=b.internals;b.parentId&&b.extent==="parent"?N=ET(N,T,t.get(b.parentId)):L&&(N=no(N,L,T));const O={...b,measured:T,internals:{...b.internals,positionAbsolute:N,handleBounds:{source:KS("source",v.nodeElement,D,p,b.id),target:KS("target",v.nodeElement,D,p,b.id)}}};t.set(b.id,O),b.parentId&&Jp(O,t,e,{nodeOrigin:a}),d=!0,A&&(h.push({id:b.id,type:"dimensions",dimensions:T}),b.expandParent&&b.parentId&&w.push({id:b.id,parentId:b.parentId,rect:wl(O,a)}))}}if(w.length>0){const v=$p(w,t,e,a);h.push(...v)}return{changes:h,updatedInternals:d}}async function rM({delta:n,panZoom:t,transform:e,translateExtent:r,width:a,height:l}){if(!t||!n.x&&!n.y)return Promise.resolve(!1);const c=await t.setViewportConstrained({x:e[0]+n.x,y:e[1]+n.y,zoom:e[2]},[[0,0],[a,l]],r),d=!!c&&(c.x!==e[0]||c.y!==e[1]||c.k!==e[2]);return Promise.resolve(d)}function t1(n,t,e,r,a,l){let c=a;const d=r.get(c)||new Map;r.set(c,d.set(e,t)),c=`${a}-${n}`;const h=r.get(c)||new Map;if(r.set(c,h.set(e,t)),l){c=`${a}-${n}-${l}`;const g=r.get(c)||new Map;r.set(c,g.set(e,t))}}function UT(n,t,e){n.clear(),t.clear();for(const r of e){const{source:a,target:l,sourceHandle:c=null,targetHandle:d=null}=r,h={edgeId:r.id,source:a,target:l,sourceHandle:c,targetHandle:d},g=`${a}-${c}--${l}-${d}`,p=`${l}-${d}--${a}-${c}`;t1("source",h,p,n,a,c),t1("target",h,g,n,l,d),t.set(r.id,r)}}function qT(n,t){if(!n.parentId)return!1;const e=t.get(n.parentId);return e?e.selected?!0:qT(e,t):!1}function e1(n,t,e){var a;let r=n;do{if((a=r==null?void 0:r.matches)!=null&&a.call(r,t))return!0;if(r===e)return!1;r=r==null?void 0:r.parentElement}while(r);return!1}function iM(n,t,e,r){const a=new Map;for(const[l,c]of n)if((c.selected||c.id===r)&&(!c.parentId||!qT(c,n))&&(c.draggable||t&&typeof c.draggable>"u")){const d=n.get(l);d&&a.set(l,{id:l,position:d.position||{x:0,y:0},distance:{x:e.x-d.internals.positionAbsolute.x,y:e.y-d.internals.positionAbsolute.y},extent:d.extent,parentId:d.parentId,origin:d.origin,expandParent:d.expandParent,internals:{positionAbsolute:d.internals.positionAbsolute||{x:0,y:0}},measured:{width:d.measured.width??0,height:d.measured.height??0}})}return a}function Zm({nodeId:n,dragItems:t,nodeLookup:e,dragging:r=!0}){var c,d,h;const a=[];for(const[g,p]of t){const w=(c=e.get(g))==null?void 0:c.internals.userNode;w&&a.push({...w,position:p.position,dragging:r})}if(!n)return[a[0],a];const l=(d=e.get(n))==null?void 0:d.internals.userNode;return[l?{...l,position:((h=t.get(n))==null?void 0:h.position)||l.position,dragging:r}:a[0],a]}function sM({onNodeMouseDown:n,getStoreItems:t,onDragStart:e,onDrag:r,onDragStop:a}){let l={x:null,y:null},c=0,d=new Map,h=!1,g={x:0,y:0},p=null,w=!1,v=null,b=!1,T=!1;function A({noDragClassName:D,handleSelector:L,domNode:N,isSelectable:O,nodeId:B,nodeClickDistance:_=0}){v=gn(N);function P({x:nt,y:rt},ot){const{nodeLookup:M,nodeExtent:Y,snapGrid:I,snapToGrid:z,nodeOrigin:K,onNodeDrag:J,onSelectionDrag:k,onError:U,updateNodePositions:Z}=t();l={x:nt,y:rt};let it=!1,lt={x:0,y:0,x2:0,y2:0};if(d.size>1&&Y){const yt=wc(d);lt=ep(yt)}for(const[yt,dt]of d){if(!M.has(yt))continue;let pt={x:nt-dt.distance.x,y:rt-dt.distance.y};z&&(pt=mh(pt,I));let mt=[[Y[0][0],Y[0][1]],[Y[1][0],Y[1][1]]];if(d.size>1&&Y&&!dt.extent){const{positionAbsolute:Rt}=dt.internals,Nt=Rt.x-lt.x+Y[0][0],Ot=Rt.x+dt.measured.width-lt.x2+Y[1][0],kt=Rt.y-lt.y+Y[0][1],Zt=Rt.y+dt.measured.height-lt.y2+Y[1][1];mt=[[Nt,kt],[Ot,Zt]]}const{position:St,positionAbsolute:Jt}=AT({nodeId:yt,nextPosition:pt,nodeLookup:M,nodeExtent:mt,nodeOrigin:K,onError:U});it=it||dt.position.x!==St.x||dt.position.y!==St.y,dt.position=St,dt.internals.positionAbsolute=Jt}if(T=T||it,!!it&&(Z(d,!0),ot&&(r||J||!B&&k))){const[yt,dt]=Zm({nodeId:B,dragItems:d,nodeLookup:M});r==null||r(ot,d,yt,dt),J==null||J(ot,yt,dt),B||k==null||k(ot,dt)}}async function V(){if(!p)return;const{transform:nt,panBy:rt,autoPanSpeed:ot,autoPanOnNodeDrag:M}=t();if(!M){h=!1,cancelAnimationFrame(c);return}const[Y,I]=NT(g,p,ot);(Y!==0||I!==0)&&(l.x=(l.x??0)-Y/nt[2],l.y=(l.y??0)-I/nt[2],await rt({x:Y,y:I})&&P(l,null)),c=requestAnimationFrame(V)}function W(nt){var it;const{nodeLookup:rt,multiSelectionActive:ot,nodesDraggable:M,transform:Y,snapGrid:I,snapToGrid:z,selectNodesOnDrag:K,onNodeDragStart:J,onSelectionDragStart:k,unselectNodesAndEdges:U}=t();w=!0,(!K||!O)&&!ot&&B&&((it=rt.get(B))!=null&&it.selected||U()),O&&K&&B&&(n==null||n(B));const Z=Yu(nt.sourceEvent,{transform:Y,snapGrid:I,snapToGrid:z,containerBounds:p});if(l=Z,d=iM(rt,M,Z,B),d.size>0&&(e||J||!B&&k)){const[lt,yt]=Zm({nodeId:B,dragItems:d,nodeLookup:rt});e==null||e(nt.sourceEvent,d,lt,yt),J==null||J(nt.sourceEvent,lt,yt),B||k==null||k(nt.sourceEvent,yt)}}const ft=rT().clickDistance(_).on("start",nt=>{const{domNode:rt,nodeDragThreshold:ot,transform:M,snapGrid:Y,snapToGrid:I}=t();p=(rt==null?void 0:rt.getBoundingClientRect())||null,b=!1,T=!1,ot===0&&W(nt),l=Yu(nt.sourceEvent,{transform:M,snapGrid:Y,snapToGrid:I,containerBounds:p}),g=Tr(nt.sourceEvent,p)}).on("drag",nt=>{const{autoPanOnNodeDrag:rt,transform:ot,snapGrid:M,snapToGrid:Y,nodeDragThreshold:I,nodeLookup:z}=t(),K=Yu(nt.sourceEvent,{transform:ot,snapGrid:M,snapToGrid:Y,containerBounds:p});if((nt.sourceEvent.type==="touchmove"&&nt.sourceEvent.touches.length>1||B&&!z.has(B))&&(b=!0),!b){if(!h&&rt&&w&&(h=!0,V()),!w){const J=K.xSnapped-(l.x??0),k=K.ySnapped-(l.y??0);Math.sqrt(J*J+k*k)>I&&W(nt)}(l.x!==K.xSnapped||l.y!==K.ySnapped)&&d&&w&&(g=Tr(nt.sourceEvent,p),P(K,nt.sourceEvent))}}).on("end",nt=>{if(!(!w||b)&&(h=!1,w=!1,cancelAnimationFrame(c),d.size>0)){const{nodeLookup:rt,updateNodePositions:ot,onNodeDragStop:M,onSelectionDragStop:Y}=t();if(T&&(ot(d,!1),T=!1),a||M||!B&&Y){const[I,z]=Zm({nodeId:B,dragItems:d,nodeLookup:rt,dragging:!1});a==null||a(nt.sourceEvent,d,I,z),M==null||M(nt.sourceEvent,I,z),B||Y==null||Y(nt.sourceEvent,z)}}}).filter(nt=>{const rt=nt.target;return!nt.button&&(!D||!e1(rt,`.${D}`,N))&&(!L||e1(rt,L,N))});v.call(ft)}function C(){v==null||v.on(".drag",null)}return{update:A,destroy:C}}function aM(n,t,e){const r=[],a={x:n.x-e,y:n.y-e,width:e*2,height:e*2};for(const l of t.values())lc(a,wl(l))>0&&r.push(l);return r}const oM=250;function lM(n,t,e,r){var d,h;let a=[],l=1/0;const c=aM(n,e,t+oM);for(const g of c){const p=[...((d=g.internals.handleBounds)==null?void 0:d.source)??[],...((h=g.internals.handleBounds)==null?void 0:h.target)??[]];for(const w of p){if(r.nodeId===w.nodeId&&r.type===w.type&&r.id===w.id)continue;const{x:v,y:b}=uc(g,w,w.position,!0),T=Math.sqrt(Math.pow(v-n.x,2)+Math.pow(b-n.y,2));T>t||(T<l?(a=[{...w,x:v,y:b}],l=T):T===l&&a.push({...w,x:v,y:b}))}}if(!a.length)return null;if(a.length>1){const g=r.type==="source"?"target":"source";return a.find(p=>p.type===g)??a[0]}return a[0]}function PT(n,t,e,r,a,l=!1){var g,p,w;const c=r.get(n);if(!c)return null;const d=a==="strict"?(g=c.internals.handleBounds)==null?void 0:g[t]:[...((p=c.internals.handleBounds)==null?void 0:p.source)??[],...((w=c.internals.handleBounds)==null?void 0:w.target)??[]],h=(e?d==null?void 0:d.find(v=>v.id===e):d==null?void 0:d[0])??null;return h&&l?{...h,...uc(c,h,h.position,!0)}:h}function JT(n,t){return n||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function uM(n,t){let e=null;return t?e=!0:n&&!t&&(e=!1),e}const $T=()=>!0;function cM(n,{connectionMode:t,connectionRadius:e,handleId:r,nodeId:a,edgeUpdaterType:l,isTarget:c,domNode:d,nodeLookup:h,lib:g,autoPanOnConnect:p,flowId:w,panBy:v,cancelConnection:b,onConnectStart:T,onConnect:A,onConnectEnd:C,isValidConnection:D=$T,onReconnectEnd:L,updateConnection:N,getTransform:O,getFromHandle:B,autoPanSpeed:_,dragThreshold:P=1}){const V=IT(n.target);let W=0,ft;const{x:nt,y:rt}=Tr(n),ot=V==null?void 0:V.elementFromPoint(nt,rt),M=JT(l,ot),Y=d==null?void 0:d.getBoundingClientRect();let I=!1;if(!Y||!M)return;const z=PT(a,M,r,h,t);if(!z)return;let K=Tr(n,Y),J=!1,k=null,U=!1,Z=null;function it(){if(!p||!Y)return;const[Rt,Nt]=NT(K,Y,_);v({x:Rt,y:Nt}),W=requestAnimationFrame(it)}const lt={...z,nodeId:a,type:M,position:z.position},yt=h.get(a);let pt={inProgress:!0,isValid:null,from:uc(yt,lt,Et.Left,!0),fromHandle:lt,fromPosition:lt.position,fromNode:yt,to:K,toHandle:null,toPosition:HS[lt.position],toNode:null};function mt(){I=!0,N(pt),T==null||T(n,{nodeId:a,handleId:r,handleType:M})}P===0&&mt();function St(Rt){if(!I){const{x:Zt,y:le}=Tr(Rt),be=Zt-nt,Is=le-rt;if(!(be*be+Is*Is>P*P))return;mt()}if(!B()||!lt){Jt(Rt);return}const Nt=O();K=Tr(Rt,Y),ft=lM(bc(K,Nt,!1,[1,1]),e,h,lt),J||(it(),J=!0);const Ot=HT(Rt,{handle:ft,connectionMode:t,fromNodeId:a,fromHandleId:r,fromType:c?"target":"source",isValidConnection:D,doc:V,lib:g,flowId:w,nodeLookup:h});Z=Ot.handleDomNode,k=Ot.connection,U=uM(!!ft,Ot.isValid);const kt={...pt,isValid:U,to:Ot.toHandle&&U?Fd({x:Ot.toHandle.x,y:Ot.toHandle.y},Nt):K,toHandle:Ot.toHandle,toPosition:U&&Ot.toHandle?Ot.toHandle.position:HS[lt.position],toNode:Ot.toHandle?h.get(Ot.toHandle.nodeId):null};U&&ft&&pt.toHandle&&kt.toHandle&&pt.toHandle.type===kt.toHandle.type&&pt.toHandle.nodeId===kt.toHandle.nodeId&&pt.toHandle.id===kt.toHandle.id&&pt.to.x===kt.to.x&&pt.to.y===kt.to.y||(N(kt),pt=kt)}function Jt(Rt){if(I){(ft||Z)&&k&&U&&(A==null||A(k));const{inProgress:Nt,...Ot}=pt,kt={...Ot,toPosition:pt.toHandle?pt.toPosition:null};C==null||C(Rt,kt),l&&(L==null||L(Rt,kt))}b(),cancelAnimationFrame(W),J=!1,U=!1,k=null,Z=null,V.removeEventListener("mousemove",St),V.removeEventListener("mouseup",Jt),V.removeEventListener("touchmove",St),V.removeEventListener("touchend",Jt)}V.addEventListener("mousemove",St),V.addEventListener("mouseup",Jt),V.addEventListener("touchmove",St),V.addEventListener("touchend",Jt)}function HT(n,{handle:t,connectionMode:e,fromNodeId:r,fromHandleId:a,fromType:l,doc:c,lib:d,flowId:h,isValidConnection:g=$T,nodeLookup:p}){const w=l==="target",v=t?c.querySelector(`.${d}-flow__handle[data-id="${h}-${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`):null,{x:b,y:T}=Tr(n),A=c.elementFromPoint(b,T),C=A!=null&&A.classList.contains(`${d}-flow__handle`)?A:v,D={handleDomNode:C,isValid:!1,connection:null,toHandle:null};if(C){const L=JT(void 0,C),N=C.getAttribute("data-nodeid"),O=C.getAttribute("data-handleid"),B=C.classList.contains("connectable"),_=C.classList.contains("connectableend");if(!N||!L)return D;const P={source:w?N:r,sourceHandle:w?O:a,target:w?r:N,targetHandle:w?a:O};D.connection=P;const W=B&&_&&(e===pl.Strict?w&&L==="source"||!w&&L==="target":N!==r||O!==a);D.isValid=W&&g(P),D.toHandle=PT(N,L,O,p,e,!0)}return D}const sp={onPointerDown:cM,isValid:HT};function fM({domNode:n,panZoom:t,getTransform:e,getViewScale:r}){const a=gn(n);function l({translateExtent:d,width:h,height:g,zoomStep:p=10,pannable:w=!0,zoomable:v=!0,inversePan:b=!1}){const T=N=>{const O=e();if(N.sourceEvent.type!=="wheel"||!t)return;const B=-N.sourceEvent.deltaY*(N.sourceEvent.deltaMode===1?.05:N.sourceEvent.deltaMode?1:.002)*p,_=O[2]*Math.pow(2,B);t.scaleTo(_)};let A=[0,0];const C=N=>{(N.sourceEvent.type==="mousedown"||N.sourceEvent.type==="touchstart")&&(A=[N.sourceEvent.clientX??N.sourceEvent.touches[0].clientX,N.sourceEvent.clientY??N.sourceEvent.touches[0].clientY])},D=N=>{const O=e();if(N.sourceEvent.type!=="mousemove"&&N.sourceEvent.type!=="touchmove"||!t)return;const B=[N.sourceEvent.clientX??N.sourceEvent.touches[0].clientX,N.sourceEvent.clientY??N.sourceEvent.touches[0].clientY],_=[B[0]-A[0],B[1]-A[1]];A=B;const P=r()*Math.max(O[2],Math.log(O[2]))*(b?-1:1),V={x:O[0]-_[0]*P,y:O[1]-_[1]*P},W=[[0,0],[h,g]];t.setViewportConstrained({x:V.x,y:V.y,zoom:O[2]},W,d)},L=vT().on("start",C).on("zoom",w?D:null).on("zoom.wheel",v?T:null);a.call(L,{})}function c(){a.on("zoom",null)}return{update:l,destroy:c,pointer:Qn}}const dM=(n,t)=>n.x!==t.x||n.y!==t.y||n.zoom!==t.k,yh=n=>({x:n.x,y:n.y,zoom:n.k}),Qm=({x:n,y:t,zoom:e})=>dh.translate(n,t).scale(e),Qo=(n,t)=>n.target.closest(`.${t}`),VT=(n,t)=>t===2&&Array.isArray(n)&&n.includes(2),hM=n=>((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2,Wm=(n,t=0,e=hM,r=()=>{})=>{const a=typeof t=="number"&&t>0;return a||r(),a?n.transition().duration(t).ease(e).on("end",r):n},jT=n=>{const t=n.ctrlKey&&Zd()?10:1;return-n.deltaY*(n.deltaMode===1?.05:n.deltaMode?1:.002)*t};function gM({zoomPanValues:n,noWheelClassName:t,d3Selection:e,d3Zoom:r,panOnScrollMode:a,panOnScrollSpeed:l,zoomOnPinch:c,onPanZoomStart:d,onPanZoom:h,onPanZoomEnd:g}){return p=>{if(Qo(p,t))return!1;p.preventDefault(),p.stopImmediatePropagation();const w=e.property("__zoom").k||1;if(p.ctrlKey&&c){const C=Qn(p),D=jT(p),L=w*Math.pow(2,D);r.scaleTo(e,L,C,p);return}const v=p.deltaMode===1?20:1;let b=a===Xa.Vertical?0:p.deltaX*v,T=a===Xa.Horizontal?0:p.deltaY*v;!Zd()&&p.shiftKey&&a!==Xa.Vertical&&(b=p.deltaY*v,T=0),r.translateBy(e,-(b/w)*l,-(T/w)*l,{internal:!0});const A=yh(e.property("__zoom"));clearTimeout(n.panScrollTimeout),n.isPanScrolling||(n.isPanScrolling=!0,d==null||d(p,A)),n.isPanScrolling&&(h==null||h(p,A),n.panScrollTimeout=setTimeout(()=>{g==null||g(p,A),n.isPanScrolling=!1},150))}}function mM({noWheelClassName:n,preventScrolling:t,d3ZoomHandler:e}){return function(r,a){const l=r.type==="wheel",c=!t&&l&&!r.ctrlKey,d=Qo(r,n);if(r.ctrlKey&&l&&d&&r.preventDefault(),c||d)return null;r.preventDefault(),e.call(this,r,a)}}function yM({zoomPanValues:n,onDraggingChange:t,onPanZoomStart:e}){return r=>{var l,c,d;if((l=r.sourceEvent)!=null&&l.internal)return;const a=yh(r.transform);n.mouseButton=((c=r.sourceEvent)==null?void 0:c.button)||0,n.isZoomingOrPanning=!0,n.prevViewport=a,((d=r.sourceEvent)==null?void 0:d.type)==="mousedown"&&t(!0),e&&(e==null||e(r.sourceEvent,a))}}function pM({zoomPanValues:n,panOnDrag:t,onPaneContextMenu:e,onTransformChange:r,onPanZoom:a}){return l=>{var c,d;n.usedRightMouseButton=!!(e&&VT(t,n.mouseButton??0)),(c=l.sourceEvent)!=null&&c.sync||r([l.transform.x,l.transform.y,l.transform.k]),a&&!((d=l.sourceEvent)!=null&&d.internal)&&(a==null||a(l.sourceEvent,yh(l.transform)))}}function vM({zoomPanValues:n,panOnDrag:t,panOnScroll:e,onDraggingChange:r,onPanZoomEnd:a,onPaneContextMenu:l}){return c=>{var d;if(!((d=c.sourceEvent)!=null&&d.internal)&&(n.isZoomingOrPanning=!1,l&&VT(t,n.mouseButton??0)&&!n.usedRightMouseButton&&c.sourceEvent&&l(c.sourceEvent),n.usedRightMouseButton=!1,r(!1),a&&dM(n.prevViewport,c.transform))){const h=yh(c.transform);n.prevViewport=h,clearTimeout(n.timerId),n.timerId=setTimeout(()=>{a==null||a(c.sourceEvent,h)},e?150:0)}}}function wM({zoomActivationKeyPressed:n,zoomOnScroll:t,zoomOnPinch:e,panOnDrag:r,panOnScroll:a,zoomOnDoubleClick:l,userSelectionActive:c,noWheelClassName:d,noPanClassName:h,lib:g}){return p=>{var T;const w=n||t,v=e&&p.ctrlKey;if(p.button===1&&p.type==="mousedown"&&(Qo(p,`${g}-flow__node`)||Qo(p,`${g}-flow__edge`)))return!0;if(!r&&!w&&!a&&!l&&!e||c||Qo(p,d)&&p.type==="wheel"||Qo(p,h)&&(p.type!=="wheel"||a&&p.type==="wheel"&&!n)||!e&&p.ctrlKey&&p.type==="wheel")return!1;if(!e&&p.type==="touchstart"&&((T=p.touches)==null?void 0:T.length)>1)return p.preventDefault(),!1;if(!w&&!a&&!v&&p.type==="wheel"||!r&&(p.type==="mousedown"||p.type==="touchstart")||Array.isArray(r)&&!r.includes(p.button)&&p.type==="mousedown")return!1;const b=Array.isArray(r)&&r.includes(p.button)||!p.button||p.button<=1;return(!p.ctrlKey||p.type==="wheel")&&b}}function bM({domNode:n,minZoom:t,maxZoom:e,paneClickDistance:r,translateExtent:a,viewport:l,onPanZoom:c,onPanZoomStart:d,onPanZoomEnd:h,onDraggingChange:g}){const p={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},w=n.getBoundingClientRect(),v=vT().clickDistance(!ir(r)||r<0?0:r).scaleExtent([t,e]).translateExtent(a),b=gn(n).call(v);N({x:l.x,y:l.y,zoom:vl(l.zoom,t,e)},[[0,0],[w.width,w.height]],a);const T=b.on("wheel.zoom"),A=b.on("dblclick.zoom");v.wheelDelta(jT);function C(rt,ot){return b?new Promise(M=>{v==null||v.interpolate((ot==null?void 0:ot.interpolate)==="linear"?ju:ud).transform(Wm(b,ot==null?void 0:ot.duration,ot==null?void 0:ot.ease,()=>M(!0)),rt)}):Promise.resolve(!1)}function D({noWheelClassName:rt,noPanClassName:ot,onPaneContextMenu:M,userSelectionActive:Y,panOnScroll:I,panOnDrag:z,panOnScrollMode:K,panOnScrollSpeed:J,preventScrolling:k,zoomOnPinch:U,zoomOnScroll:Z,zoomOnDoubleClick:it,zoomActivationKeyPressed:lt,lib:yt,onTransformChange:dt}){Y&&!p.isZoomingOrPanning&&L();const mt=I&&!lt&&!Y?gM({zoomPanValues:p,noWheelClassName:rt,d3Selection:b,d3Zoom:v,panOnScrollMode:K,panOnScrollSpeed:J,zoomOnPinch:U,onPanZoomStart:d,onPanZoom:c,onPanZoomEnd:h}):mM({noWheelClassName:rt,preventScrolling:k,d3ZoomHandler:T});if(b.on("wheel.zoom",mt,{passive:!1}),!Y){const Jt=yM({zoomPanValues:p,onDraggingChange:g,onPanZoomStart:d});v.on("start",Jt);const Rt=pM({zoomPanValues:p,panOnDrag:z,onPaneContextMenu:!!M,onPanZoom:c,onTransformChange:dt});v.on("zoom",Rt);const Nt=vM({zoomPanValues:p,panOnDrag:z,panOnScroll:I,onPaneContextMenu:M,onPanZoomEnd:h,onDraggingChange:g});v.on("end",Nt)}const St=wM({zoomActivationKeyPressed:lt,panOnDrag:z,zoomOnScroll:Z,panOnScroll:I,zoomOnDoubleClick:it,zoomOnPinch:U,userSelectionActive:Y,noPanClassName:ot,noWheelClassName:rt,lib:yt});v.filter(St),it?b.on("dblclick.zoom",A):b.on("dblclick.zoom",null)}function L(){v.on("zoom",null)}async function N(rt,ot,M){const Y=Qm(rt),I=v==null?void 0:v.constrain()(Y,ot,M);return I&&await C(I),new Promise(z=>z(I))}async function O(rt,ot){const M=Qm(rt);return await C(M,ot),new Promise(Y=>Y(M))}function B(rt){if(b){const ot=Qm(rt),M=b.property("__zoom");(M.k!==rt.zoom||M.x!==rt.x||M.y!==rt.y)&&(v==null||v.transform(b,ot,null,{sync:!0}))}}function _(){const rt=b?pT(b.node()):{x:0,y:0,k:1};return{x:rt.x,y:rt.y,zoom:rt.k}}function P(rt,ot){return b?new Promise(M=>{v==null||v.interpolate((ot==null?void 0:ot.interpolate)==="linear"?ju:ud).scaleTo(Wm(b,ot==null?void 0:ot.duration,ot==null?void 0:ot.ease,()=>M(!0)),rt)}):Promise.resolve(!1)}function V(rt,ot){return b?new Promise(M=>{v==null||v.interpolate((ot==null?void 0:ot.interpolate)==="linear"?ju:ud).scaleBy(Wm(b,ot==null?void 0:ot.duration,ot==null?void 0:ot.ease,()=>M(!0)),rt)}):Promise.resolve(!1)}function W(rt){v==null||v.scaleExtent(rt)}function ft(rt){v==null||v.translateExtent(rt)}function nt(rt){const ot=!ir(rt)||rt<0?0:rt;v==null||v.clickDistance(ot)}return{update:D,destroy:L,setViewport:O,setViewportConstrained:N,getViewport:_,scaleTo:P,scaleBy:V,setScaleExtent:W,setTranslateExtent:ft,syncViewport:B,setClickDistance:nt}}var Sl;(function(n){n.Line="line",n.Handle="handle"})(Sl||(Sl={}));function SM({width:n,prevWidth:t,height:e,prevHeight:r,affectsX:a,affectsY:l}){const c=n-t,d=e-r,h=[c>0?1:c<0?-1:0,d>0?1:d<0?-1:0];return c&&a&&(h[0]=h[0]*-1),d&&l&&(h[1]=h[1]*-1),h}function xM(n){const t=n.includes("right")||n.includes("left"),e=n.includes("bottom")||n.includes("top"),r=n.includes("left"),a=n.includes("top");return{isHorizontal:t,isVertical:e,affectsX:r,affectsY:a}}function sa(n,t){return Math.max(0,t-n)}function aa(n,t){return Math.max(0,n-t)}function Wf(n,t,e){return Math.max(0,t-n,n-e)}function n1(n,t){return n?!t:t}function TM(n,t,e,r,a,l,c,d){let{affectsX:h,affectsY:g}=t;const{isHorizontal:p,isVertical:w}=t,v=p&&w,{xSnapped:b,ySnapped:T}=e,{minWidth:A,maxWidth:C,minHeight:D,maxHeight:L}=r,{x:N,y:O,width:B,height:_,aspectRatio:P}=n;let V=Math.floor(p?b-n.pointerX:0),W=Math.floor(w?T-n.pointerY:0);const ft=B+(h?-V:V),nt=_+(g?-W:W),rt=-l[0]*B,ot=-l[1]*_;let M=Wf(ft,A,C),Y=Wf(nt,D,L);if(c){let K=0,J=0;h&&V<0?K=sa(N+V+rt,c[0][0]):!h&&V>0&&(K=aa(N+ft+rt,c[1][0])),g&&W<0?J=sa(O+W+ot,c[0][1]):!g&&W>0&&(J=aa(O+nt+ot,c[1][1])),M=Math.max(M,K),Y=Math.max(Y,J)}if(d){let K=0,J=0;h&&V>0?K=aa(N+V,d[0][0]):!h&&V<0&&(K=sa(N+ft,d[1][0])),g&&W>0?J=aa(O+W,d[0][1]):!g&&W<0&&(J=sa(O+nt,d[1][1])),M=Math.max(M,K),Y=Math.max(Y,J)}if(a){if(p){const K=Wf(ft/P,D,L)*P;if(M=Math.max(M,K),c){let J=0;!h&&!g||h&&!g&&v?J=aa(O+ot+ft/P,c[1][1])*P:J=sa(O+ot+(h?V:-V)/P,c[0][1])*P,M=Math.max(M,J)}if(d){let J=0;!h&&!g||h&&!g&&v?J=sa(O+ft/P,d[1][1])*P:J=aa(O+(h?V:-V)/P,d[0][1])*P,M=Math.max(M,J)}}if(w){const K=Wf(nt*P,A,C)/P;if(Y=Math.max(Y,K),c){let J=0;!h&&!g||g&&!h&&v?J=aa(N+nt*P+rt,c[1][0])/P:J=sa(N+(g?W:-W)*P+rt,c[0][0])/P,Y=Math.max(Y,J)}if(d){let J=0;!h&&!g||g&&!h&&v?J=sa(N+nt*P,d[1][0])/P:J=aa(N+(g?W:-W)*P,d[0][0])/P,Y=Math.max(Y,J)}}}W=W+(W<0?Y:-Y),V=V+(V<0?M:-M),a&&(v?ft>nt*P?W=(n1(h,g)?-V:V)/P:V=(n1(h,g)?-W:W)*P:p?(W=V/P,g=h):(V=W*P,h=g));const I=h?N+V:N,z=g?O+W:O;return{width:B+(h?-V:V),height:_+(g?-W:W),x:l[0]*V*(h?-1:1)+I,y:l[1]*W*(g?-1:1)+z}}const YT={width:0,height:0,x:0,y:0},AM={...YT,pointerX:0,pointerY:0,aspectRatio:1};function EM(n){return[[0,0],[n.measured.width,n.measured.height]]}function NM(n,t,e){const r=t.position.x+n.position.x,a=t.position.y+n.position.y,l=n.measured.width??0,c=n.measured.height??0,d=e[0]*l,h=e[1]*c;return[[r-d,a-h],[r+l-d,a+c-h]]}function CM({domNode:n,nodeId:t,getStoreItems:e,onChange:r,onEnd:a}){const l=gn(n);function c({controlPosition:h,boundaries:g,keepAspectRatio:p,resizeDirection:w,onResizeStart:v,onResize:b,onResizeEnd:T,shouldResize:A}){let C={...YT},D={...AM};const L=xM(h);let N,O=null,B=[],_,P,V;const W=rT().on("start",ft=>{const{nodeLookup:nt,transform:rt,snapGrid:ot,snapToGrid:M,nodeOrigin:Y,paneDomNode:I}=e();if(N=nt.get(t),!N)return;O=(I==null?void 0:I.getBoundingClientRect())??null;const{xSnapped:z,ySnapped:K}=Yu(ft.sourceEvent,{transform:rt,snapGrid:ot,snapToGrid:M,containerBounds:O});C={width:N.measured.width??0,height:N.measured.height??0,x:N.position.x??0,y:N.position.y??0},D={...C,pointerX:z,pointerY:K,aspectRatio:C.width/C.height},_=void 0,N.parentId&&(N.extent==="parent"||N.expandParent)&&(_=nt.get(N.parentId),P=_&&N.extent==="parent"?EM(_):void 0),B=[],V=void 0;for(const[J,k]of nt)if(k.parentId===t&&(B.push({id:J,position:{...k.position},extent:k.extent}),k.extent==="parent"||k.expandParent)){const U=NM(k,N,k.origin??Y);V?V=[[Math.min(U[0][0],V[0][0]),Math.min(U[0][1],V[0][1])],[Math.max(U[1][0],V[1][0]),Math.max(U[1][1],V[1][1])]]:V=U}v==null||v(ft,{...C})}).on("drag",ft=>{const{transform:nt,snapGrid:rt,snapToGrid:ot,nodeOrigin:M}=e(),Y=Yu(ft.sourceEvent,{transform:nt,snapGrid:rt,snapToGrid:ot,containerBounds:O}),I=[];if(!N)return;const{x:z,y:K,width:J,height:k}=C,U={},Z=N.origin??M,{width:it,height:lt,x:yt,y:dt}=TM(D,L,Y,g,p,Z,P,V),pt=it!==J,mt=lt!==k,St=yt!==z&&pt,Jt=dt!==K&&mt;if(!St&&!Jt&&!pt&&!mt)return;if((St||Jt||Z[0]===1||Z[1]===1)&&(U.x=St?yt:C.x,U.y=Jt?dt:C.y,C.x=U.x,C.y=U.y,B.length>0)){const kt=yt-z,Zt=dt-K;for(const le of B)le.position={x:le.position.x-kt+Z[0]*(it-J),y:le.position.y-Zt+Z[1]*(lt-k)},I.push(le)}if((pt||mt)&&(U.width=pt&&(!w||w==="horizontal")?it:C.width,U.height=mt&&(!w||w==="vertical")?lt:C.height,C.width=U.width,C.height=U.height),_&&N.expandParent){const kt=Z[0]*(U.width??0);U.x&&U.x<kt&&(C.x=kt,D.x=D.x-(U.x-kt));const Zt=Z[1]*(U.height??0);U.y&&U.y<Zt&&(C.y=Zt,D.y=D.y-(U.y-Zt))}const Rt=SM({width:C.width,prevWidth:J,height:C.height,prevHeight:k,affectsX:L.affectsX,affectsY:L.affectsY}),Nt={...C,direction:Rt};(A==null?void 0:A(ft,Nt))!==!1&&(b==null||b(ft,Nt),r(U,I))}).on("end",ft=>{T==null||T(ft,{...C}),a==null||a({...C})});l.call(W)}function d(){l.on(".drag",null)}return{update:c,destroy:d}}var ty={exports:{}},ey={},ny={exports:{}},ry={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r1;function kM(){if(r1)return ry;r1=1;var n=fc();function t(w,v){return w===v&&(w!==0||1/w===1/v)||w!==w&&v!==v}var e=typeof Object.is=="function"?Object.is:t,r=n.useState,a=n.useEffect,l=n.useLayoutEffect,c=n.useDebugValue;function d(w,v){var b=v(),T=r({inst:{value:b,getSnapshot:v}}),A=T[0].inst,C=T[1];return l(function(){A.value=b,A.getSnapshot=v,h(A)&&C({inst:A})},[w,b,v]),a(function(){return h(A)&&C({inst:A}),w(function(){h(A)&&C({inst:A})})},[w]),c(b),b}function h(w){var v=w.getSnapshot;w=w.value;try{var b=v();return!e(w,b)}catch{return!0}}function g(w,v){return v()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?g:d;return ry.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:p,ry}var i1;function DM(){return i1||(i1=1,ny.exports=kM()),ny.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s1;function IM(){if(s1)return ey;s1=1;var n=fc(),t=DM();function e(g,p){return g===p&&(g!==0||1/g===1/p)||g!==g&&p!==p}var r=typeof Object.is=="function"?Object.is:e,a=t.useSyncExternalStore,l=n.useRef,c=n.useEffect,d=n.useMemo,h=n.useDebugValue;return ey.useSyncExternalStoreWithSelector=function(g,p,w,v,b){var T=l(null);if(T.current===null){var A={hasValue:!1,value:null};T.current=A}else A=T.current;T=d(function(){function D(_){if(!L){if(L=!0,N=_,_=v(_),b!==void 0&&A.hasValue){var P=A.value;if(b(P,_))return O=P}return O=_}if(P=O,r(N,_))return P;var V=v(_);return b!==void 0&&b(P,V)?(N=_,P):(N=_,O=V)}var L=!1,N,O,B=w===void 0?null:w;return[function(){return D(p())},B===null?void 0:function(){return D(B())}]},[p,w,v,b]);var C=a(g,T[0],T[1]);return c(function(){A.hasValue=!0,A.value=C},[C]),h(C),C},ey}var a1;function OM(){return a1||(a1=1,ty.exports=IM()),ty.exports}var MM=OM();const RM=O1(MM),BM={},o1=n=>{let t;const e=new Set,r=(p,w)=>{const v=typeof p=="function"?p(t):p;if(!Object.is(v,t)){const b=t;t=w??(typeof v!="object"||v===null)?v:Object.assign({},t,v),e.forEach(T=>T(t,b))}},a=()=>t,h={setState:r,getState:a,getInitialState:()=>g,subscribe:p=>(e.add(p),()=>e.delete(p)),destroy:()=>{(BM?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),e.clear()}},g=t=n(r,a,h);return h},zM=n=>n?o1(n):o1,{useDebugValue:LM}=Jk,{useSyncExternalStoreWithSelector:_M}=RM,UM=n=>n;function KT(n,t=UM,e){const r=_M(n.subscribe,n.getState,n.getServerState||n.getInitialState,t,e);return LM(r),r}const l1=(n,t)=>{const e=zM(n),r=(a,l=t)=>KT(e,a,l);return Object.assign(r,e),r},qM=(n,t)=>n?l1(n,t):l1;function fe(n,t){if(Object.is(n,t))return!0;if(typeof n!="object"||n===null||typeof t!="object"||t===null)return!1;if(n instanceof Map&&t instanceof Map){if(n.size!==t.size)return!1;for(const[r,a]of n)if(!Object.is(a,t.get(r)))return!1;return!0}if(n instanceof Set&&t instanceof Set){if(n.size!==t.size)return!1;for(const r of n)if(!t.has(r))return!1;return!0}const e=Object.keys(n);if(e.length!==Object.keys(t).length)return!1;for(const r of e)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(n[r],t[r]))return!1;return!0}M1();const ph=et.createContext(null),PM=ph.Provider,GT=Or.error001();function Vt(n,t){const e=et.useContext(ph);if(e===null)throw new Error(GT);return KT(e,n,t)}function oe(){const n=et.useContext(ph);if(n===null)throw new Error(GT);return et.useMemo(()=>({getState:n.getState,setState:n.setState,subscribe:n.subscribe}),[n])}const u1={display:"none"},JM={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},XT="react-flow__node-desc",FT="react-flow__edge-desc",$M="react-flow__aria-live",HM=n=>n.ariaLiveMessage,VM=n=>n.ariaLabelConfig;function jM({rfId:n}){const t=Vt(HM);return tt.jsx("div",{id:`${$M}-${n}`,"aria-live":"assertive","aria-atomic":"true",style:JM,children:t})}function YM({rfId:n,disableKeyboardA11y:t}){const e=Vt(VM);return tt.jsxs(tt.Fragment,{children:[tt.jsx("div",{id:`${XT}-${n}`,style:u1,children:t?e["node.a11yDescription.default"]:e["node.a11yDescription.keyboardDisabled"]}),tt.jsx("div",{id:`${FT}-${n}`,style:u1,children:e["edge.a11yDescription.default"]}),!t&&tt.jsx(jM,{rfId:n})]})}const vh=et.forwardRef(({position:n="top-left",children:t,className:e,style:r,...a},l)=>{const c=`${n}`.split("-");return tt.jsx("div",{className:Ee(["react-flow__panel",e,...c]),style:r,ref:l,...a,children:t})});vh.displayName="Panel";function KM({proOptions:n,position:t="bottom-right"}){return n!=null&&n.hideAttribution?null:tt.jsx(vh,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:tt.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const GM=n=>{const t=[],e=[];for(const[,r]of n.nodeLookup)r.selected&&t.push(r.internals.userNode);for(const[,r]of n.edgeLookup)r.selected&&e.push(r);return{selectedNodes:t,selectedEdges:e}},td=n=>n.id;function XM(n,t){return fe(n.selectedNodes.map(td),t.selectedNodes.map(td))&&fe(n.selectedEdges.map(td),t.selectedEdges.map(td))}function FM({onSelectionChange:n}){const t=oe(),{selectedNodes:e,selectedEdges:r}=Vt(GM,XM);return et.useEffect(()=>{const a={nodes:e,edges:r};n==null||n(a),t.getState().onSelectionChangeHandlers.forEach(l=>l(a))},[e,r,n]),null}const ZM=n=>!!n.onSelectionChangeHandlers;function QM({onSelectionChange:n}){const t=Vt(ZM);return n||t?tt.jsx(FM,{onSelectionChange:n}):null}const ZT=[0,0],WM={x:0,y:0,zoom:1},tR=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","paneClickDistance","ariaLabelConfig"],c1=[...tR,"rfId"],eR=n=>({setNodes:n.setNodes,setEdges:n.setEdges,setMinZoom:n.setMinZoom,setMaxZoom:n.setMaxZoom,setTranslateExtent:n.setTranslateExtent,setNodeExtent:n.setNodeExtent,reset:n.reset,setDefaultNodesAndEdges:n.setDefaultNodesAndEdges,setPaneClickDistance:n.setPaneClickDistance}),f1={translateExtent:ac,nodeOrigin:ZT,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1",paneClickDistance:0};function nR(n){const{setNodes:t,setEdges:e,setMinZoom:r,setMaxZoom:a,setTranslateExtent:l,setNodeExtent:c,reset:d,setDefaultNodesAndEdges:h,setPaneClickDistance:g}=Vt(eR,fe),p=oe();et.useEffect(()=>(h(n.defaultNodes,n.defaultEdges),()=>{w.current=f1,d()}),[]);const w=et.useRef(f1);return et.useEffect(()=>{for(const v of c1){const b=n[v],T=w.current[v];b!==T&&(typeof n[v]>"u"||(v==="nodes"?t(b):v==="edges"?e(b):v==="minZoom"?r(b):v==="maxZoom"?a(b):v==="translateExtent"?l(b):v==="nodeExtent"?c(b):v==="paneClickDistance"?g(b):v==="ariaLabelConfig"?p.setState({ariaLabelConfig:PO(b)}):v==="fitView"?p.setState({fitViewQueued:b}):v==="fitViewOptions"?p.setState({fitViewOptions:b}):p.setState({[v]:b})))}w.current=n},c1.map(v=>n[v])),null}function d1(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function rR(n){var r;const[t,e]=et.useState(n==="system"?null:n);return et.useEffect(()=>{if(n!=="system"){e(n);return}const a=d1(),l=()=>e(a!=null&&a.matches?"dark":"light");return l(),a==null||a.addEventListener("change",l),()=>{a==null||a.removeEventListener("change",l)}},[n]),t!==null?t:(r=d1())!=null&&r.matches?"dark":"light"}const h1=typeof document<"u"?document:null;function cc(n=null,t={target:h1,actInsideInputWithModifier:!0}){const[e,r]=et.useState(!1),a=et.useRef(!1),l=et.useRef(new Set([])),[c,d]=et.useMemo(()=>{if(n!==null){const g=(Array.isArray(n)?n:[n]).filter(w=>typeof w=="string").map(w=>w.replace("+",`
`).replace(`

`,`
+`).split(`
`)),p=g.reduce((w,v)=>w.concat(...v),[]);return[g,p]}return[[],[]]},[n]);return et.useEffect(()=>{const h=(t==null?void 0:t.target)??h1,g=(t==null?void 0:t.actInsideInputWithModifier)??!0;if(n!==null){const p=b=>{var C,D;if(a.current=b.ctrlKey||b.metaKey||b.shiftKey||b.altKey,(!a.current||a.current&&!g)&&OT(b))return!1;const A=m1(b.code,d);if(l.current.add(b[A]),g1(c,l.current,!1)){const L=((D=(C=b.composedPath)==null?void 0:C.call(b))==null?void 0:D[0])||b.target,N=(L==null?void 0:L.nodeName)==="BUTTON"||(L==null?void 0:L.nodeName)==="A";t.preventDefault!==!1&&(a.current||!N)&&b.preventDefault(),r(!0)}},w=b=>{const T=m1(b.code,d);g1(c,l.current,!0)?(r(!1),l.current.clear()):l.current.delete(b[T]),b.key==="Meta"&&l.current.clear(),a.current=!1},v=()=>{l.current.clear(),r(!1)};return h==null||h.addEventListener("keydown",p),h==null||h.addEventListener("keyup",w),window.addEventListener("blur",v),window.addEventListener("contextmenu",v),()=>{h==null||h.removeEventListener("keydown",p),h==null||h.removeEventListener("keyup",w),window.removeEventListener("blur",v),window.removeEventListener("contextmenu",v)}}},[n,r]),e}function g1(n,t,e){return n.filter(r=>e||r.length===t.size).some(r=>r.every(a=>t.has(a)))}function m1(n,t){return t.includes(n)?"code":"key"}const iR=()=>{const n=oe();return et.useMemo(()=>({zoomIn:t=>{const{panZoom:e}=n.getState();return e?e.scaleBy(1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomOut:t=>{const{panZoom:e}=n.getState();return e?e.scaleBy(1/1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomTo:(t,e)=>{const{panZoom:r}=n.getState();return r?r.scaleTo(t,{duration:e==null?void 0:e.duration}):Promise.resolve(!1)},getZoom:()=>n.getState().transform[2],setViewport:async(t,e)=>{const{transform:[r,a,l],panZoom:c}=n.getState();return c?(await c.setViewport({x:t.x??r,y:t.y??a,zoom:t.zoom??l},e),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[t,e,r]=n.getState().transform;return{x:t,y:e,zoom:r}},setCenter:async(t,e,r)=>n.getState().setCenter(t,e,r),fitBounds:async(t,e)=>{const{width:r,height:a,minZoom:l,maxZoom:c,panZoom:d}=n.getState(),h=_p(t,r,a,l,c,(e==null?void 0:e.padding)??.1);return d?(await d.setViewport(h,{duration:e==null?void 0:e.duration,ease:e==null?void 0:e.ease,interpolate:e==null?void 0:e.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,e={})=>{const{transform:r,snapGrid:a,snapToGrid:l,domNode:c}=n.getState();if(!c)return t;const{x:d,y:h}=c.getBoundingClientRect(),g={x:t.x-d,y:t.y-h},p=e.snapGrid??a,w=e.snapToGrid??l;return bc(g,r,w,p)},flowToScreenPosition:t=>{const{transform:e,domNode:r}=n.getState();if(!r)return t;const{x:a,y:l}=r.getBoundingClientRect(),c=Fd(t,e);return{x:c.x+a,y:c.y+l}}}),[])};function QT(n,t){const e=[],r=new Map,a=[];for(const l of n)if(l.type==="add"){a.push(l);continue}else if(l.type==="remove"||l.type==="replace")r.set(l.id,[l]);else{const c=r.get(l.id);c?c.push(l):r.set(l.id,[l])}for(const l of t){const c=r.get(l.id);if(!c){e.push(l);continue}if(c[0].type==="remove")continue;if(c[0].type==="replace"){e.push({...c[0].item});continue}const d={...l};for(const h of c)sR(h,d);e.push(d)}return a.length&&a.forEach(l=>{l.index!==void 0?e.splice(l.index,0,{...l.item}):e.push({...l.item})}),e}function sR(n,t){switch(n.type){case"select":{t.selected=n.selected;break}case"position":{typeof n.position<"u"&&(t.position=n.position),typeof n.dragging<"u"&&(t.dragging=n.dragging);break}case"dimensions":{typeof n.dimensions<"u"&&(t.measured??(t.measured={}),t.measured.width=n.dimensions.width,t.measured.height=n.dimensions.height,n.setAttributes&&((n.setAttributes===!0||n.setAttributes==="width")&&(t.width=n.dimensions.width),(n.setAttributes===!0||n.setAttributes==="height")&&(t.height=n.dimensions.height))),typeof n.resizing=="boolean"&&(t.resizing=n.resizing);break}}}function aR(n,t){return QT(n,t)}function oR(n,t){return QT(n,t)}function Ha(n,t){return{id:n,type:"select",selected:t}}function Wo(n,t=new Set,e=!1){const r=[];for(const[a,l]of n){const c=t.has(a);!(l.selected===void 0&&!c)&&l.selected!==c&&(e&&(l.selected=c),r.push(Ha(l.id,c)))}return r}function y1({items:n=[],lookup:t}){var a;const e=[],r=new Map(n.map(l=>[l.id,l]));for(const[l,c]of n.entries()){const d=t.get(c.id),h=((a=d==null?void 0:d.internals)==null?void 0:a.userNode)??d;h!==void 0&&h!==c&&e.push({id:c.id,item:c,type:"replace"}),h===void 0&&e.push({item:c,type:"add",index:l})}for(const[l]of t)r.get(l)===void 0&&e.push({id:l,type:"remove"});return e}function p1(n){return{id:n.id,type:"remove"}}const v1=n=>IO(n),lR=n=>TT(n);function WT(n){return et.forwardRef(n)}const uR=typeof window<"u"?et.useLayoutEffect:et.useEffect;function w1(n){const[t,e]=et.useState(BigInt(0)),[r]=et.useState(()=>cR(()=>e(a=>a+BigInt(1))));return uR(()=>{const a=r.get();a.length&&(n(a),r.reset())},[t]),r}function cR(n){let t=[];return{get:()=>t,reset:()=>{t=[]},push:e=>{t.push(e),n()}}}const tA=et.createContext(null);function fR({children:n}){const t=oe(),e=et.useCallback(d=>{const{nodes:h=[],setNodes:g,hasDefaultNodes:p,onNodesChange:w,nodeLookup:v,fitViewQueued:b}=t.getState();let T=h;for(const C of d)T=typeof C=="function"?C(T):C;const A=y1({items:T,lookup:v});p&&g(T),A.length>0?w==null||w(A):b&&window.requestAnimationFrame(()=>{const{fitViewQueued:C,nodes:D,setNodes:L}=t.getState();C&&L(D)})},[]),r=w1(e),a=et.useCallback(d=>{const{edges:h=[],setEdges:g,hasDefaultEdges:p,onEdgesChange:w,edgeLookup:v}=t.getState();let b=h;for(const T of d)b=typeof T=="function"?T(b):T;p?g(b):w&&w(y1({items:b,lookup:v}))},[]),l=w1(a),c=et.useMemo(()=>({nodeQueue:r,edgeQueue:l}),[]);return tt.jsx(tA.Provider,{value:c,children:n})}function dR(){const n=et.useContext(tA);if(!n)throw new Error("useBatchContext must be used within a BatchProvider");return n}const hR=n=>!!n.panZoom;function Hp(){const n=iR(),t=oe(),e=dR(),r=Vt(hR),a=et.useMemo(()=>{const l=w=>t.getState().nodeLookup.get(w),c=w=>{e.nodeQueue.push(w)},d=w=>{e.edgeQueue.push(w)},h=w=>{var D,L;const{nodeLookup:v,nodeOrigin:b}=t.getState(),T=v1(w)?w:v.get(w.id),A=T.parentId?DT(T.position,T.measured,T.parentId,v,b):T.position,C={...T,position:A,width:((D=T.measured)==null?void 0:D.width)??T.width,height:((L=T.measured)==null?void 0:L.height)??T.height};return wl(C)},g=(w,v,b={replace:!1})=>{c(T=>T.map(A=>{if(A.id===w){const C=typeof v=="function"?v(A):v;return b.replace&&v1(C)?C:{...A,...C}}return A}))},p=(w,v,b={replace:!1})=>{d(T=>T.map(A=>{if(A.id===w){const C=typeof v=="function"?v(A):v;return b.replace&&lR(C)?C:{...A,...C}}return A}))};return{getNodes:()=>t.getState().nodes.map(w=>({...w})),getNode:w=>{var v;return(v=l(w))==null?void 0:v.internals.userNode},getInternalNode:l,getEdges:()=>{const{edges:w=[]}=t.getState();return w.map(v=>({...v}))},getEdge:w=>t.getState().edgeLookup.get(w),setNodes:c,setEdges:d,addNodes:w=>{const v=Array.isArray(w)?w:[w];e.nodeQueue.push(b=>[...b,...v])},addEdges:w=>{const v=Array.isArray(w)?w:[w];e.edgeQueue.push(b=>[...b,...v])},toObject:()=>{const{nodes:w=[],edges:v=[],transform:b}=t.getState(),[T,A,C]=b;return{nodes:w.map(D=>({...D})),edges:v.map(D=>({...D})),viewport:{x:T,y:A,zoom:C}}},deleteElements:async({nodes:w=[],edges:v=[]})=>{const{nodes:b,edges:T,onNodesDelete:A,onEdgesDelete:C,triggerNodeChanges:D,triggerEdgeChanges:L,onDelete:N,onBeforeDelete:O}=t.getState(),{nodes:B,edges:_}=await zO({nodesToRemove:w,edgesToRemove:v,nodes:b,edges:T,onBeforeDelete:O}),P=_.length>0,V=B.length>0;if(P){const W=_.map(p1);C==null||C(_),L(W)}if(V){const W=B.map(p1);A==null||A(B),D(W)}return(V||P)&&(N==null||N({nodes:B,edges:_})),{deletedNodes:B,deletedEdges:_}},getIntersectingNodes:(w,v=!0,b)=>{const T=jS(w),A=T?w:h(w),C=b!==void 0;return A?(b||t.getState().nodes).filter(D=>{const L=t.getState().nodeLookup.get(D.id);if(L&&!T&&(D.id===w.id||!L.internals.positionAbsolute))return!1;const N=wl(C?D:L),O=lc(N,A);return v&&O>0||O>=N.width*N.height||O>=A.width*A.height}):[]},isNodeIntersecting:(w,v,b=!0)=>{const A=jS(w)?w:h(w);if(!A)return!1;const C=lc(A,v);return b&&C>0||C>=A.width*A.height},updateNode:g,updateNodeData:(w,v,b={replace:!1})=>{g(w,T=>{const A=typeof v=="function"?v(T):v;return b.replace?{...T,data:A}:{...T,data:{...T.data,...A}}},b)},updateEdge:p,updateEdgeData:(w,v,b={replace:!1})=>{p(w,T=>{const A=typeof v=="function"?v(T):v;return b.replace?{...T,data:A}:{...T,data:{...T.data,...A}}},b)},getNodesBounds:w=>{const{nodeLookup:v,nodeOrigin:b}=t.getState();return OO(w,{nodeLookup:v,nodeOrigin:b})},getHandleConnections:({type:w,id:v,nodeId:b})=>{var T;return Array.from(((T=t.getState().connectionLookup.get(`${b}-${w}${v?`-${v}`:""}`))==null?void 0:T.values())??[])},getNodeConnections:({type:w,handleId:v,nodeId:b})=>{var T;return Array.from(((T=t.getState().connectionLookup.get(`${b}${w?v?`-${w}-${v}`:`-${w}`:""}`))==null?void 0:T.values())??[])},fitView:async w=>{const v=t.getState().fitViewResolver??qO();return t.setState({fitViewQueued:!0,fitViewOptions:w,fitViewResolver:v}),e.nodeQueue.push(b=>[...b]),v.promise}}},[]);return et.useMemo(()=>({...a,...n,viewportInitialized:r}),[r])}const b1=n=>n.selected,gR=typeof window<"u"?window:void 0;function mR({deleteKeyCode:n,multiSelectionKeyCode:t}){const e=oe(),{deleteElements:r}=Hp(),a=cc(n,{actInsideInputWithModifier:!1}),l=cc(t,{target:gR});et.useEffect(()=>{if(a){const{edges:c,nodes:d}=e.getState();r({nodes:d.filter(b1),edges:c.filter(b1)}),e.setState({nodesSelectionActive:!1})}},[a]),et.useEffect(()=>{e.setState({multiSelectionActive:l})},[l])}function yR(n){const t=oe();et.useEffect(()=>{const e=()=>{var a,l;if(!n.current)return!1;const r=Up(n.current);(r.height===0||r.width===0)&&((l=(a=t.getState()).onError)==null||l.call(a,"004",Or.error004())),t.setState({width:r.width||500,height:r.height||500})};if(n.current){e(),window.addEventListener("resize",e);const r=new ResizeObserver(()=>e());return r.observe(n.current),()=>{window.removeEventListener("resize",e),r&&n.current&&r.unobserve(n.current)}}},[])}const wh={position:"absolute",width:"100%",height:"100%",top:0,left:0},pR=n=>({userSelectionActive:n.userSelectionActive,lib:n.lib});function vR({onPaneContextMenu:n,zoomOnScroll:t=!0,zoomOnPinch:e=!0,panOnScroll:r=!1,panOnScrollSpeed:a=.5,panOnScrollMode:l=Xa.Free,zoomOnDoubleClick:c=!0,panOnDrag:d=!0,defaultViewport:h,translateExtent:g,minZoom:p,maxZoom:w,zoomActivationKeyCode:v,preventScrolling:b=!0,children:T,noWheelClassName:A,noPanClassName:C,onViewportChange:D,isControlledViewport:L,paneClickDistance:N}){const O=oe(),B=et.useRef(null),{userSelectionActive:_,lib:P}=Vt(pR,fe),V=cc(v),W=et.useRef();yR(B);const ft=et.useCallback(nt=>{D==null||D({x:nt[0],y:nt[1],zoom:nt[2]}),L||O.setState({transform:nt})},[D,L]);return et.useEffect(()=>{if(B.current){W.current=bM({domNode:B.current,minZoom:p,maxZoom:w,translateExtent:g,viewport:h,paneClickDistance:N,onDraggingChange:M=>O.setState({paneDragging:M}),onPanZoomStart:(M,Y)=>{const{onViewportChangeStart:I,onMoveStart:z}=O.getState();z==null||z(M,Y),I==null||I(Y)},onPanZoom:(M,Y)=>{const{onViewportChange:I,onMove:z}=O.getState();z==null||z(M,Y),I==null||I(Y)},onPanZoomEnd:(M,Y)=>{const{onViewportChangeEnd:I,onMoveEnd:z}=O.getState();z==null||z(M,Y),I==null||I(Y)}});const{x:nt,y:rt,zoom:ot}=W.current.getViewport();return O.setState({panZoom:W.current,transform:[nt,rt,ot],domNode:B.current.closest(".react-flow")}),()=>{var M;(M=W.current)==null||M.destroy()}}},[]),et.useEffect(()=>{var nt;(nt=W.current)==null||nt.update({onPaneContextMenu:n,zoomOnScroll:t,zoomOnPinch:e,panOnScroll:r,panOnScrollSpeed:a,panOnScrollMode:l,zoomOnDoubleClick:c,panOnDrag:d,zoomActivationKeyPressed:V,preventScrolling:b,noPanClassName:C,userSelectionActive:_,noWheelClassName:A,lib:P,onTransformChange:ft})},[n,t,e,r,a,l,c,d,V,b,C,_,A,P,ft]),tt.jsx("div",{className:"react-flow__renderer",ref:B,style:wh,children:T})}const wR=n=>({userSelectionActive:n.userSelectionActive,userSelectionRect:n.userSelectionRect});function bR(){const{userSelectionActive:n,userSelectionRect:t}=Vt(wR,fe);return n&&t?tt.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}const iy=(n,t)=>e=>{e.target===t.current&&(n==null||n(e))},SR=n=>({userSelectionActive:n.userSelectionActive,elementsSelectable:n.elementsSelectable,connectionInProgress:n.connection.inProgress,dragging:n.paneDragging});function xR({isSelecting:n,selectionKeyPressed:t,selectionMode:e=oc.Full,panOnDrag:r,selectionOnDrag:a,onSelectionStart:l,onSelectionEnd:c,onPaneClick:d,onPaneContextMenu:h,onPaneScroll:g,onPaneMouseEnter:p,onPaneMouseMove:w,onPaneMouseLeave:v,children:b}){const T=oe(),{userSelectionActive:A,elementsSelectable:C,dragging:D,connectionInProgress:L}=Vt(SR,fe),N=C&&(n||A),O=et.useRef(null),B=et.useRef(),_=et.useRef(new Set),P=et.useRef(new Set),V=et.useRef(!1),W=et.useRef(!1),ft=z=>{if(V.current||L){V.current=!1;return}d==null||d(z),T.getState().resetSelectedElements(),T.setState({nodesSelectionActive:!1})},nt=z=>{if(Array.isArray(r)&&(r!=null&&r.includes(2))){z.preventDefault();return}h==null||h(z)},rt=g?z=>g(z):void 0,ot=z=>{var Z,it;const{resetSelectedElements:K,domNode:J}=T.getState();if(B.current=J==null?void 0:J.getBoundingClientRect(),!C||!n||z.button!==0||z.target!==O.current||!B.current)return;(it=(Z=z.target)==null?void 0:Z.setPointerCapture)==null||it.call(Z,z.pointerId),W.current=!0,V.current=!1;const{x:k,y:U}=Tr(z.nativeEvent,B.current);K(),T.setState({userSelectionRect:{width:0,height:0,startX:k,startY:U,x:k,y:U}}),l==null||l(z)},M=z=>{const{userSelectionRect:K,transform:J,nodeLookup:k,edgeLookup:U,connectionLookup:Z,triggerNodeChanges:it,triggerEdgeChanges:lt,defaultEdgeOptions:yt}=T.getState();if(!B.current||!K)return;V.current=!0;const{x:dt,y:pt}=Tr(z.nativeEvent,B.current),{startX:mt,startY:St}=K,Jt={startX:mt,startY:St,x:dt<mt?dt:mt,y:pt<St?pt:St,width:Math.abs(dt-mt),height:Math.abs(pt-St)},Rt=_.current,Nt=P.current;_.current=new Set(Lp(k,Jt,J,e===oc.Partial,!0).map(kt=>kt.id)),P.current=new Set;const Ot=(yt==null?void 0:yt.selectable)??!0;for(const kt of _.current){const Zt=Z.get(kt);if(Zt)for(const{edgeId:le}of Zt.values()){const be=U.get(le);be&&(be.selectable??Ot)&&P.current.add(le)}}if(!YS(Rt,_.current)){const kt=Wo(k,_.current,!0);it(kt)}if(!YS(Nt,P.current)){const kt=Wo(U,P.current);lt(kt)}T.setState({userSelectionRect:Jt,userSelectionActive:!0,nodesSelectionActive:!1})},Y=z=>{var J,k;if(z.button!==0||!W.current)return;(k=(J=z.target)==null?void 0:J.releasePointerCapture)==null||k.call(J,z.pointerId);const{userSelectionRect:K}=T.getState();!A&&K&&z.target===O.current&&(ft==null||ft(z)),T.setState({userSelectionActive:!1,userSelectionRect:null,nodesSelectionActive:_.current.size>0}),c==null||c(z),(t||a)&&(V.current=!1),W.current=!1},I=r===!0||Array.isArray(r)&&r.includes(0);return tt.jsxs("div",{className:Ee(["react-flow__pane",{draggable:I,dragging:D,selection:n}]),onClick:N?void 0:iy(ft,O),onContextMenu:iy(nt,O),onWheel:iy(rt,O),onPointerEnter:N?void 0:p,onPointerDown:N?ot:w,onPointerMove:N?M:w,onPointerUp:N?Y:void 0,onPointerLeave:v,ref:O,style:wh,children:[b,tt.jsx(bR,{})]})}function ap({id:n,store:t,unselect:e=!1,nodeRef:r}){const{addSelectedNodes:a,unselectNodesAndEdges:l,multiSelectionActive:c,nodeLookup:d,onError:h}=t.getState(),g=d.get(n);if(!g){h==null||h("012",Or.error012(n));return}t.setState({nodesSelectionActive:!1}),g.selected?(e||g.selected&&c)&&(l({nodes:[g],edges:[]}),requestAnimationFrame(()=>{var p;return(p=r==null?void 0:r.current)==null?void 0:p.blur()})):a([n])}function eA({nodeRef:n,disabled:t=!1,noDragClassName:e,handleSelector:r,nodeId:a,isSelectable:l,nodeClickDistance:c}){const d=oe(),[h,g]=et.useState(!1),p=et.useRef();return et.useEffect(()=>{p.current=sM({getStoreItems:()=>d.getState(),onNodeMouseDown:w=>{ap({id:w,store:d,nodeRef:n})},onDragStart:()=>{g(!0)},onDragStop:()=>{g(!1)}})},[]),et.useEffect(()=>{var w,v;if(t)(w=p.current)==null||w.destroy();else if(n.current)return(v=p.current)==null||v.update({noDragClassName:e,handleSelector:r,domNode:n.current,isSelectable:l,nodeId:a,nodeClickDistance:c}),()=>{var b;(b=p.current)==null||b.destroy()}},[e,r,t,l,n,a]),h}const TR=n=>t=>t.selected&&(t.draggable||n&&typeof t.draggable>"u");function nA(){const n=oe();return et.useCallback(e=>{const{nodeExtent:r,snapToGrid:a,snapGrid:l,nodesDraggable:c,onError:d,updateNodePositions:h,nodeLookup:g,nodeOrigin:p}=n.getState(),w=new Map,v=TR(c),b=a?l[0]:5,T=a?l[1]:5,A=e.direction.x*b*e.factor,C=e.direction.y*T*e.factor;for(const[,D]of g){if(!v(D))continue;let L={x:D.internals.positionAbsolute.x+A,y:D.internals.positionAbsolute.y+C};a&&(L=mh(L,l));const{position:N,positionAbsolute:O}=AT({nodeId:D.id,nextPosition:L,nodeLookup:g,nodeExtent:r,nodeOrigin:p,onError:d});D.position=N,D.internals.positionAbsolute=O,w.set(D.id,D)}h(w)},[])}const Vp=et.createContext(null),AR=Vp.Provider;Vp.Consumer;const rA=()=>et.useContext(Vp),ER=n=>({connectOnClick:n.connectOnClick,noPanClassName:n.noPanClassName,rfId:n.rfId}),NR=(n,t,e)=>r=>{const{connectionClickStartHandle:a,connectionMode:l,connection:c}=r,{fromHandle:d,toHandle:h,isValid:g}=c,p=(h==null?void 0:h.nodeId)===n&&(h==null?void 0:h.id)===t&&(h==null?void 0:h.type)===e;return{connectingFrom:(d==null?void 0:d.nodeId)===n&&(d==null?void 0:d.id)===t&&(d==null?void 0:d.type)===e,connectingTo:p,clickConnecting:(a==null?void 0:a.nodeId)===n&&(a==null?void 0:a.id)===t&&(a==null?void 0:a.type)===e,isPossibleEndHandle:l===pl.Strict?(d==null?void 0:d.type)!==e:n!==(d==null?void 0:d.nodeId)||t!==(d==null?void 0:d.id),connectionInProcess:!!d,clickConnectionInProcess:!!a,valid:p&&g}};function CR({type:n="source",position:t=Et.Top,isValidConnection:e,isConnectable:r=!0,isConnectableStart:a=!0,isConnectableEnd:l=!0,id:c,onConnect:d,children:h,className:g,onMouseDown:p,onTouchStart:w,...v},b){var Y,I;const T=c||null,A=n==="target",C=oe(),D=rA(),{connectOnClick:L,noPanClassName:N,rfId:O}=Vt(ER,fe),{connectingFrom:B,connectingTo:_,clickConnecting:P,isPossibleEndHandle:V,connectionInProcess:W,clickConnectionInProcess:ft,valid:nt}=Vt(NR(D,T,n),fe);D||(I=(Y=C.getState()).onError)==null||I.call(Y,"010",Or.error010());const rt=z=>{const{defaultEdgeOptions:K,onConnect:J,hasDefaultEdges:k}=C.getState(),U={...K,...z};if(k){const{edges:Z,setEdges:it}=C.getState();it(YO(U,Z))}J==null||J(U),d==null||d(U)},ot=z=>{if(!D)return;const K=MT(z.nativeEvent);if(a&&(K&&z.button===0||!K)){const J=C.getState();sp.onPointerDown(z.nativeEvent,{autoPanOnConnect:J.autoPanOnConnect,connectionMode:J.connectionMode,connectionRadius:J.connectionRadius,domNode:J.domNode,nodeLookup:J.nodeLookup,lib:J.lib,isTarget:A,handleId:T,nodeId:D,flowId:J.rfId,panBy:J.panBy,cancelConnection:J.cancelConnection,onConnectStart:J.onConnectStart,onConnectEnd:J.onConnectEnd,updateConnection:J.updateConnection,onConnect:rt,isValidConnection:e||J.isValidConnection,getTransform:()=>C.getState().transform,getFromHandle:()=>C.getState().connection.fromHandle,autoPanSpeed:J.autoPanSpeed,dragThreshold:J.connectionDragThreshold})}K?p==null||p(z):w==null||w(z)},M=z=>{const{onClickConnectStart:K,onClickConnectEnd:J,connectionClickStartHandle:k,connectionMode:U,isValidConnection:Z,lib:it,rfId:lt,nodeLookup:yt,connection:dt}=C.getState();if(!D||!k&&!a)return;if(!k){K==null||K(z.nativeEvent,{nodeId:D,handleId:T,handleType:n}),C.setState({connectionClickStartHandle:{nodeId:D,type:n,id:T}});return}const pt=IT(z.target),mt=e||Z,{connection:St,isValid:Jt}=sp.isValid(z.nativeEvent,{handle:{nodeId:D,id:T,type:n},connectionMode:U,fromNodeId:k.nodeId,fromHandleId:k.id||null,fromType:k.type,isValidConnection:mt,flowId:lt,doc:pt,lib:it,nodeLookup:yt});Jt&&St&&rt(St);const Rt=structuredClone(dt);delete Rt.inProgress,Rt.toPosition=Rt.toHandle?Rt.toHandle.position:null,J==null||J(z,Rt),C.setState({connectionClickStartHandle:null})};return tt.jsx("div",{"data-handleid":T,"data-nodeid":D,"data-handlepos":t,"data-id":`${O}-${D}-${T}-${n}`,className:Ee(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",N,g,{source:!A,target:A,connectable:r,connectablestart:a,connectableend:l,clickconnecting:P,connectingfrom:B,connectingto:_,valid:nt,connectionindicator:r&&(!W||V)&&(W||ft?l:a)}]),onMouseDown:ot,onTouchStart:ot,onClick:L?M:void 0,ref:b,...v,children:h})}const Qd=et.memo(WT(CR));function kR({data:n,isConnectable:t,sourcePosition:e=Et.Bottom}){return tt.jsxs(tt.Fragment,{children:[n==null?void 0:n.label,tt.jsx(Qd,{type:"source",position:e,isConnectable:t})]})}function DR({data:n,isConnectable:t,targetPosition:e=Et.Top,sourcePosition:r=Et.Bottom}){return tt.jsxs(tt.Fragment,{children:[tt.jsx(Qd,{type:"target",position:e,isConnectable:t}),n==null?void 0:n.label,tt.jsx(Qd,{type:"source",position:r,isConnectable:t})]})}function IR(){return null}function OR({data:n,isConnectable:t,targetPosition:e=Et.Top}){return tt.jsxs(tt.Fragment,{children:[tt.jsx(Qd,{type:"target",position:e,isConnectable:t}),n==null?void 0:n.label]})}const Wd={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},S1={input:kR,default:DR,output:OR,group:IR};function MR(n){var t,e,r,a;return n.internals.handleBounds===void 0?{width:n.width??n.initialWidth??((t=n.style)==null?void 0:t.width),height:n.height??n.initialHeight??((e=n.style)==null?void 0:e.height)}:{width:n.width??((r=n.style)==null?void 0:r.width),height:n.height??((a=n.style)==null?void 0:a.height)}}const RR=n=>{const{width:t,height:e,x:r,y:a}=wc(n.nodeLookup,{filter:l=>!!l.selected});return{width:ir(t)?t:null,height:ir(e)?e:null,userSelectionActive:n.userSelectionActive,transformString:`translate(${n.transform[0]}px,${n.transform[1]}px) scale(${n.transform[2]}) translate(${r}px,${a}px)`}};function BR({onSelectionContextMenu:n,noPanClassName:t,disableKeyboardA11y:e}){const r=oe(),{width:a,height:l,transformString:c,userSelectionActive:d}=Vt(RR,fe),h=nA(),g=et.useRef(null);if(et.useEffect(()=>{var v;e||(v=g.current)==null||v.focus({preventScroll:!0})},[e]),eA({nodeRef:g}),d||!a||!l)return null;const p=n?v=>{const b=r.getState().nodes.filter(T=>T.selected);n(v,b)}:void 0,w=v=>{Object.prototype.hasOwnProperty.call(Wd,v.key)&&(v.preventDefault(),h({direction:Wd[v.key],factor:v.shiftKey?4:1}))};return tt.jsx("div",{className:Ee(["react-flow__nodesselection","react-flow__container",t]),style:{transform:c},children:tt.jsx("div",{ref:g,className:"react-flow__nodesselection-rect",onContextMenu:p,tabIndex:e?void 0:-1,onKeyDown:e?void 0:w,style:{width:a,height:l}})})}const x1=typeof window<"u"?window:void 0,zR=n=>({nodesSelectionActive:n.nodesSelectionActive,userSelectionActive:n.userSelectionActive});function iA({children:n,onPaneClick:t,onPaneMouseEnter:e,onPaneMouseMove:r,onPaneMouseLeave:a,onPaneContextMenu:l,onPaneScroll:c,paneClickDistance:d,deleteKeyCode:h,selectionKeyCode:g,selectionOnDrag:p,selectionMode:w,onSelectionStart:v,onSelectionEnd:b,multiSelectionKeyCode:T,panActivationKeyCode:A,zoomActivationKeyCode:C,elementsSelectable:D,zoomOnScroll:L,zoomOnPinch:N,panOnScroll:O,panOnScrollSpeed:B,panOnScrollMode:_,zoomOnDoubleClick:P,panOnDrag:V,defaultViewport:W,translateExtent:ft,minZoom:nt,maxZoom:rt,preventScrolling:ot,onSelectionContextMenu:M,noWheelClassName:Y,noPanClassName:I,disableKeyboardA11y:z,onViewportChange:K,isControlledViewport:J}){const{nodesSelectionActive:k,userSelectionActive:U}=Vt(zR),Z=cc(g,{target:x1}),it=cc(A,{target:x1}),lt=it||V,yt=it||O,dt=p&&lt!==!0,pt=Z||U||dt;return mR({deleteKeyCode:h,multiSelectionKeyCode:T}),tt.jsx(vR,{onPaneContextMenu:l,elementsSelectable:D,zoomOnScroll:L,zoomOnPinch:N,panOnScroll:yt,panOnScrollSpeed:B,panOnScrollMode:_,zoomOnDoubleClick:P,panOnDrag:!Z&&lt,defaultViewport:W,translateExtent:ft,minZoom:nt,maxZoom:rt,zoomActivationKeyCode:C,preventScrolling:ot,noWheelClassName:Y,noPanClassName:I,onViewportChange:K,isControlledViewport:J,paneClickDistance:d,children:tt.jsxs(xR,{onSelectionStart:v,onSelectionEnd:b,onPaneClick:t,onPaneMouseEnter:e,onPaneMouseMove:r,onPaneMouseLeave:a,onPaneContextMenu:l,onPaneScroll:c,panOnDrag:lt,isSelecting:!!pt,selectionMode:w,selectionKeyPressed:Z,selectionOnDrag:dt,children:[n,k&&tt.jsx(BR,{onSelectionContextMenu:M,noPanClassName:I,disableKeyboardA11y:z})]})})}iA.displayName="FlowRenderer";const LR=et.memo(iA),_R=n=>t=>n?Lp(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map(e=>e.id):Array.from(t.nodeLookup.keys());function UR(n){return Vt(et.useCallback(_R(n),[n]),fe)}const qR=n=>n.updateNodeInternals;function PR(){const n=Vt(qR),[t]=et.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(e=>{const r=new Map;e.forEach(a=>{const l=a.target.getAttribute("data-id");r.set(l,{id:l,nodeElement:a.target,force:!0})}),n(r)}));return et.useEffect(()=>()=>{t==null||t.disconnect()},[t]),t}function JR({node:n,nodeType:t,hasDimensions:e,resizeObserver:r}){const a=oe(),l=et.useRef(null),c=et.useRef(null),d=et.useRef(n.sourcePosition),h=et.useRef(n.targetPosition),g=et.useRef(t),p=e&&!!n.internals.handleBounds;return et.useEffect(()=>{l.current&&!n.hidden&&(!p||c.current!==l.current)&&(c.current&&(r==null||r.unobserve(c.current)),r==null||r.observe(l.current),c.current=l.current)},[p,n.hidden]),et.useEffect(()=>()=>{c.current&&(r==null||r.unobserve(c.current),c.current=null)},[]),et.useEffect(()=>{if(l.current){const w=g.current!==t,v=d.current!==n.sourcePosition,b=h.current!==n.targetPosition;(w||v||b)&&(g.current=t,d.current=n.sourcePosition,h.current=n.targetPosition,a.getState().updateNodeInternals(new Map([[n.id,{id:n.id,nodeElement:l.current,force:!0}]])))}},[n.id,t,n.sourcePosition,n.targetPosition]),l}function $R({id:n,onClick:t,onMouseEnter:e,onMouseMove:r,onMouseLeave:a,onContextMenu:l,onDoubleClick:c,nodesDraggable:d,elementsSelectable:h,nodesConnectable:g,nodesFocusable:p,resizeObserver:w,noDragClassName:v,noPanClassName:b,disableKeyboardA11y:T,rfId:A,nodeTypes:C,nodeClickDistance:D,onError:L}){const{node:N,internals:O,isParent:B}=Vt(mt=>{const St=mt.nodeLookup.get(n),Jt=mt.parentLookup.has(n);return{node:St,internals:St.internals,isParent:Jt}},fe);let _=N.type||"default",P=(C==null?void 0:C[_])||S1[_];P===void 0&&(L==null||L("003",Or.error003(_)),_="default",P=(C==null?void 0:C.default)||S1.default);const V=!!(N.draggable||d&&typeof N.draggable>"u"),W=!!(N.selectable||h&&typeof N.selectable>"u"),ft=!!(N.connectable||g&&typeof N.connectable>"u"),nt=!!(N.focusable||p&&typeof N.focusable>"u"),rt=oe(),ot=kT(N),M=JR({node:N,nodeType:_,hasDimensions:ot,resizeObserver:w}),Y=eA({nodeRef:M,disabled:N.hidden||!V,noDragClassName:v,handleSelector:N.dragHandle,nodeId:n,isSelectable:W,nodeClickDistance:D}),I=nA();if(N.hidden)return null;const z=Ds(N),K=MR(N),J=W||V||t||e||r||a,k=e?mt=>e(mt,{...O.userNode}):void 0,U=r?mt=>r(mt,{...O.userNode}):void 0,Z=a?mt=>a(mt,{...O.userNode}):void 0,it=l?mt=>l(mt,{...O.userNode}):void 0,lt=c?mt=>c(mt,{...O.userNode}):void 0,yt=mt=>{const{selectNodesOnDrag:St,nodeDragThreshold:Jt}=rt.getState();W&&(!St||!V||Jt>0)&&ap({id:n,store:rt,nodeRef:M}),t&&t(mt,{...O.userNode})},dt=mt=>{if(!(OT(mt.nativeEvent)||T)){if(wT.includes(mt.key)&&W){const St=mt.key==="Escape";ap({id:n,store:rt,unselect:St,nodeRef:M})}else if(V&&N.selected&&Object.prototype.hasOwnProperty.call(Wd,mt.key)){mt.preventDefault();const{ariaLabelConfig:St}=rt.getState();rt.setState({ariaLiveMessage:St["node.a11yDescription.ariaLiveMessage"]({direction:mt.key.replace("Arrow","").toLowerCase(),x:~~O.positionAbsolute.x,y:~~O.positionAbsolute.y})}),I({direction:Wd[mt.key],factor:mt.shiftKey?4:1})}}},pt=()=>{var kt;if(T||!((kt=M.current)!=null&&kt.matches(":focus-visible")))return;const{transform:mt,width:St,height:Jt,autoPanOnNodeFocus:Rt,setCenter:Nt}=rt.getState();if(!Rt)return;Lp(new Map([[n,N]]),{x:0,y:0,width:St,height:Jt},mt,!0).length>0||Nt(N.position.x+z.width/2,N.position.y+z.height/2,{zoom:mt[2]})};return tt.jsx("div",{className:Ee(["react-flow__node",`react-flow__node-${_}`,{[b]:V},N.className,{selected:N.selected,selectable:W,parent:B,draggable:V,dragging:Y}]),ref:M,style:{zIndex:O.z,transform:`translate(${O.positionAbsolute.x}px,${O.positionAbsolute.y}px)`,pointerEvents:J?"all":"none",visibility:ot?"visible":"hidden",...N.style,...K},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:k,onMouseMove:U,onMouseLeave:Z,onContextMenu:it,onClick:yt,onDoubleClick:lt,onKeyDown:nt?dt:void 0,tabIndex:nt?0:void 0,onFocus:nt?pt:void 0,role:N.ariaRole??(nt?"group":void 0),"aria-roledescription":"node","aria-describedby":T?void 0:`${XT}-${A}`,"aria-label":N.ariaLabel,...N.domAttributes,children:tt.jsx(AR,{value:n,children:tt.jsx(P,{id:n,data:N.data,type:_,positionAbsoluteX:O.positionAbsolute.x,positionAbsoluteY:O.positionAbsolute.y,selected:N.selected??!1,selectable:W,draggable:V,deletable:N.deletable??!0,isConnectable:ft,sourcePosition:N.sourcePosition,targetPosition:N.targetPosition,dragging:Y,dragHandle:N.dragHandle,zIndex:O.z,parentId:N.parentId,...z})})})}const HR=n=>({nodesDraggable:n.nodesDraggable,nodesConnectable:n.nodesConnectable,nodesFocusable:n.nodesFocusable,elementsSelectable:n.elementsSelectable,onError:n.onError});function sA(n){const{nodesDraggable:t,nodesConnectable:e,nodesFocusable:r,elementsSelectable:a,onError:l}=Vt(HR,fe),c=UR(n.onlyRenderVisibleElements),d=PR();return tt.jsx("div",{className:"react-flow__nodes",style:wh,children:c.map(h=>tt.jsx($R,{id:h,nodeTypes:n.nodeTypes,nodeExtent:n.nodeExtent,onClick:n.onNodeClick,onMouseEnter:n.onNodeMouseEnter,onMouseMove:n.onNodeMouseMove,onMouseLeave:n.onNodeMouseLeave,onContextMenu:n.onNodeContextMenu,onDoubleClick:n.onNodeDoubleClick,noDragClassName:n.noDragClassName,noPanClassName:n.noPanClassName,rfId:n.rfId,disableKeyboardA11y:n.disableKeyboardA11y,resizeObserver:d,nodesDraggable:t,nodesConnectable:e,nodesFocusable:r,elementsSelectable:a,nodeClickDistance:n.nodeClickDistance,onError:l},h))})}sA.displayName="NodeRenderer";const VR=et.memo(sA);function jR(n){return Vt(et.useCallback(e=>{if(!n)return e.edges.map(a=>a.id);const r=[];if(e.width&&e.height)for(const a of e.edges){const l=e.nodeLookup.get(a.source),c=e.nodeLookup.get(a.target);l&&c&&HO({sourceNode:l,targetNode:c,width:e.width,height:e.height,transform:e.transform})&&r.push(a.id)}return r},[n]),fe)}const YR=({color:n="none",strokeWidth:t=1})=>tt.jsx("polyline",{style:{stroke:n,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),KR=({color:n="none",strokeWidth:t=1})=>tt.jsx("polyline",{style:{stroke:n,fill:n,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),T1={[Gd.Arrow]:YR,[Gd.ArrowClosed]:KR};function GR(n){const t=oe();return et.useMemo(()=>{var a,l;return Object.prototype.hasOwnProperty.call(T1,n)?T1[n]:((l=(a=t.getState()).onError)==null||l.call(a,"009",Or.error009(n)),null)},[n])}const XR=({id:n,type:t,color:e,width:r=12.5,height:a=12.5,markerUnits:l="strokeWidth",strokeWidth:c,orient:d="auto-start-reverse"})=>{const h=GR(t);return h?tt.jsx("marker",{className:"react-flow__arrowhead",id:n,markerWidth:`${r}`,markerHeight:`${a}`,viewBox:"-10 -10 20 20",markerUnits:l,orient:d,refX:"0",refY:"0",children:tt.jsx(h,{color:e,strokeWidth:c})}):null},aA=({defaultColor:n,rfId:t})=>{const e=Vt(l=>l.edges),r=Vt(l=>l.defaultEdgeOptions),a=et.useMemo(()=>ZO(e,{id:t,defaultColor:n,defaultMarkerStart:r==null?void 0:r.markerStart,defaultMarkerEnd:r==null?void 0:r.markerEnd}),[e,r,t,n]);return a.length?tt.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:tt.jsx("defs",{children:a.map(l=>tt.jsx(XR,{id:l.id,type:l.type,color:l.color,width:l.width,height:l.height,markerUnits:l.markerUnits,strokeWidth:l.strokeWidth,orient:l.orient},l.id))})}):null};aA.displayName="MarkerDefinitions";var FR=et.memo(aA);function oA({x:n,y:t,label:e,labelStyle:r,labelShowBg:a=!0,labelBgStyle:l,labelBgPadding:c=[2,4],labelBgBorderRadius:d=2,children:h,className:g,...p}){const[w,v]=et.useState({x:1,y:0,width:0,height:0}),b=Ee(["react-flow__edge-textwrapper",g]),T=et.useRef(null);return et.useEffect(()=>{if(T.current){const A=T.current.getBBox();v({x:A.x,y:A.y,width:A.width,height:A.height})}},[e]),e?tt.jsxs("g",{transform:`translate(${n-w.width/2} ${t-w.height/2})`,className:b,visibility:w.width?"visible":"hidden",...p,children:[a&&tt.jsx("rect",{width:w.width+2*c[0],x:-c[0],y:-c[1],height:w.height+2*c[1],className:"react-flow__edge-textbg",style:l,rx:d,ry:d}),tt.jsx("text",{className:"react-flow__edge-text",y:w.height/2,dy:"0.3em",ref:T,style:r,children:e}),h]}):null}oA.displayName="EdgeText";const ZR=et.memo(oA);function bh({path:n,labelX:t,labelY:e,label:r,labelStyle:a,labelShowBg:l,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:h,interactionWidth:g=20,...p}){return tt.jsxs(tt.Fragment,{children:[tt.jsx("path",{...p,d:n,fill:"none",className:Ee(["react-flow__edge-path",p.className])}),g&&tt.jsx("path",{d:n,fill:"none",strokeOpacity:0,strokeWidth:g,className:"react-flow__edge-interaction"}),r&&ir(t)&&ir(e)?tt.jsx(ZR,{x:t,y:e,label:r,labelStyle:a,labelShowBg:l,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:h}):null]})}function A1({pos:n,x1:t,y1:e,x2:r,y2:a}){return n===Et.Left||n===Et.Right?[.5*(t+r),e]:[t,.5*(e+a)]}function lA({sourceX:n,sourceY:t,sourcePosition:e=Et.Bottom,targetX:r,targetY:a,targetPosition:l=Et.Top}){const[c,d]=A1({pos:e,x1:n,y1:t,x2:r,y2:a}),[h,g]=A1({pos:l,x1:r,y1:a,x2:n,y2:t}),[p,w,v,b]=RT({sourceX:n,sourceY:t,targetX:r,targetY:a,sourceControlX:c,sourceControlY:d,targetControlX:h,targetControlY:g});return[`M${n},${t} C${c},${d} ${h},${g} ${r},${a}`,p,w,v,b]}function uA(n){return et.memo(({id:t,sourceX:e,sourceY:r,targetX:a,targetY:l,sourcePosition:c,targetPosition:d,label:h,labelStyle:g,labelShowBg:p,labelBgStyle:w,labelBgPadding:v,labelBgBorderRadius:b,style:T,markerEnd:A,markerStart:C,interactionWidth:D})=>{const[L,N,O]=lA({sourceX:e,sourceY:r,sourcePosition:c,targetX:a,targetY:l,targetPosition:d}),B=n.isInternal?void 0:t;return tt.jsx(bh,{id:B,path:L,labelX:N,labelY:O,label:h,labelStyle:g,labelShowBg:p,labelBgStyle:w,labelBgPadding:v,labelBgBorderRadius:b,style:T,markerEnd:A,markerStart:C,interactionWidth:D})})}const QR=uA({isInternal:!1}),cA=uA({isInternal:!0});QR.displayName="SimpleBezierEdge";cA.displayName="SimpleBezierEdgeInternal";function fA(n){return et.memo(({id:t,sourceX:e,sourceY:r,targetX:a,targetY:l,label:c,labelStyle:d,labelShowBg:h,labelBgStyle:g,labelBgPadding:p,labelBgBorderRadius:w,style:v,sourcePosition:b=Et.Bottom,targetPosition:T=Et.Top,markerEnd:A,markerStart:C,pathOptions:D,interactionWidth:L})=>{const[N,O,B]=np({sourceX:e,sourceY:r,sourcePosition:b,targetX:a,targetY:l,targetPosition:T,borderRadius:D==null?void 0:D.borderRadius,offset:D==null?void 0:D.offset,stepPosition:D==null?void 0:D.stepPosition}),_=n.isInternal?void 0:t;return tt.jsx(bh,{id:_,path:N,labelX:O,labelY:B,label:c,labelStyle:d,labelShowBg:h,labelBgStyle:g,labelBgPadding:p,labelBgBorderRadius:w,style:v,markerEnd:A,markerStart:C,interactionWidth:L})})}const dA=fA({isInternal:!1}),hA=fA({isInternal:!0});dA.displayName="SmoothStepEdge";hA.displayName="SmoothStepEdgeInternal";function gA(n){return et.memo(({id:t,...e})=>{var a;const r=n.isInternal?void 0:t;return tt.jsx(dA,{...e,id:r,pathOptions:et.useMemo(()=>{var l;return{borderRadius:0,offset:(l=e.pathOptions)==null?void 0:l.offset}},[(a=e.pathOptions)==null?void 0:a.offset])})})}const WR=gA({isInternal:!1}),mA=gA({isInternal:!0});WR.displayName="StepEdge";mA.displayName="StepEdgeInternal";function yA(n){return et.memo(({id:t,sourceX:e,sourceY:r,targetX:a,targetY:l,label:c,labelStyle:d,labelShowBg:h,labelBgStyle:g,labelBgPadding:p,labelBgBorderRadius:w,style:v,markerEnd:b,markerStart:T,interactionWidth:A})=>{const[C,D,L]=LT({sourceX:e,sourceY:r,targetX:a,targetY:l}),N=n.isInternal?void 0:t;return tt.jsx(bh,{id:N,path:C,labelX:D,labelY:L,label:c,labelStyle:d,labelShowBg:h,labelBgStyle:g,labelBgPadding:p,labelBgBorderRadius:w,style:v,markerEnd:b,markerStart:T,interactionWidth:A})})}const tB=yA({isInternal:!1}),pA=yA({isInternal:!0});tB.displayName="StraightEdge";pA.displayName="StraightEdgeInternal";function vA(n){return et.memo(({id:t,sourceX:e,sourceY:r,targetX:a,targetY:l,sourcePosition:c=Et.Bottom,targetPosition:d=Et.Top,label:h,labelStyle:g,labelShowBg:p,labelBgStyle:w,labelBgPadding:v,labelBgBorderRadius:b,style:T,markerEnd:A,markerStart:C,pathOptions:D,interactionWidth:L})=>{const[N,O,B]=BT({sourceX:e,sourceY:r,sourcePosition:c,targetX:a,targetY:l,targetPosition:d,curvature:D==null?void 0:D.curvature}),_=n.isInternal?void 0:t;return tt.jsx(bh,{id:_,path:N,labelX:O,labelY:B,label:h,labelStyle:g,labelShowBg:p,labelBgStyle:w,labelBgPadding:v,labelBgBorderRadius:b,style:T,markerEnd:A,markerStart:C,interactionWidth:L})})}const eB=vA({isInternal:!1}),wA=vA({isInternal:!0});eB.displayName="BezierEdge";wA.displayName="BezierEdgeInternal";const E1={default:wA,straight:pA,step:mA,smoothstep:hA,simplebezier:cA},N1={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},nB=(n,t,e)=>e===Et.Left?n-t:e===Et.Right?n+t:n,rB=(n,t,e)=>e===Et.Top?n-t:e===Et.Bottom?n+t:n,C1="react-flow__edgeupdater";function k1({position:n,centerX:t,centerY:e,radius:r=10,onMouseDown:a,onMouseEnter:l,onMouseOut:c,type:d}){return tt.jsx("circle",{onMouseDown:a,onMouseEnter:l,onMouseOut:c,className:Ee([C1,`${C1}-${d}`]),cx:nB(t,r,n),cy:rB(e,r,n),r,stroke:"transparent",fill:"transparent"})}function iB({isReconnectable:n,reconnectRadius:t,edge:e,sourceX:r,sourceY:a,targetX:l,targetY:c,sourcePosition:d,targetPosition:h,onReconnect:g,onReconnectStart:p,onReconnectEnd:w,setReconnecting:v,setUpdateHover:b}){const T=oe(),A=(O,B)=>{if(O.button!==0)return;const{autoPanOnConnect:_,domNode:P,isValidConnection:V,connectionMode:W,connectionRadius:ft,lib:nt,onConnectStart:rt,onConnectEnd:ot,cancelConnection:M,nodeLookup:Y,rfId:I,panBy:z,updateConnection:K}=T.getState(),J=B.type==="target",k=(it,lt)=>{v(!1),w==null||w(it,e,B.type,lt)},U=it=>g==null?void 0:g(e,it),Z=(it,lt)=>{v(!0),p==null||p(O,e,B.type),rt==null||rt(it,lt)};sp.onPointerDown(O.nativeEvent,{autoPanOnConnect:_,connectionMode:W,connectionRadius:ft,domNode:P,handleId:B.id,nodeId:B.nodeId,nodeLookup:Y,isTarget:J,edgeUpdaterType:B.type,lib:nt,flowId:I,cancelConnection:M,panBy:z,isValidConnection:V,onConnect:U,onConnectStart:Z,onConnectEnd:ot,onReconnectEnd:k,updateConnection:K,getTransform:()=>T.getState().transform,getFromHandle:()=>T.getState().connection.fromHandle,dragThreshold:T.getState().connectionDragThreshold})},C=O=>A(O,{nodeId:e.target,id:e.targetHandle??null,type:"target"}),D=O=>A(O,{nodeId:e.source,id:e.sourceHandle??null,type:"source"}),L=()=>b(!0),N=()=>b(!1);return tt.jsxs(tt.Fragment,{children:[(n===!0||n==="source")&&tt.jsx(k1,{position:d,centerX:r,centerY:a,radius:t,onMouseDown:C,onMouseEnter:L,onMouseOut:N,type:"source"}),(n===!0||n==="target")&&tt.jsx(k1,{position:h,centerX:l,centerY:c,radius:t,onMouseDown:D,onMouseEnter:L,onMouseOut:N,type:"target"})]})}function sB({id:n,edgesFocusable:t,edgesReconnectable:e,elementsSelectable:r,onClick:a,onDoubleClick:l,onContextMenu:c,onMouseEnter:d,onMouseMove:h,onMouseLeave:g,reconnectRadius:p,onReconnect:w,onReconnectStart:v,onReconnectEnd:b,rfId:T,edgeTypes:A,noPanClassName:C,onError:D,disableKeyboardA11y:L}){let N=Vt(Nt=>Nt.edgeLookup.get(n));const O=Vt(Nt=>Nt.defaultEdgeOptions);N=O?{...O,...N}:N;let B=N.type||"default",_=(A==null?void 0:A[B])||E1[B];_===void 0&&(D==null||D("011",Or.error011(B)),B="default",_=(A==null?void 0:A.default)||E1.default);const P=!!(N.focusable||t&&typeof N.focusable>"u"),V=typeof w<"u"&&(N.reconnectable||e&&typeof N.reconnectable>"u"),W=!!(N.selectable||r&&typeof N.selectable>"u"),ft=et.useRef(null),[nt,rt]=et.useState(!1),[ot,M]=et.useState(!1),Y=oe(),{zIndex:I,sourceX:z,sourceY:K,targetX:J,targetY:k,sourcePosition:U,targetPosition:Z}=Vt(et.useCallback(Nt=>{const Ot=Nt.nodeLookup.get(N.source),kt=Nt.nodeLookup.get(N.target);if(!Ot||!kt)return{zIndex:N.zIndex,...N1};const Zt=FO({id:n,sourceNode:Ot,targetNode:kt,sourceHandle:N.sourceHandle||null,targetHandle:N.targetHandle||null,connectionMode:Nt.connectionMode,onError:D});return{zIndex:$O({selected:N.selected,zIndex:N.zIndex,sourceNode:Ot,targetNode:kt,elevateOnSelect:Nt.elevateEdgesOnSelect}),...Zt||N1}},[N.source,N.target,N.sourceHandle,N.targetHandle,N.selected,N.zIndex]),fe),it=et.useMemo(()=>N.markerStart?`url('#${rp(N.markerStart,T)}')`:void 0,[N.markerStart,T]),lt=et.useMemo(()=>N.markerEnd?`url('#${rp(N.markerEnd,T)}')`:void 0,[N.markerEnd,T]);if(N.hidden||z===null||K===null||J===null||k===null)return null;const yt=Nt=>{var le;const{addSelectedEdges:Ot,unselectNodesAndEdges:kt,multiSelectionActive:Zt}=Y.getState();W&&(Y.setState({nodesSelectionActive:!1}),N.selected&&Zt?(kt({nodes:[],edges:[N]}),(le=ft.current)==null||le.blur()):Ot([n])),a&&a(Nt,N)},dt=l?Nt=>{l(Nt,{...N})}:void 0,pt=c?Nt=>{c(Nt,{...N})}:void 0,mt=d?Nt=>{d(Nt,{...N})}:void 0,St=h?Nt=>{h(Nt,{...N})}:void 0,Jt=g?Nt=>{g(Nt,{...N})}:void 0,Rt=Nt=>{var Ot;if(!L&&wT.includes(Nt.key)&&W){const{unselectNodesAndEdges:kt,addSelectedEdges:Zt}=Y.getState();Nt.key==="Escape"?((Ot=ft.current)==null||Ot.blur(),kt({edges:[N]})):Zt([n])}};return tt.jsx("svg",{style:{zIndex:I},children:tt.jsxs("g",{className:Ee(["react-flow__edge",`react-flow__edge-${B}`,N.className,C,{selected:N.selected,animated:N.animated,inactive:!W&&!a,updating:nt,selectable:W}]),onClick:yt,onDoubleClick:dt,onContextMenu:pt,onMouseEnter:mt,onMouseMove:St,onMouseLeave:Jt,onKeyDown:P?Rt:void 0,tabIndex:P?0:void 0,role:N.ariaRole??(P?"group":"img"),"aria-roledescription":"edge","data-id":n,"data-testid":`rf__edge-${n}`,"aria-label":N.ariaLabel===null?void 0:N.ariaLabel||`Edge from ${N.source} to ${N.target}`,"aria-describedby":P?`${FT}-${T}`:void 0,ref:ft,...N.domAttributes,children:[!ot&&tt.jsx(_,{id:n,source:N.source,target:N.target,type:N.type,selected:N.selected,animated:N.animated,selectable:W,deletable:N.deletable??!0,label:N.label,labelStyle:N.labelStyle,labelShowBg:N.labelShowBg,labelBgStyle:N.labelBgStyle,labelBgPadding:N.labelBgPadding,labelBgBorderRadius:N.labelBgBorderRadius,sourceX:z,sourceY:K,targetX:J,targetY:k,sourcePosition:U,targetPosition:Z,data:N.data,style:N.style,sourceHandleId:N.sourceHandle,targetHandleId:N.targetHandle,markerStart:it,markerEnd:lt,pathOptions:"pathOptions"in N?N.pathOptions:void 0,interactionWidth:N.interactionWidth}),V&&tt.jsx(iB,{edge:N,isReconnectable:V,reconnectRadius:p,onReconnect:w,onReconnectStart:v,onReconnectEnd:b,sourceX:z,sourceY:K,targetX:J,targetY:k,sourcePosition:U,targetPosition:Z,setUpdateHover:rt,setReconnecting:M})]})})}const aB=n=>({edgesFocusable:n.edgesFocusable,edgesReconnectable:n.edgesReconnectable,elementsSelectable:n.elementsSelectable,connectionMode:n.connectionMode,onError:n.onError});function bA({defaultMarkerColor:n,onlyRenderVisibleElements:t,rfId:e,edgeTypes:r,noPanClassName:a,onReconnect:l,onEdgeContextMenu:c,onEdgeMouseEnter:d,onEdgeMouseMove:h,onEdgeMouseLeave:g,onEdgeClick:p,reconnectRadius:w,onEdgeDoubleClick:v,onReconnectStart:b,onReconnectEnd:T,disableKeyboardA11y:A}){const{edgesFocusable:C,edgesReconnectable:D,elementsSelectable:L,onError:N}=Vt(aB,fe),O=jR(t);return tt.jsxs("div",{className:"react-flow__edges",children:[tt.jsx(FR,{defaultColor:n,rfId:e}),O.map(B=>tt.jsx(sB,{id:B,edgesFocusable:C,edgesReconnectable:D,elementsSelectable:L,noPanClassName:a,onReconnect:l,onContextMenu:c,onMouseEnter:d,onMouseMove:h,onMouseLeave:g,onClick:p,reconnectRadius:w,onDoubleClick:v,onReconnectStart:b,onReconnectEnd:T,rfId:e,onError:N,edgeTypes:r,disableKeyboardA11y:A},B))]})}bA.displayName="EdgeRenderer";const oB=et.memo(bA),lB=n=>`translate(${n.transform[0]}px,${n.transform[1]}px) scale(${n.transform[2]})`;function uB({children:n}){const t=Vt(lB);return tt.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:n})}function cB(n){const t=Hp(),e=et.useRef(!1);et.useEffect(()=>{!e.current&&t.viewportInitialized&&n&&(setTimeout(()=>n(t),1),e.current=!0)},[n,t.viewportInitialized])}const fB=n=>{var t;return(t=n.panZoom)==null?void 0:t.syncViewport};function dB(n){const t=Vt(fB),e=oe();return et.useEffect(()=>{n&&(t==null||t(n),e.setState({transform:[n.x,n.y,n.zoom]}))},[n,t]),null}function hB(n){return n.connection.inProgress?{...n.connection,to:bc(n.connection.to,n.transform)}:{...n.connection}}function gB(n){return hB}function mB(n){const t=gB();return Vt(t,fe)}const yB=n=>({nodesConnectable:n.nodesConnectable,isValid:n.connection.isValid,inProgress:n.connection.inProgress,width:n.width,height:n.height});function pB({containerStyle:n,style:t,type:e,component:r}){const{nodesConnectable:a,width:l,height:c,isValid:d,inProgress:h}=Vt(yB,fe);return!(l&&a&&h)?null:tt.jsx("svg",{style:n,width:l,height:c,className:"react-flow__connectionline react-flow__container",children:tt.jsx("g",{className:Ee(["react-flow__connection",xT(d)]),children:tt.jsx(SA,{style:t,type:e,CustomComponent:r,isValid:d})})})}const SA=({style:n,type:t=la.Bezier,CustomComponent:e,isValid:r})=>{const{inProgress:a,from:l,fromNode:c,fromHandle:d,fromPosition:h,to:g,toNode:p,toHandle:w,toPosition:v}=mB();if(!a)return;if(e)return tt.jsx(e,{connectionLineType:t,connectionLineStyle:n,fromNode:c,fromHandle:d,fromX:l.x,fromY:l.y,toX:g.x,toY:g.y,fromPosition:h,toPosition:v,connectionStatus:xT(r),toNode:p,toHandle:w});let b="";const T={sourceX:l.x,sourceY:l.y,sourcePosition:h,targetX:g.x,targetY:g.y,targetPosition:v};switch(t){case la.Bezier:[b]=BT(T);break;case la.SimpleBezier:[b]=lA(T);break;case la.Step:[b]=np({...T,borderRadius:0});break;case la.SmoothStep:[b]=np(T);break;default:[b]=LT(T)}return tt.jsx("path",{d:b,fill:"none",className:"react-flow__connection-path",style:n})};SA.displayName="ConnectionLine";const vB={};function D1(n=vB){et.useRef(n),oe(),et.useEffect(()=>{},[n])}function wB(){oe(),et.useRef(!1),et.useEffect(()=>{},[])}function xA({nodeTypes:n,edgeTypes:t,onInit:e,onNodeClick:r,onEdgeClick:a,onNodeDoubleClick:l,onEdgeDoubleClick:c,onNodeMouseEnter:d,onNodeMouseMove:h,onNodeMouseLeave:g,onNodeContextMenu:p,onSelectionContextMenu:w,onSelectionStart:v,onSelectionEnd:b,connectionLineType:T,connectionLineStyle:A,connectionLineComponent:C,connectionLineContainerStyle:D,selectionKeyCode:L,selectionOnDrag:N,selectionMode:O,multiSelectionKeyCode:B,panActivationKeyCode:_,zoomActivationKeyCode:P,deleteKeyCode:V,onlyRenderVisibleElements:W,elementsSelectable:ft,defaultViewport:nt,translateExtent:rt,minZoom:ot,maxZoom:M,preventScrolling:Y,defaultMarkerColor:I,zoomOnScroll:z,zoomOnPinch:K,panOnScroll:J,panOnScrollSpeed:k,panOnScrollMode:U,zoomOnDoubleClick:Z,panOnDrag:it,onPaneClick:lt,onPaneMouseEnter:yt,onPaneMouseMove:dt,onPaneMouseLeave:pt,onPaneScroll:mt,onPaneContextMenu:St,paneClickDistance:Jt,nodeClickDistance:Rt,onEdgeContextMenu:Nt,onEdgeMouseEnter:Ot,onEdgeMouseMove:kt,onEdgeMouseLeave:Zt,reconnectRadius:le,onReconnect:be,onReconnectStart:Is,onReconnectEnd:ya,noDragClassName:pa,noWheelClassName:Rr,noPanClassName:va,disableKeyboardA11y:Os,nodeExtent:xl,rfId:io,viewport:bn,onViewportChange:Ne}){return D1(n),D1(t),wB(),cB(e),dB(bn),tt.jsx(LR,{onPaneClick:lt,onPaneMouseEnter:yt,onPaneMouseMove:dt,onPaneMouseLeave:pt,onPaneContextMenu:St,onPaneScroll:mt,paneClickDistance:Jt,deleteKeyCode:V,selectionKeyCode:L,selectionOnDrag:N,selectionMode:O,onSelectionStart:v,onSelectionEnd:b,multiSelectionKeyCode:B,panActivationKeyCode:_,zoomActivationKeyCode:P,elementsSelectable:ft,zoomOnScroll:z,zoomOnPinch:K,zoomOnDoubleClick:Z,panOnScroll:J,panOnScrollSpeed:k,panOnScrollMode:U,panOnDrag:it,defaultViewport:nt,translateExtent:rt,minZoom:ot,maxZoom:M,onSelectionContextMenu:w,preventScrolling:Y,noDragClassName:pa,noWheelClassName:Rr,noPanClassName:va,disableKeyboardA11y:Os,onViewportChange:Ne,isControlledViewport:!!bn,children:tt.jsxs(uB,{children:[tt.jsx(oB,{edgeTypes:t,onEdgeClick:a,onEdgeDoubleClick:c,onReconnect:be,onReconnectStart:Is,onReconnectEnd:ya,onlyRenderVisibleElements:W,onEdgeContextMenu:Nt,onEdgeMouseEnter:Ot,onEdgeMouseMove:kt,onEdgeMouseLeave:Zt,reconnectRadius:le,defaultMarkerColor:I,noPanClassName:va,disableKeyboardA11y:Os,rfId:io}),tt.jsx(pB,{style:A,type:T,component:C,containerStyle:D}),tt.jsx("div",{className:"react-flow__edgelabel-renderer"}),tt.jsx(VR,{nodeTypes:n,onNodeClick:r,onNodeDoubleClick:l,onNodeMouseEnter:d,onNodeMouseMove:h,onNodeMouseLeave:g,onNodeContextMenu:p,nodeClickDistance:Rt,onlyRenderVisibleElements:W,noPanClassName:va,noDragClassName:pa,disableKeyboardA11y:Os,nodeExtent:xl,rfId:io}),tt.jsx("div",{className:"react-flow__viewport-portal"})]})})}xA.displayName="GraphView";const bB=et.memo(xA),I1=({nodes:n,edges:t,defaultNodes:e,defaultEdges:r,width:a,height:l,fitView:c,fitViewOptions:d,minZoom:h=.5,maxZoom:g=2,nodeOrigin:p,nodeExtent:w}={})=>{const v=new Map,b=new Map,T=new Map,A=new Map,C=r??t??[],D=e??n??[],L=p??[0,0],N=w??ac;UT(T,A,C);const O=ip(D,v,b,{nodeOrigin:L,nodeExtent:N,elevateNodesOnSelect:!1});let B=[0,0,1];if(c&&a&&l){const _=wc(v,{filter:ft=>!!((ft.width||ft.initialWidth)&&(ft.height||ft.initialHeight))}),{x:P,y:V,zoom:W}=_p(_,a,l,h,g,(d==null?void 0:d.padding)??.1);B=[P,V,W]}return{rfId:"1",width:0,height:0,transform:B,nodes:D,nodesInitialized:O,nodeLookup:v,parentLookup:b,edges:C,edgeLookup:A,connectionLookup:T,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:e!==void 0,hasDefaultEdges:r!==void 0,panZoom:null,minZoom:h,maxZoom:g,translateExtent:ac,nodeExtent:N,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:pl.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:L,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:c??!1,fitViewOptions:d,fitViewResolver:null,connection:{...ST},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:LO,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:bT}},SB=({nodes:n,edges:t,defaultNodes:e,defaultEdges:r,width:a,height:l,fitView:c,fitViewOptions:d,minZoom:h,maxZoom:g,nodeOrigin:p,nodeExtent:w})=>qM((v,b)=>{async function T(){const{nodeLookup:A,panZoom:C,fitViewOptions:D,fitViewResolver:L,width:N,height:O,minZoom:B,maxZoom:_}=b();C&&(await BO({nodes:A,width:N,height:O,panZoom:C,minZoom:B,maxZoom:_},D),L==null||L.resolve(!0),v({fitViewResolver:null}))}return{...I1({nodes:n,edges:t,width:a,height:l,fitView:c,fitViewOptions:d,minZoom:h,maxZoom:g,nodeOrigin:p,nodeExtent:w,defaultNodes:e,defaultEdges:r}),setNodes:A=>{const{nodeLookup:C,parentLookup:D,nodeOrigin:L,elevateNodesOnSelect:N,fitViewQueued:O}=b(),B=ip(A,C,D,{nodeOrigin:L,nodeExtent:w,elevateNodesOnSelect:N,checkEquality:!0});O&&B?(T(),v({nodes:A,nodesInitialized:B,fitViewQueued:!1,fitViewOptions:void 0})):v({nodes:A,nodesInitialized:B})},setEdges:A=>{const{connectionLookup:C,edgeLookup:D}=b();UT(C,D,A),v({edges:A})},setDefaultNodesAndEdges:(A,C)=>{if(A){const{setNodes:D}=b();D(A),v({hasDefaultNodes:!0})}if(C){const{setEdges:D}=b();D(C),v({hasDefaultEdges:!0})}},updateNodeInternals:A=>{const{triggerNodeChanges:C,nodeLookup:D,parentLookup:L,domNode:N,nodeOrigin:O,nodeExtent:B,debug:_,fitViewQueued:P}=b(),{changes:V,updatedInternals:W}=nM(A,D,L,N,O,B);W&&(WO(D,L,{nodeOrigin:O,nodeExtent:B}),P?(T(),v({fitViewQueued:!1,fitViewOptions:void 0})):v({}),(V==null?void 0:V.length)>0&&(_&&console.log("React Flow: trigger node changes",V),C==null||C(V)))},updateNodePositions:(A,C=!1)=>{const D=[],L=[],{nodeLookup:N,triggerNodeChanges:O}=b();for(const[B,_]of A){const P=N.get(B),V=!!(P!=null&&P.expandParent&&(P!=null&&P.parentId)&&(_!=null&&_.position)),W={id:B,type:"position",position:V?{x:Math.max(0,_.position.x),y:Math.max(0,_.position.y)}:_.position,dragging:C};V&&P.parentId&&D.push({id:B,parentId:P.parentId,rect:{..._.internals.positionAbsolute,width:_.measured.width??0,height:_.measured.height??0}}),L.push(W)}if(D.length>0){const{parentLookup:B,nodeOrigin:_}=b(),P=$p(D,N,B,_);L.push(...P)}O(L)},triggerNodeChanges:A=>{const{onNodesChange:C,setNodes:D,nodes:L,hasDefaultNodes:N,debug:O}=b();if(A!=null&&A.length){if(N){const B=aR(A,L);D(B)}O&&console.log("React Flow: trigger node changes",A),C==null||C(A)}},triggerEdgeChanges:A=>{const{onEdgesChange:C,setEdges:D,edges:L,hasDefaultEdges:N,debug:O}=b();if(A!=null&&A.length){if(N){const B=oR(A,L);D(B)}O&&console.log("React Flow: trigger edge changes",A),C==null||C(A)}},addSelectedNodes:A=>{const{multiSelectionActive:C,edgeLookup:D,nodeLookup:L,triggerNodeChanges:N,triggerEdgeChanges:O}=b();if(C){const B=A.map(_=>Ha(_,!0));N(B);return}N(Wo(L,new Set([...A]),!0)),O(Wo(D))},addSelectedEdges:A=>{const{multiSelectionActive:C,edgeLookup:D,nodeLookup:L,triggerNodeChanges:N,triggerEdgeChanges:O}=b();if(C){const B=A.map(_=>Ha(_,!0));O(B);return}O(Wo(D,new Set([...A]))),N(Wo(L,new Set,!0))},unselectNodesAndEdges:({nodes:A,edges:C}={})=>{const{edges:D,nodes:L,nodeLookup:N,triggerNodeChanges:O,triggerEdgeChanges:B}=b(),_=A||L,P=C||D,V=_.map(ft=>{const nt=N.get(ft.id);return nt&&(nt.selected=!1),Ha(ft.id,!1)}),W=P.map(ft=>Ha(ft.id,!1));O(V),B(W)},setMinZoom:A=>{const{panZoom:C,maxZoom:D}=b();C==null||C.setScaleExtent([A,D]),v({minZoom:A})},setMaxZoom:A=>{const{panZoom:C,minZoom:D}=b();C==null||C.setScaleExtent([D,A]),v({maxZoom:A})},setTranslateExtent:A=>{var C;(C=b().panZoom)==null||C.setTranslateExtent(A),v({translateExtent:A})},setPaneClickDistance:A=>{var C;(C=b().panZoom)==null||C.setClickDistance(A)},resetSelectedElements:()=>{const{edges:A,nodes:C,triggerNodeChanges:D,triggerEdgeChanges:L,elementsSelectable:N}=b();if(!N)return;const O=C.reduce((_,P)=>P.selected?[..._,Ha(P.id,!1)]:_,[]),B=A.reduce((_,P)=>P.selected?[..._,Ha(P.id,!1)]:_,[]);D(O),L(B)},setNodeExtent:A=>{const{nodes:C,nodeLookup:D,parentLookup:L,nodeOrigin:N,elevateNodesOnSelect:O,nodeExtent:B}=b();A[0][0]===B[0][0]&&A[0][1]===B[0][1]&&A[1][0]===B[1][0]&&A[1][1]===B[1][1]||(ip(C,D,L,{nodeOrigin:N,nodeExtent:A,elevateNodesOnSelect:O,checkEquality:!1}),v({nodeExtent:A}))},panBy:A=>{const{transform:C,width:D,height:L,panZoom:N,translateExtent:O}=b();return rM({delta:A,panZoom:N,transform:C,translateExtent:O,width:D,height:L})},setCenter:async(A,C,D)=>{const{width:L,height:N,maxZoom:O,panZoom:B}=b();if(!B)return Promise.resolve(!1);const _=typeof(D==null?void 0:D.zoom)<"u"?D.zoom:O;return await B.setViewport({x:L/2-A*_,y:N/2-C*_,zoom:_},{duration:D==null?void 0:D.duration,ease:D==null?void 0:D.ease,interpolate:D==null?void 0:D.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{v({connection:{...ST}})},updateConnection:A=>{v({connection:A})},reset:()=>v({...I1()})}},Object.is);function xB({initialNodes:n,initialEdges:t,defaultNodes:e,defaultEdges:r,initialWidth:a,initialHeight:l,initialMinZoom:c,initialMaxZoom:d,initialFitViewOptions:h,fitView:g,nodeOrigin:p,nodeExtent:w,children:v}){const[b]=et.useState(()=>SB({nodes:n,edges:t,defaultNodes:e,defaultEdges:r,width:a,height:l,fitView:g,minZoom:c,maxZoom:d,fitViewOptions:h,nodeOrigin:p,nodeExtent:w}));return tt.jsx(PM,{value:b,children:tt.jsx(fR,{children:v})})}function TB({children:n,nodes:t,edges:e,defaultNodes:r,defaultEdges:a,width:l,height:c,fitView:d,fitViewOptions:h,minZoom:g,maxZoom:p,nodeOrigin:w,nodeExtent:v}){return et.useContext(ph)?tt.jsx(tt.Fragment,{children:n}):tt.jsx(xB,{initialNodes:t,initialEdges:e,defaultNodes:r,defaultEdges:a,initialWidth:l,initialHeight:c,fitView:d,initialFitViewOptions:h,initialMinZoom:g,initialMaxZoom:p,nodeOrigin:w,nodeExtent:v,children:n})}const AB={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function EB({nodes:n,edges:t,defaultNodes:e,defaultEdges:r,className:a,nodeTypes:l,edgeTypes:c,onNodeClick:d,onEdgeClick:h,onInit:g,onMove:p,onMoveStart:w,onMoveEnd:v,onConnect:b,onConnectStart:T,onConnectEnd:A,onClickConnectStart:C,onClickConnectEnd:D,onNodeMouseEnter:L,onNodeMouseMove:N,onNodeMouseLeave:O,onNodeContextMenu:B,onNodeDoubleClick:_,onNodeDragStart:P,onNodeDrag:V,onNodeDragStop:W,onNodesDelete:ft,onEdgesDelete:nt,onDelete:rt,onSelectionChange:ot,onSelectionDragStart:M,onSelectionDrag:Y,onSelectionDragStop:I,onSelectionContextMenu:z,onSelectionStart:K,onSelectionEnd:J,onBeforeDelete:k,connectionMode:U,connectionLineType:Z=la.Bezier,connectionLineStyle:it,connectionLineComponent:lt,connectionLineContainerStyle:yt,deleteKeyCode:dt="Backspace",selectionKeyCode:pt="Shift",selectionOnDrag:mt=!1,selectionMode:St=oc.Full,panActivationKeyCode:Jt="Space",multiSelectionKeyCode:Rt=Zd()?"Meta":"Control",zoomActivationKeyCode:Nt=Zd()?"Meta":"Control",snapToGrid:Ot,snapGrid:kt,onlyRenderVisibleElements:Zt=!1,selectNodesOnDrag:le,nodesDraggable:be,autoPanOnNodeFocus:Is,nodesConnectable:ya,nodesFocusable:pa,nodeOrigin:Rr=ZT,edgesFocusable:va,edgesReconnectable:Os,elementsSelectable:xl=!0,defaultViewport:io=WM,minZoom:bn=.5,maxZoom:Ne=2,translateExtent:Vn=ac,preventScrolling:Ke=!0,nodeExtent:Tl,defaultMarkerColor:Sh="#b1b1b7",zoomOnScroll:xh=!0,zoomOnPinch:so=!0,panOnScroll:ao=!1,panOnScrollSpeed:Br=.5,panOnScrollMode:oo=Xa.Free,zoomOnDoubleClick:wa=!0,panOnDrag:Th=!0,onPaneClick:Sc,onPaneMouseEnter:xc,onPaneMouseMove:Al,onPaneMouseLeave:ba,onPaneScroll:Ah,onPaneContextMenu:Tc,paneClickDistance:El=0,nodeClickDistance:Nl=0,children:Cl,onReconnect:Ac,onReconnectStart:Eh,onReconnectEnd:lr,onEdgeContextMenu:Oe,onEdgeDoubleClick:Je,onEdgeMouseEnter:Ms,onEdgeMouseMove:kl,onEdgeMouseLeave:Nh,reconnectRadius:Ch=10,onNodesChange:Ec,onEdgesChange:Sa,noDragClassName:Dl="nodrag",noWheelClassName:Rs="nowheel",noPanClassName:zr="nopan",fitView:Bs,fitViewOptions:Lr,connectOnClick:Se,attributionPosition:Nc,proOptions:Cc,defaultEdgeOptions:_r,elevateNodesOnSelect:zs,elevateEdgesOnSelect:kh,disableKeyboardA11y:Il=!1,autoPanOnConnect:kc,autoPanOnNodeDrag:Dh,autoPanSpeed:lo,connectionRadius:uo,isValidConnection:jn,onError:Ol,style:Dc,id:Ur,nodeDragThreshold:Ml,connectionDragThreshold:Rl,viewport:Ih,onViewportChange:Ic,width:Xe,height:Oc,colorMode:Oh="light",debug:co,onScroll:xa,ariaLabelConfig:fo,...Mh},Fe){const Ta=Ur||"1",Mc=rR(Oh),Bl=et.useCallback(qr=>{qr.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),xa==null||xa(qr)},[xa]);return tt.jsx("div",{"data-testid":"rf__wrapper",...Mh,onScroll:Bl,style:{...Dc,...AB},ref:Fe,className:Ee(["react-flow",a,Mc]),id:Ur,role:"application",children:tt.jsxs(TB,{nodes:n,edges:t,width:Xe,height:Oc,fitView:Bs,fitViewOptions:Lr,minZoom:bn,maxZoom:Ne,nodeOrigin:Rr,nodeExtent:Tl,children:[tt.jsx(bB,{onInit:g,onNodeClick:d,onEdgeClick:h,onNodeMouseEnter:L,onNodeMouseMove:N,onNodeMouseLeave:O,onNodeContextMenu:B,onNodeDoubleClick:_,nodeTypes:l,edgeTypes:c,connectionLineType:Z,connectionLineStyle:it,connectionLineComponent:lt,connectionLineContainerStyle:yt,selectionKeyCode:pt,selectionOnDrag:mt,selectionMode:St,deleteKeyCode:dt,multiSelectionKeyCode:Rt,panActivationKeyCode:Jt,zoomActivationKeyCode:Nt,onlyRenderVisibleElements:Zt,defaultViewport:io,translateExtent:Vn,minZoom:bn,maxZoom:Ne,preventScrolling:Ke,zoomOnScroll:xh,zoomOnPinch:so,zoomOnDoubleClick:wa,panOnScroll:ao,panOnScrollSpeed:Br,panOnScrollMode:oo,panOnDrag:Th,onPaneClick:Sc,onPaneMouseEnter:xc,onPaneMouseMove:Al,onPaneMouseLeave:ba,onPaneScroll:Ah,onPaneContextMenu:Tc,paneClickDistance:El,nodeClickDistance:Nl,onSelectionContextMenu:z,onSelectionStart:K,onSelectionEnd:J,onReconnect:Ac,onReconnectStart:Eh,onReconnectEnd:lr,onEdgeContextMenu:Oe,onEdgeDoubleClick:Je,onEdgeMouseEnter:Ms,onEdgeMouseMove:kl,onEdgeMouseLeave:Nh,reconnectRadius:Ch,defaultMarkerColor:Sh,noDragClassName:Dl,noWheelClassName:Rs,noPanClassName:zr,rfId:Ta,disableKeyboardA11y:Il,nodeExtent:Tl,viewport:Ih,onViewportChange:Ic}),tt.jsx(nR,{nodes:n,edges:t,defaultNodes:e,defaultEdges:r,onConnect:b,onConnectStart:T,onConnectEnd:A,onClickConnectStart:C,onClickConnectEnd:D,nodesDraggable:be,autoPanOnNodeFocus:Is,nodesConnectable:ya,nodesFocusable:pa,edgesFocusable:va,edgesReconnectable:Os,elementsSelectable:xl,elevateNodesOnSelect:zs,elevateEdgesOnSelect:kh,minZoom:bn,maxZoom:Ne,nodeExtent:Tl,onNodesChange:Ec,onEdgesChange:Sa,snapToGrid:Ot,snapGrid:kt,connectionMode:U,translateExtent:Vn,connectOnClick:Se,defaultEdgeOptions:_r,fitView:Bs,fitViewOptions:Lr,onNodesDelete:ft,onEdgesDelete:nt,onDelete:rt,onNodeDragStart:P,onNodeDrag:V,onNodeDragStop:W,onSelectionDrag:Y,onSelectionDragStart:M,onSelectionDragStop:I,onMove:p,onMoveStart:w,onMoveEnd:v,noPanClassName:zr,nodeOrigin:Rr,rfId:Ta,autoPanOnConnect:kc,autoPanOnNodeDrag:Dh,autoPanSpeed:lo,onError:Ol,connectionRadius:uo,isValidConnection:jn,selectNodesOnDrag:le,nodeDragThreshold:Ml,connectionDragThreshold:Rl,onBeforeDelete:k,paneClickDistance:El,debug:co,ariaLabelConfig:fo}),tt.jsx(QM,{onSelectionChange:ot}),Cl,tt.jsx(KM,{proOptions:Cc,position:Nc}),tt.jsx(YM,{rfId:Ta,disableKeyboardA11y:Il})]})})}var NB=WT(EB);function CB({dimensions:n,lineWidth:t,variant:e,className:r}){return tt.jsx("path",{strokeWidth:t,d:`M${n[0]/2} 0 V${n[1]} M0 ${n[1]/2} H${n[0]}`,className:Ee(["react-flow__background-pattern",e,r])})}function kB({radius:n,className:t}){return tt.jsx("circle",{cx:n,cy:n,r:n,className:Ee(["react-flow__background-pattern","dots",t])})}var ha;(function(n){n.Lines="lines",n.Dots="dots",n.Cross="cross"})(ha||(ha={}));const DB={[ha.Dots]:1,[ha.Lines]:1,[ha.Cross]:6},IB=n=>({transform:n.transform,patternId:`pattern-${n.rfId}`});function TA({id:n,variant:t=ha.Dots,gap:e=20,size:r,lineWidth:a=1,offset:l=0,color:c,bgColor:d,style:h,className:g,patternClassName:p}){const w=et.useRef(null),{transform:v,patternId:b}=Vt(IB,fe),T=r||DB[t],A=t===ha.Dots,C=t===ha.Cross,D=Array.isArray(e)?e:[e,e],L=[D[0]*v[2]||1,D[1]*v[2]||1],N=T*v[2],O=Array.isArray(l)?l:[l,l],B=C?[N,N]:L,_=[O[0]*v[2]||1+B[0]/2,O[1]*v[2]||1+B[1]/2],P=`${b}${n||""}`;return tt.jsxs("svg",{className:Ee(["react-flow__background",g]),style:{...h,...wh,"--xy-background-color-props":d,"--xy-background-pattern-color-props":c},ref:w,"data-testid":"rf__background",children:[tt.jsx("pattern",{id:P,x:v[0]%L[0],y:v[1]%L[1],width:L[0],height:L[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${_[0]},-${_[1]})`,children:A?tt.jsx(kB,{radius:N/2,className:p}):tt.jsx(CB,{dimensions:B,lineWidth:a,variant:t,className:p})}),tt.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${P})`})]})}TA.displayName="Background";const OB=et.memo(TA);function MB(){return tt.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:tt.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function RB(){return tt.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:tt.jsx("path",{d:"M0 0h32v4.2H0z"})})}function BB(){return tt.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:tt.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function zB(){return tt.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:tt.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function LB(){return tt.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:tt.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function ed({children:n,className:t,...e}){return tt.jsx("button",{type:"button",className:Ee(["react-flow__controls-button",t]),...e,children:n})}const _B=n=>({isInteractive:n.nodesDraggable||n.nodesConnectable||n.elementsSelectable,minZoomReached:n.transform[2]<=n.minZoom,maxZoomReached:n.transform[2]>=n.maxZoom,ariaLabelConfig:n.ariaLabelConfig});function AA({style:n,showZoom:t=!0,showFitView:e=!0,showInteractive:r=!0,fitViewOptions:a,onZoomIn:l,onZoomOut:c,onFitView:d,onInteractiveChange:h,className:g,children:p,position:w="bottom-left",orientation:v="vertical","aria-label":b}){const T=oe(),{isInteractive:A,minZoomReached:C,maxZoomReached:D,ariaLabelConfig:L}=Vt(_B,fe),{zoomIn:N,zoomOut:O,fitView:B}=Hp(),_=()=>{N(),l==null||l()},P=()=>{O(),c==null||c()},V=()=>{B(a),d==null||d()},W=()=>{T.setState({nodesDraggable:!A,nodesConnectable:!A,elementsSelectable:!A}),h==null||h(!A)},ft=v==="horizontal"?"horizontal":"vertical";return tt.jsxs(vh,{className:Ee(["react-flow__controls",ft,g]),position:w,style:n,"data-testid":"rf__controls","aria-label":b??L["controls.ariaLabel"],children:[t&&tt.jsxs(tt.Fragment,{children:[tt.jsx(ed,{onClick:_,className:"react-flow__controls-zoomin",title:L["controls.zoomIn.ariaLabel"],"aria-label":L["controls.zoomIn.ariaLabel"],disabled:D,children:tt.jsx(MB,{})}),tt.jsx(ed,{onClick:P,className:"react-flow__controls-zoomout",title:L["controls.zoomOut.ariaLabel"],"aria-label":L["controls.zoomOut.ariaLabel"],disabled:C,children:tt.jsx(RB,{})})]}),e&&tt.jsx(ed,{className:"react-flow__controls-fitview",onClick:V,title:L["controls.fitView.ariaLabel"],"aria-label":L["controls.fitView.ariaLabel"],children:tt.jsx(BB,{})}),r&&tt.jsx(ed,{className:"react-flow__controls-interactive",onClick:W,title:L["controls.interactive.ariaLabel"],"aria-label":L["controls.interactive.ariaLabel"],children:A?tt.jsx(LB,{}):tt.jsx(zB,{})}),p]})}AA.displayName="Controls";et.memo(AA);function UB({id:n,x:t,y:e,width:r,height:a,style:l,color:c,strokeColor:d,strokeWidth:h,className:g,borderRadius:p,shapeRendering:w,selected:v,onClick:b}){const{background:T,backgroundColor:A}=l||{},C=c||T||A;return tt.jsx("rect",{className:Ee(["react-flow__minimap-node",{selected:v},g]),x:t,y:e,rx:p,ry:p,width:r,height:a,style:{fill:C,stroke:d,strokeWidth:h},shapeRendering:w,onClick:b?D=>b(D,n):void 0})}const qB=et.memo(UB),PB=n=>n.nodes.map(t=>t.id),sy=n=>n instanceof Function?n:()=>n;function JB({nodeStrokeColor:n,nodeColor:t,nodeClassName:e="",nodeBorderRadius:r=5,nodeStrokeWidth:a,nodeComponent:l=qB,onClick:c}){const d=Vt(PB,fe),h=sy(t),g=sy(n),p=sy(e),w=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return tt.jsx(tt.Fragment,{children:d.map(v=>tt.jsx(HB,{id:v,nodeColorFunc:h,nodeStrokeColorFunc:g,nodeClassNameFunc:p,nodeBorderRadius:r,nodeStrokeWidth:a,NodeComponent:l,onClick:c,shapeRendering:w},v))})}function $B({id:n,nodeColorFunc:t,nodeStrokeColorFunc:e,nodeClassNameFunc:r,nodeBorderRadius:a,nodeStrokeWidth:l,shapeRendering:c,NodeComponent:d,onClick:h}){const{node:g,x:p,y:w,width:v,height:b}=Vt(T=>{const{internals:A}=T.nodeLookup.get(n),C=A.userNode,{x:D,y:L}=A.positionAbsolute,{width:N,height:O}=Ds(C);return{node:C,x:D,y:L,width:N,height:O}},fe);return!g||g.hidden||!kT(g)?null:tt.jsx(d,{x:p,y:w,width:v,height:b,style:g.style,selected:!!g.selected,className:r(g),color:t(g),borderRadius:a,strokeColor:e(g),strokeWidth:l,shapeRendering:c,onClick:h,id:g.id})}const HB=et.memo($B);var VB=et.memo(JB);const jB=200,YB=150,KB=n=>!n.hidden,GB=n=>{const t={x:-n.transform[0]/n.transform[2],y:-n.transform[1]/n.transform[2],width:n.width/n.transform[2],height:n.height/n.transform[2]};return{viewBB:t,boundingRect:n.nodeLookup.size>0?CT(wc(n.nodeLookup,{filter:KB}),t):t,rfId:n.rfId,panZoom:n.panZoom,translateExtent:n.translateExtent,flowWidth:n.width,flowHeight:n.height,ariaLabelConfig:n.ariaLabelConfig}},XB="react-flow__minimap-desc";function EA({style:n,className:t,nodeStrokeColor:e,nodeColor:r,nodeClassName:a="",nodeBorderRadius:l=5,nodeStrokeWidth:c,nodeComponent:d,bgColor:h,maskColor:g,maskStrokeColor:p,maskStrokeWidth:w,position:v="bottom-right",onClick:b,onNodeClick:T,pannable:A=!1,zoomable:C=!1,ariaLabel:D,inversePan:L,zoomStep:N=10,offsetScale:O=5}){const B=oe(),_=et.useRef(null),{boundingRect:P,viewBB:V,rfId:W,panZoom:ft,translateExtent:nt,flowWidth:rt,flowHeight:ot,ariaLabelConfig:M}=Vt(GB,fe),Y=(n==null?void 0:n.width)??jB,I=(n==null?void 0:n.height)??YB,z=P.width/Y,K=P.height/I,J=Math.max(z,K),k=J*Y,U=J*I,Z=O*J,it=P.x-(k-P.width)/2-Z,lt=P.y-(U-P.height)/2-Z,yt=k+Z*2,dt=U+Z*2,pt=`${XB}-${W}`,mt=et.useRef(0),St=et.useRef();mt.current=J,et.useEffect(()=>{if(_.current&&ft)return St.current=fM({domNode:_.current,panZoom:ft,getTransform:()=>B.getState().transform,getViewScale:()=>mt.current}),()=>{var Ot;(Ot=St.current)==null||Ot.destroy()}},[ft]),et.useEffect(()=>{var Ot;(Ot=St.current)==null||Ot.update({translateExtent:nt,width:rt,height:ot,inversePan:L,pannable:A,zoomStep:N,zoomable:C})},[A,C,L,N,nt,rt,ot]);const Jt=b?Ot=>{var le;const[kt,Zt]=((le=St.current)==null?void 0:le.pointer(Ot))||[0,0];b(Ot,{x:kt,y:Zt})}:void 0,Rt=T?et.useCallback((Ot,kt)=>{const Zt=B.getState().nodeLookup.get(kt).internals.userNode;T(Ot,Zt)},[]):void 0,Nt=D??M["minimap.ariaLabel"];return tt.jsx(vh,{position:v,style:{...n,"--xy-minimap-background-color-props":typeof h=="string"?h:void 0,"--xy-minimap-mask-background-color-props":typeof g=="string"?g:void 0,"--xy-minimap-mask-stroke-color-props":typeof p=="string"?p:void 0,"--xy-minimap-mask-stroke-width-props":typeof w=="number"?w*J:void 0,"--xy-minimap-node-background-color-props":typeof r=="string"?r:void 0,"--xy-minimap-node-stroke-color-props":typeof e=="string"?e:void 0,"--xy-minimap-node-stroke-width-props":typeof c=="number"?c:void 0},className:Ee(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:tt.jsxs("svg",{width:Y,height:I,viewBox:`${it} ${lt} ${yt} ${dt}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":pt,ref:_,onClick:Jt,children:[Nt&&tt.jsx("title",{id:pt,children:Nt}),tt.jsx(VB,{onClick:Rt,nodeColor:r,nodeStrokeColor:e,nodeBorderRadius:l,nodeClassName:a,nodeStrokeWidth:c,nodeComponent:d}),tt.jsx("path",{className:"react-flow__minimap-mask",d:`M${it-Z},${lt-Z}h${yt+Z*2}v${dt+Z*2}h${-yt-Z*2}z
        M${V.x},${V.y}h${V.width}v${V.height}h${-V.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}EA.displayName="MiniMap";et.memo(EA);const FB=n=>t=>n?`${Math.max(1/t.transform[2],1)}`:void 0,ZB={[Sl.Line]:"right",[Sl.Handle]:"bottom-right"};function QB({nodeId:n,position:t,variant:e=Sl.Handle,className:r,style:a=void 0,children:l,color:c,minWidth:d=10,minHeight:h=10,maxWidth:g=Number.MAX_VALUE,maxHeight:p=Number.MAX_VALUE,keepAspectRatio:w=!1,resizeDirection:v,autoScale:b=!0,shouldResize:T,onResizeStart:A,onResize:C,onResizeEnd:D}){const L=rA(),N=typeof n=="string"?n:L,O=oe(),B=et.useRef(null),_=e===Sl.Handle,P=Vt(et.useCallback(FB(_&&b),[_,b]),fe),V=et.useRef(null),W=t??ZB[e];et.useEffect(()=>{if(!(!B.current||!N))return V.current||(V.current=CM({domNode:B.current,nodeId:N,getStoreItems:()=>{const{nodeLookup:nt,transform:rt,snapGrid:ot,snapToGrid:M,nodeOrigin:Y,domNode:I}=O.getState();return{nodeLookup:nt,transform:rt,snapGrid:ot,snapToGrid:M,nodeOrigin:Y,paneDomNode:I}},onChange:(nt,rt)=>{const{triggerNodeChanges:ot,nodeLookup:M,parentLookup:Y,nodeOrigin:I}=O.getState(),z=[],K={x:nt.x,y:nt.y},J=M.get(N);if(J&&J.expandParent&&J.parentId){const k=J.origin??I,U=nt.width??J.measured.width??0,Z=nt.height??J.measured.height??0,it={id:J.id,parentId:J.parentId,rect:{width:U,height:Z,...DT({x:nt.x??J.position.x,y:nt.y??J.position.y},{width:U,height:Z},J.parentId,M,k)}},lt=$p([it],M,Y,I);z.push(...lt),K.x=nt.x?Math.max(k[0]*U,nt.x):void 0,K.y=nt.y?Math.max(k[1]*Z,nt.y):void 0}if(K.x!==void 0&&K.y!==void 0){const k={id:N,type:"position",position:{...K}};z.push(k)}if(nt.width!==void 0&&nt.height!==void 0){const U={id:N,type:"dimensions",resizing:!0,setAttributes:v?v==="horizontal"?"width":"height":!0,dimensions:{width:nt.width,height:nt.height}};z.push(U)}for(const k of rt){const U={...k,type:"position"};z.push(U)}ot(z)},onEnd:({width:nt,height:rt})=>{const ot={id:N,type:"dimensions",resizing:!1,dimensions:{width:nt,height:rt}};O.getState().triggerNodeChanges([ot])}})),V.current.update({controlPosition:W,boundaries:{minWidth:d,minHeight:h,maxWidth:g,maxHeight:p},keepAspectRatio:w,resizeDirection:v,onResizeStart:A,onResize:C,onResizeEnd:D,shouldResize:T}),()=>{var nt;(nt=V.current)==null||nt.destroy()}},[W,d,h,g,p,w,A,C,D,T]);const ft=W.split("-");return tt.jsx("div",{className:Ee(["react-flow__resize-control","nodrag",...ft,e,r]),ref:B,style:{...a,scale:P,...c&&{[_?"backgroundColor":"borderColor"]:c}},children:l})}et.memo(QB);function WB(){const{root:n,update:t,loading:e,error:r}=Fk(),a=et.useRef(0),l=et.useCallback(h=>{t(g=>{var p,w;for(const v of h)switch(v.type){case"add":g.nodes.push(v.item);break;case"replace":{const b=g.nodes.findIndex(T=>T.id===v.id);b!==-1&&(g.nodes[b]=v.item)}break;case"remove":{const b=g.nodes.findIndex(T=>T.id===v.id);b!==-1&&((w=(p=g.nodes).delete)==null||w.call(p,b))}break;case"position":{const b=g.nodes.findIndex(T=>T.id===v.id);b!==-1&&v.position&&(g.nodes[b].position=v.position)}break;case"select":{const b=g.nodes.findIndex(T=>T.id===v.id);b!==-1&&(g.nodes[b].selected=v.selected)}break}})},[t]),c=et.useCallback(h=>{t(g=>{var p,w;for(const v of h)switch(v.type){case"add":g.edges.push(v.item);break;case"replace":{const b=g.edges.findIndex(T=>T.id===v.id);b!==-1&&(g.edges[b]=v.item)}break;case"remove":{const b=g.edges.findIndex(T=>T.id===v.id);b!==-1&&((w=(p=g.edges).delete)==null||w.call(p,b))}break;case"select":{const b=g.edges.findIndex(T=>T.id===v.id);b!==-1&&(g.edges[b].selected=v.selected)}break}})},[t]),d=et.useCallback(h=>{!h.source||!h.target||t(g=>{if(g.edges.some(v=>v.source===h.source&&v.target===h.target&&v.sourceHandle===h.sourceHandle&&v.targetHandle===h.targetHandle))return;const w=`e-${h.source}-${h.target}-${a.current++}`;g.edges.push({id:w,type:"smoothstep",source:h.source,target:h.target,sourceHandle:h.sourceHandle,targetHandle:h.targetHandle})})},[t]);return e?tt.jsx("div",{children:"Loading..."}):r?tt.jsxs("div",{children:["Error: ",r.message]}):tt.jsx("div",{style:{position:"fixed",inset:0,height:"100vh"},children:tt.jsx(NB,{nodes:[...n.nodes].filter(Boolean),edges:[...n.edges].filter(Boolean),onNodesChange:l,onEdgesChange:c,onConnect:d,fitView:!0,children:tt.jsx(OB,{gap:10,size:1,color:"silver"})})})}const tz=[{id:"1",type:"input",data:{label:"Multiplayer"},position:{x:250,y:25}},{id:"2",data:{label:"Graph"},position:{x:100,y:125}},{id:"3",data:{label:"React Flow"},position:{x:250,y:225},style:{borderColor:"#FF0072"}},{id:"4",type:"output",data:{label:"Yorkie"},position:{x:100,y:325},style:{borderColor:"#944DFA"}}],ez=[{id:"e1-2",source:"1",target:"2",type:"smoothstep"},{id:"e2-3",source:"2",target:"3",label:"with"},{id:"e3-4",source:"3",target:"4",label:"and",animated:!0}],nz={nodes:tz,edges:ez};qN.createRoot(document.getElementById("root")).render(tt.jsxs(et.StrictMode,{children:[tt.jsx(Hk,{apiKey:"D6sd9E5ehtXBssmeRZ4QQP",rpcAddr:"https://api.yorkie.dev",children:tt.jsx(Xk,{docKey:`react-flow-${new Date().toISOString().substring(0,10).replace(/-/g,"")}`,initialRoot:nz,children:tt.jsx(WB,{})})}),","]}));
