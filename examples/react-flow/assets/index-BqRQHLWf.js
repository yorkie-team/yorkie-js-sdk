var JE=Object.defineProperty;var HE=(n,t,e)=>t in n?JE(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var p=(n,t,e)=>HE(n,typeof t!="symbol"?t+"":t,e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const u of a)if(u.type==="childList")for(const c of u.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function e(a){const u={};return a.integrity&&(u.integrity=a.integrity),a.referrerPolicy&&(u.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?u.credentials="include":a.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(a){if(a.ep)return;a.ep=!0;const u=e(a);fetch(a.href,u)}})();function $b(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var im={exports:{}},iu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lw;function $E(){if(Lw)return iu;Lw=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(i,a,u){var c=null;if(u!==void 0&&(c=""+u),a.key!==void 0&&(c=""+a.key),"key"in a){u={};for(var d in a)d!=="key"&&(u[d]=a[d])}else u=a;return a=u.ref,{$$typeof:n,type:i,key:c,ref:a!==void 0?a:null,props:u}}return iu.Fragment=t,iu.jsx=e,iu.jsxs=e,iu}var _w;function VE(){return _w||(_w=1,im.exports=$E()),im.exports}var Q=VE(),sm={exports:{}},su={},am={exports:{}},om={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uw;function jE(){return Uw||(Uw=1,function(n){function t(C,B){var H=C.length;C.push(B);t:for(;0<H;){var q=H-1>>>1,D=C[q];if(0<a(D,B))C[q]=B,C[H]=D,H=q;else break t}}function e(C){return C.length===0?null:C[0]}function i(C){if(C.length===0)return null;var B=C[0],H=C.pop();if(H!==B){C[0]=H;t:for(var q=0,D=C.length,P=D>>>1;q<P;){var tt=2*(q+1)-1,rt=C[tt],ut=tt+1,gt=C[ut];if(0>a(rt,H))ut<D&&0>a(gt,rt)?(C[q]=gt,C[ut]=H,q=ut):(C[q]=rt,C[tt]=H,q=tt);else if(ut<D&&0>a(gt,H))C[q]=gt,C[ut]=H,q=ut;else break t}}return B}function a(C,B){var H=C.sortIndex-B.sortIndex;return H!==0?H:C.id-B.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;n.unstable_now=function(){return u.now()}}else{var c=Date,d=c.now();n.unstable_now=function(){return c.now()-d}}var h=[],g=[],y=1,w=null,v=3,S=!1,x=!1,E=!1,I=!1,k=typeof setTimeout=="function"?setTimeout:null,z=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function O(C){for(var B=e(g);B!==null;){if(B.callback===null)i(g);else if(B.startTime<=C)i(g),B.sortIndex=B.expirationTime,t(h,B);else break;B=e(g)}}function _(C){if(E=!1,O(C),!x)if(e(h)!==null)x=!0,J||(J=!0,ot());else{var B=e(g);B!==null&&j(_,B.startTime-C)}}var J=!1,U=-1,W=5,F=-1;function nt(){return I?!0:!(n.unstable_now()-F<W)}function ft(){if(I=!1,J){var C=n.unstable_now();F=C;var B=!0;try{t:{x=!1,E&&(E=!1,z(U),U=-1),S=!0;var H=v;try{e:{for(O(C),w=e(h);w!==null&&!(w.expirationTime>C&&nt());){var q=w.callback;if(typeof q=="function"){w.callback=null,v=w.priorityLevel;var D=q(w.expirationTime<=C);if(C=n.unstable_now(),typeof D=="function"){w.callback=D,O(C),B=!0;break e}w===e(h)&&i(h),O(C)}else i(h);w=e(h)}if(w!==null)B=!0;else{var P=e(g);P!==null&&j(_,P.startTime-C),B=!1}}break t}finally{w=null,v=H,S=!1}B=void 0}}finally{B?ot():J=!1}}}var ot;if(typeof N=="function")ot=function(){N(ft)};else if(typeof MessageChannel<"u"){var ct=new MessageChannel,M=ct.port2;ct.port1.onmessage=ft,ot=function(){M.postMessage(null)}}else ot=function(){k(ft,0)};function j(C,B){U=k(function(){C(n.unstable_now())},B)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(C){C.callback=null},n.unstable_forceFrameRate=function(C){0>C||125<C?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W=0<C?Math.floor(1e3/C):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_next=function(C){switch(v){case 1:case 2:case 3:var B=3;break;default:B=v}var H=v;v=B;try{return C()}finally{v=H}},n.unstable_requestPaint=function(){I=!0},n.unstable_runWithPriority=function(C,B){switch(C){case 1:case 2:case 3:case 4:case 5:break;default:C=3}var H=v;v=C;try{return B()}finally{v=H}},n.unstable_scheduleCallback=function(C,B,H){var q=n.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?q+H:q):H=q,C){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=H+D,C={id:y++,callback:B,priorityLevel:C,startTime:H,expirationTime:D,sortIndex:-1},H>q?(C.sortIndex=H,t(g,C),e(h)===null&&C===e(g)&&(E?(z(U),U=-1):E=!0,j(_,H-q))):(C.sortIndex=D,t(h,C),x||S||(x=!0,J||(J=!0,ot()))),C},n.unstable_shouldYield=nt,n.unstable_wrapCallback=function(C){var B=v;return function(){var H=v;v=B;try{return C.apply(this,arguments)}finally{v=H}}}}(om)),om}var qw;function YE(){return qw||(qw=1,am.exports=jE()),am.exports}var lm={exports:{}},Mt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pw;function GE(){if(Pw)return Mt;Pw=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),w=Symbol.iterator;function v(D){return D===null||typeof D!="object"?null:(D=w&&D[w]||D["@@iterator"],typeof D=="function"?D:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,E={};function I(D,P,tt){this.props=D,this.context=P,this.refs=E,this.updater=tt||S}I.prototype.isReactComponent={},I.prototype.setState=function(D,P){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,P,"setState")},I.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function k(){}k.prototype=I.prototype;function z(D,P,tt){this.props=D,this.context=P,this.refs=E,this.updater=tt||S}var N=z.prototype=new k;N.constructor=z,x(N,I.prototype),N.isPureReactComponent=!0;var O=Array.isArray,_={H:null,A:null,T:null,S:null,V:null},J=Object.prototype.hasOwnProperty;function U(D,P,tt,rt,ut,gt){return tt=gt.ref,{$$typeof:n,type:D,key:P,ref:tt!==void 0?tt:null,props:gt}}function W(D,P){return U(D.type,P,void 0,void 0,void 0,D.props)}function F(D){return typeof D=="object"&&D!==null&&D.$$typeof===n}function nt(D){var P={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(tt){return P[tt]})}var ft=/\/+/g;function ot(D,P){return typeof D=="object"&&D!==null&&D.key!=null?nt(""+D.key):P.toString(36)}function ct(){}function M(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(ct,ct):(D.status="pending",D.then(function(P){D.status==="pending"&&(D.status="fulfilled",D.value=P)},function(P){D.status==="pending"&&(D.status="rejected",D.reason=P)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function j(D,P,tt,rt,ut){var gt=typeof D;(gt==="undefined"||gt==="boolean")&&(D=null);var dt=!1;if(D===null)dt=!0;else switch(gt){case"bigint":case"string":case"number":dt=!0;break;case"object":switch(D.$$typeof){case n:case t:dt=!0;break;case y:return dt=D._init,j(dt(D._payload),P,tt,rt,ut)}}if(dt)return ut=ut(D),dt=rt===""?"."+ot(D,0):rt,O(ut)?(tt="",dt!=null&&(tt=dt.replace(ft,"$&/")+"/"),j(ut,P,tt,"",function(Ct){return Ct})):ut!=null&&(F(ut)&&(ut=W(ut,tt+(ut.key==null||D&&D.key===ut.key?"":(""+ut.key).replace(ft,"$&/")+"/")+dt)),P.push(ut)),1;dt=0;var mt=rt===""?".":rt+":";if(O(D))for(var pt=0;pt<D.length;pt++)rt=D[pt],gt=mt+ot(rt,pt),dt+=j(rt,P,tt,gt,ut);else if(pt=v(D),typeof pt=="function")for(D=pt.call(D),pt=0;!(rt=D.next()).done;)rt=rt.value,gt=mt+ot(rt,pt++),dt+=j(rt,P,tt,gt,ut);else if(gt==="object"){if(typeof D.then=="function")return j(M(D),P,tt,rt,ut);throw P=String(D),Error("Objects are not valid as a React child (found: "+(P==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":P)+"). If you meant to render a collection of children, use an array instead.")}return dt}function C(D,P,tt){if(D==null)return D;var rt=[],ut=0;return j(D,rt,"","",function(gt){return P.call(tt,gt,ut++)}),rt}function B(D){if(D._status===-1){var P=D._result;P=P(),P.then(function(tt){(D._status===0||D._status===-1)&&(D._status=1,D._result=tt)},function(tt){(D._status===0||D._status===-1)&&(D._status=2,D._result=tt)}),D._status===-1&&(D._status=0,D._result=P)}if(D._status===1)return D._result.default;throw D._result}var H=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var P=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(P))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)};function q(){}return Mt.Children={map:C,forEach:function(D,P,tt){C(D,function(){P.apply(this,arguments)},tt)},count:function(D){var P=0;return C(D,function(){P++}),P},toArray:function(D){return C(D,function(P){return P})||[]},only:function(D){if(!F(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},Mt.Component=I,Mt.Fragment=e,Mt.Profiler=a,Mt.PureComponent=z,Mt.StrictMode=i,Mt.Suspense=h,Mt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=_,Mt.__COMPILER_RUNTIME={__proto__:null,c:function(D){return _.H.useMemoCache(D)}},Mt.cache=function(D){return function(){return D.apply(null,arguments)}},Mt.cloneElement=function(D,P,tt){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var rt=x({},D.props),ut=D.key,gt=void 0;if(P!=null)for(dt in P.ref!==void 0&&(gt=void 0),P.key!==void 0&&(ut=""+P.key),P)!J.call(P,dt)||dt==="key"||dt==="__self"||dt==="__source"||dt==="ref"&&P.ref===void 0||(rt[dt]=P[dt]);var dt=arguments.length-2;if(dt===1)rt.children=tt;else if(1<dt){for(var mt=Array(dt),pt=0;pt<dt;pt++)mt[pt]=arguments[pt+2];rt.children=mt}return U(D.type,ut,void 0,void 0,gt,rt)},Mt.createContext=function(D){return D={$$typeof:c,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:u,_context:D},D},Mt.createElement=function(D,P,tt){var rt,ut={},gt=null;if(P!=null)for(rt in P.key!==void 0&&(gt=""+P.key),P)J.call(P,rt)&&rt!=="key"&&rt!=="__self"&&rt!=="__source"&&(ut[rt]=P[rt]);var dt=arguments.length-2;if(dt===1)ut.children=tt;else if(1<dt){for(var mt=Array(dt),pt=0;pt<dt;pt++)mt[pt]=arguments[pt+2];ut.children=mt}if(D&&D.defaultProps)for(rt in dt=D.defaultProps,dt)ut[rt]===void 0&&(ut[rt]=dt[rt]);return U(D,gt,void 0,void 0,null,ut)},Mt.createRef=function(){return{current:null}},Mt.forwardRef=function(D){return{$$typeof:d,render:D}},Mt.isValidElement=F,Mt.lazy=function(D){return{$$typeof:y,_payload:{_status:-1,_result:D},_init:B}},Mt.memo=function(D,P){return{$$typeof:g,type:D,compare:P===void 0?null:P}},Mt.startTransition=function(D){var P=_.T,tt={};_.T=tt;try{var rt=D(),ut=_.S;ut!==null&&ut(tt,rt),typeof rt=="object"&&rt!==null&&typeof rt.then=="function"&&rt.then(q,H)}catch(gt){H(gt)}finally{_.T=P}},Mt.unstable_useCacheRefresh=function(){return _.H.useCacheRefresh()},Mt.use=function(D){return _.H.use(D)},Mt.useActionState=function(D,P,tt){return _.H.useActionState(D,P,tt)},Mt.useCallback=function(D,P){return _.H.useCallback(D,P)},Mt.useContext=function(D){return _.H.useContext(D)},Mt.useDebugValue=function(){},Mt.useDeferredValue=function(D,P){return _.H.useDeferredValue(D,P)},Mt.useEffect=function(D,P,tt){var rt=_.H;if(typeof tt=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return rt.useEffect(D,P)},Mt.useId=function(){return _.H.useId()},Mt.useImperativeHandle=function(D,P,tt){return _.H.useImperativeHandle(D,P,tt)},Mt.useInsertionEffect=function(D,P){return _.H.useInsertionEffect(D,P)},Mt.useLayoutEffect=function(D,P){return _.H.useLayoutEffect(D,P)},Mt.useMemo=function(D,P){return _.H.useMemo(D,P)},Mt.useOptimistic=function(D,P){return _.H.useOptimistic(D,P)},Mt.useReducer=function(D,P,tt){return _.H.useReducer(D,P,tt)},Mt.useRef=function(D){return _.H.useRef(D)},Mt.useState=function(D){return _.H.useState(D)},Mt.useSyncExternalStore=function(D,P,tt){return _.H.useSyncExternalStore(D,P,tt)},Mt.useTransition=function(){return _.H.useTransition()},Mt.version="19.1.0",Mt}var Jw;function Ju(){return Jw||(Jw=1,lm.exports=GE()),lm.exports}var um={exports:{}},qe={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hw;function XE(){if(Hw)return qe;Hw=1;var n=Ju();function t(h){var g="https://react.dev/errors/"+h;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)g+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+h+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var i={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},a=Symbol.for("react.portal");function u(h,g,y){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:w==null?null:""+w,children:h,containerInfo:g,implementation:y}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(h,g){if(h==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return qe.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,qe.createPortal=function(h,g){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(t(299));return u(h,g,null,y)},qe.flushSync=function(h){var g=c.T,y=i.p;try{if(c.T=null,i.p=2,h)return h()}finally{c.T=g,i.p=y,i.d.f()}},qe.preconnect=function(h,g){typeof h=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,i.d.C(h,g))},qe.prefetchDNS=function(h){typeof h=="string"&&i.d.D(h)},qe.preinit=function(h,g){if(typeof h=="string"&&g&&typeof g.as=="string"){var y=g.as,w=d(y,g.crossOrigin),v=typeof g.integrity=="string"?g.integrity:void 0,S=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;y==="style"?i.d.S(h,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:w,integrity:v,fetchPriority:S}):y==="script"&&i.d.X(h,{crossOrigin:w,integrity:v,fetchPriority:S,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},qe.preinitModule=function(h,g){if(typeof h=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var y=d(g.as,g.crossOrigin);i.d.M(h,{crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&i.d.M(h)},qe.preload=function(h,g){if(typeof h=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var y=g.as,w=d(y,g.crossOrigin);i.d.L(h,y,{crossOrigin:w,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},qe.preloadModule=function(h,g){if(typeof h=="string")if(g){var y=d(g.as,g.crossOrigin);i.d.m(h,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else i.d.m(h)},qe.requestFormReset=function(h){i.d.r(h)},qe.unstable_batchedUpdates=function(h,g){return h(g)},qe.useFormState=function(h,g,y){return c.H.useFormState(h,g,y)},qe.useFormStatus=function(){return c.H.useHostTransitionStatus()},qe.version="19.1.0",qe}var $w;function Vb(){if($w)return um.exports;$w=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),um.exports=XE(),um.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vw;function KE(){if(Vw)return su;Vw=1;var n=YE(),t=Ju(),e=Vb();function i(r){var s="https://react.dev/errors/"+r;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function u(r){var s=r,o=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(o=s.return),r=s.return;while(r)}return s.tag===3?o:null}function c(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function d(r){if(u(r)!==r)throw Error(i(188))}function h(r){var s=r.alternate;if(!s){if(s=u(r),s===null)throw Error(i(188));return s!==r?null:r}for(var o=r,l=s;;){var f=o.return;if(f===null)break;var m=f.alternate;if(m===null){if(l=f.return,l!==null){o=l;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===o)return d(f),r;if(m===l)return d(f),s;m=m.sibling}throw Error(i(188))}if(o.return!==l.return)o=f,l=m;else{for(var b=!1,A=f.child;A;){if(A===o){b=!0,o=f,l=m;break}if(A===l){b=!0,l=f,o=m;break}A=A.sibling}if(!b){for(A=m.child;A;){if(A===o){b=!0,o=m,l=f;break}if(A===l){b=!0,l=m,o=f;break}A=A.sibling}if(!b)throw Error(i(189))}}if(o.alternate!==l)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?r:s}function g(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r;for(r=r.child;r!==null;){if(s=g(r),s!==null)return s;r=r.sibling}return null}var y=Object.assign,w=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),z=Symbol.for("react.consumer"),N=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),J=Symbol.for("react.suspense_list"),U=Symbol.for("react.memo"),W=Symbol.for("react.lazy"),F=Symbol.for("react.activity"),nt=Symbol.for("react.memo_cache_sentinel"),ft=Symbol.iterator;function ot(r){return r===null||typeof r!="object"?null:(r=ft&&r[ft]||r["@@iterator"],typeof r=="function"?r:null)}var ct=Symbol.for("react.client.reference");function M(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===ct?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case x:return"Fragment";case I:return"Profiler";case E:return"StrictMode";case _:return"Suspense";case J:return"SuspenseList";case F:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case S:return"Portal";case N:return(r.displayName||"Context")+".Provider";case z:return(r._context.displayName||"Context")+".Consumer";case O:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case U:return s=r.displayName||null,s!==null?s:M(r.type)||"Memo";case W:s=r._payload,r=r._init;try{return M(r(s))}catch{}}return null}var j=Array.isArray,C=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,B=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,H={pending:!1,data:null,method:null,action:null},q=[],D=-1;function P(r){return{current:r}}function tt(r){0>D||(r.current=q[D],q[D]=null,D--)}function rt(r,s){D++,q[D]=r.current,r.current=s}var ut=P(null),gt=P(null),dt=P(null),mt=P(null);function pt(r,s){switch(rt(dt,s),rt(gt,r),rt(ut,null),s.nodeType){case 9:case 11:r=(r=s.documentElement)&&(r=r.namespaceURI)?cw(r):0;break;default:if(r=s.tagName,s=s.namespaceURI)s=cw(s),r=fw(s,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}tt(ut),rt(ut,r)}function Ct(){tt(ut),tt(gt),tt(dt)}function Vt(r){r.memoizedState!==null&&rt(mt,r);var s=ut.current,o=fw(s,r.type);s!==o&&(rt(gt,r),rt(ut,o))}function Ot(r){gt.current===r&&(tt(ut),tt(gt)),mt.current===r&&(tt(mt),Wl._currentValue=H)}var bt=Object.prototype.hasOwnProperty,Yt=n.unstable_scheduleCallback,qt=n.unstable_cancelCallback,be=n.unstable_shouldYield,rn=n.unstable_requestPaint,Oe=n.unstable_now,tl=n.unstable_getCurrentPriorityLevel,La=n.unstable_ImmediatePriority,os=n.unstable_UserBlockingPriority,ls=n.unstable_NormalPriority,Ws=n.unstable_LowPriority,us=n.unstable_IdlePriority,el=n.log,ta=n.unstable_setDisableYieldValue,Jn=null,Ee=null;function nr(r){if(typeof el=="function"&&ta(r),Ee&&typeof Ee.setStrictMode=="function")try{Ee.setStrictMode(Jn,r)}catch{}}var Ie=Math.clz32?Math.clz32:Gd,jd=Math.log,Yd=Math.LN2;function Gd(r){return r>>>=0,r===0?32:31-(jd(r)/Yd|0)|0}var _a=256,Ua=4194304;function Cr(r){var s=r&42;if(s!==0)return s;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function qa(r,s,o){var l=r.pendingLanes;if(l===0)return 0;var f=0,m=r.suspendedLanes,b=r.pingedLanes;r=r.warmLanes;var A=l&134217727;return A!==0?(l=A&~m,l!==0?f=Cr(l):(b&=A,b!==0?f=Cr(b):o||(o=A&~r,o!==0&&(f=Cr(o))))):(A=l&~m,A!==0?f=Cr(A):b!==0?f=Cr(b):o||(o=l&~r,o!==0&&(f=Cr(o)))),f===0?0:s!==0&&s!==f&&(s&m)===0&&(m=f&-f,o=s&-s,m>=o||m===32&&(o&4194048)!==0)?s:f}function ea(r,s){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&s)===0}function Xd(r,s){switch(r){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Qu(){var r=_a;return _a<<=1,(_a&4194048)===0&&(_a=256),r}function Wu(){var r=Ua;return Ua<<=1,(Ua&62914560)===0&&(Ua=4194304),r}function nl(r){for(var s=[],o=0;31>o;o++)s.push(r);return s}function na(r,s){r.pendingLanes|=s,s!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function Kd(r,s,o,l,f,m){var b=r.pendingLanes;r.pendingLanes=o,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=o,r.entangledLanes&=o,r.errorRecoveryDisabledLanes&=o,r.shellSuspendCounter=0;var A=r.entanglements,R=r.expirationTimes,X=r.hiddenUpdates;for(o=b&~o;0<o;){var st=31-Ie(o),lt=1<<st;A[st]=0,R[st]=-1;var K=X[st];if(K!==null)for(X[st]=null,st=0;st<K.length;st++){var Z=K[st];Z!==null&&(Z.lane&=-536870913)}o&=~lt}l!==0&&rl(r,l,0),m!==0&&f===0&&r.tag!==0&&(r.suspendedLanes|=m&~(b&~s))}function rl(r,s,o){r.pendingLanes|=s,r.suspendedLanes&=~s;var l=31-Ie(s);r.entangledLanes|=s,r.entanglements[l]=r.entanglements[l]|1073741824|o&4194090}function tc(r,s){var o=r.entangledLanes|=s;for(r=r.entanglements;o;){var l=31-Ie(o),f=1<<l;f&s|r[l]&s&&(r[l]|=s),o&=~f}}function il(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function sl(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function ec(){var r=B.p;return r!==0?r:(r=window.event,r===void 0?32:Ow(r.type))}function Fd(r,s){var o=B.p;try{return B.p=r,s()}finally{B.p=o}}var rr=Math.random().toString(36).slice(2),Ne="__reactFiber$"+rr,_e="__reactProps$"+rr,cs="__reactContainer$"+rr,al="__reactEvents$"+rr,Zd="__reactListeners$"+rr,Qd="__reactHandles$"+rr,nc="__reactResources$"+rr,ra="__reactMarker$"+rr;function ol(r){delete r[Ne],delete r[_e],delete r[al],delete r[Zd],delete r[Qd]}function kr(r){var s=r[Ne];if(s)return s;for(var o=r.parentNode;o;){if(s=o[cs]||o[Ne]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(r=mw(r);r!==null;){if(o=r[Ne])return o;r=mw(r)}return s}r=o,o=r.parentNode}return null}function Or(r){if(r=r[Ne]||r[cs]){var s=r.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return r}return null}function ia(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r.stateNode;throw Error(i(33))}function fs(r){var s=r[nc];return s||(s=r[nc]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function pe(r){r[ra]=!0}var rc=new Set,ic={};function Ir(r,s){ds(r,s),ds(r+"Capture",s)}function ds(r,s){for(ic[r]=s,r=0;r<s.length;r++)rc.add(s[r])}var sc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ac={},oc={};function Wd(r){return bt.call(oc,r)?!0:bt.call(ac,r)?!1:sc.test(r)?oc[r]=!0:(ac[r]=!0,!1)}function Pa(r,s,o){if(Wd(s))if(o===null)r.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":r.removeAttribute(s);return;case"boolean":var l=s.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){r.removeAttribute(s);return}}r.setAttribute(s,""+o)}}function Ja(r,s,o){if(o===null)r.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(s);return}r.setAttribute(s,""+o)}}function Hn(r,s,o,l){if(l===null)r.removeAttribute(o);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttributeNS(s,o,""+l)}}var ll,ul;function hs(r){if(ll===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);ll=s&&s[1]||"",ul=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ll+r+ul}var cl=!1;function fl(r,s){if(!r||cl)return"";cl=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(s){var lt=function(){throw Error()};if(Object.defineProperty(lt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(lt,[])}catch(Z){var K=Z}Reflect.construct(r,[],lt)}else{try{lt.call()}catch(Z){K=Z}r.call(lt.prototype)}}else{try{throw Error()}catch(Z){K=Z}(lt=r())&&typeof lt.catch=="function"&&lt.catch(function(){})}}catch(Z){if(Z&&K&&typeof Z.stack=="string")return[Z.stack,K.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=l.DetermineComponentFrameRoot(),b=m[0],A=m[1];if(b&&A){var R=b.split(`
`),X=A.split(`
`);for(f=l=0;l<R.length&&!R[l].includes("DetermineComponentFrameRoot");)l++;for(;f<X.length&&!X[f].includes("DetermineComponentFrameRoot");)f++;if(l===R.length||f===X.length)for(l=R.length-1,f=X.length-1;1<=l&&0<=f&&R[l]!==X[f];)f--;for(;1<=l&&0<=f;l--,f--)if(R[l]!==X[f]){if(l!==1||f!==1)do if(l--,f--,0>f||R[l]!==X[f]){var st=`
`+R[l].replace(" at new "," at ");return r.displayName&&st.includes("<anonymous>")&&(st=st.replace("<anonymous>",r.displayName)),st}while(1<=l&&0<=f);break}}}finally{cl=!1,Error.prepareStackTrace=o}return(o=r?r.displayName||r.name:"")?hs(o):""}function th(r){switch(r.tag){case 26:case 27:case 5:return hs(r.type);case 16:return hs("Lazy");case 13:return hs("Suspense");case 19:return hs("SuspenseList");case 0:case 15:return fl(r.type,!1);case 11:return fl(r.type.render,!1);case 1:return fl(r.type,!0);case 31:return hs("Activity");default:return""}}function lc(r){try{var s="";do s+=th(r),r=r.return;while(r);return s}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function je(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function uc(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Ha(r){var s=uc(r)?"checked":"value",o=Object.getOwnPropertyDescriptor(r.constructor.prototype,s),l=""+r[s];if(!r.hasOwnProperty(s)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var f=o.get,m=o.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return f.call(this)},set:function(b){l=""+b,m.call(this,b)}}),Object.defineProperty(r,s,{enumerable:o.enumerable}),{getValue:function(){return l},setValue:function(b){l=""+b},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function $a(r){r._valueTracker||(r._valueTracker=Ha(r))}function cc(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var o=s.getValue(),l="";return r&&(l=uc(r)?r.checked?"true":"false":r.value),r=l,r!==o?(s.setValue(r),!0):!1}function gs(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var eh=/[\n"\\]/g;function Ye(r){return r.replace(eh,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Va(r,s,o,l,f,m,b,A){r.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?r.type=b:r.removeAttribute("type"),s!=null?b==="number"?(s===0&&r.value===""||r.value!=s)&&(r.value=""+je(s)):r.value!==""+je(s)&&(r.value=""+je(s)):b!=="submit"&&b!=="reset"||r.removeAttribute("value"),s!=null?nh(r,b,je(s)):o!=null?nh(r,b,je(o)):l!=null&&r.removeAttribute("value"),f==null&&m!=null&&(r.defaultChecked=!!m),f!=null&&(r.checked=f&&typeof f!="function"&&typeof f!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?r.name=""+je(A):r.removeAttribute("name")}function op(r,s,o,l,f,m,b,A){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(r.type=m),s!=null||o!=null){if(!(m!=="submit"&&m!=="reset"||s!=null))return;o=o!=null?""+je(o):"",s=s!=null?""+je(s):o,A||s===r.value||(r.value=s),r.defaultValue=s}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,r.checked=A?r.checked:!!l,r.defaultChecked=!!l,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(r.name=b)}function nh(r,s,o){s==="number"&&gs(r.ownerDocument)===r||r.defaultValue===""+o||(r.defaultValue=""+o)}function ja(r,s,o,l){if(r=r.options,s){s={};for(var f=0;f<o.length;f++)s["$"+o[f]]=!0;for(o=0;o<r.length;o++)f=s.hasOwnProperty("$"+r[o].value),r[o].selected!==f&&(r[o].selected=f),f&&l&&(r[o].defaultSelected=!0)}else{for(o=""+je(o),s=null,f=0;f<r.length;f++){if(r[f].value===o){r[f].selected=!0,l&&(r[f].defaultSelected=!0);return}s!==null||r[f].disabled||(s=r[f])}s!==null&&(s.selected=!0)}}function lp(r,s,o){if(s!=null&&(s=""+je(s),s!==r.value&&(r.value=s),o==null)){r.defaultValue!==s&&(r.defaultValue=s);return}r.defaultValue=o!=null?""+je(o):""}function up(r,s,o,l){if(s==null){if(l!=null){if(o!=null)throw Error(i(92));if(j(l)){if(1<l.length)throw Error(i(93));l=l[0]}o=l}o==null&&(o=""),s=o}o=je(s),r.defaultValue=o,l=r.textContent,l===o&&l!==""&&l!==null&&(r.value=l)}function Ya(r,s){if(s){var o=r.firstChild;if(o&&o===r.lastChild&&o.nodeType===3){o.nodeValue=s;return}}r.textContent=s}var UT=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function cp(r,s,o){var l=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?l?r.setProperty(s,""):s==="float"?r.cssFloat="":r[s]="":l?r.setProperty(s,o):typeof o!="number"||o===0||UT.has(s)?s==="float"?r.cssFloat=o:r[s]=(""+o).trim():r[s]=o+"px"}function fp(r,s,o){if(s!=null&&typeof s!="object")throw Error(i(62));if(r=r.style,o!=null){for(var l in o)!o.hasOwnProperty(l)||s!=null&&s.hasOwnProperty(l)||(l.indexOf("--")===0?r.setProperty(l,""):l==="float"?r.cssFloat="":r[l]="");for(var f in s)l=s[f],s.hasOwnProperty(f)&&o[f]!==l&&cp(r,f,l)}else for(var m in s)s.hasOwnProperty(m)&&cp(r,m,s[m])}function rh(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qT=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),PT=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function fc(r){return PT.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}var ih=null;function sh(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Ga=null,Xa=null;function dp(r){var s=Or(r);if(s&&(r=s.stateNode)){var o=r[_e]||null;t:switch(r=s.stateNode,s.type){case"input":if(Va(r,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=r;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Ye(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var l=o[s];if(l!==r&&l.form===r.form){var f=l[_e]||null;if(!f)throw Error(i(90));Va(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(s=0;s<o.length;s++)l=o[s],l.form===r.form&&cc(l)}break t;case"textarea":lp(r,o.value,o.defaultValue);break t;case"select":s=o.value,s!=null&&ja(r,!!o.multiple,s,!1)}}}var ah=!1;function hp(r,s,o){if(ah)return r(s,o);ah=!0;try{var l=r(s);return l}finally{if(ah=!1,(Ga!==null||Xa!==null)&&(Fc(),Ga&&(s=Ga,r=Xa,Xa=Ga=null,dp(s),r)))for(s=0;s<r.length;s++)dp(r[s])}}function dl(r,s){var o=r.stateNode;if(o===null)return null;var l=o[_e]||null;if(l===null)return null;o=l[s];t:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(r=r.type,l=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!l;break t;default:r=!1}if(r)return null;if(o&&typeof o!="function")throw Error(i(231,s,typeof o));return o}var Mr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),oh=!1;if(Mr)try{var hl={};Object.defineProperty(hl,"passive",{get:function(){oh=!0}}),window.addEventListener("test",hl,hl),window.removeEventListener("test",hl,hl)}catch{oh=!1}var ms=null,lh=null,dc=null;function gp(){if(dc)return dc;var r,s=lh,o=s.length,l,f="value"in ms?ms.value:ms.textContent,m=f.length;for(r=0;r<o&&s[r]===f[r];r++);var b=o-r;for(l=1;l<=b&&s[o-l]===f[m-l];l++);return dc=f.slice(r,1<l?1-l:void 0)}function hc(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function gc(){return!0}function mp(){return!1}function Ge(r){function s(o,l,f,m,b){this._reactName=o,this._targetInst=f,this.type=l,this.nativeEvent=m,this.target=b,this.currentTarget=null;for(var A in r)r.hasOwnProperty(A)&&(o=r[A],this[A]=o?o(m):m[A]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?gc:mp,this.isPropagationStopped=mp,this}return y(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=gc)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=gc)},persist:function(){},isPersistent:gc}),s}var sa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},mc=Ge(sa),gl=y({},sa,{view:0,detail:0}),JT=Ge(gl),uh,ch,ml,yc=y({},gl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:dh,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==ml&&(ml&&r.type==="mousemove"?(uh=r.screenX-ml.screenX,ch=r.screenY-ml.screenY):ch=uh=0,ml=r),uh)},movementY:function(r){return"movementY"in r?r.movementY:ch}}),yp=Ge(yc),HT=y({},yc,{dataTransfer:0}),$T=Ge(HT),VT=y({},gl,{relatedTarget:0}),fh=Ge(VT),jT=y({},sa,{animationName:0,elapsedTime:0,pseudoElement:0}),YT=Ge(jT),GT=y({},sa,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),XT=Ge(GT),KT=y({},sa,{data:0}),pp=Ge(KT),FT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ZT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},QT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function WT(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=QT[r])?!!s[r]:!1}function dh(){return WT}var tA=y({},gl,{key:function(r){if(r.key){var s=FT[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=hc(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?ZT[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:dh,charCode:function(r){return r.type==="keypress"?hc(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?hc(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),eA=Ge(tA),nA=y({},yc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),vp=Ge(nA),rA=y({},gl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:dh}),iA=Ge(rA),sA=y({},sa,{propertyName:0,elapsedTime:0,pseudoElement:0}),aA=Ge(sA),oA=y({},yc,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),lA=Ge(oA),uA=y({},sa,{newState:0,oldState:0}),cA=Ge(uA),fA=[9,13,27,32],hh=Mr&&"CompositionEvent"in window,yl=null;Mr&&"documentMode"in document&&(yl=document.documentMode);var dA=Mr&&"TextEvent"in window&&!yl,wp=Mr&&(!hh||yl&&8<yl&&11>=yl),Sp=" ",bp=!1;function xp(r,s){switch(r){case"keyup":return fA.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Tp(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Ka=!1;function hA(r,s){switch(r){case"compositionend":return Tp(s);case"keypress":return s.which!==32?null:(bp=!0,Sp);case"textInput":return r=s.data,r===Sp&&bp?null:r;default:return null}}function gA(r,s){if(Ka)return r==="compositionend"||!hh&&xp(r,s)?(r=gp(),dc=lh=ms=null,Ka=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return wp&&s.locale!=="ko"?null:s.data;default:return null}}var mA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ap(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!mA[r.type]:s==="textarea"}function Ep(r,s,o,l){Ga?Xa?Xa.push(l):Xa=[l]:Ga=l,s=nf(s,"onChange"),0<s.length&&(o=new mc("onChange","change",null,o,l),r.push({event:o,listeners:s}))}var pl=null,vl=null;function yA(r){sw(r,0)}function pc(r){var s=ia(r);if(cc(s))return r}function Np(r,s){if(r==="change")return s}var Dp=!1;if(Mr){var gh;if(Mr){var mh="oninput"in document;if(!mh){var Cp=document.createElement("div");Cp.setAttribute("oninput","return;"),mh=typeof Cp.oninput=="function"}gh=mh}else gh=!1;Dp=gh&&(!document.documentMode||9<document.documentMode)}function kp(){pl&&(pl.detachEvent("onpropertychange",Op),vl=pl=null)}function Op(r){if(r.propertyName==="value"&&pc(vl)){var s=[];Ep(s,vl,r,sh(r)),hp(yA,s)}}function pA(r,s,o){r==="focusin"?(kp(),pl=s,vl=o,pl.attachEvent("onpropertychange",Op)):r==="focusout"&&kp()}function vA(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return pc(vl)}function wA(r,s){if(r==="click")return pc(s)}function SA(r,s){if(r==="input"||r==="change")return pc(s)}function bA(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var sn=typeof Object.is=="function"?Object.is:bA;function wl(r,s){if(sn(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var o=Object.keys(r),l=Object.keys(s);if(o.length!==l.length)return!1;for(l=0;l<o.length;l++){var f=o[l];if(!bt.call(s,f)||!sn(r[f],s[f]))return!1}return!0}function Ip(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Mp(r,s){var o=Ip(r);r=0;for(var l;o;){if(o.nodeType===3){if(l=r+o.textContent.length,r<=s&&l>=s)return{node:o,offset:s-r};r=l}t:{for(;o;){if(o.nextSibling){o=o.nextSibling;break t}o=o.parentNode}o=void 0}o=Ip(o)}}function Rp(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?Rp(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function Bp(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var s=gs(r.document);s instanceof r.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)r=s.contentWindow;else break;s=gs(r.document)}return s}function yh(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}var xA=Mr&&"documentMode"in document&&11>=document.documentMode,Fa=null,ph=null,Sl=null,vh=!1;function zp(r,s,o){var l=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;vh||Fa==null||Fa!==gs(l)||(l=Fa,"selectionStart"in l&&yh(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Sl&&wl(Sl,l)||(Sl=l,l=nf(ph,"onSelect"),0<l.length&&(s=new mc("onSelect","select",null,s,o),r.push({event:s,listeners:l}),s.target=Fa)))}function aa(r,s){var o={};return o[r.toLowerCase()]=s.toLowerCase(),o["Webkit"+r]="webkit"+s,o["Moz"+r]="moz"+s,o}var Za={animationend:aa("Animation","AnimationEnd"),animationiteration:aa("Animation","AnimationIteration"),animationstart:aa("Animation","AnimationStart"),transitionrun:aa("Transition","TransitionRun"),transitionstart:aa("Transition","TransitionStart"),transitioncancel:aa("Transition","TransitionCancel"),transitionend:aa("Transition","TransitionEnd")},wh={},Lp={};Mr&&(Lp=document.createElement("div").style,"AnimationEvent"in window||(delete Za.animationend.animation,delete Za.animationiteration.animation,delete Za.animationstart.animation),"TransitionEvent"in window||delete Za.transitionend.transition);function oa(r){if(wh[r])return wh[r];if(!Za[r])return r;var s=Za[r],o;for(o in s)if(s.hasOwnProperty(o)&&o in Lp)return wh[r]=s[o];return r}var _p=oa("animationend"),Up=oa("animationiteration"),qp=oa("animationstart"),TA=oa("transitionrun"),AA=oa("transitionstart"),EA=oa("transitioncancel"),Pp=oa("transitionend"),Jp=new Map,Sh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Sh.push("scrollEnd");function $n(r,s){Jp.set(r,s),Ir(s,[r])}var Hp=new WeakMap;function vn(r,s){if(typeof r=="object"&&r!==null){var o=Hp.get(r);return o!==void 0?o:(s={value:r,source:s,stack:lc(s)},Hp.set(r,s),s)}return{value:r,source:s,stack:lc(s)}}var wn=[],Qa=0,bh=0;function vc(){for(var r=Qa,s=bh=Qa=0;s<r;){var o=wn[s];wn[s++]=null;var l=wn[s];wn[s++]=null;var f=wn[s];wn[s++]=null;var m=wn[s];if(wn[s++]=null,l!==null&&f!==null){var b=l.pending;b===null?f.next=f:(f.next=b.next,b.next=f),l.pending=f}m!==0&&$p(o,f,m)}}function wc(r,s,o,l){wn[Qa++]=r,wn[Qa++]=s,wn[Qa++]=o,wn[Qa++]=l,bh|=l,r.lanes|=l,r=r.alternate,r!==null&&(r.lanes|=l)}function xh(r,s,o,l){return wc(r,s,o,l),Sc(r)}function Wa(r,s){return wc(r,null,null,s),Sc(r)}function $p(r,s,o){r.lanes|=o;var l=r.alternate;l!==null&&(l.lanes|=o);for(var f=!1,m=r.return;m!==null;)m.childLanes|=o,l=m.alternate,l!==null&&(l.childLanes|=o),m.tag===22&&(r=m.stateNode,r===null||r._visibility&1||(f=!0)),r=m,m=m.return;return r.tag===3?(m=r.stateNode,f&&s!==null&&(f=31-Ie(o),r=m.hiddenUpdates,l=r[f],l===null?r[f]=[s]:l.push(s),s.lane=o|536870912),m):null}function Sc(r){if(50<jl)throw jl=0,Cg=null,Error(i(185));for(var s=r.return;s!==null;)r=s,s=r.return;return r.tag===3?r.stateNode:null}var to={};function NA(r,s,o,l){this.tag=r,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function an(r,s,o,l){return new NA(r,s,o,l)}function Th(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Rr(r,s){var o=r.alternate;return o===null?(o=an(r.tag,s,r.key,r.mode),o.elementType=r.elementType,o.type=r.type,o.stateNode=r.stateNode,o.alternate=r,r.alternate=o):(o.pendingProps=s,o.type=r.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=r.flags&65011712,o.childLanes=r.childLanes,o.lanes=r.lanes,o.child=r.child,o.memoizedProps=r.memoizedProps,o.memoizedState=r.memoizedState,o.updateQueue=r.updateQueue,s=r.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=r.sibling,o.index=r.index,o.ref=r.ref,o.refCleanup=r.refCleanup,o}function Vp(r,s){r.flags&=65011714;var o=r.alternate;return o===null?(r.childLanes=0,r.lanes=s,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,s=o.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),r}function bc(r,s,o,l,f,m){var b=0;if(l=r,typeof r=="function")Th(r)&&(b=1);else if(typeof r=="string")b=CE(r,o,ut.current)?26:r==="html"||r==="head"||r==="body"?27:5;else t:switch(r){case F:return r=an(31,o,s,f),r.elementType=F,r.lanes=m,r;case x:return la(o.children,f,m,s);case E:b=8,f|=24;break;case I:return r=an(12,o,s,f|2),r.elementType=I,r.lanes=m,r;case _:return r=an(13,o,s,f),r.elementType=_,r.lanes=m,r;case J:return r=an(19,o,s,f),r.elementType=J,r.lanes=m,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case k:case N:b=10;break t;case z:b=9;break t;case O:b=11;break t;case U:b=14;break t;case W:b=16,l=null;break t}b=29,o=Error(i(130,r===null?"null":typeof r,"")),l=null}return s=an(b,o,s,f),s.elementType=r,s.type=l,s.lanes=m,s}function la(r,s,o,l){return r=an(7,r,l,s),r.lanes=o,r}function Ah(r,s,o){return r=an(6,r,null,s),r.lanes=o,r}function Eh(r,s,o){return s=an(4,r.children!==null?r.children:[],r.key,s),s.lanes=o,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}var eo=[],no=0,xc=null,Tc=0,Sn=[],bn=0,ua=null,Br=1,zr="";function ca(r,s){eo[no++]=Tc,eo[no++]=xc,xc=r,Tc=s}function jp(r,s,o){Sn[bn++]=Br,Sn[bn++]=zr,Sn[bn++]=ua,ua=r;var l=Br;r=zr;var f=32-Ie(l)-1;l&=~(1<<f),o+=1;var m=32-Ie(s)+f;if(30<m){var b=f-f%5;m=(l&(1<<b)-1).toString(32),l>>=b,f-=b,Br=1<<32-Ie(s)+f|o<<f|l,zr=m+r}else Br=1<<m|o<<f|l,zr=r}function Nh(r){r.return!==null&&(ca(r,1),jp(r,1,0))}function Dh(r){for(;r===xc;)xc=eo[--no],eo[no]=null,Tc=eo[--no],eo[no]=null;for(;r===ua;)ua=Sn[--bn],Sn[bn]=null,zr=Sn[--bn],Sn[bn]=null,Br=Sn[--bn],Sn[bn]=null}var $e=null,ae=null,jt=!1,fa=null,ir=!1,Ch=Error(i(519));function da(r){var s=Error(i(418,""));throw Tl(vn(s,r)),Ch}function Yp(r){var s=r.stateNode,o=r.type,l=r.memoizedProps;switch(s[Ne]=r,s[_e]=l,o){case"dialog":Lt("cancel",s),Lt("close",s);break;case"iframe":case"object":case"embed":Lt("load",s);break;case"video":case"audio":for(o=0;o<Gl.length;o++)Lt(Gl[o],s);break;case"source":Lt("error",s);break;case"img":case"image":case"link":Lt("error",s),Lt("load",s);break;case"details":Lt("toggle",s);break;case"input":Lt("invalid",s),op(s,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),$a(s);break;case"select":Lt("invalid",s);break;case"textarea":Lt("invalid",s),up(s,l.value,l.defaultValue,l.children),$a(s)}o=l.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||l.suppressHydrationWarning===!0||uw(s.textContent,o)?(l.popover!=null&&(Lt("beforetoggle",s),Lt("toggle",s)),l.onScroll!=null&&Lt("scroll",s),l.onScrollEnd!=null&&Lt("scrollend",s),l.onClick!=null&&(s.onclick=rf),s=!0):s=!1,s||da(r)}function Gp(r){for($e=r.return;$e;)switch($e.tag){case 5:case 13:ir=!1;return;case 27:case 3:ir=!0;return;default:$e=$e.return}}function bl(r){if(r!==$e)return!1;if(!jt)return Gp(r),jt=!0,!1;var s=r.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=r.type,o=!(o!=="form"&&o!=="button")||Vg(r.type,r.memoizedProps)),o=!o),o&&ae&&da(r),Gp(r),s===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));t:{for(r=r.nextSibling,s=0;r;){if(r.nodeType===8)if(o=r.data,o==="/$"){if(s===0){ae=jn(r.nextSibling);break t}s--}else o!=="$"&&o!=="$!"&&o!=="$?"||s++;r=r.nextSibling}ae=null}}else s===27?(s=ae,Is(r.type)?(r=Xg,Xg=null,ae=r):ae=s):ae=$e?jn(r.stateNode.nextSibling):null;return!0}function xl(){ae=$e=null,jt=!1}function Xp(){var r=fa;return r!==null&&(Fe===null?Fe=r:Fe.push.apply(Fe,r),fa=null),r}function Tl(r){fa===null?fa=[r]:fa.push(r)}var kh=P(null),ha=null,Lr=null;function ys(r,s,o){rt(kh,s._currentValue),s._currentValue=o}function _r(r){r._currentValue=kh.current,tt(kh)}function Oh(r,s,o){for(;r!==null;){var l=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,l!==null&&(l.childLanes|=s)):l!==null&&(l.childLanes&s)!==s&&(l.childLanes|=s),r===o)break;r=r.return}}function Ih(r,s,o,l){var f=r.child;for(f!==null&&(f.return=r);f!==null;){var m=f.dependencies;if(m!==null){var b=f.child;m=m.firstContext;t:for(;m!==null;){var A=m;m=f;for(var R=0;R<s.length;R++)if(A.context===s[R]){m.lanes|=o,A=m.alternate,A!==null&&(A.lanes|=o),Oh(m.return,o,r),l||(b=null);break t}m=A.next}}else if(f.tag===18){if(b=f.return,b===null)throw Error(i(341));b.lanes|=o,m=b.alternate,m!==null&&(m.lanes|=o),Oh(b,o,r),b=null}else b=f.child;if(b!==null)b.return=f;else for(b=f;b!==null;){if(b===r){b=null;break}if(f=b.sibling,f!==null){f.return=b.return,b=f;break}b=b.return}f=b}}function Al(r,s,o,l){r=null;for(var f=s,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var b=f.alternate;if(b===null)throw Error(i(387));if(b=b.memoizedProps,b!==null){var A=f.type;sn(f.pendingProps.value,b.value)||(r!==null?r.push(A):r=[A])}}else if(f===mt.current){if(b=f.alternate,b===null)throw Error(i(387));b.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(r!==null?r.push(Wl):r=[Wl])}f=f.return}r!==null&&Ih(s,r,o,l),s.flags|=262144}function Ac(r){for(r=r.firstContext;r!==null;){if(!sn(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function ga(r){ha=r,Lr=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function Ue(r){return Kp(ha,r)}function Ec(r,s){return ha===null&&ga(r),Kp(r,s)}function Kp(r,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},Lr===null){if(r===null)throw Error(i(308));Lr=s,r.dependencies={lanes:0,firstContext:s},r.flags|=524288}else Lr=Lr.next=s;return o}var DA=typeof AbortController<"u"?AbortController:function(){var r=[],s=this.signal={aborted:!1,addEventListener:function(o,l){r.push(l)}};this.abort=function(){s.aborted=!0,r.forEach(function(o){return o()})}},CA=n.unstable_scheduleCallback,kA=n.unstable_NormalPriority,xe={$$typeof:N,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Mh(){return{controller:new DA,data:new Map,refCount:0}}function El(r){r.refCount--,r.refCount===0&&CA(kA,function(){r.controller.abort()})}var Nl=null,Rh=0,ro=0,io=null;function OA(r,s){if(Nl===null){var o=Nl=[];Rh=0,ro=zg(),io={status:"pending",value:void 0,then:function(l){o.push(l)}}}return Rh++,s.then(Fp,Fp),s}function Fp(){if(--Rh===0&&Nl!==null){io!==null&&(io.status="fulfilled");var r=Nl;Nl=null,ro=0,io=null;for(var s=0;s<r.length;s++)(0,r[s])()}}function IA(r,s){var o=[],l={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return r.then(function(){l.status="fulfilled",l.value=s;for(var f=0;f<o.length;f++)(0,o[f])(s)},function(f){for(l.status="rejected",l.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),l}var Zp=C.S;C.S=function(r,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&OA(r,s),Zp!==null&&Zp(r,s)};var ma=P(null);function Bh(){var r=ma.current;return r!==null?r:ee.pooledCache}function Nc(r,s){s===null?rt(ma,ma.current):rt(ma,s.pool)}function Qp(){var r=Bh();return r===null?null:{parent:xe._currentValue,pool:r}}var Dl=Error(i(460)),Wp=Error(i(474)),Dc=Error(i(542)),zh={then:function(){}};function t0(r){return r=r.status,r==="fulfilled"||r==="rejected"}function Cc(){}function e0(r,s,o){switch(o=r[o],o===void 0?r.push(s):o!==s&&(s.then(Cc,Cc),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,r0(r),r;default:if(typeof s.status=="string")s.then(Cc,Cc);else{if(r=ee,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=s,r.status="pending",r.then(function(l){if(s.status==="pending"){var f=s;f.status="fulfilled",f.value=l}},function(l){if(s.status==="pending"){var f=s;f.status="rejected",f.reason=l}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,r0(r),r}throw Cl=s,Dl}}var Cl=null;function n0(){if(Cl===null)throw Error(i(459));var r=Cl;return Cl=null,r}function r0(r){if(r===Dl||r===Dc)throw Error(i(483))}var ps=!1;function Lh(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function _h(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function vs(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function ws(r,s,o){var l=r.updateQueue;if(l===null)return null;if(l=l.shared,(Xt&2)!==0){var f=l.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),l.pending=s,s=Sc(r),$p(r,null,o),s}return wc(r,l,s,o),Sc(r)}function kl(r,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var l=s.lanes;l&=r.pendingLanes,o|=l,s.lanes=o,tc(r,o)}}function Uh(r,s){var o=r.updateQueue,l=r.alternate;if(l!==null&&(l=l.updateQueue,o===l)){var f=null,m=null;if(o=o.firstBaseUpdate,o!==null){do{var b={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};m===null?f=m=b:m=m.next=b,o=o.next}while(o!==null);m===null?f=m=s:m=m.next=s}else f=m=s;o={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:l.shared,callbacks:l.callbacks},r.updateQueue=o;return}r=o.lastBaseUpdate,r===null?o.firstBaseUpdate=s:r.next=s,o.lastBaseUpdate=s}var qh=!1;function Ol(){if(qh){var r=io;if(r!==null)throw r}}function Il(r,s,o,l){qh=!1;var f=r.updateQueue;ps=!1;var m=f.firstBaseUpdate,b=f.lastBaseUpdate,A=f.shared.pending;if(A!==null){f.shared.pending=null;var R=A,X=R.next;R.next=null,b===null?m=X:b.next=X,b=R;var st=r.alternate;st!==null&&(st=st.updateQueue,A=st.lastBaseUpdate,A!==b&&(A===null?st.firstBaseUpdate=X:A.next=X,st.lastBaseUpdate=R))}if(m!==null){var lt=f.baseState;b=0,st=X=R=null,A=m;do{var K=A.lane&-536870913,Z=K!==A.lane;if(Z?(Pt&K)===K:(l&K)===K){K!==0&&K===ro&&(qh=!0),st!==null&&(st=st.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});t:{var kt=r,Nt=A;K=s;var Qt=o;switch(Nt.tag){case 1:if(kt=Nt.payload,typeof kt=="function"){lt=kt.call(Qt,lt,K);break t}lt=kt;break t;case 3:kt.flags=kt.flags&-65537|128;case 0:if(kt=Nt.payload,K=typeof kt=="function"?kt.call(Qt,lt,K):kt,K==null)break t;lt=y({},lt,K);break t;case 2:ps=!0}}K=A.callback,K!==null&&(r.flags|=64,Z&&(r.flags|=8192),Z=f.callbacks,Z===null?f.callbacks=[K]:Z.push(K))}else Z={lane:K,tag:A.tag,payload:A.payload,callback:A.callback,next:null},st===null?(X=st=Z,R=lt):st=st.next=Z,b|=K;if(A=A.next,A===null){if(A=f.shared.pending,A===null)break;Z=A,A=Z.next,Z.next=null,f.lastBaseUpdate=Z,f.shared.pending=null}}while(!0);st===null&&(R=lt),f.baseState=R,f.firstBaseUpdate=X,f.lastBaseUpdate=st,m===null&&(f.shared.lanes=0),Ds|=b,r.lanes=b,r.memoizedState=lt}}function i0(r,s){if(typeof r!="function")throw Error(i(191,r));r.call(s)}function s0(r,s){var o=r.callbacks;if(o!==null)for(r.callbacks=null,r=0;r<o.length;r++)i0(o[r],s)}var so=P(null),kc=P(0);function a0(r,s){r=Vr,rt(kc,r),rt(so,s),Vr=r|s.baseLanes}function Ph(){rt(kc,Vr),rt(so,so.current)}function Jh(){Vr=kc.current,tt(so),tt(kc)}var Ss=0,Rt=null,Ft=null,ve=null,Oc=!1,ao=!1,ya=!1,Ic=0,Ml=0,oo=null,MA=0;function de(){throw Error(i(321))}function Hh(r,s){if(s===null)return!1;for(var o=0;o<s.length&&o<r.length;o++)if(!sn(r[o],s[o]))return!1;return!0}function $h(r,s,o,l,f,m){return Ss=m,Rt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,C.H=r===null||r.memoizedState===null?$0:V0,ya=!1,m=o(l,f),ya=!1,ao&&(m=l0(s,o,l,f)),o0(r),m}function o0(r){C.H=_c;var s=Ft!==null&&Ft.next!==null;if(Ss=0,ve=Ft=Rt=null,Oc=!1,Ml=0,oo=null,s)throw Error(i(300));r===null||De||(r=r.dependencies,r!==null&&Ac(r)&&(De=!0))}function l0(r,s,o,l){Rt=r;var f=0;do{if(ao&&(oo=null),Ml=0,ao=!1,25<=f)throw Error(i(301));if(f+=1,ve=Ft=null,r.updateQueue!=null){var m=r.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}C.H=qA,m=s(o,l)}while(ao);return m}function RA(){var r=C.H,s=r.useState()[0];return s=typeof s.then=="function"?Rl(s):s,r=r.useState()[0],(Ft!==null?Ft.memoizedState:null)!==r&&(Rt.flags|=1024),s}function Vh(){var r=Ic!==0;return Ic=0,r}function jh(r,s,o){s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~o}function Yh(r){if(Oc){for(r=r.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Oc=!1}Ss=0,ve=Ft=Rt=null,ao=!1,Ml=Ic=0,oo=null}function Xe(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ve===null?Rt.memoizedState=ve=r:ve=ve.next=r,ve}function we(){if(Ft===null){var r=Rt.alternate;r=r!==null?r.memoizedState:null}else r=Ft.next;var s=ve===null?Rt.memoizedState:ve.next;if(s!==null)ve=s,Ft=r;else{if(r===null)throw Rt.alternate===null?Error(i(467)):Error(i(310));Ft=r,r={memoizedState:Ft.memoizedState,baseState:Ft.baseState,baseQueue:Ft.baseQueue,queue:Ft.queue,next:null},ve===null?Rt.memoizedState=ve=r:ve=ve.next=r}return ve}function Gh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Rl(r){var s=Ml;return Ml+=1,oo===null&&(oo=[]),r=e0(oo,r,s),s=Rt,(ve===null?s.memoizedState:ve.next)===null&&(s=s.alternate,C.H=s===null||s.memoizedState===null?$0:V0),r}function Mc(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return Rl(r);if(r.$$typeof===N)return Ue(r)}throw Error(i(438,String(r)))}function Xh(r){var s=null,o=Rt.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var l=Rt.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(s={data:l.data.map(function(f){return f.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=Gh(),Rt.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(r),l=0;l<r;l++)o[l]=nt;return s.index++,o}function Ur(r,s){return typeof s=="function"?s(r):s}function Rc(r){var s=we();return Kh(s,Ft,r)}function Kh(r,s,o){var l=r.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=o;var f=r.baseQueue,m=l.pending;if(m!==null){if(f!==null){var b=f.next;f.next=m.next,m.next=b}s.baseQueue=f=m,l.pending=null}if(m=r.baseState,f===null)r.memoizedState=m;else{s=f.next;var A=b=null,R=null,X=s,st=!1;do{var lt=X.lane&-536870913;if(lt!==X.lane?(Pt&lt)===lt:(Ss&lt)===lt){var K=X.revertLane;if(K===0)R!==null&&(R=R.next={lane:0,revertLane:0,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),lt===ro&&(st=!0);else if((Ss&K)===K){X=X.next,K===ro&&(st=!0);continue}else lt={lane:0,revertLane:X.revertLane,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},R===null?(A=R=lt,b=m):R=R.next=lt,Rt.lanes|=K,Ds|=K;lt=X.action,ya&&o(m,lt),m=X.hasEagerState?X.eagerState:o(m,lt)}else K={lane:lt,revertLane:X.revertLane,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},R===null?(A=R=K,b=m):R=R.next=K,Rt.lanes|=lt,Ds|=lt;X=X.next}while(X!==null&&X!==s);if(R===null?b=m:R.next=A,!sn(m,r.memoizedState)&&(De=!0,st&&(o=io,o!==null)))throw o;r.memoizedState=m,r.baseState=b,r.baseQueue=R,l.lastRenderedState=m}return f===null&&(l.lanes=0),[r.memoizedState,l.dispatch]}function Fh(r){var s=we(),o=s.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=r;var l=o.dispatch,f=o.pending,m=s.memoizedState;if(f!==null){o.pending=null;var b=f=f.next;do m=r(m,b.action),b=b.next;while(b!==f);sn(m,s.memoizedState)||(De=!0),s.memoizedState=m,s.baseQueue===null&&(s.baseState=m),o.lastRenderedState=m}return[m,l]}function u0(r,s,o){var l=Rt,f=we(),m=jt;if(m){if(o===void 0)throw Error(i(407));o=o()}else o=s();var b=!sn((Ft||f).memoizedState,o);b&&(f.memoizedState=o,De=!0),f=f.queue;var A=d0.bind(null,l,f,r);if(Bl(2048,8,A,[r]),f.getSnapshot!==s||b||ve!==null&&ve.memoizedState.tag&1){if(l.flags|=2048,lo(9,Bc(),f0.bind(null,l,f,o,s),null),ee===null)throw Error(i(349));m||(Ss&124)!==0||c0(l,s,o)}return o}function c0(r,s,o){r.flags|=16384,r={getSnapshot:s,value:o},s=Rt.updateQueue,s===null?(s=Gh(),Rt.updateQueue=s,s.stores=[r]):(o=s.stores,o===null?s.stores=[r]:o.push(r))}function f0(r,s,o,l){s.value=o,s.getSnapshot=l,h0(s)&&g0(r)}function d0(r,s,o){return o(function(){h0(s)&&g0(r)})}function h0(r){var s=r.getSnapshot;r=r.value;try{var o=s();return!sn(r,o)}catch{return!0}}function g0(r){var s=Wa(r,2);s!==null&&fn(s,r,2)}function Zh(r){var s=Xe();if(typeof r=="function"){var o=r;if(r=o(),ya){nr(!0);try{o()}finally{nr(!1)}}}return s.memoizedState=s.baseState=r,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ur,lastRenderedState:r},s}function m0(r,s,o,l){return r.baseState=o,Kh(r,Ft,typeof l=="function"?l:Ur)}function BA(r,s,o,l,f){if(Lc(r))throw Error(i(485));if(r=s.action,r!==null){var m={payload:f,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){m.listeners.push(b)}};C.T!==null?o(!0):m.isTransition=!1,l(m),o=s.pending,o===null?(m.next=s.pending=m,y0(s,m)):(m.next=o.next,s.pending=o.next=m)}}function y0(r,s){var o=s.action,l=s.payload,f=r.state;if(s.isTransition){var m=C.T,b={};C.T=b;try{var A=o(f,l),R=C.S;R!==null&&R(b,A),p0(r,s,A)}catch(X){Qh(r,s,X)}finally{C.T=m}}else try{m=o(f,l),p0(r,s,m)}catch(X){Qh(r,s,X)}}function p0(r,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(l){v0(r,s,l)},function(l){return Qh(r,s,l)}):v0(r,s,o)}function v0(r,s,o){s.status="fulfilled",s.value=o,w0(s),r.state=o,s=r.pending,s!==null&&(o=s.next,o===s?r.pending=null:(o=o.next,s.next=o,y0(r,o)))}function Qh(r,s,o){var l=r.pending;if(r.pending=null,l!==null){l=l.next;do s.status="rejected",s.reason=o,w0(s),s=s.next;while(s!==l)}r.action=null}function w0(r){r=r.listeners;for(var s=0;s<r.length;s++)(0,r[s])()}function S0(r,s){return s}function b0(r,s){if(jt){var o=ee.formState;if(o!==null){t:{var l=Rt;if(jt){if(ae){e:{for(var f=ae,m=ir;f.nodeType!==8;){if(!m){f=null;break e}if(f=jn(f.nextSibling),f===null){f=null;break e}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){ae=jn(f.nextSibling),l=f.data==="F!";break t}}da(l)}l=!1}l&&(s=o[0])}}return o=Xe(),o.memoizedState=o.baseState=s,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:S0,lastRenderedState:s},o.queue=l,o=P0.bind(null,Rt,l),l.dispatch=o,l=Zh(!1),m=rg.bind(null,Rt,!1,l.queue),l=Xe(),f={state:s,dispatch:null,action:r,pending:null},l.queue=f,o=BA.bind(null,Rt,f,m,o),f.dispatch=o,l.memoizedState=r,[s,o,!1]}function x0(r){var s=we();return T0(s,Ft,r)}function T0(r,s,o){if(s=Kh(r,s,S0)[0],r=Rc(Ur)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var l=Rl(s)}catch(b){throw b===Dl?Dc:b}else l=s;s=we();var f=s.queue,m=f.dispatch;return o!==s.memoizedState&&(Rt.flags|=2048,lo(9,Bc(),zA.bind(null,f,o),null)),[l,m,r]}function zA(r,s){r.action=s}function A0(r){var s=we(),o=Ft;if(o!==null)return T0(s,o,r);we(),s=s.memoizedState,o=we();var l=o.queue.dispatch;return o.memoizedState=r,[s,l,!1]}function lo(r,s,o,l){return r={tag:r,create:o,deps:l,inst:s,next:null},s=Rt.updateQueue,s===null&&(s=Gh(),Rt.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=r.next=r:(l=o.next,o.next=r,r.next=l,s.lastEffect=r),r}function Bc(){return{destroy:void 0,resource:void 0}}function E0(){return we().memoizedState}function zc(r,s,o,l){var f=Xe();l=l===void 0?null:l,Rt.flags|=r,f.memoizedState=lo(1|s,Bc(),o,l)}function Bl(r,s,o,l){var f=we();l=l===void 0?null:l;var m=f.memoizedState.inst;Ft!==null&&l!==null&&Hh(l,Ft.memoizedState.deps)?f.memoizedState=lo(s,m,o,l):(Rt.flags|=r,f.memoizedState=lo(1|s,m,o,l))}function N0(r,s){zc(8390656,8,r,s)}function D0(r,s){Bl(2048,8,r,s)}function C0(r,s){return Bl(4,2,r,s)}function k0(r,s){return Bl(4,4,r,s)}function O0(r,s){if(typeof s=="function"){r=r();var o=s(r);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function I0(r,s,o){o=o!=null?o.concat([r]):null,Bl(4,4,O0.bind(null,s,r),o)}function Wh(){}function M0(r,s){var o=we();s=s===void 0?null:s;var l=o.memoizedState;return s!==null&&Hh(s,l[1])?l[0]:(o.memoizedState=[r,s],r)}function R0(r,s){var o=we();s=s===void 0?null:s;var l=o.memoizedState;if(s!==null&&Hh(s,l[1]))return l[0];if(l=r(),ya){nr(!0);try{r()}finally{nr(!1)}}return o.memoizedState=[l,s],l}function tg(r,s,o){return o===void 0||(Ss&1073741824)!==0?r.memoizedState=s:(r.memoizedState=o,r=Lv(),Rt.lanes|=r,Ds|=r,o)}function B0(r,s,o,l){return sn(o,s)?o:so.current!==null?(r=tg(r,o,l),sn(r,s)||(De=!0),r):(Ss&42)===0?(De=!0,r.memoizedState=o):(r=Lv(),Rt.lanes|=r,Ds|=r,s)}function z0(r,s,o,l,f){var m=B.p;B.p=m!==0&&8>m?m:8;var b=C.T,A={};C.T=A,rg(r,!1,s,o);try{var R=f(),X=C.S;if(X!==null&&X(A,R),R!==null&&typeof R=="object"&&typeof R.then=="function"){var st=IA(R,l);zl(r,s,st,cn(r))}else zl(r,s,l,cn(r))}catch(lt){zl(r,s,{then:function(){},status:"rejected",reason:lt},cn())}finally{B.p=m,C.T=b}}function LA(){}function eg(r,s,o,l){if(r.tag!==5)throw Error(i(476));var f=L0(r).queue;z0(r,f,s,H,o===null?LA:function(){return _0(r),o(l)})}function L0(r){var s=r.memoizedState;if(s!==null)return s;s={memoizedState:H,baseState:H,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ur,lastRenderedState:H},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ur,lastRenderedState:o},next:null},r.memoizedState=s,r=r.alternate,r!==null&&(r.memoizedState=s),s}function _0(r){var s=L0(r).next.queue;zl(r,s,{},cn())}function ng(){return Ue(Wl)}function U0(){return we().memoizedState}function q0(){return we().memoizedState}function _A(r){for(var s=r.return;s!==null;){switch(s.tag){case 24:case 3:var o=cn();r=vs(o);var l=ws(s,r,o);l!==null&&(fn(l,s,o),kl(l,s,o)),s={cache:Mh()},r.payload=s;return}s=s.return}}function UA(r,s,o){var l=cn();o={lane:l,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},Lc(r)?J0(s,o):(o=xh(r,s,o,l),o!==null&&(fn(o,r,l),H0(o,s,l)))}function P0(r,s,o){var l=cn();zl(r,s,o,l)}function zl(r,s,o,l){var f={lane:l,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(Lc(r))J0(s,f);else{var m=r.alternate;if(r.lanes===0&&(m===null||m.lanes===0)&&(m=s.lastRenderedReducer,m!==null))try{var b=s.lastRenderedState,A=m(b,o);if(f.hasEagerState=!0,f.eagerState=A,sn(A,b))return wc(r,s,f,0),ee===null&&vc(),!1}catch{}finally{}if(o=xh(r,s,f,l),o!==null)return fn(o,r,l),H0(o,s,l),!0}return!1}function rg(r,s,o,l){if(l={lane:2,revertLane:zg(),action:l,hasEagerState:!1,eagerState:null,next:null},Lc(r)){if(s)throw Error(i(479))}else s=xh(r,o,l,2),s!==null&&fn(s,r,2)}function Lc(r){var s=r.alternate;return r===Rt||s!==null&&s===Rt}function J0(r,s){ao=Oc=!0;var o=r.pending;o===null?s.next=s:(s.next=o.next,o.next=s),r.pending=s}function H0(r,s,o){if((o&4194048)!==0){var l=s.lanes;l&=r.pendingLanes,o|=l,s.lanes=o,tc(r,o)}}var _c={readContext:Ue,use:Mc,useCallback:de,useContext:de,useEffect:de,useImperativeHandle:de,useLayoutEffect:de,useInsertionEffect:de,useMemo:de,useReducer:de,useRef:de,useState:de,useDebugValue:de,useDeferredValue:de,useTransition:de,useSyncExternalStore:de,useId:de,useHostTransitionStatus:de,useFormState:de,useActionState:de,useOptimistic:de,useMemoCache:de,useCacheRefresh:de},$0={readContext:Ue,use:Mc,useCallback:function(r,s){return Xe().memoizedState=[r,s===void 0?null:s],r},useContext:Ue,useEffect:N0,useImperativeHandle:function(r,s,o){o=o!=null?o.concat([r]):null,zc(4194308,4,O0.bind(null,s,r),o)},useLayoutEffect:function(r,s){return zc(4194308,4,r,s)},useInsertionEffect:function(r,s){zc(4,2,r,s)},useMemo:function(r,s){var o=Xe();s=s===void 0?null:s;var l=r();if(ya){nr(!0);try{r()}finally{nr(!1)}}return o.memoizedState=[l,s],l},useReducer:function(r,s,o){var l=Xe();if(o!==void 0){var f=o(s);if(ya){nr(!0);try{o(s)}finally{nr(!1)}}}else f=s;return l.memoizedState=l.baseState=f,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:f},l.queue=r,r=r.dispatch=UA.bind(null,Rt,r),[l.memoizedState,r]},useRef:function(r){var s=Xe();return r={current:r},s.memoizedState=r},useState:function(r){r=Zh(r);var s=r.queue,o=P0.bind(null,Rt,s);return s.dispatch=o,[r.memoizedState,o]},useDebugValue:Wh,useDeferredValue:function(r,s){var o=Xe();return tg(o,r,s)},useTransition:function(){var r=Zh(!1);return r=z0.bind(null,Rt,r.queue,!0,!1),Xe().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,s,o){var l=Rt,f=Xe();if(jt){if(o===void 0)throw Error(i(407));o=o()}else{if(o=s(),ee===null)throw Error(i(349));(Pt&124)!==0||c0(l,s,o)}f.memoizedState=o;var m={value:o,getSnapshot:s};return f.queue=m,N0(d0.bind(null,l,m,r),[r]),l.flags|=2048,lo(9,Bc(),f0.bind(null,l,m,o,s),null),o},useId:function(){var r=Xe(),s=ee.identifierPrefix;if(jt){var o=zr,l=Br;o=(l&~(1<<32-Ie(l)-1)).toString(32)+o,s="«"+s+"R"+o,o=Ic++,0<o&&(s+="H"+o.toString(32)),s+="»"}else o=MA++,s="«"+s+"r"+o.toString(32)+"»";return r.memoizedState=s},useHostTransitionStatus:ng,useFormState:b0,useActionState:b0,useOptimistic:function(r){var s=Xe();s.memoizedState=s.baseState=r;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=rg.bind(null,Rt,!0,o),o.dispatch=s,[r,s]},useMemoCache:Xh,useCacheRefresh:function(){return Xe().memoizedState=_A.bind(null,Rt)}},V0={readContext:Ue,use:Mc,useCallback:M0,useContext:Ue,useEffect:D0,useImperativeHandle:I0,useInsertionEffect:C0,useLayoutEffect:k0,useMemo:R0,useReducer:Rc,useRef:E0,useState:function(){return Rc(Ur)},useDebugValue:Wh,useDeferredValue:function(r,s){var o=we();return B0(o,Ft.memoizedState,r,s)},useTransition:function(){var r=Rc(Ur)[0],s=we().memoizedState;return[typeof r=="boolean"?r:Rl(r),s]},useSyncExternalStore:u0,useId:U0,useHostTransitionStatus:ng,useFormState:x0,useActionState:x0,useOptimistic:function(r,s){var o=we();return m0(o,Ft,r,s)},useMemoCache:Xh,useCacheRefresh:q0},qA={readContext:Ue,use:Mc,useCallback:M0,useContext:Ue,useEffect:D0,useImperativeHandle:I0,useInsertionEffect:C0,useLayoutEffect:k0,useMemo:R0,useReducer:Fh,useRef:E0,useState:function(){return Fh(Ur)},useDebugValue:Wh,useDeferredValue:function(r,s){var o=we();return Ft===null?tg(o,r,s):B0(o,Ft.memoizedState,r,s)},useTransition:function(){var r=Fh(Ur)[0],s=we().memoizedState;return[typeof r=="boolean"?r:Rl(r),s]},useSyncExternalStore:u0,useId:U0,useHostTransitionStatus:ng,useFormState:A0,useActionState:A0,useOptimistic:function(r,s){var o=we();return Ft!==null?m0(o,Ft,r,s):(o.baseState=r,[r,o.queue.dispatch])},useMemoCache:Xh,useCacheRefresh:q0},uo=null,Ll=0;function Uc(r){var s=Ll;return Ll+=1,uo===null&&(uo=[]),e0(uo,r,s)}function _l(r,s){s=s.props.ref,r.ref=s!==void 0?s:null}function qc(r,s){throw s.$$typeof===w?Error(i(525)):(r=Object.prototype.toString.call(s),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r)))}function j0(r){var s=r._init;return s(r._payload)}function Y0(r){function s($,L){if(r){var Y=$.deletions;Y===null?($.deletions=[L],$.flags|=16):Y.push(L)}}function o($,L){if(!r)return null;for(;L!==null;)s($,L),L=L.sibling;return null}function l($){for(var L=new Map;$!==null;)$.key!==null?L.set($.key,$):L.set($.index,$),$=$.sibling;return L}function f($,L){return $=Rr($,L),$.index=0,$.sibling=null,$}function m($,L,Y){return $.index=Y,r?(Y=$.alternate,Y!==null?(Y=Y.index,Y<L?($.flags|=67108866,L):Y):($.flags|=67108866,L)):($.flags|=1048576,L)}function b($){return r&&$.alternate===null&&($.flags|=67108866),$}function A($,L,Y,at){return L===null||L.tag!==6?(L=Ah(Y,$.mode,at),L.return=$,L):(L=f(L,Y),L.return=$,L)}function R($,L,Y,at){var vt=Y.type;return vt===x?st($,L,Y.props.children,at,Y.key):L!==null&&(L.elementType===vt||typeof vt=="object"&&vt!==null&&vt.$$typeof===W&&j0(vt)===L.type)?(L=f(L,Y.props),_l(L,Y),L.return=$,L):(L=bc(Y.type,Y.key,Y.props,null,$.mode,at),_l(L,Y),L.return=$,L)}function X($,L,Y,at){return L===null||L.tag!==4||L.stateNode.containerInfo!==Y.containerInfo||L.stateNode.implementation!==Y.implementation?(L=Eh(Y,$.mode,at),L.return=$,L):(L=f(L,Y.children||[]),L.return=$,L)}function st($,L,Y,at,vt){return L===null||L.tag!==7?(L=la(Y,$.mode,at,vt),L.return=$,L):(L=f(L,Y),L.return=$,L)}function lt($,L,Y){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=Ah(""+L,$.mode,Y),L.return=$,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case v:return Y=bc(L.type,L.key,L.props,null,$.mode,Y),_l(Y,L),Y.return=$,Y;case S:return L=Eh(L,$.mode,Y),L.return=$,L;case W:var at=L._init;return L=at(L._payload),lt($,L,Y)}if(j(L)||ot(L))return L=la(L,$.mode,Y,null),L.return=$,L;if(typeof L.then=="function")return lt($,Uc(L),Y);if(L.$$typeof===N)return lt($,Ec($,L),Y);qc($,L)}return null}function K($,L,Y,at){var vt=L!==null?L.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return vt!==null?null:A($,L,""+Y,at);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case v:return Y.key===vt?R($,L,Y,at):null;case S:return Y.key===vt?X($,L,Y,at):null;case W:return vt=Y._init,Y=vt(Y._payload),K($,L,Y,at)}if(j(Y)||ot(Y))return vt!==null?null:st($,L,Y,at,null);if(typeof Y.then=="function")return K($,L,Uc(Y),at);if(Y.$$typeof===N)return K($,L,Ec($,Y),at);qc($,Y)}return null}function Z($,L,Y,at,vt){if(typeof at=="string"&&at!==""||typeof at=="number"||typeof at=="bigint")return $=$.get(Y)||null,A(L,$,""+at,vt);if(typeof at=="object"&&at!==null){switch(at.$$typeof){case v:return $=$.get(at.key===null?Y:at.key)||null,R(L,$,at,vt);case S:return $=$.get(at.key===null?Y:at.key)||null,X(L,$,at,vt);case W:var Bt=at._init;return at=Bt(at._payload),Z($,L,Y,at,vt)}if(j(at)||ot(at))return $=$.get(Y)||null,st(L,$,at,vt,null);if(typeof at.then=="function")return Z($,L,Y,Uc(at),vt);if(at.$$typeof===N)return Z($,L,Y,Ec(L,at),vt);qc(L,at)}return null}function kt($,L,Y,at){for(var vt=null,Bt=null,St=L,Dt=L=0,ke=null;St!==null&&Dt<Y.length;Dt++){St.index>Dt?(ke=St,St=null):ke=St.sibling;var $t=K($,St,Y[Dt],at);if($t===null){St===null&&(St=ke);break}r&&St&&$t.alternate===null&&s($,St),L=m($t,L,Dt),Bt===null?vt=$t:Bt.sibling=$t,Bt=$t,St=ke}if(Dt===Y.length)return o($,St),jt&&ca($,Dt),vt;if(St===null){for(;Dt<Y.length;Dt++)St=lt($,Y[Dt],at),St!==null&&(L=m(St,L,Dt),Bt===null?vt=St:Bt.sibling=St,Bt=St);return jt&&ca($,Dt),vt}for(St=l(St);Dt<Y.length;Dt++)ke=Z(St,$,Dt,Y[Dt],at),ke!==null&&(r&&ke.alternate!==null&&St.delete(ke.key===null?Dt:ke.key),L=m(ke,L,Dt),Bt===null?vt=ke:Bt.sibling=ke,Bt=ke);return r&&St.forEach(function(Ls){return s($,Ls)}),jt&&ca($,Dt),vt}function Nt($,L,Y,at){if(Y==null)throw Error(i(151));for(var vt=null,Bt=null,St=L,Dt=L=0,ke=null,$t=Y.next();St!==null&&!$t.done;Dt++,$t=Y.next()){St.index>Dt?(ke=St,St=null):ke=St.sibling;var Ls=K($,St,$t.value,at);if(Ls===null){St===null&&(St=ke);break}r&&St&&Ls.alternate===null&&s($,St),L=m(Ls,L,Dt),Bt===null?vt=Ls:Bt.sibling=Ls,Bt=Ls,St=ke}if($t.done)return o($,St),jt&&ca($,Dt),vt;if(St===null){for(;!$t.done;Dt++,$t=Y.next())$t=lt($,$t.value,at),$t!==null&&(L=m($t,L,Dt),Bt===null?vt=$t:Bt.sibling=$t,Bt=$t);return jt&&ca($,Dt),vt}for(St=l(St);!$t.done;Dt++,$t=Y.next())$t=Z(St,$,Dt,$t.value,at),$t!==null&&(r&&$t.alternate!==null&&St.delete($t.key===null?Dt:$t.key),L=m($t,L,Dt),Bt===null?vt=$t:Bt.sibling=$t,Bt=$t);return r&&St.forEach(function(PE){return s($,PE)}),jt&&ca($,Dt),vt}function Qt($,L,Y,at){if(typeof Y=="object"&&Y!==null&&Y.type===x&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case v:t:{for(var vt=Y.key;L!==null;){if(L.key===vt){if(vt=Y.type,vt===x){if(L.tag===7){o($,L.sibling),at=f(L,Y.props.children),at.return=$,$=at;break t}}else if(L.elementType===vt||typeof vt=="object"&&vt!==null&&vt.$$typeof===W&&j0(vt)===L.type){o($,L.sibling),at=f(L,Y.props),_l(at,Y),at.return=$,$=at;break t}o($,L);break}else s($,L);L=L.sibling}Y.type===x?(at=la(Y.props.children,$.mode,at,Y.key),at.return=$,$=at):(at=bc(Y.type,Y.key,Y.props,null,$.mode,at),_l(at,Y),at.return=$,$=at)}return b($);case S:t:{for(vt=Y.key;L!==null;){if(L.key===vt)if(L.tag===4&&L.stateNode.containerInfo===Y.containerInfo&&L.stateNode.implementation===Y.implementation){o($,L.sibling),at=f(L,Y.children||[]),at.return=$,$=at;break t}else{o($,L);break}else s($,L);L=L.sibling}at=Eh(Y,$.mode,at),at.return=$,$=at}return b($);case W:return vt=Y._init,Y=vt(Y._payload),Qt($,L,Y,at)}if(j(Y))return kt($,L,Y,at);if(ot(Y)){if(vt=ot(Y),typeof vt!="function")throw Error(i(150));return Y=vt.call(Y),Nt($,L,Y,at)}if(typeof Y.then=="function")return Qt($,L,Uc(Y),at);if(Y.$$typeof===N)return Qt($,L,Ec($,Y),at);qc($,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint"?(Y=""+Y,L!==null&&L.tag===6?(o($,L.sibling),at=f(L,Y),at.return=$,$=at):(o($,L),at=Ah(Y,$.mode,at),at.return=$,$=at),b($)):o($,L)}return function($,L,Y,at){try{Ll=0;var vt=Qt($,L,Y,at);return uo=null,vt}catch(St){if(St===Dl||St===Dc)throw St;var Bt=an(29,St,null,$.mode);return Bt.lanes=at,Bt.return=$,Bt}finally{}}}var co=Y0(!0),G0=Y0(!1),xn=P(null),sr=null;function bs(r){var s=r.alternate;rt(Te,Te.current&1),rt(xn,r),sr===null&&(s===null||so.current!==null||s.memoizedState!==null)&&(sr=r)}function X0(r){if(r.tag===22){if(rt(Te,Te.current),rt(xn,r),sr===null){var s=r.alternate;s!==null&&s.memoizedState!==null&&(sr=r)}}else xs()}function xs(){rt(Te,Te.current),rt(xn,xn.current)}function qr(r){tt(xn),sr===r&&(sr=null),tt(Te)}var Te=P(0);function Pc(r){for(var s=r;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||Gg(o)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function ig(r,s,o,l){s=r.memoizedState,o=o(l,s),o=o==null?s:y({},s,o),r.memoizedState=o,r.lanes===0&&(r.updateQueue.baseState=o)}var sg={enqueueSetState:function(r,s,o){r=r._reactInternals;var l=cn(),f=vs(l);f.payload=s,o!=null&&(f.callback=o),s=ws(r,f,l),s!==null&&(fn(s,r,l),kl(s,r,l))},enqueueReplaceState:function(r,s,o){r=r._reactInternals;var l=cn(),f=vs(l);f.tag=1,f.payload=s,o!=null&&(f.callback=o),s=ws(r,f,l),s!==null&&(fn(s,r,l),kl(s,r,l))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var o=cn(),l=vs(o);l.tag=2,s!=null&&(l.callback=s),s=ws(r,l,o),s!==null&&(fn(s,r,o),kl(s,r,o))}};function K0(r,s,o,l,f,m,b){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(l,m,b):s.prototype&&s.prototype.isPureReactComponent?!wl(o,l)||!wl(f,m):!0}function F0(r,s,o,l){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,l),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,l),s.state!==r&&sg.enqueueReplaceState(s,s.state,null)}function pa(r,s){var o=s;if("ref"in s){o={};for(var l in s)l!=="ref"&&(o[l]=s[l])}if(r=r.defaultProps){o===s&&(o=y({},o));for(var f in r)o[f]===void 0&&(o[f]=r[f])}return o}var Jc=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)};function Z0(r){Jc(r)}function Q0(r){console.error(r)}function W0(r){Jc(r)}function Hc(r,s){try{var o=r.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(l){setTimeout(function(){throw l})}}function tv(r,s,o){try{var l=r.onCaughtError;l(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function ag(r,s,o){return o=vs(o),o.tag=3,o.payload={element:null},o.callback=function(){Hc(r,s)},o}function ev(r){return r=vs(r),r.tag=3,r}function nv(r,s,o,l){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var m=l.value;r.payload=function(){return f(m)},r.callback=function(){tv(s,o,l)}}var b=o.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(r.callback=function(){tv(s,o,l),typeof f!="function"&&(Cs===null?Cs=new Set([this]):Cs.add(this));var A=l.stack;this.componentDidCatch(l.value,{componentStack:A!==null?A:""})})}function PA(r,s,o,l,f){if(o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(s=o.alternate,s!==null&&Al(s,o,f,!0),o=xn.current,o!==null){switch(o.tag){case 13:return sr===null?Og():o.alternate===null&&oe===0&&(oe=3),o.flags&=-257,o.flags|=65536,o.lanes=f,l===zh?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([l]):s.add(l),Mg(r,l,f)),!1;case 22:return o.flags|=65536,l===zh?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([l])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([l]):o.add(l)),Mg(r,l,f)),!1}throw Error(i(435,o.tag))}return Mg(r,l,f),Og(),!1}if(jt)return s=xn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=f,l!==Ch&&(r=Error(i(422),{cause:l}),Tl(vn(r,o)))):(l!==Ch&&(s=Error(i(423),{cause:l}),Tl(vn(s,o))),r=r.current.alternate,r.flags|=65536,f&=-f,r.lanes|=f,l=vn(l,o),f=ag(r.stateNode,l,f),Uh(r,f),oe!==4&&(oe=2)),!1;var m=Error(i(520),{cause:l});if(m=vn(m,o),Vl===null?Vl=[m]:Vl.push(m),oe!==4&&(oe=2),s===null)return!0;l=vn(l,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,r=f&-f,o.lanes|=r,r=ag(o.stateNode,l,r),Uh(o,r),!1;case 1:if(s=o.type,m=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Cs===null||!Cs.has(m))))return o.flags|=65536,f&=-f,o.lanes|=f,f=ev(f),nv(f,r,o,l),Uh(o,f),!1}o=o.return}while(o!==null);return!1}var rv=Error(i(461)),De=!1;function Me(r,s,o,l){s.child=r===null?G0(s,null,o,l):co(s,r.child,o,l)}function iv(r,s,o,l,f){o=o.render;var m=s.ref;if("ref"in l){var b={};for(var A in l)A!=="ref"&&(b[A]=l[A])}else b=l;return ga(s),l=$h(r,s,o,b,m,f),A=Vh(),r!==null&&!De?(jh(r,s,f),Pr(r,s,f)):(jt&&A&&Nh(s),s.flags|=1,Me(r,s,l,f),s.child)}function sv(r,s,o,l,f){if(r===null){var m=o.type;return typeof m=="function"&&!Th(m)&&m.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=m,av(r,s,m,l,f)):(r=bc(o.type,null,l,s,s.mode,f),r.ref=s.ref,r.return=s,s.child=r)}if(m=r.child,!gg(r,f)){var b=m.memoizedProps;if(o=o.compare,o=o!==null?o:wl,o(b,l)&&r.ref===s.ref)return Pr(r,s,f)}return s.flags|=1,r=Rr(m,l),r.ref=s.ref,r.return=s,s.child=r}function av(r,s,o,l,f){if(r!==null){var m=r.memoizedProps;if(wl(m,l)&&r.ref===s.ref)if(De=!1,s.pendingProps=l=m,gg(r,f))(r.flags&131072)!==0&&(De=!0);else return s.lanes=r.lanes,Pr(r,s,f)}return og(r,s,o,l,f)}function ov(r,s,o){var l=s.pendingProps,f=l.children,m=r!==null?r.memoizedState:null;if(l.mode==="hidden"){if((s.flags&128)!==0){if(l=m!==null?m.baseLanes|o:o,r!==null){for(f=s.child=r.child,m=0;f!==null;)m=m|f.lanes|f.childLanes,f=f.sibling;s.childLanes=m&~l}else s.childLanes=0,s.child=null;return lv(r,s,l,o)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},r!==null&&Nc(s,m!==null?m.cachePool:null),m!==null?a0(s,m):Ph(),X0(s);else return s.lanes=s.childLanes=536870912,lv(r,s,m!==null?m.baseLanes|o:o,o)}else m!==null?(Nc(s,m.cachePool),a0(s,m),xs(),s.memoizedState=null):(r!==null&&Nc(s,null),Ph(),xs());return Me(r,s,f,o),s.child}function lv(r,s,o,l){var f=Bh();return f=f===null?null:{parent:xe._currentValue,pool:f},s.memoizedState={baseLanes:o,cachePool:f},r!==null&&Nc(s,null),Ph(),X0(s),r!==null&&Al(r,s,l,!0),null}function $c(r,s){var o=s.ref;if(o===null)r!==null&&r.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(i(284));(r===null||r.ref!==o)&&(s.flags|=4194816)}}function og(r,s,o,l,f){return ga(s),o=$h(r,s,o,l,void 0,f),l=Vh(),r!==null&&!De?(jh(r,s,f),Pr(r,s,f)):(jt&&l&&Nh(s),s.flags|=1,Me(r,s,o,f),s.child)}function uv(r,s,o,l,f,m){return ga(s),s.updateQueue=null,o=l0(s,l,o,f),o0(r),l=Vh(),r!==null&&!De?(jh(r,s,m),Pr(r,s,m)):(jt&&l&&Nh(s),s.flags|=1,Me(r,s,o,m),s.child)}function cv(r,s,o,l,f){if(ga(s),s.stateNode===null){var m=to,b=o.contextType;typeof b=="object"&&b!==null&&(m=Ue(b)),m=new o(l,m),s.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=sg,s.stateNode=m,m._reactInternals=s,m=s.stateNode,m.props=l,m.state=s.memoizedState,m.refs={},Lh(s),b=o.contextType,m.context=typeof b=="object"&&b!==null?Ue(b):to,m.state=s.memoizedState,b=o.getDerivedStateFromProps,typeof b=="function"&&(ig(s,o,b,l),m.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(b=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),b!==m.state&&sg.enqueueReplaceState(m,m.state,null),Il(s,l,m,f),Ol(),m.state=s.memoizedState),typeof m.componentDidMount=="function"&&(s.flags|=4194308),l=!0}else if(r===null){m=s.stateNode;var A=s.memoizedProps,R=pa(o,A);m.props=R;var X=m.context,st=o.contextType;b=to,typeof st=="object"&&st!==null&&(b=Ue(st));var lt=o.getDerivedStateFromProps;st=typeof lt=="function"||typeof m.getSnapshotBeforeUpdate=="function",A=s.pendingProps!==A,st||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(A||X!==b)&&F0(s,m,l,b),ps=!1;var K=s.memoizedState;m.state=K,Il(s,l,m,f),Ol(),X=s.memoizedState,A||K!==X||ps?(typeof lt=="function"&&(ig(s,o,lt,l),X=s.memoizedState),(R=ps||K0(s,o,R,l,K,X,b))?(st||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(s.flags|=4194308)):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=l,s.memoizedState=X),m.props=l,m.state=X,m.context=b,l=R):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),l=!1)}else{m=s.stateNode,_h(r,s),b=s.memoizedProps,st=pa(o,b),m.props=st,lt=s.pendingProps,K=m.context,X=o.contextType,R=to,typeof X=="object"&&X!==null&&(R=Ue(X)),A=o.getDerivedStateFromProps,(X=typeof A=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(b!==lt||K!==R)&&F0(s,m,l,R),ps=!1,K=s.memoizedState,m.state=K,Il(s,l,m,f),Ol();var Z=s.memoizedState;b!==lt||K!==Z||ps||r!==null&&r.dependencies!==null&&Ac(r.dependencies)?(typeof A=="function"&&(ig(s,o,A,l),Z=s.memoizedState),(st=ps||K0(s,o,st,l,K,Z,R)||r!==null&&r.dependencies!==null&&Ac(r.dependencies))?(X||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(l,Z,R),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(l,Z,R)),typeof m.componentDidUpdate=="function"&&(s.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof m.componentDidUpdate!="function"||b===r.memoizedProps&&K===r.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||b===r.memoizedProps&&K===r.memoizedState||(s.flags|=1024),s.memoizedProps=l,s.memoizedState=Z),m.props=l,m.state=Z,m.context=R,l=st):(typeof m.componentDidUpdate!="function"||b===r.memoizedProps&&K===r.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||b===r.memoizedProps&&K===r.memoizedState||(s.flags|=1024),l=!1)}return m=l,$c(r,s),l=(s.flags&128)!==0,m||l?(m=s.stateNode,o=l&&typeof o.getDerivedStateFromError!="function"?null:m.render(),s.flags|=1,r!==null&&l?(s.child=co(s,r.child,null,f),s.child=co(s,null,o,f)):Me(r,s,o,f),s.memoizedState=m.state,r=s.child):r=Pr(r,s,f),r}function fv(r,s,o,l){return xl(),s.flags|=256,Me(r,s,o,l),s.child}var lg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ug(r){return{baseLanes:r,cachePool:Qp()}}function cg(r,s,o){return r=r!==null?r.childLanes&~o:0,s&&(r|=Tn),r}function dv(r,s,o){var l=s.pendingProps,f=!1,m=(s.flags&128)!==0,b;if((b=m)||(b=r!==null&&r.memoizedState===null?!1:(Te.current&2)!==0),b&&(f=!0,s.flags&=-129),b=(s.flags&32)!==0,s.flags&=-33,r===null){if(jt){if(f?bs(s):xs(),jt){var A=ae,R;if(R=A){t:{for(R=A,A=ir;R.nodeType!==8;){if(!A){A=null;break t}if(R=jn(R.nextSibling),R===null){A=null;break t}}A=R}A!==null?(s.memoizedState={dehydrated:A,treeContext:ua!==null?{id:Br,overflow:zr}:null,retryLane:536870912,hydrationErrors:null},R=an(18,null,null,0),R.stateNode=A,R.return=s,s.child=R,$e=s,ae=null,R=!0):R=!1}R||da(s)}if(A=s.memoizedState,A!==null&&(A=A.dehydrated,A!==null))return Gg(A)?s.lanes=32:s.lanes=536870912,null;qr(s)}return A=l.children,l=l.fallback,f?(xs(),f=s.mode,A=Vc({mode:"hidden",children:A},f),l=la(l,f,o,null),A.return=s,l.return=s,A.sibling=l,s.child=A,f=s.child,f.memoizedState=ug(o),f.childLanes=cg(r,b,o),s.memoizedState=lg,l):(bs(s),fg(s,A))}if(R=r.memoizedState,R!==null&&(A=R.dehydrated,A!==null)){if(m)s.flags&256?(bs(s),s.flags&=-257,s=dg(r,s,o)):s.memoizedState!==null?(xs(),s.child=r.child,s.flags|=128,s=null):(xs(),f=l.fallback,A=s.mode,l=Vc({mode:"visible",children:l.children},A),f=la(f,A,o,null),f.flags|=2,l.return=s,f.return=s,l.sibling=f,s.child=l,co(s,r.child,null,o),l=s.child,l.memoizedState=ug(o),l.childLanes=cg(r,b,o),s.memoizedState=lg,s=f);else if(bs(s),Gg(A)){if(b=A.nextSibling&&A.nextSibling.dataset,b)var X=b.dgst;b=X,l=Error(i(419)),l.stack="",l.digest=b,Tl({value:l,source:null,stack:null}),s=dg(r,s,o)}else if(De||Al(r,s,o,!1),b=(o&r.childLanes)!==0,De||b){if(b=ee,b!==null&&(l=o&-o,l=(l&42)!==0?1:il(l),l=(l&(b.suspendedLanes|o))!==0?0:l,l!==0&&l!==R.retryLane))throw R.retryLane=l,Wa(r,l),fn(b,r,l),rv;A.data==="$?"||Og(),s=dg(r,s,o)}else A.data==="$?"?(s.flags|=192,s.child=r.child,s=null):(r=R.treeContext,ae=jn(A.nextSibling),$e=s,jt=!0,fa=null,ir=!1,r!==null&&(Sn[bn++]=Br,Sn[bn++]=zr,Sn[bn++]=ua,Br=r.id,zr=r.overflow,ua=s),s=fg(s,l.children),s.flags|=4096);return s}return f?(xs(),f=l.fallback,A=s.mode,R=r.child,X=R.sibling,l=Rr(R,{mode:"hidden",children:l.children}),l.subtreeFlags=R.subtreeFlags&65011712,X!==null?f=Rr(X,f):(f=la(f,A,o,null),f.flags|=2),f.return=s,l.return=s,l.sibling=f,s.child=l,l=f,f=s.child,A=r.child.memoizedState,A===null?A=ug(o):(R=A.cachePool,R!==null?(X=xe._currentValue,R=R.parent!==X?{parent:X,pool:X}:R):R=Qp(),A={baseLanes:A.baseLanes|o,cachePool:R}),f.memoizedState=A,f.childLanes=cg(r,b,o),s.memoizedState=lg,l):(bs(s),o=r.child,r=o.sibling,o=Rr(o,{mode:"visible",children:l.children}),o.return=s,o.sibling=null,r!==null&&(b=s.deletions,b===null?(s.deletions=[r],s.flags|=16):b.push(r)),s.child=o,s.memoizedState=null,o)}function fg(r,s){return s=Vc({mode:"visible",children:s},r.mode),s.return=r,r.child=s}function Vc(r,s){return r=an(22,r,null,s),r.lanes=0,r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},r}function dg(r,s,o){return co(s,r.child,null,o),r=fg(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function hv(r,s,o){r.lanes|=s;var l=r.alternate;l!==null&&(l.lanes|=s),Oh(r.return,s,o)}function hg(r,s,o,l,f){var m=r.memoizedState;m===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:l,tail:o,tailMode:f}:(m.isBackwards=s,m.rendering=null,m.renderingStartTime=0,m.last=l,m.tail=o,m.tailMode=f)}function gv(r,s,o){var l=s.pendingProps,f=l.revealOrder,m=l.tail;if(Me(r,s,l.children,o),l=Te.current,(l&2)!==0)l=l&1|2,s.flags|=128;else{if(r!==null&&(r.flags&128)!==0)t:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&hv(r,o,s);else if(r.tag===19)hv(r,o,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break t;for(;r.sibling===null;){if(r.return===null||r.return===s)break t;r=r.return}r.sibling.return=r.return,r=r.sibling}l&=1}switch(rt(Te,l),f){case"forwards":for(o=s.child,f=null;o!==null;)r=o.alternate,r!==null&&Pc(r)===null&&(f=o),o=o.sibling;o=f,o===null?(f=s.child,s.child=null):(f=o.sibling,o.sibling=null),hg(s,!1,f,o,m);break;case"backwards":for(o=null,f=s.child,s.child=null;f!==null;){if(r=f.alternate,r!==null&&Pc(r)===null){s.child=f;break}r=f.sibling,f.sibling=o,o=f,f=r}hg(s,!0,o,null,m);break;case"together":hg(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Pr(r,s,o){if(r!==null&&(s.dependencies=r.dependencies),Ds|=s.lanes,(o&s.childLanes)===0)if(r!==null){if(Al(r,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(r!==null&&s.child!==r.child)throw Error(i(153));if(s.child!==null){for(r=s.child,o=Rr(r,r.pendingProps),s.child=o,o.return=s;r.sibling!==null;)r=r.sibling,o=o.sibling=Rr(r,r.pendingProps),o.return=s;o.sibling=null}return s.child}function gg(r,s){return(r.lanes&s)!==0?!0:(r=r.dependencies,!!(r!==null&&Ac(r)))}function JA(r,s,o){switch(s.tag){case 3:pt(s,s.stateNode.containerInfo),ys(s,xe,r.memoizedState.cache),xl();break;case 27:case 5:Vt(s);break;case 4:pt(s,s.stateNode.containerInfo);break;case 10:ys(s,s.type,s.memoizedProps.value);break;case 13:var l=s.memoizedState;if(l!==null)return l.dehydrated!==null?(bs(s),s.flags|=128,null):(o&s.child.childLanes)!==0?dv(r,s,o):(bs(s),r=Pr(r,s,o),r!==null?r.sibling:null);bs(s);break;case 19:var f=(r.flags&128)!==0;if(l=(o&s.childLanes)!==0,l||(Al(r,s,o,!1),l=(o&s.childLanes)!==0),f){if(l)return gv(r,s,o);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),rt(Te,Te.current),l)break;return null;case 22:case 23:return s.lanes=0,ov(r,s,o);case 24:ys(s,xe,r.memoizedState.cache)}return Pr(r,s,o)}function mv(r,s,o){if(r!==null)if(r.memoizedProps!==s.pendingProps)De=!0;else{if(!gg(r,o)&&(s.flags&128)===0)return De=!1,JA(r,s,o);De=(r.flags&131072)!==0}else De=!1,jt&&(s.flags&1048576)!==0&&jp(s,Tc,s.index);switch(s.lanes=0,s.tag){case 16:t:{r=s.pendingProps;var l=s.elementType,f=l._init;if(l=f(l._payload),s.type=l,typeof l=="function")Th(l)?(r=pa(l,r),s.tag=1,s=cv(null,s,l,r,o)):(s.tag=0,s=og(null,s,l,r,o));else{if(l!=null){if(f=l.$$typeof,f===O){s.tag=11,s=iv(null,s,l,r,o);break t}else if(f===U){s.tag=14,s=sv(null,s,l,r,o);break t}}throw s=M(l)||l,Error(i(306,s,""))}}return s;case 0:return og(r,s,s.type,s.pendingProps,o);case 1:return l=s.type,f=pa(l,s.pendingProps),cv(r,s,l,f,o);case 3:t:{if(pt(s,s.stateNode.containerInfo),r===null)throw Error(i(387));l=s.pendingProps;var m=s.memoizedState;f=m.element,_h(r,s),Il(s,l,null,o);var b=s.memoizedState;if(l=b.cache,ys(s,xe,l),l!==m.cache&&Ih(s,[xe],o,!0),Ol(),l=b.element,m.isDehydrated)if(m={element:l,isDehydrated:!1,cache:b.cache},s.updateQueue.baseState=m,s.memoizedState=m,s.flags&256){s=fv(r,s,l,o);break t}else if(l!==f){f=vn(Error(i(424)),s),Tl(f),s=fv(r,s,l,o);break t}else{switch(r=s.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(ae=jn(r.firstChild),$e=s,jt=!0,fa=null,ir=!0,o=G0(s,null,l,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(xl(),l===f){s=Pr(r,s,o);break t}Me(r,s,l,o)}s=s.child}return s;case 26:return $c(r,s),r===null?(o=ww(s.type,null,s.pendingProps,null))?s.memoizedState=o:jt||(o=s.type,r=s.pendingProps,l=sf(dt.current).createElement(o),l[Ne]=s,l[_e]=r,Be(l,o,r),pe(l),s.stateNode=l):s.memoizedState=ww(s.type,r.memoizedProps,s.pendingProps,r.memoizedState),null;case 27:return Vt(s),r===null&&jt&&(l=s.stateNode=yw(s.type,s.pendingProps,dt.current),$e=s,ir=!0,f=ae,Is(s.type)?(Xg=f,ae=jn(l.firstChild)):ae=f),Me(r,s,s.pendingProps.children,o),$c(r,s),r===null&&(s.flags|=4194304),s.child;case 5:return r===null&&jt&&((f=l=ae)&&(l=mE(l,s.type,s.pendingProps,ir),l!==null?(s.stateNode=l,$e=s,ae=jn(l.firstChild),ir=!1,f=!0):f=!1),f||da(s)),Vt(s),f=s.type,m=s.pendingProps,b=r!==null?r.memoizedProps:null,l=m.children,Vg(f,m)?l=null:b!==null&&Vg(f,b)&&(s.flags|=32),s.memoizedState!==null&&(f=$h(r,s,RA,null,null,o),Wl._currentValue=f),$c(r,s),Me(r,s,l,o),s.child;case 6:return r===null&&jt&&((r=o=ae)&&(o=yE(o,s.pendingProps,ir),o!==null?(s.stateNode=o,$e=s,ae=null,r=!0):r=!1),r||da(s)),null;case 13:return dv(r,s,o);case 4:return pt(s,s.stateNode.containerInfo),l=s.pendingProps,r===null?s.child=co(s,null,l,o):Me(r,s,l,o),s.child;case 11:return iv(r,s,s.type,s.pendingProps,o);case 7:return Me(r,s,s.pendingProps,o),s.child;case 8:return Me(r,s,s.pendingProps.children,o),s.child;case 12:return Me(r,s,s.pendingProps.children,o),s.child;case 10:return l=s.pendingProps,ys(s,s.type,l.value),Me(r,s,l.children,o),s.child;case 9:return f=s.type._context,l=s.pendingProps.children,ga(s),f=Ue(f),l=l(f),s.flags|=1,Me(r,s,l,o),s.child;case 14:return sv(r,s,s.type,s.pendingProps,o);case 15:return av(r,s,s.type,s.pendingProps,o);case 19:return gv(r,s,o);case 31:return l=s.pendingProps,o=s.mode,l={mode:l.mode,children:l.children},r===null?(o=Vc(l,o),o.ref=s.ref,s.child=o,o.return=s,s=o):(o=Rr(r.child,l),o.ref=s.ref,s.child=o,o.return=s,s=o),s;case 22:return ov(r,s,o);case 24:return ga(s),l=Ue(xe),r===null?(f=Bh(),f===null&&(f=ee,m=Mh(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=o),f=m),s.memoizedState={parent:l,cache:f},Lh(s),ys(s,xe,f)):((r.lanes&o)!==0&&(_h(r,s),Il(s,null,null,o),Ol()),f=r.memoizedState,m=s.memoizedState,f.parent!==l?(f={parent:l,cache:l},s.memoizedState=f,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=f),ys(s,xe,l)):(l=m.cache,ys(s,xe,l),l!==f.cache&&Ih(s,[xe],o,!0))),Me(r,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function Jr(r){r.flags|=4}function yv(r,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!Aw(s)){if(s=xn.current,s!==null&&((Pt&4194048)===Pt?sr!==null:(Pt&62914560)!==Pt&&(Pt&536870912)===0||s!==sr))throw Cl=zh,Wp;r.flags|=8192}}function jc(r,s){s!==null&&(r.flags|=4),r.flags&16384&&(s=r.tag!==22?Wu():536870912,r.lanes|=s,mo|=s)}function Ul(r,s){if(!jt)switch(r.tailMode){case"hidden":s=r.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?r.tail=null:o.sibling=null;break;case"collapsed":o=r.tail;for(var l=null;o!==null;)o.alternate!==null&&(l=o),o=o.sibling;l===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:l.sibling=null}}function se(r){var s=r.alternate!==null&&r.alternate.child===r.child,o=0,l=0;if(s)for(var f=r.child;f!==null;)o|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=r,f=f.sibling;else for(f=r.child;f!==null;)o|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=r,f=f.sibling;return r.subtreeFlags|=l,r.childLanes=o,s}function HA(r,s,o){var l=s.pendingProps;switch(Dh(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return se(s),null;case 1:return se(s),null;case 3:return o=s.stateNode,l=null,r!==null&&(l=r.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),_r(xe),Ct(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(r===null||r.child===null)&&(bl(s)?Jr(s):r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Xp())),se(s),null;case 26:return o=s.memoizedState,r===null?(Jr(s),o!==null?(se(s),yv(s,o)):(se(s),s.flags&=-16777217)):o?o!==r.memoizedState?(Jr(s),se(s),yv(s,o)):(se(s),s.flags&=-16777217):(r.memoizedProps!==l&&Jr(s),se(s),s.flags&=-16777217),null;case 27:Ot(s),o=dt.current;var f=s.type;if(r!==null&&s.stateNode!=null)r.memoizedProps!==l&&Jr(s);else{if(!l){if(s.stateNode===null)throw Error(i(166));return se(s),null}r=ut.current,bl(s)?Yp(s):(r=yw(f,l,o),s.stateNode=r,Jr(s))}return se(s),null;case 5:if(Ot(s),o=s.type,r!==null&&s.stateNode!=null)r.memoizedProps!==l&&Jr(s);else{if(!l){if(s.stateNode===null)throw Error(i(166));return se(s),null}if(r=ut.current,bl(s))Yp(s);else{switch(f=sf(dt.current),r){case 1:r=f.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:r=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":r=f.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":r=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":r=f.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof l.is=="string"?f.createElement("select",{is:l.is}):f.createElement("select"),l.multiple?r.multiple=!0:l.size&&(r.size=l.size);break;default:r=typeof l.is=="string"?f.createElement(o,{is:l.is}):f.createElement(o)}}r[Ne]=s,r[_e]=l;t:for(f=s.child;f!==null;){if(f.tag===5||f.tag===6)r.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===s)break t;for(;f.sibling===null;){if(f.return===null||f.return===s)break t;f=f.return}f.sibling.return=f.return,f=f.sibling}s.stateNode=r;t:switch(Be(r,o,l),o){case"button":case"input":case"select":case"textarea":r=!!l.autoFocus;break t;case"img":r=!0;break t;default:r=!1}r&&Jr(s)}}return se(s),s.flags&=-16777217,null;case 6:if(r&&s.stateNode!=null)r.memoizedProps!==l&&Jr(s);else{if(typeof l!="string"&&s.stateNode===null)throw Error(i(166));if(r=dt.current,bl(s)){if(r=s.stateNode,o=s.memoizedProps,l=null,f=$e,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}r[Ne]=s,r=!!(r.nodeValue===o||l!==null&&l.suppressHydrationWarning===!0||uw(r.nodeValue,o)),r||da(s)}else r=sf(r).createTextNode(l),r[Ne]=s,s.stateNode=r}return se(s),null;case 13:if(l=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(f=bl(s),l!==null&&l.dehydrated!==null){if(r===null){if(!f)throw Error(i(318));if(f=s.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(317));f[Ne]=s}else xl(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;se(s),f=!1}else f=Xp(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=f),f=!0;if(!f)return s.flags&256?(qr(s),s):(qr(s),null)}if(qr(s),(s.flags&128)!==0)return s.lanes=o,s;if(o=l!==null,r=r!==null&&r.memoizedState!==null,o){l=s.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool);var m=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),m!==f&&(l.flags|=2048)}return o!==r&&o&&(s.child.flags|=8192),jc(s,s.updateQueue),se(s),null;case 4:return Ct(),r===null&&qg(s.stateNode.containerInfo),se(s),null;case 10:return _r(s.type),se(s),null;case 19:if(tt(Te),f=s.memoizedState,f===null)return se(s),null;if(l=(s.flags&128)!==0,m=f.rendering,m===null)if(l)Ul(f,!1);else{if(oe!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(m=Pc(r),m!==null){for(s.flags|=128,Ul(f,!1),r=m.updateQueue,s.updateQueue=r,jc(s,r),s.subtreeFlags=0,r=o,o=s.child;o!==null;)Vp(o,r),o=o.sibling;return rt(Te,Te.current&1|2),s.child}r=r.sibling}f.tail!==null&&Oe()>Xc&&(s.flags|=128,l=!0,Ul(f,!1),s.lanes=4194304)}else{if(!l)if(r=Pc(m),r!==null){if(s.flags|=128,l=!0,r=r.updateQueue,s.updateQueue=r,jc(s,r),Ul(f,!0),f.tail===null&&f.tailMode==="hidden"&&!m.alternate&&!jt)return se(s),null}else 2*Oe()-f.renderingStartTime>Xc&&o!==536870912&&(s.flags|=128,l=!0,Ul(f,!1),s.lanes=4194304);f.isBackwards?(m.sibling=s.child,s.child=m):(r=f.last,r!==null?r.sibling=m:s.child=m,f.last=m)}return f.tail!==null?(s=f.tail,f.rendering=s,f.tail=s.sibling,f.renderingStartTime=Oe(),s.sibling=null,r=Te.current,rt(Te,l?r&1|2:r&1),s):(se(s),null);case 22:case 23:return qr(s),Jh(),l=s.memoizedState!==null,r!==null?r.memoizedState!==null!==l&&(s.flags|=8192):l&&(s.flags|=8192),l?(o&536870912)!==0&&(s.flags&128)===0&&(se(s),s.subtreeFlags&6&&(s.flags|=8192)):se(s),o=s.updateQueue,o!==null&&jc(s,o.retryQueue),o=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),l=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),l!==o&&(s.flags|=2048),r!==null&&tt(ma),null;case 24:return o=null,r!==null&&(o=r.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),_r(xe),se(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function $A(r,s){switch(Dh(s),s.tag){case 1:return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return _r(xe),Ct(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 26:case 27:case 5:return Ot(s),null;case 13:if(qr(s),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(i(340));xl()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return tt(Te),null;case 4:return Ct(),null;case 10:return _r(s.type),null;case 22:case 23:return qr(s),Jh(),r!==null&&tt(ma),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 24:return _r(xe),null;case 25:return null;default:return null}}function pv(r,s){switch(Dh(s),s.tag){case 3:_r(xe),Ct();break;case 26:case 27:case 5:Ot(s);break;case 4:Ct();break;case 13:qr(s);break;case 19:tt(Te);break;case 10:_r(s.type);break;case 22:case 23:qr(s),Jh(),r!==null&&tt(ma);break;case 24:_r(xe)}}function ql(r,s){try{var o=s.updateQueue,l=o!==null?o.lastEffect:null;if(l!==null){var f=l.next;o=f;do{if((o.tag&r)===r){l=void 0;var m=o.create,b=o.inst;l=m(),b.destroy=l}o=o.next}while(o!==f)}}catch(A){Wt(s,s.return,A)}}function Ts(r,s,o){try{var l=s.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var m=f.next;l=m;do{if((l.tag&r)===r){var b=l.inst,A=b.destroy;if(A!==void 0){b.destroy=void 0,f=s;var R=o,X=A;try{X()}catch(st){Wt(f,R,st)}}}l=l.next}while(l!==m)}}catch(st){Wt(s,s.return,st)}}function vv(r){var s=r.updateQueue;if(s!==null){var o=r.stateNode;try{s0(s,o)}catch(l){Wt(r,r.return,l)}}}function wv(r,s,o){o.props=pa(r.type,r.memoizedProps),o.state=r.memoizedState;try{o.componentWillUnmount()}catch(l){Wt(r,s,l)}}function Pl(r,s){try{var o=r.ref;if(o!==null){switch(r.tag){case 26:case 27:case 5:var l=r.stateNode;break;case 30:l=r.stateNode;break;default:l=r.stateNode}typeof o=="function"?r.refCleanup=o(l):o.current=l}}catch(f){Wt(r,s,f)}}function ar(r,s){var o=r.ref,l=r.refCleanup;if(o!==null)if(typeof l=="function")try{l()}catch(f){Wt(r,s,f)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){Wt(r,s,f)}else o.current=null}function Sv(r){var s=r.type,o=r.memoizedProps,l=r.stateNode;try{t:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&l.focus();break t;case"img":o.src?l.src=o.src:o.srcSet&&(l.srcset=o.srcSet)}}catch(f){Wt(r,r.return,f)}}function mg(r,s,o){try{var l=r.stateNode;cE(l,r.type,o,s),l[_e]=s}catch(f){Wt(r,r.return,f)}}function bv(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&Is(r.type)||r.tag===4}function yg(r){t:for(;;){for(;r.sibling===null;){if(r.return===null||bv(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&Is(r.type)||r.flags&2||r.child===null||r.tag===4)continue t;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function pg(r,s,o){var l=r.tag;if(l===5||l===6)r=r.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(r,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(r),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=rf));else if(l!==4&&(l===27&&Is(r.type)&&(o=r.stateNode,s=null),r=r.child,r!==null))for(pg(r,s,o),r=r.sibling;r!==null;)pg(r,s,o),r=r.sibling}function Yc(r,s,o){var l=r.tag;if(l===5||l===6)r=r.stateNode,s?o.insertBefore(r,s):o.appendChild(r);else if(l!==4&&(l===27&&Is(r.type)&&(o=r.stateNode),r=r.child,r!==null))for(Yc(r,s,o),r=r.sibling;r!==null;)Yc(r,s,o),r=r.sibling}function xv(r){var s=r.stateNode,o=r.memoizedProps;try{for(var l=r.type,f=s.attributes;f.length;)s.removeAttributeNode(f[0]);Be(s,l,o),s[Ne]=r,s[_e]=o}catch(m){Wt(r,r.return,m)}}var Hr=!1,he=!1,vg=!1,Tv=typeof WeakSet=="function"?WeakSet:Set,Ce=null;function VA(r,s){if(r=r.containerInfo,Hg=ff,r=Bp(r),yh(r)){if("selectionStart"in r)var o={start:r.selectionStart,end:r.selectionEnd};else t:{o=(o=r.ownerDocument)&&o.defaultView||window;var l=o.getSelection&&o.getSelection();if(l&&l.rangeCount!==0){o=l.anchorNode;var f=l.anchorOffset,m=l.focusNode;l=l.focusOffset;try{o.nodeType,m.nodeType}catch{o=null;break t}var b=0,A=-1,R=-1,X=0,st=0,lt=r,K=null;e:for(;;){for(var Z;lt!==o||f!==0&&lt.nodeType!==3||(A=b+f),lt!==m||l!==0&&lt.nodeType!==3||(R=b+l),lt.nodeType===3&&(b+=lt.nodeValue.length),(Z=lt.firstChild)!==null;)K=lt,lt=Z;for(;;){if(lt===r)break e;if(K===o&&++X===f&&(A=b),K===m&&++st===l&&(R=b),(Z=lt.nextSibling)!==null)break;lt=K,K=lt.parentNode}lt=Z}o=A===-1||R===-1?null:{start:A,end:R}}else o=null}o=o||{start:0,end:0}}else o=null;for($g={focusedElem:r,selectionRange:o},ff=!1,Ce=s;Ce!==null;)if(s=Ce,r=s.child,(s.subtreeFlags&1024)!==0&&r!==null)r.return=s,Ce=r;else for(;Ce!==null;){switch(s=Ce,m=s.alternate,r=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((r&1024)!==0&&m!==null){r=void 0,o=s,f=m.memoizedProps,m=m.memoizedState,l=o.stateNode;try{var kt=pa(o.type,f,o.elementType===o.type);r=l.getSnapshotBeforeUpdate(kt,m),l.__reactInternalSnapshotBeforeUpdate=r}catch(Nt){Wt(o,o.return,Nt)}}break;case 3:if((r&1024)!==0){if(r=s.stateNode.containerInfo,o=r.nodeType,o===9)Yg(r);else if(o===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":Yg(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=s.sibling,r!==null){r.return=s.return,Ce=r;break}Ce=s.return}}function Av(r,s,o){var l=o.flags;switch(o.tag){case 0:case 11:case 15:As(r,o),l&4&&ql(5,o);break;case 1:if(As(r,o),l&4)if(r=o.stateNode,s===null)try{r.componentDidMount()}catch(b){Wt(o,o.return,b)}else{var f=pa(o.type,s.memoizedProps);s=s.memoizedState;try{r.componentDidUpdate(f,s,r.__reactInternalSnapshotBeforeUpdate)}catch(b){Wt(o,o.return,b)}}l&64&&vv(o),l&512&&Pl(o,o.return);break;case 3:if(As(r,o),l&64&&(r=o.updateQueue,r!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{s0(r,s)}catch(b){Wt(o,o.return,b)}}break;case 27:s===null&&l&4&&xv(o);case 26:case 5:As(r,o),s===null&&l&4&&Sv(o),l&512&&Pl(o,o.return);break;case 12:As(r,o);break;case 13:As(r,o),l&4&&Dv(r,o),l&64&&(r=o.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(o=WA.bind(null,o),pE(r,o))));break;case 22:if(l=o.memoizedState!==null||Hr,!l){s=s!==null&&s.memoizedState!==null||he,f=Hr;var m=he;Hr=l,(he=s)&&!m?Es(r,o,(o.subtreeFlags&8772)!==0):As(r,o),Hr=f,he=m}break;case 30:break;default:As(r,o)}}function Ev(r){var s=r.alternate;s!==null&&(r.alternate=null,Ev(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&ol(s)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var ne=null,Ke=!1;function $r(r,s,o){for(o=o.child;o!==null;)Nv(r,s,o),o=o.sibling}function Nv(r,s,o){if(Ee&&typeof Ee.onCommitFiberUnmount=="function")try{Ee.onCommitFiberUnmount(Jn,o)}catch{}switch(o.tag){case 26:he||ar(o,s),$r(r,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:he||ar(o,s);var l=ne,f=Ke;Is(o.type)&&(ne=o.stateNode,Ke=!1),$r(r,s,o),Kl(o.stateNode),ne=l,Ke=f;break;case 5:he||ar(o,s);case 6:if(l=ne,f=Ke,ne=null,$r(r,s,o),ne=l,Ke=f,ne!==null)if(Ke)try{(ne.nodeType===9?ne.body:ne.nodeName==="HTML"?ne.ownerDocument.body:ne).removeChild(o.stateNode)}catch(m){Wt(o,s,m)}else try{ne.removeChild(o.stateNode)}catch(m){Wt(o,s,m)}break;case 18:ne!==null&&(Ke?(r=ne,gw(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,o.stateNode),ru(r)):gw(ne,o.stateNode));break;case 4:l=ne,f=Ke,ne=o.stateNode.containerInfo,Ke=!0,$r(r,s,o),ne=l,Ke=f;break;case 0:case 11:case 14:case 15:he||Ts(2,o,s),he||Ts(4,o,s),$r(r,s,o);break;case 1:he||(ar(o,s),l=o.stateNode,typeof l.componentWillUnmount=="function"&&wv(o,s,l)),$r(r,s,o);break;case 21:$r(r,s,o);break;case 22:he=(l=he)||o.memoizedState!==null,$r(r,s,o),he=l;break;default:$r(r,s,o)}}function Dv(r,s){if(s.memoizedState===null&&(r=s.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{ru(r)}catch(o){Wt(s,s.return,o)}}function jA(r){switch(r.tag){case 13:case 19:var s=r.stateNode;return s===null&&(s=r.stateNode=new Tv),s;case 22:return r=r.stateNode,s=r._retryCache,s===null&&(s=r._retryCache=new Tv),s;default:throw Error(i(435,r.tag))}}function wg(r,s){var o=jA(r);s.forEach(function(l){var f=tE.bind(null,r,l);o.has(l)||(o.add(l),l.then(f,f))})}function on(r,s){var o=s.deletions;if(o!==null)for(var l=0;l<o.length;l++){var f=o[l],m=r,b=s,A=b;t:for(;A!==null;){switch(A.tag){case 27:if(Is(A.type)){ne=A.stateNode,Ke=!1;break t}break;case 5:ne=A.stateNode,Ke=!1;break t;case 3:case 4:ne=A.stateNode.containerInfo,Ke=!0;break t}A=A.return}if(ne===null)throw Error(i(160));Nv(m,b,f),ne=null,Ke=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)Cv(s,r),s=s.sibling}var Vn=null;function Cv(r,s){var o=r.alternate,l=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:on(s,r),ln(r),l&4&&(Ts(3,r,r.return),ql(3,r),Ts(5,r,r.return));break;case 1:on(s,r),ln(r),l&512&&(he||o===null||ar(o,o.return)),l&64&&Hr&&(r=r.updateQueue,r!==null&&(l=r.callbacks,l!==null&&(o=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=o===null?l:o.concat(l))));break;case 26:var f=Vn;if(on(s,r),ln(r),l&512&&(he||o===null||ar(o,o.return)),l&4){var m=o!==null?o.memoizedState:null;if(l=r.memoizedState,o===null)if(l===null)if(r.stateNode===null){t:{l=r.type,o=r.memoizedProps,f=f.ownerDocument||f;e:switch(l){case"title":m=f.getElementsByTagName("title")[0],(!m||m[ra]||m[Ne]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(l),f.head.insertBefore(m,f.querySelector("head > title"))),Be(m,l,o),m[Ne]=r,pe(m),l=m;break t;case"link":var b=xw("link","href",f).get(l+(o.href||""));if(b){for(var A=0;A<b.length;A++)if(m=b[A],m.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&m.getAttribute("rel")===(o.rel==null?null:o.rel)&&m.getAttribute("title")===(o.title==null?null:o.title)&&m.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){b.splice(A,1);break e}}m=f.createElement(l),Be(m,l,o),f.head.appendChild(m);break;case"meta":if(b=xw("meta","content",f).get(l+(o.content||""))){for(A=0;A<b.length;A++)if(m=b[A],m.getAttribute("content")===(o.content==null?null:""+o.content)&&m.getAttribute("name")===(o.name==null?null:o.name)&&m.getAttribute("property")===(o.property==null?null:o.property)&&m.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&m.getAttribute("charset")===(o.charSet==null?null:o.charSet)){b.splice(A,1);break e}}m=f.createElement(l),Be(m,l,o),f.head.appendChild(m);break;default:throw Error(i(468,l))}m[Ne]=r,pe(m),l=m}r.stateNode=l}else Tw(f,r.type,r.stateNode);else r.stateNode=bw(f,l,r.memoizedProps);else m!==l?(m===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):m.count--,l===null?Tw(f,r.type,r.stateNode):bw(f,l,r.memoizedProps)):l===null&&r.stateNode!==null&&mg(r,r.memoizedProps,o.memoizedProps)}break;case 27:on(s,r),ln(r),l&512&&(he||o===null||ar(o,o.return)),o!==null&&l&4&&mg(r,r.memoizedProps,o.memoizedProps);break;case 5:if(on(s,r),ln(r),l&512&&(he||o===null||ar(o,o.return)),r.flags&32){f=r.stateNode;try{Ya(f,"")}catch(Z){Wt(r,r.return,Z)}}l&4&&r.stateNode!=null&&(f=r.memoizedProps,mg(r,f,o!==null?o.memoizedProps:f)),l&1024&&(vg=!0);break;case 6:if(on(s,r),ln(r),l&4){if(r.stateNode===null)throw Error(i(162));l=r.memoizedProps,o=r.stateNode;try{o.nodeValue=l}catch(Z){Wt(r,r.return,Z)}}break;case 3:if(lf=null,f=Vn,Vn=af(s.containerInfo),on(s,r),Vn=f,ln(r),l&4&&o!==null&&o.memoizedState.isDehydrated)try{ru(s.containerInfo)}catch(Z){Wt(r,r.return,Z)}vg&&(vg=!1,kv(r));break;case 4:l=Vn,Vn=af(r.stateNode.containerInfo),on(s,r),ln(r),Vn=l;break;case 12:on(s,r),ln(r);break;case 13:on(s,r),ln(r),r.child.flags&8192&&r.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Eg=Oe()),l&4&&(l=r.updateQueue,l!==null&&(r.updateQueue=null,wg(r,l)));break;case 22:f=r.memoizedState!==null;var R=o!==null&&o.memoizedState!==null,X=Hr,st=he;if(Hr=X||f,he=st||R,on(s,r),he=st,Hr=X,ln(r),l&8192)t:for(s=r.stateNode,s._visibility=f?s._visibility&-2:s._visibility|1,f&&(o===null||R||Hr||he||va(r)),o=null,s=r;;){if(s.tag===5||s.tag===26){if(o===null){R=o=s;try{if(m=R.stateNode,f)b=m.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{A=R.stateNode;var lt=R.memoizedProps.style,K=lt!=null&&lt.hasOwnProperty("display")?lt.display:null;A.style.display=K==null||typeof K=="boolean"?"":(""+K).trim()}}catch(Z){Wt(R,R.return,Z)}}}else if(s.tag===6){if(o===null){R=s;try{R.stateNode.nodeValue=f?"":R.memoizedProps}catch(Z){Wt(R,R.return,Z)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===r)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break t;for(;s.sibling===null;){if(s.return===null||s.return===r)break t;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}l&4&&(l=r.updateQueue,l!==null&&(o=l.retryQueue,o!==null&&(l.retryQueue=null,wg(r,o))));break;case 19:on(s,r),ln(r),l&4&&(l=r.updateQueue,l!==null&&(r.updateQueue=null,wg(r,l)));break;case 30:break;case 21:break;default:on(s,r),ln(r)}}function ln(r){var s=r.flags;if(s&2){try{for(var o,l=r.return;l!==null;){if(bv(l)){o=l;break}l=l.return}if(o==null)throw Error(i(160));switch(o.tag){case 27:var f=o.stateNode,m=yg(r);Yc(r,m,f);break;case 5:var b=o.stateNode;o.flags&32&&(Ya(b,""),o.flags&=-33);var A=yg(r);Yc(r,A,b);break;case 3:case 4:var R=o.stateNode.containerInfo,X=yg(r);pg(r,X,R);break;default:throw Error(i(161))}}catch(st){Wt(r,r.return,st)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function kv(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var s=r;kv(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),r=r.sibling}}function As(r,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)Av(r,s.alternate,s),s=s.sibling}function va(r){for(r=r.child;r!==null;){var s=r;switch(s.tag){case 0:case 11:case 14:case 15:Ts(4,s,s.return),va(s);break;case 1:ar(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&wv(s,s.return,o),va(s);break;case 27:Kl(s.stateNode);case 26:case 5:ar(s,s.return),va(s);break;case 22:s.memoizedState===null&&va(s);break;case 30:va(s);break;default:va(s)}r=r.sibling}}function Es(r,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var l=s.alternate,f=r,m=s,b=m.flags;switch(m.tag){case 0:case 11:case 15:Es(f,m,o),ql(4,m);break;case 1:if(Es(f,m,o),l=m,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(X){Wt(l,l.return,X)}if(l=m,f=l.updateQueue,f!==null){var A=l.stateNode;try{var R=f.shared.hiddenCallbacks;if(R!==null)for(f.shared.hiddenCallbacks=null,f=0;f<R.length;f++)i0(R[f],A)}catch(X){Wt(l,l.return,X)}}o&&b&64&&vv(m),Pl(m,m.return);break;case 27:xv(m);case 26:case 5:Es(f,m,o),o&&l===null&&b&4&&Sv(m),Pl(m,m.return);break;case 12:Es(f,m,o);break;case 13:Es(f,m,o),o&&b&4&&Dv(f,m);break;case 22:m.memoizedState===null&&Es(f,m,o),Pl(m,m.return);break;case 30:break;default:Es(f,m,o)}s=s.sibling}}function Sg(r,s){var o=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),r=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(r=s.memoizedState.cachePool.pool),r!==o&&(r!=null&&r.refCount++,o!=null&&El(o))}function bg(r,s){r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&El(r))}function or(r,s,o,l){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Ov(r,s,o,l),s=s.sibling}function Ov(r,s,o,l){var f=s.flags;switch(s.tag){case 0:case 11:case 15:or(r,s,o,l),f&2048&&ql(9,s);break;case 1:or(r,s,o,l);break;case 3:or(r,s,o,l),f&2048&&(r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&El(r)));break;case 12:if(f&2048){or(r,s,o,l),r=s.stateNode;try{var m=s.memoizedProps,b=m.id,A=m.onPostCommit;typeof A=="function"&&A(b,s.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(R){Wt(s,s.return,R)}}else or(r,s,o,l);break;case 13:or(r,s,o,l);break;case 23:break;case 22:m=s.stateNode,b=s.alternate,s.memoizedState!==null?m._visibility&2?or(r,s,o,l):Jl(r,s):m._visibility&2?or(r,s,o,l):(m._visibility|=2,fo(r,s,o,l,(s.subtreeFlags&10256)!==0)),f&2048&&Sg(b,s);break;case 24:or(r,s,o,l),f&2048&&bg(s.alternate,s);break;default:or(r,s,o,l)}}function fo(r,s,o,l,f){for(f=f&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var m=r,b=s,A=o,R=l,X=b.flags;switch(b.tag){case 0:case 11:case 15:fo(m,b,A,R,f),ql(8,b);break;case 23:break;case 22:var st=b.stateNode;b.memoizedState!==null?st._visibility&2?fo(m,b,A,R,f):Jl(m,b):(st._visibility|=2,fo(m,b,A,R,f)),f&&X&2048&&Sg(b.alternate,b);break;case 24:fo(m,b,A,R,f),f&&X&2048&&bg(b.alternate,b);break;default:fo(m,b,A,R,f)}s=s.sibling}}function Jl(r,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=r,l=s,f=l.flags;switch(l.tag){case 22:Jl(o,l),f&2048&&Sg(l.alternate,l);break;case 24:Jl(o,l),f&2048&&bg(l.alternate,l);break;default:Jl(o,l)}s=s.sibling}}var Hl=8192;function ho(r){if(r.subtreeFlags&Hl)for(r=r.child;r!==null;)Iv(r),r=r.sibling}function Iv(r){switch(r.tag){case 26:ho(r),r.flags&Hl&&r.memoizedState!==null&&OE(Vn,r.memoizedState,r.memoizedProps);break;case 5:ho(r);break;case 3:case 4:var s=Vn;Vn=af(r.stateNode.containerInfo),ho(r),Vn=s;break;case 22:r.memoizedState===null&&(s=r.alternate,s!==null&&s.memoizedState!==null?(s=Hl,Hl=16777216,ho(r),Hl=s):ho(r));break;default:ho(r)}}function Mv(r){var s=r.alternate;if(s!==null&&(r=s.child,r!==null)){s.child=null;do s=r.sibling,r.sibling=null,r=s;while(r!==null)}}function $l(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var l=s[o];Ce=l,Bv(l,r)}Mv(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Rv(r),r=r.sibling}function Rv(r){switch(r.tag){case 0:case 11:case 15:$l(r),r.flags&2048&&Ts(9,r,r.return);break;case 3:$l(r);break;case 12:$l(r);break;case 22:var s=r.stateNode;r.memoizedState!==null&&s._visibility&2&&(r.return===null||r.return.tag!==13)?(s._visibility&=-3,Gc(r)):$l(r);break;default:$l(r)}}function Gc(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var l=s[o];Ce=l,Bv(l,r)}Mv(r)}for(r=r.child;r!==null;){switch(s=r,s.tag){case 0:case 11:case 15:Ts(8,s,s.return),Gc(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,Gc(s));break;default:Gc(s)}r=r.sibling}}function Bv(r,s){for(;Ce!==null;){var o=Ce;switch(o.tag){case 0:case 11:case 15:Ts(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var l=o.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:El(o.memoizedState.cache)}if(l=o.child,l!==null)l.return=o,Ce=l;else t:for(o=r;Ce!==null;){l=Ce;var f=l.sibling,m=l.return;if(Ev(l),l===o){Ce=null;break t}if(f!==null){f.return=m,Ce=f;break t}Ce=m}}}var YA={getCacheForType:function(r){var s=Ue(xe),o=s.data.get(r);return o===void 0&&(o=r(),s.data.set(r,o)),o}},GA=typeof WeakMap=="function"?WeakMap:Map,Xt=0,ee=null,zt=null,Pt=0,Kt=0,un=null,Ns=!1,go=!1,xg=!1,Vr=0,oe=0,Ds=0,wa=0,Tg=0,Tn=0,mo=0,Vl=null,Fe=null,Ag=!1,Eg=0,Xc=1/0,Kc=null,Cs=null,Re=0,ks=null,yo=null,po=0,Ng=0,Dg=null,zv=null,jl=0,Cg=null;function cn(){if((Xt&2)!==0&&Pt!==0)return Pt&-Pt;if(C.T!==null){var r=ro;return r!==0?r:zg()}return ec()}function Lv(){Tn===0&&(Tn=(Pt&536870912)===0||jt?Qu():536870912);var r=xn.current;return r!==null&&(r.flags|=32),Tn}function fn(r,s,o){(r===ee&&(Kt===2||Kt===9)||r.cancelPendingCommit!==null)&&(vo(r,0),Os(r,Pt,Tn,!1)),na(r,o),((Xt&2)===0||r!==ee)&&(r===ee&&((Xt&2)===0&&(wa|=o),oe===4&&Os(r,Pt,Tn,!1)),lr(r))}function _v(r,s,o){if((Xt&6)!==0)throw Error(i(327));var l=!o&&(s&124)===0&&(s&r.expiredLanes)===0||ea(r,s),f=l?FA(r,s):Ig(r,s,!0),m=l;do{if(f===0){go&&!l&&Os(r,s,0,!1);break}else{if(o=r.current.alternate,m&&!XA(o)){f=Ig(r,s,!1),m=!1;continue}if(f===2){if(m=s,r.errorRecoveryDisabledLanes&m)var b=0;else b=r.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){s=b;t:{var A=r;f=Vl;var R=A.current.memoizedState.isDehydrated;if(R&&(vo(A,b).flags|=256),b=Ig(A,b,!1),b!==2){if(xg&&!R){A.errorRecoveryDisabledLanes|=m,wa|=m,f=4;break t}m=Fe,Fe=f,m!==null&&(Fe===null?Fe=m:Fe.push.apply(Fe,m))}f=b}if(m=!1,f!==2)continue}}if(f===1){vo(r,0),Os(r,s,0,!0);break}t:{switch(l=r,m=f,m){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:Os(l,s,Tn,!Ns);break t;case 2:Fe=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(f=Eg+300-Oe(),10<f)){if(Os(l,s,Tn,!Ns),qa(l,0,!0)!==0)break t;l.timeoutHandle=dw(Uv.bind(null,l,o,Fe,Kc,Ag,s,Tn,wa,mo,Ns,m,2,-0,0),f);break t}Uv(l,o,Fe,Kc,Ag,s,Tn,wa,mo,Ns,m,0,-0,0)}}break}while(!0);lr(r)}function Uv(r,s,o,l,f,m,b,A,R,X,st,lt,K,Z){if(r.timeoutHandle=-1,lt=s.subtreeFlags,(lt&8192||(lt&16785408)===16785408)&&(Ql={stylesheets:null,count:0,unsuspend:kE},Iv(s),lt=IE(),lt!==null)){r.cancelPendingCommit=lt(jv.bind(null,r,s,m,o,l,f,b,A,R,st,1,K,Z)),Os(r,m,b,!X);return}jv(r,s,m,o,l,f,b,A,R)}function XA(r){for(var s=r;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var l=0;l<o.length;l++){var f=o[l],m=f.getSnapshot;f=f.value;try{if(!sn(m(),f))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Os(r,s,o,l){s&=~Tg,s&=~wa,r.suspendedLanes|=s,r.pingedLanes&=~s,l&&(r.warmLanes|=s),l=r.expirationTimes;for(var f=s;0<f;){var m=31-Ie(f),b=1<<m;l[m]=-1,f&=~b}o!==0&&rl(r,o,s)}function Fc(){return(Xt&6)===0?(Yl(0),!1):!0}function kg(){if(zt!==null){if(Kt===0)var r=zt.return;else r=zt,Lr=ha=null,Yh(r),uo=null,Ll=0,r=zt;for(;r!==null;)pv(r.alternate,r),r=r.return;zt=null}}function vo(r,s){var o=r.timeoutHandle;o!==-1&&(r.timeoutHandle=-1,dE(o)),o=r.cancelPendingCommit,o!==null&&(r.cancelPendingCommit=null,o()),kg(),ee=r,zt=o=Rr(r.current,null),Pt=s,Kt=0,un=null,Ns=!1,go=ea(r,s),xg=!1,mo=Tn=Tg=wa=Ds=oe=0,Fe=Vl=null,Ag=!1,(s&8)!==0&&(s|=s&32);var l=r.entangledLanes;if(l!==0)for(r=r.entanglements,l&=s;0<l;){var f=31-Ie(l),m=1<<f;s|=r[f],l&=~m}return Vr=s,vc(),o}function qv(r,s){Rt=null,C.H=_c,s===Dl||s===Dc?(s=n0(),Kt=3):s===Wp?(s=n0(),Kt=4):Kt=s===rv?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,un=s,zt===null&&(oe=1,Hc(r,vn(s,r.current)))}function Pv(){var r=C.H;return C.H=_c,r===null?_c:r}function Jv(){var r=C.A;return C.A=YA,r}function Og(){oe=4,Ns||(Pt&4194048)!==Pt&&xn.current!==null||(go=!0),(Ds&134217727)===0&&(wa&134217727)===0||ee===null||Os(ee,Pt,Tn,!1)}function Ig(r,s,o){var l=Xt;Xt|=2;var f=Pv(),m=Jv();(ee!==r||Pt!==s)&&(Kc=null,vo(r,s)),s=!1;var b=oe;t:do try{if(Kt!==0&&zt!==null){var A=zt,R=un;switch(Kt){case 8:kg(),b=6;break t;case 3:case 2:case 9:case 6:xn.current===null&&(s=!0);var X=Kt;if(Kt=0,un=null,wo(r,A,R,X),o&&go){b=0;break t}break;default:X=Kt,Kt=0,un=null,wo(r,A,R,X)}}KA(),b=oe;break}catch(st){qv(r,st)}while(!0);return s&&r.shellSuspendCounter++,Lr=ha=null,Xt=l,C.H=f,C.A=m,zt===null&&(ee=null,Pt=0,vc()),b}function KA(){for(;zt!==null;)Hv(zt)}function FA(r,s){var o=Xt;Xt|=2;var l=Pv(),f=Jv();ee!==r||Pt!==s?(Kc=null,Xc=Oe()+500,vo(r,s)):go=ea(r,s);t:do try{if(Kt!==0&&zt!==null){s=zt;var m=un;e:switch(Kt){case 1:Kt=0,un=null,wo(r,s,m,1);break;case 2:case 9:if(t0(m)){Kt=0,un=null,$v(s);break}s=function(){Kt!==2&&Kt!==9||ee!==r||(Kt=7),lr(r)},m.then(s,s);break t;case 3:Kt=7;break t;case 4:Kt=5;break t;case 7:t0(m)?(Kt=0,un=null,$v(s)):(Kt=0,un=null,wo(r,s,m,7));break;case 5:var b=null;switch(zt.tag){case 26:b=zt.memoizedState;case 5:case 27:var A=zt;if(!b||Aw(b)){Kt=0,un=null;var R=A.sibling;if(R!==null)zt=R;else{var X=A.return;X!==null?(zt=X,Zc(X)):zt=null}break e}}Kt=0,un=null,wo(r,s,m,5);break;case 6:Kt=0,un=null,wo(r,s,m,6);break;case 8:kg(),oe=6;break t;default:throw Error(i(462))}}ZA();break}catch(st){qv(r,st)}while(!0);return Lr=ha=null,C.H=l,C.A=f,Xt=o,zt!==null?0:(ee=null,Pt=0,vc(),oe)}function ZA(){for(;zt!==null&&!be();)Hv(zt)}function Hv(r){var s=mv(r.alternate,r,Vr);r.memoizedProps=r.pendingProps,s===null?Zc(r):zt=s}function $v(r){var s=r,o=s.alternate;switch(s.tag){case 15:case 0:s=uv(o,s,s.pendingProps,s.type,void 0,Pt);break;case 11:s=uv(o,s,s.pendingProps,s.type.render,s.ref,Pt);break;case 5:Yh(s);default:pv(o,s),s=zt=Vp(s,Vr),s=mv(o,s,Vr)}r.memoizedProps=r.pendingProps,s===null?Zc(r):zt=s}function wo(r,s,o,l){Lr=ha=null,Yh(s),uo=null,Ll=0;var f=s.return;try{if(PA(r,f,s,o,Pt)){oe=1,Hc(r,vn(o,r.current)),zt=null;return}}catch(m){if(f!==null)throw zt=f,m;oe=1,Hc(r,vn(o,r.current)),zt=null;return}s.flags&32768?(jt||l===1?r=!0:go||(Pt&536870912)!==0?r=!1:(Ns=r=!0,(l===2||l===9||l===3||l===6)&&(l=xn.current,l!==null&&l.tag===13&&(l.flags|=16384))),Vv(s,r)):Zc(s)}function Zc(r){var s=r;do{if((s.flags&32768)!==0){Vv(s,Ns);return}r=s.return;var o=HA(s.alternate,s,Vr);if(o!==null){zt=o;return}if(s=s.sibling,s!==null){zt=s;return}zt=s=r}while(s!==null);oe===0&&(oe=5)}function Vv(r,s){do{var o=$A(r.alternate,r);if(o!==null){o.flags&=32767,zt=o;return}if(o=r.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(r=r.sibling,r!==null)){zt=r;return}zt=r=o}while(r!==null);oe=6,zt=null}function jv(r,s,o,l,f,m,b,A,R){r.cancelPendingCommit=null;do Qc();while(Re!==0);if((Xt&6)!==0)throw Error(i(327));if(s!==null){if(s===r.current)throw Error(i(177));if(m=s.lanes|s.childLanes,m|=bh,Kd(r,o,m,b,A,R),r===ee&&(zt=ee=null,Pt=0),yo=s,ks=r,po=o,Ng=m,Dg=f,zv=l,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,eE(ls,function(){return Fv(),null})):(r.callbackNode=null,r.callbackPriority=0),l=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||l){l=C.T,C.T=null,f=B.p,B.p=2,b=Xt,Xt|=4;try{VA(r,s,o)}finally{Xt=b,B.p=f,C.T=l}}Re=1,Yv(),Gv(),Xv()}}function Yv(){if(Re===1){Re=0;var r=ks,s=yo,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=C.T,C.T=null;var l=B.p;B.p=2;var f=Xt;Xt|=4;try{Cv(s,r);var m=$g,b=Bp(r.containerInfo),A=m.focusedElem,R=m.selectionRange;if(b!==A&&A&&A.ownerDocument&&Rp(A.ownerDocument.documentElement,A)){if(R!==null&&yh(A)){var X=R.start,st=R.end;if(st===void 0&&(st=X),"selectionStart"in A)A.selectionStart=X,A.selectionEnd=Math.min(st,A.value.length);else{var lt=A.ownerDocument||document,K=lt&&lt.defaultView||window;if(K.getSelection){var Z=K.getSelection(),kt=A.textContent.length,Nt=Math.min(R.start,kt),Qt=R.end===void 0?Nt:Math.min(R.end,kt);!Z.extend&&Nt>Qt&&(b=Qt,Qt=Nt,Nt=b);var $=Mp(A,Nt),L=Mp(A,Qt);if($&&L&&(Z.rangeCount!==1||Z.anchorNode!==$.node||Z.anchorOffset!==$.offset||Z.focusNode!==L.node||Z.focusOffset!==L.offset)){var Y=lt.createRange();Y.setStart($.node,$.offset),Z.removeAllRanges(),Nt>Qt?(Z.addRange(Y),Z.extend(L.node,L.offset)):(Y.setEnd(L.node,L.offset),Z.addRange(Y))}}}}for(lt=[],Z=A;Z=Z.parentNode;)Z.nodeType===1&&lt.push({element:Z,left:Z.scrollLeft,top:Z.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<lt.length;A++){var at=lt[A];at.element.scrollLeft=at.left,at.element.scrollTop=at.top}}ff=!!Hg,$g=Hg=null}finally{Xt=f,B.p=l,C.T=o}}r.current=s,Re=2}}function Gv(){if(Re===2){Re=0;var r=ks,s=yo,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=C.T,C.T=null;var l=B.p;B.p=2;var f=Xt;Xt|=4;try{Av(r,s.alternate,s)}finally{Xt=f,B.p=l,C.T=o}}Re=3}}function Xv(){if(Re===4||Re===3){Re=0,rn();var r=ks,s=yo,o=po,l=zv;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Re=5:(Re=0,yo=ks=null,Kv(r,r.pendingLanes));var f=r.pendingLanes;if(f===0&&(Cs=null),sl(o),s=s.stateNode,Ee&&typeof Ee.onCommitFiberRoot=="function")try{Ee.onCommitFiberRoot(Jn,s,void 0,(s.current.flags&128)===128)}catch{}if(l!==null){s=C.T,f=B.p,B.p=2,C.T=null;try{for(var m=r.onRecoverableError,b=0;b<l.length;b++){var A=l[b];m(A.value,{componentStack:A.stack})}}finally{C.T=s,B.p=f}}(po&3)!==0&&Qc(),lr(r),f=r.pendingLanes,(o&4194090)!==0&&(f&42)!==0?r===Cg?jl++:(jl=0,Cg=r):jl=0,Yl(0)}}function Kv(r,s){(r.pooledCacheLanes&=s)===0&&(s=r.pooledCache,s!=null&&(r.pooledCache=null,El(s)))}function Qc(r){return Yv(),Gv(),Xv(),Fv()}function Fv(){if(Re!==5)return!1;var r=ks,s=Ng;Ng=0;var o=sl(po),l=C.T,f=B.p;try{B.p=32>o?32:o,C.T=null,o=Dg,Dg=null;var m=ks,b=po;if(Re=0,yo=ks=null,po=0,(Xt&6)!==0)throw Error(i(331));var A=Xt;if(Xt|=4,Rv(m.current),Ov(m,m.current,b,o),Xt=A,Yl(0,!1),Ee&&typeof Ee.onPostCommitFiberRoot=="function")try{Ee.onPostCommitFiberRoot(Jn,m)}catch{}return!0}finally{B.p=f,C.T=l,Kv(r,s)}}function Zv(r,s,o){s=vn(o,s),s=ag(r.stateNode,s,2),r=ws(r,s,2),r!==null&&(na(r,2),lr(r))}function Wt(r,s,o){if(r.tag===3)Zv(r,r,o);else for(;s!==null;){if(s.tag===3){Zv(s,r,o);break}else if(s.tag===1){var l=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Cs===null||!Cs.has(l))){r=vn(o,r),o=ev(2),l=ws(s,o,2),l!==null&&(nv(o,l,s,r),na(l,2),lr(l));break}}s=s.return}}function Mg(r,s,o){var l=r.pingCache;if(l===null){l=r.pingCache=new GA;var f=new Set;l.set(s,f)}else f=l.get(s),f===void 0&&(f=new Set,l.set(s,f));f.has(o)||(xg=!0,f.add(o),r=QA.bind(null,r,s,o),s.then(r,r))}function QA(r,s,o){var l=r.pingCache;l!==null&&l.delete(s),r.pingedLanes|=r.suspendedLanes&o,r.warmLanes&=~o,ee===r&&(Pt&o)===o&&(oe===4||oe===3&&(Pt&62914560)===Pt&&300>Oe()-Eg?(Xt&2)===0&&vo(r,0):Tg|=o,mo===Pt&&(mo=0)),lr(r)}function Qv(r,s){s===0&&(s=Wu()),r=Wa(r,s),r!==null&&(na(r,s),lr(r))}function WA(r){var s=r.memoizedState,o=0;s!==null&&(o=s.retryLane),Qv(r,o)}function tE(r,s){var o=0;switch(r.tag){case 13:var l=r.stateNode,f=r.memoizedState;f!==null&&(o=f.retryLane);break;case 19:l=r.stateNode;break;case 22:l=r.stateNode._retryCache;break;default:throw Error(i(314))}l!==null&&l.delete(s),Qv(r,o)}function eE(r,s){return Yt(r,s)}var Wc=null,So=null,Rg=!1,tf=!1,Bg=!1,Sa=0;function lr(r){r!==So&&r.next===null&&(So===null?Wc=So=r:So=So.next=r),tf=!0,Rg||(Rg=!0,rE())}function Yl(r,s){if(!Bg&&tf){Bg=!0;do for(var o=!1,l=Wc;l!==null;){if(r!==0){var f=l.pendingLanes;if(f===0)var m=0;else{var b=l.suspendedLanes,A=l.pingedLanes;m=(1<<31-Ie(42|r)+1)-1,m&=f&~(b&~A),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(o=!0,nw(l,m))}else m=Pt,m=qa(l,l===ee?m:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(m&3)===0||ea(l,m)||(o=!0,nw(l,m));l=l.next}while(o);Bg=!1}}function nE(){Wv()}function Wv(){tf=Rg=!1;var r=0;Sa!==0&&(fE()&&(r=Sa),Sa=0);for(var s=Oe(),o=null,l=Wc;l!==null;){var f=l.next,m=tw(l,s);m===0?(l.next=null,o===null?Wc=f:o.next=f,f===null&&(So=o)):(o=l,(r!==0||(m&3)!==0)&&(tf=!0)),l=f}Yl(r)}function tw(r,s){for(var o=r.suspendedLanes,l=r.pingedLanes,f=r.expirationTimes,m=r.pendingLanes&-62914561;0<m;){var b=31-Ie(m),A=1<<b,R=f[b];R===-1?((A&o)===0||(A&l)!==0)&&(f[b]=Xd(A,s)):R<=s&&(r.expiredLanes|=A),m&=~A}if(s=ee,o=Pt,o=qa(r,r===s?o:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),l=r.callbackNode,o===0||r===s&&(Kt===2||Kt===9)||r.cancelPendingCommit!==null)return l!==null&&l!==null&&qt(l),r.callbackNode=null,r.callbackPriority=0;if((o&3)===0||ea(r,o)){if(s=o&-o,s===r.callbackPriority)return s;switch(l!==null&&qt(l),sl(o)){case 2:case 8:o=os;break;case 32:o=ls;break;case 268435456:o=us;break;default:o=ls}return l=ew.bind(null,r),o=Yt(o,l),r.callbackPriority=s,r.callbackNode=o,s}return l!==null&&l!==null&&qt(l),r.callbackPriority=2,r.callbackNode=null,2}function ew(r,s){if(Re!==0&&Re!==5)return r.callbackNode=null,r.callbackPriority=0,null;var o=r.callbackNode;if(Qc()&&r.callbackNode!==o)return null;var l=Pt;return l=qa(r,r===ee?l:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),l===0?null:(_v(r,l,s),tw(r,Oe()),r.callbackNode!=null&&r.callbackNode===o?ew.bind(null,r):null)}function nw(r,s){if(Qc())return null;_v(r,s,!0)}function rE(){hE(function(){(Xt&6)!==0?Yt(La,nE):Wv()})}function zg(){return Sa===0&&(Sa=Qu()),Sa}function rw(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:fc(""+r)}function iw(r,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,r.id&&o.setAttribute("form",r.id),s.parentNode.insertBefore(o,s),r=new FormData(r),o.parentNode.removeChild(o),r}function iE(r,s,o,l,f){if(s==="submit"&&o&&o.stateNode===f){var m=rw((f[_e]||null).action),b=l.submitter;b&&(s=(s=b[_e]||null)?rw(s.formAction):b.getAttribute("formAction"),s!==null&&(m=s,b=null));var A=new mc("action","action",null,l,f);r.push({event:A,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Sa!==0){var R=b?iw(f,b):new FormData(f);eg(o,{pending:!0,data:R,method:f.method,action:m},null,R)}}else typeof m=="function"&&(A.preventDefault(),R=b?iw(f,b):new FormData(f),eg(o,{pending:!0,data:R,method:f.method,action:m},m,R))},currentTarget:f}]})}}for(var Lg=0;Lg<Sh.length;Lg++){var _g=Sh[Lg],sE=_g.toLowerCase(),aE=_g[0].toUpperCase()+_g.slice(1);$n(sE,"on"+aE)}$n(_p,"onAnimationEnd"),$n(Up,"onAnimationIteration"),$n(qp,"onAnimationStart"),$n("dblclick","onDoubleClick"),$n("focusin","onFocus"),$n("focusout","onBlur"),$n(TA,"onTransitionRun"),$n(AA,"onTransitionStart"),$n(EA,"onTransitionCancel"),$n(Pp,"onTransitionEnd"),ds("onMouseEnter",["mouseout","mouseover"]),ds("onMouseLeave",["mouseout","mouseover"]),ds("onPointerEnter",["pointerout","pointerover"]),ds("onPointerLeave",["pointerout","pointerover"]),Ir("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ir("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ir("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ir("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ir("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ir("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Gl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),oE=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Gl));function sw(r,s){s=(s&4)!==0;for(var o=0;o<r.length;o++){var l=r[o],f=l.event;l=l.listeners;t:{var m=void 0;if(s)for(var b=l.length-1;0<=b;b--){var A=l[b],R=A.instance,X=A.currentTarget;if(A=A.listener,R!==m&&f.isPropagationStopped())break t;m=A,f.currentTarget=X;try{m(f)}catch(st){Jc(st)}f.currentTarget=null,m=R}else for(b=0;b<l.length;b++){if(A=l[b],R=A.instance,X=A.currentTarget,A=A.listener,R!==m&&f.isPropagationStopped())break t;m=A,f.currentTarget=X;try{m(f)}catch(st){Jc(st)}f.currentTarget=null,m=R}}}}function Lt(r,s){var o=s[al];o===void 0&&(o=s[al]=new Set);var l=r+"__bubble";o.has(l)||(aw(s,r,2,!1),o.add(l))}function Ug(r,s,o){var l=0;s&&(l|=4),aw(o,r,l,s)}var ef="_reactListening"+Math.random().toString(36).slice(2);function qg(r){if(!r[ef]){r[ef]=!0,rc.forEach(function(o){o!=="selectionchange"&&(oE.has(o)||Ug(o,!1,r),Ug(o,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[ef]||(s[ef]=!0,Ug("selectionchange",!1,s))}}function aw(r,s,o,l){switch(Ow(s)){case 2:var f=BE;break;case 8:f=zE;break;default:f=Wg}o=f.bind(null,s,o,r),f=void 0,!oh||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),l?f!==void 0?r.addEventListener(s,o,{capture:!0,passive:f}):r.addEventListener(s,o,!0):f!==void 0?r.addEventListener(s,o,{passive:f}):r.addEventListener(s,o,!1)}function Pg(r,s,o,l,f){var m=l;if((s&1)===0&&(s&2)===0&&l!==null)t:for(;;){if(l===null)return;var b=l.tag;if(b===3||b===4){var A=l.stateNode.containerInfo;if(A===f)break;if(b===4)for(b=l.return;b!==null;){var R=b.tag;if((R===3||R===4)&&b.stateNode.containerInfo===f)return;b=b.return}for(;A!==null;){if(b=kr(A),b===null)return;if(R=b.tag,R===5||R===6||R===26||R===27){l=m=b;continue t}A=A.parentNode}}l=l.return}hp(function(){var X=m,st=sh(o),lt=[];t:{var K=Jp.get(r);if(K!==void 0){var Z=mc,kt=r;switch(r){case"keypress":if(hc(o)===0)break t;case"keydown":case"keyup":Z=eA;break;case"focusin":kt="focus",Z=fh;break;case"focusout":kt="blur",Z=fh;break;case"beforeblur":case"afterblur":Z=fh;break;case"click":if(o.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=yp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=$T;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=iA;break;case _p:case Up:case qp:Z=YT;break;case Pp:Z=aA;break;case"scroll":case"scrollend":Z=JT;break;case"wheel":Z=lA;break;case"copy":case"cut":case"paste":Z=XT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=vp;break;case"toggle":case"beforetoggle":Z=cA}var Nt=(s&4)!==0,Qt=!Nt&&(r==="scroll"||r==="scrollend"),$=Nt?K!==null?K+"Capture":null:K;Nt=[];for(var L=X,Y;L!==null;){var at=L;if(Y=at.stateNode,at=at.tag,at!==5&&at!==26&&at!==27||Y===null||$===null||(at=dl(L,$),at!=null&&Nt.push(Xl(L,at,Y))),Qt)break;L=L.return}0<Nt.length&&(K=new Z(K,kt,null,o,st),lt.push({event:K,listeners:Nt}))}}if((s&7)===0){t:{if(K=r==="mouseover"||r==="pointerover",Z=r==="mouseout"||r==="pointerout",K&&o!==ih&&(kt=o.relatedTarget||o.fromElement)&&(kr(kt)||kt[cs]))break t;if((Z||K)&&(K=st.window===st?st:(K=st.ownerDocument)?K.defaultView||K.parentWindow:window,Z?(kt=o.relatedTarget||o.toElement,Z=X,kt=kt?kr(kt):null,kt!==null&&(Qt=u(kt),Nt=kt.tag,kt!==Qt||Nt!==5&&Nt!==27&&Nt!==6)&&(kt=null)):(Z=null,kt=X),Z!==kt)){if(Nt=yp,at="onMouseLeave",$="onMouseEnter",L="mouse",(r==="pointerout"||r==="pointerover")&&(Nt=vp,at="onPointerLeave",$="onPointerEnter",L="pointer"),Qt=Z==null?K:ia(Z),Y=kt==null?K:ia(kt),K=new Nt(at,L+"leave",Z,o,st),K.target=Qt,K.relatedTarget=Y,at=null,kr(st)===X&&(Nt=new Nt($,L+"enter",kt,o,st),Nt.target=Y,Nt.relatedTarget=Qt,at=Nt),Qt=at,Z&&kt)e:{for(Nt=Z,$=kt,L=0,Y=Nt;Y;Y=bo(Y))L++;for(Y=0,at=$;at;at=bo(at))Y++;for(;0<L-Y;)Nt=bo(Nt),L--;for(;0<Y-L;)$=bo($),Y--;for(;L--;){if(Nt===$||$!==null&&Nt===$.alternate)break e;Nt=bo(Nt),$=bo($)}Nt=null}else Nt=null;Z!==null&&ow(lt,K,Z,Nt,!1),kt!==null&&Qt!==null&&ow(lt,Qt,kt,Nt,!0)}}t:{if(K=X?ia(X):window,Z=K.nodeName&&K.nodeName.toLowerCase(),Z==="select"||Z==="input"&&K.type==="file")var vt=Np;else if(Ap(K))if(Dp)vt=SA;else{vt=vA;var Bt=pA}else Z=K.nodeName,!Z||Z.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?X&&rh(X.elementType)&&(vt=Np):vt=wA;if(vt&&(vt=vt(r,X))){Ep(lt,vt,o,st);break t}Bt&&Bt(r,K,X),r==="focusout"&&X&&K.type==="number"&&X.memoizedProps.value!=null&&nh(K,"number",K.value)}switch(Bt=X?ia(X):window,r){case"focusin":(Ap(Bt)||Bt.contentEditable==="true")&&(Fa=Bt,ph=X,Sl=null);break;case"focusout":Sl=ph=Fa=null;break;case"mousedown":vh=!0;break;case"contextmenu":case"mouseup":case"dragend":vh=!1,zp(lt,o,st);break;case"selectionchange":if(xA)break;case"keydown":case"keyup":zp(lt,o,st)}var St;if(hh)t:{switch(r){case"compositionstart":var Dt="onCompositionStart";break t;case"compositionend":Dt="onCompositionEnd";break t;case"compositionupdate":Dt="onCompositionUpdate";break t}Dt=void 0}else Ka?xp(r,o)&&(Dt="onCompositionEnd"):r==="keydown"&&o.keyCode===229&&(Dt="onCompositionStart");Dt&&(wp&&o.locale!=="ko"&&(Ka||Dt!=="onCompositionStart"?Dt==="onCompositionEnd"&&Ka&&(St=gp()):(ms=st,lh="value"in ms?ms.value:ms.textContent,Ka=!0)),Bt=nf(X,Dt),0<Bt.length&&(Dt=new pp(Dt,r,null,o,st),lt.push({event:Dt,listeners:Bt}),St?Dt.data=St:(St=Tp(o),St!==null&&(Dt.data=St)))),(St=dA?hA(r,o):gA(r,o))&&(Dt=nf(X,"onBeforeInput"),0<Dt.length&&(Bt=new pp("onBeforeInput","beforeinput",null,o,st),lt.push({event:Bt,listeners:Dt}),Bt.data=St)),iE(lt,r,X,o,st)}sw(lt,s)})}function Xl(r,s,o){return{instance:r,listener:s,currentTarget:o}}function nf(r,s){for(var o=s+"Capture",l=[];r!==null;){var f=r,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=dl(r,o),f!=null&&l.unshift(Xl(r,f,m)),f=dl(r,s),f!=null&&l.push(Xl(r,f,m))),r.tag===3)return l;r=r.return}return[]}function bo(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function ow(r,s,o,l,f){for(var m=s._reactName,b=[];o!==null&&o!==l;){var A=o,R=A.alternate,X=A.stateNode;if(A=A.tag,R!==null&&R===l)break;A!==5&&A!==26&&A!==27||X===null||(R=X,f?(X=dl(o,m),X!=null&&b.unshift(Xl(o,X,R))):f||(X=dl(o,m),X!=null&&b.push(Xl(o,X,R)))),o=o.return}b.length!==0&&r.push({event:s,listeners:b})}var lE=/\r\n?/g,uE=/\u0000|\uFFFD/g;function lw(r){return(typeof r=="string"?r:""+r).replace(lE,`
`).replace(uE,"")}function uw(r,s){return s=lw(s),lw(r)===s}function rf(){}function Zt(r,s,o,l,f,m){switch(o){case"children":typeof l=="string"?s==="body"||s==="textarea"&&l===""||Ya(r,l):(typeof l=="number"||typeof l=="bigint")&&s!=="body"&&Ya(r,""+l);break;case"className":Ja(r,"class",l);break;case"tabIndex":Ja(r,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Ja(r,o,l);break;case"style":fp(r,l,m);break;case"data":if(s!=="object"){Ja(r,"data",l);break}case"src":case"href":if(l===""&&(s!=="a"||o!=="href")){r.removeAttribute(o);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){r.removeAttribute(o);break}l=fc(""+l),r.setAttribute(o,l);break;case"action":case"formAction":if(typeof l=="function"){r.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(o==="formAction"?(s!=="input"&&Zt(r,s,"name",f.name,f,null),Zt(r,s,"formEncType",f.formEncType,f,null),Zt(r,s,"formMethod",f.formMethod,f,null),Zt(r,s,"formTarget",f.formTarget,f,null)):(Zt(r,s,"encType",f.encType,f,null),Zt(r,s,"method",f.method,f,null),Zt(r,s,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){r.removeAttribute(o);break}l=fc(""+l),r.setAttribute(o,l);break;case"onClick":l!=null&&(r.onclick=rf);break;case"onScroll":l!=null&&Lt("scroll",r);break;case"onScrollEnd":l!=null&&Lt("scrollend",r);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(o=l.__html,o!=null){if(f.children!=null)throw Error(i(60));r.innerHTML=o}}break;case"multiple":r.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":r.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){r.removeAttribute("xlink:href");break}o=fc(""+l),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?r.setAttribute(o,""+l):r.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?r.setAttribute(o,""):r.removeAttribute(o);break;case"capture":case"download":l===!0?r.setAttribute(o,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?r.setAttribute(o,l):r.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?r.setAttribute(o,l):r.removeAttribute(o);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?r.removeAttribute(o):r.setAttribute(o,l);break;case"popover":Lt("beforetoggle",r),Lt("toggle",r),Pa(r,"popover",l);break;case"xlinkActuate":Hn(r,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Hn(r,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Hn(r,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Hn(r,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Hn(r,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Hn(r,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Hn(r,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Hn(r,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Hn(r,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Pa(r,"is",l);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=qT.get(o)||o,Pa(r,o,l))}}function Jg(r,s,o,l,f,m){switch(o){case"style":fp(r,l,m);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(o=l.__html,o!=null){if(f.children!=null)throw Error(i(60));r.innerHTML=o}}break;case"children":typeof l=="string"?Ya(r,l):(typeof l=="number"||typeof l=="bigint")&&Ya(r,""+l);break;case"onScroll":l!=null&&Lt("scroll",r);break;case"onScrollEnd":l!=null&&Lt("scrollend",r);break;case"onClick":l!=null&&(r.onclick=rf);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ic.hasOwnProperty(o))t:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),s=o.slice(2,f?o.length-7:void 0),m=r[_e]||null,m=m!=null?m[o]:null,typeof m=="function"&&r.removeEventListener(s,m,f),typeof l=="function")){typeof m!="function"&&m!==null&&(o in r?r[o]=null:r.hasAttribute(o)&&r.removeAttribute(o)),r.addEventListener(s,l,f);break t}o in r?r[o]=l:l===!0?r.setAttribute(o,""):Pa(r,o,l)}}}function Be(r,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Lt("error",r),Lt("load",r);var l=!1,f=!1,m;for(m in o)if(o.hasOwnProperty(m)){var b=o[m];if(b!=null)switch(m){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:Zt(r,s,m,b,o,null)}}f&&Zt(r,s,"srcSet",o.srcSet,o,null),l&&Zt(r,s,"src",o.src,o,null);return;case"input":Lt("invalid",r);var A=m=b=f=null,R=null,X=null;for(l in o)if(o.hasOwnProperty(l)){var st=o[l];if(st!=null)switch(l){case"name":f=st;break;case"type":b=st;break;case"checked":R=st;break;case"defaultChecked":X=st;break;case"value":m=st;break;case"defaultValue":A=st;break;case"children":case"dangerouslySetInnerHTML":if(st!=null)throw Error(i(137,s));break;default:Zt(r,s,l,st,o,null)}}op(r,m,A,R,X,b,f,!1),$a(r);return;case"select":Lt("invalid",r),l=b=m=null;for(f in o)if(o.hasOwnProperty(f)&&(A=o[f],A!=null))switch(f){case"value":m=A;break;case"defaultValue":b=A;break;case"multiple":l=A;default:Zt(r,s,f,A,o,null)}s=m,o=b,r.multiple=!!l,s!=null?ja(r,!!l,s,!1):o!=null&&ja(r,!!l,o,!0);return;case"textarea":Lt("invalid",r),m=f=l=null;for(b in o)if(o.hasOwnProperty(b)&&(A=o[b],A!=null))switch(b){case"value":l=A;break;case"defaultValue":f=A;break;case"children":m=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(i(91));break;default:Zt(r,s,b,A,o,null)}up(r,l,f,m),$a(r);return;case"option":for(R in o)if(o.hasOwnProperty(R)&&(l=o[R],l!=null))switch(R){case"selected":r.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Zt(r,s,R,l,o,null)}return;case"dialog":Lt("beforetoggle",r),Lt("toggle",r),Lt("cancel",r),Lt("close",r);break;case"iframe":case"object":Lt("load",r);break;case"video":case"audio":for(l=0;l<Gl.length;l++)Lt(Gl[l],r);break;case"image":Lt("error",r),Lt("load",r);break;case"details":Lt("toggle",r);break;case"embed":case"source":case"link":Lt("error",r),Lt("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(X in o)if(o.hasOwnProperty(X)&&(l=o[X],l!=null))switch(X){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:Zt(r,s,X,l,o,null)}return;default:if(rh(s)){for(st in o)o.hasOwnProperty(st)&&(l=o[st],l!==void 0&&Jg(r,s,st,l,o,void 0));return}}for(A in o)o.hasOwnProperty(A)&&(l=o[A],l!=null&&Zt(r,s,A,l,o,null))}function cE(r,s,o,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,b=null,A=null,R=null,X=null,st=null;for(Z in o){var lt=o[Z];if(o.hasOwnProperty(Z)&&lt!=null)switch(Z){case"checked":break;case"value":break;case"defaultValue":R=lt;default:l.hasOwnProperty(Z)||Zt(r,s,Z,null,l,lt)}}for(var K in l){var Z=l[K];if(lt=o[K],l.hasOwnProperty(K)&&(Z!=null||lt!=null))switch(K){case"type":m=Z;break;case"name":f=Z;break;case"checked":X=Z;break;case"defaultChecked":st=Z;break;case"value":b=Z;break;case"defaultValue":A=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(i(137,s));break;default:Z!==lt&&Zt(r,s,K,Z,l,lt)}}Va(r,b,A,R,X,st,m,f);return;case"select":Z=b=A=K=null;for(m in o)if(R=o[m],o.hasOwnProperty(m)&&R!=null)switch(m){case"value":break;case"multiple":Z=R;default:l.hasOwnProperty(m)||Zt(r,s,m,null,l,R)}for(f in l)if(m=l[f],R=o[f],l.hasOwnProperty(f)&&(m!=null||R!=null))switch(f){case"value":K=m;break;case"defaultValue":A=m;break;case"multiple":b=m;default:m!==R&&Zt(r,s,f,m,l,R)}s=A,o=b,l=Z,K!=null?ja(r,!!o,K,!1):!!l!=!!o&&(s!=null?ja(r,!!o,s,!0):ja(r,!!o,o?[]:"",!1));return;case"textarea":Z=K=null;for(A in o)if(f=o[A],o.hasOwnProperty(A)&&f!=null&&!l.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:Zt(r,s,A,null,l,f)}for(b in l)if(f=l[b],m=o[b],l.hasOwnProperty(b)&&(f!=null||m!=null))switch(b){case"value":K=f;break;case"defaultValue":Z=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(i(91));break;default:f!==m&&Zt(r,s,b,f,l,m)}lp(r,K,Z);return;case"option":for(var kt in o)if(K=o[kt],o.hasOwnProperty(kt)&&K!=null&&!l.hasOwnProperty(kt))switch(kt){case"selected":r.selected=!1;break;default:Zt(r,s,kt,null,l,K)}for(R in l)if(K=l[R],Z=o[R],l.hasOwnProperty(R)&&K!==Z&&(K!=null||Z!=null))switch(R){case"selected":r.selected=K&&typeof K!="function"&&typeof K!="symbol";break;default:Zt(r,s,R,K,l,Z)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Nt in o)K=o[Nt],o.hasOwnProperty(Nt)&&K!=null&&!l.hasOwnProperty(Nt)&&Zt(r,s,Nt,null,l,K);for(X in l)if(K=l[X],Z=o[X],l.hasOwnProperty(X)&&K!==Z&&(K!=null||Z!=null))switch(X){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(i(137,s));break;default:Zt(r,s,X,K,l,Z)}return;default:if(rh(s)){for(var Qt in o)K=o[Qt],o.hasOwnProperty(Qt)&&K!==void 0&&!l.hasOwnProperty(Qt)&&Jg(r,s,Qt,void 0,l,K);for(st in l)K=l[st],Z=o[st],!l.hasOwnProperty(st)||K===Z||K===void 0&&Z===void 0||Jg(r,s,st,K,l,Z);return}}for(var $ in o)K=o[$],o.hasOwnProperty($)&&K!=null&&!l.hasOwnProperty($)&&Zt(r,s,$,null,l,K);for(lt in l)K=l[lt],Z=o[lt],!l.hasOwnProperty(lt)||K===Z||K==null&&Z==null||Zt(r,s,lt,K,l,Z)}var Hg=null,$g=null;function sf(r){return r.nodeType===9?r:r.ownerDocument}function cw(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function fw(r,s){if(r===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&s==="foreignObject"?0:r}function Vg(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var jg=null;function fE(){var r=window.event;return r&&r.type==="popstate"?r===jg?!1:(jg=r,!0):(jg=null,!1)}var dw=typeof setTimeout=="function"?setTimeout:void 0,dE=typeof clearTimeout=="function"?clearTimeout:void 0,hw=typeof Promise=="function"?Promise:void 0,hE=typeof queueMicrotask=="function"?queueMicrotask:typeof hw<"u"?function(r){return hw.resolve(null).then(r).catch(gE)}:dw;function gE(r){setTimeout(function(){throw r})}function Is(r){return r==="head"}function gw(r,s){var o=s,l=0,f=0;do{var m=o.nextSibling;if(r.removeChild(o),m&&m.nodeType===8)if(o=m.data,o==="/$"){if(0<l&&8>l){o=l;var b=r.ownerDocument;if(o&1&&Kl(b.documentElement),o&2&&Kl(b.body),o&4)for(o=b.head,Kl(o),b=o.firstChild;b;){var A=b.nextSibling,R=b.nodeName;b[ra]||R==="SCRIPT"||R==="STYLE"||R==="LINK"&&b.rel.toLowerCase()==="stylesheet"||o.removeChild(b),b=A}}if(f===0){r.removeChild(m),ru(s);return}f--}else o==="$"||o==="$?"||o==="$!"?f++:l=o.charCodeAt(0)-48;else l=0;o=m}while(o);ru(s)}function Yg(r){var s=r.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Yg(o),ol(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}r.removeChild(o)}}function mE(r,s,o,l){for(;r.nodeType===1;){var f=o;if(r.nodeName.toLowerCase()!==s.toLowerCase()){if(!l&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(l){if(!r[ra])switch(s){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(m=r.getAttribute("rel"),m==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(m!==f.rel||r.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||r.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||r.getAttribute("title")!==(f.title==null?null:f.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(m=r.getAttribute("src"),(m!==(f.src==null?null:f.src)||r.getAttribute("type")!==(f.type==null?null:f.type)||r.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(s==="input"&&r.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&r.getAttribute("name")===m)return r}else return r;if(r=jn(r.nextSibling),r===null)break}return null}function yE(r,s,o){if(s==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!o||(r=jn(r.nextSibling),r===null))return null;return r}function Gg(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState==="complete"}function pE(r,s){var o=r.ownerDocument;if(r.data!=="$?"||o.readyState==="complete")s();else{var l=function(){s(),o.removeEventListener("DOMContentLoaded",l)};o.addEventListener("DOMContentLoaded",l),r._reactRetry=l}}function jn(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return r}var Xg=null;function mw(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var o=r.data;if(o==="$"||o==="$!"||o==="$?"){if(s===0)return r;s--}else o==="/$"&&s++}r=r.previousSibling}return null}function yw(r,s,o){switch(s=sf(o),r){case"html":if(r=s.documentElement,!r)throw Error(i(452));return r;case"head":if(r=s.head,!r)throw Error(i(453));return r;case"body":if(r=s.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function Kl(r){for(var s=r.attributes;s.length;)r.removeAttributeNode(s[0]);ol(r)}var An=new Map,pw=new Set;function af(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var jr=B.d;B.d={f:vE,r:wE,D:SE,C:bE,L:xE,m:TE,X:EE,S:AE,M:NE};function vE(){var r=jr.f(),s=Fc();return r||s}function wE(r){var s=Or(r);s!==null&&s.tag===5&&s.type==="form"?_0(s):jr.r(r)}var xo=typeof document>"u"?null:document;function vw(r,s,o){var l=xo;if(l&&typeof s=="string"&&s){var f=Ye(s);f='link[rel="'+r+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),pw.has(f)||(pw.add(f),r={rel:r,crossOrigin:o,href:s},l.querySelector(f)===null&&(s=l.createElement("link"),Be(s,"link",r),pe(s),l.head.appendChild(s)))}}function SE(r){jr.D(r),vw("dns-prefetch",r,null)}function bE(r,s){jr.C(r,s),vw("preconnect",r,s)}function xE(r,s,o){jr.L(r,s,o);var l=xo;if(l&&r&&s){var f='link[rel="preload"][as="'+Ye(s)+'"]';s==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+Ye(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+Ye(o.imageSizes)+'"]')):f+='[href="'+Ye(r)+'"]';var m=f;switch(s){case"style":m=To(r);break;case"script":m=Ao(r)}An.has(m)||(r=y({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:r,as:s},o),An.set(m,r),l.querySelector(f)!==null||s==="style"&&l.querySelector(Fl(m))||s==="script"&&l.querySelector(Zl(m))||(s=l.createElement("link"),Be(s,"link",r),pe(s),l.head.appendChild(s)))}}function TE(r,s){jr.m(r,s);var o=xo;if(o&&r){var l=s&&typeof s.as=="string"?s.as:"script",f='link[rel="modulepreload"][as="'+Ye(l)+'"][href="'+Ye(r)+'"]',m=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=Ao(r)}if(!An.has(m)&&(r=y({rel:"modulepreload",href:r},s),An.set(m,r),o.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Zl(m)))return}l=o.createElement("link"),Be(l,"link",r),pe(l),o.head.appendChild(l)}}}function AE(r,s,o){jr.S(r,s,o);var l=xo;if(l&&r){var f=fs(l).hoistableStyles,m=To(r);s=s||"default";var b=f.get(m);if(!b){var A={loading:0,preload:null};if(b=l.querySelector(Fl(m)))A.loading=5;else{r=y({rel:"stylesheet",href:r,"data-precedence":s},o),(o=An.get(m))&&Kg(r,o);var R=b=l.createElement("link");pe(R),Be(R,"link",r),R._p=new Promise(function(X,st){R.onload=X,R.onerror=st}),R.addEventListener("load",function(){A.loading|=1}),R.addEventListener("error",function(){A.loading|=2}),A.loading|=4,of(b,s,l)}b={type:"stylesheet",instance:b,count:1,state:A},f.set(m,b)}}}function EE(r,s){jr.X(r,s);var o=xo;if(o&&r){var l=fs(o).hoistableScripts,f=Ao(r),m=l.get(f);m||(m=o.querySelector(Zl(f)),m||(r=y({src:r,async:!0},s),(s=An.get(f))&&Fg(r,s),m=o.createElement("script"),pe(m),Be(m,"link",r),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(f,m))}}function NE(r,s){jr.M(r,s);var o=xo;if(o&&r){var l=fs(o).hoistableScripts,f=Ao(r),m=l.get(f);m||(m=o.querySelector(Zl(f)),m||(r=y({src:r,async:!0,type:"module"},s),(s=An.get(f))&&Fg(r,s),m=o.createElement("script"),pe(m),Be(m,"link",r),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(f,m))}}function ww(r,s,o,l){var f=(f=dt.current)?af(f):null;if(!f)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=To(o.href),o=fs(f).hoistableStyles,l=o.get(s),l||(l={type:"style",instance:null,count:0,state:null},o.set(s,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){r=To(o.href);var m=fs(f).hoistableStyles,b=m.get(r);if(b||(f=f.ownerDocument||f,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(r,b),(m=f.querySelector(Fl(r)))&&!m._p&&(b.instance=m,b.state.loading=5),An.has(r)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},An.set(r,o),m||DE(f,r,o,b.state))),s&&l===null)throw Error(i(528,""));return b}if(s&&l!==null)throw Error(i(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Ao(o),o=fs(f).hoistableScripts,l=o.get(s),l||(l={type:"script",instance:null,count:0,state:null},o.set(s,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function To(r){return'href="'+Ye(r)+'"'}function Fl(r){return'link[rel="stylesheet"]['+r+"]"}function Sw(r){return y({},r,{"data-precedence":r.precedence,precedence:null})}function DE(r,s,o,l){r.querySelector('link[rel="preload"][as="style"]['+s+"]")?l.loading=1:(s=r.createElement("link"),l.preload=s,s.addEventListener("load",function(){return l.loading|=1}),s.addEventListener("error",function(){return l.loading|=2}),Be(s,"link",o),pe(s),r.head.appendChild(s))}function Ao(r){return'[src="'+Ye(r)+'"]'}function Zl(r){return"script[async]"+r}function bw(r,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var l=r.querySelector('style[data-href~="'+Ye(o.href)+'"]');if(l)return s.instance=l,pe(l),l;var f=y({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return l=(r.ownerDocument||r).createElement("style"),pe(l),Be(l,"style",f),of(l,o.precedence,r),s.instance=l;case"stylesheet":f=To(o.href);var m=r.querySelector(Fl(f));if(m)return s.state.loading|=4,s.instance=m,pe(m),m;l=Sw(o),(f=An.get(f))&&Kg(l,f),m=(r.ownerDocument||r).createElement("link"),pe(m);var b=m;return b._p=new Promise(function(A,R){b.onload=A,b.onerror=R}),Be(m,"link",l),s.state.loading|=4,of(m,o.precedence,r),s.instance=m;case"script":return m=Ao(o.src),(f=r.querySelector(Zl(m)))?(s.instance=f,pe(f),f):(l=o,(f=An.get(m))&&(l=y({},o),Fg(l,f)),r=r.ownerDocument||r,f=r.createElement("script"),pe(f),Be(f,"link",l),r.head.appendChild(f),s.instance=f);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(l=s.instance,s.state.loading|=4,of(l,o.precedence,r));return s.instance}function of(r,s,o){for(var l=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,m=f,b=0;b<l.length;b++){var A=l[b];if(A.dataset.precedence===s)m=A;else if(m!==f)break}m?m.parentNode.insertBefore(r,m.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(r,s.firstChild))}function Kg(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.title==null&&(r.title=s.title)}function Fg(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.integrity==null&&(r.integrity=s.integrity)}var lf=null;function xw(r,s,o){if(lf===null){var l=new Map,f=lf=new Map;f.set(o,l)}else f=lf,l=f.get(o),l||(l=new Map,f.set(o,l));if(l.has(r))return l;for(l.set(r,null),o=o.getElementsByTagName(r),f=0;f<o.length;f++){var m=o[f];if(!(m[ra]||m[Ne]||r==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var b=m.getAttribute(s)||"";b=r+b;var A=l.get(b);A?A.push(m):l.set(b,[m])}}return l}function Tw(r,s,o){r=r.ownerDocument||r,r.head.insertBefore(o,s==="title"?r.querySelector("head > title"):null)}function CE(r,s,o){if(o===1||s.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return r=s.disabled,typeof s.precedence=="string"&&r==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function Aw(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}var Ql=null;function kE(){}function OE(r,s,o){if(Ql===null)throw Error(i(475));var l=Ql;if(s.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var f=To(o.href),m=r.querySelector(Fl(f));if(m){r=m._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(l.count++,l=uf.bind(l),r.then(l,l)),s.state.loading|=4,s.instance=m,pe(m);return}m=r.ownerDocument||r,o=Sw(o),(f=An.get(f))&&Kg(o,f),m=m.createElement("link"),pe(m);var b=m;b._p=new Promise(function(A,R){b.onload=A,b.onerror=R}),Be(m,"link",o),s.instance=m}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(s,r),(r=s.state.preload)&&(s.state.loading&3)===0&&(l.count++,s=uf.bind(l),r.addEventListener("load",s),r.addEventListener("error",s))}}function IE(){if(Ql===null)throw Error(i(475));var r=Ql;return r.stylesheets&&r.count===0&&Zg(r,r.stylesheets),0<r.count?function(s){var o=setTimeout(function(){if(r.stylesheets&&Zg(r,r.stylesheets),r.unsuspend){var l=r.unsuspend;r.unsuspend=null,l()}},6e4);return r.unsuspend=s,function(){r.unsuspend=null,clearTimeout(o)}}:null}function uf(){if(this.count--,this.count===0){if(this.stylesheets)Zg(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var cf=null;function Zg(r,s){r.stylesheets=null,r.unsuspend!==null&&(r.count++,cf=new Map,s.forEach(ME,r),cf=null,uf.call(r))}function ME(r,s){if(!(s.state.loading&4)){var o=cf.get(r);if(o)var l=o.get(null);else{o=new Map,cf.set(r,o);for(var f=r.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var b=f[m];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(o.set(b.dataset.precedence,b),l=b)}l&&o.set(null,l)}f=s.instance,b=f.getAttribute("data-precedence"),m=o.get(b)||l,m===l&&o.set(null,f),o.set(b,f),this.count++,l=uf.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),m?m.parentNode.insertBefore(f,m.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(f,r.firstChild)),s.state.loading|=4}}var Wl={$$typeof:N,Provider:null,Consumer:null,_currentValue:H,_currentValue2:H,_threadCount:0};function RE(r,s,o,l,f,m,b,A){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=nl(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=nl(0),this.hiddenUpdates=nl(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=A,this.incompleteTransitions=new Map}function Ew(r,s,o,l,f,m,b,A,R,X,st,lt){return r=new RE(r,s,o,b,A,R,X,lt),s=1,m===!0&&(s|=24),m=an(3,null,null,s),r.current=m,m.stateNode=r,s=Mh(),s.refCount++,r.pooledCache=s,s.refCount++,m.memoizedState={element:l,isDehydrated:o,cache:s},Lh(m),r}function Nw(r){return r?(r=to,r):to}function Dw(r,s,o,l,f,m){f=Nw(f),l.context===null?l.context=f:l.pendingContext=f,l=vs(s),l.payload={element:o},m=m===void 0?null:m,m!==null&&(l.callback=m),o=ws(r,l,s),o!==null&&(fn(o,r,s),kl(o,r,s))}function Cw(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var o=r.retryLane;r.retryLane=o!==0&&o<s?o:s}}function Qg(r,s){Cw(r,s),(r=r.alternate)&&Cw(r,s)}function kw(r){if(r.tag===13){var s=Wa(r,67108864);s!==null&&fn(s,r,67108864),Qg(r,67108864)}}var ff=!0;function BE(r,s,o,l){var f=C.T;C.T=null;var m=B.p;try{B.p=2,Wg(r,s,o,l)}finally{B.p=m,C.T=f}}function zE(r,s,o,l){var f=C.T;C.T=null;var m=B.p;try{B.p=8,Wg(r,s,o,l)}finally{B.p=m,C.T=f}}function Wg(r,s,o,l){if(ff){var f=tm(l);if(f===null)Pg(r,s,l,df,o),Iw(r,l);else if(_E(f,r,s,o,l))l.stopPropagation();else if(Iw(r,l),s&4&&-1<LE.indexOf(r)){for(;f!==null;){var m=Or(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var b=Cr(m.pendingLanes);if(b!==0){var A=m;for(A.pendingLanes|=2,A.entangledLanes|=2;b;){var R=1<<31-Ie(b);A.entanglements[1]|=R,b&=~R}lr(m),(Xt&6)===0&&(Xc=Oe()+500,Yl(0))}}break;case 13:A=Wa(m,2),A!==null&&fn(A,m,2),Fc(),Qg(m,2)}if(m=tm(l),m===null&&Pg(r,s,l,df,o),m===f)break;f=m}f!==null&&l.stopPropagation()}else Pg(r,s,l,null,o)}}function tm(r){return r=sh(r),em(r)}var df=null;function em(r){if(df=null,r=kr(r),r!==null){var s=u(r);if(s===null)r=null;else{var o=s.tag;if(o===13){if(r=c(s),r!==null)return r;r=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null)}}return df=r,null}function Ow(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(tl()){case La:return 2;case os:return 8;case ls:case Ws:return 32;case us:return 268435456;default:return 32}default:return 32}}var nm=!1,Ms=null,Rs=null,Bs=null,tu=new Map,eu=new Map,zs=[],LE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Iw(r,s){switch(r){case"focusin":case"focusout":Ms=null;break;case"dragenter":case"dragleave":Rs=null;break;case"mouseover":case"mouseout":Bs=null;break;case"pointerover":case"pointerout":tu.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":eu.delete(s.pointerId)}}function nu(r,s,o,l,f,m){return r===null||r.nativeEvent!==m?(r={blockedOn:s,domEventName:o,eventSystemFlags:l,nativeEvent:m,targetContainers:[f]},s!==null&&(s=Or(s),s!==null&&kw(s)),r):(r.eventSystemFlags|=l,s=r.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),r)}function _E(r,s,o,l,f){switch(s){case"focusin":return Ms=nu(Ms,r,s,o,l,f),!0;case"dragenter":return Rs=nu(Rs,r,s,o,l,f),!0;case"mouseover":return Bs=nu(Bs,r,s,o,l,f),!0;case"pointerover":var m=f.pointerId;return tu.set(m,nu(tu.get(m)||null,r,s,o,l,f)),!0;case"gotpointercapture":return m=f.pointerId,eu.set(m,nu(eu.get(m)||null,r,s,o,l,f)),!0}return!1}function Mw(r){var s=kr(r.target);if(s!==null){var o=u(s);if(o!==null){if(s=o.tag,s===13){if(s=c(o),s!==null){r.blockedOn=s,Fd(r.priority,function(){if(o.tag===13){var l=cn();l=il(l);var f=Wa(o,l);f!==null&&fn(f,o,l),Qg(o,l)}});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){r.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}r.blockedOn=null}function hf(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var o=tm(r.nativeEvent);if(o===null){o=r.nativeEvent;var l=new o.constructor(o.type,o);ih=l,o.target.dispatchEvent(l),ih=null}else return s=Or(o),s!==null&&kw(s),r.blockedOn=o,!1;s.shift()}return!0}function Rw(r,s,o){hf(r)&&o.delete(s)}function UE(){nm=!1,Ms!==null&&hf(Ms)&&(Ms=null),Rs!==null&&hf(Rs)&&(Rs=null),Bs!==null&&hf(Bs)&&(Bs=null),tu.forEach(Rw),eu.forEach(Rw)}function gf(r,s){r.blockedOn===s&&(r.blockedOn=null,nm||(nm=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,UE)))}var mf=null;function Bw(r){mf!==r&&(mf=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){mf===r&&(mf=null);for(var s=0;s<r.length;s+=3){var o=r[s],l=r[s+1],f=r[s+2];if(typeof l!="function"){if(em(l||o)===null)continue;break}var m=Or(o);m!==null&&(r.splice(s,3),s-=3,eg(m,{pending:!0,data:f,method:o.method,action:l},l,f))}}))}function ru(r){function s(R){return gf(R,r)}Ms!==null&&gf(Ms,r),Rs!==null&&gf(Rs,r),Bs!==null&&gf(Bs,r),tu.forEach(s),eu.forEach(s);for(var o=0;o<zs.length;o++){var l=zs[o];l.blockedOn===r&&(l.blockedOn=null)}for(;0<zs.length&&(o=zs[0],o.blockedOn===null);)Mw(o),o.blockedOn===null&&zs.shift();if(o=(r.ownerDocument||r).$$reactFormReplay,o!=null)for(l=0;l<o.length;l+=3){var f=o[l],m=o[l+1],b=f[_e]||null;if(typeof m=="function")b||Bw(o);else if(b){var A=null;if(m&&m.hasAttribute("formAction")){if(f=m,b=m[_e]||null)A=b.formAction;else if(em(f)!==null)continue}else A=b.action;typeof A=="function"?o[l+1]=A:(o.splice(l,3),l-=3),Bw(o)}}}function rm(r){this._internalRoot=r}yf.prototype.render=rm.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(i(409));var o=s.current,l=cn();Dw(o,l,r,s,null,null)},yf.prototype.unmount=rm.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;Dw(r.current,2,null,r,null,null),Fc(),s[cs]=null}};function yf(r){this._internalRoot=r}yf.prototype.unstable_scheduleHydration=function(r){if(r){var s=ec();r={blockedOn:null,target:r,priority:s};for(var o=0;o<zs.length&&s!==0&&s<zs[o].priority;o++);zs.splice(o,0,r),o===0&&Mw(r)}};var zw=t.version;if(zw!=="19.1.0")throw Error(i(527,zw,"19.1.0"));B.findDOMNode=function(r){var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=h(s),r=r!==null?g(r):null,r=r===null?null:r.stateNode,r};var qE={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:C,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pf.isDisabled&&pf.supportsFiber)try{Jn=pf.inject(qE),Ee=pf}catch{}}return su.createRoot=function(r,s){if(!a(r))throw Error(i(299));var o=!1,l="",f=Z0,m=Q0,b=W0,A=null;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(l=s.identifierPrefix),s.onUncaughtError!==void 0&&(f=s.onUncaughtError),s.onCaughtError!==void 0&&(m=s.onCaughtError),s.onRecoverableError!==void 0&&(b=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(A=s.unstable_transitionCallbacks)),s=Ew(r,1,!1,null,null,o,l,f,m,b,A,null),r[cs]=s.current,qg(r),new rm(s)},su.hydrateRoot=function(r,s,o){if(!a(r))throw Error(i(299));var l=!1,f="",m=Z0,b=Q0,A=W0,R=null,X=null;return o!=null&&(o.unstable_strictMode===!0&&(l=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(m=o.onUncaughtError),o.onCaughtError!==void 0&&(b=o.onCaughtError),o.onRecoverableError!==void 0&&(A=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(R=o.unstable_transitionCallbacks),o.formState!==void 0&&(X=o.formState)),s=Ew(r,1,!0,s,o??null,l,f,m,b,A,R,X),s.context=Nw(null),o=s.current,l=cn(),l=il(l),f=vs(l),f.callback=null,ws(o,f,l),o=l,s.current.lanes=o,na(s,o),lr(s),r[cs]=s.current,qg(r),new yf(s)},su.version="19.1.0",su}var jw;function FE(){if(jw)return sm.exports;jw=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),sm.exports=KE(),sm.exports}var ZE=FE();const QE="@yorkie-js/react",WE="0.6.13",Yw={name:QE,version:WE};var et=Ju();const tN=$b(et);var _t;(function(n){n[n.Canceled=1]="Canceled",n[n.Unknown=2]="Unknown",n[n.InvalidArgument=3]="InvalidArgument",n[n.DeadlineExceeded=4]="DeadlineExceeded",n[n.NotFound=5]="NotFound",n[n.AlreadyExists=6]="AlreadyExists",n[n.PermissionDenied=7]="PermissionDenied",n[n.ResourceExhausted=8]="ResourceExhausted",n[n.FailedPrecondition=9]="FailedPrecondition",n[n.Aborted=10]="Aborted",n[n.OutOfRange=11]="OutOfRange",n[n.Unimplemented=12]="Unimplemented",n[n.Internal=13]="Internal",n[n.Unavailable=14]="Unavailable",n[n.DataLoss=15]="DataLoss",n[n.Unauthenticated=16]="Unauthenticated"})(_t||(_t={}));function Gw(n){const t=_t[n];return typeof t!="string"?n.toString():t[0].toLowerCase()+t.substring(1).replace(/[A-Z]/g,e=>"_"+e.toLowerCase())}class Gt extends Error{constructor(t,e=_t.Unknown,i,a,u){super(eN(t,e)),this.name="ConnectError",Object.setPrototypeOf(this,new.target.prototype),this.rawMessage=t,this.code=e,this.metadata=new Headers(i??{}),this.details=a??[],this.cause=u}static from(t,e=_t.Unknown){return t instanceof Gt?t:t instanceof Error?t.name=="AbortError"?new Gt(t.message,_t.Canceled):new Gt(t.message,e,void 0,void 0,t):new Gt(String(t),e,void 0,void 0,t)}static[Symbol.hasInstance](t){return t instanceof Error?Object.getPrototypeOf(t)===Gt.prototype?!0:t.name==="ConnectError"&&"code"in t&&typeof t.code=="number"&&"metadata"in t&&"details"in t&&Array.isArray(t.details)&&"rawMessage"in t&&typeof t.rawMessage=="string"&&"cause"in t:!1}findDetails(t){const e="typeName"in t?{findMessage:a=>a===t.typeName?t:void 0}:t,i=[];for(const a of this.details){if("getType"in a){e.findMessage(a.getType().typeName)&&i.push(a);continue}const u=e.findMessage(a.type);if(u)try{i.push(u.fromBinary(a.value))}catch{}}return i}}function eN(n,t){return n.length?`[${Gw(t)}] ${n}`:`[${Gw(t)}]`}function ue(n,t){if(!n)throw new Error(t)}const nN=34028234663852886e22,rN=-34028234663852886e22,iN=4294967295,sN=2147483647,aN=-2147483648;function Mf(n){if(typeof n!="number")throw new Error("invalid int 32: "+typeof n);if(!Number.isInteger(n)||n>sN||n<aN)throw new Error("invalid int 32: "+n)}function Mm(n){if(typeof n!="number")throw new Error("invalid uint 32: "+typeof n);if(!Number.isInteger(n)||n>iN||n<0)throw new Error("invalid uint 32: "+n)}function jb(n){if(typeof n!="number")throw new Error("invalid float 32: "+typeof n);if(Number.isFinite(n)&&(n>nN||n<rN))throw new Error("invalid float 32: "+n)}const Yb=Symbol("@bufbuild/protobuf/enum-type");function oN(n){const t=n[Yb];return ue(t,"missing enum type on enum object"),t}function Gb(n,t,e,i){n[Yb]=Xb(t,e.map(a=>({no:a.no,name:a.name,localName:n[a.no]})))}function Xb(n,t,e){const i=Object.create(null),a=Object.create(null),u=[];for(const c of t){const d=Kb(c);u.push(d),i[c.name]=d,a[c.no]=d}return{typeName:n,values:u,findName(c){return i[c]},findNumber(c){return a[c]}}}function lN(n,t,e){const i={};for(const a of t){const u=Kb(a);i[u.localName]=u.no,i[u.no]=u.localName}return Gb(i,n,t),i}function Kb(n){return"localName"in n?n:Object.assign(Object.assign({},n),{localName:n.name})}class yt{equals(t){return this.getType().runtime.util.equals(this.getType(),this,t)}clone(){return this.getType().runtime.util.clone(this)}fromBinary(t,e){const i=this.getType(),a=i.runtime.bin,u=a.makeReadOptions(e);return a.readMessage(this,u.readerFactory(t),t.byteLength,u),this}fromJson(t,e){const i=this.getType(),a=i.runtime.json,u=a.makeReadOptions(e);return a.readMessage(i,t,u,this),this}fromJsonString(t,e){let i;try{i=JSON.parse(t)}catch(a){throw new Error(`cannot decode ${this.getType().typeName} from JSON: ${a instanceof Error?a.message:String(a)}`)}return this.fromJson(i,e)}toBinary(t){const e=this.getType(),i=e.runtime.bin,a=i.makeWriteOptions(t),u=a.writerFactory();return i.writeMessage(this,u,a),u.finish()}toJson(t){const e=this.getType(),i=e.runtime.json,a=i.makeWriteOptions(t);return i.writeMessage(this,a)}toJsonString(t){var e;const i=this.toJson(t);return JSON.stringify(i,null,(e=t==null?void 0:t.prettySpaces)!==null&&e!==void 0?e:0)}toJSON(){return this.toJson({emitDefaultValues:!0})}getType(){return Object.getPrototypeOf(this).constructor}}function uN(n,t,e,i){var a;const u=(a=i==null?void 0:i.localName)!==null&&a!==void 0?a:t.substring(t.lastIndexOf(".")+1),c={[u]:function(d){n.util.initFields(this),n.util.initPartial(d,this)}}[u];return Object.setPrototypeOf(c.prototype,new yt),Object.assign(c,{runtime:n,typeName:t,fields:n.util.newFieldList(e),fromBinary(d,h){return new c().fromBinary(d,h)},fromJson(d,h){return new c().fromJson(d,h)},fromJsonString(d,h){return new c().fromJsonString(d,h)},equals(d,h){return n.util.equals(c,d,h)}}),c}function cN(){let n=0,t=0;for(let i=0;i<28;i+=7){let a=this.buf[this.pos++];if(n|=(a&127)<<i,(a&128)==0)return this.assertBounds(),[n,t]}let e=this.buf[this.pos++];if(n|=(e&15)<<28,t=(e&112)>>4,(e&128)==0)return this.assertBounds(),[n,t];for(let i=3;i<=31;i+=7){let a=this.buf[this.pos++];if(t|=(a&127)<<i,(a&128)==0)return this.assertBounds(),[n,t]}throw new Error("invalid varint")}function cm(n,t,e){for(let u=0;u<28;u=u+7){const c=n>>>u,d=!(!(c>>>7)&&t==0),h=(d?c|128:c)&255;if(e.push(h),!d)return}const i=n>>>28&15|(t&7)<<4,a=t>>3!=0;if(e.push((a?i|128:i)&255),!!a){for(let u=3;u<31;u=u+7){const c=t>>>u,d=!!(c>>>7),h=(d?c|128:c)&255;if(e.push(h),!d)return}e.push(t>>>31&1)}}const Rf=4294967296;function Xw(n){const t=n[0]==="-";t&&(n=n.slice(1));const e=1e6;let i=0,a=0;function u(c,d){const h=Number(n.slice(c,d));a*=e,i=i*e+h,i>=Rf&&(a=a+(i/Rf|0),i=i%Rf)}return u(-24,-18),u(-18,-12),u(-12,-6),u(-6),t?Zb(i,a):Ty(i,a)}function fN(n,t){let e=Ty(n,t);const i=e.hi&2147483648;i&&(e=Zb(e.lo,e.hi));const a=Fb(e.lo,e.hi);return i?"-"+a:a}function Fb(n,t){if({lo:n,hi:t}=dN(n,t),t<=2097151)return String(Rf*t+n);const e=n&16777215,i=(n>>>24|t<<8)&16777215,a=t>>16&65535;let u=e+i*6777216+a*6710656,c=i+a*8147497,d=a*2;const h=1e7;return u>=h&&(c+=Math.floor(u/h),u%=h),c>=h&&(d+=Math.floor(c/h),c%=h),d.toString()+Kw(c)+Kw(u)}function dN(n,t){return{lo:n>>>0,hi:t>>>0}}function Ty(n,t){return{lo:n|0,hi:t|0}}function Zb(n,t){return t=~t,n?n=~n+1:t+=1,Ty(n,t)}const Kw=n=>{const t=String(n);return"0000000".slice(t.length)+t};function Fw(n,t){if(n>=0){for(;n>127;)t.push(n&127|128),n=n>>>7;t.push(n)}else{for(let e=0;e<9;e++)t.push(n&127|128),n=n>>7;t.push(1)}}function hN(){let n=this.buf[this.pos++],t=n&127;if((n&128)==0)return this.assertBounds(),t;if(n=this.buf[this.pos++],t|=(n&127)<<7,(n&128)==0)return this.assertBounds(),t;if(n=this.buf[this.pos++],t|=(n&127)<<14,(n&128)==0)return this.assertBounds(),t;if(n=this.buf[this.pos++],t|=(n&127)<<21,(n&128)==0)return this.assertBounds(),t;n=this.buf[this.pos++],t|=(n&15)<<28;for(let e=5;(n&128)!==0&&e<10;e++)n=this.buf[this.pos++];if((n&128)!=0)throw new Error("invalid varint");return this.assertBounds(),t>>>0}var Zw={};function gN(){const n=new DataView(new ArrayBuffer(8));if(typeof BigInt=="function"&&typeof n.getBigInt64=="function"&&typeof n.getBigUint64=="function"&&typeof n.setBigInt64=="function"&&typeof n.setBigUint64=="function"&&(typeof process!="object"||typeof Zw!="object"||Zw.BUF_BIGINT_DISABLE!=="1")){const a=BigInt("-9223372036854775808"),u=BigInt("9223372036854775807"),c=BigInt("0"),d=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(h){const g=typeof h=="bigint"?h:BigInt(h);if(g>u||g<a)throw new Error(`int64 invalid: ${h}`);return g},uParse(h){const g=typeof h=="bigint"?h:BigInt(h);if(g>d||g<c)throw new Error(`uint64 invalid: ${h}`);return g},enc(h){return n.setBigInt64(0,this.parse(h),!0),{lo:n.getInt32(0,!0),hi:n.getInt32(4,!0)}},uEnc(h){return n.setBigInt64(0,this.uParse(h),!0),{lo:n.getInt32(0,!0),hi:n.getInt32(4,!0)}},dec(h,g){return n.setInt32(0,h,!0),n.setInt32(4,g,!0),n.getBigInt64(0,!0)},uDec(h,g){return n.setInt32(0,h,!0),n.setInt32(4,g,!0),n.getBigUint64(0,!0)}}}const e=a=>ue(/^-?[0-9]+$/.test(a),`int64 invalid: ${a}`),i=a=>ue(/^[0-9]+$/.test(a),`uint64 invalid: ${a}`);return{zero:"0",supported:!1,parse(a){return typeof a!="string"&&(a=a.toString()),e(a),a},uParse(a){return typeof a!="string"&&(a=a.toString()),i(a),a},enc(a){return typeof a!="string"&&(a=a.toString()),e(a),Xw(a)},uEnc(a){return typeof a!="string"&&(a=a.toString()),i(a),Xw(a)},dec(a,u){return fN(a,u)},uDec(a,u){return Fb(a,u)}}}const re=gN();var it;(function(n){n[n.DOUBLE=1]="DOUBLE",n[n.FLOAT=2]="FLOAT",n[n.INT64=3]="INT64",n[n.UINT64=4]="UINT64",n[n.INT32=5]="INT32",n[n.FIXED64=6]="FIXED64",n[n.FIXED32=7]="FIXED32",n[n.BOOL=8]="BOOL",n[n.STRING=9]="STRING",n[n.BYTES=12]="BYTES",n[n.UINT32=13]="UINT32",n[n.SFIXED32=15]="SFIXED32",n[n.SFIXED64=16]="SFIXED64",n[n.SINT32=17]="SINT32",n[n.SINT64=18]="SINT64"})(it||(it={}));var Zs;(function(n){n[n.BIGINT=0]="BIGINT",n[n.STRING=1]="STRING"})(Zs||(Zs={}));function _s(n,t,e){if(t===e)return!0;if(n==it.BYTES){if(!(t instanceof Uint8Array)||!(e instanceof Uint8Array)||t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0}switch(n){case it.UINT64:case it.FIXED64:case it.INT64:case it.SFIXED64:case it.SINT64:return t==e}return!1}function Uo(n,t){switch(n){case it.BOOL:return!1;case it.UINT64:case it.FIXED64:case it.INT64:case it.SFIXED64:case it.SINT64:return t==0?re.zero:"0";case it.DOUBLE:case it.FLOAT:return 0;case it.BYTES:return new Uint8Array(0);case it.STRING:return"";default:return 0}}function Qb(n,t){switch(n){case it.BOOL:return t===!1;case it.STRING:return t==="";case it.BYTES:return t instanceof Uint8Array&&!t.byteLength;default:return t==0}}var ye;(function(n){n[n.Varint=0]="Varint",n[n.Bit64=1]="Bit64",n[n.LengthDelimited=2]="LengthDelimited",n[n.StartGroup=3]="StartGroup",n[n.EndGroup=4]="EndGroup",n[n.Bit32=5]="Bit32"})(ye||(ye={}));class mN{constructor(t){this.stack=[],this.textEncoder=t??new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let t=0;for(let a=0;a<this.chunks.length;a++)t+=this.chunks[a].length;let e=new Uint8Array(t),i=0;for(let a=0;a<this.chunks.length;a++)e.set(this.chunks[a],i),i+=this.chunks[a].length;return this.chunks=[],e}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let t=this.finish(),e=this.stack.pop();if(!e)throw new Error("invalid state, fork stack empty");return this.chunks=e.chunks,this.buf=e.buf,this.uint32(t.byteLength),this.raw(t)}tag(t,e){return this.uint32((t<<3|e)>>>0)}raw(t){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(t),this}uint32(t){for(Mm(t);t>127;)this.buf.push(t&127|128),t=t>>>7;return this.buf.push(t),this}int32(t){return Mf(t),Fw(t,this.buf),this}bool(t){return this.buf.push(t?1:0),this}bytes(t){return this.uint32(t.byteLength),this.raw(t)}string(t){let e=this.textEncoder.encode(t);return this.uint32(e.byteLength),this.raw(e)}float(t){jb(t);let e=new Uint8Array(4);return new DataView(e.buffer).setFloat32(0,t,!0),this.raw(e)}double(t){let e=new Uint8Array(8);return new DataView(e.buffer).setFloat64(0,t,!0),this.raw(e)}fixed32(t){Mm(t);let e=new Uint8Array(4);return new DataView(e.buffer).setUint32(0,t,!0),this.raw(e)}sfixed32(t){Mf(t);let e=new Uint8Array(4);return new DataView(e.buffer).setInt32(0,t,!0),this.raw(e)}sint32(t){return Mf(t),t=(t<<1^t>>31)>>>0,Fw(t,this.buf),this}sfixed64(t){let e=new Uint8Array(8),i=new DataView(e.buffer),a=re.enc(t);return i.setInt32(0,a.lo,!0),i.setInt32(4,a.hi,!0),this.raw(e)}fixed64(t){let e=new Uint8Array(8),i=new DataView(e.buffer),a=re.uEnc(t);return i.setInt32(0,a.lo,!0),i.setInt32(4,a.hi,!0),this.raw(e)}int64(t){let e=re.enc(t);return cm(e.lo,e.hi,this.buf),this}sint64(t){let e=re.enc(t),i=e.hi>>31,a=e.lo<<1^i,u=(e.hi<<1|e.lo>>>31)^i;return cm(a,u,this.buf),this}uint64(t){let e=re.uEnc(t);return cm(e.lo,e.hi,this.buf),this}}class yN{constructor(t,e){this.varint64=cN,this.uint32=hN,this.buf=t,this.len=t.length,this.pos=0,this.view=new DataView(t.buffer,t.byteOffset,t.byteLength),this.textDecoder=e??new TextDecoder}tag(){let t=this.uint32(),e=t>>>3,i=t&7;if(e<=0||i<0||i>5)throw new Error("illegal tag: field no "+e+" wire type "+i);return[e,i]}skip(t,e){let i=this.pos;switch(t){case ye.Varint:for(;this.buf[this.pos++]&128;);break;case ye.Bit64:this.pos+=4;case ye.Bit32:this.pos+=4;break;case ye.LengthDelimited:let a=this.uint32();this.pos+=a;break;case ye.StartGroup:for(;;){const[u,c]=this.tag();if(c===ye.EndGroup){if(e!==void 0&&u!==e)throw new Error("invalid end group tag");break}this.skip(c,u)}break;default:throw new Error("cant skip wire type "+t)}return this.assertBounds(),this.buf.subarray(i,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let t=this.uint32();return t>>>1^-(t&1)}int64(){return re.dec(...this.varint64())}uint64(){return re.uDec(...this.varint64())}sint64(){let[t,e]=this.varint64(),i=-(t&1);return t=(t>>>1|(e&1)<<31)^i,e=e>>>1^i,re.dec(t,e)}bool(){let[t,e]=this.varint64();return t!==0||e!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return re.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return re.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let t=this.uint32(),e=this.pos;return this.pos+=t,this.assertBounds(),this.buf.subarray(e,e+t)}string(){return this.textDecoder.decode(this.bytes())}}function pN(n,t,e,i){let a;return{typeName:t,extendee:e,get field(){if(!a){const u=typeof i=="function"?i():i;u.name=t.split(".").pop(),u.jsonName=`[${t}]`,a=n.util.newFieldList([u]).list()[0]}return a},runtime:n}}function Wb(n){const t=n.field.localName,e=Object.create(null);return e[t]=vN(n),[e,()=>e[t]]}function vN(n){const t=n.field;if(t.repeated)return[];if(t.default!==void 0)return t.default;switch(t.kind){case"enum":return t.T.values[0].no;case"scalar":return Uo(t.T,t.L);case"message":const e=t.T,i=new e;return e.fieldWrapper?e.fieldWrapper.unwrapField(i):i;case"map":throw"map fields are not allowed to be extensions"}}function wN(n,t){if(!t.repeated&&(t.kind=="enum"||t.kind=="scalar")){for(let e=n.length-1;e>=0;--e)if(n[e].no==t.no)return[n[e]];return[]}return n.filter(e=>e.no===t.no)}let Xi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),Nd=[];for(let n=0;n<Xi.length;n++)Nd[Xi[n].charCodeAt(0)]=n;Nd[45]=Xi.indexOf("+");Nd[95]=Xi.indexOf("/");const Ay={dec(n){let t=n.length*3/4;n[n.length-2]=="="?t-=2:n[n.length-1]=="="&&(t-=1);let e=new Uint8Array(t),i=0,a=0,u,c=0;for(let d=0;d<n.length;d++){if(u=Nd[n.charCodeAt(d)],u===void 0)switch(n[d]){case"=":a=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(a){case 0:c=u,a=1;break;case 1:e[i++]=c<<2|(u&48)>>4,c=u,a=2;break;case 2:e[i++]=(c&15)<<4|(u&60)>>2,c=u,a=3;break;case 3:e[i++]=(c&3)<<6|u,a=0;break}}if(a==1)throw Error("invalid base64 string.");return e.subarray(0,i)},enc(n){let t="",e=0,i,a=0;for(let u=0;u<n.length;u++)switch(i=n[u],e){case 0:t+=Xi[i>>2],a=(i&3)<<4,e=1;break;case 1:t+=Xi[a|i>>4],a=(i&15)<<2,e=2;break;case 2:t+=Xi[a|i>>6],t+=Xi[i&63],e=0;break}return e&&(t+=Xi[a],t+="=",e==1&&(t+="=")),t}};function SN(n,t,e){e1(t,n);const i=t.runtime.bin.makeReadOptions(e),a=wN(n.getType().runtime.bin.listUnknownFields(n),t.field),[u,c]=Wb(t);for(const d of a)t.runtime.bin.readField(u,i.readerFactory(d.data),t.field,d.wireType,i);return c()}function bN(n,t,e,i){e1(t,n);const a=t.runtime.bin.makeReadOptions(i),u=t.runtime.bin.makeWriteOptions(i);if(t1(n,t)){const g=n.getType().runtime.bin.listUnknownFields(n).filter(y=>y.no!=t.field.no);n.getType().runtime.bin.discardUnknownFields(n);for(const y of g)n.getType().runtime.bin.onUnknownField(n,y.no,y.wireType,y.data)}const c=u.writerFactory();let d=t.field;!d.opt&&!d.repeated&&(d.kind=="enum"||d.kind=="scalar")&&(d=Object.assign(Object.assign({},t.field),{opt:!0})),t.runtime.bin.writeField(d,e,c,u);const h=a.readerFactory(c.finish());for(;h.pos<h.len;){const[g,y]=h.tag(),w=h.skip(y,g);n.getType().runtime.bin.onUnknownField(n,g,y,w)}}function t1(n,t){const e=n.getType();return t.extendee.typeName===e.typeName&&!!e.runtime.bin.listUnknownFields(n).find(i=>i.no==t.field.no)}function e1(n,t){ue(n.extendee.typeName==t.getType().typeName,`extension ${n.typeName} can only be applied to message ${n.extendee.typeName}`)}function n1(n,t){const e=n.localName;if(n.repeated)return t[e].length>0;if(n.oneof)return t[n.oneof.localName].case===e;switch(n.kind){case"enum":case"scalar":return n.opt||n.req?t[e]!==void 0:n.kind=="enum"?t[e]!==n.T.values[0].no:!Qb(n.T,t[e]);case"message":return t[e]!==void 0;case"map":return Object.keys(t[e]).length>0}}function Qw(n,t){const e=n.localName,i=!n.opt&&!n.req;if(n.repeated)t[e]=[];else if(n.oneof)t[n.oneof.localName]={case:void 0};else switch(n.kind){case"map":t[e]={};break;case"enum":t[e]=i?n.T.values[0].no:void 0;break;case"scalar":t[e]=i?Uo(n.T,n.L):void 0;break;case"message":t[e]=void 0;break}}function Na(n,t){if(n===null||typeof n!="object"||!Object.getOwnPropertyNames(yt.prototype).every(i=>i in n&&typeof n[i]=="function"))return!1;const e=n.getType();return e===null||typeof e!="function"||!("typeName"in e)||typeof e.typeName!="string"?!1:t===void 0?!0:e.typeName==t.typeName}function r1(n,t){return Na(t)||!n.fieldWrapper?t:n.fieldWrapper.wrapField(t)}it.DOUBLE,it.FLOAT,it.INT64,it.UINT64,it.INT32,it.UINT32,it.BOOL,it.STRING,it.BYTES;const Ww={ignoreUnknownFields:!1},tS={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0};function xN(n){return n?Object.assign(Object.assign({},Ww),n):Ww}function TN(n){return n?Object.assign(Object.assign({},tS),n):tS}const $f=Symbol(),Bf=Symbol();function AN(){return{makeReadOptions:xN,makeWriteOptions:TN,readMessage(n,t,e,i){if(t==null||Array.isArray(t)||typeof t!="object")throw new Error(`cannot decode message ${n.typeName} from JSON: ${cr(t)}`);i=i??new n;const a=new Map,u=e.typeRegistry;for(const[c,d]of Object.entries(t)){const h=n.fields.findJsonName(c);if(h){if(h.oneof){if(d===null&&h.kind=="scalar")continue;const g=a.get(h.oneof);if(g!==void 0)throw new Error(`cannot decode message ${n.typeName} from JSON: multiple keys for oneof "${h.oneof.name}" present: "${g}", "${c}"`);a.set(h.oneof,c)}eS(i,d,h,e,n)}else{let g=!1;if(u!=null&&u.findExtension&&c.startsWith("[")&&c.endsWith("]")){const y=u.findExtension(c.substring(1,c.length-1));if(y&&y.extendee.typeName==n.typeName){g=!0;const[w,v]=Wb(y);eS(w,d,y.field,e,y),bN(i,y,v(),e)}}if(!g&&!e.ignoreUnknownFields)throw new Error(`cannot decode message ${n.typeName} from JSON: key "${c}" is unknown`)}}return i},writeMessage(n,t){const e=n.getType(),i={};let a;try{for(a of e.fields.byNumber()){if(!n1(a,n)){if(a.req)throw"required field not set";if(!t.emitDefaultValues||!NN(a))continue}const c=a.oneof?n[a.oneof.localName].value:n[a.localName],d=nS(a,c,t);d!==void 0&&(i[t.useProtoFieldName?a.name:a.jsonName]=d)}const u=t.typeRegistry;if(u!=null&&u.findExtensionFor)for(const c of e.runtime.bin.listUnknownFields(n)){const d=u.findExtensionFor(e.typeName,c.no);if(d&&t1(n,d)){const h=SN(n,d,t),g=nS(d.field,h,t);g!==void 0&&(i[d.field.jsonName]=g)}}}catch(u){const c=a?`cannot encode field ${e.typeName}.${a.name} to JSON`:`cannot encode message ${e.typeName} to JSON`,d=u instanceof Error?u.message:String(u);throw new Error(c+(d.length>0?`: ${d}`:""))}return i},readScalar(n,t,e){return gu(n,t,e??Zs.BIGINT,!0)},writeScalar(n,t,e){if(t!==void 0&&(e||Qb(n,t)))return zf(n,t)},debug:cr}}function cr(n){if(n===null)return"null";switch(typeof n){case"object":return Array.isArray(n)?"array":"object";case"string":return n.length>100?"string":`"${n.split('"').join('\\"')}"`;default:return String(n)}}function eS(n,t,e,i,a){let u=e.localName;if(e.repeated){if(ue(e.kind!="map"),t===null)return;if(!Array.isArray(t))throw new Error(`cannot decode field ${a.typeName}.${e.name} from JSON: ${cr(t)}`);const c=n[u];for(const d of t){if(d===null)throw new Error(`cannot decode field ${a.typeName}.${e.name} from JSON: ${cr(d)}`);switch(e.kind){case"message":c.push(e.T.fromJson(d,i));break;case"enum":const h=fm(e.T,d,i.ignoreUnknownFields,!0);h!==Bf&&c.push(h);break;case"scalar":try{c.push(gu(e.T,d,e.L,!0))}catch(g){let y=`cannot decode field ${a.typeName}.${e.name} from JSON: ${cr(d)}`;throw g instanceof Error&&g.message.length>0&&(y+=`: ${g.message}`),new Error(y)}break}}}else if(e.kind=="map"){if(t===null)return;if(typeof t!="object"||Array.isArray(t))throw new Error(`cannot decode field ${a.typeName}.${e.name} from JSON: ${cr(t)}`);const c=n[u];for(const[d,h]of Object.entries(t)){if(h===null)throw new Error(`cannot decode field ${a.typeName}.${e.name} from JSON: map value null`);let g;try{g=EN(e.K,d)}catch(y){let w=`cannot decode map key for field ${a.typeName}.${e.name} from JSON: ${cr(t)}`;throw y instanceof Error&&y.message.length>0&&(w+=`: ${y.message}`),new Error(w)}switch(e.V.kind){case"message":c[g]=e.V.T.fromJson(h,i);break;case"enum":const y=fm(e.V.T,h,i.ignoreUnknownFields,!0);y!==Bf&&(c[g]=y);break;case"scalar":try{c[g]=gu(e.V.T,h,Zs.BIGINT,!0)}catch(w){let v=`cannot decode map value for field ${a.typeName}.${e.name} from JSON: ${cr(t)}`;throw w instanceof Error&&w.message.length>0&&(v+=`: ${w.message}`),new Error(v)}break}}}else switch(e.oneof&&(n=n[e.oneof.localName]={case:u},u="value"),e.kind){case"message":const c=e.T;if(t===null&&c.typeName!="google.protobuf.Value")return;let d=n[u];Na(d)?d.fromJson(t,i):(n[u]=d=c.fromJson(t,i),c.fieldWrapper&&!e.oneof&&(n[u]=c.fieldWrapper.unwrapField(d)));break;case"enum":const h=fm(e.T,t,i.ignoreUnknownFields,!1);switch(h){case $f:Qw(e,n);break;case Bf:break;default:n[u]=h;break}break;case"scalar":try{const g=gu(e.T,t,e.L,!1);switch(g){case $f:Qw(e,n);break;default:n[u]=g;break}}catch(g){let y=`cannot decode field ${a.typeName}.${e.name} from JSON: ${cr(t)}`;throw g instanceof Error&&g.message.length>0&&(y+=`: ${g.message}`),new Error(y)}break}}function EN(n,t){if(n===it.BOOL)switch(t){case"true":t=!0;break;case"false":t=!1;break}return gu(n,t,Zs.BIGINT,!0).toString()}function gu(n,t,e,i){if(t===null)return i?Uo(n,e):$f;switch(n){case it.DOUBLE:case it.FLOAT:if(t==="NaN")return Number.NaN;if(t==="Infinity")return Number.POSITIVE_INFINITY;if(t==="-Infinity")return Number.NEGATIVE_INFINITY;if(t===""||typeof t=="string"&&t.trim().length!==t.length||typeof t!="string"&&typeof t!="number")break;const a=Number(t);if(Number.isNaN(a)||!Number.isFinite(a))break;return n==it.FLOAT&&jb(a),a;case it.INT32:case it.FIXED32:case it.SFIXED32:case it.SINT32:case it.UINT32:let u;if(typeof t=="number"?u=t:typeof t=="string"&&t.length>0&&t.trim().length===t.length&&(u=Number(t)),u===void 0)break;return n==it.UINT32||n==it.FIXED32?Mm(u):Mf(u),u;case it.INT64:case it.SFIXED64:case it.SINT64:if(typeof t!="number"&&typeof t!="string")break;const c=re.parse(t);return e?c.toString():c;case it.FIXED64:case it.UINT64:if(typeof t!="number"&&typeof t!="string")break;const d=re.uParse(t);return e?d.toString():d;case it.BOOL:if(typeof t!="boolean")break;return t;case it.STRING:if(typeof t!="string")break;try{encodeURIComponent(t)}catch{throw new Error("invalid UTF8")}return t;case it.BYTES:if(t==="")return new Uint8Array(0);if(typeof t!="string")break;return Ay.dec(t)}throw new Error}function fm(n,t,e,i){if(t===null)return n.typeName=="google.protobuf.NullValue"?0:i?n.values[0].no:$f;switch(typeof t){case"number":if(Number.isInteger(t))return t;break;case"string":const a=n.findName(t);if(a!==void 0)return a.no;if(e)return Bf;break}throw new Error(`cannot decode enum ${n.typeName} from JSON: ${cr(t)}`)}function NN(n){return n.repeated||n.kind=="map"?!0:!(n.oneof||n.kind=="message"||n.opt||n.req)}function nS(n,t,e){if(n.kind=="map"){ue(typeof t=="object"&&t!=null);const i={},a=Object.entries(t);switch(n.V.kind){case"scalar":for(const[c,d]of a)i[c.toString()]=zf(n.V.T,d);break;case"message":for(const[c,d]of a)i[c.toString()]=d.toJson(e);break;case"enum":const u=n.V.T;for(const[c,d]of a)i[c.toString()]=dm(u,d,e.enumAsInteger);break}return e.emitDefaultValues||a.length>0?i:void 0}if(n.repeated){ue(Array.isArray(t));const i=[];switch(n.kind){case"scalar":for(let a=0;a<t.length;a++)i.push(zf(n.T,t[a]));break;case"enum":for(let a=0;a<t.length;a++)i.push(dm(n.T,t[a],e.enumAsInteger));break;case"message":for(let a=0;a<t.length;a++)i.push(t[a].toJson(e));break}return e.emitDefaultValues||i.length>0?i:void 0}switch(n.kind){case"scalar":return zf(n.T,t);case"enum":return dm(n.T,t,e.enumAsInteger);case"message":return r1(n.T,t).toJson(e)}}function dm(n,t,e){var i;if(ue(typeof t=="number"),n.typeName=="google.protobuf.NullValue")return null;if(e)return t;const a=n.findNumber(t);return(i=a==null?void 0:a.name)!==null&&i!==void 0?i:t}function zf(n,t){switch(n){case it.INT32:case it.SFIXED32:case it.SINT32:case it.FIXED32:case it.UINT32:return ue(typeof t=="number"),t;case it.FLOAT:case it.DOUBLE:return ue(typeof t=="number"),Number.isNaN(t)?"NaN":t===Number.POSITIVE_INFINITY?"Infinity":t===Number.NEGATIVE_INFINITY?"-Infinity":t;case it.STRING:return ue(typeof t=="string"),t;case it.BOOL:return ue(typeof t=="boolean"),t;case it.UINT64:case it.FIXED64:case it.INT64:case it.SFIXED64:case it.SINT64:return ue(typeof t=="bigint"||typeof t=="string"||typeof t=="number"),t.toString();case it.BYTES:return ue(t instanceof Uint8Array),Ay.enc(t)}}const Eo=Symbol("@bufbuild/protobuf/unknown-fields"),rS={readUnknownFields:!0,readerFactory:n=>new yN(n)},iS={writeUnknownFields:!0,writerFactory:()=>new mN};function DN(n){return n?Object.assign(Object.assign({},rS),n):rS}function CN(n){return n?Object.assign(Object.assign({},iS),n):iS}function kN(){return{makeReadOptions:DN,makeWriteOptions:CN,listUnknownFields(n){var t;return(t=n[Eo])!==null&&t!==void 0?t:[]},discardUnknownFields(n){delete n[Eo]},writeUnknownFields(n,t){const i=n[Eo];if(i)for(const a of i)t.tag(a.no,a.wireType).raw(a.data)},onUnknownField(n,t,e,i){const a=n;Array.isArray(a[Eo])||(a[Eo]=[]),a[Eo].push({no:t,wireType:e,data:i})},readMessage(n,t,e,i,a){const u=n.getType(),c=a?t.len:t.pos+e;let d,h;for(;t.pos<c&&([d,h]=t.tag(),!(a===!0&&h==ye.EndGroup));){const g=u.fields.find(d);if(!g){const y=t.skip(h,d);i.readUnknownFields&&this.onUnknownField(n,d,h,y);continue}sS(n,t,g,h,i)}if(a&&(h!=ye.EndGroup||d!==e))throw new Error("invalid end group tag")},readField:sS,writeMessage(n,t,e){const i=n.getType();for(const a of i.fields.byNumber()){if(!n1(a,n)){if(a.req)throw new Error(`cannot encode field ${i.typeName}.${a.name} to binary: required field not set`);continue}const u=a.oneof?n[a.oneof.localName].value:n[a.localName];aS(a,u,t,e)}return e.writeUnknownFields&&this.writeUnknownFields(n,t),t},writeField(n,t,e,i){t!==void 0&&aS(n,t,e,i)}}}function sS(n,t,e,i,a){let{repeated:u,localName:c}=e;switch(e.oneof&&(n=n[e.oneof.localName],n.case!=c&&delete n.value,n.case=c,c="value"),e.kind){case"scalar":case"enum":const d=e.kind=="enum"?it.INT32:e.T;let h=Vf;if(e.kind=="scalar"&&e.L>0&&(h=IN),u){let v=n[c];if(i==ye.LengthDelimited&&d!=it.STRING&&d!=it.BYTES){let x=t.uint32()+t.pos;for(;t.pos<x;)v.push(h(t,d))}else v.push(h(t,d))}else n[c]=h(t,d);break;case"message":const g=e.T;u?n[c].push(Lf(t,new g,a,e)):Na(n[c])?Lf(t,n[c],a,e):(n[c]=Lf(t,new g,a,e),g.fieldWrapper&&!e.oneof&&!e.repeated&&(n[c]=g.fieldWrapper.unwrapField(n[c])));break;case"map":let[y,w]=ON(e,t,a);n[c][y]=w;break}}function Lf(n,t,e,i){const a=t.getType().runtime.bin,u=i==null?void 0:i.delimited;return a.readMessage(t,n,u?i.no:n.uint32(),e,u),t}function ON(n,t,e){const i=t.uint32(),a=t.pos+i;let u,c;for(;t.pos<a;){const[d]=t.tag();switch(d){case 1:u=Vf(t,n.K);break;case 2:switch(n.V.kind){case"scalar":c=Vf(t,n.V.T);break;case"enum":c=t.int32();break;case"message":c=Lf(t,new n.V.T,e,void 0);break}break}}if(u===void 0&&(u=Uo(n.K,Zs.BIGINT)),typeof u!="string"&&typeof u!="number"&&(u=u.toString()),c===void 0)switch(n.V.kind){case"scalar":c=Uo(n.V.T,Zs.BIGINT);break;case"enum":c=n.V.T.values[0].no;break;case"message":c=new n.V.T;break}return[u,c]}function IN(n,t){const e=Vf(n,t);return typeof e=="bigint"?e.toString():e}function Vf(n,t){switch(t){case it.STRING:return n.string();case it.BOOL:return n.bool();case it.DOUBLE:return n.double();case it.FLOAT:return n.float();case it.INT32:return n.int32();case it.INT64:return n.int64();case it.UINT64:return n.uint64();case it.FIXED64:return n.fixed64();case it.BYTES:return n.bytes();case it.FIXED32:return n.fixed32();case it.SFIXED32:return n.sfixed32();case it.SFIXED64:return n.sfixed64();case it.SINT64:return n.sint64();case it.UINT32:return n.uint32();case it.SINT32:return n.sint32()}}function aS(n,t,e,i){ue(t!==void 0);const a=n.repeated;switch(n.kind){case"scalar":case"enum":let u=n.kind=="enum"?it.INT32:n.T;if(a)if(ue(Array.isArray(t)),n.packed)RN(e,u,n.no,t);else for(const c of t)mu(e,u,n.no,c);else mu(e,u,n.no,t);break;case"message":if(a){ue(Array.isArray(t));for(const c of t)oS(e,i,n,c)}else oS(e,i,n,t);break;case"map":ue(typeof t=="object"&&t!=null);for(const[c,d]of Object.entries(t))MN(e,i,n,c,d);break}}function MN(n,t,e,i,a){n.tag(e.no,ye.LengthDelimited),n.fork();let u=i;switch(e.K){case it.INT32:case it.FIXED32:case it.UINT32:case it.SFIXED32:case it.SINT32:u=Number.parseInt(i);break;case it.BOOL:ue(i=="true"||i=="false"),u=i=="true";break}switch(mu(n,e.K,1,u),e.V.kind){case"scalar":mu(n,e.V.T,2,a);break;case"enum":mu(n,it.INT32,2,a);break;case"message":ue(a!==void 0),n.tag(2,ye.LengthDelimited).bytes(a.toBinary(t));break}n.join()}function oS(n,t,e,i){const a=r1(e.T,i);e.delimited?n.tag(e.no,ye.StartGroup).raw(a.toBinary(t)).tag(e.no,ye.EndGroup):n.tag(e.no,ye.LengthDelimited).bytes(a.toBinary(t))}function mu(n,t,e,i){ue(i!==void 0);let[a,u]=i1(t);n.tag(e,a)[u](i)}function RN(n,t,e,i){if(!i.length)return;n.tag(e,ye.LengthDelimited).fork();let[,a]=i1(t);for(let u=0;u<i.length;u++)n[a](i[u]);n.join()}function i1(n){let t=ye.Varint;switch(n){case it.BYTES:case it.STRING:t=ye.LengthDelimited;break;case it.DOUBLE:case it.FIXED64:case it.SFIXED64:t=ye.Bit64;break;case it.FIXED32:case it.SFIXED32:case it.FLOAT:t=ye.Bit32;break}const e=it[n].toLowerCase();return[t,e]}function BN(){return{setEnumType:Gb,initPartial(n,t){if(n===void 0)return;const e=t.getType();for(const i of e.fields.byMember()){const a=i.localName,u=t,c=n;if(c[a]!=null)switch(i.kind){case"oneof":const d=c[a].case;if(d===void 0)continue;const h=i.findField(d);let g=c[a].value;h&&h.kind=="message"&&!Na(g,h.T)?g=new h.T(g):h&&h.kind==="scalar"&&h.T===it.BYTES&&(g=au(g)),u[a]={case:d,value:g};break;case"scalar":case"enum":let y=c[a];i.T===it.BYTES&&(y=i.repeated?y.map(au):au(y)),u[a]=y;break;case"map":switch(i.V.kind){case"scalar":case"enum":if(i.V.T===it.BYTES)for(const[S,x]of Object.entries(c[a]))u[a][S]=au(x);else Object.assign(u[a],c[a]);break;case"message":const v=i.V.T;for(const S of Object.keys(c[a])){let x=c[a][S];v.fieldWrapper||(x=new v(x)),u[a][S]=x}break}break;case"message":const w=i.T;if(i.repeated)u[a]=c[a].map(v=>Na(v,w)?v:new w(v));else{const v=c[a];w.fieldWrapper?w.typeName==="google.protobuf.BytesValue"?u[a]=au(v):u[a]=v:u[a]=Na(v,w)?v:new w(v)}break}}},equals(n,t,e){return t===e?!0:!t||!e?!1:n.fields.byMember().every(i=>{const a=t[i.localName],u=e[i.localName];if(i.repeated){if(a.length!==u.length)return!1;switch(i.kind){case"message":return a.every((c,d)=>i.T.equals(c,u[d]));case"scalar":return a.every((c,d)=>_s(i.T,c,u[d]));case"enum":return a.every((c,d)=>_s(it.INT32,c,u[d]))}throw new Error(`repeated cannot contain ${i.kind}`)}switch(i.kind){case"message":return i.T.equals(a,u);case"enum":return _s(it.INT32,a,u);case"scalar":return _s(i.T,a,u);case"oneof":if(a.case!==u.case)return!1;const c=i.findField(a.case);if(c===void 0)return!0;switch(c.kind){case"message":return c.T.equals(a.value,u.value);case"enum":return _s(it.INT32,a.value,u.value);case"scalar":return _s(c.T,a.value,u.value)}throw new Error(`oneof cannot contain ${c.kind}`);case"map":const d=Object.keys(a).concat(Object.keys(u));switch(i.V.kind){case"message":const h=i.V.T;return d.every(y=>h.equals(a[y],u[y]));case"enum":return d.every(y=>_s(it.INT32,a[y],u[y]));case"scalar":const g=i.V.T;return d.every(y=>_s(g,a[y],u[y]))}break}})},clone(n){const t=n.getType(),e=new t,i=e;for(const a of t.fields.byMember()){const u=n[a.localName];let c;if(a.repeated)c=u.map(vf);else if(a.kind=="map"){c=i[a.localName];for(const[d,h]of Object.entries(u))c[d]=vf(h)}else a.kind=="oneof"?c=a.findField(u.case)?{case:u.case,value:vf(u.value)}:{case:void 0}:c=vf(u);i[a.localName]=c}for(const a of t.runtime.bin.listUnknownFields(n))t.runtime.bin.onUnknownField(i,a.no,a.wireType,a.data);return e}}}function vf(n){if(n===void 0)return n;if(Na(n))return n.clone();if(n instanceof Uint8Array){const t=new Uint8Array(n.byteLength);return t.set(n),t}return n}function au(n){return n instanceof Uint8Array?n:new Uint8Array(n)}function zN(n,t,e){return{syntax:n,json:AN(),bin:kN(),util:Object.assign(Object.assign({},BN()),{newFieldList:t,initFields:e}),makeMessageType(i,a,u){return uN(this,i,a,u)},makeEnum:lN,makeEnumType:Xb,getEnumType:oN,makeExtension(i,a,u){return pN(this,i,a,u)}}}class LN{constructor(t,e){this._fields=t,this._normalizer=e}findJsonName(t){if(!this.jsonNames){const e={};for(const i of this.list())e[i.jsonName]=e[i.name]=i;this.jsonNames=e}return this.jsonNames[t]}find(t){if(!this.numbers){const e={};for(const i of this.list())e[i.no]=i;this.numbers=e}return this.numbers[t]}list(){return this.all||(this.all=this._normalizer(this._fields)),this.all}byNumber(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort((t,e)=>t.no-e.no)),this.numbersAsc}byMember(){if(!this.members){this.members=[];const t=this.members;let e;for(const i of this.list())i.oneof?i.oneof!==e&&(e=i.oneof,t.push(e)):t.push(i)}return this.members}}function s1(n,t){const e=a1(n);return t?e:HN(JN(e))}function _N(n){return s1(n,!1)}const UN=a1;function a1(n){let t=!1;const e=[];for(let i=0;i<n.length;i++){let a=n.charAt(i);switch(a){case"_":t=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":e.push(a),t=!1;break;default:t&&(t=!1,a=a.toUpperCase()),e.push(a);break}}return e.join("")}const qN=new Set(["constructor","toString","toJSON","valueOf"]),PN=new Set(["getType","clone","equals","fromBinary","fromJson","fromJsonString","toBinary","toJson","toJsonString","toObject"]),o1=n=>`${n}$`,JN=n=>PN.has(n)?o1(n):n,HN=n=>qN.has(n)?o1(n):n;class $N{constructor(t){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.req=!1,this.default=void 0,this.fields=[],this.name=t,this.localName=_N(t)}addField(t){ue(t.oneof===this,`field ${t.name} not one of ${this.name}`),this.fields.push(t)}findField(t){if(!this._lookup){this._lookup=Object.create(null);for(let e=0;e<this.fields.length;e++)this._lookup[this.fields[e].localName]=this.fields[e]}return this._lookup[t]}}function VN(n,t){var e,i,a,u,c,d;const h=[];let g;for(const y of typeof n=="function"?n():n){const w=y;if(w.localName=s1(y.name,y.oneof!==void 0),w.jsonName=(e=y.jsonName)!==null&&e!==void 0?e:UN(y.name),w.repeated=(i=y.repeated)!==null&&i!==void 0?i:!1,y.kind=="scalar"&&(w.L=(a=y.L)!==null&&a!==void 0?a:Zs.BIGINT),w.delimited=(u=y.delimited)!==null&&u!==void 0?u:!1,w.req=(c=y.req)!==null&&c!==void 0?c:!1,w.opt=(d=y.opt)!==null&&d!==void 0?d:!1,y.packed===void 0&&(w.packed=y.kind=="enum"||y.kind=="scalar"&&y.T!=it.BYTES&&y.T!=it.STRING),y.oneof!==void 0){const v=typeof y.oneof=="string"?y.oneof:y.oneof.name;(!g||g.name!=v)&&(g=new $N(v)),w.oneof=g,g.addField(w)}h.push(w)}return h}const T=zN("proto3",n=>new LN(n,t=>VN(t)),n=>{for(const t of n.getType().fields.byMember()){if(t.opt)continue;const e=t.localName,i=n;if(t.repeated){i[e]=[];continue}switch(t.kind){case"oneof":i[e]={case:void 0};break;case"enum":i[e]=0;break;case"map":i[e]={};break;case"scalar":i[e]=Uo(t.T,t.L);break}}});var Ve;(function(n){n[n.Unary=0]="Unary",n[n.ServerStreaming=1]="ServerStreaming",n[n.ClientStreaming=2]="ClientStreaming",n[n.BiDiStreaming=3]="BiDiStreaming"})(Ve||(Ve={}));var lS;(function(n){n[n.NoSideEffects=1]="NoSideEffects",n[n.Idempotent=2]="Idempotent"})(lS||(lS={}));class Pe extends yt{constructor(t){super(),this.seconds=re.zero,this.nanos=0,T.util.initPartial(t,this)}fromJson(t,e){if(typeof t!="string")throw new Error(`cannot decode google.protobuf.Timestamp from JSON: ${T.json.debug(t)}`);const i=t.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!i)throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");const a=Date.parse(i[1]+"-"+i[2]+"-"+i[3]+"T"+i[4]+":"+i[5]+":"+i[6]+(i[8]?i[8]:"Z"));if(Number.isNaN(a))throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");if(a<Date.parse("0001-01-01T00:00:00Z")||a>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot decode message google.protobuf.Timestamp from JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");return this.seconds=re.parse(a/1e3),this.nanos=0,i[7]&&(this.nanos=parseInt("1"+i[7]+"0".repeat(9-i[7].length))-1e9),this}toJson(t){const e=Number(this.seconds)*1e3;if(e<Date.parse("0001-01-01T00:00:00Z")||e>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot encode google.protobuf.Timestamp to JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");if(this.nanos<0)throw new Error("cannot encode google.protobuf.Timestamp to JSON: nanos must not be negative");let i="Z";if(this.nanos>0){const a=(this.nanos+1e9).toString().substring(1);a.substring(3)==="000000"?i="."+a.substring(0,3)+"Z":a.substring(6)==="000"?i="."+a.substring(0,6)+"Z":i="."+a+"Z"}return new Date(e).toISOString().replace(".000Z",i)}toDate(){return new Date(Number(this.seconds)*1e3+Math.ceil(this.nanos/1e6))}static now(){return Pe.fromDate(new Date)}static fromDate(t){const e=t.getTime();return new Pe({seconds:re.parse(Math.floor(e/1e3)),nanos:e%1e3*1e6})}static fromBinary(t,e){return new Pe().fromBinary(t,e)}static fromJson(t,e){return new Pe().fromJson(t,e)}static fromJsonString(t,e){return new Pe().fromJsonString(t,e)}static equals(t,e){return T.util.equals(Pe,t,e)}}Pe.runtime=T;Pe.typeName="google.protobuf.Timestamp";Pe.fields=T.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);class Ki extends yt{constructor(t){super(),this.seconds=re.zero,this.nanos=0,T.util.initPartial(t,this)}fromJson(t,e){if(typeof t!="string")throw new Error(`cannot decode google.protobuf.Duration from JSON: ${T.json.debug(t)}`);const i=t.match(/^(-?[0-9]+)(?:\.([0-9]+))?s/);if(i===null)throw new Error(`cannot decode google.protobuf.Duration from JSON: ${T.json.debug(t)}`);const a=Number(i[1]);if(a>315576e6||a<-315576e6)throw new Error(`cannot decode google.protobuf.Duration from JSON: ${T.json.debug(t)}`);if(this.seconds=re.parse(a),typeof i[2]=="string"){const u=i[2]+"0".repeat(9-i[2].length);this.nanos=parseInt(u),(a<0||Object.is(a,-0))&&(this.nanos=-this.nanos)}return this}toJson(t){if(Number(this.seconds)>315576e6||Number(this.seconds)<-315576e6)throw new Error("cannot encode google.protobuf.Duration to JSON: value out of range");let e=this.seconds.toString();if(this.nanos!==0){let i=Math.abs(this.nanos).toString();i="0".repeat(9-i.length)+i,i.substring(3)==="000000"?i=i.substring(0,3):i.substring(6)==="000"&&(i=i.substring(0,6)),e+="."+i,this.nanos<0&&Number(this.seconds)==0&&(e="-"+e)}return e+"s"}static fromBinary(t,e){return new Ki().fromBinary(t,e)}static fromJson(t,e){return new Ki().fromJson(t,e)}static fromJsonString(t,e){return new Ki().fromJsonString(t,e)}static equals(t,e){return T.util.equals(Ki,t,e)}}Ki.runtime=T;Ki.typeName="google.protobuf.Duration";Ki.fields=T.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);class fr extends yt{constructor(t){super(),this.typeUrl="",this.value=new Uint8Array(0),T.util.initPartial(t,this)}toJson(t){var e;if(this.typeUrl==="")return{};const i=this.typeUrlToName(this.typeUrl),a=(e=t==null?void 0:t.typeRegistry)===null||e===void 0?void 0:e.findMessage(i);if(!a)throw new Error(`cannot encode message google.protobuf.Any to JSON: "${this.typeUrl}" is not in the type registry`);let c=a.fromBinary(this.value).toJson(t);return(i.startsWith("google.protobuf.")||c===null||Array.isArray(c)||typeof c!="object")&&(c={value:c}),c["@type"]=this.typeUrl,c}fromJson(t,e){var i;if(t===null||Array.isArray(t)||typeof t!="object")throw new Error(`cannot decode message google.protobuf.Any from JSON: expected object but got ${t===null?"null":Array.isArray(t)?"array":typeof t}`);if(Object.keys(t).length==0)return this;const a=t["@type"];if(typeof a!="string"||a=="")throw new Error('cannot decode message google.protobuf.Any from JSON: "@type" is empty');const u=this.typeUrlToName(a),c=(i=e==null?void 0:e.typeRegistry)===null||i===void 0?void 0:i.findMessage(u);if(!c)throw new Error(`cannot decode message google.protobuf.Any from JSON: ${a} is not in the type registry`);let d;if(u.startsWith("google.protobuf.")&&Object.prototype.hasOwnProperty.call(t,"value"))d=c.fromJson(t.value,e);else{const h=Object.assign({},t);delete h["@type"],d=c.fromJson(h,e)}return this.packFrom(d),this}packFrom(t){this.value=t.toBinary(),this.typeUrl=this.typeNameToUrl(t.getType().typeName)}unpackTo(t){return this.is(t.getType())?(t.fromBinary(this.value),!0):!1}unpack(t){if(this.typeUrl==="")return;const e=t.findMessage(this.typeUrlToName(this.typeUrl));if(e)return e.fromBinary(this.value)}is(t){if(this.typeUrl==="")return!1;const e=this.typeUrlToName(this.typeUrl);let i="";return typeof t=="string"?i=t:i=t.typeName,e===i}typeNameToUrl(t){return`type.googleapis.com/${t}`}typeUrlToName(t){if(!t.length)throw new Error(`invalid type url: ${t}`);const e=t.lastIndexOf("/"),i=e>=0?t.substring(e+1):t;if(!i.length)throw new Error(`invalid type url: ${t}`);return i}static pack(t){const e=new fr;return e.packFrom(t),e}static fromBinary(t,e){return new fr().fromBinary(t,e)}static fromJson(t,e){return new fr().fromJson(t,e)}static fromJsonString(t,e){return new fr().fromJsonString(t,e)}static equals(t,e){return T.util.equals(fr,t,e)}}fr.runtime=T;fr.typeName="google.protobuf.Any";fr.fields=T.util.newFieldList(()=>[{no:1,name:"type_url",kind:"scalar",T:9},{no:2,name:"value",kind:"scalar",T:12}]);class dr extends yt{constructor(t){super(),this.value=0,T.util.initPartial(t,this)}toJson(t){return T.json.writeScalar(it.DOUBLE,this.value,!0)}fromJson(t,e){try{this.value=T.json.readScalar(it.DOUBLE,t)}catch(i){let a='cannot decode message google.protobuf.DoubleValue from JSON"';throw i instanceof Error&&i.message.length>0&&(a+=`: ${i.message}`),new Error(a)}return this}static fromBinary(t,e){return new dr().fromBinary(t,e)}static fromJson(t,e){return new dr().fromJson(t,e)}static fromJsonString(t,e){return new dr().fromJsonString(t,e)}static equals(t,e){return T.util.equals(dr,t,e)}}dr.runtime=T;dr.typeName="google.protobuf.DoubleValue";dr.fields=T.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:1}]);dr.fieldWrapper={wrapField(n){return new dr({value:n})},unwrapField(n){return n.value}};class hr extends yt{constructor(t){super(),this.value=0,T.util.initPartial(t,this)}toJson(t){return T.json.writeScalar(it.FLOAT,this.value,!0)}fromJson(t,e){try{this.value=T.json.readScalar(it.FLOAT,t)}catch(i){let a='cannot decode message google.protobuf.FloatValue from JSON"';throw i instanceof Error&&i.message.length>0&&(a+=`: ${i.message}`),new Error(a)}return this}static fromBinary(t,e){return new hr().fromBinary(t,e)}static fromJson(t,e){return new hr().fromJson(t,e)}static fromJsonString(t,e){return new hr().fromJsonString(t,e)}static equals(t,e){return T.util.equals(hr,t,e)}}hr.runtime=T;hr.typeName="google.protobuf.FloatValue";hr.fields=T.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:2}]);hr.fieldWrapper={wrapField(n){return new hr({value:n})},unwrapField(n){return n.value}};class gr extends yt{constructor(t){super(),this.value=re.zero,T.util.initPartial(t,this)}toJson(t){return T.json.writeScalar(it.INT64,this.value,!0)}fromJson(t,e){try{this.value=T.json.readScalar(it.INT64,t)}catch(i){let a='cannot decode message google.protobuf.Int64Value from JSON"';throw i instanceof Error&&i.message.length>0&&(a+=`: ${i.message}`),new Error(a)}return this}static fromBinary(t,e){return new gr().fromBinary(t,e)}static fromJson(t,e){return new gr().fromJson(t,e)}static fromJsonString(t,e){return new gr().fromJsonString(t,e)}static equals(t,e){return T.util.equals(gr,t,e)}}gr.runtime=T;gr.typeName="google.protobuf.Int64Value";gr.fields=T.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:3}]);gr.fieldWrapper={wrapField(n){return new gr({value:n})},unwrapField(n){return n.value}};class mr extends yt{constructor(t){super(),this.value=re.zero,T.util.initPartial(t,this)}toJson(t){return T.json.writeScalar(it.UINT64,this.value,!0)}fromJson(t,e){try{this.value=T.json.readScalar(it.UINT64,t)}catch(i){let a='cannot decode message google.protobuf.UInt64Value from JSON"';throw i instanceof Error&&i.message.length>0&&(a+=`: ${i.message}`),new Error(a)}return this}static fromBinary(t,e){return new mr().fromBinary(t,e)}static fromJson(t,e){return new mr().fromJson(t,e)}static fromJsonString(t,e){return new mr().fromJsonString(t,e)}static equals(t,e){return T.util.equals(mr,t,e)}}mr.runtime=T;mr.typeName="google.protobuf.UInt64Value";mr.fields=T.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:4}]);mr.fieldWrapper={wrapField(n){return new mr({value:n})},unwrapField(n){return n.value}};class hn extends yt{constructor(t){super(),this.value=0,T.util.initPartial(t,this)}toJson(t){return T.json.writeScalar(it.INT32,this.value,!0)}fromJson(t,e){try{this.value=T.json.readScalar(it.INT32,t)}catch(i){let a='cannot decode message google.protobuf.Int32Value from JSON"';throw i instanceof Error&&i.message.length>0&&(a+=`: ${i.message}`),new Error(a)}return this}static fromBinary(t,e){return new hn().fromBinary(t,e)}static fromJson(t,e){return new hn().fromJson(t,e)}static fromJsonString(t,e){return new hn().fromJsonString(t,e)}static equals(t,e){return T.util.equals(hn,t,e)}}hn.runtime=T;hn.typeName="google.protobuf.Int32Value";hn.fields=T.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:5}]);hn.fieldWrapper={wrapField(n){return new hn({value:n})},unwrapField(n){return n.value}};class yr extends yt{constructor(t){super(),this.value=0,T.util.initPartial(t,this)}toJson(t){return T.json.writeScalar(it.UINT32,this.value,!0)}fromJson(t,e){try{this.value=T.json.readScalar(it.UINT32,t)}catch(i){let a='cannot decode message google.protobuf.UInt32Value from JSON"';throw i instanceof Error&&i.message.length>0&&(a+=`: ${i.message}`),new Error(a)}return this}static fromBinary(t,e){return new yr().fromBinary(t,e)}static fromJson(t,e){return new yr().fromJson(t,e)}static fromJsonString(t,e){return new yr().fromJsonString(t,e)}static equals(t,e){return T.util.equals(yr,t,e)}}yr.runtime=T;yr.typeName="google.protobuf.UInt32Value";yr.fields=T.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:13}]);yr.fieldWrapper={wrapField(n){return new yr({value:n})},unwrapField(n){return n.value}};class pr extends yt{constructor(t){super(),this.value=!1,T.util.initPartial(t,this)}toJson(t){return T.json.writeScalar(it.BOOL,this.value,!0)}fromJson(t,e){try{this.value=T.json.readScalar(it.BOOL,t)}catch(i){let a='cannot decode message google.protobuf.BoolValue from JSON"';throw i instanceof Error&&i.message.length>0&&(a+=`: ${i.message}`),new Error(a)}return this}static fromBinary(t,e){return new pr().fromBinary(t,e)}static fromJson(t,e){return new pr().fromJson(t,e)}static fromJsonString(t,e){return new pr().fromJsonString(t,e)}static equals(t,e){return T.util.equals(pr,t,e)}}pr.runtime=T;pr.typeName="google.protobuf.BoolValue";pr.fields=T.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:8}]);pr.fieldWrapper={wrapField(n){return new pr({value:n})},unwrapField(n){return n.value}};class Qe extends yt{constructor(t){super(),this.value="",T.util.initPartial(t,this)}toJson(t){return T.json.writeScalar(it.STRING,this.value,!0)}fromJson(t,e){try{this.value=T.json.readScalar(it.STRING,t)}catch(i){let a='cannot decode message google.protobuf.StringValue from JSON"';throw i instanceof Error&&i.message.length>0&&(a+=`: ${i.message}`),new Error(a)}return this}static fromBinary(t,e){return new Qe().fromBinary(t,e)}static fromJson(t,e){return new Qe().fromJson(t,e)}static fromJsonString(t,e){return new Qe().fromJsonString(t,e)}static equals(t,e){return T.util.equals(Qe,t,e)}}Qe.runtime=T;Qe.typeName="google.protobuf.StringValue";Qe.fields=T.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:9}]);Qe.fieldWrapper={wrapField(n){return new Qe({value:n})},unwrapField(n){return n.value}};class vr extends yt{constructor(t){super(),this.value=new Uint8Array(0),T.util.initPartial(t,this)}toJson(t){return T.json.writeScalar(it.BYTES,this.value,!0)}fromJson(t,e){try{this.value=T.json.readScalar(it.BYTES,t)}catch(i){let a='cannot decode message google.protobuf.BytesValue from JSON"';throw i instanceof Error&&i.message.length>0&&(a+=`: ${i.message}`),new Error(a)}return this}static fromBinary(t,e){return new vr().fromBinary(t,e)}static fromJson(t,e){return new vr().fromJson(t,e)}static fromJsonString(t,e){return new vr().fromJsonString(t,e)}static equals(t,e){return T.util.equals(vr,t,e)}}vr.runtime=T;vr.typeName="google.protobuf.BytesValue";vr.fields=T.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:12}]);vr.fieldWrapper={wrapField(n){return new vr({value:n})},unwrapField(n){return n.value}};function jN(n,t,e){try{const i=Ay.dec(n);return t?t.fromBinary(i,e):i}catch(i){throw Gt.from(i,_t.DataLoss)}}function YN(n,t){const e={};for(const[i,a]of Object.entries(n.methods)){const u=t(Object.assign(Object.assign({},a),{localName:i,service:n}));u!=null&&(e[i]=u)}return e}const uS=1;function cS(n){let t,e=new Uint8Array(0);function i(a){const u=new Uint8Array(e.length+a.length);u.set(e),u.set(a,e.length),e=u}return new ReadableStream({start(){t=n.getReader()},async pull(a){let u;for(;;){if(u===void 0&&e.byteLength>=5){let h=0;for(let g=1;g<5;g++)h=(h<<8)+e[g];u={flags:e[0],length:h}}if(u!==void 0&&e.byteLength>=u.length+5)break;const d=await t.read();if(d.done)break;i(d.value)}if(u===void 0){if(e.byteLength==0){a.close();return}a.error(new Gt("premature end of stream",_t.DataLoss));return}const c=e.subarray(5,5+u.length);e=e.subarray(5+u.length),a.enqueue({flags:u.flags,data:c})}})}function fS(n,t){const e=new Uint8Array(t.length+5);e.set(t,5);const i=new DataView(e.buffer,e.byteOffset,e.byteLength);return i.setUint8(0,n),i.setUint32(1,t.length),e}var GN=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=n[Symbol.asyncIterator],e;return t?t.call(n):(n=typeof __values=="function"?__values(n):n[Symbol.iterator](),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e);function i(u){e[u]=n[u]&&function(c){return new Promise(function(d,h){c=n[u](c),a(d,h,c.done,c.value)})}}function a(u,c,d,h){Promise.resolve(h).then(function(g){u({value:g,done:d})},c)}},bu=function(n){return this instanceof bu?(this.v=n,this):new bu(n)},XN=function(n,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=e.apply(n,t||[]),a,u=[];return a={},d("next"),d("throw"),d("return",c),a[Symbol.asyncIterator]=function(){return this},a;function c(S){return function(x){return Promise.resolve(x).then(S,w)}}function d(S,x){i[S]&&(a[S]=function(E){return new Promise(function(I,k){u.push([S,E,I,k])>1||h(S,E)})},x&&(a[S]=x(a[S])))}function h(S,x){try{g(i[S](x))}catch(E){v(u[0][3],E)}}function g(S){S.value instanceof bu?Promise.resolve(S.value.v).then(y,w):v(u[0][2],S)}function y(S){h("next",S)}function w(S){h("throw",S)}function v(S,x){S(x),u.shift(),u.length&&h(u[0][0],u[0][1])}},KN=function(n){var t,e;return t={},i("next"),i("throw",function(a){throw a}),i("return"),t[Symbol.iterator]=function(){return this},t;function i(a,u){t[a]=n[a]?function(c){return(e=!e)?{value:bu(n[a](c)),done:!1}:u?u(c):c}:u}};function FN(n){return XN(this,arguments,function*(){yield bu(yield*KN(GN(n)))})}var l1=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=n[Symbol.asyncIterator],e;return t?t.call(n):(n=typeof __values=="function"?__values(n):n[Symbol.iterator](),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e);function i(u){e[u]=n[u]&&function(c){return new Promise(function(d,h){c=n[u](c),a(d,h,c.done,c.value)})}}function a(u,c,d,h){Promise.resolve(h).then(function(g){u({value:g,done:d})},c)}},qo=function(n){return this instanceof qo?(this.v=n,this):new qo(n)},ZN=function(n){var t,e;return t={},i("next"),i("throw",function(a){throw a}),i("return"),t[Symbol.iterator]=function(){return this},t;function i(a,u){t[a]=n[a]?function(c){return(e=!e)?{value:qo(n[a](c)),done:!1}:u?u(c):c}:u}},QN=function(n,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=e.apply(n,t||[]),a,u=[];return a={},d("next"),d("throw"),d("return",c),a[Symbol.asyncIterator]=function(){return this},a;function c(S){return function(x){return Promise.resolve(x).then(S,w)}}function d(S,x){i[S]&&(a[S]=function(E){return new Promise(function(I,k){u.push([S,E,I,k])>1||h(S,E)})},x&&(a[S]=x(a[S])))}function h(S,x){try{g(i[S](x))}catch(E){v(u[0][3],E)}}function g(S){S.value instanceof qo?Promise.resolve(S.value.v).then(y,w):v(u[0][2],S)}function y(S){h("next",S)}function w(S){h("throw",S)}function v(S,x){S(x),u.shift(),u.length&&h(u[0][0],u[0][1])}};function WN(n,t){return YN(n,e=>{switch(e.kind){case Ve.Unary:return t2(t,n,e);case Ve.ServerStreaming:return e2(t,n,e);case Ve.ClientStreaming:return n2(t,n,e);case Ve.BiDiStreaming:return r2(t,n,e);default:return null}})}function t2(n,t,e){return async function(i,a){var u,c;const d=await n.unary(t,e,a==null?void 0:a.signal,a==null?void 0:a.timeoutMs,a==null?void 0:a.headers,i,a==null?void 0:a.contextValues);return(u=a==null?void 0:a.onHeader)===null||u===void 0||u.call(a,d.header),(c=a==null?void 0:a.onTrailer)===null||c===void 0||c.call(a,d.trailer),d.message}}function e2(n,t,e){return function(i,a){return u1(n.stream(t,e,a==null?void 0:a.signal,a==null?void 0:a.timeoutMs,a==null?void 0:a.headers,FN([i]),a==null?void 0:a.contextValues),a)}}function n2(n,t,e){return async function(i,a){var u,c,d,h,g,y;const w=await n.stream(t,e,a==null?void 0:a.signal,a==null?void 0:a.timeoutMs,a==null?void 0:a.headers,i,a==null?void 0:a.contextValues);(g=a==null?void 0:a.onHeader)===null||g===void 0||g.call(a,w.header);let v,S=0;try{for(var x=!0,E=l1(w.message),I;I=await E.next(),u=I.done,!u;x=!0)h=I.value,x=!1,v=h,S++}catch(k){c={error:k}}finally{try{!x&&!u&&(d=E.return)&&await d.call(E)}finally{if(c)throw c.error}}if(!v)throw new Gt("protocol error: missing response message",_t.Unimplemented);if(S>1)throw new Gt("protocol error: received extra messages for client streaming method",_t.Unimplemented);return(y=a==null?void 0:a.onTrailer)===null||y===void 0||y.call(a,w.trailer),v}}function r2(n,t,e){return function(i,a){return u1(n.stream(t,e,a==null?void 0:a.signal,a==null?void 0:a.timeoutMs,a==null?void 0:a.headers,i,a==null?void 0:a.contextValues),a)}}function u1(n,t){const e=function(){return QN(this,arguments,function*(){var i,a;const u=yield qo(n);(i=t==null?void 0:t.onHeader)===null||i===void 0||i.call(t,u.header),yield qo(yield*ZN(l1(u.message))),(a=t==null?void 0:t.onTrailer)===null||a===void 0||a.call(t,u.trailer)})}()[Symbol.asyncIterator]();return{[Symbol.asyncIterator]:()=>({next:()=>e.next()})}}function i2(...n){const t=new AbortController,e=n.filter(a=>a!==void 0).concat(t.signal);for(const a of e){if(a.aborted){i.apply(a);break}a.addEventListener("abort",i)}function i(){t.signal.aborted||t.abort(c1(this));for(const a of e)a.removeEventListener("abort",i)}return t}function s2(n){const t=new AbortController,e=()=>{t.abort(new Gt("the operation timed out",_t.DeadlineExceeded))};let i;return n!==void 0&&(n<=0?e():i=setTimeout(e,n)),{signal:t.signal,cleanup:()=>clearTimeout(i)}}function c1(n){if(!n.aborted)return;if(n.reason!==void 0)return n.reason;const t=new Error("This operation was aborted");return t.name="AbortError",t}function dS(){return{get(n){return n.id in this?this[n.id]:n.defaultValue},set(n,t){return this[n.id]=t,this},delete(n){return delete this[n.id],this}}}const hm=128;function hS(n){const t=new Headers,e=new TextDecoder().decode(n).split(`\r
`);for(const i of e){if(i==="")continue;const a=i.indexOf(":");if(a>0){const u=i.substring(0,a).trim(),c=i.substring(a+1).trim();t.append(u,c)}}return t}const a2="Content-Type",o2="Grpc-Timeout",Po="Grpc-Status",f1="Grpc-Message",l2="Grpc-Status-Details-Bin",u2="X-User-Agent",c2="X-Grpc-Web",f2="application/grpc-web+proto",d2="application/grpc-web+json";class Fi extends yt{constructor(t){super(),this.code=0,this.message="",this.details=[],T.util.initPartial(t,this)}static fromBinary(t,e){return new Fi().fromBinary(t,e)}static fromJson(t,e){return new Fi().fromJson(t,e)}static fromJsonString(t,e){return new Fi().fromJsonString(t,e)}static equals(t,e){return T.util.equals(Fi,t,e)}}Fi.runtime=T;Fi.typeName="google.rpc.Status";Fi.fields=T.util.newFieldList(()=>[{no:1,name:"code",kind:"scalar",T:5},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"details",kind:"message",T:fr,repeated:!0}]);const h2="0";function d1(n){var t;const e=n.get(l2);if(e!=null){const a=jN(e,Fi);if(a.code==0)return;const u=new Gt(a.message,a.code,n);return u.details=a.details.map(c=>({type:c.typeUrl.substring(c.typeUrl.lastIndexOf("/")+1),value:c.value})),u}const i=n.get(Po);if(i!=null){if(i===h2)return;const a=parseInt(i,10);return a in _t?new Gt(decodeURIComponent((t=n.get(f1))!==null&&t!==void 0?t:""),a,n):new Gt(`invalid grpc-status: ${i}`,_t.Internal,n)}}function gS(n,t,e){const i=typeof t=="string"?t:t.typeName,a=typeof e=="string"?e:e.name;return n.toString().replace(/\/?$/,`/${i}/${a}`)}function h1(n,t){return t instanceof n?t:new n(t)}function g2(n,t){function e(i){return i.done===!0?i:{done:i.done,value:h1(n,i.value)}}return{[Symbol.asyncIterator](){const i=t[Symbol.asyncIterator](),a={next:()=>i.next().then(e)};return i.throw!==void 0&&(a.throw=u=>i.throw(u).then(e)),i.return!==void 0&&(a.return=u=>i.return(u).then(e)),a}}}function g1(n,t){var e;return(e=t==null?void 0:t.concat().reverse().reduce((i,a)=>a(i),n))!==null&&e!==void 0?e:n}function m2(n){var t;const e=Object.assign({},n);return(t=e.ignoreUnknownFields)!==null&&t!==void 0||(e.ignoreUnknownFields=!0),e}function mS(n,t,e,i){const a=t?yS(n.I,i):pS(n.I,e);return{parse:(t?yS(n.O,i):pS(n.O,e)).parse,serialize:a.serialize}}function yS(n,t){return{parse(e){try{return n.fromBinary(e,t)}catch(i){const a=i instanceof Error?i.message:String(i);throw new Gt(`parse binary: ${a}`,_t.Internal)}},serialize(e){try{return e.toBinary(t)}catch(i){const a=i instanceof Error?i.message:String(i);throw new Gt(`serialize binary: ${a}`,_t.Internal)}}}}function pS(n,t){var e,i;const a=(e=t==null?void 0:t.textEncoder)!==null&&e!==void 0?e:new TextEncoder,u=(i=t==null?void 0:t.textDecoder)!==null&&i!==void 0?i:new TextDecoder,c=m2(t);return{parse(d){try{const h=u.decode(d);return n.fromJsonString(h,c)}catch(h){throw Gt.from(h,_t.InvalidArgument)}},serialize(d){try{const h=d.toJsonString(c);return a.encode(h)}catch(h){throw Gt.from(h,_t.Internal)}}}}function y2(n){const t=g1(n.next,n.interceptors),[e,i,a]=m1(n),u=Object.assign(Object.assign({},n.req),{message:h1(n.req.method.I,n.req.message),signal:e});return t(u).then(c=>(a(),c),i)}function p2(n){const t=g1(n.next,n.interceptors),[e,i,a]=m1(n),u=Object.assign(Object.assign({},n.req),{message:g2(n.req.method.I,n.req.message),signal:e});let c=!1;return e.addEventListener("abort",function(){var d,h;const g=n.req.message[Symbol.asyncIterator]();c||(d=g.throw)===null||d===void 0||d.call(g,this.reason).catch(()=>{}),(h=g.return)===null||h===void 0||h.call(g).catch(()=>{})}),t(u).then(d=>Object.assign(Object.assign({},d),{message:{[Symbol.asyncIterator](){const h=d.message[Symbol.asyncIterator]();return{next(){return h.next().then(g=>(g.done==!0&&(c=!0,a()),g),i)}}}}}),i)}function m1(n){const{signal:t,cleanup:e}=s2(n.timeoutMs),i=i2(n.signal,t);return[i.signal,function(u){const c=Gt.from(t.aborted?c1(t):u);return i.abort(c),e(),Promise.reject(c)},function(){e(),i.abort()}]}function v2(){try{new Headers}catch{throw new Error("connect-web requires the fetch API. Are you running on an old version of Node.js? Node.js is not supported in Connect for Web - please stay tuned for Connect for Node.")}}function vS(n,t){const e=d1(n);if(e)throw t.forEach((i,a)=>{e.metadata.append(a,i)}),e;if(!t.has(Po)&&!n.has(Po))throw new Gt("protocol error: missing status",_t.Internal)}function wS(n,t,e,i){const a=new Headers(e??{});return a.set(a2,n?f2:d2),a.set(c2,"1"),a.set(u2,"connect-es/1.6.1"),t!==void 0&&a.set(o2,`${t}m`),a}function w2(n){switch(n){case 400:return _t.Internal;case 401:return _t.Unauthenticated;case 403:return _t.PermissionDenied;case 404:return _t.Unimplemented;case 429:return _t.Unavailable;case 502:return _t.Unavailable;case 503:return _t.Unavailable;case 504:return _t.Unavailable;default:return _t.Unknown}}function SS(n,t){var e;if(n>=200&&n<300)return{foundStatus:t.has(Po),headerError:d1(t)};throw new Gt(decodeURIComponent((e=t.get(f1))!==null&&e!==void 0?e:`HTTP ${n}`),w2(n),t)}var Aa=function(n){return this instanceof Aa?(this.v=n,this):new Aa(n)},S2=function(n,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=e.apply(n,t||[]),a,u=[];return a={},d("next"),d("throw"),d("return",c),a[Symbol.asyncIterator]=function(){return this},a;function c(S){return function(x){return Promise.resolve(x).then(S,w)}}function d(S,x){i[S]&&(a[S]=function(E){return new Promise(function(I,k){u.push([S,E,I,k])>1||h(S,E)})},x&&(a[S]=x(a[S])))}function h(S,x){try{g(i[S](x))}catch(E){v(u[0][3],E)}}function g(S){S.value instanceof Aa?Promise.resolve(S.value.v).then(y,w):v(u[0][2],S)}function y(S){h("next",S)}function w(S){h("throw",S)}function v(S,x){S(x),u.shift(),u.length&&h(u[0][0],u[0][1])}};function b2(n){var t;v2();const e=(t=n.useBinaryFormat)!==null&&t!==void 0?t:!0;return{async unary(i,a,u,c,d,h,g){var y;const{serialize:w,parse:v}=mS(a,e,n.jsonOptions,n.binaryOptions);return c=c===void 0?n.defaultTimeoutMs:c<=0?void 0:c,await y2({interceptors:n.interceptors,signal:u,timeoutMs:c,req:{stream:!1,service:i,method:a,url:gS(n.baseUrl,i,a),init:{method:"POST",credentials:(y=n.credentials)!==null&&y!==void 0?y:"same-origin",redirect:"error",mode:"cors"},header:wS(e,c,d),contextValues:g??dS(),message:h},next:async S=>{var x;const I=await((x=n.fetch)!==null&&x!==void 0?x:globalThis.fetch)(S.url,Object.assign(Object.assign({},S.init),{headers:S.header,signal:S.signal,body:fS(0,w(S.message))})),{headerError:k}=SS(I.status,I.headers);if(!I.body)throw k!==void 0?k:"missing response body";const z=cS(I.body).getReader();let N,O;for(;;){const _=await z.read();if(_.done)break;const{flags:J,data:U}=_.value;if((J&uS)===uS)throw new Gt("protocol error: received unsupported compressed output",_t.Internal);if(J===hm){if(N!==void 0)throw"extra trailer";N=hS(U);continue}if(O!==void 0)throw new Gt("extra message",_t.Unimplemented);O=v(U)}if(N===void 0)throw k!==void 0?k:new Gt("missing trailer",I.headers.has(Po)?_t.Unimplemented:_t.Unknown);if(vS(N,I.headers),O===void 0)throw new Gt("missing message",N.has(Po)?_t.Unimplemented:_t.Unknown);return{stream:!1,service:i,method:a,header:I.headers,message:O,trailer:N}}})},async stream(i,a,u,c,d,h,g){var y;const{serialize:w,parse:v}=mS(a,e,n.jsonOptions,n.binaryOptions);function S(E,I,k,z,N){return S2(this,arguments,function*(){const _=cS(E).getReader();if(I){if(!(yield Aa(_.read())).done)throw"extra data for trailers-only";return yield Aa(void 0)}let J=!1;for(;;){const U=yield Aa(_.read());if(U.done)break;const{flags:W,data:F}=U.value;if((W&hm)===hm){if(J)throw"extra trailer";J=!0;const nt=hS(F);vS(nt,z),nt.forEach((ft,ot)=>k.set(ot,ft));continue}if(J)throw"extra message";yield yield Aa(v(F))}if("throwIfAborted"in N&&N.throwIfAborted(),!J)throw"missing trailer"})}async function x(E){if(a.kind!=Ve.ServerStreaming)throw"The fetch API does not support streaming request bodies";const I=await E[Symbol.asyncIterator]().next();if(I.done==!0)throw"missing request message";return fS(0,w(I.value))}return c=c===void 0?n.defaultTimeoutMs:c<=0?void 0:c,p2({interceptors:n.interceptors,signal:u,timeoutMs:c,req:{stream:!0,service:i,method:a,url:gS(n.baseUrl,i,a),init:{method:"POST",credentials:(y=n.credentials)!==null&&y!==void 0?y:"same-origin",redirect:"error",mode:"cors"},header:wS(e,c,d),contextValues:g??dS(),message:h},next:async E=>{var I;const z=await((I=n.fetch)!==null&&I!==void 0?I:globalThis.fetch)(E.url,Object.assign(Object.assign({},E.init),{headers:E.header,signal:E.signal,body:await x(E.message)})),{foundStatus:N,headerError:O}=SS(z.status,z.headers);if(O!=null)throw O;if(!z.body)throw"missing response body";const _=new Headers;return Object.assign(Object.assign({},E),{header:z.headers,trailer:_,message:S(z.body,N,_,z.headers,E.signal)})}})}}}var It=(n=>(n[n.NULL=0]="NULL",n[n.BOOLEAN=1]="BOOLEAN",n[n.INTEGER=2]="INTEGER",n[n.LONG=3]="LONG",n[n.DOUBLE=4]="DOUBLE",n[n.STRING=5]="STRING",n[n.BYTES=6]="BYTES",n[n.DATE=7]="DATE",n[n.JSON_OBJECT=8]="JSON_OBJECT",n[n.JSON_ARRAY=9]="JSON_ARRAY",n[n.TEXT=10]="TEXT",n[n.INTEGER_CNT=11]="INTEGER_CNT",n[n.LONG_CNT=12]="LONG_CNT",n[n.TREE=13]="TREE",n))(It||{});T.util.setEnumType(It,"yorkie.v1.ValueType",[{no:0,name:"VALUE_TYPE_NULL"},{no:1,name:"VALUE_TYPE_BOOLEAN"},{no:2,name:"VALUE_TYPE_INTEGER"},{no:3,name:"VALUE_TYPE_LONG"},{no:4,name:"VALUE_TYPE_DOUBLE"},{no:5,name:"VALUE_TYPE_STRING"},{no:6,name:"VALUE_TYPE_BYTES"},{no:7,name:"VALUE_TYPE_DATE"},{no:8,name:"VALUE_TYPE_JSON_OBJECT"},{no:9,name:"VALUE_TYPE_JSON_ARRAY"},{no:10,name:"VALUE_TYPE_TEXT"},{no:11,name:"VALUE_TYPE_INTEGER_CNT"},{no:12,name:"VALUE_TYPE_LONG_CNT"},{no:13,name:"VALUE_TYPE_TREE"}]);var Da=(n=>(n[n.DOCUMENT_CHANGED=0]="DOCUMENT_CHANGED",n[n.DOCUMENT_WATCHED=1]="DOCUMENT_WATCHED",n[n.DOCUMENT_UNWATCHED=2]="DOCUMENT_UNWATCHED",n[n.DOCUMENT_BROADCAST=3]="DOCUMENT_BROADCAST",n))(Da||{});T.util.setEnumType(Da,"yorkie.v1.DocEventType",[{no:0,name:"DOC_EVENT_TYPE_DOCUMENT_CHANGED"},{no:1,name:"DOC_EVENT_TYPE_DOCUMENT_WATCHED"},{no:2,name:"DOC_EVENT_TYPE_DOCUMENT_UNWATCHED"},{no:3,name:"DOC_EVENT_TYPE_DOCUMENT_BROADCAST"}]);const Gr=class Gr extends yt{constructor(e){super();p(this,"root");p(this,"presences",{});T.util.initPartial(e,this)}static fromBinary(e,i){return new Gr().fromBinary(e,i)}static fromJson(e,i){return new Gr().fromJson(e,i)}static fromJsonString(e,i){return new Gr().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Gr,e,i)}};p(Gr,"runtime",T),p(Gr,"typeName","yorkie.v1.Snapshot"),p(Gr,"fields",T.util.newFieldList(()=>[{no:1,name:"root",kind:"message",T:nn},{no:2,name:"presences",kind:"map",K:9,V:{kind:"message",T:Ny}}]));let Rm=Gr;var Nn;let ss=(Nn=class extends yt{constructor(e){super();p(this,"documentKey","");p(this,"checkpoint");p(this,"snapshot",new Uint8Array(0));p(this,"changes",[]);p(this,"minSyncedTicket");p(this,"isRemoved",!1);p(this,"versionVector");T.util.initPartial(e,this)}static fromBinary(e,i){return new Nn().fromBinary(e,i)}static fromJson(e,i){return new Nn().fromJson(e,i)}static fromJsonString(e,i){return new Nn().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Nn,e,i)}},p(Nn,"runtime",T),p(Nn,"typeName","yorkie.v1.ChangePack"),p(Nn,"fields",T.util.newFieldList(()=>[{no:1,name:"document_key",kind:"scalar",T:9},{no:2,name:"checkpoint",kind:"message",T:v1},{no:3,name:"snapshot",kind:"scalar",T:12},{no:4,name:"changes",kind:"message",T:y1,repeated:!0},{no:5,name:"min_synced_ticket",kind:"message",T:wt},{no:6,name:"is_removed",kind:"scalar",T:8},{no:7,name:"version_vector",kind:"message",T:Cd}])),Nn);var Dn;let y1=(Dn=class extends yt{constructor(e){super();p(this,"id");p(this,"message","");p(this,"operations",[]);p(this,"presenceChange");T.util.initPartial(e,this)}static fromBinary(e,i){return new Dn().fromBinary(e,i)}static fromJson(e,i){return new Dn().fromJson(e,i)}static fromJsonString(e,i){return new Dn().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Dn,e,i)}},p(Dn,"runtime",T),p(Dn,"typeName","yorkie.v1.Change"),p(Dn,"fields",T.util.newFieldList(()=>[{no:1,name:"id",kind:"message",T:Dd},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"operations",kind:"message",T:Ey,repeated:!0},{no:4,name:"presence_change",kind:"message",T:Au}])),Dn);var Cn;let Dd=(Cn=class extends yt{constructor(e){super();p(this,"clientSeq",0);p(this,"serverSeq",re.zero);p(this,"lamport",re.zero);p(this,"actorId",new Uint8Array(0));p(this,"versionVector");T.util.initPartial(e,this)}static fromBinary(e,i){return new Cn().fromBinary(e,i)}static fromJson(e,i){return new Cn().fromJson(e,i)}static fromJsonString(e,i){return new Cn().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Cn,e,i)}},p(Cn,"runtime",T),p(Cn,"typeName","yorkie.v1.ChangeID"),p(Cn,"fields",T.util.newFieldList(()=>[{no:1,name:"client_seq",kind:"scalar",T:13},{no:2,name:"server_seq",kind:"scalar",T:3},{no:3,name:"lamport",kind:"scalar",T:3},{no:4,name:"actor_id",kind:"scalar",T:12},{no:5,name:"version_vector",kind:"message",T:Cd}])),Cn);var kn;let Cd=(kn=class extends yt{constructor(e){super();p(this,"vector",{});T.util.initPartial(e,this)}static fromBinary(e,i){return new kn().fromBinary(e,i)}static fromJson(e,i){return new kn().fromJson(e,i)}static fromJsonString(e,i){return new kn().fromJsonString(e,i)}static equals(e,i){return T.util.equals(kn,e,i)}},p(kn,"runtime",T),p(kn,"typeName","yorkie.v1.VersionVector"),p(kn,"fields",T.util.newFieldList(()=>[{no:1,name:"vector",kind:"map",K:9,V:{kind:"scalar",T:3}}])),kn);var On;let Ey=(On=class extends yt{constructor(e){super();p(this,"body",{case:void 0});T.util.initPartial(e,this)}static fromBinary(e,i){return new On().fromBinary(e,i)}static fromJson(e,i){return new On().fromJson(e,i)}static fromJsonString(e,i){return new On().fromJsonString(e,i)}static equals(e,i){return T.util.equals(On,e,i)}},p(On,"runtime",T),p(On,"typeName","yorkie.v1.Operation"),p(On,"fields",T.util.newFieldList(()=>[{no:1,name:"set",kind:"message",T:jf,oneof:"body"},{no:2,name:"add",kind:"message",T:Yf,oneof:"body"},{no:3,name:"move",kind:"message",T:Gf,oneof:"body"},{no:4,name:"remove",kind:"message",T:Xf,oneof:"body"},{no:5,name:"edit",kind:"message",T:Kf,oneof:"body"},{no:6,name:"select",kind:"message",T:Bm,oneof:"body"},{no:7,name:"style",kind:"message",T:Ff,oneof:"body"},{no:8,name:"increase",kind:"message",T:Zf,oneof:"body"},{no:9,name:"tree_edit",kind:"message",T:Qf,oneof:"body"},{no:10,name:"tree_style",kind:"message",T:Wf,oneof:"body"},{no:11,name:"array_set",kind:"message",T:zm,oneof:"body"}])),On);const Xr=class Xr extends yt{constructor(e){super();p(this,"parentCreatedAt");p(this,"key","");p(this,"value");p(this,"executedAt");T.util.initPartial(e,this)}static fromBinary(e,i){return new Xr().fromBinary(e,i)}static fromJson(e,i){return new Xr().fromJson(e,i)}static fromJsonString(e,i){return new Xr().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Xr,e,i)}};p(Xr,"runtime",T),p(Xr,"typeName","yorkie.v1.Operation.Set"),p(Xr,"fields",T.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:wt},{no:2,name:"key",kind:"scalar",T:9},{no:3,name:"value",kind:"message",T:En},{no:4,name:"executed_at",kind:"message",T:wt}]));let jf=Xr;const Kr=class Kr extends yt{constructor(e){super();p(this,"parentCreatedAt");p(this,"prevCreatedAt");p(this,"value");p(this,"executedAt");T.util.initPartial(e,this)}static fromBinary(e,i){return new Kr().fromBinary(e,i)}static fromJson(e,i){return new Kr().fromJson(e,i)}static fromJsonString(e,i){return new Kr().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Kr,e,i)}};p(Kr,"runtime",T),p(Kr,"typeName","yorkie.v1.Operation.Add"),p(Kr,"fields",T.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:wt},{no:2,name:"prev_created_at",kind:"message",T:wt},{no:3,name:"value",kind:"message",T:En},{no:4,name:"executed_at",kind:"message",T:wt}]));let Yf=Kr;const Fr=class Fr extends yt{constructor(e){super();p(this,"parentCreatedAt");p(this,"prevCreatedAt");p(this,"createdAt");p(this,"executedAt");T.util.initPartial(e,this)}static fromBinary(e,i){return new Fr().fromBinary(e,i)}static fromJson(e,i){return new Fr().fromJson(e,i)}static fromJsonString(e,i){return new Fr().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Fr,e,i)}};p(Fr,"runtime",T),p(Fr,"typeName","yorkie.v1.Operation.Move"),p(Fr,"fields",T.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:wt},{no:2,name:"prev_created_at",kind:"message",T:wt},{no:3,name:"created_at",kind:"message",T:wt},{no:4,name:"executed_at",kind:"message",T:wt}]));let Gf=Fr;const Zr=class Zr extends yt{constructor(e){super();p(this,"parentCreatedAt");p(this,"createdAt");p(this,"executedAt");T.util.initPartial(e,this)}static fromBinary(e,i){return new Zr().fromBinary(e,i)}static fromJson(e,i){return new Zr().fromJson(e,i)}static fromJsonString(e,i){return new Zr().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Zr,e,i)}};p(Zr,"runtime",T),p(Zr,"typeName","yorkie.v1.Operation.Remove"),p(Zr,"fields",T.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:wt},{no:2,name:"created_at",kind:"message",T:wt},{no:3,name:"executed_at",kind:"message",T:wt}]));let Xf=Zr;const Qr=class Qr extends yt{constructor(e){super();p(this,"parentCreatedAt");p(this,"from");p(this,"to");p(this,"createdAtMapByActor",{});p(this,"content","");p(this,"executedAt");p(this,"attributes",{});T.util.initPartial(e,this)}static fromBinary(e,i){return new Qr().fromBinary(e,i)}static fromJson(e,i){return new Qr().fromJson(e,i)}static fromJsonString(e,i){return new Qr().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Qr,e,i)}};p(Qr,"runtime",T),p(Qr,"typeName","yorkie.v1.Operation.Edit"),p(Qr,"fields",T.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:wt},{no:2,name:"from",kind:"message",T:ns},{no:3,name:"to",kind:"message",T:ns},{no:4,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:wt}},{no:5,name:"content",kind:"scalar",T:9},{no:6,name:"executed_at",kind:"message",T:wt},{no:7,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}}]));let Kf=Qr;const Wr=class Wr extends yt{constructor(e){super();p(this,"parentCreatedAt");p(this,"from");p(this,"to");p(this,"executedAt");T.util.initPartial(e,this)}static fromBinary(e,i){return new Wr().fromBinary(e,i)}static fromJson(e,i){return new Wr().fromJson(e,i)}static fromJsonString(e,i){return new Wr().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Wr,e,i)}};p(Wr,"runtime",T),p(Wr,"typeName","yorkie.v1.Operation.Select"),p(Wr,"fields",T.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:wt},{no:2,name:"from",kind:"message",T:ns},{no:3,name:"to",kind:"message",T:ns},{no:4,name:"executed_at",kind:"message",T:wt}]));let Bm=Wr;const ti=class ti extends yt{constructor(e){super();p(this,"parentCreatedAt");p(this,"from");p(this,"to");p(this,"attributes",{});p(this,"executedAt");p(this,"createdAtMapByActor",{});T.util.initPartial(e,this)}static fromBinary(e,i){return new ti().fromBinary(e,i)}static fromJson(e,i){return new ti().fromJson(e,i)}static fromJsonString(e,i){return new ti().fromJsonString(e,i)}static equals(e,i){return T.util.equals(ti,e,i)}};p(ti,"runtime",T),p(ti,"typeName","yorkie.v1.Operation.Style"),p(ti,"fields",T.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:wt},{no:2,name:"from",kind:"message",T:ns},{no:3,name:"to",kind:"message",T:ns},{no:4,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:5,name:"executed_at",kind:"message",T:wt},{no:6,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:wt}}]));let Ff=ti;const ei=class ei extends yt{constructor(e){super();p(this,"parentCreatedAt");p(this,"value");p(this,"executedAt");T.util.initPartial(e,this)}static fromBinary(e,i){return new ei().fromBinary(e,i)}static fromJson(e,i){return new ei().fromJson(e,i)}static fromJsonString(e,i){return new ei().fromJsonString(e,i)}static equals(e,i){return T.util.equals(ei,e,i)}};p(ei,"runtime",T),p(ei,"typeName","yorkie.v1.Operation.Increase"),p(ei,"fields",T.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:wt},{no:2,name:"value",kind:"message",T:En},{no:3,name:"executed_at",kind:"message",T:wt}]));let Zf=ei;const ni=class ni extends yt{constructor(e){super();p(this,"parentCreatedAt");p(this,"from");p(this,"to");p(this,"createdAtMapByActor",{});p(this,"contents",[]);p(this,"splitLevel",0);p(this,"executedAt");T.util.initPartial(e,this)}static fromBinary(e,i){return new ni().fromBinary(e,i)}static fromJson(e,i){return new ni().fromJson(e,i)}static fromJsonString(e,i){return new ni().fromJsonString(e,i)}static equals(e,i){return T.util.equals(ni,e,i)}};p(ni,"runtime",T),p(ni,"typeName","yorkie.v1.Operation.TreeEdit"),p(ni,"fields",T.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:wt},{no:2,name:"from",kind:"message",T:Oa},{no:3,name:"to",kind:"message",T:Oa},{no:4,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:wt}},{no:5,name:"contents",kind:"message",T:ld,repeated:!0},{no:7,name:"split_level",kind:"scalar",T:5},{no:6,name:"executed_at",kind:"message",T:wt}]));let Qf=ni;const ri=class ri extends yt{constructor(e){super();p(this,"parentCreatedAt");p(this,"from");p(this,"to");p(this,"attributes",{});p(this,"executedAt");p(this,"attributesToRemove",[]);p(this,"createdAtMapByActor",{});T.util.initPartial(e,this)}static fromBinary(e,i){return new ri().fromBinary(e,i)}static fromJson(e,i){return new ri().fromJson(e,i)}static fromJsonString(e,i){return new ri().fromJsonString(e,i)}static equals(e,i){return T.util.equals(ri,e,i)}};p(ri,"runtime",T),p(ri,"typeName","yorkie.v1.Operation.TreeStyle"),p(ri,"fields",T.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:wt},{no:2,name:"from",kind:"message",T:Oa},{no:3,name:"to",kind:"message",T:Oa},{no:4,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:5,name:"executed_at",kind:"message",T:wt},{no:6,name:"attributes_to_remove",kind:"scalar",T:9,repeated:!0},{no:7,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:wt}}]));let Wf=ri;const ii=class ii extends yt{constructor(e){super();p(this,"parentCreatedAt");p(this,"createdAt");p(this,"value");p(this,"executedAt");T.util.initPartial(e,this)}static fromBinary(e,i){return new ii().fromBinary(e,i)}static fromJson(e,i){return new ii().fromJson(e,i)}static fromJsonString(e,i){return new ii().fromJsonString(e,i)}static equals(e,i){return T.util.equals(ii,e,i)}};p(ii,"runtime",T),p(ii,"typeName","yorkie.v1.Operation.ArraySet"),p(ii,"fields",T.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:wt},{no:2,name:"created_at",kind:"message",T:wt},{no:3,name:"value",kind:"message",T:En},{no:4,name:"executed_at",kind:"message",T:wt}]));let zm=ii;const si=class si extends yt{constructor(e){super();p(this,"createdAt");p(this,"movedAt");p(this,"removedAt");p(this,"type",0);p(this,"value",new Uint8Array(0));T.util.initPartial(e,this)}static fromBinary(e,i){return new si().fromBinary(e,i)}static fromJson(e,i){return new si().fromJson(e,i)}static fromJsonString(e,i){return new si().fromJsonString(e,i)}static equals(e,i){return T.util.equals(si,e,i)}};p(si,"runtime",T),p(si,"typeName","yorkie.v1.JSONElementSimple"),p(si,"fields",T.util.newFieldList(()=>[{no:1,name:"created_at",kind:"message",T:wt},{no:2,name:"moved_at",kind:"message",T:wt},{no:3,name:"removed_at",kind:"message",T:wt},{no:4,name:"type",kind:"enum",T:T.getEnumType(It)},{no:5,name:"value",kind:"scalar",T:12}]));let En=si;const ai=class ai extends yt{constructor(e){super();p(this,"body",{case:void 0});T.util.initPartial(e,this)}static fromBinary(e,i){return new ai().fromBinary(e,i)}static fromJson(e,i){return new ai().fromJson(e,i)}static fromJsonString(e,i){return new ai().fromJsonString(e,i)}static equals(e,i){return T.util.equals(ai,e,i)}};p(ai,"runtime",T),p(ai,"typeName","yorkie.v1.JSONElement"),p(ai,"fields",T.util.newFieldList(()=>[{no:1,name:"json_object",kind:"message",T:td,oneof:"body"},{no:2,name:"json_array",kind:"message",T:ed,oneof:"body"},{no:3,name:"primitive",kind:"message",T:nd,oneof:"body"},{no:5,name:"text",kind:"message",T:rd,oneof:"body"},{no:6,name:"counter",kind:"message",T:id,oneof:"body"},{no:7,name:"tree",kind:"message",T:sd,oneof:"body"}]));let nn=ai;const oi=class oi extends yt{constructor(e){super();p(this,"nodes",[]);p(this,"createdAt");p(this,"movedAt");p(this,"removedAt");T.util.initPartial(e,this)}static fromBinary(e,i){return new oi().fromBinary(e,i)}static fromJson(e,i){return new oi().fromJson(e,i)}static fromJsonString(e,i){return new oi().fromJsonString(e,i)}static equals(e,i){return T.util.equals(oi,e,i)}};p(oi,"runtime",T),p(oi,"typeName","yorkie.v1.JSONElement.JSONObject"),p(oi,"fields",T.util.newFieldList(()=>[{no:1,name:"nodes",kind:"message",T:p1,repeated:!0},{no:2,name:"created_at",kind:"message",T:wt},{no:3,name:"moved_at",kind:"message",T:wt},{no:4,name:"removed_at",kind:"message",T:wt}]));let td=oi;const li=class li extends yt{constructor(e){super();p(this,"nodes",[]);p(this,"createdAt");p(this,"movedAt");p(this,"removedAt");T.util.initPartial(e,this)}static fromBinary(e,i){return new li().fromBinary(e,i)}static fromJson(e,i){return new li().fromJson(e,i)}static fromJsonString(e,i){return new li().fromJsonString(e,i)}static equals(e,i){return T.util.equals(li,e,i)}};p(li,"runtime",T),p(li,"typeName","yorkie.v1.JSONElement.JSONArray"),p(li,"fields",T.util.newFieldList(()=>[{no:1,name:"nodes",kind:"message",T:ad,repeated:!0},{no:2,name:"created_at",kind:"message",T:wt},{no:3,name:"moved_at",kind:"message",T:wt},{no:4,name:"removed_at",kind:"message",T:wt}]));let ed=li;const ui=class ui extends yt{constructor(e){super();p(this,"type",0);p(this,"value",new Uint8Array(0));p(this,"createdAt");p(this,"movedAt");p(this,"removedAt");T.util.initPartial(e,this)}static fromBinary(e,i){return new ui().fromBinary(e,i)}static fromJson(e,i){return new ui().fromJson(e,i)}static fromJsonString(e,i){return new ui().fromJsonString(e,i)}static equals(e,i){return T.util.equals(ui,e,i)}};p(ui,"runtime",T),p(ui,"typeName","yorkie.v1.JSONElement.Primitive"),p(ui,"fields",T.util.newFieldList(()=>[{no:1,name:"type",kind:"enum",T:T.getEnumType(It)},{no:2,name:"value",kind:"scalar",T:12},{no:3,name:"created_at",kind:"message",T:wt},{no:4,name:"moved_at",kind:"message",T:wt},{no:5,name:"removed_at",kind:"message",T:wt}]));let nd=ui;const ci=class ci extends yt{constructor(e){super();p(this,"nodes",[]);p(this,"createdAt");p(this,"movedAt");p(this,"removedAt");T.util.initPartial(e,this)}static fromBinary(e,i){return new ci().fromBinary(e,i)}static fromJson(e,i){return new ci().fromJson(e,i)}static fromJsonString(e,i){return new ci().fromJsonString(e,i)}static equals(e,i){return T.util.equals(ci,e,i)}};p(ci,"runtime",T),p(ci,"typeName","yorkie.v1.JSONElement.Text"),p(ci,"fields",T.util.newFieldList(()=>[{no:1,name:"nodes",kind:"message",T:od,repeated:!0},{no:2,name:"created_at",kind:"message",T:wt},{no:3,name:"moved_at",kind:"message",T:wt},{no:4,name:"removed_at",kind:"message",T:wt}]));let rd=ci;const fi=class fi extends yt{constructor(e){super();p(this,"type",0);p(this,"value",new Uint8Array(0));p(this,"createdAt");p(this,"movedAt");p(this,"removedAt");T.util.initPartial(e,this)}static fromBinary(e,i){return new fi().fromBinary(e,i)}static fromJson(e,i){return new fi().fromJson(e,i)}static fromJsonString(e,i){return new fi().fromJsonString(e,i)}static equals(e,i){return T.util.equals(fi,e,i)}};p(fi,"runtime",T),p(fi,"typeName","yorkie.v1.JSONElement.Counter"),p(fi,"fields",T.util.newFieldList(()=>[{no:1,name:"type",kind:"enum",T:T.getEnumType(It)},{no:2,name:"value",kind:"scalar",T:12},{no:3,name:"created_at",kind:"message",T:wt},{no:4,name:"moved_at",kind:"message",T:wt},{no:5,name:"removed_at",kind:"message",T:wt}]));let id=fi;const di=class di extends yt{constructor(e){super();p(this,"nodes",[]);p(this,"createdAt");p(this,"movedAt");p(this,"removedAt");T.util.initPartial(e,this)}static fromBinary(e,i){return new di().fromBinary(e,i)}static fromJson(e,i){return new di().fromJson(e,i)}static fromJsonString(e,i){return new di().fromJsonString(e,i)}static equals(e,i){return T.util.equals(di,e,i)}};p(di,"runtime",T),p(di,"typeName","yorkie.v1.JSONElement.Tree"),p(di,"fields",T.util.newFieldList(()=>[{no:1,name:"nodes",kind:"message",T:Tu,repeated:!0},{no:2,name:"created_at",kind:"message",T:wt},{no:3,name:"moved_at",kind:"message",T:wt},{no:4,name:"removed_at",kind:"message",T:wt}]));let sd=di;var In;let p1=(In=class extends yt{constructor(e){super();p(this,"key","");p(this,"element");T.util.initPartial(e,this)}static fromBinary(e,i){return new In().fromBinary(e,i)}static fromJson(e,i){return new In().fromJson(e,i)}static fromJsonString(e,i){return new In().fromJsonString(e,i)}static equals(e,i){return T.util.equals(In,e,i)}},p(In,"runtime",T),p(In,"typeName","yorkie.v1.RHTNode"),p(In,"fields",T.util.newFieldList(()=>[{no:1,name:"key",kind:"scalar",T:9},{no:2,name:"element",kind:"message",T:nn}])),In);const ur=class ur extends yt{constructor(e){super();p(this,"next");p(this,"element");T.util.initPartial(e,this)}static fromBinary(e,i){return new ur().fromBinary(e,i)}static fromJson(e,i){return new ur().fromJson(e,i)}static fromJsonString(e,i){return new ur().fromJsonString(e,i)}static equals(e,i){return T.util.equals(ur,e,i)}};p(ur,"runtime",T),p(ur,"typeName","yorkie.v1.RGANode"),p(ur,"fields",T.util.newFieldList(()=>[{no:1,name:"next",kind:"message",T:ur},{no:2,name:"element",kind:"message",T:nn}]));let ad=ur;const hi=class hi extends yt{constructor(e){super();p(this,"value","");p(this,"updatedAt");p(this,"isRemoved",!1);T.util.initPartial(e,this)}static fromBinary(e,i){return new hi().fromBinary(e,i)}static fromJson(e,i){return new hi().fromJson(e,i)}static fromJsonString(e,i){return new hi().fromJsonString(e,i)}static equals(e,i){return T.util.equals(hi,e,i)}};p(hi,"runtime",T),p(hi,"typeName","yorkie.v1.NodeAttr"),p(hi,"fields",T.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:9},{no:2,name:"updated_at",kind:"message",T:wt},{no:3,name:"is_removed",kind:"scalar",T:8}]));let Jo=hi;const gi=class gi extends yt{constructor(e){super();p(this,"id");p(this,"value","");p(this,"removedAt");p(this,"insPrevId");p(this,"attributes",{});T.util.initPartial(e,this)}static fromBinary(e,i){return new gi().fromBinary(e,i)}static fromJson(e,i){return new gi().fromJson(e,i)}static fromJsonString(e,i){return new gi().fromJsonString(e,i)}static equals(e,i){return T.util.equals(gi,e,i)}};p(gi,"runtime",T),p(gi,"typeName","yorkie.v1.TextNode"),p(gi,"fields",T.util.newFieldList(()=>[{no:1,name:"id",kind:"message",T:xu},{no:2,name:"value",kind:"scalar",T:9},{no:3,name:"removed_at",kind:"message",T:wt},{no:4,name:"ins_prev_id",kind:"message",T:xu},{no:5,name:"attributes",kind:"map",K:9,V:{kind:"message",T:Jo}}]));let od=gi;const mi=class mi extends yt{constructor(e){super();p(this,"createdAt");p(this,"offset",0);T.util.initPartial(e,this)}static fromBinary(e,i){return new mi().fromBinary(e,i)}static fromJson(e,i){return new mi().fromJson(e,i)}static fromJsonString(e,i){return new mi().fromJsonString(e,i)}static equals(e,i){return T.util.equals(mi,e,i)}};p(mi,"runtime",T),p(mi,"typeName","yorkie.v1.TextNodeID"),p(mi,"fields",T.util.newFieldList(()=>[{no:1,name:"created_at",kind:"message",T:wt},{no:2,name:"offset",kind:"scalar",T:5}]));let xu=mi;const yi=class yi extends yt{constructor(e){super();p(this,"id");p(this,"type","");p(this,"value","");p(this,"removedAt");p(this,"insPrevId");p(this,"insNextId");p(this,"depth",0);p(this,"attributes",{});T.util.initPartial(e,this)}static fromBinary(e,i){return new yi().fromBinary(e,i)}static fromJson(e,i){return new yi().fromJson(e,i)}static fromJsonString(e,i){return new yi().fromJsonString(e,i)}static equals(e,i){return T.util.equals(yi,e,i)}};p(yi,"runtime",T),p(yi,"typeName","yorkie.v1.TreeNode"),p(yi,"fields",T.util.newFieldList(()=>[{no:1,name:"id",kind:"message",T:Gs},{no:2,name:"type",kind:"scalar",T:9},{no:3,name:"value",kind:"scalar",T:9},{no:4,name:"removed_at",kind:"message",T:wt},{no:5,name:"ins_prev_id",kind:"message",T:Gs},{no:6,name:"ins_next_id",kind:"message",T:Gs},{no:7,name:"depth",kind:"scalar",T:5},{no:8,name:"attributes",kind:"map",K:9,V:{kind:"message",T:Jo}}]));let Tu=yi;const pi=class pi extends yt{constructor(e){super();p(this,"content",[]);T.util.initPartial(e,this)}static fromBinary(e,i){return new pi().fromBinary(e,i)}static fromJson(e,i){return new pi().fromJson(e,i)}static fromJsonString(e,i){return new pi().fromJsonString(e,i)}static equals(e,i){return T.util.equals(pi,e,i)}};p(pi,"runtime",T),p(pi,"typeName","yorkie.v1.TreeNodes"),p(pi,"fields",T.util.newFieldList(()=>[{no:1,name:"content",kind:"message",T:Tu,repeated:!0}]));let ld=pi;const vi=class vi extends yt{constructor(e){super();p(this,"createdAt");p(this,"offset",0);T.util.initPartial(e,this)}static fromBinary(e,i){return new vi().fromBinary(e,i)}static fromJson(e,i){return new vi().fromJson(e,i)}static fromJsonString(e,i){return new vi().fromJsonString(e,i)}static equals(e,i){return T.util.equals(vi,e,i)}};p(vi,"runtime",T),p(vi,"typeName","yorkie.v1.TreeNodeID"),p(vi,"fields",T.util.newFieldList(()=>[{no:1,name:"created_at",kind:"message",T:wt},{no:2,name:"offset",kind:"scalar",T:5}]));let Gs=vi;const wi=class wi extends yt{constructor(e){super();p(this,"parentId");p(this,"leftSiblingId");T.util.initPartial(e,this)}static fromBinary(e,i){return new wi().fromBinary(e,i)}static fromJson(e,i){return new wi().fromJson(e,i)}static fromJsonString(e,i){return new wi().fromJsonString(e,i)}static equals(e,i){return T.util.equals(wi,e,i)}};p(wi,"runtime",T),p(wi,"typeName","yorkie.v1.TreePos"),p(wi,"fields",T.util.newFieldList(()=>[{no:1,name:"parent_id",kind:"message",T:Gs},{no:2,name:"left_sibling_id",kind:"message",T:Gs}]));let Oa=wi;const Si=class Si extends yt{constructor(e){super();p(this,"id","");p(this,"username","");p(this,"createdAt");T.util.initPartial(e,this)}static fromBinary(e,i){return new Si().fromBinary(e,i)}static fromJson(e,i){return new Si().fromJson(e,i)}static fromJsonString(e,i){return new Si().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Si,e,i)}};p(Si,"runtime",T),p(Si,"typeName","yorkie.v1.User"),p(Si,"fields",T.util.newFieldList(()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"username",kind:"scalar",T:9},{no:3,name:"created_at",kind:"message",T:Pe}]));let bS=Si;const bi=class bi extends yt{constructor(e){super();p(this,"id","");p(this,"name","");p(this,"publicKey","");p(this,"secretKey","");p(this,"authWebhookUrl","");p(this,"authWebhookMethods",[]);p(this,"eventWebhookUrl","");p(this,"eventWebhookEvents",[]);p(this,"clientDeactivateThreshold","");p(this,"maxSubscribersPerDocument",0);p(this,"maxAttachmentsPerDocument",0);p(this,"maxSizePerDocument",0);p(this,"allowedOrigins",[]);p(this,"createdAt");p(this,"updatedAt");T.util.initPartial(e,this)}static fromBinary(e,i){return new bi().fromBinary(e,i)}static fromJson(e,i){return new bi().fromJson(e,i)}static fromJsonString(e,i){return new bi().fromJsonString(e,i)}static equals(e,i){return T.util.equals(bi,e,i)}};p(bi,"runtime",T),p(bi,"typeName","yorkie.v1.Project"),p(bi,"fields",T.util.newFieldList(()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"public_key",kind:"scalar",T:9},{no:4,name:"secret_key",kind:"scalar",T:9},{no:5,name:"auth_webhook_url",kind:"scalar",T:9},{no:6,name:"auth_webhook_methods",kind:"scalar",T:9,repeated:!0},{no:7,name:"event_webhook_url",kind:"scalar",T:9},{no:8,name:"event_webhook_events",kind:"scalar",T:9,repeated:!0},{no:9,name:"client_deactivate_threshold",kind:"scalar",T:9},{no:10,name:"max_subscribers_per_document",kind:"scalar",T:5},{no:11,name:"max_attachments_per_document",kind:"scalar",T:5},{no:15,name:"max_size_per_document",kind:"scalar",T:5},{no:14,name:"allowed_origins",kind:"scalar",T:9,repeated:!0},{no:12,name:"created_at",kind:"message",T:Pe},{no:13,name:"updated_at",kind:"message",T:Pe}]));let xS=bi;const xi=class xi extends yt{constructor(e){super();p(this,"name");p(this,"authWebhookUrl");p(this,"authWebhookMethods");p(this,"eventWebhookUrl");p(this,"eventWebhookEvents");p(this,"clientDeactivateThreshold");p(this,"maxSubscribersPerDocument");p(this,"maxAttachmentsPerDocument");p(this,"maxSizePerDocument");p(this,"allowedOrigins");T.util.initPartial(e,this)}static fromBinary(e,i){return new xi().fromBinary(e,i)}static fromJson(e,i){return new xi().fromJson(e,i)}static fromJsonString(e,i){return new xi().fromJsonString(e,i)}static equals(e,i){return T.util.equals(xi,e,i)}};p(xi,"runtime",T),p(xi,"typeName","yorkie.v1.UpdatableProjectFields"),p(xi,"fields",T.util.newFieldList(()=>[{no:1,name:"name",kind:"message",T:Qe},{no:2,name:"auth_webhook_url",kind:"message",T:Qe},{no:3,name:"auth_webhook_methods",kind:"message",T:Lm},{no:4,name:"event_webhook_url",kind:"message",T:Qe},{no:5,name:"event_webhook_events",kind:"message",T:_m},{no:6,name:"client_deactivate_threshold",kind:"message",T:Qe},{no:7,name:"max_subscribers_per_document",kind:"message",T:hn},{no:8,name:"max_attachments_per_document",kind:"message",T:hn},{no:10,name:"max_size_per_document",kind:"message",T:hn},{no:9,name:"allowed_origins",kind:"message",T:Um}]));let TS=xi;const Ti=class Ti extends yt{constructor(e){super();p(this,"methods",[]);T.util.initPartial(e,this)}static fromBinary(e,i){return new Ti().fromBinary(e,i)}static fromJson(e,i){return new Ti().fromJson(e,i)}static fromJsonString(e,i){return new Ti().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Ti,e,i)}};p(Ti,"runtime",T),p(Ti,"typeName","yorkie.v1.UpdatableProjectFields.AuthWebhookMethods"),p(Ti,"fields",T.util.newFieldList(()=>[{no:1,name:"methods",kind:"scalar",T:9,repeated:!0}]));let Lm=Ti;const Ai=class Ai extends yt{constructor(e){super();p(this,"events",[]);T.util.initPartial(e,this)}static fromBinary(e,i){return new Ai().fromBinary(e,i)}static fromJson(e,i){return new Ai().fromJson(e,i)}static fromJsonString(e,i){return new Ai().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Ai,e,i)}};p(Ai,"runtime",T),p(Ai,"typeName","yorkie.v1.UpdatableProjectFields.EventWebhookEvents"),p(Ai,"fields",T.util.newFieldList(()=>[{no:1,name:"events",kind:"scalar",T:9,repeated:!0}]));let _m=Ai;const Ei=class Ei extends yt{constructor(e){super();p(this,"origins",[]);T.util.initPartial(e,this)}static fromBinary(e,i){return new Ei().fromBinary(e,i)}static fromJson(e,i){return new Ei().fromJson(e,i)}static fromJsonString(e,i){return new Ei().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Ei,e,i)}};p(Ei,"runtime",T),p(Ei,"typeName","yorkie.v1.UpdatableProjectFields.AllowedOrigins"),p(Ei,"fields",T.util.newFieldList(()=>[{no:1,name:"origins",kind:"scalar",T:9,repeated:!0}]));let Um=Ei;const Ni=class Ni extends yt{constructor(e){super();p(this,"id","");p(this,"key","");p(this,"snapshot","");p(this,"createdAt");p(this,"accessedAt");p(this,"updatedAt");T.util.initPartial(e,this)}static fromBinary(e,i){return new Ni().fromBinary(e,i)}static fromJson(e,i){return new Ni().fromJson(e,i)}static fromJsonString(e,i){return new Ni().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Ni,e,i)}};p(Ni,"runtime",T),p(Ni,"typeName","yorkie.v1.DocumentSummary"),p(Ni,"fields",T.util.newFieldList(()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"key",kind:"scalar",T:9},{no:3,name:"snapshot",kind:"scalar",T:9},{no:4,name:"created_at",kind:"message",T:Pe},{no:5,name:"accessed_at",kind:"message",T:Pe},{no:6,name:"updated_at",kind:"message",T:Pe}]));let AS=Ni;const Di=class Di extends yt{constructor(e){super();p(this,"type",0);p(this,"presence");T.util.initPartial(e,this)}static fromBinary(e,i){return new Di().fromBinary(e,i)}static fromJson(e,i){return new Di().fromJson(e,i)}static fromJsonString(e,i){return new Di().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Di,e,i)}};p(Di,"runtime",T),p(Di,"typeName","yorkie.v1.PresenceChange"),p(Di,"fields",T.util.newFieldList(()=>[{no:1,name:"type",kind:"enum",T:T.getEnumType(Ia)},{no:2,name:"presence",kind:"message",T:Ny}]));let Au=Di;var Ia=(n=>(n[n.UNSPECIFIED=0]="UNSPECIFIED",n[n.PUT=1]="PUT",n[n.DELETE=2]="DELETE",n[n.CLEAR=3]="CLEAR",n))(Ia||{});T.util.setEnumType(Ia,"yorkie.v1.PresenceChange.ChangeType",[{no:0,name:"CHANGE_TYPE_UNSPECIFIED"},{no:1,name:"CHANGE_TYPE_PUT"},{no:2,name:"CHANGE_TYPE_DELETE"},{no:3,name:"CHANGE_TYPE_CLEAR"}]);var Mn;let Ny=(Mn=class extends yt{constructor(e){super();p(this,"data",{});T.util.initPartial(e,this)}static fromBinary(e,i){return new Mn().fromBinary(e,i)}static fromJson(e,i){return new Mn().fromJson(e,i)}static fromJsonString(e,i){return new Mn().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Mn,e,i)}},p(Mn,"runtime",T),p(Mn,"typeName","yorkie.v1.Presence"),p(Mn,"fields",T.util.newFieldList(()=>[{no:1,name:"data",kind:"map",K:9,V:{kind:"scalar",T:9}}])),Mn);var Rn;let v1=(Rn=class extends yt{constructor(e){super();p(this,"serverSeq",re.zero);p(this,"clientSeq",0);T.util.initPartial(e,this)}static fromBinary(e,i){return new Rn().fromBinary(e,i)}static fromJson(e,i){return new Rn().fromJson(e,i)}static fromJsonString(e,i){return new Rn().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Rn,e,i)}},p(Rn,"runtime",T),p(Rn,"typeName","yorkie.v1.Checkpoint"),p(Rn,"fields",T.util.newFieldList(()=>[{no:1,name:"server_seq",kind:"scalar",T:3},{no:2,name:"client_seq",kind:"scalar",T:13}])),Rn);const Ci=class Ci extends yt{constructor(e){super();p(this,"createdAt");p(this,"offset",0);p(this,"relativeOffset",0);T.util.initPartial(e,this)}static fromBinary(e,i){return new Ci().fromBinary(e,i)}static fromJson(e,i){return new Ci().fromJson(e,i)}static fromJsonString(e,i){return new Ci().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Ci,e,i)}};p(Ci,"runtime",T),p(Ci,"typeName","yorkie.v1.TextNodePos"),p(Ci,"fields",T.util.newFieldList(()=>[{no:1,name:"created_at",kind:"message",T:wt},{no:2,name:"offset",kind:"scalar",T:5},{no:3,name:"relative_offset",kind:"scalar",T:5}]));let ns=Ci;var Bn;let wt=(Bn=class extends yt{constructor(e){super();p(this,"lamport",re.zero);p(this,"delimiter",0);p(this,"actorId",new Uint8Array(0));T.util.initPartial(e,this)}static fromBinary(e,i){return new Bn().fromBinary(e,i)}static fromJson(e,i){return new Bn().fromJson(e,i)}static fromJsonString(e,i){return new Bn().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Bn,e,i)}},p(Bn,"runtime",T),p(Bn,"typeName","yorkie.v1.TimeTicket"),p(Bn,"fields",T.util.newFieldList(()=>[{no:1,name:"lamport",kind:"scalar",T:3},{no:2,name:"delimiter",kind:"scalar",T:13},{no:3,name:"actor_id",kind:"scalar",T:12}])),Bn);const ki=class ki extends yt{constructor(e){super();p(this,"topic","");p(this,"payload",new Uint8Array(0));T.util.initPartial(e,this)}static fromBinary(e,i){return new ki().fromBinary(e,i)}static fromJson(e,i){return new ki().fromJson(e,i)}static fromJsonString(e,i){return new ki().fromJsonString(e,i)}static equals(e,i){return T.util.equals(ki,e,i)}};p(ki,"runtime",T),p(ki,"typeName","yorkie.v1.DocEventBody"),p(ki,"fields",T.util.newFieldList(()=>[{no:1,name:"topic",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:12}]));let qm=ki;const Oi=class Oi extends yt{constructor(e){super();p(this,"type",0);p(this,"publisher","");p(this,"body");T.util.initPartial(e,this)}static fromBinary(e,i){return new Oi().fromBinary(e,i)}static fromJson(e,i){return new Oi().fromJson(e,i)}static fromJsonString(e,i){return new Oi().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Oi,e,i)}};p(Oi,"runtime",T),p(Oi,"typeName","yorkie.v1.DocEvent"),p(Oi,"fields",T.util.newFieldList(()=>[{no:1,name:"type",kind:"enum",T:T.getEnumType(Da)},{no:2,name:"publisher",kind:"scalar",T:9},{no:3,name:"body",kind:"message",T:qm}]));let Pm=Oi;const Ii=class Ii extends yt{constructor(e){super();p(this,"clientKey","");p(this,"metadata",{});T.util.initPartial(e,this)}static fromBinary(e,i){return new Ii().fromBinary(e,i)}static fromJson(e,i){return new Ii().fromJson(e,i)}static fromJsonString(e,i){return new Ii().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Ii,e,i)}};p(Ii,"runtime",T),p(Ii,"typeName","yorkie.v1.ActivateClientRequest"),p(Ii,"fields",T.util.newFieldList(()=>[{no:1,name:"client_key",kind:"scalar",T:9},{no:2,name:"metadata",kind:"map",K:9,V:{kind:"scalar",T:9}}]));let Jm=Ii;const Mi=class Mi extends yt{constructor(e){super();p(this,"clientId","");T.util.initPartial(e,this)}static fromBinary(e,i){return new Mi().fromBinary(e,i)}static fromJson(e,i){return new Mi().fromJson(e,i)}static fromJsonString(e,i){return new Mi().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Mi,e,i)}};p(Mi,"runtime",T),p(Mi,"typeName","yorkie.v1.ActivateClientResponse"),p(Mi,"fields",T.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9}]));let Hm=Mi;const Ri=class Ri extends yt{constructor(e){super();p(this,"clientId","");T.util.initPartial(e,this)}static fromBinary(e,i){return new Ri().fromBinary(e,i)}static fromJson(e,i){return new Ri().fromJson(e,i)}static fromJsonString(e,i){return new Ri().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Ri,e,i)}};p(Ri,"runtime",T),p(Ri,"typeName","yorkie.v1.DeactivateClientRequest"),p(Ri,"fields",T.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9}]));let $m=Ri;const Bi=class Bi extends yt{constructor(t){super(),T.util.initPartial(t,this)}static fromBinary(t,e){return new Bi().fromBinary(t,e)}static fromJson(t,e){return new Bi().fromJson(t,e)}static fromJsonString(t,e){return new Bi().fromJsonString(t,e)}static equals(t,e){return T.util.equals(Bi,t,e)}};p(Bi,"runtime",T),p(Bi,"typeName","yorkie.v1.DeactivateClientResponse"),p(Bi,"fields",T.util.newFieldList(()=>[]));let Vm=Bi;const zi=class zi extends yt{constructor(e){super();p(this,"clientId","");p(this,"changePack");T.util.initPartial(e,this)}static fromBinary(e,i){return new zi().fromBinary(e,i)}static fromJson(e,i){return new zi().fromJson(e,i)}static fromJsonString(e,i){return new zi().fromJsonString(e,i)}static equals(e,i){return T.util.equals(zi,e,i)}};p(zi,"runtime",T),p(zi,"typeName","yorkie.v1.AttachDocumentRequest"),p(zi,"fields",T.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"change_pack",kind:"message",T:ss}]));let jm=zi;const Li=class Li extends yt{constructor(e){super();p(this,"documentId","");p(this,"maxSizePerDocument",0);p(this,"changePack");T.util.initPartial(e,this)}static fromBinary(e,i){return new Li().fromBinary(e,i)}static fromJson(e,i){return new Li().fromJson(e,i)}static fromJsonString(e,i){return new Li().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Li,e,i)}};p(Li,"runtime",T),p(Li,"typeName","yorkie.v1.AttachDocumentResponse"),p(Li,"fields",T.util.newFieldList(()=>[{no:1,name:"document_id",kind:"scalar",T:9},{no:3,name:"max_size_per_document",kind:"scalar",T:5},{no:2,name:"change_pack",kind:"message",T:ss}]));let Ym=Li;const _i=class _i extends yt{constructor(e){super();p(this,"clientId","");p(this,"documentId","");p(this,"changePack");p(this,"removeIfNotAttached",!1);T.util.initPartial(e,this)}static fromBinary(e,i){return new _i().fromBinary(e,i)}static fromJson(e,i){return new _i().fromJson(e,i)}static fromJsonString(e,i){return new _i().fromJsonString(e,i)}static equals(e,i){return T.util.equals(_i,e,i)}};p(_i,"runtime",T),p(_i,"typeName","yorkie.v1.DetachDocumentRequest"),p(_i,"fields",T.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:ss},{no:4,name:"remove_if_not_attached",kind:"scalar",T:8}]));let Gm=_i;const Ui=class Ui extends yt{constructor(e){super();p(this,"changePack");T.util.initPartial(e,this)}static fromBinary(e,i){return new Ui().fromBinary(e,i)}static fromJson(e,i){return new Ui().fromJson(e,i)}static fromJsonString(e,i){return new Ui().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Ui,e,i)}};p(Ui,"runtime",T),p(Ui,"typeName","yorkie.v1.DetachDocumentResponse"),p(Ui,"fields",T.util.newFieldList(()=>[{no:2,name:"change_pack",kind:"message",T:ss}]));let Xm=Ui;const qi=class qi extends yt{constructor(e){super();p(this,"clientId","");p(this,"documentId","");T.util.initPartial(e,this)}static fromBinary(e,i){return new qi().fromBinary(e,i)}static fromJson(e,i){return new qi().fromJson(e,i)}static fromJsonString(e,i){return new qi().fromJsonString(e,i)}static equals(e,i){return T.util.equals(qi,e,i)}};p(qi,"runtime",T),p(qi,"typeName","yorkie.v1.WatchDocumentRequest"),p(qi,"fields",T.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9}]));let Km=qi;const Pi=class Pi extends yt{constructor(e){super();p(this,"body",{case:void 0});T.util.initPartial(e,this)}static fromBinary(e,i){return new Pi().fromBinary(e,i)}static fromJson(e,i){return new Pi().fromJson(e,i)}static fromJsonString(e,i){return new Pi().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Pi,e,i)}};p(Pi,"runtime",T),p(Pi,"typeName","yorkie.v1.WatchDocumentResponse"),p(Pi,"fields",T.util.newFieldList(()=>[{no:1,name:"initialization",kind:"message",T:Zm,oneof:"body"},{no:2,name:"event",kind:"message",T:Pm,oneof:"body"}]));let Fm=Pi;const Ji=class Ji extends yt{constructor(e){super();p(this,"clientIds",[]);T.util.initPartial(e,this)}static fromBinary(e,i){return new Ji().fromBinary(e,i)}static fromJson(e,i){return new Ji().fromJson(e,i)}static fromJsonString(e,i){return new Ji().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Ji,e,i)}};p(Ji,"runtime",T),p(Ji,"typeName","yorkie.v1.WatchDocumentResponse.Initialization"),p(Ji,"fields",T.util.newFieldList(()=>[{no:1,name:"client_ids",kind:"scalar",T:9,repeated:!0}]));let Zm=Ji;const Hi=class Hi extends yt{constructor(e){super();p(this,"clientId","");p(this,"documentId","");p(this,"changePack");T.util.initPartial(e,this)}static fromBinary(e,i){return new Hi().fromBinary(e,i)}static fromJson(e,i){return new Hi().fromJson(e,i)}static fromJsonString(e,i){return new Hi().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Hi,e,i)}};p(Hi,"runtime",T),p(Hi,"typeName","yorkie.v1.RemoveDocumentRequest"),p(Hi,"fields",T.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:ss}]));let Qm=Hi;const $i=class $i extends yt{constructor(e){super();p(this,"changePack");T.util.initPartial(e,this)}static fromBinary(e,i){return new $i().fromBinary(e,i)}static fromJson(e,i){return new $i().fromJson(e,i)}static fromJsonString(e,i){return new $i().fromJsonString(e,i)}static equals(e,i){return T.util.equals($i,e,i)}};p($i,"runtime",T),p($i,"typeName","yorkie.v1.RemoveDocumentResponse"),p($i,"fields",T.util.newFieldList(()=>[{no:1,name:"change_pack",kind:"message",T:ss}]));let Wm=$i;const Vi=class Vi extends yt{constructor(e){super();p(this,"clientId","");p(this,"documentId","");p(this,"changePack");p(this,"pushOnly",!1);T.util.initPartial(e,this)}static fromBinary(e,i){return new Vi().fromBinary(e,i)}static fromJson(e,i){return new Vi().fromJson(e,i)}static fromJsonString(e,i){return new Vi().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Vi,e,i)}};p(Vi,"runtime",T),p(Vi,"typeName","yorkie.v1.PushPullChangesRequest"),p(Vi,"fields",T.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:ss},{no:4,name:"push_only",kind:"scalar",T:8}]));let ty=Vi;const ji=class ji extends yt{constructor(e){super();p(this,"changePack");T.util.initPartial(e,this)}static fromBinary(e,i){return new ji().fromBinary(e,i)}static fromJson(e,i){return new ji().fromJson(e,i)}static fromJsonString(e,i){return new ji().fromJsonString(e,i)}static equals(e,i){return T.util.equals(ji,e,i)}};p(ji,"runtime",T),p(ji,"typeName","yorkie.v1.PushPullChangesResponse"),p(ji,"fields",T.util.newFieldList(()=>[{no:1,name:"change_pack",kind:"message",T:ss}]));let ey=ji;const Yi=class Yi extends yt{constructor(e){super();p(this,"clientId","");p(this,"documentId","");p(this,"topic","");p(this,"payload",new Uint8Array(0));T.util.initPartial(e,this)}static fromBinary(e,i){return new Yi().fromBinary(e,i)}static fromJson(e,i){return new Yi().fromJson(e,i)}static fromJsonString(e,i){return new Yi().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Yi,e,i)}};p(Yi,"runtime",T),p(Yi,"typeName","yorkie.v1.BroadcastRequest"),p(Yi,"fields",T.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"topic",kind:"scalar",T:9},{no:4,name:"payload",kind:"scalar",T:12}]));let ny=Yi;const Gi=class Gi extends yt{constructor(t){super(),T.util.initPartial(t,this)}static fromBinary(t,e){return new Gi().fromBinary(t,e)}static fromJson(t,e){return new Gi().fromJson(t,e)}static fromJsonString(t,e){return new Gi().fromJsonString(t,e)}static equals(t,e){return T.util.equals(Gi,t,e)}};p(Gi,"runtime",T),p(Gi,"typeName","yorkie.v1.BroadcastResponse"),p(Gi,"fields",T.util.newFieldList(()=>[]));let ry=Gi;const x2={typeName:"yorkie.v1.YorkieService",methods:{activateClient:{name:"ActivateClient",I:Jm,O:Hm,kind:Ve.Unary},deactivateClient:{name:"DeactivateClient",I:$m,O:Vm,kind:Ve.Unary},attachDocument:{name:"AttachDocument",I:jm,O:Ym,kind:Ve.Unary},detachDocument:{name:"DetachDocument",I:Gm,O:Xm,kind:Ve.Unary},removeDocument:{name:"RemoveDocument",I:Qm,O:Wm,kind:Ve.Unary},pushPullChanges:{name:"PushPullChanges",I:ty,O:ey,kind:Ve.Unary},watchDocument:{name:"WatchDocument",I:Km,O:Fm,kind:Ve.ServerStreaming},broadcast:{name:"Broadcast",I:ny,O:ry,kind:Ve.Unary}}},T2=T.makeMessageType("google.rpc.ErrorInfo",()=>[{no:1,name:"reason",kind:"scalar",T:9},{no:2,name:"domain",kind:"scalar",T:9},{no:3,name:"metadata",kind:"map",K:9,V:{kind:"scalar",T:9}}]);T.makeMessageType("google.rpc.RetryInfo",()=>[{no:1,name:"retry_delay",kind:"message",T:Ki}]);T.makeMessageType("google.rpc.DebugInfo",()=>[{no:1,name:"stack_entries",kind:"scalar",T:9,repeated:!0},{no:2,name:"detail",kind:"scalar",T:9}]);T.makeMessageType("google.rpc.QuotaFailure",()=>[{no:1,name:"violations",kind:"message",T:A2,repeated:!0}]);const A2=T.makeMessageType("google.rpc.QuotaFailure.Violation",()=>[{no:1,name:"subject",kind:"scalar",T:9},{no:2,name:"description",kind:"scalar",T:9}],{localName:"QuotaFailure_Violation"});T.makeMessageType("google.rpc.PreconditionFailure",()=>[{no:1,name:"violations",kind:"message",T:E2,repeated:!0}]);const E2=T.makeMessageType("google.rpc.PreconditionFailure.Violation",()=>[{no:1,name:"type",kind:"scalar",T:9},{no:2,name:"subject",kind:"scalar",T:9},{no:3,name:"description",kind:"scalar",T:9}],{localName:"PreconditionFailure_Violation"});T.makeMessageType("google.rpc.BadRequest",()=>[{no:1,name:"field_violations",kind:"message",T:N2,repeated:!0}]);const N2=T.makeMessageType("google.rpc.BadRequest.FieldViolation",()=>[{no:1,name:"field",kind:"scalar",T:9},{no:2,name:"description",kind:"scalar",T:9},{no:3,name:"reason",kind:"scalar",T:9},{no:4,name:"localized_message",kind:"message",T:C2}],{localName:"BadRequest_FieldViolation"});T.makeMessageType("google.rpc.RequestInfo",()=>[{no:1,name:"request_id",kind:"scalar",T:9},{no:2,name:"serving_data",kind:"scalar",T:9}]);T.makeMessageType("google.rpc.ResourceInfo",()=>[{no:1,name:"resource_type",kind:"scalar",T:9},{no:2,name:"resource_name",kind:"scalar",T:9},{no:3,name:"owner",kind:"scalar",T:9},{no:4,name:"description",kind:"scalar",T:9}]);T.makeMessageType("google.rpc.Help",()=>[{no:1,name:"links",kind:"message",T:D2,repeated:!0}]);const D2=T.makeMessageType("google.rpc.Help.Link",()=>[{no:1,name:"description",kind:"scalar",T:9},{no:2,name:"url",kind:"scalar",T:9}],{localName:"Help_Link"}),C2=T.makeMessageType("google.rpc.LocalizedMessage",()=>[{no:1,name:"locale",kind:"scalar",T:9},{no:2,name:"message",kind:"scalar",T:9}]);var V=(n=>(n.Ok="ok",n.ErrClientNotActivated="ErrClientNotActivated",n.ErrClientNotFound="ErrClientNotFound",n.ErrUnimplemented="ErrUnimplemented",n.ErrInvalidType="ErrInvalidType",n.ErrDummy="ErrDummy",n.ErrDocumentNotAttached="ErrDocumentNotAttached",n.ErrDocumentNotDetached="ErrDocumentNotDetached",n.ErrDocumentRemoved="ErrDocumentRemoved",n.ErrDocumentSizeExceedsLimit="ErrDocumentSizeExceedsLimit",n.ErrInvalidObjectKey="ErrInvalidObjectKey",n.ErrInvalidArgument="ErrInvalidArgument",n.ErrNotInitialized="ErrNotInitialized",n.ErrNotReady="ErrNotReady",n.ErrRefused="ErrRefused",n.ErrContextNotProvided="ErrContextNotProvided",n.ErrPermissionDenied="ErrPermissionDenied",n.ErrUnauthenticated="ErrUnauthenticated",n.ErrTooManySubscribers="ErrTooManySubscribers",n.ErrTooManyAttachments="ErrTooManyAttachments",n))(V||{});class G extends Error{constructor(e,i){super(i);p(this,"name","YorkieError");p(this,"stack");this.code=e,this.message=i,this.toString=()=>`[code=${this.code}]: ${this.message}`}}var Ar=(n=>(n.Put="put",n.Clear="clear",n))(Ar||{});const kd="000000000000000000000000",Sr=24;class _n{constructor(t,e,i){p(this,"lamport");p(this,"delimiter");p(this,"actorID");this.lamport=t,this.delimiter=e,this.actorID=i}static of(t,e,i){return new _n(t,e,i)}static fromStruct(t){return _n.of(BigInt(t.lamport),t.delimiter,t.actorID)}toIDString(){return`${this.lamport.toString()}:${this.actorID}:${this.delimiter}`}toStruct(){return{lamport:this.getLamportAsString(),delimiter:this.getDelimiter(),actorID:this.getActorID()}}toTestString(){return`${this.lamport.toString()}:${this.actorID.slice(-2)}:${this.delimiter}`}setActor(t){return new _n(this.lamport,this.delimiter,t)}getLamportAsString(){return this.lamport.toString()}getLamport(){return this.lamport}getDelimiter(){return this.delimiter}getActorID(){return this.actorID}after(t){return this.compare(t)>0}equals(t){return this.compare(t)===0}compare(t){if(this.lamport>t.lamport)return 1;if(t.lamport>this.lamport)return-1;const e=this.actorID.localeCompare(t.actorID);return e!==0?e:this.delimiter>t.delimiter?1:t.delimiter>this.delimiter?-1:0}}const iy=0n,w1=0,yu=9223372036854775807n,Ho=new _n(iy,w1,kd);function wr(n){return n.replace(/["'\\\n\r\f\b\t\u2028\u2029]/g,function(t){switch(t){case'"':case"\\":return"\\"+t;case`
`:return"\\n";case"\r":return"\\r";case"\f":return"\\f";case"\b":return"\\b";case"	":return"\\t";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:return t}})}class Hu{constructor(t){p(this,"createdAt");p(this,"movedAt");p(this,"removedAt");this.createdAt=t}getCreatedAt(){return this.createdAt}getID(){return this.createdAt}getMovedAt(){return this.movedAt}getRemovedAt(){return this.removedAt}getPositionedAt(){return this.movedAt?this.movedAt:this.createdAt}setMovedAt(t){return!this.movedAt||t&&t.after(this.movedAt)?(this.movedAt=t,!0):!1}setRemovedAt(t){this.removedAt=t}remove(t){return t&&t.after(this.getPositionedAt())&&(!this.removedAt||t.after(this.removedAt))?(this.removedAt=t,!0):!1}isRemoved(){return!!this.removedAt}getMetaUsage(){let t=0;return this.getCreatedAt()&&(t+=Sr),this.getMovedAt()&&(t+=Sr),this.getRemovedAt()&&(t+=Sr),t}}class Xs extends Hu{constructor(t){super(t)}}class Dy{constructor(t,e){p(this,"strKey");p(this,"value");this.strKey=t,this.value=e}static of(t,e){return new Dy(t,e)}isRemoved(){return this.value.isRemoved()}getStrKey(){return this.strKey}getValue(){return this.value}remove(t){return this.value.remove(t)}}class Eu{constructor(){p(this,"nodeMapByKey");p(this,"nodeMapByCreatedAt");this.nodeMapByKey=new Map,this.nodeMapByCreatedAt=new Map}static create(){return new Eu}set(t,e,i){let a;const u=this.nodeMapByKey.get(t);u!=null&&!u.isRemoved()&&u.remove(i)&&(a=u.getValue());const c=Dy.of(t,e);return this.nodeMapByCreatedAt.set(e.getCreatedAt().toIDString(),c),(u==null||i.after(u.getValue().getPositionedAt()))&&(this.nodeMapByKey.set(t,c),e.setMovedAt(i)),a}delete(t,e){if(!this.nodeMapByCreatedAt.has(t.toIDString()))throw new G(V.ErrInvalidArgument,`fail to find ${t.toIDString()}`);const i=this.nodeMapByCreatedAt.get(t.toIDString());return i.remove(e),i.getValue()}subPathOf(t){const e=this.nodeMapByCreatedAt.get(t.toIDString());if(e)return e.getStrKey()}purge(t){const e=this.nodeMapByCreatedAt.get(t.getCreatedAt().toIDString());if(!e)throw new G(V.ErrInvalidArgument,`fail to find ${t.getCreatedAt().toIDString()}`);const i=this.nodeMapByKey.get(e.getStrKey());e===i&&this.nodeMapByKey.delete(i.getStrKey()),this.nodeMapByCreatedAt.delete(e.getValue().getCreatedAt().toIDString())}deleteByKey(t,e){const i=this.nodeMapByKey.get(t);if(i!=null&&i.remove(e))return i.getValue()}has(t){const e=this.nodeMapByKey.get(t);return e==null?!1:!e.isRemoved()}getByID(t){return this.nodeMapByCreatedAt.get(t.toIDString())}get(t){const e=this.nodeMapByKey.get(t);if(!(!e||e.isRemoved()))return e}*[Symbol.iterator](){for(const[,t]of this.nodeMapByKey)yield t}}class en extends Xs{constructor(e,i){super(e);p(this,"memberNodes");this.memberNodes=i}static create(e,i){if(!i)return new en(e,Eu.create());const a=Eu.create();for(const[u,c]of Object.entries(i))a.set(u,c.deepcopy(),c.getCreatedAt());return new en(e,a)}subPathOf(e){return this.memberNodes.subPathOf(e)}purge(e){this.memberNodes.purge(e)}set(e,i,a){return this.memberNodes.set(e,i,a)}delete(e,i){return this.memberNodes.delete(e,i)}deleteByKey(e,i){return this.memberNodes.deleteByKey(e,i)}get(e){const i=this.memberNodes.get(e);return i==null?void 0:i.getValue()}getByID(e){const i=this.memberNodes.getByID(e);return i==null?void 0:i.getValue()}has(e){return this.memberNodes.has(e)}getDataSize(){return{data:0,meta:this.getMetaUsage()}}toJSON(){const e=[];for(const[i,a]of this)e.push(`"${wr(i)}":${a.toJSON()}`);return`{${e.join(",")}}`}toJS(){return JSON.parse(this.toJSON())}toJSForTest(){const e={};for(const[i,a]of this){const{createdAt:u,value:c,type:d}=a.toJSForTest();e[i]={key:i,createdAt:u,value:c,type:d}}return{createdAt:this.getCreatedAt().toTestString(),value:e,type:"YORKIE_OBJECT"}}getKeys(){const e=Array();for(const[i]of this)e.push(i);return e}toSortedJSON(){var a;const e=Array();for(const[u]of this)e.push(u);const i=[];for(const u of e.sort()){const c=(a=this.memberNodes.get(u))==null?void 0:a.getValue();i.push(`"${wr(u)}":${c.toSortedJSON()}`)}return`{${i.join(",")}}`}getRHT(){return this.memberNodes}deepcopy(){const e=en.create(this.getCreatedAt());for(const i of this.memberNodes)e.memberNodes.set(i.getStrKey(),i.getValue().deepcopy(),this.getPositionedAt());return e.remove(this.getRemovedAt()),e}getDescendants(e){for(const i of this.memberNodes){const a=i.getValue();if(e(a,this))return;a instanceof Xs&&a.getDescendants(e)}}*[Symbol.iterator](){const e=new Set;for(const i of this.memberNodes)e.has(i.getStrKey())||(e.add(i.getStrKey()),i.isRemoved()||(yield[i.getStrKey(),i.getValue()]))}}var te=(n=>(n.Local="local",n.Remote="remote",n.UndoRedo="undoredo",n))(te||{});class tr{constructor(t,e){p(this,"parentCreatedAt");p(this,"executedAt");this.parentCreatedAt=t,this.executedAt=e}getParentCreatedAt(){return this.parentCreatedAt}getExecutedAt(){if(!this.executedAt)throw new G(V.ErrNotReady,"executedAt is not set yet");return this.executedAt}setActor(t){this.executedAt&&(this.executedAt=this.executedAt.setActor(t))}setExecutedAt(t){this.executedAt=t}}class S1{constructor(t){p(this,"value");p(this,"left");p(this,"right");p(this,"parent");p(this,"weight");this.value=t,this.initWeight()}getNodeString(){return`${this.weight}${this.value}`}getValue(){return this.value}getLeftWeight(){return this.hasLeft()?this.left.getWeight():0}getRightWeight(){return this.hasRight()?this.right.getWeight():0}getWeight(){return this.weight}getLeft(){return this.left}getRight(){return this.right}getParent(){return this.parent}hasLeft(){return!!this.left}hasRight(){return!!this.right}hasParent(){return!!this.parent}setLeft(t){this.left=t}setRight(t){this.right=t}setParent(t){this.parent=t}unlink(){this.parent=void 0,this.right=void 0,this.left=void 0}hasLinks(){return this.hasParent()||this.hasLeft()||this.hasRight()}increaseWeight(t){this.weight+=t}initWeight(){this.weight=this.getLength()}}class Nu{constructor(t){p(this,"root");this.root=t}get length(){return this.root?this.root.getWeight():0}find(t){if(!this.root||t<0)return[void 0,0];let e=this.root;for(;;)if(e.hasLeft()&&t<=e.getLeftWeight())e=e.getLeft();else if(e.hasRight()&&e.getLeftWeight()+e.getLength()<t)t-=e.getLeftWeight()+e.getLength(),e=e.getRight();else{t-=e.getLeftWeight();break}if(t>e.getLength())throw new G(V.ErrInvalidArgument,`out of index range: pos: ${t} > node.length: ${e.getLength()}`);return this.splayNode(e),[e,t]}indexOf(t){return!t||t!==this.root&&!t.hasLinks()?-1:(this.splayNode(t),this.root.getLeftWeight())}getRoot(){return this.root}insert(t){return this.insertAfter(this.root,t)}insertAfter(t,e){return t?(this.splayNode(t),this.root=e,e.setRight(t.getRight()),t.hasRight()&&t.getRight().setParent(e),e.setLeft(t),t.setParent(e),t.setRight(),this.updateWeight(t),this.updateWeight(e),e):(this.root=e,e)}updateWeight(t){t.initWeight(),t.hasLeft()&&t.increaseWeight(t.getLeftWeight()),t.hasRight()&&t.increaseWeight(t.getRightWeight())}updateTreeWeight(t){for(;t;)this.updateWeight(t),t=t.getParent()}splayNode(t){if(t)for(;;)if(this.isLeftChild(t.getParent())&&this.isRightChild(t))this.rotateLeft(t),this.rotateRight(t);else if(this.isRightChild(t.getParent())&&this.isLeftChild(t))this.rotateRight(t),this.rotateLeft(t);else if(this.isLeftChild(t.getParent())&&this.isLeftChild(t))this.rotateRight(t.getParent()),this.rotateRight(t);else if(this.isRightChild(t.getParent())&&this.isRightChild(t))this.rotateLeft(t.getParent()),this.rotateLeft(t);else{this.isLeftChild(t)?this.rotateRight(t):this.isRightChild(t)&&this.rotateLeft(t),this.updateWeight(t);return}}delete(t){this.splayNode(t);const e=new Nu(t.getLeft());e.root&&e.root.setParent();const i=new Nu(t.getRight());if(i.root&&i.root.setParent(),e.root){const a=e.getRightmost();e.splayNode(a),e.root.setRight(i.root),i.root&&i.root.setParent(e.root),this.root=e.root}else this.root=i.root;t.unlink(),this.root&&this.updateWeight(this.root)}deleteRange(t,e){if(!e){this.splayNode(t),this.cutOffRight(t);return}this.splayNode(t),this.splayNode(e),e.getLeft()!=t&&this.rotateRight(t),this.cutOffRight(t)}cutOffRight(t){const e=[];this.traversePostorder(t.getRight(),e);for(const i of e)i.initWeight();this.updateTreeWeight(t)}toTestString(){const t=[];return this.traverseInorder(this.root,t),t.map(e=>`[${e.getWeight()},${e.getLength()}]${e.getValue()||""}`).join("")}checkWeight(){const t=[];this.traverseInorder(this.root,t);for(const e of t)if(e.getWeight()!=e.getLength()+e.getLeftWeight()+e.getRightWeight())return!1;return!0}getRightmost(){let t=this.root;for(;t.hasRight();)t=t.getRight();return t}traverseInorder(t,e){t&&(this.traverseInorder(t.getLeft(),e),e.push(t),this.traverseInorder(t.getRight(),e))}traversePostorder(t,e){t&&(this.traversePostorder(t.getLeft(),e),this.traversePostorder(t.getRight(),e),e.push(t))}rotateLeft(t){const e=t.getParent();e.hasParent()?e===e.getParent().getLeft()?e.getParent().setLeft(t):e.getParent().setRight(t):this.root=t,t.setParent(e.getParent()),e.setRight(t.getLeft()),e.hasRight()&&e.getRight().setParent(e),t.setLeft(e),t.getLeft().setParent(t),this.updateWeight(e),this.updateWeight(t)}rotateRight(t){const e=t.getParent();e.hasParent()?e===e.getParent().getLeft()?e.getParent().setLeft(t):e.getParent().setRight(t):this.root=t,t.setParent(e.getParent()),e.setLeft(t.getRight()),e.hasLeft()&&e.getLeft().setParent(e),t.setRight(e),t.getRight().setParent(t),this.updateWeight(e),this.updateWeight(t)}isLeftChild(t){return t&&t.hasParent()?t.getParent().getLeft()===t:!1}isRightChild(t){return t&&t.hasParent()?t.getParent().getRight()===t:!1}}/**
 * @license
 * Copyright 2009 The Closure Library Authors
 * Copyright 2020 Daniel Wirtz / The long.js Authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * SPDX-License-Identifier: Apache-2.0
 */var zn=null;try{zn=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function Ut(n,t,e){this.low=n|0,this.high=t|0,this.unsigned=!!e}Ut.prototype.__isLong__;Object.defineProperty(Ut.prototype,"__isLong__",{value:!0});function He(n){return(n&&n.__isLong__)===!0}function ES(n){var t=Math.clz32(n&-n);return n?31-t:t}Ut.isLong=He;var NS={},DS={};function za(n,t){var e,i,a;return t?(n>>>=0,(a=0<=n&&n<256)&&(i=DS[n],i)?i:(e=Jt(n,0,!0),a&&(DS[n]=e),e)):(n|=0,(a=-128<=n&&n<128)&&(i=NS[n],i)?i:(e=Jt(n,n<0?-1:0,!1),a&&(NS[n]=e),e))}Ut.fromInt=za;function Ln(n,t){if(isNaN(n))return t?Zi:Fn;if(t){if(n<0)return Zi;if(n>=b1)return A1}else{if(n<=-9223372036854776e3)return We;if(n+1>=O2)return T1}return n<0?Ln(-n,t).neg():Jt(n%$o|0,n/$o|0,t)}Ut.fromNumber=Ln;function Jt(n,t,e){return new Ut(n,t,e)}Ut.fromBits=Jt;var ud=Math.pow;function Cy(n,t,e){if(n.length===0)throw Error("empty string");if(typeof t=="number"?(e=t,t=!1):t=!!t,n==="NaN"||n==="Infinity"||n==="+Infinity"||n==="-Infinity")return t?Zi:Fn;if(e=e||10,e<2||36<e)throw RangeError("radix");var i;if((i=n.indexOf("-"))>0)throw Error("interior hyphen");if(i===0)return Cy(n.substring(1),t,e).neg();for(var a=Ln(ud(e,8)),u=Fn,c=0;c<n.length;c+=8){var d=Math.min(8,n.length-c),h=parseInt(n.substring(c,c+d),e);if(d<8){var g=Ln(ud(e,d));u=u.mul(g).add(Ln(h))}else u=u.mul(a),u=u.add(Ln(h))}return u.unsigned=t,u}Ut.fromString=Cy;function Pn(n,t){return typeof n=="number"?Ln(n,t):typeof n=="string"?Cy(n,t):Jt(n.low,n.high,typeof t=="boolean"?t:n.unsigned)}Ut.fromValue=Pn;var CS=65536,k2=1<<24,$o=CS*CS,b1=$o*$o,O2=b1/2,kS=za(k2),Fn=za(0);Ut.ZERO=Fn;var Zi=za(0,!0);Ut.UZERO=Zi;var ko=za(1);Ut.ONE=ko;var x1=za(1,!0);Ut.UONE=x1;var sy=za(-1);Ut.NEG_ONE=sy;var T1=Jt(-1,2147483647,!1);Ut.MAX_VALUE=T1;var A1=Jt(-1,-1,!0);Ut.MAX_UNSIGNED_VALUE=A1;var We=Jt(0,-2147483648,!1);Ut.MIN_VALUE=We;var ht=Ut.prototype;ht.toInt=function(){return this.unsigned?this.low>>>0:this.low};ht.toNumber=function(){return this.unsigned?(this.high>>>0)*$o+(this.low>>>0):this.high*$o+(this.low>>>0)};ht.toString=function(t){if(t=t||10,t<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(We)){var e=Ln(t),i=this.div(e),a=i.mul(e).sub(this);return i.toString(t)+a.toInt().toString(t)}else return"-"+this.neg().toString(t);for(var u=Ln(ud(t,6),this.unsigned),c=this,d="";;){var h=c.div(u),g=c.sub(h.mul(u)).toInt()>>>0,y=g.toString(t);if(c=h,c.isZero())return y+d;for(;y.length<6;)y="0"+y;d=""+y+d}};ht.getHighBits=function(){return this.high};ht.getHighBitsUnsigned=function(){return this.high>>>0};ht.getLowBits=function(){return this.low};ht.getLowBitsUnsigned=function(){return this.low>>>0};ht.getNumBitsAbs=function(){if(this.isNegative())return this.eq(We)?64:this.neg().getNumBitsAbs();for(var t=this.high!=0?this.high:this.low,e=31;e>0&&(t&1<<e)==0;e--);return this.high!=0?e+33:e+1};ht.isSafeInteger=function(){var t=this.high>>21;return t?this.unsigned?!1:t===-1&&!(this.low===0&&this.high===-2097152):!0};ht.isZero=function(){return this.high===0&&this.low===0};ht.eqz=ht.isZero;ht.isNegative=function(){return!this.unsigned&&this.high<0};ht.isPositive=function(){return this.unsigned||this.high>=0};ht.isOdd=function(){return(this.low&1)===1};ht.isEven=function(){return(this.low&1)===0};ht.equals=function(t){return He(t)||(t=Pn(t)),this.unsigned!==t.unsigned&&this.high>>>31===1&&t.high>>>31===1?!1:this.high===t.high&&this.low===t.low};ht.eq=ht.equals;ht.notEquals=function(t){return!this.eq(t)};ht.neq=ht.notEquals;ht.ne=ht.notEquals;ht.lessThan=function(t){return this.comp(t)<0};ht.lt=ht.lessThan;ht.lessThanOrEqual=function(t){return this.comp(t)<=0};ht.lte=ht.lessThanOrEqual;ht.le=ht.lessThanOrEqual;ht.greaterThan=function(t){return this.comp(t)>0};ht.gt=ht.greaterThan;ht.greaterThanOrEqual=function(t){return this.comp(t)>=0};ht.gte=ht.greaterThanOrEqual;ht.ge=ht.greaterThanOrEqual;ht.compare=function(t){if(He(t)||(t=Pn(t)),this.eq(t))return 0;var e=this.isNegative(),i=t.isNegative();return e&&!i?-1:!e&&i?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1};ht.comp=ht.compare;ht.negate=function(){return!this.unsigned&&this.eq(We)?We:this.not().add(ko)};ht.neg=ht.negate;ht.add=function(t){He(t)||(t=Pn(t));var e=this.high>>>16,i=this.high&65535,a=this.low>>>16,u=this.low&65535,c=t.high>>>16,d=t.high&65535,h=t.low>>>16,g=t.low&65535,y=0,w=0,v=0,S=0;return S+=u+g,v+=S>>>16,S&=65535,v+=a+h,w+=v>>>16,v&=65535,w+=i+d,y+=w>>>16,w&=65535,y+=e+c,y&=65535,Jt(v<<16|S,y<<16|w,this.unsigned)};ht.subtract=function(t){return He(t)||(t=Pn(t)),this.add(t.neg())};ht.sub=ht.subtract;ht.multiply=function(t){if(this.isZero())return this;if(He(t)||(t=Pn(t)),zn){var e=zn.mul(this.low,this.high,t.low,t.high);return Jt(e,zn.get_high(),this.unsigned)}if(t.isZero())return this.unsigned?Zi:Fn;if(this.eq(We))return t.isOdd()?We:Fn;if(t.eq(We))return this.isOdd()?We:Fn;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(kS)&&t.lt(kS))return Ln(this.toNumber()*t.toNumber(),this.unsigned);var i=this.high>>>16,a=this.high&65535,u=this.low>>>16,c=this.low&65535,d=t.high>>>16,h=t.high&65535,g=t.low>>>16,y=t.low&65535,w=0,v=0,S=0,x=0;return x+=c*y,S+=x>>>16,x&=65535,S+=u*y,v+=S>>>16,S&=65535,S+=c*g,v+=S>>>16,S&=65535,v+=a*y,w+=v>>>16,v&=65535,v+=u*g,w+=v>>>16,v&=65535,v+=c*h,w+=v>>>16,v&=65535,w+=i*y+a*g+u*h+c*d,w&=65535,Jt(S<<16|x,w<<16|v,this.unsigned)};ht.mul=ht.multiply;ht.divide=function(t){if(He(t)||(t=Pn(t)),t.isZero())throw Error("division by zero");if(zn){if(!this.unsigned&&this.high===-2147483648&&t.low===-1&&t.high===-1)return this;var e=(this.unsigned?zn.div_u:zn.div_s)(this.low,this.high,t.low,t.high);return Jt(e,zn.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?Zi:Fn;var i,a,u;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return Zi;if(t.gt(this.shru(1)))return x1;u=Zi}else{if(this.eq(We)){if(t.eq(ko)||t.eq(sy))return We;if(t.eq(We))return ko;var c=this.shr(1);return i=c.div(t).shl(1),i.eq(Fn)?t.isNegative()?ko:sy:(a=this.sub(t.mul(i)),u=i.add(a.div(t)),u)}else if(t.eq(We))return this.unsigned?Zi:Fn;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();u=Fn}for(a=this;a.gte(t);){i=Math.max(1,Math.floor(a.toNumber()/t.toNumber()));for(var d=Math.ceil(Math.log(i)/Math.LN2),h=d<=48?1:ud(2,d-48),g=Ln(i),y=g.mul(t);y.isNegative()||y.gt(a);)i-=h,g=Ln(i,this.unsigned),y=g.mul(t);g.isZero()&&(g=ko),u=u.add(g),a=a.sub(y)}return u};ht.div=ht.divide;ht.modulo=function(t){if(He(t)||(t=Pn(t)),zn){var e=(this.unsigned?zn.rem_u:zn.rem_s)(this.low,this.high,t.low,t.high);return Jt(e,zn.get_high(),this.unsigned)}return this.sub(this.div(t).mul(t))};ht.mod=ht.modulo;ht.rem=ht.modulo;ht.not=function(){return Jt(~this.low,~this.high,this.unsigned)};ht.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32};ht.clz=ht.countLeadingZeros;ht.countTrailingZeros=function(){return this.low?ES(this.low):ES(this.high)+32};ht.ctz=ht.countTrailingZeros;ht.and=function(t){return He(t)||(t=Pn(t)),Jt(this.low&t.low,this.high&t.high,this.unsigned)};ht.or=function(t){return He(t)||(t=Pn(t)),Jt(this.low|t.low,this.high|t.high,this.unsigned)};ht.xor=function(t){return He(t)||(t=Pn(t)),Jt(this.low^t.low,this.high^t.high,this.unsigned)};ht.shiftLeft=function(t){return He(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?Jt(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):Jt(0,this.low<<t-32,this.unsigned)};ht.shl=ht.shiftLeft;ht.shiftRight=function(t){return He(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?Jt(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):Jt(this.high>>t-32,this.high>=0?0:-1,this.unsigned)};ht.shr=ht.shiftRight;ht.shiftRightUnsigned=function(t){return He(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?Jt(this.low>>>t|this.high<<32-t,this.high>>>t,this.unsigned):t===32?Jt(this.high,0,this.unsigned):Jt(this.high>>>t-32,0,this.unsigned)};ht.shru=ht.shiftRightUnsigned;ht.shr_u=ht.shiftRightUnsigned;ht.rotateLeft=function(t){var e;return He(t)&&(t=t.toInt()),(t&=63)===0?this:t===32?Jt(this.high,this.low,this.unsigned):t<32?(e=32-t,Jt(this.low<<t|this.high>>>e,this.high<<t|this.low>>>e,this.unsigned)):(t-=32,e=32-t,Jt(this.high<<t|this.low>>>e,this.low<<t|this.high>>>e,this.unsigned))};ht.rotl=ht.rotateLeft;ht.rotateRight=function(t){var e;return He(t)&&(t=t.toInt()),(t&=63)===0?this:t===32?Jt(this.high,this.low,this.unsigned):t<32?(e=32-t,Jt(this.high<<e|this.low>>>t,this.low<<e|this.high>>>t,this.unsigned)):(t-=32,e=32-t,Jt(this.low<<e|this.high>>>t,this.high<<e|this.low>>>t,this.unsigned))};ht.rotr=ht.rotateRight;ht.toSigned=function(){return this.unsigned?Jt(this.low,this.high,!1):this};ht.toUnsigned=function(){return this.unsigned?this:Jt(this.low,this.high,!0)};ht.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()};ht.toBytesLE=function(){var t=this.high,e=this.low;return[e&255,e>>>8&255,e>>>16&255,e>>>24,t&255,t>>>8&255,t>>>16&255,t>>>24]};ht.toBytesBE=function(){var t=this.high,e=this.low;return[t>>>24,t>>>16&255,t>>>8&255,t&255,e>>>24,e>>>16&255,e>>>8&255,e&255]};Ut.fromBytes=function(t,e,i){return i?Ut.fromBytesLE(t,e):Ut.fromBytesBE(t,e)};Ut.fromBytesLE=function(t,e){return new Ut(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,e)};Ut.fromBytesBE=function(t,e){return new Ut(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],e)};typeof BigInt=="function"&&(Ut.fromBigInt=function(t,e){var i=Number(BigInt.asIntN(32,t)),a=Number(BigInt.asIntN(32,t>>BigInt(32)));return Jt(i,a,e)},Ut.fromValue=function(t,e){return typeof t=="bigint"?fromBigInt(t,e):Pn(t,e)},ht.toBigInt=function(){var t=BigInt(this.low>>>0),e=BigInt(this.unsigned?this.high>>>0:this.high);return e<<BigInt(32)|t});var Ae=(n=>(n[n.Null=0]="Null",n[n.Boolean=1]="Boolean",n[n.Integer=2]="Integer",n[n.Long=3]="Long",n[n.Double=4]="Double",n[n.String=5]="String",n[n.Bytes=6]="Bytes",n[n.Date=7]="Date",n))(Ae||{});class ce extends Hu{constructor(e,i){super(i);p(this,"valueType");p(this,"value");this.valueType=ce.getPrimitiveType(e),this.value=e===void 0?null:e}static of(e,i){return new ce(e,i)}static valueFromBytes(e,i){switch(e){case 0:return null;case 1:return!!i[0];case 2:return i[0]|i[1]<<8|i[2]<<16|i[3]<<24;case 4:{const a=new DataView(i.buffer);return i.forEach(function(u,c){a.setUint8(c,u)}),a.getFloat64(0,!0)}case 5:return new TextDecoder("utf-8").decode(i);case 3:return Ut.fromBytesLE(Array.from(i));case 6:return i;case 7:return new Date(Ut.fromBytesLE(Array.from(i),!0).toNumber());default:throw new G(V.ErrUnimplemented,`unimplemented type: ${e}`)}}getValueSize(){switch(this.valueType){case 0:return 8;case 1:return 4;case 2:return 4;case 3:return 8;case 4:return 8;case 5:return this.value.length*2;case 6:return this.value.length;case 7:return 8;default:throw new G(V.ErrUnimplemented,`unimplemented type: ${this.valueType}`)}}getDataSize(){return{data:this.getValueSize(),meta:this.getMetaUsage()}}toJSON(){return this.valueType===5?`"${wr(this.value)}"`:`${this.value}`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:this.value,type:"YORKIE_PRIMITIVE"}}deepcopy(){const e=ce.of(this.value,this.getCreatedAt());return e.setMovedAt(this.getMovedAt()),e.setRemovedAt(this.getRemovedAt()),e}getType(){return this.valueType}static getPrimitiveType(e){switch(typeof e){case"undefined":return 0;case"boolean":return 1;case"number":return this.isInteger(e)?2:4;case"string":return 5;case"object":if(e===null)return 0;if(e instanceof Ut)return 3;if(e instanceof Uint8Array)return 6;if(e instanceof Date)return 7}}static isSupport(e){return ce.getPrimitiveType(e)!==void 0}static isInteger(e){return e%1===0}isNumericType(){const e=this.valueType;return e===2||e===3||e===4}getValue(){return this.value}toBytes(){switch(this.valueType){case 0:return new Uint8Array;case 1:return this.value?new Uint8Array([1]):new Uint8Array([0]);case 2:{const e=this.value;return new Uint8Array([e&255,e>>8&255,e>>16&255,e>>24&255])}case 4:{const e=this.value,i=new Uint8Array(8);return new DataView(i.buffer).setFloat64(0,e,!0),i}case 5:return new TextEncoder().encode(this.value);case 3:{const i=this.value.toBytesLE();return Uint8Array.from(i)}case 6:return this.value;case 7:{const e=this.value,i=Ut.fromNumber(e.getTime(),!0).toBytesLE();return Uint8Array.from(i)}default:throw new G(V.ErrUnimplemented,`unimplemented type: ${this.valueType}`)}}}class cd extends S1{constructor(e){super(e);p(this,"prev");p(this,"next");this.value=e}static createAfter(e,i){const a=new cd(i),u=e.next;return e.next=a,a.prev=e,a.next=u,u&&(u.prev=a),a}remove(e){return this.value.remove(e)}getCreatedAt(){return this.value.getCreatedAt()}getPositionedAt(){return this.value.getPositionedAt()}release(){this.prev&&(this.prev.next=this.next),this.next&&(this.next.prev=this.prev),this.prev=void 0,this.next=void 0}getLength(){return this.value.isRemoved()?0:1}getPrev(){return this.prev}getNext(){return this.next}getValue(){return this.value}isRemoved(){return this.value.isRemoved()}}class Du{constructor(){p(this,"dummyHead");p(this,"last");p(this,"nodeMapByIndex");p(this,"nodeMapByCreatedAt");const t=ce.of(0,Ho);t.setRemovedAt(Ho),this.dummyHead=new cd(t),this.last=this.dummyHead,this.nodeMapByIndex=new Nu,this.nodeMapByCreatedAt=new Map,this.nodeMapByIndex.insert(this.dummyHead),this.nodeMapByCreatedAt.set(this.dummyHead.getCreatedAt().toIDString(),this.dummyHead)}static create(){return new Du}get length(){return this.nodeMapByIndex.length}findNextBeforeExecutedAt(t,e){let i=this.nodeMapByCreatedAt.get(t.toIDString());if(!i)throw new G(V.ErrInvalidArgument,`cant find the given node: ${t.toIDString()}`);for(;i.getNext()&&i.getNext().getPositionedAt().after(e);)i=i.getNext();return i}release(t){this.last===t&&(this.last=t.getPrev()),t.release(),this.nodeMapByIndex.delete(t),this.nodeMapByCreatedAt.delete(t.getValue().getCreatedAt().toIDString())}insertAfter(t,e,i=e.getCreatedAt()){const a=this.findNextBeforeExecutedAt(t,i),u=cd.createAfter(a,e);a===this.last&&(this.last=u),this.nodeMapByIndex.insertAfter(a,u),this.nodeMapByCreatedAt.set(u.getCreatedAt().toIDString(),u)}moveAfter(t,e,i){const a=this.nodeMapByCreatedAt.get(t.toIDString());if(!a)throw new G(V.ErrInvalidArgument,`cant find the given node: ${t.toIDString()}`);const u=this.nodeMapByCreatedAt.get(e.toIDString());if(!u)throw new G(V.ErrInvalidArgument,`cant find the given node: ${e.toIDString()}`);a!==u&&(!u.getValue().getMovedAt()||i.after(u.getValue().getMovedAt()))&&(this.release(u),this.insertAfter(a.getCreatedAt(),u.getValue(),i),u.getValue().setMovedAt(i))}insert(t){this.insertAfter(this.last.getCreatedAt(),t)}getByID(t){return this.nodeMapByCreatedAt.get(t.toIDString())}subPathOf(t){const e=this.nodeMapByCreatedAt.get(t.toIDString());if(e)return String(this.nodeMapByIndex.indexOf(e))}purge(t){const e=this.nodeMapByCreatedAt.get(t.getCreatedAt().toIDString());if(!e)throw new G(V.ErrInvalidArgument,`fail to find the given createdAt: ${t.getCreatedAt().toIDString()}`);this.release(e)}getByIndex(t){if(t>=this.length)return;const[e,i]=this.nodeMapByIndex.find(t);let a=e;if(t===0&&e===this.dummyHead||i>0)do a&&(a=a.getNext());while(a&&a.isRemoved());return a}getPrevCreatedAt(t){let e=this.nodeMapByCreatedAt.get(t.toIDString());do e=e.getPrev();while(this.dummyHead!==e&&e.isRemoved());return e.getValue().getCreatedAt()}delete(t,e){const i=this.nodeMapByCreatedAt.get(t.toIDString()),a=i.isRemoved();return i.remove(e)&&!a&&this.nodeMapByIndex.splayNode(i),i.getValue()}deleteByIndex(t,e){const i=this.getByIndex(t);if(i)return i.remove(e)&&this.nodeMapByIndex.splayNode(i),i.getValue()}getHead(){return this.dummyHead.getValue()}getLast(){return this.last.getValue()}getLastCreatedAt(){return this.last.getCreatedAt()}toTestString(){const t=[];for(const e of this){const i=`${e.getCreatedAt().toIDString()}:${e.getValue().toJSON()}`;e.isRemoved()?t.push(`{${i}}`):t.push(`[${i}]`)}return t.join("")}*[Symbol.iterator](){let t=this.dummyHead.getNext();for(;t;)yield t,t=t.getNext()}}class mn extends Xs{constructor(e,i){super(e);p(this,"elements");this.elements=i}static create(e,i){if(!i)return new mn(e,Du.create());const a=Du.create();for(const u of i)a.insertAfter(a.getLastCreatedAt(),u.deepcopy());return new mn(e,a)}subPathOf(e){return this.elements.subPathOf(e)}purge(e){this.elements.purge(e)}insertAfter(e,i){this.elements.insertAfter(e,i)}moveAfter(e,i,a){this.elements.moveAfter(e,i,a)}get(e){const i=this.elements.getByIndex(e);return i==null?void 0:i.getValue()}getByID(e){const i=this.elements.getByID(e);return i==null?void 0:i.getValue()}getHead(){return this.elements.getHead()}getLast(){return this.elements.getLast()}getPrevCreatedAt(e){return this.elements.getPrevCreatedAt(e)}delete(e,i){return this.elements.delete(e,i)}deleteByIndex(e,i){return this.elements.deleteByIndex(e,i)}getLastCreatedAt(){return this.elements.getLastCreatedAt()}get length(){return this.elements.length}*[Symbol.iterator](){for(const e of this.elements)e.isRemoved()||(yield e.getValue())}toTestString(){return this.elements.toTestString()}getDescendants(e){for(const i of this.elements){const a=i.getValue();if(e(a,this))return;a instanceof Xs&&a.getDescendants(e)}}getDataSize(){return{data:0,meta:this.getMetaUsage()}}toJSON(){const e=[];for(const i of this)e.push(i.toJSON());return`[${e.join(",")}]`}toJS(){return JSON.parse(this.toJSON())}toJSForTest(){const e={};for(let i=0;i<this.length;i++){const{createdAt:a,value:u,type:c}=this.get(i).toJSForTest();e[i]={key:String(i),createdAt:a,value:u,type:c}}return{createdAt:this.getCreatedAt().toTestString(),value:e,type:"YORKIE_ARRAY"}}toSortedJSON(){return this.toJSON()}getElements(){return this.elements}deepcopy(){const e=mn.create(this.getCreatedAt());for(const i of this.elements)e.elements.insertAfter(e.getLastCreatedAt(),i.getValue().deepcopy());return e.remove(this.getRemovedAt()),e}}class Qs extends tr{constructor(e,i,a){super(e,a);p(this,"createdAt");this.createdAt=i}static create(e,i,a){return new Qs(e,i,a)}execute(e,i){var g;const a=e.findByCreatedAt(this.getParentCreatedAt());if(!a)throw new G(V.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(a instanceof Xs))throw new G(V.ErrInvalidArgument,`only object and array can execute remove: ${a}`);if(i===te.UndoRedo){let y=a.getByID(this.createdAt);for(;y;){if(y.getRemovedAt())return;y=(g=e.findElementPairByCreatedAt(y.getCreatedAt()))==null?void 0:g.parent}}const u=a.subPathOf(this.createdAt),c=this.toReverseOperation(a),d=a.delete(this.createdAt,this.getExecutedAt());return e.registerRemovedElement(d),{opInfos:a instanceof mn?[{type:"remove",path:e.createPath(this.getParentCreatedAt()),index:Number(u)}]:[{type:"remove",path:e.createPath(this.getParentCreatedAt()),key:u}],reverseOp:c}}toReverseOperation(e){if(e instanceof en){const i=e.subPathOf(this.createdAt);if(i!==void 0){const a=e.get(i);if(a!==void 0)return Ma.create(i,a.deepcopy(),this.getParentCreatedAt())}}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.REMOVE.${this.createdAt.toTestString()}`}getCreatedAt(){return this.createdAt}}class Ma extends tr{constructor(e,i,a,u){super(a,u);p(this,"key");p(this,"value");this.key=e,this.value=i}static create(e,i,a,u){return new Ma(e,i,a,u)}execute(e,i){var g;const a=e.findByCreatedAt(this.getParentCreatedAt());if(!a)throw new G(V.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(a instanceof en))throw new G(V.ErrInvalidArgument,"fail to execute, only object can execute set");if(i===te.UndoRedo){let y=a;for(;y;){if(y.getRemovedAt())return;y=(g=e.findElementPairByCreatedAt(y.getCreatedAt()))==null?void 0:g.parent}}const u=a.get(this.key),c=this.toReverseOperation(u),d=this.value.deepcopy(),h=a.set(this.key,d,this.getExecutedAt());return i===te.UndoRedo&&e.findByCreatedAt(d.getCreatedAt())&&e.deregisterElement(d),e.registerElement(d,a),h&&e.registerRemovedElement(h),{opInfos:[{type:"set",path:e.createPath(this.getParentCreatedAt()),key:this.key}],reverseOp:c}}toReverseOperation(e){let i=Qs.create(this.getParentCreatedAt(),this.value.getCreatedAt());return e!==void 0&&!e.isRemoved()&&(i=Ma.create(this.key,e.deepcopy(),this.getParentCreatedAt())),i}getEffectedCreatedAt(){return this.value.getCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.SET.${this.key}=${this.value.toSortedJSON()}`}getKey(){return this.key}getValue(){return this.value}}class $u extends tr{constructor(e,i,a,u){super(e,u);p(this,"prevCreatedAt");p(this,"value");this.prevCreatedAt=i,this.value=a}static create(e,i,a,u){return new $u(e,i,a,u)}execute(e){const i=e.findByCreatedAt(this.getParentCreatedAt());if(!i)throw new G(V.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(i instanceof mn))throw new G(V.ErrInvalidArgument,"fail to execute, only array can execute add");const a=i,u=this.value.deepcopy();return a.insertAfter(this.prevCreatedAt,u),e.registerElement(u,a),{opInfos:[{type:"add",path:e.createPath(this.getParentCreatedAt()),index:Number(a.subPathOf(this.getEffectedCreatedAt()))}]}}getEffectedCreatedAt(){return this.value.getCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.ADD.${this.value.toJSON()}`}getPrevCreatedAt(){return this.prevCreatedAt}getValue(){return this.value}}class js extends tr{constructor(e,i,a,u){super(e,u);p(this,"prevCreatedAt");p(this,"createdAt");this.prevCreatedAt=i,this.createdAt=a}static create(e,i,a,u){return new js(e,i,a,u)}execute(e){const i=e.findByCreatedAt(this.getParentCreatedAt());if(!i)throw new G(V.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(i instanceof mn))throw new G(V.ErrInvalidArgument,"fail to execute, only array can execute move");const a=i,u=Number(a.subPathOf(this.createdAt));a.moveAfter(this.prevCreatedAt,this.createdAt,this.getExecutedAt());const c=Number(a.subPathOf(this.createdAt));return{opInfos:[{type:"move",path:e.createPath(this.getParentCreatedAt()),index:c,previousIndex:u}]}}getEffectedCreatedAt(){return this.createdAt}toTestString(){return`${this.getParentCreatedAt().toTestString()}.MOVE`}getPrevCreatedAt(){return this.prevCreatedAt}getCreatedAt(){return this.createdAt}}class Ys{constructor(t,e,i,a){p(this,"key");p(this,"value");p(this,"updatedAt");p(this,"_isRemoved");this.key=t,this.value=e,this.updatedAt=i,this._isRemoved=a}static of(t,e,i,a){return new Ys(t,e,i,a)}getKey(){return this.key}getValue(){return this.value}getUpdatedAt(){return this.updatedAt}isRemoved(){return this._isRemoved}toIDString(){return`${this.updatedAt.toIDString()}:${this.key}`}getRemovedAt(){if(this._isRemoved)return this.updatedAt}getDataSize(){return{data:(this.key.length+this.value.length)*2,meta:Sr}}}class rs{constructor(){p(this,"nodeMapByKey");p(this,"numberOfRemovedElement");this.nodeMapByKey=new Map,this.numberOfRemovedElement=0}static create(){return new rs}getNodeMapByKey(){return this.nodeMapByKey}set(t,e,i){const a=this.nodeMapByKey.get(t);if(a&&a.isRemoved()&&i.after(a.getUpdatedAt())&&(this.numberOfRemovedElement-=1),a===void 0||i.after(a.getUpdatedAt())){const u=Ys.of(t,e,i,!1);return this.nodeMapByKey.set(t,u),a!==void 0&&a.isRemoved()?[a,u]:[void 0,u]}return a.isRemoved()?[a,void 0]:[void 0,void 0]}setInternal(t,e,i,a){const u=Ys.of(t,e,i,a);this.nodeMapByKey.set(t,u),a&&this.numberOfRemovedElement++}remove(t,e){const i=this.nodeMapByKey.get(t),a=[];if(i===void 0||e.after(i.getUpdatedAt())){if(i===void 0){this.numberOfRemovedElement+=1;const d=Ys.of(t,"",e,!0);return this.nodeMapByKey.set(t,d),a.push(d),a}const u=i.isRemoved();u||(this.numberOfRemovedElement+=1),u&&a.push(i);const c=Ys.of(t,i.getValue(),e,!0);return this.nodeMapByKey.set(t,c),a.push(c),a}return a}has(t){if(this.nodeMapByKey.has(t)){const e=this.nodeMapByKey.get(t);return e!==void 0&&!e.isRemoved()}return!1}get(t){if(this.nodeMapByKey.has(t))return this.nodeMapByKey.get(t).getValue()}deepcopy(){const t=new rs;for(const[,e]of this.nodeMapByKey)t.setInternal(e.getKey(),e.getValue(),e.getUpdatedAt(),e.isRemoved());return t}toJSON(){if(!this.size())return"{}";const t=[];for(const[e,i]of this.nodeMapByKey)i.isRemoved()||t.push(`"${wr(e)}":"${wr(i.getValue())}"`);return`{${t.join(",")}}`}size(){return this.nodeMapByKey.size-this.numberOfRemovedElement}toObject(){const t={};for(const[e,i]of this.nodeMapByKey)i.isRemoved()||(t[e]=i.getValue());return t}*[Symbol.iterator](){for(const[,t]of this.nodeMapByKey)yield t}purge(t){const e=this.nodeMapByKey.get(t.getKey());e==null||e.toIDString()!=t.toIDString()||(this.nodeMapByKey.delete(t.getKey()),this.numberOfRemovedElement--)}}function Yn(n){if(n instanceof Map){const t=Array.from(n);return new Map(JSON.parse(JSON.stringify(t)))}return JSON.parse(JSON.stringify(n))}const E1=n=>n?Object.entries(n).length===0:!0,Vo=n=>{const t={};for(const[e,i]of Object.entries(n))t[e]=JSON.stringify(i);return t},Wi=n=>{const t={};for(const[e,i]of Object.entries(n))t[e]=JSON.parse(i);return t};function I2(n){return n?OS(n.live)+OS(n.gc):0}function OS(n){return n.data+n.meta}function Je(n,...t){for(const e of t)n.data+=e.data,n.meta+=e.meta}function Ro(n,t){n.data-=t.data,n.meta-=t.meta}class Cu{constructor(t){p(this,"attributes");p(this,"content");this.attributes=rs.create(),this.content=t}static create(t){return new Cu(t)}get length(){return this.content.length}substring(t,e){const i=new Cu(this.content.substring(t,e));return i.attributes=this.attributes.deepcopy(),i}setAttr(t,e,i){return this.attributes.set(t,e,i)}getAttrs(){return this.attributes}toString(){return this.content}getDataSize(){const t={data:0,meta:0};t.data+=this.content.length*2;for(const e of this.attributes){const i=e.getDataSize();t.meta+=i.meta,t.data+=i.data}return t}toJSON(){const t=wr(this.content),e=this.attributes.toObject(),i=[];for(const[a,u]of Object.entries(e)){const c=JSON.parse(u),d=typeof c=="string"?`"${wr(a)}":"${wr(c)}"`:`"${wr(a)}":${String(c)}`;i.push(d)}return i.sort(),i.length===0?`{"val":"${t}"}`:`{"attrs":{${i.join(",")}},"val":"${t}"}`}getAttributes(){return this.attributes.toObject()}getContent(){return this.content}purge(t){this.attributes&&t instanceof Ys&&this.attributes.purge(t)}getGCPairs(){const t=[];for(const e of this.attributes)e.getRemovedAt()&&t.push({parent:this,child:e});return t}}class Un extends Hu{constructor(e,i){super(i);p(this,"rgaTreeSplit");this.rgaTreeSplit=e}static create(e,i){return new Un(e,i)}edit(e,i,a,u,c){const d=i?Cu.create(i):void 0;if(d&&u)for(const[S,x]of Object.entries(u))d.setAttr(S,x,a);const[h,g,y,w]=this.rgaTreeSplit.edit(e,a,d,c);return[w.map(S=>({...S,value:S.value?{attributes:Wi(S.value.getAttributes()),content:S.value.getContent()}:{attributes:void 0,content:""},type:"content"})),g,y,[h,h]]}setStyle(e,i,a,u){const c={data:0,meta:0},[,d,h]=this.rgaTreeSplit.findNodeWithSplit(e[1],a),[,g,y]=this.rgaTreeSplit.findNodeWithSplit(e[0],a);Je(c,d,g);const w=[],v=this.rgaTreeSplit.findBetween(y,h),S=[];for(const E of v){const I=E.getCreatedAt().getActorID();let k=yu;u!=null&&(k=u.get(I)?u.get(I):0n),E.canStyle(a,k)&&S.push(E)}const x=[];for(const E of S){if(E.isRemoved())continue;const[I,k]=this.rgaTreeSplit.findIndexesFromRange(E.createPosRange());w.push({type:"style",actor:a.getActorID(),from:I,to:k,value:{attributes:Wi(i)}});for(const[z,N]of Object.entries(i)){const[O]=E.getValue().setAttr(z,N,a);O!==void 0&&x.push({parent:E.getValue(),child:O});const _=E.getValue().getAttrs().getNodeMapByKey().get(z);_!==void 0&&Je(c,_.getDataSize())}}return[x,c,w]}indexRangeToPosRange(e,i){const a=this.rgaTreeSplit.indexToPos(e);return e===i?[a,a]:[a,this.rgaTreeSplit.indexToPos(i)]}get length(){return this.rgaTreeSplit.length}getTreeByIndex(){return this.rgaTreeSplit.getTreeByIndex()}getTreeByID(){return this.rgaTreeSplit.getTreeByID()}getDataSize(){const e={data:0,meta:0};for(const i of this.rgaTreeSplit){if(i.isRemoved())continue;const a=i.getDataSize();e.data+=a.data,e.meta+=a.meta}return{data:e.data,meta:e.meta+this.getMetaUsage()}}toJSON(){const e=[];for(const i of this.rgaTreeSplit)i.isRemoved()||e.push(i.getValue().toJSON());return`[${e.join(",")}]`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:JSON.parse(this.toJSON()),type:"YORKIE_TEXT"}}toString(){return this.rgaTreeSplit.toString()}values(){const e=[];for(const i of this.rgaTreeSplit)if(!i.isRemoved()){const a=i.getValue();e.push({attributes:Wi(a.getAttributes()),content:a.getContent()})}return e}getRGATreeSplit(){return this.rgaTreeSplit}toTestString(){return this.rgaTreeSplit.toTestString()}deepcopy(){const e=new Un(this.rgaTreeSplit.deepcopy(),this.getCreatedAt());return e.remove(this.getRemovedAt()),e}findIndexesFromRange(e){return this.rgaTreeSplit.findIndexesFromRange(e)}getGCPairs(){const e=[];for(const i of this.rgaTreeSplit){i.getRemovedAt()&&e.push({parent:this.rgaTreeSplit,child:i});for(const a of i.getValue().getGCPairs())e.push(a)}return e}}class Vu extends tr{constructor(e,i,a,u,c,d){super(e,d);p(this,"fromPos");p(this,"toPos");p(this,"content");p(this,"attributes");this.fromPos=i,this.toPos=a,this.content=u,this.attributes=c}static create(e,i,a,u,c,d){return new Vu(e,i,a,u,c,d)}execute(e,i,a){const u=e.findByCreatedAt(this.getParentCreatedAt());if(!u)throw new G(V.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(u instanceof Un))throw new G(V.ErrInvalidArgument,"fail to execute, only Text can execute edit");const c=u,[d,h,g]=c.edit([this.fromPos,this.toPos],this.content,this.getExecutedAt(),Object.fromEntries(this.attributes),a);e.acc(g);for(const y of h)e.registerGCPair(y);return{opInfos:d.map(({from:y,to:w,value:v})=>({type:"edit",from:y,to:w,value:v,path:e.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),i=this.fromPos.toTestString(),a=this.toPos.toTestString(),u=this.content;return`${e}.EDIT(${i},${a},${u})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getContent(){return this.content}getAttributes(){return this.attributes||new Map}}class ju extends tr{constructor(e,i,a,u,c){super(e,c);p(this,"fromPos");p(this,"toPos");p(this,"attributes");this.fromPos=i,this.toPos=a,this.attributes=u}static create(e,i,a,u,c){return new ju(e,i,a,u,c)}execute(e,i,a){const u=e.findByCreatedAt(this.getParentCreatedAt());if(!u)throw new G(V.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(u instanceof Un))throw new G(V.ErrInvalidArgument,"fail to execute, only Text can execute edit");const c=u,[d,h,g]=c.setStyle([this.fromPos,this.toPos],this.attributes?Object.fromEntries(this.attributes):{},this.getExecutedAt(),a);e.acc(h);for(const y of d)e.registerGCPair(y);return{opInfos:g.map(({from:y,to:w,value:v})=>({type:"style",from:y,to:w,value:v,path:e.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),i=this.fromPos.toTestString(),a=this.toPos.toTestString(),u=this.attributes;return`${e}.STYL(${i},${a},${JSON.stringify(u)})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getAttributes(){return this.attributes}}const M2=2,R2="root",br="text";function ou(n,t){let e=0;const i=n.children;for(let a=0;a<t;a++){const u=i[a];!u||u.isRemoved||(e+=u.paddedSize)}return e}class B2{constructor(t,e=[]){p(this,"type");p(this,"parent");p(this,"_children");p(this,"size");if(this.type=t,this.size=0,this._children=e,this.isText&&this._children.length>0)throw new G(V.ErrRefused,"Text node cannot have children")}updateAncestorsSize(){let t=this.parent;const e=this.isRemoved?-1:1;for(;t&&(t.size+=this.paddedSize*e,!t.isRemoved);)t=t.parent}updateDescendantsSize(){let t=0;for(const e of this._children){const i=e.updateDescendantsSize();e.isRemoved||(t+=i)}return this.size+=t,this.paddedSize}get isText(){return this.type===br}get paddedSize(){return this.size+(this.isText?0:M2)}isAncestorOf(t){return z2(this,t)}get nextSibling(){const t=this.parent.findOffset(this),e=this.parent.children[t+1];if(e)return e}get prevSibling(){const t=this.parent.findOffset(this),e=this.parent.children[t-1];if(e)return e}splitText(t,e){const i={data:0,meta:0};if(t===0||t===this.size)return[void 0,i];const a=this.value.slice(0,t),u=this.value.slice(t);if(!u.length)return[void 0,i];const c=this.getDataSize();this.value=a;const d=this.cloneText(t+e);return d.value=u,this.parent.insertAfterInternal(d,this),Je(i,this.getDataSize(),d.getDataSize()),Ro(i,c),[d,i]}get children(){return this._children.filter(t=>!t.isRemoved)}get allChildren(){return[...this._children]}hasTextChild(){return this.children.length>0&&this.children.every(t=>t.isText)}getChildrenText(){return this.isText?this.value:this.hasTextChild()?this.children.map(t=>t.value).join(""):""}append(...t){if(this.isText)throw new G(V.ErrRefused,"Text node cannot have children");this._children.push(...t);for(const e of t)e.parent=this,e.updateAncestorsSize()}prepend(...t){if(this.isText)throw new G(V.ErrRefused,"Text node cannot have children");this._children.unshift(...t);for(const e of t)e.parent=this}insertBefore(t,e){if(this.isText)throw new G(V.ErrRefused,"Text node cannot have children");const i=this._children.indexOf(e);if(i===-1)throw new G(V.ErrInvalidArgument,"child not found");this.insertAtInternal(t,i),t.updateAncestorsSize()}insertAfter(t,e){if(this.isText)throw new G(V.ErrRefused,"Text node cannot have children");const i=this._children.indexOf(e);if(i===-1)throw new G(V.ErrInvalidArgument,"child not found");this.insertAtInternal(t,i+1),t.updateAncestorsSize()}insertAt(t,e){if(this.isText)throw new G(V.ErrRefused,"Text node cannot have children");this.insertAtInternal(t,e),t.updateAncestorsSize()}removeChild(t){if(this.isText)throw new G(V.ErrRefused,"Text node cannot have children");const e=this._children.indexOf(t);if(e===-1)throw new G(V.ErrInvalidArgument,"child not found");this._children.splice(e,1),t.parent=void 0}splitElement(t,e){const i={data:0,meta:0},a=this.getDataSize(),u=this.cloneElement(e);this.parent.insertAfterInternal(u,this),u.updateAncestorsSize();const c=this.children.slice(0,t),d=this.children.slice(t);this._children=c,u._children=d,this.size=this._children.reduce((h,g)=>h+g.paddedSize,0),u.size=u._children.reduce((h,g)=>h+g.paddedSize,0);for(const h of u._children)h.parent=u;return Je(i,this.getDataSize(),u.getDataSize()),Ro(i,a),[u,i]}insertAfterInternal(t,e){if(this.isText)throw new G(V.ErrRefused,"Text node cannot have children");const i=this._children.indexOf(e);if(i===-1)throw new G(V.ErrInvalidArgument,"child not found");this.insertAtInternal(t,i+1)}insertAtInternal(t,e){if(this.isText)throw new G(V.ErrRefused,"Text node cannot have children");this._children.splice(e,0,t),t.parent=this}findOffset(t){if(this.isText)throw new G(V.ErrRefused,"Text node cannot have children");if(t.isRemoved){const e=this._children.indexOf(t);return this.allChildren.splice(0,e).filter(a=>!a.isRemoved).length}return this.children.indexOf(t)}findBranchOffset(t){if(this.isText)throw new G(V.ErrRefused,"Text node cannot have children");let e=t;for(;e;){const i=this._children.indexOf(e);if(i!==-1)return i;e=e.parent}return-1}}function z2(n,t){if(n===t)return!1;for(;t.parent;){if(t.parent===n)return!0;t=t.parent}return!1}var ge=(n=>(n.Start="Start",n.End="End",n.Text="Text",n))(ge||{});function N1(n,t,e,i){if(t>e)throw new G(V.ErrInvalidArgument,`from is greater than to: ${t} > ${e}`);if(t>n.size)throw new G(V.ErrInvalidArgument,`from is out of range: ${t} > ${n.size}`);if(e>n.size)throw new G(V.ErrInvalidArgument,`to is out of range: ${e} > ${n.size}`);if(t===e)return;let a=0;for(const u of n.children){if(t-u.paddedSize<a&&a<e){const c=u.isText?t-a:t-a-1,d=u.isText?e-a:e-a-1,h=!u.isText&&c<0,g=!u.isText&&d>u.size;(u.isText||h)&&i([u,u.isText?"Text":"Start"],g),N1(u,Math.max(0,c),Math.min(d,u.size),i),g&&i([u,"End"],g)}a+=u.paddedSize}}function D1(n,t,e=0){for(const i of n.children)D1(i,t,e+1);t(n,e)}function Od(n,t,e=0){for(const i of n._children)Od(i,t,e+1);t(n,e)}function ay(n,t,e=!0){if(t>n.size)throw new G(V.ErrInvalidArgument,`index is out of range: ${t} > ${n.size}`);if(n.isText)return{node:n,offset:t};let i=0,a=0;for(const u of n.children){if(e&&u.isText&&u.size>=t-a)return ay(u,t-a,e);if(t===a)return{node:n,offset:i};if(!e&&u.paddedSize===t-a)return{node:n,offset:i+1};if(u.paddedSize>t-a)return ay(u,t-a-1,e);a+=u.paddedSize,i+=1}return{node:n,offset:i}}function C1(n){return n.isText||n.children.length===0?n:C1(n.children[0])}function L2(n,t){if(n.size<t)throw new G(V.ErrInvalidArgument,"unacceptable path");for(let e=0;e<n.children.length;e++){const i=n.children[e];if(i.size<t)t-=i.size;else{n=i;break}}return{node:n,offset:t}}class _2{constructor(t){p(this,"root");this.root=t}tokensBetween(t,e,i){N1(this.root,t,e,i)}traverse(t){D1(this.root,t,0)}traverseAll(t){Od(this.root,t,0)}findTreePos(t,e=!0){return ay(this.root,t,e)}treePosToPath(t){const e=[];let i=t.node;if(i.isText){const a=i.parent.findOffset(i);if(a===-1)throw new G(V.ErrInvalidArgument,"invalid treePos");const u=ou(i.parent,a);e.push(u+t.offset),i=i.parent}else if(i.hasTextChild()){const a=ou(i,t.offset);e.push(a)}else e.push(t.offset);for(;i.parent;){const a=i.parent.findOffset(i);if(a===-1)throw new G(V.ErrInvalidArgument,"invalid treePos");e.push(a),i=i.parent}return e.reverse()}pathToIndex(t){const e=this.pathToTreePos(t);return this.indexOf(e)}pathToTreePos(t){if(!t.length)throw new G(V.ErrInvalidArgument,"unacceptable path");let e=this.root;for(let i=0;i<t.length-1;i++){const a=t[i];if(e=e.children[a],!e)throw new G(V.ErrInvalidArgument,"unacceptable path")}if(e.hasTextChild())return L2(e,t[t.length-1]);if(e.children.length<t[t.length-1])throw new G(V.ErrInvalidArgument,"unacceptable path");return{node:e,offset:t[t.length-1]}}getRoot(){return this.root}get size(){return this.root.size}findPostorderRight(t){const{node:e,offset:i}=t;if(e.isText){if(e.size===i){const a=e.nextSibling;return a||e.parent}return e}return e.children.length===i?e:C1(e.children[i])}indexOf(t){let{node:e}=t;const{offset:i}=t;let a=0,u=1;if(e.isText){a+=i;const c=e.parent,d=c.findOffset(e);if(d===-1)throw new G(V.ErrInvalidArgument,"invalid pos");a+=ou(c,d),e=e.parent}else a+=ou(e,i);for(;e!=null&&e.parent;){const c=e.parent,d=c.findOffset(e);if(d===-1)throw new G(V.ErrInvalidArgument,"invalid pos");a+=ou(c,d),u++,e=e.parent}return a+u-1}indexToPath(t){const e=this.findTreePos(t);return this.treePosToPath(e)}}const U2=(n,t)=>n===t?0:n<t?-1:1;class q2{constructor(t,e,i){p(this,"key");p(this,"value");p(this,"parent");p(this,"left");p(this,"right");p(this,"isRed");this.key=t,this.value=e,this.isRed=i}}class P2{constructor(t){p(this,"stack");this.stack=[],this.traverseInorder(t)}traverseInorder(t){t&&(this.traverseInorder(t.left),this.stack.push({key:t.key,value:t.value}),this.traverseInorder(t.right))}}class k1{constructor(t){p(this,"root");p(this,"comparator");p(this,"counter");this.comparator=typeof t<"u"?t:U2,this.counter=0}put(t,e){return this.root=this.putInternal(t,e,this.root),this.root.isRed=!1,e}get(t){const e=this.getInternal(t,this.root);return e?e.value:void 0}remove(t){!this.isRed(this.root.left)&&!this.isRed(this.root.right)&&(this.root.isRed=!0),this.root=this.removeInternal(this.root,t),this.root&&(this.root.isRed=!1)}getIterator(){return new P2(this.root)}values(){const t=[];for(const e of this.getIterator().stack)t.push(e.value);return t}floorEntry(t){let e=this.root;for(;e;){const i=this.comparator(t,e.key);if(i>0)if(e.right)e.right.parent=e,e=e.right;else return e;else if(i<0)if(e.left)e.left.parent=e,e=e.left;else{let a=e.parent,u=e;for(;a&&u===a.left;)u=a,a=a.parent;return a}else return e}}lastEntry(){if(!this.root)return this.root;let t=this.root;for(;t.right;)t=t.right;return t}size(){return this.counter}isEmpty(){return this.counter===0}getInternal(t,e){for(;e;){const i=this.comparator(t,e.key);if(i===0)return e;i<0?e=e.left:i>0&&(e=e.right)}}putInternal(t,e,i){if(!i)return this.counter+=1,new q2(t,e,!0);const a=this.comparator(t,i.key);return a<0?i.left=this.putInternal(t,e,i.left):a>0?i.right=this.putInternal(t,e,i.right):i.value=e,this.isRed(i.right)&&!this.isRed(i.left)&&(i=this.rotateLeft(i)),this.isRed(i.left)&&this.isRed(i.left.left)&&(i=this.rotateRight(i)),this.isRed(i.left)&&this.isRed(i.right)&&this.flipColors(i),i}removeInternal(t,e){if(this.comparator(e,t.key)<0)!this.isRed(t.left)&&!this.isRed(t.left.left)&&(t=this.moveRedLeft(t)),t.left=this.removeInternal(t.left,e);else{if(this.isRed(t.left)&&(t=this.rotateRight(t)),this.comparator(e,t.key)===0&&!t.right){this.counter-=1;return}if(!this.isRed(t.right)&&!this.isRed(t.right.left)&&(t=this.moveRedRight(t)),this.comparator(e,t.key)===0){this.counter-=1;const i=this.min(t.right);t.value=i.value,t.key=i.key,t.right=this.removeMin(t.right)}else t.right=this.removeInternal(t.right,e)}return this.fixUp(t)}min(t){return t.left?this.min(t.left):t}removeMin(t){if(t.left)return!this.isRed(t.left)&&!this.isRed(t.left.left)&&(t=this.moveRedLeft(t)),t.left=this.removeMin(t.left),this.fixUp(t)}fixUp(t){return this.isRed(t.right)&&(t=this.rotateLeft(t)),this.isRed(t.left)&&this.isRed(t.left.left)&&(t=this.rotateRight(t)),this.isRed(t.left)&&this.isRed(t.right)&&this.flipColors(t),t}moveRedLeft(t){return this.flipColors(t),this.isRed(t.right.left)&&(t.right=this.rotateRight(t.right),t=this.rotateLeft(t),this.flipColors(t)),t}moveRedRight(t){return this.flipColors(t),this.isRed(t.left.left)&&(t=this.rotateRight(t),this.flipColors(t)),t}isRed(t){return t&&t.isRed}rotateLeft(t){const e=t.right;return t.right=e.left,e.left=t,e.isRed=e.left.isRed,e.left.isRed=!0,e}rotateRight(t){const e=t.left;return t.left=e.right,e.right=t,e.isRed=e.right.isRed,e.right.isRed=!0,e}flipColors(t){t.isRed=!t.isRed,t.left.isRed=!t.left.isRed,t.right.isRed=!t.right.isRed}}class Zn{constructor(t,e){p(this,"parentID");p(this,"leftSiblingID");this.parentID=t,this.leftSiblingID=e}static of(t,e){return new Zn(t,e)}static fromTreePos(t){const{offset:e}=t;let{node:i}=t,a;return i.isText?(i.parent.children[0]===i&&e===0?a=i.parent:a=i,i=i.parent):e===0?a=i:a=i.children[e-1],Zn.of(i.id,Le.of(a.getCreatedAt(),a.getOffset()+e))}getParentID(){return this.parentID}static fromStruct(t){return Zn.of(Le.of(_n.fromStruct(t.parentID.createdAt),t.parentID.offset),Le.of(_n.fromStruct(t.leftSiblingID.createdAt),t.leftSiblingID.offset))}toStruct(){return{parentID:{createdAt:this.getParentID().getCreatedAt().toStruct(),offset:this.getParentID().getOffset()},leftSiblingID:{createdAt:this.getLeftSiblingID().getCreatedAt().toStruct(),offset:this.getLeftSiblingID().getOffset()}}}toTreeNodePair(t){const e=this.getParentID(),i=this.getLeftSiblingID(),a=t.findFloorNode(e);let u=t.findFloorNode(i);if(!a||!u)throw new G(V.ErrRefused,`cannot find node of CRDTTreePos(${e.toTestString()}, ${i.toTestString()})`);return!i.equals(e)&&i.getOffset()>0&&i.getOffset()===u.id.getOffset()&&u.insPrevID&&(u=t.findFloorNode(u.insPrevID)),[a,u]}getLeftSiblingID(){return this.leftSiblingID}equals(t){return this.getParentID().getCreatedAt().equals(t.getParentID().getCreatedAt())&&this.getParentID().getOffset()===t.getParentID().getOffset()&&this.getLeftSiblingID().getCreatedAt().equals(t.getLeftSiblingID().getCreatedAt())&&this.getLeftSiblingID().getOffset()===t.getLeftSiblingID().getOffset()}}class Le{constructor(t,e){p(this,"createdAt");p(this,"offset");this.createdAt=t,this.offset=e}static of(t,e){return new Le(t,e)}static fromStruct(t){return Le.of(_n.fromStruct(t.createdAt),t.offset)}static createComparator(){return(t,e)=>{const i=t.getCreatedAt().compare(e.getCreatedAt());return i!==0?i:t.getOffset()>e.getOffset()?1:t.getOffset()<e.getOffset()?-1:0}}getCreatedAt(){return this.createdAt}equals(t){return this.createdAt.compare(t.createdAt)===0&&this.offset===t.offset}getOffset(){return this.offset}setOffset(t){this.offset=t}toStruct(){return{createdAt:this.createdAt.toStruct(),offset:this.offset}}toIDString(){return`${this.createdAt.toIDString()}:${this.offset}`}toTestString(){return`${this.createdAt.toTestString()}/${this.offset}`}}class gn extends B2{constructor(e,i,a,u,c){super(i);p(this,"id");p(this,"removedAt");p(this,"attrs");p(this,"insPrevID");p(this,"insNextID");p(this,"_value","");this.id=e,this.removedAt=c,u&&(this.attrs=u),typeof a=="string"?this.value=a:Array.isArray(a)&&(this._children=a)}toIDString(){return this.id.toIDString()}getRemovedAt(){return this.removedAt}static create(e,i,a,u){return new gn(e,i,a,u)}deepcopy(){var i;const e=new gn(this.id,this.type);return e.removedAt=this.removedAt,e._value=this._value,e.size=this.size,e.attrs=(i=this.attrs)==null?void 0:i.deepcopy(),e._children=this._children.map(a=>{const u=a.deepcopy();return u.parent=e,u}),e.insPrevID=this.insPrevID,e.insNextID=this.insNextID,e}get value(){if(!this.isText)throw new G(V.ErrInvalidType,`cannot get value of element node: ${this.type}`);return this._value}set value(e){if(!this.isText)throw new G(V.ErrInvalidType,`cannot set value of element node: ${this.type}`);this._value=e,this.size=e.length}get isRemoved(){return!!this.removedAt}remove(e){const i=!this.removedAt;(!this.removedAt||this.removedAt.compare(e)>0)&&(this.removedAt=e),i&&this.updateAncestorsSize()}cloneText(e){return new gn(Le.of(this.id.getCreatedAt(),e),this.type,void 0,void 0,this.removedAt)}cloneElement(e){return new gn(Le.of(e(),0),this.type,void 0,void 0,this.removedAt)}split(e,i,a){const[u,c]=this.isText?this.splitText(i,this.id.getOffset()):this.splitElement(i,a);if(u){if(u.insPrevID=this.id,this.insNextID){const d=e.findFloorNode(this.insNextID);d.insPrevID=u.id,u.insNextID=this.insNextID}this.insNextID=u.id,e.registerNode(u)}return[u,c]}getCreatedAt(){return this.id.getCreatedAt()}getOffset(){return this.id.getOffset()}canDelete(e,i){return this.getCreatedAt().getLamport()<=i&&(!this.removedAt||e.after(this.removedAt))}canStyle(e,i){return this.isText?!1:this.getCreatedAt().getLamport()<=i&&(!this.removedAt||e.after(this.removedAt))}setAttrs(e,i){this.attrs||(this.attrs=new rs);const a=[];for(const[u,c]of Object.entries(e))a.push(this.attrs.set(u,c,i));return a}purge(e){this.attrs&&this.attrs.purge(e)}getDataSize(){const e={data:0,meta:0};if(this.isText&&(e.data+=this.size*2),this.id&&(e.meta+=Sr),this.removedAt&&(e.meta+=Sr),this.attrs)for(const i of this.attrs){if(i.getRemovedAt())continue;const a=i.getDataSize();e.meta+=a.meta,e.data+=a.data}return e}getGCPairs(){const e=[];if(!this.attrs)return e;for(const i of this.attrs)i.getRemovedAt()&&e.push({parent:this,child:i});return e}}function oy(n){var e;if(n.isText){const i=n;return{type:i.type,value:i.value}}const t={type:n.type,children:n.children.map(oy)};return n.attrs&&(t.attributes=Wi((e=n.attrs)==null?void 0:e.toObject())),t}function ky(n){if(n.isText)return n.value;let t="";return n.attrs&&n.attrs.size()&&(t=" "+Array.from(n.attrs).filter(e=>!e.isRemoved()).sort((e,i)=>e.getKey().localeCompare(i.getKey())).map(e=>{const i=JSON.parse(e.getValue());return typeof i=="string"?`${e.getKey()}="${i}"`:`${e.getKey()}="${wr(e.getValue())}"`}).join(" ")),`<${n.type}${t}>${n.children.map(e=>ky(e)).join("")}</${n.type}>`}function O1(n){if(n.isText){const t=n;return{type:t.type,value:t.value,size:t.size,isRemoved:t.isRemoved}}return{type:n.type,children:n.children.map(O1),size:n.size,isRemoved:n.isRemoved}}class qn extends Hu{constructor(e,i){super(i);p(this,"indexTree");p(this,"nodeMapByID");this.indexTree=new _2(e),this.nodeMapByID=new k1(Le.createComparator()),this.indexTree.traverseAll(a=>{this.nodeMapByID.put(a.id,a)})}static create(e,i){return new qn(e,i)}findFloorNode(e){const i=this.nodeMapByID.floorEntry(e);if(!(!i||!i.key.getCreatedAt().equals(e.getCreatedAt())))return i.value}registerNode(e){this.nodeMapByID.put(e.id,e)}findNodesAndSplitText(e,i){let a={data:0,meta:0};const[u,c]=e.toTreeNodePair(this);let d=c;const h=u===d,g=d.parent&&!h?d.parent:u;if(d.isText){const[,y]=d.split(this,e.getLeftSiblingID().getOffset()-d.id.getOffset());a=y}if(i){const y=g.allChildren,w=h?0:y.indexOf(d)+1;for(let v=w;v<y.length;v++){const S=y[v];if(!S.id.getCreatedAt().after(i))break;d=S}}return[[g,d],a]}style(e,i,a,u){const c={data:0,meta:0},[[d,h],g]=this.findNodesAndSplitText(e[0],a),[[y,w],v]=this.findNodesAndSplitText(e[1],a);Je(c,v,g);const S=[],x=i?Wi(i):{},E=[];return this.traverseInPosRange(d,h,y,w,([I,k])=>{var O;const z=I.getCreatedAt().getActorID();let N=yu;if(u!=null&&(N=u.get(z)?u.get(z):0n),I.canStyle(a,N)&&i){const _=I.setAttrs(i,a),J=_.reduce((F,[,nt])=>(nt&&(F[nt.getKey()]=x[nt.getKey()]),F),{}),U=I.parent,W=I.prevSibling||I.parent;Object.keys(J).length>0&&S.push({type:"style",from:this.toIndex(U,W),to:this.toIndex(I,I),fromPath:this.toPath(U,W),toPath:this.toPath(I,I),actor:a.getActorID(),value:J});for(const[F]of _)F&&E.push({parent:I,child:F});for(const[F]of Object.entries(x)){const nt=(O=I.attrs)==null?void 0:O.getNodeMapByKey().get(F);nt!==void 0&&k!==ge.End&&Je(c,nt.getDataSize())}}}),[E,S,c]}removeStyle(e,i,a,u){const c={data:0,meta:0},[[d,h],g]=this.findNodesAndSplitText(e[0],a),[[y,w],v]=this.findNodesAndSplitText(e[1],a);Je(c,v,g);const S=[],x=[];return this.traverseInPosRange(d,h,y,w,([E])=>{const I=E.getCreatedAt().getActorID();let k=yu;if(u!=null&&(k=u.get(I)?u.get(I):0n),E.canStyle(a,k)&&i){E.attrs||(E.attrs=new rs);for(const O of i){const _=E.attrs.remove(O,a);for(const J of _)x.push({parent:E,child:J})}const z=E.parent,N=E.prevSibling||E.parent;S.push({actor:a.getActorID(),type:"removeStyle",from:this.toIndex(z,N),to:this.toIndex(E,E),fromPath:this.toPath(z,N),toPath:this.toPath(E,E),value:i})}}),[x,S,c]}edit(e,i,a,u,c,d){const h={data:0,meta:0},[[g,y],w]=this.findNodesAndSplitText(e[0],u),[[v,S],x]=this.findNodesAndSplitText(e[1],u);Je(h,x,w);const E=this.toIndex(g,y),I=this.toPath(g,y),k=[],z=[],N=[];this.traverseInPosRange(g,y,v,S,([J,U],W)=>{if(U===ge.Start&&!W)for(const ft of J.children)N.push(ft);const F=J.getCreatedAt().getActorID();let nt=yu;d!=null&&(nt=d.get(F)?d.get(F):0n),(J.canDelete(u,nt)||k.includes(J.parent))&&((U===ge.Text||U===ge.Start)&&k.push(J),z.push([J,U]))});const O=this.makeDeletionChanges(z,u),_=[];for(const J of k)J.remove(u),J.isRemoved&&_.push({parent:this,child:J});for(const J of N)J.removedAt||g.append(J);if(a>0){let J=0,U=g,W=y;for(;J<a;)U.split(this,U.findOffset(W)+1,c),W=U,U=U.parent,J++;O.push({type:"content",from:E,to:E,fromPath:I,toPath:I,actor:u.getActorID()})}if(i!=null&&i.length){const J=[];let U=y;for(const W of i)U===g?g.insertAt(W,0):g.insertAfter(W,U),U=W,Od(W,F=>{g.isRemoved?(F.remove(u),_.push({parent:this,child:F})):Je(h,F.getDataSize()),this.nodeMapByID.put(F.id,F)}),W.isRemoved||J.push(W);if(J.length){const W=J.map(F=>oy(F));O.length&&O[O.length-1].from===E?O[O.length-1].value=W:O.push({type:"content",from:E,to:E,fromPath:I,toPath:I,actor:u.getActorID(),value:W})}}return[O,_,h]}editT(e,i,a,u,c){const d=this.findPos(e[0]),h=this.findPos(e[1]);this.edit([d,h],i,a,u,c)}move(e,i,a){throw new G(V.ErrUnimplemented,`not implemented: ${e}, ${i}, ${a}`)}pathToTreePos(e){return this.indexTree.pathToTreePos(e)}purge(e){var u;(u=e.parent)==null||u.removeChild(e),this.nodeMapByID.remove(e.id);const i=e.insPrevID,a=e.insNextID;if(i){const c=this.findFloorNode(i);c.insNextID=a}if(a){const c=this.findFloorNode(a);c.insPrevID=i}e.insPrevID=void 0,e.insNextID=void 0}getGCPairs(){const e=[];return this.indexTree.traverse(i=>{i.getRemovedAt()&&e.push({parent:this,child:i});for(const a of i.getGCPairs())e.push(a)}),e}findPos(e,i=!0){const a=this.indexTree.findTreePos(e,i);return Zn.fromTreePos(a)}pathToPosRange(e){const i=this.pathToIndex(e);return[this.findPos(i),this.findPos(i+1)]}pathToPos(e){const i=this.indexTree.pathToIndex(e);return this.findPos(i)}getRoot(){return this.indexTree.getRoot()}getSize(){return this.indexTree.size}getNodeSize(){return this.nodeMapByID.size()}getIndexTree(){return this.indexTree}toXML(){return ky(this.indexTree.getRoot())}getDataSize(){const e={data:0,meta:0};return this.indexTree.traverse(i=>{if(i.getRemovedAt())return;const a=i.getDataSize();e.data+=a.data,e.meta+=a.meta}),{data:e.data,meta:e.meta+this.getMetaUsage()}}toJSON(){return JSON.stringify(this.getRootTreeNode())}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:JSON.parse(this.toJSON()),type:"YORKIE_TREE"}}toJSInfoForTest(){const e=this.indexTree.getRoot(),i=(a,u=void 0,c=void 0,d=0)=>{var S,x,E,I;let h,g,y;const w=a.isText?{node:a,offset:0}:u&&c?this.toTreePos(u,c):null;w&&(h=this.indexTree.indexOf(w),g=this.indexTree.treePosToPath(w),y=Zn.fromTreePos(w).toStruct());const v={type:a.type,parent:u==null?void 0:u.id.toTestString(),size:a.size,id:a.id.toTestString(),removedAt:(S=a.removedAt)==null?void 0:S.toTestString(),insPrev:(x=a.insPrevID)==null?void 0:x.toTestString(),insNext:(E=a.insNextID)==null?void 0:E.toTestString(),value:a.isText?a.value:void 0,isRemoved:a.isRemoved,children:[],depth:d,attributes:a.attrs?Wi((I=a.attrs)==null?void 0:I.toObject()):void 0,index:h,path:g,pos:y};for(let k=0;k<a.allChildren.length;k++){const z=k===0?a:a.allChildren[k-1];v.children.push(i(a.allChildren[k],a,z,d+1))}return v};return i(e)}getRootTreeNode(){return oy(this.indexTree.getRoot())}toTestTreeNode(){return O1(this.indexTree.getRoot())}toSortedJSON(){return this.toJSON()}deepcopy(){const e=this.getRoot();return new qn(e.deepcopy(),this.getCreatedAt())}toPath(e,i){const a=this.toTreePos(e,i);return a?this.indexTree.treePosToPath(a):[]}toIndex(e,i){const a=this.toTreePos(e,i);return a?this.indexTree.indexOf(a):-1}indexToPath(e){return this.indexTree.indexToPath(e)}pathToIndex(e){return this.indexTree.pathToIndex(e)}indexRangeToPosRange(e){const i=this.findPos(e[0]);return e[0]===e[1]?[i,i]:[i,this.findPos(e[1])]}indexRangeToPosStructRange(e){const[i,a]=e,u=this.findPos(i);return i===a?[u.toStruct(),u.toStruct()]:[u.toStruct(),this.findPos(a).toStruct()]}posRangeToPathRange(e){const[[i,a]]=this.findNodesAndSplitText(e[0]),[[u,c]]=this.findNodesAndSplitText(e[1]);return[this.toPath(i,a),this.toPath(u,c)]}posRangeToIndexRange(e){const[[i,a]]=this.findNodesAndSplitText(e[0]),[[u,c]]=this.findNodesAndSplitText(e[1]);return[this.toIndex(i,a),this.toIndex(u,c)]}traverseInPosRange(e,i,a,u,c){const d=this.toIndex(e,i),h=this.toIndex(a,u);return this.indexTree.tokensBetween(d,h,c)}toTreePos(e,i){if(!e||!i)return;if(e.isRemoved){let u;for(;e.isRemoved;)u=e,e=u.parent;const c=e.findOffset(u);return{node:e,offset:c}}if(e===i)return{node:e,offset:0};let a=e.findOffset(i);if(!i.isRemoved){if(i.isText)return{node:i,offset:i.paddedSize};a++}return{node:e,offset:a}}makeDeletionChanges(e,i){const a=[],u=[];let c=null,d=null;for(let h=0;h<e.length;h++){const g=e[h],y=e[h+1];c||(c=g),d=g;const w=this.findRightToken(g);(!w||!y||w[0]!==y[0]||w[1]!==y[1])&&(u.push([c,d]),c=null,d=null)}for(const h of u){const[g,y]=h,[w,v]=this.findLeftToken(g),[S,x]=y,E=v===ge.Start?w:w.parent,I=x===ge.Start?S:S.parent,k=this.toIndex(E,w),z=this.toIndex(I,S);k<z&&(a.length>0&&k===a[a.length-1].to?(a[a.length-1].to=z,a[a.length-1].toPath=this.toPath(I,S)):a.push({type:"content",from:k,to:z,fromPath:this.toPath(E,w),toPath:this.toPath(I,S),actor:i.getActorID()}))}return a.reverse()}findRightToken([e,i]){if(i===ge.Start){const h=e.allChildren;return h.length>0?[h[0],h[0].isText?ge.Text:ge.Start]:[e,ge.End]}const a=e.parent,u=a.allChildren,c=u.indexOf(e);if(a&&c===u.length-1)return[a,ge.End];const d=u[c+1];return[d,d.isText?ge.Text:ge.Start]}findLeftToken([e,i]){if(i===ge.End){const h=e.allChildren;if(h.length>0){const g=h[h.length-1];return[g,g.isText?ge.Text:ge.End]}return[e,ge.Start]}const a=e.parent,u=a.allChildren,c=u.indexOf(e);if(a&&c===0)return[a,ge.Start];const d=u[c-1];return[d,d.isText?ge.Text:ge.End]}}class Yu extends tr{constructor(e,i,a,u,c,d){super(e,d);p(this,"fromPos");p(this,"toPos");p(this,"contents");p(this,"splitLevel");this.fromPos=i,this.toPos=a,this.contents=u,this.splitLevel=c}static create(e,i,a,u,c,d){return new Yu(e,i,a,u,c,d)}execute(e,i,a){var w;const u=e.findByCreatedAt(this.getParentCreatedAt());if(!u)throw new G(V.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(u instanceof qn))throw new G(V.ErrInvalidArgument,"fail to execute, only Tree can execute edit");const c=this.getExecutedAt(),d=u,[h,g,y]=d.edit([this.fromPos,this.toPos],(w=this.contents)==null?void 0:w.map(v=>v.deepcopy()),this.splitLevel,c,(()=>{let v=c.getDelimiter();return this.contents!==void 0&&(v+=this.contents.length),()=>_n.of(c.getLamport(),++v,c.getActorID())})(),a);e.acc(y);for(const v of g)e.registerGCPair(v);return{opInfos:h.map(({from:v,to:S,value:x,splitLevel:E,fromPath:I,toPath:k})=>({type:"tree-edit",path:e.createPath(this.getParentCreatedAt()),from:v,to:S,value:x,splitLevel:E,fromPath:I,toPath:k}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),i=`${this.fromPos.getLeftSiblingID().getCreatedAt().toTestString()}/${this.fromPos.getLeftSiblingID().getOffset()}`,a=`${this.toPos.getLeftSiblingID().getCreatedAt().toTestString()}/${this.toPos.getLeftSiblingID().getOffset()}`,u=this.contents||[];return`${e}.EDIT(${i},${a},${u.map(c=>ky(c)).join("")})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getContents(){return this.contents}getSplitLevel(){return this.splitLevel}}class Bo{constructor(t){p(this,"vector");this.vector=t||new Map}set(t,e){this.vector.set(t,e)}unset(t){this.vector.delete(t)}get(t){return this.vector.get(t)}maxLamport(){let t=BigInt(0);for(const[,e]of this)e>t&&(t=e);return t}max(t){const e=new Map;for(const[i,a]of t){const u=this.vector.get(i),c=u&&u>a?u:a;e.set(i,c)}for(const[i,a]of this){const u=t.get(i),c=u&&u>a?u:a;e.set(i,c)}return new Bo(e)}afterOrEqual(t){const e=this.vector.get(t.getActorID());return e===void 0?!1:e>=t.getLamport()}deepcopy(){const t=new Map;for(const[e,i]of this.vector)t.set(e,i);return new Bo(t)}filter(t){const e=new Map;for(const[i]of t){const a=this.vector.get(i);a!==void 0&&e.set(i,a)}return new Bo(e)}size(){return this.vector.size}*[Symbol.iterator](){for(const[t,e]of this.vector)yield[t,e]}}const I1=new Bo(new Map);class Gn{constructor(t,e,i,a,u){p(this,"clientSeq");p(this,"serverSeq");p(this,"actor");p(this,"lamport");p(this,"versionVector");this.clientSeq=t,this.serverSeq=u,this.lamport=e,this.versionVector=a,this.actor=i}hasClocks(){return this.versionVector.size()>0&&this.lamport!=iy}static of(t,e,i,a,u){return new Gn(t,e,i,a,u)}next(t=!1){if(t)return new Gn(this.clientSeq+1,this.lamport,this.actor,I1,iy);const e=this.versionVector.deepcopy();return e.set(this.actor,this.lamport+1n),new Gn(this.clientSeq+1,this.lamport+1n,this.actor,e)}syncClocks(t){if(!t.hasClocks())return this;const e=t.lamport>this.lamport?t.lamport+1n:this.lamport+1n,i=this.versionVector.max(t.versionVector),a=new Gn(this.clientSeq,e,this.actor,i);return a.versionVector.set(this.actor,e),a}setClocks(t,e){const i=t>this.lamport?t+1n:this.lamport+1n;e.unset(kd);const a=this.versionVector.max(e);return a.set(this.actor,i),Gn.of(this.clientSeq,i,this.actor,a)}createTimeTicket(t){return _n.of(this.lamport,t,this.actor)}setActor(t){return new Gn(this.clientSeq,this.lamport,t,this.versionVector,this.serverSeq)}setLamport(t){return new Gn(this.clientSeq,t,this.actor,this.versionVector,this.serverSeq)}setVersionVector(t){return new Gn(this.clientSeq,this.lamport,this.actor,t,this.serverSeq)}getClientSeq(){return this.clientSeq}getServerSeq(){return this.serverSeq?this.serverSeq.toString():""}getLamport(){return this.lamport}getLamportAsString(){return this.lamport.toString()}getActorID(){return this.actor}getVersionVector(){return this.versionVector}toTestString(){return`${this.lamport.toString()}:${this.actor.slice(-2)}:${this.clientSeq}`}}const J2=new Gn(0,0n,kd,I1);class jo{constructor({id:t,operations:e,presenceChange:i,message:a}){p(this,"id");p(this,"operations");p(this,"presenceChange");p(this,"message");this.id=t,this.operations=e||[],this.presenceChange=i,this.message=a}static create({id:t,operations:e,presenceChange:i,message:a}){return new jo({id:t,operations:e,presenceChange:i,message:a})}getID(){return this.id}getMessage(){return this.message}hasOperations(){return this.operations.length>0}getOperations(){return this.operations}setActor(t){for(const e of this.operations)e.setActor(t);this.id=this.id.setActor(t)}hasPresenceChange(){return this.presenceChange!==void 0}getPresenceChange(){return this.presenceChange}execute(t,e,i){const a=[],u=[];for(const c of this.operations){const d=c.execute(t,i,this.id.getVersionVector());if(!d)continue;const{opInfos:h,reverseOp:g}=d;a.push(...h),g&&u.unshift(g)}return this.presenceChange&&(this.presenceChange.type===Ar.Put?e.set(this.id.getActorID(),Yn(this.presenceChange.presence)):e.delete(this.id.getActorID())),{opInfos:a,reverseOps:u}}toTestString(){return`${this.operations.map(t=>t.toTestString()).join(",")}`}toStruct(){return{changeID:me.bytesToHex(me.toChangeID(this.getID()).toBinary()),message:this.getMessage(),operations:this.getOperations().map(t=>me.bytesToHex(me.toOperation(t).toBinary())),presenceChange:this.getPresenceChange()}}static fromStruct(t){const{changeID:e,operations:i,presenceChange:a,message:u}=t;return jo.create({id:me.bytesToChangeID(me.hexToBytes(e)),operations:i==null?void 0:i.map(c=>me.bytesToOperation(me.hexToBytes(c))),presenceChange:a,message:u})}}class Id{constructor(t,e,i,a,u,c){p(this,"documentKey");p(this,"checkpoint");p(this,"isRemoved");p(this,"changes");p(this,"snapshot");p(this,"versionVector");this.documentKey=t,this.checkpoint=e,this.isRemoved=i,this.changes=a,this.snapshot=c,this.versionVector=u}static create(t,e,i,a,u,c){return new Id(t,e,i,a,u,c)}getDocumentKey(){return this.documentKey}getCheckpoint(){return this.checkpoint}getIsRemoved(){return this.isRemoved}getChanges(){return this.changes}hasChanges(){return this.changes.length>0}getChangeSize(){return this.changes.length}hasSnapshot(){return!!this.snapshot&&!!this.snapshot.length}getSnapshot(){return this.snapshot}getVersionVector(){return this.versionVector}}class zo{constructor(t,e){p(this,"serverSeq");p(this,"clientSeq");this.serverSeq=t,this.clientSeq=e}static of(t,e){return new zo(t,e)}increaseClientSeq(t){return t===0?this:new zo(this.serverSeq,this.clientSeq+t)}forward(t){if(this.equals(t))return this;const e=this.serverSeq>t.serverSeq?this.serverSeq:t.serverSeq,i=Math.max(this.clientSeq,t.clientSeq);return zo.of(e,i)}getServerSeqAsString(){return this.serverSeq.toString()}getClientSeq(){return this.clientSeq}getServerSeq(){return this.serverSeq}equals(t){return this.clientSeq===t.clientSeq&&this.serverSeq==t.serverSeq}toTestString(){return`serverSeq=${this.serverSeq}, clientSeq=${this.clientSeq}`}}const H2=new zo(0n,0);class xr{constructor(t,e){p(this,"createdAt");p(this,"offset");this.createdAt=t,this.offset=e}static of(t,e){return new xr(t,e)}static fromStruct(t){return xr.of(_n.fromStruct(t.createdAt),t.offset)}getCreatedAt(){return this.createdAt}getOffset(){return this.offset}equals(t){return this.createdAt.compare(t.createdAt)===0&&this.offset===t.offset}hasSameCreatedAt(t){return this.createdAt.compare(t.createdAt)===0}split(t){return new xr(this.createdAt,this.offset+t)}toStruct(){return{createdAt:this.createdAt.toStruct(),offset:this.offset}}toTestString(){return`${this.createdAt.toTestString()}:${this.offset}`}toIDString(){return`${this.createdAt.toIDString()}:${this.offset}`}}const $2=xr.of(Ho,0);class Wn{constructor(t,e){p(this,"id");p(this,"relativeOffset");this.id=t,this.relativeOffset=e}static of(t,e){return new Wn(t,e)}static fromStruct(t){const e=xr.fromStruct(t.id);return Wn.of(e,t.relativeOffset)}getID(){return this.id}getRelativeOffset(){return this.relativeOffset}getAbsoluteID(){return xr.of(this.id.getCreatedAt(),this.id.getOffset()+this.relativeOffset)}toTestString(){return`${this.id.toTestString()}:${this.relativeOffset}`}toStruct(){return{id:this.id.toStruct(),relativeOffset:this.relativeOffset}}equals(t){return this.id.equals(t.id)?this.relativeOffset===t.relativeOffset:!1}}class Ks extends S1{constructor(e,i,a){super(i);p(this,"id");p(this,"removedAt");p(this,"prev");p(this,"next");p(this,"insPrev");p(this,"insNext");this.id=e,this.removedAt=a}static create(e,i){return new Ks(e,i)}static createComparator(){return(e,i)=>{const a=e.getCreatedAt().compare(i.getCreatedAt());return a!==0?a:e.getOffset()>i.getOffset()?1:e.getOffset()<i.getOffset()?-1:0}}getID(){return this.id}getCreatedAt(){return this.id.getCreatedAt()}getLength(){return this.removedAt?0:this.getContentLength()}getContentLength(){return this.value&&this.value.length||0}getPrev(){return this.prev}getNext(){return this.next}getInsPrev(){return this.insPrev}getInsNext(){return this.insNext}getInsPrevID(){return this.insPrev.getID()}setPrev(e){this.prev=e,e&&(e.next=this)}setNext(e){this.next=e,e&&(e.prev=this)}setInsPrev(e){this.insPrev=e,e&&(e.insNext=this)}setInsNext(e){this.insNext=e,e&&(e.insPrev=this)}hasNext(){return!!this.next}hasInsPrev(){return!!this.insPrev}isRemoved(){return!!this.removedAt}getRemovedAt(){return this.removedAt}split(e){return new Ks(this.id.split(e),this.splitValue(e),this.removedAt)}canDelete(e,i){const a=!this.removedAt;return this.getCreatedAt().getLamport()<=i&&(!this.removedAt||e.after(this.removedAt))?a:!1}canStyle(e,i){return this.getCreatedAt().getLamport()<=i&&(!this.removedAt||e.after(this.removedAt))}remove(e){this.removedAt=e}createPosRange(){return[Wn.of(this.id,0),Wn.of(this.id,this.getLength())]}getDataSize(){const e=this.value.getDataSize();return this.id&&(e.meta+=Sr),this.removedAt&&(e.meta+=Sr),e}deepcopy(){return new Ks(this.id,this.value,this.removedAt)}toTestString(){return`${this.id.toTestString()} ${this.value?this.value:""}`}splitValue(e){const i=this.value;return this.value=i.substring(0,e),i.substring(e,i.length)}toIDString(){return this.id.toIDString()}}class Yo{constructor(){p(this,"head");p(this,"treeByIndex");p(this,"treeByID");this.head=Ks.create($2),this.treeByIndex=new Nu,this.treeByID=new k1(Ks.createComparator()),this.treeByIndex.insert(this.head),this.treeByID.put(this.head.getID(),this.head)}static create(){return new Yo}edit(t,e,i,a){const u={data:0,meta:0},[c,d,h]=this.findNodeWithSplit(t[1],e),[g,y,w]=this.findNodeWithSplit(t[0],e);Je(u,d,y);const v=this.findBetween(w,h),[S,x]=this.deleteNodes(v,e,a),E=h?h.getID():c.getID();let I=Wn.of(E,0);if(i){const z=this.posToIndex(g.createPosRange()[1],!0),N=this.insertAfter(g,Ks.create(xr.of(e,0),i));Je(u,N.getDataSize()),S.length&&S[S.length-1].from===z?S[S.length-1].value=i:S.push({actor:e.getActorID(),from:z,to:z,value:i}),I=Wn.of(N.getID(),N.getContentLength())}const k=[];for(const[,z]of x)k.push({parent:this,child:z});return[I,k,u,S]}indexToPos(t){const[e,i]=this.treeByIndex.find(t),a=e;return Wn.of(a.getID(),i)}findIndexesFromRange(t){const[e,i]=t;return[this.posToIndex(e,!1),this.posToIndex(i,!0)]}posToIndex(t,e){const i=t.getAbsoluteID(),a=e?this.findFloorNodePreferToLeft(i):this.findFloorNode(i);if(!a)throw new G(V.ErrInvalidArgument,`the node of the given id should be found: ${i.toTestString()}`);const u=this.treeByIndex.indexOf(a),c=a.isRemoved()?0:i.getOffset()-a.getID().getOffset();return u+c}findNode(t){return this.findFloorNode(t)}get length(){return this.treeByIndex.length}getTreeByIndex(){return this.treeByIndex}getTreeByID(){return this.treeByID}toString(){const t=[];for(const e of this)e.isRemoved()||t.push(e.getValue());return t.join("")}*[Symbol.iterator](){let t=this.head.getNext();for(;t;)yield t,t=t.getNext()}getHead(){return this.head}deepcopy(){const t=new Yo;let e=this.head.getNext(),i=t.head,a;for(;e;){if(a=t.insertAfter(i,e.deepcopy()),e.hasInsPrev()){const u=t.findNode(e.getInsPrevID());a.setInsPrev(u)}i=a,e=e.getNext()}return t}toTestString(){const t=[];let e=this.head;for(;e;)e.isRemoved()?t.push(`{${e.toTestString()}}`):t.push(`[${e.toTestString()}]`),e=e.getNext();return t.join("")}insertAfter(t,e){const i=t.getNext();return e.setPrev(t),i&&i.setPrev(e),this.treeByID.put(e.getID(),e),this.treeByIndex.insertAfter(t,e),e}findNodeWithSplit(t,e){const i=t.getAbsoluteID();let a=this.findFloorNodePreferToLeft(i);const u=i.getOffset()-a.getID().getOffset(),[,c]=this.splitNode(a,u);for(;a.hasNext()&&a.getNext().getCreatedAt().after(e);)a=a.getNext();return[a,c,a.getNext()]}findFloorNodePreferToLeft(t){let e=this.findFloorNode(t);if(!e)throw new G(V.ErrInvalidArgument,`the node of the given id should be found: ${t.toTestString()}`);if(t.getOffset()>0&&e.getID().getOffset()==t.getOffset()){if(!e.hasInsPrev())return e;e=e.getInsPrev()}return e}findFloorNode(t){const e=this.treeByID.floorEntry(t);if(e&&!(!e.key.equals(t)&&!e.key.hasSameCreatedAt(t)))return e.value}findBetween(t,e){const i=[];let a=t;for(;a&&a!==e;)i.push(a),a=a.getNext();return i}splitNode(t,e){const i={data:0,meta:0};if(e>t.getContentLength())throw new G(V.ErrInvalidArgument,"offset should be less than or equal to length");if(e===0)return[t,i];if(e===t.getContentLength())return[t.getNext(),i];const a=t.getDataSize(),u=t.split(e);this.treeByIndex.updateWeight(u),this.insertAfter(t,u);const c=t.getInsNext();return c&&c.setInsPrev(u),u.setInsPrev(t),Je(i,t.getDataSize(),u.getDataSize()),Ro(i,a),[u,i]}deleteNodes(t,e,i){if(!t.length)return[[],new Map];const[a,u]=this.filterNodes(t,e,i),c=new Map,d=this.makeChanges(u,e);for(const h of a)c.set(h.getID().toIDString(),h),h.remove(e);return this.deleteIndexNodes(u),[d,c]}filterNodes(t,e,i){const a=[],u=[],[c,d]=this.findEdgesOfCandidates(t);u.push(c);for(const h of t){const g=h.getCreatedAt().getActorID();let y=yu;i!=null&&(y=i.get(g)?i.get(g):0n),h.canDelete(e,y)?a.push(h):u.push(h)}return u.push(d),[a,u]}findEdgesOfCandidates(t){return[t[0].getPrev(),t[t.length-1].getNext()]}makeChanges(t,e){const i=[];let a,u;for(let c=0;c<t.length-1;c++){const d=t[c],h=t[c+1];d.getNext()!=h&&([a]=this.findIndexesFromRange(d.getNext().createPosRange()),h?[,u]=this.findIndexesFromRange(h.getPrev().createPosRange()):u=this.treeByIndex.length,a<u&&i.push({actor:e.getActorID(),from:a,to:u}))}return i.reverse()}deleteIndexNodes(t){for(let e=0;e<t.length-1;e++){const i=t[e],a=t[e+1];i.getNext()!=a&&this.treeByIndex.deleteRange(i,a)}}purge(t){this.treeByIndex.delete(t),this.treeByID.remove(t.getID());const e=t.getPrev(),i=t.getNext(),a=t.getInsPrev(),u=t.getInsNext();e&&e.setNext(i),i&&i.setPrev(e),t.setPrev(void 0),t.setNext(void 0),a&&a.setInsNext(u),u&&u.setInsPrev(a),t.setInsPrev(void 0),t.setInsNext(void 0)}}const IS=n=>n<0?Math.ceil(n):Math.floor(n);var Er=(n=>(n[n.Int=0]="Int",n[n.Long=1]="Long",n))(Er||{});class yn extends Hu{constructor(e,i,a){super(a);p(this,"valueType");p(this,"value");switch(this.valueType=e,e){case 0:typeof i=="number"?i>Math.pow(2,31)-1||i<-Math.pow(2,31)?this.value=Ut.fromNumber(i).toInt():this.value=IS(i):this.value=i.toInt();break;case 1:typeof i=="number"?this.value=Ut.fromNumber(i):this.value=i;break;default:throw new G(V.ErrUnimplemented,`unimplemented type: ${e}`)}}static create(e,i,a){return new yn(e,i,a)}static valueFromBytes(e,i){switch(e){case 0:return i[0]|i[1]<<8|i[2]<<16|i[3]<<24;case 1:return Ut.fromBytesLE(Array.from(i));default:throw new G(V.ErrUnimplemented,`unimplemented type: ${e}`)}}getDataSize(){return{data:this.valueType===0?4:8,meta:this.getMetaUsage()}}toJSON(){return`${this.value}`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:this.value,type:"YORKIE_COUNTER"}}deepcopy(){const e=yn.create(this.valueType,this.value,this.getCreatedAt());return e.setMovedAt(this.getMovedAt()),e}getType(){return this.valueType}static getCounterType(e){switch(typeof e){case"object":return e instanceof Ut?1:void 0;case"number":return e>Math.pow(2,31)-1||e<-Math.pow(2,31)?1:0;default:return}}static isSupport(e){return!!yn.getCounterType(e)}static isInteger(e){return e%1===0}isNumericType(){const e=this.valueType;return e===0||e===1}getValueType(){return this.valueType}getValue(){return this.value}toBytes(){switch(this.valueType){case 0:{const e=this.value;return new Uint8Array([e&255,e>>8&255,e>>16&255,e>>24&255])}case 1:{const i=this.value.toBytesLE();return Uint8Array.from(i)}default:throw new G(V.ErrUnimplemented,`unimplemented type: ${this.valueType}`)}}increase(e){function i(a){if(!a.isNumericType())throw new TypeError(`Unsupported type of value: ${typeof a.getValue()}`)}return i(this),i(e),this.valueType===1?this.value=this.value.add(e.getValue()):e.getType()===Ae.Long?this.value=this.value+e.getValue().toInt():this.value=Ut.fromNumber(this.value+IS(e.getValue())).toInt(),this}}class Go extends tr{constructor(e,i,a){super(e,a);p(this,"value");this.value=i}static create(e,i,a){return new Go(e,i,a)}execute(e){const i=e.findByCreatedAt(this.getParentCreatedAt());if(!i)throw new G(V.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(i instanceof yn))throw new G(V.ErrInvalidArgument,"fail to execute, only Counter can execute increase");const a=i,u=this.value.deepcopy();return a.increase(u),{opInfos:[{type:"increase",path:e.createPath(this.getParentCreatedAt()),value:u.getValue()}],reverseOp:this.toReverseOperation()}}toReverseOperation(){const e=this.value.deepcopy(),a=e.getType()===Ae.Long?e.getValue().multiply(-1):e.getValue()*-1;return Go.create(this.getParentCreatedAt(),ce.of(a,e.getCreatedAt()))}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.INCREASE.${this.value.toJSON()}`}getValue(){return this.value}}class ts extends tr{constructor(e,i,a,u,c,d){super(e,d);p(this,"fromPos");p(this,"toPos");p(this,"attributes");p(this,"attributesToRemove");this.fromPos=i,this.toPos=a,this.attributes=u,this.attributesToRemove=c}static create(e,i,a,u,c){return new ts(e,i,a,u,[],c)}static createTreeRemoveStyleOperation(e,i,a,u,c){return new ts(e,i,a,new Map,u,c)}execute(e,i,a){const u=e.findByCreatedAt(this.getParentCreatedAt());if(!u)throw new G(V.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(u instanceof qn))throw new G(V.ErrInvalidArgument,"fail to execute, only Tree can execute edit");const c=u;let d,h,g={data:0,meta:0};if(this.attributes.size){const y={};[...this.attributes].forEach(([w,v])=>y[w]=v),[h,d,g]=c.style([this.fromPos,this.toPos],y,this.getExecutedAt(),a)}else{const y=this.attributesToRemove;[h,d,g]=c.removeStyle([this.fromPos,this.toPos],y,this.getExecutedAt(),a)}e.acc(g);for(const y of h)e.registerGCPair(y);return{opInfos:d.map(({from:y,to:w,value:v,fromPath:S,toPath:x})=>({type:"tree-style",from:y,to:w,value:this.attributes.size?{attributes:v}:{attributesToRemove:v},fromPath:S,toPath:x,path:e.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),i=`${this.fromPos.getLeftSiblingID().getCreatedAt().toTestString()}:${this.fromPos.getLeftSiblingID().getOffset()}`,a=`${this.toPos.getLeftSiblingID().getCreatedAt().toTestString()}:${this.toPos.getLeftSiblingID().getOffset()}`;return`${e}.STYLE(${i},${a},${Object.entries(this.attributes||{}).map(([u,c])=>`${u}:"${c}"`).join(" ")})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getAttributes(){return this.attributes}getAttributesToRemove(){return this.attributesToRemove}}function V2(n){const t=new Ny,e=t.data;for(const[i,a]of Object.entries(n))e[i]=JSON.stringify(a);return t}function j2(n){if(n.type===Ar.Put)return new Au({type:Ia.PUT,presence:V2(n.presence)});if(n.type===Ar.Clear)return new Au({type:Ia.CLEAR});throw new G(V.ErrUnimplemented,"unimplemented type")}function Y2(n){return new v1({serverSeq:n.getServerSeq(),clientSeq:n.getClientSeq()})}function M1(n){return new Dd({clientSeq:n.getClientSeq(),lamport:n.getLamport(),actorId:Py(n.getActorID()),versionVector:Oy(n.getVersionVector())})}function At(n){if(n)return new wt({lamport:n.getLamport(),delimiter:n.getDelimiter(),actorId:Py(n.getActorID())})}function Oy(n){if(!n)return;const t=new Cd;for(const[e,i]of n)t.vector[e]=BigInt(i.toString());return t}function R1(n){switch(n){case Ae.Null:return It.NULL;case Ae.Boolean:return It.BOOLEAN;case Ae.Integer:return It.INTEGER;case Ae.Long:return It.LONG;case Ae.Double:return It.DOUBLE;case Ae.String:return It.STRING;case Ae.Bytes:return It.BYTES;case Ae.Date:return It.DATE;default:throw new G(V.ErrInvalidType,`unsupported type: ${n}`)}}function B1(n){switch(n){case Er.Int:return It.INTEGER_CNT;case Er.Long:return It.LONG_CNT;default:throw new G(V.ErrInvalidType,`unsupported type: ${n}`)}}function gm(n){if(n instanceof en)return new En({type:It.JSON_OBJECT,createdAt:At(n.getCreatedAt()),value:G1(n)});if(n instanceof mn)return new En({type:It.JSON_ARRAY,createdAt:At(n.getCreatedAt()),value:TD(n)});if(n instanceof Un)return new En({type:It.TEXT,createdAt:At(n.getCreatedAt())});if(n instanceof ce)return new En({type:R1(n.getType()),createdAt:At(n.getCreatedAt()),value:n.toBytes()});if(n instanceof yn)return new En({type:B1(n.getType()),createdAt:At(n.getCreatedAt()),value:n.toBytes()});if(n instanceof qn)return new En({type:It.TREE,createdAt:At(n.getCreatedAt()),value:ED(n)});throw new G(V.ErrUnimplemented,"unimplemented element")}function G2(n){return new xu({createdAt:At(n.getCreatedAt()),offset:n.getOffset()})}function wf(n){return new ns({createdAt:At(n.getID().getCreatedAt()),offset:n.getID().getOffset(),relativeOffset:n.getRelativeOffset()})}function Sf(n){return new Oa({parentId:pu(n.getParentID()),leftSiblingId:pu(n.getLeftSiblingID())})}function pu(n){return new Gs({createdAt:At(n.getCreatedAt()),offset:n.getOffset()})}function z1(n){const t=new Ey;if(n instanceof Ma){const e=n,i=new jf;i.parentCreatedAt=At(e.getParentCreatedAt()),i.key=e.getKey(),i.value=gm(e.getValue()),i.executedAt=At(e.getExecutedAt()),t.body.case="set",t.body.value=i}else if(n instanceof $u){const e=n,i=new Yf;i.parentCreatedAt=At(e.getParentCreatedAt()),i.prevCreatedAt=At(e.getPrevCreatedAt()),i.value=gm(e.getValue()),i.executedAt=At(e.getExecutedAt()),t.body.case="add",t.body.value=i}else if(n instanceof js){const e=n,i=new Gf;i.parentCreatedAt=At(e.getParentCreatedAt()),i.prevCreatedAt=At(e.getPrevCreatedAt()),i.createdAt=At(e.getCreatedAt()),i.executedAt=At(e.getExecutedAt()),t.body.case="move",t.body.value=i}else if(n instanceof Qs){const e=n,i=new Xf;i.parentCreatedAt=At(e.getParentCreatedAt()),i.createdAt=At(e.getCreatedAt()),i.executedAt=At(e.getExecutedAt()),t.body.case="remove",t.body.value=i}else if(n instanceof Vu){const e=n,i=new Kf;i.parentCreatedAt=At(e.getParentCreatedAt()),i.from=wf(e.getFromPos()),i.to=wf(e.getToPos()),i.content=e.getContent();const a=i.attributes;for(const[u,c]of e.getAttributes())a[u]=c;i.executedAt=At(e.getExecutedAt()),t.body.case="edit",t.body.value=i}else if(n instanceof ju){const e=n,i=new Ff;i.parentCreatedAt=At(e.getParentCreatedAt()),i.from=wf(e.getFromPos()),i.to=wf(e.getToPos());const a=i.attributes;for(const[u,c]of e.getAttributes())a[u]=c;i.executedAt=At(e.getExecutedAt()),t.body.case="style",t.body.value=i}else if(n instanceof Go){const e=n,i=new Zf;i.parentCreatedAt=At(e.getParentCreatedAt()),i.value=gm(e.getValue()),i.executedAt=At(e.getExecutedAt()),t.body.case="increase",t.body.value=i}else if(n instanceof Yu){const e=n,i=new Qf;i.parentCreatedAt=At(e.getParentCreatedAt()),i.from=Sf(e.getFromPos()),i.to=Sf(e.getToPos()),i.contents=tD(e.getContents()),i.splitLevel=e.getSplitLevel(),i.executedAt=At(e.getExecutedAt()),t.body.case="treeEdit",t.body.value=i}else if(n instanceof ts){const e=n,i=new Wf;i.parentCreatedAt=At(e.getParentCreatedAt()),i.from=Sf(e.getFromPos()),i.to=Sf(e.getToPos());const a=e.getAttributesToRemove();if(a.length>0)i.attributesToRemove=a;else{const u=i.attributes;for(const[c,d]of e.getAttributes())u[c]=d}i.executedAt=At(e.getExecutedAt()),t.body.case="treeStyle",t.body.value=i}else throw new G(V.ErrUnimplemented,"unimplemented operation");return t}function X2(n){const t=[];for(const e of n)t.push(z1(e));return t}function K2(n){const t=new y1({id:M1(n.getID()),message:n.getMessage()});return n.hasOperations()&&(t.operations=X2(n.getOperations())),n.hasPresenceChange()&&(t.presenceChange=j2(n.getPresenceChange())),t}function F2(n){const t=[];for(const e of n)t.push(K2(e));return t}function Z2(n){const t=[];for(const e of n)t.push(new p1({key:e.getStrKey(),element:My(e.getValue())}));return t}function Q2(n){const t=[];for(const e of n)t.push(new ad({element:My(e.getValue())}));return t}function W2(n){const t=[];for(const e of n){const i=new od;i.id=G2(e.getID()),i.value=e.getValue().getContent(),i.removedAt=At(e.getRemovedAt());const a=i.attributes,u=e.getValue().getAttrs();for(const c of u){const d=new Jo;d.value=c.getValue(),d.updatedAt=At(c.getUpdatedAt()),a[c.getKey()]=d}t.push(i)}return t}function tD(n){const t=[];if(!n||!n.length)return t;for(const e of n)t.push(new ld({content:Iy(e)}));return t}function eD(n){const t={};for(const e of n)t[e.getKey()]=new Jo({value:e.getValue(),updatedAt:At(e.getUpdatedAt()),isRemoved:e.isRemoved()});return t}function Iy(n){if(!n)return[];const t=[];return Od(n,(e,i)=>{const a=new Tu({id:pu(e.id),type:e.type,removedAt:At(e.removedAt),depth:i});e.isText&&(a.value=e.value),e.insPrevID&&(a.insPrevId=pu(e.insPrevID)),e.insNextID&&(a.insNextId=pu(e.insNextID)),e.attrs&&(a.attributes=eD(e.attrs)),t.push(a)}),t}function nD(n){const t=new nn;return t.body.case="jsonObject",t.body.value=new td({nodes:Z2(n.getRHT()),createdAt:At(n.getCreatedAt()),movedAt:At(n.getMovedAt()),removedAt:At(n.getRemovedAt())}),t}function L1(n){const t=new nn;return t.body.case="jsonArray",t.body.value=new ed({nodes:Q2(n.getElements()),createdAt:At(n.getCreatedAt()),movedAt:At(n.getMovedAt()),removedAt:At(n.getRemovedAt())}),t}function rD(n){const t=new nn;return t.body.case="primitive",t.body.value=new nd({type:R1(n.getType()),value:n.toBytes(),createdAt:At(n.getCreatedAt()),movedAt:At(n.getMovedAt()),removedAt:At(n.getRemovedAt())}),t}function iD(n){const t=new nn;return t.body.case="text",t.body.value=new rd({nodes:W2(n.getRGATreeSplit()),createdAt:At(n.getCreatedAt()),movedAt:At(n.getMovedAt()),removedAt:At(n.getRemovedAt())}),t}function sD(n){const t=new nn;return t.body.case="counter",t.body.value=new id({type:B1(n.getType()),value:n.toBytes(),createdAt:At(n.getCreatedAt()),movedAt:At(n.getMovedAt()),removedAt:At(n.getRemovedAt())}),t}function _1(n){const t=new nn;return t.body.case="tree",t.body.value=new sd({nodes:Iy(n.getRoot()),createdAt:At(n.getCreatedAt()),movedAt:At(n.getMovedAt()),removedAt:At(n.getRemovedAt())}),t}function My(n){if(n instanceof en)return nD(n);if(n instanceof mn)return L1(n);if(n instanceof ce)return rD(n);if(n instanceof Un)return iD(n);if(n instanceof yn)return sD(n);if(n instanceof qn)return _1(n);throw new G(V.ErrUnimplemented,"unimplemented element")}function aD(n){return new ss({documentKey:n.getDocumentKey(),checkpoint:Y2(n.getCheckpoint()),isRemoved:n.getIsRemoved(),changes:F2(n.getChanges()),snapshot:n.getSnapshot(),versionVector:Oy(n.getVersionVector())})}function fu(n){if(!(n instanceof Gt))return{};const t=n.findDetails(T2);for(const e of t)return e.metadata;return{}}function Us(n){return fu(n).code??""}function U1(n){return Gn.of(n.clientSeq,BigInt(n.lamport),Uy(n.actorId),Ry(n.versionVector),BigInt(n.serverSeq))}function Ry(n){if(!n)return;const t=new Bo;return Object.entries(n.vector).forEach(([e,i])=>{t.set(e,BigInt(i.toString()))}),t}function Et(n){if(n)return _n.of(BigInt(n.lamport),n.delimiter,Uy(n.actorId))}function By(n){const t={};return Object.entries(n.data).forEach(([e,i])=>{t[e]=JSON.parse(i)}),t}function oD(n){const t=n.type;if(t===Ia.PUT){const e=By(n.presence);return{type:Ar.Put,presence:e}}if(t===Ia.CLEAR)return{type:Ar.Clear};throw new G(V.ErrInvalidType,`unsupported type: ${t}`)}function lD(n){const t=new Map;return Object.entries(n).forEach(([e,i])=>{t.set(e,By(i))}),t}function q1(n){switch(n){case It.NULL:return Ae.Null;case It.BOOLEAN:return Ae.Boolean;case It.INTEGER:return Ae.Integer;case It.LONG:return Ae.Long;case It.DOUBLE:return Ae.Double;case It.STRING:return Ae.String;case It.BYTES:return Ae.Bytes;case It.DATE:return Ae.Date}throw new G(V.ErrUnimplemented,`unimplemented value type: ${n}`)}function fd(n){switch(n){case It.INTEGER_CNT:return Er.Int;case It.LONG_CNT:return Er.Long}throw new G(V.ErrUnimplemented,`unimplemented value type: ${n}`)}function mm(n){switch(n.type){case It.JSON_OBJECT:return n.value?Y1(n.value):en.create(Et(n.createdAt));case It.JSON_ARRAY:return n.value?xD(n.value):mn.create(Et(n.createdAt));case It.TEXT:return Un.create(Yo.create(),Et(n.createdAt));case It.TREE:return AD(n.value);case It.NULL:case It.BOOLEAN:case It.INTEGER:case It.LONG:case It.DOUBLE:case It.STRING:case It.BYTES:case It.DATE:return ce.of(ce.valueFromBytes(q1(n.type),n.value),Et(n.createdAt));case It.INTEGER_CNT:case It.LONG_CNT:return yn.create(fd(n.type),yn.valueFromBytes(fd(n.type),n.value),Et(n.createdAt))}}function bf(n){return Wn.of(xr.of(Et(n.createdAt),n.offset),n.relativeOffset)}function P1(n){return xr.of(Et(n.createdAt),n.offset)}function uD(n){const t=Cu.create(n.value);Object.entries(n.attributes).forEach(([i,a])=>{t.setAttr(i,a.value,Et(a.updatedAt))});const e=Ks.create(P1(n.id),t);return e.remove(Et(n.removedAt)),e}function No(n){return Zn.of(vu(n.parentId),vu(n.leftSiblingId))}function vu(n){return Le.of(Et(n.createdAt),n.offset)}function cD(n){if(!n.length)return;const t=[];return n.forEach(e=>{const i=zy(e.content);t.push(i)}),t}function zy(n){if(n.length===0)return;const t=[];for(const a of n)t.push(dD(a));const e=t[t.length-1],i=new Map;i.set(n[t.length-1].depth,t[t.length-1]);for(let a=t.length-2;a>=0;a--)i.get(n[a].depth-1).prepend(t[a]),i.set(n[a].depth,t[a]);return e.updateDescendantsSize(),qn.create(e,Ho).getRoot()}function fD(n){const t=rs.create();for(const[e,i]of Object.entries(n))t.setInternal(e,i.value,Et(i.updatedAt),i.isRemoved);return t}function dD(n){const t=vu(n.id),e=gn.create(t,n.type),i=Object.entries(n.attributes);return e.isText?e.value=n.value:i.length&&(e.attrs=fD(n.attributes)),n.insPrevId&&(e.insPrevID=vu(n.insPrevId)),n.insNextId&&(e.insNextID=vu(n.insNextId)),e.removedAt=Et(n.removedAt),e}function J1(n){if(n.body.case==="set"){const t=n.body.value;return Ma.create(t.key,mm(t.value),Et(t.parentCreatedAt),Et(t.executedAt))}else if(n.body.case==="add"){const t=n.body.value;return $u.create(Et(t.parentCreatedAt),Et(t.prevCreatedAt),mm(t.value),Et(t.executedAt))}else if(n.body.case==="move"){const t=n.body.value;return js.create(Et(t.parentCreatedAt),Et(t.prevCreatedAt),Et(t.createdAt),Et(t.executedAt))}else if(n.body.case==="remove"){const t=n.body.value;return Qs.create(Et(t.parentCreatedAt),Et(t.createdAt),Et(t.executedAt))}else if(n.body.case==="edit"){const t=n.body.value,e=new Map;return Object.entries(t.attributes).forEach(([i,a])=>{e.set(i,a)}),Vu.create(Et(t.parentCreatedAt),bf(t.from),bf(t.to),t.content,e,Et(t.executedAt))}else if(n.body.case==="style"){const t=n.body.value,e=new Map;return Object.entries(t.attributes).forEach(([i,a])=>{e.set(i,a)}),ju.create(Et(t.parentCreatedAt),bf(t.from),bf(t.to),e,Et(t.executedAt))}else{if(n.body.case==="select")return;if(n.body.case==="increase"){const t=n.body.value;return Go.create(Et(t.parentCreatedAt),mm(t.value),Et(t.executedAt))}else if(n.body.case==="treeEdit"){const t=n.body.value;return Yu.create(Et(t.parentCreatedAt),No(t.from),No(t.to),cD(t.contents),t.splitLevel,Et(t.executedAt))}else if(n.body.case==="treeStyle"){const t=n.body.value,e=new Map,i=t.attributesToRemove;return(i==null?void 0:i.length)>0?ts.createTreeRemoveStyleOperation(Et(t.parentCreatedAt),No(t.from),No(t.to),i,Et(t.executedAt)):(Object.entries(t.attributes).forEach(([a,u])=>{e.set(a,u)}),ts.create(Et(t.parentCreatedAt),No(t.from),No(t.to),e,Et(t.executedAt)))}else throw new G(V.ErrUnimplemented,"unimplemented operation")}}function hD(n){const t=[];for(const e of n){const i=J1(e);i&&t.push(i)}return t}function H1(n){const t=[];for(const e of n)t.push(jo.create({id:U1(e.id),operations:hD(e.operations),presenceChange:e.presenceChange?oD(e.presenceChange):void 0,message:e.message}));return t}function gD(n){return zo.of(BigInt(n.serverSeq),n.clientSeq)}function mD(n){return Id.create(n.documentKey,gD(n.checkpoint),n.isRemoved,H1(n.changes),Ry(n.versionVector),n.snapshot)}function $1(n){const t=new Eu;for(const i of n.nodes){const a=Ly(i.element);t.set(i.key,a,a.getPositionedAt())}const e=new en(Et(n.createdAt),t);return e.setMovedAt(Et(n.movedAt)),e.setRemovedAt(Et(n.removedAt)),e}function V1(n){const t=new Du;for(const i of n.nodes)t.insert(Ly(i.element));const e=new mn(Et(n.createdAt),t);return e.setMovedAt(Et(n.movedAt)),e.setRemovedAt(Et(n.removedAt)),e}function yD(n){const t=ce.of(ce.valueFromBytes(q1(n.type),n.value),Et(n.createdAt));return t.setMovedAt(Et(n.movedAt)),t.setRemovedAt(Et(n.removedAt)),t}function pD(n){const t=new Yo;let e=t.getHead();for(const a of n.nodes){const u=t.insertAfter(e,uD(a));a.insPrevId&&u.setInsPrev(t.findNode(P1(a.insPrevId))),e=u}const i=new Un(t,Et(n.createdAt));return i.setMovedAt(Et(n.movedAt)),i.setRemovedAt(Et(n.removedAt)),i}function vD(n){const t=yn.create(fd(n.type),yn.valueFromBytes(fd(n.type),n.value),Et(n.createdAt));return t.setMovedAt(Et(n.movedAt)),t.setRemovedAt(Et(n.removedAt)),t}function j1(n){const t=zy(n.nodes);return qn.create(t,Et(n.createdAt))}function Ly(n){if(n.body.case==="jsonObject")return $1(n.body.value);if(n.body.case==="jsonArray")return V1(n.body.value);if(n.body.case==="primitive")return yD(n.body.value);if(n.body.case==="text")return pD(n.body.value);if(n.body.case==="counter")return vD(n.body.value);if(n.body.case==="tree")return j1(n.body.value);throw new G(V.ErrUnimplemented,"unimplemented element")}function wD(n){if(!n)return{root:en.create(Ho),presences:new Map};const t=Rm.fromBinary(n);return{root:Ly(t.root),presences:lD(t.presences)}}function SD(n){const t=Oy(n);return _y(t.toBinary())}function bD(n){const t=qy(n),e=Cd.fromBinary(t);return Ry(e)}function Y1(n){if(!n)throw new G(V.ErrInvalidArgument,"bytes is empty");const t=nn.fromBinary(n);return $1(t.body.value)}function G1(n){return My(n).toBinary()}function xD(n){if(!n)throw new G(V.ErrInvalidArgument,"bytes is empty");const t=nn.fromBinary(n);return V1(t.body.value)}function TD(n){return L1(n).toBinary()}function AD(n){if(!n)throw new G(V.ErrInvalidArgument,"bytes is empty");const t=nn.fromBinary(n);return j1(t.body.value)}function ED(n){return _1(n).toBinary()}function _y(n){return n?Array.from(n).map(t=>t.toString(16).padStart(2,"0")).join(""):""}function Uy(n){return _y(n)}function qy(n){return new Uint8Array(n.match(/.{1,2}/g).map(t=>parseInt(t,16)))}function Py(n){return qy(n)}function ND(n){const t=Dd.fromBinary(n);return U1(t)}function DD(n){const t=Ey.fromBinary(n);return J1(t)}const me={fromPresence:By,toChangePack:aD,fromChangePack:mD,fromChanges:H1,toTreeNodes:Iy,fromTreeNodes:zy,objectToBytes:G1,bytesToObject:Y1,bytesToSnapshot:wD,bytesToHex:_y,hexToBytes:qy,toHexString:Uy,toUint8Array:Py,toOperation:z1,toChangeID:M1,PbChangeID:Dd,bytesToChangeID:ND,bytesToOperation:DD,versionVectorToHex:SD,hexToVersionVector:bD};var Ze=(n=>(n[n.Trivial=0]="Trivial",n[n.Debug=1]="Debug",n[n.Info=2]="Info",n[n.Warn=3]="Warn",n[n.Error=4]="Error",n[n.Fatal=5]="Fatal",n))(Ze||{});let ba=3;function CD(n){ba=n}const xt={trivial:(...n)=>{ba>0||typeof console<"u"&&console.log("YORKIE T:",...n)},debug:(...n)=>{ba>1||typeof console<"u"&&console.log("YORKIE D:",...n)},info:(...n)=>{ba>2||typeof console<"u"&&console.log("YORKIE I:",...n)},warn:(...n)=>{ba>3||typeof console<"u"&&(typeof console.warn<"u"?console.warn("YORKIE W:",...n):console.log("YORKIE W:",...n))},error:(...n)=>{ba>4||typeof console<"u"&&(typeof console.error<"u"?console.error("YORKIE E:",...n):console.log("YORKIE E:",...n))},fatal:(...n)=>{typeof console<"u"&&(typeof console.error<"u"?console.error("YORKIE F:",...n):console.log("YORKIE F:",...n))},isEnabled:n=>ba<=n};function X1(){return"xxxxxxxx-xxxx-4xxxy-xxxx-xxxxxxxxxxx".replace(/[xy]/g,n=>{const t=Math.random()*16|0;return(n==="x"?t:t&3|8).toString(16)})}class kD{constructor(t,e,i,a,u){p(this,"reconnectStreamDelay");p(this,"doc");p(this,"docID");p(this,"syncMode");p(this,"remoteChangeEventReceived");p(this,"watchStream");p(this,"watchLoopTimerID");p(this,"watchAbortController");p(this,"unsubscribeBroadcastEvent");this.reconnectStreamDelay=t,this.doc=e,this.docID=i,this.syncMode=a,this.remoteChangeEventReceived=!1,this.unsubscribeBroadcastEvent=u}changeSyncMode(t){this.syncMode=t}needRealtimeSync(){return this.syncMode===Uf.RealtimeSyncOff?!1:this.syncMode===Uf.RealtimePushOnly?this.doc.hasLocalChanges():this.syncMode!==Uf.Manual&&(this.doc.hasLocalChanges()||this.remoteChangeEventReceived)}async runWatchLoop(t){const e=async()=>{if(this.watchStream)return Promise.resolve();this.watchLoopTimerID&&(clearTimeout(this.watchLoopTimerID),this.watchLoopTimerID=void 0);try{[this.watchStream,this.watchAbortController]=await t(()=>{this.watchStream=void 0,this.watchAbortController=void 0,this.watchLoopTimerID=setTimeout(e,this.reconnectStreamDelay)})}catch{}};await e()}cancelWatchStream(){this.watchStream&&this.watchAbortController&&(this.watchAbortController.abort(),this.watchStream=void 0,this.watchAbortController=void 0),clearTimeout(this.watchLoopTimerID),this.watchLoopTimerID=void 0}}const ym=()=>{};class OD{constructor(t){p(this,"finalized",!1);p(this,"observers",[]);p(this,"finalError");try{t(this)}catch(e){this.error(e)}}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,i){let a;if(!t)throw new G(V.ErrInvalidArgument,"missing observer");if(this.finalized)throw new G(V.ErrRefused,"observable is finalized due to previous error");typeof t=="object"?a=t:a={next:t,error:e,complete:i},a.next===void 0&&(a.next=ym),a.error===void 0&&(a.error=ym),a.complete===void 0&&(a.complete=ym);const u=X1(),c=this.unsubscribeOne.bind(this,u);if(this.observers.push({subscriptionID:u,observer:a}),this.finalized)try{this.finalError?a.error(this.finalError):a.complete()}catch(d){xt.warn(d)}return c}unsubscribeOne(t){var e;this.observers=(e=this.observers)==null?void 0:e.filter(i=>i.subscriptionID!==t)}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){if(this.observers!==void 0&&this.observers[t]!==void 0)try{e(this.observers[t].observer)}catch(i){xt.error(i)}}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.observers=void 0)}}function ID(n){const t=new OD(n);return{subscribe:t.subscribe.bind(t),getProxy:()=>t}}class Oo{constructor(t,e,i,a){p(this,"prevID");p(this,"nextID");p(this,"delimiter");p(this,"message");p(this,"root");p(this,"operations");p(this,"presenceChange");p(this,"previousPresence");p(this,"reversePresenceKeys");this.prevID=t,this.nextID=t.next(),this.delimiter=w1,this.root=e,this.operations=[],this.previousPresence=Yn(i),this.presenceChange=void 0,this.reversePresenceKeys=new Set,this.message=a}static create(t,e,i,a){return new Oo(t,e,i,a)}push(t){this.operations.push(t)}registerElement(t,e){this.root.registerElement(t,e)}registerRemovedElement(t){this.root.registerRemovedElement(t)}registerGCPair(t){this.root.registerGCPair(t)}getNextID(){return this.isPresenceOnlyChange()?this.prevID.next(!0).setLamport(this.prevID.getLamport()).setVersionVector(this.prevID.getVersionVector()):this.nextID}toChange(){const t=this.isPresenceOnlyChange()?this.prevID.next(!0):this.nextID;return jo.create({id:t,operations:this.operations,presenceChange:this.presenceChange,message:this.message})}isPresenceOnlyChange(){return this.operations.length===0}hasChange(){return this.operations.length>0||this.presenceChange!==void 0}setPresenceChange(t){this.presenceChange=t}setReversePresence(t,e){for(const i of Object.keys(t))e!=null&&e.addToHistory?this.reversePresenceKeys.add(i):this.reversePresenceKeys.delete(i)}getReversePresence(){if(this.reversePresenceKeys.size===0)return;const t={};for(const e of this.reversePresenceKeys)t[e]=this.previousPresence[e];return t}issueTimeTicket(){return this.delimiter+=1,this.nextID.createTimeTicket(this.delimiter)}getLastTimeTicket(){return this.nextID.createTimeTicket(this.delimiter)}acc(t){this.root.acc(t)}}class ku{constructor(t){p(this,"rootObject");p(this,"elementPairMapByCreatedAt");p(this,"gcElementSetByCreatedAt");p(this,"gcPairMap");p(this,"docSize");this.rootObject=t,this.elementPairMapByCreatedAt=new Map,this.gcElementSetByCreatedAt=new Set,this.gcPairMap=new Map,this.docSize={live:{data:0,meta:0},gc:{data:0,meta:0}},this.registerElement(t,void 0),t.getDescendants(e=>{if(e.getRemovedAt()&&this.registerRemovedElement(e),e instanceof Un||e instanceof qn)for(const i of e.getGCPairs())this.registerGCPair(i);return!1})}static create(){return new ku(en.create(Ho))}findByCreatedAt(t){const e=this.elementPairMapByCreatedAt.get(t.toIDString());if(e)return e.element}findElementPairByCreatedAt(t){return this.elementPairMapByCreatedAt.get(t.toIDString())}createSubPaths(t){let e=this.elementPairMapByCreatedAt.get(t.toIDString());if(!e)return[];const i=[];for(;e.parent;){const a=e.element.getCreatedAt(),u=e.parent.subPathOf(a);if(u===void 0)throw new G(V.ErrInvalidArgument,`cant find the given element: ${a.toIDString()}`);i.unshift(u),e=this.elementPairMapByCreatedAt.get(e.parent.getCreatedAt().toIDString())}return i.unshift("$"),i}createPath(t){return this.createSubPaths(t).join(".")}registerElement(t,e){this.elementPairMapByCreatedAt.set(t.getCreatedAt().toIDString(),{parent:e,element:t}),Je(this.docSize.live,t.getDataSize()),t instanceof Xs&&t.getDescendants((i,a)=>(this.registerElement(i,a),!1))}deregisterElement(t){let e=0;const i=a=>{const u=a.getCreatedAt().toIDString();Ro(this.docSize.gc,a.getDataSize()),this.elementPairMapByCreatedAt.delete(u),this.gcElementSetByCreatedAt.delete(u),e++};return i(t),t instanceof Xs&&t.getDescendants(a=>(i(a),!1)),e}registerRemovedElement(t){Je(this.docSize.gc,t.getDataSize()),Ro(this.docSize.live,t.getDataSize()),this.docSize.live.meta+=Sr,this.gcElementSetByCreatedAt.add(t.getCreatedAt().toIDString())}registerGCPair(t){if(this.gcPairMap.get(t.child.toIDString())){this.gcPairMap.delete(t.child.toIDString());return}this.gcPairMap.set(t.child.toIDString(),t);const i=this.gcPairMap.get(t.child.toIDString()).child.getDataSize();Je(this.docSize.gc,i),Ro(this.docSize.live,i),t.child instanceof Ys||(this.docSize.live.meta+=Sr)}getElementMapSize(){return this.elementPairMapByCreatedAt.size}getGarbageElementSetSize(){const t=new Set;for(const e of this.gcElementSetByCreatedAt){t.add(e);const i=this.elementPairMapByCreatedAt.get(e);i.element instanceof Xs&&i.element.getDescendants(a=>(t.add(a.getCreatedAt().toIDString()),!1))}return t.size}getObject(){return this.rootObject}getGarbageLen(){return this.getGarbageElementSetSize()+this.gcPairMap.size}getDocSize(){return this.docSize}deepcopy(){return new ku(this.rootObject.deepcopy())}garbageCollect(t){let e=0;for(const i of this.gcElementSetByCreatedAt){const a=this.elementPairMapByCreatedAt.get(i),u=a.element.getRemovedAt();u&&(t!=null&&t.afterOrEqual(u))&&(a.parent.purge(a.element),e+=this.deregisterElement(a.element))}for(const[,i]of this.gcPairMap){const a=i.child.getRemovedAt();a&&(t!=null&&t.afterOrEqual(a))&&(i.parent.purge(i.child),this.gcPairMap.delete(i.child.toIDString()),e+=1)}return e}toJSON(){return this.rootObject.toJSON()}toSortedJSON(){return this.rootObject.toSortedJSON()}getStats(){return{elements:this.getElementMapSize(),gcPairs:this.gcPairMap.size,gcElements:this.getGarbageElementSetSize()}}acc(t){Je(this.docSize.live,t)}}function K1(n,t){const e=new Ou(n);return new Proxy(t,e.getHandlers())}class Ou{constructor(t){p(this,"context");p(this,"handlers");this.context=t,this.handlers={set:(e,i,a)=>(xt.isEnabled(Ze.Trivial)&&xt.trivial(`obj[${i}]=${JSON.stringify(a)}`),Ou.setInternal(t,e,i,a),!0),get:(e,i)=>(xt.isEnabled(Ze.Trivial)&&xt.trivial(`obj[${i}]`),i==="getID"?()=>e.getCreatedAt():i==="toJSON"||i==="toString"?()=>e.toJSON():i==="toJS"?()=>e.toJS():i==="toJSForTest"?()=>e.toJSForTest():xa(t,e.get(i))),ownKeys:e=>e.getKeys(),getOwnPropertyDescriptor:()=>({enumerable:!0,configurable:!0}),deleteProperty:(e,i)=>(xt.isEnabled(Ze.Trivial)&&xt.trivial(`obj[${i}]`),Ou.deleteInternal(t,e,i),!0)}}static setInternal(t,e,i,a){if(i.includes("."))throw new G(V.ErrInvalidObjectKey,"key must not contain the '.'.");const u=t.issueTimeTicket(),c=dd(t,a,u),d=e.set(i,c,u);t.registerElement(c,e),d&&t.registerRemovedElement(d),t.push(Ma.create(i,c.deepcopy(),e.getCreatedAt(),u))}static buildObjectMembers(t,e){const i={};for(const[a,u]of Object.entries(e)){if(a.includes("."))throw new G(V.ErrInvalidObjectKey,"key must not contain the '.'.");const c=t.issueTimeTicket(),d=dd(t,u,c);i[a]=d}return i}static deleteInternal(t,e,i){const a=t.issueTimeTicket(),u=e.deleteByKey(i,a);u&&(t.push(Qs.create(e.getCreatedAt(),u.getCreatedAt(),a)),t.registerRemovedElement(u))}getHandlers(){return this.handlers}}function MD(n,t){const e=new le(n,t);return new Proxy(t,e.getHandlers())}function RD(n){return typeof n=="string"||n instanceof String?!isNaN(n):!1}function BD(n){return["concat","entries","every","filter","find","findIndex","forEach","join","keys","map","reduce","reduceRight","slice","some","toLocaleString","toString","values"].includes(n)}class le{constructor(t,e){p(this,"context");p(this,"handlers");p(this,"array");this.context=t,this.array=e,this.handlers={get:(i,a,u)=>a==="getID"?()=>i.getCreatedAt():a==="getElementByID"?c=>{const d=i.getByID(c);if(!(!d||d.isRemoved()))return Js(t,d)}:a==="getElementByIndex"?c=>{const d=i.get(c);return Js(t,d)}:a==="getLast"?()=>Js(t,i.getLast()):a==="deleteByID"?c=>{const d=le.deleteInternalByID(t,i,c);return Js(t,d)}:a==="insertAfter"?(c,d)=>{const h=le.insertAfterInternal(t,i,c,d);return Js(t,h)}:a==="insertBefore"?(c,d)=>{const h=le.insertBeforeInternal(t,i,c,d);return Js(t,h)}:a==="moveBefore"?(c,d)=>{le.moveBeforeInternal(t,i,c,d)}:a==="moveAfter"?(c,d)=>{le.moveAfterInternal(t,i,c,d)}:a==="moveFront"?c=>{le.moveFrontInternal(t,i,c)}:a==="moveLast"?c=>{le.moveLastInternal(t,i,c)}:RD(a)?xa(t,i.get(Number(a))):a==="push"?c=>le.pushInternal(t,i,c):a==="splice"?(c,d,...h)=>le.splice(t,i,c,d,...h):a==="length"?i.length:typeof a=="symbol"&&a===Symbol.iterator?le.iteratorInternal.bind(this,t,i):a==="includes"?(c,d)=>le.includes(t,i,c,d):a==="indexOf"?(c,d)=>le.indexOf(t,i,c,d):a==="lastIndexOf"?(c,d)=>le.lastIndexOf(t,i,c,d):a==="toJSForTest"?()=>i.toJSForTest():a==="toTestString"?()=>le.toTestString(i):typeof a=="string"&&BD(a)?(...c)=>{const d=Array.from(i).map(h=>xa(t,h));return Array.prototype[a].apply(d,c)}:Reflect.get(i,a,u),deleteProperty:(i,a)=>(xt.isEnabled(Ze.Trivial)&&xt.trivial(`array[${a}]`),le.deleteInternalByIndex(t,i,Number.parseInt(a)),!0)}}static*iteratorInternal(t,e){for(const i of e)yield Js(t,i)}static buildArrayElements(t,e){const i=[];for(const a of e){const u=t.issueTimeTicket(),c=dd(t,a,u);i.push(c)}return i}static pushInternal(t,e,i){return le.insertAfterInternal(t,e,e.getLastCreatedAt(),i),e.length}static moveBeforeInternal(t,e,i,a){const u=t.issueTimeTicket(),c=e.getPrevCreatedAt(i);e.moveAfter(c,a,u),t.push(js.create(e.getCreatedAt(),c,a,u))}static moveAfterInternal(t,e,i,a){const u=t.issueTimeTicket();e.moveAfter(i,a,u),t.push(js.create(e.getCreatedAt(),i,a,u))}static moveFrontInternal(t,e,i){const a=t.issueTimeTicket(),u=e.getHead();e.moveAfter(u.getCreatedAt(),i,a),t.push(js.create(e.getCreatedAt(),u.getCreatedAt(),i,a))}static moveLastInternal(t,e,i){const a=t.issueTimeTicket(),u=e.getLastCreatedAt();e.moveAfter(u,i,a),t.push(js.create(e.getCreatedAt(),u,i,a))}static insertAfterInternal(t,e,i,a){const u=t.issueTimeTicket(),c=dd(t,a,u);return e.insertAfter(i,c),t.registerElement(c,e),t.push($u.create(e.getCreatedAt(),i,c.deepcopy(),u)),c}static insertBeforeInternal(t,e,i,a){return le.insertAfterInternal(t,e,e.getPrevCreatedAt(i),a)}static deleteInternalByIndex(t,e,i){const a=t.issueTimeTicket(),u=e.deleteByIndex(i,a);if(u)return t.push(Qs.create(e.getCreatedAt(),u.getCreatedAt(),a)),t.registerRemovedElement(u),u}static deleteInternalByID(t,e,i){const a=t.issueTimeTicket(),u=e.delete(i,a);return t.push(Qs.create(e.getCreatedAt(),u.getCreatedAt(),a)),t.registerRemovedElement(u),u}static splice(t,e,i,a,...u){const c=e.length,d=i>=0?Math.min(i,c):Math.max(c+i,0),h=a===void 0?c:a<0?d:Math.min(d+a,c),g=[];for(let y=d;y<h;y++){const w=le.deleteInternalByIndex(t,e,d);if(w){const v=w.deepcopy();v.setRemovedAt(),g.push(xa(t,v))}}if(u){let y=d===0?e.getHead().getID():e.get(d-1).getID();for(const w of u)y=le.insertAfterInternal(t,e,y,w).getID()}return g}static includes(t,e,i,a){var d;const u=e.length,c=a===void 0?0:a<0?Math.max(a+u,0):a;if(c>=u)return!1;if(ce.isSupport(i))return Array.from(e).map(g=>xa(t,g)).includes(i,c);for(let h=c;h<u;h++)if(((d=e.get(h))==null?void 0:d.getID())===i.getID())return!0;return!1}static indexOf(t,e,i,a){var d;const u=e.length,c=a===void 0?0:a<0?Math.max(a+u,0):a;if(c>=u)return-1;if(ce.isSupport(i))return Array.from(e).map(g=>xa(t,g)).indexOf(i,c);for(let h=c;h<u;h++)if(((d=e.get(h))==null?void 0:d.getID())===i.getID())return h;return-1}static lastIndexOf(t,e,i,a){var d;const u=e.length,c=a===void 0||a>=u?u-1:a<0?a+u:a;if(c<0)return-1;if(ce.isSupport(i))return Array.from(e).map(g=>xa(t,g)).lastIndexOf(i,c);for(let h=c;h>0;h--)if(((d=e.get(h))==null?void 0:d.getID())===i.getID())return h;return-1}static toTestString(t){return t.toTestString()}getHandlers(){return this.handlers}}class Jy{constructor(t,e){p(this,"context");p(this,"text");this.context=t,this.text=e}initialize(t,e){this.context=t,this.text=e}getID(){return this.text.getID()}edit(t,e,i,a){if(!this.context||!this.text)throw new G(V.ErrNotInitialized,"Text is not initialized yet");if(t>e)throw new G(V.ErrInvalidArgument,"from should be less than or equal to to");const u=this.text.indexRangeToPosRange(t,e);xt.isEnabled(Ze.Debug)&&xt.debug(`EDIT: f:${t}->${u[0].toTestString()}, t:${e}->${u[1].toTestString()} c:${i}`);const c=a?Vo(a):void 0,d=this.context.issueTimeTicket(),[,h,g,y]=this.text.edit(u,i,d,c);this.context.acc(g);for(const w of h)this.context.registerGCPair(w);return this.context.push(new Vu(this.text.getCreatedAt(),u[0],u[1],i,c?new Map(Object.entries(c)):new Map,d)),this.text.findIndexesFromRange(y)}delete(t,e){return this.edit(t,e,"")}empty(){return this.edit(0,this.length,"")}setStyle(t,e,i){if(!this.context||!this.text)throw new G(V.ErrNotInitialized,"Text is not initialized yet");if(t>e)throw new G(V.ErrInvalidArgument,"from should be less than or equal to to");const a=this.text.indexRangeToPosRange(t,e);xt.isEnabled(Ze.Debug)&&xt.debug(`STYL: f:${t}->${a[0].toTestString()}, t:${e}->${a[1].toTestString()} a:${JSON.stringify(i)}`);const u=Vo(i),c=this.context.issueTimeTicket(),[d,h]=this.text.setStyle(a,u,c);this.context.acc(h);for(const g of d)this.context.registerGCPair(g);return this.context.push(new ju(this.text.getCreatedAt(),a[0],a[1],new Map(Object.entries(u)),c)),!0}indexRangeToPosRange(t){if(!this.context||!this.text)throw new G(V.ErrNotInitialized,"Text is not initialized yet");const e=this.text.indexRangeToPosRange(t[0],t[1]);return[e[0].toStruct(),e[1].toStruct()]}posRangeToIndexRange(t){if(!this.context||!this.text)throw new G(V.ErrNotInitialized,"Text is not initialized yet");const e=this.text.findIndexesFromRange([Wn.fromStruct(t[0]),Wn.fromStruct(t[1])]);return[e[0],e[1]]}toTestString(){if(!this.context||!this.text)throw new G(V.ErrNotInitialized,"Text is not initialized yet");return this.text.toTestString()}values(){if(!this.context||!this.text)throw new G(V.ErrNotInitialized,"Text is not initialized yet");return this.text.values()}get length(){return this.text.length}getTreeByIndex(){return this.text.getTreeByIndex()}getTreeByID(){return this.text.getTreeByID()}toString(){if(!this.context||!this.text)throw new G(V.ErrNotInitialized,"Text is not initialized yet");return this.text.toString()}toJSON(){if(!this.context||!this.text)throw new G(V.ErrNotInitialized,"Text is not initialized yet");return this.text.toJSON()}toJSForTest(){if(!this.context||!this.text)throw new G(V.ErrNotInitialized,"Text is not initialized yet");return this.text.toJSForTest()}createRangeForTest(t,e){if(!this.context||!this.text)throw new G(V.ErrNotInitialized,"Text is not initialized yet");return this.text.indexRangeToPosRange(t,e)}}class Hy{constructor(t,e){p(this,"valueType");p(this,"value");p(this,"context");p(this,"counter");this.valueType=t,this.value=e}initialize(t,e){this.valueType=e.getValueType(),this.context=t,this.counter=e,this.value=e.getValue()}getID(){return this.counter.getID()}getValue(){return this.value}getValueType(){return this.valueType}increase(t){if(!this.context||!this.counter)throw new G(V.ErrNotInitialized,"Counter is not initialized yet");const e=this.context.issueTimeTicket(),i=ce.of(t,e);if(!i.isNumericType())throw new TypeError(`Unsupported type of value: ${typeof i.getValue()}`);return this.counter.increase(i),this.context.push(Go.create(this.counter.getCreatedAt(),i,e)),this}toJSForTest(){if(!this.context||!this.counter)throw new G(V.ErrNotInitialized,"Counter is not initialized yet");return this.counter.toJSForTest()}}function $y(n){if(n.isText)return{type:n.type,value:n.value};const t={type:n.type,children:n.children.map(e=>$y(e))};return n.attrs&&(t.attributes=Wi(n.attrs.toObject())),t}function zD(n,t){const e={type:n.isText?n.parent.type:n.type,children:n.isText?n.parent.getChildrenText().length===t?[]:[{type:br,value:n.parent.getChildrenText().slice(t)}]:n.children.slice(t).map(i=>$y(i))};return n.attrs?e.attributes=Wi(n.attrs.toObject()):n.isText&&n.parent.attrs&&(e.attributes=Wi(n.parent.attrs.toObject())),e}function LD(n,t){const{node:e}=n,i=[...t].slice(0,-1),a=e.isText?e.parent.getChildrenText().length:e.children.length,u=[...i,a],c=[...i],d=[];c[c.length-1]+=1,t.every((g,y)=>g===u[y])||d.push({fromPath:[...t],toPath:u});const h=zD(e,t[t.length-1]);return h&&d.push({fromPath:c,toPath:c,content:h}),d}function _D(n,t){const{node:e,offset:i}=n,a=e.children[i],u=e.children[i-1],{children:c}=a,d=[...t].slice(0,-1),h=[{fromPath:[...t],toPath:[...d,i+1]}];if(!a.children.length)return h;const g=[...d,i-1,u.hasTextChild()?u.getChildrenText().length:u.children.length],y=c.map(w=>$y(w));return h.push({fromPath:g,toPath:g,content:y}),h}function Vy(n,t,e){const{type:i}=n,a=e.issueTimeTicket();if(i===br){F1(n);const{value:u}=n,c=gn.create(Le.of(a,0),i,u);t.append(c)}else{const{children:u=[]}=n,{attributes:c}=n;let d;if(typeof c=="object"&&!E1(c)){const g=Vo(c);d=new rs;for(const[y,w]of Object.entries(g))d.set(y,w,a)}const h=gn.create(Le.of(a,0),i,void 0,d);t.append(h);for(const g of u)Vy(g,h,e)}}function UD(n,t){const{type:e}=t,i=n.issueTimeTicket();let a;if(t.type===br){const{value:u}=t;a=gn.create(Le.of(i,0),e,u)}else if(t){const{children:u=[]}=t,{attributes:c}=t;let d;if(typeof c=="object"&&!E1(c)){const h=Vo(c);d=new rs;for(const[g,y]of Object.entries(h))d.set(g,y,i)}a=gn.create(Le.of(n.issueTimeTicket(),0),e,void 0,d);for(const h of u)Vy(h,a,n)}return a}function F1(n){if(!n.value.length)throw new G(V.ErrInvalidArgument,"text node cannot have empty value");return!0}function MS(n){if(!n.length)return!0;if(n[0].type===br)for(const e of n){const{type:i}=e;if(i!==br)throw new G(V.ErrInvalidArgument,"element node and text node cannot be passed together");F1(e)}else for(const e of n){const{type:i}=e;if(i===br)throw new G(V.ErrInvalidArgument,"element node and text node cannot be passed together")}return!0}class jy{constructor(t){p(this,"initialRoot");p(this,"context");p(this,"tree");this.initialRoot=t}initialize(t,e){this.context=t,this.tree=e}getID(){return this.tree.getID()}buildRoot(t){if(!this.initialRoot)return gn.create(Le.of(t.issueTimeTicket(),0),R2);const e=gn.create(Le.of(t.issueTimeTicket(),0),this.initialRoot.type);for(const i of this.initialRoot.children)Vy(i,e,t);return e}getSize(){if(!this.context||!this.tree)throw new G(V.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getSize()}getNodeSize(){if(!this.context||!this.tree)throw new G(V.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getNodeSize()}getIndexTree(){if(!this.context||!this.tree)throw new G(V.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getIndexTree()}splitByPath(t){if(!this.context||!this.tree)throw new G(V.ErrNotInitialized,"Tree is not initialized yet");if(!t.length)throw new G(V.ErrInvalidArgument,"path should not be empty");const e=this.tree.pathToTreePos(t),i=LD(e,t);for(const a of i){const{fromPath:u,toPath:c,content:d}=a,h=this.tree.pathToPos(u),g=this.tree.pathToPos(c);this.editInternal(h,g,d?[d]:[],0)}}mergeByPath(t){if(!this.context||!this.tree)throw new G(V.ErrNotInitialized,"Tree is not initialized yet");if(!t.length)throw new G(V.ErrInvalidArgument,"path should not be empty");const e=this.tree.pathToTreePos(t);if(e.node.isText)throw new G(V.ErrInvalidArgument,"text node cannot be merged");const i=_D(e,t);for(const a of i){const{fromPath:u,toPath:c,content:d}=a,h=this.tree.pathToPos(u),g=this.tree.pathToPos(c);this.editInternal(h,g,d??[],0)}}styleByPath(t,e){if(!this.context||!this.tree)throw new G(V.ErrNotInitialized,"Tree is not initialized yet");if(!t.length)throw new G(V.ErrInvalidArgument,"path should not be empty");const[i,a]=this.tree.pathToPosRange(t),u=this.context.issueTimeTicket(),c=e?Vo(e):void 0,[d,,h]=this.tree.style([i,a],c,u);this.context.acc(h);for(const g of d)this.context.registerGCPair(g);this.context.push(ts.create(this.tree.getCreatedAt(),i,a,c?new Map(Object.entries(c)):new Map,u))}style(t,e,i){if(!this.context||!this.tree)throw new G(V.ErrNotInitialized,"Tree is not initialized yet");if(t>e)throw new G(V.ErrInvalidArgument,"from should be less than or equal to to");const a=this.tree.findPos(t),u=this.tree.findPos(e),c=this.context.issueTimeTicket(),d=i?Vo(i):void 0,[h,,g]=this.tree.style([a,u],d,c);this.context.acc(g);for(const y of h)this.context.registerGCPair(y);this.context.push(ts.create(this.tree.getCreatedAt(),a,u,d?new Map(Object.entries(d)):new Map,c))}removeStyle(t,e,i){if(!this.context||!this.tree)throw new G(V.ErrNotInitialized,"Tree is not initialized yet");if(t>e)throw new G(V.ErrInvalidArgument,"from should be less than or equal to to");const a=this.tree.findPos(t),u=this.tree.findPos(e),c=this.context.issueTimeTicket(),[d,,h]=this.tree.removeStyle([a,u],i,c);this.context.acc(h);for(const g of d)this.context.registerGCPair(g);this.context.push(ts.createTreeRemoveStyleOperation(this.tree.getCreatedAt(),a,u,i,c))}editInternal(t,e,i,a=0){var g;if(i.length!==0&&i[0]&&(MS(i),i[0].type!==br))for(const y of i){const{children:w=[]}=y;MS(w)}const u=this.context.getLastTimeTicket();let c=new Array;if(((g=i[0])==null?void 0:g.type)===br){let y="";for(const w of i){const{value:v}=w;y+=v}c.push(gn.create(Le.of(this.context.issueTimeTicket(),0),br,y))}else c=i.map(y=>y&&UD(this.context,y)).filter(y=>y);const[,d,h]=this.tree.edit([t,e],c.length?c.map(y=>y==null?void 0:y.deepcopy()):void 0,a,u,()=>this.context.issueTimeTicket());this.context.acc(h);for(const y of d)this.context.registerGCPair(y);return this.context.push(Yu.create(this.tree.getCreatedAt(),t,e,c.length?c:void 0,a,u)),!0}editByPath(t,e,i,a=0){if(!this.context||!this.tree)throw new G(V.ErrNotInitialized,"Tree is not initialized yet");if(t.length!==e.length)throw new G(V.ErrInvalidArgument,"path length should be equal");if(!t.length||!e.length)throw new G(V.ErrInvalidArgument,"path should not be empty");const u=this.tree.pathToPos(t),c=this.tree.pathToPos(e);return this.editInternal(u,c,i?[i]:[],a)}editBulkByPath(t,e,i,a=0){if(!this.context||!this.tree)throw new G(V.ErrNotInitialized,"Tree is not initialized yet");if(t.length!==e.length)throw new G(V.ErrInvalidArgument,"path length should be equal");if(!t.length||!e.length)throw new G(V.ErrInvalidArgument,"path should not be empty");const u=this.tree.pathToPos(t),c=this.tree.pathToPos(e);return this.editInternal(u,c,i,a)}edit(t,e,i,a=0){if(!this.context||!this.tree)throw new G(V.ErrNotInitialized,"Tree is not initialized yet");if(t>e)throw new G(V.ErrInvalidArgument,"from should be less than or equal to to");const u=this.tree.findPos(t),c=this.tree.findPos(e);return this.editInternal(u,c,i?[i]:[],a)}editBulk(t,e,i,a=0){if(!this.context||!this.tree)throw new G(V.ErrNotInitialized,"Tree is not initialized yet");if(t>e)throw new G(V.ErrInvalidArgument,"from should be less than or equal to to");const u=this.tree.findPos(t),c=this.tree.findPos(e);return this.editInternal(u,c,i,a)}toXML(){if(!this.context||!this.tree)throw new G(V.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toXML()}toJSON(){if(!this.context||!this.tree)throw new G(V.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toJSON()}toJSForTest(){if(!this.context||!this.tree)throw new G(V.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toJSForTest()}toJSInfoForTest(){if(!this.context||!this.tree)throw new G(V.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toJSInfoForTest()}getRootTreeNode(){if(!this.context||!this.tree)throw new G(V.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getRootTreeNode()}indexToPath(t){if(!this.context||!this.tree)throw new G(V.ErrNotInitialized,"Tree is not initialized yet");return this.tree.indexToPath(t)}pathToIndex(t){if(!this.context||!this.tree)throw new G(V.ErrNotInitialized,"Tree is not initialized yet");return this.tree.pathToIndex(t)}pathRangeToPosRange(t){if(!this.context||!this.tree)throw new G(V.ErrNotInitialized,"Tree is not initialized yet");const e=[this.tree.pathToIndex(t[0]),this.tree.pathToIndex(t[1])],i=this.tree.indexRangeToPosRange(e);return[i[0].toStruct(),i[1].toStruct()]}indexRangeToPosRange(t){if(!this.context||!this.tree)throw new G(V.ErrNotInitialized,"Tree is not initialized yet");return this.tree.indexRangeToPosStructRange(t)}posRangeToIndexRange(t){if(!this.context||!this.tree)throw new G(V.ErrNotInitialized,"Tree is not initialized yet");const e=[Zn.fromStruct(t[0]),Zn.fromStruct(t[1])];return this.tree.posRangeToIndexRange(e)}posRangeToPathRange(t){if(!this.context||!this.tree)throw new G(V.ErrNotInitialized,"Tree is not initialized yet");const e=[Zn.fromStruct(t[0]),Zn.fromStruct(t[1])];return this.tree.posRangeToPathRange(e)}}function RS(n,t){return K1(n,t)}function Js(n,t){if(t){if(t instanceof ce)return t;if(t instanceof en)return K1(n,t);if(t instanceof mn)return MD(n,t);if(t instanceof Un)return new Jy(n,t);if(t instanceof yn){const e=new Hy(Er.Int,0);return e.initialize(n,t),e}else if(t instanceof qn){const e=new jy;return e.initialize(n,t),e}}else return;throw new TypeError(`Unsupported type of element: ${typeof t}`)}function xa(n,t){const e=Js(n,t);return e instanceof ce?e.getValue():e}function dd(n,t,e){let i;if(ce.isSupport(t))i=ce.of(t,e);else if(Array.isArray(t))i=mn.create(e,le.buildArrayElements(n,t));else if(typeof t=="object")t instanceof Jy?(i=Un.create(Yo.create(),e),t.initialize(n,i)):t instanceof Hy?(i=yn.create(t.getValueType(),t.getValue(),e),t.initialize(n,i)):t instanceof jy?(i=qn.create(t.buildRoot(n),e),t.initialize(n,i)):i=en.create(e,Ou.buildObjectMembers(n,t));else throw new TypeError(`Unsupported type of value: ${typeof t}`);return i}class pm{constructor(t,e){p(this,"context");p(this,"presence");this.context=t,this.presence=e}set(t,e){for(const i of Object.keys(t))this.presence[i]=t[i];this.context.setPresenceChange({type:Ar.Put,presence:Yn(this.presence)}),this.context.setReversePresence(t,e)}get(t){return this.presence[t]}clear(){this.presence={},this.context.setPresenceChange({type:Ar.Clear})}}const BS=50;class qD{constructor(){p(this,"undoStack",[]);p(this,"redoStack",[])}hasUndo(){return this.undoStack.length>0}hasRedo(){return this.redoStack.length>0}pushUndo(t){this.undoStack.length>=BS&&this.undoStack.shift(),this.undoStack.push(t)}popUndo(){return this.undoStack.pop()}pushRedo(t){this.redoStack.length>=BS&&this.redoStack.shift(),this.redoStack.push(t)}popRedo(){return this.redoStack.pop()}clearRedo(){this.redoStack=[]}getUndoStackForTest(){return this.undoStack}getRedoStackForTest(){return this.redoStack}}const PD="yorkie-devtools-panel",JD="yorkie-devtools-sdk";function HD(n){return[ze.StatusChanged,ze.Snapshot,ze.LocalChange,ze.RemoteChange,ze.Initialized,ze.Watched,ze.Unwatched,ze.PresenceChanged].includes(n.type)}function $D(n){return n.every(HD)}let Co="disconnected";const zS=new Map,_f=new Map;typeof window<"u"&&(window.docEventsForReplayByDocKey=_f);function xf(n,t){(t!=null&&t.force||Co!=="disconnected")&&window.postMessage({source:JD,...n},"*")}function VD(n){if(!n.isEnableDevtools()||typeof window>"u"||zS.has(n.getKey()))return;_f.set(n.getKey(),[]);const t=n.subscribe("all",e=>{$D(e)&&(_f.get(n.getKey()).push(e),Co==="synced"&&xf({msg:"doc::sync::partial",docKey:n.getKey(),event:e}))});zS.set(n.getKey(),[t]),xf({msg:"refresh-devtools"},{force:!0}),window.addEventListener("message",e=>{var a;if(((a=e.data)==null?void 0:a.source)!==PD)return;switch(e.data.msg){case"devtools::connect":if(Co!=="disconnected")break;Co="connected",xf({msg:"doc::available",docKey:n.getKey()}),xt.info(`[YD] Devtools connected. Doc: ${n.getKey()}`);break;case"devtools::disconnect":Co="disconnected",xt.info(`[YD] Devtools disconnected. Doc: ${n.getKey()}`);break;case"devtools::subscribe":Co="synced",xf({msg:"doc::sync::full",docKey:n.getKey(),events:_f.get(n.getKey())}),xt.info(`[YD] Devtools subscribed. Doc: ${n.getKey()}`);break}})}var Hs=(n=>(n.Detached="detached",n.Attached="attached",n.Removed="removed",n))(Hs||{}),ze=(n=>(n.StatusChanged="status-changed",n.ConnectionChanged="connection-changed",n.SyncStatusChanged="sync-status-changed",n.Snapshot="snapshot",n.LocalChange="local-change",n.RemoteChange="remote-change",n.Initialized="initialized",n.Watched="watched",n.Unwatched="unwatched",n.PresenceChanged="presence-changed",n.Broadcast="broadcast",n.LocalBroadcast="local-broadcast",n.AuthError="auth-error",n))(ze||{}),hd=(n=>(n.Connected="connected",n.Disconnected="disconnected",n))(hd||{}),ly=(n=>(n.Synced="synced",n.SyncFailed="sync-failed",n))(ly||{});class Z1{constructor(t,e){p(this,"key");p(this,"status");p(this,"opts");p(this,"changeID");p(this,"checkpoint");p(this,"localChanges");p(this,"maxSizeLimit");p(this,"root");p(this,"clone");p(this,"eventStream");p(this,"eventStreamObserver");p(this,"onlineClients");p(this,"presences");p(this,"history");p(this,"internalHistory");p(this,"isUpdating");this.opts=e||{},this.key=t,this.status="detached",this.root=ku.create(),this.changeID=J2,this.checkpoint=H2,this.localChanges=[],this.maxSizeLimit=0,this.eventStream=ID(i=>{this.eventStreamObserver=i}),this.onlineClients=new Set,this.presences=new Map,this.isUpdating=!1,this.internalHistory=new qD,this.history={canUndo:this.canUndo.bind(this),canRedo:this.canRedo.bind(this),undo:this.undo.bind(this),redo:this.redo.bind(this)},VD(this)}update(t,e){var c;if(this.getStatus()==="removed")throw new G(V.ErrDocumentRemoved,`${this.key} is removed`);this.ensureClone();const i=this.changeID.getActorID(),a=Oo.create(this.changeID,this.clone.root,this.clone.presences.get(i)||{},e);try{const d=RS(a,this.clone.root.getObject());this.presences.has(i)||this.clone.presences.set(i,{}),this.isUpdating=!0,t(d,new pm(a,this.clone.presences.get(i)))}catch(d){throw this.clone=void 0,d}finally{this.isUpdating=!1}const u=I2((c=this.clone)==null?void 0:c.root.getDocSize());if(!a.isPresenceOnlyChange()&&this.maxSizeLimit>0&&this.maxSizeLimit<u)throw this.clone=void 0,new G(V.ErrDocumentSizeExceedsLimit,`document size exceeded: ${u} > ${this.maxSizeLimit}`);if(a.hasChange()){xt.isEnabled(Ze.Trivial)&&xt.trivial(`trying to update a local change: ${this.toJSON()}`);const d=a.toChange(),{opInfos:h,reverseOps:g}=d.execute(this.root,this.presences,te.Local),y=a.getReversePresence();y&&g.push({type:"presence",value:y}),this.localChanges.push(d),g.length>0&&this.internalHistory.pushUndo(g),h.length>0&&this.internalHistory.clearRedo(),this.changeID=a.getNextID();const w=[];h.length>0&&w.push({type:"local-change",source:te.Local,value:{message:d.getMessage()||"",operations:h,actor:i,clientSeq:d.getID().getClientSeq(),serverSeq:d.getID().getServerSeq()},rawChange:this.isEnableDevtools()?d.toStruct():void 0}),d.hasPresenceChange()&&w.push({type:"presence-changed",source:te.Local,value:{clientID:i,presence:this.getPresence(i)}}),this.publish(w),xt.isEnabled(Ze.Trivial)&&xt.trivial(`after update a local change: ${this.toJSON()}`)}}subscribe(t,e,i,a){if(typeof t=="string"){if(typeof e!="function")throw new G(V.ErrInvalidArgument,"Second argument must be a callback function");if(t==="presence"){const d=e;return this.eventStream.subscribe(h=>{for(const g of h)g.type!=="initialized"&&g.type!=="watched"&&g.type!=="unwatched"&&g.type!=="presence-changed"||d(g)},i,a)}if(t==="my-presence"){const d=e;return this.eventStream.subscribe(h=>{for(const g of h)g.type!=="initialized"&&g.type!=="presence-changed"||g.type==="presence-changed"&&g.value.clientID!==this.changeID.getActorID()||d(g)},i,a)}if(t==="others"){const d=e;return this.eventStream.subscribe(h=>{for(const g of h)g.type!=="watched"&&g.type!=="unwatched"&&g.type!=="presence-changed"||g.value.clientID!==this.changeID.getActorID()&&d(g)},i,a)}if(t==="connection"){const d=e;return this.eventStream.subscribe(h=>{for(const g of h)g.type==="connection-changed"&&d(g)},i,a)}if(t==="status"){const d=e;return this.eventStream.subscribe(h=>{for(const g of h)g.type==="status-changed"&&d(g)},i,a)}if(t==="sync"){const d=e;return this.eventStream.subscribe(h=>{for(const g of h)g.type==="sync-status-changed"&&d(g)},i,a)}if(t==="local-broadcast"){const d=e;return this.eventStream.subscribe(h=>{for(const g of h)g.type==="local-broadcast"&&d(g)},i)}if(t==="broadcast"){const d=e;return this.eventStream.subscribe(h=>{for(const g of h)g.type==="broadcast"&&d(g)},i)}if(t==="auth-error"){const d=e;return this.eventStream.subscribe(h=>{for(const g of h)g.type==="auth-error"&&d(g)},i)}if(t==="all"){const d=e;return this.eventStream.subscribe(d,i,a)}const u=t,c=e;return this.eventStream.subscribe(d=>{for(const h of d){if(h.type!=="local-change"&&h.type!=="remote-change")continue;const g=[];for(const y of h.value.operations)this.isSameElementOrChildOf(y.path,u)&&g.push(y);g.length&&c({...h,value:{...h.value,operations:g}})}},i,a)}if(typeof t=="function"){const u=t,c=e,d=i;return this.eventStream.subscribe(h=>{for(const g of h)g.type!=="snapshot"&&g.type!=="local-change"&&g.type!=="remote-change"||u(g)},c,d)}throw new G(V.ErrInvalidArgument,`"${t}" is not a valid`)}publish(t){this.eventStreamObserver&&this.eventStreamObserver.next(t)}isSameElementOrChildOf(t,e){if(e===t)return!0;const i=t.split(".");return e.split(".").every((u,c)=>u===i[c])}removePushedLocalChanges(t){for(;this.localChanges.length&&!(this.localChanges[0].getID().getClientSeq()>t);)this.localChanges.shift()}applyChangePack(t){const e=t.hasSnapshot();e?this.applySnapshot(t.getCheckpoint().getServerSeq(),t.getVersionVector(),t.getSnapshot(),t.getCheckpoint().getClientSeq()):(this.applyChanges(t.getChanges(),te.Remote),this.removePushedLocalChanges(t.getCheckpoint().getClientSeq())),this.checkpoint=this.checkpoint.forward(t.getCheckpoint()),e||this.garbageCollect(t.getVersionVector()),t.getIsRemoved()&&this.applyStatus("removed"),xt.isEnabled(Ze.Trivial)&&xt.trivial(`${this.root.toJSON()}`)}getCheckpoint(){return this.checkpoint}getChangeID(){return this.changeID}hasLocalChanges(){return this.localChanges.length>0}ensureClone(){this.clone||(this.clone={root:this.root.deepcopy(),presences:Yn(this.presences)})}createChangePack(){const t=Array.from(this.localChanges),e=this.checkpoint.increaseClientSeq(t.length);return Id.create(this.key,e,!1,t,this.getVersionVector())}setActor(t){for(const e of this.localChanges)e.setActor(t);this.changeID=this.changeID.setActor(t)}isEnableDevtools(){return!!this.opts.enableDevtools}getKey(){return this.key}getStatus(){return this.status}getClone(){return this.clone}getCloneRoot(){if(this.clone)return this.clone.root.getObject()}getRoot(){this.ensureClone();const t=Oo.create(this.changeID.next(),this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});return RS(t,this.clone.root.getObject())}getDocSize(){return this.root.getDocSize()}getMaxSizePerDocument(){return this.maxSizeLimit}setMaxSizePerDocument(t){this.maxSizeLimit=t}garbageCollect(t){return this.opts.disableGC?0:(this.clone&&this.clone.root.garbageCollect(t),this.root.garbageCollect(t))}getRootObject(){return this.root.getObject()}getGarbageLen(){return this.root.getGarbageLen()}getGarbageLenFromClone(){return this.clone.root.getGarbageLen()}toJSON(){return this.root.toJSON()}toSortedJSON(){return this.root.toSortedJSON()}getStats(){return this.root.getStats()}toJSForTest(){return{...this.getRoot().toJSForTest(),key:"root"}}applySnapshot(t,e,i,a=-1){const{root:u,presences:c}=me.bytesToSnapshot(i);this.root=new ku(u),this.presences=c,this.changeID=this.changeID.setClocks(e.maxLamport(),e),this.clone=void 0,this.removePushedLocalChanges(a),this.applyChanges(this.localChanges,te.Local),this.publish([{type:"snapshot",source:te.Remote,value:{serverSeq:t.toString(),snapshot:this.isEnableDevtools()?me.bytesToHex(i):void 0,snapshotVector:me.versionVectorToHex(e)}}])}applyChanges(t,e){xt.isEnabled(Ze.Debug)&&xt.debug(`trying to apply ${t.length} remote changes.elements:${this.root.getElementMapSize()}, removeds:${this.root.getGarbageElementSetSize()}`),xt.isEnabled(Ze.Trivial)&&xt.trivial(t.map(i=>`${i.getID().toTestString()}	${i.toTestString()}`).join(`
`));for(const i of t)this.applyChange(i,e);xt.isEnabled(Ze.Debug)&&xt.debug(`after appling ${t.length} remote changes.elements:${this.root.getElementMapSize()},  removeds:${this.root.getGarbageElementSetSize()}`)}applyChange(t,e){this.ensureClone(),t.execute(this.clone.root,this.clone.presences,e);const i=[],a=t.getID().getActorID();if(t.hasPresenceChange()&&this.onlineClients.has(a)){const c=t.getPresenceChange();switch(c.type){case Ar.Put:i.push(this.presences.has(a)?{type:"presence-changed",source:e,value:{clientID:a,presence:c.presence}}:{type:"watched",source:te.Remote,value:{clientID:a,presence:c.presence}});break;case Ar.Clear:i.push({type:"unwatched",source:te.Remote,value:{clientID:a,presence:this.getPresence(a)}}),this.removeOnlineClient(a);break}}const{opInfos:u}=t.execute(this.root,this.presences,e);if(this.changeID=this.changeID.syncClocks(t.getID()),u.length>0){const c=this.isEnableDevtools()?t.toStruct():void 0;i.push(e===te.Remote?{type:"remote-change",source:e,value:{actor:a,clientSeq:t.getID().getClientSeq(),serverSeq:t.getID().getServerSeq(),message:t.getMessage()||"",operations:u},rawChange:c}:{type:"local-change",source:e,value:{actor:a,clientSeq:t.getID().getClientSeq(),serverSeq:t.getID().getServerSeq(),message:t.getMessage()||"",operations:u},rawChange:c})}i.length>0&&this.publish(i)}applyWatchStream(t){if(t.body.case==="initialization"){const e=t.body.value.clientIds,i=new Set;for(const a of e)a!==this.changeID.getActorID()&&i.add(a);this.setOnlineClients(i),this.publish([{type:"initialized",source:te.Local,value:this.getPresences()}]);return}if(t.body.case==="event"){const{type:e,publisher:i}=t.body.value,a=[];if(e===Da.DOCUMENT_WATCHED){if(this.onlineClients.has(i)&&this.hasPresence(i))return;this.addOnlineClient(i),this.hasPresence(i)&&a.push({type:"watched",source:te.Remote,value:{clientID:i,presence:this.getPresence(i)}})}else if(e===Da.DOCUMENT_UNWATCHED){const u=this.getPresence(i);this.removeOnlineClient(i),u&&a.push({type:"unwatched",source:te.Remote,value:{clientID:i,presence:u}})}else if(e===Da.DOCUMENT_BROADCAST&&t.body.value.body){const{topic:u,payload:c}=t.body.value.body,d=new TextDecoder;a.push({type:"broadcast",value:{clientID:i,topic:u,payload:JSON.parse(d.decode(c))}})}a.length>0&&this.publish(a)}}applyStatus(t){this.status=t,t==="detached"&&this.setActor(kd),this.publish([{source:t==="removed"?te.Remote:te.Local,type:"status-changed",value:t==="attached"?{status:t,actorID:this.changeID.getActorID()}:{status:t}}])}applyDocEventForReplay(t){if(t.type==="status-changed"){this.applyStatus(t.value.status),t.value.status==="attached"&&this.setActor(t.value.actorID);return}if(t.type==="snapshot"){const{snapshot:e,serverSeq:i,snapshotVector:a}=t.value;if(!e)return;this.applySnapshot(BigInt(i),me.hexToVersionVector(a),me.hexToBytes(e));return}if(t.type==="local-change"||t.type==="remote-change"){if(!t.rawChange)return;const e=jo.fromStruct(t.rawChange);this.applyChange(e,t.source)}if(t.type==="initialized"){const e=new Set;for(const{clientID:i,presence:a}of t.value)e.add(i),this.presences.set(i,a);this.setOnlineClients(e);return}if(t.type==="watched"){const{clientID:e,presence:i}=t.value;this.addOnlineClient(e),this.presences.set(e,i);return}if(t.type==="unwatched"){const{clientID:e}=t.value;this.removeOnlineClient(e),this.presences.delete(e)}if(t.type==="presence-changed"){const{clientID:e,presence:i}=t.value;this.presences.set(e,i)}}applyDocEventsForReplay(t){for(const e of t)this.applyDocEventForReplay(e)}getValueByPath(t){if(!t.startsWith("$"))throw new G(V.ErrInvalidArgument,'path must start with "$"');const e=t.split(".");e.shift();let i=this.getRoot();for(const a of e)if(i=i[a],i===void 0)return;return i}setOnlineClients(t){this.onlineClients=t}resetOnlineClients(){this.onlineClients=new Set}addOnlineClient(t){this.onlineClients.add(t)}removeOnlineClient(t){this.onlineClients.delete(t)}hasPresence(t){return this.presences.has(t)}getMyPresence(){if(this.status!=="attached")return{};const t=this.presences.get(this.changeID.getActorID());return t?Yn(t):{}}getPresence(t){if(t===this.changeID.getActorID())return this.getMyPresence();if(!this.onlineClients.has(t))return;const e=this.presences.get(t);return e?Yn(e):void 0}getPresenceForTest(t){const e=this.presences.get(t);return e?Yn(e):void 0}getPresences(){const t=[];t.push({clientID:this.changeID.getActorID(),presence:Yn(this.getMyPresence())});for(const e of this.onlineClients)this.presences.has(e)&&t.push({clientID:e,presence:Yn(this.presences.get(e))});return t}getSelfForTest(){return{clientID:this.getChangeID().getActorID(),presence:this.getMyPresence()}}getOthersForTest(){const t=this.getChangeID().getActorID();return this.getPresences().filter(e=>e.clientID!==t).sort((e,i)=>e.clientID>i.clientID?1:-1)}canUndo(){return this.internalHistory.hasUndo()&&!this.isUpdating}canRedo(){return this.internalHistory.hasRedo()&&!this.isUpdating}undo(){if(this.isUpdating)throw new G(V.ErrRefused,"Undo is not allowed during an update");const t=this.internalHistory.popUndo();if(t===void 0)throw new G(V.ErrRefused,"There is no operation to be undone");this.ensureClone();const e=Oo.create(this.changeID,this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});for(const g of t){if(!(g instanceof tr)){new pm(e,Yn(this.clone.presences.get(this.changeID.getActorID()))).set(g.value,{addToHistory:!0});continue}const y=e.issueTimeTicket();g.setExecutedAt(y),e.push(g)}const i=e.toChange();i.execute(this.clone.root,this.clone.presences,te.UndoRedo);const{opInfos:a,reverseOps:u}=i.execute(this.root,this.presences,te.UndoRedo),c=e.getReversePresence();if(c&&u.push({type:"presence",value:c}),u.length>0&&this.internalHistory.pushRedo(u),!i.hasPresenceChange()&&a.length===0)return;this.localChanges.push(i),this.changeID=e.getNextID();const d=this.changeID.getActorID(),h=[];a.length>0&&h.push({type:"local-change",source:te.UndoRedo,value:{message:i.getMessage()||"",operations:a,actor:d,clientSeq:i.getID().getClientSeq(),serverSeq:i.getID().getServerSeq()},rawChange:this.isEnableDevtools()?i.toStruct():void 0}),i.hasPresenceChange()&&h.push({type:"presence-changed",source:te.UndoRedo,value:{clientID:d,presence:this.getPresence(d)}}),this.publish(h)}redo(){if(this.isUpdating)throw new G(V.ErrRefused,"Redo is not allowed during an update");const t=this.internalHistory.popRedo();if(t===void 0)throw new G(V.ErrRefused,"There is no operation to be redone");this.ensureClone();const e=Oo.create(this.changeID,this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});for(const g of t){if(!(g instanceof tr)){new pm(e,Yn(this.clone.presences.get(this.changeID.getActorID()))).set(g.value,{addToHistory:!0});continue}const y=e.issueTimeTicket();g.setExecutedAt(y),e.push(g)}const i=e.toChange();i.execute(this.clone.root,this.clone.presences,te.UndoRedo);const{opInfos:a,reverseOps:u}=i.execute(this.root,this.presences,te.UndoRedo),c=e.getReversePresence();if(c&&u.push({type:"presence",value:c}),u.length>0&&this.internalHistory.pushUndo(u),!i.hasPresenceChange()&&a.length===0)return;this.localChanges.push(i),this.changeID=e.getNextID();const d=this.changeID.getActorID(),h=[];a.length>0&&h.push({type:"local-change",source:te.UndoRedo,value:{message:i.getMessage()||"",operations:a,actor:d,clientSeq:i.getID().getClientSeq(),serverSeq:i.getID().getServerSeq()},rawChange:this.isEnableDevtools()?i.toStruct():void 0}),i.hasPresenceChange()&&h.push({type:"presence-changed",source:te.UndoRedo,value:{clientID:d,presence:this.getPresence(d)}}),this.publish(h)}getUndoStackForTest(){return this.internalHistory.getUndoStackForTest()}getRedoStackForTest(){return this.internalHistory.getRedoStackForTest()}broadcast(t,e,i){const a={type:"local-broadcast",value:{topic:t,payload:e},options:i};this.publish([a])}getVersionVector(){return this.changeID.getVersionVector()}}function jD(n,t){let e=t;return{authInterceptor:u=>async c=>(n&&c.header.set("x-api-key",n),e&&c.header.set("authorization",e),await u(c)),setToken:u=>{e=u}}}const YD="@yorkie-js/sdk",GD="0.6.13",LS={name:YD,version:GD};function XD(n){return t=>async e=>(n?e.header.set("x-yorkie-user-agent",n):e.header.set("x-yorkie-user-agent",LS.name+"/"+LS.version),await t(e))}const KD=n=>{try{if(JSON.stringify(n)===void 0)return!1}catch{return!1}return!0};var Uf=(n=>(n.Manual="manual",n.Realtime="realtime",n.RealtimePushOnly="realtime-pushonly",n.RealtimeSyncOff="realtime-syncoff",n))(Uf||{});const lu={rpcAddr:"https://api.yorkie.dev",syncLoopDuration:50,retrySyncLoopDelay:1e3,reconnectStreamDelay:1e3},vm={maxRetries:1/0,initialRetryInterval:1e3,maxBackoff:2e4};class Q1{constructor(t){p(this,"id");p(this,"key");p(this,"metadata");p(this,"status");p(this,"attachmentMap");p(this,"apiKey");p(this,"authTokenInjector");p(this,"conditions");p(this,"syncLoopDuration");p(this,"reconnectStreamDelay");p(this,"retrySyncLoopDelay");p(this,"rpcClient");p(this,"setAuthToken");p(this,"taskQueue");p(this,"processing",!1);p(this,"keepalive",!1);t=t||lu;const e=t.rpcAddr||lu.rpcAddr;this.key=t.key||X1(),this.metadata=t.metadata||{},this.status="deactivated",this.attachmentMap=new Map,this.apiKey=t.apiKey||"",this.authTokenInjector=t.authTokenInjector,this.conditions={SyncLoop:!1,WatchLoop:!1},this.syncLoopDuration=t.syncLoopDuration??lu.syncLoopDuration,this.reconnectStreamDelay=t.reconnectStreamDelay??lu.reconnectStreamDelay,this.retrySyncLoopDelay=t.retrySyncLoopDelay??lu.retrySyncLoopDelay;const{authInterceptor:i,setToken:a}=jD(this.apiKey);this.setAuthToken=a,this.rpcClient=WN(x2,b2({baseUrl:e,interceptors:[i,XD(t==null?void 0:t.userAgent)],fetch:(u,c)=>{const d={...c,keepalive:this.keepalive};return fetch(u,d)}})),this.taskQueue=[]}async activate(){if(this.isActive())return Promise.resolve();if(this.authTokenInjector){const t=await this.authTokenInjector();this.setAuthToken(t)}return this.enqueueTask(async()=>{try{const t=await this.rpcClient.activateClient({clientKey:this.key,metadata:this.metadata},{headers:{"x-shard-key":this.apiKey}});this.id=t.clientId,this.status="activated",this.runSyncLoop(),xt.info(`[AC] c:"${this.getKey()}" activated, id:"${this.id}"`),typeof window<"u"&&window.addEventListener("beforeunload",async()=>{await this.deactivate({keepalive:!0})})}catch(t){throw xt.error(`[AC] c:"${this.getKey()}" err :`,t),await this.handleConnectError(t),t}})}deactivate(t={keepalive:!1}){if(this.status==="deactivated")return Promise.resolve();const e=async()=>{try{await this.rpcClient.deactivateClient({clientId:this.id},{headers:{"x-shard-key":this.apiKey}}),this.deactivateInternal(),xt.info(`[DC] c"${this.getKey()}" deactivated`)}catch(i){throw xt.error(`[DC] c:"${this.getKey()}" err :`,i),await this.handleConnectError(i),i}};if(t.keepalive){this.keepalive=!0;const i=e();return this.keepalive=!1,i}return this.enqueueTask(e)}hasDocument(t){return this.attachmentMap.has(t)}attach(t,e={}){if(!this.isActive())throw new G(V.ErrClientNotActivated,`${this.key} is not active`);if(t.getStatus()!==Hs.Detached)throw new G(V.ErrDocumentNotDetached,`${t.getKey()} is not detached`);t.setActor(this.id),t.update((u,c)=>c.set(e.initialPresence||{}));const i=t.subscribe("local-broadcast",async u=>{var y;const{topic:c,payload:d}=u.value,h=(y=u.options)==null?void 0:y.error,g=u.options;try{await this.broadcast(t.getKey(),c,d,g)}catch(w){w instanceof Error&&(h==null||h(w))}}),a=e.syncMode??"realtime";return this.enqueueTask(async()=>{try{const u=await this.rpcClient.attachDocument({clientId:this.id,changePack:me.toChangePack(t.createChangePack())},{headers:{"x-shard-key":`${this.apiKey}/${t.getKey()}`}});(u.maxSizePerDocument??0)>0&&t.setMaxSizePerDocument(u.maxSizePerDocument);const d=me.fromChangePack(u.changePack);if(t.applyChangePack(d),t.getStatus()===Hs.Removed)return t;t.applyStatus(Hs.Attached),this.attachmentMap.set(t.getKey(),new kD(this.reconnectStreamDelay,t,u.documentId,a,i)),a!=="manual"&&await this.runWatchLoop(t.getKey()),xt.info(`[AD] c:"${this.getKey()}" attaches d:"${t.getKey()}"`);const h=t.getRootObject();if(e.initialRoot){const g=e.initialRoot;t.update(y=>{for(const[w,v]of Object.entries(g))if(!h.has(w)){const S=w;y[S]=v}})}return t}catch(u){throw xt.error(`[AD] c:"${this.getKey()}" err :`,u),await this.handleConnectError(u),u}})}detach(t,e={keepalive:!1}){if(!this.isActive())throw new G(V.ErrClientNotActivated,`${this.key} is not active`);const i=this.attachmentMap.get(t.getKey());if(!i)throw new G(V.ErrDocumentNotAttached,`${t.getKey()} is not attached`);t.update((u,c)=>c.clear());const a=async()=>{try{const u=await this.rpcClient.detachDocument({clientId:this.id,documentId:i.docID,changePack:me.toChangePack(t.createChangePack()),removeIfNotAttached:e.removeIfNotAttached??!1},{headers:{"x-shard-key":`${this.apiKey}/${t.getKey()}`}}),c=me.fromChangePack(u.changePack);return t.applyChangePack(c),t.getStatus()!==Hs.Removed&&t.applyStatus(Hs.Detached),this.detachInternal(t.getKey()),xt.info(`[DD] c:"${this.getKey()}" detaches d:"${t.getKey()}"`),t}catch(u){throw xt.error(`[DD] c:"${this.getKey()}" err :`,u),await this.handleConnectError(u),u}};if(e.keepalive){this.keepalive=!0;const u=a();return this.keepalive=!1,u}return this.enqueueTask(a)}async changeSyncMode(t,e){if(!this.isActive())throw new G(V.ErrClientNotActivated,`${this.key} is not active`);const i=this.attachmentMap.get(t.getKey());if(!i)throw new G(V.ErrDocumentNotAttached,`${t.getKey()} is not attached`);const a=i.syncMode;return a===e?t:(i.changeSyncMode(e),e==="manual"?(i.cancelWatchStream(),t):(e==="realtime"&&(i.remoteChangeEventReceived=!0),a==="manual"&&await this.runWatchLoop(t.getKey()),t))}sync(t){if(!this.isActive())throw new G(V.ErrClientNotActivated,`${this.key} is not active`);if(t){const e=this.attachmentMap.get(t.getKey());if(!e)throw new G(V.ErrDocumentNotAttached,`${t.getKey()} is not attached`);return this.enqueueTask(async()=>this.syncInternal(e,"realtime").catch(async i=>{throw xt.error(`[SY] c:"${this.getKey()}" err :`,i),await this.handleConnectError(i),i}))}return this.enqueueTask(async()=>{const e=[];for(const[,i]of this.attachmentMap)e.push(this.syncInternal(i,i.syncMode));return Promise.all(e).catch(async i=>{throw xt.error(`[SY] c:"${this.getKey()}" err :`,i),await this.handleConnectError(i),i})})}remove(t){if(!this.isActive())throw new G(V.ErrClientNotActivated,`${this.key} is not active`);const e=this.attachmentMap.get(t.getKey());if(!e)throw new G(V.ErrDocumentNotAttached,`${t.getKey()} is not attached`);t.setActor(this.id);const i=me.toChangePack(t.createChangePack());return i.isRemoved=!0,this.enqueueTask(async()=>{try{const a=await this.rpcClient.removeDocument({clientId:this.id,documentId:e.docID,changePack:i},{headers:{"x-shard-key":`${this.apiKey}/${t.getKey()}`}}),u=me.fromChangePack(a.changePack);t.applyChangePack(u),this.detachInternal(t.getKey()),xt.info(`[RD] c:"${this.getKey()}" removes d:"${t.getKey()}"`)}catch(a){throw xt.error(`[RD] c:"${this.getKey()}" err :`,a),await this.handleConnectError(a),a}})}getID(){return this.id}getKey(){return this.key}isActive(){return this.status==="activated"}getStatus(){return this.status}getCondition(t){return this.conditions[t]}broadcast(t,e,i,a){if(!this.isActive())throw new G(V.ErrClientNotActivated,`${this.key} is not active`);const u=this.attachmentMap.get(t);if(!u)throw new G(V.ErrDocumentNotAttached,`${t} is not attached`);if(!KD(i))throw new G(V.ErrInvalidArgument,"payload is not serializable");const c=(a==null?void 0:a.maxRetries)??vm.maxRetries,d=vm.maxBackoff;let h=0;const g=w=>Math.min(vm.initialRetryInterval*2**w,d),y=async()=>this.enqueueTask(async()=>{try{await this.rpcClient.broadcast({clientId:this.id,documentId:u.docID,topic:e,payload:new TextEncoder().encode(JSON.stringify(i))},{headers:{"x-shard-key":`${this.apiKey}/${t}`}}),xt.info(`[BC] c:"${this.getKey()}" broadcasts d:"${t}" t:"${e}"`)}catch(w){if(xt.error(`[BC] c:"${this.getKey()}" err:`,w),await this.handleConnectError(w))if(w instanceof Gt&&Us(w)===V.ErrUnauthenticated&&u.doc.publish([{type:ze.AuthError,value:{reason:fu(w).reason,method:"Broadcast"}}]),h<c)h++,setTimeout(()=>y(),g(h-1)),xt.info(`[BC] c:"${this.getKey()}" retry attempt ${h}/${c}`);else throw xt.error(`[BC] c:"${this.getKey()}" exceeded maximum retry attempts`),w;else throw w}});return y()}runSyncLoop(){const t=()=>{if(!this.isActive()){xt.debug(`[SL] c:"${this.getKey()}" exit sync loop`),this.conditions.SyncLoop=!1;return}const e=[];for(const[,i]of this.attachmentMap)i.needRealtimeSync()&&(i.remoteChangeEventReceived=!1,e.push(this.syncInternal(i,i.syncMode).catch(async a=>{throw a instanceof Gt&&Us(a)===V.ErrUnauthenticated&&i.doc.publish([{type:ze.AuthError,value:{reason:fu(a).reason,method:"PushPull"}}]),a})));Promise.all(e).then(()=>setTimeout(t,this.syncLoopDuration)).catch(async i=>{xt.error(`[SL] c:"${this.getKey()}" sync failed:`,i),await this.handleConnectError(i)?setTimeout(t,this.retrySyncLoopDelay):this.conditions.SyncLoop=!1})};xt.debug(`[SL] c:"${this.getKey()}" run sync loop`),this.conditions.SyncLoop=!0,t()}async runWatchLoop(t){const e=this.attachmentMap.get(t);if(!e)throw new G(V.ErrDocumentNotAttached,`${t} is not attached`);return this.conditions.WatchLoop=!0,e.runWatchLoop(i=>{if(!this.isActive())return this.conditions.WatchLoop=!1,Promise.reject(new G(V.ErrClientNotActivated,`${this.key} is not active`));const a=new AbortController,u=this.rpcClient.watchDocument({clientId:this.id,documentId:e.docID},{headers:{"x-shard-key":`${this.apiKey}/${t}`},signal:a.signal});return e.doc.publish([{type:ze.ConnectionChanged,value:hd.Connected}]),xt.info(`[WD] c:"${this.getKey()}" watches d:"${t}"`),new Promise((c,d)=>{(async()=>{try{for await(const g of u)this.handleWatchDocumentsResponse(e,g),g.body.case==="initialization"&&c([u,a])}catch(g){e.doc.resetOnlineClients(),e.doc.publish([{type:ze.Initialized,source:te.Local,value:e.doc.getPresences()}]),e.doc.publish([{type:ze.ConnectionChanged,value:hd.Disconnected}]),xt.debug(`[WD] c:"${this.getKey()}" unwatches`),await this.handleConnectError(g)?(g instanceof Gt&&Us(g)===V.ErrUnauthenticated&&e.doc.publish([{type:ze.AuthError,value:{reason:fu(g).reason,method:"WatchDocuments"}}]),i()):this.conditions.WatchLoop=!1,d(g)}})()})})}handleWatchDocumentsResponse(t,e){if(e.body.case==="event"&&e.body.value.type===Da.DOCUMENT_CHANGED){t.remoteChangeEventReceived=!0;return}t.doc.applyWatchStream(e)}deactivateInternal(){this.status="deactivated";for(const[t,e]of this.attachmentMap)this.detachInternal(t),e.doc.applyStatus(Hs.Detached)}detachInternal(t){const e=this.attachmentMap.get(t);e&&(e.cancelWatchStream(),e.unsubscribeBroadcastEvent(),this.attachmentMap.delete(t))}async syncInternal(t,e){const{doc:i,docID:a}=t,u=i.createChangePack();try{const c=await this.rpcClient.pushPullChanges({clientId:this.id,documentId:a,changePack:me.toChangePack(u),pushOnly:e==="realtime-pushonly"},{headers:{"x-shard-key":`${this.apiKey}/${i.getKey()}`}}),d=me.fromChangePack(c.changePack);if(d.hasChanges()&&(t.syncMode==="realtime-pushonly"||t.syncMode==="realtime-syncoff"))return i;i.applyChangePack(d),t.doc.publish([{type:ze.SyncStatusChanged,value:ly.Synced}]),i.getStatus()===Hs.Removed&&this.detachInternal(i.getKey());const h=i.getKey(),g=d.getChangeSize();return xt.info(`[PP] c:"${this.getKey()}" sync d:"${h}", push:${u.getChangeSize()} pull:${g} cp:${d.getCheckpoint().toTestString()}`),i}catch(c){throw i.publish([{type:ze.SyncStatusChanged,value:ly.SyncFailed}]),xt.error(`[PP] c:"${this.getKey()}" err :`,c),c}}async handleConnectError(t){if(!(t instanceof Gt))return!1;if(t.code===_t.Canceled||t.code===_t.Unknown||t.code===_t.ResourceExhausted||t.code===_t.Unavailable)return!0;if(Us(t)===V.ErrUnauthenticated){if(this.authTokenInjector){const e=await this.authTokenInjector(fu(t).reason);this.setAuthToken(e)}return!0}return Us(t)===V.ErrTooManySubscribers?(xt.error(`[WD] c:"${this.getKey()}" err :`,t.rawMessage),!0):(Us(t)===V.ErrTooManyAttachments||(Us(t)===V.ErrClientNotActivated||Us(t)===V.ErrClientNotFound)&&this.deactivateInternal(),!1)}enqueueTask(t){return new Promise((e,i)=>{this.taskQueue.push(()=>t().then(e).catch(i)),this.processing||this.processNext()})}async processNext(){if(this.taskQueue.length===0){this.processing=!1;return}try{this.processing=!0,await this.taskQueue.shift()()}catch{xt.error(`[TQ] c:"${this.getKey()}" process failed, id:"${this.id}"`)}this.processNext()}}Er.Int,Er.Long;typeof globalThis<"u"&&(globalThis.yorkie={Client:Q1,Document:Z1,Primitive:ce,Text:Jy,Counter:Hy,Tree:jy,LogLevel:Ze,setLogLevel:CD,IntType:Er.Int,LongType:Er.Long});const W1=et.createContext({client:void 0,loading:!0,error:void 0});function FD(n){const[t,e]=et.useState(void 0),[i,a]=et.useState(!0),[u,c]=et.useState(void 0),[d,h]=et.useState(!1);return et.useEffect(()=>{h(!0)},[]),et.useEffect(()=>{a(!0),c(void 0);async function g(){if(d)try{const y=new Q1(n);await y.activate(),e(y)}catch(y){c(y instanceof Error?y:new Error("Failed to activate client"))}finally{a(!1)}}return g(),()=>{t!=null&&t.isActive()&&t.deactivate({keepalive:!0})}},[n.apiKey,n.rpcAddr,d]),{client:t,loading:i,error:u}}const ZD=({children:n,...t})=>{const e=et.useMemo(()=>({userAgent:Yw.name+"/"+Yw.version,...t}),[t.apiKey,t.rpcAddr]),{client:i,loading:a,error:u}=FD(e);return Q.jsx(W1.Provider,{value:{client:i,loading:a,error:u},children:n})},QD=()=>{const n=et.useContext(W1);if(!n)throw new Error("useYorkie must be used under YorkieProvider");return{client:n.client,loading:n.loading,error:n.error}};function WD(n,t,e,i,a,u){const[c,d]=et.useState(),[h,g]=et.useState(!0),[y,w]=et.useState(),[v,S]=et.useState(a),[x,E]=et.useState([]),[I,k]=et.useState(hd.Disconnected);et.useEffect(()=>{if(e){g(!1),w(e);return}if(!n||t){g(!0);return}g(!0),w(void 0);const N=new Z1(i),O=[];O.push(N.subscribe(()=>{S(N.getRoot())})),O.push(N.subscribe("presence",()=>{E(N.getPresences())})),O.push(N.subscribe("connection",J=>{k(J.value)}));async function _(){try{await(n==null?void 0:n.attach(N,{initialRoot:a,initialPresence:u})),d(N),S(N.getRoot()),E(N.getPresences())}catch(J){w(J instanceof Error?J:new Error("Failed to attach document"))}finally{g(!1)}}return _(),()=>{n&&n.hasDocument(i)&&n.detach(N);for(const J of O)J()}},[n,t,e,i]);const z=et.useCallback(N=>{if(c)try{c.update(N)}catch(O){w(O instanceof Error?O:new Error("Failed to update document"))}},[c]);return{doc:c,root:v,presences:x,connection:I,update:z,loading:h,error:y}}const tx=et.createContext(null),tC=({docKey:n,initialRoot:t={},initialPresence:e={},children:i})=>{const{client:a,loading:u,error:c}=QD(),{doc:d,root:h,presences:g,connection:y,update:w,loading:v,error:S}=WD(a,u,c,n,t,e);return Q.jsx(tx.Provider,{value:{doc:d,root:h,presences:g,connection:y,update:w,loading:v,error:S},children:i})},eC=()=>{const n=et.useContext(tx);if(!n)throw new Error("useDocument must be used within a DocumentProvider");return{doc:n.doc,root:n.root,presences:n.presences,connection:n.connection,update:n.update,loading:n.loading,error:n.error}};function Se(n){if(typeof n=="string"||typeof n=="number")return""+n;let t="";if(Array.isArray(n))for(let e=0,i;e<n.length;e++)(i=Se(n[e]))!==""&&(t+=(t&&" ")+i);else for(let e in n)n[e]&&(t+=(t&&" ")+e);return t}var nC={value:()=>{}};function Md(){for(var n=0,t=arguments.length,e={},i;n<t;++n){if(!(i=arguments[n]+"")||i in e||/[\s.]/.test(i))throw new Error("illegal type: "+i);e[i]=[]}return new qf(e)}function qf(n){this._=n}function rC(n,t){return n.trim().split(/^|\s+/).map(function(e){var i="",a=e.indexOf(".");if(a>=0&&(i=e.slice(a+1),e=e.slice(0,a)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:i}})}qf.prototype=Md.prototype={constructor:qf,on:function(n,t){var e=this._,i=rC(n+"",e),a,u=-1,c=i.length;if(arguments.length<2){for(;++u<c;)if((a=(n=i[u]).type)&&(a=iC(e[a],n.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++u<c;)if(a=(n=i[u]).type)e[a]=_S(e[a],n.name,t);else if(t==null)for(a in e)e[a]=_S(e[a],n.name,null);return this},copy:function(){var n={},t=this._;for(var e in t)n[e]=t[e].slice();return new qf(n)},call:function(n,t){if((a=arguments.length-2)>0)for(var e=new Array(a),i=0,a,u;i<a;++i)e[i]=arguments[i+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(u=this._[n],i=0,a=u.length;i<a;++i)u[i].value.apply(t,e)},apply:function(n,t,e){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var i=this._[n],a=0,u=i.length;a<u;++a)i[a].value.apply(t,e)}};function iC(n,t){for(var e=0,i=n.length,a;e<i;++e)if((a=n[e]).name===t)return a.value}function _S(n,t,e){for(var i=0,a=n.length;i<a;++i)if(n[i].name===t){n[i]=nC,n=n.slice(0,i).concat(n.slice(i+1));break}return e!=null&&n.push({name:t,value:e}),n}var uy="http://www.w3.org/1999/xhtml";const US={svg:"http://www.w3.org/2000/svg",xhtml:uy,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Rd(n){var t=n+="",e=t.indexOf(":");return e>=0&&(t=n.slice(0,e))!=="xmlns"&&(n=n.slice(e+1)),US.hasOwnProperty(t)?{space:US[t],local:n}:n}function sC(n){return function(){var t=this.ownerDocument,e=this.namespaceURI;return e===uy&&t.documentElement.namespaceURI===uy?t.createElement(n):t.createElementNS(e,n)}}function aC(n){return function(){return this.ownerDocument.createElementNS(n.space,n.local)}}function ex(n){var t=Rd(n);return(t.local?aC:sC)(t)}function oC(){}function Yy(n){return n==null?oC:function(){return this.querySelector(n)}}function lC(n){typeof n!="function"&&(n=Yy(n));for(var t=this._groups,e=t.length,i=new Array(e),a=0;a<e;++a)for(var u=t[a],c=u.length,d=i[a]=new Array(c),h,g,y=0;y<c;++y)(h=u[y])&&(g=n.call(h,h.__data__,y,u))&&("__data__"in h&&(g.__data__=h.__data__),d[y]=g);return new pn(i,this._parents)}function uC(n){return n==null?[]:Array.isArray(n)?n:Array.from(n)}function cC(){return[]}function nx(n){return n==null?cC:function(){return this.querySelectorAll(n)}}function fC(n){return function(){return uC(n.apply(this,arguments))}}function dC(n){typeof n=="function"?n=fC(n):n=nx(n);for(var t=this._groups,e=t.length,i=[],a=[],u=0;u<e;++u)for(var c=t[u],d=c.length,h,g=0;g<d;++g)(h=c[g])&&(i.push(n.call(h,h.__data__,g,c)),a.push(h));return new pn(i,a)}function rx(n){return function(){return this.matches(n)}}function ix(n){return function(t){return t.matches(n)}}var hC=Array.prototype.find;function gC(n){return function(){return hC.call(this.children,n)}}function mC(){return this.firstElementChild}function yC(n){return this.select(n==null?mC:gC(typeof n=="function"?n:ix(n)))}var pC=Array.prototype.filter;function vC(){return Array.from(this.children)}function wC(n){return function(){return pC.call(this.children,n)}}function SC(n){return this.selectAll(n==null?vC:wC(typeof n=="function"?n:ix(n)))}function bC(n){typeof n!="function"&&(n=rx(n));for(var t=this._groups,e=t.length,i=new Array(e),a=0;a<e;++a)for(var u=t[a],c=u.length,d=i[a]=[],h,g=0;g<c;++g)(h=u[g])&&n.call(h,h.__data__,g,u)&&d.push(h);return new pn(i,this._parents)}function sx(n){return new Array(n.length)}function xC(){return new pn(this._enter||this._groups.map(sx),this._parents)}function gd(n,t){this.ownerDocument=n.ownerDocument,this.namespaceURI=n.namespaceURI,this._next=null,this._parent=n,this.__data__=t}gd.prototype={constructor:gd,appendChild:function(n){return this._parent.insertBefore(n,this._next)},insertBefore:function(n,t){return this._parent.insertBefore(n,t)},querySelector:function(n){return this._parent.querySelector(n)},querySelectorAll:function(n){return this._parent.querySelectorAll(n)}};function TC(n){return function(){return n}}function AC(n,t,e,i,a,u){for(var c=0,d,h=t.length,g=u.length;c<g;++c)(d=t[c])?(d.__data__=u[c],i[c]=d):e[c]=new gd(n,u[c]);for(;c<h;++c)(d=t[c])&&(a[c]=d)}function EC(n,t,e,i,a,u,c){var d,h,g=new Map,y=t.length,w=u.length,v=new Array(y),S;for(d=0;d<y;++d)(h=t[d])&&(v[d]=S=c.call(h,h.__data__,d,t)+"",g.has(S)?a[d]=h:g.set(S,h));for(d=0;d<w;++d)S=c.call(n,u[d],d,u)+"",(h=g.get(S))?(i[d]=h,h.__data__=u[d],g.delete(S)):e[d]=new gd(n,u[d]);for(d=0;d<y;++d)(h=t[d])&&g.get(v[d])===h&&(a[d]=h)}function NC(n){return n.__data__}function DC(n,t){if(!arguments.length)return Array.from(this,NC);var e=t?EC:AC,i=this._parents,a=this._groups;typeof n!="function"&&(n=TC(n));for(var u=a.length,c=new Array(u),d=new Array(u),h=new Array(u),g=0;g<u;++g){var y=i[g],w=a[g],v=w.length,S=CC(n.call(y,y&&y.__data__,g,i)),x=S.length,E=d[g]=new Array(x),I=c[g]=new Array(x),k=h[g]=new Array(v);e(y,w,E,I,k,S,t);for(var z=0,N=0,O,_;z<x;++z)if(O=E[z]){for(z>=N&&(N=z+1);!(_=I[N])&&++N<x;);O._next=_||null}}return c=new pn(c,i),c._enter=d,c._exit=h,c}function CC(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function kC(){return new pn(this._exit||this._groups.map(sx),this._parents)}function OC(n,t,e){var i=this.enter(),a=this,u=this.exit();return typeof n=="function"?(i=n(i),i&&(i=i.selection())):i=i.append(n+""),t!=null&&(a=t(a),a&&(a=a.selection())),e==null?u.remove():e(u),i&&a?i.merge(a).order():a}function IC(n){for(var t=n.selection?n.selection():n,e=this._groups,i=t._groups,a=e.length,u=i.length,c=Math.min(a,u),d=new Array(a),h=0;h<c;++h)for(var g=e[h],y=i[h],w=g.length,v=d[h]=new Array(w),S,x=0;x<w;++x)(S=g[x]||y[x])&&(v[x]=S);for(;h<a;++h)d[h]=e[h];return new pn(d,this._parents)}function MC(){for(var n=this._groups,t=-1,e=n.length;++t<e;)for(var i=n[t],a=i.length-1,u=i[a],c;--a>=0;)(c=i[a])&&(u&&c.compareDocumentPosition(u)^4&&u.parentNode.insertBefore(c,u),u=c);return this}function RC(n){n||(n=BC);function t(w,v){return w&&v?n(w.__data__,v.__data__):!w-!v}for(var e=this._groups,i=e.length,a=new Array(i),u=0;u<i;++u){for(var c=e[u],d=c.length,h=a[u]=new Array(d),g,y=0;y<d;++y)(g=c[y])&&(h[y]=g);h.sort(t)}return new pn(a,this._parents).order()}function BC(n,t){return n<t?-1:n>t?1:n>=t?0:NaN}function zC(){var n=arguments[0];return arguments[0]=this,n.apply(null,arguments),this}function LC(){return Array.from(this)}function _C(){for(var n=this._groups,t=0,e=n.length;t<e;++t)for(var i=n[t],a=0,u=i.length;a<u;++a){var c=i[a];if(c)return c}return null}function UC(){let n=0;for(const t of this)++n;return n}function qC(){return!this.node()}function PC(n){for(var t=this._groups,e=0,i=t.length;e<i;++e)for(var a=t[e],u=0,c=a.length,d;u<c;++u)(d=a[u])&&n.call(d,d.__data__,u,a);return this}function JC(n){return function(){this.removeAttribute(n)}}function HC(n){return function(){this.removeAttributeNS(n.space,n.local)}}function $C(n,t){return function(){this.setAttribute(n,t)}}function VC(n,t){return function(){this.setAttributeNS(n.space,n.local,t)}}function jC(n,t){return function(){var e=t.apply(this,arguments);e==null?this.removeAttribute(n):this.setAttribute(n,e)}}function YC(n,t){return function(){var e=t.apply(this,arguments);e==null?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,e)}}function GC(n,t){var e=Rd(n);if(arguments.length<2){var i=this.node();return e.local?i.getAttributeNS(e.space,e.local):i.getAttribute(e)}return this.each((t==null?e.local?HC:JC:typeof t=="function"?e.local?YC:jC:e.local?VC:$C)(e,t))}function ax(n){return n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView}function XC(n){return function(){this.style.removeProperty(n)}}function KC(n,t,e){return function(){this.style.setProperty(n,t,e)}}function FC(n,t,e){return function(){var i=t.apply(this,arguments);i==null?this.style.removeProperty(n):this.style.setProperty(n,i,e)}}function ZC(n,t,e){return arguments.length>1?this.each((t==null?XC:typeof t=="function"?FC:KC)(n,t,e??"")):Xo(this.node(),n)}function Xo(n,t){return n.style.getPropertyValue(t)||ax(n).getComputedStyle(n,null).getPropertyValue(t)}function QC(n){return function(){delete this[n]}}function WC(n,t){return function(){this[n]=t}}function t3(n,t){return function(){var e=t.apply(this,arguments);e==null?delete this[n]:this[n]=e}}function e3(n,t){return arguments.length>1?this.each((t==null?QC:typeof t=="function"?t3:WC)(n,t)):this.node()[n]}function ox(n){return n.trim().split(/^|\s+/)}function Gy(n){return n.classList||new lx(n)}function lx(n){this._node=n,this._names=ox(n.getAttribute("class")||"")}lx.prototype={add:function(n){var t=this._names.indexOf(n);t<0&&(this._names.push(n),this._node.setAttribute("class",this._names.join(" ")))},remove:function(n){var t=this._names.indexOf(n);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(n){return this._names.indexOf(n)>=0}};function ux(n,t){for(var e=Gy(n),i=-1,a=t.length;++i<a;)e.add(t[i])}function cx(n,t){for(var e=Gy(n),i=-1,a=t.length;++i<a;)e.remove(t[i])}function n3(n){return function(){ux(this,n)}}function r3(n){return function(){cx(this,n)}}function i3(n,t){return function(){(t.apply(this,arguments)?ux:cx)(this,n)}}function s3(n,t){var e=ox(n+"");if(arguments.length<2){for(var i=Gy(this.node()),a=-1,u=e.length;++a<u;)if(!i.contains(e[a]))return!1;return!0}return this.each((typeof t=="function"?i3:t?n3:r3)(e,t))}function a3(){this.textContent=""}function o3(n){return function(){this.textContent=n}}function l3(n){return function(){var t=n.apply(this,arguments);this.textContent=t??""}}function u3(n){return arguments.length?this.each(n==null?a3:(typeof n=="function"?l3:o3)(n)):this.node().textContent}function c3(){this.innerHTML=""}function f3(n){return function(){this.innerHTML=n}}function d3(n){return function(){var t=n.apply(this,arguments);this.innerHTML=t??""}}function h3(n){return arguments.length?this.each(n==null?c3:(typeof n=="function"?d3:f3)(n)):this.node().innerHTML}function g3(){this.nextSibling&&this.parentNode.appendChild(this)}function m3(){return this.each(g3)}function y3(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function p3(){return this.each(y3)}function v3(n){var t=typeof n=="function"?n:ex(n);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function w3(){return null}function S3(n,t){var e=typeof n=="function"?n:ex(n),i=t==null?w3:typeof t=="function"?t:Yy(t);return this.select(function(){return this.insertBefore(e.apply(this,arguments),i.apply(this,arguments)||null)})}function b3(){var n=this.parentNode;n&&n.removeChild(this)}function x3(){return this.each(b3)}function T3(){var n=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(n,this.nextSibling):n}function A3(){var n=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(n,this.nextSibling):n}function E3(n){return this.select(n?A3:T3)}function N3(n){return arguments.length?this.property("__data__",n):this.node().__data__}function D3(n){return function(t){n.call(this,t,this.__data__)}}function C3(n){return n.trim().split(/^|\s+/).map(function(t){var e="",i=t.indexOf(".");return i>=0&&(e=t.slice(i+1),t=t.slice(0,i)),{type:t,name:e}})}function k3(n){return function(){var t=this.__on;if(t){for(var e=0,i=-1,a=t.length,u;e<a;++e)u=t[e],(!n.type||u.type===n.type)&&u.name===n.name?this.removeEventListener(u.type,u.listener,u.options):t[++i]=u;++i?t.length=i:delete this.__on}}}function O3(n,t,e){return function(){var i=this.__on,a,u=D3(t);if(i){for(var c=0,d=i.length;c<d;++c)if((a=i[c]).type===n.type&&a.name===n.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=u,a.options=e),a.value=t;return}}this.addEventListener(n.type,u,e),a={type:n.type,name:n.name,value:t,listener:u,options:e},i?i.push(a):this.__on=[a]}}function I3(n,t,e){var i=C3(n+""),a,u=i.length,c;if(arguments.length<2){var d=this.node().__on;if(d){for(var h=0,g=d.length,y;h<g;++h)for(a=0,y=d[h];a<u;++a)if((c=i[a]).type===y.type&&c.name===y.name)return y.value}return}for(d=t?O3:k3,a=0;a<u;++a)this.each(d(i[a],t,e));return this}function fx(n,t,e){var i=ax(n),a=i.CustomEvent;typeof a=="function"?a=new a(t,e):(a=i.document.createEvent("Event"),e?(a.initEvent(t,e.bubbles,e.cancelable),a.detail=e.detail):a.initEvent(t,!1,!1)),n.dispatchEvent(a)}function M3(n,t){return function(){return fx(this,n,t)}}function R3(n,t){return function(){return fx(this,n,t.apply(this,arguments))}}function B3(n,t){return this.each((typeof t=="function"?R3:M3)(n,t))}function*z3(){for(var n=this._groups,t=0,e=n.length;t<e;++t)for(var i=n[t],a=0,u=i.length,c;a<u;++a)(c=i[a])&&(yield c)}var dx=[null];function pn(n,t){this._groups=n,this._parents=t}function Gu(){return new pn([[document.documentElement]],dx)}function L3(){return this}pn.prototype=Gu.prototype={constructor:pn,select:lC,selectAll:dC,selectChild:yC,selectChildren:SC,filter:bC,data:DC,enter:xC,exit:kC,join:OC,merge:IC,selection:L3,order:MC,sort:RC,call:zC,nodes:LC,node:_C,size:UC,empty:qC,each:PC,attr:GC,style:ZC,property:e3,classed:s3,text:u3,html:h3,raise:m3,lower:p3,append:v3,insert:S3,remove:x3,clone:E3,datum:N3,on:I3,dispatch:B3,[Symbol.iterator]:z3};function dn(n){return typeof n=="string"?new pn([[document.querySelector(n)]],[document.documentElement]):new pn([[n]],dx)}function _3(n){let t;for(;t=n.sourceEvent;)n=t;return n}function Xn(n,t){if(n=_3(n),t===void 0&&(t=n.currentTarget),t){var e=t.ownerSVGElement||t;if(e.createSVGPoint){var i=e.createSVGPoint();return i.x=n.clientX,i.y=n.clientY,i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}if(t.getBoundingClientRect){var a=t.getBoundingClientRect();return[n.clientX-a.left-t.clientLeft,n.clientY-a.top-t.clientTop]}}return[n.pageX,n.pageY]}const U3={passive:!1},Iu={capture:!0,passive:!1};function wm(n){n.stopImmediatePropagation()}function Lo(n){n.preventDefault(),n.stopImmediatePropagation()}function hx(n){var t=n.document.documentElement,e=dn(n).on("dragstart.drag",Lo,Iu);"onselectstart"in t?e.on("selectstart.drag",Lo,Iu):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function gx(n,t){var e=n.document.documentElement,i=dn(n).on("dragstart.drag",null);t&&(i.on("click.drag",Lo,Iu),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in e?i.on("selectstart.drag",null):(e.style.MozUserSelect=e.__noselect,delete e.__noselect)}const Tf=n=>()=>n;function cy(n,{sourceEvent:t,subject:e,target:i,identifier:a,active:u,x:c,y:d,dx:h,dy:g,dispatch:y}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:e,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:a,enumerable:!0,configurable:!0},active:{value:u,enumerable:!0,configurable:!0},x:{value:c,enumerable:!0,configurable:!0},y:{value:d,enumerable:!0,configurable:!0},dx:{value:h,enumerable:!0,configurable:!0},dy:{value:g,enumerable:!0,configurable:!0},_:{value:y}})}cy.prototype.on=function(){var n=this._.on.apply(this._,arguments);return n===this._?this:n};function q3(n){return!n.ctrlKey&&!n.button}function P3(){return this.parentNode}function J3(n,t){return t??{x:n.x,y:n.y}}function H3(){return navigator.maxTouchPoints||"ontouchstart"in this}function mx(){var n=q3,t=P3,e=J3,i=H3,a={},u=Md("start","drag","end"),c=0,d,h,g,y,w=0;function v(O){O.on("mousedown.drag",S).filter(i).on("touchstart.drag",I).on("touchmove.drag",k,U3).on("touchend.drag touchcancel.drag",z).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function S(O,_){if(!(y||!n.call(this,O,_))){var J=N(this,t.call(this,O,_),O,_,"mouse");J&&(dn(O.view).on("mousemove.drag",x,Iu).on("mouseup.drag",E,Iu),hx(O.view),wm(O),g=!1,d=O.clientX,h=O.clientY,J("start",O))}}function x(O){if(Lo(O),!g){var _=O.clientX-d,J=O.clientY-h;g=_*_+J*J>w}a.mouse("drag",O)}function E(O){dn(O.view).on("mousemove.drag mouseup.drag",null),gx(O.view,g),Lo(O),a.mouse("end",O)}function I(O,_){if(n.call(this,O,_)){var J=O.changedTouches,U=t.call(this,O,_),W=J.length,F,nt;for(F=0;F<W;++F)(nt=N(this,U,O,_,J[F].identifier,J[F]))&&(wm(O),nt("start",O,J[F]))}}function k(O){var _=O.changedTouches,J=_.length,U,W;for(U=0;U<J;++U)(W=a[_[U].identifier])&&(Lo(O),W("drag",O,_[U]))}function z(O){var _=O.changedTouches,J=_.length,U,W;for(y&&clearTimeout(y),y=setTimeout(function(){y=null},500),U=0;U<J;++U)(W=a[_[U].identifier])&&(wm(O),W("end",O,_[U]))}function N(O,_,J,U,W,F){var nt=u.copy(),ft=Xn(F||J,_),ot,ct,M;if((M=e.call(O,new cy("beforestart",{sourceEvent:J,target:v,identifier:W,active:c,x:ft[0],y:ft[1],dx:0,dy:0,dispatch:nt}),U))!=null)return ot=M.x-ft[0]||0,ct=M.y-ft[1]||0,function j(C,B,H){var q=ft,D;switch(C){case"start":a[W]=j,D=c++;break;case"end":delete a[W],--c;case"drag":ft=Xn(H||B,_),D=c;break}nt.call(C,O,new cy(C,{sourceEvent:B,subject:M,target:v,identifier:W,active:D,x:ft[0]+ot,y:ft[1]+ct,dx:ft[0]-q[0],dy:ft[1]-q[1],dispatch:nt}),U)}}return v.filter=function(O){return arguments.length?(n=typeof O=="function"?O:Tf(!!O),v):n},v.container=function(O){return arguments.length?(t=typeof O=="function"?O:Tf(O),v):t},v.subject=function(O){return arguments.length?(e=typeof O=="function"?O:Tf(O),v):e},v.touchable=function(O){return arguments.length?(i=typeof O=="function"?O:Tf(!!O),v):i},v.on=function(){var O=u.on.apply(u,arguments);return O===u?v:O},v.clickDistance=function(O){return arguments.length?(w=(O=+O)*O,v):Math.sqrt(w)},v}function Xy(n,t,e){n.prototype=t.prototype=e,e.constructor=n}function yx(n,t){var e=Object.create(n.prototype);for(var i in t)e[i]=t[i];return e}function Xu(){}var Mu=.7,md=1/Mu,_o="\\s*([+-]?\\d+)\\s*",Ru="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Tr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",$3=/^#([0-9a-f]{3,8})$/,V3=new RegExp(`^rgb\\(${_o},${_o},${_o}\\)$`),j3=new RegExp(`^rgb\\(${Tr},${Tr},${Tr}\\)$`),Y3=new RegExp(`^rgba\\(${_o},${_o},${_o},${Ru}\\)$`),G3=new RegExp(`^rgba\\(${Tr},${Tr},${Tr},${Ru}\\)$`),X3=new RegExp(`^hsl\\(${Ru},${Tr},${Tr}\\)$`),K3=new RegExp(`^hsla\\(${Ru},${Tr},${Tr},${Ru}\\)$`),qS={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Xy(Xu,Bu,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:PS,formatHex:PS,formatHex8:F3,formatHsl:Z3,formatRgb:JS,toString:JS});function PS(){return this.rgb().formatHex()}function F3(){return this.rgb().formatHex8()}function Z3(){return px(this).formatHsl()}function JS(){return this.rgb().formatRgb()}function Bu(n){var t,e;return n=(n+"").trim().toLowerCase(),(t=$3.exec(n))?(e=t[1].length,t=parseInt(t[1],16),e===6?HS(t):e===3?new tn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):e===8?Af(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):e===4?Af(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=V3.exec(n))?new tn(t[1],t[2],t[3],1):(t=j3.exec(n))?new tn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Y3.exec(n))?Af(t[1],t[2],t[3],t[4]):(t=G3.exec(n))?Af(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=X3.exec(n))?jS(t[1],t[2]/100,t[3]/100,1):(t=K3.exec(n))?jS(t[1],t[2]/100,t[3]/100,t[4]):qS.hasOwnProperty(n)?HS(qS[n]):n==="transparent"?new tn(NaN,NaN,NaN,0):null}function HS(n){return new tn(n>>16&255,n>>8&255,n&255,1)}function Af(n,t,e,i){return i<=0&&(n=t=e=NaN),new tn(n,t,e,i)}function Q3(n){return n instanceof Xu||(n=Bu(n)),n?(n=n.rgb(),new tn(n.r,n.g,n.b,n.opacity)):new tn}function fy(n,t,e,i){return arguments.length===1?Q3(n):new tn(n,t,e,i??1)}function tn(n,t,e,i){this.r=+n,this.g=+t,this.b=+e,this.opacity=+i}Xy(tn,fy,yx(Xu,{brighter(n){return n=n==null?md:Math.pow(md,n),new tn(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?Mu:Math.pow(Mu,n),new tn(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new tn(Ca(this.r),Ca(this.g),Ca(this.b),yd(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:$S,formatHex:$S,formatHex8:W3,formatRgb:VS,toString:VS}));function $S(){return`#${Ea(this.r)}${Ea(this.g)}${Ea(this.b)}`}function W3(){return`#${Ea(this.r)}${Ea(this.g)}${Ea(this.b)}${Ea((isNaN(this.opacity)?1:this.opacity)*255)}`}function VS(){const n=yd(this.opacity);return`${n===1?"rgb(":"rgba("}${Ca(this.r)}, ${Ca(this.g)}, ${Ca(this.b)}${n===1?")":`, ${n})`}`}function yd(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function Ca(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function Ea(n){return n=Ca(n),(n<16?"0":"")+n.toString(16)}function jS(n,t,e,i){return i<=0?n=t=e=NaN:e<=0||e>=1?n=t=NaN:t<=0&&(n=NaN),new Kn(n,t,e,i)}function px(n){if(n instanceof Kn)return new Kn(n.h,n.s,n.l,n.opacity);if(n instanceof Xu||(n=Bu(n)),!n)return new Kn;if(n instanceof Kn)return n;n=n.rgb();var t=n.r/255,e=n.g/255,i=n.b/255,a=Math.min(t,e,i),u=Math.max(t,e,i),c=NaN,d=u-a,h=(u+a)/2;return d?(t===u?c=(e-i)/d+(e<i)*6:e===u?c=(i-t)/d+2:c=(t-e)/d+4,d/=h<.5?u+a:2-u-a,c*=60):d=h>0&&h<1?0:c,new Kn(c,d,h,n.opacity)}function tk(n,t,e,i){return arguments.length===1?px(n):new Kn(n,t,e,i??1)}function Kn(n,t,e,i){this.h=+n,this.s=+t,this.l=+e,this.opacity=+i}Xy(Kn,tk,yx(Xu,{brighter(n){return n=n==null?md:Math.pow(md,n),new Kn(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?Mu:Math.pow(Mu,n),new Kn(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,t=isNaN(n)||isNaN(this.s)?0:this.s,e=this.l,i=e+(e<.5?e:1-e)*t,a=2*e-i;return new tn(Sm(n>=240?n-240:n+120,a,i),Sm(n,a,i),Sm(n<120?n+240:n-120,a,i),this.opacity)},clamp(){return new Kn(YS(this.h),Ef(this.s),Ef(this.l),yd(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=yd(this.opacity);return`${n===1?"hsl(":"hsla("}${YS(this.h)}, ${Ef(this.s)*100}%, ${Ef(this.l)*100}%${n===1?")":`, ${n})`}`}}));function YS(n){return n=(n||0)%360,n<0?n+360:n}function Ef(n){return Math.max(0,Math.min(1,n||0))}function Sm(n,t,e){return(n<60?t+(e-t)*n/60:n<180?e:n<240?t+(e-t)*(240-n)/60:t)*255}const vx=n=>()=>n;function ek(n,t){return function(e){return n+e*t}}function nk(n,t,e){return n=Math.pow(n,e),t=Math.pow(t,e)-n,e=1/e,function(i){return Math.pow(n+i*t,e)}}function rk(n){return(n=+n)==1?wx:function(t,e){return e-t?nk(t,e,n):vx(isNaN(t)?e:t)}}function wx(n,t){var e=t-n;return e?ek(n,e):vx(isNaN(n)?t:n)}const GS=function n(t){var e=rk(t);function i(a,u){var c=e((a=fy(a)).r,(u=fy(u)).r),d=e(a.g,u.g),h=e(a.b,u.b),g=wx(a.opacity,u.opacity);return function(y){return a.r=c(y),a.g=d(y),a.b=h(y),a.opacity=g(y),a+""}}return i.gamma=n,i}(1);function $s(n,t){return n=+n,t=+t,function(e){return n*(1-e)+t*e}}var dy=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,bm=new RegExp(dy.source,"g");function ik(n){return function(){return n}}function sk(n){return function(t){return n(t)+""}}function ak(n,t){var e=dy.lastIndex=bm.lastIndex=0,i,a,u,c=-1,d=[],h=[];for(n=n+"",t=t+"";(i=dy.exec(n))&&(a=bm.exec(t));)(u=a.index)>e&&(u=t.slice(e,u),d[c]?d[c]+=u:d[++c]=u),(i=i[0])===(a=a[0])?d[c]?d[c]+=a:d[++c]=a:(d[++c]=null,h.push({i:c,x:$s(i,a)})),e=bm.lastIndex;return e<t.length&&(u=t.slice(e),d[c]?d[c]+=u:d[++c]=u),d.length<2?h[0]?sk(h[0].x):ik(t):(t=h.length,function(g){for(var y=0,w;y<t;++y)d[(w=h[y]).i]=w.x(g);return d.join("")})}var XS=180/Math.PI,hy={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Sx(n,t,e,i,a,u){var c,d,h;return(c=Math.sqrt(n*n+t*t))&&(n/=c,t/=c),(h=n*e+t*i)&&(e-=n*h,i-=t*h),(d=Math.sqrt(e*e+i*i))&&(e/=d,i/=d,h/=d),n*i<t*e&&(n=-n,t=-t,h=-h,c=-c),{translateX:a,translateY:u,rotate:Math.atan2(t,n)*XS,skewX:Math.atan(h)*XS,scaleX:c,scaleY:d}}var Nf;function ok(n){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(n+"");return t.isIdentity?hy:Sx(t.a,t.b,t.c,t.d,t.e,t.f)}function lk(n){return n==null||(Nf||(Nf=document.createElementNS("http://www.w3.org/2000/svg","g")),Nf.setAttribute("transform",n),!(n=Nf.transform.baseVal.consolidate()))?hy:(n=n.matrix,Sx(n.a,n.b,n.c,n.d,n.e,n.f))}function bx(n,t,e,i){function a(g){return g.length?g.pop()+" ":""}function u(g,y,w,v,S,x){if(g!==w||y!==v){var E=S.push("translate(",null,t,null,e);x.push({i:E-4,x:$s(g,w)},{i:E-2,x:$s(y,v)})}else(w||v)&&S.push("translate("+w+t+v+e)}function c(g,y,w,v){g!==y?(g-y>180?y+=360:y-g>180&&(g+=360),v.push({i:w.push(a(w)+"rotate(",null,i)-2,x:$s(g,y)})):y&&w.push(a(w)+"rotate("+y+i)}function d(g,y,w,v){g!==y?v.push({i:w.push(a(w)+"skewX(",null,i)-2,x:$s(g,y)}):y&&w.push(a(w)+"skewX("+y+i)}function h(g,y,w,v,S,x){if(g!==w||y!==v){var E=S.push(a(S)+"scale(",null,",",null,")");x.push({i:E-4,x:$s(g,w)},{i:E-2,x:$s(y,v)})}else(w!==1||v!==1)&&S.push(a(S)+"scale("+w+","+v+")")}return function(g,y){var w=[],v=[];return g=n(g),y=n(y),u(g.translateX,g.translateY,y.translateX,y.translateY,w,v),c(g.rotate,y.rotate,w,v),d(g.skewX,y.skewX,w,v),h(g.scaleX,g.scaleY,y.scaleX,y.scaleY,w,v),g=y=null,function(S){for(var x=-1,E=v.length,I;++x<E;)w[(I=v[x]).i]=I.x(S);return w.join("")}}}var uk=bx(ok,"px, ","px)","deg)"),ck=bx(lk,", ",")",")"),fk=1e-12;function KS(n){return((n=Math.exp(n))+1/n)/2}function dk(n){return((n=Math.exp(n))-1/n)/2}function hk(n){return((n=Math.exp(2*n))-1)/(n+1)}const gk=function n(t,e,i){function a(u,c){var d=u[0],h=u[1],g=u[2],y=c[0],w=c[1],v=c[2],S=y-d,x=w-h,E=S*S+x*x,I,k;if(E<fk)k=Math.log(v/g)/t,I=function(U){return[d+U*S,h+U*x,g*Math.exp(t*U*k)]};else{var z=Math.sqrt(E),N=(v*v-g*g+i*E)/(2*g*e*z),O=(v*v-g*g-i*E)/(2*v*e*z),_=Math.log(Math.sqrt(N*N+1)-N),J=Math.log(Math.sqrt(O*O+1)-O);k=(J-_)/t,I=function(U){var W=U*k,F=KS(_),nt=g/(e*z)*(F*hk(t*W+_)-dk(_));return[d+nt*S,h+nt*x,g*F/KS(t*W+_)]}}return I.duration=k*1e3*t/Math.SQRT2,I}return a.rho=function(u){var c=Math.max(.001,+u),d=c*c,h=d*d;return n(c,d,h)},a}(Math.SQRT2,2,4);var Ko=0,du=0,uu=0,xx=1e3,pd,hu,vd=0,Ra=0,Bd=0,zu=typeof performance=="object"&&performance.now?performance:Date,Tx=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function Ky(){return Ra||(Tx(mk),Ra=zu.now()+Bd)}function mk(){Ra=0}function wd(){this._call=this._time=this._next=null}wd.prototype=Ax.prototype={constructor:wd,restart:function(n,t,e){if(typeof n!="function")throw new TypeError("callback is not a function");e=(e==null?Ky():+e)+(t==null?0:+t),!this._next&&hu!==this&&(hu?hu._next=this:pd=this,hu=this),this._call=n,this._time=e,gy()},stop:function(){this._call&&(this._call=null,this._time=1/0,gy())}};function Ax(n,t,e){var i=new wd;return i.restart(n,t,e),i}function yk(){Ky(),++Ko;for(var n=pd,t;n;)(t=Ra-n._time)>=0&&n._call.call(void 0,t),n=n._next;--Ko}function FS(){Ra=(vd=zu.now())+Bd,Ko=du=0;try{yk()}finally{Ko=0,vk(),Ra=0}}function pk(){var n=zu.now(),t=n-vd;t>xx&&(Bd-=t,vd=n)}function vk(){for(var n,t=pd,e,i=1/0;t;)t._call?(i>t._time&&(i=t._time),n=t,t=t._next):(e=t._next,t._next=null,t=n?n._next=e:pd=e);hu=n,gy(i)}function gy(n){if(!Ko){du&&(du=clearTimeout(du));var t=n-Ra;t>24?(n<1/0&&(du=setTimeout(FS,n-zu.now()-Bd)),uu&&(uu=clearInterval(uu))):(uu||(vd=zu.now(),uu=setInterval(pk,xx)),Ko=1,Tx(FS))}}function ZS(n,t,e){var i=new wd;return t=t==null?0:+t,i.restart(a=>{i.stop(),n(a+t)},t,e),i}var wk=Md("start","end","cancel","interrupt"),Sk=[],Ex=0,QS=1,my=2,Pf=3,WS=4,yy=5,Jf=6;function zd(n,t,e,i,a,u){var c=n.__transition;if(!c)n.__transition={};else if(e in c)return;bk(n,e,{name:t,index:i,group:a,on:wk,tween:Sk,time:u.time,delay:u.delay,duration:u.duration,ease:u.ease,timer:null,state:Ex})}function Fy(n,t){var e=er(n,t);if(e.state>Ex)throw new Error("too late; already scheduled");return e}function Dr(n,t){var e=er(n,t);if(e.state>Pf)throw new Error("too late; already running");return e}function er(n,t){var e=n.__transition;if(!e||!(e=e[t]))throw new Error("transition not found");return e}function bk(n,t,e){var i=n.__transition,a;i[t]=e,e.timer=Ax(u,0,e.time);function u(g){e.state=QS,e.timer.restart(c,e.delay,e.time),e.delay<=g&&c(g-e.delay)}function c(g){var y,w,v,S;if(e.state!==QS)return h();for(y in i)if(S=i[y],S.name===e.name){if(S.state===Pf)return ZS(c);S.state===WS?(S.state=Jf,S.timer.stop(),S.on.call("interrupt",n,n.__data__,S.index,S.group),delete i[y]):+y<t&&(S.state=Jf,S.timer.stop(),S.on.call("cancel",n,n.__data__,S.index,S.group),delete i[y])}if(ZS(function(){e.state===Pf&&(e.state=WS,e.timer.restart(d,e.delay,e.time),d(g))}),e.state=my,e.on.call("start",n,n.__data__,e.index,e.group),e.state===my){for(e.state=Pf,a=new Array(v=e.tween.length),y=0,w=-1;y<v;++y)(S=e.tween[y].value.call(n,n.__data__,e.index,e.group))&&(a[++w]=S);a.length=w+1}}function d(g){for(var y=g<e.duration?e.ease.call(null,g/e.duration):(e.timer.restart(h),e.state=yy,1),w=-1,v=a.length;++w<v;)a[w].call(n,y);e.state===yy&&(e.on.call("end",n,n.__data__,e.index,e.group),h())}function h(){e.state=Jf,e.timer.stop(),delete i[t];for(var g in i)return;delete n.__transition}}function Hf(n,t){var e=n.__transition,i,a,u=!0,c;if(e){t=t==null?null:t+"";for(c in e){if((i=e[c]).name!==t){u=!1;continue}a=i.state>my&&i.state<yy,i.state=Jf,i.timer.stop(),i.on.call(a?"interrupt":"cancel",n,n.__data__,i.index,i.group),delete e[c]}u&&delete n.__transition}}function xk(n){return this.each(function(){Hf(this,n)})}function Tk(n,t){var e,i;return function(){var a=Dr(this,n),u=a.tween;if(u!==e){i=e=u;for(var c=0,d=i.length;c<d;++c)if(i[c].name===t){i=i.slice(),i.splice(c,1);break}}a.tween=i}}function Ak(n,t,e){var i,a;if(typeof e!="function")throw new Error;return function(){var u=Dr(this,n),c=u.tween;if(c!==i){a=(i=c).slice();for(var d={name:t,value:e},h=0,g=a.length;h<g;++h)if(a[h].name===t){a[h]=d;break}h===g&&a.push(d)}u.tween=a}}function Ek(n,t){var e=this._id;if(n+="",arguments.length<2){for(var i=er(this.node(),e).tween,a=0,u=i.length,c;a<u;++a)if((c=i[a]).name===n)return c.value;return null}return this.each((t==null?Tk:Ak)(e,n,t))}function Zy(n,t,e){var i=n._id;return n.each(function(){var a=Dr(this,i);(a.value||(a.value={}))[t]=e.apply(this,arguments)}),function(a){return er(a,i).value[t]}}function Nx(n,t){var e;return(typeof t=="number"?$s:t instanceof Bu?GS:(e=Bu(t))?(t=e,GS):ak)(n,t)}function Nk(n){return function(){this.removeAttribute(n)}}function Dk(n){return function(){this.removeAttributeNS(n.space,n.local)}}function Ck(n,t,e){var i,a=e+"",u;return function(){var c=this.getAttribute(n);return c===a?null:c===i?u:u=t(i=c,e)}}function kk(n,t,e){var i,a=e+"",u;return function(){var c=this.getAttributeNS(n.space,n.local);return c===a?null:c===i?u:u=t(i=c,e)}}function Ok(n,t,e){var i,a,u;return function(){var c,d=e(this),h;return d==null?void this.removeAttribute(n):(c=this.getAttribute(n),h=d+"",c===h?null:c===i&&h===a?u:(a=h,u=t(i=c,d)))}}function Ik(n,t,e){var i,a,u;return function(){var c,d=e(this),h;return d==null?void this.removeAttributeNS(n.space,n.local):(c=this.getAttributeNS(n.space,n.local),h=d+"",c===h?null:c===i&&h===a?u:(a=h,u=t(i=c,d)))}}function Mk(n,t){var e=Rd(n),i=e==="transform"?ck:Nx;return this.attrTween(n,typeof t=="function"?(e.local?Ik:Ok)(e,i,Zy(this,"attr."+n,t)):t==null?(e.local?Dk:Nk)(e):(e.local?kk:Ck)(e,i,t))}function Rk(n,t){return function(e){this.setAttribute(n,t.call(this,e))}}function Bk(n,t){return function(e){this.setAttributeNS(n.space,n.local,t.call(this,e))}}function zk(n,t){var e,i;function a(){var u=t.apply(this,arguments);return u!==i&&(e=(i=u)&&Bk(n,u)),e}return a._value=t,a}function Lk(n,t){var e,i;function a(){var u=t.apply(this,arguments);return u!==i&&(e=(i=u)&&Rk(n,u)),e}return a._value=t,a}function _k(n,t){var e="attr."+n;if(arguments.length<2)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;var i=Rd(n);return this.tween(e,(i.local?zk:Lk)(i,t))}function Uk(n,t){return function(){Fy(this,n).delay=+t.apply(this,arguments)}}function qk(n,t){return t=+t,function(){Fy(this,n).delay=t}}function Pk(n){var t=this._id;return arguments.length?this.each((typeof n=="function"?Uk:qk)(t,n)):er(this.node(),t).delay}function Jk(n,t){return function(){Dr(this,n).duration=+t.apply(this,arguments)}}function Hk(n,t){return t=+t,function(){Dr(this,n).duration=t}}function $k(n){var t=this._id;return arguments.length?this.each((typeof n=="function"?Jk:Hk)(t,n)):er(this.node(),t).duration}function Vk(n,t){if(typeof t!="function")throw new Error;return function(){Dr(this,n).ease=t}}function jk(n){var t=this._id;return arguments.length?this.each(Vk(t,n)):er(this.node(),t).ease}function Yk(n,t){return function(){var e=t.apply(this,arguments);if(typeof e!="function")throw new Error;Dr(this,n).ease=e}}function Gk(n){if(typeof n!="function")throw new Error;return this.each(Yk(this._id,n))}function Xk(n){typeof n!="function"&&(n=rx(n));for(var t=this._groups,e=t.length,i=new Array(e),a=0;a<e;++a)for(var u=t[a],c=u.length,d=i[a]=[],h,g=0;g<c;++g)(h=u[g])&&n.call(h,h.__data__,g,u)&&d.push(h);return new is(i,this._parents,this._name,this._id)}function Kk(n){if(n._id!==this._id)throw new Error;for(var t=this._groups,e=n._groups,i=t.length,a=e.length,u=Math.min(i,a),c=new Array(i),d=0;d<u;++d)for(var h=t[d],g=e[d],y=h.length,w=c[d]=new Array(y),v,S=0;S<y;++S)(v=h[S]||g[S])&&(w[S]=v);for(;d<i;++d)c[d]=t[d];return new is(c,this._parents,this._name,this._id)}function Fk(n){return(n+"").trim().split(/^|\s+/).every(function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||t==="start"})}function Zk(n,t,e){var i,a,u=Fk(t)?Fy:Dr;return function(){var c=u(this,n),d=c.on;d!==i&&(a=(i=d).copy()).on(t,e),c.on=a}}function Qk(n,t){var e=this._id;return arguments.length<2?er(this.node(),e).on.on(n):this.each(Zk(e,n,t))}function Wk(n){return function(){var t=this.parentNode;for(var e in this.__transition)if(+e!==n)return;t&&t.removeChild(this)}}function tO(){return this.on("end.remove",Wk(this._id))}function eO(n){var t=this._name,e=this._id;typeof n!="function"&&(n=Yy(n));for(var i=this._groups,a=i.length,u=new Array(a),c=0;c<a;++c)for(var d=i[c],h=d.length,g=u[c]=new Array(h),y,w,v=0;v<h;++v)(y=d[v])&&(w=n.call(y,y.__data__,v,d))&&("__data__"in y&&(w.__data__=y.__data__),g[v]=w,zd(g[v],t,e,v,g,er(y,e)));return new is(u,this._parents,t,e)}function nO(n){var t=this._name,e=this._id;typeof n!="function"&&(n=nx(n));for(var i=this._groups,a=i.length,u=[],c=[],d=0;d<a;++d)for(var h=i[d],g=h.length,y,w=0;w<g;++w)if(y=h[w]){for(var v=n.call(y,y.__data__,w,h),S,x=er(y,e),E=0,I=v.length;E<I;++E)(S=v[E])&&zd(S,t,e,E,v,x);u.push(v),c.push(y)}return new is(u,c,t,e)}var rO=Gu.prototype.constructor;function iO(){return new rO(this._groups,this._parents)}function sO(n,t){var e,i,a;return function(){var u=Xo(this,n),c=(this.style.removeProperty(n),Xo(this,n));return u===c?null:u===e&&c===i?a:a=t(e=u,i=c)}}function Dx(n){return function(){this.style.removeProperty(n)}}function aO(n,t,e){var i,a=e+"",u;return function(){var c=Xo(this,n);return c===a?null:c===i?u:u=t(i=c,e)}}function oO(n,t,e){var i,a,u;return function(){var c=Xo(this,n),d=e(this),h=d+"";return d==null&&(h=d=(this.style.removeProperty(n),Xo(this,n))),c===h?null:c===i&&h===a?u:(a=h,u=t(i=c,d))}}function lO(n,t){var e,i,a,u="style."+t,c="end."+u,d;return function(){var h=Dr(this,n),g=h.on,y=h.value[u]==null?d||(d=Dx(t)):void 0;(g!==e||a!==y)&&(i=(e=g).copy()).on(c,a=y),h.on=i}}function uO(n,t,e){var i=(n+="")=="transform"?uk:Nx;return t==null?this.styleTween(n,sO(n,i)).on("end.style."+n,Dx(n)):typeof t=="function"?this.styleTween(n,oO(n,i,Zy(this,"style."+n,t))).each(lO(this._id,n)):this.styleTween(n,aO(n,i,t),e).on("end.style."+n,null)}function cO(n,t,e){return function(i){this.style.setProperty(n,t.call(this,i),e)}}function fO(n,t,e){var i,a;function u(){var c=t.apply(this,arguments);return c!==a&&(i=(a=c)&&cO(n,c,e)),i}return u._value=t,u}function dO(n,t,e){var i="style."+(n+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(t==null)return this.tween(i,null);if(typeof t!="function")throw new Error;return this.tween(i,fO(n,t,e??""))}function hO(n){return function(){this.textContent=n}}function gO(n){return function(){var t=n(this);this.textContent=t??""}}function mO(n){return this.tween("text",typeof n=="function"?gO(Zy(this,"text",n)):hO(n==null?"":n+""))}function yO(n){return function(t){this.textContent=n.call(this,t)}}function pO(n){var t,e;function i(){var a=n.apply(this,arguments);return a!==e&&(t=(e=a)&&yO(a)),t}return i._value=n,i}function vO(n){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(n==null)return this.tween(t,null);if(typeof n!="function")throw new Error;return this.tween(t,pO(n))}function wO(){for(var n=this._name,t=this._id,e=Cx(),i=this._groups,a=i.length,u=0;u<a;++u)for(var c=i[u],d=c.length,h,g=0;g<d;++g)if(h=c[g]){var y=er(h,t);zd(h,n,e,g,c,{time:y.time+y.delay+y.duration,delay:0,duration:y.duration,ease:y.ease})}return new is(i,this._parents,n,e)}function SO(){var n,t,e=this,i=e._id,a=e.size();return new Promise(function(u,c){var d={value:c},h={value:function(){--a===0&&u()}};e.each(function(){var g=Dr(this,i),y=g.on;y!==n&&(t=(n=y).copy(),t._.cancel.push(d),t._.interrupt.push(d),t._.end.push(h)),g.on=t}),a===0&&u()})}var bO=0;function is(n,t,e,i){this._groups=n,this._parents=t,this._name=e,this._id=i}function Cx(){return++bO}var Yr=Gu.prototype;is.prototype={constructor:is,select:eO,selectAll:nO,selectChild:Yr.selectChild,selectChildren:Yr.selectChildren,filter:Xk,merge:Kk,selection:iO,transition:wO,call:Yr.call,nodes:Yr.nodes,node:Yr.node,size:Yr.size,empty:Yr.empty,each:Yr.each,on:Qk,attr:Mk,attrTween:_k,style:uO,styleTween:dO,text:mO,textTween:vO,remove:tO,tween:Ek,delay:Pk,duration:$k,ease:jk,easeVarying:Gk,end:SO,[Symbol.iterator]:Yr[Symbol.iterator]};function xO(n){return((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2}var TO={time:null,delay:0,duration:250,ease:xO};function AO(n,t){for(var e;!(e=n.__transition)||!(e=e[t]);)if(!(n=n.parentNode))throw new Error(`transition ${t} not found`);return e}function EO(n){var t,e;n instanceof is?(t=n._id,n=n._name):(t=Cx(),(e=TO).time=Ky(),n=n==null?null:n+"");for(var i=this._groups,a=i.length,u=0;u<a;++u)for(var c=i[u],d=c.length,h,g=0;g<d;++g)(h=c[g])&&zd(h,n,t,g,c,e||AO(h,t));return new is(i,this._parents,n,t)}Gu.prototype.interrupt=xk;Gu.prototype.transition=EO;const Df=n=>()=>n;function NO(n,{sourceEvent:t,target:e,transform:i,dispatch:a}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:e,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:a}})}function Qi(n,t,e){this.k=n,this.x=t,this.y=e}Qi.prototype={constructor:Qi,scale:function(n){return n===1?this:new Qi(this.k*n,this.x,this.y)},translate:function(n,t){return n===0&t===0?this:new Qi(this.k,this.x+this.k*n,this.y+this.k*t)},apply:function(n){return[n[0]*this.k+this.x,n[1]*this.k+this.y]},applyX:function(n){return n*this.k+this.x},applyY:function(n){return n*this.k+this.y},invert:function(n){return[(n[0]-this.x)/this.k,(n[1]-this.y)/this.k]},invertX:function(n){return(n-this.x)/this.k},invertY:function(n){return(n-this.y)/this.k},rescaleX:function(n){return n.copy().domain(n.range().map(this.invertX,this).map(n.invert,n))},rescaleY:function(n){return n.copy().domain(n.range().map(this.invertY,this).map(n.invert,n))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Ld=new Qi(1,0,0);kx.prototype=Qi.prototype;function kx(n){for(;!n.__zoom;)if(!(n=n.parentNode))return Ld;return n.__zoom}function xm(n){n.stopImmediatePropagation()}function cu(n){n.preventDefault(),n.stopImmediatePropagation()}function DO(n){return(!n.ctrlKey||n.type==="wheel")&&!n.button}function CO(){var n=this;return n instanceof SVGElement?(n=n.ownerSVGElement||n,n.hasAttribute("viewBox")?(n=n.viewBox.baseVal,[[n.x,n.y],[n.x+n.width,n.y+n.height]]):[[0,0],[n.width.baseVal.value,n.height.baseVal.value]]):[[0,0],[n.clientWidth,n.clientHeight]]}function tb(){return this.__zoom||Ld}function kO(n){return-n.deltaY*(n.deltaMode===1?.05:n.deltaMode?1:.002)*(n.ctrlKey?10:1)}function OO(){return navigator.maxTouchPoints||"ontouchstart"in this}function IO(n,t,e){var i=n.invertX(t[0][0])-e[0][0],a=n.invertX(t[1][0])-e[1][0],u=n.invertY(t[0][1])-e[0][1],c=n.invertY(t[1][1])-e[1][1];return n.translate(a>i?(i+a)/2:Math.min(0,i)||Math.max(0,a),c>u?(u+c)/2:Math.min(0,u)||Math.max(0,c))}function Ox(){var n=DO,t=CO,e=IO,i=kO,a=OO,u=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],d=250,h=gk,g=Md("start","zoom","end"),y,w,v,S=500,x=150,E=0,I=10;function k(M){M.property("__zoom",tb).on("wheel.zoom",W,{passive:!1}).on("mousedown.zoom",F).on("dblclick.zoom",nt).filter(a).on("touchstart.zoom",ft).on("touchmove.zoom",ot).on("touchend.zoom touchcancel.zoom",ct).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}k.transform=function(M,j,C,B){var H=M.selection?M.selection():M;H.property("__zoom",tb),M!==H?_(M,j,C,B):H.interrupt().each(function(){J(this,arguments).event(B).start().zoom(null,typeof j=="function"?j.apply(this,arguments):j).end()})},k.scaleBy=function(M,j,C,B){k.scaleTo(M,function(){var H=this.__zoom.k,q=typeof j=="function"?j.apply(this,arguments):j;return H*q},C,B)},k.scaleTo=function(M,j,C,B){k.transform(M,function(){var H=t.apply(this,arguments),q=this.__zoom,D=C==null?O(H):typeof C=="function"?C.apply(this,arguments):C,P=q.invert(D),tt=typeof j=="function"?j.apply(this,arguments):j;return e(N(z(q,tt),D,P),H,c)},C,B)},k.translateBy=function(M,j,C,B){k.transform(M,function(){return e(this.__zoom.translate(typeof j=="function"?j.apply(this,arguments):j,typeof C=="function"?C.apply(this,arguments):C),t.apply(this,arguments),c)},null,B)},k.translateTo=function(M,j,C,B,H){k.transform(M,function(){var q=t.apply(this,arguments),D=this.__zoom,P=B==null?O(q):typeof B=="function"?B.apply(this,arguments):B;return e(Ld.translate(P[0],P[1]).scale(D.k).translate(typeof j=="function"?-j.apply(this,arguments):-j,typeof C=="function"?-C.apply(this,arguments):-C),q,c)},B,H)};function z(M,j){return j=Math.max(u[0],Math.min(u[1],j)),j===M.k?M:new Qi(j,M.x,M.y)}function N(M,j,C){var B=j[0]-C[0]*M.k,H=j[1]-C[1]*M.k;return B===M.x&&H===M.y?M:new Qi(M.k,B,H)}function O(M){return[(+M[0][0]+ +M[1][0])/2,(+M[0][1]+ +M[1][1])/2]}function _(M,j,C,B){M.on("start.zoom",function(){J(this,arguments).event(B).start()}).on("interrupt.zoom end.zoom",function(){J(this,arguments).event(B).end()}).tween("zoom",function(){var H=this,q=arguments,D=J(H,q).event(B),P=t.apply(H,q),tt=C==null?O(P):typeof C=="function"?C.apply(H,q):C,rt=Math.max(P[1][0]-P[0][0],P[1][1]-P[0][1]),ut=H.__zoom,gt=typeof j=="function"?j.apply(H,q):j,dt=h(ut.invert(tt).concat(rt/ut.k),gt.invert(tt).concat(rt/gt.k));return function(mt){if(mt===1)mt=gt;else{var pt=dt(mt),Ct=rt/pt[2];mt=new Qi(Ct,tt[0]-pt[0]*Ct,tt[1]-pt[1]*Ct)}D.zoom(null,mt)}})}function J(M,j,C){return!C&&M.__zooming||new U(M,j)}function U(M,j){this.that=M,this.args=j,this.active=0,this.sourceEvent=null,this.extent=t.apply(M,j),this.taps=0}U.prototype={event:function(M){return M&&(this.sourceEvent=M),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(M,j){return this.mouse&&M!=="mouse"&&(this.mouse[1]=j.invert(this.mouse[0])),this.touch0&&M!=="touch"&&(this.touch0[1]=j.invert(this.touch0[0])),this.touch1&&M!=="touch"&&(this.touch1[1]=j.invert(this.touch1[0])),this.that.__zoom=j,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(M){var j=dn(this.that).datum();g.call(M,this.that,new NO(M,{sourceEvent:this.sourceEvent,target:k,transform:this.that.__zoom,dispatch:g}),j)}};function W(M,...j){if(!n.apply(this,arguments))return;var C=J(this,j).event(M),B=this.__zoom,H=Math.max(u[0],Math.min(u[1],B.k*Math.pow(2,i.apply(this,arguments)))),q=Xn(M);if(C.wheel)(C.mouse[0][0]!==q[0]||C.mouse[0][1]!==q[1])&&(C.mouse[1]=B.invert(C.mouse[0]=q)),clearTimeout(C.wheel);else{if(B.k===H)return;C.mouse=[q,B.invert(q)],Hf(this),C.start()}cu(M),C.wheel=setTimeout(D,x),C.zoom("mouse",e(N(z(B,H),C.mouse[0],C.mouse[1]),C.extent,c));function D(){C.wheel=null,C.end()}}function F(M,...j){if(v||!n.apply(this,arguments))return;var C=M.currentTarget,B=J(this,j,!0).event(M),H=dn(M.view).on("mousemove.zoom",tt,!0).on("mouseup.zoom",rt,!0),q=Xn(M,C),D=M.clientX,P=M.clientY;hx(M.view),xm(M),B.mouse=[q,this.__zoom.invert(q)],Hf(this),B.start();function tt(ut){if(cu(ut),!B.moved){var gt=ut.clientX-D,dt=ut.clientY-P;B.moved=gt*gt+dt*dt>E}B.event(ut).zoom("mouse",e(N(B.that.__zoom,B.mouse[0]=Xn(ut,C),B.mouse[1]),B.extent,c))}function rt(ut){H.on("mousemove.zoom mouseup.zoom",null),gx(ut.view,B.moved),cu(ut),B.event(ut).end()}}function nt(M,...j){if(n.apply(this,arguments)){var C=this.__zoom,B=Xn(M.changedTouches?M.changedTouches[0]:M,this),H=C.invert(B),q=C.k*(M.shiftKey?.5:2),D=e(N(z(C,q),B,H),t.apply(this,j),c);cu(M),d>0?dn(this).transition().duration(d).call(_,D,B,M):dn(this).call(k.transform,D,B,M)}}function ft(M,...j){if(n.apply(this,arguments)){var C=M.touches,B=C.length,H=J(this,j,M.changedTouches.length===B).event(M),q,D,P,tt;for(xm(M),D=0;D<B;++D)P=C[D],tt=Xn(P,this),tt=[tt,this.__zoom.invert(tt),P.identifier],H.touch0?!H.touch1&&H.touch0[2]!==tt[2]&&(H.touch1=tt,H.taps=0):(H.touch0=tt,q=!0,H.taps=1+!!y);y&&(y=clearTimeout(y)),q&&(H.taps<2&&(w=tt[0],y=setTimeout(function(){y=null},S)),Hf(this),H.start())}}function ot(M,...j){if(this.__zooming){var C=J(this,j).event(M),B=M.changedTouches,H=B.length,q,D,P,tt;for(cu(M),q=0;q<H;++q)D=B[q],P=Xn(D,this),C.touch0&&C.touch0[2]===D.identifier?C.touch0[0]=P:C.touch1&&C.touch1[2]===D.identifier&&(C.touch1[0]=P);if(D=C.that.__zoom,C.touch1){var rt=C.touch0[0],ut=C.touch0[1],gt=C.touch1[0],dt=C.touch1[1],mt=(mt=gt[0]-rt[0])*mt+(mt=gt[1]-rt[1])*mt,pt=(pt=dt[0]-ut[0])*pt+(pt=dt[1]-ut[1])*pt;D=z(D,Math.sqrt(mt/pt)),P=[(rt[0]+gt[0])/2,(rt[1]+gt[1])/2],tt=[(ut[0]+dt[0])/2,(ut[1]+dt[1])/2]}else if(C.touch0)P=C.touch0[0],tt=C.touch0[1];else return;C.zoom("touch",e(N(D,P,tt),C.extent,c))}}function ct(M,...j){if(this.__zooming){var C=J(this,j).event(M),B=M.changedTouches,H=B.length,q,D;for(xm(M),v&&clearTimeout(v),v=setTimeout(function(){v=null},S),q=0;q<H;++q)D=B[q],C.touch0&&C.touch0[2]===D.identifier?delete C.touch0:C.touch1&&C.touch1[2]===D.identifier&&delete C.touch1;if(C.touch1&&!C.touch0&&(C.touch0=C.touch1,delete C.touch1),C.touch0)C.touch0[1]=this.__zoom.invert(C.touch0[0]);else if(C.end(),C.taps===2&&(D=Xn(D,this),Math.hypot(w[0]-D[0],w[1]-D[1])<I)){var P=dn(this).on("dblclick.zoom");P&&P.apply(this,arguments)}}}return k.wheelDelta=function(M){return arguments.length?(i=typeof M=="function"?M:Df(+M),k):i},k.filter=function(M){return arguments.length?(n=typeof M=="function"?M:Df(!!M),k):n},k.touchable=function(M){return arguments.length?(a=typeof M=="function"?M:Df(!!M),k):a},k.extent=function(M){return arguments.length?(t=typeof M=="function"?M:Df([[+M[0][0],+M[0][1]],[+M[1][0],+M[1][1]]]),k):t},k.scaleExtent=function(M){return arguments.length?(u[0]=+M[0],u[1]=+M[1],k):[u[0],u[1]]},k.translateExtent=function(M){return arguments.length?(c[0][0]=+M[0][0],c[1][0]=+M[1][0],c[0][1]=+M[0][1],c[1][1]=+M[1][1],k):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},k.constrain=function(M){return arguments.length?(e=M,k):e},k.duration=function(M){return arguments.length?(d=+M,k):d},k.interpolate=function(M){return arguments.length?(h=M,k):h},k.on=function(){var M=g.on.apply(g,arguments);return M===g?k:M},k.clickDistance=function(M){return arguments.length?(E=(M=+M)*M,k):Math.sqrt(E)},k.tapDistance=function(M){return arguments.length?(I=+M,k):I},k}const Nr={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:n=>`Node type "${n}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:n=>`The old edge with id=${n} does not exist.`,error009:n=>`Marker type "${n}" doesn't exist.`,error008:(n,{id:t,sourceHandle:e,targetHandle:i})=>`Couldn't create edge for ${n} handle id: "${n==="source"?e:i}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:n=>`Edge type "${n}" not found. Using fallback type "default".`,error012:n=>`Node with id "${n}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(n="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${n}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},Lu=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Ix=["Enter"," ","Escape"];var Fo;(function(n){n.Strict="strict",n.Loose="loose"})(Fo||(Fo={}));var ka;(function(n){n.Free="free",n.Vertical="vertical",n.Horizontal="horizontal"})(ka||(ka={}));var _u;(function(n){n.Partial="partial",n.Full="full"})(_u||(_u={}));const Mx={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var Vs;(function(n){n.Bezier="default",n.Straight="straight",n.Step="step",n.SmoothStep="smoothstep",n.SimpleBezier="simplebezier"})(Vs||(Vs={}));var Sd;(function(n){n.Arrow="arrow",n.ArrowClosed="arrowclosed"})(Sd||(Sd={}));var Tt;(function(n){n.Left="left",n.Top="top",n.Right="right",n.Bottom="bottom"})(Tt||(Tt={}));const eb={[Tt.Left]:Tt.Right,[Tt.Right]:Tt.Left,[Tt.Top]:Tt.Bottom,[Tt.Bottom]:Tt.Top};function Rx(n){return n===null?null:n?"valid":"invalid"}const Bx=n=>"id"in n&&"source"in n&&"target"in n,MO=n=>"id"in n&&"position"in n&&!("source"in n)&&!("target"in n),Qy=n=>"id"in n&&"internals"in n&&!("source"in n)&&!("target"in n),Ku=(n,t=[0,0])=>{const{width:e,height:i}=as(n),a=n.origin??t,u=e*a[0],c=i*a[1];return{x:n.position.x-u,y:n.position.y-c}},RO=(n,t={nodeOrigin:[0,0],nodeLookup:void 0})=>{if(n.length===0)return{x:0,y:0,width:0,height:0};const e=n.reduce((i,a)=>{const u=typeof a=="string";let c=!t.nodeLookup&&!u?a:void 0;t.nodeLookup&&(c=u?t.nodeLookup.get(a):Qy(a)?a:t.nodeLookup.get(a.id));const d=c?bd(c,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return _d(i,d)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Ud(e)},Fu=(n,t={})=>{if(n.size===0)return{x:0,y:0,width:0,height:0};let e={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return n.forEach(i=>{if(t.filter===void 0||t.filter(i)){const a=bd(i);e=_d(e,a)}}),Ud(e)},zx=(n,t,[e,i,a]=[0,0,1],u=!1,c=!1)=>{const d={...Zu(t,[e,i,a]),width:t.width/a,height:t.height/a},h=[];for(const g of n.values()){const{measured:y,selectable:w=!0,hidden:v=!1}=g;if(c&&!w||v)continue;const S=y.width??g.width??g.initialWidth??null,x=y.height??g.height??g.initialHeight??null,E=Uu(d,Qo(g)),I=(S??0)*(x??0),k=u&&E>0;(!g.internals.handleBounds||k||E>=I||g.dragging)&&h.push(g)}return h},BO=(n,t)=>{const e=new Set;return n.forEach(i=>{e.add(i.id)}),t.filter(i=>e.has(i.source)||e.has(i.target))};function zO(n,t){const e=new Map,i=t!=null&&t.nodes?new Set(t.nodes.map(a=>a.id)):null;return n.forEach(a=>{a.measured.width&&a.measured.height&&((t==null?void 0:t.includeHiddenNodes)||!a.hidden)&&(!i||i.has(a.id))&&e.set(a.id,a)}),e}async function LO({nodes:n,width:t,height:e,panZoom:i,minZoom:a,maxZoom:u},c){if(n.size===0)return Promise.resolve(!0);const d=zO(n,c),h=Fu(d),g=Wy(h,t,e,(c==null?void 0:c.minZoom)??a,(c==null?void 0:c.maxZoom)??u,(c==null?void 0:c.padding)??.1);return await i.setViewport(g,{duration:c==null?void 0:c.duration}),Promise.resolve(!0)}function Lx({nodeId:n,nextPosition:t,nodeLookup:e,nodeOrigin:i=[0,0],nodeExtent:a,onError:u}){const c=e.get(n),d=c.parentId?e.get(c.parentId):void 0,{x:h,y:g}=d?d.internals.positionAbsolute:{x:0,y:0},y=c.origin??i;let w=a;if(c.extent==="parent"&&!c.expandParent)if(!d)u==null||u("005",Nr.error005());else{const S=d.measured.width,x=d.measured.height;S&&x&&(w=[[h,g],[h+S,g+x]])}else d&&Wo(c.extent)&&(w=[[c.extent[0][0]+h,c.extent[0][1]+g],[c.extent[1][0]+h,c.extent[1][1]+g]]);const v=Wo(w)?Ba(t,w,c.measured):t;return(c.measured.width===void 0||c.measured.height===void 0)&&(u==null||u("015",Nr.error015())),{position:{x:v.x-h+(c.measured.width??0)*y[0],y:v.y-g+(c.measured.height??0)*y[1]},positionAbsolute:v}}async function _O({nodesToRemove:n=[],edgesToRemove:t=[],nodes:e,edges:i,onBeforeDelete:a}){const u=new Set(n.map(v=>v.id)),c=[];for(const v of e){if(v.deletable===!1)continue;const S=u.has(v.id),x=!S&&v.parentId&&c.find(E=>E.id===v.parentId);(S||x)&&c.push(v)}const d=new Set(t.map(v=>v.id)),h=i.filter(v=>v.deletable!==!1),y=BO(c,h);for(const v of h)d.has(v.id)&&!y.find(x=>x.id===v.id)&&y.push(v);if(!a)return{edges:y,nodes:c};const w=await a({nodes:c,edges:y});return typeof w=="boolean"?w?{edges:y,nodes:c}:{edges:[],nodes:[]}:w}const Zo=(n,t=0,e=1)=>Math.min(Math.max(n,t),e),Ba=(n={x:0,y:0},t,e)=>({x:Zo(n.x,t[0][0],t[1][0]-((e==null?void 0:e.width)??0)),y:Zo(n.y,t[0][1],t[1][1]-((e==null?void 0:e.height)??0))});function _x(n,t,e){const{width:i,height:a}=as(e),{x:u,y:c}=e.internals.positionAbsolute;return Ba(n,[[u,c],[u+i,c+a]],t)}const nb=(n,t,e)=>n<t?Zo(Math.abs(n-t),1,t)/t:n>e?-Zo(Math.abs(n-e),1,t)/t:0,Ux=(n,t,e=15,i=40)=>{const a=nb(n.x,i,t.width-i)*e,u=nb(n.y,i,t.height-i)*e;return[a,u]},_d=(n,t)=>({x:Math.min(n.x,t.x),y:Math.min(n.y,t.y),x2:Math.max(n.x2,t.x2),y2:Math.max(n.y2,t.y2)}),py=({x:n,y:t,width:e,height:i})=>({x:n,y:t,x2:n+e,y2:t+i}),Ud=({x:n,y:t,x2:e,y2:i})=>({x:n,y:t,width:e-n,height:i-t}),Qo=(n,t=[0,0])=>{var a,u;const{x:e,y:i}=Qy(n)?n.internals.positionAbsolute:Ku(n,t);return{x:e,y:i,width:((a=n.measured)==null?void 0:a.width)??n.width??n.initialWidth??0,height:((u=n.measured)==null?void 0:u.height)??n.height??n.initialHeight??0}},bd=(n,t=[0,0])=>{var a,u;const{x:e,y:i}=Qy(n)?n.internals.positionAbsolute:Ku(n,t);return{x:e,y:i,x2:e+(((a=n.measured)==null?void 0:a.width)??n.width??n.initialWidth??0),y2:i+(((u=n.measured)==null?void 0:u.height)??n.height??n.initialHeight??0)}},qx=(n,t)=>Ud(_d(py(n),py(t))),Uu=(n,t)=>{const e=Math.max(0,Math.min(n.x+n.width,t.x+t.width)-Math.max(n.x,t.x)),i=Math.max(0,Math.min(n.y+n.height,t.y+t.height)-Math.max(n.y,t.y));return Math.ceil(e*i)},rb=n=>Qn(n.width)&&Qn(n.height)&&Qn(n.x)&&Qn(n.y),Qn=n=>!isNaN(n)&&isFinite(n),UO=(n,t)=>{},qd=(n,t=[1,1])=>({x:t[0]*Math.round(n.x/t[0]),y:t[1]*Math.round(n.y/t[1])}),Zu=({x:n,y:t},[e,i,a],u=!1,c=[1,1])=>{const d={x:(n-e)/a,y:(t-i)/a};return u?qd(d,c):d},xd=({x:n,y:t},[e,i,a])=>({x:n*a+e,y:t*a+i});function Do(n,t){if(typeof n=="number")return Math.floor(t-t/(1+n));if(typeof n=="string"&&n.endsWith("px")){const e=parseFloat(n);if(!Number.isNaN(e))return Math.floor(e)}if(typeof n=="string"&&n.endsWith("%")){const e=parseFloat(n);if(!Number.isNaN(e))return Math.floor(t*e*.01)}return console.error(`[React Flow] The padding value "${n}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function qO(n,t,e){if(typeof n=="string"||typeof n=="number"){const i=Do(n,e),a=Do(n,t);return{top:i,right:a,bottom:i,left:a,x:a*2,y:i*2}}if(typeof n=="object"){const i=Do(n.top??n.y??0,e),a=Do(n.bottom??n.y??0,e),u=Do(n.left??n.x??0,t),c=Do(n.right??n.x??0,t);return{top:i,right:c,bottom:a,left:u,x:u+c,y:i+a}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function PO(n,t,e,i,a,u){const{x:c,y:d}=xd(n,[t,e,i]),{x:h,y:g}=xd({x:n.x+n.width,y:n.y+n.height},[t,e,i]),y=a-h,w=u-g;return{left:Math.floor(c),top:Math.floor(d),right:Math.floor(y),bottom:Math.floor(w)}}const Wy=(n,t,e,i,a,u)=>{const c=qO(u,t,e),d=(t-c.x)/n.width,h=(e-c.y)/n.height,g=Math.min(d,h),y=Zo(g,i,a),w=n.x+n.width/2,v=n.y+n.height/2,S=t/2-w*y,x=e/2-v*y,E=PO(n,S,x,y,t,e),I={left:Math.min(E.left-c.left,0),top:Math.min(E.top-c.top,0),right:Math.min(E.right-c.right,0),bottom:Math.min(E.bottom-c.bottom,0)};return{x:S-I.left+I.right,y:x-I.top+I.bottom,zoom:y}},Td=()=>{var n;return typeof navigator<"u"&&((n=navigator==null?void 0:navigator.userAgent)==null?void 0:n.indexOf("Mac"))>=0};function Wo(n){return n!==void 0&&n!=="parent"}function as(n){var t,e;return{width:((t=n.measured)==null?void 0:t.width)??n.width??n.initialWidth??0,height:((e=n.measured)==null?void 0:e.height)??n.height??n.initialHeight??0}}function Px(n){var t,e;return(((t=n.measured)==null?void 0:t.width)??n.width??n.initialWidth)!==void 0&&(((e=n.measured)==null?void 0:e.height)??n.height??n.initialHeight)!==void 0}function Jx(n,t={width:0,height:0},e,i,a){const u={...n},c=i.get(e);if(c){const d=c.origin||a;u.x+=c.internals.positionAbsolute.x-(t.width??0)*d[0],u.y+=c.internals.positionAbsolute.y-(t.height??0)*d[1]}return u}function ib(n,t){if(n.size!==t.size)return!1;for(const e of n)if(!t.has(e))return!1;return!0}function wu(n,{snapGrid:t=[0,0],snapToGrid:e=!1,transform:i,containerBounds:a}){const{x:u,y:c}=es(n),d=Zu({x:u-((a==null?void 0:a.left)??0),y:c-((a==null?void 0:a.top)??0)},i),{x:h,y:g}=e?qd(d,t):d;return{xSnapped:h,ySnapped:g,...d}}const tp=n=>({width:n.offsetWidth,height:n.offsetHeight}),Hx=n=>{var t;return((t=n==null?void 0:n.getRootNode)==null?void 0:t.call(n))||(window==null?void 0:window.document)},JO=["INPUT","SELECT","TEXTAREA"];function $x(n){var i,a;const t=((a=(i=n.composedPath)==null?void 0:i.call(n))==null?void 0:a[0])||n.target;return(t==null?void 0:t.nodeType)!==1?!1:JO.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey")}const Vx=n=>"clientX"in n,es=(n,t)=>{var u,c;const e=Vx(n),i=e?n.clientX:(u=n.touches)==null?void 0:u[0].clientX,a=e?n.clientY:(c=n.touches)==null?void 0:c[0].clientY;return{x:i-((t==null?void 0:t.left)??0),y:a-((t==null?void 0:t.top)??0)}},sb=(n,t,e,i,a)=>{const u=t.querySelectorAll(`.${n}`);return!u||!u.length?null:Array.from(u).map(c=>{const d=c.getBoundingClientRect();return{id:c.getAttribute("data-handleid"),type:n,nodeId:a,position:c.getAttribute("data-handlepos"),x:(d.left-e.left)/i,y:(d.top-e.top)/i,...tp(c)}})};function jx({sourceX:n,sourceY:t,targetX:e,targetY:i,sourceControlX:a,sourceControlY:u,targetControlX:c,targetControlY:d}){const h=n*.125+a*.375+c*.375+e*.125,g=t*.125+u*.375+d*.375+i*.125,y=Math.abs(h-n),w=Math.abs(g-t);return[h,g,y,w]}function Cf(n,t){return n>=0?.5*n:t*25*Math.sqrt(-n)}function ab({pos:n,x1:t,y1:e,x2:i,y2:a,c:u}){switch(n){case Tt.Left:return[t-Cf(t-i,u),e];case Tt.Right:return[t+Cf(i-t,u),e];case Tt.Top:return[t,e-Cf(e-a,u)];case Tt.Bottom:return[t,e+Cf(a-e,u)]}}function Yx({sourceX:n,sourceY:t,sourcePosition:e=Tt.Bottom,targetX:i,targetY:a,targetPosition:u=Tt.Top,curvature:c=.25}){const[d,h]=ab({pos:e,x1:n,y1:t,x2:i,y2:a,c}),[g,y]=ab({pos:u,x1:i,y1:a,x2:n,y2:t,c}),[w,v,S,x]=jx({sourceX:n,sourceY:t,targetX:i,targetY:a,sourceControlX:d,sourceControlY:h,targetControlX:g,targetControlY:y});return[`M${n},${t} C${d},${h} ${g},${y} ${i},${a}`,w,v,S,x]}function Gx({sourceX:n,sourceY:t,targetX:e,targetY:i}){const a=Math.abs(e-n)/2,u=e<n?e+a:e-a,c=Math.abs(i-t)/2,d=i<t?i+c:i-c;return[u,d,a,c]}function HO({sourceNode:n,targetNode:t,selected:e=!1,zIndex:i=0,elevateOnSelect:a=!1}){if(!a)return i;const u=e||t.selected||n.selected,c=Math.max(n.internals.z||0,t.internals.z||0,1e3);return i+(u?c:0)}function $O({sourceNode:n,targetNode:t,width:e,height:i,transform:a}){const u=_d(bd(n),bd(t));u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const c={x:-a[0]/a[2],y:-a[1]/a[2],width:e/a[2],height:i/a[2]};return Uu(c,Ud(u))>0}const VO=({source:n,sourceHandle:t,target:e,targetHandle:i})=>`xy-edge__${n}${t||""}-${e}${i||""}`,jO=(n,t)=>t.some(e=>e.source===n.source&&e.target===n.target&&(e.sourceHandle===n.sourceHandle||!e.sourceHandle&&!n.sourceHandle)&&(e.targetHandle===n.targetHandle||!e.targetHandle&&!n.targetHandle)),YO=(n,t)=>{if(!n.source||!n.target)return t;let e;return Bx(n)?e={...n}:e={...n,id:VO(n)},jO(e,t)?t:(e.sourceHandle===null&&delete e.sourceHandle,e.targetHandle===null&&delete e.targetHandle,t.concat(e))};function Xx({sourceX:n,sourceY:t,targetX:e,targetY:i}){const[a,u,c,d]=Gx({sourceX:n,sourceY:t,targetX:e,targetY:i});return[`M ${n},${t}L ${e},${i}`,a,u,c,d]}const ob={[Tt.Left]:{x:-1,y:0},[Tt.Right]:{x:1,y:0},[Tt.Top]:{x:0,y:-1},[Tt.Bottom]:{x:0,y:1}},GO=({source:n,sourcePosition:t=Tt.Bottom,target:e})=>t===Tt.Left||t===Tt.Right?n.x<e.x?{x:1,y:0}:{x:-1,y:0}:n.y<e.y?{x:0,y:1}:{x:0,y:-1},lb=(n,t)=>Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2));function XO({source:n,sourcePosition:t=Tt.Bottom,target:e,targetPosition:i=Tt.Top,center:a,offset:u}){const c=ob[t],d=ob[i],h={x:n.x+c.x*u,y:n.y+c.y*u},g={x:e.x+d.x*u,y:e.y+d.y*u},y=GO({source:h,sourcePosition:t,target:g}),w=y.x!==0?"x":"y",v=y[w];let S=[],x,E;const I={x:0,y:0},k={x:0,y:0},[z,N,O,_]=Gx({sourceX:n.x,sourceY:n.y,targetX:e.x,targetY:e.y});if(c[w]*d[w]===-1){x=a.x??z,E=a.y??N;const U=[{x,y:h.y},{x,y:g.y}],W=[{x:h.x,y:E},{x:g.x,y:E}];c[w]===v?S=w==="x"?U:W:S=w==="x"?W:U}else{const U=[{x:h.x,y:g.y}],W=[{x:g.x,y:h.y}];if(w==="x"?S=c.x===v?W:U:S=c.y===v?U:W,t===i){const ct=Math.abs(n[w]-e[w]);if(ct<=u){const M=Math.min(u-1,u-ct);c[w]===v?I[w]=(h[w]>n[w]?-1:1)*M:k[w]=(g[w]>e[w]?-1:1)*M}}if(t!==i){const ct=w==="x"?"y":"x",M=c[w]===d[ct],j=h[ct]>g[ct],C=h[ct]<g[ct];(c[w]===1&&(!M&&j||M&&C)||c[w]!==1&&(!M&&C||M&&j))&&(S=w==="x"?U:W)}const F={x:h.x+I.x,y:h.y+I.y},nt={x:g.x+k.x,y:g.y+k.y},ft=Math.max(Math.abs(F.x-S[0].x),Math.abs(nt.x-S[0].x)),ot=Math.max(Math.abs(F.y-S[0].y),Math.abs(nt.y-S[0].y));ft>=ot?(x=(F.x+nt.x)/2,E=S[0].y):(x=S[0].x,E=(F.y+nt.y)/2)}return[[n,{x:h.x+I.x,y:h.y+I.y},...S,{x:g.x+k.x,y:g.y+k.y},e],x,E,O,_]}function KO(n,t,e,i){const a=Math.min(lb(n,t)/2,lb(t,e)/2,i),{x:u,y:c}=t;if(n.x===u&&u===e.x||n.y===c&&c===e.y)return`L${u} ${c}`;if(n.y===c){const g=n.x<e.x?-1:1,y=n.y<e.y?1:-1;return`L ${u+a*g},${c}Q ${u},${c} ${u},${c+a*y}`}const d=n.x<e.x?1:-1,h=n.y<e.y?-1:1;return`L ${u},${c+a*h}Q ${u},${c} ${u+a*d},${c}`}function vy({sourceX:n,sourceY:t,sourcePosition:e=Tt.Bottom,targetX:i,targetY:a,targetPosition:u=Tt.Top,borderRadius:c=5,centerX:d,centerY:h,offset:g=20}){const[y,w,v,S,x]=XO({source:{x:n,y:t},sourcePosition:e,target:{x:i,y:a},targetPosition:u,center:{x:d,y:h},offset:g});return[y.reduce((I,k,z)=>{let N="";return z>0&&z<y.length-1?N=KO(y[z-1],k,y[z+1],c):N=`${z===0?"M":"L"}${k.x} ${k.y}`,I+=N,I},""),w,v,S,x]}function ub(n){var t;return n&&!!(n.internals.handleBounds||(t=n.handles)!=null&&t.length)&&!!(n.measured.width||n.width||n.initialWidth)}function FO(n){var w;const{sourceNode:t,targetNode:e}=n;if(!ub(t)||!ub(e))return null;const i=t.internals.handleBounds||cb(t.handles),a=e.internals.handleBounds||cb(e.handles),u=fb((i==null?void 0:i.source)??[],n.sourceHandle),c=fb(n.connectionMode===Fo.Strict?(a==null?void 0:a.target)??[]:((a==null?void 0:a.target)??[]).concat((a==null?void 0:a.source)??[]),n.targetHandle);if(!u||!c)return(w=n.onError)==null||w.call(n,"008",Nr.error008(u?"target":"source",{id:n.id,sourceHandle:n.sourceHandle,targetHandle:n.targetHandle})),null;const d=(u==null?void 0:u.position)||Tt.Bottom,h=(c==null?void 0:c.position)||Tt.Top,g=qu(t,u,d),y=qu(e,c,h);return{sourceX:g.x,sourceY:g.y,targetX:y.x,targetY:y.y,sourcePosition:d,targetPosition:h}}function cb(n){if(!n)return null;const t=[],e=[];for(const i of n)i.width=i.width??1,i.height=i.height??1,i.type==="source"?t.push(i):i.type==="target"&&e.push(i);return{source:t,target:e}}function qu(n,t,e=Tt.Left,i=!1){const a=((t==null?void 0:t.x)??0)+n.internals.positionAbsolute.x,u=((t==null?void 0:t.y)??0)+n.internals.positionAbsolute.y,{width:c,height:d}=t??as(n);if(i)return{x:a+c/2,y:u+d/2};switch((t==null?void 0:t.position)??e){case Tt.Top:return{x:a+c/2,y:u};case Tt.Right:return{x:a+c,y:u+d/2};case Tt.Bottom:return{x:a+c/2,y:u+d};case Tt.Left:return{x:a,y:u+d/2}}}function fb(n,t){return n&&(t?n.find(e=>e.id===t):n[0])||null}function wy(n,t){return n?typeof n=="string"?n:`${t?`${t}__`:""}${Object.keys(n).sort().map(i=>`${i}=${n[i]}`).join("&")}`:""}function ZO(n,{id:t,defaultColor:e,defaultMarkerStart:i,defaultMarkerEnd:a}){const u=new Set;return n.reduce((c,d)=>([d.markerStart||i,d.markerEnd||a].forEach(h=>{if(h&&typeof h=="object"){const g=wy(h,t);u.has(g)||(c.push({id:g,color:h.color||e,...h}),u.add(g))}}),c),[]).sort((c,d)=>c.id.localeCompare(d.id))}const ep={nodeOrigin:[0,0],nodeExtent:Lu,elevateNodesOnSelect:!0,defaults:{}},QO={...ep,checkEquality:!0};function np(n,t){const e={...n};for(const i in t)t[i]!==void 0&&(e[i]=t[i]);return e}function WO(n,t,e){const i=np(ep,e);for(const a of n.values())if(a.parentId)rp(a,n,t,i);else{const u=Ku(a,i.nodeOrigin),c=Wo(a.extent)?a.extent:i.nodeExtent,d=Ba(u,c,as(a));a.internals.positionAbsolute=d}}function Sy(n,t,e,i){var h,g;const a=np(QO,i);let u=!0;const c=new Map(t),d=a!=null&&a.elevateNodesOnSelect?1e3:0;t.clear(),e.clear();for(const y of n){let w=c.get(y.id);if(a.checkEquality&&y===(w==null?void 0:w.internals.userNode))t.set(y.id,w);else{const v=Ku(y,a.nodeOrigin),S=Wo(y.extent)?y.extent:a.nodeExtent,x=Ba(v,S,as(y));w={...a.defaults,...y,measured:{width:(h=y.measured)==null?void 0:h.width,height:(g=y.measured)==null?void 0:g.height},internals:{positionAbsolute:x,handleBounds:y.measured?w==null?void 0:w.internals.handleBounds:void 0,z:Kx(y,d),userNode:y}},t.set(y.id,w)}(!w.measured||!w.measured.width||!w.measured.height)&&!w.hidden&&(u=!1),y.parentId&&rp(w,t,e,i)}return u}function tI(n,t){if(!n.parentId)return;const e=t.get(n.parentId);e?e.set(n.id,n):t.set(n.parentId,new Map([[n.id,n]]))}function rp(n,t,e,i){const{elevateNodesOnSelect:a,nodeOrigin:u,nodeExtent:c}=np(ep,i),d=n.parentId,h=t.get(d);if(!h){console.warn(`Parent node ${d} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}tI(n,e);const g=a?1e3:0,{x:y,y:w,z:v}=eI(n,h,u,c,g),{positionAbsolute:S}=n.internals,x=y!==S.x||w!==S.y;(x||v!==n.internals.z)&&t.set(n.id,{...n,internals:{...n.internals,positionAbsolute:x?{x:y,y:w}:S,z:v}})}function Kx(n,t){return(Qn(n.zIndex)?n.zIndex:0)+(n.selected?t:0)}function eI(n,t,e,i,a){const{x:u,y:c}=t.internals.positionAbsolute,d=as(n),h=Ku(n,e),g=Wo(n.extent)?Ba(h,n.extent,d):h;let y=Ba({x:u+g.x,y:c+g.y},i,d);n.extent==="parent"&&(y=_x(y,d,t));const w=Kx(n,a),v=t.internals.z??0;return{x:y.x,y:y.y,z:v>w?v:w}}function ip(n,t,e,i=[0,0]){var c;const a=[],u=new Map;for(const d of n){const h=t.get(d.parentId);if(!h)continue;const g=((c=u.get(d.parentId))==null?void 0:c.expandedRect)??Qo(h),y=qx(g,d.rect);u.set(d.parentId,{expandedRect:y,parent:h})}return u.size>0&&u.forEach(({expandedRect:d,parent:h},g)=>{var N;const y=h.internals.positionAbsolute,w=as(h),v=h.origin??i,S=d.x<y.x?Math.round(Math.abs(y.x-d.x)):0,x=d.y<y.y?Math.round(Math.abs(y.y-d.y)):0,E=Math.max(w.width,Math.round(d.width)),I=Math.max(w.height,Math.round(d.height)),k=(E-w.width)*v[0],z=(I-w.height)*v[1];(S>0||x>0||k||z)&&(a.push({id:g,type:"position",position:{x:h.position.x-S+k,y:h.position.y-x+z}}),(N=e.get(g))==null||N.forEach(O=>{n.some(_=>_.id===O.id)||a.push({id:O.id,type:"position",position:{x:O.position.x+S,y:O.position.y+x}})})),(w.width<d.width||w.height<d.height||S||x)&&a.push({id:g,type:"dimensions",setAttributes:!0,dimensions:{width:E+(S?v[0]*S-k:0),height:I+(x?v[1]*x-z:0)}})}),a}function nI(n,t,e,i,a,u){const c=i==null?void 0:i.querySelector(".xyflow__viewport");let d=!1;if(!c)return{changes:[],updatedInternals:d};const h=[],g=window.getComputedStyle(c),{m22:y}=new window.DOMMatrixReadOnly(g.transform),w=[];for(const v of n.values()){const S=t.get(v.id);if(!S)continue;if(S.hidden){t.set(S.id,{...S,internals:{...S.internals,handleBounds:void 0}}),d=!0;continue}const x=tp(v.nodeElement),E=S.measured.width!==x.width||S.measured.height!==x.height;if(!!(x.width&&x.height&&(E||!S.internals.handleBounds||v.force))){const k=v.nodeElement.getBoundingClientRect(),z=Wo(S.extent)?S.extent:u;let{positionAbsolute:N}=S.internals;S.parentId&&S.extent==="parent"?N=_x(N,x,t.get(S.parentId)):z&&(N=Ba(N,z,x));const O={...S,measured:x,internals:{...S.internals,positionAbsolute:N,handleBounds:{source:sb("source",v.nodeElement,k,y,S.id),target:sb("target",v.nodeElement,k,y,S.id)}}};t.set(S.id,O),S.parentId&&rp(O,t,e,{nodeOrigin:a}),d=!0,E&&(h.push({id:S.id,type:"dimensions",dimensions:x}),S.expandParent&&S.parentId&&w.push({id:S.id,parentId:S.parentId,rect:Qo(O,a)}))}}if(w.length>0){const v=ip(w,t,e,a);h.push(...v)}return{changes:h,updatedInternals:d}}async function rI({delta:n,panZoom:t,transform:e,translateExtent:i,width:a,height:u}){if(!t||!n.x&&!n.y)return Promise.resolve(!1);const c=await t.setViewportConstrained({x:e[0]+n.x,y:e[1]+n.y,zoom:e[2]},[[0,0],[a,u]],i),d=!!c&&(c.x!==e[0]||c.y!==e[1]||c.k!==e[2]);return Promise.resolve(d)}function db(n,t,e,i,a,u){let c=a;const d=i.get(c)||new Map;i.set(c,d.set(e,t)),c=`${a}-${n}`;const h=i.get(c)||new Map;if(i.set(c,h.set(e,t)),u){c=`${a}-${n}-${u}`;const g=i.get(c)||new Map;i.set(c,g.set(e,t))}}function Fx(n,t,e){n.clear(),t.clear();for(const i of e){const{source:a,target:u,sourceHandle:c=null,targetHandle:d=null}=i,h={edgeId:i.id,source:a,target:u,sourceHandle:c,targetHandle:d},g=`${a}-${c}--${u}-${d}`,y=`${u}-${d}--${a}-${c}`;db("source",h,y,n,a,c),db("target",h,g,n,u,d),t.set(i.id,i)}}function Zx(n,t){if(!n.parentId)return!1;const e=t.get(n.parentId);return e?e.selected?!0:Zx(e,t):!1}function hb(n,t,e){var a;let i=n;do{if((a=i==null?void 0:i.matches)!=null&&a.call(i,t))return!0;if(i===e)return!1;i=i==null?void 0:i.parentElement}while(i);return!1}function iI(n,t,e,i){const a=new Map;for(const[u,c]of n)if((c.selected||c.id===i)&&(!c.parentId||!Zx(c,n))&&(c.draggable||t&&typeof c.draggable>"u")){const d=n.get(u);d&&a.set(u,{id:u,position:d.position||{x:0,y:0},distance:{x:e.x-d.internals.positionAbsolute.x,y:e.y-d.internals.positionAbsolute.y},extent:d.extent,parentId:d.parentId,origin:d.origin,expandParent:d.expandParent,internals:{positionAbsolute:d.internals.positionAbsolute||{x:0,y:0}},measured:{width:d.measured.width??0,height:d.measured.height??0}})}return a}function Tm({nodeId:n,dragItems:t,nodeLookup:e,dragging:i=!0}){var c,d,h;const a=[];for(const[g,y]of t){const w=(c=e.get(g))==null?void 0:c.internals.userNode;w&&a.push({...w,position:y.position,dragging:i})}if(!n)return[a[0],a];const u=(d=e.get(n))==null?void 0:d.internals.userNode;return[u?{...u,position:((h=t.get(n))==null?void 0:h.position)||u.position,dragging:i}:a[0],a]}function sI({onNodeMouseDown:n,getStoreItems:t,onDragStart:e,onDrag:i,onDragStop:a}){let u={x:null,y:null},c=0,d=new Map,h=!1,g={x:0,y:0},y=null,w=!1,v=null,S=!1;function x({noDragClassName:I,handleSelector:k,domNode:z,isSelectable:N,nodeId:O,nodeClickDistance:_=0}){v=dn(z);function J({x:nt,y:ft},ot){const{nodeLookup:ct,nodeExtent:M,snapGrid:j,snapToGrid:C,nodeOrigin:B,onNodeDrag:H,onSelectionDrag:q,onError:D,updateNodePositions:P}=t();u={x:nt,y:ft};let tt=!1,rt={x:0,y:0,x2:0,y2:0};if(d.size>1&&M){const ut=Fu(d);rt=py(ut)}for(const[ut,gt]of d){if(!ct.has(ut))continue;let dt={x:nt-gt.distance.x,y:ft-gt.distance.y};C&&(dt=qd(dt,j));let mt=[[M[0][0],M[0][1]],[M[1][0],M[1][1]]];if(d.size>1&&M&&!gt.extent){const{positionAbsolute:Vt}=gt.internals,Ot=Vt.x-rt.x+M[0][0],bt=Vt.x+gt.measured.width-rt.x2+M[1][0],Yt=Vt.y-rt.y+M[0][1],qt=Vt.y+gt.measured.height-rt.y2+M[1][1];mt=[[Ot,Yt],[bt,qt]]}const{position:pt,positionAbsolute:Ct}=Lx({nodeId:ut,nextPosition:dt,nodeLookup:ct,nodeExtent:mt,nodeOrigin:B,onError:D});tt=tt||gt.position.x!==pt.x||gt.position.y!==pt.y,gt.position=pt,gt.internals.positionAbsolute=Ct}if(tt&&(P(d,!0),ot&&(i||H||!O&&q))){const[ut,gt]=Tm({nodeId:O,dragItems:d,nodeLookup:ct});i==null||i(ot,d,ut,gt),H==null||H(ot,ut,gt),O||q==null||q(ot,gt)}}async function U(){if(!y)return;const{transform:nt,panBy:ft,autoPanSpeed:ot,autoPanOnNodeDrag:ct}=t();if(!ct){h=!1,cancelAnimationFrame(c);return}const[M,j]=Ux(g,y,ot);(M!==0||j!==0)&&(u.x=(u.x??0)-M/nt[2],u.y=(u.y??0)-j/nt[2],await ft({x:M,y:j})&&J(u,null)),c=requestAnimationFrame(U)}function W(nt){var tt;const{nodeLookup:ft,multiSelectionActive:ot,nodesDraggable:ct,transform:M,snapGrid:j,snapToGrid:C,selectNodesOnDrag:B,onNodeDragStart:H,onSelectionDragStart:q,unselectNodesAndEdges:D}=t();w=!0,(!B||!N)&&!ot&&O&&((tt=ft.get(O))!=null&&tt.selected||D()),N&&B&&O&&(n==null||n(O));const P=wu(nt.sourceEvent,{transform:M,snapGrid:j,snapToGrid:C,containerBounds:y});if(u=P,d=iI(ft,ct,P,O),d.size>0&&(e||H||!O&&q)){const[rt,ut]=Tm({nodeId:O,dragItems:d,nodeLookup:ft});e==null||e(nt.sourceEvent,d,rt,ut),H==null||H(nt.sourceEvent,rt,ut),O||q==null||q(nt.sourceEvent,ut)}}const F=mx().clickDistance(_).on("start",nt=>{const{domNode:ft,nodeDragThreshold:ot,transform:ct,snapGrid:M,snapToGrid:j}=t();y=(ft==null?void 0:ft.getBoundingClientRect())||null,S=!1,ot===0&&W(nt),u=wu(nt.sourceEvent,{transform:ct,snapGrid:M,snapToGrid:j,containerBounds:y}),g=es(nt.sourceEvent,y)}).on("drag",nt=>{const{autoPanOnNodeDrag:ft,transform:ot,snapGrid:ct,snapToGrid:M,nodeDragThreshold:j,nodeLookup:C}=t(),B=wu(nt.sourceEvent,{transform:ot,snapGrid:ct,snapToGrid:M,containerBounds:y});if((nt.sourceEvent.type==="touchmove"&&nt.sourceEvent.touches.length>1||O&&!C.has(O))&&(S=!0),!S){if(!h&&ft&&w&&(h=!0,U()),!w){const H=B.xSnapped-(u.x??0),q=B.ySnapped-(u.y??0);Math.sqrt(H*H+q*q)>j&&W(nt)}(u.x!==B.xSnapped||u.y!==B.ySnapped)&&d&&w&&(g=es(nt.sourceEvent,y),J(B,nt.sourceEvent))}}).on("end",nt=>{if(!(!w||S)&&(h=!1,w=!1,cancelAnimationFrame(c),d.size>0)){const{nodeLookup:ft,updateNodePositions:ot,onNodeDragStop:ct,onSelectionDragStop:M}=t();if(ot(d,!1),a||ct||!O&&M){const[j,C]=Tm({nodeId:O,dragItems:d,nodeLookup:ft,dragging:!1});a==null||a(nt.sourceEvent,d,j,C),ct==null||ct(nt.sourceEvent,j,C),O||M==null||M(nt.sourceEvent,C)}}}).filter(nt=>{const ft=nt.target;return!nt.button&&(!I||!hb(ft,`.${I}`,z))&&(!k||hb(ft,k,z))});v.call(F)}function E(){v==null||v.on(".drag",null)}return{update:x,destroy:E}}function aI(n,t,e){const i=[],a={x:n.x-e,y:n.y-e,width:e*2,height:e*2};for(const u of t.values())Uu(a,Qo(u))>0&&i.push(u);return i}const oI=250;function lI(n,t,e,i){var d,h;let a=[],u=1/0;const c=aI(n,e,t+oI);for(const g of c){const y=[...((d=g.internals.handleBounds)==null?void 0:d.source)??[],...((h=g.internals.handleBounds)==null?void 0:h.target)??[]];for(const w of y){if(i.nodeId===w.nodeId&&i.type===w.type&&i.id===w.id)continue;const{x:v,y:S}=qu(g,w,w.position,!0),x=Math.sqrt(Math.pow(v-n.x,2)+Math.pow(S-n.y,2));x>t||(x<u?(a=[{...w,x:v,y:S}],u=x):x===u&&a.push({...w,x:v,y:S}))}}if(!a.length)return null;if(a.length>1){const g=i.type==="source"?"target":"source";return a.find(y=>y.type===g)??a[0]}return a[0]}function Qx(n,t,e,i,a,u=!1){var g,y,w;const c=i.get(n);if(!c)return null;const d=a==="strict"?(g=c.internals.handleBounds)==null?void 0:g[t]:[...((y=c.internals.handleBounds)==null?void 0:y.source)??[],...((w=c.internals.handleBounds)==null?void 0:w.target)??[]],h=(e?d==null?void 0:d.find(v=>v.id===e):d==null?void 0:d[0])??null;return h&&u?{...h,...qu(c,h,h.position,!0)}:h}function Wx(n,t){return n||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function uI(n,t){let e=null;return t?e=!0:n&&!t&&(e=!1),e}const tT=()=>!0;function cI(n,{connectionMode:t,connectionRadius:e,handleId:i,nodeId:a,edgeUpdaterType:u,isTarget:c,domNode:d,nodeLookup:h,lib:g,autoPanOnConnect:y,flowId:w,panBy:v,cancelConnection:S,onConnectStart:x,onConnect:E,onConnectEnd:I,isValidConnection:k=tT,onReconnectEnd:z,updateConnection:N,getTransform:O,getFromHandle:_,autoPanSpeed:J}){const U=Hx(n.target);let W=0,F;const{x:nt,y:ft}=es(n),ot=U==null?void 0:U.elementFromPoint(nt,ft),ct=Wx(u,ot),M=d==null?void 0:d.getBoundingClientRect();if(!M||!ct)return;const j=Qx(a,ct,i,h,t);if(!j)return;let C=es(n,M),B=!1,H=null,q=!1,D=null;function P(){if(!y||!M)return;const[Ct,Vt]=Ux(C,M,J);v({x:Ct,y:Vt}),W=requestAnimationFrame(P)}const tt={...j,nodeId:a,type:ct,position:j.position},rt=h.get(a),gt={inProgress:!0,isValid:null,from:qu(rt,tt,Tt.Left,!0),fromHandle:tt,fromPosition:tt.position,fromNode:rt,to:C,toHandle:null,toPosition:eb[tt.position],toNode:null};N(gt);let dt=gt;x==null||x(n,{nodeId:a,handleId:i,handleType:ct});function mt(Ct){if(!_()||!tt){pt(Ct);return}const Vt=O();C=es(Ct,M),F=lI(Zu(C,Vt,!1,[1,1]),e,h,tt),B||(P(),B=!0);const Ot=eT(Ct,{handle:F,connectionMode:t,fromNodeId:a,fromHandleId:i,fromType:c?"target":"source",isValidConnection:k,doc:U,lib:g,flowId:w,nodeLookup:h});D=Ot.handleDomNode,H=Ot.connection,q=uI(!!F,Ot.isValid);const bt={...dt,isValid:q,to:F&&q?xd({x:F.x,y:F.y},Vt):C,toHandle:Ot.toHandle,toPosition:q&&Ot.toHandle?Ot.toHandle.position:eb[tt.position],toNode:Ot.toHandle?h.get(Ot.toHandle.nodeId):null};q&&F&&dt.toHandle&&bt.toHandle&&dt.toHandle.type===bt.toHandle.type&&dt.toHandle.nodeId===bt.toHandle.nodeId&&dt.toHandle.id===bt.toHandle.id&&dt.to.x===bt.to.x&&dt.to.y===bt.to.y||(N(bt),dt=bt)}function pt(Ct){(F||D)&&H&&q&&(E==null||E(H));const{inProgress:Vt,...Ot}=dt,bt={...Ot,toPosition:dt.toHandle?dt.toPosition:null};I==null||I(Ct,bt),u&&(z==null||z(Ct,bt)),S(),cancelAnimationFrame(W),B=!1,q=!1,H=null,D=null,U.removeEventListener("mousemove",mt),U.removeEventListener("mouseup",pt),U.removeEventListener("touchmove",mt),U.removeEventListener("touchend",pt)}U.addEventListener("mousemove",mt),U.addEventListener("mouseup",pt),U.addEventListener("touchmove",mt),U.addEventListener("touchend",pt)}function eT(n,{handle:t,connectionMode:e,fromNodeId:i,fromHandleId:a,fromType:u,doc:c,lib:d,flowId:h,isValidConnection:g=tT,nodeLookup:y}){const w=u==="target",v=t?c.querySelector(`.${d}-flow__handle[data-id="${h}-${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`):null,{x:S,y:x}=es(n),E=c.elementFromPoint(S,x),I=E!=null&&E.classList.contains(`${d}-flow__handle`)?E:v,k={handleDomNode:I,isValid:!1,connection:null,toHandle:null};if(I){const z=Wx(void 0,I),N=I.getAttribute("data-nodeid"),O=I.getAttribute("data-handleid"),_=I.classList.contains("connectable"),J=I.classList.contains("connectableend");if(!N||!z)return k;const U={source:w?N:i,sourceHandle:w?O:a,target:w?i:N,targetHandle:w?a:O};k.connection=U;const F=_&&J&&(e===Fo.Strict?w&&z==="source"||!w&&z==="target":N!==i||O!==a);k.isValid=F&&g(U),k.toHandle=Qx(N,z,O,y,e,!1)}return k}const by={onPointerDown:cI,isValid:eT};function fI({domNode:n,panZoom:t,getTransform:e,getViewScale:i}){const a=dn(n);function u({translateExtent:d,width:h,height:g,zoomStep:y=10,pannable:w=!0,zoomable:v=!0,inversePan:S=!1}){const x=N=>{const O=e();if(N.sourceEvent.type!=="wheel"||!t)return;const _=-N.sourceEvent.deltaY*(N.sourceEvent.deltaMode===1?.05:N.sourceEvent.deltaMode?1:.002)*y,J=O[2]*Math.pow(2,_);t.scaleTo(J)};let E=[0,0];const I=N=>{(N.sourceEvent.type==="mousedown"||N.sourceEvent.type==="touchstart")&&(E=[N.sourceEvent.clientX??N.sourceEvent.touches[0].clientX,N.sourceEvent.clientY??N.sourceEvent.touches[0].clientY])},k=N=>{const O=e();if(N.sourceEvent.type!=="mousemove"&&N.sourceEvent.type!=="touchmove"||!t)return;const _=[N.sourceEvent.clientX??N.sourceEvent.touches[0].clientX,N.sourceEvent.clientY??N.sourceEvent.touches[0].clientY],J=[_[0]-E[0],_[1]-E[1]];E=_;const U=i()*Math.max(O[2],Math.log(O[2]))*(S?-1:1),W={x:O[0]-J[0]*U,y:O[1]-J[1]*U},F=[[0,0],[h,g]];t.setViewportConstrained({x:W.x,y:W.y,zoom:O[2]},F,d)},z=Ox().on("start",I).on("zoom",w?k:null).on("zoom.wheel",v?x:null);a.call(z,{})}function c(){a.on("zoom",null)}return{update:u,destroy:c,pointer:Xn}}const dI=(n,t)=>n.x!==t.x||n.y!==t.y||n.zoom!==t.k,Pd=n=>({x:n.x,y:n.y,zoom:n.k}),Am=({x:n,y:t,zoom:e})=>Ld.translate(n,t).scale(e),Io=(n,t)=>n.target.closest(`.${t}`),nT=(n,t)=>t===2&&Array.isArray(n)&&n.includes(2),Em=(n,t=0,e=()=>{})=>{const i=typeof t=="number"&&t>0;return i||e(),i?n.transition().duration(t).on("end",e):n},rT=n=>{const t=n.ctrlKey&&Td()?10:1;return-n.deltaY*(n.deltaMode===1?.05:n.deltaMode?1:.002)*t};function hI({zoomPanValues:n,noWheelClassName:t,d3Selection:e,d3Zoom:i,panOnScrollMode:a,panOnScrollSpeed:u,zoomOnPinch:c,onPanZoomStart:d,onPanZoom:h,onPanZoomEnd:g}){return y=>{if(Io(y,t))return!1;y.preventDefault(),y.stopImmediatePropagation();const w=e.property("__zoom").k||1;if(y.ctrlKey&&c){const I=Xn(y),k=rT(y),z=w*Math.pow(2,k);i.scaleTo(e,z,I,y);return}const v=y.deltaMode===1?20:1;let S=a===ka.Vertical?0:y.deltaX*v,x=a===ka.Horizontal?0:y.deltaY*v;!Td()&&y.shiftKey&&a!==ka.Vertical&&(S=y.deltaY*v,x=0),i.translateBy(e,-(S/w)*u,-(x/w)*u,{internal:!0});const E=Pd(e.property("__zoom"));clearTimeout(n.panScrollTimeout),n.isPanScrolling||(n.isPanScrolling=!0,d==null||d(y,E)),n.isPanScrolling&&(h==null||h(y,E),n.panScrollTimeout=setTimeout(()=>{g==null||g(y,E),n.isPanScrolling=!1},150))}}function gI({noWheelClassName:n,preventScrolling:t,d3ZoomHandler:e}){return function(i,a){if(!t&&i.type==="wheel"&&!i.ctrlKey||Io(i,n))return null;i.preventDefault(),e.call(this,i,a)}}function mI({zoomPanValues:n,onDraggingChange:t,onPanZoomStart:e}){return i=>{var u,c,d;if((u=i.sourceEvent)!=null&&u.internal)return;const a=Pd(i.transform);n.mouseButton=((c=i.sourceEvent)==null?void 0:c.button)||0,n.isZoomingOrPanning=!0,n.prevViewport=a,((d=i.sourceEvent)==null?void 0:d.type)==="mousedown"&&t(!0),e&&(e==null||e(i.sourceEvent,a))}}function yI({zoomPanValues:n,panOnDrag:t,onPaneContextMenu:e,onTransformChange:i,onPanZoom:a}){return u=>{var c,d;n.usedRightMouseButton=!!(e&&nT(t,n.mouseButton??0)),(c=u.sourceEvent)!=null&&c.sync||i([u.transform.x,u.transform.y,u.transform.k]),a&&!((d=u.sourceEvent)!=null&&d.internal)&&(a==null||a(u.sourceEvent,Pd(u.transform)))}}function pI({zoomPanValues:n,panOnDrag:t,panOnScroll:e,onDraggingChange:i,onPanZoomEnd:a,onPaneContextMenu:u}){return c=>{var d;if(!((d=c.sourceEvent)!=null&&d.internal)&&(n.isZoomingOrPanning=!1,u&&nT(t,n.mouseButton??0)&&!n.usedRightMouseButton&&c.sourceEvent&&u(c.sourceEvent),n.usedRightMouseButton=!1,i(!1),a&&dI(n.prevViewport,c.transform))){const h=Pd(c.transform);n.prevViewport=h,clearTimeout(n.timerId),n.timerId=setTimeout(()=>{a==null||a(c.sourceEvent,h)},e?150:0)}}}function vI({zoomActivationKeyPressed:n,zoomOnScroll:t,zoomOnPinch:e,panOnDrag:i,panOnScroll:a,zoomOnDoubleClick:u,userSelectionActive:c,noWheelClassName:d,noPanClassName:h,lib:g}){return y=>{var x;const w=n||t,v=e&&y.ctrlKey;if(y.button===1&&y.type==="mousedown"&&(Io(y,`${g}-flow__node`)||Io(y,`${g}-flow__edge`)))return!0;if(!i&&!w&&!a&&!u&&!e||c||Io(y,d)&&y.type==="wheel"||Io(y,h)&&(y.type!=="wheel"||a&&y.type==="wheel"&&!n)||!e&&y.ctrlKey&&y.type==="wheel")return!1;if(!e&&y.type==="touchstart"&&((x=y.touches)==null?void 0:x.length)>1)return y.preventDefault(),!1;if(!w&&!a&&!v&&y.type==="wheel"||!i&&(y.type==="mousedown"||y.type==="touchstart")||Array.isArray(i)&&!i.includes(y.button)&&y.type==="mousedown")return!1;const S=Array.isArray(i)&&i.includes(y.button)||!y.button||y.button<=1;return(!y.ctrlKey||y.type==="wheel")&&S}}function wI({domNode:n,minZoom:t,maxZoom:e,paneClickDistance:i,translateExtent:a,viewport:u,onPanZoom:c,onPanZoomStart:d,onPanZoomEnd:h,onDraggingChange:g}){const y={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},w=n.getBoundingClientRect(),v=Ox().clickDistance(!Qn(i)||i<0?0:i).scaleExtent([t,e]).translateExtent(a),S=dn(n).call(v);N({x:u.x,y:u.y,zoom:Zo(u.zoom,t,e)},[[0,0],[w.width,w.height]],a);const x=S.on("wheel.zoom"),E=S.on("dblclick.zoom");v.wheelDelta(rT);function I(ot,ct){return S?new Promise(M=>{v==null||v.transform(Em(S,ct==null?void 0:ct.duration,()=>M(!0)),ot)}):Promise.resolve(!1)}function k({noWheelClassName:ot,noPanClassName:ct,onPaneContextMenu:M,userSelectionActive:j,panOnScroll:C,panOnDrag:B,panOnScrollMode:H,panOnScrollSpeed:q,preventScrolling:D,zoomOnPinch:P,zoomOnScroll:tt,zoomOnDoubleClick:rt,zoomActivationKeyPressed:ut,lib:gt,onTransformChange:dt}){j&&!y.isZoomingOrPanning&&z();const pt=C&&!ut&&!j?hI({zoomPanValues:y,noWheelClassName:ot,d3Selection:S,d3Zoom:v,panOnScrollMode:H,panOnScrollSpeed:q,zoomOnPinch:P,onPanZoomStart:d,onPanZoom:c,onPanZoomEnd:h}):gI({noWheelClassName:ot,preventScrolling:D,d3ZoomHandler:x});if(S.on("wheel.zoom",pt,{passive:!1}),!j){const Vt=mI({zoomPanValues:y,onDraggingChange:g,onPanZoomStart:d});v.on("start",Vt);const Ot=yI({zoomPanValues:y,panOnDrag:B,onPaneContextMenu:!!M,onPanZoom:c,onTransformChange:dt});v.on("zoom",Ot);const bt=pI({zoomPanValues:y,panOnDrag:B,panOnScroll:C,onPaneContextMenu:M,onPanZoomEnd:h,onDraggingChange:g});v.on("end",bt)}const Ct=vI({zoomActivationKeyPressed:ut,panOnDrag:B,zoomOnScroll:tt,panOnScroll:C,zoomOnDoubleClick:rt,zoomOnPinch:P,userSelectionActive:j,noPanClassName:ct,noWheelClassName:ot,lib:gt});v.filter(Ct),rt?S.on("dblclick.zoom",E):S.on("dblclick.zoom",null)}function z(){v.on("zoom",null)}async function N(ot,ct,M){const j=Am(ot),C=v==null?void 0:v.constrain()(j,ct,M);return C&&await I(C),new Promise(B=>B(C))}async function O(ot,ct){const M=Am(ot);return await I(M,ct),new Promise(j=>j(M))}function _(ot){if(S){const ct=Am(ot),M=S.property("__zoom");(M.k!==ot.zoom||M.x!==ot.x||M.y!==ot.y)&&(v==null||v.transform(S,ct,null,{sync:!0}))}}function J(){const ot=S?kx(S.node()):{x:0,y:0,k:1};return{x:ot.x,y:ot.y,zoom:ot.k}}function U(ot,ct){return S?new Promise(M=>{v==null||v.scaleTo(Em(S,ct==null?void 0:ct.duration,()=>M(!0)),ot)}):Promise.resolve(!1)}function W(ot,ct){return S?new Promise(M=>{v==null||v.scaleBy(Em(S,ct==null?void 0:ct.duration,()=>M(!0)),ot)}):Promise.resolve(!1)}function F(ot){v==null||v.scaleExtent(ot)}function nt(ot){v==null||v.translateExtent(ot)}function ft(ot){const ct=!Qn(ot)||ot<0?0:ot;v==null||v.clickDistance(ct)}return{update:k,destroy:z,setViewport:O,setViewportConstrained:N,getViewport:J,scaleTo:U,scaleBy:W,setScaleExtent:F,setTranslateExtent:nt,syncViewport:_,setClickDistance:ft}}var Su;(function(n){n.Line="line",n.Handle="handle"})(Su||(Su={}));function SI({width:n,prevWidth:t,height:e,prevHeight:i,affectsX:a,affectsY:u}){const c=n-t,d=e-i,h=[c>0?1:c<0?-1:0,d>0?1:d<0?-1:0];return c&&a&&(h[0]=h[0]*-1),d&&u&&(h[1]=h[1]*-1),h}function bI(n){const t=n.includes("right")||n.includes("left"),e=n.includes("bottom")||n.includes("top"),i=n.includes("left"),a=n.includes("top");return{isHorizontal:t,isVertical:e,affectsX:i,affectsY:a}}function qs(n,t){return Math.max(0,t-n)}function Ps(n,t){return Math.max(0,n-t)}function kf(n,t,e){return Math.max(0,t-n,n-e)}function gb(n,t){return n?!t:t}function xI(n,t,e,i,a,u,c,d){let{affectsX:h,affectsY:g}=t;const{isHorizontal:y,isVertical:w}=t,v=y&&w,{xSnapped:S,ySnapped:x}=e,{minWidth:E,maxWidth:I,minHeight:k,maxHeight:z}=i,{x:N,y:O,width:_,height:J,aspectRatio:U}=n;let W=Math.floor(y?S-n.pointerX:0),F=Math.floor(w?x-n.pointerY:0);const nt=_+(h?-W:W),ft=J+(g?-F:F),ot=-u[0]*_,ct=-u[1]*J;let M=kf(nt,E,I),j=kf(ft,k,z);if(c){let H=0,q=0;h&&W<0?H=qs(N+W+ot,c[0][0]):!h&&W>0&&(H=Ps(N+nt+ot,c[1][0])),g&&F<0?q=qs(O+F+ct,c[0][1]):!g&&F>0&&(q=Ps(O+ft+ct,c[1][1])),M=Math.max(M,H),j=Math.max(j,q)}if(d){let H=0,q=0;h&&W>0?H=Ps(N+W,d[0][0]):!h&&W<0&&(H=qs(N+nt,d[1][0])),g&&F>0?q=Ps(O+F,d[0][1]):!g&&F<0&&(q=qs(O+ft,d[1][1])),M=Math.max(M,H),j=Math.max(j,q)}if(a){if(y){const H=kf(nt/U,k,z)*U;if(M=Math.max(M,H),c){let q=0;!h&&!g||h&&!g&&v?q=Ps(O+ct+nt/U,c[1][1])*U:q=qs(O+ct+(h?W:-W)/U,c[0][1])*U,M=Math.max(M,q)}if(d){let q=0;!h&&!g||h&&!g&&v?q=qs(O+nt/U,d[1][1])*U:q=Ps(O+(h?W:-W)/U,d[0][1])*U,M=Math.max(M,q)}}if(w){const H=kf(ft*U,E,I)/U;if(j=Math.max(j,H),c){let q=0;!h&&!g||g&&!h&&v?q=Ps(N+ft*U+ot,c[1][0])/U:q=qs(N+(g?F:-F)*U+ot,c[0][0])/U,j=Math.max(j,q)}if(d){let q=0;!h&&!g||g&&!h&&v?q=qs(N+ft*U,d[1][0])/U:q=Ps(N+(g?F:-F)*U,d[0][0])/U,j=Math.max(j,q)}}}F=F+(F<0?j:-j),W=W+(W<0?M:-M),a&&(v?nt>ft*U?F=(gb(h,g)?-W:W)/U:W=(gb(h,g)?-F:F)*U:y?(F=W/U,g=h):(W=F*U,h=g));const C=h?N+W:N,B=g?O+F:O;return{width:_+(h?-W:W),height:J+(g?-F:F),x:u[0]*W*(h?-1:1)+C,y:u[1]*F*(g?-1:1)+B}}const iT={width:0,height:0,x:0,y:0},TI={...iT,pointerX:0,pointerY:0,aspectRatio:1};function AI(n){return[[0,0],[n.measured.width,n.measured.height]]}function EI(n,t,e){const i=t.position.x+n.position.x,a=t.position.y+n.position.y,u=n.measured.width??0,c=n.measured.height??0,d=e[0]*u,h=e[1]*c;return[[i-d,a-h],[i+u-d,a+c-h]]}function NI({domNode:n,nodeId:t,getStoreItems:e,onChange:i,onEnd:a}){const u=dn(n);function c({controlPosition:h,boundaries:g,keepAspectRatio:y,onResizeStart:w,onResize:v,onResizeEnd:S,shouldResize:x}){let E={...iT},I={...TI};const k=bI(h);let z,N=null,O=[],_,J,U;const W=mx().on("start",F=>{const{nodeLookup:nt,transform:ft,snapGrid:ot,snapToGrid:ct,nodeOrigin:M,paneDomNode:j}=e();if(z=nt.get(t),!z)return;N=(j==null?void 0:j.getBoundingClientRect())??null;const{xSnapped:C,ySnapped:B}=wu(F.sourceEvent,{transform:ft,snapGrid:ot,snapToGrid:ct,containerBounds:N});E={width:z.measured.width??0,height:z.measured.height??0,x:z.position.x??0,y:z.position.y??0},I={...E,pointerX:C,pointerY:B,aspectRatio:E.width/E.height},_=void 0,z.parentId&&(z.extent==="parent"||z.expandParent)&&(_=nt.get(z.parentId),J=_&&z.extent==="parent"?AI(_):void 0),O=[],U=void 0;for(const[H,q]of nt)if(q.parentId===t&&(O.push({id:H,position:{...q.position},extent:q.extent}),q.extent==="parent"||q.expandParent)){const D=EI(q,z,q.origin??M);U?U=[[Math.min(D[0][0],U[0][0]),Math.min(D[0][1],U[0][1])],[Math.max(D[1][0],U[1][0]),Math.max(D[1][1],U[1][1])]]:U=D}w==null||w(F,{...E})}).on("drag",F=>{const{transform:nt,snapGrid:ft,snapToGrid:ot,nodeOrigin:ct}=e(),M=wu(F.sourceEvent,{transform:nt,snapGrid:ft,snapToGrid:ot,containerBounds:N}),j=[];if(!z)return;const{x:C,y:B,width:H,height:q}=E,D={},P=z.origin??ct,{width:tt,height:rt,x:ut,y:gt}=xI(I,k,M,g,y,P,J,U),dt=tt!==H,mt=rt!==q,pt=ut!==C&&dt,Ct=gt!==B&&mt;if(!pt&&!Ct&&!dt&&!mt)return;if((pt||Ct||P[0]===1||P[1]===1)&&(D.x=pt?ut:E.x,D.y=Ct?gt:E.y,E.x=D.x,E.y=D.y,O.length>0)){const Yt=ut-C,qt=gt-B;for(const be of O)be.position={x:be.position.x-Yt+P[0]*(tt-H),y:be.position.y-qt+P[1]*(rt-q)},j.push(be)}if((dt||mt)&&(D.width=dt?tt:E.width,D.height=mt?rt:E.height,E.width=D.width,E.height=D.height),_&&z.expandParent){const Yt=P[0]*(D.width??0);D.x&&D.x<Yt&&(E.x=Yt,I.x=I.x-(D.x-Yt));const qt=P[1]*(D.height??0);D.y&&D.y<qt&&(E.y=qt,I.y=I.y-(D.y-qt))}const Vt=SI({width:E.width,prevWidth:H,height:E.height,prevHeight:q,affectsX:k.affectsX,affectsY:k.affectsY}),Ot={...E,direction:Vt};(x==null?void 0:x(F,Ot))!==!1&&(v==null||v(F,Ot),i(D,j))}).on("end",F=>{S==null||S(F,{...E}),a==null||a()});u.call(W)}function d(){u.on(".drag",null)}return{update:c,destroy:d}}var Nm={exports:{}},Dm={},Cm={exports:{}},km={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mb;function DI(){if(mb)return km;mb=1;var n=Ju();function t(w,v){return w===v&&(w!==0||1/w===1/v)||w!==w&&v!==v}var e=typeof Object.is=="function"?Object.is:t,i=n.useState,a=n.useEffect,u=n.useLayoutEffect,c=n.useDebugValue;function d(w,v){var S=v(),x=i({inst:{value:S,getSnapshot:v}}),E=x[0].inst,I=x[1];return u(function(){E.value=S,E.getSnapshot=v,h(E)&&I({inst:E})},[w,S,v]),a(function(){return h(E)&&I({inst:E}),w(function(){h(E)&&I({inst:E})})},[w]),c(S),S}function h(w){var v=w.getSnapshot;w=w.value;try{var S=v();return!e(w,S)}catch{return!0}}function g(w,v){return v()}var y=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?g:d;return km.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:y,km}var yb;function CI(){return yb||(yb=1,Cm.exports=DI()),Cm.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pb;function kI(){if(pb)return Dm;pb=1;var n=Ju(),t=CI();function e(g,y){return g===y&&(g!==0||1/g===1/y)||g!==g&&y!==y}var i=typeof Object.is=="function"?Object.is:e,a=t.useSyncExternalStore,u=n.useRef,c=n.useEffect,d=n.useMemo,h=n.useDebugValue;return Dm.useSyncExternalStoreWithSelector=function(g,y,w,v,S){var x=u(null);if(x.current===null){var E={hasValue:!1,value:null};x.current=E}else E=x.current;x=d(function(){function k(J){if(!z){if(z=!0,N=J,J=v(J),S!==void 0&&E.hasValue){var U=E.value;if(S(U,J))return O=U}return O=J}if(U=O,i(N,J))return U;var W=v(J);return S!==void 0&&S(U,W)?(N=J,U):(N=J,O=W)}var z=!1,N,O,_=w===void 0?null:w;return[function(){return k(y())},_===null?void 0:function(){return k(_())}]},[y,w,v,S]);var I=a(g,x[0],x[1]);return c(function(){E.hasValue=!0,E.value=I},[I]),h(I),I},Dm}var vb;function OI(){return vb||(vb=1,Nm.exports=kI()),Nm.exports}var II=OI();const MI=$b(II),RI={},wb=n=>{let t;const e=new Set,i=(y,w)=>{const v=typeof y=="function"?y(t):y;if(!Object.is(v,t)){const S=t;t=w??(typeof v!="object"||v===null)?v:Object.assign({},t,v),e.forEach(x=>x(t,S))}},a=()=>t,h={setState:i,getState:a,getInitialState:()=>g,subscribe:y=>(e.add(y),()=>e.delete(y)),destroy:()=>{(RI?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),e.clear()}},g=t=n(i,a,h);return h},BI=n=>n?wb(n):wb,{useDebugValue:zI}=tN,{useSyncExternalStoreWithSelector:LI}=MI,_I=n=>n;function sT(n,t=_I,e){const i=LI(n.subscribe,n.getState,n.getServerState||n.getInitialState,t,e);return zI(i),i}const Sb=(n,t)=>{const e=BI(n),i=(a,u=t)=>sT(e,a,u);return Object.assign(i,e),i},UI=(n,t)=>n?Sb(n,t):Sb;function fe(n,t){if(Object.is(n,t))return!0;if(typeof n!="object"||n===null||typeof t!="object"||t===null)return!1;if(n instanceof Map&&t instanceof Map){if(n.size!==t.size)return!1;for(const[i,a]of n)if(!Object.is(a,t.get(i)))return!1;return!0}if(n instanceof Set&&t instanceof Set){if(n.size!==t.size)return!1;for(const i of n)if(!t.has(i))return!1;return!0}const e=Object.keys(n);if(e.length!==Object.keys(t).length)return!1;for(const i of e)if(!Object.prototype.hasOwnProperty.call(t,i)||!Object.is(n[i],t[i]))return!1;return!0}Vb();const Jd=et.createContext(null),qI=Jd.Provider,aT=Nr.error001();function Ht(n,t){const e=et.useContext(Jd);if(e===null)throw new Error(aT);return sT(e,n,t)}function ie(){const n=et.useContext(Jd);if(n===null)throw new Error(aT);return et.useMemo(()=>({getState:n.getState,setState:n.setState,subscribe:n.subscribe}),[n])}const bb={display:"none"},PI={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},oT="react-flow__node-desc",lT="react-flow__edge-desc",JI="react-flow__aria-live",HI=n=>n.ariaLiveMessage;function $I({rfId:n}){const t=Ht(HI);return Q.jsx("div",{id:`${JI}-${n}`,"aria-live":"assertive","aria-atomic":"true",style:PI,children:t})}function VI({rfId:n,disableKeyboardA11y:t}){return Q.jsxs(Q.Fragment,{children:[Q.jsxs("div",{id:`${oT}-${n}`,style:bb,children:["Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "]}),Q.jsx("div",{id:`${lT}-${n}`,style:bb,children:"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."}),!t&&Q.jsx($I,{rfId:n})]})}const jI=n=>n.userSelectionActive?"none":"all",Hd=et.forwardRef(({position:n="top-left",children:t,className:e,style:i,...a},u)=>{const c=Ht(jI),d=`${n}`.split("-");return Q.jsx("div",{className:Se(["react-flow__panel",e,...d]),style:{...i,pointerEvents:c},ref:u,...a,children:t})});Hd.displayName="Panel";function YI({proOptions:n,position:t="bottom-right"}){return n!=null&&n.hideAttribution?null:Q.jsx(Hd,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:Q.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const GI=n=>{const t=[],e=[];for(const[,i]of n.nodeLookup)i.selected&&t.push(i.internals.userNode);for(const[,i]of n.edgeLookup)i.selected&&e.push(i);return{selectedNodes:t,selectedEdges:e}},Of=n=>n.id;function XI(n,t){return fe(n.selectedNodes.map(Of),t.selectedNodes.map(Of))&&fe(n.selectedEdges.map(Of),t.selectedEdges.map(Of))}function KI({onSelectionChange:n}){const t=ie(),{selectedNodes:e,selectedEdges:i}=Ht(GI,XI);return et.useEffect(()=>{const a={nodes:e,edges:i};n==null||n(a),t.getState().onSelectionChangeHandlers.forEach(u=>u(a))},[e,i,n]),null}const FI=n=>!!n.onSelectionChangeHandlers;function ZI({onSelectionChange:n}){const t=Ht(FI);return n||t?Q.jsx(KI,{onSelectionChange:n}):null}const uT=[0,0],QI={x:0,y:0,zoom:1},WI=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","onBeforeDelete","debug","autoPanSpeed","paneClickDistance"],xb=[...WI,"rfId"],tM=n=>({setNodes:n.setNodes,setEdges:n.setEdges,setMinZoom:n.setMinZoom,setMaxZoom:n.setMaxZoom,setTranslateExtent:n.setTranslateExtent,setNodeExtent:n.setNodeExtent,reset:n.reset,setDefaultNodesAndEdges:n.setDefaultNodesAndEdges,setPaneClickDistance:n.setPaneClickDistance}),Tb={translateExtent:Lu,nodeOrigin:uT,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1",paneClickDistance:0};function eM(n){const{setNodes:t,setEdges:e,setMinZoom:i,setMaxZoom:a,setTranslateExtent:u,setNodeExtent:c,reset:d,setDefaultNodesAndEdges:h,setPaneClickDistance:g}=Ht(tM,fe),y=ie();et.useEffect(()=>(h(n.defaultNodes,n.defaultEdges),()=>{w.current=Tb,d()}),[]);const w=et.useRef(Tb);return et.useEffect(()=>{for(const v of xb){const S=n[v],x=w.current[v];S!==x&&(typeof n[v]>"u"||(v==="nodes"?t(S):v==="edges"?e(S):v==="minZoom"?i(S):v==="maxZoom"?a(S):v==="translateExtent"?u(S):v==="nodeExtent"?c(S):v==="paneClickDistance"?g(S):v==="fitView"?y.setState({fitViewQueued:S}):v==="fitViewOptions"?y.setState({fitViewOptions:S}):y.setState({[v]:S})))}w.current=n},xb.map(v=>n[v])),null}function Ab(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function nM(n){var i;const[t,e]=et.useState(n==="system"?null:n);return et.useEffect(()=>{if(n!=="system"){e(n);return}const a=Ab(),u=()=>e(a!=null&&a.matches?"dark":"light");return u(),a==null||a.addEventListener("change",u),()=>{a==null||a.removeEventListener("change",u)}},[n]),t!==null?t:(i=Ab())!=null&&i.matches?"dark":"light"}const Eb=typeof document<"u"?document:null;function Pu(n=null,t={target:Eb,actInsideInputWithModifier:!0}){const[e,i]=et.useState(!1),a=et.useRef(!1),u=et.useRef(new Set([])),[c,d]=et.useMemo(()=>{if(n!==null){const g=(Array.isArray(n)?n:[n]).filter(w=>typeof w=="string").map(w=>w.replace("+",`
`).replace(`

`,`
+`).split(`
`)),y=g.reduce((w,v)=>w.concat(...v),[]);return[g,y]}return[[],[]]},[n]);return et.useEffect(()=>{const h=(t==null?void 0:t.target)||Eb;if(n!==null){const g=v=>{var E,I;if(a.current=v.ctrlKey||v.metaKey||v.shiftKey||v.altKey,(!a.current||a.current&&!t.actInsideInputWithModifier)&&$x(v))return!1;const x=Db(v.code,d);if(u.current.add(v[x]),Nb(c,u.current,!1)){const k=((I=(E=v.composedPath)==null?void 0:E.call(v))==null?void 0:I[0])||v.target,z=(k==null?void 0:k.nodeName)==="BUTTON"||(k==null?void 0:k.nodeName)==="A";t.preventDefault!==!1&&(a.current||!z)&&v.preventDefault(),i(!0)}},y=v=>{const S=Db(v.code,d);Nb(c,u.current,!0)?(i(!1),u.current.clear()):u.current.delete(v[S]),v.key==="Meta"&&u.current.clear(),a.current=!1},w=()=>{u.current.clear(),i(!1)};return h==null||h.addEventListener("keydown",g),h==null||h.addEventListener("keyup",y),window.addEventListener("blur",w),window.addEventListener("contextmenu",w),()=>{h==null||h.removeEventListener("keydown",g),h==null||h.removeEventListener("keyup",y),window.removeEventListener("blur",w),window.removeEventListener("contextmenu",w)}}},[n,i]),e}function Nb(n,t,e){return n.filter(i=>e||i.length===t.size).some(i=>i.every(a=>t.has(a)))}function Db(n,t){return t.includes(n)?"code":"key"}const rM=()=>{const n=ie();return et.useMemo(()=>({zoomIn:t=>{const{panZoom:e}=n.getState();return e?e.scaleBy(1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomOut:t=>{const{panZoom:e}=n.getState();return e?e.scaleBy(1/1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomTo:(t,e)=>{const{panZoom:i}=n.getState();return i?i.scaleTo(t,{duration:e==null?void 0:e.duration}):Promise.resolve(!1)},getZoom:()=>n.getState().transform[2],setViewport:async(t,e)=>{const{transform:[i,a,u],panZoom:c}=n.getState();return c?(await c.setViewport({x:t.x??i,y:t.y??a,zoom:t.zoom??u},{duration:e==null?void 0:e.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[t,e,i]=n.getState().transform;return{x:t,y:e,zoom:i}},setCenter:async(t,e,i)=>{const{width:a,height:u,maxZoom:c,panZoom:d}=n.getState(),h=typeof(i==null?void 0:i.zoom)<"u"?i.zoom:c,g=a/2-t*h,y=u/2-e*h;return d?(await d.setViewport({x:g,y,zoom:h},{duration:i==null?void 0:i.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitBounds:async(t,e)=>{const{width:i,height:a,minZoom:u,maxZoom:c,panZoom:d}=n.getState(),h=Wy(t,i,a,u,c,(e==null?void 0:e.padding)??.1);return d?(await d.setViewport(h,{duration:e==null?void 0:e.duration}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,e={})=>{const{transform:i,snapGrid:a,snapToGrid:u,domNode:c}=n.getState();if(!c)return t;const{x:d,y:h}=c.getBoundingClientRect(),g={x:t.x-d,y:t.y-h},y=e.snapGrid??a,w=e.snapToGrid??u;return Zu(g,i,w,y)},flowToScreenPosition:t=>{const{transform:e,domNode:i}=n.getState();if(!i)return t;const{x:a,y:u}=i.getBoundingClientRect(),c=xd(t,e);return{x:c.x+a,y:c.y+u}}}),[])};function cT(n,t){const e=[],i=new Map,a=[];for(const u of n)if(u.type==="add"){a.push(u);continue}else if(u.type==="remove"||u.type==="replace")i.set(u.id,[u]);else{const c=i.get(u.id);c?c.push(u):i.set(u.id,[u])}for(const u of t){const c=i.get(u.id);if(!c){e.push(u);continue}if(c[0].type==="remove")continue;if(c[0].type==="replace"){e.push({...c[0].item});continue}const d={...u};for(const h of c)iM(h,d);e.push(d)}return a.length&&a.forEach(u=>{u.index!==void 0?e.splice(u.index,0,{...u.item}):e.push({...u.item})}),e}function iM(n,t){switch(n.type){case"select":{t.selected=n.selected;break}case"position":{typeof n.position<"u"&&(t.position=n.position),typeof n.dragging<"u"&&(t.dragging=n.dragging);break}case"dimensions":{typeof n.dimensions<"u"&&(t.measured??(t.measured={}),t.measured.width=n.dimensions.width,t.measured.height=n.dimensions.height,n.setAttributes&&(t.width=n.dimensions.width,t.height=n.dimensions.height)),typeof n.resizing=="boolean"&&(t.resizing=n.resizing);break}}}function sM(n,t){return cT(n,t)}function aM(n,t){return cT(n,t)}function Ta(n,t){return{id:n,type:"select",selected:t}}function Mo(n,t=new Set,e=!1){const i=[];for(const[a,u]of n){const c=t.has(a);!(u.selected===void 0&&!c)&&u.selected!==c&&(e&&(u.selected=c),i.push(Ta(u.id,c)))}return i}function Cb({items:n=[],lookup:t}){var a;const e=[],i=new Map(n.map(u=>[u.id,u]));for(const[u,c]of n.entries()){const d=t.get(c.id),h=((a=d==null?void 0:d.internals)==null?void 0:a.userNode)??d;h!==void 0&&h!==c&&e.push({id:c.id,item:c,type:"replace"}),h===void 0&&e.push({item:c,type:"add",index:u})}for(const[u]of t)i.get(u)===void 0&&e.push({id:u,type:"remove"});return e}function kb(n){return{id:n.id,type:"remove"}}const Ob=n=>MO(n),oM=n=>Bx(n);function fT(n){return et.forwardRef(n)}const lM=typeof window<"u"?et.useLayoutEffect:et.useEffect;function Ib(n){const[t,e]=et.useState(BigInt(0)),[i]=et.useState(()=>uM(()=>e(a=>a+BigInt(1))));return lM(()=>{const a=i.get();a.length&&(n(a),i.reset())},[t]),i}function uM(n){let t=[];return{get:()=>t,reset:()=>{t=[]},push:e=>{t.push(e),n()}}}const dT=et.createContext(null);function cM({children:n}){const t=ie(),e=et.useCallback(d=>{const{nodes:h=[],setNodes:g,hasDefaultNodes:y,onNodesChange:w,nodeLookup:v}=t.getState();let S=h;for(const x of d)S=typeof x=="function"?x(S):x;y?g(S):w&&w(Cb({items:S,lookup:v}))},[]),i=Ib(e),a=et.useCallback(d=>{const{edges:h=[],setEdges:g,hasDefaultEdges:y,onEdgesChange:w,edgeLookup:v}=t.getState();let S=h;for(const x of d)S=typeof x=="function"?x(S):x;y?g(S):w&&w(Cb({items:S,lookup:v}))},[]),u=Ib(a),c=et.useMemo(()=>({nodeQueue:i,edgeQueue:u}),[]);return Q.jsx(dT.Provider,{value:c,children:n})}function fM(){const n=et.useContext(dT);if(!n)throw new Error("useBatchContext must be used within a BatchProvider");return n}const dM=n=>!!n.panZoom;function sp(){const n=rM(),t=ie(),e=fM(),i=Ht(dM),a=et.useMemo(()=>{const u=w=>t.getState().nodeLookup.get(w),c=w=>{e.nodeQueue.push(w)},d=w=>{e.edgeQueue.push(w)},h=w=>{var k,z;const{nodeLookup:v,nodeOrigin:S}=t.getState(),x=Ob(w)?w:v.get(w.id),E=x.parentId?Jx(x.position,x.measured,x.parentId,v,S):x.position,I={...x,position:E,width:((k=x.measured)==null?void 0:k.width)??x.width,height:((z=x.measured)==null?void 0:z.height)??x.height};return Qo(I)},g=(w,v,S={replace:!1})=>{c(x=>x.map(E=>{if(E.id===w){const I=typeof v=="function"?v(E):v;return S.replace&&Ob(I)?I:{...E,...I}}return E}))},y=(w,v,S={replace:!1})=>{d(x=>x.map(E=>{if(E.id===w){const I=typeof v=="function"?v(E):v;return S.replace&&oM(I)?I:{...E,...I}}return E}))};return{getNodes:()=>t.getState().nodes.map(w=>({...w})),getNode:w=>{var v;return(v=u(w))==null?void 0:v.internals.userNode},getInternalNode:u,getEdges:()=>{const{edges:w=[]}=t.getState();return w.map(v=>({...v}))},getEdge:w=>t.getState().edgeLookup.get(w),setNodes:c,setEdges:d,addNodes:w=>{const v=Array.isArray(w)?w:[w];e.nodeQueue.push(S=>[...S,...v])},addEdges:w=>{const v=Array.isArray(w)?w:[w];e.edgeQueue.push(S=>[...S,...v])},toObject:()=>{const{nodes:w=[],edges:v=[],transform:S}=t.getState(),[x,E,I]=S;return{nodes:w.map(k=>({...k})),edges:v.map(k=>({...k})),viewport:{x,y:E,zoom:I}}},deleteElements:async({nodes:w=[],edges:v=[]})=>{const{nodes:S,edges:x,onNodesDelete:E,onEdgesDelete:I,triggerNodeChanges:k,triggerEdgeChanges:z,onDelete:N,onBeforeDelete:O}=t.getState(),{nodes:_,edges:J}=await _O({nodesToRemove:w,edgesToRemove:v,nodes:S,edges:x,onBeforeDelete:O}),U=J.length>0,W=_.length>0;if(U){const F=J.map(kb);I==null||I(J),z(F)}if(W){const F=_.map(kb);E==null||E(_),k(F)}return(W||U)&&(N==null||N({nodes:_,edges:J})),{deletedNodes:_,deletedEdges:J}},getIntersectingNodes:(w,v=!0,S)=>{const x=rb(w),E=x?w:h(w),I=S!==void 0;return E?(S||t.getState().nodes).filter(k=>{const z=t.getState().nodeLookup.get(k.id);if(z&&!x&&(k.id===w.id||!z.internals.positionAbsolute))return!1;const N=Qo(I?k:z),O=Uu(N,E);return v&&O>0||O>=E.width*E.height}):[]},isNodeIntersecting:(w,v,S=!0)=>{const E=rb(w)?w:h(w);if(!E)return!1;const I=Uu(E,v);return S&&I>0||I>=E.width*E.height},updateNode:g,updateNodeData:(w,v,S={replace:!1})=>{g(w,x=>{const E=typeof v=="function"?v(x):v;return S.replace?{...x,data:E}:{...x,data:{...x.data,...E}}},S)},updateEdge:y,updateEdgeData:(w,v,S={replace:!1})=>{y(w,x=>{const E=typeof v=="function"?v(x):v;return S.replace?{...x,data:E}:{...x,data:{...x.data,...E}}},S)},getNodesBounds:w=>{const{nodeLookup:v,nodeOrigin:S}=t.getState();return RO(w,{nodeLookup:v,nodeOrigin:S})},getHandleConnections:({type:w,id:v,nodeId:S})=>{var x;return Array.from(((x=t.getState().connectionLookup.get(`${S}-${w}${v?`-${v}`:""}`))==null?void 0:x.values())??[])},getNodeConnections:({type:w,handleId:v,nodeId:S})=>{var x;return Array.from(((x=t.getState().connectionLookup.get(`${S}${w?v?`-${w}-${v}`:`-${w}`:""}`))==null?void 0:x.values())??[])},fitView:async w=>{const v=t.getState().fitViewResolver??Promise.withResolvers();return t.setState({fitViewQueued:!0,fitViewOptions:w,fitViewResolver:v}),e.nodeQueue.push(S=>[...S]),v.promise}}},[]);return et.useMemo(()=>({...a,...n,viewportInitialized:i}),[i])}const Mb=n=>n.selected,hM={actInsideInputWithModifier:!1},gM=typeof window<"u"?window:void 0;function mM({deleteKeyCode:n,multiSelectionKeyCode:t}){const e=ie(),{deleteElements:i}=sp(),a=Pu(n,hM),u=Pu(t,{target:gM});et.useEffect(()=>{if(a){const{edges:c,nodes:d}=e.getState();i({nodes:d.filter(Mb),edges:c.filter(Mb)}),e.setState({nodesSelectionActive:!1})}},[a]),et.useEffect(()=>{e.setState({multiSelectionActive:u})},[u])}function yM(n){const t=ie();et.useEffect(()=>{const e=()=>{var a,u;if(!n.current)return!1;const i=tp(n.current);(i.height===0||i.width===0)&&((u=(a=t.getState()).onError)==null||u.call(a,"004",Nr.error004())),t.setState({width:i.width||500,height:i.height||500})};if(n.current){e(),window.addEventListener("resize",e);const i=new ResizeObserver(()=>e());return i.observe(n.current),()=>{window.removeEventListener("resize",e),i&&n.current&&i.unobserve(n.current)}}},[])}const $d={position:"absolute",width:"100%",height:"100%",top:0,left:0},pM=n=>({userSelectionActive:n.userSelectionActive,lib:n.lib});function vM({onPaneContextMenu:n,zoomOnScroll:t=!0,zoomOnPinch:e=!0,panOnScroll:i=!1,panOnScrollSpeed:a=.5,panOnScrollMode:u=ka.Free,zoomOnDoubleClick:c=!0,panOnDrag:d=!0,defaultViewport:h,translateExtent:g,minZoom:y,maxZoom:w,zoomActivationKeyCode:v,preventScrolling:S=!0,children:x,noWheelClassName:E,noPanClassName:I,onViewportChange:k,isControlledViewport:z,paneClickDistance:N}){const O=ie(),_=et.useRef(null),{userSelectionActive:J,lib:U}=Ht(pM,fe),W=Pu(v),F=et.useRef();yM(_);const nt=et.useCallback(ft=>{k==null||k({x:ft[0],y:ft[1],zoom:ft[2]}),z||O.setState({transform:ft})},[k,z]);return et.useEffect(()=>{if(_.current){F.current=wI({domNode:_.current,minZoom:y,maxZoom:w,translateExtent:g,viewport:h,paneClickDistance:N,onDraggingChange:M=>O.setState({paneDragging:M}),onPanZoomStart:(M,j)=>{const{onViewportChangeStart:C,onMoveStart:B}=O.getState();B==null||B(M,j),C==null||C(j)},onPanZoom:(M,j)=>{const{onViewportChange:C,onMove:B}=O.getState();B==null||B(M,j),C==null||C(j)},onPanZoomEnd:(M,j)=>{const{onViewportChangeEnd:C,onMoveEnd:B}=O.getState();B==null||B(M,j),C==null||C(j)}});const{x:ft,y:ot,zoom:ct}=F.current.getViewport();return O.setState({panZoom:F.current,transform:[ft,ot,ct],domNode:_.current.closest(".react-flow")}),()=>{var M;(M=F.current)==null||M.destroy()}}},[]),et.useEffect(()=>{var ft;(ft=F.current)==null||ft.update({onPaneContextMenu:n,zoomOnScroll:t,zoomOnPinch:e,panOnScroll:i,panOnScrollSpeed:a,panOnScrollMode:u,zoomOnDoubleClick:c,panOnDrag:d,zoomActivationKeyPressed:W,preventScrolling:S,noPanClassName:I,userSelectionActive:J,noWheelClassName:E,lib:U,onTransformChange:nt})},[n,t,e,i,a,u,c,d,W,S,I,J,E,U,nt]),Q.jsx("div",{className:"react-flow__renderer",ref:_,style:$d,children:x})}const wM=n=>({userSelectionActive:n.userSelectionActive,userSelectionRect:n.userSelectionRect});function SM(){const{userSelectionActive:n,userSelectionRect:t}=Ht(wM,fe);return n&&t?Q.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}const Om=(n,t)=>e=>{e.target===t.current&&(n==null||n(e))},bM=n=>({userSelectionActive:n.userSelectionActive,elementsSelectable:n.elementsSelectable,connectionInProgress:n.connection.inProgress,dragging:n.paneDragging});function xM({isSelecting:n,selectionKeyPressed:t,selectionMode:e=_u.Full,panOnDrag:i,selectionOnDrag:a,onSelectionStart:u,onSelectionEnd:c,onPaneClick:d,onPaneContextMenu:h,onPaneScroll:g,onPaneMouseEnter:y,onPaneMouseMove:w,onPaneMouseLeave:v,children:S}){const x=ie(),{userSelectionActive:E,elementsSelectable:I,dragging:k,connectionInProgress:z}=Ht(bM,fe),N=I&&(n||E),O=et.useRef(null),_=et.useRef(),J=et.useRef(new Set),U=et.useRef(new Set),W=et.useRef(!1),F=et.useRef(!1),nt=B=>{if(W.current||z){W.current=!1;return}d==null||d(B),x.getState().resetSelectedElements(),x.setState({nodesSelectionActive:!1})},ft=B=>{if(Array.isArray(i)&&(i!=null&&i.includes(2))){B.preventDefault();return}h==null||h(B)},ot=g?B=>g(B):void 0,ct=B=>{var tt,rt;const{resetSelectedElements:H,domNode:q}=x.getState();if(_.current=q==null?void 0:q.getBoundingClientRect(),!I||!n||B.button!==0||B.target!==O.current||!_.current)return;(rt=(tt=B.target)==null?void 0:tt.setPointerCapture)==null||rt.call(tt,B.pointerId),F.current=!0,W.current=!1;const{x:D,y:P}=es(B.nativeEvent,_.current);H(),x.setState({userSelectionRect:{width:0,height:0,startX:D,startY:P,x:D,y:P}}),u==null||u(B)},M=B=>{const{userSelectionRect:H,transform:q,nodeLookup:D,edgeLookup:P,connectionLookup:tt,triggerNodeChanges:rt,triggerEdgeChanges:ut,defaultEdgeOptions:gt}=x.getState();if(!_.current||!H)return;W.current=!0;const{x:dt,y:mt}=es(B.nativeEvent,_.current),{startX:pt,startY:Ct}=H,Vt={startX:pt,startY:Ct,x:dt<pt?dt:pt,y:mt<Ct?mt:Ct,width:Math.abs(dt-pt),height:Math.abs(mt-Ct)},Ot=J.current,bt=U.current;J.current=new Set(zx(D,Vt,q,e===_u.Partial,!0).map(qt=>qt.id)),U.current=new Set;const Yt=(gt==null?void 0:gt.selectable)??!0;for(const qt of J.current){const be=tt.get(qt);if(be)for(const{edgeId:rn}of be.values()){const Oe=P.get(rn);Oe&&(Oe.selectable??Yt)&&U.current.add(rn)}}if(!ib(Ot,J.current)){const qt=Mo(D,J.current,!0);rt(qt)}if(!ib(bt,U.current)){const qt=Mo(P,U.current);ut(qt)}x.setState({userSelectionRect:Vt,userSelectionActive:!0,nodesSelectionActive:!1})},j=B=>{var q,D;if(B.button!==0||!F.current)return;(D=(q=B.target)==null?void 0:q.releasePointerCapture)==null||D.call(q,B.pointerId);const{userSelectionRect:H}=x.getState();!E&&H&&B.target===O.current&&(nt==null||nt(B)),x.setState({userSelectionActive:!1,userSelectionRect:null,nodesSelectionActive:J.current.size>0}),c==null||c(B),(t||a)&&(W.current=!1),F.current=!1},C=i===!0||Array.isArray(i)&&i.includes(0);return Q.jsxs("div",{className:Se(["react-flow__pane",{draggable:C,dragging:k,selection:n}]),onClick:N?void 0:Om(nt,O),onContextMenu:Om(ft,O),onWheel:Om(ot,O),onPointerEnter:N?void 0:y,onPointerDown:N?ct:w,onPointerMove:N?M:w,onPointerUp:N?j:void 0,onPointerLeave:v,ref:O,style:$d,children:[S,Q.jsx(SM,{})]})}function xy({id:n,store:t,unselect:e=!1,nodeRef:i}){const{addSelectedNodes:a,unselectNodesAndEdges:u,multiSelectionActive:c,nodeLookup:d,onError:h}=t.getState(),g=d.get(n);if(!g){h==null||h("012",Nr.error012(n));return}t.setState({nodesSelectionActive:!1}),g.selected?(e||g.selected&&c)&&(u({nodes:[g],edges:[]}),requestAnimationFrame(()=>{var y;return(y=i==null?void 0:i.current)==null?void 0:y.blur()})):a([n])}function hT({nodeRef:n,disabled:t=!1,noDragClassName:e,handleSelector:i,nodeId:a,isSelectable:u,nodeClickDistance:c}){const d=ie(),[h,g]=et.useState(!1),y=et.useRef();return et.useEffect(()=>{y.current=sI({getStoreItems:()=>d.getState(),onNodeMouseDown:w=>{xy({id:w,store:d,nodeRef:n})},onDragStart:()=>{g(!0)},onDragStop:()=>{g(!1)}})},[]),et.useEffect(()=>{var w,v;if(t)(w=y.current)==null||w.destroy();else if(n.current)return(v=y.current)==null||v.update({noDragClassName:e,handleSelector:i,domNode:n.current,isSelectable:u,nodeId:a,nodeClickDistance:c}),()=>{var S;(S=y.current)==null||S.destroy()}},[e,i,t,u,n,a]),h}const TM=n=>t=>t.selected&&(t.draggable||n&&typeof t.draggable>"u");function gT(){const n=ie();return et.useCallback(e=>{const{nodeExtent:i,snapToGrid:a,snapGrid:u,nodesDraggable:c,onError:d,updateNodePositions:h,nodeLookup:g,nodeOrigin:y}=n.getState(),w=new Map,v=TM(c),S=a?u[0]:5,x=a?u[1]:5,E=e.direction.x*S*e.factor,I=e.direction.y*x*e.factor;for(const[,k]of g){if(!v(k))continue;let z={x:k.internals.positionAbsolute.x+E,y:k.internals.positionAbsolute.y+I};a&&(z=qd(z,u));const{position:N,positionAbsolute:O}=Lx({nodeId:k.id,nextPosition:z,nodeLookup:g,nodeExtent:i,nodeOrigin:y,onError:d});k.position=N,k.internals.positionAbsolute=O,w.set(k.id,k)}h(w)},[])}const ap=et.createContext(null),AM=ap.Provider;ap.Consumer;const mT=()=>et.useContext(ap),EM=n=>({connectOnClick:n.connectOnClick,noPanClassName:n.noPanClassName,rfId:n.rfId}),NM=(n,t,e)=>i=>{const{connectionClickStartHandle:a,connectionMode:u,connection:c}=i,{fromHandle:d,toHandle:h,isValid:g}=c,y=(h==null?void 0:h.nodeId)===n&&(h==null?void 0:h.id)===t&&(h==null?void 0:h.type)===e;return{connectingFrom:(d==null?void 0:d.nodeId)===n&&(d==null?void 0:d.id)===t&&(d==null?void 0:d.type)===e,connectingTo:y,clickConnecting:(a==null?void 0:a.nodeId)===n&&(a==null?void 0:a.id)===t&&(a==null?void 0:a.type)===e,isPossibleEndHandle:u===Fo.Strict?(d==null?void 0:d.type)!==e:n!==(d==null?void 0:d.nodeId)||t!==(d==null?void 0:d.id),connectionInProcess:!!d,clickConnectionInProcess:!!a,valid:y&&g}};function DM({type:n="source",position:t=Tt.Top,isValidConnection:e,isConnectable:i=!0,isConnectableStart:a=!0,isConnectableEnd:u=!0,id:c,onConnect:d,children:h,className:g,onMouseDown:y,onTouchStart:w,...v},S){var j,C;const x=c||null,E=n==="target",I=ie(),k=mT(),{connectOnClick:z,noPanClassName:N,rfId:O}=Ht(EM,fe),{connectingFrom:_,connectingTo:J,clickConnecting:U,isPossibleEndHandle:W,connectionInProcess:F,clickConnectionInProcess:nt,valid:ft}=Ht(NM(k,x,n),fe);k||(C=(j=I.getState()).onError)==null||C.call(j,"010",Nr.error010());const ot=B=>{const{defaultEdgeOptions:H,onConnect:q,hasDefaultEdges:D}=I.getState(),P={...H,...B};if(D){const{edges:tt,setEdges:rt}=I.getState();rt(YO(P,tt))}q==null||q(P),d==null||d(P)},ct=B=>{if(!k)return;const H=Vx(B.nativeEvent);if(a&&(H&&B.button===0||!H)){const q=I.getState();by.onPointerDown(B.nativeEvent,{autoPanOnConnect:q.autoPanOnConnect,connectionMode:q.connectionMode,connectionRadius:q.connectionRadius,domNode:q.domNode,nodeLookup:q.nodeLookup,lib:q.lib,isTarget:E,handleId:x,nodeId:k,flowId:q.rfId,panBy:q.panBy,cancelConnection:q.cancelConnection,onConnectStart:q.onConnectStart,onConnectEnd:q.onConnectEnd,updateConnection:q.updateConnection,onConnect:ot,isValidConnection:e||q.isValidConnection,getTransform:()=>I.getState().transform,getFromHandle:()=>I.getState().connection.fromHandle,autoPanSpeed:q.autoPanSpeed})}H?y==null||y(B):w==null||w(B)},M=B=>{const{onClickConnectStart:H,onClickConnectEnd:q,connectionClickStartHandle:D,connectionMode:P,isValidConnection:tt,lib:rt,rfId:ut,nodeLookup:gt,connection:dt}=I.getState();if(!k||!D&&!a)return;if(!D){H==null||H(B.nativeEvent,{nodeId:k,handleId:x,handleType:n}),I.setState({connectionClickStartHandle:{nodeId:k,type:n,id:x}});return}const mt=Hx(B.target),pt=e||tt,{connection:Ct,isValid:Vt}=by.isValid(B.nativeEvent,{handle:{nodeId:k,id:x,type:n},connectionMode:P,fromNodeId:D.nodeId,fromHandleId:D.id||null,fromType:D.type,isValidConnection:pt,flowId:ut,doc:mt,lib:rt,nodeLookup:gt});Vt&&Ct&&ot(Ct);const Ot=structuredClone(dt);delete Ot.inProgress,Ot.toPosition=Ot.toHandle?Ot.toHandle.position:null,q==null||q(B,Ot),I.setState({connectionClickStartHandle:null})};return Q.jsx("div",{"data-handleid":x,"data-nodeid":k,"data-handlepos":t,"data-id":`${O}-${k}-${x}-${n}`,className:Se(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",N,g,{source:!E,target:E,connectable:i,connectablestart:a,connectableend:u,clickconnecting:U,connectingfrom:_,connectingto:J,valid:ft,connectionindicator:i&&(!F||W)&&(F||nt?u:a)}]),onMouseDown:ct,onTouchStart:ct,onClick:z?M:void 0,ref:S,...v,children:h})}const Ad=et.memo(fT(DM));function CM({data:n,isConnectable:t,sourcePosition:e=Tt.Bottom}){return Q.jsxs(Q.Fragment,{children:[n==null?void 0:n.label,Q.jsx(Ad,{type:"source",position:e,isConnectable:t})]})}function kM({data:n,isConnectable:t,targetPosition:e=Tt.Top,sourcePosition:i=Tt.Bottom}){return Q.jsxs(Q.Fragment,{children:[Q.jsx(Ad,{type:"target",position:e,isConnectable:t}),n==null?void 0:n.label,Q.jsx(Ad,{type:"source",position:i,isConnectable:t})]})}function OM(){return null}function IM({data:n,isConnectable:t,targetPosition:e=Tt.Top}){return Q.jsxs(Q.Fragment,{children:[Q.jsx(Ad,{type:"target",position:e,isConnectable:t}),n==null?void 0:n.label]})}const Ed={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},Rb={input:CM,default:kM,output:IM,group:OM};function MM(n){var t,e,i,a;return n.internals.handleBounds===void 0?{width:n.width??n.initialWidth??((t=n.style)==null?void 0:t.width),height:n.height??n.initialHeight??((e=n.style)==null?void 0:e.height)}:{width:n.width??((i=n.style)==null?void 0:i.width),height:n.height??((a=n.style)==null?void 0:a.height)}}const RM=n=>{const{width:t,height:e,x:i,y:a}=Fu(n.nodeLookup,{filter:u=>!!u.selected});return{width:Qn(t)?t:null,height:Qn(e)?e:null,userSelectionActive:n.userSelectionActive,transformString:`translate(${n.transform[0]}px,${n.transform[1]}px) scale(${n.transform[2]}) translate(${i}px,${a}px)`}};function BM({onSelectionContextMenu:n,noPanClassName:t,disableKeyboardA11y:e}){const i=ie(),{width:a,height:u,transformString:c,userSelectionActive:d}=Ht(RM,fe),h=gT(),g=et.useRef(null);if(et.useEffect(()=>{var v;e||(v=g.current)==null||v.focus({preventScroll:!0})},[e]),hT({nodeRef:g}),d||!a||!u)return null;const y=n?v=>{const S=i.getState().nodes.filter(x=>x.selected);n(v,S)}:void 0,w=v=>{Object.prototype.hasOwnProperty.call(Ed,v.key)&&(v.preventDefault(),h({direction:Ed[v.key],factor:v.shiftKey?4:1}))};return Q.jsx("div",{className:Se(["react-flow__nodesselection","react-flow__container",t]),style:{transform:c},children:Q.jsx("div",{ref:g,className:"react-flow__nodesselection-rect",onContextMenu:y,tabIndex:e?void 0:-1,onKeyDown:e?void 0:w,style:{width:a,height:u}})})}const Bb=typeof window<"u"?window:void 0,zM=n=>({nodesSelectionActive:n.nodesSelectionActive,userSelectionActive:n.userSelectionActive});function yT({children:n,onPaneClick:t,onPaneMouseEnter:e,onPaneMouseMove:i,onPaneMouseLeave:a,onPaneContextMenu:u,onPaneScroll:c,paneClickDistance:d,deleteKeyCode:h,selectionKeyCode:g,selectionOnDrag:y,selectionMode:w,onSelectionStart:v,onSelectionEnd:S,multiSelectionKeyCode:x,panActivationKeyCode:E,zoomActivationKeyCode:I,elementsSelectable:k,zoomOnScroll:z,zoomOnPinch:N,panOnScroll:O,panOnScrollSpeed:_,panOnScrollMode:J,zoomOnDoubleClick:U,panOnDrag:W,defaultViewport:F,translateExtent:nt,minZoom:ft,maxZoom:ot,preventScrolling:ct,onSelectionContextMenu:M,noWheelClassName:j,noPanClassName:C,disableKeyboardA11y:B,onViewportChange:H,isControlledViewport:q}){const{nodesSelectionActive:D,userSelectionActive:P}=Ht(zM),tt=Pu(g,{target:Bb}),rt=Pu(E,{target:Bb}),ut=rt||W,gt=rt||O,dt=y&&ut!==!0,mt=tt||P||dt;return mM({deleteKeyCode:h,multiSelectionKeyCode:x}),Q.jsx(vM,{onPaneContextMenu:u,elementsSelectable:k,zoomOnScroll:z,zoomOnPinch:N,panOnScroll:gt,panOnScrollSpeed:_,panOnScrollMode:J,zoomOnDoubleClick:U,panOnDrag:!tt&&ut,defaultViewport:F,translateExtent:nt,minZoom:ft,maxZoom:ot,zoomActivationKeyCode:I,preventScrolling:ct,noWheelClassName:j,noPanClassName:C,onViewportChange:H,isControlledViewport:q,paneClickDistance:d,children:Q.jsxs(xM,{onSelectionStart:v,onSelectionEnd:S,onPaneClick:t,onPaneMouseEnter:e,onPaneMouseMove:i,onPaneMouseLeave:a,onPaneContextMenu:u,onPaneScroll:c,panOnDrag:ut,isSelecting:!!mt,selectionMode:w,selectionKeyPressed:tt,selectionOnDrag:dt,children:[n,D&&Q.jsx(BM,{onSelectionContextMenu:M,noPanClassName:C,disableKeyboardA11y:B})]})})}yT.displayName="FlowRenderer";const LM=et.memo(yT),_M=n=>t=>n?zx(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map(e=>e.id):Array.from(t.nodeLookup.keys());function UM(n){return Ht(et.useCallback(_M(n),[n]),fe)}const qM=n=>n.updateNodeInternals;function PM(){const n=Ht(qM),[t]=et.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(e=>{const i=new Map;e.forEach(a=>{const u=a.target.getAttribute("data-id");i.set(u,{id:u,nodeElement:a.target,force:!0})}),n(i)}));return et.useEffect(()=>()=>{t==null||t.disconnect()},[t]),t}function JM({node:n,nodeType:t,hasDimensions:e,resizeObserver:i}){const a=ie(),u=et.useRef(null),c=et.useRef(null),d=et.useRef(n.sourcePosition),h=et.useRef(n.targetPosition),g=et.useRef(t),y=e&&!!n.internals.handleBounds;return et.useEffect(()=>{u.current&&!n.hidden&&(!y||c.current!==u.current)&&(c.current&&(i==null||i.unobserve(c.current)),i==null||i.observe(u.current),c.current=u.current)},[y,n.hidden]),et.useEffect(()=>()=>{c.current&&(i==null||i.unobserve(c.current),c.current=null)},[]),et.useEffect(()=>{if(u.current){const w=g.current!==t,v=d.current!==n.sourcePosition,S=h.current!==n.targetPosition;(w||v||S)&&(g.current=t,d.current=n.sourcePosition,h.current=n.targetPosition,a.getState().updateNodeInternals(new Map([[n.id,{id:n.id,nodeElement:u.current,force:!0}]])))}},[n.id,t,n.sourcePosition,n.targetPosition]),u}function HM({id:n,onClick:t,onMouseEnter:e,onMouseMove:i,onMouseLeave:a,onContextMenu:u,onDoubleClick:c,nodesDraggable:d,elementsSelectable:h,nodesConnectable:g,nodesFocusable:y,resizeObserver:w,noDragClassName:v,noPanClassName:S,disableKeyboardA11y:x,rfId:E,nodeTypes:I,nodeClickDistance:k,onError:z}){const{node:N,internals:O,isParent:_}=Ht(mt=>{const pt=mt.nodeLookup.get(n),Ct=mt.parentLookup.has(n);return{node:pt,internals:pt.internals,isParent:Ct}},fe);let J=N.type||"default",U=(I==null?void 0:I[J])||Rb[J];U===void 0&&(z==null||z("003",Nr.error003(J)),J="default",U=Rb.default);const W=!!(N.draggable||d&&typeof N.draggable>"u"),F=!!(N.selectable||h&&typeof N.selectable>"u"),nt=!!(N.connectable||g&&typeof N.connectable>"u"),ft=!!(N.focusable||y&&typeof N.focusable>"u"),ot=ie(),ct=Px(N),M=JM({node:N,nodeType:J,hasDimensions:ct,resizeObserver:w}),j=hT({nodeRef:M,disabled:N.hidden||!W,noDragClassName:v,handleSelector:N.dragHandle,nodeId:n,isSelectable:F,nodeClickDistance:k}),C=gT();if(N.hidden)return null;const B=as(N),H=MM(N),q=F||W||t||e||i||a,D=e?mt=>e(mt,{...O.userNode}):void 0,P=i?mt=>i(mt,{...O.userNode}):void 0,tt=a?mt=>a(mt,{...O.userNode}):void 0,rt=u?mt=>u(mt,{...O.userNode}):void 0,ut=c?mt=>c(mt,{...O.userNode}):void 0,gt=mt=>{const{selectNodesOnDrag:pt,nodeDragThreshold:Ct}=ot.getState();F&&(!pt||!W||Ct>0)&&xy({id:n,store:ot,nodeRef:M}),t&&t(mt,{...O.userNode})},dt=mt=>{if(!($x(mt.nativeEvent)||x))if(Ix.includes(mt.key)&&F){const pt=mt.key==="Escape";xy({id:n,store:ot,unselect:pt,nodeRef:M})}else W&&N.selected&&Object.prototype.hasOwnProperty.call(Ed,mt.key)&&(mt.preventDefault(),ot.setState({ariaLiveMessage:`Moved selected node ${mt.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~O.positionAbsolute.x}, y: ${~~O.positionAbsolute.y}`}),C({direction:Ed[mt.key],factor:mt.shiftKey?4:1}))};return Q.jsx("div",{className:Se(["react-flow__node",`react-flow__node-${J}`,{[S]:W},N.className,{selected:N.selected,selectable:F,parent:_,draggable:W,dragging:j}]),ref:M,style:{zIndex:O.z,transform:`translate(${O.positionAbsolute.x}px,${O.positionAbsolute.y}px)`,pointerEvents:q?"all":"none",visibility:ct?"visible":"hidden",...N.style,...H},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:D,onMouseMove:P,onMouseLeave:tt,onContextMenu:rt,onClick:gt,onDoubleClick:ut,onKeyDown:ft?dt:void 0,tabIndex:ft?0:void 0,role:ft?"button":void 0,"aria-describedby":x?void 0:`${oT}-${E}`,"aria-label":N.ariaLabel,children:Q.jsx(AM,{value:n,children:Q.jsx(U,{id:n,data:N.data,type:J,positionAbsoluteX:O.positionAbsolute.x,positionAbsoluteY:O.positionAbsolute.y,selected:N.selected??!1,selectable:F,draggable:W,deletable:N.deletable??!0,isConnectable:nt,sourcePosition:N.sourcePosition,targetPosition:N.targetPosition,dragging:j,dragHandle:N.dragHandle,zIndex:O.z,parentId:N.parentId,...B})})})}const $M=n=>({nodesDraggable:n.nodesDraggable,nodesConnectable:n.nodesConnectable,nodesFocusable:n.nodesFocusable,elementsSelectable:n.elementsSelectable,onError:n.onError});function pT(n){const{nodesDraggable:t,nodesConnectable:e,nodesFocusable:i,elementsSelectable:a,onError:u}=Ht($M,fe),c=UM(n.onlyRenderVisibleElements),d=PM();return Q.jsx("div",{className:"react-flow__nodes",style:$d,children:c.map(h=>Q.jsx(HM,{id:h,nodeTypes:n.nodeTypes,nodeExtent:n.nodeExtent,onClick:n.onNodeClick,onMouseEnter:n.onNodeMouseEnter,onMouseMove:n.onNodeMouseMove,onMouseLeave:n.onNodeMouseLeave,onContextMenu:n.onNodeContextMenu,onDoubleClick:n.onNodeDoubleClick,noDragClassName:n.noDragClassName,noPanClassName:n.noPanClassName,rfId:n.rfId,disableKeyboardA11y:n.disableKeyboardA11y,resizeObserver:d,nodesDraggable:t,nodesConnectable:e,nodesFocusable:i,elementsSelectable:a,nodeClickDistance:n.nodeClickDistance,onError:u},h))})}pT.displayName="NodeRenderer";const VM=et.memo(pT);function jM(n){return Ht(et.useCallback(e=>{if(!n)return e.edges.map(a=>a.id);const i=[];if(e.width&&e.height)for(const a of e.edges){const u=e.nodeLookup.get(a.source),c=e.nodeLookup.get(a.target);u&&c&&$O({sourceNode:u,targetNode:c,width:e.width,height:e.height,transform:e.transform})&&i.push(a.id)}return i},[n]),fe)}const YM=({color:n="none",strokeWidth:t=1})=>Q.jsx("polyline",{style:{stroke:n,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),GM=({color:n="none",strokeWidth:t=1})=>Q.jsx("polyline",{style:{stroke:n,fill:n,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),zb={[Sd.Arrow]:YM,[Sd.ArrowClosed]:GM};function XM(n){const t=ie();return et.useMemo(()=>{var a,u;return Object.prototype.hasOwnProperty.call(zb,n)?zb[n]:((u=(a=t.getState()).onError)==null||u.call(a,"009",Nr.error009(n)),null)},[n])}const KM=({id:n,type:t,color:e,width:i=12.5,height:a=12.5,markerUnits:u="strokeWidth",strokeWidth:c,orient:d="auto-start-reverse"})=>{const h=XM(t);return h?Q.jsx("marker",{className:"react-flow__arrowhead",id:n,markerWidth:`${i}`,markerHeight:`${a}`,viewBox:"-10 -10 20 20",markerUnits:u,orient:d,refX:"0",refY:"0",children:Q.jsx(h,{color:e,strokeWidth:c})}):null},vT=({defaultColor:n,rfId:t})=>{const e=Ht(u=>u.edges),i=Ht(u=>u.defaultEdgeOptions),a=et.useMemo(()=>ZO(e,{id:t,defaultColor:n,defaultMarkerStart:i==null?void 0:i.markerStart,defaultMarkerEnd:i==null?void 0:i.markerEnd}),[e,i,t,n]);return a.length?Q.jsx("svg",{className:"react-flow__marker",children:Q.jsx("defs",{children:a.map(u=>Q.jsx(KM,{id:u.id,type:u.type,color:u.color,width:u.width,height:u.height,markerUnits:u.markerUnits,strokeWidth:u.strokeWidth,orient:u.orient},u.id))})}):null};vT.displayName="MarkerDefinitions";var FM=et.memo(vT);function wT({x:n,y:t,label:e,labelStyle:i,labelShowBg:a=!0,labelBgStyle:u,labelBgPadding:c=[2,4],labelBgBorderRadius:d=2,children:h,className:g,...y}){const[w,v]=et.useState({x:1,y:0,width:0,height:0}),S=Se(["react-flow__edge-textwrapper",g]),x=et.useRef(null);return et.useEffect(()=>{if(x.current){const E=x.current.getBBox();v({x:E.x,y:E.y,width:E.width,height:E.height})}},[e]),e?Q.jsxs("g",{transform:`translate(${n-w.width/2} ${t-w.height/2})`,className:S,visibility:w.width?"visible":"hidden",...y,children:[a&&Q.jsx("rect",{width:w.width+2*c[0],x:-c[0],y:-c[1],height:w.height+2*c[1],className:"react-flow__edge-textbg",style:u,rx:d,ry:d}),Q.jsx("text",{className:"react-flow__edge-text",y:w.height/2,dy:"0.3em",ref:x,style:i,children:e}),h]}):null}wT.displayName="EdgeText";const ZM=et.memo(wT);function Vd({path:n,labelX:t,labelY:e,label:i,labelStyle:a,labelShowBg:u,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:h,interactionWidth:g=20,...y}){return Q.jsxs(Q.Fragment,{children:[Q.jsx("path",{...y,d:n,fill:"none",className:Se(["react-flow__edge-path",y.className])}),g&&Q.jsx("path",{d:n,fill:"none",strokeOpacity:0,strokeWidth:g,className:"react-flow__edge-interaction"}),i&&Qn(t)&&Qn(e)?Q.jsx(ZM,{x:t,y:e,label:i,labelStyle:a,labelShowBg:u,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:h}):null]})}function Lb({pos:n,x1:t,y1:e,x2:i,y2:a}){return n===Tt.Left||n===Tt.Right?[.5*(t+i),e]:[t,.5*(e+a)]}function ST({sourceX:n,sourceY:t,sourcePosition:e=Tt.Bottom,targetX:i,targetY:a,targetPosition:u=Tt.Top}){const[c,d]=Lb({pos:e,x1:n,y1:t,x2:i,y2:a}),[h,g]=Lb({pos:u,x1:i,y1:a,x2:n,y2:t}),[y,w,v,S]=jx({sourceX:n,sourceY:t,targetX:i,targetY:a,sourceControlX:c,sourceControlY:d,targetControlX:h,targetControlY:g});return[`M${n},${t} C${c},${d} ${h},${g} ${i},${a}`,y,w,v,S]}function bT(n){return et.memo(({id:t,sourceX:e,sourceY:i,targetX:a,targetY:u,sourcePosition:c=Tt.Bottom,targetPosition:d=Tt.Top,label:h,labelStyle:g,labelShowBg:y,labelBgStyle:w,labelBgPadding:v,labelBgBorderRadius:S,style:x,markerEnd:E,markerStart:I,interactionWidth:k})=>{const[z,N,O]=ST({sourceX:e,sourceY:i,sourcePosition:c,targetX:a,targetY:u,targetPosition:d}),_=n.isInternal?void 0:t;return Q.jsx(Vd,{id:_,path:z,labelX:N,labelY:O,label:h,labelStyle:g,labelShowBg:y,labelBgStyle:w,labelBgPadding:v,labelBgBorderRadius:S,style:x,markerEnd:E,markerStart:I,interactionWidth:k})})}const QM=bT({isInternal:!1}),xT=bT({isInternal:!0});QM.displayName="SimpleBezierEdge";xT.displayName="SimpleBezierEdgeInternal";function TT(n){return et.memo(({id:t,sourceX:e,sourceY:i,targetX:a,targetY:u,label:c,labelStyle:d,labelShowBg:h,labelBgStyle:g,labelBgPadding:y,labelBgBorderRadius:w,style:v,sourcePosition:S=Tt.Bottom,targetPosition:x=Tt.Top,markerEnd:E,markerStart:I,pathOptions:k,interactionWidth:z})=>{const[N,O,_]=vy({sourceX:e,sourceY:i,sourcePosition:S,targetX:a,targetY:u,targetPosition:x,borderRadius:k==null?void 0:k.borderRadius,offset:k==null?void 0:k.offset}),J=n.isInternal?void 0:t;return Q.jsx(Vd,{id:J,path:N,labelX:O,labelY:_,label:c,labelStyle:d,labelShowBg:h,labelBgStyle:g,labelBgPadding:y,labelBgBorderRadius:w,style:v,markerEnd:E,markerStart:I,interactionWidth:z})})}const AT=TT({isInternal:!1}),ET=TT({isInternal:!0});AT.displayName="SmoothStepEdge";ET.displayName="SmoothStepEdgeInternal";function NT(n){return et.memo(({id:t,...e})=>{var a;const i=n.isInternal?void 0:t;return Q.jsx(AT,{...e,id:i,pathOptions:et.useMemo(()=>{var u;return{borderRadius:0,offset:(u=e.pathOptions)==null?void 0:u.offset}},[(a=e.pathOptions)==null?void 0:a.offset])})})}const WM=NT({isInternal:!1}),DT=NT({isInternal:!0});WM.displayName="StepEdge";DT.displayName="StepEdgeInternal";function CT(n){return et.memo(({id:t,sourceX:e,sourceY:i,targetX:a,targetY:u,label:c,labelStyle:d,labelShowBg:h,labelBgStyle:g,labelBgPadding:y,labelBgBorderRadius:w,style:v,markerEnd:S,markerStart:x,interactionWidth:E})=>{const[I,k,z]=Xx({sourceX:e,sourceY:i,targetX:a,targetY:u}),N=n.isInternal?void 0:t;return Q.jsx(Vd,{id:N,path:I,labelX:k,labelY:z,label:c,labelStyle:d,labelShowBg:h,labelBgStyle:g,labelBgPadding:y,labelBgBorderRadius:w,style:v,markerEnd:S,markerStart:x,interactionWidth:E})})}const tR=CT({isInternal:!1}),kT=CT({isInternal:!0});tR.displayName="StraightEdge";kT.displayName="StraightEdgeInternal";function OT(n){return et.memo(({id:t,sourceX:e,sourceY:i,targetX:a,targetY:u,sourcePosition:c=Tt.Bottom,targetPosition:d=Tt.Top,label:h,labelStyle:g,labelShowBg:y,labelBgStyle:w,labelBgPadding:v,labelBgBorderRadius:S,style:x,markerEnd:E,markerStart:I,pathOptions:k,interactionWidth:z})=>{const[N,O,_]=Yx({sourceX:e,sourceY:i,sourcePosition:c,targetX:a,targetY:u,targetPosition:d,curvature:k==null?void 0:k.curvature}),J=n.isInternal?void 0:t;return Q.jsx(Vd,{id:J,path:N,labelX:O,labelY:_,label:h,labelStyle:g,labelShowBg:y,labelBgStyle:w,labelBgPadding:v,labelBgBorderRadius:S,style:x,markerEnd:E,markerStart:I,interactionWidth:z})})}const eR=OT({isInternal:!1}),IT=OT({isInternal:!0});eR.displayName="BezierEdge";IT.displayName="BezierEdgeInternal";const _b={default:IT,straight:kT,step:DT,smoothstep:ET,simplebezier:xT},Ub={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},nR=(n,t,e)=>e===Tt.Left?n-t:e===Tt.Right?n+t:n,rR=(n,t,e)=>e===Tt.Top?n-t:e===Tt.Bottom?n+t:n,qb="react-flow__edgeupdater";function Pb({position:n,centerX:t,centerY:e,radius:i=10,onMouseDown:a,onMouseEnter:u,onMouseOut:c,type:d}){return Q.jsx("circle",{onMouseDown:a,onMouseEnter:u,onMouseOut:c,className:Se([qb,`${qb}-${d}`]),cx:nR(t,i,n),cy:rR(e,i,n),r:i,stroke:"transparent",fill:"transparent"})}function iR({isReconnectable:n,reconnectRadius:t,edge:e,sourceX:i,sourceY:a,targetX:u,targetY:c,sourcePosition:d,targetPosition:h,onReconnect:g,onReconnectStart:y,onReconnectEnd:w,setReconnecting:v,setUpdateHover:S}){const x=ie(),E=(O,_)=>{if(O.button!==0)return;const{autoPanOnConnect:J,domNode:U,isValidConnection:W,connectionMode:F,connectionRadius:nt,lib:ft,onConnectStart:ot,onConnectEnd:ct,cancelConnection:M,nodeLookup:j,rfId:C,panBy:B,updateConnection:H}=x.getState(),q=_.type==="target";v(!0),y==null||y(O,e,_.type);const D=(tt,rt)=>{v(!1),w==null||w(tt,e,_.type,rt)},P=tt=>g==null?void 0:g(e,tt);by.onPointerDown(O.nativeEvent,{autoPanOnConnect:J,connectionMode:F,connectionRadius:nt,domNode:U,handleId:_.id,nodeId:_.nodeId,nodeLookup:j,isTarget:q,edgeUpdaterType:_.type,lib:ft,flowId:C,cancelConnection:M,panBy:B,isValidConnection:W,onConnect:P,onConnectStart:ot,onConnectEnd:ct,onReconnectEnd:D,updateConnection:H,getTransform:()=>x.getState().transform,getFromHandle:()=>x.getState().connection.fromHandle})},I=O=>E(O,{nodeId:e.target,id:e.targetHandle??null,type:"target"}),k=O=>E(O,{nodeId:e.source,id:e.sourceHandle??null,type:"source"}),z=()=>S(!0),N=()=>S(!1);return Q.jsxs(Q.Fragment,{children:[(n===!0||n==="source")&&Q.jsx(Pb,{position:d,centerX:i,centerY:a,radius:t,onMouseDown:I,onMouseEnter:z,onMouseOut:N,type:"source"}),(n===!0||n==="target")&&Q.jsx(Pb,{position:h,centerX:u,centerY:c,radius:t,onMouseDown:k,onMouseEnter:z,onMouseOut:N,type:"target"})]})}function sR({id:n,edgesFocusable:t,edgesReconnectable:e,elementsSelectable:i,onClick:a,onDoubleClick:u,onContextMenu:c,onMouseEnter:d,onMouseMove:h,onMouseLeave:g,reconnectRadius:y,onReconnect:w,onReconnectStart:v,onReconnectEnd:S,rfId:x,edgeTypes:E,noPanClassName:I,onError:k,disableKeyboardA11y:z}){let N=Ht(bt=>bt.edgeLookup.get(n));const O=Ht(bt=>bt.defaultEdgeOptions);N=O?{...O,...N}:N;let _=N.type||"default",J=(E==null?void 0:E[_])||_b[_];J===void 0&&(k==null||k("011",Nr.error011(_)),_="default",J=_b.default);const U=!!(N.focusable||t&&typeof N.focusable>"u"),W=typeof w<"u"&&(N.reconnectable||e&&typeof N.reconnectable>"u"),F=!!(N.selectable||i&&typeof N.selectable>"u"),nt=et.useRef(null),[ft,ot]=et.useState(!1),[ct,M]=et.useState(!1),j=ie(),{zIndex:C,sourceX:B,sourceY:H,targetX:q,targetY:D,sourcePosition:P,targetPosition:tt}=Ht(et.useCallback(bt=>{const Yt=bt.nodeLookup.get(N.source),qt=bt.nodeLookup.get(N.target);if(!Yt||!qt)return{zIndex:N.zIndex,...Ub};const be=FO({id:n,sourceNode:Yt,targetNode:qt,sourceHandle:N.sourceHandle||null,targetHandle:N.targetHandle||null,connectionMode:bt.connectionMode,onError:k});return{zIndex:HO({selected:N.selected,zIndex:N.zIndex,sourceNode:Yt,targetNode:qt,elevateOnSelect:bt.elevateEdgesOnSelect}),...be||Ub}},[N.source,N.target,N.sourceHandle,N.targetHandle,N.selected,N.zIndex]),fe),rt=et.useMemo(()=>N.markerStart?`url('#${wy(N.markerStart,x)}')`:void 0,[N.markerStart,x]),ut=et.useMemo(()=>N.markerEnd?`url('#${wy(N.markerEnd,x)}')`:void 0,[N.markerEnd,x]);if(N.hidden||B===null||H===null||q===null||D===null)return null;const gt=bt=>{var rn;const{addSelectedEdges:Yt,unselectNodesAndEdges:qt,multiSelectionActive:be}=j.getState();F&&(j.setState({nodesSelectionActive:!1}),N.selected&&be?(qt({nodes:[],edges:[N]}),(rn=nt.current)==null||rn.blur()):Yt([n])),a&&a(bt,N)},dt=u?bt=>{u(bt,{...N})}:void 0,mt=c?bt=>{c(bt,{...N})}:void 0,pt=d?bt=>{d(bt,{...N})}:void 0,Ct=h?bt=>{h(bt,{...N})}:void 0,Vt=g?bt=>{g(bt,{...N})}:void 0,Ot=bt=>{var Yt;if(!z&&Ix.includes(bt.key)&&F){const{unselectNodesAndEdges:qt,addSelectedEdges:be}=j.getState();bt.key==="Escape"?((Yt=nt.current)==null||Yt.blur(),qt({edges:[N]})):be([n])}};return Q.jsx("svg",{style:{zIndex:C},children:Q.jsxs("g",{className:Se(["react-flow__edge",`react-flow__edge-${_}`,N.className,I,{selected:N.selected,animated:N.animated,inactive:!F&&!a,updating:ft,selectable:F}]),onClick:gt,onDoubleClick:dt,onContextMenu:mt,onMouseEnter:pt,onMouseMove:Ct,onMouseLeave:Vt,onKeyDown:U?Ot:void 0,tabIndex:U?0:void 0,role:U?"button":"img","data-id":n,"data-testid":`rf__edge-${n}`,"aria-label":N.ariaLabel===null?void 0:N.ariaLabel||`Edge from ${N.source} to ${N.target}`,"aria-describedby":U?`${lT}-${x}`:void 0,ref:nt,children:[!ct&&Q.jsx(J,{id:n,source:N.source,target:N.target,type:N.type,selected:N.selected,animated:N.animated,selectable:F,deletable:N.deletable??!0,label:N.label,labelStyle:N.labelStyle,labelShowBg:N.labelShowBg,labelBgStyle:N.labelBgStyle,labelBgPadding:N.labelBgPadding,labelBgBorderRadius:N.labelBgBorderRadius,sourceX:B,sourceY:H,targetX:q,targetY:D,sourcePosition:P,targetPosition:tt,data:N.data,style:N.style,sourceHandleId:N.sourceHandle,targetHandleId:N.targetHandle,markerStart:rt,markerEnd:ut,pathOptions:"pathOptions"in N?N.pathOptions:void 0,interactionWidth:N.interactionWidth}),W&&Q.jsx(iR,{edge:N,isReconnectable:W,reconnectRadius:y,onReconnect:w,onReconnectStart:v,onReconnectEnd:S,sourceX:B,sourceY:H,targetX:q,targetY:D,sourcePosition:P,targetPosition:tt,setUpdateHover:ot,setReconnecting:M})]})})}const aR=n=>({edgesFocusable:n.edgesFocusable,edgesReconnectable:n.edgesReconnectable,elementsSelectable:n.elementsSelectable,connectionMode:n.connectionMode,onError:n.onError});function MT({defaultMarkerColor:n,onlyRenderVisibleElements:t,rfId:e,edgeTypes:i,noPanClassName:a,onReconnect:u,onEdgeContextMenu:c,onEdgeMouseEnter:d,onEdgeMouseMove:h,onEdgeMouseLeave:g,onEdgeClick:y,reconnectRadius:w,onEdgeDoubleClick:v,onReconnectStart:S,onReconnectEnd:x,disableKeyboardA11y:E}){const{edgesFocusable:I,edgesReconnectable:k,elementsSelectable:z,onError:N}=Ht(aR,fe),O=jM(t);return Q.jsxs("div",{className:"react-flow__edges",children:[Q.jsx(FM,{defaultColor:n,rfId:e}),O.map(_=>Q.jsx(sR,{id:_,edgesFocusable:I,edgesReconnectable:k,elementsSelectable:z,noPanClassName:a,onReconnect:u,onContextMenu:c,onMouseEnter:d,onMouseMove:h,onMouseLeave:g,onClick:y,reconnectRadius:w,onDoubleClick:v,onReconnectStart:S,onReconnectEnd:x,rfId:e,onError:N,edgeTypes:i,disableKeyboardA11y:E},_))]})}MT.displayName="EdgeRenderer";const oR=et.memo(MT),lR=n=>`translate(${n.transform[0]}px,${n.transform[1]}px) scale(${n.transform[2]})`;function uR({children:n}){const t=Ht(lR);return Q.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:n})}function cR(n){const t=sp(),e=et.useRef(!1);et.useEffect(()=>{!e.current&&t.viewportInitialized&&n&&(setTimeout(()=>n(t),1),e.current=!0)},[n,t.viewportInitialized])}const fR=n=>{var t;return(t=n.panZoom)==null?void 0:t.syncViewport};function dR(n){const t=Ht(fR),e=ie();return et.useEffect(()=>{n&&(t==null||t(n),e.setState({transform:[n.x,n.y,n.zoom]}))},[n,t]),null}function hR(n){return n.connection.inProgress?{...n.connection,to:Zu(n.connection.to,n.transform)}:{...n.connection}}function gR(n){return hR}function mR(n){const t=gR();return Ht(t,fe)}const yR=n=>({nodesConnectable:n.nodesConnectable,isValid:n.connection.isValid,inProgress:n.connection.inProgress,width:n.width,height:n.height});function pR({containerStyle:n,style:t,type:e,component:i}){const{nodesConnectable:a,width:u,height:c,isValid:d,inProgress:h}=Ht(yR,fe);return!(u&&a&&h)?null:Q.jsx("svg",{style:n,width:u,height:c,className:"react-flow__connectionline react-flow__container",children:Q.jsx("g",{className:Se(["react-flow__connection",Rx(d)]),children:Q.jsx(RT,{style:t,type:e,CustomComponent:i,isValid:d})})})}const RT=({style:n,type:t=Vs.Bezier,CustomComponent:e,isValid:i})=>{const{inProgress:a,from:u,fromNode:c,fromHandle:d,fromPosition:h,to:g,toNode:y,toHandle:w,toPosition:v}=mR();if(!a)return;if(e)return Q.jsx(e,{connectionLineType:t,connectionLineStyle:n,fromNode:c,fromHandle:d,fromX:u.x,fromY:u.y,toX:g.x,toY:g.y,fromPosition:h,toPosition:v,connectionStatus:Rx(i),toNode:y,toHandle:w});let S="";const x={sourceX:u.x,sourceY:u.y,sourcePosition:h,targetX:g.x,targetY:g.y,targetPosition:v};switch(t){case Vs.Bezier:[S]=Yx(x);break;case Vs.SimpleBezier:[S]=ST(x);break;case Vs.Step:[S]=vy({...x,borderRadius:0});break;case Vs.SmoothStep:[S]=vy(x);break;default:[S]=Xx(x)}return Q.jsx("path",{d:S,fill:"none",className:"react-flow__connection-path",style:n})};RT.displayName="ConnectionLine";const vR={};function Jb(n=vR){et.useRef(n),ie(),et.useEffect(()=>{},[n])}function wR(){ie(),et.useRef(!1),et.useEffect(()=>{},[])}function BT({nodeTypes:n,edgeTypes:t,onInit:e,onNodeClick:i,onEdgeClick:a,onNodeDoubleClick:u,onEdgeDoubleClick:c,onNodeMouseEnter:d,onNodeMouseMove:h,onNodeMouseLeave:g,onNodeContextMenu:y,onSelectionContextMenu:w,onSelectionStart:v,onSelectionEnd:S,connectionLineType:x,connectionLineStyle:E,connectionLineComponent:I,connectionLineContainerStyle:k,selectionKeyCode:z,selectionOnDrag:N,selectionMode:O,multiSelectionKeyCode:_,panActivationKeyCode:J,zoomActivationKeyCode:U,deleteKeyCode:W,onlyRenderVisibleElements:F,elementsSelectable:nt,defaultViewport:ft,translateExtent:ot,minZoom:ct,maxZoom:M,preventScrolling:j,defaultMarkerColor:C,zoomOnScroll:B,zoomOnPinch:H,panOnScroll:q,panOnScrollSpeed:D,panOnScrollMode:P,zoomOnDoubleClick:tt,panOnDrag:rt,onPaneClick:ut,onPaneMouseEnter:gt,onPaneMouseMove:dt,onPaneMouseLeave:mt,onPaneScroll:pt,onPaneContextMenu:Ct,paneClickDistance:Vt,nodeClickDistance:Ot,onEdgeContextMenu:bt,onEdgeMouseEnter:Yt,onEdgeMouseMove:qt,onEdgeMouseLeave:be,reconnectRadius:rn,onReconnect:Oe,onReconnectStart:tl,onReconnectEnd:La,noDragClassName:os,noWheelClassName:ls,noPanClassName:Ws,disableKeyboardA11y:us,nodeExtent:el,rfId:ta,viewport:Jn,onViewportChange:Ee}){return Jb(n),Jb(t),wR(),cR(e),dR(Jn),Q.jsx(LM,{onPaneClick:ut,onPaneMouseEnter:gt,onPaneMouseMove:dt,onPaneMouseLeave:mt,onPaneContextMenu:Ct,onPaneScroll:pt,paneClickDistance:Vt,deleteKeyCode:W,selectionKeyCode:z,selectionOnDrag:N,selectionMode:O,onSelectionStart:v,onSelectionEnd:S,multiSelectionKeyCode:_,panActivationKeyCode:J,zoomActivationKeyCode:U,elementsSelectable:nt,zoomOnScroll:B,zoomOnPinch:H,zoomOnDoubleClick:tt,panOnScroll:q,panOnScrollSpeed:D,panOnScrollMode:P,panOnDrag:rt,defaultViewport:ft,translateExtent:ot,minZoom:ct,maxZoom:M,onSelectionContextMenu:w,preventScrolling:j,noDragClassName:os,noWheelClassName:ls,noPanClassName:Ws,disableKeyboardA11y:us,onViewportChange:Ee,isControlledViewport:!!Jn,children:Q.jsxs(uR,{children:[Q.jsx(oR,{edgeTypes:t,onEdgeClick:a,onEdgeDoubleClick:c,onReconnect:Oe,onReconnectStart:tl,onReconnectEnd:La,onlyRenderVisibleElements:F,onEdgeContextMenu:bt,onEdgeMouseEnter:Yt,onEdgeMouseMove:qt,onEdgeMouseLeave:be,reconnectRadius:rn,defaultMarkerColor:C,noPanClassName:Ws,disableKeyboardA11y:us,rfId:ta}),Q.jsx(pR,{style:E,type:x,component:I,containerStyle:k}),Q.jsx("div",{className:"react-flow__edgelabel-renderer"}),Q.jsx(VM,{nodeTypes:n,onNodeClick:i,onNodeDoubleClick:u,onNodeMouseEnter:d,onNodeMouseMove:h,onNodeMouseLeave:g,onNodeContextMenu:y,nodeClickDistance:Ot,onlyRenderVisibleElements:F,noPanClassName:Ws,noDragClassName:os,disableKeyboardA11y:us,nodeExtent:el,rfId:ta}),Q.jsx("div",{className:"react-flow__viewport-portal"})]})})}BT.displayName="GraphView";const SR=et.memo(BT),Hb=({nodes:n,edges:t,defaultNodes:e,defaultEdges:i,width:a,height:u,fitView:c,nodeOrigin:d,nodeExtent:h}={})=>{const g=new Map,y=new Map,w=new Map,v=new Map,S=i??t??[],x=e??n??[],E=d??[0,0],I=h??Lu;Fx(w,v,S),Sy(x,g,y,{nodeOrigin:E,nodeExtent:I,elevateNodesOnSelect:!1});let k=[0,0,1];if(c&&a&&u){const z=Fu(g,{filter:J=>!!((J.width||J.initialWidth)&&(J.height||J.initialHeight))}),{x:N,y:O,zoom:_}=Wy(z,a,u,.5,2,.1);k=[N,O,_]}return{rfId:"1",width:0,height:0,transform:k,nodes:x,nodeLookup:g,parentLookup:y,edges:S,edgeLookup:v,connectionLookup:w,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:e!==void 0,hasDefaultEdges:i!==void 0,panZoom:null,minZoom:.5,maxZoom:2,translateExtent:Lu,nodeExtent:I,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:Fo.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:E,nodeDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:c??!1,fitViewOptions:void 0,fitViewResolver:null,connection:{...Mx},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanSpeed:15,connectionRadius:20,onError:UO,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1}},bR=({nodes:n,edges:t,defaultNodes:e,defaultEdges:i,width:a,height:u,fitView:c,nodeOrigin:d,nodeExtent:h})=>UI((g,y)=>{async function w(){const{nodeLookup:v,panZoom:S,fitViewOptions:x,fitViewResolver:E,width:I,height:k,minZoom:z,maxZoom:N}=y();S&&(await LO({nodes:v,width:I,height:k,panZoom:S,minZoom:z,maxZoom:N},x),E==null||E.resolve(!0),g({fitViewResolver:null}))}return{...Hb({nodes:n,edges:t,width:a,height:u,fitView:c,nodeOrigin:d,nodeExtent:h,defaultNodes:e,defaultEdges:i}),setNodes:v=>{const{nodeLookup:S,parentLookup:x,nodeOrigin:E,elevateNodesOnSelect:I,fitViewQueued:k}=y(),z=Sy(v,S,x,{nodeOrigin:E,nodeExtent:h,elevateNodesOnSelect:I,checkEquality:!0});k&&z?(w(),g({nodes:v,fitViewQueued:!1,fitViewOptions:void 0})):g({nodes:v})},setEdges:v=>{const{connectionLookup:S,edgeLookup:x}=y();Fx(S,x,v),g({edges:v})},setDefaultNodesAndEdges:(v,S)=>{if(v){const{setNodes:x}=y();x(v),g({hasDefaultNodes:!0})}if(S){const{setEdges:x}=y();x(S),g({hasDefaultEdges:!0})}},updateNodeInternals:v=>{const{triggerNodeChanges:S,nodeLookup:x,parentLookup:E,domNode:I,nodeOrigin:k,nodeExtent:z,debug:N,fitViewQueued:O}=y(),{changes:_,updatedInternals:J}=nI(v,x,E,I,k,z);J&&(WO(x,E,{nodeOrigin:k,nodeExtent:z}),O?(w(),g({fitViewQueued:!1,fitViewOptions:void 0})):g({}),(_==null?void 0:_.length)>0&&(N&&console.log("React Flow: trigger node changes",_),S==null||S(_)))},updateNodePositions:(v,S=!1)=>{const x=[],E=[],{nodeLookup:I,triggerNodeChanges:k}=y();for(const[z,N]of v){const O=I.get(z),_=!!(O!=null&&O.expandParent&&(O!=null&&O.parentId)&&(N!=null&&N.position)),J={id:z,type:"position",position:_?{x:Math.max(0,N.position.x),y:Math.max(0,N.position.y)}:N.position,dragging:S};_&&O.parentId&&x.push({id:z,parentId:O.parentId,rect:{...N.internals.positionAbsolute,width:N.measured.width??0,height:N.measured.height??0}}),E.push(J)}if(x.length>0){const{parentLookup:z,nodeOrigin:N}=y(),O=ip(x,I,z,N);E.push(...O)}k(E)},triggerNodeChanges:v=>{const{onNodesChange:S,setNodes:x,nodes:E,hasDefaultNodes:I,debug:k}=y();if(v!=null&&v.length){if(I){const z=sM(v,E);x(z)}k&&console.log("React Flow: trigger node changes",v),S==null||S(v)}},triggerEdgeChanges:v=>{const{onEdgesChange:S,setEdges:x,edges:E,hasDefaultEdges:I,debug:k}=y();if(v!=null&&v.length){if(I){const z=aM(v,E);x(z)}k&&console.log("React Flow: trigger edge changes",v),S==null||S(v)}},addSelectedNodes:v=>{const{multiSelectionActive:S,edgeLookup:x,nodeLookup:E,triggerNodeChanges:I,triggerEdgeChanges:k}=y();if(S){const z=v.map(N=>Ta(N,!0));I(z);return}I(Mo(E,new Set([...v]),!0)),k(Mo(x))},addSelectedEdges:v=>{const{multiSelectionActive:S,edgeLookup:x,nodeLookup:E,triggerNodeChanges:I,triggerEdgeChanges:k}=y();if(S){const z=v.map(N=>Ta(N,!0));k(z);return}k(Mo(x,new Set([...v]))),I(Mo(E,new Set,!0))},unselectNodesAndEdges:({nodes:v,edges:S}={})=>{const{edges:x,nodes:E,nodeLookup:I,triggerNodeChanges:k,triggerEdgeChanges:z}=y(),N=v||E,O=S||x,_=N.map(U=>{const W=I.get(U.id);return W&&(W.selected=!1),Ta(U.id,!1)}),J=O.map(U=>Ta(U.id,!1));k(_),z(J)},setMinZoom:v=>{const{panZoom:S,maxZoom:x}=y();S==null||S.setScaleExtent([v,x]),g({minZoom:v})},setMaxZoom:v=>{const{panZoom:S,minZoom:x}=y();S==null||S.setScaleExtent([x,v]),g({maxZoom:v})},setTranslateExtent:v=>{var S;(S=y().panZoom)==null||S.setTranslateExtent(v),g({translateExtent:v})},setPaneClickDistance:v=>{var S;(S=y().panZoom)==null||S.setClickDistance(v)},resetSelectedElements:()=>{const{edges:v,nodes:S,triggerNodeChanges:x,triggerEdgeChanges:E}=y(),I=S.reduce((z,N)=>N.selected?[...z,Ta(N.id,!1)]:z,[]),k=v.reduce((z,N)=>N.selected?[...z,Ta(N.id,!1)]:z,[]);x(I),E(k)},setNodeExtent:v=>{const{nodes:S,nodeLookup:x,parentLookup:E,nodeOrigin:I,elevateNodesOnSelect:k,nodeExtent:z}=y();v[0][0]===z[0][0]&&v[0][1]===z[0][1]&&v[1][0]===z[1][0]&&v[1][1]===z[1][1]||(Sy(S,x,E,{nodeOrigin:I,nodeExtent:v,elevateNodesOnSelect:k,checkEquality:!1}),g({nodeExtent:v}))},panBy:v=>{const{transform:S,width:x,height:E,panZoom:I,translateExtent:k}=y();return rI({delta:v,panZoom:I,transform:S,translateExtent:k,width:x,height:E})},cancelConnection:()=>{g({connection:{...Mx}})},updateConnection:v=>{g({connection:v})},reset:()=>g({...Hb()})}},Object.is);function xR({initialNodes:n,initialEdges:t,defaultNodes:e,defaultEdges:i,initialWidth:a,initialHeight:u,fitView:c,nodeOrigin:d,nodeExtent:h,children:g}){const[y]=et.useState(()=>bR({nodes:n,edges:t,defaultNodes:e,defaultEdges:i,width:a,height:u,fitView:c,nodeOrigin:d,nodeExtent:h}));return Q.jsx(qI,{value:y,children:Q.jsx(cM,{children:g})})}function TR({children:n,nodes:t,edges:e,defaultNodes:i,defaultEdges:a,width:u,height:c,fitView:d,nodeOrigin:h,nodeExtent:g}){return et.useContext(Jd)?Q.jsx(Q.Fragment,{children:n}):Q.jsx(xR,{initialNodes:t,initialEdges:e,defaultNodes:i,defaultEdges:a,initialWidth:u,initialHeight:c,fitView:d,nodeOrigin:h,nodeExtent:g,children:n})}const AR={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function ER({nodes:n,edges:t,defaultNodes:e,defaultEdges:i,className:a,nodeTypes:u,edgeTypes:c,onNodeClick:d,onEdgeClick:h,onInit:g,onMove:y,onMoveStart:w,onMoveEnd:v,onConnect:S,onConnectStart:x,onConnectEnd:E,onClickConnectStart:I,onClickConnectEnd:k,onNodeMouseEnter:z,onNodeMouseMove:N,onNodeMouseLeave:O,onNodeContextMenu:_,onNodeDoubleClick:J,onNodeDragStart:U,onNodeDrag:W,onNodeDragStop:F,onNodesDelete:nt,onEdgesDelete:ft,onDelete:ot,onSelectionChange:ct,onSelectionDragStart:M,onSelectionDrag:j,onSelectionDragStop:C,onSelectionContextMenu:B,onSelectionStart:H,onSelectionEnd:q,onBeforeDelete:D,connectionMode:P,connectionLineType:tt=Vs.Bezier,connectionLineStyle:rt,connectionLineComponent:ut,connectionLineContainerStyle:gt,deleteKeyCode:dt="Backspace",selectionKeyCode:mt="Shift",selectionOnDrag:pt=!1,selectionMode:Ct=_u.Full,panActivationKeyCode:Vt="Space",multiSelectionKeyCode:Ot=Td()?"Meta":"Control",zoomActivationKeyCode:bt=Td()?"Meta":"Control",snapToGrid:Yt,snapGrid:qt,onlyRenderVisibleElements:be=!1,selectNodesOnDrag:rn,nodesDraggable:Oe,nodesConnectable:tl,nodesFocusable:La,nodeOrigin:os=uT,edgesFocusable:ls,edgesReconnectable:Ws,elementsSelectable:us=!0,defaultViewport:el=QI,minZoom:ta=.5,maxZoom:Jn=2,translateExtent:Ee=Lu,preventScrolling:nr=!0,nodeExtent:Ie,defaultMarkerColor:jd="#b1b1b7",zoomOnScroll:Yd=!0,zoomOnPinch:Gd=!0,panOnScroll:_a=!1,panOnScrollSpeed:Ua=.5,panOnScrollMode:Cr=ka.Free,zoomOnDoubleClick:qa=!0,panOnDrag:ea=!0,onPaneClick:Xd,onPaneMouseEnter:Qu,onPaneMouseMove:Wu,onPaneMouseLeave:nl,onPaneScroll:na,onPaneContextMenu:Kd,paneClickDistance:rl=0,nodeClickDistance:tc=0,children:il,onReconnect:sl,onReconnectStart:ec,onReconnectEnd:Fd,onEdgeContextMenu:rr,onEdgeDoubleClick:Ne,onEdgeMouseEnter:_e,onEdgeMouseMove:cs,onEdgeMouseLeave:al,reconnectRadius:Zd=10,onNodesChange:Qd,onEdgesChange:nc,noDragClassName:ra="nodrag",noWheelClassName:ol="nowheel",noPanClassName:kr="nopan",fitView:Or,fitViewOptions:ia,connectOnClick:fs,attributionPosition:pe,proOptions:rc,defaultEdgeOptions:ic,elevateNodesOnSelect:Ir,elevateEdgesOnSelect:ds,disableKeyboardA11y:sc=!1,autoPanOnConnect:ac,autoPanOnNodeDrag:oc,autoPanSpeed:Wd,connectionRadius:Pa,isValidConnection:Ja,onError:Hn,style:ll,id:ul,nodeDragThreshold:hs,viewport:cl,onViewportChange:fl,width:th,height:lc,colorMode:je="light",debug:uc,onScroll:Ha,...$a},cc){const gs=ul||"1",eh=nM(je),Ye=et.useCallback(Va=>{Va.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),Ha==null||Ha(Va)},[Ha]);return Q.jsx("div",{"data-testid":"rf__wrapper",...$a,onScroll:Ye,style:{...ll,...AR},ref:cc,className:Se(["react-flow",a,eh]),id:ul,children:Q.jsxs(TR,{nodes:n,edges:t,width:th,height:lc,fitView:Or,nodeOrigin:os,nodeExtent:Ie,children:[Q.jsx(SR,{onInit:g,onNodeClick:d,onEdgeClick:h,onNodeMouseEnter:z,onNodeMouseMove:N,onNodeMouseLeave:O,onNodeContextMenu:_,onNodeDoubleClick:J,nodeTypes:u,edgeTypes:c,connectionLineType:tt,connectionLineStyle:rt,connectionLineComponent:ut,connectionLineContainerStyle:gt,selectionKeyCode:mt,selectionOnDrag:pt,selectionMode:Ct,deleteKeyCode:dt,multiSelectionKeyCode:Ot,panActivationKeyCode:Vt,zoomActivationKeyCode:bt,onlyRenderVisibleElements:be,defaultViewport:el,translateExtent:Ee,minZoom:ta,maxZoom:Jn,preventScrolling:nr,zoomOnScroll:Yd,zoomOnPinch:Gd,zoomOnDoubleClick:qa,panOnScroll:_a,panOnScrollSpeed:Ua,panOnScrollMode:Cr,panOnDrag:ea,onPaneClick:Xd,onPaneMouseEnter:Qu,onPaneMouseMove:Wu,onPaneMouseLeave:nl,onPaneScroll:na,onPaneContextMenu:Kd,paneClickDistance:rl,nodeClickDistance:tc,onSelectionContextMenu:B,onSelectionStart:H,onSelectionEnd:q,onReconnect:sl,onReconnectStart:ec,onReconnectEnd:Fd,onEdgeContextMenu:rr,onEdgeDoubleClick:Ne,onEdgeMouseEnter:_e,onEdgeMouseMove:cs,onEdgeMouseLeave:al,reconnectRadius:Zd,defaultMarkerColor:jd,noDragClassName:ra,noWheelClassName:ol,noPanClassName:kr,rfId:gs,disableKeyboardA11y:sc,nodeExtent:Ie,viewport:cl,onViewportChange:fl}),Q.jsx(eM,{nodes:n,edges:t,defaultNodes:e,defaultEdges:i,onConnect:S,onConnectStart:x,onConnectEnd:E,onClickConnectStart:I,onClickConnectEnd:k,nodesDraggable:Oe,nodesConnectable:tl,nodesFocusable:La,edgesFocusable:ls,edgesReconnectable:Ws,elementsSelectable:us,elevateNodesOnSelect:Ir,elevateEdgesOnSelect:ds,minZoom:ta,maxZoom:Jn,nodeExtent:Ie,onNodesChange:Qd,onEdgesChange:nc,snapToGrid:Yt,snapGrid:qt,connectionMode:P,translateExtent:Ee,connectOnClick:fs,defaultEdgeOptions:ic,fitView:Or,fitViewOptions:ia,onNodesDelete:nt,onEdgesDelete:ft,onDelete:ot,onNodeDragStart:U,onNodeDrag:W,onNodeDragStop:F,onSelectionDrag:j,onSelectionDragStart:M,onSelectionDragStop:C,onMove:y,onMoveStart:w,onMoveEnd:v,noPanClassName:kr,nodeOrigin:os,rfId:gs,autoPanOnConnect:ac,autoPanOnNodeDrag:oc,autoPanSpeed:Wd,onError:Hn,connectionRadius:Pa,isValidConnection:Ja,selectNodesOnDrag:rn,nodeDragThreshold:hs,onBeforeDelete:D,paneClickDistance:rl,debug:uc}),Q.jsx(ZI,{onSelectionChange:ct}),il,Q.jsx(YI,{proOptions:rc,position:pe}),Q.jsx(VI,{rfId:gs,disableKeyboardA11y:sc})]})})}var NR=fT(ER);function DR({dimensions:n,lineWidth:t,variant:e,className:i}){return Q.jsx("path",{strokeWidth:t,d:`M${n[0]/2} 0 V${n[1]} M0 ${n[1]/2} H${n[0]}`,className:Se(["react-flow__background-pattern",e,i])})}function CR({radius:n,className:t}){return Q.jsx("circle",{cx:n,cy:n,r:n,className:Se(["react-flow__background-pattern","dots",t])})}var Fs;(function(n){n.Lines="lines",n.Dots="dots",n.Cross="cross"})(Fs||(Fs={}));const kR={[Fs.Dots]:1,[Fs.Lines]:1,[Fs.Cross]:6},OR=n=>({transform:n.transform,patternId:`pattern-${n.rfId}`});function zT({id:n,variant:t=Fs.Dots,gap:e=20,size:i,lineWidth:a=1,offset:u=0,color:c,bgColor:d,style:h,className:g,patternClassName:y}){const w=et.useRef(null),{transform:v,patternId:S}=Ht(OR,fe),x=i||kR[t],E=t===Fs.Dots,I=t===Fs.Cross,k=Array.isArray(e)?e:[e,e],z=[k[0]*v[2]||1,k[1]*v[2]||1],N=x*v[2],O=Array.isArray(u)?u:[u,u],_=I?[N,N]:z,J=[O[0]*v[2]||1+_[0]/2,O[1]*v[2]||1+_[1]/2],U=`${S}${n||""}`;return Q.jsxs("svg",{className:Se(["react-flow__background",g]),style:{...h,...$d,"--xy-background-color-props":d,"--xy-background-pattern-color-props":c},ref:w,"data-testid":"rf__background",children:[Q.jsx("pattern",{id:U,x:v[0]%z[0],y:v[1]%z[1],width:z[0],height:z[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${J[0]},-${J[1]})`,children:E?Q.jsx(CR,{radius:N/2,className:y}):Q.jsx(DR,{dimensions:_,lineWidth:a,variant:t,className:y})}),Q.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${U})`})]})}zT.displayName="Background";const IR=et.memo(zT);function MR(){return Q.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:Q.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function RR(){return Q.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:Q.jsx("path",{d:"M0 0h32v4.2H0z"})})}function BR(){return Q.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:Q.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function zR(){return Q.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:Q.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function LR(){return Q.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:Q.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function If({children:n,className:t,...e}){return Q.jsx("button",{type:"button",className:Se(["react-flow__controls-button",t]),...e,children:n})}const _R=n=>({isInteractive:n.nodesDraggable||n.nodesConnectable||n.elementsSelectable,minZoomReached:n.transform[2]<=n.minZoom,maxZoomReached:n.transform[2]>=n.maxZoom});function LT({style:n,showZoom:t=!0,showFitView:e=!0,showInteractive:i=!0,fitViewOptions:a,onZoomIn:u,onZoomOut:c,onFitView:d,onInteractiveChange:h,className:g,children:y,position:w="bottom-left",orientation:v="vertical","aria-label":S="React Flow controls"}){const x=ie(),{isInteractive:E,minZoomReached:I,maxZoomReached:k}=Ht(_R,fe),{zoomIn:z,zoomOut:N,fitView:O}=sp(),_=()=>{z(),u==null||u()},J=()=>{N(),c==null||c()},U=()=>{O(a),d==null||d()},W=()=>{x.setState({nodesDraggable:!E,nodesConnectable:!E,elementsSelectable:!E}),h==null||h(!E)},F=v==="horizontal"?"horizontal":"vertical";return Q.jsxs(Hd,{className:Se(["react-flow__controls",F,g]),position:w,style:n,"data-testid":"rf__controls","aria-label":S,children:[t&&Q.jsxs(Q.Fragment,{children:[Q.jsx(If,{onClick:_,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:k,children:Q.jsx(MR,{})}),Q.jsx(If,{onClick:J,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:I,children:Q.jsx(RR,{})})]}),e&&Q.jsx(If,{className:"react-flow__controls-fitview",onClick:U,title:"fit view","aria-label":"fit view",children:Q.jsx(BR,{})}),i&&Q.jsx(If,{className:"react-flow__controls-interactive",onClick:W,title:"toggle interactivity","aria-label":"toggle interactivity",children:E?Q.jsx(LR,{}):Q.jsx(zR,{})}),y]})}LT.displayName="Controls";const UR=et.memo(LT);function qR({id:n,x:t,y:e,width:i,height:a,style:u,color:c,strokeColor:d,strokeWidth:h,className:g,borderRadius:y,shapeRendering:w,selected:v,onClick:S}){const{background:x,backgroundColor:E}=u||{},I=c||x||E;return Q.jsx("rect",{className:Se(["react-flow__minimap-node",{selected:v},g]),x:t,y:e,rx:y,ry:y,width:i,height:a,style:{fill:I,stroke:d,strokeWidth:h},shapeRendering:w,onClick:S?k=>S(k,n):void 0})}const PR=et.memo(qR),JR=n=>n.nodes.map(t=>t.id),Im=n=>n instanceof Function?n:()=>n;function HR({nodeStrokeColor:n,nodeColor:t,nodeClassName:e="",nodeBorderRadius:i=5,nodeStrokeWidth:a,nodeComponent:u=PR,onClick:c}){const d=Ht(JR,fe),h=Im(t),g=Im(n),y=Im(e),w=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return Q.jsx(Q.Fragment,{children:d.map(v=>Q.jsx(VR,{id:v,nodeColorFunc:h,nodeStrokeColorFunc:g,nodeClassNameFunc:y,nodeBorderRadius:i,nodeStrokeWidth:a,NodeComponent:u,onClick:c,shapeRendering:w},v))})}function $R({id:n,nodeColorFunc:t,nodeStrokeColorFunc:e,nodeClassNameFunc:i,nodeBorderRadius:a,nodeStrokeWidth:u,shapeRendering:c,NodeComponent:d,onClick:h}){const{node:g,x:y,y:w,width:v,height:S}=Ht(x=>{const E=x.nodeLookup.get(n),{x:I,y:k}=E.internals.positionAbsolute,{width:z,height:N}=as(E);return{node:E,x:I,y:k,width:z,height:N}},fe);return!g||g.hidden||!Px(g)?null:Q.jsx(d,{x:y,y:w,width:v,height:S,style:g.style,selected:!!g.selected,className:i(g),color:t(g),borderRadius:a,strokeColor:e(g),strokeWidth:u,shapeRendering:c,onClick:h,id:g.id})}const VR=et.memo($R);var jR=et.memo(HR);const YR=200,GR=150,XR=n=>!n.hidden,KR=n=>{const t={x:-n.transform[0]/n.transform[2],y:-n.transform[1]/n.transform[2],width:n.width/n.transform[2],height:n.height/n.transform[2]};return{viewBB:t,boundingRect:n.nodeLookup.size>0?qx(Fu(n.nodeLookup,{filter:XR}),t):t,rfId:n.rfId,panZoom:n.panZoom,translateExtent:n.translateExtent,flowWidth:n.width,flowHeight:n.height}},FR="react-flow__minimap-desc";function _T({style:n,className:t,nodeStrokeColor:e,nodeColor:i,nodeClassName:a="",nodeBorderRadius:u=5,nodeStrokeWidth:c,nodeComponent:d,bgColor:h,maskColor:g,maskStrokeColor:y,maskStrokeWidth:w,position:v="bottom-right",onClick:S,onNodeClick:x,pannable:E=!1,zoomable:I=!1,ariaLabel:k="React Flow mini map",inversePan:z,zoomStep:N=10,offsetScale:O=5}){const _=ie(),J=et.useRef(null),{boundingRect:U,viewBB:W,rfId:F,panZoom:nt,translateExtent:ft,flowWidth:ot,flowHeight:ct}=Ht(KR,fe),M=(n==null?void 0:n.width)??YR,j=(n==null?void 0:n.height)??GR,C=U.width/M,B=U.height/j,H=Math.max(C,B),q=H*M,D=H*j,P=O*H,tt=U.x-(q-U.width)/2-P,rt=U.y-(D-U.height)/2-P,ut=q+P*2,gt=D+P*2,dt=`${FR}-${F}`,mt=et.useRef(0),pt=et.useRef();mt.current=H,et.useEffect(()=>{if(J.current&&nt)return pt.current=fI({domNode:J.current,panZoom:nt,getTransform:()=>_.getState().transform,getViewScale:()=>mt.current}),()=>{var Ot;(Ot=pt.current)==null||Ot.destroy()}},[nt]),et.useEffect(()=>{var Ot;(Ot=pt.current)==null||Ot.update({translateExtent:ft,width:ot,height:ct,inversePan:z,pannable:E,zoomStep:N,zoomable:I})},[E,I,z,N,ft,ot,ct]);const Ct=S?Ot=>{var qt;const[bt,Yt]=((qt=pt.current)==null?void 0:qt.pointer(Ot))||[0,0];S(Ot,{x:bt,y:Yt})}:void 0,Vt=x?et.useCallback((Ot,bt)=>{const Yt=_.getState().nodeLookup.get(bt);x(Ot,Yt)},[]):void 0;return Q.jsx(Hd,{position:v,style:{...n,"--xy-minimap-background-color-props":typeof h=="string"?h:void 0,"--xy-minimap-mask-background-color-props":typeof g=="string"?g:void 0,"--xy-minimap-mask-stroke-color-props":typeof y=="string"?y:void 0,"--xy-minimap-mask-stroke-width-props":typeof w=="number"?w*H:void 0,"--xy-minimap-node-background-color-props":typeof i=="string"?i:void 0,"--xy-minimap-node-stroke-color-props":typeof e=="string"?e:void 0,"--xy-minimap-node-stroke-width-props":typeof c=="string"?c:void 0},className:Se(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:Q.jsxs("svg",{width:M,height:j,viewBox:`${tt} ${rt} ${ut} ${gt}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":dt,ref:J,onClick:Ct,children:[k&&Q.jsx("title",{id:dt,children:k}),Q.jsx(jR,{onClick:Vt,nodeColor:i,nodeStrokeColor:e,nodeBorderRadius:u,nodeClassName:a,nodeStrokeWidth:c,nodeComponent:d}),Q.jsx("path",{className:"react-flow__minimap-mask",d:`M${tt-P},${rt-P}h${ut+P*2}v${gt+P*2}h${-ut-P*2}z
        M${W.x},${W.y}h${W.width}v${W.height}h${-W.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}_T.displayName="MiniMap";const ZR=et.memo(_T);function QR({nodeId:n,position:t,variant:e=Su.Handle,className:i,style:a={},children:u,color:c,minWidth:d=10,minHeight:h=10,maxWidth:g=Number.MAX_VALUE,maxHeight:y=Number.MAX_VALUE,keepAspectRatio:w=!1,shouldResize:v,onResizeStart:S,onResize:x,onResizeEnd:E}){const I=mT(),k=typeof n=="string"?n:I,z=ie(),N=et.useRef(null),O=e===Su.Line?"right":"bottom-right",_=t??O,J=et.useRef(null);et.useEffect(()=>{if(!(!N.current||!k))return J.current||(J.current=NI({domNode:N.current,nodeId:k,getStoreItems:()=>{const{nodeLookup:nt,transform:ft,snapGrid:ot,snapToGrid:ct,nodeOrigin:M,domNode:j}=z.getState();return{nodeLookup:nt,transform:ft,snapGrid:ot,snapToGrid:ct,nodeOrigin:M,paneDomNode:j}},onChange:(nt,ft)=>{const{triggerNodeChanges:ot,nodeLookup:ct,parentLookup:M,nodeOrigin:j}=z.getState(),C=[],B={x:nt.x,y:nt.y},H=ct.get(k);if(H&&H.expandParent&&H.parentId){const q=H.origin??j,D=nt.width??H.measured.width??0,P=nt.height??H.measured.height??0,tt={id:H.id,parentId:H.parentId,rect:{width:D,height:P,...Jx({x:nt.x??H.position.x,y:nt.y??H.position.y},{width:D,height:P},H.parentId,ct,q)}},rt=ip([tt],ct,M,j);C.push(...rt),B.x=nt.x?Math.max(q[0]*D,nt.x):void 0,B.y=nt.y?Math.max(q[1]*P,nt.y):void 0}if(B.x!==void 0&&B.y!==void 0){const q={id:k,type:"position",position:{...B}};C.push(q)}if(nt.width!==void 0&&nt.height!==void 0){const q={id:k,type:"dimensions",resizing:!0,setAttributes:!0,dimensions:{width:nt.width,height:nt.height}};C.push(q)}for(const q of ft){const D={...q,type:"position"};C.push(D)}ot(C)},onEnd:()=>{const nt={id:k,type:"dimensions",resizing:!1};z.getState().triggerNodeChanges([nt])}})),J.current.update({controlPosition:_,boundaries:{minWidth:d,minHeight:h,maxWidth:g,maxHeight:y},keepAspectRatio:w,onResizeStart:S,onResize:x,onResizeEnd:E,shouldResize:v}),()=>{var nt;(nt=J.current)==null||nt.destroy()}},[_,d,h,g,y,w,S,x,E,v]);const U=_.split("-"),W=e===Su.Line?"borderColor":"backgroundColor",F=c?{...a,[W]:c}:a;return Q.jsx("div",{className:Se(["react-flow__resize-control","nodrag",...U,e,i]),ref:N,style:F,children:u})}et.memo(QR);function WR(){const{root:n,update:t,loading:e,error:i}=eC(),a=et.useCallback(c=>{t(d=>{for(const h of c)switch(h.type){case"add":d.nodes.push(h.item);break;case"replace":{const g=d.nodes.findIndex(y=>y.id===h.id);d.nodes[g]=h.item}break;case"remove":{const g=d.nodes.findIndex(y=>y.id===h.id);d.nodes.deleteByID(d.nodes[g].getID())}break;case"position":{const g=d.nodes.findIndex(y=>y.id===h.id);d.nodes[g].position=h.position}break;case"select":{const g=d.nodes.findIndex(y=>y.id===h.id);d.nodes[g].selected=h.selected}break}})},[t]),u=et.useCallback(c=>{t(d=>{for(const h of c)switch(h.type){case"add":d.edges.push(h.item);break;case"replace":{const g=d.edges.findIndex(y=>y.id===h.id);d.edges[g]=h.item}break;case"remove":{const g=d.edges.findIndex(y=>y.id===h.id);d.edges.deleteByID(d.edges[g].getID())}break;case"select":{const g=d.edges.findIndex(y=>y.id===h.id);d.edges[g].selected=h.selected}break}})},[t]);return e?Q.jsx("div",{children:"Loading..."}):i?Q.jsxs("div",{children:["Error: ",i.message]}):Q.jsx("div",{style:{position:"fixed",inset:0,height:"100vh"},children:Q.jsxs(NR,{nodes:n.nodes,edges:n.edges,onNodesChange:a,onEdgesChange:u,fitView:!0,children:[Q.jsx(IR,{gap:10,size:1,color:"silver"}),Q.jsx(UR,{orientation:"horizontal",showInteractive:!1}),Q.jsx(ZR,{})]})})}const tB=[{id:"1",type:"input",data:{label:"Multiplayer"},position:{x:250,y:25}},{id:"2",data:{label:"Graph"},position:{x:100,y:125}},{id:"3",data:{label:"React Flow"},position:{x:250,y:225},style:{borderColor:"#FF0072"}},{id:"4",type:"output",data:{label:"Yorkie"},position:{x:100,y:325},style:{borderColor:"#944DFA"}}],eB=[{id:"e1-2",source:"1",target:"2",type:"smoothstep"},{id:"e2-3",source:"2",target:"3",label:"with"},{id:"e3-4",source:"3",target:"4",label:"and",animated:!0}],nB={nodes:tB,edges:eB};ZE.createRoot(document.getElementById("root")).render(Q.jsxs(et.StrictMode,{children:[Q.jsx(ZD,{apiKey:"cedaovjuioqlk4pjqn6g",rpcAddr:"https://api.yorkie.dev",children:Q.jsx(tC,{docKey:`react-flow-${new Date().toISOString().substring(0,10).replace(/-/g,"")}`,initialRoot:nB,children:Q.jsx(WR,{})})}),","]}));
