var KN=Object.defineProperty;var YN=(n,t,e)=>t in n?KN(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var y=(n,t,e)=>YN(n,typeof t!="symbol"?t+"":t,e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function e(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(a){if(a.ep)return;a.ep=!0;const l=e(a);fetch(a.href,l)}})();function G1(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var jm={exports:{}},Uu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zS;function GN(){if(zS)return Uu;zS=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(r,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var d in a)d!=="key"&&(l[d]=a[d])}else l=a;return a=l.ref,{$$typeof:n,type:r,key:c,ref:a!==void 0?a:null,props:l}}return Uu.Fragment=t,Uu.jsx=e,Uu.jsxs=e,Uu}var LS;function FN(){return LS||(LS=1,jm.exports=GN()),jm.exports}var tt=FN(),Km={exports:{}},_u={},Ym={exports:{}},Gm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var US;function XN(){return US||(US=1,function(n){function t(I,z){var Y=I.length;I.push(z);t:for(;0<Y;){var $=Y-1>>>1,C=I[$];if(0<a(C,z))I[$]=z,I[Y]=C,Y=$;else break t}}function e(I){return I.length===0?null:I[0]}function r(I){if(I.length===0)return null;var z=I[0],Y=I.pop();if(Y!==z){I[0]=Y;t:for(var $=0,C=I.length,_=C>>>1;$<_;){var Z=2*($+1)-1,it=I[Z],lt=Z+1,yt=I[lt];if(0>a(it,Y))lt<C&&0>a(yt,it)?(I[$]=yt,I[lt]=Y,$=lt):(I[$]=it,I[Z]=Y,$=Z);else if(lt<C&&0>a(yt,Y))I[$]=yt,I[lt]=Y,$=lt;else break t}}return z}function a(I,z){var Y=I.sortIndex-z.sortIndex;return Y!==0?Y:I.id-z.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();n.unstable_now=function(){return c.now()-d}}var h=[],g=[],p=1,w=null,v=3,S=!1,A=!1,T=!1,k=!1,D=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function O(I){for(var z=e(g);z!==null;){if(z.callback===null)r(g);else if(z.startTime<=I)r(g),z.sortIndex=z.expirationTime,t(h,z);else break;z=e(g)}}function B(I){if(T=!1,O(I),!A)if(e(h)!==null)A=!0,U||(U=!0,rt());else{var z=e(g);z!==null&&K(B,z.startTime-I)}}var U=!1,J=-1,j=5,W=-1;function ft(){return k?!0:!(n.unstable_now()-W<j)}function nt(){if(k=!1,U){var I=n.unstable_now();W=I;var z=!0;try{t:{A=!1,T&&(T=!1,L(J),J=-1),S=!0;var Y=v;try{e:{for(O(I),w=e(h);w!==null&&!(w.expirationTime>I&&ft());){var $=w.callback;if(typeof $=="function"){w.callback=null,v=w.priorityLevel;var C=$(w.expirationTime<=I);if(I=n.unstable_now(),typeof C=="function"){w.callback=C,O(I),z=!0;break e}w===e(h)&&r(h),O(I)}else r(h);w=e(h)}if(w!==null)z=!0;else{var _=e(g);_!==null&&K(B,_.startTime-I),z=!1}}break t}finally{w=null,v=Y,S=!1}z=void 0}}finally{z?rt():U=!1}}}var rt;if(typeof N=="function")rt=function(){N(nt)};else if(typeof MessageChannel<"u"){var ot=new MessageChannel,M=ot.port2;ot.port1.onmessage=nt,rt=function(){M.postMessage(null)}}else rt=function(){D(nt,0)};function K(I,z){J=D(function(){I(n.unstable_now())},z)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(I){I.callback=null},n.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<I?Math.floor(1e3/I):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_next=function(I){switch(v){case 1:case 2:case 3:var z=3;break;default:z=v}var Y=v;v=z;try{return I()}finally{v=Y}},n.unstable_requestPaint=function(){k=!0},n.unstable_runWithPriority=function(I,z){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var Y=v;v=I;try{return z()}finally{v=Y}},n.unstable_scheduleCallback=function(I,z,Y){var $=n.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?$+Y:$):Y=$,I){case 1:var C=-1;break;case 2:C=250;break;case 5:C=1073741823;break;case 4:C=1e4;break;default:C=5e3}return C=Y+C,I={id:p++,callback:z,priorityLevel:I,startTime:Y,expirationTime:C,sortIndex:-1},Y>$?(I.sortIndex=Y,t(g,I),e(h)===null&&I===e(g)&&(T?(L(J),J=-1):T=!0,K(B,Y-$))):(I.sortIndex=C,t(h,I),A||S||(A=!0,U||(U=!0,rt()))),I},n.unstable_shouldYield=ft,n.unstable_wrapCallback=function(I){var z=v;return function(){var Y=v;v=z;try{return I.apply(this,arguments)}finally{v=Y}}}}(Gm)),Gm}var _S;function ZN(){return _S||(_S=1,Ym.exports=XN()),Ym.exports}var Fm={exports:{}},Bt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PS;function QN(){if(PS)return Bt;PS=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),w=Symbol.iterator;function v(C){return C===null||typeof C!="object"?null:(C=w&&C[w]||C["@@iterator"],typeof C=="function"?C:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,T={};function k(C,_,Z){this.props=C,this.context=_,this.refs=T,this.updater=Z||S}k.prototype.isReactComponent={},k.prototype.setState=function(C,_){if(typeof C!="object"&&typeof C!="function"&&C!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,C,_,"setState")},k.prototype.forceUpdate=function(C){this.updater.enqueueForceUpdate(this,C,"forceUpdate")};function D(){}D.prototype=k.prototype;function L(C,_,Z){this.props=C,this.context=_,this.refs=T,this.updater=Z||S}var N=L.prototype=new D;N.constructor=L,A(N,k.prototype),N.isPureReactComponent=!0;var O=Array.isArray,B={H:null,A:null,T:null,S:null,V:null},U=Object.prototype.hasOwnProperty;function J(C,_,Z,it,lt,yt){return Z=yt.ref,{$$typeof:n,type:C,key:_,ref:Z!==void 0?Z:null,props:yt}}function j(C,_){return J(C.type,_,void 0,void 0,void 0,C.props)}function W(C){return typeof C=="object"&&C!==null&&C.$$typeof===n}function ft(C){var _={"=":"=0",":":"=2"};return"$"+C.replace(/[=:]/g,function(Z){return _[Z]})}var nt=/\/+/g;function rt(C,_){return typeof C=="object"&&C!==null&&C.key!=null?ft(""+C.key):_.toString(36)}function ot(){}function M(C){switch(C.status){case"fulfilled":return C.value;case"rejected":throw C.reason;default:switch(typeof C.status=="string"?C.then(ot,ot):(C.status="pending",C.then(function(_){C.status==="pending"&&(C.status="fulfilled",C.value=_)},function(_){C.status==="pending"&&(C.status="rejected",C.reason=_)})),C.status){case"fulfilled":return C.value;case"rejected":throw C.reason}}throw C}function K(C,_,Z,it,lt){var yt=typeof C;(yt==="undefined"||yt==="boolean")&&(C=null);var ht=!1;if(C===null)ht=!0;else switch(yt){case"bigint":case"string":case"number":ht=!0;break;case"object":switch(C.$$typeof){case n:case t:ht=!0;break;case p:return ht=C._init,K(ht(C._payload),_,Z,it,lt)}}if(ht)return lt=lt(C),ht=it===""?"."+rt(C,0):it,O(lt)?(Z="",ht!=null&&(Z=ht.replace(nt,"$&/")+"/"),K(lt,_,Z,"",function(bt){return bt})):lt!=null&&(W(lt)&&(lt=j(lt,Z+(lt.key==null||C&&C.key===lt.key?"":(""+lt.key).replace(nt,"$&/")+"/")+ht)),_.push(lt)),1;ht=0;var vt=it===""?".":it+":";if(O(C))for(var mt=0;mt<C.length;mt++)it=C[mt],yt=vt+rt(it,mt),ht+=K(it,_,Z,yt,lt);else if(mt=v(C),typeof mt=="function")for(C=mt.call(C),mt=0;!(it=C.next()).done;)it=it.value,yt=vt+rt(it,mt++),ht+=K(it,_,Z,yt,lt);else if(yt==="object"){if(typeof C.then=="function")return K(M(C),_,Z,it,lt);throw _=String(C),Error("Objects are not valid as a React child (found: "+(_==="[object Object]"?"object with keys {"+Object.keys(C).join(", ")+"}":_)+"). If you meant to render a collection of children, use an array instead.")}return ht}function I(C,_,Z){if(C==null)return C;var it=[],lt=0;return K(C,it,"","",function(yt){return _.call(Z,yt,lt++)}),it}function z(C){if(C._status===-1){var _=C._result;_=_(),_.then(function(Z){(C._status===0||C._status===-1)&&(C._status=1,C._result=Z)},function(Z){(C._status===0||C._status===-1)&&(C._status=2,C._result=Z)}),C._status===-1&&(C._status=0,C._result=_)}if(C._status===1)return C._result.default;throw C._result}var Y=typeof reportError=="function"?reportError:function(C){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var _=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof C=="object"&&C!==null&&typeof C.message=="string"?String(C.message):String(C),error:C});if(!window.dispatchEvent(_))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",C);return}console.error(C)};function $(){}return Bt.Children={map:I,forEach:function(C,_,Z){I(C,function(){_.apply(this,arguments)},Z)},count:function(C){var _=0;return I(C,function(){_++}),_},toArray:function(C){return I(C,function(_){return _})||[]},only:function(C){if(!W(C))throw Error("React.Children.only expected to receive a single React element child.");return C}},Bt.Component=k,Bt.Fragment=e,Bt.Profiler=a,Bt.PureComponent=L,Bt.StrictMode=r,Bt.Suspense=h,Bt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=B,Bt.__COMPILER_RUNTIME={__proto__:null,c:function(C){return B.H.useMemoCache(C)}},Bt.cache=function(C){return function(){return C.apply(null,arguments)}},Bt.cloneElement=function(C,_,Z){if(C==null)throw Error("The argument must be a React element, but you passed "+C+".");var it=A({},C.props),lt=C.key,yt=void 0;if(_!=null)for(ht in _.ref!==void 0&&(yt=void 0),_.key!==void 0&&(lt=""+_.key),_)!U.call(_,ht)||ht==="key"||ht==="__self"||ht==="__source"||ht==="ref"&&_.ref===void 0||(it[ht]=_[ht]);var ht=arguments.length-2;if(ht===1)it.children=Z;else if(1<ht){for(var vt=Array(ht),mt=0;mt<ht;mt++)vt[mt]=arguments[mt+2];it.children=vt}return J(C.type,lt,void 0,void 0,yt,it)},Bt.createContext=function(C){return C={$$typeof:c,_currentValue:C,_currentValue2:C,_threadCount:0,Provider:null,Consumer:null},C.Provider=C,C.Consumer={$$typeof:l,_context:C},C},Bt.createElement=function(C,_,Z){var it,lt={},yt=null;if(_!=null)for(it in _.key!==void 0&&(yt=""+_.key),_)U.call(_,it)&&it!=="key"&&it!=="__self"&&it!=="__source"&&(lt[it]=_[it]);var ht=arguments.length-2;if(ht===1)lt.children=Z;else if(1<ht){for(var vt=Array(ht),mt=0;mt<ht;mt++)vt[mt]=arguments[mt+2];lt.children=vt}if(C&&C.defaultProps)for(it in ht=C.defaultProps,ht)lt[it]===void 0&&(lt[it]=ht[it]);return J(C,yt,void 0,void 0,null,lt)},Bt.createRef=function(){return{current:null}},Bt.forwardRef=function(C){return{$$typeof:d,render:C}},Bt.isValidElement=W,Bt.lazy=function(C){return{$$typeof:p,_payload:{_status:-1,_result:C},_init:z}},Bt.memo=function(C,_){return{$$typeof:g,type:C,compare:_===void 0?null:_}},Bt.startTransition=function(C){var _=B.T,Z={};B.T=Z;try{var it=C(),lt=B.S;lt!==null&&lt(Z,it),typeof it=="object"&&it!==null&&typeof it.then=="function"&&it.then($,Y)}catch(yt){Y(yt)}finally{B.T=_}},Bt.unstable_useCacheRefresh=function(){return B.H.useCacheRefresh()},Bt.use=function(C){return B.H.use(C)},Bt.useActionState=function(C,_,Z){return B.H.useActionState(C,_,Z)},Bt.useCallback=function(C,_){return B.H.useCallback(C,_)},Bt.useContext=function(C){return B.H.useContext(C)},Bt.useDebugValue=function(){},Bt.useDeferredValue=function(C,_){return B.H.useDeferredValue(C,_)},Bt.useEffect=function(C,_,Z){var it=B.H;if(typeof Z=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return it.useEffect(C,_)},Bt.useId=function(){return B.H.useId()},Bt.useImperativeHandle=function(C,_,Z){return B.H.useImperativeHandle(C,_,Z)},Bt.useInsertionEffect=function(C,_){return B.H.useInsertionEffect(C,_)},Bt.useLayoutEffect=function(C,_){return B.H.useLayoutEffect(C,_)},Bt.useMemo=function(C,_){return B.H.useMemo(C,_)},Bt.useOptimistic=function(C,_){return B.H.useOptimistic(C,_)},Bt.useReducer=function(C,_,Z){return B.H.useReducer(C,_,Z)},Bt.useRef=function(C){return B.H.useRef(C)},Bt.useState=function(C){return B.H.useState(C)},Bt.useSyncExternalStore=function(C,_,Z){return B.H.useSyncExternalStore(C,_,Z)},Bt.useTransition=function(){return B.H.useTransition()},Bt.version="19.1.0",Bt}var qS;function xc(){return qS||(qS=1,Fm.exports=QN()),Fm.exports}var Xm={exports:{}},He={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JS;function WN(){if(JS)return He;JS=1;var n=xc();function t(h){var g="https://react.dev/errors/"+h;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)g+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+h+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var r={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(h,g,p){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:w==null?null:""+w,children:h,containerInfo:g,implementation:p}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(h,g){if(h==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return He.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,He.createPortal=function(h,g){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(t(299));return l(h,g,null,p)},He.flushSync=function(h){var g=c.T,p=r.p;try{if(c.T=null,r.p=2,h)return h()}finally{c.T=g,r.p=p,r.d.f()}},He.preconnect=function(h,g){typeof h=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,r.d.C(h,g))},He.prefetchDNS=function(h){typeof h=="string"&&r.d.D(h)},He.preinit=function(h,g){if(typeof h=="string"&&g&&typeof g.as=="string"){var p=g.as,w=d(p,g.crossOrigin),v=typeof g.integrity=="string"?g.integrity:void 0,S=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;p==="style"?r.d.S(h,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:w,integrity:v,fetchPriority:S}):p==="script"&&r.d.X(h,{crossOrigin:w,integrity:v,fetchPriority:S,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},He.preinitModule=function(h,g){if(typeof h=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var p=d(g.as,g.crossOrigin);r.d.M(h,{crossOrigin:p,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&r.d.M(h)},He.preload=function(h,g){if(typeof h=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var p=g.as,w=d(p,g.crossOrigin);r.d.L(h,p,{crossOrigin:w,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},He.preloadModule=function(h,g){if(typeof h=="string")if(g){var p=d(g.as,g.crossOrigin);r.d.m(h,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:p,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else r.d.m(h)},He.requestFormReset=function(h){r.d.r(h)},He.unstable_batchedUpdates=function(h,g){return h(g)},He.useFormState=function(h,g,p){return c.H.useFormState(h,g,p)},He.useFormStatus=function(){return c.H.useHostTransitionStatus()},He.version="19.1.0",He}var $S;function F1(){if($S)return Xm.exports;$S=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),Xm.exports=WN(),Xm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HS;function t2(){if(HS)return _u;HS=1;var n=ZN(),t=xc(),e=F1();function r(i){var s="https://react.dev/errors/"+i;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+i+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var s=i,o=i;if(i.alternate)for(;s.return;)s=s.return;else{i=s;do s=i,(s.flags&4098)!==0&&(o=s.return),i=s.return;while(i)}return s.tag===3?o:null}function c(i){if(i.tag===13){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function d(i){if(l(i)!==i)throw Error(r(188))}function h(i){var s=i.alternate;if(!s){if(s=l(i),s===null)throw Error(r(188));return s!==i?null:i}for(var o=i,u=s;;){var f=o.return;if(f===null)break;var m=f.alternate;if(m===null){if(u=f.return,u!==null){o=u;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===o)return d(f),i;if(m===u)return d(f),s;m=m.sibling}throw Error(r(188))}if(o.return!==u.return)o=f,u=m;else{for(var b=!1,E=f.child;E;){if(E===o){b=!0,o=f,u=m;break}if(E===u){b=!0,u=f,o=m;break}E=E.sibling}if(!b){for(E=m.child;E;){if(E===o){b=!0,o=m,u=f;break}if(E===u){b=!0,u=m,o=f;break}E=E.sibling}if(!b)throw Error(r(189))}}if(o.alternate!==u)throw Error(r(190))}if(o.tag!==3)throw Error(r(188));return o.stateNode.current===o?i:s}function g(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i;for(i=i.child;i!==null;){if(s=g(i),s!==null)return s;i=i.sibling}return null}var p=Object.assign,w=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),D=Symbol.for("react.provider"),L=Symbol.for("react.consumer"),N=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),B=Symbol.for("react.suspense"),U=Symbol.for("react.suspense_list"),J=Symbol.for("react.memo"),j=Symbol.for("react.lazy"),W=Symbol.for("react.activity"),ft=Symbol.for("react.memo_cache_sentinel"),nt=Symbol.iterator;function rt(i){return i===null||typeof i!="object"?null:(i=nt&&i[nt]||i["@@iterator"],typeof i=="function"?i:null)}var ot=Symbol.for("react.client.reference");function M(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===ot?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case A:return"Fragment";case k:return"Profiler";case T:return"StrictMode";case B:return"Suspense";case U:return"SuspenseList";case W:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case S:return"Portal";case N:return(i.displayName||"Context")+".Provider";case L:return(i._context.displayName||"Context")+".Consumer";case O:var s=i.render;return i=i.displayName,i||(i=s.displayName||s.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case J:return s=i.displayName||null,s!==null?s:M(i.type)||"Memo";case j:s=i._payload,i=i._init;try{return M(i(s))}catch{}}return null}var K=Array.isArray,I=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,z=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y={pending:!1,data:null,method:null,action:null},$=[],C=-1;function _(i){return{current:i}}function Z(i){0>C||(i.current=$[C],$[C]=null,C--)}function it(i,s){C++,$[C]=i.current,i.current=s}var lt=_(null),yt=_(null),ht=_(null),vt=_(null);function mt(i,s){switch(it(ht,s),it(yt,i),it(lt,null),s.nodeType){case 9:case 11:i=(i=s.documentElement)&&(i=i.namespaceURI)?uS(i):0;break;default:if(i=s.tagName,s=s.namespaceURI)s=uS(s),i=cS(s,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}Z(lt),it(lt,i)}function bt(){Z(lt),Z(yt),Z(ht)}function Jt(i){i.memoizedState!==null&&it(vt,i);var s=lt.current,o=cS(s,i.type);s!==o&&(it(yt,i),it(lt,o))}function Rt(i){yt.current===i&&(Z(lt),Z(yt)),vt.current===i&&(Z(vt),Mu._currentValue=Y)}var Nt=Object.prototype.hasOwnProperty,Ot=n.unstable_scheduleCallback,Ct=n.unstable_cancelCallback,Zt=n.unstable_shouldYield,ue=n.unstable_requestPaint,be=n.unstable_now,Us=n.unstable_getCurrentPriorityLevel,Ea=n.unstable_ImmediatePriority,Na=n.unstable_UserBlockingPriority,Mr=n.unstable_NormalPriority,ka=n.unstable_LowPriority,_s=n.unstable_IdlePriority,Ml=n.log,fo=n.unstable_setDisableYieldValue,Sn=null,ke=null;function Vn(i){if(typeof Ml=="function"&&fo(i),ke&&typeof ke.setStrictMode=="function")try{ke.setStrictMode(Sn,i)}catch{}}var Ye=Math.clz32?Math.clz32:Rh,Rl=Math.log,Mh=Math.LN2;function Rh(i){return i>>>=0,i===0?32:31-(Rl(i)/Mh|0)|0}var ho=256,go=4194304;function Rr(i){var s=i&42;if(s!==0)return s;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function mo(i,s,o){var u=i.pendingLanes;if(u===0)return 0;var f=0,m=i.suspendedLanes,b=i.pingedLanes;i=i.warmLanes;var E=u&134217727;return E!==0?(u=E&~m,u!==0?f=Rr(u):(b&=E,b!==0?f=Rr(b):o||(o=E&~i,o!==0&&(f=Rr(o))))):(E=u&~m,E!==0?f=Rr(E):b!==0?f=Rr(b):o||(o=u&~i,o!==0&&(f=Rr(o)))),f===0?0:s!==0&&s!==f&&(s&m)===0&&(m=f&-f,o=s&-s,m>=o||m===32&&(o&4194048)!==0)?s:f}function Ca(i,s){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&s)===0}function Bh(i,s){switch(i){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Mc(){var i=ho;return ho<<=1,(ho&4194048)===0&&(ho=256),i}function Rc(){var i=go;return go<<=1,(go&62914560)===0&&(go=4194304),i}function Bl(i){for(var s=[],o=0;31>o;o++)s.push(i);return s}function Da(i,s){i.pendingLanes|=s,s!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function zh(i,s,o,u,f,m){var b=i.pendingLanes;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=o,i.entangledLanes&=o,i.errorRecoveryDisabledLanes&=o,i.shellSuspendCounter=0;var E=i.entanglements,R=i.expirationTimes,F=i.hiddenUpdates;for(o=b&~o;0<o;){var at=31-Ye(o),ct=1<<at;E[at]=0,R[at]=-1;var X=F[at];if(X!==null)for(F[at]=null,at=0;at<X.length;at++){var Q=X[at];Q!==null&&(Q.lane&=-536870913)}o&=~ct}u!==0&&Bc(i,u,0),m!==0&&f===0&&i.tag!==0&&(i.suspendedLanes|=m&~(b&~s))}function Bc(i,s,o){i.pendingLanes|=s,i.suspendedLanes&=~s;var u=31-Ye(s);i.entangledLanes|=s,i.entanglements[u]=i.entanglements[u]|1073741824|o&4194090}function zl(i,s){var o=i.entangledLanes|=s;for(i=i.entanglements;o;){var u=31-Ye(o),f=1<<u;f&s|i[u]&s&&(i[u]|=s),o&=~f}}function Ll(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Ul(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function zc(){var i=z.p;return i!==0?i:(i=window.event,i===void 0?32:DS(i.type))}function Lh(i,s){var o=z.p;try{return z.p=i,s()}finally{z.p=o}}var or=Math.random().toString(36).slice(2),Ie="__reactFiber$"+or,Je="__reactProps$"+or,Ps="__reactContainer$"+or,_l="__reactEvents$"+or,Uh="__reactListeners$"+or,_h="__reactHandles$"+or,Lc="__reactResources$"+or,Ia="__reactMarker$"+or;function Pl(i){delete i[Ie],delete i[Je],delete i[_l],delete i[Uh],delete i[_h]}function qs(i){var s=i[Ie];if(s)return s;for(var o=i.parentNode;o;){if(s=o[Ps]||o[Ie]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(i=gS(i);i!==null;){if(o=i[Ie])return o;i=gS(i)}return s}i=o,o=i.parentNode}return null}function Br(i){if(i=i[Ie]||i[Ps]){var s=i.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return i}return null}function Js(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i.stateNode;throw Error(r(33))}function zr(i){var s=i[Lc];return s||(s=i[Lc]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function xe(i){i[Ia]=!0}var Uc=new Set,_c={};function Lr(i,s){$s(i,s),$s(i+"Capture",s)}function $s(i,s){for(_c[i]=s,i=0;i<s.length;i++)Uc.add(s[i])}var Ph=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ql={},Pc={};function qh(i){return Nt.call(Pc,i)?!0:Nt.call(ql,i)?!1:Ph.test(i)?Pc[i]=!0:(ql[i]=!0,!1)}function yo(i,s,o){if(qh(s))if(o===null)i.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":i.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){i.removeAttribute(s);return}}i.setAttribute(s,""+o)}}function po(i,s,o){if(o===null)i.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(s);return}i.setAttribute(s,""+o)}}function jn(i,s,o,u){if(u===null)i.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(o);return}i.setAttributeNS(s,o,""+u)}}var Jl,qc;function Ur(i){if(Jl===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);Jl=s&&s[1]||"",qc=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Jl+i+qc}var $l=!1;function Hl(i,s){if(!i||$l)return"";$l=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var ct=function(){throw Error()};if(Object.defineProperty(ct.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ct,[])}catch(Q){var X=Q}Reflect.construct(i,[],ct)}else{try{ct.call()}catch(Q){X=Q}i.call(ct.prototype)}}else{try{throw Error()}catch(Q){X=Q}(ct=i())&&typeof ct.catch=="function"&&ct.catch(function(){})}}catch(Q){if(Q&&X&&typeof Q.stack=="string")return[Q.stack,X.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=u.DetermineComponentFrameRoot(),b=m[0],E=m[1];if(b&&E){var R=b.split(`
`),F=E.split(`
`);for(f=u=0;u<R.length&&!R[u].includes("DetermineComponentFrameRoot");)u++;for(;f<F.length&&!F[f].includes("DetermineComponentFrameRoot");)f++;if(u===R.length||f===F.length)for(u=R.length-1,f=F.length-1;1<=u&&0<=f&&R[u]!==F[f];)f--;for(;1<=u&&0<=f;u--,f--)if(R[u]!==F[f]){if(u!==1||f!==1)do if(u--,f--,0>f||R[u]!==F[f]){var at=`
`+R[u].replace(" at new "," at ");return i.displayName&&at.includes("<anonymous>")&&(at=at.replace("<anonymous>",i.displayName)),at}while(1<=u&&0<=f);break}}}finally{$l=!1,Error.prepareStackTrace=o}return(o=i?i.displayName||i.name:"")?Ur(o):""}function Jh(i){switch(i.tag){case 26:case 27:case 5:return Ur(i.type);case 16:return Ur("Lazy");case 13:return Ur("Suspense");case 19:return Ur("SuspenseList");case 0:case 15:return Hl(i.type,!1);case 11:return Hl(i.type.render,!1);case 1:return Hl(i.type,!0);case 31:return Ur("Activity");default:return""}}function Jc(i){try{var s="";do s+=Jh(i),i=i.return;while(i);return s}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function Fe(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function $c(i){var s=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function $h(i){var s=$c(i)?"checked":"value",o=Object.getOwnPropertyDescriptor(i.constructor.prototype,s),u=""+i[s];if(!i.hasOwnProperty(s)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var f=o.get,m=o.set;return Object.defineProperty(i,s,{configurable:!0,get:function(){return f.call(this)},set:function(b){u=""+b,m.call(this,b)}}),Object.defineProperty(i,s,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(b){u=""+b},stopTracking:function(){i._valueTracker=null,delete i[s]}}}}function vo(i){i._valueTracker||(i._valueTracker=$h(i))}function Oa(i){if(!i)return!1;var s=i._valueTracker;if(!s)return!0;var o=s.getValue(),u="";return i&&(u=$c(i)?i.checked?"true":"false":i.value),i=u,i!==o?(s.setValue(i),!0):!1}function wo(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Hh=/[\n"\\]/g;function Xe(i){return i.replace(Hh,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Ma(i,s,o,u,f,m,b,E){i.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?i.type=b:i.removeAttribute("type"),s!=null?b==="number"?(s===0&&i.value===""||i.value!=s)&&(i.value=""+Fe(s)):i.value!==""+Fe(s)&&(i.value=""+Fe(s)):b!=="submit"&&b!=="reset"||i.removeAttribute("value"),s!=null?Vl(i,b,Fe(s)):o!=null?Vl(i,b,Fe(o)):u!=null&&i.removeAttribute("value"),f==null&&m!=null&&(i.defaultChecked=!!m),f!=null&&(i.checked=f&&typeof f!="function"&&typeof f!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?i.name=""+Fe(E):i.removeAttribute("name")}function Hc(i,s,o,u,f,m,b,E){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(i.type=m),s!=null||o!=null){if(!(m!=="submit"&&m!=="reset"||s!=null))return;o=o!=null?""+Fe(o):"",s=s!=null?""+Fe(s):o,E||s===i.value||(i.value=s),i.defaultValue=s}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,i.checked=E?i.checked:!!u,i.defaultChecked=!!u,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(i.name=b)}function Vl(i,s,o){s==="number"&&wo(i.ownerDocument)===i||i.defaultValue===""+o||(i.defaultValue=""+o)}function _r(i,s,o,u){if(i=i.options,s){s={};for(var f=0;f<o.length;f++)s["$"+o[f]]=!0;for(o=0;o<i.length;o++)f=s.hasOwnProperty("$"+i[o].value),i[o].selected!==f&&(i[o].selected=f),f&&u&&(i[o].defaultSelected=!0)}else{for(o=""+Fe(o),s=null,f=0;f<i.length;f++){if(i[f].value===o){i[f].selected=!0,u&&(i[f].defaultSelected=!0);return}s!==null||i[f].disabled||(s=i[f])}s!==null&&(s.selected=!0)}}function o0(i,s,o){if(s!=null&&(s=""+Fe(s),s!==i.value&&(i.value=s),o==null)){i.defaultValue!==s&&(i.defaultValue=s);return}i.defaultValue=o!=null?""+Fe(o):""}function l0(i,s,o,u){if(s==null){if(u!=null){if(o!=null)throw Error(r(92));if(K(u)){if(1<u.length)throw Error(r(93));u=u[0]}o=u}o==null&&(o=""),s=o}o=Fe(s),i.defaultValue=o,u=i.textContent,u===o&&u!==""&&u!==null&&(i.value=u)}function So(i,s){if(s){var o=i.firstChild;if(o&&o===i.lastChild&&o.nodeType===3){o.nodeValue=s;return}}i.textContent=s}var HA=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function u0(i,s,o){var u=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?i.setProperty(s,""):s==="float"?i.cssFloat="":i[s]="":u?i.setProperty(s,o):typeof o!="number"||o===0||HA.has(s)?s==="float"?i.cssFloat=o:i[s]=(""+o).trim():i[s]=o+"px"}function c0(i,s,o){if(s!=null&&typeof s!="object")throw Error(r(62));if(i=i.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?i.setProperty(u,""):u==="float"?i.cssFloat="":i[u]="");for(var f in s)u=s[f],s.hasOwnProperty(f)&&o[f]!==u&&u0(i,f,u)}else for(var m in s)s.hasOwnProperty(m)&&u0(i,m,s[m])}function Vh(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var VA=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),jA=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Vc(i){return jA.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var jh=null;function Kh(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var bo=null,xo=null;function f0(i){var s=Br(i);if(s&&(i=s.stateNode)){var o=i[Je]||null;t:switch(i=s.stateNode,s.type){case"input":if(Ma(i,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=i;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Xe(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var u=o[s];if(u!==i&&u.form===i.form){var f=u[Je]||null;if(!f)throw Error(r(90));Ma(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(s=0;s<o.length;s++)u=o[s],u.form===i.form&&Oa(u)}break t;case"textarea":o0(i,o.value,o.defaultValue);break t;case"select":s=o.value,s!=null&&_r(i,!!o.multiple,s,!1)}}}var Yh=!1;function d0(i,s,o){if(Yh)return i(s,o);Yh=!0;try{var u=i(s);return u}finally{if(Yh=!1,(bo!==null||xo!==null)&&(If(),bo&&(s=bo,i=xo,xo=bo=null,f0(s),i)))for(s=0;s<i.length;s++)f0(i[s])}}function jl(i,s){var o=i.stateNode;if(o===null)return null;var u=o[Je]||null;if(u===null)return null;o=u[s];t:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(i=i.type,u=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!u;break t;default:i=!1}if(i)return null;if(o&&typeof o!="function")throw Error(r(231,s,typeof o));return o}var Pr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Gh=!1;if(Pr)try{var Kl={};Object.defineProperty(Kl,"passive",{get:function(){Gh=!0}}),window.addEventListener("test",Kl,Kl),window.removeEventListener("test",Kl,Kl)}catch{Gh=!1}var Hs=null,Fh=null,jc=null;function h0(){if(jc)return jc;var i,s=Fh,o=s.length,u,f="value"in Hs?Hs.value:Hs.textContent,m=f.length;for(i=0;i<o&&s[i]===f[i];i++);var b=o-i;for(u=1;u<=b&&s[o-u]===f[m-u];u++);return jc=f.slice(i,1<u?1-u:void 0)}function Kc(i){var s=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&s===13&&(i=13)):i=s,i===10&&(i=13),32<=i||i===13?i:0}function Yc(){return!0}function g0(){return!1}function Ze(i){function s(o,u,f,m,b){this._reactName=o,this._targetInst=f,this.type=u,this.nativeEvent=m,this.target=b,this.currentTarget=null;for(var E in i)i.hasOwnProperty(E)&&(o=i[E],this[E]=o?o(m):m[E]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Yc:g0,this.isPropagationStopped=g0,this}return p(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Yc)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Yc)},persist:function(){},isPersistent:Yc}),s}var Ra={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Gc=Ze(Ra),Yl=p({},Ra,{view:0,detail:0}),KA=Ze(Yl),Xh,Zh,Gl,Fc=p({},Yl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wh,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Gl&&(Gl&&i.type==="mousemove"?(Xh=i.screenX-Gl.screenX,Zh=i.screenY-Gl.screenY):Zh=Xh=0,Gl=i),Xh)},movementY:function(i){return"movementY"in i?i.movementY:Zh}}),m0=Ze(Fc),YA=p({},Fc,{dataTransfer:0}),GA=Ze(YA),FA=p({},Yl,{relatedTarget:0}),Qh=Ze(FA),XA=p({},Ra,{animationName:0,elapsedTime:0,pseudoElement:0}),ZA=Ze(XA),QA=p({},Ra,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),WA=Ze(QA),tE=p({},Ra,{data:0}),y0=Ze(tE),eE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function iE(i){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(i):(i=rE[i])?!!s[i]:!1}function Wh(){return iE}var sE=p({},Yl,{key:function(i){if(i.key){var s=eE[i.key]||i.key;if(s!=="Unidentified")return s}return i.type==="keypress"?(i=Kc(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?nE[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wh,charCode:function(i){return i.type==="keypress"?Kc(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Kc(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),aE=Ze(sE),oE=p({},Fc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),p0=Ze(oE),lE=p({},Yl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wh}),uE=Ze(lE),cE=p({},Ra,{propertyName:0,elapsedTime:0,pseudoElement:0}),fE=Ze(cE),dE=p({},Fc,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),hE=Ze(dE),gE=p({},Ra,{newState:0,oldState:0}),mE=Ze(gE),yE=[9,13,27,32],tg=Pr&&"CompositionEvent"in window,Fl=null;Pr&&"documentMode"in document&&(Fl=document.documentMode);var pE=Pr&&"TextEvent"in window&&!Fl,v0=Pr&&(!tg||Fl&&8<Fl&&11>=Fl),w0=" ",S0=!1;function b0(i,s){switch(i){case"keyup":return yE.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function x0(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var To=!1;function vE(i,s){switch(i){case"compositionend":return x0(s);case"keypress":return s.which!==32?null:(S0=!0,w0);case"textInput":return i=s.data,i===w0&&S0?null:i;default:return null}}function wE(i,s){if(To)return i==="compositionend"||!tg&&b0(i,s)?(i=h0(),jc=Fh=Hs=null,To=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return v0&&s.locale!=="ko"?null:s.data;default:return null}}var SE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function T0(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s==="input"?!!SE[i.type]:s==="textarea"}function A0(i,s,o,u){bo?xo?xo.push(u):xo=[u]:bo=u,s=Lf(s,"onChange"),0<s.length&&(o=new Gc("onChange","change",null,o,u),i.push({event:o,listeners:s}))}var Xl=null,Zl=null;function bE(i){iS(i,0)}function Xc(i){var s=Js(i);if(Oa(s))return i}function E0(i,s){if(i==="change")return s}var N0=!1;if(Pr){var eg;if(Pr){var ng="oninput"in document;if(!ng){var k0=document.createElement("div");k0.setAttribute("oninput","return;"),ng=typeof k0.oninput=="function"}eg=ng}else eg=!1;N0=eg&&(!document.documentMode||9<document.documentMode)}function C0(){Xl&&(Xl.detachEvent("onpropertychange",D0),Zl=Xl=null)}function D0(i){if(i.propertyName==="value"&&Xc(Zl)){var s=[];A0(s,Zl,i,Kh(i)),d0(bE,s)}}function xE(i,s,o){i==="focusin"?(C0(),Xl=s,Zl=o,Xl.attachEvent("onpropertychange",D0)):i==="focusout"&&C0()}function TE(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Xc(Zl)}function AE(i,s){if(i==="click")return Xc(s)}function EE(i,s){if(i==="input"||i==="change")return Xc(s)}function NE(i,s){return i===s&&(i!==0||1/i===1/s)||i!==i&&s!==s}var on=typeof Object.is=="function"?Object.is:NE;function Ql(i,s){if(on(i,s))return!0;if(typeof i!="object"||i===null||typeof s!="object"||s===null)return!1;var o=Object.keys(i),u=Object.keys(s);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var f=o[u];if(!Nt.call(s,f)||!on(i[f],s[f]))return!1}return!0}function I0(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function O0(i,s){var o=I0(i);i=0;for(var u;o;){if(o.nodeType===3){if(u=i+o.textContent.length,i<=s&&u>=s)return{node:o,offset:s-i};i=u}t:{for(;o;){if(o.nextSibling){o=o.nextSibling;break t}o=o.parentNode}o=void 0}o=I0(o)}}function M0(i,s){return i&&s?i===s?!0:i&&i.nodeType===3?!1:s&&s.nodeType===3?M0(i,s.parentNode):"contains"in i?i.contains(s):i.compareDocumentPosition?!!(i.compareDocumentPosition(s)&16):!1:!1}function R0(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var s=wo(i.document);s instanceof i.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)i=s.contentWindow;else break;s=wo(i.document)}return s}function rg(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s&&(s==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||s==="textarea"||i.contentEditable==="true")}var kE=Pr&&"documentMode"in document&&11>=document.documentMode,Ao=null,ig=null,Wl=null,sg=!1;function B0(i,s,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;sg||Ao==null||Ao!==wo(u)||(u=Ao,"selectionStart"in u&&rg(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Wl&&Ql(Wl,u)||(Wl=u,u=Lf(ig,"onSelect"),0<u.length&&(s=new Gc("onSelect","select",null,s,o),i.push({event:s,listeners:u}),s.target=Ao)))}function Ba(i,s){var o={};return o[i.toLowerCase()]=s.toLowerCase(),o["Webkit"+i]="webkit"+s,o["Moz"+i]="moz"+s,o}var Eo={animationend:Ba("Animation","AnimationEnd"),animationiteration:Ba("Animation","AnimationIteration"),animationstart:Ba("Animation","AnimationStart"),transitionrun:Ba("Transition","TransitionRun"),transitionstart:Ba("Transition","TransitionStart"),transitioncancel:Ba("Transition","TransitionCancel"),transitionend:Ba("Transition","TransitionEnd")},ag={},z0={};Pr&&(z0=document.createElement("div").style,"AnimationEvent"in window||(delete Eo.animationend.animation,delete Eo.animationiteration.animation,delete Eo.animationstart.animation),"TransitionEvent"in window||delete Eo.transitionend.transition);function za(i){if(ag[i])return ag[i];if(!Eo[i])return i;var s=Eo[i],o;for(o in s)if(s.hasOwnProperty(o)&&o in z0)return ag[i]=s[o];return i}var L0=za("animationend"),U0=za("animationiteration"),_0=za("animationstart"),CE=za("transitionrun"),DE=za("transitionstart"),IE=za("transitioncancel"),P0=za("transitionend"),q0=new Map,og="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");og.push("scrollEnd");function Kn(i,s){q0.set(i,s),Lr(s,[i])}var J0=new WeakMap;function bn(i,s){if(typeof i=="object"&&i!==null){var o=J0.get(i);return o!==void 0?o:(s={value:i,source:s,stack:Jc(s)},J0.set(i,s),s)}return{value:i,source:s,stack:Jc(s)}}var xn=[],No=0,lg=0;function Zc(){for(var i=No,s=lg=No=0;s<i;){var o=xn[s];xn[s++]=null;var u=xn[s];xn[s++]=null;var f=xn[s];xn[s++]=null;var m=xn[s];if(xn[s++]=null,u!==null&&f!==null){var b=u.pending;b===null?f.next=f:(f.next=b.next,b.next=f),u.pending=f}m!==0&&$0(o,f,m)}}function Qc(i,s,o,u){xn[No++]=i,xn[No++]=s,xn[No++]=o,xn[No++]=u,lg|=u,i.lanes|=u,i=i.alternate,i!==null&&(i.lanes|=u)}function ug(i,s,o,u){return Qc(i,s,o,u),Wc(i)}function ko(i,s){return Qc(i,null,null,s),Wc(i)}function $0(i,s,o){i.lanes|=o;var u=i.alternate;u!==null&&(u.lanes|=o);for(var f=!1,m=i.return;m!==null;)m.childLanes|=o,u=m.alternate,u!==null&&(u.childLanes|=o),m.tag===22&&(i=m.stateNode,i===null||i._visibility&1||(f=!0)),i=m,m=m.return;return i.tag===3?(m=i.stateNode,f&&s!==null&&(f=31-Ye(o),i=m.hiddenUpdates,u=i[f],u===null?i[f]=[s]:u.push(s),s.lane=o|536870912),m):null}function Wc(i){if(50<Au)throw Au=0,mm=null,Error(r(185));for(var s=i.return;s!==null;)i=s,s=i.return;return i.tag===3?i.stateNode:null}var Co={};function OE(i,s,o,u){this.tag=i,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ln(i,s,o,u){return new OE(i,s,o,u)}function cg(i){return i=i.prototype,!(!i||!i.isReactComponent)}function qr(i,s){var o=i.alternate;return o===null?(o=ln(i.tag,s,i.key,i.mode),o.elementType=i.elementType,o.type=i.type,o.stateNode=i.stateNode,o.alternate=i,i.alternate=o):(o.pendingProps=s,o.type=i.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=i.flags&65011712,o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,s=i.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=i.sibling,o.index=i.index,o.ref=i.ref,o.refCleanup=i.refCleanup,o}function H0(i,s){i.flags&=65011714;var o=i.alternate;return o===null?(i.childLanes=0,i.lanes=s,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,s=o.dependencies,i.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),i}function tf(i,s,o,u,f,m){var b=0;if(u=i,typeof i=="function")cg(i)&&(b=1);else if(typeof i=="string")b=RN(i,o,lt.current)?26:i==="html"||i==="head"||i==="body"?27:5;else t:switch(i){case W:return i=ln(31,o,s,f),i.elementType=W,i.lanes=m,i;case A:return La(o.children,f,m,s);case T:b=8,f|=24;break;case k:return i=ln(12,o,s,f|2),i.elementType=k,i.lanes=m,i;case B:return i=ln(13,o,s,f),i.elementType=B,i.lanes=m,i;case U:return i=ln(19,o,s,f),i.elementType=U,i.lanes=m,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case D:case N:b=10;break t;case L:b=9;break t;case O:b=11;break t;case J:b=14;break t;case j:b=16,u=null;break t}b=29,o=Error(r(130,i===null?"null":typeof i,"")),u=null}return s=ln(b,o,s,f),s.elementType=i,s.type=u,s.lanes=m,s}function La(i,s,o,u){return i=ln(7,i,u,s),i.lanes=o,i}function fg(i,s,o){return i=ln(6,i,null,s),i.lanes=o,i}function dg(i,s,o){return s=ln(4,i.children!==null?i.children:[],i.key,s),s.lanes=o,s.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},s}var Do=[],Io=0,ef=null,nf=0,Tn=[],An=0,Ua=null,Jr=1,$r="";function _a(i,s){Do[Io++]=nf,Do[Io++]=ef,ef=i,nf=s}function V0(i,s,o){Tn[An++]=Jr,Tn[An++]=$r,Tn[An++]=Ua,Ua=i;var u=Jr;i=$r;var f=32-Ye(u)-1;u&=~(1<<f),o+=1;var m=32-Ye(s)+f;if(30<m){var b=f-f%5;m=(u&(1<<b)-1).toString(32),u>>=b,f-=b,Jr=1<<32-Ye(s)+f|o<<f|u,$r=m+i}else Jr=1<<m|o<<f|u,$r=i}function hg(i){i.return!==null&&(_a(i,1),V0(i,1,0))}function gg(i){for(;i===ef;)ef=Do[--Io],Do[Io]=null,nf=Do[--Io],Do[Io]=null;for(;i===Ua;)Ua=Tn[--An],Tn[An]=null,$r=Tn[--An],Tn[An]=null,Jr=Tn[--An],Tn[An]=null}var Ge=null,he=null,Yt=!1,Pa=null,lr=!1,mg=Error(r(519));function qa(i){var s=Error(r(418,""));throw nu(bn(s,i)),mg}function j0(i){var s=i.stateNode,o=i.type,u=i.memoizedProps;switch(s[Ie]=i,s[Je]=u,o){case"dialog":_t("cancel",s),_t("close",s);break;case"iframe":case"object":case"embed":_t("load",s);break;case"video":case"audio":for(o=0;o<Nu.length;o++)_t(Nu[o],s);break;case"source":_t("error",s);break;case"img":case"image":case"link":_t("error",s),_t("load",s);break;case"details":_t("toggle",s);break;case"input":_t("invalid",s),Hc(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),vo(s);break;case"select":_t("invalid",s);break;case"textarea":_t("invalid",s),l0(s,u.value,u.defaultValue,u.children),vo(s)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||u.suppressHydrationWarning===!0||lS(s.textContent,o)?(u.popover!=null&&(_t("beforetoggle",s),_t("toggle",s)),u.onScroll!=null&&_t("scroll",s),u.onScrollEnd!=null&&_t("scrollend",s),u.onClick!=null&&(s.onclick=Uf),s=!0):s=!1,s||qa(i)}function K0(i){for(Ge=i.return;Ge;)switch(Ge.tag){case 5:case 13:lr=!1;return;case 27:case 3:lr=!0;return;default:Ge=Ge.return}}function tu(i){if(i!==Ge)return!1;if(!Yt)return K0(i),Yt=!0,!1;var s=i.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=i.type,o=!(o!=="form"&&o!=="button")||Om(i.type,i.memoizedProps)),o=!o),o&&he&&qa(i),K0(i),s===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));t:{for(i=i.nextSibling,s=0;i;){if(i.nodeType===8)if(o=i.data,o==="/$"){if(s===0){he=Gn(i.nextSibling);break t}s--}else o!=="$"&&o!=="$!"&&o!=="$?"||s++;i=i.nextSibling}he=null}}else s===27?(s=he,sa(i.type)?(i=zm,zm=null,he=i):he=s):he=Ge?Gn(i.stateNode.nextSibling):null;return!0}function eu(){he=Ge=null,Yt=!1}function Y0(){var i=Pa;return i!==null&&(tn===null?tn=i:tn.push.apply(tn,i),Pa=null),i}function nu(i){Pa===null?Pa=[i]:Pa.push(i)}var yg=_(null),Ja=null,Hr=null;function Vs(i,s,o){it(yg,s._currentValue),s._currentValue=o}function Vr(i){i._currentValue=yg.current,Z(yg)}function pg(i,s,o){for(;i!==null;){var u=i.alternate;if((i.childLanes&s)!==s?(i.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),i===o)break;i=i.return}}function vg(i,s,o,u){var f=i.child;for(f!==null&&(f.return=i);f!==null;){var m=f.dependencies;if(m!==null){var b=f.child;m=m.firstContext;t:for(;m!==null;){var E=m;m=f;for(var R=0;R<s.length;R++)if(E.context===s[R]){m.lanes|=o,E=m.alternate,E!==null&&(E.lanes|=o),pg(m.return,o,i),u||(b=null);break t}m=E.next}}else if(f.tag===18){if(b=f.return,b===null)throw Error(r(341));b.lanes|=o,m=b.alternate,m!==null&&(m.lanes|=o),pg(b,o,i),b=null}else b=f.child;if(b!==null)b.return=f;else for(b=f;b!==null;){if(b===i){b=null;break}if(f=b.sibling,f!==null){f.return=b.return,b=f;break}b=b.return}f=b}}function ru(i,s,o,u){i=null;for(var f=s,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var b=f.alternate;if(b===null)throw Error(r(387));if(b=b.memoizedProps,b!==null){var E=f.type;on(f.pendingProps.value,b.value)||(i!==null?i.push(E):i=[E])}}else if(f===vt.current){if(b=f.alternate,b===null)throw Error(r(387));b.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(i!==null?i.push(Mu):i=[Mu])}f=f.return}i!==null&&vg(s,i,o,u),s.flags|=262144}function rf(i){for(i=i.firstContext;i!==null;){if(!on(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function $a(i){Ja=i,Hr=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function $e(i){return G0(Ja,i)}function sf(i,s){return Ja===null&&$a(i),G0(i,s)}function G0(i,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},Hr===null){if(i===null)throw Error(r(308));Hr=s,i.dependencies={lanes:0,firstContext:s},i.flags|=524288}else Hr=Hr.next=s;return o}var ME=typeof AbortController<"u"?AbortController:function(){var i=[],s=this.signal={aborted:!1,addEventListener:function(o,u){i.push(u)}};this.abort=function(){s.aborted=!0,i.forEach(function(o){return o()})}},RE=n.unstable_scheduleCallback,BE=n.unstable_NormalPriority,Ce={$$typeof:N,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function wg(){return{controller:new ME,data:new Map,refCount:0}}function iu(i){i.refCount--,i.refCount===0&&RE(BE,function(){i.controller.abort()})}var su=null,Sg=0,Oo=0,Mo=null;function zE(i,s){if(su===null){var o=su=[];Sg=0,Oo=xm(),Mo={status:"pending",value:void 0,then:function(u){o.push(u)}}}return Sg++,s.then(F0,F0),s}function F0(){if(--Sg===0&&su!==null){Mo!==null&&(Mo.status="fulfilled");var i=su;su=null,Oo=0,Mo=null;for(var s=0;s<i.length;s++)(0,i[s])()}}function LE(i,s){var o=[],u={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return i.then(function(){u.status="fulfilled",u.value=s;for(var f=0;f<o.length;f++)(0,o[f])(s)},function(f){for(u.status="rejected",u.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),u}var X0=I.S;I.S=function(i,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&zE(i,s),X0!==null&&X0(i,s)};var Ha=_(null);function bg(){var i=Ha.current;return i!==null?i:ie.pooledCache}function af(i,s){s===null?it(Ha,Ha.current):it(Ha,s.pool)}function Z0(){var i=bg();return i===null?null:{parent:Ce._currentValue,pool:i}}var au=Error(r(460)),Q0=Error(r(474)),of=Error(r(542)),xg={then:function(){}};function W0(i){return i=i.status,i==="fulfilled"||i==="rejected"}function lf(){}function tv(i,s,o){switch(o=i[o],o===void 0?i.push(s):o!==s&&(s.then(lf,lf),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,nv(i),i;default:if(typeof s.status=="string")s.then(lf,lf);else{if(i=ie,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=s,i.status="pending",i.then(function(u){if(s.status==="pending"){var f=s;f.status="fulfilled",f.value=u}},function(u){if(s.status==="pending"){var f=s;f.status="rejected",f.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,nv(i),i}throw ou=s,au}}var ou=null;function ev(){if(ou===null)throw Error(r(459));var i=ou;return ou=null,i}function nv(i){if(i===au||i===of)throw Error(r(483))}var js=!1;function Tg(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ag(i,s){i=i.updateQueue,s.updateQueue===i&&(s.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Ks(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Ys(i,s,o){var u=i.updateQueue;if(u===null)return null;if(u=u.shared,(Ft&2)!==0){var f=u.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),u.pending=s,s=Wc(i),$0(i,null,o),s}return Qc(i,u,s,o),Wc(i)}function lu(i,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var u=s.lanes;u&=i.pendingLanes,o|=u,s.lanes=o,zl(i,o)}}function Eg(i,s){var o=i.updateQueue,u=i.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var f=null,m=null;if(o=o.firstBaseUpdate,o!==null){do{var b={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};m===null?f=m=b:m=m.next=b,o=o.next}while(o!==null);m===null?f=m=s:m=m.next=s}else f=m=s;o={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:u.shared,callbacks:u.callbacks},i.updateQueue=o;return}i=o.lastBaseUpdate,i===null?o.firstBaseUpdate=s:i.next=s,o.lastBaseUpdate=s}var Ng=!1;function uu(){if(Ng){var i=Mo;if(i!==null)throw i}}function cu(i,s,o,u){Ng=!1;var f=i.updateQueue;js=!1;var m=f.firstBaseUpdate,b=f.lastBaseUpdate,E=f.shared.pending;if(E!==null){f.shared.pending=null;var R=E,F=R.next;R.next=null,b===null?m=F:b.next=F,b=R;var at=i.alternate;at!==null&&(at=at.updateQueue,E=at.lastBaseUpdate,E!==b&&(E===null?at.firstBaseUpdate=F:E.next=F,at.lastBaseUpdate=R))}if(m!==null){var ct=f.baseState;b=0,at=F=R=null,E=m;do{var X=E.lane&-536870913,Q=X!==E.lane;if(Q?(Ht&X)===X:(u&X)===X){X!==0&&X===Oo&&(Ng=!0),at!==null&&(at=at.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});t:{var It=i,kt=E;X=s;var te=o;switch(kt.tag){case 1:if(It=kt.payload,typeof It=="function"){ct=It.call(te,ct,X);break t}ct=It;break t;case 3:It.flags=It.flags&-65537|128;case 0:if(It=kt.payload,X=typeof It=="function"?It.call(te,ct,X):It,X==null)break t;ct=p({},ct,X);break t;case 2:js=!0}}X=E.callback,X!==null&&(i.flags|=64,Q&&(i.flags|=8192),Q=f.callbacks,Q===null?f.callbacks=[X]:Q.push(X))}else Q={lane:X,tag:E.tag,payload:E.payload,callback:E.callback,next:null},at===null?(F=at=Q,R=ct):at=at.next=Q,b|=X;if(E=E.next,E===null){if(E=f.shared.pending,E===null)break;Q=E,E=Q.next,Q.next=null,f.lastBaseUpdate=Q,f.shared.pending=null}}while(!0);at===null&&(R=ct),f.baseState=R,f.firstBaseUpdate=F,f.lastBaseUpdate=at,m===null&&(f.shared.lanes=0),ea|=b,i.lanes=b,i.memoizedState=ct}}function rv(i,s){if(typeof i!="function")throw Error(r(191,i));i.call(s)}function iv(i,s){var o=i.callbacks;if(o!==null)for(i.callbacks=null,i=0;i<o.length;i++)rv(o[i],s)}var Ro=_(null),uf=_(0);function sv(i,s){i=Zr,it(uf,i),it(Ro,s),Zr=i|s.baseLanes}function kg(){it(uf,Zr),it(Ro,Ro.current)}function Cg(){Zr=uf.current,Z(Ro),Z(uf)}var Gs=0,zt=null,Qt=null,Te=null,cf=!1,Bo=!1,Va=!1,ff=0,fu=0,zo=null,UE=0;function pe(){throw Error(r(321))}function Dg(i,s){if(s===null)return!1;for(var o=0;o<s.length&&o<i.length;o++)if(!on(i[o],s[o]))return!1;return!0}function Ig(i,s,o,u,f,m){return Gs=m,zt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,I.H=i===null||i.memoizedState===null?$v:Hv,Va=!1,m=o(u,f),Va=!1,Bo&&(m=ov(s,o,u,f)),av(i),m}function av(i){I.H=pf;var s=Qt!==null&&Qt.next!==null;if(Gs=0,Te=Qt=zt=null,cf=!1,fu=0,zo=null,s)throw Error(r(300));i===null||Oe||(i=i.dependencies,i!==null&&rf(i)&&(Oe=!0))}function ov(i,s,o,u){zt=i;var f=0;do{if(Bo&&(zo=null),fu=0,Bo=!1,25<=f)throw Error(r(301));if(f+=1,Te=Qt=null,i.updateQueue!=null){var m=i.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}I.H=VE,m=s(o,u)}while(Bo);return m}function _E(){var i=I.H,s=i.useState()[0];return s=typeof s.then=="function"?du(s):s,i=i.useState()[0],(Qt!==null?Qt.memoizedState:null)!==i&&(zt.flags|=1024),s}function Og(){var i=ff!==0;return ff=0,i}function Mg(i,s,o){s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~o}function Rg(i){if(cf){for(i=i.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}cf=!1}Gs=0,Te=Qt=zt=null,Bo=!1,fu=ff=0,zo=null}function Qe(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Te===null?zt.memoizedState=Te=i:Te=Te.next=i,Te}function Ae(){if(Qt===null){var i=zt.alternate;i=i!==null?i.memoizedState:null}else i=Qt.next;var s=Te===null?zt.memoizedState:Te.next;if(s!==null)Te=s,Qt=i;else{if(i===null)throw zt.alternate===null?Error(r(467)):Error(r(310));Qt=i,i={memoizedState:Qt.memoizedState,baseState:Qt.baseState,baseQueue:Qt.baseQueue,queue:Qt.queue,next:null},Te===null?zt.memoizedState=Te=i:Te=Te.next=i}return Te}function Bg(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function du(i){var s=fu;return fu+=1,zo===null&&(zo=[]),i=tv(zo,i,s),s=zt,(Te===null?s.memoizedState:Te.next)===null&&(s=s.alternate,I.H=s===null||s.memoizedState===null?$v:Hv),i}function df(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return du(i);if(i.$$typeof===N)return $e(i)}throw Error(r(438,String(i)))}function zg(i){var s=null,o=zt.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var u=zt.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(f){return f.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=Bg(),zt.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(i),u=0;u<i;u++)o[u]=ft;return s.index++,o}function jr(i,s){return typeof s=="function"?s(i):s}function hf(i){var s=Ae();return Lg(s,Qt,i)}function Lg(i,s,o){var u=i.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=o;var f=i.baseQueue,m=u.pending;if(m!==null){if(f!==null){var b=f.next;f.next=m.next,m.next=b}s.baseQueue=f=m,u.pending=null}if(m=i.baseState,f===null)i.memoizedState=m;else{s=f.next;var E=b=null,R=null,F=s,at=!1;do{var ct=F.lane&-536870913;if(ct!==F.lane?(Ht&ct)===ct:(Gs&ct)===ct){var X=F.revertLane;if(X===0)R!==null&&(R=R.next={lane:0,revertLane:0,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),ct===Oo&&(at=!0);else if((Gs&X)===X){F=F.next,X===Oo&&(at=!0);continue}else ct={lane:0,revertLane:F.revertLane,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},R===null?(E=R=ct,b=m):R=R.next=ct,zt.lanes|=X,ea|=X;ct=F.action,Va&&o(m,ct),m=F.hasEagerState?F.eagerState:o(m,ct)}else X={lane:ct,revertLane:F.revertLane,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},R===null?(E=R=X,b=m):R=R.next=X,zt.lanes|=ct,ea|=ct;F=F.next}while(F!==null&&F!==s);if(R===null?b=m:R.next=E,!on(m,i.memoizedState)&&(Oe=!0,at&&(o=Mo,o!==null)))throw o;i.memoizedState=m,i.baseState=b,i.baseQueue=R,u.lastRenderedState=m}return f===null&&(u.lanes=0),[i.memoizedState,u.dispatch]}function Ug(i){var s=Ae(),o=s.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=i;var u=o.dispatch,f=o.pending,m=s.memoizedState;if(f!==null){o.pending=null;var b=f=f.next;do m=i(m,b.action),b=b.next;while(b!==f);on(m,s.memoizedState)||(Oe=!0),s.memoizedState=m,s.baseQueue===null&&(s.baseState=m),o.lastRenderedState=m}return[m,u]}function lv(i,s,o){var u=zt,f=Ae(),m=Yt;if(m){if(o===void 0)throw Error(r(407));o=o()}else o=s();var b=!on((Qt||f).memoizedState,o);b&&(f.memoizedState=o,Oe=!0),f=f.queue;var E=fv.bind(null,u,f,i);if(hu(2048,8,E,[i]),f.getSnapshot!==s||b||Te!==null&&Te.memoizedState.tag&1){if(u.flags|=2048,Lo(9,gf(),cv.bind(null,u,f,o,s),null),ie===null)throw Error(r(349));m||(Gs&124)!==0||uv(u,s,o)}return o}function uv(i,s,o){i.flags|=16384,i={getSnapshot:s,value:o},s=zt.updateQueue,s===null?(s=Bg(),zt.updateQueue=s,s.stores=[i]):(o=s.stores,o===null?s.stores=[i]:o.push(i))}function cv(i,s,o,u){s.value=o,s.getSnapshot=u,dv(s)&&hv(i)}function fv(i,s,o){return o(function(){dv(s)&&hv(i)})}function dv(i){var s=i.getSnapshot;i=i.value;try{var o=s();return!on(i,o)}catch{return!0}}function hv(i){var s=ko(i,2);s!==null&&hn(s,i,2)}function _g(i){var s=Qe();if(typeof i=="function"){var o=i;if(i=o(),Va){Vn(!0);try{o()}finally{Vn(!1)}}}return s.memoizedState=s.baseState=i,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:jr,lastRenderedState:i},s}function gv(i,s,o,u){return i.baseState=o,Lg(i,Qt,typeof u=="function"?u:jr)}function PE(i,s,o,u,f){if(yf(i))throw Error(r(485));if(i=s.action,i!==null){var m={payload:f,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){m.listeners.push(b)}};I.T!==null?o(!0):m.isTransition=!1,u(m),o=s.pending,o===null?(m.next=s.pending=m,mv(s,m)):(m.next=o.next,s.pending=o.next=m)}}function mv(i,s){var o=s.action,u=s.payload,f=i.state;if(s.isTransition){var m=I.T,b={};I.T=b;try{var E=o(f,u),R=I.S;R!==null&&R(b,E),yv(i,s,E)}catch(F){Pg(i,s,F)}finally{I.T=m}}else try{m=o(f,u),yv(i,s,m)}catch(F){Pg(i,s,F)}}function yv(i,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){pv(i,s,u)},function(u){return Pg(i,s,u)}):pv(i,s,o)}function pv(i,s,o){s.status="fulfilled",s.value=o,vv(s),i.state=o,s=i.pending,s!==null&&(o=s.next,o===s?i.pending=null:(o=o.next,s.next=o,mv(i,o)))}function Pg(i,s,o){var u=i.pending;if(i.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=o,vv(s),s=s.next;while(s!==u)}i.action=null}function vv(i){i=i.listeners;for(var s=0;s<i.length;s++)(0,i[s])()}function wv(i,s){return s}function Sv(i,s){if(Yt){var o=ie.formState;if(o!==null){t:{var u=zt;if(Yt){if(he){e:{for(var f=he,m=lr;f.nodeType!==8;){if(!m){f=null;break e}if(f=Gn(f.nextSibling),f===null){f=null;break e}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){he=Gn(f.nextSibling),u=f.data==="F!";break t}}qa(u)}u=!1}u&&(s=o[0])}}return o=Qe(),o.memoizedState=o.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:wv,lastRenderedState:s},o.queue=u,o=Pv.bind(null,zt,u),u.dispatch=o,u=_g(!1),m=Vg.bind(null,zt,!1,u.queue),u=Qe(),f={state:s,dispatch:null,action:i,pending:null},u.queue=f,o=PE.bind(null,zt,f,m,o),f.dispatch=o,u.memoizedState=i,[s,o,!1]}function bv(i){var s=Ae();return xv(s,Qt,i)}function xv(i,s,o){if(s=Lg(i,s,wv)[0],i=hf(jr)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=du(s)}catch(b){throw b===au?of:b}else u=s;s=Ae();var f=s.queue,m=f.dispatch;return o!==s.memoizedState&&(zt.flags|=2048,Lo(9,gf(),qE.bind(null,f,o),null)),[u,m,i]}function qE(i,s){i.action=s}function Tv(i){var s=Ae(),o=Qt;if(o!==null)return xv(s,o,i);Ae(),s=s.memoizedState,o=Ae();var u=o.queue.dispatch;return o.memoizedState=i,[s,u,!1]}function Lo(i,s,o,u){return i={tag:i,create:o,deps:u,inst:s,next:null},s=zt.updateQueue,s===null&&(s=Bg(),zt.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=i.next=i:(u=o.next,o.next=i,i.next=u,s.lastEffect=i),i}function gf(){return{destroy:void 0,resource:void 0}}function Av(){return Ae().memoizedState}function mf(i,s,o,u){var f=Qe();u=u===void 0?null:u,zt.flags|=i,f.memoizedState=Lo(1|s,gf(),o,u)}function hu(i,s,o,u){var f=Ae();u=u===void 0?null:u;var m=f.memoizedState.inst;Qt!==null&&u!==null&&Dg(u,Qt.memoizedState.deps)?f.memoizedState=Lo(s,m,o,u):(zt.flags|=i,f.memoizedState=Lo(1|s,m,o,u))}function Ev(i,s){mf(8390656,8,i,s)}function Nv(i,s){hu(2048,8,i,s)}function kv(i,s){return hu(4,2,i,s)}function Cv(i,s){return hu(4,4,i,s)}function Dv(i,s){if(typeof s=="function"){i=i();var o=s(i);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return i=i(),s.current=i,function(){s.current=null}}function Iv(i,s,o){o=o!=null?o.concat([i]):null,hu(4,4,Dv.bind(null,s,i),o)}function qg(){}function Ov(i,s){var o=Ae();s=s===void 0?null:s;var u=o.memoizedState;return s!==null&&Dg(s,u[1])?u[0]:(o.memoizedState=[i,s],i)}function Mv(i,s){var o=Ae();s=s===void 0?null:s;var u=o.memoizedState;if(s!==null&&Dg(s,u[1]))return u[0];if(u=i(),Va){Vn(!0);try{i()}finally{Vn(!1)}}return o.memoizedState=[u,s],u}function Jg(i,s,o){return o===void 0||(Gs&1073741824)!==0?i.memoizedState=s:(i.memoizedState=o,i=zw(),zt.lanes|=i,ea|=i,o)}function Rv(i,s,o,u){return on(o,s)?o:Ro.current!==null?(i=Jg(i,o,u),on(i,s)||(Oe=!0),i):(Gs&42)===0?(Oe=!0,i.memoizedState=o):(i=zw(),zt.lanes|=i,ea|=i,s)}function Bv(i,s,o,u,f){var m=z.p;z.p=m!==0&&8>m?m:8;var b=I.T,E={};I.T=E,Vg(i,!1,s,o);try{var R=f(),F=I.S;if(F!==null&&F(E,R),R!==null&&typeof R=="object"&&typeof R.then=="function"){var at=LE(R,u);gu(i,s,at,dn(i))}else gu(i,s,u,dn(i))}catch(ct){gu(i,s,{then:function(){},status:"rejected",reason:ct},dn())}finally{z.p=m,I.T=b}}function JE(){}function $g(i,s,o,u){if(i.tag!==5)throw Error(r(476));var f=zv(i).queue;Bv(i,f,s,Y,o===null?JE:function(){return Lv(i),o(u)})}function zv(i){var s=i.memoizedState;if(s!==null)return s;s={memoizedState:Y,baseState:Y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:jr,lastRenderedState:Y},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:jr,lastRenderedState:o},next:null},i.memoizedState=s,i=i.alternate,i!==null&&(i.memoizedState=s),s}function Lv(i){var s=zv(i).next.queue;gu(i,s,{},dn())}function Hg(){return $e(Mu)}function Uv(){return Ae().memoizedState}function _v(){return Ae().memoizedState}function $E(i){for(var s=i.return;s!==null;){switch(s.tag){case 24:case 3:var o=dn();i=Ks(o);var u=Ys(s,i,o);u!==null&&(hn(u,s,o),lu(u,s,o)),s={cache:wg()},i.payload=s;return}s=s.return}}function HE(i,s,o){var u=dn();o={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},yf(i)?qv(s,o):(o=ug(i,s,o,u),o!==null&&(hn(o,i,u),Jv(o,s,u)))}function Pv(i,s,o){var u=dn();gu(i,s,o,u)}function gu(i,s,o,u){var f={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(yf(i))qv(s,f);else{var m=i.alternate;if(i.lanes===0&&(m===null||m.lanes===0)&&(m=s.lastRenderedReducer,m!==null))try{var b=s.lastRenderedState,E=m(b,o);if(f.hasEagerState=!0,f.eagerState=E,on(E,b))return Qc(i,s,f,0),ie===null&&Zc(),!1}catch{}finally{}if(o=ug(i,s,f,u),o!==null)return hn(o,i,u),Jv(o,s,u),!0}return!1}function Vg(i,s,o,u){if(u={lane:2,revertLane:xm(),action:u,hasEagerState:!1,eagerState:null,next:null},yf(i)){if(s)throw Error(r(479))}else s=ug(i,o,u,2),s!==null&&hn(s,i,2)}function yf(i){var s=i.alternate;return i===zt||s!==null&&s===zt}function qv(i,s){Bo=cf=!0;var o=i.pending;o===null?s.next=s:(s.next=o.next,o.next=s),i.pending=s}function Jv(i,s,o){if((o&4194048)!==0){var u=s.lanes;u&=i.pendingLanes,o|=u,s.lanes=o,zl(i,o)}}var pf={readContext:$e,use:df,useCallback:pe,useContext:pe,useEffect:pe,useImperativeHandle:pe,useLayoutEffect:pe,useInsertionEffect:pe,useMemo:pe,useReducer:pe,useRef:pe,useState:pe,useDebugValue:pe,useDeferredValue:pe,useTransition:pe,useSyncExternalStore:pe,useId:pe,useHostTransitionStatus:pe,useFormState:pe,useActionState:pe,useOptimistic:pe,useMemoCache:pe,useCacheRefresh:pe},$v={readContext:$e,use:df,useCallback:function(i,s){return Qe().memoizedState=[i,s===void 0?null:s],i},useContext:$e,useEffect:Ev,useImperativeHandle:function(i,s,o){o=o!=null?o.concat([i]):null,mf(4194308,4,Dv.bind(null,s,i),o)},useLayoutEffect:function(i,s){return mf(4194308,4,i,s)},useInsertionEffect:function(i,s){mf(4,2,i,s)},useMemo:function(i,s){var o=Qe();s=s===void 0?null:s;var u=i();if(Va){Vn(!0);try{i()}finally{Vn(!1)}}return o.memoizedState=[u,s],u},useReducer:function(i,s,o){var u=Qe();if(o!==void 0){var f=o(s);if(Va){Vn(!0);try{o(s)}finally{Vn(!1)}}}else f=s;return u.memoizedState=u.baseState=f,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:f},u.queue=i,i=i.dispatch=HE.bind(null,zt,i),[u.memoizedState,i]},useRef:function(i){var s=Qe();return i={current:i},s.memoizedState=i},useState:function(i){i=_g(i);var s=i.queue,o=Pv.bind(null,zt,s);return s.dispatch=o,[i.memoizedState,o]},useDebugValue:qg,useDeferredValue:function(i,s){var o=Qe();return Jg(o,i,s)},useTransition:function(){var i=_g(!1);return i=Bv.bind(null,zt,i.queue,!0,!1),Qe().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,s,o){var u=zt,f=Qe();if(Yt){if(o===void 0)throw Error(r(407));o=o()}else{if(o=s(),ie===null)throw Error(r(349));(Ht&124)!==0||uv(u,s,o)}f.memoizedState=o;var m={value:o,getSnapshot:s};return f.queue=m,Ev(fv.bind(null,u,m,i),[i]),u.flags|=2048,Lo(9,gf(),cv.bind(null,u,m,o,s),null),o},useId:function(){var i=Qe(),s=ie.identifierPrefix;if(Yt){var o=$r,u=Jr;o=(u&~(1<<32-Ye(u)-1)).toString(32)+o,s=""+s+"R"+o,o=ff++,0<o&&(s+="H"+o.toString(32)),s+=""}else o=UE++,s=""+s+"r"+o.toString(32)+"";return i.memoizedState=s},useHostTransitionStatus:Hg,useFormState:Sv,useActionState:Sv,useOptimistic:function(i){var s=Qe();s.memoizedState=s.baseState=i;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=Vg.bind(null,zt,!0,o),o.dispatch=s,[i,s]},useMemoCache:zg,useCacheRefresh:function(){return Qe().memoizedState=$E.bind(null,zt)}},Hv={readContext:$e,use:df,useCallback:Ov,useContext:$e,useEffect:Nv,useImperativeHandle:Iv,useInsertionEffect:kv,useLayoutEffect:Cv,useMemo:Mv,useReducer:hf,useRef:Av,useState:function(){return hf(jr)},useDebugValue:qg,useDeferredValue:function(i,s){var o=Ae();return Rv(o,Qt.memoizedState,i,s)},useTransition:function(){var i=hf(jr)[0],s=Ae().memoizedState;return[typeof i=="boolean"?i:du(i),s]},useSyncExternalStore:lv,useId:Uv,useHostTransitionStatus:Hg,useFormState:bv,useActionState:bv,useOptimistic:function(i,s){var o=Ae();return gv(o,Qt,i,s)},useMemoCache:zg,useCacheRefresh:_v},VE={readContext:$e,use:df,useCallback:Ov,useContext:$e,useEffect:Nv,useImperativeHandle:Iv,useInsertionEffect:kv,useLayoutEffect:Cv,useMemo:Mv,useReducer:Ug,useRef:Av,useState:function(){return Ug(jr)},useDebugValue:qg,useDeferredValue:function(i,s){var o=Ae();return Qt===null?Jg(o,i,s):Rv(o,Qt.memoizedState,i,s)},useTransition:function(){var i=Ug(jr)[0],s=Ae().memoizedState;return[typeof i=="boolean"?i:du(i),s]},useSyncExternalStore:lv,useId:Uv,useHostTransitionStatus:Hg,useFormState:Tv,useActionState:Tv,useOptimistic:function(i,s){var o=Ae();return Qt!==null?gv(o,Qt,i,s):(o.baseState=i,[i,o.queue.dispatch])},useMemoCache:zg,useCacheRefresh:_v},Uo=null,mu=0;function vf(i){var s=mu;return mu+=1,Uo===null&&(Uo=[]),tv(Uo,i,s)}function yu(i,s){s=s.props.ref,i.ref=s!==void 0?s:null}function wf(i,s){throw s.$$typeof===w?Error(r(525)):(i=Object.prototype.toString.call(s),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":i)))}function Vv(i){var s=i._init;return s(i._payload)}function jv(i){function s(V,P){if(i){var G=V.deletions;G===null?(V.deletions=[P],V.flags|=16):G.push(P)}}function o(V,P){if(!i)return null;for(;P!==null;)s(V,P),P=P.sibling;return null}function u(V){for(var P=new Map;V!==null;)V.key!==null?P.set(V.key,V):P.set(V.index,V),V=V.sibling;return P}function f(V,P){return V=qr(V,P),V.index=0,V.sibling=null,V}function m(V,P,G){return V.index=G,i?(G=V.alternate,G!==null?(G=G.index,G<P?(V.flags|=67108866,P):G):(V.flags|=67108866,P)):(V.flags|=1048576,P)}function b(V){return i&&V.alternate===null&&(V.flags|=67108866),V}function E(V,P,G,ut){return P===null||P.tag!==6?(P=fg(G,V.mode,ut),P.return=V,P):(P=f(P,G),P.return=V,P)}function R(V,P,G,ut){var wt=G.type;return wt===A?at(V,P,G.props.children,ut,G.key):P!==null&&(P.elementType===wt||typeof wt=="object"&&wt!==null&&wt.$$typeof===j&&Vv(wt)===P.type)?(P=f(P,G.props),yu(P,G),P.return=V,P):(P=tf(G.type,G.key,G.props,null,V.mode,ut),yu(P,G),P.return=V,P)}function F(V,P,G,ut){return P===null||P.tag!==4||P.stateNode.containerInfo!==G.containerInfo||P.stateNode.implementation!==G.implementation?(P=dg(G,V.mode,ut),P.return=V,P):(P=f(P,G.children||[]),P.return=V,P)}function at(V,P,G,ut,wt){return P===null||P.tag!==7?(P=La(G,V.mode,ut,wt),P.return=V,P):(P=f(P,G),P.return=V,P)}function ct(V,P,G){if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return P=fg(""+P,V.mode,G),P.return=V,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case v:return G=tf(P.type,P.key,P.props,null,V.mode,G),yu(G,P),G.return=V,G;case S:return P=dg(P,V.mode,G),P.return=V,P;case j:var ut=P._init;return P=ut(P._payload),ct(V,P,G)}if(K(P)||rt(P))return P=La(P,V.mode,G,null),P.return=V,P;if(typeof P.then=="function")return ct(V,vf(P),G);if(P.$$typeof===N)return ct(V,sf(V,P),G);wf(V,P)}return null}function X(V,P,G,ut){var wt=P!==null?P.key:null;if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return wt!==null?null:E(V,P,""+G,ut);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case v:return G.key===wt?R(V,P,G,ut):null;case S:return G.key===wt?F(V,P,G,ut):null;case j:return wt=G._init,G=wt(G._payload),X(V,P,G,ut)}if(K(G)||rt(G))return wt!==null?null:at(V,P,G,ut,null);if(typeof G.then=="function")return X(V,P,vf(G),ut);if(G.$$typeof===N)return X(V,P,sf(V,G),ut);wf(V,G)}return null}function Q(V,P,G,ut,wt){if(typeof ut=="string"&&ut!==""||typeof ut=="number"||typeof ut=="bigint")return V=V.get(G)||null,E(P,V,""+ut,wt);if(typeof ut=="object"&&ut!==null){switch(ut.$$typeof){case v:return V=V.get(ut.key===null?G:ut.key)||null,R(P,V,ut,wt);case S:return V=V.get(ut.key===null?G:ut.key)||null,F(P,V,ut,wt);case j:var Lt=ut._init;return ut=Lt(ut._payload),Q(V,P,G,ut,wt)}if(K(ut)||rt(ut))return V=V.get(G)||null,at(P,V,ut,wt,null);if(typeof ut.then=="function")return Q(V,P,G,vf(ut),wt);if(ut.$$typeof===N)return Q(V,P,G,sf(P,ut),wt);wf(P,ut)}return null}function It(V,P,G,ut){for(var wt=null,Lt=null,xt=P,Dt=P=0,Re=null;xt!==null&&Dt<G.length;Dt++){xt.index>Dt?(Re=xt,xt=null):Re=xt.sibling;var Kt=X(V,xt,G[Dt],ut);if(Kt===null){xt===null&&(xt=Re);break}i&&xt&&Kt.alternate===null&&s(V,xt),P=m(Kt,P,Dt),Lt===null?wt=Kt:Lt.sibling=Kt,Lt=Kt,xt=Re}if(Dt===G.length)return o(V,xt),Yt&&_a(V,Dt),wt;if(xt===null){for(;Dt<G.length;Dt++)xt=ct(V,G[Dt],ut),xt!==null&&(P=m(xt,P,Dt),Lt===null?wt=xt:Lt.sibling=xt,Lt=xt);return Yt&&_a(V,Dt),wt}for(xt=u(xt);Dt<G.length;Dt++)Re=Q(xt,V,Dt,G[Dt],ut),Re!==null&&(i&&Re.alternate!==null&&xt.delete(Re.key===null?Dt:Re.key),P=m(Re,P,Dt),Lt===null?wt=Re:Lt.sibling=Re,Lt=Re);return i&&xt.forEach(function(ca){return s(V,ca)}),Yt&&_a(V,Dt),wt}function kt(V,P,G,ut){if(G==null)throw Error(r(151));for(var wt=null,Lt=null,xt=P,Dt=P=0,Re=null,Kt=G.next();xt!==null&&!Kt.done;Dt++,Kt=G.next()){xt.index>Dt?(Re=xt,xt=null):Re=xt.sibling;var ca=X(V,xt,Kt.value,ut);if(ca===null){xt===null&&(xt=Re);break}i&&xt&&ca.alternate===null&&s(V,xt),P=m(ca,P,Dt),Lt===null?wt=ca:Lt.sibling=ca,Lt=ca,xt=Re}if(Kt.done)return o(V,xt),Yt&&_a(V,Dt),wt;if(xt===null){for(;!Kt.done;Dt++,Kt=G.next())Kt=ct(V,Kt.value,ut),Kt!==null&&(P=m(Kt,P,Dt),Lt===null?wt=Kt:Lt.sibling=Kt,Lt=Kt);return Yt&&_a(V,Dt),wt}for(xt=u(xt);!Kt.done;Dt++,Kt=G.next())Kt=Q(xt,V,Dt,Kt.value,ut),Kt!==null&&(i&&Kt.alternate!==null&&xt.delete(Kt.key===null?Dt:Kt.key),P=m(Kt,P,Dt),Lt===null?wt=Kt:Lt.sibling=Kt,Lt=Kt);return i&&xt.forEach(function(jN){return s(V,jN)}),Yt&&_a(V,Dt),wt}function te(V,P,G,ut){if(typeof G=="object"&&G!==null&&G.type===A&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case v:t:{for(var wt=G.key;P!==null;){if(P.key===wt){if(wt=G.type,wt===A){if(P.tag===7){o(V,P.sibling),ut=f(P,G.props.children),ut.return=V,V=ut;break t}}else if(P.elementType===wt||typeof wt=="object"&&wt!==null&&wt.$$typeof===j&&Vv(wt)===P.type){o(V,P.sibling),ut=f(P,G.props),yu(ut,G),ut.return=V,V=ut;break t}o(V,P);break}else s(V,P);P=P.sibling}G.type===A?(ut=La(G.props.children,V.mode,ut,G.key),ut.return=V,V=ut):(ut=tf(G.type,G.key,G.props,null,V.mode,ut),yu(ut,G),ut.return=V,V=ut)}return b(V);case S:t:{for(wt=G.key;P!==null;){if(P.key===wt)if(P.tag===4&&P.stateNode.containerInfo===G.containerInfo&&P.stateNode.implementation===G.implementation){o(V,P.sibling),ut=f(P,G.children||[]),ut.return=V,V=ut;break t}else{o(V,P);break}else s(V,P);P=P.sibling}ut=dg(G,V.mode,ut),ut.return=V,V=ut}return b(V);case j:return wt=G._init,G=wt(G._payload),te(V,P,G,ut)}if(K(G))return It(V,P,G,ut);if(rt(G)){if(wt=rt(G),typeof wt!="function")throw Error(r(150));return G=wt.call(G),kt(V,P,G,ut)}if(typeof G.then=="function")return te(V,P,vf(G),ut);if(G.$$typeof===N)return te(V,P,sf(V,G),ut);wf(V,G)}return typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint"?(G=""+G,P!==null&&P.tag===6?(o(V,P.sibling),ut=f(P,G),ut.return=V,V=ut):(o(V,P),ut=fg(G,V.mode,ut),ut.return=V,V=ut),b(V)):o(V,P)}return function(V,P,G,ut){try{mu=0;var wt=te(V,P,G,ut);return Uo=null,wt}catch(xt){if(xt===au||xt===of)throw xt;var Lt=ln(29,xt,null,V.mode);return Lt.lanes=ut,Lt.return=V,Lt}finally{}}}var _o=jv(!0),Kv=jv(!1),En=_(null),ur=null;function Fs(i){var s=i.alternate;it(De,De.current&1),it(En,i),ur===null&&(s===null||Ro.current!==null||s.memoizedState!==null)&&(ur=i)}function Yv(i){if(i.tag===22){if(it(De,De.current),it(En,i),ur===null){var s=i.alternate;s!==null&&s.memoizedState!==null&&(ur=i)}}else Xs()}function Xs(){it(De,De.current),it(En,En.current)}function Kr(i){Z(En),ur===i&&(ur=null),Z(De)}var De=_(0);function Sf(i){for(var s=i;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||Bm(o)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function jg(i,s,o,u){s=i.memoizedState,o=o(u,s),o=o==null?s:p({},s,o),i.memoizedState=o,i.lanes===0&&(i.updateQueue.baseState=o)}var Kg={enqueueSetState:function(i,s,o){i=i._reactInternals;var u=dn(),f=Ks(u);f.payload=s,o!=null&&(f.callback=o),s=Ys(i,f,u),s!==null&&(hn(s,i,u),lu(s,i,u))},enqueueReplaceState:function(i,s,o){i=i._reactInternals;var u=dn(),f=Ks(u);f.tag=1,f.payload=s,o!=null&&(f.callback=o),s=Ys(i,f,u),s!==null&&(hn(s,i,u),lu(s,i,u))},enqueueForceUpdate:function(i,s){i=i._reactInternals;var o=dn(),u=Ks(o);u.tag=2,s!=null&&(u.callback=s),s=Ys(i,u,o),s!==null&&(hn(s,i,o),lu(s,i,o))}};function Gv(i,s,o,u,f,m,b){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(u,m,b):s.prototype&&s.prototype.isPureReactComponent?!Ql(o,u)||!Ql(f,m):!0}function Fv(i,s,o,u){i=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,u),s.state!==i&&Kg.enqueueReplaceState(s,s.state,null)}function ja(i,s){var o=s;if("ref"in s){o={};for(var u in s)u!=="ref"&&(o[u]=s[u])}if(i=i.defaultProps){o===s&&(o=p({},o));for(var f in i)o[f]===void 0&&(o[f]=i[f])}return o}var bf=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function Xv(i){bf(i)}function Zv(i){console.error(i)}function Qv(i){bf(i)}function xf(i,s){try{var o=i.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function Wv(i,s,o){try{var u=i.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Yg(i,s,o){return o=Ks(o),o.tag=3,o.payload={element:null},o.callback=function(){xf(i,s)},o}function tw(i){return i=Ks(i),i.tag=3,i}function ew(i,s,o,u){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var m=u.value;i.payload=function(){return f(m)},i.callback=function(){Wv(s,o,u)}}var b=o.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(i.callback=function(){Wv(s,o,u),typeof f!="function"&&(na===null?na=new Set([this]):na.add(this));var E=u.stack;this.componentDidCatch(u.value,{componentStack:E!==null?E:""})})}function jE(i,s,o,u,f){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=o.alternate,s!==null&&ru(s,o,f,!0),o=En.current,o!==null){switch(o.tag){case 13:return ur===null?pm():o.alternate===null&&ge===0&&(ge=3),o.flags&=-257,o.flags|=65536,o.lanes=f,u===xg?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([u]):s.add(u),wm(i,u,f)),!1;case 22:return o.flags|=65536,u===xg?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([u]):o.add(u)),wm(i,u,f)),!1}throw Error(r(435,o.tag))}return wm(i,u,f),pm(),!1}if(Yt)return s=En.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=f,u!==mg&&(i=Error(r(422),{cause:u}),nu(bn(i,o)))):(u!==mg&&(s=Error(r(423),{cause:u}),nu(bn(s,o))),i=i.current.alternate,i.flags|=65536,f&=-f,i.lanes|=f,u=bn(u,o),f=Yg(i.stateNode,u,f),Eg(i,f),ge!==4&&(ge=2)),!1;var m=Error(r(520),{cause:u});if(m=bn(m,o),Tu===null?Tu=[m]:Tu.push(m),ge!==4&&(ge=2),s===null)return!0;u=bn(u,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,i=f&-f,o.lanes|=i,i=Yg(o.stateNode,u,i),Eg(o,i),!1;case 1:if(s=o.type,m=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(na===null||!na.has(m))))return o.flags|=65536,f&=-f,o.lanes|=f,f=tw(f),ew(f,i,o,u),Eg(o,f),!1}o=o.return}while(o!==null);return!1}var nw=Error(r(461)),Oe=!1;function Le(i,s,o,u){s.child=i===null?Kv(s,null,o,u):_o(s,i.child,o,u)}function rw(i,s,o,u,f){o=o.render;var m=s.ref;if("ref"in u){var b={};for(var E in u)E!=="ref"&&(b[E]=u[E])}else b=u;return $a(s),u=Ig(i,s,o,b,m,f),E=Og(),i!==null&&!Oe?(Mg(i,s,f),Yr(i,s,f)):(Yt&&E&&hg(s),s.flags|=1,Le(i,s,u,f),s.child)}function iw(i,s,o,u,f){if(i===null){var m=o.type;return typeof m=="function"&&!cg(m)&&m.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=m,sw(i,s,m,u,f)):(i=tf(o.type,null,u,s,s.mode,f),i.ref=s.ref,i.return=s,s.child=i)}if(m=i.child,!em(i,f)){var b=m.memoizedProps;if(o=o.compare,o=o!==null?o:Ql,o(b,u)&&i.ref===s.ref)return Yr(i,s,f)}return s.flags|=1,i=qr(m,u),i.ref=s.ref,i.return=s,s.child=i}function sw(i,s,o,u,f){if(i!==null){var m=i.memoizedProps;if(Ql(m,u)&&i.ref===s.ref)if(Oe=!1,s.pendingProps=u=m,em(i,f))(i.flags&131072)!==0&&(Oe=!0);else return s.lanes=i.lanes,Yr(i,s,f)}return Gg(i,s,o,u,f)}function aw(i,s,o){var u=s.pendingProps,f=u.children,m=i!==null?i.memoizedState:null;if(u.mode==="hidden"){if((s.flags&128)!==0){if(u=m!==null?m.baseLanes|o:o,i!==null){for(f=s.child=i.child,m=0;f!==null;)m=m|f.lanes|f.childLanes,f=f.sibling;s.childLanes=m&~u}else s.childLanes=0,s.child=null;return ow(i,s,u,o)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},i!==null&&af(s,m!==null?m.cachePool:null),m!==null?sv(s,m):kg(),Yv(s);else return s.lanes=s.childLanes=536870912,ow(i,s,m!==null?m.baseLanes|o:o,o)}else m!==null?(af(s,m.cachePool),sv(s,m),Xs(),s.memoizedState=null):(i!==null&&af(s,null),kg(),Xs());return Le(i,s,f,o),s.child}function ow(i,s,o,u){var f=bg();return f=f===null?null:{parent:Ce._currentValue,pool:f},s.memoizedState={baseLanes:o,cachePool:f},i!==null&&af(s,null),kg(),Yv(s),i!==null&&ru(i,s,u,!0),null}function Tf(i,s){var o=s.ref;if(o===null)i!==null&&i.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(r(284));(i===null||i.ref!==o)&&(s.flags|=4194816)}}function Gg(i,s,o,u,f){return $a(s),o=Ig(i,s,o,u,void 0,f),u=Og(),i!==null&&!Oe?(Mg(i,s,f),Yr(i,s,f)):(Yt&&u&&hg(s),s.flags|=1,Le(i,s,o,f),s.child)}function lw(i,s,o,u,f,m){return $a(s),s.updateQueue=null,o=ov(s,u,o,f),av(i),u=Og(),i!==null&&!Oe?(Mg(i,s,m),Yr(i,s,m)):(Yt&&u&&hg(s),s.flags|=1,Le(i,s,o,m),s.child)}function uw(i,s,o,u,f){if($a(s),s.stateNode===null){var m=Co,b=o.contextType;typeof b=="object"&&b!==null&&(m=$e(b)),m=new o(u,m),s.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Kg,s.stateNode=m,m._reactInternals=s,m=s.stateNode,m.props=u,m.state=s.memoizedState,m.refs={},Tg(s),b=o.contextType,m.context=typeof b=="object"&&b!==null?$e(b):Co,m.state=s.memoizedState,b=o.getDerivedStateFromProps,typeof b=="function"&&(jg(s,o,b,u),m.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(b=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),b!==m.state&&Kg.enqueueReplaceState(m,m.state,null),cu(s,u,m,f),uu(),m.state=s.memoizedState),typeof m.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(i===null){m=s.stateNode;var E=s.memoizedProps,R=ja(o,E);m.props=R;var F=m.context,at=o.contextType;b=Co,typeof at=="object"&&at!==null&&(b=$e(at));var ct=o.getDerivedStateFromProps;at=typeof ct=="function"||typeof m.getSnapshotBeforeUpdate=="function",E=s.pendingProps!==E,at||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(E||F!==b)&&Fv(s,m,u,b),js=!1;var X=s.memoizedState;m.state=X,cu(s,u,m,f),uu(),F=s.memoizedState,E||X!==F||js?(typeof ct=="function"&&(jg(s,o,ct,u),F=s.memoizedState),(R=js||Gv(s,o,R,u,X,F,b))?(at||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(s.flags|=4194308)):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=F),m.props=u,m.state=F,m.context=b,u=R):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{m=s.stateNode,Ag(i,s),b=s.memoizedProps,at=ja(o,b),m.props=at,ct=s.pendingProps,X=m.context,F=o.contextType,R=Co,typeof F=="object"&&F!==null&&(R=$e(F)),E=o.getDerivedStateFromProps,(F=typeof E=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(b!==ct||X!==R)&&Fv(s,m,u,R),js=!1,X=s.memoizedState,m.state=X,cu(s,u,m,f),uu();var Q=s.memoizedState;b!==ct||X!==Q||js||i!==null&&i.dependencies!==null&&rf(i.dependencies)?(typeof E=="function"&&(jg(s,o,E,u),Q=s.memoizedState),(at=js||Gv(s,o,at,u,X,Q,R)||i!==null&&i.dependencies!==null&&rf(i.dependencies))?(F||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(u,Q,R),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(u,Q,R)),typeof m.componentDidUpdate=="function"&&(s.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof m.componentDidUpdate!="function"||b===i.memoizedProps&&X===i.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||b===i.memoizedProps&&X===i.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=Q),m.props=u,m.state=Q,m.context=R,u=at):(typeof m.componentDidUpdate!="function"||b===i.memoizedProps&&X===i.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||b===i.memoizedProps&&X===i.memoizedState||(s.flags|=1024),u=!1)}return m=u,Tf(i,s),u=(s.flags&128)!==0,m||u?(m=s.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:m.render(),s.flags|=1,i!==null&&u?(s.child=_o(s,i.child,null,f),s.child=_o(s,null,o,f)):Le(i,s,o,f),s.memoizedState=m.state,i=s.child):i=Yr(i,s,f),i}function cw(i,s,o,u){return eu(),s.flags|=256,Le(i,s,o,u),s.child}var Fg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Xg(i){return{baseLanes:i,cachePool:Z0()}}function Zg(i,s,o){return i=i!==null?i.childLanes&~o:0,s&&(i|=Nn),i}function fw(i,s,o){var u=s.pendingProps,f=!1,m=(s.flags&128)!==0,b;if((b=m)||(b=i!==null&&i.memoizedState===null?!1:(De.current&2)!==0),b&&(f=!0,s.flags&=-129),b=(s.flags&32)!==0,s.flags&=-33,i===null){if(Yt){if(f?Fs(s):Xs(),Yt){var E=he,R;if(R=E){t:{for(R=E,E=lr;R.nodeType!==8;){if(!E){E=null;break t}if(R=Gn(R.nextSibling),R===null){E=null;break t}}E=R}E!==null?(s.memoizedState={dehydrated:E,treeContext:Ua!==null?{id:Jr,overflow:$r}:null,retryLane:536870912,hydrationErrors:null},R=ln(18,null,null,0),R.stateNode=E,R.return=s,s.child=R,Ge=s,he=null,R=!0):R=!1}R||qa(s)}if(E=s.memoizedState,E!==null&&(E=E.dehydrated,E!==null))return Bm(E)?s.lanes=32:s.lanes=536870912,null;Kr(s)}return E=u.children,u=u.fallback,f?(Xs(),f=s.mode,E=Af({mode:"hidden",children:E},f),u=La(u,f,o,null),E.return=s,u.return=s,E.sibling=u,s.child=E,f=s.child,f.memoizedState=Xg(o),f.childLanes=Zg(i,b,o),s.memoizedState=Fg,u):(Fs(s),Qg(s,E))}if(R=i.memoizedState,R!==null&&(E=R.dehydrated,E!==null)){if(m)s.flags&256?(Fs(s),s.flags&=-257,s=Wg(i,s,o)):s.memoizedState!==null?(Xs(),s.child=i.child,s.flags|=128,s=null):(Xs(),f=u.fallback,E=s.mode,u=Af({mode:"visible",children:u.children},E),f=La(f,E,o,null),f.flags|=2,u.return=s,f.return=s,u.sibling=f,s.child=u,_o(s,i.child,null,o),u=s.child,u.memoizedState=Xg(o),u.childLanes=Zg(i,b,o),s.memoizedState=Fg,s=f);else if(Fs(s),Bm(E)){if(b=E.nextSibling&&E.nextSibling.dataset,b)var F=b.dgst;b=F,u=Error(r(419)),u.stack="",u.digest=b,nu({value:u,source:null,stack:null}),s=Wg(i,s,o)}else if(Oe||ru(i,s,o,!1),b=(o&i.childLanes)!==0,Oe||b){if(b=ie,b!==null&&(u=o&-o,u=(u&42)!==0?1:Ll(u),u=(u&(b.suspendedLanes|o))!==0?0:u,u!==0&&u!==R.retryLane))throw R.retryLane=u,ko(i,u),hn(b,i,u),nw;E.data==="$?"||pm(),s=Wg(i,s,o)}else E.data==="$?"?(s.flags|=192,s.child=i.child,s=null):(i=R.treeContext,he=Gn(E.nextSibling),Ge=s,Yt=!0,Pa=null,lr=!1,i!==null&&(Tn[An++]=Jr,Tn[An++]=$r,Tn[An++]=Ua,Jr=i.id,$r=i.overflow,Ua=s),s=Qg(s,u.children),s.flags|=4096);return s}return f?(Xs(),f=u.fallback,E=s.mode,R=i.child,F=R.sibling,u=qr(R,{mode:"hidden",children:u.children}),u.subtreeFlags=R.subtreeFlags&65011712,F!==null?f=qr(F,f):(f=La(f,E,o,null),f.flags|=2),f.return=s,u.return=s,u.sibling=f,s.child=u,u=f,f=s.child,E=i.child.memoizedState,E===null?E=Xg(o):(R=E.cachePool,R!==null?(F=Ce._currentValue,R=R.parent!==F?{parent:F,pool:F}:R):R=Z0(),E={baseLanes:E.baseLanes|o,cachePool:R}),f.memoizedState=E,f.childLanes=Zg(i,b,o),s.memoizedState=Fg,u):(Fs(s),o=i.child,i=o.sibling,o=qr(o,{mode:"visible",children:u.children}),o.return=s,o.sibling=null,i!==null&&(b=s.deletions,b===null?(s.deletions=[i],s.flags|=16):b.push(i)),s.child=o,s.memoizedState=null,o)}function Qg(i,s){return s=Af({mode:"visible",children:s},i.mode),s.return=i,i.child=s}function Af(i,s){return i=ln(22,i,null,s),i.lanes=0,i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},i}function Wg(i,s,o){return _o(s,i.child,null,o),i=Qg(s,s.pendingProps.children),i.flags|=2,s.memoizedState=null,i}function dw(i,s,o){i.lanes|=s;var u=i.alternate;u!==null&&(u.lanes|=s),pg(i.return,s,o)}function tm(i,s,o,u,f){var m=i.memoizedState;m===null?i.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:f}:(m.isBackwards=s,m.rendering=null,m.renderingStartTime=0,m.last=u,m.tail=o,m.tailMode=f)}function hw(i,s,o){var u=s.pendingProps,f=u.revealOrder,m=u.tail;if(Le(i,s,u.children,o),u=De.current,(u&2)!==0)u=u&1|2,s.flags|=128;else{if(i!==null&&(i.flags&128)!==0)t:for(i=s.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&dw(i,o,s);else if(i.tag===19)dw(i,o,s);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break t;for(;i.sibling===null;){if(i.return===null||i.return===s)break t;i=i.return}i.sibling.return=i.return,i=i.sibling}u&=1}switch(it(De,u),f){case"forwards":for(o=s.child,f=null;o!==null;)i=o.alternate,i!==null&&Sf(i)===null&&(f=o),o=o.sibling;o=f,o===null?(f=s.child,s.child=null):(f=o.sibling,o.sibling=null),tm(s,!1,f,o,m);break;case"backwards":for(o=null,f=s.child,s.child=null;f!==null;){if(i=f.alternate,i!==null&&Sf(i)===null){s.child=f;break}i=f.sibling,f.sibling=o,o=f,f=i}tm(s,!0,o,null,m);break;case"together":tm(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Yr(i,s,o){if(i!==null&&(s.dependencies=i.dependencies),ea|=s.lanes,(o&s.childLanes)===0)if(i!==null){if(ru(i,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(i!==null&&s.child!==i.child)throw Error(r(153));if(s.child!==null){for(i=s.child,o=qr(i,i.pendingProps),s.child=o,o.return=s;i.sibling!==null;)i=i.sibling,o=o.sibling=qr(i,i.pendingProps),o.return=s;o.sibling=null}return s.child}function em(i,s){return(i.lanes&s)!==0?!0:(i=i.dependencies,!!(i!==null&&rf(i)))}function KE(i,s,o){switch(s.tag){case 3:mt(s,s.stateNode.containerInfo),Vs(s,Ce,i.memoizedState.cache),eu();break;case 27:case 5:Jt(s);break;case 4:mt(s,s.stateNode.containerInfo);break;case 10:Vs(s,s.type,s.memoizedProps.value);break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(Fs(s),s.flags|=128,null):(o&s.child.childLanes)!==0?fw(i,s,o):(Fs(s),i=Yr(i,s,o),i!==null?i.sibling:null);Fs(s);break;case 19:var f=(i.flags&128)!==0;if(u=(o&s.childLanes)!==0,u||(ru(i,s,o,!1),u=(o&s.childLanes)!==0),f){if(u)return hw(i,s,o);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),it(De,De.current),u)break;return null;case 22:case 23:return s.lanes=0,aw(i,s,o);case 24:Vs(s,Ce,i.memoizedState.cache)}return Yr(i,s,o)}function gw(i,s,o){if(i!==null)if(i.memoizedProps!==s.pendingProps)Oe=!0;else{if(!em(i,o)&&(s.flags&128)===0)return Oe=!1,KE(i,s,o);Oe=(i.flags&131072)!==0}else Oe=!1,Yt&&(s.flags&1048576)!==0&&V0(s,nf,s.index);switch(s.lanes=0,s.tag){case 16:t:{i=s.pendingProps;var u=s.elementType,f=u._init;if(u=f(u._payload),s.type=u,typeof u=="function")cg(u)?(i=ja(u,i),s.tag=1,s=uw(null,s,u,i,o)):(s.tag=0,s=Gg(null,s,u,i,o));else{if(u!=null){if(f=u.$$typeof,f===O){s.tag=11,s=rw(null,s,u,i,o);break t}else if(f===J){s.tag=14,s=iw(null,s,u,i,o);break t}}throw s=M(u)||u,Error(r(306,s,""))}}return s;case 0:return Gg(i,s,s.type,s.pendingProps,o);case 1:return u=s.type,f=ja(u,s.pendingProps),uw(i,s,u,f,o);case 3:t:{if(mt(s,s.stateNode.containerInfo),i===null)throw Error(r(387));u=s.pendingProps;var m=s.memoizedState;f=m.element,Ag(i,s),cu(s,u,null,o);var b=s.memoizedState;if(u=b.cache,Vs(s,Ce,u),u!==m.cache&&vg(s,[Ce],o,!0),uu(),u=b.element,m.isDehydrated)if(m={element:u,isDehydrated:!1,cache:b.cache},s.updateQueue.baseState=m,s.memoizedState=m,s.flags&256){s=cw(i,s,u,o);break t}else if(u!==f){f=bn(Error(r(424)),s),nu(f),s=cw(i,s,u,o);break t}else{switch(i=s.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(he=Gn(i.firstChild),Ge=s,Yt=!0,Pa=null,lr=!0,o=Kv(s,null,u,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(eu(),u===f){s=Yr(i,s,o);break t}Le(i,s,u,o)}s=s.child}return s;case 26:return Tf(i,s),i===null?(o=vS(s.type,null,s.pendingProps,null))?s.memoizedState=o:Yt||(o=s.type,i=s.pendingProps,u=_f(ht.current).createElement(o),u[Ie]=s,u[Je]=i,_e(u,o,i),xe(u),s.stateNode=u):s.memoizedState=vS(s.type,i.memoizedProps,s.pendingProps,i.memoizedState),null;case 27:return Jt(s),i===null&&Yt&&(u=s.stateNode=mS(s.type,s.pendingProps,ht.current),Ge=s,lr=!0,f=he,sa(s.type)?(zm=f,he=Gn(u.firstChild)):he=f),Le(i,s,s.pendingProps.children,o),Tf(i,s),i===null&&(s.flags|=4194304),s.child;case 5:return i===null&&Yt&&((f=u=he)&&(u=SN(u,s.type,s.pendingProps,lr),u!==null?(s.stateNode=u,Ge=s,he=Gn(u.firstChild),lr=!1,f=!0):f=!1),f||qa(s)),Jt(s),f=s.type,m=s.pendingProps,b=i!==null?i.memoizedProps:null,u=m.children,Om(f,m)?u=null:b!==null&&Om(f,b)&&(s.flags|=32),s.memoizedState!==null&&(f=Ig(i,s,_E,null,null,o),Mu._currentValue=f),Tf(i,s),Le(i,s,u,o),s.child;case 6:return i===null&&Yt&&((i=o=he)&&(o=bN(o,s.pendingProps,lr),o!==null?(s.stateNode=o,Ge=s,he=null,i=!0):i=!1),i||qa(s)),null;case 13:return fw(i,s,o);case 4:return mt(s,s.stateNode.containerInfo),u=s.pendingProps,i===null?s.child=_o(s,null,u,o):Le(i,s,u,o),s.child;case 11:return rw(i,s,s.type,s.pendingProps,o);case 7:return Le(i,s,s.pendingProps,o),s.child;case 8:return Le(i,s,s.pendingProps.children,o),s.child;case 12:return Le(i,s,s.pendingProps.children,o),s.child;case 10:return u=s.pendingProps,Vs(s,s.type,u.value),Le(i,s,u.children,o),s.child;case 9:return f=s.type._context,u=s.pendingProps.children,$a(s),f=$e(f),u=u(f),s.flags|=1,Le(i,s,u,o),s.child;case 14:return iw(i,s,s.type,s.pendingProps,o);case 15:return sw(i,s,s.type,s.pendingProps,o);case 19:return hw(i,s,o);case 31:return u=s.pendingProps,o=s.mode,u={mode:u.mode,children:u.children},i===null?(o=Af(u,o),o.ref=s.ref,s.child=o,o.return=s,s=o):(o=qr(i.child,u),o.ref=s.ref,s.child=o,o.return=s,s=o),s;case 22:return aw(i,s,o);case 24:return $a(s),u=$e(Ce),i===null?(f=bg(),f===null&&(f=ie,m=wg(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=o),f=m),s.memoizedState={parent:u,cache:f},Tg(s),Vs(s,Ce,f)):((i.lanes&o)!==0&&(Ag(i,s),cu(s,null,null,o),uu()),f=i.memoizedState,m=s.memoizedState,f.parent!==u?(f={parent:u,cache:u},s.memoizedState=f,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=f),Vs(s,Ce,u)):(u=m.cache,Vs(s,Ce,u),u!==f.cache&&vg(s,[Ce],o,!0))),Le(i,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function Gr(i){i.flags|=4}function mw(i,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!TS(s)){if(s=En.current,s!==null&&((Ht&4194048)===Ht?ur!==null:(Ht&62914560)!==Ht&&(Ht&536870912)===0||s!==ur))throw ou=xg,Q0;i.flags|=8192}}function Ef(i,s){s!==null&&(i.flags|=4),i.flags&16384&&(s=i.tag!==22?Rc():536870912,i.lanes|=s,$o|=s)}function pu(i,s){if(!Yt)switch(i.tailMode){case"hidden":s=i.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?i.tail=null:o.sibling=null;break;case"collapsed":o=i.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s||i.tail===null?i.tail=null:i.tail.sibling=null:u.sibling=null}}function ce(i){var s=i.alternate!==null&&i.alternate.child===i.child,o=0,u=0;if(s)for(var f=i.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags&65011712,u|=f.flags&65011712,f.return=i,f=f.sibling;else for(f=i.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=i,f=f.sibling;return i.subtreeFlags|=u,i.childLanes=o,s}function YE(i,s,o){var u=s.pendingProps;switch(gg(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ce(s),null;case 1:return ce(s),null;case 3:return o=s.stateNode,u=null,i!==null&&(u=i.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),Vr(Ce),bt(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(i===null||i.child===null)&&(tu(s)?Gr(s):i===null||i.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Y0())),ce(s),null;case 26:return o=s.memoizedState,i===null?(Gr(s),o!==null?(ce(s),mw(s,o)):(ce(s),s.flags&=-16777217)):o?o!==i.memoizedState?(Gr(s),ce(s),mw(s,o)):(ce(s),s.flags&=-16777217):(i.memoizedProps!==u&&Gr(s),ce(s),s.flags&=-16777217),null;case 27:Rt(s),o=ht.current;var f=s.type;if(i!==null&&s.stateNode!=null)i.memoizedProps!==u&&Gr(s);else{if(!u){if(s.stateNode===null)throw Error(r(166));return ce(s),null}i=lt.current,tu(s)?j0(s):(i=mS(f,u,o),s.stateNode=i,Gr(s))}return ce(s),null;case 5:if(Rt(s),o=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==u&&Gr(s);else{if(!u){if(s.stateNode===null)throw Error(r(166));return ce(s),null}if(i=lt.current,tu(s))j0(s);else{switch(f=_f(ht.current),i){case 1:i=f.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:i=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":i=f.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":i=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":i=f.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof u.is=="string"?f.createElement("select",{is:u.is}):f.createElement("select"),u.multiple?i.multiple=!0:u.size&&(i.size=u.size);break;default:i=typeof u.is=="string"?f.createElement(o,{is:u.is}):f.createElement(o)}}i[Ie]=s,i[Je]=u;t:for(f=s.child;f!==null;){if(f.tag===5||f.tag===6)i.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===s)break t;for(;f.sibling===null;){if(f.return===null||f.return===s)break t;f=f.return}f.sibling.return=f.return,f=f.sibling}s.stateNode=i;t:switch(_e(i,o,u),o){case"button":case"input":case"select":case"textarea":i=!!u.autoFocus;break t;case"img":i=!0;break t;default:i=!1}i&&Gr(s)}}return ce(s),s.flags&=-16777217,null;case 6:if(i&&s.stateNode!=null)i.memoizedProps!==u&&Gr(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(r(166));if(i=ht.current,tu(s)){if(i=s.stateNode,o=s.memoizedProps,u=null,f=Ge,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}i[Ie]=s,i=!!(i.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||lS(i.nodeValue,o)),i||qa(s)}else i=_f(i).createTextNode(u),i[Ie]=s,s.stateNode=i}return ce(s),null;case 13:if(u=s.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(f=tu(s),u!==null&&u.dehydrated!==null){if(i===null){if(!f)throw Error(r(318));if(f=s.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[Ie]=s}else eu(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;ce(s),f=!1}else f=Y0(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=f),f=!0;if(!f)return s.flags&256?(Kr(s),s):(Kr(s),null)}if(Kr(s),(s.flags&128)!==0)return s.lanes=o,s;if(o=u!==null,i=i!==null&&i.memoizedState!==null,o){u=s.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool);var m=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),m!==f&&(u.flags|=2048)}return o!==i&&o&&(s.child.flags|=8192),Ef(s,s.updateQueue),ce(s),null;case 4:return bt(),i===null&&Nm(s.stateNode.containerInfo),ce(s),null;case 10:return Vr(s.type),ce(s),null;case 19:if(Z(De),f=s.memoizedState,f===null)return ce(s),null;if(u=(s.flags&128)!==0,m=f.rendering,m===null)if(u)pu(f,!1);else{if(ge!==0||i!==null&&(i.flags&128)!==0)for(i=s.child;i!==null;){if(m=Sf(i),m!==null){for(s.flags|=128,pu(f,!1),i=m.updateQueue,s.updateQueue=i,Ef(s,i),s.subtreeFlags=0,i=o,o=s.child;o!==null;)H0(o,i),o=o.sibling;return it(De,De.current&1|2),s.child}i=i.sibling}f.tail!==null&&be()>Cf&&(s.flags|=128,u=!0,pu(f,!1),s.lanes=4194304)}else{if(!u)if(i=Sf(m),i!==null){if(s.flags|=128,u=!0,i=i.updateQueue,s.updateQueue=i,Ef(s,i),pu(f,!0),f.tail===null&&f.tailMode==="hidden"&&!m.alternate&&!Yt)return ce(s),null}else 2*be()-f.renderingStartTime>Cf&&o!==536870912&&(s.flags|=128,u=!0,pu(f,!1),s.lanes=4194304);f.isBackwards?(m.sibling=s.child,s.child=m):(i=f.last,i!==null?i.sibling=m:s.child=m,f.last=m)}return f.tail!==null?(s=f.tail,f.rendering=s,f.tail=s.sibling,f.renderingStartTime=be(),s.sibling=null,i=De.current,it(De,u?i&1|2:i&1),s):(ce(s),null);case 22:case 23:return Kr(s),Cg(),u=s.memoizedState!==null,i!==null?i.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(o&536870912)!==0&&(s.flags&128)===0&&(ce(s),s.subtreeFlags&6&&(s.flags|=8192)):ce(s),o=s.updateQueue,o!==null&&Ef(s,o.retryQueue),o=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==o&&(s.flags|=2048),i!==null&&Z(Ha),null;case 24:return o=null,i!==null&&(o=i.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),Vr(Ce),ce(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function GE(i,s){switch(gg(s),s.tag){case 1:return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 3:return Vr(Ce),bt(),i=s.flags,(i&65536)!==0&&(i&128)===0?(s.flags=i&-65537|128,s):null;case 26:case 27:case 5:return Rt(s),null;case 13:if(Kr(s),i=s.memoizedState,i!==null&&i.dehydrated!==null){if(s.alternate===null)throw Error(r(340));eu()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 19:return Z(De),null;case 4:return bt(),null;case 10:return Vr(s.type),null;case 22:case 23:return Kr(s),Cg(),i!==null&&Z(Ha),i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 24:return Vr(Ce),null;case 25:return null;default:return null}}function yw(i,s){switch(gg(s),s.tag){case 3:Vr(Ce),bt();break;case 26:case 27:case 5:Rt(s);break;case 4:bt();break;case 13:Kr(s);break;case 19:Z(De);break;case 10:Vr(s.type);break;case 22:case 23:Kr(s),Cg(),i!==null&&Z(Ha);break;case 24:Vr(Ce)}}function vu(i,s){try{var o=s.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var f=u.next;o=f;do{if((o.tag&i)===i){u=void 0;var m=o.create,b=o.inst;u=m(),b.destroy=u}o=o.next}while(o!==f)}}catch(E){ne(s,s.return,E)}}function Zs(i,s,o){try{var u=s.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var m=f.next;u=m;do{if((u.tag&i)===i){var b=u.inst,E=b.destroy;if(E!==void 0){b.destroy=void 0,f=s;var R=o,F=E;try{F()}catch(at){ne(f,R,at)}}}u=u.next}while(u!==m)}}catch(at){ne(s,s.return,at)}}function pw(i){var s=i.updateQueue;if(s!==null){var o=i.stateNode;try{iv(s,o)}catch(u){ne(i,i.return,u)}}}function vw(i,s,o){o.props=ja(i.type,i.memoizedProps),o.state=i.memoizedState;try{o.componentWillUnmount()}catch(u){ne(i,s,u)}}function wu(i,s){try{var o=i.ref;if(o!==null){switch(i.tag){case 26:case 27:case 5:var u=i.stateNode;break;case 30:u=i.stateNode;break;default:u=i.stateNode}typeof o=="function"?i.refCleanup=o(u):o.current=u}}catch(f){ne(i,s,f)}}function cr(i,s){var o=i.ref,u=i.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(f){ne(i,s,f)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){ne(i,s,f)}else o.current=null}function ww(i){var s=i.type,o=i.memoizedProps,u=i.stateNode;try{t:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break t;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(f){ne(i,i.return,f)}}function nm(i,s,o){try{var u=i.stateNode;mN(u,i.type,o,s),u[Je]=s}catch(f){ne(i,i.return,f)}}function Sw(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&sa(i.type)||i.tag===4}function rm(i){t:for(;;){for(;i.sibling===null;){if(i.return===null||Sw(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&sa(i.type)||i.flags&2||i.child===null||i.tag===4)continue t;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function im(i,s,o){var u=i.tag;if(u===5||u===6)i=i.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(i,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(i),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=Uf));else if(u!==4&&(u===27&&sa(i.type)&&(o=i.stateNode,s=null),i=i.child,i!==null))for(im(i,s,o),i=i.sibling;i!==null;)im(i,s,o),i=i.sibling}function Nf(i,s,o){var u=i.tag;if(u===5||u===6)i=i.stateNode,s?o.insertBefore(i,s):o.appendChild(i);else if(u!==4&&(u===27&&sa(i.type)&&(o=i.stateNode),i=i.child,i!==null))for(Nf(i,s,o),i=i.sibling;i!==null;)Nf(i,s,o),i=i.sibling}function bw(i){var s=i.stateNode,o=i.memoizedProps;try{for(var u=i.type,f=s.attributes;f.length;)s.removeAttributeNode(f[0]);_e(s,u,o),s[Ie]=i,s[Je]=o}catch(m){ne(i,i.return,m)}}var Fr=!1,ve=!1,sm=!1,xw=typeof WeakSet=="function"?WeakSet:Set,Me=null;function FE(i,s){if(i=i.containerInfo,Dm=Vf,i=R0(i),rg(i)){if("selectionStart"in i)var o={start:i.selectionStart,end:i.selectionEnd};else t:{o=(o=i.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var f=u.anchorOffset,m=u.focusNode;u=u.focusOffset;try{o.nodeType,m.nodeType}catch{o=null;break t}var b=0,E=-1,R=-1,F=0,at=0,ct=i,X=null;e:for(;;){for(var Q;ct!==o||f!==0&&ct.nodeType!==3||(E=b+f),ct!==m||u!==0&&ct.nodeType!==3||(R=b+u),ct.nodeType===3&&(b+=ct.nodeValue.length),(Q=ct.firstChild)!==null;)X=ct,ct=Q;for(;;){if(ct===i)break e;if(X===o&&++F===f&&(E=b),X===m&&++at===u&&(R=b),(Q=ct.nextSibling)!==null)break;ct=X,X=ct.parentNode}ct=Q}o=E===-1||R===-1?null:{start:E,end:R}}else o=null}o=o||{start:0,end:0}}else o=null;for(Im={focusedElem:i,selectionRange:o},Vf=!1,Me=s;Me!==null;)if(s=Me,i=s.child,(s.subtreeFlags&1024)!==0&&i!==null)i.return=s,Me=i;else for(;Me!==null;){switch(s=Me,m=s.alternate,i=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&m!==null){i=void 0,o=s,f=m.memoizedProps,m=m.memoizedState,u=o.stateNode;try{var It=ja(o.type,f,o.elementType===o.type);i=u.getSnapshotBeforeUpdate(It,m),u.__reactInternalSnapshotBeforeUpdate=i}catch(kt){ne(o,o.return,kt)}}break;case 3:if((i&1024)!==0){if(i=s.stateNode.containerInfo,o=i.nodeType,o===9)Rm(i);else if(o===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Rm(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=s.sibling,i!==null){i.return=s.return,Me=i;break}Me=s.return}}function Tw(i,s,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:Qs(i,o),u&4&&vu(5,o);break;case 1:if(Qs(i,o),u&4)if(i=o.stateNode,s===null)try{i.componentDidMount()}catch(b){ne(o,o.return,b)}else{var f=ja(o.type,s.memoizedProps);s=s.memoizedState;try{i.componentDidUpdate(f,s,i.__reactInternalSnapshotBeforeUpdate)}catch(b){ne(o,o.return,b)}}u&64&&pw(o),u&512&&wu(o,o.return);break;case 3:if(Qs(i,o),u&64&&(i=o.updateQueue,i!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{iv(i,s)}catch(b){ne(o,o.return,b)}}break;case 27:s===null&&u&4&&bw(o);case 26:case 5:Qs(i,o),s===null&&u&4&&ww(o),u&512&&wu(o,o.return);break;case 12:Qs(i,o);break;case 13:Qs(i,o),u&4&&Nw(i,o),u&64&&(i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(o=iN.bind(null,o),xN(i,o))));break;case 22:if(u=o.memoizedState!==null||Fr,!u){s=s!==null&&s.memoizedState!==null||ve,f=Fr;var m=ve;Fr=u,(ve=s)&&!m?Ws(i,o,(o.subtreeFlags&8772)!==0):Qs(i,o),Fr=f,ve=m}break;case 30:break;default:Qs(i,o)}}function Aw(i){var s=i.alternate;s!==null&&(i.alternate=null,Aw(s)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(s=i.stateNode,s!==null&&Pl(s)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var se=null,We=!1;function Xr(i,s,o){for(o=o.child;o!==null;)Ew(i,s,o),o=o.sibling}function Ew(i,s,o){if(ke&&typeof ke.onCommitFiberUnmount=="function")try{ke.onCommitFiberUnmount(Sn,o)}catch{}switch(o.tag){case 26:ve||cr(o,s),Xr(i,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:ve||cr(o,s);var u=se,f=We;sa(o.type)&&(se=o.stateNode,We=!1),Xr(i,s,o),Cu(o.stateNode),se=u,We=f;break;case 5:ve||cr(o,s);case 6:if(u=se,f=We,se=null,Xr(i,s,o),se=u,We=f,se!==null)if(We)try{(se.nodeType===9?se.body:se.nodeName==="HTML"?se.ownerDocument.body:se).removeChild(o.stateNode)}catch(m){ne(o,s,m)}else try{se.removeChild(o.stateNode)}catch(m){ne(o,s,m)}break;case 18:se!==null&&(We?(i=se,hS(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,o.stateNode),Lu(i)):hS(se,o.stateNode));break;case 4:u=se,f=We,se=o.stateNode.containerInfo,We=!0,Xr(i,s,o),se=u,We=f;break;case 0:case 11:case 14:case 15:ve||Zs(2,o,s),ve||Zs(4,o,s),Xr(i,s,o);break;case 1:ve||(cr(o,s),u=o.stateNode,typeof u.componentWillUnmount=="function"&&vw(o,s,u)),Xr(i,s,o);break;case 21:Xr(i,s,o);break;case 22:ve=(u=ve)||o.memoizedState!==null,Xr(i,s,o),ve=u;break;default:Xr(i,s,o)}}function Nw(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Lu(i)}catch(o){ne(s,s.return,o)}}function XE(i){switch(i.tag){case 13:case 19:var s=i.stateNode;return s===null&&(s=i.stateNode=new xw),s;case 22:return i=i.stateNode,s=i._retryCache,s===null&&(s=i._retryCache=new xw),s;default:throw Error(r(435,i.tag))}}function am(i,s){var o=XE(i);s.forEach(function(u){var f=sN.bind(null,i,u);o.has(u)||(o.add(u),u.then(f,f))})}function un(i,s){var o=s.deletions;if(o!==null)for(var u=0;u<o.length;u++){var f=o[u],m=i,b=s,E=b;t:for(;E!==null;){switch(E.tag){case 27:if(sa(E.type)){se=E.stateNode,We=!1;break t}break;case 5:se=E.stateNode,We=!1;break t;case 3:case 4:se=E.stateNode.containerInfo,We=!0;break t}E=E.return}if(se===null)throw Error(r(160));Ew(m,b,f),se=null,We=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)kw(s,i),s=s.sibling}var Yn=null;function kw(i,s){var o=i.alternate,u=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:un(s,i),cn(i),u&4&&(Zs(3,i,i.return),vu(3,i),Zs(5,i,i.return));break;case 1:un(s,i),cn(i),u&512&&(ve||o===null||cr(o,o.return)),u&64&&Fr&&(i=i.updateQueue,i!==null&&(u=i.callbacks,u!==null&&(o=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var f=Yn;if(un(s,i),cn(i),u&512&&(ve||o===null||cr(o,o.return)),u&4){var m=o!==null?o.memoizedState:null;if(u=i.memoizedState,o===null)if(u===null)if(i.stateNode===null){t:{u=i.type,o=i.memoizedProps,f=f.ownerDocument||f;e:switch(u){case"title":m=f.getElementsByTagName("title")[0],(!m||m[Ia]||m[Ie]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(u),f.head.insertBefore(m,f.querySelector("head > title"))),_e(m,u,o),m[Ie]=i,xe(m),u=m;break t;case"link":var b=bS("link","href",f).get(u+(o.href||""));if(b){for(var E=0;E<b.length;E++)if(m=b[E],m.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&m.getAttribute("rel")===(o.rel==null?null:o.rel)&&m.getAttribute("title")===(o.title==null?null:o.title)&&m.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){b.splice(E,1);break e}}m=f.createElement(u),_e(m,u,o),f.head.appendChild(m);break;case"meta":if(b=bS("meta","content",f).get(u+(o.content||""))){for(E=0;E<b.length;E++)if(m=b[E],m.getAttribute("content")===(o.content==null?null:""+o.content)&&m.getAttribute("name")===(o.name==null?null:o.name)&&m.getAttribute("property")===(o.property==null?null:o.property)&&m.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&m.getAttribute("charset")===(o.charSet==null?null:o.charSet)){b.splice(E,1);break e}}m=f.createElement(u),_e(m,u,o),f.head.appendChild(m);break;default:throw Error(r(468,u))}m[Ie]=i,xe(m),u=m}i.stateNode=u}else xS(f,i.type,i.stateNode);else i.stateNode=SS(f,u,i.memoizedProps);else m!==u?(m===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):m.count--,u===null?xS(f,i.type,i.stateNode):SS(f,u,i.memoizedProps)):u===null&&i.stateNode!==null&&nm(i,i.memoizedProps,o.memoizedProps)}break;case 27:un(s,i),cn(i),u&512&&(ve||o===null||cr(o,o.return)),o!==null&&u&4&&nm(i,i.memoizedProps,o.memoizedProps);break;case 5:if(un(s,i),cn(i),u&512&&(ve||o===null||cr(o,o.return)),i.flags&32){f=i.stateNode;try{So(f,"")}catch(Q){ne(i,i.return,Q)}}u&4&&i.stateNode!=null&&(f=i.memoizedProps,nm(i,f,o!==null?o.memoizedProps:f)),u&1024&&(sm=!0);break;case 6:if(un(s,i),cn(i),u&4){if(i.stateNode===null)throw Error(r(162));u=i.memoizedProps,o=i.stateNode;try{o.nodeValue=u}catch(Q){ne(i,i.return,Q)}}break;case 3:if(Jf=null,f=Yn,Yn=Pf(s.containerInfo),un(s,i),Yn=f,cn(i),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Lu(s.containerInfo)}catch(Q){ne(i,i.return,Q)}sm&&(sm=!1,Cw(i));break;case 4:u=Yn,Yn=Pf(i.stateNode.containerInfo),un(s,i),cn(i),Yn=u;break;case 12:un(s,i),cn(i);break;case 13:un(s,i),cn(i),i.child.flags&8192&&i.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(dm=be()),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,am(i,u)));break;case 22:f=i.memoizedState!==null;var R=o!==null&&o.memoizedState!==null,F=Fr,at=ve;if(Fr=F||f,ve=at||R,un(s,i),ve=at,Fr=F,cn(i),u&8192)t:for(s=i.stateNode,s._visibility=f?s._visibility&-2:s._visibility|1,f&&(o===null||R||Fr||ve||Ka(i)),o=null,s=i;;){if(s.tag===5||s.tag===26){if(o===null){R=o=s;try{if(m=R.stateNode,f)b=m.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{E=R.stateNode;var ct=R.memoizedProps.style,X=ct!=null&&ct.hasOwnProperty("display")?ct.display:null;E.style.display=X==null||typeof X=="boolean"?"":(""+X).trim()}}catch(Q){ne(R,R.return,Q)}}}else if(s.tag===6){if(o===null){R=s;try{R.stateNode.nodeValue=f?"":R.memoizedProps}catch(Q){ne(R,R.return,Q)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===i)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break t;for(;s.sibling===null;){if(s.return===null||s.return===i)break t;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=i.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,am(i,o))));break;case 19:un(s,i),cn(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,am(i,u)));break;case 30:break;case 21:break;default:un(s,i),cn(i)}}function cn(i){var s=i.flags;if(s&2){try{for(var o,u=i.return;u!==null;){if(Sw(u)){o=u;break}u=u.return}if(o==null)throw Error(r(160));switch(o.tag){case 27:var f=o.stateNode,m=rm(i);Nf(i,m,f);break;case 5:var b=o.stateNode;o.flags&32&&(So(b,""),o.flags&=-33);var E=rm(i);Nf(i,E,b);break;case 3:case 4:var R=o.stateNode.containerInfo,F=rm(i);im(i,F,R);break;default:throw Error(r(161))}}catch(at){ne(i,i.return,at)}i.flags&=-3}s&4096&&(i.flags&=-4097)}function Cw(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var s=i;Cw(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),i=i.sibling}}function Qs(i,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)Tw(i,s.alternate,s),s=s.sibling}function Ka(i){for(i=i.child;i!==null;){var s=i;switch(s.tag){case 0:case 11:case 14:case 15:Zs(4,s,s.return),Ka(s);break;case 1:cr(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&vw(s,s.return,o),Ka(s);break;case 27:Cu(s.stateNode);case 26:case 5:cr(s,s.return),Ka(s);break;case 22:s.memoizedState===null&&Ka(s);break;case 30:Ka(s);break;default:Ka(s)}i=i.sibling}}function Ws(i,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,f=i,m=s,b=m.flags;switch(m.tag){case 0:case 11:case 15:Ws(f,m,o),vu(4,m);break;case 1:if(Ws(f,m,o),u=m,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(F){ne(u,u.return,F)}if(u=m,f=u.updateQueue,f!==null){var E=u.stateNode;try{var R=f.shared.hiddenCallbacks;if(R!==null)for(f.shared.hiddenCallbacks=null,f=0;f<R.length;f++)rv(R[f],E)}catch(F){ne(u,u.return,F)}}o&&b&64&&pw(m),wu(m,m.return);break;case 27:bw(m);case 26:case 5:Ws(f,m,o),o&&u===null&&b&4&&ww(m),wu(m,m.return);break;case 12:Ws(f,m,o);break;case 13:Ws(f,m,o),o&&b&4&&Nw(f,m);break;case 22:m.memoizedState===null&&Ws(f,m,o),wu(m,m.return);break;case 30:break;default:Ws(f,m,o)}s=s.sibling}}function om(i,s){var o=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),i=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(i=s.memoizedState.cachePool.pool),i!==o&&(i!=null&&i.refCount++,o!=null&&iu(o))}function lm(i,s){i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&iu(i))}function fr(i,s,o,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Dw(i,s,o,u),s=s.sibling}function Dw(i,s,o,u){var f=s.flags;switch(s.tag){case 0:case 11:case 15:fr(i,s,o,u),f&2048&&vu(9,s);break;case 1:fr(i,s,o,u);break;case 3:fr(i,s,o,u),f&2048&&(i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&iu(i)));break;case 12:if(f&2048){fr(i,s,o,u),i=s.stateNode;try{var m=s.memoizedProps,b=m.id,E=m.onPostCommit;typeof E=="function"&&E(b,s.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(R){ne(s,s.return,R)}}else fr(i,s,o,u);break;case 13:fr(i,s,o,u);break;case 23:break;case 22:m=s.stateNode,b=s.alternate,s.memoizedState!==null?m._visibility&2?fr(i,s,o,u):Su(i,s):m._visibility&2?fr(i,s,o,u):(m._visibility|=2,Po(i,s,o,u,(s.subtreeFlags&10256)!==0)),f&2048&&om(b,s);break;case 24:fr(i,s,o,u),f&2048&&lm(s.alternate,s);break;default:fr(i,s,o,u)}}function Po(i,s,o,u,f){for(f=f&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var m=i,b=s,E=o,R=u,F=b.flags;switch(b.tag){case 0:case 11:case 15:Po(m,b,E,R,f),vu(8,b);break;case 23:break;case 22:var at=b.stateNode;b.memoizedState!==null?at._visibility&2?Po(m,b,E,R,f):Su(m,b):(at._visibility|=2,Po(m,b,E,R,f)),f&&F&2048&&om(b.alternate,b);break;case 24:Po(m,b,E,R,f),f&&F&2048&&lm(b.alternate,b);break;default:Po(m,b,E,R,f)}s=s.sibling}}function Su(i,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=i,u=s,f=u.flags;switch(u.tag){case 22:Su(o,u),f&2048&&om(u.alternate,u);break;case 24:Su(o,u),f&2048&&lm(u.alternate,u);break;default:Su(o,u)}s=s.sibling}}var bu=8192;function qo(i){if(i.subtreeFlags&bu)for(i=i.child;i!==null;)Iw(i),i=i.sibling}function Iw(i){switch(i.tag){case 26:qo(i),i.flags&bu&&i.memoizedState!==null&&zN(Yn,i.memoizedState,i.memoizedProps);break;case 5:qo(i);break;case 3:case 4:var s=Yn;Yn=Pf(i.stateNode.containerInfo),qo(i),Yn=s;break;case 22:i.memoizedState===null&&(s=i.alternate,s!==null&&s.memoizedState!==null?(s=bu,bu=16777216,qo(i),bu=s):qo(i));break;default:qo(i)}}function Ow(i){var s=i.alternate;if(s!==null&&(i=s.child,i!==null)){s.child=null;do s=i.sibling,i.sibling=null,i=s;while(i!==null)}}function xu(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];Me=u,Rw(u,i)}Ow(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Mw(i),i=i.sibling}function Mw(i){switch(i.tag){case 0:case 11:case 15:xu(i),i.flags&2048&&Zs(9,i,i.return);break;case 3:xu(i);break;case 12:xu(i);break;case 22:var s=i.stateNode;i.memoizedState!==null&&s._visibility&2&&(i.return===null||i.return.tag!==13)?(s._visibility&=-3,kf(i)):xu(i);break;default:xu(i)}}function kf(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];Me=u,Rw(u,i)}Ow(i)}for(i=i.child;i!==null;){switch(s=i,s.tag){case 0:case 11:case 15:Zs(8,s,s.return),kf(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,kf(s));break;default:kf(s)}i=i.sibling}}function Rw(i,s){for(;Me!==null;){var o=Me;switch(o.tag){case 0:case 11:case 15:Zs(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:iu(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,Me=u;else t:for(o=i;Me!==null;){u=Me;var f=u.sibling,m=u.return;if(Aw(u),u===o){Me=null;break t}if(f!==null){f.return=m,Me=f;break t}Me=m}}}var ZE={getCacheForType:function(i){var s=$e(Ce),o=s.data.get(i);return o===void 0&&(o=i(),s.data.set(i,o)),o}},QE=typeof WeakMap=="function"?WeakMap:Map,Ft=0,ie=null,Ut=null,Ht=0,Xt=0,fn=null,ta=!1,Jo=!1,um=!1,Zr=0,ge=0,ea=0,Ya=0,cm=0,Nn=0,$o=0,Tu=null,tn=null,fm=!1,dm=0,Cf=1/0,Df=null,na=null,Ue=0,ra=null,Ho=null,Vo=0,hm=0,gm=null,Bw=null,Au=0,mm=null;function dn(){if((Ft&2)!==0&&Ht!==0)return Ht&-Ht;if(I.T!==null){var i=Oo;return i!==0?i:xm()}return zc()}function zw(){Nn===0&&(Nn=(Ht&536870912)===0||Yt?Mc():536870912);var i=En.current;return i!==null&&(i.flags|=32),Nn}function hn(i,s,o){(i===ie&&(Xt===2||Xt===9)||i.cancelPendingCommit!==null)&&(jo(i,0),ia(i,Ht,Nn,!1)),Da(i,o),((Ft&2)===0||i!==ie)&&(i===ie&&((Ft&2)===0&&(Ya|=o),ge===4&&ia(i,Ht,Nn,!1)),dr(i))}function Lw(i,s,o){if((Ft&6)!==0)throw Error(r(327));var u=!o&&(s&124)===0&&(s&i.expiredLanes)===0||Ca(i,s),f=u?eN(i,s):vm(i,s,!0),m=u;do{if(f===0){Jo&&!u&&ia(i,s,0,!1);break}else{if(o=i.current.alternate,m&&!WE(o)){f=vm(i,s,!1),m=!1;continue}if(f===2){if(m=s,i.errorRecoveryDisabledLanes&m)var b=0;else b=i.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){s=b;t:{var E=i;f=Tu;var R=E.current.memoizedState.isDehydrated;if(R&&(jo(E,b).flags|=256),b=vm(E,b,!1),b!==2){if(um&&!R){E.errorRecoveryDisabledLanes|=m,Ya|=m,f=4;break t}m=tn,tn=f,m!==null&&(tn===null?tn=m:tn.push.apply(tn,m))}f=b}if(m=!1,f!==2)continue}}if(f===1){jo(i,0),ia(i,s,0,!0);break}t:{switch(u=i,m=f,m){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:ia(u,s,Nn,!ta);break t;case 2:tn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(f=dm+300-be(),10<f)){if(ia(u,s,Nn,!ta),mo(u,0,!0)!==0)break t;u.timeoutHandle=fS(Uw.bind(null,u,o,tn,Df,fm,s,Nn,Ya,$o,ta,m,2,-0,0),f);break t}Uw(u,o,tn,Df,fm,s,Nn,Ya,$o,ta,m,0,-0,0)}}break}while(!0);dr(i)}function Uw(i,s,o,u,f,m,b,E,R,F,at,ct,X,Q){if(i.timeoutHandle=-1,ct=s.subtreeFlags,(ct&8192||(ct&16785408)===16785408)&&(Ou={stylesheets:null,count:0,unsuspend:BN},Iw(s),ct=LN(),ct!==null)){i.cancelPendingCommit=ct(Vw.bind(null,i,s,m,o,u,f,b,E,R,at,1,X,Q)),ia(i,m,b,!F);return}Vw(i,s,m,o,u,f,b,E,R)}function WE(i){for(var s=i;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var f=o[u],m=f.getSnapshot;f=f.value;try{if(!on(m(),f))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function ia(i,s,o,u){s&=~cm,s&=~Ya,i.suspendedLanes|=s,i.pingedLanes&=~s,u&&(i.warmLanes|=s),u=i.expirationTimes;for(var f=s;0<f;){var m=31-Ye(f),b=1<<m;u[m]=-1,f&=~b}o!==0&&Bc(i,o,s)}function If(){return(Ft&6)===0?(Eu(0),!1):!0}function ym(){if(Ut!==null){if(Xt===0)var i=Ut.return;else i=Ut,Hr=Ja=null,Rg(i),Uo=null,mu=0,i=Ut;for(;i!==null;)yw(i.alternate,i),i=i.return;Ut=null}}function jo(i,s){var o=i.timeoutHandle;o!==-1&&(i.timeoutHandle=-1,pN(o)),o=i.cancelPendingCommit,o!==null&&(i.cancelPendingCommit=null,o()),ym(),ie=i,Ut=o=qr(i.current,null),Ht=s,Xt=0,fn=null,ta=!1,Jo=Ca(i,s),um=!1,$o=Nn=cm=Ya=ea=ge=0,tn=Tu=null,fm=!1,(s&8)!==0&&(s|=s&32);var u=i.entangledLanes;if(u!==0)for(i=i.entanglements,u&=s;0<u;){var f=31-Ye(u),m=1<<f;s|=i[f],u&=~m}return Zr=s,Zc(),o}function _w(i,s){zt=null,I.H=pf,s===au||s===of?(s=ev(),Xt=3):s===Q0?(s=ev(),Xt=4):Xt=s===nw?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,fn=s,Ut===null&&(ge=1,xf(i,bn(s,i.current)))}function Pw(){var i=I.H;return I.H=pf,i===null?pf:i}function qw(){var i=I.A;return I.A=ZE,i}function pm(){ge=4,ta||(Ht&4194048)!==Ht&&En.current!==null||(Jo=!0),(ea&134217727)===0&&(Ya&134217727)===0||ie===null||ia(ie,Ht,Nn,!1)}function vm(i,s,o){var u=Ft;Ft|=2;var f=Pw(),m=qw();(ie!==i||Ht!==s)&&(Df=null,jo(i,s)),s=!1;var b=ge;t:do try{if(Xt!==0&&Ut!==null){var E=Ut,R=fn;switch(Xt){case 8:ym(),b=6;break t;case 3:case 2:case 9:case 6:En.current===null&&(s=!0);var F=Xt;if(Xt=0,fn=null,Ko(i,E,R,F),o&&Jo){b=0;break t}break;default:F=Xt,Xt=0,fn=null,Ko(i,E,R,F)}}tN(),b=ge;break}catch(at){_w(i,at)}while(!0);return s&&i.shellSuspendCounter++,Hr=Ja=null,Ft=u,I.H=f,I.A=m,Ut===null&&(ie=null,Ht=0,Zc()),b}function tN(){for(;Ut!==null;)Jw(Ut)}function eN(i,s){var o=Ft;Ft|=2;var u=Pw(),f=qw();ie!==i||Ht!==s?(Df=null,Cf=be()+500,jo(i,s)):Jo=Ca(i,s);t:do try{if(Xt!==0&&Ut!==null){s=Ut;var m=fn;e:switch(Xt){case 1:Xt=0,fn=null,Ko(i,s,m,1);break;case 2:case 9:if(W0(m)){Xt=0,fn=null,$w(s);break}s=function(){Xt!==2&&Xt!==9||ie!==i||(Xt=7),dr(i)},m.then(s,s);break t;case 3:Xt=7;break t;case 4:Xt=5;break t;case 7:W0(m)?(Xt=0,fn=null,$w(s)):(Xt=0,fn=null,Ko(i,s,m,7));break;case 5:var b=null;switch(Ut.tag){case 26:b=Ut.memoizedState;case 5:case 27:var E=Ut;if(!b||TS(b)){Xt=0,fn=null;var R=E.sibling;if(R!==null)Ut=R;else{var F=E.return;F!==null?(Ut=F,Of(F)):Ut=null}break e}}Xt=0,fn=null,Ko(i,s,m,5);break;case 6:Xt=0,fn=null,Ko(i,s,m,6);break;case 8:ym(),ge=6;break t;default:throw Error(r(462))}}nN();break}catch(at){_w(i,at)}while(!0);return Hr=Ja=null,I.H=u,I.A=f,Ft=o,Ut!==null?0:(ie=null,Ht=0,Zc(),ge)}function nN(){for(;Ut!==null&&!Zt();)Jw(Ut)}function Jw(i){var s=gw(i.alternate,i,Zr);i.memoizedProps=i.pendingProps,s===null?Of(i):Ut=s}function $w(i){var s=i,o=s.alternate;switch(s.tag){case 15:case 0:s=lw(o,s,s.pendingProps,s.type,void 0,Ht);break;case 11:s=lw(o,s,s.pendingProps,s.type.render,s.ref,Ht);break;case 5:Rg(s);default:yw(o,s),s=Ut=H0(s,Zr),s=gw(o,s,Zr)}i.memoizedProps=i.pendingProps,s===null?Of(i):Ut=s}function Ko(i,s,o,u){Hr=Ja=null,Rg(s),Uo=null,mu=0;var f=s.return;try{if(jE(i,f,s,o,Ht)){ge=1,xf(i,bn(o,i.current)),Ut=null;return}}catch(m){if(f!==null)throw Ut=f,m;ge=1,xf(i,bn(o,i.current)),Ut=null;return}s.flags&32768?(Yt||u===1?i=!0:Jo||(Ht&536870912)!==0?i=!1:(ta=i=!0,(u===2||u===9||u===3||u===6)&&(u=En.current,u!==null&&u.tag===13&&(u.flags|=16384))),Hw(s,i)):Of(s)}function Of(i){var s=i;do{if((s.flags&32768)!==0){Hw(s,ta);return}i=s.return;var o=YE(s.alternate,s,Zr);if(o!==null){Ut=o;return}if(s=s.sibling,s!==null){Ut=s;return}Ut=s=i}while(s!==null);ge===0&&(ge=5)}function Hw(i,s){do{var o=GE(i.alternate,i);if(o!==null){o.flags&=32767,Ut=o;return}if(o=i.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(i=i.sibling,i!==null)){Ut=i;return}Ut=i=o}while(i!==null);ge=6,Ut=null}function Vw(i,s,o,u,f,m,b,E,R){i.cancelPendingCommit=null;do Mf();while(Ue!==0);if((Ft&6)!==0)throw Error(r(327));if(s!==null){if(s===i.current)throw Error(r(177));if(m=s.lanes|s.childLanes,m|=lg,zh(i,o,m,b,E,R),i===ie&&(Ut=ie=null,Ht=0),Ho=s,ra=i,Vo=o,hm=m,gm=f,Bw=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,aN(Mr,function(){return Fw(),null})):(i.callbackNode=null,i.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=I.T,I.T=null,f=z.p,z.p=2,b=Ft,Ft|=4;try{FE(i,s,o)}finally{Ft=b,z.p=f,I.T=u}}Ue=1,jw(),Kw(),Yw()}}function jw(){if(Ue===1){Ue=0;var i=ra,s=Ho,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=I.T,I.T=null;var u=z.p;z.p=2;var f=Ft;Ft|=4;try{kw(s,i);var m=Im,b=R0(i.containerInfo),E=m.focusedElem,R=m.selectionRange;if(b!==E&&E&&E.ownerDocument&&M0(E.ownerDocument.documentElement,E)){if(R!==null&&rg(E)){var F=R.start,at=R.end;if(at===void 0&&(at=F),"selectionStart"in E)E.selectionStart=F,E.selectionEnd=Math.min(at,E.value.length);else{var ct=E.ownerDocument||document,X=ct&&ct.defaultView||window;if(X.getSelection){var Q=X.getSelection(),It=E.textContent.length,kt=Math.min(R.start,It),te=R.end===void 0?kt:Math.min(R.end,It);!Q.extend&&kt>te&&(b=te,te=kt,kt=b);var V=O0(E,kt),P=O0(E,te);if(V&&P&&(Q.rangeCount!==1||Q.anchorNode!==V.node||Q.anchorOffset!==V.offset||Q.focusNode!==P.node||Q.focusOffset!==P.offset)){var G=ct.createRange();G.setStart(V.node,V.offset),Q.removeAllRanges(),kt>te?(Q.addRange(G),Q.extend(P.node,P.offset)):(G.setEnd(P.node,P.offset),Q.addRange(G))}}}}for(ct=[],Q=E;Q=Q.parentNode;)Q.nodeType===1&&ct.push({element:Q,left:Q.scrollLeft,top:Q.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<ct.length;E++){var ut=ct[E];ut.element.scrollLeft=ut.left,ut.element.scrollTop=ut.top}}Vf=!!Dm,Im=Dm=null}finally{Ft=f,z.p=u,I.T=o}}i.current=s,Ue=2}}function Kw(){if(Ue===2){Ue=0;var i=ra,s=Ho,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=I.T,I.T=null;var u=z.p;z.p=2;var f=Ft;Ft|=4;try{Tw(i,s.alternate,s)}finally{Ft=f,z.p=u,I.T=o}}Ue=3}}function Yw(){if(Ue===4||Ue===3){Ue=0,ue();var i=ra,s=Ho,o=Vo,u=Bw;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Ue=5:(Ue=0,Ho=ra=null,Gw(i,i.pendingLanes));var f=i.pendingLanes;if(f===0&&(na=null),Ul(o),s=s.stateNode,ke&&typeof ke.onCommitFiberRoot=="function")try{ke.onCommitFiberRoot(Sn,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=I.T,f=z.p,z.p=2,I.T=null;try{for(var m=i.onRecoverableError,b=0;b<u.length;b++){var E=u[b];m(E.value,{componentStack:E.stack})}}finally{I.T=s,z.p=f}}(Vo&3)!==0&&Mf(),dr(i),f=i.pendingLanes,(o&4194090)!==0&&(f&42)!==0?i===mm?Au++:(Au=0,mm=i):Au=0,Eu(0)}}function Gw(i,s){(i.pooledCacheLanes&=s)===0&&(s=i.pooledCache,s!=null&&(i.pooledCache=null,iu(s)))}function Mf(i){return jw(),Kw(),Yw(),Fw()}function Fw(){if(Ue!==5)return!1;var i=ra,s=hm;hm=0;var o=Ul(Vo),u=I.T,f=z.p;try{z.p=32>o?32:o,I.T=null,o=gm,gm=null;var m=ra,b=Vo;if(Ue=0,Ho=ra=null,Vo=0,(Ft&6)!==0)throw Error(r(331));var E=Ft;if(Ft|=4,Mw(m.current),Dw(m,m.current,b,o),Ft=E,Eu(0,!1),ke&&typeof ke.onPostCommitFiberRoot=="function")try{ke.onPostCommitFiberRoot(Sn,m)}catch{}return!0}finally{z.p=f,I.T=u,Gw(i,s)}}function Xw(i,s,o){s=bn(o,s),s=Yg(i.stateNode,s,2),i=Ys(i,s,2),i!==null&&(Da(i,2),dr(i))}function ne(i,s,o){if(i.tag===3)Xw(i,i,o);else for(;s!==null;){if(s.tag===3){Xw(s,i,o);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(na===null||!na.has(u))){i=bn(o,i),o=tw(2),u=Ys(s,o,2),u!==null&&(ew(o,u,s,i),Da(u,2),dr(u));break}}s=s.return}}function wm(i,s,o){var u=i.pingCache;if(u===null){u=i.pingCache=new QE;var f=new Set;u.set(s,f)}else f=u.get(s),f===void 0&&(f=new Set,u.set(s,f));f.has(o)||(um=!0,f.add(o),i=rN.bind(null,i,s,o),s.then(i,i))}function rN(i,s,o){var u=i.pingCache;u!==null&&u.delete(s),i.pingedLanes|=i.suspendedLanes&o,i.warmLanes&=~o,ie===i&&(Ht&o)===o&&(ge===4||ge===3&&(Ht&62914560)===Ht&&300>be()-dm?(Ft&2)===0&&jo(i,0):cm|=o,$o===Ht&&($o=0)),dr(i)}function Zw(i,s){s===0&&(s=Rc()),i=ko(i,s),i!==null&&(Da(i,s),dr(i))}function iN(i){var s=i.memoizedState,o=0;s!==null&&(o=s.retryLane),Zw(i,o)}function sN(i,s){var o=0;switch(i.tag){case 13:var u=i.stateNode,f=i.memoizedState;f!==null&&(o=f.retryLane);break;case 19:u=i.stateNode;break;case 22:u=i.stateNode._retryCache;break;default:throw Error(r(314))}u!==null&&u.delete(s),Zw(i,o)}function aN(i,s){return Ot(i,s)}var Rf=null,Yo=null,Sm=!1,Bf=!1,bm=!1,Ga=0;function dr(i){i!==Yo&&i.next===null&&(Yo===null?Rf=Yo=i:Yo=Yo.next=i),Bf=!0,Sm||(Sm=!0,lN())}function Eu(i,s){if(!bm&&Bf){bm=!0;do for(var o=!1,u=Rf;u!==null;){if(i!==0){var f=u.pendingLanes;if(f===0)var m=0;else{var b=u.suspendedLanes,E=u.pingedLanes;m=(1<<31-Ye(42|i)+1)-1,m&=f&~(b&~E),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(o=!0,eS(u,m))}else m=Ht,m=mo(u,u===ie?m:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(m&3)===0||Ca(u,m)||(o=!0,eS(u,m));u=u.next}while(o);bm=!1}}function oN(){Qw()}function Qw(){Bf=Sm=!1;var i=0;Ga!==0&&(yN()&&(i=Ga),Ga=0);for(var s=be(),o=null,u=Rf;u!==null;){var f=u.next,m=Ww(u,s);m===0?(u.next=null,o===null?Rf=f:o.next=f,f===null&&(Yo=o)):(o=u,(i!==0||(m&3)!==0)&&(Bf=!0)),u=f}Eu(i)}function Ww(i,s){for(var o=i.suspendedLanes,u=i.pingedLanes,f=i.expirationTimes,m=i.pendingLanes&-62914561;0<m;){var b=31-Ye(m),E=1<<b,R=f[b];R===-1?((E&o)===0||(E&u)!==0)&&(f[b]=Bh(E,s)):R<=s&&(i.expiredLanes|=E),m&=~E}if(s=ie,o=Ht,o=mo(i,i===s?o:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u=i.callbackNode,o===0||i===s&&(Xt===2||Xt===9)||i.cancelPendingCommit!==null)return u!==null&&u!==null&&Ct(u),i.callbackNode=null,i.callbackPriority=0;if((o&3)===0||Ca(i,o)){if(s=o&-o,s===i.callbackPriority)return s;switch(u!==null&&Ct(u),Ul(o)){case 2:case 8:o=Na;break;case 32:o=Mr;break;case 268435456:o=_s;break;default:o=Mr}return u=tS.bind(null,i),o=Ot(o,u),i.callbackPriority=s,i.callbackNode=o,s}return u!==null&&u!==null&&Ct(u),i.callbackPriority=2,i.callbackNode=null,2}function tS(i,s){if(Ue!==0&&Ue!==5)return i.callbackNode=null,i.callbackPriority=0,null;var o=i.callbackNode;if(Mf()&&i.callbackNode!==o)return null;var u=Ht;return u=mo(i,i===ie?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u===0?null:(Lw(i,u,s),Ww(i,be()),i.callbackNode!=null&&i.callbackNode===o?tS.bind(null,i):null)}function eS(i,s){if(Mf())return null;Lw(i,s,!0)}function lN(){vN(function(){(Ft&6)!==0?Ot(Ea,oN):Qw()})}function xm(){return Ga===0&&(Ga=Mc()),Ga}function nS(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Vc(""+i)}function rS(i,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,i.id&&o.setAttribute("form",i.id),s.parentNode.insertBefore(o,s),i=new FormData(i),o.parentNode.removeChild(o),i}function uN(i,s,o,u,f){if(s==="submit"&&o&&o.stateNode===f){var m=nS((f[Je]||null).action),b=u.submitter;b&&(s=(s=b[Je]||null)?nS(s.formAction):b.getAttribute("formAction"),s!==null&&(m=s,b=null));var E=new Gc("action","action",null,u,f);i.push({event:E,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Ga!==0){var R=b?rS(f,b):new FormData(f);$g(o,{pending:!0,data:R,method:f.method,action:m},null,R)}}else typeof m=="function"&&(E.preventDefault(),R=b?rS(f,b):new FormData(f),$g(o,{pending:!0,data:R,method:f.method,action:m},m,R))},currentTarget:f}]})}}for(var Tm=0;Tm<og.length;Tm++){var Am=og[Tm],cN=Am.toLowerCase(),fN=Am[0].toUpperCase()+Am.slice(1);Kn(cN,"on"+fN)}Kn(L0,"onAnimationEnd"),Kn(U0,"onAnimationIteration"),Kn(_0,"onAnimationStart"),Kn("dblclick","onDoubleClick"),Kn("focusin","onFocus"),Kn("focusout","onBlur"),Kn(CE,"onTransitionRun"),Kn(DE,"onTransitionStart"),Kn(IE,"onTransitionCancel"),Kn(P0,"onTransitionEnd"),$s("onMouseEnter",["mouseout","mouseover"]),$s("onMouseLeave",["mouseout","mouseover"]),$s("onPointerEnter",["pointerout","pointerover"]),$s("onPointerLeave",["pointerout","pointerover"]),Lr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Lr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Lr("onBeforeInput",["compositionend","keypress","textInput","paste"]),Lr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Lr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Lr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Nu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),dN=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Nu));function iS(i,s){s=(s&4)!==0;for(var o=0;o<i.length;o++){var u=i[o],f=u.event;u=u.listeners;t:{var m=void 0;if(s)for(var b=u.length-1;0<=b;b--){var E=u[b],R=E.instance,F=E.currentTarget;if(E=E.listener,R!==m&&f.isPropagationStopped())break t;m=E,f.currentTarget=F;try{m(f)}catch(at){bf(at)}f.currentTarget=null,m=R}else for(b=0;b<u.length;b++){if(E=u[b],R=E.instance,F=E.currentTarget,E=E.listener,R!==m&&f.isPropagationStopped())break t;m=E,f.currentTarget=F;try{m(f)}catch(at){bf(at)}f.currentTarget=null,m=R}}}}function _t(i,s){var o=s[_l];o===void 0&&(o=s[_l]=new Set);var u=i+"__bubble";o.has(u)||(sS(s,i,2,!1),o.add(u))}function Em(i,s,o){var u=0;s&&(u|=4),sS(o,i,u,s)}var zf="_reactListening"+Math.random().toString(36).slice(2);function Nm(i){if(!i[zf]){i[zf]=!0,Uc.forEach(function(o){o!=="selectionchange"&&(dN.has(o)||Em(o,!1,i),Em(o,!0,i))});var s=i.nodeType===9?i:i.ownerDocument;s===null||s[zf]||(s[zf]=!0,Em("selectionchange",!1,s))}}function sS(i,s,o,u){switch(DS(s)){case 2:var f=PN;break;case 8:f=qN;break;default:f=qm}o=f.bind(null,s,o,i),f=void 0,!Gh||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),u?f!==void 0?i.addEventListener(s,o,{capture:!0,passive:f}):i.addEventListener(s,o,!0):f!==void 0?i.addEventListener(s,o,{passive:f}):i.addEventListener(s,o,!1)}function km(i,s,o,u,f){var m=u;if((s&1)===0&&(s&2)===0&&u!==null)t:for(;;){if(u===null)return;var b=u.tag;if(b===3||b===4){var E=u.stateNode.containerInfo;if(E===f)break;if(b===4)for(b=u.return;b!==null;){var R=b.tag;if((R===3||R===4)&&b.stateNode.containerInfo===f)return;b=b.return}for(;E!==null;){if(b=qs(E),b===null)return;if(R=b.tag,R===5||R===6||R===26||R===27){u=m=b;continue t}E=E.parentNode}}u=u.return}d0(function(){var F=m,at=Kh(o),ct=[];t:{var X=q0.get(i);if(X!==void 0){var Q=Gc,It=i;switch(i){case"keypress":if(Kc(o)===0)break t;case"keydown":case"keyup":Q=aE;break;case"focusin":It="focus",Q=Qh;break;case"focusout":It="blur",Q=Qh;break;case"beforeblur":case"afterblur":Q=Qh;break;case"click":if(o.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Q=m0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Q=GA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Q=uE;break;case L0:case U0:case _0:Q=ZA;break;case P0:Q=fE;break;case"scroll":case"scrollend":Q=KA;break;case"wheel":Q=hE;break;case"copy":case"cut":case"paste":Q=WA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Q=p0;break;case"toggle":case"beforetoggle":Q=mE}var kt=(s&4)!==0,te=!kt&&(i==="scroll"||i==="scrollend"),V=kt?X!==null?X+"Capture":null:X;kt=[];for(var P=F,G;P!==null;){var ut=P;if(G=ut.stateNode,ut=ut.tag,ut!==5&&ut!==26&&ut!==27||G===null||V===null||(ut=jl(P,V),ut!=null&&kt.push(ku(P,ut,G))),te)break;P=P.return}0<kt.length&&(X=new Q(X,It,null,o,at),ct.push({event:X,listeners:kt}))}}if((s&7)===0){t:{if(X=i==="mouseover"||i==="pointerover",Q=i==="mouseout"||i==="pointerout",X&&o!==jh&&(It=o.relatedTarget||o.fromElement)&&(qs(It)||It[Ps]))break t;if((Q||X)&&(X=at.window===at?at:(X=at.ownerDocument)?X.defaultView||X.parentWindow:window,Q?(It=o.relatedTarget||o.toElement,Q=F,It=It?qs(It):null,It!==null&&(te=l(It),kt=It.tag,It!==te||kt!==5&&kt!==27&&kt!==6)&&(It=null)):(Q=null,It=F),Q!==It)){if(kt=m0,ut="onMouseLeave",V="onMouseEnter",P="mouse",(i==="pointerout"||i==="pointerover")&&(kt=p0,ut="onPointerLeave",V="onPointerEnter",P="pointer"),te=Q==null?X:Js(Q),G=It==null?X:Js(It),X=new kt(ut,P+"leave",Q,o,at),X.target=te,X.relatedTarget=G,ut=null,qs(at)===F&&(kt=new kt(V,P+"enter",It,o,at),kt.target=G,kt.relatedTarget=te,ut=kt),te=ut,Q&&It)e:{for(kt=Q,V=It,P=0,G=kt;G;G=Go(G))P++;for(G=0,ut=V;ut;ut=Go(ut))G++;for(;0<P-G;)kt=Go(kt),P--;for(;0<G-P;)V=Go(V),G--;for(;P--;){if(kt===V||V!==null&&kt===V.alternate)break e;kt=Go(kt),V=Go(V)}kt=null}else kt=null;Q!==null&&aS(ct,X,Q,kt,!1),It!==null&&te!==null&&aS(ct,te,It,kt,!0)}}t:{if(X=F?Js(F):window,Q=X.nodeName&&X.nodeName.toLowerCase(),Q==="select"||Q==="input"&&X.type==="file")var wt=E0;else if(T0(X))if(N0)wt=EE;else{wt=TE;var Lt=xE}else Q=X.nodeName,!Q||Q.toLowerCase()!=="input"||X.type!=="checkbox"&&X.type!=="radio"?F&&Vh(F.elementType)&&(wt=E0):wt=AE;if(wt&&(wt=wt(i,F))){A0(ct,wt,o,at);break t}Lt&&Lt(i,X,F),i==="focusout"&&F&&X.type==="number"&&F.memoizedProps.value!=null&&Vl(X,"number",X.value)}switch(Lt=F?Js(F):window,i){case"focusin":(T0(Lt)||Lt.contentEditable==="true")&&(Ao=Lt,ig=F,Wl=null);break;case"focusout":Wl=ig=Ao=null;break;case"mousedown":sg=!0;break;case"contextmenu":case"mouseup":case"dragend":sg=!1,B0(ct,o,at);break;case"selectionchange":if(kE)break;case"keydown":case"keyup":B0(ct,o,at)}var xt;if(tg)t:{switch(i){case"compositionstart":var Dt="onCompositionStart";break t;case"compositionend":Dt="onCompositionEnd";break t;case"compositionupdate":Dt="onCompositionUpdate";break t}Dt=void 0}else To?b0(i,o)&&(Dt="onCompositionEnd"):i==="keydown"&&o.keyCode===229&&(Dt="onCompositionStart");Dt&&(v0&&o.locale!=="ko"&&(To||Dt!=="onCompositionStart"?Dt==="onCompositionEnd"&&To&&(xt=h0()):(Hs=at,Fh="value"in Hs?Hs.value:Hs.textContent,To=!0)),Lt=Lf(F,Dt),0<Lt.length&&(Dt=new y0(Dt,i,null,o,at),ct.push({event:Dt,listeners:Lt}),xt?Dt.data=xt:(xt=x0(o),xt!==null&&(Dt.data=xt)))),(xt=pE?vE(i,o):wE(i,o))&&(Dt=Lf(F,"onBeforeInput"),0<Dt.length&&(Lt=new y0("onBeforeInput","beforeinput",null,o,at),ct.push({event:Lt,listeners:Dt}),Lt.data=xt)),uN(ct,i,F,o,at)}iS(ct,s)})}function ku(i,s,o){return{instance:i,listener:s,currentTarget:o}}function Lf(i,s){for(var o=s+"Capture",u=[];i!==null;){var f=i,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=jl(i,o),f!=null&&u.unshift(ku(i,f,m)),f=jl(i,s),f!=null&&u.push(ku(i,f,m))),i.tag===3)return u;i=i.return}return[]}function Go(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function aS(i,s,o,u,f){for(var m=s._reactName,b=[];o!==null&&o!==u;){var E=o,R=E.alternate,F=E.stateNode;if(E=E.tag,R!==null&&R===u)break;E!==5&&E!==26&&E!==27||F===null||(R=F,f?(F=jl(o,m),F!=null&&b.unshift(ku(o,F,R))):f||(F=jl(o,m),F!=null&&b.push(ku(o,F,R)))),o=o.return}b.length!==0&&i.push({event:s,listeners:b})}var hN=/\r\n?/g,gN=/\u0000|\uFFFD/g;function oS(i){return(typeof i=="string"?i:""+i).replace(hN,`
`).replace(gN,"")}function lS(i,s){return s=oS(s),oS(i)===s}function Uf(){}function Wt(i,s,o,u,f,m){switch(o){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||So(i,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&So(i,""+u);break;case"className":po(i,"class",u);break;case"tabIndex":po(i,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":po(i,o,u);break;case"style":c0(i,u,m);break;case"data":if(s!=="object"){po(i,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||o!=="href")){i.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(o);break}u=Vc(""+u),i.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){i.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(o==="formAction"?(s!=="input"&&Wt(i,s,"name",f.name,f,null),Wt(i,s,"formEncType",f.formEncType,f,null),Wt(i,s,"formMethod",f.formMethod,f,null),Wt(i,s,"formTarget",f.formTarget,f,null)):(Wt(i,s,"encType",f.encType,f,null),Wt(i,s,"method",f.method,f,null),Wt(i,s,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(o);break}u=Vc(""+u),i.setAttribute(o,u);break;case"onClick":u!=null&&(i.onclick=Uf);break;case"onScroll":u!=null&&_t("scroll",i);break;case"onScrollEnd":u!=null&&_t("scrollend",i);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(r(60));i.innerHTML=o}}break;case"multiple":i.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":i.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){i.removeAttribute("xlink:href");break}o=Vc(""+u),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(o,""+u):i.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(o,""):i.removeAttribute(o);break;case"capture":case"download":u===!0?i.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(o,u):i.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?i.setAttribute(o,u):i.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?i.removeAttribute(o):i.setAttribute(o,u);break;case"popover":_t("beforetoggle",i),_t("toggle",i),yo(i,"popover",u);break;case"xlinkActuate":jn(i,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":jn(i,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":jn(i,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":jn(i,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":jn(i,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":jn(i,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":jn(i,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":jn(i,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":jn(i,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":yo(i,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=VA.get(o)||o,yo(i,o,u))}}function Cm(i,s,o,u,f,m){switch(o){case"style":c0(i,u,m);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(r(60));i.innerHTML=o}}break;case"children":typeof u=="string"?So(i,u):(typeof u=="number"||typeof u=="bigint")&&So(i,""+u);break;case"onScroll":u!=null&&_t("scroll",i);break;case"onScrollEnd":u!=null&&_t("scrollend",i);break;case"onClick":u!=null&&(i.onclick=Uf);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!_c.hasOwnProperty(o))t:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),s=o.slice(2,f?o.length-7:void 0),m=i[Je]||null,m=m!=null?m[o]:null,typeof m=="function"&&i.removeEventListener(s,m,f),typeof u=="function")){typeof m!="function"&&m!==null&&(o in i?i[o]=null:i.hasAttribute(o)&&i.removeAttribute(o)),i.addEventListener(s,u,f);break t}o in i?i[o]=u:u===!0?i.setAttribute(o,""):yo(i,o,u)}}}function _e(i,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":_t("error",i),_t("load",i);var u=!1,f=!1,m;for(m in o)if(o.hasOwnProperty(m)){var b=o[m];if(b!=null)switch(m){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:Wt(i,s,m,b,o,null)}}f&&Wt(i,s,"srcSet",o.srcSet,o,null),u&&Wt(i,s,"src",o.src,o,null);return;case"input":_t("invalid",i);var E=m=b=f=null,R=null,F=null;for(u in o)if(o.hasOwnProperty(u)){var at=o[u];if(at!=null)switch(u){case"name":f=at;break;case"type":b=at;break;case"checked":R=at;break;case"defaultChecked":F=at;break;case"value":m=at;break;case"defaultValue":E=at;break;case"children":case"dangerouslySetInnerHTML":if(at!=null)throw Error(r(137,s));break;default:Wt(i,s,u,at,o,null)}}Hc(i,m,E,R,F,b,f,!1),vo(i);return;case"select":_t("invalid",i),u=b=m=null;for(f in o)if(o.hasOwnProperty(f)&&(E=o[f],E!=null))switch(f){case"value":m=E;break;case"defaultValue":b=E;break;case"multiple":u=E;default:Wt(i,s,f,E,o,null)}s=m,o=b,i.multiple=!!u,s!=null?_r(i,!!u,s,!1):o!=null&&_r(i,!!u,o,!0);return;case"textarea":_t("invalid",i),m=f=u=null;for(b in o)if(o.hasOwnProperty(b)&&(E=o[b],E!=null))switch(b){case"value":u=E;break;case"defaultValue":f=E;break;case"children":m=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(r(91));break;default:Wt(i,s,b,E,o,null)}l0(i,u,f,m),vo(i);return;case"option":for(R in o)if(o.hasOwnProperty(R)&&(u=o[R],u!=null))switch(R){case"selected":i.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:Wt(i,s,R,u,o,null)}return;case"dialog":_t("beforetoggle",i),_t("toggle",i),_t("cancel",i),_t("close",i);break;case"iframe":case"object":_t("load",i);break;case"video":case"audio":for(u=0;u<Nu.length;u++)_t(Nu[u],i);break;case"image":_t("error",i),_t("load",i);break;case"details":_t("toggle",i);break;case"embed":case"source":case"link":_t("error",i),_t("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(F in o)if(o.hasOwnProperty(F)&&(u=o[F],u!=null))switch(F){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:Wt(i,s,F,u,o,null)}return;default:if(Vh(s)){for(at in o)o.hasOwnProperty(at)&&(u=o[at],u!==void 0&&Cm(i,s,at,u,o,void 0));return}}for(E in o)o.hasOwnProperty(E)&&(u=o[E],u!=null&&Wt(i,s,E,u,o,null))}function mN(i,s,o,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,b=null,E=null,R=null,F=null,at=null;for(Q in o){var ct=o[Q];if(o.hasOwnProperty(Q)&&ct!=null)switch(Q){case"checked":break;case"value":break;case"defaultValue":R=ct;default:u.hasOwnProperty(Q)||Wt(i,s,Q,null,u,ct)}}for(var X in u){var Q=u[X];if(ct=o[X],u.hasOwnProperty(X)&&(Q!=null||ct!=null))switch(X){case"type":m=Q;break;case"name":f=Q;break;case"checked":F=Q;break;case"defaultChecked":at=Q;break;case"value":b=Q;break;case"defaultValue":E=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(r(137,s));break;default:Q!==ct&&Wt(i,s,X,Q,u,ct)}}Ma(i,b,E,R,F,at,m,f);return;case"select":Q=b=E=X=null;for(m in o)if(R=o[m],o.hasOwnProperty(m)&&R!=null)switch(m){case"value":break;case"multiple":Q=R;default:u.hasOwnProperty(m)||Wt(i,s,m,null,u,R)}for(f in u)if(m=u[f],R=o[f],u.hasOwnProperty(f)&&(m!=null||R!=null))switch(f){case"value":X=m;break;case"defaultValue":E=m;break;case"multiple":b=m;default:m!==R&&Wt(i,s,f,m,u,R)}s=E,o=b,u=Q,X!=null?_r(i,!!o,X,!1):!!u!=!!o&&(s!=null?_r(i,!!o,s,!0):_r(i,!!o,o?[]:"",!1));return;case"textarea":Q=X=null;for(E in o)if(f=o[E],o.hasOwnProperty(E)&&f!=null&&!u.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:Wt(i,s,E,null,u,f)}for(b in u)if(f=u[b],m=o[b],u.hasOwnProperty(b)&&(f!=null||m!=null))switch(b){case"value":X=f;break;case"defaultValue":Q=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==m&&Wt(i,s,b,f,u,m)}o0(i,X,Q);return;case"option":for(var It in o)if(X=o[It],o.hasOwnProperty(It)&&X!=null&&!u.hasOwnProperty(It))switch(It){case"selected":i.selected=!1;break;default:Wt(i,s,It,null,u,X)}for(R in u)if(X=u[R],Q=o[R],u.hasOwnProperty(R)&&X!==Q&&(X!=null||Q!=null))switch(R){case"selected":i.selected=X&&typeof X!="function"&&typeof X!="symbol";break;default:Wt(i,s,R,X,u,Q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var kt in o)X=o[kt],o.hasOwnProperty(kt)&&X!=null&&!u.hasOwnProperty(kt)&&Wt(i,s,kt,null,u,X);for(F in u)if(X=u[F],Q=o[F],u.hasOwnProperty(F)&&X!==Q&&(X!=null||Q!=null))switch(F){case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(r(137,s));break;default:Wt(i,s,F,X,u,Q)}return;default:if(Vh(s)){for(var te in o)X=o[te],o.hasOwnProperty(te)&&X!==void 0&&!u.hasOwnProperty(te)&&Cm(i,s,te,void 0,u,X);for(at in u)X=u[at],Q=o[at],!u.hasOwnProperty(at)||X===Q||X===void 0&&Q===void 0||Cm(i,s,at,X,u,Q);return}}for(var V in o)X=o[V],o.hasOwnProperty(V)&&X!=null&&!u.hasOwnProperty(V)&&Wt(i,s,V,null,u,X);for(ct in u)X=u[ct],Q=o[ct],!u.hasOwnProperty(ct)||X===Q||X==null&&Q==null||Wt(i,s,ct,X,u,Q)}var Dm=null,Im=null;function _f(i){return i.nodeType===9?i:i.ownerDocument}function uS(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function cS(i,s){if(i===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&s==="foreignObject"?0:i}function Om(i,s){return i==="textarea"||i==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Mm=null;function yN(){var i=window.event;return i&&i.type==="popstate"?i===Mm?!1:(Mm=i,!0):(Mm=null,!1)}var fS=typeof setTimeout=="function"?setTimeout:void 0,pN=typeof clearTimeout=="function"?clearTimeout:void 0,dS=typeof Promise=="function"?Promise:void 0,vN=typeof queueMicrotask=="function"?queueMicrotask:typeof dS<"u"?function(i){return dS.resolve(null).then(i).catch(wN)}:fS;function wN(i){setTimeout(function(){throw i})}function sa(i){return i==="head"}function hS(i,s){var o=s,u=0,f=0;do{var m=o.nextSibling;if(i.removeChild(o),m&&m.nodeType===8)if(o=m.data,o==="/$"){if(0<u&&8>u){o=u;var b=i.ownerDocument;if(o&1&&Cu(b.documentElement),o&2&&Cu(b.body),o&4)for(o=b.head,Cu(o),b=o.firstChild;b;){var E=b.nextSibling,R=b.nodeName;b[Ia]||R==="SCRIPT"||R==="STYLE"||R==="LINK"&&b.rel.toLowerCase()==="stylesheet"||o.removeChild(b),b=E}}if(f===0){i.removeChild(m),Lu(s);return}f--}else o==="$"||o==="$?"||o==="$!"?f++:u=o.charCodeAt(0)-48;else u=0;o=m}while(o);Lu(s)}function Rm(i){var s=i.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Rm(o),Pl(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}i.removeChild(o)}}function SN(i,s,o,u){for(;i.nodeType===1;){var f=o;if(i.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(u){if(!i[Ia])switch(s){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(m=i.getAttribute("rel"),m==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(m!==f.rel||i.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||i.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||i.getAttribute("title")!==(f.title==null?null:f.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(m=i.getAttribute("src"),(m!==(f.src==null?null:f.src)||i.getAttribute("type")!==(f.type==null?null:f.type)||i.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(s==="input"&&i.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&i.getAttribute("name")===m)return i}else return i;if(i=Gn(i.nextSibling),i===null)break}return null}function bN(i,s,o){if(s==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!o||(i=Gn(i.nextSibling),i===null))return null;return i}function Bm(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState==="complete"}function xN(i,s){var o=i.ownerDocument;if(i.data!=="$?"||o.readyState==="complete")s();else{var u=function(){s(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),i._reactRetry=u}}function Gn(i){for(;i!=null;i=i.nextSibling){var s=i.nodeType;if(s===1||s===3)break;if(s===8){if(s=i.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return i}var zm=null;function gS(i){i=i.previousSibling;for(var s=0;i;){if(i.nodeType===8){var o=i.data;if(o==="$"||o==="$!"||o==="$?"){if(s===0)return i;s--}else o==="/$"&&s++}i=i.previousSibling}return null}function mS(i,s,o){switch(s=_f(o),i){case"html":if(i=s.documentElement,!i)throw Error(r(452));return i;case"head":if(i=s.head,!i)throw Error(r(453));return i;case"body":if(i=s.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}function Cu(i){for(var s=i.attributes;s.length;)i.removeAttributeNode(s[0]);Pl(i)}var kn=new Map,yS=new Set;function Pf(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Qr=z.d;z.d={f:TN,r:AN,D:EN,C:NN,L:kN,m:CN,X:IN,S:DN,M:ON};function TN(){var i=Qr.f(),s=If();return i||s}function AN(i){var s=Br(i);s!==null&&s.tag===5&&s.type==="form"?Lv(s):Qr.r(i)}var Fo=typeof document>"u"?null:document;function pS(i,s,o){var u=Fo;if(u&&typeof s=="string"&&s){var f=Xe(s);f='link[rel="'+i+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),yS.has(f)||(yS.add(f),i={rel:i,crossOrigin:o,href:s},u.querySelector(f)===null&&(s=u.createElement("link"),_e(s,"link",i),xe(s),u.head.appendChild(s)))}}function EN(i){Qr.D(i),pS("dns-prefetch",i,null)}function NN(i,s){Qr.C(i,s),pS("preconnect",i,s)}function kN(i,s,o){Qr.L(i,s,o);var u=Fo;if(u&&i&&s){var f='link[rel="preload"][as="'+Xe(s)+'"]';s==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+Xe(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+Xe(o.imageSizes)+'"]')):f+='[href="'+Xe(i)+'"]';var m=f;switch(s){case"style":m=Xo(i);break;case"script":m=Zo(i)}kn.has(m)||(i=p({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:i,as:s},o),kn.set(m,i),u.querySelector(f)!==null||s==="style"&&u.querySelector(Du(m))||s==="script"&&u.querySelector(Iu(m))||(s=u.createElement("link"),_e(s,"link",i),xe(s),u.head.appendChild(s)))}}function CN(i,s){Qr.m(i,s);var o=Fo;if(o&&i){var u=s&&typeof s.as=="string"?s.as:"script",f='link[rel="modulepreload"][as="'+Xe(u)+'"][href="'+Xe(i)+'"]',m=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=Zo(i)}if(!kn.has(m)&&(i=p({rel:"modulepreload",href:i},s),kn.set(m,i),o.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Iu(m)))return}u=o.createElement("link"),_e(u,"link",i),xe(u),o.head.appendChild(u)}}}function DN(i,s,o){Qr.S(i,s,o);var u=Fo;if(u&&i){var f=zr(u).hoistableStyles,m=Xo(i);s=s||"default";var b=f.get(m);if(!b){var E={loading:0,preload:null};if(b=u.querySelector(Du(m)))E.loading=5;else{i=p({rel:"stylesheet",href:i,"data-precedence":s},o),(o=kn.get(m))&&Lm(i,o);var R=b=u.createElement("link");xe(R),_e(R,"link",i),R._p=new Promise(function(F,at){R.onload=F,R.onerror=at}),R.addEventListener("load",function(){E.loading|=1}),R.addEventListener("error",function(){E.loading|=2}),E.loading|=4,qf(b,s,u)}b={type:"stylesheet",instance:b,count:1,state:E},f.set(m,b)}}}function IN(i,s){Qr.X(i,s);var o=Fo;if(o&&i){var u=zr(o).hoistableScripts,f=Zo(i),m=u.get(f);m||(m=o.querySelector(Iu(f)),m||(i=p({src:i,async:!0},s),(s=kn.get(f))&&Um(i,s),m=o.createElement("script"),xe(m),_e(m,"link",i),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(f,m))}}function ON(i,s){Qr.M(i,s);var o=Fo;if(o&&i){var u=zr(o).hoistableScripts,f=Zo(i),m=u.get(f);m||(m=o.querySelector(Iu(f)),m||(i=p({src:i,async:!0,type:"module"},s),(s=kn.get(f))&&Um(i,s),m=o.createElement("script"),xe(m),_e(m,"link",i),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(f,m))}}function vS(i,s,o,u){var f=(f=ht.current)?Pf(f):null;if(!f)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=Xo(o.href),o=zr(f).hoistableStyles,u=o.get(s),u||(u={type:"style",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){i=Xo(o.href);var m=zr(f).hoistableStyles,b=m.get(i);if(b||(f=f.ownerDocument||f,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(i,b),(m=f.querySelector(Du(i)))&&!m._p&&(b.instance=m,b.state.loading=5),kn.has(i)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},kn.set(i,o),m||MN(f,i,o,b.state))),s&&u===null)throw Error(r(528,""));return b}if(s&&u!==null)throw Error(r(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Zo(o),o=zr(f).hoistableScripts,u=o.get(s),u||(u={type:"script",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function Xo(i){return'href="'+Xe(i)+'"'}function Du(i){return'link[rel="stylesheet"]['+i+"]"}function wS(i){return p({},i,{"data-precedence":i.precedence,precedence:null})}function MN(i,s,o,u){i.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=i.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),_e(s,"link",o),xe(s),i.head.appendChild(s))}function Zo(i){return'[src="'+Xe(i)+'"]'}function Iu(i){return"script[async]"+i}function SS(i,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var u=i.querySelector('style[data-href~="'+Xe(o.href)+'"]');if(u)return s.instance=u,xe(u),u;var f=p({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(i.ownerDocument||i).createElement("style"),xe(u),_e(u,"style",f),qf(u,o.precedence,i),s.instance=u;case"stylesheet":f=Xo(o.href);var m=i.querySelector(Du(f));if(m)return s.state.loading|=4,s.instance=m,xe(m),m;u=wS(o),(f=kn.get(f))&&Lm(u,f),m=(i.ownerDocument||i).createElement("link"),xe(m);var b=m;return b._p=new Promise(function(E,R){b.onload=E,b.onerror=R}),_e(m,"link",u),s.state.loading|=4,qf(m,o.precedence,i),s.instance=m;case"script":return m=Zo(o.src),(f=i.querySelector(Iu(m)))?(s.instance=f,xe(f),f):(u=o,(f=kn.get(m))&&(u=p({},o),Um(u,f)),i=i.ownerDocument||i,f=i.createElement("script"),xe(f),_e(f,"link",u),i.head.appendChild(f),s.instance=f);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,qf(u,o.precedence,i));return s.instance}function qf(i,s,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,m=f,b=0;b<u.length;b++){var E=u[b];if(E.dataset.precedence===s)m=E;else if(m!==f)break}m?m.parentNode.insertBefore(i,m.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(i,s.firstChild))}function Lm(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.title==null&&(i.title=s.title)}function Um(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.integrity==null&&(i.integrity=s.integrity)}var Jf=null;function bS(i,s,o){if(Jf===null){var u=new Map,f=Jf=new Map;f.set(o,u)}else f=Jf,u=f.get(o),u||(u=new Map,f.set(o,u));if(u.has(i))return u;for(u.set(i,null),o=o.getElementsByTagName(i),f=0;f<o.length;f++){var m=o[f];if(!(m[Ia]||m[Ie]||i==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var b=m.getAttribute(s)||"";b=i+b;var E=u.get(b);E?E.push(m):u.set(b,[m])}}return u}function xS(i,s,o){i=i.ownerDocument||i,i.head.insertBefore(o,s==="title"?i.querySelector("head > title"):null)}function RN(i,s,o){if(o===1||s.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return i=s.disabled,typeof s.precedence=="string"&&i==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function TS(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}var Ou=null;function BN(){}function zN(i,s,o){if(Ou===null)throw Error(r(475));var u=Ou;if(s.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var f=Xo(o.href),m=i.querySelector(Du(f));if(m){i=m._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(u.count++,u=$f.bind(u),i.then(u,u)),s.state.loading|=4,s.instance=m,xe(m);return}m=i.ownerDocument||i,o=wS(o),(f=kn.get(f))&&Lm(o,f),m=m.createElement("link"),xe(m);var b=m;b._p=new Promise(function(E,R){b.onload=E,b.onerror=R}),_e(m,"link",o),s.instance=m}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(s,i),(i=s.state.preload)&&(s.state.loading&3)===0&&(u.count++,s=$f.bind(u),i.addEventListener("load",s),i.addEventListener("error",s))}}function LN(){if(Ou===null)throw Error(r(475));var i=Ou;return i.stylesheets&&i.count===0&&_m(i,i.stylesheets),0<i.count?function(s){var o=setTimeout(function(){if(i.stylesheets&&_m(i,i.stylesheets),i.unsuspend){var u=i.unsuspend;i.unsuspend=null,u()}},6e4);return i.unsuspend=s,function(){i.unsuspend=null,clearTimeout(o)}}:null}function $f(){if(this.count--,this.count===0){if(this.stylesheets)_m(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Hf=null;function _m(i,s){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Hf=new Map,s.forEach(UN,i),Hf=null,$f.call(i))}function UN(i,s){if(!(s.state.loading&4)){var o=Hf.get(i);if(o)var u=o.get(null);else{o=new Map,Hf.set(i,o);for(var f=i.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var b=f[m];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(o.set(b.dataset.precedence,b),u=b)}u&&o.set(null,u)}f=s.instance,b=f.getAttribute("data-precedence"),m=o.get(b)||u,m===u&&o.set(null,f),o.set(b,f),this.count++,u=$f.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),m?m.parentNode.insertBefore(f,m.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(f,i.firstChild)),s.state.loading|=4}}var Mu={$$typeof:N,Provider:null,Consumer:null,_currentValue:Y,_currentValue2:Y,_threadCount:0};function _N(i,s,o,u,f,m,b,E){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Bl(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bl(0),this.hiddenUpdates=Bl(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=E,this.incompleteTransitions=new Map}function AS(i,s,o,u,f,m,b,E,R,F,at,ct){return i=new _N(i,s,o,b,E,R,F,ct),s=1,m===!0&&(s|=24),m=ln(3,null,null,s),i.current=m,m.stateNode=i,s=wg(),s.refCount++,i.pooledCache=s,s.refCount++,m.memoizedState={element:u,isDehydrated:o,cache:s},Tg(m),i}function ES(i){return i?(i=Co,i):Co}function NS(i,s,o,u,f,m){f=ES(f),u.context===null?u.context=f:u.pendingContext=f,u=Ks(s),u.payload={element:o},m=m===void 0?null:m,m!==null&&(u.callback=m),o=Ys(i,u,s),o!==null&&(hn(o,i,s),lu(o,i,s))}function kS(i,s){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var o=i.retryLane;i.retryLane=o!==0&&o<s?o:s}}function Pm(i,s){kS(i,s),(i=i.alternate)&&kS(i,s)}function CS(i){if(i.tag===13){var s=ko(i,67108864);s!==null&&hn(s,i,67108864),Pm(i,67108864)}}var Vf=!0;function PN(i,s,o,u){var f=I.T;I.T=null;var m=z.p;try{z.p=2,qm(i,s,o,u)}finally{z.p=m,I.T=f}}function qN(i,s,o,u){var f=I.T;I.T=null;var m=z.p;try{z.p=8,qm(i,s,o,u)}finally{z.p=m,I.T=f}}function qm(i,s,o,u){if(Vf){var f=Jm(u);if(f===null)km(i,s,u,jf,o),IS(i,u);else if($N(f,i,s,o,u))u.stopPropagation();else if(IS(i,u),s&4&&-1<JN.indexOf(i)){for(;f!==null;){var m=Br(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var b=Rr(m.pendingLanes);if(b!==0){var E=m;for(E.pendingLanes|=2,E.entangledLanes|=2;b;){var R=1<<31-Ye(b);E.entanglements[1]|=R,b&=~R}dr(m),(Ft&6)===0&&(Cf=be()+500,Eu(0))}}break;case 13:E=ko(m,2),E!==null&&hn(E,m,2),If(),Pm(m,2)}if(m=Jm(u),m===null&&km(i,s,u,jf,o),m===f)break;f=m}f!==null&&u.stopPropagation()}else km(i,s,u,null,o)}}function Jm(i){return i=Kh(i),$m(i)}var jf=null;function $m(i){if(jf=null,i=qs(i),i!==null){var s=l(i);if(s===null)i=null;else{var o=s.tag;if(o===13){if(i=c(s),i!==null)return i;i=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null)}}return jf=i,null}function DS(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Us()){case Ea:return 2;case Na:return 8;case Mr:case ka:return 32;case _s:return 268435456;default:return 32}default:return 32}}var Hm=!1,aa=null,oa=null,la=null,Ru=new Map,Bu=new Map,ua=[],JN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function IS(i,s){switch(i){case"focusin":case"focusout":aa=null;break;case"dragenter":case"dragleave":oa=null;break;case"mouseover":case"mouseout":la=null;break;case"pointerover":case"pointerout":Ru.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Bu.delete(s.pointerId)}}function zu(i,s,o,u,f,m){return i===null||i.nativeEvent!==m?(i={blockedOn:s,domEventName:o,eventSystemFlags:u,nativeEvent:m,targetContainers:[f]},s!==null&&(s=Br(s),s!==null&&CS(s)),i):(i.eventSystemFlags|=u,s=i.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),i)}function $N(i,s,o,u,f){switch(s){case"focusin":return aa=zu(aa,i,s,o,u,f),!0;case"dragenter":return oa=zu(oa,i,s,o,u,f),!0;case"mouseover":return la=zu(la,i,s,o,u,f),!0;case"pointerover":var m=f.pointerId;return Ru.set(m,zu(Ru.get(m)||null,i,s,o,u,f)),!0;case"gotpointercapture":return m=f.pointerId,Bu.set(m,zu(Bu.get(m)||null,i,s,o,u,f)),!0}return!1}function OS(i){var s=qs(i.target);if(s!==null){var o=l(s);if(o!==null){if(s=o.tag,s===13){if(s=c(o),s!==null){i.blockedOn=s,Lh(i.priority,function(){if(o.tag===13){var u=dn();u=Ll(u);var f=ko(o,u);f!==null&&hn(f,o,u),Pm(o,u)}});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){i.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Kf(i){if(i.blockedOn!==null)return!1;for(var s=i.targetContainers;0<s.length;){var o=Jm(i.nativeEvent);if(o===null){o=i.nativeEvent;var u=new o.constructor(o.type,o);jh=u,o.target.dispatchEvent(u),jh=null}else return s=Br(o),s!==null&&CS(s),i.blockedOn=o,!1;s.shift()}return!0}function MS(i,s,o){Kf(i)&&o.delete(s)}function HN(){Hm=!1,aa!==null&&Kf(aa)&&(aa=null),oa!==null&&Kf(oa)&&(oa=null),la!==null&&Kf(la)&&(la=null),Ru.forEach(MS),Bu.forEach(MS)}function Yf(i,s){i.blockedOn===s&&(i.blockedOn=null,Hm||(Hm=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,HN)))}var Gf=null;function RS(i){Gf!==i&&(Gf=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Gf===i&&(Gf=null);for(var s=0;s<i.length;s+=3){var o=i[s],u=i[s+1],f=i[s+2];if(typeof u!="function"){if($m(u||o)===null)continue;break}var m=Br(o);m!==null&&(i.splice(s,3),s-=3,$g(m,{pending:!0,data:f,method:o.method,action:u},u,f))}}))}function Lu(i){function s(R){return Yf(R,i)}aa!==null&&Yf(aa,i),oa!==null&&Yf(oa,i),la!==null&&Yf(la,i),Ru.forEach(s),Bu.forEach(s);for(var o=0;o<ua.length;o++){var u=ua[o];u.blockedOn===i&&(u.blockedOn=null)}for(;0<ua.length&&(o=ua[0],o.blockedOn===null);)OS(o),o.blockedOn===null&&ua.shift();if(o=(i.ownerDocument||i).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var f=o[u],m=o[u+1],b=f[Je]||null;if(typeof m=="function")b||RS(o);else if(b){var E=null;if(m&&m.hasAttribute("formAction")){if(f=m,b=m[Je]||null)E=b.formAction;else if($m(f)!==null)continue}else E=b.action;typeof E=="function"?o[u+1]=E:(o.splice(u,3),u-=3),RS(o)}}}function Vm(i){this._internalRoot=i}Ff.prototype.render=Vm.prototype.render=function(i){var s=this._internalRoot;if(s===null)throw Error(r(409));var o=s.current,u=dn();NS(o,u,i,s,null,null)},Ff.prototype.unmount=Vm.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var s=i.containerInfo;NS(i.current,2,null,i,null,null),If(),s[Ps]=null}};function Ff(i){this._internalRoot=i}Ff.prototype.unstable_scheduleHydration=function(i){if(i){var s=zc();i={blockedOn:null,target:i,priority:s};for(var o=0;o<ua.length&&s!==0&&s<ua[o].priority;o++);ua.splice(o,0,i),o===0&&OS(i)}};var BS=t.version;if(BS!=="19.1.0")throw Error(r(527,BS,"19.1.0"));z.findDOMNode=function(i){var s=i._reactInternals;if(s===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=h(s),i=i!==null?g(i):null,i=i===null?null:i.stateNode,i};var VN={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:I,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xf.isDisabled&&Xf.supportsFiber)try{Sn=Xf.inject(VN),ke=Xf}catch{}}return _u.createRoot=function(i,s){if(!a(i))throw Error(r(299));var o=!1,u="",f=Xv,m=Zv,b=Qv,E=null;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(f=s.onUncaughtError),s.onCaughtError!==void 0&&(m=s.onCaughtError),s.onRecoverableError!==void 0&&(b=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(E=s.unstable_transitionCallbacks)),s=AS(i,1,!1,null,null,o,u,f,m,b,E,null),i[Ps]=s.current,Nm(i),new Vm(s)},_u.hydrateRoot=function(i,s,o){if(!a(i))throw Error(r(299));var u=!1,f="",m=Xv,b=Zv,E=Qv,R=null,F=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(m=o.onUncaughtError),o.onCaughtError!==void 0&&(b=o.onCaughtError),o.onRecoverableError!==void 0&&(E=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(R=o.unstable_transitionCallbacks),o.formState!==void 0&&(F=o.formState)),s=AS(i,1,!0,s,o??null,u,f,m,b,E,R,F),s.context=ES(null),o=s.current,u=dn(),u=Ll(u),f=Ks(u),f.callback=null,Ys(o,f,u),o=u,s.current.lanes=o,Da(s,o),dr(s),i[Ps]=s.current,Nm(i),new Ff(s)},_u.version="19.1.0",_u}var VS;function e2(){if(VS)return Km.exports;VS=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),Km.exports=t2(),Km.exports}var n2=e2(),Pt;(function(n){n[n.Canceled=1]="Canceled",n[n.Unknown=2]="Unknown",n[n.InvalidArgument=3]="InvalidArgument",n[n.DeadlineExceeded=4]="DeadlineExceeded",n[n.NotFound=5]="NotFound",n[n.AlreadyExists=6]="AlreadyExists",n[n.PermissionDenied=7]="PermissionDenied",n[n.ResourceExhausted=8]="ResourceExhausted",n[n.FailedPrecondition=9]="FailedPrecondition",n[n.Aborted=10]="Aborted",n[n.OutOfRange=11]="OutOfRange",n[n.Unimplemented=12]="Unimplemented",n[n.Internal=13]="Internal",n[n.Unavailable=14]="Unavailable",n[n.DataLoss=15]="DataLoss",n[n.Unauthenticated=16]="Unauthenticated"})(Pt||(Pt={}));function jS(n){const t=Pt[n];return typeof t!="string"?n.toString():t[0].toLowerCase()+t.substring(1).replace(/[A-Z]/g,e=>"_"+e.toLowerCase())}class ee extends Error{constructor(t,e=Pt.Unknown,r,a,l){super(r2(t,e)),this.name="ConnectError",Object.setPrototypeOf(this,new.target.prototype),this.rawMessage=t,this.code=e,this.metadata=new Headers(r??{}),this.details=a??[],this.cause=l}static from(t,e=Pt.Unknown){return t instanceof ee?t:t instanceof Error?t.name=="AbortError"?new ee(t.message,Pt.Canceled):new ee(t.message,e,void 0,void 0,t):new ee(String(t),e,void 0,void 0,t)}static[Symbol.hasInstance](t){return t instanceof Error?Object.getPrototypeOf(t)===ee.prototype?!0:t.name==="ConnectError"&&"code"in t&&typeof t.code=="number"&&"metadata"in t&&"details"in t&&Array.isArray(t.details)&&"rawMessage"in t&&typeof t.rawMessage=="string"&&"cause"in t:!1}findDetails(t){const e="typeName"in t?{findMessage:a=>a===t.typeName?t:void 0}:t,r=[];for(const a of this.details){if("getType"in a){e.findMessage(a.getType().typeName)&&r.push(a);continue}const l=e.findMessage(a.type);if(l)try{r.push(l.fromBinary(a.value))}catch{}}return r}}function r2(n,t){return n.length?`[${jS(t)}] ${n}`:`[${jS(t)}]`}function ye(n,t){if(!n)throw new Error(t)}const i2=34028234663852886e22,s2=-34028234663852886e22,a2=4294967295,o2=2147483647,l2=-2147483648;function hd(n){if(typeof n!="number")throw new Error("invalid int 32: "+typeof n);if(!Number.isInteger(n)||n>o2||n<l2)throw new Error("invalid int 32: "+n)}function py(n){if(typeof n!="number")throw new Error("invalid uint 32: "+typeof n);if(!Number.isInteger(n)||n>a2||n<0)throw new Error("invalid uint 32: "+n)}function X1(n){if(typeof n!="number")throw new Error("invalid float 32: "+typeof n);if(Number.isFinite(n)&&(n>i2||n<s2))throw new Error("invalid float 32: "+n)}const Z1=Symbol("@bufbuild/protobuf/enum-type");function u2(n){const t=n[Z1];return ye(t,"missing enum type on enum object"),t}function Q1(n,t,e,r){n[Z1]=W1(t,e.map(a=>({no:a.no,name:a.name,localName:n[a.no]})))}function W1(n,t,e){const r=Object.create(null),a=Object.create(null),l=[];for(const c of t){const d=tx(c);l.push(d),r[c.name]=d,a[c.no]=d}return{typeName:n,values:l,findName(c){return r[c]},findNumber(c){return a[c]}}}function c2(n,t,e){const r={};for(const a of t){const l=tx(a);r[l.localName]=l.no,r[l.no]=l.localName}return Q1(r,n,t),r}function tx(n){return"localName"in n?n:Object.assign(Object.assign({},n),{localName:n.name})}class dt{equals(t){return this.getType().runtime.util.equals(this.getType(),this,t)}clone(){return this.getType().runtime.util.clone(this)}fromBinary(t,e){const r=this.getType(),a=r.runtime.bin,l=a.makeReadOptions(e);return a.readMessage(this,l.readerFactory(t),t.byteLength,l),this}fromJson(t,e){const r=this.getType(),a=r.runtime.json,l=a.makeReadOptions(e);return a.readMessage(r,t,l,this),this}fromJsonString(t,e){let r;try{r=JSON.parse(t)}catch(a){throw new Error(`cannot decode ${this.getType().typeName} from JSON: ${a instanceof Error?a.message:String(a)}`)}return this.fromJson(r,e)}toBinary(t){const e=this.getType(),r=e.runtime.bin,a=r.makeWriteOptions(t),l=a.writerFactory();return r.writeMessage(this,l,a),l.finish()}toJson(t){const e=this.getType(),r=e.runtime.json,a=r.makeWriteOptions(t);return r.writeMessage(this,a)}toJsonString(t){var e;const r=this.toJson(t);return JSON.stringify(r,null,(e=t==null?void 0:t.prettySpaces)!==null&&e!==void 0?e:0)}toJSON(){return this.toJson({emitDefaultValues:!0})}getType(){return Object.getPrototypeOf(this).constructor}}function f2(n,t,e,r){var a;const l=(a=r==null?void 0:r.localName)!==null&&a!==void 0?a:t.substring(t.lastIndexOf(".")+1),c={[l]:function(d){n.util.initFields(this),n.util.initPartial(d,this)}}[l];return Object.setPrototypeOf(c.prototype,new dt),Object.assign(c,{runtime:n,typeName:t,fields:n.util.newFieldList(e),fromBinary(d,h){return new c().fromBinary(d,h)},fromJson(d,h){return new c().fromJson(d,h)},fromJsonString(d,h){return new c().fromJsonString(d,h)},equals(d,h){return n.util.equals(c,d,h)}}),c}function d2(){let n=0,t=0;for(let r=0;r<28;r+=7){let a=this.buf[this.pos++];if(n|=(a&127)<<r,(a&128)==0)return this.assertBounds(),[n,t]}let e=this.buf[this.pos++];if(n|=(e&15)<<28,t=(e&112)>>4,(e&128)==0)return this.assertBounds(),[n,t];for(let r=3;r<=31;r+=7){let a=this.buf[this.pos++];if(t|=(a&127)<<r,(a&128)==0)return this.assertBounds(),[n,t]}throw new Error("invalid varint")}function Zm(n,t,e){for(let l=0;l<28;l=l+7){const c=n>>>l,d=!(!(c>>>7)&&t==0),h=(d?c|128:c)&255;if(e.push(h),!d)return}const r=n>>>28&15|(t&7)<<4,a=t>>3!=0;if(e.push((a?r|128:r)&255),!!a){for(let l=3;l<31;l=l+7){const c=t>>>l,d=!!(c>>>7),h=(d?c|128:c)&255;if(e.push(h),!d)return}e.push(t>>>31&1)}}const gd=4294967296;function KS(n){const t=n[0]==="-";t&&(n=n.slice(1));const e=1e6;let r=0,a=0;function l(c,d){const h=Number(n.slice(c,d));a*=e,r=r*e+h,r>=gd&&(a=a+(r/gd|0),r=r%gd)}return l(-24,-18),l(-18,-12),l(-12,-6),l(-6),t?nx(r,a):Ap(r,a)}function h2(n,t){let e=Ap(n,t);const r=e.hi&2147483648;r&&(e=nx(e.lo,e.hi));const a=ex(e.lo,e.hi);return r?"-"+a:a}function ex(n,t){if({lo:n,hi:t}=g2(n,t),t<=2097151)return String(gd*t+n);const e=n&16777215,r=(n>>>24|t<<8)&16777215,a=t>>16&65535;let l=e+r*6777216+a*6710656,c=r+a*8147497,d=a*2;const h=1e7;return l>=h&&(c+=Math.floor(l/h),l%=h),c>=h&&(d+=Math.floor(c/h),c%=h),d.toString()+YS(c)+YS(l)}function g2(n,t){return{lo:n>>>0,hi:t>>>0}}function Ap(n,t){return{lo:n|0,hi:t|0}}function nx(n,t){return t=~t,n?n=~n+1:t+=1,Ap(n,t)}const YS=n=>{const t=String(n);return"0000000".slice(t.length)+t};function GS(n,t){if(n>=0){for(;n>127;)t.push(n&127|128),n=n>>>7;t.push(n)}else{for(let e=0;e<9;e++)t.push(n&127|128),n=n>>7;t.push(1)}}function m2(){let n=this.buf[this.pos++],t=n&127;if((n&128)==0)return this.assertBounds(),t;if(n=this.buf[this.pos++],t|=(n&127)<<7,(n&128)==0)return this.assertBounds(),t;if(n=this.buf[this.pos++],t|=(n&127)<<14,(n&128)==0)return this.assertBounds(),t;if(n=this.buf[this.pos++],t|=(n&127)<<21,(n&128)==0)return this.assertBounds(),t;n=this.buf[this.pos++],t|=(n&15)<<28;for(let e=5;(n&128)!==0&&e<10;e++)n=this.buf[this.pos++];if((n&128)!=0)throw new Error("invalid varint");return this.assertBounds(),t>>>0}var FS={};function y2(){const n=new DataView(new ArrayBuffer(8));if(typeof BigInt=="function"&&typeof n.getBigInt64=="function"&&typeof n.getBigUint64=="function"&&typeof n.setBigInt64=="function"&&typeof n.setBigUint64=="function"&&(typeof process!="object"||typeof FS!="object"||FS.BUF_BIGINT_DISABLE!=="1")){const a=BigInt("-9223372036854775808"),l=BigInt("9223372036854775807"),c=BigInt("0"),d=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(h){const g=typeof h=="bigint"?h:BigInt(h);if(g>l||g<a)throw new Error(`int64 invalid: ${h}`);return g},uParse(h){const g=typeof h=="bigint"?h:BigInt(h);if(g>d||g<c)throw new Error(`uint64 invalid: ${h}`);return g},enc(h){return n.setBigInt64(0,this.parse(h),!0),{lo:n.getInt32(0,!0),hi:n.getInt32(4,!0)}},uEnc(h){return n.setBigInt64(0,this.uParse(h),!0),{lo:n.getInt32(0,!0),hi:n.getInt32(4,!0)}},dec(h,g){return n.setInt32(0,h,!0),n.setInt32(4,g,!0),n.getBigInt64(0,!0)},uDec(h,g){return n.setInt32(0,h,!0),n.setInt32(4,g,!0),n.getBigUint64(0,!0)}}}const e=a=>ye(/^-?[0-9]+$/.test(a),`int64 invalid: ${a}`),r=a=>ye(/^[0-9]+$/.test(a),`uint64 invalid: ${a}`);return{zero:"0",supported:!1,parse(a){return typeof a!="string"&&(a=a.toString()),e(a),a},uParse(a){return typeof a!="string"&&(a=a.toString()),r(a),a},enc(a){return typeof a!="string"&&(a=a.toString()),e(a),KS(a)},uEnc(a){return typeof a!="string"&&(a=a.toString()),r(a),KS(a)},dec(a,l){return h2(a,l)},uDec(a,l){return ex(a,l)}}}const $t=y2();var st;(function(n){n[n.DOUBLE=1]="DOUBLE",n[n.FLOAT=2]="FLOAT",n[n.INT64=3]="INT64",n[n.UINT64=4]="UINT64",n[n.INT32=5]="INT32",n[n.FIXED64=6]="FIXED64",n[n.FIXED32=7]="FIXED32",n[n.BOOL=8]="BOOL",n[n.STRING=9]="STRING",n[n.BYTES=12]="BYTES",n[n.UINT32=13]="UINT32",n[n.SFIXED32=15]="SFIXED32",n[n.SFIXED64=16]="SFIXED64",n[n.SINT32=17]="SINT32",n[n.SINT64=18]="SINT64"})(st||(st={}));var Ta;(function(n){n[n.BIGINT=0]="BIGINT",n[n.STRING=1]="STRING"})(Ta||(Ta={}));function fa(n,t,e){if(t===e)return!0;if(n==st.BYTES){if(!(t instanceof Uint8Array)||!(e instanceof Uint8Array)||t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}switch(n){case st.UINT64:case st.FIXED64:case st.INT64:case st.SFIXED64:case st.SINT64:return t==e}return!1}function dl(n,t){switch(n){case st.BOOL:return!1;case st.UINT64:case st.FIXED64:case st.INT64:case st.SFIXED64:case st.SINT64:return t==0?$t.zero:"0";case st.DOUBLE:case st.FLOAT:return 0;case st.BYTES:return new Uint8Array(0);case st.STRING:return"";default:return 0}}function rx(n,t){switch(n){case st.BOOL:return t===!1;case st.STRING:return t==="";case st.BYTES:return t instanceof Uint8Array&&!t.byteLength;default:return t==0}}var Se;(function(n){n[n.Varint=0]="Varint",n[n.Bit64=1]="Bit64",n[n.LengthDelimited=2]="LengthDelimited",n[n.StartGroup=3]="StartGroup",n[n.EndGroup=4]="EndGroup",n[n.Bit32=5]="Bit32"})(Se||(Se={}));class p2{constructor(t){this.stack=[],this.textEncoder=t??new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let t=0;for(let a=0;a<this.chunks.length;a++)t+=this.chunks[a].length;let e=new Uint8Array(t),r=0;for(let a=0;a<this.chunks.length;a++)e.set(this.chunks[a],r),r+=this.chunks[a].length;return this.chunks=[],e}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let t=this.finish(),e=this.stack.pop();if(!e)throw new Error("invalid state, fork stack empty");return this.chunks=e.chunks,this.buf=e.buf,this.uint32(t.byteLength),this.raw(t)}tag(t,e){return this.uint32((t<<3|e)>>>0)}raw(t){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(t),this}uint32(t){for(py(t);t>127;)this.buf.push(t&127|128),t=t>>>7;return this.buf.push(t),this}int32(t){return hd(t),GS(t,this.buf),this}bool(t){return this.buf.push(t?1:0),this}bytes(t){return this.uint32(t.byteLength),this.raw(t)}string(t){let e=this.textEncoder.encode(t);return this.uint32(e.byteLength),this.raw(e)}float(t){X1(t);let e=new Uint8Array(4);return new DataView(e.buffer).setFloat32(0,t,!0),this.raw(e)}double(t){let e=new Uint8Array(8);return new DataView(e.buffer).setFloat64(0,t,!0),this.raw(e)}fixed32(t){py(t);let e=new Uint8Array(4);return new DataView(e.buffer).setUint32(0,t,!0),this.raw(e)}sfixed32(t){hd(t);let e=new Uint8Array(4);return new DataView(e.buffer).setInt32(0,t,!0),this.raw(e)}sint32(t){return hd(t),t=(t<<1^t>>31)>>>0,GS(t,this.buf),this}sfixed64(t){let e=new Uint8Array(8),r=new DataView(e.buffer),a=$t.enc(t);return r.setInt32(0,a.lo,!0),r.setInt32(4,a.hi,!0),this.raw(e)}fixed64(t){let e=new Uint8Array(8),r=new DataView(e.buffer),a=$t.uEnc(t);return r.setInt32(0,a.lo,!0),r.setInt32(4,a.hi,!0),this.raw(e)}int64(t){let e=$t.enc(t);return Zm(e.lo,e.hi,this.buf),this}sint64(t){let e=$t.enc(t),r=e.hi>>31,a=e.lo<<1^r,l=(e.hi<<1|e.lo>>>31)^r;return Zm(a,l,this.buf),this}uint64(t){let e=$t.uEnc(t);return Zm(e.lo,e.hi,this.buf),this}}class v2{constructor(t,e){this.varint64=d2,this.uint32=m2,this.buf=t,this.len=t.length,this.pos=0,this.view=new DataView(t.buffer,t.byteOffset,t.byteLength),this.textDecoder=e??new TextDecoder}tag(){let t=this.uint32(),e=t>>>3,r=t&7;if(e<=0||r<0||r>5)throw new Error("illegal tag: field no "+e+" wire type "+r);return[e,r]}skip(t,e){let r=this.pos;switch(t){case Se.Varint:for(;this.buf[this.pos++]&128;);break;case Se.Bit64:this.pos+=4;case Se.Bit32:this.pos+=4;break;case Se.LengthDelimited:let a=this.uint32();this.pos+=a;break;case Se.StartGroup:for(;;){const[l,c]=this.tag();if(c===Se.EndGroup){if(e!==void 0&&l!==e)throw new Error("invalid end group tag");break}this.skip(c,l)}break;default:throw new Error("cant skip wire type "+t)}return this.assertBounds(),this.buf.subarray(r,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let t=this.uint32();return t>>>1^-(t&1)}int64(){return $t.dec(...this.varint64())}uint64(){return $t.uDec(...this.varint64())}sint64(){let[t,e]=this.varint64(),r=-(t&1);return t=(t>>>1|(e&1)<<31)^r,e=e>>>1^r,$t.dec(t,e)}bool(){let[t,e]=this.varint64();return t!==0||e!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return $t.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return $t.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let t=this.uint32(),e=this.pos;return this.pos+=t,this.assertBounds(),this.buf.subarray(e,e+t)}string(){return this.textDecoder.decode(this.bytes())}}function w2(n,t,e,r){let a;return{typeName:t,extendee:e,get field(){if(!a){const l=typeof r=="function"?r():r;l.name=t.split(".").pop(),l.jsonName=`[${t}]`,a=n.util.newFieldList([l]).list()[0]}return a},runtime:n}}function ix(n){const t=n.field.localName,e=Object.create(null);return e[t]=S2(n),[e,()=>e[t]]}function S2(n){const t=n.field;if(t.repeated)return[];if(t.default!==void 0)return t.default;switch(t.kind){case"enum":return t.T.values[0].no;case"scalar":return dl(t.T,t.L);case"message":const e=t.T,r=new e;return e.fieldWrapper?e.fieldWrapper.unwrapField(r):r;case"map":throw"map fields are not allowed to be extensions"}}function b2(n,t){if(!t.repeated&&(t.kind=="enum"||t.kind=="scalar")){for(let e=n.length-1;e>=0;--e)if(n[e].no==t.no)return[n[e]];return[]}return n.filter(e=>e.no===t.no)}let As="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),fh=[];for(let n=0;n<As.length;n++)fh[As[n].charCodeAt(0)]=n;fh[45]=As.indexOf("+");fh[95]=As.indexOf("/");const Ep={dec(n){let t=n.length*3/4;n[n.length-2]=="="?t-=2:n[n.length-1]=="="&&(t-=1);let e=new Uint8Array(t),r=0,a=0,l,c=0;for(let d=0;d<n.length;d++){if(l=fh[n.charCodeAt(d)],l===void 0)switch(n[d]){case"=":a=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(a){case 0:c=l,a=1;break;case 1:e[r++]=c<<2|(l&48)>>4,c=l,a=2;break;case 2:e[r++]=(c&15)<<4|(l&60)>>2,c=l,a=3;break;case 3:e[r++]=(c&3)<<6|l,a=0;break}}if(a==1)throw Error("invalid base64 string.");return e.subarray(0,r)},enc(n){let t="",e=0,r,a=0;for(let l=0;l<n.length;l++)switch(r=n[l],e){case 0:t+=As[r>>2],a=(r&3)<<4,e=1;break;case 1:t+=As[a|r>>4],a=(r&15)<<2,e=2;break;case 2:t+=As[a|r>>6],t+=As[r&63],e=0;break}return e&&(t+=As[a],t+="=",e==1&&(t+="=")),t}};function x2(n,t,e){ax(t,n);const r=t.runtime.bin.makeReadOptions(e),a=b2(n.getType().runtime.bin.listUnknownFields(n),t.field),[l,c]=ix(t);for(const d of a)t.runtime.bin.readField(l,r.readerFactory(d.data),t.field,d.wireType,r);return c()}function T2(n,t,e,r){ax(t,n);const a=t.runtime.bin.makeReadOptions(r),l=t.runtime.bin.makeWriteOptions(r);if(sx(n,t)){const g=n.getType().runtime.bin.listUnknownFields(n).filter(p=>p.no!=t.field.no);n.getType().runtime.bin.discardUnknownFields(n);for(const p of g)n.getType().runtime.bin.onUnknownField(n,p.no,p.wireType,p.data)}const c=l.writerFactory();let d=t.field;!d.opt&&!d.repeated&&(d.kind=="enum"||d.kind=="scalar")&&(d=Object.assign(Object.assign({},t.field),{opt:!0})),t.runtime.bin.writeField(d,e,c,l);const h=a.readerFactory(c.finish());for(;h.pos<h.len;){const[g,p]=h.tag(),w=h.skip(p,g);n.getType().runtime.bin.onUnknownField(n,g,p,w)}}function sx(n,t){const e=n.getType();return t.extendee.typeName===e.typeName&&!!e.runtime.bin.listUnknownFields(n).find(r=>r.no==t.field.no)}function ax(n,t){ye(n.extendee.typeName==t.getType().typeName,`extension ${n.typeName} can only be applied to message ${n.extendee.typeName}`)}function ox(n,t){const e=n.localName;if(n.repeated)return t[e].length>0;if(n.oneof)return t[n.oneof.localName].case===e;switch(n.kind){case"enum":case"scalar":return n.opt||n.req?t[e]!==void 0:n.kind=="enum"?t[e]!==n.T.values[0].no:!rx(n.T,t[e]);case"message":return t[e]!==void 0;case"map":return Object.keys(t[e]).length>0}}function XS(n,t){const e=n.localName,r=!n.opt&&!n.req;if(n.repeated)t[e]=[];else if(n.oneof)t[n.oneof.localName]={case:void 0};else switch(n.kind){case"map":t[e]={};break;case"enum":t[e]=r?n.T.values[0].no:void 0;break;case"scalar":t[e]=r?dl(n.T,n.L):void 0;break;case"message":t[e]=void 0;break}}function Es(n,t){if(n===null||typeof n!="object"||!Object.getOwnPropertyNames(dt.prototype).every(r=>r in n&&typeof n[r]=="function"))return!1;const e=n.getType();return e===null||typeof e!="function"||!("typeName"in e)||typeof e.typeName!="string"?!1:t===void 0?!0:e.typeName==t.typeName}function lx(n,t){return Es(t)||!n.fieldWrapper?t:n.fieldWrapper.wrapField(t)}st.DOUBLE,st.FLOAT,st.INT64,st.UINT64,st.INT32,st.UINT32,st.BOOL,st.STRING,st.BYTES;const ZS={ignoreUnknownFields:!1},QS={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0};function A2(n){return n?Object.assign(Object.assign({},ZS),n):ZS}function E2(n){return n?Object.assign(Object.assign({},QS),n):QS}const Ad=Symbol(),md=Symbol();function N2(){return{makeReadOptions:A2,makeWriteOptions:E2,readMessage(n,t,e,r){if(t==null||Array.isArray(t)||typeof t!="object")throw new Error(`cannot decode message ${n.typeName} from JSON: ${gr(t)}`);r=r??new n;const a=new Map,l=e.typeRegistry;for(const[c,d]of Object.entries(t)){const h=n.fields.findJsonName(c);if(h){if(h.oneof){if(d===null&&h.kind=="scalar")continue;const g=a.get(h.oneof);if(g!==void 0)throw new Error(`cannot decode message ${n.typeName} from JSON: multiple keys for oneof "${h.oneof.name}" present: "${g}", "${c}"`);a.set(h.oneof,c)}WS(r,d,h,e,n)}else{let g=!1;if(l!=null&&l.findExtension&&c.startsWith("[")&&c.endsWith("]")){const p=l.findExtension(c.substring(1,c.length-1));if(p&&p.extendee.typeName==n.typeName){g=!0;const[w,v]=ix(p);WS(w,d,p.field,e,p),T2(r,p,v(),e)}}if(!g&&!e.ignoreUnknownFields)throw new Error(`cannot decode message ${n.typeName} from JSON: key "${c}" is unknown`)}}return r},writeMessage(n,t){const e=n.getType(),r={};let a;try{for(a of e.fields.byNumber()){if(!ox(a,n)){if(a.req)throw"required field not set";if(!t.emitDefaultValues||!C2(a))continue}const c=a.oneof?n[a.oneof.localName].value:n[a.localName],d=tb(a,c,t);d!==void 0&&(r[t.useProtoFieldName?a.name:a.jsonName]=d)}const l=t.typeRegistry;if(l!=null&&l.findExtensionFor)for(const c of e.runtime.bin.listUnknownFields(n)){const d=l.findExtensionFor(e.typeName,c.no);if(d&&sx(n,d)){const h=x2(n,d,t),g=tb(d.field,h,t);g!==void 0&&(r[d.field.jsonName]=g)}}}catch(l){const c=a?`cannot encode field ${e.typeName}.${a.name} to JSON`:`cannot encode message ${e.typeName} to JSON`,d=l instanceof Error?l.message:String(l);throw new Error(c+(d.length>0?`: ${d}`:""))}return r},readScalar(n,t,e){return Fu(n,t,e??Ta.BIGINT,!0)},writeScalar(n,t,e){if(t!==void 0&&(e||rx(n,t)))return yd(n,t)},debug:gr}}function gr(n){if(n===null)return"null";switch(typeof n){case"object":return Array.isArray(n)?"array":"object";case"string":return n.length>100?"string":`"${n.split('"').join('\\"')}"`;default:return String(n)}}function WS(n,t,e,r,a){let l=e.localName;if(e.repeated){if(ye(e.kind!="map"),t===null)return;if(!Array.isArray(t))throw new Error(`cannot decode field ${a.typeName}.${e.name} from JSON: ${gr(t)}`);const c=n[l];for(const d of t){if(d===null)throw new Error(`cannot decode field ${a.typeName}.${e.name} from JSON: ${gr(d)}`);switch(e.kind){case"message":c.push(e.T.fromJson(d,r));break;case"enum":const h=Qm(e.T,d,r.ignoreUnknownFields,!0);h!==md&&c.push(h);break;case"scalar":try{c.push(Fu(e.T,d,e.L,!0))}catch(g){let p=`cannot decode field ${a.typeName}.${e.name} from JSON: ${gr(d)}`;throw g instanceof Error&&g.message.length>0&&(p+=`: ${g.message}`),new Error(p)}break}}}else if(e.kind=="map"){if(t===null)return;if(typeof t!="object"||Array.isArray(t))throw new Error(`cannot decode field ${a.typeName}.${e.name} from JSON: ${gr(t)}`);const c=n[l];for(const[d,h]of Object.entries(t)){if(h===null)throw new Error(`cannot decode field ${a.typeName}.${e.name} from JSON: map value null`);let g;try{g=k2(e.K,d)}catch(p){let w=`cannot decode map key for field ${a.typeName}.${e.name} from JSON: ${gr(t)}`;throw p instanceof Error&&p.message.length>0&&(w+=`: ${p.message}`),new Error(w)}switch(e.V.kind){case"message":c[g]=e.V.T.fromJson(h,r);break;case"enum":const p=Qm(e.V.T,h,r.ignoreUnknownFields,!0);p!==md&&(c[g]=p);break;case"scalar":try{c[g]=Fu(e.V.T,h,Ta.BIGINT,!0)}catch(w){let v=`cannot decode map value for field ${a.typeName}.${e.name} from JSON: ${gr(t)}`;throw w instanceof Error&&w.message.length>0&&(v+=`: ${w.message}`),new Error(v)}break}}}else switch(e.oneof&&(n=n[e.oneof.localName]={case:l},l="value"),e.kind){case"message":const c=e.T;if(t===null&&c.typeName!="google.protobuf.Value")return;let d=n[l];Es(d)?d.fromJson(t,r):(n[l]=d=c.fromJson(t,r),c.fieldWrapper&&!e.oneof&&(n[l]=c.fieldWrapper.unwrapField(d)));break;case"enum":const h=Qm(e.T,t,r.ignoreUnknownFields,!1);switch(h){case Ad:XS(e,n);break;case md:break;default:n[l]=h;break}break;case"scalar":try{const g=Fu(e.T,t,e.L,!1);switch(g){case Ad:XS(e,n);break;default:n[l]=g;break}}catch(g){let p=`cannot decode field ${a.typeName}.${e.name} from JSON: ${gr(t)}`;throw g instanceof Error&&g.message.length>0&&(p+=`: ${g.message}`),new Error(p)}break}}function k2(n,t){if(n===st.BOOL)switch(t){case"true":t=!0;break;case"false":t=!1;break}return Fu(n,t,Ta.BIGINT,!0).toString()}function Fu(n,t,e,r){if(t===null)return r?dl(n,e):Ad;switch(n){case st.DOUBLE:case st.FLOAT:if(t==="NaN")return Number.NaN;if(t==="Infinity")return Number.POSITIVE_INFINITY;if(t==="-Infinity")return Number.NEGATIVE_INFINITY;if(t===""||typeof t=="string"&&t.trim().length!==t.length||typeof t!="string"&&typeof t!="number")break;const a=Number(t);if(Number.isNaN(a)||!Number.isFinite(a))break;return n==st.FLOAT&&X1(a),a;case st.INT32:case st.FIXED32:case st.SFIXED32:case st.SINT32:case st.UINT32:let l;if(typeof t=="number"?l=t:typeof t=="string"&&t.length>0&&t.trim().length===t.length&&(l=Number(t)),l===void 0)break;return n==st.UINT32||n==st.FIXED32?py(l):hd(l),l;case st.INT64:case st.SFIXED64:case st.SINT64:if(typeof t!="number"&&typeof t!="string")break;const c=$t.parse(t);return e?c.toString():c;case st.FIXED64:case st.UINT64:if(typeof t!="number"&&typeof t!="string")break;const d=$t.uParse(t);return e?d.toString():d;case st.BOOL:if(typeof t!="boolean")break;return t;case st.STRING:if(typeof t!="string")break;try{encodeURIComponent(t)}catch{throw new Error("invalid UTF8")}return t;case st.BYTES:if(t==="")return new Uint8Array(0);if(typeof t!="string")break;return Ep.dec(t)}throw new Error}function Qm(n,t,e,r){if(t===null)return n.typeName=="google.protobuf.NullValue"?0:r?n.values[0].no:Ad;switch(typeof t){case"number":if(Number.isInteger(t))return t;break;case"string":const a=n.findName(t);if(a!==void 0)return a.no;if(e)return md;break}throw new Error(`cannot decode enum ${n.typeName} from JSON: ${gr(t)}`)}function C2(n){return n.repeated||n.kind=="map"?!0:!(n.oneof||n.kind=="message"||n.opt||n.req)}function tb(n,t,e){if(n.kind=="map"){ye(typeof t=="object"&&t!=null);const r={},a=Object.entries(t);switch(n.V.kind){case"scalar":for(const[c,d]of a)r[c.toString()]=yd(n.V.T,d);break;case"message":for(const[c,d]of a)r[c.toString()]=d.toJson(e);break;case"enum":const l=n.V.T;for(const[c,d]of a)r[c.toString()]=Wm(l,d,e.enumAsInteger);break}return e.emitDefaultValues||a.length>0?r:void 0}if(n.repeated){ye(Array.isArray(t));const r=[];switch(n.kind){case"scalar":for(let a=0;a<t.length;a++)r.push(yd(n.T,t[a]));break;case"enum":for(let a=0;a<t.length;a++)r.push(Wm(n.T,t[a],e.enumAsInteger));break;case"message":for(let a=0;a<t.length;a++)r.push(t[a].toJson(e));break}return e.emitDefaultValues||r.length>0?r:void 0}switch(n.kind){case"scalar":return yd(n.T,t);case"enum":return Wm(n.T,t,e.enumAsInteger);case"message":return lx(n.T,t).toJson(e)}}function Wm(n,t,e){var r;if(ye(typeof t=="number"),n.typeName=="google.protobuf.NullValue")return null;if(e)return t;const a=n.findNumber(t);return(r=a==null?void 0:a.name)!==null&&r!==void 0?r:t}function yd(n,t){switch(n){case st.INT32:case st.SFIXED32:case st.SINT32:case st.FIXED32:case st.UINT32:return ye(typeof t=="number"),t;case st.FLOAT:case st.DOUBLE:return ye(typeof t=="number"),Number.isNaN(t)?"NaN":t===Number.POSITIVE_INFINITY?"Infinity":t===Number.NEGATIVE_INFINITY?"-Infinity":t;case st.STRING:return ye(typeof t=="string"),t;case st.BOOL:return ye(typeof t=="boolean"),t;case st.UINT64:case st.FIXED64:case st.INT64:case st.SFIXED64:case st.SINT64:return ye(typeof t=="bigint"||typeof t=="string"||typeof t=="number"),t.toString();case st.BYTES:return ye(t instanceof Uint8Array),Ep.enc(t)}}const Qo=Symbol("@bufbuild/protobuf/unknown-fields"),eb={readUnknownFields:!0,readerFactory:n=>new v2(n)},nb={writeUnknownFields:!0,writerFactory:()=>new p2};function D2(n){return n?Object.assign(Object.assign({},eb),n):eb}function I2(n){return n?Object.assign(Object.assign({},nb),n):nb}function O2(){return{makeReadOptions:D2,makeWriteOptions:I2,listUnknownFields(n){var t;return(t=n[Qo])!==null&&t!==void 0?t:[]},discardUnknownFields(n){delete n[Qo]},writeUnknownFields(n,t){const r=n[Qo];if(r)for(const a of r)t.tag(a.no,a.wireType).raw(a.data)},onUnknownField(n,t,e,r){const a=n;Array.isArray(a[Qo])||(a[Qo]=[]),a[Qo].push({no:t,wireType:e,data:r})},readMessage(n,t,e,r,a){const l=n.getType(),c=a?t.len:t.pos+e;let d,h;for(;t.pos<c&&([d,h]=t.tag(),!(a===!0&&h==Se.EndGroup));){const g=l.fields.find(d);if(!g){const p=t.skip(h,d);r.readUnknownFields&&this.onUnknownField(n,d,h,p);continue}rb(n,t,g,h,r)}if(a&&(h!=Se.EndGroup||d!==e))throw new Error("invalid end group tag")},readField:rb,writeMessage(n,t,e){const r=n.getType();for(const a of r.fields.byNumber()){if(!ox(a,n)){if(a.req)throw new Error(`cannot encode field ${r.typeName}.${a.name} to binary: required field not set`);continue}const l=a.oneof?n[a.oneof.localName].value:n[a.localName];ib(a,l,t,e)}return e.writeUnknownFields&&this.writeUnknownFields(n,t),t},writeField(n,t,e,r){t!==void 0&&ib(n,t,e,r)}}}function rb(n,t,e,r,a){let{repeated:l,localName:c}=e;switch(e.oneof&&(n=n[e.oneof.localName],n.case!=c&&delete n.value,n.case=c,c="value"),e.kind){case"scalar":case"enum":const d=e.kind=="enum"?st.INT32:e.T;let h=Ed;if(e.kind=="scalar"&&e.L>0&&(h=R2),l){let v=n[c];if(r==Se.LengthDelimited&&d!=st.STRING&&d!=st.BYTES){let A=t.uint32()+t.pos;for(;t.pos<A;)v.push(h(t,d))}else v.push(h(t,d))}else n[c]=h(t,d);break;case"message":const g=e.T;l?n[c].push(pd(t,new g,a,e)):Es(n[c])?pd(t,n[c],a,e):(n[c]=pd(t,new g,a,e),g.fieldWrapper&&!e.oneof&&!e.repeated&&(n[c]=g.fieldWrapper.unwrapField(n[c])));break;case"map":let[p,w]=M2(e,t,a);n[c][p]=w;break}}function pd(n,t,e,r){const a=t.getType().runtime.bin,l=r==null?void 0:r.delimited;return a.readMessage(t,n,l?r.no:n.uint32(),e,l),t}function M2(n,t,e){const r=t.uint32(),a=t.pos+r;let l,c;for(;t.pos<a;){const[d]=t.tag();switch(d){case 1:l=Ed(t,n.K);break;case 2:switch(n.V.kind){case"scalar":c=Ed(t,n.V.T);break;case"enum":c=t.int32();break;case"message":c=pd(t,new n.V.T,e,void 0);break}break}}if(l===void 0&&(l=dl(n.K,Ta.BIGINT)),typeof l!="string"&&typeof l!="number"&&(l=l.toString()),c===void 0)switch(n.V.kind){case"scalar":c=dl(n.V.T,Ta.BIGINT);break;case"enum":c=n.V.T.values[0].no;break;case"message":c=new n.V.T;break}return[l,c]}function R2(n,t){const e=Ed(n,t);return typeof e=="bigint"?e.toString():e}function Ed(n,t){switch(t){case st.STRING:return n.string();case st.BOOL:return n.bool();case st.DOUBLE:return n.double();case st.FLOAT:return n.float();case st.INT32:return n.int32();case st.INT64:return n.int64();case st.UINT64:return n.uint64();case st.FIXED64:return n.fixed64();case st.BYTES:return n.bytes();case st.FIXED32:return n.fixed32();case st.SFIXED32:return n.sfixed32();case st.SFIXED64:return n.sfixed64();case st.SINT64:return n.sint64();case st.UINT32:return n.uint32();case st.SINT32:return n.sint32()}}function ib(n,t,e,r){ye(t!==void 0);const a=n.repeated;switch(n.kind){case"scalar":case"enum":let l=n.kind=="enum"?st.INT32:n.T;if(a)if(ye(Array.isArray(t)),n.packed)z2(e,l,n.no,t);else for(const c of t)Xu(e,l,n.no,c);else Xu(e,l,n.no,t);break;case"message":if(a){ye(Array.isArray(t));for(const c of t)sb(e,r,n,c)}else sb(e,r,n,t);break;case"map":ye(typeof t=="object"&&t!=null);for(const[c,d]of Object.entries(t))B2(e,r,n,c,d);break}}function B2(n,t,e,r,a){n.tag(e.no,Se.LengthDelimited),n.fork();let l=r;switch(e.K){case st.INT32:case st.FIXED32:case st.UINT32:case st.SFIXED32:case st.SINT32:l=Number.parseInt(r);break;case st.BOOL:ye(r=="true"||r=="false"),l=r=="true";break}switch(Xu(n,e.K,1,l),e.V.kind){case"scalar":Xu(n,e.V.T,2,a);break;case"enum":Xu(n,st.INT32,2,a);break;case"message":ye(a!==void 0),n.tag(2,Se.LengthDelimited).bytes(a.toBinary(t));break}n.join()}function sb(n,t,e,r){const a=lx(e.T,r);e.delimited?n.tag(e.no,Se.StartGroup).raw(a.toBinary(t)).tag(e.no,Se.EndGroup):n.tag(e.no,Se.LengthDelimited).bytes(a.toBinary(t))}function Xu(n,t,e,r){ye(r!==void 0);let[a,l]=ux(t);n.tag(e,a)[l](r)}function z2(n,t,e,r){if(!r.length)return;n.tag(e,Se.LengthDelimited).fork();let[,a]=ux(t);for(let l=0;l<r.length;l++)n[a](r[l]);n.join()}function ux(n){let t=Se.Varint;switch(n){case st.BYTES:case st.STRING:t=Se.LengthDelimited;break;case st.DOUBLE:case st.FIXED64:case st.SFIXED64:t=Se.Bit64;break;case st.FIXED32:case st.SFIXED32:case st.FLOAT:t=Se.Bit32;break}const e=st[n].toLowerCase();return[t,e]}function L2(){return{setEnumType:Q1,initPartial(n,t){if(n===void 0)return;const e=t.getType();for(const r of e.fields.byMember()){const a=r.localName,l=t,c=n;if(c[a]!=null)switch(r.kind){case"oneof":const d=c[a].case;if(d===void 0)continue;const h=r.findField(d);let g=c[a].value;h&&h.kind=="message"&&!Es(g,h.T)?g=new h.T(g):h&&h.kind==="scalar"&&h.T===st.BYTES&&(g=Pu(g)),l[a]={case:d,value:g};break;case"scalar":case"enum":let p=c[a];r.T===st.BYTES&&(p=r.repeated?p.map(Pu):Pu(p)),l[a]=p;break;case"map":switch(r.V.kind){case"scalar":case"enum":if(r.V.T===st.BYTES)for(const[S,A]of Object.entries(c[a]))l[a][S]=Pu(A);else Object.assign(l[a],c[a]);break;case"message":const v=r.V.T;for(const S of Object.keys(c[a])){let A=c[a][S];v.fieldWrapper||(A=new v(A)),l[a][S]=A}break}break;case"message":const w=r.T;if(r.repeated)l[a]=c[a].map(v=>Es(v,w)?v:new w(v));else{const v=c[a];w.fieldWrapper?w.typeName==="google.protobuf.BytesValue"?l[a]=Pu(v):l[a]=v:l[a]=Es(v,w)?v:new w(v)}break}}},equals(n,t,e){return t===e?!0:!t||!e?!1:n.fields.byMember().every(r=>{const a=t[r.localName],l=e[r.localName];if(r.repeated){if(a.length!==l.length)return!1;switch(r.kind){case"message":return a.every((c,d)=>r.T.equals(c,l[d]));case"scalar":return a.every((c,d)=>fa(r.T,c,l[d]));case"enum":return a.every((c,d)=>fa(st.INT32,c,l[d]))}throw new Error(`repeated cannot contain ${r.kind}`)}switch(r.kind){case"message":let c=a,d=l;return r.T.fieldWrapper&&(c!==void 0&&!Es(c)&&(c=r.T.fieldWrapper.wrapField(c)),d!==void 0&&!Es(d)&&(d=r.T.fieldWrapper.wrapField(d))),r.T.equals(c,d);case"enum":return fa(st.INT32,a,l);case"scalar":return fa(r.T,a,l);case"oneof":if(a.case!==l.case)return!1;const h=r.findField(a.case);if(h===void 0)return!0;switch(h.kind){case"message":return h.T.equals(a.value,l.value);case"enum":return fa(st.INT32,a.value,l.value);case"scalar":return fa(h.T,a.value,l.value)}throw new Error(`oneof cannot contain ${h.kind}`);case"map":const g=Object.keys(a).concat(Object.keys(l));switch(r.V.kind){case"message":const p=r.V.T;return g.every(v=>p.equals(a[v],l[v]));case"enum":return g.every(v=>fa(st.INT32,a[v],l[v]));case"scalar":const w=r.V.T;return g.every(v=>fa(w,a[v],l[v]))}break}})},clone(n){const t=n.getType(),e=new t,r=e;for(const a of t.fields.byMember()){const l=n[a.localName];let c;if(a.repeated)c=l.map(Zf);else if(a.kind=="map"){c=r[a.localName];for(const[d,h]of Object.entries(l))c[d]=Zf(h)}else a.kind=="oneof"?c=a.findField(l.case)?{case:l.case,value:Zf(l.value)}:{case:void 0}:c=Zf(l);r[a.localName]=c}for(const a of t.runtime.bin.listUnknownFields(n))t.runtime.bin.onUnknownField(r,a.no,a.wireType,a.data);return e}}}function Zf(n){if(n===void 0)return n;if(Es(n))return n.clone();if(n instanceof Uint8Array){const t=new Uint8Array(n.byteLength);return t.set(n),t}return n}function Pu(n){return n instanceof Uint8Array?n:new Uint8Array(n)}function U2(n,t,e){return{syntax:n,json:N2(),bin:O2(),util:Object.assign(Object.assign({},L2()),{newFieldList:t,initFields:e}),makeMessageType(r,a,l){return f2(this,r,a,l)},makeEnum:c2,makeEnumType:W1,getEnumType:u2,makeExtension(r,a,l){return w2(this,r,a,l)}}}class _2{constructor(t,e){this._fields=t,this._normalizer=e}findJsonName(t){if(!this.jsonNames){const e={};for(const r of this.list())e[r.jsonName]=e[r.name]=r;this.jsonNames=e}return this.jsonNames[t]}find(t){if(!this.numbers){const e={};for(const r of this.list())e[r.no]=r;this.numbers=e}return this.numbers[t]}list(){return this.all||(this.all=this._normalizer(this._fields)),this.all}byNumber(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort((t,e)=>t.no-e.no)),this.numbersAsc}byMember(){if(!this.members){this.members=[];const t=this.members;let e;for(const r of this.list())r.oneof?r.oneof!==e&&(e=r.oneof,t.push(e)):t.push(r)}return this.members}}function cx(n,t){const e=fx(n);return t?e:V2(H2(e))}function P2(n){return cx(n,!1)}const q2=fx;function fx(n){let t=!1;const e=[];for(let r=0;r<n.length;r++){let a=n.charAt(r);switch(a){case"_":t=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":e.push(a),t=!1;break;default:t&&(t=!1,a=a.toUpperCase()),e.push(a);break}}return e.join("")}const J2=new Set(["constructor","toString","toJSON","valueOf"]),$2=new Set(["getType","clone","equals","fromBinary","fromJson","fromJsonString","toBinary","toJson","toJsonString","toObject"]),dx=n=>`${n}$`,H2=n=>$2.has(n)?dx(n):n,V2=n=>J2.has(n)?dx(n):n;class j2{constructor(t){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.req=!1,this.default=void 0,this.fields=[],this.name=t,this.localName=P2(t)}addField(t){ye(t.oneof===this,`field ${t.name} not one of ${this.name}`),this.fields.push(t)}findField(t){if(!this._lookup){this._lookup=Object.create(null);for(let e=0;e<this.fields.length;e++)this._lookup[this.fields[e].localName]=this.fields[e]}return this._lookup[t]}}function K2(n,t){var e,r,a,l,c,d;const h=[];let g;for(const p of typeof n=="function"?n():n){const w=p;if(w.localName=cx(p.name,p.oneof!==void 0),w.jsonName=(e=p.jsonName)!==null&&e!==void 0?e:q2(p.name),w.repeated=(r=p.repeated)!==null&&r!==void 0?r:!1,p.kind=="scalar"&&(w.L=(a=p.L)!==null&&a!==void 0?a:Ta.BIGINT),w.delimited=(l=p.delimited)!==null&&l!==void 0?l:!1,w.req=(c=p.req)!==null&&c!==void 0?c:!1,w.opt=(d=p.opt)!==null&&d!==void 0?d:!1,p.packed===void 0&&(w.packed=p.kind=="enum"||p.kind=="scalar"&&p.T!=st.BYTES&&p.T!=st.STRING),p.oneof!==void 0){const v=typeof p.oneof=="string"?p.oneof:p.oneof.name;(!g||g.name!=v)&&(g=new j2(v)),w.oneof=g,g.addField(w)}h.push(w)}return h}const x=U2("proto3",n=>new _2(n,t=>K2(t)),n=>{for(const t of n.getType().fields.byMember()){if(t.opt)continue;const e=t.localName,r=n;if(t.repeated){r[e]=[];continue}switch(t.kind){case"oneof":r[e]={case:void 0};break;case"enum":r[e]=0;break;case"map":r[e]={};break;case"scalar":r[e]=dl(t.T,t.L);break}}});var me;(function(n){n[n.Unary=0]="Unary",n[n.ServerStreaming=1]="ServerStreaming",n[n.ClientStreaming=2]="ClientStreaming",n[n.BiDiStreaming=3]="BiDiStreaming"})(me||(me={}));var ab;(function(n){n[n.NoSideEffects=1]="NoSideEffects",n[n.Idempotent=2]="Idempotent"})(ab||(ab={}));class ze extends dt{constructor(t){super(),this.seconds=$t.zero,this.nanos=0,x.util.initPartial(t,this)}fromJson(t,e){if(typeof t!="string")throw new Error(`cannot decode google.protobuf.Timestamp from JSON: ${x.json.debug(t)}`);const r=t.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!r)throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");const a=Date.parse(r[1]+"-"+r[2]+"-"+r[3]+"T"+r[4]+":"+r[5]+":"+r[6]+(r[8]?r[8]:"Z"));if(Number.isNaN(a))throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");if(a<Date.parse("0001-01-01T00:00:00Z")||a>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot decode message google.protobuf.Timestamp from JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");return this.seconds=$t.parse(a/1e3),this.nanos=0,r[7]&&(this.nanos=parseInt("1"+r[7]+"0".repeat(9-r[7].length))-1e9),this}toJson(t){const e=Number(this.seconds)*1e3;if(e<Date.parse("0001-01-01T00:00:00Z")||e>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot encode google.protobuf.Timestamp to JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");if(this.nanos<0)throw new Error("cannot encode google.protobuf.Timestamp to JSON: nanos must not be negative");let r="Z";if(this.nanos>0){const a=(this.nanos+1e9).toString().substring(1);a.substring(3)==="000000"?r="."+a.substring(0,3)+"Z":a.substring(6)==="000"?r="."+a.substring(0,6)+"Z":r="."+a+"Z"}return new Date(e).toISOString().replace(".000Z",r)}toDate(){return new Date(Number(this.seconds)*1e3+Math.ceil(this.nanos/1e6))}static now(){return ze.fromDate(new Date)}static fromDate(t){const e=t.getTime();return new ze({seconds:$t.parse(Math.floor(e/1e3)),nanos:e%1e3*1e6})}static fromBinary(t,e){return new ze().fromBinary(t,e)}static fromJson(t,e){return new ze().fromJson(t,e)}static fromJsonString(t,e){return new ze().fromJsonString(t,e)}static equals(t,e){return x.util.equals(ze,t,e)}}ze.runtime=x;ze.typeName="google.protobuf.Timestamp";ze.fields=x.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);class Ns extends dt{constructor(t){super(),this.seconds=$t.zero,this.nanos=0,x.util.initPartial(t,this)}fromJson(t,e){if(typeof t!="string")throw new Error(`cannot decode google.protobuf.Duration from JSON: ${x.json.debug(t)}`);const r=t.match(/^(-?[0-9]+)(?:\.([0-9]+))?s/);if(r===null)throw new Error(`cannot decode google.protobuf.Duration from JSON: ${x.json.debug(t)}`);const a=Number(r[1]);if(a>315576e6||a<-315576e6)throw new Error(`cannot decode google.protobuf.Duration from JSON: ${x.json.debug(t)}`);if(this.seconds=$t.parse(a),typeof r[2]=="string"){const l=r[2]+"0".repeat(9-r[2].length);this.nanos=parseInt(l),(a<0||Object.is(a,-0))&&(this.nanos=-this.nanos)}return this}toJson(t){if(Number(this.seconds)>315576e6||Number(this.seconds)<-315576e6)throw new Error("cannot encode google.protobuf.Duration to JSON: value out of range");let e=this.seconds.toString();if(this.nanos!==0){let r=Math.abs(this.nanos).toString();r="0".repeat(9-r.length)+r,r.substring(3)==="000000"?r=r.substring(0,3):r.substring(6)==="000"&&(r=r.substring(0,6)),e+="."+r,this.nanos<0&&Number(this.seconds)==0&&(e="-"+e)}return e+"s"}static fromBinary(t,e){return new Ns().fromBinary(t,e)}static fromJson(t,e){return new Ns().fromJson(t,e)}static fromJsonString(t,e){return new Ns().fromJsonString(t,e)}static equals(t,e){return x.util.equals(Ns,t,e)}}Ns.runtime=x;Ns.typeName="google.protobuf.Duration";Ns.fields=x.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);class yr extends dt{constructor(t){super(),this.typeUrl="",this.value=new Uint8Array(0),x.util.initPartial(t,this)}toJson(t){var e;if(this.typeUrl==="")return{};const r=this.typeUrlToName(this.typeUrl),a=(e=t==null?void 0:t.typeRegistry)===null||e===void 0?void 0:e.findMessage(r);if(!a)throw new Error(`cannot encode message google.protobuf.Any to JSON: "${this.typeUrl}" is not in the type registry`);let c=a.fromBinary(this.value).toJson(t);return(r.startsWith("google.protobuf.")||c===null||Array.isArray(c)||typeof c!="object")&&(c={value:c}),c["@type"]=this.typeUrl,c}fromJson(t,e){var r;if(t===null||Array.isArray(t)||typeof t!="object")throw new Error(`cannot decode message google.protobuf.Any from JSON: expected object but got ${t===null?"null":Array.isArray(t)?"array":typeof t}`);if(Object.keys(t).length==0)return this;const a=t["@type"];if(typeof a!="string"||a=="")throw new Error('cannot decode message google.protobuf.Any from JSON: "@type" is empty');const l=this.typeUrlToName(a),c=(r=e==null?void 0:e.typeRegistry)===null||r===void 0?void 0:r.findMessage(l);if(!c)throw new Error(`cannot decode message google.protobuf.Any from JSON: ${a} is not in the type registry`);let d;if(l.startsWith("google.protobuf.")&&Object.prototype.hasOwnProperty.call(t,"value"))d=c.fromJson(t.value,e);else{const h=Object.assign({},t);delete h["@type"],d=c.fromJson(h,e)}return this.packFrom(d),this}packFrom(t){this.value=t.toBinary(),this.typeUrl=this.typeNameToUrl(t.getType().typeName)}unpackTo(t){return this.is(t.getType())?(t.fromBinary(this.value),!0):!1}unpack(t){if(this.typeUrl==="")return;const e=t.findMessage(this.typeUrlToName(this.typeUrl));if(e)return e.fromBinary(this.value)}is(t){if(this.typeUrl==="")return!1;const e=this.typeUrlToName(this.typeUrl);let r="";return typeof t=="string"?r=t:r=t.typeName,e===r}typeNameToUrl(t){return`type.googleapis.com/${t}`}typeUrlToName(t){if(!t.length)throw new Error(`invalid type url: ${t}`);const e=t.lastIndexOf("/"),r=e>=0?t.substring(e+1):t;if(!r.length)throw new Error(`invalid type url: ${t}`);return r}static pack(t){const e=new yr;return e.packFrom(t),e}static fromBinary(t,e){return new yr().fromBinary(t,e)}static fromJson(t,e){return new yr().fromJson(t,e)}static fromJsonString(t,e){return new yr().fromJsonString(t,e)}static equals(t,e){return x.util.equals(yr,t,e)}}yr.runtime=x;yr.typeName="google.protobuf.Any";yr.fields=x.util.newFieldList(()=>[{no:1,name:"type_url",kind:"scalar",T:9},{no:2,name:"value",kind:"scalar",T:12}]);class pr extends dt{constructor(t){super(),this.value=0,x.util.initPartial(t,this)}toJson(t){return x.json.writeScalar(st.DOUBLE,this.value,!0)}fromJson(t,e){try{this.value=x.json.readScalar(st.DOUBLE,t)}catch(r){let a='cannot decode message google.protobuf.DoubleValue from JSON"';throw r instanceof Error&&r.message.length>0&&(a+=`: ${r.message}`),new Error(a)}return this}static fromBinary(t,e){return new pr().fromBinary(t,e)}static fromJson(t,e){return new pr().fromJson(t,e)}static fromJsonString(t,e){return new pr().fromJsonString(t,e)}static equals(t,e){return x.util.equals(pr,t,e)}}pr.runtime=x;pr.typeName="google.protobuf.DoubleValue";pr.fields=x.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:1}]);pr.fieldWrapper={wrapField(n){return new pr({value:n})},unwrapField(n){return n.value}};class vr extends dt{constructor(t){super(),this.value=0,x.util.initPartial(t,this)}toJson(t){return x.json.writeScalar(st.FLOAT,this.value,!0)}fromJson(t,e){try{this.value=x.json.readScalar(st.FLOAT,t)}catch(r){let a='cannot decode message google.protobuf.FloatValue from JSON"';throw r instanceof Error&&r.message.length>0&&(a+=`: ${r.message}`),new Error(a)}return this}static fromBinary(t,e){return new vr().fromBinary(t,e)}static fromJson(t,e){return new vr().fromJson(t,e)}static fromJsonString(t,e){return new vr().fromJsonString(t,e)}static equals(t,e){return x.util.equals(vr,t,e)}}vr.runtime=x;vr.typeName="google.protobuf.FloatValue";vr.fields=x.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:2}]);vr.fieldWrapper={wrapField(n){return new vr({value:n})},unwrapField(n){return n.value}};class Un extends dt{constructor(t){super(),this.value=$t.zero,x.util.initPartial(t,this)}toJson(t){return x.json.writeScalar(st.INT64,this.value,!0)}fromJson(t,e){try{this.value=x.json.readScalar(st.INT64,t)}catch(r){let a='cannot decode message google.protobuf.Int64Value from JSON"';throw r instanceof Error&&r.message.length>0&&(a+=`: ${r.message}`),new Error(a)}return this}static fromBinary(t,e){return new Un().fromBinary(t,e)}static fromJson(t,e){return new Un().fromJson(t,e)}static fromJsonString(t,e){return new Un().fromJsonString(t,e)}static equals(t,e){return x.util.equals(Un,t,e)}}Un.runtime=x;Un.typeName="google.protobuf.Int64Value";Un.fields=x.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:3}]);Un.fieldWrapper={wrapField(n){return new Un({value:n})},unwrapField(n){return n.value}};class _n extends dt{constructor(t){super(),this.value=$t.zero,x.util.initPartial(t,this)}toJson(t){return x.json.writeScalar(st.UINT64,this.value,!0)}fromJson(t,e){try{this.value=x.json.readScalar(st.UINT64,t)}catch(r){let a='cannot decode message google.protobuf.UInt64Value from JSON"';throw r instanceof Error&&r.message.length>0&&(a+=`: ${r.message}`),new Error(a)}return this}static fromBinary(t,e){return new _n().fromBinary(t,e)}static fromJson(t,e){return new _n().fromJson(t,e)}static fromJsonString(t,e){return new _n().fromJsonString(t,e)}static equals(t,e){return x.util.equals(_n,t,e)}}_n.runtime=x;_n.typeName="google.protobuf.UInt64Value";_n.fields=x.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:4}]);_n.fieldWrapper={wrapField(n){return new _n({value:n})},unwrapField(n){return n.value}};class mn extends dt{constructor(t){super(),this.value=0,x.util.initPartial(t,this)}toJson(t){return x.json.writeScalar(st.INT32,this.value,!0)}fromJson(t,e){try{this.value=x.json.readScalar(st.INT32,t)}catch(r){let a='cannot decode message google.protobuf.Int32Value from JSON"';throw r instanceof Error&&r.message.length>0&&(a+=`: ${r.message}`),new Error(a)}return this}static fromBinary(t,e){return new mn().fromBinary(t,e)}static fromJson(t,e){return new mn().fromJson(t,e)}static fromJsonString(t,e){return new mn().fromJsonString(t,e)}static equals(t,e){return x.util.equals(mn,t,e)}}mn.runtime=x;mn.typeName="google.protobuf.Int32Value";mn.fields=x.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:5}]);mn.fieldWrapper={wrapField(n){return new mn({value:n})},unwrapField(n){return n.value}};class wr extends dt{constructor(t){super(),this.value=0,x.util.initPartial(t,this)}toJson(t){return x.json.writeScalar(st.UINT32,this.value,!0)}fromJson(t,e){try{this.value=x.json.readScalar(st.UINT32,t)}catch(r){let a='cannot decode message google.protobuf.UInt32Value from JSON"';throw r instanceof Error&&r.message.length>0&&(a+=`: ${r.message}`),new Error(a)}return this}static fromBinary(t,e){return new wr().fromBinary(t,e)}static fromJson(t,e){return new wr().fromJson(t,e)}static fromJsonString(t,e){return new wr().fromJsonString(t,e)}static equals(t,e){return x.util.equals(wr,t,e)}}wr.runtime=x;wr.typeName="google.protobuf.UInt32Value";wr.fields=x.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:13}]);wr.fieldWrapper={wrapField(n){return new wr({value:n})},unwrapField(n){return n.value}};class Pn extends dt{constructor(t){super(),this.value=!1,x.util.initPartial(t,this)}toJson(t){return x.json.writeScalar(st.BOOL,this.value,!0)}fromJson(t,e){try{this.value=x.json.readScalar(st.BOOL,t)}catch(r){let a='cannot decode message google.protobuf.BoolValue from JSON"';throw r instanceof Error&&r.message.length>0&&(a+=`: ${r.message}`),new Error(a)}return this}static fromBinary(t,e){return new Pn().fromBinary(t,e)}static fromJson(t,e){return new Pn().fromJson(t,e)}static fromJsonString(t,e){return new Pn().fromJsonString(t,e)}static equals(t,e){return x.util.equals(Pn,t,e)}}Pn.runtime=x;Pn.typeName="google.protobuf.BoolValue";Pn.fields=x.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:8}]);Pn.fieldWrapper={wrapField(n){return new Pn({value:n})},unwrapField(n){return n.value}};class Ee extends dt{constructor(t){super(),this.value="",x.util.initPartial(t,this)}toJson(t){return x.json.writeScalar(st.STRING,this.value,!0)}fromJson(t,e){try{this.value=x.json.readScalar(st.STRING,t)}catch(r){let a='cannot decode message google.protobuf.StringValue from JSON"';throw r instanceof Error&&r.message.length>0&&(a+=`: ${r.message}`),new Error(a)}return this}static fromBinary(t,e){return new Ee().fromBinary(t,e)}static fromJson(t,e){return new Ee().fromJson(t,e)}static fromJsonString(t,e){return new Ee().fromJsonString(t,e)}static equals(t,e){return x.util.equals(Ee,t,e)}}Ee.runtime=x;Ee.typeName="google.protobuf.StringValue";Ee.fields=x.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:9}]);Ee.fieldWrapper={wrapField(n){return new Ee({value:n})},unwrapField(n){return n.value}};class Sr extends dt{constructor(t){super(),this.value=new Uint8Array(0),x.util.initPartial(t,this)}toJson(t){return x.json.writeScalar(st.BYTES,this.value,!0)}fromJson(t,e){try{this.value=x.json.readScalar(st.BYTES,t)}catch(r){let a='cannot decode message google.protobuf.BytesValue from JSON"';throw r instanceof Error&&r.message.length>0&&(a+=`: ${r.message}`),new Error(a)}return this}static fromBinary(t,e){return new Sr().fromBinary(t,e)}static fromJson(t,e){return new Sr().fromJson(t,e)}static fromJsonString(t,e){return new Sr().fromJsonString(t,e)}static equals(t,e){return x.util.equals(Sr,t,e)}}Sr.runtime=x;Sr.typeName="google.protobuf.BytesValue";Sr.fields=x.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:12}]);Sr.fieldWrapper={wrapField(n){return new Sr({value:n})},unwrapField(n){return n.value}};function Y2(n,t,e){try{const r=Ep.dec(n);return t?t.fromBinary(r,e):r}catch(r){throw ee.from(r,Pt.DataLoss)}}function G2(n,t){const e={};for(const[r,a]of Object.entries(n.methods)){const l=t(Object.assign(Object.assign({},a),{localName:r,service:n}));l!=null&&(e[r]=l)}return e}const ob=1;function lb(n){let t,e=new Uint8Array(0);function r(a){const l=new Uint8Array(e.length+a.length);l.set(e),l.set(a,e.length),e=l}return new ReadableStream({start(){t=n.getReader()},async pull(a){let l;for(;;){if(l===void 0&&e.byteLength>=5){let h=0;for(let g=1;g<5;g++)h=(h<<8)+e[g];l={flags:e[0],length:h}}if(l!==void 0&&e.byteLength>=l.length+5)break;const d=await t.read();if(d.done)break;r(d.value)}if(l===void 0){if(e.byteLength==0){a.close();return}a.error(new ee("premature end of stream",Pt.DataLoss));return}const c=e.subarray(5,5+l.length);e=e.subarray(5+l.length),a.enqueue({flags:l.flags,data:c})}})}function ub(n,t){const e=new Uint8Array(t.length+5);e.set(t,5);const r=new DataView(e.buffer,e.byteOffset,e.byteLength);return r.setUint8(0,n),r.setUint32(1,t.length),e}var F2=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=n[Symbol.asyncIterator],e;return t?t.call(n):(n=typeof __values=="function"?__values(n):n[Symbol.iterator](),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(l){e[l]=n[l]&&function(c){return new Promise(function(d,h){c=n[l](c),a(d,h,c.done,c.value)})}}function a(l,c,d,h){Promise.resolve(h).then(function(g){l({value:g,done:d})},c)}},ic=function(n){return this instanceof ic?(this.v=n,this):new ic(n)},X2=function(n,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=e.apply(n,t||[]),a,l=[];return a={},d("next"),d("throw"),d("return",c),a[Symbol.asyncIterator]=function(){return this},a;function c(S){return function(A){return Promise.resolve(A).then(S,w)}}function d(S,A){r[S]&&(a[S]=function(T){return new Promise(function(k,D){l.push([S,T,k,D])>1||h(S,T)})},A&&(a[S]=A(a[S])))}function h(S,A){try{g(r[S](A))}catch(T){v(l[0][3],T)}}function g(S){S.value instanceof ic?Promise.resolve(S.value.v).then(p,w):v(l[0][2],S)}function p(S){h("next",S)}function w(S){h("throw",S)}function v(S,A){S(A),l.shift(),l.length&&h(l[0][0],l[0][1])}},Z2=function(n){var t,e;return t={},r("next"),r("throw",function(a){throw a}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(a,l){t[a]=n[a]?function(c){return(e=!e)?{value:ic(n[a](c)),done:!1}:l?l(c):c}:l}};function Q2(n){return X2(this,arguments,function*(){yield ic(yield*Z2(F2(n)))})}var hx=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=n[Symbol.asyncIterator],e;return t?t.call(n):(n=typeof __values=="function"?__values(n):n[Symbol.iterator](),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(l){e[l]=n[l]&&function(c){return new Promise(function(d,h){c=n[l](c),a(d,h,c.done,c.value)})}}function a(l,c,d,h){Promise.resolve(h).then(function(g){l({value:g,done:d})},c)}},hl=function(n){return this instanceof hl?(this.v=n,this):new hl(n)},W2=function(n){var t,e;return t={},r("next"),r("throw",function(a){throw a}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(a,l){t[a]=n[a]?function(c){return(e=!e)?{value:hl(n[a](c)),done:!1}:l?l(c):c}:l}},tk=function(n,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=e.apply(n,t||[]),a,l=[];return a={},d("next"),d("throw"),d("return",c),a[Symbol.asyncIterator]=function(){return this},a;function c(S){return function(A){return Promise.resolve(A).then(S,w)}}function d(S,A){r[S]&&(a[S]=function(T){return new Promise(function(k,D){l.push([S,T,k,D])>1||h(S,T)})},A&&(a[S]=A(a[S])))}function h(S,A){try{g(r[S](A))}catch(T){v(l[0][3],T)}}function g(S){S.value instanceof hl?Promise.resolve(S.value.v).then(p,w):v(l[0][2],S)}function p(S){h("next",S)}function w(S){h("throw",S)}function v(S,A){S(A),l.shift(),l.length&&h(l[0][0],l[0][1])}};function ek(n,t){return G2(n,e=>{switch(e.kind){case me.Unary:return nk(t,n,e);case me.ServerStreaming:return rk(t,n,e);case me.ClientStreaming:return ik(t,n,e);case me.BiDiStreaming:return sk(t,n,e);default:return null}})}function nk(n,t,e){return async function(r,a){var l,c;const d=await n.unary(t,e,a==null?void 0:a.signal,a==null?void 0:a.timeoutMs,a==null?void 0:a.headers,r,a==null?void 0:a.contextValues);return(l=a==null?void 0:a.onHeader)===null||l===void 0||l.call(a,d.header),(c=a==null?void 0:a.onTrailer)===null||c===void 0||c.call(a,d.trailer),d.message}}function rk(n,t,e){return function(r,a){return gx(n.stream(t,e,a==null?void 0:a.signal,a==null?void 0:a.timeoutMs,a==null?void 0:a.headers,Q2([r]),a==null?void 0:a.contextValues),a)}}function ik(n,t,e){return async function(r,a){var l,c,d,h,g,p;const w=await n.stream(t,e,a==null?void 0:a.signal,a==null?void 0:a.timeoutMs,a==null?void 0:a.headers,r,a==null?void 0:a.contextValues);(g=a==null?void 0:a.onHeader)===null||g===void 0||g.call(a,w.header);let v,S=0;try{for(var A=!0,T=hx(w.message),k;k=await T.next(),l=k.done,!l;A=!0)h=k.value,A=!1,v=h,S++}catch(D){c={error:D}}finally{try{!A&&!l&&(d=T.return)&&await d.call(T)}finally{if(c)throw c.error}}if(!v)throw new ee("protocol error: missing response message",Pt.Unimplemented);if(S>1)throw new ee("protocol error: received extra messages for client streaming method",Pt.Unimplemented);return(p=a==null?void 0:a.onTrailer)===null||p===void 0||p.call(a,w.trailer),v}}function sk(n,t,e){return function(r,a){return gx(n.stream(t,e,a==null?void 0:a.signal,a==null?void 0:a.timeoutMs,a==null?void 0:a.headers,r,a==null?void 0:a.contextValues),a)}}function gx(n,t){const e=function(){return tk(this,arguments,function*(){var r,a;const l=yield hl(n);(r=t==null?void 0:t.onHeader)===null||r===void 0||r.call(t,l.header),yield hl(yield*W2(hx(l.message))),(a=t==null?void 0:t.onTrailer)===null||a===void 0||a.call(t,l.trailer)})}()[Symbol.asyncIterator]();return{[Symbol.asyncIterator]:()=>({next:()=>e.next()})}}function ak(...n){const t=new AbortController,e=n.filter(a=>a!==void 0).concat(t.signal);for(const a of e){if(a.aborted){r.apply(a);break}a.addEventListener("abort",r)}function r(){t.signal.aborted||t.abort(mx(this));for(const a of e)a.removeEventListener("abort",r)}return t}function ok(n){const t=new AbortController,e=()=>{t.abort(new ee("the operation timed out",Pt.DeadlineExceeded))};let r;return n!==void 0&&(n<=0?e():r=setTimeout(e,n)),{signal:t.signal,cleanup:()=>clearTimeout(r)}}function mx(n){if(!n.aborted)return;if(n.reason!==void 0)return n.reason;const t=new Error("This operation was aborted");return t.name="AbortError",t}function cb(){return{get(n){return n.id in this?this[n.id]:n.defaultValue},set(n,t){return this[n.id]=t,this},delete(n){return delete this[n.id],this}}}const ty=128;function fb(n){const t=new Headers,e=new TextDecoder().decode(n).split(`\r
`);for(const r of e){if(r==="")continue;const a=r.indexOf(":");if(a>0){const l=r.substring(0,a).trim(),c=r.substring(a+1).trim();t.append(l,c)}}return t}const lk="Content-Type",uk="Grpc-Timeout",gl="Grpc-Status",yx="Grpc-Message",ck="Grpc-Status-Details-Bin",fk="X-User-Agent",dk="X-Grpc-Web",hk="application/grpc-web+proto",gk="application/grpc-web+json";class ks extends dt{constructor(t){super(),this.code=0,this.message="",this.details=[],x.util.initPartial(t,this)}static fromBinary(t,e){return new ks().fromBinary(t,e)}static fromJson(t,e){return new ks().fromJson(t,e)}static fromJsonString(t,e){return new ks().fromJsonString(t,e)}static equals(t,e){return x.util.equals(ks,t,e)}}ks.runtime=x;ks.typeName="google.rpc.Status";ks.fields=x.util.newFieldList(()=>[{no:1,name:"code",kind:"scalar",T:5},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"details",kind:"message",T:yr,repeated:!0}]);const mk="0";function px(n){var t;const e=n.get(ck);if(e!=null){const a=Y2(e,ks);if(a.code==0)return;const l=new ee(a.message,a.code,n);return l.details=a.details.map(c=>({type:c.typeUrl.substring(c.typeUrl.lastIndexOf("/")+1),value:c.value})),l}const r=n.get(gl);if(r!=null){if(r===mk)return;const a=parseInt(r,10);return a in Pt?new ee(decodeURIComponent((t=n.get(yx))!==null&&t!==void 0?t:""),a,n):new ee(`invalid grpc-status: ${r}`,Pt.Internal,n)}}function db(n,t,e){const r=typeof t=="string"?t:t.typeName,a=typeof e=="string"?e:e.name;return n.toString().replace(/\/?$/,`/${r}/${a}`)}function vx(n,t){return t instanceof n?t:new n(t)}function yk(n,t){function e(r){return r.done===!0?r:{done:r.done,value:vx(n,r.value)}}return{[Symbol.asyncIterator](){const r=t[Symbol.asyncIterator](),a={next:()=>r.next().then(e)};return r.throw!==void 0&&(a.throw=l=>r.throw(l).then(e)),r.return!==void 0&&(a.return=l=>r.return(l).then(e)),a}}}function wx(n,t){var e;return(e=t==null?void 0:t.concat().reverse().reduce((r,a)=>a(r),n))!==null&&e!==void 0?e:n}function pk(n){var t;const e=Object.assign({},n);return(t=e.ignoreUnknownFields)!==null&&t!==void 0||(e.ignoreUnknownFields=!0),e}function hb(n,t,e,r){const a=t?gb(n.I,r):mb(n.I,e);return{parse:(t?gb(n.O,r):mb(n.O,e)).parse,serialize:a.serialize}}function gb(n,t){return{parse(e){try{return n.fromBinary(e,t)}catch(r){const a=r instanceof Error?r.message:String(r);throw new ee(`parse binary: ${a}`,Pt.Internal)}},serialize(e){try{return e.toBinary(t)}catch(r){const a=r instanceof Error?r.message:String(r);throw new ee(`serialize binary: ${a}`,Pt.Internal)}}}}function mb(n,t){var e,r;const a=(e=t==null?void 0:t.textEncoder)!==null&&e!==void 0?e:new TextEncoder,l=(r=t==null?void 0:t.textDecoder)!==null&&r!==void 0?r:new TextDecoder,c=pk(t);return{parse(d){try{const h=l.decode(d);return n.fromJsonString(h,c)}catch(h){throw ee.from(h,Pt.InvalidArgument)}},serialize(d){try{const h=d.toJsonString(c);return a.encode(h)}catch(h){throw ee.from(h,Pt.Internal)}}}}function vk(n){const t=wx(n.next,n.interceptors),[e,r,a]=Sx(n),l=Object.assign(Object.assign({},n.req),{message:vx(n.req.method.I,n.req.message),signal:e});return t(l).then(c=>(a(),c),r)}function wk(n){const t=wx(n.next,n.interceptors),[e,r,a]=Sx(n),l=Object.assign(Object.assign({},n.req),{message:yk(n.req.method.I,n.req.message),signal:e});let c=!1;return e.addEventListener("abort",function(){var d,h;const g=n.req.message[Symbol.asyncIterator]();c||(d=g.throw)===null||d===void 0||d.call(g,this.reason).catch(()=>{}),(h=g.return)===null||h===void 0||h.call(g).catch(()=>{})}),t(l).then(d=>Object.assign(Object.assign({},d),{message:{[Symbol.asyncIterator](){const h=d.message[Symbol.asyncIterator]();return{next(){return h.next().then(g=>(g.done==!0&&(c=!0,a()),g),r)}}}}}),r)}function Sx(n){const{signal:t,cleanup:e}=ok(n.timeoutMs),r=ak(n.signal,t);return[r.signal,function(l){const c=ee.from(t.aborted?mx(t):l);return r.abort(c),e(),Promise.reject(c)},function(){e(),r.abort()}]}function Sk(){try{new Headers}catch{throw new Error("connect-web requires the fetch API. Are you running on an old version of Node.js? Node.js is not supported in Connect for Web - please stay tuned for Connect for Node.")}}function yb(n,t){const e=px(n);if(e)throw t.forEach((r,a)=>{e.metadata.append(a,r)}),e;if(!t.has(gl)&&!n.has(gl))throw new ee("protocol error: missing status",Pt.Internal)}function pb(n,t,e,r){const a=new Headers(e??{});return a.set(lk,n?hk:gk),a.set(dk,"1"),a.set(fk,"connect-es/1.6.1"),t!==void 0&&a.set(uk,`${t}m`),a}function bk(n){switch(n){case 400:return Pt.Internal;case 401:return Pt.Unauthenticated;case 403:return Pt.PermissionDenied;case 404:return Pt.Unimplemented;case 429:return Pt.Unavailable;case 502:return Pt.Unavailable;case 503:return Pt.Unavailable;case 504:return Pt.Unavailable;default:return Pt.Unknown}}function vb(n,t){var e;if(n>=200&&n<300)return{foundStatus:t.has(gl),headerError:px(t)};throw new ee(decodeURIComponent((e=t.get(yx))!==null&&e!==void 0?e:`HTTP ${n}`),bk(n),t)}var Qa=function(n){return this instanceof Qa?(this.v=n,this):new Qa(n)},xk=function(n,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=e.apply(n,t||[]),a,l=[];return a={},d("next"),d("throw"),d("return",c),a[Symbol.asyncIterator]=function(){return this},a;function c(S){return function(A){return Promise.resolve(A).then(S,w)}}function d(S,A){r[S]&&(a[S]=function(T){return new Promise(function(k,D){l.push([S,T,k,D])>1||h(S,T)})},A&&(a[S]=A(a[S])))}function h(S,A){try{g(r[S](A))}catch(T){v(l[0][3],T)}}function g(S){S.value instanceof Qa?Promise.resolve(S.value.v).then(p,w):v(l[0][2],S)}function p(S){h("next",S)}function w(S){h("throw",S)}function v(S,A){S(A),l.shift(),l.length&&h(l[0][0],l[0][1])}};function Tk(n){var t;Sk();const e=(t=n.useBinaryFormat)!==null&&t!==void 0?t:!0;return{async unary(r,a,l,c,d,h,g){var p;const{serialize:w,parse:v}=hb(a,e,n.jsonOptions,n.binaryOptions);return c=c===void 0?n.defaultTimeoutMs:c<=0?void 0:c,await vk({interceptors:n.interceptors,signal:l,timeoutMs:c,req:{stream:!1,service:r,method:a,url:db(n.baseUrl,r,a),init:{method:"POST",credentials:(p=n.credentials)!==null&&p!==void 0?p:"same-origin",redirect:"error",mode:"cors"},header:pb(e,c,d),contextValues:g??cb(),message:h},next:async S=>{var A;const k=await((A=n.fetch)!==null&&A!==void 0?A:globalThis.fetch)(S.url,Object.assign(Object.assign({},S.init),{headers:S.header,signal:S.signal,body:ub(0,w(S.message))})),{headerError:D}=vb(k.status,k.headers);if(!k.body)throw D!==void 0?D:"missing response body";const L=lb(k.body).getReader();let N,O;for(;;){const B=await L.read();if(B.done)break;const{flags:U,data:J}=B.value;if((U&ob)===ob)throw new ee("protocol error: received unsupported compressed output",Pt.Internal);if(U===ty){if(N!==void 0)throw"extra trailer";N=fb(J);continue}if(O!==void 0)throw new ee("extra message",Pt.Unimplemented);O=v(J)}if(N===void 0)throw D!==void 0?D:new ee("missing trailer",k.headers.has(gl)?Pt.Unimplemented:Pt.Unknown);if(yb(N,k.headers),O===void 0)throw new ee("missing message",N.has(gl)?Pt.Unimplemented:Pt.Unknown);return{stream:!1,service:r,method:a,header:k.headers,message:O,trailer:N}}})},async stream(r,a,l,c,d,h,g){var p;const{serialize:w,parse:v}=hb(a,e,n.jsonOptions,n.binaryOptions);function S(T,k,D,L,N){return xk(this,arguments,function*(){const B=lb(T).getReader();if(k){if(!(yield Qa(B.read())).done)throw"extra data for trailers-only";return yield Qa(void 0)}let U=!1;for(;;){const J=yield Qa(B.read());if(J.done)break;const{flags:j,data:W}=J.value;if((j&ty)===ty){if(U)throw"extra trailer";U=!0;const ft=fb(W);yb(ft,L),ft.forEach((nt,rt)=>D.set(rt,nt));continue}if(U)throw"extra message";yield yield Qa(v(W))}if("throwIfAborted"in N&&N.throwIfAborted(),!U)throw"missing trailer"})}async function A(T){if(a.kind!=me.ServerStreaming)throw"The fetch API does not support streaming request bodies";const k=await T[Symbol.asyncIterator]().next();if(k.done==!0)throw"missing request message";return ub(0,w(k.value))}return c=c===void 0?n.defaultTimeoutMs:c<=0?void 0:c,wk({interceptors:n.interceptors,signal:l,timeoutMs:c,req:{stream:!0,service:r,method:a,url:db(n.baseUrl,r,a),init:{method:"POST",credentials:(p=n.credentials)!==null&&p!==void 0?p:"same-origin",redirect:"error",mode:"cors"},header:pb(e,c,d),contextValues:g??cb(),message:h},next:async T=>{var k;const L=await((k=n.fetch)!==null&&k!==void 0?k:globalThis.fetch)(T.url,Object.assign(Object.assign({},T.init),{headers:T.header,signal:T.signal,body:await A(T.message)})),{foundStatus:N,headerError:O}=vb(L.status,L.headers);if(O!=null)throw O;if(!L.body)throw"missing response body";const B=new Headers;return Object.assign(Object.assign({},T),{header:L.headers,trailer:B,message:S(L.body,N,B,L.headers,T.signal)})}})}}}var Mt=(n=>(n[n.NULL=0]="NULL",n[n.BOOLEAN=1]="BOOLEAN",n[n.INTEGER=2]="INTEGER",n[n.LONG=3]="LONG",n[n.DOUBLE=4]="DOUBLE",n[n.STRING=5]="STRING",n[n.BYTES=6]="BYTES",n[n.DATE=7]="DATE",n[n.JSON_OBJECT=8]="JSON_OBJECT",n[n.JSON_ARRAY=9]="JSON_ARRAY",n[n.TEXT=10]="TEXT",n[n.INTEGER_CNT=11]="INTEGER_CNT",n[n.LONG_CNT=12]="LONG_CNT",n[n.TREE=13]="TREE",n))(Mt||{});x.util.setEnumType(Mt,"yorkie.v1.ValueType",[{no:0,name:"VALUE_TYPE_NULL"},{no:1,name:"VALUE_TYPE_BOOLEAN"},{no:2,name:"VALUE_TYPE_INTEGER"},{no:3,name:"VALUE_TYPE_LONG"},{no:4,name:"VALUE_TYPE_DOUBLE"},{no:5,name:"VALUE_TYPE_STRING"},{no:6,name:"VALUE_TYPE_BYTES"},{no:7,name:"VALUE_TYPE_DATE"},{no:8,name:"VALUE_TYPE_JSON_OBJECT"},{no:9,name:"VALUE_TYPE_JSON_ARRAY"},{no:10,name:"VALUE_TYPE_TEXT"},{no:11,name:"VALUE_TYPE_INTEGER_CNT"},{no:12,name:"VALUE_TYPE_LONG_CNT"},{no:13,name:"VALUE_TYPE_TREE"}]);var ml=(n=>(n[n.DOCUMENT_CHANGED=0]="DOCUMENT_CHANGED",n[n.DOCUMENT_WATCHED=1]="DOCUMENT_WATCHED",n[n.DOCUMENT_UNWATCHED=2]="DOCUMENT_UNWATCHED",n[n.DOCUMENT_BROADCAST=3]="DOCUMENT_BROADCAST",n))(ml||{});x.util.setEnumType(ml,"yorkie.v1.DocEventType",[{no:0,name:"DOC_EVENT_TYPE_DOCUMENT_CHANGED"},{no:1,name:"DOC_EVENT_TYPE_DOCUMENT_WATCHED"},{no:2,name:"DOC_EVENT_TYPE_DOCUMENT_UNWATCHED"},{no:3,name:"DOC_EVENT_TYPE_DOCUMENT_BROADCAST"}]);const ti=class ti extends dt{constructor(e){super();y(this,"root");y(this,"presences",{});x.util.initPartial(e,this)}static fromBinary(e,r){return new ti().fromBinary(e,r)}static fromJson(e,r){return new ti().fromJson(e,r)}static fromJsonString(e,r){return new ti().fromJsonString(e,r)}static equals(e,r){return x.util.equals(ti,e,r)}};y(ti,"runtime",x),y(ti,"typeName","yorkie.v1.Snapshot"),y(ti,"fields",x.util.newFieldList(()=>[{no:1,name:"root",kind:"message",T:an},{no:2,name:"presences",kind:"map",K:9,V:{kind:"message",T:pl}}]));let vy=ti;var Dn;let zs=(Dn=class extends dt{constructor(e){super();y(this,"documentKey","");y(this,"checkpoint");y(this,"snapshot",new Uint8Array(0));y(this,"changes",[]);y(this,"minSyncedTicket");y(this,"isRemoved",!1);y(this,"versionVector");x.util.initPartial(e,this)}static fromBinary(e,r){return new Dn().fromBinary(e,r)}static fromJson(e,r){return new Dn().fromJson(e,r)}static fromJsonString(e,r){return new Dn().fromJsonString(e,r)}static equals(e,r){return x.util.equals(Dn,e,r)}},y(Dn,"runtime",x),y(Dn,"typeName","yorkie.v1.ChangePack"),y(Dn,"fields",x.util.newFieldList(()=>[{no:1,name:"document_key",kind:"scalar",T:9},{no:2,name:"checkpoint",kind:"message",T:Tx},{no:3,name:"snapshot",kind:"scalar",T:12},{no:4,name:"changes",kind:"message",T:bx,repeated:!0},{no:5,name:"min_synced_ticket",kind:"message",T:St},{no:6,name:"is_removed",kind:"scalar",T:8},{no:7,name:"version_vector",kind:"message",T:hh}])),Dn);var In;let bx=(In=class extends dt{constructor(e){super();y(this,"id");y(this,"message","");y(this,"operations",[]);y(this,"presenceChange");x.util.initPartial(e,this)}static fromBinary(e,r){return new In().fromBinary(e,r)}static fromJson(e,r){return new In().fromJson(e,r)}static fromJsonString(e,r){return new In().fromJsonString(e,r)}static equals(e,r){return x.util.equals(In,e,r)}},y(In,"runtime",x),y(In,"typeName","yorkie.v1.Change"),y(In,"fields",x.util.newFieldList(()=>[{no:1,name:"id",kind:"message",T:dh},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"operations",kind:"message",T:Np,repeated:!0},{no:4,name:"presence_change",kind:"message",T:oc}])),In);var On;let dh=(On=class extends dt{constructor(e){super();y(this,"clientSeq",0);y(this,"serverSeq",$t.zero);y(this,"lamport",$t.zero);y(this,"actorId",new Uint8Array(0));y(this,"versionVector");x.util.initPartial(e,this)}static fromBinary(e,r){return new On().fromBinary(e,r)}static fromJson(e,r){return new On().fromJson(e,r)}static fromJsonString(e,r){return new On().fromJsonString(e,r)}static equals(e,r){return x.util.equals(On,e,r)}},y(On,"runtime",x),y(On,"typeName","yorkie.v1.ChangeID"),y(On,"fields",x.util.newFieldList(()=>[{no:1,name:"client_seq",kind:"scalar",T:13},{no:2,name:"server_seq",kind:"scalar",T:3},{no:3,name:"lamport",kind:"scalar",T:3},{no:4,name:"actor_id",kind:"scalar",T:12},{no:5,name:"version_vector",kind:"message",T:hh}])),On);var Mn;let hh=(Mn=class extends dt{constructor(e){super();y(this,"vector",{});x.util.initPartial(e,this)}static fromBinary(e,r){return new Mn().fromBinary(e,r)}static fromJson(e,r){return new Mn().fromJson(e,r)}static fromJsonString(e,r){return new Mn().fromJsonString(e,r)}static equals(e,r){return x.util.equals(Mn,e,r)}},y(Mn,"runtime",x),y(Mn,"typeName","yorkie.v1.VersionVector"),y(Mn,"fields",x.util.newFieldList(()=>[{no:1,name:"vector",kind:"map",K:9,V:{kind:"scalar",T:3}}])),Mn);var Rn;let Np=(Rn=class extends dt{constructor(e){super();y(this,"body",{case:void 0});x.util.initPartial(e,this)}static fromBinary(e,r){return new Rn().fromBinary(e,r)}static fromJson(e,r){return new Rn().fromJson(e,r)}static fromJsonString(e,r){return new Rn().fromJsonString(e,r)}static equals(e,r){return x.util.equals(Rn,e,r)}},y(Rn,"runtime",x),y(Rn,"typeName","yorkie.v1.Operation"),y(Rn,"fields",x.util.newFieldList(()=>[{no:1,name:"set",kind:"message",T:Nd,oneof:"body"},{no:2,name:"add",kind:"message",T:kd,oneof:"body"},{no:3,name:"move",kind:"message",T:Cd,oneof:"body"},{no:4,name:"remove",kind:"message",T:Dd,oneof:"body"},{no:5,name:"edit",kind:"message",T:Id,oneof:"body"},{no:7,name:"style",kind:"message",T:Od,oneof:"body"},{no:8,name:"increase",kind:"message",T:Md,oneof:"body"},{no:9,name:"tree_edit",kind:"message",T:Rd,oneof:"body"},{no:10,name:"tree_style",kind:"message",T:Bd,oneof:"body"},{no:11,name:"array_set",kind:"message",T:zd,oneof:"body"}])),Rn);const ei=class ei extends dt{constructor(e){super();y(this,"parentCreatedAt");y(this,"key","");y(this,"value");y(this,"executedAt");x.util.initPartial(e,this)}static fromBinary(e,r){return new ei().fromBinary(e,r)}static fromJson(e,r){return new ei().fromJson(e,r)}static fromJsonString(e,r){return new ei().fromJsonString(e,r)}static equals(e,r){return x.util.equals(ei,e,r)}};y(ei,"runtime",x),y(ei,"typeName","yorkie.v1.Operation.Set"),y(ei,"fields",x.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:St},{no:2,name:"key",kind:"scalar",T:9},{no:3,name:"value",kind:"message",T:Cn},{no:4,name:"executed_at",kind:"message",T:St}]));let Nd=ei;const ni=class ni extends dt{constructor(e){super();y(this,"parentCreatedAt");y(this,"prevCreatedAt");y(this,"value");y(this,"executedAt");x.util.initPartial(e,this)}static fromBinary(e,r){return new ni().fromBinary(e,r)}static fromJson(e,r){return new ni().fromJson(e,r)}static fromJsonString(e,r){return new ni().fromJsonString(e,r)}static equals(e,r){return x.util.equals(ni,e,r)}};y(ni,"runtime",x),y(ni,"typeName","yorkie.v1.Operation.Add"),y(ni,"fields",x.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:St},{no:2,name:"prev_created_at",kind:"message",T:St},{no:3,name:"value",kind:"message",T:Cn},{no:4,name:"executed_at",kind:"message",T:St}]));let kd=ni;const ri=class ri extends dt{constructor(e){super();y(this,"parentCreatedAt");y(this,"prevCreatedAt");y(this,"createdAt");y(this,"executedAt");x.util.initPartial(e,this)}static fromBinary(e,r){return new ri().fromBinary(e,r)}static fromJson(e,r){return new ri().fromJson(e,r)}static fromJsonString(e,r){return new ri().fromJsonString(e,r)}static equals(e,r){return x.util.equals(ri,e,r)}};y(ri,"runtime",x),y(ri,"typeName","yorkie.v1.Operation.Move"),y(ri,"fields",x.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:St},{no:2,name:"prev_created_at",kind:"message",T:St},{no:3,name:"created_at",kind:"message",T:St},{no:4,name:"executed_at",kind:"message",T:St}]));let Cd=ri;const ii=class ii extends dt{constructor(e){super();y(this,"parentCreatedAt");y(this,"createdAt");y(this,"executedAt");x.util.initPartial(e,this)}static fromBinary(e,r){return new ii().fromBinary(e,r)}static fromJson(e,r){return new ii().fromJson(e,r)}static fromJsonString(e,r){return new ii().fromJsonString(e,r)}static equals(e,r){return x.util.equals(ii,e,r)}};y(ii,"runtime",x),y(ii,"typeName","yorkie.v1.Operation.Remove"),y(ii,"fields",x.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:St},{no:2,name:"created_at",kind:"message",T:St},{no:3,name:"executed_at",kind:"message",T:St}]));let Dd=ii;const si=class si extends dt{constructor(e){super();y(this,"parentCreatedAt");y(this,"from");y(this,"to");y(this,"createdAtMapByActor",{});y(this,"content","");y(this,"executedAt");y(this,"attributes",{});x.util.initPartial(e,this)}static fromBinary(e,r){return new si().fromBinary(e,r)}static fromJson(e,r){return new si().fromJson(e,r)}static fromJsonString(e,r){return new si().fromJsonString(e,r)}static equals(e,r){return x.util.equals(si,e,r)}};y(si,"runtime",x),y(si,"typeName","yorkie.v1.Operation.Edit"),y(si,"fields",x.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:St},{no:2,name:"from",kind:"message",T:so},{no:3,name:"to",kind:"message",T:so},{no:4,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:St}},{no:5,name:"content",kind:"scalar",T:9},{no:6,name:"executed_at",kind:"message",T:St},{no:7,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}}]));let Id=si;const ai=class ai extends dt{constructor(e){super();y(this,"parentCreatedAt");y(this,"from");y(this,"to");y(this,"attributes",{});y(this,"executedAt");y(this,"createdAtMapByActor",{});x.util.initPartial(e,this)}static fromBinary(e,r){return new ai().fromBinary(e,r)}static fromJson(e,r){return new ai().fromJson(e,r)}static fromJsonString(e,r){return new ai().fromJsonString(e,r)}static equals(e,r){return x.util.equals(ai,e,r)}};y(ai,"runtime",x),y(ai,"typeName","yorkie.v1.Operation.Style"),y(ai,"fields",x.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:St},{no:2,name:"from",kind:"message",T:so},{no:3,name:"to",kind:"message",T:so},{no:4,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:5,name:"executed_at",kind:"message",T:St},{no:6,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:St}}]));let Od=ai;const oi=class oi extends dt{constructor(e){super();y(this,"parentCreatedAt");y(this,"value");y(this,"executedAt");x.util.initPartial(e,this)}static fromBinary(e,r){return new oi().fromBinary(e,r)}static fromJson(e,r){return new oi().fromJson(e,r)}static fromJsonString(e,r){return new oi().fromJsonString(e,r)}static equals(e,r){return x.util.equals(oi,e,r)}};y(oi,"runtime",x),y(oi,"typeName","yorkie.v1.Operation.Increase"),y(oi,"fields",x.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:St},{no:2,name:"value",kind:"message",T:Cn},{no:3,name:"executed_at",kind:"message",T:St}]));let Md=oi;const li=class li extends dt{constructor(e){super();y(this,"parentCreatedAt");y(this,"from");y(this,"to");y(this,"createdAtMapByActor",{});y(this,"contents",[]);y(this,"splitLevel",0);y(this,"executedAt");x.util.initPartial(e,this)}static fromBinary(e,r){return new li().fromBinary(e,r)}static fromJson(e,r){return new li().fromJson(e,r)}static fromJsonString(e,r){return new li().fromJsonString(e,r)}static equals(e,r){return x.util.equals(li,e,r)}};y(li,"runtime",x),y(li,"typeName","yorkie.v1.Operation.TreeEdit"),y(li,"fields",x.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:St},{no:2,name:"from",kind:"message",T:ro},{no:3,name:"to",kind:"message",T:ro},{no:4,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:St}},{no:5,name:"contents",kind:"message",T:Vd,repeated:!0},{no:7,name:"split_level",kind:"scalar",T:5},{no:6,name:"executed_at",kind:"message",T:St}]));let Rd=li;const ui=class ui extends dt{constructor(e){super();y(this,"parentCreatedAt");y(this,"from");y(this,"to");y(this,"attributes",{});y(this,"executedAt");y(this,"attributesToRemove",[]);y(this,"createdAtMapByActor",{});x.util.initPartial(e,this)}static fromBinary(e,r){return new ui().fromBinary(e,r)}static fromJson(e,r){return new ui().fromJson(e,r)}static fromJsonString(e,r){return new ui().fromJsonString(e,r)}static equals(e,r){return x.util.equals(ui,e,r)}};y(ui,"runtime",x),y(ui,"typeName","yorkie.v1.Operation.TreeStyle"),y(ui,"fields",x.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:St},{no:2,name:"from",kind:"message",T:ro},{no:3,name:"to",kind:"message",T:ro},{no:4,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:5,name:"executed_at",kind:"message",T:St},{no:6,name:"attributes_to_remove",kind:"scalar",T:9,repeated:!0},{no:7,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:St}}]));let Bd=ui;const ci=class ci extends dt{constructor(e){super();y(this,"parentCreatedAt");y(this,"createdAt");y(this,"value");y(this,"executedAt");x.util.initPartial(e,this)}static fromBinary(e,r){return new ci().fromBinary(e,r)}static fromJson(e,r){return new ci().fromJson(e,r)}static fromJsonString(e,r){return new ci().fromJsonString(e,r)}static equals(e,r){return x.util.equals(ci,e,r)}};y(ci,"runtime",x),y(ci,"typeName","yorkie.v1.Operation.ArraySet"),y(ci,"fields",x.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:St},{no:2,name:"created_at",kind:"message",T:St},{no:3,name:"value",kind:"message",T:Cn},{no:4,name:"executed_at",kind:"message",T:St}]));let zd=ci;const fi=class fi extends dt{constructor(e){super();y(this,"createdAt");y(this,"movedAt");y(this,"removedAt");y(this,"type",0);y(this,"value",new Uint8Array(0));x.util.initPartial(e,this)}static fromBinary(e,r){return new fi().fromBinary(e,r)}static fromJson(e,r){return new fi().fromJson(e,r)}static fromJsonString(e,r){return new fi().fromJsonString(e,r)}static equals(e,r){return x.util.equals(fi,e,r)}};y(fi,"runtime",x),y(fi,"typeName","yorkie.v1.JSONElementSimple"),y(fi,"fields",x.util.newFieldList(()=>[{no:1,name:"created_at",kind:"message",T:St},{no:2,name:"moved_at",kind:"message",T:St},{no:3,name:"removed_at",kind:"message",T:St},{no:4,name:"type",kind:"enum",T:x.getEnumType(Mt)},{no:5,name:"value",kind:"scalar",T:12}]));let Cn=fi;const di=class di extends dt{constructor(e){super();y(this,"body",{case:void 0});x.util.initPartial(e,this)}static fromBinary(e,r){return new di().fromBinary(e,r)}static fromJson(e,r){return new di().fromJson(e,r)}static fromJsonString(e,r){return new di().fromJsonString(e,r)}static equals(e,r){return x.util.equals(di,e,r)}};y(di,"runtime",x),y(di,"typeName","yorkie.v1.JSONElement"),y(di,"fields",x.util.newFieldList(()=>[{no:1,name:"json_object",kind:"message",T:Ld,oneof:"body"},{no:2,name:"json_array",kind:"message",T:Ud,oneof:"body"},{no:3,name:"primitive",kind:"message",T:_d,oneof:"body"},{no:5,name:"text",kind:"message",T:Pd,oneof:"body"},{no:6,name:"counter",kind:"message",T:qd,oneof:"body"},{no:7,name:"tree",kind:"message",T:Jd,oneof:"body"}]));let an=di;const hi=class hi extends dt{constructor(e){super();y(this,"nodes",[]);y(this,"createdAt");y(this,"movedAt");y(this,"removedAt");x.util.initPartial(e,this)}static fromBinary(e,r){return new hi().fromBinary(e,r)}static fromJson(e,r){return new hi().fromJson(e,r)}static fromJsonString(e,r){return new hi().fromJsonString(e,r)}static equals(e,r){return x.util.equals(hi,e,r)}};y(hi,"runtime",x),y(hi,"typeName","yorkie.v1.JSONElement.JSONObject"),y(hi,"fields",x.util.newFieldList(()=>[{no:1,name:"nodes",kind:"message",T:xx,repeated:!0},{no:2,name:"created_at",kind:"message",T:St},{no:3,name:"moved_at",kind:"message",T:St},{no:4,name:"removed_at",kind:"message",T:St}]));let Ld=hi;const gi=class gi extends dt{constructor(e){super();y(this,"nodes",[]);y(this,"createdAt");y(this,"movedAt");y(this,"removedAt");x.util.initPartial(e,this)}static fromBinary(e,r){return new gi().fromBinary(e,r)}static fromJson(e,r){return new gi().fromJson(e,r)}static fromJsonString(e,r){return new gi().fromJsonString(e,r)}static equals(e,r){return x.util.equals(gi,e,r)}};y(gi,"runtime",x),y(gi,"typeName","yorkie.v1.JSONElement.JSONArray"),y(gi,"fields",x.util.newFieldList(()=>[{no:1,name:"nodes",kind:"message",T:$d,repeated:!0},{no:2,name:"created_at",kind:"message",T:St},{no:3,name:"moved_at",kind:"message",T:St},{no:4,name:"removed_at",kind:"message",T:St}]));let Ud=gi;const mi=class mi extends dt{constructor(e){super();y(this,"type",0);y(this,"value",new Uint8Array(0));y(this,"createdAt");y(this,"movedAt");y(this,"removedAt");x.util.initPartial(e,this)}static fromBinary(e,r){return new mi().fromBinary(e,r)}static fromJson(e,r){return new mi().fromJson(e,r)}static fromJsonString(e,r){return new mi().fromJsonString(e,r)}static equals(e,r){return x.util.equals(mi,e,r)}};y(mi,"runtime",x),y(mi,"typeName","yorkie.v1.JSONElement.Primitive"),y(mi,"fields",x.util.newFieldList(()=>[{no:1,name:"type",kind:"enum",T:x.getEnumType(Mt)},{no:2,name:"value",kind:"scalar",T:12},{no:3,name:"created_at",kind:"message",T:St},{no:4,name:"moved_at",kind:"message",T:St},{no:5,name:"removed_at",kind:"message",T:St}]));let _d=mi;const yi=class yi extends dt{constructor(e){super();y(this,"nodes",[]);y(this,"createdAt");y(this,"movedAt");y(this,"removedAt");x.util.initPartial(e,this)}static fromBinary(e,r){return new yi().fromBinary(e,r)}static fromJson(e,r){return new yi().fromJson(e,r)}static fromJsonString(e,r){return new yi().fromJsonString(e,r)}static equals(e,r){return x.util.equals(yi,e,r)}};y(yi,"runtime",x),y(yi,"typeName","yorkie.v1.JSONElement.Text"),y(yi,"fields",x.util.newFieldList(()=>[{no:1,name:"nodes",kind:"message",T:Hd,repeated:!0},{no:2,name:"created_at",kind:"message",T:St},{no:3,name:"moved_at",kind:"message",T:St},{no:4,name:"removed_at",kind:"message",T:St}]));let Pd=yi;const pi=class pi extends dt{constructor(e){super();y(this,"type",0);y(this,"value",new Uint8Array(0));y(this,"createdAt");y(this,"movedAt");y(this,"removedAt");x.util.initPartial(e,this)}static fromBinary(e,r){return new pi().fromBinary(e,r)}static fromJson(e,r){return new pi().fromJson(e,r)}static fromJsonString(e,r){return new pi().fromJsonString(e,r)}static equals(e,r){return x.util.equals(pi,e,r)}};y(pi,"runtime",x),y(pi,"typeName","yorkie.v1.JSONElement.Counter"),y(pi,"fields",x.util.newFieldList(()=>[{no:1,name:"type",kind:"enum",T:x.getEnumType(Mt)},{no:2,name:"value",kind:"scalar",T:12},{no:3,name:"created_at",kind:"message",T:St},{no:4,name:"moved_at",kind:"message",T:St},{no:5,name:"removed_at",kind:"message",T:St}]));let qd=pi;const vi=class vi extends dt{constructor(e){super();y(this,"nodes",[]);y(this,"createdAt");y(this,"movedAt");y(this,"removedAt");x.util.initPartial(e,this)}static fromBinary(e,r){return new vi().fromBinary(e,r)}static fromJson(e,r){return new vi().fromJson(e,r)}static fromJsonString(e,r){return new vi().fromJsonString(e,r)}static equals(e,r){return x.util.equals(vi,e,r)}};y(vi,"runtime",x),y(vi,"typeName","yorkie.v1.JSONElement.Tree"),y(vi,"fields",x.util.newFieldList(()=>[{no:1,name:"nodes",kind:"message",T:ac,repeated:!0},{no:2,name:"created_at",kind:"message",T:St},{no:3,name:"moved_at",kind:"message",T:St},{no:4,name:"removed_at",kind:"message",T:St}]));let Jd=vi;var Bn;let xx=(Bn=class extends dt{constructor(e){super();y(this,"key","");y(this,"element");x.util.initPartial(e,this)}static fromBinary(e,r){return new Bn().fromBinary(e,r)}static fromJson(e,r){return new Bn().fromJson(e,r)}static fromJsonString(e,r){return new Bn().fromJsonString(e,r)}static equals(e,r){return x.util.equals(Bn,e,r)}},y(Bn,"runtime",x),y(Bn,"typeName","yorkie.v1.RHTNode"),y(Bn,"fields",x.util.newFieldList(()=>[{no:1,name:"key",kind:"scalar",T:9},{no:2,name:"element",kind:"message",T:an}])),Bn);const hr=class hr extends dt{constructor(e){super();y(this,"next");y(this,"element");x.util.initPartial(e,this)}static fromBinary(e,r){return new hr().fromBinary(e,r)}static fromJson(e,r){return new hr().fromJson(e,r)}static fromJsonString(e,r){return new hr().fromJsonString(e,r)}static equals(e,r){return x.util.equals(hr,e,r)}};y(hr,"runtime",x),y(hr,"typeName","yorkie.v1.RGANode"),y(hr,"fields",x.util.newFieldList(()=>[{no:1,name:"next",kind:"message",T:hr},{no:2,name:"element",kind:"message",T:an}]));let $d=hr;const wi=class wi extends dt{constructor(e){super();y(this,"value","");y(this,"updatedAt");y(this,"isRemoved",!1);x.util.initPartial(e,this)}static fromBinary(e,r){return new wi().fromBinary(e,r)}static fromJson(e,r){return new wi().fromJson(e,r)}static fromJsonString(e,r){return new wi().fromJsonString(e,r)}static equals(e,r){return x.util.equals(wi,e,r)}};y(wi,"runtime",x),y(wi,"typeName","yorkie.v1.NodeAttr"),y(wi,"fields",x.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:9},{no:2,name:"updated_at",kind:"message",T:St},{no:3,name:"is_removed",kind:"scalar",T:8}]));let yl=wi;const Si=class Si extends dt{constructor(e){super();y(this,"id");y(this,"value","");y(this,"removedAt");y(this,"insPrevId");y(this,"attributes",{});x.util.initPartial(e,this)}static fromBinary(e,r){return new Si().fromBinary(e,r)}static fromJson(e,r){return new Si().fromJson(e,r)}static fromJsonString(e,r){return new Si().fromJsonString(e,r)}static equals(e,r){return x.util.equals(Si,e,r)}};y(Si,"runtime",x),y(Si,"typeName","yorkie.v1.TextNode"),y(Si,"fields",x.util.newFieldList(()=>[{no:1,name:"id",kind:"message",T:sc},{no:2,name:"value",kind:"scalar",T:9},{no:3,name:"removed_at",kind:"message",T:St},{no:4,name:"ins_prev_id",kind:"message",T:sc},{no:5,name:"attributes",kind:"map",K:9,V:{kind:"message",T:yl}}]));let Hd=Si;const bi=class bi extends dt{constructor(e){super();y(this,"createdAt");y(this,"offset",0);x.util.initPartial(e,this)}static fromBinary(e,r){return new bi().fromBinary(e,r)}static fromJson(e,r){return new bi().fromJson(e,r)}static fromJsonString(e,r){return new bi().fromJsonString(e,r)}static equals(e,r){return x.util.equals(bi,e,r)}};y(bi,"runtime",x),y(bi,"typeName","yorkie.v1.TextNodeID"),y(bi,"fields",x.util.newFieldList(()=>[{no:1,name:"created_at",kind:"message",T:St},{no:2,name:"offset",kind:"scalar",T:5}]));let sc=bi;const xi=class xi extends dt{constructor(e){super();y(this,"id");y(this,"type","");y(this,"value","");y(this,"removedAt");y(this,"insPrevId");y(this,"insNextId");y(this,"depth",0);y(this,"attributes",{});x.util.initPartial(e,this)}static fromBinary(e,r){return new xi().fromBinary(e,r)}static fromJson(e,r){return new xi().fromJson(e,r)}static fromJsonString(e,r){return new xi().fromJsonString(e,r)}static equals(e,r){return x.util.equals(xi,e,r)}};y(xi,"runtime",x),y(xi,"typeName","yorkie.v1.TreeNode"),y(xi,"fields",x.util.newFieldList(()=>[{no:1,name:"id",kind:"message",T:wa},{no:2,name:"type",kind:"scalar",T:9},{no:3,name:"value",kind:"scalar",T:9},{no:4,name:"removed_at",kind:"message",T:St},{no:5,name:"ins_prev_id",kind:"message",T:wa},{no:6,name:"ins_next_id",kind:"message",T:wa},{no:7,name:"depth",kind:"scalar",T:5},{no:8,name:"attributes",kind:"map",K:9,V:{kind:"message",T:yl}}]));let ac=xi;const Ti=class Ti extends dt{constructor(e){super();y(this,"content",[]);x.util.initPartial(e,this)}static fromBinary(e,r){return new Ti().fromBinary(e,r)}static fromJson(e,r){return new Ti().fromJson(e,r)}static fromJsonString(e,r){return new Ti().fromJsonString(e,r)}static equals(e,r){return x.util.equals(Ti,e,r)}};y(Ti,"runtime",x),y(Ti,"typeName","yorkie.v1.TreeNodes"),y(Ti,"fields",x.util.newFieldList(()=>[{no:1,name:"content",kind:"message",T:ac,repeated:!0}]));let Vd=Ti;const Ai=class Ai extends dt{constructor(e){super();y(this,"createdAt");y(this,"offset",0);x.util.initPartial(e,this)}static fromBinary(e,r){return new Ai().fromBinary(e,r)}static fromJson(e,r){return new Ai().fromJson(e,r)}static fromJsonString(e,r){return new Ai().fromJsonString(e,r)}static equals(e,r){return x.util.equals(Ai,e,r)}};y(Ai,"runtime",x),y(Ai,"typeName","yorkie.v1.TreeNodeID"),y(Ai,"fields",x.util.newFieldList(()=>[{no:1,name:"created_at",kind:"message",T:St},{no:2,name:"offset",kind:"scalar",T:5}]));let wa=Ai;const Ei=class Ei extends dt{constructor(e){super();y(this,"parentId");y(this,"leftSiblingId");x.util.initPartial(e,this)}static fromBinary(e,r){return new Ei().fromBinary(e,r)}static fromJson(e,r){return new Ei().fromJson(e,r)}static fromJsonString(e,r){return new Ei().fromJsonString(e,r)}static equals(e,r){return x.util.equals(Ei,e,r)}};y(Ei,"runtime",x),y(Ei,"typeName","yorkie.v1.TreePos"),y(Ei,"fields",x.util.newFieldList(()=>[{no:1,name:"parent_id",kind:"message",T:wa},{no:2,name:"left_sibling_id",kind:"message",T:wa}]));let ro=Ei;const Ni=class Ni extends dt{constructor(e){super();y(this,"id","");y(this,"authProvider","");y(this,"username","");y(this,"createdAt");x.util.initPartial(e,this)}static fromBinary(e,r){return new Ni().fromBinary(e,r)}static fromJson(e,r){return new Ni().fromJson(e,r)}static fromJsonString(e,r){return new Ni().fromJsonString(e,r)}static equals(e,r){return x.util.equals(Ni,e,r)}};y(Ni,"runtime",x),y(Ni,"typeName","yorkie.v1.User"),y(Ni,"fields",x.util.newFieldList(()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"auth_provider",kind:"scalar",T:9},{no:3,name:"username",kind:"scalar",T:9},{no:4,name:"created_at",kind:"message",T:ze}]));let wb=Ni;const ki=class ki extends dt{constructor(e){super();y(this,"id","");y(this,"name","");y(this,"publicKey","");y(this,"secretKey","");y(this,"authWebhookUrl","");y(this,"authWebhookMethods",[]);y(this,"authWebhookMaxRetries",$t.zero);y(this,"authWebhookMinWaitInterval","");y(this,"authWebhookMaxWaitInterval","");y(this,"authWebhookRequestTimeout","");y(this,"eventWebhookUrl","");y(this,"eventWebhookEvents",[]);y(this,"eventWebhookMaxRetries",$t.zero);y(this,"eventWebhookMinWaitInterval","");y(this,"eventWebhookMaxWaitInterval","");y(this,"eventWebhookRequestTimeout","");y(this,"clientDeactivateThreshold","");y(this,"snapshotThreshold",$t.zero);y(this,"snapshotInterval",$t.zero);y(this,"maxSubscribersPerDocument",0);y(this,"maxAttachmentsPerDocument",0);y(this,"maxSizePerDocument",0);y(this,"removeOnDetach",!1);y(this,"autoRevisionEnabled",!1);y(this,"allowedOrigins",[]);y(this,"createdAt");y(this,"updatedAt");x.util.initPartial(e,this)}static fromBinary(e,r){return new ki().fromBinary(e,r)}static fromJson(e,r){return new ki().fromJson(e,r)}static fromJsonString(e,r){return new ki().fromJsonString(e,r)}static equals(e,r){return x.util.equals(ki,e,r)}};y(ki,"runtime",x),y(ki,"typeName","yorkie.v1.Project"),y(ki,"fields",x.util.newFieldList(()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"public_key",kind:"scalar",T:9},{no:4,name:"secret_key",kind:"scalar",T:9},{no:5,name:"auth_webhook_url",kind:"scalar",T:9},{no:6,name:"auth_webhook_methods",kind:"scalar",T:9,repeated:!0},{no:17,name:"auth_webhook_max_retries",kind:"scalar",T:4},{no:18,name:"auth_webhook_min_wait_interval",kind:"scalar",T:9},{no:19,name:"auth_webhook_max_wait_interval",kind:"scalar",T:9},{no:20,name:"auth_webhook_request_timeout",kind:"scalar",T:9},{no:7,name:"event_webhook_url",kind:"scalar",T:9},{no:8,name:"event_webhook_events",kind:"scalar",T:9,repeated:!0},{no:21,name:"event_webhook_max_retries",kind:"scalar",T:4},{no:22,name:"event_webhook_min_wait_interval",kind:"scalar",T:9},{no:23,name:"event_webhook_max_wait_interval",kind:"scalar",T:9},{no:24,name:"event_webhook_request_timeout",kind:"scalar",T:9},{no:9,name:"client_deactivate_threshold",kind:"scalar",T:9},{no:25,name:"snapshot_threshold",kind:"scalar",T:3},{no:26,name:"snapshot_interval",kind:"scalar",T:3},{no:10,name:"max_subscribers_per_document",kind:"scalar",T:5},{no:11,name:"max_attachments_per_document",kind:"scalar",T:5},{no:15,name:"max_size_per_document",kind:"scalar",T:5},{no:16,name:"remove_on_detach",kind:"scalar",T:8},{no:27,name:"auto_revision_enabled",kind:"scalar",T:8},{no:14,name:"allowed_origins",kind:"scalar",T:9,repeated:!0},{no:12,name:"created_at",kind:"message",T:ze},{no:13,name:"updated_at",kind:"message",T:ze}]));let Sb=ki;const Ci=class Ci extends dt{constructor(e){super();y(this,"timestamp",$t.zero);y(this,"value",0);x.util.initPartial(e,this)}static fromBinary(e,r){return new Ci().fromBinary(e,r)}static fromJson(e,r){return new Ci().fromJson(e,r)}static fromJsonString(e,r){return new Ci().fromJsonString(e,r)}static equals(e,r){return x.util.equals(Ci,e,r)}};y(Ci,"runtime",x),y(Ci,"typeName","yorkie.v1.MetricPoint"),y(Ci,"fields",x.util.newFieldList(()=>[{no:1,name:"timestamp",kind:"scalar",T:3},{no:2,name:"value",kind:"scalar",T:5}]));let bb=Ci;const Di=class Di extends dt{constructor(e){super();y(this,"name");y(this,"authWebhookUrl");y(this,"authWebhookMethods");y(this,"authWebhookMaxRetries");y(this,"authWebhookMinWaitInterval");y(this,"authWebhookMaxWaitInterval");y(this,"authWebhookRequestTimeout");y(this,"eventWebhookUrl");y(this,"eventWebhookEvents");y(this,"eventWebhookMaxRetries");y(this,"eventWebhookMinWaitInterval");y(this,"eventWebhookMaxWaitInterval");y(this,"eventWebhookRequestTimeout");y(this,"snapshotThreshold");y(this,"snapshotInterval");y(this,"clientDeactivateThreshold");y(this,"maxSubscribersPerDocument");y(this,"maxAttachmentsPerDocument");y(this,"maxSizePerDocument");y(this,"removeOnDetach");y(this,"autoRevisionEnabled");y(this,"allowedOrigins");x.util.initPartial(e,this)}static fromBinary(e,r){return new Di().fromBinary(e,r)}static fromJson(e,r){return new Di().fromJson(e,r)}static fromJsonString(e,r){return new Di().fromJsonString(e,r)}static equals(e,r){return x.util.equals(Di,e,r)}};y(Di,"runtime",x),y(Di,"typeName","yorkie.v1.UpdatableProjectFields"),y(Di,"fields",x.util.newFieldList(()=>[{no:1,name:"name",kind:"message",T:Ee},{no:2,name:"auth_webhook_url",kind:"message",T:Ee},{no:3,name:"auth_webhook_methods",kind:"message",T:wy},{no:12,name:"auth_webhook_max_retries",kind:"message",T:_n},{no:13,name:"auth_webhook_min_wait_interval",kind:"message",T:Ee},{no:14,name:"auth_webhook_max_wait_interval",kind:"message",T:Ee},{no:15,name:"auth_webhook_request_timeout",kind:"message",T:Ee},{no:4,name:"event_webhook_url",kind:"message",T:Ee},{no:5,name:"event_webhook_events",kind:"message",T:Sy},{no:16,name:"event_webhook_max_retries",kind:"message",T:_n},{no:17,name:"event_webhook_min_wait_interval",kind:"message",T:Ee},{no:18,name:"event_webhook_max_wait_interval",kind:"message",T:Ee},{no:19,name:"event_webhook_request_timeout",kind:"message",T:Ee},{no:20,name:"snapshot_threshold",kind:"message",T:Un},{no:21,name:"snapshot_interval",kind:"message",T:Un},{no:6,name:"client_deactivate_threshold",kind:"message",T:Ee},{no:7,name:"max_subscribers_per_document",kind:"message",T:mn},{no:8,name:"max_attachments_per_document",kind:"message",T:mn},{no:10,name:"max_size_per_document",kind:"message",T:mn},{no:11,name:"remove_on_detach",kind:"message",T:Pn},{no:22,name:"auto_revision_enabled",kind:"message",T:Pn},{no:9,name:"allowed_origins",kind:"message",T:by}]));let xb=Di;const Ii=class Ii extends dt{constructor(e){super();y(this,"methods",[]);x.util.initPartial(e,this)}static fromBinary(e,r){return new Ii().fromBinary(e,r)}static fromJson(e,r){return new Ii().fromJson(e,r)}static fromJsonString(e,r){return new Ii().fromJsonString(e,r)}static equals(e,r){return x.util.equals(Ii,e,r)}};y(Ii,"runtime",x),y(Ii,"typeName","yorkie.v1.UpdatableProjectFields.AuthWebhookMethods"),y(Ii,"fields",x.util.newFieldList(()=>[{no:1,name:"methods",kind:"scalar",T:9,repeated:!0}]));let wy=Ii;const Oi=class Oi extends dt{constructor(e){super();y(this,"events",[]);x.util.initPartial(e,this)}static fromBinary(e,r){return new Oi().fromBinary(e,r)}static fromJson(e,r){return new Oi().fromJson(e,r)}static fromJsonString(e,r){return new Oi().fromJsonString(e,r)}static equals(e,r){return x.util.equals(Oi,e,r)}};y(Oi,"runtime",x),y(Oi,"typeName","yorkie.v1.UpdatableProjectFields.EventWebhookEvents"),y(Oi,"fields",x.util.newFieldList(()=>[{no:1,name:"events",kind:"scalar",T:9,repeated:!0}]));let Sy=Oi;const Mi=class Mi extends dt{constructor(e){super();y(this,"origins",[]);x.util.initPartial(e,this)}static fromBinary(e,r){return new Mi().fromBinary(e,r)}static fromJson(e,r){return new Mi().fromJson(e,r)}static fromJsonString(e,r){return new Mi().fromJsonString(e,r)}static equals(e,r){return x.util.equals(Mi,e,r)}};y(Mi,"runtime",x),y(Mi,"typeName","yorkie.v1.UpdatableProjectFields.AllowedOrigins"),y(Mi,"fields",x.util.newFieldList(()=>[{no:1,name:"origins",kind:"scalar",T:9,repeated:!0}]));let by=Mi;const Ri=class Ri extends dt{constructor(e){super();y(this,"id","");y(this,"key","");y(this,"root","");y(this,"attachedClients",0);y(this,"documentSize");y(this,"schemaKey","");y(this,"presences",{});y(this,"createdAt");y(this,"accessedAt");y(this,"updatedAt");x.util.initPartial(e,this)}static fromBinary(e,r){return new Ri().fromBinary(e,r)}static fromJson(e,r){return new Ri().fromJson(e,r)}static fromJsonString(e,r){return new Ri().fromJsonString(e,r)}static equals(e,r){return x.util.equals(Ri,e,r)}};y(Ri,"runtime",x),y(Ri,"typeName","yorkie.v1.DocumentSummary"),y(Ri,"fields",x.util.newFieldList(()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"key",kind:"scalar",T:9},{no:3,name:"root",kind:"scalar",T:9},{no:7,name:"attached_clients",kind:"scalar",T:5},{no:8,name:"document_size",kind:"message",T:Ey},{no:9,name:"schema_key",kind:"scalar",T:9},{no:10,name:"presences",kind:"map",K:9,V:{kind:"message",T:pl}},{no:4,name:"created_at",kind:"message",T:ze},{no:5,name:"accessed_at",kind:"message",T:ze},{no:6,name:"updated_at",kind:"message",T:ze}]));let Tb=Ri;const Bi=class Bi extends dt{constructor(e){super();y(this,"type",0);y(this,"presence");x.util.initPartial(e,this)}static fromBinary(e,r){return new Bi().fromBinary(e,r)}static fromJson(e,r){return new Bi().fromJson(e,r)}static fromJsonString(e,r){return new Bi().fromJsonString(e,r)}static equals(e,r){return x.util.equals(Bi,e,r)}};y(Bi,"runtime",x),y(Bi,"typeName","yorkie.v1.PresenceChange"),y(Bi,"fields",x.util.newFieldList(()=>[{no:1,name:"type",kind:"enum",T:x.getEnumType(io)},{no:2,name:"presence",kind:"message",T:pl}]));let oc=Bi;var io=(n=>(n[n.UNSPECIFIED=0]="UNSPECIFIED",n[n.PUT=1]="PUT",n[n.DELETE=2]="DELETE",n[n.CLEAR=3]="CLEAR",n))(io||{});x.util.setEnumType(io,"yorkie.v1.PresenceChange.ChangeType",[{no:0,name:"CHANGE_TYPE_UNSPECIFIED"},{no:1,name:"CHANGE_TYPE_PUT"},{no:2,name:"CHANGE_TYPE_DELETE"},{no:3,name:"CHANGE_TYPE_CLEAR"}]);const zi=class zi extends dt{constructor(e){super();y(this,"data",{});x.util.initPartial(e,this)}static fromBinary(e,r){return new zi().fromBinary(e,r)}static fromJson(e,r){return new zi().fromJson(e,r)}static fromJsonString(e,r){return new zi().fromJsonString(e,r)}static equals(e,r){return x.util.equals(zi,e,r)}};y(zi,"runtime",x),y(zi,"typeName","yorkie.v1.Presence"),y(zi,"fields",x.util.newFieldList(()=>[{no:1,name:"data",kind:"map",K:9,V:{kind:"scalar",T:9}}]));let pl=zi;const Li=class Li extends dt{constructor(e){super();y(this,"key","");y(this,"presenceCount",0);x.util.initPartial(e,this)}static fromBinary(e,r){return new Li().fromBinary(e,r)}static fromJson(e,r){return new Li().fromJson(e,r)}static fromJsonString(e,r){return new Li().fromJsonString(e,r)}static equals(e,r){return x.util.equals(Li,e,r)}};y(Li,"runtime",x),y(Li,"typeName","yorkie.v1.ChannelSummary"),y(Li,"fields",x.util.newFieldList(()=>[{no:1,name:"key",kind:"scalar",T:9},{no:2,name:"presence_count",kind:"scalar",T:5}]));let Ab=Li;var zn;let Tx=(zn=class extends dt{constructor(e){super();y(this,"serverSeq",$t.zero);y(this,"clientSeq",0);x.util.initPartial(e,this)}static fromBinary(e,r){return new zn().fromBinary(e,r)}static fromJson(e,r){return new zn().fromJson(e,r)}static fromJsonString(e,r){return new zn().fromJsonString(e,r)}static equals(e,r){return x.util.equals(zn,e,r)}},y(zn,"runtime",x),y(zn,"typeName","yorkie.v1.Checkpoint"),y(zn,"fields",x.util.newFieldList(()=>[{no:1,name:"server_seq",kind:"scalar",T:3},{no:2,name:"client_seq",kind:"scalar",T:13}])),zn);const Ui=class Ui extends dt{constructor(e){super();y(this,"createdAt");y(this,"offset",0);y(this,"relativeOffset",0);x.util.initPartial(e,this)}static fromBinary(e,r){return new Ui().fromBinary(e,r)}static fromJson(e,r){return new Ui().fromJson(e,r)}static fromJsonString(e,r){return new Ui().fromJsonString(e,r)}static equals(e,r){return x.util.equals(Ui,e,r)}};y(Ui,"runtime",x),y(Ui,"typeName","yorkie.v1.TextNodePos"),y(Ui,"fields",x.util.newFieldList(()=>[{no:1,name:"created_at",kind:"message",T:St},{no:2,name:"offset",kind:"scalar",T:5},{no:3,name:"relative_offset",kind:"scalar",T:5}]));let so=Ui;var Ln;let St=(Ln=class extends dt{constructor(e){super();y(this,"lamport",$t.zero);y(this,"delimiter",0);y(this,"actorId",new Uint8Array(0));x.util.initPartial(e,this)}static fromBinary(e,r){return new Ln().fromBinary(e,r)}static fromJson(e,r){return new Ln().fromJson(e,r)}static fromJsonString(e,r){return new Ln().fromJsonString(e,r)}static equals(e,r){return x.util.equals(Ln,e,r)}},y(Ln,"runtime",x),y(Ln,"typeName","yorkie.v1.TimeTicket"),y(Ln,"fields",x.util.newFieldList(()=>[{no:1,name:"lamport",kind:"scalar",T:3},{no:2,name:"delimiter",kind:"scalar",T:13},{no:3,name:"actor_id",kind:"scalar",T:12}])),Ln);const _i=class _i extends dt{constructor(e){super();y(this,"topic","");y(this,"payload",new Uint8Array(0));x.util.initPartial(e,this)}static fromBinary(e,r){return new _i().fromBinary(e,r)}static fromJson(e,r){return new _i().fromJson(e,r)}static fromJsonString(e,r){return new _i().fromJsonString(e,r)}static equals(e,r){return x.util.equals(_i,e,r)}};y(_i,"runtime",x),y(_i,"typeName","yorkie.v1.DocEventBody"),y(_i,"fields",x.util.newFieldList(()=>[{no:1,name:"topic",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:12}]));let xy=_i;const Pi=class Pi extends dt{constructor(e){super();y(this,"type",0);y(this,"publisher","");y(this,"body");x.util.initPartial(e,this)}static fromBinary(e,r){return new Pi().fromBinary(e,r)}static fromJson(e,r){return new Pi().fromJson(e,r)}static fromJsonString(e,r){return new Pi().fromJsonString(e,r)}static equals(e,r){return x.util.equals(Pi,e,r)}};y(Pi,"runtime",x),y(Pi,"typeName","yorkie.v1.DocEvent"),y(Pi,"fields",x.util.newFieldList(()=>[{no:1,name:"type",kind:"enum",T:x.getEnumType(ml)},{no:2,name:"publisher",kind:"scalar",T:9},{no:3,name:"body",kind:"message",T:xy}]));let Ty=Pi;const qi=class qi extends dt{constructor(e){super();y(this,"type",0);y(this,"publisher","");y(this,"count",$t.zero);y(this,"seq",$t.zero);y(this,"topic","");y(this,"payload",new Uint8Array(0));x.util.initPartial(e,this)}static fromBinary(e,r){return new qi().fromBinary(e,r)}static fromJson(e,r){return new qi().fromJson(e,r)}static fromJsonString(e,r){return new qi().fromJsonString(e,r)}static equals(e,r){return x.util.equals(qi,e,r)}};y(qi,"runtime",x),y(qi,"typeName","yorkie.v1.ChannelEvent"),y(qi,"fields",x.util.newFieldList(()=>[{no:1,name:"type",kind:"enum",T:x.getEnumType(gh)},{no:2,name:"publisher",kind:"scalar",T:9},{no:3,name:"count",kind:"scalar",T:3},{no:4,name:"seq",kind:"scalar",T:3},{no:5,name:"topic",kind:"scalar",T:9},{no:6,name:"payload",kind:"scalar",T:12}]));let Ay=qi;var gh=(n=>(n[n.UNSPECIFIED=0]="UNSPECIFIED",n[n.PRESENCE=1]="PRESENCE",n[n.BROADCAST=2]="BROADCAST",n))(gh||{});x.util.setEnumType(gh,"yorkie.v1.ChannelEvent.Type",[{no:0,name:"TYPE_UNSPECIFIED"},{no:1,name:"TYPE_PRESENCE"},{no:2,name:"TYPE_BROADCAST"}]);const Ji=class Ji extends dt{constructor(e){super();y(this,"data",0);y(this,"meta",0);x.util.initPartial(e,this)}static fromBinary(e,r){return new Ji().fromBinary(e,r)}static fromJson(e,r){return new Ji().fromJson(e,r)}static fromJsonString(e,r){return new Ji().fromJsonString(e,r)}static equals(e,r){return x.util.equals(Ji,e,r)}};y(Ji,"runtime",x),y(Ji,"typeName","yorkie.v1.DataSize"),y(Ji,"fields",x.util.newFieldList(()=>[{no:1,name:"data",kind:"scalar",T:5},{no:2,name:"meta",kind:"scalar",T:5}]));let jd=Ji;const $i=class $i extends dt{constructor(e){super();y(this,"live");y(this,"gc");x.util.initPartial(e,this)}static fromBinary(e,r){return new $i().fromBinary(e,r)}static fromJson(e,r){return new $i().fromJson(e,r)}static fromJsonString(e,r){return new $i().fromJsonString(e,r)}static equals(e,r){return x.util.equals($i,e,r)}};y($i,"runtime",x),y($i,"typeName","yorkie.v1.DocSize"),y($i,"fields",x.util.newFieldList(()=>[{no:1,name:"live",kind:"message",T:jd},{no:2,name:"gc",kind:"message",T:jd}]));let Ey=$i;const Hi=class Hi extends dt{constructor(e){super();y(this,"id","");y(this,"name","");y(this,"version",0);y(this,"body","");y(this,"rules",[]);y(this,"createdAt");x.util.initPartial(e,this)}static fromBinary(e,r){return new Hi().fromBinary(e,r)}static fromJson(e,r){return new Hi().fromJson(e,r)}static fromJsonString(e,r){return new Hi().fromJsonString(e,r)}static equals(e,r){return x.util.equals(Hi,e,r)}};y(Hi,"runtime",x),y(Hi,"typeName","yorkie.v1.Schema"),y(Hi,"fields",x.util.newFieldList(()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"version",kind:"scalar",T:5},{no:4,name:"body",kind:"scalar",T:9},{no:5,name:"rules",kind:"message",T:Kd,repeated:!0},{no:6,name:"created_at",kind:"message",T:ze}]));let Eb=Hi;const Vi=class Vi extends dt{constructor(e){super();y(this,"path","");y(this,"type","");x.util.initPartial(e,this)}static fromBinary(e,r){return new Vi().fromBinary(e,r)}static fromJson(e,r){return new Vi().fromJson(e,r)}static fromJsonString(e,r){return new Vi().fromJsonString(e,r)}static equals(e,r){return x.util.equals(Vi,e,r)}};y(Vi,"runtime",x),y(Vi,"typeName","yorkie.v1.Rule"),y(Vi,"fields",x.util.newFieldList(()=>[{no:1,name:"path",kind:"scalar",T:9},{no:2,name:"type",kind:"scalar",T:9}]));let Kd=Vi;const ji=class ji extends dt{constructor(e){super();y(this,"id","");y(this,"label","");y(this,"description","");y(this,"snapshot","");y(this,"createdAt");x.util.initPartial(e,this)}static fromBinary(e,r){return new ji().fromBinary(e,r)}static fromJson(e,r){return new ji().fromJson(e,r)}static fromJsonString(e,r){return new ji().fromJsonString(e,r)}static equals(e,r){return x.util.equals(ji,e,r)}};y(ji,"runtime",x),y(ji,"typeName","yorkie.v1.RevisionSummary"),y(ji,"fields",x.util.newFieldList(()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"label",kind:"scalar",T:9},{no:3,name:"description",kind:"scalar",T:9},{no:4,name:"snapshot",kind:"scalar",T:9},{no:5,name:"created_at",kind:"message",T:ze}]));let Yd=ji;const Ki=class Ki extends dt{constructor(e){super();y(this,"clientKey","");y(this,"metadata",{});x.util.initPartial(e,this)}static fromBinary(e,r){return new Ki().fromBinary(e,r)}static fromJson(e,r){return new Ki().fromJson(e,r)}static fromJsonString(e,r){return new Ki().fromJsonString(e,r)}static equals(e,r){return x.util.equals(Ki,e,r)}};y(Ki,"runtime",x),y(Ki,"typeName","yorkie.v1.ActivateClientRequest"),y(Ki,"fields",x.util.newFieldList(()=>[{no:1,name:"client_key",kind:"scalar",T:9},{no:2,name:"metadata",kind:"map",K:9,V:{kind:"scalar",T:9}}]));let Ny=Ki;const Yi=class Yi extends dt{constructor(e){super();y(this,"clientId","");x.util.initPartial(e,this)}static fromBinary(e,r){return new Yi().fromBinary(e,r)}static fromJson(e,r){return new Yi().fromJson(e,r)}static fromJsonString(e,r){return new Yi().fromJsonString(e,r)}static equals(e,r){return x.util.equals(Yi,e,r)}};y(Yi,"runtime",x),y(Yi,"typeName","yorkie.v1.ActivateClientResponse"),y(Yi,"fields",x.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9}]));let ky=Yi;const Gi=class Gi extends dt{constructor(e){super();y(this,"clientId","");y(this,"synchronous",!1);x.util.initPartial(e,this)}static fromBinary(e,r){return new Gi().fromBinary(e,r)}static fromJson(e,r){return new Gi().fromJson(e,r)}static fromJsonString(e,r){return new Gi().fromJsonString(e,r)}static equals(e,r){return x.util.equals(Gi,e,r)}};y(Gi,"runtime",x),y(Gi,"typeName","yorkie.v1.DeactivateClientRequest"),y(Gi,"fields",x.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"synchronous",kind:"scalar",T:8}]));let Cy=Gi;const Fi=class Fi extends dt{constructor(t){super(),x.util.initPartial(t,this)}static fromBinary(t,e){return new Fi().fromBinary(t,e)}static fromJson(t,e){return new Fi().fromJson(t,e)}static fromJsonString(t,e){return new Fi().fromJsonString(t,e)}static equals(t,e){return x.util.equals(Fi,t,e)}};y(Fi,"runtime",x),y(Fi,"typeName","yorkie.v1.DeactivateClientResponse"),y(Fi,"fields",x.util.newFieldList(()=>[]));let Dy=Fi;const Xi=class Xi extends dt{constructor(e){super();y(this,"clientId","");y(this,"changePack");y(this,"schemaKey","");x.util.initPartial(e,this)}static fromBinary(e,r){return new Xi().fromBinary(e,r)}static fromJson(e,r){return new Xi().fromJson(e,r)}static fromJsonString(e,r){return new Xi().fromJsonString(e,r)}static equals(e,r){return x.util.equals(Xi,e,r)}};y(Xi,"runtime",x),y(Xi,"typeName","yorkie.v1.AttachDocumentRequest"),y(Xi,"fields",x.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"change_pack",kind:"message",T:zs},{no:3,name:"schema_key",kind:"scalar",T:9}]));let Iy=Xi;const Zi=class Zi extends dt{constructor(e){super();y(this,"documentId","");y(this,"changePack");y(this,"maxSizePerDocument",0);y(this,"schemaRules",[]);x.util.initPartial(e,this)}static fromBinary(e,r){return new Zi().fromBinary(e,r)}static fromJson(e,r){return new Zi().fromJson(e,r)}static fromJsonString(e,r){return new Zi().fromJsonString(e,r)}static equals(e,r){return x.util.equals(Zi,e,r)}};y(Zi,"runtime",x),y(Zi,"typeName","yorkie.v1.AttachDocumentResponse"),y(Zi,"fields",x.util.newFieldList(()=>[{no:1,name:"document_id",kind:"scalar",T:9},{no:2,name:"change_pack",kind:"message",T:zs},{no:3,name:"max_size_per_document",kind:"scalar",T:5},{no:4,name:"schema_rules",kind:"message",T:Kd,repeated:!0}]));let Oy=Zi;const Qi=class Qi extends dt{constructor(e){super();y(this,"clientId","");y(this,"documentId","");y(this,"changePack");y(this,"removeIfNotAttached",!1);x.util.initPartial(e,this)}static fromBinary(e,r){return new Qi().fromBinary(e,r)}static fromJson(e,r){return new Qi().fromJson(e,r)}static fromJsonString(e,r){return new Qi().fromJsonString(e,r)}static equals(e,r){return x.util.equals(Qi,e,r)}};y(Qi,"runtime",x),y(Qi,"typeName","yorkie.v1.DetachDocumentRequest"),y(Qi,"fields",x.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:zs},{no:4,name:"remove_if_not_attached",kind:"scalar",T:8}]));let My=Qi;const Wi=class Wi extends dt{constructor(e){super();y(this,"changePack");x.util.initPartial(e,this)}static fromBinary(e,r){return new Wi().fromBinary(e,r)}static fromJson(e,r){return new Wi().fromJson(e,r)}static fromJsonString(e,r){return new Wi().fromJsonString(e,r)}static equals(e,r){return x.util.equals(Wi,e,r)}};y(Wi,"runtime",x),y(Wi,"typeName","yorkie.v1.DetachDocumentResponse"),y(Wi,"fields",x.util.newFieldList(()=>[{no:2,name:"change_pack",kind:"message",T:zs}]));let Ry=Wi;const ts=class ts extends dt{constructor(e){super();y(this,"clientId","");y(this,"documentId","");x.util.initPartial(e,this)}static fromBinary(e,r){return new ts().fromBinary(e,r)}static fromJson(e,r){return new ts().fromJson(e,r)}static fromJsonString(e,r){return new ts().fromJsonString(e,r)}static equals(e,r){return x.util.equals(ts,e,r)}};y(ts,"runtime",x),y(ts,"typeName","yorkie.v1.WatchDocumentRequest"),y(ts,"fields",x.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9}]));let By=ts;const es=class es extends dt{constructor(e){super();y(this,"body",{case:void 0});x.util.initPartial(e,this)}static fromBinary(e,r){return new es().fromBinary(e,r)}static fromJson(e,r){return new es().fromJson(e,r)}static fromJsonString(e,r){return new es().fromJsonString(e,r)}static equals(e,r){return x.util.equals(es,e,r)}};y(es,"runtime",x),y(es,"typeName","yorkie.v1.WatchDocumentResponse"),y(es,"fields",x.util.newFieldList(()=>[{no:1,name:"initialization",kind:"message",T:Ly,oneof:"body"},{no:2,name:"event",kind:"message",T:Ty,oneof:"body"}]));let zy=es;const ns=class ns extends dt{constructor(e){super();y(this,"clientIds",[]);x.util.initPartial(e,this)}static fromBinary(e,r){return new ns().fromBinary(e,r)}static fromJson(e,r){return new ns().fromJson(e,r)}static fromJsonString(e,r){return new ns().fromJsonString(e,r)}static equals(e,r){return x.util.equals(ns,e,r)}};y(ns,"runtime",x),y(ns,"typeName","yorkie.v1.WatchDocumentResponse.Initialization"),y(ns,"fields",x.util.newFieldList(()=>[{no:1,name:"client_ids",kind:"scalar",T:9,repeated:!0}]));let Ly=ns;const rs=class rs extends dt{constructor(e){super();y(this,"clientId","");y(this,"documentId","");y(this,"changePack");x.util.initPartial(e,this)}static fromBinary(e,r){return new rs().fromBinary(e,r)}static fromJson(e,r){return new rs().fromJson(e,r)}static fromJsonString(e,r){return new rs().fromJsonString(e,r)}static equals(e,r){return x.util.equals(rs,e,r)}};y(rs,"runtime",x),y(rs,"typeName","yorkie.v1.RemoveDocumentRequest"),y(rs,"fields",x.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:zs}]));let Uy=rs;const is=class is extends dt{constructor(e){super();y(this,"changePack");x.util.initPartial(e,this)}static fromBinary(e,r){return new is().fromBinary(e,r)}static fromJson(e,r){return new is().fromJson(e,r)}static fromJsonString(e,r){return new is().fromJsonString(e,r)}static equals(e,r){return x.util.equals(is,e,r)}};y(is,"runtime",x),y(is,"typeName","yorkie.v1.RemoveDocumentResponse"),y(is,"fields",x.util.newFieldList(()=>[{no:1,name:"change_pack",kind:"message",T:zs}]));let _y=is;const ss=class ss extends dt{constructor(e){super();y(this,"clientId","");y(this,"documentId","");y(this,"changePack");y(this,"pushOnly",!1);x.util.initPartial(e,this)}static fromBinary(e,r){return new ss().fromBinary(e,r)}static fromJson(e,r){return new ss().fromJson(e,r)}static fromJsonString(e,r){return new ss().fromJsonString(e,r)}static equals(e,r){return x.util.equals(ss,e,r)}};y(ss,"runtime",x),y(ss,"typeName","yorkie.v1.PushPullChangesRequest"),y(ss,"fields",x.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:zs},{no:4,name:"push_only",kind:"scalar",T:8}]));let Py=ss;const as=class as extends dt{constructor(e){super();y(this,"changePack");x.util.initPartial(e,this)}static fromBinary(e,r){return new as().fromBinary(e,r)}static fromJson(e,r){return new as().fromJson(e,r)}static fromJsonString(e,r){return new as().fromJsonString(e,r)}static equals(e,r){return x.util.equals(as,e,r)}};y(as,"runtime",x),y(as,"typeName","yorkie.v1.PushPullChangesResponse"),y(as,"fields",x.util.newFieldList(()=>[{no:1,name:"change_pack",kind:"message",T:zs}]));let qy=as;const os=class os extends dt{constructor(e){super();y(this,"clientId","");y(this,"documentId","");y(this,"label","");y(this,"description","");x.util.initPartial(e,this)}static fromBinary(e,r){return new os().fromBinary(e,r)}static fromJson(e,r){return new os().fromJson(e,r)}static fromJsonString(e,r){return new os().fromJsonString(e,r)}static equals(e,r){return x.util.equals(os,e,r)}};y(os,"runtime",x),y(os,"typeName","yorkie.v1.CreateRevisionRequest"),y(os,"fields",x.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"label",kind:"scalar",T:9},{no:4,name:"description",kind:"scalar",T:9}]));let Jy=os;const ls=class ls extends dt{constructor(e){super();y(this,"revision");x.util.initPartial(e,this)}static fromBinary(e,r){return new ls().fromBinary(e,r)}static fromJson(e,r){return new ls().fromJson(e,r)}static fromJsonString(e,r){return new ls().fromJsonString(e,r)}static equals(e,r){return x.util.equals(ls,e,r)}};y(ls,"runtime",x),y(ls,"typeName","yorkie.v1.CreateRevisionResponse"),y(ls,"fields",x.util.newFieldList(()=>[{no:1,name:"revision",kind:"message",T:Yd}]));let $y=ls;const us=class us extends dt{constructor(e){super();y(this,"projectId","");y(this,"documentId","");y(this,"pageSize",0);y(this,"offset",0);y(this,"isForward",!1);x.util.initPartial(e,this)}static fromBinary(e,r){return new us().fromBinary(e,r)}static fromJson(e,r){return new us().fromJson(e,r)}static fromJsonString(e,r){return new us().fromJsonString(e,r)}static equals(e,r){return x.util.equals(us,e,r)}};y(us,"runtime",x),y(us,"typeName","yorkie.v1.ListRevisionsRequest"),y(us,"fields",x.util.newFieldList(()=>[{no:1,name:"project_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"page_size",kind:"scalar",T:5},{no:4,name:"offset",kind:"scalar",T:5},{no:5,name:"is_forward",kind:"scalar",T:8}]));let Hy=us;const cs=class cs extends dt{constructor(e){super();y(this,"revisions",[]);x.util.initPartial(e,this)}static fromBinary(e,r){return new cs().fromBinary(e,r)}static fromJson(e,r){return new cs().fromJson(e,r)}static fromJsonString(e,r){return new cs().fromJsonString(e,r)}static equals(e,r){return x.util.equals(cs,e,r)}};y(cs,"runtime",x),y(cs,"typeName","yorkie.v1.ListRevisionsResponse"),y(cs,"fields",x.util.newFieldList(()=>[{no:1,name:"revisions",kind:"message",T:Yd,repeated:!0}]));let Vy=cs;const fs=class fs extends dt{constructor(e){super();y(this,"clientId","");y(this,"revisionId","");x.util.initPartial(e,this)}static fromBinary(e,r){return new fs().fromBinary(e,r)}static fromJson(e,r){return new fs().fromJson(e,r)}static fromJsonString(e,r){return new fs().fromJsonString(e,r)}static equals(e,r){return x.util.equals(fs,e,r)}};y(fs,"runtime",x),y(fs,"typeName","yorkie.v1.RestoreRevisionRequest"),y(fs,"fields",x.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"revision_id",kind:"scalar",T:9}]));let jy=fs;const ds=class ds extends dt{constructor(t){super(),x.util.initPartial(t,this)}static fromBinary(t,e){return new ds().fromBinary(t,e)}static fromJson(t,e){return new ds().fromJson(t,e)}static fromJsonString(t,e){return new ds().fromJsonString(t,e)}static equals(t,e){return x.util.equals(ds,t,e)}};y(ds,"runtime",x),y(ds,"typeName","yorkie.v1.RestoreRevisionResponse"),y(ds,"fields",x.util.newFieldList(()=>[]));let Ky=ds;const hs=class hs extends dt{constructor(e){super();y(this,"clientId","");y(this,"channelKey","");x.util.initPartial(e,this)}static fromBinary(e,r){return new hs().fromBinary(e,r)}static fromJson(e,r){return new hs().fromJson(e,r)}static fromJsonString(e,r){return new hs().fromJsonString(e,r)}static equals(e,r){return x.util.equals(hs,e,r)}};y(hs,"runtime",x),y(hs,"typeName","yorkie.v1.AttachChannelRequest"),y(hs,"fields",x.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"channel_key",kind:"scalar",T:9}]));let Yy=hs;const gs=class gs extends dt{constructor(e){super();y(this,"sessionId","");y(this,"count",$t.zero);x.util.initPartial(e,this)}static fromBinary(e,r){return new gs().fromBinary(e,r)}static fromJson(e,r){return new gs().fromJson(e,r)}static fromJsonString(e,r){return new gs().fromJsonString(e,r)}static equals(e,r){return x.util.equals(gs,e,r)}};y(gs,"runtime",x),y(gs,"typeName","yorkie.v1.AttachChannelResponse"),y(gs,"fields",x.util.newFieldList(()=>[{no:1,name:"session_id",kind:"scalar",T:9},{no:2,name:"count",kind:"scalar",T:3}]));let Gy=gs;const ms=class ms extends dt{constructor(e){super();y(this,"clientId","");y(this,"channelKey","");y(this,"sessionId","");x.util.initPartial(e,this)}static fromBinary(e,r){return new ms().fromBinary(e,r)}static fromJson(e,r){return new ms().fromJson(e,r)}static fromJsonString(e,r){return new ms().fromJsonString(e,r)}static equals(e,r){return x.util.equals(ms,e,r)}};y(ms,"runtime",x),y(ms,"typeName","yorkie.v1.DetachChannelRequest"),y(ms,"fields",x.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"channel_key",kind:"scalar",T:9},{no:3,name:"session_id",kind:"scalar",T:9}]));let Fy=ms;const ys=class ys extends dt{constructor(e){super();y(this,"count",$t.zero);x.util.initPartial(e,this)}static fromBinary(e,r){return new ys().fromBinary(e,r)}static fromJson(e,r){return new ys().fromJson(e,r)}static fromJsonString(e,r){return new ys().fromJsonString(e,r)}static equals(e,r){return x.util.equals(ys,e,r)}};y(ys,"runtime",x),y(ys,"typeName","yorkie.v1.DetachChannelResponse"),y(ys,"fields",x.util.newFieldList(()=>[{no:1,name:"count",kind:"scalar",T:3}]));let Xy=ys;const ps=class ps extends dt{constructor(e){super();y(this,"clientId","");y(this,"channelKey","");y(this,"sessionId","");x.util.initPartial(e,this)}static fromBinary(e,r){return new ps().fromBinary(e,r)}static fromJson(e,r){return new ps().fromJson(e,r)}static fromJsonString(e,r){return new ps().fromJsonString(e,r)}static equals(e,r){return x.util.equals(ps,e,r)}};y(ps,"runtime",x),y(ps,"typeName","yorkie.v1.RefreshChannelRequest"),y(ps,"fields",x.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"channel_key",kind:"scalar",T:9},{no:3,name:"session_id",kind:"scalar",T:9}]));let Zy=ps;const vs=class vs extends dt{constructor(e){super();y(this,"count",$t.zero);x.util.initPartial(e,this)}static fromBinary(e,r){return new vs().fromBinary(e,r)}static fromJson(e,r){return new vs().fromJson(e,r)}static fromJsonString(e,r){return new vs().fromJsonString(e,r)}static equals(e,r){return x.util.equals(vs,e,r)}};y(vs,"runtime",x),y(vs,"typeName","yorkie.v1.RefreshChannelResponse"),y(vs,"fields",x.util.newFieldList(()=>[{no:1,name:"count",kind:"scalar",T:3}]));let Qy=vs;const ws=class ws extends dt{constructor(e){super();y(this,"clientId","");y(this,"channelKey","");x.util.initPartial(e,this)}static fromBinary(e,r){return new ws().fromBinary(e,r)}static fromJson(e,r){return new ws().fromJson(e,r)}static fromJsonString(e,r){return new ws().fromJsonString(e,r)}static equals(e,r){return x.util.equals(ws,e,r)}};y(ws,"runtime",x),y(ws,"typeName","yorkie.v1.WatchChannelRequest"),y(ws,"fields",x.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"channel_key",kind:"scalar",T:9}]));let Wy=ws;const Ss=class Ss extends dt{constructor(e){super();y(this,"body",{case:void 0});x.util.initPartial(e,this)}static fromBinary(e,r){return new Ss().fromBinary(e,r)}static fromJson(e,r){return new Ss().fromJson(e,r)}static fromJsonString(e,r){return new Ss().fromJsonString(e,r)}static equals(e,r){return x.util.equals(Ss,e,r)}};y(Ss,"runtime",x),y(Ss,"typeName","yorkie.v1.WatchChannelResponse"),y(Ss,"fields",x.util.newFieldList(()=>[{no:1,name:"initialized",kind:"message",T:ep,oneof:"body"},{no:2,name:"event",kind:"message",T:Ay,oneof:"body"}]));let tp=Ss;const bs=class bs extends dt{constructor(e){super();y(this,"count",$t.zero);y(this,"seq",$t.zero);x.util.initPartial(e,this)}static fromBinary(e,r){return new bs().fromBinary(e,r)}static fromJson(e,r){return new bs().fromJson(e,r)}static fromJsonString(e,r){return new bs().fromJsonString(e,r)}static equals(e,r){return x.util.equals(bs,e,r)}};y(bs,"runtime",x),y(bs,"typeName","yorkie.v1.WatchChannelInitialized"),y(bs,"fields",x.util.newFieldList(()=>[{no:1,name:"count",kind:"scalar",T:3},{no:2,name:"seq",kind:"scalar",T:3}]));let ep=bs;const xs=class xs extends dt{constructor(e){super();y(this,"clientId","");y(this,"channelKey","");y(this,"topic","");y(this,"payload",new Uint8Array(0));x.util.initPartial(e,this)}static fromBinary(e,r){return new xs().fromBinary(e,r)}static fromJson(e,r){return new xs().fromJson(e,r)}static fromJsonString(e,r){return new xs().fromJsonString(e,r)}static equals(e,r){return x.util.equals(xs,e,r)}};y(xs,"runtime",x),y(xs,"typeName","yorkie.v1.BroadcastRequest"),y(xs,"fields",x.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"channel_key",kind:"scalar",T:9},{no:3,name:"topic",kind:"scalar",T:9},{no:4,name:"payload",kind:"scalar",T:12}]));let np=xs;const Ts=class Ts extends dt{constructor(t){super(),x.util.initPartial(t,this)}static fromBinary(t,e){return new Ts().fromBinary(t,e)}static fromJson(t,e){return new Ts().fromJson(t,e)}static fromJsonString(t,e){return new Ts().fromJsonString(t,e)}static equals(t,e){return x.util.equals(Ts,t,e)}};y(Ts,"runtime",x),y(Ts,"typeName","yorkie.v1.BroadcastResponse"),y(Ts,"fields",x.util.newFieldList(()=>[]));let rp=Ts;const Ak={typeName:"yorkie.v1.YorkieService",methods:{activateClient:{name:"ActivateClient",I:Ny,O:ky,kind:me.Unary},deactivateClient:{name:"DeactivateClient",I:Cy,O:Dy,kind:me.Unary},attachDocument:{name:"AttachDocument",I:Iy,O:Oy,kind:me.Unary},detachDocument:{name:"DetachDocument",I:My,O:Ry,kind:me.Unary},removeDocument:{name:"RemoveDocument",I:Uy,O:_y,kind:me.Unary},pushPullChanges:{name:"PushPullChanges",I:Py,O:qy,kind:me.Unary},watchDocument:{name:"WatchDocument",I:By,O:zy,kind:me.ServerStreaming},createRevision:{name:"CreateRevision",I:Jy,O:$y,kind:me.Unary},listRevisions:{name:"ListRevisions",I:Hy,O:Vy,kind:me.Unary},restoreRevision:{name:"RestoreRevision",I:jy,O:Ky,kind:me.Unary},attachChannel:{name:"AttachChannel",I:Yy,O:Gy,kind:me.Unary},detachChannel:{name:"DetachChannel",I:Fy,O:Xy,kind:me.Unary},refreshChannel:{name:"RefreshChannel",I:Zy,O:Qy,kind:me.Unary},watchChannel:{name:"WatchChannel",I:Wy,O:tp,kind:me.ServerStreaming},broadcast:{name:"Broadcast",I:np,O:rp,kind:me.Unary}}},Ek=x.makeMessageType("google.rpc.ErrorInfo",()=>[{no:1,name:"reason",kind:"scalar",T:9},{no:2,name:"domain",kind:"scalar",T:9},{no:3,name:"metadata",kind:"map",K:9,V:{kind:"scalar",T:9}}]);x.makeMessageType("google.rpc.RetryInfo",()=>[{no:1,name:"retry_delay",kind:"message",T:Ns}]);x.makeMessageType("google.rpc.DebugInfo",()=>[{no:1,name:"stack_entries",kind:"scalar",T:9,repeated:!0},{no:2,name:"detail",kind:"scalar",T:9}]);x.makeMessageType("google.rpc.QuotaFailure",()=>[{no:1,name:"violations",kind:"message",T:Nk,repeated:!0}]);const Nk=x.makeMessageType("google.rpc.QuotaFailure.Violation",()=>[{no:1,name:"subject",kind:"scalar",T:9},{no:2,name:"description",kind:"scalar",T:9},{no:3,name:"api_service",kind:"scalar",T:9},{no:4,name:"quota_metric",kind:"scalar",T:9},{no:5,name:"quota_id",kind:"scalar",T:9},{no:6,name:"quota_dimensions",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:7,name:"quota_value",kind:"scalar",T:3},{no:8,name:"future_quota_value",kind:"scalar",T:3,opt:!0}],{localName:"QuotaFailure_Violation"});x.makeMessageType("google.rpc.PreconditionFailure",()=>[{no:1,name:"violations",kind:"message",T:kk,repeated:!0}]);const kk=x.makeMessageType("google.rpc.PreconditionFailure.Violation",()=>[{no:1,name:"type",kind:"scalar",T:9},{no:2,name:"subject",kind:"scalar",T:9},{no:3,name:"description",kind:"scalar",T:9}],{localName:"PreconditionFailure_Violation"});x.makeMessageType("google.rpc.BadRequest",()=>[{no:1,name:"field_violations",kind:"message",T:Ck,repeated:!0}]);const Ck=x.makeMessageType("google.rpc.BadRequest.FieldViolation",()=>[{no:1,name:"field",kind:"scalar",T:9},{no:2,name:"description",kind:"scalar",T:9},{no:3,name:"reason",kind:"scalar",T:9},{no:4,name:"localized_message",kind:"message",T:Ik}],{localName:"BadRequest_FieldViolation"});x.makeMessageType("google.rpc.RequestInfo",()=>[{no:1,name:"request_id",kind:"scalar",T:9},{no:2,name:"serving_data",kind:"scalar",T:9}]);x.makeMessageType("google.rpc.ResourceInfo",()=>[{no:1,name:"resource_type",kind:"scalar",T:9},{no:2,name:"resource_name",kind:"scalar",T:9},{no:3,name:"owner",kind:"scalar",T:9},{no:4,name:"description",kind:"scalar",T:9}]);x.makeMessageType("google.rpc.Help",()=>[{no:1,name:"links",kind:"message",T:Dk,repeated:!0}]);const Dk=x.makeMessageType("google.rpc.Help.Link",()=>[{no:1,name:"description",kind:"scalar",T:9},{no:2,name:"url",kind:"scalar",T:9}],{localName:"Help_Link"}),Ik=x.makeMessageType("google.rpc.LocalizedMessage",()=>[{no:1,name:"locale",kind:"scalar",T:9},{no:2,name:"message",kind:"scalar",T:9}]);var q=(n=>(n.Ok="ok",n.ErrClientNotActivated="ErrClientNotActivated",n.ErrClientNotFound="ErrClientNotFound",n.ErrUnimplemented="ErrUnimplemented",n.ErrInvalidType="ErrInvalidType",n.ErrDummy="ErrDummy",n.ErrNotAttached="ErrNotAttached",n.ErrNotDetached="ErrNotDetached",n.ErrDocumentRemoved="ErrDocumentRemoved",n.ErrDocumentSizeExceedsLimit="ErrDocumentSizeExceedsLimit",n.ErrDocumentSchemaValidationFailed="ErrDocumentSchemaValidationFailed",n.ErrInvalidObjectKey="ErrInvalidObjectKey",n.ErrInvalidArgument="ErrInvalidArgument",n.ErrNotInitialized="ErrNotInitialized",n.ErrNotReady="ErrNotReady",n.ErrRefused="ErrRefused",n.ErrContextNotProvided="ErrContextNotProvided",n.ErrPermissionDenied="ErrPermissionDenied",n.ErrUnauthenticated="ErrUnauthenticated",n.ErrTooManySubscribers="ErrTooManySubscribers",n.ErrTooManyAttachments="ErrTooManyAttachments",n))(q||{});class H extends Error{constructor(e,r){super(r);y(this,"name","YorkieError");y(this,"stack");this.code=e,this.message=r,this.toString=()=>`[code=${this.code}]: ${this.message}`}}var kr=(n=>(n.Put="put",n.Clear="clear",n))(kr||{});const kp="000000000000000000000000",Tr=24;class $n{constructor(t,e,r){y(this,"lamport");y(this,"delimiter");y(this,"actorID");this.lamport=t,this.delimiter=e,this.actorID=r}static of(t,e,r){return new $n(t,e,r)}static fromStruct(t){return $n.of(BigInt(t.lamport),t.delimiter,t.actorID)}toIDString(){return`${this.lamport.toString()}:${this.actorID}:${this.delimiter}`}toStruct(){return{lamport:this.getLamportAsString(),delimiter:this.getDelimiter(),actorID:this.getActorID()}}toTestString(){return`${this.lamport.toString()}:${this.actorID.slice(-2)}:${this.delimiter}`}setActor(t){return new $n(this.lamport,this.delimiter,t)}getLamportAsString(){return this.lamport.toString()}getLamport(){return this.lamport}getDelimiter(){return this.delimiter}getActorID(){return this.actorID}after(t){return this.compare(t)>0}equals(t){return this.compare(t)===0}compare(t){if(this.lamport>t.lamport)return 1;if(t.lamport>this.lamport)return-1;const e=this.actorID.localeCompare(t.actorID);return e!==0?e:this.delimiter>t.delimiter?1:t.delimiter>this.delimiter?-1:0}}const ip=0n,Ax=0,sp=9223372036854775807n,vl=new $n(ip,Ax,kp);function br(n){return n.replace(/["'\\\n\r\f\b\t\u2028\u2029]/g,function(t){switch(t){case'"':case"\\":return"\\"+t;case`
`:return"\\n";case"\r":return"\\r";case"\f":return"\\f";case"\b":return"\\b";case"	":return"\\t";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:return t}})}class Tc{constructor(t){y(this,"createdAt");y(this,"movedAt");y(this,"removedAt");this.createdAt=t}getCreatedAt(){return this.createdAt}getID(){return this.createdAt}getMovedAt(){return this.movedAt}getRemovedAt(){return this.removedAt}getPositionedAt(){return this.movedAt?this.movedAt:this.createdAt}setCreatedAt(t){this.createdAt=t}setMovedAt(t){return!this.movedAt||t&&t.after(this.movedAt)?(this.movedAt=t,!0):!1}setRemovedAt(t){this.removedAt=t}remove(t){return t&&t.after(this.createdAt)&&(!this.removedAt||t.after(this.removedAt))?(this.removedAt=t,!0):!1}isRemoved(){return!!this.removedAt}getMetaUsage(){let t=0;return this.getCreatedAt()&&(t+=Tr),this.getMovedAt()&&(t+=Tr),this.getRemovedAt()&&(t+=Tr),t}}class Sa extends Tc{constructor(t){super(t)}}class Gd{constructor(t,e){y(this,"strKey");y(this,"value");this.strKey=t,this.value=e}static of(t,e){return new Gd(t,e)}isRemoved(){return this.value.isRemoved()}getStrKey(){return this.strKey}getValue(){return this.value}remove(t){return this.value.remove(t)}}class wl{constructor(){y(this,"nodeMapByKey");y(this,"nodeMapByCreatedAt");this.nodeMapByKey=new Map,this.nodeMapByCreatedAt=new Map}static create(){return new wl}set(t,e,r){let a;const l=this.nodeMapByKey.get(t);l&&!l.isRemoved()&&l.remove(r)&&(a=l.getValue());const c=Gd.of(t,e);return this.nodeMapByCreatedAt.set(e.getCreatedAt().toIDString(),c),(!l||r.after(l.getValue().getPositionedAt()))&&(this.nodeMapByKey.set(t,c),e.setMovedAt(r)),a}delete(t,e){if(!this.nodeMapByCreatedAt.has(t.toIDString()))throw new H(q.ErrInvalidArgument,`fail to find ${t.toIDString()}`);const r=this.nodeMapByCreatedAt.get(t.toIDString());return r.remove(e),r.getValue()}subPathOf(t){const e=this.nodeMapByCreatedAt.get(t.toIDString());if(e)return e.getStrKey()}purge(t){const e=this.nodeMapByCreatedAt.get(t.getCreatedAt().toIDString());if(!e)throw new H(q.ErrInvalidArgument,`fail to find ${t.getCreatedAt().toIDString()}`);const r=this.nodeMapByKey.get(e.getStrKey());e===r&&this.nodeMapByKey.delete(r.getStrKey()),this.nodeMapByCreatedAt.delete(e.getValue().getCreatedAt().toIDString())}deleteByKey(t,e){const r=this.nodeMapByKey.get(t);if(r&&r.remove(e))return r.getValue()}has(t){const e=this.nodeMapByKey.get(t);return e?!e.isRemoved():!1}getByID(t){return this.nodeMapByCreatedAt.get(t.toIDString())}get(t){const e=this.nodeMapByKey.get(t);if(!(!e||e.isRemoved()))return e}deepcopy(){const t=wl.create();for(const[,e]of this.nodeMapByCreatedAt)t.nodeMapByCreatedAt.set(e.getValue().getCreatedAt().toIDString(),Gd.of(e.getStrKey(),e.getValue().deepcopy()));for(const[e,r]of this.nodeMapByKey)t.nodeMapByKey.set(e,t.nodeMapByCreatedAt.get(r.getValue().getCreatedAt().toIDString()));return t}*[Symbol.iterator](){for(const[,t]of this.nodeMapByCreatedAt)yield t}}class Ve extends Sa{constructor(e,r){super(e);y(this,"memberNodes");this.memberNodes=r}static create(e,r){if(!r)return new Ve(e,wl.create());const a=wl.create();for(const[l,c]of Object.entries(r))a.set(l,c.deepcopy(),c.getCreatedAt());return new Ve(e,a)}subPathOf(e){return this.memberNodes.subPathOf(e)}purge(e){this.memberNodes.purge(e)}set(e,r,a){return this.memberNodes.set(e,r,a)}delete(e,r){return this.memberNodes.delete(e,r)}deleteByKey(e,r){return this.memberNodes.deleteByKey(e,r)}get(e){const r=this.memberNodes.get(e);return r==null?void 0:r.getValue()}getByID(e){const r=this.memberNodes.getByID(e);return r==null?void 0:r.getValue()}has(e){return this.memberNodes.has(e)}getDataSize(){return{data:0,meta:this.getMetaUsage()}}toJSON(){const e=[];for(const[r,a]of this)e.push(`"${br(r)}":${a.toJSON()}`);return`{${e.join(",")}}`}toJS(){return JSON.parse(this.toJSON())}toJSForTest(){const e={};for(const[r,a]of this){const{createdAt:l,value:c,type:d}=a.toJSForTest();e[r]={key:r,createdAt:l,value:c,type:d}}return{createdAt:this.getCreatedAt().toTestString(),value:e,type:"YORKIE_OBJECT"}}getKeys(){const e=Array();for(const[r]of this)e.push(r);return e}toSortedJSON(){var a;const e=new Set;for(const[l]of this)e.add(l);const r=[];for(const l of Array.from(e).sort()){const c=(a=this.memberNodes.get(l))==null?void 0:a.getValue();r.push(`"${br(l)}":${c.toSortedJSON()}`)}return`{${r.join(",")}}`}getRHT(){return this.memberNodes}deepcopy(){const e=Ve.create(this.getCreatedAt());return e.memberNodes=this.memberNodes.deepcopy(),e.setRemovedAt(this.getRemovedAt()),e.setMovedAt(this.getMovedAt()),e}getDescendants(e){for(const r of this.memberNodes){const a=r.getValue();if(e(a,this))return;a instanceof Sa&&a.getDescendants(e)}}*[Symbol.iterator](){for(const e of this.memberNodes)e.isRemoved()||(yield[e.getStrKey(),e.getValue()])}}var ae=(n=>(n.Local="local",n.Remote="remote",n.UndoRedo="undoredo",n))(ae||{});class sr{constructor(t,e){y(this,"parentCreatedAt");y(this,"executedAt");this.parentCreatedAt=t,this.executedAt=e}getParentCreatedAt(){return this.parentCreatedAt}getExecutedAt(){if(!this.executedAt)throw new H(q.ErrNotReady,"executedAt is not set yet");return this.executedAt}setActor(t){this.executedAt&&(this.executedAt=this.executedAt.setActor(t))}setExecutedAt(t){this.executedAt=t}}class Ex{constructor(t){y(this,"value");y(this,"left");y(this,"right");y(this,"parent");y(this,"weight");this.value=t,this.initWeight()}getNodeString(){return`${this.weight}${this.value}`}getValue(){return this.value}getLeftWeight(){return this.hasLeft()?this.left.getWeight():0}getRightWeight(){return this.hasRight()?this.right.getWeight():0}getWeight(){return this.weight}getLeft(){return this.left}getRight(){return this.right}getParent(){return this.parent}hasLeft(){return!!this.left}hasRight(){return!!this.right}hasParent(){return!!this.parent}setLeft(t){this.left=t}setRight(t){this.right=t}setParent(t){this.parent=t}unlink(){this.parent=void 0,this.right=void 0,this.left=void 0}hasLinks(){return this.hasParent()||this.hasLeft()||this.hasRight()}increaseWeight(t){this.weight+=t}initWeight(){this.weight=this.getLength()}}class lc{constructor(t){y(this,"root");this.root=t}get length(){return this.root?this.root.getWeight():0}find(t){if(!this.root||t<0)return[void 0,0];let e=this.root;for(;;)if(e.hasLeft()&&t<=e.getLeftWeight())e=e.getLeft();else if(e.hasRight()&&e.getLeftWeight()+e.getLength()<t)t-=e.getLeftWeight()+e.getLength(),e=e.getRight();else{t-=e.getLeftWeight();break}if(t>e.getLength())throw new H(q.ErrInvalidArgument,`out of index range: pos: ${t} > node.length: ${e.getLength()}`);return this.splayNode(e),[e,t]}indexOf(t){return!t||t!==this.root&&!t.hasLinks()?-1:(this.splayNode(t),this.root.getLeftWeight())}getRoot(){return this.root}insert(t){return this.insertAfter(this.root,t)}insertAfter(t,e){return t?(this.splayNode(t),this.root=e,e.setRight(t.getRight()),t.hasRight()&&t.getRight().setParent(e),e.setLeft(t),t.setParent(e),t.setRight(),this.updateWeight(t),this.updateWeight(e),e):(this.root=e,e)}updateWeight(t){t.initWeight(),t.hasLeft()&&t.increaseWeight(t.getLeftWeight()),t.hasRight()&&t.increaseWeight(t.getRightWeight())}updateTreeWeight(t){for(;t;)this.updateWeight(t),t=t.getParent()}splayNode(t){if(t)for(;;)if(this.isLeftChild(t.getParent())&&this.isRightChild(t))this.rotateLeft(t),this.rotateRight(t);else if(this.isRightChild(t.getParent())&&this.isLeftChild(t))this.rotateRight(t),this.rotateLeft(t);else if(this.isLeftChild(t.getParent())&&this.isLeftChild(t))this.rotateRight(t.getParent()),this.rotateRight(t);else if(this.isRightChild(t.getParent())&&this.isRightChild(t))this.rotateLeft(t.getParent()),this.rotateLeft(t);else{this.isLeftChild(t)?this.rotateRight(t):this.isRightChild(t)&&this.rotateLeft(t),this.updateWeight(t);return}}delete(t){this.splayNode(t);const e=new lc(t.getLeft());e.root&&e.root.setParent();const r=new lc(t.getRight());if(r.root&&r.root.setParent(),e.root){const a=e.getRightmost();e.splayNode(a),e.root.setRight(r.root),r.root&&r.root.setParent(e.root),this.root=e.root}else this.root=r.root;t.unlink(),this.root&&this.updateWeight(this.root)}deleteRange(t,e){if(!e){this.splayNode(t),this.cutOffRight(t);return}this.splayNode(t),this.splayNode(e),e.getLeft()!=t&&this.rotateRight(t),this.cutOffRight(t)}cutOffRight(t){const e=[];this.traversePostorder(t.getRight(),e);for(const r of e)r.initWeight();this.updateTreeWeight(t)}toTestString(){const t=[];return this.traverseInorder(this.root,t),t.map(e=>`[${e.getWeight()},${e.getLength()}]${e.getValue()||""}`).join("")}checkWeight(){const t=[];this.traverseInorder(this.root,t);for(const e of t)if(e.getWeight()!=e.getLength()+e.getLeftWeight()+e.getRightWeight())return!1;return!0}getRightmost(){let t=this.root;for(;t.hasRight();)t=t.getRight();return t}traverseInorder(t,e){t&&(this.traverseInorder(t.getLeft(),e),e.push(t),this.traverseInorder(t.getRight(),e))}traversePostorder(t,e){t&&(this.traversePostorder(t.getLeft(),e),this.traversePostorder(t.getRight(),e),e.push(t))}rotateLeft(t){const e=t.getParent();e.hasParent()?e===e.getParent().getLeft()?e.getParent().setLeft(t):e.getParent().setRight(t):this.root=t,t.setParent(e.getParent()),e.setRight(t.getLeft()),e.hasRight()&&e.getRight().setParent(e),t.setLeft(e),t.getLeft().setParent(t),this.updateWeight(e),this.updateWeight(t)}rotateRight(t){const e=t.getParent();e.hasParent()?e===e.getParent().getLeft()?e.getParent().setLeft(t):e.getParent().setRight(t):this.root=t,t.setParent(e.getParent()),e.setLeft(t.getRight()),e.hasLeft()&&e.getLeft().setParent(e),t.setRight(e),t.getRight().setParent(t),this.updateWeight(e),this.updateWeight(t)}isLeftChild(t){return t&&t.hasParent()?t.getParent().getLeft()===t:!1}isRightChild(t){return t&&t.hasParent()?t.getParent().getRight()===t:!1}}/**
 * @license
 * Copyright 2009 The Closure Library Authors
 * Copyright 2020 Daniel Wirtz / The long.js Authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * SPDX-License-Identifier: Apache-2.0
 */var qn=null;try{qn=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function qt(n,t,e){this.low=n|0,this.high=t|0,this.unsigned=!!e}qt.prototype.__isLong__;Object.defineProperty(qt.prototype,"__isLong__",{value:!0});function Ke(n){return(n&&n.__isLong__)===!0}function Nb(n){var t=Math.clz32(n&-n);return n?31-t:t}qt.isLong=Ke;var kb={},Cb={};function co(n,t){var e,r,a;return t?(n>>>=0,(a=0<=n&&n<256)&&(r=Cb[n],r)?r:(e=jt(n,0,!0),a&&(Cb[n]=e),e)):(n|=0,(a=-128<=n&&n<128)&&(r=kb[n],r)?r:(e=jt(n,n<0?-1:0,!1),a&&(kb[n]=e),e))}qt.fromInt=co;function Jn(n,t){if(isNaN(n))return t?Cs:tr;if(t){if(n<0)return Cs;if(n>=Nx)return Dx}else{if(n<=-Ib)return nn;if(n+1>=Ib)return Cx}return n<0?Jn(-n,t).neg():jt(n%Sl|0,n/Sl|0,t)}qt.fromNumber=Jn;function jt(n,t,e){return new qt(n,t,e)}qt.fromBits=jt;var Fd=Math.pow;function Cp(n,t,e){if(n.length===0)throw Error("empty string");if(typeof t=="number"?(e=t,t=!1):t=!!t,n==="NaN"||n==="Infinity"||n==="+Infinity"||n==="-Infinity")return t?Cs:tr;if(e=e||10,e<2||36<e)throw RangeError("radix");var r;if((r=n.indexOf("-"))>0)throw Error("interior hyphen");if(r===0)return Cp(n.substring(1),t,e).neg();for(var a=Jn(Fd(e,8)),l=tr,c=0;c<n.length;c+=8){var d=Math.min(8,n.length-c),h=parseInt(n.substring(c,c+d),e);if(d<8){var g=Jn(Fd(e,d));l=l.mul(g).add(Jn(h))}else l=l.mul(a),l=l.add(Jn(h))}return l.unsigned=t,l}qt.fromString=Cp;function Hn(n,t){return typeof n=="number"?Jn(n,t):typeof n=="string"?Cp(n,t):jt(n.low,n.high,typeof t=="boolean"?t:n.unsigned)}qt.fromValue=Hn;var Db=65536,Ok=1<<24,Sl=Db*Db,Nx=Sl*Sl,Ib=Nx/2,Ob=co(Ok),tr=co(0);qt.ZERO=tr;var Cs=co(0,!0);qt.UZERO=Cs;var il=co(1);qt.ONE=il;var kx=co(1,!0);qt.UONE=kx;var ap=co(-1);qt.NEG_ONE=ap;var Cx=jt(-1,2147483647,!1);qt.MAX_VALUE=Cx;var Dx=jt(-1,-1,!0);qt.MAX_UNSIGNED_VALUE=Dx;var nn=jt(0,-2147483648,!1);qt.MIN_VALUE=nn;var gt=qt.prototype;gt.toInt=function(){return this.unsigned?this.low>>>0:this.low};gt.toNumber=function(){return this.unsigned?(this.high>>>0)*Sl+(this.low>>>0):this.high*Sl+(this.low>>>0)};gt.toString=function(t){if(t=t||10,t<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(nn)){var e=Jn(t),r=this.div(e),a=r.mul(e).sub(this);return r.toString(t)+a.toInt().toString(t)}else return"-"+this.neg().toString(t);for(var l=Jn(Fd(t,6),this.unsigned),c=this,d="";;){var h=c.div(l),g=c.sub(h.mul(l)).toInt()>>>0,p=g.toString(t);if(c=h,c.isZero())return p+d;for(;p.length<6;)p="0"+p;d=""+p+d}};gt.getHighBits=function(){return this.high};gt.getHighBitsUnsigned=function(){return this.high>>>0};gt.getLowBits=function(){return this.low};gt.getLowBitsUnsigned=function(){return this.low>>>0};gt.getNumBitsAbs=function(){if(this.isNegative())return this.eq(nn)?64:this.neg().getNumBitsAbs();for(var t=this.high!=0?this.high:this.low,e=31;e>0&&(t&1<<e)==0;e--);return this.high!=0?e+33:e+1};gt.isSafeInteger=function(){var t=this.high>>21;return t?this.unsigned?!1:t===-1&&!(this.low===0&&this.high===-2097152):!0};gt.isZero=function(){return this.high===0&&this.low===0};gt.eqz=gt.isZero;gt.isNegative=function(){return!this.unsigned&&this.high<0};gt.isPositive=function(){return this.unsigned||this.high>=0};gt.isOdd=function(){return(this.low&1)===1};gt.isEven=function(){return(this.low&1)===0};gt.equals=function(t){return Ke(t)||(t=Hn(t)),this.unsigned!==t.unsigned&&this.high>>>31===1&&t.high>>>31===1?!1:this.high===t.high&&this.low===t.low};gt.eq=gt.equals;gt.notEquals=function(t){return!this.eq(t)};gt.neq=gt.notEquals;gt.ne=gt.notEquals;gt.lessThan=function(t){return this.comp(t)<0};gt.lt=gt.lessThan;gt.lessThanOrEqual=function(t){return this.comp(t)<=0};gt.lte=gt.lessThanOrEqual;gt.le=gt.lessThanOrEqual;gt.greaterThan=function(t){return this.comp(t)>0};gt.gt=gt.greaterThan;gt.greaterThanOrEqual=function(t){return this.comp(t)>=0};gt.gte=gt.greaterThanOrEqual;gt.ge=gt.greaterThanOrEqual;gt.compare=function(t){if(Ke(t)||(t=Hn(t)),this.eq(t))return 0;var e=this.isNegative(),r=t.isNegative();return e&&!r?-1:!e&&r?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1};gt.comp=gt.compare;gt.negate=function(){return!this.unsigned&&this.eq(nn)?nn:this.not().add(il)};gt.neg=gt.negate;gt.add=function(t){Ke(t)||(t=Hn(t));var e=this.high>>>16,r=this.high&65535,a=this.low>>>16,l=this.low&65535,c=t.high>>>16,d=t.high&65535,h=t.low>>>16,g=t.low&65535,p=0,w=0,v=0,S=0;return S+=l+g,v+=S>>>16,S&=65535,v+=a+h,w+=v>>>16,v&=65535,w+=r+d,p+=w>>>16,w&=65535,p+=e+c,p&=65535,jt(v<<16|S,p<<16|w,this.unsigned)};gt.subtract=function(t){return Ke(t)||(t=Hn(t)),this.add(t.neg())};gt.sub=gt.subtract;gt.multiply=function(t){if(this.isZero())return this;if(Ke(t)||(t=Hn(t)),qn){var e=qn.mul(this.low,this.high,t.low,t.high);return jt(e,qn.get_high(),this.unsigned)}if(t.isZero())return this.unsigned?Cs:tr;if(this.eq(nn))return t.isOdd()?nn:tr;if(t.eq(nn))return this.isOdd()?nn:tr;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(Ob)&&t.lt(Ob))return Jn(this.toNumber()*t.toNumber(),this.unsigned);var r=this.high>>>16,a=this.high&65535,l=this.low>>>16,c=this.low&65535,d=t.high>>>16,h=t.high&65535,g=t.low>>>16,p=t.low&65535,w=0,v=0,S=0,A=0;return A+=c*p,S+=A>>>16,A&=65535,S+=l*p,v+=S>>>16,S&=65535,S+=c*g,v+=S>>>16,S&=65535,v+=a*p,w+=v>>>16,v&=65535,v+=l*g,w+=v>>>16,v&=65535,v+=c*h,w+=v>>>16,v&=65535,w+=r*p+a*g+l*h+c*d,w&=65535,jt(S<<16|A,w<<16|v,this.unsigned)};gt.mul=gt.multiply;gt.divide=function(t){if(Ke(t)||(t=Hn(t)),t.isZero())throw Error("division by zero");if(qn){if(!this.unsigned&&this.high===-2147483648&&t.low===-1&&t.high===-1)return this;var e=(this.unsigned?qn.div_u:qn.div_s)(this.low,this.high,t.low,t.high);return jt(e,qn.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?Cs:tr;var r,a,l;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return Cs;if(t.gt(this.shru(1)))return kx;l=Cs}else{if(this.eq(nn)){if(t.eq(il)||t.eq(ap))return nn;if(t.eq(nn))return il;var c=this.shr(1);return r=c.div(t).shl(1),r.eq(tr)?t.isNegative()?il:ap:(a=this.sub(t.mul(r)),l=r.add(a.div(t)),l)}else if(t.eq(nn))return this.unsigned?Cs:tr;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();l=tr}for(a=this;a.gte(t);){r=Math.max(1,Math.floor(a.toNumber()/t.toNumber()));for(var d=Math.ceil(Math.log(r)/Math.LN2),h=d<=48?1:Fd(2,d-48),g=Jn(r),p=g.mul(t);p.isNegative()||p.gt(a);)r-=h,g=Jn(r,this.unsigned),p=g.mul(t);g.isZero()&&(g=il),l=l.add(g),a=a.sub(p)}return l};gt.div=gt.divide;gt.modulo=function(t){if(Ke(t)||(t=Hn(t)),qn){var e=(this.unsigned?qn.rem_u:qn.rem_s)(this.low,this.high,t.low,t.high);return jt(e,qn.get_high(),this.unsigned)}return this.sub(this.div(t).mul(t))};gt.mod=gt.modulo;gt.rem=gt.modulo;gt.not=function(){return jt(~this.low,~this.high,this.unsigned)};gt.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32};gt.clz=gt.countLeadingZeros;gt.countTrailingZeros=function(){return this.low?Nb(this.low):Nb(this.high)+32};gt.ctz=gt.countTrailingZeros;gt.and=function(t){return Ke(t)||(t=Hn(t)),jt(this.low&t.low,this.high&t.high,this.unsigned)};gt.or=function(t){return Ke(t)||(t=Hn(t)),jt(this.low|t.low,this.high|t.high,this.unsigned)};gt.xor=function(t){return Ke(t)||(t=Hn(t)),jt(this.low^t.low,this.high^t.high,this.unsigned)};gt.shiftLeft=function(t){return Ke(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?jt(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):jt(0,this.low<<t-32,this.unsigned)};gt.shl=gt.shiftLeft;gt.shiftRight=function(t){return Ke(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?jt(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):jt(this.high>>t-32,this.high>=0?0:-1,this.unsigned)};gt.shr=gt.shiftRight;gt.shiftRightUnsigned=function(t){return Ke(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?jt(this.low>>>t|this.high<<32-t,this.high>>>t,this.unsigned):t===32?jt(this.high,0,this.unsigned):jt(this.high>>>t-32,0,this.unsigned)};gt.shru=gt.shiftRightUnsigned;gt.shr_u=gt.shiftRightUnsigned;gt.rotateLeft=function(t){var e;return Ke(t)&&(t=t.toInt()),(t&=63)===0?this:t===32?jt(this.high,this.low,this.unsigned):t<32?(e=32-t,jt(this.low<<t|this.high>>>e,this.high<<t|this.low>>>e,this.unsigned)):(t-=32,e=32-t,jt(this.high<<t|this.low>>>e,this.low<<t|this.high>>>e,this.unsigned))};gt.rotl=gt.rotateLeft;gt.rotateRight=function(t){var e;return Ke(t)&&(t=t.toInt()),(t&=63)===0?this:t===32?jt(this.high,this.low,this.unsigned):t<32?(e=32-t,jt(this.high<<e|this.low>>>t,this.low<<e|this.high>>>t,this.unsigned)):(t-=32,e=32-t,jt(this.low<<e|this.high>>>t,this.high<<e|this.low>>>t,this.unsigned))};gt.rotr=gt.rotateRight;gt.toSigned=function(){return this.unsigned?jt(this.low,this.high,!1):this};gt.toUnsigned=function(){return this.unsigned?this:jt(this.low,this.high,!0)};gt.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()};gt.toBytesLE=function(){var t=this.high,e=this.low;return[e&255,e>>>8&255,e>>>16&255,e>>>24,t&255,t>>>8&255,t>>>16&255,t>>>24]};gt.toBytesBE=function(){var t=this.high,e=this.low;return[t>>>24,t>>>16&255,t>>>8&255,t&255,e>>>24,e>>>16&255,e>>>8&255,e&255]};qt.fromBytes=function(t,e,r){return r?qt.fromBytesLE(t,e):qt.fromBytesBE(t,e)};qt.fromBytesLE=function(t,e){return new qt(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,e)};qt.fromBytesBE=function(t,e){return new qt(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],e)};typeof BigInt=="function"&&(qt.fromBigInt=function(t,e){var r=Number(BigInt.asIntN(32,t)),a=Number(BigInt.asIntN(32,t>>BigInt(32)));return jt(r,a,e)},qt.fromValue=function(t,e){return typeof t=="bigint"?qt.fromBigInt(t,e):Hn(t,e)},gt.toBigInt=function(){var t=BigInt(this.low>>>0),e=BigInt(this.unsigned?this.high>>>0:this.high);return e<<BigInt(32)|t});var re=(n=>(n[n.Null=0]="Null",n[n.Boolean=1]="Boolean",n[n.Integer=2]="Integer",n[n.Long=3]="Long",n[n.Double=4]="Double",n[n.String=5]="String",n[n.Bytes=6]="Bytes",n[n.Date=7]="Date",n))(re||{});class fe extends Tc{constructor(e,r){super(r);y(this,"valueType");y(this,"value");this.valueType=fe.getPrimitiveType(e),this.value=e===void 0?null:e}static of(e,r){return new fe(e,r)}static valueFromBytes(e,r){switch(e){case 0:return null;case 1:return!!r[0];case 2:return r[0]|r[1]<<8|r[2]<<16|r[3]<<24;case 4:{const a=new DataView(r.buffer);return r.forEach(function(l,c){a.setUint8(c,l)}),a.getFloat64(0,!0)}case 5:return new TextDecoder("utf-8").decode(r);case 3:return qt.fromBytesLE(Array.from(r));case 6:return r;case 7:return new Date(qt.fromBytesLE(Array.from(r),!0).toNumber());default:throw new H(q.ErrUnimplemented,`unimplemented type: ${e}`)}}getValueSize(){switch(this.valueType){case 0:return 8;case 1:return 4;case 2:return 4;case 3:return 8;case 4:return 8;case 5:return this.value.length*2;case 6:return this.value.length;case 7:return 8;default:throw new H(q.ErrUnimplemented,`unimplemented type: ${this.valueType}`)}}getDataSize(){return{data:this.getValueSize(),meta:this.getMetaUsage()}}toJSON(){return this.valueType===5?`"${br(this.value)}"`:`${this.value}`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:this.value,type:"YORKIE_PRIMITIVE"}}deepcopy(){const e=fe.of(this.value,this.getCreatedAt());return e.setMovedAt(this.getMovedAt()),e.setRemovedAt(this.getRemovedAt()),e}getType(){return this.valueType}static getPrimitiveType(e){switch(typeof e){case"undefined":return 0;case"boolean":return 1;case"number":return this.isInteger(e)?2:4;case"string":return 5;case"object":if(e===null)return 0;if(e instanceof qt)return 3;if(e instanceof Uint8Array)return 6;if(e instanceof Date)return 7}}static isSupport(e){return fe.getPrimitiveType(e)!==void 0}static isInteger(e){return e%1===0}isNumericType(){const e=this.valueType;return e===2||e===3||e===4}getValue(){return this.value}toBytes(){switch(this.valueType){case 0:return new Uint8Array;case 1:return this.value?new Uint8Array([1]):new Uint8Array([0]);case 2:{const e=this.value;return new Uint8Array([e&255,e>>8&255,e>>16&255,e>>24&255])}case 4:{const e=this.value,r=new Uint8Array(8);return new DataView(r.buffer).setFloat64(0,e,!0),r}case 5:return new TextEncoder().encode(this.value);case 3:{const r=this.value.toBytesLE();return Uint8Array.from(r)}case 6:return this.value;case 7:{const e=this.value,r=qt.fromNumber(e.getTime(),!0).toBytesLE();return Uint8Array.from(r)}default:throw new H(q.ErrUnimplemented,`unimplemented type: ${this.valueType}`)}}}class Xd extends Ex{constructor(e){super(e);y(this,"prev");y(this,"next");y(this,"movedFrom");this.value=e}static createAfter(e,r){const a=new Xd(r),l=e.next;return e.next=a,a.prev=e,a.next=l,l&&(l.prev=a),a}remove(e){return this.value.remove(e)}getCreatedAt(){return this.value.getCreatedAt()}getPositionedAt(){return this.value.getPositionedAt()}release(){this.prev&&(this.prev.next=this.next),this.next&&(this.next.prev=this.prev),this.prev=void 0,this.next=void 0}getLength(){return this.value.isRemoved()?0:1}getPrev(){return this.prev}getNext(){return this.next}getMovedFrom(){return this.movedFrom}setMovedFrom(e){this.movedFrom=e}getValue(){return this.value}isRemoved(){return this.value.isRemoved()}}class uc{constructor(){y(this,"dummyHead");y(this,"last");y(this,"nodeMapByIndex");y(this,"nodeMapByCreatedAt");const t=fe.of(0,vl);t.setRemovedAt(vl),this.dummyHead=new Xd(t),this.last=this.dummyHead,this.nodeMapByIndex=new lc,this.nodeMapByCreatedAt=new Map,this.nodeMapByIndex.insert(this.dummyHead),this.nodeMapByCreatedAt.set(this.dummyHead.getCreatedAt().toIDString(),this.dummyHead)}static create(){return new uc}get length(){return this.nodeMapByIndex.length}findNextBeforeExecutedAt(t,e){let r=this.nodeMapByCreatedAt.get(t.toIDString());if(!r)throw new H(q.ErrInvalidArgument,`cant find the given node: ${t.toIDString()}`);for(;r.getValue().getMovedAt()&&r.getValue().getMovedAt().after(e)&&r.getMovedFrom();)r=r.getMovedFrom();for(;r.getNext()&&r.getNext().getPositionedAt().after(e);)r=r.getNext();return r}release(t){this.last===t&&(this.last=t.getPrev()),t.release(),this.nodeMapByIndex.delete(t),this.nodeMapByCreatedAt.delete(t.getValue().getCreatedAt().toIDString())}insertAfter(t,e,r=e.getCreatedAt()){const a=this.findNextBeforeExecutedAt(t,r),l=Xd.createAfter(a,e);return a===this.last&&(this.last=l),this.nodeMapByIndex.insertAfter(a,l),this.nodeMapByCreatedAt.set(l.getCreatedAt().toIDString(),l),l}moveAfter(t,e,r){let a=this.nodeMapByCreatedAt.get(t.toIDString());if(!a)throw new H(q.ErrInvalidArgument,`cant find the given node: ${t.toIDString()}`);let l=this.nodeMapByCreatedAt.get(e.toIDString());if(!l)throw new H(q.ErrInvalidArgument,`cant find the given node: ${e.toIDString()}`);if(a!==l&&r.after(l.getPositionedAt())){const c=l.getPrev();let d=l.getNext();for(this.release(l),l=this.insertAfter(a.getCreatedAt(),l.getValue(),r),l.getValue().setMovedAt(r),l.setMovedFrom(c);d&&d.getPositionedAt().after(r);)a=l,l=d,d=l.getNext(),this.release(l),l=this.insertAfter(a.getCreatedAt(),l.getValue(),r),l.getValue().setMovedAt(r),l.setMovedFrom(c)}}insert(t){this.insertAfter(this.last.getCreatedAt(),t)}getByID(t){return this.nodeMapByCreatedAt.get(t.toIDString())}subPathOf(t){const e=this.nodeMapByCreatedAt.get(t.toIDString());if(e)return String(this.nodeMapByIndex.indexOf(e))}purge(t){const e=this.nodeMapByCreatedAt.get(t.getCreatedAt().toIDString());if(!e)throw new H(q.ErrInvalidArgument,`fail to find the given createdAt: ${t.getCreatedAt().toIDString()}`);this.release(e)}getByIndex(t){if(t>=this.length)return;const[e,r]=this.nodeMapByIndex.find(t);let a=e;if(t===0&&e===this.dummyHead||r>0)do a&&(a=a.getNext());while(a&&a.isRemoved());return a}getPrevCreatedAt(t){let e=this.nodeMapByCreatedAt.get(t.toIDString());do e=e.getPrev();while(this.dummyHead!==e&&e.isRemoved());return e.getValue().getCreatedAt()}delete(t,e){const r=this.nodeMapByCreatedAt.get(t.toIDString()),a=r.isRemoved();return r.remove(e)&&!a&&this.nodeMapByIndex.splayNode(r),r.getValue()}set(t,e,r){const a=this.nodeMapByCreatedAt.get(t.toIDString());if(!a)throw new H(q.ErrInvalidArgument,`cant find the given node: ${t.toIDString()}`);return this.insertAfter(a.getCreatedAt(),e,r),this.delete(t,r)}deleteByIndex(t,e){const r=this.getByIndex(t);if(r)return r.remove(e)&&this.nodeMapByIndex.splayNode(r),r.getValue()}getHead(){return this.dummyHead.getValue()}getLast(){return this.last.getValue()}getLastCreatedAt(){return this.last.getCreatedAt()}toTestString(){const t=[];for(const e of this){const r=`${e.getCreatedAt().toIDString()}:${e.getValue().toJSON()}`;e.isRemoved()?t.push(`{${r}}`):t.push(`[${r}]`)}return t.join("")}*[Symbol.iterator](){let t=this.dummyHead.getNext();for(;t;)yield t,t=t.getNext()}}class je extends Sa{constructor(e,r){super(e);y(this,"elements");this.elements=r}static create(e,r){if(!r)return new je(e,uc.create());const a=uc.create();for(const l of r)a.insertAfter(a.getLastCreatedAt(),l.deepcopy());return new je(e,a)}subPathOf(e){return this.elements.subPathOf(e)}purge(e){this.elements.purge(e)}insertAfter(e,r,a){this.elements.insertAfter(e,r,a)}moveAfter(e,r,a){this.elements.moveAfter(e,r,a)}get(e){const r=this.elements.getByIndex(e);return r==null?void 0:r.getValue()}getByID(e){const r=this.elements.getByID(e);return r==null?void 0:r.getValue()}getHead(){return this.elements.getHead()}getLast(){return this.elements.getLast()}getPrevCreatedAt(e){return this.elements.getPrevCreatedAt(e)}delete(e,r){return this.elements.delete(e,r)}deleteByIndex(e,r){return this.elements.deleteByIndex(e,r)}set(e,r,a){return this.elements.set(e,r,a)}getLastCreatedAt(){return this.elements.getLastCreatedAt()}get length(){return this.elements.length}*[Symbol.iterator](){for(const e of this.elements)e.isRemoved()||(yield e.getValue())}toTestString(){return this.elements.toTestString()}getDescendants(e){for(const r of this.elements){const a=r.getValue();if(e(a,this))return;a instanceof Sa&&a.getDescendants(e)}}getDataSize(){return{data:0,meta:this.getMetaUsage()}}toJSON(){const e=[];for(const r of this)e.push(r.toJSON());return`[${e.join(",")}]`}toJS(){return JSON.parse(this.toJSON())}toJSForTest(){const e={};for(let r=0;r<this.length;r++){const{createdAt:a,value:l,type:c}=this.get(r).toJSForTest();e[r]={key:String(r),createdAt:a,value:l,type:c}}return{createdAt:this.getCreatedAt().toTestString(),value:e,type:"YORKIE_ARRAY"}}toSortedJSON(){return this.toJSON()}getElements(){return this.elements}deepcopy(){const e=je.create(this.getCreatedAt());for(const r of this.elements)e.elements.insertAfter(e.getLastCreatedAt(),r.getValue().deepcopy());return e.setRemovedAt(this.getRemovedAt()),e.setMovedAt(this.getMovedAt()),e}}class Aa extends sr{constructor(e,r,a,l){super(e,l);y(this,"prevCreatedAt");y(this,"value");this.prevCreatedAt=r,this.value=a}static create(e,r,a,l){return new Aa(e,r,a,l)}execute(e){const r=e.findByCreatedAt(this.getParentCreatedAt());if(!r)throw new H(q.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(r instanceof je))throw new H(q.ErrInvalidArgument,"fail to execute, only array can execute add");const a=r,l=this.value.deepcopy();return a.insertAfter(this.prevCreatedAt,l,this.getExecutedAt()),e.registerElement(l,a),{opInfos:[{type:"add",path:e.createPath(this.getParentCreatedAt()),index:Number(a.subPathOf(this.getEffectedCreatedAt()))}],reverseOp:this.toReverseOperation()}}toReverseOperation(){return Cr.create(this.getParentCreatedAt(),this.value.getCreatedAt())}getEffectedCreatedAt(){return this.value.getCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.ADD.${this.value.toJSON()}`}getPrevCreatedAt(){return this.prevCreatedAt}getValue(){return this.value}setPrevCreatedAt(e){this.prevCreatedAt=e}}class Cr extends sr{constructor(e,r,a){super(e,a);y(this,"createdAt");this.createdAt=r}static create(e,r,a){return new Cr(e,r,a)}execute(e,r){var g;const a=e.findByCreatedAt(this.getParentCreatedAt());if(!a)throw new H(q.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(a instanceof Sa))throw new H(q.ErrInvalidArgument,`only object and array can execute remove: ${a}`);if(r===ae.UndoRedo){let p=a.getByID(this.createdAt);for(;p;){if(p.getRemovedAt())return;p=(g=e.findElementPairByCreatedAt(p.getCreatedAt()))==null?void 0:g.parent}}const l=a.subPathOf(this.createdAt),c=this.toReverseOperation(a),d=a.delete(this.createdAt,this.getExecutedAt());return e.registerRemovedElement(d),{opInfos:a instanceof je?[{type:"remove",path:e.createPath(this.getParentCreatedAt()),index:Number(l)}]:[{type:"remove",path:e.createPath(this.getParentCreatedAt()),key:l}],reverseOp:c}}toReverseOperation(e){if(e instanceof je){const r=e.getByID(this.createdAt);if(r!==void 0){const a=e.getPrevCreatedAt(this.createdAt);return Aa.create(this.getParentCreatedAt(),a,r.deepcopy())}}if(e instanceof Ve){const r=e.subPathOf(this.createdAt);if(r!==void 0){const a=e.get(r);if(a!==void 0)return ao.create(r,a.deepcopy(),this.getParentCreatedAt())}}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.REMOVE.${this.createdAt.toTestString()}`}getCreatedAt(){return this.createdAt}setCreatedAt(e){this.createdAt=e}}class ao extends sr{constructor(e,r,a,l){super(a,l);y(this,"key");y(this,"value");this.key=e,this.value=r}static create(e,r,a,l){return new ao(e,r,a,l)}execute(e,r){var g;const a=e.findByCreatedAt(this.getParentCreatedAt());if(!a)throw new H(q.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(a instanceof Ve))throw new H(q.ErrInvalidArgument,"fail to execute, only object can execute set");if(r===ae.UndoRedo){let p=a;for(;p;){if(p.getRemovedAt())return;p=(g=e.findElementPairByCreatedAt(p.getCreatedAt()))==null?void 0:g.parent}}const l=a.get(this.key),c=this.toReverseOperation(l),d=this.value.deepcopy(),h=a.set(this.key,d,this.getExecutedAt());return r===ae.UndoRedo&&e.findByCreatedAt(d.getCreatedAt())&&e.deregisterElement(d),e.registerElement(d,a),h&&e.registerRemovedElement(h),{opInfos:[{type:"set",path:e.createPath(this.getParentCreatedAt()),key:this.key}],reverseOp:c}}toReverseOperation(e){let r=Cr.create(this.getParentCreatedAt(),this.value.getCreatedAt());return e!==void 0&&!e.isRemoved()&&(r=ao.create(this.key,e.deepcopy(),this.getParentCreatedAt())),r}getEffectedCreatedAt(){return this.value.getCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.SET.${this.key}=${this.value.toSortedJSON()}`}getKey(){return this.key}getValue(){return this.value}}class er extends sr{constructor(e,r,a,l){super(e,l);y(this,"prevCreatedAt");y(this,"createdAt");this.prevCreatedAt=r,this.createdAt=a}static create(e,r,a,l){return new er(e,r,a,l)}execute(e){const r=e.findByCreatedAt(this.getParentCreatedAt());if(!r)throw new H(q.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(r instanceof je))throw new H(q.ErrInvalidArgument,"fail to execute, only array can execute move");const a=r,l=this.toReverseOperation(a),c=Number(a.subPathOf(this.createdAt));a.moveAfter(this.prevCreatedAt,this.createdAt,this.getExecutedAt());const d=Number(a.subPathOf(this.createdAt));return{opInfos:[{type:"move",path:e.createPath(this.getParentCreatedAt()),index:d,previousIndex:c}],reverseOp:l}}toReverseOperation(e){const r=e.getPrevCreatedAt(this.createdAt);return er.create(this.getParentCreatedAt(),r,this.createdAt)}getEffectedCreatedAt(){return this.createdAt}toTestString(){return`${this.getParentCreatedAt().toTestString()}.MOVE`}getPrevCreatedAt(){return this.prevCreatedAt}getCreatedAt(){return this.createdAt}setPrevCreatedAt(e){this.prevCreatedAt=e}setCreatedAt(e){this.createdAt=e}}class va{constructor(t,e,r,a){y(this,"key");y(this,"value");y(this,"updatedAt");y(this,"_isRemoved");this.key=t,this.value=e,this.updatedAt=r,this._isRemoved=a}static of(t,e,r,a){return new va(t,e,r,a)}getKey(){return this.key}getValue(){return this.value}getUpdatedAt(){return this.updatedAt}isRemoved(){return this._isRemoved}toIDString(){return`${this.updatedAt.toIDString()}:${this.key}`}getRemovedAt(){if(this._isRemoved)return this.updatedAt}getDataSize(){return{data:(this.key.length+this.value.length)*2,meta:Tr}}}class Ms{constructor(){y(this,"nodeMapByKey");y(this,"numberOfRemovedElement");this.nodeMapByKey=new Map,this.numberOfRemovedElement=0}static create(){return new Ms}getNodeMapByKey(){return this.nodeMapByKey}set(t,e,r){const a=this.nodeMapByKey.get(t);if(a&&a.isRemoved()&&r.after(a.getUpdatedAt())&&(this.numberOfRemovedElement-=1),a===void 0||r.after(a.getUpdatedAt())){const l=va.of(t,e,r,!1);return this.nodeMapByKey.set(t,l),a!==void 0&&a.isRemoved()?[a,l]:[void 0,l]}return a.isRemoved()?[a,void 0]:[void 0,void 0]}setInternal(t,e,r,a){const l=va.of(t,e,r,a);this.nodeMapByKey.set(t,l),a&&this.numberOfRemovedElement++}remove(t,e){const r=this.nodeMapByKey.get(t),a=[];if(r===void 0||e.after(r.getUpdatedAt())){if(r===void 0){this.numberOfRemovedElement+=1;const d=va.of(t,"",e,!0);return this.nodeMapByKey.set(t,d),a.push(d),a}const l=r.isRemoved();l||(this.numberOfRemovedElement+=1),l&&a.push(r);const c=va.of(t,r.getValue(),e,!0);return this.nodeMapByKey.set(t,c),a.push(c),a}return a}has(t){if(this.nodeMapByKey.has(t)){const e=this.nodeMapByKey.get(t);return e!==void 0&&!e.isRemoved()}return!1}get(t){if(this.nodeMapByKey.has(t))return this.nodeMapByKey.get(t).getValue()}deepcopy(){const t=new Ms;for(const[,e]of this.nodeMapByKey)t.setInternal(e.getKey(),e.getValue(),e.getUpdatedAt(),e.isRemoved());return t}toJSON(){if(!this.size())return"{}";const t=[];for(const[e,r]of this.nodeMapByKey)r.isRemoved()||t.push(`"${br(e)}":"${br(r.getValue())}"`);return`{${t.join(",")}}`}size(){return this.nodeMapByKey.size-this.numberOfRemovedElement}toObject(){const t={};for(const[e,r]of this.nodeMapByKey)r.isRemoved()||(t[e]=r.getValue());return t}*[Symbol.iterator](){for(const[,t]of this.nodeMapByKey)yield t}purge(t){const e=this.nodeMapByKey.get(t.getKey());e==null||e.toIDString()!=t.toIDString()||(this.nodeMapByKey.delete(t.getKey()),this.numberOfRemovedElement--)}}function Xn(n){if(n instanceof Map){const t=Array.from(n);return new Map(JSON.parse(JSON.stringify(t)))}return JSON.parse(JSON.stringify(n))}const Ix=n=>n?Object.entries(n).length===0:!0,bl=n=>{const t={};for(const[e,r]of Object.entries(n))t[e]=JSON.stringify(r);return t},Is=n=>{const t={};for(const[e,r]of Object.entries(n))t[e]=JSON.parse(r);return t};function Mk(n){return n?Mb(n.live)+Mb(n.gc):0}function Mb(n){return n.data+n.meta}function Pe(n,...t){for(const e of t)n.data+=e.data,n.meta+=e.meta}function Wa(n,t){n.data-=t.data,n.meta-=t.meta}class cc{constructor(t){y(this,"attributes");y(this,"content");this.attributes=Ms.create(),this.content=t}static create(t){return new cc(t)}get length(){return this.content.length}substring(t,e){const r=new cc(this.content.substring(t,e));return r.attributes=this.attributes.deepcopy(),r}setAttr(t,e,r){return this.attributes.set(t,e,r)}getAttrs(){return this.attributes}toString(){return this.content}getDataSize(){const t={data:0,meta:0};t.data+=this.content.length*2;for(const e of this.attributes){const r=e.getDataSize();t.meta+=r.meta,t.data+=r.data}return t}toJSON(){const t=br(this.content),e=this.attributes.toObject(),r=[];for(const[a,l]of Object.entries(e)){const c=JSON.parse(l),d=typeof c=="string"?`"${br(a)}":"${br(c)}"`:`"${br(a)}":${String(c)}`;r.push(d)}return r.sort(),r.length===0?`{"val":"${t}"}`:`{"attrs":{${r.join(",")}},"val":"${t}"}`}getAttributes(){return this.attributes.toObject()}getContent(){return this.content}purge(t){this.attributes&&t instanceof va&&this.attributes.purge(t)}getGCPairs(){const t=[];for(const e of this.attributes)e.getRemovedAt()&&t.push({parent:this,child:e});return t}}class pn extends Tc{constructor(e,r){super(r);y(this,"rgaTreeSplit");this.rgaTreeSplit=e}static create(e,r){return new pn(e,r)}edit(e,r,a,l,c){const d=r?cc.create(r):void 0;if(d&&l)for(const[S,A]of Object.entries(l))d.setAttr(S,A,a);const[h,g,p,w]=this.rgaTreeSplit.edit(e,a,d,c);return[w.map(S=>({...S,value:S.value?{attributes:Is(S.value.getAttributes()),content:S.value.getContent()}:{attributes:void 0,content:""},type:"content"})),g,p,[h,h]]}setStyle(e,r,a,l){const c={data:0,meta:0},[,d,h]=this.rgaTreeSplit.findNodeWithSplit(e[1],a),[,g,p]=this.rgaTreeSplit.findNodeWithSplit(e[0],a);Pe(c,d,g);const w=[],v=this.rgaTreeSplit.findBetween(p,h),S=[];for(const T of v){const k=T.getCreatedAt().getActorID();let D=sp;l!=null&&(D=l.get(k)?l.get(k):0n),T.canStyle(a,D)&&S.push(T)}const A=[];for(const T of S){if(T.isRemoved())continue;const[k,D]=this.rgaTreeSplit.findIndexesFromRange(T.createPosRange());w.push({type:"style",actor:a.getActorID(),from:k,to:D,value:{attributes:Is(r)}});for(const[L,N]of Object.entries(r)){const[O]=T.getValue().setAttr(L,N,a);O!==void 0&&A.push({parent:T.getValue(),child:O});const B=T.getValue().getAttrs().getNodeMapByKey().get(L);B!==void 0&&Pe(c,B.getDataSize())}}return[A,c,w]}indexRangeToPosRange(e,r){const a=this.rgaTreeSplit.indexToPos(e);return e===r?[a,a]:[a,this.rgaTreeSplit.indexToPos(r)]}get length(){return this.rgaTreeSplit.length}getTreeByIndex(){return this.rgaTreeSplit.getTreeByIndex()}getTreeByID(){return this.rgaTreeSplit.getTreeByID()}getDataSize(){const e={data:0,meta:0};for(const r of this.rgaTreeSplit){if(r.isRemoved())continue;const a=r.getDataSize();e.data+=a.data,e.meta+=a.meta}return{data:e.data,meta:e.meta+this.getMetaUsage()}}toJSON(){const e=[];for(const r of this.rgaTreeSplit)r.isRemoved()||e.push(r.getValue().toJSON());return`[${e.join(",")}]`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:JSON.parse(this.toJSON()),type:"YORKIE_TEXT"}}toString(){return this.rgaTreeSplit.toString()}values(){const e=[];for(const r of this.rgaTreeSplit)if(!r.isRemoved()){const a=r.getValue();e.push({attributes:Is(a.getAttributes()),content:a.getContent()})}return e}getRGATreeSplit(){return this.rgaTreeSplit}toTestString(){return this.rgaTreeSplit.toTestString()}deepcopy(){const e=new pn(this.rgaTreeSplit.deepcopy(),this.getCreatedAt());return e.setRemovedAt(this.getRemovedAt()),e.setMovedAt(this.getMovedAt()),e}findIndexesFromRange(e){return this.rgaTreeSplit.findIndexesFromRange(e)}getGCPairs(){const e=[];for(const r of this.rgaTreeSplit){r.getRemovedAt()&&e.push({parent:this.rgaTreeSplit,child:r});for(const a of r.getValue().getGCPairs())e.push(a)}return e}}class Ac extends sr{constructor(e,r,a,l,c,d){super(e,d);y(this,"fromPos");y(this,"toPos");y(this,"content");y(this,"attributes");this.fromPos=r,this.toPos=a,this.content=l,this.attributes=c}static create(e,r,a,l,c,d){return new Ac(e,r,a,l,c,d)}execute(e,r,a){const l=e.findByCreatedAt(this.getParentCreatedAt());if(!l)throw new H(q.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(l instanceof pn))throw new H(q.ErrInvalidArgument,"fail to execute, only Text can execute edit");const c=l,[d,h,g]=c.edit([this.fromPos,this.toPos],this.content,this.getExecutedAt(),Object.fromEntries(this.attributes),a);e.acc(g);for(const p of h)e.registerGCPair(p);return{opInfos:d.map(({from:p,to:w,value:v})=>({type:"edit",from:p,to:w,value:v,path:e.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),r=this.fromPos.toTestString(),a=this.toPos.toTestString(),l=this.content;return`${e}.EDIT(${r},${a},${l})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getContent(){return this.content}getAttributes(){return this.attributes||new Map}}class Ec extends sr{constructor(e,r,a,l,c){super(e,c);y(this,"fromPos");y(this,"toPos");y(this,"attributes");this.fromPos=r,this.toPos=a,this.attributes=l}static create(e,r,a,l,c){return new Ec(e,r,a,l,c)}execute(e,r,a){const l=e.findByCreatedAt(this.getParentCreatedAt());if(!l)throw new H(q.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(l instanceof pn))throw new H(q.ErrInvalidArgument,"fail to execute, only Text can execute edit");const c=l,[d,h,g]=c.setStyle([this.fromPos,this.toPos],this.attributes?Object.fromEntries(this.attributes):{},this.getExecutedAt(),a);e.acc(h);for(const p of d)e.registerGCPair(p);return{opInfos:g.map(({from:p,to:w,value:v})=>({type:"style",from:p,to:w,value:v,path:e.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),r=this.fromPos.toTestString(),a=this.toPos.toTestString(),l=this.attributes;return`${e}.STYL(${r},${a},${JSON.stringify(l)})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getAttributes(){return this.attributes}}const Rk=2,Bk="root",Ar="text";function qu(n,t,e=!1){let r=0;const a=e?n.allChildren:n.children;for(let l=0;l<t;l++){const c=a[l];!c||!e&&c.isRemoved||(r+=c.paddedSize(e))}return r}class zk{constructor(t,e=[]){y(this,"type");y(this,"parent");y(this,"_children");y(this,"visibleSize");y(this,"totalSize");if(this.type=t,this.visibleSize=0,this.totalSize=0,this._children=e,this.isText&&this._children.length>0)throw new H(q.ErrRefused,"Text node cannot have children")}updateAncestorsSize(t,e=!1){let r=this.parent;for(;r;){if(e)r.totalSize+=t;else if(r.visibleSize+=t,r.isRemoved)break;r=r.parent}}updateDescendantsSize(t=!1){let e=0;for(const r of this._children){const a=r.updateDescendantsSize(t);!t&&r.isRemoved||(e+=a)}return t?this.totalSize+=e:this.visibleSize+=e,this.paddedSize(t)}get isText(){return this.type===Ar}paddedSize(t=!1){let e=this.visibleSize;return t&&(e=this.totalSize),this.isText||(e+=Rk),e}isAncestorOf(t){return Lk(this,t)}get nextSibling(){const t=this.parent.findOffset(this),e=this.parent.children[t+1];if(e)return e}get prevSibling(){const t=this.parent.findOffset(this),e=this.parent.children[t-1];if(e)return e}splitText(t,e){const r={data:0,meta:0};if(t===0||t===this.visibleSize)return[void 0,r];const a=this.value.slice(0,t),l=this.value.slice(t);if(!l.length)return[void 0,r];const c=this.getDataSize();this.value=a;const d=this.cloneText(t+e);return d.value=l,this.parent.insertAfterInternal(d,this),Pe(r,this.getDataSize(),d.getDataSize()),Wa(r,c),[d,r]}get children(){return this._children.filter(t=>!t.isRemoved)}get allChildren(){return[...this._children]}hasTextChild(){return this.children.length>0&&this.children.every(t=>t.isText)}getChildrenText(){return this.isText?this.value:this.hasTextChild()?this.children.map(t=>t.value).join(""):""}append(...t){if(this.isText)throw new H(q.ErrRefused,"Text node cannot have children");this._children.push(...t);for(const e of t)e.parent=this,e.updateAncestorsSize(e.paddedSize()),e.updateAncestorsSize(e.paddedSize(!0),!0)}prepend(...t){if(this.isText)throw new H(q.ErrRefused,"Text node cannot have children");this._children.unshift(...t);for(const e of t)e.parent=this}insertBefore(t,e){if(this.isText)throw new H(q.ErrRefused,"Text node cannot have children");const r=this._children.indexOf(e);if(r===-1)throw new H(q.ErrInvalidArgument,"child not found");this.insertAtInternal(t,r),t.updateAncestorsSize(t.paddedSize()),t.updateAncestorsSize(t.paddedSize(!0),!0)}insertAfter(t,e){if(this.isText)throw new H(q.ErrRefused,"Text node cannot have children");const r=this._children.indexOf(e);if(r===-1)throw new H(q.ErrInvalidArgument,"child not found");this.insertAtInternal(t,r+1),t.updateAncestorsSize(t.paddedSize()),t.updateAncestorsSize(t.paddedSize(!0),!0)}insertAt(t,e){if(this.isText)throw new H(q.ErrRefused,"Text node cannot have children");this.insertAtInternal(t,e),t.updateAncestorsSize(t.paddedSize()),t.updateAncestorsSize(t.paddedSize(!0),!0)}removeChild(t){if(this.isText)throw new H(q.ErrRefused,"Text node cannot have children");const e=this._children.indexOf(t);if(e===-1)throw new H(q.ErrInvalidArgument,"child not found");this._children.splice(e,1),t.updateAncestorsSize(-t.paddedSize(!0),!0),t.parent=void 0}splitElement(t,e){const r={data:0,meta:0},a=this.getDataSize(),l=this.cloneElement(e);this.parent.insertAfterInternal(l,this),l.updateAncestorsSize(l.paddedSize()),l.updateAncestorsSize(l.paddedSize(!0),!0);const c=this.children.slice(0,t),d=this.children.slice(t);this._children=c,l._children=d,this.visibleSize=this._children.reduce((h,g)=>h+g.paddedSize(),0),this.totalSize=this._children.reduce((h,g)=>h+g.paddedSize(!0),0),l.visibleSize=l._children.reduce((h,g)=>h+g.paddedSize(!0),0),l.totalSize=l._children.reduce((h,g)=>h+g.paddedSize(!0),0);for(const h of l._children)h.parent=l;return Pe(r,this.getDataSize(),l.getDataSize()),Wa(r,a),[l,r]}insertAfterInternal(t,e){if(this.isText)throw new H(q.ErrRefused,"Text node cannot have children");const r=this._children.indexOf(e);if(r===-1)throw new H(q.ErrInvalidArgument,"child not found");this.insertAtInternal(t,r+1)}insertAtInternal(t,e){if(this.isText)throw new H(q.ErrRefused,"Text node cannot have children");this._children.splice(e,0,t),t.parent=this}findOffset(t,e=!1){if(this.isText)throw new H(q.ErrRefused,"Text node cannot have children");if(e)return this._children.indexOf(t);if(t.isRemoved){const r=this._children.indexOf(t);return this.allChildren.splice(0,r).filter(l=>!l.isRemoved).length}return this.children.indexOf(t)}findBranchOffset(t){if(this.isText)throw new H(q.ErrRefused,"Text node cannot have children");let e=t;for(;e;){const r=this._children.indexOf(e);if(r!==-1)return r;e=e.parent}return-1}}function Lk(n,t){if(n===t)return!1;for(;t.parent;){if(t.parent===n)return!0;t=t.parent}return!1}var we=(n=>(n.Start="Start",n.End="End",n.Text="Text",n))(we||{});function Ox(n,t,e,r,a=!1){if(t>e)throw new H(q.ErrInvalidArgument,`from is greater than to: ${t} > ${e}`);const l=a?n.totalSize:n.visibleSize;if(t>l)throw new H(q.ErrInvalidArgument,`from is out of range: ${t} > ${l}`);if(e>l)throw new H(q.ErrInvalidArgument,`to is out of range: ${e} > ${l}`);if(t===e)return;let c=0;const d=a?n._children:n.children;for(const h of d){if(t-h.paddedSize(a)<c&&c<e){const g=h.isText?t-c:t-c-1,p=h.isText?e-c:e-c-1,w=a?h.totalSize:h.visibleSize,v=!h.isText&&g<0,S=!h.isText&&p>w;(h.isText||v)&&r([h,h.isText?"Text":"Start"],S),Ox(h,Math.max(0,g),Math.min(p,w),r,a),S&&r([h,"End"],S)}c+=h.paddedSize(a)}}function Mx(n,t,e=0){for(const r of n.children)Mx(r,t,e+1);t(n,e)}function mh(n,t,e=0){for(const r of n._children)mh(r,t,e+1);t(n,e)}function op(n,t,e=!0){if(t>n.visibleSize)throw new H(q.ErrInvalidArgument,`index is out of range: ${t} > ${n.visibleSize}`);if(n.isText)return{node:n,offset:t};let r=0,a=0;for(const l of n.children){if(e&&l.isText&&l.visibleSize>=t-a)return op(l,t-a,e);if(t===a)return{node:n,offset:r};if(!e&&l.paddedSize()===t-a)return{node:n,offset:r+1};if(l.paddedSize()>t-a)return op(l,t-a-1,e);a+=l.paddedSize(),r+=1}return{node:n,offset:r}}function Rx(n){return n.isText||n.children.length===0?n:Rx(n.children[0])}function Uk(n,t){if(n.visibleSize<t)throw new H(q.ErrInvalidArgument,"unacceptable path");for(let e=0;e<n.children.length;e++){const r=n.children[e];if(r.visibleSize<t)t-=r.visibleSize;else{n=r;break}}return{node:n,offset:t}}class _k{constructor(t){y(this,"root");this.root=t}tokensBetween(t,e,r,a=!1){Ox(this.root,t,e,r,a)}traverse(t){Mx(this.root,t,0)}traverseAll(t){mh(this.root,t,0)}findTreePos(t,e=!0){return op(this.root,t,e)}treePosToPath(t){const e=[];let r=t.node;if(r.isText){const a=r.parent.findOffset(r);if(a===-1)throw new H(q.ErrInvalidArgument,"invalid treePos");const l=qu(r.parent,a);e.push(l+t.offset),r=r.parent}else if(r.hasTextChild()){const a=qu(r,t.offset);e.push(a)}else e.push(t.offset);for(;r.parent;){const a=r.parent.findOffset(r);if(a===-1)throw new H(q.ErrInvalidArgument,"invalid treePos");e.push(a),r=r.parent}return e.reverse()}pathToIndex(t){const e=this.pathToTreePos(t);return this.indexOf(e)}pathToTreePos(t){if(!t.length)throw new H(q.ErrInvalidArgument,"unacceptable path");let e=this.root;for(let r=0;r<t.length-1;r++){const a=t[r];if(e=e.children[a],!e)throw new H(q.ErrInvalidArgument,"unacceptable path")}if(e.hasTextChild())return Uk(e,t[t.length-1]);if(e.children.length<t[t.length-1])throw new H(q.ErrInvalidArgument,"unacceptable path");return{node:e,offset:t[t.length-1]}}getRoot(){return this.root}get size(){return this.root.visibleSize}findPostorderRight(t){const{node:e,offset:r}=t;if(e.isText){if(e.visibleSize===r){const a=e.nextSibling;return a||e.parent}return e}return e.children.length===r?e:Rx(e.children[r])}indexOf(t,e=!1){let{node:r}=t;const{offset:a}=t;let l=0,c=1;if(r.isText){l+=a;const d=r.parent,h=d.findOffset(r,e);if(h===-1)throw new H(q.ErrInvalidArgument,"invalid pos");l+=qu(d,h,e),r=r.parent}else l+=qu(r,a,e);for(;r!=null&&r.parent;){const d=r.parent,h=d.findOffset(r,e);if(h===-1)throw new H(q.ErrInvalidArgument,"invalid pos");l+=qu(d,h,e),c++,r=r.parent}return l+c-1}indexToPath(t){const e=this.findTreePos(t);return this.treePosToPath(e)}}const Pk=(n,t)=>n===t?0:n<t?-1:1;class qk{constructor(t,e,r){y(this,"key");y(this,"value");y(this,"left");y(this,"right");y(this,"isRed");this.key=t,this.value=e,this.isRed=r}}class Jk{constructor(t){y(this,"stack");this.stack=[],this.traverseInorder(t)}traverseInorder(t){t&&(this.traverseInorder(t.left),this.stack.push({key:t.key,value:t.value}),this.traverseInorder(t.right))}}class Bx{constructor(t){y(this,"root");y(this,"comparator");y(this,"counter");this.comparator=typeof t<"u"?t:Pk,this.counter=0}put(t,e){return this.root=this.putInternal(t,e,this.root),this.root.isRed=!1,e}get(t){const e=this.getInternal(t,this.root);return e?e.value:void 0}remove(t){!this.isRed(this.root.left)&&!this.isRed(this.root.right)&&(this.root.isRed=!0),this.root=this.removeInternal(this.root,t),this.root&&(this.root.isRed=!1)}getIterator(){return new Jk(this.root)}values(){const t=[];for(const e of this.getIterator().stack)t.push(e.value);return t}floorEntry(t){let e=this.root,r;for(;e;){const a=this.comparator(t,e.key);if(a===0)return e;a<0?e=e.left:(r=e,e=e.right)}return r}lastEntry(){if(!this.root)return this.root;let t=this.root;for(;t.right;)t=t.right;return t}size(){return this.counter}isEmpty(){return this.counter===0}getInternal(t,e){for(;e;){const r=this.comparator(t,e.key);if(r===0)return e;r<0?e=e.left:r>0&&(e=e.right)}}putInternal(t,e,r){if(!r)return this.counter+=1,new qk(t,e,!0);const a=this.comparator(t,r.key);return a<0?r.left=this.putInternal(t,e,r.left):a>0?r.right=this.putInternal(t,e,r.right):r.value=e,this.isRed(r.right)&&!this.isRed(r.left)&&(r=this.rotateLeft(r)),this.isRed(r.left)&&this.isRed(r.left.left)&&(r=this.rotateRight(r)),this.isRed(r.left)&&this.isRed(r.right)&&this.flipColors(r),r}removeInternal(t,e){if(this.comparator(e,t.key)<0)!this.isRed(t.left)&&!this.isRed(t.left.left)&&(t=this.moveRedLeft(t)),t.left=this.removeInternal(t.left,e);else{if(this.isRed(t.left)&&(t=this.rotateRight(t)),this.comparator(e,t.key)===0&&!t.right){this.counter-=1;return}if(!this.isRed(t.right)&&!this.isRed(t.right.left)&&(t=this.moveRedRight(t)),this.comparator(e,t.key)===0){this.counter-=1;const r=this.min(t.right);t.value=r.value,t.key=r.key,t.right=this.removeMin(t.right)}else t.right=this.removeInternal(t.right,e)}return this.fixUp(t)}min(t){return t.left?this.min(t.left):t}removeMin(t){if(t.left)return!this.isRed(t.left)&&!this.isRed(t.left.left)&&(t=this.moveRedLeft(t)),t.left=this.removeMin(t.left),this.fixUp(t)}fixUp(t){return this.isRed(t.right)&&(t=this.rotateLeft(t)),this.isRed(t.left)&&this.isRed(t.left.left)&&(t=this.rotateRight(t)),this.isRed(t.left)&&this.isRed(t.right)&&this.flipColors(t),t}moveRedLeft(t){return this.flipColors(t),this.isRed(t.right.left)&&(t.right=this.rotateRight(t.right),t=this.rotateLeft(t),this.flipColors(t)),t}moveRedRight(t){return this.flipColors(t),this.isRed(t.left.left)&&(t=this.rotateRight(t),this.flipColors(t)),t}isRed(t){return t&&t.isRed}rotateLeft(t){const e=t.right;return t.right=e.left,e.left=t,e.isRed=e.left.isRed,e.left.isRed=!0,e}rotateRight(t){const e=t.left;return t.left=e.right,e.right=t,e.isRed=e.right.isRed,e.right.isRed=!0,e}flipColors(t){t.isRed=!t.isRed,t.left.isRed=!t.left.isRed,t.right.isRed=!t.right.isRed}}class nr{constructor(t,e){y(this,"parentID");y(this,"leftSiblingID");this.parentID=t,this.leftSiblingID=e}static of(t,e){return new nr(t,e)}static fromTreePos(t){const{offset:e}=t;let{node:r}=t,a;return r.isText?(r.parent.children[0]===r&&e===0?a=r.parent:a=r,r=r.parent):e===0?a=r:a=r.children[e-1],nr.of(r.id,qe.of(a.getCreatedAt(),a.getOffset()+e))}getParentID(){return this.parentID}static fromStruct(t){return nr.of(qe.of($n.fromStruct(t.parentID.createdAt),t.parentID.offset),qe.of($n.fromStruct(t.leftSiblingID.createdAt),t.leftSiblingID.offset))}toStruct(){return{parentID:{createdAt:this.getParentID().getCreatedAt().toStruct(),offset:this.getParentID().getOffset()},leftSiblingID:{createdAt:this.getLeftSiblingID().getCreatedAt().toStruct(),offset:this.getLeftSiblingID().getOffset()}}}toTreeNodePair(t){const e=this.getParentID(),r=this.getLeftSiblingID(),a=t.findFloorNode(e);let l=t.findFloorNode(r);if(!a||!l)throw new H(q.ErrRefused,`cannot find node of CRDTTreePos(${e.toTestString()}, ${r.toTestString()})`);return!r.equals(e)&&r.getOffset()>0&&r.getOffset()===l.id.getOffset()&&l.insPrevID&&(l=t.findFloorNode(l.insPrevID)),[a,l]}getLeftSiblingID(){return this.leftSiblingID}equals(t){return this.getParentID().getCreatedAt().equals(t.getParentID().getCreatedAt())&&this.getParentID().getOffset()===t.getParentID().getOffset()&&this.getLeftSiblingID().getCreatedAt().equals(t.getLeftSiblingID().getCreatedAt())&&this.getLeftSiblingID().getOffset()===t.getLeftSiblingID().getOffset()}}class qe{constructor(t,e){y(this,"createdAt");y(this,"offset");this.createdAt=t,this.offset=e}static of(t,e){return new qe(t,e)}static fromStruct(t){return qe.of($n.fromStruct(t.createdAt),t.offset)}static createComparator(){return(t,e)=>{const r=t.getCreatedAt().compare(e.getCreatedAt());return r!==0?r:t.getOffset()>e.getOffset()?1:t.getOffset()<e.getOffset()?-1:0}}getCreatedAt(){return this.createdAt}equals(t){return this.createdAt.compare(t.createdAt)===0&&this.offset===t.offset}getOffset(){return this.offset}setOffset(t){this.offset=t}toStruct(){return{createdAt:this.createdAt.toStruct(),offset:this.offset}}toIDString(){return`${this.createdAt.toIDString()}:${this.offset}`}toTestString(){return`${this.createdAt.toTestString()}/${this.offset}`}}class yn extends zk{constructor(e,r,a,l,c){super(r);y(this,"id");y(this,"removedAt");y(this,"attrs");y(this,"insPrevID");y(this,"insNextID");y(this,"_value","");this.id=e,this.removedAt=c,l&&(this.attrs=l),typeof a=="string"?this.value=a:Array.isArray(a)&&(this._children=a)}toIDString(){return this.id.toIDString()}getRemovedAt(){return this.removedAt}static create(e,r,a,l){return new yn(e,r,a,l)}deepcopy(){var r;const e=new yn(this.id,this.type);return e.removedAt=this.removedAt,e._value=this._value,e.visibleSize=this.visibleSize,e.totalSize=this.totalSize,e.attrs=(r=this.attrs)==null?void 0:r.deepcopy(),e._children=this._children.map(a=>{const l=a.deepcopy();return l.parent=e,l}),e.insPrevID=this.insPrevID,e.insNextID=this.insNextID,e}get value(){if(!this.isText)throw new H(q.ErrInvalidType,`cannot get value of element node: ${this.type}`);return this._value}set value(e){if(!this.isText)throw new H(q.ErrInvalidType,`cannot set value of element node: ${this.type}`);this._value=e,this.visibleSize=e.length,this.totalSize=e.length}get isRemoved(){return!!this.removedAt}remove(e){return this.removedAt?(e.after(this.removedAt)&&(this.removedAt=e),!1):(this.removedAt=e,this.updateAncestorsSize(-this.paddedSize()),!0)}cloneText(e){return new yn(qe.of(this.id.getCreatedAt(),e),this.type,void 0,void 0,this.removedAt)}cloneElement(e){return new yn(qe.of(e(),0),this.type,void 0,void 0,this.removedAt)}split(e,r,a){const[l,c]=this.isText?this.splitText(r,this.id.getOffset()):this.splitElement(r,a);if(l){if(l.insPrevID=this.id,this.insNextID){const d=e.findFloorNode(this.insNextID);d.insPrevID=l.id,l.insNextID=this.insNextID}this.insNextID=l.id,e.registerNode(l)}return[l,c]}getCreatedAt(){return this.id.getCreatedAt()}getOffset(){return this.id.getOffset()}canDelete(e,r,a){return r?!!(!this.removedAt||!a&&(e!=null&&e.after(this.removedAt))):!1}canStyle(e,r){return this.isText?!1:this.getCreatedAt().getLamport()<=r&&(!this.removedAt||e.after(this.removedAt))}setAttrs(e,r){this.attrs||(this.attrs=new Ms);const a=[];for(const[l,c]of Object.entries(e))a.push(this.attrs.set(l,c,r));return a}purge(e){this.attrs&&this.attrs.purge(e)}getDataSize(){const e={data:0,meta:0};if(this.isText&&(e.data+=this.visibleSize*2),this.id&&(e.meta+=Tr),this.removedAt&&(e.meta+=Tr),this.attrs)for(const r of this.attrs){if(r.getRemovedAt())continue;const a=r.getDataSize();e.meta+=a.meta,e.data+=a.data}return e}getGCPairs(){const e=[];if(!this.attrs)return e;for(const r of this.attrs)r.getRemovedAt()&&e.push({parent:this,child:r});return e}}function lp(n){var e;if(n.isText){const r=n;return{type:r.type,value:r.value}}const t={type:n.type,children:n.children.map(lp)};return n.attrs&&(t.attributes=Is((e=n.attrs)==null?void 0:e.toObject())),t}function Dp(n){if(n.isText)return n.value;let t="";return n.attrs&&n.attrs.size()&&(t=" "+Array.from(n.attrs).filter(e=>!e.isRemoved()).sort((e,r)=>e.getKey().localeCompare(r.getKey())).map(e=>{const r=JSON.parse(e.getValue());return typeof r=="string"?`${e.getKey()}="${r}"`:`${e.getKey()}="${br(e.getValue())}"`}).join(" ")),`<${n.type}${t}>${n.children.map(e=>Dp(e)).join("")}</${n.type}>`}function zx(n){if(n.isText){const t=n;return{type:t.type,value:t.value,visibleSize:t.visibleSize,isRemoved:t.isRemoved}}return{type:n.type,children:n.children.map(zx),visibleSize:n.visibleSize,isRemoved:n.isRemoved}}class vn extends Tc{constructor(e,r){super(r);y(this,"indexTree");y(this,"nodeMapByID");this.indexTree=new _k(e),this.nodeMapByID=new Bx(qe.createComparator()),this.indexTree.traverseAll(a=>{this.nodeMapByID.put(a.id,a)})}static create(e,r){return new vn(e,r)}findFloorNode(e){const r=this.nodeMapByID.floorEntry(e);if(!(!r||!r.key.getCreatedAt().equals(e.getCreatedAt())))return r.value}registerNode(e){this.nodeMapByID.put(e.id,e)}findNodesAndSplitText(e,r){let a={data:0,meta:0};const[l,c]=e.toTreeNodePair(this);let d=c;const h=l===d,g=d.parent&&!h?d.parent:l;if(d.isText){const[,p]=d.split(this,e.getLeftSiblingID().getOffset()-d.id.getOffset());a=p}if(r){const p=g.allChildren,w=h?0:p.indexOf(d)+1;for(let v=w;v<p.length;v++){const S=p[v];if(!S.id.getCreatedAt().after(r))break;d=S}}return[[g,d],a]}style(e,r,a,l){const c={data:0,meta:0},[[d,h],g]=this.findNodesAndSplitText(e[0],a),[[p,w],v]=this.findNodesAndSplitText(e[1],a);Pe(c,v,g);const S=[],A=r?Is(r):{},T=[];return this.traverseInPosRange(d,h,p,w,([k,D])=>{var O;const L=k.getCreatedAt().getActorID();let N=sp;if(l!=null&&(N=l.get(L)?l.get(L):0n),k.canStyle(a,N)&&r){const B=k.setAttrs(r,a),U=B.reduce((W,[,ft])=>(ft&&(W[ft.getKey()]=A[ft.getKey()]),W),{}),J=k.parent,j=k.prevSibling||k.parent;Object.keys(U).length>0&&S.push({type:"style",from:this.toIndex(J,j),to:this.toIndex(k,k),fromPath:this.toPath(J,j),toPath:this.toPath(k,k),actor:a.getActorID(),value:U});for(const[W]of B)W&&T.push({parent:k,child:W});for(const[W]of Object.entries(A)){const ft=(O=k.attrs)==null?void 0:O.getNodeMapByKey().get(W);ft!==void 0&&D!==we.End&&Pe(c,ft.getDataSize())}}}),[T,S,c]}removeStyle(e,r,a,l){const c={data:0,meta:0},[[d,h],g]=this.findNodesAndSplitText(e[0],a),[[p,w],v]=this.findNodesAndSplitText(e[1],a);Pe(c,v,g);const S=[],A=[];return this.traverseInPosRange(d,h,p,w,([T])=>{const k=T.getCreatedAt().getActorID();let D=sp;if(l!=null&&(D=l.get(k)?l.get(k):0n),T.canStyle(a,D)&&r){T.attrs||(T.attrs=new Ms);for(const O of r){const B=T.attrs.remove(O,a);for(const U of B)A.push({parent:T,child:U})}const L=T.parent,N=T.prevSibling||T.parent;S.push({actor:a.getActorID(),type:"removeStyle",from:this.toIndex(L,N),to:this.toIndex(T,T),fromPath:this.toPath(L,N),toPath:this.toPath(T,T),value:r})}}),[A,S,c]}edit(e,r,a,l,c,d){const h={data:0,meta:0},[[g,p],w]=this.findNodesAndSplitText(e[0],l),[[v,S],A]=this.findNodesAndSplitText(e[1],l);Pe(h,A,w);const T=this.toIndex(g,p),k=this.toPath(g,p),D=[],L=[],N=[];this.traverseInPosRange(g,p,v,S,([U,J],j)=>{if(J===we.Start&&!j)for(const ot of U.children)N.push(ot);const W=d===void 0;let ft=!1;const nt=d==null?void 0:d.get(U.id.getCreatedAt().getActorID());ft=W||nt!==void 0&&nt>=U.id.getCreatedAt().getLamport();let rt=!1;if(U.removedAt){const ot=d==null?void 0:d.get(U.removedAt.getActorID());rt=W||ot!==void 0&&ot>=U.removedAt.getLamport()}(U.canDelete(l,ft,rt)||D.includes(U.parent))&&((J===we.Text||J===we.Start)&&D.push(U),L.push([U,J]))},!0);const O=this.makeDeletionChanges(L,l),B=[];for(const U of D)U.remove(l),U.isRemoved&&B.push({parent:this,child:U});for(const U of N)U.removedAt||g.append(U);if(a>0){let U=0,J=g,j=p;for(;U<a;)J.split(this,J.findOffset(j)+1,c),j=J,J=J.parent,U++;O.push({type:"content",from:T,to:T,fromPath:k,toPath:k,actor:l.getActorID()})}if(r!=null&&r.length){const U=[];let J=p;for(const j of r)J===g?g.insertAt(j,0):g.insertAfter(j,J),J=j,mh(j,W=>{g.isRemoved?(W.remove(l),B.push({parent:this,child:W})):Pe(h,W.getDataSize()),this.nodeMapByID.put(W.id,W)}),j.isRemoved||U.push(j);if(U.length){const j=U.map(W=>lp(W));O.length&&O[O.length-1].from===T?O[O.length-1].value=j:O.push({type:"content",from:T,to:T,fromPath:k,toPath:k,actor:l.getActorID(),value:j})}}return[O,B,h]}editT(e,r,a,l,c){const d=this.findPos(e[0]),h=this.findPos(e[1]);return this.edit([d,h],r,a,l,c)}move(e,r,a){throw new H(q.ErrUnimplemented,`not implemented: ${e}, ${r}, ${a}`)}pathToTreePos(e){return this.indexTree.pathToTreePos(e)}purge(e){var l;(l=e.parent)==null||l.removeChild(e),this.nodeMapByID.remove(e.id);const r=e.insPrevID,a=e.insNextID;if(r){const c=this.findFloorNode(r);c.insNextID=a}if(a){const c=this.findFloorNode(a);c.insPrevID=r}e.insPrevID=void 0,e.insNextID=void 0}getGCPairs(){const e=[];return this.indexTree.traverse(r=>{r.getRemovedAt()&&e.push({parent:this,child:r});for(const a of r.getGCPairs())e.push(a)}),e}findPos(e,r=!0){const a=this.indexTree.findTreePos(e,r);return nr.fromTreePos(a)}pathToPosRange(e){const r=this.pathToIndex(e);return[this.findPos(r),this.findPos(r+1)]}pathToPos(e){const r=this.indexTree.pathToIndex(e);return this.findPos(r)}getRoot(){return this.indexTree.getRoot()}getSize(){return this.indexTree.size}getNodeSize(){return this.nodeMapByID.size()}getIndexTree(){return this.indexTree}toXML(){return Dp(this.indexTree.getRoot())}getDataSize(){const e={data:0,meta:0};return this.indexTree.traverse(r=>{if(r.getRemovedAt())return;const a=r.getDataSize();e.data+=a.data,e.meta+=a.meta}),{data:e.data,meta:e.meta+this.getMetaUsage()}}toJSON(){return JSON.stringify(this.getRootTreeNode())}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:JSON.parse(this.toJSON()),type:"YORKIE_TREE"}}toJSInfoForTest(){const e=this.indexTree.getRoot(),r=(a,l=void 0,c=void 0,d=0)=>{var S,A,T,k;let h,g,p;const w=a.isText?{node:a,offset:0}:l&&c?this.toTreePos(l,c):null;w&&(h=this.indexTree.indexOf(w),g=this.indexTree.treePosToPath(w),p=nr.fromTreePos(w).toStruct());const v={type:a.type,parent:l==null?void 0:l.id.toTestString(),size:a.visibleSize,id:a.id.toTestString(),removedAt:(S=a.removedAt)==null?void 0:S.toTestString(),insPrev:(A=a.insPrevID)==null?void 0:A.toTestString(),insNext:(T=a.insNextID)==null?void 0:T.toTestString(),value:a.isText?a.value:void 0,isRemoved:a.isRemoved,children:[],depth:d,attributes:a.attrs?Is((k=a.attrs)==null?void 0:k.toObject()):void 0,index:h,path:g,pos:p};for(let D=0;D<a.allChildren.length;D++){const L=D===0?a:a.allChildren[D-1];v.children.push(r(a.allChildren[D],a,L,d+1))}return v};return r(e)}getRootTreeNode(){return lp(this.indexTree.getRoot())}toTestTreeNode(){return zx(this.indexTree.getRoot())}toSortedJSON(){return this.toJSON()}deepcopy(){const e=this.getRoot(),r=new vn(e.deepcopy(),this.getCreatedAt());return r.setRemovedAt(this.getRemovedAt()),r.setMovedAt(this.getMovedAt()),r}toPath(e,r){const a=this.toTreePos(e,r);return a?this.indexTree.treePosToPath(a):[]}toIndex(e,r,a=!1){const l=this.toTreePos(e,r,a);return l?this.indexTree.indexOf(l,a):-1}indexToPath(e){return this.indexTree.indexToPath(e)}pathToIndex(e){return this.indexTree.pathToIndex(e)}indexRangeToPosRange(e){const r=this.findPos(e[0]);return e[0]===e[1]?[r,r]:[r,this.findPos(e[1])]}indexRangeToPosStructRange(e){const[r,a]=e,l=this.findPos(r);return r===a?[l.toStruct(),l.toStruct()]:[l.toStruct(),this.findPos(a).toStruct()]}posRangeToPathRange(e){const[[r,a]]=this.findNodesAndSplitText(e[0]),[[l,c]]=this.findNodesAndSplitText(e[1]);return[this.toPath(r,a),this.toPath(l,c)]}posRangeToIndexRange(e){const[[r,a]]=this.findNodesAndSplitText(e[0]),[[l,c]]=this.findNodesAndSplitText(e[1]);return[this.toIndex(r,a),this.toIndex(l,c)]}traverseInPosRange(e,r,a,l,c,d=!1){const h=this.toIndex(e,r,d),g=this.toIndex(a,l,d);this.indexTree.tokensBetween(h,g,c,d)}toTreePos(e,r,a=!1){if(!e||!r)return;if(!a&&e.isRemoved){let c;for(;e.isRemoved;)c=e,e=c.parent;const d=e.findOffset(c,a);return{node:e,offset:d}}if(e===r)return{node:e,offset:0};let l=e.findOffset(r,a);if(a||!r.isRemoved){if(r.isText)return{node:r,offset:r.paddedSize(a)};l++}return{node:e,offset:l}}makeDeletionChanges(e,r){const a=[],l=[];let c=null,d=null;for(let h=0;h<e.length;h++){const g=e[h],p=e[h+1];c||(c=g),d=g;const w=this.findRightToken(g);(!w||!p||w[0]!==p[0]||w[1]!==p[1])&&(l.push([c,d]),c=null,d=null)}for(const h of l){const[g,p]=h,[w,v]=this.findLeftToken(g),[S,A]=p,T=v===we.Start?w:w.parent,k=A===we.Start?S:S.parent,D=this.toIndex(T,w),L=this.toIndex(k,S);D<L&&(a.length>0&&D===a[a.length-1].to?(a[a.length-1].to=L,a[a.length-1].toPath=this.toPath(k,S)):a.push({type:"content",from:D,to:L,fromPath:this.toPath(T,w),toPath:this.toPath(k,S),actor:r.getActorID()}))}return a.reverse()}findRightToken([e,r]){if(r===we.Start){const h=e.allChildren;return h.length>0?[h[0],h[0].isText?we.Text:we.Start]:[e,we.End]}const a=e.parent,l=a.allChildren,c=l.indexOf(e);if(a&&c===l.length-1)return[a,we.End];const d=l[c+1];return[d,d.isText?we.Text:we.Start]}findLeftToken([e,r]){if(r===we.End){const h=e.allChildren;if(h.length>0){const g=h[h.length-1];return[g,g.isText?we.Text:we.End]}return[e,we.Start]}const a=e.parent,l=a.allChildren,c=l.indexOf(e);if(a&&c===0)return[a,we.Start];const d=l[c-1];return[d,d.isText?we.Text:we.End]}}class Nc extends sr{constructor(e,r,a,l,c,d){super(e,d);y(this,"fromPos");y(this,"toPos");y(this,"contents");y(this,"splitLevel");this.fromPos=r,this.toPos=a,this.contents=l,this.splitLevel=c}static create(e,r,a,l,c,d){return new Nc(e,r,a,l,c,d)}execute(e,r,a){var w;const l=e.findByCreatedAt(this.getParentCreatedAt());if(!l)throw new H(q.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(l instanceof vn))throw new H(q.ErrInvalidArgument,"fail to execute, only Tree can execute edit");const c=this.getExecutedAt(),d=l,[h,g,p]=d.edit([this.fromPos,this.toPos],(w=this.contents)==null?void 0:w.map(v=>v.deepcopy()),this.splitLevel,c,(()=>{let v=c.getDelimiter();return this.contents!==void 0&&(v+=this.contents.length),()=>$n.of(c.getLamport(),++v,c.getActorID())})(),a);e.acc(p);for(const v of g)e.registerGCPair(v);return{opInfos:h.map(({from:v,to:S,value:A,splitLevel:T,fromPath:k,toPath:D})=>({type:"tree-edit",path:e.createPath(this.getParentCreatedAt()),from:v,to:S,value:A,splitLevel:T,fromPath:k,toPath:D}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),r=`${this.fromPos.getLeftSiblingID().getCreatedAt().toTestString()}/${this.fromPos.getLeftSiblingID().getOffset()}`,a=`${this.toPos.getLeftSiblingID().getCreatedAt().toTestString()}/${this.toPos.getLeftSiblingID().getOffset()}`,l=this.contents||[];return`${e}.EDIT(${r},${a},${l.map(c=>Dp(c)).join("")})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getContents(){return this.contents}getSplitLevel(){return this.splitLevel}}class ll{constructor(t){y(this,"vector");this.vector=t||new Map}set(t,e){this.vector.set(t,e)}unset(t){this.vector.delete(t)}get(t){return this.vector.get(t)}has(t){return this.vector.has(t)}maxLamport(){let t=BigInt(0);for(const[,e]of this)e>t&&(t=e);return t}max(t){const e=new Map;for(const[r,a]of t){const l=this.vector.get(r),c=l&&l>a?l:a;e.set(r,c)}for(const[r,a]of this){const l=t.get(r),c=l&&l>a?l:a;e.set(r,c)}return new ll(e)}afterOrEqual(t){const e=this.vector.get(t.getActorID());return e===void 0?!1:e>=t.getLamport()}deepcopy(){const t=new Map;for(const[e,r]of this.vector)t.set(e,r);return new ll(t)}filter(t){const e=new Map;for(const[r]of t){const a=this.vector.get(r);a!==void 0&&e.set(r,a)}return new ll(e)}size(){return this.vector.size}*[Symbol.iterator](){for(const[t,e]of this.vector)yield[t,e]}}const Lx=new ll(new Map);class Zn{constructor(t,e,r,a,l){y(this,"clientSeq");y(this,"serverSeq");y(this,"actor");y(this,"lamport");y(this,"versionVector");this.clientSeq=t,this.serverSeq=l,this.lamport=e,this.versionVector=a,this.actor=r}hasClocks(){return this.versionVector.size()>0&&this.lamport!=ip}static of(t,e,r,a,l){return new Zn(t,e,r,a,l)}next(t=!1){if(t)return new Zn(this.clientSeq+1,this.lamport,this.actor,Lx,ip);const e=this.versionVector.deepcopy();return e.set(this.actor,this.lamport+1n),new Zn(this.clientSeq+1,this.lamport+1n,this.actor,e)}syncClocks(t){if(!t.hasClocks())return this;const e=t.lamport>this.lamport?t.lamport+1n:this.lamport+1n,r=this.versionVector.max(t.versionVector),a=new Zn(this.clientSeq,e,this.actor,r);return a.versionVector.set(this.actor,e),a}setClocks(t,e){const r=t>this.lamport?t+1n:this.lamport+1n,a=this.versionVector.max(e);return a.set(this.actor,r),Zn.of(this.clientSeq,r,this.actor,a)}createTimeTicket(t){return $n.of(this.lamport,t,this.actor)}setActor(t){return new Zn(this.clientSeq,this.lamport,t,this.versionVector,this.serverSeq)}setLamport(t){return new Zn(this.clientSeq,t,this.actor,this.versionVector,this.serverSeq)}setVersionVector(t){return new Zn(this.clientSeq,this.lamport,this.actor,t,this.serverSeq)}getClientSeq(){return this.clientSeq}getServerSeq(){return this.serverSeq?this.serverSeq.toString():""}getLamport(){return this.lamport}getLamportAsString(){return this.lamport.toString()}getActorID(){return this.actor}getVersionVector(){return this.versionVector}toTestString(){return`${this.lamport.toString()}:${this.actor.slice(-2)}:${this.clientSeq}`}}const $k=new Zn(0,0n,kp,Lx);class xl{constructor({id:t,operations:e,presenceChange:r,message:a}){y(this,"id");y(this,"operations");y(this,"presenceChange");y(this,"message");this.id=t,this.operations=e||[],this.presenceChange=r,this.message=a}static create({id:t,operations:e,presenceChange:r,message:a}){return new xl({id:t,operations:e,presenceChange:r,message:a})}getID(){return this.id}getMessage(){return this.message}hasOperations(){return this.operations.length>0}getOperations(){return this.operations}setActor(t){for(const e of this.operations)e.setActor(t);this.id=this.id.setActor(t)}hasPresenceChange(){return this.presenceChange!==void 0}getPresenceChange(){return this.presenceChange}execute(t,e,r){const a=[],l=[];for(const c of this.operations){const d=c.execute(t,r,this.id.getVersionVector());if(!d)continue;const{opInfos:h,reverseOp:g}=d;a.push(...h),g&&l.unshift(g)}return this.presenceChange&&(this.presenceChange.type===kr.Put?e.set(this.id.getActorID(),Xn(this.presenceChange.presence)):e.delete(this.id.getActorID())),{opInfos:a,reverseOps:l}}toTestString(){return`${this.operations.map(t=>t.toTestString()).join(",")}`}toStruct(){return{changeID:oe.bytesToHex(oe.toChangeID(this.getID()).toBinary()),message:this.getMessage(),operations:this.getOperations().map(t=>oe.bytesToHex(oe.toOperation(t).toBinary())),presenceChange:this.getPresenceChange()}}static fromStruct(t){const{changeID:e,operations:r,presenceChange:a,message:l}=t;return xl.create({id:oe.bytesToChangeID(oe.hexToBytes(e)),operations:r==null?void 0:r.map(c=>oe.bytesToOperation(oe.hexToBytes(c))),presenceChange:a,message:l})}}class yh{constructor(t,e,r,a,l,c){y(this,"documentKey");y(this,"checkpoint");y(this,"isRemoved");y(this,"changes");y(this,"snapshot");y(this,"versionVector");this.documentKey=t,this.checkpoint=e,this.isRemoved=r,this.changes=a,this.snapshot=c,this.versionVector=l}static create(t,e,r,a,l,c){return new yh(t,e,r,a,l,c)}getDocumentKey(){return this.documentKey}getCheckpoint(){return this.checkpoint}getIsRemoved(){return this.isRemoved}getChanges(){return this.changes}hasChanges(){return this.changes.length>0}getChangeSize(){return this.changes.length}hasSnapshot(){return!!this.snapshot&&!!this.snapshot.length}getSnapshot(){return this.snapshot}getVersionVector(){return this.versionVector}}class ul{constructor(t,e){y(this,"serverSeq");y(this,"clientSeq");this.serverSeq=t,this.clientSeq=e}static of(t,e){return new ul(t,e)}increaseClientSeq(t){return t===0?this:new ul(this.serverSeq,this.clientSeq+t)}forward(t){if(this.equals(t))return this;const e=this.serverSeq>t.serverSeq?this.serverSeq:t.serverSeq,r=Math.max(this.clientSeq,t.clientSeq);return ul.of(e,r)}getServerSeqAsString(){return this.serverSeq.toString()}getClientSeq(){return this.clientSeq}getServerSeq(){return this.serverSeq}equals(t){return this.clientSeq===t.clientSeq&&this.serverSeq==t.serverSeq}toTestString(){return`serverSeq=${this.serverSeq}, clientSeq=${this.clientSeq}`}}const Hk=new ul(0n,0);class Er{constructor(t,e){y(this,"createdAt");y(this,"offset");this.createdAt=t,this.offset=e}static of(t,e){return new Er(t,e)}static fromStruct(t){return Er.of($n.fromStruct(t.createdAt),t.offset)}getCreatedAt(){return this.createdAt}getOffset(){return this.offset}equals(t){return this.createdAt.compare(t.createdAt)===0&&this.offset===t.offset}hasSameCreatedAt(t){return this.createdAt.compare(t.createdAt)===0}split(t){return new Er(this.createdAt,this.offset+t)}toStruct(){return{createdAt:this.createdAt.toStruct(),offset:this.offset}}toTestString(){return`${this.createdAt.toTestString()}:${this.offset}`}toIDString(){return`${this.createdAt.toIDString()}:${this.offset}`}}const Vk=Er.of(vl,0);class ir{constructor(t,e){y(this,"id");y(this,"relativeOffset");this.id=t,this.relativeOffset=e}static of(t,e){return new ir(t,e)}static fromStruct(t){const e=Er.fromStruct(t.id);return ir.of(e,t.relativeOffset)}getID(){return this.id}getRelativeOffset(){return this.relativeOffset}getAbsoluteID(){return Er.of(this.id.getCreatedAt(),this.id.getOffset()+this.relativeOffset)}toTestString(){return`${this.id.toTestString()}:${this.relativeOffset}`}toStruct(){return{id:this.id.toStruct(),relativeOffset:this.relativeOffset}}equals(t){return this.id.equals(t.id)?this.relativeOffset===t.relativeOffset:!1}}class ba extends Ex{constructor(e,r,a){super(r);y(this,"id");y(this,"removedAt");y(this,"prev");y(this,"next");y(this,"insPrev");y(this,"insNext");this.id=e,this.removedAt=a}static create(e,r){return new ba(e,r)}static createComparator(){return(e,r)=>{const a=e.getCreatedAt().compare(r.getCreatedAt());return a!==0?a:e.getOffset()>r.getOffset()?1:e.getOffset()<r.getOffset()?-1:0}}getID(){return this.id}getCreatedAt(){return this.id.getCreatedAt()}getLength(){return this.removedAt?0:this.getContentLength()}getContentLength(){return this.value&&this.value.length||0}getPrev(){return this.prev}getNext(){return this.next}getInsPrev(){return this.insPrev}getInsNext(){return this.insNext}getInsPrevID(){return this.insPrev.getID()}setPrev(e){this.prev=e,e&&(e.next=this)}setNext(e){this.next=e,e&&(e.prev=this)}setInsPrev(e){this.insPrev=e,e&&(e.insNext=this)}setInsNext(e){this.insNext=e,e&&(e.insPrev=this)}hasNext(){return!!this.next}hasInsPrev(){return!!this.insPrev}isRemoved(){return!!this.removedAt}getRemovedAt(){return this.removedAt}split(e){return new ba(this.id.split(e),this.splitValue(e),this.removedAt)}canRemove(e,r,a){return r?!!(!this.removedAt||!a&&(e!=null&&e.after(this.removedAt))):!1}canStyle(e,r){return this.getCreatedAt().getLamport()<=r&&(!this.removedAt||e.after(this.removedAt))}setRemovedAt(e){this.removedAt=e}remove(e){if(!this.removedAt){this.removedAt=e;return}e.after(this.removedAt)&&(this.removedAt=e)}createPosRange(){return[ir.of(this.id,0),ir.of(this.id,this.getLength())]}getDataSize(){const e=this.value.getDataSize();return this.id&&(e.meta+=Tr),this.removedAt&&(e.meta+=Tr),e}deepcopy(){return new ba(this.id,this.value,this.removedAt)}toTestString(){return`${this.id.toTestString()} ${this.value?this.value:""}`}splitValue(e){const r=this.value;return this.value=r.substring(0,e),r.substring(e,r.length)}toIDString(){return this.id.toIDString()}}class Tl{constructor(){y(this,"head");y(this,"treeByIndex");y(this,"treeByID");this.head=ba.create(Vk),this.treeByIndex=new lc,this.treeByID=new Bx(ba.createComparator()),this.treeByIndex.insert(this.head),this.treeByID.put(this.head.getID(),this.head)}static create(){return new Tl}edit(t,e,r,a){const l={data:0,meta:0},[c,d,h]=this.findNodeWithSplit(t[1],e),[g,p,w]=this.findNodeWithSplit(t[0],e);Pe(l,d,p);const v=this.findBetween(w,h),[S,A]=this.deleteNodes(v,e,a),T=h?h.getID():c.getID();let k=ir.of(T,0);if(r){const L=this.posToIndex(g.createPosRange()[1],!0),N=this.insertAfter(g,ba.create(Er.of(e,0),r));Pe(l,N.getDataSize()),S.length&&S[S.length-1].from===L?S[S.length-1].value=r:S.push({actor:e.getActorID(),from:L,to:L,value:r}),k=ir.of(N.getID(),N.getContentLength())}const D=[];for(const[,L]of A)D.push({parent:this,child:L});return[k,D,l,S]}indexToPos(t){const[e,r]=this.treeByIndex.find(t),a=e;return ir.of(a.getID(),r)}findIndexesFromRange(t){const[e,r]=t;return[this.posToIndex(e,!1),this.posToIndex(r,!0)]}posToIndex(t,e){const r=t.getAbsoluteID(),a=e?this.findFloorNodePreferToLeft(r):this.findFloorNode(r);if(!a)throw new H(q.ErrInvalidArgument,`the node of the given id should be found: ${r.toTestString()}`);const l=this.treeByIndex.indexOf(a),c=a.isRemoved()?0:r.getOffset()-a.getID().getOffset();return l+c}findNode(t){return this.findFloorNode(t)}get length(){return this.treeByIndex.length}getTreeByIndex(){return this.treeByIndex}getTreeByID(){return this.treeByID}toString(){const t=[];for(const e of this)e.isRemoved()||t.push(e.getValue());return t.join("")}*[Symbol.iterator](){let t=this.head.getNext();for(;t;)yield t,t=t.getNext()}getHead(){return this.head}deepcopy(){const t=new Tl;let e=this.head.getNext(),r=t.head,a;for(;e;){if(a=t.insertAfter(r,e.deepcopy()),e.hasInsPrev()){const l=t.findNode(e.getInsPrevID());a.setInsPrev(l)}r=a,e=e.getNext()}return t}toTestString(){const t=[];let e=this.head;for(;e;)e.isRemoved()?t.push(`{${e.toTestString()}}`):t.push(`[${e.toTestString()}]`),e=e.getNext();return t.join("")}insertAfter(t,e){const r=t.getNext();return e.setPrev(t),r&&r.setPrev(e),this.treeByID.put(e.getID(),e),this.treeByIndex.insertAfter(t,e),e}findNodeWithSplit(t,e){const r=t.getAbsoluteID();let a=this.findFloorNodePreferToLeft(r);const l=r.getOffset()-a.getID().getOffset(),[,c]=this.splitNode(a,l);for(;a.hasNext()&&a.getNext().getCreatedAt().after(e);)a=a.getNext();return[a,c,a.getNext()]}findFloorNodePreferToLeft(t){let e=this.findFloorNode(t);if(!e)throw new H(q.ErrInvalidArgument,`the node of the given id should be found: ${t.toTestString()}`);if(t.getOffset()>0&&e.getID().getOffset()==t.getOffset()){if(!e.hasInsPrev())return e;e=e.getInsPrev()}return e}findFloorNode(t){const e=this.treeByID.floorEntry(t);if(e&&!(!e.key.equals(t)&&!e.key.hasSameCreatedAt(t)))return e.value}findBetween(t,e){const r=[];let a=t;for(;a&&a!==e;)r.push(a),a=a.getNext();return r}splitNode(t,e){const r={data:0,meta:0};if(e>t.getContentLength())throw new H(q.ErrInvalidArgument,"offset should be less than or equal to length");if(e===0)return[t,r];if(e===t.getContentLength())return[t.getNext(),r];const a=t.getDataSize(),l=t.split(e);this.treeByIndex.updateWeight(l),this.insertAfter(t,l);const c=t.getInsNext();return c&&c.setInsPrev(l),l.setInsPrev(t),Pe(r,t.getDataSize(),l.getDataSize()),Wa(r,a),[l,r]}deleteNodes(t,e,r){if(!t.length)return[[],new Map];const a=r===void 0||r.size()===0,l=[],c=[],[d,h]=this.findEdgesOfCandidates(t);c.push(d);for(const w of t){let v=!1;if(a)v=!0;else{const A=r==null?void 0:r.get(w.getCreatedAt().getActorID());A&&A>=w.getCreatedAt().getLamport()&&(v=!0)}let S=!1;if(w.getRemovedAt()){const A=r==null?void 0:r.get(w.getRemovedAt().getActorID());(a||A&&A>=w.getRemovedAt().getLamport())&&(S=!0)}w.canRemove(e,v,S)?l.push(w):c.push(w)}c.push(h);const g=this.makeChanges(c,e),p=new Map;for(const w of l)p.set(w.getID().toIDString(),w),w.remove(e);return this.deleteIndexNodes(c),[g,p]}findEdgesOfCandidates(t){return[t[0].getPrev(),t[t.length-1].getNext()]}makeChanges(t,e){const r=[];let a,l;for(let c=0;c<t.length-1;c++){const d=t[c],h=t[c+1];d.getNext()!=h&&([a]=this.findIndexesFromRange(d.getNext().createPosRange()),h?[,l]=this.findIndexesFromRange(h.getPrev().createPosRange()):l=this.treeByIndex.length,a<l&&r.push({actor:e.getActorID(),from:a,to:l}))}return r.reverse()}deleteIndexNodes(t){for(let e=0;e<t.length-1;e++){const r=t[e],a=t[e+1];r.getNext()!=a&&this.treeByIndex.deleteRange(r,a)}}purge(t){this.treeByIndex.delete(t),this.treeByID.remove(t.getID());const e=t.getPrev(),r=t.getNext(),a=t.getInsPrev(),l=t.getInsNext();e&&e.setNext(r),r&&r.setPrev(e),t.setPrev(void 0),t.setNext(void 0),a&&a.setInsNext(l),l&&l.setInsPrev(a),t.setInsPrev(void 0),t.setInsNext(void 0)}}const Rb=n=>n<0?Math.ceil(n):Math.floor(n);var Dr=(n=>(n[n.Int=0]="Int",n[n.Long=1]="Long",n))(Dr||{});class sn extends Tc{constructor(e,r,a){super(a);y(this,"valueType");y(this,"value");switch(this.valueType=e,e){case 0:typeof r=="number"?r>Math.pow(2,31)-1||r<-Math.pow(2,31)?this.value=qt.fromNumber(r).toInt():this.value=Rb(r):this.value=r.toInt();break;case 1:typeof r=="number"?this.value=qt.fromNumber(r):this.value=r;break;default:throw new H(q.ErrUnimplemented,`unimplemented type: ${e}`)}}static create(e,r,a){return new sn(e,r,a)}static valueFromBytes(e,r){switch(e){case 0:return r[0]|r[1]<<8|r[2]<<16|r[3]<<24;case 1:return qt.fromBytesLE(Array.from(r));default:throw new H(q.ErrUnimplemented,`unimplemented type: ${e}`)}}getDataSize(){return{data:this.valueType===0?4:8,meta:this.getMetaUsage()}}toJSON(){return`${this.value}`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:this.value,type:"YORKIE_COUNTER"}}deepcopy(){const e=sn.create(this.valueType,this.value,this.getCreatedAt());return e.setRemovedAt(this.getRemovedAt()),e.setMovedAt(this.getMovedAt()),e}getType(){return this.valueType}static getCounterType(e){switch(typeof e){case"object":return e instanceof qt?1:void 0;case"number":return e>Math.pow(2,31)-1||e<-Math.pow(2,31)?1:0;default:return}}static isSupport(e){return!!sn.getCounterType(e)}static isInteger(e){return e%1===0}isNumericType(){const e=this.valueType;return e===0||e===1}getValueType(){return this.valueType}getValue(){return this.value}toBytes(){switch(this.valueType){case 0:{const e=this.value;return new Uint8Array([e&255,e>>8&255,e>>16&255,e>>24&255])}case 1:{const r=this.value.toBytesLE();return Uint8Array.from(r)}default:throw new H(q.ErrUnimplemented,`unimplemented type: ${this.valueType}`)}}increase(e){function r(a){if(!a.isNumericType())throw new TypeError(`Unsupported type of value: ${typeof a.getValue()}`)}return r(this),r(e),this.valueType===1?this.value=this.value.add(e.getValue()):e.getType()===re.Long?this.value=this.value+e.getValue().toInt():this.value=qt.fromNumber(this.value+Rb(e.getValue())).toInt(),this}}class Al extends sr{constructor(e,r,a){super(e,a);y(this,"value");this.value=r}static create(e,r,a){return new Al(e,r,a)}execute(e){const r=e.findByCreatedAt(this.getParentCreatedAt());if(!r)throw new H(q.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(r instanceof sn))throw new H(q.ErrInvalidArgument,"fail to execute, only Counter can execute increase");const a=r,l=this.value.deepcopy();return a.increase(l),{opInfos:[{type:"increase",path:e.createPath(this.getParentCreatedAt()),value:l.getValue()}],reverseOp:this.toReverseOperation()}}toReverseOperation(){const e=this.value.deepcopy(),a=e.getType()===re.Long?e.getValue().multiply(-1):e.getValue()*-1;return Al.create(this.getParentCreatedAt(),fe.of(a,e.getCreatedAt()))}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.INCREASE.${this.value.toJSON()}`}getValue(){return this.value}}class Os extends sr{constructor(e,r,a,l,c,d){super(e,d);y(this,"fromPos");y(this,"toPos");y(this,"attributes");y(this,"attributesToRemove");this.fromPos=r,this.toPos=a,this.attributes=l,this.attributesToRemove=c}static create(e,r,a,l,c){return new Os(e,r,a,l,[],c)}static createTreeRemoveStyleOperation(e,r,a,l,c){return new Os(e,r,a,new Map,l,c)}execute(e,r,a){const l=e.findByCreatedAt(this.getParentCreatedAt());if(!l)throw new H(q.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(l instanceof vn))throw new H(q.ErrInvalidArgument,"fail to execute, only Tree can execute edit");const c=l;let d,h,g={data:0,meta:0};if(this.attributes.size){const p={};[...this.attributes].forEach(([w,v])=>p[w]=v),[h,d,g]=c.style([this.fromPos,this.toPos],p,this.getExecutedAt(),a)}else{const p=this.attributesToRemove;[h,d,g]=c.removeStyle([this.fromPos,this.toPos],p,this.getExecutedAt(),a)}e.acc(g);for(const p of h)e.registerGCPair(p);return{opInfos:d.map(({from:p,to:w,value:v,fromPath:S,toPath:A})=>({type:"tree-style",from:p,to:w,value:this.attributes.size?{attributes:v}:{attributesToRemove:v},fromPath:S,toPath:A,path:e.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),r=`${this.fromPos.getLeftSiblingID().getCreatedAt().toTestString()}:${this.fromPos.getLeftSiblingID().getOffset()}`,a=`${this.toPos.getLeftSiblingID().getCreatedAt().toTestString()}:${this.toPos.getLeftSiblingID().getOffset()}`;return`${e}.STYLE(${r},${a},${Object.entries(this.attributes||{}).map(([l,c])=>`${l}:"${c}"`).join(" ")})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getAttributes(){return this.attributes}getAttributesToRemove(){return this.attributesToRemove}}class Rs extends sr{constructor(e,r,a,l){super(e,l);y(this,"createdAt");y(this,"value");this.createdAt=r,this.value=a}static create(e,r,a,l){return new Rs(e,r,a,l)}execute(e){const r=e.findByCreatedAt(this.getParentCreatedAt());if(!r)throw new H(q.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(r instanceof je))throw new H(q.ErrInvalidArgument,"fail to execute, only array can execute set");const a=r.getByID(this.createdAt).deepcopy(),l=this.toReverseOperation(this.value,a),c=this.value.deepcopy();return r.insertAfter(this.createdAt,c,this.getExecutedAt()),r.delete(this.createdAt,this.getExecutedAt()),e.registerElement(c),{opInfos:[{type:"array-set",path:e.createPath(this.getParentCreatedAt())}],reverseOp:l}}toReverseOperation(e,r){return Rs.create(this.getParentCreatedAt(),e.getCreatedAt(),r)}getEffectedCreatedAt(){return this.createdAt}toTestString(){return`${this.getParentCreatedAt().toTestString()}.ARRAY_SET.${this.createdAt.toTestString()}=${this.value.toSortedJSON()}`}getCreatedAt(){return this.createdAt}getValue(){return this.value}setCreatedAt(e){this.createdAt=e}}function jk(n){const t=new pl,e=t.data;for(const[r,a]of Object.entries(n))e[r]=JSON.stringify(a);return t}function Kk(n){if(n.type===kr.Put)return new oc({type:io.PUT,presence:jk(n.presence)});if(n.type===kr.Clear)return new oc({type:io.CLEAR});throw new H(q.ErrUnimplemented,"unimplemented type")}function Yk(n){return new Tx({serverSeq:n.getServerSeq(),clientSeq:n.getClientSeq()})}function Ux(n){return new dh({clientSeq:n.getClientSeq(),lamport:n.getLamport(),actorId:vh(n.getActorID()),versionVector:Ip(n.getVersionVector())})}function Tt(n){if(n)return new St({lamport:n.getLamport(),delimiter:n.getDelimiter(),actorId:vh(n.getActorID())})}function Ip(n){if(!n)return;const t=new hh;for(const[e,r]of n){const a=IC(vh(e));t.vector[a]=BigInt(r.toString())}return t}function _x(n){switch(n){case re.Null:return Mt.NULL;case re.Boolean:return Mt.BOOLEAN;case re.Integer:return Mt.INTEGER;case re.Long:return Mt.LONG;case re.Double:return Mt.DOUBLE;case re.String:return Mt.STRING;case re.Bytes:return Mt.BYTES;case re.Date:return Mt.DATE;default:throw new H(q.ErrInvalidType,`unsupported type: ${n}`)}}function Px(n){switch(n){case Dr.Int:return Mt.INTEGER_CNT;case Dr.Long:return Mt.LONG_CNT;default:throw new H(q.ErrInvalidType,`unsupported type: ${n}`)}}function Qf(n){if(n instanceof Ve)return new Cn({type:Mt.JSON_OBJECT,createdAt:Tt(n.getCreatedAt()),value:Qx(n)});if(n instanceof je)return new Cn({type:Mt.JSON_ARRAY,createdAt:Tt(n.getCreatedAt()),value:NC(n)});if(n instanceof pn)return new Cn({type:Mt.TEXT,createdAt:Tt(n.getCreatedAt())});if(n instanceof fe)return new Cn({type:_x(n.getType()),createdAt:Tt(n.getCreatedAt()),value:n.toBytes()});if(n instanceof sn)return new Cn({type:Px(n.getType()),createdAt:Tt(n.getCreatedAt()),value:n.toBytes()});if(n instanceof vn)return new Cn({type:Mt.TREE,createdAt:Tt(n.getCreatedAt()),value:CC(n)});throw new H(q.ErrUnimplemented,"unimplemented element")}function Gk(n){return new sc({createdAt:Tt(n.getCreatedAt()),offset:n.getOffset()})}function Wf(n){return new so({createdAt:Tt(n.getID().getCreatedAt()),offset:n.getID().getOffset(),relativeOffset:n.getRelativeOffset()})}function td(n){return new ro({parentId:Zu(n.getParentID()),leftSiblingId:Zu(n.getLeftSiblingID())})}function Zu(n){return new wa({createdAt:Tt(n.getCreatedAt()),offset:n.getOffset()})}function qx(n){const t=new Np;if(n instanceof ao){const e=n,r=new Nd;r.parentCreatedAt=Tt(e.getParentCreatedAt()),r.key=e.getKey(),r.value=Qf(e.getValue()),r.executedAt=Tt(e.getExecutedAt()),t.body.case="set",t.body.value=r}else if(n instanceof Aa){const e=n,r=new kd;r.parentCreatedAt=Tt(e.getParentCreatedAt()),r.prevCreatedAt=Tt(e.getPrevCreatedAt()),r.value=Qf(e.getValue()),r.executedAt=Tt(e.getExecutedAt()),t.body.case="add",t.body.value=r}else if(n instanceof er){const e=n,r=new Cd;r.parentCreatedAt=Tt(e.getParentCreatedAt()),r.prevCreatedAt=Tt(e.getPrevCreatedAt()),r.createdAt=Tt(e.getCreatedAt()),r.executedAt=Tt(e.getExecutedAt()),t.body.case="move",t.body.value=r}else if(n instanceof Cr){const e=n,r=new Dd;r.parentCreatedAt=Tt(e.getParentCreatedAt()),r.createdAt=Tt(e.getCreatedAt()),r.executedAt=Tt(e.getExecutedAt()),t.body.case="remove",t.body.value=r}else if(n instanceof Ac){const e=n,r=new Id;r.parentCreatedAt=Tt(e.getParentCreatedAt()),r.from=Wf(e.getFromPos()),r.to=Wf(e.getToPos()),r.content=e.getContent();const a=r.attributes;for(const[l,c]of e.getAttributes())a[l]=c;r.executedAt=Tt(e.getExecutedAt()),t.body.case="edit",t.body.value=r}else if(n instanceof Ec){const e=n,r=new Od;r.parentCreatedAt=Tt(e.getParentCreatedAt()),r.from=Wf(e.getFromPos()),r.to=Wf(e.getToPos());const a=r.attributes;for(const[l,c]of e.getAttributes())a[l]=c;r.executedAt=Tt(e.getExecutedAt()),t.body.case="style",t.body.value=r}else if(n instanceof Al){const e=n,r=new Md;r.parentCreatedAt=Tt(e.getParentCreatedAt()),r.value=Qf(e.getValue()),r.executedAt=Tt(e.getExecutedAt()),t.body.case="increase",t.body.value=r}else if(n instanceof Nc){const e=n,r=new Rd;r.parentCreatedAt=Tt(e.getParentCreatedAt()),r.from=td(e.getFromPos()),r.to=td(e.getToPos()),r.contents=eC(e.getContents()),r.splitLevel=e.getSplitLevel(),r.executedAt=Tt(e.getExecutedAt()),t.body.case="treeEdit",t.body.value=r}else if(n instanceof Os){const e=n,r=new Bd;r.parentCreatedAt=Tt(e.getParentCreatedAt()),r.from=td(e.getFromPos()),r.to=td(e.getToPos());const a=e.getAttributesToRemove();if(a.length>0)r.attributesToRemove=a;else{const l=r.attributes;for(const[c,d]of e.getAttributes())l[c]=d}r.executedAt=Tt(e.getExecutedAt()),t.body.case="treeStyle",t.body.value=r}else if(n instanceof Rs){const e=n,r=new zd;r.parentCreatedAt=Tt(e.getParentCreatedAt()),r.createdAt=Tt(e.getCreatedAt()),r.value=Qf(e.getValue()),r.executedAt=Tt(e.getExecutedAt()),t.body.case="arraySet",t.body.value=r}else throw new H(q.ErrUnimplemented,"unimplemented operation");return t}function Fk(n){const t=[];for(const e of n)t.push(qx(e));return t}function Xk(n){const t=new bx({id:Ux(n.getID()),message:n.getMessage()});return n.hasOperations()&&(t.operations=Fk(n.getOperations())),n.hasPresenceChange()&&(t.presenceChange=Kk(n.getPresenceChange())),t}function Zk(n){const t=[];for(const e of n)t.push(Xk(e));return t}function Qk(n){const t=[];for(const e of n)t.push(new xx({key:e.getStrKey(),element:Mp(e.getValue())}));return t}function Wk(n){const t=[];for(const e of n)t.push(new $d({element:Mp(e.getValue())}));return t}function tC(n){const t=[];for(const e of n){const r=new Hd;r.id=Gk(e.getID()),r.value=e.getValue().getContent(),r.removedAt=Tt(e.getRemovedAt());const a=r.attributes,l=e.getValue().getAttrs();for(const c of l){const d=new yl;d.value=c.getValue(),d.updatedAt=Tt(c.getUpdatedAt()),a[c.getKey()]=d}t.push(r)}return t}function eC(n){const t=[];if(!n||!n.length)return t;for(const e of n)t.push(new Vd({content:Op(e)}));return t}function nC(n){const t={};for(const e of n)t[e.getKey()]=new yl({value:e.getValue(),updatedAt:Tt(e.getUpdatedAt()),isRemoved:e.isRemoved()});return t}function Op(n){if(!n)return[];const t=[];return mh(n,(e,r)=>{const a=new ac({id:Zu(e.id),type:e.type,removedAt:Tt(e.removedAt),depth:r});e.isText&&(a.value=e.value),e.insPrevID&&(a.insPrevId=Zu(e.insPrevID)),e.insNextID&&(a.insNextId=Zu(e.insNextID)),e.attrs&&(a.attributes=nC(e.attrs)),t.push(a)}),t}function rC(n){const t=new an;return t.body.case="jsonObject",t.body.value=new Ld({nodes:Qk(n.getRHT()),createdAt:Tt(n.getCreatedAt()),movedAt:Tt(n.getMovedAt()),removedAt:Tt(n.getRemovedAt())}),t}function Jx(n){const t=new an;return t.body.case="jsonArray",t.body.value=new Ud({nodes:Wk(n.getElements()),createdAt:Tt(n.getCreatedAt()),movedAt:Tt(n.getMovedAt()),removedAt:Tt(n.getRemovedAt())}),t}function iC(n){const t=new an;return t.body.case="primitive",t.body.value=new _d({type:_x(n.getType()),value:n.toBytes(),createdAt:Tt(n.getCreatedAt()),movedAt:Tt(n.getMovedAt()),removedAt:Tt(n.getRemovedAt())}),t}function sC(n){const t=new an;return t.body.case="text",t.body.value=new Pd({nodes:tC(n.getRGATreeSplit()),createdAt:Tt(n.getCreatedAt()),movedAt:Tt(n.getMovedAt()),removedAt:Tt(n.getRemovedAt())}),t}function aC(n){const t=new an;return t.body.case="counter",t.body.value=new qd({type:Px(n.getType()),value:n.toBytes(),createdAt:Tt(n.getCreatedAt()),movedAt:Tt(n.getMovedAt()),removedAt:Tt(n.getRemovedAt())}),t}function $x(n){const t=new an;return t.body.case="tree",t.body.value=new Jd({nodes:Op(n.getRoot()),createdAt:Tt(n.getCreatedAt()),movedAt:Tt(n.getMovedAt()),removedAt:Tt(n.getRemovedAt())}),t}function Mp(n){if(n instanceof Ve)return rC(n);if(n instanceof je)return Jx(n);if(n instanceof fe)return iC(n);if(n instanceof pn)return sC(n);if(n instanceof sn)return aC(n);if(n instanceof vn)return $x(n);throw new H(q.ErrUnimplemented,"unimplemented element")}function oC(n){return new zs({documentKey:n.getDocumentKey(),checkpoint:Yk(n.getCheckpoint()),isRemoved:n.getIsRemoved(),changes:Zk(n.getChanges()),snapshot:n.getSnapshot(),versionVector:Ip(n.getVersionVector())})}function lC(n){var t;return{id:n.id,label:n.label,description:n.description,snapshot:n.snapshot,createdAt:((t=n.createdAt)==null?void 0:t.toDate())||new Date}}function Vu(n){if(!(n instanceof ee))return{};const t=n.findDetails(Ek);for(const e of t)return e.metadata;return{}}function nl(n){return Vu(n).code??""}function ey(n,t){return n instanceof ee&&nl(n)===t}function Hx(n){return Zn.of(n.clientSeq,BigInt(n.lamport),Up(n.actorId),Rp(n.versionVector),BigInt(n.serverSeq))}function Rp(n){if(!n)return;const t=new ll;return Object.entries(n.vector).forEach(([e,r])=>{const a=ph(DC(e));t.set(a,BigInt(r.toString()))}),t}function At(n){if(n)return $n.of(BigInt(n.lamport),n.delimiter,Up(n.actorId))}function Bp(n){const t={};return Object.entries(n.data).forEach(([e,r])=>{t[e]=JSON.parse(r)}),t}function uC(n){const t=n.type;if(t===io.PUT){const e=Bp(n.presence);return{type:kr.Put,presence:e}}if(t===io.CLEAR)return{type:kr.Clear};throw new H(q.ErrInvalidType,`unsupported type: ${t}`)}function cC(n){const t=new Map;return Object.entries(n).forEach(([e,r])=>{t.set(e,Bp(r))}),t}function Vx(n){switch(n){case Mt.NULL:return re.Null;case Mt.BOOLEAN:return re.Boolean;case Mt.INTEGER:return re.Integer;case Mt.LONG:return re.Long;case Mt.DOUBLE:return re.Double;case Mt.STRING:return re.String;case Mt.BYTES:return re.Bytes;case Mt.DATE:return re.Date}throw new H(q.ErrUnimplemented,`unimplemented value type: ${n}`)}function Zd(n){switch(n){case Mt.INTEGER_CNT:return Dr.Int;case Mt.LONG_CNT:return Dr.Long}throw new H(q.ErrUnimplemented,`unimplemented value type: ${n}`)}function ed(n){switch(n.type){case Mt.JSON_OBJECT:return n.value?Zx(n.value):Ve.create(At(n.createdAt));case Mt.JSON_ARRAY:return n.value?EC(n.value):je.create(At(n.createdAt));case Mt.TEXT:return pn.create(Tl.create(),At(n.createdAt));case Mt.TREE:return kC(n.value);case Mt.NULL:case Mt.BOOLEAN:case Mt.INTEGER:case Mt.LONG:case Mt.DOUBLE:case Mt.STRING:case Mt.BYTES:case Mt.DATE:return fe.of(fe.valueFromBytes(Vx(n.type),n.value),At(n.createdAt));case Mt.INTEGER_CNT:case Mt.LONG_CNT:return sn.create(Zd(n.type),sn.valueFromBytes(Zd(n.type),n.value),At(n.createdAt))}}function nd(n){return ir.of(Er.of(At(n.createdAt),n.offset),n.relativeOffset)}function jx(n){return Er.of(At(n.createdAt),n.offset)}function fC(n){const t=cc.create(n.value);Object.entries(n.attributes).forEach(([r,a])=>{t.setAttr(r,a.value,At(a.updatedAt))});const e=ba.create(jx(n.id),t);return e.setRemovedAt(At(n.removedAt)),e}function Wo(n){return nr.of(Qu(n.parentId),Qu(n.leftSiblingId))}function Qu(n){return qe.of(At(n.createdAt),n.offset)}function dC(n){if(!n.length)return;const t=[];return n.forEach(e=>{const r=zp(e.content);t.push(r)}),t}function zp(n){if(n.length===0)return;const t=[];for(const a of n)t.push(gC(a));const e=t[t.length-1],r=new Map;r.set(n[t.length-1].depth,t[t.length-1]);for(let a=t.length-2;a>=0;a--)r.get(n[a].depth-1).prepend(t[a]),r.set(n[a].depth,t[a]);return e.updateDescendantsSize(),e.updateDescendantsSize(!0),vn.create(e,vl).getRoot()}function hC(n){const t=Ms.create();for(const[e,r]of Object.entries(n))t.setInternal(e,r.value,At(r.updatedAt),r.isRemoved);return t}function gC(n){const t=Qu(n.id),e=yn.create(t,n.type),r=Object.entries(n.attributes);return e.isText?e.value=n.value:r.length&&(e.attrs=hC(n.attributes)),n.insPrevId&&(e.insPrevID=Qu(n.insPrevId)),n.insNextId&&(e.insNextID=Qu(n.insNextId)),e.removedAt=At(n.removedAt),e}function Kx(n){if(n.body.case==="set"){const t=n.body.value;return ao.create(t.key,ed(t.value),At(t.parentCreatedAt),At(t.executedAt))}else if(n.body.case==="add"){const t=n.body.value;return Aa.create(At(t.parentCreatedAt),At(t.prevCreatedAt),ed(t.value),At(t.executedAt))}else if(n.body.case==="move"){const t=n.body.value;return er.create(At(t.parentCreatedAt),At(t.prevCreatedAt),At(t.createdAt),At(t.executedAt))}else if(n.body.case==="remove"){const t=n.body.value;return Cr.create(At(t.parentCreatedAt),At(t.createdAt),At(t.executedAt))}else if(n.body.case==="edit"){const t=n.body.value,e=new Map;return Object.entries(t.attributes).forEach(([r,a])=>{e.set(r,a)}),Ac.create(At(t.parentCreatedAt),nd(t.from),nd(t.to),t.content,e,At(t.executedAt))}else if(n.body.case==="style"){const t=n.body.value,e=new Map;return Object.entries(t.attributes).forEach(([r,a])=>{e.set(r,a)}),Ec.create(At(t.parentCreatedAt),nd(t.from),nd(t.to),e,At(t.executedAt))}else if(n.body.case==="increase"){const t=n.body.value;return Al.create(At(t.parentCreatedAt),ed(t.value),At(t.executedAt))}else if(n.body.case==="treeEdit"){const t=n.body.value;return Nc.create(At(t.parentCreatedAt),Wo(t.from),Wo(t.to),dC(t.contents),t.splitLevel,At(t.executedAt))}else if(n.body.case==="treeStyle"){const t=n.body.value,e=new Map,r=t.attributesToRemove;return(r==null?void 0:r.length)>0?Os.createTreeRemoveStyleOperation(At(t.parentCreatedAt),Wo(t.from),Wo(t.to),r,At(t.executedAt)):(Object.entries(t.attributes).forEach(([a,l])=>{e.set(a,l)}),Os.create(At(t.parentCreatedAt),Wo(t.from),Wo(t.to),e,At(t.executedAt)))}else if(n.body.case==="arraySet"){const t=n.body.value;return Rs.create(At(t.parentCreatedAt),At(t.createdAt),ed(t.value),At(t.executedAt))}else throw new H(q.ErrUnimplemented,"unimplemented operation")}function mC(n){const t=[];for(const e of n){const r=Kx(e);r&&t.push(r)}return t}function Yx(n){const t=[];for(const e of n)t.push(xl.create({id:Hx(e.id),operations:mC(e.operations),presenceChange:e.presenceChange?uC(e.presenceChange):void 0,message:e.message}));return t}function yC(n){return ul.of(BigInt(n.serverSeq),n.clientSeq)}function pC(n){return yh.create(n.documentKey,yC(n.checkpoint),n.isRemoved,Yx(n.changes),Rp(n.versionVector),n.snapshot)}function Gx(n){const t=new wl;for(const r of n.nodes){const a=Lp(r.element);t.set(r.key,a,a.getPositionedAt())}const e=new Ve(At(n.createdAt),t);return e.setMovedAt(At(n.movedAt)),e.setRemovedAt(At(n.removedAt)),e}function Fx(n){const t=new uc;for(const r of n.nodes)t.insert(Lp(r.element));const e=new je(At(n.createdAt),t);return e.setMovedAt(At(n.movedAt)),e.setRemovedAt(At(n.removedAt)),e}function vC(n){const t=fe.of(fe.valueFromBytes(Vx(n.type),n.value),At(n.createdAt));return t.setMovedAt(At(n.movedAt)),t.setRemovedAt(At(n.removedAt)),t}function wC(n){const t=new Tl;let e=t.getHead();for(const a of n.nodes){const l=t.insertAfter(e,fC(a));a.insPrevId&&l.setInsPrev(t.findNode(jx(a.insPrevId))),e=l}const r=new pn(t,At(n.createdAt));return r.setMovedAt(At(n.movedAt)),r.setRemovedAt(At(n.removedAt)),r}function SC(n){const t=sn.create(Zd(n.type),sn.valueFromBytes(Zd(n.type),n.value),At(n.createdAt));return t.setMovedAt(At(n.movedAt)),t.setRemovedAt(At(n.removedAt)),t}function Xx(n){const t=zp(n.nodes);return vn.create(t,At(n.createdAt))}function Lp(n){if(n.body.case==="jsonObject")return Gx(n.body.value);if(n.body.case==="jsonArray")return Fx(n.body.value);if(n.body.case==="primitive")return vC(n.body.value);if(n.body.case==="text")return wC(n.body.value);if(n.body.case==="counter")return SC(n.body.value);if(n.body.case==="tree")return Xx(n.body.value);throw new H(q.ErrUnimplemented,"unimplemented element")}function bC(n){return n.map(t=>({path:t.path,type:t.type}))}function xC(n){if(!n)return{root:Ve.create(vl),presences:new Map};const t=vy.fromBinary(n);return{root:Lp(t.root),presences:cC(t.presences)}}function TC(n){const t=Ip(n);return ph(t.toBinary())}function AC(n){const t=_p(n),e=hh.fromBinary(t);return Rp(e)}function Zx(n){if(!n)throw new H(q.ErrInvalidArgument,"bytes is empty");const t=an.fromBinary(n);return Gx(t.body.value)}function Qx(n){return Mp(n).toBinary()}function EC(n){if(!n)throw new H(q.ErrInvalidArgument,"bytes is empty");const t=an.fromBinary(n);return Fx(t.body.value)}function NC(n){return Jx(n).toBinary()}function kC(n){if(!n)throw new H(q.ErrInvalidArgument,"bytes is empty");const t=an.fromBinary(n);return Xx(t.body.value)}function CC(n){return $x(n).toBinary()}function ph(n){return n?Array.from(n).map(t=>t.toString(16).padStart(2,"0")).join(""):""}function Up(n){return ph(n)}function _p(n){return new Uint8Array(n.match(/.{1,2}/g).map(t=>parseInt(t,16)))}function DC(n){if(typeof window<"u"&&typeof window.atob=="function"){const t=window.atob(n),e=t.length,r=new Uint8Array(e);for(let a=0;a<e;a++)r[a]=t.charCodeAt(a);return r}else if(typeof globalThis<"u"&&typeof globalThis.Buffer<"u"){const t=globalThis.Buffer;return new Uint8Array(t.from(n,"base64"))}else throw new Error("No base64 decoder available")}function vh(n){return _p(n)}function IC(n){if(typeof window<"u"&&typeof window.btoa=="function"){let t="";for(let e=0;e<n.byteLength;e++)t+=String.fromCharCode(n[e]);return window.btoa(t)}else{if(typeof globalThis<"u"&&typeof globalThis.Buffer<"u")return globalThis.Buffer.from(n).toString("base64");throw new Error("No base64 encoder available")}}function OC(n){const t=dh.fromBinary(n);return Hx(t)}function MC(n){const t=Np.fromBinary(n);return Kx(t)}const oe={fromPresence:Bp,toChangePack:oC,fromChangePack:pC,fromChanges:Yx,toTreeNodes:Op,fromTreeNodes:zp,objectToBytes:Qx,bytesToObject:Zx,bytesToSnapshot:xC,bytesToHex:ph,hexToBytes:_p,toHexString:Up,toUint8Array:vh,toOperation:qx,toChangeID:Ux,PbChangeID:dh,bytesToChangeID:OC,bytesToOperation:MC,versionVectorToHex:TC,hexToVersionVector:AC,fromSchemaRules:bC,toRevisionSummary:lC};var en=(n=>(n[n.Trivial=0]="Trivial",n[n.Debug=1]="Debug",n[n.Info=2]="Info",n[n.Warn=3]="Warn",n[n.Error=4]="Error",n[n.Fatal=5]="Fatal",n))(en||{});let Fa=3;function RC(n){Fa=n}const pt={trivial:(...n)=>{Fa>0||typeof console<"u"&&console.log("YORKIE T:",...n)},debug:(...n)=>{Fa>1||typeof console<"u"&&console.log("YORKIE D:",...n)},info:(...n)=>{Fa>2||typeof console<"u"&&console.log("YORKIE I:",...n)},warn:(...n)=>{Fa>3||typeof console<"u"&&(typeof console.warn<"u"?console.warn("YORKIE W:",...n):console.log("YORKIE W:",...n))},error:(...n)=>{Fa>4||typeof console<"u"&&(typeof console.error<"u"?console.error("YORKIE E:",...n):console.log("YORKIE E:",...n))},fatal:(...n)=>{typeof console<"u"&&(typeof console.error<"u"?console.error("YORKIE F:",...n):console.log("YORKIE F:",...n))},isEnabled:n=>Fa<=n};function Wx(){return"xxxxxxxx-xxxx-4xxxy-xxxx-xxxxxxxxxxx".replace(/[xy]/g,n=>{const t=Math.random()*16|0;return(n==="x"?t:t&3|8).toString(16)})}const ny=()=>{};class BC{constructor(t){y(this,"finalized",!1);y(this,"observers",[]);y(this,"finalError");try{t(this)}catch(e){this.error(e)}}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,r){let a;if(!t)throw new H(q.ErrInvalidArgument,"missing observer");if(this.finalized)throw new H(q.ErrRefused,"observable is finalized due to previous error");typeof t=="object"?a=t:a={next:t,error:e,complete:r},a.next===void 0&&(a.next=ny),a.error===void 0&&(a.error=ny),a.complete===void 0&&(a.complete=ny);const l=Wx(),c=this.unsubscribeOne.bind(this,l);if(this.observers.push({subscriptionID:l,observer:a}),this.finalized)try{this.finalError?a.error(this.finalError):a.complete()}catch(d){pt.warn(d)}return c}unsubscribeOne(t){var e;this.observers=(e=this.observers)==null?void 0:e.filter(r=>r.subscriptionID!==t)}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){if(this.observers!==void 0&&this.observers[t]!==void 0)try{e(this.observers[t].observer)}catch(r){pt.error(r)}}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.observers=void 0)}}function tT(n){const t=new BC(n);return{subscribe:t.subscribe.bind(t),getProxy:()=>t}}class Wu{constructor(t,e,r,a){y(this,"prevID");y(this,"nextID");y(this,"delimiter");y(this,"message");y(this,"root");y(this,"operations");y(this,"presenceChange");y(this,"previousPresence");y(this,"reversePresenceKeys");this.prevID=t,this.nextID=t.next(),this.delimiter=Ax,this.root=e,this.operations=[],this.previousPresence=Xn(r),this.presenceChange=void 0,this.reversePresenceKeys=new Set,this.message=a}static create(t,e,r,a){return new Wu(t,e,r,a)}push(t){this.operations.push(t)}registerElement(t,e){this.root.registerElement(t,e)}registerRemovedElement(t){this.root.registerRemovedElement(t)}registerGCPair(t){this.root.registerGCPair(t)}getNextID(){return this.isPresenceOnlyChange()?this.prevID.next(!0).setLamport(this.prevID.getLamport()).setVersionVector(this.prevID.getVersionVector()):this.nextID}toChange(){const t=this.isPresenceOnlyChange()?this.prevID.next(!0):this.nextID;return xl.create({id:t,operations:this.operations,presenceChange:this.presenceChange,message:this.message})}isPresenceOnlyChange(){return this.operations.length===0}hasChange(){return this.operations.length>0||this.presenceChange!==void 0}setPresenceChange(t){this.presenceChange=t}setReversePresence(t,e){for(const r of Object.keys(t))e!=null&&e.addToHistory?this.reversePresenceKeys.add(r):this.reversePresenceKeys.delete(r)}getReversePresence(){if(this.reversePresenceKeys.size===0)return;const t={};for(const e of this.reversePresenceKeys)t[e]=this.previousPresence[e];return t}issueTimeTicket(){return this.delimiter+=1,this.nextID.createTimeTicket(this.delimiter)}getLastTimeTicket(){return this.nextID.createTimeTicket(this.delimiter)}acc(t){this.root.acc(t)}}function eT(n,t){const e=new fc(n);return new Proxy(t,e.getHandlers())}class fc{constructor(t){y(this,"context");y(this,"handlers");this.context=t,this.handlers={set:(e,r,a)=>(pt.isEnabled(en.Trivial)&&pt.trivial(`obj[${r}]=${JSON.stringify(a)}`),fc.setInternal(t,e,r,a),!0),get:(e,r)=>(pt.isEnabled(en.Trivial)&&pt.trivial(`obj[${r}]`),r==="getID"?()=>e.getCreatedAt():r==="toJSON"||r==="toString"?()=>e.toJSON():r==="toJS"?()=>e.toJS():r==="toJSForTest"?()=>e.toJSForTest():Xa(t,e.get(r))),ownKeys:e=>e.getKeys(),getOwnPropertyDescriptor:()=>({enumerable:!0,configurable:!0}),deleteProperty:(e,r)=>(pt.isEnabled(en.Trivial)&&pt.trivial(`obj[${r}]`),fc.deleteInternal(t,e,r),!0)}}static setInternal(t,e,r,a){if(r.includes("."))throw new H(q.ErrInvalidObjectKey,"key must not contain the '.'.");const l=t.issueTimeTicket(),c=tc(t,a,l),d=e.set(r,c,l);t.registerElement(c,e),d&&t.registerRemovedElement(d),t.push(ao.create(r,c.deepcopy(),e.getCreatedAt(),l))}static buildObjectMembers(t,e){const r={};for(const[a,l]of Object.entries(e)){if(a.includes("."))throw new H(q.ErrInvalidObjectKey,"key must not contain the '.'.");const c=t.issueTimeTicket(),d=tc(t,l,c);r[a]=d}return r}static deleteInternal(t,e,r){const a=t.issueTimeTicket(),l=e.deleteByKey(r,a);l&&(t.push(Cr.create(e.getCreatedAt(),l.getCreatedAt(),a)),t.registerRemovedElement(l))}getHandlers(){return this.handlers}}function zC(n,t){const e=new Gt(n,t);return new Proxy(t,e.getHandlers())}function Bb(n){return typeof n=="string"||n instanceof String?!isNaN(n):!1}function LC(n){return["concat","entries","every","filter","find","findIndex","forEach","join","keys","map","reduce","reduceRight","slice","some","toLocaleString","toString","values"].includes(n)}class Gt{constructor(t,e){y(this,"context");y(this,"handlers");y(this,"array");this.context=t,this.array=e,this.handlers={get:(r,a,l)=>a==="getID"?()=>r.getCreatedAt():a==="getElementByID"?c=>{const d=r.getByID(c);if(!(!d||d.isRemoved()))return Fn(t,d)}:a==="getElementByIndex"?c=>{const d=r.get(c);return Fn(t,d)}:a==="getLast"?()=>Fn(t,r.getLast()):a==="delete"?c=>{const d=Gt.deleteInternalByIndex(t,r,c);return Fn(t,d)}:a==="deleteByID"?c=>{const d=Gt.deleteInternalByID(t,r,c);return Fn(t,d)}:a==="insertAfter"?(c,d)=>{const h=Gt.insertAfterInternal(t,r,c,d);return Fn(t,h)}:a==="insertIntegerAfter"?(c,d)=>{const h=Gt.insertIntegerAfterInternal(t,r,c,d);return Fn(t,h)}:a==="insertBefore"?(c,d)=>{const h=Gt.insertBeforeInternal(t,r,c,d);return Fn(t,h)}:a==="setValue"?(c,d)=>{const h=Gt.setValueInternal(t,r,c,d);return Fn(t,h)}:a==="moveBefore"?(c,d)=>{Gt.moveBeforeInternal(t,r,c,d)}:a==="moveAfter"?(c,d)=>{Gt.moveAfterInternal(t,r,c,d)}:a==="moveAfterByIndex"?(c,d)=>{Gt.moveAfterByIndexInternal(t,r,c,d)}:a==="moveFront"?c=>{Gt.moveFrontInternal(t,r,c)}:a==="moveLast"?c=>{Gt.moveLastInternal(t,r,c)}:Bb(a)?Xa(t,r.get(Number(a))):a==="push"?c=>Gt.pushInternal(t,r,c):a==="splice"?(c,d,...h)=>Gt.splice(t,r,c,d,...h):a==="length"?r.length:typeof a=="symbol"&&a===Symbol.iterator?Gt.iteratorInternal.bind(this,t,r):a==="includes"?(c,d)=>Gt.includes(t,r,c,d):a==="indexOf"?(c,d)=>Gt.indexOf(t,r,c,d):a==="lastIndexOf"?(c,d)=>Gt.lastIndexOf(t,r,c,d):a==="toJSForTest"?()=>r.toJSForTest():a==="toTestString"?()=>Gt.toTestString(r):typeof a=="string"&&LC(a)?(...c)=>{const d=Array.from(r).map(h=>Xa(t,h));return Array.prototype[a].apply(d,c)}:Reflect.get(r,a,l),set:(r,a,l)=>{if(Bb(a)){const c=Number(a);return Gt.setValueInternal(t,r,c,l),!0}return Reflect.set(r,a,l)},deleteProperty:(r,a)=>(pt.isEnabled(en.Trivial)&&pt.trivial(`array[${a}]`),Gt.deleteInternalByIndex(t,r,Number.parseInt(a)),!0)}}static*iteratorInternal(t,e){for(const r of e)yield Fn(t,r)}static buildArrayElements(t,e){const r=[];for(const a of e){const l=t.issueTimeTicket(),c=tc(t,a,l);r.push(c)}return r}static pushInternal(t,e,r){return Gt.insertAfterInternal(t,e,e.getLastCreatedAt(),r),e.length}static moveBeforeInternal(t,e,r,a){const l=t.issueTimeTicket(),c=e.getPrevCreatedAt(r);e.moveAfter(c,a,l),t.push(er.create(e.getCreatedAt(),c,a,l))}static moveAfterInternal(t,e,r,a){const l=t.issueTimeTicket();t.push(er.create(e.getCreatedAt(),r,a,l)),e.moveAfter(r,a,l)}static moveAfterByIndexInternal(t,e,r,a){const l=e.get(r);if(!l)throw new H(q.ErrInvalidArgument,`index out of bounds: ${r}`);const c=e.get(a);if(!c)throw new H(q.ErrInvalidArgument,`index out of bounds: ${a}`);Gt.moveAfterInternal(t,e,l.getCreatedAt(),c.getCreatedAt())}static moveFrontInternal(t,e,r){const a=t.issueTimeTicket(),l=e.getHead();e.moveAfter(l.getCreatedAt(),r,a),t.push(er.create(e.getCreatedAt(),l.getCreatedAt(),r,a))}static moveLastInternal(t,e,r){const a=t.issueTimeTicket(),l=e.getLastCreatedAt();e.moveAfter(l,r,a),t.push(er.create(e.getCreatedAt(),l,r,a))}static insertAfterInternal(t,e,r,a){const l=t.issueTimeTicket(),c=tc(t,a,l);return e.insertAfter(r,c),t.registerElement(c,e),t.push(Aa.create(e.getCreatedAt(),r,c.deepcopy(),l)),c}static insertIntegerAfterInternal(t,e,r,a){const l=e.get(r);if(!l)throw new H(q.ErrInvalidArgument,`index out of bounds: ${r}`);return Gt.insertAfterInternal(t,e,l.getCreatedAt(),a),e}static insertBeforeInternal(t,e,r,a){return Gt.insertAfterInternal(t,e,e.getPrevCreatedAt(r),a)}static setValueInternal(t,e,r,a){const l=e.get(r);if(!l)throw new H(q.ErrInvalidArgument,`index out of bounds: ${r}`);return Gt.setByIndexInternal(t,e,l.getCreatedAt(),a),e}static setByIndexInternal(t,e,r,a){const l=t.issueTimeTicket(),c=tc(t,a,l),d=c.deepcopy();return t.push(Rs.create(e.getCreatedAt(),r,d,l)),e.set(r,c,l),t.registerElement(c,e),c}static deleteInternalByIndex(t,e,r){const a=t.issueTimeTicket(),l=e.deleteByIndex(r,a);if(l)return t.push(Cr.create(e.getCreatedAt(),l.getCreatedAt(),a)),t.registerRemovedElement(l),l}static deleteInternalByID(t,e,r){const a=t.issueTimeTicket(),l=e.delete(r,a);return t.push(Cr.create(e.getCreatedAt(),l.getCreatedAt(),a)),t.registerRemovedElement(l),l}static splice(t,e,r,a,...l){const c=e.length,d=r>=0?Math.min(r,c):Math.max(c+r,0),h=a===void 0?c:a<0?d:Math.min(d+a,c),g=[];for(let p=d;p<h;p++){const w=Gt.deleteInternalByIndex(t,e,d);if(w){const v=w.deepcopy();v.setRemovedAt(),g.push(Xa(t,v))}}if(l){let p=d===0?e.getHead().getID():e.get(d-1).getID();for(const w of l)p=Gt.insertAfterInternal(t,e,p,w).getID()}return g}static includes(t,e,r,a){var d;const l=e.length,c=a===void 0?0:a<0?Math.max(a+l,0):a;if(c>=l)return!1;if(fe.isSupport(r))return Array.from(e).map(g=>Xa(t,g)).includes(r,c);for(let h=c;h<l;h++)if(((d=e.get(h))==null?void 0:d.getID())===r.getID())return!0;return!1}static indexOf(t,e,r,a){var d;const l=e.length,c=a===void 0?0:a<0?Math.max(a+l,0):a;if(c>=l)return-1;if(fe.isSupport(r))return Array.from(e).map(g=>Xa(t,g)).indexOf(r,c);for(let h=c;h<l;h++)if(((d=e.get(h))==null?void 0:d.getID())===r.getID())return h;return-1}static lastIndexOf(t,e,r,a){var d;const l=e.length,c=a===void 0||a>=l?l-1:a<0?a+l:a;if(c<0)return-1;if(fe.isSupport(r))return Array.from(e).map(g=>Xa(t,g)).lastIndexOf(r,c);for(let h=c;h>0;h--)if(((d=e.get(h))==null?void 0:d.getID())===r.getID())return h;return-1}static toTestString(t){return t.toTestString()}getHandlers(){return this.handlers}}class Pp{constructor(t,e){y(this,"context");y(this,"text");this.context=t,this.text=e}initialize(t,e){this.context=t,this.text=e}getID(){return this.text.getID()}edit(t,e,r,a){if(!this.context||!this.text)throw new H(q.ErrNotInitialized,"Text is not initialized yet");if(t>e)throw new H(q.ErrInvalidArgument,"from should be less than or equal to to");const l=this.text.indexRangeToPosRange(t,e);pt.isEnabled(en.Debug)&&pt.debug(`EDIT: f:${t}->${l[0].toTestString()}, t:${e}->${l[1].toTestString()} c:${r}`);const c=a?bl(a):void 0,d=this.context.issueTimeTicket(),[,h,g,p]=this.text.edit(l,r,d,c);this.context.acc(g);for(const w of h)this.context.registerGCPair(w);return this.context.push(new Ac(this.text.getCreatedAt(),l[0],l[1],r,c?new Map(Object.entries(c)):new Map,d)),this.text.findIndexesFromRange(p)}delete(t,e){return this.edit(t,e,"")}empty(){return this.edit(0,this.length,"")}setStyle(t,e,r){if(!this.context||!this.text)throw new H(q.ErrNotInitialized,"Text is not initialized yet");if(t>e)throw new H(q.ErrInvalidArgument,"from should be less than or equal to to");const a=this.text.indexRangeToPosRange(t,e);pt.isEnabled(en.Debug)&&pt.debug(`STYL: f:${t}->${a[0].toTestString()}, t:${e}->${a[1].toTestString()} a:${JSON.stringify(r)}`);const l=bl(r),c=this.context.issueTimeTicket(),[d,h]=this.text.setStyle(a,l,c);this.context.acc(h);for(const g of d)this.context.registerGCPair(g);return this.context.push(new Ec(this.text.getCreatedAt(),a[0],a[1],new Map(Object.entries(l)),c)),!0}indexRangeToPosRange(t){if(!this.context||!this.text)throw new H(q.ErrNotInitialized,"Text is not initialized yet");const e=this.text.indexRangeToPosRange(t[0],t[1]);return[e[0].toStruct(),e[1].toStruct()]}posRangeToIndexRange(t){if(!this.context||!this.text)throw new H(q.ErrNotInitialized,"Text is not initialized yet");const e=this.text.findIndexesFromRange([ir.fromStruct(t[0]),ir.fromStruct(t[1])]);return[e[0],e[1]]}toTestString(){if(!this.context||!this.text)throw new H(q.ErrNotInitialized,"Text is not initialized yet");return this.text.toTestString()}values(){if(!this.context||!this.text)throw new H(q.ErrNotInitialized,"Text is not initialized yet");return this.text.values()}get length(){return this.text.length}getTreeByIndex(){return this.text.getTreeByIndex()}getTreeByID(){return this.text.getTreeByID()}toString(){if(!this.context||!this.text)throw new H(q.ErrNotInitialized,"Text is not initialized yet");return this.text.toString()}toJSON(){if(!this.context||!this.text)throw new H(q.ErrNotInitialized,"Text is not initialized yet");return this.text.toJSON()}toJSForTest(){if(!this.context||!this.text)throw new H(q.ErrNotInitialized,"Text is not initialized yet");return this.text.toJSForTest()}createRangeForTest(t,e){if(!this.context||!this.text)throw new H(q.ErrNotInitialized,"Text is not initialized yet");return this.text.indexRangeToPosRange(t,e)}}class qp{constructor(t,e){y(this,"valueType");y(this,"value");y(this,"context");y(this,"counter");this.valueType=t,this.value=e}initialize(t,e){this.valueType=e.getValueType(),this.context=t,this.counter=e,this.value=e.getValue()}getID(){return this.counter.getID()}getValue(){return this.value}getValueType(){return this.valueType}increase(t){if(!this.context||!this.counter)throw new H(q.ErrNotInitialized,"Counter is not initialized yet");const e=this.context.issueTimeTicket(),r=fe.of(t,e);if(!r.isNumericType())throw new TypeError(`Unsupported type of value: ${typeof r.getValue()}`);return this.counter.increase(r),this.context.push(Al.create(this.counter.getCreatedAt(),r,e)),this}toJSForTest(){if(!this.context||!this.counter)throw new H(q.ErrNotInitialized,"Counter is not initialized yet");return this.counter.toJSForTest()}}function Jp(n){if(n.isText)return{type:n.type,value:n.value};const t={type:n.type,children:n.children.map(e=>Jp(e))};return n.attrs&&(t.attributes=Is(n.attrs.toObject())),t}function UC(n,t){const e={type:n.isText?n.parent.type:n.type,children:n.isText?n.parent.getChildrenText().length===t?[]:[{type:Ar,value:n.parent.getChildrenText().slice(t)}]:n.children.slice(t).map(r=>Jp(r))};return n.attrs?e.attributes=Is(n.attrs.toObject()):n.isText&&n.parent.attrs&&(e.attributes=Is(n.parent.attrs.toObject())),e}function _C(n,t){const{node:e}=n,r=[...t].slice(0,-1),a=e.isText?e.parent.getChildrenText().length:e.children.length,l=[...r,a],c=[...r],d=[];c[c.length-1]+=1,t.every((g,p)=>g===l[p])||d.push({fromPath:[...t],toPath:l});const h=UC(e,t[t.length-1]);return h&&d.push({fromPath:c,toPath:c,content:h}),d}function PC(n,t){const{node:e,offset:r}=n,a=e.children[r],l=e.children[r-1],{children:c}=a,d=[...t].slice(0,-1),h=[{fromPath:[...t],toPath:[...d,r+1]}];if(!a.children.length)return h;const g=[...d,r-1,l.hasTextChild()?l.getChildrenText().length:l.children.length],p=c.map(w=>Jp(w));return h.push({fromPath:g,toPath:g,content:p}),h}function $p(n,t,e){const{type:r}=n,a=e.issueTimeTicket();if(r===Ar){nT(n);const{value:l}=n,c=yn.create(qe.of(a,0),r,l);t.append(c)}else{const{children:l=[]}=n,{attributes:c}=n;let d;if(typeof c=="object"&&!Ix(c)){const g=bl(c);d=new Ms;for(const[p,w]of Object.entries(g))d.set(p,w,a)}const h=yn.create(qe.of(a,0),r,void 0,d);t.append(h);for(const g of l)$p(g,h,e)}}function qC(n,t){const{type:e}=t,r=n.issueTimeTicket();let a;if(t.type===Ar){const{value:l}=t;a=yn.create(qe.of(r,0),e,l)}else if(t){const{children:l=[]}=t,{attributes:c}=t;let d;if(typeof c=="object"&&!Ix(c)){const h=bl(c);d=new Ms;for(const[g,p]of Object.entries(h))d.set(g,p,r)}a=yn.create(qe.of(n.issueTimeTicket(),0),e,void 0,d);for(const h of l)$p(h,a,n)}return a}function nT(n){if(!n.value.length)throw new H(q.ErrInvalidArgument,"text node cannot have empty value");return!0}function zb(n){if(!n.length)return!0;if(n[0].type===Ar)for(const e of n){const{type:r}=e;if(r!==Ar)throw new H(q.ErrInvalidArgument,"element node and text node cannot be passed together");nT(e)}else for(const e of n){const{type:r}=e;if(r===Ar)throw new H(q.ErrInvalidArgument,"element node and text node cannot be passed together")}return!0}class Hp{constructor(t){y(this,"initialRoot");y(this,"context");y(this,"tree");this.initialRoot=t}initialize(t,e){this.context=t,this.tree=e}getID(){return this.tree.getID()}buildRoot(t){if(!this.initialRoot)return yn.create(qe.of(t.issueTimeTicket(),0),Bk);const e=yn.create(qe.of(t.issueTimeTicket(),0),this.initialRoot.type);for(const r of this.initialRoot.children)$p(r,e,t);return e}getSize(){if(!this.context||!this.tree)throw new H(q.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getSize()}getNodeSize(){if(!this.context||!this.tree)throw new H(q.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getNodeSize()}getIndexTree(){if(!this.context||!this.tree)throw new H(q.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getIndexTree()}splitByPath(t){if(!this.context||!this.tree)throw new H(q.ErrNotInitialized,"Tree is not initialized yet");if(!t.length)throw new H(q.ErrInvalidArgument,"path should not be empty");const e=this.tree.pathToTreePos(t),r=_C(e,t);for(const a of r){const{fromPath:l,toPath:c,content:d}=a,h=this.tree.pathToPos(l),g=this.tree.pathToPos(c);this.editInternal(h,g,d?[d]:[],0)}}mergeByPath(t){if(!this.context||!this.tree)throw new H(q.ErrNotInitialized,"Tree is not initialized yet");if(!t.length)throw new H(q.ErrInvalidArgument,"path should not be empty");const e=this.tree.pathToTreePos(t);if(e.node.isText)throw new H(q.ErrInvalidArgument,"text node cannot be merged");const r=PC(e,t);for(const a of r){const{fromPath:l,toPath:c,content:d}=a,h=this.tree.pathToPos(l),g=this.tree.pathToPos(c);this.editInternal(h,g,d??[],0)}}styleByPath(t,e){if(!this.context||!this.tree)throw new H(q.ErrNotInitialized,"Tree is not initialized yet");if(!t.length)throw new H(q.ErrInvalidArgument,"path should not be empty");const[r,a]=this.tree.pathToPosRange(t),l=this.context.issueTimeTicket(),c=e?bl(e):void 0,[d,,h]=this.tree.style([r,a],c,l);this.context.acc(h);for(const g of d)this.context.registerGCPair(g);this.context.push(Os.create(this.tree.getCreatedAt(),r,a,c?new Map(Object.entries(c)):new Map,l))}style(t,e,r){if(!this.context||!this.tree)throw new H(q.ErrNotInitialized,"Tree is not initialized yet");if(t>e)throw new H(q.ErrInvalidArgument,"from should be less than or equal to to");const a=this.tree.findPos(t),l=this.tree.findPos(e),c=this.context.issueTimeTicket(),d=r?bl(r):void 0,[h,,g]=this.tree.style([a,l],d,c);this.context.acc(g);for(const p of h)this.context.registerGCPair(p);this.context.push(Os.create(this.tree.getCreatedAt(),a,l,d?new Map(Object.entries(d)):new Map,c))}removeStyle(t,e,r){if(!this.context||!this.tree)throw new H(q.ErrNotInitialized,"Tree is not initialized yet");if(t>e)throw new H(q.ErrInvalidArgument,"from should be less than or equal to to");const a=this.tree.findPos(t),l=this.tree.findPos(e),c=this.context.issueTimeTicket(),[d,,h]=this.tree.removeStyle([a,l],r,c);this.context.acc(h);for(const g of d)this.context.registerGCPair(g);this.context.push(Os.createTreeRemoveStyleOperation(this.tree.getCreatedAt(),a,l,r,c))}editInternal(t,e,r,a=0){var g;if(r.length!==0&&r[0]&&(zb(r),r[0].type!==Ar))for(const p of r){const{children:w=[]}=p;zb(w)}const l=this.context.getLastTimeTicket();let c=new Array;if(((g=r[0])==null?void 0:g.type)===Ar){let p="";for(const w of r){const{value:v}=w;p+=v}c.push(yn.create(qe.of(this.context.issueTimeTicket(),0),Ar,p))}else c=r.map(p=>p&&qC(this.context,p)).filter(p=>p);const[,d,h]=this.tree.edit([t,e],c.length?c.map(p=>p==null?void 0:p.deepcopy()):void 0,a,l,()=>this.context.issueTimeTicket());this.context.acc(h);for(const p of d)this.context.registerGCPair(p);return this.context.push(Nc.create(this.tree.getCreatedAt(),t,e,c.length?c:void 0,a,l)),!0}editByPath(t,e,r,a=0){if(!this.context||!this.tree)throw new H(q.ErrNotInitialized,"Tree is not initialized yet");if(t.length!==e.length)throw new H(q.ErrInvalidArgument,"path length should be equal");if(!t.length||!e.length)throw new H(q.ErrInvalidArgument,"path should not be empty");const l=this.tree.pathToPos(t),c=this.tree.pathToPos(e);return this.editInternal(l,c,r?[r]:[],a)}editBulkByPath(t,e,r,a=0){if(!this.context||!this.tree)throw new H(q.ErrNotInitialized,"Tree is not initialized yet");if(t.length!==e.length)throw new H(q.ErrInvalidArgument,"path length should be equal");if(!t.length||!e.length)throw new H(q.ErrInvalidArgument,"path should not be empty");const l=this.tree.pathToPos(t),c=this.tree.pathToPos(e);return this.editInternal(l,c,r,a)}edit(t,e,r,a=0){if(!this.context||!this.tree)throw new H(q.ErrNotInitialized,"Tree is not initialized yet");if(t>e)throw new H(q.ErrInvalidArgument,"from should be less than or equal to to");const l=this.tree.findPos(t),c=this.tree.findPos(e);return this.editInternal(l,c,r?[r]:[],a)}editBulk(t,e,r,a=0){if(!this.context||!this.tree)throw new H(q.ErrNotInitialized,"Tree is not initialized yet");if(t>e)throw new H(q.ErrInvalidArgument,"from should be less than or equal to to");const l=this.tree.findPos(t),c=this.tree.findPos(e);return this.editInternal(l,c,r,a)}toXML(){if(!this.context||!this.tree)throw new H(q.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toXML()}toJSON(){if(!this.context||!this.tree)throw new H(q.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toJSON()}toJSForTest(){if(!this.context||!this.tree)throw new H(q.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toJSForTest()}toJSInfoForTest(){if(!this.context||!this.tree)throw new H(q.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toJSInfoForTest()}getRootTreeNode(){if(!this.context||!this.tree)throw new H(q.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getRootTreeNode()}indexToPath(t){if(!this.context||!this.tree)throw new H(q.ErrNotInitialized,"Tree is not initialized yet");return this.tree.indexToPath(t)}pathToIndex(t){if(!this.context||!this.tree)throw new H(q.ErrNotInitialized,"Tree is not initialized yet");return this.tree.pathToIndex(t)}pathRangeToPosRange(t){if(!this.context||!this.tree)throw new H(q.ErrNotInitialized,"Tree is not initialized yet");const e=[this.tree.pathToIndex(t[0]),this.tree.pathToIndex(t[1])],r=this.tree.indexRangeToPosRange(e);return[r[0].toStruct(),r[1].toStruct()]}indexRangeToPosRange(t){if(!this.context||!this.tree)throw new H(q.ErrNotInitialized,"Tree is not initialized yet");return this.tree.indexRangeToPosStructRange(t)}posRangeToIndexRange(t){if(!this.context||!this.tree)throw new H(q.ErrNotInitialized,"Tree is not initialized yet");const e=[nr.fromStruct(t[0]),nr.fromStruct(t[1])];return this.tree.posRangeToIndexRange(e)}posRangeToPathRange(t){if(!this.context||!this.tree)throw new H(q.ErrNotInitialized,"Tree is not initialized yet");const e=[nr.fromStruct(t[0]),nr.fromStruct(t[1])];return this.tree.posRangeToPathRange(e)}}function Lb(n,t){return eT(n,t)}function Fn(n,t){if(t){if(t instanceof fe)return t;if(t instanceof Ve)return eT(n,t);if(t instanceof je)return zC(n,t);if(t instanceof pn)return new Pp(n,t);if(t instanceof sn){const e=new qp(Dr.Int,0);return e.initialize(n,t),e}else if(t instanceof vn){const e=new Hp;return e.initialize(n,t),e}}else return;throw new TypeError(`Unsupported type of element: ${typeof t}`)}function Xa(n,t){const e=Fn(n,t);return e instanceof fe?e.getValue():e}function tc(n,t,e){let r;if(fe.isSupport(t))r=fe.of(t,e);else if(Array.isArray(t))r=je.create(e,Gt.buildArrayElements(n,t));else if(typeof t=="object")t instanceof Pp?(r=pn.create(Tl.create(),e),t.initialize(n,r)):t instanceof qp?(r=sn.create(t.getValueType(),t.getValue(),e),t.initialize(n,r)):t instanceof Hp?(r=vn.create(t.buildRoot(n),e),t.initialize(n,r)):r=Ve.create(e,fc.buildObjectMembers(n,t));else throw new TypeError(`Unsupported type of value: ${typeof t}`);return r}class dc{constructor(t){y(this,"rootObject");y(this,"elementPairMapByCreatedAt");y(this,"gcElementSetByCreatedAt");y(this,"gcPairMap");y(this,"docSize");this.rootObject=t,this.elementPairMapByCreatedAt=new Map,this.gcElementSetByCreatedAt=new Set,this.gcPairMap=new Map,this.docSize={live:{data:0,meta:0},gc:{data:0,meta:0}},this.registerElement(t,void 0),t.getDescendants(e=>{if(e.getRemovedAt()&&this.registerRemovedElement(e),e instanceof pn||e instanceof vn)for(const r of e.getGCPairs())this.registerGCPair(r);return!1})}static create(){return new dc(Ve.create(vl))}findByCreatedAt(t){const e=this.elementPairMapByCreatedAt.get(t.toIDString());if(e)return e.element}findElementPairByCreatedAt(t){return this.elementPairMapByCreatedAt.get(t.toIDString())}createSubPaths(t){let e=this.elementPairMapByCreatedAt.get(t.toIDString());if(!e)return[];const r=[];for(;e.parent;){const a=e.element.getCreatedAt(),l=e.parent.subPathOf(a);if(l===void 0)throw new H(q.ErrInvalidArgument,`cant find the given element: ${a.toIDString()}`);r.unshift(l),e=this.elementPairMapByCreatedAt.get(e.parent.getCreatedAt().toIDString())}return r.unshift("$"),r}createPath(t){return this.createSubPaths(t).join(".")}registerElement(t,e){this.elementPairMapByCreatedAt.set(t.getCreatedAt().toIDString(),{parent:e,element:t}),Pe(this.docSize.live,t.getDataSize()),t instanceof Sa&&t.getDescendants((r,a)=>(this.elementPairMapByCreatedAt.set(r.getCreatedAt().toIDString(),{parent:a,element:r}),Pe(this.docSize.live,r.getDataSize()),!1))}deregisterElement(t){let e=0;const r=a=>{const l=a.getCreatedAt().toIDString();Wa(this.docSize.gc,a.getDataSize()),this.elementPairMapByCreatedAt.delete(l),this.gcElementSetByCreatedAt.delete(l),e++};return r(t),t instanceof Sa&&t.getDescendants(a=>(r(a),!1)),e}registerRemovedElement(t){Pe(this.docSize.gc,t.getDataSize()),Wa(this.docSize.live,t.getDataSize()),this.docSize.live.meta+=Tr,this.gcElementSetByCreatedAt.add(t.getCreatedAt().toIDString())}registerGCPair(t){if(this.gcPairMap.get(t.child.toIDString())){this.gcPairMap.delete(t.child.toIDString());return}this.gcPairMap.set(t.child.toIDString(),t);const r=this.gcPairMap.get(t.child.toIDString()).child.getDataSize();Pe(this.docSize.gc,r),Wa(this.docSize.live,r),t.child instanceof va||(this.docSize.live.meta+=Tr)}getElementMapSize(){return this.elementPairMapByCreatedAt.size}getGarbageElementSetSize(){const t=new Set;for(const e of this.gcElementSetByCreatedAt){t.add(e);const r=this.elementPairMapByCreatedAt.get(e);r.element instanceof Sa&&r.element.getDescendants(a=>(t.add(a.getCreatedAt().toIDString()),!1))}return t.size}getObject(){return this.rootObject}getGarbageLen(){return this.getGarbageElementSetSize()+this.gcPairMap.size}getDocSize(){return this.docSize}deepcopy(){return new dc(this.rootObject.deepcopy())}garbageCollect(t){let e=0;for(const r of this.gcElementSetByCreatedAt){const a=this.elementPairMapByCreatedAt.get(r),l=a.element.getRemovedAt();l&&(t!=null&&t.afterOrEqual(l))&&(a.parent.purge(a.element),e+=this.deregisterElement(a.element))}for(const[,r]of this.gcPairMap){const a=r.child.getRemovedAt();a&&(t!=null&&t.afterOrEqual(a))&&(r.parent.purge(r.child),Wa(this.docSize.gc,r.child.getDataSize()),this.gcPairMap.delete(r.child.toIDString()),e+=1)}return e}toJSON(){return this.rootObject.toJSON()}toSortedJSON(){return this.rootObject.toSortedJSON()}getStats(){return{elements:this.getElementMapSize(),gcPairs:this.gcPairMap.size,gcElements:this.getGarbageElementSetSize()}}acc(t){Pe(this.docSize.live,t)}*getGCElementPairs(){for(const t of this.gcElementSetByCreatedAt){const e=this.elementPairMapByCreatedAt.get(t);e&&(yield e)}}}let Ub=class{constructor(t,e){y(this,"context");y(this,"presence");this.context=t,this.presence=e}set(t,e){for(const r of Object.keys(t))this.presence[r]=t[r];this.context.setPresenceChange({type:kr.Put,presence:Xn(this.presence)}),this.context.setReversePresence(t,e)}get(t){return this.presence[t]}clear(){this.presence={},this.context.setPresenceChange({type:kr.Clear})}};const _b=50;class JC{constructor(){y(this,"undoStack",[]);y(this,"redoStack",[])}hasUndo(){return this.undoStack.length>0}hasRedo(){return this.redoStack.length>0}pushUndo(t){this.undoStack.length>=_b&&this.undoStack.shift(),this.undoStack.push(t)}popUndo(){return this.undoStack.pop()}pushRedo(t){this.redoStack.length>=_b&&this.redoStack.shift(),this.redoStack.push(t)}popRedo(){return this.redoStack.pop()}clearRedo(){this.redoStack=[]}getUndoStackForTest(){return this.undoStack}getRedoStackForTest(){return this.redoStack}reconcileCreatedAt(t,e){const r=a=>{for(const l of a)for(const c of l)(c instanceof Rs||c instanceof Cr||c instanceof er)&&c.getCreatedAt()===t&&c.setCreatedAt(e),(c instanceof Aa||c instanceof er)&&c.getPrevCreatedAt()===t&&c.setPrevCreatedAt(e)};r(this.undoStack),r(this.redoStack)}}function $C(n,t){const e=[];for(const r of t){const a=HC(n,r.path),l=VC(a,r);if(!l.valid)for(const c of l.errors||[])e.push(c)}return{valid:e.length===0,errors:e}}function HC(n,t){if(!t.startsWith("$"))throw new Error(`Path must start with $, got ${t}`);const e=t.split(".");let r=n;for(let a=1;a<e.length;a++){const l=e[a];if(!(r instanceof Ve))return;r=r.get(l)}return r}function VC(n,t){switch(t.type){case"string":case"boolean":case"integer":case"double":case"long":case"date":case"bytes":case"null":return KC(n,t);case"object":if(!(n instanceof Ve))return{valid:!1,errors:[{path:t.path,message:`expected object at path ${t.path}`}]};break;case"array":if(!(n instanceof je))return{valid:!1,errors:[{path:t.path,message:`expected array at path ${t.path}`}]};break;case"yorkie.Text":if(!(n instanceof pn))return{valid:!1,errors:[{path:t.path,message:`expected yorkie.Text at path ${t.path}`}]};break;case"yorkie.Tree":if(!(n instanceof vn))return{valid:!1,errors:[{path:t.path,message:`expected yorkie.Tree at path ${t.path}`}]};break;case"yorkie.Counter":if(!(n instanceof sn))return{valid:!1,errors:[{path:t.path,message:`expected yorkie.Counter at path ${t.path}`}]};break;default:throw new Error(`Unknown rule type: ${t.type}`)}return{valid:!0}}function jC(n){switch(n){case"null":return re.Null;case"boolean":return re.Boolean;case"integer":return re.Integer;case"long":return re.Long;case"double":return re.Double;case"string":return re.String;case"bytes":return re.Bytes;case"date":return re.Date;default:throw new Error(`Unknown primitive type: ${n}`)}}function KC(n,t){return n instanceof fe&&n.getType()===jC(t.type)?{valid:!0}:{valid:!1,errors:[{path:t.path,message:`expected ${t.type} at path ${t.path}`}]}}const YC="yorkie-devtools-panel",GC="yorkie-devtools-sdk";function FC(n){return[Be.StatusChanged,Be.Snapshot,Be.LocalChange,Be.RemoteChange,Be.Initialized,Be.Watched,Be.Unwatched,Be.PresenceChanged].includes(n.type)}function XC(n){return n.every(FC)}let rl="disconnected";const Pb=new Map,vd=new Map;typeof window<"u"&&(window.docEventsForReplayByDocKey=vd);function rd(n,t){(t!=null&&t.force||rl!=="disconnected")&&window.postMessage({source:GC,...n},"*")}function ZC(n){if(!n.isEnableDevtools()||typeof window>"u"||Pb.has(n.getKey()))return;vd.set(n.getKey(),[]);const t=n.subscribe("all",e=>{XC(e)&&(vd.get(n.getKey()).push(e),rl==="synced"&&rd({msg:"doc::sync::partial",docKey:n.getKey(),event:e}))});Pb.set(n.getKey(),[t]),rd({msg:"refresh-devtools"},{force:!0}),window.addEventListener("message",e=>{var a;if(((a=e.data)==null?void 0:a.source)!==YC)return;switch(e.data.msg){case"devtools::connect":if(rl!=="disconnected")break;rl="connected",rd({msg:"doc::available",docKey:n.getKey()}),pt.info(`[YD] Devtools connected. Doc: ${n.getKey()}`);break;case"devtools::disconnect":rl="disconnected",pt.info(`[YD] Devtools disconnected. Doc: ${n.getKey()}`);break;case"devtools::subscribe":rl="synced",rd({msg:"doc::sync::full",docKey:n.getKey(),events:vd.get(n.getKey())}),pt.info(`[YD] Devtools subscribed. Doc: ${n.getKey()}`);break}})}var ga=(n=>(n.Detached="detached",n.Attached="attached",n.Removed="removed",n))(ga||{}),Be=(n=>(n.StatusChanged="status-changed",n.ConnectionChanged="connection-changed",n.SyncStatusChanged="sync-status-changed",n.Snapshot="snapshot",n.LocalChange="local-change",n.RemoteChange="remote-change",n.Initialized="initialized",n.Watched="watched",n.Unwatched="unwatched",n.PresenceChanged="presence-changed",n.AuthError="auth-error",n))(Be||{}),ec=(n=>(n.Connected="connected",n.Disconnected="disconnected",n))(ec||{}),up=(n=>(n.Synced="synced",n.SyncFailed="sync-failed",n))(up||{});class ya{constructor(t,e){y(this,"key");y(this,"status");y(this,"opts");y(this,"maxSizeLimit");y(this,"schemaRules");y(this,"changeID");y(this,"checkpoint");y(this,"localChanges");y(this,"root");y(this,"presences");y(this,"clone");y(this,"internalHistory");y(this,"isUpdating");y(this,"onlineClients");y(this,"eventStream");y(this,"eventStreamObserver");y(this,"history");this.key=t,this.status="detached",this.opts=e||{},this.maxSizeLimit=0,this.schemaRules=[],this.changeID=$k,this.checkpoint=Hk,this.localChanges=[],this.root=dc.create(),this.presences=new Map,this.onlineClients=new Set,this.internalHistory=new JC,this.isUpdating=!1,this.eventStream=tT(r=>this.eventStreamObserver=r),this.history={canUndo:()=>this.internalHistory.hasUndo()&&!this.isUpdating,canRedo:()=>this.internalHistory.hasRedo()&&!this.isUpdating,undo:()=>this.executeUndoRedo(!0),redo:()=>this.executeUndoRedo(!1)},ZC(this)}update(t,e){var d,h,g;if(this.getStatus()==="removed")throw new H(q.ErrDocumentRemoved,`${this.key} is removed`);this.ensureClone();const r=this.changeID.getActorID(),a=Wu.create(this.changeID,this.clone.root,this.clone.presences.get(r)||{},e);try{const p=Lb(a,this.clone.root.getObject());this.presences.has(r)||this.clone.presences.set(r,{}),this.isUpdating=!0,t(p,new Ub(a,this.clone.presences.get(r)))}catch(p){throw this.clone=void 0,p}finally{this.isUpdating=!1}const l=this.getSchemaRules();if(!a.isPresenceOnlyChange()&&l.length){const p=$C((d=this.clone)==null?void 0:d.root.getObject(),l);if(!p.valid)throw this.clone=void 0,new H(q.ErrDocumentSchemaValidationFailed,`schema validation failed: ${(h=p.errors)==null?void 0:h.map(w=>w.message).join(", ")}`)}const c=Mk((g=this.clone)==null?void 0:g.root.getDocSize());if(!a.isPresenceOnlyChange()&&this.maxSizeLimit>0&&this.maxSizeLimit<c)throw this.clone=void 0,new H(q.ErrDocumentSizeExceedsLimit,`document size exceeded: ${c} > ${this.maxSizeLimit}`);if(a.hasChange()){pt.isEnabled(en.Trivial)&&pt.trivial(`trying to update a local change: ${this.toJSON()}`);const p=a.toChange(),{opInfos:w,reverseOps:v}=p.execute(this.root,this.presences,ae.Local);for(const T of p.getOperations())T instanceof Rs&&this.internalHistory.reconcileCreatedAt(T.getCreatedAt(),T.getValue().getCreatedAt());const S=a.getReversePresence();S&&v.push({type:"presence",value:S}),this.localChanges.push(p),v.length&&this.internalHistory.pushUndo(v),w.length&&this.internalHistory.clearRedo(),this.changeID=a.getNextID();const A=[];w.length&&A.push({type:"local-change",source:ae.Local,value:{message:p.getMessage()||"",operations:w,actor:r,clientSeq:p.getID().getClientSeq(),serverSeq:p.getID().getServerSeq()},rawChange:this.isEnableDevtools()?p.toStruct():void 0}),p.hasPresenceChange()&&A.push({type:"presence-changed",source:ae.Local,value:{clientID:r,presence:this.getPresence(r)}}),this.publish(A),pt.isEnabled(en.Trivial)&&pt.trivial(`after update a local change: ${this.toJSON()}`)}}subscribe(t,e,r,a){if(typeof t=="string"){if(typeof e!="function")throw new H(q.ErrInvalidArgument,"Second argument must be a callback function");if(t==="presence"){const d=e;return this.eventStream.subscribe(h=>{for(const g of h)g.type!=="initialized"&&g.type!=="watched"&&g.type!=="unwatched"&&g.type!=="presence-changed"||d(g)},r,a)}if(t==="my-presence"){const d=e;return this.eventStream.subscribe(h=>{for(const g of h)g.type!=="initialized"&&g.type!=="presence-changed"||g.type==="presence-changed"&&g.value.clientID!==this.changeID.getActorID()||d(g)},r,a)}if(t==="others"){const d=e;return this.eventStream.subscribe(h=>{for(const g of h)g.type!=="watched"&&g.type!=="unwatched"&&g.type!=="presence-changed"||g.value.clientID!==this.changeID.getActorID()&&d(g)},r,a)}if(t==="connection"){const d=e;return this.eventStream.subscribe(h=>{for(const g of h)g.type==="connection-changed"&&d(g)},r,a)}if(t==="status"){const d=e;return this.eventStream.subscribe(h=>{for(const g of h)g.type==="status-changed"&&d(g)},r,a)}if(t==="sync"){const d=e;return this.eventStream.subscribe(h=>{for(const g of h)g.type==="sync-status-changed"&&d(g)},r,a)}if(t==="auth-error"){const d=e;return this.eventStream.subscribe(h=>{for(const g of h)g.type==="auth-error"&&d(g)},r)}if(t==="all"){const d=e;return this.eventStream.subscribe(d,r,a)}const l=t,c=e;return this.eventStream.subscribe(d=>{for(const h of d){if(h.type!=="local-change"&&h.type!=="remote-change")continue;const g=[];for(const p of h.value.operations)this.isSameElementOrChildOf(p.path,l)&&g.push(p);g.length&&c({...h,value:{...h.value,operations:g}})}},r,a)}if(typeof t=="function"){const l=t,c=e,d=r;return this.eventStream.subscribe(h=>{for(const g of h)g.type!=="snapshot"&&g.type!=="local-change"&&g.type!=="remote-change"||l(g)},c,d)}throw new H(q.ErrInvalidArgument,`"${t}" is not a valid`)}publish(t){this.eventStreamObserver&&this.eventStreamObserver.next(t)}applyChangePack(t){t.hasSnapshot()?this.applySnapshot(t.getCheckpoint().getServerSeq(),t.getVersionVector(),t.getSnapshot(),t.getCheckpoint().getClientSeq()):(this.applyChanges(t.getChanges(),ae.Remote),this.removePushedLocalChanges(t.getCheckpoint().getClientSeq())),this.checkpoint=this.checkpoint.forward(t.getCheckpoint()),t.hasSnapshot()||this.garbageCollect(t.getVersionVector()),t.getIsRemoved()&&this.applyStatus("removed"),pt.isEnabled(en.Trivial)&&pt.trivial(`${this.root.toJSON()}`)}getCheckpoint(){return this.checkpoint}getChangeID(){return this.changeID}hasLocalChanges(){return this.localChanges.length>0}ensureClone(){this.clone||(this.clone={root:this.root.deepcopy(),presences:Xn(this.presences)})}createChangePack(){const t=Array.from(this.localChanges),e=this.checkpoint.increaseClientSeq(t.length);return yh.create(this.key,e,!1,t,this.getVersionVector())}setActor(t){for(const e of this.localChanges)e.setActor(t);this.changeID=this.changeID.setActor(t)}isEnableDevtools(){return!!this.opts.enableDevtools}getKey(){return this.key}getStatus(){return this.status}getClone(){return this.clone}getCloneRoot(){if(this.clone)return this.clone.root.getObject()}getRoot(){this.ensureClone();const t=Wu.create(this.changeID.next(),this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});return Lb(t,this.clone.root.getObject())}getDocSize(){return this.root.getDocSize()}getMaxSizePerDocument(){return this.maxSizeLimit}setMaxSizePerDocument(t){this.maxSizeLimit=t}getSchemaRules(){return this.schemaRules}setSchemaRules(t){this.schemaRules=t}garbageCollect(t){return this.opts.disableGC?0:(this.clone&&this.clone.root.garbageCollect(t),this.root.garbageCollect(t))}getRootObject(){return this.root.getObject()}getGarbageLen(){return this.root.getGarbageLen()}getRootCRDT(){return this.root}getGarbageLenFromClone(){return this.clone.root.getGarbageLen()}toJSON(){return this.root.toJSON()}toSortedJSON(){return this.root.toSortedJSON()}getStats(){return this.root.getStats()}toJSForTest(){return{...this.getRoot().toJSForTest(),key:"root"}}applySnapshot(t,e,r,a=-1){const{root:l,presences:c}=oe.bytesToSnapshot(r);this.root=new dc(l),this.presences=c,this.changeID=this.changeID.setClocks(e.maxLamport(),e),this.clone=void 0,this.removePushedLocalChanges(a),this.applyChanges(this.localChanges,ae.Local),this.publish([{type:"snapshot",source:ae.Remote,value:{serverSeq:t.toString(),snapshot:this.isEnableDevtools()?oe.bytesToHex(r):void 0,snapshotVector:oe.versionVectorToHex(e)}}])}applyChanges(t,e){pt.isEnabled(en.Debug)&&pt.debug(`trying to apply ${t.length} remote changes.elements:${this.root.getElementMapSize()}, removeds:${this.root.getGarbageElementSetSize()}`),pt.isEnabled(en.Trivial)&&pt.trivial(t.map(r=>`${r.getID().toTestString()}	${r.toTestString()}`).join(`
`));for(const r of t)this.applyChange(r,e);pt.isEnabled(en.Debug)&&pt.debug(`after appling ${t.length} remote changes.elements:${this.root.getElementMapSize()},  removeds:${this.root.getGarbageElementSetSize()}`)}applyChange(t,e){this.ensureClone(),t.execute(this.clone.root,this.clone.presences,e);const r=[],a=t.getID().getActorID();if(t.hasPresenceChange()&&this.onlineClients.has(a)){const c=t.getPresenceChange();switch(c.type){case kr.Put:r.push(this.presences.has(a)?{type:"presence-changed",source:e,value:{clientID:a,presence:c.presence}}:{type:"watched",source:ae.Remote,value:{clientID:a,presence:c.presence}});break;case kr.Clear:r.push({type:"unwatched",source:ae.Remote,value:{clientID:a,presence:this.getPresence(a)}}),this.removeOnlineClient(a);break}}const{opInfos:l}=t.execute(this.root,this.presences,e);if(this.changeID=this.changeID.syncClocks(t.getID()),l.length){const c=this.isEnableDevtools()?t.toStruct():void 0;r.push(e===ae.Remote?{type:"remote-change",source:e,value:{actor:a,clientSeq:t.getID().getClientSeq(),serverSeq:t.getID().getServerSeq(),message:t.getMessage()||"",operations:l},rawChange:c}:{type:"local-change",source:e,value:{actor:a,clientSeq:t.getID().getClientSeq(),serverSeq:t.getID().getServerSeq(),message:t.getMessage()||"",operations:l},rawChange:c})}r.length&&this.publish(r)}applyWatchStream(t){if(t.body.case==="initialization"){const e=t.body.value.clientIds,r=new Set;for(const a of e)a!==this.changeID.getActorID()&&r.add(a);this.setOnlineClients(r),this.publish([{type:"initialized",source:ae.Local,value:this.getPresences()}]);return}if(t.body.case==="event"){const{type:e,publisher:r}=t.body.value,a=[];if(e===ml.DOCUMENT_WATCHED){if(this.onlineClients.has(r)&&this.hasPresence(r))return;this.addOnlineClient(r),this.hasPresence(r)&&a.push({type:"watched",source:ae.Remote,value:{clientID:r,presence:this.getPresence(r)}})}else if(e===ml.DOCUMENT_UNWATCHED){const l=this.getPresence(r);this.removeOnlineClient(r),l&&a.push({type:"unwatched",source:ae.Remote,value:{clientID:r,presence:l}})}a.length&&this.publish(a)}}applyStatus(t){this.status=t,t==="detached"&&this.setActor(kp),this.publish([{source:t==="removed"?ae.Remote:ae.Local,type:"status-changed",value:t==="attached"?{status:t,actorID:this.changeID.getActorID()}:{status:t}}])}applyDocEventsForReplay(t){for(const e of t){if(e.type==="status-changed"){this.applyStatus(e.value.status),e.value.status==="attached"&&this.setActor(e.value.actorID);continue}if(e.type==="snapshot"){const{snapshot:r,serverSeq:a,snapshotVector:l}=e.value;if(!r)continue;this.applySnapshot(BigInt(a),oe.hexToVersionVector(l),oe.hexToBytes(r));continue}if(e.type==="local-change"||e.type==="remote-change"){if(!e.rawChange)continue;const r=xl.fromStruct(e.rawChange);this.applyChange(r,e.source)}if(e.type==="initialized"){const r=new Set;for(const{clientID:a,presence:l}of e.value)r.add(a),this.presences.set(a,l);this.setOnlineClients(r)}else if(e.type==="watched"){const{clientID:r,presence:a}=e.value;this.addOnlineClient(r),this.presences.set(r,a)}else if(e.type==="unwatched"){const{clientID:r}=e.value;this.removeOnlineClient(r),this.presences.delete(r)}else if(e.type==="presence-changed"){const{clientID:r,presence:a}=e.value;this.presences.set(r,a)}}}getValueByPath(t){if(!t.startsWith("$"))throw new H(q.ErrInvalidArgument,'path must start with "$"');const e=t.split(".");e.shift();let r=this.getRoot();for(const a of e)if(r=r[a],!r)return;return r}setOnlineClients(t){this.onlineClients=t}resetOnlineClients(){this.onlineClients=new Set}addOnlineClient(t){this.onlineClients.add(t)}removeOnlineClient(t){this.onlineClients.delete(t)}hasPresence(t){return this.presences.has(t)}getMyPresence(){if(this.status!=="attached")return{};const t=this.presences.get(this.changeID.getActorID());return t?Xn(t):{}}getOthersPresences(){const t=[],e=this.changeID.getActorID();for(const r of this.onlineClients)r!==e&&this.presences.has(r)&&t.push({clientID:r,presence:Xn(this.presences.get(r))});return t}getPresence(t){if(t===this.changeID.getActorID())return this.getMyPresence();if(!this.onlineClients.has(t))return;const e=this.presences.get(t);return e?Xn(e):void 0}getPresences(){const t=[];t.push({clientID:this.changeID.getActorID(),presence:Xn(this.getMyPresence())});for(const e of this.onlineClients)this.presences.has(e)&&t.push({clientID:e,presence:Xn(this.presences.get(e))});return t}getPresenceForTest(t){const e=this.presences.get(t);return e?Xn(e):void 0}getSelfForTest(){return{clientID:this.getChangeID().getActorID(),presence:this.getMyPresence()}}getOthersForTest(){const t=this.getChangeID().getActorID();return this.getPresences().filter(e=>e.clientID!==t).sort((e,r)=>e.clientID>r.clientID?1:-1)}getUndoStackForTest(){return this.internalHistory.getUndoStackForTest()}getRedoStackForTest(){return this.internalHistory.getRedoStackForTest()}getVersionVector(){return this.changeID.getVersionVector()}isSameElementOrChildOf(t,e){if(e===t)return!0;const r=t.split(".");return e.split(".").every((a,l)=>a===r[l])}removePushedLocalChanges(t){for(;this.localChanges.length&&!(this.localChanges[0].getID().getClientSeq()>t);)this.localChanges.shift()}executeUndoRedo(t){if(this.isUpdating)throw new H(q.ErrRefused,`${t?"Undo":"Redo"} is not allowed during an update`);const e=t?this.internalHistory.popUndo():this.internalHistory.popRedo();if(!e)throw new H(q.ErrRefused,`There is no operation to be ${t?"undone":"redone"}`);this.ensureClone();const r=Wu.create(this.changeID,this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});for(const p of e){if(!(p instanceof sr)){new Ub(r,Xn(this.clone.presences.get(this.changeID.getActorID()))).set(p.value,{addToHistory:!0});continue}const w=r.issueTimeTicket();if(p.setExecutedAt(w),p instanceof Rs){const v=p.getCreatedAt();p.getValue().setCreatedAt(w),this.internalHistory.reconcileCreatedAt(v,w)}else if(p instanceof Aa){const v=p.getValue().getCreatedAt();p.getValue().setCreatedAt(w),this.internalHistory.reconcileCreatedAt(v,w)}r.push(p)}const a=r.toChange();a.execute(this.clone.root,this.clone.presences,ae.UndoRedo);const{opInfos:l,reverseOps:c}=a.execute(this.root,this.presences,ae.UndoRedo),d=r.getReversePresence();if(d&&c.push({type:"presence",value:d}),c.length&&(t?this.internalHistory.pushRedo(c):this.internalHistory.pushUndo(c)),!a.hasPresenceChange()&&!l.length)return;this.localChanges.push(a),this.changeID=r.getNextID();const h=this.changeID.getActorID(),g=[];l.length&&g.push({type:"local-change",source:ae.UndoRedo,value:{message:a.getMessage()||"",operations:l,actor:h,clientSeq:a.getID().getClientSeq(),serverSeq:a.getID().getServerSeq()},rawChange:this.isEnableDevtools()?a.toStruct():void 0}),a.hasPresenceChange()&&g.push({type:"presence-changed",source:ae.UndoRedo,value:{clientID:h,presence:this.getPresence(h)}}),this.publish(g)}}class qb{constructor(t,e,r,a){y(this,"resource");y(this,"resourceID");y(this,"syncMode");y(this,"changeEventReceived");y(this,"lastHeartbeatTime");y(this,"reconnectStreamDelay");y(this,"cancelled");y(this,"watchStream");y(this,"watchLoopTimerID");y(this,"watchAbortController");this.reconnectStreamDelay=t,this.resource=e,this.resourceID=r,this.syncMode=a,this.changeEventReceived=a!==void 0?!1:void 0,this.lastHeartbeatTime=Date.now(),this.cancelled=!1}changeSyncMode(t){this.syncMode=t}needRealtimeSync(){return this.syncMode===Ku.RealtimeSyncOff?!1:this.syncMode===Ku.RealtimePushOnly?this.resource.hasLocalChanges():this.syncMode!==Ku.Manual&&(this.resource.hasLocalChanges()||(this.changeEventReceived??!1))}needSync(t){return this.resource instanceof ya?this.needRealtimeSync():this.syncMode===Ku.Manual?!1:Date.now()-this.lastHeartbeatTime>=t}updateHeartbeatTime(){this.lastHeartbeatTime=Date.now()}async runWatchLoop(t){const e=async()=>{if(this.watchStream)return Promise.resolve();this.watchLoopTimerID&&(clearTimeout(this.watchLoopTimerID),this.watchLoopTimerID=void 0);try{[this.watchStream,this.watchAbortController]=await t(()=>{this.watchStream=void 0,this.watchAbortController=void 0,this.cancelled||(this.watchLoopTimerID=setTimeout(e,this.reconnectStreamDelay))})}catch{}};await e()}cancelWatchStream(){this.cancelled=!0,this.watchStream&&this.watchAbortController&&(this.watchAbortController.abort(),this.watchStream=void 0,this.watchAbortController=void 0),clearTimeout(this.watchLoopTimerID),this.watchLoopTimerID=void 0}}function QC(n,t){let e=t;return{authInterceptor:l=>async c=>(n&&c.header.set("x-api-key",n),e&&c.header.set("authorization",e),await l(c)),setToken:l=>{e=l}}}const WC="@yorkie-js/sdk",tD="0.6.39",Jb={name:WC,version:tD};function eD(n){return t=>async e=>(n?e.header.set("x-yorkie-user-agent",n):e.header.set("x-yorkie-user-agent",Jb.name+"/"+Jb.version),await t(e))}const nD=n=>{try{if(JSON.stringify(n)===void 0)return!1}catch{return!1}return!0};var ju=(n=>(n.Detached="detached",n.Attached="attached",n.Removed="removed",n))(ju||{}),sl=(n=>(n.PresenceChanged="presence-changed",n.Initialized="initialized",n.Broadcast="broadcast",n.LocalBroadcast="local-broadcast",n.AuthError="auth-error",n))(sl||{});const Ju=".";class ma{constructor(t){y(this,"key");y(this,"status");y(this,"actorID");y(this,"sessionID");y(this,"count");y(this,"seq");y(this,"eventStream");y(this,"eventStreamObserver");this.validateChannelKey(t),this.key=t,this.status="detached",this.count=0,this.seq=0,this.eventStream=tT(e=>this.eventStreamObserver=e)}getKey(){return this.key}getFirstKeyPath(){return this.key.split(Ju)[0]}getStatus(){return this.status}applyStatus(t){this.status=t}isAttached(){return this.status==="attached"}getActorID(){return this.actorID}setActor(t){this.actorID=t}getSessionID(){return this.sessionID}setSessionID(t){this.sessionID=t}getPresenceCount(){return this.count}updateCount(t,e){return e===0||e>this.seq?(this.count=t,this.seq=e,!0):!1}hasLocalChanges(){return!1}subscribe(t,e){if(typeof t=="function")return this.eventStream.subscribe(t);const r=t,a=e;if(!a)throw new Error("callback is required when subscribing to specific event type or topic");if(r==="broadcast")return this.eventStream.subscribe(c=>{c.type==="broadcast"&&a(c)});if(r==="local-broadcast")return this.eventStream.subscribe(c=>{c.type==="local-broadcast"&&a(c)});if(r==="auth-error")return this.eventStream.subscribe(c=>{c.type==="auth-error"&&a(c)});if(r==="presence")return this.eventStream.subscribe(c=>{(c.type==="presence-changed"||c.type==="initialized")&&a(c)});if(r==="all")return this.eventStream.subscribe(a);const l=r;return this.eventStream.subscribe(c=>{c.type==="broadcast"&&c.topic===l&&a(c)})}publish(t){this.eventStreamObserver&&this.eventStreamObserver.next(t)}broadcast(t,e,r){if(this.status!=="attached")throw new Error(`channel is not attached: ${this.status}`);if(!this.actorID)throw new Error("actorID is not set");this.publish({type:"local-broadcast",clientID:this.actorID,topic:t,payload:e,options:r})}validateChannelKey(t){if(t==="")throw new Error("channel key must not be empty");if(t.includes(" "))throw new Error("channel key must not contain a whitespace");if(t.startsWith(Ju))throw new Error("channel key must not start with a period");if(t.endsWith(Ju))throw new Error("channel key must not end with a period");if(t.includes(`${Ju}${Ju}`))throw new Error("channel key path must not empty")}}var Ku=(n=>(n.Manual="manual",n.Realtime="realtime",n.RealtimePushOnly="realtime-pushonly",n.RealtimeSyncOff="realtime-syncoff",n))(Ku||{});const tl={rpcAddr:"https://api.yorkie.dev",syncLoopDuration:50,retrySyncLoopDelay:1e3,reconnectStreamDelay:1e3,channelHeartbeatInterval:3e4},ry={maxRetries:1/0,initialRetryInterval:1e3,maxBackoff:2e4};class rT{constructor(t){y(this,"id");y(this,"key");y(this,"metadata");y(this,"status");y(this,"attachmentMap");y(this,"apiKey");y(this,"authTokenInjector");y(this,"conditions");y(this,"syncLoopDuration");y(this,"reconnectStreamDelay");y(this,"retrySyncLoopDelay");y(this,"channelHeartbeatInterval");y(this,"rpcClient");y(this,"setAuthToken");y(this,"taskQueue");y(this,"processing",!1);y(this,"keepalive",!1);t=t||tl;const e=t.rpcAddr||tl.rpcAddr;this.key=t.key||Wx(),this.metadata=t.metadata||{},this.status="deactivated",this.attachmentMap=new Map,this.apiKey=t.apiKey||"",this.authTokenInjector=t.authTokenInjector,this.conditions={SyncLoop:!1,WatchLoop:!1},this.syncLoopDuration=t.syncLoopDuration??tl.syncLoopDuration,this.reconnectStreamDelay=t.reconnectStreamDelay??tl.reconnectStreamDelay,this.retrySyncLoopDelay=t.retrySyncLoopDelay??tl.retrySyncLoopDelay,this.channelHeartbeatInterval=t.channelHeartbeatInterval??tl.channelHeartbeatInterval;const{authInterceptor:r,setToken:a}=QC(this.apiKey);this.setAuthToken=a,this.rpcClient=ek(Ak,Tk({baseUrl:e,interceptors:[r,eD(t==null?void 0:t.userAgent)],fetch:(l,c)=>fetch(l,{...c,keepalive:this.keepalive})})),this.taskQueue=[]}async activate(){if(this.isActive())return Promise.resolve();if(this.authTokenInjector){const t=await this.authTokenInjector();this.setAuthToken(t)}return this.enqueueTask(async()=>{try{const t=await this.rpcClient.activateClient({clientKey:this.key,metadata:this.metadata},{headers:{"x-shard-key":`${this.apiKey}/${this.key}`}});this.id=t.clientId,this.status="activated",this.runSyncLoop(),pt.info(`[AC] c:"${this.getKey()}" activated, id:"${this.id}"`),typeof window<"u"&&window.addEventListener("beforeunload",async()=>{await this.deactivate({keepalive:!0})})}catch(t){throw pt.error(`[AC] c:"${this.getKey()}" err :`,t),await this.handleConnectError(t),t}})}deactivate(t={keepalive:!1,synchronous:!1}){if(this.status==="deactivated")return Promise.resolve();const e=async()=>{try{await this.rpcClient.deactivateClient({clientId:this.id,synchronous:t.synchronous},{headers:{"x-shard-key":`${this.apiKey}/${this.key}`}}),this.deactivateInternal(),pt.info(`[DC] c"${this.getKey()}" deactivated`)}catch(r){throw pt.error(`[DC] c:"${this.getKey()}" err :`,r),await this.handleConnectError(r),r}};if(t.keepalive){this.keepalive=!0;const r=e();return this.keepalive=!1,r}return this.enqueueTask(e)}has(t){return this.attachmentMap.has(t)}attach(t,e){return t instanceof ma?this.attachChannel(t,e):this.attachDocument(t,e)}attachDocument(t,e={}){if(!this.isActive())throw new H(q.ErrClientNotActivated,`${this.key} is not active`);if(t.getStatus()!==ga.Detached)throw new H(q.ErrNotDetached,`${t.getKey()} is not detached`);t.setActor(this.id),t.update((a,l)=>l.set(e.initialPresence||{}));const r=e.syncMode??"realtime";return this.enqueueTask(async()=>{try{const a=await this.rpcClient.attachDocument({clientId:this.id,changePack:oe.toChangePack(t.createChangePack()),schemaKey:e.schema},{headers:{"x-shard-key":`${this.apiKey}/${t.getKey()}`}});(a.maxSizePerDocument??0)>0&&t.setMaxSizePerDocument(a.maxSizePerDocument),a.schemaRules.length>0&&t.setSchemaRules(oe.fromSchemaRules(a.schemaRules));const c=oe.fromChangePack(a.changePack);if(t.applyChangePack(c),t.getStatus()===ga.Removed)return t;t.applyStatus(ga.Attached),this.attachmentMap.set(t.getKey(),new qb(this.reconnectStreamDelay,t,a.documentId,r)),r!=="manual"&&await this.runWatchLoop(t.getKey()),pt.info(`[AD] c:"${this.getKey()}" attaches d:"${t.getKey()}"`);const d=t.getRootObject();if(e.initialRoot){const h=e.initialRoot;t.update(g=>{for(const[p,w]of Object.entries(h))if(!d.has(p)){const v=p;g[v]=w}})}return t}catch(a){throw pt.error(`[AD] c:"${this.getKey()}" err :`,a),await this.handleConnectError(a),a}})}detach(t,e){return t instanceof ma?this.detachChannel(t):this.detachDocument(t,e)}detachDocument(t,e={keepalive:!1}){if(!this.isActive())throw new H(q.ErrClientNotActivated,`${this.key} is not active`);const r=this.attachmentMap.get(t.getKey());if(!r)throw new H(q.ErrNotAttached,`${t.getKey()} is not attached`);t.update((l,c)=>c.clear());const a=async()=>{try{const l=await this.rpcClient.detachDocument({clientId:this.id,documentId:r.resourceID,changePack:oe.toChangePack(t.createChangePack()),removeIfNotAttached:e.removeIfNotAttached??!1},{headers:{"x-shard-key":`${this.apiKey}/${t.getKey()}`}}),c=oe.fromChangePack(l.changePack);return t.applyChangePack(c),t.getStatus()!==ga.Removed&&t.applyStatus(ga.Detached),this.detachInternal(t.getKey()),pt.info(`[DD] c:"${this.getKey()}" detaches d:"${t.getKey()}"`),t}catch(l){throw pt.error(`[DD] c:"${this.getKey()}" err :`,l),await this.handleConnectError(l),l}};if(e.keepalive){this.keepalive=!0;const l=a();return this.keepalive=!1,l}return this.enqueueTask(a)}async attachChannel(t,e={}){if(!this.isActive())throw new H(q.ErrClientNotActivated,`${this.key} is not active`);if(t.getStatus()!==ju.Detached)throw new H(q.ErrNotDetached,`${t.getKey()} is not detached`);t.setActor(this.id);const r=async()=>{try{const a=await this.rpcClient.attachChannel({clientId:this.id,channelKey:t.getKey()},{headers:{"x-shard-key":`${this.apiKey}/${t.getFirstKeyPath()}`}});t.setSessionID(a.sessionId),t.updateCount(Number(a.count),0),t.applyStatus(ju.Attached);const l=e.isRealtime!==!1?"realtime":"manual",c=new qb(this.reconnectStreamDelay,t,a.sessionId,l);return t.subscribe("local-broadcast",d=>{const{topic:h,payload:g,options:p}=d;this.broadcast(t.getKey(),h,g,p).catch(w=>{p!=null&&p.error&&p.error(w),pt.error(`[BC] c:"${this.getKey()}" failed: ${w}`)})}),this.attachmentMap.set(t.getKey(),c),l==="realtime"&&await this.runWatchLoop(t.getKey()),pt.info(`[AP] c:"${this.getKey()}" attaches p:"${t.getKey()}" mode:${l} count:${t.getPresenceCount()}`),t}catch(a){throw pt.error(`[AP] c:"${this.getKey()}" err :`,a),await this.handleConnectError(a),a}};return this.enqueueTask(r)}async detachChannel(t){if(!this.isActive())throw new H(q.ErrClientNotActivated,`${this.key} is not active`);if(!this.attachmentMap.has(t.getKey()))throw new H(q.ErrNotAttached,`${t.getKey()} is not attached`);const e=async()=>{try{const r=await this.rpcClient.detachChannel({clientId:this.id,channelKey:t.getKey(),sessionId:t.getSessionID()},{headers:{"x-shard-key":`${this.apiKey}/${t.getFirstKeyPath()}`}});return t.updateCount(Number(r.count),0),t.applyStatus(ju.Detached),this.detachInternal(t.getKey()),pt.info(`[DP] c:"${this.getKey()}" detaches p:"${t.getKey()}" count:${t.getPresenceCount()}`),t}catch(r){throw pt.error(`[DP] c:"${this.getKey()}" err :`,r),await this.handleConnectError(r),r}};return this.enqueueTask(e)}async changeSyncMode(t,e){if(!this.isActive())throw new H(q.ErrClientNotActivated,`${this.key} is not active`);const r=this.attachmentMap.get(t.getKey());if(!r)throw new H(q.ErrNotAttached,`${t.getKey()} is not attached`);const a=r.syncMode;return a===e?t:(r.changeSyncMode(e),e==="manual"?(r.cancelWatchStream(),t):(e==="realtime"&&(r.changeEventReceived=!0),a==="manual"&&await this.runWatchLoop(t.getKey()),t))}sync(t){if(!this.isActive())throw new H(q.ErrClientNotActivated,`${this.key} is not active`);if(t instanceof ma){const e=this.attachmentMap.get(t.getKey());if(!e)throw new H(q.ErrNotAttached,`${t.getKey()} is not attached`);return this.enqueueTask(async()=>this.syncInternal(e).catch(async r=>{throw pt.error(`[SY] c:"${this.getKey()}" err :`,r),await this.handleConnectError(r),r}))}if(t instanceof ya){const e=this.attachmentMap.get(t.getKey());if(!e)throw new H(q.ErrNotAttached,`${t.getKey()} is not attached`);return this.enqueueTask(async()=>this.syncInternal(e,"realtime").catch(async r=>{throw pt.error(`[SY] c:"${this.getKey()}" err :`,r),await this.handleConnectError(r),r}))}return this.enqueueTask(async()=>{const e=[];for(const[,r]of this.attachmentMap)r.syncMode!==void 0&&r.resource instanceof ya&&e.push(this.syncInternal(r,r.syncMode));return Promise.all(e).catch(async r=>{throw pt.error(`[SY] c:"${this.getKey()}" err :`,r),await this.handleConnectError(r),r})})}remove(t){if(!this.isActive())throw new H(q.ErrClientNotActivated,`${this.key} is not active`);const e=this.attachmentMap.get(t.getKey());if(!e)throw new H(q.ErrNotAttached,`${t.getKey()} is not attached`);t.setActor(this.id);const r=oe.toChangePack(t.createChangePack());return r.isRemoved=!0,this.enqueueTask(async()=>{try{const a=await this.rpcClient.removeDocument({clientId:this.id,documentId:e.resourceID,changePack:r},{headers:{"x-shard-key":`${this.apiKey}/${t.getKey()}`}}),l=oe.fromChangePack(a.changePack);t.applyChangePack(l),this.detachInternal(t.getKey()),pt.info(`[RD] c:"${this.getKey()}" removes d:"${t.getKey()}"`)}catch(a){throw pt.error(`[RD] c:"${this.getKey()}" err :`,a),await this.handleConnectError(a),a}})}getID(){return this.id}getKey(){return this.key}isActive(){return this.status==="activated"}getStatus(){return this.status}getCondition(t){return this.conditions[t]}async createRevision(t,e,r){if(!this.isActive())throw new H(q.ErrClientNotActivated,`${this.key} is not active`);const a=this.attachmentMap.get(t.getKey());if(!a)throw new H(q.ErrNotAttached,`${t.getKey()} is not attached`);const l=async()=>{try{const c=await this.rpcClient.createRevision({clientId:this.id,documentId:a.resourceID,label:e,description:r||""},{headers:{"x-shard-key":`${this.apiKey}/${t.getKey()}`}});if(!c.revision)throw new H(q.ErrInvalidArgument,"revision is not returned");return pt.info(`[CR] c:"${this.getKey()}" creates revision d:"${t.getKey()}" l:"${e}"`),oe.toRevisionSummary(c.revision)}catch(c){throw pt.error(`[CR] c:"${this.getKey()}" err :`,c),await this.handleConnectError(c),c}};return this.enqueueTask(l)}async listRevisions(t,e){if(!this.isActive())throw new H(q.ErrClientNotActivated,`${this.key} is not active`);const r=this.attachmentMap.get(t.getKey());if(!r)throw new H(q.ErrNotAttached,`${t.getKey()} is not attached`);const a=async()=>{try{const l=await this.rpcClient.listRevisions({projectId:"",documentId:r.resourceID,pageSize:(e==null?void 0:e.pageSize)||10,offset:(e==null?void 0:e.offset)||0,isForward:(e==null?void 0:e.isForward)??!1},{headers:{"x-shard-key":`${this.apiKey}/${t.getKey()}`}});return pt.info(`[LR] c:"${this.getKey()}" lists revisions d:"${t.getKey()}" count:${l.revisions.length}`),l.revisions.map(oe.toRevisionSummary)}catch(l){throw pt.error(`[LR] c:"${this.getKey()}" err :`,l),await this.handleConnectError(l),l}};return this.enqueueTask(a)}async restoreRevision(t,e){if(!this.isActive())throw new H(q.ErrClientNotActivated,`${this.key} is not active`);if(!this.attachmentMap.get(t.getKey()))throw new H(q.ErrNotAttached,`${t.getKey()} is not attached`);const a=async()=>{try{await this.rpcClient.restoreRevision({clientId:this.id,revisionId:e},{headers:{"x-shard-key":`${this.apiKey}/${t.getKey()}`}}),pt.info(`[RR] c:"${this.getKey()}" restores revision d:"${t.getKey()}" r:"${e}"`)}catch(l){throw pt.error(`[RR] c:"${this.getKey()}" err :`,l),await this.handleConnectError(l),l}};return this.enqueueTask(a)}async broadcast(t,e,r,a){if(!this.isActive())throw new H(q.ErrClientNotActivated,`${this.key} is not active`);const l=this.attachmentMap.get(t);if(!l)throw new H(q.ErrNotAttached,`${t} is not attached`);if(!nD(r))throw new H(q.ErrInvalidArgument,"payload is not serializable");const c=l.resource,d=(a==null?void 0:a.maxRetries)??ry.maxRetries,h=ry.maxBackoff;let g=0;const p=v=>Math.min(ry.initialRetryInterval*2**v,h),w=async()=>this.enqueueTask(async()=>{try{await this.rpcClient.broadcast({clientId:this.id,channelKey:t,topic:e,payload:new TextEncoder().encode(JSON.stringify(r))},{headers:{"x-shard-key":`${this.apiKey}/${c.getFirstKeyPath()}`}}),pt.info(`[BC] c:"${this.getKey()}" broadcasts p:"${t}" t:"${e}"`)}catch(v){if(pt.error(`[BC] c:"${this.getKey()}" err:`,v),await this.handleConnectError(v))if(ey(v,q.ErrUnauthenticated)&&l.resource instanceof ma&&l.resource.publish({type:sl.AuthError,reason:Vu(v).reason||"unauthenticated",method:"Broadcast"}),g<d)g++,setTimeout(()=>w(),p(g-1)),pt.info(`[BC] c:"${this.getKey()}" retry attempt ${g}/${d}`);else throw pt.error(`[BC] c:"${this.getKey()}" exceeded maximum retry attempts`),v}});return w()}runSyncLoop(){const t=async()=>{if(!this.isActive()){pt.debug(`[SL] c:"${this.getKey()}" exit sync loop`),this.conditions.SyncLoop=!1;return}try{await this.enqueueTask(async()=>{const e=[];for(const[,r]of this.attachmentMap)r.needSync(this.channelHeartbeatInterval)&&(r.changeEventReceived!==void 0&&(r.changeEventReceived=!1),e.push(this.syncInternal(r,r.syncMode).catch(a=>{throw ey(a,q.ErrUnauthenticated)&&r.resource.publish([{type:Be.AuthError,value:{reason:Vu(a).reason,method:"PushPull"}}]),a})));await Promise.all(e),setTimeout(t,this.syncLoopDuration)})}catch(e){pt.error(`[SL] c:"${this.getKey()}" sync failed:`,e),await this.handleConnectError(e)?setTimeout(t,this.retrySyncLoopDelay):this.conditions.SyncLoop=!1}};pt.debug(`[SL] c:"${this.getKey()}" run sync loop`),this.conditions.SyncLoop=!0,t()}async runWatchLoop(t){const e=this.attachmentMap.get(t);if(!e)throw new H(q.ErrNotAttached,`${t} is not attached`);return this.conditions.WatchLoop=!0,e.runWatchLoop(r=>{if(!this.isActive())return this.conditions.WatchLoop=!1,Promise.reject(new H(q.ErrClientNotActivated,`${this.key} is not active`));if(!this.attachmentMap.has(t))return this.conditions.WatchLoop=!1,Promise.reject(new H(q.ErrNotAttached,`${t} is not attached`));const a=new AbortController;return e.resource instanceof ya?this.createDocumentWatchStream(e,t,a,r):e.resource instanceof ma?this.createChannelWatchStream(e,t,a,r):Promise.reject(new H(q.ErrClientNotActivated,`Unknown resource type for ${t}`))})}createDocumentWatchStream(t,e,r,a){const l=this.rpcClient.watchDocument({clientId:this.id,documentId:t.resourceID},{headers:{"x-shard-key":`${this.apiKey}/${e}`},signal:r.signal});return t.resource.publish([{type:Be.ConnectionChanged,value:ec.Connected}]),pt.info(`[WD] c:"${this.getKey()}" watches d:"${e}"`),t.changeEventReceived!==void 0&&(t.changeEventReceived=!0),new Promise((c,d)=>{(async()=>{try{for await(const g of l)this.handleWatchDocumentResponse(t,g),g.body.case==="initialization"&&c([l,r]);t.resource.resetOnlineClients(),t.resource.publish([{type:Be.Initialized,source:ae.Local,value:t.resource.getPresences()}]),t.resource.publish([{type:Be.ConnectionChanged,value:ec.Disconnected}]),pt.debug(`[WD] c:"${this.getKey()}" unwatches (stream ended)`),a()}catch(g){t.resource.resetOnlineClients(),t.resource.publish([{type:Be.Initialized,source:ae.Local,value:t.resource.getPresences()}]),t.resource.publish([{type:Be.ConnectionChanged,value:ec.Disconnected}]),pt.debug(`[WD] c:"${this.getKey()}" unwatches`),await this.handleConnectError(g)?(ey(g,q.ErrUnauthenticated)&&t.resource.publish([{type:Be.AuthError,value:{reason:Vu(g).reason,method:"WatchDocument"}}]),a()):this.conditions.WatchLoop=!1,d(g)}})()})}createChannelWatchStream(t,e,r,a){const l=this.rpcClient.watchChannel({clientId:this.id,channelKey:e},{headers:{"x-shard-key":`${this.apiKey}/${t.resource.getFirstKeyPath()}`},signal:r.signal});return pt.info(`[WP] c:"${this.getKey()}" watches p:"${e}"`),new Promise((c,d)=>{(async()=>{try{let g=!0;for await(const p of l)this.handleWatchChannelResponse(t,p),g&&(g=!1,c([l,r]));pt.debug(`[WP] c:"${this.getKey()}" p:"${e}" stream ended`),a()}catch(g){if(g instanceof Error&&g.name==="AbortError"){pt.debug(`[WP] c:"${this.getKey()}" p:"${e}" stream aborted`);return}pt.debug(`[WP] c:"${this.getKey()}" p:"${e}" err:`,g),await this.handleConnectError(g)?a():this.conditions.WatchLoop=!1,d(g)}})()})}handleWatchChannelResponse(t,e){const r=t.resource;if(e.body.case==="initialized"){const{count:a,seq:l}=e.body.value;r.updateCount(Number(a),Number(l))&&r.publish({type:sl.Initialized,count:Number(a)})}else if(e.body.case==="event"){const a=e.body.value;if(a.type===gh.BROADCAST){const l=new TextDecoder;try{const c=JSON.parse(l.decode(a.payload));r.publish({type:sl.Broadcast,clientID:a.publisher,topic:a.topic,payload:c})}catch(c){pt.error(`[WP] c:"${this.getKey()}" failed to parse broadcast payload:`,c)}return}r.updateCount(Number(a.count),Number(a.seq))&&r.publish({type:sl.PresenceChanged,count:Number(a.count)})}}handleWatchDocumentResponse(t,e){if(e.body.case==="event"&&e.body.value.type===ml.DOCUMENT_CHANGED){t.changeEventReceived!==void 0&&(t.changeEventReceived=!0);return}t.resource.applyWatchStream(e)}deactivateInternal(){this.status="deactivated";for(const[t,e]of this.attachmentMap)this.detachInternal(t),e.resource instanceof ya?e.resource.applyStatus(ga.Detached):e.resource instanceof ma&&e.resource.applyStatus(ju.Detached)}detachInternal(t){const e=this.attachmentMap.get(t);e&&(e.cancelWatchStream(),e.resource instanceof ya&&e.resource.resetOnlineClients(),this.attachmentMap.delete(t))}async syncInternal(t,e){const{resource:r}=t;if(r instanceof ma){try{const d=await this.rpcClient.refreshChannel({clientId:this.id,channelKey:r.getKey(),sessionId:r.getSessionID()},{headers:{"x-shard-key":`${this.apiKey}/${r.getFirstKeyPath()}`}});r.updateCount(Number(d.count),0),t.updateHeartbeatTime(),pt.debug(`[RP] c:"${this.getKey()}" refreshes p:"${r.getKey()}" mode:${t.syncMode}`)}catch(d){throw pt.error(`[RP] c:"${this.getKey()}" err :`,d),d}return r}const a=r,{resourceID:l}=t,c=a.createChangePack();try{const d=await this.rpcClient.pushPullChanges({clientId:this.id,documentId:l,changePack:oe.toChangePack(c),pushOnly:e==="realtime-pushonly"},{headers:{"x-shard-key":`${this.apiKey}/${a.getKey()}`}}),h=oe.fromChangePack(d.changePack);if(h.hasChanges()&&(t.syncMode==="realtime-pushonly"||t.syncMode==="realtime-syncoff"))return a;a.applyChangePack(h),t.resource.publish([{type:Be.SyncStatusChanged,value:up.Synced}]),a.getStatus()===ga.Removed&&this.detachInternal(a.getKey());const g=a.getKey(),p=h.getChangeSize();return pt.info(`[PP] c:"${this.getKey()}" sync d:"${g}", push:${c.getChangeSize()} pull:${p} cp:${h.getCheckpoint().toTestString()}`),a}catch(d){throw a.publish([{type:Be.SyncStatusChanged,value:up.SyncFailed}]),pt.error(`[PP] c:"${this.getKey()}" err :`,d),d}}async handleConnectError(t){if(!(t instanceof ee))return!1;if(t.code===Pt.Canceled||t.code===Pt.Unknown||t.code===Pt.ResourceExhausted||t.code===Pt.Unavailable)return!0;if(nl(t)===q.ErrUnauthenticated){if(this.authTokenInjector){const e=await this.authTokenInjector(Vu(t).reason);this.setAuthToken(e)}return!0}return nl(t)===q.ErrTooManySubscribers?(pt.error(`[WD] c:"${this.getKey()}" err :`,t.rawMessage),!0):(nl(t)===q.ErrTooManyAttachments||(nl(t)===q.ErrClientNotActivated||nl(t)===q.ErrClientNotFound)&&this.deactivateInternal(),!1)}enqueueTask(t){return new Promise((e,r)=>{this.taskQueue.push(()=>t().then(e).catch(r)),this.processing||this.processNext()})}async processNext(){if(this.taskQueue.length===0){this.processing=!1;return}try{this.processing=!0,await this.taskQueue.shift()()}catch{pt.error(`[TQ] c:"${this.getKey()}" process failed, id:"${this.id}"`)}this.processNext()}}Dr.Int,Dr.Long;typeof globalThis<"u"&&(globalThis.yorkie={Client:rT,Document:ya,Primitive:fe,Text:Pp,Counter:qp,Tree:Hp,Channel:ma,ChannelEventType:sl,LogLevel:en,setLogLevel:RC,IntType:Dr.Int,LongType:Dr.Long});const rD="@yorkie-js/react",iD="0.6.39",$b={name:rD,version:iD};var et=xc();const sD=G1(et),iT=et.createContext({client:void 0,loading:!0,error:void 0});function aD(n){const[t,e]=et.useState(void 0),[r,a]=et.useState(!0),[l,c]=et.useState(void 0),[d,h]=et.useState(!1);return et.useEffect(()=>{h(!0)},[]),et.useEffect(()=>{a(!0),c(void 0);async function g(){if(d)try{const p=new rT(n);await p.activate(),e(p)}catch(p){c(p instanceof Error?p:new Error("Failed to activate client"))}finally{a(!1)}}return g(),()=>{t!=null&&t.isActive()&&t.deactivate({keepalive:!0})}},[n.apiKey,n.rpcAddr,d]),{client:t,loading:r,error:l}}const oD=({children:n,...t})=>{const e=et.useMemo(()=>({userAgent:$b.name+"/"+$b.version,...t}),[t.apiKey,t.rpcAddr]),{client:r,loading:a,error:l}=aD(e);return tt.jsx(iT.Provider,{value:{client:r,loading:a,error:l},children:n})},lD=()=>{const n=et.useContext(iT);if(!n)throw new Error("useYorkie must be used under YorkieProvider");return{client:n.client,loading:n.loading,error:n.error}};function uD(n){const t=new Set;let e=n;const r=()=>{t.forEach(h=>h(e))};return{subscribe:h=>(t.add(h),()=>t.delete(h)),getSnapshot:()=>e,setState:h=>{const g=e;e=typeof h=="function"?h(g):h,g!==e&&r()},destroy:()=>{t.clear()}}}const cD=n=>uD(n);function fD(n,t,e=Object.is){const r=et.useRef(t),a=et.useRef(e),l=et.useRef(void 0);r.current=t,a.current=e;const c=()=>{const d=n.getSnapshot(),h=r.current?r.current(d):d;return l.current!==void 0&&a.current(l.current,h)?l.current:(l.current=h,h)};return et.useSyncExternalStore(n.subscribe,c,c)}function dD(n,t,e,r,a,l,c,d){const h=et.useRef(a),g=et.useRef(l),[p,w]=et.useState(!1);et.useEffect(()=>{w(!0)},[]),et.useEffect(()=>{if(e){d.setState(T=>({...T,loading:!1,error:e}));return}if(!n||t||!p){d.setState(T=>({...T,loading:!0}));return}d.setState(T=>({...T,loading:!0,error:void 0}));const v=new ya(r,{enableDevtools:c}),S=[];S.push(v.subscribe(()=>{d.setState(T=>({...T,root:v.getRoot()}))})),S.push(v.subscribe("presence",()=>{d.setState(T=>({...T,presences:v.getPresences()}))})),S.push(v.subscribe("connection",T=>{d.setState(k=>({...k,connection:T.value}))}));async function A(){try{await(n==null?void 0:n.attach(v,{initialRoot:h.current,initialPresence:g.current}));const T=k=>{try{v.update(k)}catch(D){d.setState(L=>({...L,error:D instanceof Error?D:new Error("Failed to update document")}))}};d.setState(k=>({...k,doc:v,root:v.getRoot(),presences:v.getPresences(),update:T}))}catch(T){d.setState(k=>({...k,error:T instanceof Error?T:new Error("Failed to attach document")}))}finally{d.setState(T=>({...T,loading:!1}))}}return A(),()=>{n&&n.has(r)&&n.detach(v);for(const T of S)T()}},[n,t,e,r,d,p])}const sT=et.createContext(void 0),hD=({docKey:n,initialRoot:t={},initialPresence:e={},enableDevtools:r=!1,children:a})=>{const{client:l,loading:c,error:d}=lD(),h=et.useRef(void 0);h.current||(h.current=cD({doc:void 0,root:t,presences:[],connection:ec.Disconnected,update:()=>{},loading:!0,error:void 0}));const g=h.current;return dD(l,c,d,n,t,e,r,g),tt.jsx(sT.Provider,{value:g,children:a})};function gD(){const n=et.useContext(sT);if(!n)throw new Error("useDocument must be used within a DocumentProvider");return fD(n)}et.createContext(void 0);function Ne(n){if(typeof n=="string"||typeof n=="number")return""+n;let t="";if(Array.isArray(n))for(let e=0,r;e<n.length;e++)(r=Ne(n[e]))!==""&&(t+=(t&&" ")+r);else for(let e in n)n[e]&&(t+=(t&&" ")+e);return t}var mD={value:()=>{}};function wh(){for(var n=0,t=arguments.length,e={},r;n<t;++n){if(!(r=arguments[n]+"")||r in e||/[\s.]/.test(r))throw new Error("illegal type: "+r);e[r]=[]}return new wd(e)}function wd(n){this._=n}function yD(n,t){return n.trim().split(/^|\s+/).map(function(e){var r="",a=e.indexOf(".");if(a>=0&&(r=e.slice(a+1),e=e.slice(0,a)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:r}})}wd.prototype=wh.prototype={constructor:wd,on:function(n,t){var e=this._,r=yD(n+"",e),a,l=-1,c=r.length;if(arguments.length<2){for(;++l<c;)if((a=(n=r[l]).type)&&(a=pD(e[a],n.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++l<c;)if(a=(n=r[l]).type)e[a]=Hb(e[a],n.name,t);else if(t==null)for(a in e)e[a]=Hb(e[a],n.name,null);return this},copy:function(){var n={},t=this._;for(var e in t)n[e]=t[e].slice();return new wd(n)},call:function(n,t){if((a=arguments.length-2)>0)for(var e=new Array(a),r=0,a,l;r<a;++r)e[r]=arguments[r+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(l=this._[n],r=0,a=l.length;r<a;++r)l[r].value.apply(t,e)},apply:function(n,t,e){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var r=this._[n],a=0,l=r.length;a<l;++a)r[a].value.apply(t,e)}};function pD(n,t){for(var e=0,r=n.length,a;e<r;++e)if((a=n[e]).name===t)return a.value}function Hb(n,t,e){for(var r=0,a=n.length;r<a;++r)if(n[r].name===t){n[r]=mD,n=n.slice(0,r).concat(n.slice(r+1));break}return e!=null&&n.push({name:t,value:e}),n}var cp="http://www.w3.org/1999/xhtml";const Vb={svg:"http://www.w3.org/2000/svg",xhtml:cp,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Sh(n){var t=n+="",e=t.indexOf(":");return e>=0&&(t=n.slice(0,e))!=="xmlns"&&(n=n.slice(e+1)),Vb.hasOwnProperty(t)?{space:Vb[t],local:n}:n}function vD(n){return function(){var t=this.ownerDocument,e=this.namespaceURI;return e===cp&&t.documentElement.namespaceURI===cp?t.createElement(n):t.createElementNS(e,n)}}function wD(n){return function(){return this.ownerDocument.createElementNS(n.space,n.local)}}function aT(n){var t=Sh(n);return(t.local?wD:vD)(t)}function SD(){}function Vp(n){return n==null?SD:function(){return this.querySelector(n)}}function bD(n){typeof n!="function"&&(n=Vp(n));for(var t=this._groups,e=t.length,r=new Array(e),a=0;a<e;++a)for(var l=t[a],c=l.length,d=r[a]=new Array(c),h,g,p=0;p<c;++p)(h=l[p])&&(g=n.call(h,h.__data__,p,l))&&("__data__"in h&&(g.__data__=h.__data__),d[p]=g);return new wn(r,this._parents)}function xD(n){return n==null?[]:Array.isArray(n)?n:Array.from(n)}function TD(){return[]}function oT(n){return n==null?TD:function(){return this.querySelectorAll(n)}}function AD(n){return function(){return xD(n.apply(this,arguments))}}function ED(n){typeof n=="function"?n=AD(n):n=oT(n);for(var t=this._groups,e=t.length,r=[],a=[],l=0;l<e;++l)for(var c=t[l],d=c.length,h,g=0;g<d;++g)(h=c[g])&&(r.push(n.call(h,h.__data__,g,c)),a.push(h));return new wn(r,a)}function lT(n){return function(){return this.matches(n)}}function uT(n){return function(t){return t.matches(n)}}var ND=Array.prototype.find;function kD(n){return function(){return ND.call(this.children,n)}}function CD(){return this.firstElementChild}function DD(n){return this.select(n==null?CD:kD(typeof n=="function"?n:uT(n)))}var ID=Array.prototype.filter;function OD(){return Array.from(this.children)}function MD(n){return function(){return ID.call(this.children,n)}}function RD(n){return this.selectAll(n==null?OD:MD(typeof n=="function"?n:uT(n)))}function BD(n){typeof n!="function"&&(n=lT(n));for(var t=this._groups,e=t.length,r=new Array(e),a=0;a<e;++a)for(var l=t[a],c=l.length,d=r[a]=[],h,g=0;g<c;++g)(h=l[g])&&n.call(h,h.__data__,g,l)&&d.push(h);return new wn(r,this._parents)}function cT(n){return new Array(n.length)}function zD(){return new wn(this._enter||this._groups.map(cT),this._parents)}function Qd(n,t){this.ownerDocument=n.ownerDocument,this.namespaceURI=n.namespaceURI,this._next=null,this._parent=n,this.__data__=t}Qd.prototype={constructor:Qd,appendChild:function(n){return this._parent.insertBefore(n,this._next)},insertBefore:function(n,t){return this._parent.insertBefore(n,t)},querySelector:function(n){return this._parent.querySelector(n)},querySelectorAll:function(n){return this._parent.querySelectorAll(n)}};function LD(n){return function(){return n}}function UD(n,t,e,r,a,l){for(var c=0,d,h=t.length,g=l.length;c<g;++c)(d=t[c])?(d.__data__=l[c],r[c]=d):e[c]=new Qd(n,l[c]);for(;c<h;++c)(d=t[c])&&(a[c]=d)}function _D(n,t,e,r,a,l,c){var d,h,g=new Map,p=t.length,w=l.length,v=new Array(p),S;for(d=0;d<p;++d)(h=t[d])&&(v[d]=S=c.call(h,h.__data__,d,t)+"",g.has(S)?a[d]=h:g.set(S,h));for(d=0;d<w;++d)S=c.call(n,l[d],d,l)+"",(h=g.get(S))?(r[d]=h,h.__data__=l[d],g.delete(S)):e[d]=new Qd(n,l[d]);for(d=0;d<p;++d)(h=t[d])&&g.get(v[d])===h&&(a[d]=h)}function PD(n){return n.__data__}function qD(n,t){if(!arguments.length)return Array.from(this,PD);var e=t?_D:UD,r=this._parents,a=this._groups;typeof n!="function"&&(n=LD(n));for(var l=a.length,c=new Array(l),d=new Array(l),h=new Array(l),g=0;g<l;++g){var p=r[g],w=a[g],v=w.length,S=JD(n.call(p,p&&p.__data__,g,r)),A=S.length,T=d[g]=new Array(A),k=c[g]=new Array(A),D=h[g]=new Array(v);e(p,w,T,k,D,S,t);for(var L=0,N=0,O,B;L<A;++L)if(O=T[L]){for(L>=N&&(N=L+1);!(B=k[N])&&++N<A;);O._next=B||null}}return c=new wn(c,r),c._enter=d,c._exit=h,c}function JD(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function $D(){return new wn(this._exit||this._groups.map(cT),this._parents)}function HD(n,t,e){var r=this.enter(),a=this,l=this.exit();return typeof n=="function"?(r=n(r),r&&(r=r.selection())):r=r.append(n+""),t!=null&&(a=t(a),a&&(a=a.selection())),e==null?l.remove():e(l),r&&a?r.merge(a).order():a}function VD(n){for(var t=n.selection?n.selection():n,e=this._groups,r=t._groups,a=e.length,l=r.length,c=Math.min(a,l),d=new Array(a),h=0;h<c;++h)for(var g=e[h],p=r[h],w=g.length,v=d[h]=new Array(w),S,A=0;A<w;++A)(S=g[A]||p[A])&&(v[A]=S);for(;h<a;++h)d[h]=e[h];return new wn(d,this._parents)}function jD(){for(var n=this._groups,t=-1,e=n.length;++t<e;)for(var r=n[t],a=r.length-1,l=r[a],c;--a>=0;)(c=r[a])&&(l&&c.compareDocumentPosition(l)^4&&l.parentNode.insertBefore(c,l),l=c);return this}function KD(n){n||(n=YD);function t(w,v){return w&&v?n(w.__data__,v.__data__):!w-!v}for(var e=this._groups,r=e.length,a=new Array(r),l=0;l<r;++l){for(var c=e[l],d=c.length,h=a[l]=new Array(d),g,p=0;p<d;++p)(g=c[p])&&(h[p]=g);h.sort(t)}return new wn(a,this._parents).order()}function YD(n,t){return n<t?-1:n>t?1:n>=t?0:NaN}function GD(){var n=arguments[0];return arguments[0]=this,n.apply(null,arguments),this}function FD(){return Array.from(this)}function XD(){for(var n=this._groups,t=0,e=n.length;t<e;++t)for(var r=n[t],a=0,l=r.length;a<l;++a){var c=r[a];if(c)return c}return null}function ZD(){let n=0;for(const t of this)++n;return n}function QD(){return!this.node()}function WD(n){for(var t=this._groups,e=0,r=t.length;e<r;++e)for(var a=t[e],l=0,c=a.length,d;l<c;++l)(d=a[l])&&n.call(d,d.__data__,l,a);return this}function t3(n){return function(){this.removeAttribute(n)}}function e3(n){return function(){this.removeAttributeNS(n.space,n.local)}}function n3(n,t){return function(){this.setAttribute(n,t)}}function r3(n,t){return function(){this.setAttributeNS(n.space,n.local,t)}}function i3(n,t){return function(){var e=t.apply(this,arguments);e==null?this.removeAttribute(n):this.setAttribute(n,e)}}function s3(n,t){return function(){var e=t.apply(this,arguments);e==null?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,e)}}function a3(n,t){var e=Sh(n);if(arguments.length<2){var r=this.node();return e.local?r.getAttributeNS(e.space,e.local):r.getAttribute(e)}return this.each((t==null?e.local?e3:t3:typeof t=="function"?e.local?s3:i3:e.local?r3:n3)(e,t))}function fT(n){return n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView}function o3(n){return function(){this.style.removeProperty(n)}}function l3(n,t,e){return function(){this.style.setProperty(n,t,e)}}function u3(n,t,e){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(n):this.style.setProperty(n,r,e)}}function c3(n,t,e){return arguments.length>1?this.each((t==null?o3:typeof t=="function"?u3:l3)(n,t,e??"")):El(this.node(),n)}function El(n,t){return n.style.getPropertyValue(t)||fT(n).getComputedStyle(n,null).getPropertyValue(t)}function f3(n){return function(){delete this[n]}}function d3(n,t){return function(){this[n]=t}}function h3(n,t){return function(){var e=t.apply(this,arguments);e==null?delete this[n]:this[n]=e}}function g3(n,t){return arguments.length>1?this.each((t==null?f3:typeof t=="function"?h3:d3)(n,t)):this.node()[n]}function dT(n){return n.trim().split(/^|\s+/)}function jp(n){return n.classList||new hT(n)}function hT(n){this._node=n,this._names=dT(n.getAttribute("class")||"")}hT.prototype={add:function(n){var t=this._names.indexOf(n);t<0&&(this._names.push(n),this._node.setAttribute("class",this._names.join(" ")))},remove:function(n){var t=this._names.indexOf(n);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(n){return this._names.indexOf(n)>=0}};function gT(n,t){for(var e=jp(n),r=-1,a=t.length;++r<a;)e.add(t[r])}function mT(n,t){for(var e=jp(n),r=-1,a=t.length;++r<a;)e.remove(t[r])}function m3(n){return function(){gT(this,n)}}function y3(n){return function(){mT(this,n)}}function p3(n,t){return function(){(t.apply(this,arguments)?gT:mT)(this,n)}}function v3(n,t){var e=dT(n+"");if(arguments.length<2){for(var r=jp(this.node()),a=-1,l=e.length;++a<l;)if(!r.contains(e[a]))return!1;return!0}return this.each((typeof t=="function"?p3:t?m3:y3)(e,t))}function w3(){this.textContent=""}function S3(n){return function(){this.textContent=n}}function b3(n){return function(){var t=n.apply(this,arguments);this.textContent=t??""}}function x3(n){return arguments.length?this.each(n==null?w3:(typeof n=="function"?b3:S3)(n)):this.node().textContent}function T3(){this.innerHTML=""}function A3(n){return function(){this.innerHTML=n}}function E3(n){return function(){var t=n.apply(this,arguments);this.innerHTML=t??""}}function N3(n){return arguments.length?this.each(n==null?T3:(typeof n=="function"?E3:A3)(n)):this.node().innerHTML}function k3(){this.nextSibling&&this.parentNode.appendChild(this)}function C3(){return this.each(k3)}function D3(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function I3(){return this.each(D3)}function O3(n){var t=typeof n=="function"?n:aT(n);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function M3(){return null}function R3(n,t){var e=typeof n=="function"?n:aT(n),r=t==null?M3:typeof t=="function"?t:Vp(t);return this.select(function(){return this.insertBefore(e.apply(this,arguments),r.apply(this,arguments)||null)})}function B3(){var n=this.parentNode;n&&n.removeChild(this)}function z3(){return this.each(B3)}function L3(){var n=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(n,this.nextSibling):n}function U3(){var n=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(n,this.nextSibling):n}function _3(n){return this.select(n?U3:L3)}function P3(n){return arguments.length?this.property("__data__",n):this.node().__data__}function q3(n){return function(t){n.call(this,t,this.__data__)}}function J3(n){return n.trim().split(/^|\s+/).map(function(t){var e="",r=t.indexOf(".");return r>=0&&(e=t.slice(r+1),t=t.slice(0,r)),{type:t,name:e}})}function $3(n){return function(){var t=this.__on;if(t){for(var e=0,r=-1,a=t.length,l;e<a;++e)l=t[e],(!n.type||l.type===n.type)&&l.name===n.name?this.removeEventListener(l.type,l.listener,l.options):t[++r]=l;++r?t.length=r:delete this.__on}}}function H3(n,t,e){return function(){var r=this.__on,a,l=q3(t);if(r){for(var c=0,d=r.length;c<d;++c)if((a=r[c]).type===n.type&&a.name===n.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=l,a.options=e),a.value=t;return}}this.addEventListener(n.type,l,e),a={type:n.type,name:n.name,value:t,listener:l,options:e},r?r.push(a):this.__on=[a]}}function V3(n,t,e){var r=J3(n+""),a,l=r.length,c;if(arguments.length<2){var d=this.node().__on;if(d){for(var h=0,g=d.length,p;h<g;++h)for(a=0,p=d[h];a<l;++a)if((c=r[a]).type===p.type&&c.name===p.name)return p.value}return}for(d=t?H3:$3,a=0;a<l;++a)this.each(d(r[a],t,e));return this}function yT(n,t,e){var r=fT(n),a=r.CustomEvent;typeof a=="function"?a=new a(t,e):(a=r.document.createEvent("Event"),e?(a.initEvent(t,e.bubbles,e.cancelable),a.detail=e.detail):a.initEvent(t,!1,!1)),n.dispatchEvent(a)}function j3(n,t){return function(){return yT(this,n,t)}}function K3(n,t){return function(){return yT(this,n,t.apply(this,arguments))}}function Y3(n,t){return this.each((typeof t=="function"?K3:j3)(n,t))}function*G3(){for(var n=this._groups,t=0,e=n.length;t<e;++t)for(var r=n[t],a=0,l=r.length,c;a<l;++a)(c=r[a])&&(yield c)}var pT=[null];function wn(n,t){this._groups=n,this._parents=t}function kc(){return new wn([[document.documentElement]],pT)}function F3(){return this}wn.prototype=kc.prototype={constructor:wn,select:bD,selectAll:ED,selectChild:DD,selectChildren:RD,filter:BD,data:qD,enter:zD,exit:$D,join:HD,merge:VD,selection:F3,order:jD,sort:KD,call:GD,nodes:FD,node:XD,size:ZD,empty:QD,each:WD,attr:a3,style:c3,property:g3,classed:v3,text:x3,html:N3,raise:C3,lower:I3,append:O3,insert:R3,remove:z3,clone:_3,datum:P3,on:V3,dispatch:Y3,[Symbol.iterator]:G3};function gn(n){return typeof n=="string"?new wn([[document.querySelector(n)]],[document.documentElement]):new wn([[n]],pT)}function X3(n){let t;for(;t=n.sourceEvent;)n=t;return n}function Qn(n,t){if(n=X3(n),t===void 0&&(t=n.currentTarget),t){var e=t.ownerSVGElement||t;if(e.createSVGPoint){var r=e.createSVGPoint();return r.x=n.clientX,r.y=n.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var a=t.getBoundingClientRect();return[n.clientX-a.left-t.clientLeft,n.clientY-a.top-t.clientTop]}}return[n.pageX,n.pageY]}const Z3={passive:!1},hc={capture:!0,passive:!1};function iy(n){n.stopImmediatePropagation()}function cl(n){n.preventDefault(),n.stopImmediatePropagation()}function vT(n){var t=n.document.documentElement,e=gn(n).on("dragstart.drag",cl,hc);"onselectstart"in t?e.on("selectstart.drag",cl,hc):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function wT(n,t){var e=n.document.documentElement,r=gn(n).on("dragstart.drag",null);t&&(r.on("click.drag",cl,hc),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in e?r.on("selectstart.drag",null):(e.style.MozUserSelect=e.__noselect,delete e.__noselect)}const id=n=>()=>n;function fp(n,{sourceEvent:t,subject:e,target:r,identifier:a,active:l,x:c,y:d,dx:h,dy:g,dispatch:p}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:e,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:a,enumerable:!0,configurable:!0},active:{value:l,enumerable:!0,configurable:!0},x:{value:c,enumerable:!0,configurable:!0},y:{value:d,enumerable:!0,configurable:!0},dx:{value:h,enumerable:!0,configurable:!0},dy:{value:g,enumerable:!0,configurable:!0},_:{value:p}})}fp.prototype.on=function(){var n=this._.on.apply(this._,arguments);return n===this._?this:n};function Q3(n){return!n.ctrlKey&&!n.button}function W3(){return this.parentNode}function tI(n,t){return t??{x:n.x,y:n.y}}function eI(){return navigator.maxTouchPoints||"ontouchstart"in this}function ST(){var n=Q3,t=W3,e=tI,r=eI,a={},l=wh("start","drag","end"),c=0,d,h,g,p,w=0;function v(O){O.on("mousedown.drag",S).filter(r).on("touchstart.drag",k).on("touchmove.drag",D,Z3).on("touchend.drag touchcancel.drag",L).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function S(O,B){if(!(p||!n.call(this,O,B))){var U=N(this,t.call(this,O,B),O,B,"mouse");U&&(gn(O.view).on("mousemove.drag",A,hc).on("mouseup.drag",T,hc),vT(O.view),iy(O),g=!1,d=O.clientX,h=O.clientY,U("start",O))}}function A(O){if(cl(O),!g){var B=O.clientX-d,U=O.clientY-h;g=B*B+U*U>w}a.mouse("drag",O)}function T(O){gn(O.view).on("mousemove.drag mouseup.drag",null),wT(O.view,g),cl(O),a.mouse("end",O)}function k(O,B){if(n.call(this,O,B)){var U=O.changedTouches,J=t.call(this,O,B),j=U.length,W,ft;for(W=0;W<j;++W)(ft=N(this,J,O,B,U[W].identifier,U[W]))&&(iy(O),ft("start",O,U[W]))}}function D(O){var B=O.changedTouches,U=B.length,J,j;for(J=0;J<U;++J)(j=a[B[J].identifier])&&(cl(O),j("drag",O,B[J]))}function L(O){var B=O.changedTouches,U=B.length,J,j;for(p&&clearTimeout(p),p=setTimeout(function(){p=null},500),J=0;J<U;++J)(j=a[B[J].identifier])&&(iy(O),j("end",O,B[J]))}function N(O,B,U,J,j,W){var ft=l.copy(),nt=Qn(W||U,B),rt,ot,M;if((M=e.call(O,new fp("beforestart",{sourceEvent:U,target:v,identifier:j,active:c,x:nt[0],y:nt[1],dx:0,dy:0,dispatch:ft}),J))!=null)return rt=M.x-nt[0]||0,ot=M.y-nt[1]||0,function K(I,z,Y){var $=nt,C;switch(I){case"start":a[j]=K,C=c++;break;case"end":delete a[j],--c;case"drag":nt=Qn(Y||z,B),C=c;break}ft.call(I,O,new fp(I,{sourceEvent:z,subject:M,target:v,identifier:j,active:C,x:nt[0]+rt,y:nt[1]+ot,dx:nt[0]-$[0],dy:nt[1]-$[1],dispatch:ft}),J)}}return v.filter=function(O){return arguments.length?(n=typeof O=="function"?O:id(!!O),v):n},v.container=function(O){return arguments.length?(t=typeof O=="function"?O:id(O),v):t},v.subject=function(O){return arguments.length?(e=typeof O=="function"?O:id(O),v):e},v.touchable=function(O){return arguments.length?(r=typeof O=="function"?O:id(!!O),v):r},v.on=function(){var O=l.on.apply(l,arguments);return O===l?v:O},v.clickDistance=function(O){return arguments.length?(w=(O=+O)*O,v):Math.sqrt(w)},v}function Kp(n,t,e){n.prototype=t.prototype=e,e.constructor=n}function bT(n,t){var e=Object.create(n.prototype);for(var r in t)e[r]=t[r];return e}function Cc(){}var gc=.7,Wd=1/gc,fl="\\s*([+-]?\\d+)\\s*",mc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Nr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",nI=/^#([0-9a-f]{3,8})$/,rI=new RegExp(`^rgb\\(${fl},${fl},${fl}\\)$`),iI=new RegExp(`^rgb\\(${Nr},${Nr},${Nr}\\)$`),sI=new RegExp(`^rgba\\(${fl},${fl},${fl},${mc}\\)$`),aI=new RegExp(`^rgba\\(${Nr},${Nr},${Nr},${mc}\\)$`),oI=new RegExp(`^hsl\\(${mc},${Nr},${Nr}\\)$`),lI=new RegExp(`^hsla\\(${mc},${Nr},${Nr},${mc}\\)$`),jb={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Kp(Cc,oo,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:Kb,formatHex:Kb,formatHex8:uI,formatHsl:cI,formatRgb:Yb,toString:Yb});function Kb(){return this.rgb().formatHex()}function uI(){return this.rgb().formatHex8()}function cI(){return xT(this).formatHsl()}function Yb(){return this.rgb().formatRgb()}function oo(n){var t,e;return n=(n+"").trim().toLowerCase(),(t=nI.exec(n))?(e=t[1].length,t=parseInt(t[1],16),e===6?Gb(t):e===3?new rn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):e===8?sd(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):e===4?sd(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=rI.exec(n))?new rn(t[1],t[2],t[3],1):(t=iI.exec(n))?new rn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=sI.exec(n))?sd(t[1],t[2],t[3],t[4]):(t=aI.exec(n))?sd(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=oI.exec(n))?Zb(t[1],t[2]/100,t[3]/100,1):(t=lI.exec(n))?Zb(t[1],t[2]/100,t[3]/100,t[4]):jb.hasOwnProperty(n)?Gb(jb[n]):n==="transparent"?new rn(NaN,NaN,NaN,0):null}function Gb(n){return new rn(n>>16&255,n>>8&255,n&255,1)}function sd(n,t,e,r){return r<=0&&(n=t=e=NaN),new rn(n,t,e,r)}function fI(n){return n instanceof Cc||(n=oo(n)),n?(n=n.rgb(),new rn(n.r,n.g,n.b,n.opacity)):new rn}function dp(n,t,e,r){return arguments.length===1?fI(n):new rn(n,t,e,r??1)}function rn(n,t,e,r){this.r=+n,this.g=+t,this.b=+e,this.opacity=+r}Kp(rn,dp,bT(Cc,{brighter(n){return n=n==null?Wd:Math.pow(Wd,n),new rn(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?gc:Math.pow(gc,n),new rn(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new rn(eo(this.r),eo(this.g),eo(this.b),th(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Fb,formatHex:Fb,formatHex8:dI,formatRgb:Xb,toString:Xb}));function Fb(){return`#${to(this.r)}${to(this.g)}${to(this.b)}`}function dI(){return`#${to(this.r)}${to(this.g)}${to(this.b)}${to((isNaN(this.opacity)?1:this.opacity)*255)}`}function Xb(){const n=th(this.opacity);return`${n===1?"rgb(":"rgba("}${eo(this.r)}, ${eo(this.g)}, ${eo(this.b)}${n===1?")":`, ${n})`}`}function th(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function eo(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function to(n){return n=eo(n),(n<16?"0":"")+n.toString(16)}function Zb(n,t,e,r){return r<=0?n=t=e=NaN:e<=0||e>=1?n=t=NaN:t<=0&&(n=NaN),new Wn(n,t,e,r)}function xT(n){if(n instanceof Wn)return new Wn(n.h,n.s,n.l,n.opacity);if(n instanceof Cc||(n=oo(n)),!n)return new Wn;if(n instanceof Wn)return n;n=n.rgb();var t=n.r/255,e=n.g/255,r=n.b/255,a=Math.min(t,e,r),l=Math.max(t,e,r),c=NaN,d=l-a,h=(l+a)/2;return d?(t===l?c=(e-r)/d+(e<r)*6:e===l?c=(r-t)/d+2:c=(t-e)/d+4,d/=h<.5?l+a:2-l-a,c*=60):d=h>0&&h<1?0:c,new Wn(c,d,h,n.opacity)}function hI(n,t,e,r){return arguments.length===1?xT(n):new Wn(n,t,e,r??1)}function Wn(n,t,e,r){this.h=+n,this.s=+t,this.l=+e,this.opacity=+r}Kp(Wn,hI,bT(Cc,{brighter(n){return n=n==null?Wd:Math.pow(Wd,n),new Wn(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?gc:Math.pow(gc,n),new Wn(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,t=isNaN(n)||isNaN(this.s)?0:this.s,e=this.l,r=e+(e<.5?e:1-e)*t,a=2*e-r;return new rn(sy(n>=240?n-240:n+120,a,r),sy(n,a,r),sy(n<120?n+240:n-120,a,r),this.opacity)},clamp(){return new Wn(Qb(this.h),ad(this.s),ad(this.l),th(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=th(this.opacity);return`${n===1?"hsl(":"hsla("}${Qb(this.h)}, ${ad(this.s)*100}%, ${ad(this.l)*100}%${n===1?")":`, ${n})`}`}}));function Qb(n){return n=(n||0)%360,n<0?n+360:n}function ad(n){return Math.max(0,Math.min(1,n||0))}function sy(n,t,e){return(n<60?t+(e-t)*n/60:n<180?e:n<240?t+(e-t)*(240-n)/60:t)*255}const Yp=n=>()=>n;function gI(n,t){return function(e){return n+e*t}}function mI(n,t,e){return n=Math.pow(n,e),t=Math.pow(t,e)-n,e=1/e,function(r){return Math.pow(n+r*t,e)}}function yI(n){return(n=+n)==1?TT:function(t,e){return e-t?mI(t,e,n):Yp(isNaN(t)?e:t)}}function TT(n,t){var e=t-n;return e?gI(n,e):Yp(isNaN(n)?t:n)}const eh=function n(t){var e=yI(t);function r(a,l){var c=e((a=dp(a)).r,(l=dp(l)).r),d=e(a.g,l.g),h=e(a.b,l.b),g=TT(a.opacity,l.opacity);return function(p){return a.r=c(p),a.g=d(p),a.b=h(p),a.opacity=g(p),a+""}}return r.gamma=n,r}(1);function pI(n,t){t||(t=[]);var e=n?Math.min(t.length,n.length):0,r=t.slice(),a;return function(l){for(a=0;a<e;++a)r[a]=n[a]*(1-l)+t[a]*l;return r}}function vI(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function wI(n,t){var e=t?t.length:0,r=n?Math.min(e,n.length):0,a=new Array(r),l=new Array(e),c;for(c=0;c<r;++c)a[c]=nc(n[c],t[c]);for(;c<e;++c)l[c]=t[c];return function(d){for(c=0;c<r;++c)l[c]=a[c](d);return l}}function SI(n,t){var e=new Date;return n=+n,t=+t,function(r){return e.setTime(n*(1-r)+t*r),e}}function mr(n,t){return n=+n,t=+t,function(e){return n*(1-e)+t*e}}function bI(n,t){var e={},r={},a;(n===null||typeof n!="object")&&(n={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in n?e[a]=nc(n[a],t[a]):r[a]=t[a];return function(l){for(a in e)r[a]=e[a](l);return r}}var hp=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ay=new RegExp(hp.source,"g");function xI(n){return function(){return n}}function TI(n){return function(t){return n(t)+""}}function AT(n,t){var e=hp.lastIndex=ay.lastIndex=0,r,a,l,c=-1,d=[],h=[];for(n=n+"",t=t+"";(r=hp.exec(n))&&(a=ay.exec(t));)(l=a.index)>e&&(l=t.slice(e,l),d[c]?d[c]+=l:d[++c]=l),(r=r[0])===(a=a[0])?d[c]?d[c]+=a:d[++c]=a:(d[++c]=null,h.push({i:c,x:mr(r,a)})),e=ay.lastIndex;return e<t.length&&(l=t.slice(e),d[c]?d[c]+=l:d[++c]=l),d.length<2?h[0]?TI(h[0].x):xI(t):(t=h.length,function(g){for(var p=0,w;p<t;++p)d[(w=h[p]).i]=w.x(g);return d.join("")})}function nc(n,t){var e=typeof t,r;return t==null||e==="boolean"?Yp(t):(e==="number"?mr:e==="string"?(r=oo(t))?(t=r,eh):AT:t instanceof oo?eh:t instanceof Date?SI:vI(t)?pI:Array.isArray(t)?wI:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?bI:mr)(n,t)}var Wb=180/Math.PI,gp={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function ET(n,t,e,r,a,l){var c,d,h;return(c=Math.sqrt(n*n+t*t))&&(n/=c,t/=c),(h=n*e+t*r)&&(e-=n*h,r-=t*h),(d=Math.sqrt(e*e+r*r))&&(e/=d,r/=d,h/=d),n*r<t*e&&(n=-n,t=-t,h=-h,c=-c),{translateX:a,translateY:l,rotate:Math.atan2(t,n)*Wb,skewX:Math.atan(h)*Wb,scaleX:c,scaleY:d}}var od;function AI(n){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(n+"");return t.isIdentity?gp:ET(t.a,t.b,t.c,t.d,t.e,t.f)}function EI(n){return n==null||(od||(od=document.createElementNS("http://www.w3.org/2000/svg","g")),od.setAttribute("transform",n),!(n=od.transform.baseVal.consolidate()))?gp:(n=n.matrix,ET(n.a,n.b,n.c,n.d,n.e,n.f))}function NT(n,t,e,r){function a(g){return g.length?g.pop()+" ":""}function l(g,p,w,v,S,A){if(g!==w||p!==v){var T=S.push("translate(",null,t,null,e);A.push({i:T-4,x:mr(g,w)},{i:T-2,x:mr(p,v)})}else(w||v)&&S.push("translate("+w+t+v+e)}function c(g,p,w,v){g!==p?(g-p>180?p+=360:p-g>180&&(g+=360),v.push({i:w.push(a(w)+"rotate(",null,r)-2,x:mr(g,p)})):p&&w.push(a(w)+"rotate("+p+r)}function d(g,p,w,v){g!==p?v.push({i:w.push(a(w)+"skewX(",null,r)-2,x:mr(g,p)}):p&&w.push(a(w)+"skewX("+p+r)}function h(g,p,w,v,S,A){if(g!==w||p!==v){var T=S.push(a(S)+"scale(",null,",",null,")");A.push({i:T-4,x:mr(g,w)},{i:T-2,x:mr(p,v)})}else(w!==1||v!==1)&&S.push(a(S)+"scale("+w+","+v+")")}return function(g,p){var w=[],v=[];return g=n(g),p=n(p),l(g.translateX,g.translateY,p.translateX,p.translateY,w,v),c(g.rotate,p.rotate,w,v),d(g.skewX,p.skewX,w,v),h(g.scaleX,g.scaleY,p.scaleX,p.scaleY,w,v),g=p=null,function(S){for(var A=-1,T=v.length,k;++A<T;)w[(k=v[A]).i]=k.x(S);return w.join("")}}}var NI=NT(AI,"px, ","px)","deg)"),kI=NT(EI,", ",")",")"),CI=1e-12;function t1(n){return((n=Math.exp(n))+1/n)/2}function DI(n){return((n=Math.exp(n))-1/n)/2}function II(n){return((n=Math.exp(2*n))-1)/(n+1)}const Sd=function n(t,e,r){function a(l,c){var d=l[0],h=l[1],g=l[2],p=c[0],w=c[1],v=c[2],S=p-d,A=w-h,T=S*S+A*A,k,D;if(T<CI)D=Math.log(v/g)/t,k=function(J){return[d+J*S,h+J*A,g*Math.exp(t*J*D)]};else{var L=Math.sqrt(T),N=(v*v-g*g+r*T)/(2*g*e*L),O=(v*v-g*g-r*T)/(2*v*e*L),B=Math.log(Math.sqrt(N*N+1)-N),U=Math.log(Math.sqrt(O*O+1)-O);D=(U-B)/t,k=function(J){var j=J*D,W=t1(B),ft=g/(e*L)*(W*II(t*j+B)-DI(B));return[d+ft*S,h+ft*A,g*W/t1(t*j+B)]}}return k.duration=D*1e3*t/Math.SQRT2,k}return a.rho=function(l){var c=Math.max(.001,+l),d=c*c,h=d*d;return n(c,d,h)},a}(Math.SQRT2,2,4);var Nl=0,Yu=0,$u=0,kT=1e3,nh,Gu,rh=0,lo=0,bh=0,yc=typeof performance=="object"&&performance.now?performance:Date,CT=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function Gp(){return lo||(CT(OI),lo=yc.now()+bh)}function OI(){lo=0}function ih(){this._call=this._time=this._next=null}ih.prototype=DT.prototype={constructor:ih,restart:function(n,t,e){if(typeof n!="function")throw new TypeError("callback is not a function");e=(e==null?Gp():+e)+(t==null?0:+t),!this._next&&Gu!==this&&(Gu?Gu._next=this:nh=this,Gu=this),this._call=n,this._time=e,mp()},stop:function(){this._call&&(this._call=null,this._time=1/0,mp())}};function DT(n,t,e){var r=new ih;return r.restart(n,t,e),r}function MI(){Gp(),++Nl;for(var n=nh,t;n;)(t=lo-n._time)>=0&&n._call.call(void 0,t),n=n._next;--Nl}function e1(){lo=(rh=yc.now())+bh,Nl=Yu=0;try{MI()}finally{Nl=0,BI(),lo=0}}function RI(){var n=yc.now(),t=n-rh;t>kT&&(bh-=t,rh=n)}function BI(){for(var n,t=nh,e,r=1/0;t;)t._call?(r>t._time&&(r=t._time),n=t,t=t._next):(e=t._next,t._next=null,t=n?n._next=e:nh=e);Gu=n,mp(r)}function mp(n){if(!Nl){Yu&&(Yu=clearTimeout(Yu));var t=n-lo;t>24?(n<1/0&&(Yu=setTimeout(e1,n-yc.now()-bh)),$u&&($u=clearInterval($u))):($u||(rh=yc.now(),$u=setInterval(RI,kT)),Nl=1,CT(e1))}}function n1(n,t,e){var r=new ih;return t=t==null?0:+t,r.restart(a=>{r.stop(),n(a+t)},t,e),r}var zI=wh("start","end","cancel","interrupt"),LI=[],IT=0,r1=1,yp=2,bd=3,i1=4,pp=5,xd=6;function xh(n,t,e,r,a,l){var c=n.__transition;if(!c)n.__transition={};else if(e in c)return;UI(n,e,{name:t,index:r,group:a,on:zI,tween:LI,time:l.time,delay:l.delay,duration:l.duration,ease:l.ease,timer:null,state:IT})}function Fp(n,t){var e=ar(n,t);if(e.state>IT)throw new Error("too late; already scheduled");return e}function Or(n,t){var e=ar(n,t);if(e.state>bd)throw new Error("too late; already running");return e}function ar(n,t){var e=n.__transition;if(!e||!(e=e[t]))throw new Error("transition not found");return e}function UI(n,t,e){var r=n.__transition,a;r[t]=e,e.timer=DT(l,0,e.time);function l(g){e.state=r1,e.timer.restart(c,e.delay,e.time),e.delay<=g&&c(g-e.delay)}function c(g){var p,w,v,S;if(e.state!==r1)return h();for(p in r)if(S=r[p],S.name===e.name){if(S.state===bd)return n1(c);S.state===i1?(S.state=xd,S.timer.stop(),S.on.call("interrupt",n,n.__data__,S.index,S.group),delete r[p]):+p<t&&(S.state=xd,S.timer.stop(),S.on.call("cancel",n,n.__data__,S.index,S.group),delete r[p])}if(n1(function(){e.state===bd&&(e.state=i1,e.timer.restart(d,e.delay,e.time),d(g))}),e.state=yp,e.on.call("start",n,n.__data__,e.index,e.group),e.state===yp){for(e.state=bd,a=new Array(v=e.tween.length),p=0,w=-1;p<v;++p)(S=e.tween[p].value.call(n,n.__data__,e.index,e.group))&&(a[++w]=S);a.length=w+1}}function d(g){for(var p=g<e.duration?e.ease.call(null,g/e.duration):(e.timer.restart(h),e.state=pp,1),w=-1,v=a.length;++w<v;)a[w].call(n,p);e.state===pp&&(e.on.call("end",n,n.__data__,e.index,e.group),h())}function h(){e.state=xd,e.timer.stop(),delete r[t];for(var g in r)return;delete n.__transition}}function Td(n,t){var e=n.__transition,r,a,l=!0,c;if(e){t=t==null?null:t+"";for(c in e){if((r=e[c]).name!==t){l=!1;continue}a=r.state>yp&&r.state<pp,r.state=xd,r.timer.stop(),r.on.call(a?"interrupt":"cancel",n,n.__data__,r.index,r.group),delete e[c]}l&&delete n.__transition}}function _I(n){return this.each(function(){Td(this,n)})}function PI(n,t){var e,r;return function(){var a=Or(this,n),l=a.tween;if(l!==e){r=e=l;for(var c=0,d=r.length;c<d;++c)if(r[c].name===t){r=r.slice(),r.splice(c,1);break}}a.tween=r}}function qI(n,t,e){var r,a;if(typeof e!="function")throw new Error;return function(){var l=Or(this,n),c=l.tween;if(c!==r){a=(r=c).slice();for(var d={name:t,value:e},h=0,g=a.length;h<g;++h)if(a[h].name===t){a[h]=d;break}h===g&&a.push(d)}l.tween=a}}function JI(n,t){var e=this._id;if(n+="",arguments.length<2){for(var r=ar(this.node(),e).tween,a=0,l=r.length,c;a<l;++a)if((c=r[a]).name===n)return c.value;return null}return this.each((t==null?PI:qI)(e,n,t))}function Xp(n,t,e){var r=n._id;return n.each(function(){var a=Or(this,r);(a.value||(a.value={}))[t]=e.apply(this,arguments)}),function(a){return ar(a,r).value[t]}}function OT(n,t){var e;return(typeof t=="number"?mr:t instanceof oo?eh:(e=oo(t))?(t=e,eh):AT)(n,t)}function $I(n){return function(){this.removeAttribute(n)}}function HI(n){return function(){this.removeAttributeNS(n.space,n.local)}}function VI(n,t,e){var r,a=e+"",l;return function(){var c=this.getAttribute(n);return c===a?null:c===r?l:l=t(r=c,e)}}function jI(n,t,e){var r,a=e+"",l;return function(){var c=this.getAttributeNS(n.space,n.local);return c===a?null:c===r?l:l=t(r=c,e)}}function KI(n,t,e){var r,a,l;return function(){var c,d=e(this),h;return d==null?void this.removeAttribute(n):(c=this.getAttribute(n),h=d+"",c===h?null:c===r&&h===a?l:(a=h,l=t(r=c,d)))}}function YI(n,t,e){var r,a,l;return function(){var c,d=e(this),h;return d==null?void this.removeAttributeNS(n.space,n.local):(c=this.getAttributeNS(n.space,n.local),h=d+"",c===h?null:c===r&&h===a?l:(a=h,l=t(r=c,d)))}}function GI(n,t){var e=Sh(n),r=e==="transform"?kI:OT;return this.attrTween(n,typeof t=="function"?(e.local?YI:KI)(e,r,Xp(this,"attr."+n,t)):t==null?(e.local?HI:$I)(e):(e.local?jI:VI)(e,r,t))}function FI(n,t){return function(e){this.setAttribute(n,t.call(this,e))}}function XI(n,t){return function(e){this.setAttributeNS(n.space,n.local,t.call(this,e))}}function ZI(n,t){var e,r;function a(){var l=t.apply(this,arguments);return l!==r&&(e=(r=l)&&XI(n,l)),e}return a._value=t,a}function QI(n,t){var e,r;function a(){var l=t.apply(this,arguments);return l!==r&&(e=(r=l)&&FI(n,l)),e}return a._value=t,a}function WI(n,t){var e="attr."+n;if(arguments.length<2)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;var r=Sh(n);return this.tween(e,(r.local?ZI:QI)(r,t))}function tO(n,t){return function(){Fp(this,n).delay=+t.apply(this,arguments)}}function eO(n,t){return t=+t,function(){Fp(this,n).delay=t}}function nO(n){var t=this._id;return arguments.length?this.each((typeof n=="function"?tO:eO)(t,n)):ar(this.node(),t).delay}function rO(n,t){return function(){Or(this,n).duration=+t.apply(this,arguments)}}function iO(n,t){return t=+t,function(){Or(this,n).duration=t}}function sO(n){var t=this._id;return arguments.length?this.each((typeof n=="function"?rO:iO)(t,n)):ar(this.node(),t).duration}function aO(n,t){if(typeof t!="function")throw new Error;return function(){Or(this,n).ease=t}}function oO(n){var t=this._id;return arguments.length?this.each(aO(t,n)):ar(this.node(),t).ease}function lO(n,t){return function(){var e=t.apply(this,arguments);if(typeof e!="function")throw new Error;Or(this,n).ease=e}}function uO(n){if(typeof n!="function")throw new Error;return this.each(lO(this._id,n))}function cO(n){typeof n!="function"&&(n=lT(n));for(var t=this._groups,e=t.length,r=new Array(e),a=0;a<e;++a)for(var l=t[a],c=l.length,d=r[a]=[],h,g=0;g<c;++g)(h=l[g])&&n.call(h,h.__data__,g,l)&&d.push(h);return new Bs(r,this._parents,this._name,this._id)}function fO(n){if(n._id!==this._id)throw new Error;for(var t=this._groups,e=n._groups,r=t.length,a=e.length,l=Math.min(r,a),c=new Array(r),d=0;d<l;++d)for(var h=t[d],g=e[d],p=h.length,w=c[d]=new Array(p),v,S=0;S<p;++S)(v=h[S]||g[S])&&(w[S]=v);for(;d<r;++d)c[d]=t[d];return new Bs(c,this._parents,this._name,this._id)}function dO(n){return(n+"").trim().split(/^|\s+/).every(function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||t==="start"})}function hO(n,t,e){var r,a,l=dO(t)?Fp:Or;return function(){var c=l(this,n),d=c.on;d!==r&&(a=(r=d).copy()).on(t,e),c.on=a}}function gO(n,t){var e=this._id;return arguments.length<2?ar(this.node(),e).on.on(n):this.each(hO(e,n,t))}function mO(n){return function(){var t=this.parentNode;for(var e in this.__transition)if(+e!==n)return;t&&t.removeChild(this)}}function yO(){return this.on("end.remove",mO(this._id))}function pO(n){var t=this._name,e=this._id;typeof n!="function"&&(n=Vp(n));for(var r=this._groups,a=r.length,l=new Array(a),c=0;c<a;++c)for(var d=r[c],h=d.length,g=l[c]=new Array(h),p,w,v=0;v<h;++v)(p=d[v])&&(w=n.call(p,p.__data__,v,d))&&("__data__"in p&&(w.__data__=p.__data__),g[v]=w,xh(g[v],t,e,v,g,ar(p,e)));return new Bs(l,this._parents,t,e)}function vO(n){var t=this._name,e=this._id;typeof n!="function"&&(n=oT(n));for(var r=this._groups,a=r.length,l=[],c=[],d=0;d<a;++d)for(var h=r[d],g=h.length,p,w=0;w<g;++w)if(p=h[w]){for(var v=n.call(p,p.__data__,w,h),S,A=ar(p,e),T=0,k=v.length;T<k;++T)(S=v[T])&&xh(S,t,e,T,v,A);l.push(v),c.push(p)}return new Bs(l,c,t,e)}var wO=kc.prototype.constructor;function SO(){return new wO(this._groups,this._parents)}function bO(n,t){var e,r,a;return function(){var l=El(this,n),c=(this.style.removeProperty(n),El(this,n));return l===c?null:l===e&&c===r?a:a=t(e=l,r=c)}}function MT(n){return function(){this.style.removeProperty(n)}}function xO(n,t,e){var r,a=e+"",l;return function(){var c=El(this,n);return c===a?null:c===r?l:l=t(r=c,e)}}function TO(n,t,e){var r,a,l;return function(){var c=El(this,n),d=e(this),h=d+"";return d==null&&(h=d=(this.style.removeProperty(n),El(this,n))),c===h?null:c===r&&h===a?l:(a=h,l=t(r=c,d))}}function AO(n,t){var e,r,a,l="style."+t,c="end."+l,d;return function(){var h=Or(this,n),g=h.on,p=h.value[l]==null?d||(d=MT(t)):void 0;(g!==e||a!==p)&&(r=(e=g).copy()).on(c,a=p),h.on=r}}function EO(n,t,e){var r=(n+="")=="transform"?NI:OT;return t==null?this.styleTween(n,bO(n,r)).on("end.style."+n,MT(n)):typeof t=="function"?this.styleTween(n,TO(n,r,Xp(this,"style."+n,t))).each(AO(this._id,n)):this.styleTween(n,xO(n,r,t),e).on("end.style."+n,null)}function NO(n,t,e){return function(r){this.style.setProperty(n,t.call(this,r),e)}}function kO(n,t,e){var r,a;function l(){var c=t.apply(this,arguments);return c!==a&&(r=(a=c)&&NO(n,c,e)),r}return l._value=t,l}function CO(n,t,e){var r="style."+(n+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,kO(n,t,e??""))}function DO(n){return function(){this.textContent=n}}function IO(n){return function(){var t=n(this);this.textContent=t??""}}function OO(n){return this.tween("text",typeof n=="function"?IO(Xp(this,"text",n)):DO(n==null?"":n+""))}function MO(n){return function(t){this.textContent=n.call(this,t)}}function RO(n){var t,e;function r(){var a=n.apply(this,arguments);return a!==e&&(t=(e=a)&&MO(a)),t}return r._value=n,r}function BO(n){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(n==null)return this.tween(t,null);if(typeof n!="function")throw new Error;return this.tween(t,RO(n))}function zO(){for(var n=this._name,t=this._id,e=RT(),r=this._groups,a=r.length,l=0;l<a;++l)for(var c=r[l],d=c.length,h,g=0;g<d;++g)if(h=c[g]){var p=ar(h,t);xh(h,n,e,g,c,{time:p.time+p.delay+p.duration,delay:0,duration:p.duration,ease:p.ease})}return new Bs(r,this._parents,n,e)}function LO(){var n,t,e=this,r=e._id,a=e.size();return new Promise(function(l,c){var d={value:c},h={value:function(){--a===0&&l()}};e.each(function(){var g=Or(this,r),p=g.on;p!==n&&(t=(n=p).copy(),t._.cancel.push(d),t._.interrupt.push(d),t._.end.push(h)),g.on=t}),a===0&&l()})}var UO=0;function Bs(n,t,e,r){this._groups=n,this._parents=t,this._name=e,this._id=r}function RT(){return++UO}var Wr=kc.prototype;Bs.prototype={constructor:Bs,select:pO,selectAll:vO,selectChild:Wr.selectChild,selectChildren:Wr.selectChildren,filter:cO,merge:fO,selection:SO,transition:zO,call:Wr.call,nodes:Wr.nodes,node:Wr.node,size:Wr.size,empty:Wr.empty,each:Wr.each,on:gO,attr:GI,attrTween:WI,style:EO,styleTween:CO,text:OO,textTween:BO,remove:yO,tween:JI,delay:nO,duration:sO,ease:oO,easeVarying:uO,end:LO,[Symbol.iterator]:Wr[Symbol.iterator]};function _O(n){return((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2}var PO={time:null,delay:0,duration:250,ease:_O};function qO(n,t){for(var e;!(e=n.__transition)||!(e=e[t]);)if(!(n=n.parentNode))throw new Error(`transition ${t} not found`);return e}function JO(n){var t,e;n instanceof Bs?(t=n._id,n=n._name):(t=RT(),(e=PO).time=Gp(),n=n==null?null:n+"");for(var r=this._groups,a=r.length,l=0;l<a;++l)for(var c=r[l],d=c.length,h,g=0;g<d;++g)(h=c[g])&&xh(h,n,t,g,c,e||qO(h,t));return new Bs(r,this._parents,n,t)}kc.prototype.interrupt=_I;kc.prototype.transition=JO;const ld=n=>()=>n;function $O(n,{sourceEvent:t,target:e,transform:r,dispatch:a}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:e,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:a}})}function Ds(n,t,e){this.k=n,this.x=t,this.y=e}Ds.prototype={constructor:Ds,scale:function(n){return n===1?this:new Ds(this.k*n,this.x,this.y)},translate:function(n,t){return n===0&t===0?this:new Ds(this.k,this.x+this.k*n,this.y+this.k*t)},apply:function(n){return[n[0]*this.k+this.x,n[1]*this.k+this.y]},applyX:function(n){return n*this.k+this.x},applyY:function(n){return n*this.k+this.y},invert:function(n){return[(n[0]-this.x)/this.k,(n[1]-this.y)/this.k]},invertX:function(n){return(n-this.x)/this.k},invertY:function(n){return(n-this.y)/this.k},rescaleX:function(n){return n.copy().domain(n.range().map(this.invertX,this).map(n.invert,n))},rescaleY:function(n){return n.copy().domain(n.range().map(this.invertY,this).map(n.invert,n))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Th=new Ds(1,0,0);BT.prototype=Ds.prototype;function BT(n){for(;!n.__zoom;)if(!(n=n.parentNode))return Th;return n.__zoom}function oy(n){n.stopImmediatePropagation()}function Hu(n){n.preventDefault(),n.stopImmediatePropagation()}function HO(n){return(!n.ctrlKey||n.type==="wheel")&&!n.button}function VO(){var n=this;return n instanceof SVGElement?(n=n.ownerSVGElement||n,n.hasAttribute("viewBox")?(n=n.viewBox.baseVal,[[n.x,n.y],[n.x+n.width,n.y+n.height]]):[[0,0],[n.width.baseVal.value,n.height.baseVal.value]]):[[0,0],[n.clientWidth,n.clientHeight]]}function s1(){return this.__zoom||Th}function jO(n){return-n.deltaY*(n.deltaMode===1?.05:n.deltaMode?1:.002)*(n.ctrlKey?10:1)}function KO(){return navigator.maxTouchPoints||"ontouchstart"in this}function YO(n,t,e){var r=n.invertX(t[0][0])-e[0][0],a=n.invertX(t[1][0])-e[1][0],l=n.invertY(t[0][1])-e[0][1],c=n.invertY(t[1][1])-e[1][1];return n.translate(a>r?(r+a)/2:Math.min(0,r)||Math.max(0,a),c>l?(l+c)/2:Math.min(0,l)||Math.max(0,c))}function zT(){var n=HO,t=VO,e=YO,r=jO,a=KO,l=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],d=250,h=Sd,g=wh("start","zoom","end"),p,w,v,S=500,A=150,T=0,k=10;function D(M){M.property("__zoom",s1).on("wheel.zoom",j,{passive:!1}).on("mousedown.zoom",W).on("dblclick.zoom",ft).filter(a).on("touchstart.zoom",nt).on("touchmove.zoom",rt).on("touchend.zoom touchcancel.zoom",ot).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}D.transform=function(M,K,I,z){var Y=M.selection?M.selection():M;Y.property("__zoom",s1),M!==Y?B(M,K,I,z):Y.interrupt().each(function(){U(this,arguments).event(z).start().zoom(null,typeof K=="function"?K.apply(this,arguments):K).end()})},D.scaleBy=function(M,K,I,z){D.scaleTo(M,function(){var Y=this.__zoom.k,$=typeof K=="function"?K.apply(this,arguments):K;return Y*$},I,z)},D.scaleTo=function(M,K,I,z){D.transform(M,function(){var Y=t.apply(this,arguments),$=this.__zoom,C=I==null?O(Y):typeof I=="function"?I.apply(this,arguments):I,_=$.invert(C),Z=typeof K=="function"?K.apply(this,arguments):K;return e(N(L($,Z),C,_),Y,c)},I,z)},D.translateBy=function(M,K,I,z){D.transform(M,function(){return e(this.__zoom.translate(typeof K=="function"?K.apply(this,arguments):K,typeof I=="function"?I.apply(this,arguments):I),t.apply(this,arguments),c)},null,z)},D.translateTo=function(M,K,I,z,Y){D.transform(M,function(){var $=t.apply(this,arguments),C=this.__zoom,_=z==null?O($):typeof z=="function"?z.apply(this,arguments):z;return e(Th.translate(_[0],_[1]).scale(C.k).translate(typeof K=="function"?-K.apply(this,arguments):-K,typeof I=="function"?-I.apply(this,arguments):-I),$,c)},z,Y)};function L(M,K){return K=Math.max(l[0],Math.min(l[1],K)),K===M.k?M:new Ds(K,M.x,M.y)}function N(M,K,I){var z=K[0]-I[0]*M.k,Y=K[1]-I[1]*M.k;return z===M.x&&Y===M.y?M:new Ds(M.k,z,Y)}function O(M){return[(+M[0][0]+ +M[1][0])/2,(+M[0][1]+ +M[1][1])/2]}function B(M,K,I,z){M.on("start.zoom",function(){U(this,arguments).event(z).start()}).on("interrupt.zoom end.zoom",function(){U(this,arguments).event(z).end()}).tween("zoom",function(){var Y=this,$=arguments,C=U(Y,$).event(z),_=t.apply(Y,$),Z=I==null?O(_):typeof I=="function"?I.apply(Y,$):I,it=Math.max(_[1][0]-_[0][0],_[1][1]-_[0][1]),lt=Y.__zoom,yt=typeof K=="function"?K.apply(Y,$):K,ht=h(lt.invert(Z).concat(it/lt.k),yt.invert(Z).concat(it/yt.k));return function(vt){if(vt===1)vt=yt;else{var mt=ht(vt),bt=it/mt[2];vt=new Ds(bt,Z[0]-mt[0]*bt,Z[1]-mt[1]*bt)}C.zoom(null,vt)}})}function U(M,K,I){return!I&&M.__zooming||new J(M,K)}function J(M,K){this.that=M,this.args=K,this.active=0,this.sourceEvent=null,this.extent=t.apply(M,K),this.taps=0}J.prototype={event:function(M){return M&&(this.sourceEvent=M),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(M,K){return this.mouse&&M!=="mouse"&&(this.mouse[1]=K.invert(this.mouse[0])),this.touch0&&M!=="touch"&&(this.touch0[1]=K.invert(this.touch0[0])),this.touch1&&M!=="touch"&&(this.touch1[1]=K.invert(this.touch1[0])),this.that.__zoom=K,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(M){var K=gn(this.that).datum();g.call(M,this.that,new $O(M,{sourceEvent:this.sourceEvent,target:D,transform:this.that.__zoom,dispatch:g}),K)}};function j(M,...K){if(!n.apply(this,arguments))return;var I=U(this,K).event(M),z=this.__zoom,Y=Math.max(l[0],Math.min(l[1],z.k*Math.pow(2,r.apply(this,arguments)))),$=Qn(M);if(I.wheel)(I.mouse[0][0]!==$[0]||I.mouse[0][1]!==$[1])&&(I.mouse[1]=z.invert(I.mouse[0]=$)),clearTimeout(I.wheel);else{if(z.k===Y)return;I.mouse=[$,z.invert($)],Td(this),I.start()}Hu(M),I.wheel=setTimeout(C,A),I.zoom("mouse",e(N(L(z,Y),I.mouse[0],I.mouse[1]),I.extent,c));function C(){I.wheel=null,I.end()}}function W(M,...K){if(v||!n.apply(this,arguments))return;var I=M.currentTarget,z=U(this,K,!0).event(M),Y=gn(M.view).on("mousemove.zoom",Z,!0).on("mouseup.zoom",it,!0),$=Qn(M,I),C=M.clientX,_=M.clientY;vT(M.view),oy(M),z.mouse=[$,this.__zoom.invert($)],Td(this),z.start();function Z(lt){if(Hu(lt),!z.moved){var yt=lt.clientX-C,ht=lt.clientY-_;z.moved=yt*yt+ht*ht>T}z.event(lt).zoom("mouse",e(N(z.that.__zoom,z.mouse[0]=Qn(lt,I),z.mouse[1]),z.extent,c))}function it(lt){Y.on("mousemove.zoom mouseup.zoom",null),wT(lt.view,z.moved),Hu(lt),z.event(lt).end()}}function ft(M,...K){if(n.apply(this,arguments)){var I=this.__zoom,z=Qn(M.changedTouches?M.changedTouches[0]:M,this),Y=I.invert(z),$=I.k*(M.shiftKey?.5:2),C=e(N(L(I,$),z,Y),t.apply(this,K),c);Hu(M),d>0?gn(this).transition().duration(d).call(B,C,z,M):gn(this).call(D.transform,C,z,M)}}function nt(M,...K){if(n.apply(this,arguments)){var I=M.touches,z=I.length,Y=U(this,K,M.changedTouches.length===z).event(M),$,C,_,Z;for(oy(M),C=0;C<z;++C)_=I[C],Z=Qn(_,this),Z=[Z,this.__zoom.invert(Z),_.identifier],Y.touch0?!Y.touch1&&Y.touch0[2]!==Z[2]&&(Y.touch1=Z,Y.taps=0):(Y.touch0=Z,$=!0,Y.taps=1+!!p);p&&(p=clearTimeout(p)),$&&(Y.taps<2&&(w=Z[0],p=setTimeout(function(){p=null},S)),Td(this),Y.start())}}function rt(M,...K){if(this.__zooming){var I=U(this,K).event(M),z=M.changedTouches,Y=z.length,$,C,_,Z;for(Hu(M),$=0;$<Y;++$)C=z[$],_=Qn(C,this),I.touch0&&I.touch0[2]===C.identifier?I.touch0[0]=_:I.touch1&&I.touch1[2]===C.identifier&&(I.touch1[0]=_);if(C=I.that.__zoom,I.touch1){var it=I.touch0[0],lt=I.touch0[1],yt=I.touch1[0],ht=I.touch1[1],vt=(vt=yt[0]-it[0])*vt+(vt=yt[1]-it[1])*vt,mt=(mt=ht[0]-lt[0])*mt+(mt=ht[1]-lt[1])*mt;C=L(C,Math.sqrt(vt/mt)),_=[(it[0]+yt[0])/2,(it[1]+yt[1])/2],Z=[(lt[0]+ht[0])/2,(lt[1]+ht[1])/2]}else if(I.touch0)_=I.touch0[0],Z=I.touch0[1];else return;I.zoom("touch",e(N(C,_,Z),I.extent,c))}}function ot(M,...K){if(this.__zooming){var I=U(this,K).event(M),z=M.changedTouches,Y=z.length,$,C;for(oy(M),v&&clearTimeout(v),v=setTimeout(function(){v=null},S),$=0;$<Y;++$)C=z[$],I.touch0&&I.touch0[2]===C.identifier?delete I.touch0:I.touch1&&I.touch1[2]===C.identifier&&delete I.touch1;if(I.touch1&&!I.touch0&&(I.touch0=I.touch1,delete I.touch1),I.touch0)I.touch0[1]=this.__zoom.invert(I.touch0[0]);else if(I.end(),I.taps===2&&(C=Qn(C,this),Math.hypot(w[0]-C[0],w[1]-C[1])<k)){var _=gn(this).on("dblclick.zoom");_&&_.apply(this,arguments)}}}return D.wheelDelta=function(M){return arguments.length?(r=typeof M=="function"?M:ld(+M),D):r},D.filter=function(M){return arguments.length?(n=typeof M=="function"?M:ld(!!M),D):n},D.touchable=function(M){return arguments.length?(a=typeof M=="function"?M:ld(!!M),D):a},D.extent=function(M){return arguments.length?(t=typeof M=="function"?M:ld([[+M[0][0],+M[0][1]],[+M[1][0],+M[1][1]]]),D):t},D.scaleExtent=function(M){return arguments.length?(l[0]=+M[0],l[1]=+M[1],D):[l[0],l[1]]},D.translateExtent=function(M){return arguments.length?(c[0][0]=+M[0][0],c[1][0]=+M[1][0],c[0][1]=+M[0][1],c[1][1]=+M[1][1],D):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},D.constrain=function(M){return arguments.length?(e=M,D):e},D.duration=function(M){return arguments.length?(d=+M,D):d},D.interpolate=function(M){return arguments.length?(h=M,D):h},D.on=function(){var M=g.on.apply(g,arguments);return M===g?D:M},D.clickDistance=function(M){return arguments.length?(T=(M=+M)*M,D):Math.sqrt(T)},D.tapDistance=function(M){return arguments.length?(k=+M,D):k},D}const Ir={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:n=>`Node type "${n}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:n=>`The old edge with id=${n} does not exist.`,error009:n=>`Marker type "${n}" doesn't exist.`,error008:(n,{id:t,sourceHandle:e,targetHandle:r})=>`Couldn't create edge for ${n} handle id: "${n==="source"?e:r}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:n=>`Edge type "${n}" not found. Using fallback type "default".`,error012:n=>`Node with id "${n}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(n="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${n}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},pc=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],LT=["Enter"," ","Escape"],UT={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:n,x:t,y:e})=>`Moved selected node ${n}. New position, x: ${t}, y: ${e}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var kl;(function(n){n.Strict="strict",n.Loose="loose"})(kl||(kl={}));var no;(function(n){n.Free="free",n.Vertical="vertical",n.Horizontal="horizontal"})(no||(no={}));var vc;(function(n){n.Partial="partial",n.Full="full"})(vc||(vc={}));const _T={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var pa;(function(n){n.Bezier="default",n.Straight="straight",n.Step="step",n.SmoothStep="smoothstep",n.SimpleBezier="simplebezier"})(pa||(pa={}));var sh;(function(n){n.Arrow="arrow",n.ArrowClosed="arrowclosed"})(sh||(sh={}));var Et;(function(n){n.Left="left",n.Top="top",n.Right="right",n.Bottom="bottom"})(Et||(Et={}));const a1={[Et.Left]:Et.Right,[Et.Right]:Et.Left,[Et.Top]:Et.Bottom,[Et.Bottom]:Et.Top};function PT(n){return n===null?null:n?"valid":"invalid"}const qT=n=>"id"in n&&"source"in n&&"target"in n,GO=n=>"id"in n&&"position"in n&&!("source"in n)&&!("target"in n),Zp=n=>"id"in n&&"internals"in n&&!("source"in n)&&!("target"in n),Dc=(n,t=[0,0])=>{const{width:e,height:r}=Ls(n),a=n.origin??t,l=e*a[0],c=r*a[1];return{x:n.position.x-l,y:n.position.y-c}},FO=(n,t={nodeOrigin:[0,0]})=>{if(n.length===0)return{x:0,y:0,width:0,height:0};const e=n.reduce((r,a)=>{const l=typeof a=="string";let c=!t.nodeLookup&&!l?a:void 0;t.nodeLookup&&(c=l?t.nodeLookup.get(a):Zp(a)?a:t.nodeLookup.get(a.id));const d=c?ah(c,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return Ah(r,d)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Eh(e)},Ic=(n,t={})=>{if(n.size===0)return{x:0,y:0,width:0,height:0};let e={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return n.forEach(r=>{if(t.filter===void 0||t.filter(r)){const a=ah(r);e=Ah(e,a)}}),Eh(e)},Qp=(n,t,[e,r,a]=[0,0,1],l=!1,c=!1)=>{const d={...Oc(t,[e,r,a]),width:t.width/a,height:t.height/a},h=[];for(const g of n.values()){const{measured:p,selectable:w=!0,hidden:v=!1}=g;if(c&&!w||v)continue;const S=p.width??g.width??g.initialWidth??null,A=p.height??g.height??g.initialHeight??null,T=wc(d,Dl(g)),k=(S??0)*(A??0),D=l&&T>0;(!g.internals.handleBounds||D||T>=k||g.dragging)&&h.push(g)}return h},XO=(n,t)=>{const e=new Set;return n.forEach(r=>{e.add(r.id)}),t.filter(r=>e.has(r.source)||e.has(r.target))};function ZO(n,t){const e=new Map,r=t!=null&&t.nodes?new Set(t.nodes.map(a=>a.id)):null;return n.forEach(a=>{a.measured.width&&a.measured.height&&((t==null?void 0:t.includeHiddenNodes)||!a.hidden)&&(!r||r.has(a.id))&&e.set(a.id,a)}),e}async function QO({nodes:n,width:t,height:e,panZoom:r,minZoom:a,maxZoom:l},c){if(n.size===0)return Promise.resolve(!0);const d=ZO(n,c),h=Ic(d),g=Wp(h,t,e,(c==null?void 0:c.minZoom)??a,(c==null?void 0:c.maxZoom)??l,(c==null?void 0:c.padding)??.1);return await r.setViewport(g,{duration:c==null?void 0:c.duration,ease:c==null?void 0:c.ease,interpolate:c==null?void 0:c.interpolate}),Promise.resolve(!0)}function JT({nodeId:n,nextPosition:t,nodeLookup:e,nodeOrigin:r=[0,0],nodeExtent:a,onError:l}){const c=e.get(n),d=c.parentId?e.get(c.parentId):void 0,{x:h,y:g}=d?d.internals.positionAbsolute:{x:0,y:0},p=c.origin??r;let w=c.extent||a;if(c.extent==="parent"&&!c.expandParent)if(!d)l==null||l("005",Ir.error005());else{const S=d.measured.width,A=d.measured.height;S&&A&&(w=[[h,g],[h+S,g+A]])}else d&&Il(c.extent)&&(w=[[c.extent[0][0]+h,c.extent[0][1]+g],[c.extent[1][0]+h,c.extent[1][1]+g]]);const v=Il(w)?uo(t,w,c.measured):t;return(c.measured.width===void 0||c.measured.height===void 0)&&(l==null||l("015",Ir.error015())),{position:{x:v.x-h+(c.measured.width??0)*p[0],y:v.y-g+(c.measured.height??0)*p[1]},positionAbsolute:v}}async function WO({nodesToRemove:n=[],edgesToRemove:t=[],nodes:e,edges:r,onBeforeDelete:a}){const l=new Set(n.map(v=>v.id)),c=[];for(const v of e){if(v.deletable===!1)continue;const S=l.has(v.id),A=!S&&v.parentId&&c.find(T=>T.id===v.parentId);(S||A)&&c.push(v)}const d=new Set(t.map(v=>v.id)),h=r.filter(v=>v.deletable!==!1),p=XO(c,h);for(const v of h)d.has(v.id)&&!p.find(A=>A.id===v.id)&&p.push(v);if(!a)return{edges:p,nodes:c};const w=await a({nodes:c,edges:p});return typeof w=="boolean"?w?{edges:p,nodes:c}:{edges:[],nodes:[]}:w}const Cl=(n,t=0,e=1)=>Math.min(Math.max(n,t),e),uo=(n={x:0,y:0},t,e)=>({x:Cl(n.x,t[0][0],t[1][0]-((e==null?void 0:e.width)??0)),y:Cl(n.y,t[0][1],t[1][1]-((e==null?void 0:e.height)??0))});function $T(n,t,e){const{width:r,height:a}=Ls(e),{x:l,y:c}=e.internals.positionAbsolute;return uo(n,[[l,c],[l+r,c+a]],t)}const o1=(n,t,e)=>n<t?Cl(Math.abs(n-t),1,t)/t:n>e?-Cl(Math.abs(n-e),1,t)/t:0,HT=(n,t,e=15,r=40)=>{const a=o1(n.x,r,t.width-r)*e,l=o1(n.y,r,t.height-r)*e;return[a,l]},Ah=(n,t)=>({x:Math.min(n.x,t.x),y:Math.min(n.y,t.y),x2:Math.max(n.x2,t.x2),y2:Math.max(n.y2,t.y2)}),vp=({x:n,y:t,width:e,height:r})=>({x:n,y:t,x2:n+e,y2:t+r}),Eh=({x:n,y:t,x2:e,y2:r})=>({x:n,y:t,width:e-n,height:r-t}),Dl=(n,t=[0,0])=>{var a,l;const{x:e,y:r}=Zp(n)?n.internals.positionAbsolute:Dc(n,t);return{x:e,y:r,width:((a=n.measured)==null?void 0:a.width)??n.width??n.initialWidth??0,height:((l=n.measured)==null?void 0:l.height)??n.height??n.initialHeight??0}},ah=(n,t=[0,0])=>{var a,l;const{x:e,y:r}=Zp(n)?n.internals.positionAbsolute:Dc(n,t);return{x:e,y:r,x2:e+(((a=n.measured)==null?void 0:a.width)??n.width??n.initialWidth??0),y2:r+(((l=n.measured)==null?void 0:l.height)??n.height??n.initialHeight??0)}},VT=(n,t)=>Eh(Ah(vp(n),vp(t))),wc=(n,t)=>{const e=Math.max(0,Math.min(n.x+n.width,t.x+t.width)-Math.max(n.x,t.x)),r=Math.max(0,Math.min(n.y+n.height,t.y+t.height)-Math.max(n.y,t.y));return Math.ceil(e*r)},l1=n=>rr(n.width)&&rr(n.height)&&rr(n.x)&&rr(n.y),rr=n=>!isNaN(n)&&isFinite(n),tM=(n,t)=>{},Nh=(n,t=[1,1])=>({x:t[0]*Math.round(n.x/t[0]),y:t[1]*Math.round(n.y/t[1])}),Oc=({x:n,y:t},[e,r,a],l=!1,c=[1,1])=>{const d={x:(n-e)/a,y:(t-r)/a};return l?Nh(d,c):d},oh=({x:n,y:t},[e,r,a])=>({x:n*a+e,y:t*a+r});function el(n,t){if(typeof n=="number")return Math.floor((t-t/(1+n))*.5);if(typeof n=="string"&&n.endsWith("px")){const e=parseFloat(n);if(!Number.isNaN(e))return Math.floor(e)}if(typeof n=="string"&&n.endsWith("%")){const e=parseFloat(n);if(!Number.isNaN(e))return Math.floor(t*e*.01)}return console.error(`[React Flow] The padding value "${n}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function eM(n,t,e){if(typeof n=="string"||typeof n=="number"){const r=el(n,e),a=el(n,t);return{top:r,right:a,bottom:r,left:a,x:a*2,y:r*2}}if(typeof n=="object"){const r=el(n.top??n.y??0,e),a=el(n.bottom??n.y??0,e),l=el(n.left??n.x??0,t),c=el(n.right??n.x??0,t);return{top:r,right:c,bottom:a,left:l,x:l+c,y:r+a}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function nM(n,t,e,r,a,l){const{x:c,y:d}=oh(n,[t,e,r]),{x:h,y:g}=oh({x:n.x+n.width,y:n.y+n.height},[t,e,r]),p=a-h,w=l-g;return{left:Math.floor(c),top:Math.floor(d),right:Math.floor(p),bottom:Math.floor(w)}}const Wp=(n,t,e,r,a,l)=>{const c=eM(l,t,e),d=(t-c.x)/n.width,h=(e-c.y)/n.height,g=Math.min(d,h),p=Cl(g,r,a),w=n.x+n.width/2,v=n.y+n.height/2,S=t/2-w*p,A=e/2-v*p,T=nM(n,S,A,p,t,e),k={left:Math.min(T.left-c.left,0),top:Math.min(T.top-c.top,0),right:Math.min(T.right-c.right,0),bottom:Math.min(T.bottom-c.bottom,0)};return{x:S-k.left+k.right,y:A-k.top+k.bottom,zoom:p}},lh=()=>{var n;return typeof navigator<"u"&&((n=navigator==null?void 0:navigator.userAgent)==null?void 0:n.indexOf("Mac"))>=0};function Il(n){return n!==void 0&&n!=="parent"}function Ls(n){var t,e;return{width:((t=n.measured)==null?void 0:t.width)??n.width??n.initialWidth??0,height:((e=n.measured)==null?void 0:e.height)??n.height??n.initialHeight??0}}function jT(n){var t,e;return(((t=n.measured)==null?void 0:t.width)??n.width??n.initialWidth)!==void 0&&(((e=n.measured)==null?void 0:e.height)??n.height??n.initialHeight)!==void 0}function KT(n,t={width:0,height:0},e,r,a){const l={...n},c=r.get(e);if(c){const d=c.origin||a;l.x+=c.internals.positionAbsolute.x-(t.width??0)*d[0],l.y+=c.internals.positionAbsolute.y-(t.height??0)*d[1]}return l}function u1(n,t){if(n.size!==t.size)return!1;for(const e of n)if(!t.has(e))return!1;return!0}function rM(){let n,t;return{promise:new Promise((r,a)=>{n=r,t=a}),resolve:n,reject:t}}function iM(n){return{...UT,...n||{}}}function rc(n,{snapGrid:t=[0,0],snapToGrid:e=!1,transform:r,containerBounds:a}){const{x:l,y:c}=xr(n),d=Oc({x:l-((a==null?void 0:a.left)??0),y:c-((a==null?void 0:a.top)??0)},r),{x:h,y:g}=e?Nh(d,t):d;return{xSnapped:h,ySnapped:g,...d}}const t0=n=>({width:n.offsetWidth,height:n.offsetHeight}),YT=n=>{var t;return((t=n==null?void 0:n.getRootNode)==null?void 0:t.call(n))||(window==null?void 0:window.document)},sM=["INPUT","SELECT","TEXTAREA"];function GT(n){var r,a;const t=((a=(r=n.composedPath)==null?void 0:r.call(n))==null?void 0:a[0])||n.target;return(t==null?void 0:t.nodeType)!==1?!1:sM.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey")}const FT=n=>"clientX"in n,xr=(n,t)=>{var l,c;const e=FT(n),r=e?n.clientX:(l=n.touches)==null?void 0:l[0].clientX,a=e?n.clientY:(c=n.touches)==null?void 0:c[0].clientY;return{x:r-((t==null?void 0:t.left)??0),y:a-((t==null?void 0:t.top)??0)}},c1=(n,t,e,r,a)=>{const l=t.querySelectorAll(`.${n}`);return!l||!l.length?null:Array.from(l).map(c=>{const d=c.getBoundingClientRect();return{id:c.getAttribute("data-handleid"),type:n,nodeId:a,position:c.getAttribute("data-handlepos"),x:(d.left-e.left)/r,y:(d.top-e.top)/r,...t0(c)}})};function XT({sourceX:n,sourceY:t,targetX:e,targetY:r,sourceControlX:a,sourceControlY:l,targetControlX:c,targetControlY:d}){const h=n*.125+a*.375+c*.375+e*.125,g=t*.125+l*.375+d*.375+r*.125,p=Math.abs(h-n),w=Math.abs(g-t);return[h,g,p,w]}function ud(n,t){return n>=0?.5*n:t*25*Math.sqrt(-n)}function f1({pos:n,x1:t,y1:e,x2:r,y2:a,c:l}){switch(n){case Et.Left:return[t-ud(t-r,l),e];case Et.Right:return[t+ud(r-t,l),e];case Et.Top:return[t,e-ud(e-a,l)];case Et.Bottom:return[t,e+ud(a-e,l)]}}function ZT({sourceX:n,sourceY:t,sourcePosition:e=Et.Bottom,targetX:r,targetY:a,targetPosition:l=Et.Top,curvature:c=.25}){const[d,h]=f1({pos:e,x1:n,y1:t,x2:r,y2:a,c}),[g,p]=f1({pos:l,x1:r,y1:a,x2:n,y2:t,c}),[w,v,S,A]=XT({sourceX:n,sourceY:t,targetX:r,targetY:a,sourceControlX:d,sourceControlY:h,targetControlX:g,targetControlY:p});return[`M${n},${t} C${d},${h} ${g},${p} ${r},${a}`,w,v,S,A]}function QT({sourceX:n,sourceY:t,targetX:e,targetY:r}){const a=Math.abs(e-n)/2,l=e<n?e+a:e-a,c=Math.abs(r-t)/2,d=r<t?r+c:r-c;return[l,d,a,c]}function aM({sourceNode:n,targetNode:t,selected:e=!1,zIndex:r,elevateOnSelect:a=!1}){if(r!==void 0)return r;const l=a&&e?1e3:0,c=Math.max(n.parentId?n.internals.z:0,t.parentId?t.internals.z:0);return l+c}function oM({sourceNode:n,targetNode:t,width:e,height:r,transform:a}){const l=Ah(ah(n),ah(t));l.x===l.x2&&(l.x2+=1),l.y===l.y2&&(l.y2+=1);const c={x:-a[0]/a[2],y:-a[1]/a[2],width:e/a[2],height:r/a[2]};return wc(c,Eh(l))>0}const lM=({source:n,sourceHandle:t,target:e,targetHandle:r})=>`xy-edge__${n}${t||""}-${e}${r||""}`,uM=(n,t)=>t.some(e=>e.source===n.source&&e.target===n.target&&(e.sourceHandle===n.sourceHandle||!e.sourceHandle&&!n.sourceHandle)&&(e.targetHandle===n.targetHandle||!e.targetHandle&&!n.targetHandle)),cM=(n,t)=>{if(!n.source||!n.target)return t;let e;return qT(n)?e={...n}:e={...n,id:lM(n)},uM(e,t)?t:(e.sourceHandle===null&&delete e.sourceHandle,e.targetHandle===null&&delete e.targetHandle,t.concat(e))};function WT({sourceX:n,sourceY:t,targetX:e,targetY:r}){const[a,l,c,d]=QT({sourceX:n,sourceY:t,targetX:e,targetY:r});return[`M ${n},${t}L ${e},${r}`,a,l,c,d]}const d1={[Et.Left]:{x:-1,y:0},[Et.Right]:{x:1,y:0},[Et.Top]:{x:0,y:-1},[Et.Bottom]:{x:0,y:1}},fM=({source:n,sourcePosition:t=Et.Bottom,target:e})=>t===Et.Left||t===Et.Right?n.x<e.x?{x:1,y:0}:{x:-1,y:0}:n.y<e.y?{x:0,y:1}:{x:0,y:-1},h1=(n,t)=>Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2));function dM({source:n,sourcePosition:t=Et.Bottom,target:e,targetPosition:r=Et.Top,center:a,offset:l,stepPosition:c}){const d=d1[t],h=d1[r],g={x:n.x+d.x*l,y:n.y+d.y*l},p={x:e.x+h.x*l,y:e.y+h.y*l},w=fM({source:g,sourcePosition:t,target:p}),v=w.x!==0?"x":"y",S=w[v];let A=[],T,k;const D={x:0,y:0},L={x:0,y:0},[,,N,O]=QT({sourceX:n.x,sourceY:n.y,targetX:e.x,targetY:e.y});if(d[v]*h[v]===-1){v==="x"?(T=a.x??g.x+(p.x-g.x)*c,k=a.y??(g.y+p.y)/2):(T=a.x??(g.x+p.x)/2,k=a.y??g.y+(p.y-g.y)*c);const U=[{x:T,y:g.y},{x:T,y:p.y}],J=[{x:g.x,y:k},{x:p.x,y:k}];d[v]===S?A=v==="x"?U:J:A=v==="x"?J:U}else{const U=[{x:g.x,y:p.y}],J=[{x:p.x,y:g.y}];if(v==="x"?A=d.x===S?J:U:A=d.y===S?U:J,t===r){const rt=Math.abs(n[v]-e[v]);if(rt<=l){const ot=Math.min(l-1,l-rt);d[v]===S?D[v]=(g[v]>n[v]?-1:1)*ot:L[v]=(p[v]>e[v]?-1:1)*ot}}if(t!==r){const rt=v==="x"?"y":"x",ot=d[v]===h[rt],M=g[rt]>p[rt],K=g[rt]<p[rt];(d[v]===1&&(!ot&&M||ot&&K)||d[v]!==1&&(!ot&&K||ot&&M))&&(A=v==="x"?U:J)}const j={x:g.x+D.x,y:g.y+D.y},W={x:p.x+L.x,y:p.y+L.y},ft=Math.max(Math.abs(j.x-A[0].x),Math.abs(W.x-A[0].x)),nt=Math.max(Math.abs(j.y-A[0].y),Math.abs(W.y-A[0].y));ft>=nt?(T=(j.x+W.x)/2,k=A[0].y):(T=A[0].x,k=(j.y+W.y)/2)}return[[n,{x:g.x+D.x,y:g.y+D.y},...A,{x:p.x+L.x,y:p.y+L.y},e],T,k,N,O]}function hM(n,t,e,r){const a=Math.min(h1(n,t)/2,h1(t,e)/2,r),{x:l,y:c}=t;if(n.x===l&&l===e.x||n.y===c&&c===e.y)return`L${l} ${c}`;if(n.y===c){const g=n.x<e.x?-1:1,p=n.y<e.y?1:-1;return`L ${l+a*g},${c}Q ${l},${c} ${l},${c+a*p}`}const d=n.x<e.x?1:-1,h=n.y<e.y?-1:1;return`L ${l},${c+a*h}Q ${l},${c} ${l+a*d},${c}`}function wp({sourceX:n,sourceY:t,sourcePosition:e=Et.Bottom,targetX:r,targetY:a,targetPosition:l=Et.Top,borderRadius:c=5,centerX:d,centerY:h,offset:g=20,stepPosition:p=.5}){const[w,v,S,A,T]=dM({source:{x:n,y:t},sourcePosition:e,target:{x:r,y:a},targetPosition:l,center:{x:d,y:h},offset:g,stepPosition:p});return[w.reduce((D,L,N)=>{let O="";return N>0&&N<w.length-1?O=hM(w[N-1],L,w[N+1],c):O=`${N===0?"M":"L"}${L.x} ${L.y}`,D+=O,D},""),v,S,A,T]}function g1(n){var t;return n&&!!(n.internals.handleBounds||(t=n.handles)!=null&&t.length)&&!!(n.measured.width||n.width||n.initialWidth)}function gM(n){var w;const{sourceNode:t,targetNode:e}=n;if(!g1(t)||!g1(e))return null;const r=t.internals.handleBounds||m1(t.handles),a=e.internals.handleBounds||m1(e.handles),l=y1((r==null?void 0:r.source)??[],n.sourceHandle),c=y1(n.connectionMode===kl.Strict?(a==null?void 0:a.target)??[]:((a==null?void 0:a.target)??[]).concat((a==null?void 0:a.source)??[]),n.targetHandle);if(!l||!c)return(w=n.onError)==null||w.call(n,"008",Ir.error008(l?"target":"source",{id:n.id,sourceHandle:n.sourceHandle,targetHandle:n.targetHandle})),null;const d=(l==null?void 0:l.position)||Et.Bottom,h=(c==null?void 0:c.position)||Et.Top,g=Sc(t,l,d),p=Sc(e,c,h);return{sourceX:g.x,sourceY:g.y,targetX:p.x,targetY:p.y,sourcePosition:d,targetPosition:h}}function m1(n){if(!n)return null;const t=[],e=[];for(const r of n)r.width=r.width??1,r.height=r.height??1,r.type==="source"?t.push(r):r.type==="target"&&e.push(r);return{source:t,target:e}}function Sc(n,t,e=Et.Left,r=!1){const a=((t==null?void 0:t.x)??0)+n.internals.positionAbsolute.x,l=((t==null?void 0:t.y)??0)+n.internals.positionAbsolute.y,{width:c,height:d}=t??Ls(n);if(r)return{x:a+c/2,y:l+d/2};switch((t==null?void 0:t.position)??e){case Et.Top:return{x:a+c/2,y:l};case Et.Right:return{x:a+c,y:l+d/2};case Et.Bottom:return{x:a+c/2,y:l+d};case Et.Left:return{x:a,y:l+d/2}}}function y1(n,t){return n&&(t?n.find(e=>e.id===t):n[0])||null}function Sp(n,t){return n?typeof n=="string"?n:`${t?`${t}__`:""}${Object.keys(n).sort().map(r=>`${r}=${n[r]}`).join("&")}`:""}function mM(n,{id:t,defaultColor:e,defaultMarkerStart:r,defaultMarkerEnd:a}){const l=new Set;return n.reduce((c,d)=>([d.markerStart||r,d.markerEnd||a].forEach(h=>{if(h&&typeof h=="object"){const g=Sp(h,t);l.has(g)||(c.push({id:g,color:h.color||e,...h}),l.add(g))}}),c),[]).sort((c,d)=>c.id.localeCompare(d.id))}const e0={nodeOrigin:[0,0],nodeExtent:pc,elevateNodesOnSelect:!0,defaults:{}},yM={...e0,checkEquality:!0};function n0(n,t){const e={...n};for(const r in t)t[r]!==void 0&&(e[r]=t[r]);return e}function pM(n,t,e){const r=n0(e0,e);for(const a of n.values())if(a.parentId)r0(a,n,t,r);else{const l=Dc(a,r.nodeOrigin),c=Il(a.extent)?a.extent:r.nodeExtent,d=uo(l,c,Ls(a));a.internals.positionAbsolute=d}}function bp(n,t,e,r){var h,g;const a=n0(yM,r);let l=n.length>0;const c=new Map(t),d=a!=null&&a.elevateNodesOnSelect?1e3:0;t.clear(),e.clear();for(const p of n){let w=c.get(p.id);if(a.checkEquality&&p===(w==null?void 0:w.internals.userNode))t.set(p.id,w);else{const v=Dc(p,a.nodeOrigin),S=Il(p.extent)?p.extent:a.nodeExtent,A=uo(v,S,Ls(p));w={...a.defaults,...p,measured:{width:(h=p.measured)==null?void 0:h.width,height:(g=p.measured)==null?void 0:g.height},internals:{positionAbsolute:A,handleBounds:p.measured?w==null?void 0:w.internals.handleBounds:void 0,z:tA(p,d),userNode:p}},t.set(p.id,w)}(w.measured===void 0||w.measured.width===void 0||w.measured.height===void 0)&&!w.hidden&&(l=!1),p.parentId&&r0(w,t,e,r)}return l}function vM(n,t){if(!n.parentId)return;const e=t.get(n.parentId);e?e.set(n.id,n):t.set(n.parentId,new Map([[n.id,n]]))}function r0(n,t,e,r){const{elevateNodesOnSelect:a,nodeOrigin:l,nodeExtent:c}=n0(e0,r),d=n.parentId,h=t.get(d);if(!h){console.warn(`Parent node ${d} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}vM(n,e);const g=a?1e3:0,{x:p,y:w,z:v}=wM(n,h,l,c,g),{positionAbsolute:S}=n.internals,A=p!==S.x||w!==S.y;(A||v!==n.internals.z)&&t.set(n.id,{...n,internals:{...n.internals,positionAbsolute:A?{x:p,y:w}:S,z:v}})}function tA(n,t){return(rr(n.zIndex)?n.zIndex:0)+(n.selected?t:0)}function wM(n,t,e,r,a){const{x:l,y:c}=t.internals.positionAbsolute,d=Ls(n),h=Dc(n,e),g=Il(n.extent)?uo(h,n.extent,d):h;let p=uo({x:l+g.x,y:c+g.y},r,d);n.extent==="parent"&&(p=$T(p,d,t));const w=tA(n,a),v=t.internals.z??0;return{x:p.x,y:p.y,z:v>=w?v+1:w}}function i0(n,t,e,r=[0,0]){var c;const a=[],l=new Map;for(const d of n){const h=t.get(d.parentId);if(!h)continue;const g=((c=l.get(d.parentId))==null?void 0:c.expandedRect)??Dl(h),p=VT(g,d.rect);l.set(d.parentId,{expandedRect:p,parent:h})}return l.size>0&&l.forEach(({expandedRect:d,parent:h},g)=>{var N;const p=h.internals.positionAbsolute,w=Ls(h),v=h.origin??r,S=d.x<p.x?Math.round(Math.abs(p.x-d.x)):0,A=d.y<p.y?Math.round(Math.abs(p.y-d.y)):0,T=Math.max(w.width,Math.round(d.width)),k=Math.max(w.height,Math.round(d.height)),D=(T-w.width)*v[0],L=(k-w.height)*v[1];(S>0||A>0||D||L)&&(a.push({id:g,type:"position",position:{x:h.position.x-S+D,y:h.position.y-A+L}}),(N=e.get(g))==null||N.forEach(O=>{n.some(B=>B.id===O.id)||a.push({id:O.id,type:"position",position:{x:O.position.x+S,y:O.position.y+A}})})),(w.width<d.width||w.height<d.height||S||A)&&a.push({id:g,type:"dimensions",setAttributes:!0,dimensions:{width:T+(S?v[0]*S-D:0),height:k+(A?v[1]*A-L:0)}})}),a}function SM(n,t,e,r,a,l){const c=r==null?void 0:r.querySelector(".xyflow__viewport");let d=!1;if(!c)return{changes:[],updatedInternals:d};const h=[],g=window.getComputedStyle(c),{m22:p}=new window.DOMMatrixReadOnly(g.transform),w=[];for(const v of n.values()){const S=t.get(v.id);if(!S)continue;if(S.hidden){t.set(S.id,{...S,internals:{...S.internals,handleBounds:void 0}}),d=!0;continue}const A=t0(v.nodeElement),T=S.measured.width!==A.width||S.measured.height!==A.height;if(!!(A.width&&A.height&&(T||!S.internals.handleBounds||v.force))){const D=v.nodeElement.getBoundingClientRect(),L=Il(S.extent)?S.extent:l;let{positionAbsolute:N}=S.internals;S.parentId&&S.extent==="parent"?N=$T(N,A,t.get(S.parentId)):L&&(N=uo(N,L,A));const O={...S,measured:A,internals:{...S.internals,positionAbsolute:N,handleBounds:{source:c1("source",v.nodeElement,D,p,S.id),target:c1("target",v.nodeElement,D,p,S.id)}}};t.set(S.id,O),S.parentId&&r0(O,t,e,{nodeOrigin:a}),d=!0,T&&(h.push({id:S.id,type:"dimensions",dimensions:A}),S.expandParent&&S.parentId&&w.push({id:S.id,parentId:S.parentId,rect:Dl(O,a)}))}}if(w.length>0){const v=i0(w,t,e,a);h.push(...v)}return{changes:h,updatedInternals:d}}async function bM({delta:n,panZoom:t,transform:e,translateExtent:r,width:a,height:l}){if(!t||!n.x&&!n.y)return Promise.resolve(!1);const c=await t.setViewportConstrained({x:e[0]+n.x,y:e[1]+n.y,zoom:e[2]},[[0,0],[a,l]],r),d=!!c&&(c.x!==e[0]||c.y!==e[1]||c.k!==e[2]);return Promise.resolve(d)}function p1(n,t,e,r,a,l){let c=a;const d=r.get(c)||new Map;r.set(c,d.set(e,t)),c=`${a}-${n}`;const h=r.get(c)||new Map;if(r.set(c,h.set(e,t)),l){c=`${a}-${n}-${l}`;const g=r.get(c)||new Map;r.set(c,g.set(e,t))}}function eA(n,t,e){n.clear(),t.clear();for(const r of e){const{source:a,target:l,sourceHandle:c=null,targetHandle:d=null}=r,h={edgeId:r.id,source:a,target:l,sourceHandle:c,targetHandle:d},g=`${a}-${c}--${l}-${d}`,p=`${l}-${d}--${a}-${c}`;p1("source",h,p,n,a,c),p1("target",h,g,n,l,d),t.set(r.id,r)}}function nA(n,t){if(!n.parentId)return!1;const e=t.get(n.parentId);return e?e.selected?!0:nA(e,t):!1}function v1(n,t,e){var a;let r=n;do{if((a=r==null?void 0:r.matches)!=null&&a.call(r,t))return!0;if(r===e)return!1;r=r==null?void 0:r.parentElement}while(r);return!1}function xM(n,t,e,r){const a=new Map;for(const[l,c]of n)if((c.selected||c.id===r)&&(!c.parentId||!nA(c,n))&&(c.draggable||t&&typeof c.draggable>"u")){const d=n.get(l);d&&a.set(l,{id:l,position:d.position||{x:0,y:0},distance:{x:e.x-d.internals.positionAbsolute.x,y:e.y-d.internals.positionAbsolute.y},extent:d.extent,parentId:d.parentId,origin:d.origin,expandParent:d.expandParent,internals:{positionAbsolute:d.internals.positionAbsolute||{x:0,y:0}},measured:{width:d.measured.width??0,height:d.measured.height??0}})}return a}function ly({nodeId:n,dragItems:t,nodeLookup:e,dragging:r=!0}){var c,d,h;const a=[];for(const[g,p]of t){const w=(c=e.get(g))==null?void 0:c.internals.userNode;w&&a.push({...w,position:p.position,dragging:r})}if(!n)return[a[0],a];const l=(d=e.get(n))==null?void 0:d.internals.userNode;return[l?{...l,position:((h=t.get(n))==null?void 0:h.position)||l.position,dragging:r}:a[0],a]}function TM({onNodeMouseDown:n,getStoreItems:t,onDragStart:e,onDrag:r,onDragStop:a}){let l={x:null,y:null},c=0,d=new Map,h=!1,g={x:0,y:0},p=null,w=!1,v=null,S=!1,A=!1;function T({noDragClassName:D,handleSelector:L,domNode:N,isSelectable:O,nodeId:B,nodeClickDistance:U=0}){v=gn(N);function J({x:nt,y:rt},ot){const{nodeLookup:M,nodeExtent:K,snapGrid:I,snapToGrid:z,nodeOrigin:Y,onNodeDrag:$,onSelectionDrag:C,onError:_,updateNodePositions:Z}=t();l={x:nt,y:rt};let it=!1,lt={x:0,y:0,x2:0,y2:0};if(d.size>1&&K){const yt=Ic(d);lt=vp(yt)}for(const[yt,ht]of d){if(!M.has(yt))continue;let vt={x:nt-ht.distance.x,y:rt-ht.distance.y};z&&(vt=Nh(vt,I));let mt=[[K[0][0],K[0][1]],[K[1][0],K[1][1]]];if(d.size>1&&K&&!ht.extent){const{positionAbsolute:Rt}=ht.internals,Nt=Rt.x-lt.x+K[0][0],Ot=Rt.x+ht.measured.width-lt.x2+K[1][0],Ct=Rt.y-lt.y+K[0][1],Zt=Rt.y+ht.measured.height-lt.y2+K[1][1];mt=[[Nt,Ct],[Ot,Zt]]}const{position:bt,positionAbsolute:Jt}=JT({nodeId:yt,nextPosition:vt,nodeLookup:M,nodeExtent:mt,nodeOrigin:Y,onError:_});it=it||ht.position.x!==bt.x||ht.position.y!==bt.y,ht.position=bt,ht.internals.positionAbsolute=Jt}if(A=A||it,!!it&&(Z(d,!0),ot&&(r||$||!B&&C))){const[yt,ht]=ly({nodeId:B,dragItems:d,nodeLookup:M});r==null||r(ot,d,yt,ht),$==null||$(ot,yt,ht),B||C==null||C(ot,ht)}}async function j(){if(!p)return;const{transform:nt,panBy:rt,autoPanSpeed:ot,autoPanOnNodeDrag:M}=t();if(!M){h=!1,cancelAnimationFrame(c);return}const[K,I]=HT(g,p,ot);(K!==0||I!==0)&&(l.x=(l.x??0)-K/nt[2],l.y=(l.y??0)-I/nt[2],await rt({x:K,y:I})&&J(l,null)),c=requestAnimationFrame(j)}function W(nt){var it;const{nodeLookup:rt,multiSelectionActive:ot,nodesDraggable:M,transform:K,snapGrid:I,snapToGrid:z,selectNodesOnDrag:Y,onNodeDragStart:$,onSelectionDragStart:C,unselectNodesAndEdges:_}=t();w=!0,(!Y||!O)&&!ot&&B&&((it=rt.get(B))!=null&&it.selected||_()),O&&Y&&B&&(n==null||n(B));const Z=rc(nt.sourceEvent,{transform:K,snapGrid:I,snapToGrid:z,containerBounds:p});if(l=Z,d=xM(rt,M,Z,B),d.size>0&&(e||$||!B&&C)){const[lt,yt]=ly({nodeId:B,dragItems:d,nodeLookup:rt});e==null||e(nt.sourceEvent,d,lt,yt),$==null||$(nt.sourceEvent,lt,yt),B||C==null||C(nt.sourceEvent,yt)}}const ft=ST().clickDistance(U).on("start",nt=>{const{domNode:rt,nodeDragThreshold:ot,transform:M,snapGrid:K,snapToGrid:I}=t();p=(rt==null?void 0:rt.getBoundingClientRect())||null,S=!1,A=!1,ot===0&&W(nt),l=rc(nt.sourceEvent,{transform:M,snapGrid:K,snapToGrid:I,containerBounds:p}),g=xr(nt.sourceEvent,p)}).on("drag",nt=>{const{autoPanOnNodeDrag:rt,transform:ot,snapGrid:M,snapToGrid:K,nodeDragThreshold:I,nodeLookup:z}=t(),Y=rc(nt.sourceEvent,{transform:ot,snapGrid:M,snapToGrid:K,containerBounds:p});if((nt.sourceEvent.type==="touchmove"&&nt.sourceEvent.touches.length>1||B&&!z.has(B))&&(S=!0),!S){if(!h&&rt&&w&&(h=!0,j()),!w){const $=Y.xSnapped-(l.x??0),C=Y.ySnapped-(l.y??0);Math.sqrt($*$+C*C)>I&&W(nt)}(l.x!==Y.xSnapped||l.y!==Y.ySnapped)&&d&&w&&(g=xr(nt.sourceEvent,p),J(Y,nt.sourceEvent))}}).on("end",nt=>{if(!(!w||S)&&(h=!1,w=!1,cancelAnimationFrame(c),d.size>0)){const{nodeLookup:rt,updateNodePositions:ot,onNodeDragStop:M,onSelectionDragStop:K}=t();if(A&&(ot(d,!1),A=!1),a||M||!B&&K){const[I,z]=ly({nodeId:B,dragItems:d,nodeLookup:rt,dragging:!1});a==null||a(nt.sourceEvent,d,I,z),M==null||M(nt.sourceEvent,I,z),B||K==null||K(nt.sourceEvent,z)}}}).filter(nt=>{const rt=nt.target;return!nt.button&&(!D||!v1(rt,`.${D}`,N))&&(!L||v1(rt,L,N))});v.call(ft)}function k(){v==null||v.on(".drag",null)}return{update:T,destroy:k}}function AM(n,t,e){const r=[],a={x:n.x-e,y:n.y-e,width:e*2,height:e*2};for(const l of t.values())wc(a,Dl(l))>0&&r.push(l);return r}const EM=250;function NM(n,t,e,r){var d,h;let a=[],l=1/0;const c=AM(n,e,t+EM);for(const g of c){const p=[...((d=g.internals.handleBounds)==null?void 0:d.source)??[],...((h=g.internals.handleBounds)==null?void 0:h.target)??[]];for(const w of p){if(r.nodeId===w.nodeId&&r.type===w.type&&r.id===w.id)continue;const{x:v,y:S}=Sc(g,w,w.position,!0),A=Math.sqrt(Math.pow(v-n.x,2)+Math.pow(S-n.y,2));A>t||(A<l?(a=[{...w,x:v,y:S}],l=A):A===l&&a.push({...w,x:v,y:S}))}}if(!a.length)return null;if(a.length>1){const g=r.type==="source"?"target":"source";return a.find(p=>p.type===g)??a[0]}return a[0]}function rA(n,t,e,r,a,l=!1){var g,p,w;const c=r.get(n);if(!c)return null;const d=a==="strict"?(g=c.internals.handleBounds)==null?void 0:g[t]:[...((p=c.internals.handleBounds)==null?void 0:p.source)??[],...((w=c.internals.handleBounds)==null?void 0:w.target)??[]],h=(e?d==null?void 0:d.find(v=>v.id===e):d==null?void 0:d[0])??null;return h&&l?{...h,...Sc(c,h,h.position,!0)}:h}function iA(n,t){return n||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function kM(n,t){let e=null;return t?e=!0:n&&!t&&(e=!1),e}const sA=()=>!0;function CM(n,{connectionMode:t,connectionRadius:e,handleId:r,nodeId:a,edgeUpdaterType:l,isTarget:c,domNode:d,nodeLookup:h,lib:g,autoPanOnConnect:p,flowId:w,panBy:v,cancelConnection:S,onConnectStart:A,onConnect:T,onConnectEnd:k,isValidConnection:D=sA,onReconnectEnd:L,updateConnection:N,getTransform:O,getFromHandle:B,autoPanSpeed:U,dragThreshold:J=1}){const j=YT(n.target);let W=0,ft;const{x:nt,y:rt}=xr(n),ot=j==null?void 0:j.elementFromPoint(nt,rt),M=iA(l,ot),K=d==null?void 0:d.getBoundingClientRect();let I=!1;if(!K||!M)return;const z=rA(a,M,r,h,t);if(!z)return;let Y=xr(n,K),$=!1,C=null,_=!1,Z=null;function it(){if(!p||!K)return;const[Rt,Nt]=HT(Y,K,U);v({x:Rt,y:Nt}),W=requestAnimationFrame(it)}const lt={...z,nodeId:a,type:M,position:z.position},yt=h.get(a);let vt={inProgress:!0,isValid:null,from:Sc(yt,lt,Et.Left,!0),fromHandle:lt,fromPosition:lt.position,fromNode:yt,to:Y,toHandle:null,toPosition:a1[lt.position],toNode:null};function mt(){I=!0,N(vt),A==null||A(n,{nodeId:a,handleId:r,handleType:M})}J===0&&mt();function bt(Rt){if(!I){const{x:Zt,y:ue}=xr(Rt),be=Zt-nt,Us=ue-rt;if(!(be*be+Us*Us>J*J))return;mt()}if(!B()||!lt){Jt(Rt);return}const Nt=O();Y=xr(Rt,K),ft=NM(Oc(Y,Nt,!1,[1,1]),e,h,lt),$||(it(),$=!0);const Ot=aA(Rt,{handle:ft,connectionMode:t,fromNodeId:a,fromHandleId:r,fromType:c?"target":"source",isValidConnection:D,doc:j,lib:g,flowId:w,nodeLookup:h});Z=Ot.handleDomNode,C=Ot.connection,_=kM(!!ft,Ot.isValid);const Ct={...vt,isValid:_,to:Ot.toHandle&&_?oh({x:Ot.toHandle.x,y:Ot.toHandle.y},Nt):Y,toHandle:Ot.toHandle,toPosition:_&&Ot.toHandle?Ot.toHandle.position:a1[lt.position],toNode:Ot.toHandle?h.get(Ot.toHandle.nodeId):null};_&&ft&&vt.toHandle&&Ct.toHandle&&vt.toHandle.type===Ct.toHandle.type&&vt.toHandle.nodeId===Ct.toHandle.nodeId&&vt.toHandle.id===Ct.toHandle.id&&vt.to.x===Ct.to.x&&vt.to.y===Ct.to.y||(N(Ct),vt=Ct)}function Jt(Rt){if(I){(ft||Z)&&C&&_&&(T==null||T(C));const{inProgress:Nt,...Ot}=vt,Ct={...Ot,toPosition:vt.toHandle?vt.toPosition:null};k==null||k(Rt,Ct),l&&(L==null||L(Rt,Ct))}S(),cancelAnimationFrame(W),$=!1,_=!1,C=null,Z=null,j.removeEventListener("mousemove",bt),j.removeEventListener("mouseup",Jt),j.removeEventListener("touchmove",bt),j.removeEventListener("touchend",Jt)}j.addEventListener("mousemove",bt),j.addEventListener("mouseup",Jt),j.addEventListener("touchmove",bt),j.addEventListener("touchend",Jt)}function aA(n,{handle:t,connectionMode:e,fromNodeId:r,fromHandleId:a,fromType:l,doc:c,lib:d,flowId:h,isValidConnection:g=sA,nodeLookup:p}){const w=l==="target",v=t?c.querySelector(`.${d}-flow__handle[data-id="${h}-${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`):null,{x:S,y:A}=xr(n),T=c.elementFromPoint(S,A),k=T!=null&&T.classList.contains(`${d}-flow__handle`)?T:v,D={handleDomNode:k,isValid:!1,connection:null,toHandle:null};if(k){const L=iA(void 0,k),N=k.getAttribute("data-nodeid"),O=k.getAttribute("data-handleid"),B=k.classList.contains("connectable"),U=k.classList.contains("connectableend");if(!N||!L)return D;const J={source:w?N:r,sourceHandle:w?O:a,target:w?r:N,targetHandle:w?a:O};D.connection=J;const W=B&&U&&(e===kl.Strict?w&&L==="source"||!w&&L==="target":N!==r||O!==a);D.isValid=W&&g(J),D.toHandle=rA(N,L,O,p,e,!0)}return D}const xp={onPointerDown:CM,isValid:aA};function DM({domNode:n,panZoom:t,getTransform:e,getViewScale:r}){const a=gn(n);function l({translateExtent:d,width:h,height:g,zoomStep:p=10,pannable:w=!0,zoomable:v=!0,inversePan:S=!1}){const A=N=>{const O=e();if(N.sourceEvent.type!=="wheel"||!t)return;const B=-N.sourceEvent.deltaY*(N.sourceEvent.deltaMode===1?.05:N.sourceEvent.deltaMode?1:.002)*p,U=O[2]*Math.pow(2,B);t.scaleTo(U)};let T=[0,0];const k=N=>{(N.sourceEvent.type==="mousedown"||N.sourceEvent.type==="touchstart")&&(T=[N.sourceEvent.clientX??N.sourceEvent.touches[0].clientX,N.sourceEvent.clientY??N.sourceEvent.touches[0].clientY])},D=N=>{const O=e();if(N.sourceEvent.type!=="mousemove"&&N.sourceEvent.type!=="touchmove"||!t)return;const B=[N.sourceEvent.clientX??N.sourceEvent.touches[0].clientX,N.sourceEvent.clientY??N.sourceEvent.touches[0].clientY],U=[B[0]-T[0],B[1]-T[1]];T=B;const J=r()*Math.max(O[2],Math.log(O[2]))*(S?-1:1),j={x:O[0]-U[0]*J,y:O[1]-U[1]*J},W=[[0,0],[h,g]];t.setViewportConstrained({x:j.x,y:j.y,zoom:O[2]},W,d)},L=zT().on("start",k).on("zoom",w?D:null).on("zoom.wheel",v?A:null);a.call(L,{})}function c(){a.on("zoom",null)}return{update:l,destroy:c,pointer:Qn}}const IM=(n,t)=>n.x!==t.x||n.y!==t.y||n.zoom!==t.k,kh=n=>({x:n.x,y:n.y,zoom:n.k}),uy=({x:n,y:t,zoom:e})=>Th.translate(n,t).scale(e),al=(n,t)=>n.target.closest(`.${t}`),oA=(n,t)=>t===2&&Array.isArray(n)&&n.includes(2),OM=n=>((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2,cy=(n,t=0,e=OM,r=()=>{})=>{const a=typeof t=="number"&&t>0;return a||r(),a?n.transition().duration(t).ease(e).on("end",r):n},lA=n=>{const t=n.ctrlKey&&lh()?10:1;return-n.deltaY*(n.deltaMode===1?.05:n.deltaMode?1:.002)*t};function MM({zoomPanValues:n,noWheelClassName:t,d3Selection:e,d3Zoom:r,panOnScrollMode:a,panOnScrollSpeed:l,zoomOnPinch:c,onPanZoomStart:d,onPanZoom:h,onPanZoomEnd:g}){return p=>{if(al(p,t))return!1;p.preventDefault(),p.stopImmediatePropagation();const w=e.property("__zoom").k||1;if(p.ctrlKey&&c){const k=Qn(p),D=lA(p),L=w*Math.pow(2,D);r.scaleTo(e,L,k,p);return}const v=p.deltaMode===1?20:1;let S=a===no.Vertical?0:p.deltaX*v,A=a===no.Horizontal?0:p.deltaY*v;!lh()&&p.shiftKey&&a!==no.Vertical&&(S=p.deltaY*v,A=0),r.translateBy(e,-(S/w)*l,-(A/w)*l,{internal:!0});const T=kh(e.property("__zoom"));clearTimeout(n.panScrollTimeout),n.isPanScrolling||(n.isPanScrolling=!0,d==null||d(p,T)),n.isPanScrolling&&(h==null||h(p,T),n.panScrollTimeout=setTimeout(()=>{g==null||g(p,T),n.isPanScrolling=!1},150))}}function RM({noWheelClassName:n,preventScrolling:t,d3ZoomHandler:e}){return function(r,a){const l=r.type==="wheel",c=!t&&l&&!r.ctrlKey,d=al(r,n);if(r.ctrlKey&&l&&d&&r.preventDefault(),c||d)return null;r.preventDefault(),e.call(this,r,a)}}function BM({zoomPanValues:n,onDraggingChange:t,onPanZoomStart:e}){return r=>{var l,c,d;if((l=r.sourceEvent)!=null&&l.internal)return;const a=kh(r.transform);n.mouseButton=((c=r.sourceEvent)==null?void 0:c.button)||0,n.isZoomingOrPanning=!0,n.prevViewport=a,((d=r.sourceEvent)==null?void 0:d.type)==="mousedown"&&t(!0),e&&(e==null||e(r.sourceEvent,a))}}function zM({zoomPanValues:n,panOnDrag:t,onPaneContextMenu:e,onTransformChange:r,onPanZoom:a}){return l=>{var c,d;n.usedRightMouseButton=!!(e&&oA(t,n.mouseButton??0)),(c=l.sourceEvent)!=null&&c.sync||r([l.transform.x,l.transform.y,l.transform.k]),a&&!((d=l.sourceEvent)!=null&&d.internal)&&(a==null||a(l.sourceEvent,kh(l.transform)))}}function LM({zoomPanValues:n,panOnDrag:t,panOnScroll:e,onDraggingChange:r,onPanZoomEnd:a,onPaneContextMenu:l}){return c=>{var d;if(!((d=c.sourceEvent)!=null&&d.internal)&&(n.isZoomingOrPanning=!1,l&&oA(t,n.mouseButton??0)&&!n.usedRightMouseButton&&c.sourceEvent&&l(c.sourceEvent),n.usedRightMouseButton=!1,r(!1),a&&IM(n.prevViewport,c.transform))){const h=kh(c.transform);n.prevViewport=h,clearTimeout(n.timerId),n.timerId=setTimeout(()=>{a==null||a(c.sourceEvent,h)},e?150:0)}}}function UM({zoomActivationKeyPressed:n,zoomOnScroll:t,zoomOnPinch:e,panOnDrag:r,panOnScroll:a,zoomOnDoubleClick:l,userSelectionActive:c,noWheelClassName:d,noPanClassName:h,lib:g}){return p=>{var A;const w=n||t,v=e&&p.ctrlKey;if(p.button===1&&p.type==="mousedown"&&(al(p,`${g}-flow__node`)||al(p,`${g}-flow__edge`)))return!0;if(!r&&!w&&!a&&!l&&!e||c||al(p,d)&&p.type==="wheel"||al(p,h)&&(p.type!=="wheel"||a&&p.type==="wheel"&&!n)||!e&&p.ctrlKey&&p.type==="wheel")return!1;if(!e&&p.type==="touchstart"&&((A=p.touches)==null?void 0:A.length)>1)return p.preventDefault(),!1;if(!w&&!a&&!v&&p.type==="wheel"||!r&&(p.type==="mousedown"||p.type==="touchstart")||Array.isArray(r)&&!r.includes(p.button)&&p.type==="mousedown")return!1;const S=Array.isArray(r)&&r.includes(p.button)||!p.button||p.button<=1;return(!p.ctrlKey||p.type==="wheel")&&S}}function _M({domNode:n,minZoom:t,maxZoom:e,paneClickDistance:r,translateExtent:a,viewport:l,onPanZoom:c,onPanZoomStart:d,onPanZoomEnd:h,onDraggingChange:g}){const p={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},w=n.getBoundingClientRect(),v=zT().clickDistance(!rr(r)||r<0?0:r).scaleExtent([t,e]).translateExtent(a),S=gn(n).call(v);N({x:l.x,y:l.y,zoom:Cl(l.zoom,t,e)},[[0,0],[w.width,w.height]],a);const A=S.on("wheel.zoom"),T=S.on("dblclick.zoom");v.wheelDelta(lA);function k(rt,ot){return S?new Promise(M=>{v==null||v.interpolate((ot==null?void 0:ot.interpolate)==="linear"?nc:Sd).transform(cy(S,ot==null?void 0:ot.duration,ot==null?void 0:ot.ease,()=>M(!0)),rt)}):Promise.resolve(!1)}function D({noWheelClassName:rt,noPanClassName:ot,onPaneContextMenu:M,userSelectionActive:K,panOnScroll:I,panOnDrag:z,panOnScrollMode:Y,panOnScrollSpeed:$,preventScrolling:C,zoomOnPinch:_,zoomOnScroll:Z,zoomOnDoubleClick:it,zoomActivationKeyPressed:lt,lib:yt,onTransformChange:ht}){K&&!p.isZoomingOrPanning&&L();const mt=I&&!lt&&!K?MM({zoomPanValues:p,noWheelClassName:rt,d3Selection:S,d3Zoom:v,panOnScrollMode:Y,panOnScrollSpeed:$,zoomOnPinch:_,onPanZoomStart:d,onPanZoom:c,onPanZoomEnd:h}):RM({noWheelClassName:rt,preventScrolling:C,d3ZoomHandler:A});if(S.on("wheel.zoom",mt,{passive:!1}),!K){const Jt=BM({zoomPanValues:p,onDraggingChange:g,onPanZoomStart:d});v.on("start",Jt);const Rt=zM({zoomPanValues:p,panOnDrag:z,onPaneContextMenu:!!M,onPanZoom:c,onTransformChange:ht});v.on("zoom",Rt);const Nt=LM({zoomPanValues:p,panOnDrag:z,panOnScroll:I,onPaneContextMenu:M,onPanZoomEnd:h,onDraggingChange:g});v.on("end",Nt)}const bt=UM({zoomActivationKeyPressed:lt,panOnDrag:z,zoomOnScroll:Z,panOnScroll:I,zoomOnDoubleClick:it,zoomOnPinch:_,userSelectionActive:K,noPanClassName:ot,noWheelClassName:rt,lib:yt});v.filter(bt),it?S.on("dblclick.zoom",T):S.on("dblclick.zoom",null)}function L(){v.on("zoom",null)}async function N(rt,ot,M){const K=uy(rt),I=v==null?void 0:v.constrain()(K,ot,M);return I&&await k(I),new Promise(z=>z(I))}async function O(rt,ot){const M=uy(rt);return await k(M,ot),new Promise(K=>K(M))}function B(rt){if(S){const ot=uy(rt),M=S.property("__zoom");(M.k!==rt.zoom||M.x!==rt.x||M.y!==rt.y)&&(v==null||v.transform(S,ot,null,{sync:!0}))}}function U(){const rt=S?BT(S.node()):{x:0,y:0,k:1};return{x:rt.x,y:rt.y,zoom:rt.k}}function J(rt,ot){return S?new Promise(M=>{v==null||v.interpolate((ot==null?void 0:ot.interpolate)==="linear"?nc:Sd).scaleTo(cy(S,ot==null?void 0:ot.duration,ot==null?void 0:ot.ease,()=>M(!0)),rt)}):Promise.resolve(!1)}function j(rt,ot){return S?new Promise(M=>{v==null||v.interpolate((ot==null?void 0:ot.interpolate)==="linear"?nc:Sd).scaleBy(cy(S,ot==null?void 0:ot.duration,ot==null?void 0:ot.ease,()=>M(!0)),rt)}):Promise.resolve(!1)}function W(rt){v==null||v.scaleExtent(rt)}function ft(rt){v==null||v.translateExtent(rt)}function nt(rt){const ot=!rr(rt)||rt<0?0:rt;v==null||v.clickDistance(ot)}return{update:D,destroy:L,setViewport:O,setViewportConstrained:N,getViewport:U,scaleTo:J,scaleBy:j,setScaleExtent:W,setTranslateExtent:ft,syncViewport:B,setClickDistance:nt}}var Ol;(function(n){n.Line="line",n.Handle="handle"})(Ol||(Ol={}));function PM({width:n,prevWidth:t,height:e,prevHeight:r,affectsX:a,affectsY:l}){const c=n-t,d=e-r,h=[c>0?1:c<0?-1:0,d>0?1:d<0?-1:0];return c&&a&&(h[0]=h[0]*-1),d&&l&&(h[1]=h[1]*-1),h}function qM(n){const t=n.includes("right")||n.includes("left"),e=n.includes("bottom")||n.includes("top"),r=n.includes("left"),a=n.includes("top");return{isHorizontal:t,isVertical:e,affectsX:r,affectsY:a}}function da(n,t){return Math.max(0,t-n)}function ha(n,t){return Math.max(0,n-t)}function cd(n,t,e){return Math.max(0,t-n,n-e)}function w1(n,t){return n?!t:t}function JM(n,t,e,r,a,l,c,d){let{affectsX:h,affectsY:g}=t;const{isHorizontal:p,isVertical:w}=t,v=p&&w,{xSnapped:S,ySnapped:A}=e,{minWidth:T,maxWidth:k,minHeight:D,maxHeight:L}=r,{x:N,y:O,width:B,height:U,aspectRatio:J}=n;let j=Math.floor(p?S-n.pointerX:0),W=Math.floor(w?A-n.pointerY:0);const ft=B+(h?-j:j),nt=U+(g?-W:W),rt=-l[0]*B,ot=-l[1]*U;let M=cd(ft,T,k),K=cd(nt,D,L);if(c){let Y=0,$=0;h&&j<0?Y=da(N+j+rt,c[0][0]):!h&&j>0&&(Y=ha(N+ft+rt,c[1][0])),g&&W<0?$=da(O+W+ot,c[0][1]):!g&&W>0&&($=ha(O+nt+ot,c[1][1])),M=Math.max(M,Y),K=Math.max(K,$)}if(d){let Y=0,$=0;h&&j>0?Y=ha(N+j,d[0][0]):!h&&j<0&&(Y=da(N+ft,d[1][0])),g&&W>0?$=ha(O+W,d[0][1]):!g&&W<0&&($=da(O+nt,d[1][1])),M=Math.max(M,Y),K=Math.max(K,$)}if(a){if(p){const Y=cd(ft/J,D,L)*J;if(M=Math.max(M,Y),c){let $=0;!h&&!g||h&&!g&&v?$=ha(O+ot+ft/J,c[1][1])*J:$=da(O+ot+(h?j:-j)/J,c[0][1])*J,M=Math.max(M,$)}if(d){let $=0;!h&&!g||h&&!g&&v?$=da(O+ft/J,d[1][1])*J:$=ha(O+(h?j:-j)/J,d[0][1])*J,M=Math.max(M,$)}}if(w){const Y=cd(nt*J,T,k)/J;if(K=Math.max(K,Y),c){let $=0;!h&&!g||g&&!h&&v?$=ha(N+nt*J+rt,c[1][0])/J:$=da(N+(g?W:-W)*J+rt,c[0][0])/J,K=Math.max(K,$)}if(d){let $=0;!h&&!g||g&&!h&&v?$=da(N+nt*J,d[1][0])/J:$=ha(N+(g?W:-W)*J,d[0][0])/J,K=Math.max(K,$)}}}W=W+(W<0?K:-K),j=j+(j<0?M:-M),a&&(v?ft>nt*J?W=(w1(h,g)?-j:j)/J:j=(w1(h,g)?-W:W)*J:p?(W=j/J,g=h):(j=W*J,h=g));const I=h?N+j:N,z=g?O+W:O;return{width:B+(h?-j:j),height:U+(g?-W:W),x:l[0]*j*(h?-1:1)+I,y:l[1]*W*(g?-1:1)+z}}const uA={width:0,height:0,x:0,y:0},$M={...uA,pointerX:0,pointerY:0,aspectRatio:1};function HM(n){return[[0,0],[n.measured.width,n.measured.height]]}function VM(n,t,e){const r=t.position.x+n.position.x,a=t.position.y+n.position.y,l=n.measured.width??0,c=n.measured.height??0,d=e[0]*l,h=e[1]*c;return[[r-d,a-h],[r+l-d,a+c-h]]}function jM({domNode:n,nodeId:t,getStoreItems:e,onChange:r,onEnd:a}){const l=gn(n);function c({controlPosition:h,boundaries:g,keepAspectRatio:p,resizeDirection:w,onResizeStart:v,onResize:S,onResizeEnd:A,shouldResize:T}){let k={...uA},D={...$M};const L=qM(h);let N,O=null,B=[],U,J,j;const W=ST().on("start",ft=>{const{nodeLookup:nt,transform:rt,snapGrid:ot,snapToGrid:M,nodeOrigin:K,paneDomNode:I}=e();if(N=nt.get(t),!N)return;O=(I==null?void 0:I.getBoundingClientRect())??null;const{xSnapped:z,ySnapped:Y}=rc(ft.sourceEvent,{transform:rt,snapGrid:ot,snapToGrid:M,containerBounds:O});k={width:N.measured.width??0,height:N.measured.height??0,x:N.position.x??0,y:N.position.y??0},D={...k,pointerX:z,pointerY:Y,aspectRatio:k.width/k.height},U=void 0,N.parentId&&(N.extent==="parent"||N.expandParent)&&(U=nt.get(N.parentId),J=U&&N.extent==="parent"?HM(U):void 0),B=[],j=void 0;for(const[$,C]of nt)if(C.parentId===t&&(B.push({id:$,position:{...C.position},extent:C.extent}),C.extent==="parent"||C.expandParent)){const _=VM(C,N,C.origin??K);j?j=[[Math.min(_[0][0],j[0][0]),Math.min(_[0][1],j[0][1])],[Math.max(_[1][0],j[1][0]),Math.max(_[1][1],j[1][1])]]:j=_}v==null||v(ft,{...k})}).on("drag",ft=>{const{transform:nt,snapGrid:rt,snapToGrid:ot,nodeOrigin:M}=e(),K=rc(ft.sourceEvent,{transform:nt,snapGrid:rt,snapToGrid:ot,containerBounds:O}),I=[];if(!N)return;const{x:z,y:Y,width:$,height:C}=k,_={},Z=N.origin??M,{width:it,height:lt,x:yt,y:ht}=JM(D,L,K,g,p,Z,J,j),vt=it!==$,mt=lt!==C,bt=yt!==z&&vt,Jt=ht!==Y&&mt;if(!bt&&!Jt&&!vt&&!mt)return;if((bt||Jt||Z[0]===1||Z[1]===1)&&(_.x=bt?yt:k.x,_.y=Jt?ht:k.y,k.x=_.x,k.y=_.y,B.length>0)){const Ct=yt-z,Zt=ht-Y;for(const ue of B)ue.position={x:ue.position.x-Ct+Z[0]*(it-$),y:ue.position.y-Zt+Z[1]*(lt-C)},I.push(ue)}if((vt||mt)&&(_.width=vt&&(!w||w==="horizontal")?it:k.width,_.height=mt&&(!w||w==="vertical")?lt:k.height,k.width=_.width,k.height=_.height),U&&N.expandParent){const Ct=Z[0]*(_.width??0);_.x&&_.x<Ct&&(k.x=Ct,D.x=D.x-(_.x-Ct));const Zt=Z[1]*(_.height??0);_.y&&_.y<Zt&&(k.y=Zt,D.y=D.y-(_.y-Zt))}const Rt=PM({width:k.width,prevWidth:$,height:k.height,prevHeight:C,affectsX:L.affectsX,affectsY:L.affectsY}),Nt={...k,direction:Rt};(T==null?void 0:T(ft,Nt))!==!1&&(S==null||S(ft,Nt),r(_,I))}).on("end",ft=>{A==null||A(ft,{...k}),a==null||a({...k})});l.call(W)}function d(){l.on(".drag",null)}return{update:c,destroy:d}}var fy={exports:{}},dy={},hy={exports:{}},gy={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S1;function KM(){if(S1)return gy;S1=1;var n=xc();function t(w,v){return w===v&&(w!==0||1/w===1/v)||w!==w&&v!==v}var e=typeof Object.is=="function"?Object.is:t,r=n.useState,a=n.useEffect,l=n.useLayoutEffect,c=n.useDebugValue;function d(w,v){var S=v(),A=r({inst:{value:S,getSnapshot:v}}),T=A[0].inst,k=A[1];return l(function(){T.value=S,T.getSnapshot=v,h(T)&&k({inst:T})},[w,S,v]),a(function(){return h(T)&&k({inst:T}),w(function(){h(T)&&k({inst:T})})},[w]),c(S),S}function h(w){var v=w.getSnapshot;w=w.value;try{var S=v();return!e(w,S)}catch{return!0}}function g(w,v){return v()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?g:d;return gy.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:p,gy}var b1;function YM(){return b1||(b1=1,hy.exports=KM()),hy.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x1;function GM(){if(x1)return dy;x1=1;var n=xc(),t=YM();function e(g,p){return g===p&&(g!==0||1/g===1/p)||g!==g&&p!==p}var r=typeof Object.is=="function"?Object.is:e,a=t.useSyncExternalStore,l=n.useRef,c=n.useEffect,d=n.useMemo,h=n.useDebugValue;return dy.useSyncExternalStoreWithSelector=function(g,p,w,v,S){var A=l(null);if(A.current===null){var T={hasValue:!1,value:null};A.current=T}else T=A.current;A=d(function(){function D(U){if(!L){if(L=!0,N=U,U=v(U),S!==void 0&&T.hasValue){var J=T.value;if(S(J,U))return O=J}return O=U}if(J=O,r(N,U))return J;var j=v(U);return S!==void 0&&S(J,j)?(N=U,J):(N=U,O=j)}var L=!1,N,O,B=w===void 0?null:w;return[function(){return D(p())},B===null?void 0:function(){return D(B())}]},[p,w,v,S]);var k=a(g,A[0],A[1]);return c(function(){T.hasValue=!0,T.value=k},[k]),h(k),k},dy}var T1;function FM(){return T1||(T1=1,fy.exports=GM()),fy.exports}var XM=FM();const ZM=G1(XM),QM={},A1=n=>{let t;const e=new Set,r=(p,w)=>{const v=typeof p=="function"?p(t):p;if(!Object.is(v,t)){const S=t;t=w??(typeof v!="object"||v===null)?v:Object.assign({},t,v),e.forEach(A=>A(t,S))}},a=()=>t,h={setState:r,getState:a,getInitialState:()=>g,subscribe:p=>(e.add(p),()=>e.delete(p)),destroy:()=>{(QM?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),e.clear()}},g=t=n(r,a,h);return h},WM=n=>n?A1(n):A1,{useDebugValue:tR}=sD,{useSyncExternalStoreWithSelector:eR}=ZM,nR=n=>n;function cA(n,t=nR,e){const r=eR(n.subscribe,n.getState,n.getServerState||n.getInitialState,t,e);return tR(r),r}const E1=(n,t)=>{const e=WM(n),r=(a,l=t)=>cA(e,a,l);return Object.assign(r,e),r},rR=(n,t)=>n?E1(n,t):E1;function de(n,t){if(Object.is(n,t))return!0;if(typeof n!="object"||n===null||typeof t!="object"||t===null)return!1;if(n instanceof Map&&t instanceof Map){if(n.size!==t.size)return!1;for(const[r,a]of n)if(!Object.is(a,t.get(r)))return!1;return!0}if(n instanceof Set&&t instanceof Set){if(n.size!==t.size)return!1;for(const r of n)if(!t.has(r))return!1;return!0}const e=Object.keys(n);if(e.length!==Object.keys(t).length)return!1;for(const r of e)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(n[r],t[r]))return!1;return!0}F1();const Ch=et.createContext(null),iR=Ch.Provider,fA=Ir.error001();function Vt(n,t){const e=et.useContext(Ch);if(e===null)throw new Error(fA);return cA(e,n,t)}function le(){const n=et.useContext(Ch);if(n===null)throw new Error(fA);return et.useMemo(()=>({getState:n.getState,setState:n.setState,subscribe:n.subscribe}),[n])}const N1={display:"none"},sR={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},dA="react-flow__node-desc",hA="react-flow__edge-desc",aR="react-flow__aria-live",oR=n=>n.ariaLiveMessage,lR=n=>n.ariaLabelConfig;function uR({rfId:n}){const t=Vt(oR);return tt.jsx("div",{id:`${aR}-${n}`,"aria-live":"assertive","aria-atomic":"true",style:sR,children:t})}function cR({rfId:n,disableKeyboardA11y:t}){const e=Vt(lR);return tt.jsxs(tt.Fragment,{children:[tt.jsx("div",{id:`${dA}-${n}`,style:N1,children:t?e["node.a11yDescription.default"]:e["node.a11yDescription.keyboardDisabled"]}),tt.jsx("div",{id:`${hA}-${n}`,style:N1,children:e["edge.a11yDescription.default"]}),!t&&tt.jsx(uR,{rfId:n})]})}const Dh=et.forwardRef(({position:n="top-left",children:t,className:e,style:r,...a},l)=>{const c=`${n}`.split("-");return tt.jsx("div",{className:Ne(["react-flow__panel",e,...c]),style:r,ref:l,...a,children:t})});Dh.displayName="Panel";function fR({proOptions:n,position:t="bottom-right"}){return n!=null&&n.hideAttribution?null:tt.jsx(Dh,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:tt.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const dR=n=>{const t=[],e=[];for(const[,r]of n.nodeLookup)r.selected&&t.push(r.internals.userNode);for(const[,r]of n.edgeLookup)r.selected&&e.push(r);return{selectedNodes:t,selectedEdges:e}},fd=n=>n.id;function hR(n,t){return de(n.selectedNodes.map(fd),t.selectedNodes.map(fd))&&de(n.selectedEdges.map(fd),t.selectedEdges.map(fd))}function gR({onSelectionChange:n}){const t=le(),{selectedNodes:e,selectedEdges:r}=Vt(dR,hR);return et.useEffect(()=>{const a={nodes:e,edges:r};n==null||n(a),t.getState().onSelectionChangeHandlers.forEach(l=>l(a))},[e,r,n]),null}const mR=n=>!!n.onSelectionChangeHandlers;function yR({onSelectionChange:n}){const t=Vt(mR);return n||t?tt.jsx(gR,{onSelectionChange:n}):null}const gA=[0,0],pR={x:0,y:0,zoom:1},vR=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","paneClickDistance","ariaLabelConfig"],k1=[...vR,"rfId"],wR=n=>({setNodes:n.setNodes,setEdges:n.setEdges,setMinZoom:n.setMinZoom,setMaxZoom:n.setMaxZoom,setTranslateExtent:n.setTranslateExtent,setNodeExtent:n.setNodeExtent,reset:n.reset,setDefaultNodesAndEdges:n.setDefaultNodesAndEdges,setPaneClickDistance:n.setPaneClickDistance}),C1={translateExtent:pc,nodeOrigin:gA,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1",paneClickDistance:0};function SR(n){const{setNodes:t,setEdges:e,setMinZoom:r,setMaxZoom:a,setTranslateExtent:l,setNodeExtent:c,reset:d,setDefaultNodesAndEdges:h,setPaneClickDistance:g}=Vt(wR,de),p=le();et.useEffect(()=>(h(n.defaultNodes,n.defaultEdges),()=>{w.current=C1,d()}),[]);const w=et.useRef(C1);return et.useEffect(()=>{for(const v of k1){const S=n[v],A=w.current[v];S!==A&&(typeof n[v]>"u"||(v==="nodes"?t(S):v==="edges"?e(S):v==="minZoom"?r(S):v==="maxZoom"?a(S):v==="translateExtent"?l(S):v==="nodeExtent"?c(S):v==="paneClickDistance"?g(S):v==="ariaLabelConfig"?p.setState({ariaLabelConfig:iM(S)}):v==="fitView"?p.setState({fitViewQueued:S}):v==="fitViewOptions"?p.setState({fitViewOptions:S}):p.setState({[v]:S})))}w.current=n},k1.map(v=>n[v])),null}function D1(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function bR(n){var r;const[t,e]=et.useState(n==="system"?null:n);return et.useEffect(()=>{if(n!=="system"){e(n);return}const a=D1(),l=()=>e(a!=null&&a.matches?"dark":"light");return l(),a==null||a.addEventListener("change",l),()=>{a==null||a.removeEventListener("change",l)}},[n]),t!==null?t:(r=D1())!=null&&r.matches?"dark":"light"}const I1=typeof document<"u"?document:null;function bc(n=null,t={target:I1,actInsideInputWithModifier:!0}){const[e,r]=et.useState(!1),a=et.useRef(!1),l=et.useRef(new Set([])),[c,d]=et.useMemo(()=>{if(n!==null){const g=(Array.isArray(n)?n:[n]).filter(w=>typeof w=="string").map(w=>w.replace("+",`
`).replace(`

`,`
+`).split(`
`)),p=g.reduce((w,v)=>w.concat(...v),[]);return[g,p]}return[[],[]]},[n]);return et.useEffect(()=>{const h=(t==null?void 0:t.target)??I1,g=(t==null?void 0:t.actInsideInputWithModifier)??!0;if(n!==null){const p=S=>{var k,D;if(a.current=S.ctrlKey||S.metaKey||S.shiftKey||S.altKey,(!a.current||a.current&&!g)&&GT(S))return!1;const T=M1(S.code,d);if(l.current.add(S[T]),O1(c,l.current,!1)){const L=((D=(k=S.composedPath)==null?void 0:k.call(S))==null?void 0:D[0])||S.target,N=(L==null?void 0:L.nodeName)==="BUTTON"||(L==null?void 0:L.nodeName)==="A";t.preventDefault!==!1&&(a.current||!N)&&S.preventDefault(),r(!0)}},w=S=>{const A=M1(S.code,d);O1(c,l.current,!0)?(r(!1),l.current.clear()):l.current.delete(S[A]),S.key==="Meta"&&l.current.clear(),a.current=!1},v=()=>{l.current.clear(),r(!1)};return h==null||h.addEventListener("keydown",p),h==null||h.addEventListener("keyup",w),window.addEventListener("blur",v),window.addEventListener("contextmenu",v),()=>{h==null||h.removeEventListener("keydown",p),h==null||h.removeEventListener("keyup",w),window.removeEventListener("blur",v),window.removeEventListener("contextmenu",v)}}},[n,r]),e}function O1(n,t,e){return n.filter(r=>e||r.length===t.size).some(r=>r.every(a=>t.has(a)))}function M1(n,t){return t.includes(n)?"code":"key"}const xR=()=>{const n=le();return et.useMemo(()=>({zoomIn:t=>{const{panZoom:e}=n.getState();return e?e.scaleBy(1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomOut:t=>{const{panZoom:e}=n.getState();return e?e.scaleBy(1/1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomTo:(t,e)=>{const{panZoom:r}=n.getState();return r?r.scaleTo(t,{duration:e==null?void 0:e.duration}):Promise.resolve(!1)},getZoom:()=>n.getState().transform[2],setViewport:async(t,e)=>{const{transform:[r,a,l],panZoom:c}=n.getState();return c?(await c.setViewport({x:t.x??r,y:t.y??a,zoom:t.zoom??l},e),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[t,e,r]=n.getState().transform;return{x:t,y:e,zoom:r}},setCenter:async(t,e,r)=>n.getState().setCenter(t,e,r),fitBounds:async(t,e)=>{const{width:r,height:a,minZoom:l,maxZoom:c,panZoom:d}=n.getState(),h=Wp(t,r,a,l,c,(e==null?void 0:e.padding)??.1);return d?(await d.setViewport(h,{duration:e==null?void 0:e.duration,ease:e==null?void 0:e.ease,interpolate:e==null?void 0:e.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,e={})=>{const{transform:r,snapGrid:a,snapToGrid:l,domNode:c}=n.getState();if(!c)return t;const{x:d,y:h}=c.getBoundingClientRect(),g={x:t.x-d,y:t.y-h},p=e.snapGrid??a,w=e.snapToGrid??l;return Oc(g,r,w,p)},flowToScreenPosition:t=>{const{transform:e,domNode:r}=n.getState();if(!r)return t;const{x:a,y:l}=r.getBoundingClientRect(),c=oh(t,e);return{x:c.x+a,y:c.y+l}}}),[])};function mA(n,t){const e=[],r=new Map,a=[];for(const l of n)if(l.type==="add"){a.push(l);continue}else if(l.type==="remove"||l.type==="replace")r.set(l.id,[l]);else{const c=r.get(l.id);c?c.push(l):r.set(l.id,[l])}for(const l of t){const c=r.get(l.id);if(!c){e.push(l);continue}if(c[0].type==="remove")continue;if(c[0].type==="replace"){e.push({...c[0].item});continue}const d={...l};for(const h of c)TR(h,d);e.push(d)}return a.length&&a.forEach(l=>{l.index!==void 0?e.splice(l.index,0,{...l.item}):e.push({...l.item})}),e}function TR(n,t){switch(n.type){case"select":{t.selected=n.selected;break}case"position":{typeof n.position<"u"&&(t.position=n.position),typeof n.dragging<"u"&&(t.dragging=n.dragging);break}case"dimensions":{typeof n.dimensions<"u"&&(t.measured??(t.measured={}),t.measured.width=n.dimensions.width,t.measured.height=n.dimensions.height,n.setAttributes&&((n.setAttributes===!0||n.setAttributes==="width")&&(t.width=n.dimensions.width),(n.setAttributes===!0||n.setAttributes==="height")&&(t.height=n.dimensions.height))),typeof n.resizing=="boolean"&&(t.resizing=n.resizing);break}}}function AR(n,t){return mA(n,t)}function ER(n,t){return mA(n,t)}function Za(n,t){return{id:n,type:"select",selected:t}}function ol(n,t=new Set,e=!1){const r=[];for(const[a,l]of n){const c=t.has(a);!(l.selected===void 0&&!c)&&l.selected!==c&&(e&&(l.selected=c),r.push(Za(l.id,c)))}return r}function R1({items:n=[],lookup:t}){var a;const e=[],r=new Map(n.map(l=>[l.id,l]));for(const[l,c]of n.entries()){const d=t.get(c.id),h=((a=d==null?void 0:d.internals)==null?void 0:a.userNode)??d;h!==void 0&&h!==c&&e.push({id:c.id,item:c,type:"replace"}),h===void 0&&e.push({item:c,type:"add",index:l})}for(const[l]of t)r.get(l)===void 0&&e.push({id:l,type:"remove"});return e}function B1(n){return{id:n.id,type:"remove"}}const z1=n=>GO(n),NR=n=>qT(n);function yA(n){return et.forwardRef(n)}const kR=typeof window<"u"?et.useLayoutEffect:et.useEffect;function L1(n){const[t,e]=et.useState(BigInt(0)),[r]=et.useState(()=>CR(()=>e(a=>a+BigInt(1))));return kR(()=>{const a=r.get();a.length&&(n(a),r.reset())},[t]),r}function CR(n){let t=[];return{get:()=>t,reset:()=>{t=[]},push:e=>{t.push(e),n()}}}const pA=et.createContext(null);function DR({children:n}){const t=le(),e=et.useCallback(d=>{const{nodes:h=[],setNodes:g,hasDefaultNodes:p,onNodesChange:w,nodeLookup:v,fitViewQueued:S}=t.getState();let A=h;for(const k of d)A=typeof k=="function"?k(A):k;const T=R1({items:A,lookup:v});p&&g(A),T.length>0?w==null||w(T):S&&window.requestAnimationFrame(()=>{const{fitViewQueued:k,nodes:D,setNodes:L}=t.getState();k&&L(D)})},[]),r=L1(e),a=et.useCallback(d=>{const{edges:h=[],setEdges:g,hasDefaultEdges:p,onEdgesChange:w,edgeLookup:v}=t.getState();let S=h;for(const A of d)S=typeof A=="function"?A(S):A;p?g(S):w&&w(R1({items:S,lookup:v}))},[]),l=L1(a),c=et.useMemo(()=>({nodeQueue:r,edgeQueue:l}),[]);return tt.jsx(pA.Provider,{value:c,children:n})}function IR(){const n=et.useContext(pA);if(!n)throw new Error("useBatchContext must be used within a BatchProvider");return n}const OR=n=>!!n.panZoom;function s0(){const n=xR(),t=le(),e=IR(),r=Vt(OR),a=et.useMemo(()=>{const l=w=>t.getState().nodeLookup.get(w),c=w=>{e.nodeQueue.push(w)},d=w=>{e.edgeQueue.push(w)},h=w=>{var D,L;const{nodeLookup:v,nodeOrigin:S}=t.getState(),A=z1(w)?w:v.get(w.id),T=A.parentId?KT(A.position,A.measured,A.parentId,v,S):A.position,k={...A,position:T,width:((D=A.measured)==null?void 0:D.width)??A.width,height:((L=A.measured)==null?void 0:L.height)??A.height};return Dl(k)},g=(w,v,S={replace:!1})=>{c(A=>A.map(T=>{if(T.id===w){const k=typeof v=="function"?v(T):v;return S.replace&&z1(k)?k:{...T,...k}}return T}))},p=(w,v,S={replace:!1})=>{d(A=>A.map(T=>{if(T.id===w){const k=typeof v=="function"?v(T):v;return S.replace&&NR(k)?k:{...T,...k}}return T}))};return{getNodes:()=>t.getState().nodes.map(w=>({...w})),getNode:w=>{var v;return(v=l(w))==null?void 0:v.internals.userNode},getInternalNode:l,getEdges:()=>{const{edges:w=[]}=t.getState();return w.map(v=>({...v}))},getEdge:w=>t.getState().edgeLookup.get(w),setNodes:c,setEdges:d,addNodes:w=>{const v=Array.isArray(w)?w:[w];e.nodeQueue.push(S=>[...S,...v])},addEdges:w=>{const v=Array.isArray(w)?w:[w];e.edgeQueue.push(S=>[...S,...v])},toObject:()=>{const{nodes:w=[],edges:v=[],transform:S}=t.getState(),[A,T,k]=S;return{nodes:w.map(D=>({...D})),edges:v.map(D=>({...D})),viewport:{x:A,y:T,zoom:k}}},deleteElements:async({nodes:w=[],edges:v=[]})=>{const{nodes:S,edges:A,onNodesDelete:T,onEdgesDelete:k,triggerNodeChanges:D,triggerEdgeChanges:L,onDelete:N,onBeforeDelete:O}=t.getState(),{nodes:B,edges:U}=await WO({nodesToRemove:w,edgesToRemove:v,nodes:S,edges:A,onBeforeDelete:O}),J=U.length>0,j=B.length>0;if(J){const W=U.map(B1);k==null||k(U),L(W)}if(j){const W=B.map(B1);T==null||T(B),D(W)}return(j||J)&&(N==null||N({nodes:B,edges:U})),{deletedNodes:B,deletedEdges:U}},getIntersectingNodes:(w,v=!0,S)=>{const A=l1(w),T=A?w:h(w),k=S!==void 0;return T?(S||t.getState().nodes).filter(D=>{const L=t.getState().nodeLookup.get(D.id);if(L&&!A&&(D.id===w.id||!L.internals.positionAbsolute))return!1;const N=Dl(k?D:L),O=wc(N,T);return v&&O>0||O>=N.width*N.height||O>=T.width*T.height}):[]},isNodeIntersecting:(w,v,S=!0)=>{const T=l1(w)?w:h(w);if(!T)return!1;const k=wc(T,v);return S&&k>0||k>=T.width*T.height},updateNode:g,updateNodeData:(w,v,S={replace:!1})=>{g(w,A=>{const T=typeof v=="function"?v(A):v;return S.replace?{...A,data:T}:{...A,data:{...A.data,...T}}},S)},updateEdge:p,updateEdgeData:(w,v,S={replace:!1})=>{p(w,A=>{const T=typeof v=="function"?v(A):v;return S.replace?{...A,data:T}:{...A,data:{...A.data,...T}}},S)},getNodesBounds:w=>{const{nodeLookup:v,nodeOrigin:S}=t.getState();return FO(w,{nodeLookup:v,nodeOrigin:S})},getHandleConnections:({type:w,id:v,nodeId:S})=>{var A;return Array.from(((A=t.getState().connectionLookup.get(`${S}-${w}${v?`-${v}`:""}`))==null?void 0:A.values())??[])},getNodeConnections:({type:w,handleId:v,nodeId:S})=>{var A;return Array.from(((A=t.getState().connectionLookup.get(`${S}${w?v?`-${w}-${v}`:`-${w}`:""}`))==null?void 0:A.values())??[])},fitView:async w=>{const v=t.getState().fitViewResolver??rM();return t.setState({fitViewQueued:!0,fitViewOptions:w,fitViewResolver:v}),e.nodeQueue.push(S=>[...S]),v.promise}}},[]);return et.useMemo(()=>({...a,...n,viewportInitialized:r}),[r])}const U1=n=>n.selected,MR=typeof window<"u"?window:void 0;function RR({deleteKeyCode:n,multiSelectionKeyCode:t}){const e=le(),{deleteElements:r}=s0(),a=bc(n,{actInsideInputWithModifier:!1}),l=bc(t,{target:MR});et.useEffect(()=>{if(a){const{edges:c,nodes:d}=e.getState();r({nodes:d.filter(U1),edges:c.filter(U1)}),e.setState({nodesSelectionActive:!1})}},[a]),et.useEffect(()=>{e.setState({multiSelectionActive:l})},[l])}function BR(n){const t=le();et.useEffect(()=>{const e=()=>{var a,l;if(!n.current)return!1;const r=t0(n.current);(r.height===0||r.width===0)&&((l=(a=t.getState()).onError)==null||l.call(a,"004",Ir.error004())),t.setState({width:r.width||500,height:r.height||500})};if(n.current){e(),window.addEventListener("resize",e);const r=new ResizeObserver(()=>e());return r.observe(n.current),()=>{window.removeEventListener("resize",e),r&&n.current&&r.unobserve(n.current)}}},[])}const Ih={position:"absolute",width:"100%",height:"100%",top:0,left:0},zR=n=>({userSelectionActive:n.userSelectionActive,lib:n.lib});function LR({onPaneContextMenu:n,zoomOnScroll:t=!0,zoomOnPinch:e=!0,panOnScroll:r=!1,panOnScrollSpeed:a=.5,panOnScrollMode:l=no.Free,zoomOnDoubleClick:c=!0,panOnDrag:d=!0,defaultViewport:h,translateExtent:g,minZoom:p,maxZoom:w,zoomActivationKeyCode:v,preventScrolling:S=!0,children:A,noWheelClassName:T,noPanClassName:k,onViewportChange:D,isControlledViewport:L,paneClickDistance:N}){const O=le(),B=et.useRef(null),{userSelectionActive:U,lib:J}=Vt(zR,de),j=bc(v),W=et.useRef();BR(B);const ft=et.useCallback(nt=>{D==null||D({x:nt[0],y:nt[1],zoom:nt[2]}),L||O.setState({transform:nt})},[D,L]);return et.useEffect(()=>{if(B.current){W.current=_M({domNode:B.current,minZoom:p,maxZoom:w,translateExtent:g,viewport:h,paneClickDistance:N,onDraggingChange:M=>O.setState({paneDragging:M}),onPanZoomStart:(M,K)=>{const{onViewportChangeStart:I,onMoveStart:z}=O.getState();z==null||z(M,K),I==null||I(K)},onPanZoom:(M,K)=>{const{onViewportChange:I,onMove:z}=O.getState();z==null||z(M,K),I==null||I(K)},onPanZoomEnd:(M,K)=>{const{onViewportChangeEnd:I,onMoveEnd:z}=O.getState();z==null||z(M,K),I==null||I(K)}});const{x:nt,y:rt,zoom:ot}=W.current.getViewport();return O.setState({panZoom:W.current,transform:[nt,rt,ot],domNode:B.current.closest(".react-flow")}),()=>{var M;(M=W.current)==null||M.destroy()}}},[]),et.useEffect(()=>{var nt;(nt=W.current)==null||nt.update({onPaneContextMenu:n,zoomOnScroll:t,zoomOnPinch:e,panOnScroll:r,panOnScrollSpeed:a,panOnScrollMode:l,zoomOnDoubleClick:c,panOnDrag:d,zoomActivationKeyPressed:j,preventScrolling:S,noPanClassName:k,userSelectionActive:U,noWheelClassName:T,lib:J,onTransformChange:ft})},[n,t,e,r,a,l,c,d,j,S,k,U,T,J,ft]),tt.jsx("div",{className:"react-flow__renderer",ref:B,style:Ih,children:A})}const UR=n=>({userSelectionActive:n.userSelectionActive,userSelectionRect:n.userSelectionRect});function _R(){const{userSelectionActive:n,userSelectionRect:t}=Vt(UR,de);return n&&t?tt.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}const my=(n,t)=>e=>{e.target===t.current&&(n==null||n(e))},PR=n=>({userSelectionActive:n.userSelectionActive,elementsSelectable:n.elementsSelectable,connectionInProgress:n.connection.inProgress,dragging:n.paneDragging});function qR({isSelecting:n,selectionKeyPressed:t,selectionMode:e=vc.Full,panOnDrag:r,selectionOnDrag:a,onSelectionStart:l,onSelectionEnd:c,onPaneClick:d,onPaneContextMenu:h,onPaneScroll:g,onPaneMouseEnter:p,onPaneMouseMove:w,onPaneMouseLeave:v,children:S}){const A=le(),{userSelectionActive:T,elementsSelectable:k,dragging:D,connectionInProgress:L}=Vt(PR,de),N=k&&(n||T),O=et.useRef(null),B=et.useRef(),U=et.useRef(new Set),J=et.useRef(new Set),j=et.useRef(!1),W=et.useRef(!1),ft=z=>{if(j.current||L){j.current=!1;return}d==null||d(z),A.getState().resetSelectedElements(),A.setState({nodesSelectionActive:!1})},nt=z=>{if(Array.isArray(r)&&(r!=null&&r.includes(2))){z.preventDefault();return}h==null||h(z)},rt=g?z=>g(z):void 0,ot=z=>{var Z,it;const{resetSelectedElements:Y,domNode:$}=A.getState();if(B.current=$==null?void 0:$.getBoundingClientRect(),!k||!n||z.button!==0||z.target!==O.current||!B.current)return;(it=(Z=z.target)==null?void 0:Z.setPointerCapture)==null||it.call(Z,z.pointerId),W.current=!0,j.current=!1;const{x:C,y:_}=xr(z.nativeEvent,B.current);Y(),A.setState({userSelectionRect:{width:0,height:0,startX:C,startY:_,x:C,y:_}}),l==null||l(z)},M=z=>{const{userSelectionRect:Y,transform:$,nodeLookup:C,edgeLookup:_,connectionLookup:Z,triggerNodeChanges:it,triggerEdgeChanges:lt,defaultEdgeOptions:yt}=A.getState();if(!B.current||!Y)return;j.current=!0;const{x:ht,y:vt}=xr(z.nativeEvent,B.current),{startX:mt,startY:bt}=Y,Jt={startX:mt,startY:bt,x:ht<mt?ht:mt,y:vt<bt?vt:bt,width:Math.abs(ht-mt),height:Math.abs(vt-bt)},Rt=U.current,Nt=J.current;U.current=new Set(Qp(C,Jt,$,e===vc.Partial,!0).map(Ct=>Ct.id)),J.current=new Set;const Ot=(yt==null?void 0:yt.selectable)??!0;for(const Ct of U.current){const Zt=Z.get(Ct);if(Zt)for(const{edgeId:ue}of Zt.values()){const be=_.get(ue);be&&(be.selectable??Ot)&&J.current.add(ue)}}if(!u1(Rt,U.current)){const Ct=ol(C,U.current,!0);it(Ct)}if(!u1(Nt,J.current)){const Ct=ol(_,J.current);lt(Ct)}A.setState({userSelectionRect:Jt,userSelectionActive:!0,nodesSelectionActive:!1})},K=z=>{var $,C;if(z.button!==0||!W.current)return;(C=($=z.target)==null?void 0:$.releasePointerCapture)==null||C.call($,z.pointerId);const{userSelectionRect:Y}=A.getState();!T&&Y&&z.target===O.current&&(ft==null||ft(z)),A.setState({userSelectionActive:!1,userSelectionRect:null,nodesSelectionActive:U.current.size>0}),c==null||c(z),(t||a)&&(j.current=!1),W.current=!1},I=r===!0||Array.isArray(r)&&r.includes(0);return tt.jsxs("div",{className:Ne(["react-flow__pane",{draggable:I,dragging:D,selection:n}]),onClick:N?void 0:my(ft,O),onContextMenu:my(nt,O),onWheel:my(rt,O),onPointerEnter:N?void 0:p,onPointerDown:N?ot:w,onPointerMove:N?M:w,onPointerUp:N?K:void 0,onPointerLeave:v,ref:O,style:Ih,children:[S,tt.jsx(_R,{})]})}function Tp({id:n,store:t,unselect:e=!1,nodeRef:r}){const{addSelectedNodes:a,unselectNodesAndEdges:l,multiSelectionActive:c,nodeLookup:d,onError:h}=t.getState(),g=d.get(n);if(!g){h==null||h("012",Ir.error012(n));return}t.setState({nodesSelectionActive:!1}),g.selected?(e||g.selected&&c)&&(l({nodes:[g],edges:[]}),requestAnimationFrame(()=>{var p;return(p=r==null?void 0:r.current)==null?void 0:p.blur()})):a([n])}function vA({nodeRef:n,disabled:t=!1,noDragClassName:e,handleSelector:r,nodeId:a,isSelectable:l,nodeClickDistance:c}){const d=le(),[h,g]=et.useState(!1),p=et.useRef();return et.useEffect(()=>{p.current=TM({getStoreItems:()=>d.getState(),onNodeMouseDown:w=>{Tp({id:w,store:d,nodeRef:n})},onDragStart:()=>{g(!0)},onDragStop:()=>{g(!1)}})},[]),et.useEffect(()=>{var w,v;if(t)(w=p.current)==null||w.destroy();else if(n.current)return(v=p.current)==null||v.update({noDragClassName:e,handleSelector:r,domNode:n.current,isSelectable:l,nodeId:a,nodeClickDistance:c}),()=>{var S;(S=p.current)==null||S.destroy()}},[e,r,t,l,n,a]),h}const JR=n=>t=>t.selected&&(t.draggable||n&&typeof t.draggable>"u");function wA(){const n=le();return et.useCallback(e=>{const{nodeExtent:r,snapToGrid:a,snapGrid:l,nodesDraggable:c,onError:d,updateNodePositions:h,nodeLookup:g,nodeOrigin:p}=n.getState(),w=new Map,v=JR(c),S=a?l[0]:5,A=a?l[1]:5,T=e.direction.x*S*e.factor,k=e.direction.y*A*e.factor;for(const[,D]of g){if(!v(D))continue;let L={x:D.internals.positionAbsolute.x+T,y:D.internals.positionAbsolute.y+k};a&&(L=Nh(L,l));const{position:N,positionAbsolute:O}=JT({nodeId:D.id,nextPosition:L,nodeLookup:g,nodeExtent:r,nodeOrigin:p,onError:d});D.position=N,D.internals.positionAbsolute=O,w.set(D.id,D)}h(w)},[])}const a0=et.createContext(null),$R=a0.Provider;a0.Consumer;const SA=()=>et.useContext(a0),HR=n=>({connectOnClick:n.connectOnClick,noPanClassName:n.noPanClassName,rfId:n.rfId}),VR=(n,t,e)=>r=>{const{connectionClickStartHandle:a,connectionMode:l,connection:c}=r,{fromHandle:d,toHandle:h,isValid:g}=c,p=(h==null?void 0:h.nodeId)===n&&(h==null?void 0:h.id)===t&&(h==null?void 0:h.type)===e;return{connectingFrom:(d==null?void 0:d.nodeId)===n&&(d==null?void 0:d.id)===t&&(d==null?void 0:d.type)===e,connectingTo:p,clickConnecting:(a==null?void 0:a.nodeId)===n&&(a==null?void 0:a.id)===t&&(a==null?void 0:a.type)===e,isPossibleEndHandle:l===kl.Strict?(d==null?void 0:d.type)!==e:n!==(d==null?void 0:d.nodeId)||t!==(d==null?void 0:d.id),connectionInProcess:!!d,clickConnectionInProcess:!!a,valid:p&&g}};function jR({type:n="source",position:t=Et.Top,isValidConnection:e,isConnectable:r=!0,isConnectableStart:a=!0,isConnectableEnd:l=!0,id:c,onConnect:d,children:h,className:g,onMouseDown:p,onTouchStart:w,...v},S){var K,I;const A=c||null,T=n==="target",k=le(),D=SA(),{connectOnClick:L,noPanClassName:N,rfId:O}=Vt(HR,de),{connectingFrom:B,connectingTo:U,clickConnecting:J,isPossibleEndHandle:j,connectionInProcess:W,clickConnectionInProcess:ft,valid:nt}=Vt(VR(D,A,n),de);D||(I=(K=k.getState()).onError)==null||I.call(K,"010",Ir.error010());const rt=z=>{const{defaultEdgeOptions:Y,onConnect:$,hasDefaultEdges:C}=k.getState(),_={...Y,...z};if(C){const{edges:Z,setEdges:it}=k.getState();it(cM(_,Z))}$==null||$(_),d==null||d(_)},ot=z=>{if(!D)return;const Y=FT(z.nativeEvent);if(a&&(Y&&z.button===0||!Y)){const $=k.getState();xp.onPointerDown(z.nativeEvent,{autoPanOnConnect:$.autoPanOnConnect,connectionMode:$.connectionMode,connectionRadius:$.connectionRadius,domNode:$.domNode,nodeLookup:$.nodeLookup,lib:$.lib,isTarget:T,handleId:A,nodeId:D,flowId:$.rfId,panBy:$.panBy,cancelConnection:$.cancelConnection,onConnectStart:$.onConnectStart,onConnectEnd:$.onConnectEnd,updateConnection:$.updateConnection,onConnect:rt,isValidConnection:e||$.isValidConnection,getTransform:()=>k.getState().transform,getFromHandle:()=>k.getState().connection.fromHandle,autoPanSpeed:$.autoPanSpeed,dragThreshold:$.connectionDragThreshold})}Y?p==null||p(z):w==null||w(z)},M=z=>{const{onClickConnectStart:Y,onClickConnectEnd:$,connectionClickStartHandle:C,connectionMode:_,isValidConnection:Z,lib:it,rfId:lt,nodeLookup:yt,connection:ht}=k.getState();if(!D||!C&&!a)return;if(!C){Y==null||Y(z.nativeEvent,{nodeId:D,handleId:A,handleType:n}),k.setState({connectionClickStartHandle:{nodeId:D,type:n,id:A}});return}const vt=YT(z.target),mt=e||Z,{connection:bt,isValid:Jt}=xp.isValid(z.nativeEvent,{handle:{nodeId:D,id:A,type:n},connectionMode:_,fromNodeId:C.nodeId,fromHandleId:C.id||null,fromType:C.type,isValidConnection:mt,flowId:lt,doc:vt,lib:it,nodeLookup:yt});Jt&&bt&&rt(bt);const Rt=structuredClone(ht);delete Rt.inProgress,Rt.toPosition=Rt.toHandle?Rt.toHandle.position:null,$==null||$(z,Rt),k.setState({connectionClickStartHandle:null})};return tt.jsx("div",{"data-handleid":A,"data-nodeid":D,"data-handlepos":t,"data-id":`${O}-${D}-${A}-${n}`,className:Ne(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",N,g,{source:!T,target:T,connectable:r,connectablestart:a,connectableend:l,clickconnecting:J,connectingfrom:B,connectingto:U,valid:nt,connectionindicator:r&&(!W||j)&&(W||ft?l:a)}]),onMouseDown:ot,onTouchStart:ot,onClick:L?M:void 0,ref:S,...v,children:h})}const uh=et.memo(yA(jR));function KR({data:n,isConnectable:t,sourcePosition:e=Et.Bottom}){return tt.jsxs(tt.Fragment,{children:[n==null?void 0:n.label,tt.jsx(uh,{type:"source",position:e,isConnectable:t})]})}function YR({data:n,isConnectable:t,targetPosition:e=Et.Top,sourcePosition:r=Et.Bottom}){return tt.jsxs(tt.Fragment,{children:[tt.jsx(uh,{type:"target",position:e,isConnectable:t}),n==null?void 0:n.label,tt.jsx(uh,{type:"source",position:r,isConnectable:t})]})}function GR(){return null}function FR({data:n,isConnectable:t,targetPosition:e=Et.Top}){return tt.jsxs(tt.Fragment,{children:[tt.jsx(uh,{type:"target",position:e,isConnectable:t}),n==null?void 0:n.label]})}const ch={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},_1={input:KR,default:YR,output:FR,group:GR};function XR(n){var t,e,r,a;return n.internals.handleBounds===void 0?{width:n.width??n.initialWidth??((t=n.style)==null?void 0:t.width),height:n.height??n.initialHeight??((e=n.style)==null?void 0:e.height)}:{width:n.width??((r=n.style)==null?void 0:r.width),height:n.height??((a=n.style)==null?void 0:a.height)}}const ZR=n=>{const{width:t,height:e,x:r,y:a}=Ic(n.nodeLookup,{filter:l=>!!l.selected});return{width:rr(t)?t:null,height:rr(e)?e:null,userSelectionActive:n.userSelectionActive,transformString:`translate(${n.transform[0]}px,${n.transform[1]}px) scale(${n.transform[2]}) translate(${r}px,${a}px)`}};function QR({onSelectionContextMenu:n,noPanClassName:t,disableKeyboardA11y:e}){const r=le(),{width:a,height:l,transformString:c,userSelectionActive:d}=Vt(ZR,de),h=wA(),g=et.useRef(null);if(et.useEffect(()=>{var v;e||(v=g.current)==null||v.focus({preventScroll:!0})},[e]),vA({nodeRef:g}),d||!a||!l)return null;const p=n?v=>{const S=r.getState().nodes.filter(A=>A.selected);n(v,S)}:void 0,w=v=>{Object.prototype.hasOwnProperty.call(ch,v.key)&&(v.preventDefault(),h({direction:ch[v.key],factor:v.shiftKey?4:1}))};return tt.jsx("div",{className:Ne(["react-flow__nodesselection","react-flow__container",t]),style:{transform:c},children:tt.jsx("div",{ref:g,className:"react-flow__nodesselection-rect",onContextMenu:p,tabIndex:e?void 0:-1,onKeyDown:e?void 0:w,style:{width:a,height:l}})})}const P1=typeof window<"u"?window:void 0,WR=n=>({nodesSelectionActive:n.nodesSelectionActive,userSelectionActive:n.userSelectionActive});function bA({children:n,onPaneClick:t,onPaneMouseEnter:e,onPaneMouseMove:r,onPaneMouseLeave:a,onPaneContextMenu:l,onPaneScroll:c,paneClickDistance:d,deleteKeyCode:h,selectionKeyCode:g,selectionOnDrag:p,selectionMode:w,onSelectionStart:v,onSelectionEnd:S,multiSelectionKeyCode:A,panActivationKeyCode:T,zoomActivationKeyCode:k,elementsSelectable:D,zoomOnScroll:L,zoomOnPinch:N,panOnScroll:O,panOnScrollSpeed:B,panOnScrollMode:U,zoomOnDoubleClick:J,panOnDrag:j,defaultViewport:W,translateExtent:ft,minZoom:nt,maxZoom:rt,preventScrolling:ot,onSelectionContextMenu:M,noWheelClassName:K,noPanClassName:I,disableKeyboardA11y:z,onViewportChange:Y,isControlledViewport:$}){const{nodesSelectionActive:C,userSelectionActive:_}=Vt(WR),Z=bc(g,{target:P1}),it=bc(T,{target:P1}),lt=it||j,yt=it||O,ht=p&&lt!==!0,vt=Z||_||ht;return RR({deleteKeyCode:h,multiSelectionKeyCode:A}),tt.jsx(LR,{onPaneContextMenu:l,elementsSelectable:D,zoomOnScroll:L,zoomOnPinch:N,panOnScroll:yt,panOnScrollSpeed:B,panOnScrollMode:U,zoomOnDoubleClick:J,panOnDrag:!Z&&lt,defaultViewport:W,translateExtent:ft,minZoom:nt,maxZoom:rt,zoomActivationKeyCode:k,preventScrolling:ot,noWheelClassName:K,noPanClassName:I,onViewportChange:Y,isControlledViewport:$,paneClickDistance:d,children:tt.jsxs(qR,{onSelectionStart:v,onSelectionEnd:S,onPaneClick:t,onPaneMouseEnter:e,onPaneMouseMove:r,onPaneMouseLeave:a,onPaneContextMenu:l,onPaneScroll:c,panOnDrag:lt,isSelecting:!!vt,selectionMode:w,selectionKeyPressed:Z,selectionOnDrag:ht,children:[n,C&&tt.jsx(QR,{onSelectionContextMenu:M,noPanClassName:I,disableKeyboardA11y:z})]})})}bA.displayName="FlowRenderer";const tB=et.memo(bA),eB=n=>t=>n?Qp(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map(e=>e.id):Array.from(t.nodeLookup.keys());function nB(n){return Vt(et.useCallback(eB(n),[n]),de)}const rB=n=>n.updateNodeInternals;function iB(){const n=Vt(rB),[t]=et.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(e=>{const r=new Map;e.forEach(a=>{const l=a.target.getAttribute("data-id");r.set(l,{id:l,nodeElement:a.target,force:!0})}),n(r)}));return et.useEffect(()=>()=>{t==null||t.disconnect()},[t]),t}function sB({node:n,nodeType:t,hasDimensions:e,resizeObserver:r}){const a=le(),l=et.useRef(null),c=et.useRef(null),d=et.useRef(n.sourcePosition),h=et.useRef(n.targetPosition),g=et.useRef(t),p=e&&!!n.internals.handleBounds;return et.useEffect(()=>{l.current&&!n.hidden&&(!p||c.current!==l.current)&&(c.current&&(r==null||r.unobserve(c.current)),r==null||r.observe(l.current),c.current=l.current)},[p,n.hidden]),et.useEffect(()=>()=>{c.current&&(r==null||r.unobserve(c.current),c.current=null)},[]),et.useEffect(()=>{if(l.current){const w=g.current!==t,v=d.current!==n.sourcePosition,S=h.current!==n.targetPosition;(w||v||S)&&(g.current=t,d.current=n.sourcePosition,h.current=n.targetPosition,a.getState().updateNodeInternals(new Map([[n.id,{id:n.id,nodeElement:l.current,force:!0}]])))}},[n.id,t,n.sourcePosition,n.targetPosition]),l}function aB({id:n,onClick:t,onMouseEnter:e,onMouseMove:r,onMouseLeave:a,onContextMenu:l,onDoubleClick:c,nodesDraggable:d,elementsSelectable:h,nodesConnectable:g,nodesFocusable:p,resizeObserver:w,noDragClassName:v,noPanClassName:S,disableKeyboardA11y:A,rfId:T,nodeTypes:k,nodeClickDistance:D,onError:L}){const{node:N,internals:O,isParent:B}=Vt(mt=>{const bt=mt.nodeLookup.get(n),Jt=mt.parentLookup.has(n);return{node:bt,internals:bt.internals,isParent:Jt}},de);let U=N.type||"default",J=(k==null?void 0:k[U])||_1[U];J===void 0&&(L==null||L("003",Ir.error003(U)),U="default",J=(k==null?void 0:k.default)||_1.default);const j=!!(N.draggable||d&&typeof N.draggable>"u"),W=!!(N.selectable||h&&typeof N.selectable>"u"),ft=!!(N.connectable||g&&typeof N.connectable>"u"),nt=!!(N.focusable||p&&typeof N.focusable>"u"),rt=le(),ot=jT(N),M=sB({node:N,nodeType:U,hasDimensions:ot,resizeObserver:w}),K=vA({nodeRef:M,disabled:N.hidden||!j,noDragClassName:v,handleSelector:N.dragHandle,nodeId:n,isSelectable:W,nodeClickDistance:D}),I=wA();if(N.hidden)return null;const z=Ls(N),Y=XR(N),$=W||j||t||e||r||a,C=e?mt=>e(mt,{...O.userNode}):void 0,_=r?mt=>r(mt,{...O.userNode}):void 0,Z=a?mt=>a(mt,{...O.userNode}):void 0,it=l?mt=>l(mt,{...O.userNode}):void 0,lt=c?mt=>c(mt,{...O.userNode}):void 0,yt=mt=>{const{selectNodesOnDrag:bt,nodeDragThreshold:Jt}=rt.getState();W&&(!bt||!j||Jt>0)&&Tp({id:n,store:rt,nodeRef:M}),t&&t(mt,{...O.userNode})},ht=mt=>{if(!(GT(mt.nativeEvent)||A)){if(LT.includes(mt.key)&&W){const bt=mt.key==="Escape";Tp({id:n,store:rt,unselect:bt,nodeRef:M})}else if(j&&N.selected&&Object.prototype.hasOwnProperty.call(ch,mt.key)){mt.preventDefault();const{ariaLabelConfig:bt}=rt.getState();rt.setState({ariaLiveMessage:bt["node.a11yDescription.ariaLiveMessage"]({direction:mt.key.replace("Arrow","").toLowerCase(),x:~~O.positionAbsolute.x,y:~~O.positionAbsolute.y})}),I({direction:ch[mt.key],factor:mt.shiftKey?4:1})}}},vt=()=>{var Ct;if(A||!((Ct=M.current)!=null&&Ct.matches(":focus-visible")))return;const{transform:mt,width:bt,height:Jt,autoPanOnNodeFocus:Rt,setCenter:Nt}=rt.getState();if(!Rt)return;Qp(new Map([[n,N]]),{x:0,y:0,width:bt,height:Jt},mt,!0).length>0||Nt(N.position.x+z.width/2,N.position.y+z.height/2,{zoom:mt[2]})};return tt.jsx("div",{className:Ne(["react-flow__node",`react-flow__node-${U}`,{[S]:j},N.className,{selected:N.selected,selectable:W,parent:B,draggable:j,dragging:K}]),ref:M,style:{zIndex:O.z,transform:`translate(${O.positionAbsolute.x}px,${O.positionAbsolute.y}px)`,pointerEvents:$?"all":"none",visibility:ot?"visible":"hidden",...N.style,...Y},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:C,onMouseMove:_,onMouseLeave:Z,onContextMenu:it,onClick:yt,onDoubleClick:lt,onKeyDown:nt?ht:void 0,tabIndex:nt?0:void 0,onFocus:nt?vt:void 0,role:N.ariaRole??(nt?"group":void 0),"aria-roledescription":"node","aria-describedby":A?void 0:`${dA}-${T}`,"aria-label":N.ariaLabel,...N.domAttributes,children:tt.jsx($R,{value:n,children:tt.jsx(J,{id:n,data:N.data,type:U,positionAbsoluteX:O.positionAbsolute.x,positionAbsoluteY:O.positionAbsolute.y,selected:N.selected??!1,selectable:W,draggable:j,deletable:N.deletable??!0,isConnectable:ft,sourcePosition:N.sourcePosition,targetPosition:N.targetPosition,dragging:K,dragHandle:N.dragHandle,zIndex:O.z,parentId:N.parentId,...z})})})}const oB=n=>({nodesDraggable:n.nodesDraggable,nodesConnectable:n.nodesConnectable,nodesFocusable:n.nodesFocusable,elementsSelectable:n.elementsSelectable,onError:n.onError});function xA(n){const{nodesDraggable:t,nodesConnectable:e,nodesFocusable:r,elementsSelectable:a,onError:l}=Vt(oB,de),c=nB(n.onlyRenderVisibleElements),d=iB();return tt.jsx("div",{className:"react-flow__nodes",style:Ih,children:c.map(h=>tt.jsx(aB,{id:h,nodeTypes:n.nodeTypes,nodeExtent:n.nodeExtent,onClick:n.onNodeClick,onMouseEnter:n.onNodeMouseEnter,onMouseMove:n.onNodeMouseMove,onMouseLeave:n.onNodeMouseLeave,onContextMenu:n.onNodeContextMenu,onDoubleClick:n.onNodeDoubleClick,noDragClassName:n.noDragClassName,noPanClassName:n.noPanClassName,rfId:n.rfId,disableKeyboardA11y:n.disableKeyboardA11y,resizeObserver:d,nodesDraggable:t,nodesConnectable:e,nodesFocusable:r,elementsSelectable:a,nodeClickDistance:n.nodeClickDistance,onError:l},h))})}xA.displayName="NodeRenderer";const lB=et.memo(xA);function uB(n){return Vt(et.useCallback(e=>{if(!n)return e.edges.map(a=>a.id);const r=[];if(e.width&&e.height)for(const a of e.edges){const l=e.nodeLookup.get(a.source),c=e.nodeLookup.get(a.target);l&&c&&oM({sourceNode:l,targetNode:c,width:e.width,height:e.height,transform:e.transform})&&r.push(a.id)}return r},[n]),de)}const cB=({color:n="none",strokeWidth:t=1})=>tt.jsx("polyline",{style:{stroke:n,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),fB=({color:n="none",strokeWidth:t=1})=>tt.jsx("polyline",{style:{stroke:n,fill:n,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),q1={[sh.Arrow]:cB,[sh.ArrowClosed]:fB};function dB(n){const t=le();return et.useMemo(()=>{var a,l;return Object.prototype.hasOwnProperty.call(q1,n)?q1[n]:((l=(a=t.getState()).onError)==null||l.call(a,"009",Ir.error009(n)),null)},[n])}const hB=({id:n,type:t,color:e,width:r=12.5,height:a=12.5,markerUnits:l="strokeWidth",strokeWidth:c,orient:d="auto-start-reverse"})=>{const h=dB(t);return h?tt.jsx("marker",{className:"react-flow__arrowhead",id:n,markerWidth:`${r}`,markerHeight:`${a}`,viewBox:"-10 -10 20 20",markerUnits:l,orient:d,refX:"0",refY:"0",children:tt.jsx(h,{color:e,strokeWidth:c})}):null},TA=({defaultColor:n,rfId:t})=>{const e=Vt(l=>l.edges),r=Vt(l=>l.defaultEdgeOptions),a=et.useMemo(()=>mM(e,{id:t,defaultColor:n,defaultMarkerStart:r==null?void 0:r.markerStart,defaultMarkerEnd:r==null?void 0:r.markerEnd}),[e,r,t,n]);return a.length?tt.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:tt.jsx("defs",{children:a.map(l=>tt.jsx(hB,{id:l.id,type:l.type,color:l.color,width:l.width,height:l.height,markerUnits:l.markerUnits,strokeWidth:l.strokeWidth,orient:l.orient},l.id))})}):null};TA.displayName="MarkerDefinitions";var gB=et.memo(TA);function AA({x:n,y:t,label:e,labelStyle:r,labelShowBg:a=!0,labelBgStyle:l,labelBgPadding:c=[2,4],labelBgBorderRadius:d=2,children:h,className:g,...p}){const[w,v]=et.useState({x:1,y:0,width:0,height:0}),S=Ne(["react-flow__edge-textwrapper",g]),A=et.useRef(null);return et.useEffect(()=>{if(A.current){const T=A.current.getBBox();v({x:T.x,y:T.y,width:T.width,height:T.height})}},[e]),e?tt.jsxs("g",{transform:`translate(${n-w.width/2} ${t-w.height/2})`,className:S,visibility:w.width?"visible":"hidden",...p,children:[a&&tt.jsx("rect",{width:w.width+2*c[0],x:-c[0],y:-c[1],height:w.height+2*c[1],className:"react-flow__edge-textbg",style:l,rx:d,ry:d}),tt.jsx("text",{className:"react-flow__edge-text",y:w.height/2,dy:"0.3em",ref:A,style:r,children:e}),h]}):null}AA.displayName="EdgeText";const mB=et.memo(AA);function Oh({path:n,labelX:t,labelY:e,label:r,labelStyle:a,labelShowBg:l,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:h,interactionWidth:g=20,...p}){return tt.jsxs(tt.Fragment,{children:[tt.jsx("path",{...p,d:n,fill:"none",className:Ne(["react-flow__edge-path",p.className])}),g&&tt.jsx("path",{d:n,fill:"none",strokeOpacity:0,strokeWidth:g,className:"react-flow__edge-interaction"}),r&&rr(t)&&rr(e)?tt.jsx(mB,{x:t,y:e,label:r,labelStyle:a,labelShowBg:l,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:h}):null]})}function J1({pos:n,x1:t,y1:e,x2:r,y2:a}){return n===Et.Left||n===Et.Right?[.5*(t+r),e]:[t,.5*(e+a)]}function EA({sourceX:n,sourceY:t,sourcePosition:e=Et.Bottom,targetX:r,targetY:a,targetPosition:l=Et.Top}){const[c,d]=J1({pos:e,x1:n,y1:t,x2:r,y2:a}),[h,g]=J1({pos:l,x1:r,y1:a,x2:n,y2:t}),[p,w,v,S]=XT({sourceX:n,sourceY:t,targetX:r,targetY:a,sourceControlX:c,sourceControlY:d,targetControlX:h,targetControlY:g});return[`M${n},${t} C${c},${d} ${h},${g} ${r},${a}`,p,w,v,S]}function NA(n){return et.memo(({id:t,sourceX:e,sourceY:r,targetX:a,targetY:l,sourcePosition:c,targetPosition:d,label:h,labelStyle:g,labelShowBg:p,labelBgStyle:w,labelBgPadding:v,labelBgBorderRadius:S,style:A,markerEnd:T,markerStart:k,interactionWidth:D})=>{const[L,N,O]=EA({sourceX:e,sourceY:r,sourcePosition:c,targetX:a,targetY:l,targetPosition:d}),B=n.isInternal?void 0:t;return tt.jsx(Oh,{id:B,path:L,labelX:N,labelY:O,label:h,labelStyle:g,labelShowBg:p,labelBgStyle:w,labelBgPadding:v,labelBgBorderRadius:S,style:A,markerEnd:T,markerStart:k,interactionWidth:D})})}const yB=NA({isInternal:!1}),kA=NA({isInternal:!0});yB.displayName="SimpleBezierEdge";kA.displayName="SimpleBezierEdgeInternal";function CA(n){return et.memo(({id:t,sourceX:e,sourceY:r,targetX:a,targetY:l,label:c,labelStyle:d,labelShowBg:h,labelBgStyle:g,labelBgPadding:p,labelBgBorderRadius:w,style:v,sourcePosition:S=Et.Bottom,targetPosition:A=Et.Top,markerEnd:T,markerStart:k,pathOptions:D,interactionWidth:L})=>{const[N,O,B]=wp({sourceX:e,sourceY:r,sourcePosition:S,targetX:a,targetY:l,targetPosition:A,borderRadius:D==null?void 0:D.borderRadius,offset:D==null?void 0:D.offset,stepPosition:D==null?void 0:D.stepPosition}),U=n.isInternal?void 0:t;return tt.jsx(Oh,{id:U,path:N,labelX:O,labelY:B,label:c,labelStyle:d,labelShowBg:h,labelBgStyle:g,labelBgPadding:p,labelBgBorderRadius:w,style:v,markerEnd:T,markerStart:k,interactionWidth:L})})}const DA=CA({isInternal:!1}),IA=CA({isInternal:!0});DA.displayName="SmoothStepEdge";IA.displayName="SmoothStepEdgeInternal";function OA(n){return et.memo(({id:t,...e})=>{var a;const r=n.isInternal?void 0:t;return tt.jsx(DA,{...e,id:r,pathOptions:et.useMemo(()=>{var l;return{borderRadius:0,offset:(l=e.pathOptions)==null?void 0:l.offset}},[(a=e.pathOptions)==null?void 0:a.offset])})})}const pB=OA({isInternal:!1}),MA=OA({isInternal:!0});pB.displayName="StepEdge";MA.displayName="StepEdgeInternal";function RA(n){return et.memo(({id:t,sourceX:e,sourceY:r,targetX:a,targetY:l,label:c,labelStyle:d,labelShowBg:h,labelBgStyle:g,labelBgPadding:p,labelBgBorderRadius:w,style:v,markerEnd:S,markerStart:A,interactionWidth:T})=>{const[k,D,L]=WT({sourceX:e,sourceY:r,targetX:a,targetY:l}),N=n.isInternal?void 0:t;return tt.jsx(Oh,{id:N,path:k,labelX:D,labelY:L,label:c,labelStyle:d,labelShowBg:h,labelBgStyle:g,labelBgPadding:p,labelBgBorderRadius:w,style:v,markerEnd:S,markerStart:A,interactionWidth:T})})}const vB=RA({isInternal:!1}),BA=RA({isInternal:!0});vB.displayName="StraightEdge";BA.displayName="StraightEdgeInternal";function zA(n){return et.memo(({id:t,sourceX:e,sourceY:r,targetX:a,targetY:l,sourcePosition:c=Et.Bottom,targetPosition:d=Et.Top,label:h,labelStyle:g,labelShowBg:p,labelBgStyle:w,labelBgPadding:v,labelBgBorderRadius:S,style:A,markerEnd:T,markerStart:k,pathOptions:D,interactionWidth:L})=>{const[N,O,B]=ZT({sourceX:e,sourceY:r,sourcePosition:c,targetX:a,targetY:l,targetPosition:d,curvature:D==null?void 0:D.curvature}),U=n.isInternal?void 0:t;return tt.jsx(Oh,{id:U,path:N,labelX:O,labelY:B,label:h,labelStyle:g,labelShowBg:p,labelBgStyle:w,labelBgPadding:v,labelBgBorderRadius:S,style:A,markerEnd:T,markerStart:k,interactionWidth:L})})}const wB=zA({isInternal:!1}),LA=zA({isInternal:!0});wB.displayName="BezierEdge";LA.displayName="BezierEdgeInternal";const $1={default:LA,straight:BA,step:MA,smoothstep:IA,simplebezier:kA},H1={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},SB=(n,t,e)=>e===Et.Left?n-t:e===Et.Right?n+t:n,bB=(n,t,e)=>e===Et.Top?n-t:e===Et.Bottom?n+t:n,V1="react-flow__edgeupdater";function j1({position:n,centerX:t,centerY:e,radius:r=10,onMouseDown:a,onMouseEnter:l,onMouseOut:c,type:d}){return tt.jsx("circle",{onMouseDown:a,onMouseEnter:l,onMouseOut:c,className:Ne([V1,`${V1}-${d}`]),cx:SB(t,r,n),cy:bB(e,r,n),r,stroke:"transparent",fill:"transparent"})}function xB({isReconnectable:n,reconnectRadius:t,edge:e,sourceX:r,sourceY:a,targetX:l,targetY:c,sourcePosition:d,targetPosition:h,onReconnect:g,onReconnectStart:p,onReconnectEnd:w,setReconnecting:v,setUpdateHover:S}){const A=le(),T=(O,B)=>{if(O.button!==0)return;const{autoPanOnConnect:U,domNode:J,isValidConnection:j,connectionMode:W,connectionRadius:ft,lib:nt,onConnectStart:rt,onConnectEnd:ot,cancelConnection:M,nodeLookup:K,rfId:I,panBy:z,updateConnection:Y}=A.getState(),$=B.type==="target",C=(it,lt)=>{v(!1),w==null||w(it,e,B.type,lt)},_=it=>g==null?void 0:g(e,it),Z=(it,lt)=>{v(!0),p==null||p(O,e,B.type),rt==null||rt(it,lt)};xp.onPointerDown(O.nativeEvent,{autoPanOnConnect:U,connectionMode:W,connectionRadius:ft,domNode:J,handleId:B.id,nodeId:B.nodeId,nodeLookup:K,isTarget:$,edgeUpdaterType:B.type,lib:nt,flowId:I,cancelConnection:M,panBy:z,isValidConnection:j,onConnect:_,onConnectStart:Z,onConnectEnd:ot,onReconnectEnd:C,updateConnection:Y,getTransform:()=>A.getState().transform,getFromHandle:()=>A.getState().connection.fromHandle,dragThreshold:A.getState().connectionDragThreshold})},k=O=>T(O,{nodeId:e.target,id:e.targetHandle??null,type:"target"}),D=O=>T(O,{nodeId:e.source,id:e.sourceHandle??null,type:"source"}),L=()=>S(!0),N=()=>S(!1);return tt.jsxs(tt.Fragment,{children:[(n===!0||n==="source")&&tt.jsx(j1,{position:d,centerX:r,centerY:a,radius:t,onMouseDown:k,onMouseEnter:L,onMouseOut:N,type:"source"}),(n===!0||n==="target")&&tt.jsx(j1,{position:h,centerX:l,centerY:c,radius:t,onMouseDown:D,onMouseEnter:L,onMouseOut:N,type:"target"})]})}function TB({id:n,edgesFocusable:t,edgesReconnectable:e,elementsSelectable:r,onClick:a,onDoubleClick:l,onContextMenu:c,onMouseEnter:d,onMouseMove:h,onMouseLeave:g,reconnectRadius:p,onReconnect:w,onReconnectStart:v,onReconnectEnd:S,rfId:A,edgeTypes:T,noPanClassName:k,onError:D,disableKeyboardA11y:L}){let N=Vt(Nt=>Nt.edgeLookup.get(n));const O=Vt(Nt=>Nt.defaultEdgeOptions);N=O?{...O,...N}:N;let B=N.type||"default",U=(T==null?void 0:T[B])||$1[B];U===void 0&&(D==null||D("011",Ir.error011(B)),B="default",U=(T==null?void 0:T.default)||$1.default);const J=!!(N.focusable||t&&typeof N.focusable>"u"),j=typeof w<"u"&&(N.reconnectable||e&&typeof N.reconnectable>"u"),W=!!(N.selectable||r&&typeof N.selectable>"u"),ft=et.useRef(null),[nt,rt]=et.useState(!1),[ot,M]=et.useState(!1),K=le(),{zIndex:I,sourceX:z,sourceY:Y,targetX:$,targetY:C,sourcePosition:_,targetPosition:Z}=Vt(et.useCallback(Nt=>{const Ot=Nt.nodeLookup.get(N.source),Ct=Nt.nodeLookup.get(N.target);if(!Ot||!Ct)return{zIndex:N.zIndex,...H1};const Zt=gM({id:n,sourceNode:Ot,targetNode:Ct,sourceHandle:N.sourceHandle||null,targetHandle:N.targetHandle||null,connectionMode:Nt.connectionMode,onError:D});return{zIndex:aM({selected:N.selected,zIndex:N.zIndex,sourceNode:Ot,targetNode:Ct,elevateOnSelect:Nt.elevateEdgesOnSelect}),...Zt||H1}},[N.source,N.target,N.sourceHandle,N.targetHandle,N.selected,N.zIndex]),de),it=et.useMemo(()=>N.markerStart?`url('#${Sp(N.markerStart,A)}')`:void 0,[N.markerStart,A]),lt=et.useMemo(()=>N.markerEnd?`url('#${Sp(N.markerEnd,A)}')`:void 0,[N.markerEnd,A]);if(N.hidden||z===null||Y===null||$===null||C===null)return null;const yt=Nt=>{var ue;const{addSelectedEdges:Ot,unselectNodesAndEdges:Ct,multiSelectionActive:Zt}=K.getState();W&&(K.setState({nodesSelectionActive:!1}),N.selected&&Zt?(Ct({nodes:[],edges:[N]}),(ue=ft.current)==null||ue.blur()):Ot([n])),a&&a(Nt,N)},ht=l?Nt=>{l(Nt,{...N})}:void 0,vt=c?Nt=>{c(Nt,{...N})}:void 0,mt=d?Nt=>{d(Nt,{...N})}:void 0,bt=h?Nt=>{h(Nt,{...N})}:void 0,Jt=g?Nt=>{g(Nt,{...N})}:void 0,Rt=Nt=>{var Ot;if(!L&&LT.includes(Nt.key)&&W){const{unselectNodesAndEdges:Ct,addSelectedEdges:Zt}=K.getState();Nt.key==="Escape"?((Ot=ft.current)==null||Ot.blur(),Ct({edges:[N]})):Zt([n])}};return tt.jsx("svg",{style:{zIndex:I},children:tt.jsxs("g",{className:Ne(["react-flow__edge",`react-flow__edge-${B}`,N.className,k,{selected:N.selected,animated:N.animated,inactive:!W&&!a,updating:nt,selectable:W}]),onClick:yt,onDoubleClick:ht,onContextMenu:vt,onMouseEnter:mt,onMouseMove:bt,onMouseLeave:Jt,onKeyDown:J?Rt:void 0,tabIndex:J?0:void 0,role:N.ariaRole??(J?"group":"img"),"aria-roledescription":"edge","data-id":n,"data-testid":`rf__edge-${n}`,"aria-label":N.ariaLabel===null?void 0:N.ariaLabel||`Edge from ${N.source} to ${N.target}`,"aria-describedby":J?`${hA}-${A}`:void 0,ref:ft,...N.domAttributes,children:[!ot&&tt.jsx(U,{id:n,source:N.source,target:N.target,type:N.type,selected:N.selected,animated:N.animated,selectable:W,deletable:N.deletable??!0,label:N.label,labelStyle:N.labelStyle,labelShowBg:N.labelShowBg,labelBgStyle:N.labelBgStyle,labelBgPadding:N.labelBgPadding,labelBgBorderRadius:N.labelBgBorderRadius,sourceX:z,sourceY:Y,targetX:$,targetY:C,sourcePosition:_,targetPosition:Z,data:N.data,style:N.style,sourceHandleId:N.sourceHandle,targetHandleId:N.targetHandle,markerStart:it,markerEnd:lt,pathOptions:"pathOptions"in N?N.pathOptions:void 0,interactionWidth:N.interactionWidth}),j&&tt.jsx(xB,{edge:N,isReconnectable:j,reconnectRadius:p,onReconnect:w,onReconnectStart:v,onReconnectEnd:S,sourceX:z,sourceY:Y,targetX:$,targetY:C,sourcePosition:_,targetPosition:Z,setUpdateHover:rt,setReconnecting:M})]})})}const AB=n=>({edgesFocusable:n.edgesFocusable,edgesReconnectable:n.edgesReconnectable,elementsSelectable:n.elementsSelectable,connectionMode:n.connectionMode,onError:n.onError});function UA({defaultMarkerColor:n,onlyRenderVisibleElements:t,rfId:e,edgeTypes:r,noPanClassName:a,onReconnect:l,onEdgeContextMenu:c,onEdgeMouseEnter:d,onEdgeMouseMove:h,onEdgeMouseLeave:g,onEdgeClick:p,reconnectRadius:w,onEdgeDoubleClick:v,onReconnectStart:S,onReconnectEnd:A,disableKeyboardA11y:T}){const{edgesFocusable:k,edgesReconnectable:D,elementsSelectable:L,onError:N}=Vt(AB,de),O=uB(t);return tt.jsxs("div",{className:"react-flow__edges",children:[tt.jsx(gB,{defaultColor:n,rfId:e}),O.map(B=>tt.jsx(TB,{id:B,edgesFocusable:k,edgesReconnectable:D,elementsSelectable:L,noPanClassName:a,onReconnect:l,onContextMenu:c,onMouseEnter:d,onMouseMove:h,onMouseLeave:g,onClick:p,reconnectRadius:w,onDoubleClick:v,onReconnectStart:S,onReconnectEnd:A,rfId:e,onError:N,edgeTypes:r,disableKeyboardA11y:T},B))]})}UA.displayName="EdgeRenderer";const EB=et.memo(UA),NB=n=>`translate(${n.transform[0]}px,${n.transform[1]}px) scale(${n.transform[2]})`;function kB({children:n}){const t=Vt(NB);return tt.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:n})}function CB(n){const t=s0(),e=et.useRef(!1);et.useEffect(()=>{!e.current&&t.viewportInitialized&&n&&(setTimeout(()=>n(t),1),e.current=!0)},[n,t.viewportInitialized])}const DB=n=>{var t;return(t=n.panZoom)==null?void 0:t.syncViewport};function IB(n){const t=Vt(DB),e=le();return et.useEffect(()=>{n&&(t==null||t(n),e.setState({transform:[n.x,n.y,n.zoom]}))},[n,t]),null}function OB(n){return n.connection.inProgress?{...n.connection,to:Oc(n.connection.to,n.transform)}:{...n.connection}}function MB(n){return OB}function RB(n){const t=MB();return Vt(t,de)}const BB=n=>({nodesConnectable:n.nodesConnectable,isValid:n.connection.isValid,inProgress:n.connection.inProgress,width:n.width,height:n.height});function zB({containerStyle:n,style:t,type:e,component:r}){const{nodesConnectable:a,width:l,height:c,isValid:d,inProgress:h}=Vt(BB,de);return!(l&&a&&h)?null:tt.jsx("svg",{style:n,width:l,height:c,className:"react-flow__connectionline react-flow__container",children:tt.jsx("g",{className:Ne(["react-flow__connection",PT(d)]),children:tt.jsx(_A,{style:t,type:e,CustomComponent:r,isValid:d})})})}const _A=({style:n,type:t=pa.Bezier,CustomComponent:e,isValid:r})=>{const{inProgress:a,from:l,fromNode:c,fromHandle:d,fromPosition:h,to:g,toNode:p,toHandle:w,toPosition:v}=RB();if(!a)return;if(e)return tt.jsx(e,{connectionLineType:t,connectionLineStyle:n,fromNode:c,fromHandle:d,fromX:l.x,fromY:l.y,toX:g.x,toY:g.y,fromPosition:h,toPosition:v,connectionStatus:PT(r),toNode:p,toHandle:w});let S="";const A={sourceX:l.x,sourceY:l.y,sourcePosition:h,targetX:g.x,targetY:g.y,targetPosition:v};switch(t){case pa.Bezier:[S]=ZT(A);break;case pa.SimpleBezier:[S]=EA(A);break;case pa.Step:[S]=wp({...A,borderRadius:0});break;case pa.SmoothStep:[S]=wp(A);break;default:[S]=WT(A)}return tt.jsx("path",{d:S,fill:"none",className:"react-flow__connection-path",style:n})};_A.displayName="ConnectionLine";const LB={};function K1(n=LB){et.useRef(n),le(),et.useEffect(()=>{},[n])}function UB(){le(),et.useRef(!1),et.useEffect(()=>{},[])}function PA({nodeTypes:n,edgeTypes:t,onInit:e,onNodeClick:r,onEdgeClick:a,onNodeDoubleClick:l,onEdgeDoubleClick:c,onNodeMouseEnter:d,onNodeMouseMove:h,onNodeMouseLeave:g,onNodeContextMenu:p,onSelectionContextMenu:w,onSelectionStart:v,onSelectionEnd:S,connectionLineType:A,connectionLineStyle:T,connectionLineComponent:k,connectionLineContainerStyle:D,selectionKeyCode:L,selectionOnDrag:N,selectionMode:O,multiSelectionKeyCode:B,panActivationKeyCode:U,zoomActivationKeyCode:J,deleteKeyCode:j,onlyRenderVisibleElements:W,elementsSelectable:ft,defaultViewport:nt,translateExtent:rt,minZoom:ot,maxZoom:M,preventScrolling:K,defaultMarkerColor:I,zoomOnScroll:z,zoomOnPinch:Y,panOnScroll:$,panOnScrollSpeed:C,panOnScrollMode:_,zoomOnDoubleClick:Z,panOnDrag:it,onPaneClick:lt,onPaneMouseEnter:yt,onPaneMouseMove:ht,onPaneMouseLeave:vt,onPaneScroll:mt,onPaneContextMenu:bt,paneClickDistance:Jt,nodeClickDistance:Rt,onEdgeContextMenu:Nt,onEdgeMouseEnter:Ot,onEdgeMouseMove:Ct,onEdgeMouseLeave:Zt,reconnectRadius:ue,onReconnect:be,onReconnectStart:Us,onReconnectEnd:Ea,noDragClassName:Na,noWheelClassName:Mr,noPanClassName:ka,disableKeyboardA11y:_s,nodeExtent:Ml,rfId:fo,viewport:Sn,onViewportChange:ke}){return K1(n),K1(t),UB(),CB(e),IB(Sn),tt.jsx(tB,{onPaneClick:lt,onPaneMouseEnter:yt,onPaneMouseMove:ht,onPaneMouseLeave:vt,onPaneContextMenu:bt,onPaneScroll:mt,paneClickDistance:Jt,deleteKeyCode:j,selectionKeyCode:L,selectionOnDrag:N,selectionMode:O,onSelectionStart:v,onSelectionEnd:S,multiSelectionKeyCode:B,panActivationKeyCode:U,zoomActivationKeyCode:J,elementsSelectable:ft,zoomOnScroll:z,zoomOnPinch:Y,zoomOnDoubleClick:Z,panOnScroll:$,panOnScrollSpeed:C,panOnScrollMode:_,panOnDrag:it,defaultViewport:nt,translateExtent:rt,minZoom:ot,maxZoom:M,onSelectionContextMenu:w,preventScrolling:K,noDragClassName:Na,noWheelClassName:Mr,noPanClassName:ka,disableKeyboardA11y:_s,onViewportChange:ke,isControlledViewport:!!Sn,children:tt.jsxs(kB,{children:[tt.jsx(EB,{edgeTypes:t,onEdgeClick:a,onEdgeDoubleClick:c,onReconnect:be,onReconnectStart:Us,onReconnectEnd:Ea,onlyRenderVisibleElements:W,onEdgeContextMenu:Nt,onEdgeMouseEnter:Ot,onEdgeMouseMove:Ct,onEdgeMouseLeave:Zt,reconnectRadius:ue,defaultMarkerColor:I,noPanClassName:ka,disableKeyboardA11y:_s,rfId:fo}),tt.jsx(zB,{style:T,type:A,component:k,containerStyle:D}),tt.jsx("div",{className:"react-flow__edgelabel-renderer"}),tt.jsx(lB,{nodeTypes:n,onNodeClick:r,onNodeDoubleClick:l,onNodeMouseEnter:d,onNodeMouseMove:h,onNodeMouseLeave:g,onNodeContextMenu:p,nodeClickDistance:Rt,onlyRenderVisibleElements:W,noPanClassName:ka,noDragClassName:Na,disableKeyboardA11y:_s,nodeExtent:Ml,rfId:fo}),tt.jsx("div",{className:"react-flow__viewport-portal"})]})})}PA.displayName="GraphView";const _B=et.memo(PA),Y1=({nodes:n,edges:t,defaultNodes:e,defaultEdges:r,width:a,height:l,fitView:c,fitViewOptions:d,minZoom:h=.5,maxZoom:g=2,nodeOrigin:p,nodeExtent:w}={})=>{const v=new Map,S=new Map,A=new Map,T=new Map,k=r??t??[],D=e??n??[],L=p??[0,0],N=w??pc;eA(A,T,k);const O=bp(D,v,S,{nodeOrigin:L,nodeExtent:N,elevateNodesOnSelect:!1});let B=[0,0,1];if(c&&a&&l){const U=Ic(v,{filter:ft=>!!((ft.width||ft.initialWidth)&&(ft.height||ft.initialHeight))}),{x:J,y:j,zoom:W}=Wp(U,a,l,h,g,(d==null?void 0:d.padding)??.1);B=[J,j,W]}return{rfId:"1",width:0,height:0,transform:B,nodes:D,nodesInitialized:O,nodeLookup:v,parentLookup:S,edges:k,edgeLookup:T,connectionLookup:A,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:e!==void 0,hasDefaultEdges:r!==void 0,panZoom:null,minZoom:h,maxZoom:g,translateExtent:pc,nodeExtent:N,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:kl.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:L,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:c??!1,fitViewOptions:d,fitViewResolver:null,connection:{..._T},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:tM,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:UT}},PB=({nodes:n,edges:t,defaultNodes:e,defaultEdges:r,width:a,height:l,fitView:c,fitViewOptions:d,minZoom:h,maxZoom:g,nodeOrigin:p,nodeExtent:w})=>rR((v,S)=>{async function A(){const{nodeLookup:T,panZoom:k,fitViewOptions:D,fitViewResolver:L,width:N,height:O,minZoom:B,maxZoom:U}=S();k&&(await QO({nodes:T,width:N,height:O,panZoom:k,minZoom:B,maxZoom:U},D),L==null||L.resolve(!0),v({fitViewResolver:null}))}return{...Y1({nodes:n,edges:t,width:a,height:l,fitView:c,fitViewOptions:d,minZoom:h,maxZoom:g,nodeOrigin:p,nodeExtent:w,defaultNodes:e,defaultEdges:r}),setNodes:T=>{const{nodeLookup:k,parentLookup:D,nodeOrigin:L,elevateNodesOnSelect:N,fitViewQueued:O}=S(),B=bp(T,k,D,{nodeOrigin:L,nodeExtent:w,elevateNodesOnSelect:N,checkEquality:!0});O&&B?(A(),v({nodes:T,nodesInitialized:B,fitViewQueued:!1,fitViewOptions:void 0})):v({nodes:T,nodesInitialized:B})},setEdges:T=>{const{connectionLookup:k,edgeLookup:D}=S();eA(k,D,T),v({edges:T})},setDefaultNodesAndEdges:(T,k)=>{if(T){const{setNodes:D}=S();D(T),v({hasDefaultNodes:!0})}if(k){const{setEdges:D}=S();D(k),v({hasDefaultEdges:!0})}},updateNodeInternals:T=>{const{triggerNodeChanges:k,nodeLookup:D,parentLookup:L,domNode:N,nodeOrigin:O,nodeExtent:B,debug:U,fitViewQueued:J}=S(),{changes:j,updatedInternals:W}=SM(T,D,L,N,O,B);W&&(pM(D,L,{nodeOrigin:O,nodeExtent:B}),J?(A(),v({fitViewQueued:!1,fitViewOptions:void 0})):v({}),(j==null?void 0:j.length)>0&&(U&&console.log("React Flow: trigger node changes",j),k==null||k(j)))},updateNodePositions:(T,k=!1)=>{const D=[],L=[],{nodeLookup:N,triggerNodeChanges:O}=S();for(const[B,U]of T){const J=N.get(B),j=!!(J!=null&&J.expandParent&&(J!=null&&J.parentId)&&(U!=null&&U.position)),W={id:B,type:"position",position:j?{x:Math.max(0,U.position.x),y:Math.max(0,U.position.y)}:U.position,dragging:k};j&&J.parentId&&D.push({id:B,parentId:J.parentId,rect:{...U.internals.positionAbsolute,width:U.measured.width??0,height:U.measured.height??0}}),L.push(W)}if(D.length>0){const{parentLookup:B,nodeOrigin:U}=S(),J=i0(D,N,B,U);L.push(...J)}O(L)},triggerNodeChanges:T=>{const{onNodesChange:k,setNodes:D,nodes:L,hasDefaultNodes:N,debug:O}=S();if(T!=null&&T.length){if(N){const B=AR(T,L);D(B)}O&&console.log("React Flow: trigger node changes",T),k==null||k(T)}},triggerEdgeChanges:T=>{const{onEdgesChange:k,setEdges:D,edges:L,hasDefaultEdges:N,debug:O}=S();if(T!=null&&T.length){if(N){const B=ER(T,L);D(B)}O&&console.log("React Flow: trigger edge changes",T),k==null||k(T)}},addSelectedNodes:T=>{const{multiSelectionActive:k,edgeLookup:D,nodeLookup:L,triggerNodeChanges:N,triggerEdgeChanges:O}=S();if(k){const B=T.map(U=>Za(U,!0));N(B);return}N(ol(L,new Set([...T]),!0)),O(ol(D))},addSelectedEdges:T=>{const{multiSelectionActive:k,edgeLookup:D,nodeLookup:L,triggerNodeChanges:N,triggerEdgeChanges:O}=S();if(k){const B=T.map(U=>Za(U,!0));O(B);return}O(ol(D,new Set([...T]))),N(ol(L,new Set,!0))},unselectNodesAndEdges:({nodes:T,edges:k}={})=>{const{edges:D,nodes:L,nodeLookup:N,triggerNodeChanges:O,triggerEdgeChanges:B}=S(),U=T||L,J=k||D,j=U.map(ft=>{const nt=N.get(ft.id);return nt&&(nt.selected=!1),Za(ft.id,!1)}),W=J.map(ft=>Za(ft.id,!1));O(j),B(W)},setMinZoom:T=>{const{panZoom:k,maxZoom:D}=S();k==null||k.setScaleExtent([T,D]),v({minZoom:T})},setMaxZoom:T=>{const{panZoom:k,minZoom:D}=S();k==null||k.setScaleExtent([D,T]),v({maxZoom:T})},setTranslateExtent:T=>{var k;(k=S().panZoom)==null||k.setTranslateExtent(T),v({translateExtent:T})},setPaneClickDistance:T=>{var k;(k=S().panZoom)==null||k.setClickDistance(T)},resetSelectedElements:()=>{const{edges:T,nodes:k,triggerNodeChanges:D,triggerEdgeChanges:L,elementsSelectable:N}=S();if(!N)return;const O=k.reduce((U,J)=>J.selected?[...U,Za(J.id,!1)]:U,[]),B=T.reduce((U,J)=>J.selected?[...U,Za(J.id,!1)]:U,[]);D(O),L(B)},setNodeExtent:T=>{const{nodes:k,nodeLookup:D,parentLookup:L,nodeOrigin:N,elevateNodesOnSelect:O,nodeExtent:B}=S();T[0][0]===B[0][0]&&T[0][1]===B[0][1]&&T[1][0]===B[1][0]&&T[1][1]===B[1][1]||(bp(k,D,L,{nodeOrigin:N,nodeExtent:T,elevateNodesOnSelect:O,checkEquality:!1}),v({nodeExtent:T}))},panBy:T=>{const{transform:k,width:D,height:L,panZoom:N,translateExtent:O}=S();return bM({delta:T,panZoom:N,transform:k,translateExtent:O,width:D,height:L})},setCenter:async(T,k,D)=>{const{width:L,height:N,maxZoom:O,panZoom:B}=S();if(!B)return Promise.resolve(!1);const U=typeof(D==null?void 0:D.zoom)<"u"?D.zoom:O;return await B.setViewport({x:L/2-T*U,y:N/2-k*U,zoom:U},{duration:D==null?void 0:D.duration,ease:D==null?void 0:D.ease,interpolate:D==null?void 0:D.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{v({connection:{..._T}})},updateConnection:T=>{v({connection:T})},reset:()=>v({...Y1()})}},Object.is);function qB({initialNodes:n,initialEdges:t,defaultNodes:e,defaultEdges:r,initialWidth:a,initialHeight:l,initialMinZoom:c,initialMaxZoom:d,initialFitViewOptions:h,fitView:g,nodeOrigin:p,nodeExtent:w,children:v}){const[S]=et.useState(()=>PB({nodes:n,edges:t,defaultNodes:e,defaultEdges:r,width:a,height:l,fitView:g,minZoom:c,maxZoom:d,fitViewOptions:h,nodeOrigin:p,nodeExtent:w}));return tt.jsx(iR,{value:S,children:tt.jsx(DR,{children:v})})}function JB({children:n,nodes:t,edges:e,defaultNodes:r,defaultEdges:a,width:l,height:c,fitView:d,fitViewOptions:h,minZoom:g,maxZoom:p,nodeOrigin:w,nodeExtent:v}){return et.useContext(Ch)?tt.jsx(tt.Fragment,{children:n}):tt.jsx(qB,{initialNodes:t,initialEdges:e,defaultNodes:r,defaultEdges:a,initialWidth:l,initialHeight:c,fitView:d,initialFitViewOptions:h,initialMinZoom:g,initialMaxZoom:p,nodeOrigin:w,nodeExtent:v,children:n})}const $B={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function HB({nodes:n,edges:t,defaultNodes:e,defaultEdges:r,className:a,nodeTypes:l,edgeTypes:c,onNodeClick:d,onEdgeClick:h,onInit:g,onMove:p,onMoveStart:w,onMoveEnd:v,onConnect:S,onConnectStart:A,onConnectEnd:T,onClickConnectStart:k,onClickConnectEnd:D,onNodeMouseEnter:L,onNodeMouseMove:N,onNodeMouseLeave:O,onNodeContextMenu:B,onNodeDoubleClick:U,onNodeDragStart:J,onNodeDrag:j,onNodeDragStop:W,onNodesDelete:ft,onEdgesDelete:nt,onDelete:rt,onSelectionChange:ot,onSelectionDragStart:M,onSelectionDrag:K,onSelectionDragStop:I,onSelectionContextMenu:z,onSelectionStart:Y,onSelectionEnd:$,onBeforeDelete:C,connectionMode:_,connectionLineType:Z=pa.Bezier,connectionLineStyle:it,connectionLineComponent:lt,connectionLineContainerStyle:yt,deleteKeyCode:ht="Backspace",selectionKeyCode:vt="Shift",selectionOnDrag:mt=!1,selectionMode:bt=vc.Full,panActivationKeyCode:Jt="Space",multiSelectionKeyCode:Rt=lh()?"Meta":"Control",zoomActivationKeyCode:Nt=lh()?"Meta":"Control",snapToGrid:Ot,snapGrid:Ct,onlyRenderVisibleElements:Zt=!1,selectNodesOnDrag:ue,nodesDraggable:be,autoPanOnNodeFocus:Us,nodesConnectable:Ea,nodesFocusable:Na,nodeOrigin:Mr=gA,edgesFocusable:ka,edgesReconnectable:_s,elementsSelectable:Ml=!0,defaultViewport:fo=pR,minZoom:Sn=.5,maxZoom:ke=2,translateExtent:Vn=pc,preventScrolling:Ye=!0,nodeExtent:Rl,defaultMarkerColor:Mh="#b1b1b7",zoomOnScroll:Rh=!0,zoomOnPinch:ho=!0,panOnScroll:go=!1,panOnScrollSpeed:Rr=.5,panOnScrollMode:mo=no.Free,zoomOnDoubleClick:Ca=!0,panOnDrag:Bh=!0,onPaneClick:Mc,onPaneMouseEnter:Rc,onPaneMouseMove:Bl,onPaneMouseLeave:Da,onPaneScroll:zh,onPaneContextMenu:Bc,paneClickDistance:zl=0,nodeClickDistance:Ll=0,children:Ul,onReconnect:zc,onReconnectStart:Lh,onReconnectEnd:or,onEdgeContextMenu:Ie,onEdgeDoubleClick:Je,onEdgeMouseEnter:Ps,onEdgeMouseMove:_l,onEdgeMouseLeave:Uh,reconnectRadius:_h=10,onNodesChange:Lc,onEdgesChange:Ia,noDragClassName:Pl="nodrag",noWheelClassName:qs="nowheel",noPanClassName:Br="nopan",fitView:Js,fitViewOptions:zr,connectOnClick:xe,attributionPosition:Uc,proOptions:_c,defaultEdgeOptions:Lr,elevateNodesOnSelect:$s,elevateEdgesOnSelect:Ph,disableKeyboardA11y:ql=!1,autoPanOnConnect:Pc,autoPanOnNodeDrag:qh,autoPanSpeed:yo,connectionRadius:po,isValidConnection:jn,onError:Jl,style:qc,id:Ur,nodeDragThreshold:$l,connectionDragThreshold:Hl,viewport:Jh,onViewportChange:Jc,width:Fe,height:$c,colorMode:$h="light",debug:vo,onScroll:Oa,ariaLabelConfig:wo,...Hh},Xe){const Ma=Ur||"1",Hc=bR($h),Vl=et.useCallback(_r=>{_r.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),Oa==null||Oa(_r)},[Oa]);return tt.jsx("div",{"data-testid":"rf__wrapper",...Hh,onScroll:Vl,style:{...qc,...$B},ref:Xe,className:Ne(["react-flow",a,Hc]),id:Ur,role:"application",children:tt.jsxs(JB,{nodes:n,edges:t,width:Fe,height:$c,fitView:Js,fitViewOptions:zr,minZoom:Sn,maxZoom:ke,nodeOrigin:Mr,nodeExtent:Rl,children:[tt.jsx(_B,{onInit:g,onNodeClick:d,onEdgeClick:h,onNodeMouseEnter:L,onNodeMouseMove:N,onNodeMouseLeave:O,onNodeContextMenu:B,onNodeDoubleClick:U,nodeTypes:l,edgeTypes:c,connectionLineType:Z,connectionLineStyle:it,connectionLineComponent:lt,connectionLineContainerStyle:yt,selectionKeyCode:vt,selectionOnDrag:mt,selectionMode:bt,deleteKeyCode:ht,multiSelectionKeyCode:Rt,panActivationKeyCode:Jt,zoomActivationKeyCode:Nt,onlyRenderVisibleElements:Zt,defaultViewport:fo,translateExtent:Vn,minZoom:Sn,maxZoom:ke,preventScrolling:Ye,zoomOnScroll:Rh,zoomOnPinch:ho,zoomOnDoubleClick:Ca,panOnScroll:go,panOnScrollSpeed:Rr,panOnScrollMode:mo,panOnDrag:Bh,onPaneClick:Mc,onPaneMouseEnter:Rc,onPaneMouseMove:Bl,onPaneMouseLeave:Da,onPaneScroll:zh,onPaneContextMenu:Bc,paneClickDistance:zl,nodeClickDistance:Ll,onSelectionContextMenu:z,onSelectionStart:Y,onSelectionEnd:$,onReconnect:zc,onReconnectStart:Lh,onReconnectEnd:or,onEdgeContextMenu:Ie,onEdgeDoubleClick:Je,onEdgeMouseEnter:Ps,onEdgeMouseMove:_l,onEdgeMouseLeave:Uh,reconnectRadius:_h,defaultMarkerColor:Mh,noDragClassName:Pl,noWheelClassName:qs,noPanClassName:Br,rfId:Ma,disableKeyboardA11y:ql,nodeExtent:Rl,viewport:Jh,onViewportChange:Jc}),tt.jsx(SR,{nodes:n,edges:t,defaultNodes:e,defaultEdges:r,onConnect:S,onConnectStart:A,onConnectEnd:T,onClickConnectStart:k,onClickConnectEnd:D,nodesDraggable:be,autoPanOnNodeFocus:Us,nodesConnectable:Ea,nodesFocusable:Na,edgesFocusable:ka,edgesReconnectable:_s,elementsSelectable:Ml,elevateNodesOnSelect:$s,elevateEdgesOnSelect:Ph,minZoom:Sn,maxZoom:ke,nodeExtent:Rl,onNodesChange:Lc,onEdgesChange:Ia,snapToGrid:Ot,snapGrid:Ct,connectionMode:_,translateExtent:Vn,connectOnClick:xe,defaultEdgeOptions:Lr,fitView:Js,fitViewOptions:zr,onNodesDelete:ft,onEdgesDelete:nt,onDelete:rt,onNodeDragStart:J,onNodeDrag:j,onNodeDragStop:W,onSelectionDrag:K,onSelectionDragStart:M,onSelectionDragStop:I,onMove:p,onMoveStart:w,onMoveEnd:v,noPanClassName:Br,nodeOrigin:Mr,rfId:Ma,autoPanOnConnect:Pc,autoPanOnNodeDrag:qh,autoPanSpeed:yo,onError:Jl,connectionRadius:po,isValidConnection:jn,selectNodesOnDrag:ue,nodeDragThreshold:$l,connectionDragThreshold:Hl,onBeforeDelete:C,paneClickDistance:zl,debug:vo,ariaLabelConfig:wo}),tt.jsx(yR,{onSelectionChange:ot}),Ul,tt.jsx(fR,{proOptions:_c,position:Uc}),tt.jsx(cR,{rfId:Ma,disableKeyboardA11y:ql})]})})}var VB=yA(HB);function jB({dimensions:n,lineWidth:t,variant:e,className:r}){return tt.jsx("path",{strokeWidth:t,d:`M${n[0]/2} 0 V${n[1]} M0 ${n[1]/2} H${n[0]}`,className:Ne(["react-flow__background-pattern",e,r])})}function KB({radius:n,className:t}){return tt.jsx("circle",{cx:n,cy:n,r:n,className:Ne(["react-flow__background-pattern","dots",t])})}var xa;(function(n){n.Lines="lines",n.Dots="dots",n.Cross="cross"})(xa||(xa={}));const YB={[xa.Dots]:1,[xa.Lines]:1,[xa.Cross]:6},GB=n=>({transform:n.transform,patternId:`pattern-${n.rfId}`});function qA({id:n,variant:t=xa.Dots,gap:e=20,size:r,lineWidth:a=1,offset:l=0,color:c,bgColor:d,style:h,className:g,patternClassName:p}){const w=et.useRef(null),{transform:v,patternId:S}=Vt(GB,de),A=r||YB[t],T=t===xa.Dots,k=t===xa.Cross,D=Array.isArray(e)?e:[e,e],L=[D[0]*v[2]||1,D[1]*v[2]||1],N=A*v[2],O=Array.isArray(l)?l:[l,l],B=k?[N,N]:L,U=[O[0]*v[2]||1+B[0]/2,O[1]*v[2]||1+B[1]/2],J=`${S}${n||""}`;return tt.jsxs("svg",{className:Ne(["react-flow__background",g]),style:{...h,...Ih,"--xy-background-color-props":d,"--xy-background-pattern-color-props":c},ref:w,"data-testid":"rf__background",children:[tt.jsx("pattern",{id:J,x:v[0]%L[0],y:v[1]%L[1],width:L[0],height:L[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${U[0]},-${U[1]})`,children:T?tt.jsx(KB,{radius:N/2,className:p}):tt.jsx(jB,{dimensions:B,lineWidth:a,variant:t,className:p})}),tt.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${J})`})]})}qA.displayName="Background";const FB=et.memo(qA);function XB(){return tt.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:tt.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function ZB(){return tt.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:tt.jsx("path",{d:"M0 0h32v4.2H0z"})})}function QB(){return tt.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:tt.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function WB(){return tt.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:tt.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function tz(){return tt.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:tt.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function dd({children:n,className:t,...e}){return tt.jsx("button",{type:"button",className:Ne(["react-flow__controls-button",t]),...e,children:n})}const ez=n=>({isInteractive:n.nodesDraggable||n.nodesConnectable||n.elementsSelectable,minZoomReached:n.transform[2]<=n.minZoom,maxZoomReached:n.transform[2]>=n.maxZoom,ariaLabelConfig:n.ariaLabelConfig});function JA({style:n,showZoom:t=!0,showFitView:e=!0,showInteractive:r=!0,fitViewOptions:a,onZoomIn:l,onZoomOut:c,onFitView:d,onInteractiveChange:h,className:g,children:p,position:w="bottom-left",orientation:v="vertical","aria-label":S}){const A=le(),{isInteractive:T,minZoomReached:k,maxZoomReached:D,ariaLabelConfig:L}=Vt(ez,de),{zoomIn:N,zoomOut:O,fitView:B}=s0(),U=()=>{N(),l==null||l()},J=()=>{O(),c==null||c()},j=()=>{B(a),d==null||d()},W=()=>{A.setState({nodesDraggable:!T,nodesConnectable:!T,elementsSelectable:!T}),h==null||h(!T)},ft=v==="horizontal"?"horizontal":"vertical";return tt.jsxs(Dh,{className:Ne(["react-flow__controls",ft,g]),position:w,style:n,"data-testid":"rf__controls","aria-label":S??L["controls.ariaLabel"],children:[t&&tt.jsxs(tt.Fragment,{children:[tt.jsx(dd,{onClick:U,className:"react-flow__controls-zoomin",title:L["controls.zoomIn.ariaLabel"],"aria-label":L["controls.zoomIn.ariaLabel"],disabled:D,children:tt.jsx(XB,{})}),tt.jsx(dd,{onClick:J,className:"react-flow__controls-zoomout",title:L["controls.zoomOut.ariaLabel"],"aria-label":L["controls.zoomOut.ariaLabel"],disabled:k,children:tt.jsx(ZB,{})})]}),e&&tt.jsx(dd,{className:"react-flow__controls-fitview",onClick:j,title:L["controls.fitView.ariaLabel"],"aria-label":L["controls.fitView.ariaLabel"],children:tt.jsx(QB,{})}),r&&tt.jsx(dd,{className:"react-flow__controls-interactive",onClick:W,title:L["controls.interactive.ariaLabel"],"aria-label":L["controls.interactive.ariaLabel"],children:T?tt.jsx(tz,{}):tt.jsx(WB,{})}),p]})}JA.displayName="Controls";et.memo(JA);function nz({id:n,x:t,y:e,width:r,height:a,style:l,color:c,strokeColor:d,strokeWidth:h,className:g,borderRadius:p,shapeRendering:w,selected:v,onClick:S}){const{background:A,backgroundColor:T}=l||{},k=c||A||T;return tt.jsx("rect",{className:Ne(["react-flow__minimap-node",{selected:v},g]),x:t,y:e,rx:p,ry:p,width:r,height:a,style:{fill:k,stroke:d,strokeWidth:h},shapeRendering:w,onClick:S?D=>S(D,n):void 0})}const rz=et.memo(nz),iz=n=>n.nodes.map(t=>t.id),yy=n=>n instanceof Function?n:()=>n;function sz({nodeStrokeColor:n,nodeColor:t,nodeClassName:e="",nodeBorderRadius:r=5,nodeStrokeWidth:a,nodeComponent:l=rz,onClick:c}){const d=Vt(iz,de),h=yy(t),g=yy(n),p=yy(e),w=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return tt.jsx(tt.Fragment,{children:d.map(v=>tt.jsx(oz,{id:v,nodeColorFunc:h,nodeStrokeColorFunc:g,nodeClassNameFunc:p,nodeBorderRadius:r,nodeStrokeWidth:a,NodeComponent:l,onClick:c,shapeRendering:w},v))})}function az({id:n,nodeColorFunc:t,nodeStrokeColorFunc:e,nodeClassNameFunc:r,nodeBorderRadius:a,nodeStrokeWidth:l,shapeRendering:c,NodeComponent:d,onClick:h}){const{node:g,x:p,y:w,width:v,height:S}=Vt(A=>{const{internals:T}=A.nodeLookup.get(n),k=T.userNode,{x:D,y:L}=T.positionAbsolute,{width:N,height:O}=Ls(k);return{node:k,x:D,y:L,width:N,height:O}},de);return!g||g.hidden||!jT(g)?null:tt.jsx(d,{x:p,y:w,width:v,height:S,style:g.style,selected:!!g.selected,className:r(g),color:t(g),borderRadius:a,strokeColor:e(g),strokeWidth:l,shapeRendering:c,onClick:h,id:g.id})}const oz=et.memo(az);var lz=et.memo(sz);const uz=200,cz=150,fz=n=>!n.hidden,dz=n=>{const t={x:-n.transform[0]/n.transform[2],y:-n.transform[1]/n.transform[2],width:n.width/n.transform[2],height:n.height/n.transform[2]};return{viewBB:t,boundingRect:n.nodeLookup.size>0?VT(Ic(n.nodeLookup,{filter:fz}),t):t,rfId:n.rfId,panZoom:n.panZoom,translateExtent:n.translateExtent,flowWidth:n.width,flowHeight:n.height,ariaLabelConfig:n.ariaLabelConfig}},hz="react-flow__minimap-desc";function $A({style:n,className:t,nodeStrokeColor:e,nodeColor:r,nodeClassName:a="",nodeBorderRadius:l=5,nodeStrokeWidth:c,nodeComponent:d,bgColor:h,maskColor:g,maskStrokeColor:p,maskStrokeWidth:w,position:v="bottom-right",onClick:S,onNodeClick:A,pannable:T=!1,zoomable:k=!1,ariaLabel:D,inversePan:L,zoomStep:N=10,offsetScale:O=5}){const B=le(),U=et.useRef(null),{boundingRect:J,viewBB:j,rfId:W,panZoom:ft,translateExtent:nt,flowWidth:rt,flowHeight:ot,ariaLabelConfig:M}=Vt(dz,de),K=(n==null?void 0:n.width)??uz,I=(n==null?void 0:n.height)??cz,z=J.width/K,Y=J.height/I,$=Math.max(z,Y),C=$*K,_=$*I,Z=O*$,it=J.x-(C-J.width)/2-Z,lt=J.y-(_-J.height)/2-Z,yt=C+Z*2,ht=_+Z*2,vt=`${hz}-${W}`,mt=et.useRef(0),bt=et.useRef();mt.current=$,et.useEffect(()=>{if(U.current&&ft)return bt.current=DM({domNode:U.current,panZoom:ft,getTransform:()=>B.getState().transform,getViewScale:()=>mt.current}),()=>{var Ot;(Ot=bt.current)==null||Ot.destroy()}},[ft]),et.useEffect(()=>{var Ot;(Ot=bt.current)==null||Ot.update({translateExtent:nt,width:rt,height:ot,inversePan:L,pannable:T,zoomStep:N,zoomable:k})},[T,k,L,N,nt,rt,ot]);const Jt=S?Ot=>{var ue;const[Ct,Zt]=((ue=bt.current)==null?void 0:ue.pointer(Ot))||[0,0];S(Ot,{x:Ct,y:Zt})}:void 0,Rt=A?et.useCallback((Ot,Ct)=>{const Zt=B.getState().nodeLookup.get(Ct).internals.userNode;A(Ot,Zt)},[]):void 0,Nt=D??M["minimap.ariaLabel"];return tt.jsx(Dh,{position:v,style:{...n,"--xy-minimap-background-color-props":typeof h=="string"?h:void 0,"--xy-minimap-mask-background-color-props":typeof g=="string"?g:void 0,"--xy-minimap-mask-stroke-color-props":typeof p=="string"?p:void 0,"--xy-minimap-mask-stroke-width-props":typeof w=="number"?w*$:void 0,"--xy-minimap-node-background-color-props":typeof r=="string"?r:void 0,"--xy-minimap-node-stroke-color-props":typeof e=="string"?e:void 0,"--xy-minimap-node-stroke-width-props":typeof c=="number"?c:void 0},className:Ne(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:tt.jsxs("svg",{width:K,height:I,viewBox:`${it} ${lt} ${yt} ${ht}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":vt,ref:U,onClick:Jt,children:[Nt&&tt.jsx("title",{id:vt,children:Nt}),tt.jsx(lz,{onClick:Rt,nodeColor:r,nodeStrokeColor:e,nodeBorderRadius:l,nodeClassName:a,nodeStrokeWidth:c,nodeComponent:d}),tt.jsx("path",{className:"react-flow__minimap-mask",d:`M${it-Z},${lt-Z}h${yt+Z*2}v${ht+Z*2}h${-yt-Z*2}z
        M${j.x},${j.y}h${j.width}v${j.height}h${-j.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}$A.displayName="MiniMap";et.memo($A);const gz=n=>t=>n?`${Math.max(1/t.transform[2],1)}`:void 0,mz={[Ol.Line]:"right",[Ol.Handle]:"bottom-right"};function yz({nodeId:n,position:t,variant:e=Ol.Handle,className:r,style:a=void 0,children:l,color:c,minWidth:d=10,minHeight:h=10,maxWidth:g=Number.MAX_VALUE,maxHeight:p=Number.MAX_VALUE,keepAspectRatio:w=!1,resizeDirection:v,autoScale:S=!0,shouldResize:A,onResizeStart:T,onResize:k,onResizeEnd:D}){const L=SA(),N=typeof n=="string"?n:L,O=le(),B=et.useRef(null),U=e===Ol.Handle,J=Vt(et.useCallback(gz(U&&S),[U,S]),de),j=et.useRef(null),W=t??mz[e];et.useEffect(()=>{if(!(!B.current||!N))return j.current||(j.current=jM({domNode:B.current,nodeId:N,getStoreItems:()=>{const{nodeLookup:nt,transform:rt,snapGrid:ot,snapToGrid:M,nodeOrigin:K,domNode:I}=O.getState();return{nodeLookup:nt,transform:rt,snapGrid:ot,snapToGrid:M,nodeOrigin:K,paneDomNode:I}},onChange:(nt,rt)=>{const{triggerNodeChanges:ot,nodeLookup:M,parentLookup:K,nodeOrigin:I}=O.getState(),z=[],Y={x:nt.x,y:nt.y},$=M.get(N);if($&&$.expandParent&&$.parentId){const C=$.origin??I,_=nt.width??$.measured.width??0,Z=nt.height??$.measured.height??0,it={id:$.id,parentId:$.parentId,rect:{width:_,height:Z,...KT({x:nt.x??$.position.x,y:nt.y??$.position.y},{width:_,height:Z},$.parentId,M,C)}},lt=i0([it],M,K,I);z.push(...lt),Y.x=nt.x?Math.max(C[0]*_,nt.x):void 0,Y.y=nt.y?Math.max(C[1]*Z,nt.y):void 0}if(Y.x!==void 0&&Y.y!==void 0){const C={id:N,type:"position",position:{...Y}};z.push(C)}if(nt.width!==void 0&&nt.height!==void 0){const _={id:N,type:"dimensions",resizing:!0,setAttributes:v?v==="horizontal"?"width":"height":!0,dimensions:{width:nt.width,height:nt.height}};z.push(_)}for(const C of rt){const _={...C,type:"position"};z.push(_)}ot(z)},onEnd:({width:nt,height:rt})=>{const ot={id:N,type:"dimensions",resizing:!1,dimensions:{width:nt,height:rt}};O.getState().triggerNodeChanges([ot])}})),j.current.update({controlPosition:W,boundaries:{minWidth:d,minHeight:h,maxWidth:g,maxHeight:p},keepAspectRatio:w,resizeDirection:v,onResizeStart:T,onResize:k,onResizeEnd:D,shouldResize:A}),()=>{var nt;(nt=j.current)==null||nt.destroy()}},[W,d,h,g,p,w,T,k,D,A]);const ft=W.split("-");return tt.jsx("div",{className:Ne(["react-flow__resize-control","nodrag",...ft,e,r]),ref:B,style:{...a,scale:J,...c&&{[U?"backgroundColor":"borderColor"]:c}},children:l})}et.memo(yz);function pz(){const{root:n,update:t,loading:e,error:r}=gD(),a=et.useRef(0),l=et.useCallback(h=>{t(g=>{var p,w;for(const v of h)switch(v.type){case"add":g.nodes.push(v.item);break;case"replace":{const S=g.nodes.findIndex(A=>A.id===v.id);S!==-1&&(g.nodes[S]=v.item)}break;case"remove":{const S=g.nodes.findIndex(A=>A.id===v.id);S!==-1&&((w=(p=g.nodes).delete)==null||w.call(p,S))}break;case"position":{const S=g.nodes.findIndex(A=>A.id===v.id);S!==-1&&v.position&&(g.nodes[S].position=v.position)}break;case"select":{const S=g.nodes.findIndex(A=>A.id===v.id);S!==-1&&(g.nodes[S].selected=v.selected)}break}})},[t]),c=et.useCallback(h=>{t(g=>{var p,w;for(const v of h)switch(v.type){case"add":g.edges.push(v.item);break;case"replace":{const S=g.edges.findIndex(A=>A.id===v.id);S!==-1&&(g.edges[S]=v.item)}break;case"remove":{const S=g.edges.findIndex(A=>A.id===v.id);S!==-1&&((w=(p=g.edges).delete)==null||w.call(p,S))}break;case"select":{const S=g.edges.findIndex(A=>A.id===v.id);S!==-1&&(g.edges[S].selected=v.selected)}break}})},[t]),d=et.useCallback(h=>{!h.source||!h.target||t(g=>{if(g.edges.some(v=>v.source===h.source&&v.target===h.target&&v.sourceHandle===h.sourceHandle&&v.targetHandle===h.targetHandle))return;const w=`e-${h.source}-${h.target}-${a.current++}`;g.edges.push({id:w,type:"smoothstep",source:h.source,target:h.target,sourceHandle:h.sourceHandle,targetHandle:h.targetHandle})})},[t]);return e?tt.jsx("div",{children:"Loading..."}):r?tt.jsxs("div",{children:["Error: ",r.message]}):tt.jsx("div",{style:{position:"fixed",inset:0,height:"100vh"},children:tt.jsx(VB,{nodes:[...n.nodes].filter(Boolean),edges:[...n.edges].filter(Boolean),onNodesChange:l,onEdgesChange:c,onConnect:d,fitView:!0,children:tt.jsx(FB,{gap:10,size:1,color:"silver"})})})}const vz=[{id:"1",type:"input",data:{label:"Multiplayer"},position:{x:250,y:25}},{id:"2",data:{label:"Graph"},position:{x:100,y:125}},{id:"3",data:{label:"React Flow"},position:{x:250,y:225},style:{borderColor:"#FF0072"}},{id:"4",type:"output",data:{label:"Yorkie"},position:{x:100,y:325},style:{borderColor:"#944DFA"}}],wz=[{id:"e1-2",source:"1",target:"2",type:"smoothstep"},{id:"e2-3",source:"2",target:"3",label:"with"},{id:"e3-4",source:"3",target:"4",label:"and",animated:!0}],Sz={nodes:vz,edges:wz};n2.createRoot(document.getElementById("root")).render(tt.jsxs(et.StrictMode,{children:[tt.jsx(oD,{apiKey:"D6sd9E5ehtXBssmeRZ4QQP",rpcAddr:"https://api.yorkie.dev",children:tt.jsx(hD,{docKey:`react-flow-${new Date().toISOString().substring(0,10).replace(/-/g,"")}`,initialRoot:Sz,children:tt.jsx(pz,{})})}),","]}));
