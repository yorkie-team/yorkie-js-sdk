var nN=Object.defineProperty;var rN=(n,t,e)=>t in n?nN(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var p=(n,t,e)=>rN(n,typeof t!="symbol"?t+"":t,e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function e(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(a){if(a.ep)return;a.ep=!0;const l=e(a);fetch(a.href,l)}})();function i1(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Sm={exports:{}},hu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kw;function iN(){if(Kw)return hu;Kw=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(i,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var d in a)d!=="key"&&(l[d]=a[d])}else l=a;return a=l.ref,{$$typeof:n,type:i,key:c,ref:a!==void 0?a:null,props:l}}return hu.Fragment=t,hu.jsx=e,hu.jsxs=e,hu}var Xw;function sN(){return Xw||(Xw=1,Sm.exports=iN()),Sm.exports}var W=sN(),xm={exports:{}},gu={},Tm={exports:{}},Am={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fw;function aN(){return Fw||(Fw=1,function(n){function t(O,z){var G=O.length;O.push(z);t:for(;0<G;){var J=G-1>>>1,D=O[J];if(0<a(D,z))O[J]=z,O[G]=D,G=J;else break t}}function e(O){return O.length===0?null:O[0]}function i(O){if(O.length===0)return null;var z=O[0],G=O.pop();if(G!==z){O[0]=G;t:for(var J=0,D=O.length,U=D>>>1;J<U;){var Z=2*(J+1)-1,rt=O[Z],ot=Z+1,mt=O[ot];if(0>a(rt,G))ot<D&&0>a(mt,rt)?(O[J]=mt,O[ot]=G,J=ot):(O[J]=rt,O[Z]=G,J=Z);else if(ot<D&&0>a(mt,G))O[J]=mt,O[ot]=G,J=ot;else break t}}return z}function a(O,z){var G=O.sortIndex-z.sortIndex;return G!==0?G:O.id-z.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();n.unstable_now=function(){return c.now()-d}}var h=[],g=[],y=1,w=null,v=3,b=!1,x=!1,A=!1,C=!1,k=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function I(O){for(var z=e(g);z!==null;){if(z.callback===null)i(g);else if(z.startTime<=O)i(g),z.sortIndex=z.expirationTime,t(h,z);else break;z=e(g)}}function B(O){if(A=!1,I(O),!x)if(e(h)!==null)x=!0,_||(_=!0,it());else{var z=e(g);z!==null&&j(B,z.startTime-O)}}var _=!1,P=-1,V=5,tt=-1;function ft(){return C?!0:!(n.unstable_now()-tt<V)}function nt(){if(C=!1,_){var O=n.unstable_now();tt=O;var z=!0;try{t:{x=!1,A&&(A=!1,L(P),P=-1),b=!0;var G=v;try{e:{for(I(O),w=e(h);w!==null&&!(w.expirationTime>O&&ft());){var J=w.callback;if(typeof J=="function"){w.callback=null,v=w.priorityLevel;var D=J(w.expirationTime<=O);if(O=n.unstable_now(),typeof D=="function"){w.callback=D,I(O),z=!0;break e}w===e(h)&&i(h),I(O)}else i(h);w=e(h)}if(w!==null)z=!0;else{var U=e(g);U!==null&&j(B,U.startTime-O),z=!1}}break t}finally{w=null,v=G,b=!1}z=void 0}}finally{z?it():_=!1}}}var it;if(typeof N=="function")it=function(){N(nt)};else if(typeof MessageChannel<"u"){var ut=new MessageChannel,R=ut.port2;ut.port1.onmessage=nt,it=function(){R.postMessage(null)}}else it=function(){k(nt,0)};function j(O,z){P=k(function(){O(n.unstable_now())},z)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(O){O.callback=null},n.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<O?Math.floor(1e3/O):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_next=function(O){switch(v){case 1:case 2:case 3:var z=3;break;default:z=v}var G=v;v=z;try{return O()}finally{v=G}},n.unstable_requestPaint=function(){C=!0},n.unstable_runWithPriority=function(O,z){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var G=v;v=O;try{return z()}finally{v=G}},n.unstable_scheduleCallback=function(O,z,G){var J=n.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?J+G:J):G=J,O){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=G+D,O={id:y++,callback:z,priorityLevel:O,startTime:G,expirationTime:D,sortIndex:-1},G>J?(O.sortIndex=G,t(g,O),e(h)===null&&O===e(g)&&(A?(L(P),P=-1):A=!0,j(B,G-J))):(O.sortIndex=D,t(h,O),x||b||(x=!0,_||(_=!0,it()))),O},n.unstable_shouldYield=ft,n.unstable_wrapCallback=function(O){var z=v;return function(){var G=v;v=z;try{return O.apply(this,arguments)}finally{v=G}}}}(Am)),Am}var Zw;function oN(){return Zw||(Zw=1,Tm.exports=aN()),Tm.exports}var Em={exports:{}},Bt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qw;function lN(){if(Qw)return Bt;Qw=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),w=Symbol.iterator;function v(D){return D===null||typeof D!="object"?null:(D=w&&D[w]||D["@@iterator"],typeof D=="function"?D:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,A={};function C(D,U,Z){this.props=D,this.context=U,this.refs=A,this.updater=Z||b}C.prototype.isReactComponent={},C.prototype.setState=function(D,U){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,U,"setState")},C.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function k(){}k.prototype=C.prototype;function L(D,U,Z){this.props=D,this.context=U,this.refs=A,this.updater=Z||b}var N=L.prototype=new k;N.constructor=L,x(N,C.prototype),N.isPureReactComponent=!0;var I=Array.isArray,B={H:null,A:null,T:null,S:null,V:null},_=Object.prototype.hasOwnProperty;function P(D,U,Z,rt,ot,mt){return Z=mt.ref,{$$typeof:n,type:D,key:U,ref:Z!==void 0?Z:null,props:mt}}function V(D,U){return P(D.type,U,void 0,void 0,void 0,D.props)}function tt(D){return typeof D=="object"&&D!==null&&D.$$typeof===n}function ft(D){var U={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(Z){return U[Z]})}var nt=/\/+/g;function it(D,U){return typeof D=="object"&&D!==null&&D.key!=null?ft(""+D.key):U.toString(36)}function ut(){}function R(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(ut,ut):(D.status="pending",D.then(function(U){D.status==="pending"&&(D.status="fulfilled",D.value=U)},function(U){D.status==="pending"&&(D.status="rejected",D.reason=U)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function j(D,U,Z,rt,ot){var mt=typeof D;(mt==="undefined"||mt==="boolean")&&(D=null);var dt=!1;if(D===null)dt=!0;else switch(mt){case"bigint":case"string":case"number":dt=!0;break;case"object":switch(D.$$typeof){case n:case t:dt=!0;break;case y:return dt=D._init,j(dt(D._payload),U,Z,rt,ot)}}if(dt)return ot=ot(D),dt=rt===""?"."+it(D,0):rt,I(ot)?(Z="",dt!=null&&(Z=dt.replace(nt,"$&/")+"/"),j(ot,U,Z,"",function(bt){return bt})):ot!=null&&(tt(ot)&&(ot=V(ot,Z+(ot.key==null||D&&D.key===ot.key?"":(""+ot.key).replace(nt,"$&/")+"/")+dt)),U.push(ot)),1;dt=0;var pt=rt===""?".":rt+":";if(I(D))for(var gt=0;gt<D.length;gt++)rt=D[gt],mt=pt+it(rt,gt),dt+=j(rt,U,Z,mt,ot);else if(gt=v(D),typeof gt=="function")for(D=gt.call(D),gt=0;!(rt=D.next()).done;)rt=rt.value,mt=pt+it(rt,gt++),dt+=j(rt,U,Z,mt,ot);else if(mt==="object"){if(typeof D.then=="function")return j(R(D),U,Z,rt,ot);throw U=String(D),Error("Objects are not valid as a React child (found: "+(U==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":U)+"). If you meant to render a collection of children, use an array instead.")}return dt}function O(D,U,Z){if(D==null)return D;var rt=[],ot=0;return j(D,rt,"","",function(mt){return U.call(Z,mt,ot++)}),rt}function z(D){if(D._status===-1){var U=D._result;U=U(),U.then(function(Z){(D._status===0||D._status===-1)&&(D._status=1,D._result=Z)},function(Z){(D._status===0||D._status===-1)&&(D._status=2,D._result=Z)}),D._status===-1&&(D._status=0,D._result=U)}if(D._status===1)return D._result.default;throw D._result}var G=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var U=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(U))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)};function J(){}return Bt.Children={map:O,forEach:function(D,U,Z){O(D,function(){U.apply(this,arguments)},Z)},count:function(D){var U=0;return O(D,function(){U++}),U},toArray:function(D){return O(D,function(U){return U})||[]},only:function(D){if(!tt(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},Bt.Component=C,Bt.Fragment=e,Bt.Profiler=a,Bt.PureComponent=L,Bt.StrictMode=i,Bt.Suspense=h,Bt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=B,Bt.__COMPILER_RUNTIME={__proto__:null,c:function(D){return B.H.useMemoCache(D)}},Bt.cache=function(D){return function(){return D.apply(null,arguments)}},Bt.cloneElement=function(D,U,Z){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var rt=x({},D.props),ot=D.key,mt=void 0;if(U!=null)for(dt in U.ref!==void 0&&(mt=void 0),U.key!==void 0&&(ot=""+U.key),U)!_.call(U,dt)||dt==="key"||dt==="__self"||dt==="__source"||dt==="ref"&&U.ref===void 0||(rt[dt]=U[dt]);var dt=arguments.length-2;if(dt===1)rt.children=Z;else if(1<dt){for(var pt=Array(dt),gt=0;gt<dt;gt++)pt[gt]=arguments[gt+2];rt.children=pt}return P(D.type,ot,void 0,void 0,mt,rt)},Bt.createContext=function(D){return D={$$typeof:c,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:l,_context:D},D},Bt.createElement=function(D,U,Z){var rt,ot={},mt=null;if(U!=null)for(rt in U.key!==void 0&&(mt=""+U.key),U)_.call(U,rt)&&rt!=="key"&&rt!=="__self"&&rt!=="__source"&&(ot[rt]=U[rt]);var dt=arguments.length-2;if(dt===1)ot.children=Z;else if(1<dt){for(var pt=Array(dt),gt=0;gt<dt;gt++)pt[gt]=arguments[gt+2];ot.children=pt}if(D&&D.defaultProps)for(rt in dt=D.defaultProps,dt)ot[rt]===void 0&&(ot[rt]=dt[rt]);return P(D,mt,void 0,void 0,null,ot)},Bt.createRef=function(){return{current:null}},Bt.forwardRef=function(D){return{$$typeof:d,render:D}},Bt.isValidElement=tt,Bt.lazy=function(D){return{$$typeof:y,_payload:{_status:-1,_result:D},_init:z}},Bt.memo=function(D,U){return{$$typeof:g,type:D,compare:U===void 0?null:U}},Bt.startTransition=function(D){var U=B.T,Z={};B.T=Z;try{var rt=D(),ot=B.S;ot!==null&&ot(Z,rt),typeof rt=="object"&&rt!==null&&typeof rt.then=="function"&&rt.then(J,G)}catch(mt){G(mt)}finally{B.T=U}},Bt.unstable_useCacheRefresh=function(){return B.H.useCacheRefresh()},Bt.use=function(D){return B.H.use(D)},Bt.useActionState=function(D,U,Z){return B.H.useActionState(D,U,Z)},Bt.useCallback=function(D,U){return B.H.useCallback(D,U)},Bt.useContext=function(D){return B.H.useContext(D)},Bt.useDebugValue=function(){},Bt.useDeferredValue=function(D,U){return B.H.useDeferredValue(D,U)},Bt.useEffect=function(D,U,Z){var rt=B.H;if(typeof Z=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return rt.useEffect(D,U)},Bt.useId=function(){return B.H.useId()},Bt.useImperativeHandle=function(D,U,Z){return B.H.useImperativeHandle(D,U,Z)},Bt.useInsertionEffect=function(D,U){return B.H.useInsertionEffect(D,U)},Bt.useLayoutEffect=function(D,U){return B.H.useLayoutEffect(D,U)},Bt.useMemo=function(D,U){return B.H.useMemo(D,U)},Bt.useOptimistic=function(D,U){return B.H.useOptimistic(D,U)},Bt.useReducer=function(D,U,Z){return B.H.useReducer(D,U,Z)},Bt.useRef=function(D){return B.H.useRef(D)},Bt.useState=function(D){return B.H.useState(D)},Bt.useSyncExternalStore=function(D,U,Z){return B.H.useSyncExternalStore(D,U,Z)},Bt.useTransition=function(){return B.H.useTransition()},Bt.version="19.1.0",Bt}var Ww;function Fu(){return Ww||(Ww=1,Em.exports=lN()),Em.exports}var Nm={exports:{}},Je={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tb;function uN(){if(tb)return Je;tb=1;var n=Fu();function t(h){var g="https://react.dev/errors/"+h;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)g+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+h+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var i={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(h,g,y){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:w==null?null:""+w,children:h,containerInfo:g,implementation:y}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(h,g){if(h==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Je.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Je.createPortal=function(h,g){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(t(299));return l(h,g,null,y)},Je.flushSync=function(h){var g=c.T,y=i.p;try{if(c.T=null,i.p=2,h)return h()}finally{c.T=g,i.p=y,i.d.f()}},Je.preconnect=function(h,g){typeof h=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,i.d.C(h,g))},Je.prefetchDNS=function(h){typeof h=="string"&&i.d.D(h)},Je.preinit=function(h,g){if(typeof h=="string"&&g&&typeof g.as=="string"){var y=g.as,w=d(y,g.crossOrigin),v=typeof g.integrity=="string"?g.integrity:void 0,b=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;y==="style"?i.d.S(h,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:w,integrity:v,fetchPriority:b}):y==="script"&&i.d.X(h,{crossOrigin:w,integrity:v,fetchPriority:b,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Je.preinitModule=function(h,g){if(typeof h=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var y=d(g.as,g.crossOrigin);i.d.M(h,{crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&i.d.M(h)},Je.preload=function(h,g){if(typeof h=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var y=g.as,w=d(y,g.crossOrigin);i.d.L(h,y,{crossOrigin:w,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Je.preloadModule=function(h,g){if(typeof h=="string")if(g){var y=d(g.as,g.crossOrigin);i.d.m(h,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else i.d.m(h)},Je.requestFormReset=function(h){i.d.r(h)},Je.unstable_batchedUpdates=function(h,g){return h(g)},Je.useFormState=function(h,g,y){return c.H.useFormState(h,g,y)},Je.useFormStatus=function(){return c.H.useHostTransitionStatus()},Je.version="19.1.0",Je}var eb;function s1(){if(eb)return Nm.exports;eb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),Nm.exports=uN(),Nm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nb;function cN(){if(nb)return gu;nb=1;var n=oN(),t=Fu(),e=s1();function i(r){var s="https://react.dev/errors/"+r;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function l(r){var s=r,o=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(o=s.return),r=s.return;while(r)}return s.tag===3?o:null}function c(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function d(r){if(l(r)!==r)throw Error(i(188))}function h(r){var s=r.alternate;if(!s){if(s=l(r),s===null)throw Error(i(188));return s!==r?null:r}for(var o=r,u=s;;){var f=o.return;if(f===null)break;var m=f.alternate;if(m===null){if(u=f.return,u!==null){o=u;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===o)return d(f),r;if(m===u)return d(f),s;m=m.sibling}throw Error(i(188))}if(o.return!==u.return)o=f,u=m;else{for(var S=!1,E=f.child;E;){if(E===o){S=!0,o=f,u=m;break}if(E===u){S=!0,u=f,o=m;break}E=E.sibling}if(!S){for(E=m.child;E;){if(E===o){S=!0,o=m,u=f;break}if(E===u){S=!0,u=m,o=f;break}E=E.sibling}if(!S)throw Error(i(189))}}if(o.alternate!==u)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?r:s}function g(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r;for(r=r.child;r!==null;){if(s=g(r),s!==null)return s;r=r.sibling}return null}var y=Object.assign,w=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),L=Symbol.for("react.consumer"),N=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),B=Symbol.for("react.suspense"),_=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),V=Symbol.for("react.lazy"),tt=Symbol.for("react.activity"),ft=Symbol.for("react.memo_cache_sentinel"),nt=Symbol.iterator;function it(r){return r===null||typeof r!="object"?null:(r=nt&&r[nt]||r["@@iterator"],typeof r=="function"?r:null)}var ut=Symbol.for("react.client.reference");function R(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===ut?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case x:return"Fragment";case C:return"Profiler";case A:return"StrictMode";case B:return"Suspense";case _:return"SuspenseList";case tt:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case b:return"Portal";case N:return(r.displayName||"Context")+".Provider";case L:return(r._context.displayName||"Context")+".Consumer";case I:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case P:return s=r.displayName||null,s!==null?s:R(r.type)||"Memo";case V:s=r._payload,r=r._init;try{return R(r(s))}catch{}}return null}var j=Array.isArray,O=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,z=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G={pending:!1,data:null,method:null,action:null},J=[],D=-1;function U(r){return{current:r}}function Z(r){0>D||(r.current=J[D],J[D]=null,D--)}function rt(r,s){D++,J[D]=r.current,r.current=s}var ot=U(null),mt=U(null),dt=U(null),pt=U(null);function gt(r,s){switch(rt(dt,s),rt(mt,r),rt(ot,null),s.nodeType){case 9:case 11:r=(r=s.documentElement)&&(r=r.namespaceURI)?xw(r):0;break;default:if(r=s.tagName,s=s.namespaceURI)s=xw(s),r=Tw(s,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}Z(ot),rt(ot,r)}function bt(){Z(ot),Z(mt),Z(dt)}function Jt(r){r.memoizedState!==null&&rt(pt,r);var s=ot.current,o=Tw(s,r.type);s!==o&&(rt(mt,r),rt(ot,o))}function Mt(r){mt.current===r&&(Z(ot),Z(mt)),pt.current===r&&(Z(pt),lu._currentValue=G)}var Nt=Object.prototype.hasOwnProperty,It=n.unstable_scheduleCallback,Dt=n.unstable_cancelCallback,Zt=n.unstable_shouldYield,le=n.unstable_requestPaint,be=n.unstable_now,vs=n.unstable_getCurrentPriorityLevel,ia=n.unstable_ImmediatePriority,sa=n.unstable_UserBlockingPriority,Ir=n.unstable_NormalPriority,aa=n.unstable_LowPriority,ws=n.unstable_IdlePriority,ll=n.log,Va=n.unstable_setDisableYieldValue,bn=null,Ee=null;function $n(r){if(typeof ll=="function"&&Va(r),Ee&&typeof Ee.setStrictMode=="function")try{Ee.setStrictMode(bn,r)}catch{}}var je=Math.clz32?Math.clz32:uh,ul=Math.log,lh=Math.LN2;function uh(r){return r>>>=0,r===0?32:31-(ul(r)/lh|0)|0}var ja=256,Ya=4194304;function Rr(r){var s=r&42;if(s!==0)return s;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function Ga(r,s,o){var u=r.pendingLanes;if(u===0)return 0;var f=0,m=r.suspendedLanes,S=r.pingedLanes;r=r.warmLanes;var E=u&134217727;return E!==0?(u=E&~m,u!==0?f=Rr(u):(S&=E,S!==0?f=Rr(S):o||(o=E&~r,o!==0&&(f=Rr(o))))):(E=u&~m,E!==0?f=Rr(E):S!==0?f=Rr(S):o||(o=u&~r,o!==0&&(f=Rr(o)))),f===0?0:s!==0&&s!==f&&(s&m)===0&&(m=f&-f,o=s&-s,m>=o||m===32&&(o&4194048)!==0)?s:f}function oa(r,s){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&s)===0}function ch(r,s){switch(r){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function oc(){var r=ja;return ja<<=1,(ja&4194048)===0&&(ja=256),r}function lc(){var r=Ya;return Ya<<=1,(Ya&62914560)===0&&(Ya=4194304),r}function cl(r){for(var s=[],o=0;31>o;o++)s.push(r);return s}function la(r,s){r.pendingLanes|=s,s!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function fh(r,s,o,u,f,m){var S=r.pendingLanes;r.pendingLanes=o,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=o,r.entangledLanes&=o,r.errorRecoveryDisabledLanes&=o,r.shellSuspendCounter=0;var E=r.entanglements,M=r.expirationTimes,X=r.hiddenUpdates;for(o=S&~o;0<o;){var at=31-je(o),ct=1<<at;E[at]=0,M[at]=-1;var F=X[at];if(F!==null)for(X[at]=null,at=0;at<F.length;at++){var Q=F[at];Q!==null&&(Q.lane&=-536870913)}o&=~ct}u!==0&&uc(r,u,0),m!==0&&f===0&&r.tag!==0&&(r.suspendedLanes|=m&~(S&~s))}function uc(r,s,o){r.pendingLanes|=s,r.suspendedLanes&=~s;var u=31-je(s);r.entangledLanes|=s,r.entanglements[u]=r.entanglements[u]|1073741824|o&4194090}function fl(r,s){var o=r.entangledLanes|=s;for(r=r.entanglements;o;){var u=31-je(o),f=1<<u;f&s|r[u]&s&&(r[u]|=s),o&=~f}}function dl(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function hl(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function cc(){var r=z.p;return r!==0?r:(r=window.event,r===void 0?32:Hw(r.type))}function dh(r,s){var o=z.p;try{return z.p=r,s()}finally{z.p=o}}var ir=Math.random().toString(36).slice(2),De="__reactFiber$"+ir,qe="__reactProps$"+ir,bs="__reactContainer$"+ir,gl="__reactEvents$"+ir,hh="__reactListeners$"+ir,gh="__reactHandles$"+ir,fc="__reactResources$"+ir,ua="__reactMarker$"+ir;function ml(r){delete r[De],delete r[qe],delete r[gl],delete r[hh],delete r[gh]}function Ss(r){var s=r[De];if(s)return s;for(var o=r.parentNode;o;){if(s=o[bs]||o[De]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(r=Cw(r);r!==null;){if(o=r[De])return o;r=Cw(r)}return s}r=o,o=r.parentNode}return null}function Mr(r){if(r=r[De]||r[bs]){var s=r.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return r}return null}function xs(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r.stateNode;throw Error(i(33))}function Br(r){var s=r[fc];return s||(s=r[fc]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Se(r){r[ua]=!0}var dc=new Set,hc={};function zr(r,s){Ts(r,s),Ts(r+"Capture",s)}function Ts(r,s){for(hc[r]=s,r=0;r<s.length;r++)dc.add(s[r])}var mh=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),yl={},gc={};function yh(r){return Nt.call(gc,r)?!0:Nt.call(yl,r)?!1:mh.test(r)?gc[r]=!0:(yl[r]=!0,!1)}function Ka(r,s,o){if(yh(s))if(o===null)r.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":r.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){r.removeAttribute(s);return}}r.setAttribute(s,""+o)}}function Xa(r,s,o){if(o===null)r.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(s);return}r.setAttribute(s,""+o)}}function Vn(r,s,o,u){if(u===null)r.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttributeNS(s,o,""+u)}}var pl,mc;function Lr(r){if(pl===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);pl=s&&s[1]||"",mc=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+pl+r+mc}var vl=!1;function wl(r,s){if(!r||vl)return"";vl=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var ct=function(){throw Error()};if(Object.defineProperty(ct.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ct,[])}catch(Q){var F=Q}Reflect.construct(r,[],ct)}else{try{ct.call()}catch(Q){F=Q}r.call(ct.prototype)}}else{try{throw Error()}catch(Q){F=Q}(ct=r())&&typeof ct.catch=="function"&&ct.catch(function(){})}}catch(Q){if(Q&&F&&typeof Q.stack=="string")return[Q.stack,F.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=u.DetermineComponentFrameRoot(),S=m[0],E=m[1];if(S&&E){var M=S.split(`
`),X=E.split(`
`);for(f=u=0;u<M.length&&!M[u].includes("DetermineComponentFrameRoot");)u++;for(;f<X.length&&!X[f].includes("DetermineComponentFrameRoot");)f++;if(u===M.length||f===X.length)for(u=M.length-1,f=X.length-1;1<=u&&0<=f&&M[u]!==X[f];)f--;for(;1<=u&&0<=f;u--,f--)if(M[u]!==X[f]){if(u!==1||f!==1)do if(u--,f--,0>f||M[u]!==X[f]){var at=`
`+M[u].replace(" at new "," at ");return r.displayName&&at.includes("<anonymous>")&&(at=at.replace("<anonymous>",r.displayName)),at}while(1<=u&&0<=f);break}}}finally{vl=!1,Error.prepareStackTrace=o}return(o=r?r.displayName||r.name:"")?Lr(o):""}function ph(r){switch(r.tag){case 26:case 27:case 5:return Lr(r.type);case 16:return Lr("Lazy");case 13:return Lr("Suspense");case 19:return Lr("SuspenseList");case 0:case 15:return wl(r.type,!1);case 11:return wl(r.type.render,!1);case 1:return wl(r.type,!0);case 31:return Lr("Activity");default:return""}}function yc(r){try{var s="";do s+=ph(r),r=r.return;while(r);return s}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function Ke(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function pc(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function vh(r){var s=pc(r)?"checked":"value",o=Object.getOwnPropertyDescriptor(r.constructor.prototype,s),u=""+r[s];if(!r.hasOwnProperty(s)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var f=o.get,m=o.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return f.call(this)},set:function(S){u=""+S,m.call(this,S)}}),Object.defineProperty(r,s,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(S){u=""+S},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function Fa(r){r._valueTracker||(r._valueTracker=vh(r))}function ca(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var o=s.getValue(),u="";return r&&(u=pc(r)?r.checked?"true":"false":r.value),r=u,r!==o?(s.setValue(r),!0):!1}function Za(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var wh=/[\n"\\]/g;function Xe(r){return r.replace(wh,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function fa(r,s,o,u,f,m,S,E){r.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?r.type=S:r.removeAttribute("type"),s!=null?S==="number"?(s===0&&r.value===""||r.value!=s)&&(r.value=""+Ke(s)):r.value!==""+Ke(s)&&(r.value=""+Ke(s)):S!=="submit"&&S!=="reset"||r.removeAttribute("value"),s!=null?bl(r,S,Ke(s)):o!=null?bl(r,S,Ke(o)):u!=null&&r.removeAttribute("value"),f==null&&m!=null&&(r.defaultChecked=!!m),f!=null&&(r.checked=f&&typeof f!="function"&&typeof f!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?r.name=""+Ke(E):r.removeAttribute("name")}function vc(r,s,o,u,f,m,S,E){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(r.type=m),s!=null||o!=null){if(!(m!=="submit"&&m!=="reset"||s!=null))return;o=o!=null?""+Ke(o):"",s=s!=null?""+Ke(s):o,E||s===r.value||(r.value=s),r.defaultValue=s}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,r.checked=E?r.checked:!!u,r.defaultChecked=!!u,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(r.name=S)}function bl(r,s,o){s==="number"&&Za(r.ownerDocument)===r||r.defaultValue===""+o||(r.defaultValue=""+o)}function _r(r,s,o,u){if(r=r.options,s){s={};for(var f=0;f<o.length;f++)s["$"+o[f]]=!0;for(o=0;o<r.length;o++)f=s.hasOwnProperty("$"+r[o].value),r[o].selected!==f&&(r[o].selected=f),f&&u&&(r[o].defaultSelected=!0)}else{for(o=""+Ke(o),s=null,f=0;f<r.length;f++){if(r[f].value===o){r[f].selected=!0,u&&(r[f].defaultSelected=!0);return}s!==null||r[f].disabled||(s=r[f])}s!==null&&(s.selected=!0)}}function bp(r,s,o){if(s!=null&&(s=""+Ke(s),s!==r.value&&(r.value=s),o==null)){r.defaultValue!==s&&(r.defaultValue=s);return}r.defaultValue=o!=null?""+Ke(o):""}function Sp(r,s,o,u){if(s==null){if(u!=null){if(o!=null)throw Error(i(92));if(j(u)){if(1<u.length)throw Error(i(93));u=u[0]}o=u}o==null&&(o=""),s=o}o=Ke(s),r.defaultValue=o,u=r.textContent,u===o&&u!==""&&u!==null&&(r.value=u)}function Qa(r,s){if(s){var o=r.firstChild;if(o&&o===r.lastChild&&o.nodeType===3){o.nodeValue=s;return}}r.textContent=s}var WT=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function xp(r,s,o){var u=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?r.setProperty(s,""):s==="float"?r.cssFloat="":r[s]="":u?r.setProperty(s,o):typeof o!="number"||o===0||WT.has(s)?s==="float"?r.cssFloat=o:r[s]=(""+o).trim():r[s]=o+"px"}function Tp(r,s,o){if(s!=null&&typeof s!="object")throw Error(i(62));if(r=r.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?r.setProperty(u,""):u==="float"?r.cssFloat="":r[u]="");for(var f in s)u=s[f],s.hasOwnProperty(f)&&o[f]!==u&&xp(r,f,u)}else for(var m in s)s.hasOwnProperty(m)&&xp(r,m,s[m])}function bh(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var tA=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),eA=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function wc(r){return eA.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}var Sh=null;function xh(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Wa=null,to=null;function Ap(r){var s=Mr(r);if(s&&(r=s.stateNode)){var o=r[qe]||null;t:switch(r=s.stateNode,s.type){case"input":if(fa(r,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=r;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Xe(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var u=o[s];if(u!==r&&u.form===r.form){var f=u[qe]||null;if(!f)throw Error(i(90));fa(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(s=0;s<o.length;s++)u=o[s],u.form===r.form&&ca(u)}break t;case"textarea":bp(r,o.value,o.defaultValue);break t;case"select":s=o.value,s!=null&&_r(r,!!o.multiple,s,!1)}}}var Th=!1;function Ep(r,s,o){if(Th)return r(s,o);Th=!0;try{var u=r(s);return u}finally{if(Th=!1,(Wa!==null||to!==null)&&(sf(),Wa&&(s=Wa,r=to,to=Wa=null,Ap(s),r)))for(s=0;s<r.length;s++)Ap(r[s])}}function Sl(r,s){var o=r.stateNode;if(o===null)return null;var u=o[qe]||null;if(u===null)return null;o=u[s];t:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(r=r.type,u=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!u;break t;default:r=!1}if(r)return null;if(o&&typeof o!="function")throw Error(i(231,s,typeof o));return o}var Ur=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ah=!1;if(Ur)try{var xl={};Object.defineProperty(xl,"passive",{get:function(){Ah=!0}}),window.addEventListener("test",xl,xl),window.removeEventListener("test",xl,xl)}catch{Ah=!1}var As=null,Eh=null,bc=null;function Np(){if(bc)return bc;var r,s=Eh,o=s.length,u,f="value"in As?As.value:As.textContent,m=f.length;for(r=0;r<o&&s[r]===f[r];r++);var S=o-r;for(u=1;u<=S&&s[o-u]===f[m-u];u++);return bc=f.slice(r,1<u?1-u:void 0)}function Sc(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function xc(){return!0}function Cp(){return!1}function Fe(r){function s(o,u,f,m,S){this._reactName=o,this._targetInst=f,this.type=u,this.nativeEvent=m,this.target=S,this.currentTarget=null;for(var E in r)r.hasOwnProperty(E)&&(o=r[E],this[E]=o?o(m):m[E]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?xc:Cp,this.isPropagationStopped=Cp,this}return y(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=xc)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=xc)},persist:function(){},isPersistent:xc}),s}var da={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Tc=Fe(da),Tl=y({},da,{view:0,detail:0}),nA=Fe(Tl),Nh,Ch,Al,Ac=y({},Tl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kh,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Al&&(Al&&r.type==="mousemove"?(Nh=r.screenX-Al.screenX,Ch=r.screenY-Al.screenY):Ch=Nh=0,Al=r),Nh)},movementY:function(r){return"movementY"in r?r.movementY:Ch}}),Dp=Fe(Ac),rA=y({},Ac,{dataTransfer:0}),iA=Fe(rA),sA=y({},Tl,{relatedTarget:0}),Dh=Fe(sA),aA=y({},da,{animationName:0,elapsedTime:0,pseudoElement:0}),oA=Fe(aA),lA=y({},da,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),uA=Fe(lA),cA=y({},da,{data:0}),kp=Fe(cA),fA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gA(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=hA[r])?!!s[r]:!1}function kh(){return gA}var mA=y({},Tl,{key:function(r){if(r.key){var s=fA[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=Sc(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?dA[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kh,charCode:function(r){return r.type==="keypress"?Sc(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Sc(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),yA=Fe(mA),pA=y({},Ac,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Op=Fe(pA),vA=y({},Tl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kh}),wA=Fe(vA),bA=y({},da,{propertyName:0,elapsedTime:0,pseudoElement:0}),SA=Fe(bA),xA=y({},Ac,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),TA=Fe(xA),AA=y({},da,{newState:0,oldState:0}),EA=Fe(AA),NA=[9,13,27,32],Oh=Ur&&"CompositionEvent"in window,El=null;Ur&&"documentMode"in document&&(El=document.documentMode);var CA=Ur&&"TextEvent"in window&&!El,Ip=Ur&&(!Oh||El&&8<El&&11>=El),Rp=" ",Mp=!1;function Bp(r,s){switch(r){case"keyup":return NA.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zp(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var eo=!1;function DA(r,s){switch(r){case"compositionend":return zp(s);case"keypress":return s.which!==32?null:(Mp=!0,Rp);case"textInput":return r=s.data,r===Rp&&Mp?null:r;default:return null}}function kA(r,s){if(eo)return r==="compositionend"||!Oh&&Bp(r,s)?(r=Np(),bc=Eh=As=null,eo=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Ip&&s.locale!=="ko"?null:s.data;default:return null}}var OA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Lp(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!OA[r.type]:s==="textarea"}function _p(r,s,o,u){Wa?to?to.push(u):to=[u]:Wa=u,s=ff(s,"onChange"),0<s.length&&(o=new Tc("onChange","change",null,o,u),r.push({event:o,listeners:s}))}var Nl=null,Cl=null;function IA(r){pw(r,0)}function Ec(r){var s=xs(r);if(ca(s))return r}function Up(r,s){if(r==="change")return s}var qp=!1;if(Ur){var Ih;if(Ur){var Rh="oninput"in document;if(!Rh){var Pp=document.createElement("div");Pp.setAttribute("oninput","return;"),Rh=typeof Pp.oninput=="function"}Ih=Rh}else Ih=!1;qp=Ih&&(!document.documentMode||9<document.documentMode)}function Jp(){Nl&&(Nl.detachEvent("onpropertychange",Hp),Cl=Nl=null)}function Hp(r){if(r.propertyName==="value"&&Ec(Cl)){var s=[];_p(s,Cl,r,xh(r)),Ep(IA,s)}}function RA(r,s,o){r==="focusin"?(Jp(),Nl=s,Cl=o,Nl.attachEvent("onpropertychange",Hp)):r==="focusout"&&Jp()}function MA(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Ec(Cl)}function BA(r,s){if(r==="click")return Ec(s)}function zA(r,s){if(r==="input"||r==="change")return Ec(s)}function LA(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var on=typeof Object.is=="function"?Object.is:LA;function Dl(r,s){if(on(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var o=Object.keys(r),u=Object.keys(s);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var f=o[u];if(!Nt.call(s,f)||!on(r[f],s[f]))return!1}return!0}function $p(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Vp(r,s){var o=$p(r);r=0;for(var u;o;){if(o.nodeType===3){if(u=r+o.textContent.length,r<=s&&u>=s)return{node:o,offset:s-r};r=u}t:{for(;o;){if(o.nextSibling){o=o.nextSibling;break t}o=o.parentNode}o=void 0}o=$p(o)}}function jp(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?jp(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function Yp(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var s=Za(r.document);s instanceof r.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)r=s.contentWindow;else break;s=Za(r.document)}return s}function Mh(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}var _A=Ur&&"documentMode"in document&&11>=document.documentMode,no=null,Bh=null,kl=null,zh=!1;function Gp(r,s,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;zh||no==null||no!==Za(u)||(u=no,"selectionStart"in u&&Mh(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),kl&&Dl(kl,u)||(kl=u,u=ff(Bh,"onSelect"),0<u.length&&(s=new Tc("onSelect","select",null,s,o),r.push({event:s,listeners:u}),s.target=no)))}function ha(r,s){var o={};return o[r.toLowerCase()]=s.toLowerCase(),o["Webkit"+r]="webkit"+s,o["Moz"+r]="moz"+s,o}var ro={animationend:ha("Animation","AnimationEnd"),animationiteration:ha("Animation","AnimationIteration"),animationstart:ha("Animation","AnimationStart"),transitionrun:ha("Transition","TransitionRun"),transitionstart:ha("Transition","TransitionStart"),transitioncancel:ha("Transition","TransitionCancel"),transitionend:ha("Transition","TransitionEnd")},Lh={},Kp={};Ur&&(Kp=document.createElement("div").style,"AnimationEvent"in window||(delete ro.animationend.animation,delete ro.animationiteration.animation,delete ro.animationstart.animation),"TransitionEvent"in window||delete ro.transitionend.transition);function ga(r){if(Lh[r])return Lh[r];if(!ro[r])return r;var s=ro[r],o;for(o in s)if(s.hasOwnProperty(o)&&o in Kp)return Lh[r]=s[o];return r}var Xp=ga("animationend"),Fp=ga("animationiteration"),Zp=ga("animationstart"),UA=ga("transitionrun"),qA=ga("transitionstart"),PA=ga("transitioncancel"),Qp=ga("transitionend"),Wp=new Map,_h="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");_h.push("scrollEnd");function jn(r,s){Wp.set(r,s),zr(s,[r])}var t0=new WeakMap;function Sn(r,s){if(typeof r=="object"&&r!==null){var o=t0.get(r);return o!==void 0?o:(s={value:r,source:s,stack:yc(s)},t0.set(r,s),s)}return{value:r,source:s,stack:yc(s)}}var xn=[],io=0,Uh=0;function Nc(){for(var r=io,s=Uh=io=0;s<r;){var o=xn[s];xn[s++]=null;var u=xn[s];xn[s++]=null;var f=xn[s];xn[s++]=null;var m=xn[s];if(xn[s++]=null,u!==null&&f!==null){var S=u.pending;S===null?f.next=f:(f.next=S.next,S.next=f),u.pending=f}m!==0&&e0(o,f,m)}}function Cc(r,s,o,u){xn[io++]=r,xn[io++]=s,xn[io++]=o,xn[io++]=u,Uh|=u,r.lanes|=u,r=r.alternate,r!==null&&(r.lanes|=u)}function qh(r,s,o,u){return Cc(r,s,o,u),Dc(r)}function so(r,s){return Cc(r,null,null,s),Dc(r)}function e0(r,s,o){r.lanes|=o;var u=r.alternate;u!==null&&(u.lanes|=o);for(var f=!1,m=r.return;m!==null;)m.childLanes|=o,u=m.alternate,u!==null&&(u.childLanes|=o),m.tag===22&&(r=m.stateNode,r===null||r._visibility&1||(f=!0)),r=m,m=m.return;return r.tag===3?(m=r.stateNode,f&&s!==null&&(f=31-je(o),r=m.hiddenUpdates,u=r[f],u===null?r[f]=[s]:u.push(s),s.lane=o|536870912),m):null}function Dc(r){if(50<tu)throw tu=0,jg=null,Error(i(185));for(var s=r.return;s!==null;)r=s,s=r.return;return r.tag===3?r.stateNode:null}var ao={};function JA(r,s,o,u){this.tag=r,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ln(r,s,o,u){return new JA(r,s,o,u)}function Ph(r){return r=r.prototype,!(!r||!r.isReactComponent)}function qr(r,s){var o=r.alternate;return o===null?(o=ln(r.tag,s,r.key,r.mode),o.elementType=r.elementType,o.type=r.type,o.stateNode=r.stateNode,o.alternate=r,r.alternate=o):(o.pendingProps=s,o.type=r.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=r.flags&65011712,o.childLanes=r.childLanes,o.lanes=r.lanes,o.child=r.child,o.memoizedProps=r.memoizedProps,o.memoizedState=r.memoizedState,o.updateQueue=r.updateQueue,s=r.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=r.sibling,o.index=r.index,o.ref=r.ref,o.refCleanup=r.refCleanup,o}function n0(r,s){r.flags&=65011714;var o=r.alternate;return o===null?(r.childLanes=0,r.lanes=s,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,s=o.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),r}function kc(r,s,o,u,f,m){var S=0;if(u=r,typeof r=="function")Ph(r)&&(S=1);else if(typeof r=="string")S=$E(r,o,ot.current)?26:r==="html"||r==="head"||r==="body"?27:5;else t:switch(r){case tt:return r=ln(31,o,s,f),r.elementType=tt,r.lanes=m,r;case x:return ma(o.children,f,m,s);case A:S=8,f|=24;break;case C:return r=ln(12,o,s,f|2),r.elementType=C,r.lanes=m,r;case B:return r=ln(13,o,s,f),r.elementType=B,r.lanes=m,r;case _:return r=ln(19,o,s,f),r.elementType=_,r.lanes=m,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case k:case N:S=10;break t;case L:S=9;break t;case I:S=11;break t;case P:S=14;break t;case V:S=16,u=null;break t}S=29,o=Error(i(130,r===null?"null":typeof r,"")),u=null}return s=ln(S,o,s,f),s.elementType=r,s.type=u,s.lanes=m,s}function ma(r,s,o,u){return r=ln(7,r,u,s),r.lanes=o,r}function Jh(r,s,o){return r=ln(6,r,null,s),r.lanes=o,r}function Hh(r,s,o){return s=ln(4,r.children!==null?r.children:[],r.key,s),s.lanes=o,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}var oo=[],lo=0,Oc=null,Ic=0,Tn=[],An=0,ya=null,Pr=1,Jr="";function pa(r,s){oo[lo++]=Ic,oo[lo++]=Oc,Oc=r,Ic=s}function r0(r,s,o){Tn[An++]=Pr,Tn[An++]=Jr,Tn[An++]=ya,ya=r;var u=Pr;r=Jr;var f=32-je(u)-1;u&=~(1<<f),o+=1;var m=32-je(s)+f;if(30<m){var S=f-f%5;m=(u&(1<<S)-1).toString(32),u>>=S,f-=S,Pr=1<<32-je(s)+f|o<<f|u,Jr=m+r}else Pr=1<<m|o<<f|u,Jr=r}function $h(r){r.return!==null&&(pa(r,1),r0(r,1,0))}function Vh(r){for(;r===Oc;)Oc=oo[--lo],oo[lo]=null,Ic=oo[--lo],oo[lo]=null;for(;r===ya;)ya=Tn[--An],Tn[An]=null,Jr=Tn[--An],Tn[An]=null,Pr=Tn[--An],Tn[An]=null}var Ye=null,de=null,Yt=!1,va=null,sr=!1,jh=Error(i(519));function wa(r){var s=Error(i(418,""));throw Rl(Sn(s,r)),jh}function i0(r){var s=r.stateNode,o=r.type,u=r.memoizedProps;switch(s[De]=r,s[qe]=u,o){case"dialog":Ut("cancel",s),Ut("close",s);break;case"iframe":case"object":case"embed":Ut("load",s);break;case"video":case"audio":for(o=0;o<nu.length;o++)Ut(nu[o],s);break;case"source":Ut("error",s);break;case"img":case"image":case"link":Ut("error",s),Ut("load",s);break;case"details":Ut("toggle",s);break;case"input":Ut("invalid",s),vc(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),Fa(s);break;case"select":Ut("invalid",s);break;case"textarea":Ut("invalid",s),Sp(s,u.value,u.defaultValue,u.children),Fa(s)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||u.suppressHydrationWarning===!0||Sw(s.textContent,o)?(u.popover!=null&&(Ut("beforetoggle",s),Ut("toggle",s)),u.onScroll!=null&&Ut("scroll",s),u.onScrollEnd!=null&&Ut("scrollend",s),u.onClick!=null&&(s.onclick=df),s=!0):s=!1,s||wa(r)}function s0(r){for(Ye=r.return;Ye;)switch(Ye.tag){case 5:case 13:sr=!1;return;case 27:case 3:sr=!0;return;default:Ye=Ye.return}}function Ol(r){if(r!==Ye)return!1;if(!Yt)return s0(r),Yt=!0,!1;var s=r.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=r.type,o=!(o!=="form"&&o!=="button")||om(r.type,r.memoizedProps)),o=!o),o&&de&&wa(r),s0(r),s===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));t:{for(r=r.nextSibling,s=0;r;){if(r.nodeType===8)if(o=r.data,o==="/$"){if(s===0){de=Gn(r.nextSibling);break t}s--}else o!=="$"&&o!=="$!"&&o!=="$?"||s++;r=r.nextSibling}de=null}}else s===27?(s=de,Ps(r.type)?(r=fm,fm=null,de=r):de=s):de=Ye?Gn(r.stateNode.nextSibling):null;return!0}function Il(){de=Ye=null,Yt=!1}function a0(){var r=va;return r!==null&&(We===null?We=r:We.push.apply(We,r),va=null),r}function Rl(r){va===null?va=[r]:va.push(r)}var Yh=U(null),ba=null,Hr=null;function Es(r,s,o){rt(Yh,s._currentValue),s._currentValue=o}function $r(r){r._currentValue=Yh.current,Z(Yh)}function Gh(r,s,o){for(;r!==null;){var u=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),r===o)break;r=r.return}}function Kh(r,s,o,u){var f=r.child;for(f!==null&&(f.return=r);f!==null;){var m=f.dependencies;if(m!==null){var S=f.child;m=m.firstContext;t:for(;m!==null;){var E=m;m=f;for(var M=0;M<s.length;M++)if(E.context===s[M]){m.lanes|=o,E=m.alternate,E!==null&&(E.lanes|=o),Gh(m.return,o,r),u||(S=null);break t}m=E.next}}else if(f.tag===18){if(S=f.return,S===null)throw Error(i(341));S.lanes|=o,m=S.alternate,m!==null&&(m.lanes|=o),Gh(S,o,r),S=null}else S=f.child;if(S!==null)S.return=f;else for(S=f;S!==null;){if(S===r){S=null;break}if(f=S.sibling,f!==null){f.return=S.return,S=f;break}S=S.return}f=S}}function Ml(r,s,o,u){r=null;for(var f=s,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var S=f.alternate;if(S===null)throw Error(i(387));if(S=S.memoizedProps,S!==null){var E=f.type;on(f.pendingProps.value,S.value)||(r!==null?r.push(E):r=[E])}}else if(f===pt.current){if(S=f.alternate,S===null)throw Error(i(387));S.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(r!==null?r.push(lu):r=[lu])}f=f.return}r!==null&&Kh(s,r,o,u),s.flags|=262144}function Rc(r){for(r=r.firstContext;r!==null;){if(!on(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function Sa(r){ba=r,Hr=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function Pe(r){return o0(ba,r)}function Mc(r,s){return ba===null&&Sa(r),o0(r,s)}function o0(r,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},Hr===null){if(r===null)throw Error(i(308));Hr=s,r.dependencies={lanes:0,firstContext:s},r.flags|=524288}else Hr=Hr.next=s;return o}var HA=typeof AbortController<"u"?AbortController:function(){var r=[],s=this.signal={aborted:!1,addEventListener:function(o,u){r.push(u)}};this.abort=function(){s.aborted=!0,r.forEach(function(o){return o()})}},$A=n.unstable_scheduleCallback,VA=n.unstable_NormalPriority,Ne={$$typeof:N,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Xh(){return{controller:new HA,data:new Map,refCount:0}}function Bl(r){r.refCount--,r.refCount===0&&$A(VA,function(){r.controller.abort()})}var zl=null,Fh=0,uo=0,co=null;function jA(r,s){if(zl===null){var o=zl=[];Fh=0,uo=Qg(),co={status:"pending",value:void 0,then:function(u){o.push(u)}}}return Fh++,s.then(l0,l0),s}function l0(){if(--Fh===0&&zl!==null){co!==null&&(co.status="fulfilled");var r=zl;zl=null,uo=0,co=null;for(var s=0;s<r.length;s++)(0,r[s])()}}function YA(r,s){var o=[],u={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return r.then(function(){u.status="fulfilled",u.value=s;for(var f=0;f<o.length;f++)(0,o[f])(s)},function(f){for(u.status="rejected",u.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),u}var u0=O.S;O.S=function(r,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&jA(r,s),u0!==null&&u0(r,s)};var xa=U(null);function Zh(){var r=xa.current;return r!==null?r:ie.pooledCache}function Bc(r,s){s===null?rt(xa,xa.current):rt(xa,s.pool)}function c0(){var r=Zh();return r===null?null:{parent:Ne._currentValue,pool:r}}var Ll=Error(i(460)),f0=Error(i(474)),zc=Error(i(542)),Qh={then:function(){}};function d0(r){return r=r.status,r==="fulfilled"||r==="rejected"}function Lc(){}function h0(r,s,o){switch(o=r[o],o===void 0?r.push(s):o!==s&&(s.then(Lc,Lc),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,m0(r),r;default:if(typeof s.status=="string")s.then(Lc,Lc);else{if(r=ie,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=s,r.status="pending",r.then(function(u){if(s.status==="pending"){var f=s;f.status="fulfilled",f.value=u}},function(u){if(s.status==="pending"){var f=s;f.status="rejected",f.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,m0(r),r}throw _l=s,Ll}}var _l=null;function g0(){if(_l===null)throw Error(i(459));var r=_l;return _l=null,r}function m0(r){if(r===Ll||r===zc)throw Error(i(483))}var Ns=!1;function Wh(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function tg(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Cs(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function Ds(r,s,o){var u=r.updateQueue;if(u===null)return null;if(u=u.shared,(Xt&2)!==0){var f=u.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),u.pending=s,s=Dc(r),e0(r,null,o),s}return Cc(r,u,s,o),Dc(r)}function Ul(r,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var u=s.lanes;u&=r.pendingLanes,o|=u,s.lanes=o,fl(r,o)}}function eg(r,s){var o=r.updateQueue,u=r.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var f=null,m=null;if(o=o.firstBaseUpdate,o!==null){do{var S={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};m===null?f=m=S:m=m.next=S,o=o.next}while(o!==null);m===null?f=m=s:m=m.next=s}else f=m=s;o={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:u.shared,callbacks:u.callbacks},r.updateQueue=o;return}r=o.lastBaseUpdate,r===null?o.firstBaseUpdate=s:r.next=s,o.lastBaseUpdate=s}var ng=!1;function ql(){if(ng){var r=co;if(r!==null)throw r}}function Pl(r,s,o,u){ng=!1;var f=r.updateQueue;Ns=!1;var m=f.firstBaseUpdate,S=f.lastBaseUpdate,E=f.shared.pending;if(E!==null){f.shared.pending=null;var M=E,X=M.next;M.next=null,S===null?m=X:S.next=X,S=M;var at=r.alternate;at!==null&&(at=at.updateQueue,E=at.lastBaseUpdate,E!==S&&(E===null?at.firstBaseUpdate=X:E.next=X,at.lastBaseUpdate=M))}if(m!==null){var ct=f.baseState;S=0,at=X=M=null,E=m;do{var F=E.lane&-536870913,Q=F!==E.lane;if(Q?(Ht&F)===F:(u&F)===F){F!==0&&F===uo&&(ng=!0),at!==null&&(at=at.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});t:{var Ot=r,Ct=E;F=s;var te=o;switch(Ct.tag){case 1:if(Ot=Ct.payload,typeof Ot=="function"){ct=Ot.call(te,ct,F);break t}ct=Ot;break t;case 3:Ot.flags=Ot.flags&-65537|128;case 0:if(Ot=Ct.payload,F=typeof Ot=="function"?Ot.call(te,ct,F):Ot,F==null)break t;ct=y({},ct,F);break t;case 2:Ns=!0}}F=E.callback,F!==null&&(r.flags|=64,Q&&(r.flags|=8192),Q=f.callbacks,Q===null?f.callbacks=[F]:Q.push(F))}else Q={lane:F,tag:E.tag,payload:E.payload,callback:E.callback,next:null},at===null?(X=at=Q,M=ct):at=at.next=Q,S|=F;if(E=E.next,E===null){if(E=f.shared.pending,E===null)break;Q=E,E=Q.next,Q.next=null,f.lastBaseUpdate=Q,f.shared.pending=null}}while(!0);at===null&&(M=ct),f.baseState=M,f.firstBaseUpdate=X,f.lastBaseUpdate=at,m===null&&(f.shared.lanes=0),Ls|=S,r.lanes=S,r.memoizedState=ct}}function y0(r,s){if(typeof r!="function")throw Error(i(191,r));r.call(s)}function p0(r,s){var o=r.callbacks;if(o!==null)for(r.callbacks=null,r=0;r<o.length;r++)y0(o[r],s)}var fo=U(null),_c=U(0);function v0(r,s){r=Fr,rt(_c,r),rt(fo,s),Fr=r|s.baseLanes}function rg(){rt(_c,Fr),rt(fo,fo.current)}function ig(){Fr=_c.current,Z(fo),Z(_c)}var ks=0,zt=null,Qt=null,xe=null,Uc=!1,ho=!1,Ta=!1,qc=0,Jl=0,go=null,GA=0;function ye(){throw Error(i(321))}function sg(r,s){if(s===null)return!1;for(var o=0;o<s.length&&o<r.length;o++)if(!on(r[o],s[o]))return!1;return!0}function ag(r,s,o,u,f,m){return ks=m,zt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,O.H=r===null||r.memoizedState===null?ev:nv,Ta=!1,m=o(u,f),Ta=!1,ho&&(m=b0(s,o,u,f)),w0(r),m}function w0(r){O.H=jc;var s=Qt!==null&&Qt.next!==null;if(ks=0,xe=Qt=zt=null,Uc=!1,Jl=0,go=null,s)throw Error(i(300));r===null||ke||(r=r.dependencies,r!==null&&Rc(r)&&(ke=!0))}function b0(r,s,o,u){zt=r;var f=0;do{if(ho&&(go=null),Jl=0,ho=!1,25<=f)throw Error(i(301));if(f+=1,xe=Qt=null,r.updateQueue!=null){var m=r.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}O.H=tE,m=s(o,u)}while(ho);return m}function KA(){var r=O.H,s=r.useState()[0];return s=typeof s.then=="function"?Hl(s):s,r=r.useState()[0],(Qt!==null?Qt.memoizedState:null)!==r&&(zt.flags|=1024),s}function og(){var r=qc!==0;return qc=0,r}function lg(r,s,o){s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~o}function ug(r){if(Uc){for(r=r.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Uc=!1}ks=0,xe=Qt=zt=null,ho=!1,Jl=qc=0,go=null}function Ze(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xe===null?zt.memoizedState=xe=r:xe=xe.next=r,xe}function Te(){if(Qt===null){var r=zt.alternate;r=r!==null?r.memoizedState:null}else r=Qt.next;var s=xe===null?zt.memoizedState:xe.next;if(s!==null)xe=s,Qt=r;else{if(r===null)throw zt.alternate===null?Error(i(467)):Error(i(310));Qt=r,r={memoizedState:Qt.memoizedState,baseState:Qt.baseState,baseQueue:Qt.baseQueue,queue:Qt.queue,next:null},xe===null?zt.memoizedState=xe=r:xe=xe.next=r}return xe}function cg(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Hl(r){var s=Jl;return Jl+=1,go===null&&(go=[]),r=h0(go,r,s),s=zt,(xe===null?s.memoizedState:xe.next)===null&&(s=s.alternate,O.H=s===null||s.memoizedState===null?ev:nv),r}function Pc(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return Hl(r);if(r.$$typeof===N)return Pe(r)}throw Error(i(438,String(r)))}function fg(r){var s=null,o=zt.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var u=zt.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(f){return f.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=cg(),zt.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(r),u=0;u<r;u++)o[u]=ft;return s.index++,o}function Vr(r,s){return typeof s=="function"?s(r):s}function Jc(r){var s=Te();return dg(s,Qt,r)}function dg(r,s,o){var u=r.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=o;var f=r.baseQueue,m=u.pending;if(m!==null){if(f!==null){var S=f.next;f.next=m.next,m.next=S}s.baseQueue=f=m,u.pending=null}if(m=r.baseState,f===null)r.memoizedState=m;else{s=f.next;var E=S=null,M=null,X=s,at=!1;do{var ct=X.lane&-536870913;if(ct!==X.lane?(Ht&ct)===ct:(ks&ct)===ct){var F=X.revertLane;if(F===0)M!==null&&(M=M.next={lane:0,revertLane:0,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),ct===uo&&(at=!0);else if((ks&F)===F){X=X.next,F===uo&&(at=!0);continue}else ct={lane:0,revertLane:X.revertLane,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},M===null?(E=M=ct,S=m):M=M.next=ct,zt.lanes|=F,Ls|=F;ct=X.action,Ta&&o(m,ct),m=X.hasEagerState?X.eagerState:o(m,ct)}else F={lane:ct,revertLane:X.revertLane,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},M===null?(E=M=F,S=m):M=M.next=F,zt.lanes|=ct,Ls|=ct;X=X.next}while(X!==null&&X!==s);if(M===null?S=m:M.next=E,!on(m,r.memoizedState)&&(ke=!0,at&&(o=co,o!==null)))throw o;r.memoizedState=m,r.baseState=S,r.baseQueue=M,u.lastRenderedState=m}return f===null&&(u.lanes=0),[r.memoizedState,u.dispatch]}function hg(r){var s=Te(),o=s.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=r;var u=o.dispatch,f=o.pending,m=s.memoizedState;if(f!==null){o.pending=null;var S=f=f.next;do m=r(m,S.action),S=S.next;while(S!==f);on(m,s.memoizedState)||(ke=!0),s.memoizedState=m,s.baseQueue===null&&(s.baseState=m),o.lastRenderedState=m}return[m,u]}function S0(r,s,o){var u=zt,f=Te(),m=Yt;if(m){if(o===void 0)throw Error(i(407));o=o()}else o=s();var S=!on((Qt||f).memoizedState,o);S&&(f.memoizedState=o,ke=!0),f=f.queue;var E=A0.bind(null,u,f,r);if($l(2048,8,E,[r]),f.getSnapshot!==s||S||xe!==null&&xe.memoizedState.tag&1){if(u.flags|=2048,mo(9,Hc(),T0.bind(null,u,f,o,s),null),ie===null)throw Error(i(349));m||(ks&124)!==0||x0(u,s,o)}return o}function x0(r,s,o){r.flags|=16384,r={getSnapshot:s,value:o},s=zt.updateQueue,s===null?(s=cg(),zt.updateQueue=s,s.stores=[r]):(o=s.stores,o===null?s.stores=[r]:o.push(r))}function T0(r,s,o,u){s.value=o,s.getSnapshot=u,E0(s)&&N0(r)}function A0(r,s,o){return o(function(){E0(s)&&N0(r)})}function E0(r){var s=r.getSnapshot;r=r.value;try{var o=s();return!on(r,o)}catch{return!0}}function N0(r){var s=so(r,2);s!==null&&hn(s,r,2)}function gg(r){var s=Ze();if(typeof r=="function"){var o=r;if(r=o(),Ta){$n(!0);try{o()}finally{$n(!1)}}}return s.memoizedState=s.baseState=r,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vr,lastRenderedState:r},s}function C0(r,s,o,u){return r.baseState=o,dg(r,Qt,typeof u=="function"?u:Vr)}function XA(r,s,o,u,f){if(Vc(r))throw Error(i(485));if(r=s.action,r!==null){var m={payload:f,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){m.listeners.push(S)}};O.T!==null?o(!0):m.isTransition=!1,u(m),o=s.pending,o===null?(m.next=s.pending=m,D0(s,m)):(m.next=o.next,s.pending=o.next=m)}}function D0(r,s){var o=s.action,u=s.payload,f=r.state;if(s.isTransition){var m=O.T,S={};O.T=S;try{var E=o(f,u),M=O.S;M!==null&&M(S,E),k0(r,s,E)}catch(X){mg(r,s,X)}finally{O.T=m}}else try{m=o(f,u),k0(r,s,m)}catch(X){mg(r,s,X)}}function k0(r,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){O0(r,s,u)},function(u){return mg(r,s,u)}):O0(r,s,o)}function O0(r,s,o){s.status="fulfilled",s.value=o,I0(s),r.state=o,s=r.pending,s!==null&&(o=s.next,o===s?r.pending=null:(o=o.next,s.next=o,D0(r,o)))}function mg(r,s,o){var u=r.pending;if(r.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=o,I0(s),s=s.next;while(s!==u)}r.action=null}function I0(r){r=r.listeners;for(var s=0;s<r.length;s++)(0,r[s])()}function R0(r,s){return s}function M0(r,s){if(Yt){var o=ie.formState;if(o!==null){t:{var u=zt;if(Yt){if(de){e:{for(var f=de,m=sr;f.nodeType!==8;){if(!m){f=null;break e}if(f=Gn(f.nextSibling),f===null){f=null;break e}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){de=Gn(f.nextSibling),u=f.data==="F!";break t}}wa(u)}u=!1}u&&(s=o[0])}}return o=Ze(),o.memoizedState=o.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:R0,lastRenderedState:s},o.queue=u,o=Q0.bind(null,zt,u),u.dispatch=o,u=gg(!1),m=bg.bind(null,zt,!1,u.queue),u=Ze(),f={state:s,dispatch:null,action:r,pending:null},u.queue=f,o=XA.bind(null,zt,f,m,o),f.dispatch=o,u.memoizedState=r,[s,o,!1]}function B0(r){var s=Te();return z0(s,Qt,r)}function z0(r,s,o){if(s=dg(r,s,R0)[0],r=Jc(Vr)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=Hl(s)}catch(S){throw S===Ll?zc:S}else u=s;s=Te();var f=s.queue,m=f.dispatch;return o!==s.memoizedState&&(zt.flags|=2048,mo(9,Hc(),FA.bind(null,f,o),null)),[u,m,r]}function FA(r,s){r.action=s}function L0(r){var s=Te(),o=Qt;if(o!==null)return z0(s,o,r);Te(),s=s.memoizedState,o=Te();var u=o.queue.dispatch;return o.memoizedState=r,[s,u,!1]}function mo(r,s,o,u){return r={tag:r,create:o,deps:u,inst:s,next:null},s=zt.updateQueue,s===null&&(s=cg(),zt.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=r.next=r:(u=o.next,o.next=r,r.next=u,s.lastEffect=r),r}function Hc(){return{destroy:void 0,resource:void 0}}function _0(){return Te().memoizedState}function $c(r,s,o,u){var f=Ze();u=u===void 0?null:u,zt.flags|=r,f.memoizedState=mo(1|s,Hc(),o,u)}function $l(r,s,o,u){var f=Te();u=u===void 0?null:u;var m=f.memoizedState.inst;Qt!==null&&u!==null&&sg(u,Qt.memoizedState.deps)?f.memoizedState=mo(s,m,o,u):(zt.flags|=r,f.memoizedState=mo(1|s,m,o,u))}function U0(r,s){$c(8390656,8,r,s)}function q0(r,s){$l(2048,8,r,s)}function P0(r,s){return $l(4,2,r,s)}function J0(r,s){return $l(4,4,r,s)}function H0(r,s){if(typeof s=="function"){r=r();var o=s(r);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function $0(r,s,o){o=o!=null?o.concat([r]):null,$l(4,4,H0.bind(null,s,r),o)}function yg(){}function V0(r,s){var o=Te();s=s===void 0?null:s;var u=o.memoizedState;return s!==null&&sg(s,u[1])?u[0]:(o.memoizedState=[r,s],r)}function j0(r,s){var o=Te();s=s===void 0?null:s;var u=o.memoizedState;if(s!==null&&sg(s,u[1]))return u[0];if(u=r(),Ta){$n(!0);try{r()}finally{$n(!1)}}return o.memoizedState=[u,s],u}function pg(r,s,o){return o===void 0||(ks&1073741824)!==0?r.memoizedState=s:(r.memoizedState=o,r=Kv(),zt.lanes|=r,Ls|=r,o)}function Y0(r,s,o,u){return on(o,s)?o:fo.current!==null?(r=pg(r,o,u),on(r,s)||(ke=!0),r):(ks&42)===0?(ke=!0,r.memoizedState=o):(r=Kv(),zt.lanes|=r,Ls|=r,s)}function G0(r,s,o,u,f){var m=z.p;z.p=m!==0&&8>m?m:8;var S=O.T,E={};O.T=E,bg(r,!1,s,o);try{var M=f(),X=O.S;if(X!==null&&X(E,M),M!==null&&typeof M=="object"&&typeof M.then=="function"){var at=YA(M,u);Vl(r,s,at,dn(r))}else Vl(r,s,u,dn(r))}catch(ct){Vl(r,s,{then:function(){},status:"rejected",reason:ct},dn())}finally{z.p=m,O.T=S}}function ZA(){}function vg(r,s,o,u){if(r.tag!==5)throw Error(i(476));var f=K0(r).queue;G0(r,f,s,G,o===null?ZA:function(){return X0(r),o(u)})}function K0(r){var s=r.memoizedState;if(s!==null)return s;s={memoizedState:G,baseState:G,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vr,lastRenderedState:G},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vr,lastRenderedState:o},next:null},r.memoizedState=s,r=r.alternate,r!==null&&(r.memoizedState=s),s}function X0(r){var s=K0(r).next.queue;Vl(r,s,{},dn())}function wg(){return Pe(lu)}function F0(){return Te().memoizedState}function Z0(){return Te().memoizedState}function QA(r){for(var s=r.return;s!==null;){switch(s.tag){case 24:case 3:var o=dn();r=Cs(o);var u=Ds(s,r,o);u!==null&&(hn(u,s,o),Ul(u,s,o)),s={cache:Xh()},r.payload=s;return}s=s.return}}function WA(r,s,o){var u=dn();o={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},Vc(r)?W0(s,o):(o=qh(r,s,o,u),o!==null&&(hn(o,r,u),tv(o,s,u)))}function Q0(r,s,o){var u=dn();Vl(r,s,o,u)}function Vl(r,s,o,u){var f={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(Vc(r))W0(s,f);else{var m=r.alternate;if(r.lanes===0&&(m===null||m.lanes===0)&&(m=s.lastRenderedReducer,m!==null))try{var S=s.lastRenderedState,E=m(S,o);if(f.hasEagerState=!0,f.eagerState=E,on(E,S))return Cc(r,s,f,0),ie===null&&Nc(),!1}catch{}finally{}if(o=qh(r,s,f,u),o!==null)return hn(o,r,u),tv(o,s,u),!0}return!1}function bg(r,s,o,u){if(u={lane:2,revertLane:Qg(),action:u,hasEagerState:!1,eagerState:null,next:null},Vc(r)){if(s)throw Error(i(479))}else s=qh(r,o,u,2),s!==null&&hn(s,r,2)}function Vc(r){var s=r.alternate;return r===zt||s!==null&&s===zt}function W0(r,s){ho=Uc=!0;var o=r.pending;o===null?s.next=s:(s.next=o.next,o.next=s),r.pending=s}function tv(r,s,o){if((o&4194048)!==0){var u=s.lanes;u&=r.pendingLanes,o|=u,s.lanes=o,fl(r,o)}}var jc={readContext:Pe,use:Pc,useCallback:ye,useContext:ye,useEffect:ye,useImperativeHandle:ye,useLayoutEffect:ye,useInsertionEffect:ye,useMemo:ye,useReducer:ye,useRef:ye,useState:ye,useDebugValue:ye,useDeferredValue:ye,useTransition:ye,useSyncExternalStore:ye,useId:ye,useHostTransitionStatus:ye,useFormState:ye,useActionState:ye,useOptimistic:ye,useMemoCache:ye,useCacheRefresh:ye},ev={readContext:Pe,use:Pc,useCallback:function(r,s){return Ze().memoizedState=[r,s===void 0?null:s],r},useContext:Pe,useEffect:U0,useImperativeHandle:function(r,s,o){o=o!=null?o.concat([r]):null,$c(4194308,4,H0.bind(null,s,r),o)},useLayoutEffect:function(r,s){return $c(4194308,4,r,s)},useInsertionEffect:function(r,s){$c(4,2,r,s)},useMemo:function(r,s){var o=Ze();s=s===void 0?null:s;var u=r();if(Ta){$n(!0);try{r()}finally{$n(!1)}}return o.memoizedState=[u,s],u},useReducer:function(r,s,o){var u=Ze();if(o!==void 0){var f=o(s);if(Ta){$n(!0);try{o(s)}finally{$n(!1)}}}else f=s;return u.memoizedState=u.baseState=f,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:f},u.queue=r,r=r.dispatch=WA.bind(null,zt,r),[u.memoizedState,r]},useRef:function(r){var s=Ze();return r={current:r},s.memoizedState=r},useState:function(r){r=gg(r);var s=r.queue,o=Q0.bind(null,zt,s);return s.dispatch=o,[r.memoizedState,o]},useDebugValue:yg,useDeferredValue:function(r,s){var o=Ze();return pg(o,r,s)},useTransition:function(){var r=gg(!1);return r=G0.bind(null,zt,r.queue,!0,!1),Ze().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,s,o){var u=zt,f=Ze();if(Yt){if(o===void 0)throw Error(i(407));o=o()}else{if(o=s(),ie===null)throw Error(i(349));(Ht&124)!==0||x0(u,s,o)}f.memoizedState=o;var m={value:o,getSnapshot:s};return f.queue=m,U0(A0.bind(null,u,m,r),[r]),u.flags|=2048,mo(9,Hc(),T0.bind(null,u,m,o,s),null),o},useId:function(){var r=Ze(),s=ie.identifierPrefix;if(Yt){var o=Jr,u=Pr;o=(u&~(1<<32-je(u)-1)).toString(32)+o,s=""+s+"R"+o,o=qc++,0<o&&(s+="H"+o.toString(32)),s+=""}else o=GA++,s=""+s+"r"+o.toString(32)+"";return r.memoizedState=s},useHostTransitionStatus:wg,useFormState:M0,useActionState:M0,useOptimistic:function(r){var s=Ze();s.memoizedState=s.baseState=r;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=bg.bind(null,zt,!0,o),o.dispatch=s,[r,s]},useMemoCache:fg,useCacheRefresh:function(){return Ze().memoizedState=QA.bind(null,zt)}},nv={readContext:Pe,use:Pc,useCallback:V0,useContext:Pe,useEffect:q0,useImperativeHandle:$0,useInsertionEffect:P0,useLayoutEffect:J0,useMemo:j0,useReducer:Jc,useRef:_0,useState:function(){return Jc(Vr)},useDebugValue:yg,useDeferredValue:function(r,s){var o=Te();return Y0(o,Qt.memoizedState,r,s)},useTransition:function(){var r=Jc(Vr)[0],s=Te().memoizedState;return[typeof r=="boolean"?r:Hl(r),s]},useSyncExternalStore:S0,useId:F0,useHostTransitionStatus:wg,useFormState:B0,useActionState:B0,useOptimistic:function(r,s){var o=Te();return C0(o,Qt,r,s)},useMemoCache:fg,useCacheRefresh:Z0},tE={readContext:Pe,use:Pc,useCallback:V0,useContext:Pe,useEffect:q0,useImperativeHandle:$0,useInsertionEffect:P0,useLayoutEffect:J0,useMemo:j0,useReducer:hg,useRef:_0,useState:function(){return hg(Vr)},useDebugValue:yg,useDeferredValue:function(r,s){var o=Te();return Qt===null?pg(o,r,s):Y0(o,Qt.memoizedState,r,s)},useTransition:function(){var r=hg(Vr)[0],s=Te().memoizedState;return[typeof r=="boolean"?r:Hl(r),s]},useSyncExternalStore:S0,useId:F0,useHostTransitionStatus:wg,useFormState:L0,useActionState:L0,useOptimistic:function(r,s){var o=Te();return Qt!==null?C0(o,Qt,r,s):(o.baseState=r,[r,o.queue.dispatch])},useMemoCache:fg,useCacheRefresh:Z0},yo=null,jl=0;function Yc(r){var s=jl;return jl+=1,yo===null&&(yo=[]),h0(yo,r,s)}function Yl(r,s){s=s.props.ref,r.ref=s!==void 0?s:null}function Gc(r,s){throw s.$$typeof===w?Error(i(525)):(r=Object.prototype.toString.call(s),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r)))}function rv(r){var s=r._init;return s(r._payload)}function iv(r){function s(H,q){if(r){var K=H.deletions;K===null?(H.deletions=[q],H.flags|=16):K.push(q)}}function o(H,q){if(!r)return null;for(;q!==null;)s(H,q),q=q.sibling;return null}function u(H){for(var q=new Map;H!==null;)H.key!==null?q.set(H.key,H):q.set(H.index,H),H=H.sibling;return q}function f(H,q){return H=qr(H,q),H.index=0,H.sibling=null,H}function m(H,q,K){return H.index=K,r?(K=H.alternate,K!==null?(K=K.index,K<q?(H.flags|=67108866,q):K):(H.flags|=67108866,q)):(H.flags|=1048576,q)}function S(H){return r&&H.alternate===null&&(H.flags|=67108866),H}function E(H,q,K,lt){return q===null||q.tag!==6?(q=Jh(K,H.mode,lt),q.return=H,q):(q=f(q,K),q.return=H,q)}function M(H,q,K,lt){var vt=K.type;return vt===x?at(H,q,K.props.children,lt,K.key):q!==null&&(q.elementType===vt||typeof vt=="object"&&vt!==null&&vt.$$typeof===V&&rv(vt)===q.type)?(q=f(q,K.props),Yl(q,K),q.return=H,q):(q=kc(K.type,K.key,K.props,null,H.mode,lt),Yl(q,K),q.return=H,q)}function X(H,q,K,lt){return q===null||q.tag!==4||q.stateNode.containerInfo!==K.containerInfo||q.stateNode.implementation!==K.implementation?(q=Hh(K,H.mode,lt),q.return=H,q):(q=f(q,K.children||[]),q.return=H,q)}function at(H,q,K,lt,vt){return q===null||q.tag!==7?(q=ma(K,H.mode,lt,vt),q.return=H,q):(q=f(q,K),q.return=H,q)}function ct(H,q,K){if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return q=Jh(""+q,H.mode,K),q.return=H,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case v:return K=kc(q.type,q.key,q.props,null,H.mode,K),Yl(K,q),K.return=H,K;case b:return q=Hh(q,H.mode,K),q.return=H,q;case V:var lt=q._init;return q=lt(q._payload),ct(H,q,K)}if(j(q)||it(q))return q=ma(q,H.mode,K,null),q.return=H,q;if(typeof q.then=="function")return ct(H,Yc(q),K);if(q.$$typeof===N)return ct(H,Mc(H,q),K);Gc(H,q)}return null}function F(H,q,K,lt){var vt=q!==null?q.key:null;if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return vt!==null?null:E(H,q,""+K,lt);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case v:return K.key===vt?M(H,q,K,lt):null;case b:return K.key===vt?X(H,q,K,lt):null;case V:return vt=K._init,K=vt(K._payload),F(H,q,K,lt)}if(j(K)||it(K))return vt!==null?null:at(H,q,K,lt,null);if(typeof K.then=="function")return F(H,q,Yc(K),lt);if(K.$$typeof===N)return F(H,q,Mc(H,K),lt);Gc(H,K)}return null}function Q(H,q,K,lt,vt){if(typeof lt=="string"&&lt!==""||typeof lt=="number"||typeof lt=="bigint")return H=H.get(K)||null,E(q,H,""+lt,vt);if(typeof lt=="object"&&lt!==null){switch(lt.$$typeof){case v:return H=H.get(lt.key===null?K:lt.key)||null,M(q,H,lt,vt);case b:return H=H.get(lt.key===null?K:lt.key)||null,X(q,H,lt,vt);case V:var Lt=lt._init;return lt=Lt(lt._payload),Q(H,q,K,lt,vt)}if(j(lt)||it(lt))return H=H.get(K)||null,at(q,H,lt,vt,null);if(typeof lt.then=="function")return Q(H,q,K,Yc(lt),vt);if(lt.$$typeof===N)return Q(H,q,K,Mc(q,lt),vt);Gc(q,lt)}return null}function Ot(H,q,K,lt){for(var vt=null,Lt=null,St=q,kt=q=0,Ie=null;St!==null&&kt<K.length;kt++){St.index>kt?(Ie=St,St=null):Ie=St.sibling;var jt=F(H,St,K[kt],lt);if(jt===null){St===null&&(St=Ie);break}r&&St&&jt.alternate===null&&s(H,St),q=m(jt,q,kt),Lt===null?vt=jt:Lt.sibling=jt,Lt=jt,St=Ie}if(kt===K.length)return o(H,St),Yt&&pa(H,kt),vt;if(St===null){for(;kt<K.length;kt++)St=ct(H,K[kt],lt),St!==null&&(q=m(St,q,kt),Lt===null?vt=St:Lt.sibling=St,Lt=St);return Yt&&pa(H,kt),vt}for(St=u(St);kt<K.length;kt++)Ie=Q(St,H,kt,K[kt],lt),Ie!==null&&(r&&Ie.alternate!==null&&St.delete(Ie.key===null?kt:Ie.key),q=m(Ie,q,kt),Lt===null?vt=Ie:Lt.sibling=Ie,Lt=Ie);return r&&St.forEach(function(js){return s(H,js)}),Yt&&pa(H,kt),vt}function Ct(H,q,K,lt){if(K==null)throw Error(i(151));for(var vt=null,Lt=null,St=q,kt=q=0,Ie=null,jt=K.next();St!==null&&!jt.done;kt++,jt=K.next()){St.index>kt?(Ie=St,St=null):Ie=St.sibling;var js=F(H,St,jt.value,lt);if(js===null){St===null&&(St=Ie);break}r&&St&&js.alternate===null&&s(H,St),q=m(js,q,kt),Lt===null?vt=js:Lt.sibling=js,Lt=js,St=Ie}if(jt.done)return o(H,St),Yt&&pa(H,kt),vt;if(St===null){for(;!jt.done;kt++,jt=K.next())jt=ct(H,jt.value,lt),jt!==null&&(q=m(jt,q,kt),Lt===null?vt=jt:Lt.sibling=jt,Lt=jt);return Yt&&pa(H,kt),vt}for(St=u(St);!jt.done;kt++,jt=K.next())jt=Q(St,H,kt,jt.value,lt),jt!==null&&(r&&jt.alternate!==null&&St.delete(jt.key===null?kt:jt.key),q=m(jt,q,kt),Lt===null?vt=jt:Lt.sibling=jt,Lt=jt);return r&&St.forEach(function(eN){return s(H,eN)}),Yt&&pa(H,kt),vt}function te(H,q,K,lt){if(typeof K=="object"&&K!==null&&K.type===x&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case v:t:{for(var vt=K.key;q!==null;){if(q.key===vt){if(vt=K.type,vt===x){if(q.tag===7){o(H,q.sibling),lt=f(q,K.props.children),lt.return=H,H=lt;break t}}else if(q.elementType===vt||typeof vt=="object"&&vt!==null&&vt.$$typeof===V&&rv(vt)===q.type){o(H,q.sibling),lt=f(q,K.props),Yl(lt,K),lt.return=H,H=lt;break t}o(H,q);break}else s(H,q);q=q.sibling}K.type===x?(lt=ma(K.props.children,H.mode,lt,K.key),lt.return=H,H=lt):(lt=kc(K.type,K.key,K.props,null,H.mode,lt),Yl(lt,K),lt.return=H,H=lt)}return S(H);case b:t:{for(vt=K.key;q!==null;){if(q.key===vt)if(q.tag===4&&q.stateNode.containerInfo===K.containerInfo&&q.stateNode.implementation===K.implementation){o(H,q.sibling),lt=f(q,K.children||[]),lt.return=H,H=lt;break t}else{o(H,q);break}else s(H,q);q=q.sibling}lt=Hh(K,H.mode,lt),lt.return=H,H=lt}return S(H);case V:return vt=K._init,K=vt(K._payload),te(H,q,K,lt)}if(j(K))return Ot(H,q,K,lt);if(it(K)){if(vt=it(K),typeof vt!="function")throw Error(i(150));return K=vt.call(K),Ct(H,q,K,lt)}if(typeof K.then=="function")return te(H,q,Yc(K),lt);if(K.$$typeof===N)return te(H,q,Mc(H,K),lt);Gc(H,K)}return typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint"?(K=""+K,q!==null&&q.tag===6?(o(H,q.sibling),lt=f(q,K),lt.return=H,H=lt):(o(H,q),lt=Jh(K,H.mode,lt),lt.return=H,H=lt),S(H)):o(H,q)}return function(H,q,K,lt){try{jl=0;var vt=te(H,q,K,lt);return yo=null,vt}catch(St){if(St===Ll||St===zc)throw St;var Lt=ln(29,St,null,H.mode);return Lt.lanes=lt,Lt.return=H,Lt}finally{}}}var po=iv(!0),sv=iv(!1),En=U(null),ar=null;function Os(r){var s=r.alternate;rt(Ce,Ce.current&1),rt(En,r),ar===null&&(s===null||fo.current!==null||s.memoizedState!==null)&&(ar=r)}function av(r){if(r.tag===22){if(rt(Ce,Ce.current),rt(En,r),ar===null){var s=r.alternate;s!==null&&s.memoizedState!==null&&(ar=r)}}else Is()}function Is(){rt(Ce,Ce.current),rt(En,En.current)}function jr(r){Z(En),ar===r&&(ar=null),Z(Ce)}var Ce=U(0);function Kc(r){for(var s=r;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||cm(o)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function Sg(r,s,o,u){s=r.memoizedState,o=o(u,s),o=o==null?s:y({},s,o),r.memoizedState=o,r.lanes===0&&(r.updateQueue.baseState=o)}var xg={enqueueSetState:function(r,s,o){r=r._reactInternals;var u=dn(),f=Cs(u);f.payload=s,o!=null&&(f.callback=o),s=Ds(r,f,u),s!==null&&(hn(s,r,u),Ul(s,r,u))},enqueueReplaceState:function(r,s,o){r=r._reactInternals;var u=dn(),f=Cs(u);f.tag=1,f.payload=s,o!=null&&(f.callback=o),s=Ds(r,f,u),s!==null&&(hn(s,r,u),Ul(s,r,u))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var o=dn(),u=Cs(o);u.tag=2,s!=null&&(u.callback=s),s=Ds(r,u,o),s!==null&&(hn(s,r,o),Ul(s,r,o))}};function ov(r,s,o,u,f,m,S){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(u,m,S):s.prototype&&s.prototype.isPureReactComponent?!Dl(o,u)||!Dl(f,m):!0}function lv(r,s,o,u){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,u),s.state!==r&&xg.enqueueReplaceState(s,s.state,null)}function Aa(r,s){var o=s;if("ref"in s){o={};for(var u in s)u!=="ref"&&(o[u]=s[u])}if(r=r.defaultProps){o===s&&(o=y({},o));for(var f in r)o[f]===void 0&&(o[f]=r[f])}return o}var Xc=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)};function uv(r){Xc(r)}function cv(r){console.error(r)}function fv(r){Xc(r)}function Fc(r,s){try{var o=r.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function dv(r,s,o){try{var u=r.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Tg(r,s,o){return o=Cs(o),o.tag=3,o.payload={element:null},o.callback=function(){Fc(r,s)},o}function hv(r){return r=Cs(r),r.tag=3,r}function gv(r,s,o,u){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var m=u.value;r.payload=function(){return f(m)},r.callback=function(){dv(s,o,u)}}var S=o.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(r.callback=function(){dv(s,o,u),typeof f!="function"&&(_s===null?_s=new Set([this]):_s.add(this));var E=u.stack;this.componentDidCatch(u.value,{componentStack:E!==null?E:""})})}function eE(r,s,o,u,f){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=o.alternate,s!==null&&Ml(s,o,f,!0),o=En.current,o!==null){switch(o.tag){case 13:return ar===null?Gg():o.alternate===null&&he===0&&(he=3),o.flags&=-257,o.flags|=65536,o.lanes=f,u===Qh?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([u]):s.add(u),Xg(r,u,f)),!1;case 22:return o.flags|=65536,u===Qh?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([u]):o.add(u)),Xg(r,u,f)),!1}throw Error(i(435,o.tag))}return Xg(r,u,f),Gg(),!1}if(Yt)return s=En.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=f,u!==jh&&(r=Error(i(422),{cause:u}),Rl(Sn(r,o)))):(u!==jh&&(s=Error(i(423),{cause:u}),Rl(Sn(s,o))),r=r.current.alternate,r.flags|=65536,f&=-f,r.lanes|=f,u=Sn(u,o),f=Tg(r.stateNode,u,f),eg(r,f),he!==4&&(he=2)),!1;var m=Error(i(520),{cause:u});if(m=Sn(m,o),Wl===null?Wl=[m]:Wl.push(m),he!==4&&(he=2),s===null)return!0;u=Sn(u,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,r=f&-f,o.lanes|=r,r=Tg(o.stateNode,u,r),eg(o,r),!1;case 1:if(s=o.type,m=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(_s===null||!_s.has(m))))return o.flags|=65536,f&=-f,o.lanes|=f,f=hv(f),gv(f,r,o,u),eg(o,f),!1}o=o.return}while(o!==null);return!1}var mv=Error(i(461)),ke=!1;function Re(r,s,o,u){s.child=r===null?sv(s,null,o,u):po(s,r.child,o,u)}function yv(r,s,o,u,f){o=o.render;var m=s.ref;if("ref"in u){var S={};for(var E in u)E!=="ref"&&(S[E]=u[E])}else S=u;return Sa(s),u=ag(r,s,o,S,m,f),E=og(),r!==null&&!ke?(lg(r,s,f),Yr(r,s,f)):(Yt&&E&&$h(s),s.flags|=1,Re(r,s,u,f),s.child)}function pv(r,s,o,u,f){if(r===null){var m=o.type;return typeof m=="function"&&!Ph(m)&&m.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=m,vv(r,s,m,u,f)):(r=kc(o.type,null,u,s,s.mode,f),r.ref=s.ref,r.return=s,s.child=r)}if(m=r.child,!Ig(r,f)){var S=m.memoizedProps;if(o=o.compare,o=o!==null?o:Dl,o(S,u)&&r.ref===s.ref)return Yr(r,s,f)}return s.flags|=1,r=qr(m,u),r.ref=s.ref,r.return=s,s.child=r}function vv(r,s,o,u,f){if(r!==null){var m=r.memoizedProps;if(Dl(m,u)&&r.ref===s.ref)if(ke=!1,s.pendingProps=u=m,Ig(r,f))(r.flags&131072)!==0&&(ke=!0);else return s.lanes=r.lanes,Yr(r,s,f)}return Ag(r,s,o,u,f)}function wv(r,s,o){var u=s.pendingProps,f=u.children,m=r!==null?r.memoizedState:null;if(u.mode==="hidden"){if((s.flags&128)!==0){if(u=m!==null?m.baseLanes|o:o,r!==null){for(f=s.child=r.child,m=0;f!==null;)m=m|f.lanes|f.childLanes,f=f.sibling;s.childLanes=m&~u}else s.childLanes=0,s.child=null;return bv(r,s,u,o)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},r!==null&&Bc(s,m!==null?m.cachePool:null),m!==null?v0(s,m):rg(),av(s);else return s.lanes=s.childLanes=536870912,bv(r,s,m!==null?m.baseLanes|o:o,o)}else m!==null?(Bc(s,m.cachePool),v0(s,m),Is(),s.memoizedState=null):(r!==null&&Bc(s,null),rg(),Is());return Re(r,s,f,o),s.child}function bv(r,s,o,u){var f=Zh();return f=f===null?null:{parent:Ne._currentValue,pool:f},s.memoizedState={baseLanes:o,cachePool:f},r!==null&&Bc(s,null),rg(),av(s),r!==null&&Ml(r,s,u,!0),null}function Zc(r,s){var o=s.ref;if(o===null)r!==null&&r.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(i(284));(r===null||r.ref!==o)&&(s.flags|=4194816)}}function Ag(r,s,o,u,f){return Sa(s),o=ag(r,s,o,u,void 0,f),u=og(),r!==null&&!ke?(lg(r,s,f),Yr(r,s,f)):(Yt&&u&&$h(s),s.flags|=1,Re(r,s,o,f),s.child)}function Sv(r,s,o,u,f,m){return Sa(s),s.updateQueue=null,o=b0(s,u,o,f),w0(r),u=og(),r!==null&&!ke?(lg(r,s,m),Yr(r,s,m)):(Yt&&u&&$h(s),s.flags|=1,Re(r,s,o,m),s.child)}function xv(r,s,o,u,f){if(Sa(s),s.stateNode===null){var m=ao,S=o.contextType;typeof S=="object"&&S!==null&&(m=Pe(S)),m=new o(u,m),s.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=xg,s.stateNode=m,m._reactInternals=s,m=s.stateNode,m.props=u,m.state=s.memoizedState,m.refs={},Wh(s),S=o.contextType,m.context=typeof S=="object"&&S!==null?Pe(S):ao,m.state=s.memoizedState,S=o.getDerivedStateFromProps,typeof S=="function"&&(Sg(s,o,S,u),m.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(S=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),S!==m.state&&xg.enqueueReplaceState(m,m.state,null),Pl(s,u,m,f),ql(),m.state=s.memoizedState),typeof m.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(r===null){m=s.stateNode;var E=s.memoizedProps,M=Aa(o,E);m.props=M;var X=m.context,at=o.contextType;S=ao,typeof at=="object"&&at!==null&&(S=Pe(at));var ct=o.getDerivedStateFromProps;at=typeof ct=="function"||typeof m.getSnapshotBeforeUpdate=="function",E=s.pendingProps!==E,at||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(E||X!==S)&&lv(s,m,u,S),Ns=!1;var F=s.memoizedState;m.state=F,Pl(s,u,m,f),ql(),X=s.memoizedState,E||F!==X||Ns?(typeof ct=="function"&&(Sg(s,o,ct,u),X=s.memoizedState),(M=Ns||ov(s,o,M,u,F,X,S))?(at||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(s.flags|=4194308)):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=X),m.props=u,m.state=X,m.context=S,u=M):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{m=s.stateNode,tg(r,s),S=s.memoizedProps,at=Aa(o,S),m.props=at,ct=s.pendingProps,F=m.context,X=o.contextType,M=ao,typeof X=="object"&&X!==null&&(M=Pe(X)),E=o.getDerivedStateFromProps,(X=typeof E=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(S!==ct||F!==M)&&lv(s,m,u,M),Ns=!1,F=s.memoizedState,m.state=F,Pl(s,u,m,f),ql();var Q=s.memoizedState;S!==ct||F!==Q||Ns||r!==null&&r.dependencies!==null&&Rc(r.dependencies)?(typeof E=="function"&&(Sg(s,o,E,u),Q=s.memoizedState),(at=Ns||ov(s,o,at,u,F,Q,M)||r!==null&&r.dependencies!==null&&Rc(r.dependencies))?(X||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(u,Q,M),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(u,Q,M)),typeof m.componentDidUpdate=="function"&&(s.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof m.componentDidUpdate!="function"||S===r.memoizedProps&&F===r.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||S===r.memoizedProps&&F===r.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=Q),m.props=u,m.state=Q,m.context=M,u=at):(typeof m.componentDidUpdate!="function"||S===r.memoizedProps&&F===r.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||S===r.memoizedProps&&F===r.memoizedState||(s.flags|=1024),u=!1)}return m=u,Zc(r,s),u=(s.flags&128)!==0,m||u?(m=s.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:m.render(),s.flags|=1,r!==null&&u?(s.child=po(s,r.child,null,f),s.child=po(s,null,o,f)):Re(r,s,o,f),s.memoizedState=m.state,r=s.child):r=Yr(r,s,f),r}function Tv(r,s,o,u){return Il(),s.flags|=256,Re(r,s,o,u),s.child}var Eg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ng(r){return{baseLanes:r,cachePool:c0()}}function Cg(r,s,o){return r=r!==null?r.childLanes&~o:0,s&&(r|=Nn),r}function Av(r,s,o){var u=s.pendingProps,f=!1,m=(s.flags&128)!==0,S;if((S=m)||(S=r!==null&&r.memoizedState===null?!1:(Ce.current&2)!==0),S&&(f=!0,s.flags&=-129),S=(s.flags&32)!==0,s.flags&=-33,r===null){if(Yt){if(f?Os(s):Is(),Yt){var E=de,M;if(M=E){t:{for(M=E,E=sr;M.nodeType!==8;){if(!E){E=null;break t}if(M=Gn(M.nextSibling),M===null){E=null;break t}}E=M}E!==null?(s.memoizedState={dehydrated:E,treeContext:ya!==null?{id:Pr,overflow:Jr}:null,retryLane:536870912,hydrationErrors:null},M=ln(18,null,null,0),M.stateNode=E,M.return=s,s.child=M,Ye=s,de=null,M=!0):M=!1}M||wa(s)}if(E=s.memoizedState,E!==null&&(E=E.dehydrated,E!==null))return cm(E)?s.lanes=32:s.lanes=536870912,null;jr(s)}return E=u.children,u=u.fallback,f?(Is(),f=s.mode,E=Qc({mode:"hidden",children:E},f),u=ma(u,f,o,null),E.return=s,u.return=s,E.sibling=u,s.child=E,f=s.child,f.memoizedState=Ng(o),f.childLanes=Cg(r,S,o),s.memoizedState=Eg,u):(Os(s),Dg(s,E))}if(M=r.memoizedState,M!==null&&(E=M.dehydrated,E!==null)){if(m)s.flags&256?(Os(s),s.flags&=-257,s=kg(r,s,o)):s.memoizedState!==null?(Is(),s.child=r.child,s.flags|=128,s=null):(Is(),f=u.fallback,E=s.mode,u=Qc({mode:"visible",children:u.children},E),f=ma(f,E,o,null),f.flags|=2,u.return=s,f.return=s,u.sibling=f,s.child=u,po(s,r.child,null,o),u=s.child,u.memoizedState=Ng(o),u.childLanes=Cg(r,S,o),s.memoizedState=Eg,s=f);else if(Os(s),cm(E)){if(S=E.nextSibling&&E.nextSibling.dataset,S)var X=S.dgst;S=X,u=Error(i(419)),u.stack="",u.digest=S,Rl({value:u,source:null,stack:null}),s=kg(r,s,o)}else if(ke||Ml(r,s,o,!1),S=(o&r.childLanes)!==0,ke||S){if(S=ie,S!==null&&(u=o&-o,u=(u&42)!==0?1:dl(u),u=(u&(S.suspendedLanes|o))!==0?0:u,u!==0&&u!==M.retryLane))throw M.retryLane=u,so(r,u),hn(S,r,u),mv;E.data==="$?"||Gg(),s=kg(r,s,o)}else E.data==="$?"?(s.flags|=192,s.child=r.child,s=null):(r=M.treeContext,de=Gn(E.nextSibling),Ye=s,Yt=!0,va=null,sr=!1,r!==null&&(Tn[An++]=Pr,Tn[An++]=Jr,Tn[An++]=ya,Pr=r.id,Jr=r.overflow,ya=s),s=Dg(s,u.children),s.flags|=4096);return s}return f?(Is(),f=u.fallback,E=s.mode,M=r.child,X=M.sibling,u=qr(M,{mode:"hidden",children:u.children}),u.subtreeFlags=M.subtreeFlags&65011712,X!==null?f=qr(X,f):(f=ma(f,E,o,null),f.flags|=2),f.return=s,u.return=s,u.sibling=f,s.child=u,u=f,f=s.child,E=r.child.memoizedState,E===null?E=Ng(o):(M=E.cachePool,M!==null?(X=Ne._currentValue,M=M.parent!==X?{parent:X,pool:X}:M):M=c0(),E={baseLanes:E.baseLanes|o,cachePool:M}),f.memoizedState=E,f.childLanes=Cg(r,S,o),s.memoizedState=Eg,u):(Os(s),o=r.child,r=o.sibling,o=qr(o,{mode:"visible",children:u.children}),o.return=s,o.sibling=null,r!==null&&(S=s.deletions,S===null?(s.deletions=[r],s.flags|=16):S.push(r)),s.child=o,s.memoizedState=null,o)}function Dg(r,s){return s=Qc({mode:"visible",children:s},r.mode),s.return=r,r.child=s}function Qc(r,s){return r=ln(22,r,null,s),r.lanes=0,r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},r}function kg(r,s,o){return po(s,r.child,null,o),r=Dg(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function Ev(r,s,o){r.lanes|=s;var u=r.alternate;u!==null&&(u.lanes|=s),Gh(r.return,s,o)}function Og(r,s,o,u,f){var m=r.memoizedState;m===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:f}:(m.isBackwards=s,m.rendering=null,m.renderingStartTime=0,m.last=u,m.tail=o,m.tailMode=f)}function Nv(r,s,o){var u=s.pendingProps,f=u.revealOrder,m=u.tail;if(Re(r,s,u.children,o),u=Ce.current,(u&2)!==0)u=u&1|2,s.flags|=128;else{if(r!==null&&(r.flags&128)!==0)t:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Ev(r,o,s);else if(r.tag===19)Ev(r,o,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break t;for(;r.sibling===null;){if(r.return===null||r.return===s)break t;r=r.return}r.sibling.return=r.return,r=r.sibling}u&=1}switch(rt(Ce,u),f){case"forwards":for(o=s.child,f=null;o!==null;)r=o.alternate,r!==null&&Kc(r)===null&&(f=o),o=o.sibling;o=f,o===null?(f=s.child,s.child=null):(f=o.sibling,o.sibling=null),Og(s,!1,f,o,m);break;case"backwards":for(o=null,f=s.child,s.child=null;f!==null;){if(r=f.alternate,r!==null&&Kc(r)===null){s.child=f;break}r=f.sibling,f.sibling=o,o=f,f=r}Og(s,!0,o,null,m);break;case"together":Og(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Yr(r,s,o){if(r!==null&&(s.dependencies=r.dependencies),Ls|=s.lanes,(o&s.childLanes)===0)if(r!==null){if(Ml(r,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(r!==null&&s.child!==r.child)throw Error(i(153));if(s.child!==null){for(r=s.child,o=qr(r,r.pendingProps),s.child=o,o.return=s;r.sibling!==null;)r=r.sibling,o=o.sibling=qr(r,r.pendingProps),o.return=s;o.sibling=null}return s.child}function Ig(r,s){return(r.lanes&s)!==0?!0:(r=r.dependencies,!!(r!==null&&Rc(r)))}function nE(r,s,o){switch(s.tag){case 3:gt(s,s.stateNode.containerInfo),Es(s,Ne,r.memoizedState.cache),Il();break;case 27:case 5:Jt(s);break;case 4:gt(s,s.stateNode.containerInfo);break;case 10:Es(s,s.type,s.memoizedProps.value);break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(Os(s),s.flags|=128,null):(o&s.child.childLanes)!==0?Av(r,s,o):(Os(s),r=Yr(r,s,o),r!==null?r.sibling:null);Os(s);break;case 19:var f=(r.flags&128)!==0;if(u=(o&s.childLanes)!==0,u||(Ml(r,s,o,!1),u=(o&s.childLanes)!==0),f){if(u)return Nv(r,s,o);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),rt(Ce,Ce.current),u)break;return null;case 22:case 23:return s.lanes=0,wv(r,s,o);case 24:Es(s,Ne,r.memoizedState.cache)}return Yr(r,s,o)}function Cv(r,s,o){if(r!==null)if(r.memoizedProps!==s.pendingProps)ke=!0;else{if(!Ig(r,o)&&(s.flags&128)===0)return ke=!1,nE(r,s,o);ke=(r.flags&131072)!==0}else ke=!1,Yt&&(s.flags&1048576)!==0&&r0(s,Ic,s.index);switch(s.lanes=0,s.tag){case 16:t:{r=s.pendingProps;var u=s.elementType,f=u._init;if(u=f(u._payload),s.type=u,typeof u=="function")Ph(u)?(r=Aa(u,r),s.tag=1,s=xv(null,s,u,r,o)):(s.tag=0,s=Ag(null,s,u,r,o));else{if(u!=null){if(f=u.$$typeof,f===I){s.tag=11,s=yv(null,s,u,r,o);break t}else if(f===P){s.tag=14,s=pv(null,s,u,r,o);break t}}throw s=R(u)||u,Error(i(306,s,""))}}return s;case 0:return Ag(r,s,s.type,s.pendingProps,o);case 1:return u=s.type,f=Aa(u,s.pendingProps),xv(r,s,u,f,o);case 3:t:{if(gt(s,s.stateNode.containerInfo),r===null)throw Error(i(387));u=s.pendingProps;var m=s.memoizedState;f=m.element,tg(r,s),Pl(s,u,null,o);var S=s.memoizedState;if(u=S.cache,Es(s,Ne,u),u!==m.cache&&Kh(s,[Ne],o,!0),ql(),u=S.element,m.isDehydrated)if(m={element:u,isDehydrated:!1,cache:S.cache},s.updateQueue.baseState=m,s.memoizedState=m,s.flags&256){s=Tv(r,s,u,o);break t}else if(u!==f){f=Sn(Error(i(424)),s),Rl(f),s=Tv(r,s,u,o);break t}else{switch(r=s.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(de=Gn(r.firstChild),Ye=s,Yt=!0,va=null,sr=!0,o=sv(s,null,u,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Il(),u===f){s=Yr(r,s,o);break t}Re(r,s,u,o)}s=s.child}return s;case 26:return Zc(r,s),r===null?(o=Iw(s.type,null,s.pendingProps,null))?s.memoizedState=o:Yt||(o=s.type,r=s.pendingProps,u=hf(dt.current).createElement(o),u[De]=s,u[qe]=r,Be(u,o,r),Se(u),s.stateNode=u):s.memoizedState=Iw(s.type,r.memoizedProps,s.pendingProps,r.memoizedState),null;case 27:return Jt(s),r===null&&Yt&&(u=s.stateNode=Dw(s.type,s.pendingProps,dt.current),Ye=s,sr=!0,f=de,Ps(s.type)?(fm=f,de=Gn(u.firstChild)):de=f),Re(r,s,s.pendingProps.children,o),Zc(r,s),r===null&&(s.flags|=4194304),s.child;case 5:return r===null&&Yt&&((f=u=de)&&(u=OE(u,s.type,s.pendingProps,sr),u!==null?(s.stateNode=u,Ye=s,de=Gn(u.firstChild),sr=!1,f=!0):f=!1),f||wa(s)),Jt(s),f=s.type,m=s.pendingProps,S=r!==null?r.memoizedProps:null,u=m.children,om(f,m)?u=null:S!==null&&om(f,S)&&(s.flags|=32),s.memoizedState!==null&&(f=ag(r,s,KA,null,null,o),lu._currentValue=f),Zc(r,s),Re(r,s,u,o),s.child;case 6:return r===null&&Yt&&((r=o=de)&&(o=IE(o,s.pendingProps,sr),o!==null?(s.stateNode=o,Ye=s,de=null,r=!0):r=!1),r||wa(s)),null;case 13:return Av(r,s,o);case 4:return gt(s,s.stateNode.containerInfo),u=s.pendingProps,r===null?s.child=po(s,null,u,o):Re(r,s,u,o),s.child;case 11:return yv(r,s,s.type,s.pendingProps,o);case 7:return Re(r,s,s.pendingProps,o),s.child;case 8:return Re(r,s,s.pendingProps.children,o),s.child;case 12:return Re(r,s,s.pendingProps.children,o),s.child;case 10:return u=s.pendingProps,Es(s,s.type,u.value),Re(r,s,u.children,o),s.child;case 9:return f=s.type._context,u=s.pendingProps.children,Sa(s),f=Pe(f),u=u(f),s.flags|=1,Re(r,s,u,o),s.child;case 14:return pv(r,s,s.type,s.pendingProps,o);case 15:return vv(r,s,s.type,s.pendingProps,o);case 19:return Nv(r,s,o);case 31:return u=s.pendingProps,o=s.mode,u={mode:u.mode,children:u.children},r===null?(o=Qc(u,o),o.ref=s.ref,s.child=o,o.return=s,s=o):(o=qr(r.child,u),o.ref=s.ref,s.child=o,o.return=s,s=o),s;case 22:return wv(r,s,o);case 24:return Sa(s),u=Pe(Ne),r===null?(f=Zh(),f===null&&(f=ie,m=Xh(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=o),f=m),s.memoizedState={parent:u,cache:f},Wh(s),Es(s,Ne,f)):((r.lanes&o)!==0&&(tg(r,s),Pl(s,null,null,o),ql()),f=r.memoizedState,m=s.memoizedState,f.parent!==u?(f={parent:u,cache:u},s.memoizedState=f,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=f),Es(s,Ne,u)):(u=m.cache,Es(s,Ne,u),u!==f.cache&&Kh(s,[Ne],o,!0))),Re(r,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function Gr(r){r.flags|=4}function Dv(r,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!Lw(s)){if(s=En.current,s!==null&&((Ht&4194048)===Ht?ar!==null:(Ht&62914560)!==Ht&&(Ht&536870912)===0||s!==ar))throw _l=Qh,f0;r.flags|=8192}}function Wc(r,s){s!==null&&(r.flags|=4),r.flags&16384&&(s=r.tag!==22?lc():536870912,r.lanes|=s,So|=s)}function Gl(r,s){if(!Yt)switch(r.tailMode){case"hidden":s=r.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?r.tail=null:o.sibling=null;break;case"collapsed":o=r.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:u.sibling=null}}function ue(r){var s=r.alternate!==null&&r.alternate.child===r.child,o=0,u=0;if(s)for(var f=r.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags&65011712,u|=f.flags&65011712,f.return=r,f=f.sibling;else for(f=r.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=r,f=f.sibling;return r.subtreeFlags|=u,r.childLanes=o,s}function rE(r,s,o){var u=s.pendingProps;switch(Vh(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ue(s),null;case 1:return ue(s),null;case 3:return o=s.stateNode,u=null,r!==null&&(u=r.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),$r(Ne),bt(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(r===null||r.child===null)&&(Ol(s)?Gr(s):r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,a0())),ue(s),null;case 26:return o=s.memoizedState,r===null?(Gr(s),o!==null?(ue(s),Dv(s,o)):(ue(s),s.flags&=-16777217)):o?o!==r.memoizedState?(Gr(s),ue(s),Dv(s,o)):(ue(s),s.flags&=-16777217):(r.memoizedProps!==u&&Gr(s),ue(s),s.flags&=-16777217),null;case 27:Mt(s),o=dt.current;var f=s.type;if(r!==null&&s.stateNode!=null)r.memoizedProps!==u&&Gr(s);else{if(!u){if(s.stateNode===null)throw Error(i(166));return ue(s),null}r=ot.current,Ol(s)?i0(s):(r=Dw(f,u,o),s.stateNode=r,Gr(s))}return ue(s),null;case 5:if(Mt(s),o=s.type,r!==null&&s.stateNode!=null)r.memoizedProps!==u&&Gr(s);else{if(!u){if(s.stateNode===null)throw Error(i(166));return ue(s),null}if(r=ot.current,Ol(s))i0(s);else{switch(f=hf(dt.current),r){case 1:r=f.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:r=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":r=f.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":r=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":r=f.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof u.is=="string"?f.createElement("select",{is:u.is}):f.createElement("select"),u.multiple?r.multiple=!0:u.size&&(r.size=u.size);break;default:r=typeof u.is=="string"?f.createElement(o,{is:u.is}):f.createElement(o)}}r[De]=s,r[qe]=u;t:for(f=s.child;f!==null;){if(f.tag===5||f.tag===6)r.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===s)break t;for(;f.sibling===null;){if(f.return===null||f.return===s)break t;f=f.return}f.sibling.return=f.return,f=f.sibling}s.stateNode=r;t:switch(Be(r,o,u),o){case"button":case"input":case"select":case"textarea":r=!!u.autoFocus;break t;case"img":r=!0;break t;default:r=!1}r&&Gr(s)}}return ue(s),s.flags&=-16777217,null;case 6:if(r&&s.stateNode!=null)r.memoizedProps!==u&&Gr(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(i(166));if(r=dt.current,Ol(s)){if(r=s.stateNode,o=s.memoizedProps,u=null,f=Ye,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}r[De]=s,r=!!(r.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||Sw(r.nodeValue,o)),r||wa(s)}else r=hf(r).createTextNode(u),r[De]=s,s.stateNode=r}return ue(s),null;case 13:if(u=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(f=Ol(s),u!==null&&u.dehydrated!==null){if(r===null){if(!f)throw Error(i(318));if(f=s.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(317));f[De]=s}else Il(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;ue(s),f=!1}else f=a0(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=f),f=!0;if(!f)return s.flags&256?(jr(s),s):(jr(s),null)}if(jr(s),(s.flags&128)!==0)return s.lanes=o,s;if(o=u!==null,r=r!==null&&r.memoizedState!==null,o){u=s.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool);var m=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),m!==f&&(u.flags|=2048)}return o!==r&&o&&(s.child.flags|=8192),Wc(s,s.updateQueue),ue(s),null;case 4:return bt(),r===null&&nm(s.stateNode.containerInfo),ue(s),null;case 10:return $r(s.type),ue(s),null;case 19:if(Z(Ce),f=s.memoizedState,f===null)return ue(s),null;if(u=(s.flags&128)!==0,m=f.rendering,m===null)if(u)Gl(f,!1);else{if(he!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(m=Kc(r),m!==null){for(s.flags|=128,Gl(f,!1),r=m.updateQueue,s.updateQueue=r,Wc(s,r),s.subtreeFlags=0,r=o,o=s.child;o!==null;)n0(o,r),o=o.sibling;return rt(Ce,Ce.current&1|2),s.child}r=r.sibling}f.tail!==null&&be()>nf&&(s.flags|=128,u=!0,Gl(f,!1),s.lanes=4194304)}else{if(!u)if(r=Kc(m),r!==null){if(s.flags|=128,u=!0,r=r.updateQueue,s.updateQueue=r,Wc(s,r),Gl(f,!0),f.tail===null&&f.tailMode==="hidden"&&!m.alternate&&!Yt)return ue(s),null}else 2*be()-f.renderingStartTime>nf&&o!==536870912&&(s.flags|=128,u=!0,Gl(f,!1),s.lanes=4194304);f.isBackwards?(m.sibling=s.child,s.child=m):(r=f.last,r!==null?r.sibling=m:s.child=m,f.last=m)}return f.tail!==null?(s=f.tail,f.rendering=s,f.tail=s.sibling,f.renderingStartTime=be(),s.sibling=null,r=Ce.current,rt(Ce,u?r&1|2:r&1),s):(ue(s),null);case 22:case 23:return jr(s),ig(),u=s.memoizedState!==null,r!==null?r.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(o&536870912)!==0&&(s.flags&128)===0&&(ue(s),s.subtreeFlags&6&&(s.flags|=8192)):ue(s),o=s.updateQueue,o!==null&&Wc(s,o.retryQueue),o=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==o&&(s.flags|=2048),r!==null&&Z(xa),null;case 24:return o=null,r!==null&&(o=r.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),$r(Ne),ue(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function iE(r,s){switch(Vh(s),s.tag){case 1:return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return $r(Ne),bt(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 26:case 27:case 5:return Mt(s),null;case 13:if(jr(s),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(i(340));Il()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return Z(Ce),null;case 4:return bt(),null;case 10:return $r(s.type),null;case 22:case 23:return jr(s),ig(),r!==null&&Z(xa),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 24:return $r(Ne),null;case 25:return null;default:return null}}function kv(r,s){switch(Vh(s),s.tag){case 3:$r(Ne),bt();break;case 26:case 27:case 5:Mt(s);break;case 4:bt();break;case 13:jr(s);break;case 19:Z(Ce);break;case 10:$r(s.type);break;case 22:case 23:jr(s),ig(),r!==null&&Z(xa);break;case 24:$r(Ne)}}function Kl(r,s){try{var o=s.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var f=u.next;o=f;do{if((o.tag&r)===r){u=void 0;var m=o.create,S=o.inst;u=m(),S.destroy=u}o=o.next}while(o!==f)}}catch(E){ee(s,s.return,E)}}function Rs(r,s,o){try{var u=s.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var m=f.next;u=m;do{if((u.tag&r)===r){var S=u.inst,E=S.destroy;if(E!==void 0){S.destroy=void 0,f=s;var M=o,X=E;try{X()}catch(at){ee(f,M,at)}}}u=u.next}while(u!==m)}}catch(at){ee(s,s.return,at)}}function Ov(r){var s=r.updateQueue;if(s!==null){var o=r.stateNode;try{p0(s,o)}catch(u){ee(r,r.return,u)}}}function Iv(r,s,o){o.props=Aa(r.type,r.memoizedProps),o.state=r.memoizedState;try{o.componentWillUnmount()}catch(u){ee(r,s,u)}}function Xl(r,s){try{var o=r.ref;if(o!==null){switch(r.tag){case 26:case 27:case 5:var u=r.stateNode;break;case 30:u=r.stateNode;break;default:u=r.stateNode}typeof o=="function"?r.refCleanup=o(u):o.current=u}}catch(f){ee(r,s,f)}}function or(r,s){var o=r.ref,u=r.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(f){ee(r,s,f)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){ee(r,s,f)}else o.current=null}function Rv(r){var s=r.type,o=r.memoizedProps,u=r.stateNode;try{t:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break t;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(f){ee(r,r.return,f)}}function Rg(r,s,o){try{var u=r.stateNode;EE(u,r.type,o,s),u[qe]=s}catch(f){ee(r,r.return,f)}}function Mv(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&Ps(r.type)||r.tag===4}function Mg(r){t:for(;;){for(;r.sibling===null;){if(r.return===null||Mv(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&Ps(r.type)||r.flags&2||r.child===null||r.tag===4)continue t;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Bg(r,s,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(r,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(r),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=df));else if(u!==4&&(u===27&&Ps(r.type)&&(o=r.stateNode,s=null),r=r.child,r!==null))for(Bg(r,s,o),r=r.sibling;r!==null;)Bg(r,s,o),r=r.sibling}function tf(r,s,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,s?o.insertBefore(r,s):o.appendChild(r);else if(u!==4&&(u===27&&Ps(r.type)&&(o=r.stateNode),r=r.child,r!==null))for(tf(r,s,o),r=r.sibling;r!==null;)tf(r,s,o),r=r.sibling}function Bv(r){var s=r.stateNode,o=r.memoizedProps;try{for(var u=r.type,f=s.attributes;f.length;)s.removeAttributeNode(f[0]);Be(s,u,o),s[De]=r,s[qe]=o}catch(m){ee(r,r.return,m)}}var Kr=!1,pe=!1,zg=!1,zv=typeof WeakSet=="function"?WeakSet:Set,Oe=null;function sE(r,s){if(r=r.containerInfo,sm=wf,r=Yp(r),Mh(r)){if("selectionStart"in r)var o={start:r.selectionStart,end:r.selectionEnd};else t:{o=(o=r.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var f=u.anchorOffset,m=u.focusNode;u=u.focusOffset;try{o.nodeType,m.nodeType}catch{o=null;break t}var S=0,E=-1,M=-1,X=0,at=0,ct=r,F=null;e:for(;;){for(var Q;ct!==o||f!==0&&ct.nodeType!==3||(E=S+f),ct!==m||u!==0&&ct.nodeType!==3||(M=S+u),ct.nodeType===3&&(S+=ct.nodeValue.length),(Q=ct.firstChild)!==null;)F=ct,ct=Q;for(;;){if(ct===r)break e;if(F===o&&++X===f&&(E=S),F===m&&++at===u&&(M=S),(Q=ct.nextSibling)!==null)break;ct=F,F=ct.parentNode}ct=Q}o=E===-1||M===-1?null:{start:E,end:M}}else o=null}o=o||{start:0,end:0}}else o=null;for(am={focusedElem:r,selectionRange:o},wf=!1,Oe=s;Oe!==null;)if(s=Oe,r=s.child,(s.subtreeFlags&1024)!==0&&r!==null)r.return=s,Oe=r;else for(;Oe!==null;){switch(s=Oe,m=s.alternate,r=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((r&1024)!==0&&m!==null){r=void 0,o=s,f=m.memoizedProps,m=m.memoizedState,u=o.stateNode;try{var Ot=Aa(o.type,f,o.elementType===o.type);r=u.getSnapshotBeforeUpdate(Ot,m),u.__reactInternalSnapshotBeforeUpdate=r}catch(Ct){ee(o,o.return,Ct)}}break;case 3:if((r&1024)!==0){if(r=s.stateNode.containerInfo,o=r.nodeType,o===9)um(r);else if(o===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":um(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=s.sibling,r!==null){r.return=s.return,Oe=r;break}Oe=s.return}}function Lv(r,s,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:Ms(r,o),u&4&&Kl(5,o);break;case 1:if(Ms(r,o),u&4)if(r=o.stateNode,s===null)try{r.componentDidMount()}catch(S){ee(o,o.return,S)}else{var f=Aa(o.type,s.memoizedProps);s=s.memoizedState;try{r.componentDidUpdate(f,s,r.__reactInternalSnapshotBeforeUpdate)}catch(S){ee(o,o.return,S)}}u&64&&Ov(o),u&512&&Xl(o,o.return);break;case 3:if(Ms(r,o),u&64&&(r=o.updateQueue,r!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{p0(r,s)}catch(S){ee(o,o.return,S)}}break;case 27:s===null&&u&4&&Bv(o);case 26:case 5:Ms(r,o),s===null&&u&4&&Rv(o),u&512&&Xl(o,o.return);break;case 12:Ms(r,o);break;case 13:Ms(r,o),u&4&&qv(r,o),u&64&&(r=o.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(o=gE.bind(null,o),RE(r,o))));break;case 22:if(u=o.memoizedState!==null||Kr,!u){s=s!==null&&s.memoizedState!==null||pe,f=Kr;var m=pe;Kr=u,(pe=s)&&!m?Bs(r,o,(o.subtreeFlags&8772)!==0):Ms(r,o),Kr=f,pe=m}break;case 30:break;default:Ms(r,o)}}function _v(r){var s=r.alternate;s!==null&&(r.alternate=null,_v(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&ml(s)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var ae=null,Qe=!1;function Xr(r,s,o){for(o=o.child;o!==null;)Uv(r,s,o),o=o.sibling}function Uv(r,s,o){if(Ee&&typeof Ee.onCommitFiberUnmount=="function")try{Ee.onCommitFiberUnmount(bn,o)}catch{}switch(o.tag){case 26:pe||or(o,s),Xr(r,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:pe||or(o,s);var u=ae,f=Qe;Ps(o.type)&&(ae=o.stateNode,Qe=!1),Xr(r,s,o),iu(o.stateNode),ae=u,Qe=f;break;case 5:pe||or(o,s);case 6:if(u=ae,f=Qe,ae=null,Xr(r,s,o),ae=u,Qe=f,ae!==null)if(Qe)try{(ae.nodeType===9?ae.body:ae.nodeName==="HTML"?ae.ownerDocument.body:ae).removeChild(o.stateNode)}catch(m){ee(o,s,m)}else try{ae.removeChild(o.stateNode)}catch(m){ee(o,s,m)}break;case 18:ae!==null&&(Qe?(r=ae,Nw(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,o.stateNode),du(r)):Nw(ae,o.stateNode));break;case 4:u=ae,f=Qe,ae=o.stateNode.containerInfo,Qe=!0,Xr(r,s,o),ae=u,Qe=f;break;case 0:case 11:case 14:case 15:pe||Rs(2,o,s),pe||Rs(4,o,s),Xr(r,s,o);break;case 1:pe||(or(o,s),u=o.stateNode,typeof u.componentWillUnmount=="function"&&Iv(o,s,u)),Xr(r,s,o);break;case 21:Xr(r,s,o);break;case 22:pe=(u=pe)||o.memoizedState!==null,Xr(r,s,o),pe=u;break;default:Xr(r,s,o)}}function qv(r,s){if(s.memoizedState===null&&(r=s.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{du(r)}catch(o){ee(s,s.return,o)}}function aE(r){switch(r.tag){case 13:case 19:var s=r.stateNode;return s===null&&(s=r.stateNode=new zv),s;case 22:return r=r.stateNode,s=r._retryCache,s===null&&(s=r._retryCache=new zv),s;default:throw Error(i(435,r.tag))}}function Lg(r,s){var o=aE(r);s.forEach(function(u){var f=mE.bind(null,r,u);o.has(u)||(o.add(u),u.then(f,f))})}function un(r,s){var o=s.deletions;if(o!==null)for(var u=0;u<o.length;u++){var f=o[u],m=r,S=s,E=S;t:for(;E!==null;){switch(E.tag){case 27:if(Ps(E.type)){ae=E.stateNode,Qe=!1;break t}break;case 5:ae=E.stateNode,Qe=!1;break t;case 3:case 4:ae=E.stateNode.containerInfo,Qe=!0;break t}E=E.return}if(ae===null)throw Error(i(160));Uv(m,S,f),ae=null,Qe=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)Pv(s,r),s=s.sibling}var Yn=null;function Pv(r,s){var o=r.alternate,u=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:un(s,r),cn(r),u&4&&(Rs(3,r,r.return),Kl(3,r),Rs(5,r,r.return));break;case 1:un(s,r),cn(r),u&512&&(pe||o===null||or(o,o.return)),u&64&&Kr&&(r=r.updateQueue,r!==null&&(u=r.callbacks,u!==null&&(o=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var f=Yn;if(un(s,r),cn(r),u&512&&(pe||o===null||or(o,o.return)),u&4){var m=o!==null?o.memoizedState:null;if(u=r.memoizedState,o===null)if(u===null)if(r.stateNode===null){t:{u=r.type,o=r.memoizedProps,f=f.ownerDocument||f;e:switch(u){case"title":m=f.getElementsByTagName("title")[0],(!m||m[ua]||m[De]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(u),f.head.insertBefore(m,f.querySelector("head > title"))),Be(m,u,o),m[De]=r,Se(m),u=m;break t;case"link":var S=Bw("link","href",f).get(u+(o.href||""));if(S){for(var E=0;E<S.length;E++)if(m=S[E],m.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&m.getAttribute("rel")===(o.rel==null?null:o.rel)&&m.getAttribute("title")===(o.title==null?null:o.title)&&m.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){S.splice(E,1);break e}}m=f.createElement(u),Be(m,u,o),f.head.appendChild(m);break;case"meta":if(S=Bw("meta","content",f).get(u+(o.content||""))){for(E=0;E<S.length;E++)if(m=S[E],m.getAttribute("content")===(o.content==null?null:""+o.content)&&m.getAttribute("name")===(o.name==null?null:o.name)&&m.getAttribute("property")===(o.property==null?null:o.property)&&m.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&m.getAttribute("charset")===(o.charSet==null?null:o.charSet)){S.splice(E,1);break e}}m=f.createElement(u),Be(m,u,o),f.head.appendChild(m);break;default:throw Error(i(468,u))}m[De]=r,Se(m),u=m}r.stateNode=u}else zw(f,r.type,r.stateNode);else r.stateNode=Mw(f,u,r.memoizedProps);else m!==u?(m===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):m.count--,u===null?zw(f,r.type,r.stateNode):Mw(f,u,r.memoizedProps)):u===null&&r.stateNode!==null&&Rg(r,r.memoizedProps,o.memoizedProps)}break;case 27:un(s,r),cn(r),u&512&&(pe||o===null||or(o,o.return)),o!==null&&u&4&&Rg(r,r.memoizedProps,o.memoizedProps);break;case 5:if(un(s,r),cn(r),u&512&&(pe||o===null||or(o,o.return)),r.flags&32){f=r.stateNode;try{Qa(f,"")}catch(Q){ee(r,r.return,Q)}}u&4&&r.stateNode!=null&&(f=r.memoizedProps,Rg(r,f,o!==null?o.memoizedProps:f)),u&1024&&(zg=!0);break;case 6:if(un(s,r),cn(r),u&4){if(r.stateNode===null)throw Error(i(162));u=r.memoizedProps,o=r.stateNode;try{o.nodeValue=u}catch(Q){ee(r,r.return,Q)}}break;case 3:if(yf=null,f=Yn,Yn=gf(s.containerInfo),un(s,r),Yn=f,cn(r),u&4&&o!==null&&o.memoizedState.isDehydrated)try{du(s.containerInfo)}catch(Q){ee(r,r.return,Q)}zg&&(zg=!1,Jv(r));break;case 4:u=Yn,Yn=gf(r.stateNode.containerInfo),un(s,r),cn(r),Yn=u;break;case 12:un(s,r),cn(r);break;case 13:un(s,r),cn(r),r.child.flags&8192&&r.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Hg=be()),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,Lg(r,u)));break;case 22:f=r.memoizedState!==null;var M=o!==null&&o.memoizedState!==null,X=Kr,at=pe;if(Kr=X||f,pe=at||M,un(s,r),pe=at,Kr=X,cn(r),u&8192)t:for(s=r.stateNode,s._visibility=f?s._visibility&-2:s._visibility|1,f&&(o===null||M||Kr||pe||Ea(r)),o=null,s=r;;){if(s.tag===5||s.tag===26){if(o===null){M=o=s;try{if(m=M.stateNode,f)S=m.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{E=M.stateNode;var ct=M.memoizedProps.style,F=ct!=null&&ct.hasOwnProperty("display")?ct.display:null;E.style.display=F==null||typeof F=="boolean"?"":(""+F).trim()}}catch(Q){ee(M,M.return,Q)}}}else if(s.tag===6){if(o===null){M=s;try{M.stateNode.nodeValue=f?"":M.memoizedProps}catch(Q){ee(M,M.return,Q)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===r)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break t;for(;s.sibling===null;){if(s.return===null||s.return===r)break t;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=r.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Lg(r,o))));break;case 19:un(s,r),cn(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,Lg(r,u)));break;case 30:break;case 21:break;default:un(s,r),cn(r)}}function cn(r){var s=r.flags;if(s&2){try{for(var o,u=r.return;u!==null;){if(Mv(u)){o=u;break}u=u.return}if(o==null)throw Error(i(160));switch(o.tag){case 27:var f=o.stateNode,m=Mg(r);tf(r,m,f);break;case 5:var S=o.stateNode;o.flags&32&&(Qa(S,""),o.flags&=-33);var E=Mg(r);tf(r,E,S);break;case 3:case 4:var M=o.stateNode.containerInfo,X=Mg(r);Bg(r,X,M);break;default:throw Error(i(161))}}catch(at){ee(r,r.return,at)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function Jv(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var s=r;Jv(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),r=r.sibling}}function Ms(r,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)Lv(r,s.alternate,s),s=s.sibling}function Ea(r){for(r=r.child;r!==null;){var s=r;switch(s.tag){case 0:case 11:case 14:case 15:Rs(4,s,s.return),Ea(s);break;case 1:or(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&Iv(s,s.return,o),Ea(s);break;case 27:iu(s.stateNode);case 26:case 5:or(s,s.return),Ea(s);break;case 22:s.memoizedState===null&&Ea(s);break;case 30:Ea(s);break;default:Ea(s)}r=r.sibling}}function Bs(r,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,f=r,m=s,S=m.flags;switch(m.tag){case 0:case 11:case 15:Bs(f,m,o),Kl(4,m);break;case 1:if(Bs(f,m,o),u=m,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(X){ee(u,u.return,X)}if(u=m,f=u.updateQueue,f!==null){var E=u.stateNode;try{var M=f.shared.hiddenCallbacks;if(M!==null)for(f.shared.hiddenCallbacks=null,f=0;f<M.length;f++)y0(M[f],E)}catch(X){ee(u,u.return,X)}}o&&S&64&&Ov(m),Xl(m,m.return);break;case 27:Bv(m);case 26:case 5:Bs(f,m,o),o&&u===null&&S&4&&Rv(m),Xl(m,m.return);break;case 12:Bs(f,m,o);break;case 13:Bs(f,m,o),o&&S&4&&qv(f,m);break;case 22:m.memoizedState===null&&Bs(f,m,o),Xl(m,m.return);break;case 30:break;default:Bs(f,m,o)}s=s.sibling}}function _g(r,s){var o=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),r=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(r=s.memoizedState.cachePool.pool),r!==o&&(r!=null&&r.refCount++,o!=null&&Bl(o))}function Ug(r,s){r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&Bl(r))}function lr(r,s,o,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Hv(r,s,o,u),s=s.sibling}function Hv(r,s,o,u){var f=s.flags;switch(s.tag){case 0:case 11:case 15:lr(r,s,o,u),f&2048&&Kl(9,s);break;case 1:lr(r,s,o,u);break;case 3:lr(r,s,o,u),f&2048&&(r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&Bl(r)));break;case 12:if(f&2048){lr(r,s,o,u),r=s.stateNode;try{var m=s.memoizedProps,S=m.id,E=m.onPostCommit;typeof E=="function"&&E(S,s.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(M){ee(s,s.return,M)}}else lr(r,s,o,u);break;case 13:lr(r,s,o,u);break;case 23:break;case 22:m=s.stateNode,S=s.alternate,s.memoizedState!==null?m._visibility&2?lr(r,s,o,u):Fl(r,s):m._visibility&2?lr(r,s,o,u):(m._visibility|=2,vo(r,s,o,u,(s.subtreeFlags&10256)!==0)),f&2048&&_g(S,s);break;case 24:lr(r,s,o,u),f&2048&&Ug(s.alternate,s);break;default:lr(r,s,o,u)}}function vo(r,s,o,u,f){for(f=f&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var m=r,S=s,E=o,M=u,X=S.flags;switch(S.tag){case 0:case 11:case 15:vo(m,S,E,M,f),Kl(8,S);break;case 23:break;case 22:var at=S.stateNode;S.memoizedState!==null?at._visibility&2?vo(m,S,E,M,f):Fl(m,S):(at._visibility|=2,vo(m,S,E,M,f)),f&&X&2048&&_g(S.alternate,S);break;case 24:vo(m,S,E,M,f),f&&X&2048&&Ug(S.alternate,S);break;default:vo(m,S,E,M,f)}s=s.sibling}}function Fl(r,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=r,u=s,f=u.flags;switch(u.tag){case 22:Fl(o,u),f&2048&&_g(u.alternate,u);break;case 24:Fl(o,u),f&2048&&Ug(u.alternate,u);break;default:Fl(o,u)}s=s.sibling}}var Zl=8192;function wo(r){if(r.subtreeFlags&Zl)for(r=r.child;r!==null;)$v(r),r=r.sibling}function $v(r){switch(r.tag){case 26:wo(r),r.flags&Zl&&r.memoizedState!==null&&jE(Yn,r.memoizedState,r.memoizedProps);break;case 5:wo(r);break;case 3:case 4:var s=Yn;Yn=gf(r.stateNode.containerInfo),wo(r),Yn=s;break;case 22:r.memoizedState===null&&(s=r.alternate,s!==null&&s.memoizedState!==null?(s=Zl,Zl=16777216,wo(r),Zl=s):wo(r));break;default:wo(r)}}function Vv(r){var s=r.alternate;if(s!==null&&(r=s.child,r!==null)){s.child=null;do s=r.sibling,r.sibling=null,r=s;while(r!==null)}}function Ql(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];Oe=u,Yv(u,r)}Vv(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)jv(r),r=r.sibling}function jv(r){switch(r.tag){case 0:case 11:case 15:Ql(r),r.flags&2048&&Rs(9,r,r.return);break;case 3:Ql(r);break;case 12:Ql(r);break;case 22:var s=r.stateNode;r.memoizedState!==null&&s._visibility&2&&(r.return===null||r.return.tag!==13)?(s._visibility&=-3,ef(r)):Ql(r);break;default:Ql(r)}}function ef(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];Oe=u,Yv(u,r)}Vv(r)}for(r=r.child;r!==null;){switch(s=r,s.tag){case 0:case 11:case 15:Rs(8,s,s.return),ef(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,ef(s));break;default:ef(s)}r=r.sibling}}function Yv(r,s){for(;Oe!==null;){var o=Oe;switch(o.tag){case 0:case 11:case 15:Rs(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Bl(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,Oe=u;else t:for(o=r;Oe!==null;){u=Oe;var f=u.sibling,m=u.return;if(_v(u),u===o){Oe=null;break t}if(f!==null){f.return=m,Oe=f;break t}Oe=m}}}var oE={getCacheForType:function(r){var s=Pe(Ne),o=s.data.get(r);return o===void 0&&(o=r(),s.data.set(r,o)),o}},lE=typeof WeakMap=="function"?WeakMap:Map,Xt=0,ie=null,_t=null,Ht=0,Ft=0,fn=null,zs=!1,bo=!1,qg=!1,Fr=0,he=0,Ls=0,Na=0,Pg=0,Nn=0,So=0,Wl=null,We=null,Jg=!1,Hg=0,nf=1/0,rf=null,_s=null,Me=0,Us=null,xo=null,To=0,$g=0,Vg=null,Gv=null,tu=0,jg=null;function dn(){if((Xt&2)!==0&&Ht!==0)return Ht&-Ht;if(O.T!==null){var r=uo;return r!==0?r:Qg()}return cc()}function Kv(){Nn===0&&(Nn=(Ht&536870912)===0||Yt?oc():536870912);var r=En.current;return r!==null&&(r.flags|=32),Nn}function hn(r,s,o){(r===ie&&(Ft===2||Ft===9)||r.cancelPendingCommit!==null)&&(Ao(r,0),qs(r,Ht,Nn,!1)),la(r,o),((Xt&2)===0||r!==ie)&&(r===ie&&((Xt&2)===0&&(Na|=o),he===4&&qs(r,Ht,Nn,!1)),ur(r))}function Xv(r,s,o){if((Xt&6)!==0)throw Error(i(327));var u=!o&&(s&124)===0&&(s&r.expiredLanes)===0||oa(r,s),f=u?fE(r,s):Kg(r,s,!0),m=u;do{if(f===0){bo&&!u&&qs(r,s,0,!1);break}else{if(o=r.current.alternate,m&&!uE(o)){f=Kg(r,s,!1),m=!1;continue}if(f===2){if(m=s,r.errorRecoveryDisabledLanes&m)var S=0;else S=r.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){s=S;t:{var E=r;f=Wl;var M=E.current.memoizedState.isDehydrated;if(M&&(Ao(E,S).flags|=256),S=Kg(E,S,!1),S!==2){if(qg&&!M){E.errorRecoveryDisabledLanes|=m,Na|=m,f=4;break t}m=We,We=f,m!==null&&(We===null?We=m:We.push.apply(We,m))}f=S}if(m=!1,f!==2)continue}}if(f===1){Ao(r,0),qs(r,s,0,!0);break}t:{switch(u=r,m=f,m){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:qs(u,s,Nn,!zs);break t;case 2:We=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(f=Hg+300-be(),10<f)){if(qs(u,s,Nn,!zs),Ga(u,0,!0)!==0)break t;u.timeoutHandle=Aw(Fv.bind(null,u,o,We,rf,Jg,s,Nn,Na,So,zs,m,2,-0,0),f);break t}Fv(u,o,We,rf,Jg,s,Nn,Na,So,zs,m,0,-0,0)}}break}while(!0);ur(r)}function Fv(r,s,o,u,f,m,S,E,M,X,at,ct,F,Q){if(r.timeoutHandle=-1,ct=s.subtreeFlags,(ct&8192||(ct&16785408)===16785408)&&(ou={stylesheets:null,count:0,unsuspend:VE},$v(s),ct=YE(),ct!==null)){r.cancelPendingCommit=ct(rw.bind(null,r,s,m,o,u,f,S,E,M,at,1,F,Q)),qs(r,m,S,!X);return}rw(r,s,m,o,u,f,S,E,M)}function uE(r){for(var s=r;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var f=o[u],m=f.getSnapshot;f=f.value;try{if(!on(m(),f))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function qs(r,s,o,u){s&=~Pg,s&=~Na,r.suspendedLanes|=s,r.pingedLanes&=~s,u&&(r.warmLanes|=s),u=r.expirationTimes;for(var f=s;0<f;){var m=31-je(f),S=1<<m;u[m]=-1,f&=~S}o!==0&&uc(r,o,s)}function sf(){return(Xt&6)===0?(eu(0),!1):!0}function Yg(){if(_t!==null){if(Ft===0)var r=_t.return;else r=_t,Hr=ba=null,ug(r),yo=null,jl=0,r=_t;for(;r!==null;)kv(r.alternate,r),r=r.return;_t=null}}function Ao(r,s){var o=r.timeoutHandle;o!==-1&&(r.timeoutHandle=-1,CE(o)),o=r.cancelPendingCommit,o!==null&&(r.cancelPendingCommit=null,o()),Yg(),ie=r,_t=o=qr(r.current,null),Ht=s,Ft=0,fn=null,zs=!1,bo=oa(r,s),qg=!1,So=Nn=Pg=Na=Ls=he=0,We=Wl=null,Jg=!1,(s&8)!==0&&(s|=s&32);var u=r.entangledLanes;if(u!==0)for(r=r.entanglements,u&=s;0<u;){var f=31-je(u),m=1<<f;s|=r[f],u&=~m}return Fr=s,Nc(),o}function Zv(r,s){zt=null,O.H=jc,s===Ll||s===zc?(s=g0(),Ft=3):s===f0?(s=g0(),Ft=4):Ft=s===mv?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,fn=s,_t===null&&(he=1,Fc(r,Sn(s,r.current)))}function Qv(){var r=O.H;return O.H=jc,r===null?jc:r}function Wv(){var r=O.A;return O.A=oE,r}function Gg(){he=4,zs||(Ht&4194048)!==Ht&&En.current!==null||(bo=!0),(Ls&134217727)===0&&(Na&134217727)===0||ie===null||qs(ie,Ht,Nn,!1)}function Kg(r,s,o){var u=Xt;Xt|=2;var f=Qv(),m=Wv();(ie!==r||Ht!==s)&&(rf=null,Ao(r,s)),s=!1;var S=he;t:do try{if(Ft!==0&&_t!==null){var E=_t,M=fn;switch(Ft){case 8:Yg(),S=6;break t;case 3:case 2:case 9:case 6:En.current===null&&(s=!0);var X=Ft;if(Ft=0,fn=null,Eo(r,E,M,X),o&&bo){S=0;break t}break;default:X=Ft,Ft=0,fn=null,Eo(r,E,M,X)}}cE(),S=he;break}catch(at){Zv(r,at)}while(!0);return s&&r.shellSuspendCounter++,Hr=ba=null,Xt=u,O.H=f,O.A=m,_t===null&&(ie=null,Ht=0,Nc()),S}function cE(){for(;_t!==null;)tw(_t)}function fE(r,s){var o=Xt;Xt|=2;var u=Qv(),f=Wv();ie!==r||Ht!==s?(rf=null,nf=be()+500,Ao(r,s)):bo=oa(r,s);t:do try{if(Ft!==0&&_t!==null){s=_t;var m=fn;e:switch(Ft){case 1:Ft=0,fn=null,Eo(r,s,m,1);break;case 2:case 9:if(d0(m)){Ft=0,fn=null,ew(s);break}s=function(){Ft!==2&&Ft!==9||ie!==r||(Ft=7),ur(r)},m.then(s,s);break t;case 3:Ft=7;break t;case 4:Ft=5;break t;case 7:d0(m)?(Ft=0,fn=null,ew(s)):(Ft=0,fn=null,Eo(r,s,m,7));break;case 5:var S=null;switch(_t.tag){case 26:S=_t.memoizedState;case 5:case 27:var E=_t;if(!S||Lw(S)){Ft=0,fn=null;var M=E.sibling;if(M!==null)_t=M;else{var X=E.return;X!==null?(_t=X,af(X)):_t=null}break e}}Ft=0,fn=null,Eo(r,s,m,5);break;case 6:Ft=0,fn=null,Eo(r,s,m,6);break;case 8:Yg(),he=6;break t;default:throw Error(i(462))}}dE();break}catch(at){Zv(r,at)}while(!0);return Hr=ba=null,O.H=u,O.A=f,Xt=o,_t!==null?0:(ie=null,Ht=0,Nc(),he)}function dE(){for(;_t!==null&&!Zt();)tw(_t)}function tw(r){var s=Cv(r.alternate,r,Fr);r.memoizedProps=r.pendingProps,s===null?af(r):_t=s}function ew(r){var s=r,o=s.alternate;switch(s.tag){case 15:case 0:s=Sv(o,s,s.pendingProps,s.type,void 0,Ht);break;case 11:s=Sv(o,s,s.pendingProps,s.type.render,s.ref,Ht);break;case 5:ug(s);default:kv(o,s),s=_t=n0(s,Fr),s=Cv(o,s,Fr)}r.memoizedProps=r.pendingProps,s===null?af(r):_t=s}function Eo(r,s,o,u){Hr=ba=null,ug(s),yo=null,jl=0;var f=s.return;try{if(eE(r,f,s,o,Ht)){he=1,Fc(r,Sn(o,r.current)),_t=null;return}}catch(m){if(f!==null)throw _t=f,m;he=1,Fc(r,Sn(o,r.current)),_t=null;return}s.flags&32768?(Yt||u===1?r=!0:bo||(Ht&536870912)!==0?r=!1:(zs=r=!0,(u===2||u===9||u===3||u===6)&&(u=En.current,u!==null&&u.tag===13&&(u.flags|=16384))),nw(s,r)):af(s)}function af(r){var s=r;do{if((s.flags&32768)!==0){nw(s,zs);return}r=s.return;var o=rE(s.alternate,s,Fr);if(o!==null){_t=o;return}if(s=s.sibling,s!==null){_t=s;return}_t=s=r}while(s!==null);he===0&&(he=5)}function nw(r,s){do{var o=iE(r.alternate,r);if(o!==null){o.flags&=32767,_t=o;return}if(o=r.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(r=r.sibling,r!==null)){_t=r;return}_t=r=o}while(r!==null);he=6,_t=null}function rw(r,s,o,u,f,m,S,E,M){r.cancelPendingCommit=null;do of();while(Me!==0);if((Xt&6)!==0)throw Error(i(327));if(s!==null){if(s===r.current)throw Error(i(177));if(m=s.lanes|s.childLanes,m|=Uh,fh(r,o,m,S,E,M),r===ie&&(_t=ie=null,Ht=0),xo=s,Us=r,To=o,$g=m,Vg=f,Gv=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,yE(Ir,function(){return lw(),null})):(r.callbackNode=null,r.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=O.T,O.T=null,f=z.p,z.p=2,S=Xt,Xt|=4;try{sE(r,s,o)}finally{Xt=S,z.p=f,O.T=u}}Me=1,iw(),sw(),aw()}}function iw(){if(Me===1){Me=0;var r=Us,s=xo,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=O.T,O.T=null;var u=z.p;z.p=2;var f=Xt;Xt|=4;try{Pv(s,r);var m=am,S=Yp(r.containerInfo),E=m.focusedElem,M=m.selectionRange;if(S!==E&&E&&E.ownerDocument&&jp(E.ownerDocument.documentElement,E)){if(M!==null&&Mh(E)){var X=M.start,at=M.end;if(at===void 0&&(at=X),"selectionStart"in E)E.selectionStart=X,E.selectionEnd=Math.min(at,E.value.length);else{var ct=E.ownerDocument||document,F=ct&&ct.defaultView||window;if(F.getSelection){var Q=F.getSelection(),Ot=E.textContent.length,Ct=Math.min(M.start,Ot),te=M.end===void 0?Ct:Math.min(M.end,Ot);!Q.extend&&Ct>te&&(S=te,te=Ct,Ct=S);var H=Vp(E,Ct),q=Vp(E,te);if(H&&q&&(Q.rangeCount!==1||Q.anchorNode!==H.node||Q.anchorOffset!==H.offset||Q.focusNode!==q.node||Q.focusOffset!==q.offset)){var K=ct.createRange();K.setStart(H.node,H.offset),Q.removeAllRanges(),Ct>te?(Q.addRange(K),Q.extend(q.node,q.offset)):(K.setEnd(q.node,q.offset),Q.addRange(K))}}}}for(ct=[],Q=E;Q=Q.parentNode;)Q.nodeType===1&&ct.push({element:Q,left:Q.scrollLeft,top:Q.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<ct.length;E++){var lt=ct[E];lt.element.scrollLeft=lt.left,lt.element.scrollTop=lt.top}}wf=!!sm,am=sm=null}finally{Xt=f,z.p=u,O.T=o}}r.current=s,Me=2}}function sw(){if(Me===2){Me=0;var r=Us,s=xo,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=O.T,O.T=null;var u=z.p;z.p=2;var f=Xt;Xt|=4;try{Lv(r,s.alternate,s)}finally{Xt=f,z.p=u,O.T=o}}Me=3}}function aw(){if(Me===4||Me===3){Me=0,le();var r=Us,s=xo,o=To,u=Gv;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Me=5:(Me=0,xo=Us=null,ow(r,r.pendingLanes));var f=r.pendingLanes;if(f===0&&(_s=null),hl(o),s=s.stateNode,Ee&&typeof Ee.onCommitFiberRoot=="function")try{Ee.onCommitFiberRoot(bn,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=O.T,f=z.p,z.p=2,O.T=null;try{for(var m=r.onRecoverableError,S=0;S<u.length;S++){var E=u[S];m(E.value,{componentStack:E.stack})}}finally{O.T=s,z.p=f}}(To&3)!==0&&of(),ur(r),f=r.pendingLanes,(o&4194090)!==0&&(f&42)!==0?r===jg?tu++:(tu=0,jg=r):tu=0,eu(0)}}function ow(r,s){(r.pooledCacheLanes&=s)===0&&(s=r.pooledCache,s!=null&&(r.pooledCache=null,Bl(s)))}function of(r){return iw(),sw(),aw(),lw()}function lw(){if(Me!==5)return!1;var r=Us,s=$g;$g=0;var o=hl(To),u=O.T,f=z.p;try{z.p=32>o?32:o,O.T=null,o=Vg,Vg=null;var m=Us,S=To;if(Me=0,xo=Us=null,To=0,(Xt&6)!==0)throw Error(i(331));var E=Xt;if(Xt|=4,jv(m.current),Hv(m,m.current,S,o),Xt=E,eu(0,!1),Ee&&typeof Ee.onPostCommitFiberRoot=="function")try{Ee.onPostCommitFiberRoot(bn,m)}catch{}return!0}finally{z.p=f,O.T=u,ow(r,s)}}function uw(r,s,o){s=Sn(o,s),s=Tg(r.stateNode,s,2),r=Ds(r,s,2),r!==null&&(la(r,2),ur(r))}function ee(r,s,o){if(r.tag===3)uw(r,r,o);else for(;s!==null;){if(s.tag===3){uw(s,r,o);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(_s===null||!_s.has(u))){r=Sn(o,r),o=hv(2),u=Ds(s,o,2),u!==null&&(gv(o,u,s,r),la(u,2),ur(u));break}}s=s.return}}function Xg(r,s,o){var u=r.pingCache;if(u===null){u=r.pingCache=new lE;var f=new Set;u.set(s,f)}else f=u.get(s),f===void 0&&(f=new Set,u.set(s,f));f.has(o)||(qg=!0,f.add(o),r=hE.bind(null,r,s,o),s.then(r,r))}function hE(r,s,o){var u=r.pingCache;u!==null&&u.delete(s),r.pingedLanes|=r.suspendedLanes&o,r.warmLanes&=~o,ie===r&&(Ht&o)===o&&(he===4||he===3&&(Ht&62914560)===Ht&&300>be()-Hg?(Xt&2)===0&&Ao(r,0):Pg|=o,So===Ht&&(So=0)),ur(r)}function cw(r,s){s===0&&(s=lc()),r=so(r,s),r!==null&&(la(r,s),ur(r))}function gE(r){var s=r.memoizedState,o=0;s!==null&&(o=s.retryLane),cw(r,o)}function mE(r,s){var o=0;switch(r.tag){case 13:var u=r.stateNode,f=r.memoizedState;f!==null&&(o=f.retryLane);break;case 19:u=r.stateNode;break;case 22:u=r.stateNode._retryCache;break;default:throw Error(i(314))}u!==null&&u.delete(s),cw(r,o)}function yE(r,s){return It(r,s)}var lf=null,No=null,Fg=!1,uf=!1,Zg=!1,Ca=0;function ur(r){r!==No&&r.next===null&&(No===null?lf=No=r:No=No.next=r),uf=!0,Fg||(Fg=!0,vE())}function eu(r,s){if(!Zg&&uf){Zg=!0;do for(var o=!1,u=lf;u!==null;){if(r!==0){var f=u.pendingLanes;if(f===0)var m=0;else{var S=u.suspendedLanes,E=u.pingedLanes;m=(1<<31-je(42|r)+1)-1,m&=f&~(S&~E),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(o=!0,gw(u,m))}else m=Ht,m=Ga(u,u===ie?m:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(m&3)===0||oa(u,m)||(o=!0,gw(u,m));u=u.next}while(o);Zg=!1}}function pE(){fw()}function fw(){uf=Fg=!1;var r=0;Ca!==0&&(NE()&&(r=Ca),Ca=0);for(var s=be(),o=null,u=lf;u!==null;){var f=u.next,m=dw(u,s);m===0?(u.next=null,o===null?lf=f:o.next=f,f===null&&(No=o)):(o=u,(r!==0||(m&3)!==0)&&(uf=!0)),u=f}eu(r)}function dw(r,s){for(var o=r.suspendedLanes,u=r.pingedLanes,f=r.expirationTimes,m=r.pendingLanes&-62914561;0<m;){var S=31-je(m),E=1<<S,M=f[S];M===-1?((E&o)===0||(E&u)!==0)&&(f[S]=ch(E,s)):M<=s&&(r.expiredLanes|=E),m&=~E}if(s=ie,o=Ht,o=Ga(r,r===s?o:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u=r.callbackNode,o===0||r===s&&(Ft===2||Ft===9)||r.cancelPendingCommit!==null)return u!==null&&u!==null&&Dt(u),r.callbackNode=null,r.callbackPriority=0;if((o&3)===0||oa(r,o)){if(s=o&-o,s===r.callbackPriority)return s;switch(u!==null&&Dt(u),hl(o)){case 2:case 8:o=sa;break;case 32:o=Ir;break;case 268435456:o=ws;break;default:o=Ir}return u=hw.bind(null,r),o=It(o,u),r.callbackPriority=s,r.callbackNode=o,s}return u!==null&&u!==null&&Dt(u),r.callbackPriority=2,r.callbackNode=null,2}function hw(r,s){if(Me!==0&&Me!==5)return r.callbackNode=null,r.callbackPriority=0,null;var o=r.callbackNode;if(of()&&r.callbackNode!==o)return null;var u=Ht;return u=Ga(r,r===ie?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u===0?null:(Xv(r,u,s),dw(r,be()),r.callbackNode!=null&&r.callbackNode===o?hw.bind(null,r):null)}function gw(r,s){if(of())return null;Xv(r,s,!0)}function vE(){DE(function(){(Xt&6)!==0?It(ia,pE):fw()})}function Qg(){return Ca===0&&(Ca=oc()),Ca}function mw(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:wc(""+r)}function yw(r,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,r.id&&o.setAttribute("form",r.id),s.parentNode.insertBefore(o,s),r=new FormData(r),o.parentNode.removeChild(o),r}function wE(r,s,o,u,f){if(s==="submit"&&o&&o.stateNode===f){var m=mw((f[qe]||null).action),S=u.submitter;S&&(s=(s=S[qe]||null)?mw(s.formAction):S.getAttribute("formAction"),s!==null&&(m=s,S=null));var E=new Tc("action","action",null,u,f);r.push({event:E,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Ca!==0){var M=S?yw(f,S):new FormData(f);vg(o,{pending:!0,data:M,method:f.method,action:m},null,M)}}else typeof m=="function"&&(E.preventDefault(),M=S?yw(f,S):new FormData(f),vg(o,{pending:!0,data:M,method:f.method,action:m},m,M))},currentTarget:f}]})}}for(var Wg=0;Wg<_h.length;Wg++){var tm=_h[Wg],bE=tm.toLowerCase(),SE=tm[0].toUpperCase()+tm.slice(1);jn(bE,"on"+SE)}jn(Xp,"onAnimationEnd"),jn(Fp,"onAnimationIteration"),jn(Zp,"onAnimationStart"),jn("dblclick","onDoubleClick"),jn("focusin","onFocus"),jn("focusout","onBlur"),jn(UA,"onTransitionRun"),jn(qA,"onTransitionStart"),jn(PA,"onTransitionCancel"),jn(Qp,"onTransitionEnd"),Ts("onMouseEnter",["mouseout","mouseover"]),Ts("onMouseLeave",["mouseout","mouseover"]),Ts("onPointerEnter",["pointerout","pointerover"]),Ts("onPointerLeave",["pointerout","pointerover"]),zr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),zr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),zr("onBeforeInput",["compositionend","keypress","textInput","paste"]),zr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),zr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),zr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var nu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xE=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(nu));function pw(r,s){s=(s&4)!==0;for(var o=0;o<r.length;o++){var u=r[o],f=u.event;u=u.listeners;t:{var m=void 0;if(s)for(var S=u.length-1;0<=S;S--){var E=u[S],M=E.instance,X=E.currentTarget;if(E=E.listener,M!==m&&f.isPropagationStopped())break t;m=E,f.currentTarget=X;try{m(f)}catch(at){Xc(at)}f.currentTarget=null,m=M}else for(S=0;S<u.length;S++){if(E=u[S],M=E.instance,X=E.currentTarget,E=E.listener,M!==m&&f.isPropagationStopped())break t;m=E,f.currentTarget=X;try{m(f)}catch(at){Xc(at)}f.currentTarget=null,m=M}}}}function Ut(r,s){var o=s[gl];o===void 0&&(o=s[gl]=new Set);var u=r+"__bubble";o.has(u)||(vw(s,r,2,!1),o.add(u))}function em(r,s,o){var u=0;s&&(u|=4),vw(o,r,u,s)}var cf="_reactListening"+Math.random().toString(36).slice(2);function nm(r){if(!r[cf]){r[cf]=!0,dc.forEach(function(o){o!=="selectionchange"&&(xE.has(o)||em(o,!1,r),em(o,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[cf]||(s[cf]=!0,em("selectionchange",!1,s))}}function vw(r,s,o,u){switch(Hw(s)){case 2:var f=XE;break;case 8:f=FE;break;default:f=ym}o=f.bind(null,s,o,r),f=void 0,!Ah||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),u?f!==void 0?r.addEventListener(s,o,{capture:!0,passive:f}):r.addEventListener(s,o,!0):f!==void 0?r.addEventListener(s,o,{passive:f}):r.addEventListener(s,o,!1)}function rm(r,s,o,u,f){var m=u;if((s&1)===0&&(s&2)===0&&u!==null)t:for(;;){if(u===null)return;var S=u.tag;if(S===3||S===4){var E=u.stateNode.containerInfo;if(E===f)break;if(S===4)for(S=u.return;S!==null;){var M=S.tag;if((M===3||M===4)&&S.stateNode.containerInfo===f)return;S=S.return}for(;E!==null;){if(S=Ss(E),S===null)return;if(M=S.tag,M===5||M===6||M===26||M===27){u=m=S;continue t}E=E.parentNode}}u=u.return}Ep(function(){var X=m,at=xh(o),ct=[];t:{var F=Wp.get(r);if(F!==void 0){var Q=Tc,Ot=r;switch(r){case"keypress":if(Sc(o)===0)break t;case"keydown":case"keyup":Q=yA;break;case"focusin":Ot="focus",Q=Dh;break;case"focusout":Ot="blur",Q=Dh;break;case"beforeblur":case"afterblur":Q=Dh;break;case"click":if(o.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Q=Dp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Q=iA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Q=wA;break;case Xp:case Fp:case Zp:Q=oA;break;case Qp:Q=SA;break;case"scroll":case"scrollend":Q=nA;break;case"wheel":Q=TA;break;case"copy":case"cut":case"paste":Q=uA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Q=Op;break;case"toggle":case"beforetoggle":Q=EA}var Ct=(s&4)!==0,te=!Ct&&(r==="scroll"||r==="scrollend"),H=Ct?F!==null?F+"Capture":null:F;Ct=[];for(var q=X,K;q!==null;){var lt=q;if(K=lt.stateNode,lt=lt.tag,lt!==5&&lt!==26&&lt!==27||K===null||H===null||(lt=Sl(q,H),lt!=null&&Ct.push(ru(q,lt,K))),te)break;q=q.return}0<Ct.length&&(F=new Q(F,Ot,null,o,at),ct.push({event:F,listeners:Ct}))}}if((s&7)===0){t:{if(F=r==="mouseover"||r==="pointerover",Q=r==="mouseout"||r==="pointerout",F&&o!==Sh&&(Ot=o.relatedTarget||o.fromElement)&&(Ss(Ot)||Ot[bs]))break t;if((Q||F)&&(F=at.window===at?at:(F=at.ownerDocument)?F.defaultView||F.parentWindow:window,Q?(Ot=o.relatedTarget||o.toElement,Q=X,Ot=Ot?Ss(Ot):null,Ot!==null&&(te=l(Ot),Ct=Ot.tag,Ot!==te||Ct!==5&&Ct!==27&&Ct!==6)&&(Ot=null)):(Q=null,Ot=X),Q!==Ot)){if(Ct=Dp,lt="onMouseLeave",H="onMouseEnter",q="mouse",(r==="pointerout"||r==="pointerover")&&(Ct=Op,lt="onPointerLeave",H="onPointerEnter",q="pointer"),te=Q==null?F:xs(Q),K=Ot==null?F:xs(Ot),F=new Ct(lt,q+"leave",Q,o,at),F.target=te,F.relatedTarget=K,lt=null,Ss(at)===X&&(Ct=new Ct(H,q+"enter",Ot,o,at),Ct.target=K,Ct.relatedTarget=te,lt=Ct),te=lt,Q&&Ot)e:{for(Ct=Q,H=Ot,q=0,K=Ct;K;K=Co(K))q++;for(K=0,lt=H;lt;lt=Co(lt))K++;for(;0<q-K;)Ct=Co(Ct),q--;for(;0<K-q;)H=Co(H),K--;for(;q--;){if(Ct===H||H!==null&&Ct===H.alternate)break e;Ct=Co(Ct),H=Co(H)}Ct=null}else Ct=null;Q!==null&&ww(ct,F,Q,Ct,!1),Ot!==null&&te!==null&&ww(ct,te,Ot,Ct,!0)}}t:{if(F=X?xs(X):window,Q=F.nodeName&&F.nodeName.toLowerCase(),Q==="select"||Q==="input"&&F.type==="file")var vt=Up;else if(Lp(F))if(qp)vt=zA;else{vt=MA;var Lt=RA}else Q=F.nodeName,!Q||Q.toLowerCase()!=="input"||F.type!=="checkbox"&&F.type!=="radio"?X&&bh(X.elementType)&&(vt=Up):vt=BA;if(vt&&(vt=vt(r,X))){_p(ct,vt,o,at);break t}Lt&&Lt(r,F,X),r==="focusout"&&X&&F.type==="number"&&X.memoizedProps.value!=null&&bl(F,"number",F.value)}switch(Lt=X?xs(X):window,r){case"focusin":(Lp(Lt)||Lt.contentEditable==="true")&&(no=Lt,Bh=X,kl=null);break;case"focusout":kl=Bh=no=null;break;case"mousedown":zh=!0;break;case"contextmenu":case"mouseup":case"dragend":zh=!1,Gp(ct,o,at);break;case"selectionchange":if(_A)break;case"keydown":case"keyup":Gp(ct,o,at)}var St;if(Oh)t:{switch(r){case"compositionstart":var kt="onCompositionStart";break t;case"compositionend":kt="onCompositionEnd";break t;case"compositionupdate":kt="onCompositionUpdate";break t}kt=void 0}else eo?Bp(r,o)&&(kt="onCompositionEnd"):r==="keydown"&&o.keyCode===229&&(kt="onCompositionStart");kt&&(Ip&&o.locale!=="ko"&&(eo||kt!=="onCompositionStart"?kt==="onCompositionEnd"&&eo&&(St=Np()):(As=at,Eh="value"in As?As.value:As.textContent,eo=!0)),Lt=ff(X,kt),0<Lt.length&&(kt=new kp(kt,r,null,o,at),ct.push({event:kt,listeners:Lt}),St?kt.data=St:(St=zp(o),St!==null&&(kt.data=St)))),(St=CA?DA(r,o):kA(r,o))&&(kt=ff(X,"onBeforeInput"),0<kt.length&&(Lt=new kp("onBeforeInput","beforeinput",null,o,at),ct.push({event:Lt,listeners:kt}),Lt.data=St)),wE(ct,r,X,o,at)}pw(ct,s)})}function ru(r,s,o){return{instance:r,listener:s,currentTarget:o}}function ff(r,s){for(var o=s+"Capture",u=[];r!==null;){var f=r,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=Sl(r,o),f!=null&&u.unshift(ru(r,f,m)),f=Sl(r,s),f!=null&&u.push(ru(r,f,m))),r.tag===3)return u;r=r.return}return[]}function Co(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function ww(r,s,o,u,f){for(var m=s._reactName,S=[];o!==null&&o!==u;){var E=o,M=E.alternate,X=E.stateNode;if(E=E.tag,M!==null&&M===u)break;E!==5&&E!==26&&E!==27||X===null||(M=X,f?(X=Sl(o,m),X!=null&&S.unshift(ru(o,X,M))):f||(X=Sl(o,m),X!=null&&S.push(ru(o,X,M)))),o=o.return}S.length!==0&&r.push({event:s,listeners:S})}var TE=/\r\n?/g,AE=/\u0000|\uFFFD/g;function bw(r){return(typeof r=="string"?r:""+r).replace(TE,`
`).replace(AE,"")}function Sw(r,s){return s=bw(s),bw(r)===s}function df(){}function Wt(r,s,o,u,f,m){switch(o){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||Qa(r,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&Qa(r,""+u);break;case"className":Xa(r,"class",u);break;case"tabIndex":Xa(r,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Xa(r,o,u);break;case"style":Tp(r,u,m);break;case"data":if(s!=="object"){Xa(r,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||o!=="href")){r.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=wc(""+u),r.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){r.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(o==="formAction"?(s!=="input"&&Wt(r,s,"name",f.name,f,null),Wt(r,s,"formEncType",f.formEncType,f,null),Wt(r,s,"formMethod",f.formMethod,f,null),Wt(r,s,"formTarget",f.formTarget,f,null)):(Wt(r,s,"encType",f.encType,f,null),Wt(r,s,"method",f.method,f,null),Wt(r,s,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=wc(""+u),r.setAttribute(o,u);break;case"onClick":u!=null&&(r.onclick=df);break;case"onScroll":u!=null&&Ut("scroll",r);break;case"onScrollEnd":u!=null&&Ut("scrollend",r);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(i(60));r.innerHTML=o}}break;case"multiple":r.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":r.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){r.removeAttribute("xlink:href");break}o=wc(""+u),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""+u):r.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""):r.removeAttribute(o);break;case"capture":case"download":u===!0?r.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,u):r.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?r.setAttribute(o,u):r.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?r.removeAttribute(o):r.setAttribute(o,u);break;case"popover":Ut("beforetoggle",r),Ut("toggle",r),Ka(r,"popover",u);break;case"xlinkActuate":Vn(r,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Vn(r,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Vn(r,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Vn(r,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Vn(r,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Vn(r,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Vn(r,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Vn(r,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Vn(r,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Ka(r,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=tA.get(o)||o,Ka(r,o,u))}}function im(r,s,o,u,f,m){switch(o){case"style":Tp(r,u,m);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(i(60));r.innerHTML=o}}break;case"children":typeof u=="string"?Qa(r,u):(typeof u=="number"||typeof u=="bigint")&&Qa(r,""+u);break;case"onScroll":u!=null&&Ut("scroll",r);break;case"onScrollEnd":u!=null&&Ut("scrollend",r);break;case"onClick":u!=null&&(r.onclick=df);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!hc.hasOwnProperty(o))t:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),s=o.slice(2,f?o.length-7:void 0),m=r[qe]||null,m=m!=null?m[o]:null,typeof m=="function"&&r.removeEventListener(s,m,f),typeof u=="function")){typeof m!="function"&&m!==null&&(o in r?r[o]=null:r.hasAttribute(o)&&r.removeAttribute(o)),r.addEventListener(s,u,f);break t}o in r?r[o]=u:u===!0?r.setAttribute(o,""):Ka(r,o,u)}}}function Be(r,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ut("error",r),Ut("load",r);var u=!1,f=!1,m;for(m in o)if(o.hasOwnProperty(m)){var S=o[m];if(S!=null)switch(m){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:Wt(r,s,m,S,o,null)}}f&&Wt(r,s,"srcSet",o.srcSet,o,null),u&&Wt(r,s,"src",o.src,o,null);return;case"input":Ut("invalid",r);var E=m=S=f=null,M=null,X=null;for(u in o)if(o.hasOwnProperty(u)){var at=o[u];if(at!=null)switch(u){case"name":f=at;break;case"type":S=at;break;case"checked":M=at;break;case"defaultChecked":X=at;break;case"value":m=at;break;case"defaultValue":E=at;break;case"children":case"dangerouslySetInnerHTML":if(at!=null)throw Error(i(137,s));break;default:Wt(r,s,u,at,o,null)}}vc(r,m,E,M,X,S,f,!1),Fa(r);return;case"select":Ut("invalid",r),u=S=m=null;for(f in o)if(o.hasOwnProperty(f)&&(E=o[f],E!=null))switch(f){case"value":m=E;break;case"defaultValue":S=E;break;case"multiple":u=E;default:Wt(r,s,f,E,o,null)}s=m,o=S,r.multiple=!!u,s!=null?_r(r,!!u,s,!1):o!=null&&_r(r,!!u,o,!0);return;case"textarea":Ut("invalid",r),m=f=u=null;for(S in o)if(o.hasOwnProperty(S)&&(E=o[S],E!=null))switch(S){case"value":u=E;break;case"defaultValue":f=E;break;case"children":m=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(i(91));break;default:Wt(r,s,S,E,o,null)}Sp(r,u,f,m),Fa(r);return;case"option":for(M in o)if(o.hasOwnProperty(M)&&(u=o[M],u!=null))switch(M){case"selected":r.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:Wt(r,s,M,u,o,null)}return;case"dialog":Ut("beforetoggle",r),Ut("toggle",r),Ut("cancel",r),Ut("close",r);break;case"iframe":case"object":Ut("load",r);break;case"video":case"audio":for(u=0;u<nu.length;u++)Ut(nu[u],r);break;case"image":Ut("error",r),Ut("load",r);break;case"details":Ut("toggle",r);break;case"embed":case"source":case"link":Ut("error",r),Ut("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(X in o)if(o.hasOwnProperty(X)&&(u=o[X],u!=null))switch(X){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:Wt(r,s,X,u,o,null)}return;default:if(bh(s)){for(at in o)o.hasOwnProperty(at)&&(u=o[at],u!==void 0&&im(r,s,at,u,o,void 0));return}}for(E in o)o.hasOwnProperty(E)&&(u=o[E],u!=null&&Wt(r,s,E,u,o,null))}function EE(r,s,o,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,S=null,E=null,M=null,X=null,at=null;for(Q in o){var ct=o[Q];if(o.hasOwnProperty(Q)&&ct!=null)switch(Q){case"checked":break;case"value":break;case"defaultValue":M=ct;default:u.hasOwnProperty(Q)||Wt(r,s,Q,null,u,ct)}}for(var F in u){var Q=u[F];if(ct=o[F],u.hasOwnProperty(F)&&(Q!=null||ct!=null))switch(F){case"type":m=Q;break;case"name":f=Q;break;case"checked":X=Q;break;case"defaultChecked":at=Q;break;case"value":S=Q;break;case"defaultValue":E=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(i(137,s));break;default:Q!==ct&&Wt(r,s,F,Q,u,ct)}}fa(r,S,E,M,X,at,m,f);return;case"select":Q=S=E=F=null;for(m in o)if(M=o[m],o.hasOwnProperty(m)&&M!=null)switch(m){case"value":break;case"multiple":Q=M;default:u.hasOwnProperty(m)||Wt(r,s,m,null,u,M)}for(f in u)if(m=u[f],M=o[f],u.hasOwnProperty(f)&&(m!=null||M!=null))switch(f){case"value":F=m;break;case"defaultValue":E=m;break;case"multiple":S=m;default:m!==M&&Wt(r,s,f,m,u,M)}s=E,o=S,u=Q,F!=null?_r(r,!!o,F,!1):!!u!=!!o&&(s!=null?_r(r,!!o,s,!0):_r(r,!!o,o?[]:"",!1));return;case"textarea":Q=F=null;for(E in o)if(f=o[E],o.hasOwnProperty(E)&&f!=null&&!u.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:Wt(r,s,E,null,u,f)}for(S in u)if(f=u[S],m=o[S],u.hasOwnProperty(S)&&(f!=null||m!=null))switch(S){case"value":F=f;break;case"defaultValue":Q=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(i(91));break;default:f!==m&&Wt(r,s,S,f,u,m)}bp(r,F,Q);return;case"option":for(var Ot in o)if(F=o[Ot],o.hasOwnProperty(Ot)&&F!=null&&!u.hasOwnProperty(Ot))switch(Ot){case"selected":r.selected=!1;break;default:Wt(r,s,Ot,null,u,F)}for(M in u)if(F=u[M],Q=o[M],u.hasOwnProperty(M)&&F!==Q&&(F!=null||Q!=null))switch(M){case"selected":r.selected=F&&typeof F!="function"&&typeof F!="symbol";break;default:Wt(r,s,M,F,u,Q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ct in o)F=o[Ct],o.hasOwnProperty(Ct)&&F!=null&&!u.hasOwnProperty(Ct)&&Wt(r,s,Ct,null,u,F);for(X in u)if(F=u[X],Q=o[X],u.hasOwnProperty(X)&&F!==Q&&(F!=null||Q!=null))switch(X){case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(i(137,s));break;default:Wt(r,s,X,F,u,Q)}return;default:if(bh(s)){for(var te in o)F=o[te],o.hasOwnProperty(te)&&F!==void 0&&!u.hasOwnProperty(te)&&im(r,s,te,void 0,u,F);for(at in u)F=u[at],Q=o[at],!u.hasOwnProperty(at)||F===Q||F===void 0&&Q===void 0||im(r,s,at,F,u,Q);return}}for(var H in o)F=o[H],o.hasOwnProperty(H)&&F!=null&&!u.hasOwnProperty(H)&&Wt(r,s,H,null,u,F);for(ct in u)F=u[ct],Q=o[ct],!u.hasOwnProperty(ct)||F===Q||F==null&&Q==null||Wt(r,s,ct,F,u,Q)}var sm=null,am=null;function hf(r){return r.nodeType===9?r:r.ownerDocument}function xw(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Tw(r,s){if(r===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&s==="foreignObject"?0:r}function om(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var lm=null;function NE(){var r=window.event;return r&&r.type==="popstate"?r===lm?!1:(lm=r,!0):(lm=null,!1)}var Aw=typeof setTimeout=="function"?setTimeout:void 0,CE=typeof clearTimeout=="function"?clearTimeout:void 0,Ew=typeof Promise=="function"?Promise:void 0,DE=typeof queueMicrotask=="function"?queueMicrotask:typeof Ew<"u"?function(r){return Ew.resolve(null).then(r).catch(kE)}:Aw;function kE(r){setTimeout(function(){throw r})}function Ps(r){return r==="head"}function Nw(r,s){var o=s,u=0,f=0;do{var m=o.nextSibling;if(r.removeChild(o),m&&m.nodeType===8)if(o=m.data,o==="/$"){if(0<u&&8>u){o=u;var S=r.ownerDocument;if(o&1&&iu(S.documentElement),o&2&&iu(S.body),o&4)for(o=S.head,iu(o),S=o.firstChild;S;){var E=S.nextSibling,M=S.nodeName;S[ua]||M==="SCRIPT"||M==="STYLE"||M==="LINK"&&S.rel.toLowerCase()==="stylesheet"||o.removeChild(S),S=E}}if(f===0){r.removeChild(m),du(s);return}f--}else o==="$"||o==="$?"||o==="$!"?f++:u=o.charCodeAt(0)-48;else u=0;o=m}while(o);du(s)}function um(r){var s=r.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":um(o),ml(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}r.removeChild(o)}}function OE(r,s,o,u){for(;r.nodeType===1;){var f=o;if(r.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(u){if(!r[ua])switch(s){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(m=r.getAttribute("rel"),m==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(m!==f.rel||r.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||r.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||r.getAttribute("title")!==(f.title==null?null:f.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(m=r.getAttribute("src"),(m!==(f.src==null?null:f.src)||r.getAttribute("type")!==(f.type==null?null:f.type)||r.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(s==="input"&&r.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&r.getAttribute("name")===m)return r}else return r;if(r=Gn(r.nextSibling),r===null)break}return null}function IE(r,s,o){if(s==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!o||(r=Gn(r.nextSibling),r===null))return null;return r}function cm(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState==="complete"}function RE(r,s){var o=r.ownerDocument;if(r.data!=="$?"||o.readyState==="complete")s();else{var u=function(){s(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),r._reactRetry=u}}function Gn(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return r}var fm=null;function Cw(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var o=r.data;if(o==="$"||o==="$!"||o==="$?"){if(s===0)return r;s--}else o==="/$"&&s++}r=r.previousSibling}return null}function Dw(r,s,o){switch(s=hf(o),r){case"html":if(r=s.documentElement,!r)throw Error(i(452));return r;case"head":if(r=s.head,!r)throw Error(i(453));return r;case"body":if(r=s.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function iu(r){for(var s=r.attributes;s.length;)r.removeAttributeNode(s[0]);ml(r)}var Cn=new Map,kw=new Set;function gf(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var Zr=z.d;z.d={f:ME,r:BE,D:zE,C:LE,L:_E,m:UE,X:PE,S:qE,M:JE};function ME(){var r=Zr.f(),s=sf();return r||s}function BE(r){var s=Mr(r);s!==null&&s.tag===5&&s.type==="form"?X0(s):Zr.r(r)}var Do=typeof document>"u"?null:document;function Ow(r,s,o){var u=Do;if(u&&typeof s=="string"&&s){var f=Xe(s);f='link[rel="'+r+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),kw.has(f)||(kw.add(f),r={rel:r,crossOrigin:o,href:s},u.querySelector(f)===null&&(s=u.createElement("link"),Be(s,"link",r),Se(s),u.head.appendChild(s)))}}function zE(r){Zr.D(r),Ow("dns-prefetch",r,null)}function LE(r,s){Zr.C(r,s),Ow("preconnect",r,s)}function _E(r,s,o){Zr.L(r,s,o);var u=Do;if(u&&r&&s){var f='link[rel="preload"][as="'+Xe(s)+'"]';s==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+Xe(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+Xe(o.imageSizes)+'"]')):f+='[href="'+Xe(r)+'"]';var m=f;switch(s){case"style":m=ko(r);break;case"script":m=Oo(r)}Cn.has(m)||(r=y({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:r,as:s},o),Cn.set(m,r),u.querySelector(f)!==null||s==="style"&&u.querySelector(su(m))||s==="script"&&u.querySelector(au(m))||(s=u.createElement("link"),Be(s,"link",r),Se(s),u.head.appendChild(s)))}}function UE(r,s){Zr.m(r,s);var o=Do;if(o&&r){var u=s&&typeof s.as=="string"?s.as:"script",f='link[rel="modulepreload"][as="'+Xe(u)+'"][href="'+Xe(r)+'"]',m=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=Oo(r)}if(!Cn.has(m)&&(r=y({rel:"modulepreload",href:r},s),Cn.set(m,r),o.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(au(m)))return}u=o.createElement("link"),Be(u,"link",r),Se(u),o.head.appendChild(u)}}}function qE(r,s,o){Zr.S(r,s,o);var u=Do;if(u&&r){var f=Br(u).hoistableStyles,m=ko(r);s=s||"default";var S=f.get(m);if(!S){var E={loading:0,preload:null};if(S=u.querySelector(su(m)))E.loading=5;else{r=y({rel:"stylesheet",href:r,"data-precedence":s},o),(o=Cn.get(m))&&dm(r,o);var M=S=u.createElement("link");Se(M),Be(M,"link",r),M._p=new Promise(function(X,at){M.onload=X,M.onerror=at}),M.addEventListener("load",function(){E.loading|=1}),M.addEventListener("error",function(){E.loading|=2}),E.loading|=4,mf(S,s,u)}S={type:"stylesheet",instance:S,count:1,state:E},f.set(m,S)}}}function PE(r,s){Zr.X(r,s);var o=Do;if(o&&r){var u=Br(o).hoistableScripts,f=Oo(r),m=u.get(f);m||(m=o.querySelector(au(f)),m||(r=y({src:r,async:!0},s),(s=Cn.get(f))&&hm(r,s),m=o.createElement("script"),Se(m),Be(m,"link",r),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(f,m))}}function JE(r,s){Zr.M(r,s);var o=Do;if(o&&r){var u=Br(o).hoistableScripts,f=Oo(r),m=u.get(f);m||(m=o.querySelector(au(f)),m||(r=y({src:r,async:!0,type:"module"},s),(s=Cn.get(f))&&hm(r,s),m=o.createElement("script"),Se(m),Be(m,"link",r),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(f,m))}}function Iw(r,s,o,u){var f=(f=dt.current)?gf(f):null;if(!f)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=ko(o.href),o=Br(f).hoistableStyles,u=o.get(s),u||(u={type:"style",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){r=ko(o.href);var m=Br(f).hoistableStyles,S=m.get(r);if(S||(f=f.ownerDocument||f,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(r,S),(m=f.querySelector(su(r)))&&!m._p&&(S.instance=m,S.state.loading=5),Cn.has(r)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Cn.set(r,o),m||HE(f,r,o,S.state))),s&&u===null)throw Error(i(528,""));return S}if(s&&u!==null)throw Error(i(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Oo(o),o=Br(f).hoistableScripts,u=o.get(s),u||(u={type:"script",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function ko(r){return'href="'+Xe(r)+'"'}function su(r){return'link[rel="stylesheet"]['+r+"]"}function Rw(r){return y({},r,{"data-precedence":r.precedence,precedence:null})}function HE(r,s,o,u){r.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=r.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),Be(s,"link",o),Se(s),r.head.appendChild(s))}function Oo(r){return'[src="'+Xe(r)+'"]'}function au(r){return"script[async]"+r}function Mw(r,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var u=r.querySelector('style[data-href~="'+Xe(o.href)+'"]');if(u)return s.instance=u,Se(u),u;var f=y({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(r.ownerDocument||r).createElement("style"),Se(u),Be(u,"style",f),mf(u,o.precedence,r),s.instance=u;case"stylesheet":f=ko(o.href);var m=r.querySelector(su(f));if(m)return s.state.loading|=4,s.instance=m,Se(m),m;u=Rw(o),(f=Cn.get(f))&&dm(u,f),m=(r.ownerDocument||r).createElement("link"),Se(m);var S=m;return S._p=new Promise(function(E,M){S.onload=E,S.onerror=M}),Be(m,"link",u),s.state.loading|=4,mf(m,o.precedence,r),s.instance=m;case"script":return m=Oo(o.src),(f=r.querySelector(au(m)))?(s.instance=f,Se(f),f):(u=o,(f=Cn.get(m))&&(u=y({},o),hm(u,f)),r=r.ownerDocument||r,f=r.createElement("script"),Se(f),Be(f,"link",u),r.head.appendChild(f),s.instance=f);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,mf(u,o.precedence,r));return s.instance}function mf(r,s,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,m=f,S=0;S<u.length;S++){var E=u[S];if(E.dataset.precedence===s)m=E;else if(m!==f)break}m?m.parentNode.insertBefore(r,m.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(r,s.firstChild))}function dm(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.title==null&&(r.title=s.title)}function hm(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.integrity==null&&(r.integrity=s.integrity)}var yf=null;function Bw(r,s,o){if(yf===null){var u=new Map,f=yf=new Map;f.set(o,u)}else f=yf,u=f.get(o),u||(u=new Map,f.set(o,u));if(u.has(r))return u;for(u.set(r,null),o=o.getElementsByTagName(r),f=0;f<o.length;f++){var m=o[f];if(!(m[ua]||m[De]||r==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var S=m.getAttribute(s)||"";S=r+S;var E=u.get(S);E?E.push(m):u.set(S,[m])}}return u}function zw(r,s,o){r=r.ownerDocument||r,r.head.insertBefore(o,s==="title"?r.querySelector("head > title"):null)}function $E(r,s,o){if(o===1||s.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return r=s.disabled,typeof s.precedence=="string"&&r==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function Lw(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}var ou=null;function VE(){}function jE(r,s,o){if(ou===null)throw Error(i(475));var u=ou;if(s.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var f=ko(o.href),m=r.querySelector(su(f));if(m){r=m._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(u.count++,u=pf.bind(u),r.then(u,u)),s.state.loading|=4,s.instance=m,Se(m);return}m=r.ownerDocument||r,o=Rw(o),(f=Cn.get(f))&&dm(o,f),m=m.createElement("link"),Se(m);var S=m;S._p=new Promise(function(E,M){S.onload=E,S.onerror=M}),Be(m,"link",o),s.instance=m}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(s,r),(r=s.state.preload)&&(s.state.loading&3)===0&&(u.count++,s=pf.bind(u),r.addEventListener("load",s),r.addEventListener("error",s))}}function YE(){if(ou===null)throw Error(i(475));var r=ou;return r.stylesheets&&r.count===0&&gm(r,r.stylesheets),0<r.count?function(s){var o=setTimeout(function(){if(r.stylesheets&&gm(r,r.stylesheets),r.unsuspend){var u=r.unsuspend;r.unsuspend=null,u()}},6e4);return r.unsuspend=s,function(){r.unsuspend=null,clearTimeout(o)}}:null}function pf(){if(this.count--,this.count===0){if(this.stylesheets)gm(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var vf=null;function gm(r,s){r.stylesheets=null,r.unsuspend!==null&&(r.count++,vf=new Map,s.forEach(GE,r),vf=null,pf.call(r))}function GE(r,s){if(!(s.state.loading&4)){var o=vf.get(r);if(o)var u=o.get(null);else{o=new Map,vf.set(r,o);for(var f=r.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var S=f[m];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(o.set(S.dataset.precedence,S),u=S)}u&&o.set(null,u)}f=s.instance,S=f.getAttribute("data-precedence"),m=o.get(S)||u,m===u&&o.set(null,f),o.set(S,f),this.count++,u=pf.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),m?m.parentNode.insertBefore(f,m.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(f,r.firstChild)),s.state.loading|=4}}var lu={$$typeof:N,Provider:null,Consumer:null,_currentValue:G,_currentValue2:G,_threadCount:0};function KE(r,s,o,u,f,m,S,E){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=cl(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=cl(0),this.hiddenUpdates=cl(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=E,this.incompleteTransitions=new Map}function _w(r,s,o,u,f,m,S,E,M,X,at,ct){return r=new KE(r,s,o,S,E,M,X,ct),s=1,m===!0&&(s|=24),m=ln(3,null,null,s),r.current=m,m.stateNode=r,s=Xh(),s.refCount++,r.pooledCache=s,s.refCount++,m.memoizedState={element:u,isDehydrated:o,cache:s},Wh(m),r}function Uw(r){return r?(r=ao,r):ao}function qw(r,s,o,u,f,m){f=Uw(f),u.context===null?u.context=f:u.pendingContext=f,u=Cs(s),u.payload={element:o},m=m===void 0?null:m,m!==null&&(u.callback=m),o=Ds(r,u,s),o!==null&&(hn(o,r,s),Ul(o,r,s))}function Pw(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var o=r.retryLane;r.retryLane=o!==0&&o<s?o:s}}function mm(r,s){Pw(r,s),(r=r.alternate)&&Pw(r,s)}function Jw(r){if(r.tag===13){var s=so(r,67108864);s!==null&&hn(s,r,67108864),mm(r,67108864)}}var wf=!0;function XE(r,s,o,u){var f=O.T;O.T=null;var m=z.p;try{z.p=2,ym(r,s,o,u)}finally{z.p=m,O.T=f}}function FE(r,s,o,u){var f=O.T;O.T=null;var m=z.p;try{z.p=8,ym(r,s,o,u)}finally{z.p=m,O.T=f}}function ym(r,s,o,u){if(wf){var f=pm(u);if(f===null)rm(r,s,u,bf,o),$w(r,u);else if(QE(f,r,s,o,u))u.stopPropagation();else if($w(r,u),s&4&&-1<ZE.indexOf(r)){for(;f!==null;){var m=Mr(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var S=Rr(m.pendingLanes);if(S!==0){var E=m;for(E.pendingLanes|=2,E.entangledLanes|=2;S;){var M=1<<31-je(S);E.entanglements[1]|=M,S&=~M}ur(m),(Xt&6)===0&&(nf=be()+500,eu(0))}}break;case 13:E=so(m,2),E!==null&&hn(E,m,2),sf(),mm(m,2)}if(m=pm(u),m===null&&rm(r,s,u,bf,o),m===f)break;f=m}f!==null&&u.stopPropagation()}else rm(r,s,u,null,o)}}function pm(r){return r=xh(r),vm(r)}var bf=null;function vm(r){if(bf=null,r=Ss(r),r!==null){var s=l(r);if(s===null)r=null;else{var o=s.tag;if(o===13){if(r=c(s),r!==null)return r;r=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null)}}return bf=r,null}function Hw(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(vs()){case ia:return 2;case sa:return 8;case Ir:case aa:return 32;case ws:return 268435456;default:return 32}default:return 32}}var wm=!1,Js=null,Hs=null,$s=null,uu=new Map,cu=new Map,Vs=[],ZE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function $w(r,s){switch(r){case"focusin":case"focusout":Js=null;break;case"dragenter":case"dragleave":Hs=null;break;case"mouseover":case"mouseout":$s=null;break;case"pointerover":case"pointerout":uu.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":cu.delete(s.pointerId)}}function fu(r,s,o,u,f,m){return r===null||r.nativeEvent!==m?(r={blockedOn:s,domEventName:o,eventSystemFlags:u,nativeEvent:m,targetContainers:[f]},s!==null&&(s=Mr(s),s!==null&&Jw(s)),r):(r.eventSystemFlags|=u,s=r.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),r)}function QE(r,s,o,u,f){switch(s){case"focusin":return Js=fu(Js,r,s,o,u,f),!0;case"dragenter":return Hs=fu(Hs,r,s,o,u,f),!0;case"mouseover":return $s=fu($s,r,s,o,u,f),!0;case"pointerover":var m=f.pointerId;return uu.set(m,fu(uu.get(m)||null,r,s,o,u,f)),!0;case"gotpointercapture":return m=f.pointerId,cu.set(m,fu(cu.get(m)||null,r,s,o,u,f)),!0}return!1}function Vw(r){var s=Ss(r.target);if(s!==null){var o=l(s);if(o!==null){if(s=o.tag,s===13){if(s=c(o),s!==null){r.blockedOn=s,dh(r.priority,function(){if(o.tag===13){var u=dn();u=dl(u);var f=so(o,u);f!==null&&hn(f,o,u),mm(o,u)}});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){r.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Sf(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var o=pm(r.nativeEvent);if(o===null){o=r.nativeEvent;var u=new o.constructor(o.type,o);Sh=u,o.target.dispatchEvent(u),Sh=null}else return s=Mr(o),s!==null&&Jw(s),r.blockedOn=o,!1;s.shift()}return!0}function jw(r,s,o){Sf(r)&&o.delete(s)}function WE(){wm=!1,Js!==null&&Sf(Js)&&(Js=null),Hs!==null&&Sf(Hs)&&(Hs=null),$s!==null&&Sf($s)&&($s=null),uu.forEach(jw),cu.forEach(jw)}function xf(r,s){r.blockedOn===s&&(r.blockedOn=null,wm||(wm=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,WE)))}var Tf=null;function Yw(r){Tf!==r&&(Tf=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Tf===r&&(Tf=null);for(var s=0;s<r.length;s+=3){var o=r[s],u=r[s+1],f=r[s+2];if(typeof u!="function"){if(vm(u||o)===null)continue;break}var m=Mr(o);m!==null&&(r.splice(s,3),s-=3,vg(m,{pending:!0,data:f,method:o.method,action:u},u,f))}}))}function du(r){function s(M){return xf(M,r)}Js!==null&&xf(Js,r),Hs!==null&&xf(Hs,r),$s!==null&&xf($s,r),uu.forEach(s),cu.forEach(s);for(var o=0;o<Vs.length;o++){var u=Vs[o];u.blockedOn===r&&(u.blockedOn=null)}for(;0<Vs.length&&(o=Vs[0],o.blockedOn===null);)Vw(o),o.blockedOn===null&&Vs.shift();if(o=(r.ownerDocument||r).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var f=o[u],m=o[u+1],S=f[qe]||null;if(typeof m=="function")S||Yw(o);else if(S){var E=null;if(m&&m.hasAttribute("formAction")){if(f=m,S=m[qe]||null)E=S.formAction;else if(vm(f)!==null)continue}else E=S.action;typeof E=="function"?o[u+1]=E:(o.splice(u,3),u-=3),Yw(o)}}}function bm(r){this._internalRoot=r}Af.prototype.render=bm.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(i(409));var o=s.current,u=dn();qw(o,u,r,s,null,null)},Af.prototype.unmount=bm.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;qw(r.current,2,null,r,null,null),sf(),s[bs]=null}};function Af(r){this._internalRoot=r}Af.prototype.unstable_scheduleHydration=function(r){if(r){var s=cc();r={blockedOn:null,target:r,priority:s};for(var o=0;o<Vs.length&&s!==0&&s<Vs[o].priority;o++);Vs.splice(o,0,r),o===0&&Vw(r)}};var Gw=t.version;if(Gw!=="19.1.0")throw Error(i(527,Gw,"19.1.0"));z.findDOMNode=function(r){var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=h(s),r=r!==null?g(r):null,r=r===null?null:r.stateNode,r};var tN={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:O,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ef=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ef.isDisabled&&Ef.supportsFiber)try{bn=Ef.inject(tN),Ee=Ef}catch{}}return gu.createRoot=function(r,s){if(!a(r))throw Error(i(299));var o=!1,u="",f=uv,m=cv,S=fv,E=null;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(f=s.onUncaughtError),s.onCaughtError!==void 0&&(m=s.onCaughtError),s.onRecoverableError!==void 0&&(S=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(E=s.unstable_transitionCallbacks)),s=_w(r,1,!1,null,null,o,u,f,m,S,E,null),r[bs]=s.current,nm(r),new bm(s)},gu.hydrateRoot=function(r,s,o){if(!a(r))throw Error(i(299));var u=!1,f="",m=uv,S=cv,E=fv,M=null,X=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(m=o.onUncaughtError),o.onCaughtError!==void 0&&(S=o.onCaughtError),o.onRecoverableError!==void 0&&(E=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(M=o.unstable_transitionCallbacks),o.formState!==void 0&&(X=o.formState)),s=_w(r,1,!0,s,o??null,u,f,m,S,E,M,X),s.context=Uw(null),o=s.current,u=dn(),u=dl(u),f=Cs(u),f.callback=null,Ds(o,f,u),o=u,s.current.lanes=o,la(s,o),ur(s),r[bs]=s.current,nm(r),new Af(s)},gu.version="19.1.0",gu}var rb;function fN(){if(rb)return xm.exports;rb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),xm.exports=cN(),xm.exports}var dN=fN(),qt;(function(n){n[n.Canceled=1]="Canceled",n[n.Unknown=2]="Unknown",n[n.InvalidArgument=3]="InvalidArgument",n[n.DeadlineExceeded=4]="DeadlineExceeded",n[n.NotFound=5]="NotFound",n[n.AlreadyExists=6]="AlreadyExists",n[n.PermissionDenied=7]="PermissionDenied",n[n.ResourceExhausted=8]="ResourceExhausted",n[n.FailedPrecondition=9]="FailedPrecondition",n[n.Aborted=10]="Aborted",n[n.OutOfRange=11]="OutOfRange",n[n.Unimplemented=12]="Unimplemented",n[n.Internal=13]="Internal",n[n.Unavailable=14]="Unavailable",n[n.DataLoss=15]="DataLoss",n[n.Unauthenticated=16]="Unauthenticated"})(qt||(qt={}));function ib(n){const t=qt[n];return typeof t!="string"?n.toString():t[0].toLowerCase()+t.substring(1).replace(/[A-Z]/g,e=>"_"+e.toLowerCase())}class Kt extends Error{constructor(t,e=qt.Unknown,i,a,l){super(hN(t,e)),this.name="ConnectError",Object.setPrototypeOf(this,new.target.prototype),this.rawMessage=t,this.code=e,this.metadata=new Headers(i??{}),this.details=a??[],this.cause=l}static from(t,e=qt.Unknown){return t instanceof Kt?t:t instanceof Error?t.name=="AbortError"?new Kt(t.message,qt.Canceled):new Kt(t.message,e,void 0,void 0,t):new Kt(String(t),e,void 0,void 0,t)}static[Symbol.hasInstance](t){return t instanceof Error?Object.getPrototypeOf(t)===Kt.prototype?!0:t.name==="ConnectError"&&"code"in t&&typeof t.code=="number"&&"metadata"in t&&"details"in t&&Array.isArray(t.details)&&"rawMessage"in t&&typeof t.rawMessage=="string"&&"cause"in t:!1}findDetails(t){const e="typeName"in t?{findMessage:a=>a===t.typeName?t:void 0}:t,i=[];for(const a of this.details){if("getType"in a){e.findMessage(a.getType().typeName)&&i.push(a);continue}const l=e.findMessage(a.type);if(l)try{i.push(l.fromBinary(a.value))}catch{}}return i}}function hN(n,t){return n.length?`[${ib(t)}] ${n}`:`[${ib(t)}]`}function me(n,t){if(!n)throw new Error(t)}const gN=34028234663852886e22,mN=-34028234663852886e22,yN=4294967295,pN=2147483647,vN=-2147483648;function Hf(n){if(typeof n!="number")throw new Error("invalid int 32: "+typeof n);if(!Number.isInteger(n)||n>pN||n<vN)throw new Error("invalid int 32: "+n)}function Gm(n){if(typeof n!="number")throw new Error("invalid uint 32: "+typeof n);if(!Number.isInteger(n)||n>yN||n<0)throw new Error("invalid uint 32: "+n)}function a1(n){if(typeof n!="number")throw new Error("invalid float 32: "+typeof n);if(Number.isFinite(n)&&(n>gN||n<mN))throw new Error("invalid float 32: "+n)}const o1=Symbol("@bufbuild/protobuf/enum-type");function wN(n){const t=n[o1];return me(t,"missing enum type on enum object"),t}function l1(n,t,e,i){n[o1]=u1(t,e.map(a=>({no:a.no,name:a.name,localName:n[a.no]})))}function u1(n,t,e){const i=Object.create(null),a=Object.create(null),l=[];for(const c of t){const d=c1(c);l.push(d),i[c.name]=d,a[c.no]=d}return{typeName:n,values:l,findName(c){return i[c]},findNumber(c){return a[c]}}}function bN(n,t,e){const i={};for(const a of t){const l=c1(a);i[l.localName]=l.no,i[l.no]=l.localName}return l1(i,n,t),i}function c1(n){return"localName"in n?n:Object.assign(Object.assign({},n),{localName:n.name})}class yt{equals(t){return this.getType().runtime.util.equals(this.getType(),this,t)}clone(){return this.getType().runtime.util.clone(this)}fromBinary(t,e){const i=this.getType(),a=i.runtime.bin,l=a.makeReadOptions(e);return a.readMessage(this,l.readerFactory(t),t.byteLength,l),this}fromJson(t,e){const i=this.getType(),a=i.runtime.json,l=a.makeReadOptions(e);return a.readMessage(i,t,l,this),this}fromJsonString(t,e){let i;try{i=JSON.parse(t)}catch(a){throw new Error(`cannot decode ${this.getType().typeName} from JSON: ${a instanceof Error?a.message:String(a)}`)}return this.fromJson(i,e)}toBinary(t){const e=this.getType(),i=e.runtime.bin,a=i.makeWriteOptions(t),l=a.writerFactory();return i.writeMessage(this,l,a),l.finish()}toJson(t){const e=this.getType(),i=e.runtime.json,a=i.makeWriteOptions(t);return i.writeMessage(this,a)}toJsonString(t){var e;const i=this.toJson(t);return JSON.stringify(i,null,(e=t==null?void 0:t.prettySpaces)!==null&&e!==void 0?e:0)}toJSON(){return this.toJson({emitDefaultValues:!0})}getType(){return Object.getPrototypeOf(this).constructor}}function SN(n,t,e,i){var a;const l=(a=i==null?void 0:i.localName)!==null&&a!==void 0?a:t.substring(t.lastIndexOf(".")+1),c={[l]:function(d){n.util.initFields(this),n.util.initPartial(d,this)}}[l];return Object.setPrototypeOf(c.prototype,new yt),Object.assign(c,{runtime:n,typeName:t,fields:n.util.newFieldList(e),fromBinary(d,h){return new c().fromBinary(d,h)},fromJson(d,h){return new c().fromJson(d,h)},fromJsonString(d,h){return new c().fromJsonString(d,h)},equals(d,h){return n.util.equals(c,d,h)}}),c}function xN(){let n=0,t=0;for(let i=0;i<28;i+=7){let a=this.buf[this.pos++];if(n|=(a&127)<<i,(a&128)==0)return this.assertBounds(),[n,t]}let e=this.buf[this.pos++];if(n|=(e&15)<<28,t=(e&112)>>4,(e&128)==0)return this.assertBounds(),[n,t];for(let i=3;i<=31;i+=7){let a=this.buf[this.pos++];if(t|=(a&127)<<i,(a&128)==0)return this.assertBounds(),[n,t]}throw new Error("invalid varint")}function Cm(n,t,e){for(let l=0;l<28;l=l+7){const c=n>>>l,d=!(!(c>>>7)&&t==0),h=(d?c|128:c)&255;if(e.push(h),!d)return}const i=n>>>28&15|(t&7)<<4,a=t>>3!=0;if(e.push((a?i|128:i)&255),!!a){for(let l=3;l<31;l=l+7){const c=t>>>l,d=!!(c>>>7),h=(d?c|128:c)&255;if(e.push(h),!d)return}e.push(t>>>31&1)}}const $f=4294967296;function sb(n){const t=n[0]==="-";t&&(n=n.slice(1));const e=1e6;let i=0,a=0;function l(c,d){const h=Number(n.slice(c,d));a*=e,i=i*e+h,i>=$f&&(a=a+(i/$f|0),i=i%$f)}return l(-24,-18),l(-18,-12),l(-12,-6),l(-6),t?d1(i,a):_y(i,a)}function TN(n,t){let e=_y(n,t);const i=e.hi&2147483648;i&&(e=d1(e.lo,e.hi));const a=f1(e.lo,e.hi);return i?"-"+a:a}function f1(n,t){if({lo:n,hi:t}=AN(n,t),t<=2097151)return String($f*t+n);const e=n&16777215,i=(n>>>24|t<<8)&16777215,a=t>>16&65535;let l=e+i*6777216+a*6710656,c=i+a*8147497,d=a*2;const h=1e7;return l>=h&&(c+=Math.floor(l/h),l%=h),c>=h&&(d+=Math.floor(c/h),c%=h),d.toString()+ab(c)+ab(l)}function AN(n,t){return{lo:n>>>0,hi:t>>>0}}function _y(n,t){return{lo:n|0,hi:t|0}}function d1(n,t){return t=~t,n?n=~n+1:t+=1,_y(n,t)}const ab=n=>{const t=String(n);return"0000000".slice(t.length)+t};function ob(n,t){if(n>=0){for(;n>127;)t.push(n&127|128),n=n>>>7;t.push(n)}else{for(let e=0;e<9;e++)t.push(n&127|128),n=n>>7;t.push(1)}}function EN(){let n=this.buf[this.pos++],t=n&127;if((n&128)==0)return this.assertBounds(),t;if(n=this.buf[this.pos++],t|=(n&127)<<7,(n&128)==0)return this.assertBounds(),t;if(n=this.buf[this.pos++],t|=(n&127)<<14,(n&128)==0)return this.assertBounds(),t;if(n=this.buf[this.pos++],t|=(n&127)<<21,(n&128)==0)return this.assertBounds(),t;n=this.buf[this.pos++],t|=(n&15)<<28;for(let e=5;(n&128)!==0&&e<10;e++)n=this.buf[this.pos++];if((n&128)!=0)throw new Error("invalid varint");return this.assertBounds(),t>>>0}var lb={};function NN(){const n=new DataView(new ArrayBuffer(8));if(typeof BigInt=="function"&&typeof n.getBigInt64=="function"&&typeof n.getBigUint64=="function"&&typeof n.setBigInt64=="function"&&typeof n.setBigUint64=="function"&&(typeof process!="object"||typeof lb!="object"||lb.BUF_BIGINT_DISABLE!=="1")){const a=BigInt("-9223372036854775808"),l=BigInt("9223372036854775807"),c=BigInt("0"),d=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(h){const g=typeof h=="bigint"?h:BigInt(h);if(g>l||g<a)throw new Error(`int64 invalid: ${h}`);return g},uParse(h){const g=typeof h=="bigint"?h:BigInt(h);if(g>d||g<c)throw new Error(`uint64 invalid: ${h}`);return g},enc(h){return n.setBigInt64(0,this.parse(h),!0),{lo:n.getInt32(0,!0),hi:n.getInt32(4,!0)}},uEnc(h){return n.setBigInt64(0,this.uParse(h),!0),{lo:n.getInt32(0,!0),hi:n.getInt32(4,!0)}},dec(h,g){return n.setInt32(0,h,!0),n.setInt32(4,g,!0),n.getBigInt64(0,!0)},uDec(h,g){return n.setInt32(0,h,!0),n.setInt32(4,g,!0),n.getBigUint64(0,!0)}}}const e=a=>me(/^-?[0-9]+$/.test(a),`int64 invalid: ${a}`),i=a=>me(/^[0-9]+$/.test(a),`uint64 invalid: ${a}`);return{zero:"0",supported:!1,parse(a){return typeof a!="string"&&(a=a.toString()),e(a),a},uParse(a){return typeof a!="string"&&(a=a.toString()),i(a),a},enc(a){return typeof a!="string"&&(a=a.toString()),e(a),sb(a)},uEnc(a){return typeof a!="string"&&(a=a.toString()),i(a),sb(a)},dec(a,l){return TN(a,l)},uDec(a,l){return f1(a,l)}}}const se=NN();var st;(function(n){n[n.DOUBLE=1]="DOUBLE",n[n.FLOAT=2]="FLOAT",n[n.INT64=3]="INT64",n[n.UINT64=4]="UINT64",n[n.INT32=5]="INT32",n[n.FIXED64=6]="FIXED64",n[n.FIXED32=7]="FIXED32",n[n.BOOL=8]="BOOL",n[n.STRING=9]="STRING",n[n.BYTES=12]="BYTES",n[n.UINT32=13]="UINT32",n[n.SFIXED32=15]="SFIXED32",n[n.SFIXED64=16]="SFIXED64",n[n.SINT32=17]="SINT32",n[n.SINT64=18]="SINT64"})(st||(st={}));var ra;(function(n){n[n.BIGINT=0]="BIGINT",n[n.STRING=1]="STRING"})(ra||(ra={}));function Ys(n,t,e){if(t===e)return!0;if(n==st.BYTES){if(!(t instanceof Uint8Array)||!(e instanceof Uint8Array)||t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0}switch(n){case st.UINT64:case st.FIXED64:case st.INT64:case st.SFIXED64:case st.SINT64:return t==e}return!1}function Vo(n,t){switch(n){case st.BOOL:return!1;case st.UINT64:case st.FIXED64:case st.INT64:case st.SFIXED64:case st.SINT64:return t==0?se.zero:"0";case st.DOUBLE:case st.FLOAT:return 0;case st.BYTES:return new Uint8Array(0);case st.STRING:return"";default:return 0}}function h1(n,t){switch(n){case st.BOOL:return t===!1;case st.STRING:return t==="";case st.BYTES:return t instanceof Uint8Array&&!t.byteLength;default:return t==0}}var we;(function(n){n[n.Varint=0]="Varint",n[n.Bit64=1]="Bit64",n[n.LengthDelimited=2]="LengthDelimited",n[n.StartGroup=3]="StartGroup",n[n.EndGroup=4]="EndGroup",n[n.Bit32=5]="Bit32"})(we||(we={}));class CN{constructor(t){this.stack=[],this.textEncoder=t??new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let t=0;for(let a=0;a<this.chunks.length;a++)t+=this.chunks[a].length;let e=new Uint8Array(t),i=0;for(let a=0;a<this.chunks.length;a++)e.set(this.chunks[a],i),i+=this.chunks[a].length;return this.chunks=[],e}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let t=this.finish(),e=this.stack.pop();if(!e)throw new Error("invalid state, fork stack empty");return this.chunks=e.chunks,this.buf=e.buf,this.uint32(t.byteLength),this.raw(t)}tag(t,e){return this.uint32((t<<3|e)>>>0)}raw(t){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(t),this}uint32(t){for(Gm(t);t>127;)this.buf.push(t&127|128),t=t>>>7;return this.buf.push(t),this}int32(t){return Hf(t),ob(t,this.buf),this}bool(t){return this.buf.push(t?1:0),this}bytes(t){return this.uint32(t.byteLength),this.raw(t)}string(t){let e=this.textEncoder.encode(t);return this.uint32(e.byteLength),this.raw(e)}float(t){a1(t);let e=new Uint8Array(4);return new DataView(e.buffer).setFloat32(0,t,!0),this.raw(e)}double(t){let e=new Uint8Array(8);return new DataView(e.buffer).setFloat64(0,t,!0),this.raw(e)}fixed32(t){Gm(t);let e=new Uint8Array(4);return new DataView(e.buffer).setUint32(0,t,!0),this.raw(e)}sfixed32(t){Hf(t);let e=new Uint8Array(4);return new DataView(e.buffer).setInt32(0,t,!0),this.raw(e)}sint32(t){return Hf(t),t=(t<<1^t>>31)>>>0,ob(t,this.buf),this}sfixed64(t){let e=new Uint8Array(8),i=new DataView(e.buffer),a=se.enc(t);return i.setInt32(0,a.lo,!0),i.setInt32(4,a.hi,!0),this.raw(e)}fixed64(t){let e=new Uint8Array(8),i=new DataView(e.buffer),a=se.uEnc(t);return i.setInt32(0,a.lo,!0),i.setInt32(4,a.hi,!0),this.raw(e)}int64(t){let e=se.enc(t);return Cm(e.lo,e.hi,this.buf),this}sint64(t){let e=se.enc(t),i=e.hi>>31,a=e.lo<<1^i,l=(e.hi<<1|e.lo>>>31)^i;return Cm(a,l,this.buf),this}uint64(t){let e=se.uEnc(t);return Cm(e.lo,e.hi,this.buf),this}}class DN{constructor(t,e){this.varint64=xN,this.uint32=EN,this.buf=t,this.len=t.length,this.pos=0,this.view=new DataView(t.buffer,t.byteOffset,t.byteLength),this.textDecoder=e??new TextDecoder}tag(){let t=this.uint32(),e=t>>>3,i=t&7;if(e<=0||i<0||i>5)throw new Error("illegal tag: field no "+e+" wire type "+i);return[e,i]}skip(t,e){let i=this.pos;switch(t){case we.Varint:for(;this.buf[this.pos++]&128;);break;case we.Bit64:this.pos+=4;case we.Bit32:this.pos+=4;break;case we.LengthDelimited:let a=this.uint32();this.pos+=a;break;case we.StartGroup:for(;;){const[l,c]=this.tag();if(c===we.EndGroup){if(e!==void 0&&l!==e)throw new Error("invalid end group tag");break}this.skip(c,l)}break;default:throw new Error("cant skip wire type "+t)}return this.assertBounds(),this.buf.subarray(i,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let t=this.uint32();return t>>>1^-(t&1)}int64(){return se.dec(...this.varint64())}uint64(){return se.uDec(...this.varint64())}sint64(){let[t,e]=this.varint64(),i=-(t&1);return t=(t>>>1|(e&1)<<31)^i,e=e>>>1^i,se.dec(t,e)}bool(){let[t,e]=this.varint64();return t!==0||e!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return se.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return se.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let t=this.uint32(),e=this.pos;return this.pos+=t,this.assertBounds(),this.buf.subarray(e,e+t)}string(){return this.textDecoder.decode(this.bytes())}}function kN(n,t,e,i){let a;return{typeName:t,extendee:e,get field(){if(!a){const l=typeof i=="function"?i():i;l.name=t.split(".").pop(),l.jsonName=`[${t}]`,a=n.util.newFieldList([l]).list()[0]}return a},runtime:n}}function g1(n){const t=n.field.localName,e=Object.create(null);return e[t]=ON(n),[e,()=>e[t]]}function ON(n){const t=n.field;if(t.repeated)return[];if(t.default!==void 0)return t.default;switch(t.kind){case"enum":return t.T.values[0].no;case"scalar":return Vo(t.T,t.L);case"message":const e=t.T,i=new e;return e.fieldWrapper?e.fieldWrapper.unwrapField(i):i;case"map":throw"map fields are not allowed to be extensions"}}function IN(n,t){if(!t.repeated&&(t.kind=="enum"||t.kind=="scalar")){for(let e=n.length-1;e>=0;--e)if(n[e].no==t.no)return[n[e]];return[]}return n.filter(e=>e.no===t.no)}let is="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),Pd=[];for(let n=0;n<is.length;n++)Pd[is[n].charCodeAt(0)]=n;Pd[45]=is.indexOf("+");Pd[95]=is.indexOf("/");const Uy={dec(n){let t=n.length*3/4;n[n.length-2]=="="?t-=2:n[n.length-1]=="="&&(t-=1);let e=new Uint8Array(t),i=0,a=0,l,c=0;for(let d=0;d<n.length;d++){if(l=Pd[n.charCodeAt(d)],l===void 0)switch(n[d]){case"=":a=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(a){case 0:c=l,a=1;break;case 1:e[i++]=c<<2|(l&48)>>4,c=l,a=2;break;case 2:e[i++]=(c&15)<<4|(l&60)>>2,c=l,a=3;break;case 3:e[i++]=(c&3)<<6|l,a=0;break}}if(a==1)throw Error("invalid base64 string.");return e.subarray(0,i)},enc(n){let t="",e=0,i,a=0;for(let l=0;l<n.length;l++)switch(i=n[l],e){case 0:t+=is[i>>2],a=(i&3)<<4,e=1;break;case 1:t+=is[a|i>>4],a=(i&15)<<2,e=2;break;case 2:t+=is[a|i>>6],t+=is[i&63],e=0;break}return e&&(t+=is[a],t+="=",e==1&&(t+="=")),t}};function RN(n,t,e){y1(t,n);const i=t.runtime.bin.makeReadOptions(e),a=IN(n.getType().runtime.bin.listUnknownFields(n),t.field),[l,c]=g1(t);for(const d of a)t.runtime.bin.readField(l,i.readerFactory(d.data),t.field,d.wireType,i);return c()}function MN(n,t,e,i){y1(t,n);const a=t.runtime.bin.makeReadOptions(i),l=t.runtime.bin.makeWriteOptions(i);if(m1(n,t)){const g=n.getType().runtime.bin.listUnknownFields(n).filter(y=>y.no!=t.field.no);n.getType().runtime.bin.discardUnknownFields(n);for(const y of g)n.getType().runtime.bin.onUnknownField(n,y.no,y.wireType,y.data)}const c=l.writerFactory();let d=t.field;!d.opt&&!d.repeated&&(d.kind=="enum"||d.kind=="scalar")&&(d=Object.assign(Object.assign({},t.field),{opt:!0})),t.runtime.bin.writeField(d,e,c,l);const h=a.readerFactory(c.finish());for(;h.pos<h.len;){const[g,y]=h.tag(),w=h.skip(y,g);n.getType().runtime.bin.onUnknownField(n,g,y,w)}}function m1(n,t){const e=n.getType();return t.extendee.typeName===e.typeName&&!!e.runtime.bin.listUnknownFields(n).find(i=>i.no==t.field.no)}function y1(n,t){me(n.extendee.typeName==t.getType().typeName,`extension ${n.typeName} can only be applied to message ${n.extendee.typeName}`)}function p1(n,t){const e=n.localName;if(n.repeated)return t[e].length>0;if(n.oneof)return t[n.oneof.localName].case===e;switch(n.kind){case"enum":case"scalar":return n.opt||n.req?t[e]!==void 0:n.kind=="enum"?t[e]!==n.T.values[0].no:!h1(n.T,t[e]);case"message":return t[e]!==void 0;case"map":return Object.keys(t[e]).length>0}}function ub(n,t){const e=n.localName,i=!n.opt&&!n.req;if(n.repeated)t[e]=[];else if(n.oneof)t[n.oneof.localName]={case:void 0};else switch(n.kind){case"map":t[e]={};break;case"enum":t[e]=i?n.T.values[0].no:void 0;break;case"scalar":t[e]=i?Vo(n.T,n.L):void 0;break;case"message":t[e]=void 0;break}}function ss(n,t){if(n===null||typeof n!="object"||!Object.getOwnPropertyNames(yt.prototype).every(i=>i in n&&typeof n[i]=="function"))return!1;const e=n.getType();return e===null||typeof e!="function"||!("typeName"in e)||typeof e.typeName!="string"?!1:t===void 0?!0:e.typeName==t.typeName}function v1(n,t){return ss(t)||!n.fieldWrapper?t:n.fieldWrapper.wrapField(t)}st.DOUBLE,st.FLOAT,st.INT64,st.UINT64,st.INT32,st.UINT32,st.BOOL,st.STRING,st.BYTES;const cb={ignoreUnknownFields:!1},fb={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0};function BN(n){return n?Object.assign(Object.assign({},cb),n):cb}function zN(n){return n?Object.assign(Object.assign({},fb),n):fb}const td=Symbol(),Vf=Symbol();function LN(){return{makeReadOptions:BN,makeWriteOptions:zN,readMessage(n,t,e,i){if(t==null||Array.isArray(t)||typeof t!="object")throw new Error(`cannot decode message ${n.typeName} from JSON: ${fr(t)}`);i=i??new n;const a=new Map,l=e.typeRegistry;for(const[c,d]of Object.entries(t)){const h=n.fields.findJsonName(c);if(h){if(h.oneof){if(d===null&&h.kind=="scalar")continue;const g=a.get(h.oneof);if(g!==void 0)throw new Error(`cannot decode message ${n.typeName} from JSON: multiple keys for oneof "${h.oneof.name}" present: "${g}", "${c}"`);a.set(h.oneof,c)}db(i,d,h,e,n)}else{let g=!1;if(l!=null&&l.findExtension&&c.startsWith("[")&&c.endsWith("]")){const y=l.findExtension(c.substring(1,c.length-1));if(y&&y.extendee.typeName==n.typeName){g=!0;const[w,v]=g1(y);db(w,d,y.field,e,y),MN(i,y,v(),e)}}if(!g&&!e.ignoreUnknownFields)throw new Error(`cannot decode message ${n.typeName} from JSON: key "${c}" is unknown`)}}return i},writeMessage(n,t){const e=n.getType(),i={};let a;try{for(a of e.fields.byNumber()){if(!p1(a,n)){if(a.req)throw"required field not set";if(!t.emitDefaultValues||!UN(a))continue}const c=a.oneof?n[a.oneof.localName].value:n[a.localName],d=hb(a,c,t);d!==void 0&&(i[t.useProtoFieldName?a.name:a.jsonName]=d)}const l=t.typeRegistry;if(l!=null&&l.findExtensionFor)for(const c of e.runtime.bin.listUnknownFields(n)){const d=l.findExtensionFor(e.typeName,c.no);if(d&&m1(n,d)){const h=RN(n,d,t),g=hb(d.field,h,t);g!==void 0&&(i[d.field.jsonName]=g)}}}catch(l){const c=a?`cannot encode field ${e.typeName}.${a.name} to JSON`:`cannot encode message ${e.typeName} to JSON`,d=l instanceof Error?l.message:String(l);throw new Error(c+(d.length>0?`: ${d}`:""))}return i},readScalar(n,t,e){return Tu(n,t,e??ra.BIGINT,!0)},writeScalar(n,t,e){if(t!==void 0&&(e||h1(n,t)))return jf(n,t)},debug:fr}}function fr(n){if(n===null)return"null";switch(typeof n){case"object":return Array.isArray(n)?"array":"object";case"string":return n.length>100?"string":`"${n.split('"').join('\\"')}"`;default:return String(n)}}function db(n,t,e,i,a){let l=e.localName;if(e.repeated){if(me(e.kind!="map"),t===null)return;if(!Array.isArray(t))throw new Error(`cannot decode field ${a.typeName}.${e.name} from JSON: ${fr(t)}`);const c=n[l];for(const d of t){if(d===null)throw new Error(`cannot decode field ${a.typeName}.${e.name} from JSON: ${fr(d)}`);switch(e.kind){case"message":c.push(e.T.fromJson(d,i));break;case"enum":const h=Dm(e.T,d,i.ignoreUnknownFields,!0);h!==Vf&&c.push(h);break;case"scalar":try{c.push(Tu(e.T,d,e.L,!0))}catch(g){let y=`cannot decode field ${a.typeName}.${e.name} from JSON: ${fr(d)}`;throw g instanceof Error&&g.message.length>0&&(y+=`: ${g.message}`),new Error(y)}break}}}else if(e.kind=="map"){if(t===null)return;if(typeof t!="object"||Array.isArray(t))throw new Error(`cannot decode field ${a.typeName}.${e.name} from JSON: ${fr(t)}`);const c=n[l];for(const[d,h]of Object.entries(t)){if(h===null)throw new Error(`cannot decode field ${a.typeName}.${e.name} from JSON: map value null`);let g;try{g=_N(e.K,d)}catch(y){let w=`cannot decode map key for field ${a.typeName}.${e.name} from JSON: ${fr(t)}`;throw y instanceof Error&&y.message.length>0&&(w+=`: ${y.message}`),new Error(w)}switch(e.V.kind){case"message":c[g]=e.V.T.fromJson(h,i);break;case"enum":const y=Dm(e.V.T,h,i.ignoreUnknownFields,!0);y!==Vf&&(c[g]=y);break;case"scalar":try{c[g]=Tu(e.V.T,h,ra.BIGINT,!0)}catch(w){let v=`cannot decode map value for field ${a.typeName}.${e.name} from JSON: ${fr(t)}`;throw w instanceof Error&&w.message.length>0&&(v+=`: ${w.message}`),new Error(v)}break}}}else switch(e.oneof&&(n=n[e.oneof.localName]={case:l},l="value"),e.kind){case"message":const c=e.T;if(t===null&&c.typeName!="google.protobuf.Value")return;let d=n[l];ss(d)?d.fromJson(t,i):(n[l]=d=c.fromJson(t,i),c.fieldWrapper&&!e.oneof&&(n[l]=c.fieldWrapper.unwrapField(d)));break;case"enum":const h=Dm(e.T,t,i.ignoreUnknownFields,!1);switch(h){case td:ub(e,n);break;case Vf:break;default:n[l]=h;break}break;case"scalar":try{const g=Tu(e.T,t,e.L,!1);switch(g){case td:ub(e,n);break;default:n[l]=g;break}}catch(g){let y=`cannot decode field ${a.typeName}.${e.name} from JSON: ${fr(t)}`;throw g instanceof Error&&g.message.length>0&&(y+=`: ${g.message}`),new Error(y)}break}}function _N(n,t){if(n===st.BOOL)switch(t){case"true":t=!0;break;case"false":t=!1;break}return Tu(n,t,ra.BIGINT,!0).toString()}function Tu(n,t,e,i){if(t===null)return i?Vo(n,e):td;switch(n){case st.DOUBLE:case st.FLOAT:if(t==="NaN")return Number.NaN;if(t==="Infinity")return Number.POSITIVE_INFINITY;if(t==="-Infinity")return Number.NEGATIVE_INFINITY;if(t===""||typeof t=="string"&&t.trim().length!==t.length||typeof t!="string"&&typeof t!="number")break;const a=Number(t);if(Number.isNaN(a)||!Number.isFinite(a))break;return n==st.FLOAT&&a1(a),a;case st.INT32:case st.FIXED32:case st.SFIXED32:case st.SINT32:case st.UINT32:let l;if(typeof t=="number"?l=t:typeof t=="string"&&t.length>0&&t.trim().length===t.length&&(l=Number(t)),l===void 0)break;return n==st.UINT32||n==st.FIXED32?Gm(l):Hf(l),l;case st.INT64:case st.SFIXED64:case st.SINT64:if(typeof t!="number"&&typeof t!="string")break;const c=se.parse(t);return e?c.toString():c;case st.FIXED64:case st.UINT64:if(typeof t!="number"&&typeof t!="string")break;const d=se.uParse(t);return e?d.toString():d;case st.BOOL:if(typeof t!="boolean")break;return t;case st.STRING:if(typeof t!="string")break;try{encodeURIComponent(t)}catch{throw new Error("invalid UTF8")}return t;case st.BYTES:if(t==="")return new Uint8Array(0);if(typeof t!="string")break;return Uy.dec(t)}throw new Error}function Dm(n,t,e,i){if(t===null)return n.typeName=="google.protobuf.NullValue"?0:i?n.values[0].no:td;switch(typeof t){case"number":if(Number.isInteger(t))return t;break;case"string":const a=n.findName(t);if(a!==void 0)return a.no;if(e)return Vf;break}throw new Error(`cannot decode enum ${n.typeName} from JSON: ${fr(t)}`)}function UN(n){return n.repeated||n.kind=="map"?!0:!(n.oneof||n.kind=="message"||n.opt||n.req)}function hb(n,t,e){if(n.kind=="map"){me(typeof t=="object"&&t!=null);const i={},a=Object.entries(t);switch(n.V.kind){case"scalar":for(const[c,d]of a)i[c.toString()]=jf(n.V.T,d);break;case"message":for(const[c,d]of a)i[c.toString()]=d.toJson(e);break;case"enum":const l=n.V.T;for(const[c,d]of a)i[c.toString()]=km(l,d,e.enumAsInteger);break}return e.emitDefaultValues||a.length>0?i:void 0}if(n.repeated){me(Array.isArray(t));const i=[];switch(n.kind){case"scalar":for(let a=0;a<t.length;a++)i.push(jf(n.T,t[a]));break;case"enum":for(let a=0;a<t.length;a++)i.push(km(n.T,t[a],e.enumAsInteger));break;case"message":for(let a=0;a<t.length;a++)i.push(t[a].toJson(e));break}return e.emitDefaultValues||i.length>0?i:void 0}switch(n.kind){case"scalar":return jf(n.T,t);case"enum":return km(n.T,t,e.enumAsInteger);case"message":return v1(n.T,t).toJson(e)}}function km(n,t,e){var i;if(me(typeof t=="number"),n.typeName=="google.protobuf.NullValue")return null;if(e)return t;const a=n.findNumber(t);return(i=a==null?void 0:a.name)!==null&&i!==void 0?i:t}function jf(n,t){switch(n){case st.INT32:case st.SFIXED32:case st.SINT32:case st.FIXED32:case st.UINT32:return me(typeof t=="number"),t;case st.FLOAT:case st.DOUBLE:return me(typeof t=="number"),Number.isNaN(t)?"NaN":t===Number.POSITIVE_INFINITY?"Infinity":t===Number.NEGATIVE_INFINITY?"-Infinity":t;case st.STRING:return me(typeof t=="string"),t;case st.BOOL:return me(typeof t=="boolean"),t;case st.UINT64:case st.FIXED64:case st.INT64:case st.SFIXED64:case st.SINT64:return me(typeof t=="bigint"||typeof t=="string"||typeof t=="number"),t.toString();case st.BYTES:return me(t instanceof Uint8Array),Uy.enc(t)}}const Io=Symbol("@bufbuild/protobuf/unknown-fields"),gb={readUnknownFields:!0,readerFactory:n=>new DN(n)},mb={writeUnknownFields:!0,writerFactory:()=>new CN};function qN(n){return n?Object.assign(Object.assign({},gb),n):gb}function PN(n){return n?Object.assign(Object.assign({},mb),n):mb}function JN(){return{makeReadOptions:qN,makeWriteOptions:PN,listUnknownFields(n){var t;return(t=n[Io])!==null&&t!==void 0?t:[]},discardUnknownFields(n){delete n[Io]},writeUnknownFields(n,t){const i=n[Io];if(i)for(const a of i)t.tag(a.no,a.wireType).raw(a.data)},onUnknownField(n,t,e,i){const a=n;Array.isArray(a[Io])||(a[Io]=[]),a[Io].push({no:t,wireType:e,data:i})},readMessage(n,t,e,i,a){const l=n.getType(),c=a?t.len:t.pos+e;let d,h;for(;t.pos<c&&([d,h]=t.tag(),!(a===!0&&h==we.EndGroup));){const g=l.fields.find(d);if(!g){const y=t.skip(h,d);i.readUnknownFields&&this.onUnknownField(n,d,h,y);continue}yb(n,t,g,h,i)}if(a&&(h!=we.EndGroup||d!==e))throw new Error("invalid end group tag")},readField:yb,writeMessage(n,t,e){const i=n.getType();for(const a of i.fields.byNumber()){if(!p1(a,n)){if(a.req)throw new Error(`cannot encode field ${i.typeName}.${a.name} to binary: required field not set`);continue}const l=a.oneof?n[a.oneof.localName].value:n[a.localName];pb(a,l,t,e)}return e.writeUnknownFields&&this.writeUnknownFields(n,t),t},writeField(n,t,e,i){t!==void 0&&pb(n,t,e,i)}}}function yb(n,t,e,i,a){let{repeated:l,localName:c}=e;switch(e.oneof&&(n=n[e.oneof.localName],n.case!=c&&delete n.value,n.case=c,c="value"),e.kind){case"scalar":case"enum":const d=e.kind=="enum"?st.INT32:e.T;let h=ed;if(e.kind=="scalar"&&e.L>0&&(h=$N),l){let v=n[c];if(i==we.LengthDelimited&&d!=st.STRING&&d!=st.BYTES){let x=t.uint32()+t.pos;for(;t.pos<x;)v.push(h(t,d))}else v.push(h(t,d))}else n[c]=h(t,d);break;case"message":const g=e.T;l?n[c].push(Yf(t,new g,a,e)):ss(n[c])?Yf(t,n[c],a,e):(n[c]=Yf(t,new g,a,e),g.fieldWrapper&&!e.oneof&&!e.repeated&&(n[c]=g.fieldWrapper.unwrapField(n[c])));break;case"map":let[y,w]=HN(e,t,a);n[c][y]=w;break}}function Yf(n,t,e,i){const a=t.getType().runtime.bin,l=i==null?void 0:i.delimited;return a.readMessage(t,n,l?i.no:n.uint32(),e,l),t}function HN(n,t,e){const i=t.uint32(),a=t.pos+i;let l,c;for(;t.pos<a;){const[d]=t.tag();switch(d){case 1:l=ed(t,n.K);break;case 2:switch(n.V.kind){case"scalar":c=ed(t,n.V.T);break;case"enum":c=t.int32();break;case"message":c=Yf(t,new n.V.T,e,void 0);break}break}}if(l===void 0&&(l=Vo(n.K,ra.BIGINT)),typeof l!="string"&&typeof l!="number"&&(l=l.toString()),c===void 0)switch(n.V.kind){case"scalar":c=Vo(n.V.T,ra.BIGINT);break;case"enum":c=n.V.T.values[0].no;break;case"message":c=new n.V.T;break}return[l,c]}function $N(n,t){const e=ed(n,t);return typeof e=="bigint"?e.toString():e}function ed(n,t){switch(t){case st.STRING:return n.string();case st.BOOL:return n.bool();case st.DOUBLE:return n.double();case st.FLOAT:return n.float();case st.INT32:return n.int32();case st.INT64:return n.int64();case st.UINT64:return n.uint64();case st.FIXED64:return n.fixed64();case st.BYTES:return n.bytes();case st.FIXED32:return n.fixed32();case st.SFIXED32:return n.sfixed32();case st.SFIXED64:return n.sfixed64();case st.SINT64:return n.sint64();case st.UINT32:return n.uint32();case st.SINT32:return n.sint32()}}function pb(n,t,e,i){me(t!==void 0);const a=n.repeated;switch(n.kind){case"scalar":case"enum":let l=n.kind=="enum"?st.INT32:n.T;if(a)if(me(Array.isArray(t)),n.packed)jN(e,l,n.no,t);else for(const c of t)Au(e,l,n.no,c);else Au(e,l,n.no,t);break;case"message":if(a){me(Array.isArray(t));for(const c of t)vb(e,i,n,c)}else vb(e,i,n,t);break;case"map":me(typeof t=="object"&&t!=null);for(const[c,d]of Object.entries(t))VN(e,i,n,c,d);break}}function VN(n,t,e,i,a){n.tag(e.no,we.LengthDelimited),n.fork();let l=i;switch(e.K){case st.INT32:case st.FIXED32:case st.UINT32:case st.SFIXED32:case st.SINT32:l=Number.parseInt(i);break;case st.BOOL:me(i=="true"||i=="false"),l=i=="true";break}switch(Au(n,e.K,1,l),e.V.kind){case"scalar":Au(n,e.V.T,2,a);break;case"enum":Au(n,st.INT32,2,a);break;case"message":me(a!==void 0),n.tag(2,we.LengthDelimited).bytes(a.toBinary(t));break}n.join()}function vb(n,t,e,i){const a=v1(e.T,i);e.delimited?n.tag(e.no,we.StartGroup).raw(a.toBinary(t)).tag(e.no,we.EndGroup):n.tag(e.no,we.LengthDelimited).bytes(a.toBinary(t))}function Au(n,t,e,i){me(i!==void 0);let[a,l]=w1(t);n.tag(e,a)[l](i)}function jN(n,t,e,i){if(!i.length)return;n.tag(e,we.LengthDelimited).fork();let[,a]=w1(t);for(let l=0;l<i.length;l++)n[a](i[l]);n.join()}function w1(n){let t=we.Varint;switch(n){case st.BYTES:case st.STRING:t=we.LengthDelimited;break;case st.DOUBLE:case st.FIXED64:case st.SFIXED64:t=we.Bit64;break;case st.FIXED32:case st.SFIXED32:case st.FLOAT:t=we.Bit32;break}const e=st[n].toLowerCase();return[t,e]}function YN(){return{setEnumType:l1,initPartial(n,t){if(n===void 0)return;const e=t.getType();for(const i of e.fields.byMember()){const a=i.localName,l=t,c=n;if(c[a]!=null)switch(i.kind){case"oneof":const d=c[a].case;if(d===void 0)continue;const h=i.findField(d);let g=c[a].value;h&&h.kind=="message"&&!ss(g,h.T)?g=new h.T(g):h&&h.kind==="scalar"&&h.T===st.BYTES&&(g=mu(g)),l[a]={case:d,value:g};break;case"scalar":case"enum":let y=c[a];i.T===st.BYTES&&(y=i.repeated?y.map(mu):mu(y)),l[a]=y;break;case"map":switch(i.V.kind){case"scalar":case"enum":if(i.V.T===st.BYTES)for(const[b,x]of Object.entries(c[a]))l[a][b]=mu(x);else Object.assign(l[a],c[a]);break;case"message":const v=i.V.T;for(const b of Object.keys(c[a])){let x=c[a][b];v.fieldWrapper||(x=new v(x)),l[a][b]=x}break}break;case"message":const w=i.T;if(i.repeated)l[a]=c[a].map(v=>ss(v,w)?v:new w(v));else{const v=c[a];w.fieldWrapper?w.typeName==="google.protobuf.BytesValue"?l[a]=mu(v):l[a]=v:l[a]=ss(v,w)?v:new w(v)}break}}},equals(n,t,e){return t===e?!0:!t||!e?!1:n.fields.byMember().every(i=>{const a=t[i.localName],l=e[i.localName];if(i.repeated){if(a.length!==l.length)return!1;switch(i.kind){case"message":return a.every((c,d)=>i.T.equals(c,l[d]));case"scalar":return a.every((c,d)=>Ys(i.T,c,l[d]));case"enum":return a.every((c,d)=>Ys(st.INT32,c,l[d]))}throw new Error(`repeated cannot contain ${i.kind}`)}switch(i.kind){case"message":let c=a,d=l;return i.T.fieldWrapper&&(c!==void 0&&!ss(c)&&(c=i.T.fieldWrapper.wrapField(c)),d!==void 0&&!ss(d)&&(d=i.T.fieldWrapper.wrapField(d))),i.T.equals(c,d);case"enum":return Ys(st.INT32,a,l);case"scalar":return Ys(i.T,a,l);case"oneof":if(a.case!==l.case)return!1;const h=i.findField(a.case);if(h===void 0)return!0;switch(h.kind){case"message":return h.T.equals(a.value,l.value);case"enum":return Ys(st.INT32,a.value,l.value);case"scalar":return Ys(h.T,a.value,l.value)}throw new Error(`oneof cannot contain ${h.kind}`);case"map":const g=Object.keys(a).concat(Object.keys(l));switch(i.V.kind){case"message":const y=i.V.T;return g.every(v=>y.equals(a[v],l[v]));case"enum":return g.every(v=>Ys(st.INT32,a[v],l[v]));case"scalar":const w=i.V.T;return g.every(v=>Ys(w,a[v],l[v]))}break}})},clone(n){const t=n.getType(),e=new t,i=e;for(const a of t.fields.byMember()){const l=n[a.localName];let c;if(a.repeated)c=l.map(Nf);else if(a.kind=="map"){c=i[a.localName];for(const[d,h]of Object.entries(l))c[d]=Nf(h)}else a.kind=="oneof"?c=a.findField(l.case)?{case:l.case,value:Nf(l.value)}:{case:void 0}:c=Nf(l);i[a.localName]=c}for(const a of t.runtime.bin.listUnknownFields(n))t.runtime.bin.onUnknownField(i,a.no,a.wireType,a.data);return e}}}function Nf(n){if(n===void 0)return n;if(ss(n))return n.clone();if(n instanceof Uint8Array){const t=new Uint8Array(n.byteLength);return t.set(n),t}return n}function mu(n){return n instanceof Uint8Array?n:new Uint8Array(n)}function GN(n,t,e){return{syntax:n,json:LN(),bin:JN(),util:Object.assign(Object.assign({},YN()),{newFieldList:t,initFields:e}),makeMessageType(i,a,l){return SN(this,i,a,l)},makeEnum:bN,makeEnumType:u1,getEnumType:wN,makeExtension(i,a,l){return kN(this,i,a,l)}}}class KN{constructor(t,e){this._fields=t,this._normalizer=e}findJsonName(t){if(!this.jsonNames){const e={};for(const i of this.list())e[i.jsonName]=e[i.name]=i;this.jsonNames=e}return this.jsonNames[t]}find(t){if(!this.numbers){const e={};for(const i of this.list())e[i.no]=i;this.numbers=e}return this.numbers[t]}list(){return this.all||(this.all=this._normalizer(this._fields)),this.all}byNumber(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort((t,e)=>t.no-e.no)),this.numbersAsc}byMember(){if(!this.members){this.members=[];const t=this.members;let e;for(const i of this.list())i.oneof?i.oneof!==e&&(e=i.oneof,t.push(e)):t.push(i)}return this.members}}function b1(n,t){const e=S1(n);return t?e:t2(WN(e))}function XN(n){return b1(n,!1)}const FN=S1;function S1(n){let t=!1;const e=[];for(let i=0;i<n.length;i++){let a=n.charAt(i);switch(a){case"_":t=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":e.push(a),t=!1;break;default:t&&(t=!1,a=a.toUpperCase()),e.push(a);break}}return e.join("")}const ZN=new Set(["constructor","toString","toJSON","valueOf"]),QN=new Set(["getType","clone","equals","fromBinary","fromJson","fromJsonString","toBinary","toJson","toJsonString","toObject"]),x1=n=>`${n}$`,WN=n=>QN.has(n)?x1(n):n,t2=n=>ZN.has(n)?x1(n):n;class e2{constructor(t){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.req=!1,this.default=void 0,this.fields=[],this.name=t,this.localName=XN(t)}addField(t){me(t.oneof===this,`field ${t.name} not one of ${this.name}`),this.fields.push(t)}findField(t){if(!this._lookup){this._lookup=Object.create(null);for(let e=0;e<this.fields.length;e++)this._lookup[this.fields[e].localName]=this.fields[e]}return this._lookup[t]}}function n2(n,t){var e,i,a,l,c,d;const h=[];let g;for(const y of typeof n=="function"?n():n){const w=y;if(w.localName=b1(y.name,y.oneof!==void 0),w.jsonName=(e=y.jsonName)!==null&&e!==void 0?e:FN(y.name),w.repeated=(i=y.repeated)!==null&&i!==void 0?i:!1,y.kind=="scalar"&&(w.L=(a=y.L)!==null&&a!==void 0?a:ra.BIGINT),w.delimited=(l=y.delimited)!==null&&l!==void 0?l:!1,w.req=(c=y.req)!==null&&c!==void 0?c:!1,w.opt=(d=y.opt)!==null&&d!==void 0?d:!1,y.packed===void 0&&(w.packed=y.kind=="enum"||y.kind=="scalar"&&y.T!=st.BYTES&&y.T!=st.STRING),y.oneof!==void 0){const v=typeof y.oneof=="string"?y.oneof:y.oneof.name;(!g||g.name!=v)&&(g=new e2(v)),w.oneof=g,g.addField(w)}h.push(w)}return h}const T=GN("proto3",n=>new KN(n,t=>n2(t)),n=>{for(const t of n.getType().fields.byMember()){if(t.opt)continue;const e=t.localName,i=n;if(t.repeated){i[e]=[];continue}switch(t.kind){case"oneof":i[e]={case:void 0};break;case"enum":i[e]=0;break;case"map":i[e]={};break;case"scalar":i[e]=Vo(t.T,t.L);break}}});var Ge;(function(n){n[n.Unary=0]="Unary",n[n.ServerStreaming=1]="ServerStreaming",n[n.ClientStreaming=2]="ClientStreaming",n[n.BiDiStreaming=3]="BiDiStreaming"})(Ge||(Ge={}));var wb;(function(n){n[n.NoSideEffects=1]="NoSideEffects",n[n.Idempotent=2]="Idempotent"})(wb||(wb={}));class Le extends yt{constructor(t){super(),this.seconds=se.zero,this.nanos=0,T.util.initPartial(t,this)}fromJson(t,e){if(typeof t!="string")throw new Error(`cannot decode google.protobuf.Timestamp from JSON: ${T.json.debug(t)}`);const i=t.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!i)throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");const a=Date.parse(i[1]+"-"+i[2]+"-"+i[3]+"T"+i[4]+":"+i[5]+":"+i[6]+(i[8]?i[8]:"Z"));if(Number.isNaN(a))throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");if(a<Date.parse("0001-01-01T00:00:00Z")||a>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot decode message google.protobuf.Timestamp from JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");return this.seconds=se.parse(a/1e3),this.nanos=0,i[7]&&(this.nanos=parseInt("1"+i[7]+"0".repeat(9-i[7].length))-1e9),this}toJson(t){const e=Number(this.seconds)*1e3;if(e<Date.parse("0001-01-01T00:00:00Z")||e>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot encode google.protobuf.Timestamp to JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");if(this.nanos<0)throw new Error("cannot encode google.protobuf.Timestamp to JSON: nanos must not be negative");let i="Z";if(this.nanos>0){const a=(this.nanos+1e9).toString().substring(1);a.substring(3)==="000000"?i="."+a.substring(0,3)+"Z":a.substring(6)==="000"?i="."+a.substring(0,6)+"Z":i="."+a+"Z"}return new Date(e).toISOString().replace(".000Z",i)}toDate(){return new Date(Number(this.seconds)*1e3+Math.ceil(this.nanos/1e6))}static now(){return Le.fromDate(new Date)}static fromDate(t){const e=t.getTime();return new Le({seconds:se.parse(Math.floor(e/1e3)),nanos:e%1e3*1e6})}static fromBinary(t,e){return new Le().fromBinary(t,e)}static fromJson(t,e){return new Le().fromJson(t,e)}static fromJsonString(t,e){return new Le().fromJsonString(t,e)}static equals(t,e){return T.util.equals(Le,t,e)}}Le.runtime=T;Le.typeName="google.protobuf.Timestamp";Le.fields=T.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);class as extends yt{constructor(t){super(),this.seconds=se.zero,this.nanos=0,T.util.initPartial(t,this)}fromJson(t,e){if(typeof t!="string")throw new Error(`cannot decode google.protobuf.Duration from JSON: ${T.json.debug(t)}`);const i=t.match(/^(-?[0-9]+)(?:\.([0-9]+))?s/);if(i===null)throw new Error(`cannot decode google.protobuf.Duration from JSON: ${T.json.debug(t)}`);const a=Number(i[1]);if(a>315576e6||a<-315576e6)throw new Error(`cannot decode google.protobuf.Duration from JSON: ${T.json.debug(t)}`);if(this.seconds=se.parse(a),typeof i[2]=="string"){const l=i[2]+"0".repeat(9-i[2].length);this.nanos=parseInt(l),(a<0||Object.is(a,-0))&&(this.nanos=-this.nanos)}return this}toJson(t){if(Number(this.seconds)>315576e6||Number(this.seconds)<-315576e6)throw new Error("cannot encode google.protobuf.Duration to JSON: value out of range");let e=this.seconds.toString();if(this.nanos!==0){let i=Math.abs(this.nanos).toString();i="0".repeat(9-i.length)+i,i.substring(3)==="000000"?i=i.substring(0,3):i.substring(6)==="000"&&(i=i.substring(0,6)),e+="."+i,this.nanos<0&&Number(this.seconds)==0&&(e="-"+e)}return e+"s"}static fromBinary(t,e){return new as().fromBinary(t,e)}static fromJson(t,e){return new as().fromJson(t,e)}static fromJsonString(t,e){return new as().fromJsonString(t,e)}static equals(t,e){return T.util.equals(as,t,e)}}as.runtime=T;as.typeName="google.protobuf.Duration";as.fields=T.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);class hr extends yt{constructor(t){super(),this.typeUrl="",this.value=new Uint8Array(0),T.util.initPartial(t,this)}toJson(t){var e;if(this.typeUrl==="")return{};const i=this.typeUrlToName(this.typeUrl),a=(e=t==null?void 0:t.typeRegistry)===null||e===void 0?void 0:e.findMessage(i);if(!a)throw new Error(`cannot encode message google.protobuf.Any to JSON: "${this.typeUrl}" is not in the type registry`);let c=a.fromBinary(this.value).toJson(t);return(i.startsWith("google.protobuf.")||c===null||Array.isArray(c)||typeof c!="object")&&(c={value:c}),c["@type"]=this.typeUrl,c}fromJson(t,e){var i;if(t===null||Array.isArray(t)||typeof t!="object")throw new Error(`cannot decode message google.protobuf.Any from JSON: expected object but got ${t===null?"null":Array.isArray(t)?"array":typeof t}`);if(Object.keys(t).length==0)return this;const a=t["@type"];if(typeof a!="string"||a=="")throw new Error('cannot decode message google.protobuf.Any from JSON: "@type" is empty');const l=this.typeUrlToName(a),c=(i=e==null?void 0:e.typeRegistry)===null||i===void 0?void 0:i.findMessage(l);if(!c)throw new Error(`cannot decode message google.protobuf.Any from JSON: ${a} is not in the type registry`);let d;if(l.startsWith("google.protobuf.")&&Object.prototype.hasOwnProperty.call(t,"value"))d=c.fromJson(t.value,e);else{const h=Object.assign({},t);delete h["@type"],d=c.fromJson(h,e)}return this.packFrom(d),this}packFrom(t){this.value=t.toBinary(),this.typeUrl=this.typeNameToUrl(t.getType().typeName)}unpackTo(t){return this.is(t.getType())?(t.fromBinary(this.value),!0):!1}unpack(t){if(this.typeUrl==="")return;const e=t.findMessage(this.typeUrlToName(this.typeUrl));if(e)return e.fromBinary(this.value)}is(t){if(this.typeUrl==="")return!1;const e=this.typeUrlToName(this.typeUrl);let i="";return typeof t=="string"?i=t:i=t.typeName,e===i}typeNameToUrl(t){return`type.googleapis.com/${t}`}typeUrlToName(t){if(!t.length)throw new Error(`invalid type url: ${t}`);const e=t.lastIndexOf("/"),i=e>=0?t.substring(e+1):t;if(!i.length)throw new Error(`invalid type url: ${t}`);return i}static pack(t){const e=new hr;return e.packFrom(t),e}static fromBinary(t,e){return new hr().fromBinary(t,e)}static fromJson(t,e){return new hr().fromJson(t,e)}static fromJsonString(t,e){return new hr().fromJsonString(t,e)}static equals(t,e){return T.util.equals(hr,t,e)}}hr.runtime=T;hr.typeName="google.protobuf.Any";hr.fields=T.util.newFieldList(()=>[{no:1,name:"type_url",kind:"scalar",T:9},{no:2,name:"value",kind:"scalar",T:12}]);class gr extends yt{constructor(t){super(),this.value=0,T.util.initPartial(t,this)}toJson(t){return T.json.writeScalar(st.DOUBLE,this.value,!0)}fromJson(t,e){try{this.value=T.json.readScalar(st.DOUBLE,t)}catch(i){let a='cannot decode message google.protobuf.DoubleValue from JSON"';throw i instanceof Error&&i.message.length>0&&(a+=`: ${i.message}`),new Error(a)}return this}static fromBinary(t,e){return new gr().fromBinary(t,e)}static fromJson(t,e){return new gr().fromJson(t,e)}static fromJsonString(t,e){return new gr().fromJsonString(t,e)}static equals(t,e){return T.util.equals(gr,t,e)}}gr.runtime=T;gr.typeName="google.protobuf.DoubleValue";gr.fields=T.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:1}]);gr.fieldWrapper={wrapField(n){return new gr({value:n})},unwrapField(n){return n.value}};class mr extends yt{constructor(t){super(),this.value=0,T.util.initPartial(t,this)}toJson(t){return T.json.writeScalar(st.FLOAT,this.value,!0)}fromJson(t,e){try{this.value=T.json.readScalar(st.FLOAT,t)}catch(i){let a='cannot decode message google.protobuf.FloatValue from JSON"';throw i instanceof Error&&i.message.length>0&&(a+=`: ${i.message}`),new Error(a)}return this}static fromBinary(t,e){return new mr().fromBinary(t,e)}static fromJson(t,e){return new mr().fromJson(t,e)}static fromJsonString(t,e){return new mr().fromJsonString(t,e)}static equals(t,e){return T.util.equals(mr,t,e)}}mr.runtime=T;mr.typeName="google.protobuf.FloatValue";mr.fields=T.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:2}]);mr.fieldWrapper={wrapField(n){return new mr({value:n})},unwrapField(n){return n.value}};class yr extends yt{constructor(t){super(),this.value=se.zero,T.util.initPartial(t,this)}toJson(t){return T.json.writeScalar(st.INT64,this.value,!0)}fromJson(t,e){try{this.value=T.json.readScalar(st.INT64,t)}catch(i){let a='cannot decode message google.protobuf.Int64Value from JSON"';throw i instanceof Error&&i.message.length>0&&(a+=`: ${i.message}`),new Error(a)}return this}static fromBinary(t,e){return new yr().fromBinary(t,e)}static fromJson(t,e){return new yr().fromJson(t,e)}static fromJsonString(t,e){return new yr().fromJsonString(t,e)}static equals(t,e){return T.util.equals(yr,t,e)}}yr.runtime=T;yr.typeName="google.protobuf.Int64Value";yr.fields=T.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:3}]);yr.fieldWrapper={wrapField(n){return new yr({value:n})},unwrapField(n){return n.value}};class pr extends yt{constructor(t){super(),this.value=se.zero,T.util.initPartial(t,this)}toJson(t){return T.json.writeScalar(st.UINT64,this.value,!0)}fromJson(t,e){try{this.value=T.json.readScalar(st.UINT64,t)}catch(i){let a='cannot decode message google.protobuf.UInt64Value from JSON"';throw i instanceof Error&&i.message.length>0&&(a+=`: ${i.message}`),new Error(a)}return this}static fromBinary(t,e){return new pr().fromBinary(t,e)}static fromJson(t,e){return new pr().fromJson(t,e)}static fromJsonString(t,e){return new pr().fromJsonString(t,e)}static equals(t,e){return T.util.equals(pr,t,e)}}pr.runtime=T;pr.typeName="google.protobuf.UInt64Value";pr.fields=T.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:4}]);pr.fieldWrapper={wrapField(n){return new pr({value:n})},unwrapField(n){return n.value}};class mn extends yt{constructor(t){super(),this.value=0,T.util.initPartial(t,this)}toJson(t){return T.json.writeScalar(st.INT32,this.value,!0)}fromJson(t,e){try{this.value=T.json.readScalar(st.INT32,t)}catch(i){let a='cannot decode message google.protobuf.Int32Value from JSON"';throw i instanceof Error&&i.message.length>0&&(a+=`: ${i.message}`),new Error(a)}return this}static fromBinary(t,e){return new mn().fromBinary(t,e)}static fromJson(t,e){return new mn().fromJson(t,e)}static fromJsonString(t,e){return new mn().fromJsonString(t,e)}static equals(t,e){return T.util.equals(mn,t,e)}}mn.runtime=T;mn.typeName="google.protobuf.Int32Value";mn.fields=T.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:5}]);mn.fieldWrapper={wrapField(n){return new mn({value:n})},unwrapField(n){return n.value}};class vr extends yt{constructor(t){super(),this.value=0,T.util.initPartial(t,this)}toJson(t){return T.json.writeScalar(st.UINT32,this.value,!0)}fromJson(t,e){try{this.value=T.json.readScalar(st.UINT32,t)}catch(i){let a='cannot decode message google.protobuf.UInt32Value from JSON"';throw i instanceof Error&&i.message.length>0&&(a+=`: ${i.message}`),new Error(a)}return this}static fromBinary(t,e){return new vr().fromBinary(t,e)}static fromJson(t,e){return new vr().fromJson(t,e)}static fromJsonString(t,e){return new vr().fromJsonString(t,e)}static equals(t,e){return T.util.equals(vr,t,e)}}vr.runtime=T;vr.typeName="google.protobuf.UInt32Value";vr.fields=T.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:13}]);vr.fieldWrapper={wrapField(n){return new vr({value:n})},unwrapField(n){return n.value}};class wr extends yt{constructor(t){super(),this.value=!1,T.util.initPartial(t,this)}toJson(t){return T.json.writeScalar(st.BOOL,this.value,!0)}fromJson(t,e){try{this.value=T.json.readScalar(st.BOOL,t)}catch(i){let a='cannot decode message google.protobuf.BoolValue from JSON"';throw i instanceof Error&&i.message.length>0&&(a+=`: ${i.message}`),new Error(a)}return this}static fromBinary(t,e){return new wr().fromBinary(t,e)}static fromJson(t,e){return new wr().fromJson(t,e)}static fromJsonString(t,e){return new wr().fromJsonString(t,e)}static equals(t,e){return T.util.equals(wr,t,e)}}wr.runtime=T;wr.typeName="google.protobuf.BoolValue";wr.fields=T.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:8}]);wr.fieldWrapper={wrapField(n){return new wr({value:n})},unwrapField(n){return n.value}};class en extends yt{constructor(t){super(),this.value="",T.util.initPartial(t,this)}toJson(t){return T.json.writeScalar(st.STRING,this.value,!0)}fromJson(t,e){try{this.value=T.json.readScalar(st.STRING,t)}catch(i){let a='cannot decode message google.protobuf.StringValue from JSON"';throw i instanceof Error&&i.message.length>0&&(a+=`: ${i.message}`),new Error(a)}return this}static fromBinary(t,e){return new en().fromBinary(t,e)}static fromJson(t,e){return new en().fromJson(t,e)}static fromJsonString(t,e){return new en().fromJsonString(t,e)}static equals(t,e){return T.util.equals(en,t,e)}}en.runtime=T;en.typeName="google.protobuf.StringValue";en.fields=T.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:9}]);en.fieldWrapper={wrapField(n){return new en({value:n})},unwrapField(n){return n.value}};class br extends yt{constructor(t){super(),this.value=new Uint8Array(0),T.util.initPartial(t,this)}toJson(t){return T.json.writeScalar(st.BYTES,this.value,!0)}fromJson(t,e){try{this.value=T.json.readScalar(st.BYTES,t)}catch(i){let a='cannot decode message google.protobuf.BytesValue from JSON"';throw i instanceof Error&&i.message.length>0&&(a+=`: ${i.message}`),new Error(a)}return this}static fromBinary(t,e){return new br().fromBinary(t,e)}static fromJson(t,e){return new br().fromJson(t,e)}static fromJsonString(t,e){return new br().fromJsonString(t,e)}static equals(t,e){return T.util.equals(br,t,e)}}br.runtime=T;br.typeName="google.protobuf.BytesValue";br.fields=T.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:12}]);br.fieldWrapper={wrapField(n){return new br({value:n})},unwrapField(n){return n.value}};function r2(n,t,e){try{const i=Uy.dec(n);return t?t.fromBinary(i,e):i}catch(i){throw Kt.from(i,qt.DataLoss)}}function i2(n,t){const e={};for(const[i,a]of Object.entries(n.methods)){const l=t(Object.assign(Object.assign({},a),{localName:i,service:n}));l!=null&&(e[i]=l)}return e}const bb=1;function Sb(n){let t,e=new Uint8Array(0);function i(a){const l=new Uint8Array(e.length+a.length);l.set(e),l.set(a,e.length),e=l}return new ReadableStream({start(){t=n.getReader()},async pull(a){let l;for(;;){if(l===void 0&&e.byteLength>=5){let h=0;for(let g=1;g<5;g++)h=(h<<8)+e[g];l={flags:e[0],length:h}}if(l!==void 0&&e.byteLength>=l.length+5)break;const d=await t.read();if(d.done)break;i(d.value)}if(l===void 0){if(e.byteLength==0){a.close();return}a.error(new Kt("premature end of stream",qt.DataLoss));return}const c=e.subarray(5,5+l.length);e=e.subarray(5+l.length),a.enqueue({flags:l.flags,data:c})}})}function xb(n,t){const e=new Uint8Array(t.length+5);e.set(t,5);const i=new DataView(e.buffer,e.byteOffset,e.byteLength);return i.setUint8(0,n),i.setUint32(1,t.length),e}var s2=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=n[Symbol.asyncIterator],e;return t?t.call(n):(n=typeof __values=="function"?__values(n):n[Symbol.iterator](),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e);function i(l){e[l]=n[l]&&function(c){return new Promise(function(d,h){c=n[l](c),a(d,h,c.done,c.value)})}}function a(l,c,d,h){Promise.resolve(h).then(function(g){l({value:g,done:d})},c)}},Iu=function(n){return this instanceof Iu?(this.v=n,this):new Iu(n)},a2=function(n,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=e.apply(n,t||[]),a,l=[];return a={},d("next"),d("throw"),d("return",c),a[Symbol.asyncIterator]=function(){return this},a;function c(b){return function(x){return Promise.resolve(x).then(b,w)}}function d(b,x){i[b]&&(a[b]=function(A){return new Promise(function(C,k){l.push([b,A,C,k])>1||h(b,A)})},x&&(a[b]=x(a[b])))}function h(b,x){try{g(i[b](x))}catch(A){v(l[0][3],A)}}function g(b){b.value instanceof Iu?Promise.resolve(b.value.v).then(y,w):v(l[0][2],b)}function y(b){h("next",b)}function w(b){h("throw",b)}function v(b,x){b(x),l.shift(),l.length&&h(l[0][0],l[0][1])}},o2=function(n){var t,e;return t={},i("next"),i("throw",function(a){throw a}),i("return"),t[Symbol.iterator]=function(){return this},t;function i(a,l){t[a]=n[a]?function(c){return(e=!e)?{value:Iu(n[a](c)),done:!1}:l?l(c):c}:l}};function l2(n){return a2(this,arguments,function*(){yield Iu(yield*o2(s2(n)))})}var T1=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=n[Symbol.asyncIterator],e;return t?t.call(n):(n=typeof __values=="function"?__values(n):n[Symbol.iterator](),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e);function i(l){e[l]=n[l]&&function(c){return new Promise(function(d,h){c=n[l](c),a(d,h,c.done,c.value)})}}function a(l,c,d,h){Promise.resolve(h).then(function(g){l({value:g,done:d})},c)}},jo=function(n){return this instanceof jo?(this.v=n,this):new jo(n)},u2=function(n){var t,e;return t={},i("next"),i("throw",function(a){throw a}),i("return"),t[Symbol.iterator]=function(){return this},t;function i(a,l){t[a]=n[a]?function(c){return(e=!e)?{value:jo(n[a](c)),done:!1}:l?l(c):c}:l}},c2=function(n,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=e.apply(n,t||[]),a,l=[];return a={},d("next"),d("throw"),d("return",c),a[Symbol.asyncIterator]=function(){return this},a;function c(b){return function(x){return Promise.resolve(x).then(b,w)}}function d(b,x){i[b]&&(a[b]=function(A){return new Promise(function(C,k){l.push([b,A,C,k])>1||h(b,A)})},x&&(a[b]=x(a[b])))}function h(b,x){try{g(i[b](x))}catch(A){v(l[0][3],A)}}function g(b){b.value instanceof jo?Promise.resolve(b.value.v).then(y,w):v(l[0][2],b)}function y(b){h("next",b)}function w(b){h("throw",b)}function v(b,x){b(x),l.shift(),l.length&&h(l[0][0],l[0][1])}};function f2(n,t){return i2(n,e=>{switch(e.kind){case Ge.Unary:return d2(t,n,e);case Ge.ServerStreaming:return h2(t,n,e);case Ge.ClientStreaming:return g2(t,n,e);case Ge.BiDiStreaming:return m2(t,n,e);default:return null}})}function d2(n,t,e){return async function(i,a){var l,c;const d=await n.unary(t,e,a==null?void 0:a.signal,a==null?void 0:a.timeoutMs,a==null?void 0:a.headers,i,a==null?void 0:a.contextValues);return(l=a==null?void 0:a.onHeader)===null||l===void 0||l.call(a,d.header),(c=a==null?void 0:a.onTrailer)===null||c===void 0||c.call(a,d.trailer),d.message}}function h2(n,t,e){return function(i,a){return A1(n.stream(t,e,a==null?void 0:a.signal,a==null?void 0:a.timeoutMs,a==null?void 0:a.headers,l2([i]),a==null?void 0:a.contextValues),a)}}function g2(n,t,e){return async function(i,a){var l,c,d,h,g,y;const w=await n.stream(t,e,a==null?void 0:a.signal,a==null?void 0:a.timeoutMs,a==null?void 0:a.headers,i,a==null?void 0:a.contextValues);(g=a==null?void 0:a.onHeader)===null||g===void 0||g.call(a,w.header);let v,b=0;try{for(var x=!0,A=T1(w.message),C;C=await A.next(),l=C.done,!l;x=!0)h=C.value,x=!1,v=h,b++}catch(k){c={error:k}}finally{try{!x&&!l&&(d=A.return)&&await d.call(A)}finally{if(c)throw c.error}}if(!v)throw new Kt("protocol error: missing response message",qt.Unimplemented);if(b>1)throw new Kt("protocol error: received extra messages for client streaming method",qt.Unimplemented);return(y=a==null?void 0:a.onTrailer)===null||y===void 0||y.call(a,w.trailer),v}}function m2(n,t,e){return function(i,a){return A1(n.stream(t,e,a==null?void 0:a.signal,a==null?void 0:a.timeoutMs,a==null?void 0:a.headers,i,a==null?void 0:a.contextValues),a)}}function A1(n,t){const e=function(){return c2(this,arguments,function*(){var i,a;const l=yield jo(n);(i=t==null?void 0:t.onHeader)===null||i===void 0||i.call(t,l.header),yield jo(yield*u2(T1(l.message))),(a=t==null?void 0:t.onTrailer)===null||a===void 0||a.call(t,l.trailer)})}()[Symbol.asyncIterator]();return{[Symbol.asyncIterator]:()=>({next:()=>e.next()})}}function y2(...n){const t=new AbortController,e=n.filter(a=>a!==void 0).concat(t.signal);for(const a of e){if(a.aborted){i.apply(a);break}a.addEventListener("abort",i)}function i(){t.signal.aborted||t.abort(E1(this));for(const a of e)a.removeEventListener("abort",i)}return t}function p2(n){const t=new AbortController,e=()=>{t.abort(new Kt("the operation timed out",qt.DeadlineExceeded))};let i;return n!==void 0&&(n<=0?e():i=setTimeout(e,n)),{signal:t.signal,cleanup:()=>clearTimeout(i)}}function E1(n){if(!n.aborted)return;if(n.reason!==void 0)return n.reason;const t=new Error("This operation was aborted");return t.name="AbortError",t}function Tb(){return{get(n){return n.id in this?this[n.id]:n.defaultValue},set(n,t){return this[n.id]=t,this},delete(n){return delete this[n.id],this}}}const Om=128;function Ab(n){const t=new Headers,e=new TextDecoder().decode(n).split(`\r
`);for(const i of e){if(i==="")continue;const a=i.indexOf(":");if(a>0){const l=i.substring(0,a).trim(),c=i.substring(a+1).trim();t.append(l,c)}}return t}const v2="Content-Type",w2="Grpc-Timeout",Yo="Grpc-Status",N1="Grpc-Message",b2="Grpc-Status-Details-Bin",S2="X-User-Agent",x2="X-Grpc-Web",T2="application/grpc-web+proto",A2="application/grpc-web+json";class os extends yt{constructor(t){super(),this.code=0,this.message="",this.details=[],T.util.initPartial(t,this)}static fromBinary(t,e){return new os().fromBinary(t,e)}static fromJson(t,e){return new os().fromJson(t,e)}static fromJsonString(t,e){return new os().fromJsonString(t,e)}static equals(t,e){return T.util.equals(os,t,e)}}os.runtime=T;os.typeName="google.rpc.Status";os.fields=T.util.newFieldList(()=>[{no:1,name:"code",kind:"scalar",T:5},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"details",kind:"message",T:hr,repeated:!0}]);const E2="0";function C1(n){var t;const e=n.get(b2);if(e!=null){const a=r2(e,os);if(a.code==0)return;const l=new Kt(a.message,a.code,n);return l.details=a.details.map(c=>({type:c.typeUrl.substring(c.typeUrl.lastIndexOf("/")+1),value:c.value})),l}const i=n.get(Yo);if(i!=null){if(i===E2)return;const a=parseInt(i,10);return a in qt?new Kt(decodeURIComponent((t=n.get(N1))!==null&&t!==void 0?t:""),a,n):new Kt(`invalid grpc-status: ${i}`,qt.Internal,n)}}function Eb(n,t,e){const i=typeof t=="string"?t:t.typeName,a=typeof e=="string"?e:e.name;return n.toString().replace(/\/?$/,`/${i}/${a}`)}function D1(n,t){return t instanceof n?t:new n(t)}function N2(n,t){function e(i){return i.done===!0?i:{done:i.done,value:D1(n,i.value)}}return{[Symbol.asyncIterator](){const i=t[Symbol.asyncIterator](),a={next:()=>i.next().then(e)};return i.throw!==void 0&&(a.throw=l=>i.throw(l).then(e)),i.return!==void 0&&(a.return=l=>i.return(l).then(e)),a}}}function k1(n,t){var e;return(e=t==null?void 0:t.concat().reverse().reduce((i,a)=>a(i),n))!==null&&e!==void 0?e:n}function C2(n){var t;const e=Object.assign({},n);return(t=e.ignoreUnknownFields)!==null&&t!==void 0||(e.ignoreUnknownFields=!0),e}function Nb(n,t,e,i){const a=t?Cb(n.I,i):Db(n.I,e);return{parse:(t?Cb(n.O,i):Db(n.O,e)).parse,serialize:a.serialize}}function Cb(n,t){return{parse(e){try{return n.fromBinary(e,t)}catch(i){const a=i instanceof Error?i.message:String(i);throw new Kt(`parse binary: ${a}`,qt.Internal)}},serialize(e){try{return e.toBinary(t)}catch(i){const a=i instanceof Error?i.message:String(i);throw new Kt(`serialize binary: ${a}`,qt.Internal)}}}}function Db(n,t){var e,i;const a=(e=t==null?void 0:t.textEncoder)!==null&&e!==void 0?e:new TextEncoder,l=(i=t==null?void 0:t.textDecoder)!==null&&i!==void 0?i:new TextDecoder,c=C2(t);return{parse(d){try{const h=l.decode(d);return n.fromJsonString(h,c)}catch(h){throw Kt.from(h,qt.InvalidArgument)}},serialize(d){try{const h=d.toJsonString(c);return a.encode(h)}catch(h){throw Kt.from(h,qt.Internal)}}}}function D2(n){const t=k1(n.next,n.interceptors),[e,i,a]=O1(n),l=Object.assign(Object.assign({},n.req),{message:D1(n.req.method.I,n.req.message),signal:e});return t(l).then(c=>(a(),c),i)}function k2(n){const t=k1(n.next,n.interceptors),[e,i,a]=O1(n),l=Object.assign(Object.assign({},n.req),{message:N2(n.req.method.I,n.req.message),signal:e});let c=!1;return e.addEventListener("abort",function(){var d,h;const g=n.req.message[Symbol.asyncIterator]();c||(d=g.throw)===null||d===void 0||d.call(g,this.reason).catch(()=>{}),(h=g.return)===null||h===void 0||h.call(g).catch(()=>{})}),t(l).then(d=>Object.assign(Object.assign({},d),{message:{[Symbol.asyncIterator](){const h=d.message[Symbol.asyncIterator]();return{next(){return h.next().then(g=>(g.done==!0&&(c=!0,a()),g),i)}}}}}),i)}function O1(n){const{signal:t,cleanup:e}=p2(n.timeoutMs),i=y2(n.signal,t);return[i.signal,function(l){const c=Kt.from(t.aborted?E1(t):l);return i.abort(c),e(),Promise.reject(c)},function(){e(),i.abort()}]}function O2(){try{new Headers}catch{throw new Error("connect-web requires the fetch API. Are you running on an old version of Node.js? Node.js is not supported in Connect for Web - please stay tuned for Connect for Node.")}}function kb(n,t){const e=C1(n);if(e)throw t.forEach((i,a)=>{e.metadata.append(a,i)}),e;if(!t.has(Yo)&&!n.has(Yo))throw new Kt("protocol error: missing status",qt.Internal)}function Ob(n,t,e,i){const a=new Headers(e??{});return a.set(v2,n?T2:A2),a.set(x2,"1"),a.set(S2,"connect-es/1.6.1"),t!==void 0&&a.set(w2,`${t}m`),a}function I2(n){switch(n){case 400:return qt.Internal;case 401:return qt.Unauthenticated;case 403:return qt.PermissionDenied;case 404:return qt.Unimplemented;case 429:return qt.Unavailable;case 502:return qt.Unavailable;case 503:return qt.Unavailable;case 504:return qt.Unavailable;default:return qt.Unknown}}function Ib(n,t){var e;if(n>=200&&n<300)return{foundStatus:t.has(Yo),headerError:C1(t)};throw new Kt(decodeURIComponent((e=t.get(N1))!==null&&e!==void 0?e:`HTTP ${n}`),I2(n),t)}var Ia=function(n){return this instanceof Ia?(this.v=n,this):new Ia(n)},R2=function(n,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=e.apply(n,t||[]),a,l=[];return a={},d("next"),d("throw"),d("return",c),a[Symbol.asyncIterator]=function(){return this},a;function c(b){return function(x){return Promise.resolve(x).then(b,w)}}function d(b,x){i[b]&&(a[b]=function(A){return new Promise(function(C,k){l.push([b,A,C,k])>1||h(b,A)})},x&&(a[b]=x(a[b])))}function h(b,x){try{g(i[b](x))}catch(A){v(l[0][3],A)}}function g(b){b.value instanceof Ia?Promise.resolve(b.value.v).then(y,w):v(l[0][2],b)}function y(b){h("next",b)}function w(b){h("throw",b)}function v(b,x){b(x),l.shift(),l.length&&h(l[0][0],l[0][1])}};function M2(n){var t;O2();const e=(t=n.useBinaryFormat)!==null&&t!==void 0?t:!0;return{async unary(i,a,l,c,d,h,g){var y;const{serialize:w,parse:v}=Nb(a,e,n.jsonOptions,n.binaryOptions);return c=c===void 0?n.defaultTimeoutMs:c<=0?void 0:c,await D2({interceptors:n.interceptors,signal:l,timeoutMs:c,req:{stream:!1,service:i,method:a,url:Eb(n.baseUrl,i,a),init:{method:"POST",credentials:(y=n.credentials)!==null&&y!==void 0?y:"same-origin",redirect:"error",mode:"cors"},header:Ob(e,c,d),contextValues:g??Tb(),message:h},next:async b=>{var x;const C=await((x=n.fetch)!==null&&x!==void 0?x:globalThis.fetch)(b.url,Object.assign(Object.assign({},b.init),{headers:b.header,signal:b.signal,body:xb(0,w(b.message))})),{headerError:k}=Ib(C.status,C.headers);if(!C.body)throw k!==void 0?k:"missing response body";const L=Sb(C.body).getReader();let N,I;for(;;){const B=await L.read();if(B.done)break;const{flags:_,data:P}=B.value;if((_&bb)===bb)throw new Kt("protocol error: received unsupported compressed output",qt.Internal);if(_===Om){if(N!==void 0)throw"extra trailer";N=Ab(P);continue}if(I!==void 0)throw new Kt("extra message",qt.Unimplemented);I=v(P)}if(N===void 0)throw k!==void 0?k:new Kt("missing trailer",C.headers.has(Yo)?qt.Unimplemented:qt.Unknown);if(kb(N,C.headers),I===void 0)throw new Kt("missing message",N.has(Yo)?qt.Unimplemented:qt.Unknown);return{stream:!1,service:i,method:a,header:C.headers,message:I,trailer:N}}})},async stream(i,a,l,c,d,h,g){var y;const{serialize:w,parse:v}=Nb(a,e,n.jsonOptions,n.binaryOptions);function b(A,C,k,L,N){return R2(this,arguments,function*(){const B=Sb(A).getReader();if(C){if(!(yield Ia(B.read())).done)throw"extra data for trailers-only";return yield Ia(void 0)}let _=!1;for(;;){const P=yield Ia(B.read());if(P.done)break;const{flags:V,data:tt}=P.value;if((V&Om)===Om){if(_)throw"extra trailer";_=!0;const ft=Ab(tt);kb(ft,L),ft.forEach((nt,it)=>k.set(it,nt));continue}if(_)throw"extra message";yield yield Ia(v(tt))}if("throwIfAborted"in N&&N.throwIfAborted(),!_)throw"missing trailer"})}async function x(A){if(a.kind!=Ge.ServerStreaming)throw"The fetch API does not support streaming request bodies";const C=await A[Symbol.asyncIterator]().next();if(C.done==!0)throw"missing request message";return xb(0,w(C.value))}return c=c===void 0?n.defaultTimeoutMs:c<=0?void 0:c,k2({interceptors:n.interceptors,signal:l,timeoutMs:c,req:{stream:!0,service:i,method:a,url:Eb(n.baseUrl,i,a),init:{method:"POST",credentials:(y=n.credentials)!==null&&y!==void 0?y:"same-origin",redirect:"error",mode:"cors"},header:Ob(e,c,d),contextValues:g??Tb(),message:h},next:async A=>{var C;const L=await((C=n.fetch)!==null&&C!==void 0?C:globalThis.fetch)(A.url,Object.assign(Object.assign({},A.init),{headers:A.header,signal:A.signal,body:await x(A.message)})),{foundStatus:N,headerError:I}=Ib(L.status,L.headers);if(I!=null)throw I;if(!L.body)throw"missing response body";const B=new Headers;return Object.assign(Object.assign({},A),{header:L.headers,trailer:B,message:b(L.body,N,B,L.headers,A.signal)})}})}}}var Rt=(n=>(n[n.NULL=0]="NULL",n[n.BOOLEAN=1]="BOOLEAN",n[n.INTEGER=2]="INTEGER",n[n.LONG=3]="LONG",n[n.DOUBLE=4]="DOUBLE",n[n.STRING=5]="STRING",n[n.BYTES=6]="BYTES",n[n.DATE=7]="DATE",n[n.JSON_OBJECT=8]="JSON_OBJECT",n[n.JSON_ARRAY=9]="JSON_ARRAY",n[n.TEXT=10]="TEXT",n[n.INTEGER_CNT=11]="INTEGER_CNT",n[n.LONG_CNT=12]="LONG_CNT",n[n.TREE=13]="TREE",n))(Rt||{});T.util.setEnumType(Rt,"yorkie.v1.ValueType",[{no:0,name:"VALUE_TYPE_NULL"},{no:1,name:"VALUE_TYPE_BOOLEAN"},{no:2,name:"VALUE_TYPE_INTEGER"},{no:3,name:"VALUE_TYPE_LONG"},{no:4,name:"VALUE_TYPE_DOUBLE"},{no:5,name:"VALUE_TYPE_STRING"},{no:6,name:"VALUE_TYPE_BYTES"},{no:7,name:"VALUE_TYPE_DATE"},{no:8,name:"VALUE_TYPE_JSON_OBJECT"},{no:9,name:"VALUE_TYPE_JSON_ARRAY"},{no:10,name:"VALUE_TYPE_TEXT"},{no:11,name:"VALUE_TYPE_INTEGER_CNT"},{no:12,name:"VALUE_TYPE_LONG_CNT"},{no:13,name:"VALUE_TYPE_TREE"}]);var Ma=(n=>(n[n.DOCUMENT_CHANGED=0]="DOCUMENT_CHANGED",n[n.DOCUMENT_WATCHED=1]="DOCUMENT_WATCHED",n[n.DOCUMENT_UNWATCHED=2]="DOCUMENT_UNWATCHED",n[n.DOCUMENT_BROADCAST=3]="DOCUMENT_BROADCAST",n))(Ma||{});T.util.setEnumType(Ma,"yorkie.v1.DocEventType",[{no:0,name:"DOC_EVENT_TYPE_DOCUMENT_CHANGED"},{no:1,name:"DOC_EVENT_TYPE_DOCUMENT_WATCHED"},{no:2,name:"DOC_EVENT_TYPE_DOCUMENT_UNWATCHED"},{no:3,name:"DOC_EVENT_TYPE_DOCUMENT_BROADCAST"}]);const Wr=class Wr extends yt{constructor(e){super();p(this,"root");p(this,"presences",{});T.util.initPartial(e,this)}static fromBinary(e,i){return new Wr().fromBinary(e,i)}static fromJson(e,i){return new Wr().fromJson(e,i)}static fromJsonString(e,i){return new Wr().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Wr,e,i)}};p(Wr,"runtime",T),p(Wr,"typeName","yorkie.v1.Snapshot"),p(Wr,"fields",T.util.newFieldList(()=>[{no:1,name:"root",kind:"message",T:an},{no:2,name:"presences",kind:"map",K:9,V:{kind:"message",T:$d}}]));let Km=Wr;var kn;let ys=(kn=class extends yt{constructor(e){super();p(this,"documentKey","");p(this,"checkpoint");p(this,"snapshot",new Uint8Array(0));p(this,"changes",[]);p(this,"minSyncedTicket");p(this,"isRemoved",!1);p(this,"versionVector");T.util.initPartial(e,this)}static fromBinary(e,i){return new kn().fromBinary(e,i)}static fromJson(e,i){return new kn().fromJson(e,i)}static fromJsonString(e,i){return new kn().fromJsonString(e,i)}static equals(e,i){return T.util.equals(kn,e,i)}},p(kn,"runtime",T),p(kn,"typeName","yorkie.v1.ChangePack"),p(kn,"fields",T.util.newFieldList(()=>[{no:1,name:"document_key",kind:"scalar",T:9},{no:2,name:"checkpoint",kind:"message",T:M1},{no:3,name:"snapshot",kind:"scalar",T:12},{no:4,name:"changes",kind:"message",T:I1,repeated:!0},{no:5,name:"min_synced_ticket",kind:"message",T:wt},{no:6,name:"is_removed",kind:"scalar",T:8},{no:7,name:"version_vector",kind:"message",T:Hd}])),kn);var On;let I1=(On=class extends yt{constructor(e){super();p(this,"id");p(this,"message","");p(this,"operations",[]);p(this,"presenceChange");T.util.initPartial(e,this)}static fromBinary(e,i){return new On().fromBinary(e,i)}static fromJson(e,i){return new On().fromJson(e,i)}static fromJsonString(e,i){return new On().fromJsonString(e,i)}static equals(e,i){return T.util.equals(On,e,i)}},p(On,"runtime",T),p(On,"typeName","yorkie.v1.Change"),p(On,"fields",T.util.newFieldList(()=>[{no:1,name:"id",kind:"message",T:Jd},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"operations",kind:"message",T:qy,repeated:!0},{no:4,name:"presence_change",kind:"message",T:Bu}])),On);var In;let Jd=(In=class extends yt{constructor(e){super();p(this,"clientSeq",0);p(this,"serverSeq",se.zero);p(this,"lamport",se.zero);p(this,"actorId",new Uint8Array(0));p(this,"versionVector");T.util.initPartial(e,this)}static fromBinary(e,i){return new In().fromBinary(e,i)}static fromJson(e,i){return new In().fromJson(e,i)}static fromJsonString(e,i){return new In().fromJsonString(e,i)}static equals(e,i){return T.util.equals(In,e,i)}},p(In,"runtime",T),p(In,"typeName","yorkie.v1.ChangeID"),p(In,"fields",T.util.newFieldList(()=>[{no:1,name:"client_seq",kind:"scalar",T:13},{no:2,name:"server_seq",kind:"scalar",T:3},{no:3,name:"lamport",kind:"scalar",T:3},{no:4,name:"actor_id",kind:"scalar",T:12},{no:5,name:"version_vector",kind:"message",T:Hd}])),In);var Rn;let Hd=(Rn=class extends yt{constructor(e){super();p(this,"vector",{});T.util.initPartial(e,this)}static fromBinary(e,i){return new Rn().fromBinary(e,i)}static fromJson(e,i){return new Rn().fromJson(e,i)}static fromJsonString(e,i){return new Rn().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Rn,e,i)}},p(Rn,"runtime",T),p(Rn,"typeName","yorkie.v1.VersionVector"),p(Rn,"fields",T.util.newFieldList(()=>[{no:1,name:"vector",kind:"map",K:9,V:{kind:"scalar",T:3}}])),Rn);var Mn;let qy=(Mn=class extends yt{constructor(e){super();p(this,"body",{case:void 0});T.util.initPartial(e,this)}static fromBinary(e,i){return new Mn().fromBinary(e,i)}static fromJson(e,i){return new Mn().fromJson(e,i)}static fromJsonString(e,i){return new Mn().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Mn,e,i)}},p(Mn,"runtime",T),p(Mn,"typeName","yorkie.v1.Operation"),p(Mn,"fields",T.util.newFieldList(()=>[{no:1,name:"set",kind:"message",T:nd,oneof:"body"},{no:2,name:"add",kind:"message",T:rd,oneof:"body"},{no:3,name:"move",kind:"message",T:id,oneof:"body"},{no:4,name:"remove",kind:"message",T:sd,oneof:"body"},{no:5,name:"edit",kind:"message",T:ad,oneof:"body"},{no:7,name:"style",kind:"message",T:od,oneof:"body"},{no:8,name:"increase",kind:"message",T:ld,oneof:"body"},{no:9,name:"tree_edit",kind:"message",T:ud,oneof:"body"},{no:10,name:"tree_style",kind:"message",T:cd,oneof:"body"},{no:11,name:"array_set",kind:"message",T:fd,oneof:"body"}])),Mn);const ti=class ti extends yt{constructor(e){super();p(this,"parentCreatedAt");p(this,"key","");p(this,"value");p(this,"executedAt");T.util.initPartial(e,this)}static fromBinary(e,i){return new ti().fromBinary(e,i)}static fromJson(e,i){return new ti().fromJson(e,i)}static fromJsonString(e,i){return new ti().fromJsonString(e,i)}static equals(e,i){return T.util.equals(ti,e,i)}};p(ti,"runtime",T),p(ti,"typeName","yorkie.v1.Operation.Set"),p(ti,"fields",T.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:wt},{no:2,name:"key",kind:"scalar",T:9},{no:3,name:"value",kind:"message",T:Dn},{no:4,name:"executed_at",kind:"message",T:wt}]));let nd=ti;const ei=class ei extends yt{constructor(e){super();p(this,"parentCreatedAt");p(this,"prevCreatedAt");p(this,"value");p(this,"executedAt");T.util.initPartial(e,this)}static fromBinary(e,i){return new ei().fromBinary(e,i)}static fromJson(e,i){return new ei().fromJson(e,i)}static fromJsonString(e,i){return new ei().fromJsonString(e,i)}static equals(e,i){return T.util.equals(ei,e,i)}};p(ei,"runtime",T),p(ei,"typeName","yorkie.v1.Operation.Add"),p(ei,"fields",T.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:wt},{no:2,name:"prev_created_at",kind:"message",T:wt},{no:3,name:"value",kind:"message",T:Dn},{no:4,name:"executed_at",kind:"message",T:wt}]));let rd=ei;const ni=class ni extends yt{constructor(e){super();p(this,"parentCreatedAt");p(this,"prevCreatedAt");p(this,"createdAt");p(this,"executedAt");T.util.initPartial(e,this)}static fromBinary(e,i){return new ni().fromBinary(e,i)}static fromJson(e,i){return new ni().fromJson(e,i)}static fromJsonString(e,i){return new ni().fromJsonString(e,i)}static equals(e,i){return T.util.equals(ni,e,i)}};p(ni,"runtime",T),p(ni,"typeName","yorkie.v1.Operation.Move"),p(ni,"fields",T.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:wt},{no:2,name:"prev_created_at",kind:"message",T:wt},{no:3,name:"created_at",kind:"message",T:wt},{no:4,name:"executed_at",kind:"message",T:wt}]));let id=ni;const ri=class ri extends yt{constructor(e){super();p(this,"parentCreatedAt");p(this,"createdAt");p(this,"executedAt");T.util.initPartial(e,this)}static fromBinary(e,i){return new ri().fromBinary(e,i)}static fromJson(e,i){return new ri().fromJson(e,i)}static fromJsonString(e,i){return new ri().fromJsonString(e,i)}static equals(e,i){return T.util.equals(ri,e,i)}};p(ri,"runtime",T),p(ri,"typeName","yorkie.v1.Operation.Remove"),p(ri,"fields",T.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:wt},{no:2,name:"created_at",kind:"message",T:wt},{no:3,name:"executed_at",kind:"message",T:wt}]));let sd=ri;const ii=class ii extends yt{constructor(e){super();p(this,"parentCreatedAt");p(this,"from");p(this,"to");p(this,"createdAtMapByActor",{});p(this,"content","");p(this,"executedAt");p(this,"attributes",{});T.util.initPartial(e,this)}static fromBinary(e,i){return new ii().fromBinary(e,i)}static fromJson(e,i){return new ii().fromJson(e,i)}static fromJsonString(e,i){return new ii().fromJsonString(e,i)}static equals(e,i){return T.util.equals(ii,e,i)}};p(ii,"runtime",T),p(ii,"typeName","yorkie.v1.Operation.Edit"),p(ii,"fields",T.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:wt},{no:2,name:"from",kind:"message",T:Ua},{no:3,name:"to",kind:"message",T:Ua},{no:4,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:wt}},{no:5,name:"content",kind:"scalar",T:9},{no:6,name:"executed_at",kind:"message",T:wt},{no:7,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}}]));let ad=ii;const si=class si extends yt{constructor(e){super();p(this,"parentCreatedAt");p(this,"from");p(this,"to");p(this,"attributes",{});p(this,"executedAt");p(this,"createdAtMapByActor",{});T.util.initPartial(e,this)}static fromBinary(e,i){return new si().fromBinary(e,i)}static fromJson(e,i){return new si().fromJson(e,i)}static fromJsonString(e,i){return new si().fromJsonString(e,i)}static equals(e,i){return T.util.equals(si,e,i)}};p(si,"runtime",T),p(si,"typeName","yorkie.v1.Operation.Style"),p(si,"fields",T.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:wt},{no:2,name:"from",kind:"message",T:Ua},{no:3,name:"to",kind:"message",T:Ua},{no:4,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:5,name:"executed_at",kind:"message",T:wt},{no:6,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:wt}}]));let od=si;const ai=class ai extends yt{constructor(e){super();p(this,"parentCreatedAt");p(this,"value");p(this,"executedAt");T.util.initPartial(e,this)}static fromBinary(e,i){return new ai().fromBinary(e,i)}static fromJson(e,i){return new ai().fromJson(e,i)}static fromJsonString(e,i){return new ai().fromJsonString(e,i)}static equals(e,i){return T.util.equals(ai,e,i)}};p(ai,"runtime",T),p(ai,"typeName","yorkie.v1.Operation.Increase"),p(ai,"fields",T.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:wt},{no:2,name:"value",kind:"message",T:Dn},{no:3,name:"executed_at",kind:"message",T:wt}]));let ld=ai;const oi=class oi extends yt{constructor(e){super();p(this,"parentCreatedAt");p(this,"from");p(this,"to");p(this,"createdAtMapByActor",{});p(this,"contents",[]);p(this,"splitLevel",0);p(this,"executedAt");T.util.initPartial(e,this)}static fromBinary(e,i){return new oi().fromBinary(e,i)}static fromJson(e,i){return new oi().fromJson(e,i)}static fromJsonString(e,i){return new oi().fromJsonString(e,i)}static equals(e,i){return T.util.equals(oi,e,i)}};p(oi,"runtime",T),p(oi,"typeName","yorkie.v1.Operation.TreeEdit"),p(oi,"fields",T.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:wt},{no:2,name:"from",kind:"message",T:La},{no:3,name:"to",kind:"message",T:La},{no:4,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:wt}},{no:5,name:"contents",kind:"message",T:bd,repeated:!0},{no:7,name:"split_level",kind:"scalar",T:5},{no:6,name:"executed_at",kind:"message",T:wt}]));let ud=oi;const li=class li extends yt{constructor(e){super();p(this,"parentCreatedAt");p(this,"from");p(this,"to");p(this,"attributes",{});p(this,"executedAt");p(this,"attributesToRemove",[]);p(this,"createdAtMapByActor",{});T.util.initPartial(e,this)}static fromBinary(e,i){return new li().fromBinary(e,i)}static fromJson(e,i){return new li().fromJson(e,i)}static fromJsonString(e,i){return new li().fromJsonString(e,i)}static equals(e,i){return T.util.equals(li,e,i)}};p(li,"runtime",T),p(li,"typeName","yorkie.v1.Operation.TreeStyle"),p(li,"fields",T.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:wt},{no:2,name:"from",kind:"message",T:La},{no:3,name:"to",kind:"message",T:La},{no:4,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:5,name:"executed_at",kind:"message",T:wt},{no:6,name:"attributes_to_remove",kind:"scalar",T:9,repeated:!0},{no:7,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:wt}}]));let cd=li;const ui=class ui extends yt{constructor(e){super();p(this,"parentCreatedAt");p(this,"createdAt");p(this,"value");p(this,"executedAt");T.util.initPartial(e,this)}static fromBinary(e,i){return new ui().fromBinary(e,i)}static fromJson(e,i){return new ui().fromJson(e,i)}static fromJsonString(e,i){return new ui().fromJsonString(e,i)}static equals(e,i){return T.util.equals(ui,e,i)}};p(ui,"runtime",T),p(ui,"typeName","yorkie.v1.Operation.ArraySet"),p(ui,"fields",T.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:wt},{no:2,name:"created_at",kind:"message",T:wt},{no:3,name:"value",kind:"message",T:Dn},{no:4,name:"executed_at",kind:"message",T:wt}]));let fd=ui;const ci=class ci extends yt{constructor(e){super();p(this,"createdAt");p(this,"movedAt");p(this,"removedAt");p(this,"type",0);p(this,"value",new Uint8Array(0));T.util.initPartial(e,this)}static fromBinary(e,i){return new ci().fromBinary(e,i)}static fromJson(e,i){return new ci().fromJson(e,i)}static fromJsonString(e,i){return new ci().fromJsonString(e,i)}static equals(e,i){return T.util.equals(ci,e,i)}};p(ci,"runtime",T),p(ci,"typeName","yorkie.v1.JSONElementSimple"),p(ci,"fields",T.util.newFieldList(()=>[{no:1,name:"created_at",kind:"message",T:wt},{no:2,name:"moved_at",kind:"message",T:wt},{no:3,name:"removed_at",kind:"message",T:wt},{no:4,name:"type",kind:"enum",T:T.getEnumType(Rt)},{no:5,name:"value",kind:"scalar",T:12}]));let Dn=ci;const fi=class fi extends yt{constructor(e){super();p(this,"body",{case:void 0});T.util.initPartial(e,this)}static fromBinary(e,i){return new fi().fromBinary(e,i)}static fromJson(e,i){return new fi().fromJson(e,i)}static fromJsonString(e,i){return new fi().fromJsonString(e,i)}static equals(e,i){return T.util.equals(fi,e,i)}};p(fi,"runtime",T),p(fi,"typeName","yorkie.v1.JSONElement"),p(fi,"fields",T.util.newFieldList(()=>[{no:1,name:"json_object",kind:"message",T:dd,oneof:"body"},{no:2,name:"json_array",kind:"message",T:hd,oneof:"body"},{no:3,name:"primitive",kind:"message",T:gd,oneof:"body"},{no:5,name:"text",kind:"message",T:md,oneof:"body"},{no:6,name:"counter",kind:"message",T:yd,oneof:"body"},{no:7,name:"tree",kind:"message",T:pd,oneof:"body"}]));let an=fi;const di=class di extends yt{constructor(e){super();p(this,"nodes",[]);p(this,"createdAt");p(this,"movedAt");p(this,"removedAt");T.util.initPartial(e,this)}static fromBinary(e,i){return new di().fromBinary(e,i)}static fromJson(e,i){return new di().fromJson(e,i)}static fromJsonString(e,i){return new di().fromJsonString(e,i)}static equals(e,i){return T.util.equals(di,e,i)}};p(di,"runtime",T),p(di,"typeName","yorkie.v1.JSONElement.JSONObject"),p(di,"fields",T.util.newFieldList(()=>[{no:1,name:"nodes",kind:"message",T:R1,repeated:!0},{no:2,name:"created_at",kind:"message",T:wt},{no:3,name:"moved_at",kind:"message",T:wt},{no:4,name:"removed_at",kind:"message",T:wt}]));let dd=di;const hi=class hi extends yt{constructor(e){super();p(this,"nodes",[]);p(this,"createdAt");p(this,"movedAt");p(this,"removedAt");T.util.initPartial(e,this)}static fromBinary(e,i){return new hi().fromBinary(e,i)}static fromJson(e,i){return new hi().fromJson(e,i)}static fromJsonString(e,i){return new hi().fromJsonString(e,i)}static equals(e,i){return T.util.equals(hi,e,i)}};p(hi,"runtime",T),p(hi,"typeName","yorkie.v1.JSONElement.JSONArray"),p(hi,"fields",T.util.newFieldList(()=>[{no:1,name:"nodes",kind:"message",T:vd,repeated:!0},{no:2,name:"created_at",kind:"message",T:wt},{no:3,name:"moved_at",kind:"message",T:wt},{no:4,name:"removed_at",kind:"message",T:wt}]));let hd=hi;const gi=class gi extends yt{constructor(e){super();p(this,"type",0);p(this,"value",new Uint8Array(0));p(this,"createdAt");p(this,"movedAt");p(this,"removedAt");T.util.initPartial(e,this)}static fromBinary(e,i){return new gi().fromBinary(e,i)}static fromJson(e,i){return new gi().fromJson(e,i)}static fromJsonString(e,i){return new gi().fromJsonString(e,i)}static equals(e,i){return T.util.equals(gi,e,i)}};p(gi,"runtime",T),p(gi,"typeName","yorkie.v1.JSONElement.Primitive"),p(gi,"fields",T.util.newFieldList(()=>[{no:1,name:"type",kind:"enum",T:T.getEnumType(Rt)},{no:2,name:"value",kind:"scalar",T:12},{no:3,name:"created_at",kind:"message",T:wt},{no:4,name:"moved_at",kind:"message",T:wt},{no:5,name:"removed_at",kind:"message",T:wt}]));let gd=gi;const mi=class mi extends yt{constructor(e){super();p(this,"nodes",[]);p(this,"createdAt");p(this,"movedAt");p(this,"removedAt");T.util.initPartial(e,this)}static fromBinary(e,i){return new mi().fromBinary(e,i)}static fromJson(e,i){return new mi().fromJson(e,i)}static fromJsonString(e,i){return new mi().fromJsonString(e,i)}static equals(e,i){return T.util.equals(mi,e,i)}};p(mi,"runtime",T),p(mi,"typeName","yorkie.v1.JSONElement.Text"),p(mi,"fields",T.util.newFieldList(()=>[{no:1,name:"nodes",kind:"message",T:wd,repeated:!0},{no:2,name:"created_at",kind:"message",T:wt},{no:3,name:"moved_at",kind:"message",T:wt},{no:4,name:"removed_at",kind:"message",T:wt}]));let md=mi;const yi=class yi extends yt{constructor(e){super();p(this,"type",0);p(this,"value",new Uint8Array(0));p(this,"createdAt");p(this,"movedAt");p(this,"removedAt");T.util.initPartial(e,this)}static fromBinary(e,i){return new yi().fromBinary(e,i)}static fromJson(e,i){return new yi().fromJson(e,i)}static fromJsonString(e,i){return new yi().fromJsonString(e,i)}static equals(e,i){return T.util.equals(yi,e,i)}};p(yi,"runtime",T),p(yi,"typeName","yorkie.v1.JSONElement.Counter"),p(yi,"fields",T.util.newFieldList(()=>[{no:1,name:"type",kind:"enum",T:T.getEnumType(Rt)},{no:2,name:"value",kind:"scalar",T:12},{no:3,name:"created_at",kind:"message",T:wt},{no:4,name:"moved_at",kind:"message",T:wt},{no:5,name:"removed_at",kind:"message",T:wt}]));let yd=yi;const pi=class pi extends yt{constructor(e){super();p(this,"nodes",[]);p(this,"createdAt");p(this,"movedAt");p(this,"removedAt");T.util.initPartial(e,this)}static fromBinary(e,i){return new pi().fromBinary(e,i)}static fromJson(e,i){return new pi().fromJson(e,i)}static fromJsonString(e,i){return new pi().fromJsonString(e,i)}static equals(e,i){return T.util.equals(pi,e,i)}};p(pi,"runtime",T),p(pi,"typeName","yorkie.v1.JSONElement.Tree"),p(pi,"fields",T.util.newFieldList(()=>[{no:1,name:"nodes",kind:"message",T:Mu,repeated:!0},{no:2,name:"created_at",kind:"message",T:wt},{no:3,name:"moved_at",kind:"message",T:wt},{no:4,name:"removed_at",kind:"message",T:wt}]));let pd=pi;var Bn;let R1=(Bn=class extends yt{constructor(e){super();p(this,"key","");p(this,"element");T.util.initPartial(e,this)}static fromBinary(e,i){return new Bn().fromBinary(e,i)}static fromJson(e,i){return new Bn().fromJson(e,i)}static fromJsonString(e,i){return new Bn().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Bn,e,i)}},p(Bn,"runtime",T),p(Bn,"typeName","yorkie.v1.RHTNode"),p(Bn,"fields",T.util.newFieldList(()=>[{no:1,name:"key",kind:"scalar",T:9},{no:2,name:"element",kind:"message",T:an}])),Bn);const cr=class cr extends yt{constructor(e){super();p(this,"next");p(this,"element");T.util.initPartial(e,this)}static fromBinary(e,i){return new cr().fromBinary(e,i)}static fromJson(e,i){return new cr().fromJson(e,i)}static fromJsonString(e,i){return new cr().fromJsonString(e,i)}static equals(e,i){return T.util.equals(cr,e,i)}};p(cr,"runtime",T),p(cr,"typeName","yorkie.v1.RGANode"),p(cr,"fields",T.util.newFieldList(()=>[{no:1,name:"next",kind:"message",T:cr},{no:2,name:"element",kind:"message",T:an}]));let vd=cr;const vi=class vi extends yt{constructor(e){super();p(this,"value","");p(this,"updatedAt");p(this,"isRemoved",!1);T.util.initPartial(e,this)}static fromBinary(e,i){return new vi().fromBinary(e,i)}static fromJson(e,i){return new vi().fromJson(e,i)}static fromJsonString(e,i){return new vi().fromJsonString(e,i)}static equals(e,i){return T.util.equals(vi,e,i)}};p(vi,"runtime",T),p(vi,"typeName","yorkie.v1.NodeAttr"),p(vi,"fields",T.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:9},{no:2,name:"updated_at",kind:"message",T:wt},{no:3,name:"is_removed",kind:"scalar",T:8}]));let Go=vi;const wi=class wi extends yt{constructor(e){super();p(this,"id");p(this,"value","");p(this,"removedAt");p(this,"insPrevId");p(this,"attributes",{});T.util.initPartial(e,this)}static fromBinary(e,i){return new wi().fromBinary(e,i)}static fromJson(e,i){return new wi().fromJson(e,i)}static fromJsonString(e,i){return new wi().fromJsonString(e,i)}static equals(e,i){return T.util.equals(wi,e,i)}};p(wi,"runtime",T),p(wi,"typeName","yorkie.v1.TextNode"),p(wi,"fields",T.util.newFieldList(()=>[{no:1,name:"id",kind:"message",T:Ru},{no:2,name:"value",kind:"scalar",T:9},{no:3,name:"removed_at",kind:"message",T:wt},{no:4,name:"ins_prev_id",kind:"message",T:Ru},{no:5,name:"attributes",kind:"map",K:9,V:{kind:"message",T:Go}}]));let wd=wi;const bi=class bi extends yt{constructor(e){super();p(this,"createdAt");p(this,"offset",0);T.util.initPartial(e,this)}static fromBinary(e,i){return new bi().fromBinary(e,i)}static fromJson(e,i){return new bi().fromJson(e,i)}static fromJsonString(e,i){return new bi().fromJsonString(e,i)}static equals(e,i){return T.util.equals(bi,e,i)}};p(bi,"runtime",T),p(bi,"typeName","yorkie.v1.TextNodeID"),p(bi,"fields",T.util.newFieldList(()=>[{no:1,name:"created_at",kind:"message",T:wt},{no:2,name:"offset",kind:"scalar",T:5}]));let Ru=bi;const Si=class Si extends yt{constructor(e){super();p(this,"id");p(this,"type","");p(this,"value","");p(this,"removedAt");p(this,"insPrevId");p(this,"insNextId");p(this,"depth",0);p(this,"attributes",{});T.util.initPartial(e,this)}static fromBinary(e,i){return new Si().fromBinary(e,i)}static fromJson(e,i){return new Si().fromJson(e,i)}static fromJsonString(e,i){return new Si().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Si,e,i)}};p(Si,"runtime",T),p(Si,"typeName","yorkie.v1.TreeNode"),p(Si,"fields",T.util.newFieldList(()=>[{no:1,name:"id",kind:"message",T:Ws},{no:2,name:"type",kind:"scalar",T:9},{no:3,name:"value",kind:"scalar",T:9},{no:4,name:"removed_at",kind:"message",T:wt},{no:5,name:"ins_prev_id",kind:"message",T:Ws},{no:6,name:"ins_next_id",kind:"message",T:Ws},{no:7,name:"depth",kind:"scalar",T:5},{no:8,name:"attributes",kind:"map",K:9,V:{kind:"message",T:Go}}]));let Mu=Si;const xi=class xi extends yt{constructor(e){super();p(this,"content",[]);T.util.initPartial(e,this)}static fromBinary(e,i){return new xi().fromBinary(e,i)}static fromJson(e,i){return new xi().fromJson(e,i)}static fromJsonString(e,i){return new xi().fromJsonString(e,i)}static equals(e,i){return T.util.equals(xi,e,i)}};p(xi,"runtime",T),p(xi,"typeName","yorkie.v1.TreeNodes"),p(xi,"fields",T.util.newFieldList(()=>[{no:1,name:"content",kind:"message",T:Mu,repeated:!0}]));let bd=xi;const Ti=class Ti extends yt{constructor(e){super();p(this,"createdAt");p(this,"offset",0);T.util.initPartial(e,this)}static fromBinary(e,i){return new Ti().fromBinary(e,i)}static fromJson(e,i){return new Ti().fromJson(e,i)}static fromJsonString(e,i){return new Ti().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Ti,e,i)}};p(Ti,"runtime",T),p(Ti,"typeName","yorkie.v1.TreeNodeID"),p(Ti,"fields",T.util.newFieldList(()=>[{no:1,name:"created_at",kind:"message",T:wt},{no:2,name:"offset",kind:"scalar",T:5}]));let Ws=Ti;const Ai=class Ai extends yt{constructor(e){super();p(this,"parentId");p(this,"leftSiblingId");T.util.initPartial(e,this)}static fromBinary(e,i){return new Ai().fromBinary(e,i)}static fromJson(e,i){return new Ai().fromJson(e,i)}static fromJsonString(e,i){return new Ai().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Ai,e,i)}};p(Ai,"runtime",T),p(Ai,"typeName","yorkie.v1.TreePos"),p(Ai,"fields",T.util.newFieldList(()=>[{no:1,name:"parent_id",kind:"message",T:Ws},{no:2,name:"left_sibling_id",kind:"message",T:Ws}]));let La=Ai;const Ei=class Ei extends yt{constructor(e){super();p(this,"id","");p(this,"authProvider","");p(this,"username","");p(this,"createdAt");T.util.initPartial(e,this)}static fromBinary(e,i){return new Ei().fromBinary(e,i)}static fromJson(e,i){return new Ei().fromJson(e,i)}static fromJsonString(e,i){return new Ei().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Ei,e,i)}};p(Ei,"runtime",T),p(Ei,"typeName","yorkie.v1.User"),p(Ei,"fields",T.util.newFieldList(()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"auth_provider",kind:"scalar",T:9},{no:3,name:"username",kind:"scalar",T:9},{no:4,name:"created_at",kind:"message",T:Le}]));let Rb=Ei;const Ni=class Ni extends yt{constructor(e){super();p(this,"id","");p(this,"name","");p(this,"publicKey","");p(this,"secretKey","");p(this,"authWebhookUrl","");p(this,"authWebhookMethods",[]);p(this,"eventWebhookUrl","");p(this,"eventWebhookEvents",[]);p(this,"clientDeactivateThreshold","");p(this,"maxSubscribersPerDocument",0);p(this,"maxAttachmentsPerDocument",0);p(this,"maxSizePerDocument",0);p(this,"allowedOrigins",[]);p(this,"createdAt");p(this,"updatedAt");T.util.initPartial(e,this)}static fromBinary(e,i){return new Ni().fromBinary(e,i)}static fromJson(e,i){return new Ni().fromJson(e,i)}static fromJsonString(e,i){return new Ni().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Ni,e,i)}};p(Ni,"runtime",T),p(Ni,"typeName","yorkie.v1.Project"),p(Ni,"fields",T.util.newFieldList(()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"public_key",kind:"scalar",T:9},{no:4,name:"secret_key",kind:"scalar",T:9},{no:5,name:"auth_webhook_url",kind:"scalar",T:9},{no:6,name:"auth_webhook_methods",kind:"scalar",T:9,repeated:!0},{no:7,name:"event_webhook_url",kind:"scalar",T:9},{no:8,name:"event_webhook_events",kind:"scalar",T:9,repeated:!0},{no:9,name:"client_deactivate_threshold",kind:"scalar",T:9},{no:10,name:"max_subscribers_per_document",kind:"scalar",T:5},{no:11,name:"max_attachments_per_document",kind:"scalar",T:5},{no:15,name:"max_size_per_document",kind:"scalar",T:5},{no:14,name:"allowed_origins",kind:"scalar",T:9,repeated:!0},{no:12,name:"created_at",kind:"message",T:Le},{no:13,name:"updated_at",kind:"message",T:Le}]));let Mb=Ni;const Ci=class Ci extends yt{constructor(e){super();p(this,"timestamp",se.zero);p(this,"value",0);T.util.initPartial(e,this)}static fromBinary(e,i){return new Ci().fromBinary(e,i)}static fromJson(e,i){return new Ci().fromJson(e,i)}static fromJsonString(e,i){return new Ci().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Ci,e,i)}};p(Ci,"runtime",T),p(Ci,"typeName","yorkie.v1.MetricPoint"),p(Ci,"fields",T.util.newFieldList(()=>[{no:1,name:"timestamp",kind:"scalar",T:3},{no:2,name:"value",kind:"scalar",T:5}]));let Bb=Ci;const Di=class Di extends yt{constructor(e){super();p(this,"name");p(this,"authWebhookUrl");p(this,"authWebhookMethods");p(this,"eventWebhookUrl");p(this,"eventWebhookEvents");p(this,"clientDeactivateThreshold");p(this,"maxSubscribersPerDocument");p(this,"maxAttachmentsPerDocument");p(this,"maxSizePerDocument");p(this,"allowedOrigins");T.util.initPartial(e,this)}static fromBinary(e,i){return new Di().fromBinary(e,i)}static fromJson(e,i){return new Di().fromJson(e,i)}static fromJsonString(e,i){return new Di().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Di,e,i)}};p(Di,"runtime",T),p(Di,"typeName","yorkie.v1.UpdatableProjectFields"),p(Di,"fields",T.util.newFieldList(()=>[{no:1,name:"name",kind:"message",T:en},{no:2,name:"auth_webhook_url",kind:"message",T:en},{no:3,name:"auth_webhook_methods",kind:"message",T:Xm},{no:4,name:"event_webhook_url",kind:"message",T:en},{no:5,name:"event_webhook_events",kind:"message",T:Fm},{no:6,name:"client_deactivate_threshold",kind:"message",T:en},{no:7,name:"max_subscribers_per_document",kind:"message",T:mn},{no:8,name:"max_attachments_per_document",kind:"message",T:mn},{no:10,name:"max_size_per_document",kind:"message",T:mn},{no:9,name:"allowed_origins",kind:"message",T:Zm}]));let zb=Di;const ki=class ki extends yt{constructor(e){super();p(this,"methods",[]);T.util.initPartial(e,this)}static fromBinary(e,i){return new ki().fromBinary(e,i)}static fromJson(e,i){return new ki().fromJson(e,i)}static fromJsonString(e,i){return new ki().fromJsonString(e,i)}static equals(e,i){return T.util.equals(ki,e,i)}};p(ki,"runtime",T),p(ki,"typeName","yorkie.v1.UpdatableProjectFields.AuthWebhookMethods"),p(ki,"fields",T.util.newFieldList(()=>[{no:1,name:"methods",kind:"scalar",T:9,repeated:!0}]));let Xm=ki;const Oi=class Oi extends yt{constructor(e){super();p(this,"events",[]);T.util.initPartial(e,this)}static fromBinary(e,i){return new Oi().fromBinary(e,i)}static fromJson(e,i){return new Oi().fromJson(e,i)}static fromJsonString(e,i){return new Oi().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Oi,e,i)}};p(Oi,"runtime",T),p(Oi,"typeName","yorkie.v1.UpdatableProjectFields.EventWebhookEvents"),p(Oi,"fields",T.util.newFieldList(()=>[{no:1,name:"events",kind:"scalar",T:9,repeated:!0}]));let Fm=Oi;const Ii=class Ii extends yt{constructor(e){super();p(this,"origins",[]);T.util.initPartial(e,this)}static fromBinary(e,i){return new Ii().fromBinary(e,i)}static fromJson(e,i){return new Ii().fromJson(e,i)}static fromJsonString(e,i){return new Ii().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Ii,e,i)}};p(Ii,"runtime",T),p(Ii,"typeName","yorkie.v1.UpdatableProjectFields.AllowedOrigins"),p(Ii,"fields",T.util.newFieldList(()=>[{no:1,name:"origins",kind:"scalar",T:9,repeated:!0}]));let Zm=Ii;const Ri=class Ri extends yt{constructor(e){super();p(this,"id","");p(this,"key","");p(this,"root","");p(this,"attachedClients",0);p(this,"documentSize");p(this,"schemaKey","");p(this,"presences",{});p(this,"createdAt");p(this,"accessedAt");p(this,"updatedAt");T.util.initPartial(e,this)}static fromBinary(e,i){return new Ri().fromBinary(e,i)}static fromJson(e,i){return new Ri().fromJson(e,i)}static fromJsonString(e,i){return new Ri().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Ri,e,i)}};p(Ri,"runtime",T),p(Ri,"typeName","yorkie.v1.DocumentSummary"),p(Ri,"fields",T.util.newFieldList(()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"key",kind:"scalar",T:9},{no:3,name:"root",kind:"scalar",T:9},{no:7,name:"attached_clients",kind:"scalar",T:5},{no:8,name:"document_size",kind:"message",T:ty},{no:9,name:"schema_key",kind:"scalar",T:9},{no:10,name:"presences",kind:"map",K:9,V:{kind:"message",T:$d}},{no:4,name:"created_at",kind:"message",T:Le},{no:5,name:"accessed_at",kind:"message",T:Le},{no:6,name:"updated_at",kind:"message",T:Le}]));let Lb=Ri;const Mi=class Mi extends yt{constructor(e){super();p(this,"type",0);p(this,"presence");T.util.initPartial(e,this)}static fromBinary(e,i){return new Mi().fromBinary(e,i)}static fromJson(e,i){return new Mi().fromJson(e,i)}static fromJsonString(e,i){return new Mi().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Mi,e,i)}};p(Mi,"runtime",T),p(Mi,"typeName","yorkie.v1.PresenceChange"),p(Mi,"fields",T.util.newFieldList(()=>[{no:1,name:"type",kind:"enum",T:T.getEnumType(_a)},{no:2,name:"presence",kind:"message",T:$d}]));let Bu=Mi;var _a=(n=>(n[n.UNSPECIFIED=0]="UNSPECIFIED",n[n.PUT=1]="PUT",n[n.DELETE=2]="DELETE",n[n.CLEAR=3]="CLEAR",n))(_a||{});T.util.setEnumType(_a,"yorkie.v1.PresenceChange.ChangeType",[{no:0,name:"CHANGE_TYPE_UNSPECIFIED"},{no:1,name:"CHANGE_TYPE_PUT"},{no:2,name:"CHANGE_TYPE_DELETE"},{no:3,name:"CHANGE_TYPE_CLEAR"}]);var zn;let $d=(zn=class extends yt{constructor(e){super();p(this,"data",{});T.util.initPartial(e,this)}static fromBinary(e,i){return new zn().fromBinary(e,i)}static fromJson(e,i){return new zn().fromJson(e,i)}static fromJsonString(e,i){return new zn().fromJsonString(e,i)}static equals(e,i){return T.util.equals(zn,e,i)}},p(zn,"runtime",T),p(zn,"typeName","yorkie.v1.Presence"),p(zn,"fields",T.util.newFieldList(()=>[{no:1,name:"data",kind:"map",K:9,V:{kind:"scalar",T:9}}])),zn);var Ln;let M1=(Ln=class extends yt{constructor(e){super();p(this,"serverSeq",se.zero);p(this,"clientSeq",0);T.util.initPartial(e,this)}static fromBinary(e,i){return new Ln().fromBinary(e,i)}static fromJson(e,i){return new Ln().fromJson(e,i)}static fromJsonString(e,i){return new Ln().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Ln,e,i)}},p(Ln,"runtime",T),p(Ln,"typeName","yorkie.v1.Checkpoint"),p(Ln,"fields",T.util.newFieldList(()=>[{no:1,name:"server_seq",kind:"scalar",T:3},{no:2,name:"client_seq",kind:"scalar",T:13}])),Ln);const Bi=class Bi extends yt{constructor(e){super();p(this,"createdAt");p(this,"offset",0);p(this,"relativeOffset",0);T.util.initPartial(e,this)}static fromBinary(e,i){return new Bi().fromBinary(e,i)}static fromJson(e,i){return new Bi().fromJson(e,i)}static fromJsonString(e,i){return new Bi().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Bi,e,i)}};p(Bi,"runtime",T),p(Bi,"typeName","yorkie.v1.TextNodePos"),p(Bi,"fields",T.util.newFieldList(()=>[{no:1,name:"created_at",kind:"message",T:wt},{no:2,name:"offset",kind:"scalar",T:5},{no:3,name:"relative_offset",kind:"scalar",T:5}]));let Ua=Bi;var _n;let wt=(_n=class extends yt{constructor(e){super();p(this,"lamport",se.zero);p(this,"delimiter",0);p(this,"actorId",new Uint8Array(0));T.util.initPartial(e,this)}static fromBinary(e,i){return new _n().fromBinary(e,i)}static fromJson(e,i){return new _n().fromJson(e,i)}static fromJsonString(e,i){return new _n().fromJsonString(e,i)}static equals(e,i){return T.util.equals(_n,e,i)}},p(_n,"runtime",T),p(_n,"typeName","yorkie.v1.TimeTicket"),p(_n,"fields",T.util.newFieldList(()=>[{no:1,name:"lamport",kind:"scalar",T:3},{no:2,name:"delimiter",kind:"scalar",T:13},{no:3,name:"actor_id",kind:"scalar",T:12}])),_n);const zi=class zi extends yt{constructor(e){super();p(this,"topic","");p(this,"payload",new Uint8Array(0));T.util.initPartial(e,this)}static fromBinary(e,i){return new zi().fromBinary(e,i)}static fromJson(e,i){return new zi().fromJson(e,i)}static fromJsonString(e,i){return new zi().fromJsonString(e,i)}static equals(e,i){return T.util.equals(zi,e,i)}};p(zi,"runtime",T),p(zi,"typeName","yorkie.v1.DocEventBody"),p(zi,"fields",T.util.newFieldList(()=>[{no:1,name:"topic",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:12}]));let Qm=zi;const Li=class Li extends yt{constructor(e){super();p(this,"type",0);p(this,"publisher","");p(this,"body");T.util.initPartial(e,this)}static fromBinary(e,i){return new Li().fromBinary(e,i)}static fromJson(e,i){return new Li().fromJson(e,i)}static fromJsonString(e,i){return new Li().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Li,e,i)}};p(Li,"runtime",T),p(Li,"typeName","yorkie.v1.DocEvent"),p(Li,"fields",T.util.newFieldList(()=>[{no:1,name:"type",kind:"enum",T:T.getEnumType(Ma)},{no:2,name:"publisher",kind:"scalar",T:9},{no:3,name:"body",kind:"message",T:Qm}]));let Wm=Li;const _i=class _i extends yt{constructor(e){super();p(this,"data",0);p(this,"meta",0);T.util.initPartial(e,this)}static fromBinary(e,i){return new _i().fromBinary(e,i)}static fromJson(e,i){return new _i().fromJson(e,i)}static fromJsonString(e,i){return new _i().fromJsonString(e,i)}static equals(e,i){return T.util.equals(_i,e,i)}};p(_i,"runtime",T),p(_i,"typeName","yorkie.v1.DataSize"),p(_i,"fields",T.util.newFieldList(()=>[{no:1,name:"data",kind:"scalar",T:5},{no:2,name:"meta",kind:"scalar",T:5}]));let Sd=_i;const Ui=class Ui extends yt{constructor(e){super();p(this,"live");p(this,"gc");T.util.initPartial(e,this)}static fromBinary(e,i){return new Ui().fromBinary(e,i)}static fromJson(e,i){return new Ui().fromJson(e,i)}static fromJsonString(e,i){return new Ui().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Ui,e,i)}};p(Ui,"runtime",T),p(Ui,"typeName","yorkie.v1.DocSize"),p(Ui,"fields",T.util.newFieldList(()=>[{no:1,name:"live",kind:"message",T:Sd},{no:2,name:"gc",kind:"message",T:Sd}]));let ty=Ui;const qi=class qi extends yt{constructor(e){super();p(this,"id","");p(this,"name","");p(this,"version",0);p(this,"body","");p(this,"rules",[]);p(this,"createdAt");T.util.initPartial(e,this)}static fromBinary(e,i){return new qi().fromBinary(e,i)}static fromJson(e,i){return new qi().fromJson(e,i)}static fromJsonString(e,i){return new qi().fromJsonString(e,i)}static equals(e,i){return T.util.equals(qi,e,i)}};p(qi,"runtime",T),p(qi,"typeName","yorkie.v1.Schema"),p(qi,"fields",T.util.newFieldList(()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"version",kind:"scalar",T:5},{no:4,name:"body",kind:"scalar",T:9},{no:5,name:"rules",kind:"message",T:xd,repeated:!0},{no:6,name:"created_at",kind:"message",T:Le}]));let _b=qi;const Pi=class Pi extends yt{constructor(e){super();p(this,"path","");p(this,"type","");T.util.initPartial(e,this)}static fromBinary(e,i){return new Pi().fromBinary(e,i)}static fromJson(e,i){return new Pi().fromJson(e,i)}static fromJsonString(e,i){return new Pi().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Pi,e,i)}};p(Pi,"runtime",T),p(Pi,"typeName","yorkie.v1.Rule"),p(Pi,"fields",T.util.newFieldList(()=>[{no:1,name:"path",kind:"scalar",T:9},{no:2,name:"type",kind:"scalar",T:9}]));let xd=Pi;const Ji=class Ji extends yt{constructor(e){super();p(this,"clientKey","");p(this,"metadata",{});T.util.initPartial(e,this)}static fromBinary(e,i){return new Ji().fromBinary(e,i)}static fromJson(e,i){return new Ji().fromJson(e,i)}static fromJsonString(e,i){return new Ji().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Ji,e,i)}};p(Ji,"runtime",T),p(Ji,"typeName","yorkie.v1.ActivateClientRequest"),p(Ji,"fields",T.util.newFieldList(()=>[{no:1,name:"client_key",kind:"scalar",T:9},{no:2,name:"metadata",kind:"map",K:9,V:{kind:"scalar",T:9}}]));let ey=Ji;const Hi=class Hi extends yt{constructor(e){super();p(this,"clientId","");T.util.initPartial(e,this)}static fromBinary(e,i){return new Hi().fromBinary(e,i)}static fromJson(e,i){return new Hi().fromJson(e,i)}static fromJsonString(e,i){return new Hi().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Hi,e,i)}};p(Hi,"runtime",T),p(Hi,"typeName","yorkie.v1.ActivateClientResponse"),p(Hi,"fields",T.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9}]));let ny=Hi;const $i=class $i extends yt{constructor(e){super();p(this,"clientId","");T.util.initPartial(e,this)}static fromBinary(e,i){return new $i().fromBinary(e,i)}static fromJson(e,i){return new $i().fromJson(e,i)}static fromJsonString(e,i){return new $i().fromJsonString(e,i)}static equals(e,i){return T.util.equals($i,e,i)}};p($i,"runtime",T),p($i,"typeName","yorkie.v1.DeactivateClientRequest"),p($i,"fields",T.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9}]));let ry=$i;const Vi=class Vi extends yt{constructor(t){super(),T.util.initPartial(t,this)}static fromBinary(t,e){return new Vi().fromBinary(t,e)}static fromJson(t,e){return new Vi().fromJson(t,e)}static fromJsonString(t,e){return new Vi().fromJsonString(t,e)}static equals(t,e){return T.util.equals(Vi,t,e)}};p(Vi,"runtime",T),p(Vi,"typeName","yorkie.v1.DeactivateClientResponse"),p(Vi,"fields",T.util.newFieldList(()=>[]));let iy=Vi;const ji=class ji extends yt{constructor(e){super();p(this,"clientId","");p(this,"changePack");p(this,"schemaKey","");T.util.initPartial(e,this)}static fromBinary(e,i){return new ji().fromBinary(e,i)}static fromJson(e,i){return new ji().fromJson(e,i)}static fromJsonString(e,i){return new ji().fromJsonString(e,i)}static equals(e,i){return T.util.equals(ji,e,i)}};p(ji,"runtime",T),p(ji,"typeName","yorkie.v1.AttachDocumentRequest"),p(ji,"fields",T.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"change_pack",kind:"message",T:ys},{no:3,name:"schema_key",kind:"scalar",T:9}]));let sy=ji;const Yi=class Yi extends yt{constructor(e){super();p(this,"documentId","");p(this,"changePack");p(this,"maxSizePerDocument",0);p(this,"schemaRules",[]);T.util.initPartial(e,this)}static fromBinary(e,i){return new Yi().fromBinary(e,i)}static fromJson(e,i){return new Yi().fromJson(e,i)}static fromJsonString(e,i){return new Yi().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Yi,e,i)}};p(Yi,"runtime",T),p(Yi,"typeName","yorkie.v1.AttachDocumentResponse"),p(Yi,"fields",T.util.newFieldList(()=>[{no:1,name:"document_id",kind:"scalar",T:9},{no:2,name:"change_pack",kind:"message",T:ys},{no:3,name:"max_size_per_document",kind:"scalar",T:5},{no:4,name:"schema_rules",kind:"message",T:xd,repeated:!0}]));let ay=Yi;const Gi=class Gi extends yt{constructor(e){super();p(this,"clientId","");p(this,"documentId","");p(this,"changePack");p(this,"removeIfNotAttached",!1);T.util.initPartial(e,this)}static fromBinary(e,i){return new Gi().fromBinary(e,i)}static fromJson(e,i){return new Gi().fromJson(e,i)}static fromJsonString(e,i){return new Gi().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Gi,e,i)}};p(Gi,"runtime",T),p(Gi,"typeName","yorkie.v1.DetachDocumentRequest"),p(Gi,"fields",T.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:ys},{no:4,name:"remove_if_not_attached",kind:"scalar",T:8}]));let oy=Gi;const Ki=class Ki extends yt{constructor(e){super();p(this,"changePack");T.util.initPartial(e,this)}static fromBinary(e,i){return new Ki().fromBinary(e,i)}static fromJson(e,i){return new Ki().fromJson(e,i)}static fromJsonString(e,i){return new Ki().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Ki,e,i)}};p(Ki,"runtime",T),p(Ki,"typeName","yorkie.v1.DetachDocumentResponse"),p(Ki,"fields",T.util.newFieldList(()=>[{no:2,name:"change_pack",kind:"message",T:ys}]));let ly=Ki;const Xi=class Xi extends yt{constructor(e){super();p(this,"clientId","");p(this,"documentId","");T.util.initPartial(e,this)}static fromBinary(e,i){return new Xi().fromBinary(e,i)}static fromJson(e,i){return new Xi().fromJson(e,i)}static fromJsonString(e,i){return new Xi().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Xi,e,i)}};p(Xi,"runtime",T),p(Xi,"typeName","yorkie.v1.WatchDocumentRequest"),p(Xi,"fields",T.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9}]));let uy=Xi;const Fi=class Fi extends yt{constructor(e){super();p(this,"body",{case:void 0});T.util.initPartial(e,this)}static fromBinary(e,i){return new Fi().fromBinary(e,i)}static fromJson(e,i){return new Fi().fromJson(e,i)}static fromJsonString(e,i){return new Fi().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Fi,e,i)}};p(Fi,"runtime",T),p(Fi,"typeName","yorkie.v1.WatchDocumentResponse"),p(Fi,"fields",T.util.newFieldList(()=>[{no:1,name:"initialization",kind:"message",T:fy,oneof:"body"},{no:2,name:"event",kind:"message",T:Wm,oneof:"body"}]));let cy=Fi;const Zi=class Zi extends yt{constructor(e){super();p(this,"clientIds",[]);T.util.initPartial(e,this)}static fromBinary(e,i){return new Zi().fromBinary(e,i)}static fromJson(e,i){return new Zi().fromJson(e,i)}static fromJsonString(e,i){return new Zi().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Zi,e,i)}};p(Zi,"runtime",T),p(Zi,"typeName","yorkie.v1.WatchDocumentResponse.Initialization"),p(Zi,"fields",T.util.newFieldList(()=>[{no:1,name:"client_ids",kind:"scalar",T:9,repeated:!0}]));let fy=Zi;const Qi=class Qi extends yt{constructor(e){super();p(this,"clientId","");p(this,"documentId","");p(this,"changePack");T.util.initPartial(e,this)}static fromBinary(e,i){return new Qi().fromBinary(e,i)}static fromJson(e,i){return new Qi().fromJson(e,i)}static fromJsonString(e,i){return new Qi().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Qi,e,i)}};p(Qi,"runtime",T),p(Qi,"typeName","yorkie.v1.RemoveDocumentRequest"),p(Qi,"fields",T.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:ys}]));let dy=Qi;const Wi=class Wi extends yt{constructor(e){super();p(this,"changePack");T.util.initPartial(e,this)}static fromBinary(e,i){return new Wi().fromBinary(e,i)}static fromJson(e,i){return new Wi().fromJson(e,i)}static fromJsonString(e,i){return new Wi().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Wi,e,i)}};p(Wi,"runtime",T),p(Wi,"typeName","yorkie.v1.RemoveDocumentResponse"),p(Wi,"fields",T.util.newFieldList(()=>[{no:1,name:"change_pack",kind:"message",T:ys}]));let hy=Wi;const ts=class ts extends yt{constructor(e){super();p(this,"clientId","");p(this,"documentId","");p(this,"changePack");p(this,"pushOnly",!1);T.util.initPartial(e,this)}static fromBinary(e,i){return new ts().fromBinary(e,i)}static fromJson(e,i){return new ts().fromJson(e,i)}static fromJsonString(e,i){return new ts().fromJsonString(e,i)}static equals(e,i){return T.util.equals(ts,e,i)}};p(ts,"runtime",T),p(ts,"typeName","yorkie.v1.PushPullChangesRequest"),p(ts,"fields",T.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:ys},{no:4,name:"push_only",kind:"scalar",T:8}]));let gy=ts;const es=class es extends yt{constructor(e){super();p(this,"changePack");T.util.initPartial(e,this)}static fromBinary(e,i){return new es().fromBinary(e,i)}static fromJson(e,i){return new es().fromJson(e,i)}static fromJsonString(e,i){return new es().fromJsonString(e,i)}static equals(e,i){return T.util.equals(es,e,i)}};p(es,"runtime",T),p(es,"typeName","yorkie.v1.PushPullChangesResponse"),p(es,"fields",T.util.newFieldList(()=>[{no:1,name:"change_pack",kind:"message",T:ys}]));let my=es;const ns=class ns extends yt{constructor(e){super();p(this,"clientId","");p(this,"documentId","");p(this,"topic","");p(this,"payload",new Uint8Array(0));T.util.initPartial(e,this)}static fromBinary(e,i){return new ns().fromBinary(e,i)}static fromJson(e,i){return new ns().fromJson(e,i)}static fromJsonString(e,i){return new ns().fromJsonString(e,i)}static equals(e,i){return T.util.equals(ns,e,i)}};p(ns,"runtime",T),p(ns,"typeName","yorkie.v1.BroadcastRequest"),p(ns,"fields",T.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"topic",kind:"scalar",T:9},{no:4,name:"payload",kind:"scalar",T:12}]));let yy=ns;const rs=class rs extends yt{constructor(t){super(),T.util.initPartial(t,this)}static fromBinary(t,e){return new rs().fromBinary(t,e)}static fromJson(t,e){return new rs().fromJson(t,e)}static fromJsonString(t,e){return new rs().fromJsonString(t,e)}static equals(t,e){return T.util.equals(rs,t,e)}};p(rs,"runtime",T),p(rs,"typeName","yorkie.v1.BroadcastResponse"),p(rs,"fields",T.util.newFieldList(()=>[]));let py=rs;const B2={typeName:"yorkie.v1.YorkieService",methods:{activateClient:{name:"ActivateClient",I:ey,O:ny,kind:Ge.Unary},deactivateClient:{name:"DeactivateClient",I:ry,O:iy,kind:Ge.Unary},attachDocument:{name:"AttachDocument",I:sy,O:ay,kind:Ge.Unary},detachDocument:{name:"DetachDocument",I:oy,O:ly,kind:Ge.Unary},removeDocument:{name:"RemoveDocument",I:dy,O:hy,kind:Ge.Unary},pushPullChanges:{name:"PushPullChanges",I:gy,O:my,kind:Ge.Unary},watchDocument:{name:"WatchDocument",I:uy,O:cy,kind:Ge.ServerStreaming},broadcast:{name:"Broadcast",I:yy,O:py,kind:Ge.Unary}}},z2=T.makeMessageType("google.rpc.ErrorInfo",()=>[{no:1,name:"reason",kind:"scalar",T:9},{no:2,name:"domain",kind:"scalar",T:9},{no:3,name:"metadata",kind:"map",K:9,V:{kind:"scalar",T:9}}]);T.makeMessageType("google.rpc.RetryInfo",()=>[{no:1,name:"retry_delay",kind:"message",T:as}]);T.makeMessageType("google.rpc.DebugInfo",()=>[{no:1,name:"stack_entries",kind:"scalar",T:9,repeated:!0},{no:2,name:"detail",kind:"scalar",T:9}]);T.makeMessageType("google.rpc.QuotaFailure",()=>[{no:1,name:"violations",kind:"message",T:L2,repeated:!0}]);const L2=T.makeMessageType("google.rpc.QuotaFailure.Violation",()=>[{no:1,name:"subject",kind:"scalar",T:9},{no:2,name:"description",kind:"scalar",T:9},{no:3,name:"api_service",kind:"scalar",T:9},{no:4,name:"quota_metric",kind:"scalar",T:9},{no:5,name:"quota_id",kind:"scalar",T:9},{no:6,name:"quota_dimensions",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:7,name:"quota_value",kind:"scalar",T:3},{no:8,name:"future_quota_value",kind:"scalar",T:3,opt:!0}],{localName:"QuotaFailure_Violation"});T.makeMessageType("google.rpc.PreconditionFailure",()=>[{no:1,name:"violations",kind:"message",T:_2,repeated:!0}]);const _2=T.makeMessageType("google.rpc.PreconditionFailure.Violation",()=>[{no:1,name:"type",kind:"scalar",T:9},{no:2,name:"subject",kind:"scalar",T:9},{no:3,name:"description",kind:"scalar",T:9}],{localName:"PreconditionFailure_Violation"});T.makeMessageType("google.rpc.BadRequest",()=>[{no:1,name:"field_violations",kind:"message",T:U2,repeated:!0}]);const U2=T.makeMessageType("google.rpc.BadRequest.FieldViolation",()=>[{no:1,name:"field",kind:"scalar",T:9},{no:2,name:"description",kind:"scalar",T:9},{no:3,name:"reason",kind:"scalar",T:9},{no:4,name:"localized_message",kind:"message",T:P2}],{localName:"BadRequest_FieldViolation"});T.makeMessageType("google.rpc.RequestInfo",()=>[{no:1,name:"request_id",kind:"scalar",T:9},{no:2,name:"serving_data",kind:"scalar",T:9}]);T.makeMessageType("google.rpc.ResourceInfo",()=>[{no:1,name:"resource_type",kind:"scalar",T:9},{no:2,name:"resource_name",kind:"scalar",T:9},{no:3,name:"owner",kind:"scalar",T:9},{no:4,name:"description",kind:"scalar",T:9}]);T.makeMessageType("google.rpc.Help",()=>[{no:1,name:"links",kind:"message",T:q2,repeated:!0}]);const q2=T.makeMessageType("google.rpc.Help.Link",()=>[{no:1,name:"description",kind:"scalar",T:9},{no:2,name:"url",kind:"scalar",T:9}],{localName:"Help_Link"}),P2=T.makeMessageType("google.rpc.LocalizedMessage",()=>[{no:1,name:"locale",kind:"scalar",T:9},{no:2,name:"message",kind:"scalar",T:9}]);var $=(n=>(n.Ok="ok",n.ErrClientNotActivated="ErrClientNotActivated",n.ErrClientNotFound="ErrClientNotFound",n.ErrUnimplemented="ErrUnimplemented",n.ErrInvalidType="ErrInvalidType",n.ErrDummy="ErrDummy",n.ErrDocumentNotAttached="ErrDocumentNotAttached",n.ErrDocumentNotDetached="ErrDocumentNotDetached",n.ErrDocumentRemoved="ErrDocumentRemoved",n.ErrDocumentSizeExceedsLimit="ErrDocumentSizeExceedsLimit",n.ErrDocumentSchemaValidationFailed="ErrDocumentSchemaValidationFailed",n.ErrInvalidObjectKey="ErrInvalidObjectKey",n.ErrInvalidArgument="ErrInvalidArgument",n.ErrNotInitialized="ErrNotInitialized",n.ErrNotReady="ErrNotReady",n.ErrRefused="ErrRefused",n.ErrContextNotProvided="ErrContextNotProvided",n.ErrPermissionDenied="ErrPermissionDenied",n.ErrUnauthenticated="ErrUnauthenticated",n.ErrTooManySubscribers="ErrTooManySubscribers",n.ErrTooManyAttachments="ErrTooManyAttachments",n))($||{});class Y extends Error{constructor(e,i){super(i);p(this,"name","YorkieError");p(this,"stack");this.code=e,this.message=i,this.toString=()=>`[code=${this.code}]: ${this.message}`}}var Cr=(n=>(n.Put="put",n.Clear="clear",n))(Cr||{});const Vd="000000000000000000000000",Tr=24;class Pn{constructor(t,e,i){p(this,"lamport");p(this,"delimiter");p(this,"actorID");this.lamport=t,this.delimiter=e,this.actorID=i}static of(t,e,i){return new Pn(t,e,i)}static fromStruct(t){return Pn.of(BigInt(t.lamport),t.delimiter,t.actorID)}toIDString(){return`${this.lamport.toString()}:${this.actorID}:${this.delimiter}`}toStruct(){return{lamport:this.getLamportAsString(),delimiter:this.getDelimiter(),actorID:this.getActorID()}}toTestString(){return`${this.lamport.toString()}:${this.actorID.slice(-2)}:${this.delimiter}`}setActor(t){return new Pn(this.lamport,this.delimiter,t)}getLamportAsString(){return this.lamport.toString()}getLamport(){return this.lamport}getDelimiter(){return this.delimiter}getActorID(){return this.actorID}after(t){return this.compare(t)>0}equals(t){return this.compare(t)===0}compare(t){if(this.lamport>t.lamport)return 1;if(t.lamport>this.lamport)return-1;const e=this.actorID.localeCompare(t.actorID);return e!==0?e:this.delimiter>t.delimiter?1:t.delimiter>this.delimiter?-1:0}}const vy=0n,B1=0,Eu=9223372036854775807n,Ko=new Pn(vy,B1,Vd);function Sr(n){return n.replace(/["'\\\n\r\f\b\t\u2028\u2029]/g,function(t){switch(t){case'"':case"\\":return"\\"+t;case`
`:return"\\n";case"\r":return"\\r";case"\f":return"\\f";case"\b":return"\\b";case"	":return"\\t";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:return t}})}class Zu{constructor(t){p(this,"createdAt");p(this,"movedAt");p(this,"removedAt");this.createdAt=t}getCreatedAt(){return this.createdAt}getID(){return this.createdAt}getMovedAt(){return this.movedAt}getRemovedAt(){return this.removedAt}getPositionedAt(){return this.movedAt?this.movedAt:this.createdAt}setMovedAt(t){return!this.movedAt||t&&t.after(this.movedAt)?(this.movedAt=t,!0):!1}setRemovedAt(t){this.removedAt=t}remove(t){return t&&t.after(this.createdAt)&&(!this.removedAt||t.after(this.removedAt))?(this.removedAt=t,!0):!1}isRemoved(){return!!this.removedAt}getMetaUsage(){let t=0;return this.getCreatedAt()&&(t+=Tr),this.getMovedAt()&&(t+=Tr),this.getRemovedAt()&&(t+=Tr),t}}class ta extends Zu{constructor(t){super(t)}}class Py{constructor(t,e){p(this,"strKey");p(this,"value");this.strKey=t,this.value=e}static of(t,e){return new Py(t,e)}isRemoved(){return this.value.isRemoved()}getStrKey(){return this.strKey}getValue(){return this.value}remove(t){return this.value.remove(t)}}class zu{constructor(){p(this,"nodeMapByKey");p(this,"nodeMapByCreatedAt");this.nodeMapByKey=new Map,this.nodeMapByCreatedAt=new Map}static create(){return new zu}set(t,e,i){let a;const l=this.nodeMapByKey.get(t);l!=null&&!l.isRemoved()&&l.remove(i)&&(a=l.getValue());const c=Py.of(t,e);return this.nodeMapByCreatedAt.set(e.getCreatedAt().toIDString(),c),(l==null||i.after(l.getValue().getPositionedAt()))&&(this.nodeMapByKey.set(t,c),e.setMovedAt(i)),a}delete(t,e){if(!this.nodeMapByCreatedAt.has(t.toIDString()))throw new Y($.ErrInvalidArgument,`fail to find ${t.toIDString()}`);const i=this.nodeMapByCreatedAt.get(t.toIDString());return i.remove(e),i.getValue()}subPathOf(t){const e=this.nodeMapByCreatedAt.get(t.toIDString());if(e)return e.getStrKey()}purge(t){const e=this.nodeMapByCreatedAt.get(t.getCreatedAt().toIDString());if(!e)throw new Y($.ErrInvalidArgument,`fail to find ${t.getCreatedAt().toIDString()}`);const i=this.nodeMapByKey.get(e.getStrKey());e===i&&this.nodeMapByKey.delete(i.getStrKey()),this.nodeMapByCreatedAt.delete(e.getValue().getCreatedAt().toIDString())}deleteByKey(t,e){const i=this.nodeMapByKey.get(t);if(i!=null&&i.remove(e))return i.getValue()}has(t){const e=this.nodeMapByKey.get(t);return e==null?!1:!e.isRemoved()}getByID(t){return this.nodeMapByCreatedAt.get(t.toIDString())}get(t){const e=this.nodeMapByKey.get(t);if(!(!e||e.isRemoved()))return e}*[Symbol.iterator](){for(const[,t]of this.nodeMapByKey)yield t}}class He extends ta{constructor(e,i){super(e);p(this,"memberNodes");this.memberNodes=i}static create(e,i){if(!i)return new He(e,zu.create());const a=zu.create();for(const[l,c]of Object.entries(i))a.set(l,c.deepcopy(),c.getCreatedAt());return new He(e,a)}subPathOf(e){return this.memberNodes.subPathOf(e)}purge(e){this.memberNodes.purge(e)}set(e,i,a){return this.memberNodes.set(e,i,a)}delete(e,i){return this.memberNodes.delete(e,i)}deleteByKey(e,i){return this.memberNodes.deleteByKey(e,i)}get(e){const i=this.memberNodes.get(e);return i==null?void 0:i.getValue()}getByID(e){const i=this.memberNodes.getByID(e);return i==null?void 0:i.getValue()}has(e){return this.memberNodes.has(e)}getDataSize(){return{data:0,meta:this.getMetaUsage()}}toJSON(){const e=[];for(const[i,a]of this)e.push(`"${Sr(i)}":${a.toJSON()}`);return`{${e.join(",")}}`}toJS(){return JSON.parse(this.toJSON())}toJSForTest(){const e={};for(const[i,a]of this){const{createdAt:l,value:c,type:d}=a.toJSForTest();e[i]={key:i,createdAt:l,value:c,type:d}}return{createdAt:this.getCreatedAt().toTestString(),value:e,type:"YORKIE_OBJECT"}}getKeys(){const e=Array();for(const[i]of this)e.push(i);return e}toSortedJSON(){var a;const e=Array();for(const[l]of this)e.push(l);const i=[];for(const l of e.sort()){const c=(a=this.memberNodes.get(l))==null?void 0:a.getValue();i.push(`"${Sr(l)}":${c.toSortedJSON()}`)}return`{${i.join(",")}}`}getRHT(){return this.memberNodes}deepcopy(){const e=He.create(this.getCreatedAt());for(const i of this.memberNodes)e.memberNodes.set(i.getStrKey(),i.getValue().deepcopy(),this.getPositionedAt());return e.remove(this.getRemovedAt()),e}getDescendants(e){for(const i of this.memberNodes){const a=i.getValue();if(e(a,this))return;a instanceof ta&&a.getDescendants(e)}}*[Symbol.iterator](){const e=new Set;for(const i of this.memberNodes)e.has(i.getStrKey())||(e.add(i.getStrKey()),i.isRemoved()||(yield[i.getStrKey(),i.getValue()]))}}var ne=(n=>(n.Local="local",n.Remote="remote",n.UndoRedo="undoredo",n))(ne||{});class Jn{constructor(t,e){p(this,"parentCreatedAt");p(this,"executedAt");this.parentCreatedAt=t,this.executedAt=e}getParentCreatedAt(){return this.parentCreatedAt}getExecutedAt(){if(!this.executedAt)throw new Y($.ErrNotReady,"executedAt is not set yet");return this.executedAt}setActor(t){this.executedAt&&(this.executedAt=this.executedAt.setActor(t))}setExecutedAt(t){this.executedAt=t}}class z1{constructor(t){p(this,"value");p(this,"left");p(this,"right");p(this,"parent");p(this,"weight");this.value=t,this.initWeight()}getNodeString(){return`${this.weight}${this.value}`}getValue(){return this.value}getLeftWeight(){return this.hasLeft()?this.left.getWeight():0}getRightWeight(){return this.hasRight()?this.right.getWeight():0}getWeight(){return this.weight}getLeft(){return this.left}getRight(){return this.right}getParent(){return this.parent}hasLeft(){return!!this.left}hasRight(){return!!this.right}hasParent(){return!!this.parent}setLeft(t){this.left=t}setRight(t){this.right=t}setParent(t){this.parent=t}unlink(){this.parent=void 0,this.right=void 0,this.left=void 0}hasLinks(){return this.hasParent()||this.hasLeft()||this.hasRight()}increaseWeight(t){this.weight+=t}initWeight(){this.weight=this.getLength()}}class Lu{constructor(t){p(this,"root");this.root=t}get length(){return this.root?this.root.getWeight():0}find(t){if(!this.root||t<0)return[void 0,0];let e=this.root;for(;;)if(e.hasLeft()&&t<=e.getLeftWeight())e=e.getLeft();else if(e.hasRight()&&e.getLeftWeight()+e.getLength()<t)t-=e.getLeftWeight()+e.getLength(),e=e.getRight();else{t-=e.getLeftWeight();break}if(t>e.getLength())throw new Y($.ErrInvalidArgument,`out of index range: pos: ${t} > node.length: ${e.getLength()}`);return this.splayNode(e),[e,t]}indexOf(t){return!t||t!==this.root&&!t.hasLinks()?-1:(this.splayNode(t),this.root.getLeftWeight())}getRoot(){return this.root}insert(t){return this.insertAfter(this.root,t)}insertAfter(t,e){return t?(this.splayNode(t),this.root=e,e.setRight(t.getRight()),t.hasRight()&&t.getRight().setParent(e),e.setLeft(t),t.setParent(e),t.setRight(),this.updateWeight(t),this.updateWeight(e),e):(this.root=e,e)}updateWeight(t){t.initWeight(),t.hasLeft()&&t.increaseWeight(t.getLeftWeight()),t.hasRight()&&t.increaseWeight(t.getRightWeight())}updateTreeWeight(t){for(;t;)this.updateWeight(t),t=t.getParent()}splayNode(t){if(t)for(;;)if(this.isLeftChild(t.getParent())&&this.isRightChild(t))this.rotateLeft(t),this.rotateRight(t);else if(this.isRightChild(t.getParent())&&this.isLeftChild(t))this.rotateRight(t),this.rotateLeft(t);else if(this.isLeftChild(t.getParent())&&this.isLeftChild(t))this.rotateRight(t.getParent()),this.rotateRight(t);else if(this.isRightChild(t.getParent())&&this.isRightChild(t))this.rotateLeft(t.getParent()),this.rotateLeft(t);else{this.isLeftChild(t)?this.rotateRight(t):this.isRightChild(t)&&this.rotateLeft(t),this.updateWeight(t);return}}delete(t){this.splayNode(t);const e=new Lu(t.getLeft());e.root&&e.root.setParent();const i=new Lu(t.getRight());if(i.root&&i.root.setParent(),e.root){const a=e.getRightmost();e.splayNode(a),e.root.setRight(i.root),i.root&&i.root.setParent(e.root),this.root=e.root}else this.root=i.root;t.unlink(),this.root&&this.updateWeight(this.root)}deleteRange(t,e){if(!e){this.splayNode(t),this.cutOffRight(t);return}this.splayNode(t),this.splayNode(e),e.getLeft()!=t&&this.rotateRight(t),this.cutOffRight(t)}cutOffRight(t){const e=[];this.traversePostorder(t.getRight(),e);for(const i of e)i.initWeight();this.updateTreeWeight(t)}toTestString(){const t=[];return this.traverseInorder(this.root,t),t.map(e=>`[${e.getWeight()},${e.getLength()}]${e.getValue()||""}`).join("")}checkWeight(){const t=[];this.traverseInorder(this.root,t);for(const e of t)if(e.getWeight()!=e.getLength()+e.getLeftWeight()+e.getRightWeight())return!1;return!0}getRightmost(){let t=this.root;for(;t.hasRight();)t=t.getRight();return t}traverseInorder(t,e){t&&(this.traverseInorder(t.getLeft(),e),e.push(t),this.traverseInorder(t.getRight(),e))}traversePostorder(t,e){t&&(this.traversePostorder(t.getLeft(),e),this.traversePostorder(t.getRight(),e),e.push(t))}rotateLeft(t){const e=t.getParent();e.hasParent()?e===e.getParent().getLeft()?e.getParent().setLeft(t):e.getParent().setRight(t):this.root=t,t.setParent(e.getParent()),e.setRight(t.getLeft()),e.hasRight()&&e.getRight().setParent(e),t.setLeft(e),t.getLeft().setParent(t),this.updateWeight(e),this.updateWeight(t)}rotateRight(t){const e=t.getParent();e.hasParent()?e===e.getParent().getLeft()?e.getParent().setLeft(t):e.getParent().setRight(t):this.root=t,t.setParent(e.getParent()),e.setLeft(t.getRight()),e.hasLeft()&&e.getLeft().setParent(e),t.setRight(e),t.getRight().setParent(t),this.updateWeight(e),this.updateWeight(t)}isLeftChild(t){return t&&t.hasParent()?t.getParent().getLeft()===t:!1}isRightChild(t){return t&&t.hasParent()?t.getParent().getRight()===t:!1}}/**
 * @license
 * Copyright 2009 The Closure Library Authors
 * Copyright 2020 Daniel Wirtz / The long.js Authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * SPDX-License-Identifier: Apache-2.0
 */var Un=null;try{Un=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function Pt(n,t,e){this.low=n|0,this.high=t|0,this.unsigned=!!e}Pt.prototype.__isLong__;Object.defineProperty(Pt.prototype,"__isLong__",{value:!0});function Ve(n){return(n&&n.__isLong__)===!0}function Ub(n){var t=Math.clz32(n&-n);return n?31-t:t}Pt.isLong=Ve;var qb={},Pb={};function $a(n,t){var e,i,a;return t?(n>>>=0,(a=0<=n&&n<256)&&(i=Pb[n],i)?i:(e=Vt(n,0,!0),a&&(Pb[n]=e),e)):(n|=0,(a=-128<=n&&n<128)&&(i=qb[n],i)?i:(e=Vt(n,n<0?-1:0,!1),a&&(qb[n]=e),e))}Pt.fromInt=$a;function qn(n,t){if(isNaN(n))return t?ls:Wn;if(t){if(n<0)return ls;if(n>=L1)return q1}else{if(n<=-Hb)return nn;if(n+1>=Hb)return U1}return n<0?qn(-n,t).neg():Vt(n%Xo|0,n/Xo|0,t)}Pt.fromNumber=qn;function Vt(n,t,e){return new Pt(n,t,e)}Pt.fromBits=Vt;var Td=Math.pow;function Jy(n,t,e){if(n.length===0)throw Error("empty string");if(typeof t=="number"?(e=t,t=!1):t=!!t,n==="NaN"||n==="Infinity"||n==="+Infinity"||n==="-Infinity")return t?ls:Wn;if(e=e||10,e<2||36<e)throw RangeError("radix");var i;if((i=n.indexOf("-"))>0)throw Error("interior hyphen");if(i===0)return Jy(n.substring(1),t,e).neg();for(var a=qn(Td(e,8)),l=Wn,c=0;c<n.length;c+=8){var d=Math.min(8,n.length-c),h=parseInt(n.substring(c,c+d),e);if(d<8){var g=qn(Td(e,d));l=l.mul(g).add(qn(h))}else l=l.mul(a),l=l.add(qn(h))}return l.unsigned=t,l}Pt.fromString=Jy;function Hn(n,t){return typeof n=="number"?qn(n,t):typeof n=="string"?Jy(n,t):Vt(n.low,n.high,typeof t=="boolean"?t:n.unsigned)}Pt.fromValue=Hn;var Jb=65536,J2=1<<24,Xo=Jb*Jb,L1=Xo*Xo,Hb=L1/2,$b=$a(J2),Wn=$a(0);Pt.ZERO=Wn;var ls=$a(0,!0);Pt.UZERO=ls;var zo=$a(1);Pt.ONE=zo;var _1=$a(1,!0);Pt.UONE=_1;var wy=$a(-1);Pt.NEG_ONE=wy;var U1=Vt(-1,2147483647,!1);Pt.MAX_VALUE=U1;var q1=Vt(-1,-1,!0);Pt.MAX_UNSIGNED_VALUE=q1;var nn=Vt(0,-2147483648,!1);Pt.MIN_VALUE=nn;var ht=Pt.prototype;ht.toInt=function(){return this.unsigned?this.low>>>0:this.low};ht.toNumber=function(){return this.unsigned?(this.high>>>0)*Xo+(this.low>>>0):this.high*Xo+(this.low>>>0)};ht.toString=function(t){if(t=t||10,t<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(nn)){var e=qn(t),i=this.div(e),a=i.mul(e).sub(this);return i.toString(t)+a.toInt().toString(t)}else return"-"+this.neg().toString(t);for(var l=qn(Td(t,6),this.unsigned),c=this,d="";;){var h=c.div(l),g=c.sub(h.mul(l)).toInt()>>>0,y=g.toString(t);if(c=h,c.isZero())return y+d;for(;y.length<6;)y="0"+y;d=""+y+d}};ht.getHighBits=function(){return this.high};ht.getHighBitsUnsigned=function(){return this.high>>>0};ht.getLowBits=function(){return this.low};ht.getLowBitsUnsigned=function(){return this.low>>>0};ht.getNumBitsAbs=function(){if(this.isNegative())return this.eq(nn)?64:this.neg().getNumBitsAbs();for(var t=this.high!=0?this.high:this.low,e=31;e>0&&(t&1<<e)==0;e--);return this.high!=0?e+33:e+1};ht.isSafeInteger=function(){var t=this.high>>21;return t?this.unsigned?!1:t===-1&&!(this.low===0&&this.high===-2097152):!0};ht.isZero=function(){return this.high===0&&this.low===0};ht.eqz=ht.isZero;ht.isNegative=function(){return!this.unsigned&&this.high<0};ht.isPositive=function(){return this.unsigned||this.high>=0};ht.isOdd=function(){return(this.low&1)===1};ht.isEven=function(){return(this.low&1)===0};ht.equals=function(t){return Ve(t)||(t=Hn(t)),this.unsigned!==t.unsigned&&this.high>>>31===1&&t.high>>>31===1?!1:this.high===t.high&&this.low===t.low};ht.eq=ht.equals;ht.notEquals=function(t){return!this.eq(t)};ht.neq=ht.notEquals;ht.ne=ht.notEquals;ht.lessThan=function(t){return this.comp(t)<0};ht.lt=ht.lessThan;ht.lessThanOrEqual=function(t){return this.comp(t)<=0};ht.lte=ht.lessThanOrEqual;ht.le=ht.lessThanOrEqual;ht.greaterThan=function(t){return this.comp(t)>0};ht.gt=ht.greaterThan;ht.greaterThanOrEqual=function(t){return this.comp(t)>=0};ht.gte=ht.greaterThanOrEqual;ht.ge=ht.greaterThanOrEqual;ht.compare=function(t){if(Ve(t)||(t=Hn(t)),this.eq(t))return 0;var e=this.isNegative(),i=t.isNegative();return e&&!i?-1:!e&&i?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1};ht.comp=ht.compare;ht.negate=function(){return!this.unsigned&&this.eq(nn)?nn:this.not().add(zo)};ht.neg=ht.negate;ht.add=function(t){Ve(t)||(t=Hn(t));var e=this.high>>>16,i=this.high&65535,a=this.low>>>16,l=this.low&65535,c=t.high>>>16,d=t.high&65535,h=t.low>>>16,g=t.low&65535,y=0,w=0,v=0,b=0;return b+=l+g,v+=b>>>16,b&=65535,v+=a+h,w+=v>>>16,v&=65535,w+=i+d,y+=w>>>16,w&=65535,y+=e+c,y&=65535,Vt(v<<16|b,y<<16|w,this.unsigned)};ht.subtract=function(t){return Ve(t)||(t=Hn(t)),this.add(t.neg())};ht.sub=ht.subtract;ht.multiply=function(t){if(this.isZero())return this;if(Ve(t)||(t=Hn(t)),Un){var e=Un.mul(this.low,this.high,t.low,t.high);return Vt(e,Un.get_high(),this.unsigned)}if(t.isZero())return this.unsigned?ls:Wn;if(this.eq(nn))return t.isOdd()?nn:Wn;if(t.eq(nn))return this.isOdd()?nn:Wn;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt($b)&&t.lt($b))return qn(this.toNumber()*t.toNumber(),this.unsigned);var i=this.high>>>16,a=this.high&65535,l=this.low>>>16,c=this.low&65535,d=t.high>>>16,h=t.high&65535,g=t.low>>>16,y=t.low&65535,w=0,v=0,b=0,x=0;return x+=c*y,b+=x>>>16,x&=65535,b+=l*y,v+=b>>>16,b&=65535,b+=c*g,v+=b>>>16,b&=65535,v+=a*y,w+=v>>>16,v&=65535,v+=l*g,w+=v>>>16,v&=65535,v+=c*h,w+=v>>>16,v&=65535,w+=i*y+a*g+l*h+c*d,w&=65535,Vt(b<<16|x,w<<16|v,this.unsigned)};ht.mul=ht.multiply;ht.divide=function(t){if(Ve(t)||(t=Hn(t)),t.isZero())throw Error("division by zero");if(Un){if(!this.unsigned&&this.high===-2147483648&&t.low===-1&&t.high===-1)return this;var e=(this.unsigned?Un.div_u:Un.div_s)(this.low,this.high,t.low,t.high);return Vt(e,Un.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?ls:Wn;var i,a,l;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return ls;if(t.gt(this.shru(1)))return _1;l=ls}else{if(this.eq(nn)){if(t.eq(zo)||t.eq(wy))return nn;if(t.eq(nn))return zo;var c=this.shr(1);return i=c.div(t).shl(1),i.eq(Wn)?t.isNegative()?zo:wy:(a=this.sub(t.mul(i)),l=i.add(a.div(t)),l)}else if(t.eq(nn))return this.unsigned?ls:Wn;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();l=Wn}for(a=this;a.gte(t);){i=Math.max(1,Math.floor(a.toNumber()/t.toNumber()));for(var d=Math.ceil(Math.log(i)/Math.LN2),h=d<=48?1:Td(2,d-48),g=qn(i),y=g.mul(t);y.isNegative()||y.gt(a);)i-=h,g=qn(i,this.unsigned),y=g.mul(t);g.isZero()&&(g=zo),l=l.add(g),a=a.sub(y)}return l};ht.div=ht.divide;ht.modulo=function(t){if(Ve(t)||(t=Hn(t)),Un){var e=(this.unsigned?Un.rem_u:Un.rem_s)(this.low,this.high,t.low,t.high);return Vt(e,Un.get_high(),this.unsigned)}return this.sub(this.div(t).mul(t))};ht.mod=ht.modulo;ht.rem=ht.modulo;ht.not=function(){return Vt(~this.low,~this.high,this.unsigned)};ht.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32};ht.clz=ht.countLeadingZeros;ht.countTrailingZeros=function(){return this.low?Ub(this.low):Ub(this.high)+32};ht.ctz=ht.countTrailingZeros;ht.and=function(t){return Ve(t)||(t=Hn(t)),Vt(this.low&t.low,this.high&t.high,this.unsigned)};ht.or=function(t){return Ve(t)||(t=Hn(t)),Vt(this.low|t.low,this.high|t.high,this.unsigned)};ht.xor=function(t){return Ve(t)||(t=Hn(t)),Vt(this.low^t.low,this.high^t.high,this.unsigned)};ht.shiftLeft=function(t){return Ve(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?Vt(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):Vt(0,this.low<<t-32,this.unsigned)};ht.shl=ht.shiftLeft;ht.shiftRight=function(t){return Ve(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?Vt(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):Vt(this.high>>t-32,this.high>=0?0:-1,this.unsigned)};ht.shr=ht.shiftRight;ht.shiftRightUnsigned=function(t){return Ve(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?Vt(this.low>>>t|this.high<<32-t,this.high>>>t,this.unsigned):t===32?Vt(this.high,0,this.unsigned):Vt(this.high>>>t-32,0,this.unsigned)};ht.shru=ht.shiftRightUnsigned;ht.shr_u=ht.shiftRightUnsigned;ht.rotateLeft=function(t){var e;return Ve(t)&&(t=t.toInt()),(t&=63)===0?this:t===32?Vt(this.high,this.low,this.unsigned):t<32?(e=32-t,Vt(this.low<<t|this.high>>>e,this.high<<t|this.low>>>e,this.unsigned)):(t-=32,e=32-t,Vt(this.high<<t|this.low>>>e,this.low<<t|this.high>>>e,this.unsigned))};ht.rotl=ht.rotateLeft;ht.rotateRight=function(t){var e;return Ve(t)&&(t=t.toInt()),(t&=63)===0?this:t===32?Vt(this.high,this.low,this.unsigned):t<32?(e=32-t,Vt(this.high<<e|this.low>>>t,this.low<<e|this.high>>>t,this.unsigned)):(t-=32,e=32-t,Vt(this.low<<e|this.high>>>t,this.high<<e|this.low>>>t,this.unsigned))};ht.rotr=ht.rotateRight;ht.toSigned=function(){return this.unsigned?Vt(this.low,this.high,!1):this};ht.toUnsigned=function(){return this.unsigned?this:Vt(this.low,this.high,!0)};ht.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()};ht.toBytesLE=function(){var t=this.high,e=this.low;return[e&255,e>>>8&255,e>>>16&255,e>>>24,t&255,t>>>8&255,t>>>16&255,t>>>24]};ht.toBytesBE=function(){var t=this.high,e=this.low;return[t>>>24,t>>>16&255,t>>>8&255,t&255,e>>>24,e>>>16&255,e>>>8&255,e&255]};Pt.fromBytes=function(t,e,i){return i?Pt.fromBytesLE(t,e):Pt.fromBytesBE(t,e)};Pt.fromBytesLE=function(t,e){return new Pt(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,e)};Pt.fromBytesBE=function(t,e){return new Pt(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],e)};typeof BigInt=="function"&&(Pt.fromBigInt=function(t,e){var i=Number(BigInt.asIntN(32,t)),a=Number(BigInt.asIntN(32,t>>BigInt(32)));return Vt(i,a,e)},Pt.fromValue=function(t,e){return typeof t=="bigint"?Pt.fromBigInt(t,e):Hn(t,e)},ht.toBigInt=function(){var t=BigInt(this.low>>>0),e=BigInt(this.unsigned?this.high>>>0:this.high);return e<<BigInt(32)|t});var re=(n=>(n[n.Null=0]="Null",n[n.Boolean=1]="Boolean",n[n.Integer=2]="Integer",n[n.Long=3]="Long",n[n.Double=4]="Double",n[n.String=5]="String",n[n.Bytes=6]="Bytes",n[n.Date=7]="Date",n))(re||{});class ce extends Zu{constructor(e,i){super(i);p(this,"valueType");p(this,"value");this.valueType=ce.getPrimitiveType(e),this.value=e===void 0?null:e}static of(e,i){return new ce(e,i)}static valueFromBytes(e,i){switch(e){case 0:return null;case 1:return!!i[0];case 2:return i[0]|i[1]<<8|i[2]<<16|i[3]<<24;case 4:{const a=new DataView(i.buffer);return i.forEach(function(l,c){a.setUint8(c,l)}),a.getFloat64(0,!0)}case 5:return new TextDecoder("utf-8").decode(i);case 3:return Pt.fromBytesLE(Array.from(i));case 6:return i;case 7:return new Date(Pt.fromBytesLE(Array.from(i),!0).toNumber());default:throw new Y($.ErrUnimplemented,`unimplemented type: ${e}`)}}getValueSize(){switch(this.valueType){case 0:return 8;case 1:return 4;case 2:return 4;case 3:return 8;case 4:return 8;case 5:return this.value.length*2;case 6:return this.value.length;case 7:return 8;default:throw new Y($.ErrUnimplemented,`unimplemented type: ${this.valueType}`)}}getDataSize(){return{data:this.getValueSize(),meta:this.getMetaUsage()}}toJSON(){return this.valueType===5?`"${Sr(this.value)}"`:`${this.value}`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:this.value,type:"YORKIE_PRIMITIVE"}}deepcopy(){const e=ce.of(this.value,this.getCreatedAt());return e.setMovedAt(this.getMovedAt()),e.setRemovedAt(this.getRemovedAt()),e}getType(){return this.valueType}static getPrimitiveType(e){switch(typeof e){case"undefined":return 0;case"boolean":return 1;case"number":return this.isInteger(e)?2:4;case"string":return 5;case"object":if(e===null)return 0;if(e instanceof Pt)return 3;if(e instanceof Uint8Array)return 6;if(e instanceof Date)return 7}}static isSupport(e){return ce.getPrimitiveType(e)!==void 0}static isInteger(e){return e%1===0}isNumericType(){const e=this.valueType;return e===2||e===3||e===4}getValue(){return this.value}toBytes(){switch(this.valueType){case 0:return new Uint8Array;case 1:return this.value?new Uint8Array([1]):new Uint8Array([0]);case 2:{const e=this.value;return new Uint8Array([e&255,e>>8&255,e>>16&255,e>>24&255])}case 4:{const e=this.value,i=new Uint8Array(8);return new DataView(i.buffer).setFloat64(0,e,!0),i}case 5:return new TextEncoder().encode(this.value);case 3:{const i=this.value.toBytesLE();return Uint8Array.from(i)}case 6:return this.value;case 7:{const e=this.value,i=Pt.fromNumber(e.getTime(),!0).toBytesLE();return Uint8Array.from(i)}default:throw new Y($.ErrUnimplemented,`unimplemented type: ${this.valueType}`)}}}class Ad extends z1{constructor(e){super(e);p(this,"prev");p(this,"next");p(this,"movedFrom");this.value=e}static createAfter(e,i){const a=new Ad(i),l=e.next;return e.next=a,a.prev=e,a.next=l,l&&(l.prev=a),a}remove(e){return this.value.remove(e)}getCreatedAt(){return this.value.getCreatedAt()}getPositionedAt(){return this.value.getPositionedAt()}release(){this.prev&&(this.prev.next=this.next),this.next&&(this.next.prev=this.prev),this.prev=void 0,this.next=void 0}getLength(){return this.value.isRemoved()?0:1}getPrev(){return this.prev}getNext(){return this.next}getMovedFrom(){return this.movedFrom}setMovedFrom(e){this.movedFrom=e}getValue(){return this.value}isRemoved(){return this.value.isRemoved()}}class _u{constructor(){p(this,"dummyHead");p(this,"last");p(this,"nodeMapByIndex");p(this,"nodeMapByCreatedAt");const t=ce.of(0,Ko);t.setRemovedAt(Ko),this.dummyHead=new Ad(t),this.last=this.dummyHead,this.nodeMapByIndex=new Lu,this.nodeMapByCreatedAt=new Map,this.nodeMapByIndex.insert(this.dummyHead),this.nodeMapByCreatedAt.set(this.dummyHead.getCreatedAt().toIDString(),this.dummyHead)}static create(){return new _u}get length(){return this.nodeMapByIndex.length}findNextBeforeExecutedAt(t,e){let i=this.nodeMapByCreatedAt.get(t.toIDString());if(!i)throw new Y($.ErrInvalidArgument,`cant find the given node: ${t.toIDString()}`);for(;i.getValue().getMovedAt()&&i.getValue().getMovedAt().after(e)&&i.getMovedFrom();)i=i.getMovedFrom();for(;i.getNext()&&i.getNext().getPositionedAt().after(e);)i=i.getNext();return i}release(t){this.last===t&&(this.last=t.getPrev()),t.release(),this.nodeMapByIndex.delete(t),this.nodeMapByCreatedAt.delete(t.getValue().getCreatedAt().toIDString())}insertAfter(t,e,i=e.getCreatedAt()){const a=this.findNextBeforeExecutedAt(t,i),l=Ad.createAfter(a,e);return a===this.last&&(this.last=l),this.nodeMapByIndex.insertAfter(a,l),this.nodeMapByCreatedAt.set(l.getCreatedAt().toIDString(),l),l}moveAfter(t,e,i){let a=this.nodeMapByCreatedAt.get(t.toIDString());if(!a)throw new Y($.ErrInvalidArgument,`cant find the given node: ${t.toIDString()}`);let l=this.nodeMapByCreatedAt.get(e.toIDString());if(!l)throw new Y($.ErrInvalidArgument,`cant find the given node: ${e.toIDString()}`);if(a!==l&&i.after(l.getPositionedAt())){const c=l.getPrev();let d=l.getNext();for(this.release(l),l=this.insertAfter(a.getCreatedAt(),l.getValue(),i),l.getValue().setMovedAt(i),l.setMovedFrom(c);d&&d.getPositionedAt().after(i);)a=l,l=d,d=l.getNext(),this.release(l),l=this.insertAfter(a.getCreatedAt(),l.getValue(),i),l.getValue().setMovedAt(i),l.setMovedFrom(c)}}insert(t){this.insertAfter(this.last.getCreatedAt(),t)}getByID(t){return this.nodeMapByCreatedAt.get(t.toIDString())}subPathOf(t){const e=this.nodeMapByCreatedAt.get(t.toIDString());if(e)return String(this.nodeMapByIndex.indexOf(e))}purge(t){const e=this.nodeMapByCreatedAt.get(t.getCreatedAt().toIDString());if(!e)throw new Y($.ErrInvalidArgument,`fail to find the given createdAt: ${t.getCreatedAt().toIDString()}`);this.release(e)}getByIndex(t){if(t>=this.length)return;const[e,i]=this.nodeMapByIndex.find(t);let a=e;if(t===0&&e===this.dummyHead||i>0)do a&&(a=a.getNext());while(a&&a.isRemoved());return a}getPrevCreatedAt(t){let e=this.nodeMapByCreatedAt.get(t.toIDString());do e=e.getPrev();while(this.dummyHead!==e&&e.isRemoved());return e.getValue().getCreatedAt()}delete(t,e){const i=this.nodeMapByCreatedAt.get(t.toIDString()),a=i.isRemoved();return i.remove(e)&&!a&&this.nodeMapByIndex.splayNode(i),i.getValue()}set(t,e,i){const a=this.nodeMapByCreatedAt.get(t.toIDString());if(!a)throw new Y($.ErrInvalidArgument,`cant find the given node: ${t.toIDString()}`);return this.insertAfter(a.getCreatedAt(),e,i),this.delete(t,i)}deleteByIndex(t,e){const i=this.getByIndex(t);if(i)return i.remove(e)&&this.nodeMapByIndex.splayNode(i),i.getValue()}getHead(){return this.dummyHead.getValue()}getLast(){return this.last.getValue()}getLastCreatedAt(){return this.last.getCreatedAt()}toTestString(){const t=[];for(const e of this){const i=`${e.getCreatedAt().toIDString()}:${e.getValue().toJSON()}`;e.isRemoved()?t.push(`{${i}}`):t.push(`[${i}]`)}return t.join("")}*[Symbol.iterator](){let t=this.dummyHead.getNext();for(;t;)yield t,t=t.getNext()}}class $e extends ta{constructor(e,i){super(e);p(this,"elements");this.elements=i}static create(e,i){if(!i)return new $e(e,_u.create());const a=_u.create();for(const l of i)a.insertAfter(a.getLastCreatedAt(),l.deepcopy());return new $e(e,a)}subPathOf(e){return this.elements.subPathOf(e)}purge(e){this.elements.purge(e)}insertAfter(e,i,a){this.elements.insertAfter(e,i,a)}moveAfter(e,i,a){this.elements.moveAfter(e,i,a)}get(e){const i=this.elements.getByIndex(e);return i==null?void 0:i.getValue()}getByID(e){const i=this.elements.getByID(e);return i==null?void 0:i.getValue()}getHead(){return this.elements.getHead()}getLast(){return this.elements.getLast()}getPrevCreatedAt(e){return this.elements.getPrevCreatedAt(e)}delete(e,i){return this.elements.delete(e,i)}deleteByIndex(e,i){return this.elements.deleteByIndex(e,i)}set(e,i,a){return this.elements.set(e,i,a)}getLastCreatedAt(){return this.elements.getLastCreatedAt()}get length(){return this.elements.length}*[Symbol.iterator](){for(const e of this.elements)e.isRemoved()||(yield e.getValue())}toTestString(){return this.elements.toTestString()}getDescendants(e){for(const i of this.elements){const a=i.getValue();if(e(a,this))return;a instanceof ta&&a.getDescendants(e)}}getDataSize(){return{data:0,meta:this.getMetaUsage()}}toJSON(){const e=[];for(const i of this)e.push(i.toJSON());return`[${e.join(",")}]`}toJS(){return JSON.parse(this.toJSON())}toJSForTest(){const e={};for(let i=0;i<this.length;i++){const{createdAt:a,value:l,type:c}=this.get(i).toJSForTest();e[i]={key:String(i),createdAt:a,value:l,type:c}}return{createdAt:this.getCreatedAt().toTestString(),value:e,type:"YORKIE_ARRAY"}}toSortedJSON(){return this.toJSON()}getElements(){return this.elements}deepcopy(){const e=$e.create(this.getCreatedAt());for(const i of this.elements)e.elements.insertAfter(e.getLastCreatedAt(),i.getValue().deepcopy());return e.remove(this.getRemovedAt()),e}}class ol extends Jn{constructor(e,i,a,l){super(e,l);p(this,"prevCreatedAt");p(this,"value");this.prevCreatedAt=i,this.value=a}static create(e,i,a,l){return new ol(e,i,a,l)}execute(e){const i=e.findByCreatedAt(this.getParentCreatedAt());if(!i)throw new Y($.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(i instanceof $e))throw new Y($.ErrInvalidArgument,"fail to execute, only array can execute add");const a=i,l=this.value.deepcopy();return a.insertAfter(this.prevCreatedAt,l,this.getExecutedAt()),e.registerElement(l,a),{opInfos:[{type:"add",path:e.createPath(this.getParentCreatedAt()),index:Number(a.subPathOf(this.getEffectedCreatedAt()))}],reverseOp:this.toReverseOperation()}}toReverseOperation(){return hs.create(this.getParentCreatedAt(),this.value.getCreatedAt())}getEffectedCreatedAt(){return this.value.getCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.ADD.${this.value.toJSON()}`}getPrevCreatedAt(){return this.prevCreatedAt}getValue(){return this.value}}class hs extends Jn{constructor(e,i,a){super(e,a);p(this,"createdAt");this.createdAt=i}static create(e,i,a){return new hs(e,i,a)}execute(e,i){var g;const a=e.findByCreatedAt(this.getParentCreatedAt());if(!a)throw new Y($.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(a instanceof ta))throw new Y($.ErrInvalidArgument,`only object and array can execute remove: ${a}`);if(i===ne.UndoRedo){let y=a.getByID(this.createdAt);for(;y;){if(y.getRemovedAt())return;y=(g=e.findElementPairByCreatedAt(y.getCreatedAt()))==null?void 0:g.parent}}const l=a.subPathOf(this.createdAt),c=this.toReverseOperation(a),d=a.delete(this.createdAt,this.getExecutedAt());return e.registerRemovedElement(d),{opInfos:a instanceof $e?[{type:"remove",path:e.createPath(this.getParentCreatedAt()),index:Number(l)}]:[{type:"remove",path:e.createPath(this.getParentCreatedAt()),key:l}],reverseOp:c}}toReverseOperation(e){if(e instanceof $e){const i=e.getByID(this.createdAt);if(i!==void 0){const a=e.getPrevCreatedAt(this.createdAt);return ol.create(this.getParentCreatedAt(),a,i.deepcopy())}}if(e instanceof He){const i=e.subPathOf(this.createdAt);if(i!==void 0){const a=e.get(i);if(a!==void 0)return qa.create(i,a.deepcopy(),this.getParentCreatedAt())}}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.REMOVE.${this.createdAt.toTestString()}`}getCreatedAt(){return this.createdAt}}class qa extends Jn{constructor(e,i,a,l){super(a,l);p(this,"key");p(this,"value");this.key=e,this.value=i}static create(e,i,a,l){return new qa(e,i,a,l)}execute(e,i){var g;const a=e.findByCreatedAt(this.getParentCreatedAt());if(!a)throw new Y($.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(a instanceof He))throw new Y($.ErrInvalidArgument,"fail to execute, only object can execute set");if(i===ne.UndoRedo){let y=a;for(;y;){if(y.getRemovedAt())return;y=(g=e.findElementPairByCreatedAt(y.getCreatedAt()))==null?void 0:g.parent}}const l=a.get(this.key),c=this.toReverseOperation(l),d=this.value.deepcopy(),h=a.set(this.key,d,this.getExecutedAt());return i===ne.UndoRedo&&e.findByCreatedAt(d.getCreatedAt())&&e.deregisterElement(d),e.registerElement(d,a),h&&e.registerRemovedElement(h),{opInfos:[{type:"set",path:e.createPath(this.getParentCreatedAt()),key:this.key}],reverseOp:c}}toReverseOperation(e){let i=hs.create(this.getParentCreatedAt(),this.value.getCreatedAt());return e!==void 0&&!e.isRemoved()&&(i=qa.create(this.key,e.deepcopy(),this.getParentCreatedAt())),i}getEffectedCreatedAt(){return this.value.getCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.SET.${this.key}=${this.value.toSortedJSON()}`}getKey(){return this.key}getValue(){return this.value}}class us extends Jn{constructor(e,i,a,l){super(e,l);p(this,"prevCreatedAt");p(this,"createdAt");this.prevCreatedAt=i,this.createdAt=a}static create(e,i,a,l){return new us(e,i,a,l)}execute(e){const i=e.findByCreatedAt(this.getParentCreatedAt());if(!i)throw new Y($.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(i instanceof $e))throw new Y($.ErrInvalidArgument,"fail to execute, only array can execute move");const a=i,l=this.toReverseOperation(a),c=Number(a.subPathOf(this.createdAt));a.moveAfter(this.prevCreatedAt,this.createdAt,this.getExecutedAt());const d=Number(a.subPathOf(this.createdAt));return{opInfos:[{type:"move",path:e.createPath(this.getParentCreatedAt()),index:d,previousIndex:c}],reverseOp:l}}toReverseOperation(e){const i=e.getPrevCreatedAt(this.createdAt);return us.create(this.getParentCreatedAt(),i,this.createdAt)}getEffectedCreatedAt(){return this.createdAt}toTestString(){return`${this.getParentCreatedAt().toTestString()}.MOVE`}getPrevCreatedAt(){return this.prevCreatedAt}getCreatedAt(){return this.createdAt}}class Qs{constructor(t,e,i,a){p(this,"key");p(this,"value");p(this,"updatedAt");p(this,"_isRemoved");this.key=t,this.value=e,this.updatedAt=i,this._isRemoved=a}static of(t,e,i,a){return new Qs(t,e,i,a)}getKey(){return this.key}getValue(){return this.value}getUpdatedAt(){return this.updatedAt}isRemoved(){return this._isRemoved}toIDString(){return`${this.updatedAt.toIDString()}:${this.key}`}getRemovedAt(){if(this._isRemoved)return this.updatedAt}getDataSize(){return{data:(this.key.length+this.value.length)*2,meta:Tr}}}class gs{constructor(){p(this,"nodeMapByKey");p(this,"numberOfRemovedElement");this.nodeMapByKey=new Map,this.numberOfRemovedElement=0}static create(){return new gs}getNodeMapByKey(){return this.nodeMapByKey}set(t,e,i){const a=this.nodeMapByKey.get(t);if(a&&a.isRemoved()&&i.after(a.getUpdatedAt())&&(this.numberOfRemovedElement-=1),a===void 0||i.after(a.getUpdatedAt())){const l=Qs.of(t,e,i,!1);return this.nodeMapByKey.set(t,l),a!==void 0&&a.isRemoved()?[a,l]:[void 0,l]}return a.isRemoved()?[a,void 0]:[void 0,void 0]}setInternal(t,e,i,a){const l=Qs.of(t,e,i,a);this.nodeMapByKey.set(t,l),a&&this.numberOfRemovedElement++}remove(t,e){const i=this.nodeMapByKey.get(t),a=[];if(i===void 0||e.after(i.getUpdatedAt())){if(i===void 0){this.numberOfRemovedElement+=1;const d=Qs.of(t,"",e,!0);return this.nodeMapByKey.set(t,d),a.push(d),a}const l=i.isRemoved();l||(this.numberOfRemovedElement+=1),l&&a.push(i);const c=Qs.of(t,i.getValue(),e,!0);return this.nodeMapByKey.set(t,c),a.push(c),a}return a}has(t){if(this.nodeMapByKey.has(t)){const e=this.nodeMapByKey.get(t);return e!==void 0&&!e.isRemoved()}return!1}get(t){if(this.nodeMapByKey.has(t))return this.nodeMapByKey.get(t).getValue()}deepcopy(){const t=new gs;for(const[,e]of this.nodeMapByKey)t.setInternal(e.getKey(),e.getValue(),e.getUpdatedAt(),e.isRemoved());return t}toJSON(){if(!this.size())return"{}";const t=[];for(const[e,i]of this.nodeMapByKey)i.isRemoved()||t.push(`"${Sr(e)}":"${Sr(i.getValue())}"`);return`{${t.join(",")}}`}size(){return this.nodeMapByKey.size-this.numberOfRemovedElement}toObject(){const t={};for(const[e,i]of this.nodeMapByKey)i.isRemoved()||(t[e]=i.getValue());return t}*[Symbol.iterator](){for(const[,t]of this.nodeMapByKey)yield t}purge(t){const e=this.nodeMapByKey.get(t.getKey());e==null||e.toIDString()!=t.toIDString()||(this.nodeMapByKey.delete(t.getKey()),this.numberOfRemovedElement--)}}function Xn(n){if(n instanceof Map){const t=Array.from(n);return new Map(JSON.parse(JSON.stringify(t)))}return JSON.parse(JSON.stringify(n))}const P1=n=>n?Object.entries(n).length===0:!0,Fo=n=>{const t={};for(const[e,i]of Object.entries(n))t[e]=JSON.stringify(i);return t},fs=n=>{const t={};for(const[e,i]of Object.entries(n))t[e]=JSON.parse(i);return t};function H2(n){return n?Vb(n.live)+Vb(n.gc):0}function Vb(n){return n.data+n.meta}function _e(n,...t){for(const e of t)n.data+=e.data,n.meta+=e.meta}function qo(n,t){n.data-=t.data,n.meta-=t.meta}class Uu{constructor(t){p(this,"attributes");p(this,"content");this.attributes=gs.create(),this.content=t}static create(t){return new Uu(t)}get length(){return this.content.length}substring(t,e){const i=new Uu(this.content.substring(t,e));return i.attributes=this.attributes.deepcopy(),i}setAttr(t,e,i){return this.attributes.set(t,e,i)}getAttrs(){return this.attributes}toString(){return this.content}getDataSize(){const t={data:0,meta:0};t.data+=this.content.length*2;for(const e of this.attributes){const i=e.getDataSize();t.meta+=i.meta,t.data+=i.data}return t}toJSON(){const t=Sr(this.content),e=this.attributes.toObject(),i=[];for(const[a,l]of Object.entries(e)){const c=JSON.parse(l),d=typeof c=="string"?`"${Sr(a)}":"${Sr(c)}"`:`"${Sr(a)}":${String(c)}`;i.push(d)}return i.sort(),i.length===0?`{"val":"${t}"}`:`{"attrs":{${i.join(",")}},"val":"${t}"}`}getAttributes(){return this.attributes.toObject()}getContent(){return this.content}purge(t){this.attributes&&t instanceof Qs&&this.attributes.purge(t)}getGCPairs(){const t=[];for(const e of this.attributes)e.getRemovedAt()&&t.push({parent:this,child:e});return t}}class pn extends Zu{constructor(e,i){super(i);p(this,"rgaTreeSplit");this.rgaTreeSplit=e}static create(e,i){return new pn(e,i)}edit(e,i,a,l,c){const d=i?Uu.create(i):void 0;if(d&&l)for(const[b,x]of Object.entries(l))d.setAttr(b,x,a);const[h,g,y,w]=this.rgaTreeSplit.edit(e,a,d,c);return[w.map(b=>({...b,value:b.value?{attributes:fs(b.value.getAttributes()),content:b.value.getContent()}:{attributes:void 0,content:""},type:"content"})),g,y,[h,h]]}setStyle(e,i,a,l){const c={data:0,meta:0},[,d,h]=this.rgaTreeSplit.findNodeWithSplit(e[1],a),[,g,y]=this.rgaTreeSplit.findNodeWithSplit(e[0],a);_e(c,d,g);const w=[],v=this.rgaTreeSplit.findBetween(y,h),b=[];for(const A of v){const C=A.getCreatedAt().getActorID();let k=Eu;l!=null&&(k=l.get(C)?l.get(C):0n),A.canStyle(a,k)&&b.push(A)}const x=[];for(const A of b){if(A.isRemoved())continue;const[C,k]=this.rgaTreeSplit.findIndexesFromRange(A.createPosRange());w.push({type:"style",actor:a.getActorID(),from:C,to:k,value:{attributes:fs(i)}});for(const[L,N]of Object.entries(i)){const[I]=A.getValue().setAttr(L,N,a);I!==void 0&&x.push({parent:A.getValue(),child:I});const B=A.getValue().getAttrs().getNodeMapByKey().get(L);B!==void 0&&_e(c,B.getDataSize())}}return[x,c,w]}indexRangeToPosRange(e,i){const a=this.rgaTreeSplit.indexToPos(e);return e===i?[a,a]:[a,this.rgaTreeSplit.indexToPos(i)]}get length(){return this.rgaTreeSplit.length}getTreeByIndex(){return this.rgaTreeSplit.getTreeByIndex()}getTreeByID(){return this.rgaTreeSplit.getTreeByID()}getDataSize(){const e={data:0,meta:0};for(const i of this.rgaTreeSplit){if(i.isRemoved())continue;const a=i.getDataSize();e.data+=a.data,e.meta+=a.meta}return{data:e.data,meta:e.meta+this.getMetaUsage()}}toJSON(){const e=[];for(const i of this.rgaTreeSplit)i.isRemoved()||e.push(i.getValue().toJSON());return`[${e.join(",")}]`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:JSON.parse(this.toJSON()),type:"YORKIE_TEXT"}}toString(){return this.rgaTreeSplit.toString()}values(){const e=[];for(const i of this.rgaTreeSplit)if(!i.isRemoved()){const a=i.getValue();e.push({attributes:fs(a.getAttributes()),content:a.getContent()})}return e}getRGATreeSplit(){return this.rgaTreeSplit}toTestString(){return this.rgaTreeSplit.toTestString()}deepcopy(){const e=new pn(this.rgaTreeSplit.deepcopy(),this.getCreatedAt());return e.remove(this.getRemovedAt()),e}findIndexesFromRange(e){return this.rgaTreeSplit.findIndexesFromRange(e)}getGCPairs(){const e=[];for(const i of this.rgaTreeSplit){i.getRemovedAt()&&e.push({parent:this.rgaTreeSplit,child:i});for(const a of i.getValue().getGCPairs())e.push(a)}return e}}class Qu extends Jn{constructor(e,i,a,l,c,d){super(e,d);p(this,"fromPos");p(this,"toPos");p(this,"content");p(this,"attributes");this.fromPos=i,this.toPos=a,this.content=l,this.attributes=c}static create(e,i,a,l,c,d){return new Qu(e,i,a,l,c,d)}execute(e,i,a){const l=e.findByCreatedAt(this.getParentCreatedAt());if(!l)throw new Y($.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(l instanceof pn))throw new Y($.ErrInvalidArgument,"fail to execute, only Text can execute edit");const c=l,[d,h,g]=c.edit([this.fromPos,this.toPos],this.content,this.getExecutedAt(),Object.fromEntries(this.attributes),a);e.acc(g);for(const y of h)e.registerGCPair(y);return{opInfos:d.map(({from:y,to:w,value:v})=>({type:"edit",from:y,to:w,value:v,path:e.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),i=this.fromPos.toTestString(),a=this.toPos.toTestString(),l=this.content;return`${e}.EDIT(${i},${a},${l})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getContent(){return this.content}getAttributes(){return this.attributes||new Map}}class Wu extends Jn{constructor(e,i,a,l,c){super(e,c);p(this,"fromPos");p(this,"toPos");p(this,"attributes");this.fromPos=i,this.toPos=a,this.attributes=l}static create(e,i,a,l,c){return new Wu(e,i,a,l,c)}execute(e,i,a){const l=e.findByCreatedAt(this.getParentCreatedAt());if(!l)throw new Y($.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(l instanceof pn))throw new Y($.ErrInvalidArgument,"fail to execute, only Text can execute edit");const c=l,[d,h,g]=c.setStyle([this.fromPos,this.toPos],this.attributes?Object.fromEntries(this.attributes):{},this.getExecutedAt(),a);e.acc(h);for(const y of d)e.registerGCPair(y);return{opInfos:g.map(({from:y,to:w,value:v})=>({type:"style",from:y,to:w,value:v,path:e.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),i=this.fromPos.toTestString(),a=this.toPos.toTestString(),l=this.attributes;return`${e}.STYL(${i},${a},${JSON.stringify(l)})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getAttributes(){return this.attributes}}const $2=2,V2="root",Ar="text";function yu(n,t){let e=0;const i=n.children;for(let a=0;a<t;a++){const l=i[a];!l||l.isRemoved||(e+=l.paddedSize)}return e}class j2{constructor(t,e=[]){p(this,"type");p(this,"parent");p(this,"_children");p(this,"size");if(this.type=t,this.size=0,this._children=e,this.isText&&this._children.length>0)throw new Y($.ErrRefused,"Text node cannot have children")}updateAncestorsSize(){let t=this.parent;const e=this.isRemoved?-1:1;for(;t&&(t.size+=this.paddedSize*e,!t.isRemoved);)t=t.parent}updateDescendantsSize(){let t=0;for(const e of this._children){const i=e.updateDescendantsSize();e.isRemoved||(t+=i)}return this.size+=t,this.paddedSize}get isText(){return this.type===Ar}get paddedSize(){return this.size+(this.isText?0:$2)}isAncestorOf(t){return Y2(this,t)}get nextSibling(){const t=this.parent.findOffset(this),e=this.parent.children[t+1];if(e)return e}get prevSibling(){const t=this.parent.findOffset(this),e=this.parent.children[t-1];if(e)return e}splitText(t,e){const i={data:0,meta:0};if(t===0||t===this.size)return[void 0,i];const a=this.value.slice(0,t),l=this.value.slice(t);if(!l.length)return[void 0,i];const c=this.getDataSize();this.value=a;const d=this.cloneText(t+e);return d.value=l,this.parent.insertAfterInternal(d,this),_e(i,this.getDataSize(),d.getDataSize()),qo(i,c),[d,i]}get children(){return this._children.filter(t=>!t.isRemoved)}get allChildren(){return[...this._children]}hasTextChild(){return this.children.length>0&&this.children.every(t=>t.isText)}getChildrenText(){return this.isText?this.value:this.hasTextChild()?this.children.map(t=>t.value).join(""):""}append(...t){if(this.isText)throw new Y($.ErrRefused,"Text node cannot have children");this._children.push(...t);for(const e of t)e.parent=this,e.updateAncestorsSize()}prepend(...t){if(this.isText)throw new Y($.ErrRefused,"Text node cannot have children");this._children.unshift(...t);for(const e of t)e.parent=this}insertBefore(t,e){if(this.isText)throw new Y($.ErrRefused,"Text node cannot have children");const i=this._children.indexOf(e);if(i===-1)throw new Y($.ErrInvalidArgument,"child not found");this.insertAtInternal(t,i),t.updateAncestorsSize()}insertAfter(t,e){if(this.isText)throw new Y($.ErrRefused,"Text node cannot have children");const i=this._children.indexOf(e);if(i===-1)throw new Y($.ErrInvalidArgument,"child not found");this.insertAtInternal(t,i+1),t.updateAncestorsSize()}insertAt(t,e){if(this.isText)throw new Y($.ErrRefused,"Text node cannot have children");this.insertAtInternal(t,e),t.updateAncestorsSize()}removeChild(t){if(this.isText)throw new Y($.ErrRefused,"Text node cannot have children");const e=this._children.indexOf(t);if(e===-1)throw new Y($.ErrInvalidArgument,"child not found");this._children.splice(e,1),t.parent=void 0}splitElement(t,e){const i={data:0,meta:0},a=this.getDataSize(),l=this.cloneElement(e);this.parent.insertAfterInternal(l,this),l.updateAncestorsSize();const c=this.children.slice(0,t),d=this.children.slice(t);this._children=c,l._children=d,this.size=this._children.reduce((h,g)=>h+g.paddedSize,0),l.size=l._children.reduce((h,g)=>h+g.paddedSize,0);for(const h of l._children)h.parent=l;return _e(i,this.getDataSize(),l.getDataSize()),qo(i,a),[l,i]}insertAfterInternal(t,e){if(this.isText)throw new Y($.ErrRefused,"Text node cannot have children");const i=this._children.indexOf(e);if(i===-1)throw new Y($.ErrInvalidArgument,"child not found");this.insertAtInternal(t,i+1)}insertAtInternal(t,e){if(this.isText)throw new Y($.ErrRefused,"Text node cannot have children");this._children.splice(e,0,t),t.parent=this}findOffset(t){if(this.isText)throw new Y($.ErrRefused,"Text node cannot have children");if(t.isRemoved){const e=this._children.indexOf(t);return this.allChildren.splice(0,e).filter(a=>!a.isRemoved).length}return this.children.indexOf(t)}findBranchOffset(t){if(this.isText)throw new Y($.ErrRefused,"Text node cannot have children");let e=t;for(;e;){const i=this._children.indexOf(e);if(i!==-1)return i;e=e.parent}return-1}}function Y2(n,t){if(n===t)return!1;for(;t.parent;){if(t.parent===n)return!0;t=t.parent}return!1}var ve=(n=>(n.Start="Start",n.End="End",n.Text="Text",n))(ve||{});function J1(n,t,e,i){if(t>e)throw new Y($.ErrInvalidArgument,`from is greater than to: ${t} > ${e}`);if(t>n.size)throw new Y($.ErrInvalidArgument,`from is out of range: ${t} > ${n.size}`);if(e>n.size)throw new Y($.ErrInvalidArgument,`to is out of range: ${e} > ${n.size}`);if(t===e)return;let a=0;for(const l of n.children){if(t-l.paddedSize<a&&a<e){const c=l.isText?t-a:t-a-1,d=l.isText?e-a:e-a-1,h=!l.isText&&c<0,g=!l.isText&&d>l.size;(l.isText||h)&&i([l,l.isText?"Text":"Start"],g),J1(l,Math.max(0,c),Math.min(d,l.size),i),g&&i([l,"End"],g)}a+=l.paddedSize}}function H1(n,t,e=0){for(const i of n.children)H1(i,t,e+1);t(n,e)}function jd(n,t,e=0){for(const i of n._children)jd(i,t,e+1);t(n,e)}function by(n,t,e=!0){if(t>n.size)throw new Y($.ErrInvalidArgument,`index is out of range: ${t} > ${n.size}`);if(n.isText)return{node:n,offset:t};let i=0,a=0;for(const l of n.children){if(e&&l.isText&&l.size>=t-a)return by(l,t-a,e);if(t===a)return{node:n,offset:i};if(!e&&l.paddedSize===t-a)return{node:n,offset:i+1};if(l.paddedSize>t-a)return by(l,t-a-1,e);a+=l.paddedSize,i+=1}return{node:n,offset:i}}function $1(n){return n.isText||n.children.length===0?n:$1(n.children[0])}function G2(n,t){if(n.size<t)throw new Y($.ErrInvalidArgument,"unacceptable path");for(let e=0;e<n.children.length;e++){const i=n.children[e];if(i.size<t)t-=i.size;else{n=i;break}}return{node:n,offset:t}}class K2{constructor(t){p(this,"root");this.root=t}tokensBetween(t,e,i){J1(this.root,t,e,i)}traverse(t){H1(this.root,t,0)}traverseAll(t){jd(this.root,t,0)}findTreePos(t,e=!0){return by(this.root,t,e)}treePosToPath(t){const e=[];let i=t.node;if(i.isText){const a=i.parent.findOffset(i);if(a===-1)throw new Y($.ErrInvalidArgument,"invalid treePos");const l=yu(i.parent,a);e.push(l+t.offset),i=i.parent}else if(i.hasTextChild()){const a=yu(i,t.offset);e.push(a)}else e.push(t.offset);for(;i.parent;){const a=i.parent.findOffset(i);if(a===-1)throw new Y($.ErrInvalidArgument,"invalid treePos");e.push(a),i=i.parent}return e.reverse()}pathToIndex(t){const e=this.pathToTreePos(t);return this.indexOf(e)}pathToTreePos(t){if(!t.length)throw new Y($.ErrInvalidArgument,"unacceptable path");let e=this.root;for(let i=0;i<t.length-1;i++){const a=t[i];if(e=e.children[a],!e)throw new Y($.ErrInvalidArgument,"unacceptable path")}if(e.hasTextChild())return G2(e,t[t.length-1]);if(e.children.length<t[t.length-1])throw new Y($.ErrInvalidArgument,"unacceptable path");return{node:e,offset:t[t.length-1]}}getRoot(){return this.root}get size(){return this.root.size}findPostorderRight(t){const{node:e,offset:i}=t;if(e.isText){if(e.size===i){const a=e.nextSibling;return a||e.parent}return e}return e.children.length===i?e:$1(e.children[i])}indexOf(t){let{node:e}=t;const{offset:i}=t;let a=0,l=1;if(e.isText){a+=i;const c=e.parent,d=c.findOffset(e);if(d===-1)throw new Y($.ErrInvalidArgument,"invalid pos");a+=yu(c,d),e=e.parent}else a+=yu(e,i);for(;e!=null&&e.parent;){const c=e.parent,d=c.findOffset(e);if(d===-1)throw new Y($.ErrInvalidArgument,"invalid pos");a+=yu(c,d),l++,e=e.parent}return a+l-1}indexToPath(t){const e=this.findTreePos(t);return this.treePosToPath(e)}}const X2=(n,t)=>n===t?0:n<t?-1:1;class F2{constructor(t,e,i){p(this,"key");p(this,"value");p(this,"parent");p(this,"left");p(this,"right");p(this,"isRed");this.key=t,this.value=e,this.isRed=i}}class Z2{constructor(t){p(this,"stack");this.stack=[],this.traverseInorder(t)}traverseInorder(t){t&&(this.traverseInorder(t.left),this.stack.push({key:t.key,value:t.value}),this.traverseInorder(t.right))}}class V1{constructor(t){p(this,"root");p(this,"comparator");p(this,"counter");this.comparator=typeof t<"u"?t:X2,this.counter=0}put(t,e){return this.root=this.putInternal(t,e,this.root),this.root.isRed=!1,e}get(t){const e=this.getInternal(t,this.root);return e?e.value:void 0}remove(t){!this.isRed(this.root.left)&&!this.isRed(this.root.right)&&(this.root.isRed=!0),this.root=this.removeInternal(this.root,t),this.root&&(this.root.isRed=!1)}getIterator(){return new Z2(this.root)}values(){const t=[];for(const e of this.getIterator().stack)t.push(e.value);return t}floorEntry(t){let e=this.root;for(;e;){const i=this.comparator(t,e.key);if(i>0)if(e.right)e.right.parent=e,e=e.right;else return e;else if(i<0)if(e.left)e.left.parent=e,e=e.left;else{let a=e.parent,l=e;for(;a&&l===a.left;)l=a,a=a.parent;return a}else return e}}lastEntry(){if(!this.root)return this.root;let t=this.root;for(;t.right;)t=t.right;return t}size(){return this.counter}isEmpty(){return this.counter===0}getInternal(t,e){for(;e;){const i=this.comparator(t,e.key);if(i===0)return e;i<0?e=e.left:i>0&&(e=e.right)}}putInternal(t,e,i){if(!i)return this.counter+=1,new F2(t,e,!0);const a=this.comparator(t,i.key);return a<0?i.left=this.putInternal(t,e,i.left):a>0?i.right=this.putInternal(t,e,i.right):i.value=e,this.isRed(i.right)&&!this.isRed(i.left)&&(i=this.rotateLeft(i)),this.isRed(i.left)&&this.isRed(i.left.left)&&(i=this.rotateRight(i)),this.isRed(i.left)&&this.isRed(i.right)&&this.flipColors(i),i}removeInternal(t,e){if(this.comparator(e,t.key)<0)!this.isRed(t.left)&&!this.isRed(t.left.left)&&(t=this.moveRedLeft(t)),t.left=this.removeInternal(t.left,e);else{if(this.isRed(t.left)&&(t=this.rotateRight(t)),this.comparator(e,t.key)===0&&!t.right){this.counter-=1;return}if(!this.isRed(t.right)&&!this.isRed(t.right.left)&&(t=this.moveRedRight(t)),this.comparator(e,t.key)===0){this.counter-=1;const i=this.min(t.right);t.value=i.value,t.key=i.key,t.right=this.removeMin(t.right)}else t.right=this.removeInternal(t.right,e)}return this.fixUp(t)}min(t){return t.left?this.min(t.left):t}removeMin(t){if(t.left)return!this.isRed(t.left)&&!this.isRed(t.left.left)&&(t=this.moveRedLeft(t)),t.left=this.removeMin(t.left),this.fixUp(t)}fixUp(t){return this.isRed(t.right)&&(t=this.rotateLeft(t)),this.isRed(t.left)&&this.isRed(t.left.left)&&(t=this.rotateRight(t)),this.isRed(t.left)&&this.isRed(t.right)&&this.flipColors(t),t}moveRedLeft(t){return this.flipColors(t),this.isRed(t.right.left)&&(t.right=this.rotateRight(t.right),t=this.rotateLeft(t),this.flipColors(t)),t}moveRedRight(t){return this.flipColors(t),this.isRed(t.left.left)&&(t=this.rotateRight(t),this.flipColors(t)),t}isRed(t){return t&&t.isRed}rotateLeft(t){const e=t.right;return t.right=e.left,e.left=t,e.isRed=e.left.isRed,e.left.isRed=!0,e}rotateRight(t){const e=t.left;return t.left=e.right,e.right=t,e.isRed=e.right.isRed,e.right.isRed=!0,e}flipColors(t){t.isRed=!t.isRed,t.left.isRed=!t.left.isRed,t.right.isRed=!t.right.isRed}}class tr{constructor(t,e){p(this,"parentID");p(this,"leftSiblingID");this.parentID=t,this.leftSiblingID=e}static of(t,e){return new tr(t,e)}static fromTreePos(t){const{offset:e}=t;let{node:i}=t,a;return i.isText?(i.parent.children[0]===i&&e===0?a=i.parent:a=i,i=i.parent):e===0?a=i:a=i.children[e-1],tr.of(i.id,Ue.of(a.getCreatedAt(),a.getOffset()+e))}getParentID(){return this.parentID}static fromStruct(t){return tr.of(Ue.of(Pn.fromStruct(t.parentID.createdAt),t.parentID.offset),Ue.of(Pn.fromStruct(t.leftSiblingID.createdAt),t.leftSiblingID.offset))}toStruct(){return{parentID:{createdAt:this.getParentID().getCreatedAt().toStruct(),offset:this.getParentID().getOffset()},leftSiblingID:{createdAt:this.getLeftSiblingID().getCreatedAt().toStruct(),offset:this.getLeftSiblingID().getOffset()}}}toTreeNodePair(t){const e=this.getParentID(),i=this.getLeftSiblingID(),a=t.findFloorNode(e);let l=t.findFloorNode(i);if(!a||!l)throw new Y($.ErrRefused,`cannot find node of CRDTTreePos(${e.toTestString()}, ${i.toTestString()})`);return!i.equals(e)&&i.getOffset()>0&&i.getOffset()===l.id.getOffset()&&l.insPrevID&&(l=t.findFloorNode(l.insPrevID)),[a,l]}getLeftSiblingID(){return this.leftSiblingID}equals(t){return this.getParentID().getCreatedAt().equals(t.getParentID().getCreatedAt())&&this.getParentID().getOffset()===t.getParentID().getOffset()&&this.getLeftSiblingID().getCreatedAt().equals(t.getLeftSiblingID().getCreatedAt())&&this.getLeftSiblingID().getOffset()===t.getLeftSiblingID().getOffset()}}class Ue{constructor(t,e){p(this,"createdAt");p(this,"offset");this.createdAt=t,this.offset=e}static of(t,e){return new Ue(t,e)}static fromStruct(t){return Ue.of(Pn.fromStruct(t.createdAt),t.offset)}static createComparator(){return(t,e)=>{const i=t.getCreatedAt().compare(e.getCreatedAt());return i!==0?i:t.getOffset()>e.getOffset()?1:t.getOffset()<e.getOffset()?-1:0}}getCreatedAt(){return this.createdAt}equals(t){return this.createdAt.compare(t.createdAt)===0&&this.offset===t.offset}getOffset(){return this.offset}setOffset(t){this.offset=t}toStruct(){return{createdAt:this.createdAt.toStruct(),offset:this.offset}}toIDString(){return`${this.createdAt.toIDString()}:${this.offset}`}toTestString(){return`${this.createdAt.toTestString()}/${this.offset}`}}class yn extends j2{constructor(e,i,a,l,c){super(i);p(this,"id");p(this,"removedAt");p(this,"attrs");p(this,"insPrevID");p(this,"insNextID");p(this,"_value","");this.id=e,this.removedAt=c,l&&(this.attrs=l),typeof a=="string"?this.value=a:Array.isArray(a)&&(this._children=a)}toIDString(){return this.id.toIDString()}getRemovedAt(){return this.removedAt}static create(e,i,a,l){return new yn(e,i,a,l)}deepcopy(){var i;const e=new yn(this.id,this.type);return e.removedAt=this.removedAt,e._value=this._value,e.size=this.size,e.attrs=(i=this.attrs)==null?void 0:i.deepcopy(),e._children=this._children.map(a=>{const l=a.deepcopy();return l.parent=e,l}),e.insPrevID=this.insPrevID,e.insNextID=this.insNextID,e}get value(){if(!this.isText)throw new Y($.ErrInvalidType,`cannot get value of element node: ${this.type}`);return this._value}set value(e){if(!this.isText)throw new Y($.ErrInvalidType,`cannot set value of element node: ${this.type}`);this._value=e,this.size=e.length}get isRemoved(){return!!this.removedAt}remove(e){const i=!this.removedAt;(!this.removedAt||this.removedAt.compare(e)>0)&&(this.removedAt=e),i&&this.updateAncestorsSize()}cloneText(e){return new yn(Ue.of(this.id.getCreatedAt(),e),this.type,void 0,void 0,this.removedAt)}cloneElement(e){return new yn(Ue.of(e(),0),this.type,void 0,void 0,this.removedAt)}split(e,i,a){const[l,c]=this.isText?this.splitText(i,this.id.getOffset()):this.splitElement(i,a);if(l){if(l.insPrevID=this.id,this.insNextID){const d=e.findFloorNode(this.insNextID);d.insPrevID=l.id,l.insNextID=this.insNextID}this.insNextID=l.id,e.registerNode(l)}return[l,c]}getCreatedAt(){return this.id.getCreatedAt()}getOffset(){return this.id.getOffset()}canDelete(e,i){return this.getCreatedAt().getLamport()<=i&&(!this.removedAt||e.after(this.removedAt))}canStyle(e,i){return this.isText?!1:this.getCreatedAt().getLamport()<=i&&(!this.removedAt||e.after(this.removedAt))}setAttrs(e,i){this.attrs||(this.attrs=new gs);const a=[];for(const[l,c]of Object.entries(e))a.push(this.attrs.set(l,c,i));return a}purge(e){this.attrs&&this.attrs.purge(e)}getDataSize(){const e={data:0,meta:0};if(this.isText&&(e.data+=this.size*2),this.id&&(e.meta+=Tr),this.removedAt&&(e.meta+=Tr),this.attrs)for(const i of this.attrs){if(i.getRemovedAt())continue;const a=i.getDataSize();e.meta+=a.meta,e.data+=a.data}return e}getGCPairs(){const e=[];if(!this.attrs)return e;for(const i of this.attrs)i.getRemovedAt()&&e.push({parent:this,child:i});return e}}function Sy(n){var e;if(n.isText){const i=n;return{type:i.type,value:i.value}}const t={type:n.type,children:n.children.map(Sy)};return n.attrs&&(t.attributes=fs((e=n.attrs)==null?void 0:e.toObject())),t}function Hy(n){if(n.isText)return n.value;let t="";return n.attrs&&n.attrs.size()&&(t=" "+Array.from(n.attrs).filter(e=>!e.isRemoved()).sort((e,i)=>e.getKey().localeCompare(i.getKey())).map(e=>{const i=JSON.parse(e.getValue());return typeof i=="string"?`${e.getKey()}="${i}"`:`${e.getKey()}="${Sr(e.getValue())}"`}).join(" ")),`<${n.type}${t}>${n.children.map(e=>Hy(e)).join("")}</${n.type}>`}function j1(n){if(n.isText){const t=n;return{type:t.type,value:t.value,size:t.size,isRemoved:t.isRemoved}}return{type:n.type,children:n.children.map(j1),size:n.size,isRemoved:n.isRemoved}}class vn extends Zu{constructor(e,i){super(i);p(this,"indexTree");p(this,"nodeMapByID");this.indexTree=new K2(e),this.nodeMapByID=new V1(Ue.createComparator()),this.indexTree.traverseAll(a=>{this.nodeMapByID.put(a.id,a)})}static create(e,i){return new vn(e,i)}findFloorNode(e){const i=this.nodeMapByID.floorEntry(e);if(!(!i||!i.key.getCreatedAt().equals(e.getCreatedAt())))return i.value}registerNode(e){this.nodeMapByID.put(e.id,e)}findNodesAndSplitText(e,i){let a={data:0,meta:0};const[l,c]=e.toTreeNodePair(this);let d=c;const h=l===d,g=d.parent&&!h?d.parent:l;if(d.isText){const[,y]=d.split(this,e.getLeftSiblingID().getOffset()-d.id.getOffset());a=y}if(i){const y=g.allChildren,w=h?0:y.indexOf(d)+1;for(let v=w;v<y.length;v++){const b=y[v];if(!b.id.getCreatedAt().after(i))break;d=b}}return[[g,d],a]}style(e,i,a,l){const c={data:0,meta:0},[[d,h],g]=this.findNodesAndSplitText(e[0],a),[[y,w],v]=this.findNodesAndSplitText(e[1],a);_e(c,v,g);const b=[],x=i?fs(i):{},A=[];return this.traverseInPosRange(d,h,y,w,([C,k])=>{var I;const L=C.getCreatedAt().getActorID();let N=Eu;if(l!=null&&(N=l.get(L)?l.get(L):0n),C.canStyle(a,N)&&i){const B=C.setAttrs(i,a),_=B.reduce((tt,[,ft])=>(ft&&(tt[ft.getKey()]=x[ft.getKey()]),tt),{}),P=C.parent,V=C.prevSibling||C.parent;Object.keys(_).length>0&&b.push({type:"style",from:this.toIndex(P,V),to:this.toIndex(C,C),fromPath:this.toPath(P,V),toPath:this.toPath(C,C),actor:a.getActorID(),value:_});for(const[tt]of B)tt&&A.push({parent:C,child:tt});for(const[tt]of Object.entries(x)){const ft=(I=C.attrs)==null?void 0:I.getNodeMapByKey().get(tt);ft!==void 0&&k!==ve.End&&_e(c,ft.getDataSize())}}}),[A,b,c]}removeStyle(e,i,a,l){const c={data:0,meta:0},[[d,h],g]=this.findNodesAndSplitText(e[0],a),[[y,w],v]=this.findNodesAndSplitText(e[1],a);_e(c,v,g);const b=[],x=[];return this.traverseInPosRange(d,h,y,w,([A])=>{const C=A.getCreatedAt().getActorID();let k=Eu;if(l!=null&&(k=l.get(C)?l.get(C):0n),A.canStyle(a,k)&&i){A.attrs||(A.attrs=new gs);for(const I of i){const B=A.attrs.remove(I,a);for(const _ of B)x.push({parent:A,child:_})}const L=A.parent,N=A.prevSibling||A.parent;b.push({actor:a.getActorID(),type:"removeStyle",from:this.toIndex(L,N),to:this.toIndex(A,A),fromPath:this.toPath(L,N),toPath:this.toPath(A,A),value:i})}}),[x,b,c]}edit(e,i,a,l,c,d){const h={data:0,meta:0},[[g,y],w]=this.findNodesAndSplitText(e[0],l),[[v,b],x]=this.findNodesAndSplitText(e[1],l);_e(h,x,w);const A=this.toIndex(g,y),C=this.toPath(g,y),k=[],L=[],N=[];this.traverseInPosRange(g,y,v,b,([_,P],V)=>{if(P===ve.Start&&!V)for(const nt of _.children)N.push(nt);const tt=_.getCreatedAt().getActorID();let ft=Eu;d!=null&&(ft=d.get(tt)?d.get(tt):0n),(_.canDelete(l,ft)||k.includes(_.parent))&&((P===ve.Text||P===ve.Start)&&k.push(_),L.push([_,P]))});const I=this.makeDeletionChanges(L,l),B=[];for(const _ of k)_.remove(l),_.isRemoved&&B.push({parent:this,child:_});for(const _ of N)_.removedAt||g.append(_);if(a>0){let _=0,P=g,V=y;for(;_<a;)P.split(this,P.findOffset(V)+1,c),V=P,P=P.parent,_++;I.push({type:"content",from:A,to:A,fromPath:C,toPath:C,actor:l.getActorID()})}if(i!=null&&i.length){const _=[];let P=y;for(const V of i)P===g?g.insertAt(V,0):g.insertAfter(V,P),P=V,jd(V,tt=>{g.isRemoved?(tt.remove(l),B.push({parent:this,child:tt})):_e(h,tt.getDataSize()),this.nodeMapByID.put(tt.id,tt)}),V.isRemoved||_.push(V);if(_.length){const V=_.map(tt=>Sy(tt));I.length&&I[I.length-1].from===A?I[I.length-1].value=V:I.push({type:"content",from:A,to:A,fromPath:C,toPath:C,actor:l.getActorID(),value:V})}}return[I,B,h]}editT(e,i,a,l,c){const d=this.findPos(e[0]),h=this.findPos(e[1]);this.edit([d,h],i,a,l,c)}move(e,i,a){throw new Y($.ErrUnimplemented,`not implemented: ${e}, ${i}, ${a}`)}pathToTreePos(e){return this.indexTree.pathToTreePos(e)}purge(e){var l;(l=e.parent)==null||l.removeChild(e),this.nodeMapByID.remove(e.id);const i=e.insPrevID,a=e.insNextID;if(i){const c=this.findFloorNode(i);c.insNextID=a}if(a){const c=this.findFloorNode(a);c.insPrevID=i}e.insPrevID=void 0,e.insNextID=void 0}getGCPairs(){const e=[];return this.indexTree.traverse(i=>{i.getRemovedAt()&&e.push({parent:this,child:i});for(const a of i.getGCPairs())e.push(a)}),e}findPos(e,i=!0){const a=this.indexTree.findTreePos(e,i);return tr.fromTreePos(a)}pathToPosRange(e){const i=this.pathToIndex(e);return[this.findPos(i),this.findPos(i+1)]}pathToPos(e){const i=this.indexTree.pathToIndex(e);return this.findPos(i)}getRoot(){return this.indexTree.getRoot()}getSize(){return this.indexTree.size}getNodeSize(){return this.nodeMapByID.size()}getIndexTree(){return this.indexTree}toXML(){return Hy(this.indexTree.getRoot())}getDataSize(){const e={data:0,meta:0};return this.indexTree.traverse(i=>{if(i.getRemovedAt())return;const a=i.getDataSize();e.data+=a.data,e.meta+=a.meta}),{data:e.data,meta:e.meta+this.getMetaUsage()}}toJSON(){return JSON.stringify(this.getRootTreeNode())}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:JSON.parse(this.toJSON()),type:"YORKIE_TREE"}}toJSInfoForTest(){const e=this.indexTree.getRoot(),i=(a,l=void 0,c=void 0,d=0)=>{var b,x,A,C;let h,g,y;const w=a.isText?{node:a,offset:0}:l&&c?this.toTreePos(l,c):null;w&&(h=this.indexTree.indexOf(w),g=this.indexTree.treePosToPath(w),y=tr.fromTreePos(w).toStruct());const v={type:a.type,parent:l==null?void 0:l.id.toTestString(),size:a.size,id:a.id.toTestString(),removedAt:(b=a.removedAt)==null?void 0:b.toTestString(),insPrev:(x=a.insPrevID)==null?void 0:x.toTestString(),insNext:(A=a.insNextID)==null?void 0:A.toTestString(),value:a.isText?a.value:void 0,isRemoved:a.isRemoved,children:[],depth:d,attributes:a.attrs?fs((C=a.attrs)==null?void 0:C.toObject()):void 0,index:h,path:g,pos:y};for(let k=0;k<a.allChildren.length;k++){const L=k===0?a:a.allChildren[k-1];v.children.push(i(a.allChildren[k],a,L,d+1))}return v};return i(e)}getRootTreeNode(){return Sy(this.indexTree.getRoot())}toTestTreeNode(){return j1(this.indexTree.getRoot())}toSortedJSON(){return this.toJSON()}deepcopy(){const e=this.getRoot();return new vn(e.deepcopy(),this.getCreatedAt())}toPath(e,i){const a=this.toTreePos(e,i);return a?this.indexTree.treePosToPath(a):[]}toIndex(e,i){const a=this.toTreePos(e,i);return a?this.indexTree.indexOf(a):-1}indexToPath(e){return this.indexTree.indexToPath(e)}pathToIndex(e){return this.indexTree.pathToIndex(e)}indexRangeToPosRange(e){const i=this.findPos(e[0]);return e[0]===e[1]?[i,i]:[i,this.findPos(e[1])]}indexRangeToPosStructRange(e){const[i,a]=e,l=this.findPos(i);return i===a?[l.toStruct(),l.toStruct()]:[l.toStruct(),this.findPos(a).toStruct()]}posRangeToPathRange(e){const[[i,a]]=this.findNodesAndSplitText(e[0]),[[l,c]]=this.findNodesAndSplitText(e[1]);return[this.toPath(i,a),this.toPath(l,c)]}posRangeToIndexRange(e){const[[i,a]]=this.findNodesAndSplitText(e[0]),[[l,c]]=this.findNodesAndSplitText(e[1]);return[this.toIndex(i,a),this.toIndex(l,c)]}traverseInPosRange(e,i,a,l,c){const d=this.toIndex(e,i),h=this.toIndex(a,l);return this.indexTree.tokensBetween(d,h,c)}toTreePos(e,i){if(!e||!i)return;if(e.isRemoved){let l;for(;e.isRemoved;)l=e,e=l.parent;const c=e.findOffset(l);return{node:e,offset:c}}if(e===i)return{node:e,offset:0};let a=e.findOffset(i);if(!i.isRemoved){if(i.isText)return{node:i,offset:i.paddedSize};a++}return{node:e,offset:a}}makeDeletionChanges(e,i){const a=[],l=[];let c=null,d=null;for(let h=0;h<e.length;h++){const g=e[h],y=e[h+1];c||(c=g),d=g;const w=this.findRightToken(g);(!w||!y||w[0]!==y[0]||w[1]!==y[1])&&(l.push([c,d]),c=null,d=null)}for(const h of l){const[g,y]=h,[w,v]=this.findLeftToken(g),[b,x]=y,A=v===ve.Start?w:w.parent,C=x===ve.Start?b:b.parent,k=this.toIndex(A,w),L=this.toIndex(C,b);k<L&&(a.length>0&&k===a[a.length-1].to?(a[a.length-1].to=L,a[a.length-1].toPath=this.toPath(C,b)):a.push({type:"content",from:k,to:L,fromPath:this.toPath(A,w),toPath:this.toPath(C,b),actor:i.getActorID()}))}return a.reverse()}findRightToken([e,i]){if(i===ve.Start){const h=e.allChildren;return h.length>0?[h[0],h[0].isText?ve.Text:ve.Start]:[e,ve.End]}const a=e.parent,l=a.allChildren,c=l.indexOf(e);if(a&&c===l.length-1)return[a,ve.End];const d=l[c+1];return[d,d.isText?ve.Text:ve.Start]}findLeftToken([e,i]){if(i===ve.End){const h=e.allChildren;if(h.length>0){const g=h[h.length-1];return[g,g.isText?ve.Text:ve.End]}return[e,ve.Start]}const a=e.parent,l=a.allChildren,c=l.indexOf(e);if(a&&c===0)return[a,ve.Start];const d=l[c-1];return[d,d.isText?ve.Text:ve.End]}}class tc extends Jn{constructor(e,i,a,l,c,d){super(e,d);p(this,"fromPos");p(this,"toPos");p(this,"contents");p(this,"splitLevel");this.fromPos=i,this.toPos=a,this.contents=l,this.splitLevel=c}static create(e,i,a,l,c,d){return new tc(e,i,a,l,c,d)}execute(e,i,a){var w;const l=e.findByCreatedAt(this.getParentCreatedAt());if(!l)throw new Y($.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(l instanceof vn))throw new Y($.ErrInvalidArgument,"fail to execute, only Tree can execute edit");const c=this.getExecutedAt(),d=l,[h,g,y]=d.edit([this.fromPos,this.toPos],(w=this.contents)==null?void 0:w.map(v=>v.deepcopy()),this.splitLevel,c,(()=>{let v=c.getDelimiter();return this.contents!==void 0&&(v+=this.contents.length),()=>Pn.of(c.getLamport(),++v,c.getActorID())})(),a);e.acc(y);for(const v of g)e.registerGCPair(v);return{opInfos:h.map(({from:v,to:b,value:x,splitLevel:A,fromPath:C,toPath:k})=>({type:"tree-edit",path:e.createPath(this.getParentCreatedAt()),from:v,to:b,value:x,splitLevel:A,fromPath:C,toPath:k}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),i=`${this.fromPos.getLeftSiblingID().getCreatedAt().toTestString()}/${this.fromPos.getLeftSiblingID().getOffset()}`,a=`${this.toPos.getLeftSiblingID().getCreatedAt().toTestString()}/${this.toPos.getLeftSiblingID().getOffset()}`,l=this.contents||[];return`${e}.EDIT(${i},${a},${l.map(c=>Hy(c)).join("")})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getContents(){return this.contents}getSplitLevel(){return this.splitLevel}}class Po{constructor(t){p(this,"vector");this.vector=t||new Map}set(t,e){this.vector.set(t,e)}unset(t){this.vector.delete(t)}get(t){return this.vector.get(t)}maxLamport(){let t=BigInt(0);for(const[,e]of this)e>t&&(t=e);return t}max(t){const e=new Map;for(const[i,a]of t){const l=this.vector.get(i),c=l&&l>a?l:a;e.set(i,c)}for(const[i,a]of this){const l=t.get(i),c=l&&l>a?l:a;e.set(i,c)}return new Po(e)}afterOrEqual(t){const e=this.vector.get(t.getActorID());return e===void 0?!1:e>=t.getLamport()}deepcopy(){const t=new Map;for(const[e,i]of this.vector)t.set(e,i);return new Po(t)}filter(t){const e=new Map;for(const[i]of t){const a=this.vector.get(i);a!==void 0&&e.set(i,a)}return new Po(e)}size(){return this.vector.size}*[Symbol.iterator](){for(const[t,e]of this.vector)yield[t,e]}}const Y1=new Po(new Map);class Fn{constructor(t,e,i,a,l){p(this,"clientSeq");p(this,"serverSeq");p(this,"actor");p(this,"lamport");p(this,"versionVector");this.clientSeq=t,this.serverSeq=l,this.lamport=e,this.versionVector=a,this.actor=i}hasClocks(){return this.versionVector.size()>0&&this.lamport!=vy}static of(t,e,i,a,l){return new Fn(t,e,i,a,l)}next(t=!1){if(t)return new Fn(this.clientSeq+1,this.lamport,this.actor,Y1,vy);const e=this.versionVector.deepcopy();return e.set(this.actor,this.lamport+1n),new Fn(this.clientSeq+1,this.lamport+1n,this.actor,e)}syncClocks(t){if(!t.hasClocks())return this;const e=t.lamport>this.lamport?t.lamport+1n:this.lamport+1n,i=this.versionVector.max(t.versionVector),a=new Fn(this.clientSeq,e,this.actor,i);return a.versionVector.set(this.actor,e),a}setClocks(t,e){const i=t>this.lamport?t+1n:this.lamport+1n;e.unset(Vd);const a=this.versionVector.max(e);return a.set(this.actor,i),Fn.of(this.clientSeq,i,this.actor,a)}createTimeTicket(t){return Pn.of(this.lamport,t,this.actor)}setActor(t){return new Fn(this.clientSeq,this.lamport,t,this.versionVector,this.serverSeq)}setLamport(t){return new Fn(this.clientSeq,t,this.actor,this.versionVector,this.serverSeq)}setVersionVector(t){return new Fn(this.clientSeq,this.lamport,this.actor,t,this.serverSeq)}getClientSeq(){return this.clientSeq}getServerSeq(){return this.serverSeq?this.serverSeq.toString():""}getLamport(){return this.lamport}getLamportAsString(){return this.lamport.toString()}getActorID(){return this.actor}getVersionVector(){return this.versionVector}toTestString(){return`${this.lamport.toString()}:${this.actor.slice(-2)}:${this.clientSeq}`}}const Q2=new Fn(0,0n,Vd,Y1);class Zo{constructor({id:t,operations:e,presenceChange:i,message:a}){p(this,"id");p(this,"operations");p(this,"presenceChange");p(this,"message");this.id=t,this.operations=e||[],this.presenceChange=i,this.message=a}static create({id:t,operations:e,presenceChange:i,message:a}){return new Zo({id:t,operations:e,presenceChange:i,message:a})}getID(){return this.id}getMessage(){return this.message}hasOperations(){return this.operations.length>0}getOperations(){return this.operations}setActor(t){for(const e of this.operations)e.setActor(t);this.id=this.id.setActor(t)}hasPresenceChange(){return this.presenceChange!==void 0}getPresenceChange(){return this.presenceChange}execute(t,e,i){const a=[],l=[];for(const c of this.operations){const d=c.execute(t,i,this.id.getVersionVector());if(!d)continue;const{opInfos:h,reverseOp:g}=d;a.push(...h),g&&l.unshift(g)}return this.presenceChange&&(this.presenceChange.type===Cr.Put?e.set(this.id.getActorID(),Xn(this.presenceChange.presence)):e.delete(this.id.getActorID())),{opInfos:a,reverseOps:l}}toTestString(){return`${this.operations.map(t=>t.toTestString()).join(",")}`}toStruct(){return{changeID:ge.bytesToHex(ge.toChangeID(this.getID()).toBinary()),message:this.getMessage(),operations:this.getOperations().map(t=>ge.bytesToHex(ge.toOperation(t).toBinary())),presenceChange:this.getPresenceChange()}}static fromStruct(t){const{changeID:e,operations:i,presenceChange:a,message:l}=t;return Zo.create({id:ge.bytesToChangeID(ge.hexToBytes(e)),operations:i==null?void 0:i.map(c=>ge.bytesToOperation(ge.hexToBytes(c))),presenceChange:a,message:l})}}class Yd{constructor(t,e,i,a,l,c){p(this,"documentKey");p(this,"checkpoint");p(this,"isRemoved");p(this,"changes");p(this,"snapshot");p(this,"versionVector");this.documentKey=t,this.checkpoint=e,this.isRemoved=i,this.changes=a,this.snapshot=c,this.versionVector=l}static create(t,e,i,a,l,c){return new Yd(t,e,i,a,l,c)}getDocumentKey(){return this.documentKey}getCheckpoint(){return this.checkpoint}getIsRemoved(){return this.isRemoved}getChanges(){return this.changes}hasChanges(){return this.changes.length>0}getChangeSize(){return this.changes.length}hasSnapshot(){return!!this.snapshot&&!!this.snapshot.length}getSnapshot(){return this.snapshot}getVersionVector(){return this.versionVector}}class Jo{constructor(t,e){p(this,"serverSeq");p(this,"clientSeq");this.serverSeq=t,this.clientSeq=e}static of(t,e){return new Jo(t,e)}increaseClientSeq(t){return t===0?this:new Jo(this.serverSeq,this.clientSeq+t)}forward(t){if(this.equals(t))return this;const e=this.serverSeq>t.serverSeq?this.serverSeq:t.serverSeq,i=Math.max(this.clientSeq,t.clientSeq);return Jo.of(e,i)}getServerSeqAsString(){return this.serverSeq.toString()}getClientSeq(){return this.clientSeq}getServerSeq(){return this.serverSeq}equals(t){return this.clientSeq===t.clientSeq&&this.serverSeq==t.serverSeq}toTestString(){return`serverSeq=${this.serverSeq}, clientSeq=${this.clientSeq}`}}const W2=new Jo(0n,0);class Er{constructor(t,e){p(this,"createdAt");p(this,"offset");this.createdAt=t,this.offset=e}static of(t,e){return new Er(t,e)}static fromStruct(t){return Er.of(Pn.fromStruct(t.createdAt),t.offset)}getCreatedAt(){return this.createdAt}getOffset(){return this.offset}equals(t){return this.createdAt.compare(t.createdAt)===0&&this.offset===t.offset}hasSameCreatedAt(t){return this.createdAt.compare(t.createdAt)===0}split(t){return new Er(this.createdAt,this.offset+t)}toStruct(){return{createdAt:this.createdAt.toStruct(),offset:this.offset}}toTestString(){return`${this.createdAt.toTestString()}:${this.offset}`}toIDString(){return`${this.createdAt.toIDString()}:${this.offset}`}}const tC=Er.of(Ko,0);class nr{constructor(t,e){p(this,"id");p(this,"relativeOffset");this.id=t,this.relativeOffset=e}static of(t,e){return new nr(t,e)}static fromStruct(t){const e=Er.fromStruct(t.id);return nr.of(e,t.relativeOffset)}getID(){return this.id}getRelativeOffset(){return this.relativeOffset}getAbsoluteID(){return Er.of(this.id.getCreatedAt(),this.id.getOffset()+this.relativeOffset)}toTestString(){return`${this.id.toTestString()}:${this.relativeOffset}`}toStruct(){return{id:this.id.toStruct(),relativeOffset:this.relativeOffset}}equals(t){return this.id.equals(t.id)?this.relativeOffset===t.relativeOffset:!1}}class ea extends z1{constructor(e,i,a){super(i);p(this,"id");p(this,"removedAt");p(this,"prev");p(this,"next");p(this,"insPrev");p(this,"insNext");this.id=e,this.removedAt=a}static create(e,i){return new ea(e,i)}static createComparator(){return(e,i)=>{const a=e.getCreatedAt().compare(i.getCreatedAt());return a!==0?a:e.getOffset()>i.getOffset()?1:e.getOffset()<i.getOffset()?-1:0}}getID(){return this.id}getCreatedAt(){return this.id.getCreatedAt()}getLength(){return this.removedAt?0:this.getContentLength()}getContentLength(){return this.value&&this.value.length||0}getPrev(){return this.prev}getNext(){return this.next}getInsPrev(){return this.insPrev}getInsNext(){return this.insNext}getInsPrevID(){return this.insPrev.getID()}setPrev(e){this.prev=e,e&&(e.next=this)}setNext(e){this.next=e,e&&(e.prev=this)}setInsPrev(e){this.insPrev=e,e&&(e.insNext=this)}setInsNext(e){this.insNext=e,e&&(e.insPrev=this)}hasNext(){return!!this.next}hasInsPrev(){return!!this.insPrev}isRemoved(){return!!this.removedAt}getRemovedAt(){return this.removedAt}split(e){return new ea(this.id.split(e),this.splitValue(e),this.removedAt)}canDelete(e,i){const a=!this.removedAt;return this.getCreatedAt().getLamport()<=i&&(!this.removedAt||e.after(this.removedAt))?a:!1}canStyle(e,i){return this.getCreatedAt().getLamport()<=i&&(!this.removedAt||e.after(this.removedAt))}remove(e){this.removedAt=e}createPosRange(){return[nr.of(this.id,0),nr.of(this.id,this.getLength())]}getDataSize(){const e=this.value.getDataSize();return this.id&&(e.meta+=Tr),this.removedAt&&(e.meta+=Tr),e}deepcopy(){return new ea(this.id,this.value,this.removedAt)}toTestString(){return`${this.id.toTestString()} ${this.value?this.value:""}`}splitValue(e){const i=this.value;return this.value=i.substring(0,e),i.substring(e,i.length)}toIDString(){return this.id.toIDString()}}class Qo{constructor(){p(this,"head");p(this,"treeByIndex");p(this,"treeByID");this.head=ea.create(tC),this.treeByIndex=new Lu,this.treeByID=new V1(ea.createComparator()),this.treeByIndex.insert(this.head),this.treeByID.put(this.head.getID(),this.head)}static create(){return new Qo}edit(t,e,i,a){const l={data:0,meta:0},[c,d,h]=this.findNodeWithSplit(t[1],e),[g,y,w]=this.findNodeWithSplit(t[0],e);_e(l,d,y);const v=this.findBetween(w,h),[b,x]=this.deleteNodes(v,e,a),A=h?h.getID():c.getID();let C=nr.of(A,0);if(i){const L=this.posToIndex(g.createPosRange()[1],!0),N=this.insertAfter(g,ea.create(Er.of(e,0),i));_e(l,N.getDataSize()),b.length&&b[b.length-1].from===L?b[b.length-1].value=i:b.push({actor:e.getActorID(),from:L,to:L,value:i}),C=nr.of(N.getID(),N.getContentLength())}const k=[];for(const[,L]of x)k.push({parent:this,child:L});return[C,k,l,b]}indexToPos(t){const[e,i]=this.treeByIndex.find(t),a=e;return nr.of(a.getID(),i)}findIndexesFromRange(t){const[e,i]=t;return[this.posToIndex(e,!1),this.posToIndex(i,!0)]}posToIndex(t,e){const i=t.getAbsoluteID(),a=e?this.findFloorNodePreferToLeft(i):this.findFloorNode(i);if(!a)throw new Y($.ErrInvalidArgument,`the node of the given id should be found: ${i.toTestString()}`);const l=this.treeByIndex.indexOf(a),c=a.isRemoved()?0:i.getOffset()-a.getID().getOffset();return l+c}findNode(t){return this.findFloorNode(t)}get length(){return this.treeByIndex.length}getTreeByIndex(){return this.treeByIndex}getTreeByID(){return this.treeByID}toString(){const t=[];for(const e of this)e.isRemoved()||t.push(e.getValue());return t.join("")}*[Symbol.iterator](){let t=this.head.getNext();for(;t;)yield t,t=t.getNext()}getHead(){return this.head}deepcopy(){const t=new Qo;let e=this.head.getNext(),i=t.head,a;for(;e;){if(a=t.insertAfter(i,e.deepcopy()),e.hasInsPrev()){const l=t.findNode(e.getInsPrevID());a.setInsPrev(l)}i=a,e=e.getNext()}return t}toTestString(){const t=[];let e=this.head;for(;e;)e.isRemoved()?t.push(`{${e.toTestString()}}`):t.push(`[${e.toTestString()}]`),e=e.getNext();return t.join("")}insertAfter(t,e){const i=t.getNext();return e.setPrev(t),i&&i.setPrev(e),this.treeByID.put(e.getID(),e),this.treeByIndex.insertAfter(t,e),e}findNodeWithSplit(t,e){const i=t.getAbsoluteID();let a=this.findFloorNodePreferToLeft(i);const l=i.getOffset()-a.getID().getOffset(),[,c]=this.splitNode(a,l);for(;a.hasNext()&&a.getNext().getCreatedAt().after(e);)a=a.getNext();return[a,c,a.getNext()]}findFloorNodePreferToLeft(t){let e=this.findFloorNode(t);if(!e)throw new Y($.ErrInvalidArgument,`the node of the given id should be found: ${t.toTestString()}`);if(t.getOffset()>0&&e.getID().getOffset()==t.getOffset()){if(!e.hasInsPrev())return e;e=e.getInsPrev()}return e}findFloorNode(t){const e=this.treeByID.floorEntry(t);if(e&&!(!e.key.equals(t)&&!e.key.hasSameCreatedAt(t)))return e.value}findBetween(t,e){const i=[];let a=t;for(;a&&a!==e;)i.push(a),a=a.getNext();return i}splitNode(t,e){const i={data:0,meta:0};if(e>t.getContentLength())throw new Y($.ErrInvalidArgument,"offset should be less than or equal to length");if(e===0)return[t,i];if(e===t.getContentLength())return[t.getNext(),i];const a=t.getDataSize(),l=t.split(e);this.treeByIndex.updateWeight(l),this.insertAfter(t,l);const c=t.getInsNext();return c&&c.setInsPrev(l),l.setInsPrev(t),_e(i,t.getDataSize(),l.getDataSize()),qo(i,a),[l,i]}deleteNodes(t,e,i){if(!t.length)return[[],new Map];const[a,l]=this.filterNodes(t,e,i),c=new Map,d=this.makeChanges(l,e);for(const h of a)c.set(h.getID().toIDString(),h),h.remove(e);return this.deleteIndexNodes(l),[d,c]}filterNodes(t,e,i){const a=[],l=[],[c,d]=this.findEdgesOfCandidates(t);l.push(c);for(const h of t){const g=h.getCreatedAt().getActorID();let y=Eu;i!=null&&(y=i.get(g)?i.get(g):0n),h.canDelete(e,y)?a.push(h):l.push(h)}return l.push(d),[a,l]}findEdgesOfCandidates(t){return[t[0].getPrev(),t[t.length-1].getNext()]}makeChanges(t,e){const i=[];let a,l;for(let c=0;c<t.length-1;c++){const d=t[c],h=t[c+1];d.getNext()!=h&&([a]=this.findIndexesFromRange(d.getNext().createPosRange()),h?[,l]=this.findIndexesFromRange(h.getPrev().createPosRange()):l=this.treeByIndex.length,a<l&&i.push({actor:e.getActorID(),from:a,to:l}))}return i.reverse()}deleteIndexNodes(t){for(let e=0;e<t.length-1;e++){const i=t[e],a=t[e+1];i.getNext()!=a&&this.treeByIndex.deleteRange(i,a)}}purge(t){this.treeByIndex.delete(t),this.treeByID.remove(t.getID());const e=t.getPrev(),i=t.getNext(),a=t.getInsPrev(),l=t.getInsNext();e&&e.setNext(i),i&&i.setPrev(e),t.setPrev(void 0),t.setNext(void 0),a&&a.setInsNext(l),l&&l.setInsPrev(a),t.setInsPrev(void 0),t.setInsNext(void 0)}}const jb=n=>n<0?Math.ceil(n):Math.floor(n);var Dr=(n=>(n[n.Int=0]="Int",n[n.Long=1]="Long",n))(Dr||{});class sn extends Zu{constructor(e,i,a){super(a);p(this,"valueType");p(this,"value");switch(this.valueType=e,e){case 0:typeof i=="number"?i>Math.pow(2,31)-1||i<-Math.pow(2,31)?this.value=Pt.fromNumber(i).toInt():this.value=jb(i):this.value=i.toInt();break;case 1:typeof i=="number"?this.value=Pt.fromNumber(i):this.value=i;break;default:throw new Y($.ErrUnimplemented,`unimplemented type: ${e}`)}}static create(e,i,a){return new sn(e,i,a)}static valueFromBytes(e,i){switch(e){case 0:return i[0]|i[1]<<8|i[2]<<16|i[3]<<24;case 1:return Pt.fromBytesLE(Array.from(i));default:throw new Y($.ErrUnimplemented,`unimplemented type: ${e}`)}}getDataSize(){return{data:this.valueType===0?4:8,meta:this.getMetaUsage()}}toJSON(){return`${this.value}`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:this.value,type:"YORKIE_COUNTER"}}deepcopy(){const e=sn.create(this.valueType,this.value,this.getCreatedAt());return e.setMovedAt(this.getMovedAt()),e}getType(){return this.valueType}static getCounterType(e){switch(typeof e){case"object":return e instanceof Pt?1:void 0;case"number":return e>Math.pow(2,31)-1||e<-Math.pow(2,31)?1:0;default:return}}static isSupport(e){return!!sn.getCounterType(e)}static isInteger(e){return e%1===0}isNumericType(){const e=this.valueType;return e===0||e===1}getValueType(){return this.valueType}getValue(){return this.value}toBytes(){switch(this.valueType){case 0:{const e=this.value;return new Uint8Array([e&255,e>>8&255,e>>16&255,e>>24&255])}case 1:{const i=this.value.toBytesLE();return Uint8Array.from(i)}default:throw new Y($.ErrUnimplemented,`unimplemented type: ${this.valueType}`)}}increase(e){function i(a){if(!a.isNumericType())throw new TypeError(`Unsupported type of value: ${typeof a.getValue()}`)}return i(this),i(e),this.valueType===1?this.value=this.value.add(e.getValue()):e.getType()===re.Long?this.value=this.value+e.getValue().toInt():this.value=Pt.fromNumber(this.value+jb(e.getValue())).toInt(),this}}class Wo extends Jn{constructor(e,i,a){super(e,a);p(this,"value");this.value=i}static create(e,i,a){return new Wo(e,i,a)}execute(e){const i=e.findByCreatedAt(this.getParentCreatedAt());if(!i)throw new Y($.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(i instanceof sn))throw new Y($.ErrInvalidArgument,"fail to execute, only Counter can execute increase");const a=i,l=this.value.deepcopy();return a.increase(l),{opInfos:[{type:"increase",path:e.createPath(this.getParentCreatedAt()),value:l.getValue()}],reverseOp:this.toReverseOperation()}}toReverseOperation(){const e=this.value.deepcopy(),a=e.getType()===re.Long?e.getValue().multiply(-1):e.getValue()*-1;return Wo.create(this.getParentCreatedAt(),ce.of(a,e.getCreatedAt()))}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.INCREASE.${this.value.toJSON()}`}getValue(){return this.value}}class ds extends Jn{constructor(e,i,a,l,c,d){super(e,d);p(this,"fromPos");p(this,"toPos");p(this,"attributes");p(this,"attributesToRemove");this.fromPos=i,this.toPos=a,this.attributes=l,this.attributesToRemove=c}static create(e,i,a,l,c){return new ds(e,i,a,l,[],c)}static createTreeRemoveStyleOperation(e,i,a,l,c){return new ds(e,i,a,new Map,l,c)}execute(e,i,a){const l=e.findByCreatedAt(this.getParentCreatedAt());if(!l)throw new Y($.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(l instanceof vn))throw new Y($.ErrInvalidArgument,"fail to execute, only Tree can execute edit");const c=l;let d,h,g={data:0,meta:0};if(this.attributes.size){const y={};[...this.attributes].forEach(([w,v])=>y[w]=v),[h,d,g]=c.style([this.fromPos,this.toPos],y,this.getExecutedAt(),a)}else{const y=this.attributesToRemove;[h,d,g]=c.removeStyle([this.fromPos,this.toPos],y,this.getExecutedAt(),a)}e.acc(g);for(const y of h)e.registerGCPair(y);return{opInfos:d.map(({from:y,to:w,value:v,fromPath:b,toPath:x})=>({type:"tree-style",from:y,to:w,value:this.attributes.size?{attributes:v}:{attributesToRemove:v},fromPath:b,toPath:x,path:e.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),i=`${this.fromPos.getLeftSiblingID().getCreatedAt().toTestString()}:${this.fromPos.getLeftSiblingID().getOffset()}`,a=`${this.toPos.getLeftSiblingID().getCreatedAt().toTestString()}:${this.toPos.getLeftSiblingID().getOffset()}`;return`${e}.STYLE(${i},${a},${Object.entries(this.attributes||{}).map(([l,c])=>`${l}:"${c}"`).join(" ")})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getAttributes(){return this.attributes}getAttributesToRemove(){return this.attributesToRemove}}class ec extends Jn{constructor(e,i,a,l){super(e,l);p(this,"createdAt");p(this,"value");this.createdAt=i,this.value=a}static create(e,i,a,l){return new ec(e,i,a,l)}execute(e){const i=e.findByCreatedAt(this.getParentCreatedAt());if(!i)throw new Y($.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(i instanceof $e))throw new Y($.ErrInvalidArgument,"fail to execute, only array can execute set");const a=this.value.deepcopy();return i.insertAfter(this.createdAt,a,this.getExecutedAt()),i.delete(this.createdAt,this.getExecutedAt()),e.registerElement(a),{opInfos:[{type:"array-set",path:e.createPath(this.getParentCreatedAt())}],reverseOp:void 0}}getEffectedCreatedAt(){return this.createdAt}toTestString(){return`${this.getParentCreatedAt().toTestString()}.ARRAY_SET.${this.createdAt.toTestString()}=${this.value.toSortedJSON()}`}getCreatedAt(){return this.createdAt}getValue(){return this.value}}function eC(n){const t=new $d,e=t.data;for(const[i,a]of Object.entries(n))e[i]=JSON.stringify(a);return t}function nC(n){if(n.type===Cr.Put)return new Bu({type:_a.PUT,presence:eC(n.presence)});if(n.type===Cr.Clear)return new Bu({type:_a.CLEAR});throw new Y($.ErrUnimplemented,"unimplemented type")}function rC(n){return new M1({serverSeq:n.getServerSeq(),clientSeq:n.getClientSeq()})}function G1(n){return new Jd({clientSeq:n.getClientSeq(),lamport:n.getLamport(),actorId:Kd(n.getActorID()),versionVector:$y(n.getVersionVector())})}function xt(n){if(n)return new wt({lamport:n.getLamport(),delimiter:n.getDelimiter(),actorId:Kd(n.getActorID())})}function $y(n){if(!n)return;const t=new Hd;for(const[e,i]of n){const a=qC(Kd(e));t.vector[a]=BigInt(i.toString())}return t}function K1(n){switch(n){case re.Null:return Rt.NULL;case re.Boolean:return Rt.BOOLEAN;case re.Integer:return Rt.INTEGER;case re.Long:return Rt.LONG;case re.Double:return Rt.DOUBLE;case re.String:return Rt.STRING;case re.Bytes:return Rt.BYTES;case re.Date:return Rt.DATE;default:throw new Y($.ErrInvalidType,`unsupported type: ${n}`)}}function X1(n){switch(n){case Dr.Int:return Rt.INTEGER_CNT;case Dr.Long:return Rt.LONG_CNT;default:throw new Y($.ErrInvalidType,`unsupported type: ${n}`)}}function Cf(n){if(n instanceof He)return new Dn({type:Rt.JSON_OBJECT,createdAt:xt(n.getCreatedAt()),value:lx(n)});if(n instanceof $e)return new Dn({type:Rt.JSON_ARRAY,createdAt:xt(n.getCreatedAt()),value:zC(n)});if(n instanceof pn)return new Dn({type:Rt.TEXT,createdAt:xt(n.getCreatedAt())});if(n instanceof ce)return new Dn({type:K1(n.getType()),createdAt:xt(n.getCreatedAt()),value:n.toBytes()});if(n instanceof sn)return new Dn({type:X1(n.getType()),createdAt:xt(n.getCreatedAt()),value:n.toBytes()});if(n instanceof vn)return new Dn({type:Rt.TREE,createdAt:xt(n.getCreatedAt()),value:_C(n)});throw new Y($.ErrUnimplemented,"unimplemented element")}function iC(n){return new Ru({createdAt:xt(n.getCreatedAt()),offset:n.getOffset()})}function Df(n){return new Ua({createdAt:xt(n.getID().getCreatedAt()),offset:n.getID().getOffset(),relativeOffset:n.getRelativeOffset()})}function kf(n){return new La({parentId:Nu(n.getParentID()),leftSiblingId:Nu(n.getLeftSiblingID())})}function Nu(n){return new Ws({createdAt:xt(n.getCreatedAt()),offset:n.getOffset()})}function F1(n){const t=new qy;if(n instanceof qa){const e=n,i=new nd;i.parentCreatedAt=xt(e.getParentCreatedAt()),i.key=e.getKey(),i.value=Cf(e.getValue()),i.executedAt=xt(e.getExecutedAt()),t.body.case="set",t.body.value=i}else if(n instanceof ol){const e=n,i=new rd;i.parentCreatedAt=xt(e.getParentCreatedAt()),i.prevCreatedAt=xt(e.getPrevCreatedAt()),i.value=Cf(e.getValue()),i.executedAt=xt(e.getExecutedAt()),t.body.case="add",t.body.value=i}else if(n instanceof us){const e=n,i=new id;i.parentCreatedAt=xt(e.getParentCreatedAt()),i.prevCreatedAt=xt(e.getPrevCreatedAt()),i.createdAt=xt(e.getCreatedAt()),i.executedAt=xt(e.getExecutedAt()),t.body.case="move",t.body.value=i}else if(n instanceof hs){const e=n,i=new sd;i.parentCreatedAt=xt(e.getParentCreatedAt()),i.createdAt=xt(e.getCreatedAt()),i.executedAt=xt(e.getExecutedAt()),t.body.case="remove",t.body.value=i}else if(n instanceof Qu){const e=n,i=new ad;i.parentCreatedAt=xt(e.getParentCreatedAt()),i.from=Df(e.getFromPos()),i.to=Df(e.getToPos()),i.content=e.getContent();const a=i.attributes;for(const[l,c]of e.getAttributes())a[l]=c;i.executedAt=xt(e.getExecutedAt()),t.body.case="edit",t.body.value=i}else if(n instanceof Wu){const e=n,i=new od;i.parentCreatedAt=xt(e.getParentCreatedAt()),i.from=Df(e.getFromPos()),i.to=Df(e.getToPos());const a=i.attributes;for(const[l,c]of e.getAttributes())a[l]=c;i.executedAt=xt(e.getExecutedAt()),t.body.case="style",t.body.value=i}else if(n instanceof Wo){const e=n,i=new ld;i.parentCreatedAt=xt(e.getParentCreatedAt()),i.value=Cf(e.getValue()),i.executedAt=xt(e.getExecutedAt()),t.body.case="increase",t.body.value=i}else if(n instanceof tc){const e=n,i=new ud;i.parentCreatedAt=xt(e.getParentCreatedAt()),i.from=kf(e.getFromPos()),i.to=kf(e.getToPos()),i.contents=fC(e.getContents()),i.splitLevel=e.getSplitLevel(),i.executedAt=xt(e.getExecutedAt()),t.body.case="treeEdit",t.body.value=i}else if(n instanceof ds){const e=n,i=new cd;i.parentCreatedAt=xt(e.getParentCreatedAt()),i.from=kf(e.getFromPos()),i.to=kf(e.getToPos());const a=e.getAttributesToRemove();if(a.length>0)i.attributesToRemove=a;else{const l=i.attributes;for(const[c,d]of e.getAttributes())l[c]=d}i.executedAt=xt(e.getExecutedAt()),t.body.case="treeStyle",t.body.value=i}else if(n instanceof ec){const e=n,i=new fd;i.parentCreatedAt=xt(e.getParentCreatedAt()),i.createdAt=xt(e.getCreatedAt()),i.value=Cf(e.getValue()),i.executedAt=xt(e.getExecutedAt()),t.body.case="arraySet",t.body.value=i}else throw new Y($.ErrUnimplemented,"unimplemented operation");return t}function sC(n){const t=[];for(const e of n)t.push(F1(e));return t}function aC(n){const t=new I1({id:G1(n.getID()),message:n.getMessage()});return n.hasOperations()&&(t.operations=sC(n.getOperations())),n.hasPresenceChange()&&(t.presenceChange=nC(n.getPresenceChange())),t}function oC(n){const t=[];for(const e of n)t.push(aC(e));return t}function lC(n){const t=[];for(const e of n)t.push(new R1({key:e.getStrKey(),element:jy(e.getValue())}));return t}function uC(n){const t=[];for(const e of n)t.push(new vd({element:jy(e.getValue())}));return t}function cC(n){const t=[];for(const e of n){const i=new wd;i.id=iC(e.getID()),i.value=e.getValue().getContent(),i.removedAt=xt(e.getRemovedAt());const a=i.attributes,l=e.getValue().getAttrs();for(const c of l){const d=new Go;d.value=c.getValue(),d.updatedAt=xt(c.getUpdatedAt()),a[c.getKey()]=d}t.push(i)}return t}function fC(n){const t=[];if(!n||!n.length)return t;for(const e of n)t.push(new bd({content:Vy(e)}));return t}function dC(n){const t={};for(const e of n)t[e.getKey()]=new Go({value:e.getValue(),updatedAt:xt(e.getUpdatedAt()),isRemoved:e.isRemoved()});return t}function Vy(n){if(!n)return[];const t=[];return jd(n,(e,i)=>{const a=new Mu({id:Nu(e.id),type:e.type,removedAt:xt(e.removedAt),depth:i});e.isText&&(a.value=e.value),e.insPrevID&&(a.insPrevId=Nu(e.insPrevID)),e.insNextID&&(a.insNextId=Nu(e.insNextID)),e.attrs&&(a.attributes=dC(e.attrs)),t.push(a)}),t}function hC(n){const t=new an;return t.body.case="jsonObject",t.body.value=new dd({nodes:lC(n.getRHT()),createdAt:xt(n.getCreatedAt()),movedAt:xt(n.getMovedAt()),removedAt:xt(n.getRemovedAt())}),t}function Z1(n){const t=new an;return t.body.case="jsonArray",t.body.value=new hd({nodes:uC(n.getElements()),createdAt:xt(n.getCreatedAt()),movedAt:xt(n.getMovedAt()),removedAt:xt(n.getRemovedAt())}),t}function gC(n){const t=new an;return t.body.case="primitive",t.body.value=new gd({type:K1(n.getType()),value:n.toBytes(),createdAt:xt(n.getCreatedAt()),movedAt:xt(n.getMovedAt()),removedAt:xt(n.getRemovedAt())}),t}function mC(n){const t=new an;return t.body.case="text",t.body.value=new md({nodes:cC(n.getRGATreeSplit()),createdAt:xt(n.getCreatedAt()),movedAt:xt(n.getMovedAt()),removedAt:xt(n.getRemovedAt())}),t}function yC(n){const t=new an;return t.body.case="counter",t.body.value=new yd({type:X1(n.getType()),value:n.toBytes(),createdAt:xt(n.getCreatedAt()),movedAt:xt(n.getMovedAt()),removedAt:xt(n.getRemovedAt())}),t}function Q1(n){const t=new an;return t.body.case="tree",t.body.value=new pd({nodes:Vy(n.getRoot()),createdAt:xt(n.getCreatedAt()),movedAt:xt(n.getMovedAt()),removedAt:xt(n.getRemovedAt())}),t}function jy(n){if(n instanceof He)return hC(n);if(n instanceof $e)return Z1(n);if(n instanceof ce)return gC(n);if(n instanceof pn)return mC(n);if(n instanceof sn)return yC(n);if(n instanceof vn)return Q1(n);throw new Y($.ErrUnimplemented,"unimplemented element")}function pC(n){return new ys({documentKey:n.getDocumentKey(),checkpoint:rC(n.getCheckpoint()),isRemoved:n.getIsRemoved(),changes:oC(n.getChanges()),snapshot:n.getSnapshot(),versionVector:$y(n.getVersionVector())})}function bu(n){if(!(n instanceof Kt))return{};const t=n.findDetails(z2);for(const e of t)return e.metadata;return{}}function Gs(n){return bu(n).code??""}function W1(n){return Fn.of(n.clientSeq,BigInt(n.lamport),Fy(n.actorId),Yy(n.versionVector),BigInt(n.serverSeq))}function Yy(n){if(!n)return;const t=new Po;return Object.entries(n.vector).forEach(([e,i])=>{const a=Gd(UC(e));t.set(a,BigInt(i.toString()))}),t}function Tt(n){if(n)return Pn.of(BigInt(n.lamport),n.delimiter,Fy(n.actorId))}function Gy(n){const t={};return Object.entries(n.data).forEach(([e,i])=>{t[e]=JSON.parse(i)}),t}function vC(n){const t=n.type;if(t===_a.PUT){const e=Gy(n.presence);return{type:Cr.Put,presence:e}}if(t===_a.CLEAR)return{type:Cr.Clear};throw new Y($.ErrInvalidType,`unsupported type: ${t}`)}function wC(n){const t=new Map;return Object.entries(n).forEach(([e,i])=>{t.set(e,Gy(i))}),t}function tx(n){switch(n){case Rt.NULL:return re.Null;case Rt.BOOLEAN:return re.Boolean;case Rt.INTEGER:return re.Integer;case Rt.LONG:return re.Long;case Rt.DOUBLE:return re.Double;case Rt.STRING:return re.String;case Rt.BYTES:return re.Bytes;case Rt.DATE:return re.Date}throw new Y($.ErrUnimplemented,`unimplemented value type: ${n}`)}function Ed(n){switch(n){case Rt.INTEGER_CNT:return Dr.Int;case Rt.LONG_CNT:return Dr.Long}throw new Y($.ErrUnimplemented,`unimplemented value type: ${n}`)}function Of(n){switch(n.type){case Rt.JSON_OBJECT:return n.value?ox(n.value):He.create(Tt(n.createdAt));case Rt.JSON_ARRAY:return n.value?BC(n.value):$e.create(Tt(n.createdAt));case Rt.TEXT:return pn.create(Qo.create(),Tt(n.createdAt));case Rt.TREE:return LC(n.value);case Rt.NULL:case Rt.BOOLEAN:case Rt.INTEGER:case Rt.LONG:case Rt.DOUBLE:case Rt.STRING:case Rt.BYTES:case Rt.DATE:return ce.of(ce.valueFromBytes(tx(n.type),n.value),Tt(n.createdAt));case Rt.INTEGER_CNT:case Rt.LONG_CNT:return sn.create(Ed(n.type),sn.valueFromBytes(Ed(n.type),n.value),Tt(n.createdAt))}}function If(n){return nr.of(Er.of(Tt(n.createdAt),n.offset),n.relativeOffset)}function ex(n){return Er.of(Tt(n.createdAt),n.offset)}function bC(n){const t=Uu.create(n.value);Object.entries(n.attributes).forEach(([i,a])=>{t.setAttr(i,a.value,Tt(a.updatedAt))});const e=ea.create(ex(n.id),t);return e.remove(Tt(n.removedAt)),e}function Ro(n){return tr.of(Cu(n.parentId),Cu(n.leftSiblingId))}function Cu(n){return Ue.of(Tt(n.createdAt),n.offset)}function SC(n){if(!n.length)return;const t=[];return n.forEach(e=>{const i=Ky(e.content);t.push(i)}),t}function Ky(n){if(n.length===0)return;const t=[];for(const a of n)t.push(TC(a));const e=t[t.length-1],i=new Map;i.set(n[t.length-1].depth,t[t.length-1]);for(let a=t.length-2;a>=0;a--)i.get(n[a].depth-1).prepend(t[a]),i.set(n[a].depth,t[a]);return e.updateDescendantsSize(),vn.create(e,Ko).getRoot()}function xC(n){const t=gs.create();for(const[e,i]of Object.entries(n))t.setInternal(e,i.value,Tt(i.updatedAt),i.isRemoved);return t}function TC(n){const t=Cu(n.id),e=yn.create(t,n.type),i=Object.entries(n.attributes);return e.isText?e.value=n.value:i.length&&(e.attrs=xC(n.attributes)),n.insPrevId&&(e.insPrevID=Cu(n.insPrevId)),n.insNextId&&(e.insNextID=Cu(n.insNextId)),e.removedAt=Tt(n.removedAt),e}function nx(n){if(n.body.case==="set"){const t=n.body.value;return qa.create(t.key,Of(t.value),Tt(t.parentCreatedAt),Tt(t.executedAt))}else if(n.body.case==="add"){const t=n.body.value;return ol.create(Tt(t.parentCreatedAt),Tt(t.prevCreatedAt),Of(t.value),Tt(t.executedAt))}else if(n.body.case==="move"){const t=n.body.value;return us.create(Tt(t.parentCreatedAt),Tt(t.prevCreatedAt),Tt(t.createdAt),Tt(t.executedAt))}else if(n.body.case==="remove"){const t=n.body.value;return hs.create(Tt(t.parentCreatedAt),Tt(t.createdAt),Tt(t.executedAt))}else if(n.body.case==="edit"){const t=n.body.value,e=new Map;return Object.entries(t.attributes).forEach(([i,a])=>{e.set(i,a)}),Qu.create(Tt(t.parentCreatedAt),If(t.from),If(t.to),t.content,e,Tt(t.executedAt))}else if(n.body.case==="style"){const t=n.body.value,e=new Map;return Object.entries(t.attributes).forEach(([i,a])=>{e.set(i,a)}),Wu.create(Tt(t.parentCreatedAt),If(t.from),If(t.to),e,Tt(t.executedAt))}else if(n.body.case==="increase"){const t=n.body.value;return Wo.create(Tt(t.parentCreatedAt),Of(t.value),Tt(t.executedAt))}else if(n.body.case==="treeEdit"){const t=n.body.value;return tc.create(Tt(t.parentCreatedAt),Ro(t.from),Ro(t.to),SC(t.contents),t.splitLevel,Tt(t.executedAt))}else if(n.body.case==="treeStyle"){const t=n.body.value,e=new Map,i=t.attributesToRemove;return(i==null?void 0:i.length)>0?ds.createTreeRemoveStyleOperation(Tt(t.parentCreatedAt),Ro(t.from),Ro(t.to),i,Tt(t.executedAt)):(Object.entries(t.attributes).forEach(([a,l])=>{e.set(a,l)}),ds.create(Tt(t.parentCreatedAt),Ro(t.from),Ro(t.to),e,Tt(t.executedAt)))}else if(n.body.case==="arraySet"){const t=n.body.value;return ec.create(Tt(t.parentCreatedAt),Tt(t.createdAt),Of(t.value),Tt(t.executedAt))}else throw new Y($.ErrUnimplemented,"unimplemented operation")}function AC(n){const t=[];for(const e of n){const i=nx(e);i&&t.push(i)}return t}function rx(n){const t=[];for(const e of n)t.push(Zo.create({id:W1(e.id),operations:AC(e.operations),presenceChange:e.presenceChange?vC(e.presenceChange):void 0,message:e.message}));return t}function EC(n){return Jo.of(BigInt(n.serverSeq),n.clientSeq)}function NC(n){return Yd.create(n.documentKey,EC(n.checkpoint),n.isRemoved,rx(n.changes),Yy(n.versionVector),n.snapshot)}function ix(n){const t=new zu;for(const i of n.nodes){const a=Xy(i.element);t.set(i.key,a,a.getPositionedAt())}const e=new He(Tt(n.createdAt),t);return e.setMovedAt(Tt(n.movedAt)),e.setRemovedAt(Tt(n.removedAt)),e}function sx(n){const t=new _u;for(const i of n.nodes)t.insert(Xy(i.element));const e=new $e(Tt(n.createdAt),t);return e.setMovedAt(Tt(n.movedAt)),e.setRemovedAt(Tt(n.removedAt)),e}function CC(n){const t=ce.of(ce.valueFromBytes(tx(n.type),n.value),Tt(n.createdAt));return t.setMovedAt(Tt(n.movedAt)),t.setRemovedAt(Tt(n.removedAt)),t}function DC(n){const t=new Qo;let e=t.getHead();for(const a of n.nodes){const l=t.insertAfter(e,bC(a));a.insPrevId&&l.setInsPrev(t.findNode(ex(a.insPrevId))),e=l}const i=new pn(t,Tt(n.createdAt));return i.setMovedAt(Tt(n.movedAt)),i.setRemovedAt(Tt(n.removedAt)),i}function kC(n){const t=sn.create(Ed(n.type),sn.valueFromBytes(Ed(n.type),n.value),Tt(n.createdAt));return t.setMovedAt(Tt(n.movedAt)),t.setRemovedAt(Tt(n.removedAt)),t}function ax(n){const t=Ky(n.nodes);return vn.create(t,Tt(n.createdAt))}function Xy(n){if(n.body.case==="jsonObject")return ix(n.body.value);if(n.body.case==="jsonArray")return sx(n.body.value);if(n.body.case==="primitive")return CC(n.body.value);if(n.body.case==="text")return DC(n.body.value);if(n.body.case==="counter")return kC(n.body.value);if(n.body.case==="tree")return ax(n.body.value);throw new Y($.ErrUnimplemented,"unimplemented element")}function OC(n){return n.map(t=>({path:t.path,type:t.type}))}function IC(n){if(!n)return{root:He.create(Ko),presences:new Map};const t=Km.fromBinary(n);return{root:Xy(t.root),presences:wC(t.presences)}}function RC(n){const t=$y(n);return Gd(t.toBinary())}function MC(n){const t=Zy(n),e=Hd.fromBinary(t);return Yy(e)}function ox(n){if(!n)throw new Y($.ErrInvalidArgument,"bytes is empty");const t=an.fromBinary(n);return ix(t.body.value)}function lx(n){return jy(n).toBinary()}function BC(n){if(!n)throw new Y($.ErrInvalidArgument,"bytes is empty");const t=an.fromBinary(n);return sx(t.body.value)}function zC(n){return Z1(n).toBinary()}function LC(n){if(!n)throw new Y($.ErrInvalidArgument,"bytes is empty");const t=an.fromBinary(n);return ax(t.body.value)}function _C(n){return Q1(n).toBinary()}function Gd(n){return n?Array.from(n).map(t=>t.toString(16).padStart(2,"0")).join(""):""}function Fy(n){return Gd(n)}function Zy(n){return new Uint8Array(n.match(/.{1,2}/g).map(t=>parseInt(t,16)))}function UC(n){if(typeof window<"u"&&typeof window.atob=="function"){const t=window.atob(n),e=t.length,i=new Uint8Array(e);for(let a=0;a<e;a++)i[a]=t.charCodeAt(a);return i}else if(typeof globalThis<"u"&&typeof globalThis.Buffer<"u"){const t=globalThis.Buffer;return new Uint8Array(t.from(n,"base64"))}else throw new Error("No base64 decoder available")}function Kd(n){return Zy(n)}function qC(n){if(typeof window<"u"&&typeof window.btoa=="function"){let t="";for(let e=0;e<n.byteLength;e++)t+=String.fromCharCode(n[e]);return window.btoa(t)}else{if(typeof globalThis<"u"&&typeof globalThis.Buffer<"u")return globalThis.Buffer.from(n).toString("base64");throw new Error("No base64 encoder available")}}function PC(n){const t=Jd.fromBinary(n);return W1(t)}function JC(n){const t=qy.fromBinary(n);return nx(t)}const ge={fromPresence:Gy,toChangePack:pC,fromChangePack:NC,fromChanges:rx,toTreeNodes:Vy,fromTreeNodes:Ky,objectToBytes:lx,bytesToObject:ox,bytesToSnapshot:IC,bytesToHex:Gd,hexToBytes:Zy,toHexString:Fy,toUint8Array:Kd,toOperation:F1,toChangeID:G1,PbChangeID:Jd,bytesToChangeID:PC,bytesToOperation:JC,versionVectorToHex:RC,hexToVersionVector:MC,fromSchemaRules:OC};var tn=(n=>(n[n.Trivial=0]="Trivial",n[n.Debug=1]="Debug",n[n.Info=2]="Info",n[n.Warn=3]="Warn",n[n.Error=4]="Error",n[n.Fatal=5]="Fatal",n))(tn||{});let Da=3;function HC(n){Da=n}const At={trivial:(...n)=>{Da>0||typeof console<"u"&&console.log("YORKIE T:",...n)},debug:(...n)=>{Da>1||typeof console<"u"&&console.log("YORKIE D:",...n)},info:(...n)=>{Da>2||typeof console<"u"&&console.log("YORKIE I:",...n)},warn:(...n)=>{Da>3||typeof console<"u"&&(typeof console.warn<"u"?console.warn("YORKIE W:",...n):console.log("YORKIE W:",...n))},error:(...n)=>{Da>4||typeof console<"u"&&(typeof console.error<"u"?console.error("YORKIE E:",...n):console.log("YORKIE E:",...n))},fatal:(...n)=>{typeof console<"u"&&(typeof console.error<"u"?console.error("YORKIE F:",...n):console.log("YORKIE F:",...n))},isEnabled:n=>Da<=n};function ux(){return"xxxxxxxx-xxxx-4xxxy-xxxx-xxxxxxxxxxx".replace(/[xy]/g,n=>{const t=Math.random()*16|0;return(n==="x"?t:t&3|8).toString(16)})}class $C{constructor(t,e,i,a,l){p(this,"reconnectStreamDelay");p(this,"doc");p(this,"docID");p(this,"syncMode");p(this,"remoteChangeEventReceived");p(this,"watchStream");p(this,"watchLoopTimerID");p(this,"watchAbortController");p(this,"unsubscribeBroadcastEvent");this.reconnectStreamDelay=t,this.doc=e,this.docID=i,this.syncMode=a,this.remoteChangeEventReceived=!1,this.unsubscribeBroadcastEvent=l}changeSyncMode(t){this.syncMode=t}needRealtimeSync(){return this.syncMode===Kf.RealtimeSyncOff?!1:this.syncMode===Kf.RealtimePushOnly?this.doc.hasLocalChanges():this.syncMode!==Kf.Manual&&(this.doc.hasLocalChanges()||this.remoteChangeEventReceived)}async runWatchLoop(t){const e=async()=>{if(this.watchStream)return Promise.resolve();this.watchLoopTimerID&&(clearTimeout(this.watchLoopTimerID),this.watchLoopTimerID=void 0);try{[this.watchStream,this.watchAbortController]=await t(()=>{this.watchStream=void 0,this.watchAbortController=void 0,this.watchLoopTimerID=setTimeout(e,this.reconnectStreamDelay)})}catch{}};await e()}cancelWatchStream(){this.watchStream&&this.watchAbortController&&(this.watchAbortController.abort(),this.watchStream=void 0,this.watchAbortController=void 0),clearTimeout(this.watchLoopTimerID),this.watchLoopTimerID=void 0}}function VC(n,t){const e=[];for(const i of t){const a=jC(n,i.path),l=YC(a,i);if(!l.valid)for(const c of l.errors||[])e.push(c)}return{valid:e.length===0,errors:e}}function jC(n,t){if(!t.startsWith("$"))throw new Error(`Path must start with $, got ${t}`);const e=t.split(".");let i=n;for(let a=1;a<e.length;a++){const l=e[a];if(!(i instanceof He))return;i=i.get(l)}return i}function YC(n,t){switch(t.type){case"string":case"boolean":case"integer":case"double":case"long":case"date":case"bytes":case"null":return KC(n,t);case"object":if(!(n instanceof He))return{valid:!1,errors:[{path:t.path,message:`Expected object at path ${t.path}`}]};break;case"array":if(!(n instanceof $e))return{valid:!1,errors:[{path:t.path,message:`Expected array at path ${t.path}`}]};break;case"yorkie.Text":if(!(n instanceof pn))return{valid:!1,errors:[{path:t.path,message:`Expected yorkie.Text at path ${t.path}`}]};break;case"yorkie.Tree":if(!(n instanceof vn))return{valid:!1,errors:[{path:t.path,message:`Expected yorkie.Tree at path ${t.path}`}]};break;case"yorkie.Counter":if(!(n instanceof sn))return{valid:!1,errors:[{path:t.path,message:`Expected yorkie.Counter at path ${t.path}`}]};break;default:throw new Error(`Unknown rule type: ${t.type}`)}return{valid:!0}}function GC(n){switch(n){case"null":return re.Null;case"boolean":return re.Boolean;case"integer":return re.Integer;case"long":return re.Long;case"double":return re.Double;case"string":return re.String;case"bytes":return re.Bytes;case"date":return re.Date;default:throw new Error(`Unknown primitive type: ${n}`)}}function KC(n,t){return n instanceof ce&&n.getType()===GC(t.type)?{valid:!0}:{valid:!1,errors:[{path:t.path,message:`Expected ${t.type} at path ${t.path}`}]}}const Im=()=>{};class XC{constructor(t){p(this,"finalized",!1);p(this,"observers",[]);p(this,"finalError");try{t(this)}catch(e){this.error(e)}}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,i){let a;if(!t)throw new Y($.ErrInvalidArgument,"missing observer");if(this.finalized)throw new Y($.ErrRefused,"observable is finalized due to previous error");typeof t=="object"?a=t:a={next:t,error:e,complete:i},a.next===void 0&&(a.next=Im),a.error===void 0&&(a.error=Im),a.complete===void 0&&(a.complete=Im);const l=ux(),c=this.unsubscribeOne.bind(this,l);if(this.observers.push({subscriptionID:l,observer:a}),this.finalized)try{this.finalError?a.error(this.finalError):a.complete()}catch(d){At.warn(d)}return c}unsubscribeOne(t){var e;this.observers=(e=this.observers)==null?void 0:e.filter(i=>i.subscriptionID!==t)}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){if(this.observers!==void 0&&this.observers[t]!==void 0)try{e(this.observers[t].observer)}catch(i){At.error(i)}}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.observers=void 0)}}function FC(n){const t=new XC(n);return{subscribe:t.subscribe.bind(t),getProxy:()=>t}}class Lo{constructor(t,e,i,a){p(this,"prevID");p(this,"nextID");p(this,"delimiter");p(this,"message");p(this,"root");p(this,"operations");p(this,"presenceChange");p(this,"previousPresence");p(this,"reversePresenceKeys");this.prevID=t,this.nextID=t.next(),this.delimiter=B1,this.root=e,this.operations=[],this.previousPresence=Xn(i),this.presenceChange=void 0,this.reversePresenceKeys=new Set,this.message=a}static create(t,e,i,a){return new Lo(t,e,i,a)}push(t){this.operations.push(t)}registerElement(t,e){this.root.registerElement(t,e)}registerRemovedElement(t){this.root.registerRemovedElement(t)}registerGCPair(t){this.root.registerGCPair(t)}getNextID(){return this.isPresenceOnlyChange()?this.prevID.next(!0).setLamport(this.prevID.getLamport()).setVersionVector(this.prevID.getVersionVector()):this.nextID}toChange(){const t=this.isPresenceOnlyChange()?this.prevID.next(!0):this.nextID;return Zo.create({id:t,operations:this.operations,presenceChange:this.presenceChange,message:this.message})}isPresenceOnlyChange(){return this.operations.length===0}hasChange(){return this.operations.length>0||this.presenceChange!==void 0}setPresenceChange(t){this.presenceChange=t}setReversePresence(t,e){for(const i of Object.keys(t))e!=null&&e.addToHistory?this.reversePresenceKeys.add(i):this.reversePresenceKeys.delete(i)}getReversePresence(){if(this.reversePresenceKeys.size===0)return;const t={};for(const e of this.reversePresenceKeys)t[e]=this.previousPresence[e];return t}issueTimeTicket(){return this.delimiter+=1,this.nextID.createTimeTicket(this.delimiter)}getLastTimeTicket(){return this.nextID.createTimeTicket(this.delimiter)}acc(t){this.root.acc(t)}}class qu{constructor(t){p(this,"rootObject");p(this,"elementPairMapByCreatedAt");p(this,"gcElementSetByCreatedAt");p(this,"gcPairMap");p(this,"docSize");this.rootObject=t,this.elementPairMapByCreatedAt=new Map,this.gcElementSetByCreatedAt=new Set,this.gcPairMap=new Map,this.docSize={live:{data:0,meta:0},gc:{data:0,meta:0}},this.registerElement(t,void 0),t.getDescendants(e=>{if(e.getRemovedAt()&&this.registerRemovedElement(e),e instanceof pn||e instanceof vn)for(const i of e.getGCPairs())this.registerGCPair(i);return!1})}static create(){return new qu(He.create(Ko))}findByCreatedAt(t){const e=this.elementPairMapByCreatedAt.get(t.toIDString());if(e)return e.element}findElementPairByCreatedAt(t){return this.elementPairMapByCreatedAt.get(t.toIDString())}createSubPaths(t){let e=this.elementPairMapByCreatedAt.get(t.toIDString());if(!e)return[];const i=[];for(;e.parent;){const a=e.element.getCreatedAt(),l=e.parent.subPathOf(a);if(l===void 0)throw new Y($.ErrInvalidArgument,`cant find the given element: ${a.toIDString()}`);i.unshift(l),e=this.elementPairMapByCreatedAt.get(e.parent.getCreatedAt().toIDString())}return i.unshift("$"),i}createPath(t){return this.createSubPaths(t).join(".")}registerElement(t,e){this.elementPairMapByCreatedAt.set(t.getCreatedAt().toIDString(),{parent:e,element:t}),_e(this.docSize.live,t.getDataSize()),t instanceof ta&&t.getDescendants((i,a)=>(this.elementPairMapByCreatedAt.set(i.getCreatedAt().toIDString(),{parent:a,element:i}),_e(this.docSize.live,i.getDataSize()),!1))}deregisterElement(t){let e=0;const i=a=>{const l=a.getCreatedAt().toIDString();qo(this.docSize.gc,a.getDataSize()),this.elementPairMapByCreatedAt.delete(l),this.gcElementSetByCreatedAt.delete(l),e++};return i(t),t instanceof ta&&t.getDescendants(a=>(i(a),!1)),e}registerRemovedElement(t){_e(this.docSize.gc,t.getDataSize()),qo(this.docSize.live,t.getDataSize()),this.docSize.live.meta+=Tr,this.gcElementSetByCreatedAt.add(t.getCreatedAt().toIDString())}registerGCPair(t){if(this.gcPairMap.get(t.child.toIDString())){this.gcPairMap.delete(t.child.toIDString());return}this.gcPairMap.set(t.child.toIDString(),t);const i=this.gcPairMap.get(t.child.toIDString()).child.getDataSize();_e(this.docSize.gc,i),qo(this.docSize.live,i),t.child instanceof Qs||(this.docSize.live.meta+=Tr)}getElementMapSize(){return this.elementPairMapByCreatedAt.size}getGarbageElementSetSize(){const t=new Set;for(const e of this.gcElementSetByCreatedAt){t.add(e);const i=this.elementPairMapByCreatedAt.get(e);i.element instanceof ta&&i.element.getDescendants(a=>(t.add(a.getCreatedAt().toIDString()),!1))}return t.size}getObject(){return this.rootObject}getGarbageLen(){return this.getGarbageElementSetSize()+this.gcPairMap.size}getDocSize(){return this.docSize}deepcopy(){return new qu(this.rootObject.deepcopy())}garbageCollect(t){let e=0;for(const i of this.gcElementSetByCreatedAt){const a=this.elementPairMapByCreatedAt.get(i),l=a.element.getRemovedAt();l&&(t!=null&&t.afterOrEqual(l))&&(a.parent.purge(a.element),e+=this.deregisterElement(a.element))}for(const[,i]of this.gcPairMap){const a=i.child.getRemovedAt();a&&(t!=null&&t.afterOrEqual(a))&&(i.parent.purge(i.child),this.gcPairMap.delete(i.child.toIDString()),e+=1)}return e}toJSON(){return this.rootObject.toJSON()}toSortedJSON(){return this.rootObject.toSortedJSON()}getStats(){return{elements:this.getElementMapSize(),gcPairs:this.gcPairMap.size,gcElements:this.getGarbageElementSetSize()}}acc(t){_e(this.docSize.live,t)}}function cx(n,t){const e=new Pu(n);return new Proxy(t,e.getHandlers())}class Pu{constructor(t){p(this,"context");p(this,"handlers");this.context=t,this.handlers={set:(e,i,a)=>(At.isEnabled(tn.Trivial)&&At.trivial(`obj[${i}]=${JSON.stringify(a)}`),Pu.setInternal(t,e,i,a),!0),get:(e,i)=>(At.isEnabled(tn.Trivial)&&At.trivial(`obj[${i}]`),i==="getID"?()=>e.getCreatedAt():i==="toJSON"||i==="toString"?()=>e.toJSON():i==="toJS"?()=>e.toJS():i==="toJSForTest"?()=>e.toJSForTest():ka(t,e.get(i))),ownKeys:e=>e.getKeys(),getOwnPropertyDescriptor:()=>({enumerable:!0,configurable:!0}),deleteProperty:(e,i)=>(At.isEnabled(tn.Trivial)&&At.trivial(`obj[${i}]`),Pu.deleteInternal(t,e,i),!0)}}static setInternal(t,e,i,a){if(i.includes("."))throw new Y($.ErrInvalidObjectKey,"key must not contain the '.'.");const l=t.issueTimeTicket(),c=Du(t,a,l),d=e.set(i,c,l);t.registerElement(c,e),d&&t.registerRemovedElement(d),t.push(qa.create(i,c.deepcopy(),e.getCreatedAt(),l))}static buildObjectMembers(t,e){const i={};for(const[a,l]of Object.entries(e)){if(a.includes("."))throw new Y($.ErrInvalidObjectKey,"key must not contain the '.'.");const c=t.issueTimeTicket(),d=Du(t,l,c);i[a]=d}return i}static deleteInternal(t,e,i){const a=t.issueTimeTicket(),l=e.deleteByKey(i,a);l&&(t.push(hs.create(e.getCreatedAt(),l.getCreatedAt(),a)),t.registerRemovedElement(l))}getHandlers(){return this.handlers}}function ZC(n,t){const e=new Gt(n,t);return new Proxy(t,e.getHandlers())}function Yb(n){return typeof n=="string"||n instanceof String?!isNaN(n):!1}function QC(n){return["concat","entries","every","filter","find","findIndex","forEach","join","keys","map","reduce","reduceRight","slice","some","toLocaleString","toString","values"].includes(n)}class Gt{constructor(t,e){p(this,"context");p(this,"handlers");p(this,"array");this.context=t,this.array=e,this.handlers={get:(i,a,l)=>a==="getID"?()=>i.getCreatedAt():a==="getElementByID"?c=>{const d=i.getByID(c);if(!(!d||d.isRemoved()))return Kn(t,d)}:a==="getElementByIndex"?c=>{const d=i.get(c);return Kn(t,d)}:a==="getLast"?()=>Kn(t,i.getLast()):a==="delete"?c=>{const d=Gt.deleteInternalByIndex(t,i,c);return Kn(t,d)}:a==="deleteByID"?c=>{const d=Gt.deleteInternalByID(t,i,c);return Kn(t,d)}:a==="insertAfter"?(c,d)=>{const h=Gt.insertAfterInternal(t,i,c,d);return Kn(t,h)}:a==="insertIntegerAfter"?(c,d)=>{const h=Gt.insertIntegerAfterInternal(t,i,c,d);return Kn(t,h)}:a==="insertBefore"?(c,d)=>{const h=Gt.insertBeforeInternal(t,i,c,d);return Kn(t,h)}:a==="setValue"?(c,d)=>{const h=Gt.setValueInternal(t,i,c,d);return Kn(t,h)}:a==="moveBefore"?(c,d)=>{Gt.moveBeforeInternal(t,i,c,d)}:a==="moveAfter"?(c,d)=>{Gt.moveAfterInternal(t,i,c,d)}:a==="moveAfterByIndex"?(c,d)=>{Gt.moveAfterByIndexInternal(t,i,c,d)}:a==="moveFront"?c=>{Gt.moveFrontInternal(t,i,c)}:a==="moveLast"?c=>{Gt.moveLastInternal(t,i,c)}:Yb(a)?ka(t,i.get(Number(a))):a==="push"?c=>Gt.pushInternal(t,i,c):a==="splice"?(c,d,...h)=>Gt.splice(t,i,c,d,...h):a==="length"?i.length:typeof a=="symbol"&&a===Symbol.iterator?Gt.iteratorInternal.bind(this,t,i):a==="includes"?(c,d)=>Gt.includes(t,i,c,d):a==="indexOf"?(c,d)=>Gt.indexOf(t,i,c,d):a==="lastIndexOf"?(c,d)=>Gt.lastIndexOf(t,i,c,d):a==="toJSForTest"?()=>i.toJSForTest():a==="toTestString"?()=>Gt.toTestString(i):typeof a=="string"&&QC(a)?(...c)=>{const d=Array.from(i).map(h=>ka(t,h));return Array.prototype[a].apply(d,c)}:Reflect.get(i,a,l),set:(i,a,l)=>{if(Yb(a)){const c=Number(a);return Gt.setValueInternal(t,i,c,l),!0}return Reflect.set(i,a,l)},deleteProperty:(i,a)=>(At.isEnabled(tn.Trivial)&&At.trivial(`array[${a}]`),Gt.deleteInternalByIndex(t,i,Number.parseInt(a)),!0)}}static*iteratorInternal(t,e){for(const i of e)yield Kn(t,i)}static buildArrayElements(t,e){const i=[];for(const a of e){const l=t.issueTimeTicket(),c=Du(t,a,l);i.push(c)}return i}static pushInternal(t,e,i){return Gt.insertAfterInternal(t,e,e.getLastCreatedAt(),i),e.length}static moveBeforeInternal(t,e,i,a){const l=t.issueTimeTicket(),c=e.getPrevCreatedAt(i);e.moveAfter(c,a,l),t.push(us.create(e.getCreatedAt(),c,a,l))}static moveAfterInternal(t,e,i,a){const l=t.issueTimeTicket();t.push(us.create(e.getCreatedAt(),i,a,l)),e.moveAfter(i,a,l)}static moveAfterByIndexInternal(t,e,i,a){const l=e.get(i);if(!l)throw new Y($.ErrInvalidArgument,`index out of bounds: ${i}`);const c=e.get(a);if(!c)throw new Y($.ErrInvalidArgument,`index out of bounds: ${a}`);Gt.moveAfterInternal(t,e,l.getCreatedAt(),c.getCreatedAt())}static moveFrontInternal(t,e,i){const a=t.issueTimeTicket(),l=e.getHead();e.moveAfter(l.getCreatedAt(),i,a),t.push(us.create(e.getCreatedAt(),l.getCreatedAt(),i,a))}static moveLastInternal(t,e,i){const a=t.issueTimeTicket(),l=e.getLastCreatedAt();e.moveAfter(l,i,a),t.push(us.create(e.getCreatedAt(),l,i,a))}static insertAfterInternal(t,e,i,a){const l=t.issueTimeTicket(),c=Du(t,a,l);return e.insertAfter(i,c),t.registerElement(c,e),t.push(ol.create(e.getCreatedAt(),i,c.deepcopy(),l)),c}static insertIntegerAfterInternal(t,e,i,a){const l=e.get(i);if(!l)throw new Y($.ErrInvalidArgument,`index out of bounds: ${i}`);return Gt.insertAfterInternal(t,e,l.getCreatedAt(),a),e}static insertBeforeInternal(t,e,i,a){return Gt.insertAfterInternal(t,e,e.getPrevCreatedAt(i),a)}static setValueInternal(t,e,i,a){const l=e.get(i);if(!l)throw new Y($.ErrInvalidArgument,`index out of bounds: ${i}`);return Gt.setByIndexInternal(t,e,l.getCreatedAt(),a),e}static setByIndexInternal(t,e,i,a){const l=t.issueTimeTicket(),c=Du(t,a,l),d=c.deepcopy();return t.push(ec.create(e.getCreatedAt(),i,d,l)),e.set(i,c,l),t.registerElement(c,e),c}static deleteInternalByIndex(t,e,i){const a=t.issueTimeTicket(),l=e.deleteByIndex(i,a);if(l)return t.push(hs.create(e.getCreatedAt(),l.getCreatedAt(),a)),t.registerRemovedElement(l),l}static deleteInternalByID(t,e,i){const a=t.issueTimeTicket(),l=e.delete(i,a);return t.push(hs.create(e.getCreatedAt(),l.getCreatedAt(),a)),t.registerRemovedElement(l),l}static splice(t,e,i,a,...l){const c=e.length,d=i>=0?Math.min(i,c):Math.max(c+i,0),h=a===void 0?c:a<0?d:Math.min(d+a,c),g=[];for(let y=d;y<h;y++){const w=Gt.deleteInternalByIndex(t,e,d);if(w){const v=w.deepcopy();v.setRemovedAt(),g.push(ka(t,v))}}if(l){let y=d===0?e.getHead().getID():e.get(d-1).getID();for(const w of l)y=Gt.insertAfterInternal(t,e,y,w).getID()}return g}static includes(t,e,i,a){var d;const l=e.length,c=a===void 0?0:a<0?Math.max(a+l,0):a;if(c>=l)return!1;if(ce.isSupport(i))return Array.from(e).map(g=>ka(t,g)).includes(i,c);for(let h=c;h<l;h++)if(((d=e.get(h))==null?void 0:d.getID())===i.getID())return!0;return!1}static indexOf(t,e,i,a){var d;const l=e.length,c=a===void 0?0:a<0?Math.max(a+l,0):a;if(c>=l)return-1;if(ce.isSupport(i))return Array.from(e).map(g=>ka(t,g)).indexOf(i,c);for(let h=c;h<l;h++)if(((d=e.get(h))==null?void 0:d.getID())===i.getID())return h;return-1}static lastIndexOf(t,e,i,a){var d;const l=e.length,c=a===void 0||a>=l?l-1:a<0?a+l:a;if(c<0)return-1;if(ce.isSupport(i))return Array.from(e).map(g=>ka(t,g)).lastIndexOf(i,c);for(let h=c;h>0;h--)if(((d=e.get(h))==null?void 0:d.getID())===i.getID())return h;return-1}static toTestString(t){return t.toTestString()}getHandlers(){return this.handlers}}class Qy{constructor(t,e){p(this,"context");p(this,"text");this.context=t,this.text=e}initialize(t,e){this.context=t,this.text=e}getID(){return this.text.getID()}edit(t,e,i,a){if(!this.context||!this.text)throw new Y($.ErrNotInitialized,"Text is not initialized yet");if(t>e)throw new Y($.ErrInvalidArgument,"from should be less than or equal to to");const l=this.text.indexRangeToPosRange(t,e);At.isEnabled(tn.Debug)&&At.debug(`EDIT: f:${t}->${l[0].toTestString()}, t:${e}->${l[1].toTestString()} c:${i}`);const c=a?Fo(a):void 0,d=this.context.issueTimeTicket(),[,h,g,y]=this.text.edit(l,i,d,c);this.context.acc(g);for(const w of h)this.context.registerGCPair(w);return this.context.push(new Qu(this.text.getCreatedAt(),l[0],l[1],i,c?new Map(Object.entries(c)):new Map,d)),this.text.findIndexesFromRange(y)}delete(t,e){return this.edit(t,e,"")}empty(){return this.edit(0,this.length,"")}setStyle(t,e,i){if(!this.context||!this.text)throw new Y($.ErrNotInitialized,"Text is not initialized yet");if(t>e)throw new Y($.ErrInvalidArgument,"from should be less than or equal to to");const a=this.text.indexRangeToPosRange(t,e);At.isEnabled(tn.Debug)&&At.debug(`STYL: f:${t}->${a[0].toTestString()}, t:${e}->${a[1].toTestString()} a:${JSON.stringify(i)}`);const l=Fo(i),c=this.context.issueTimeTicket(),[d,h]=this.text.setStyle(a,l,c);this.context.acc(h);for(const g of d)this.context.registerGCPair(g);return this.context.push(new Wu(this.text.getCreatedAt(),a[0],a[1],new Map(Object.entries(l)),c)),!0}indexRangeToPosRange(t){if(!this.context||!this.text)throw new Y($.ErrNotInitialized,"Text is not initialized yet");const e=this.text.indexRangeToPosRange(t[0],t[1]);return[e[0].toStruct(),e[1].toStruct()]}posRangeToIndexRange(t){if(!this.context||!this.text)throw new Y($.ErrNotInitialized,"Text is not initialized yet");const e=this.text.findIndexesFromRange([nr.fromStruct(t[0]),nr.fromStruct(t[1])]);return[e[0],e[1]]}toTestString(){if(!this.context||!this.text)throw new Y($.ErrNotInitialized,"Text is not initialized yet");return this.text.toTestString()}values(){if(!this.context||!this.text)throw new Y($.ErrNotInitialized,"Text is not initialized yet");return this.text.values()}get length(){return this.text.length}getTreeByIndex(){return this.text.getTreeByIndex()}getTreeByID(){return this.text.getTreeByID()}toString(){if(!this.context||!this.text)throw new Y($.ErrNotInitialized,"Text is not initialized yet");return this.text.toString()}toJSON(){if(!this.context||!this.text)throw new Y($.ErrNotInitialized,"Text is not initialized yet");return this.text.toJSON()}toJSForTest(){if(!this.context||!this.text)throw new Y($.ErrNotInitialized,"Text is not initialized yet");return this.text.toJSForTest()}createRangeForTest(t,e){if(!this.context||!this.text)throw new Y($.ErrNotInitialized,"Text is not initialized yet");return this.text.indexRangeToPosRange(t,e)}}class Wy{constructor(t,e){p(this,"valueType");p(this,"value");p(this,"context");p(this,"counter");this.valueType=t,this.value=e}initialize(t,e){this.valueType=e.getValueType(),this.context=t,this.counter=e,this.value=e.getValue()}getID(){return this.counter.getID()}getValue(){return this.value}getValueType(){return this.valueType}increase(t){if(!this.context||!this.counter)throw new Y($.ErrNotInitialized,"Counter is not initialized yet");const e=this.context.issueTimeTicket(),i=ce.of(t,e);if(!i.isNumericType())throw new TypeError(`Unsupported type of value: ${typeof i.getValue()}`);return this.counter.increase(i),this.context.push(Wo.create(this.counter.getCreatedAt(),i,e)),this}toJSForTest(){if(!this.context||!this.counter)throw new Y($.ErrNotInitialized,"Counter is not initialized yet");return this.counter.toJSForTest()}}function tp(n){if(n.isText)return{type:n.type,value:n.value};const t={type:n.type,children:n.children.map(e=>tp(e))};return n.attrs&&(t.attributes=fs(n.attrs.toObject())),t}function WC(n,t){const e={type:n.isText?n.parent.type:n.type,children:n.isText?n.parent.getChildrenText().length===t?[]:[{type:Ar,value:n.parent.getChildrenText().slice(t)}]:n.children.slice(t).map(i=>tp(i))};return n.attrs?e.attributes=fs(n.attrs.toObject()):n.isText&&n.parent.attrs&&(e.attributes=fs(n.parent.attrs.toObject())),e}function tD(n,t){const{node:e}=n,i=[...t].slice(0,-1),a=e.isText?e.parent.getChildrenText().length:e.children.length,l=[...i,a],c=[...i],d=[];c[c.length-1]+=1,t.every((g,y)=>g===l[y])||d.push({fromPath:[...t],toPath:l});const h=WC(e,t[t.length-1]);return h&&d.push({fromPath:c,toPath:c,content:h}),d}function eD(n,t){const{node:e,offset:i}=n,a=e.children[i],l=e.children[i-1],{children:c}=a,d=[...t].slice(0,-1),h=[{fromPath:[...t],toPath:[...d,i+1]}];if(!a.children.length)return h;const g=[...d,i-1,l.hasTextChild()?l.getChildrenText().length:l.children.length],y=c.map(w=>tp(w));return h.push({fromPath:g,toPath:g,content:y}),h}function ep(n,t,e){const{type:i}=n,a=e.issueTimeTicket();if(i===Ar){fx(n);const{value:l}=n,c=yn.create(Ue.of(a,0),i,l);t.append(c)}else{const{children:l=[]}=n,{attributes:c}=n;let d;if(typeof c=="object"&&!P1(c)){const g=Fo(c);d=new gs;for(const[y,w]of Object.entries(g))d.set(y,w,a)}const h=yn.create(Ue.of(a,0),i,void 0,d);t.append(h);for(const g of l)ep(g,h,e)}}function nD(n,t){const{type:e}=t,i=n.issueTimeTicket();let a;if(t.type===Ar){const{value:l}=t;a=yn.create(Ue.of(i,0),e,l)}else if(t){const{children:l=[]}=t,{attributes:c}=t;let d;if(typeof c=="object"&&!P1(c)){const h=Fo(c);d=new gs;for(const[g,y]of Object.entries(h))d.set(g,y,i)}a=yn.create(Ue.of(n.issueTimeTicket(),0),e,void 0,d);for(const h of l)ep(h,a,n)}return a}function fx(n){if(!n.value.length)throw new Y($.ErrInvalidArgument,"text node cannot have empty value");return!0}function Gb(n){if(!n.length)return!0;if(n[0].type===Ar)for(const e of n){const{type:i}=e;if(i!==Ar)throw new Y($.ErrInvalidArgument,"element node and text node cannot be passed together");fx(e)}else for(const e of n){const{type:i}=e;if(i===Ar)throw new Y($.ErrInvalidArgument,"element node and text node cannot be passed together")}return!0}class np{constructor(t){p(this,"initialRoot");p(this,"context");p(this,"tree");this.initialRoot=t}initialize(t,e){this.context=t,this.tree=e}getID(){return this.tree.getID()}buildRoot(t){if(!this.initialRoot)return yn.create(Ue.of(t.issueTimeTicket(),0),V2);const e=yn.create(Ue.of(t.issueTimeTicket(),0),this.initialRoot.type);for(const i of this.initialRoot.children)ep(i,e,t);return e}getSize(){if(!this.context||!this.tree)throw new Y($.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getSize()}getNodeSize(){if(!this.context||!this.tree)throw new Y($.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getNodeSize()}getIndexTree(){if(!this.context||!this.tree)throw new Y($.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getIndexTree()}splitByPath(t){if(!this.context||!this.tree)throw new Y($.ErrNotInitialized,"Tree is not initialized yet");if(!t.length)throw new Y($.ErrInvalidArgument,"path should not be empty");const e=this.tree.pathToTreePos(t),i=tD(e,t);for(const a of i){const{fromPath:l,toPath:c,content:d}=a,h=this.tree.pathToPos(l),g=this.tree.pathToPos(c);this.editInternal(h,g,d?[d]:[],0)}}mergeByPath(t){if(!this.context||!this.tree)throw new Y($.ErrNotInitialized,"Tree is not initialized yet");if(!t.length)throw new Y($.ErrInvalidArgument,"path should not be empty");const e=this.tree.pathToTreePos(t);if(e.node.isText)throw new Y($.ErrInvalidArgument,"text node cannot be merged");const i=eD(e,t);for(const a of i){const{fromPath:l,toPath:c,content:d}=a,h=this.tree.pathToPos(l),g=this.tree.pathToPos(c);this.editInternal(h,g,d??[],0)}}styleByPath(t,e){if(!this.context||!this.tree)throw new Y($.ErrNotInitialized,"Tree is not initialized yet");if(!t.length)throw new Y($.ErrInvalidArgument,"path should not be empty");const[i,a]=this.tree.pathToPosRange(t),l=this.context.issueTimeTicket(),c=e?Fo(e):void 0,[d,,h]=this.tree.style([i,a],c,l);this.context.acc(h);for(const g of d)this.context.registerGCPair(g);this.context.push(ds.create(this.tree.getCreatedAt(),i,a,c?new Map(Object.entries(c)):new Map,l))}style(t,e,i){if(!this.context||!this.tree)throw new Y($.ErrNotInitialized,"Tree is not initialized yet");if(t>e)throw new Y($.ErrInvalidArgument,"from should be less than or equal to to");const a=this.tree.findPos(t),l=this.tree.findPos(e),c=this.context.issueTimeTicket(),d=i?Fo(i):void 0,[h,,g]=this.tree.style([a,l],d,c);this.context.acc(g);for(const y of h)this.context.registerGCPair(y);this.context.push(ds.create(this.tree.getCreatedAt(),a,l,d?new Map(Object.entries(d)):new Map,c))}removeStyle(t,e,i){if(!this.context||!this.tree)throw new Y($.ErrNotInitialized,"Tree is not initialized yet");if(t>e)throw new Y($.ErrInvalidArgument,"from should be less than or equal to to");const a=this.tree.findPos(t),l=this.tree.findPos(e),c=this.context.issueTimeTicket(),[d,,h]=this.tree.removeStyle([a,l],i,c);this.context.acc(h);for(const g of d)this.context.registerGCPair(g);this.context.push(ds.createTreeRemoveStyleOperation(this.tree.getCreatedAt(),a,l,i,c))}editInternal(t,e,i,a=0){var g;if(i.length!==0&&i[0]&&(Gb(i),i[0].type!==Ar))for(const y of i){const{children:w=[]}=y;Gb(w)}const l=this.context.getLastTimeTicket();let c=new Array;if(((g=i[0])==null?void 0:g.type)===Ar){let y="";for(const w of i){const{value:v}=w;y+=v}c.push(yn.create(Ue.of(this.context.issueTimeTicket(),0),Ar,y))}else c=i.map(y=>y&&nD(this.context,y)).filter(y=>y);const[,d,h]=this.tree.edit([t,e],c.length?c.map(y=>y==null?void 0:y.deepcopy()):void 0,a,l,()=>this.context.issueTimeTicket());this.context.acc(h);for(const y of d)this.context.registerGCPair(y);return this.context.push(tc.create(this.tree.getCreatedAt(),t,e,c.length?c:void 0,a,l)),!0}editByPath(t,e,i,a=0){if(!this.context||!this.tree)throw new Y($.ErrNotInitialized,"Tree is not initialized yet");if(t.length!==e.length)throw new Y($.ErrInvalidArgument,"path length should be equal");if(!t.length||!e.length)throw new Y($.ErrInvalidArgument,"path should not be empty");const l=this.tree.pathToPos(t),c=this.tree.pathToPos(e);return this.editInternal(l,c,i?[i]:[],a)}editBulkByPath(t,e,i,a=0){if(!this.context||!this.tree)throw new Y($.ErrNotInitialized,"Tree is not initialized yet");if(t.length!==e.length)throw new Y($.ErrInvalidArgument,"path length should be equal");if(!t.length||!e.length)throw new Y($.ErrInvalidArgument,"path should not be empty");const l=this.tree.pathToPos(t),c=this.tree.pathToPos(e);return this.editInternal(l,c,i,a)}edit(t,e,i,a=0){if(!this.context||!this.tree)throw new Y($.ErrNotInitialized,"Tree is not initialized yet");if(t>e)throw new Y($.ErrInvalidArgument,"from should be less than or equal to to");const l=this.tree.findPos(t),c=this.tree.findPos(e);return this.editInternal(l,c,i?[i]:[],a)}editBulk(t,e,i,a=0){if(!this.context||!this.tree)throw new Y($.ErrNotInitialized,"Tree is not initialized yet");if(t>e)throw new Y($.ErrInvalidArgument,"from should be less than or equal to to");const l=this.tree.findPos(t),c=this.tree.findPos(e);return this.editInternal(l,c,i,a)}toXML(){if(!this.context||!this.tree)throw new Y($.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toXML()}toJSON(){if(!this.context||!this.tree)throw new Y($.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toJSON()}toJSForTest(){if(!this.context||!this.tree)throw new Y($.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toJSForTest()}toJSInfoForTest(){if(!this.context||!this.tree)throw new Y($.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toJSInfoForTest()}getRootTreeNode(){if(!this.context||!this.tree)throw new Y($.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getRootTreeNode()}indexToPath(t){if(!this.context||!this.tree)throw new Y($.ErrNotInitialized,"Tree is not initialized yet");return this.tree.indexToPath(t)}pathToIndex(t){if(!this.context||!this.tree)throw new Y($.ErrNotInitialized,"Tree is not initialized yet");return this.tree.pathToIndex(t)}pathRangeToPosRange(t){if(!this.context||!this.tree)throw new Y($.ErrNotInitialized,"Tree is not initialized yet");const e=[this.tree.pathToIndex(t[0]),this.tree.pathToIndex(t[1])],i=this.tree.indexRangeToPosRange(e);return[i[0].toStruct(),i[1].toStruct()]}indexRangeToPosRange(t){if(!this.context||!this.tree)throw new Y($.ErrNotInitialized,"Tree is not initialized yet");return this.tree.indexRangeToPosStructRange(t)}posRangeToIndexRange(t){if(!this.context||!this.tree)throw new Y($.ErrNotInitialized,"Tree is not initialized yet");const e=[tr.fromStruct(t[0]),tr.fromStruct(t[1])];return this.tree.posRangeToIndexRange(e)}posRangeToPathRange(t){if(!this.context||!this.tree)throw new Y($.ErrNotInitialized,"Tree is not initialized yet");const e=[tr.fromStruct(t[0]),tr.fromStruct(t[1])];return this.tree.posRangeToPathRange(e)}}function Kb(n,t){return cx(n,t)}function Kn(n,t){if(t){if(t instanceof ce)return t;if(t instanceof He)return cx(n,t);if(t instanceof $e)return ZC(n,t);if(t instanceof pn)return new Qy(n,t);if(t instanceof sn){const e=new Wy(Dr.Int,0);return e.initialize(n,t),e}else if(t instanceof vn){const e=new np;return e.initialize(n,t),e}}else return;throw new TypeError(`Unsupported type of element: ${typeof t}`)}function ka(n,t){const e=Kn(n,t);return e instanceof ce?e.getValue():e}function Du(n,t,e){let i;if(ce.isSupport(t))i=ce.of(t,e);else if(Array.isArray(t))i=$e.create(e,Gt.buildArrayElements(n,t));else if(typeof t=="object")t instanceof Qy?(i=pn.create(Qo.create(),e),t.initialize(n,i)):t instanceof Wy?(i=sn.create(t.getValueType(),t.getValue(),e),t.initialize(n,i)):t instanceof np?(i=vn.create(t.buildRoot(n),e),t.initialize(n,i)):i=He.create(e,Pu.buildObjectMembers(n,t));else throw new TypeError(`Unsupported type of value: ${typeof t}`);return i}class Rm{constructor(t,e){p(this,"context");p(this,"presence");this.context=t,this.presence=e}set(t,e){for(const i of Object.keys(t))this.presence[i]=t[i];this.context.setPresenceChange({type:Cr.Put,presence:Xn(this.presence)}),this.context.setReversePresence(t,e)}get(t){return this.presence[t]}clear(){this.presence={},this.context.setPresenceChange({type:Cr.Clear})}}const Xb=50;class rD{constructor(){p(this,"undoStack",[]);p(this,"redoStack",[])}hasUndo(){return this.undoStack.length>0}hasRedo(){return this.redoStack.length>0}pushUndo(t){this.undoStack.length>=Xb&&this.undoStack.shift(),this.undoStack.push(t)}popUndo(){return this.undoStack.pop()}pushRedo(t){this.redoStack.length>=Xb&&this.redoStack.shift(),this.redoStack.push(t)}popRedo(){return this.redoStack.pop()}clearRedo(){this.redoStack=[]}getUndoStackForTest(){return this.undoStack}getRedoStackForTest(){return this.redoStack}}const iD="yorkie-devtools-panel",sD="yorkie-devtools-sdk";function aD(n){return[ze.StatusChanged,ze.Snapshot,ze.LocalChange,ze.RemoteChange,ze.Initialized,ze.Watched,ze.Unwatched,ze.PresenceChanged].includes(n.type)}function oD(n){return n.every(aD)}let Bo="disconnected";const Fb=new Map,Gf=new Map;typeof window<"u"&&(window.docEventsForReplayByDocKey=Gf);function Rf(n,t){(t!=null&&t.force||Bo!=="disconnected")&&window.postMessage({source:sD,...n},"*")}function lD(n){if(!n.isEnableDevtools()||typeof window>"u"||Fb.has(n.getKey()))return;Gf.set(n.getKey(),[]);const t=n.subscribe("all",e=>{oD(e)&&(Gf.get(n.getKey()).push(e),Bo==="synced"&&Rf({msg:"doc::sync::partial",docKey:n.getKey(),event:e}))});Fb.set(n.getKey(),[t]),Rf({msg:"refresh-devtools"},{force:!0}),window.addEventListener("message",e=>{var a;if(((a=e.data)==null?void 0:a.source)!==iD)return;switch(e.data.msg){case"devtools::connect":if(Bo!=="disconnected")break;Bo="connected",Rf({msg:"doc::available",docKey:n.getKey()}),At.info(`[YD] Devtools connected. Doc: ${n.getKey()}`);break;case"devtools::disconnect":Bo="disconnected",At.info(`[YD] Devtools disconnected. Doc: ${n.getKey()}`);break;case"devtools::subscribe":Bo="synced",Rf({msg:"doc::sync::full",docKey:n.getKey(),events:Gf.get(n.getKey())}),At.info(`[YD] Devtools subscribed. Doc: ${n.getKey()}`);break}})}var Fs=(n=>(n.Detached="detached",n.Attached="attached",n.Removed="removed",n))(Fs||{}),ze=(n=>(n.StatusChanged="status-changed",n.ConnectionChanged="connection-changed",n.SyncStatusChanged="sync-status-changed",n.Snapshot="snapshot",n.LocalChange="local-change",n.RemoteChange="remote-change",n.Initialized="initialized",n.Watched="watched",n.Unwatched="unwatched",n.PresenceChanged="presence-changed",n.Broadcast="broadcast",n.LocalBroadcast="local-broadcast",n.AuthError="auth-error",n))(ze||{}),Nd=(n=>(n.Connected="connected",n.Disconnected="disconnected",n))(Nd||{}),xy=(n=>(n.Synced="synced",n.SyncFailed="sync-failed",n))(xy||{});class dx{constructor(t,e){p(this,"key");p(this,"status");p(this,"opts");p(this,"changeID");p(this,"checkpoint");p(this,"localChanges");p(this,"maxSizeLimit");p(this,"schemaRules");p(this,"root");p(this,"clone");p(this,"eventStream");p(this,"eventStreamObserver");p(this,"onlineClients");p(this,"presences");p(this,"history");p(this,"internalHistory");p(this,"isUpdating");this.opts=e||{},this.key=t,this.status="detached",this.root=qu.create(),this.changeID=Q2,this.checkpoint=W2,this.localChanges=[],this.maxSizeLimit=0,this.schemaRules=[],this.eventStream=FC(i=>{this.eventStreamObserver=i}),this.onlineClients=new Set,this.presences=new Map,this.isUpdating=!1,this.internalHistory=new rD,this.history={canUndo:this.canUndo.bind(this),canRedo:this.canRedo.bind(this),undo:this.undo.bind(this),redo:this.redo.bind(this)},lD(this)}update(t,e){var d,h,g;if(this.getStatus()==="removed")throw new Y($.ErrDocumentRemoved,`${this.key} is removed`);this.ensureClone();const i=this.changeID.getActorID(),a=Lo.create(this.changeID,this.clone.root,this.clone.presences.get(i)||{},e);try{const y=Kb(a,this.clone.root.getObject());this.presences.has(i)||this.clone.presences.set(i,{}),this.isUpdating=!0,t(y,new Rm(a,this.clone.presences.get(i)))}catch(y){throw this.clone=void 0,y}finally{this.isUpdating=!1}const l=this.getSchemaRules();if(!a.isPresenceOnlyChange()&&l.length>0){const y=VC((d=this.clone)==null?void 0:d.root.getObject(),l);if(!y.valid)throw this.clone=void 0,new Y($.ErrDocumentSchemaValidationFailed,`schema validation failed: ${(h=y.errors)==null?void 0:h.map(w=>w.message).join(", ")}`)}const c=H2((g=this.clone)==null?void 0:g.root.getDocSize());if(!a.isPresenceOnlyChange()&&this.maxSizeLimit>0&&this.maxSizeLimit<c)throw this.clone=void 0,new Y($.ErrDocumentSizeExceedsLimit,`document size exceeded: ${c} > ${this.maxSizeLimit}`);if(a.hasChange()){At.isEnabled(tn.Trivial)&&At.trivial(`trying to update a local change: ${this.toJSON()}`);const y=a.toChange(),{opInfos:w,reverseOps:v}=y.execute(this.root,this.presences,ne.Local),b=a.getReversePresence();b&&v.push({type:"presence",value:b}),this.localChanges.push(y),v.length>0&&this.internalHistory.pushUndo(v),w.length>0&&this.internalHistory.clearRedo(),this.changeID=a.getNextID();const x=[];w.length>0&&x.push({type:"local-change",source:ne.Local,value:{message:y.getMessage()||"",operations:w,actor:i,clientSeq:y.getID().getClientSeq(),serverSeq:y.getID().getServerSeq()},rawChange:this.isEnableDevtools()?y.toStruct():void 0}),y.hasPresenceChange()&&x.push({type:"presence-changed",source:ne.Local,value:{clientID:i,presence:this.getPresence(i)}}),this.publish(x),At.isEnabled(tn.Trivial)&&At.trivial(`after update a local change: ${this.toJSON()}`)}}subscribe(t,e,i,a){if(typeof t=="string"){if(typeof e!="function")throw new Y($.ErrInvalidArgument,"Second argument must be a callback function");if(t==="presence"){const d=e;return this.eventStream.subscribe(h=>{for(const g of h)g.type!=="initialized"&&g.type!=="watched"&&g.type!=="unwatched"&&g.type!=="presence-changed"||d(g)},i,a)}if(t==="my-presence"){const d=e;return this.eventStream.subscribe(h=>{for(const g of h)g.type!=="initialized"&&g.type!=="presence-changed"||g.type==="presence-changed"&&g.value.clientID!==this.changeID.getActorID()||d(g)},i,a)}if(t==="others"){const d=e;return this.eventStream.subscribe(h=>{for(const g of h)g.type!=="watched"&&g.type!=="unwatched"&&g.type!=="presence-changed"||g.value.clientID!==this.changeID.getActorID()&&d(g)},i,a)}if(t==="connection"){const d=e;return this.eventStream.subscribe(h=>{for(const g of h)g.type==="connection-changed"&&d(g)},i,a)}if(t==="status"){const d=e;return this.eventStream.subscribe(h=>{for(const g of h)g.type==="status-changed"&&d(g)},i,a)}if(t==="sync"){const d=e;return this.eventStream.subscribe(h=>{for(const g of h)g.type==="sync-status-changed"&&d(g)},i,a)}if(t==="local-broadcast"){const d=e;return this.eventStream.subscribe(h=>{for(const g of h)g.type==="local-broadcast"&&d(g)},i)}if(t==="broadcast"){const d=e;return this.eventStream.subscribe(h=>{for(const g of h)g.type==="broadcast"&&d(g)},i)}if(t==="auth-error"){const d=e;return this.eventStream.subscribe(h=>{for(const g of h)g.type==="auth-error"&&d(g)},i)}if(t==="all"){const d=e;return this.eventStream.subscribe(d,i,a)}const l=t,c=e;return this.eventStream.subscribe(d=>{for(const h of d){if(h.type!=="local-change"&&h.type!=="remote-change")continue;const g=[];for(const y of h.value.operations)this.isSameElementOrChildOf(y.path,l)&&g.push(y);g.length&&c({...h,value:{...h.value,operations:g}})}},i,a)}if(typeof t=="function"){const l=t,c=e,d=i;return this.eventStream.subscribe(h=>{for(const g of h)g.type!=="snapshot"&&g.type!=="local-change"&&g.type!=="remote-change"||l(g)},c,d)}throw new Y($.ErrInvalidArgument,`"${t}" is not a valid`)}publish(t){this.eventStreamObserver&&this.eventStreamObserver.next(t)}isSameElementOrChildOf(t,e){if(e===t)return!0;const i=t.split(".");return e.split(".").every((l,c)=>l===i[c])}removePushedLocalChanges(t){for(;this.localChanges.length&&!(this.localChanges[0].getID().getClientSeq()>t);)this.localChanges.shift()}applyChangePack(t){const e=t.hasSnapshot();e?this.applySnapshot(t.getCheckpoint().getServerSeq(),t.getVersionVector(),t.getSnapshot(),t.getCheckpoint().getClientSeq()):(this.applyChanges(t.getChanges(),ne.Remote),this.removePushedLocalChanges(t.getCheckpoint().getClientSeq())),this.checkpoint=this.checkpoint.forward(t.getCheckpoint()),e||this.garbageCollect(t.getVersionVector()),t.getIsRemoved()&&this.applyStatus("removed"),At.isEnabled(tn.Trivial)&&At.trivial(`${this.root.toJSON()}`)}getCheckpoint(){return this.checkpoint}getChangeID(){return this.changeID}hasLocalChanges(){return this.localChanges.length>0}ensureClone(){this.clone||(this.clone={root:this.root.deepcopy(),presences:Xn(this.presences)})}createChangePack(){const t=Array.from(this.localChanges),e=this.checkpoint.increaseClientSeq(t.length);return Yd.create(this.key,e,!1,t,this.getVersionVector())}setActor(t){for(const e of this.localChanges)e.setActor(t);this.changeID=this.changeID.setActor(t)}isEnableDevtools(){return!!this.opts.enableDevtools}getKey(){return this.key}getStatus(){return this.status}getClone(){return this.clone}getCloneRoot(){if(this.clone)return this.clone.root.getObject()}getRoot(){this.ensureClone();const t=Lo.create(this.changeID.next(),this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});return Kb(t,this.clone.root.getObject())}getDocSize(){return this.root.getDocSize()}getMaxSizePerDocument(){return this.maxSizeLimit}setMaxSizePerDocument(t){this.maxSizeLimit=t}getSchemaRules(){return this.schemaRules}setSchemaRules(t){this.schemaRules=t}garbageCollect(t){return this.opts.disableGC?0:(this.clone&&this.clone.root.garbageCollect(t),this.root.garbageCollect(t))}getRootObject(){return this.root.getObject()}getGarbageLen(){return this.root.getGarbageLen()}getGarbageLenFromClone(){return this.clone.root.getGarbageLen()}toJSON(){return this.root.toJSON()}toSortedJSON(){return this.root.toSortedJSON()}getStats(){return this.root.getStats()}toJSForTest(){return{...this.getRoot().toJSForTest(),key:"root"}}applySnapshot(t,e,i,a=-1){const{root:l,presences:c}=ge.bytesToSnapshot(i);this.root=new qu(l),this.presences=c,this.changeID=this.changeID.setClocks(e.maxLamport(),e),this.clone=void 0,this.removePushedLocalChanges(a),this.applyChanges(this.localChanges,ne.Local),this.publish([{type:"snapshot",source:ne.Remote,value:{serverSeq:t.toString(),snapshot:this.isEnableDevtools()?ge.bytesToHex(i):void 0,snapshotVector:ge.versionVectorToHex(e)}}])}applyChanges(t,e){At.isEnabled(tn.Debug)&&At.debug(`trying to apply ${t.length} remote changes.elements:${this.root.getElementMapSize()}, removeds:${this.root.getGarbageElementSetSize()}`),At.isEnabled(tn.Trivial)&&At.trivial(t.map(i=>`${i.getID().toTestString()}	${i.toTestString()}`).join(`
`));for(const i of t)this.applyChange(i,e);At.isEnabled(tn.Debug)&&At.debug(`after appling ${t.length} remote changes.elements:${this.root.getElementMapSize()},  removeds:${this.root.getGarbageElementSetSize()}`)}applyChange(t,e){this.ensureClone(),t.execute(this.clone.root,this.clone.presences,e);const i=[],a=t.getID().getActorID();if(t.hasPresenceChange()&&this.onlineClients.has(a)){const c=t.getPresenceChange();switch(c.type){case Cr.Put:i.push(this.presences.has(a)?{type:"presence-changed",source:e,value:{clientID:a,presence:c.presence}}:{type:"watched",source:ne.Remote,value:{clientID:a,presence:c.presence}});break;case Cr.Clear:i.push({type:"unwatched",source:ne.Remote,value:{clientID:a,presence:this.getPresence(a)}}),this.removeOnlineClient(a);break}}const{opInfos:l}=t.execute(this.root,this.presences,e);if(this.changeID=this.changeID.syncClocks(t.getID()),l.length>0){const c=this.isEnableDevtools()?t.toStruct():void 0;i.push(e===ne.Remote?{type:"remote-change",source:e,value:{actor:a,clientSeq:t.getID().getClientSeq(),serverSeq:t.getID().getServerSeq(),message:t.getMessage()||"",operations:l},rawChange:c}:{type:"local-change",source:e,value:{actor:a,clientSeq:t.getID().getClientSeq(),serverSeq:t.getID().getServerSeq(),message:t.getMessage()||"",operations:l},rawChange:c})}i.length>0&&this.publish(i)}applyWatchStream(t){if(t.body.case==="initialization"){const e=t.body.value.clientIds,i=new Set;for(const a of e)a!==this.changeID.getActorID()&&i.add(a);this.setOnlineClients(i),this.publish([{type:"initialized",source:ne.Local,value:this.getPresences()}]);return}if(t.body.case==="event"){const{type:e,publisher:i}=t.body.value,a=[];if(e===Ma.DOCUMENT_WATCHED){if(this.onlineClients.has(i)&&this.hasPresence(i))return;this.addOnlineClient(i),this.hasPresence(i)&&a.push({type:"watched",source:ne.Remote,value:{clientID:i,presence:this.getPresence(i)}})}else if(e===Ma.DOCUMENT_UNWATCHED){const l=this.getPresence(i);this.removeOnlineClient(i),l&&a.push({type:"unwatched",source:ne.Remote,value:{clientID:i,presence:l}})}else if(e===Ma.DOCUMENT_BROADCAST&&t.body.value.body){const{topic:l,payload:c}=t.body.value.body,d=new TextDecoder;a.push({type:"broadcast",value:{clientID:i,topic:l,payload:JSON.parse(d.decode(c))}})}a.length>0&&this.publish(a)}}applyStatus(t){this.status=t,t==="detached"&&this.setActor(Vd),this.publish([{source:t==="removed"?ne.Remote:ne.Local,type:"status-changed",value:t==="attached"?{status:t,actorID:this.changeID.getActorID()}:{status:t}}])}applyDocEventForReplay(t){if(t.type==="status-changed"){this.applyStatus(t.value.status),t.value.status==="attached"&&this.setActor(t.value.actorID);return}if(t.type==="snapshot"){const{snapshot:e,serverSeq:i,snapshotVector:a}=t.value;if(!e)return;this.applySnapshot(BigInt(i),ge.hexToVersionVector(a),ge.hexToBytes(e));return}if(t.type==="local-change"||t.type==="remote-change"){if(!t.rawChange)return;const e=Zo.fromStruct(t.rawChange);this.applyChange(e,t.source)}if(t.type==="initialized"){const e=new Set;for(const{clientID:i,presence:a}of t.value)e.add(i),this.presences.set(i,a);this.setOnlineClients(e);return}if(t.type==="watched"){const{clientID:e,presence:i}=t.value;this.addOnlineClient(e),this.presences.set(e,i);return}if(t.type==="unwatched"){const{clientID:e}=t.value;this.removeOnlineClient(e),this.presences.delete(e)}if(t.type==="presence-changed"){const{clientID:e,presence:i}=t.value;this.presences.set(e,i)}}applyDocEventsForReplay(t){for(const e of t)this.applyDocEventForReplay(e)}getValueByPath(t){if(!t.startsWith("$"))throw new Y($.ErrInvalidArgument,'path must start with "$"');const e=t.split(".");e.shift();let i=this.getRoot();for(const a of e)if(i=i[a],i===void 0)return;return i}setOnlineClients(t){this.onlineClients=t}resetOnlineClients(){this.onlineClients=new Set}addOnlineClient(t){this.onlineClients.add(t)}removeOnlineClient(t){this.onlineClients.delete(t)}hasPresence(t){return this.presences.has(t)}getMyPresence(){if(this.status!=="attached")return{};const t=this.presences.get(this.changeID.getActorID());return t?Xn(t):{}}getPresence(t){if(t===this.changeID.getActorID())return this.getMyPresence();if(!this.onlineClients.has(t))return;const e=this.presences.get(t);return e?Xn(e):void 0}getPresenceForTest(t){const e=this.presences.get(t);return e?Xn(e):void 0}getPresences(){const t=[];t.push({clientID:this.changeID.getActorID(),presence:Xn(this.getMyPresence())});for(const e of this.onlineClients)this.presences.has(e)&&t.push({clientID:e,presence:Xn(this.presences.get(e))});return t}getSelfForTest(){return{clientID:this.getChangeID().getActorID(),presence:this.getMyPresence()}}getOthersForTest(){const t=this.getChangeID().getActorID();return this.getPresences().filter(e=>e.clientID!==t).sort((e,i)=>e.clientID>i.clientID?1:-1)}canUndo(){return this.internalHistory.hasUndo()&&!this.isUpdating}canRedo(){return this.internalHistory.hasRedo()&&!this.isUpdating}undo(){if(this.isUpdating)throw new Y($.ErrRefused,"Undo is not allowed during an update");const t=this.internalHistory.popUndo();if(t===void 0)throw new Y($.ErrRefused,"There is no operation to be undone");this.ensureClone();const e=Lo.create(this.changeID,this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});for(const g of t){if(!(g instanceof Jn)){new Rm(e,Xn(this.clone.presences.get(this.changeID.getActorID()))).set(g.value,{addToHistory:!0});continue}const y=e.issueTimeTicket();g.setExecutedAt(y),e.push(g)}const i=e.toChange();i.execute(this.clone.root,this.clone.presences,ne.UndoRedo);const{opInfos:a,reverseOps:l}=i.execute(this.root,this.presences,ne.UndoRedo),c=e.getReversePresence();if(c&&l.push({type:"presence",value:c}),l.length>0&&this.internalHistory.pushRedo(l),!i.hasPresenceChange()&&a.length===0)return;this.localChanges.push(i),this.changeID=e.getNextID();const d=this.changeID.getActorID(),h=[];a.length>0&&h.push({type:"local-change",source:ne.UndoRedo,value:{message:i.getMessage()||"",operations:a,actor:d,clientSeq:i.getID().getClientSeq(),serverSeq:i.getID().getServerSeq()},rawChange:this.isEnableDevtools()?i.toStruct():void 0}),i.hasPresenceChange()&&h.push({type:"presence-changed",source:ne.UndoRedo,value:{clientID:d,presence:this.getPresence(d)}}),this.publish(h)}redo(){if(this.isUpdating)throw new Y($.ErrRefused,"Redo is not allowed during an update");const t=this.internalHistory.popRedo();if(t===void 0)throw new Y($.ErrRefused,"There is no operation to be redone");this.ensureClone();const e=Lo.create(this.changeID,this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});for(const g of t){if(!(g instanceof Jn)){new Rm(e,Xn(this.clone.presences.get(this.changeID.getActorID()))).set(g.value,{addToHistory:!0});continue}const y=e.issueTimeTicket();g.setExecutedAt(y),e.push(g)}const i=e.toChange();i.execute(this.clone.root,this.clone.presences,ne.UndoRedo);const{opInfos:a,reverseOps:l}=i.execute(this.root,this.presences,ne.UndoRedo),c=e.getReversePresence();if(c&&l.push({type:"presence",value:c}),l.length>0&&this.internalHistory.pushUndo(l),!i.hasPresenceChange()&&a.length===0)return;this.localChanges.push(i),this.changeID=e.getNextID();const d=this.changeID.getActorID(),h=[];a.length>0&&h.push({type:"local-change",source:ne.UndoRedo,value:{message:i.getMessage()||"",operations:a,actor:d,clientSeq:i.getID().getClientSeq(),serverSeq:i.getID().getServerSeq()},rawChange:this.isEnableDevtools()?i.toStruct():void 0}),i.hasPresenceChange()&&h.push({type:"presence-changed",source:ne.UndoRedo,value:{clientID:d,presence:this.getPresence(d)}}),this.publish(h)}getUndoStackForTest(){return this.internalHistory.getUndoStackForTest()}getRedoStackForTest(){return this.internalHistory.getRedoStackForTest()}broadcast(t,e,i){const a={type:"local-broadcast",value:{topic:t,payload:e},options:i};this.publish([a])}getVersionVector(){return this.changeID.getVersionVector()}}function uD(n,t){let e=t;return{authInterceptor:l=>async c=>(n&&c.header.set("x-api-key",n),e&&c.header.set("authorization",e),await l(c)),setToken:l=>{e=l}}}const cD="@yorkie-js/sdk",fD="0.6.23",Zb={name:cD,version:fD};function dD(n){return t=>async e=>(n?e.header.set("x-yorkie-user-agent",n):e.header.set("x-yorkie-user-agent",Zb.name+"/"+Zb.version),await t(e))}const hD=n=>{try{if(JSON.stringify(n)===void 0)return!1}catch{return!1}return!0};var Kf=(n=>(n.Manual="manual",n.Realtime="realtime",n.RealtimePushOnly="realtime-pushonly",n.RealtimeSyncOff="realtime-syncoff",n))(Kf||{});const pu={rpcAddr:"https://api.yorkie.dev",syncLoopDuration:50,retrySyncLoopDelay:1e3,reconnectStreamDelay:1e3},Mm={maxRetries:1/0,initialRetryInterval:1e3,maxBackoff:2e4};class hx{constructor(t){p(this,"id");p(this,"key");p(this,"metadata");p(this,"status");p(this,"attachmentMap");p(this,"apiKey");p(this,"authTokenInjector");p(this,"conditions");p(this,"syncLoopDuration");p(this,"reconnectStreamDelay");p(this,"retrySyncLoopDelay");p(this,"rpcClient");p(this,"setAuthToken");p(this,"taskQueue");p(this,"processing",!1);p(this,"keepalive",!1);t=t||pu;const e=t.rpcAddr||pu.rpcAddr;this.key=t.key||ux(),this.metadata=t.metadata||{},this.status="deactivated",this.attachmentMap=new Map,this.apiKey=t.apiKey||"",this.authTokenInjector=t.authTokenInjector,this.conditions={SyncLoop:!1,WatchLoop:!1},this.syncLoopDuration=t.syncLoopDuration??pu.syncLoopDuration,this.reconnectStreamDelay=t.reconnectStreamDelay??pu.reconnectStreamDelay,this.retrySyncLoopDelay=t.retrySyncLoopDelay??pu.retrySyncLoopDelay;const{authInterceptor:i,setToken:a}=uD(this.apiKey);this.setAuthToken=a,this.rpcClient=f2(B2,M2({baseUrl:e,interceptors:[i,dD(t==null?void 0:t.userAgent)],fetch:(l,c)=>{const d={...c,keepalive:this.keepalive};return fetch(l,d)}})),this.taskQueue=[]}async activate(){if(this.isActive())return Promise.resolve();if(this.authTokenInjector){const t=await this.authTokenInjector();this.setAuthToken(t)}return this.enqueueTask(async()=>{try{const t=await this.rpcClient.activateClient({clientKey:this.key,metadata:this.metadata},{headers:{"x-shard-key":`${this.apiKey}/${this.key}`}});this.id=t.clientId,this.status="activated",this.runSyncLoop(),At.info(`[AC] c:"${this.getKey()}" activated, id:"${this.id}"`),typeof window<"u"&&window.addEventListener("beforeunload",async()=>{await this.deactivate({keepalive:!0})})}catch(t){throw At.error(`[AC] c:"${this.getKey()}" err :`,t),await this.handleConnectError(t),t}})}deactivate(t={keepalive:!1}){if(this.status==="deactivated")return Promise.resolve();const e=async()=>{try{await this.rpcClient.deactivateClient({clientId:this.id},{headers:{"x-shard-key":`${this.apiKey}/${this.key}`}}),this.deactivateInternal(),At.info(`[DC] c"${this.getKey()}" deactivated`)}catch(i){throw At.error(`[DC] c:"${this.getKey()}" err :`,i),await this.handleConnectError(i),i}};if(t.keepalive){this.keepalive=!0;const i=e();return this.keepalive=!1,i}return this.enqueueTask(e)}hasDocument(t){return this.attachmentMap.has(t)}attach(t,e={}){if(!this.isActive())throw new Y($.ErrClientNotActivated,`${this.key} is not active`);if(t.getStatus()!==Fs.Detached)throw new Y($.ErrDocumentNotDetached,`${t.getKey()} is not detached`);t.setActor(this.id),t.update((l,c)=>c.set(e.initialPresence||{}));const i=t.subscribe("local-broadcast",async l=>{var y;const{topic:c,payload:d}=l.value,h=(y=l.options)==null?void 0:y.error,g=l.options;try{await this.broadcast(t.getKey(),c,d,g)}catch(w){w instanceof Error&&(h==null||h(w))}}),a=e.syncMode??"realtime";return this.enqueueTask(async()=>{try{const l=await this.rpcClient.attachDocument({clientId:this.id,changePack:ge.toChangePack(t.createChangePack()),schemaKey:e.schema},{headers:{"x-shard-key":`${this.apiKey}/${t.getKey()}`}});(l.maxSizePerDocument??0)>0&&t.setMaxSizePerDocument(l.maxSizePerDocument),l.schemaRules.length>0&&t.setSchemaRules(ge.fromSchemaRules(l.schemaRules));const d=ge.fromChangePack(l.changePack);if(t.applyChangePack(d),t.getStatus()===Fs.Removed)return t;t.applyStatus(Fs.Attached),this.attachmentMap.set(t.getKey(),new $C(this.reconnectStreamDelay,t,l.documentId,a,i)),a!=="manual"&&await this.runWatchLoop(t.getKey()),At.info(`[AD] c:"${this.getKey()}" attaches d:"${t.getKey()}"`);const h=t.getRootObject();if(e.initialRoot){const g=e.initialRoot;t.update(y=>{for(const[w,v]of Object.entries(g))if(!h.has(w)){const b=w;y[b]=v}})}return t}catch(l){throw At.error(`[AD] c:"${this.getKey()}" err :`,l),await this.handleConnectError(l),l}})}detach(t,e={keepalive:!1}){if(!this.isActive())throw new Y($.ErrClientNotActivated,`${this.key} is not active`);const i=this.attachmentMap.get(t.getKey());if(!i)throw new Y($.ErrDocumentNotAttached,`${t.getKey()} is not attached`);t.update((l,c)=>c.clear());const a=async()=>{try{const l=await this.rpcClient.detachDocument({clientId:this.id,documentId:i.docID,changePack:ge.toChangePack(t.createChangePack()),removeIfNotAttached:e.removeIfNotAttached??!1},{headers:{"x-shard-key":`${this.apiKey}/${t.getKey()}`}}),c=ge.fromChangePack(l.changePack);return t.applyChangePack(c),t.getStatus()!==Fs.Removed&&t.applyStatus(Fs.Detached),this.detachInternal(t.getKey()),At.info(`[DD] c:"${this.getKey()}" detaches d:"${t.getKey()}"`),t}catch(l){throw At.error(`[DD] c:"${this.getKey()}" err :`,l),await this.handleConnectError(l),l}};if(e.keepalive){this.keepalive=!0;const l=a();return this.keepalive=!1,l}return this.enqueueTask(a)}async changeSyncMode(t,e){if(!this.isActive())throw new Y($.ErrClientNotActivated,`${this.key} is not active`);const i=this.attachmentMap.get(t.getKey());if(!i)throw new Y($.ErrDocumentNotAttached,`${t.getKey()} is not attached`);const a=i.syncMode;return a===e?t:(i.changeSyncMode(e),e==="manual"?(i.cancelWatchStream(),t):(e==="realtime"&&(i.remoteChangeEventReceived=!0),a==="manual"&&await this.runWatchLoop(t.getKey()),t))}sync(t){if(!this.isActive())throw new Y($.ErrClientNotActivated,`${this.key} is not active`);if(t){const e=this.attachmentMap.get(t.getKey());if(!e)throw new Y($.ErrDocumentNotAttached,`${t.getKey()} is not attached`);return this.enqueueTask(async()=>this.syncInternal(e,"realtime").catch(async i=>{throw At.error(`[SY] c:"${this.getKey()}" err :`,i),await this.handleConnectError(i),i}))}return this.enqueueTask(async()=>{const e=[];for(const[,i]of this.attachmentMap)e.push(this.syncInternal(i,i.syncMode));return Promise.all(e).catch(async i=>{throw At.error(`[SY] c:"${this.getKey()}" err :`,i),await this.handleConnectError(i),i})})}remove(t){if(!this.isActive())throw new Y($.ErrClientNotActivated,`${this.key} is not active`);const e=this.attachmentMap.get(t.getKey());if(!e)throw new Y($.ErrDocumentNotAttached,`${t.getKey()} is not attached`);t.setActor(this.id);const i=ge.toChangePack(t.createChangePack());return i.isRemoved=!0,this.enqueueTask(async()=>{try{const a=await this.rpcClient.removeDocument({clientId:this.id,documentId:e.docID,changePack:i},{headers:{"x-shard-key":`${this.apiKey}/${t.getKey()}`}}),l=ge.fromChangePack(a.changePack);t.applyChangePack(l),this.detachInternal(t.getKey()),At.info(`[RD] c:"${this.getKey()}" removes d:"${t.getKey()}"`)}catch(a){throw At.error(`[RD] c:"${this.getKey()}" err :`,a),await this.handleConnectError(a),a}})}getID(){return this.id}getKey(){return this.key}isActive(){return this.status==="activated"}getStatus(){return this.status}getCondition(t){return this.conditions[t]}broadcast(t,e,i,a){if(!this.isActive())throw new Y($.ErrClientNotActivated,`${this.key} is not active`);const l=this.attachmentMap.get(t);if(!l)throw new Y($.ErrDocumentNotAttached,`${t} is not attached`);if(!hD(i))throw new Y($.ErrInvalidArgument,"payload is not serializable");const c=(a==null?void 0:a.maxRetries)??Mm.maxRetries,d=Mm.maxBackoff;let h=0;const g=w=>Math.min(Mm.initialRetryInterval*2**w,d),y=async()=>this.enqueueTask(async()=>{try{await this.rpcClient.broadcast({clientId:this.id,documentId:l.docID,topic:e,payload:new TextEncoder().encode(JSON.stringify(i))},{headers:{"x-shard-key":`${this.apiKey}/${t}`}}),At.info(`[BC] c:"${this.getKey()}" broadcasts d:"${t}" t:"${e}"`)}catch(w){if(At.error(`[BC] c:"${this.getKey()}" err:`,w),await this.handleConnectError(w))if(w instanceof Kt&&Gs(w)===$.ErrUnauthenticated&&l.doc.publish([{type:ze.AuthError,value:{reason:bu(w).reason,method:"Broadcast"}}]),h<c)h++,setTimeout(()=>y(),g(h-1)),At.info(`[BC] c:"${this.getKey()}" retry attempt ${h}/${c}`);else throw At.error(`[BC] c:"${this.getKey()}" exceeded maximum retry attempts`),w;else throw w}});return y()}runSyncLoop(){const t=()=>{if(!this.isActive()){At.debug(`[SL] c:"${this.getKey()}" exit sync loop`),this.conditions.SyncLoop=!1;return}const e=[];for(const[,i]of this.attachmentMap)i.needRealtimeSync()&&(i.remoteChangeEventReceived=!1,e.push(this.syncInternal(i,i.syncMode).catch(async a=>{throw a instanceof Kt&&Gs(a)===$.ErrUnauthenticated&&i.doc.publish([{type:ze.AuthError,value:{reason:bu(a).reason,method:"PushPull"}}]),a})));Promise.all(e).then(()=>setTimeout(t,this.syncLoopDuration)).catch(async i=>{At.error(`[SL] c:"${this.getKey()}" sync failed:`,i),await this.handleConnectError(i)?setTimeout(t,this.retrySyncLoopDelay):this.conditions.SyncLoop=!1})};At.debug(`[SL] c:"${this.getKey()}" run sync loop`),this.conditions.SyncLoop=!0,t()}async runWatchLoop(t){const e=this.attachmentMap.get(t);if(!e)throw new Y($.ErrDocumentNotAttached,`${t} is not attached`);return this.conditions.WatchLoop=!0,e.runWatchLoop(i=>{if(!this.isActive())return this.conditions.WatchLoop=!1,Promise.reject(new Y($.ErrClientNotActivated,`${this.key} is not active`));const a=new AbortController,l=this.rpcClient.watchDocument({clientId:this.id,documentId:e.docID},{headers:{"x-shard-key":`${this.apiKey}/${t}`},signal:a.signal});return e.doc.publish([{type:ze.ConnectionChanged,value:Nd.Connected}]),At.info(`[WD] c:"${this.getKey()}" watches d:"${t}"`),new Promise((c,d)=>{(async()=>{try{for await(const g of l)this.handleWatchDocumentsResponse(e,g),g.body.case==="initialization"&&c([l,a])}catch(g){e.doc.resetOnlineClients(),e.doc.publish([{type:ze.Initialized,source:ne.Local,value:e.doc.getPresences()}]),e.doc.publish([{type:ze.ConnectionChanged,value:Nd.Disconnected}]),At.debug(`[WD] c:"${this.getKey()}" unwatches`),await this.handleConnectError(g)?(g instanceof Kt&&Gs(g)===$.ErrUnauthenticated&&e.doc.publish([{type:ze.AuthError,value:{reason:bu(g).reason,method:"WatchDocuments"}}]),i()):this.conditions.WatchLoop=!1,d(g)}})()})})}handleWatchDocumentsResponse(t,e){if(e.body.case==="event"&&e.body.value.type===Ma.DOCUMENT_CHANGED){t.remoteChangeEventReceived=!0;return}t.doc.applyWatchStream(e)}deactivateInternal(){this.status="deactivated";for(const[t,e]of this.attachmentMap)this.detachInternal(t),e.doc.applyStatus(Fs.Detached)}detachInternal(t){const e=this.attachmentMap.get(t);e&&(e.cancelWatchStream(),e.unsubscribeBroadcastEvent(),this.attachmentMap.delete(t))}async syncInternal(t,e){const{doc:i,docID:a}=t,l=i.createChangePack();try{const c=await this.rpcClient.pushPullChanges({clientId:this.id,documentId:a,changePack:ge.toChangePack(l),pushOnly:e==="realtime-pushonly"},{headers:{"x-shard-key":`${this.apiKey}/${i.getKey()}`}}),d=ge.fromChangePack(c.changePack);if(d.hasChanges()&&(t.syncMode==="realtime-pushonly"||t.syncMode==="realtime-syncoff"))return i;i.applyChangePack(d),t.doc.publish([{type:ze.SyncStatusChanged,value:xy.Synced}]),i.getStatus()===Fs.Removed&&this.detachInternal(i.getKey());const h=i.getKey(),g=d.getChangeSize();return At.info(`[PP] c:"${this.getKey()}" sync d:"${h}", push:${l.getChangeSize()} pull:${g} cp:${d.getCheckpoint().toTestString()}`),i}catch(c){throw i.publish([{type:ze.SyncStatusChanged,value:xy.SyncFailed}]),At.error(`[PP] c:"${this.getKey()}" err :`,c),c}}async handleConnectError(t){if(!(t instanceof Kt))return!1;if(t.code===qt.Canceled||t.code===qt.Unknown||t.code===qt.ResourceExhausted||t.code===qt.Unavailable)return!0;if(Gs(t)===$.ErrUnauthenticated){if(this.authTokenInjector){const e=await this.authTokenInjector(bu(t).reason);this.setAuthToken(e)}return!0}return Gs(t)===$.ErrTooManySubscribers?(At.error(`[WD] c:"${this.getKey()}" err :`,t.rawMessage),!0):(Gs(t)===$.ErrTooManyAttachments||(Gs(t)===$.ErrClientNotActivated||Gs(t)===$.ErrClientNotFound)&&this.deactivateInternal(),!1)}enqueueTask(t){return new Promise((e,i)=>{this.taskQueue.push(()=>t().then(e).catch(i)),this.processing||this.processNext()})}async processNext(){if(this.taskQueue.length===0){this.processing=!1;return}try{this.processing=!0,await this.taskQueue.shift()()}catch{At.error(`[TQ] c:"${this.getKey()}" process failed, id:"${this.id}"`)}this.processNext()}}Dr.Int,Dr.Long;typeof globalThis<"u"&&(globalThis.yorkie={Client:hx,Document:dx,Primitive:ce,Text:Qy,Counter:Wy,Tree:np,LogLevel:tn,setLogLevel:HC,IntType:Dr.Int,LongType:Dr.Long});const gD="@yorkie-js/react",mD="0.6.23",Qb={name:gD,version:mD};var et=Fu();const yD=i1(et),gx=et.createContext({client:void 0,loading:!0,error:void 0});function pD(n){const[t,e]=et.useState(void 0),[i,a]=et.useState(!0),[l,c]=et.useState(void 0),[d,h]=et.useState(!1);return et.useEffect(()=>{h(!0)},[]),et.useEffect(()=>{a(!0),c(void 0);async function g(){if(d)try{const y=new hx(n);await y.activate(),e(y)}catch(y){c(y instanceof Error?y:new Error("Failed to activate client"))}finally{a(!1)}}return g(),()=>{t!=null&&t.isActive()&&t.deactivate({keepalive:!0})}},[n.apiKey,n.rpcAddr,d]),{client:t,loading:i,error:l}}const vD=({children:n,...t})=>{const e=et.useMemo(()=>({userAgent:Qb.name+"/"+Qb.version,...t}),[t.apiKey,t.rpcAddr]),{client:i,loading:a,error:l}=pD(e);return W.jsx(gx.Provider,{value:{client:i,loading:a,error:l},children:n})},wD=()=>{const n=et.useContext(gx);if(!n)throw new Error("useYorkie must be used under YorkieProvider");return{client:n.client,loading:n.loading,error:n.error}};function bD(n){const t=new Set;let e=n;const i=()=>{t.forEach(h=>h(e))};return{subscribe:h=>(t.add(h),()=>t.delete(h)),getSnapshot:()=>e,setState:h=>{const g=e;e=typeof h=="function"?h(g):h,g!==e&&i()},destroy:()=>{t.clear()}}}const SD=n=>bD(n);function xD(n,t,e=Object.is){const i=et.useRef(t),a=et.useRef(e),l=et.useRef(void 0);i.current=t,a.current=e;const c=()=>{const d=n.getSnapshot(),h=i.current?i.current(d):d;return l.current!==void 0&&a.current(l.current,h)?l.current:(l.current=h,h)};return et.useSyncExternalStore(n.subscribe,c,c)}function TD(n,t,e,i,a,l,c){const d=et.useRef(a),h=et.useRef(l),[g,y]=et.useState(!1);et.useEffect(()=>{y(!0)},[]),et.useEffect(()=>{if(e){c.setState(x=>({...x,loading:!1,error:e}));return}if(!n||t||!g){c.setState(x=>({...x,loading:!0}));return}c.setState(x=>({...x,loading:!0,error:void 0}));const w=new dx(i),v=[];v.push(w.subscribe(()=>{c.setState(x=>({...x,root:w.getRoot()}))})),v.push(w.subscribe("presence",()=>{c.setState(x=>({...x,presences:w.getPresences()}))})),v.push(w.subscribe("connection",x=>{c.setState(A=>({...A,connection:x.value}))}));async function b(){try{await(n==null?void 0:n.attach(w,{initialRoot:d.current,initialPresence:h.current}));const x=A=>{try{w.update(A)}catch(C){c.setState(k=>({...k,error:C instanceof Error?C:new Error("Failed to update document")}))}};c.setState(A=>({...A,doc:w,root:w.getRoot(),presences:w.getPresences(),update:x}))}catch(x){c.setState(A=>({...A,error:x instanceof Error?x:new Error("Failed to attach document")}))}finally{c.setState(x=>({...x,loading:!1}))}}return b(),()=>{n&&n.hasDocument(i)&&n.detach(w);for(const x of v)x()}},[n,t,e,i,c,g])}const mx=et.createContext(void 0),AD=({docKey:n,initialRoot:t={},initialPresence:e={},children:i})=>{const{client:a,loading:l,error:c}=wD(),d=et.useRef(void 0);d.current||(d.current=SD({doc:void 0,root:t,presences:[],connection:Nd.Disconnected,update:()=>{},loading:!0,error:void 0}));const h=d.current;return TD(a,l,c,n,t,e,h),W.jsx(mx.Provider,{value:h,children:i})};function ED(){const n=et.useContext(mx);if(!n)throw new Error("useDocument must be used within a DocumentProvider");return xD(n)}function Ae(n){if(typeof n=="string"||typeof n=="number")return""+n;let t="";if(Array.isArray(n))for(let e=0,i;e<n.length;e++)(i=Ae(n[e]))!==""&&(t+=(t&&" ")+i);else for(let e in n)n[e]&&(t+=(t&&" ")+e);return t}var ND={value:()=>{}};function Xd(){for(var n=0,t=arguments.length,e={},i;n<t;++n){if(!(i=arguments[n]+"")||i in e||/[\s.]/.test(i))throw new Error("illegal type: "+i);e[i]=[]}return new Xf(e)}function Xf(n){this._=n}function CD(n,t){return n.trim().split(/^|\s+/).map(function(e){var i="",a=e.indexOf(".");if(a>=0&&(i=e.slice(a+1),e=e.slice(0,a)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:i}})}Xf.prototype=Xd.prototype={constructor:Xf,on:function(n,t){var e=this._,i=CD(n+"",e),a,l=-1,c=i.length;if(arguments.length<2){for(;++l<c;)if((a=(n=i[l]).type)&&(a=DD(e[a],n.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++l<c;)if(a=(n=i[l]).type)e[a]=Wb(e[a],n.name,t);else if(t==null)for(a in e)e[a]=Wb(e[a],n.name,null);return this},copy:function(){var n={},t=this._;for(var e in t)n[e]=t[e].slice();return new Xf(n)},call:function(n,t){if((a=arguments.length-2)>0)for(var e=new Array(a),i=0,a,l;i<a;++i)e[i]=arguments[i+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(l=this._[n],i=0,a=l.length;i<a;++i)l[i].value.apply(t,e)},apply:function(n,t,e){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var i=this._[n],a=0,l=i.length;a<l;++a)i[a].value.apply(t,e)}};function DD(n,t){for(var e=0,i=n.length,a;e<i;++e)if((a=n[e]).name===t)return a.value}function Wb(n,t,e){for(var i=0,a=n.length;i<a;++i)if(n[i].name===t){n[i]=ND,n=n.slice(0,i).concat(n.slice(i+1));break}return e!=null&&n.push({name:t,value:e}),n}var Ty="http://www.w3.org/1999/xhtml";const tS={svg:"http://www.w3.org/2000/svg",xhtml:Ty,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Fd(n){var t=n+="",e=t.indexOf(":");return e>=0&&(t=n.slice(0,e))!=="xmlns"&&(n=n.slice(e+1)),tS.hasOwnProperty(t)?{space:tS[t],local:n}:n}function kD(n){return function(){var t=this.ownerDocument,e=this.namespaceURI;return e===Ty&&t.documentElement.namespaceURI===Ty?t.createElement(n):t.createElementNS(e,n)}}function OD(n){return function(){return this.ownerDocument.createElementNS(n.space,n.local)}}function yx(n){var t=Fd(n);return(t.local?OD:kD)(t)}function ID(){}function rp(n){return n==null?ID:function(){return this.querySelector(n)}}function RD(n){typeof n!="function"&&(n=rp(n));for(var t=this._groups,e=t.length,i=new Array(e),a=0;a<e;++a)for(var l=t[a],c=l.length,d=i[a]=new Array(c),h,g,y=0;y<c;++y)(h=l[y])&&(g=n.call(h,h.__data__,y,l))&&("__data__"in h&&(g.__data__=h.__data__),d[y]=g);return new wn(i,this._parents)}function MD(n){return n==null?[]:Array.isArray(n)?n:Array.from(n)}function BD(){return[]}function px(n){return n==null?BD:function(){return this.querySelectorAll(n)}}function zD(n){return function(){return MD(n.apply(this,arguments))}}function LD(n){typeof n=="function"?n=zD(n):n=px(n);for(var t=this._groups,e=t.length,i=[],a=[],l=0;l<e;++l)for(var c=t[l],d=c.length,h,g=0;g<d;++g)(h=c[g])&&(i.push(n.call(h,h.__data__,g,c)),a.push(h));return new wn(i,a)}function vx(n){return function(){return this.matches(n)}}function wx(n){return function(t){return t.matches(n)}}var _D=Array.prototype.find;function UD(n){return function(){return _D.call(this.children,n)}}function qD(){return this.firstElementChild}function PD(n){return this.select(n==null?qD:UD(typeof n=="function"?n:wx(n)))}var JD=Array.prototype.filter;function HD(){return Array.from(this.children)}function $D(n){return function(){return JD.call(this.children,n)}}function VD(n){return this.selectAll(n==null?HD:$D(typeof n=="function"?n:wx(n)))}function jD(n){typeof n!="function"&&(n=vx(n));for(var t=this._groups,e=t.length,i=new Array(e),a=0;a<e;++a)for(var l=t[a],c=l.length,d=i[a]=[],h,g=0;g<c;++g)(h=l[g])&&n.call(h,h.__data__,g,l)&&d.push(h);return new wn(i,this._parents)}function bx(n){return new Array(n.length)}function YD(){return new wn(this._enter||this._groups.map(bx),this._parents)}function Cd(n,t){this.ownerDocument=n.ownerDocument,this.namespaceURI=n.namespaceURI,this._next=null,this._parent=n,this.__data__=t}Cd.prototype={constructor:Cd,appendChild:function(n){return this._parent.insertBefore(n,this._next)},insertBefore:function(n,t){return this._parent.insertBefore(n,t)},querySelector:function(n){return this._parent.querySelector(n)},querySelectorAll:function(n){return this._parent.querySelectorAll(n)}};function GD(n){return function(){return n}}function KD(n,t,e,i,a,l){for(var c=0,d,h=t.length,g=l.length;c<g;++c)(d=t[c])?(d.__data__=l[c],i[c]=d):e[c]=new Cd(n,l[c]);for(;c<h;++c)(d=t[c])&&(a[c]=d)}function XD(n,t,e,i,a,l,c){var d,h,g=new Map,y=t.length,w=l.length,v=new Array(y),b;for(d=0;d<y;++d)(h=t[d])&&(v[d]=b=c.call(h,h.__data__,d,t)+"",g.has(b)?a[d]=h:g.set(b,h));for(d=0;d<w;++d)b=c.call(n,l[d],d,l)+"",(h=g.get(b))?(i[d]=h,h.__data__=l[d],g.delete(b)):e[d]=new Cd(n,l[d]);for(d=0;d<y;++d)(h=t[d])&&g.get(v[d])===h&&(a[d]=h)}function FD(n){return n.__data__}function ZD(n,t){if(!arguments.length)return Array.from(this,FD);var e=t?XD:KD,i=this._parents,a=this._groups;typeof n!="function"&&(n=GD(n));for(var l=a.length,c=new Array(l),d=new Array(l),h=new Array(l),g=0;g<l;++g){var y=i[g],w=a[g],v=w.length,b=QD(n.call(y,y&&y.__data__,g,i)),x=b.length,A=d[g]=new Array(x),C=c[g]=new Array(x),k=h[g]=new Array(v);e(y,w,A,C,k,b,t);for(var L=0,N=0,I,B;L<x;++L)if(I=A[L]){for(L>=N&&(N=L+1);!(B=C[N])&&++N<x;);I._next=B||null}}return c=new wn(c,i),c._enter=d,c._exit=h,c}function QD(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function WD(){return new wn(this._exit||this._groups.map(bx),this._parents)}function t3(n,t,e){var i=this.enter(),a=this,l=this.exit();return typeof n=="function"?(i=n(i),i&&(i=i.selection())):i=i.append(n+""),t!=null&&(a=t(a),a&&(a=a.selection())),e==null?l.remove():e(l),i&&a?i.merge(a).order():a}function e3(n){for(var t=n.selection?n.selection():n,e=this._groups,i=t._groups,a=e.length,l=i.length,c=Math.min(a,l),d=new Array(a),h=0;h<c;++h)for(var g=e[h],y=i[h],w=g.length,v=d[h]=new Array(w),b,x=0;x<w;++x)(b=g[x]||y[x])&&(v[x]=b);for(;h<a;++h)d[h]=e[h];return new wn(d,this._parents)}function n3(){for(var n=this._groups,t=-1,e=n.length;++t<e;)for(var i=n[t],a=i.length-1,l=i[a],c;--a>=0;)(c=i[a])&&(l&&c.compareDocumentPosition(l)^4&&l.parentNode.insertBefore(c,l),l=c);return this}function r3(n){n||(n=i3);function t(w,v){return w&&v?n(w.__data__,v.__data__):!w-!v}for(var e=this._groups,i=e.length,a=new Array(i),l=0;l<i;++l){for(var c=e[l],d=c.length,h=a[l]=new Array(d),g,y=0;y<d;++y)(g=c[y])&&(h[y]=g);h.sort(t)}return new wn(a,this._parents).order()}function i3(n,t){return n<t?-1:n>t?1:n>=t?0:NaN}function s3(){var n=arguments[0];return arguments[0]=this,n.apply(null,arguments),this}function a3(){return Array.from(this)}function o3(){for(var n=this._groups,t=0,e=n.length;t<e;++t)for(var i=n[t],a=0,l=i.length;a<l;++a){var c=i[a];if(c)return c}return null}function l3(){let n=0;for(const t of this)++n;return n}function u3(){return!this.node()}function c3(n){for(var t=this._groups,e=0,i=t.length;e<i;++e)for(var a=t[e],l=0,c=a.length,d;l<c;++l)(d=a[l])&&n.call(d,d.__data__,l,a);return this}function f3(n){return function(){this.removeAttribute(n)}}function d3(n){return function(){this.removeAttributeNS(n.space,n.local)}}function h3(n,t){return function(){this.setAttribute(n,t)}}function g3(n,t){return function(){this.setAttributeNS(n.space,n.local,t)}}function m3(n,t){return function(){var e=t.apply(this,arguments);e==null?this.removeAttribute(n):this.setAttribute(n,e)}}function y3(n,t){return function(){var e=t.apply(this,arguments);e==null?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,e)}}function p3(n,t){var e=Fd(n);if(arguments.length<2){var i=this.node();return e.local?i.getAttributeNS(e.space,e.local):i.getAttribute(e)}return this.each((t==null?e.local?d3:f3:typeof t=="function"?e.local?y3:m3:e.local?g3:h3)(e,t))}function Sx(n){return n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView}function v3(n){return function(){this.style.removeProperty(n)}}function w3(n,t,e){return function(){this.style.setProperty(n,t,e)}}function b3(n,t,e){return function(){var i=t.apply(this,arguments);i==null?this.style.removeProperty(n):this.style.setProperty(n,i,e)}}function S3(n,t,e){return arguments.length>1?this.each((t==null?v3:typeof t=="function"?b3:w3)(n,t,e??"")):tl(this.node(),n)}function tl(n,t){return n.style.getPropertyValue(t)||Sx(n).getComputedStyle(n,null).getPropertyValue(t)}function x3(n){return function(){delete this[n]}}function T3(n,t){return function(){this[n]=t}}function A3(n,t){return function(){var e=t.apply(this,arguments);e==null?delete this[n]:this[n]=e}}function E3(n,t){return arguments.length>1?this.each((t==null?x3:typeof t=="function"?A3:T3)(n,t)):this.node()[n]}function xx(n){return n.trim().split(/^|\s+/)}function ip(n){return n.classList||new Tx(n)}function Tx(n){this._node=n,this._names=xx(n.getAttribute("class")||"")}Tx.prototype={add:function(n){var t=this._names.indexOf(n);t<0&&(this._names.push(n),this._node.setAttribute("class",this._names.join(" ")))},remove:function(n){var t=this._names.indexOf(n);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(n){return this._names.indexOf(n)>=0}};function Ax(n,t){for(var e=ip(n),i=-1,a=t.length;++i<a;)e.add(t[i])}function Ex(n,t){for(var e=ip(n),i=-1,a=t.length;++i<a;)e.remove(t[i])}function N3(n){return function(){Ax(this,n)}}function C3(n){return function(){Ex(this,n)}}function D3(n,t){return function(){(t.apply(this,arguments)?Ax:Ex)(this,n)}}function k3(n,t){var e=xx(n+"");if(arguments.length<2){for(var i=ip(this.node()),a=-1,l=e.length;++a<l;)if(!i.contains(e[a]))return!1;return!0}return this.each((typeof t=="function"?D3:t?N3:C3)(e,t))}function O3(){this.textContent=""}function I3(n){return function(){this.textContent=n}}function R3(n){return function(){var t=n.apply(this,arguments);this.textContent=t??""}}function M3(n){return arguments.length?this.each(n==null?O3:(typeof n=="function"?R3:I3)(n)):this.node().textContent}function B3(){this.innerHTML=""}function z3(n){return function(){this.innerHTML=n}}function L3(n){return function(){var t=n.apply(this,arguments);this.innerHTML=t??""}}function _3(n){return arguments.length?this.each(n==null?B3:(typeof n=="function"?L3:z3)(n)):this.node().innerHTML}function U3(){this.nextSibling&&this.parentNode.appendChild(this)}function q3(){return this.each(U3)}function P3(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function J3(){return this.each(P3)}function H3(n){var t=typeof n=="function"?n:yx(n);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function $3(){return null}function V3(n,t){var e=typeof n=="function"?n:yx(n),i=t==null?$3:typeof t=="function"?t:rp(t);return this.select(function(){return this.insertBefore(e.apply(this,arguments),i.apply(this,arguments)||null)})}function j3(){var n=this.parentNode;n&&n.removeChild(this)}function Y3(){return this.each(j3)}function G3(){var n=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(n,this.nextSibling):n}function K3(){var n=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(n,this.nextSibling):n}function X3(n){return this.select(n?K3:G3)}function F3(n){return arguments.length?this.property("__data__",n):this.node().__data__}function Z3(n){return function(t){n.call(this,t,this.__data__)}}function Q3(n){return n.trim().split(/^|\s+/).map(function(t){var e="",i=t.indexOf(".");return i>=0&&(e=t.slice(i+1),t=t.slice(0,i)),{type:t,name:e}})}function W3(n){return function(){var t=this.__on;if(t){for(var e=0,i=-1,a=t.length,l;e<a;++e)l=t[e],(!n.type||l.type===n.type)&&l.name===n.name?this.removeEventListener(l.type,l.listener,l.options):t[++i]=l;++i?t.length=i:delete this.__on}}}function tk(n,t,e){return function(){var i=this.__on,a,l=Z3(t);if(i){for(var c=0,d=i.length;c<d;++c)if((a=i[c]).type===n.type&&a.name===n.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=l,a.options=e),a.value=t;return}}this.addEventListener(n.type,l,e),a={type:n.type,name:n.name,value:t,listener:l,options:e},i?i.push(a):this.__on=[a]}}function ek(n,t,e){var i=Q3(n+""),a,l=i.length,c;if(arguments.length<2){var d=this.node().__on;if(d){for(var h=0,g=d.length,y;h<g;++h)for(a=0,y=d[h];a<l;++a)if((c=i[a]).type===y.type&&c.name===y.name)return y.value}return}for(d=t?tk:W3,a=0;a<l;++a)this.each(d(i[a],t,e));return this}function Nx(n,t,e){var i=Sx(n),a=i.CustomEvent;typeof a=="function"?a=new a(t,e):(a=i.document.createEvent("Event"),e?(a.initEvent(t,e.bubbles,e.cancelable),a.detail=e.detail):a.initEvent(t,!1,!1)),n.dispatchEvent(a)}function nk(n,t){return function(){return Nx(this,n,t)}}function rk(n,t){return function(){return Nx(this,n,t.apply(this,arguments))}}function ik(n,t){return this.each((typeof t=="function"?rk:nk)(n,t))}function*sk(){for(var n=this._groups,t=0,e=n.length;t<e;++t)for(var i=n[t],a=0,l=i.length,c;a<l;++a)(c=i[a])&&(yield c)}var Cx=[null];function wn(n,t){this._groups=n,this._parents=t}function nc(){return new wn([[document.documentElement]],Cx)}function ak(){return this}wn.prototype=nc.prototype={constructor:wn,select:RD,selectAll:LD,selectChild:PD,selectChildren:VD,filter:jD,data:ZD,enter:YD,exit:WD,join:t3,merge:e3,selection:ak,order:n3,sort:r3,call:s3,nodes:a3,node:o3,size:l3,empty:u3,each:c3,attr:p3,style:S3,property:E3,classed:k3,text:M3,html:_3,raise:q3,lower:J3,append:H3,insert:V3,remove:Y3,clone:X3,datum:F3,on:ek,dispatch:ik,[Symbol.iterator]:sk};function gn(n){return typeof n=="string"?new wn([[document.querySelector(n)]],[document.documentElement]):new wn([[n]],Cx)}function ok(n){let t;for(;t=n.sourceEvent;)n=t;return n}function Zn(n,t){if(n=ok(n),t===void 0&&(t=n.currentTarget),t){var e=t.ownerSVGElement||t;if(e.createSVGPoint){var i=e.createSVGPoint();return i.x=n.clientX,i.y=n.clientY,i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}if(t.getBoundingClientRect){var a=t.getBoundingClientRect();return[n.clientX-a.left-t.clientLeft,n.clientY-a.top-t.clientTop]}}return[n.pageX,n.pageY]}const lk={passive:!1},Ju={capture:!0,passive:!1};function Bm(n){n.stopImmediatePropagation()}function Ho(n){n.preventDefault(),n.stopImmediatePropagation()}function Dx(n){var t=n.document.documentElement,e=gn(n).on("dragstart.drag",Ho,Ju);"onselectstart"in t?e.on("selectstart.drag",Ho,Ju):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function kx(n,t){var e=n.document.documentElement,i=gn(n).on("dragstart.drag",null);t&&(i.on("click.drag",Ho,Ju),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in e?i.on("selectstart.drag",null):(e.style.MozUserSelect=e.__noselect,delete e.__noselect)}const Mf=n=>()=>n;function Ay(n,{sourceEvent:t,subject:e,target:i,identifier:a,active:l,x:c,y:d,dx:h,dy:g,dispatch:y}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:e,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:a,enumerable:!0,configurable:!0},active:{value:l,enumerable:!0,configurable:!0},x:{value:c,enumerable:!0,configurable:!0},y:{value:d,enumerable:!0,configurable:!0},dx:{value:h,enumerable:!0,configurable:!0},dy:{value:g,enumerable:!0,configurable:!0},_:{value:y}})}Ay.prototype.on=function(){var n=this._.on.apply(this._,arguments);return n===this._?this:n};function uk(n){return!n.ctrlKey&&!n.button}function ck(){return this.parentNode}function fk(n,t){return t??{x:n.x,y:n.y}}function dk(){return navigator.maxTouchPoints||"ontouchstart"in this}function Ox(){var n=uk,t=ck,e=fk,i=dk,a={},l=Xd("start","drag","end"),c=0,d,h,g,y,w=0;function v(I){I.on("mousedown.drag",b).filter(i).on("touchstart.drag",C).on("touchmove.drag",k,lk).on("touchend.drag touchcancel.drag",L).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function b(I,B){if(!(y||!n.call(this,I,B))){var _=N(this,t.call(this,I,B),I,B,"mouse");_&&(gn(I.view).on("mousemove.drag",x,Ju).on("mouseup.drag",A,Ju),Dx(I.view),Bm(I),g=!1,d=I.clientX,h=I.clientY,_("start",I))}}function x(I){if(Ho(I),!g){var B=I.clientX-d,_=I.clientY-h;g=B*B+_*_>w}a.mouse("drag",I)}function A(I){gn(I.view).on("mousemove.drag mouseup.drag",null),kx(I.view,g),Ho(I),a.mouse("end",I)}function C(I,B){if(n.call(this,I,B)){var _=I.changedTouches,P=t.call(this,I,B),V=_.length,tt,ft;for(tt=0;tt<V;++tt)(ft=N(this,P,I,B,_[tt].identifier,_[tt]))&&(Bm(I),ft("start",I,_[tt]))}}function k(I){var B=I.changedTouches,_=B.length,P,V;for(P=0;P<_;++P)(V=a[B[P].identifier])&&(Ho(I),V("drag",I,B[P]))}function L(I){var B=I.changedTouches,_=B.length,P,V;for(y&&clearTimeout(y),y=setTimeout(function(){y=null},500),P=0;P<_;++P)(V=a[B[P].identifier])&&(Bm(I),V("end",I,B[P]))}function N(I,B,_,P,V,tt){var ft=l.copy(),nt=Zn(tt||_,B),it,ut,R;if((R=e.call(I,new Ay("beforestart",{sourceEvent:_,target:v,identifier:V,active:c,x:nt[0],y:nt[1],dx:0,dy:0,dispatch:ft}),P))!=null)return it=R.x-nt[0]||0,ut=R.y-nt[1]||0,function j(O,z,G){var J=nt,D;switch(O){case"start":a[V]=j,D=c++;break;case"end":delete a[V],--c;case"drag":nt=Zn(G||z,B),D=c;break}ft.call(O,I,new Ay(O,{sourceEvent:z,subject:R,target:v,identifier:V,active:D,x:nt[0]+it,y:nt[1]+ut,dx:nt[0]-J[0],dy:nt[1]-J[1],dispatch:ft}),P)}}return v.filter=function(I){return arguments.length?(n=typeof I=="function"?I:Mf(!!I),v):n},v.container=function(I){return arguments.length?(t=typeof I=="function"?I:Mf(I),v):t},v.subject=function(I){return arguments.length?(e=typeof I=="function"?I:Mf(I),v):e},v.touchable=function(I){return arguments.length?(i=typeof I=="function"?I:Mf(!!I),v):i},v.on=function(){var I=l.on.apply(l,arguments);return I===l?v:I},v.clickDistance=function(I){return arguments.length?(w=(I=+I)*I,v):Math.sqrt(w)},v}function sp(n,t,e){n.prototype=t.prototype=e,e.constructor=n}function Ix(n,t){var e=Object.create(n.prototype);for(var i in t)e[i]=t[i];return e}function rc(){}var Hu=.7,Dd=1/Hu,$o="\\s*([+-]?\\d+)\\s*",$u="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Nr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",hk=/^#([0-9a-f]{3,8})$/,gk=new RegExp(`^rgb\\(${$o},${$o},${$o}\\)$`),mk=new RegExp(`^rgb\\(${Nr},${Nr},${Nr}\\)$`),yk=new RegExp(`^rgba\\(${$o},${$o},${$o},${$u}\\)$`),pk=new RegExp(`^rgba\\(${Nr},${Nr},${Nr},${$u}\\)$`),vk=new RegExp(`^hsl\\(${$u},${Nr},${Nr}\\)$`),wk=new RegExp(`^hsla\\(${$u},${Nr},${Nr},${$u}\\)$`),eS={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};sp(rc,Pa,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:nS,formatHex:nS,formatHex8:bk,formatHsl:Sk,formatRgb:rS,toString:rS});function nS(){return this.rgb().formatHex()}function bk(){return this.rgb().formatHex8()}function Sk(){return Rx(this).formatHsl()}function rS(){return this.rgb().formatRgb()}function Pa(n){var t,e;return n=(n+"").trim().toLowerCase(),(t=hk.exec(n))?(e=t[1].length,t=parseInt(t[1],16),e===6?iS(t):e===3?new rn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):e===8?Bf(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):e===4?Bf(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=gk.exec(n))?new rn(t[1],t[2],t[3],1):(t=mk.exec(n))?new rn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=yk.exec(n))?Bf(t[1],t[2],t[3],t[4]):(t=pk.exec(n))?Bf(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=vk.exec(n))?oS(t[1],t[2]/100,t[3]/100,1):(t=wk.exec(n))?oS(t[1],t[2]/100,t[3]/100,t[4]):eS.hasOwnProperty(n)?iS(eS[n]):n==="transparent"?new rn(NaN,NaN,NaN,0):null}function iS(n){return new rn(n>>16&255,n>>8&255,n&255,1)}function Bf(n,t,e,i){return i<=0&&(n=t=e=NaN),new rn(n,t,e,i)}function xk(n){return n instanceof rc||(n=Pa(n)),n?(n=n.rgb(),new rn(n.r,n.g,n.b,n.opacity)):new rn}function Ey(n,t,e,i){return arguments.length===1?xk(n):new rn(n,t,e,i??1)}function rn(n,t,e,i){this.r=+n,this.g=+t,this.b=+e,this.opacity=+i}sp(rn,Ey,Ix(rc,{brighter(n){return n=n==null?Dd:Math.pow(Dd,n),new rn(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?Hu:Math.pow(Hu,n),new rn(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new rn(Ba(this.r),Ba(this.g),Ba(this.b),kd(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:sS,formatHex:sS,formatHex8:Tk,formatRgb:aS,toString:aS}));function sS(){return`#${Ra(this.r)}${Ra(this.g)}${Ra(this.b)}`}function Tk(){return`#${Ra(this.r)}${Ra(this.g)}${Ra(this.b)}${Ra((isNaN(this.opacity)?1:this.opacity)*255)}`}function aS(){const n=kd(this.opacity);return`${n===1?"rgb(":"rgba("}${Ba(this.r)}, ${Ba(this.g)}, ${Ba(this.b)}${n===1?")":`, ${n})`}`}function kd(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function Ba(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function Ra(n){return n=Ba(n),(n<16?"0":"")+n.toString(16)}function oS(n,t,e,i){return i<=0?n=t=e=NaN:e<=0||e>=1?n=t=NaN:t<=0&&(n=NaN),new Qn(n,t,e,i)}function Rx(n){if(n instanceof Qn)return new Qn(n.h,n.s,n.l,n.opacity);if(n instanceof rc||(n=Pa(n)),!n)return new Qn;if(n instanceof Qn)return n;n=n.rgb();var t=n.r/255,e=n.g/255,i=n.b/255,a=Math.min(t,e,i),l=Math.max(t,e,i),c=NaN,d=l-a,h=(l+a)/2;return d?(t===l?c=(e-i)/d+(e<i)*6:e===l?c=(i-t)/d+2:c=(t-e)/d+4,d/=h<.5?l+a:2-l-a,c*=60):d=h>0&&h<1?0:c,new Qn(c,d,h,n.opacity)}function Ak(n,t,e,i){return arguments.length===1?Rx(n):new Qn(n,t,e,i??1)}function Qn(n,t,e,i){this.h=+n,this.s=+t,this.l=+e,this.opacity=+i}sp(Qn,Ak,Ix(rc,{brighter(n){return n=n==null?Dd:Math.pow(Dd,n),new Qn(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?Hu:Math.pow(Hu,n),new Qn(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,t=isNaN(n)||isNaN(this.s)?0:this.s,e=this.l,i=e+(e<.5?e:1-e)*t,a=2*e-i;return new rn(zm(n>=240?n-240:n+120,a,i),zm(n,a,i),zm(n<120?n+240:n-120,a,i),this.opacity)},clamp(){return new Qn(lS(this.h),zf(this.s),zf(this.l),kd(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=kd(this.opacity);return`${n===1?"hsl(":"hsla("}${lS(this.h)}, ${zf(this.s)*100}%, ${zf(this.l)*100}%${n===1?")":`, ${n})`}`}}));function lS(n){return n=(n||0)%360,n<0?n+360:n}function zf(n){return Math.max(0,Math.min(1,n||0))}function zm(n,t,e){return(n<60?t+(e-t)*n/60:n<180?e:n<240?t+(e-t)*(240-n)/60:t)*255}const ap=n=>()=>n;function Ek(n,t){return function(e){return n+e*t}}function Nk(n,t,e){return n=Math.pow(n,e),t=Math.pow(t,e)-n,e=1/e,function(i){return Math.pow(n+i*t,e)}}function Ck(n){return(n=+n)==1?Mx:function(t,e){return e-t?Nk(t,e,n):ap(isNaN(t)?e:t)}}function Mx(n,t){var e=t-n;return e?Ek(n,e):ap(isNaN(n)?t:n)}const Od=function n(t){var e=Ck(t);function i(a,l){var c=e((a=Ey(a)).r,(l=Ey(l)).r),d=e(a.g,l.g),h=e(a.b,l.b),g=Mx(a.opacity,l.opacity);return function(y){return a.r=c(y),a.g=d(y),a.b=h(y),a.opacity=g(y),a+""}}return i.gamma=n,i}(1);function Dk(n,t){t||(t=[]);var e=n?Math.min(t.length,n.length):0,i=t.slice(),a;return function(l){for(a=0;a<e;++a)i[a]=n[a]*(1-l)+t[a]*l;return i}}function kk(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function Ok(n,t){var e=t?t.length:0,i=n?Math.min(e,n.length):0,a=new Array(i),l=new Array(e),c;for(c=0;c<i;++c)a[c]=ku(n[c],t[c]);for(;c<e;++c)l[c]=t[c];return function(d){for(c=0;c<i;++c)l[c]=a[c](d);return l}}function Ik(n,t){var e=new Date;return n=+n,t=+t,function(i){return e.setTime(n*(1-i)+t*i),e}}function dr(n,t){return n=+n,t=+t,function(e){return n*(1-e)+t*e}}function Rk(n,t){var e={},i={},a;(n===null||typeof n!="object")&&(n={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in n?e[a]=ku(n[a],t[a]):i[a]=t[a];return function(l){for(a in e)i[a]=e[a](l);return i}}var Ny=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Lm=new RegExp(Ny.source,"g");function Mk(n){return function(){return n}}function Bk(n){return function(t){return n(t)+""}}function Bx(n,t){var e=Ny.lastIndex=Lm.lastIndex=0,i,a,l,c=-1,d=[],h=[];for(n=n+"",t=t+"";(i=Ny.exec(n))&&(a=Lm.exec(t));)(l=a.index)>e&&(l=t.slice(e,l),d[c]?d[c]+=l:d[++c]=l),(i=i[0])===(a=a[0])?d[c]?d[c]+=a:d[++c]=a:(d[++c]=null,h.push({i:c,x:dr(i,a)})),e=Lm.lastIndex;return e<t.length&&(l=t.slice(e),d[c]?d[c]+=l:d[++c]=l),d.length<2?h[0]?Bk(h[0].x):Mk(t):(t=h.length,function(g){for(var y=0,w;y<t;++y)d[(w=h[y]).i]=w.x(g);return d.join("")})}function ku(n,t){var e=typeof t,i;return t==null||e==="boolean"?ap(t):(e==="number"?dr:e==="string"?(i=Pa(t))?(t=i,Od):Bx:t instanceof Pa?Od:t instanceof Date?Ik:kk(t)?Dk:Array.isArray(t)?Ok:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Rk:dr)(n,t)}var uS=180/Math.PI,Cy={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function zx(n,t,e,i,a,l){var c,d,h;return(c=Math.sqrt(n*n+t*t))&&(n/=c,t/=c),(h=n*e+t*i)&&(e-=n*h,i-=t*h),(d=Math.sqrt(e*e+i*i))&&(e/=d,i/=d,h/=d),n*i<t*e&&(n=-n,t=-t,h=-h,c=-c),{translateX:a,translateY:l,rotate:Math.atan2(t,n)*uS,skewX:Math.atan(h)*uS,scaleX:c,scaleY:d}}var Lf;function zk(n){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(n+"");return t.isIdentity?Cy:zx(t.a,t.b,t.c,t.d,t.e,t.f)}function Lk(n){return n==null||(Lf||(Lf=document.createElementNS("http://www.w3.org/2000/svg","g")),Lf.setAttribute("transform",n),!(n=Lf.transform.baseVal.consolidate()))?Cy:(n=n.matrix,zx(n.a,n.b,n.c,n.d,n.e,n.f))}function Lx(n,t,e,i){function a(g){return g.length?g.pop()+" ":""}function l(g,y,w,v,b,x){if(g!==w||y!==v){var A=b.push("translate(",null,t,null,e);x.push({i:A-4,x:dr(g,w)},{i:A-2,x:dr(y,v)})}else(w||v)&&b.push("translate("+w+t+v+e)}function c(g,y,w,v){g!==y?(g-y>180?y+=360:y-g>180&&(g+=360),v.push({i:w.push(a(w)+"rotate(",null,i)-2,x:dr(g,y)})):y&&w.push(a(w)+"rotate("+y+i)}function d(g,y,w,v){g!==y?v.push({i:w.push(a(w)+"skewX(",null,i)-2,x:dr(g,y)}):y&&w.push(a(w)+"skewX("+y+i)}function h(g,y,w,v,b,x){if(g!==w||y!==v){var A=b.push(a(b)+"scale(",null,",",null,")");x.push({i:A-4,x:dr(g,w)},{i:A-2,x:dr(y,v)})}else(w!==1||v!==1)&&b.push(a(b)+"scale("+w+","+v+")")}return function(g,y){var w=[],v=[];return g=n(g),y=n(y),l(g.translateX,g.translateY,y.translateX,y.translateY,w,v),c(g.rotate,y.rotate,w,v),d(g.skewX,y.skewX,w,v),h(g.scaleX,g.scaleY,y.scaleX,y.scaleY,w,v),g=y=null,function(b){for(var x=-1,A=v.length,C;++x<A;)w[(C=v[x]).i]=C.x(b);return w.join("")}}}var _k=Lx(zk,"px, ","px)","deg)"),Uk=Lx(Lk,", ",")",")"),qk=1e-12;function cS(n){return((n=Math.exp(n))+1/n)/2}function Pk(n){return((n=Math.exp(n))-1/n)/2}function Jk(n){return((n=Math.exp(2*n))-1)/(n+1)}const Ff=function n(t,e,i){function a(l,c){var d=l[0],h=l[1],g=l[2],y=c[0],w=c[1],v=c[2],b=y-d,x=w-h,A=b*b+x*x,C,k;if(A<qk)k=Math.log(v/g)/t,C=function(P){return[d+P*b,h+P*x,g*Math.exp(t*P*k)]};else{var L=Math.sqrt(A),N=(v*v-g*g+i*A)/(2*g*e*L),I=(v*v-g*g-i*A)/(2*v*e*L),B=Math.log(Math.sqrt(N*N+1)-N),_=Math.log(Math.sqrt(I*I+1)-I);k=(_-B)/t,C=function(P){var V=P*k,tt=cS(B),ft=g/(e*L)*(tt*Jk(t*V+B)-Pk(B));return[d+ft*b,h+ft*x,g*tt/cS(t*V+B)]}}return C.duration=k*1e3*t/Math.SQRT2,C}return a.rho=function(l){var c=Math.max(.001,+l),d=c*c,h=d*d;return n(c,d,h)},a}(Math.SQRT2,2,4);var el=0,Su=0,vu=0,_x=1e3,Id,xu,Rd=0,Ja=0,Zd=0,Vu=typeof performance=="object"&&performance.now?performance:Date,Ux=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function op(){return Ja||(Ux(Hk),Ja=Vu.now()+Zd)}function Hk(){Ja=0}function Md(){this._call=this._time=this._next=null}Md.prototype=qx.prototype={constructor:Md,restart:function(n,t,e){if(typeof n!="function")throw new TypeError("callback is not a function");e=(e==null?op():+e)+(t==null?0:+t),!this._next&&xu!==this&&(xu?xu._next=this:Id=this,xu=this),this._call=n,this._time=e,Dy()},stop:function(){this._call&&(this._call=null,this._time=1/0,Dy())}};function qx(n,t,e){var i=new Md;return i.restart(n,t,e),i}function $k(){op(),++el;for(var n=Id,t;n;)(t=Ja-n._time)>=0&&n._call.call(void 0,t),n=n._next;--el}function fS(){Ja=(Rd=Vu.now())+Zd,el=Su=0;try{$k()}finally{el=0,jk(),Ja=0}}function Vk(){var n=Vu.now(),t=n-Rd;t>_x&&(Zd-=t,Rd=n)}function jk(){for(var n,t=Id,e,i=1/0;t;)t._call?(i>t._time&&(i=t._time),n=t,t=t._next):(e=t._next,t._next=null,t=n?n._next=e:Id=e);xu=n,Dy(i)}function Dy(n){if(!el){Su&&(Su=clearTimeout(Su));var t=n-Ja;t>24?(n<1/0&&(Su=setTimeout(fS,n-Vu.now()-Zd)),vu&&(vu=clearInterval(vu))):(vu||(Rd=Vu.now(),vu=setInterval(Vk,_x)),el=1,Ux(fS))}}function dS(n,t,e){var i=new Md;return t=t==null?0:+t,i.restart(a=>{i.stop(),n(a+t)},t,e),i}var Yk=Xd("start","end","cancel","interrupt"),Gk=[],Px=0,hS=1,ky=2,Zf=3,gS=4,Oy=5,Qf=6;function Qd(n,t,e,i,a,l){var c=n.__transition;if(!c)n.__transition={};else if(e in c)return;Kk(n,e,{name:t,index:i,group:a,on:Yk,tween:Gk,time:l.time,delay:l.delay,duration:l.duration,ease:l.ease,timer:null,state:Px})}function lp(n,t){var e=rr(n,t);if(e.state>Px)throw new Error("too late; already scheduled");return e}function Or(n,t){var e=rr(n,t);if(e.state>Zf)throw new Error("too late; already running");return e}function rr(n,t){var e=n.__transition;if(!e||!(e=e[t]))throw new Error("transition not found");return e}function Kk(n,t,e){var i=n.__transition,a;i[t]=e,e.timer=qx(l,0,e.time);function l(g){e.state=hS,e.timer.restart(c,e.delay,e.time),e.delay<=g&&c(g-e.delay)}function c(g){var y,w,v,b;if(e.state!==hS)return h();for(y in i)if(b=i[y],b.name===e.name){if(b.state===Zf)return dS(c);b.state===gS?(b.state=Qf,b.timer.stop(),b.on.call("interrupt",n,n.__data__,b.index,b.group),delete i[y]):+y<t&&(b.state=Qf,b.timer.stop(),b.on.call("cancel",n,n.__data__,b.index,b.group),delete i[y])}if(dS(function(){e.state===Zf&&(e.state=gS,e.timer.restart(d,e.delay,e.time),d(g))}),e.state=ky,e.on.call("start",n,n.__data__,e.index,e.group),e.state===ky){for(e.state=Zf,a=new Array(v=e.tween.length),y=0,w=-1;y<v;++y)(b=e.tween[y].value.call(n,n.__data__,e.index,e.group))&&(a[++w]=b);a.length=w+1}}function d(g){for(var y=g<e.duration?e.ease.call(null,g/e.duration):(e.timer.restart(h),e.state=Oy,1),w=-1,v=a.length;++w<v;)a[w].call(n,y);e.state===Oy&&(e.on.call("end",n,n.__data__,e.index,e.group),h())}function h(){e.state=Qf,e.timer.stop(),delete i[t];for(var g in i)return;delete n.__transition}}function Wf(n,t){var e=n.__transition,i,a,l=!0,c;if(e){t=t==null?null:t+"";for(c in e){if((i=e[c]).name!==t){l=!1;continue}a=i.state>ky&&i.state<Oy,i.state=Qf,i.timer.stop(),i.on.call(a?"interrupt":"cancel",n,n.__data__,i.index,i.group),delete e[c]}l&&delete n.__transition}}function Xk(n){return this.each(function(){Wf(this,n)})}function Fk(n,t){var e,i;return function(){var a=Or(this,n),l=a.tween;if(l!==e){i=e=l;for(var c=0,d=i.length;c<d;++c)if(i[c].name===t){i=i.slice(),i.splice(c,1);break}}a.tween=i}}function Zk(n,t,e){var i,a;if(typeof e!="function")throw new Error;return function(){var l=Or(this,n),c=l.tween;if(c!==i){a=(i=c).slice();for(var d={name:t,value:e},h=0,g=a.length;h<g;++h)if(a[h].name===t){a[h]=d;break}h===g&&a.push(d)}l.tween=a}}function Qk(n,t){var e=this._id;if(n+="",arguments.length<2){for(var i=rr(this.node(),e).tween,a=0,l=i.length,c;a<l;++a)if((c=i[a]).name===n)return c.value;return null}return this.each((t==null?Fk:Zk)(e,n,t))}function up(n,t,e){var i=n._id;return n.each(function(){var a=Or(this,i);(a.value||(a.value={}))[t]=e.apply(this,arguments)}),function(a){return rr(a,i).value[t]}}function Jx(n,t){var e;return(typeof t=="number"?dr:t instanceof Pa?Od:(e=Pa(t))?(t=e,Od):Bx)(n,t)}function Wk(n){return function(){this.removeAttribute(n)}}function tO(n){return function(){this.removeAttributeNS(n.space,n.local)}}function eO(n,t,e){var i,a=e+"",l;return function(){var c=this.getAttribute(n);return c===a?null:c===i?l:l=t(i=c,e)}}function nO(n,t,e){var i,a=e+"",l;return function(){var c=this.getAttributeNS(n.space,n.local);return c===a?null:c===i?l:l=t(i=c,e)}}function rO(n,t,e){var i,a,l;return function(){var c,d=e(this),h;return d==null?void this.removeAttribute(n):(c=this.getAttribute(n),h=d+"",c===h?null:c===i&&h===a?l:(a=h,l=t(i=c,d)))}}function iO(n,t,e){var i,a,l;return function(){var c,d=e(this),h;return d==null?void this.removeAttributeNS(n.space,n.local):(c=this.getAttributeNS(n.space,n.local),h=d+"",c===h?null:c===i&&h===a?l:(a=h,l=t(i=c,d)))}}function sO(n,t){var e=Fd(n),i=e==="transform"?Uk:Jx;return this.attrTween(n,typeof t=="function"?(e.local?iO:rO)(e,i,up(this,"attr."+n,t)):t==null?(e.local?tO:Wk)(e):(e.local?nO:eO)(e,i,t))}function aO(n,t){return function(e){this.setAttribute(n,t.call(this,e))}}function oO(n,t){return function(e){this.setAttributeNS(n.space,n.local,t.call(this,e))}}function lO(n,t){var e,i;function a(){var l=t.apply(this,arguments);return l!==i&&(e=(i=l)&&oO(n,l)),e}return a._value=t,a}function uO(n,t){var e,i;function a(){var l=t.apply(this,arguments);return l!==i&&(e=(i=l)&&aO(n,l)),e}return a._value=t,a}function cO(n,t){var e="attr."+n;if(arguments.length<2)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;var i=Fd(n);return this.tween(e,(i.local?lO:uO)(i,t))}function fO(n,t){return function(){lp(this,n).delay=+t.apply(this,arguments)}}function dO(n,t){return t=+t,function(){lp(this,n).delay=t}}function hO(n){var t=this._id;return arguments.length?this.each((typeof n=="function"?fO:dO)(t,n)):rr(this.node(),t).delay}function gO(n,t){return function(){Or(this,n).duration=+t.apply(this,arguments)}}function mO(n,t){return t=+t,function(){Or(this,n).duration=t}}function yO(n){var t=this._id;return arguments.length?this.each((typeof n=="function"?gO:mO)(t,n)):rr(this.node(),t).duration}function pO(n,t){if(typeof t!="function")throw new Error;return function(){Or(this,n).ease=t}}function vO(n){var t=this._id;return arguments.length?this.each(pO(t,n)):rr(this.node(),t).ease}function wO(n,t){return function(){var e=t.apply(this,arguments);if(typeof e!="function")throw new Error;Or(this,n).ease=e}}function bO(n){if(typeof n!="function")throw new Error;return this.each(wO(this._id,n))}function SO(n){typeof n!="function"&&(n=vx(n));for(var t=this._groups,e=t.length,i=new Array(e),a=0;a<e;++a)for(var l=t[a],c=l.length,d=i[a]=[],h,g=0;g<c;++g)(h=l[g])&&n.call(h,h.__data__,g,l)&&d.push(h);return new ms(i,this._parents,this._name,this._id)}function xO(n){if(n._id!==this._id)throw new Error;for(var t=this._groups,e=n._groups,i=t.length,a=e.length,l=Math.min(i,a),c=new Array(i),d=0;d<l;++d)for(var h=t[d],g=e[d],y=h.length,w=c[d]=new Array(y),v,b=0;b<y;++b)(v=h[b]||g[b])&&(w[b]=v);for(;d<i;++d)c[d]=t[d];return new ms(c,this._parents,this._name,this._id)}function TO(n){return(n+"").trim().split(/^|\s+/).every(function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||t==="start"})}function AO(n,t,e){var i,a,l=TO(t)?lp:Or;return function(){var c=l(this,n),d=c.on;d!==i&&(a=(i=d).copy()).on(t,e),c.on=a}}function EO(n,t){var e=this._id;return arguments.length<2?rr(this.node(),e).on.on(n):this.each(AO(e,n,t))}function NO(n){return function(){var t=this.parentNode;for(var e in this.__transition)if(+e!==n)return;t&&t.removeChild(this)}}function CO(){return this.on("end.remove",NO(this._id))}function DO(n){var t=this._name,e=this._id;typeof n!="function"&&(n=rp(n));for(var i=this._groups,a=i.length,l=new Array(a),c=0;c<a;++c)for(var d=i[c],h=d.length,g=l[c]=new Array(h),y,w,v=0;v<h;++v)(y=d[v])&&(w=n.call(y,y.__data__,v,d))&&("__data__"in y&&(w.__data__=y.__data__),g[v]=w,Qd(g[v],t,e,v,g,rr(y,e)));return new ms(l,this._parents,t,e)}function kO(n){var t=this._name,e=this._id;typeof n!="function"&&(n=px(n));for(var i=this._groups,a=i.length,l=[],c=[],d=0;d<a;++d)for(var h=i[d],g=h.length,y,w=0;w<g;++w)if(y=h[w]){for(var v=n.call(y,y.__data__,w,h),b,x=rr(y,e),A=0,C=v.length;A<C;++A)(b=v[A])&&Qd(b,t,e,A,v,x);l.push(v),c.push(y)}return new ms(l,c,t,e)}var OO=nc.prototype.constructor;function IO(){return new OO(this._groups,this._parents)}function RO(n,t){var e,i,a;return function(){var l=tl(this,n),c=(this.style.removeProperty(n),tl(this,n));return l===c?null:l===e&&c===i?a:a=t(e=l,i=c)}}function Hx(n){return function(){this.style.removeProperty(n)}}function MO(n,t,e){var i,a=e+"",l;return function(){var c=tl(this,n);return c===a?null:c===i?l:l=t(i=c,e)}}function BO(n,t,e){var i,a,l;return function(){var c=tl(this,n),d=e(this),h=d+"";return d==null&&(h=d=(this.style.removeProperty(n),tl(this,n))),c===h?null:c===i&&h===a?l:(a=h,l=t(i=c,d))}}function zO(n,t){var e,i,a,l="style."+t,c="end."+l,d;return function(){var h=Or(this,n),g=h.on,y=h.value[l]==null?d||(d=Hx(t)):void 0;(g!==e||a!==y)&&(i=(e=g).copy()).on(c,a=y),h.on=i}}function LO(n,t,e){var i=(n+="")=="transform"?_k:Jx;return t==null?this.styleTween(n,RO(n,i)).on("end.style."+n,Hx(n)):typeof t=="function"?this.styleTween(n,BO(n,i,up(this,"style."+n,t))).each(zO(this._id,n)):this.styleTween(n,MO(n,i,t),e).on("end.style."+n,null)}function _O(n,t,e){return function(i){this.style.setProperty(n,t.call(this,i),e)}}function UO(n,t,e){var i,a;function l(){var c=t.apply(this,arguments);return c!==a&&(i=(a=c)&&_O(n,c,e)),i}return l._value=t,l}function qO(n,t,e){var i="style."+(n+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(t==null)return this.tween(i,null);if(typeof t!="function")throw new Error;return this.tween(i,UO(n,t,e??""))}function PO(n){return function(){this.textContent=n}}function JO(n){return function(){var t=n(this);this.textContent=t??""}}function HO(n){return this.tween("text",typeof n=="function"?JO(up(this,"text",n)):PO(n==null?"":n+""))}function $O(n){return function(t){this.textContent=n.call(this,t)}}function VO(n){var t,e;function i(){var a=n.apply(this,arguments);return a!==e&&(t=(e=a)&&$O(a)),t}return i._value=n,i}function jO(n){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(n==null)return this.tween(t,null);if(typeof n!="function")throw new Error;return this.tween(t,VO(n))}function YO(){for(var n=this._name,t=this._id,e=$x(),i=this._groups,a=i.length,l=0;l<a;++l)for(var c=i[l],d=c.length,h,g=0;g<d;++g)if(h=c[g]){var y=rr(h,t);Qd(h,n,e,g,c,{time:y.time+y.delay+y.duration,delay:0,duration:y.duration,ease:y.ease})}return new ms(i,this._parents,n,e)}function GO(){var n,t,e=this,i=e._id,a=e.size();return new Promise(function(l,c){var d={value:c},h={value:function(){--a===0&&l()}};e.each(function(){var g=Or(this,i),y=g.on;y!==n&&(t=(n=y).copy(),t._.cancel.push(d),t._.interrupt.push(d),t._.end.push(h)),g.on=t}),a===0&&l()})}var KO=0;function ms(n,t,e,i){this._groups=n,this._parents=t,this._name=e,this._id=i}function $x(){return++KO}var Qr=nc.prototype;ms.prototype={constructor:ms,select:DO,selectAll:kO,selectChild:Qr.selectChild,selectChildren:Qr.selectChildren,filter:SO,merge:xO,selection:IO,transition:YO,call:Qr.call,nodes:Qr.nodes,node:Qr.node,size:Qr.size,empty:Qr.empty,each:Qr.each,on:EO,attr:sO,attrTween:cO,style:LO,styleTween:qO,text:HO,textTween:jO,remove:CO,tween:Qk,delay:hO,duration:yO,ease:vO,easeVarying:bO,end:GO,[Symbol.iterator]:Qr[Symbol.iterator]};function XO(n){return((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2}var FO={time:null,delay:0,duration:250,ease:XO};function ZO(n,t){for(var e;!(e=n.__transition)||!(e=e[t]);)if(!(n=n.parentNode))throw new Error(`transition ${t} not found`);return e}function QO(n){var t,e;n instanceof ms?(t=n._id,n=n._name):(t=$x(),(e=FO).time=op(),n=n==null?null:n+"");for(var i=this._groups,a=i.length,l=0;l<a;++l)for(var c=i[l],d=c.length,h,g=0;g<d;++g)(h=c[g])&&Qd(h,n,t,g,c,e||ZO(h,t));return new ms(i,this._parents,n,t)}nc.prototype.interrupt=Xk;nc.prototype.transition=QO;const _f=n=>()=>n;function WO(n,{sourceEvent:t,target:e,transform:i,dispatch:a}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:e,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:a}})}function cs(n,t,e){this.k=n,this.x=t,this.y=e}cs.prototype={constructor:cs,scale:function(n){return n===1?this:new cs(this.k*n,this.x,this.y)},translate:function(n,t){return n===0&t===0?this:new cs(this.k,this.x+this.k*n,this.y+this.k*t)},apply:function(n){return[n[0]*this.k+this.x,n[1]*this.k+this.y]},applyX:function(n){return n*this.k+this.x},applyY:function(n){return n*this.k+this.y},invert:function(n){return[(n[0]-this.x)/this.k,(n[1]-this.y)/this.k]},invertX:function(n){return(n-this.x)/this.k},invertY:function(n){return(n-this.y)/this.k},rescaleX:function(n){return n.copy().domain(n.range().map(this.invertX,this).map(n.invert,n))},rescaleY:function(n){return n.copy().domain(n.range().map(this.invertY,this).map(n.invert,n))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Wd=new cs(1,0,0);Vx.prototype=cs.prototype;function Vx(n){for(;!n.__zoom;)if(!(n=n.parentNode))return Wd;return n.__zoom}function _m(n){n.stopImmediatePropagation()}function wu(n){n.preventDefault(),n.stopImmediatePropagation()}function tI(n){return(!n.ctrlKey||n.type==="wheel")&&!n.button}function eI(){var n=this;return n instanceof SVGElement?(n=n.ownerSVGElement||n,n.hasAttribute("viewBox")?(n=n.viewBox.baseVal,[[n.x,n.y],[n.x+n.width,n.y+n.height]]):[[0,0],[n.width.baseVal.value,n.height.baseVal.value]]):[[0,0],[n.clientWidth,n.clientHeight]]}function mS(){return this.__zoom||Wd}function nI(n){return-n.deltaY*(n.deltaMode===1?.05:n.deltaMode?1:.002)*(n.ctrlKey?10:1)}function rI(){return navigator.maxTouchPoints||"ontouchstart"in this}function iI(n,t,e){var i=n.invertX(t[0][0])-e[0][0],a=n.invertX(t[1][0])-e[1][0],l=n.invertY(t[0][1])-e[0][1],c=n.invertY(t[1][1])-e[1][1];return n.translate(a>i?(i+a)/2:Math.min(0,i)||Math.max(0,a),c>l?(l+c)/2:Math.min(0,l)||Math.max(0,c))}function jx(){var n=tI,t=eI,e=iI,i=nI,a=rI,l=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],d=250,h=Ff,g=Xd("start","zoom","end"),y,w,v,b=500,x=150,A=0,C=10;function k(R){R.property("__zoom",mS).on("wheel.zoom",V,{passive:!1}).on("mousedown.zoom",tt).on("dblclick.zoom",ft).filter(a).on("touchstart.zoom",nt).on("touchmove.zoom",it).on("touchend.zoom touchcancel.zoom",ut).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}k.transform=function(R,j,O,z){var G=R.selection?R.selection():R;G.property("__zoom",mS),R!==G?B(R,j,O,z):G.interrupt().each(function(){_(this,arguments).event(z).start().zoom(null,typeof j=="function"?j.apply(this,arguments):j).end()})},k.scaleBy=function(R,j,O,z){k.scaleTo(R,function(){var G=this.__zoom.k,J=typeof j=="function"?j.apply(this,arguments):j;return G*J},O,z)},k.scaleTo=function(R,j,O,z){k.transform(R,function(){var G=t.apply(this,arguments),J=this.__zoom,D=O==null?I(G):typeof O=="function"?O.apply(this,arguments):O,U=J.invert(D),Z=typeof j=="function"?j.apply(this,arguments):j;return e(N(L(J,Z),D,U),G,c)},O,z)},k.translateBy=function(R,j,O,z){k.transform(R,function(){return e(this.__zoom.translate(typeof j=="function"?j.apply(this,arguments):j,typeof O=="function"?O.apply(this,arguments):O),t.apply(this,arguments),c)},null,z)},k.translateTo=function(R,j,O,z,G){k.transform(R,function(){var J=t.apply(this,arguments),D=this.__zoom,U=z==null?I(J):typeof z=="function"?z.apply(this,arguments):z;return e(Wd.translate(U[0],U[1]).scale(D.k).translate(typeof j=="function"?-j.apply(this,arguments):-j,typeof O=="function"?-O.apply(this,arguments):-O),J,c)},z,G)};function L(R,j){return j=Math.max(l[0],Math.min(l[1],j)),j===R.k?R:new cs(j,R.x,R.y)}function N(R,j,O){var z=j[0]-O[0]*R.k,G=j[1]-O[1]*R.k;return z===R.x&&G===R.y?R:new cs(R.k,z,G)}function I(R){return[(+R[0][0]+ +R[1][0])/2,(+R[0][1]+ +R[1][1])/2]}function B(R,j,O,z){R.on("start.zoom",function(){_(this,arguments).event(z).start()}).on("interrupt.zoom end.zoom",function(){_(this,arguments).event(z).end()}).tween("zoom",function(){var G=this,J=arguments,D=_(G,J).event(z),U=t.apply(G,J),Z=O==null?I(U):typeof O=="function"?O.apply(G,J):O,rt=Math.max(U[1][0]-U[0][0],U[1][1]-U[0][1]),ot=G.__zoom,mt=typeof j=="function"?j.apply(G,J):j,dt=h(ot.invert(Z).concat(rt/ot.k),mt.invert(Z).concat(rt/mt.k));return function(pt){if(pt===1)pt=mt;else{var gt=dt(pt),bt=rt/gt[2];pt=new cs(bt,Z[0]-gt[0]*bt,Z[1]-gt[1]*bt)}D.zoom(null,pt)}})}function _(R,j,O){return!O&&R.__zooming||new P(R,j)}function P(R,j){this.that=R,this.args=j,this.active=0,this.sourceEvent=null,this.extent=t.apply(R,j),this.taps=0}P.prototype={event:function(R){return R&&(this.sourceEvent=R),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(R,j){return this.mouse&&R!=="mouse"&&(this.mouse[1]=j.invert(this.mouse[0])),this.touch0&&R!=="touch"&&(this.touch0[1]=j.invert(this.touch0[0])),this.touch1&&R!=="touch"&&(this.touch1[1]=j.invert(this.touch1[0])),this.that.__zoom=j,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(R){var j=gn(this.that).datum();g.call(R,this.that,new WO(R,{sourceEvent:this.sourceEvent,target:k,transform:this.that.__zoom,dispatch:g}),j)}};function V(R,...j){if(!n.apply(this,arguments))return;var O=_(this,j).event(R),z=this.__zoom,G=Math.max(l[0],Math.min(l[1],z.k*Math.pow(2,i.apply(this,arguments)))),J=Zn(R);if(O.wheel)(O.mouse[0][0]!==J[0]||O.mouse[0][1]!==J[1])&&(O.mouse[1]=z.invert(O.mouse[0]=J)),clearTimeout(O.wheel);else{if(z.k===G)return;O.mouse=[J,z.invert(J)],Wf(this),O.start()}wu(R),O.wheel=setTimeout(D,x),O.zoom("mouse",e(N(L(z,G),O.mouse[0],O.mouse[1]),O.extent,c));function D(){O.wheel=null,O.end()}}function tt(R,...j){if(v||!n.apply(this,arguments))return;var O=R.currentTarget,z=_(this,j,!0).event(R),G=gn(R.view).on("mousemove.zoom",Z,!0).on("mouseup.zoom",rt,!0),J=Zn(R,O),D=R.clientX,U=R.clientY;Dx(R.view),_m(R),z.mouse=[J,this.__zoom.invert(J)],Wf(this),z.start();function Z(ot){if(wu(ot),!z.moved){var mt=ot.clientX-D,dt=ot.clientY-U;z.moved=mt*mt+dt*dt>A}z.event(ot).zoom("mouse",e(N(z.that.__zoom,z.mouse[0]=Zn(ot,O),z.mouse[1]),z.extent,c))}function rt(ot){G.on("mousemove.zoom mouseup.zoom",null),kx(ot.view,z.moved),wu(ot),z.event(ot).end()}}function ft(R,...j){if(n.apply(this,arguments)){var O=this.__zoom,z=Zn(R.changedTouches?R.changedTouches[0]:R,this),G=O.invert(z),J=O.k*(R.shiftKey?.5:2),D=e(N(L(O,J),z,G),t.apply(this,j),c);wu(R),d>0?gn(this).transition().duration(d).call(B,D,z,R):gn(this).call(k.transform,D,z,R)}}function nt(R,...j){if(n.apply(this,arguments)){var O=R.touches,z=O.length,G=_(this,j,R.changedTouches.length===z).event(R),J,D,U,Z;for(_m(R),D=0;D<z;++D)U=O[D],Z=Zn(U,this),Z=[Z,this.__zoom.invert(Z),U.identifier],G.touch0?!G.touch1&&G.touch0[2]!==Z[2]&&(G.touch1=Z,G.taps=0):(G.touch0=Z,J=!0,G.taps=1+!!y);y&&(y=clearTimeout(y)),J&&(G.taps<2&&(w=Z[0],y=setTimeout(function(){y=null},b)),Wf(this),G.start())}}function it(R,...j){if(this.__zooming){var O=_(this,j).event(R),z=R.changedTouches,G=z.length,J,D,U,Z;for(wu(R),J=0;J<G;++J)D=z[J],U=Zn(D,this),O.touch0&&O.touch0[2]===D.identifier?O.touch0[0]=U:O.touch1&&O.touch1[2]===D.identifier&&(O.touch1[0]=U);if(D=O.that.__zoom,O.touch1){var rt=O.touch0[0],ot=O.touch0[1],mt=O.touch1[0],dt=O.touch1[1],pt=(pt=mt[0]-rt[0])*pt+(pt=mt[1]-rt[1])*pt,gt=(gt=dt[0]-ot[0])*gt+(gt=dt[1]-ot[1])*gt;D=L(D,Math.sqrt(pt/gt)),U=[(rt[0]+mt[0])/2,(rt[1]+mt[1])/2],Z=[(ot[0]+dt[0])/2,(ot[1]+dt[1])/2]}else if(O.touch0)U=O.touch0[0],Z=O.touch0[1];else return;O.zoom("touch",e(N(D,U,Z),O.extent,c))}}function ut(R,...j){if(this.__zooming){var O=_(this,j).event(R),z=R.changedTouches,G=z.length,J,D;for(_m(R),v&&clearTimeout(v),v=setTimeout(function(){v=null},b),J=0;J<G;++J)D=z[J],O.touch0&&O.touch0[2]===D.identifier?delete O.touch0:O.touch1&&O.touch1[2]===D.identifier&&delete O.touch1;if(O.touch1&&!O.touch0&&(O.touch0=O.touch1,delete O.touch1),O.touch0)O.touch0[1]=this.__zoom.invert(O.touch0[0]);else if(O.end(),O.taps===2&&(D=Zn(D,this),Math.hypot(w[0]-D[0],w[1]-D[1])<C)){var U=gn(this).on("dblclick.zoom");U&&U.apply(this,arguments)}}}return k.wheelDelta=function(R){return arguments.length?(i=typeof R=="function"?R:_f(+R),k):i},k.filter=function(R){return arguments.length?(n=typeof R=="function"?R:_f(!!R),k):n},k.touchable=function(R){return arguments.length?(a=typeof R=="function"?R:_f(!!R),k):a},k.extent=function(R){return arguments.length?(t=typeof R=="function"?R:_f([[+R[0][0],+R[0][1]],[+R[1][0],+R[1][1]]]),k):t},k.scaleExtent=function(R){return arguments.length?(l[0]=+R[0],l[1]=+R[1],k):[l[0],l[1]]},k.translateExtent=function(R){return arguments.length?(c[0][0]=+R[0][0],c[1][0]=+R[1][0],c[0][1]=+R[0][1],c[1][1]=+R[1][1],k):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},k.constrain=function(R){return arguments.length?(e=R,k):e},k.duration=function(R){return arguments.length?(d=+R,k):d},k.interpolate=function(R){return arguments.length?(h=R,k):h},k.on=function(){var R=g.on.apply(g,arguments);return R===g?k:R},k.clickDistance=function(R){return arguments.length?(A=(R=+R)*R,k):Math.sqrt(A)},k.tapDistance=function(R){return arguments.length?(C=+R,k):C},k}const kr={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:n=>`Node type "${n}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:n=>`The old edge with id=${n} does not exist.`,error009:n=>`Marker type "${n}" doesn't exist.`,error008:(n,{id:t,sourceHandle:e,targetHandle:i})=>`Couldn't create edge for ${n} handle id: "${n==="source"?e:i}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:n=>`Edge type "${n}" not found. Using fallback type "default".`,error012:n=>`Node with id "${n}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(n="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${n}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},ju=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Yx=["Enter"," ","Escape"],Gx={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:n,x:t,y:e})=>`Moved selected node ${n}. New position, x: ${t}, y: ${e}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var nl;(function(n){n.Strict="strict",n.Loose="loose"})(nl||(nl={}));var za;(function(n){n.Free="free",n.Vertical="vertical",n.Horizontal="horizontal"})(za||(za={}));var Yu;(function(n){n.Partial="partial",n.Full="full"})(Yu||(Yu={}));const Kx={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var Zs;(function(n){n.Bezier="default",n.Straight="straight",n.Step="step",n.SmoothStep="smoothstep",n.SimpleBezier="simplebezier"})(Zs||(Zs={}));var Bd;(function(n){n.Arrow="arrow",n.ArrowClosed="arrowclosed"})(Bd||(Bd={}));var Et;(function(n){n.Left="left",n.Top="top",n.Right="right",n.Bottom="bottom"})(Et||(Et={}));const yS={[Et.Left]:Et.Right,[Et.Right]:Et.Left,[Et.Top]:Et.Bottom,[Et.Bottom]:Et.Top};function Xx(n){return n===null?null:n?"valid":"invalid"}const Fx=n=>"id"in n&&"source"in n&&"target"in n,sI=n=>"id"in n&&"position"in n&&!("source"in n)&&!("target"in n),cp=n=>"id"in n&&"internals"in n&&!("source"in n)&&!("target"in n),ic=(n,t=[0,0])=>{const{width:e,height:i}=ps(n),a=n.origin??t,l=e*a[0],c=i*a[1];return{x:n.position.x-l,y:n.position.y-c}},aI=(n,t={nodeOrigin:[0,0]})=>{if(n.length===0)return{x:0,y:0,width:0,height:0};const e=n.reduce((i,a)=>{const l=typeof a=="string";let c=!t.nodeLookup&&!l?a:void 0;t.nodeLookup&&(c=l?t.nodeLookup.get(a):cp(a)?a:t.nodeLookup.get(a.id));const d=c?zd(c,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return th(i,d)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return eh(e)},sc=(n,t={})=>{if(n.size===0)return{x:0,y:0,width:0,height:0};let e={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return n.forEach(i=>{if(t.filter===void 0||t.filter(i)){const a=zd(i);e=th(e,a)}}),eh(e)},fp=(n,t,[e,i,a]=[0,0,1],l=!1,c=!1)=>{const d={...ac(t,[e,i,a]),width:t.width/a,height:t.height/a},h=[];for(const g of n.values()){const{measured:y,selectable:w=!0,hidden:v=!1}=g;if(c&&!w||v)continue;const b=y.width??g.width??g.initialWidth??null,x=y.height??g.height??g.initialHeight??null,A=Gu(d,il(g)),C=(b??0)*(x??0),k=l&&A>0;(!g.internals.handleBounds||k||A>=C||g.dragging)&&h.push(g)}return h},oI=(n,t)=>{const e=new Set;return n.forEach(i=>{e.add(i.id)}),t.filter(i=>e.has(i.source)||e.has(i.target))};function lI(n,t){const e=new Map,i=t!=null&&t.nodes?new Set(t.nodes.map(a=>a.id)):null;return n.forEach(a=>{a.measured.width&&a.measured.height&&((t==null?void 0:t.includeHiddenNodes)||!a.hidden)&&(!i||i.has(a.id))&&e.set(a.id,a)}),e}async function uI({nodes:n,width:t,height:e,panZoom:i,minZoom:a,maxZoom:l},c){if(n.size===0)return Promise.resolve(!0);const d=lI(n,c),h=sc(d),g=dp(h,t,e,(c==null?void 0:c.minZoom)??a,(c==null?void 0:c.maxZoom)??l,(c==null?void 0:c.padding)??.1);return await i.setViewport(g,{duration:c==null?void 0:c.duration,ease:c==null?void 0:c.ease,interpolate:c==null?void 0:c.interpolate}),Promise.resolve(!0)}function Zx({nodeId:n,nextPosition:t,nodeLookup:e,nodeOrigin:i=[0,0],nodeExtent:a,onError:l}){const c=e.get(n),d=c.parentId?e.get(c.parentId):void 0,{x:h,y:g}=d?d.internals.positionAbsolute:{x:0,y:0},y=c.origin??i;let w=c.extent||a;if(c.extent==="parent"&&!c.expandParent)if(!d)l==null||l("005",kr.error005());else{const b=d.measured.width,x=d.measured.height;b&&x&&(w=[[h,g],[h+b,g+x]])}else d&&sl(c.extent)&&(w=[[c.extent[0][0]+h,c.extent[0][1]+g],[c.extent[1][0]+h,c.extent[1][1]+g]]);const v=sl(w)?Ha(t,w,c.measured):t;return(c.measured.width===void 0||c.measured.height===void 0)&&(l==null||l("015",kr.error015())),{position:{x:v.x-h+(c.measured.width??0)*y[0],y:v.y-g+(c.measured.height??0)*y[1]},positionAbsolute:v}}async function cI({nodesToRemove:n=[],edgesToRemove:t=[],nodes:e,edges:i,onBeforeDelete:a}){const l=new Set(n.map(v=>v.id)),c=[];for(const v of e){if(v.deletable===!1)continue;const b=l.has(v.id),x=!b&&v.parentId&&c.find(A=>A.id===v.parentId);(b||x)&&c.push(v)}const d=new Set(t.map(v=>v.id)),h=i.filter(v=>v.deletable!==!1),y=oI(c,h);for(const v of h)d.has(v.id)&&!y.find(x=>x.id===v.id)&&y.push(v);if(!a)return{edges:y,nodes:c};const w=await a({nodes:c,edges:y});return typeof w=="boolean"?w?{edges:y,nodes:c}:{edges:[],nodes:[]}:w}const rl=(n,t=0,e=1)=>Math.min(Math.max(n,t),e),Ha=(n={x:0,y:0},t,e)=>({x:rl(n.x,t[0][0],t[1][0]-((e==null?void 0:e.width)??0)),y:rl(n.y,t[0][1],t[1][1]-((e==null?void 0:e.height)??0))});function Qx(n,t,e){const{width:i,height:a}=ps(e),{x:l,y:c}=e.internals.positionAbsolute;return Ha(n,[[l,c],[l+i,c+a]],t)}const pS=(n,t,e)=>n<t?rl(Math.abs(n-t),1,t)/t:n>e?-rl(Math.abs(n-e),1,t)/t:0,Wx=(n,t,e=15,i=40)=>{const a=pS(n.x,i,t.width-i)*e,l=pS(n.y,i,t.height-i)*e;return[a,l]},th=(n,t)=>({x:Math.min(n.x,t.x),y:Math.min(n.y,t.y),x2:Math.max(n.x2,t.x2),y2:Math.max(n.y2,t.y2)}),Iy=({x:n,y:t,width:e,height:i})=>({x:n,y:t,x2:n+e,y2:t+i}),eh=({x:n,y:t,x2:e,y2:i})=>({x:n,y:t,width:e-n,height:i-t}),il=(n,t=[0,0])=>{var a,l;const{x:e,y:i}=cp(n)?n.internals.positionAbsolute:ic(n,t);return{x:e,y:i,width:((a=n.measured)==null?void 0:a.width)??n.width??n.initialWidth??0,height:((l=n.measured)==null?void 0:l.height)??n.height??n.initialHeight??0}},zd=(n,t=[0,0])=>{var a,l;const{x:e,y:i}=cp(n)?n.internals.positionAbsolute:ic(n,t);return{x:e,y:i,x2:e+(((a=n.measured)==null?void 0:a.width)??n.width??n.initialWidth??0),y2:i+(((l=n.measured)==null?void 0:l.height)??n.height??n.initialHeight??0)}},tT=(n,t)=>eh(th(Iy(n),Iy(t))),Gu=(n,t)=>{const e=Math.max(0,Math.min(n.x+n.width,t.x+t.width)-Math.max(n.x,t.x)),i=Math.max(0,Math.min(n.y+n.height,t.y+t.height)-Math.max(n.y,t.y));return Math.ceil(e*i)},vS=n=>er(n.width)&&er(n.height)&&er(n.x)&&er(n.y),er=n=>!isNaN(n)&&isFinite(n),fI=(n,t)=>{},nh=(n,t=[1,1])=>({x:t[0]*Math.round(n.x/t[0]),y:t[1]*Math.round(n.y/t[1])}),ac=({x:n,y:t},[e,i,a],l=!1,c=[1,1])=>{const d={x:(n-e)/a,y:(t-i)/a};return l?nh(d,c):d},Ld=({x:n,y:t},[e,i,a])=>({x:n*a+e,y:t*a+i});function Mo(n,t){if(typeof n=="number")return Math.floor((t-t/(1+n))*.5);if(typeof n=="string"&&n.endsWith("px")){const e=parseFloat(n);if(!Number.isNaN(e))return Math.floor(e)}if(typeof n=="string"&&n.endsWith("%")){const e=parseFloat(n);if(!Number.isNaN(e))return Math.floor(t*e*.01)}return console.error(`[React Flow] The padding value "${n}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function dI(n,t,e){if(typeof n=="string"||typeof n=="number"){const i=Mo(n,e),a=Mo(n,t);return{top:i,right:a,bottom:i,left:a,x:a*2,y:i*2}}if(typeof n=="object"){const i=Mo(n.top??n.y??0,e),a=Mo(n.bottom??n.y??0,e),l=Mo(n.left??n.x??0,t),c=Mo(n.right??n.x??0,t);return{top:i,right:c,bottom:a,left:l,x:l+c,y:i+a}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function hI(n,t,e,i,a,l){const{x:c,y:d}=Ld(n,[t,e,i]),{x:h,y:g}=Ld({x:n.x+n.width,y:n.y+n.height},[t,e,i]),y=a-h,w=l-g;return{left:Math.floor(c),top:Math.floor(d),right:Math.floor(y),bottom:Math.floor(w)}}const dp=(n,t,e,i,a,l)=>{const c=dI(l,t,e),d=(t-c.x)/n.width,h=(e-c.y)/n.height,g=Math.min(d,h),y=rl(g,i,a),w=n.x+n.width/2,v=n.y+n.height/2,b=t/2-w*y,x=e/2-v*y,A=hI(n,b,x,y,t,e),C={left:Math.min(A.left-c.left,0),top:Math.min(A.top-c.top,0),right:Math.min(A.right-c.right,0),bottom:Math.min(A.bottom-c.bottom,0)};return{x:b-C.left+C.right,y:x-C.top+C.bottom,zoom:y}},_d=()=>{var n;return typeof navigator<"u"&&((n=navigator==null?void 0:navigator.userAgent)==null?void 0:n.indexOf("Mac"))>=0};function sl(n){return n!==void 0&&n!=="parent"}function ps(n){var t,e;return{width:((t=n.measured)==null?void 0:t.width)??n.width??n.initialWidth??0,height:((e=n.measured)==null?void 0:e.height)??n.height??n.initialHeight??0}}function eT(n){var t,e;return(((t=n.measured)==null?void 0:t.width)??n.width??n.initialWidth)!==void 0&&(((e=n.measured)==null?void 0:e.height)??n.height??n.initialHeight)!==void 0}function nT(n,t={width:0,height:0},e,i,a){const l={...n},c=i.get(e);if(c){const d=c.origin||a;l.x+=c.internals.positionAbsolute.x-(t.width??0)*d[0],l.y+=c.internals.positionAbsolute.y-(t.height??0)*d[1]}return l}function wS(n,t){if(n.size!==t.size)return!1;for(const e of n)if(!t.has(e))return!1;return!0}function gI(){let n,t;return{promise:new Promise((i,a)=>{n=i,t=a}),resolve:n,reject:t}}function mI(n){return{...Gx,...n||{}}}function Ou(n,{snapGrid:t=[0,0],snapToGrid:e=!1,transform:i,containerBounds:a}){const{x:l,y:c}=xr(n),d=ac({x:l-((a==null?void 0:a.left)??0),y:c-((a==null?void 0:a.top)??0)},i),{x:h,y:g}=e?nh(d,t):d;return{xSnapped:h,ySnapped:g,...d}}const hp=n=>({width:n.offsetWidth,height:n.offsetHeight}),rT=n=>{var t;return((t=n==null?void 0:n.getRootNode)==null?void 0:t.call(n))||(window==null?void 0:window.document)},yI=["INPUT","SELECT","TEXTAREA"];function iT(n){var i,a;const t=((a=(i=n.composedPath)==null?void 0:i.call(n))==null?void 0:a[0])||n.target;return(t==null?void 0:t.nodeType)!==1?!1:yI.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey")}const sT=n=>"clientX"in n,xr=(n,t)=>{var l,c;const e=sT(n),i=e?n.clientX:(l=n.touches)==null?void 0:l[0].clientX,a=e?n.clientY:(c=n.touches)==null?void 0:c[0].clientY;return{x:i-((t==null?void 0:t.left)??0),y:a-((t==null?void 0:t.top)??0)}},bS=(n,t,e,i,a)=>{const l=t.querySelectorAll(`.${n}`);return!l||!l.length?null:Array.from(l).map(c=>{const d=c.getBoundingClientRect();return{id:c.getAttribute("data-handleid"),type:n,nodeId:a,position:c.getAttribute("data-handlepos"),x:(d.left-e.left)/i,y:(d.top-e.top)/i,...hp(c)}})};function aT({sourceX:n,sourceY:t,targetX:e,targetY:i,sourceControlX:a,sourceControlY:l,targetControlX:c,targetControlY:d}){const h=n*.125+a*.375+c*.375+e*.125,g=t*.125+l*.375+d*.375+i*.125,y=Math.abs(h-n),w=Math.abs(g-t);return[h,g,y,w]}function Uf(n,t){return n>=0?.5*n:t*25*Math.sqrt(-n)}function SS({pos:n,x1:t,y1:e,x2:i,y2:a,c:l}){switch(n){case Et.Left:return[t-Uf(t-i,l),e];case Et.Right:return[t+Uf(i-t,l),e];case Et.Top:return[t,e-Uf(e-a,l)];case Et.Bottom:return[t,e+Uf(a-e,l)]}}function oT({sourceX:n,sourceY:t,sourcePosition:e=Et.Bottom,targetX:i,targetY:a,targetPosition:l=Et.Top,curvature:c=.25}){const[d,h]=SS({pos:e,x1:n,y1:t,x2:i,y2:a,c}),[g,y]=SS({pos:l,x1:i,y1:a,x2:n,y2:t,c}),[w,v,b,x]=aT({sourceX:n,sourceY:t,targetX:i,targetY:a,sourceControlX:d,sourceControlY:h,targetControlX:g,targetControlY:y});return[`M${n},${t} C${d},${h} ${g},${y} ${i},${a}`,w,v,b,x]}function lT({sourceX:n,sourceY:t,targetX:e,targetY:i}){const a=Math.abs(e-n)/2,l=e<n?e+a:e-a,c=Math.abs(i-t)/2,d=i<t?i+c:i-c;return[l,d,a,c]}function pI({sourceNode:n,targetNode:t,selected:e=!1,zIndex:i,elevateOnSelect:a=!1}){if(i!==void 0)return i;const l=a&&e?1e3:0,c=Math.max(n.parentId?n.internals.z:0,t.parentId?t.internals.z:0);return l+c}function vI({sourceNode:n,targetNode:t,width:e,height:i,transform:a}){const l=th(zd(n),zd(t));l.x===l.x2&&(l.x2+=1),l.y===l.y2&&(l.y2+=1);const c={x:-a[0]/a[2],y:-a[1]/a[2],width:e/a[2],height:i/a[2]};return Gu(c,eh(l))>0}const wI=({source:n,sourceHandle:t,target:e,targetHandle:i})=>`xy-edge__${n}${t||""}-${e}${i||""}`,bI=(n,t)=>t.some(e=>e.source===n.source&&e.target===n.target&&(e.sourceHandle===n.sourceHandle||!e.sourceHandle&&!n.sourceHandle)&&(e.targetHandle===n.targetHandle||!e.targetHandle&&!n.targetHandle)),SI=(n,t)=>{if(!n.source||!n.target)return t;let e;return Fx(n)?e={...n}:e={...n,id:wI(n)},bI(e,t)?t:(e.sourceHandle===null&&delete e.sourceHandle,e.targetHandle===null&&delete e.targetHandle,t.concat(e))};function uT({sourceX:n,sourceY:t,targetX:e,targetY:i}){const[a,l,c,d]=lT({sourceX:n,sourceY:t,targetX:e,targetY:i});return[`M ${n},${t}L ${e},${i}`,a,l,c,d]}const xS={[Et.Left]:{x:-1,y:0},[Et.Right]:{x:1,y:0},[Et.Top]:{x:0,y:-1},[Et.Bottom]:{x:0,y:1}},xI=({source:n,sourcePosition:t=Et.Bottom,target:e})=>t===Et.Left||t===Et.Right?n.x<e.x?{x:1,y:0}:{x:-1,y:0}:n.y<e.y?{x:0,y:1}:{x:0,y:-1},TS=(n,t)=>Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2));function TI({source:n,sourcePosition:t=Et.Bottom,target:e,targetPosition:i=Et.Top,center:a,offset:l,stepPosition:c}){const d=xS[t],h=xS[i],g={x:n.x+d.x*l,y:n.y+d.y*l},y={x:e.x+h.x*l,y:e.y+h.y*l},w=xI({source:g,sourcePosition:t,target:y}),v=w.x!==0?"x":"y",b=w[v];let x=[],A,C;const k={x:0,y:0},L={x:0,y:0},[,,N,I]=lT({sourceX:n.x,sourceY:n.y,targetX:e.x,targetY:e.y});if(d[v]*h[v]===-1){v==="x"?(A=a.x??g.x+(y.x-g.x)*c,C=a.y??(g.y+y.y)/2):(A=a.x??(g.x+y.x)/2,C=a.y??g.y+(y.y-g.y)*c);const _=[{x:A,y:g.y},{x:A,y:y.y}],P=[{x:g.x,y:C},{x:y.x,y:C}];d[v]===b?x=v==="x"?_:P:x=v==="x"?P:_}else{const _=[{x:g.x,y:y.y}],P=[{x:y.x,y:g.y}];if(v==="x"?x=d.x===b?P:_:x=d.y===b?_:P,t===i){const it=Math.abs(n[v]-e[v]);if(it<=l){const ut=Math.min(l-1,l-it);d[v]===b?k[v]=(g[v]>n[v]?-1:1)*ut:L[v]=(y[v]>e[v]?-1:1)*ut}}if(t!==i){const it=v==="x"?"y":"x",ut=d[v]===h[it],R=g[it]>y[it],j=g[it]<y[it];(d[v]===1&&(!ut&&R||ut&&j)||d[v]!==1&&(!ut&&j||ut&&R))&&(x=v==="x"?_:P)}const V={x:g.x+k.x,y:g.y+k.y},tt={x:y.x+L.x,y:y.y+L.y},ft=Math.max(Math.abs(V.x-x[0].x),Math.abs(tt.x-x[0].x)),nt=Math.max(Math.abs(V.y-x[0].y),Math.abs(tt.y-x[0].y));ft>=nt?(A=(V.x+tt.x)/2,C=x[0].y):(A=x[0].x,C=(V.y+tt.y)/2)}return[[n,{x:g.x+k.x,y:g.y+k.y},...x,{x:y.x+L.x,y:y.y+L.y},e],A,C,N,I]}function AI(n,t,e,i){const a=Math.min(TS(n,t)/2,TS(t,e)/2,i),{x:l,y:c}=t;if(n.x===l&&l===e.x||n.y===c&&c===e.y)return`L${l} ${c}`;if(n.y===c){const g=n.x<e.x?-1:1,y=n.y<e.y?1:-1;return`L ${l+a*g},${c}Q ${l},${c} ${l},${c+a*y}`}const d=n.x<e.x?1:-1,h=n.y<e.y?-1:1;return`L ${l},${c+a*h}Q ${l},${c} ${l+a*d},${c}`}function Ry({sourceX:n,sourceY:t,sourcePosition:e=Et.Bottom,targetX:i,targetY:a,targetPosition:l=Et.Top,borderRadius:c=5,centerX:d,centerY:h,offset:g=20,stepPosition:y=.5}){const[w,v,b,x,A]=TI({source:{x:n,y:t},sourcePosition:e,target:{x:i,y:a},targetPosition:l,center:{x:d,y:h},offset:g,stepPosition:y});return[w.reduce((k,L,N)=>{let I="";return N>0&&N<w.length-1?I=AI(w[N-1],L,w[N+1],c):I=`${N===0?"M":"L"}${L.x} ${L.y}`,k+=I,k},""),v,b,x,A]}function AS(n){var t;return n&&!!(n.internals.handleBounds||(t=n.handles)!=null&&t.length)&&!!(n.measured.width||n.width||n.initialWidth)}function EI(n){var w;const{sourceNode:t,targetNode:e}=n;if(!AS(t)||!AS(e))return null;const i=t.internals.handleBounds||ES(t.handles),a=e.internals.handleBounds||ES(e.handles),l=NS((i==null?void 0:i.source)??[],n.sourceHandle),c=NS(n.connectionMode===nl.Strict?(a==null?void 0:a.target)??[]:((a==null?void 0:a.target)??[]).concat((a==null?void 0:a.source)??[]),n.targetHandle);if(!l||!c)return(w=n.onError)==null||w.call(n,"008",kr.error008(l?"target":"source",{id:n.id,sourceHandle:n.sourceHandle,targetHandle:n.targetHandle})),null;const d=(l==null?void 0:l.position)||Et.Bottom,h=(c==null?void 0:c.position)||Et.Top,g=Ku(t,l,d),y=Ku(e,c,h);return{sourceX:g.x,sourceY:g.y,targetX:y.x,targetY:y.y,sourcePosition:d,targetPosition:h}}function ES(n){if(!n)return null;const t=[],e=[];for(const i of n)i.width=i.width??1,i.height=i.height??1,i.type==="source"?t.push(i):i.type==="target"&&e.push(i);return{source:t,target:e}}function Ku(n,t,e=Et.Left,i=!1){const a=((t==null?void 0:t.x)??0)+n.internals.positionAbsolute.x,l=((t==null?void 0:t.y)??0)+n.internals.positionAbsolute.y,{width:c,height:d}=t??ps(n);if(i)return{x:a+c/2,y:l+d/2};switch((t==null?void 0:t.position)??e){case Et.Top:return{x:a+c/2,y:l};case Et.Right:return{x:a+c,y:l+d/2};case Et.Bottom:return{x:a+c/2,y:l+d};case Et.Left:return{x:a,y:l+d/2}}}function NS(n,t){return n&&(t?n.find(e=>e.id===t):n[0])||null}function My(n,t){return n?typeof n=="string"?n:`${t?`${t}__`:""}${Object.keys(n).sort().map(i=>`${i}=${n[i]}`).join("&")}`:""}function NI(n,{id:t,defaultColor:e,defaultMarkerStart:i,defaultMarkerEnd:a}){const l=new Set;return n.reduce((c,d)=>([d.markerStart||i,d.markerEnd||a].forEach(h=>{if(h&&typeof h=="object"){const g=My(h,t);l.has(g)||(c.push({id:g,color:h.color||e,...h}),l.add(g))}}),c),[]).sort((c,d)=>c.id.localeCompare(d.id))}const gp={nodeOrigin:[0,0],nodeExtent:ju,elevateNodesOnSelect:!0,defaults:{}},CI={...gp,checkEquality:!0};function mp(n,t){const e={...n};for(const i in t)t[i]!==void 0&&(e[i]=t[i]);return e}function DI(n,t,e){const i=mp(gp,e);for(const a of n.values())if(a.parentId)yp(a,n,t,i);else{const l=ic(a,i.nodeOrigin),c=sl(a.extent)?a.extent:i.nodeExtent,d=Ha(l,c,ps(a));a.internals.positionAbsolute=d}}function By(n,t,e,i){var h,g;const a=mp(CI,i);let l=n.length>0;const c=new Map(t),d=a!=null&&a.elevateNodesOnSelect?1e3:0;t.clear(),e.clear();for(const y of n){let w=c.get(y.id);if(a.checkEquality&&y===(w==null?void 0:w.internals.userNode))t.set(y.id,w);else{const v=ic(y,a.nodeOrigin),b=sl(y.extent)?y.extent:a.nodeExtent,x=Ha(v,b,ps(y));w={...a.defaults,...y,measured:{width:(h=y.measured)==null?void 0:h.width,height:(g=y.measured)==null?void 0:g.height},internals:{positionAbsolute:x,handleBounds:y.measured?w==null?void 0:w.internals.handleBounds:void 0,z:cT(y,d),userNode:y}},t.set(y.id,w)}(w.measured===void 0||w.measured.width===void 0||w.measured.height===void 0)&&!w.hidden&&(l=!1),y.parentId&&yp(w,t,e,i)}return l}function kI(n,t){if(!n.parentId)return;const e=t.get(n.parentId);e?e.set(n.id,n):t.set(n.parentId,new Map([[n.id,n]]))}function yp(n,t,e,i){const{elevateNodesOnSelect:a,nodeOrigin:l,nodeExtent:c}=mp(gp,i),d=n.parentId,h=t.get(d);if(!h){console.warn(`Parent node ${d} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}kI(n,e);const g=a?1e3:0,{x:y,y:w,z:v}=OI(n,h,l,c,g),{positionAbsolute:b}=n.internals,x=y!==b.x||w!==b.y;(x||v!==n.internals.z)&&t.set(n.id,{...n,internals:{...n.internals,positionAbsolute:x?{x:y,y:w}:b,z:v}})}function cT(n,t){return(er(n.zIndex)?n.zIndex:0)+(n.selected?t:0)}function OI(n,t,e,i,a){const{x:l,y:c}=t.internals.positionAbsolute,d=ps(n),h=ic(n,e),g=sl(n.extent)?Ha(h,n.extent,d):h;let y=Ha({x:l+g.x,y:c+g.y},i,d);n.extent==="parent"&&(y=Qx(y,d,t));const w=cT(n,a),v=t.internals.z??0;return{x:y.x,y:y.y,z:v>=w?v+1:w}}function pp(n,t,e,i=[0,0]){var c;const a=[],l=new Map;for(const d of n){const h=t.get(d.parentId);if(!h)continue;const g=((c=l.get(d.parentId))==null?void 0:c.expandedRect)??il(h),y=tT(g,d.rect);l.set(d.parentId,{expandedRect:y,parent:h})}return l.size>0&&l.forEach(({expandedRect:d,parent:h},g)=>{var N;const y=h.internals.positionAbsolute,w=ps(h),v=h.origin??i,b=d.x<y.x?Math.round(Math.abs(y.x-d.x)):0,x=d.y<y.y?Math.round(Math.abs(y.y-d.y)):0,A=Math.max(w.width,Math.round(d.width)),C=Math.max(w.height,Math.round(d.height)),k=(A-w.width)*v[0],L=(C-w.height)*v[1];(b>0||x>0||k||L)&&(a.push({id:g,type:"position",position:{x:h.position.x-b+k,y:h.position.y-x+L}}),(N=e.get(g))==null||N.forEach(I=>{n.some(B=>B.id===I.id)||a.push({id:I.id,type:"position",position:{x:I.position.x+b,y:I.position.y+x}})})),(w.width<d.width||w.height<d.height||b||x)&&a.push({id:g,type:"dimensions",setAttributes:!0,dimensions:{width:A+(b?v[0]*b-k:0),height:C+(x?v[1]*x-L:0)}})}),a}function II(n,t,e,i,a,l){const c=i==null?void 0:i.querySelector(".xyflow__viewport");let d=!1;if(!c)return{changes:[],updatedInternals:d};const h=[],g=window.getComputedStyle(c),{m22:y}=new window.DOMMatrixReadOnly(g.transform),w=[];for(const v of n.values()){const b=t.get(v.id);if(!b)continue;if(b.hidden){t.set(b.id,{...b,internals:{...b.internals,handleBounds:void 0}}),d=!0;continue}const x=hp(v.nodeElement),A=b.measured.width!==x.width||b.measured.height!==x.height;if(!!(x.width&&x.height&&(A||!b.internals.handleBounds||v.force))){const k=v.nodeElement.getBoundingClientRect(),L=sl(b.extent)?b.extent:l;let{positionAbsolute:N}=b.internals;b.parentId&&b.extent==="parent"?N=Qx(N,x,t.get(b.parentId)):L&&(N=Ha(N,L,x));const I={...b,measured:x,internals:{...b.internals,positionAbsolute:N,handleBounds:{source:bS("source",v.nodeElement,k,y,b.id),target:bS("target",v.nodeElement,k,y,b.id)}}};t.set(b.id,I),b.parentId&&yp(I,t,e,{nodeOrigin:a}),d=!0,A&&(h.push({id:b.id,type:"dimensions",dimensions:x}),b.expandParent&&b.parentId&&w.push({id:b.id,parentId:b.parentId,rect:il(I,a)}))}}if(w.length>0){const v=pp(w,t,e,a);h.push(...v)}return{changes:h,updatedInternals:d}}async function RI({delta:n,panZoom:t,transform:e,translateExtent:i,width:a,height:l}){if(!t||!n.x&&!n.y)return Promise.resolve(!1);const c=await t.setViewportConstrained({x:e[0]+n.x,y:e[1]+n.y,zoom:e[2]},[[0,0],[a,l]],i),d=!!c&&(c.x!==e[0]||c.y!==e[1]||c.k!==e[2]);return Promise.resolve(d)}function CS(n,t,e,i,a,l){let c=a;const d=i.get(c)||new Map;i.set(c,d.set(e,t)),c=`${a}-${n}`;const h=i.get(c)||new Map;if(i.set(c,h.set(e,t)),l){c=`${a}-${n}-${l}`;const g=i.get(c)||new Map;i.set(c,g.set(e,t))}}function fT(n,t,e){n.clear(),t.clear();for(const i of e){const{source:a,target:l,sourceHandle:c=null,targetHandle:d=null}=i,h={edgeId:i.id,source:a,target:l,sourceHandle:c,targetHandle:d},g=`${a}-${c}--${l}-${d}`,y=`${l}-${d}--${a}-${c}`;CS("source",h,y,n,a,c),CS("target",h,g,n,l,d),t.set(i.id,i)}}function dT(n,t){if(!n.parentId)return!1;const e=t.get(n.parentId);return e?e.selected?!0:dT(e,t):!1}function DS(n,t,e){var a;let i=n;do{if((a=i==null?void 0:i.matches)!=null&&a.call(i,t))return!0;if(i===e)return!1;i=i==null?void 0:i.parentElement}while(i);return!1}function MI(n,t,e,i){const a=new Map;for(const[l,c]of n)if((c.selected||c.id===i)&&(!c.parentId||!dT(c,n))&&(c.draggable||t&&typeof c.draggable>"u")){const d=n.get(l);d&&a.set(l,{id:l,position:d.position||{x:0,y:0},distance:{x:e.x-d.internals.positionAbsolute.x,y:e.y-d.internals.positionAbsolute.y},extent:d.extent,parentId:d.parentId,origin:d.origin,expandParent:d.expandParent,internals:{positionAbsolute:d.internals.positionAbsolute||{x:0,y:0}},measured:{width:d.measured.width??0,height:d.measured.height??0}})}return a}function Um({nodeId:n,dragItems:t,nodeLookup:e,dragging:i=!0}){var c,d,h;const a=[];for(const[g,y]of t){const w=(c=e.get(g))==null?void 0:c.internals.userNode;w&&a.push({...w,position:y.position,dragging:i})}if(!n)return[a[0],a];const l=(d=e.get(n))==null?void 0:d.internals.userNode;return[l?{...l,position:((h=t.get(n))==null?void 0:h.position)||l.position,dragging:i}:a[0],a]}function BI({onNodeMouseDown:n,getStoreItems:t,onDragStart:e,onDrag:i,onDragStop:a}){let l={x:null,y:null},c=0,d=new Map,h=!1,g={x:0,y:0},y=null,w=!1,v=null,b=!1,x=!1;function A({noDragClassName:k,handleSelector:L,domNode:N,isSelectable:I,nodeId:B,nodeClickDistance:_=0}){v=gn(N);function P({x:nt,y:it},ut){const{nodeLookup:R,nodeExtent:j,snapGrid:O,snapToGrid:z,nodeOrigin:G,onNodeDrag:J,onSelectionDrag:D,onError:U,updateNodePositions:Z}=t();l={x:nt,y:it};let rt=!1,ot={x:0,y:0,x2:0,y2:0};if(d.size>1&&j){const mt=sc(d);ot=Iy(mt)}for(const[mt,dt]of d){if(!R.has(mt))continue;let pt={x:nt-dt.distance.x,y:it-dt.distance.y};z&&(pt=nh(pt,O));let gt=[[j[0][0],j[0][1]],[j[1][0],j[1][1]]];if(d.size>1&&j&&!dt.extent){const{positionAbsolute:Mt}=dt.internals,Nt=Mt.x-ot.x+j[0][0],It=Mt.x+dt.measured.width-ot.x2+j[1][0],Dt=Mt.y-ot.y+j[0][1],Zt=Mt.y+dt.measured.height-ot.y2+j[1][1];gt=[[Nt,Dt],[It,Zt]]}const{position:bt,positionAbsolute:Jt}=Zx({nodeId:mt,nextPosition:pt,nodeLookup:R,nodeExtent:gt,nodeOrigin:G,onError:U});rt=rt||dt.position.x!==bt.x||dt.position.y!==bt.y,dt.position=bt,dt.internals.positionAbsolute=Jt}if(x=x||rt,!!rt&&(Z(d,!0),ut&&(i||J||!B&&D))){const[mt,dt]=Um({nodeId:B,dragItems:d,nodeLookup:R});i==null||i(ut,d,mt,dt),J==null||J(ut,mt,dt),B||D==null||D(ut,dt)}}async function V(){if(!y)return;const{transform:nt,panBy:it,autoPanSpeed:ut,autoPanOnNodeDrag:R}=t();if(!R){h=!1,cancelAnimationFrame(c);return}const[j,O]=Wx(g,y,ut);(j!==0||O!==0)&&(l.x=(l.x??0)-j/nt[2],l.y=(l.y??0)-O/nt[2],await it({x:j,y:O})&&P(l,null)),c=requestAnimationFrame(V)}function tt(nt){var rt;const{nodeLookup:it,multiSelectionActive:ut,nodesDraggable:R,transform:j,snapGrid:O,snapToGrid:z,selectNodesOnDrag:G,onNodeDragStart:J,onSelectionDragStart:D,unselectNodesAndEdges:U}=t();w=!0,(!G||!I)&&!ut&&B&&((rt=it.get(B))!=null&&rt.selected||U()),I&&G&&B&&(n==null||n(B));const Z=Ou(nt.sourceEvent,{transform:j,snapGrid:O,snapToGrid:z,containerBounds:y});if(l=Z,d=MI(it,R,Z,B),d.size>0&&(e||J||!B&&D)){const[ot,mt]=Um({nodeId:B,dragItems:d,nodeLookup:it});e==null||e(nt.sourceEvent,d,ot,mt),J==null||J(nt.sourceEvent,ot,mt),B||D==null||D(nt.sourceEvent,mt)}}const ft=Ox().clickDistance(_).on("start",nt=>{const{domNode:it,nodeDragThreshold:ut,transform:R,snapGrid:j,snapToGrid:O}=t();y=(it==null?void 0:it.getBoundingClientRect())||null,b=!1,x=!1,ut===0&&tt(nt),l=Ou(nt.sourceEvent,{transform:R,snapGrid:j,snapToGrid:O,containerBounds:y}),g=xr(nt.sourceEvent,y)}).on("drag",nt=>{const{autoPanOnNodeDrag:it,transform:ut,snapGrid:R,snapToGrid:j,nodeDragThreshold:O,nodeLookup:z}=t(),G=Ou(nt.sourceEvent,{transform:ut,snapGrid:R,snapToGrid:j,containerBounds:y});if((nt.sourceEvent.type==="touchmove"&&nt.sourceEvent.touches.length>1||B&&!z.has(B))&&(b=!0),!b){if(!h&&it&&w&&(h=!0,V()),!w){const J=G.xSnapped-(l.x??0),D=G.ySnapped-(l.y??0);Math.sqrt(J*J+D*D)>O&&tt(nt)}(l.x!==G.xSnapped||l.y!==G.ySnapped)&&d&&w&&(g=xr(nt.sourceEvent,y),P(G,nt.sourceEvent))}}).on("end",nt=>{if(!(!w||b)&&(h=!1,w=!1,cancelAnimationFrame(c),d.size>0)){const{nodeLookup:it,updateNodePositions:ut,onNodeDragStop:R,onSelectionDragStop:j}=t();if(x&&(ut(d,!1),x=!1),a||R||!B&&j){const[O,z]=Um({nodeId:B,dragItems:d,nodeLookup:it,dragging:!1});a==null||a(nt.sourceEvent,d,O,z),R==null||R(nt.sourceEvent,O,z),B||j==null||j(nt.sourceEvent,z)}}}).filter(nt=>{const it=nt.target;return!nt.button&&(!k||!DS(it,`.${k}`,N))&&(!L||DS(it,L,N))});v.call(ft)}function C(){v==null||v.on(".drag",null)}return{update:A,destroy:C}}function zI(n,t,e){const i=[],a={x:n.x-e,y:n.y-e,width:e*2,height:e*2};for(const l of t.values())Gu(a,il(l))>0&&i.push(l);return i}const LI=250;function _I(n,t,e,i){var d,h;let a=[],l=1/0;const c=zI(n,e,t+LI);for(const g of c){const y=[...((d=g.internals.handleBounds)==null?void 0:d.source)??[],...((h=g.internals.handleBounds)==null?void 0:h.target)??[]];for(const w of y){if(i.nodeId===w.nodeId&&i.type===w.type&&i.id===w.id)continue;const{x:v,y:b}=Ku(g,w,w.position,!0),x=Math.sqrt(Math.pow(v-n.x,2)+Math.pow(b-n.y,2));x>t||(x<l?(a=[{...w,x:v,y:b}],l=x):x===l&&a.push({...w,x:v,y:b}))}}if(!a.length)return null;if(a.length>1){const g=i.type==="source"?"target":"source";return a.find(y=>y.type===g)??a[0]}return a[0]}function hT(n,t,e,i,a,l=!1){var g,y,w;const c=i.get(n);if(!c)return null;const d=a==="strict"?(g=c.internals.handleBounds)==null?void 0:g[t]:[...((y=c.internals.handleBounds)==null?void 0:y.source)??[],...((w=c.internals.handleBounds)==null?void 0:w.target)??[]],h=(e?d==null?void 0:d.find(v=>v.id===e):d==null?void 0:d[0])??null;return h&&l?{...h,...Ku(c,h,h.position,!0)}:h}function gT(n,t){return n||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function UI(n,t){let e=null;return t?e=!0:n&&!t&&(e=!1),e}const mT=()=>!0;function qI(n,{connectionMode:t,connectionRadius:e,handleId:i,nodeId:a,edgeUpdaterType:l,isTarget:c,domNode:d,nodeLookup:h,lib:g,autoPanOnConnect:y,flowId:w,panBy:v,cancelConnection:b,onConnectStart:x,onConnect:A,onConnectEnd:C,isValidConnection:k=mT,onReconnectEnd:L,updateConnection:N,getTransform:I,getFromHandle:B,autoPanSpeed:_,dragThreshold:P=1}){const V=rT(n.target);let tt=0,ft;const{x:nt,y:it}=xr(n),ut=V==null?void 0:V.elementFromPoint(nt,it),R=gT(l,ut),j=d==null?void 0:d.getBoundingClientRect();let O=!1;if(!j||!R)return;const z=hT(a,R,i,h,t);if(!z)return;let G=xr(n,j),J=!1,D=null,U=!1,Z=null;function rt(){if(!y||!j)return;const[Mt,Nt]=Wx(G,j,_);v({x:Mt,y:Nt}),tt=requestAnimationFrame(rt)}const ot={...z,nodeId:a,type:R,position:z.position},mt=h.get(a);let pt={inProgress:!0,isValid:null,from:Ku(mt,ot,Et.Left,!0),fromHandle:ot,fromPosition:ot.position,fromNode:mt,to:G,toHandle:null,toPosition:yS[ot.position],toNode:null};function gt(){O=!0,N(pt),x==null||x(n,{nodeId:a,handleId:i,handleType:R})}P===0&&gt();function bt(Mt){if(!O){const{x:Zt,y:le}=xr(Mt),be=Zt-nt,vs=le-it;if(!(be*be+vs*vs>P*P))return;gt()}if(!B()||!ot){Jt(Mt);return}const Nt=I();G=xr(Mt,j),ft=_I(ac(G,Nt,!1,[1,1]),e,h,ot),J||(rt(),J=!0);const It=yT(Mt,{handle:ft,connectionMode:t,fromNodeId:a,fromHandleId:i,fromType:c?"target":"source",isValidConnection:k,doc:V,lib:g,flowId:w,nodeLookup:h});Z=It.handleDomNode,D=It.connection,U=UI(!!ft,It.isValid);const Dt={...pt,isValid:U,to:It.toHandle&&U?Ld({x:It.toHandle.x,y:It.toHandle.y},Nt):G,toHandle:It.toHandle,toPosition:U&&It.toHandle?It.toHandle.position:yS[ot.position],toNode:It.toHandle?h.get(It.toHandle.nodeId):null};U&&ft&&pt.toHandle&&Dt.toHandle&&pt.toHandle.type===Dt.toHandle.type&&pt.toHandle.nodeId===Dt.toHandle.nodeId&&pt.toHandle.id===Dt.toHandle.id&&pt.to.x===Dt.to.x&&pt.to.y===Dt.to.y||(N(Dt),pt=Dt)}function Jt(Mt){if(O){(ft||Z)&&D&&U&&(A==null||A(D));const{inProgress:Nt,...It}=pt,Dt={...It,toPosition:pt.toHandle?pt.toPosition:null};C==null||C(Mt,Dt),l&&(L==null||L(Mt,Dt))}b(),cancelAnimationFrame(tt),J=!1,U=!1,D=null,Z=null,V.removeEventListener("mousemove",bt),V.removeEventListener("mouseup",Jt),V.removeEventListener("touchmove",bt),V.removeEventListener("touchend",Jt)}V.addEventListener("mousemove",bt),V.addEventListener("mouseup",Jt),V.addEventListener("touchmove",bt),V.addEventListener("touchend",Jt)}function yT(n,{handle:t,connectionMode:e,fromNodeId:i,fromHandleId:a,fromType:l,doc:c,lib:d,flowId:h,isValidConnection:g=mT,nodeLookup:y}){const w=l==="target",v=t?c.querySelector(`.${d}-flow__handle[data-id="${h}-${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`):null,{x:b,y:x}=xr(n),A=c.elementFromPoint(b,x),C=A!=null&&A.classList.contains(`${d}-flow__handle`)?A:v,k={handleDomNode:C,isValid:!1,connection:null,toHandle:null};if(C){const L=gT(void 0,C),N=C.getAttribute("data-nodeid"),I=C.getAttribute("data-handleid"),B=C.classList.contains("connectable"),_=C.classList.contains("connectableend");if(!N||!L)return k;const P={source:w?N:i,sourceHandle:w?I:a,target:w?i:N,targetHandle:w?a:I};k.connection=P;const tt=B&&_&&(e===nl.Strict?w&&L==="source"||!w&&L==="target":N!==i||I!==a);k.isValid=tt&&g(P),k.toHandle=hT(N,L,I,y,e,!0)}return k}const zy={onPointerDown:qI,isValid:yT};function PI({domNode:n,panZoom:t,getTransform:e,getViewScale:i}){const a=gn(n);function l({translateExtent:d,width:h,height:g,zoomStep:y=10,pannable:w=!0,zoomable:v=!0,inversePan:b=!1}){const x=N=>{const I=e();if(N.sourceEvent.type!=="wheel"||!t)return;const B=-N.sourceEvent.deltaY*(N.sourceEvent.deltaMode===1?.05:N.sourceEvent.deltaMode?1:.002)*y,_=I[2]*Math.pow(2,B);t.scaleTo(_)};let A=[0,0];const C=N=>{(N.sourceEvent.type==="mousedown"||N.sourceEvent.type==="touchstart")&&(A=[N.sourceEvent.clientX??N.sourceEvent.touches[0].clientX,N.sourceEvent.clientY??N.sourceEvent.touches[0].clientY])},k=N=>{const I=e();if(N.sourceEvent.type!=="mousemove"&&N.sourceEvent.type!=="touchmove"||!t)return;const B=[N.sourceEvent.clientX??N.sourceEvent.touches[0].clientX,N.sourceEvent.clientY??N.sourceEvent.touches[0].clientY],_=[B[0]-A[0],B[1]-A[1]];A=B;const P=i()*Math.max(I[2],Math.log(I[2]))*(b?-1:1),V={x:I[0]-_[0]*P,y:I[1]-_[1]*P},tt=[[0,0],[h,g]];t.setViewportConstrained({x:V.x,y:V.y,zoom:I[2]},tt,d)},L=jx().on("start",C).on("zoom",w?k:null).on("zoom.wheel",v?x:null);a.call(L,{})}function c(){a.on("zoom",null)}return{update:l,destroy:c,pointer:Zn}}const JI=(n,t)=>n.x!==t.x||n.y!==t.y||n.zoom!==t.k,rh=n=>({x:n.x,y:n.y,zoom:n.k}),qm=({x:n,y:t,zoom:e})=>Wd.translate(n,t).scale(e),_o=(n,t)=>n.target.closest(`.${t}`),pT=(n,t)=>t===2&&Array.isArray(n)&&n.includes(2),HI=n=>((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2,Pm=(n,t=0,e=HI,i=()=>{})=>{const a=typeof t=="number"&&t>0;return a||i(),a?n.transition().duration(t).ease(e).on("end",i):n},vT=n=>{const t=n.ctrlKey&&_d()?10:1;return-n.deltaY*(n.deltaMode===1?.05:n.deltaMode?1:.002)*t};function $I({zoomPanValues:n,noWheelClassName:t,d3Selection:e,d3Zoom:i,panOnScrollMode:a,panOnScrollSpeed:l,zoomOnPinch:c,onPanZoomStart:d,onPanZoom:h,onPanZoomEnd:g}){return y=>{if(_o(y,t))return!1;y.preventDefault(),y.stopImmediatePropagation();const w=e.property("__zoom").k||1;if(y.ctrlKey&&c){const C=Zn(y),k=vT(y),L=w*Math.pow(2,k);i.scaleTo(e,L,C,y);return}const v=y.deltaMode===1?20:1;let b=a===za.Vertical?0:y.deltaX*v,x=a===za.Horizontal?0:y.deltaY*v;!_d()&&y.shiftKey&&a!==za.Vertical&&(b=y.deltaY*v,x=0),i.translateBy(e,-(b/w)*l,-(x/w)*l,{internal:!0});const A=rh(e.property("__zoom"));clearTimeout(n.panScrollTimeout),n.isPanScrolling||(n.isPanScrolling=!0,d==null||d(y,A)),n.isPanScrolling&&(h==null||h(y,A),n.panScrollTimeout=setTimeout(()=>{g==null||g(y,A),n.isPanScrolling=!1},150))}}function VI({noWheelClassName:n,preventScrolling:t,d3ZoomHandler:e}){return function(i,a){const l=i.type==="wheel",c=!t&&l&&!i.ctrlKey,d=_o(i,n);if(i.ctrlKey&&l&&d&&i.preventDefault(),c||d)return null;i.preventDefault(),e.call(this,i,a)}}function jI({zoomPanValues:n,onDraggingChange:t,onPanZoomStart:e}){return i=>{var l,c,d;if((l=i.sourceEvent)!=null&&l.internal)return;const a=rh(i.transform);n.mouseButton=((c=i.sourceEvent)==null?void 0:c.button)||0,n.isZoomingOrPanning=!0,n.prevViewport=a,((d=i.sourceEvent)==null?void 0:d.type)==="mousedown"&&t(!0),e&&(e==null||e(i.sourceEvent,a))}}function YI({zoomPanValues:n,panOnDrag:t,onPaneContextMenu:e,onTransformChange:i,onPanZoom:a}){return l=>{var c,d;n.usedRightMouseButton=!!(e&&pT(t,n.mouseButton??0)),(c=l.sourceEvent)!=null&&c.sync||i([l.transform.x,l.transform.y,l.transform.k]),a&&!((d=l.sourceEvent)!=null&&d.internal)&&(a==null||a(l.sourceEvent,rh(l.transform)))}}function GI({zoomPanValues:n,panOnDrag:t,panOnScroll:e,onDraggingChange:i,onPanZoomEnd:a,onPaneContextMenu:l}){return c=>{var d;if(!((d=c.sourceEvent)!=null&&d.internal)&&(n.isZoomingOrPanning=!1,l&&pT(t,n.mouseButton??0)&&!n.usedRightMouseButton&&c.sourceEvent&&l(c.sourceEvent),n.usedRightMouseButton=!1,i(!1),a&&JI(n.prevViewport,c.transform))){const h=rh(c.transform);n.prevViewport=h,clearTimeout(n.timerId),n.timerId=setTimeout(()=>{a==null||a(c.sourceEvent,h)},e?150:0)}}}function KI({zoomActivationKeyPressed:n,zoomOnScroll:t,zoomOnPinch:e,panOnDrag:i,panOnScroll:a,zoomOnDoubleClick:l,userSelectionActive:c,noWheelClassName:d,noPanClassName:h,lib:g}){return y=>{var x;const w=n||t,v=e&&y.ctrlKey;if(y.button===1&&y.type==="mousedown"&&(_o(y,`${g}-flow__node`)||_o(y,`${g}-flow__edge`)))return!0;if(!i&&!w&&!a&&!l&&!e||c||_o(y,d)&&y.type==="wheel"||_o(y,h)&&(y.type!=="wheel"||a&&y.type==="wheel"&&!n)||!e&&y.ctrlKey&&y.type==="wheel")return!1;if(!e&&y.type==="touchstart"&&((x=y.touches)==null?void 0:x.length)>1)return y.preventDefault(),!1;if(!w&&!a&&!v&&y.type==="wheel"||!i&&(y.type==="mousedown"||y.type==="touchstart")||Array.isArray(i)&&!i.includes(y.button)&&y.type==="mousedown")return!1;const b=Array.isArray(i)&&i.includes(y.button)||!y.button||y.button<=1;return(!y.ctrlKey||y.type==="wheel")&&b}}function XI({domNode:n,minZoom:t,maxZoom:e,paneClickDistance:i,translateExtent:a,viewport:l,onPanZoom:c,onPanZoomStart:d,onPanZoomEnd:h,onDraggingChange:g}){const y={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},w=n.getBoundingClientRect(),v=jx().clickDistance(!er(i)||i<0?0:i).scaleExtent([t,e]).translateExtent(a),b=gn(n).call(v);N({x:l.x,y:l.y,zoom:rl(l.zoom,t,e)},[[0,0],[w.width,w.height]],a);const x=b.on("wheel.zoom"),A=b.on("dblclick.zoom");v.wheelDelta(vT);function C(it,ut){return b?new Promise(R=>{v==null||v.interpolate((ut==null?void 0:ut.interpolate)==="linear"?ku:Ff).transform(Pm(b,ut==null?void 0:ut.duration,ut==null?void 0:ut.ease,()=>R(!0)),it)}):Promise.resolve(!1)}function k({noWheelClassName:it,noPanClassName:ut,onPaneContextMenu:R,userSelectionActive:j,panOnScroll:O,panOnDrag:z,panOnScrollMode:G,panOnScrollSpeed:J,preventScrolling:D,zoomOnPinch:U,zoomOnScroll:Z,zoomOnDoubleClick:rt,zoomActivationKeyPressed:ot,lib:mt,onTransformChange:dt}){j&&!y.isZoomingOrPanning&&L();const gt=O&&!ot&&!j?$I({zoomPanValues:y,noWheelClassName:it,d3Selection:b,d3Zoom:v,panOnScrollMode:G,panOnScrollSpeed:J,zoomOnPinch:U,onPanZoomStart:d,onPanZoom:c,onPanZoomEnd:h}):VI({noWheelClassName:it,preventScrolling:D,d3ZoomHandler:x});if(b.on("wheel.zoom",gt,{passive:!1}),!j){const Jt=jI({zoomPanValues:y,onDraggingChange:g,onPanZoomStart:d});v.on("start",Jt);const Mt=YI({zoomPanValues:y,panOnDrag:z,onPaneContextMenu:!!R,onPanZoom:c,onTransformChange:dt});v.on("zoom",Mt);const Nt=GI({zoomPanValues:y,panOnDrag:z,panOnScroll:O,onPaneContextMenu:R,onPanZoomEnd:h,onDraggingChange:g});v.on("end",Nt)}const bt=KI({zoomActivationKeyPressed:ot,panOnDrag:z,zoomOnScroll:Z,panOnScroll:O,zoomOnDoubleClick:rt,zoomOnPinch:U,userSelectionActive:j,noPanClassName:ut,noWheelClassName:it,lib:mt});v.filter(bt),rt?b.on("dblclick.zoom",A):b.on("dblclick.zoom",null)}function L(){v.on("zoom",null)}async function N(it,ut,R){const j=qm(it),O=v==null?void 0:v.constrain()(j,ut,R);return O&&await C(O),new Promise(z=>z(O))}async function I(it,ut){const R=qm(it);return await C(R,ut),new Promise(j=>j(R))}function B(it){if(b){const ut=qm(it),R=b.property("__zoom");(R.k!==it.zoom||R.x!==it.x||R.y!==it.y)&&(v==null||v.transform(b,ut,null,{sync:!0}))}}function _(){const it=b?Vx(b.node()):{x:0,y:0,k:1};return{x:it.x,y:it.y,zoom:it.k}}function P(it,ut){return b?new Promise(R=>{v==null||v.interpolate((ut==null?void 0:ut.interpolate)==="linear"?ku:Ff).scaleTo(Pm(b,ut==null?void 0:ut.duration,ut==null?void 0:ut.ease,()=>R(!0)),it)}):Promise.resolve(!1)}function V(it,ut){return b?new Promise(R=>{v==null||v.interpolate((ut==null?void 0:ut.interpolate)==="linear"?ku:Ff).scaleBy(Pm(b,ut==null?void 0:ut.duration,ut==null?void 0:ut.ease,()=>R(!0)),it)}):Promise.resolve(!1)}function tt(it){v==null||v.scaleExtent(it)}function ft(it){v==null||v.translateExtent(it)}function nt(it){const ut=!er(it)||it<0?0:it;v==null||v.clickDistance(ut)}return{update:k,destroy:L,setViewport:I,setViewportConstrained:N,getViewport:_,scaleTo:P,scaleBy:V,setScaleExtent:tt,setTranslateExtent:ft,syncViewport:B,setClickDistance:nt}}var al;(function(n){n.Line="line",n.Handle="handle"})(al||(al={}));function FI({width:n,prevWidth:t,height:e,prevHeight:i,affectsX:a,affectsY:l}){const c=n-t,d=e-i,h=[c>0?1:c<0?-1:0,d>0?1:d<0?-1:0];return c&&a&&(h[0]=h[0]*-1),d&&l&&(h[1]=h[1]*-1),h}function ZI(n){const t=n.includes("right")||n.includes("left"),e=n.includes("bottom")||n.includes("top"),i=n.includes("left"),a=n.includes("top");return{isHorizontal:t,isVertical:e,affectsX:i,affectsY:a}}function Ks(n,t){return Math.max(0,t-n)}function Xs(n,t){return Math.max(0,n-t)}function qf(n,t,e){return Math.max(0,t-n,n-e)}function kS(n,t){return n?!t:t}function QI(n,t,e,i,a,l,c,d){let{affectsX:h,affectsY:g}=t;const{isHorizontal:y,isVertical:w}=t,v=y&&w,{xSnapped:b,ySnapped:x}=e,{minWidth:A,maxWidth:C,minHeight:k,maxHeight:L}=i,{x:N,y:I,width:B,height:_,aspectRatio:P}=n;let V=Math.floor(y?b-n.pointerX:0),tt=Math.floor(w?x-n.pointerY:0);const ft=B+(h?-V:V),nt=_+(g?-tt:tt),it=-l[0]*B,ut=-l[1]*_;let R=qf(ft,A,C),j=qf(nt,k,L);if(c){let G=0,J=0;h&&V<0?G=Ks(N+V+it,c[0][0]):!h&&V>0&&(G=Xs(N+ft+it,c[1][0])),g&&tt<0?J=Ks(I+tt+ut,c[0][1]):!g&&tt>0&&(J=Xs(I+nt+ut,c[1][1])),R=Math.max(R,G),j=Math.max(j,J)}if(d){let G=0,J=0;h&&V>0?G=Xs(N+V,d[0][0]):!h&&V<0&&(G=Ks(N+ft,d[1][0])),g&&tt>0?J=Xs(I+tt,d[0][1]):!g&&tt<0&&(J=Ks(I+nt,d[1][1])),R=Math.max(R,G),j=Math.max(j,J)}if(a){if(y){const G=qf(ft/P,k,L)*P;if(R=Math.max(R,G),c){let J=0;!h&&!g||h&&!g&&v?J=Xs(I+ut+ft/P,c[1][1])*P:J=Ks(I+ut+(h?V:-V)/P,c[0][1])*P,R=Math.max(R,J)}if(d){let J=0;!h&&!g||h&&!g&&v?J=Ks(I+ft/P,d[1][1])*P:J=Xs(I+(h?V:-V)/P,d[0][1])*P,R=Math.max(R,J)}}if(w){const G=qf(nt*P,A,C)/P;if(j=Math.max(j,G),c){let J=0;!h&&!g||g&&!h&&v?J=Xs(N+nt*P+it,c[1][0])/P:J=Ks(N+(g?tt:-tt)*P+it,c[0][0])/P,j=Math.max(j,J)}if(d){let J=0;!h&&!g||g&&!h&&v?J=Ks(N+nt*P,d[1][0])/P:J=Xs(N+(g?tt:-tt)*P,d[0][0])/P,j=Math.max(j,J)}}}tt=tt+(tt<0?j:-j),V=V+(V<0?R:-R),a&&(v?ft>nt*P?tt=(kS(h,g)?-V:V)/P:V=(kS(h,g)?-tt:tt)*P:y?(tt=V/P,g=h):(V=tt*P,h=g));const O=h?N+V:N,z=g?I+tt:I;return{width:B+(h?-V:V),height:_+(g?-tt:tt),x:l[0]*V*(h?-1:1)+O,y:l[1]*tt*(g?-1:1)+z}}const wT={width:0,height:0,x:0,y:0},WI={...wT,pointerX:0,pointerY:0,aspectRatio:1};function tR(n){return[[0,0],[n.measured.width,n.measured.height]]}function eR(n,t,e){const i=t.position.x+n.position.x,a=t.position.y+n.position.y,l=n.measured.width??0,c=n.measured.height??0,d=e[0]*l,h=e[1]*c;return[[i-d,a-h],[i+l-d,a+c-h]]}function nR({domNode:n,nodeId:t,getStoreItems:e,onChange:i,onEnd:a}){const l=gn(n);function c({controlPosition:h,boundaries:g,keepAspectRatio:y,resizeDirection:w,onResizeStart:v,onResize:b,onResizeEnd:x,shouldResize:A}){let C={...wT},k={...WI};const L=ZI(h);let N,I=null,B=[],_,P,V;const tt=Ox().on("start",ft=>{const{nodeLookup:nt,transform:it,snapGrid:ut,snapToGrid:R,nodeOrigin:j,paneDomNode:O}=e();if(N=nt.get(t),!N)return;I=(O==null?void 0:O.getBoundingClientRect())??null;const{xSnapped:z,ySnapped:G}=Ou(ft.sourceEvent,{transform:it,snapGrid:ut,snapToGrid:R,containerBounds:I});C={width:N.measured.width??0,height:N.measured.height??0,x:N.position.x??0,y:N.position.y??0},k={...C,pointerX:z,pointerY:G,aspectRatio:C.width/C.height},_=void 0,N.parentId&&(N.extent==="parent"||N.expandParent)&&(_=nt.get(N.parentId),P=_&&N.extent==="parent"?tR(_):void 0),B=[],V=void 0;for(const[J,D]of nt)if(D.parentId===t&&(B.push({id:J,position:{...D.position},extent:D.extent}),D.extent==="parent"||D.expandParent)){const U=eR(D,N,D.origin??j);V?V=[[Math.min(U[0][0],V[0][0]),Math.min(U[0][1],V[0][1])],[Math.max(U[1][0],V[1][0]),Math.max(U[1][1],V[1][1])]]:V=U}v==null||v(ft,{...C})}).on("drag",ft=>{const{transform:nt,snapGrid:it,snapToGrid:ut,nodeOrigin:R}=e(),j=Ou(ft.sourceEvent,{transform:nt,snapGrid:it,snapToGrid:ut,containerBounds:I}),O=[];if(!N)return;const{x:z,y:G,width:J,height:D}=C,U={},Z=N.origin??R,{width:rt,height:ot,x:mt,y:dt}=QI(k,L,j,g,y,Z,P,V),pt=rt!==J,gt=ot!==D,bt=mt!==z&&pt,Jt=dt!==G&&gt;if(!bt&&!Jt&&!pt&&!gt)return;if((bt||Jt||Z[0]===1||Z[1]===1)&&(U.x=bt?mt:C.x,U.y=Jt?dt:C.y,C.x=U.x,C.y=U.y,B.length>0)){const Dt=mt-z,Zt=dt-G;for(const le of B)le.position={x:le.position.x-Dt+Z[0]*(rt-J),y:le.position.y-Zt+Z[1]*(ot-D)},O.push(le)}if((pt||gt)&&(U.width=pt&&(!w||w==="horizontal")?rt:C.width,U.height=gt&&(!w||w==="vertical")?ot:C.height,C.width=U.width,C.height=U.height),_&&N.expandParent){const Dt=Z[0]*(U.width??0);U.x&&U.x<Dt&&(C.x=Dt,k.x=k.x-(U.x-Dt));const Zt=Z[1]*(U.height??0);U.y&&U.y<Zt&&(C.y=Zt,k.y=k.y-(U.y-Zt))}const Mt=FI({width:C.width,prevWidth:J,height:C.height,prevHeight:D,affectsX:L.affectsX,affectsY:L.affectsY}),Nt={...C,direction:Mt};(A==null?void 0:A(ft,Nt))!==!1&&(b==null||b(ft,Nt),i(U,O))}).on("end",ft=>{x==null||x(ft,{...C}),a==null||a({...C})});l.call(tt)}function d(){l.on(".drag",null)}return{update:c,destroy:d}}var Jm={exports:{}},Hm={},$m={exports:{}},Vm={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OS;function rR(){if(OS)return Vm;OS=1;var n=Fu();function t(w,v){return w===v&&(w!==0||1/w===1/v)||w!==w&&v!==v}var e=typeof Object.is=="function"?Object.is:t,i=n.useState,a=n.useEffect,l=n.useLayoutEffect,c=n.useDebugValue;function d(w,v){var b=v(),x=i({inst:{value:b,getSnapshot:v}}),A=x[0].inst,C=x[1];return l(function(){A.value=b,A.getSnapshot=v,h(A)&&C({inst:A})},[w,b,v]),a(function(){return h(A)&&C({inst:A}),w(function(){h(A)&&C({inst:A})})},[w]),c(b),b}function h(w){var v=w.getSnapshot;w=w.value;try{var b=v();return!e(w,b)}catch{return!0}}function g(w,v){return v()}var y=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?g:d;return Vm.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:y,Vm}var IS;function iR(){return IS||(IS=1,$m.exports=rR()),$m.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RS;function sR(){if(RS)return Hm;RS=1;var n=Fu(),t=iR();function e(g,y){return g===y&&(g!==0||1/g===1/y)||g!==g&&y!==y}var i=typeof Object.is=="function"?Object.is:e,a=t.useSyncExternalStore,l=n.useRef,c=n.useEffect,d=n.useMemo,h=n.useDebugValue;return Hm.useSyncExternalStoreWithSelector=function(g,y,w,v,b){var x=l(null);if(x.current===null){var A={hasValue:!1,value:null};x.current=A}else A=x.current;x=d(function(){function k(_){if(!L){if(L=!0,N=_,_=v(_),b!==void 0&&A.hasValue){var P=A.value;if(b(P,_))return I=P}return I=_}if(P=I,i(N,_))return P;var V=v(_);return b!==void 0&&b(P,V)?(N=_,P):(N=_,I=V)}var L=!1,N,I,B=w===void 0?null:w;return[function(){return k(y())},B===null?void 0:function(){return k(B())}]},[y,w,v,b]);var C=a(g,x[0],x[1]);return c(function(){A.hasValue=!0,A.value=C},[C]),h(C),C},Hm}var MS;function aR(){return MS||(MS=1,Jm.exports=sR()),Jm.exports}var oR=aR();const lR=i1(oR),uR={},BS=n=>{let t;const e=new Set,i=(y,w)=>{const v=typeof y=="function"?y(t):y;if(!Object.is(v,t)){const b=t;t=w??(typeof v!="object"||v===null)?v:Object.assign({},t,v),e.forEach(x=>x(t,b))}},a=()=>t,h={setState:i,getState:a,getInitialState:()=>g,subscribe:y=>(e.add(y),()=>e.delete(y)),destroy:()=>{(uR?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),e.clear()}},g=t=n(i,a,h);return h},cR=n=>n?BS(n):BS,{useDebugValue:fR}=yD,{useSyncExternalStoreWithSelector:dR}=lR,hR=n=>n;function bT(n,t=hR,e){const i=dR(n.subscribe,n.getState,n.getServerState||n.getInitialState,t,e);return fR(i),i}const zS=(n,t)=>{const e=cR(n),i=(a,l=t)=>bT(e,a,l);return Object.assign(i,e),i},gR=(n,t)=>n?zS(n,t):zS;function fe(n,t){if(Object.is(n,t))return!0;if(typeof n!="object"||n===null||typeof t!="object"||t===null)return!1;if(n instanceof Map&&t instanceof Map){if(n.size!==t.size)return!1;for(const[i,a]of n)if(!Object.is(a,t.get(i)))return!1;return!0}if(n instanceof Set&&t instanceof Set){if(n.size!==t.size)return!1;for(const i of n)if(!t.has(i))return!1;return!0}const e=Object.keys(n);if(e.length!==Object.keys(t).length)return!1;for(const i of e)if(!Object.prototype.hasOwnProperty.call(t,i)||!Object.is(n[i],t[i]))return!1;return!0}s1();const ih=et.createContext(null),mR=ih.Provider,ST=kr.error001();function $t(n,t){const e=et.useContext(ih);if(e===null)throw new Error(ST);return bT(e,n,t)}function oe(){const n=et.useContext(ih);if(n===null)throw new Error(ST);return et.useMemo(()=>({getState:n.getState,setState:n.setState,subscribe:n.subscribe}),[n])}const LS={display:"none"},yR={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},xT="react-flow__node-desc",TT="react-flow__edge-desc",pR="react-flow__aria-live",vR=n=>n.ariaLiveMessage,wR=n=>n.ariaLabelConfig;function bR({rfId:n}){const t=$t(vR);return W.jsx("div",{id:`${pR}-${n}`,"aria-live":"assertive","aria-atomic":"true",style:yR,children:t})}function SR({rfId:n,disableKeyboardA11y:t}){const e=$t(wR);return W.jsxs(W.Fragment,{children:[W.jsx("div",{id:`${xT}-${n}`,style:LS,children:t?e["node.a11yDescription.default"]:e["node.a11yDescription.keyboardDisabled"]}),W.jsx("div",{id:`${TT}-${n}`,style:LS,children:e["edge.a11yDescription.default"]}),!t&&W.jsx(bR,{rfId:n})]})}const sh=et.forwardRef(({position:n="top-left",children:t,className:e,style:i,...a},l)=>{const c=`${n}`.split("-");return W.jsx("div",{className:Ae(["react-flow__panel",e,...c]),style:i,ref:l,...a,children:t})});sh.displayName="Panel";function xR({proOptions:n,position:t="bottom-right"}){return n!=null&&n.hideAttribution?null:W.jsx(sh,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:W.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const TR=n=>{const t=[],e=[];for(const[,i]of n.nodeLookup)i.selected&&t.push(i.internals.userNode);for(const[,i]of n.edgeLookup)i.selected&&e.push(i);return{selectedNodes:t,selectedEdges:e}},Pf=n=>n.id;function AR(n,t){return fe(n.selectedNodes.map(Pf),t.selectedNodes.map(Pf))&&fe(n.selectedEdges.map(Pf),t.selectedEdges.map(Pf))}function ER({onSelectionChange:n}){const t=oe(),{selectedNodes:e,selectedEdges:i}=$t(TR,AR);return et.useEffect(()=>{const a={nodes:e,edges:i};n==null||n(a),t.getState().onSelectionChangeHandlers.forEach(l=>l(a))},[e,i,n]),null}const NR=n=>!!n.onSelectionChangeHandlers;function CR({onSelectionChange:n}){const t=$t(NR);return n||t?W.jsx(ER,{onSelectionChange:n}):null}const AT=[0,0],DR={x:0,y:0,zoom:1},kR=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","paneClickDistance","ariaLabelConfig"],_S=[...kR,"rfId"],OR=n=>({setNodes:n.setNodes,setEdges:n.setEdges,setMinZoom:n.setMinZoom,setMaxZoom:n.setMaxZoom,setTranslateExtent:n.setTranslateExtent,setNodeExtent:n.setNodeExtent,reset:n.reset,setDefaultNodesAndEdges:n.setDefaultNodesAndEdges,setPaneClickDistance:n.setPaneClickDistance}),US={translateExtent:ju,nodeOrigin:AT,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1",paneClickDistance:0};function IR(n){const{setNodes:t,setEdges:e,setMinZoom:i,setMaxZoom:a,setTranslateExtent:l,setNodeExtent:c,reset:d,setDefaultNodesAndEdges:h,setPaneClickDistance:g}=$t(OR,fe),y=oe();et.useEffect(()=>(h(n.defaultNodes,n.defaultEdges),()=>{w.current=US,d()}),[]);const w=et.useRef(US);return et.useEffect(()=>{for(const v of _S){const b=n[v],x=w.current[v];b!==x&&(typeof n[v]>"u"||(v==="nodes"?t(b):v==="edges"?e(b):v==="minZoom"?i(b):v==="maxZoom"?a(b):v==="translateExtent"?l(b):v==="nodeExtent"?c(b):v==="paneClickDistance"?g(b):v==="ariaLabelConfig"?y.setState({ariaLabelConfig:mI(b)}):v==="fitView"?y.setState({fitViewQueued:b}):v==="fitViewOptions"?y.setState({fitViewOptions:b}):y.setState({[v]:b})))}w.current=n},_S.map(v=>n[v])),null}function qS(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function RR(n){var i;const[t,e]=et.useState(n==="system"?null:n);return et.useEffect(()=>{if(n!=="system"){e(n);return}const a=qS(),l=()=>e(a!=null&&a.matches?"dark":"light");return l(),a==null||a.addEventListener("change",l),()=>{a==null||a.removeEventListener("change",l)}},[n]),t!==null?t:(i=qS())!=null&&i.matches?"dark":"light"}const PS=typeof document<"u"?document:null;function Xu(n=null,t={target:PS,actInsideInputWithModifier:!0}){const[e,i]=et.useState(!1),a=et.useRef(!1),l=et.useRef(new Set([])),[c,d]=et.useMemo(()=>{if(n!==null){const g=(Array.isArray(n)?n:[n]).filter(w=>typeof w=="string").map(w=>w.replace("+",`
`).replace(`

`,`
+`).split(`
`)),y=g.reduce((w,v)=>w.concat(...v),[]);return[g,y]}return[[],[]]},[n]);return et.useEffect(()=>{const h=(t==null?void 0:t.target)??PS,g=(t==null?void 0:t.actInsideInputWithModifier)??!0;if(n!==null){const y=b=>{var C,k;if(a.current=b.ctrlKey||b.metaKey||b.shiftKey||b.altKey,(!a.current||a.current&&!g)&&iT(b))return!1;const A=HS(b.code,d);if(l.current.add(b[A]),JS(c,l.current,!1)){const L=((k=(C=b.composedPath)==null?void 0:C.call(b))==null?void 0:k[0])||b.target,N=(L==null?void 0:L.nodeName)==="BUTTON"||(L==null?void 0:L.nodeName)==="A";t.preventDefault!==!1&&(a.current||!N)&&b.preventDefault(),i(!0)}},w=b=>{const x=HS(b.code,d);JS(c,l.current,!0)?(i(!1),l.current.clear()):l.current.delete(b[x]),b.key==="Meta"&&l.current.clear(),a.current=!1},v=()=>{l.current.clear(),i(!1)};return h==null||h.addEventListener("keydown",y),h==null||h.addEventListener("keyup",w),window.addEventListener("blur",v),window.addEventListener("contextmenu",v),()=>{h==null||h.removeEventListener("keydown",y),h==null||h.removeEventListener("keyup",w),window.removeEventListener("blur",v),window.removeEventListener("contextmenu",v)}}},[n,i]),e}function JS(n,t,e){return n.filter(i=>e||i.length===t.size).some(i=>i.every(a=>t.has(a)))}function HS(n,t){return t.includes(n)?"code":"key"}const MR=()=>{const n=oe();return et.useMemo(()=>({zoomIn:t=>{const{panZoom:e}=n.getState();return e?e.scaleBy(1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomOut:t=>{const{panZoom:e}=n.getState();return e?e.scaleBy(1/1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomTo:(t,e)=>{const{panZoom:i}=n.getState();return i?i.scaleTo(t,{duration:e==null?void 0:e.duration}):Promise.resolve(!1)},getZoom:()=>n.getState().transform[2],setViewport:async(t,e)=>{const{transform:[i,a,l],panZoom:c}=n.getState();return c?(await c.setViewport({x:t.x??i,y:t.y??a,zoom:t.zoom??l},e),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[t,e,i]=n.getState().transform;return{x:t,y:e,zoom:i}},setCenter:async(t,e,i)=>n.getState().setCenter(t,e,i),fitBounds:async(t,e)=>{const{width:i,height:a,minZoom:l,maxZoom:c,panZoom:d}=n.getState(),h=dp(t,i,a,l,c,(e==null?void 0:e.padding)??.1);return d?(await d.setViewport(h,{duration:e==null?void 0:e.duration,ease:e==null?void 0:e.ease,interpolate:e==null?void 0:e.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,e={})=>{const{transform:i,snapGrid:a,snapToGrid:l,domNode:c}=n.getState();if(!c)return t;const{x:d,y:h}=c.getBoundingClientRect(),g={x:t.x-d,y:t.y-h},y=e.snapGrid??a,w=e.snapToGrid??l;return ac(g,i,w,y)},flowToScreenPosition:t=>{const{transform:e,domNode:i}=n.getState();if(!i)return t;const{x:a,y:l}=i.getBoundingClientRect(),c=Ld(t,e);return{x:c.x+a,y:c.y+l}}}),[])};function ET(n,t){const e=[],i=new Map,a=[];for(const l of n)if(l.type==="add"){a.push(l);continue}else if(l.type==="remove"||l.type==="replace")i.set(l.id,[l]);else{const c=i.get(l.id);c?c.push(l):i.set(l.id,[l])}for(const l of t){const c=i.get(l.id);if(!c){e.push(l);continue}if(c[0].type==="remove")continue;if(c[0].type==="replace"){e.push({...c[0].item});continue}const d={...l};for(const h of c)BR(h,d);e.push(d)}return a.length&&a.forEach(l=>{l.index!==void 0?e.splice(l.index,0,{...l.item}):e.push({...l.item})}),e}function BR(n,t){switch(n.type){case"select":{t.selected=n.selected;break}case"position":{typeof n.position<"u"&&(t.position=n.position),typeof n.dragging<"u"&&(t.dragging=n.dragging);break}case"dimensions":{typeof n.dimensions<"u"&&(t.measured??(t.measured={}),t.measured.width=n.dimensions.width,t.measured.height=n.dimensions.height,n.setAttributes&&((n.setAttributes===!0||n.setAttributes==="width")&&(t.width=n.dimensions.width),(n.setAttributes===!0||n.setAttributes==="height")&&(t.height=n.dimensions.height))),typeof n.resizing=="boolean"&&(t.resizing=n.resizing);break}}}function zR(n,t){return ET(n,t)}function LR(n,t){return ET(n,t)}function Oa(n,t){return{id:n,type:"select",selected:t}}function Uo(n,t=new Set,e=!1){const i=[];for(const[a,l]of n){const c=t.has(a);!(l.selected===void 0&&!c)&&l.selected!==c&&(e&&(l.selected=c),i.push(Oa(l.id,c)))}return i}function $S({items:n=[],lookup:t}){var a;const e=[],i=new Map(n.map(l=>[l.id,l]));for(const[l,c]of n.entries()){const d=t.get(c.id),h=((a=d==null?void 0:d.internals)==null?void 0:a.userNode)??d;h!==void 0&&h!==c&&e.push({id:c.id,item:c,type:"replace"}),h===void 0&&e.push({item:c,type:"add",index:l})}for(const[l]of t)i.get(l)===void 0&&e.push({id:l,type:"remove"});return e}function VS(n){return{id:n.id,type:"remove"}}const jS=n=>sI(n),_R=n=>Fx(n);function NT(n){return et.forwardRef(n)}const UR=typeof window<"u"?et.useLayoutEffect:et.useEffect;function YS(n){const[t,e]=et.useState(BigInt(0)),[i]=et.useState(()=>qR(()=>e(a=>a+BigInt(1))));return UR(()=>{const a=i.get();a.length&&(n(a),i.reset())},[t]),i}function qR(n){let t=[];return{get:()=>t,reset:()=>{t=[]},push:e=>{t.push(e),n()}}}const CT=et.createContext(null);function PR({children:n}){const t=oe(),e=et.useCallback(d=>{const{nodes:h=[],setNodes:g,hasDefaultNodes:y,onNodesChange:w,nodeLookup:v,fitViewQueued:b}=t.getState();let x=h;for(const C of d)x=typeof C=="function"?C(x):C;const A=$S({items:x,lookup:v});y&&g(x),A.length>0?w==null||w(A):b&&window.requestAnimationFrame(()=>{const{fitViewQueued:C,nodes:k,setNodes:L}=t.getState();C&&L(k)})},[]),i=YS(e),a=et.useCallback(d=>{const{edges:h=[],setEdges:g,hasDefaultEdges:y,onEdgesChange:w,edgeLookup:v}=t.getState();let b=h;for(const x of d)b=typeof x=="function"?x(b):x;y?g(b):w&&w($S({items:b,lookup:v}))},[]),l=YS(a),c=et.useMemo(()=>({nodeQueue:i,edgeQueue:l}),[]);return W.jsx(CT.Provider,{value:c,children:n})}function JR(){const n=et.useContext(CT);if(!n)throw new Error("useBatchContext must be used within a BatchProvider");return n}const HR=n=>!!n.panZoom;function vp(){const n=MR(),t=oe(),e=JR(),i=$t(HR),a=et.useMemo(()=>{const l=w=>t.getState().nodeLookup.get(w),c=w=>{e.nodeQueue.push(w)},d=w=>{e.edgeQueue.push(w)},h=w=>{var k,L;const{nodeLookup:v,nodeOrigin:b}=t.getState(),x=jS(w)?w:v.get(w.id),A=x.parentId?nT(x.position,x.measured,x.parentId,v,b):x.position,C={...x,position:A,width:((k=x.measured)==null?void 0:k.width)??x.width,height:((L=x.measured)==null?void 0:L.height)??x.height};return il(C)},g=(w,v,b={replace:!1})=>{c(x=>x.map(A=>{if(A.id===w){const C=typeof v=="function"?v(A):v;return b.replace&&jS(C)?C:{...A,...C}}return A}))},y=(w,v,b={replace:!1})=>{d(x=>x.map(A=>{if(A.id===w){const C=typeof v=="function"?v(A):v;return b.replace&&_R(C)?C:{...A,...C}}return A}))};return{getNodes:()=>t.getState().nodes.map(w=>({...w})),getNode:w=>{var v;return(v=l(w))==null?void 0:v.internals.userNode},getInternalNode:l,getEdges:()=>{const{edges:w=[]}=t.getState();return w.map(v=>({...v}))},getEdge:w=>t.getState().edgeLookup.get(w),setNodes:c,setEdges:d,addNodes:w=>{const v=Array.isArray(w)?w:[w];e.nodeQueue.push(b=>[...b,...v])},addEdges:w=>{const v=Array.isArray(w)?w:[w];e.edgeQueue.push(b=>[...b,...v])},toObject:()=>{const{nodes:w=[],edges:v=[],transform:b}=t.getState(),[x,A,C]=b;return{nodes:w.map(k=>({...k})),edges:v.map(k=>({...k})),viewport:{x,y:A,zoom:C}}},deleteElements:async({nodes:w=[],edges:v=[]})=>{const{nodes:b,edges:x,onNodesDelete:A,onEdgesDelete:C,triggerNodeChanges:k,triggerEdgeChanges:L,onDelete:N,onBeforeDelete:I}=t.getState(),{nodes:B,edges:_}=await cI({nodesToRemove:w,edgesToRemove:v,nodes:b,edges:x,onBeforeDelete:I}),P=_.length>0,V=B.length>0;if(P){const tt=_.map(VS);C==null||C(_),L(tt)}if(V){const tt=B.map(VS);A==null||A(B),k(tt)}return(V||P)&&(N==null||N({nodes:B,edges:_})),{deletedNodes:B,deletedEdges:_}},getIntersectingNodes:(w,v=!0,b)=>{const x=vS(w),A=x?w:h(w),C=b!==void 0;return A?(b||t.getState().nodes).filter(k=>{const L=t.getState().nodeLookup.get(k.id);if(L&&!x&&(k.id===w.id||!L.internals.positionAbsolute))return!1;const N=il(C?k:L),I=Gu(N,A);return v&&I>0||I>=N.width*N.height||I>=A.width*A.height}):[]},isNodeIntersecting:(w,v,b=!0)=>{const A=vS(w)?w:h(w);if(!A)return!1;const C=Gu(A,v);return b&&C>0||C>=A.width*A.height},updateNode:g,updateNodeData:(w,v,b={replace:!1})=>{g(w,x=>{const A=typeof v=="function"?v(x):v;return b.replace?{...x,data:A}:{...x,data:{...x.data,...A}}},b)},updateEdge:y,updateEdgeData:(w,v,b={replace:!1})=>{y(w,x=>{const A=typeof v=="function"?v(x):v;return b.replace?{...x,data:A}:{...x,data:{...x.data,...A}}},b)},getNodesBounds:w=>{const{nodeLookup:v,nodeOrigin:b}=t.getState();return aI(w,{nodeLookup:v,nodeOrigin:b})},getHandleConnections:({type:w,id:v,nodeId:b})=>{var x;return Array.from(((x=t.getState().connectionLookup.get(`${b}-${w}${v?`-${v}`:""}`))==null?void 0:x.values())??[])},getNodeConnections:({type:w,handleId:v,nodeId:b})=>{var x;return Array.from(((x=t.getState().connectionLookup.get(`${b}${w?v?`-${w}-${v}`:`-${w}`:""}`))==null?void 0:x.values())??[])},fitView:async w=>{const v=t.getState().fitViewResolver??gI();return t.setState({fitViewQueued:!0,fitViewOptions:w,fitViewResolver:v}),e.nodeQueue.push(b=>[...b]),v.promise}}},[]);return et.useMemo(()=>({...a,...n,viewportInitialized:i}),[i])}const GS=n=>n.selected,$R=typeof window<"u"?window:void 0;function VR({deleteKeyCode:n,multiSelectionKeyCode:t}){const e=oe(),{deleteElements:i}=vp(),a=Xu(n,{actInsideInputWithModifier:!1}),l=Xu(t,{target:$R});et.useEffect(()=>{if(a){const{edges:c,nodes:d}=e.getState();i({nodes:d.filter(GS),edges:c.filter(GS)}),e.setState({nodesSelectionActive:!1})}},[a]),et.useEffect(()=>{e.setState({multiSelectionActive:l})},[l])}function jR(n){const t=oe();et.useEffect(()=>{const e=()=>{var a,l;if(!n.current)return!1;const i=hp(n.current);(i.height===0||i.width===0)&&((l=(a=t.getState()).onError)==null||l.call(a,"004",kr.error004())),t.setState({width:i.width||500,height:i.height||500})};if(n.current){e(),window.addEventListener("resize",e);const i=new ResizeObserver(()=>e());return i.observe(n.current),()=>{window.removeEventListener("resize",e),i&&n.current&&i.unobserve(n.current)}}},[])}const ah={position:"absolute",width:"100%",height:"100%",top:0,left:0},YR=n=>({userSelectionActive:n.userSelectionActive,lib:n.lib});function GR({onPaneContextMenu:n,zoomOnScroll:t=!0,zoomOnPinch:e=!0,panOnScroll:i=!1,panOnScrollSpeed:a=.5,panOnScrollMode:l=za.Free,zoomOnDoubleClick:c=!0,panOnDrag:d=!0,defaultViewport:h,translateExtent:g,minZoom:y,maxZoom:w,zoomActivationKeyCode:v,preventScrolling:b=!0,children:x,noWheelClassName:A,noPanClassName:C,onViewportChange:k,isControlledViewport:L,paneClickDistance:N}){const I=oe(),B=et.useRef(null),{userSelectionActive:_,lib:P}=$t(YR,fe),V=Xu(v),tt=et.useRef();jR(B);const ft=et.useCallback(nt=>{k==null||k({x:nt[0],y:nt[1],zoom:nt[2]}),L||I.setState({transform:nt})},[k,L]);return et.useEffect(()=>{if(B.current){tt.current=XI({domNode:B.current,minZoom:y,maxZoom:w,translateExtent:g,viewport:h,paneClickDistance:N,onDraggingChange:R=>I.setState({paneDragging:R}),onPanZoomStart:(R,j)=>{const{onViewportChangeStart:O,onMoveStart:z}=I.getState();z==null||z(R,j),O==null||O(j)},onPanZoom:(R,j)=>{const{onViewportChange:O,onMove:z}=I.getState();z==null||z(R,j),O==null||O(j)},onPanZoomEnd:(R,j)=>{const{onViewportChangeEnd:O,onMoveEnd:z}=I.getState();z==null||z(R,j),O==null||O(j)}});const{x:nt,y:it,zoom:ut}=tt.current.getViewport();return I.setState({panZoom:tt.current,transform:[nt,it,ut],domNode:B.current.closest(".react-flow")}),()=>{var R;(R=tt.current)==null||R.destroy()}}},[]),et.useEffect(()=>{var nt;(nt=tt.current)==null||nt.update({onPaneContextMenu:n,zoomOnScroll:t,zoomOnPinch:e,panOnScroll:i,panOnScrollSpeed:a,panOnScrollMode:l,zoomOnDoubleClick:c,panOnDrag:d,zoomActivationKeyPressed:V,preventScrolling:b,noPanClassName:C,userSelectionActive:_,noWheelClassName:A,lib:P,onTransformChange:ft})},[n,t,e,i,a,l,c,d,V,b,C,_,A,P,ft]),W.jsx("div",{className:"react-flow__renderer",ref:B,style:ah,children:x})}const KR=n=>({userSelectionActive:n.userSelectionActive,userSelectionRect:n.userSelectionRect});function XR(){const{userSelectionActive:n,userSelectionRect:t}=$t(KR,fe);return n&&t?W.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}const jm=(n,t)=>e=>{e.target===t.current&&(n==null||n(e))},FR=n=>({userSelectionActive:n.userSelectionActive,elementsSelectable:n.elementsSelectable,connectionInProgress:n.connection.inProgress,dragging:n.paneDragging});function ZR({isSelecting:n,selectionKeyPressed:t,selectionMode:e=Yu.Full,panOnDrag:i,selectionOnDrag:a,onSelectionStart:l,onSelectionEnd:c,onPaneClick:d,onPaneContextMenu:h,onPaneScroll:g,onPaneMouseEnter:y,onPaneMouseMove:w,onPaneMouseLeave:v,children:b}){const x=oe(),{userSelectionActive:A,elementsSelectable:C,dragging:k,connectionInProgress:L}=$t(FR,fe),N=C&&(n||A),I=et.useRef(null),B=et.useRef(),_=et.useRef(new Set),P=et.useRef(new Set),V=et.useRef(!1),tt=et.useRef(!1),ft=z=>{if(V.current||L){V.current=!1;return}d==null||d(z),x.getState().resetSelectedElements(),x.setState({nodesSelectionActive:!1})},nt=z=>{if(Array.isArray(i)&&(i!=null&&i.includes(2))){z.preventDefault();return}h==null||h(z)},it=g?z=>g(z):void 0,ut=z=>{var Z,rt;const{resetSelectedElements:G,domNode:J}=x.getState();if(B.current=J==null?void 0:J.getBoundingClientRect(),!C||!n||z.button!==0||z.target!==I.current||!B.current)return;(rt=(Z=z.target)==null?void 0:Z.setPointerCapture)==null||rt.call(Z,z.pointerId),tt.current=!0,V.current=!1;const{x:D,y:U}=xr(z.nativeEvent,B.current);G(),x.setState({userSelectionRect:{width:0,height:0,startX:D,startY:U,x:D,y:U}}),l==null||l(z)},R=z=>{const{userSelectionRect:G,transform:J,nodeLookup:D,edgeLookup:U,connectionLookup:Z,triggerNodeChanges:rt,triggerEdgeChanges:ot,defaultEdgeOptions:mt}=x.getState();if(!B.current||!G)return;V.current=!0;const{x:dt,y:pt}=xr(z.nativeEvent,B.current),{startX:gt,startY:bt}=G,Jt={startX:gt,startY:bt,x:dt<gt?dt:gt,y:pt<bt?pt:bt,width:Math.abs(dt-gt),height:Math.abs(pt-bt)},Mt=_.current,Nt=P.current;_.current=new Set(fp(D,Jt,J,e===Yu.Partial,!0).map(Dt=>Dt.id)),P.current=new Set;const It=(mt==null?void 0:mt.selectable)??!0;for(const Dt of _.current){const Zt=Z.get(Dt);if(Zt)for(const{edgeId:le}of Zt.values()){const be=U.get(le);be&&(be.selectable??It)&&P.current.add(le)}}if(!wS(Mt,_.current)){const Dt=Uo(D,_.current,!0);rt(Dt)}if(!wS(Nt,P.current)){const Dt=Uo(U,P.current);ot(Dt)}x.setState({userSelectionRect:Jt,userSelectionActive:!0,nodesSelectionActive:!1})},j=z=>{var J,D;if(z.button!==0||!tt.current)return;(D=(J=z.target)==null?void 0:J.releasePointerCapture)==null||D.call(J,z.pointerId);const{userSelectionRect:G}=x.getState();!A&&G&&z.target===I.current&&(ft==null||ft(z)),x.setState({userSelectionActive:!1,userSelectionRect:null,nodesSelectionActive:_.current.size>0}),c==null||c(z),(t||a)&&(V.current=!1),tt.current=!1},O=i===!0||Array.isArray(i)&&i.includes(0);return W.jsxs("div",{className:Ae(["react-flow__pane",{draggable:O,dragging:k,selection:n}]),onClick:N?void 0:jm(ft,I),onContextMenu:jm(nt,I),onWheel:jm(it,I),onPointerEnter:N?void 0:y,onPointerDown:N?ut:w,onPointerMove:N?R:w,onPointerUp:N?j:void 0,onPointerLeave:v,ref:I,style:ah,children:[b,W.jsx(XR,{})]})}function Ly({id:n,store:t,unselect:e=!1,nodeRef:i}){const{addSelectedNodes:a,unselectNodesAndEdges:l,multiSelectionActive:c,nodeLookup:d,onError:h}=t.getState(),g=d.get(n);if(!g){h==null||h("012",kr.error012(n));return}t.setState({nodesSelectionActive:!1}),g.selected?(e||g.selected&&c)&&(l({nodes:[g],edges:[]}),requestAnimationFrame(()=>{var y;return(y=i==null?void 0:i.current)==null?void 0:y.blur()})):a([n])}function DT({nodeRef:n,disabled:t=!1,noDragClassName:e,handleSelector:i,nodeId:a,isSelectable:l,nodeClickDistance:c}){const d=oe(),[h,g]=et.useState(!1),y=et.useRef();return et.useEffect(()=>{y.current=BI({getStoreItems:()=>d.getState(),onNodeMouseDown:w=>{Ly({id:w,store:d,nodeRef:n})},onDragStart:()=>{g(!0)},onDragStop:()=>{g(!1)}})},[]),et.useEffect(()=>{var w,v;if(t)(w=y.current)==null||w.destroy();else if(n.current)return(v=y.current)==null||v.update({noDragClassName:e,handleSelector:i,domNode:n.current,isSelectable:l,nodeId:a,nodeClickDistance:c}),()=>{var b;(b=y.current)==null||b.destroy()}},[e,i,t,l,n,a]),h}const QR=n=>t=>t.selected&&(t.draggable||n&&typeof t.draggable>"u");function kT(){const n=oe();return et.useCallback(e=>{const{nodeExtent:i,snapToGrid:a,snapGrid:l,nodesDraggable:c,onError:d,updateNodePositions:h,nodeLookup:g,nodeOrigin:y}=n.getState(),w=new Map,v=QR(c),b=a?l[0]:5,x=a?l[1]:5,A=e.direction.x*b*e.factor,C=e.direction.y*x*e.factor;for(const[,k]of g){if(!v(k))continue;let L={x:k.internals.positionAbsolute.x+A,y:k.internals.positionAbsolute.y+C};a&&(L=nh(L,l));const{position:N,positionAbsolute:I}=Zx({nodeId:k.id,nextPosition:L,nodeLookup:g,nodeExtent:i,nodeOrigin:y,onError:d});k.position=N,k.internals.positionAbsolute=I,w.set(k.id,k)}h(w)},[])}const wp=et.createContext(null),WR=wp.Provider;wp.Consumer;const OT=()=>et.useContext(wp),tM=n=>({connectOnClick:n.connectOnClick,noPanClassName:n.noPanClassName,rfId:n.rfId}),eM=(n,t,e)=>i=>{const{connectionClickStartHandle:a,connectionMode:l,connection:c}=i,{fromHandle:d,toHandle:h,isValid:g}=c,y=(h==null?void 0:h.nodeId)===n&&(h==null?void 0:h.id)===t&&(h==null?void 0:h.type)===e;return{connectingFrom:(d==null?void 0:d.nodeId)===n&&(d==null?void 0:d.id)===t&&(d==null?void 0:d.type)===e,connectingTo:y,clickConnecting:(a==null?void 0:a.nodeId)===n&&(a==null?void 0:a.id)===t&&(a==null?void 0:a.type)===e,isPossibleEndHandle:l===nl.Strict?(d==null?void 0:d.type)!==e:n!==(d==null?void 0:d.nodeId)||t!==(d==null?void 0:d.id),connectionInProcess:!!d,clickConnectionInProcess:!!a,valid:y&&g}};function nM({type:n="source",position:t=Et.Top,isValidConnection:e,isConnectable:i=!0,isConnectableStart:a=!0,isConnectableEnd:l=!0,id:c,onConnect:d,children:h,className:g,onMouseDown:y,onTouchStart:w,...v},b){var j,O;const x=c||null,A=n==="target",C=oe(),k=OT(),{connectOnClick:L,noPanClassName:N,rfId:I}=$t(tM,fe),{connectingFrom:B,connectingTo:_,clickConnecting:P,isPossibleEndHandle:V,connectionInProcess:tt,clickConnectionInProcess:ft,valid:nt}=$t(eM(k,x,n),fe);k||(O=(j=C.getState()).onError)==null||O.call(j,"010",kr.error010());const it=z=>{const{defaultEdgeOptions:G,onConnect:J,hasDefaultEdges:D}=C.getState(),U={...G,...z};if(D){const{edges:Z,setEdges:rt}=C.getState();rt(SI(U,Z))}J==null||J(U),d==null||d(U)},ut=z=>{if(!k)return;const G=sT(z.nativeEvent);if(a&&(G&&z.button===0||!G)){const J=C.getState();zy.onPointerDown(z.nativeEvent,{autoPanOnConnect:J.autoPanOnConnect,connectionMode:J.connectionMode,connectionRadius:J.connectionRadius,domNode:J.domNode,nodeLookup:J.nodeLookup,lib:J.lib,isTarget:A,handleId:x,nodeId:k,flowId:J.rfId,panBy:J.panBy,cancelConnection:J.cancelConnection,onConnectStart:J.onConnectStart,onConnectEnd:J.onConnectEnd,updateConnection:J.updateConnection,onConnect:it,isValidConnection:e||J.isValidConnection,getTransform:()=>C.getState().transform,getFromHandle:()=>C.getState().connection.fromHandle,autoPanSpeed:J.autoPanSpeed,dragThreshold:J.connectionDragThreshold})}G?y==null||y(z):w==null||w(z)},R=z=>{const{onClickConnectStart:G,onClickConnectEnd:J,connectionClickStartHandle:D,connectionMode:U,isValidConnection:Z,lib:rt,rfId:ot,nodeLookup:mt,connection:dt}=C.getState();if(!k||!D&&!a)return;if(!D){G==null||G(z.nativeEvent,{nodeId:k,handleId:x,handleType:n}),C.setState({connectionClickStartHandle:{nodeId:k,type:n,id:x}});return}const pt=rT(z.target),gt=e||Z,{connection:bt,isValid:Jt}=zy.isValid(z.nativeEvent,{handle:{nodeId:k,id:x,type:n},connectionMode:U,fromNodeId:D.nodeId,fromHandleId:D.id||null,fromType:D.type,isValidConnection:gt,flowId:ot,doc:pt,lib:rt,nodeLookup:mt});Jt&&bt&&it(bt);const Mt=structuredClone(dt);delete Mt.inProgress,Mt.toPosition=Mt.toHandle?Mt.toHandle.position:null,J==null||J(z,Mt),C.setState({connectionClickStartHandle:null})};return W.jsx("div",{"data-handleid":x,"data-nodeid":k,"data-handlepos":t,"data-id":`${I}-${k}-${x}-${n}`,className:Ae(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",N,g,{source:!A,target:A,connectable:i,connectablestart:a,connectableend:l,clickconnecting:P,connectingfrom:B,connectingto:_,valid:nt,connectionindicator:i&&(!tt||V)&&(tt||ft?l:a)}]),onMouseDown:ut,onTouchStart:ut,onClick:L?R:void 0,ref:b,...v,children:h})}const Ud=et.memo(NT(nM));function rM({data:n,isConnectable:t,sourcePosition:e=Et.Bottom}){return W.jsxs(W.Fragment,{children:[n==null?void 0:n.label,W.jsx(Ud,{type:"source",position:e,isConnectable:t})]})}function iM({data:n,isConnectable:t,targetPosition:e=Et.Top,sourcePosition:i=Et.Bottom}){return W.jsxs(W.Fragment,{children:[W.jsx(Ud,{type:"target",position:e,isConnectable:t}),n==null?void 0:n.label,W.jsx(Ud,{type:"source",position:i,isConnectable:t})]})}function sM(){return null}function aM({data:n,isConnectable:t,targetPosition:e=Et.Top}){return W.jsxs(W.Fragment,{children:[W.jsx(Ud,{type:"target",position:e,isConnectable:t}),n==null?void 0:n.label]})}const qd={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},KS={input:rM,default:iM,output:aM,group:sM};function oM(n){var t,e,i,a;return n.internals.handleBounds===void 0?{width:n.width??n.initialWidth??((t=n.style)==null?void 0:t.width),height:n.height??n.initialHeight??((e=n.style)==null?void 0:e.height)}:{width:n.width??((i=n.style)==null?void 0:i.width),height:n.height??((a=n.style)==null?void 0:a.height)}}const lM=n=>{const{width:t,height:e,x:i,y:a}=sc(n.nodeLookup,{filter:l=>!!l.selected});return{width:er(t)?t:null,height:er(e)?e:null,userSelectionActive:n.userSelectionActive,transformString:`translate(${n.transform[0]}px,${n.transform[1]}px) scale(${n.transform[2]}) translate(${i}px,${a}px)`}};function uM({onSelectionContextMenu:n,noPanClassName:t,disableKeyboardA11y:e}){const i=oe(),{width:a,height:l,transformString:c,userSelectionActive:d}=$t(lM,fe),h=kT(),g=et.useRef(null);if(et.useEffect(()=>{var v;e||(v=g.current)==null||v.focus({preventScroll:!0})},[e]),DT({nodeRef:g}),d||!a||!l)return null;const y=n?v=>{const b=i.getState().nodes.filter(x=>x.selected);n(v,b)}:void 0,w=v=>{Object.prototype.hasOwnProperty.call(qd,v.key)&&(v.preventDefault(),h({direction:qd[v.key],factor:v.shiftKey?4:1}))};return W.jsx("div",{className:Ae(["react-flow__nodesselection","react-flow__container",t]),style:{transform:c},children:W.jsx("div",{ref:g,className:"react-flow__nodesselection-rect",onContextMenu:y,tabIndex:e?void 0:-1,onKeyDown:e?void 0:w,style:{width:a,height:l}})})}const XS=typeof window<"u"?window:void 0,cM=n=>({nodesSelectionActive:n.nodesSelectionActive,userSelectionActive:n.userSelectionActive});function IT({children:n,onPaneClick:t,onPaneMouseEnter:e,onPaneMouseMove:i,onPaneMouseLeave:a,onPaneContextMenu:l,onPaneScroll:c,paneClickDistance:d,deleteKeyCode:h,selectionKeyCode:g,selectionOnDrag:y,selectionMode:w,onSelectionStart:v,onSelectionEnd:b,multiSelectionKeyCode:x,panActivationKeyCode:A,zoomActivationKeyCode:C,elementsSelectable:k,zoomOnScroll:L,zoomOnPinch:N,panOnScroll:I,panOnScrollSpeed:B,panOnScrollMode:_,zoomOnDoubleClick:P,panOnDrag:V,defaultViewport:tt,translateExtent:ft,minZoom:nt,maxZoom:it,preventScrolling:ut,onSelectionContextMenu:R,noWheelClassName:j,noPanClassName:O,disableKeyboardA11y:z,onViewportChange:G,isControlledViewport:J}){const{nodesSelectionActive:D,userSelectionActive:U}=$t(cM),Z=Xu(g,{target:XS}),rt=Xu(A,{target:XS}),ot=rt||V,mt=rt||I,dt=y&&ot!==!0,pt=Z||U||dt;return VR({deleteKeyCode:h,multiSelectionKeyCode:x}),W.jsx(GR,{onPaneContextMenu:l,elementsSelectable:k,zoomOnScroll:L,zoomOnPinch:N,panOnScroll:mt,panOnScrollSpeed:B,panOnScrollMode:_,zoomOnDoubleClick:P,panOnDrag:!Z&&ot,defaultViewport:tt,translateExtent:ft,minZoom:nt,maxZoom:it,zoomActivationKeyCode:C,preventScrolling:ut,noWheelClassName:j,noPanClassName:O,onViewportChange:G,isControlledViewport:J,paneClickDistance:d,children:W.jsxs(ZR,{onSelectionStart:v,onSelectionEnd:b,onPaneClick:t,onPaneMouseEnter:e,onPaneMouseMove:i,onPaneMouseLeave:a,onPaneContextMenu:l,onPaneScroll:c,panOnDrag:ot,isSelecting:!!pt,selectionMode:w,selectionKeyPressed:Z,selectionOnDrag:dt,children:[n,D&&W.jsx(uM,{onSelectionContextMenu:R,noPanClassName:O,disableKeyboardA11y:z})]})})}IT.displayName="FlowRenderer";const fM=et.memo(IT),dM=n=>t=>n?fp(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map(e=>e.id):Array.from(t.nodeLookup.keys());function hM(n){return $t(et.useCallback(dM(n),[n]),fe)}const gM=n=>n.updateNodeInternals;function mM(){const n=$t(gM),[t]=et.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(e=>{const i=new Map;e.forEach(a=>{const l=a.target.getAttribute("data-id");i.set(l,{id:l,nodeElement:a.target,force:!0})}),n(i)}));return et.useEffect(()=>()=>{t==null||t.disconnect()},[t]),t}function yM({node:n,nodeType:t,hasDimensions:e,resizeObserver:i}){const a=oe(),l=et.useRef(null),c=et.useRef(null),d=et.useRef(n.sourcePosition),h=et.useRef(n.targetPosition),g=et.useRef(t),y=e&&!!n.internals.handleBounds;return et.useEffect(()=>{l.current&&!n.hidden&&(!y||c.current!==l.current)&&(c.current&&(i==null||i.unobserve(c.current)),i==null||i.observe(l.current),c.current=l.current)},[y,n.hidden]),et.useEffect(()=>()=>{c.current&&(i==null||i.unobserve(c.current),c.current=null)},[]),et.useEffect(()=>{if(l.current){const w=g.current!==t,v=d.current!==n.sourcePosition,b=h.current!==n.targetPosition;(w||v||b)&&(g.current=t,d.current=n.sourcePosition,h.current=n.targetPosition,a.getState().updateNodeInternals(new Map([[n.id,{id:n.id,nodeElement:l.current,force:!0}]])))}},[n.id,t,n.sourcePosition,n.targetPosition]),l}function pM({id:n,onClick:t,onMouseEnter:e,onMouseMove:i,onMouseLeave:a,onContextMenu:l,onDoubleClick:c,nodesDraggable:d,elementsSelectable:h,nodesConnectable:g,nodesFocusable:y,resizeObserver:w,noDragClassName:v,noPanClassName:b,disableKeyboardA11y:x,rfId:A,nodeTypes:C,nodeClickDistance:k,onError:L}){const{node:N,internals:I,isParent:B}=$t(gt=>{const bt=gt.nodeLookup.get(n),Jt=gt.parentLookup.has(n);return{node:bt,internals:bt.internals,isParent:Jt}},fe);let _=N.type||"default",P=(C==null?void 0:C[_])||KS[_];P===void 0&&(L==null||L("003",kr.error003(_)),_="default",P=(C==null?void 0:C.default)||KS.default);const V=!!(N.draggable||d&&typeof N.draggable>"u"),tt=!!(N.selectable||h&&typeof N.selectable>"u"),ft=!!(N.connectable||g&&typeof N.connectable>"u"),nt=!!(N.focusable||y&&typeof N.focusable>"u"),it=oe(),ut=eT(N),R=yM({node:N,nodeType:_,hasDimensions:ut,resizeObserver:w}),j=DT({nodeRef:R,disabled:N.hidden||!V,noDragClassName:v,handleSelector:N.dragHandle,nodeId:n,isSelectable:tt,nodeClickDistance:k}),O=kT();if(N.hidden)return null;const z=ps(N),G=oM(N),J=tt||V||t||e||i||a,D=e?gt=>e(gt,{...I.userNode}):void 0,U=i?gt=>i(gt,{...I.userNode}):void 0,Z=a?gt=>a(gt,{...I.userNode}):void 0,rt=l?gt=>l(gt,{...I.userNode}):void 0,ot=c?gt=>c(gt,{...I.userNode}):void 0,mt=gt=>{const{selectNodesOnDrag:bt,nodeDragThreshold:Jt}=it.getState();tt&&(!bt||!V||Jt>0)&&Ly({id:n,store:it,nodeRef:R}),t&&t(gt,{...I.userNode})},dt=gt=>{if(!(iT(gt.nativeEvent)||x)){if(Yx.includes(gt.key)&&tt){const bt=gt.key==="Escape";Ly({id:n,store:it,unselect:bt,nodeRef:R})}else if(V&&N.selected&&Object.prototype.hasOwnProperty.call(qd,gt.key)){gt.preventDefault();const{ariaLabelConfig:bt}=it.getState();it.setState({ariaLiveMessage:bt["node.a11yDescription.ariaLiveMessage"]({direction:gt.key.replace("Arrow","").toLowerCase(),x:~~I.positionAbsolute.x,y:~~I.positionAbsolute.y})}),O({direction:qd[gt.key],factor:gt.shiftKey?4:1})}}},pt=()=>{var Dt;if(x||!((Dt=R.current)!=null&&Dt.matches(":focus-visible")))return;const{transform:gt,width:bt,height:Jt,autoPanOnNodeFocus:Mt,setCenter:Nt}=it.getState();if(!Mt)return;fp(new Map([[n,N]]),{x:0,y:0,width:bt,height:Jt},gt,!0).length>0||Nt(N.position.x+z.width/2,N.position.y+z.height/2,{zoom:gt[2]})};return W.jsx("div",{className:Ae(["react-flow__node",`react-flow__node-${_}`,{[b]:V},N.className,{selected:N.selected,selectable:tt,parent:B,draggable:V,dragging:j}]),ref:R,style:{zIndex:I.z,transform:`translate(${I.positionAbsolute.x}px,${I.positionAbsolute.y}px)`,pointerEvents:J?"all":"none",visibility:ut?"visible":"hidden",...N.style,...G},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:D,onMouseMove:U,onMouseLeave:Z,onContextMenu:rt,onClick:mt,onDoubleClick:ot,onKeyDown:nt?dt:void 0,tabIndex:nt?0:void 0,onFocus:nt?pt:void 0,role:N.ariaRole??(nt?"group":void 0),"aria-roledescription":"node","aria-describedby":x?void 0:`${xT}-${A}`,"aria-label":N.ariaLabel,...N.domAttributes,children:W.jsx(WR,{value:n,children:W.jsx(P,{id:n,data:N.data,type:_,positionAbsoluteX:I.positionAbsolute.x,positionAbsoluteY:I.positionAbsolute.y,selected:N.selected??!1,selectable:tt,draggable:V,deletable:N.deletable??!0,isConnectable:ft,sourcePosition:N.sourcePosition,targetPosition:N.targetPosition,dragging:j,dragHandle:N.dragHandle,zIndex:I.z,parentId:N.parentId,...z})})})}const vM=n=>({nodesDraggable:n.nodesDraggable,nodesConnectable:n.nodesConnectable,nodesFocusable:n.nodesFocusable,elementsSelectable:n.elementsSelectable,onError:n.onError});function RT(n){const{nodesDraggable:t,nodesConnectable:e,nodesFocusable:i,elementsSelectable:a,onError:l}=$t(vM,fe),c=hM(n.onlyRenderVisibleElements),d=mM();return W.jsx("div",{className:"react-flow__nodes",style:ah,children:c.map(h=>W.jsx(pM,{id:h,nodeTypes:n.nodeTypes,nodeExtent:n.nodeExtent,onClick:n.onNodeClick,onMouseEnter:n.onNodeMouseEnter,onMouseMove:n.onNodeMouseMove,onMouseLeave:n.onNodeMouseLeave,onContextMenu:n.onNodeContextMenu,onDoubleClick:n.onNodeDoubleClick,noDragClassName:n.noDragClassName,noPanClassName:n.noPanClassName,rfId:n.rfId,disableKeyboardA11y:n.disableKeyboardA11y,resizeObserver:d,nodesDraggable:t,nodesConnectable:e,nodesFocusable:i,elementsSelectable:a,nodeClickDistance:n.nodeClickDistance,onError:l},h))})}RT.displayName="NodeRenderer";const wM=et.memo(RT);function bM(n){return $t(et.useCallback(e=>{if(!n)return e.edges.map(a=>a.id);const i=[];if(e.width&&e.height)for(const a of e.edges){const l=e.nodeLookup.get(a.source),c=e.nodeLookup.get(a.target);l&&c&&vI({sourceNode:l,targetNode:c,width:e.width,height:e.height,transform:e.transform})&&i.push(a.id)}return i},[n]),fe)}const SM=({color:n="none",strokeWidth:t=1})=>W.jsx("polyline",{style:{stroke:n,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),xM=({color:n="none",strokeWidth:t=1})=>W.jsx("polyline",{style:{stroke:n,fill:n,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),FS={[Bd.Arrow]:SM,[Bd.ArrowClosed]:xM};function TM(n){const t=oe();return et.useMemo(()=>{var a,l;return Object.prototype.hasOwnProperty.call(FS,n)?FS[n]:((l=(a=t.getState()).onError)==null||l.call(a,"009",kr.error009(n)),null)},[n])}const AM=({id:n,type:t,color:e,width:i=12.5,height:a=12.5,markerUnits:l="strokeWidth",strokeWidth:c,orient:d="auto-start-reverse"})=>{const h=TM(t);return h?W.jsx("marker",{className:"react-flow__arrowhead",id:n,markerWidth:`${i}`,markerHeight:`${a}`,viewBox:"-10 -10 20 20",markerUnits:l,orient:d,refX:"0",refY:"0",children:W.jsx(h,{color:e,strokeWidth:c})}):null},MT=({defaultColor:n,rfId:t})=>{const e=$t(l=>l.edges),i=$t(l=>l.defaultEdgeOptions),a=et.useMemo(()=>NI(e,{id:t,defaultColor:n,defaultMarkerStart:i==null?void 0:i.markerStart,defaultMarkerEnd:i==null?void 0:i.markerEnd}),[e,i,t,n]);return a.length?W.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:W.jsx("defs",{children:a.map(l=>W.jsx(AM,{id:l.id,type:l.type,color:l.color,width:l.width,height:l.height,markerUnits:l.markerUnits,strokeWidth:l.strokeWidth,orient:l.orient},l.id))})}):null};MT.displayName="MarkerDefinitions";var EM=et.memo(MT);function BT({x:n,y:t,label:e,labelStyle:i,labelShowBg:a=!0,labelBgStyle:l,labelBgPadding:c=[2,4],labelBgBorderRadius:d=2,children:h,className:g,...y}){const[w,v]=et.useState({x:1,y:0,width:0,height:0}),b=Ae(["react-flow__edge-textwrapper",g]),x=et.useRef(null);return et.useEffect(()=>{if(x.current){const A=x.current.getBBox();v({x:A.x,y:A.y,width:A.width,height:A.height})}},[e]),e?W.jsxs("g",{transform:`translate(${n-w.width/2} ${t-w.height/2})`,className:b,visibility:w.width?"visible":"hidden",...y,children:[a&&W.jsx("rect",{width:w.width+2*c[0],x:-c[0],y:-c[1],height:w.height+2*c[1],className:"react-flow__edge-textbg",style:l,rx:d,ry:d}),W.jsx("text",{className:"react-flow__edge-text",y:w.height/2,dy:"0.3em",ref:x,style:i,children:e}),h]}):null}BT.displayName="EdgeText";const NM=et.memo(BT);function oh({path:n,labelX:t,labelY:e,label:i,labelStyle:a,labelShowBg:l,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:h,interactionWidth:g=20,...y}){return W.jsxs(W.Fragment,{children:[W.jsx("path",{...y,d:n,fill:"none",className:Ae(["react-flow__edge-path",y.className])}),g&&W.jsx("path",{d:n,fill:"none",strokeOpacity:0,strokeWidth:g,className:"react-flow__edge-interaction"}),i&&er(t)&&er(e)?W.jsx(NM,{x:t,y:e,label:i,labelStyle:a,labelShowBg:l,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:h}):null]})}function ZS({pos:n,x1:t,y1:e,x2:i,y2:a}){return n===Et.Left||n===Et.Right?[.5*(t+i),e]:[t,.5*(e+a)]}function zT({sourceX:n,sourceY:t,sourcePosition:e=Et.Bottom,targetX:i,targetY:a,targetPosition:l=Et.Top}){const[c,d]=ZS({pos:e,x1:n,y1:t,x2:i,y2:a}),[h,g]=ZS({pos:l,x1:i,y1:a,x2:n,y2:t}),[y,w,v,b]=aT({sourceX:n,sourceY:t,targetX:i,targetY:a,sourceControlX:c,sourceControlY:d,targetControlX:h,targetControlY:g});return[`M${n},${t} C${c},${d} ${h},${g} ${i},${a}`,y,w,v,b]}function LT(n){return et.memo(({id:t,sourceX:e,sourceY:i,targetX:a,targetY:l,sourcePosition:c,targetPosition:d,label:h,labelStyle:g,labelShowBg:y,labelBgStyle:w,labelBgPadding:v,labelBgBorderRadius:b,style:x,markerEnd:A,markerStart:C,interactionWidth:k})=>{const[L,N,I]=zT({sourceX:e,sourceY:i,sourcePosition:c,targetX:a,targetY:l,targetPosition:d}),B=n.isInternal?void 0:t;return W.jsx(oh,{id:B,path:L,labelX:N,labelY:I,label:h,labelStyle:g,labelShowBg:y,labelBgStyle:w,labelBgPadding:v,labelBgBorderRadius:b,style:x,markerEnd:A,markerStart:C,interactionWidth:k})})}const CM=LT({isInternal:!1}),_T=LT({isInternal:!0});CM.displayName="SimpleBezierEdge";_T.displayName="SimpleBezierEdgeInternal";function UT(n){return et.memo(({id:t,sourceX:e,sourceY:i,targetX:a,targetY:l,label:c,labelStyle:d,labelShowBg:h,labelBgStyle:g,labelBgPadding:y,labelBgBorderRadius:w,style:v,sourcePosition:b=Et.Bottom,targetPosition:x=Et.Top,markerEnd:A,markerStart:C,pathOptions:k,interactionWidth:L})=>{const[N,I,B]=Ry({sourceX:e,sourceY:i,sourcePosition:b,targetX:a,targetY:l,targetPosition:x,borderRadius:k==null?void 0:k.borderRadius,offset:k==null?void 0:k.offset,stepPosition:k==null?void 0:k.stepPosition}),_=n.isInternal?void 0:t;return W.jsx(oh,{id:_,path:N,labelX:I,labelY:B,label:c,labelStyle:d,labelShowBg:h,labelBgStyle:g,labelBgPadding:y,labelBgBorderRadius:w,style:v,markerEnd:A,markerStart:C,interactionWidth:L})})}const qT=UT({isInternal:!1}),PT=UT({isInternal:!0});qT.displayName="SmoothStepEdge";PT.displayName="SmoothStepEdgeInternal";function JT(n){return et.memo(({id:t,...e})=>{var a;const i=n.isInternal?void 0:t;return W.jsx(qT,{...e,id:i,pathOptions:et.useMemo(()=>{var l;return{borderRadius:0,offset:(l=e.pathOptions)==null?void 0:l.offset}},[(a=e.pathOptions)==null?void 0:a.offset])})})}const DM=JT({isInternal:!1}),HT=JT({isInternal:!0});DM.displayName="StepEdge";HT.displayName="StepEdgeInternal";function $T(n){return et.memo(({id:t,sourceX:e,sourceY:i,targetX:a,targetY:l,label:c,labelStyle:d,labelShowBg:h,labelBgStyle:g,labelBgPadding:y,labelBgBorderRadius:w,style:v,markerEnd:b,markerStart:x,interactionWidth:A})=>{const[C,k,L]=uT({sourceX:e,sourceY:i,targetX:a,targetY:l}),N=n.isInternal?void 0:t;return W.jsx(oh,{id:N,path:C,labelX:k,labelY:L,label:c,labelStyle:d,labelShowBg:h,labelBgStyle:g,labelBgPadding:y,labelBgBorderRadius:w,style:v,markerEnd:b,markerStart:x,interactionWidth:A})})}const kM=$T({isInternal:!1}),VT=$T({isInternal:!0});kM.displayName="StraightEdge";VT.displayName="StraightEdgeInternal";function jT(n){return et.memo(({id:t,sourceX:e,sourceY:i,targetX:a,targetY:l,sourcePosition:c=Et.Bottom,targetPosition:d=Et.Top,label:h,labelStyle:g,labelShowBg:y,labelBgStyle:w,labelBgPadding:v,labelBgBorderRadius:b,style:x,markerEnd:A,markerStart:C,pathOptions:k,interactionWidth:L})=>{const[N,I,B]=oT({sourceX:e,sourceY:i,sourcePosition:c,targetX:a,targetY:l,targetPosition:d,curvature:k==null?void 0:k.curvature}),_=n.isInternal?void 0:t;return W.jsx(oh,{id:_,path:N,labelX:I,labelY:B,label:h,labelStyle:g,labelShowBg:y,labelBgStyle:w,labelBgPadding:v,labelBgBorderRadius:b,style:x,markerEnd:A,markerStart:C,interactionWidth:L})})}const OM=jT({isInternal:!1}),YT=jT({isInternal:!0});OM.displayName="BezierEdge";YT.displayName="BezierEdgeInternal";const QS={default:YT,straight:VT,step:HT,smoothstep:PT,simplebezier:_T},WS={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},IM=(n,t,e)=>e===Et.Left?n-t:e===Et.Right?n+t:n,RM=(n,t,e)=>e===Et.Top?n-t:e===Et.Bottom?n+t:n,t1="react-flow__edgeupdater";function e1({position:n,centerX:t,centerY:e,radius:i=10,onMouseDown:a,onMouseEnter:l,onMouseOut:c,type:d}){return W.jsx("circle",{onMouseDown:a,onMouseEnter:l,onMouseOut:c,className:Ae([t1,`${t1}-${d}`]),cx:IM(t,i,n),cy:RM(e,i,n),r:i,stroke:"transparent",fill:"transparent"})}function MM({isReconnectable:n,reconnectRadius:t,edge:e,sourceX:i,sourceY:a,targetX:l,targetY:c,sourcePosition:d,targetPosition:h,onReconnect:g,onReconnectStart:y,onReconnectEnd:w,setReconnecting:v,setUpdateHover:b}){const x=oe(),A=(I,B)=>{if(I.button!==0)return;const{autoPanOnConnect:_,domNode:P,isValidConnection:V,connectionMode:tt,connectionRadius:ft,lib:nt,onConnectStart:it,onConnectEnd:ut,cancelConnection:R,nodeLookup:j,rfId:O,panBy:z,updateConnection:G}=x.getState(),J=B.type==="target",D=(rt,ot)=>{v(!1),w==null||w(rt,e,B.type,ot)},U=rt=>g==null?void 0:g(e,rt),Z=(rt,ot)=>{v(!0),y==null||y(I,e,B.type),it==null||it(rt,ot)};zy.onPointerDown(I.nativeEvent,{autoPanOnConnect:_,connectionMode:tt,connectionRadius:ft,domNode:P,handleId:B.id,nodeId:B.nodeId,nodeLookup:j,isTarget:J,edgeUpdaterType:B.type,lib:nt,flowId:O,cancelConnection:R,panBy:z,isValidConnection:V,onConnect:U,onConnectStart:Z,onConnectEnd:ut,onReconnectEnd:D,updateConnection:G,getTransform:()=>x.getState().transform,getFromHandle:()=>x.getState().connection.fromHandle,dragThreshold:x.getState().connectionDragThreshold})},C=I=>A(I,{nodeId:e.target,id:e.targetHandle??null,type:"target"}),k=I=>A(I,{nodeId:e.source,id:e.sourceHandle??null,type:"source"}),L=()=>b(!0),N=()=>b(!1);return W.jsxs(W.Fragment,{children:[(n===!0||n==="source")&&W.jsx(e1,{position:d,centerX:i,centerY:a,radius:t,onMouseDown:C,onMouseEnter:L,onMouseOut:N,type:"source"}),(n===!0||n==="target")&&W.jsx(e1,{position:h,centerX:l,centerY:c,radius:t,onMouseDown:k,onMouseEnter:L,onMouseOut:N,type:"target"})]})}function BM({id:n,edgesFocusable:t,edgesReconnectable:e,elementsSelectable:i,onClick:a,onDoubleClick:l,onContextMenu:c,onMouseEnter:d,onMouseMove:h,onMouseLeave:g,reconnectRadius:y,onReconnect:w,onReconnectStart:v,onReconnectEnd:b,rfId:x,edgeTypes:A,noPanClassName:C,onError:k,disableKeyboardA11y:L}){let N=$t(Nt=>Nt.edgeLookup.get(n));const I=$t(Nt=>Nt.defaultEdgeOptions);N=I?{...I,...N}:N;let B=N.type||"default",_=(A==null?void 0:A[B])||QS[B];_===void 0&&(k==null||k("011",kr.error011(B)),B="default",_=(A==null?void 0:A.default)||QS.default);const P=!!(N.focusable||t&&typeof N.focusable>"u"),V=typeof w<"u"&&(N.reconnectable||e&&typeof N.reconnectable>"u"),tt=!!(N.selectable||i&&typeof N.selectable>"u"),ft=et.useRef(null),[nt,it]=et.useState(!1),[ut,R]=et.useState(!1),j=oe(),{zIndex:O,sourceX:z,sourceY:G,targetX:J,targetY:D,sourcePosition:U,targetPosition:Z}=$t(et.useCallback(Nt=>{const It=Nt.nodeLookup.get(N.source),Dt=Nt.nodeLookup.get(N.target);if(!It||!Dt)return{zIndex:N.zIndex,...WS};const Zt=EI({id:n,sourceNode:It,targetNode:Dt,sourceHandle:N.sourceHandle||null,targetHandle:N.targetHandle||null,connectionMode:Nt.connectionMode,onError:k});return{zIndex:pI({selected:N.selected,zIndex:N.zIndex,sourceNode:It,targetNode:Dt,elevateOnSelect:Nt.elevateEdgesOnSelect}),...Zt||WS}},[N.source,N.target,N.sourceHandle,N.targetHandle,N.selected,N.zIndex]),fe),rt=et.useMemo(()=>N.markerStart?`url('#${My(N.markerStart,x)}')`:void 0,[N.markerStart,x]),ot=et.useMemo(()=>N.markerEnd?`url('#${My(N.markerEnd,x)}')`:void 0,[N.markerEnd,x]);if(N.hidden||z===null||G===null||J===null||D===null)return null;const mt=Nt=>{var le;const{addSelectedEdges:It,unselectNodesAndEdges:Dt,multiSelectionActive:Zt}=j.getState();tt&&(j.setState({nodesSelectionActive:!1}),N.selected&&Zt?(Dt({nodes:[],edges:[N]}),(le=ft.current)==null||le.blur()):It([n])),a&&a(Nt,N)},dt=l?Nt=>{l(Nt,{...N})}:void 0,pt=c?Nt=>{c(Nt,{...N})}:void 0,gt=d?Nt=>{d(Nt,{...N})}:void 0,bt=h?Nt=>{h(Nt,{...N})}:void 0,Jt=g?Nt=>{g(Nt,{...N})}:void 0,Mt=Nt=>{var It;if(!L&&Yx.includes(Nt.key)&&tt){const{unselectNodesAndEdges:Dt,addSelectedEdges:Zt}=j.getState();Nt.key==="Escape"?((It=ft.current)==null||It.blur(),Dt({edges:[N]})):Zt([n])}};return W.jsx("svg",{style:{zIndex:O},children:W.jsxs("g",{className:Ae(["react-flow__edge",`react-flow__edge-${B}`,N.className,C,{selected:N.selected,animated:N.animated,inactive:!tt&&!a,updating:nt,selectable:tt}]),onClick:mt,onDoubleClick:dt,onContextMenu:pt,onMouseEnter:gt,onMouseMove:bt,onMouseLeave:Jt,onKeyDown:P?Mt:void 0,tabIndex:P?0:void 0,role:N.ariaRole??(P?"group":"img"),"aria-roledescription":"edge","data-id":n,"data-testid":`rf__edge-${n}`,"aria-label":N.ariaLabel===null?void 0:N.ariaLabel||`Edge from ${N.source} to ${N.target}`,"aria-describedby":P?`${TT}-${x}`:void 0,ref:ft,...N.domAttributes,children:[!ut&&W.jsx(_,{id:n,source:N.source,target:N.target,type:N.type,selected:N.selected,animated:N.animated,selectable:tt,deletable:N.deletable??!0,label:N.label,labelStyle:N.labelStyle,labelShowBg:N.labelShowBg,labelBgStyle:N.labelBgStyle,labelBgPadding:N.labelBgPadding,labelBgBorderRadius:N.labelBgBorderRadius,sourceX:z,sourceY:G,targetX:J,targetY:D,sourcePosition:U,targetPosition:Z,data:N.data,style:N.style,sourceHandleId:N.sourceHandle,targetHandleId:N.targetHandle,markerStart:rt,markerEnd:ot,pathOptions:"pathOptions"in N?N.pathOptions:void 0,interactionWidth:N.interactionWidth}),V&&W.jsx(MM,{edge:N,isReconnectable:V,reconnectRadius:y,onReconnect:w,onReconnectStart:v,onReconnectEnd:b,sourceX:z,sourceY:G,targetX:J,targetY:D,sourcePosition:U,targetPosition:Z,setUpdateHover:it,setReconnecting:R})]})})}const zM=n=>({edgesFocusable:n.edgesFocusable,edgesReconnectable:n.edgesReconnectable,elementsSelectable:n.elementsSelectable,connectionMode:n.connectionMode,onError:n.onError});function GT({defaultMarkerColor:n,onlyRenderVisibleElements:t,rfId:e,edgeTypes:i,noPanClassName:a,onReconnect:l,onEdgeContextMenu:c,onEdgeMouseEnter:d,onEdgeMouseMove:h,onEdgeMouseLeave:g,onEdgeClick:y,reconnectRadius:w,onEdgeDoubleClick:v,onReconnectStart:b,onReconnectEnd:x,disableKeyboardA11y:A}){const{edgesFocusable:C,edgesReconnectable:k,elementsSelectable:L,onError:N}=$t(zM,fe),I=bM(t);return W.jsxs("div",{className:"react-flow__edges",children:[W.jsx(EM,{defaultColor:n,rfId:e}),I.map(B=>W.jsx(BM,{id:B,edgesFocusable:C,edgesReconnectable:k,elementsSelectable:L,noPanClassName:a,onReconnect:l,onContextMenu:c,onMouseEnter:d,onMouseMove:h,onMouseLeave:g,onClick:y,reconnectRadius:w,onDoubleClick:v,onReconnectStart:b,onReconnectEnd:x,rfId:e,onError:N,edgeTypes:i,disableKeyboardA11y:A},B))]})}GT.displayName="EdgeRenderer";const LM=et.memo(GT),_M=n=>`translate(${n.transform[0]}px,${n.transform[1]}px) scale(${n.transform[2]})`;function UM({children:n}){const t=$t(_M);return W.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:n})}function qM(n){const t=vp(),e=et.useRef(!1);et.useEffect(()=>{!e.current&&t.viewportInitialized&&n&&(setTimeout(()=>n(t),1),e.current=!0)},[n,t.viewportInitialized])}const PM=n=>{var t;return(t=n.panZoom)==null?void 0:t.syncViewport};function JM(n){const t=$t(PM),e=oe();return et.useEffect(()=>{n&&(t==null||t(n),e.setState({transform:[n.x,n.y,n.zoom]}))},[n,t]),null}function HM(n){return n.connection.inProgress?{...n.connection,to:ac(n.connection.to,n.transform)}:{...n.connection}}function $M(n){return HM}function VM(n){const t=$M();return $t(t,fe)}const jM=n=>({nodesConnectable:n.nodesConnectable,isValid:n.connection.isValid,inProgress:n.connection.inProgress,width:n.width,height:n.height});function YM({containerStyle:n,style:t,type:e,component:i}){const{nodesConnectable:a,width:l,height:c,isValid:d,inProgress:h}=$t(jM,fe);return!(l&&a&&h)?null:W.jsx("svg",{style:n,width:l,height:c,className:"react-flow__connectionline react-flow__container",children:W.jsx("g",{className:Ae(["react-flow__connection",Xx(d)]),children:W.jsx(KT,{style:t,type:e,CustomComponent:i,isValid:d})})})}const KT=({style:n,type:t=Zs.Bezier,CustomComponent:e,isValid:i})=>{const{inProgress:a,from:l,fromNode:c,fromHandle:d,fromPosition:h,to:g,toNode:y,toHandle:w,toPosition:v}=VM();if(!a)return;if(e)return W.jsx(e,{connectionLineType:t,connectionLineStyle:n,fromNode:c,fromHandle:d,fromX:l.x,fromY:l.y,toX:g.x,toY:g.y,fromPosition:h,toPosition:v,connectionStatus:Xx(i),toNode:y,toHandle:w});let b="";const x={sourceX:l.x,sourceY:l.y,sourcePosition:h,targetX:g.x,targetY:g.y,targetPosition:v};switch(t){case Zs.Bezier:[b]=oT(x);break;case Zs.SimpleBezier:[b]=zT(x);break;case Zs.Step:[b]=Ry({...x,borderRadius:0});break;case Zs.SmoothStep:[b]=Ry(x);break;default:[b]=uT(x)}return W.jsx("path",{d:b,fill:"none",className:"react-flow__connection-path",style:n})};KT.displayName="ConnectionLine";const GM={};function n1(n=GM){et.useRef(n),oe(),et.useEffect(()=>{},[n])}function KM(){oe(),et.useRef(!1),et.useEffect(()=>{},[])}function XT({nodeTypes:n,edgeTypes:t,onInit:e,onNodeClick:i,onEdgeClick:a,onNodeDoubleClick:l,onEdgeDoubleClick:c,onNodeMouseEnter:d,onNodeMouseMove:h,onNodeMouseLeave:g,onNodeContextMenu:y,onSelectionContextMenu:w,onSelectionStart:v,onSelectionEnd:b,connectionLineType:x,connectionLineStyle:A,connectionLineComponent:C,connectionLineContainerStyle:k,selectionKeyCode:L,selectionOnDrag:N,selectionMode:I,multiSelectionKeyCode:B,panActivationKeyCode:_,zoomActivationKeyCode:P,deleteKeyCode:V,onlyRenderVisibleElements:tt,elementsSelectable:ft,defaultViewport:nt,translateExtent:it,minZoom:ut,maxZoom:R,preventScrolling:j,defaultMarkerColor:O,zoomOnScroll:z,zoomOnPinch:G,panOnScroll:J,panOnScrollSpeed:D,panOnScrollMode:U,zoomOnDoubleClick:Z,panOnDrag:rt,onPaneClick:ot,onPaneMouseEnter:mt,onPaneMouseMove:dt,onPaneMouseLeave:pt,onPaneScroll:gt,onPaneContextMenu:bt,paneClickDistance:Jt,nodeClickDistance:Mt,onEdgeContextMenu:Nt,onEdgeMouseEnter:It,onEdgeMouseMove:Dt,onEdgeMouseLeave:Zt,reconnectRadius:le,onReconnect:be,onReconnectStart:vs,onReconnectEnd:ia,noDragClassName:sa,noWheelClassName:Ir,noPanClassName:aa,disableKeyboardA11y:ws,nodeExtent:ll,rfId:Va,viewport:bn,onViewportChange:Ee}){return n1(n),n1(t),KM(),qM(e),JM(bn),W.jsx(fM,{onPaneClick:ot,onPaneMouseEnter:mt,onPaneMouseMove:dt,onPaneMouseLeave:pt,onPaneContextMenu:bt,onPaneScroll:gt,paneClickDistance:Jt,deleteKeyCode:V,selectionKeyCode:L,selectionOnDrag:N,selectionMode:I,onSelectionStart:v,onSelectionEnd:b,multiSelectionKeyCode:B,panActivationKeyCode:_,zoomActivationKeyCode:P,elementsSelectable:ft,zoomOnScroll:z,zoomOnPinch:G,zoomOnDoubleClick:Z,panOnScroll:J,panOnScrollSpeed:D,panOnScrollMode:U,panOnDrag:rt,defaultViewport:nt,translateExtent:it,minZoom:ut,maxZoom:R,onSelectionContextMenu:w,preventScrolling:j,noDragClassName:sa,noWheelClassName:Ir,noPanClassName:aa,disableKeyboardA11y:ws,onViewportChange:Ee,isControlledViewport:!!bn,children:W.jsxs(UM,{children:[W.jsx(LM,{edgeTypes:t,onEdgeClick:a,onEdgeDoubleClick:c,onReconnect:be,onReconnectStart:vs,onReconnectEnd:ia,onlyRenderVisibleElements:tt,onEdgeContextMenu:Nt,onEdgeMouseEnter:It,onEdgeMouseMove:Dt,onEdgeMouseLeave:Zt,reconnectRadius:le,defaultMarkerColor:O,noPanClassName:aa,disableKeyboardA11y:ws,rfId:Va}),W.jsx(YM,{style:A,type:x,component:C,containerStyle:k}),W.jsx("div",{className:"react-flow__edgelabel-renderer"}),W.jsx(wM,{nodeTypes:n,onNodeClick:i,onNodeDoubleClick:l,onNodeMouseEnter:d,onNodeMouseMove:h,onNodeMouseLeave:g,onNodeContextMenu:y,nodeClickDistance:Mt,onlyRenderVisibleElements:tt,noPanClassName:aa,noDragClassName:sa,disableKeyboardA11y:ws,nodeExtent:ll,rfId:Va}),W.jsx("div",{className:"react-flow__viewport-portal"})]})})}XT.displayName="GraphView";const XM=et.memo(XT),r1=({nodes:n,edges:t,defaultNodes:e,defaultEdges:i,width:a,height:l,fitView:c,fitViewOptions:d,minZoom:h=.5,maxZoom:g=2,nodeOrigin:y,nodeExtent:w}={})=>{const v=new Map,b=new Map,x=new Map,A=new Map,C=i??t??[],k=e??n??[],L=y??[0,0],N=w??ju;fT(x,A,C);const I=By(k,v,b,{nodeOrigin:L,nodeExtent:N,elevateNodesOnSelect:!1});let B=[0,0,1];if(c&&a&&l){const _=sc(v,{filter:ft=>!!((ft.width||ft.initialWidth)&&(ft.height||ft.initialHeight))}),{x:P,y:V,zoom:tt}=dp(_,a,l,h,g,(d==null?void 0:d.padding)??.1);B=[P,V,tt]}return{rfId:"1",width:0,height:0,transform:B,nodes:k,nodesInitialized:I,nodeLookup:v,parentLookup:b,edges:C,edgeLookup:A,connectionLookup:x,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:e!==void 0,hasDefaultEdges:i!==void 0,panZoom:null,minZoom:h,maxZoom:g,translateExtent:ju,nodeExtent:N,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:nl.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:L,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:c??!1,fitViewOptions:d,fitViewResolver:null,connection:{...Kx},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:fI,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:Gx}},FM=({nodes:n,edges:t,defaultNodes:e,defaultEdges:i,width:a,height:l,fitView:c,fitViewOptions:d,minZoom:h,maxZoom:g,nodeOrigin:y,nodeExtent:w})=>gR((v,b)=>{async function x(){const{nodeLookup:A,panZoom:C,fitViewOptions:k,fitViewResolver:L,width:N,height:I,minZoom:B,maxZoom:_}=b();C&&(await uI({nodes:A,width:N,height:I,panZoom:C,minZoom:B,maxZoom:_},k),L==null||L.resolve(!0),v({fitViewResolver:null}))}return{...r1({nodes:n,edges:t,width:a,height:l,fitView:c,fitViewOptions:d,minZoom:h,maxZoom:g,nodeOrigin:y,nodeExtent:w,defaultNodes:e,defaultEdges:i}),setNodes:A=>{const{nodeLookup:C,parentLookup:k,nodeOrigin:L,elevateNodesOnSelect:N,fitViewQueued:I}=b(),B=By(A,C,k,{nodeOrigin:L,nodeExtent:w,elevateNodesOnSelect:N,checkEquality:!0});I&&B?(x(),v({nodes:A,nodesInitialized:B,fitViewQueued:!1,fitViewOptions:void 0})):v({nodes:A,nodesInitialized:B})},setEdges:A=>{const{connectionLookup:C,edgeLookup:k}=b();fT(C,k,A),v({edges:A})},setDefaultNodesAndEdges:(A,C)=>{if(A){const{setNodes:k}=b();k(A),v({hasDefaultNodes:!0})}if(C){const{setEdges:k}=b();k(C),v({hasDefaultEdges:!0})}},updateNodeInternals:A=>{const{triggerNodeChanges:C,nodeLookup:k,parentLookup:L,domNode:N,nodeOrigin:I,nodeExtent:B,debug:_,fitViewQueued:P}=b(),{changes:V,updatedInternals:tt}=II(A,k,L,N,I,B);tt&&(DI(k,L,{nodeOrigin:I,nodeExtent:B}),P?(x(),v({fitViewQueued:!1,fitViewOptions:void 0})):v({}),(V==null?void 0:V.length)>0&&(_&&console.log("React Flow: trigger node changes",V),C==null||C(V)))},updateNodePositions:(A,C=!1)=>{const k=[],L=[],{nodeLookup:N,triggerNodeChanges:I}=b();for(const[B,_]of A){const P=N.get(B),V=!!(P!=null&&P.expandParent&&(P!=null&&P.parentId)&&(_!=null&&_.position)),tt={id:B,type:"position",position:V?{x:Math.max(0,_.position.x),y:Math.max(0,_.position.y)}:_.position,dragging:C};V&&P.parentId&&k.push({id:B,parentId:P.parentId,rect:{..._.internals.positionAbsolute,width:_.measured.width??0,height:_.measured.height??0}}),L.push(tt)}if(k.length>0){const{parentLookup:B,nodeOrigin:_}=b(),P=pp(k,N,B,_);L.push(...P)}I(L)},triggerNodeChanges:A=>{const{onNodesChange:C,setNodes:k,nodes:L,hasDefaultNodes:N,debug:I}=b();if(A!=null&&A.length){if(N){const B=zR(A,L);k(B)}I&&console.log("React Flow: trigger node changes",A),C==null||C(A)}},triggerEdgeChanges:A=>{const{onEdgesChange:C,setEdges:k,edges:L,hasDefaultEdges:N,debug:I}=b();if(A!=null&&A.length){if(N){const B=LR(A,L);k(B)}I&&console.log("React Flow: trigger edge changes",A),C==null||C(A)}},addSelectedNodes:A=>{const{multiSelectionActive:C,edgeLookup:k,nodeLookup:L,triggerNodeChanges:N,triggerEdgeChanges:I}=b();if(C){const B=A.map(_=>Oa(_,!0));N(B);return}N(Uo(L,new Set([...A]),!0)),I(Uo(k))},addSelectedEdges:A=>{const{multiSelectionActive:C,edgeLookup:k,nodeLookup:L,triggerNodeChanges:N,triggerEdgeChanges:I}=b();if(C){const B=A.map(_=>Oa(_,!0));I(B);return}I(Uo(k,new Set([...A]))),N(Uo(L,new Set,!0))},unselectNodesAndEdges:({nodes:A,edges:C}={})=>{const{edges:k,nodes:L,nodeLookup:N,triggerNodeChanges:I,triggerEdgeChanges:B}=b(),_=A||L,P=C||k,V=_.map(ft=>{const nt=N.get(ft.id);return nt&&(nt.selected=!1),Oa(ft.id,!1)}),tt=P.map(ft=>Oa(ft.id,!1));I(V),B(tt)},setMinZoom:A=>{const{panZoom:C,maxZoom:k}=b();C==null||C.setScaleExtent([A,k]),v({minZoom:A})},setMaxZoom:A=>{const{panZoom:C,minZoom:k}=b();C==null||C.setScaleExtent([k,A]),v({maxZoom:A})},setTranslateExtent:A=>{var C;(C=b().panZoom)==null||C.setTranslateExtent(A),v({translateExtent:A})},setPaneClickDistance:A=>{var C;(C=b().panZoom)==null||C.setClickDistance(A)},resetSelectedElements:()=>{const{edges:A,nodes:C,triggerNodeChanges:k,triggerEdgeChanges:L,elementsSelectable:N}=b();if(!N)return;const I=C.reduce((_,P)=>P.selected?[..._,Oa(P.id,!1)]:_,[]),B=A.reduce((_,P)=>P.selected?[..._,Oa(P.id,!1)]:_,[]);k(I),L(B)},setNodeExtent:A=>{const{nodes:C,nodeLookup:k,parentLookup:L,nodeOrigin:N,elevateNodesOnSelect:I,nodeExtent:B}=b();A[0][0]===B[0][0]&&A[0][1]===B[0][1]&&A[1][0]===B[1][0]&&A[1][1]===B[1][1]||(By(C,k,L,{nodeOrigin:N,nodeExtent:A,elevateNodesOnSelect:I,checkEquality:!1}),v({nodeExtent:A}))},panBy:A=>{const{transform:C,width:k,height:L,panZoom:N,translateExtent:I}=b();return RI({delta:A,panZoom:N,transform:C,translateExtent:I,width:k,height:L})},setCenter:async(A,C,k)=>{const{width:L,height:N,maxZoom:I,panZoom:B}=b();if(!B)return Promise.resolve(!1);const _=typeof(k==null?void 0:k.zoom)<"u"?k.zoom:I;return await B.setViewport({x:L/2-A*_,y:N/2-C*_,zoom:_},{duration:k==null?void 0:k.duration,ease:k==null?void 0:k.ease,interpolate:k==null?void 0:k.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{v({connection:{...Kx}})},updateConnection:A=>{v({connection:A})},reset:()=>v({...r1()})}},Object.is);function ZM({initialNodes:n,initialEdges:t,defaultNodes:e,defaultEdges:i,initialWidth:a,initialHeight:l,initialMinZoom:c,initialMaxZoom:d,initialFitViewOptions:h,fitView:g,nodeOrigin:y,nodeExtent:w,children:v}){const[b]=et.useState(()=>FM({nodes:n,edges:t,defaultNodes:e,defaultEdges:i,width:a,height:l,fitView:g,minZoom:c,maxZoom:d,fitViewOptions:h,nodeOrigin:y,nodeExtent:w}));return W.jsx(mR,{value:b,children:W.jsx(PR,{children:v})})}function QM({children:n,nodes:t,edges:e,defaultNodes:i,defaultEdges:a,width:l,height:c,fitView:d,fitViewOptions:h,minZoom:g,maxZoom:y,nodeOrigin:w,nodeExtent:v}){return et.useContext(ih)?W.jsx(W.Fragment,{children:n}):W.jsx(ZM,{initialNodes:t,initialEdges:e,defaultNodes:i,defaultEdges:a,initialWidth:l,initialHeight:c,fitView:d,initialFitViewOptions:h,initialMinZoom:g,initialMaxZoom:y,nodeOrigin:w,nodeExtent:v,children:n})}const WM={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function tB({nodes:n,edges:t,defaultNodes:e,defaultEdges:i,className:a,nodeTypes:l,edgeTypes:c,onNodeClick:d,onEdgeClick:h,onInit:g,onMove:y,onMoveStart:w,onMoveEnd:v,onConnect:b,onConnectStart:x,onConnectEnd:A,onClickConnectStart:C,onClickConnectEnd:k,onNodeMouseEnter:L,onNodeMouseMove:N,onNodeMouseLeave:I,onNodeContextMenu:B,onNodeDoubleClick:_,onNodeDragStart:P,onNodeDrag:V,onNodeDragStop:tt,onNodesDelete:ft,onEdgesDelete:nt,onDelete:it,onSelectionChange:ut,onSelectionDragStart:R,onSelectionDrag:j,onSelectionDragStop:O,onSelectionContextMenu:z,onSelectionStart:G,onSelectionEnd:J,onBeforeDelete:D,connectionMode:U,connectionLineType:Z=Zs.Bezier,connectionLineStyle:rt,connectionLineComponent:ot,connectionLineContainerStyle:mt,deleteKeyCode:dt="Backspace",selectionKeyCode:pt="Shift",selectionOnDrag:gt=!1,selectionMode:bt=Yu.Full,panActivationKeyCode:Jt="Space",multiSelectionKeyCode:Mt=_d()?"Meta":"Control",zoomActivationKeyCode:Nt=_d()?"Meta":"Control",snapToGrid:It,snapGrid:Dt,onlyRenderVisibleElements:Zt=!1,selectNodesOnDrag:le,nodesDraggable:be,autoPanOnNodeFocus:vs,nodesConnectable:ia,nodesFocusable:sa,nodeOrigin:Ir=AT,edgesFocusable:aa,edgesReconnectable:ws,elementsSelectable:ll=!0,defaultViewport:Va=DR,minZoom:bn=.5,maxZoom:Ee=2,translateExtent:$n=ju,preventScrolling:je=!0,nodeExtent:ul,defaultMarkerColor:lh="#b1b1b7",zoomOnScroll:uh=!0,zoomOnPinch:ja=!0,panOnScroll:Ya=!1,panOnScrollSpeed:Rr=.5,panOnScrollMode:Ga=za.Free,zoomOnDoubleClick:oa=!0,panOnDrag:ch=!0,onPaneClick:oc,onPaneMouseEnter:lc,onPaneMouseMove:cl,onPaneMouseLeave:la,onPaneScroll:fh,onPaneContextMenu:uc,paneClickDistance:fl=0,nodeClickDistance:dl=0,children:hl,onReconnect:cc,onReconnectStart:dh,onReconnectEnd:ir,onEdgeContextMenu:De,onEdgeDoubleClick:qe,onEdgeMouseEnter:bs,onEdgeMouseMove:gl,onEdgeMouseLeave:hh,reconnectRadius:gh=10,onNodesChange:fc,onEdgesChange:ua,noDragClassName:ml="nodrag",noWheelClassName:Ss="nowheel",noPanClassName:Mr="nopan",fitView:xs,fitViewOptions:Br,connectOnClick:Se,attributionPosition:dc,proOptions:hc,defaultEdgeOptions:zr,elevateNodesOnSelect:Ts,elevateEdgesOnSelect:mh,disableKeyboardA11y:yl=!1,autoPanOnConnect:gc,autoPanOnNodeDrag:yh,autoPanSpeed:Ka,connectionRadius:Xa,isValidConnection:Vn,onError:pl,style:mc,id:Lr,nodeDragThreshold:vl,connectionDragThreshold:wl,viewport:ph,onViewportChange:yc,width:Ke,height:pc,colorMode:vh="light",debug:Fa,onScroll:ca,ariaLabelConfig:Za,...wh},Xe){const fa=Lr||"1",vc=RR(vh),bl=et.useCallback(_r=>{_r.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),ca==null||ca(_r)},[ca]);return W.jsx("div",{"data-testid":"rf__wrapper",...wh,onScroll:bl,style:{...mc,...WM},ref:Xe,className:Ae(["react-flow",a,vc]),id:Lr,role:"application",children:W.jsxs(QM,{nodes:n,edges:t,width:Ke,height:pc,fitView:xs,fitViewOptions:Br,minZoom:bn,maxZoom:Ee,nodeOrigin:Ir,nodeExtent:ul,children:[W.jsx(XM,{onInit:g,onNodeClick:d,onEdgeClick:h,onNodeMouseEnter:L,onNodeMouseMove:N,onNodeMouseLeave:I,onNodeContextMenu:B,onNodeDoubleClick:_,nodeTypes:l,edgeTypes:c,connectionLineType:Z,connectionLineStyle:rt,connectionLineComponent:ot,connectionLineContainerStyle:mt,selectionKeyCode:pt,selectionOnDrag:gt,selectionMode:bt,deleteKeyCode:dt,multiSelectionKeyCode:Mt,panActivationKeyCode:Jt,zoomActivationKeyCode:Nt,onlyRenderVisibleElements:Zt,defaultViewport:Va,translateExtent:$n,minZoom:bn,maxZoom:Ee,preventScrolling:je,zoomOnScroll:uh,zoomOnPinch:ja,zoomOnDoubleClick:oa,panOnScroll:Ya,panOnScrollSpeed:Rr,panOnScrollMode:Ga,panOnDrag:ch,onPaneClick:oc,onPaneMouseEnter:lc,onPaneMouseMove:cl,onPaneMouseLeave:la,onPaneScroll:fh,onPaneContextMenu:uc,paneClickDistance:fl,nodeClickDistance:dl,onSelectionContextMenu:z,onSelectionStart:G,onSelectionEnd:J,onReconnect:cc,onReconnectStart:dh,onReconnectEnd:ir,onEdgeContextMenu:De,onEdgeDoubleClick:qe,onEdgeMouseEnter:bs,onEdgeMouseMove:gl,onEdgeMouseLeave:hh,reconnectRadius:gh,defaultMarkerColor:lh,noDragClassName:ml,noWheelClassName:Ss,noPanClassName:Mr,rfId:fa,disableKeyboardA11y:yl,nodeExtent:ul,viewport:ph,onViewportChange:yc}),W.jsx(IR,{nodes:n,edges:t,defaultNodes:e,defaultEdges:i,onConnect:b,onConnectStart:x,onConnectEnd:A,onClickConnectStart:C,onClickConnectEnd:k,nodesDraggable:be,autoPanOnNodeFocus:vs,nodesConnectable:ia,nodesFocusable:sa,edgesFocusable:aa,edgesReconnectable:ws,elementsSelectable:ll,elevateNodesOnSelect:Ts,elevateEdgesOnSelect:mh,minZoom:bn,maxZoom:Ee,nodeExtent:ul,onNodesChange:fc,onEdgesChange:ua,snapToGrid:It,snapGrid:Dt,connectionMode:U,translateExtent:$n,connectOnClick:Se,defaultEdgeOptions:zr,fitView:xs,fitViewOptions:Br,onNodesDelete:ft,onEdgesDelete:nt,onDelete:it,onNodeDragStart:P,onNodeDrag:V,onNodeDragStop:tt,onSelectionDrag:j,onSelectionDragStart:R,onSelectionDragStop:O,onMove:y,onMoveStart:w,onMoveEnd:v,noPanClassName:Mr,nodeOrigin:Ir,rfId:fa,autoPanOnConnect:gc,autoPanOnNodeDrag:yh,autoPanSpeed:Ka,onError:pl,connectionRadius:Xa,isValidConnection:Vn,selectNodesOnDrag:le,nodeDragThreshold:vl,connectionDragThreshold:wl,onBeforeDelete:D,paneClickDistance:fl,debug:Fa,ariaLabelConfig:Za}),W.jsx(CR,{onSelectionChange:ut}),hl,W.jsx(xR,{proOptions:hc,position:dc}),W.jsx(SR,{rfId:fa,disableKeyboardA11y:yl})]})})}var eB=NT(tB);function nB({dimensions:n,lineWidth:t,variant:e,className:i}){return W.jsx("path",{strokeWidth:t,d:`M${n[0]/2} 0 V${n[1]} M0 ${n[1]/2} H${n[0]}`,className:Ae(["react-flow__background-pattern",e,i])})}function rB({radius:n,className:t}){return W.jsx("circle",{cx:n,cy:n,r:n,className:Ae(["react-flow__background-pattern","dots",t])})}var na;(function(n){n.Lines="lines",n.Dots="dots",n.Cross="cross"})(na||(na={}));const iB={[na.Dots]:1,[na.Lines]:1,[na.Cross]:6},sB=n=>({transform:n.transform,patternId:`pattern-${n.rfId}`});function FT({id:n,variant:t=na.Dots,gap:e=20,size:i,lineWidth:a=1,offset:l=0,color:c,bgColor:d,style:h,className:g,patternClassName:y}){const w=et.useRef(null),{transform:v,patternId:b}=$t(sB,fe),x=i||iB[t],A=t===na.Dots,C=t===na.Cross,k=Array.isArray(e)?e:[e,e],L=[k[0]*v[2]||1,k[1]*v[2]||1],N=x*v[2],I=Array.isArray(l)?l:[l,l],B=C?[N,N]:L,_=[I[0]*v[2]||1+B[0]/2,I[1]*v[2]||1+B[1]/2],P=`${b}${n||""}`;return W.jsxs("svg",{className:Ae(["react-flow__background",g]),style:{...h,...ah,"--xy-background-color-props":d,"--xy-background-pattern-color-props":c},ref:w,"data-testid":"rf__background",children:[W.jsx("pattern",{id:P,x:v[0]%L[0],y:v[1]%L[1],width:L[0],height:L[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${_[0]},-${_[1]})`,children:A?W.jsx(rB,{radius:N/2,className:y}):W.jsx(nB,{dimensions:B,lineWidth:a,variant:t,className:y})}),W.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${P})`})]})}FT.displayName="Background";const aB=et.memo(FT);function oB(){return W.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:W.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function lB(){return W.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:W.jsx("path",{d:"M0 0h32v4.2H0z"})})}function uB(){return W.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:W.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function cB(){return W.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:W.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function fB(){return W.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:W.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function Jf({children:n,className:t,...e}){return W.jsx("button",{type:"button",className:Ae(["react-flow__controls-button",t]),...e,children:n})}const dB=n=>({isInteractive:n.nodesDraggable||n.nodesConnectable||n.elementsSelectable,minZoomReached:n.transform[2]<=n.minZoom,maxZoomReached:n.transform[2]>=n.maxZoom,ariaLabelConfig:n.ariaLabelConfig});function ZT({style:n,showZoom:t=!0,showFitView:e=!0,showInteractive:i=!0,fitViewOptions:a,onZoomIn:l,onZoomOut:c,onFitView:d,onInteractiveChange:h,className:g,children:y,position:w="bottom-left",orientation:v="vertical","aria-label":b}){const x=oe(),{isInteractive:A,minZoomReached:C,maxZoomReached:k,ariaLabelConfig:L}=$t(dB,fe),{zoomIn:N,zoomOut:I,fitView:B}=vp(),_=()=>{N(),l==null||l()},P=()=>{I(),c==null||c()},V=()=>{B(a),d==null||d()},tt=()=>{x.setState({nodesDraggable:!A,nodesConnectable:!A,elementsSelectable:!A}),h==null||h(!A)},ft=v==="horizontal"?"horizontal":"vertical";return W.jsxs(sh,{className:Ae(["react-flow__controls",ft,g]),position:w,style:n,"data-testid":"rf__controls","aria-label":b??L["controls.ariaLabel"],children:[t&&W.jsxs(W.Fragment,{children:[W.jsx(Jf,{onClick:_,className:"react-flow__controls-zoomin",title:L["controls.zoomIn.ariaLabel"],"aria-label":L["controls.zoomIn.ariaLabel"],disabled:k,children:W.jsx(oB,{})}),W.jsx(Jf,{onClick:P,className:"react-flow__controls-zoomout",title:L["controls.zoomOut.ariaLabel"],"aria-label":L["controls.zoomOut.ariaLabel"],disabled:C,children:W.jsx(lB,{})})]}),e&&W.jsx(Jf,{className:"react-flow__controls-fitview",onClick:V,title:L["controls.fitView.ariaLabel"],"aria-label":L["controls.fitView.ariaLabel"],children:W.jsx(uB,{})}),i&&W.jsx(Jf,{className:"react-flow__controls-interactive",onClick:tt,title:L["controls.interactive.ariaLabel"],"aria-label":L["controls.interactive.ariaLabel"],children:A?W.jsx(fB,{}):W.jsx(cB,{})}),y]})}ZT.displayName="Controls";const hB=et.memo(ZT);function gB({id:n,x:t,y:e,width:i,height:a,style:l,color:c,strokeColor:d,strokeWidth:h,className:g,borderRadius:y,shapeRendering:w,selected:v,onClick:b}){const{background:x,backgroundColor:A}=l||{},C=c||x||A;return W.jsx("rect",{className:Ae(["react-flow__minimap-node",{selected:v},g]),x:t,y:e,rx:y,ry:y,width:i,height:a,style:{fill:C,stroke:d,strokeWidth:h},shapeRendering:w,onClick:b?k=>b(k,n):void 0})}const mB=et.memo(gB),yB=n=>n.nodes.map(t=>t.id),Ym=n=>n instanceof Function?n:()=>n;function pB({nodeStrokeColor:n,nodeColor:t,nodeClassName:e="",nodeBorderRadius:i=5,nodeStrokeWidth:a,nodeComponent:l=mB,onClick:c}){const d=$t(yB,fe),h=Ym(t),g=Ym(n),y=Ym(e),w=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return W.jsx(W.Fragment,{children:d.map(v=>W.jsx(wB,{id:v,nodeColorFunc:h,nodeStrokeColorFunc:g,nodeClassNameFunc:y,nodeBorderRadius:i,nodeStrokeWidth:a,NodeComponent:l,onClick:c,shapeRendering:w},v))})}function vB({id:n,nodeColorFunc:t,nodeStrokeColorFunc:e,nodeClassNameFunc:i,nodeBorderRadius:a,nodeStrokeWidth:l,shapeRendering:c,NodeComponent:d,onClick:h}){const{node:g,x:y,y:w,width:v,height:b}=$t(x=>{const{internals:A}=x.nodeLookup.get(n),C=A.userNode,{x:k,y:L}=A.positionAbsolute,{width:N,height:I}=ps(C);return{node:C,x:k,y:L,width:N,height:I}},fe);return!g||g.hidden||!eT(g)?null:W.jsx(d,{x:y,y:w,width:v,height:b,style:g.style,selected:!!g.selected,className:i(g),color:t(g),borderRadius:a,strokeColor:e(g),strokeWidth:l,shapeRendering:c,onClick:h,id:g.id})}const wB=et.memo(vB);var bB=et.memo(pB);const SB=200,xB=150,TB=n=>!n.hidden,AB=n=>{const t={x:-n.transform[0]/n.transform[2],y:-n.transform[1]/n.transform[2],width:n.width/n.transform[2],height:n.height/n.transform[2]};return{viewBB:t,boundingRect:n.nodeLookup.size>0?tT(sc(n.nodeLookup,{filter:TB}),t):t,rfId:n.rfId,panZoom:n.panZoom,translateExtent:n.translateExtent,flowWidth:n.width,flowHeight:n.height,ariaLabelConfig:n.ariaLabelConfig}},EB="react-flow__minimap-desc";function QT({style:n,className:t,nodeStrokeColor:e,nodeColor:i,nodeClassName:a="",nodeBorderRadius:l=5,nodeStrokeWidth:c,nodeComponent:d,bgColor:h,maskColor:g,maskStrokeColor:y,maskStrokeWidth:w,position:v="bottom-right",onClick:b,onNodeClick:x,pannable:A=!1,zoomable:C=!1,ariaLabel:k,inversePan:L,zoomStep:N=10,offsetScale:I=5}){const B=oe(),_=et.useRef(null),{boundingRect:P,viewBB:V,rfId:tt,panZoom:ft,translateExtent:nt,flowWidth:it,flowHeight:ut,ariaLabelConfig:R}=$t(AB,fe),j=(n==null?void 0:n.width)??SB,O=(n==null?void 0:n.height)??xB,z=P.width/j,G=P.height/O,J=Math.max(z,G),D=J*j,U=J*O,Z=I*J,rt=P.x-(D-P.width)/2-Z,ot=P.y-(U-P.height)/2-Z,mt=D+Z*2,dt=U+Z*2,pt=`${EB}-${tt}`,gt=et.useRef(0),bt=et.useRef();gt.current=J,et.useEffect(()=>{if(_.current&&ft)return bt.current=PI({domNode:_.current,panZoom:ft,getTransform:()=>B.getState().transform,getViewScale:()=>gt.current}),()=>{var It;(It=bt.current)==null||It.destroy()}},[ft]),et.useEffect(()=>{var It;(It=bt.current)==null||It.update({translateExtent:nt,width:it,height:ut,inversePan:L,pannable:A,zoomStep:N,zoomable:C})},[A,C,L,N,nt,it,ut]);const Jt=b?It=>{var le;const[Dt,Zt]=((le=bt.current)==null?void 0:le.pointer(It))||[0,0];b(It,{x:Dt,y:Zt})}:void 0,Mt=x?et.useCallback((It,Dt)=>{const Zt=B.getState().nodeLookup.get(Dt).internals.userNode;x(It,Zt)},[]):void 0,Nt=k??R["minimap.ariaLabel"];return W.jsx(sh,{position:v,style:{...n,"--xy-minimap-background-color-props":typeof h=="string"?h:void 0,"--xy-minimap-mask-background-color-props":typeof g=="string"?g:void 0,"--xy-minimap-mask-stroke-color-props":typeof y=="string"?y:void 0,"--xy-minimap-mask-stroke-width-props":typeof w=="number"?w*J:void 0,"--xy-minimap-node-background-color-props":typeof i=="string"?i:void 0,"--xy-minimap-node-stroke-color-props":typeof e=="string"?e:void 0,"--xy-minimap-node-stroke-width-props":typeof c=="number"?c:void 0},className:Ae(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:W.jsxs("svg",{width:j,height:O,viewBox:`${rt} ${ot} ${mt} ${dt}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":pt,ref:_,onClick:Jt,children:[Nt&&W.jsx("title",{id:pt,children:Nt}),W.jsx(bB,{onClick:Mt,nodeColor:i,nodeStrokeColor:e,nodeBorderRadius:l,nodeClassName:a,nodeStrokeWidth:c,nodeComponent:d}),W.jsx("path",{className:"react-flow__minimap-mask",d:`M${rt-Z},${ot-Z}h${mt+Z*2}v${dt+Z*2}h${-mt-Z*2}z
        M${V.x},${V.y}h${V.width}v${V.height}h${-V.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}QT.displayName="MiniMap";const NB=et.memo(QT),CB=n=>t=>n?`${Math.max(1/t.transform[2],1)}`:void 0,DB={[al.Line]:"right",[al.Handle]:"bottom-right"};function kB({nodeId:n,position:t,variant:e=al.Handle,className:i,style:a=void 0,children:l,color:c,minWidth:d=10,minHeight:h=10,maxWidth:g=Number.MAX_VALUE,maxHeight:y=Number.MAX_VALUE,keepAspectRatio:w=!1,resizeDirection:v,autoScale:b=!0,shouldResize:x,onResizeStart:A,onResize:C,onResizeEnd:k}){const L=OT(),N=typeof n=="string"?n:L,I=oe(),B=et.useRef(null),_=e===al.Handle,P=$t(et.useCallback(CB(_&&b),[_,b]),fe),V=et.useRef(null),tt=t??DB[e];et.useEffect(()=>{if(!(!B.current||!N))return V.current||(V.current=nR({domNode:B.current,nodeId:N,getStoreItems:()=>{const{nodeLookup:nt,transform:it,snapGrid:ut,snapToGrid:R,nodeOrigin:j,domNode:O}=I.getState();return{nodeLookup:nt,transform:it,snapGrid:ut,snapToGrid:R,nodeOrigin:j,paneDomNode:O}},onChange:(nt,it)=>{const{triggerNodeChanges:ut,nodeLookup:R,parentLookup:j,nodeOrigin:O}=I.getState(),z=[],G={x:nt.x,y:nt.y},J=R.get(N);if(J&&J.expandParent&&J.parentId){const D=J.origin??O,U=nt.width??J.measured.width??0,Z=nt.height??J.measured.height??0,rt={id:J.id,parentId:J.parentId,rect:{width:U,height:Z,...nT({x:nt.x??J.position.x,y:nt.y??J.position.y},{width:U,height:Z},J.parentId,R,D)}},ot=pp([rt],R,j,O);z.push(...ot),G.x=nt.x?Math.max(D[0]*U,nt.x):void 0,G.y=nt.y?Math.max(D[1]*Z,nt.y):void 0}if(G.x!==void 0&&G.y!==void 0){const D={id:N,type:"position",position:{...G}};z.push(D)}if(nt.width!==void 0&&nt.height!==void 0){const U={id:N,type:"dimensions",resizing:!0,setAttributes:v?v==="horizontal"?"width":"height":!0,dimensions:{width:nt.width,height:nt.height}};z.push(U)}for(const D of it){const U={...D,type:"position"};z.push(U)}ut(z)},onEnd:({width:nt,height:it})=>{const ut={id:N,type:"dimensions",resizing:!1,dimensions:{width:nt,height:it}};I.getState().triggerNodeChanges([ut])}})),V.current.update({controlPosition:tt,boundaries:{minWidth:d,minHeight:h,maxWidth:g,maxHeight:y},keepAspectRatio:w,resizeDirection:v,onResizeStart:A,onResize:C,onResizeEnd:k,shouldResize:x}),()=>{var nt;(nt=V.current)==null||nt.destroy()}},[tt,d,h,g,y,w,A,C,k,x]);const ft=tt.split("-");return W.jsx("div",{className:Ae(["react-flow__resize-control","nodrag",...ft,e,i]),ref:B,style:{...a,scale:P,...c&&{[_?"backgroundColor":"borderColor"]:c}},children:l})}et.memo(kB);function OB(){const{root:n,update:t,loading:e,error:i}=ED(),a=et.useCallback(c=>{t(d=>{for(const h of c)switch(h.type){case"add":d.nodes.push(h.item);break;case"replace":{const g=d.nodes.findIndex(y=>y.id===h.id);d.nodes[g]=h.item}break;case"remove":{const g=d.nodes.findIndex(y=>y.id===h.id);d.nodes.deleteByID(d.nodes[g].getID())}break;case"position":{const g=d.nodes.findIndex(y=>y.id===h.id);d.nodes[g].position=h.position}break;case"select":{const g=d.nodes.findIndex(y=>y.id===h.id);d.nodes[g].selected=h.selected}break}})},[t]),l=et.useCallback(c=>{t(d=>{for(const h of c)switch(h.type){case"add":d.edges.push(h.item);break;case"replace":{const g=d.edges.findIndex(y=>y.id===h.id);d.edges[g]=h.item}break;case"remove":{const g=d.edges.findIndex(y=>y.id===h.id);d.edges.deleteByID(d.edges[g].getID())}break;case"select":{const g=d.edges.findIndex(y=>y.id===h.id);d.edges[g].selected=h.selected}break}})},[t]);return e?W.jsx("div",{children:"Loading..."}):i?W.jsxs("div",{children:["Error: ",i.message]}):W.jsx("div",{style:{position:"fixed",inset:0,height:"100vh"},children:W.jsxs(eB,{nodes:n.nodes,edges:n.edges,onNodesChange:a,onEdgesChange:l,fitView:!0,children:[W.jsx(aB,{gap:10,size:1,color:"silver"}),W.jsx(hB,{orientation:"horizontal",showInteractive:!1}),W.jsx(NB,{})]})})}const IB=[{id:"1",type:"input",data:{label:"Multiplayer"},position:{x:250,y:25}},{id:"2",data:{label:"Graph"},position:{x:100,y:125}},{id:"3",data:{label:"React Flow"},position:{x:250,y:225},style:{borderColor:"#FF0072"}},{id:"4",type:"output",data:{label:"Yorkie"},position:{x:100,y:325},style:{borderColor:"#944DFA"}}],RB=[{id:"e1-2",source:"1",target:"2",type:"smoothstep"},{id:"e2-3",source:"2",target:"3",label:"with"},{id:"e3-4",source:"3",target:"4",label:"and",animated:!0}],MB={nodes:IB,edges:RB};dN.createRoot(document.getElementById("root")).render(W.jsxs(et.StrictMode,{children:[W.jsx(vD,{apiKey:"D6sd9E5ehtXBssmeRZ4QQP",rpcAddr:"https://api.yorkie.dev",children:W.jsx(AD,{docKey:`react-flow-${new Date().toISOString().substring(0,10).replace(/-/g,"")}`,initialRoot:MB,children:W.jsx(OB,{})})}),","]}));
