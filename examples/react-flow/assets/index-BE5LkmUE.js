var FE=Object.defineProperty;var ZE=(n,t,e)=>t in n?FE(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var y=(n,t,e)=>ZE(n,typeof t!="symbol"?t+"":t,e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function e(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(a){if(a.ep)return;a.ep=!0;const l=e(a);fetch(a.href,l)}})();function Qb(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var ym={exports:{}},uu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hw;function QE(){if(Hw)return uu;Hw=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(i,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var d in a)d!=="key"&&(l[d]=a[d])}else l=a;return a=l.ref,{$$typeof:n,type:i,key:c,ref:a!==void 0?a:null,props:l}}return uu.Fragment=t,uu.jsx=e,uu.jsxs=e,uu}var Vw;function WE(){return Vw||(Vw=1,ym.exports=QE()),ym.exports}var Q=WE(),vm={exports:{}},cu={},wm={exports:{}},Sm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jw;function tN(){return jw||(jw=1,function(n){function t(D,B){var $=D.length;D.push(B);t:for(;0<$;){var q=$-1>>>1,C=D[q];if(0<a(C,B))D[q]=B,D[$]=C,$=q;else break t}}function e(D){return D.length===0?null:D[0]}function i(D){if(D.length===0)return null;var B=D[0],$=D.pop();if($!==B){D[0]=$;t:for(var q=0,C=D.length,P=C>>>1;q<P;){var tt=2*(q+1)-1,rt=D[tt],ut=tt+1,gt=D[ut];if(0>a(rt,$))ut<C&&0>a(gt,rt)?(D[q]=gt,D[ut]=$,q=ut):(D[q]=rt,D[tt]=$,q=tt);else if(ut<C&&0>a(gt,$))D[q]=gt,D[ut]=$,q=ut;else break t}}return B}function a(D,B){var $=D.sortIndex-B.sortIndex;return $!==0?$:D.id-B.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();n.unstable_now=function(){return c.now()-d}}var h=[],g=[],p=1,w=null,v=3,S=!1,x=!1,E=!1,I=!1,k=typeof setTimeout=="function"?setTimeout:null,z=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function O(D){for(var B=e(g);B!==null;){if(B.callback===null)i(g);else if(B.startTime<=D)i(g),B.sortIndex=B.expirationTime,t(h,B);else break;B=e(g)}}function _(D){if(E=!1,O(D),!x)if(e(h)!==null)x=!0,J||(J=!0,ot());else{var B=e(g);B!==null&&Y(_,B.startTime-D)}}var J=!1,U=-1,W=5,F=-1;function nt(){return I?!0:!(n.unstable_now()-F<W)}function ft(){if(I=!1,J){var D=n.unstable_now();F=D;var B=!0;try{t:{x=!1,E&&(E=!1,z(U),U=-1),S=!0;var $=v;try{e:{for(O(D),w=e(h);w!==null&&!(w.expirationTime>D&&nt());){var q=w.callback;if(typeof q=="function"){w.callback=null,v=w.priorityLevel;var C=q(w.expirationTime<=D);if(D=n.unstable_now(),typeof C=="function"){w.callback=C,O(D),B=!0;break e}w===e(h)&&i(h),O(D)}else i(h);w=e(h)}if(w!==null)B=!0;else{var P=e(g);P!==null&&Y(_,P.startTime-D),B=!1}}break t}finally{w=null,v=$,S=!1}B=void 0}}finally{B?ot():J=!1}}}var ot;if(typeof N=="function")ot=function(){N(ft)};else if(typeof MessageChannel<"u"){var ct=new MessageChannel,R=ct.port2;ct.port1.onmessage=ft,ot=function(){R.postMessage(null)}}else ot=function(){k(ft,0)};function Y(D,B){U=k(function(){D(n.unstable_now())},B)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(D){D.callback=null},n.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W=0<D?Math.floor(1e3/D):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_next=function(D){switch(v){case 1:case 2:case 3:var B=3;break;default:B=v}var $=v;v=B;try{return D()}finally{v=$}},n.unstable_requestPaint=function(){I=!0},n.unstable_runWithPriority=function(D,B){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var $=v;v=D;try{return B()}finally{v=$}},n.unstable_scheduleCallback=function(D,B,$){var q=n.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?q+$:q):$=q,D){case 1:var C=-1;break;case 2:C=250;break;case 5:C=1073741823;break;case 4:C=1e4;break;default:C=5e3}return C=$+C,D={id:p++,callback:B,priorityLevel:D,startTime:$,expirationTime:C,sortIndex:-1},$>q?(D.sortIndex=$,t(g,D),e(h)===null&&D===e(g)&&(E?(z(U),U=-1):E=!0,Y(_,$-q))):(D.sortIndex=C,t(h,D),x||S||(x=!0,J||(J=!0,ot()))),D},n.unstable_shouldYield=nt,n.unstable_wrapCallback=function(D){var B=v;return function(){var $=v;v=B;try{return D.apply(this,arguments)}finally{v=$}}}}(Sm)),Sm}var Yw;function eN(){return Yw||(Yw=1,wm.exports=tN()),wm.exports}var bm={exports:{}},Rt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gw;function nN(){if(Gw)return Rt;Gw=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),w=Symbol.iterator;function v(C){return C===null||typeof C!="object"?null:(C=w&&C[w]||C["@@iterator"],typeof C=="function"?C:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,E={};function I(C,P,tt){this.props=C,this.context=P,this.refs=E,this.updater=tt||S}I.prototype.isReactComponent={},I.prototype.setState=function(C,P){if(typeof C!="object"&&typeof C!="function"&&C!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,C,P,"setState")},I.prototype.forceUpdate=function(C){this.updater.enqueueForceUpdate(this,C,"forceUpdate")};function k(){}k.prototype=I.prototype;function z(C,P,tt){this.props=C,this.context=P,this.refs=E,this.updater=tt||S}var N=z.prototype=new k;N.constructor=z,x(N,I.prototype),N.isPureReactComponent=!0;var O=Array.isArray,_={H:null,A:null,T:null,S:null,V:null},J=Object.prototype.hasOwnProperty;function U(C,P,tt,rt,ut,gt){return tt=gt.ref,{$$typeof:n,type:C,key:P,ref:tt!==void 0?tt:null,props:gt}}function W(C,P){return U(C.type,P,void 0,void 0,void 0,C.props)}function F(C){return typeof C=="object"&&C!==null&&C.$$typeof===n}function nt(C){var P={"=":"=0",":":"=2"};return"$"+C.replace(/[=:]/g,function(tt){return P[tt]})}var ft=/\/+/g;function ot(C,P){return typeof C=="object"&&C!==null&&C.key!=null?nt(""+C.key):P.toString(36)}function ct(){}function R(C){switch(C.status){case"fulfilled":return C.value;case"rejected":throw C.reason;default:switch(typeof C.status=="string"?C.then(ct,ct):(C.status="pending",C.then(function(P){C.status==="pending"&&(C.status="fulfilled",C.value=P)},function(P){C.status==="pending"&&(C.status="rejected",C.reason=P)})),C.status){case"fulfilled":return C.value;case"rejected":throw C.reason}}throw C}function Y(C,P,tt,rt,ut){var gt=typeof C;(gt==="undefined"||gt==="boolean")&&(C=null);var dt=!1;if(C===null)dt=!0;else switch(gt){case"bigint":case"string":case"number":dt=!0;break;case"object":switch(C.$$typeof){case n:case t:dt=!0;break;case p:return dt=C._init,Y(dt(C._payload),P,tt,rt,ut)}}if(dt)return ut=ut(C),dt=rt===""?"."+ot(C,0):rt,O(ut)?(tt="",dt!=null&&(tt=dt.replace(ft,"$&/")+"/"),Y(ut,P,tt,"",function(Dt){return Dt})):ut!=null&&(F(ut)&&(ut=W(ut,tt+(ut.key==null||C&&C.key===ut.key?"":(""+ut.key).replace(ft,"$&/")+"/")+dt)),P.push(ut)),1;dt=0;var pt=rt===""?".":rt+":";if(O(C))for(var yt=0;yt<C.length;yt++)rt=C[yt],gt=pt+ot(rt,yt),dt+=Y(rt,P,tt,gt,ut);else if(yt=v(C),typeof yt=="function")for(C=yt.call(C),yt=0;!(rt=C.next()).done;)rt=rt.value,gt=pt+ot(rt,yt++),dt+=Y(rt,P,tt,gt,ut);else if(gt==="object"){if(typeof C.then=="function")return Y(R(C),P,tt,rt,ut);throw P=String(C),Error("Objects are not valid as a React child (found: "+(P==="[object Object]"?"object with keys {"+Object.keys(C).join(", ")+"}":P)+"). If you meant to render a collection of children, use an array instead.")}return dt}function D(C,P,tt){if(C==null)return C;var rt=[],ut=0;return Y(C,rt,"","",function(gt){return P.call(tt,gt,ut++)}),rt}function B(C){if(C._status===-1){var P=C._result;P=P(),P.then(function(tt){(C._status===0||C._status===-1)&&(C._status=1,C._result=tt)},function(tt){(C._status===0||C._status===-1)&&(C._status=2,C._result=tt)}),C._status===-1&&(C._status=0,C._result=P)}if(C._status===1)return C._result.default;throw C._result}var $=typeof reportError=="function"?reportError:function(C){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var P=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof C=="object"&&C!==null&&typeof C.message=="string"?String(C.message):String(C),error:C});if(!window.dispatchEvent(P))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",C);return}console.error(C)};function q(){}return Rt.Children={map:D,forEach:function(C,P,tt){D(C,function(){P.apply(this,arguments)},tt)},count:function(C){var P=0;return D(C,function(){P++}),P},toArray:function(C){return D(C,function(P){return P})||[]},only:function(C){if(!F(C))throw Error("React.Children.only expected to receive a single React element child.");return C}},Rt.Component=I,Rt.Fragment=e,Rt.Profiler=a,Rt.PureComponent=z,Rt.StrictMode=i,Rt.Suspense=h,Rt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=_,Rt.__COMPILER_RUNTIME={__proto__:null,c:function(C){return _.H.useMemoCache(C)}},Rt.cache=function(C){return function(){return C.apply(null,arguments)}},Rt.cloneElement=function(C,P,tt){if(C==null)throw Error("The argument must be a React element, but you passed "+C+".");var rt=x({},C.props),ut=C.key,gt=void 0;if(P!=null)for(dt in P.ref!==void 0&&(gt=void 0),P.key!==void 0&&(ut=""+P.key),P)!J.call(P,dt)||dt==="key"||dt==="__self"||dt==="__source"||dt==="ref"&&P.ref===void 0||(rt[dt]=P[dt]);var dt=arguments.length-2;if(dt===1)rt.children=tt;else if(1<dt){for(var pt=Array(dt),yt=0;yt<dt;yt++)pt[yt]=arguments[yt+2];rt.children=pt}return U(C.type,ut,void 0,void 0,gt,rt)},Rt.createContext=function(C){return C={$$typeof:c,_currentValue:C,_currentValue2:C,_threadCount:0,Provider:null,Consumer:null},C.Provider=C,C.Consumer={$$typeof:l,_context:C},C},Rt.createElement=function(C,P,tt){var rt,ut={},gt=null;if(P!=null)for(rt in P.key!==void 0&&(gt=""+P.key),P)J.call(P,rt)&&rt!=="key"&&rt!=="__self"&&rt!=="__source"&&(ut[rt]=P[rt]);var dt=arguments.length-2;if(dt===1)ut.children=tt;else if(1<dt){for(var pt=Array(dt),yt=0;yt<dt;yt++)pt[yt]=arguments[yt+2];ut.children=pt}if(C&&C.defaultProps)for(rt in dt=C.defaultProps,dt)ut[rt]===void 0&&(ut[rt]=dt[rt]);return U(C,gt,void 0,void 0,null,ut)},Rt.createRef=function(){return{current:null}},Rt.forwardRef=function(C){return{$$typeof:d,render:C}},Rt.isValidElement=F,Rt.lazy=function(C){return{$$typeof:p,_payload:{_status:-1,_result:C},_init:B}},Rt.memo=function(C,P){return{$$typeof:g,type:C,compare:P===void 0?null:P}},Rt.startTransition=function(C){var P=_.T,tt={};_.T=tt;try{var rt=C(),ut=_.S;ut!==null&&ut(tt,rt),typeof rt=="object"&&rt!==null&&typeof rt.then=="function"&&rt.then(q,$)}catch(gt){$(gt)}finally{_.T=P}},Rt.unstable_useCacheRefresh=function(){return _.H.useCacheRefresh()},Rt.use=function(C){return _.H.use(C)},Rt.useActionState=function(C,P,tt){return _.H.useActionState(C,P,tt)},Rt.useCallback=function(C,P){return _.H.useCallback(C,P)},Rt.useContext=function(C){return _.H.useContext(C)},Rt.useDebugValue=function(){},Rt.useDeferredValue=function(C,P){return _.H.useDeferredValue(C,P)},Rt.useEffect=function(C,P,tt){var rt=_.H;if(typeof tt=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return rt.useEffect(C,P)},Rt.useId=function(){return _.H.useId()},Rt.useImperativeHandle=function(C,P,tt){return _.H.useImperativeHandle(C,P,tt)},Rt.useInsertionEffect=function(C,P){return _.H.useInsertionEffect(C,P)},Rt.useLayoutEffect=function(C,P){return _.H.useLayoutEffect(C,P)},Rt.useMemo=function(C,P){return _.H.useMemo(C,P)},Rt.useOptimistic=function(C,P){return _.H.useOptimistic(C,P)},Rt.useReducer=function(C,P,tt){return _.H.useReducer(C,P,tt)},Rt.useRef=function(C){return _.H.useRef(C)},Rt.useState=function(C){return _.H.useState(C)},Rt.useSyncExternalStore=function(C,P,tt){return _.H.useSyncExternalStore(C,P,tt)},Rt.useTransition=function(){return _.H.useTransition()},Rt.version="19.1.0",Rt}var Xw;function Gu(){return Xw||(Xw=1,bm.exports=nN()),bm.exports}var xm={exports:{}},Je={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kw;function rN(){if(Kw)return Je;Kw=1;var n=Gu();function t(h){var g="https://react.dev/errors/"+h;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)g+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+h+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var i={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(h,g,p){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:w==null?null:""+w,children:h,containerInfo:g,implementation:p}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(h,g){if(h==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Je.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Je.createPortal=function(h,g){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(t(299));return l(h,g,null,p)},Je.flushSync=function(h){var g=c.T,p=i.p;try{if(c.T=null,i.p=2,h)return h()}finally{c.T=g,i.p=p,i.d.f()}},Je.preconnect=function(h,g){typeof h=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,i.d.C(h,g))},Je.prefetchDNS=function(h){typeof h=="string"&&i.d.D(h)},Je.preinit=function(h,g){if(typeof h=="string"&&g&&typeof g.as=="string"){var p=g.as,w=d(p,g.crossOrigin),v=typeof g.integrity=="string"?g.integrity:void 0,S=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;p==="style"?i.d.S(h,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:w,integrity:v,fetchPriority:S}):p==="script"&&i.d.X(h,{crossOrigin:w,integrity:v,fetchPriority:S,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Je.preinitModule=function(h,g){if(typeof h=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var p=d(g.as,g.crossOrigin);i.d.M(h,{crossOrigin:p,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&i.d.M(h)},Je.preload=function(h,g){if(typeof h=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var p=g.as,w=d(p,g.crossOrigin);i.d.L(h,p,{crossOrigin:w,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Je.preloadModule=function(h,g){if(typeof h=="string")if(g){var p=d(g.as,g.crossOrigin);i.d.m(h,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:p,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else i.d.m(h)},Je.requestFormReset=function(h){i.d.r(h)},Je.unstable_batchedUpdates=function(h,g){return h(g)},Je.useFormState=function(h,g,p){return c.H.useFormState(h,g,p)},Je.useFormStatus=function(){return c.H.useHostTransitionStatus()},Je.version="19.1.0",Je}var Fw;function Wb(){if(Fw)return xm.exports;Fw=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),xm.exports=rN(),xm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zw;function iN(){if(Zw)return cu;Zw=1;var n=eN(),t=Gu(),e=Wb();function i(r){var s="https://react.dev/errors/"+r;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function l(r){var s=r,o=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(o=s.return),r=s.return;while(r)}return s.tag===3?o:null}function c(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function d(r){if(l(r)!==r)throw Error(i(188))}function h(r){var s=r.alternate;if(!s){if(s=l(r),s===null)throw Error(i(188));return s!==r?null:r}for(var o=r,u=s;;){var f=o.return;if(f===null)break;var m=f.alternate;if(m===null){if(u=f.return,u!==null){o=u;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===o)return d(f),r;if(m===u)return d(f),s;m=m.sibling}throw Error(i(188))}if(o.return!==u.return)o=f,u=m;else{for(var b=!1,A=f.child;A;){if(A===o){b=!0,o=f,u=m;break}if(A===u){b=!0,u=f,o=m;break}A=A.sibling}if(!b){for(A=m.child;A;){if(A===o){b=!0,o=m,u=f;break}if(A===u){b=!0,u=m,o=f;break}A=A.sibling}if(!b)throw Error(i(189))}}if(o.alternate!==u)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?r:s}function g(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r;for(r=r.child;r!==null;){if(s=g(r),s!==null)return s;r=r.sibling}return null}var p=Object.assign,w=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),z=Symbol.for("react.consumer"),N=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),J=Symbol.for("react.suspense_list"),U=Symbol.for("react.memo"),W=Symbol.for("react.lazy"),F=Symbol.for("react.activity"),nt=Symbol.for("react.memo_cache_sentinel"),ft=Symbol.iterator;function ot(r){return r===null||typeof r!="object"?null:(r=ft&&r[ft]||r["@@iterator"],typeof r=="function"?r:null)}var ct=Symbol.for("react.client.reference");function R(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===ct?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case x:return"Fragment";case I:return"Profiler";case E:return"StrictMode";case _:return"Suspense";case J:return"SuspenseList";case F:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case S:return"Portal";case N:return(r.displayName||"Context")+".Provider";case z:return(r._context.displayName||"Context")+".Consumer";case O:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case U:return s=r.displayName||null,s!==null?s:R(r.type)||"Memo";case W:s=r._payload,r=r._init;try{return R(r(s))}catch{}}return null}var Y=Array.isArray,D=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,B=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$={pending:!1,data:null,method:null,action:null},q=[],C=-1;function P(r){return{current:r}}function tt(r){0>C||(r.current=q[C],q[C]=null,C--)}function rt(r,s){C++,q[C]=r.current,r.current=s}var ut=P(null),gt=P(null),dt=P(null),pt=P(null);function yt(r,s){switch(rt(dt,s),rt(gt,r),rt(ut,null),s.nodeType){case 9:case 11:r=(r=s.documentElement)&&(r=r.namespaceURI)?yw(r):0;break;default:if(r=s.tagName,s=s.namespaceURI)s=yw(s),r=vw(s,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}tt(ut),rt(ut,r)}function Dt(){tt(ut),tt(gt),tt(dt)}function Vt(r){r.memoizedState!==null&&rt(pt,r);var s=ut.current,o=vw(s,r.type);s!==o&&(rt(gt,r),rt(ut,o))}function Ot(r){gt.current===r&&(tt(ut),tt(gt)),pt.current===r&&(tt(pt),iu._currentValue=$)}var Tt=Object.prototype.hasOwnProperty,Yt=n.unstable_scheduleCallback,qt=n.unstable_cancelCallback,xe=n.unstable_shouldYield,an=n.unstable_requestPaint,Oe=n.unstable_now,sl=n.unstable_getCurrentPriorityLevel,Pa=n.unstable_ImmediatePriority,hs=n.unstable_UserBlockingPriority,gs=n.unstable_NormalPriority,na=n.unstable_LowPriority,ms=n.unstable_IdlePriority,al=n.log,ra=n.unstable_setDisableYieldValue,$n=null,Ee=null;function rr(r){if(typeof al=="function"&&ra(r),Ee&&typeof Ee.setStrictMode=="function")try{Ee.setStrictMode($n,r)}catch{}}var Ie=Math.clz32?Math.clz32:ah,ih=Math.log,sh=Math.LN2;function ah(r){return r>>>=0,r===0?32:31-(ih(r)/sh|0)|0}var Ja=256,$a=4194304;function kr(r){var s=r&42;if(s!==0)return s;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function Ha(r,s,o){var u=r.pendingLanes;if(u===0)return 0;var f=0,m=r.suspendedLanes,b=r.pingedLanes;r=r.warmLanes;var A=u&134217727;return A!==0?(u=A&~m,u!==0?f=kr(u):(b&=A,b!==0?f=kr(b):o||(o=A&~r,o!==0&&(f=kr(o))))):(A=u&~m,A!==0?f=kr(A):b!==0?f=kr(b):o||(o=u&~r,o!==0&&(f=kr(o)))),f===0?0:s!==0&&s!==f&&(s&m)===0&&(m=f&-f,o=s&-s,m>=o||m===32&&(o&4194048)!==0)?s:f}function ia(r,s){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&s)===0}function oh(r,s){switch(r){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ic(){var r=Ja;return Ja<<=1,(Ja&4194048)===0&&(Ja=256),r}function sc(){var r=$a;return $a<<=1,($a&62914560)===0&&($a=4194304),r}function ol(r){for(var s=[],o=0;31>o;o++)s.push(r);return s}function sa(r,s){r.pendingLanes|=s,s!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function lh(r,s,o,u,f,m){var b=r.pendingLanes;r.pendingLanes=o,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=o,r.entangledLanes&=o,r.errorRecoveryDisabledLanes&=o,r.shellSuspendCounter=0;var A=r.entanglements,M=r.expirationTimes,X=r.hiddenUpdates;for(o=b&~o;0<o;){var st=31-Ie(o),lt=1<<st;A[st]=0,M[st]=-1;var K=X[st];if(K!==null)for(X[st]=null,st=0;st<K.length;st++){var Z=K[st];Z!==null&&(Z.lane&=-536870913)}o&=~lt}u!==0&&ll(r,u,0),m!==0&&f===0&&r.tag!==0&&(r.suspendedLanes|=m&~(b&~s))}function ll(r,s,o){r.pendingLanes|=s,r.suspendedLanes&=~s;var u=31-Ie(s);r.entangledLanes|=s,r.entanglements[u]=r.entanglements[u]|1073741824|o&4194090}function ac(r,s){var o=r.entangledLanes|=s;for(r=r.entanglements;o;){var u=31-Ie(o),f=1<<u;f&s|r[u]&s&&(r[u]|=s),o&=~f}}function ul(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function cl(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function oc(){var r=B.p;return r!==0?r:(r=window.event,r===void 0?32:_w(r.type))}function uh(r,s){var o=B.p;try{return B.p=r,s()}finally{B.p=o}}var ir=Math.random().toString(36).slice(2),Ne="__reactFiber$"+ir,qe="__reactProps$"+ir,ps="__reactContainer$"+ir,fl="__reactEvents$"+ir,ch="__reactListeners$"+ir,fh="__reactHandles$"+ir,lc="__reactResources$"+ir,aa="__reactMarker$"+ir;function dl(r){delete r[Ne],delete r[qe],delete r[fl],delete r[ch],delete r[fh]}function Or(r){var s=r[Ne];if(s)return s;for(var o=r.parentNode;o;){if(s=o[ps]||o[Ne]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(r=xw(r);r!==null;){if(o=r[Ne])return o;r=xw(r)}return s}r=o,o=r.parentNode}return null}function Ir(r){if(r=r[Ne]||r[ps]){var s=r.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return r}return null}function oa(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r.stateNode;throw Error(i(33))}function ys(r){var s=r[lc];return s||(s=r[lc]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function ve(r){r[aa]=!0}var uc=new Set,cc={};function Rr(r,s){vs(r,s),vs(r+"Capture",s)}function vs(r,s){for(cc[r]=s,r=0;r<s.length;r++)uc.add(s[r])}var fc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),dc={},hc={};function dh(r){return Tt.call(hc,r)?!0:Tt.call(dc,r)?!1:fc.test(r)?hc[r]=!0:(dc[r]=!0,!1)}function Va(r,s,o){if(dh(s))if(o===null)r.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":r.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){r.removeAttribute(s);return}}r.setAttribute(s,""+o)}}function ja(r,s,o){if(o===null)r.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(s);return}r.setAttribute(s,""+o)}}function Hn(r,s,o,u){if(u===null)r.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttributeNS(s,o,""+u)}}var hl,gl;function ws(r){if(hl===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);hl=s&&s[1]||"",gl=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+hl+r+gl}var ml=!1;function pl(r,s){if(!r||ml)return"";ml=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var lt=function(){throw Error()};if(Object.defineProperty(lt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(lt,[])}catch(Z){var K=Z}Reflect.construct(r,[],lt)}else{try{lt.call()}catch(Z){K=Z}r.call(lt.prototype)}}else{try{throw Error()}catch(Z){K=Z}(lt=r())&&typeof lt.catch=="function"&&lt.catch(function(){})}}catch(Z){if(Z&&K&&typeof Z.stack=="string")return[Z.stack,K.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=u.DetermineComponentFrameRoot(),b=m[0],A=m[1];if(b&&A){var M=b.split(`
`),X=A.split(`
`);for(f=u=0;u<M.length&&!M[u].includes("DetermineComponentFrameRoot");)u++;for(;f<X.length&&!X[f].includes("DetermineComponentFrameRoot");)f++;if(u===M.length||f===X.length)for(u=M.length-1,f=X.length-1;1<=u&&0<=f&&M[u]!==X[f];)f--;for(;1<=u&&0<=f;u--,f--)if(M[u]!==X[f]){if(u!==1||f!==1)do if(u--,f--,0>f||M[u]!==X[f]){var st=`
`+M[u].replace(" at new "," at ");return r.displayName&&st.includes("<anonymous>")&&(st=st.replace("<anonymous>",r.displayName)),st}while(1<=u&&0<=f);break}}}finally{ml=!1,Error.prepareStackTrace=o}return(o=r?r.displayName||r.name:"")?ws(o):""}function hh(r){switch(r.tag){case 26:case 27:case 5:return ws(r.type);case 16:return ws("Lazy");case 13:return ws("Suspense");case 19:return ws("SuspenseList");case 0:case 15:return pl(r.type,!1);case 11:return pl(r.type.render,!1);case 1:return pl(r.type,!0);case 31:return ws("Activity");default:return""}}function gc(r){try{var s="";do s+=hh(r),r=r.return;while(r);return s}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function Ge(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function mc(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Ya(r){var s=mc(r)?"checked":"value",o=Object.getOwnPropertyDescriptor(r.constructor.prototype,s),u=""+r[s];if(!r.hasOwnProperty(s)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var f=o.get,m=o.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return f.call(this)},set:function(b){u=""+b,m.call(this,b)}}),Object.defineProperty(r,s,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(b){u=""+b},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function Ga(r){r._valueTracker||(r._valueTracker=Ya(r))}function pc(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var o=s.getValue(),u="";return r&&(u=mc(r)?r.checked?"true":"false":r.value),r=u,r!==o?(s.setValue(r),!0):!1}function Ss(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var gh=/[\n"\\]/g;function Xe(r){return r.replace(gh,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Xa(r,s,o,u,f,m,b,A){r.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?r.type=b:r.removeAttribute("type"),s!=null?b==="number"?(s===0&&r.value===""||r.value!=s)&&(r.value=""+Ge(s)):r.value!==""+Ge(s)&&(r.value=""+Ge(s)):b!=="submit"&&b!=="reset"||r.removeAttribute("value"),s!=null?mh(r,b,Ge(s)):o!=null?mh(r,b,Ge(o)):u!=null&&r.removeAttribute("value"),f==null&&m!=null&&(r.defaultChecked=!!m),f!=null&&(r.checked=f&&typeof f!="function"&&typeof f!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?r.name=""+Ge(A):r.removeAttribute("name")}function gy(r,s,o,u,f,m,b,A){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(r.type=m),s!=null||o!=null){if(!(m!=="submit"&&m!=="reset"||s!=null))return;o=o!=null?""+Ge(o):"",s=s!=null?""+Ge(s):o,A||s===r.value||(r.value=s),r.defaultValue=s}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,r.checked=A?r.checked:!!u,r.defaultChecked=!!u,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(r.name=b)}function mh(r,s,o){s==="number"&&Ss(r.ownerDocument)===r||r.defaultValue===""+o||(r.defaultValue=""+o)}function Ka(r,s,o,u){if(r=r.options,s){s={};for(var f=0;f<o.length;f++)s["$"+o[f]]=!0;for(o=0;o<r.length;o++)f=s.hasOwnProperty("$"+r[o].value),r[o].selected!==f&&(r[o].selected=f),f&&u&&(r[o].defaultSelected=!0)}else{for(o=""+Ge(o),s=null,f=0;f<r.length;f++){if(r[f].value===o){r[f].selected=!0,u&&(r[f].defaultSelected=!0);return}s!==null||r[f].disabled||(s=r[f])}s!==null&&(s.selected=!0)}}function my(r,s,o){if(s!=null&&(s=""+Ge(s),s!==r.value&&(r.value=s),o==null)){r.defaultValue!==s&&(r.defaultValue=s);return}r.defaultValue=o!=null?""+Ge(o):""}function py(r,s,o,u){if(s==null){if(u!=null){if(o!=null)throw Error(i(92));if(Y(u)){if(1<u.length)throw Error(i(93));u=u[0]}o=u}o==null&&(o=""),s=o}o=Ge(s),r.defaultValue=o,u=r.textContent,u===o&&u!==""&&u!==null&&(r.value=u)}function Fa(r,s){if(s){var o=r.firstChild;if(o&&o===r.lastChild&&o.nodeType===3){o.nodeValue=s;return}}r.textContent=s}var GT=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function yy(r,s,o){var u=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?r.setProperty(s,""):s==="float"?r.cssFloat="":r[s]="":u?r.setProperty(s,o):typeof o!="number"||o===0||GT.has(s)?s==="float"?r.cssFloat=o:r[s]=(""+o).trim():r[s]=o+"px"}function vy(r,s,o){if(s!=null&&typeof s!="object")throw Error(i(62));if(r=r.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?r.setProperty(u,""):u==="float"?r.cssFloat="":r[u]="");for(var f in s)u=s[f],s.hasOwnProperty(f)&&o[f]!==u&&yy(r,f,u)}else for(var m in s)s.hasOwnProperty(m)&&yy(r,m,s[m])}function ph(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var XT=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),KT=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function yc(r){return KT.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}var yh=null;function vh(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Za=null,Qa=null;function wy(r){var s=Ir(r);if(s&&(r=s.stateNode)){var o=r[qe]||null;t:switch(r=s.stateNode,s.type){case"input":if(Xa(r,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=r;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Xe(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var u=o[s];if(u!==r&&u.form===r.form){var f=u[qe]||null;if(!f)throw Error(i(90));Xa(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(s=0;s<o.length;s++)u=o[s],u.form===r.form&&pc(u)}break t;case"textarea":my(r,o.value,o.defaultValue);break t;case"select":s=o.value,s!=null&&Ka(r,!!o.multiple,s,!1)}}}var wh=!1;function Sy(r,s,o){if(wh)return r(s,o);wh=!0;try{var u=r(s);return u}finally{if(wh=!1,(Za!==null||Qa!==null)&&(nf(),Za&&(s=Za,r=Qa,Qa=Za=null,wy(s),r)))for(s=0;s<r.length;s++)wy(r[s])}}function yl(r,s){var o=r.stateNode;if(o===null)return null;var u=o[qe]||null;if(u===null)return null;o=u[s];t:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(r=r.type,u=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!u;break t;default:r=!1}if(r)return null;if(o&&typeof o!="function")throw Error(i(231,s,typeof o));return o}var Mr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Sh=!1;if(Mr)try{var vl={};Object.defineProperty(vl,"passive",{get:function(){Sh=!0}}),window.addEventListener("test",vl,vl),window.removeEventListener("test",vl,vl)}catch{Sh=!1}var bs=null,bh=null,vc=null;function by(){if(vc)return vc;var r,s=bh,o=s.length,u,f="value"in bs?bs.value:bs.textContent,m=f.length;for(r=0;r<o&&s[r]===f[r];r++);var b=o-r;for(u=1;u<=b&&s[o-u]===f[m-u];u++);return vc=f.slice(r,1<u?1-u:void 0)}function wc(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function Sc(){return!0}function xy(){return!1}function Ke(r){function s(o,u,f,m,b){this._reactName=o,this._targetInst=f,this.type=u,this.nativeEvent=m,this.target=b,this.currentTarget=null;for(var A in r)r.hasOwnProperty(A)&&(o=r[A],this[A]=o?o(m):m[A]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Sc:xy,this.isPropagationStopped=xy,this}return p(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Sc)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Sc)},persist:function(){},isPersistent:Sc}),s}var la={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},bc=Ke(la),wl=p({},la,{view:0,detail:0}),FT=Ke(wl),xh,Th,Sl,xc=p({},wl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Eh,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Sl&&(Sl&&r.type==="mousemove"?(xh=r.screenX-Sl.screenX,Th=r.screenY-Sl.screenY):Th=xh=0,Sl=r),xh)},movementY:function(r){return"movementY"in r?r.movementY:Th}}),Ty=Ke(xc),ZT=p({},xc,{dataTransfer:0}),QT=Ke(ZT),WT=p({},wl,{relatedTarget:0}),Ah=Ke(WT),tA=p({},la,{animationName:0,elapsedTime:0,pseudoElement:0}),eA=Ke(tA),nA=p({},la,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),rA=Ke(nA),iA=p({},la,{data:0}),Ay=Ke(iA),sA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},aA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},oA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function lA(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=oA[r])?!!s[r]:!1}function Eh(){return lA}var uA=p({},wl,{key:function(r){if(r.key){var s=sA[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=wc(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?aA[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Eh,charCode:function(r){return r.type==="keypress"?wc(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?wc(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),cA=Ke(uA),fA=p({},xc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ey=Ke(fA),dA=p({},wl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Eh}),hA=Ke(dA),gA=p({},la,{propertyName:0,elapsedTime:0,pseudoElement:0}),mA=Ke(gA),pA=p({},xc,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),yA=Ke(pA),vA=p({},la,{newState:0,oldState:0}),wA=Ke(vA),SA=[9,13,27,32],Nh=Mr&&"CompositionEvent"in window,bl=null;Mr&&"documentMode"in document&&(bl=document.documentMode);var bA=Mr&&"TextEvent"in window&&!bl,Ny=Mr&&(!Nh||bl&&8<bl&&11>=bl),Cy=" ",Dy=!1;function ky(r,s){switch(r){case"keyup":return SA.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Oy(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Wa=!1;function xA(r,s){switch(r){case"compositionend":return Oy(s);case"keypress":return s.which!==32?null:(Dy=!0,Cy);case"textInput":return r=s.data,r===Cy&&Dy?null:r;default:return null}}function TA(r,s){if(Wa)return r==="compositionend"||!Nh&&ky(r,s)?(r=by(),vc=bh=bs=null,Wa=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Ny&&s.locale!=="ko"?null:s.data;default:return null}}var AA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Iy(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!AA[r.type]:s==="textarea"}function Ry(r,s,o,u){Za?Qa?Qa.push(u):Qa=[u]:Za=u,s=uf(s,"onChange"),0<s.length&&(o=new bc("onChange","change",null,o,u),r.push({event:o,listeners:s}))}var xl=null,Tl=null;function EA(r){dw(r,0)}function Tc(r){var s=oa(r);if(pc(s))return r}function My(r,s){if(r==="change")return s}var By=!1;if(Mr){var Ch;if(Mr){var Dh="oninput"in document;if(!Dh){var zy=document.createElement("div");zy.setAttribute("oninput","return;"),Dh=typeof zy.oninput=="function"}Ch=Dh}else Ch=!1;By=Ch&&(!document.documentMode||9<document.documentMode)}function Ly(){xl&&(xl.detachEvent("onpropertychange",_y),Tl=xl=null)}function _y(r){if(r.propertyName==="value"&&Tc(Tl)){var s=[];Ry(s,Tl,r,vh(r)),Sy(EA,s)}}function NA(r,s,o){r==="focusin"?(Ly(),xl=s,Tl=o,xl.attachEvent("onpropertychange",_y)):r==="focusout"&&Ly()}function CA(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Tc(Tl)}function DA(r,s){if(r==="click")return Tc(s)}function kA(r,s){if(r==="input"||r==="change")return Tc(s)}function OA(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var on=typeof Object.is=="function"?Object.is:OA;function Al(r,s){if(on(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var o=Object.keys(r),u=Object.keys(s);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var f=o[u];if(!Tt.call(s,f)||!on(r[f],s[f]))return!1}return!0}function Uy(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function qy(r,s){var o=Uy(r);r=0;for(var u;o;){if(o.nodeType===3){if(u=r+o.textContent.length,r<=s&&u>=s)return{node:o,offset:s-r};r=u}t:{for(;o;){if(o.nextSibling){o=o.nextSibling;break t}o=o.parentNode}o=void 0}o=Uy(o)}}function Py(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?Py(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function Jy(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var s=Ss(r.document);s instanceof r.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)r=s.contentWindow;else break;s=Ss(r.document)}return s}function kh(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}var IA=Mr&&"documentMode"in document&&11>=document.documentMode,to=null,Oh=null,El=null,Ih=!1;function $y(r,s,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Ih||to==null||to!==Ss(u)||(u=to,"selectionStart"in u&&kh(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),El&&Al(El,u)||(El=u,u=uf(Oh,"onSelect"),0<u.length&&(s=new bc("onSelect","select",null,s,o),r.push({event:s,listeners:u}),s.target=to)))}function ua(r,s){var o={};return o[r.toLowerCase()]=s.toLowerCase(),o["Webkit"+r]="webkit"+s,o["Moz"+r]="moz"+s,o}var eo={animationend:ua("Animation","AnimationEnd"),animationiteration:ua("Animation","AnimationIteration"),animationstart:ua("Animation","AnimationStart"),transitionrun:ua("Transition","TransitionRun"),transitionstart:ua("Transition","TransitionStart"),transitioncancel:ua("Transition","TransitionCancel"),transitionend:ua("Transition","TransitionEnd")},Rh={},Hy={};Mr&&(Hy=document.createElement("div").style,"AnimationEvent"in window||(delete eo.animationend.animation,delete eo.animationiteration.animation,delete eo.animationstart.animation),"TransitionEvent"in window||delete eo.transitionend.transition);function ca(r){if(Rh[r])return Rh[r];if(!eo[r])return r;var s=eo[r],o;for(o in s)if(s.hasOwnProperty(o)&&o in Hy)return Rh[r]=s[o];return r}var Vy=ca("animationend"),jy=ca("animationiteration"),Yy=ca("animationstart"),RA=ca("transitionrun"),MA=ca("transitionstart"),BA=ca("transitioncancel"),Gy=ca("transitionend"),Xy=new Map,Mh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Mh.push("scrollEnd");function Vn(r,s){Xy.set(r,s),Rr(s,[r])}var Ky=new WeakMap;function Sn(r,s){if(typeof r=="object"&&r!==null){var o=Ky.get(r);return o!==void 0?o:(s={value:r,source:s,stack:gc(s)},Ky.set(r,s),s)}return{value:r,source:s,stack:gc(s)}}var bn=[],no=0,Bh=0;function Ac(){for(var r=no,s=Bh=no=0;s<r;){var o=bn[s];bn[s++]=null;var u=bn[s];bn[s++]=null;var f=bn[s];bn[s++]=null;var m=bn[s];if(bn[s++]=null,u!==null&&f!==null){var b=u.pending;b===null?f.next=f:(f.next=b.next,b.next=f),u.pending=f}m!==0&&Fy(o,f,m)}}function Ec(r,s,o,u){bn[no++]=r,bn[no++]=s,bn[no++]=o,bn[no++]=u,Bh|=u,r.lanes|=u,r=r.alternate,r!==null&&(r.lanes|=u)}function zh(r,s,o,u){return Ec(r,s,o,u),Nc(r)}function ro(r,s){return Ec(r,null,null,s),Nc(r)}function Fy(r,s,o){r.lanes|=o;var u=r.alternate;u!==null&&(u.lanes|=o);for(var f=!1,m=r.return;m!==null;)m.childLanes|=o,u=m.alternate,u!==null&&(u.childLanes|=o),m.tag===22&&(r=m.stateNode,r===null||r._visibility&1||(f=!0)),r=m,m=m.return;return r.tag===3?(m=r.stateNode,f&&s!==null&&(f=31-Ie(o),r=m.hiddenUpdates,u=r[f],u===null?r[f]=[s]:u.push(s),s.lane=o|536870912),m):null}function Nc(r){if(50<Fl)throw Fl=0,Jg=null,Error(i(185));for(var s=r.return;s!==null;)r=s,s=r.return;return r.tag===3?r.stateNode:null}var io={};function zA(r,s,o,u){this.tag=r,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ln(r,s,o,u){return new zA(r,s,o,u)}function Lh(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Br(r,s){var o=r.alternate;return o===null?(o=ln(r.tag,s,r.key,r.mode),o.elementType=r.elementType,o.type=r.type,o.stateNode=r.stateNode,o.alternate=r,r.alternate=o):(o.pendingProps=s,o.type=r.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=r.flags&65011712,o.childLanes=r.childLanes,o.lanes=r.lanes,o.child=r.child,o.memoizedProps=r.memoizedProps,o.memoizedState=r.memoizedState,o.updateQueue=r.updateQueue,s=r.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=r.sibling,o.index=r.index,o.ref=r.ref,o.refCleanup=r.refCleanup,o}function Zy(r,s){r.flags&=65011714;var o=r.alternate;return o===null?(r.childLanes=0,r.lanes=s,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,s=o.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),r}function Cc(r,s,o,u,f,m){var b=0;if(u=r,typeof r=="function")Lh(r)&&(b=1);else if(typeof r=="string")b=_E(r,o,ut.current)?26:r==="html"||r==="head"||r==="body"?27:5;else t:switch(r){case F:return r=ln(31,o,s,f),r.elementType=F,r.lanes=m,r;case x:return fa(o.children,f,m,s);case E:b=8,f|=24;break;case I:return r=ln(12,o,s,f|2),r.elementType=I,r.lanes=m,r;case _:return r=ln(13,o,s,f),r.elementType=_,r.lanes=m,r;case J:return r=ln(19,o,s,f),r.elementType=J,r.lanes=m,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case k:case N:b=10;break t;case z:b=9;break t;case O:b=11;break t;case U:b=14;break t;case W:b=16,u=null;break t}b=29,o=Error(i(130,r===null?"null":typeof r,"")),u=null}return s=ln(b,o,s,f),s.elementType=r,s.type=u,s.lanes=m,s}function fa(r,s,o,u){return r=ln(7,r,u,s),r.lanes=o,r}function _h(r,s,o){return r=ln(6,r,null,s),r.lanes=o,r}function Uh(r,s,o){return s=ln(4,r.children!==null?r.children:[],r.key,s),s.lanes=o,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}var so=[],ao=0,Dc=null,kc=0,xn=[],Tn=0,da=null,zr=1,Lr="";function ha(r,s){so[ao++]=kc,so[ao++]=Dc,Dc=r,kc=s}function Qy(r,s,o){xn[Tn++]=zr,xn[Tn++]=Lr,xn[Tn++]=da,da=r;var u=zr;r=Lr;var f=32-Ie(u)-1;u&=~(1<<f),o+=1;var m=32-Ie(s)+f;if(30<m){var b=f-f%5;m=(u&(1<<b)-1).toString(32),u>>=b,f-=b,zr=1<<32-Ie(s)+f|o<<f|u,Lr=m+r}else zr=1<<m|o<<f|u,Lr=r}function qh(r){r.return!==null&&(ha(r,1),Qy(r,1,0))}function Ph(r){for(;r===Dc;)Dc=so[--ao],so[ao]=null,kc=so[--ao],so[ao]=null;for(;r===da;)da=xn[--Tn],xn[Tn]=null,Lr=xn[--Tn],xn[Tn]=null,zr=xn[--Tn],xn[Tn]=null}var je=null,ue=null,jt=!1,ga=null,sr=!1,Jh=Error(i(519));function ma(r){var s=Error(i(418,""));throw Dl(Sn(s,r)),Jh}function Wy(r){var s=r.stateNode,o=r.type,u=r.memoizedProps;switch(s[Ne]=r,s[qe]=u,o){case"dialog":Lt("cancel",s),Lt("close",s);break;case"iframe":case"object":case"embed":Lt("load",s);break;case"video":case"audio":for(o=0;o<Ql.length;o++)Lt(Ql[o],s);break;case"source":Lt("error",s);break;case"img":case"image":case"link":Lt("error",s),Lt("load",s);break;case"details":Lt("toggle",s);break;case"input":Lt("invalid",s),gy(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),Ga(s);break;case"select":Lt("invalid",s);break;case"textarea":Lt("invalid",s),py(s,u.value,u.defaultValue,u.children),Ga(s)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||u.suppressHydrationWarning===!0||pw(s.textContent,o)?(u.popover!=null&&(Lt("beforetoggle",s),Lt("toggle",s)),u.onScroll!=null&&Lt("scroll",s),u.onScrollEnd!=null&&Lt("scrollend",s),u.onClick!=null&&(s.onclick=cf),s=!0):s=!1,s||ma(r)}function t0(r){for(je=r.return;je;)switch(je.tag){case 5:case 13:sr=!1;return;case 27:case 3:sr=!0;return;default:je=je.return}}function Nl(r){if(r!==je)return!1;if(!jt)return t0(r),jt=!0,!1;var s=r.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=r.type,o=!(o!=="form"&&o!=="button")||rm(r.type,r.memoizedProps)),o=!o),o&&ue&&ma(r),t0(r),s===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));t:{for(r=r.nextSibling,s=0;r;){if(r.nodeType===8)if(o=r.data,o==="/$"){if(s===0){ue=Yn(r.nextSibling);break t}s--}else o!=="$"&&o!=="$!"&&o!=="$?"||s++;r=r.nextSibling}ue=null}}else s===27?(s=ue,_s(r.type)?(r=om,om=null,ue=r):ue=s):ue=je?Yn(r.stateNode.nextSibling):null;return!0}function Cl(){ue=je=null,jt=!1}function e0(){var r=ga;return r!==null&&(Qe===null?Qe=r:Qe.push.apply(Qe,r),ga=null),r}function Dl(r){ga===null?ga=[r]:ga.push(r)}var $h=P(null),pa=null,_r=null;function xs(r,s,o){rt($h,s._currentValue),s._currentValue=o}function Ur(r){r._currentValue=$h.current,tt($h)}function Hh(r,s,o){for(;r!==null;){var u=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),r===o)break;r=r.return}}function Vh(r,s,o,u){var f=r.child;for(f!==null&&(f.return=r);f!==null;){var m=f.dependencies;if(m!==null){var b=f.child;m=m.firstContext;t:for(;m!==null;){var A=m;m=f;for(var M=0;M<s.length;M++)if(A.context===s[M]){m.lanes|=o,A=m.alternate,A!==null&&(A.lanes|=o),Hh(m.return,o,r),u||(b=null);break t}m=A.next}}else if(f.tag===18){if(b=f.return,b===null)throw Error(i(341));b.lanes|=o,m=b.alternate,m!==null&&(m.lanes|=o),Hh(b,o,r),b=null}else b=f.child;if(b!==null)b.return=f;else for(b=f;b!==null;){if(b===r){b=null;break}if(f=b.sibling,f!==null){f.return=b.return,b=f;break}b=b.return}f=b}}function kl(r,s,o,u){r=null;for(var f=s,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var b=f.alternate;if(b===null)throw Error(i(387));if(b=b.memoizedProps,b!==null){var A=f.type;on(f.pendingProps.value,b.value)||(r!==null?r.push(A):r=[A])}}else if(f===pt.current){if(b=f.alternate,b===null)throw Error(i(387));b.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(r!==null?r.push(iu):r=[iu])}f=f.return}r!==null&&Vh(s,r,o,u),s.flags|=262144}function Oc(r){for(r=r.firstContext;r!==null;){if(!on(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function ya(r){pa=r,_r=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function Pe(r){return n0(pa,r)}function Ic(r,s){return pa===null&&ya(r),n0(r,s)}function n0(r,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},_r===null){if(r===null)throw Error(i(308));_r=s,r.dependencies={lanes:0,firstContext:s},r.flags|=524288}else _r=_r.next=s;return o}var LA=typeof AbortController<"u"?AbortController:function(){var r=[],s=this.signal={aborted:!1,addEventListener:function(o,u){r.push(u)}};this.abort=function(){s.aborted=!0,r.forEach(function(o){return o()})}},_A=n.unstable_scheduleCallback,UA=n.unstable_NormalPriority,Te={$$typeof:N,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function jh(){return{controller:new LA,data:new Map,refCount:0}}function Ol(r){r.refCount--,r.refCount===0&&_A(UA,function(){r.controller.abort()})}var Il=null,Yh=0,oo=0,lo=null;function qA(r,s){if(Il===null){var o=Il=[];Yh=0,oo=Xg(),lo={status:"pending",value:void 0,then:function(u){o.push(u)}}}return Yh++,s.then(r0,r0),s}function r0(){if(--Yh===0&&Il!==null){lo!==null&&(lo.status="fulfilled");var r=Il;Il=null,oo=0,lo=null;for(var s=0;s<r.length;s++)(0,r[s])()}}function PA(r,s){var o=[],u={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return r.then(function(){u.status="fulfilled",u.value=s;for(var f=0;f<o.length;f++)(0,o[f])(s)},function(f){for(u.status="rejected",u.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),u}var i0=D.S;D.S=function(r,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&qA(r,s),i0!==null&&i0(r,s)};var va=P(null);function Gh(){var r=va.current;return r!==null?r:re.pooledCache}function Rc(r,s){s===null?rt(va,va.current):rt(va,s.pool)}function s0(){var r=Gh();return r===null?null:{parent:Te._currentValue,pool:r}}var Rl=Error(i(460)),a0=Error(i(474)),Mc=Error(i(542)),Xh={then:function(){}};function o0(r){return r=r.status,r==="fulfilled"||r==="rejected"}function Bc(){}function l0(r,s,o){switch(o=r[o],o===void 0?r.push(s):o!==s&&(s.then(Bc,Bc),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,c0(r),r;default:if(typeof s.status=="string")s.then(Bc,Bc);else{if(r=re,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=s,r.status="pending",r.then(function(u){if(s.status==="pending"){var f=s;f.status="fulfilled",f.value=u}},function(u){if(s.status==="pending"){var f=s;f.status="rejected",f.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,c0(r),r}throw Ml=s,Rl}}var Ml=null;function u0(){if(Ml===null)throw Error(i(459));var r=Ml;return Ml=null,r}function c0(r){if(r===Rl||r===Mc)throw Error(i(483))}var Ts=!1;function Kh(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Fh(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function As(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function Es(r,s,o){var u=r.updateQueue;if(u===null)return null;if(u=u.shared,(Xt&2)!==0){var f=u.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),u.pending=s,s=Nc(r),Fy(r,null,o),s}return Ec(r,u,s,o),Nc(r)}function Bl(r,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var u=s.lanes;u&=r.pendingLanes,o|=u,s.lanes=o,ac(r,o)}}function Zh(r,s){var o=r.updateQueue,u=r.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var f=null,m=null;if(o=o.firstBaseUpdate,o!==null){do{var b={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};m===null?f=m=b:m=m.next=b,o=o.next}while(o!==null);m===null?f=m=s:m=m.next=s}else f=m=s;o={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:u.shared,callbacks:u.callbacks},r.updateQueue=o;return}r=o.lastBaseUpdate,r===null?o.firstBaseUpdate=s:r.next=s,o.lastBaseUpdate=s}var Qh=!1;function zl(){if(Qh){var r=lo;if(r!==null)throw r}}function Ll(r,s,o,u){Qh=!1;var f=r.updateQueue;Ts=!1;var m=f.firstBaseUpdate,b=f.lastBaseUpdate,A=f.shared.pending;if(A!==null){f.shared.pending=null;var M=A,X=M.next;M.next=null,b===null?m=X:b.next=X,b=M;var st=r.alternate;st!==null&&(st=st.updateQueue,A=st.lastBaseUpdate,A!==b&&(A===null?st.firstBaseUpdate=X:A.next=X,st.lastBaseUpdate=M))}if(m!==null){var lt=f.baseState;b=0,st=X=M=null,A=m;do{var K=A.lane&-536870913,Z=K!==A.lane;if(Z?(Pt&K)===K:(u&K)===K){K!==0&&K===oo&&(Qh=!0),st!==null&&(st=st.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});t:{var kt=r,Nt=A;K=s;var Wt=o;switch(Nt.tag){case 1:if(kt=Nt.payload,typeof kt=="function"){lt=kt.call(Wt,lt,K);break t}lt=kt;break t;case 3:kt.flags=kt.flags&-65537|128;case 0:if(kt=Nt.payload,K=typeof kt=="function"?kt.call(Wt,lt,K):kt,K==null)break t;lt=p({},lt,K);break t;case 2:Ts=!0}}K=A.callback,K!==null&&(r.flags|=64,Z&&(r.flags|=8192),Z=f.callbacks,Z===null?f.callbacks=[K]:Z.push(K))}else Z={lane:K,tag:A.tag,payload:A.payload,callback:A.callback,next:null},st===null?(X=st=Z,M=lt):st=st.next=Z,b|=K;if(A=A.next,A===null){if(A=f.shared.pending,A===null)break;Z=A,A=Z.next,Z.next=null,f.lastBaseUpdate=Z,f.shared.pending=null}}while(!0);st===null&&(M=lt),f.baseState=M,f.firstBaseUpdate=X,f.lastBaseUpdate=st,m===null&&(f.shared.lanes=0),Ms|=b,r.lanes=b,r.memoizedState=lt}}function f0(r,s){if(typeof r!="function")throw Error(i(191,r));r.call(s)}function d0(r,s){var o=r.callbacks;if(o!==null)for(r.callbacks=null,r=0;r<o.length;r++)f0(o[r],s)}var uo=P(null),zc=P(0);function h0(r,s){r=jr,rt(zc,r),rt(uo,s),jr=r|s.baseLanes}function Wh(){rt(zc,jr),rt(uo,uo.current)}function tg(){jr=zc.current,tt(uo),tt(zc)}var Ns=0,Mt=null,Zt=null,we=null,Lc=!1,co=!1,wa=!1,_c=0,_l=0,fo=null,JA=0;function ge(){throw Error(i(321))}function eg(r,s){if(s===null)return!1;for(var o=0;o<s.length&&o<r.length;o++)if(!on(r[o],s[o]))return!1;return!0}function ng(r,s,o,u,f,m){return Ns=m,Mt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,D.H=r===null||r.memoizedState===null?F0:Z0,wa=!1,m=o(u,f),wa=!1,co&&(m=m0(s,o,u,f)),g0(r),m}function g0(r){D.H=Hc;var s=Zt!==null&&Zt.next!==null;if(Ns=0,we=Zt=Mt=null,Lc=!1,_l=0,fo=null,s)throw Error(i(300));r===null||Ce||(r=r.dependencies,r!==null&&Oc(r)&&(Ce=!0))}function m0(r,s,o,u){Mt=r;var f=0;do{if(co&&(fo=null),_l=0,co=!1,25<=f)throw Error(i(301));if(f+=1,we=Zt=null,r.updateQueue!=null){var m=r.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}D.H=XA,m=s(o,u)}while(co);return m}function $A(){var r=D.H,s=r.useState()[0];return s=typeof s.then=="function"?Ul(s):s,r=r.useState()[0],(Zt!==null?Zt.memoizedState:null)!==r&&(Mt.flags|=1024),s}function rg(){var r=_c!==0;return _c=0,r}function ig(r,s,o){s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~o}function sg(r){if(Lc){for(r=r.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Lc=!1}Ns=0,we=Zt=Mt=null,co=!1,_l=_c=0,fo=null}function Fe(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return we===null?Mt.memoizedState=we=r:we=we.next=r,we}function Se(){if(Zt===null){var r=Mt.alternate;r=r!==null?r.memoizedState:null}else r=Zt.next;var s=we===null?Mt.memoizedState:we.next;if(s!==null)we=s,Zt=r;else{if(r===null)throw Mt.alternate===null?Error(i(467)):Error(i(310));Zt=r,r={memoizedState:Zt.memoizedState,baseState:Zt.baseState,baseQueue:Zt.baseQueue,queue:Zt.queue,next:null},we===null?Mt.memoizedState=we=r:we=we.next=r}return we}function ag(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ul(r){var s=_l;return _l+=1,fo===null&&(fo=[]),r=l0(fo,r,s),s=Mt,(we===null?s.memoizedState:we.next)===null&&(s=s.alternate,D.H=s===null||s.memoizedState===null?F0:Z0),r}function Uc(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return Ul(r);if(r.$$typeof===N)return Pe(r)}throw Error(i(438,String(r)))}function og(r){var s=null,o=Mt.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var u=Mt.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(f){return f.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=ag(),Mt.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(r),u=0;u<r;u++)o[u]=nt;return s.index++,o}function qr(r,s){return typeof s=="function"?s(r):s}function qc(r){var s=Se();return lg(s,Zt,r)}function lg(r,s,o){var u=r.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=o;var f=r.baseQueue,m=u.pending;if(m!==null){if(f!==null){var b=f.next;f.next=m.next,m.next=b}s.baseQueue=f=m,u.pending=null}if(m=r.baseState,f===null)r.memoizedState=m;else{s=f.next;var A=b=null,M=null,X=s,st=!1;do{var lt=X.lane&-536870913;if(lt!==X.lane?(Pt&lt)===lt:(Ns&lt)===lt){var K=X.revertLane;if(K===0)M!==null&&(M=M.next={lane:0,revertLane:0,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),lt===oo&&(st=!0);else if((Ns&K)===K){X=X.next,K===oo&&(st=!0);continue}else lt={lane:0,revertLane:X.revertLane,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},M===null?(A=M=lt,b=m):M=M.next=lt,Mt.lanes|=K,Ms|=K;lt=X.action,wa&&o(m,lt),m=X.hasEagerState?X.eagerState:o(m,lt)}else K={lane:lt,revertLane:X.revertLane,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},M===null?(A=M=K,b=m):M=M.next=K,Mt.lanes|=lt,Ms|=lt;X=X.next}while(X!==null&&X!==s);if(M===null?b=m:M.next=A,!on(m,r.memoizedState)&&(Ce=!0,st&&(o=lo,o!==null)))throw o;r.memoizedState=m,r.baseState=b,r.baseQueue=M,u.lastRenderedState=m}return f===null&&(u.lanes=0),[r.memoizedState,u.dispatch]}function ug(r){var s=Se(),o=s.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=r;var u=o.dispatch,f=o.pending,m=s.memoizedState;if(f!==null){o.pending=null;var b=f=f.next;do m=r(m,b.action),b=b.next;while(b!==f);on(m,s.memoizedState)||(Ce=!0),s.memoizedState=m,s.baseQueue===null&&(s.baseState=m),o.lastRenderedState=m}return[m,u]}function p0(r,s,o){var u=Mt,f=Se(),m=jt;if(m){if(o===void 0)throw Error(i(407));o=o()}else o=s();var b=!on((Zt||f).memoizedState,o);b&&(f.memoizedState=o,Ce=!0),f=f.queue;var A=w0.bind(null,u,f,r);if(ql(2048,8,A,[r]),f.getSnapshot!==s||b||we!==null&&we.memoizedState.tag&1){if(u.flags|=2048,ho(9,Pc(),v0.bind(null,u,f,o,s),null),re===null)throw Error(i(349));m||(Ns&124)!==0||y0(u,s,o)}return o}function y0(r,s,o){r.flags|=16384,r={getSnapshot:s,value:o},s=Mt.updateQueue,s===null?(s=ag(),Mt.updateQueue=s,s.stores=[r]):(o=s.stores,o===null?s.stores=[r]:o.push(r))}function v0(r,s,o,u){s.value=o,s.getSnapshot=u,S0(s)&&b0(r)}function w0(r,s,o){return o(function(){S0(s)&&b0(r)})}function S0(r){var s=r.getSnapshot;r=r.value;try{var o=s();return!on(r,o)}catch{return!0}}function b0(r){var s=ro(r,2);s!==null&&hn(s,r,2)}function cg(r){var s=Fe();if(typeof r=="function"){var o=r;if(r=o(),wa){rr(!0);try{o()}finally{rr(!1)}}}return s.memoizedState=s.baseState=r,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qr,lastRenderedState:r},s}function x0(r,s,o,u){return r.baseState=o,lg(r,Zt,typeof u=="function"?u:qr)}function HA(r,s,o,u,f){if($c(r))throw Error(i(485));if(r=s.action,r!==null){var m={payload:f,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){m.listeners.push(b)}};D.T!==null?o(!0):m.isTransition=!1,u(m),o=s.pending,o===null?(m.next=s.pending=m,T0(s,m)):(m.next=o.next,s.pending=o.next=m)}}function T0(r,s){var o=s.action,u=s.payload,f=r.state;if(s.isTransition){var m=D.T,b={};D.T=b;try{var A=o(f,u),M=D.S;M!==null&&M(b,A),A0(r,s,A)}catch(X){fg(r,s,X)}finally{D.T=m}}else try{m=o(f,u),A0(r,s,m)}catch(X){fg(r,s,X)}}function A0(r,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){E0(r,s,u)},function(u){return fg(r,s,u)}):E0(r,s,o)}function E0(r,s,o){s.status="fulfilled",s.value=o,N0(s),r.state=o,s=r.pending,s!==null&&(o=s.next,o===s?r.pending=null:(o=o.next,s.next=o,T0(r,o)))}function fg(r,s,o){var u=r.pending;if(r.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=o,N0(s),s=s.next;while(s!==u)}r.action=null}function N0(r){r=r.listeners;for(var s=0;s<r.length;s++)(0,r[s])()}function C0(r,s){return s}function D0(r,s){if(jt){var o=re.formState;if(o!==null){t:{var u=Mt;if(jt){if(ue){e:{for(var f=ue,m=sr;f.nodeType!==8;){if(!m){f=null;break e}if(f=Yn(f.nextSibling),f===null){f=null;break e}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){ue=Yn(f.nextSibling),u=f.data==="F!";break t}}ma(u)}u=!1}u&&(s=o[0])}}return o=Fe(),o.memoizedState=o.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:C0,lastRenderedState:s},o.queue=u,o=G0.bind(null,Mt,u),u.dispatch=o,u=cg(!1),m=pg.bind(null,Mt,!1,u.queue),u=Fe(),f={state:s,dispatch:null,action:r,pending:null},u.queue=f,o=HA.bind(null,Mt,f,m,o),f.dispatch=o,u.memoizedState=r,[s,o,!1]}function k0(r){var s=Se();return O0(s,Zt,r)}function O0(r,s,o){if(s=lg(r,s,C0)[0],r=qc(qr)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=Ul(s)}catch(b){throw b===Rl?Mc:b}else u=s;s=Se();var f=s.queue,m=f.dispatch;return o!==s.memoizedState&&(Mt.flags|=2048,ho(9,Pc(),VA.bind(null,f,o),null)),[u,m,r]}function VA(r,s){r.action=s}function I0(r){var s=Se(),o=Zt;if(o!==null)return O0(s,o,r);Se(),s=s.memoizedState,o=Se();var u=o.queue.dispatch;return o.memoizedState=r,[s,u,!1]}function ho(r,s,o,u){return r={tag:r,create:o,deps:u,inst:s,next:null},s=Mt.updateQueue,s===null&&(s=ag(),Mt.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=r.next=r:(u=o.next,o.next=r,r.next=u,s.lastEffect=r),r}function Pc(){return{destroy:void 0,resource:void 0}}function R0(){return Se().memoizedState}function Jc(r,s,o,u){var f=Fe();u=u===void 0?null:u,Mt.flags|=r,f.memoizedState=ho(1|s,Pc(),o,u)}function ql(r,s,o,u){var f=Se();u=u===void 0?null:u;var m=f.memoizedState.inst;Zt!==null&&u!==null&&eg(u,Zt.memoizedState.deps)?f.memoizedState=ho(s,m,o,u):(Mt.flags|=r,f.memoizedState=ho(1|s,m,o,u))}function M0(r,s){Jc(8390656,8,r,s)}function B0(r,s){ql(2048,8,r,s)}function z0(r,s){return ql(4,2,r,s)}function L0(r,s){return ql(4,4,r,s)}function _0(r,s){if(typeof s=="function"){r=r();var o=s(r);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function U0(r,s,o){o=o!=null?o.concat([r]):null,ql(4,4,_0.bind(null,s,r),o)}function dg(){}function q0(r,s){var o=Se();s=s===void 0?null:s;var u=o.memoizedState;return s!==null&&eg(s,u[1])?u[0]:(o.memoizedState=[r,s],r)}function P0(r,s){var o=Se();s=s===void 0?null:s;var u=o.memoizedState;if(s!==null&&eg(s,u[1]))return u[0];if(u=r(),wa){rr(!0);try{r()}finally{rr(!1)}}return o.memoizedState=[u,s],u}function hg(r,s,o){return o===void 0||(Ns&1073741824)!==0?r.memoizedState=s:(r.memoizedState=o,r=Hv(),Mt.lanes|=r,Ms|=r,o)}function J0(r,s,o,u){return on(o,s)?o:uo.current!==null?(r=hg(r,o,u),on(r,s)||(Ce=!0),r):(Ns&42)===0?(Ce=!0,r.memoizedState=o):(r=Hv(),Mt.lanes|=r,Ms|=r,s)}function $0(r,s,o,u,f){var m=B.p;B.p=m!==0&&8>m?m:8;var b=D.T,A={};D.T=A,pg(r,!1,s,o);try{var M=f(),X=D.S;if(X!==null&&X(A,M),M!==null&&typeof M=="object"&&typeof M.then=="function"){var st=PA(M,u);Pl(r,s,st,dn(r))}else Pl(r,s,u,dn(r))}catch(lt){Pl(r,s,{then:function(){},status:"rejected",reason:lt},dn())}finally{B.p=m,D.T=b}}function jA(){}function gg(r,s,o,u){if(r.tag!==5)throw Error(i(476));var f=H0(r).queue;$0(r,f,s,$,o===null?jA:function(){return V0(r),o(u)})}function H0(r){var s=r.memoizedState;if(s!==null)return s;s={memoizedState:$,baseState:$,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qr,lastRenderedState:$},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qr,lastRenderedState:o},next:null},r.memoizedState=s,r=r.alternate,r!==null&&(r.memoizedState=s),s}function V0(r){var s=H0(r).next.queue;Pl(r,s,{},dn())}function mg(){return Pe(iu)}function j0(){return Se().memoizedState}function Y0(){return Se().memoizedState}function YA(r){for(var s=r.return;s!==null;){switch(s.tag){case 24:case 3:var o=dn();r=As(o);var u=Es(s,r,o);u!==null&&(hn(u,s,o),Bl(u,s,o)),s={cache:jh()},r.payload=s;return}s=s.return}}function GA(r,s,o){var u=dn();o={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},$c(r)?X0(s,o):(o=zh(r,s,o,u),o!==null&&(hn(o,r,u),K0(o,s,u)))}function G0(r,s,o){var u=dn();Pl(r,s,o,u)}function Pl(r,s,o,u){var f={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if($c(r))X0(s,f);else{var m=r.alternate;if(r.lanes===0&&(m===null||m.lanes===0)&&(m=s.lastRenderedReducer,m!==null))try{var b=s.lastRenderedState,A=m(b,o);if(f.hasEagerState=!0,f.eagerState=A,on(A,b))return Ec(r,s,f,0),re===null&&Ac(),!1}catch{}finally{}if(o=zh(r,s,f,u),o!==null)return hn(o,r,u),K0(o,s,u),!0}return!1}function pg(r,s,o,u){if(u={lane:2,revertLane:Xg(),action:u,hasEagerState:!1,eagerState:null,next:null},$c(r)){if(s)throw Error(i(479))}else s=zh(r,o,u,2),s!==null&&hn(s,r,2)}function $c(r){var s=r.alternate;return r===Mt||s!==null&&s===Mt}function X0(r,s){co=Lc=!0;var o=r.pending;o===null?s.next=s:(s.next=o.next,o.next=s),r.pending=s}function K0(r,s,o){if((o&4194048)!==0){var u=s.lanes;u&=r.pendingLanes,o|=u,s.lanes=o,ac(r,o)}}var Hc={readContext:Pe,use:Uc,useCallback:ge,useContext:ge,useEffect:ge,useImperativeHandle:ge,useLayoutEffect:ge,useInsertionEffect:ge,useMemo:ge,useReducer:ge,useRef:ge,useState:ge,useDebugValue:ge,useDeferredValue:ge,useTransition:ge,useSyncExternalStore:ge,useId:ge,useHostTransitionStatus:ge,useFormState:ge,useActionState:ge,useOptimistic:ge,useMemoCache:ge,useCacheRefresh:ge},F0={readContext:Pe,use:Uc,useCallback:function(r,s){return Fe().memoizedState=[r,s===void 0?null:s],r},useContext:Pe,useEffect:M0,useImperativeHandle:function(r,s,o){o=o!=null?o.concat([r]):null,Jc(4194308,4,_0.bind(null,s,r),o)},useLayoutEffect:function(r,s){return Jc(4194308,4,r,s)},useInsertionEffect:function(r,s){Jc(4,2,r,s)},useMemo:function(r,s){var o=Fe();s=s===void 0?null:s;var u=r();if(wa){rr(!0);try{r()}finally{rr(!1)}}return o.memoizedState=[u,s],u},useReducer:function(r,s,o){var u=Fe();if(o!==void 0){var f=o(s);if(wa){rr(!0);try{o(s)}finally{rr(!1)}}}else f=s;return u.memoizedState=u.baseState=f,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:f},u.queue=r,r=r.dispatch=GA.bind(null,Mt,r),[u.memoizedState,r]},useRef:function(r){var s=Fe();return r={current:r},s.memoizedState=r},useState:function(r){r=cg(r);var s=r.queue,o=G0.bind(null,Mt,s);return s.dispatch=o,[r.memoizedState,o]},useDebugValue:dg,useDeferredValue:function(r,s){var o=Fe();return hg(o,r,s)},useTransition:function(){var r=cg(!1);return r=$0.bind(null,Mt,r.queue,!0,!1),Fe().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,s,o){var u=Mt,f=Fe();if(jt){if(o===void 0)throw Error(i(407));o=o()}else{if(o=s(),re===null)throw Error(i(349));(Pt&124)!==0||y0(u,s,o)}f.memoizedState=o;var m={value:o,getSnapshot:s};return f.queue=m,M0(w0.bind(null,u,m,r),[r]),u.flags|=2048,ho(9,Pc(),v0.bind(null,u,m,o,s),null),o},useId:function(){var r=Fe(),s=re.identifierPrefix;if(jt){var o=Lr,u=zr;o=(u&~(1<<32-Ie(u)-1)).toString(32)+o,s="«"+s+"R"+o,o=_c++,0<o&&(s+="H"+o.toString(32)),s+="»"}else o=JA++,s="«"+s+"r"+o.toString(32)+"»";return r.memoizedState=s},useHostTransitionStatus:mg,useFormState:D0,useActionState:D0,useOptimistic:function(r){var s=Fe();s.memoizedState=s.baseState=r;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=pg.bind(null,Mt,!0,o),o.dispatch=s,[r,s]},useMemoCache:og,useCacheRefresh:function(){return Fe().memoizedState=YA.bind(null,Mt)}},Z0={readContext:Pe,use:Uc,useCallback:q0,useContext:Pe,useEffect:B0,useImperativeHandle:U0,useInsertionEffect:z0,useLayoutEffect:L0,useMemo:P0,useReducer:qc,useRef:R0,useState:function(){return qc(qr)},useDebugValue:dg,useDeferredValue:function(r,s){var o=Se();return J0(o,Zt.memoizedState,r,s)},useTransition:function(){var r=qc(qr)[0],s=Se().memoizedState;return[typeof r=="boolean"?r:Ul(r),s]},useSyncExternalStore:p0,useId:j0,useHostTransitionStatus:mg,useFormState:k0,useActionState:k0,useOptimistic:function(r,s){var o=Se();return x0(o,Zt,r,s)},useMemoCache:og,useCacheRefresh:Y0},XA={readContext:Pe,use:Uc,useCallback:q0,useContext:Pe,useEffect:B0,useImperativeHandle:U0,useInsertionEffect:z0,useLayoutEffect:L0,useMemo:P0,useReducer:ug,useRef:R0,useState:function(){return ug(qr)},useDebugValue:dg,useDeferredValue:function(r,s){var o=Se();return Zt===null?hg(o,r,s):J0(o,Zt.memoizedState,r,s)},useTransition:function(){var r=ug(qr)[0],s=Se().memoizedState;return[typeof r=="boolean"?r:Ul(r),s]},useSyncExternalStore:p0,useId:j0,useHostTransitionStatus:mg,useFormState:I0,useActionState:I0,useOptimistic:function(r,s){var o=Se();return Zt!==null?x0(o,Zt,r,s):(o.baseState=r,[r,o.queue.dispatch])},useMemoCache:og,useCacheRefresh:Y0},go=null,Jl=0;function Vc(r){var s=Jl;return Jl+=1,go===null&&(go=[]),l0(go,r,s)}function $l(r,s){s=s.props.ref,r.ref=s!==void 0?s:null}function jc(r,s){throw s.$$typeof===w?Error(i(525)):(r=Object.prototype.toString.call(s),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r)))}function Q0(r){var s=r._init;return s(r._payload)}function W0(r){function s(H,L){if(r){var G=H.deletions;G===null?(H.deletions=[L],H.flags|=16):G.push(L)}}function o(H,L){if(!r)return null;for(;L!==null;)s(H,L),L=L.sibling;return null}function u(H){for(var L=new Map;H!==null;)H.key!==null?L.set(H.key,H):L.set(H.index,H),H=H.sibling;return L}function f(H,L){return H=Br(H,L),H.index=0,H.sibling=null,H}function m(H,L,G){return H.index=G,r?(G=H.alternate,G!==null?(G=G.index,G<L?(H.flags|=67108866,L):G):(H.flags|=67108866,L)):(H.flags|=1048576,L)}function b(H){return r&&H.alternate===null&&(H.flags|=67108866),H}function A(H,L,G,at){return L===null||L.tag!==6?(L=_h(G,H.mode,at),L.return=H,L):(L=f(L,G),L.return=H,L)}function M(H,L,G,at){var vt=G.type;return vt===x?st(H,L,G.props.children,at,G.key):L!==null&&(L.elementType===vt||typeof vt=="object"&&vt!==null&&vt.$$typeof===W&&Q0(vt)===L.type)?(L=f(L,G.props),$l(L,G),L.return=H,L):(L=Cc(G.type,G.key,G.props,null,H.mode,at),$l(L,G),L.return=H,L)}function X(H,L,G,at){return L===null||L.tag!==4||L.stateNode.containerInfo!==G.containerInfo||L.stateNode.implementation!==G.implementation?(L=Uh(G,H.mode,at),L.return=H,L):(L=f(L,G.children||[]),L.return=H,L)}function st(H,L,G,at,vt){return L===null||L.tag!==7?(L=fa(G,H.mode,at,vt),L.return=H,L):(L=f(L,G),L.return=H,L)}function lt(H,L,G){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=_h(""+L,H.mode,G),L.return=H,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case v:return G=Cc(L.type,L.key,L.props,null,H.mode,G),$l(G,L),G.return=H,G;case S:return L=Uh(L,H.mode,G),L.return=H,L;case W:var at=L._init;return L=at(L._payload),lt(H,L,G)}if(Y(L)||ot(L))return L=fa(L,H.mode,G,null),L.return=H,L;if(typeof L.then=="function")return lt(H,Vc(L),G);if(L.$$typeof===N)return lt(H,Ic(H,L),G);jc(H,L)}return null}function K(H,L,G,at){var vt=L!==null?L.key:null;if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return vt!==null?null:A(H,L,""+G,at);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case v:return G.key===vt?M(H,L,G,at):null;case S:return G.key===vt?X(H,L,G,at):null;case W:return vt=G._init,G=vt(G._payload),K(H,L,G,at)}if(Y(G)||ot(G))return vt!==null?null:st(H,L,G,at,null);if(typeof G.then=="function")return K(H,L,Vc(G),at);if(G.$$typeof===N)return K(H,L,Ic(H,G),at);jc(H,G)}return null}function Z(H,L,G,at,vt){if(typeof at=="string"&&at!==""||typeof at=="number"||typeof at=="bigint")return H=H.get(G)||null,A(L,H,""+at,vt);if(typeof at=="object"&&at!==null){switch(at.$$typeof){case v:return H=H.get(at.key===null?G:at.key)||null,M(L,H,at,vt);case S:return H=H.get(at.key===null?G:at.key)||null,X(L,H,at,vt);case W:var Bt=at._init;return at=Bt(at._payload),Z(H,L,G,at,vt)}if(Y(at)||ot(at))return H=H.get(G)||null,st(L,H,at,vt,null);if(typeof at.then=="function")return Z(H,L,G,Vc(at),vt);if(at.$$typeof===N)return Z(H,L,G,Ic(L,at),vt);jc(L,at)}return null}function kt(H,L,G,at){for(var vt=null,Bt=null,St=L,Ct=L=0,ke=null;St!==null&&Ct<G.length;Ct++){St.index>Ct?(ke=St,St=null):ke=St.sibling;var Ht=K(H,St,G[Ct],at);if(Ht===null){St===null&&(St=ke);break}r&&St&&Ht.alternate===null&&s(H,St),L=m(Ht,L,Ct),Bt===null?vt=Ht:Bt.sibling=Ht,Bt=Ht,St=ke}if(Ct===G.length)return o(H,St),jt&&ha(H,Ct),vt;if(St===null){for(;Ct<G.length;Ct++)St=lt(H,G[Ct],at),St!==null&&(L=m(St,L,Ct),Bt===null?vt=St:Bt.sibling=St,Bt=St);return jt&&ha(H,Ct),vt}for(St=u(St);Ct<G.length;Ct++)ke=Z(St,H,Ct,G[Ct],at),ke!==null&&(r&&ke.alternate!==null&&St.delete(ke.key===null?Ct:ke.key),L=m(ke,L,Ct),Bt===null?vt=ke:Bt.sibling=ke,Bt=ke);return r&&St.forEach(function($s){return s(H,$s)}),jt&&ha(H,Ct),vt}function Nt(H,L,G,at){if(G==null)throw Error(i(151));for(var vt=null,Bt=null,St=L,Ct=L=0,ke=null,Ht=G.next();St!==null&&!Ht.done;Ct++,Ht=G.next()){St.index>Ct?(ke=St,St=null):ke=St.sibling;var $s=K(H,St,Ht.value,at);if($s===null){St===null&&(St=ke);break}r&&St&&$s.alternate===null&&s(H,St),L=m($s,L,Ct),Bt===null?vt=$s:Bt.sibling=$s,Bt=$s,St=ke}if(Ht.done)return o(H,St),jt&&ha(H,Ct),vt;if(St===null){for(;!Ht.done;Ct++,Ht=G.next())Ht=lt(H,Ht.value,at),Ht!==null&&(L=m(Ht,L,Ct),Bt===null?vt=Ht:Bt.sibling=Ht,Bt=Ht);return jt&&ha(H,Ct),vt}for(St=u(St);!Ht.done;Ct++,Ht=G.next())Ht=Z(St,H,Ct,Ht.value,at),Ht!==null&&(r&&Ht.alternate!==null&&St.delete(Ht.key===null?Ct:Ht.key),L=m(Ht,L,Ct),Bt===null?vt=Ht:Bt.sibling=Ht,Bt=Ht);return r&&St.forEach(function(KE){return s(H,KE)}),jt&&ha(H,Ct),vt}function Wt(H,L,G,at){if(typeof G=="object"&&G!==null&&G.type===x&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case v:t:{for(var vt=G.key;L!==null;){if(L.key===vt){if(vt=G.type,vt===x){if(L.tag===7){o(H,L.sibling),at=f(L,G.props.children),at.return=H,H=at;break t}}else if(L.elementType===vt||typeof vt=="object"&&vt!==null&&vt.$$typeof===W&&Q0(vt)===L.type){o(H,L.sibling),at=f(L,G.props),$l(at,G),at.return=H,H=at;break t}o(H,L);break}else s(H,L);L=L.sibling}G.type===x?(at=fa(G.props.children,H.mode,at,G.key),at.return=H,H=at):(at=Cc(G.type,G.key,G.props,null,H.mode,at),$l(at,G),at.return=H,H=at)}return b(H);case S:t:{for(vt=G.key;L!==null;){if(L.key===vt)if(L.tag===4&&L.stateNode.containerInfo===G.containerInfo&&L.stateNode.implementation===G.implementation){o(H,L.sibling),at=f(L,G.children||[]),at.return=H,H=at;break t}else{o(H,L);break}else s(H,L);L=L.sibling}at=Uh(G,H.mode,at),at.return=H,H=at}return b(H);case W:return vt=G._init,G=vt(G._payload),Wt(H,L,G,at)}if(Y(G))return kt(H,L,G,at);if(ot(G)){if(vt=ot(G),typeof vt!="function")throw Error(i(150));return G=vt.call(G),Nt(H,L,G,at)}if(typeof G.then=="function")return Wt(H,L,Vc(G),at);if(G.$$typeof===N)return Wt(H,L,Ic(H,G),at);jc(H,G)}return typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint"?(G=""+G,L!==null&&L.tag===6?(o(H,L.sibling),at=f(L,G),at.return=H,H=at):(o(H,L),at=_h(G,H.mode,at),at.return=H,H=at),b(H)):o(H,L)}return function(H,L,G,at){try{Jl=0;var vt=Wt(H,L,G,at);return go=null,vt}catch(St){if(St===Rl||St===Mc)throw St;var Bt=ln(29,St,null,H.mode);return Bt.lanes=at,Bt.return=H,Bt}finally{}}}var mo=W0(!0),tv=W0(!1),An=P(null),ar=null;function Cs(r){var s=r.alternate;rt(Ae,Ae.current&1),rt(An,r),ar===null&&(s===null||uo.current!==null||s.memoizedState!==null)&&(ar=r)}function ev(r){if(r.tag===22){if(rt(Ae,Ae.current),rt(An,r),ar===null){var s=r.alternate;s!==null&&s.memoizedState!==null&&(ar=r)}}else Ds()}function Ds(){rt(Ae,Ae.current),rt(An,An.current)}function Pr(r){tt(An),ar===r&&(ar=null),tt(Ae)}var Ae=P(0);function Yc(r){for(var s=r;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||am(o)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function yg(r,s,o,u){s=r.memoizedState,o=o(u,s),o=o==null?s:p({},s,o),r.memoizedState=o,r.lanes===0&&(r.updateQueue.baseState=o)}var vg={enqueueSetState:function(r,s,o){r=r._reactInternals;var u=dn(),f=As(u);f.payload=s,o!=null&&(f.callback=o),s=Es(r,f,u),s!==null&&(hn(s,r,u),Bl(s,r,u))},enqueueReplaceState:function(r,s,o){r=r._reactInternals;var u=dn(),f=As(u);f.tag=1,f.payload=s,o!=null&&(f.callback=o),s=Es(r,f,u),s!==null&&(hn(s,r,u),Bl(s,r,u))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var o=dn(),u=As(o);u.tag=2,s!=null&&(u.callback=s),s=Es(r,u,o),s!==null&&(hn(s,r,o),Bl(s,r,o))}};function nv(r,s,o,u,f,m,b){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(u,m,b):s.prototype&&s.prototype.isPureReactComponent?!Al(o,u)||!Al(f,m):!0}function rv(r,s,o,u){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,u),s.state!==r&&vg.enqueueReplaceState(s,s.state,null)}function Sa(r,s){var o=s;if("ref"in s){o={};for(var u in s)u!=="ref"&&(o[u]=s[u])}if(r=r.defaultProps){o===s&&(o=p({},o));for(var f in r)o[f]===void 0&&(o[f]=r[f])}return o}var Gc=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)};function iv(r){Gc(r)}function sv(r){console.error(r)}function av(r){Gc(r)}function Xc(r,s){try{var o=r.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function ov(r,s,o){try{var u=r.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function wg(r,s,o){return o=As(o),o.tag=3,o.payload={element:null},o.callback=function(){Xc(r,s)},o}function lv(r){return r=As(r),r.tag=3,r}function uv(r,s,o,u){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var m=u.value;r.payload=function(){return f(m)},r.callback=function(){ov(s,o,u)}}var b=o.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(r.callback=function(){ov(s,o,u),typeof f!="function"&&(Bs===null?Bs=new Set([this]):Bs.add(this));var A=u.stack;this.componentDidCatch(u.value,{componentStack:A!==null?A:""})})}function KA(r,s,o,u,f){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=o.alternate,s!==null&&kl(s,o,f,!0),o=An.current,o!==null){switch(o.tag){case 13:return ar===null?Hg():o.alternate===null&&ce===0&&(ce=3),o.flags&=-257,o.flags|=65536,o.lanes=f,u===Xh?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([u]):s.add(u),jg(r,u,f)),!1;case 22:return o.flags|=65536,u===Xh?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([u]):o.add(u)),jg(r,u,f)),!1}throw Error(i(435,o.tag))}return jg(r,u,f),Hg(),!1}if(jt)return s=An.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=f,u!==Jh&&(r=Error(i(422),{cause:u}),Dl(Sn(r,o)))):(u!==Jh&&(s=Error(i(423),{cause:u}),Dl(Sn(s,o))),r=r.current.alternate,r.flags|=65536,f&=-f,r.lanes|=f,u=Sn(u,o),f=wg(r.stateNode,u,f),Zh(r,f),ce!==4&&(ce=2)),!1;var m=Error(i(520),{cause:u});if(m=Sn(m,o),Kl===null?Kl=[m]:Kl.push(m),ce!==4&&(ce=2),s===null)return!0;u=Sn(u,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,r=f&-f,o.lanes|=r,r=wg(o.stateNode,u,r),Zh(o,r),!1;case 1:if(s=o.type,m=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Bs===null||!Bs.has(m))))return o.flags|=65536,f&=-f,o.lanes|=f,f=lv(f),uv(f,r,o,u),Zh(o,f),!1}o=o.return}while(o!==null);return!1}var cv=Error(i(461)),Ce=!1;function Re(r,s,o,u){s.child=r===null?tv(s,null,o,u):mo(s,r.child,o,u)}function fv(r,s,o,u,f){o=o.render;var m=s.ref;if("ref"in u){var b={};for(var A in u)A!=="ref"&&(b[A]=u[A])}else b=u;return ya(s),u=ng(r,s,o,b,m,f),A=rg(),r!==null&&!Ce?(ig(r,s,f),Jr(r,s,f)):(jt&&A&&qh(s),s.flags|=1,Re(r,s,u,f),s.child)}function dv(r,s,o,u,f){if(r===null){var m=o.type;return typeof m=="function"&&!Lh(m)&&m.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=m,hv(r,s,m,u,f)):(r=Cc(o.type,null,u,s,s.mode,f),r.ref=s.ref,r.return=s,s.child=r)}if(m=r.child,!Cg(r,f)){var b=m.memoizedProps;if(o=o.compare,o=o!==null?o:Al,o(b,u)&&r.ref===s.ref)return Jr(r,s,f)}return s.flags|=1,r=Br(m,u),r.ref=s.ref,r.return=s,s.child=r}function hv(r,s,o,u,f){if(r!==null){var m=r.memoizedProps;if(Al(m,u)&&r.ref===s.ref)if(Ce=!1,s.pendingProps=u=m,Cg(r,f))(r.flags&131072)!==0&&(Ce=!0);else return s.lanes=r.lanes,Jr(r,s,f)}return Sg(r,s,o,u,f)}function gv(r,s,o){var u=s.pendingProps,f=u.children,m=r!==null?r.memoizedState:null;if(u.mode==="hidden"){if((s.flags&128)!==0){if(u=m!==null?m.baseLanes|o:o,r!==null){for(f=s.child=r.child,m=0;f!==null;)m=m|f.lanes|f.childLanes,f=f.sibling;s.childLanes=m&~u}else s.childLanes=0,s.child=null;return mv(r,s,u,o)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},r!==null&&Rc(s,m!==null?m.cachePool:null),m!==null?h0(s,m):Wh(),ev(s);else return s.lanes=s.childLanes=536870912,mv(r,s,m!==null?m.baseLanes|o:o,o)}else m!==null?(Rc(s,m.cachePool),h0(s,m),Ds(),s.memoizedState=null):(r!==null&&Rc(s,null),Wh(),Ds());return Re(r,s,f,o),s.child}function mv(r,s,o,u){var f=Gh();return f=f===null?null:{parent:Te._currentValue,pool:f},s.memoizedState={baseLanes:o,cachePool:f},r!==null&&Rc(s,null),Wh(),ev(s),r!==null&&kl(r,s,u,!0),null}function Kc(r,s){var o=s.ref;if(o===null)r!==null&&r.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(i(284));(r===null||r.ref!==o)&&(s.flags|=4194816)}}function Sg(r,s,o,u,f){return ya(s),o=ng(r,s,o,u,void 0,f),u=rg(),r!==null&&!Ce?(ig(r,s,f),Jr(r,s,f)):(jt&&u&&qh(s),s.flags|=1,Re(r,s,o,f),s.child)}function pv(r,s,o,u,f,m){return ya(s),s.updateQueue=null,o=m0(s,u,o,f),g0(r),u=rg(),r!==null&&!Ce?(ig(r,s,m),Jr(r,s,m)):(jt&&u&&qh(s),s.flags|=1,Re(r,s,o,m),s.child)}function yv(r,s,o,u,f){if(ya(s),s.stateNode===null){var m=io,b=o.contextType;typeof b=="object"&&b!==null&&(m=Pe(b)),m=new o(u,m),s.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=vg,s.stateNode=m,m._reactInternals=s,m=s.stateNode,m.props=u,m.state=s.memoizedState,m.refs={},Kh(s),b=o.contextType,m.context=typeof b=="object"&&b!==null?Pe(b):io,m.state=s.memoizedState,b=o.getDerivedStateFromProps,typeof b=="function"&&(yg(s,o,b,u),m.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(b=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),b!==m.state&&vg.enqueueReplaceState(m,m.state,null),Ll(s,u,m,f),zl(),m.state=s.memoizedState),typeof m.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(r===null){m=s.stateNode;var A=s.memoizedProps,M=Sa(o,A);m.props=M;var X=m.context,st=o.contextType;b=io,typeof st=="object"&&st!==null&&(b=Pe(st));var lt=o.getDerivedStateFromProps;st=typeof lt=="function"||typeof m.getSnapshotBeforeUpdate=="function",A=s.pendingProps!==A,st||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(A||X!==b)&&rv(s,m,u,b),Ts=!1;var K=s.memoizedState;m.state=K,Ll(s,u,m,f),zl(),X=s.memoizedState,A||K!==X||Ts?(typeof lt=="function"&&(yg(s,o,lt,u),X=s.memoizedState),(M=Ts||nv(s,o,M,u,K,X,b))?(st||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(s.flags|=4194308)):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=X),m.props=u,m.state=X,m.context=b,u=M):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{m=s.stateNode,Fh(r,s),b=s.memoizedProps,st=Sa(o,b),m.props=st,lt=s.pendingProps,K=m.context,X=o.contextType,M=io,typeof X=="object"&&X!==null&&(M=Pe(X)),A=o.getDerivedStateFromProps,(X=typeof A=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(b!==lt||K!==M)&&rv(s,m,u,M),Ts=!1,K=s.memoizedState,m.state=K,Ll(s,u,m,f),zl();var Z=s.memoizedState;b!==lt||K!==Z||Ts||r!==null&&r.dependencies!==null&&Oc(r.dependencies)?(typeof A=="function"&&(yg(s,o,A,u),Z=s.memoizedState),(st=Ts||nv(s,o,st,u,K,Z,M)||r!==null&&r.dependencies!==null&&Oc(r.dependencies))?(X||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(u,Z,M),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(u,Z,M)),typeof m.componentDidUpdate=="function"&&(s.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof m.componentDidUpdate!="function"||b===r.memoizedProps&&K===r.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||b===r.memoizedProps&&K===r.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=Z),m.props=u,m.state=Z,m.context=M,u=st):(typeof m.componentDidUpdate!="function"||b===r.memoizedProps&&K===r.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||b===r.memoizedProps&&K===r.memoizedState||(s.flags|=1024),u=!1)}return m=u,Kc(r,s),u=(s.flags&128)!==0,m||u?(m=s.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:m.render(),s.flags|=1,r!==null&&u?(s.child=mo(s,r.child,null,f),s.child=mo(s,null,o,f)):Re(r,s,o,f),s.memoizedState=m.state,r=s.child):r=Jr(r,s,f),r}function vv(r,s,o,u){return Cl(),s.flags|=256,Re(r,s,o,u),s.child}var bg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function xg(r){return{baseLanes:r,cachePool:s0()}}function Tg(r,s,o){return r=r!==null?r.childLanes&~o:0,s&&(r|=En),r}function wv(r,s,o){var u=s.pendingProps,f=!1,m=(s.flags&128)!==0,b;if((b=m)||(b=r!==null&&r.memoizedState===null?!1:(Ae.current&2)!==0),b&&(f=!0,s.flags&=-129),b=(s.flags&32)!==0,s.flags&=-33,r===null){if(jt){if(f?Cs(s):Ds(),jt){var A=ue,M;if(M=A){t:{for(M=A,A=sr;M.nodeType!==8;){if(!A){A=null;break t}if(M=Yn(M.nextSibling),M===null){A=null;break t}}A=M}A!==null?(s.memoizedState={dehydrated:A,treeContext:da!==null?{id:zr,overflow:Lr}:null,retryLane:536870912,hydrationErrors:null},M=ln(18,null,null,0),M.stateNode=A,M.return=s,s.child=M,je=s,ue=null,M=!0):M=!1}M||ma(s)}if(A=s.memoizedState,A!==null&&(A=A.dehydrated,A!==null))return am(A)?s.lanes=32:s.lanes=536870912,null;Pr(s)}return A=u.children,u=u.fallback,f?(Ds(),f=s.mode,A=Fc({mode:"hidden",children:A},f),u=fa(u,f,o,null),A.return=s,u.return=s,A.sibling=u,s.child=A,f=s.child,f.memoizedState=xg(o),f.childLanes=Tg(r,b,o),s.memoizedState=bg,u):(Cs(s),Ag(s,A))}if(M=r.memoizedState,M!==null&&(A=M.dehydrated,A!==null)){if(m)s.flags&256?(Cs(s),s.flags&=-257,s=Eg(r,s,o)):s.memoizedState!==null?(Ds(),s.child=r.child,s.flags|=128,s=null):(Ds(),f=u.fallback,A=s.mode,u=Fc({mode:"visible",children:u.children},A),f=fa(f,A,o,null),f.flags|=2,u.return=s,f.return=s,u.sibling=f,s.child=u,mo(s,r.child,null,o),u=s.child,u.memoizedState=xg(o),u.childLanes=Tg(r,b,o),s.memoizedState=bg,s=f);else if(Cs(s),am(A)){if(b=A.nextSibling&&A.nextSibling.dataset,b)var X=b.dgst;b=X,u=Error(i(419)),u.stack="",u.digest=b,Dl({value:u,source:null,stack:null}),s=Eg(r,s,o)}else if(Ce||kl(r,s,o,!1),b=(o&r.childLanes)!==0,Ce||b){if(b=re,b!==null&&(u=o&-o,u=(u&42)!==0?1:ul(u),u=(u&(b.suspendedLanes|o))!==0?0:u,u!==0&&u!==M.retryLane))throw M.retryLane=u,ro(r,u),hn(b,r,u),cv;A.data==="$?"||Hg(),s=Eg(r,s,o)}else A.data==="$?"?(s.flags|=192,s.child=r.child,s=null):(r=M.treeContext,ue=Yn(A.nextSibling),je=s,jt=!0,ga=null,sr=!1,r!==null&&(xn[Tn++]=zr,xn[Tn++]=Lr,xn[Tn++]=da,zr=r.id,Lr=r.overflow,da=s),s=Ag(s,u.children),s.flags|=4096);return s}return f?(Ds(),f=u.fallback,A=s.mode,M=r.child,X=M.sibling,u=Br(M,{mode:"hidden",children:u.children}),u.subtreeFlags=M.subtreeFlags&65011712,X!==null?f=Br(X,f):(f=fa(f,A,o,null),f.flags|=2),f.return=s,u.return=s,u.sibling=f,s.child=u,u=f,f=s.child,A=r.child.memoizedState,A===null?A=xg(o):(M=A.cachePool,M!==null?(X=Te._currentValue,M=M.parent!==X?{parent:X,pool:X}:M):M=s0(),A={baseLanes:A.baseLanes|o,cachePool:M}),f.memoizedState=A,f.childLanes=Tg(r,b,o),s.memoizedState=bg,u):(Cs(s),o=r.child,r=o.sibling,o=Br(o,{mode:"visible",children:u.children}),o.return=s,o.sibling=null,r!==null&&(b=s.deletions,b===null?(s.deletions=[r],s.flags|=16):b.push(r)),s.child=o,s.memoizedState=null,o)}function Ag(r,s){return s=Fc({mode:"visible",children:s},r.mode),s.return=r,r.child=s}function Fc(r,s){return r=ln(22,r,null,s),r.lanes=0,r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},r}function Eg(r,s,o){return mo(s,r.child,null,o),r=Ag(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function Sv(r,s,o){r.lanes|=s;var u=r.alternate;u!==null&&(u.lanes|=s),Hh(r.return,s,o)}function Ng(r,s,o,u,f){var m=r.memoizedState;m===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:f}:(m.isBackwards=s,m.rendering=null,m.renderingStartTime=0,m.last=u,m.tail=o,m.tailMode=f)}function bv(r,s,o){var u=s.pendingProps,f=u.revealOrder,m=u.tail;if(Re(r,s,u.children,o),u=Ae.current,(u&2)!==0)u=u&1|2,s.flags|=128;else{if(r!==null&&(r.flags&128)!==0)t:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Sv(r,o,s);else if(r.tag===19)Sv(r,o,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break t;for(;r.sibling===null;){if(r.return===null||r.return===s)break t;r=r.return}r.sibling.return=r.return,r=r.sibling}u&=1}switch(rt(Ae,u),f){case"forwards":for(o=s.child,f=null;o!==null;)r=o.alternate,r!==null&&Yc(r)===null&&(f=o),o=o.sibling;o=f,o===null?(f=s.child,s.child=null):(f=o.sibling,o.sibling=null),Ng(s,!1,f,o,m);break;case"backwards":for(o=null,f=s.child,s.child=null;f!==null;){if(r=f.alternate,r!==null&&Yc(r)===null){s.child=f;break}r=f.sibling,f.sibling=o,o=f,f=r}Ng(s,!0,o,null,m);break;case"together":Ng(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Jr(r,s,o){if(r!==null&&(s.dependencies=r.dependencies),Ms|=s.lanes,(o&s.childLanes)===0)if(r!==null){if(kl(r,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(r!==null&&s.child!==r.child)throw Error(i(153));if(s.child!==null){for(r=s.child,o=Br(r,r.pendingProps),s.child=o,o.return=s;r.sibling!==null;)r=r.sibling,o=o.sibling=Br(r,r.pendingProps),o.return=s;o.sibling=null}return s.child}function Cg(r,s){return(r.lanes&s)!==0?!0:(r=r.dependencies,!!(r!==null&&Oc(r)))}function FA(r,s,o){switch(s.tag){case 3:yt(s,s.stateNode.containerInfo),xs(s,Te,r.memoizedState.cache),Cl();break;case 27:case 5:Vt(s);break;case 4:yt(s,s.stateNode.containerInfo);break;case 10:xs(s,s.type,s.memoizedProps.value);break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(Cs(s),s.flags|=128,null):(o&s.child.childLanes)!==0?wv(r,s,o):(Cs(s),r=Jr(r,s,o),r!==null?r.sibling:null);Cs(s);break;case 19:var f=(r.flags&128)!==0;if(u=(o&s.childLanes)!==0,u||(kl(r,s,o,!1),u=(o&s.childLanes)!==0),f){if(u)return bv(r,s,o);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),rt(Ae,Ae.current),u)break;return null;case 22:case 23:return s.lanes=0,gv(r,s,o);case 24:xs(s,Te,r.memoizedState.cache)}return Jr(r,s,o)}function xv(r,s,o){if(r!==null)if(r.memoizedProps!==s.pendingProps)Ce=!0;else{if(!Cg(r,o)&&(s.flags&128)===0)return Ce=!1,FA(r,s,o);Ce=(r.flags&131072)!==0}else Ce=!1,jt&&(s.flags&1048576)!==0&&Qy(s,kc,s.index);switch(s.lanes=0,s.tag){case 16:t:{r=s.pendingProps;var u=s.elementType,f=u._init;if(u=f(u._payload),s.type=u,typeof u=="function")Lh(u)?(r=Sa(u,r),s.tag=1,s=yv(null,s,u,r,o)):(s.tag=0,s=Sg(null,s,u,r,o));else{if(u!=null){if(f=u.$$typeof,f===O){s.tag=11,s=fv(null,s,u,r,o);break t}else if(f===U){s.tag=14,s=dv(null,s,u,r,o);break t}}throw s=R(u)||u,Error(i(306,s,""))}}return s;case 0:return Sg(r,s,s.type,s.pendingProps,o);case 1:return u=s.type,f=Sa(u,s.pendingProps),yv(r,s,u,f,o);case 3:t:{if(yt(s,s.stateNode.containerInfo),r===null)throw Error(i(387));u=s.pendingProps;var m=s.memoizedState;f=m.element,Fh(r,s),Ll(s,u,null,o);var b=s.memoizedState;if(u=b.cache,xs(s,Te,u),u!==m.cache&&Vh(s,[Te],o,!0),zl(),u=b.element,m.isDehydrated)if(m={element:u,isDehydrated:!1,cache:b.cache},s.updateQueue.baseState=m,s.memoizedState=m,s.flags&256){s=vv(r,s,u,o);break t}else if(u!==f){f=Sn(Error(i(424)),s),Dl(f),s=vv(r,s,u,o);break t}else{switch(r=s.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(ue=Yn(r.firstChild),je=s,jt=!0,ga=null,sr=!0,o=tv(s,null,u,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Cl(),u===f){s=Jr(r,s,o);break t}Re(r,s,u,o)}s=s.child}return s;case 26:return Kc(r,s),r===null?(o=Nw(s.type,null,s.pendingProps,null))?s.memoizedState=o:jt||(o=s.type,r=s.pendingProps,u=ff(dt.current).createElement(o),u[Ne]=s,u[qe]=r,Be(u,o,r),ve(u),s.stateNode=u):s.memoizedState=Nw(s.type,r.memoizedProps,s.pendingProps,r.memoizedState),null;case 27:return Vt(s),r===null&&jt&&(u=s.stateNode=Tw(s.type,s.pendingProps,dt.current),je=s,sr=!0,f=ue,_s(s.type)?(om=f,ue=Yn(u.firstChild)):ue=f),Re(r,s,s.pendingProps.children,o),Kc(r,s),r===null&&(s.flags|=4194304),s.child;case 5:return r===null&&jt&&((f=u=ue)&&(u=AE(u,s.type,s.pendingProps,sr),u!==null?(s.stateNode=u,je=s,ue=Yn(u.firstChild),sr=!1,f=!0):f=!1),f||ma(s)),Vt(s),f=s.type,m=s.pendingProps,b=r!==null?r.memoizedProps:null,u=m.children,rm(f,m)?u=null:b!==null&&rm(f,b)&&(s.flags|=32),s.memoizedState!==null&&(f=ng(r,s,$A,null,null,o),iu._currentValue=f),Kc(r,s),Re(r,s,u,o),s.child;case 6:return r===null&&jt&&((r=o=ue)&&(o=EE(o,s.pendingProps,sr),o!==null?(s.stateNode=o,je=s,ue=null,r=!0):r=!1),r||ma(s)),null;case 13:return wv(r,s,o);case 4:return yt(s,s.stateNode.containerInfo),u=s.pendingProps,r===null?s.child=mo(s,null,u,o):Re(r,s,u,o),s.child;case 11:return fv(r,s,s.type,s.pendingProps,o);case 7:return Re(r,s,s.pendingProps,o),s.child;case 8:return Re(r,s,s.pendingProps.children,o),s.child;case 12:return Re(r,s,s.pendingProps.children,o),s.child;case 10:return u=s.pendingProps,xs(s,s.type,u.value),Re(r,s,u.children,o),s.child;case 9:return f=s.type._context,u=s.pendingProps.children,ya(s),f=Pe(f),u=u(f),s.flags|=1,Re(r,s,u,o),s.child;case 14:return dv(r,s,s.type,s.pendingProps,o);case 15:return hv(r,s,s.type,s.pendingProps,o);case 19:return bv(r,s,o);case 31:return u=s.pendingProps,o=s.mode,u={mode:u.mode,children:u.children},r===null?(o=Fc(u,o),o.ref=s.ref,s.child=o,o.return=s,s=o):(o=Br(r.child,u),o.ref=s.ref,s.child=o,o.return=s,s=o),s;case 22:return gv(r,s,o);case 24:return ya(s),u=Pe(Te),r===null?(f=Gh(),f===null&&(f=re,m=jh(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=o),f=m),s.memoizedState={parent:u,cache:f},Kh(s),xs(s,Te,f)):((r.lanes&o)!==0&&(Fh(r,s),Ll(s,null,null,o),zl()),f=r.memoizedState,m=s.memoizedState,f.parent!==u?(f={parent:u,cache:u},s.memoizedState=f,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=f),xs(s,Te,u)):(u=m.cache,xs(s,Te,u),u!==f.cache&&Vh(s,[Te],o,!0))),Re(r,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function $r(r){r.flags|=4}function Tv(r,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!Iw(s)){if(s=An.current,s!==null&&((Pt&4194048)===Pt?ar!==null:(Pt&62914560)!==Pt&&(Pt&536870912)===0||s!==ar))throw Ml=Xh,a0;r.flags|=8192}}function Zc(r,s){s!==null&&(r.flags|=4),r.flags&16384&&(s=r.tag!==22?sc():536870912,r.lanes|=s,wo|=s)}function Hl(r,s){if(!jt)switch(r.tailMode){case"hidden":s=r.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?r.tail=null:o.sibling=null;break;case"collapsed":o=r.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:u.sibling=null}}function oe(r){var s=r.alternate!==null&&r.alternate.child===r.child,o=0,u=0;if(s)for(var f=r.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags&65011712,u|=f.flags&65011712,f.return=r,f=f.sibling;else for(f=r.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=r,f=f.sibling;return r.subtreeFlags|=u,r.childLanes=o,s}function ZA(r,s,o){var u=s.pendingProps;switch(Ph(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return oe(s),null;case 1:return oe(s),null;case 3:return o=s.stateNode,u=null,r!==null&&(u=r.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),Ur(Te),Dt(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(r===null||r.child===null)&&(Nl(s)?$r(s):r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,e0())),oe(s),null;case 26:return o=s.memoizedState,r===null?($r(s),o!==null?(oe(s),Tv(s,o)):(oe(s),s.flags&=-16777217)):o?o!==r.memoizedState?($r(s),oe(s),Tv(s,o)):(oe(s),s.flags&=-16777217):(r.memoizedProps!==u&&$r(s),oe(s),s.flags&=-16777217),null;case 27:Ot(s),o=dt.current;var f=s.type;if(r!==null&&s.stateNode!=null)r.memoizedProps!==u&&$r(s);else{if(!u){if(s.stateNode===null)throw Error(i(166));return oe(s),null}r=ut.current,Nl(s)?Wy(s):(r=Tw(f,u,o),s.stateNode=r,$r(s))}return oe(s),null;case 5:if(Ot(s),o=s.type,r!==null&&s.stateNode!=null)r.memoizedProps!==u&&$r(s);else{if(!u){if(s.stateNode===null)throw Error(i(166));return oe(s),null}if(r=ut.current,Nl(s))Wy(s);else{switch(f=ff(dt.current),r){case 1:r=f.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:r=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":r=f.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":r=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":r=f.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof u.is=="string"?f.createElement("select",{is:u.is}):f.createElement("select"),u.multiple?r.multiple=!0:u.size&&(r.size=u.size);break;default:r=typeof u.is=="string"?f.createElement(o,{is:u.is}):f.createElement(o)}}r[Ne]=s,r[qe]=u;t:for(f=s.child;f!==null;){if(f.tag===5||f.tag===6)r.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===s)break t;for(;f.sibling===null;){if(f.return===null||f.return===s)break t;f=f.return}f.sibling.return=f.return,f=f.sibling}s.stateNode=r;t:switch(Be(r,o,u),o){case"button":case"input":case"select":case"textarea":r=!!u.autoFocus;break t;case"img":r=!0;break t;default:r=!1}r&&$r(s)}}return oe(s),s.flags&=-16777217,null;case 6:if(r&&s.stateNode!=null)r.memoizedProps!==u&&$r(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(i(166));if(r=dt.current,Nl(s)){if(r=s.stateNode,o=s.memoizedProps,u=null,f=je,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}r[Ne]=s,r=!!(r.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||pw(r.nodeValue,o)),r||ma(s)}else r=ff(r).createTextNode(u),r[Ne]=s,s.stateNode=r}return oe(s),null;case 13:if(u=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(f=Nl(s),u!==null&&u.dehydrated!==null){if(r===null){if(!f)throw Error(i(318));if(f=s.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(317));f[Ne]=s}else Cl(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;oe(s),f=!1}else f=e0(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=f),f=!0;if(!f)return s.flags&256?(Pr(s),s):(Pr(s),null)}if(Pr(s),(s.flags&128)!==0)return s.lanes=o,s;if(o=u!==null,r=r!==null&&r.memoizedState!==null,o){u=s.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool);var m=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),m!==f&&(u.flags|=2048)}return o!==r&&o&&(s.child.flags|=8192),Zc(s,s.updateQueue),oe(s),null;case 4:return Dt(),r===null&&Qg(s.stateNode.containerInfo),oe(s),null;case 10:return Ur(s.type),oe(s),null;case 19:if(tt(Ae),f=s.memoizedState,f===null)return oe(s),null;if(u=(s.flags&128)!==0,m=f.rendering,m===null)if(u)Hl(f,!1);else{if(ce!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(m=Yc(r),m!==null){for(s.flags|=128,Hl(f,!1),r=m.updateQueue,s.updateQueue=r,Zc(s,r),s.subtreeFlags=0,r=o,o=s.child;o!==null;)Zy(o,r),o=o.sibling;return rt(Ae,Ae.current&1|2),s.child}r=r.sibling}f.tail!==null&&Oe()>tf&&(s.flags|=128,u=!0,Hl(f,!1),s.lanes=4194304)}else{if(!u)if(r=Yc(m),r!==null){if(s.flags|=128,u=!0,r=r.updateQueue,s.updateQueue=r,Zc(s,r),Hl(f,!0),f.tail===null&&f.tailMode==="hidden"&&!m.alternate&&!jt)return oe(s),null}else 2*Oe()-f.renderingStartTime>tf&&o!==536870912&&(s.flags|=128,u=!0,Hl(f,!1),s.lanes=4194304);f.isBackwards?(m.sibling=s.child,s.child=m):(r=f.last,r!==null?r.sibling=m:s.child=m,f.last=m)}return f.tail!==null?(s=f.tail,f.rendering=s,f.tail=s.sibling,f.renderingStartTime=Oe(),s.sibling=null,r=Ae.current,rt(Ae,u?r&1|2:r&1),s):(oe(s),null);case 22:case 23:return Pr(s),tg(),u=s.memoizedState!==null,r!==null?r.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(o&536870912)!==0&&(s.flags&128)===0&&(oe(s),s.subtreeFlags&6&&(s.flags|=8192)):oe(s),o=s.updateQueue,o!==null&&Zc(s,o.retryQueue),o=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==o&&(s.flags|=2048),r!==null&&tt(va),null;case 24:return o=null,r!==null&&(o=r.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),Ur(Te),oe(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function QA(r,s){switch(Ph(s),s.tag){case 1:return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return Ur(Te),Dt(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 26:case 27:case 5:return Ot(s),null;case 13:if(Pr(s),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(i(340));Cl()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return tt(Ae),null;case 4:return Dt(),null;case 10:return Ur(s.type),null;case 22:case 23:return Pr(s),tg(),r!==null&&tt(va),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 24:return Ur(Te),null;case 25:return null;default:return null}}function Av(r,s){switch(Ph(s),s.tag){case 3:Ur(Te),Dt();break;case 26:case 27:case 5:Ot(s);break;case 4:Dt();break;case 13:Pr(s);break;case 19:tt(Ae);break;case 10:Ur(s.type);break;case 22:case 23:Pr(s),tg(),r!==null&&tt(va);break;case 24:Ur(Te)}}function Vl(r,s){try{var o=s.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var f=u.next;o=f;do{if((o.tag&r)===r){u=void 0;var m=o.create,b=o.inst;u=m(),b.destroy=u}o=o.next}while(o!==f)}}catch(A){te(s,s.return,A)}}function ks(r,s,o){try{var u=s.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var m=f.next;u=m;do{if((u.tag&r)===r){var b=u.inst,A=b.destroy;if(A!==void 0){b.destroy=void 0,f=s;var M=o,X=A;try{X()}catch(st){te(f,M,st)}}}u=u.next}while(u!==m)}}catch(st){te(s,s.return,st)}}function Ev(r){var s=r.updateQueue;if(s!==null){var o=r.stateNode;try{d0(s,o)}catch(u){te(r,r.return,u)}}}function Nv(r,s,o){o.props=Sa(r.type,r.memoizedProps),o.state=r.memoizedState;try{o.componentWillUnmount()}catch(u){te(r,s,u)}}function jl(r,s){try{var o=r.ref;if(o!==null){switch(r.tag){case 26:case 27:case 5:var u=r.stateNode;break;case 30:u=r.stateNode;break;default:u=r.stateNode}typeof o=="function"?r.refCleanup=o(u):o.current=u}}catch(f){te(r,s,f)}}function or(r,s){var o=r.ref,u=r.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(f){te(r,s,f)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){te(r,s,f)}else o.current=null}function Cv(r){var s=r.type,o=r.memoizedProps,u=r.stateNode;try{t:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break t;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(f){te(r,r.return,f)}}function Dg(r,s,o){try{var u=r.stateNode;wE(u,r.type,o,s),u[qe]=s}catch(f){te(r,r.return,f)}}function Dv(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&_s(r.type)||r.tag===4}function kg(r){t:for(;;){for(;r.sibling===null;){if(r.return===null||Dv(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&_s(r.type)||r.flags&2||r.child===null||r.tag===4)continue t;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Og(r,s,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(r,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(r),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=cf));else if(u!==4&&(u===27&&_s(r.type)&&(o=r.stateNode,s=null),r=r.child,r!==null))for(Og(r,s,o),r=r.sibling;r!==null;)Og(r,s,o),r=r.sibling}function Qc(r,s,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,s?o.insertBefore(r,s):o.appendChild(r);else if(u!==4&&(u===27&&_s(r.type)&&(o=r.stateNode),r=r.child,r!==null))for(Qc(r,s,o),r=r.sibling;r!==null;)Qc(r,s,o),r=r.sibling}function kv(r){var s=r.stateNode,o=r.memoizedProps;try{for(var u=r.type,f=s.attributes;f.length;)s.removeAttributeNode(f[0]);Be(s,u,o),s[Ne]=r,s[qe]=o}catch(m){te(r,r.return,m)}}var Hr=!1,me=!1,Ig=!1,Ov=typeof WeakSet=="function"?WeakSet:Set,De=null;function WA(r,s){if(r=r.containerInfo,em=yf,r=Jy(r),kh(r)){if("selectionStart"in r)var o={start:r.selectionStart,end:r.selectionEnd};else t:{o=(o=r.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var f=u.anchorOffset,m=u.focusNode;u=u.focusOffset;try{o.nodeType,m.nodeType}catch{o=null;break t}var b=0,A=-1,M=-1,X=0,st=0,lt=r,K=null;e:for(;;){for(var Z;lt!==o||f!==0&&lt.nodeType!==3||(A=b+f),lt!==m||u!==0&&lt.nodeType!==3||(M=b+u),lt.nodeType===3&&(b+=lt.nodeValue.length),(Z=lt.firstChild)!==null;)K=lt,lt=Z;for(;;){if(lt===r)break e;if(K===o&&++X===f&&(A=b),K===m&&++st===u&&(M=b),(Z=lt.nextSibling)!==null)break;lt=K,K=lt.parentNode}lt=Z}o=A===-1||M===-1?null:{start:A,end:M}}else o=null}o=o||{start:0,end:0}}else o=null;for(nm={focusedElem:r,selectionRange:o},yf=!1,De=s;De!==null;)if(s=De,r=s.child,(s.subtreeFlags&1024)!==0&&r!==null)r.return=s,De=r;else for(;De!==null;){switch(s=De,m=s.alternate,r=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((r&1024)!==0&&m!==null){r=void 0,o=s,f=m.memoizedProps,m=m.memoizedState,u=o.stateNode;try{var kt=Sa(o.type,f,o.elementType===o.type);r=u.getSnapshotBeforeUpdate(kt,m),u.__reactInternalSnapshotBeforeUpdate=r}catch(Nt){te(o,o.return,Nt)}}break;case 3:if((r&1024)!==0){if(r=s.stateNode.containerInfo,o=r.nodeType,o===9)sm(r);else if(o===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":sm(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=s.sibling,r!==null){r.return=s.return,De=r;break}De=s.return}}function Iv(r,s,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:Os(r,o),u&4&&Vl(5,o);break;case 1:if(Os(r,o),u&4)if(r=o.stateNode,s===null)try{r.componentDidMount()}catch(b){te(o,o.return,b)}else{var f=Sa(o.type,s.memoizedProps);s=s.memoizedState;try{r.componentDidUpdate(f,s,r.__reactInternalSnapshotBeforeUpdate)}catch(b){te(o,o.return,b)}}u&64&&Ev(o),u&512&&jl(o,o.return);break;case 3:if(Os(r,o),u&64&&(r=o.updateQueue,r!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{d0(r,s)}catch(b){te(o,o.return,b)}}break;case 27:s===null&&u&4&&kv(o);case 26:case 5:Os(r,o),s===null&&u&4&&Cv(o),u&512&&jl(o,o.return);break;case 12:Os(r,o);break;case 13:Os(r,o),u&4&&Bv(r,o),u&64&&(r=o.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(o=lE.bind(null,o),NE(r,o))));break;case 22:if(u=o.memoizedState!==null||Hr,!u){s=s!==null&&s.memoizedState!==null||me,f=Hr;var m=me;Hr=u,(me=s)&&!m?Is(r,o,(o.subtreeFlags&8772)!==0):Os(r,o),Hr=f,me=m}break;case 30:break;default:Os(r,o)}}function Rv(r){var s=r.alternate;s!==null&&(r.alternate=null,Rv(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&dl(s)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var se=null,Ze=!1;function Vr(r,s,o){for(o=o.child;o!==null;)Mv(r,s,o),o=o.sibling}function Mv(r,s,o){if(Ee&&typeof Ee.onCommitFiberUnmount=="function")try{Ee.onCommitFiberUnmount($n,o)}catch{}switch(o.tag){case 26:me||or(o,s),Vr(r,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:me||or(o,s);var u=se,f=Ze;_s(o.type)&&(se=o.stateNode,Ze=!1),Vr(r,s,o),tu(o.stateNode),se=u,Ze=f;break;case 5:me||or(o,s);case 6:if(u=se,f=Ze,se=null,Vr(r,s,o),se=u,Ze=f,se!==null)if(Ze)try{(se.nodeType===9?se.body:se.nodeName==="HTML"?se.ownerDocument.body:se).removeChild(o.stateNode)}catch(m){te(o,s,m)}else try{se.removeChild(o.stateNode)}catch(m){te(o,s,m)}break;case 18:se!==null&&(Ze?(r=se,bw(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,o.stateNode),lu(r)):bw(se,o.stateNode));break;case 4:u=se,f=Ze,se=o.stateNode.containerInfo,Ze=!0,Vr(r,s,o),se=u,Ze=f;break;case 0:case 11:case 14:case 15:me||ks(2,o,s),me||ks(4,o,s),Vr(r,s,o);break;case 1:me||(or(o,s),u=o.stateNode,typeof u.componentWillUnmount=="function"&&Nv(o,s,u)),Vr(r,s,o);break;case 21:Vr(r,s,o);break;case 22:me=(u=me)||o.memoizedState!==null,Vr(r,s,o),me=u;break;default:Vr(r,s,o)}}function Bv(r,s){if(s.memoizedState===null&&(r=s.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{lu(r)}catch(o){te(s,s.return,o)}}function tE(r){switch(r.tag){case 13:case 19:var s=r.stateNode;return s===null&&(s=r.stateNode=new Ov),s;case 22:return r=r.stateNode,s=r._retryCache,s===null&&(s=r._retryCache=new Ov),s;default:throw Error(i(435,r.tag))}}function Rg(r,s){var o=tE(r);s.forEach(function(u){var f=uE.bind(null,r,u);o.has(u)||(o.add(u),u.then(f,f))})}function un(r,s){var o=s.deletions;if(o!==null)for(var u=0;u<o.length;u++){var f=o[u],m=r,b=s,A=b;t:for(;A!==null;){switch(A.tag){case 27:if(_s(A.type)){se=A.stateNode,Ze=!1;break t}break;case 5:se=A.stateNode,Ze=!1;break t;case 3:case 4:se=A.stateNode.containerInfo,Ze=!0;break t}A=A.return}if(se===null)throw Error(i(160));Mv(m,b,f),se=null,Ze=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)zv(s,r),s=s.sibling}var jn=null;function zv(r,s){var o=r.alternate,u=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:un(s,r),cn(r),u&4&&(ks(3,r,r.return),Vl(3,r),ks(5,r,r.return));break;case 1:un(s,r),cn(r),u&512&&(me||o===null||or(o,o.return)),u&64&&Hr&&(r=r.updateQueue,r!==null&&(u=r.callbacks,u!==null&&(o=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var f=jn;if(un(s,r),cn(r),u&512&&(me||o===null||or(o,o.return)),u&4){var m=o!==null?o.memoizedState:null;if(u=r.memoizedState,o===null)if(u===null)if(r.stateNode===null){t:{u=r.type,o=r.memoizedProps,f=f.ownerDocument||f;e:switch(u){case"title":m=f.getElementsByTagName("title")[0],(!m||m[aa]||m[Ne]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(u),f.head.insertBefore(m,f.querySelector("head > title"))),Be(m,u,o),m[Ne]=r,ve(m),u=m;break t;case"link":var b=kw("link","href",f).get(u+(o.href||""));if(b){for(var A=0;A<b.length;A++)if(m=b[A],m.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&m.getAttribute("rel")===(o.rel==null?null:o.rel)&&m.getAttribute("title")===(o.title==null?null:o.title)&&m.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){b.splice(A,1);break e}}m=f.createElement(u),Be(m,u,o),f.head.appendChild(m);break;case"meta":if(b=kw("meta","content",f).get(u+(o.content||""))){for(A=0;A<b.length;A++)if(m=b[A],m.getAttribute("content")===(o.content==null?null:""+o.content)&&m.getAttribute("name")===(o.name==null?null:o.name)&&m.getAttribute("property")===(o.property==null?null:o.property)&&m.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&m.getAttribute("charset")===(o.charSet==null?null:o.charSet)){b.splice(A,1);break e}}m=f.createElement(u),Be(m,u,o),f.head.appendChild(m);break;default:throw Error(i(468,u))}m[Ne]=r,ve(m),u=m}r.stateNode=u}else Ow(f,r.type,r.stateNode);else r.stateNode=Dw(f,u,r.memoizedProps);else m!==u?(m===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):m.count--,u===null?Ow(f,r.type,r.stateNode):Dw(f,u,r.memoizedProps)):u===null&&r.stateNode!==null&&Dg(r,r.memoizedProps,o.memoizedProps)}break;case 27:un(s,r),cn(r),u&512&&(me||o===null||or(o,o.return)),o!==null&&u&4&&Dg(r,r.memoizedProps,o.memoizedProps);break;case 5:if(un(s,r),cn(r),u&512&&(me||o===null||or(o,o.return)),r.flags&32){f=r.stateNode;try{Fa(f,"")}catch(Z){te(r,r.return,Z)}}u&4&&r.stateNode!=null&&(f=r.memoizedProps,Dg(r,f,o!==null?o.memoizedProps:f)),u&1024&&(Ig=!0);break;case 6:if(un(s,r),cn(r),u&4){if(r.stateNode===null)throw Error(i(162));u=r.memoizedProps,o=r.stateNode;try{o.nodeValue=u}catch(Z){te(r,r.return,Z)}}break;case 3:if(gf=null,f=jn,jn=df(s.containerInfo),un(s,r),jn=f,cn(r),u&4&&o!==null&&o.memoizedState.isDehydrated)try{lu(s.containerInfo)}catch(Z){te(r,r.return,Z)}Ig&&(Ig=!1,Lv(r));break;case 4:u=jn,jn=df(r.stateNode.containerInfo),un(s,r),cn(r),jn=u;break;case 12:un(s,r),cn(r);break;case 13:un(s,r),cn(r),r.child.flags&8192&&r.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Ug=Oe()),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,Rg(r,u)));break;case 22:f=r.memoizedState!==null;var M=o!==null&&o.memoizedState!==null,X=Hr,st=me;if(Hr=X||f,me=st||M,un(s,r),me=st,Hr=X,cn(r),u&8192)t:for(s=r.stateNode,s._visibility=f?s._visibility&-2:s._visibility|1,f&&(o===null||M||Hr||me||ba(r)),o=null,s=r;;){if(s.tag===5||s.tag===26){if(o===null){M=o=s;try{if(m=M.stateNode,f)b=m.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{A=M.stateNode;var lt=M.memoizedProps.style,K=lt!=null&&lt.hasOwnProperty("display")?lt.display:null;A.style.display=K==null||typeof K=="boolean"?"":(""+K).trim()}}catch(Z){te(M,M.return,Z)}}}else if(s.tag===6){if(o===null){M=s;try{M.stateNode.nodeValue=f?"":M.memoizedProps}catch(Z){te(M,M.return,Z)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===r)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break t;for(;s.sibling===null;){if(s.return===null||s.return===r)break t;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=r.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Rg(r,o))));break;case 19:un(s,r),cn(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,Rg(r,u)));break;case 30:break;case 21:break;default:un(s,r),cn(r)}}function cn(r){var s=r.flags;if(s&2){try{for(var o,u=r.return;u!==null;){if(Dv(u)){o=u;break}u=u.return}if(o==null)throw Error(i(160));switch(o.tag){case 27:var f=o.stateNode,m=kg(r);Qc(r,m,f);break;case 5:var b=o.stateNode;o.flags&32&&(Fa(b,""),o.flags&=-33);var A=kg(r);Qc(r,A,b);break;case 3:case 4:var M=o.stateNode.containerInfo,X=kg(r);Og(r,X,M);break;default:throw Error(i(161))}}catch(st){te(r,r.return,st)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function Lv(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var s=r;Lv(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),r=r.sibling}}function Os(r,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)Iv(r,s.alternate,s),s=s.sibling}function ba(r){for(r=r.child;r!==null;){var s=r;switch(s.tag){case 0:case 11:case 14:case 15:ks(4,s,s.return),ba(s);break;case 1:or(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&Nv(s,s.return,o),ba(s);break;case 27:tu(s.stateNode);case 26:case 5:or(s,s.return),ba(s);break;case 22:s.memoizedState===null&&ba(s);break;case 30:ba(s);break;default:ba(s)}r=r.sibling}}function Is(r,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,f=r,m=s,b=m.flags;switch(m.tag){case 0:case 11:case 15:Is(f,m,o),Vl(4,m);break;case 1:if(Is(f,m,o),u=m,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(X){te(u,u.return,X)}if(u=m,f=u.updateQueue,f!==null){var A=u.stateNode;try{var M=f.shared.hiddenCallbacks;if(M!==null)for(f.shared.hiddenCallbacks=null,f=0;f<M.length;f++)f0(M[f],A)}catch(X){te(u,u.return,X)}}o&&b&64&&Ev(m),jl(m,m.return);break;case 27:kv(m);case 26:case 5:Is(f,m,o),o&&u===null&&b&4&&Cv(m),jl(m,m.return);break;case 12:Is(f,m,o);break;case 13:Is(f,m,o),o&&b&4&&Bv(f,m);break;case 22:m.memoizedState===null&&Is(f,m,o),jl(m,m.return);break;case 30:break;default:Is(f,m,o)}s=s.sibling}}function Mg(r,s){var o=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),r=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(r=s.memoizedState.cachePool.pool),r!==o&&(r!=null&&r.refCount++,o!=null&&Ol(o))}function Bg(r,s){r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&Ol(r))}function lr(r,s,o,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)_v(r,s,o,u),s=s.sibling}function _v(r,s,o,u){var f=s.flags;switch(s.tag){case 0:case 11:case 15:lr(r,s,o,u),f&2048&&Vl(9,s);break;case 1:lr(r,s,o,u);break;case 3:lr(r,s,o,u),f&2048&&(r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&Ol(r)));break;case 12:if(f&2048){lr(r,s,o,u),r=s.stateNode;try{var m=s.memoizedProps,b=m.id,A=m.onPostCommit;typeof A=="function"&&A(b,s.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(M){te(s,s.return,M)}}else lr(r,s,o,u);break;case 13:lr(r,s,o,u);break;case 23:break;case 22:m=s.stateNode,b=s.alternate,s.memoizedState!==null?m._visibility&2?lr(r,s,o,u):Yl(r,s):m._visibility&2?lr(r,s,o,u):(m._visibility|=2,po(r,s,o,u,(s.subtreeFlags&10256)!==0)),f&2048&&Mg(b,s);break;case 24:lr(r,s,o,u),f&2048&&Bg(s.alternate,s);break;default:lr(r,s,o,u)}}function po(r,s,o,u,f){for(f=f&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var m=r,b=s,A=o,M=u,X=b.flags;switch(b.tag){case 0:case 11:case 15:po(m,b,A,M,f),Vl(8,b);break;case 23:break;case 22:var st=b.stateNode;b.memoizedState!==null?st._visibility&2?po(m,b,A,M,f):Yl(m,b):(st._visibility|=2,po(m,b,A,M,f)),f&&X&2048&&Mg(b.alternate,b);break;case 24:po(m,b,A,M,f),f&&X&2048&&Bg(b.alternate,b);break;default:po(m,b,A,M,f)}s=s.sibling}}function Yl(r,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=r,u=s,f=u.flags;switch(u.tag){case 22:Yl(o,u),f&2048&&Mg(u.alternate,u);break;case 24:Yl(o,u),f&2048&&Bg(u.alternate,u);break;default:Yl(o,u)}s=s.sibling}}var Gl=8192;function yo(r){if(r.subtreeFlags&Gl)for(r=r.child;r!==null;)Uv(r),r=r.sibling}function Uv(r){switch(r.tag){case 26:yo(r),r.flags&Gl&&r.memoizedState!==null&&qE(jn,r.memoizedState,r.memoizedProps);break;case 5:yo(r);break;case 3:case 4:var s=jn;jn=df(r.stateNode.containerInfo),yo(r),jn=s;break;case 22:r.memoizedState===null&&(s=r.alternate,s!==null&&s.memoizedState!==null?(s=Gl,Gl=16777216,yo(r),Gl=s):yo(r));break;default:yo(r)}}function qv(r){var s=r.alternate;if(s!==null&&(r=s.child,r!==null)){s.child=null;do s=r.sibling,r.sibling=null,r=s;while(r!==null)}}function Xl(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];De=u,Jv(u,r)}qv(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Pv(r),r=r.sibling}function Pv(r){switch(r.tag){case 0:case 11:case 15:Xl(r),r.flags&2048&&ks(9,r,r.return);break;case 3:Xl(r);break;case 12:Xl(r);break;case 22:var s=r.stateNode;r.memoizedState!==null&&s._visibility&2&&(r.return===null||r.return.tag!==13)?(s._visibility&=-3,Wc(r)):Xl(r);break;default:Xl(r)}}function Wc(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];De=u,Jv(u,r)}qv(r)}for(r=r.child;r!==null;){switch(s=r,s.tag){case 0:case 11:case 15:ks(8,s,s.return),Wc(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,Wc(s));break;default:Wc(s)}r=r.sibling}}function Jv(r,s){for(;De!==null;){var o=De;switch(o.tag){case 0:case 11:case 15:ks(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Ol(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,De=u;else t:for(o=r;De!==null;){u=De;var f=u.sibling,m=u.return;if(Rv(u),u===o){De=null;break t}if(f!==null){f.return=m,De=f;break t}De=m}}}var eE={getCacheForType:function(r){var s=Pe(Te),o=s.data.get(r);return o===void 0&&(o=r(),s.data.set(r,o)),o}},nE=typeof WeakMap=="function"?WeakMap:Map,Xt=0,re=null,zt=null,Pt=0,Kt=0,fn=null,Rs=!1,vo=!1,zg=!1,jr=0,ce=0,Ms=0,xa=0,Lg=0,En=0,wo=0,Kl=null,Qe=null,_g=!1,Ug=0,tf=1/0,ef=null,Bs=null,Me=0,zs=null,So=null,bo=0,qg=0,Pg=null,$v=null,Fl=0,Jg=null;function dn(){if((Xt&2)!==0&&Pt!==0)return Pt&-Pt;if(D.T!==null){var r=oo;return r!==0?r:Xg()}return oc()}function Hv(){En===0&&(En=(Pt&536870912)===0||jt?ic():536870912);var r=An.current;return r!==null&&(r.flags|=32),En}function hn(r,s,o){(r===re&&(Kt===2||Kt===9)||r.cancelPendingCommit!==null)&&(xo(r,0),Ls(r,Pt,En,!1)),sa(r,o),((Xt&2)===0||r!==re)&&(r===re&&((Xt&2)===0&&(xa|=o),ce===4&&Ls(r,Pt,En,!1)),ur(r))}function Vv(r,s,o){if((Xt&6)!==0)throw Error(i(327));var u=!o&&(s&124)===0&&(s&r.expiredLanes)===0||ia(r,s),f=u?sE(r,s):Vg(r,s,!0),m=u;do{if(f===0){vo&&!u&&Ls(r,s,0,!1);break}else{if(o=r.current.alternate,m&&!rE(o)){f=Vg(r,s,!1),m=!1;continue}if(f===2){if(m=s,r.errorRecoveryDisabledLanes&m)var b=0;else b=r.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){s=b;t:{var A=r;f=Kl;var M=A.current.memoizedState.isDehydrated;if(M&&(xo(A,b).flags|=256),b=Vg(A,b,!1),b!==2){if(zg&&!M){A.errorRecoveryDisabledLanes|=m,xa|=m,f=4;break t}m=Qe,Qe=f,m!==null&&(Qe===null?Qe=m:Qe.push.apply(Qe,m))}f=b}if(m=!1,f!==2)continue}}if(f===1){xo(r,0),Ls(r,s,0,!0);break}t:{switch(u=r,m=f,m){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:Ls(u,s,En,!Rs);break t;case 2:Qe=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(f=Ug+300-Oe(),10<f)){if(Ls(u,s,En,!Rs),Ha(u,0,!0)!==0)break t;u.timeoutHandle=ww(jv.bind(null,u,o,Qe,ef,_g,s,En,xa,wo,Rs,m,2,-0,0),f);break t}jv(u,o,Qe,ef,_g,s,En,xa,wo,Rs,m,0,-0,0)}}break}while(!0);ur(r)}function jv(r,s,o,u,f,m,b,A,M,X,st,lt,K,Z){if(r.timeoutHandle=-1,lt=s.subtreeFlags,(lt&8192||(lt&16785408)===16785408)&&(ru={stylesheets:null,count:0,unsuspend:UE},Uv(s),lt=PE(),lt!==null)){r.cancelPendingCommit=lt(Qv.bind(null,r,s,m,o,u,f,b,A,M,st,1,K,Z)),Ls(r,m,b,!X);return}Qv(r,s,m,o,u,f,b,A,M)}function rE(r){for(var s=r;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var f=o[u],m=f.getSnapshot;f=f.value;try{if(!on(m(),f))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Ls(r,s,o,u){s&=~Lg,s&=~xa,r.suspendedLanes|=s,r.pingedLanes&=~s,u&&(r.warmLanes|=s),u=r.expirationTimes;for(var f=s;0<f;){var m=31-Ie(f),b=1<<m;u[m]=-1,f&=~b}o!==0&&ll(r,o,s)}function nf(){return(Xt&6)===0?(Zl(0),!1):!0}function $g(){if(zt!==null){if(Kt===0)var r=zt.return;else r=zt,_r=pa=null,sg(r),go=null,Jl=0,r=zt;for(;r!==null;)Av(r.alternate,r),r=r.return;zt=null}}function xo(r,s){var o=r.timeoutHandle;o!==-1&&(r.timeoutHandle=-1,bE(o)),o=r.cancelPendingCommit,o!==null&&(r.cancelPendingCommit=null,o()),$g(),re=r,zt=o=Br(r.current,null),Pt=s,Kt=0,fn=null,Rs=!1,vo=ia(r,s),zg=!1,wo=En=Lg=xa=Ms=ce=0,Qe=Kl=null,_g=!1,(s&8)!==0&&(s|=s&32);var u=r.entangledLanes;if(u!==0)for(r=r.entanglements,u&=s;0<u;){var f=31-Ie(u),m=1<<f;s|=r[f],u&=~m}return jr=s,Ac(),o}function Yv(r,s){Mt=null,D.H=Hc,s===Rl||s===Mc?(s=u0(),Kt=3):s===a0?(s=u0(),Kt=4):Kt=s===cv?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,fn=s,zt===null&&(ce=1,Xc(r,Sn(s,r.current)))}function Gv(){var r=D.H;return D.H=Hc,r===null?Hc:r}function Xv(){var r=D.A;return D.A=eE,r}function Hg(){ce=4,Rs||(Pt&4194048)!==Pt&&An.current!==null||(vo=!0),(Ms&134217727)===0&&(xa&134217727)===0||re===null||Ls(re,Pt,En,!1)}function Vg(r,s,o){var u=Xt;Xt|=2;var f=Gv(),m=Xv();(re!==r||Pt!==s)&&(ef=null,xo(r,s)),s=!1;var b=ce;t:do try{if(Kt!==0&&zt!==null){var A=zt,M=fn;switch(Kt){case 8:$g(),b=6;break t;case 3:case 2:case 9:case 6:An.current===null&&(s=!0);var X=Kt;if(Kt=0,fn=null,To(r,A,M,X),o&&vo){b=0;break t}break;default:X=Kt,Kt=0,fn=null,To(r,A,M,X)}}iE(),b=ce;break}catch(st){Yv(r,st)}while(!0);return s&&r.shellSuspendCounter++,_r=pa=null,Xt=u,D.H=f,D.A=m,zt===null&&(re=null,Pt=0,Ac()),b}function iE(){for(;zt!==null;)Kv(zt)}function sE(r,s){var o=Xt;Xt|=2;var u=Gv(),f=Xv();re!==r||Pt!==s?(ef=null,tf=Oe()+500,xo(r,s)):vo=ia(r,s);t:do try{if(Kt!==0&&zt!==null){s=zt;var m=fn;e:switch(Kt){case 1:Kt=0,fn=null,To(r,s,m,1);break;case 2:case 9:if(o0(m)){Kt=0,fn=null,Fv(s);break}s=function(){Kt!==2&&Kt!==9||re!==r||(Kt=7),ur(r)},m.then(s,s);break t;case 3:Kt=7;break t;case 4:Kt=5;break t;case 7:o0(m)?(Kt=0,fn=null,Fv(s)):(Kt=0,fn=null,To(r,s,m,7));break;case 5:var b=null;switch(zt.tag){case 26:b=zt.memoizedState;case 5:case 27:var A=zt;if(!b||Iw(b)){Kt=0,fn=null;var M=A.sibling;if(M!==null)zt=M;else{var X=A.return;X!==null?(zt=X,rf(X)):zt=null}break e}}Kt=0,fn=null,To(r,s,m,5);break;case 6:Kt=0,fn=null,To(r,s,m,6);break;case 8:$g(),ce=6;break t;default:throw Error(i(462))}}aE();break}catch(st){Yv(r,st)}while(!0);return _r=pa=null,D.H=u,D.A=f,Xt=o,zt!==null?0:(re=null,Pt=0,Ac(),ce)}function aE(){for(;zt!==null&&!xe();)Kv(zt)}function Kv(r){var s=xv(r.alternate,r,jr);r.memoizedProps=r.pendingProps,s===null?rf(r):zt=s}function Fv(r){var s=r,o=s.alternate;switch(s.tag){case 15:case 0:s=pv(o,s,s.pendingProps,s.type,void 0,Pt);break;case 11:s=pv(o,s,s.pendingProps,s.type.render,s.ref,Pt);break;case 5:sg(s);default:Av(o,s),s=zt=Zy(s,jr),s=xv(o,s,jr)}r.memoizedProps=r.pendingProps,s===null?rf(r):zt=s}function To(r,s,o,u){_r=pa=null,sg(s),go=null,Jl=0;var f=s.return;try{if(KA(r,f,s,o,Pt)){ce=1,Xc(r,Sn(o,r.current)),zt=null;return}}catch(m){if(f!==null)throw zt=f,m;ce=1,Xc(r,Sn(o,r.current)),zt=null;return}s.flags&32768?(jt||u===1?r=!0:vo||(Pt&536870912)!==0?r=!1:(Rs=r=!0,(u===2||u===9||u===3||u===6)&&(u=An.current,u!==null&&u.tag===13&&(u.flags|=16384))),Zv(s,r)):rf(s)}function rf(r){var s=r;do{if((s.flags&32768)!==0){Zv(s,Rs);return}r=s.return;var o=ZA(s.alternate,s,jr);if(o!==null){zt=o;return}if(s=s.sibling,s!==null){zt=s;return}zt=s=r}while(s!==null);ce===0&&(ce=5)}function Zv(r,s){do{var o=QA(r.alternate,r);if(o!==null){o.flags&=32767,zt=o;return}if(o=r.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(r=r.sibling,r!==null)){zt=r;return}zt=r=o}while(r!==null);ce=6,zt=null}function Qv(r,s,o,u,f,m,b,A,M){r.cancelPendingCommit=null;do sf();while(Me!==0);if((Xt&6)!==0)throw Error(i(327));if(s!==null){if(s===r.current)throw Error(i(177));if(m=s.lanes|s.childLanes,m|=Bh,lh(r,o,m,b,A,M),r===re&&(zt=re=null,Pt=0),So=s,zs=r,bo=o,qg=m,Pg=f,$v=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,cE(gs,function(){return rw(),null})):(r.callbackNode=null,r.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=D.T,D.T=null,f=B.p,B.p=2,b=Xt,Xt|=4;try{WA(r,s,o)}finally{Xt=b,B.p=f,D.T=u}}Me=1,Wv(),tw(),ew()}}function Wv(){if(Me===1){Me=0;var r=zs,s=So,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=D.T,D.T=null;var u=B.p;B.p=2;var f=Xt;Xt|=4;try{zv(s,r);var m=nm,b=Jy(r.containerInfo),A=m.focusedElem,M=m.selectionRange;if(b!==A&&A&&A.ownerDocument&&Py(A.ownerDocument.documentElement,A)){if(M!==null&&kh(A)){var X=M.start,st=M.end;if(st===void 0&&(st=X),"selectionStart"in A)A.selectionStart=X,A.selectionEnd=Math.min(st,A.value.length);else{var lt=A.ownerDocument||document,K=lt&&lt.defaultView||window;if(K.getSelection){var Z=K.getSelection(),kt=A.textContent.length,Nt=Math.min(M.start,kt),Wt=M.end===void 0?Nt:Math.min(M.end,kt);!Z.extend&&Nt>Wt&&(b=Wt,Wt=Nt,Nt=b);var H=qy(A,Nt),L=qy(A,Wt);if(H&&L&&(Z.rangeCount!==1||Z.anchorNode!==H.node||Z.anchorOffset!==H.offset||Z.focusNode!==L.node||Z.focusOffset!==L.offset)){var G=lt.createRange();G.setStart(H.node,H.offset),Z.removeAllRanges(),Nt>Wt?(Z.addRange(G),Z.extend(L.node,L.offset)):(G.setEnd(L.node,L.offset),Z.addRange(G))}}}}for(lt=[],Z=A;Z=Z.parentNode;)Z.nodeType===1&&lt.push({element:Z,left:Z.scrollLeft,top:Z.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<lt.length;A++){var at=lt[A];at.element.scrollLeft=at.left,at.element.scrollTop=at.top}}yf=!!em,nm=em=null}finally{Xt=f,B.p=u,D.T=o}}r.current=s,Me=2}}function tw(){if(Me===2){Me=0;var r=zs,s=So,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=D.T,D.T=null;var u=B.p;B.p=2;var f=Xt;Xt|=4;try{Iv(r,s.alternate,s)}finally{Xt=f,B.p=u,D.T=o}}Me=3}}function ew(){if(Me===4||Me===3){Me=0,an();var r=zs,s=So,o=bo,u=$v;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Me=5:(Me=0,So=zs=null,nw(r,r.pendingLanes));var f=r.pendingLanes;if(f===0&&(Bs=null),cl(o),s=s.stateNode,Ee&&typeof Ee.onCommitFiberRoot=="function")try{Ee.onCommitFiberRoot($n,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=D.T,f=B.p,B.p=2,D.T=null;try{for(var m=r.onRecoverableError,b=0;b<u.length;b++){var A=u[b];m(A.value,{componentStack:A.stack})}}finally{D.T=s,B.p=f}}(bo&3)!==0&&sf(),ur(r),f=r.pendingLanes,(o&4194090)!==0&&(f&42)!==0?r===Jg?Fl++:(Fl=0,Jg=r):Fl=0,Zl(0)}}function nw(r,s){(r.pooledCacheLanes&=s)===0&&(s=r.pooledCache,s!=null&&(r.pooledCache=null,Ol(s)))}function sf(r){return Wv(),tw(),ew(),rw()}function rw(){if(Me!==5)return!1;var r=zs,s=qg;qg=0;var o=cl(bo),u=D.T,f=B.p;try{B.p=32>o?32:o,D.T=null,o=Pg,Pg=null;var m=zs,b=bo;if(Me=0,So=zs=null,bo=0,(Xt&6)!==0)throw Error(i(331));var A=Xt;if(Xt|=4,Pv(m.current),_v(m,m.current,b,o),Xt=A,Zl(0,!1),Ee&&typeof Ee.onPostCommitFiberRoot=="function")try{Ee.onPostCommitFiberRoot($n,m)}catch{}return!0}finally{B.p=f,D.T=u,nw(r,s)}}function iw(r,s,o){s=Sn(o,s),s=wg(r.stateNode,s,2),r=Es(r,s,2),r!==null&&(sa(r,2),ur(r))}function te(r,s,o){if(r.tag===3)iw(r,r,o);else for(;s!==null;){if(s.tag===3){iw(s,r,o);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Bs===null||!Bs.has(u))){r=Sn(o,r),o=lv(2),u=Es(s,o,2),u!==null&&(uv(o,u,s,r),sa(u,2),ur(u));break}}s=s.return}}function jg(r,s,o){var u=r.pingCache;if(u===null){u=r.pingCache=new nE;var f=new Set;u.set(s,f)}else f=u.get(s),f===void 0&&(f=new Set,u.set(s,f));f.has(o)||(zg=!0,f.add(o),r=oE.bind(null,r,s,o),s.then(r,r))}function oE(r,s,o){var u=r.pingCache;u!==null&&u.delete(s),r.pingedLanes|=r.suspendedLanes&o,r.warmLanes&=~o,re===r&&(Pt&o)===o&&(ce===4||ce===3&&(Pt&62914560)===Pt&&300>Oe()-Ug?(Xt&2)===0&&xo(r,0):Lg|=o,wo===Pt&&(wo=0)),ur(r)}function sw(r,s){s===0&&(s=sc()),r=ro(r,s),r!==null&&(sa(r,s),ur(r))}function lE(r){var s=r.memoizedState,o=0;s!==null&&(o=s.retryLane),sw(r,o)}function uE(r,s){var o=0;switch(r.tag){case 13:var u=r.stateNode,f=r.memoizedState;f!==null&&(o=f.retryLane);break;case 19:u=r.stateNode;break;case 22:u=r.stateNode._retryCache;break;default:throw Error(i(314))}u!==null&&u.delete(s),sw(r,o)}function cE(r,s){return Yt(r,s)}var af=null,Ao=null,Yg=!1,of=!1,Gg=!1,Ta=0;function ur(r){r!==Ao&&r.next===null&&(Ao===null?af=Ao=r:Ao=Ao.next=r),of=!0,Yg||(Yg=!0,dE())}function Zl(r,s){if(!Gg&&of){Gg=!0;do for(var o=!1,u=af;u!==null;){if(r!==0){var f=u.pendingLanes;if(f===0)var m=0;else{var b=u.suspendedLanes,A=u.pingedLanes;m=(1<<31-Ie(42|r)+1)-1,m&=f&~(b&~A),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(o=!0,uw(u,m))}else m=Pt,m=Ha(u,u===re?m:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(m&3)===0||ia(u,m)||(o=!0,uw(u,m));u=u.next}while(o);Gg=!1}}function fE(){aw()}function aw(){of=Yg=!1;var r=0;Ta!==0&&(SE()&&(r=Ta),Ta=0);for(var s=Oe(),o=null,u=af;u!==null;){var f=u.next,m=ow(u,s);m===0?(u.next=null,o===null?af=f:o.next=f,f===null&&(Ao=o)):(o=u,(r!==0||(m&3)!==0)&&(of=!0)),u=f}Zl(r)}function ow(r,s){for(var o=r.suspendedLanes,u=r.pingedLanes,f=r.expirationTimes,m=r.pendingLanes&-62914561;0<m;){var b=31-Ie(m),A=1<<b,M=f[b];M===-1?((A&o)===0||(A&u)!==0)&&(f[b]=oh(A,s)):M<=s&&(r.expiredLanes|=A),m&=~A}if(s=re,o=Pt,o=Ha(r,r===s?o:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u=r.callbackNode,o===0||r===s&&(Kt===2||Kt===9)||r.cancelPendingCommit!==null)return u!==null&&u!==null&&qt(u),r.callbackNode=null,r.callbackPriority=0;if((o&3)===0||ia(r,o)){if(s=o&-o,s===r.callbackPriority)return s;switch(u!==null&&qt(u),cl(o)){case 2:case 8:o=hs;break;case 32:o=gs;break;case 268435456:o=ms;break;default:o=gs}return u=lw.bind(null,r),o=Yt(o,u),r.callbackPriority=s,r.callbackNode=o,s}return u!==null&&u!==null&&qt(u),r.callbackPriority=2,r.callbackNode=null,2}function lw(r,s){if(Me!==0&&Me!==5)return r.callbackNode=null,r.callbackPriority=0,null;var o=r.callbackNode;if(sf()&&r.callbackNode!==o)return null;var u=Pt;return u=Ha(r,r===re?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u===0?null:(Vv(r,u,s),ow(r,Oe()),r.callbackNode!=null&&r.callbackNode===o?lw.bind(null,r):null)}function uw(r,s){if(sf())return null;Vv(r,s,!0)}function dE(){xE(function(){(Xt&6)!==0?Yt(Pa,fE):aw()})}function Xg(){return Ta===0&&(Ta=ic()),Ta}function cw(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:yc(""+r)}function fw(r,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,r.id&&o.setAttribute("form",r.id),s.parentNode.insertBefore(o,s),r=new FormData(r),o.parentNode.removeChild(o),r}function hE(r,s,o,u,f){if(s==="submit"&&o&&o.stateNode===f){var m=cw((f[qe]||null).action),b=u.submitter;b&&(s=(s=b[qe]||null)?cw(s.formAction):b.getAttribute("formAction"),s!==null&&(m=s,b=null));var A=new bc("action","action",null,u,f);r.push({event:A,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Ta!==0){var M=b?fw(f,b):new FormData(f);gg(o,{pending:!0,data:M,method:f.method,action:m},null,M)}}else typeof m=="function"&&(A.preventDefault(),M=b?fw(f,b):new FormData(f),gg(o,{pending:!0,data:M,method:f.method,action:m},m,M))},currentTarget:f}]})}}for(var Kg=0;Kg<Mh.length;Kg++){var Fg=Mh[Kg],gE=Fg.toLowerCase(),mE=Fg[0].toUpperCase()+Fg.slice(1);Vn(gE,"on"+mE)}Vn(Vy,"onAnimationEnd"),Vn(jy,"onAnimationIteration"),Vn(Yy,"onAnimationStart"),Vn("dblclick","onDoubleClick"),Vn("focusin","onFocus"),Vn("focusout","onBlur"),Vn(RA,"onTransitionRun"),Vn(MA,"onTransitionStart"),Vn(BA,"onTransitionCancel"),Vn(Gy,"onTransitionEnd"),vs("onMouseEnter",["mouseout","mouseover"]),vs("onMouseLeave",["mouseout","mouseover"]),vs("onPointerEnter",["pointerout","pointerover"]),vs("onPointerLeave",["pointerout","pointerover"]),Rr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Rr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Rr("onBeforeInput",["compositionend","keypress","textInput","paste"]),Rr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Rr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Rr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ql="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),pE=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ql));function dw(r,s){s=(s&4)!==0;for(var o=0;o<r.length;o++){var u=r[o],f=u.event;u=u.listeners;t:{var m=void 0;if(s)for(var b=u.length-1;0<=b;b--){var A=u[b],M=A.instance,X=A.currentTarget;if(A=A.listener,M!==m&&f.isPropagationStopped())break t;m=A,f.currentTarget=X;try{m(f)}catch(st){Gc(st)}f.currentTarget=null,m=M}else for(b=0;b<u.length;b++){if(A=u[b],M=A.instance,X=A.currentTarget,A=A.listener,M!==m&&f.isPropagationStopped())break t;m=A,f.currentTarget=X;try{m(f)}catch(st){Gc(st)}f.currentTarget=null,m=M}}}}function Lt(r,s){var o=s[fl];o===void 0&&(o=s[fl]=new Set);var u=r+"__bubble";o.has(u)||(hw(s,r,2,!1),o.add(u))}function Zg(r,s,o){var u=0;s&&(u|=4),hw(o,r,u,s)}var lf="_reactListening"+Math.random().toString(36).slice(2);function Qg(r){if(!r[lf]){r[lf]=!0,uc.forEach(function(o){o!=="selectionchange"&&(pE.has(o)||Zg(o,!1,r),Zg(o,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[lf]||(s[lf]=!0,Zg("selectionchange",!1,s))}}function hw(r,s,o,u){switch(_w(s)){case 2:var f=HE;break;case 8:f=VE;break;default:f=dm}o=f.bind(null,s,o,r),f=void 0,!Sh||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),u?f!==void 0?r.addEventListener(s,o,{capture:!0,passive:f}):r.addEventListener(s,o,!0):f!==void 0?r.addEventListener(s,o,{passive:f}):r.addEventListener(s,o,!1)}function Wg(r,s,o,u,f){var m=u;if((s&1)===0&&(s&2)===0&&u!==null)t:for(;;){if(u===null)return;var b=u.tag;if(b===3||b===4){var A=u.stateNode.containerInfo;if(A===f)break;if(b===4)for(b=u.return;b!==null;){var M=b.tag;if((M===3||M===4)&&b.stateNode.containerInfo===f)return;b=b.return}for(;A!==null;){if(b=Or(A),b===null)return;if(M=b.tag,M===5||M===6||M===26||M===27){u=m=b;continue t}A=A.parentNode}}u=u.return}Sy(function(){var X=m,st=vh(o),lt=[];t:{var K=Xy.get(r);if(K!==void 0){var Z=bc,kt=r;switch(r){case"keypress":if(wc(o)===0)break t;case"keydown":case"keyup":Z=cA;break;case"focusin":kt="focus",Z=Ah;break;case"focusout":kt="blur",Z=Ah;break;case"beforeblur":case"afterblur":Z=Ah;break;case"click":if(o.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=Ty;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=QT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=hA;break;case Vy:case jy:case Yy:Z=eA;break;case Gy:Z=mA;break;case"scroll":case"scrollend":Z=FT;break;case"wheel":Z=yA;break;case"copy":case"cut":case"paste":Z=rA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=Ey;break;case"toggle":case"beforetoggle":Z=wA}var Nt=(s&4)!==0,Wt=!Nt&&(r==="scroll"||r==="scrollend"),H=Nt?K!==null?K+"Capture":null:K;Nt=[];for(var L=X,G;L!==null;){var at=L;if(G=at.stateNode,at=at.tag,at!==5&&at!==26&&at!==27||G===null||H===null||(at=yl(L,H),at!=null&&Nt.push(Wl(L,at,G))),Wt)break;L=L.return}0<Nt.length&&(K=new Z(K,kt,null,o,st),lt.push({event:K,listeners:Nt}))}}if((s&7)===0){t:{if(K=r==="mouseover"||r==="pointerover",Z=r==="mouseout"||r==="pointerout",K&&o!==yh&&(kt=o.relatedTarget||o.fromElement)&&(Or(kt)||kt[ps]))break t;if((Z||K)&&(K=st.window===st?st:(K=st.ownerDocument)?K.defaultView||K.parentWindow:window,Z?(kt=o.relatedTarget||o.toElement,Z=X,kt=kt?Or(kt):null,kt!==null&&(Wt=l(kt),Nt=kt.tag,kt!==Wt||Nt!==5&&Nt!==27&&Nt!==6)&&(kt=null)):(Z=null,kt=X),Z!==kt)){if(Nt=Ty,at="onMouseLeave",H="onMouseEnter",L="mouse",(r==="pointerout"||r==="pointerover")&&(Nt=Ey,at="onPointerLeave",H="onPointerEnter",L="pointer"),Wt=Z==null?K:oa(Z),G=kt==null?K:oa(kt),K=new Nt(at,L+"leave",Z,o,st),K.target=Wt,K.relatedTarget=G,at=null,Or(st)===X&&(Nt=new Nt(H,L+"enter",kt,o,st),Nt.target=G,Nt.relatedTarget=Wt,at=Nt),Wt=at,Z&&kt)e:{for(Nt=Z,H=kt,L=0,G=Nt;G;G=Eo(G))L++;for(G=0,at=H;at;at=Eo(at))G++;for(;0<L-G;)Nt=Eo(Nt),L--;for(;0<G-L;)H=Eo(H),G--;for(;L--;){if(Nt===H||H!==null&&Nt===H.alternate)break e;Nt=Eo(Nt),H=Eo(H)}Nt=null}else Nt=null;Z!==null&&gw(lt,K,Z,Nt,!1),kt!==null&&Wt!==null&&gw(lt,Wt,kt,Nt,!0)}}t:{if(K=X?oa(X):window,Z=K.nodeName&&K.nodeName.toLowerCase(),Z==="select"||Z==="input"&&K.type==="file")var vt=My;else if(Iy(K))if(By)vt=kA;else{vt=CA;var Bt=NA}else Z=K.nodeName,!Z||Z.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?X&&ph(X.elementType)&&(vt=My):vt=DA;if(vt&&(vt=vt(r,X))){Ry(lt,vt,o,st);break t}Bt&&Bt(r,K,X),r==="focusout"&&X&&K.type==="number"&&X.memoizedProps.value!=null&&mh(K,"number",K.value)}switch(Bt=X?oa(X):window,r){case"focusin":(Iy(Bt)||Bt.contentEditable==="true")&&(to=Bt,Oh=X,El=null);break;case"focusout":El=Oh=to=null;break;case"mousedown":Ih=!0;break;case"contextmenu":case"mouseup":case"dragend":Ih=!1,$y(lt,o,st);break;case"selectionchange":if(IA)break;case"keydown":case"keyup":$y(lt,o,st)}var St;if(Nh)t:{switch(r){case"compositionstart":var Ct="onCompositionStart";break t;case"compositionend":Ct="onCompositionEnd";break t;case"compositionupdate":Ct="onCompositionUpdate";break t}Ct=void 0}else Wa?ky(r,o)&&(Ct="onCompositionEnd"):r==="keydown"&&o.keyCode===229&&(Ct="onCompositionStart");Ct&&(Ny&&o.locale!=="ko"&&(Wa||Ct!=="onCompositionStart"?Ct==="onCompositionEnd"&&Wa&&(St=by()):(bs=st,bh="value"in bs?bs.value:bs.textContent,Wa=!0)),Bt=uf(X,Ct),0<Bt.length&&(Ct=new Ay(Ct,r,null,o,st),lt.push({event:Ct,listeners:Bt}),St?Ct.data=St:(St=Oy(o),St!==null&&(Ct.data=St)))),(St=bA?xA(r,o):TA(r,o))&&(Ct=uf(X,"onBeforeInput"),0<Ct.length&&(Bt=new Ay("onBeforeInput","beforeinput",null,o,st),lt.push({event:Bt,listeners:Ct}),Bt.data=St)),hE(lt,r,X,o,st)}dw(lt,s)})}function Wl(r,s,o){return{instance:r,listener:s,currentTarget:o}}function uf(r,s){for(var o=s+"Capture",u=[];r!==null;){var f=r,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=yl(r,o),f!=null&&u.unshift(Wl(r,f,m)),f=yl(r,s),f!=null&&u.push(Wl(r,f,m))),r.tag===3)return u;r=r.return}return[]}function Eo(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function gw(r,s,o,u,f){for(var m=s._reactName,b=[];o!==null&&o!==u;){var A=o,M=A.alternate,X=A.stateNode;if(A=A.tag,M!==null&&M===u)break;A!==5&&A!==26&&A!==27||X===null||(M=X,f?(X=yl(o,m),X!=null&&b.unshift(Wl(o,X,M))):f||(X=yl(o,m),X!=null&&b.push(Wl(o,X,M)))),o=o.return}b.length!==0&&r.push({event:s,listeners:b})}var yE=/\r\n?/g,vE=/\u0000|\uFFFD/g;function mw(r){return(typeof r=="string"?r:""+r).replace(yE,`
`).replace(vE,"")}function pw(r,s){return s=mw(s),mw(r)===s}function cf(){}function Qt(r,s,o,u,f,m){switch(o){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||Fa(r,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&Fa(r,""+u);break;case"className":ja(r,"class",u);break;case"tabIndex":ja(r,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":ja(r,o,u);break;case"style":vy(r,u,m);break;case"data":if(s!=="object"){ja(r,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||o!=="href")){r.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=yc(""+u),r.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){r.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(o==="formAction"?(s!=="input"&&Qt(r,s,"name",f.name,f,null),Qt(r,s,"formEncType",f.formEncType,f,null),Qt(r,s,"formMethod",f.formMethod,f,null),Qt(r,s,"formTarget",f.formTarget,f,null)):(Qt(r,s,"encType",f.encType,f,null),Qt(r,s,"method",f.method,f,null),Qt(r,s,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=yc(""+u),r.setAttribute(o,u);break;case"onClick":u!=null&&(r.onclick=cf);break;case"onScroll":u!=null&&Lt("scroll",r);break;case"onScrollEnd":u!=null&&Lt("scrollend",r);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(i(60));r.innerHTML=o}}break;case"multiple":r.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":r.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){r.removeAttribute("xlink:href");break}o=yc(""+u),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""+u):r.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""):r.removeAttribute(o);break;case"capture":case"download":u===!0?r.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,u):r.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?r.setAttribute(o,u):r.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?r.removeAttribute(o):r.setAttribute(o,u);break;case"popover":Lt("beforetoggle",r),Lt("toggle",r),Va(r,"popover",u);break;case"xlinkActuate":Hn(r,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Hn(r,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Hn(r,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Hn(r,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Hn(r,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Hn(r,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Hn(r,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Hn(r,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Hn(r,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Va(r,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=XT.get(o)||o,Va(r,o,u))}}function tm(r,s,o,u,f,m){switch(o){case"style":vy(r,u,m);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(i(60));r.innerHTML=o}}break;case"children":typeof u=="string"?Fa(r,u):(typeof u=="number"||typeof u=="bigint")&&Fa(r,""+u);break;case"onScroll":u!=null&&Lt("scroll",r);break;case"onScrollEnd":u!=null&&Lt("scrollend",r);break;case"onClick":u!=null&&(r.onclick=cf);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!cc.hasOwnProperty(o))t:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),s=o.slice(2,f?o.length-7:void 0),m=r[qe]||null,m=m!=null?m[o]:null,typeof m=="function"&&r.removeEventListener(s,m,f),typeof u=="function")){typeof m!="function"&&m!==null&&(o in r?r[o]=null:r.hasAttribute(o)&&r.removeAttribute(o)),r.addEventListener(s,u,f);break t}o in r?r[o]=u:u===!0?r.setAttribute(o,""):Va(r,o,u)}}}function Be(r,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Lt("error",r),Lt("load",r);var u=!1,f=!1,m;for(m in o)if(o.hasOwnProperty(m)){var b=o[m];if(b!=null)switch(m){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:Qt(r,s,m,b,o,null)}}f&&Qt(r,s,"srcSet",o.srcSet,o,null),u&&Qt(r,s,"src",o.src,o,null);return;case"input":Lt("invalid",r);var A=m=b=f=null,M=null,X=null;for(u in o)if(o.hasOwnProperty(u)){var st=o[u];if(st!=null)switch(u){case"name":f=st;break;case"type":b=st;break;case"checked":M=st;break;case"defaultChecked":X=st;break;case"value":m=st;break;case"defaultValue":A=st;break;case"children":case"dangerouslySetInnerHTML":if(st!=null)throw Error(i(137,s));break;default:Qt(r,s,u,st,o,null)}}gy(r,m,A,M,X,b,f,!1),Ga(r);return;case"select":Lt("invalid",r),u=b=m=null;for(f in o)if(o.hasOwnProperty(f)&&(A=o[f],A!=null))switch(f){case"value":m=A;break;case"defaultValue":b=A;break;case"multiple":u=A;default:Qt(r,s,f,A,o,null)}s=m,o=b,r.multiple=!!u,s!=null?Ka(r,!!u,s,!1):o!=null&&Ka(r,!!u,o,!0);return;case"textarea":Lt("invalid",r),m=f=u=null;for(b in o)if(o.hasOwnProperty(b)&&(A=o[b],A!=null))switch(b){case"value":u=A;break;case"defaultValue":f=A;break;case"children":m=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(i(91));break;default:Qt(r,s,b,A,o,null)}py(r,u,f,m),Ga(r);return;case"option":for(M in o)if(o.hasOwnProperty(M)&&(u=o[M],u!=null))switch(M){case"selected":r.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:Qt(r,s,M,u,o,null)}return;case"dialog":Lt("beforetoggle",r),Lt("toggle",r),Lt("cancel",r),Lt("close",r);break;case"iframe":case"object":Lt("load",r);break;case"video":case"audio":for(u=0;u<Ql.length;u++)Lt(Ql[u],r);break;case"image":Lt("error",r),Lt("load",r);break;case"details":Lt("toggle",r);break;case"embed":case"source":case"link":Lt("error",r),Lt("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(X in o)if(o.hasOwnProperty(X)&&(u=o[X],u!=null))switch(X){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:Qt(r,s,X,u,o,null)}return;default:if(ph(s)){for(st in o)o.hasOwnProperty(st)&&(u=o[st],u!==void 0&&tm(r,s,st,u,o,void 0));return}}for(A in o)o.hasOwnProperty(A)&&(u=o[A],u!=null&&Qt(r,s,A,u,o,null))}function wE(r,s,o,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,b=null,A=null,M=null,X=null,st=null;for(Z in o){var lt=o[Z];if(o.hasOwnProperty(Z)&&lt!=null)switch(Z){case"checked":break;case"value":break;case"defaultValue":M=lt;default:u.hasOwnProperty(Z)||Qt(r,s,Z,null,u,lt)}}for(var K in u){var Z=u[K];if(lt=o[K],u.hasOwnProperty(K)&&(Z!=null||lt!=null))switch(K){case"type":m=Z;break;case"name":f=Z;break;case"checked":X=Z;break;case"defaultChecked":st=Z;break;case"value":b=Z;break;case"defaultValue":A=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(i(137,s));break;default:Z!==lt&&Qt(r,s,K,Z,u,lt)}}Xa(r,b,A,M,X,st,m,f);return;case"select":Z=b=A=K=null;for(m in o)if(M=o[m],o.hasOwnProperty(m)&&M!=null)switch(m){case"value":break;case"multiple":Z=M;default:u.hasOwnProperty(m)||Qt(r,s,m,null,u,M)}for(f in u)if(m=u[f],M=o[f],u.hasOwnProperty(f)&&(m!=null||M!=null))switch(f){case"value":K=m;break;case"defaultValue":A=m;break;case"multiple":b=m;default:m!==M&&Qt(r,s,f,m,u,M)}s=A,o=b,u=Z,K!=null?Ka(r,!!o,K,!1):!!u!=!!o&&(s!=null?Ka(r,!!o,s,!0):Ka(r,!!o,o?[]:"",!1));return;case"textarea":Z=K=null;for(A in o)if(f=o[A],o.hasOwnProperty(A)&&f!=null&&!u.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:Qt(r,s,A,null,u,f)}for(b in u)if(f=u[b],m=o[b],u.hasOwnProperty(b)&&(f!=null||m!=null))switch(b){case"value":K=f;break;case"defaultValue":Z=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(i(91));break;default:f!==m&&Qt(r,s,b,f,u,m)}my(r,K,Z);return;case"option":for(var kt in o)if(K=o[kt],o.hasOwnProperty(kt)&&K!=null&&!u.hasOwnProperty(kt))switch(kt){case"selected":r.selected=!1;break;default:Qt(r,s,kt,null,u,K)}for(M in u)if(K=u[M],Z=o[M],u.hasOwnProperty(M)&&K!==Z&&(K!=null||Z!=null))switch(M){case"selected":r.selected=K&&typeof K!="function"&&typeof K!="symbol";break;default:Qt(r,s,M,K,u,Z)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Nt in o)K=o[Nt],o.hasOwnProperty(Nt)&&K!=null&&!u.hasOwnProperty(Nt)&&Qt(r,s,Nt,null,u,K);for(X in u)if(K=u[X],Z=o[X],u.hasOwnProperty(X)&&K!==Z&&(K!=null||Z!=null))switch(X){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(i(137,s));break;default:Qt(r,s,X,K,u,Z)}return;default:if(ph(s)){for(var Wt in o)K=o[Wt],o.hasOwnProperty(Wt)&&K!==void 0&&!u.hasOwnProperty(Wt)&&tm(r,s,Wt,void 0,u,K);for(st in u)K=u[st],Z=o[st],!u.hasOwnProperty(st)||K===Z||K===void 0&&Z===void 0||tm(r,s,st,K,u,Z);return}}for(var H in o)K=o[H],o.hasOwnProperty(H)&&K!=null&&!u.hasOwnProperty(H)&&Qt(r,s,H,null,u,K);for(lt in u)K=u[lt],Z=o[lt],!u.hasOwnProperty(lt)||K===Z||K==null&&Z==null||Qt(r,s,lt,K,u,Z)}var em=null,nm=null;function ff(r){return r.nodeType===9?r:r.ownerDocument}function yw(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function vw(r,s){if(r===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&s==="foreignObject"?0:r}function rm(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var im=null;function SE(){var r=window.event;return r&&r.type==="popstate"?r===im?!1:(im=r,!0):(im=null,!1)}var ww=typeof setTimeout=="function"?setTimeout:void 0,bE=typeof clearTimeout=="function"?clearTimeout:void 0,Sw=typeof Promise=="function"?Promise:void 0,xE=typeof queueMicrotask=="function"?queueMicrotask:typeof Sw<"u"?function(r){return Sw.resolve(null).then(r).catch(TE)}:ww;function TE(r){setTimeout(function(){throw r})}function _s(r){return r==="head"}function bw(r,s){var o=s,u=0,f=0;do{var m=o.nextSibling;if(r.removeChild(o),m&&m.nodeType===8)if(o=m.data,o==="/$"){if(0<u&&8>u){o=u;var b=r.ownerDocument;if(o&1&&tu(b.documentElement),o&2&&tu(b.body),o&4)for(o=b.head,tu(o),b=o.firstChild;b;){var A=b.nextSibling,M=b.nodeName;b[aa]||M==="SCRIPT"||M==="STYLE"||M==="LINK"&&b.rel.toLowerCase()==="stylesheet"||o.removeChild(b),b=A}}if(f===0){r.removeChild(m),lu(s);return}f--}else o==="$"||o==="$?"||o==="$!"?f++:u=o.charCodeAt(0)-48;else u=0;o=m}while(o);lu(s)}function sm(r){var s=r.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":sm(o),dl(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}r.removeChild(o)}}function AE(r,s,o,u){for(;r.nodeType===1;){var f=o;if(r.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(u){if(!r[aa])switch(s){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(m=r.getAttribute("rel"),m==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(m!==f.rel||r.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||r.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||r.getAttribute("title")!==(f.title==null?null:f.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(m=r.getAttribute("src"),(m!==(f.src==null?null:f.src)||r.getAttribute("type")!==(f.type==null?null:f.type)||r.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(s==="input"&&r.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&r.getAttribute("name")===m)return r}else return r;if(r=Yn(r.nextSibling),r===null)break}return null}function EE(r,s,o){if(s==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!o||(r=Yn(r.nextSibling),r===null))return null;return r}function am(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState==="complete"}function NE(r,s){var o=r.ownerDocument;if(r.data!=="$?"||o.readyState==="complete")s();else{var u=function(){s(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),r._reactRetry=u}}function Yn(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return r}var om=null;function xw(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var o=r.data;if(o==="$"||o==="$!"||o==="$?"){if(s===0)return r;s--}else o==="/$"&&s++}r=r.previousSibling}return null}function Tw(r,s,o){switch(s=ff(o),r){case"html":if(r=s.documentElement,!r)throw Error(i(452));return r;case"head":if(r=s.head,!r)throw Error(i(453));return r;case"body":if(r=s.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function tu(r){for(var s=r.attributes;s.length;)r.removeAttributeNode(s[0]);dl(r)}var Nn=new Map,Aw=new Set;function df(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var Yr=B.d;B.d={f:CE,r:DE,D:kE,C:OE,L:IE,m:RE,X:BE,S:ME,M:zE};function CE(){var r=Yr.f(),s=nf();return r||s}function DE(r){var s=Ir(r);s!==null&&s.tag===5&&s.type==="form"?V0(s):Yr.r(r)}var No=typeof document>"u"?null:document;function Ew(r,s,o){var u=No;if(u&&typeof s=="string"&&s){var f=Xe(s);f='link[rel="'+r+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),Aw.has(f)||(Aw.add(f),r={rel:r,crossOrigin:o,href:s},u.querySelector(f)===null&&(s=u.createElement("link"),Be(s,"link",r),ve(s),u.head.appendChild(s)))}}function kE(r){Yr.D(r),Ew("dns-prefetch",r,null)}function OE(r,s){Yr.C(r,s),Ew("preconnect",r,s)}function IE(r,s,o){Yr.L(r,s,o);var u=No;if(u&&r&&s){var f='link[rel="preload"][as="'+Xe(s)+'"]';s==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+Xe(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+Xe(o.imageSizes)+'"]')):f+='[href="'+Xe(r)+'"]';var m=f;switch(s){case"style":m=Co(r);break;case"script":m=Do(r)}Nn.has(m)||(r=p({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:r,as:s},o),Nn.set(m,r),u.querySelector(f)!==null||s==="style"&&u.querySelector(eu(m))||s==="script"&&u.querySelector(nu(m))||(s=u.createElement("link"),Be(s,"link",r),ve(s),u.head.appendChild(s)))}}function RE(r,s){Yr.m(r,s);var o=No;if(o&&r){var u=s&&typeof s.as=="string"?s.as:"script",f='link[rel="modulepreload"][as="'+Xe(u)+'"][href="'+Xe(r)+'"]',m=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=Do(r)}if(!Nn.has(m)&&(r=p({rel:"modulepreload",href:r},s),Nn.set(m,r),o.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(nu(m)))return}u=o.createElement("link"),Be(u,"link",r),ve(u),o.head.appendChild(u)}}}function ME(r,s,o){Yr.S(r,s,o);var u=No;if(u&&r){var f=ys(u).hoistableStyles,m=Co(r);s=s||"default";var b=f.get(m);if(!b){var A={loading:0,preload:null};if(b=u.querySelector(eu(m)))A.loading=5;else{r=p({rel:"stylesheet",href:r,"data-precedence":s},o),(o=Nn.get(m))&&lm(r,o);var M=b=u.createElement("link");ve(M),Be(M,"link",r),M._p=new Promise(function(X,st){M.onload=X,M.onerror=st}),M.addEventListener("load",function(){A.loading|=1}),M.addEventListener("error",function(){A.loading|=2}),A.loading|=4,hf(b,s,u)}b={type:"stylesheet",instance:b,count:1,state:A},f.set(m,b)}}}function BE(r,s){Yr.X(r,s);var o=No;if(o&&r){var u=ys(o).hoistableScripts,f=Do(r),m=u.get(f);m||(m=o.querySelector(nu(f)),m||(r=p({src:r,async:!0},s),(s=Nn.get(f))&&um(r,s),m=o.createElement("script"),ve(m),Be(m,"link",r),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(f,m))}}function zE(r,s){Yr.M(r,s);var o=No;if(o&&r){var u=ys(o).hoistableScripts,f=Do(r),m=u.get(f);m||(m=o.querySelector(nu(f)),m||(r=p({src:r,async:!0,type:"module"},s),(s=Nn.get(f))&&um(r,s),m=o.createElement("script"),ve(m),Be(m,"link",r),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(f,m))}}function Nw(r,s,o,u){var f=(f=dt.current)?df(f):null;if(!f)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=Co(o.href),o=ys(f).hoistableStyles,u=o.get(s),u||(u={type:"style",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){r=Co(o.href);var m=ys(f).hoistableStyles,b=m.get(r);if(b||(f=f.ownerDocument||f,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(r,b),(m=f.querySelector(eu(r)))&&!m._p&&(b.instance=m,b.state.loading=5),Nn.has(r)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Nn.set(r,o),m||LE(f,r,o,b.state))),s&&u===null)throw Error(i(528,""));return b}if(s&&u!==null)throw Error(i(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Do(o),o=ys(f).hoistableScripts,u=o.get(s),u||(u={type:"script",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function Co(r){return'href="'+Xe(r)+'"'}function eu(r){return'link[rel="stylesheet"]['+r+"]"}function Cw(r){return p({},r,{"data-precedence":r.precedence,precedence:null})}function LE(r,s,o,u){r.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=r.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),Be(s,"link",o),ve(s),r.head.appendChild(s))}function Do(r){return'[src="'+Xe(r)+'"]'}function nu(r){return"script[async]"+r}function Dw(r,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var u=r.querySelector('style[data-href~="'+Xe(o.href)+'"]');if(u)return s.instance=u,ve(u),u;var f=p({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(r.ownerDocument||r).createElement("style"),ve(u),Be(u,"style",f),hf(u,o.precedence,r),s.instance=u;case"stylesheet":f=Co(o.href);var m=r.querySelector(eu(f));if(m)return s.state.loading|=4,s.instance=m,ve(m),m;u=Cw(o),(f=Nn.get(f))&&lm(u,f),m=(r.ownerDocument||r).createElement("link"),ve(m);var b=m;return b._p=new Promise(function(A,M){b.onload=A,b.onerror=M}),Be(m,"link",u),s.state.loading|=4,hf(m,o.precedence,r),s.instance=m;case"script":return m=Do(o.src),(f=r.querySelector(nu(m)))?(s.instance=f,ve(f),f):(u=o,(f=Nn.get(m))&&(u=p({},o),um(u,f)),r=r.ownerDocument||r,f=r.createElement("script"),ve(f),Be(f,"link",u),r.head.appendChild(f),s.instance=f);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,hf(u,o.precedence,r));return s.instance}function hf(r,s,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,m=f,b=0;b<u.length;b++){var A=u[b];if(A.dataset.precedence===s)m=A;else if(m!==f)break}m?m.parentNode.insertBefore(r,m.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(r,s.firstChild))}function lm(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.title==null&&(r.title=s.title)}function um(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.integrity==null&&(r.integrity=s.integrity)}var gf=null;function kw(r,s,o){if(gf===null){var u=new Map,f=gf=new Map;f.set(o,u)}else f=gf,u=f.get(o),u||(u=new Map,f.set(o,u));if(u.has(r))return u;for(u.set(r,null),o=o.getElementsByTagName(r),f=0;f<o.length;f++){var m=o[f];if(!(m[aa]||m[Ne]||r==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var b=m.getAttribute(s)||"";b=r+b;var A=u.get(b);A?A.push(m):u.set(b,[m])}}return u}function Ow(r,s,o){r=r.ownerDocument||r,r.head.insertBefore(o,s==="title"?r.querySelector("head > title"):null)}function _E(r,s,o){if(o===1||s.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return r=s.disabled,typeof s.precedence=="string"&&r==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function Iw(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}var ru=null;function UE(){}function qE(r,s,o){if(ru===null)throw Error(i(475));var u=ru;if(s.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var f=Co(o.href),m=r.querySelector(eu(f));if(m){r=m._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(u.count++,u=mf.bind(u),r.then(u,u)),s.state.loading|=4,s.instance=m,ve(m);return}m=r.ownerDocument||r,o=Cw(o),(f=Nn.get(f))&&lm(o,f),m=m.createElement("link"),ve(m);var b=m;b._p=new Promise(function(A,M){b.onload=A,b.onerror=M}),Be(m,"link",o),s.instance=m}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(s,r),(r=s.state.preload)&&(s.state.loading&3)===0&&(u.count++,s=mf.bind(u),r.addEventListener("load",s),r.addEventListener("error",s))}}function PE(){if(ru===null)throw Error(i(475));var r=ru;return r.stylesheets&&r.count===0&&cm(r,r.stylesheets),0<r.count?function(s){var o=setTimeout(function(){if(r.stylesheets&&cm(r,r.stylesheets),r.unsuspend){var u=r.unsuspend;r.unsuspend=null,u()}},6e4);return r.unsuspend=s,function(){r.unsuspend=null,clearTimeout(o)}}:null}function mf(){if(this.count--,this.count===0){if(this.stylesheets)cm(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var pf=null;function cm(r,s){r.stylesheets=null,r.unsuspend!==null&&(r.count++,pf=new Map,s.forEach(JE,r),pf=null,mf.call(r))}function JE(r,s){if(!(s.state.loading&4)){var o=pf.get(r);if(o)var u=o.get(null);else{o=new Map,pf.set(r,o);for(var f=r.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var b=f[m];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(o.set(b.dataset.precedence,b),u=b)}u&&o.set(null,u)}f=s.instance,b=f.getAttribute("data-precedence"),m=o.get(b)||u,m===u&&o.set(null,f),o.set(b,f),this.count++,u=mf.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),m?m.parentNode.insertBefore(f,m.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(f,r.firstChild)),s.state.loading|=4}}var iu={$$typeof:N,Provider:null,Consumer:null,_currentValue:$,_currentValue2:$,_threadCount:0};function $E(r,s,o,u,f,m,b,A){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ol(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ol(0),this.hiddenUpdates=ol(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=A,this.incompleteTransitions=new Map}function Rw(r,s,o,u,f,m,b,A,M,X,st,lt){return r=new $E(r,s,o,b,A,M,X,lt),s=1,m===!0&&(s|=24),m=ln(3,null,null,s),r.current=m,m.stateNode=r,s=jh(),s.refCount++,r.pooledCache=s,s.refCount++,m.memoizedState={element:u,isDehydrated:o,cache:s},Kh(m),r}function Mw(r){return r?(r=io,r):io}function Bw(r,s,o,u,f,m){f=Mw(f),u.context===null?u.context=f:u.pendingContext=f,u=As(s),u.payload={element:o},m=m===void 0?null:m,m!==null&&(u.callback=m),o=Es(r,u,s),o!==null&&(hn(o,r,s),Bl(o,r,s))}function zw(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var o=r.retryLane;r.retryLane=o!==0&&o<s?o:s}}function fm(r,s){zw(r,s),(r=r.alternate)&&zw(r,s)}function Lw(r){if(r.tag===13){var s=ro(r,67108864);s!==null&&hn(s,r,67108864),fm(r,67108864)}}var yf=!0;function HE(r,s,o,u){var f=D.T;D.T=null;var m=B.p;try{B.p=2,dm(r,s,o,u)}finally{B.p=m,D.T=f}}function VE(r,s,o,u){var f=D.T;D.T=null;var m=B.p;try{B.p=8,dm(r,s,o,u)}finally{B.p=m,D.T=f}}function dm(r,s,o,u){if(yf){var f=hm(u);if(f===null)Wg(r,s,u,vf,o),Uw(r,u);else if(YE(f,r,s,o,u))u.stopPropagation();else if(Uw(r,u),s&4&&-1<jE.indexOf(r)){for(;f!==null;){var m=Ir(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var b=kr(m.pendingLanes);if(b!==0){var A=m;for(A.pendingLanes|=2,A.entangledLanes|=2;b;){var M=1<<31-Ie(b);A.entanglements[1]|=M,b&=~M}ur(m),(Xt&6)===0&&(tf=Oe()+500,Zl(0))}}break;case 13:A=ro(m,2),A!==null&&hn(A,m,2),nf(),fm(m,2)}if(m=hm(u),m===null&&Wg(r,s,u,vf,o),m===f)break;f=m}f!==null&&u.stopPropagation()}else Wg(r,s,u,null,o)}}function hm(r){return r=vh(r),gm(r)}var vf=null;function gm(r){if(vf=null,r=Or(r),r!==null){var s=l(r);if(s===null)r=null;else{var o=s.tag;if(o===13){if(r=c(s),r!==null)return r;r=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null)}}return vf=r,null}function _w(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(sl()){case Pa:return 2;case hs:return 8;case gs:case na:return 32;case ms:return 268435456;default:return 32}default:return 32}}var mm=!1,Us=null,qs=null,Ps=null,su=new Map,au=new Map,Js=[],jE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Uw(r,s){switch(r){case"focusin":case"focusout":Us=null;break;case"dragenter":case"dragleave":qs=null;break;case"mouseover":case"mouseout":Ps=null;break;case"pointerover":case"pointerout":su.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":au.delete(s.pointerId)}}function ou(r,s,o,u,f,m){return r===null||r.nativeEvent!==m?(r={blockedOn:s,domEventName:o,eventSystemFlags:u,nativeEvent:m,targetContainers:[f]},s!==null&&(s=Ir(s),s!==null&&Lw(s)),r):(r.eventSystemFlags|=u,s=r.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),r)}function YE(r,s,o,u,f){switch(s){case"focusin":return Us=ou(Us,r,s,o,u,f),!0;case"dragenter":return qs=ou(qs,r,s,o,u,f),!0;case"mouseover":return Ps=ou(Ps,r,s,o,u,f),!0;case"pointerover":var m=f.pointerId;return su.set(m,ou(su.get(m)||null,r,s,o,u,f)),!0;case"gotpointercapture":return m=f.pointerId,au.set(m,ou(au.get(m)||null,r,s,o,u,f)),!0}return!1}function qw(r){var s=Or(r.target);if(s!==null){var o=l(s);if(o!==null){if(s=o.tag,s===13){if(s=c(o),s!==null){r.blockedOn=s,uh(r.priority,function(){if(o.tag===13){var u=dn();u=ul(u);var f=ro(o,u);f!==null&&hn(f,o,u),fm(o,u)}});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){r.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}r.blockedOn=null}function wf(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var o=hm(r.nativeEvent);if(o===null){o=r.nativeEvent;var u=new o.constructor(o.type,o);yh=u,o.target.dispatchEvent(u),yh=null}else return s=Ir(o),s!==null&&Lw(s),r.blockedOn=o,!1;s.shift()}return!0}function Pw(r,s,o){wf(r)&&o.delete(s)}function GE(){mm=!1,Us!==null&&wf(Us)&&(Us=null),qs!==null&&wf(qs)&&(qs=null),Ps!==null&&wf(Ps)&&(Ps=null),su.forEach(Pw),au.forEach(Pw)}function Sf(r,s){r.blockedOn===s&&(r.blockedOn=null,mm||(mm=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,GE)))}var bf=null;function Jw(r){bf!==r&&(bf=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){bf===r&&(bf=null);for(var s=0;s<r.length;s+=3){var o=r[s],u=r[s+1],f=r[s+2];if(typeof u!="function"){if(gm(u||o)===null)continue;break}var m=Ir(o);m!==null&&(r.splice(s,3),s-=3,gg(m,{pending:!0,data:f,method:o.method,action:u},u,f))}}))}function lu(r){function s(M){return Sf(M,r)}Us!==null&&Sf(Us,r),qs!==null&&Sf(qs,r),Ps!==null&&Sf(Ps,r),su.forEach(s),au.forEach(s);for(var o=0;o<Js.length;o++){var u=Js[o];u.blockedOn===r&&(u.blockedOn=null)}for(;0<Js.length&&(o=Js[0],o.blockedOn===null);)qw(o),o.blockedOn===null&&Js.shift();if(o=(r.ownerDocument||r).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var f=o[u],m=o[u+1],b=f[qe]||null;if(typeof m=="function")b||Jw(o);else if(b){var A=null;if(m&&m.hasAttribute("formAction")){if(f=m,b=m[qe]||null)A=b.formAction;else if(gm(f)!==null)continue}else A=b.action;typeof A=="function"?o[u+1]=A:(o.splice(u,3),u-=3),Jw(o)}}}function pm(r){this._internalRoot=r}xf.prototype.render=pm.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(i(409));var o=s.current,u=dn();Bw(o,u,r,s,null,null)},xf.prototype.unmount=pm.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;Bw(r.current,2,null,r,null,null),nf(),s[ps]=null}};function xf(r){this._internalRoot=r}xf.prototype.unstable_scheduleHydration=function(r){if(r){var s=oc();r={blockedOn:null,target:r,priority:s};for(var o=0;o<Js.length&&s!==0&&s<Js[o].priority;o++);Js.splice(o,0,r),o===0&&qw(r)}};var $w=t.version;if($w!=="19.1.0")throw Error(i(527,$w,"19.1.0"));B.findDOMNode=function(r){var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=h(s),r=r!==null?g(r):null,r=r===null?null:r.stateNode,r};var XE={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:D,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Tf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Tf.isDisabled&&Tf.supportsFiber)try{$n=Tf.inject(XE),Ee=Tf}catch{}}return cu.createRoot=function(r,s){if(!a(r))throw Error(i(299));var o=!1,u="",f=iv,m=sv,b=av,A=null;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(f=s.onUncaughtError),s.onCaughtError!==void 0&&(m=s.onCaughtError),s.onRecoverableError!==void 0&&(b=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(A=s.unstable_transitionCallbacks)),s=Rw(r,1,!1,null,null,o,u,f,m,b,A,null),r[ps]=s.current,Qg(r),new pm(s)},cu.hydrateRoot=function(r,s,o){if(!a(r))throw Error(i(299));var u=!1,f="",m=iv,b=sv,A=av,M=null,X=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(m=o.onUncaughtError),o.onCaughtError!==void 0&&(b=o.onCaughtError),o.onRecoverableError!==void 0&&(A=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(M=o.unstable_transitionCallbacks),o.formState!==void 0&&(X=o.formState)),s=Rw(r,1,!0,s,o??null,u,f,m,b,A,M,X),s.context=Mw(null),o=s.current,u=dn(),u=ul(u),f=As(u),f.callback=null,Es(o,f,u),o=u,s.current.lanes=o,sa(s,o),ur(s),r[ps]=s.current,Qg(r),new xf(s)},cu.version="19.1.0",cu}var Qw;function sN(){if(Qw)return vm.exports;Qw=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),vm.exports=iN(),vm.exports}var aN=sN();const oN="@yorkie-js/react",lN="0.6.23",Ww={name:oN,version:lN};var et=Gu();const uN=Qb(et);var _t;(function(n){n[n.Canceled=1]="Canceled",n[n.Unknown=2]="Unknown",n[n.InvalidArgument=3]="InvalidArgument",n[n.DeadlineExceeded=4]="DeadlineExceeded",n[n.NotFound=5]="NotFound",n[n.AlreadyExists=6]="AlreadyExists",n[n.PermissionDenied=7]="PermissionDenied",n[n.ResourceExhausted=8]="ResourceExhausted",n[n.FailedPrecondition=9]="FailedPrecondition",n[n.Aborted=10]="Aborted",n[n.OutOfRange=11]="OutOfRange",n[n.Unimplemented=12]="Unimplemented",n[n.Internal=13]="Internal",n[n.Unavailable=14]="Unavailable",n[n.DataLoss=15]="DataLoss",n[n.Unauthenticated=16]="Unauthenticated"})(_t||(_t={}));function tS(n){const t=_t[n];return typeof t!="string"?n.toString():t[0].toLowerCase()+t.substring(1).replace(/[A-Z]/g,e=>"_"+e.toLowerCase())}class Gt extends Error{constructor(t,e=_t.Unknown,i,a,l){super(cN(t,e)),this.name="ConnectError",Object.setPrototypeOf(this,new.target.prototype),this.rawMessage=t,this.code=e,this.metadata=new Headers(i??{}),this.details=a??[],this.cause=l}static from(t,e=_t.Unknown){return t instanceof Gt?t:t instanceof Error?t.name=="AbortError"?new Gt(t.message,_t.Canceled):new Gt(t.message,e,void 0,void 0,t):new Gt(String(t),e,void 0,void 0,t)}static[Symbol.hasInstance](t){return t instanceof Error?Object.getPrototypeOf(t)===Gt.prototype?!0:t.name==="ConnectError"&&"code"in t&&typeof t.code=="number"&&"metadata"in t&&"details"in t&&Array.isArray(t.details)&&"rawMessage"in t&&typeof t.rawMessage=="string"&&"cause"in t:!1}findDetails(t){const e="typeName"in t?{findMessage:a=>a===t.typeName?t:void 0}:t,i=[];for(const a of this.details){if("getType"in a){e.findMessage(a.getType().typeName)&&i.push(a);continue}const l=e.findMessage(a.type);if(l)try{i.push(l.fromBinary(a.value))}catch{}}return i}}function cN(n,t){return n.length?`[${tS(t)}] ${n}`:`[${tS(t)}]`}function de(n,t){if(!n)throw new Error(t)}const fN=34028234663852886e22,dN=-34028234663852886e22,hN=4294967295,gN=2147483647,mN=-2147483648;function Pf(n){if(typeof n!="number")throw new Error("invalid int 32: "+typeof n);if(!Number.isInteger(n)||n>gN||n<mN)throw new Error("invalid int 32: "+n)}function Hm(n){if(typeof n!="number")throw new Error("invalid uint 32: "+typeof n);if(!Number.isInteger(n)||n>hN||n<0)throw new Error("invalid uint 32: "+n)}function t1(n){if(typeof n!="number")throw new Error("invalid float 32: "+typeof n);if(Number.isFinite(n)&&(n>fN||n<dN))throw new Error("invalid float 32: "+n)}const e1=Symbol("@bufbuild/protobuf/enum-type");function pN(n){const t=n[e1];return de(t,"missing enum type on enum object"),t}function n1(n,t,e,i){n[e1]=r1(t,e.map(a=>({no:a.no,name:a.name,localName:n[a.no]})))}function r1(n,t,e){const i=Object.create(null),a=Object.create(null),l=[];for(const c of t){const d=i1(c);l.push(d),i[c.name]=d,a[c.no]=d}return{typeName:n,values:l,findName(c){return i[c]},findNumber(c){return a[c]}}}function yN(n,t,e){const i={};for(const a of t){const l=i1(a);i[l.localName]=l.no,i[l.no]=l.localName}return n1(i,n,t),i}function i1(n){return"localName"in n?n:Object.assign(Object.assign({},n),{localName:n.name})}class mt{equals(t){return this.getType().runtime.util.equals(this.getType(),this,t)}clone(){return this.getType().runtime.util.clone(this)}fromBinary(t,e){const i=this.getType(),a=i.runtime.bin,l=a.makeReadOptions(e);return a.readMessage(this,l.readerFactory(t),t.byteLength,l),this}fromJson(t,e){const i=this.getType(),a=i.runtime.json,l=a.makeReadOptions(e);return a.readMessage(i,t,l,this),this}fromJsonString(t,e){let i;try{i=JSON.parse(t)}catch(a){throw new Error(`cannot decode ${this.getType().typeName} from JSON: ${a instanceof Error?a.message:String(a)}`)}return this.fromJson(i,e)}toBinary(t){const e=this.getType(),i=e.runtime.bin,a=i.makeWriteOptions(t),l=a.writerFactory();return i.writeMessage(this,l,a),l.finish()}toJson(t){const e=this.getType(),i=e.runtime.json,a=i.makeWriteOptions(t);return i.writeMessage(this,a)}toJsonString(t){var e;const i=this.toJson(t);return JSON.stringify(i,null,(e=t==null?void 0:t.prettySpaces)!==null&&e!==void 0?e:0)}toJSON(){return this.toJson({emitDefaultValues:!0})}getType(){return Object.getPrototypeOf(this).constructor}}function vN(n,t,e,i){var a;const l=(a=i==null?void 0:i.localName)!==null&&a!==void 0?a:t.substring(t.lastIndexOf(".")+1),c={[l]:function(d){n.util.initFields(this),n.util.initPartial(d,this)}}[l];return Object.setPrototypeOf(c.prototype,new mt),Object.assign(c,{runtime:n,typeName:t,fields:n.util.newFieldList(e),fromBinary(d,h){return new c().fromBinary(d,h)},fromJson(d,h){return new c().fromJson(d,h)},fromJsonString(d,h){return new c().fromJsonString(d,h)},equals(d,h){return n.util.equals(c,d,h)}}),c}function wN(){let n=0,t=0;for(let i=0;i<28;i+=7){let a=this.buf[this.pos++];if(n|=(a&127)<<i,(a&128)==0)return this.assertBounds(),[n,t]}let e=this.buf[this.pos++];if(n|=(e&15)<<28,t=(e&112)>>4,(e&128)==0)return this.assertBounds(),[n,t];for(let i=3;i<=31;i+=7){let a=this.buf[this.pos++];if(t|=(a&127)<<i,(a&128)==0)return this.assertBounds(),[n,t]}throw new Error("invalid varint")}function Tm(n,t,e){for(let l=0;l<28;l=l+7){const c=n>>>l,d=!(!(c>>>7)&&t==0),h=(d?c|128:c)&255;if(e.push(h),!d)return}const i=n>>>28&15|(t&7)<<4,a=t>>3!=0;if(e.push((a?i|128:i)&255),!!a){for(let l=3;l<31;l=l+7){const c=t>>>l,d=!!(c>>>7),h=(d?c|128:c)&255;if(e.push(h),!d)return}e.push(t>>>31&1)}}const Jf=4294967296;function eS(n){const t=n[0]==="-";t&&(n=n.slice(1));const e=1e6;let i=0,a=0;function l(c,d){const h=Number(n.slice(c,d));a*=e,i=i*e+h,i>=Jf&&(a=a+(i/Jf|0),i=i%Jf)}return l(-24,-18),l(-18,-12),l(-12,-6),l(-6),t?a1(i,a):Mp(i,a)}function SN(n,t){let e=Mp(n,t);const i=e.hi&2147483648;i&&(e=a1(e.lo,e.hi));const a=s1(e.lo,e.hi);return i?"-"+a:a}function s1(n,t){if({lo:n,hi:t}=bN(n,t),t<=2097151)return String(Jf*t+n);const e=n&16777215,i=(n>>>24|t<<8)&16777215,a=t>>16&65535;let l=e+i*6777216+a*6710656,c=i+a*8147497,d=a*2;const h=1e7;return l>=h&&(c+=Math.floor(l/h),l%=h),c>=h&&(d+=Math.floor(c/h),c%=h),d.toString()+nS(c)+nS(l)}function bN(n,t){return{lo:n>>>0,hi:t>>>0}}function Mp(n,t){return{lo:n|0,hi:t|0}}function a1(n,t){return t=~t,n?n=~n+1:t+=1,Mp(n,t)}const nS=n=>{const t=String(n);return"0000000".slice(t.length)+t};function rS(n,t){if(n>=0){for(;n>127;)t.push(n&127|128),n=n>>>7;t.push(n)}else{for(let e=0;e<9;e++)t.push(n&127|128),n=n>>7;t.push(1)}}function xN(){let n=this.buf[this.pos++],t=n&127;if((n&128)==0)return this.assertBounds(),t;if(n=this.buf[this.pos++],t|=(n&127)<<7,(n&128)==0)return this.assertBounds(),t;if(n=this.buf[this.pos++],t|=(n&127)<<14,(n&128)==0)return this.assertBounds(),t;if(n=this.buf[this.pos++],t|=(n&127)<<21,(n&128)==0)return this.assertBounds(),t;n=this.buf[this.pos++],t|=(n&15)<<28;for(let e=5;(n&128)!==0&&e<10;e++)n=this.buf[this.pos++];if((n&128)!=0)throw new Error("invalid varint");return this.assertBounds(),t>>>0}var iS={};function TN(){const n=new DataView(new ArrayBuffer(8));if(typeof BigInt=="function"&&typeof n.getBigInt64=="function"&&typeof n.getBigUint64=="function"&&typeof n.setBigInt64=="function"&&typeof n.setBigUint64=="function"&&(typeof process!="object"||typeof iS!="object"||iS.BUF_BIGINT_DISABLE!=="1")){const a=BigInt("-9223372036854775808"),l=BigInt("9223372036854775807"),c=BigInt("0"),d=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(h){const g=typeof h=="bigint"?h:BigInt(h);if(g>l||g<a)throw new Error(`int64 invalid: ${h}`);return g},uParse(h){const g=typeof h=="bigint"?h:BigInt(h);if(g>d||g<c)throw new Error(`uint64 invalid: ${h}`);return g},enc(h){return n.setBigInt64(0,this.parse(h),!0),{lo:n.getInt32(0,!0),hi:n.getInt32(4,!0)}},uEnc(h){return n.setBigInt64(0,this.uParse(h),!0),{lo:n.getInt32(0,!0),hi:n.getInt32(4,!0)}},dec(h,g){return n.setInt32(0,h,!0),n.setInt32(4,g,!0),n.getBigInt64(0,!0)},uDec(h,g){return n.setInt32(0,h,!0),n.setInt32(4,g,!0),n.getBigUint64(0,!0)}}}const e=a=>de(/^-?[0-9]+$/.test(a),`int64 invalid: ${a}`),i=a=>de(/^[0-9]+$/.test(a),`uint64 invalid: ${a}`);return{zero:"0",supported:!1,parse(a){return typeof a!="string"&&(a=a.toString()),e(a),a},uParse(a){return typeof a!="string"&&(a=a.toString()),i(a),a},enc(a){return typeof a!="string"&&(a=a.toString()),e(a),eS(a)},uEnc(a){return typeof a!="string"&&(a=a.toString()),i(a),eS(a)},dec(a,l){return SN(a,l)},uDec(a,l){return s1(a,l)}}}const ie=TN();var it;(function(n){n[n.DOUBLE=1]="DOUBLE",n[n.FLOAT=2]="FLOAT",n[n.INT64=3]="INT64",n[n.UINT64=4]="UINT64",n[n.INT32=5]="INT32",n[n.FIXED64=6]="FIXED64",n[n.FIXED32=7]="FIXED32",n[n.BOOL=8]="BOOL",n[n.STRING=9]="STRING",n[n.BYTES=12]="BYTES",n[n.UINT32=13]="UINT32",n[n.SFIXED32=15]="SFIXED32",n[n.SFIXED64=16]="SFIXED64",n[n.SINT32=17]="SINT32",n[n.SINT64=18]="SINT64"})(it||(it={}));var ea;(function(n){n[n.BIGINT=0]="BIGINT",n[n.STRING=1]="STRING"})(ea||(ea={}));function Hs(n,t,e){if(t===e)return!0;if(n==it.BYTES){if(!(t instanceof Uint8Array)||!(e instanceof Uint8Array)||t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0}switch(n){case it.UINT64:case it.FIXED64:case it.INT64:case it.SFIXED64:case it.SINT64:return t==e}return!1}function $o(n,t){switch(n){case it.BOOL:return!1;case it.UINT64:case it.FIXED64:case it.INT64:case it.SFIXED64:case it.SINT64:return t==0?ie.zero:"0";case it.DOUBLE:case it.FLOAT:return 0;case it.BYTES:return new Uint8Array(0);case it.STRING:return"";default:return 0}}function o1(n,t){switch(n){case it.BOOL:return t===!1;case it.STRING:return t==="";case it.BYTES:return t instanceof Uint8Array&&!t.byteLength;default:return t==0}}var ye;(function(n){n[n.Varint=0]="Varint",n[n.Bit64=1]="Bit64",n[n.LengthDelimited=2]="LengthDelimited",n[n.StartGroup=3]="StartGroup",n[n.EndGroup=4]="EndGroup",n[n.Bit32=5]="Bit32"})(ye||(ye={}));class AN{constructor(t){this.stack=[],this.textEncoder=t??new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let t=0;for(let a=0;a<this.chunks.length;a++)t+=this.chunks[a].length;let e=new Uint8Array(t),i=0;for(let a=0;a<this.chunks.length;a++)e.set(this.chunks[a],i),i+=this.chunks[a].length;return this.chunks=[],e}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let t=this.finish(),e=this.stack.pop();if(!e)throw new Error("invalid state, fork stack empty");return this.chunks=e.chunks,this.buf=e.buf,this.uint32(t.byteLength),this.raw(t)}tag(t,e){return this.uint32((t<<3|e)>>>0)}raw(t){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(t),this}uint32(t){for(Hm(t);t>127;)this.buf.push(t&127|128),t=t>>>7;return this.buf.push(t),this}int32(t){return Pf(t),rS(t,this.buf),this}bool(t){return this.buf.push(t?1:0),this}bytes(t){return this.uint32(t.byteLength),this.raw(t)}string(t){let e=this.textEncoder.encode(t);return this.uint32(e.byteLength),this.raw(e)}float(t){t1(t);let e=new Uint8Array(4);return new DataView(e.buffer).setFloat32(0,t,!0),this.raw(e)}double(t){let e=new Uint8Array(8);return new DataView(e.buffer).setFloat64(0,t,!0),this.raw(e)}fixed32(t){Hm(t);let e=new Uint8Array(4);return new DataView(e.buffer).setUint32(0,t,!0),this.raw(e)}sfixed32(t){Pf(t);let e=new Uint8Array(4);return new DataView(e.buffer).setInt32(0,t,!0),this.raw(e)}sint32(t){return Pf(t),t=(t<<1^t>>31)>>>0,rS(t,this.buf),this}sfixed64(t){let e=new Uint8Array(8),i=new DataView(e.buffer),a=ie.enc(t);return i.setInt32(0,a.lo,!0),i.setInt32(4,a.hi,!0),this.raw(e)}fixed64(t){let e=new Uint8Array(8),i=new DataView(e.buffer),a=ie.uEnc(t);return i.setInt32(0,a.lo,!0),i.setInt32(4,a.hi,!0),this.raw(e)}int64(t){let e=ie.enc(t);return Tm(e.lo,e.hi,this.buf),this}sint64(t){let e=ie.enc(t),i=e.hi>>31,a=e.lo<<1^i,l=(e.hi<<1|e.lo>>>31)^i;return Tm(a,l,this.buf),this}uint64(t){let e=ie.uEnc(t);return Tm(e.lo,e.hi,this.buf),this}}class EN{constructor(t,e){this.varint64=wN,this.uint32=xN,this.buf=t,this.len=t.length,this.pos=0,this.view=new DataView(t.buffer,t.byteOffset,t.byteLength),this.textDecoder=e??new TextDecoder}tag(){let t=this.uint32(),e=t>>>3,i=t&7;if(e<=0||i<0||i>5)throw new Error("illegal tag: field no "+e+" wire type "+i);return[e,i]}skip(t,e){let i=this.pos;switch(t){case ye.Varint:for(;this.buf[this.pos++]&128;);break;case ye.Bit64:this.pos+=4;case ye.Bit32:this.pos+=4;break;case ye.LengthDelimited:let a=this.uint32();this.pos+=a;break;case ye.StartGroup:for(;;){const[l,c]=this.tag();if(c===ye.EndGroup){if(e!==void 0&&l!==e)throw new Error("invalid end group tag");break}this.skip(c,l)}break;default:throw new Error("cant skip wire type "+t)}return this.assertBounds(),this.buf.subarray(i,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let t=this.uint32();return t>>>1^-(t&1)}int64(){return ie.dec(...this.varint64())}uint64(){return ie.uDec(...this.varint64())}sint64(){let[t,e]=this.varint64(),i=-(t&1);return t=(t>>>1|(e&1)<<31)^i,e=e>>>1^i,ie.dec(t,e)}bool(){let[t,e]=this.varint64();return t!==0||e!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return ie.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return ie.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let t=this.uint32(),e=this.pos;return this.pos+=t,this.assertBounds(),this.buf.subarray(e,e+t)}string(){return this.textDecoder.decode(this.bytes())}}function NN(n,t,e,i){let a;return{typeName:t,extendee:e,get field(){if(!a){const l=typeof i=="function"?i():i;l.name=t.split(".").pop(),l.jsonName=`[${t}]`,a=n.util.newFieldList([l]).list()[0]}return a},runtime:n}}function l1(n){const t=n.field.localName,e=Object.create(null);return e[t]=CN(n),[e,()=>e[t]]}function CN(n){const t=n.field;if(t.repeated)return[];if(t.default!==void 0)return t.default;switch(t.kind){case"enum":return t.T.values[0].no;case"scalar":return $o(t.T,t.L);case"message":const e=t.T,i=new e;return e.fieldWrapper?e.fieldWrapper.unwrapField(i):i;case"map":throw"map fields are not allowed to be extensions"}}function DN(n,t){if(!t.repeated&&(t.kind=="enum"||t.kind=="scalar")){for(let e=n.length-1;e>=0;--e)if(n[e].no==t.no)return[n[e]];return[]}return n.filter(e=>e.no===t.no)}let Wi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),Ld=[];for(let n=0;n<Wi.length;n++)Ld[Wi[n].charCodeAt(0)]=n;Ld[45]=Wi.indexOf("+");Ld[95]=Wi.indexOf("/");const Bp={dec(n){let t=n.length*3/4;n[n.length-2]=="="?t-=2:n[n.length-1]=="="&&(t-=1);let e=new Uint8Array(t),i=0,a=0,l,c=0;for(let d=0;d<n.length;d++){if(l=Ld[n.charCodeAt(d)],l===void 0)switch(n[d]){case"=":a=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(a){case 0:c=l,a=1;break;case 1:e[i++]=c<<2|(l&48)>>4,c=l,a=2;break;case 2:e[i++]=(c&15)<<4|(l&60)>>2,c=l,a=3;break;case 3:e[i++]=(c&3)<<6|l,a=0;break}}if(a==1)throw Error("invalid base64 string.");return e.subarray(0,i)},enc(n){let t="",e=0,i,a=0;for(let l=0;l<n.length;l++)switch(i=n[l],e){case 0:t+=Wi[i>>2],a=(i&3)<<4,e=1;break;case 1:t+=Wi[a|i>>4],a=(i&15)<<2,e=2;break;case 2:t+=Wi[a|i>>6],t+=Wi[i&63],e=0;break}return e&&(t+=Wi[a],t+="=",e==1&&(t+="=")),t}};function kN(n,t,e){c1(t,n);const i=t.runtime.bin.makeReadOptions(e),a=DN(n.getType().runtime.bin.listUnknownFields(n),t.field),[l,c]=l1(t);for(const d of a)t.runtime.bin.readField(l,i.readerFactory(d.data),t.field,d.wireType,i);return c()}function ON(n,t,e,i){c1(t,n);const a=t.runtime.bin.makeReadOptions(i),l=t.runtime.bin.makeWriteOptions(i);if(u1(n,t)){const g=n.getType().runtime.bin.listUnknownFields(n).filter(p=>p.no!=t.field.no);n.getType().runtime.bin.discardUnknownFields(n);for(const p of g)n.getType().runtime.bin.onUnknownField(n,p.no,p.wireType,p.data)}const c=l.writerFactory();let d=t.field;!d.opt&&!d.repeated&&(d.kind=="enum"||d.kind=="scalar")&&(d=Object.assign(Object.assign({},t.field),{opt:!0})),t.runtime.bin.writeField(d,e,c,l);const h=a.readerFactory(c.finish());for(;h.pos<h.len;){const[g,p]=h.tag(),w=h.skip(p,g);n.getType().runtime.bin.onUnknownField(n,g,p,w)}}function u1(n,t){const e=n.getType();return t.extendee.typeName===e.typeName&&!!e.runtime.bin.listUnknownFields(n).find(i=>i.no==t.field.no)}function c1(n,t){de(n.extendee.typeName==t.getType().typeName,`extension ${n.typeName} can only be applied to message ${n.extendee.typeName}`)}function f1(n,t){const e=n.localName;if(n.repeated)return t[e].length>0;if(n.oneof)return t[n.oneof.localName].case===e;switch(n.kind){case"enum":case"scalar":return n.opt||n.req?t[e]!==void 0:n.kind=="enum"?t[e]!==n.T.values[0].no:!o1(n.T,t[e]);case"message":return t[e]!==void 0;case"map":return Object.keys(t[e]).length>0}}function sS(n,t){const e=n.localName,i=!n.opt&&!n.req;if(n.repeated)t[e]=[];else if(n.oneof)t[n.oneof.localName]={case:void 0};else switch(n.kind){case"map":t[e]={};break;case"enum":t[e]=i?n.T.values[0].no:void 0;break;case"scalar":t[e]=i?$o(n.T,n.L):void 0;break;case"message":t[e]=void 0;break}}function ka(n,t){if(n===null||typeof n!="object"||!Object.getOwnPropertyNames(mt.prototype).every(i=>i in n&&typeof n[i]=="function"))return!1;const e=n.getType();return e===null||typeof e!="function"||!("typeName"in e)||typeof e.typeName!="string"?!1:t===void 0?!0:e.typeName==t.typeName}function d1(n,t){return ka(t)||!n.fieldWrapper?t:n.fieldWrapper.wrapField(t)}it.DOUBLE,it.FLOAT,it.INT64,it.UINT64,it.INT32,it.UINT32,it.BOOL,it.STRING,it.BYTES;const aS={ignoreUnknownFields:!1},oS={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0};function IN(n){return n?Object.assign(Object.assign({},aS),n):aS}function RN(n){return n?Object.assign(Object.assign({},oS),n):oS}const Zf=Symbol(),$f=Symbol();function MN(){return{makeReadOptions:IN,makeWriteOptions:RN,readMessage(n,t,e,i){if(t==null||Array.isArray(t)||typeof t!="object")throw new Error(`cannot decode message ${n.typeName} from JSON: ${fr(t)}`);i=i??new n;const a=new Map,l=e.typeRegistry;for(const[c,d]of Object.entries(t)){const h=n.fields.findJsonName(c);if(h){if(h.oneof){if(d===null&&h.kind=="scalar")continue;const g=a.get(h.oneof);if(g!==void 0)throw new Error(`cannot decode message ${n.typeName} from JSON: multiple keys for oneof "${h.oneof.name}" present: "${g}", "${c}"`);a.set(h.oneof,c)}lS(i,d,h,e,n)}else{let g=!1;if(l!=null&&l.findExtension&&c.startsWith("[")&&c.endsWith("]")){const p=l.findExtension(c.substring(1,c.length-1));if(p&&p.extendee.typeName==n.typeName){g=!0;const[w,v]=l1(p);lS(w,d,p.field,e,p),ON(i,p,v(),e)}}if(!g&&!e.ignoreUnknownFields)throw new Error(`cannot decode message ${n.typeName} from JSON: key "${c}" is unknown`)}}return i},writeMessage(n,t){const e=n.getType(),i={};let a;try{for(a of e.fields.byNumber()){if(!f1(a,n)){if(a.req)throw"required field not set";if(!t.emitDefaultValues||!zN(a))continue}const c=a.oneof?n[a.oneof.localName].value:n[a.localName],d=uS(a,c,t);d!==void 0&&(i[t.useProtoFieldName?a.name:a.jsonName]=d)}const l=t.typeRegistry;if(l!=null&&l.findExtensionFor)for(const c of e.runtime.bin.listUnknownFields(n)){const d=l.findExtensionFor(e.typeName,c.no);if(d&&u1(n,d)){const h=kN(n,d,t),g=uS(d.field,h,t);g!==void 0&&(i[d.field.jsonName]=g)}}}catch(l){const c=a?`cannot encode field ${e.typeName}.${a.name} to JSON`:`cannot encode message ${e.typeName} to JSON`,d=l instanceof Error?l.message:String(l);throw new Error(c+(d.length>0?`: ${d}`:""))}return i},readScalar(n,t,e){return wu(n,t,e??ea.BIGINT,!0)},writeScalar(n,t,e){if(t!==void 0&&(e||o1(n,t)))return Hf(n,t)},debug:fr}}function fr(n){if(n===null)return"null";switch(typeof n){case"object":return Array.isArray(n)?"array":"object";case"string":return n.length>100?"string":`"${n.split('"').join('\\"')}"`;default:return String(n)}}function lS(n,t,e,i,a){let l=e.localName;if(e.repeated){if(de(e.kind!="map"),t===null)return;if(!Array.isArray(t))throw new Error(`cannot decode field ${a.typeName}.${e.name} from JSON: ${fr(t)}`);const c=n[l];for(const d of t){if(d===null)throw new Error(`cannot decode field ${a.typeName}.${e.name} from JSON: ${fr(d)}`);switch(e.kind){case"message":c.push(e.T.fromJson(d,i));break;case"enum":const h=Am(e.T,d,i.ignoreUnknownFields,!0);h!==$f&&c.push(h);break;case"scalar":try{c.push(wu(e.T,d,e.L,!0))}catch(g){let p=`cannot decode field ${a.typeName}.${e.name} from JSON: ${fr(d)}`;throw g instanceof Error&&g.message.length>0&&(p+=`: ${g.message}`),new Error(p)}break}}}else if(e.kind=="map"){if(t===null)return;if(typeof t!="object"||Array.isArray(t))throw new Error(`cannot decode field ${a.typeName}.${e.name} from JSON: ${fr(t)}`);const c=n[l];for(const[d,h]of Object.entries(t)){if(h===null)throw new Error(`cannot decode field ${a.typeName}.${e.name} from JSON: map value null`);let g;try{g=BN(e.K,d)}catch(p){let w=`cannot decode map key for field ${a.typeName}.${e.name} from JSON: ${fr(t)}`;throw p instanceof Error&&p.message.length>0&&(w+=`: ${p.message}`),new Error(w)}switch(e.V.kind){case"message":c[g]=e.V.T.fromJson(h,i);break;case"enum":const p=Am(e.V.T,h,i.ignoreUnknownFields,!0);p!==$f&&(c[g]=p);break;case"scalar":try{c[g]=wu(e.V.T,h,ea.BIGINT,!0)}catch(w){let v=`cannot decode map value for field ${a.typeName}.${e.name} from JSON: ${fr(t)}`;throw w instanceof Error&&w.message.length>0&&(v+=`: ${w.message}`),new Error(v)}break}}}else switch(e.oneof&&(n=n[e.oneof.localName]={case:l},l="value"),e.kind){case"message":const c=e.T;if(t===null&&c.typeName!="google.protobuf.Value")return;let d=n[l];ka(d)?d.fromJson(t,i):(n[l]=d=c.fromJson(t,i),c.fieldWrapper&&!e.oneof&&(n[l]=c.fieldWrapper.unwrapField(d)));break;case"enum":const h=Am(e.T,t,i.ignoreUnknownFields,!1);switch(h){case Zf:sS(e,n);break;case $f:break;default:n[l]=h;break}break;case"scalar":try{const g=wu(e.T,t,e.L,!1);switch(g){case Zf:sS(e,n);break;default:n[l]=g;break}}catch(g){let p=`cannot decode field ${a.typeName}.${e.name} from JSON: ${fr(t)}`;throw g instanceof Error&&g.message.length>0&&(p+=`: ${g.message}`),new Error(p)}break}}function BN(n,t){if(n===it.BOOL)switch(t){case"true":t=!0;break;case"false":t=!1;break}return wu(n,t,ea.BIGINT,!0).toString()}function wu(n,t,e,i){if(t===null)return i?$o(n,e):Zf;switch(n){case it.DOUBLE:case it.FLOAT:if(t==="NaN")return Number.NaN;if(t==="Infinity")return Number.POSITIVE_INFINITY;if(t==="-Infinity")return Number.NEGATIVE_INFINITY;if(t===""||typeof t=="string"&&t.trim().length!==t.length||typeof t!="string"&&typeof t!="number")break;const a=Number(t);if(Number.isNaN(a)||!Number.isFinite(a))break;return n==it.FLOAT&&t1(a),a;case it.INT32:case it.FIXED32:case it.SFIXED32:case it.SINT32:case it.UINT32:let l;if(typeof t=="number"?l=t:typeof t=="string"&&t.length>0&&t.trim().length===t.length&&(l=Number(t)),l===void 0)break;return n==it.UINT32||n==it.FIXED32?Hm(l):Pf(l),l;case it.INT64:case it.SFIXED64:case it.SINT64:if(typeof t!="number"&&typeof t!="string")break;const c=ie.parse(t);return e?c.toString():c;case it.FIXED64:case it.UINT64:if(typeof t!="number"&&typeof t!="string")break;const d=ie.uParse(t);return e?d.toString():d;case it.BOOL:if(typeof t!="boolean")break;return t;case it.STRING:if(typeof t!="string")break;try{encodeURIComponent(t)}catch{throw new Error("invalid UTF8")}return t;case it.BYTES:if(t==="")return new Uint8Array(0);if(typeof t!="string")break;return Bp.dec(t)}throw new Error}function Am(n,t,e,i){if(t===null)return n.typeName=="google.protobuf.NullValue"?0:i?n.values[0].no:Zf;switch(typeof t){case"number":if(Number.isInteger(t))return t;break;case"string":const a=n.findName(t);if(a!==void 0)return a.no;if(e)return $f;break}throw new Error(`cannot decode enum ${n.typeName} from JSON: ${fr(t)}`)}function zN(n){return n.repeated||n.kind=="map"?!0:!(n.oneof||n.kind=="message"||n.opt||n.req)}function uS(n,t,e){if(n.kind=="map"){de(typeof t=="object"&&t!=null);const i={},a=Object.entries(t);switch(n.V.kind){case"scalar":for(const[c,d]of a)i[c.toString()]=Hf(n.V.T,d);break;case"message":for(const[c,d]of a)i[c.toString()]=d.toJson(e);break;case"enum":const l=n.V.T;for(const[c,d]of a)i[c.toString()]=Em(l,d,e.enumAsInteger);break}return e.emitDefaultValues||a.length>0?i:void 0}if(n.repeated){de(Array.isArray(t));const i=[];switch(n.kind){case"scalar":for(let a=0;a<t.length;a++)i.push(Hf(n.T,t[a]));break;case"enum":for(let a=0;a<t.length;a++)i.push(Em(n.T,t[a],e.enumAsInteger));break;case"message":for(let a=0;a<t.length;a++)i.push(t[a].toJson(e));break}return e.emitDefaultValues||i.length>0?i:void 0}switch(n.kind){case"scalar":return Hf(n.T,t);case"enum":return Em(n.T,t,e.enumAsInteger);case"message":return d1(n.T,t).toJson(e)}}function Em(n,t,e){var i;if(de(typeof t=="number"),n.typeName=="google.protobuf.NullValue")return null;if(e)return t;const a=n.findNumber(t);return(i=a==null?void 0:a.name)!==null&&i!==void 0?i:t}function Hf(n,t){switch(n){case it.INT32:case it.SFIXED32:case it.SINT32:case it.FIXED32:case it.UINT32:return de(typeof t=="number"),t;case it.FLOAT:case it.DOUBLE:return de(typeof t=="number"),Number.isNaN(t)?"NaN":t===Number.POSITIVE_INFINITY?"Infinity":t===Number.NEGATIVE_INFINITY?"-Infinity":t;case it.STRING:return de(typeof t=="string"),t;case it.BOOL:return de(typeof t=="boolean"),t;case it.UINT64:case it.FIXED64:case it.INT64:case it.SFIXED64:case it.SINT64:return de(typeof t=="bigint"||typeof t=="string"||typeof t=="number"),t.toString();case it.BYTES:return de(t instanceof Uint8Array),Bp.enc(t)}}const ko=Symbol("@bufbuild/protobuf/unknown-fields"),cS={readUnknownFields:!0,readerFactory:n=>new EN(n)},fS={writeUnknownFields:!0,writerFactory:()=>new AN};function LN(n){return n?Object.assign(Object.assign({},cS),n):cS}function _N(n){return n?Object.assign(Object.assign({},fS),n):fS}function UN(){return{makeReadOptions:LN,makeWriteOptions:_N,listUnknownFields(n){var t;return(t=n[ko])!==null&&t!==void 0?t:[]},discardUnknownFields(n){delete n[ko]},writeUnknownFields(n,t){const i=n[ko];if(i)for(const a of i)t.tag(a.no,a.wireType).raw(a.data)},onUnknownField(n,t,e,i){const a=n;Array.isArray(a[ko])||(a[ko]=[]),a[ko].push({no:t,wireType:e,data:i})},readMessage(n,t,e,i,a){const l=n.getType(),c=a?t.len:t.pos+e;let d,h;for(;t.pos<c&&([d,h]=t.tag(),!(a===!0&&h==ye.EndGroup));){const g=l.fields.find(d);if(!g){const p=t.skip(h,d);i.readUnknownFields&&this.onUnknownField(n,d,h,p);continue}dS(n,t,g,h,i)}if(a&&(h!=ye.EndGroup||d!==e))throw new Error("invalid end group tag")},readField:dS,writeMessage(n,t,e){const i=n.getType();for(const a of i.fields.byNumber()){if(!f1(a,n)){if(a.req)throw new Error(`cannot encode field ${i.typeName}.${a.name} to binary: required field not set`);continue}const l=a.oneof?n[a.oneof.localName].value:n[a.localName];hS(a,l,t,e)}return e.writeUnknownFields&&this.writeUnknownFields(n,t),t},writeField(n,t,e,i){t!==void 0&&hS(n,t,e,i)}}}function dS(n,t,e,i,a){let{repeated:l,localName:c}=e;switch(e.oneof&&(n=n[e.oneof.localName],n.case!=c&&delete n.value,n.case=c,c="value"),e.kind){case"scalar":case"enum":const d=e.kind=="enum"?it.INT32:e.T;let h=Qf;if(e.kind=="scalar"&&e.L>0&&(h=PN),l){let v=n[c];if(i==ye.LengthDelimited&&d!=it.STRING&&d!=it.BYTES){let x=t.uint32()+t.pos;for(;t.pos<x;)v.push(h(t,d))}else v.push(h(t,d))}else n[c]=h(t,d);break;case"message":const g=e.T;l?n[c].push(Vf(t,new g,a,e)):ka(n[c])?Vf(t,n[c],a,e):(n[c]=Vf(t,new g,a,e),g.fieldWrapper&&!e.oneof&&!e.repeated&&(n[c]=g.fieldWrapper.unwrapField(n[c])));break;case"map":let[p,w]=qN(e,t,a);n[c][p]=w;break}}function Vf(n,t,e,i){const a=t.getType().runtime.bin,l=i==null?void 0:i.delimited;return a.readMessage(t,n,l?i.no:n.uint32(),e,l),t}function qN(n,t,e){const i=t.uint32(),a=t.pos+i;let l,c;for(;t.pos<a;){const[d]=t.tag();switch(d){case 1:l=Qf(t,n.K);break;case 2:switch(n.V.kind){case"scalar":c=Qf(t,n.V.T);break;case"enum":c=t.int32();break;case"message":c=Vf(t,new n.V.T,e,void 0);break}break}}if(l===void 0&&(l=$o(n.K,ea.BIGINT)),typeof l!="string"&&typeof l!="number"&&(l=l.toString()),c===void 0)switch(n.V.kind){case"scalar":c=$o(n.V.T,ea.BIGINT);break;case"enum":c=n.V.T.values[0].no;break;case"message":c=new n.V.T;break}return[l,c]}function PN(n,t){const e=Qf(n,t);return typeof e=="bigint"?e.toString():e}function Qf(n,t){switch(t){case it.STRING:return n.string();case it.BOOL:return n.bool();case it.DOUBLE:return n.double();case it.FLOAT:return n.float();case it.INT32:return n.int32();case it.INT64:return n.int64();case it.UINT64:return n.uint64();case it.FIXED64:return n.fixed64();case it.BYTES:return n.bytes();case it.FIXED32:return n.fixed32();case it.SFIXED32:return n.sfixed32();case it.SFIXED64:return n.sfixed64();case it.SINT64:return n.sint64();case it.UINT32:return n.uint32();case it.SINT32:return n.sint32()}}function hS(n,t,e,i){de(t!==void 0);const a=n.repeated;switch(n.kind){case"scalar":case"enum":let l=n.kind=="enum"?it.INT32:n.T;if(a)if(de(Array.isArray(t)),n.packed)$N(e,l,n.no,t);else for(const c of t)Su(e,l,n.no,c);else Su(e,l,n.no,t);break;case"message":if(a){de(Array.isArray(t));for(const c of t)gS(e,i,n,c)}else gS(e,i,n,t);break;case"map":de(typeof t=="object"&&t!=null);for(const[c,d]of Object.entries(t))JN(e,i,n,c,d);break}}function JN(n,t,e,i,a){n.tag(e.no,ye.LengthDelimited),n.fork();let l=i;switch(e.K){case it.INT32:case it.FIXED32:case it.UINT32:case it.SFIXED32:case it.SINT32:l=Number.parseInt(i);break;case it.BOOL:de(i=="true"||i=="false"),l=i=="true";break}switch(Su(n,e.K,1,l),e.V.kind){case"scalar":Su(n,e.V.T,2,a);break;case"enum":Su(n,it.INT32,2,a);break;case"message":de(a!==void 0),n.tag(2,ye.LengthDelimited).bytes(a.toBinary(t));break}n.join()}function gS(n,t,e,i){const a=d1(e.T,i);e.delimited?n.tag(e.no,ye.StartGroup).raw(a.toBinary(t)).tag(e.no,ye.EndGroup):n.tag(e.no,ye.LengthDelimited).bytes(a.toBinary(t))}function Su(n,t,e,i){de(i!==void 0);let[a,l]=h1(t);n.tag(e,a)[l](i)}function $N(n,t,e,i){if(!i.length)return;n.tag(e,ye.LengthDelimited).fork();let[,a]=h1(t);for(let l=0;l<i.length;l++)n[a](i[l]);n.join()}function h1(n){let t=ye.Varint;switch(n){case it.BYTES:case it.STRING:t=ye.LengthDelimited;break;case it.DOUBLE:case it.FIXED64:case it.SFIXED64:t=ye.Bit64;break;case it.FIXED32:case it.SFIXED32:case it.FLOAT:t=ye.Bit32;break}const e=it[n].toLowerCase();return[t,e]}function HN(){return{setEnumType:n1,initPartial(n,t){if(n===void 0)return;const e=t.getType();for(const i of e.fields.byMember()){const a=i.localName,l=t,c=n;if(c[a]!=null)switch(i.kind){case"oneof":const d=c[a].case;if(d===void 0)continue;const h=i.findField(d);let g=c[a].value;h&&h.kind=="message"&&!ka(g,h.T)?g=new h.T(g):h&&h.kind==="scalar"&&h.T===it.BYTES&&(g=fu(g)),l[a]={case:d,value:g};break;case"scalar":case"enum":let p=c[a];i.T===it.BYTES&&(p=i.repeated?p.map(fu):fu(p)),l[a]=p;break;case"map":switch(i.V.kind){case"scalar":case"enum":if(i.V.T===it.BYTES)for(const[S,x]of Object.entries(c[a]))l[a][S]=fu(x);else Object.assign(l[a],c[a]);break;case"message":const v=i.V.T;for(const S of Object.keys(c[a])){let x=c[a][S];v.fieldWrapper||(x=new v(x)),l[a][S]=x}break}break;case"message":const w=i.T;if(i.repeated)l[a]=c[a].map(v=>ka(v,w)?v:new w(v));else{const v=c[a];w.fieldWrapper?w.typeName==="google.protobuf.BytesValue"?l[a]=fu(v):l[a]=v:l[a]=ka(v,w)?v:new w(v)}break}}},equals(n,t,e){return t===e?!0:!t||!e?!1:n.fields.byMember().every(i=>{const a=t[i.localName],l=e[i.localName];if(i.repeated){if(a.length!==l.length)return!1;switch(i.kind){case"message":return a.every((c,d)=>i.T.equals(c,l[d]));case"scalar":return a.every((c,d)=>Hs(i.T,c,l[d]));case"enum":return a.every((c,d)=>Hs(it.INT32,c,l[d]))}throw new Error(`repeated cannot contain ${i.kind}`)}switch(i.kind){case"message":return i.T.equals(a,l);case"enum":return Hs(it.INT32,a,l);case"scalar":return Hs(i.T,a,l);case"oneof":if(a.case!==l.case)return!1;const c=i.findField(a.case);if(c===void 0)return!0;switch(c.kind){case"message":return c.T.equals(a.value,l.value);case"enum":return Hs(it.INT32,a.value,l.value);case"scalar":return Hs(c.T,a.value,l.value)}throw new Error(`oneof cannot contain ${c.kind}`);case"map":const d=Object.keys(a).concat(Object.keys(l));switch(i.V.kind){case"message":const h=i.V.T;return d.every(p=>h.equals(a[p],l[p]));case"enum":return d.every(p=>Hs(it.INT32,a[p],l[p]));case"scalar":const g=i.V.T;return d.every(p=>Hs(g,a[p],l[p]))}break}})},clone(n){const t=n.getType(),e=new t,i=e;for(const a of t.fields.byMember()){const l=n[a.localName];let c;if(a.repeated)c=l.map(Af);else if(a.kind=="map"){c=i[a.localName];for(const[d,h]of Object.entries(l))c[d]=Af(h)}else a.kind=="oneof"?c=a.findField(l.case)?{case:l.case,value:Af(l.value)}:{case:void 0}:c=Af(l);i[a.localName]=c}for(const a of t.runtime.bin.listUnknownFields(n))t.runtime.bin.onUnknownField(i,a.no,a.wireType,a.data);return e}}}function Af(n){if(n===void 0)return n;if(ka(n))return n.clone();if(n instanceof Uint8Array){const t=new Uint8Array(n.byteLength);return t.set(n),t}return n}function fu(n){return n instanceof Uint8Array?n:new Uint8Array(n)}function VN(n,t,e){return{syntax:n,json:MN(),bin:UN(),util:Object.assign(Object.assign({},HN()),{newFieldList:t,initFields:e}),makeMessageType(i,a,l){return vN(this,i,a,l)},makeEnum:yN,makeEnumType:r1,getEnumType:pN,makeExtension(i,a,l){return NN(this,i,a,l)}}}class jN{constructor(t,e){this._fields=t,this._normalizer=e}findJsonName(t){if(!this.jsonNames){const e={};for(const i of this.list())e[i.jsonName]=e[i.name]=i;this.jsonNames=e}return this.jsonNames[t]}find(t){if(!this.numbers){const e={};for(const i of this.list())e[i.no]=i;this.numbers=e}return this.numbers[t]}list(){return this.all||(this.all=this._normalizer(this._fields)),this.all}byNumber(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort((t,e)=>t.no-e.no)),this.numbersAsc}byMember(){if(!this.members){this.members=[];const t=this.members;let e;for(const i of this.list())i.oneof?i.oneof!==e&&(e=i.oneof,t.push(e)):t.push(i)}return this.members}}function g1(n,t){const e=m1(n);return t?e:ZN(FN(e))}function YN(n){return g1(n,!1)}const GN=m1;function m1(n){let t=!1;const e=[];for(let i=0;i<n.length;i++){let a=n.charAt(i);switch(a){case"_":t=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":e.push(a),t=!1;break;default:t&&(t=!1,a=a.toUpperCase()),e.push(a);break}}return e.join("")}const XN=new Set(["constructor","toString","toJSON","valueOf"]),KN=new Set(["getType","clone","equals","fromBinary","fromJson","fromJsonString","toBinary","toJson","toJsonString","toObject"]),p1=n=>`${n}$`,FN=n=>KN.has(n)?p1(n):n,ZN=n=>XN.has(n)?p1(n):n;class QN{constructor(t){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.req=!1,this.default=void 0,this.fields=[],this.name=t,this.localName=YN(t)}addField(t){de(t.oneof===this,`field ${t.name} not one of ${this.name}`),this.fields.push(t)}findField(t){if(!this._lookup){this._lookup=Object.create(null);for(let e=0;e<this.fields.length;e++)this._lookup[this.fields[e].localName]=this.fields[e]}return this._lookup[t]}}function WN(n,t){var e,i,a,l,c,d;const h=[];let g;for(const p of typeof n=="function"?n():n){const w=p;if(w.localName=g1(p.name,p.oneof!==void 0),w.jsonName=(e=p.jsonName)!==null&&e!==void 0?e:GN(p.name),w.repeated=(i=p.repeated)!==null&&i!==void 0?i:!1,p.kind=="scalar"&&(w.L=(a=p.L)!==null&&a!==void 0?a:ea.BIGINT),w.delimited=(l=p.delimited)!==null&&l!==void 0?l:!1,w.req=(c=p.req)!==null&&c!==void 0?c:!1,w.opt=(d=p.opt)!==null&&d!==void 0?d:!1,p.packed===void 0&&(w.packed=p.kind=="enum"||p.kind=="scalar"&&p.T!=it.BYTES&&p.T!=it.STRING),p.oneof!==void 0){const v=typeof p.oneof=="string"?p.oneof:p.oneof.name;(!g||g.name!=v)&&(g=new QN(v)),w.oneof=g,g.addField(w)}h.push(w)}return h}const T=VN("proto3",n=>new jN(n,t=>WN(t)),n=>{for(const t of n.getType().fields.byMember()){if(t.opt)continue;const e=t.localName,i=n;if(t.repeated){i[e]=[];continue}switch(t.kind){case"oneof":i[e]={case:void 0};break;case"enum":i[e]=0;break;case"map":i[e]={};break;case"scalar":i[e]=$o(t.T,t.L);break}}});var Ye;(function(n){n[n.Unary=0]="Unary",n[n.ServerStreaming=1]="ServerStreaming",n[n.ClientStreaming=2]="ClientStreaming",n[n.BiDiStreaming=3]="BiDiStreaming"})(Ye||(Ye={}));var mS;(function(n){n[n.NoSideEffects=1]="NoSideEffects",n[n.Idempotent=2]="Idempotent"})(mS||(mS={}));class Le extends mt{constructor(t){super(),this.seconds=ie.zero,this.nanos=0,T.util.initPartial(t,this)}fromJson(t,e){if(typeof t!="string")throw new Error(`cannot decode google.protobuf.Timestamp from JSON: ${T.json.debug(t)}`);const i=t.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!i)throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");const a=Date.parse(i[1]+"-"+i[2]+"-"+i[3]+"T"+i[4]+":"+i[5]+":"+i[6]+(i[8]?i[8]:"Z"));if(Number.isNaN(a))throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");if(a<Date.parse("0001-01-01T00:00:00Z")||a>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot decode message google.protobuf.Timestamp from JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");return this.seconds=ie.parse(a/1e3),this.nanos=0,i[7]&&(this.nanos=parseInt("1"+i[7]+"0".repeat(9-i[7].length))-1e9),this}toJson(t){const e=Number(this.seconds)*1e3;if(e<Date.parse("0001-01-01T00:00:00Z")||e>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot encode google.protobuf.Timestamp to JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");if(this.nanos<0)throw new Error("cannot encode google.protobuf.Timestamp to JSON: nanos must not be negative");let i="Z";if(this.nanos>0){const a=(this.nanos+1e9).toString().substring(1);a.substring(3)==="000000"?i="."+a.substring(0,3)+"Z":a.substring(6)==="000"?i="."+a.substring(0,6)+"Z":i="."+a+"Z"}return new Date(e).toISOString().replace(".000Z",i)}toDate(){return new Date(Number(this.seconds)*1e3+Math.ceil(this.nanos/1e6))}static now(){return Le.fromDate(new Date)}static fromDate(t){const e=t.getTime();return new Le({seconds:ie.parse(Math.floor(e/1e3)),nanos:e%1e3*1e6})}static fromBinary(t,e){return new Le().fromBinary(t,e)}static fromJson(t,e){return new Le().fromJson(t,e)}static fromJsonString(t,e){return new Le().fromJsonString(t,e)}static equals(t,e){return T.util.equals(Le,t,e)}}Le.runtime=T;Le.typeName="google.protobuf.Timestamp";Le.fields=T.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);class ts extends mt{constructor(t){super(),this.seconds=ie.zero,this.nanos=0,T.util.initPartial(t,this)}fromJson(t,e){if(typeof t!="string")throw new Error(`cannot decode google.protobuf.Duration from JSON: ${T.json.debug(t)}`);const i=t.match(/^(-?[0-9]+)(?:\.([0-9]+))?s/);if(i===null)throw new Error(`cannot decode google.protobuf.Duration from JSON: ${T.json.debug(t)}`);const a=Number(i[1]);if(a>315576e6||a<-315576e6)throw new Error(`cannot decode google.protobuf.Duration from JSON: ${T.json.debug(t)}`);if(this.seconds=ie.parse(a),typeof i[2]=="string"){const l=i[2]+"0".repeat(9-i[2].length);this.nanos=parseInt(l),(a<0||Object.is(a,-0))&&(this.nanos=-this.nanos)}return this}toJson(t){if(Number(this.seconds)>315576e6||Number(this.seconds)<-315576e6)throw new Error("cannot encode google.protobuf.Duration to JSON: value out of range");let e=this.seconds.toString();if(this.nanos!==0){let i=Math.abs(this.nanos).toString();i="0".repeat(9-i.length)+i,i.substring(3)==="000000"?i=i.substring(0,3):i.substring(6)==="000"&&(i=i.substring(0,6)),e+="."+i,this.nanos<0&&Number(this.seconds)==0&&(e="-"+e)}return e+"s"}static fromBinary(t,e){return new ts().fromBinary(t,e)}static fromJson(t,e){return new ts().fromJson(t,e)}static fromJsonString(t,e){return new ts().fromJsonString(t,e)}static equals(t,e){return T.util.equals(ts,t,e)}}ts.runtime=T;ts.typeName="google.protobuf.Duration";ts.fields=T.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);class dr extends mt{constructor(t){super(),this.typeUrl="",this.value=new Uint8Array(0),T.util.initPartial(t,this)}toJson(t){var e;if(this.typeUrl==="")return{};const i=this.typeUrlToName(this.typeUrl),a=(e=t==null?void 0:t.typeRegistry)===null||e===void 0?void 0:e.findMessage(i);if(!a)throw new Error(`cannot encode message google.protobuf.Any to JSON: "${this.typeUrl}" is not in the type registry`);let c=a.fromBinary(this.value).toJson(t);return(i.startsWith("google.protobuf.")||c===null||Array.isArray(c)||typeof c!="object")&&(c={value:c}),c["@type"]=this.typeUrl,c}fromJson(t,e){var i;if(t===null||Array.isArray(t)||typeof t!="object")throw new Error(`cannot decode message google.protobuf.Any from JSON: expected object but got ${t===null?"null":Array.isArray(t)?"array":typeof t}`);if(Object.keys(t).length==0)return this;const a=t["@type"];if(typeof a!="string"||a=="")throw new Error('cannot decode message google.protobuf.Any from JSON: "@type" is empty');const l=this.typeUrlToName(a),c=(i=e==null?void 0:e.typeRegistry)===null||i===void 0?void 0:i.findMessage(l);if(!c)throw new Error(`cannot decode message google.protobuf.Any from JSON: ${a} is not in the type registry`);let d;if(l.startsWith("google.protobuf.")&&Object.prototype.hasOwnProperty.call(t,"value"))d=c.fromJson(t.value,e);else{const h=Object.assign({},t);delete h["@type"],d=c.fromJson(h,e)}return this.packFrom(d),this}packFrom(t){this.value=t.toBinary(),this.typeUrl=this.typeNameToUrl(t.getType().typeName)}unpackTo(t){return this.is(t.getType())?(t.fromBinary(this.value),!0):!1}unpack(t){if(this.typeUrl==="")return;const e=t.findMessage(this.typeUrlToName(this.typeUrl));if(e)return e.fromBinary(this.value)}is(t){if(this.typeUrl==="")return!1;const e=this.typeUrlToName(this.typeUrl);let i="";return typeof t=="string"?i=t:i=t.typeName,e===i}typeNameToUrl(t){return`type.googleapis.com/${t}`}typeUrlToName(t){if(!t.length)throw new Error(`invalid type url: ${t}`);const e=t.lastIndexOf("/"),i=e>=0?t.substring(e+1):t;if(!i.length)throw new Error(`invalid type url: ${t}`);return i}static pack(t){const e=new dr;return e.packFrom(t),e}static fromBinary(t,e){return new dr().fromBinary(t,e)}static fromJson(t,e){return new dr().fromJson(t,e)}static fromJsonString(t,e){return new dr().fromJsonString(t,e)}static equals(t,e){return T.util.equals(dr,t,e)}}dr.runtime=T;dr.typeName="google.protobuf.Any";dr.fields=T.util.newFieldList(()=>[{no:1,name:"type_url",kind:"scalar",T:9},{no:2,name:"value",kind:"scalar",T:12}]);class hr extends mt{constructor(t){super(),this.value=0,T.util.initPartial(t,this)}toJson(t){return T.json.writeScalar(it.DOUBLE,this.value,!0)}fromJson(t,e){try{this.value=T.json.readScalar(it.DOUBLE,t)}catch(i){let a='cannot decode message google.protobuf.DoubleValue from JSON"';throw i instanceof Error&&i.message.length>0&&(a+=`: ${i.message}`),new Error(a)}return this}static fromBinary(t,e){return new hr().fromBinary(t,e)}static fromJson(t,e){return new hr().fromJson(t,e)}static fromJsonString(t,e){return new hr().fromJsonString(t,e)}static equals(t,e){return T.util.equals(hr,t,e)}}hr.runtime=T;hr.typeName="google.protobuf.DoubleValue";hr.fields=T.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:1}]);hr.fieldWrapper={wrapField(n){return new hr({value:n})},unwrapField(n){return n.value}};class gr extends mt{constructor(t){super(),this.value=0,T.util.initPartial(t,this)}toJson(t){return T.json.writeScalar(it.FLOAT,this.value,!0)}fromJson(t,e){try{this.value=T.json.readScalar(it.FLOAT,t)}catch(i){let a='cannot decode message google.protobuf.FloatValue from JSON"';throw i instanceof Error&&i.message.length>0&&(a+=`: ${i.message}`),new Error(a)}return this}static fromBinary(t,e){return new gr().fromBinary(t,e)}static fromJson(t,e){return new gr().fromJson(t,e)}static fromJsonString(t,e){return new gr().fromJsonString(t,e)}static equals(t,e){return T.util.equals(gr,t,e)}}gr.runtime=T;gr.typeName="google.protobuf.FloatValue";gr.fields=T.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:2}]);gr.fieldWrapper={wrapField(n){return new gr({value:n})},unwrapField(n){return n.value}};class mr extends mt{constructor(t){super(),this.value=ie.zero,T.util.initPartial(t,this)}toJson(t){return T.json.writeScalar(it.INT64,this.value,!0)}fromJson(t,e){try{this.value=T.json.readScalar(it.INT64,t)}catch(i){let a='cannot decode message google.protobuf.Int64Value from JSON"';throw i instanceof Error&&i.message.length>0&&(a+=`: ${i.message}`),new Error(a)}return this}static fromBinary(t,e){return new mr().fromBinary(t,e)}static fromJson(t,e){return new mr().fromJson(t,e)}static fromJsonString(t,e){return new mr().fromJsonString(t,e)}static equals(t,e){return T.util.equals(mr,t,e)}}mr.runtime=T;mr.typeName="google.protobuf.Int64Value";mr.fields=T.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:3}]);mr.fieldWrapper={wrapField(n){return new mr({value:n})},unwrapField(n){return n.value}};class pr extends mt{constructor(t){super(),this.value=ie.zero,T.util.initPartial(t,this)}toJson(t){return T.json.writeScalar(it.UINT64,this.value,!0)}fromJson(t,e){try{this.value=T.json.readScalar(it.UINT64,t)}catch(i){let a='cannot decode message google.protobuf.UInt64Value from JSON"';throw i instanceof Error&&i.message.length>0&&(a+=`: ${i.message}`),new Error(a)}return this}static fromBinary(t,e){return new pr().fromBinary(t,e)}static fromJson(t,e){return new pr().fromJson(t,e)}static fromJsonString(t,e){return new pr().fromJsonString(t,e)}static equals(t,e){return T.util.equals(pr,t,e)}}pr.runtime=T;pr.typeName="google.protobuf.UInt64Value";pr.fields=T.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:4}]);pr.fieldWrapper={wrapField(n){return new pr({value:n})},unwrapField(n){return n.value}};class mn extends mt{constructor(t){super(),this.value=0,T.util.initPartial(t,this)}toJson(t){return T.json.writeScalar(it.INT32,this.value,!0)}fromJson(t,e){try{this.value=T.json.readScalar(it.INT32,t)}catch(i){let a='cannot decode message google.protobuf.Int32Value from JSON"';throw i instanceof Error&&i.message.length>0&&(a+=`: ${i.message}`),new Error(a)}return this}static fromBinary(t,e){return new mn().fromBinary(t,e)}static fromJson(t,e){return new mn().fromJson(t,e)}static fromJsonString(t,e){return new mn().fromJsonString(t,e)}static equals(t,e){return T.util.equals(mn,t,e)}}mn.runtime=T;mn.typeName="google.protobuf.Int32Value";mn.fields=T.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:5}]);mn.fieldWrapper={wrapField(n){return new mn({value:n})},unwrapField(n){return n.value}};class yr extends mt{constructor(t){super(),this.value=0,T.util.initPartial(t,this)}toJson(t){return T.json.writeScalar(it.UINT32,this.value,!0)}fromJson(t,e){try{this.value=T.json.readScalar(it.UINT32,t)}catch(i){let a='cannot decode message google.protobuf.UInt32Value from JSON"';throw i instanceof Error&&i.message.length>0&&(a+=`: ${i.message}`),new Error(a)}return this}static fromBinary(t,e){return new yr().fromBinary(t,e)}static fromJson(t,e){return new yr().fromJson(t,e)}static fromJsonString(t,e){return new yr().fromJsonString(t,e)}static equals(t,e){return T.util.equals(yr,t,e)}}yr.runtime=T;yr.typeName="google.protobuf.UInt32Value";yr.fields=T.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:13}]);yr.fieldWrapper={wrapField(n){return new yr({value:n})},unwrapField(n){return n.value}};class vr extends mt{constructor(t){super(),this.value=!1,T.util.initPartial(t,this)}toJson(t){return T.json.writeScalar(it.BOOL,this.value,!0)}fromJson(t,e){try{this.value=T.json.readScalar(it.BOOL,t)}catch(i){let a='cannot decode message google.protobuf.BoolValue from JSON"';throw i instanceof Error&&i.message.length>0&&(a+=`: ${i.message}`),new Error(a)}return this}static fromBinary(t,e){return new vr().fromBinary(t,e)}static fromJson(t,e){return new vr().fromJson(t,e)}static fromJsonString(t,e){return new vr().fromJsonString(t,e)}static equals(t,e){return T.util.equals(vr,t,e)}}vr.runtime=T;vr.typeName="google.protobuf.BoolValue";vr.fields=T.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:8}]);vr.fieldWrapper={wrapField(n){return new vr({value:n})},unwrapField(n){return n.value}};class tn extends mt{constructor(t){super(),this.value="",T.util.initPartial(t,this)}toJson(t){return T.json.writeScalar(it.STRING,this.value,!0)}fromJson(t,e){try{this.value=T.json.readScalar(it.STRING,t)}catch(i){let a='cannot decode message google.protobuf.StringValue from JSON"';throw i instanceof Error&&i.message.length>0&&(a+=`: ${i.message}`),new Error(a)}return this}static fromBinary(t,e){return new tn().fromBinary(t,e)}static fromJson(t,e){return new tn().fromJson(t,e)}static fromJsonString(t,e){return new tn().fromJsonString(t,e)}static equals(t,e){return T.util.equals(tn,t,e)}}tn.runtime=T;tn.typeName="google.protobuf.StringValue";tn.fields=T.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:9}]);tn.fieldWrapper={wrapField(n){return new tn({value:n})},unwrapField(n){return n.value}};class wr extends mt{constructor(t){super(),this.value=new Uint8Array(0),T.util.initPartial(t,this)}toJson(t){return T.json.writeScalar(it.BYTES,this.value,!0)}fromJson(t,e){try{this.value=T.json.readScalar(it.BYTES,t)}catch(i){let a='cannot decode message google.protobuf.BytesValue from JSON"';throw i instanceof Error&&i.message.length>0&&(a+=`: ${i.message}`),new Error(a)}return this}static fromBinary(t,e){return new wr().fromBinary(t,e)}static fromJson(t,e){return new wr().fromJson(t,e)}static fromJsonString(t,e){return new wr().fromJsonString(t,e)}static equals(t,e){return T.util.equals(wr,t,e)}}wr.runtime=T;wr.typeName="google.protobuf.BytesValue";wr.fields=T.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:12}]);wr.fieldWrapper={wrapField(n){return new wr({value:n})},unwrapField(n){return n.value}};function t2(n,t,e){try{const i=Bp.dec(n);return t?t.fromBinary(i,e):i}catch(i){throw Gt.from(i,_t.DataLoss)}}function e2(n,t){const e={};for(const[i,a]of Object.entries(n.methods)){const l=t(Object.assign(Object.assign({},a),{localName:i,service:n}));l!=null&&(e[i]=l)}return e}const pS=1;function yS(n){let t,e=new Uint8Array(0);function i(a){const l=new Uint8Array(e.length+a.length);l.set(e),l.set(a,e.length),e=l}return new ReadableStream({start(){t=n.getReader()},async pull(a){let l;for(;;){if(l===void 0&&e.byteLength>=5){let h=0;for(let g=1;g<5;g++)h=(h<<8)+e[g];l={flags:e[0],length:h}}if(l!==void 0&&e.byteLength>=l.length+5)break;const d=await t.read();if(d.done)break;i(d.value)}if(l===void 0){if(e.byteLength==0){a.close();return}a.error(new Gt("premature end of stream",_t.DataLoss));return}const c=e.subarray(5,5+l.length);e=e.subarray(5+l.length),a.enqueue({flags:l.flags,data:c})}})}function vS(n,t){const e=new Uint8Array(t.length+5);e.set(t,5);const i=new DataView(e.buffer,e.byteOffset,e.byteLength);return i.setUint8(0,n),i.setUint32(1,t.length),e}var n2=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=n[Symbol.asyncIterator],e;return t?t.call(n):(n=typeof __values=="function"?__values(n):n[Symbol.iterator](),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e);function i(l){e[l]=n[l]&&function(c){return new Promise(function(d,h){c=n[l](c),a(d,h,c.done,c.value)})}}function a(l,c,d,h){Promise.resolve(h).then(function(g){l({value:g,done:d})},c)}},Cu=function(n){return this instanceof Cu?(this.v=n,this):new Cu(n)},r2=function(n,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=e.apply(n,t||[]),a,l=[];return a={},d("next"),d("throw"),d("return",c),a[Symbol.asyncIterator]=function(){return this},a;function c(S){return function(x){return Promise.resolve(x).then(S,w)}}function d(S,x){i[S]&&(a[S]=function(E){return new Promise(function(I,k){l.push([S,E,I,k])>1||h(S,E)})},x&&(a[S]=x(a[S])))}function h(S,x){try{g(i[S](x))}catch(E){v(l[0][3],E)}}function g(S){S.value instanceof Cu?Promise.resolve(S.value.v).then(p,w):v(l[0][2],S)}function p(S){h("next",S)}function w(S){h("throw",S)}function v(S,x){S(x),l.shift(),l.length&&h(l[0][0],l[0][1])}},i2=function(n){var t,e;return t={},i("next"),i("throw",function(a){throw a}),i("return"),t[Symbol.iterator]=function(){return this},t;function i(a,l){t[a]=n[a]?function(c){return(e=!e)?{value:Cu(n[a](c)),done:!1}:l?l(c):c}:l}};function s2(n){return r2(this,arguments,function*(){yield Cu(yield*i2(n2(n)))})}var y1=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=n[Symbol.asyncIterator],e;return t?t.call(n):(n=typeof __values=="function"?__values(n):n[Symbol.iterator](),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e);function i(l){e[l]=n[l]&&function(c){return new Promise(function(d,h){c=n[l](c),a(d,h,c.done,c.value)})}}function a(l,c,d,h){Promise.resolve(h).then(function(g){l({value:g,done:d})},c)}},Ho=function(n){return this instanceof Ho?(this.v=n,this):new Ho(n)},a2=function(n){var t,e;return t={},i("next"),i("throw",function(a){throw a}),i("return"),t[Symbol.iterator]=function(){return this},t;function i(a,l){t[a]=n[a]?function(c){return(e=!e)?{value:Ho(n[a](c)),done:!1}:l?l(c):c}:l}},o2=function(n,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=e.apply(n,t||[]),a,l=[];return a={},d("next"),d("throw"),d("return",c),a[Symbol.asyncIterator]=function(){return this},a;function c(S){return function(x){return Promise.resolve(x).then(S,w)}}function d(S,x){i[S]&&(a[S]=function(E){return new Promise(function(I,k){l.push([S,E,I,k])>1||h(S,E)})},x&&(a[S]=x(a[S])))}function h(S,x){try{g(i[S](x))}catch(E){v(l[0][3],E)}}function g(S){S.value instanceof Ho?Promise.resolve(S.value.v).then(p,w):v(l[0][2],S)}function p(S){h("next",S)}function w(S){h("throw",S)}function v(S,x){S(x),l.shift(),l.length&&h(l[0][0],l[0][1])}};function l2(n,t){return e2(n,e=>{switch(e.kind){case Ye.Unary:return u2(t,n,e);case Ye.ServerStreaming:return c2(t,n,e);case Ye.ClientStreaming:return f2(t,n,e);case Ye.BiDiStreaming:return d2(t,n,e);default:return null}})}function u2(n,t,e){return async function(i,a){var l,c;const d=await n.unary(t,e,a==null?void 0:a.signal,a==null?void 0:a.timeoutMs,a==null?void 0:a.headers,i,a==null?void 0:a.contextValues);return(l=a==null?void 0:a.onHeader)===null||l===void 0||l.call(a,d.header),(c=a==null?void 0:a.onTrailer)===null||c===void 0||c.call(a,d.trailer),d.message}}function c2(n,t,e){return function(i,a){return v1(n.stream(t,e,a==null?void 0:a.signal,a==null?void 0:a.timeoutMs,a==null?void 0:a.headers,s2([i]),a==null?void 0:a.contextValues),a)}}function f2(n,t,e){return async function(i,a){var l,c,d,h,g,p;const w=await n.stream(t,e,a==null?void 0:a.signal,a==null?void 0:a.timeoutMs,a==null?void 0:a.headers,i,a==null?void 0:a.contextValues);(g=a==null?void 0:a.onHeader)===null||g===void 0||g.call(a,w.header);let v,S=0;try{for(var x=!0,E=y1(w.message),I;I=await E.next(),l=I.done,!l;x=!0)h=I.value,x=!1,v=h,S++}catch(k){c={error:k}}finally{try{!x&&!l&&(d=E.return)&&await d.call(E)}finally{if(c)throw c.error}}if(!v)throw new Gt("protocol error: missing response message",_t.Unimplemented);if(S>1)throw new Gt("protocol error: received extra messages for client streaming method",_t.Unimplemented);return(p=a==null?void 0:a.onTrailer)===null||p===void 0||p.call(a,w.trailer),v}}function d2(n,t,e){return function(i,a){return v1(n.stream(t,e,a==null?void 0:a.signal,a==null?void 0:a.timeoutMs,a==null?void 0:a.headers,i,a==null?void 0:a.contextValues),a)}}function v1(n,t){const e=function(){return o2(this,arguments,function*(){var i,a;const l=yield Ho(n);(i=t==null?void 0:t.onHeader)===null||i===void 0||i.call(t,l.header),yield Ho(yield*a2(y1(l.message))),(a=t==null?void 0:t.onTrailer)===null||a===void 0||a.call(t,l.trailer)})}()[Symbol.asyncIterator]();return{[Symbol.asyncIterator]:()=>({next:()=>e.next()})}}function h2(...n){const t=new AbortController,e=n.filter(a=>a!==void 0).concat(t.signal);for(const a of e){if(a.aborted){i.apply(a);break}a.addEventListener("abort",i)}function i(){t.signal.aborted||t.abort(w1(this));for(const a of e)a.removeEventListener("abort",i)}return t}function g2(n){const t=new AbortController,e=()=>{t.abort(new Gt("the operation timed out",_t.DeadlineExceeded))};let i;return n!==void 0&&(n<=0?e():i=setTimeout(e,n)),{signal:t.signal,cleanup:()=>clearTimeout(i)}}function w1(n){if(!n.aborted)return;if(n.reason!==void 0)return n.reason;const t=new Error("This operation was aborted");return t.name="AbortError",t}function wS(){return{get(n){return n.id in this?this[n.id]:n.defaultValue},set(n,t){return this[n.id]=t,this},delete(n){return delete this[n.id],this}}}const Nm=128;function SS(n){const t=new Headers,e=new TextDecoder().decode(n).split(`\r
`);for(const i of e){if(i==="")continue;const a=i.indexOf(":");if(a>0){const l=i.substring(0,a).trim(),c=i.substring(a+1).trim();t.append(l,c)}}return t}const m2="Content-Type",p2="Grpc-Timeout",Vo="Grpc-Status",S1="Grpc-Message",y2="Grpc-Status-Details-Bin",v2="X-User-Agent",w2="X-Grpc-Web",S2="application/grpc-web+proto",b2="application/grpc-web+json";class es extends mt{constructor(t){super(),this.code=0,this.message="",this.details=[],T.util.initPartial(t,this)}static fromBinary(t,e){return new es().fromBinary(t,e)}static fromJson(t,e){return new es().fromJson(t,e)}static fromJsonString(t,e){return new es().fromJsonString(t,e)}static equals(t,e){return T.util.equals(es,t,e)}}es.runtime=T;es.typeName="google.rpc.Status";es.fields=T.util.newFieldList(()=>[{no:1,name:"code",kind:"scalar",T:5},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"details",kind:"message",T:dr,repeated:!0}]);const x2="0";function b1(n){var t;const e=n.get(y2);if(e!=null){const a=t2(e,es);if(a.code==0)return;const l=new Gt(a.message,a.code,n);return l.details=a.details.map(c=>({type:c.typeUrl.substring(c.typeUrl.lastIndexOf("/")+1),value:c.value})),l}const i=n.get(Vo);if(i!=null){if(i===x2)return;const a=parseInt(i,10);return a in _t?new Gt(decodeURIComponent((t=n.get(S1))!==null&&t!==void 0?t:""),a,n):new Gt(`invalid grpc-status: ${i}`,_t.Internal,n)}}function bS(n,t,e){const i=typeof t=="string"?t:t.typeName,a=typeof e=="string"?e:e.name;return n.toString().replace(/\/?$/,`/${i}/${a}`)}function x1(n,t){return t instanceof n?t:new n(t)}function T2(n,t){function e(i){return i.done===!0?i:{done:i.done,value:x1(n,i.value)}}return{[Symbol.asyncIterator](){const i=t[Symbol.asyncIterator](),a={next:()=>i.next().then(e)};return i.throw!==void 0&&(a.throw=l=>i.throw(l).then(e)),i.return!==void 0&&(a.return=l=>i.return(l).then(e)),a}}}function T1(n,t){var e;return(e=t==null?void 0:t.concat().reverse().reduce((i,a)=>a(i),n))!==null&&e!==void 0?e:n}function A2(n){var t;const e=Object.assign({},n);return(t=e.ignoreUnknownFields)!==null&&t!==void 0||(e.ignoreUnknownFields=!0),e}function xS(n,t,e,i){const a=t?TS(n.I,i):AS(n.I,e);return{parse:(t?TS(n.O,i):AS(n.O,e)).parse,serialize:a.serialize}}function TS(n,t){return{parse(e){try{return n.fromBinary(e,t)}catch(i){const a=i instanceof Error?i.message:String(i);throw new Gt(`parse binary: ${a}`,_t.Internal)}},serialize(e){try{return e.toBinary(t)}catch(i){const a=i instanceof Error?i.message:String(i);throw new Gt(`serialize binary: ${a}`,_t.Internal)}}}}function AS(n,t){var e,i;const a=(e=t==null?void 0:t.textEncoder)!==null&&e!==void 0?e:new TextEncoder,l=(i=t==null?void 0:t.textDecoder)!==null&&i!==void 0?i:new TextDecoder,c=A2(t);return{parse(d){try{const h=l.decode(d);return n.fromJsonString(h,c)}catch(h){throw Gt.from(h,_t.InvalidArgument)}},serialize(d){try{const h=d.toJsonString(c);return a.encode(h)}catch(h){throw Gt.from(h,_t.Internal)}}}}function E2(n){const t=T1(n.next,n.interceptors),[e,i,a]=A1(n),l=Object.assign(Object.assign({},n.req),{message:x1(n.req.method.I,n.req.message),signal:e});return t(l).then(c=>(a(),c),i)}function N2(n){const t=T1(n.next,n.interceptors),[e,i,a]=A1(n),l=Object.assign(Object.assign({},n.req),{message:T2(n.req.method.I,n.req.message),signal:e});let c=!1;return e.addEventListener("abort",function(){var d,h;const g=n.req.message[Symbol.asyncIterator]();c||(d=g.throw)===null||d===void 0||d.call(g,this.reason).catch(()=>{}),(h=g.return)===null||h===void 0||h.call(g).catch(()=>{})}),t(l).then(d=>Object.assign(Object.assign({},d),{message:{[Symbol.asyncIterator](){const h=d.message[Symbol.asyncIterator]();return{next(){return h.next().then(g=>(g.done==!0&&(c=!0,a()),g),i)}}}}}),i)}function A1(n){const{signal:t,cleanup:e}=g2(n.timeoutMs),i=h2(n.signal,t);return[i.signal,function(l){const c=Gt.from(t.aborted?w1(t):l);return i.abort(c),e(),Promise.reject(c)},function(){e(),i.abort()}]}function C2(){try{new Headers}catch{throw new Error("connect-web requires the fetch API. Are you running on an old version of Node.js? Node.js is not supported in Connect for Web - please stay tuned for Connect for Node.")}}function ES(n,t){const e=b1(n);if(e)throw t.forEach((i,a)=>{e.metadata.append(a,i)}),e;if(!t.has(Vo)&&!n.has(Vo))throw new Gt("protocol error: missing status",_t.Internal)}function NS(n,t,e,i){const a=new Headers(e??{});return a.set(m2,n?S2:b2),a.set(w2,"1"),a.set(v2,"connect-es/1.6.1"),t!==void 0&&a.set(p2,`${t}m`),a}function D2(n){switch(n){case 400:return _t.Internal;case 401:return _t.Unauthenticated;case 403:return _t.PermissionDenied;case 404:return _t.Unimplemented;case 429:return _t.Unavailable;case 502:return _t.Unavailable;case 503:return _t.Unavailable;case 504:return _t.Unavailable;default:return _t.Unknown}}function CS(n,t){var e;if(n>=200&&n<300)return{foundStatus:t.has(Vo),headerError:b1(t)};throw new Gt(decodeURIComponent((e=t.get(S1))!==null&&e!==void 0?e:`HTTP ${n}`),D2(n),t)}var Ca=function(n){return this instanceof Ca?(this.v=n,this):new Ca(n)},k2=function(n,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=e.apply(n,t||[]),a,l=[];return a={},d("next"),d("throw"),d("return",c),a[Symbol.asyncIterator]=function(){return this},a;function c(S){return function(x){return Promise.resolve(x).then(S,w)}}function d(S,x){i[S]&&(a[S]=function(E){return new Promise(function(I,k){l.push([S,E,I,k])>1||h(S,E)})},x&&(a[S]=x(a[S])))}function h(S,x){try{g(i[S](x))}catch(E){v(l[0][3],E)}}function g(S){S.value instanceof Ca?Promise.resolve(S.value.v).then(p,w):v(l[0][2],S)}function p(S){h("next",S)}function w(S){h("throw",S)}function v(S,x){S(x),l.shift(),l.length&&h(l[0][0],l[0][1])}};function O2(n){var t;C2();const e=(t=n.useBinaryFormat)!==null&&t!==void 0?t:!0;return{async unary(i,a,l,c,d,h,g){var p;const{serialize:w,parse:v}=xS(a,e,n.jsonOptions,n.binaryOptions);return c=c===void 0?n.defaultTimeoutMs:c<=0?void 0:c,await E2({interceptors:n.interceptors,signal:l,timeoutMs:c,req:{stream:!1,service:i,method:a,url:bS(n.baseUrl,i,a),init:{method:"POST",credentials:(p=n.credentials)!==null&&p!==void 0?p:"same-origin",redirect:"error",mode:"cors"},header:NS(e,c,d),contextValues:g??wS(),message:h},next:async S=>{var x;const I=await((x=n.fetch)!==null&&x!==void 0?x:globalThis.fetch)(S.url,Object.assign(Object.assign({},S.init),{headers:S.header,signal:S.signal,body:vS(0,w(S.message))})),{headerError:k}=CS(I.status,I.headers);if(!I.body)throw k!==void 0?k:"missing response body";const z=yS(I.body).getReader();let N,O;for(;;){const _=await z.read();if(_.done)break;const{flags:J,data:U}=_.value;if((J&pS)===pS)throw new Gt("protocol error: received unsupported compressed output",_t.Internal);if(J===Nm){if(N!==void 0)throw"extra trailer";N=SS(U);continue}if(O!==void 0)throw new Gt("extra message",_t.Unimplemented);O=v(U)}if(N===void 0)throw k!==void 0?k:new Gt("missing trailer",I.headers.has(Vo)?_t.Unimplemented:_t.Unknown);if(ES(N,I.headers),O===void 0)throw new Gt("missing message",N.has(Vo)?_t.Unimplemented:_t.Unknown);return{stream:!1,service:i,method:a,header:I.headers,message:O,trailer:N}}})},async stream(i,a,l,c,d,h,g){var p;const{serialize:w,parse:v}=xS(a,e,n.jsonOptions,n.binaryOptions);function S(E,I,k,z,N){return k2(this,arguments,function*(){const _=yS(E).getReader();if(I){if(!(yield Ca(_.read())).done)throw"extra data for trailers-only";return yield Ca(void 0)}let J=!1;for(;;){const U=yield Ca(_.read());if(U.done)break;const{flags:W,data:F}=U.value;if((W&Nm)===Nm){if(J)throw"extra trailer";J=!0;const nt=SS(F);ES(nt,z),nt.forEach((ft,ot)=>k.set(ot,ft));continue}if(J)throw"extra message";yield yield Ca(v(F))}if("throwIfAborted"in N&&N.throwIfAborted(),!J)throw"missing trailer"})}async function x(E){if(a.kind!=Ye.ServerStreaming)throw"The fetch API does not support streaming request bodies";const I=await E[Symbol.asyncIterator]().next();if(I.done==!0)throw"missing request message";return vS(0,w(I.value))}return c=c===void 0?n.defaultTimeoutMs:c<=0?void 0:c,N2({interceptors:n.interceptors,signal:l,timeoutMs:c,req:{stream:!0,service:i,method:a,url:bS(n.baseUrl,i,a),init:{method:"POST",credentials:(p=n.credentials)!==null&&p!==void 0?p:"same-origin",redirect:"error",mode:"cors"},header:NS(e,c,d),contextValues:g??wS(),message:h},next:async E=>{var I;const z=await((I=n.fetch)!==null&&I!==void 0?I:globalThis.fetch)(E.url,Object.assign(Object.assign({},E.init),{headers:E.header,signal:E.signal,body:await x(E.message)})),{foundStatus:N,headerError:O}=CS(z.status,z.headers);if(O!=null)throw O;if(!z.body)throw"missing response body";const _=new Headers;return Object.assign(Object.assign({},E),{header:z.headers,trailer:_,message:S(z.body,N,_,z.headers,E.signal)})}})}}}var It=(n=>(n[n.NULL=0]="NULL",n[n.BOOLEAN=1]="BOOLEAN",n[n.INTEGER=2]="INTEGER",n[n.LONG=3]="LONG",n[n.DOUBLE=4]="DOUBLE",n[n.STRING=5]="STRING",n[n.BYTES=6]="BYTES",n[n.DATE=7]="DATE",n[n.JSON_OBJECT=8]="JSON_OBJECT",n[n.JSON_ARRAY=9]="JSON_ARRAY",n[n.TEXT=10]="TEXT",n[n.INTEGER_CNT=11]="INTEGER_CNT",n[n.LONG_CNT=12]="LONG_CNT",n[n.TREE=13]="TREE",n))(It||{});T.util.setEnumType(It,"yorkie.v1.ValueType",[{no:0,name:"VALUE_TYPE_NULL"},{no:1,name:"VALUE_TYPE_BOOLEAN"},{no:2,name:"VALUE_TYPE_INTEGER"},{no:3,name:"VALUE_TYPE_LONG"},{no:4,name:"VALUE_TYPE_DOUBLE"},{no:5,name:"VALUE_TYPE_STRING"},{no:6,name:"VALUE_TYPE_BYTES"},{no:7,name:"VALUE_TYPE_DATE"},{no:8,name:"VALUE_TYPE_JSON_OBJECT"},{no:9,name:"VALUE_TYPE_JSON_ARRAY"},{no:10,name:"VALUE_TYPE_TEXT"},{no:11,name:"VALUE_TYPE_INTEGER_CNT"},{no:12,name:"VALUE_TYPE_LONG_CNT"},{no:13,name:"VALUE_TYPE_TREE"}]);var Oa=(n=>(n[n.DOCUMENT_CHANGED=0]="DOCUMENT_CHANGED",n[n.DOCUMENT_WATCHED=1]="DOCUMENT_WATCHED",n[n.DOCUMENT_UNWATCHED=2]="DOCUMENT_UNWATCHED",n[n.DOCUMENT_BROADCAST=3]="DOCUMENT_BROADCAST",n))(Oa||{});T.util.setEnumType(Oa,"yorkie.v1.DocEventType",[{no:0,name:"DOC_EVENT_TYPE_DOCUMENT_CHANGED"},{no:1,name:"DOC_EVENT_TYPE_DOCUMENT_WATCHED"},{no:2,name:"DOC_EVENT_TYPE_DOCUMENT_UNWATCHED"},{no:3,name:"DOC_EVENT_TYPE_DOCUMENT_BROADCAST"}]);const Xr=class Xr extends mt{constructor(e){super();y(this,"root");y(this,"presences",{});T.util.initPartial(e,this)}static fromBinary(e,i){return new Xr().fromBinary(e,i)}static fromJson(e,i){return new Xr().fromJson(e,i)}static fromJsonString(e,i){return new Xr().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Xr,e,i)}};y(Xr,"runtime",T),y(Xr,"typeName","yorkie.v1.Snapshot"),y(Xr,"fields",T.util.newFieldList(()=>[{no:1,name:"root",kind:"message",T:sn},{no:2,name:"presences",kind:"map",K:9,V:{kind:"message",T:qd}}]));let Vm=Xr;var Dn;let fs=(Dn=class extends mt{constructor(e){super();y(this,"documentKey","");y(this,"checkpoint");y(this,"snapshot",new Uint8Array(0));y(this,"changes",[]);y(this,"minSyncedTicket");y(this,"isRemoved",!1);y(this,"versionVector");T.util.initPartial(e,this)}static fromBinary(e,i){return new Dn().fromBinary(e,i)}static fromJson(e,i){return new Dn().fromJson(e,i)}static fromJsonString(e,i){return new Dn().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Dn,e,i)}},y(Dn,"runtime",T),y(Dn,"typeName","yorkie.v1.ChangePack"),y(Dn,"fields",T.util.newFieldList(()=>[{no:1,name:"document_key",kind:"scalar",T:9},{no:2,name:"checkpoint",kind:"message",T:C1},{no:3,name:"snapshot",kind:"scalar",T:12},{no:4,name:"changes",kind:"message",T:E1,repeated:!0},{no:5,name:"min_synced_ticket",kind:"message",T:wt},{no:6,name:"is_removed",kind:"scalar",T:8},{no:7,name:"version_vector",kind:"message",T:Ud}])),Dn);var kn;let E1=(kn=class extends mt{constructor(e){super();y(this,"id");y(this,"message","");y(this,"operations",[]);y(this,"presenceChange");T.util.initPartial(e,this)}static fromBinary(e,i){return new kn().fromBinary(e,i)}static fromJson(e,i){return new kn().fromJson(e,i)}static fromJsonString(e,i){return new kn().fromJsonString(e,i)}static equals(e,i){return T.util.equals(kn,e,i)}},y(kn,"runtime",T),y(kn,"typeName","yorkie.v1.Change"),y(kn,"fields",T.util.newFieldList(()=>[{no:1,name:"id",kind:"message",T:_d},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"operations",kind:"message",T:zp,repeated:!0},{no:4,name:"presence_change",kind:"message",T:Ou}])),kn);var On;let _d=(On=class extends mt{constructor(e){super();y(this,"clientSeq",0);y(this,"serverSeq",ie.zero);y(this,"lamport",ie.zero);y(this,"actorId",new Uint8Array(0));y(this,"versionVector");T.util.initPartial(e,this)}static fromBinary(e,i){return new On().fromBinary(e,i)}static fromJson(e,i){return new On().fromJson(e,i)}static fromJsonString(e,i){return new On().fromJsonString(e,i)}static equals(e,i){return T.util.equals(On,e,i)}},y(On,"runtime",T),y(On,"typeName","yorkie.v1.ChangeID"),y(On,"fields",T.util.newFieldList(()=>[{no:1,name:"client_seq",kind:"scalar",T:13},{no:2,name:"server_seq",kind:"scalar",T:3},{no:3,name:"lamport",kind:"scalar",T:3},{no:4,name:"actor_id",kind:"scalar",T:12},{no:5,name:"version_vector",kind:"message",T:Ud}])),On);var In;let Ud=(In=class extends mt{constructor(e){super();y(this,"vector",{});T.util.initPartial(e,this)}static fromBinary(e,i){return new In().fromBinary(e,i)}static fromJson(e,i){return new In().fromJson(e,i)}static fromJsonString(e,i){return new In().fromJsonString(e,i)}static equals(e,i){return T.util.equals(In,e,i)}},y(In,"runtime",T),y(In,"typeName","yorkie.v1.VersionVector"),y(In,"fields",T.util.newFieldList(()=>[{no:1,name:"vector",kind:"map",K:9,V:{kind:"scalar",T:3}}])),In);var Rn;let zp=(Rn=class extends mt{constructor(e){super();y(this,"body",{case:void 0});T.util.initPartial(e,this)}static fromBinary(e,i){return new Rn().fromBinary(e,i)}static fromJson(e,i){return new Rn().fromJson(e,i)}static fromJsonString(e,i){return new Rn().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Rn,e,i)}},y(Rn,"runtime",T),y(Rn,"typeName","yorkie.v1.Operation"),y(Rn,"fields",T.util.newFieldList(()=>[{no:1,name:"set",kind:"message",T:Wf,oneof:"body"},{no:2,name:"add",kind:"message",T:td,oneof:"body"},{no:3,name:"move",kind:"message",T:ed,oneof:"body"},{no:4,name:"remove",kind:"message",T:nd,oneof:"body"},{no:5,name:"edit",kind:"message",T:rd,oneof:"body"},{no:7,name:"style",kind:"message",T:id,oneof:"body"},{no:8,name:"increase",kind:"message",T:sd,oneof:"body"},{no:9,name:"tree_edit",kind:"message",T:ad,oneof:"body"},{no:10,name:"tree_style",kind:"message",T:od,oneof:"body"},{no:11,name:"array_set",kind:"message",T:ld,oneof:"body"}])),Rn);const Kr=class Kr extends mt{constructor(e){super();y(this,"parentCreatedAt");y(this,"key","");y(this,"value");y(this,"executedAt");T.util.initPartial(e,this)}static fromBinary(e,i){return new Kr().fromBinary(e,i)}static fromJson(e,i){return new Kr().fromJson(e,i)}static fromJsonString(e,i){return new Kr().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Kr,e,i)}};y(Kr,"runtime",T),y(Kr,"typeName","yorkie.v1.Operation.Set"),y(Kr,"fields",T.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:wt},{no:2,name:"key",kind:"scalar",T:9},{no:3,name:"value",kind:"message",T:Cn},{no:4,name:"executed_at",kind:"message",T:wt}]));let Wf=Kr;const Fr=class Fr extends mt{constructor(e){super();y(this,"parentCreatedAt");y(this,"prevCreatedAt");y(this,"value");y(this,"executedAt");T.util.initPartial(e,this)}static fromBinary(e,i){return new Fr().fromBinary(e,i)}static fromJson(e,i){return new Fr().fromJson(e,i)}static fromJsonString(e,i){return new Fr().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Fr,e,i)}};y(Fr,"runtime",T),y(Fr,"typeName","yorkie.v1.Operation.Add"),y(Fr,"fields",T.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:wt},{no:2,name:"prev_created_at",kind:"message",T:wt},{no:3,name:"value",kind:"message",T:Cn},{no:4,name:"executed_at",kind:"message",T:wt}]));let td=Fr;const Zr=class Zr extends mt{constructor(e){super();y(this,"parentCreatedAt");y(this,"prevCreatedAt");y(this,"createdAt");y(this,"executedAt");T.util.initPartial(e,this)}static fromBinary(e,i){return new Zr().fromBinary(e,i)}static fromJson(e,i){return new Zr().fromJson(e,i)}static fromJsonString(e,i){return new Zr().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Zr,e,i)}};y(Zr,"runtime",T),y(Zr,"typeName","yorkie.v1.Operation.Move"),y(Zr,"fields",T.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:wt},{no:2,name:"prev_created_at",kind:"message",T:wt},{no:3,name:"created_at",kind:"message",T:wt},{no:4,name:"executed_at",kind:"message",T:wt}]));let ed=Zr;const Qr=class Qr extends mt{constructor(e){super();y(this,"parentCreatedAt");y(this,"createdAt");y(this,"executedAt");T.util.initPartial(e,this)}static fromBinary(e,i){return new Qr().fromBinary(e,i)}static fromJson(e,i){return new Qr().fromJson(e,i)}static fromJsonString(e,i){return new Qr().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Qr,e,i)}};y(Qr,"runtime",T),y(Qr,"typeName","yorkie.v1.Operation.Remove"),y(Qr,"fields",T.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:wt},{no:2,name:"created_at",kind:"message",T:wt},{no:3,name:"executed_at",kind:"message",T:wt}]));let nd=Qr;const Wr=class Wr extends mt{constructor(e){super();y(this,"parentCreatedAt");y(this,"from");y(this,"to");y(this,"createdAtMapByActor",{});y(this,"content","");y(this,"executedAt");y(this,"attributes",{});T.util.initPartial(e,this)}static fromBinary(e,i){return new Wr().fromBinary(e,i)}static fromJson(e,i){return new Wr().fromJson(e,i)}static fromJsonString(e,i){return new Wr().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Wr,e,i)}};y(Wr,"runtime",T),y(Wr,"typeName","yorkie.v1.Operation.Edit"),y(Wr,"fields",T.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:wt},{no:2,name:"from",kind:"message",T:za},{no:3,name:"to",kind:"message",T:za},{no:4,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:wt}},{no:5,name:"content",kind:"scalar",T:9},{no:6,name:"executed_at",kind:"message",T:wt},{no:7,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}}]));let rd=Wr;const ti=class ti extends mt{constructor(e){super();y(this,"parentCreatedAt");y(this,"from");y(this,"to");y(this,"attributes",{});y(this,"executedAt");y(this,"createdAtMapByActor",{});T.util.initPartial(e,this)}static fromBinary(e,i){return new ti().fromBinary(e,i)}static fromJson(e,i){return new ti().fromJson(e,i)}static fromJsonString(e,i){return new ti().fromJsonString(e,i)}static equals(e,i){return T.util.equals(ti,e,i)}};y(ti,"runtime",T),y(ti,"typeName","yorkie.v1.Operation.Style"),y(ti,"fields",T.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:wt},{no:2,name:"from",kind:"message",T:za},{no:3,name:"to",kind:"message",T:za},{no:4,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:5,name:"executed_at",kind:"message",T:wt},{no:6,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:wt}}]));let id=ti;const ei=class ei extends mt{constructor(e){super();y(this,"parentCreatedAt");y(this,"value");y(this,"executedAt");T.util.initPartial(e,this)}static fromBinary(e,i){return new ei().fromBinary(e,i)}static fromJson(e,i){return new ei().fromJson(e,i)}static fromJsonString(e,i){return new ei().fromJsonString(e,i)}static equals(e,i){return T.util.equals(ei,e,i)}};y(ei,"runtime",T),y(ei,"typeName","yorkie.v1.Operation.Increase"),y(ei,"fields",T.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:wt},{no:2,name:"value",kind:"message",T:Cn},{no:3,name:"executed_at",kind:"message",T:wt}]));let sd=ei;const ni=class ni extends mt{constructor(e){super();y(this,"parentCreatedAt");y(this,"from");y(this,"to");y(this,"createdAtMapByActor",{});y(this,"contents",[]);y(this,"splitLevel",0);y(this,"executedAt");T.util.initPartial(e,this)}static fromBinary(e,i){return new ni().fromBinary(e,i)}static fromJson(e,i){return new ni().fromJson(e,i)}static fromJsonString(e,i){return new ni().fromJsonString(e,i)}static equals(e,i){return T.util.equals(ni,e,i)}};y(ni,"runtime",T),y(ni,"typeName","yorkie.v1.Operation.TreeEdit"),y(ni,"fields",T.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:wt},{no:2,name:"from",kind:"message",T:Ma},{no:3,name:"to",kind:"message",T:Ma},{no:4,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:wt}},{no:5,name:"contents",kind:"message",T:yd,repeated:!0},{no:7,name:"split_level",kind:"scalar",T:5},{no:6,name:"executed_at",kind:"message",T:wt}]));let ad=ni;const ri=class ri extends mt{constructor(e){super();y(this,"parentCreatedAt");y(this,"from");y(this,"to");y(this,"attributes",{});y(this,"executedAt");y(this,"attributesToRemove",[]);y(this,"createdAtMapByActor",{});T.util.initPartial(e,this)}static fromBinary(e,i){return new ri().fromBinary(e,i)}static fromJson(e,i){return new ri().fromJson(e,i)}static fromJsonString(e,i){return new ri().fromJsonString(e,i)}static equals(e,i){return T.util.equals(ri,e,i)}};y(ri,"runtime",T),y(ri,"typeName","yorkie.v1.Operation.TreeStyle"),y(ri,"fields",T.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:wt},{no:2,name:"from",kind:"message",T:Ma},{no:3,name:"to",kind:"message",T:Ma},{no:4,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:5,name:"executed_at",kind:"message",T:wt},{no:6,name:"attributes_to_remove",kind:"scalar",T:9,repeated:!0},{no:7,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:wt}}]));let od=ri;const ii=class ii extends mt{constructor(e){super();y(this,"parentCreatedAt");y(this,"createdAt");y(this,"value");y(this,"executedAt");T.util.initPartial(e,this)}static fromBinary(e,i){return new ii().fromBinary(e,i)}static fromJson(e,i){return new ii().fromJson(e,i)}static fromJsonString(e,i){return new ii().fromJsonString(e,i)}static equals(e,i){return T.util.equals(ii,e,i)}};y(ii,"runtime",T),y(ii,"typeName","yorkie.v1.Operation.ArraySet"),y(ii,"fields",T.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:wt},{no:2,name:"created_at",kind:"message",T:wt},{no:3,name:"value",kind:"message",T:Cn},{no:4,name:"executed_at",kind:"message",T:wt}]));let ld=ii;const si=class si extends mt{constructor(e){super();y(this,"createdAt");y(this,"movedAt");y(this,"removedAt");y(this,"type",0);y(this,"value",new Uint8Array(0));T.util.initPartial(e,this)}static fromBinary(e,i){return new si().fromBinary(e,i)}static fromJson(e,i){return new si().fromJson(e,i)}static fromJsonString(e,i){return new si().fromJsonString(e,i)}static equals(e,i){return T.util.equals(si,e,i)}};y(si,"runtime",T),y(si,"typeName","yorkie.v1.JSONElementSimple"),y(si,"fields",T.util.newFieldList(()=>[{no:1,name:"created_at",kind:"message",T:wt},{no:2,name:"moved_at",kind:"message",T:wt},{no:3,name:"removed_at",kind:"message",T:wt},{no:4,name:"type",kind:"enum",T:T.getEnumType(It)},{no:5,name:"value",kind:"scalar",T:12}]));let Cn=si;const ai=class ai extends mt{constructor(e){super();y(this,"body",{case:void 0});T.util.initPartial(e,this)}static fromBinary(e,i){return new ai().fromBinary(e,i)}static fromJson(e,i){return new ai().fromJson(e,i)}static fromJsonString(e,i){return new ai().fromJsonString(e,i)}static equals(e,i){return T.util.equals(ai,e,i)}};y(ai,"runtime",T),y(ai,"typeName","yorkie.v1.JSONElement"),y(ai,"fields",T.util.newFieldList(()=>[{no:1,name:"json_object",kind:"message",T:ud,oneof:"body"},{no:2,name:"json_array",kind:"message",T:cd,oneof:"body"},{no:3,name:"primitive",kind:"message",T:fd,oneof:"body"},{no:5,name:"text",kind:"message",T:dd,oneof:"body"},{no:6,name:"counter",kind:"message",T:hd,oneof:"body"},{no:7,name:"tree",kind:"message",T:gd,oneof:"body"}]));let sn=ai;const oi=class oi extends mt{constructor(e){super();y(this,"nodes",[]);y(this,"createdAt");y(this,"movedAt");y(this,"removedAt");T.util.initPartial(e,this)}static fromBinary(e,i){return new oi().fromBinary(e,i)}static fromJson(e,i){return new oi().fromJson(e,i)}static fromJsonString(e,i){return new oi().fromJsonString(e,i)}static equals(e,i){return T.util.equals(oi,e,i)}};y(oi,"runtime",T),y(oi,"typeName","yorkie.v1.JSONElement.JSONObject"),y(oi,"fields",T.util.newFieldList(()=>[{no:1,name:"nodes",kind:"message",T:N1,repeated:!0},{no:2,name:"created_at",kind:"message",T:wt},{no:3,name:"moved_at",kind:"message",T:wt},{no:4,name:"removed_at",kind:"message",T:wt}]));let ud=oi;const li=class li extends mt{constructor(e){super();y(this,"nodes",[]);y(this,"createdAt");y(this,"movedAt");y(this,"removedAt");T.util.initPartial(e,this)}static fromBinary(e,i){return new li().fromBinary(e,i)}static fromJson(e,i){return new li().fromJson(e,i)}static fromJsonString(e,i){return new li().fromJsonString(e,i)}static equals(e,i){return T.util.equals(li,e,i)}};y(li,"runtime",T),y(li,"typeName","yorkie.v1.JSONElement.JSONArray"),y(li,"fields",T.util.newFieldList(()=>[{no:1,name:"nodes",kind:"message",T:md,repeated:!0},{no:2,name:"created_at",kind:"message",T:wt},{no:3,name:"moved_at",kind:"message",T:wt},{no:4,name:"removed_at",kind:"message",T:wt}]));let cd=li;const ui=class ui extends mt{constructor(e){super();y(this,"type",0);y(this,"value",new Uint8Array(0));y(this,"createdAt");y(this,"movedAt");y(this,"removedAt");T.util.initPartial(e,this)}static fromBinary(e,i){return new ui().fromBinary(e,i)}static fromJson(e,i){return new ui().fromJson(e,i)}static fromJsonString(e,i){return new ui().fromJsonString(e,i)}static equals(e,i){return T.util.equals(ui,e,i)}};y(ui,"runtime",T),y(ui,"typeName","yorkie.v1.JSONElement.Primitive"),y(ui,"fields",T.util.newFieldList(()=>[{no:1,name:"type",kind:"enum",T:T.getEnumType(It)},{no:2,name:"value",kind:"scalar",T:12},{no:3,name:"created_at",kind:"message",T:wt},{no:4,name:"moved_at",kind:"message",T:wt},{no:5,name:"removed_at",kind:"message",T:wt}]));let fd=ui;const ci=class ci extends mt{constructor(e){super();y(this,"nodes",[]);y(this,"createdAt");y(this,"movedAt");y(this,"removedAt");T.util.initPartial(e,this)}static fromBinary(e,i){return new ci().fromBinary(e,i)}static fromJson(e,i){return new ci().fromJson(e,i)}static fromJsonString(e,i){return new ci().fromJsonString(e,i)}static equals(e,i){return T.util.equals(ci,e,i)}};y(ci,"runtime",T),y(ci,"typeName","yorkie.v1.JSONElement.Text"),y(ci,"fields",T.util.newFieldList(()=>[{no:1,name:"nodes",kind:"message",T:pd,repeated:!0},{no:2,name:"created_at",kind:"message",T:wt},{no:3,name:"moved_at",kind:"message",T:wt},{no:4,name:"removed_at",kind:"message",T:wt}]));let dd=ci;const fi=class fi extends mt{constructor(e){super();y(this,"type",0);y(this,"value",new Uint8Array(0));y(this,"createdAt");y(this,"movedAt");y(this,"removedAt");T.util.initPartial(e,this)}static fromBinary(e,i){return new fi().fromBinary(e,i)}static fromJson(e,i){return new fi().fromJson(e,i)}static fromJsonString(e,i){return new fi().fromJsonString(e,i)}static equals(e,i){return T.util.equals(fi,e,i)}};y(fi,"runtime",T),y(fi,"typeName","yorkie.v1.JSONElement.Counter"),y(fi,"fields",T.util.newFieldList(()=>[{no:1,name:"type",kind:"enum",T:T.getEnumType(It)},{no:2,name:"value",kind:"scalar",T:12},{no:3,name:"created_at",kind:"message",T:wt},{no:4,name:"moved_at",kind:"message",T:wt},{no:5,name:"removed_at",kind:"message",T:wt}]));let hd=fi;const di=class di extends mt{constructor(e){super();y(this,"nodes",[]);y(this,"createdAt");y(this,"movedAt");y(this,"removedAt");T.util.initPartial(e,this)}static fromBinary(e,i){return new di().fromBinary(e,i)}static fromJson(e,i){return new di().fromJson(e,i)}static fromJsonString(e,i){return new di().fromJsonString(e,i)}static equals(e,i){return T.util.equals(di,e,i)}};y(di,"runtime",T),y(di,"typeName","yorkie.v1.JSONElement.Tree"),y(di,"fields",T.util.newFieldList(()=>[{no:1,name:"nodes",kind:"message",T:ku,repeated:!0},{no:2,name:"created_at",kind:"message",T:wt},{no:3,name:"moved_at",kind:"message",T:wt},{no:4,name:"removed_at",kind:"message",T:wt}]));let gd=di;var Mn;let N1=(Mn=class extends mt{constructor(e){super();y(this,"key","");y(this,"element");T.util.initPartial(e,this)}static fromBinary(e,i){return new Mn().fromBinary(e,i)}static fromJson(e,i){return new Mn().fromJson(e,i)}static fromJsonString(e,i){return new Mn().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Mn,e,i)}},y(Mn,"runtime",T),y(Mn,"typeName","yorkie.v1.RHTNode"),y(Mn,"fields",T.util.newFieldList(()=>[{no:1,name:"key",kind:"scalar",T:9},{no:2,name:"element",kind:"message",T:sn}])),Mn);const cr=class cr extends mt{constructor(e){super();y(this,"next");y(this,"element");T.util.initPartial(e,this)}static fromBinary(e,i){return new cr().fromBinary(e,i)}static fromJson(e,i){return new cr().fromJson(e,i)}static fromJsonString(e,i){return new cr().fromJsonString(e,i)}static equals(e,i){return T.util.equals(cr,e,i)}};y(cr,"runtime",T),y(cr,"typeName","yorkie.v1.RGANode"),y(cr,"fields",T.util.newFieldList(()=>[{no:1,name:"next",kind:"message",T:cr},{no:2,name:"element",kind:"message",T:sn}]));let md=cr;const hi=class hi extends mt{constructor(e){super();y(this,"value","");y(this,"updatedAt");y(this,"isRemoved",!1);T.util.initPartial(e,this)}static fromBinary(e,i){return new hi().fromBinary(e,i)}static fromJson(e,i){return new hi().fromJson(e,i)}static fromJsonString(e,i){return new hi().fromJsonString(e,i)}static equals(e,i){return T.util.equals(hi,e,i)}};y(hi,"runtime",T),y(hi,"typeName","yorkie.v1.NodeAttr"),y(hi,"fields",T.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:9},{no:2,name:"updated_at",kind:"message",T:wt},{no:3,name:"is_removed",kind:"scalar",T:8}]));let jo=hi;const gi=class gi extends mt{constructor(e){super();y(this,"id");y(this,"value","");y(this,"removedAt");y(this,"insPrevId");y(this,"attributes",{});T.util.initPartial(e,this)}static fromBinary(e,i){return new gi().fromBinary(e,i)}static fromJson(e,i){return new gi().fromJson(e,i)}static fromJsonString(e,i){return new gi().fromJsonString(e,i)}static equals(e,i){return T.util.equals(gi,e,i)}};y(gi,"runtime",T),y(gi,"typeName","yorkie.v1.TextNode"),y(gi,"fields",T.util.newFieldList(()=>[{no:1,name:"id",kind:"message",T:Du},{no:2,name:"value",kind:"scalar",T:9},{no:3,name:"removed_at",kind:"message",T:wt},{no:4,name:"ins_prev_id",kind:"message",T:Du},{no:5,name:"attributes",kind:"map",K:9,V:{kind:"message",T:jo}}]));let pd=gi;const mi=class mi extends mt{constructor(e){super();y(this,"createdAt");y(this,"offset",0);T.util.initPartial(e,this)}static fromBinary(e,i){return new mi().fromBinary(e,i)}static fromJson(e,i){return new mi().fromJson(e,i)}static fromJsonString(e,i){return new mi().fromJsonString(e,i)}static equals(e,i){return T.util.equals(mi,e,i)}};y(mi,"runtime",T),y(mi,"typeName","yorkie.v1.TextNodeID"),y(mi,"fields",T.util.newFieldList(()=>[{no:1,name:"created_at",kind:"message",T:wt},{no:2,name:"offset",kind:"scalar",T:5}]));let Du=mi;const pi=class pi extends mt{constructor(e){super();y(this,"id");y(this,"type","");y(this,"value","");y(this,"removedAt");y(this,"insPrevId");y(this,"insNextId");y(this,"depth",0);y(this,"attributes",{});T.util.initPartial(e,this)}static fromBinary(e,i){return new pi().fromBinary(e,i)}static fromJson(e,i){return new pi().fromJson(e,i)}static fromJsonString(e,i){return new pi().fromJsonString(e,i)}static equals(e,i){return T.util.equals(pi,e,i)}};y(pi,"runtime",T),y(pi,"typeName","yorkie.v1.TreeNode"),y(pi,"fields",T.util.newFieldList(()=>[{no:1,name:"id",kind:"message",T:Zs},{no:2,name:"type",kind:"scalar",T:9},{no:3,name:"value",kind:"scalar",T:9},{no:4,name:"removed_at",kind:"message",T:wt},{no:5,name:"ins_prev_id",kind:"message",T:Zs},{no:6,name:"ins_next_id",kind:"message",T:Zs},{no:7,name:"depth",kind:"scalar",T:5},{no:8,name:"attributes",kind:"map",K:9,V:{kind:"message",T:jo}}]));let ku=pi;const yi=class yi extends mt{constructor(e){super();y(this,"content",[]);T.util.initPartial(e,this)}static fromBinary(e,i){return new yi().fromBinary(e,i)}static fromJson(e,i){return new yi().fromJson(e,i)}static fromJsonString(e,i){return new yi().fromJsonString(e,i)}static equals(e,i){return T.util.equals(yi,e,i)}};y(yi,"runtime",T),y(yi,"typeName","yorkie.v1.TreeNodes"),y(yi,"fields",T.util.newFieldList(()=>[{no:1,name:"content",kind:"message",T:ku,repeated:!0}]));let yd=yi;const vi=class vi extends mt{constructor(e){super();y(this,"createdAt");y(this,"offset",0);T.util.initPartial(e,this)}static fromBinary(e,i){return new vi().fromBinary(e,i)}static fromJson(e,i){return new vi().fromJson(e,i)}static fromJsonString(e,i){return new vi().fromJsonString(e,i)}static equals(e,i){return T.util.equals(vi,e,i)}};y(vi,"runtime",T),y(vi,"typeName","yorkie.v1.TreeNodeID"),y(vi,"fields",T.util.newFieldList(()=>[{no:1,name:"created_at",kind:"message",T:wt},{no:2,name:"offset",kind:"scalar",T:5}]));let Zs=vi;const wi=class wi extends mt{constructor(e){super();y(this,"parentId");y(this,"leftSiblingId");T.util.initPartial(e,this)}static fromBinary(e,i){return new wi().fromBinary(e,i)}static fromJson(e,i){return new wi().fromJson(e,i)}static fromJsonString(e,i){return new wi().fromJsonString(e,i)}static equals(e,i){return T.util.equals(wi,e,i)}};y(wi,"runtime",T),y(wi,"typeName","yorkie.v1.TreePos"),y(wi,"fields",T.util.newFieldList(()=>[{no:1,name:"parent_id",kind:"message",T:Zs},{no:2,name:"left_sibling_id",kind:"message",T:Zs}]));let Ma=wi;const Si=class Si extends mt{constructor(e){super();y(this,"id","");y(this,"authProvider","");y(this,"username","");y(this,"createdAt");T.util.initPartial(e,this)}static fromBinary(e,i){return new Si().fromBinary(e,i)}static fromJson(e,i){return new Si().fromJson(e,i)}static fromJsonString(e,i){return new Si().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Si,e,i)}};y(Si,"runtime",T),y(Si,"typeName","yorkie.v1.User"),y(Si,"fields",T.util.newFieldList(()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"auth_provider",kind:"scalar",T:9},{no:3,name:"username",kind:"scalar",T:9},{no:4,name:"created_at",kind:"message",T:Le}]));let DS=Si;const bi=class bi extends mt{constructor(e){super();y(this,"id","");y(this,"name","");y(this,"publicKey","");y(this,"secretKey","");y(this,"authWebhookUrl","");y(this,"authWebhookMethods",[]);y(this,"eventWebhookUrl","");y(this,"eventWebhookEvents",[]);y(this,"clientDeactivateThreshold","");y(this,"maxSubscribersPerDocument",0);y(this,"maxAttachmentsPerDocument",0);y(this,"maxSizePerDocument",0);y(this,"allowedOrigins",[]);y(this,"createdAt");y(this,"updatedAt");T.util.initPartial(e,this)}static fromBinary(e,i){return new bi().fromBinary(e,i)}static fromJson(e,i){return new bi().fromJson(e,i)}static fromJsonString(e,i){return new bi().fromJsonString(e,i)}static equals(e,i){return T.util.equals(bi,e,i)}};y(bi,"runtime",T),y(bi,"typeName","yorkie.v1.Project"),y(bi,"fields",T.util.newFieldList(()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"public_key",kind:"scalar",T:9},{no:4,name:"secret_key",kind:"scalar",T:9},{no:5,name:"auth_webhook_url",kind:"scalar",T:9},{no:6,name:"auth_webhook_methods",kind:"scalar",T:9,repeated:!0},{no:7,name:"event_webhook_url",kind:"scalar",T:9},{no:8,name:"event_webhook_events",kind:"scalar",T:9,repeated:!0},{no:9,name:"client_deactivate_threshold",kind:"scalar",T:9},{no:10,name:"max_subscribers_per_document",kind:"scalar",T:5},{no:11,name:"max_attachments_per_document",kind:"scalar",T:5},{no:15,name:"max_size_per_document",kind:"scalar",T:5},{no:14,name:"allowed_origins",kind:"scalar",T:9,repeated:!0},{no:12,name:"created_at",kind:"message",T:Le},{no:13,name:"updated_at",kind:"message",T:Le}]));let kS=bi;const xi=class xi extends mt{constructor(e){super();y(this,"timestamp",ie.zero);y(this,"value",0);T.util.initPartial(e,this)}static fromBinary(e,i){return new xi().fromBinary(e,i)}static fromJson(e,i){return new xi().fromJson(e,i)}static fromJsonString(e,i){return new xi().fromJsonString(e,i)}static equals(e,i){return T.util.equals(xi,e,i)}};y(xi,"runtime",T),y(xi,"typeName","yorkie.v1.MetricPoint"),y(xi,"fields",T.util.newFieldList(()=>[{no:1,name:"timestamp",kind:"scalar",T:3},{no:2,name:"value",kind:"scalar",T:5}]));let OS=xi;const Ti=class Ti extends mt{constructor(e){super();y(this,"name");y(this,"authWebhookUrl");y(this,"authWebhookMethods");y(this,"eventWebhookUrl");y(this,"eventWebhookEvents");y(this,"clientDeactivateThreshold");y(this,"maxSubscribersPerDocument");y(this,"maxAttachmentsPerDocument");y(this,"maxSizePerDocument");y(this,"allowedOrigins");T.util.initPartial(e,this)}static fromBinary(e,i){return new Ti().fromBinary(e,i)}static fromJson(e,i){return new Ti().fromJson(e,i)}static fromJsonString(e,i){return new Ti().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Ti,e,i)}};y(Ti,"runtime",T),y(Ti,"typeName","yorkie.v1.UpdatableProjectFields"),y(Ti,"fields",T.util.newFieldList(()=>[{no:1,name:"name",kind:"message",T:tn},{no:2,name:"auth_webhook_url",kind:"message",T:tn},{no:3,name:"auth_webhook_methods",kind:"message",T:jm},{no:4,name:"event_webhook_url",kind:"message",T:tn},{no:5,name:"event_webhook_events",kind:"message",T:Ym},{no:6,name:"client_deactivate_threshold",kind:"message",T:tn},{no:7,name:"max_subscribers_per_document",kind:"message",T:mn},{no:8,name:"max_attachments_per_document",kind:"message",T:mn},{no:10,name:"max_size_per_document",kind:"message",T:mn},{no:9,name:"allowed_origins",kind:"message",T:Gm}]));let IS=Ti;const Ai=class Ai extends mt{constructor(e){super();y(this,"methods",[]);T.util.initPartial(e,this)}static fromBinary(e,i){return new Ai().fromBinary(e,i)}static fromJson(e,i){return new Ai().fromJson(e,i)}static fromJsonString(e,i){return new Ai().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Ai,e,i)}};y(Ai,"runtime",T),y(Ai,"typeName","yorkie.v1.UpdatableProjectFields.AuthWebhookMethods"),y(Ai,"fields",T.util.newFieldList(()=>[{no:1,name:"methods",kind:"scalar",T:9,repeated:!0}]));let jm=Ai;const Ei=class Ei extends mt{constructor(e){super();y(this,"events",[]);T.util.initPartial(e,this)}static fromBinary(e,i){return new Ei().fromBinary(e,i)}static fromJson(e,i){return new Ei().fromJson(e,i)}static fromJsonString(e,i){return new Ei().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Ei,e,i)}};y(Ei,"runtime",T),y(Ei,"typeName","yorkie.v1.UpdatableProjectFields.EventWebhookEvents"),y(Ei,"fields",T.util.newFieldList(()=>[{no:1,name:"events",kind:"scalar",T:9,repeated:!0}]));let Ym=Ei;const Ni=class Ni extends mt{constructor(e){super();y(this,"origins",[]);T.util.initPartial(e,this)}static fromBinary(e,i){return new Ni().fromBinary(e,i)}static fromJson(e,i){return new Ni().fromJson(e,i)}static fromJsonString(e,i){return new Ni().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Ni,e,i)}};y(Ni,"runtime",T),y(Ni,"typeName","yorkie.v1.UpdatableProjectFields.AllowedOrigins"),y(Ni,"fields",T.util.newFieldList(()=>[{no:1,name:"origins",kind:"scalar",T:9,repeated:!0}]));let Gm=Ni;const Ci=class Ci extends mt{constructor(e){super();y(this,"id","");y(this,"key","");y(this,"root","");y(this,"attachedClients",0);y(this,"documentSize");y(this,"schemaKey","");y(this,"presences",{});y(this,"createdAt");y(this,"accessedAt");y(this,"updatedAt");T.util.initPartial(e,this)}static fromBinary(e,i){return new Ci().fromBinary(e,i)}static fromJson(e,i){return new Ci().fromJson(e,i)}static fromJsonString(e,i){return new Ci().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Ci,e,i)}};y(Ci,"runtime",T),y(Ci,"typeName","yorkie.v1.DocumentSummary"),y(Ci,"fields",T.util.newFieldList(()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"key",kind:"scalar",T:9},{no:3,name:"root",kind:"scalar",T:9},{no:7,name:"attached_clients",kind:"scalar",T:5},{no:8,name:"document_size",kind:"message",T:Fm},{no:9,name:"schema_key",kind:"scalar",T:9},{no:10,name:"presences",kind:"map",K:9,V:{kind:"message",T:qd}},{no:4,name:"created_at",kind:"message",T:Le},{no:5,name:"accessed_at",kind:"message",T:Le},{no:6,name:"updated_at",kind:"message",T:Le}]));let RS=Ci;const Di=class Di extends mt{constructor(e){super();y(this,"type",0);y(this,"presence");T.util.initPartial(e,this)}static fromBinary(e,i){return new Di().fromBinary(e,i)}static fromJson(e,i){return new Di().fromJson(e,i)}static fromJsonString(e,i){return new Di().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Di,e,i)}};y(Di,"runtime",T),y(Di,"typeName","yorkie.v1.PresenceChange"),y(Di,"fields",T.util.newFieldList(()=>[{no:1,name:"type",kind:"enum",T:T.getEnumType(Ba)},{no:2,name:"presence",kind:"message",T:qd}]));let Ou=Di;var Ba=(n=>(n[n.UNSPECIFIED=0]="UNSPECIFIED",n[n.PUT=1]="PUT",n[n.DELETE=2]="DELETE",n[n.CLEAR=3]="CLEAR",n))(Ba||{});T.util.setEnumType(Ba,"yorkie.v1.PresenceChange.ChangeType",[{no:0,name:"CHANGE_TYPE_UNSPECIFIED"},{no:1,name:"CHANGE_TYPE_PUT"},{no:2,name:"CHANGE_TYPE_DELETE"},{no:3,name:"CHANGE_TYPE_CLEAR"}]);var Bn;let qd=(Bn=class extends mt{constructor(e){super();y(this,"data",{});T.util.initPartial(e,this)}static fromBinary(e,i){return new Bn().fromBinary(e,i)}static fromJson(e,i){return new Bn().fromJson(e,i)}static fromJsonString(e,i){return new Bn().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Bn,e,i)}},y(Bn,"runtime",T),y(Bn,"typeName","yorkie.v1.Presence"),y(Bn,"fields",T.util.newFieldList(()=>[{no:1,name:"data",kind:"map",K:9,V:{kind:"scalar",T:9}}])),Bn);var zn;let C1=(zn=class extends mt{constructor(e){super();y(this,"serverSeq",ie.zero);y(this,"clientSeq",0);T.util.initPartial(e,this)}static fromBinary(e,i){return new zn().fromBinary(e,i)}static fromJson(e,i){return new zn().fromJson(e,i)}static fromJsonString(e,i){return new zn().fromJsonString(e,i)}static equals(e,i){return T.util.equals(zn,e,i)}},y(zn,"runtime",T),y(zn,"typeName","yorkie.v1.Checkpoint"),y(zn,"fields",T.util.newFieldList(()=>[{no:1,name:"server_seq",kind:"scalar",T:3},{no:2,name:"client_seq",kind:"scalar",T:13}])),zn);const ki=class ki extends mt{constructor(e){super();y(this,"createdAt");y(this,"offset",0);y(this,"relativeOffset",0);T.util.initPartial(e,this)}static fromBinary(e,i){return new ki().fromBinary(e,i)}static fromJson(e,i){return new ki().fromJson(e,i)}static fromJsonString(e,i){return new ki().fromJsonString(e,i)}static equals(e,i){return T.util.equals(ki,e,i)}};y(ki,"runtime",T),y(ki,"typeName","yorkie.v1.TextNodePos"),y(ki,"fields",T.util.newFieldList(()=>[{no:1,name:"created_at",kind:"message",T:wt},{no:2,name:"offset",kind:"scalar",T:5},{no:3,name:"relative_offset",kind:"scalar",T:5}]));let za=ki;var Ln;let wt=(Ln=class extends mt{constructor(e){super();y(this,"lamport",ie.zero);y(this,"delimiter",0);y(this,"actorId",new Uint8Array(0));T.util.initPartial(e,this)}static fromBinary(e,i){return new Ln().fromBinary(e,i)}static fromJson(e,i){return new Ln().fromJson(e,i)}static fromJsonString(e,i){return new Ln().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Ln,e,i)}},y(Ln,"runtime",T),y(Ln,"typeName","yorkie.v1.TimeTicket"),y(Ln,"fields",T.util.newFieldList(()=>[{no:1,name:"lamport",kind:"scalar",T:3},{no:2,name:"delimiter",kind:"scalar",T:13},{no:3,name:"actor_id",kind:"scalar",T:12}])),Ln);const Oi=class Oi extends mt{constructor(e){super();y(this,"topic","");y(this,"payload",new Uint8Array(0));T.util.initPartial(e,this)}static fromBinary(e,i){return new Oi().fromBinary(e,i)}static fromJson(e,i){return new Oi().fromJson(e,i)}static fromJsonString(e,i){return new Oi().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Oi,e,i)}};y(Oi,"runtime",T),y(Oi,"typeName","yorkie.v1.DocEventBody"),y(Oi,"fields",T.util.newFieldList(()=>[{no:1,name:"topic",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:12}]));let Xm=Oi;const Ii=class Ii extends mt{constructor(e){super();y(this,"type",0);y(this,"publisher","");y(this,"body");T.util.initPartial(e,this)}static fromBinary(e,i){return new Ii().fromBinary(e,i)}static fromJson(e,i){return new Ii().fromJson(e,i)}static fromJsonString(e,i){return new Ii().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Ii,e,i)}};y(Ii,"runtime",T),y(Ii,"typeName","yorkie.v1.DocEvent"),y(Ii,"fields",T.util.newFieldList(()=>[{no:1,name:"type",kind:"enum",T:T.getEnumType(Oa)},{no:2,name:"publisher",kind:"scalar",T:9},{no:3,name:"body",kind:"message",T:Xm}]));let Km=Ii;const Ri=class Ri extends mt{constructor(e){super();y(this,"data",0);y(this,"meta",0);T.util.initPartial(e,this)}static fromBinary(e,i){return new Ri().fromBinary(e,i)}static fromJson(e,i){return new Ri().fromJson(e,i)}static fromJsonString(e,i){return new Ri().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Ri,e,i)}};y(Ri,"runtime",T),y(Ri,"typeName","yorkie.v1.DataSize"),y(Ri,"fields",T.util.newFieldList(()=>[{no:1,name:"data",kind:"scalar",T:5},{no:2,name:"meta",kind:"scalar",T:5}]));let vd=Ri;const Mi=class Mi extends mt{constructor(e){super();y(this,"live");y(this,"gc");T.util.initPartial(e,this)}static fromBinary(e,i){return new Mi().fromBinary(e,i)}static fromJson(e,i){return new Mi().fromJson(e,i)}static fromJsonString(e,i){return new Mi().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Mi,e,i)}};y(Mi,"runtime",T),y(Mi,"typeName","yorkie.v1.DocSize"),y(Mi,"fields",T.util.newFieldList(()=>[{no:1,name:"live",kind:"message",T:vd},{no:2,name:"gc",kind:"message",T:vd}]));let Fm=Mi;const Bi=class Bi extends mt{constructor(e){super();y(this,"id","");y(this,"name","");y(this,"version",0);y(this,"body","");y(this,"rules",[]);y(this,"createdAt");T.util.initPartial(e,this)}static fromBinary(e,i){return new Bi().fromBinary(e,i)}static fromJson(e,i){return new Bi().fromJson(e,i)}static fromJsonString(e,i){return new Bi().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Bi,e,i)}};y(Bi,"runtime",T),y(Bi,"typeName","yorkie.v1.Schema"),y(Bi,"fields",T.util.newFieldList(()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"version",kind:"scalar",T:5},{no:4,name:"body",kind:"scalar",T:9},{no:5,name:"rules",kind:"message",T:wd,repeated:!0},{no:6,name:"created_at",kind:"message",T:Le}]));let MS=Bi;const zi=class zi extends mt{constructor(e){super();y(this,"path","");y(this,"type","");T.util.initPartial(e,this)}static fromBinary(e,i){return new zi().fromBinary(e,i)}static fromJson(e,i){return new zi().fromJson(e,i)}static fromJsonString(e,i){return new zi().fromJsonString(e,i)}static equals(e,i){return T.util.equals(zi,e,i)}};y(zi,"runtime",T),y(zi,"typeName","yorkie.v1.Rule"),y(zi,"fields",T.util.newFieldList(()=>[{no:1,name:"path",kind:"scalar",T:9},{no:2,name:"type",kind:"scalar",T:9}]));let wd=zi;const Li=class Li extends mt{constructor(e){super();y(this,"clientKey","");y(this,"metadata",{});T.util.initPartial(e,this)}static fromBinary(e,i){return new Li().fromBinary(e,i)}static fromJson(e,i){return new Li().fromJson(e,i)}static fromJsonString(e,i){return new Li().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Li,e,i)}};y(Li,"runtime",T),y(Li,"typeName","yorkie.v1.ActivateClientRequest"),y(Li,"fields",T.util.newFieldList(()=>[{no:1,name:"client_key",kind:"scalar",T:9},{no:2,name:"metadata",kind:"map",K:9,V:{kind:"scalar",T:9}}]));let Zm=Li;const _i=class _i extends mt{constructor(e){super();y(this,"clientId","");T.util.initPartial(e,this)}static fromBinary(e,i){return new _i().fromBinary(e,i)}static fromJson(e,i){return new _i().fromJson(e,i)}static fromJsonString(e,i){return new _i().fromJsonString(e,i)}static equals(e,i){return T.util.equals(_i,e,i)}};y(_i,"runtime",T),y(_i,"typeName","yorkie.v1.ActivateClientResponse"),y(_i,"fields",T.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9}]));let Qm=_i;const Ui=class Ui extends mt{constructor(e){super();y(this,"clientId","");T.util.initPartial(e,this)}static fromBinary(e,i){return new Ui().fromBinary(e,i)}static fromJson(e,i){return new Ui().fromJson(e,i)}static fromJsonString(e,i){return new Ui().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Ui,e,i)}};y(Ui,"runtime",T),y(Ui,"typeName","yorkie.v1.DeactivateClientRequest"),y(Ui,"fields",T.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9}]));let Wm=Ui;const qi=class qi extends mt{constructor(t){super(),T.util.initPartial(t,this)}static fromBinary(t,e){return new qi().fromBinary(t,e)}static fromJson(t,e){return new qi().fromJson(t,e)}static fromJsonString(t,e){return new qi().fromJsonString(t,e)}static equals(t,e){return T.util.equals(qi,t,e)}};y(qi,"runtime",T),y(qi,"typeName","yorkie.v1.DeactivateClientResponse"),y(qi,"fields",T.util.newFieldList(()=>[]));let tp=qi;const Pi=class Pi extends mt{constructor(e){super();y(this,"clientId","");y(this,"changePack");y(this,"schemaKey","");T.util.initPartial(e,this)}static fromBinary(e,i){return new Pi().fromBinary(e,i)}static fromJson(e,i){return new Pi().fromJson(e,i)}static fromJsonString(e,i){return new Pi().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Pi,e,i)}};y(Pi,"runtime",T),y(Pi,"typeName","yorkie.v1.AttachDocumentRequest"),y(Pi,"fields",T.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"change_pack",kind:"message",T:fs},{no:3,name:"schema_key",kind:"scalar",T:9}]));let ep=Pi;const Ji=class Ji extends mt{constructor(e){super();y(this,"documentId","");y(this,"changePack");y(this,"maxSizePerDocument",0);y(this,"schemaRules",[]);T.util.initPartial(e,this)}static fromBinary(e,i){return new Ji().fromBinary(e,i)}static fromJson(e,i){return new Ji().fromJson(e,i)}static fromJsonString(e,i){return new Ji().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Ji,e,i)}};y(Ji,"runtime",T),y(Ji,"typeName","yorkie.v1.AttachDocumentResponse"),y(Ji,"fields",T.util.newFieldList(()=>[{no:1,name:"document_id",kind:"scalar",T:9},{no:2,name:"change_pack",kind:"message",T:fs},{no:3,name:"max_size_per_document",kind:"scalar",T:5},{no:4,name:"schema_rules",kind:"message",T:wd,repeated:!0}]));let np=Ji;const $i=class $i extends mt{constructor(e){super();y(this,"clientId","");y(this,"documentId","");y(this,"changePack");y(this,"removeIfNotAttached",!1);T.util.initPartial(e,this)}static fromBinary(e,i){return new $i().fromBinary(e,i)}static fromJson(e,i){return new $i().fromJson(e,i)}static fromJsonString(e,i){return new $i().fromJsonString(e,i)}static equals(e,i){return T.util.equals($i,e,i)}};y($i,"runtime",T),y($i,"typeName","yorkie.v1.DetachDocumentRequest"),y($i,"fields",T.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:fs},{no:4,name:"remove_if_not_attached",kind:"scalar",T:8}]));let rp=$i;const Hi=class Hi extends mt{constructor(e){super();y(this,"changePack");T.util.initPartial(e,this)}static fromBinary(e,i){return new Hi().fromBinary(e,i)}static fromJson(e,i){return new Hi().fromJson(e,i)}static fromJsonString(e,i){return new Hi().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Hi,e,i)}};y(Hi,"runtime",T),y(Hi,"typeName","yorkie.v1.DetachDocumentResponse"),y(Hi,"fields",T.util.newFieldList(()=>[{no:2,name:"change_pack",kind:"message",T:fs}]));let ip=Hi;const Vi=class Vi extends mt{constructor(e){super();y(this,"clientId","");y(this,"documentId","");T.util.initPartial(e,this)}static fromBinary(e,i){return new Vi().fromBinary(e,i)}static fromJson(e,i){return new Vi().fromJson(e,i)}static fromJsonString(e,i){return new Vi().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Vi,e,i)}};y(Vi,"runtime",T),y(Vi,"typeName","yorkie.v1.WatchDocumentRequest"),y(Vi,"fields",T.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9}]));let sp=Vi;const ji=class ji extends mt{constructor(e){super();y(this,"body",{case:void 0});T.util.initPartial(e,this)}static fromBinary(e,i){return new ji().fromBinary(e,i)}static fromJson(e,i){return new ji().fromJson(e,i)}static fromJsonString(e,i){return new ji().fromJsonString(e,i)}static equals(e,i){return T.util.equals(ji,e,i)}};y(ji,"runtime",T),y(ji,"typeName","yorkie.v1.WatchDocumentResponse"),y(ji,"fields",T.util.newFieldList(()=>[{no:1,name:"initialization",kind:"message",T:op,oneof:"body"},{no:2,name:"event",kind:"message",T:Km,oneof:"body"}]));let ap=ji;const Yi=class Yi extends mt{constructor(e){super();y(this,"clientIds",[]);T.util.initPartial(e,this)}static fromBinary(e,i){return new Yi().fromBinary(e,i)}static fromJson(e,i){return new Yi().fromJson(e,i)}static fromJsonString(e,i){return new Yi().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Yi,e,i)}};y(Yi,"runtime",T),y(Yi,"typeName","yorkie.v1.WatchDocumentResponse.Initialization"),y(Yi,"fields",T.util.newFieldList(()=>[{no:1,name:"client_ids",kind:"scalar",T:9,repeated:!0}]));let op=Yi;const Gi=class Gi extends mt{constructor(e){super();y(this,"clientId","");y(this,"documentId","");y(this,"changePack");T.util.initPartial(e,this)}static fromBinary(e,i){return new Gi().fromBinary(e,i)}static fromJson(e,i){return new Gi().fromJson(e,i)}static fromJsonString(e,i){return new Gi().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Gi,e,i)}};y(Gi,"runtime",T),y(Gi,"typeName","yorkie.v1.RemoveDocumentRequest"),y(Gi,"fields",T.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:fs}]));let lp=Gi;const Xi=class Xi extends mt{constructor(e){super();y(this,"changePack");T.util.initPartial(e,this)}static fromBinary(e,i){return new Xi().fromBinary(e,i)}static fromJson(e,i){return new Xi().fromJson(e,i)}static fromJsonString(e,i){return new Xi().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Xi,e,i)}};y(Xi,"runtime",T),y(Xi,"typeName","yorkie.v1.RemoveDocumentResponse"),y(Xi,"fields",T.util.newFieldList(()=>[{no:1,name:"change_pack",kind:"message",T:fs}]));let up=Xi;const Ki=class Ki extends mt{constructor(e){super();y(this,"clientId","");y(this,"documentId","");y(this,"changePack");y(this,"pushOnly",!1);T.util.initPartial(e,this)}static fromBinary(e,i){return new Ki().fromBinary(e,i)}static fromJson(e,i){return new Ki().fromJson(e,i)}static fromJsonString(e,i){return new Ki().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Ki,e,i)}};y(Ki,"runtime",T),y(Ki,"typeName","yorkie.v1.PushPullChangesRequest"),y(Ki,"fields",T.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:fs},{no:4,name:"push_only",kind:"scalar",T:8}]));let cp=Ki;const Fi=class Fi extends mt{constructor(e){super();y(this,"changePack");T.util.initPartial(e,this)}static fromBinary(e,i){return new Fi().fromBinary(e,i)}static fromJson(e,i){return new Fi().fromJson(e,i)}static fromJsonString(e,i){return new Fi().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Fi,e,i)}};y(Fi,"runtime",T),y(Fi,"typeName","yorkie.v1.PushPullChangesResponse"),y(Fi,"fields",T.util.newFieldList(()=>[{no:1,name:"change_pack",kind:"message",T:fs}]));let fp=Fi;const Zi=class Zi extends mt{constructor(e){super();y(this,"clientId","");y(this,"documentId","");y(this,"topic","");y(this,"payload",new Uint8Array(0));T.util.initPartial(e,this)}static fromBinary(e,i){return new Zi().fromBinary(e,i)}static fromJson(e,i){return new Zi().fromJson(e,i)}static fromJsonString(e,i){return new Zi().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Zi,e,i)}};y(Zi,"runtime",T),y(Zi,"typeName","yorkie.v1.BroadcastRequest"),y(Zi,"fields",T.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"topic",kind:"scalar",T:9},{no:4,name:"payload",kind:"scalar",T:12}]));let dp=Zi;const Qi=class Qi extends mt{constructor(t){super(),T.util.initPartial(t,this)}static fromBinary(t,e){return new Qi().fromBinary(t,e)}static fromJson(t,e){return new Qi().fromJson(t,e)}static fromJsonString(t,e){return new Qi().fromJsonString(t,e)}static equals(t,e){return T.util.equals(Qi,t,e)}};y(Qi,"runtime",T),y(Qi,"typeName","yorkie.v1.BroadcastResponse"),y(Qi,"fields",T.util.newFieldList(()=>[]));let hp=Qi;const I2={typeName:"yorkie.v1.YorkieService",methods:{activateClient:{name:"ActivateClient",I:Zm,O:Qm,kind:Ye.Unary},deactivateClient:{name:"DeactivateClient",I:Wm,O:tp,kind:Ye.Unary},attachDocument:{name:"AttachDocument",I:ep,O:np,kind:Ye.Unary},detachDocument:{name:"DetachDocument",I:rp,O:ip,kind:Ye.Unary},removeDocument:{name:"RemoveDocument",I:lp,O:up,kind:Ye.Unary},pushPullChanges:{name:"PushPullChanges",I:cp,O:fp,kind:Ye.Unary},watchDocument:{name:"WatchDocument",I:sp,O:ap,kind:Ye.ServerStreaming},broadcast:{name:"Broadcast",I:dp,O:hp,kind:Ye.Unary}}},R2=T.makeMessageType("google.rpc.ErrorInfo",()=>[{no:1,name:"reason",kind:"scalar",T:9},{no:2,name:"domain",kind:"scalar",T:9},{no:3,name:"metadata",kind:"map",K:9,V:{kind:"scalar",T:9}}]);T.makeMessageType("google.rpc.RetryInfo",()=>[{no:1,name:"retry_delay",kind:"message",T:ts}]);T.makeMessageType("google.rpc.DebugInfo",()=>[{no:1,name:"stack_entries",kind:"scalar",T:9,repeated:!0},{no:2,name:"detail",kind:"scalar",T:9}]);T.makeMessageType("google.rpc.QuotaFailure",()=>[{no:1,name:"violations",kind:"message",T:M2,repeated:!0}]);const M2=T.makeMessageType("google.rpc.QuotaFailure.Violation",()=>[{no:1,name:"subject",kind:"scalar",T:9},{no:2,name:"description",kind:"scalar",T:9}],{localName:"QuotaFailure_Violation"});T.makeMessageType("google.rpc.PreconditionFailure",()=>[{no:1,name:"violations",kind:"message",T:B2,repeated:!0}]);const B2=T.makeMessageType("google.rpc.PreconditionFailure.Violation",()=>[{no:1,name:"type",kind:"scalar",T:9},{no:2,name:"subject",kind:"scalar",T:9},{no:3,name:"description",kind:"scalar",T:9}],{localName:"PreconditionFailure_Violation"});T.makeMessageType("google.rpc.BadRequest",()=>[{no:1,name:"field_violations",kind:"message",T:z2,repeated:!0}]);const z2=T.makeMessageType("google.rpc.BadRequest.FieldViolation",()=>[{no:1,name:"field",kind:"scalar",T:9},{no:2,name:"description",kind:"scalar",T:9},{no:3,name:"reason",kind:"scalar",T:9},{no:4,name:"localized_message",kind:"message",T:_2}],{localName:"BadRequest_FieldViolation"});T.makeMessageType("google.rpc.RequestInfo",()=>[{no:1,name:"request_id",kind:"scalar",T:9},{no:2,name:"serving_data",kind:"scalar",T:9}]);T.makeMessageType("google.rpc.ResourceInfo",()=>[{no:1,name:"resource_type",kind:"scalar",T:9},{no:2,name:"resource_name",kind:"scalar",T:9},{no:3,name:"owner",kind:"scalar",T:9},{no:4,name:"description",kind:"scalar",T:9}]);T.makeMessageType("google.rpc.Help",()=>[{no:1,name:"links",kind:"message",T:L2,repeated:!0}]);const L2=T.makeMessageType("google.rpc.Help.Link",()=>[{no:1,name:"description",kind:"scalar",T:9},{no:2,name:"url",kind:"scalar",T:9}],{localName:"Help_Link"}),_2=T.makeMessageType("google.rpc.LocalizedMessage",()=>[{no:1,name:"locale",kind:"scalar",T:9},{no:2,name:"message",kind:"scalar",T:9}]);var V=(n=>(n.Ok="ok",n.ErrClientNotActivated="ErrClientNotActivated",n.ErrClientNotFound="ErrClientNotFound",n.ErrUnimplemented="ErrUnimplemented",n.ErrInvalidType="ErrInvalidType",n.ErrDummy="ErrDummy",n.ErrDocumentNotAttached="ErrDocumentNotAttached",n.ErrDocumentNotDetached="ErrDocumentNotDetached",n.ErrDocumentRemoved="ErrDocumentRemoved",n.ErrDocumentSizeExceedsLimit="ErrDocumentSizeExceedsLimit",n.ErrDocumentSchemaValidationFailed="ErrDocumentSchemaValidationFailed",n.ErrInvalidObjectKey="ErrInvalidObjectKey",n.ErrInvalidArgument="ErrInvalidArgument",n.ErrNotInitialized="ErrNotInitialized",n.ErrNotReady="ErrNotReady",n.ErrRefused="ErrRefused",n.ErrContextNotProvided="ErrContextNotProvided",n.ErrPermissionDenied="ErrPermissionDenied",n.ErrUnauthenticated="ErrUnauthenticated",n.ErrTooManySubscribers="ErrTooManySubscribers",n.ErrTooManyAttachments="ErrTooManyAttachments",n))(V||{});class j extends Error{constructor(e,i){super(i);y(this,"name","YorkieError");y(this,"stack");this.code=e,this.message=i,this.toString=()=>`[code=${this.code}]: ${this.message}`}}var Er=(n=>(n.Put="put",n.Clear="clear",n))(Er||{});const Pd="000000000000000000000000",br=24;class qn{constructor(t,e,i){y(this,"lamport");y(this,"delimiter");y(this,"actorID");this.lamport=t,this.delimiter=e,this.actorID=i}static of(t,e,i){return new qn(t,e,i)}static fromStruct(t){return qn.of(BigInt(t.lamport),t.delimiter,t.actorID)}toIDString(){return`${this.lamport.toString()}:${this.actorID}:${this.delimiter}`}toStruct(){return{lamport:this.getLamportAsString(),delimiter:this.getDelimiter(),actorID:this.getActorID()}}toTestString(){return`${this.lamport.toString()}:${this.actorID.slice(-2)}:${this.delimiter}`}setActor(t){return new qn(this.lamport,this.delimiter,t)}getLamportAsString(){return this.lamport.toString()}getLamport(){return this.lamport}getDelimiter(){return this.delimiter}getActorID(){return this.actorID}after(t){return this.compare(t)>0}equals(t){return this.compare(t)===0}compare(t){if(this.lamport>t.lamport)return 1;if(t.lamport>this.lamport)return-1;const e=this.actorID.localeCompare(t.actorID);return e!==0?e:this.delimiter>t.delimiter?1:t.delimiter>this.delimiter?-1:0}}const gp=0n,D1=0,bu=9223372036854775807n,Yo=new qn(gp,D1,Pd);function Sr(n){return n.replace(/["'\\\n\r\f\b\t\u2028\u2029]/g,function(t){switch(t){case'"':case"\\":return"\\"+t;case`
`:return"\\n";case"\r":return"\\r";case"\f":return"\\f";case"\b":return"\\b";case"	":return"\\t";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:return t}})}class Xu{constructor(t){y(this,"createdAt");y(this,"movedAt");y(this,"removedAt");this.createdAt=t}getCreatedAt(){return this.createdAt}getID(){return this.createdAt}getMovedAt(){return this.movedAt}getRemovedAt(){return this.removedAt}getPositionedAt(){return this.movedAt?this.movedAt:this.createdAt}setMovedAt(t){return!this.movedAt||t&&t.after(this.movedAt)?(this.movedAt=t,!0):!1}setRemovedAt(t){this.removedAt=t}remove(t){return t&&t.after(this.createdAt)&&(!this.removedAt||t.after(this.removedAt))?(this.removedAt=t,!0):!1}isRemoved(){return!!this.removedAt}getMetaUsage(){let t=0;return this.getCreatedAt()&&(t+=br),this.getMovedAt()&&(t+=br),this.getRemovedAt()&&(t+=br),t}}class Qs extends Xu{constructor(t){super(t)}}class Lp{constructor(t,e){y(this,"strKey");y(this,"value");this.strKey=t,this.value=e}static of(t,e){return new Lp(t,e)}isRemoved(){return this.value.isRemoved()}getStrKey(){return this.strKey}getValue(){return this.value}remove(t){return this.value.remove(t)}}class Iu{constructor(){y(this,"nodeMapByKey");y(this,"nodeMapByCreatedAt");this.nodeMapByKey=new Map,this.nodeMapByCreatedAt=new Map}static create(){return new Iu}set(t,e,i){let a;const l=this.nodeMapByKey.get(t);l!=null&&!l.isRemoved()&&l.remove(i)&&(a=l.getValue());const c=Lp.of(t,e);return this.nodeMapByCreatedAt.set(e.getCreatedAt().toIDString(),c),(l==null||i.after(l.getValue().getPositionedAt()))&&(this.nodeMapByKey.set(t,c),e.setMovedAt(i)),a}delete(t,e){if(!this.nodeMapByCreatedAt.has(t.toIDString()))throw new j(V.ErrInvalidArgument,`fail to find ${t.toIDString()}`);const i=this.nodeMapByCreatedAt.get(t.toIDString());return i.remove(e),i.getValue()}subPathOf(t){const e=this.nodeMapByCreatedAt.get(t.toIDString());if(e)return e.getStrKey()}purge(t){const e=this.nodeMapByCreatedAt.get(t.getCreatedAt().toIDString());if(!e)throw new j(V.ErrInvalidArgument,`fail to find ${t.getCreatedAt().toIDString()}`);const i=this.nodeMapByKey.get(e.getStrKey());e===i&&this.nodeMapByKey.delete(i.getStrKey()),this.nodeMapByCreatedAt.delete(e.getValue().getCreatedAt().toIDString())}deleteByKey(t,e){const i=this.nodeMapByKey.get(t);if(i!=null&&i.remove(e))return i.getValue()}has(t){const e=this.nodeMapByKey.get(t);return e==null?!1:!e.isRemoved()}getByID(t){return this.nodeMapByCreatedAt.get(t.toIDString())}get(t){const e=this.nodeMapByKey.get(t);if(!(!e||e.isRemoved()))return e}*[Symbol.iterator](){for(const[,t]of this.nodeMapByKey)yield t}}class $e extends Qs{constructor(e,i){super(e);y(this,"memberNodes");this.memberNodes=i}static create(e,i){if(!i)return new $e(e,Iu.create());const a=Iu.create();for(const[l,c]of Object.entries(i))a.set(l,c.deepcopy(),c.getCreatedAt());return new $e(e,a)}subPathOf(e){return this.memberNodes.subPathOf(e)}purge(e){this.memberNodes.purge(e)}set(e,i,a){return this.memberNodes.set(e,i,a)}delete(e,i){return this.memberNodes.delete(e,i)}deleteByKey(e,i){return this.memberNodes.deleteByKey(e,i)}get(e){const i=this.memberNodes.get(e);return i==null?void 0:i.getValue()}getByID(e){const i=this.memberNodes.getByID(e);return i==null?void 0:i.getValue()}has(e){return this.memberNodes.has(e)}getDataSize(){return{data:0,meta:this.getMetaUsage()}}toJSON(){const e=[];for(const[i,a]of this)e.push(`"${Sr(i)}":${a.toJSON()}`);return`{${e.join(",")}}`}toJS(){return JSON.parse(this.toJSON())}toJSForTest(){const e={};for(const[i,a]of this){const{createdAt:l,value:c,type:d}=a.toJSForTest();e[i]={key:i,createdAt:l,value:c,type:d}}return{createdAt:this.getCreatedAt().toTestString(),value:e,type:"YORKIE_OBJECT"}}getKeys(){const e=Array();for(const[i]of this)e.push(i);return e}toSortedJSON(){var a;const e=Array();for(const[l]of this)e.push(l);const i=[];for(const l of e.sort()){const c=(a=this.memberNodes.get(l))==null?void 0:a.getValue();i.push(`"${Sr(l)}":${c.toSortedJSON()}`)}return`{${i.join(",")}}`}getRHT(){return this.memberNodes}deepcopy(){const e=$e.create(this.getCreatedAt());for(const i of this.memberNodes)e.memberNodes.set(i.getStrKey(),i.getValue().deepcopy(),this.getPositionedAt());return e.remove(this.getRemovedAt()),e}getDescendants(e){for(const i of this.memberNodes){const a=i.getValue();if(e(a,this))return;a instanceof Qs&&a.getDescendants(e)}}*[Symbol.iterator](){const e=new Set;for(const i of this.memberNodes)e.has(i.getStrKey())||(e.add(i.getStrKey()),i.isRemoved()||(yield[i.getStrKey(),i.getValue()]))}}var ee=(n=>(n.Local="local",n.Remote="remote",n.UndoRedo="undoredo",n))(ee||{});class Pn{constructor(t,e){y(this,"parentCreatedAt");y(this,"executedAt");this.parentCreatedAt=t,this.executedAt=e}getParentCreatedAt(){return this.parentCreatedAt}getExecutedAt(){if(!this.executedAt)throw new j(V.ErrNotReady,"executedAt is not set yet");return this.executedAt}setActor(t){this.executedAt&&(this.executedAt=this.executedAt.setActor(t))}setExecutedAt(t){this.executedAt=t}}class k1{constructor(t){y(this,"value");y(this,"left");y(this,"right");y(this,"parent");y(this,"weight");this.value=t,this.initWeight()}getNodeString(){return`${this.weight}${this.value}`}getValue(){return this.value}getLeftWeight(){return this.hasLeft()?this.left.getWeight():0}getRightWeight(){return this.hasRight()?this.right.getWeight():0}getWeight(){return this.weight}getLeft(){return this.left}getRight(){return this.right}getParent(){return this.parent}hasLeft(){return!!this.left}hasRight(){return!!this.right}hasParent(){return!!this.parent}setLeft(t){this.left=t}setRight(t){this.right=t}setParent(t){this.parent=t}unlink(){this.parent=void 0,this.right=void 0,this.left=void 0}hasLinks(){return this.hasParent()||this.hasLeft()||this.hasRight()}increaseWeight(t){this.weight+=t}initWeight(){this.weight=this.getLength()}}class Ru{constructor(t){y(this,"root");this.root=t}get length(){return this.root?this.root.getWeight():0}find(t){if(!this.root||t<0)return[void 0,0];let e=this.root;for(;;)if(e.hasLeft()&&t<=e.getLeftWeight())e=e.getLeft();else if(e.hasRight()&&e.getLeftWeight()+e.getLength()<t)t-=e.getLeftWeight()+e.getLength(),e=e.getRight();else{t-=e.getLeftWeight();break}if(t>e.getLength())throw new j(V.ErrInvalidArgument,`out of index range: pos: ${t} > node.length: ${e.getLength()}`);return this.splayNode(e),[e,t]}indexOf(t){return!t||t!==this.root&&!t.hasLinks()?-1:(this.splayNode(t),this.root.getLeftWeight())}getRoot(){return this.root}insert(t){return this.insertAfter(this.root,t)}insertAfter(t,e){return t?(this.splayNode(t),this.root=e,e.setRight(t.getRight()),t.hasRight()&&t.getRight().setParent(e),e.setLeft(t),t.setParent(e),t.setRight(),this.updateWeight(t),this.updateWeight(e),e):(this.root=e,e)}updateWeight(t){t.initWeight(),t.hasLeft()&&t.increaseWeight(t.getLeftWeight()),t.hasRight()&&t.increaseWeight(t.getRightWeight())}updateTreeWeight(t){for(;t;)this.updateWeight(t),t=t.getParent()}splayNode(t){if(t)for(;;)if(this.isLeftChild(t.getParent())&&this.isRightChild(t))this.rotateLeft(t),this.rotateRight(t);else if(this.isRightChild(t.getParent())&&this.isLeftChild(t))this.rotateRight(t),this.rotateLeft(t);else if(this.isLeftChild(t.getParent())&&this.isLeftChild(t))this.rotateRight(t.getParent()),this.rotateRight(t);else if(this.isRightChild(t.getParent())&&this.isRightChild(t))this.rotateLeft(t.getParent()),this.rotateLeft(t);else{this.isLeftChild(t)?this.rotateRight(t):this.isRightChild(t)&&this.rotateLeft(t),this.updateWeight(t);return}}delete(t){this.splayNode(t);const e=new Ru(t.getLeft());e.root&&e.root.setParent();const i=new Ru(t.getRight());if(i.root&&i.root.setParent(),e.root){const a=e.getRightmost();e.splayNode(a),e.root.setRight(i.root),i.root&&i.root.setParent(e.root),this.root=e.root}else this.root=i.root;t.unlink(),this.root&&this.updateWeight(this.root)}deleteRange(t,e){if(!e){this.splayNode(t),this.cutOffRight(t);return}this.splayNode(t),this.splayNode(e),e.getLeft()!=t&&this.rotateRight(t),this.cutOffRight(t)}cutOffRight(t){const e=[];this.traversePostorder(t.getRight(),e);for(const i of e)i.initWeight();this.updateTreeWeight(t)}toTestString(){const t=[];return this.traverseInorder(this.root,t),t.map(e=>`[${e.getWeight()},${e.getLength()}]${e.getValue()||""}`).join("")}checkWeight(){const t=[];this.traverseInorder(this.root,t);for(const e of t)if(e.getWeight()!=e.getLength()+e.getLeftWeight()+e.getRightWeight())return!1;return!0}getRightmost(){let t=this.root;for(;t.hasRight();)t=t.getRight();return t}traverseInorder(t,e){t&&(this.traverseInorder(t.getLeft(),e),e.push(t),this.traverseInorder(t.getRight(),e))}traversePostorder(t,e){t&&(this.traversePostorder(t.getLeft(),e),this.traversePostorder(t.getRight(),e),e.push(t))}rotateLeft(t){const e=t.getParent();e.hasParent()?e===e.getParent().getLeft()?e.getParent().setLeft(t):e.getParent().setRight(t):this.root=t,t.setParent(e.getParent()),e.setRight(t.getLeft()),e.hasRight()&&e.getRight().setParent(e),t.setLeft(e),t.getLeft().setParent(t),this.updateWeight(e),this.updateWeight(t)}rotateRight(t){const e=t.getParent();e.hasParent()?e===e.getParent().getLeft()?e.getParent().setLeft(t):e.getParent().setRight(t):this.root=t,t.setParent(e.getParent()),e.setLeft(t.getRight()),e.hasLeft()&&e.getLeft().setParent(e),t.setRight(e),t.getRight().setParent(t),this.updateWeight(e),this.updateWeight(t)}isLeftChild(t){return t&&t.hasParent()?t.getParent().getLeft()===t:!1}isRightChild(t){return t&&t.hasParent()?t.getParent().getRight()===t:!1}}/**
 * @license
 * Copyright 2009 The Closure Library Authors
 * Copyright 2020 Daniel Wirtz / The long.js Authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * SPDX-License-Identifier: Apache-2.0
 */var _n=null;try{_n=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function Ut(n,t,e){this.low=n|0,this.high=t|0,this.unsigned=!!e}Ut.prototype.__isLong__;Object.defineProperty(Ut.prototype,"__isLong__",{value:!0});function Ve(n){return(n&&n.__isLong__)===!0}function BS(n){var t=Math.clz32(n&-n);return n?31-t:t}Ut.isLong=Ve;var zS={},LS={};function qa(n,t){var e,i,a;return t?(n>>>=0,(a=0<=n&&n<256)&&(i=LS[n],i)?i:(e=Jt(n,0,!0),a&&(LS[n]=e),e)):(n|=0,(a=-128<=n&&n<128)&&(i=zS[n],i)?i:(e=Jt(n,n<0?-1:0,!1),a&&(zS[n]=e),e))}Ut.fromInt=qa;function Un(n,t){if(isNaN(n))return t?ns:Qn;if(t){if(n<0)return ns;if(n>=O1)return M1}else{if(n<=-9223372036854776e3)return en;if(n+1>=q2)return R1}return n<0?Un(-n,t).neg():Jt(n%Go|0,n/Go|0,t)}Ut.fromNumber=Un;function Jt(n,t,e){return new Ut(n,t,e)}Ut.fromBits=Jt;var Sd=Math.pow;function _p(n,t,e){if(n.length===0)throw Error("empty string");if(typeof t=="number"?(e=t,t=!1):t=!!t,n==="NaN"||n==="Infinity"||n==="+Infinity"||n==="-Infinity")return t?ns:Qn;if(e=e||10,e<2||36<e)throw RangeError("radix");var i;if((i=n.indexOf("-"))>0)throw Error("interior hyphen");if(i===0)return _p(n.substring(1),t,e).neg();for(var a=Un(Sd(e,8)),l=Qn,c=0;c<n.length;c+=8){var d=Math.min(8,n.length-c),h=parseInt(n.substring(c,c+d),e);if(d<8){var g=Un(Sd(e,d));l=l.mul(g).add(Un(h))}else l=l.mul(a),l=l.add(Un(h))}return l.unsigned=t,l}Ut.fromString=_p;function Jn(n,t){return typeof n=="number"?Un(n,t):typeof n=="string"?_p(n,t):Jt(n.low,n.high,typeof t=="boolean"?t:n.unsigned)}Ut.fromValue=Jn;var _S=65536,U2=1<<24,Go=_S*_S,O1=Go*Go,q2=O1/2,US=qa(U2),Qn=qa(0);Ut.ZERO=Qn;var ns=qa(0,!0);Ut.UZERO=ns;var Mo=qa(1);Ut.ONE=Mo;var I1=qa(1,!0);Ut.UONE=I1;var mp=qa(-1);Ut.NEG_ONE=mp;var R1=Jt(-1,2147483647,!1);Ut.MAX_VALUE=R1;var M1=Jt(-1,-1,!0);Ut.MAX_UNSIGNED_VALUE=M1;var en=Jt(0,-2147483648,!1);Ut.MIN_VALUE=en;var ht=Ut.prototype;ht.toInt=function(){return this.unsigned?this.low>>>0:this.low};ht.toNumber=function(){return this.unsigned?(this.high>>>0)*Go+(this.low>>>0):this.high*Go+(this.low>>>0)};ht.toString=function(t){if(t=t||10,t<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(en)){var e=Un(t),i=this.div(e),a=i.mul(e).sub(this);return i.toString(t)+a.toInt().toString(t)}else return"-"+this.neg().toString(t);for(var l=Un(Sd(t,6),this.unsigned),c=this,d="";;){var h=c.div(l),g=c.sub(h.mul(l)).toInt()>>>0,p=g.toString(t);if(c=h,c.isZero())return p+d;for(;p.length<6;)p="0"+p;d=""+p+d}};ht.getHighBits=function(){return this.high};ht.getHighBitsUnsigned=function(){return this.high>>>0};ht.getLowBits=function(){return this.low};ht.getLowBitsUnsigned=function(){return this.low>>>0};ht.getNumBitsAbs=function(){if(this.isNegative())return this.eq(en)?64:this.neg().getNumBitsAbs();for(var t=this.high!=0?this.high:this.low,e=31;e>0&&(t&1<<e)==0;e--);return this.high!=0?e+33:e+1};ht.isSafeInteger=function(){var t=this.high>>21;return t?this.unsigned?!1:t===-1&&!(this.low===0&&this.high===-2097152):!0};ht.isZero=function(){return this.high===0&&this.low===0};ht.eqz=ht.isZero;ht.isNegative=function(){return!this.unsigned&&this.high<0};ht.isPositive=function(){return this.unsigned||this.high>=0};ht.isOdd=function(){return(this.low&1)===1};ht.isEven=function(){return(this.low&1)===0};ht.equals=function(t){return Ve(t)||(t=Jn(t)),this.unsigned!==t.unsigned&&this.high>>>31===1&&t.high>>>31===1?!1:this.high===t.high&&this.low===t.low};ht.eq=ht.equals;ht.notEquals=function(t){return!this.eq(t)};ht.neq=ht.notEquals;ht.ne=ht.notEquals;ht.lessThan=function(t){return this.comp(t)<0};ht.lt=ht.lessThan;ht.lessThanOrEqual=function(t){return this.comp(t)<=0};ht.lte=ht.lessThanOrEqual;ht.le=ht.lessThanOrEqual;ht.greaterThan=function(t){return this.comp(t)>0};ht.gt=ht.greaterThan;ht.greaterThanOrEqual=function(t){return this.comp(t)>=0};ht.gte=ht.greaterThanOrEqual;ht.ge=ht.greaterThanOrEqual;ht.compare=function(t){if(Ve(t)||(t=Jn(t)),this.eq(t))return 0;var e=this.isNegative(),i=t.isNegative();return e&&!i?-1:!e&&i?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1};ht.comp=ht.compare;ht.negate=function(){return!this.unsigned&&this.eq(en)?en:this.not().add(Mo)};ht.neg=ht.negate;ht.add=function(t){Ve(t)||(t=Jn(t));var e=this.high>>>16,i=this.high&65535,a=this.low>>>16,l=this.low&65535,c=t.high>>>16,d=t.high&65535,h=t.low>>>16,g=t.low&65535,p=0,w=0,v=0,S=0;return S+=l+g,v+=S>>>16,S&=65535,v+=a+h,w+=v>>>16,v&=65535,w+=i+d,p+=w>>>16,w&=65535,p+=e+c,p&=65535,Jt(v<<16|S,p<<16|w,this.unsigned)};ht.subtract=function(t){return Ve(t)||(t=Jn(t)),this.add(t.neg())};ht.sub=ht.subtract;ht.multiply=function(t){if(this.isZero())return this;if(Ve(t)||(t=Jn(t)),_n){var e=_n.mul(this.low,this.high,t.low,t.high);return Jt(e,_n.get_high(),this.unsigned)}if(t.isZero())return this.unsigned?ns:Qn;if(this.eq(en))return t.isOdd()?en:Qn;if(t.eq(en))return this.isOdd()?en:Qn;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(US)&&t.lt(US))return Un(this.toNumber()*t.toNumber(),this.unsigned);var i=this.high>>>16,a=this.high&65535,l=this.low>>>16,c=this.low&65535,d=t.high>>>16,h=t.high&65535,g=t.low>>>16,p=t.low&65535,w=0,v=0,S=0,x=0;return x+=c*p,S+=x>>>16,x&=65535,S+=l*p,v+=S>>>16,S&=65535,S+=c*g,v+=S>>>16,S&=65535,v+=a*p,w+=v>>>16,v&=65535,v+=l*g,w+=v>>>16,v&=65535,v+=c*h,w+=v>>>16,v&=65535,w+=i*p+a*g+l*h+c*d,w&=65535,Jt(S<<16|x,w<<16|v,this.unsigned)};ht.mul=ht.multiply;ht.divide=function(t){if(Ve(t)||(t=Jn(t)),t.isZero())throw Error("division by zero");if(_n){if(!this.unsigned&&this.high===-2147483648&&t.low===-1&&t.high===-1)return this;var e=(this.unsigned?_n.div_u:_n.div_s)(this.low,this.high,t.low,t.high);return Jt(e,_n.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?ns:Qn;var i,a,l;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return ns;if(t.gt(this.shru(1)))return I1;l=ns}else{if(this.eq(en)){if(t.eq(Mo)||t.eq(mp))return en;if(t.eq(en))return Mo;var c=this.shr(1);return i=c.div(t).shl(1),i.eq(Qn)?t.isNegative()?Mo:mp:(a=this.sub(t.mul(i)),l=i.add(a.div(t)),l)}else if(t.eq(en))return this.unsigned?ns:Qn;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();l=Qn}for(a=this;a.gte(t);){i=Math.max(1,Math.floor(a.toNumber()/t.toNumber()));for(var d=Math.ceil(Math.log(i)/Math.LN2),h=d<=48?1:Sd(2,d-48),g=Un(i),p=g.mul(t);p.isNegative()||p.gt(a);)i-=h,g=Un(i,this.unsigned),p=g.mul(t);g.isZero()&&(g=Mo),l=l.add(g),a=a.sub(p)}return l};ht.div=ht.divide;ht.modulo=function(t){if(Ve(t)||(t=Jn(t)),_n){var e=(this.unsigned?_n.rem_u:_n.rem_s)(this.low,this.high,t.low,t.high);return Jt(e,_n.get_high(),this.unsigned)}return this.sub(this.div(t).mul(t))};ht.mod=ht.modulo;ht.rem=ht.modulo;ht.not=function(){return Jt(~this.low,~this.high,this.unsigned)};ht.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32};ht.clz=ht.countLeadingZeros;ht.countTrailingZeros=function(){return this.low?BS(this.low):BS(this.high)+32};ht.ctz=ht.countTrailingZeros;ht.and=function(t){return Ve(t)||(t=Jn(t)),Jt(this.low&t.low,this.high&t.high,this.unsigned)};ht.or=function(t){return Ve(t)||(t=Jn(t)),Jt(this.low|t.low,this.high|t.high,this.unsigned)};ht.xor=function(t){return Ve(t)||(t=Jn(t)),Jt(this.low^t.low,this.high^t.high,this.unsigned)};ht.shiftLeft=function(t){return Ve(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?Jt(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):Jt(0,this.low<<t-32,this.unsigned)};ht.shl=ht.shiftLeft;ht.shiftRight=function(t){return Ve(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?Jt(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):Jt(this.high>>t-32,this.high>=0?0:-1,this.unsigned)};ht.shr=ht.shiftRight;ht.shiftRightUnsigned=function(t){return Ve(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?Jt(this.low>>>t|this.high<<32-t,this.high>>>t,this.unsigned):t===32?Jt(this.high,0,this.unsigned):Jt(this.high>>>t-32,0,this.unsigned)};ht.shru=ht.shiftRightUnsigned;ht.shr_u=ht.shiftRightUnsigned;ht.rotateLeft=function(t){var e;return Ve(t)&&(t=t.toInt()),(t&=63)===0?this:t===32?Jt(this.high,this.low,this.unsigned):t<32?(e=32-t,Jt(this.low<<t|this.high>>>e,this.high<<t|this.low>>>e,this.unsigned)):(t-=32,e=32-t,Jt(this.high<<t|this.low>>>e,this.low<<t|this.high>>>e,this.unsigned))};ht.rotl=ht.rotateLeft;ht.rotateRight=function(t){var e;return Ve(t)&&(t=t.toInt()),(t&=63)===0?this:t===32?Jt(this.high,this.low,this.unsigned):t<32?(e=32-t,Jt(this.high<<e|this.low>>>t,this.low<<e|this.high>>>t,this.unsigned)):(t-=32,e=32-t,Jt(this.low<<e|this.high>>>t,this.high<<e|this.low>>>t,this.unsigned))};ht.rotr=ht.rotateRight;ht.toSigned=function(){return this.unsigned?Jt(this.low,this.high,!1):this};ht.toUnsigned=function(){return this.unsigned?this:Jt(this.low,this.high,!0)};ht.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()};ht.toBytesLE=function(){var t=this.high,e=this.low;return[e&255,e>>>8&255,e>>>16&255,e>>>24,t&255,t>>>8&255,t>>>16&255,t>>>24]};ht.toBytesBE=function(){var t=this.high,e=this.low;return[t>>>24,t>>>16&255,t>>>8&255,t&255,e>>>24,e>>>16&255,e>>>8&255,e&255]};Ut.fromBytes=function(t,e,i){return i?Ut.fromBytesLE(t,e):Ut.fromBytesBE(t,e)};Ut.fromBytesLE=function(t,e){return new Ut(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,e)};Ut.fromBytesBE=function(t,e){return new Ut(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],e)};typeof BigInt=="function"&&(Ut.fromBigInt=function(t,e){var i=Number(BigInt.asIntN(32,t)),a=Number(BigInt.asIntN(32,t>>BigInt(32)));return Jt(i,a,e)},Ut.fromValue=function(t,e){return typeof t=="bigint"?fromBigInt(t,e):Jn(t,e)},ht.toBigInt=function(){var t=BigInt(this.low>>>0),e=BigInt(this.unsigned?this.high>>>0:this.high);return e<<BigInt(32)|t});var ne=(n=>(n[n.Null=0]="Null",n[n.Boolean=1]="Boolean",n[n.Integer=2]="Integer",n[n.Long=3]="Long",n[n.Double=4]="Double",n[n.String=5]="String",n[n.Bytes=6]="Bytes",n[n.Date=7]="Date",n))(ne||{});class le extends Xu{constructor(e,i){super(i);y(this,"valueType");y(this,"value");this.valueType=le.getPrimitiveType(e),this.value=e===void 0?null:e}static of(e,i){return new le(e,i)}static valueFromBytes(e,i){switch(e){case 0:return null;case 1:return!!i[0];case 2:return i[0]|i[1]<<8|i[2]<<16|i[3]<<24;case 4:{const a=new DataView(i.buffer);return i.forEach(function(l,c){a.setUint8(c,l)}),a.getFloat64(0,!0)}case 5:return new TextDecoder("utf-8").decode(i);case 3:return Ut.fromBytesLE(Array.from(i));case 6:return i;case 7:return new Date(Ut.fromBytesLE(Array.from(i),!0).toNumber());default:throw new j(V.ErrUnimplemented,`unimplemented type: ${e}`)}}getValueSize(){switch(this.valueType){case 0:return 8;case 1:return 4;case 2:return 4;case 3:return 8;case 4:return 8;case 5:return this.value.length*2;case 6:return this.value.length;case 7:return 8;default:throw new j(V.ErrUnimplemented,`unimplemented type: ${this.valueType}`)}}getDataSize(){return{data:this.getValueSize(),meta:this.getMetaUsage()}}toJSON(){return this.valueType===5?`"${Sr(this.value)}"`:`${this.value}`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:this.value,type:"YORKIE_PRIMITIVE"}}deepcopy(){const e=le.of(this.value,this.getCreatedAt());return e.setMovedAt(this.getMovedAt()),e.setRemovedAt(this.getRemovedAt()),e}getType(){return this.valueType}static getPrimitiveType(e){switch(typeof e){case"undefined":return 0;case"boolean":return 1;case"number":return this.isInteger(e)?2:4;case"string":return 5;case"object":if(e===null)return 0;if(e instanceof Ut)return 3;if(e instanceof Uint8Array)return 6;if(e instanceof Date)return 7}}static isSupport(e){return le.getPrimitiveType(e)!==void 0}static isInteger(e){return e%1===0}isNumericType(){const e=this.valueType;return e===2||e===3||e===4}getValue(){return this.value}toBytes(){switch(this.valueType){case 0:return new Uint8Array;case 1:return this.value?new Uint8Array([1]):new Uint8Array([0]);case 2:{const e=this.value;return new Uint8Array([e&255,e>>8&255,e>>16&255,e>>24&255])}case 4:{const e=this.value,i=new Uint8Array(8);return new DataView(i.buffer).setFloat64(0,e,!0),i}case 5:return new TextEncoder().encode(this.value);case 3:{const i=this.value.toBytesLE();return Uint8Array.from(i)}case 6:return this.value;case 7:{const e=this.value,i=Ut.fromNumber(e.getTime(),!0).toBytesLE();return Uint8Array.from(i)}default:throw new j(V.ErrUnimplemented,`unimplemented type: ${this.valueType}`)}}}class bd extends k1{constructor(e){super(e);y(this,"prev");y(this,"next");y(this,"movedFrom");this.value=e}static createAfter(e,i){const a=new bd(i),l=e.next;return e.next=a,a.prev=e,a.next=l,l&&(l.prev=a),a}remove(e){return this.value.remove(e)}getCreatedAt(){return this.value.getCreatedAt()}getPositionedAt(){return this.value.getPositionedAt()}release(){this.prev&&(this.prev.next=this.next),this.next&&(this.next.prev=this.prev),this.prev=void 0,this.next=void 0}getLength(){return this.value.isRemoved()?0:1}getPrev(){return this.prev}getNext(){return this.next}getMovedFrom(){return this.movedFrom}setMovedFrom(e){this.movedFrom=e}getValue(){return this.value}isRemoved(){return this.value.isRemoved()}}class Mu{constructor(){y(this,"dummyHead");y(this,"last");y(this,"nodeMapByIndex");y(this,"nodeMapByCreatedAt");const t=le.of(0,Yo);t.setRemovedAt(Yo),this.dummyHead=new bd(t),this.last=this.dummyHead,this.nodeMapByIndex=new Ru,this.nodeMapByCreatedAt=new Map,this.nodeMapByIndex.insert(this.dummyHead),this.nodeMapByCreatedAt.set(this.dummyHead.getCreatedAt().toIDString(),this.dummyHead)}static create(){return new Mu}get length(){return this.nodeMapByIndex.length}findNextBeforeExecutedAt(t,e){let i=this.nodeMapByCreatedAt.get(t.toIDString());if(!i)throw new j(V.ErrInvalidArgument,`cant find the given node: ${t.toIDString()}`);for(;i.getValue().getMovedAt()&&i.getValue().getMovedAt().after(e)&&i.getMovedFrom();)i=i.getMovedFrom();for(;i.getNext()&&i.getNext().getPositionedAt().after(e);)i=i.getNext();return i}release(t){this.last===t&&(this.last=t.getPrev()),t.release(),this.nodeMapByIndex.delete(t),this.nodeMapByCreatedAt.delete(t.getValue().getCreatedAt().toIDString())}insertAfter(t,e,i=e.getCreatedAt()){const a=this.findNextBeforeExecutedAt(t,i),l=bd.createAfter(a,e);return a===this.last&&(this.last=l),this.nodeMapByIndex.insertAfter(a,l),this.nodeMapByCreatedAt.set(l.getCreatedAt().toIDString(),l),l}moveAfter(t,e,i){let a=this.nodeMapByCreatedAt.get(t.toIDString());if(!a)throw new j(V.ErrInvalidArgument,`cant find the given node: ${t.toIDString()}`);let l=this.nodeMapByCreatedAt.get(e.toIDString());if(!l)throw new j(V.ErrInvalidArgument,`cant find the given node: ${e.toIDString()}`);if(a!==l&&i.after(l.getPositionedAt())){const c=l.getPrev();let d=l.getNext();for(this.release(l),l=this.insertAfter(a.getCreatedAt(),l.getValue(),i),l.getValue().setMovedAt(i),l.setMovedFrom(c);d&&d.getPositionedAt().after(i);)a=l,l=d,d=l.getNext(),this.release(l),l=this.insertAfter(a.getCreatedAt(),l.getValue(),i),l.getValue().setMovedAt(i),l.setMovedFrom(c)}}insert(t){this.insertAfter(this.last.getCreatedAt(),t)}getByID(t){return this.nodeMapByCreatedAt.get(t.toIDString())}subPathOf(t){const e=this.nodeMapByCreatedAt.get(t.toIDString());if(e)return String(this.nodeMapByIndex.indexOf(e))}purge(t){const e=this.nodeMapByCreatedAt.get(t.getCreatedAt().toIDString());if(!e)throw new j(V.ErrInvalidArgument,`fail to find the given createdAt: ${t.getCreatedAt().toIDString()}`);this.release(e)}getByIndex(t){if(t>=this.length)return;const[e,i]=this.nodeMapByIndex.find(t);let a=e;if(t===0&&e===this.dummyHead||i>0)do a&&(a=a.getNext());while(a&&a.isRemoved());return a}getPrevCreatedAt(t){let e=this.nodeMapByCreatedAt.get(t.toIDString());do e=e.getPrev();while(this.dummyHead!==e&&e.isRemoved());return e.getValue().getCreatedAt()}delete(t,e){const i=this.nodeMapByCreatedAt.get(t.toIDString()),a=i.isRemoved();return i.remove(e)&&!a&&this.nodeMapByIndex.splayNode(i),i.getValue()}set(t,e,i){const a=this.nodeMapByCreatedAt.get(t.toIDString());if(!a)throw new j(V.ErrInvalidArgument,`cant find the given node: ${t.toIDString()}`);return this.insertAfter(a.getCreatedAt(),e,i),this.delete(t,i)}deleteByIndex(t,e){const i=this.getByIndex(t);if(i)return i.remove(e)&&this.nodeMapByIndex.splayNode(i),i.getValue()}getHead(){return this.dummyHead.getValue()}getLast(){return this.last.getValue()}getLastCreatedAt(){return this.last.getCreatedAt()}toTestString(){const t=[];for(const e of this){const i=`${e.getCreatedAt().toIDString()}:${e.getValue().toJSON()}`;e.isRemoved()?t.push(`{${i}}`):t.push(`[${i}]`)}return t.join("")}*[Symbol.iterator](){let t=this.dummyHead.getNext();for(;t;)yield t,t=t.getNext()}}class He extends Qs{constructor(e,i){super(e);y(this,"elements");this.elements=i}static create(e,i){if(!i)return new He(e,Mu.create());const a=Mu.create();for(const l of i)a.insertAfter(a.getLastCreatedAt(),l.deepcopy());return new He(e,a)}subPathOf(e){return this.elements.subPathOf(e)}purge(e){this.elements.purge(e)}insertAfter(e,i,a){this.elements.insertAfter(e,i,a)}moveAfter(e,i,a){this.elements.moveAfter(e,i,a)}get(e){const i=this.elements.getByIndex(e);return i==null?void 0:i.getValue()}getByID(e){const i=this.elements.getByID(e);return i==null?void 0:i.getValue()}getHead(){return this.elements.getHead()}getLast(){return this.elements.getLast()}getPrevCreatedAt(e){return this.elements.getPrevCreatedAt(e)}delete(e,i){return this.elements.delete(e,i)}deleteByIndex(e,i){return this.elements.deleteByIndex(e,i)}set(e,i,a){return this.elements.set(e,i,a)}getLastCreatedAt(){return this.elements.getLastCreatedAt()}get length(){return this.elements.length}*[Symbol.iterator](){for(const e of this.elements)e.isRemoved()||(yield e.getValue())}toTestString(){return this.elements.toTestString()}getDescendants(e){for(const i of this.elements){const a=i.getValue();if(e(a,this))return;a instanceof Qs&&a.getDescendants(e)}}getDataSize(){return{data:0,meta:this.getMetaUsage()}}toJSON(){const e=[];for(const i of this)e.push(i.toJSON());return`[${e.join(",")}]`}toJS(){return JSON.parse(this.toJSON())}toJSForTest(){const e={};for(let i=0;i<this.length;i++){const{createdAt:a,value:l,type:c}=this.get(i).toJSForTest();e[i]={key:String(i),createdAt:a,value:l,type:c}}return{createdAt:this.getCreatedAt().toTestString(),value:e,type:"YORKIE_ARRAY"}}toSortedJSON(){return this.toJSON()}getElements(){return this.elements}deepcopy(){const e=He.create(this.getCreatedAt());for(const i of this.elements)e.elements.insertAfter(e.getLastCreatedAt(),i.getValue().deepcopy());return e.remove(this.getRemovedAt()),e}}class il extends Pn{constructor(e,i,a,l){super(e,l);y(this,"prevCreatedAt");y(this,"value");this.prevCreatedAt=i,this.value=a}static create(e,i,a,l){return new il(e,i,a,l)}execute(e){const i=e.findByCreatedAt(this.getParentCreatedAt());if(!i)throw new j(V.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(i instanceof He))throw new j(V.ErrInvalidArgument,"fail to execute, only array can execute add");const a=i,l=this.value.deepcopy();return a.insertAfter(this.prevCreatedAt,l,this.getExecutedAt()),e.registerElement(l,a),{opInfos:[{type:"add",path:e.createPath(this.getParentCreatedAt()),index:Number(a.subPathOf(this.getEffectedCreatedAt()))}],reverseOp:this.toReverseOperation()}}toReverseOperation(){return ls.create(this.getParentCreatedAt(),this.value.getCreatedAt())}getEffectedCreatedAt(){return this.value.getCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.ADD.${this.value.toJSON()}`}getPrevCreatedAt(){return this.prevCreatedAt}getValue(){return this.value}}class ls extends Pn{constructor(e,i,a){super(e,a);y(this,"createdAt");this.createdAt=i}static create(e,i,a){return new ls(e,i,a)}execute(e,i){var g;const a=e.findByCreatedAt(this.getParentCreatedAt());if(!a)throw new j(V.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(a instanceof Qs))throw new j(V.ErrInvalidArgument,`only object and array can execute remove: ${a}`);if(i===ee.UndoRedo){let p=a.getByID(this.createdAt);for(;p;){if(p.getRemovedAt())return;p=(g=e.findElementPairByCreatedAt(p.getCreatedAt()))==null?void 0:g.parent}}const l=a.subPathOf(this.createdAt),c=this.toReverseOperation(a),d=a.delete(this.createdAt,this.getExecutedAt());return e.registerRemovedElement(d),{opInfos:a instanceof He?[{type:"remove",path:e.createPath(this.getParentCreatedAt()),index:Number(l)}]:[{type:"remove",path:e.createPath(this.getParentCreatedAt()),key:l}],reverseOp:c}}toReverseOperation(e){if(e instanceof He){const i=e.getByID(this.createdAt);if(i!==void 0){const a=e.getPrevCreatedAt(this.createdAt);return il.create(this.getParentCreatedAt(),a,i.deepcopy())}}if(e instanceof $e){const i=e.subPathOf(this.createdAt);if(i!==void 0){const a=e.get(i);if(a!==void 0)return La.create(i,a.deepcopy(),this.getParentCreatedAt())}}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.REMOVE.${this.createdAt.toTestString()}`}getCreatedAt(){return this.createdAt}}class La extends Pn{constructor(e,i,a,l){super(a,l);y(this,"key");y(this,"value");this.key=e,this.value=i}static create(e,i,a,l){return new La(e,i,a,l)}execute(e,i){var g;const a=e.findByCreatedAt(this.getParentCreatedAt());if(!a)throw new j(V.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(a instanceof $e))throw new j(V.ErrInvalidArgument,"fail to execute, only object can execute set");if(i===ee.UndoRedo){let p=a;for(;p;){if(p.getRemovedAt())return;p=(g=e.findElementPairByCreatedAt(p.getCreatedAt()))==null?void 0:g.parent}}const l=a.get(this.key),c=this.toReverseOperation(l),d=this.value.deepcopy(),h=a.set(this.key,d,this.getExecutedAt());return i===ee.UndoRedo&&e.findByCreatedAt(d.getCreatedAt())&&e.deregisterElement(d),e.registerElement(d,a),h&&e.registerRemovedElement(h),{opInfos:[{type:"set",path:e.createPath(this.getParentCreatedAt()),key:this.key}],reverseOp:c}}toReverseOperation(e){let i=ls.create(this.getParentCreatedAt(),this.value.getCreatedAt());return e!==void 0&&!e.isRemoved()&&(i=La.create(this.key,e.deepcopy(),this.getParentCreatedAt())),i}getEffectedCreatedAt(){return this.value.getCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.SET.${this.key}=${this.value.toSortedJSON()}`}getKey(){return this.key}getValue(){return this.value}}class rs extends Pn{constructor(e,i,a,l){super(e,l);y(this,"prevCreatedAt");y(this,"createdAt");this.prevCreatedAt=i,this.createdAt=a}static create(e,i,a,l){return new rs(e,i,a,l)}execute(e){const i=e.findByCreatedAt(this.getParentCreatedAt());if(!i)throw new j(V.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(i instanceof He))throw new j(V.ErrInvalidArgument,"fail to execute, only array can execute move");const a=i,l=this.toReverseOperation(a),c=Number(a.subPathOf(this.createdAt));a.moveAfter(this.prevCreatedAt,this.createdAt,this.getExecutedAt());const d=Number(a.subPathOf(this.createdAt));return{opInfos:[{type:"move",path:e.createPath(this.getParentCreatedAt()),index:d,previousIndex:c}],reverseOp:l}}toReverseOperation(e){const i=e.getPrevCreatedAt(this.createdAt);return rs.create(this.getParentCreatedAt(),i,this.createdAt)}getEffectedCreatedAt(){return this.createdAt}toTestString(){return`${this.getParentCreatedAt().toTestString()}.MOVE`}getPrevCreatedAt(){return this.prevCreatedAt}getCreatedAt(){return this.createdAt}}class Fs{constructor(t,e,i,a){y(this,"key");y(this,"value");y(this,"updatedAt");y(this,"_isRemoved");this.key=t,this.value=e,this.updatedAt=i,this._isRemoved=a}static of(t,e,i,a){return new Fs(t,e,i,a)}getKey(){return this.key}getValue(){return this.value}getUpdatedAt(){return this.updatedAt}isRemoved(){return this._isRemoved}toIDString(){return`${this.updatedAt.toIDString()}:${this.key}`}getRemovedAt(){if(this._isRemoved)return this.updatedAt}getDataSize(){return{data:(this.key.length+this.value.length)*2,meta:br}}}class us{constructor(){y(this,"nodeMapByKey");y(this,"numberOfRemovedElement");this.nodeMapByKey=new Map,this.numberOfRemovedElement=0}static create(){return new us}getNodeMapByKey(){return this.nodeMapByKey}set(t,e,i){const a=this.nodeMapByKey.get(t);if(a&&a.isRemoved()&&i.after(a.getUpdatedAt())&&(this.numberOfRemovedElement-=1),a===void 0||i.after(a.getUpdatedAt())){const l=Fs.of(t,e,i,!1);return this.nodeMapByKey.set(t,l),a!==void 0&&a.isRemoved()?[a,l]:[void 0,l]}return a.isRemoved()?[a,void 0]:[void 0,void 0]}setInternal(t,e,i,a){const l=Fs.of(t,e,i,a);this.nodeMapByKey.set(t,l),a&&this.numberOfRemovedElement++}remove(t,e){const i=this.nodeMapByKey.get(t),a=[];if(i===void 0||e.after(i.getUpdatedAt())){if(i===void 0){this.numberOfRemovedElement+=1;const d=Fs.of(t,"",e,!0);return this.nodeMapByKey.set(t,d),a.push(d),a}const l=i.isRemoved();l||(this.numberOfRemovedElement+=1),l&&a.push(i);const c=Fs.of(t,i.getValue(),e,!0);return this.nodeMapByKey.set(t,c),a.push(c),a}return a}has(t){if(this.nodeMapByKey.has(t)){const e=this.nodeMapByKey.get(t);return e!==void 0&&!e.isRemoved()}return!1}get(t){if(this.nodeMapByKey.has(t))return this.nodeMapByKey.get(t).getValue()}deepcopy(){const t=new us;for(const[,e]of this.nodeMapByKey)t.setInternal(e.getKey(),e.getValue(),e.getUpdatedAt(),e.isRemoved());return t}toJSON(){if(!this.size())return"{}";const t=[];for(const[e,i]of this.nodeMapByKey)i.isRemoved()||t.push(`"${Sr(e)}":"${Sr(i.getValue())}"`);return`{${t.join(",")}}`}size(){return this.nodeMapByKey.size-this.numberOfRemovedElement}toObject(){const t={};for(const[e,i]of this.nodeMapByKey)i.isRemoved()||(t[e]=i.getValue());return t}*[Symbol.iterator](){for(const[,t]of this.nodeMapByKey)yield t}purge(t){const e=this.nodeMapByKey.get(t.getKey());e==null||e.toIDString()!=t.toIDString()||(this.nodeMapByKey.delete(t.getKey()),this.numberOfRemovedElement--)}}function Xn(n){if(n instanceof Map){const t=Array.from(n);return new Map(JSON.parse(JSON.stringify(t)))}return JSON.parse(JSON.stringify(n))}const B1=n=>n?Object.entries(n).length===0:!0,Xo=n=>{const t={};for(const[e,i]of Object.entries(n))t[e]=JSON.stringify(i);return t},ss=n=>{const t={};for(const[e,i]of Object.entries(n))t[e]=JSON.parse(i);return t};function P2(n){return n?qS(n.live)+qS(n.gc):0}function qS(n){return n.data+n.meta}function _e(n,...t){for(const e of t)n.data+=e.data,n.meta+=e.meta}function _o(n,t){n.data-=t.data,n.meta-=t.meta}class Bu{constructor(t){y(this,"attributes");y(this,"content");this.attributes=us.create(),this.content=t}static create(t){return new Bu(t)}get length(){return this.content.length}substring(t,e){const i=new Bu(this.content.substring(t,e));return i.attributes=this.attributes.deepcopy(),i}setAttr(t,e,i){return this.attributes.set(t,e,i)}getAttrs(){return this.attributes}toString(){return this.content}getDataSize(){const t={data:0,meta:0};t.data+=this.content.length*2;for(const e of this.attributes){const i=e.getDataSize();t.meta+=i.meta,t.data+=i.data}return t}toJSON(){const t=Sr(this.content),e=this.attributes.toObject(),i=[];for(const[a,l]of Object.entries(e)){const c=JSON.parse(l),d=typeof c=="string"?`"${Sr(a)}":"${Sr(c)}"`:`"${Sr(a)}":${String(c)}`;i.push(d)}return i.sort(),i.length===0?`{"val":"${t}"}`:`{"attrs":{${i.join(",")}},"val":"${t}"}`}getAttributes(){return this.attributes.toObject()}getContent(){return this.content}purge(t){this.attributes&&t instanceof Fs&&this.attributes.purge(t)}getGCPairs(){const t=[];for(const e of this.attributes)e.getRemovedAt()&&t.push({parent:this,child:e});return t}}class yn extends Xu{constructor(e,i){super(i);y(this,"rgaTreeSplit");this.rgaTreeSplit=e}static create(e,i){return new yn(e,i)}edit(e,i,a,l,c){const d=i?Bu.create(i):void 0;if(d&&l)for(const[S,x]of Object.entries(l))d.setAttr(S,x,a);const[h,g,p,w]=this.rgaTreeSplit.edit(e,a,d,c);return[w.map(S=>({...S,value:S.value?{attributes:ss(S.value.getAttributes()),content:S.value.getContent()}:{attributes:void 0,content:""},type:"content"})),g,p,[h,h]]}setStyle(e,i,a,l){const c={data:0,meta:0},[,d,h]=this.rgaTreeSplit.findNodeWithSplit(e[1],a),[,g,p]=this.rgaTreeSplit.findNodeWithSplit(e[0],a);_e(c,d,g);const w=[],v=this.rgaTreeSplit.findBetween(p,h),S=[];for(const E of v){const I=E.getCreatedAt().getActorID();let k=bu;l!=null&&(k=l.get(I)?l.get(I):0n),E.canStyle(a,k)&&S.push(E)}const x=[];for(const E of S){if(E.isRemoved())continue;const[I,k]=this.rgaTreeSplit.findIndexesFromRange(E.createPosRange());w.push({type:"style",actor:a.getActorID(),from:I,to:k,value:{attributes:ss(i)}});for(const[z,N]of Object.entries(i)){const[O]=E.getValue().setAttr(z,N,a);O!==void 0&&x.push({parent:E.getValue(),child:O});const _=E.getValue().getAttrs().getNodeMapByKey().get(z);_!==void 0&&_e(c,_.getDataSize())}}return[x,c,w]}indexRangeToPosRange(e,i){const a=this.rgaTreeSplit.indexToPos(e);return e===i?[a,a]:[a,this.rgaTreeSplit.indexToPos(i)]}get length(){return this.rgaTreeSplit.length}getTreeByIndex(){return this.rgaTreeSplit.getTreeByIndex()}getTreeByID(){return this.rgaTreeSplit.getTreeByID()}getDataSize(){const e={data:0,meta:0};for(const i of this.rgaTreeSplit){if(i.isRemoved())continue;const a=i.getDataSize();e.data+=a.data,e.meta+=a.meta}return{data:e.data,meta:e.meta+this.getMetaUsage()}}toJSON(){const e=[];for(const i of this.rgaTreeSplit)i.isRemoved()||e.push(i.getValue().toJSON());return`[${e.join(",")}]`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:JSON.parse(this.toJSON()),type:"YORKIE_TEXT"}}toString(){return this.rgaTreeSplit.toString()}values(){const e=[];for(const i of this.rgaTreeSplit)if(!i.isRemoved()){const a=i.getValue();e.push({attributes:ss(a.getAttributes()),content:a.getContent()})}return e}getRGATreeSplit(){return this.rgaTreeSplit}toTestString(){return this.rgaTreeSplit.toTestString()}deepcopy(){const e=new yn(this.rgaTreeSplit.deepcopy(),this.getCreatedAt());return e.remove(this.getRemovedAt()),e}findIndexesFromRange(e){return this.rgaTreeSplit.findIndexesFromRange(e)}getGCPairs(){const e=[];for(const i of this.rgaTreeSplit){i.getRemovedAt()&&e.push({parent:this.rgaTreeSplit,child:i});for(const a of i.getValue().getGCPairs())e.push(a)}return e}}class Ku extends Pn{constructor(e,i,a,l,c,d){super(e,d);y(this,"fromPos");y(this,"toPos");y(this,"content");y(this,"attributes");this.fromPos=i,this.toPos=a,this.content=l,this.attributes=c}static create(e,i,a,l,c,d){return new Ku(e,i,a,l,c,d)}execute(e,i,a){const l=e.findByCreatedAt(this.getParentCreatedAt());if(!l)throw new j(V.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(l instanceof yn))throw new j(V.ErrInvalidArgument,"fail to execute, only Text can execute edit");const c=l,[d,h,g]=c.edit([this.fromPos,this.toPos],this.content,this.getExecutedAt(),Object.fromEntries(this.attributes),a);e.acc(g);for(const p of h)e.registerGCPair(p);return{opInfos:d.map(({from:p,to:w,value:v})=>({type:"edit",from:p,to:w,value:v,path:e.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),i=this.fromPos.toTestString(),a=this.toPos.toTestString(),l=this.content;return`${e}.EDIT(${i},${a},${l})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getContent(){return this.content}getAttributes(){return this.attributes||new Map}}class Fu extends Pn{constructor(e,i,a,l,c){super(e,c);y(this,"fromPos");y(this,"toPos");y(this,"attributes");this.fromPos=i,this.toPos=a,this.attributes=l}static create(e,i,a,l,c){return new Fu(e,i,a,l,c)}execute(e,i,a){const l=e.findByCreatedAt(this.getParentCreatedAt());if(!l)throw new j(V.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(l instanceof yn))throw new j(V.ErrInvalidArgument,"fail to execute, only Text can execute edit");const c=l,[d,h,g]=c.setStyle([this.fromPos,this.toPos],this.attributes?Object.fromEntries(this.attributes):{},this.getExecutedAt(),a);e.acc(h);for(const p of d)e.registerGCPair(p);return{opInfos:g.map(({from:p,to:w,value:v})=>({type:"style",from:p,to:w,value:v,path:e.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),i=this.fromPos.toTestString(),a=this.toPos.toTestString(),l=this.attributes;return`${e}.STYL(${i},${a},${JSON.stringify(l)})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getAttributes(){return this.attributes}}const J2=2,$2="root",xr="text";function du(n,t){let e=0;const i=n.children;for(let a=0;a<t;a++){const l=i[a];!l||l.isRemoved||(e+=l.paddedSize)}return e}class H2{constructor(t,e=[]){y(this,"type");y(this,"parent");y(this,"_children");y(this,"size");if(this.type=t,this.size=0,this._children=e,this.isText&&this._children.length>0)throw new j(V.ErrRefused,"Text node cannot have children")}updateAncestorsSize(){let t=this.parent;const e=this.isRemoved?-1:1;for(;t&&(t.size+=this.paddedSize*e,!t.isRemoved);)t=t.parent}updateDescendantsSize(){let t=0;for(const e of this._children){const i=e.updateDescendantsSize();e.isRemoved||(t+=i)}return this.size+=t,this.paddedSize}get isText(){return this.type===xr}get paddedSize(){return this.size+(this.isText?0:J2)}isAncestorOf(t){return V2(this,t)}get nextSibling(){const t=this.parent.findOffset(this),e=this.parent.children[t+1];if(e)return e}get prevSibling(){const t=this.parent.findOffset(this),e=this.parent.children[t-1];if(e)return e}splitText(t,e){const i={data:0,meta:0};if(t===0||t===this.size)return[void 0,i];const a=this.value.slice(0,t),l=this.value.slice(t);if(!l.length)return[void 0,i];const c=this.getDataSize();this.value=a;const d=this.cloneText(t+e);return d.value=l,this.parent.insertAfterInternal(d,this),_e(i,this.getDataSize(),d.getDataSize()),_o(i,c),[d,i]}get children(){return this._children.filter(t=>!t.isRemoved)}get allChildren(){return[...this._children]}hasTextChild(){return this.children.length>0&&this.children.every(t=>t.isText)}getChildrenText(){return this.isText?this.value:this.hasTextChild()?this.children.map(t=>t.value).join(""):""}append(...t){if(this.isText)throw new j(V.ErrRefused,"Text node cannot have children");this._children.push(...t);for(const e of t)e.parent=this,e.updateAncestorsSize()}prepend(...t){if(this.isText)throw new j(V.ErrRefused,"Text node cannot have children");this._children.unshift(...t);for(const e of t)e.parent=this}insertBefore(t,e){if(this.isText)throw new j(V.ErrRefused,"Text node cannot have children");const i=this._children.indexOf(e);if(i===-1)throw new j(V.ErrInvalidArgument,"child not found");this.insertAtInternal(t,i),t.updateAncestorsSize()}insertAfter(t,e){if(this.isText)throw new j(V.ErrRefused,"Text node cannot have children");const i=this._children.indexOf(e);if(i===-1)throw new j(V.ErrInvalidArgument,"child not found");this.insertAtInternal(t,i+1),t.updateAncestorsSize()}insertAt(t,e){if(this.isText)throw new j(V.ErrRefused,"Text node cannot have children");this.insertAtInternal(t,e),t.updateAncestorsSize()}removeChild(t){if(this.isText)throw new j(V.ErrRefused,"Text node cannot have children");const e=this._children.indexOf(t);if(e===-1)throw new j(V.ErrInvalidArgument,"child not found");this._children.splice(e,1),t.parent=void 0}splitElement(t,e){const i={data:0,meta:0},a=this.getDataSize(),l=this.cloneElement(e);this.parent.insertAfterInternal(l,this),l.updateAncestorsSize();const c=this.children.slice(0,t),d=this.children.slice(t);this._children=c,l._children=d,this.size=this._children.reduce((h,g)=>h+g.paddedSize,0),l.size=l._children.reduce((h,g)=>h+g.paddedSize,0);for(const h of l._children)h.parent=l;return _e(i,this.getDataSize(),l.getDataSize()),_o(i,a),[l,i]}insertAfterInternal(t,e){if(this.isText)throw new j(V.ErrRefused,"Text node cannot have children");const i=this._children.indexOf(e);if(i===-1)throw new j(V.ErrInvalidArgument,"child not found");this.insertAtInternal(t,i+1)}insertAtInternal(t,e){if(this.isText)throw new j(V.ErrRefused,"Text node cannot have children");this._children.splice(e,0,t),t.parent=this}findOffset(t){if(this.isText)throw new j(V.ErrRefused,"Text node cannot have children");if(t.isRemoved){const e=this._children.indexOf(t);return this.allChildren.splice(0,e).filter(a=>!a.isRemoved).length}return this.children.indexOf(t)}findBranchOffset(t){if(this.isText)throw new j(V.ErrRefused,"Text node cannot have children");let e=t;for(;e;){const i=this._children.indexOf(e);if(i!==-1)return i;e=e.parent}return-1}}function V2(n,t){if(n===t)return!1;for(;t.parent;){if(t.parent===n)return!0;t=t.parent}return!1}var pe=(n=>(n.Start="Start",n.End="End",n.Text="Text",n))(pe||{});function z1(n,t,e,i){if(t>e)throw new j(V.ErrInvalidArgument,`from is greater than to: ${t} > ${e}`);if(t>n.size)throw new j(V.ErrInvalidArgument,`from is out of range: ${t} > ${n.size}`);if(e>n.size)throw new j(V.ErrInvalidArgument,`to is out of range: ${e} > ${n.size}`);if(t===e)return;let a=0;for(const l of n.children){if(t-l.paddedSize<a&&a<e){const c=l.isText?t-a:t-a-1,d=l.isText?e-a:e-a-1,h=!l.isText&&c<0,g=!l.isText&&d>l.size;(l.isText||h)&&i([l,l.isText?"Text":"Start"],g),z1(l,Math.max(0,c),Math.min(d,l.size),i),g&&i([l,"End"],g)}a+=l.paddedSize}}function L1(n,t,e=0){for(const i of n.children)L1(i,t,e+1);t(n,e)}function Jd(n,t,e=0){for(const i of n._children)Jd(i,t,e+1);t(n,e)}function pp(n,t,e=!0){if(t>n.size)throw new j(V.ErrInvalidArgument,`index is out of range: ${t} > ${n.size}`);if(n.isText)return{node:n,offset:t};let i=0,a=0;for(const l of n.children){if(e&&l.isText&&l.size>=t-a)return pp(l,t-a,e);if(t===a)return{node:n,offset:i};if(!e&&l.paddedSize===t-a)return{node:n,offset:i+1};if(l.paddedSize>t-a)return pp(l,t-a-1,e);a+=l.paddedSize,i+=1}return{node:n,offset:i}}function _1(n){return n.isText||n.children.length===0?n:_1(n.children[0])}function j2(n,t){if(n.size<t)throw new j(V.ErrInvalidArgument,"unacceptable path");for(let e=0;e<n.children.length;e++){const i=n.children[e];if(i.size<t)t-=i.size;else{n=i;break}}return{node:n,offset:t}}class Y2{constructor(t){y(this,"root");this.root=t}tokensBetween(t,e,i){z1(this.root,t,e,i)}traverse(t){L1(this.root,t,0)}traverseAll(t){Jd(this.root,t,0)}findTreePos(t,e=!0){return pp(this.root,t,e)}treePosToPath(t){const e=[];let i=t.node;if(i.isText){const a=i.parent.findOffset(i);if(a===-1)throw new j(V.ErrInvalidArgument,"invalid treePos");const l=du(i.parent,a);e.push(l+t.offset),i=i.parent}else if(i.hasTextChild()){const a=du(i,t.offset);e.push(a)}else e.push(t.offset);for(;i.parent;){const a=i.parent.findOffset(i);if(a===-1)throw new j(V.ErrInvalidArgument,"invalid treePos");e.push(a),i=i.parent}return e.reverse()}pathToIndex(t){const e=this.pathToTreePos(t);return this.indexOf(e)}pathToTreePos(t){if(!t.length)throw new j(V.ErrInvalidArgument,"unacceptable path");let e=this.root;for(let i=0;i<t.length-1;i++){const a=t[i];if(e=e.children[a],!e)throw new j(V.ErrInvalidArgument,"unacceptable path")}if(e.hasTextChild())return j2(e,t[t.length-1]);if(e.children.length<t[t.length-1])throw new j(V.ErrInvalidArgument,"unacceptable path");return{node:e,offset:t[t.length-1]}}getRoot(){return this.root}get size(){return this.root.size}findPostorderRight(t){const{node:e,offset:i}=t;if(e.isText){if(e.size===i){const a=e.nextSibling;return a||e.parent}return e}return e.children.length===i?e:_1(e.children[i])}indexOf(t){let{node:e}=t;const{offset:i}=t;let a=0,l=1;if(e.isText){a+=i;const c=e.parent,d=c.findOffset(e);if(d===-1)throw new j(V.ErrInvalidArgument,"invalid pos");a+=du(c,d),e=e.parent}else a+=du(e,i);for(;e!=null&&e.parent;){const c=e.parent,d=c.findOffset(e);if(d===-1)throw new j(V.ErrInvalidArgument,"invalid pos");a+=du(c,d),l++,e=e.parent}return a+l-1}indexToPath(t){const e=this.findTreePos(t);return this.treePosToPath(e)}}const G2=(n,t)=>n===t?0:n<t?-1:1;class X2{constructor(t,e,i){y(this,"key");y(this,"value");y(this,"parent");y(this,"left");y(this,"right");y(this,"isRed");this.key=t,this.value=e,this.isRed=i}}class K2{constructor(t){y(this,"stack");this.stack=[],this.traverseInorder(t)}traverseInorder(t){t&&(this.traverseInorder(t.left),this.stack.push({key:t.key,value:t.value}),this.traverseInorder(t.right))}}class U1{constructor(t){y(this,"root");y(this,"comparator");y(this,"counter");this.comparator=typeof t<"u"?t:G2,this.counter=0}put(t,e){return this.root=this.putInternal(t,e,this.root),this.root.isRed=!1,e}get(t){const e=this.getInternal(t,this.root);return e?e.value:void 0}remove(t){!this.isRed(this.root.left)&&!this.isRed(this.root.right)&&(this.root.isRed=!0),this.root=this.removeInternal(this.root,t),this.root&&(this.root.isRed=!1)}getIterator(){return new K2(this.root)}values(){const t=[];for(const e of this.getIterator().stack)t.push(e.value);return t}floorEntry(t){let e=this.root;for(;e;){const i=this.comparator(t,e.key);if(i>0)if(e.right)e.right.parent=e,e=e.right;else return e;else if(i<0)if(e.left)e.left.parent=e,e=e.left;else{let a=e.parent,l=e;for(;a&&l===a.left;)l=a,a=a.parent;return a}else return e}}lastEntry(){if(!this.root)return this.root;let t=this.root;for(;t.right;)t=t.right;return t}size(){return this.counter}isEmpty(){return this.counter===0}getInternal(t,e){for(;e;){const i=this.comparator(t,e.key);if(i===0)return e;i<0?e=e.left:i>0&&(e=e.right)}}putInternal(t,e,i){if(!i)return this.counter+=1,new X2(t,e,!0);const a=this.comparator(t,i.key);return a<0?i.left=this.putInternal(t,e,i.left):a>0?i.right=this.putInternal(t,e,i.right):i.value=e,this.isRed(i.right)&&!this.isRed(i.left)&&(i=this.rotateLeft(i)),this.isRed(i.left)&&this.isRed(i.left.left)&&(i=this.rotateRight(i)),this.isRed(i.left)&&this.isRed(i.right)&&this.flipColors(i),i}removeInternal(t,e){if(this.comparator(e,t.key)<0)!this.isRed(t.left)&&!this.isRed(t.left.left)&&(t=this.moveRedLeft(t)),t.left=this.removeInternal(t.left,e);else{if(this.isRed(t.left)&&(t=this.rotateRight(t)),this.comparator(e,t.key)===0&&!t.right){this.counter-=1;return}if(!this.isRed(t.right)&&!this.isRed(t.right.left)&&(t=this.moveRedRight(t)),this.comparator(e,t.key)===0){this.counter-=1;const i=this.min(t.right);t.value=i.value,t.key=i.key,t.right=this.removeMin(t.right)}else t.right=this.removeInternal(t.right,e)}return this.fixUp(t)}min(t){return t.left?this.min(t.left):t}removeMin(t){if(t.left)return!this.isRed(t.left)&&!this.isRed(t.left.left)&&(t=this.moveRedLeft(t)),t.left=this.removeMin(t.left),this.fixUp(t)}fixUp(t){return this.isRed(t.right)&&(t=this.rotateLeft(t)),this.isRed(t.left)&&this.isRed(t.left.left)&&(t=this.rotateRight(t)),this.isRed(t.left)&&this.isRed(t.right)&&this.flipColors(t),t}moveRedLeft(t){return this.flipColors(t),this.isRed(t.right.left)&&(t.right=this.rotateRight(t.right),t=this.rotateLeft(t),this.flipColors(t)),t}moveRedRight(t){return this.flipColors(t),this.isRed(t.left.left)&&(t=this.rotateRight(t),this.flipColors(t)),t}isRed(t){return t&&t.isRed}rotateLeft(t){const e=t.right;return t.right=e.left,e.left=t,e.isRed=e.left.isRed,e.left.isRed=!0,e}rotateRight(t){const e=t.left;return t.left=e.right,e.right=t,e.isRed=e.right.isRed,e.right.isRed=!0,e}flipColors(t){t.isRed=!t.isRed,t.left.isRed=!t.left.isRed,t.right.isRed=!t.right.isRed}}class Wn{constructor(t,e){y(this,"parentID");y(this,"leftSiblingID");this.parentID=t,this.leftSiblingID=e}static of(t,e){return new Wn(t,e)}static fromTreePos(t){const{offset:e}=t;let{node:i}=t,a;return i.isText?(i.parent.children[0]===i&&e===0?a=i.parent:a=i,i=i.parent):e===0?a=i:a=i.children[e-1],Wn.of(i.id,Ue.of(a.getCreatedAt(),a.getOffset()+e))}getParentID(){return this.parentID}static fromStruct(t){return Wn.of(Ue.of(qn.fromStruct(t.parentID.createdAt),t.parentID.offset),Ue.of(qn.fromStruct(t.leftSiblingID.createdAt),t.leftSiblingID.offset))}toStruct(){return{parentID:{createdAt:this.getParentID().getCreatedAt().toStruct(),offset:this.getParentID().getOffset()},leftSiblingID:{createdAt:this.getLeftSiblingID().getCreatedAt().toStruct(),offset:this.getLeftSiblingID().getOffset()}}}toTreeNodePair(t){const e=this.getParentID(),i=this.getLeftSiblingID(),a=t.findFloorNode(e);let l=t.findFloorNode(i);if(!a||!l)throw new j(V.ErrRefused,`cannot find node of CRDTTreePos(${e.toTestString()}, ${i.toTestString()})`);return!i.equals(e)&&i.getOffset()>0&&i.getOffset()===l.id.getOffset()&&l.insPrevID&&(l=t.findFloorNode(l.insPrevID)),[a,l]}getLeftSiblingID(){return this.leftSiblingID}equals(t){return this.getParentID().getCreatedAt().equals(t.getParentID().getCreatedAt())&&this.getParentID().getOffset()===t.getParentID().getOffset()&&this.getLeftSiblingID().getCreatedAt().equals(t.getLeftSiblingID().getCreatedAt())&&this.getLeftSiblingID().getOffset()===t.getLeftSiblingID().getOffset()}}class Ue{constructor(t,e){y(this,"createdAt");y(this,"offset");this.createdAt=t,this.offset=e}static of(t,e){return new Ue(t,e)}static fromStruct(t){return Ue.of(qn.fromStruct(t.createdAt),t.offset)}static createComparator(){return(t,e)=>{const i=t.getCreatedAt().compare(e.getCreatedAt());return i!==0?i:t.getOffset()>e.getOffset()?1:t.getOffset()<e.getOffset()?-1:0}}getCreatedAt(){return this.createdAt}equals(t){return this.createdAt.compare(t.createdAt)===0&&this.offset===t.offset}getOffset(){return this.offset}setOffset(t){this.offset=t}toStruct(){return{createdAt:this.createdAt.toStruct(),offset:this.offset}}toIDString(){return`${this.createdAt.toIDString()}:${this.offset}`}toTestString(){return`${this.createdAt.toTestString()}/${this.offset}`}}class pn extends H2{constructor(e,i,a,l,c){super(i);y(this,"id");y(this,"removedAt");y(this,"attrs");y(this,"insPrevID");y(this,"insNextID");y(this,"_value","");this.id=e,this.removedAt=c,l&&(this.attrs=l),typeof a=="string"?this.value=a:Array.isArray(a)&&(this._children=a)}toIDString(){return this.id.toIDString()}getRemovedAt(){return this.removedAt}static create(e,i,a,l){return new pn(e,i,a,l)}deepcopy(){var i;const e=new pn(this.id,this.type);return e.removedAt=this.removedAt,e._value=this._value,e.size=this.size,e.attrs=(i=this.attrs)==null?void 0:i.deepcopy(),e._children=this._children.map(a=>{const l=a.deepcopy();return l.parent=e,l}),e.insPrevID=this.insPrevID,e.insNextID=this.insNextID,e}get value(){if(!this.isText)throw new j(V.ErrInvalidType,`cannot get value of element node: ${this.type}`);return this._value}set value(e){if(!this.isText)throw new j(V.ErrInvalidType,`cannot set value of element node: ${this.type}`);this._value=e,this.size=e.length}get isRemoved(){return!!this.removedAt}remove(e){const i=!this.removedAt;(!this.removedAt||this.removedAt.compare(e)>0)&&(this.removedAt=e),i&&this.updateAncestorsSize()}cloneText(e){return new pn(Ue.of(this.id.getCreatedAt(),e),this.type,void 0,void 0,this.removedAt)}cloneElement(e){return new pn(Ue.of(e(),0),this.type,void 0,void 0,this.removedAt)}split(e,i,a){const[l,c]=this.isText?this.splitText(i,this.id.getOffset()):this.splitElement(i,a);if(l){if(l.insPrevID=this.id,this.insNextID){const d=e.findFloorNode(this.insNextID);d.insPrevID=l.id,l.insNextID=this.insNextID}this.insNextID=l.id,e.registerNode(l)}return[l,c]}getCreatedAt(){return this.id.getCreatedAt()}getOffset(){return this.id.getOffset()}canDelete(e,i){return this.getCreatedAt().getLamport()<=i&&(!this.removedAt||e.after(this.removedAt))}canStyle(e,i){return this.isText?!1:this.getCreatedAt().getLamport()<=i&&(!this.removedAt||e.after(this.removedAt))}setAttrs(e,i){this.attrs||(this.attrs=new us);const a=[];for(const[l,c]of Object.entries(e))a.push(this.attrs.set(l,c,i));return a}purge(e){this.attrs&&this.attrs.purge(e)}getDataSize(){const e={data:0,meta:0};if(this.isText&&(e.data+=this.size*2),this.id&&(e.meta+=br),this.removedAt&&(e.meta+=br),this.attrs)for(const i of this.attrs){if(i.getRemovedAt())continue;const a=i.getDataSize();e.meta+=a.meta,e.data+=a.data}return e}getGCPairs(){const e=[];if(!this.attrs)return e;for(const i of this.attrs)i.getRemovedAt()&&e.push({parent:this,child:i});return e}}function yp(n){var e;if(n.isText){const i=n;return{type:i.type,value:i.value}}const t={type:n.type,children:n.children.map(yp)};return n.attrs&&(t.attributes=ss((e=n.attrs)==null?void 0:e.toObject())),t}function Up(n){if(n.isText)return n.value;let t="";return n.attrs&&n.attrs.size()&&(t=" "+Array.from(n.attrs).filter(e=>!e.isRemoved()).sort((e,i)=>e.getKey().localeCompare(i.getKey())).map(e=>{const i=JSON.parse(e.getValue());return typeof i=="string"?`${e.getKey()}="${i}"`:`${e.getKey()}="${Sr(e.getValue())}"`}).join(" ")),`<${n.type}${t}>${n.children.map(e=>Up(e)).join("")}</${n.type}>`}function q1(n){if(n.isText){const t=n;return{type:t.type,value:t.value,size:t.size,isRemoved:t.isRemoved}}return{type:n.type,children:n.children.map(q1),size:n.size,isRemoved:n.isRemoved}}class vn extends Xu{constructor(e,i){super(i);y(this,"indexTree");y(this,"nodeMapByID");this.indexTree=new Y2(e),this.nodeMapByID=new U1(Ue.createComparator()),this.indexTree.traverseAll(a=>{this.nodeMapByID.put(a.id,a)})}static create(e,i){return new vn(e,i)}findFloorNode(e){const i=this.nodeMapByID.floorEntry(e);if(!(!i||!i.key.getCreatedAt().equals(e.getCreatedAt())))return i.value}registerNode(e){this.nodeMapByID.put(e.id,e)}findNodesAndSplitText(e,i){let a={data:0,meta:0};const[l,c]=e.toTreeNodePair(this);let d=c;const h=l===d,g=d.parent&&!h?d.parent:l;if(d.isText){const[,p]=d.split(this,e.getLeftSiblingID().getOffset()-d.id.getOffset());a=p}if(i){const p=g.allChildren,w=h?0:p.indexOf(d)+1;for(let v=w;v<p.length;v++){const S=p[v];if(!S.id.getCreatedAt().after(i))break;d=S}}return[[g,d],a]}style(e,i,a,l){const c={data:0,meta:0},[[d,h],g]=this.findNodesAndSplitText(e[0],a),[[p,w],v]=this.findNodesAndSplitText(e[1],a);_e(c,v,g);const S=[],x=i?ss(i):{},E=[];return this.traverseInPosRange(d,h,p,w,([I,k])=>{var O;const z=I.getCreatedAt().getActorID();let N=bu;if(l!=null&&(N=l.get(z)?l.get(z):0n),I.canStyle(a,N)&&i){const _=I.setAttrs(i,a),J=_.reduce((F,[,nt])=>(nt&&(F[nt.getKey()]=x[nt.getKey()]),F),{}),U=I.parent,W=I.prevSibling||I.parent;Object.keys(J).length>0&&S.push({type:"style",from:this.toIndex(U,W),to:this.toIndex(I,I),fromPath:this.toPath(U,W),toPath:this.toPath(I,I),actor:a.getActorID(),value:J});for(const[F]of _)F&&E.push({parent:I,child:F});for(const[F]of Object.entries(x)){const nt=(O=I.attrs)==null?void 0:O.getNodeMapByKey().get(F);nt!==void 0&&k!==pe.End&&_e(c,nt.getDataSize())}}}),[E,S,c]}removeStyle(e,i,a,l){const c={data:0,meta:0},[[d,h],g]=this.findNodesAndSplitText(e[0],a),[[p,w],v]=this.findNodesAndSplitText(e[1],a);_e(c,v,g);const S=[],x=[];return this.traverseInPosRange(d,h,p,w,([E])=>{const I=E.getCreatedAt().getActorID();let k=bu;if(l!=null&&(k=l.get(I)?l.get(I):0n),E.canStyle(a,k)&&i){E.attrs||(E.attrs=new us);for(const O of i){const _=E.attrs.remove(O,a);for(const J of _)x.push({parent:E,child:J})}const z=E.parent,N=E.prevSibling||E.parent;S.push({actor:a.getActorID(),type:"removeStyle",from:this.toIndex(z,N),to:this.toIndex(E,E),fromPath:this.toPath(z,N),toPath:this.toPath(E,E),value:i})}}),[x,S,c]}edit(e,i,a,l,c,d){const h={data:0,meta:0},[[g,p],w]=this.findNodesAndSplitText(e[0],l),[[v,S],x]=this.findNodesAndSplitText(e[1],l);_e(h,x,w);const E=this.toIndex(g,p),I=this.toPath(g,p),k=[],z=[],N=[];this.traverseInPosRange(g,p,v,S,([J,U],W)=>{if(U===pe.Start&&!W)for(const ft of J.children)N.push(ft);const F=J.getCreatedAt().getActorID();let nt=bu;d!=null&&(nt=d.get(F)?d.get(F):0n),(J.canDelete(l,nt)||k.includes(J.parent))&&((U===pe.Text||U===pe.Start)&&k.push(J),z.push([J,U]))});const O=this.makeDeletionChanges(z,l),_=[];for(const J of k)J.remove(l),J.isRemoved&&_.push({parent:this,child:J});for(const J of N)J.removedAt||g.append(J);if(a>0){let J=0,U=g,W=p;for(;J<a;)U.split(this,U.findOffset(W)+1,c),W=U,U=U.parent,J++;O.push({type:"content",from:E,to:E,fromPath:I,toPath:I,actor:l.getActorID()})}if(i!=null&&i.length){const J=[];let U=p;for(const W of i)U===g?g.insertAt(W,0):g.insertAfter(W,U),U=W,Jd(W,F=>{g.isRemoved?(F.remove(l),_.push({parent:this,child:F})):_e(h,F.getDataSize()),this.nodeMapByID.put(F.id,F)}),W.isRemoved||J.push(W);if(J.length){const W=J.map(F=>yp(F));O.length&&O[O.length-1].from===E?O[O.length-1].value=W:O.push({type:"content",from:E,to:E,fromPath:I,toPath:I,actor:l.getActorID(),value:W})}}return[O,_,h]}editT(e,i,a,l,c){const d=this.findPos(e[0]),h=this.findPos(e[1]);this.edit([d,h],i,a,l,c)}move(e,i,a){throw new j(V.ErrUnimplemented,`not implemented: ${e}, ${i}, ${a}`)}pathToTreePos(e){return this.indexTree.pathToTreePos(e)}purge(e){var l;(l=e.parent)==null||l.removeChild(e),this.nodeMapByID.remove(e.id);const i=e.insPrevID,a=e.insNextID;if(i){const c=this.findFloorNode(i);c.insNextID=a}if(a){const c=this.findFloorNode(a);c.insPrevID=i}e.insPrevID=void 0,e.insNextID=void 0}getGCPairs(){const e=[];return this.indexTree.traverse(i=>{i.getRemovedAt()&&e.push({parent:this,child:i});for(const a of i.getGCPairs())e.push(a)}),e}findPos(e,i=!0){const a=this.indexTree.findTreePos(e,i);return Wn.fromTreePos(a)}pathToPosRange(e){const i=this.pathToIndex(e);return[this.findPos(i),this.findPos(i+1)]}pathToPos(e){const i=this.indexTree.pathToIndex(e);return this.findPos(i)}getRoot(){return this.indexTree.getRoot()}getSize(){return this.indexTree.size}getNodeSize(){return this.nodeMapByID.size()}getIndexTree(){return this.indexTree}toXML(){return Up(this.indexTree.getRoot())}getDataSize(){const e={data:0,meta:0};return this.indexTree.traverse(i=>{if(i.getRemovedAt())return;const a=i.getDataSize();e.data+=a.data,e.meta+=a.meta}),{data:e.data,meta:e.meta+this.getMetaUsage()}}toJSON(){return JSON.stringify(this.getRootTreeNode())}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:JSON.parse(this.toJSON()),type:"YORKIE_TREE"}}toJSInfoForTest(){const e=this.indexTree.getRoot(),i=(a,l=void 0,c=void 0,d=0)=>{var S,x,E,I;let h,g,p;const w=a.isText?{node:a,offset:0}:l&&c?this.toTreePos(l,c):null;w&&(h=this.indexTree.indexOf(w),g=this.indexTree.treePosToPath(w),p=Wn.fromTreePos(w).toStruct());const v={type:a.type,parent:l==null?void 0:l.id.toTestString(),size:a.size,id:a.id.toTestString(),removedAt:(S=a.removedAt)==null?void 0:S.toTestString(),insPrev:(x=a.insPrevID)==null?void 0:x.toTestString(),insNext:(E=a.insNextID)==null?void 0:E.toTestString(),value:a.isText?a.value:void 0,isRemoved:a.isRemoved,children:[],depth:d,attributes:a.attrs?ss((I=a.attrs)==null?void 0:I.toObject()):void 0,index:h,path:g,pos:p};for(let k=0;k<a.allChildren.length;k++){const z=k===0?a:a.allChildren[k-1];v.children.push(i(a.allChildren[k],a,z,d+1))}return v};return i(e)}getRootTreeNode(){return yp(this.indexTree.getRoot())}toTestTreeNode(){return q1(this.indexTree.getRoot())}toSortedJSON(){return this.toJSON()}deepcopy(){const e=this.getRoot();return new vn(e.deepcopy(),this.getCreatedAt())}toPath(e,i){const a=this.toTreePos(e,i);return a?this.indexTree.treePosToPath(a):[]}toIndex(e,i){const a=this.toTreePos(e,i);return a?this.indexTree.indexOf(a):-1}indexToPath(e){return this.indexTree.indexToPath(e)}pathToIndex(e){return this.indexTree.pathToIndex(e)}indexRangeToPosRange(e){const i=this.findPos(e[0]);return e[0]===e[1]?[i,i]:[i,this.findPos(e[1])]}indexRangeToPosStructRange(e){const[i,a]=e,l=this.findPos(i);return i===a?[l.toStruct(),l.toStruct()]:[l.toStruct(),this.findPos(a).toStruct()]}posRangeToPathRange(e){const[[i,a]]=this.findNodesAndSplitText(e[0]),[[l,c]]=this.findNodesAndSplitText(e[1]);return[this.toPath(i,a),this.toPath(l,c)]}posRangeToIndexRange(e){const[[i,a]]=this.findNodesAndSplitText(e[0]),[[l,c]]=this.findNodesAndSplitText(e[1]);return[this.toIndex(i,a),this.toIndex(l,c)]}traverseInPosRange(e,i,a,l,c){const d=this.toIndex(e,i),h=this.toIndex(a,l);return this.indexTree.tokensBetween(d,h,c)}toTreePos(e,i){if(!e||!i)return;if(e.isRemoved){let l;for(;e.isRemoved;)l=e,e=l.parent;const c=e.findOffset(l);return{node:e,offset:c}}if(e===i)return{node:e,offset:0};let a=e.findOffset(i);if(!i.isRemoved){if(i.isText)return{node:i,offset:i.paddedSize};a++}return{node:e,offset:a}}makeDeletionChanges(e,i){const a=[],l=[];let c=null,d=null;for(let h=0;h<e.length;h++){const g=e[h],p=e[h+1];c||(c=g),d=g;const w=this.findRightToken(g);(!w||!p||w[0]!==p[0]||w[1]!==p[1])&&(l.push([c,d]),c=null,d=null)}for(const h of l){const[g,p]=h,[w,v]=this.findLeftToken(g),[S,x]=p,E=v===pe.Start?w:w.parent,I=x===pe.Start?S:S.parent,k=this.toIndex(E,w),z=this.toIndex(I,S);k<z&&(a.length>0&&k===a[a.length-1].to?(a[a.length-1].to=z,a[a.length-1].toPath=this.toPath(I,S)):a.push({type:"content",from:k,to:z,fromPath:this.toPath(E,w),toPath:this.toPath(I,S),actor:i.getActorID()}))}return a.reverse()}findRightToken([e,i]){if(i===pe.Start){const h=e.allChildren;return h.length>0?[h[0],h[0].isText?pe.Text:pe.Start]:[e,pe.End]}const a=e.parent,l=a.allChildren,c=l.indexOf(e);if(a&&c===l.length-1)return[a,pe.End];const d=l[c+1];return[d,d.isText?pe.Text:pe.Start]}findLeftToken([e,i]){if(i===pe.End){const h=e.allChildren;if(h.length>0){const g=h[h.length-1];return[g,g.isText?pe.Text:pe.End]}return[e,pe.Start]}const a=e.parent,l=a.allChildren,c=l.indexOf(e);if(a&&c===0)return[a,pe.Start];const d=l[c-1];return[d,d.isText?pe.Text:pe.End]}}class Zu extends Pn{constructor(e,i,a,l,c,d){super(e,d);y(this,"fromPos");y(this,"toPos");y(this,"contents");y(this,"splitLevel");this.fromPos=i,this.toPos=a,this.contents=l,this.splitLevel=c}static create(e,i,a,l,c,d){return new Zu(e,i,a,l,c,d)}execute(e,i,a){var w;const l=e.findByCreatedAt(this.getParentCreatedAt());if(!l)throw new j(V.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(l instanceof vn))throw new j(V.ErrInvalidArgument,"fail to execute, only Tree can execute edit");const c=this.getExecutedAt(),d=l,[h,g,p]=d.edit([this.fromPos,this.toPos],(w=this.contents)==null?void 0:w.map(v=>v.deepcopy()),this.splitLevel,c,(()=>{let v=c.getDelimiter();return this.contents!==void 0&&(v+=this.contents.length),()=>qn.of(c.getLamport(),++v,c.getActorID())})(),a);e.acc(p);for(const v of g)e.registerGCPair(v);return{opInfos:h.map(({from:v,to:S,value:x,splitLevel:E,fromPath:I,toPath:k})=>({type:"tree-edit",path:e.createPath(this.getParentCreatedAt()),from:v,to:S,value:x,splitLevel:E,fromPath:I,toPath:k}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),i=`${this.fromPos.getLeftSiblingID().getCreatedAt().toTestString()}/${this.fromPos.getLeftSiblingID().getOffset()}`,a=`${this.toPos.getLeftSiblingID().getCreatedAt().toTestString()}/${this.toPos.getLeftSiblingID().getOffset()}`,l=this.contents||[];return`${e}.EDIT(${i},${a},${l.map(c=>Up(c)).join("")})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getContents(){return this.contents}getSplitLevel(){return this.splitLevel}}class Uo{constructor(t){y(this,"vector");this.vector=t||new Map}set(t,e){this.vector.set(t,e)}unset(t){this.vector.delete(t)}get(t){return this.vector.get(t)}maxLamport(){let t=BigInt(0);for(const[,e]of this)e>t&&(t=e);return t}max(t){const e=new Map;for(const[i,a]of t){const l=this.vector.get(i),c=l&&l>a?l:a;e.set(i,c)}for(const[i,a]of this){const l=t.get(i),c=l&&l>a?l:a;e.set(i,c)}return new Uo(e)}afterOrEqual(t){const e=this.vector.get(t.getActorID());return e===void 0?!1:e>=t.getLamport()}deepcopy(){const t=new Map;for(const[e,i]of this.vector)t.set(e,i);return new Uo(t)}filter(t){const e=new Map;for(const[i]of t){const a=this.vector.get(i);a!==void 0&&e.set(i,a)}return new Uo(e)}size(){return this.vector.size}*[Symbol.iterator](){for(const[t,e]of this.vector)yield[t,e]}}const P1=new Uo(new Map);class Kn{constructor(t,e,i,a,l){y(this,"clientSeq");y(this,"serverSeq");y(this,"actor");y(this,"lamport");y(this,"versionVector");this.clientSeq=t,this.serverSeq=l,this.lamport=e,this.versionVector=a,this.actor=i}hasClocks(){return this.versionVector.size()>0&&this.lamport!=gp}static of(t,e,i,a,l){return new Kn(t,e,i,a,l)}next(t=!1){if(t)return new Kn(this.clientSeq+1,this.lamport,this.actor,P1,gp);const e=this.versionVector.deepcopy();return e.set(this.actor,this.lamport+1n),new Kn(this.clientSeq+1,this.lamport+1n,this.actor,e)}syncClocks(t){if(!t.hasClocks())return this;const e=t.lamport>this.lamport?t.lamport+1n:this.lamport+1n,i=this.versionVector.max(t.versionVector),a=new Kn(this.clientSeq,e,this.actor,i);return a.versionVector.set(this.actor,e),a}setClocks(t,e){const i=t>this.lamport?t+1n:this.lamport+1n;e.unset(Pd);const a=this.versionVector.max(e);return a.set(this.actor,i),Kn.of(this.clientSeq,i,this.actor,a)}createTimeTicket(t){return qn.of(this.lamport,t,this.actor)}setActor(t){return new Kn(this.clientSeq,this.lamport,t,this.versionVector,this.serverSeq)}setLamport(t){return new Kn(this.clientSeq,t,this.actor,this.versionVector,this.serverSeq)}setVersionVector(t){return new Kn(this.clientSeq,this.lamport,this.actor,t,this.serverSeq)}getClientSeq(){return this.clientSeq}getServerSeq(){return this.serverSeq?this.serverSeq.toString():""}getLamport(){return this.lamport}getLamportAsString(){return this.lamport.toString()}getActorID(){return this.actor}getVersionVector(){return this.versionVector}toTestString(){return`${this.lamport.toString()}:${this.actor.slice(-2)}:${this.clientSeq}`}}const F2=new Kn(0,0n,Pd,P1);class Ko{constructor({id:t,operations:e,presenceChange:i,message:a}){y(this,"id");y(this,"operations");y(this,"presenceChange");y(this,"message");this.id=t,this.operations=e||[],this.presenceChange=i,this.message=a}static create({id:t,operations:e,presenceChange:i,message:a}){return new Ko({id:t,operations:e,presenceChange:i,message:a})}getID(){return this.id}getMessage(){return this.message}hasOperations(){return this.operations.length>0}getOperations(){return this.operations}setActor(t){for(const e of this.operations)e.setActor(t);this.id=this.id.setActor(t)}hasPresenceChange(){return this.presenceChange!==void 0}getPresenceChange(){return this.presenceChange}execute(t,e,i){const a=[],l=[];for(const c of this.operations){const d=c.execute(t,i,this.id.getVersionVector());if(!d)continue;const{opInfos:h,reverseOp:g}=d;a.push(...h),g&&l.unshift(g)}return this.presenceChange&&(this.presenceChange.type===Er.Put?e.set(this.id.getActorID(),Xn(this.presenceChange.presence)):e.delete(this.id.getActorID())),{opInfos:a,reverseOps:l}}toTestString(){return`${this.operations.map(t=>t.toTestString()).join(",")}`}toStruct(){return{changeID:fe.bytesToHex(fe.toChangeID(this.getID()).toBinary()),message:this.getMessage(),operations:this.getOperations().map(t=>fe.bytesToHex(fe.toOperation(t).toBinary())),presenceChange:this.getPresenceChange()}}static fromStruct(t){const{changeID:e,operations:i,presenceChange:a,message:l}=t;return Ko.create({id:fe.bytesToChangeID(fe.hexToBytes(e)),operations:i==null?void 0:i.map(c=>fe.bytesToOperation(fe.hexToBytes(c))),presenceChange:a,message:l})}}class $d{constructor(t,e,i,a,l,c){y(this,"documentKey");y(this,"checkpoint");y(this,"isRemoved");y(this,"changes");y(this,"snapshot");y(this,"versionVector");this.documentKey=t,this.checkpoint=e,this.isRemoved=i,this.changes=a,this.snapshot=c,this.versionVector=l}static create(t,e,i,a,l,c){return new $d(t,e,i,a,l,c)}getDocumentKey(){return this.documentKey}getCheckpoint(){return this.checkpoint}getIsRemoved(){return this.isRemoved}getChanges(){return this.changes}hasChanges(){return this.changes.length>0}getChangeSize(){return this.changes.length}hasSnapshot(){return!!this.snapshot&&!!this.snapshot.length}getSnapshot(){return this.snapshot}getVersionVector(){return this.versionVector}}class qo{constructor(t,e){y(this,"serverSeq");y(this,"clientSeq");this.serverSeq=t,this.clientSeq=e}static of(t,e){return new qo(t,e)}increaseClientSeq(t){return t===0?this:new qo(this.serverSeq,this.clientSeq+t)}forward(t){if(this.equals(t))return this;const e=this.serverSeq>t.serverSeq?this.serverSeq:t.serverSeq,i=Math.max(this.clientSeq,t.clientSeq);return qo.of(e,i)}getServerSeqAsString(){return this.serverSeq.toString()}getClientSeq(){return this.clientSeq}getServerSeq(){return this.serverSeq}equals(t){return this.clientSeq===t.clientSeq&&this.serverSeq==t.serverSeq}toTestString(){return`serverSeq=${this.serverSeq}, clientSeq=${this.clientSeq}`}}const Z2=new qo(0n,0);class Tr{constructor(t,e){y(this,"createdAt");y(this,"offset");this.createdAt=t,this.offset=e}static of(t,e){return new Tr(t,e)}static fromStruct(t){return Tr.of(qn.fromStruct(t.createdAt),t.offset)}getCreatedAt(){return this.createdAt}getOffset(){return this.offset}equals(t){return this.createdAt.compare(t.createdAt)===0&&this.offset===t.offset}hasSameCreatedAt(t){return this.createdAt.compare(t.createdAt)===0}split(t){return new Tr(this.createdAt,this.offset+t)}toStruct(){return{createdAt:this.createdAt.toStruct(),offset:this.offset}}toTestString(){return`${this.createdAt.toTestString()}:${this.offset}`}toIDString(){return`${this.createdAt.toIDString()}:${this.offset}`}}const Q2=Tr.of(Yo,0);class er{constructor(t,e){y(this,"id");y(this,"relativeOffset");this.id=t,this.relativeOffset=e}static of(t,e){return new er(t,e)}static fromStruct(t){const e=Tr.fromStruct(t.id);return er.of(e,t.relativeOffset)}getID(){return this.id}getRelativeOffset(){return this.relativeOffset}getAbsoluteID(){return Tr.of(this.id.getCreatedAt(),this.id.getOffset()+this.relativeOffset)}toTestString(){return`${this.id.toTestString()}:${this.relativeOffset}`}toStruct(){return{id:this.id.toStruct(),relativeOffset:this.relativeOffset}}equals(t){return this.id.equals(t.id)?this.relativeOffset===t.relativeOffset:!1}}class Ws extends k1{constructor(e,i,a){super(i);y(this,"id");y(this,"removedAt");y(this,"prev");y(this,"next");y(this,"insPrev");y(this,"insNext");this.id=e,this.removedAt=a}static create(e,i){return new Ws(e,i)}static createComparator(){return(e,i)=>{const a=e.getCreatedAt().compare(i.getCreatedAt());return a!==0?a:e.getOffset()>i.getOffset()?1:e.getOffset()<i.getOffset()?-1:0}}getID(){return this.id}getCreatedAt(){return this.id.getCreatedAt()}getLength(){return this.removedAt?0:this.getContentLength()}getContentLength(){return this.value&&this.value.length||0}getPrev(){return this.prev}getNext(){return this.next}getInsPrev(){return this.insPrev}getInsNext(){return this.insNext}getInsPrevID(){return this.insPrev.getID()}setPrev(e){this.prev=e,e&&(e.next=this)}setNext(e){this.next=e,e&&(e.prev=this)}setInsPrev(e){this.insPrev=e,e&&(e.insNext=this)}setInsNext(e){this.insNext=e,e&&(e.insPrev=this)}hasNext(){return!!this.next}hasInsPrev(){return!!this.insPrev}isRemoved(){return!!this.removedAt}getRemovedAt(){return this.removedAt}split(e){return new Ws(this.id.split(e),this.splitValue(e),this.removedAt)}canDelete(e,i){const a=!this.removedAt;return this.getCreatedAt().getLamport()<=i&&(!this.removedAt||e.after(this.removedAt))?a:!1}canStyle(e,i){return this.getCreatedAt().getLamport()<=i&&(!this.removedAt||e.after(this.removedAt))}remove(e){this.removedAt=e}createPosRange(){return[er.of(this.id,0),er.of(this.id,this.getLength())]}getDataSize(){const e=this.value.getDataSize();return this.id&&(e.meta+=br),this.removedAt&&(e.meta+=br),e}deepcopy(){return new Ws(this.id,this.value,this.removedAt)}toTestString(){return`${this.id.toTestString()} ${this.value?this.value:""}`}splitValue(e){const i=this.value;return this.value=i.substring(0,e),i.substring(e,i.length)}toIDString(){return this.id.toIDString()}}class Fo{constructor(){y(this,"head");y(this,"treeByIndex");y(this,"treeByID");this.head=Ws.create(Q2),this.treeByIndex=new Ru,this.treeByID=new U1(Ws.createComparator()),this.treeByIndex.insert(this.head),this.treeByID.put(this.head.getID(),this.head)}static create(){return new Fo}edit(t,e,i,a){const l={data:0,meta:0},[c,d,h]=this.findNodeWithSplit(t[1],e),[g,p,w]=this.findNodeWithSplit(t[0],e);_e(l,d,p);const v=this.findBetween(w,h),[S,x]=this.deleteNodes(v,e,a),E=h?h.getID():c.getID();let I=er.of(E,0);if(i){const z=this.posToIndex(g.createPosRange()[1],!0),N=this.insertAfter(g,Ws.create(Tr.of(e,0),i));_e(l,N.getDataSize()),S.length&&S[S.length-1].from===z?S[S.length-1].value=i:S.push({actor:e.getActorID(),from:z,to:z,value:i}),I=er.of(N.getID(),N.getContentLength())}const k=[];for(const[,z]of x)k.push({parent:this,child:z});return[I,k,l,S]}indexToPos(t){const[e,i]=this.treeByIndex.find(t),a=e;return er.of(a.getID(),i)}findIndexesFromRange(t){const[e,i]=t;return[this.posToIndex(e,!1),this.posToIndex(i,!0)]}posToIndex(t,e){const i=t.getAbsoluteID(),a=e?this.findFloorNodePreferToLeft(i):this.findFloorNode(i);if(!a)throw new j(V.ErrInvalidArgument,`the node of the given id should be found: ${i.toTestString()}`);const l=this.treeByIndex.indexOf(a),c=a.isRemoved()?0:i.getOffset()-a.getID().getOffset();return l+c}findNode(t){return this.findFloorNode(t)}get length(){return this.treeByIndex.length}getTreeByIndex(){return this.treeByIndex}getTreeByID(){return this.treeByID}toString(){const t=[];for(const e of this)e.isRemoved()||t.push(e.getValue());return t.join("")}*[Symbol.iterator](){let t=this.head.getNext();for(;t;)yield t,t=t.getNext()}getHead(){return this.head}deepcopy(){const t=new Fo;let e=this.head.getNext(),i=t.head,a;for(;e;){if(a=t.insertAfter(i,e.deepcopy()),e.hasInsPrev()){const l=t.findNode(e.getInsPrevID());a.setInsPrev(l)}i=a,e=e.getNext()}return t}toTestString(){const t=[];let e=this.head;for(;e;)e.isRemoved()?t.push(`{${e.toTestString()}}`):t.push(`[${e.toTestString()}]`),e=e.getNext();return t.join("")}insertAfter(t,e){const i=t.getNext();return e.setPrev(t),i&&i.setPrev(e),this.treeByID.put(e.getID(),e),this.treeByIndex.insertAfter(t,e),e}findNodeWithSplit(t,e){const i=t.getAbsoluteID();let a=this.findFloorNodePreferToLeft(i);const l=i.getOffset()-a.getID().getOffset(),[,c]=this.splitNode(a,l);for(;a.hasNext()&&a.getNext().getCreatedAt().after(e);)a=a.getNext();return[a,c,a.getNext()]}findFloorNodePreferToLeft(t){let e=this.findFloorNode(t);if(!e)throw new j(V.ErrInvalidArgument,`the node of the given id should be found: ${t.toTestString()}`);if(t.getOffset()>0&&e.getID().getOffset()==t.getOffset()){if(!e.hasInsPrev())return e;e=e.getInsPrev()}return e}findFloorNode(t){const e=this.treeByID.floorEntry(t);if(e&&!(!e.key.equals(t)&&!e.key.hasSameCreatedAt(t)))return e.value}findBetween(t,e){const i=[];let a=t;for(;a&&a!==e;)i.push(a),a=a.getNext();return i}splitNode(t,e){const i={data:0,meta:0};if(e>t.getContentLength())throw new j(V.ErrInvalidArgument,"offset should be less than or equal to length");if(e===0)return[t,i];if(e===t.getContentLength())return[t.getNext(),i];const a=t.getDataSize(),l=t.split(e);this.treeByIndex.updateWeight(l),this.insertAfter(t,l);const c=t.getInsNext();return c&&c.setInsPrev(l),l.setInsPrev(t),_e(i,t.getDataSize(),l.getDataSize()),_o(i,a),[l,i]}deleteNodes(t,e,i){if(!t.length)return[[],new Map];const[a,l]=this.filterNodes(t,e,i),c=new Map,d=this.makeChanges(l,e);for(const h of a)c.set(h.getID().toIDString(),h),h.remove(e);return this.deleteIndexNodes(l),[d,c]}filterNodes(t,e,i){const a=[],l=[],[c,d]=this.findEdgesOfCandidates(t);l.push(c);for(const h of t){const g=h.getCreatedAt().getActorID();let p=bu;i!=null&&(p=i.get(g)?i.get(g):0n),h.canDelete(e,p)?a.push(h):l.push(h)}return l.push(d),[a,l]}findEdgesOfCandidates(t){return[t[0].getPrev(),t[t.length-1].getNext()]}makeChanges(t,e){const i=[];let a,l;for(let c=0;c<t.length-1;c++){const d=t[c],h=t[c+1];d.getNext()!=h&&([a]=this.findIndexesFromRange(d.getNext().createPosRange()),h?[,l]=this.findIndexesFromRange(h.getPrev().createPosRange()):l=this.treeByIndex.length,a<l&&i.push({actor:e.getActorID(),from:a,to:l}))}return i.reverse()}deleteIndexNodes(t){for(let e=0;e<t.length-1;e++){const i=t[e],a=t[e+1];i.getNext()!=a&&this.treeByIndex.deleteRange(i,a)}}purge(t){this.treeByIndex.delete(t),this.treeByID.remove(t.getID());const e=t.getPrev(),i=t.getNext(),a=t.getInsPrev(),l=t.getInsNext();e&&e.setNext(i),i&&i.setPrev(e),t.setPrev(void 0),t.setNext(void 0),a&&a.setInsNext(l),l&&l.setInsPrev(a),t.setInsPrev(void 0),t.setInsNext(void 0)}}const PS=n=>n<0?Math.ceil(n):Math.floor(n);var Nr=(n=>(n[n.Int=0]="Int",n[n.Long=1]="Long",n))(Nr||{});class rn extends Xu{constructor(e,i,a){super(a);y(this,"valueType");y(this,"value");switch(this.valueType=e,e){case 0:typeof i=="number"?i>Math.pow(2,31)-1||i<-Math.pow(2,31)?this.value=Ut.fromNumber(i).toInt():this.value=PS(i):this.value=i.toInt();break;case 1:typeof i=="number"?this.value=Ut.fromNumber(i):this.value=i;break;default:throw new j(V.ErrUnimplemented,`unimplemented type: ${e}`)}}static create(e,i,a){return new rn(e,i,a)}static valueFromBytes(e,i){switch(e){case 0:return i[0]|i[1]<<8|i[2]<<16|i[3]<<24;case 1:return Ut.fromBytesLE(Array.from(i));default:throw new j(V.ErrUnimplemented,`unimplemented type: ${e}`)}}getDataSize(){return{data:this.valueType===0?4:8,meta:this.getMetaUsage()}}toJSON(){return`${this.value}`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:this.value,type:"YORKIE_COUNTER"}}deepcopy(){const e=rn.create(this.valueType,this.value,this.getCreatedAt());return e.setMovedAt(this.getMovedAt()),e}getType(){return this.valueType}static getCounterType(e){switch(typeof e){case"object":return e instanceof Ut?1:void 0;case"number":return e>Math.pow(2,31)-1||e<-Math.pow(2,31)?1:0;default:return}}static isSupport(e){return!!rn.getCounterType(e)}static isInteger(e){return e%1===0}isNumericType(){const e=this.valueType;return e===0||e===1}getValueType(){return this.valueType}getValue(){return this.value}toBytes(){switch(this.valueType){case 0:{const e=this.value;return new Uint8Array([e&255,e>>8&255,e>>16&255,e>>24&255])}case 1:{const i=this.value.toBytesLE();return Uint8Array.from(i)}default:throw new j(V.ErrUnimplemented,`unimplemented type: ${this.valueType}`)}}increase(e){function i(a){if(!a.isNumericType())throw new TypeError(`Unsupported type of value: ${typeof a.getValue()}`)}return i(this),i(e),this.valueType===1?this.value=this.value.add(e.getValue()):e.getType()===ne.Long?this.value=this.value+e.getValue().toInt():this.value=Ut.fromNumber(this.value+PS(e.getValue())).toInt(),this}}class Zo extends Pn{constructor(e,i,a){super(e,a);y(this,"value");this.value=i}static create(e,i,a){return new Zo(e,i,a)}execute(e){const i=e.findByCreatedAt(this.getParentCreatedAt());if(!i)throw new j(V.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(i instanceof rn))throw new j(V.ErrInvalidArgument,"fail to execute, only Counter can execute increase");const a=i,l=this.value.deepcopy();return a.increase(l),{opInfos:[{type:"increase",path:e.createPath(this.getParentCreatedAt()),value:l.getValue()}],reverseOp:this.toReverseOperation()}}toReverseOperation(){const e=this.value.deepcopy(),a=e.getType()===ne.Long?e.getValue().multiply(-1):e.getValue()*-1;return Zo.create(this.getParentCreatedAt(),le.of(a,e.getCreatedAt()))}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.INCREASE.${this.value.toJSON()}`}getValue(){return this.value}}class as extends Pn{constructor(e,i,a,l,c,d){super(e,d);y(this,"fromPos");y(this,"toPos");y(this,"attributes");y(this,"attributesToRemove");this.fromPos=i,this.toPos=a,this.attributes=l,this.attributesToRemove=c}static create(e,i,a,l,c){return new as(e,i,a,l,[],c)}static createTreeRemoveStyleOperation(e,i,a,l,c){return new as(e,i,a,new Map,l,c)}execute(e,i,a){const l=e.findByCreatedAt(this.getParentCreatedAt());if(!l)throw new j(V.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(l instanceof vn))throw new j(V.ErrInvalidArgument,"fail to execute, only Tree can execute edit");const c=l;let d,h,g={data:0,meta:0};if(this.attributes.size){const p={};[...this.attributes].forEach(([w,v])=>p[w]=v),[h,d,g]=c.style([this.fromPos,this.toPos],p,this.getExecutedAt(),a)}else{const p=this.attributesToRemove;[h,d,g]=c.removeStyle([this.fromPos,this.toPos],p,this.getExecutedAt(),a)}e.acc(g);for(const p of h)e.registerGCPair(p);return{opInfos:d.map(({from:p,to:w,value:v,fromPath:S,toPath:x})=>({type:"tree-style",from:p,to:w,value:this.attributes.size?{attributes:v}:{attributesToRemove:v},fromPath:S,toPath:x,path:e.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),i=`${this.fromPos.getLeftSiblingID().getCreatedAt().toTestString()}:${this.fromPos.getLeftSiblingID().getOffset()}`,a=`${this.toPos.getLeftSiblingID().getCreatedAt().toTestString()}:${this.toPos.getLeftSiblingID().getOffset()}`;return`${e}.STYLE(${i},${a},${Object.entries(this.attributes||{}).map(([l,c])=>`${l}:"${c}"`).join(" ")})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getAttributes(){return this.attributes}getAttributesToRemove(){return this.attributesToRemove}}class Qu extends Pn{constructor(e,i,a,l){super(e,l);y(this,"createdAt");y(this,"value");this.createdAt=i,this.value=a}static create(e,i,a,l){return new Qu(e,i,a,l)}execute(e){const i=e.findByCreatedAt(this.getParentCreatedAt());if(!i)throw new j(V.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(i instanceof He))throw new j(V.ErrInvalidArgument,"fail to execute, only array can execute set");const a=this.value.deepcopy();return i.insertAfter(this.createdAt,a,this.getExecutedAt()),i.delete(this.createdAt,this.getExecutedAt()),e.registerElement(a),{opInfos:[{type:"array-set",path:e.createPath(this.getParentCreatedAt())}],reverseOp:void 0}}getEffectedCreatedAt(){return this.createdAt}toTestString(){return`${this.getParentCreatedAt().toTestString()}.ARRAY_SET.${this.createdAt.toTestString()}=${this.value.toSortedJSON()}`}getCreatedAt(){return this.createdAt}getValue(){return this.value}}function W2(n){const t=new qd,e=t.data;for(const[i,a]of Object.entries(n))e[i]=JSON.stringify(a);return t}function tC(n){if(n.type===Er.Put)return new Ou({type:Ba.PUT,presence:W2(n.presence)});if(n.type===Er.Clear)return new Ou({type:Ba.CLEAR});throw new j(V.ErrUnimplemented,"unimplemented type")}function eC(n){return new C1({serverSeq:n.getServerSeq(),clientSeq:n.getClientSeq()})}function J1(n){return new _d({clientSeq:n.getClientSeq(),lamport:n.getLamport(),actorId:Vd(n.getActorID()),versionVector:qp(n.getVersionVector())})}function bt(n){if(n)return new wt({lamport:n.getLamport(),delimiter:n.getDelimiter(),actorId:Vd(n.getActorID())})}function qp(n){if(!n)return;const t=new Ud;for(const[e,i]of n){const a=_C(Vd(e));t.vector[a]=BigInt(i.toString())}return t}function $1(n){switch(n){case ne.Null:return It.NULL;case ne.Boolean:return It.BOOLEAN;case ne.Integer:return It.INTEGER;case ne.Long:return It.LONG;case ne.Double:return It.DOUBLE;case ne.String:return It.STRING;case ne.Bytes:return It.BYTES;case ne.Date:return It.DATE;default:throw new j(V.ErrInvalidType,`unsupported type: ${n}`)}}function H1(n){switch(n){case Nr.Int:return It.INTEGER_CNT;case Nr.Long:return It.LONG_CNT;default:throw new j(V.ErrInvalidType,`unsupported type: ${n}`)}}function Ef(n){if(n instanceof $e)return new Cn({type:It.JSON_OBJECT,createdAt:bt(n.getCreatedAt()),value:nx(n)});if(n instanceof He)return new Cn({type:It.JSON_ARRAY,createdAt:bt(n.getCreatedAt()),value:MC(n)});if(n instanceof yn)return new Cn({type:It.TEXT,createdAt:bt(n.getCreatedAt())});if(n instanceof le)return new Cn({type:$1(n.getType()),createdAt:bt(n.getCreatedAt()),value:n.toBytes()});if(n instanceof rn)return new Cn({type:H1(n.getType()),createdAt:bt(n.getCreatedAt()),value:n.toBytes()});if(n instanceof vn)return new Cn({type:It.TREE,createdAt:bt(n.getCreatedAt()),value:zC(n)});throw new j(V.ErrUnimplemented,"unimplemented element")}function nC(n){return new Du({createdAt:bt(n.getCreatedAt()),offset:n.getOffset()})}function Nf(n){return new za({createdAt:bt(n.getID().getCreatedAt()),offset:n.getID().getOffset(),relativeOffset:n.getRelativeOffset()})}function Cf(n){return new Ma({parentId:xu(n.getParentID()),leftSiblingId:xu(n.getLeftSiblingID())})}function xu(n){return new Zs({createdAt:bt(n.getCreatedAt()),offset:n.getOffset()})}function V1(n){const t=new zp;if(n instanceof La){const e=n,i=new Wf;i.parentCreatedAt=bt(e.getParentCreatedAt()),i.key=e.getKey(),i.value=Ef(e.getValue()),i.executedAt=bt(e.getExecutedAt()),t.body.case="set",t.body.value=i}else if(n instanceof il){const e=n,i=new td;i.parentCreatedAt=bt(e.getParentCreatedAt()),i.prevCreatedAt=bt(e.getPrevCreatedAt()),i.value=Ef(e.getValue()),i.executedAt=bt(e.getExecutedAt()),t.body.case="add",t.body.value=i}else if(n instanceof rs){const e=n,i=new ed;i.parentCreatedAt=bt(e.getParentCreatedAt()),i.prevCreatedAt=bt(e.getPrevCreatedAt()),i.createdAt=bt(e.getCreatedAt()),i.executedAt=bt(e.getExecutedAt()),t.body.case="move",t.body.value=i}else if(n instanceof ls){const e=n,i=new nd;i.parentCreatedAt=bt(e.getParentCreatedAt()),i.createdAt=bt(e.getCreatedAt()),i.executedAt=bt(e.getExecutedAt()),t.body.case="remove",t.body.value=i}else if(n instanceof Ku){const e=n,i=new rd;i.parentCreatedAt=bt(e.getParentCreatedAt()),i.from=Nf(e.getFromPos()),i.to=Nf(e.getToPos()),i.content=e.getContent();const a=i.attributes;for(const[l,c]of e.getAttributes())a[l]=c;i.executedAt=bt(e.getExecutedAt()),t.body.case="edit",t.body.value=i}else if(n instanceof Fu){const e=n,i=new id;i.parentCreatedAt=bt(e.getParentCreatedAt()),i.from=Nf(e.getFromPos()),i.to=Nf(e.getToPos());const a=i.attributes;for(const[l,c]of e.getAttributes())a[l]=c;i.executedAt=bt(e.getExecutedAt()),t.body.case="style",t.body.value=i}else if(n instanceof Zo){const e=n,i=new sd;i.parentCreatedAt=bt(e.getParentCreatedAt()),i.value=Ef(e.getValue()),i.executedAt=bt(e.getExecutedAt()),t.body.case="increase",t.body.value=i}else if(n instanceof Zu){const e=n,i=new ad;i.parentCreatedAt=bt(e.getParentCreatedAt()),i.from=Cf(e.getFromPos()),i.to=Cf(e.getToPos()),i.contents=uC(e.getContents()),i.splitLevel=e.getSplitLevel(),i.executedAt=bt(e.getExecutedAt()),t.body.case="treeEdit",t.body.value=i}else if(n instanceof as){const e=n,i=new od;i.parentCreatedAt=bt(e.getParentCreatedAt()),i.from=Cf(e.getFromPos()),i.to=Cf(e.getToPos());const a=e.getAttributesToRemove();if(a.length>0)i.attributesToRemove=a;else{const l=i.attributes;for(const[c,d]of e.getAttributes())l[c]=d}i.executedAt=bt(e.getExecutedAt()),t.body.case="treeStyle",t.body.value=i}else if(n instanceof Qu){const e=n,i=new ld;i.parentCreatedAt=bt(e.getParentCreatedAt()),i.createdAt=bt(e.getCreatedAt()),i.value=Ef(e.getValue()),i.executedAt=bt(e.getExecutedAt()),t.body.case="arraySet",t.body.value=i}else throw new j(V.ErrUnimplemented,"unimplemented operation");return t}function rC(n){const t=[];for(const e of n)t.push(V1(e));return t}function iC(n){const t=new E1({id:J1(n.getID()),message:n.getMessage()});return n.hasOperations()&&(t.operations=rC(n.getOperations())),n.hasPresenceChange()&&(t.presenceChange=tC(n.getPresenceChange())),t}function sC(n){const t=[];for(const e of n)t.push(iC(e));return t}function aC(n){const t=[];for(const e of n)t.push(new N1({key:e.getStrKey(),element:Jp(e.getValue())}));return t}function oC(n){const t=[];for(const e of n)t.push(new md({element:Jp(e.getValue())}));return t}function lC(n){const t=[];for(const e of n){const i=new pd;i.id=nC(e.getID()),i.value=e.getValue().getContent(),i.removedAt=bt(e.getRemovedAt());const a=i.attributes,l=e.getValue().getAttrs();for(const c of l){const d=new jo;d.value=c.getValue(),d.updatedAt=bt(c.getUpdatedAt()),a[c.getKey()]=d}t.push(i)}return t}function uC(n){const t=[];if(!n||!n.length)return t;for(const e of n)t.push(new yd({content:Pp(e)}));return t}function cC(n){const t={};for(const e of n)t[e.getKey()]=new jo({value:e.getValue(),updatedAt:bt(e.getUpdatedAt()),isRemoved:e.isRemoved()});return t}function Pp(n){if(!n)return[];const t=[];return Jd(n,(e,i)=>{const a=new ku({id:xu(e.id),type:e.type,removedAt:bt(e.removedAt),depth:i});e.isText&&(a.value=e.value),e.insPrevID&&(a.insPrevId=xu(e.insPrevID)),e.insNextID&&(a.insNextId=xu(e.insNextID)),e.attrs&&(a.attributes=cC(e.attrs)),t.push(a)}),t}function fC(n){const t=new sn;return t.body.case="jsonObject",t.body.value=new ud({nodes:aC(n.getRHT()),createdAt:bt(n.getCreatedAt()),movedAt:bt(n.getMovedAt()),removedAt:bt(n.getRemovedAt())}),t}function j1(n){const t=new sn;return t.body.case="jsonArray",t.body.value=new cd({nodes:oC(n.getElements()),createdAt:bt(n.getCreatedAt()),movedAt:bt(n.getMovedAt()),removedAt:bt(n.getRemovedAt())}),t}function dC(n){const t=new sn;return t.body.case="primitive",t.body.value=new fd({type:$1(n.getType()),value:n.toBytes(),createdAt:bt(n.getCreatedAt()),movedAt:bt(n.getMovedAt()),removedAt:bt(n.getRemovedAt())}),t}function hC(n){const t=new sn;return t.body.case="text",t.body.value=new dd({nodes:lC(n.getRGATreeSplit()),createdAt:bt(n.getCreatedAt()),movedAt:bt(n.getMovedAt()),removedAt:bt(n.getRemovedAt())}),t}function gC(n){const t=new sn;return t.body.case="counter",t.body.value=new hd({type:H1(n.getType()),value:n.toBytes(),createdAt:bt(n.getCreatedAt()),movedAt:bt(n.getMovedAt()),removedAt:bt(n.getRemovedAt())}),t}function Y1(n){const t=new sn;return t.body.case="tree",t.body.value=new gd({nodes:Pp(n.getRoot()),createdAt:bt(n.getCreatedAt()),movedAt:bt(n.getMovedAt()),removedAt:bt(n.getRemovedAt())}),t}function Jp(n){if(n instanceof $e)return fC(n);if(n instanceof He)return j1(n);if(n instanceof le)return dC(n);if(n instanceof yn)return hC(n);if(n instanceof rn)return gC(n);if(n instanceof vn)return Y1(n);throw new j(V.ErrUnimplemented,"unimplemented element")}function mC(n){return new fs({documentKey:n.getDocumentKey(),checkpoint:eC(n.getCheckpoint()),isRemoved:n.getIsRemoved(),changes:sC(n.getChanges()),snapshot:n.getSnapshot(),versionVector:qp(n.getVersionVector())})}function pu(n){if(!(n instanceof Gt))return{};const t=n.findDetails(R2);for(const e of t)return e.metadata;return{}}function Vs(n){return pu(n).code??""}function G1(n){return Kn.of(n.clientSeq,BigInt(n.lamport),Yp(n.actorId),$p(n.versionVector),BigInt(n.serverSeq))}function $p(n){if(!n)return;const t=new Uo;return Object.entries(n.vector).forEach(([e,i])=>{const a=Hd(LC(e));t.set(a,BigInt(i.toString()))}),t}function xt(n){if(n)return qn.of(BigInt(n.lamport),n.delimiter,Yp(n.actorId))}function Hp(n){const t={};return Object.entries(n.data).forEach(([e,i])=>{t[e]=JSON.parse(i)}),t}function pC(n){const t=n.type;if(t===Ba.PUT){const e=Hp(n.presence);return{type:Er.Put,presence:e}}if(t===Ba.CLEAR)return{type:Er.Clear};throw new j(V.ErrInvalidType,`unsupported type: ${t}`)}function yC(n){const t=new Map;return Object.entries(n).forEach(([e,i])=>{t.set(e,Hp(i))}),t}function X1(n){switch(n){case It.NULL:return ne.Null;case It.BOOLEAN:return ne.Boolean;case It.INTEGER:return ne.Integer;case It.LONG:return ne.Long;case It.DOUBLE:return ne.Double;case It.STRING:return ne.String;case It.BYTES:return ne.Bytes;case It.DATE:return ne.Date}throw new j(V.ErrUnimplemented,`unimplemented value type: ${n}`)}function xd(n){switch(n){case It.INTEGER_CNT:return Nr.Int;case It.LONG_CNT:return Nr.Long}throw new j(V.ErrUnimplemented,`unimplemented value type: ${n}`)}function Df(n){switch(n.type){case It.JSON_OBJECT:return n.value?ex(n.value):$e.create(xt(n.createdAt));case It.JSON_ARRAY:return n.value?RC(n.value):He.create(xt(n.createdAt));case It.TEXT:return yn.create(Fo.create(),xt(n.createdAt));case It.TREE:return BC(n.value);case It.NULL:case It.BOOLEAN:case It.INTEGER:case It.LONG:case It.DOUBLE:case It.STRING:case It.BYTES:case It.DATE:return le.of(le.valueFromBytes(X1(n.type),n.value),xt(n.createdAt));case It.INTEGER_CNT:case It.LONG_CNT:return rn.create(xd(n.type),rn.valueFromBytes(xd(n.type),n.value),xt(n.createdAt))}}function kf(n){return er.of(Tr.of(xt(n.createdAt),n.offset),n.relativeOffset)}function K1(n){return Tr.of(xt(n.createdAt),n.offset)}function vC(n){const t=Bu.create(n.value);Object.entries(n.attributes).forEach(([i,a])=>{t.setAttr(i,a.value,xt(a.updatedAt))});const e=Ws.create(K1(n.id),t);return e.remove(xt(n.removedAt)),e}function Oo(n){return Wn.of(Tu(n.parentId),Tu(n.leftSiblingId))}function Tu(n){return Ue.of(xt(n.createdAt),n.offset)}function wC(n){if(!n.length)return;const t=[];return n.forEach(e=>{const i=Vp(e.content);t.push(i)}),t}function Vp(n){if(n.length===0)return;const t=[];for(const a of n)t.push(bC(a));const e=t[t.length-1],i=new Map;i.set(n[t.length-1].depth,t[t.length-1]);for(let a=t.length-2;a>=0;a--)i.get(n[a].depth-1).prepend(t[a]),i.set(n[a].depth,t[a]);return e.updateDescendantsSize(),vn.create(e,Yo).getRoot()}function SC(n){const t=us.create();for(const[e,i]of Object.entries(n))t.setInternal(e,i.value,xt(i.updatedAt),i.isRemoved);return t}function bC(n){const t=Tu(n.id),e=pn.create(t,n.type),i=Object.entries(n.attributes);return e.isText?e.value=n.value:i.length&&(e.attrs=SC(n.attributes)),n.insPrevId&&(e.insPrevID=Tu(n.insPrevId)),n.insNextId&&(e.insNextID=Tu(n.insNextId)),e.removedAt=xt(n.removedAt),e}function F1(n){if(n.body.case==="set"){const t=n.body.value;return La.create(t.key,Df(t.value),xt(t.parentCreatedAt),xt(t.executedAt))}else if(n.body.case==="add"){const t=n.body.value;return il.create(xt(t.parentCreatedAt),xt(t.prevCreatedAt),Df(t.value),xt(t.executedAt))}else if(n.body.case==="move"){const t=n.body.value;return rs.create(xt(t.parentCreatedAt),xt(t.prevCreatedAt),xt(t.createdAt),xt(t.executedAt))}else if(n.body.case==="remove"){const t=n.body.value;return ls.create(xt(t.parentCreatedAt),xt(t.createdAt),xt(t.executedAt))}else if(n.body.case==="edit"){const t=n.body.value,e=new Map;return Object.entries(t.attributes).forEach(([i,a])=>{e.set(i,a)}),Ku.create(xt(t.parentCreatedAt),kf(t.from),kf(t.to),t.content,e,xt(t.executedAt))}else if(n.body.case==="style"){const t=n.body.value,e=new Map;return Object.entries(t.attributes).forEach(([i,a])=>{e.set(i,a)}),Fu.create(xt(t.parentCreatedAt),kf(t.from),kf(t.to),e,xt(t.executedAt))}else if(n.body.case==="increase"){const t=n.body.value;return Zo.create(xt(t.parentCreatedAt),Df(t.value),xt(t.executedAt))}else if(n.body.case==="treeEdit"){const t=n.body.value;return Zu.create(xt(t.parentCreatedAt),Oo(t.from),Oo(t.to),wC(t.contents),t.splitLevel,xt(t.executedAt))}else if(n.body.case==="treeStyle"){const t=n.body.value,e=new Map,i=t.attributesToRemove;return(i==null?void 0:i.length)>0?as.createTreeRemoveStyleOperation(xt(t.parentCreatedAt),Oo(t.from),Oo(t.to),i,xt(t.executedAt)):(Object.entries(t.attributes).forEach(([a,l])=>{e.set(a,l)}),as.create(xt(t.parentCreatedAt),Oo(t.from),Oo(t.to),e,xt(t.executedAt)))}else if(n.body.case==="arraySet"){const t=n.body.value;return Qu.create(xt(t.parentCreatedAt),xt(t.createdAt),Df(t.value),xt(t.executedAt))}else throw new j(V.ErrUnimplemented,"unimplemented operation")}function xC(n){const t=[];for(const e of n){const i=F1(e);i&&t.push(i)}return t}function Z1(n){const t=[];for(const e of n)t.push(Ko.create({id:G1(e.id),operations:xC(e.operations),presenceChange:e.presenceChange?pC(e.presenceChange):void 0,message:e.message}));return t}function TC(n){return qo.of(BigInt(n.serverSeq),n.clientSeq)}function AC(n){return $d.create(n.documentKey,TC(n.checkpoint),n.isRemoved,Z1(n.changes),$p(n.versionVector),n.snapshot)}function Q1(n){const t=new Iu;for(const i of n.nodes){const a=jp(i.element);t.set(i.key,a,a.getPositionedAt())}const e=new $e(xt(n.createdAt),t);return e.setMovedAt(xt(n.movedAt)),e.setRemovedAt(xt(n.removedAt)),e}function W1(n){const t=new Mu;for(const i of n.nodes)t.insert(jp(i.element));const e=new He(xt(n.createdAt),t);return e.setMovedAt(xt(n.movedAt)),e.setRemovedAt(xt(n.removedAt)),e}function EC(n){const t=le.of(le.valueFromBytes(X1(n.type),n.value),xt(n.createdAt));return t.setMovedAt(xt(n.movedAt)),t.setRemovedAt(xt(n.removedAt)),t}function NC(n){const t=new Fo;let e=t.getHead();for(const a of n.nodes){const l=t.insertAfter(e,vC(a));a.insPrevId&&l.setInsPrev(t.findNode(K1(a.insPrevId))),e=l}const i=new yn(t,xt(n.createdAt));return i.setMovedAt(xt(n.movedAt)),i.setRemovedAt(xt(n.removedAt)),i}function CC(n){const t=rn.create(xd(n.type),rn.valueFromBytes(xd(n.type),n.value),xt(n.createdAt));return t.setMovedAt(xt(n.movedAt)),t.setRemovedAt(xt(n.removedAt)),t}function tx(n){const t=Vp(n.nodes);return vn.create(t,xt(n.createdAt))}function jp(n){if(n.body.case==="jsonObject")return Q1(n.body.value);if(n.body.case==="jsonArray")return W1(n.body.value);if(n.body.case==="primitive")return EC(n.body.value);if(n.body.case==="text")return NC(n.body.value);if(n.body.case==="counter")return CC(n.body.value);if(n.body.case==="tree")return tx(n.body.value);throw new j(V.ErrUnimplemented,"unimplemented element")}function DC(n){return n.map(t=>({path:t.path,type:t.type}))}function kC(n){if(!n)return{root:$e.create(Yo),presences:new Map};const t=Vm.fromBinary(n);return{root:jp(t.root),presences:yC(t.presences)}}function OC(n){const t=qp(n);return Hd(t.toBinary())}function IC(n){const t=Gp(n),e=Ud.fromBinary(t);return $p(e)}function ex(n){if(!n)throw new j(V.ErrInvalidArgument,"bytes is empty");const t=sn.fromBinary(n);return Q1(t.body.value)}function nx(n){return Jp(n).toBinary()}function RC(n){if(!n)throw new j(V.ErrInvalidArgument,"bytes is empty");const t=sn.fromBinary(n);return W1(t.body.value)}function MC(n){return j1(n).toBinary()}function BC(n){if(!n)throw new j(V.ErrInvalidArgument,"bytes is empty");const t=sn.fromBinary(n);return tx(t.body.value)}function zC(n){return Y1(n).toBinary()}function Hd(n){return n?Array.from(n).map(t=>t.toString(16).padStart(2,"0")).join(""):""}function Yp(n){return Hd(n)}function Gp(n){return new Uint8Array(n.match(/.{1,2}/g).map(t=>parseInt(t,16)))}function LC(n){if(typeof window<"u"&&typeof window.atob=="function"){const t=window.atob(n),e=t.length,i=new Uint8Array(e);for(let a=0;a<e;a++)i[a]=t.charCodeAt(a);return i}else if(typeof globalThis<"u"&&typeof globalThis.Buffer<"u"){const t=globalThis.Buffer;return new Uint8Array(t.from(n,"base64"))}else throw new Error("No base64 decoder available")}function Vd(n){return Gp(n)}function _C(n){if(typeof window<"u"&&typeof window.btoa=="function"){let t="";for(let e=0;e<n.byteLength;e++)t+=String.fromCharCode(n[e]);return window.btoa(t)}else{if(typeof globalThis<"u"&&typeof globalThis.Buffer<"u")return globalThis.Buffer.from(n).toString("base64");throw new Error("No base64 encoder available")}}function UC(n){const t=_d.fromBinary(n);return G1(t)}function qC(n){const t=zp.fromBinary(n);return F1(t)}const fe={fromPresence:Hp,toChangePack:mC,fromChangePack:AC,fromChanges:Z1,toTreeNodes:Pp,fromTreeNodes:Vp,objectToBytes:nx,bytesToObject:ex,bytesToSnapshot:kC,bytesToHex:Hd,hexToBytes:Gp,toHexString:Yp,toUint8Array:Vd,toOperation:V1,toChangeID:J1,PbChangeID:_d,bytesToChangeID:UC,bytesToOperation:qC,versionVectorToHex:OC,hexToVersionVector:IC,fromSchemaRules:DC};var We=(n=>(n[n.Trivial=0]="Trivial",n[n.Debug=1]="Debug",n[n.Info=2]="Info",n[n.Warn=3]="Warn",n[n.Error=4]="Error",n[n.Fatal=5]="Fatal",n))(We||{});let Aa=3;function PC(n){Aa=n}const At={trivial:(...n)=>{Aa>0||typeof console<"u"&&console.log("YORKIE T:",...n)},debug:(...n)=>{Aa>1||typeof console<"u"&&console.log("YORKIE D:",...n)},info:(...n)=>{Aa>2||typeof console<"u"&&console.log("YORKIE I:",...n)},warn:(...n)=>{Aa>3||typeof console<"u"&&(typeof console.warn<"u"?console.warn("YORKIE W:",...n):console.log("YORKIE W:",...n))},error:(...n)=>{Aa>4||typeof console<"u"&&(typeof console.error<"u"?console.error("YORKIE E:",...n):console.log("YORKIE E:",...n))},fatal:(...n)=>{typeof console<"u"&&(typeof console.error<"u"?console.error("YORKIE F:",...n):console.log("YORKIE F:",...n))},isEnabled:n=>Aa<=n};function rx(){return"xxxxxxxx-xxxx-4xxxy-xxxx-xxxxxxxxxxx".replace(/[xy]/g,n=>{const t=Math.random()*16|0;return(n==="x"?t:t&3|8).toString(16)})}class JC{constructor(t,e,i,a,l){y(this,"reconnectStreamDelay");y(this,"doc");y(this,"docID");y(this,"syncMode");y(this,"remoteChangeEventReceived");y(this,"watchStream");y(this,"watchLoopTimerID");y(this,"watchAbortController");y(this,"unsubscribeBroadcastEvent");this.reconnectStreamDelay=t,this.doc=e,this.docID=i,this.syncMode=a,this.remoteChangeEventReceived=!1,this.unsubscribeBroadcastEvent=l}changeSyncMode(t){this.syncMode=t}needRealtimeSync(){return this.syncMode===Yf.RealtimeSyncOff?!1:this.syncMode===Yf.RealtimePushOnly?this.doc.hasLocalChanges():this.syncMode!==Yf.Manual&&(this.doc.hasLocalChanges()||this.remoteChangeEventReceived)}async runWatchLoop(t){const e=async()=>{if(this.watchStream)return Promise.resolve();this.watchLoopTimerID&&(clearTimeout(this.watchLoopTimerID),this.watchLoopTimerID=void 0);try{[this.watchStream,this.watchAbortController]=await t(()=>{this.watchStream=void 0,this.watchAbortController=void 0,this.watchLoopTimerID=setTimeout(e,this.reconnectStreamDelay)})}catch{}};await e()}cancelWatchStream(){this.watchStream&&this.watchAbortController&&(this.watchAbortController.abort(),this.watchStream=void 0,this.watchAbortController=void 0),clearTimeout(this.watchLoopTimerID),this.watchLoopTimerID=void 0}}function $C(n,t){const e=[];for(const i of t){const a=HC(n,i.path),l=VC(a,i);if(!l.valid)for(const c of l.errors||[])e.push(c)}return{valid:e.length===0,errors:e}}function HC(n,t){if(!t.startsWith("$"))throw new Error(`Path must start with $, got ${t}`);const e=t.split(".");let i=n;for(let a=1;a<e.length;a++){const l=e[a];if(!(i instanceof $e))return;i=i.get(l)}return i}function VC(n,t){switch(t.type){case"string":case"boolean":case"integer":case"double":case"long":case"date":case"bytes":case"null":return YC(n,t);case"object":if(!(n instanceof $e))return{valid:!1,errors:[{path:t.path,message:`Expected object at path ${t.path}`}]};break;case"array":if(!(n instanceof He))return{valid:!1,errors:[{path:t.path,message:`Expected array at path ${t.path}`}]};break;case"yorkie.Text":if(!(n instanceof yn))return{valid:!1,errors:[{path:t.path,message:`Expected yorkie.Text at path ${t.path}`}]};break;case"yorkie.Tree":if(!(n instanceof vn))return{valid:!1,errors:[{path:t.path,message:`Expected yorkie.Tree at path ${t.path}`}]};break;case"yorkie.Counter":if(!(n instanceof rn))return{valid:!1,errors:[{path:t.path,message:`Expected yorkie.Counter at path ${t.path}`}]};break;default:throw new Error(`Unknown rule type: ${t.type}`)}return{valid:!0}}function jC(n){switch(n){case"null":return ne.Null;case"boolean":return ne.Boolean;case"integer":return ne.Integer;case"long":return ne.Long;case"double":return ne.Double;case"string":return ne.String;case"bytes":return ne.Bytes;case"date":return ne.Date;default:throw new Error(`Unknown primitive type: ${n}`)}}function YC(n,t){return n instanceof le&&n.getType()===jC(t.type)?{valid:!0}:{valid:!1,errors:[{path:t.path,message:`Expected ${t.type} at path ${t.path}`}]}}const Cm=()=>{};class GC{constructor(t){y(this,"finalized",!1);y(this,"observers",[]);y(this,"finalError");try{t(this)}catch(e){this.error(e)}}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,i){let a;if(!t)throw new j(V.ErrInvalidArgument,"missing observer");if(this.finalized)throw new j(V.ErrRefused,"observable is finalized due to previous error");typeof t=="object"?a=t:a={next:t,error:e,complete:i},a.next===void 0&&(a.next=Cm),a.error===void 0&&(a.error=Cm),a.complete===void 0&&(a.complete=Cm);const l=rx(),c=this.unsubscribeOne.bind(this,l);if(this.observers.push({subscriptionID:l,observer:a}),this.finalized)try{this.finalError?a.error(this.finalError):a.complete()}catch(d){At.warn(d)}return c}unsubscribeOne(t){var e;this.observers=(e=this.observers)==null?void 0:e.filter(i=>i.subscriptionID!==t)}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){if(this.observers!==void 0&&this.observers[t]!==void 0)try{e(this.observers[t].observer)}catch(i){At.error(i)}}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.observers=void 0)}}function XC(n){const t=new GC(n);return{subscribe:t.subscribe.bind(t),getProxy:()=>t}}class Bo{constructor(t,e,i,a){y(this,"prevID");y(this,"nextID");y(this,"delimiter");y(this,"message");y(this,"root");y(this,"operations");y(this,"presenceChange");y(this,"previousPresence");y(this,"reversePresenceKeys");this.prevID=t,this.nextID=t.next(),this.delimiter=D1,this.root=e,this.operations=[],this.previousPresence=Xn(i),this.presenceChange=void 0,this.reversePresenceKeys=new Set,this.message=a}static create(t,e,i,a){return new Bo(t,e,i,a)}push(t){this.operations.push(t)}registerElement(t,e){this.root.registerElement(t,e)}registerRemovedElement(t){this.root.registerRemovedElement(t)}registerGCPair(t){this.root.registerGCPair(t)}getNextID(){return this.isPresenceOnlyChange()?this.prevID.next(!0).setLamport(this.prevID.getLamport()).setVersionVector(this.prevID.getVersionVector()):this.nextID}toChange(){const t=this.isPresenceOnlyChange()?this.prevID.next(!0):this.nextID;return Ko.create({id:t,operations:this.operations,presenceChange:this.presenceChange,message:this.message})}isPresenceOnlyChange(){return this.operations.length===0}hasChange(){return this.operations.length>0||this.presenceChange!==void 0}setPresenceChange(t){this.presenceChange=t}setReversePresence(t,e){for(const i of Object.keys(t))e!=null&&e.addToHistory?this.reversePresenceKeys.add(i):this.reversePresenceKeys.delete(i)}getReversePresence(){if(this.reversePresenceKeys.size===0)return;const t={};for(const e of this.reversePresenceKeys)t[e]=this.previousPresence[e];return t}issueTimeTicket(){return this.delimiter+=1,this.nextID.createTimeTicket(this.delimiter)}getLastTimeTicket(){return this.nextID.createTimeTicket(this.delimiter)}acc(t){this.root.acc(t)}}class zu{constructor(t){y(this,"rootObject");y(this,"elementPairMapByCreatedAt");y(this,"gcElementSetByCreatedAt");y(this,"gcPairMap");y(this,"docSize");this.rootObject=t,this.elementPairMapByCreatedAt=new Map,this.gcElementSetByCreatedAt=new Set,this.gcPairMap=new Map,this.docSize={live:{data:0,meta:0},gc:{data:0,meta:0}},this.registerElement(t,void 0),t.getDescendants(e=>{if(e.getRemovedAt()&&this.registerRemovedElement(e),e instanceof yn||e instanceof vn)for(const i of e.getGCPairs())this.registerGCPair(i);return!1})}static create(){return new zu($e.create(Yo))}findByCreatedAt(t){const e=this.elementPairMapByCreatedAt.get(t.toIDString());if(e)return e.element}findElementPairByCreatedAt(t){return this.elementPairMapByCreatedAt.get(t.toIDString())}createSubPaths(t){let e=this.elementPairMapByCreatedAt.get(t.toIDString());if(!e)return[];const i=[];for(;e.parent;){const a=e.element.getCreatedAt(),l=e.parent.subPathOf(a);if(l===void 0)throw new j(V.ErrInvalidArgument,`cant find the given element: ${a.toIDString()}`);i.unshift(l),e=this.elementPairMapByCreatedAt.get(e.parent.getCreatedAt().toIDString())}return i.unshift("$"),i}createPath(t){return this.createSubPaths(t).join(".")}registerElement(t,e){this.elementPairMapByCreatedAt.set(t.getCreatedAt().toIDString(),{parent:e,element:t}),_e(this.docSize.live,t.getDataSize()),t instanceof Qs&&t.getDescendants((i,a)=>(this.elementPairMapByCreatedAt.set(i.getCreatedAt().toIDString(),{parent:a,element:i}),_e(this.docSize.live,i.getDataSize()),!1))}deregisterElement(t){let e=0;const i=a=>{const l=a.getCreatedAt().toIDString();_o(this.docSize.gc,a.getDataSize()),this.elementPairMapByCreatedAt.delete(l),this.gcElementSetByCreatedAt.delete(l),e++};return i(t),t instanceof Qs&&t.getDescendants(a=>(i(a),!1)),e}registerRemovedElement(t){_e(this.docSize.gc,t.getDataSize()),_o(this.docSize.live,t.getDataSize()),this.docSize.live.meta+=br,this.gcElementSetByCreatedAt.add(t.getCreatedAt().toIDString())}registerGCPair(t){if(this.gcPairMap.get(t.child.toIDString())){this.gcPairMap.delete(t.child.toIDString());return}this.gcPairMap.set(t.child.toIDString(),t);const i=this.gcPairMap.get(t.child.toIDString()).child.getDataSize();_e(this.docSize.gc,i),_o(this.docSize.live,i),t.child instanceof Fs||(this.docSize.live.meta+=br)}getElementMapSize(){return this.elementPairMapByCreatedAt.size}getGarbageElementSetSize(){const t=new Set;for(const e of this.gcElementSetByCreatedAt){t.add(e);const i=this.elementPairMapByCreatedAt.get(e);i.element instanceof Qs&&i.element.getDescendants(a=>(t.add(a.getCreatedAt().toIDString()),!1))}return t.size}getObject(){return this.rootObject}getGarbageLen(){return this.getGarbageElementSetSize()+this.gcPairMap.size}getDocSize(){return this.docSize}deepcopy(){return new zu(this.rootObject.deepcopy())}garbageCollect(t){let e=0;for(const i of this.gcElementSetByCreatedAt){const a=this.elementPairMapByCreatedAt.get(i),l=a.element.getRemovedAt();l&&(t!=null&&t.afterOrEqual(l))&&(a.parent.purge(a.element),e+=this.deregisterElement(a.element))}for(const[,i]of this.gcPairMap){const a=i.child.getRemovedAt();a&&(t!=null&&t.afterOrEqual(a))&&(i.parent.purge(i.child),this.gcPairMap.delete(i.child.toIDString()),e+=1)}return e}toJSON(){return this.rootObject.toJSON()}toSortedJSON(){return this.rootObject.toSortedJSON()}getStats(){return{elements:this.getElementMapSize(),gcPairs:this.gcPairMap.size,gcElements:this.getGarbageElementSetSize()}}acc(t){_e(this.docSize.live,t)}}function ix(n,t){const e=new Lu(n);return new Proxy(t,e.getHandlers())}class Lu{constructor(t){y(this,"context");y(this,"handlers");this.context=t,this.handlers={set:(e,i,a)=>(At.isEnabled(We.Trivial)&&At.trivial(`obj[${i}]=${JSON.stringify(a)}`),Lu.setInternal(t,e,i,a),!0),get:(e,i)=>(At.isEnabled(We.Trivial)&&At.trivial(`obj[${i}]`),i==="getID"?()=>e.getCreatedAt():i==="toJSON"||i==="toString"?()=>e.toJSON():i==="toJS"?()=>e.toJS():i==="toJSForTest"?()=>e.toJSForTest():Ea(t,e.get(i))),ownKeys:e=>e.getKeys(),getOwnPropertyDescriptor:()=>({enumerable:!0,configurable:!0}),deleteProperty:(e,i)=>(At.isEnabled(We.Trivial)&&At.trivial(`obj[${i}]`),Lu.deleteInternal(t,e,i),!0)}}static setInternal(t,e,i,a){if(i.includes("."))throw new j(V.ErrInvalidObjectKey,"key must not contain the '.'.");const l=t.issueTimeTicket(),c=Au(t,a,l),d=e.set(i,c,l);t.registerElement(c,e),d&&t.registerRemovedElement(d),t.push(La.create(i,c.deepcopy(),e.getCreatedAt(),l))}static buildObjectMembers(t,e){const i={};for(const[a,l]of Object.entries(e)){if(a.includes("."))throw new j(V.ErrInvalidObjectKey,"key must not contain the '.'.");const c=t.issueTimeTicket(),d=Au(t,l,c);i[a]=d}return i}static deleteInternal(t,e,i){const a=t.issueTimeTicket(),l=e.deleteByKey(i,a);l&&(t.push(ls.create(e.getCreatedAt(),l.getCreatedAt(),a)),t.registerRemovedElement(l))}getHandlers(){return this.handlers}}function KC(n,t){const e=new Ft(n,t);return new Proxy(t,e.getHandlers())}function FC(n){return typeof n=="string"||n instanceof String?!isNaN(n):!1}function ZC(n){return["concat","entries","every","filter","find","findIndex","forEach","join","keys","map","reduce","reduceRight","slice","some","toLocaleString","toString","values"].includes(n)}class Ft{constructor(t,e){y(this,"context");y(this,"handlers");y(this,"array");this.context=t,this.array=e,this.handlers={get:(i,a,l)=>a==="getID"?()=>i.getCreatedAt():a==="getElementByID"?c=>{const d=i.getByID(c);if(!(!d||d.isRemoved()))return Gn(t,d)}:a==="getElementByIndex"?c=>{const d=i.get(c);return Gn(t,d)}:a==="getLast"?()=>Gn(t,i.getLast()):a==="delete"?c=>{const d=Ft.deleteInternalByIndex(t,i,c);return Gn(t,d)}:a==="deleteByID"?c=>{const d=Ft.deleteInternalByID(t,i,c);return Gn(t,d)}:a==="insertAfter"?(c,d)=>{const h=Ft.insertAfterInternal(t,i,c,d);return Gn(t,h)}:a==="insertIntegerAfter"?(c,d)=>{const h=Ft.insertIntegerAfterInternal(t,i,c,d);return Gn(t,h)}:a==="insertBefore"?(c,d)=>{const h=Ft.insertBeforeInternal(t,i,c,d);return Gn(t,h)}:a==="setInteger"?(c,d)=>{const h=Ft.setIntegerInternal(t,i,c,d);return Gn(t,h)}:a==="moveBefore"?(c,d)=>{Ft.moveBeforeInternal(t,i,c,d)}:a==="moveAfter"?(c,d)=>{Ft.moveAfterInternal(t,i,c,d)}:a==="moveAfterByIndex"?(c,d)=>{Ft.moveAfterByIndexInternal(t,i,c,d)}:a==="moveFront"?c=>{Ft.moveFrontInternal(t,i,c)}:a==="moveLast"?c=>{Ft.moveLastInternal(t,i,c)}:FC(a)?Ea(t,i.get(Number(a))):a==="push"?c=>Ft.pushInternal(t,i,c):a==="splice"?(c,d,...h)=>Ft.splice(t,i,c,d,...h):a==="length"?i.length:typeof a=="symbol"&&a===Symbol.iterator?Ft.iteratorInternal.bind(this,t,i):a==="includes"?(c,d)=>Ft.includes(t,i,c,d):a==="indexOf"?(c,d)=>Ft.indexOf(t,i,c,d):a==="lastIndexOf"?(c,d)=>Ft.lastIndexOf(t,i,c,d):a==="toJSForTest"?()=>i.toJSForTest():a==="toTestString"?()=>Ft.toTestString(i):typeof a=="string"&&ZC(a)?(...c)=>{const d=Array.from(i).map(h=>Ea(t,h));return Array.prototype[a].apply(d,c)}:Reflect.get(i,a,l),deleteProperty:(i,a)=>(At.isEnabled(We.Trivial)&&At.trivial(`array[${a}]`),Ft.deleteInternalByIndex(t,i,Number.parseInt(a)),!0)}}static*iteratorInternal(t,e){for(const i of e)yield Gn(t,i)}static buildArrayElements(t,e){const i=[];for(const a of e){const l=t.issueTimeTicket(),c=Au(t,a,l);i.push(c)}return i}static pushInternal(t,e,i){return Ft.insertAfterInternal(t,e,e.getLastCreatedAt(),i),e.length}static moveBeforeInternal(t,e,i,a){const l=t.issueTimeTicket(),c=e.getPrevCreatedAt(i);e.moveAfter(c,a,l),t.push(rs.create(e.getCreatedAt(),c,a,l))}static moveAfterInternal(t,e,i,a){const l=t.issueTimeTicket();t.push(rs.create(e.getCreatedAt(),i,a,l)),e.moveAfter(i,a,l)}static moveAfterByIndexInternal(t,e,i,a){const l=e.get(i);if(!l)throw new j(V.ErrInvalidArgument,`index out of bounds: ${i}`);const c=e.get(a);if(!c)throw new j(V.ErrInvalidArgument,`index out of bounds: ${a}`);Ft.moveAfterInternal(t,e,l.getCreatedAt(),c.getCreatedAt())}static moveFrontInternal(t,e,i){const a=t.issueTimeTicket(),l=e.getHead();e.moveAfter(l.getCreatedAt(),i,a),t.push(rs.create(e.getCreatedAt(),l.getCreatedAt(),i,a))}static moveLastInternal(t,e,i){const a=t.issueTimeTicket(),l=e.getLastCreatedAt();e.moveAfter(l,i,a),t.push(rs.create(e.getCreatedAt(),l,i,a))}static insertAfterInternal(t,e,i,a){const l=t.issueTimeTicket(),c=Au(t,a,l);return e.insertAfter(i,c),t.registerElement(c,e),t.push(il.create(e.getCreatedAt(),i,c.deepcopy(),l)),c}static insertIntegerAfterInternal(t,e,i,a){const l=e.get(i);if(!l)throw new j(V.ErrInvalidArgument,`index out of bounds: ${i}`);return Ft.insertAfterInternal(t,e,l.getCreatedAt(),a),e}static insertBeforeInternal(t,e,i,a){return Ft.insertAfterInternal(t,e,e.getPrevCreatedAt(i),a)}static setIntegerInternal(t,e,i,a){const l=e.get(i);if(!l)throw new j(V.ErrInvalidArgument,`index out of bounds: ${i}`);return Ft.setByIndexInternal(t,e,l.getCreatedAt(),a),e}static setByIndexInternal(t,e,i,a){const l=t.issueTimeTicket(),c=Au(t,a,l),d=c.deepcopy();return t.push(Qu.create(e.getCreatedAt(),i,d,l)),e.set(i,c,l),t.registerElement(c,e),c}static deleteInternalByIndex(t,e,i){const a=t.issueTimeTicket(),l=e.deleteByIndex(i,a);if(l)return t.push(ls.create(e.getCreatedAt(),l.getCreatedAt(),a)),t.registerRemovedElement(l),l}static deleteInternalByID(t,e,i){const a=t.issueTimeTicket(),l=e.delete(i,a);return t.push(ls.create(e.getCreatedAt(),l.getCreatedAt(),a)),t.registerRemovedElement(l),l}static splice(t,e,i,a,...l){const c=e.length,d=i>=0?Math.min(i,c):Math.max(c+i,0),h=a===void 0?c:a<0?d:Math.min(d+a,c),g=[];for(let p=d;p<h;p++){const w=Ft.deleteInternalByIndex(t,e,d);if(w){const v=w.deepcopy();v.setRemovedAt(),g.push(Ea(t,v))}}if(l){let p=d===0?e.getHead().getID():e.get(d-1).getID();for(const w of l)p=Ft.insertAfterInternal(t,e,p,w).getID()}return g}static includes(t,e,i,a){var d;const l=e.length,c=a===void 0?0:a<0?Math.max(a+l,0):a;if(c>=l)return!1;if(le.isSupport(i))return Array.from(e).map(g=>Ea(t,g)).includes(i,c);for(let h=c;h<l;h++)if(((d=e.get(h))==null?void 0:d.getID())===i.getID())return!0;return!1}static indexOf(t,e,i,a){var d;const l=e.length,c=a===void 0?0:a<0?Math.max(a+l,0):a;if(c>=l)return-1;if(le.isSupport(i))return Array.from(e).map(g=>Ea(t,g)).indexOf(i,c);for(let h=c;h<l;h++)if(((d=e.get(h))==null?void 0:d.getID())===i.getID())return h;return-1}static lastIndexOf(t,e,i,a){var d;const l=e.length,c=a===void 0||a>=l?l-1:a<0?a+l:a;if(c<0)return-1;if(le.isSupport(i))return Array.from(e).map(g=>Ea(t,g)).lastIndexOf(i,c);for(let h=c;h>0;h--)if(((d=e.get(h))==null?void 0:d.getID())===i.getID())return h;return-1}static toTestString(t){return t.toTestString()}getHandlers(){return this.handlers}}class Xp{constructor(t,e){y(this,"context");y(this,"text");this.context=t,this.text=e}initialize(t,e){this.context=t,this.text=e}getID(){return this.text.getID()}edit(t,e,i,a){if(!this.context||!this.text)throw new j(V.ErrNotInitialized,"Text is not initialized yet");if(t>e)throw new j(V.ErrInvalidArgument,"from should be less than or equal to to");const l=this.text.indexRangeToPosRange(t,e);At.isEnabled(We.Debug)&&At.debug(`EDIT: f:${t}->${l[0].toTestString()}, t:${e}->${l[1].toTestString()} c:${i}`);const c=a?Xo(a):void 0,d=this.context.issueTimeTicket(),[,h,g,p]=this.text.edit(l,i,d,c);this.context.acc(g);for(const w of h)this.context.registerGCPair(w);return this.context.push(new Ku(this.text.getCreatedAt(),l[0],l[1],i,c?new Map(Object.entries(c)):new Map,d)),this.text.findIndexesFromRange(p)}delete(t,e){return this.edit(t,e,"")}empty(){return this.edit(0,this.length,"")}setStyle(t,e,i){if(!this.context||!this.text)throw new j(V.ErrNotInitialized,"Text is not initialized yet");if(t>e)throw new j(V.ErrInvalidArgument,"from should be less than or equal to to");const a=this.text.indexRangeToPosRange(t,e);At.isEnabled(We.Debug)&&At.debug(`STYL: f:${t}->${a[0].toTestString()}, t:${e}->${a[1].toTestString()} a:${JSON.stringify(i)}`);const l=Xo(i),c=this.context.issueTimeTicket(),[d,h]=this.text.setStyle(a,l,c);this.context.acc(h);for(const g of d)this.context.registerGCPair(g);return this.context.push(new Fu(this.text.getCreatedAt(),a[0],a[1],new Map(Object.entries(l)),c)),!0}indexRangeToPosRange(t){if(!this.context||!this.text)throw new j(V.ErrNotInitialized,"Text is not initialized yet");const e=this.text.indexRangeToPosRange(t[0],t[1]);return[e[0].toStruct(),e[1].toStruct()]}posRangeToIndexRange(t){if(!this.context||!this.text)throw new j(V.ErrNotInitialized,"Text is not initialized yet");const e=this.text.findIndexesFromRange([er.fromStruct(t[0]),er.fromStruct(t[1])]);return[e[0],e[1]]}toTestString(){if(!this.context||!this.text)throw new j(V.ErrNotInitialized,"Text is not initialized yet");return this.text.toTestString()}values(){if(!this.context||!this.text)throw new j(V.ErrNotInitialized,"Text is not initialized yet");return this.text.values()}get length(){return this.text.length}getTreeByIndex(){return this.text.getTreeByIndex()}getTreeByID(){return this.text.getTreeByID()}toString(){if(!this.context||!this.text)throw new j(V.ErrNotInitialized,"Text is not initialized yet");return this.text.toString()}toJSON(){if(!this.context||!this.text)throw new j(V.ErrNotInitialized,"Text is not initialized yet");return this.text.toJSON()}toJSForTest(){if(!this.context||!this.text)throw new j(V.ErrNotInitialized,"Text is not initialized yet");return this.text.toJSForTest()}createRangeForTest(t,e){if(!this.context||!this.text)throw new j(V.ErrNotInitialized,"Text is not initialized yet");return this.text.indexRangeToPosRange(t,e)}}class Kp{constructor(t,e){y(this,"valueType");y(this,"value");y(this,"context");y(this,"counter");this.valueType=t,this.value=e}initialize(t,e){this.valueType=e.getValueType(),this.context=t,this.counter=e,this.value=e.getValue()}getID(){return this.counter.getID()}getValue(){return this.value}getValueType(){return this.valueType}increase(t){if(!this.context||!this.counter)throw new j(V.ErrNotInitialized,"Counter is not initialized yet");const e=this.context.issueTimeTicket(),i=le.of(t,e);if(!i.isNumericType())throw new TypeError(`Unsupported type of value: ${typeof i.getValue()}`);return this.counter.increase(i),this.context.push(Zo.create(this.counter.getCreatedAt(),i,e)),this}toJSForTest(){if(!this.context||!this.counter)throw new j(V.ErrNotInitialized,"Counter is not initialized yet");return this.counter.toJSForTest()}}function Fp(n){if(n.isText)return{type:n.type,value:n.value};const t={type:n.type,children:n.children.map(e=>Fp(e))};return n.attrs&&(t.attributes=ss(n.attrs.toObject())),t}function QC(n,t){const e={type:n.isText?n.parent.type:n.type,children:n.isText?n.parent.getChildrenText().length===t?[]:[{type:xr,value:n.parent.getChildrenText().slice(t)}]:n.children.slice(t).map(i=>Fp(i))};return n.attrs?e.attributes=ss(n.attrs.toObject()):n.isText&&n.parent.attrs&&(e.attributes=ss(n.parent.attrs.toObject())),e}function WC(n,t){const{node:e}=n,i=[...t].slice(0,-1),a=e.isText?e.parent.getChildrenText().length:e.children.length,l=[...i,a],c=[...i],d=[];c[c.length-1]+=1,t.every((g,p)=>g===l[p])||d.push({fromPath:[...t],toPath:l});const h=QC(e,t[t.length-1]);return h&&d.push({fromPath:c,toPath:c,content:h}),d}function tD(n,t){const{node:e,offset:i}=n,a=e.children[i],l=e.children[i-1],{children:c}=a,d=[...t].slice(0,-1),h=[{fromPath:[...t],toPath:[...d,i+1]}];if(!a.children.length)return h;const g=[...d,i-1,l.hasTextChild()?l.getChildrenText().length:l.children.length],p=c.map(w=>Fp(w));return h.push({fromPath:g,toPath:g,content:p}),h}function Zp(n,t,e){const{type:i}=n,a=e.issueTimeTicket();if(i===xr){sx(n);const{value:l}=n,c=pn.create(Ue.of(a,0),i,l);t.append(c)}else{const{children:l=[]}=n,{attributes:c}=n;let d;if(typeof c=="object"&&!B1(c)){const g=Xo(c);d=new us;for(const[p,w]of Object.entries(g))d.set(p,w,a)}const h=pn.create(Ue.of(a,0),i,void 0,d);t.append(h);for(const g of l)Zp(g,h,e)}}function eD(n,t){const{type:e}=t,i=n.issueTimeTicket();let a;if(t.type===xr){const{value:l}=t;a=pn.create(Ue.of(i,0),e,l)}else if(t){const{children:l=[]}=t,{attributes:c}=t;let d;if(typeof c=="object"&&!B1(c)){const h=Xo(c);d=new us;for(const[g,p]of Object.entries(h))d.set(g,p,i)}a=pn.create(Ue.of(n.issueTimeTicket(),0),e,void 0,d);for(const h of l)Zp(h,a,n)}return a}function sx(n){if(!n.value.length)throw new j(V.ErrInvalidArgument,"text node cannot have empty value");return!0}function JS(n){if(!n.length)return!0;if(n[0].type===xr)for(const e of n){const{type:i}=e;if(i!==xr)throw new j(V.ErrInvalidArgument,"element node and text node cannot be passed together");sx(e)}else for(const e of n){const{type:i}=e;if(i===xr)throw new j(V.ErrInvalidArgument,"element node and text node cannot be passed together")}return!0}class Qp{constructor(t){y(this,"initialRoot");y(this,"context");y(this,"tree");this.initialRoot=t}initialize(t,e){this.context=t,this.tree=e}getID(){return this.tree.getID()}buildRoot(t){if(!this.initialRoot)return pn.create(Ue.of(t.issueTimeTicket(),0),$2);const e=pn.create(Ue.of(t.issueTimeTicket(),0),this.initialRoot.type);for(const i of this.initialRoot.children)Zp(i,e,t);return e}getSize(){if(!this.context||!this.tree)throw new j(V.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getSize()}getNodeSize(){if(!this.context||!this.tree)throw new j(V.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getNodeSize()}getIndexTree(){if(!this.context||!this.tree)throw new j(V.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getIndexTree()}splitByPath(t){if(!this.context||!this.tree)throw new j(V.ErrNotInitialized,"Tree is not initialized yet");if(!t.length)throw new j(V.ErrInvalidArgument,"path should not be empty");const e=this.tree.pathToTreePos(t),i=WC(e,t);for(const a of i){const{fromPath:l,toPath:c,content:d}=a,h=this.tree.pathToPos(l),g=this.tree.pathToPos(c);this.editInternal(h,g,d?[d]:[],0)}}mergeByPath(t){if(!this.context||!this.tree)throw new j(V.ErrNotInitialized,"Tree is not initialized yet");if(!t.length)throw new j(V.ErrInvalidArgument,"path should not be empty");const e=this.tree.pathToTreePos(t);if(e.node.isText)throw new j(V.ErrInvalidArgument,"text node cannot be merged");const i=tD(e,t);for(const a of i){const{fromPath:l,toPath:c,content:d}=a,h=this.tree.pathToPos(l),g=this.tree.pathToPos(c);this.editInternal(h,g,d??[],0)}}styleByPath(t,e){if(!this.context||!this.tree)throw new j(V.ErrNotInitialized,"Tree is not initialized yet");if(!t.length)throw new j(V.ErrInvalidArgument,"path should not be empty");const[i,a]=this.tree.pathToPosRange(t),l=this.context.issueTimeTicket(),c=e?Xo(e):void 0,[d,,h]=this.tree.style([i,a],c,l);this.context.acc(h);for(const g of d)this.context.registerGCPair(g);this.context.push(as.create(this.tree.getCreatedAt(),i,a,c?new Map(Object.entries(c)):new Map,l))}style(t,e,i){if(!this.context||!this.tree)throw new j(V.ErrNotInitialized,"Tree is not initialized yet");if(t>e)throw new j(V.ErrInvalidArgument,"from should be less than or equal to to");const a=this.tree.findPos(t),l=this.tree.findPos(e),c=this.context.issueTimeTicket(),d=i?Xo(i):void 0,[h,,g]=this.tree.style([a,l],d,c);this.context.acc(g);for(const p of h)this.context.registerGCPair(p);this.context.push(as.create(this.tree.getCreatedAt(),a,l,d?new Map(Object.entries(d)):new Map,c))}removeStyle(t,e,i){if(!this.context||!this.tree)throw new j(V.ErrNotInitialized,"Tree is not initialized yet");if(t>e)throw new j(V.ErrInvalidArgument,"from should be less than or equal to to");const a=this.tree.findPos(t),l=this.tree.findPos(e),c=this.context.issueTimeTicket(),[d,,h]=this.tree.removeStyle([a,l],i,c);this.context.acc(h);for(const g of d)this.context.registerGCPair(g);this.context.push(as.createTreeRemoveStyleOperation(this.tree.getCreatedAt(),a,l,i,c))}editInternal(t,e,i,a=0){var g;if(i.length!==0&&i[0]&&(JS(i),i[0].type!==xr))for(const p of i){const{children:w=[]}=p;JS(w)}const l=this.context.getLastTimeTicket();let c=new Array;if(((g=i[0])==null?void 0:g.type)===xr){let p="";for(const w of i){const{value:v}=w;p+=v}c.push(pn.create(Ue.of(this.context.issueTimeTicket(),0),xr,p))}else c=i.map(p=>p&&eD(this.context,p)).filter(p=>p);const[,d,h]=this.tree.edit([t,e],c.length?c.map(p=>p==null?void 0:p.deepcopy()):void 0,a,l,()=>this.context.issueTimeTicket());this.context.acc(h);for(const p of d)this.context.registerGCPair(p);return this.context.push(Zu.create(this.tree.getCreatedAt(),t,e,c.length?c:void 0,a,l)),!0}editByPath(t,e,i,a=0){if(!this.context||!this.tree)throw new j(V.ErrNotInitialized,"Tree is not initialized yet");if(t.length!==e.length)throw new j(V.ErrInvalidArgument,"path length should be equal");if(!t.length||!e.length)throw new j(V.ErrInvalidArgument,"path should not be empty");const l=this.tree.pathToPos(t),c=this.tree.pathToPos(e);return this.editInternal(l,c,i?[i]:[],a)}editBulkByPath(t,e,i,a=0){if(!this.context||!this.tree)throw new j(V.ErrNotInitialized,"Tree is not initialized yet");if(t.length!==e.length)throw new j(V.ErrInvalidArgument,"path length should be equal");if(!t.length||!e.length)throw new j(V.ErrInvalidArgument,"path should not be empty");const l=this.tree.pathToPos(t),c=this.tree.pathToPos(e);return this.editInternal(l,c,i,a)}edit(t,e,i,a=0){if(!this.context||!this.tree)throw new j(V.ErrNotInitialized,"Tree is not initialized yet");if(t>e)throw new j(V.ErrInvalidArgument,"from should be less than or equal to to");const l=this.tree.findPos(t),c=this.tree.findPos(e);return this.editInternal(l,c,i?[i]:[],a)}editBulk(t,e,i,a=0){if(!this.context||!this.tree)throw new j(V.ErrNotInitialized,"Tree is not initialized yet");if(t>e)throw new j(V.ErrInvalidArgument,"from should be less than or equal to to");const l=this.tree.findPos(t),c=this.tree.findPos(e);return this.editInternal(l,c,i,a)}toXML(){if(!this.context||!this.tree)throw new j(V.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toXML()}toJSON(){if(!this.context||!this.tree)throw new j(V.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toJSON()}toJSForTest(){if(!this.context||!this.tree)throw new j(V.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toJSForTest()}toJSInfoForTest(){if(!this.context||!this.tree)throw new j(V.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toJSInfoForTest()}getRootTreeNode(){if(!this.context||!this.tree)throw new j(V.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getRootTreeNode()}indexToPath(t){if(!this.context||!this.tree)throw new j(V.ErrNotInitialized,"Tree is not initialized yet");return this.tree.indexToPath(t)}pathToIndex(t){if(!this.context||!this.tree)throw new j(V.ErrNotInitialized,"Tree is not initialized yet");return this.tree.pathToIndex(t)}pathRangeToPosRange(t){if(!this.context||!this.tree)throw new j(V.ErrNotInitialized,"Tree is not initialized yet");const e=[this.tree.pathToIndex(t[0]),this.tree.pathToIndex(t[1])],i=this.tree.indexRangeToPosRange(e);return[i[0].toStruct(),i[1].toStruct()]}indexRangeToPosRange(t){if(!this.context||!this.tree)throw new j(V.ErrNotInitialized,"Tree is not initialized yet");return this.tree.indexRangeToPosStructRange(t)}posRangeToIndexRange(t){if(!this.context||!this.tree)throw new j(V.ErrNotInitialized,"Tree is not initialized yet");const e=[Wn.fromStruct(t[0]),Wn.fromStruct(t[1])];return this.tree.posRangeToIndexRange(e)}posRangeToPathRange(t){if(!this.context||!this.tree)throw new j(V.ErrNotInitialized,"Tree is not initialized yet");const e=[Wn.fromStruct(t[0]),Wn.fromStruct(t[1])];return this.tree.posRangeToPathRange(e)}}function $S(n,t){return ix(n,t)}function Gn(n,t){if(t){if(t instanceof le)return t;if(t instanceof $e)return ix(n,t);if(t instanceof He)return KC(n,t);if(t instanceof yn)return new Xp(n,t);if(t instanceof rn){const e=new Kp(Nr.Int,0);return e.initialize(n,t),e}else if(t instanceof vn){const e=new Qp;return e.initialize(n,t),e}}else return;throw new TypeError(`Unsupported type of element: ${typeof t}`)}function Ea(n,t){const e=Gn(n,t);return e instanceof le?e.getValue():e}function Au(n,t,e){let i;if(le.isSupport(t))i=le.of(t,e);else if(Array.isArray(t))i=He.create(e,Ft.buildArrayElements(n,t));else if(typeof t=="object")t instanceof Xp?(i=yn.create(Fo.create(),e),t.initialize(n,i)):t instanceof Kp?(i=rn.create(t.getValueType(),t.getValue(),e),t.initialize(n,i)):t instanceof Qp?(i=vn.create(t.buildRoot(n),e),t.initialize(n,i)):i=$e.create(e,Lu.buildObjectMembers(n,t));else throw new TypeError(`Unsupported type of value: ${typeof t}`);return i}class Dm{constructor(t,e){y(this,"context");y(this,"presence");this.context=t,this.presence=e}set(t,e){for(const i of Object.keys(t))this.presence[i]=t[i];this.context.setPresenceChange({type:Er.Put,presence:Xn(this.presence)}),this.context.setReversePresence(t,e)}get(t){return this.presence[t]}clear(){this.presence={},this.context.setPresenceChange({type:Er.Clear})}}const HS=50;class nD{constructor(){y(this,"undoStack",[]);y(this,"redoStack",[])}hasUndo(){return this.undoStack.length>0}hasRedo(){return this.redoStack.length>0}pushUndo(t){this.undoStack.length>=HS&&this.undoStack.shift(),this.undoStack.push(t)}popUndo(){return this.undoStack.pop()}pushRedo(t){this.redoStack.length>=HS&&this.redoStack.shift(),this.redoStack.push(t)}popRedo(){return this.redoStack.pop()}clearRedo(){this.redoStack=[]}getUndoStackForTest(){return this.undoStack}getRedoStackForTest(){return this.redoStack}}const rD="yorkie-devtools-panel",iD="yorkie-devtools-sdk";function sD(n){return[ze.StatusChanged,ze.Snapshot,ze.LocalChange,ze.RemoteChange,ze.Initialized,ze.Watched,ze.Unwatched,ze.PresenceChanged].includes(n.type)}function aD(n){return n.every(sD)}let Ro="disconnected";const VS=new Map,jf=new Map;typeof window<"u"&&(window.docEventsForReplayByDocKey=jf);function Of(n,t){(t!=null&&t.force||Ro!=="disconnected")&&window.postMessage({source:iD,...n},"*")}function oD(n){if(!n.isEnableDevtools()||typeof window>"u"||VS.has(n.getKey()))return;jf.set(n.getKey(),[]);const t=n.subscribe("all",e=>{aD(e)&&(jf.get(n.getKey()).push(e),Ro==="synced"&&Of({msg:"doc::sync::partial",docKey:n.getKey(),event:e}))});VS.set(n.getKey(),[t]),Of({msg:"refresh-devtools"},{force:!0}),window.addEventListener("message",e=>{var a;if(((a=e.data)==null?void 0:a.source)!==rD)return;switch(e.data.msg){case"devtools::connect":if(Ro!=="disconnected")break;Ro="connected",Of({msg:"doc::available",docKey:n.getKey()}),At.info(`[YD] Devtools connected. Doc: ${n.getKey()}`);break;case"devtools::disconnect":Ro="disconnected",At.info(`[YD] Devtools disconnected. Doc: ${n.getKey()}`);break;case"devtools::subscribe":Ro="synced",Of({msg:"doc::sync::full",docKey:n.getKey(),events:jf.get(n.getKey())}),At.info(`[YD] Devtools subscribed. Doc: ${n.getKey()}`);break}})}var Gs=(n=>(n.Detached="detached",n.Attached="attached",n.Removed="removed",n))(Gs||{}),ze=(n=>(n.StatusChanged="status-changed",n.ConnectionChanged="connection-changed",n.SyncStatusChanged="sync-status-changed",n.Snapshot="snapshot",n.LocalChange="local-change",n.RemoteChange="remote-change",n.Initialized="initialized",n.Watched="watched",n.Unwatched="unwatched",n.PresenceChanged="presence-changed",n.Broadcast="broadcast",n.LocalBroadcast="local-broadcast",n.AuthError="auth-error",n))(ze||{}),Td=(n=>(n.Connected="connected",n.Disconnected="disconnected",n))(Td||{}),vp=(n=>(n.Synced="synced",n.SyncFailed="sync-failed",n))(vp||{});class ax{constructor(t,e){y(this,"key");y(this,"status");y(this,"opts");y(this,"changeID");y(this,"checkpoint");y(this,"localChanges");y(this,"maxSizeLimit");y(this,"schemaRules");y(this,"root");y(this,"clone");y(this,"eventStream");y(this,"eventStreamObserver");y(this,"onlineClients");y(this,"presences");y(this,"history");y(this,"internalHistory");y(this,"isUpdating");this.opts=e||{},this.key=t,this.status="detached",this.root=zu.create(),this.changeID=F2,this.checkpoint=Z2,this.localChanges=[],this.maxSizeLimit=0,this.schemaRules=[],this.eventStream=XC(i=>{this.eventStreamObserver=i}),this.onlineClients=new Set,this.presences=new Map,this.isUpdating=!1,this.internalHistory=new nD,this.history={canUndo:this.canUndo.bind(this),canRedo:this.canRedo.bind(this),undo:this.undo.bind(this),redo:this.redo.bind(this)},oD(this)}update(t,e){var d,h,g;if(this.getStatus()==="removed")throw new j(V.ErrDocumentRemoved,`${this.key} is removed`);this.ensureClone();const i=this.changeID.getActorID(),a=Bo.create(this.changeID,this.clone.root,this.clone.presences.get(i)||{},e);try{const p=$S(a,this.clone.root.getObject());this.presences.has(i)||this.clone.presences.set(i,{}),this.isUpdating=!0,t(p,new Dm(a,this.clone.presences.get(i)))}catch(p){throw this.clone=void 0,p}finally{this.isUpdating=!1}const l=this.getSchemaRules();if(!a.isPresenceOnlyChange()&&l.length>0){const p=$C((d=this.clone)==null?void 0:d.root.getObject(),l);if(!p.valid)throw this.clone=void 0,new j(V.ErrDocumentSchemaValidationFailed,`schema validation failed: ${(h=p.errors)==null?void 0:h.map(w=>w.message).join(", ")}`)}const c=P2((g=this.clone)==null?void 0:g.root.getDocSize());if(!a.isPresenceOnlyChange()&&this.maxSizeLimit>0&&this.maxSizeLimit<c)throw this.clone=void 0,new j(V.ErrDocumentSizeExceedsLimit,`document size exceeded: ${c} > ${this.maxSizeLimit}`);if(a.hasChange()){At.isEnabled(We.Trivial)&&At.trivial(`trying to update a local change: ${this.toJSON()}`);const p=a.toChange(),{opInfos:w,reverseOps:v}=p.execute(this.root,this.presences,ee.Local),S=a.getReversePresence();S&&v.push({type:"presence",value:S}),this.localChanges.push(p),v.length>0&&this.internalHistory.pushUndo(v),w.length>0&&this.internalHistory.clearRedo(),this.changeID=a.getNextID();const x=[];w.length>0&&x.push({type:"local-change",source:ee.Local,value:{message:p.getMessage()||"",operations:w,actor:i,clientSeq:p.getID().getClientSeq(),serverSeq:p.getID().getServerSeq()},rawChange:this.isEnableDevtools()?p.toStruct():void 0}),p.hasPresenceChange()&&x.push({type:"presence-changed",source:ee.Local,value:{clientID:i,presence:this.getPresence(i)}}),this.publish(x),At.isEnabled(We.Trivial)&&At.trivial(`after update a local change: ${this.toJSON()}`)}}subscribe(t,e,i,a){if(typeof t=="string"){if(typeof e!="function")throw new j(V.ErrInvalidArgument,"Second argument must be a callback function");if(t==="presence"){const d=e;return this.eventStream.subscribe(h=>{for(const g of h)g.type!=="initialized"&&g.type!=="watched"&&g.type!=="unwatched"&&g.type!=="presence-changed"||d(g)},i,a)}if(t==="my-presence"){const d=e;return this.eventStream.subscribe(h=>{for(const g of h)g.type!=="initialized"&&g.type!=="presence-changed"||g.type==="presence-changed"&&g.value.clientID!==this.changeID.getActorID()||d(g)},i,a)}if(t==="others"){const d=e;return this.eventStream.subscribe(h=>{for(const g of h)g.type!=="watched"&&g.type!=="unwatched"&&g.type!=="presence-changed"||g.value.clientID!==this.changeID.getActorID()&&d(g)},i,a)}if(t==="connection"){const d=e;return this.eventStream.subscribe(h=>{for(const g of h)g.type==="connection-changed"&&d(g)},i,a)}if(t==="status"){const d=e;return this.eventStream.subscribe(h=>{for(const g of h)g.type==="status-changed"&&d(g)},i,a)}if(t==="sync"){const d=e;return this.eventStream.subscribe(h=>{for(const g of h)g.type==="sync-status-changed"&&d(g)},i,a)}if(t==="local-broadcast"){const d=e;return this.eventStream.subscribe(h=>{for(const g of h)g.type==="local-broadcast"&&d(g)},i)}if(t==="broadcast"){const d=e;return this.eventStream.subscribe(h=>{for(const g of h)g.type==="broadcast"&&d(g)},i)}if(t==="auth-error"){const d=e;return this.eventStream.subscribe(h=>{for(const g of h)g.type==="auth-error"&&d(g)},i)}if(t==="all"){const d=e;return this.eventStream.subscribe(d,i,a)}const l=t,c=e;return this.eventStream.subscribe(d=>{for(const h of d){if(h.type!=="local-change"&&h.type!=="remote-change")continue;const g=[];for(const p of h.value.operations)this.isSameElementOrChildOf(p.path,l)&&g.push(p);g.length&&c({...h,value:{...h.value,operations:g}})}},i,a)}if(typeof t=="function"){const l=t,c=e,d=i;return this.eventStream.subscribe(h=>{for(const g of h)g.type!=="snapshot"&&g.type!=="local-change"&&g.type!=="remote-change"||l(g)},c,d)}throw new j(V.ErrInvalidArgument,`"${t}" is not a valid`)}publish(t){this.eventStreamObserver&&this.eventStreamObserver.next(t)}isSameElementOrChildOf(t,e){if(e===t)return!0;const i=t.split(".");return e.split(".").every((l,c)=>l===i[c])}removePushedLocalChanges(t){for(;this.localChanges.length&&!(this.localChanges[0].getID().getClientSeq()>t);)this.localChanges.shift()}applyChangePack(t){const e=t.hasSnapshot();e?this.applySnapshot(t.getCheckpoint().getServerSeq(),t.getVersionVector(),t.getSnapshot(),t.getCheckpoint().getClientSeq()):(this.applyChanges(t.getChanges(),ee.Remote),this.removePushedLocalChanges(t.getCheckpoint().getClientSeq())),this.checkpoint=this.checkpoint.forward(t.getCheckpoint()),e||this.garbageCollect(t.getVersionVector()),t.getIsRemoved()&&this.applyStatus("removed"),At.isEnabled(We.Trivial)&&At.trivial(`${this.root.toJSON()}`)}getCheckpoint(){return this.checkpoint}getChangeID(){return this.changeID}hasLocalChanges(){return this.localChanges.length>0}ensureClone(){this.clone||(this.clone={root:this.root.deepcopy(),presences:Xn(this.presences)})}createChangePack(){const t=Array.from(this.localChanges),e=this.checkpoint.increaseClientSeq(t.length);return $d.create(this.key,e,!1,t,this.getVersionVector())}setActor(t){for(const e of this.localChanges)e.setActor(t);this.changeID=this.changeID.setActor(t)}isEnableDevtools(){return!!this.opts.enableDevtools}getKey(){return this.key}getStatus(){return this.status}getClone(){return this.clone}getCloneRoot(){if(this.clone)return this.clone.root.getObject()}getRoot(){this.ensureClone();const t=Bo.create(this.changeID.next(),this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});return $S(t,this.clone.root.getObject())}getDocSize(){return this.root.getDocSize()}getMaxSizePerDocument(){return this.maxSizeLimit}setMaxSizePerDocument(t){this.maxSizeLimit=t}getSchemaRules(){return this.schemaRules}setSchemaRules(t){this.schemaRules=t}garbageCollect(t){return this.opts.disableGC?0:(this.clone&&this.clone.root.garbageCollect(t),this.root.garbageCollect(t))}getRootObject(){return this.root.getObject()}getGarbageLen(){return this.root.getGarbageLen()}getGarbageLenFromClone(){return this.clone.root.getGarbageLen()}toJSON(){return this.root.toJSON()}toSortedJSON(){return this.root.toSortedJSON()}getStats(){return this.root.getStats()}toJSForTest(){return{...this.getRoot().toJSForTest(),key:"root"}}applySnapshot(t,e,i,a=-1){const{root:l,presences:c}=fe.bytesToSnapshot(i);this.root=new zu(l),this.presences=c,this.changeID=this.changeID.setClocks(e.maxLamport(),e),this.clone=void 0,this.removePushedLocalChanges(a),this.applyChanges(this.localChanges,ee.Local),this.publish([{type:"snapshot",source:ee.Remote,value:{serverSeq:t.toString(),snapshot:this.isEnableDevtools()?fe.bytesToHex(i):void 0,snapshotVector:fe.versionVectorToHex(e)}}])}applyChanges(t,e){At.isEnabled(We.Debug)&&At.debug(`trying to apply ${t.length} remote changes.elements:${this.root.getElementMapSize()}, removeds:${this.root.getGarbageElementSetSize()}`),At.isEnabled(We.Trivial)&&At.trivial(t.map(i=>`${i.getID().toTestString()}	${i.toTestString()}`).join(`
`));for(const i of t)this.applyChange(i,e);At.isEnabled(We.Debug)&&At.debug(`after appling ${t.length} remote changes.elements:${this.root.getElementMapSize()},  removeds:${this.root.getGarbageElementSetSize()}`)}applyChange(t,e){this.ensureClone(),t.execute(this.clone.root,this.clone.presences,e);const i=[],a=t.getID().getActorID();if(t.hasPresenceChange()&&this.onlineClients.has(a)){const c=t.getPresenceChange();switch(c.type){case Er.Put:i.push(this.presences.has(a)?{type:"presence-changed",source:e,value:{clientID:a,presence:c.presence}}:{type:"watched",source:ee.Remote,value:{clientID:a,presence:c.presence}});break;case Er.Clear:i.push({type:"unwatched",source:ee.Remote,value:{clientID:a,presence:this.getPresence(a)}}),this.removeOnlineClient(a);break}}const{opInfos:l}=t.execute(this.root,this.presences,e);if(this.changeID=this.changeID.syncClocks(t.getID()),l.length>0){const c=this.isEnableDevtools()?t.toStruct():void 0;i.push(e===ee.Remote?{type:"remote-change",source:e,value:{actor:a,clientSeq:t.getID().getClientSeq(),serverSeq:t.getID().getServerSeq(),message:t.getMessage()||"",operations:l},rawChange:c}:{type:"local-change",source:e,value:{actor:a,clientSeq:t.getID().getClientSeq(),serverSeq:t.getID().getServerSeq(),message:t.getMessage()||"",operations:l},rawChange:c})}i.length>0&&this.publish(i)}applyWatchStream(t){if(t.body.case==="initialization"){const e=t.body.value.clientIds,i=new Set;for(const a of e)a!==this.changeID.getActorID()&&i.add(a);this.setOnlineClients(i),this.publish([{type:"initialized",source:ee.Local,value:this.getPresences()}]);return}if(t.body.case==="event"){const{type:e,publisher:i}=t.body.value,a=[];if(e===Oa.DOCUMENT_WATCHED){if(this.onlineClients.has(i)&&this.hasPresence(i))return;this.addOnlineClient(i),this.hasPresence(i)&&a.push({type:"watched",source:ee.Remote,value:{clientID:i,presence:this.getPresence(i)}})}else if(e===Oa.DOCUMENT_UNWATCHED){const l=this.getPresence(i);this.removeOnlineClient(i),l&&a.push({type:"unwatched",source:ee.Remote,value:{clientID:i,presence:l}})}else if(e===Oa.DOCUMENT_BROADCAST&&t.body.value.body){const{topic:l,payload:c}=t.body.value.body,d=new TextDecoder;a.push({type:"broadcast",value:{clientID:i,topic:l,payload:JSON.parse(d.decode(c))}})}a.length>0&&this.publish(a)}}applyStatus(t){this.status=t,t==="detached"&&this.setActor(Pd),this.publish([{source:t==="removed"?ee.Remote:ee.Local,type:"status-changed",value:t==="attached"?{status:t,actorID:this.changeID.getActorID()}:{status:t}}])}applyDocEventForReplay(t){if(t.type==="status-changed"){this.applyStatus(t.value.status),t.value.status==="attached"&&this.setActor(t.value.actorID);return}if(t.type==="snapshot"){const{snapshot:e,serverSeq:i,snapshotVector:a}=t.value;if(!e)return;this.applySnapshot(BigInt(i),fe.hexToVersionVector(a),fe.hexToBytes(e));return}if(t.type==="local-change"||t.type==="remote-change"){if(!t.rawChange)return;const e=Ko.fromStruct(t.rawChange);this.applyChange(e,t.source)}if(t.type==="initialized"){const e=new Set;for(const{clientID:i,presence:a}of t.value)e.add(i),this.presences.set(i,a);this.setOnlineClients(e);return}if(t.type==="watched"){const{clientID:e,presence:i}=t.value;this.addOnlineClient(e),this.presences.set(e,i);return}if(t.type==="unwatched"){const{clientID:e}=t.value;this.removeOnlineClient(e),this.presences.delete(e)}if(t.type==="presence-changed"){const{clientID:e,presence:i}=t.value;this.presences.set(e,i)}}applyDocEventsForReplay(t){for(const e of t)this.applyDocEventForReplay(e)}getValueByPath(t){if(!t.startsWith("$"))throw new j(V.ErrInvalidArgument,'path must start with "$"');const e=t.split(".");e.shift();let i=this.getRoot();for(const a of e)if(i=i[a],i===void 0)return;return i}setOnlineClients(t){this.onlineClients=t}resetOnlineClients(){this.onlineClients=new Set}addOnlineClient(t){this.onlineClients.add(t)}removeOnlineClient(t){this.onlineClients.delete(t)}hasPresence(t){return this.presences.has(t)}getMyPresence(){if(this.status!=="attached")return{};const t=this.presences.get(this.changeID.getActorID());return t?Xn(t):{}}getPresence(t){if(t===this.changeID.getActorID())return this.getMyPresence();if(!this.onlineClients.has(t))return;const e=this.presences.get(t);return e?Xn(e):void 0}getPresenceForTest(t){const e=this.presences.get(t);return e?Xn(e):void 0}getPresences(){const t=[];t.push({clientID:this.changeID.getActorID(),presence:Xn(this.getMyPresence())});for(const e of this.onlineClients)this.presences.has(e)&&t.push({clientID:e,presence:Xn(this.presences.get(e))});return t}getSelfForTest(){return{clientID:this.getChangeID().getActorID(),presence:this.getMyPresence()}}getOthersForTest(){const t=this.getChangeID().getActorID();return this.getPresences().filter(e=>e.clientID!==t).sort((e,i)=>e.clientID>i.clientID?1:-1)}canUndo(){return this.internalHistory.hasUndo()&&!this.isUpdating}canRedo(){return this.internalHistory.hasRedo()&&!this.isUpdating}undo(){if(this.isUpdating)throw new j(V.ErrRefused,"Undo is not allowed during an update");const t=this.internalHistory.popUndo();if(t===void 0)throw new j(V.ErrRefused,"There is no operation to be undone");this.ensureClone();const e=Bo.create(this.changeID,this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});for(const g of t){if(!(g instanceof Pn)){new Dm(e,Xn(this.clone.presences.get(this.changeID.getActorID()))).set(g.value,{addToHistory:!0});continue}const p=e.issueTimeTicket();g.setExecutedAt(p),e.push(g)}const i=e.toChange();i.execute(this.clone.root,this.clone.presences,ee.UndoRedo);const{opInfos:a,reverseOps:l}=i.execute(this.root,this.presences,ee.UndoRedo),c=e.getReversePresence();if(c&&l.push({type:"presence",value:c}),l.length>0&&this.internalHistory.pushRedo(l),!i.hasPresenceChange()&&a.length===0)return;this.localChanges.push(i),this.changeID=e.getNextID();const d=this.changeID.getActorID(),h=[];a.length>0&&h.push({type:"local-change",source:ee.UndoRedo,value:{message:i.getMessage()||"",operations:a,actor:d,clientSeq:i.getID().getClientSeq(),serverSeq:i.getID().getServerSeq()},rawChange:this.isEnableDevtools()?i.toStruct():void 0}),i.hasPresenceChange()&&h.push({type:"presence-changed",source:ee.UndoRedo,value:{clientID:d,presence:this.getPresence(d)}}),this.publish(h)}redo(){if(this.isUpdating)throw new j(V.ErrRefused,"Redo is not allowed during an update");const t=this.internalHistory.popRedo();if(t===void 0)throw new j(V.ErrRefused,"There is no operation to be redone");this.ensureClone();const e=Bo.create(this.changeID,this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});for(const g of t){if(!(g instanceof Pn)){new Dm(e,Xn(this.clone.presences.get(this.changeID.getActorID()))).set(g.value,{addToHistory:!0});continue}const p=e.issueTimeTicket();g.setExecutedAt(p),e.push(g)}const i=e.toChange();i.execute(this.clone.root,this.clone.presences,ee.UndoRedo);const{opInfos:a,reverseOps:l}=i.execute(this.root,this.presences,ee.UndoRedo),c=e.getReversePresence();if(c&&l.push({type:"presence",value:c}),l.length>0&&this.internalHistory.pushUndo(l),!i.hasPresenceChange()&&a.length===0)return;this.localChanges.push(i),this.changeID=e.getNextID();const d=this.changeID.getActorID(),h=[];a.length>0&&h.push({type:"local-change",source:ee.UndoRedo,value:{message:i.getMessage()||"",operations:a,actor:d,clientSeq:i.getID().getClientSeq(),serverSeq:i.getID().getServerSeq()},rawChange:this.isEnableDevtools()?i.toStruct():void 0}),i.hasPresenceChange()&&h.push({type:"presence-changed",source:ee.UndoRedo,value:{clientID:d,presence:this.getPresence(d)}}),this.publish(h)}getUndoStackForTest(){return this.internalHistory.getUndoStackForTest()}getRedoStackForTest(){return this.internalHistory.getRedoStackForTest()}broadcast(t,e,i){const a={type:"local-broadcast",value:{topic:t,payload:e},options:i};this.publish([a])}getVersionVector(){return this.changeID.getVersionVector()}}function lD(n,t){let e=t;return{authInterceptor:l=>async c=>(n&&c.header.set("x-api-key",n),e&&c.header.set("authorization",e),await l(c)),setToken:l=>{e=l}}}const uD="@yorkie-js/sdk",cD="0.6.23",jS={name:uD,version:cD};function fD(n){return t=>async e=>(n?e.header.set("x-yorkie-user-agent",n):e.header.set("x-yorkie-user-agent",jS.name+"/"+jS.version),await t(e))}const dD=n=>{try{if(JSON.stringify(n)===void 0)return!1}catch{return!1}return!0};var Yf=(n=>(n.Manual="manual",n.Realtime="realtime",n.RealtimePushOnly="realtime-pushonly",n.RealtimeSyncOff="realtime-syncoff",n))(Yf||{});const hu={rpcAddr:"https://api.yorkie.dev",syncLoopDuration:50,retrySyncLoopDelay:1e3,reconnectStreamDelay:1e3},km={maxRetries:1/0,initialRetryInterval:1e3,maxBackoff:2e4};class ox{constructor(t){y(this,"id");y(this,"key");y(this,"metadata");y(this,"status");y(this,"attachmentMap");y(this,"apiKey");y(this,"authTokenInjector");y(this,"conditions");y(this,"syncLoopDuration");y(this,"reconnectStreamDelay");y(this,"retrySyncLoopDelay");y(this,"rpcClient");y(this,"setAuthToken");y(this,"taskQueue");y(this,"processing",!1);y(this,"keepalive",!1);t=t||hu;const e=t.rpcAddr||hu.rpcAddr;this.key=t.key||rx(),this.metadata=t.metadata||{},this.status="deactivated",this.attachmentMap=new Map,this.apiKey=t.apiKey||"",this.authTokenInjector=t.authTokenInjector,this.conditions={SyncLoop:!1,WatchLoop:!1},this.syncLoopDuration=t.syncLoopDuration??hu.syncLoopDuration,this.reconnectStreamDelay=t.reconnectStreamDelay??hu.reconnectStreamDelay,this.retrySyncLoopDelay=t.retrySyncLoopDelay??hu.retrySyncLoopDelay;const{authInterceptor:i,setToken:a}=lD(this.apiKey);this.setAuthToken=a,this.rpcClient=l2(I2,O2({baseUrl:e,interceptors:[i,fD(t==null?void 0:t.userAgent)],fetch:(l,c)=>{const d={...c,keepalive:this.keepalive};return fetch(l,d)}})),this.taskQueue=[]}async activate(){if(this.isActive())return Promise.resolve();if(this.authTokenInjector){const t=await this.authTokenInjector();this.setAuthToken(t)}return this.enqueueTask(async()=>{try{const t=await this.rpcClient.activateClient({clientKey:this.key,metadata:this.metadata},{headers:{"x-shard-key":`${this.apiKey}/${this.key}`}});this.id=t.clientId,this.status="activated",this.runSyncLoop(),At.info(`[AC] c:"${this.getKey()}" activated, id:"${this.id}"`),typeof window<"u"&&window.addEventListener("beforeunload",async()=>{await this.deactivate({keepalive:!0})})}catch(t){throw At.error(`[AC] c:"${this.getKey()}" err :`,t),await this.handleConnectError(t),t}})}deactivate(t={keepalive:!1}){if(this.status==="deactivated")return Promise.resolve();const e=async()=>{try{await this.rpcClient.deactivateClient({clientId:this.id},{headers:{"x-shard-key":`${this.apiKey}/${this.key}`}}),this.deactivateInternal(),At.info(`[DC] c"${this.getKey()}" deactivated`)}catch(i){throw At.error(`[DC] c:"${this.getKey()}" err :`,i),await this.handleConnectError(i),i}};if(t.keepalive){this.keepalive=!0;const i=e();return this.keepalive=!1,i}return this.enqueueTask(e)}hasDocument(t){return this.attachmentMap.has(t)}attach(t,e={}){if(!this.isActive())throw new j(V.ErrClientNotActivated,`${this.key} is not active`);if(t.getStatus()!==Gs.Detached)throw new j(V.ErrDocumentNotDetached,`${t.getKey()} is not detached`);t.setActor(this.id),t.update((l,c)=>c.set(e.initialPresence||{}));const i=t.subscribe("local-broadcast",async l=>{var p;const{topic:c,payload:d}=l.value,h=(p=l.options)==null?void 0:p.error,g=l.options;try{await this.broadcast(t.getKey(),c,d,g)}catch(w){w instanceof Error&&(h==null||h(w))}}),a=e.syncMode??"realtime";return this.enqueueTask(async()=>{try{const l=await this.rpcClient.attachDocument({clientId:this.id,changePack:fe.toChangePack(t.createChangePack()),schemaKey:e.schema},{headers:{"x-shard-key":`${this.apiKey}/${t.getKey()}`}});(l.maxSizePerDocument??0)>0&&t.setMaxSizePerDocument(l.maxSizePerDocument),l.schemaRules.length>0&&t.setSchemaRules(fe.fromSchemaRules(l.schemaRules));const d=fe.fromChangePack(l.changePack);if(t.applyChangePack(d),t.getStatus()===Gs.Removed)return t;t.applyStatus(Gs.Attached),this.attachmentMap.set(t.getKey(),new JC(this.reconnectStreamDelay,t,l.documentId,a,i)),a!=="manual"&&await this.runWatchLoop(t.getKey()),At.info(`[AD] c:"${this.getKey()}" attaches d:"${t.getKey()}"`);const h=t.getRootObject();if(e.initialRoot){const g=e.initialRoot;t.update(p=>{for(const[w,v]of Object.entries(g))if(!h.has(w)){const S=w;p[S]=v}})}return t}catch(l){throw At.error(`[AD] c:"${this.getKey()}" err :`,l),await this.handleConnectError(l),l}})}detach(t,e={keepalive:!1}){if(!this.isActive())throw new j(V.ErrClientNotActivated,`${this.key} is not active`);const i=this.attachmentMap.get(t.getKey());if(!i)throw new j(V.ErrDocumentNotAttached,`${t.getKey()} is not attached`);t.update((l,c)=>c.clear());const a=async()=>{try{const l=await this.rpcClient.detachDocument({clientId:this.id,documentId:i.docID,changePack:fe.toChangePack(t.createChangePack()),removeIfNotAttached:e.removeIfNotAttached??!1},{headers:{"x-shard-key":`${this.apiKey}/${t.getKey()}`}}),c=fe.fromChangePack(l.changePack);return t.applyChangePack(c),t.getStatus()!==Gs.Removed&&t.applyStatus(Gs.Detached),this.detachInternal(t.getKey()),At.info(`[DD] c:"${this.getKey()}" detaches d:"${t.getKey()}"`),t}catch(l){throw At.error(`[DD] c:"${this.getKey()}" err :`,l),await this.handleConnectError(l),l}};if(e.keepalive){this.keepalive=!0;const l=a();return this.keepalive=!1,l}return this.enqueueTask(a)}async changeSyncMode(t,e){if(!this.isActive())throw new j(V.ErrClientNotActivated,`${this.key} is not active`);const i=this.attachmentMap.get(t.getKey());if(!i)throw new j(V.ErrDocumentNotAttached,`${t.getKey()} is not attached`);const a=i.syncMode;return a===e?t:(i.changeSyncMode(e),e==="manual"?(i.cancelWatchStream(),t):(e==="realtime"&&(i.remoteChangeEventReceived=!0),a==="manual"&&await this.runWatchLoop(t.getKey()),t))}sync(t){if(!this.isActive())throw new j(V.ErrClientNotActivated,`${this.key} is not active`);if(t){const e=this.attachmentMap.get(t.getKey());if(!e)throw new j(V.ErrDocumentNotAttached,`${t.getKey()} is not attached`);return this.enqueueTask(async()=>this.syncInternal(e,"realtime").catch(async i=>{throw At.error(`[SY] c:"${this.getKey()}" err :`,i),await this.handleConnectError(i),i}))}return this.enqueueTask(async()=>{const e=[];for(const[,i]of this.attachmentMap)e.push(this.syncInternal(i,i.syncMode));return Promise.all(e).catch(async i=>{throw At.error(`[SY] c:"${this.getKey()}" err :`,i),await this.handleConnectError(i),i})})}remove(t){if(!this.isActive())throw new j(V.ErrClientNotActivated,`${this.key} is not active`);const e=this.attachmentMap.get(t.getKey());if(!e)throw new j(V.ErrDocumentNotAttached,`${t.getKey()} is not attached`);t.setActor(this.id);const i=fe.toChangePack(t.createChangePack());return i.isRemoved=!0,this.enqueueTask(async()=>{try{const a=await this.rpcClient.removeDocument({clientId:this.id,documentId:e.docID,changePack:i},{headers:{"x-shard-key":`${this.apiKey}/${t.getKey()}`}}),l=fe.fromChangePack(a.changePack);t.applyChangePack(l),this.detachInternal(t.getKey()),At.info(`[RD] c:"${this.getKey()}" removes d:"${t.getKey()}"`)}catch(a){throw At.error(`[RD] c:"${this.getKey()}" err :`,a),await this.handleConnectError(a),a}})}getID(){return this.id}getKey(){return this.key}isActive(){return this.status==="activated"}getStatus(){return this.status}getCondition(t){return this.conditions[t]}broadcast(t,e,i,a){if(!this.isActive())throw new j(V.ErrClientNotActivated,`${this.key} is not active`);const l=this.attachmentMap.get(t);if(!l)throw new j(V.ErrDocumentNotAttached,`${t} is not attached`);if(!dD(i))throw new j(V.ErrInvalidArgument,"payload is not serializable");const c=(a==null?void 0:a.maxRetries)??km.maxRetries,d=km.maxBackoff;let h=0;const g=w=>Math.min(km.initialRetryInterval*2**w,d),p=async()=>this.enqueueTask(async()=>{try{await this.rpcClient.broadcast({clientId:this.id,documentId:l.docID,topic:e,payload:new TextEncoder().encode(JSON.stringify(i))},{headers:{"x-shard-key":`${this.apiKey}/${t}`}}),At.info(`[BC] c:"${this.getKey()}" broadcasts d:"${t}" t:"${e}"`)}catch(w){if(At.error(`[BC] c:"${this.getKey()}" err:`,w),await this.handleConnectError(w))if(w instanceof Gt&&Vs(w)===V.ErrUnauthenticated&&l.doc.publish([{type:ze.AuthError,value:{reason:pu(w).reason,method:"Broadcast"}}]),h<c)h++,setTimeout(()=>p(),g(h-1)),At.info(`[BC] c:"${this.getKey()}" retry attempt ${h}/${c}`);else throw At.error(`[BC] c:"${this.getKey()}" exceeded maximum retry attempts`),w;else throw w}});return p()}runSyncLoop(){const t=()=>{if(!this.isActive()){At.debug(`[SL] c:"${this.getKey()}" exit sync loop`),this.conditions.SyncLoop=!1;return}const e=[];for(const[,i]of this.attachmentMap)i.needRealtimeSync()&&(i.remoteChangeEventReceived=!1,e.push(this.syncInternal(i,i.syncMode).catch(async a=>{throw a instanceof Gt&&Vs(a)===V.ErrUnauthenticated&&i.doc.publish([{type:ze.AuthError,value:{reason:pu(a).reason,method:"PushPull"}}]),a})));Promise.all(e).then(()=>setTimeout(t,this.syncLoopDuration)).catch(async i=>{At.error(`[SL] c:"${this.getKey()}" sync failed:`,i),await this.handleConnectError(i)?setTimeout(t,this.retrySyncLoopDelay):this.conditions.SyncLoop=!1})};At.debug(`[SL] c:"${this.getKey()}" run sync loop`),this.conditions.SyncLoop=!0,t()}async runWatchLoop(t){const e=this.attachmentMap.get(t);if(!e)throw new j(V.ErrDocumentNotAttached,`${t} is not attached`);return this.conditions.WatchLoop=!0,e.runWatchLoop(i=>{if(!this.isActive())return this.conditions.WatchLoop=!1,Promise.reject(new j(V.ErrClientNotActivated,`${this.key} is not active`));const a=new AbortController,l=this.rpcClient.watchDocument({clientId:this.id,documentId:e.docID},{headers:{"x-shard-key":`${this.apiKey}/${t}`},signal:a.signal});return e.doc.publish([{type:ze.ConnectionChanged,value:Td.Connected}]),At.info(`[WD] c:"${this.getKey()}" watches d:"${t}"`),new Promise((c,d)=>{(async()=>{try{for await(const g of l)this.handleWatchDocumentsResponse(e,g),g.body.case==="initialization"&&c([l,a])}catch(g){e.doc.resetOnlineClients(),e.doc.publish([{type:ze.Initialized,source:ee.Local,value:e.doc.getPresences()}]),e.doc.publish([{type:ze.ConnectionChanged,value:Td.Disconnected}]),At.debug(`[WD] c:"${this.getKey()}" unwatches`),await this.handleConnectError(g)?(g instanceof Gt&&Vs(g)===V.ErrUnauthenticated&&e.doc.publish([{type:ze.AuthError,value:{reason:pu(g).reason,method:"WatchDocuments"}}]),i()):this.conditions.WatchLoop=!1,d(g)}})()})})}handleWatchDocumentsResponse(t,e){if(e.body.case==="event"&&e.body.value.type===Oa.DOCUMENT_CHANGED){t.remoteChangeEventReceived=!0;return}t.doc.applyWatchStream(e)}deactivateInternal(){this.status="deactivated";for(const[t,e]of this.attachmentMap)this.detachInternal(t),e.doc.applyStatus(Gs.Detached)}detachInternal(t){const e=this.attachmentMap.get(t);e&&(e.cancelWatchStream(),e.unsubscribeBroadcastEvent(),this.attachmentMap.delete(t))}async syncInternal(t,e){const{doc:i,docID:a}=t,l=i.createChangePack();try{const c=await this.rpcClient.pushPullChanges({clientId:this.id,documentId:a,changePack:fe.toChangePack(l),pushOnly:e==="realtime-pushonly"},{headers:{"x-shard-key":`${this.apiKey}/${i.getKey()}`}}),d=fe.fromChangePack(c.changePack);if(d.hasChanges()&&(t.syncMode==="realtime-pushonly"||t.syncMode==="realtime-syncoff"))return i;i.applyChangePack(d),t.doc.publish([{type:ze.SyncStatusChanged,value:vp.Synced}]),i.getStatus()===Gs.Removed&&this.detachInternal(i.getKey());const h=i.getKey(),g=d.getChangeSize();return At.info(`[PP] c:"${this.getKey()}" sync d:"${h}", push:${l.getChangeSize()} pull:${g} cp:${d.getCheckpoint().toTestString()}`),i}catch(c){throw i.publish([{type:ze.SyncStatusChanged,value:vp.SyncFailed}]),At.error(`[PP] c:"${this.getKey()}" err :`,c),c}}async handleConnectError(t){if(!(t instanceof Gt))return!1;if(t.code===_t.Canceled||t.code===_t.Unknown||t.code===_t.ResourceExhausted||t.code===_t.Unavailable)return!0;if(Vs(t)===V.ErrUnauthenticated){if(this.authTokenInjector){const e=await this.authTokenInjector(pu(t).reason);this.setAuthToken(e)}return!0}return Vs(t)===V.ErrTooManySubscribers?(At.error(`[WD] c:"${this.getKey()}" err :`,t.rawMessage),!0):(Vs(t)===V.ErrTooManyAttachments||(Vs(t)===V.ErrClientNotActivated||Vs(t)===V.ErrClientNotFound)&&this.deactivateInternal(),!1)}enqueueTask(t){return new Promise((e,i)=>{this.taskQueue.push(()=>t().then(e).catch(i)),this.processing||this.processNext()})}async processNext(){if(this.taskQueue.length===0){this.processing=!1;return}try{this.processing=!0,await this.taskQueue.shift()()}catch{At.error(`[TQ] c:"${this.getKey()}" process failed, id:"${this.id}"`)}this.processNext()}}Nr.Int,Nr.Long;typeof globalThis<"u"&&(globalThis.yorkie={Client:ox,Document:ax,Primitive:le,Text:Xp,Counter:Kp,Tree:Qp,LogLevel:We,setLogLevel:PC,IntType:Nr.Int,LongType:Nr.Long});const lx=et.createContext({client:void 0,loading:!0,error:void 0});function hD(n){const[t,e]=et.useState(void 0),[i,a]=et.useState(!0),[l,c]=et.useState(void 0),[d,h]=et.useState(!1);return et.useEffect(()=>{h(!0)},[]),et.useEffect(()=>{a(!0),c(void 0);async function g(){if(d)try{const p=new ox(n);await p.activate(),e(p)}catch(p){c(p instanceof Error?p:new Error("Failed to activate client"))}finally{a(!1)}}return g(),()=>{t!=null&&t.isActive()&&t.deactivate({keepalive:!0})}},[n.apiKey,n.rpcAddr,d]),{client:t,loading:i,error:l}}const gD=({children:n,...t})=>{const e=et.useMemo(()=>({userAgent:Ww.name+"/"+Ww.version,...t}),[t.apiKey,t.rpcAddr]),{client:i,loading:a,error:l}=hD(e);return Q.jsx(lx.Provider,{value:{client:i,loading:a,error:l},children:n})},mD=()=>{const n=et.useContext(lx);if(!n)throw new Error("useYorkie must be used under YorkieProvider");return{client:n.client,loading:n.loading,error:n.error}};function pD(n,t,e,i,a,l){const[c,d]=et.useState(),[h,g]=et.useState(!0),[p,w]=et.useState(),[v,S]=et.useState(a),[x,E]=et.useState([]),[I,k]=et.useState(Td.Disconnected);et.useEffect(()=>{if(e){g(!1),w(e);return}if(!n||t){g(!0);return}g(!0),w(void 0);const N=new ax(i),O=[];O.push(N.subscribe(()=>{S(N.getRoot())})),O.push(N.subscribe("presence",()=>{E(N.getPresences())})),O.push(N.subscribe("connection",J=>{k(J.value)}));async function _(){try{await(n==null?void 0:n.attach(N,{initialRoot:a,initialPresence:l})),d(N),S(N.getRoot()),E(N.getPresences())}catch(J){w(J instanceof Error?J:new Error("Failed to attach document"))}finally{g(!1)}}return _(),()=>{n&&n.hasDocument(i)&&n.detach(N);for(const J of O)J()}},[n,t,e,i]);const z=et.useCallback(N=>{if(c)try{c.update(N)}catch(O){w(O instanceof Error?O:new Error("Failed to update document"))}},[c]);return{doc:c,root:v,presences:x,connection:I,update:z,loading:h,error:p}}const ux=et.createContext(null),yD=({docKey:n,initialRoot:t={},initialPresence:e={},children:i})=>{const{client:a,loading:l,error:c}=mD(),{doc:d,root:h,presences:g,connection:p,update:w,loading:v,error:S}=pD(a,l,c,n,t,e);return Q.jsx(ux.Provider,{value:{doc:d,root:h,presences:g,connection:p,update:w,loading:v,error:S},children:i})},vD=()=>{const n=et.useContext(ux);if(!n)throw new Error("useDocument must be used within a DocumentProvider");return{doc:n.doc,root:n.root,presences:n.presences,connection:n.connection,update:n.update,loading:n.loading,error:n.error}};function be(n){if(typeof n=="string"||typeof n=="number")return""+n;let t="";if(Array.isArray(n))for(let e=0,i;e<n.length;e++)(i=be(n[e]))!==""&&(t+=(t&&" ")+i);else for(let e in n)n[e]&&(t+=(t&&" ")+e);return t}var wD={value:()=>{}};function jd(){for(var n=0,t=arguments.length,e={},i;n<t;++n){if(!(i=arguments[n]+"")||i in e||/[\s.]/.test(i))throw new Error("illegal type: "+i);e[i]=[]}return new Gf(e)}function Gf(n){this._=n}function SD(n,t){return n.trim().split(/^|\s+/).map(function(e){var i="",a=e.indexOf(".");if(a>=0&&(i=e.slice(a+1),e=e.slice(0,a)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:i}})}Gf.prototype=jd.prototype={constructor:Gf,on:function(n,t){var e=this._,i=SD(n+"",e),a,l=-1,c=i.length;if(arguments.length<2){for(;++l<c;)if((a=(n=i[l]).type)&&(a=bD(e[a],n.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++l<c;)if(a=(n=i[l]).type)e[a]=YS(e[a],n.name,t);else if(t==null)for(a in e)e[a]=YS(e[a],n.name,null);return this},copy:function(){var n={},t=this._;for(var e in t)n[e]=t[e].slice();return new Gf(n)},call:function(n,t){if((a=arguments.length-2)>0)for(var e=new Array(a),i=0,a,l;i<a;++i)e[i]=arguments[i+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(l=this._[n],i=0,a=l.length;i<a;++i)l[i].value.apply(t,e)},apply:function(n,t,e){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var i=this._[n],a=0,l=i.length;a<l;++a)i[a].value.apply(t,e)}};function bD(n,t){for(var e=0,i=n.length,a;e<i;++e)if((a=n[e]).name===t)return a.value}function YS(n,t,e){for(var i=0,a=n.length;i<a;++i)if(n[i].name===t){n[i]=wD,n=n.slice(0,i).concat(n.slice(i+1));break}return e!=null&&n.push({name:t,value:e}),n}var wp="http://www.w3.org/1999/xhtml";const GS={svg:"http://www.w3.org/2000/svg",xhtml:wp,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Yd(n){var t=n+="",e=t.indexOf(":");return e>=0&&(t=n.slice(0,e))!=="xmlns"&&(n=n.slice(e+1)),GS.hasOwnProperty(t)?{space:GS[t],local:n}:n}function xD(n){return function(){var t=this.ownerDocument,e=this.namespaceURI;return e===wp&&t.documentElement.namespaceURI===wp?t.createElement(n):t.createElementNS(e,n)}}function TD(n){return function(){return this.ownerDocument.createElementNS(n.space,n.local)}}function cx(n){var t=Yd(n);return(t.local?TD:xD)(t)}function AD(){}function Wp(n){return n==null?AD:function(){return this.querySelector(n)}}function ED(n){typeof n!="function"&&(n=Wp(n));for(var t=this._groups,e=t.length,i=new Array(e),a=0;a<e;++a)for(var l=t[a],c=l.length,d=i[a]=new Array(c),h,g,p=0;p<c;++p)(h=l[p])&&(g=n.call(h,h.__data__,p,l))&&("__data__"in h&&(g.__data__=h.__data__),d[p]=g);return new wn(i,this._parents)}function ND(n){return n==null?[]:Array.isArray(n)?n:Array.from(n)}function CD(){return[]}function fx(n){return n==null?CD:function(){return this.querySelectorAll(n)}}function DD(n){return function(){return ND(n.apply(this,arguments))}}function kD(n){typeof n=="function"?n=DD(n):n=fx(n);for(var t=this._groups,e=t.length,i=[],a=[],l=0;l<e;++l)for(var c=t[l],d=c.length,h,g=0;g<d;++g)(h=c[g])&&(i.push(n.call(h,h.__data__,g,c)),a.push(h));return new wn(i,a)}function dx(n){return function(){return this.matches(n)}}function hx(n){return function(t){return t.matches(n)}}var OD=Array.prototype.find;function ID(n){return function(){return OD.call(this.children,n)}}function RD(){return this.firstElementChild}function MD(n){return this.select(n==null?RD:ID(typeof n=="function"?n:hx(n)))}var BD=Array.prototype.filter;function zD(){return Array.from(this.children)}function LD(n){return function(){return BD.call(this.children,n)}}function _D(n){return this.selectAll(n==null?zD:LD(typeof n=="function"?n:hx(n)))}function UD(n){typeof n!="function"&&(n=dx(n));for(var t=this._groups,e=t.length,i=new Array(e),a=0;a<e;++a)for(var l=t[a],c=l.length,d=i[a]=[],h,g=0;g<c;++g)(h=l[g])&&n.call(h,h.__data__,g,l)&&d.push(h);return new wn(i,this._parents)}function gx(n){return new Array(n.length)}function qD(){return new wn(this._enter||this._groups.map(gx),this._parents)}function Ad(n,t){this.ownerDocument=n.ownerDocument,this.namespaceURI=n.namespaceURI,this._next=null,this._parent=n,this.__data__=t}Ad.prototype={constructor:Ad,appendChild:function(n){return this._parent.insertBefore(n,this._next)},insertBefore:function(n,t){return this._parent.insertBefore(n,t)},querySelector:function(n){return this._parent.querySelector(n)},querySelectorAll:function(n){return this._parent.querySelectorAll(n)}};function PD(n){return function(){return n}}function JD(n,t,e,i,a,l){for(var c=0,d,h=t.length,g=l.length;c<g;++c)(d=t[c])?(d.__data__=l[c],i[c]=d):e[c]=new Ad(n,l[c]);for(;c<h;++c)(d=t[c])&&(a[c]=d)}function $D(n,t,e,i,a,l,c){var d,h,g=new Map,p=t.length,w=l.length,v=new Array(p),S;for(d=0;d<p;++d)(h=t[d])&&(v[d]=S=c.call(h,h.__data__,d,t)+"",g.has(S)?a[d]=h:g.set(S,h));for(d=0;d<w;++d)S=c.call(n,l[d],d,l)+"",(h=g.get(S))?(i[d]=h,h.__data__=l[d],g.delete(S)):e[d]=new Ad(n,l[d]);for(d=0;d<p;++d)(h=t[d])&&g.get(v[d])===h&&(a[d]=h)}function HD(n){return n.__data__}function VD(n,t){if(!arguments.length)return Array.from(this,HD);var e=t?$D:JD,i=this._parents,a=this._groups;typeof n!="function"&&(n=PD(n));for(var l=a.length,c=new Array(l),d=new Array(l),h=new Array(l),g=0;g<l;++g){var p=i[g],w=a[g],v=w.length,S=jD(n.call(p,p&&p.__data__,g,i)),x=S.length,E=d[g]=new Array(x),I=c[g]=new Array(x),k=h[g]=new Array(v);e(p,w,E,I,k,S,t);for(var z=0,N=0,O,_;z<x;++z)if(O=E[z]){for(z>=N&&(N=z+1);!(_=I[N])&&++N<x;);O._next=_||null}}return c=new wn(c,i),c._enter=d,c._exit=h,c}function jD(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function YD(){return new wn(this._exit||this._groups.map(gx),this._parents)}function GD(n,t,e){var i=this.enter(),a=this,l=this.exit();return typeof n=="function"?(i=n(i),i&&(i=i.selection())):i=i.append(n+""),t!=null&&(a=t(a),a&&(a=a.selection())),e==null?l.remove():e(l),i&&a?i.merge(a).order():a}function XD(n){for(var t=n.selection?n.selection():n,e=this._groups,i=t._groups,a=e.length,l=i.length,c=Math.min(a,l),d=new Array(a),h=0;h<c;++h)for(var g=e[h],p=i[h],w=g.length,v=d[h]=new Array(w),S,x=0;x<w;++x)(S=g[x]||p[x])&&(v[x]=S);for(;h<a;++h)d[h]=e[h];return new wn(d,this._parents)}function KD(){for(var n=this._groups,t=-1,e=n.length;++t<e;)for(var i=n[t],a=i.length-1,l=i[a],c;--a>=0;)(c=i[a])&&(l&&c.compareDocumentPosition(l)^4&&l.parentNode.insertBefore(c,l),l=c);return this}function FD(n){n||(n=ZD);function t(w,v){return w&&v?n(w.__data__,v.__data__):!w-!v}for(var e=this._groups,i=e.length,a=new Array(i),l=0;l<i;++l){for(var c=e[l],d=c.length,h=a[l]=new Array(d),g,p=0;p<d;++p)(g=c[p])&&(h[p]=g);h.sort(t)}return new wn(a,this._parents).order()}function ZD(n,t){return n<t?-1:n>t?1:n>=t?0:NaN}function QD(){var n=arguments[0];return arguments[0]=this,n.apply(null,arguments),this}function WD(){return Array.from(this)}function t3(){for(var n=this._groups,t=0,e=n.length;t<e;++t)for(var i=n[t],a=0,l=i.length;a<l;++a){var c=i[a];if(c)return c}return null}function e3(){let n=0;for(const t of this)++n;return n}function n3(){return!this.node()}function r3(n){for(var t=this._groups,e=0,i=t.length;e<i;++e)for(var a=t[e],l=0,c=a.length,d;l<c;++l)(d=a[l])&&n.call(d,d.__data__,l,a);return this}function i3(n){return function(){this.removeAttribute(n)}}function s3(n){return function(){this.removeAttributeNS(n.space,n.local)}}function a3(n,t){return function(){this.setAttribute(n,t)}}function o3(n,t){return function(){this.setAttributeNS(n.space,n.local,t)}}function l3(n,t){return function(){var e=t.apply(this,arguments);e==null?this.removeAttribute(n):this.setAttribute(n,e)}}function u3(n,t){return function(){var e=t.apply(this,arguments);e==null?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,e)}}function c3(n,t){var e=Yd(n);if(arguments.length<2){var i=this.node();return e.local?i.getAttributeNS(e.space,e.local):i.getAttribute(e)}return this.each((t==null?e.local?s3:i3:typeof t=="function"?e.local?u3:l3:e.local?o3:a3)(e,t))}function mx(n){return n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView}function f3(n){return function(){this.style.removeProperty(n)}}function d3(n,t,e){return function(){this.style.setProperty(n,t,e)}}function h3(n,t,e){return function(){var i=t.apply(this,arguments);i==null?this.style.removeProperty(n):this.style.setProperty(n,i,e)}}function g3(n,t,e){return arguments.length>1?this.each((t==null?f3:typeof t=="function"?h3:d3)(n,t,e??"")):Qo(this.node(),n)}function Qo(n,t){return n.style.getPropertyValue(t)||mx(n).getComputedStyle(n,null).getPropertyValue(t)}function m3(n){return function(){delete this[n]}}function p3(n,t){return function(){this[n]=t}}function y3(n,t){return function(){var e=t.apply(this,arguments);e==null?delete this[n]:this[n]=e}}function v3(n,t){return arguments.length>1?this.each((t==null?m3:typeof t=="function"?y3:p3)(n,t)):this.node()[n]}function px(n){return n.trim().split(/^|\s+/)}function ty(n){return n.classList||new yx(n)}function yx(n){this._node=n,this._names=px(n.getAttribute("class")||"")}yx.prototype={add:function(n){var t=this._names.indexOf(n);t<0&&(this._names.push(n),this._node.setAttribute("class",this._names.join(" ")))},remove:function(n){var t=this._names.indexOf(n);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(n){return this._names.indexOf(n)>=0}};function vx(n,t){for(var e=ty(n),i=-1,a=t.length;++i<a;)e.add(t[i])}function wx(n,t){for(var e=ty(n),i=-1,a=t.length;++i<a;)e.remove(t[i])}function w3(n){return function(){vx(this,n)}}function S3(n){return function(){wx(this,n)}}function b3(n,t){return function(){(t.apply(this,arguments)?vx:wx)(this,n)}}function x3(n,t){var e=px(n+"");if(arguments.length<2){for(var i=ty(this.node()),a=-1,l=e.length;++a<l;)if(!i.contains(e[a]))return!1;return!0}return this.each((typeof t=="function"?b3:t?w3:S3)(e,t))}function T3(){this.textContent=""}function A3(n){return function(){this.textContent=n}}function E3(n){return function(){var t=n.apply(this,arguments);this.textContent=t??""}}function N3(n){return arguments.length?this.each(n==null?T3:(typeof n=="function"?E3:A3)(n)):this.node().textContent}function C3(){this.innerHTML=""}function D3(n){return function(){this.innerHTML=n}}function k3(n){return function(){var t=n.apply(this,arguments);this.innerHTML=t??""}}function O3(n){return arguments.length?this.each(n==null?C3:(typeof n=="function"?k3:D3)(n)):this.node().innerHTML}function I3(){this.nextSibling&&this.parentNode.appendChild(this)}function R3(){return this.each(I3)}function M3(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function B3(){return this.each(M3)}function z3(n){var t=typeof n=="function"?n:cx(n);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function L3(){return null}function _3(n,t){var e=typeof n=="function"?n:cx(n),i=t==null?L3:typeof t=="function"?t:Wp(t);return this.select(function(){return this.insertBefore(e.apply(this,arguments),i.apply(this,arguments)||null)})}function U3(){var n=this.parentNode;n&&n.removeChild(this)}function q3(){return this.each(U3)}function P3(){var n=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(n,this.nextSibling):n}function J3(){var n=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(n,this.nextSibling):n}function $3(n){return this.select(n?J3:P3)}function H3(n){return arguments.length?this.property("__data__",n):this.node().__data__}function V3(n){return function(t){n.call(this,t,this.__data__)}}function j3(n){return n.trim().split(/^|\s+/).map(function(t){var e="",i=t.indexOf(".");return i>=0&&(e=t.slice(i+1),t=t.slice(0,i)),{type:t,name:e}})}function Y3(n){return function(){var t=this.__on;if(t){for(var e=0,i=-1,a=t.length,l;e<a;++e)l=t[e],(!n.type||l.type===n.type)&&l.name===n.name?this.removeEventListener(l.type,l.listener,l.options):t[++i]=l;++i?t.length=i:delete this.__on}}}function G3(n,t,e){return function(){var i=this.__on,a,l=V3(t);if(i){for(var c=0,d=i.length;c<d;++c)if((a=i[c]).type===n.type&&a.name===n.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=l,a.options=e),a.value=t;return}}this.addEventListener(n.type,l,e),a={type:n.type,name:n.name,value:t,listener:l,options:e},i?i.push(a):this.__on=[a]}}function X3(n,t,e){var i=j3(n+""),a,l=i.length,c;if(arguments.length<2){var d=this.node().__on;if(d){for(var h=0,g=d.length,p;h<g;++h)for(a=0,p=d[h];a<l;++a)if((c=i[a]).type===p.type&&c.name===p.name)return p.value}return}for(d=t?G3:Y3,a=0;a<l;++a)this.each(d(i[a],t,e));return this}function Sx(n,t,e){var i=mx(n),a=i.CustomEvent;typeof a=="function"?a=new a(t,e):(a=i.document.createEvent("Event"),e?(a.initEvent(t,e.bubbles,e.cancelable),a.detail=e.detail):a.initEvent(t,!1,!1)),n.dispatchEvent(a)}function K3(n,t){return function(){return Sx(this,n,t)}}function F3(n,t){return function(){return Sx(this,n,t.apply(this,arguments))}}function Z3(n,t){return this.each((typeof t=="function"?F3:K3)(n,t))}function*Q3(){for(var n=this._groups,t=0,e=n.length;t<e;++t)for(var i=n[t],a=0,l=i.length,c;a<l;++a)(c=i[a])&&(yield c)}var bx=[null];function wn(n,t){this._groups=n,this._parents=t}function Wu(){return new wn([[document.documentElement]],bx)}function W3(){return this}wn.prototype=Wu.prototype={constructor:wn,select:ED,selectAll:kD,selectChild:MD,selectChildren:_D,filter:UD,data:VD,enter:qD,exit:YD,join:GD,merge:XD,selection:W3,order:KD,sort:FD,call:QD,nodes:WD,node:t3,size:e3,empty:n3,each:r3,attr:c3,style:g3,property:v3,classed:x3,text:N3,html:O3,raise:R3,lower:B3,append:z3,insert:_3,remove:q3,clone:$3,datum:H3,on:X3,dispatch:Z3,[Symbol.iterator]:Q3};function gn(n){return typeof n=="string"?new wn([[document.querySelector(n)]],[document.documentElement]):new wn([[n]],bx)}function tk(n){let t;for(;t=n.sourceEvent;)n=t;return n}function Fn(n,t){if(n=tk(n),t===void 0&&(t=n.currentTarget),t){var e=t.ownerSVGElement||t;if(e.createSVGPoint){var i=e.createSVGPoint();return i.x=n.clientX,i.y=n.clientY,i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}if(t.getBoundingClientRect){var a=t.getBoundingClientRect();return[n.clientX-a.left-t.clientLeft,n.clientY-a.top-t.clientTop]}}return[n.pageX,n.pageY]}const ek={passive:!1},_u={capture:!0,passive:!1};function Om(n){n.stopImmediatePropagation()}function Po(n){n.preventDefault(),n.stopImmediatePropagation()}function xx(n){var t=n.document.documentElement,e=gn(n).on("dragstart.drag",Po,_u);"onselectstart"in t?e.on("selectstart.drag",Po,_u):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Tx(n,t){var e=n.document.documentElement,i=gn(n).on("dragstart.drag",null);t&&(i.on("click.drag",Po,_u),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in e?i.on("selectstart.drag",null):(e.style.MozUserSelect=e.__noselect,delete e.__noselect)}const If=n=>()=>n;function Sp(n,{sourceEvent:t,subject:e,target:i,identifier:a,active:l,x:c,y:d,dx:h,dy:g,dispatch:p}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:e,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:a,enumerable:!0,configurable:!0},active:{value:l,enumerable:!0,configurable:!0},x:{value:c,enumerable:!0,configurable:!0},y:{value:d,enumerable:!0,configurable:!0},dx:{value:h,enumerable:!0,configurable:!0},dy:{value:g,enumerable:!0,configurable:!0},_:{value:p}})}Sp.prototype.on=function(){var n=this._.on.apply(this._,arguments);return n===this._?this:n};function nk(n){return!n.ctrlKey&&!n.button}function rk(){return this.parentNode}function ik(n,t){return t??{x:n.x,y:n.y}}function sk(){return navigator.maxTouchPoints||"ontouchstart"in this}function Ax(){var n=nk,t=rk,e=ik,i=sk,a={},l=jd("start","drag","end"),c=0,d,h,g,p,w=0;function v(O){O.on("mousedown.drag",S).filter(i).on("touchstart.drag",I).on("touchmove.drag",k,ek).on("touchend.drag touchcancel.drag",z).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function S(O,_){if(!(p||!n.call(this,O,_))){var J=N(this,t.call(this,O,_),O,_,"mouse");J&&(gn(O.view).on("mousemove.drag",x,_u).on("mouseup.drag",E,_u),xx(O.view),Om(O),g=!1,d=O.clientX,h=O.clientY,J("start",O))}}function x(O){if(Po(O),!g){var _=O.clientX-d,J=O.clientY-h;g=_*_+J*J>w}a.mouse("drag",O)}function E(O){gn(O.view).on("mousemove.drag mouseup.drag",null),Tx(O.view,g),Po(O),a.mouse("end",O)}function I(O,_){if(n.call(this,O,_)){var J=O.changedTouches,U=t.call(this,O,_),W=J.length,F,nt;for(F=0;F<W;++F)(nt=N(this,U,O,_,J[F].identifier,J[F]))&&(Om(O),nt("start",O,J[F]))}}function k(O){var _=O.changedTouches,J=_.length,U,W;for(U=0;U<J;++U)(W=a[_[U].identifier])&&(Po(O),W("drag",O,_[U]))}function z(O){var _=O.changedTouches,J=_.length,U,W;for(p&&clearTimeout(p),p=setTimeout(function(){p=null},500),U=0;U<J;++U)(W=a[_[U].identifier])&&(Om(O),W("end",O,_[U]))}function N(O,_,J,U,W,F){var nt=l.copy(),ft=Fn(F||J,_),ot,ct,R;if((R=e.call(O,new Sp("beforestart",{sourceEvent:J,target:v,identifier:W,active:c,x:ft[0],y:ft[1],dx:0,dy:0,dispatch:nt}),U))!=null)return ot=R.x-ft[0]||0,ct=R.y-ft[1]||0,function Y(D,B,$){var q=ft,C;switch(D){case"start":a[W]=Y,C=c++;break;case"end":delete a[W],--c;case"drag":ft=Fn($||B,_),C=c;break}nt.call(D,O,new Sp(D,{sourceEvent:B,subject:R,target:v,identifier:W,active:C,x:ft[0]+ot,y:ft[1]+ct,dx:ft[0]-q[0],dy:ft[1]-q[1],dispatch:nt}),U)}}return v.filter=function(O){return arguments.length?(n=typeof O=="function"?O:If(!!O),v):n},v.container=function(O){return arguments.length?(t=typeof O=="function"?O:If(O),v):t},v.subject=function(O){return arguments.length?(e=typeof O=="function"?O:If(O),v):e},v.touchable=function(O){return arguments.length?(i=typeof O=="function"?O:If(!!O),v):i},v.on=function(){var O=l.on.apply(l,arguments);return O===l?v:O},v.clickDistance=function(O){return arguments.length?(w=(O=+O)*O,v):Math.sqrt(w)},v}function ey(n,t,e){n.prototype=t.prototype=e,e.constructor=n}function Ex(n,t){var e=Object.create(n.prototype);for(var i in t)e[i]=t[i];return e}function tc(){}var Uu=.7,Ed=1/Uu,Jo="\\s*([+-]?\\d+)\\s*",qu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ar="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ak=/^#([0-9a-f]{3,8})$/,ok=new RegExp(`^rgb\\(${Jo},${Jo},${Jo}\\)$`),lk=new RegExp(`^rgb\\(${Ar},${Ar},${Ar}\\)$`),uk=new RegExp(`^rgba\\(${Jo},${Jo},${Jo},${qu}\\)$`),ck=new RegExp(`^rgba\\(${Ar},${Ar},${Ar},${qu}\\)$`),fk=new RegExp(`^hsl\\(${qu},${Ar},${Ar}\\)$`),dk=new RegExp(`^hsla\\(${qu},${Ar},${Ar},${qu}\\)$`),XS={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ey(tc,Pu,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:KS,formatHex:KS,formatHex8:hk,formatHsl:gk,formatRgb:FS,toString:FS});function KS(){return this.rgb().formatHex()}function hk(){return this.rgb().formatHex8()}function gk(){return Nx(this).formatHsl()}function FS(){return this.rgb().formatRgb()}function Pu(n){var t,e;return n=(n+"").trim().toLowerCase(),(t=ak.exec(n))?(e=t[1].length,t=parseInt(t[1],16),e===6?ZS(t):e===3?new nn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):e===8?Rf(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):e===4?Rf(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=ok.exec(n))?new nn(t[1],t[2],t[3],1):(t=lk.exec(n))?new nn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=uk.exec(n))?Rf(t[1],t[2],t[3],t[4]):(t=ck.exec(n))?Rf(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=fk.exec(n))?tb(t[1],t[2]/100,t[3]/100,1):(t=dk.exec(n))?tb(t[1],t[2]/100,t[3]/100,t[4]):XS.hasOwnProperty(n)?ZS(XS[n]):n==="transparent"?new nn(NaN,NaN,NaN,0):null}function ZS(n){return new nn(n>>16&255,n>>8&255,n&255,1)}function Rf(n,t,e,i){return i<=0&&(n=t=e=NaN),new nn(n,t,e,i)}function mk(n){return n instanceof tc||(n=Pu(n)),n?(n=n.rgb(),new nn(n.r,n.g,n.b,n.opacity)):new nn}function bp(n,t,e,i){return arguments.length===1?mk(n):new nn(n,t,e,i??1)}function nn(n,t,e,i){this.r=+n,this.g=+t,this.b=+e,this.opacity=+i}ey(nn,bp,Ex(tc,{brighter(n){return n=n==null?Ed:Math.pow(Ed,n),new nn(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?Uu:Math.pow(Uu,n),new nn(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new nn(Ia(this.r),Ia(this.g),Ia(this.b),Nd(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:QS,formatHex:QS,formatHex8:pk,formatRgb:WS,toString:WS}));function QS(){return`#${Da(this.r)}${Da(this.g)}${Da(this.b)}`}function pk(){return`#${Da(this.r)}${Da(this.g)}${Da(this.b)}${Da((isNaN(this.opacity)?1:this.opacity)*255)}`}function WS(){const n=Nd(this.opacity);return`${n===1?"rgb(":"rgba("}${Ia(this.r)}, ${Ia(this.g)}, ${Ia(this.b)}${n===1?")":`, ${n})`}`}function Nd(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function Ia(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function Da(n){return n=Ia(n),(n<16?"0":"")+n.toString(16)}function tb(n,t,e,i){return i<=0?n=t=e=NaN:e<=0||e>=1?n=t=NaN:t<=0&&(n=NaN),new Zn(n,t,e,i)}function Nx(n){if(n instanceof Zn)return new Zn(n.h,n.s,n.l,n.opacity);if(n instanceof tc||(n=Pu(n)),!n)return new Zn;if(n instanceof Zn)return n;n=n.rgb();var t=n.r/255,e=n.g/255,i=n.b/255,a=Math.min(t,e,i),l=Math.max(t,e,i),c=NaN,d=l-a,h=(l+a)/2;return d?(t===l?c=(e-i)/d+(e<i)*6:e===l?c=(i-t)/d+2:c=(t-e)/d+4,d/=h<.5?l+a:2-l-a,c*=60):d=h>0&&h<1?0:c,new Zn(c,d,h,n.opacity)}function yk(n,t,e,i){return arguments.length===1?Nx(n):new Zn(n,t,e,i??1)}function Zn(n,t,e,i){this.h=+n,this.s=+t,this.l=+e,this.opacity=+i}ey(Zn,yk,Ex(tc,{brighter(n){return n=n==null?Ed:Math.pow(Ed,n),new Zn(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?Uu:Math.pow(Uu,n),new Zn(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,t=isNaN(n)||isNaN(this.s)?0:this.s,e=this.l,i=e+(e<.5?e:1-e)*t,a=2*e-i;return new nn(Im(n>=240?n-240:n+120,a,i),Im(n,a,i),Im(n<120?n+240:n-120,a,i),this.opacity)},clamp(){return new Zn(eb(this.h),Mf(this.s),Mf(this.l),Nd(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=Nd(this.opacity);return`${n===1?"hsl(":"hsla("}${eb(this.h)}, ${Mf(this.s)*100}%, ${Mf(this.l)*100}%${n===1?")":`, ${n})`}`}}));function eb(n){return n=(n||0)%360,n<0?n+360:n}function Mf(n){return Math.max(0,Math.min(1,n||0))}function Im(n,t,e){return(n<60?t+(e-t)*n/60:n<180?e:n<240?t+(e-t)*(240-n)/60:t)*255}const Cx=n=>()=>n;function vk(n,t){return function(e){return n+e*t}}function wk(n,t,e){return n=Math.pow(n,e),t=Math.pow(t,e)-n,e=1/e,function(i){return Math.pow(n+i*t,e)}}function Sk(n){return(n=+n)==1?Dx:function(t,e){return e-t?wk(t,e,n):Cx(isNaN(t)?e:t)}}function Dx(n,t){var e=t-n;return e?vk(n,e):Cx(isNaN(n)?t:n)}const nb=function n(t){var e=Sk(t);function i(a,l){var c=e((a=bp(a)).r,(l=bp(l)).r),d=e(a.g,l.g),h=e(a.b,l.b),g=Dx(a.opacity,l.opacity);return function(p){return a.r=c(p),a.g=d(p),a.b=h(p),a.opacity=g(p),a+""}}return i.gamma=n,i}(1);function Xs(n,t){return n=+n,t=+t,function(e){return n*(1-e)+t*e}}var xp=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Rm=new RegExp(xp.source,"g");function bk(n){return function(){return n}}function xk(n){return function(t){return n(t)+""}}function Tk(n,t){var e=xp.lastIndex=Rm.lastIndex=0,i,a,l,c=-1,d=[],h=[];for(n=n+"",t=t+"";(i=xp.exec(n))&&(a=Rm.exec(t));)(l=a.index)>e&&(l=t.slice(e,l),d[c]?d[c]+=l:d[++c]=l),(i=i[0])===(a=a[0])?d[c]?d[c]+=a:d[++c]=a:(d[++c]=null,h.push({i:c,x:Xs(i,a)})),e=Rm.lastIndex;return e<t.length&&(l=t.slice(e),d[c]?d[c]+=l:d[++c]=l),d.length<2?h[0]?xk(h[0].x):bk(t):(t=h.length,function(g){for(var p=0,w;p<t;++p)d[(w=h[p]).i]=w.x(g);return d.join("")})}var rb=180/Math.PI,Tp={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function kx(n,t,e,i,a,l){var c,d,h;return(c=Math.sqrt(n*n+t*t))&&(n/=c,t/=c),(h=n*e+t*i)&&(e-=n*h,i-=t*h),(d=Math.sqrt(e*e+i*i))&&(e/=d,i/=d,h/=d),n*i<t*e&&(n=-n,t=-t,h=-h,c=-c),{translateX:a,translateY:l,rotate:Math.atan2(t,n)*rb,skewX:Math.atan(h)*rb,scaleX:c,scaleY:d}}var Bf;function Ak(n){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(n+"");return t.isIdentity?Tp:kx(t.a,t.b,t.c,t.d,t.e,t.f)}function Ek(n){return n==null||(Bf||(Bf=document.createElementNS("http://www.w3.org/2000/svg","g")),Bf.setAttribute("transform",n),!(n=Bf.transform.baseVal.consolidate()))?Tp:(n=n.matrix,kx(n.a,n.b,n.c,n.d,n.e,n.f))}function Ox(n,t,e,i){function a(g){return g.length?g.pop()+" ":""}function l(g,p,w,v,S,x){if(g!==w||p!==v){var E=S.push("translate(",null,t,null,e);x.push({i:E-4,x:Xs(g,w)},{i:E-2,x:Xs(p,v)})}else(w||v)&&S.push("translate("+w+t+v+e)}function c(g,p,w,v){g!==p?(g-p>180?p+=360:p-g>180&&(g+=360),v.push({i:w.push(a(w)+"rotate(",null,i)-2,x:Xs(g,p)})):p&&w.push(a(w)+"rotate("+p+i)}function d(g,p,w,v){g!==p?v.push({i:w.push(a(w)+"skewX(",null,i)-2,x:Xs(g,p)}):p&&w.push(a(w)+"skewX("+p+i)}function h(g,p,w,v,S,x){if(g!==w||p!==v){var E=S.push(a(S)+"scale(",null,",",null,")");x.push({i:E-4,x:Xs(g,w)},{i:E-2,x:Xs(p,v)})}else(w!==1||v!==1)&&S.push(a(S)+"scale("+w+","+v+")")}return function(g,p){var w=[],v=[];return g=n(g),p=n(p),l(g.translateX,g.translateY,p.translateX,p.translateY,w,v),c(g.rotate,p.rotate,w,v),d(g.skewX,p.skewX,w,v),h(g.scaleX,g.scaleY,p.scaleX,p.scaleY,w,v),g=p=null,function(S){for(var x=-1,E=v.length,I;++x<E;)w[(I=v[x]).i]=I.x(S);return w.join("")}}}var Nk=Ox(Ak,"px, ","px)","deg)"),Ck=Ox(Ek,", ",")",")"),Dk=1e-12;function ib(n){return((n=Math.exp(n))+1/n)/2}function kk(n){return((n=Math.exp(n))-1/n)/2}function Ok(n){return((n=Math.exp(2*n))-1)/(n+1)}const Ik=function n(t,e,i){function a(l,c){var d=l[0],h=l[1],g=l[2],p=c[0],w=c[1],v=c[2],S=p-d,x=w-h,E=S*S+x*x,I,k;if(E<Dk)k=Math.log(v/g)/t,I=function(U){return[d+U*S,h+U*x,g*Math.exp(t*U*k)]};else{var z=Math.sqrt(E),N=(v*v-g*g+i*E)/(2*g*e*z),O=(v*v-g*g-i*E)/(2*v*e*z),_=Math.log(Math.sqrt(N*N+1)-N),J=Math.log(Math.sqrt(O*O+1)-O);k=(J-_)/t,I=function(U){var W=U*k,F=ib(_),nt=g/(e*z)*(F*Ok(t*W+_)-kk(_));return[d+nt*S,h+nt*x,g*F/ib(t*W+_)]}}return I.duration=k*1e3*t/Math.SQRT2,I}return a.rho=function(l){var c=Math.max(.001,+l),d=c*c,h=d*d;return n(c,d,h)},a}(Math.SQRT2,2,4);var Wo=0,yu=0,gu=0,Ix=1e3,Cd,vu,Dd=0,_a=0,Gd=0,Ju=typeof performance=="object"&&performance.now?performance:Date,Rx=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function ny(){return _a||(Rx(Rk),_a=Ju.now()+Gd)}function Rk(){_a=0}function kd(){this._call=this._time=this._next=null}kd.prototype=Mx.prototype={constructor:kd,restart:function(n,t,e){if(typeof n!="function")throw new TypeError("callback is not a function");e=(e==null?ny():+e)+(t==null?0:+t),!this._next&&vu!==this&&(vu?vu._next=this:Cd=this,vu=this),this._call=n,this._time=e,Ap()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ap())}};function Mx(n,t,e){var i=new kd;return i.restart(n,t,e),i}function Mk(){ny(),++Wo;for(var n=Cd,t;n;)(t=_a-n._time)>=0&&n._call.call(void 0,t),n=n._next;--Wo}function sb(){_a=(Dd=Ju.now())+Gd,Wo=yu=0;try{Mk()}finally{Wo=0,zk(),_a=0}}function Bk(){var n=Ju.now(),t=n-Dd;t>Ix&&(Gd-=t,Dd=n)}function zk(){for(var n,t=Cd,e,i=1/0;t;)t._call?(i>t._time&&(i=t._time),n=t,t=t._next):(e=t._next,t._next=null,t=n?n._next=e:Cd=e);vu=n,Ap(i)}function Ap(n){if(!Wo){yu&&(yu=clearTimeout(yu));var t=n-_a;t>24?(n<1/0&&(yu=setTimeout(sb,n-Ju.now()-Gd)),gu&&(gu=clearInterval(gu))):(gu||(Dd=Ju.now(),gu=setInterval(Bk,Ix)),Wo=1,Rx(sb))}}function ab(n,t,e){var i=new kd;return t=t==null?0:+t,i.restart(a=>{i.stop(),n(a+t)},t,e),i}var Lk=jd("start","end","cancel","interrupt"),_k=[],Bx=0,ob=1,Ep=2,Xf=3,lb=4,Np=5,Kf=6;function Xd(n,t,e,i,a,l){var c=n.__transition;if(!c)n.__transition={};else if(e in c)return;Uk(n,e,{name:t,index:i,group:a,on:Lk,tween:_k,time:l.time,delay:l.delay,duration:l.duration,ease:l.ease,timer:null,state:Bx})}function ry(n,t){var e=nr(n,t);if(e.state>Bx)throw new Error("too late; already scheduled");return e}function Dr(n,t){var e=nr(n,t);if(e.state>Xf)throw new Error("too late; already running");return e}function nr(n,t){var e=n.__transition;if(!e||!(e=e[t]))throw new Error("transition not found");return e}function Uk(n,t,e){var i=n.__transition,a;i[t]=e,e.timer=Mx(l,0,e.time);function l(g){e.state=ob,e.timer.restart(c,e.delay,e.time),e.delay<=g&&c(g-e.delay)}function c(g){var p,w,v,S;if(e.state!==ob)return h();for(p in i)if(S=i[p],S.name===e.name){if(S.state===Xf)return ab(c);S.state===lb?(S.state=Kf,S.timer.stop(),S.on.call("interrupt",n,n.__data__,S.index,S.group),delete i[p]):+p<t&&(S.state=Kf,S.timer.stop(),S.on.call("cancel",n,n.__data__,S.index,S.group),delete i[p])}if(ab(function(){e.state===Xf&&(e.state=lb,e.timer.restart(d,e.delay,e.time),d(g))}),e.state=Ep,e.on.call("start",n,n.__data__,e.index,e.group),e.state===Ep){for(e.state=Xf,a=new Array(v=e.tween.length),p=0,w=-1;p<v;++p)(S=e.tween[p].value.call(n,n.__data__,e.index,e.group))&&(a[++w]=S);a.length=w+1}}function d(g){for(var p=g<e.duration?e.ease.call(null,g/e.duration):(e.timer.restart(h),e.state=Np,1),w=-1,v=a.length;++w<v;)a[w].call(n,p);e.state===Np&&(e.on.call("end",n,n.__data__,e.index,e.group),h())}function h(){e.state=Kf,e.timer.stop(),delete i[t];for(var g in i)return;delete n.__transition}}function Ff(n,t){var e=n.__transition,i,a,l=!0,c;if(e){t=t==null?null:t+"";for(c in e){if((i=e[c]).name!==t){l=!1;continue}a=i.state>Ep&&i.state<Np,i.state=Kf,i.timer.stop(),i.on.call(a?"interrupt":"cancel",n,n.__data__,i.index,i.group),delete e[c]}l&&delete n.__transition}}function qk(n){return this.each(function(){Ff(this,n)})}function Pk(n,t){var e,i;return function(){var a=Dr(this,n),l=a.tween;if(l!==e){i=e=l;for(var c=0,d=i.length;c<d;++c)if(i[c].name===t){i=i.slice(),i.splice(c,1);break}}a.tween=i}}function Jk(n,t,e){var i,a;if(typeof e!="function")throw new Error;return function(){var l=Dr(this,n),c=l.tween;if(c!==i){a=(i=c).slice();for(var d={name:t,value:e},h=0,g=a.length;h<g;++h)if(a[h].name===t){a[h]=d;break}h===g&&a.push(d)}l.tween=a}}function $k(n,t){var e=this._id;if(n+="",arguments.length<2){for(var i=nr(this.node(),e).tween,a=0,l=i.length,c;a<l;++a)if((c=i[a]).name===n)return c.value;return null}return this.each((t==null?Pk:Jk)(e,n,t))}function iy(n,t,e){var i=n._id;return n.each(function(){var a=Dr(this,i);(a.value||(a.value={}))[t]=e.apply(this,arguments)}),function(a){return nr(a,i).value[t]}}function zx(n,t){var e;return(typeof t=="number"?Xs:t instanceof Pu?nb:(e=Pu(t))?(t=e,nb):Tk)(n,t)}function Hk(n){return function(){this.removeAttribute(n)}}function Vk(n){return function(){this.removeAttributeNS(n.space,n.local)}}function jk(n,t,e){var i,a=e+"",l;return function(){var c=this.getAttribute(n);return c===a?null:c===i?l:l=t(i=c,e)}}function Yk(n,t,e){var i,a=e+"",l;return function(){var c=this.getAttributeNS(n.space,n.local);return c===a?null:c===i?l:l=t(i=c,e)}}function Gk(n,t,e){var i,a,l;return function(){var c,d=e(this),h;return d==null?void this.removeAttribute(n):(c=this.getAttribute(n),h=d+"",c===h?null:c===i&&h===a?l:(a=h,l=t(i=c,d)))}}function Xk(n,t,e){var i,a,l;return function(){var c,d=e(this),h;return d==null?void this.removeAttributeNS(n.space,n.local):(c=this.getAttributeNS(n.space,n.local),h=d+"",c===h?null:c===i&&h===a?l:(a=h,l=t(i=c,d)))}}function Kk(n,t){var e=Yd(n),i=e==="transform"?Ck:zx;return this.attrTween(n,typeof t=="function"?(e.local?Xk:Gk)(e,i,iy(this,"attr."+n,t)):t==null?(e.local?Vk:Hk)(e):(e.local?Yk:jk)(e,i,t))}function Fk(n,t){return function(e){this.setAttribute(n,t.call(this,e))}}function Zk(n,t){return function(e){this.setAttributeNS(n.space,n.local,t.call(this,e))}}function Qk(n,t){var e,i;function a(){var l=t.apply(this,arguments);return l!==i&&(e=(i=l)&&Zk(n,l)),e}return a._value=t,a}function Wk(n,t){var e,i;function a(){var l=t.apply(this,arguments);return l!==i&&(e=(i=l)&&Fk(n,l)),e}return a._value=t,a}function tO(n,t){var e="attr."+n;if(arguments.length<2)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;var i=Yd(n);return this.tween(e,(i.local?Qk:Wk)(i,t))}function eO(n,t){return function(){ry(this,n).delay=+t.apply(this,arguments)}}function nO(n,t){return t=+t,function(){ry(this,n).delay=t}}function rO(n){var t=this._id;return arguments.length?this.each((typeof n=="function"?eO:nO)(t,n)):nr(this.node(),t).delay}function iO(n,t){return function(){Dr(this,n).duration=+t.apply(this,arguments)}}function sO(n,t){return t=+t,function(){Dr(this,n).duration=t}}function aO(n){var t=this._id;return arguments.length?this.each((typeof n=="function"?iO:sO)(t,n)):nr(this.node(),t).duration}function oO(n,t){if(typeof t!="function")throw new Error;return function(){Dr(this,n).ease=t}}function lO(n){var t=this._id;return arguments.length?this.each(oO(t,n)):nr(this.node(),t).ease}function uO(n,t){return function(){var e=t.apply(this,arguments);if(typeof e!="function")throw new Error;Dr(this,n).ease=e}}function cO(n){if(typeof n!="function")throw new Error;return this.each(uO(this._id,n))}function fO(n){typeof n!="function"&&(n=dx(n));for(var t=this._groups,e=t.length,i=new Array(e),a=0;a<e;++a)for(var l=t[a],c=l.length,d=i[a]=[],h,g=0;g<c;++g)(h=l[g])&&n.call(h,h.__data__,g,l)&&d.push(h);return new cs(i,this._parents,this._name,this._id)}function dO(n){if(n._id!==this._id)throw new Error;for(var t=this._groups,e=n._groups,i=t.length,a=e.length,l=Math.min(i,a),c=new Array(i),d=0;d<l;++d)for(var h=t[d],g=e[d],p=h.length,w=c[d]=new Array(p),v,S=0;S<p;++S)(v=h[S]||g[S])&&(w[S]=v);for(;d<i;++d)c[d]=t[d];return new cs(c,this._parents,this._name,this._id)}function hO(n){return(n+"").trim().split(/^|\s+/).every(function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||t==="start"})}function gO(n,t,e){var i,a,l=hO(t)?ry:Dr;return function(){var c=l(this,n),d=c.on;d!==i&&(a=(i=d).copy()).on(t,e),c.on=a}}function mO(n,t){var e=this._id;return arguments.length<2?nr(this.node(),e).on.on(n):this.each(gO(e,n,t))}function pO(n){return function(){var t=this.parentNode;for(var e in this.__transition)if(+e!==n)return;t&&t.removeChild(this)}}function yO(){return this.on("end.remove",pO(this._id))}function vO(n){var t=this._name,e=this._id;typeof n!="function"&&(n=Wp(n));for(var i=this._groups,a=i.length,l=new Array(a),c=0;c<a;++c)for(var d=i[c],h=d.length,g=l[c]=new Array(h),p,w,v=0;v<h;++v)(p=d[v])&&(w=n.call(p,p.__data__,v,d))&&("__data__"in p&&(w.__data__=p.__data__),g[v]=w,Xd(g[v],t,e,v,g,nr(p,e)));return new cs(l,this._parents,t,e)}function wO(n){var t=this._name,e=this._id;typeof n!="function"&&(n=fx(n));for(var i=this._groups,a=i.length,l=[],c=[],d=0;d<a;++d)for(var h=i[d],g=h.length,p,w=0;w<g;++w)if(p=h[w]){for(var v=n.call(p,p.__data__,w,h),S,x=nr(p,e),E=0,I=v.length;E<I;++E)(S=v[E])&&Xd(S,t,e,E,v,x);l.push(v),c.push(p)}return new cs(l,c,t,e)}var SO=Wu.prototype.constructor;function bO(){return new SO(this._groups,this._parents)}function xO(n,t){var e,i,a;return function(){var l=Qo(this,n),c=(this.style.removeProperty(n),Qo(this,n));return l===c?null:l===e&&c===i?a:a=t(e=l,i=c)}}function Lx(n){return function(){this.style.removeProperty(n)}}function TO(n,t,e){var i,a=e+"",l;return function(){var c=Qo(this,n);return c===a?null:c===i?l:l=t(i=c,e)}}function AO(n,t,e){var i,a,l;return function(){var c=Qo(this,n),d=e(this),h=d+"";return d==null&&(h=d=(this.style.removeProperty(n),Qo(this,n))),c===h?null:c===i&&h===a?l:(a=h,l=t(i=c,d))}}function EO(n,t){var e,i,a,l="style."+t,c="end."+l,d;return function(){var h=Dr(this,n),g=h.on,p=h.value[l]==null?d||(d=Lx(t)):void 0;(g!==e||a!==p)&&(i=(e=g).copy()).on(c,a=p),h.on=i}}function NO(n,t,e){var i=(n+="")=="transform"?Nk:zx;return t==null?this.styleTween(n,xO(n,i)).on("end.style."+n,Lx(n)):typeof t=="function"?this.styleTween(n,AO(n,i,iy(this,"style."+n,t))).each(EO(this._id,n)):this.styleTween(n,TO(n,i,t),e).on("end.style."+n,null)}function CO(n,t,e){return function(i){this.style.setProperty(n,t.call(this,i),e)}}function DO(n,t,e){var i,a;function l(){var c=t.apply(this,arguments);return c!==a&&(i=(a=c)&&CO(n,c,e)),i}return l._value=t,l}function kO(n,t,e){var i="style."+(n+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(t==null)return this.tween(i,null);if(typeof t!="function")throw new Error;return this.tween(i,DO(n,t,e??""))}function OO(n){return function(){this.textContent=n}}function IO(n){return function(){var t=n(this);this.textContent=t??""}}function RO(n){return this.tween("text",typeof n=="function"?IO(iy(this,"text",n)):OO(n==null?"":n+""))}function MO(n){return function(t){this.textContent=n.call(this,t)}}function BO(n){var t,e;function i(){var a=n.apply(this,arguments);return a!==e&&(t=(e=a)&&MO(a)),t}return i._value=n,i}function zO(n){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(n==null)return this.tween(t,null);if(typeof n!="function")throw new Error;return this.tween(t,BO(n))}function LO(){for(var n=this._name,t=this._id,e=_x(),i=this._groups,a=i.length,l=0;l<a;++l)for(var c=i[l],d=c.length,h,g=0;g<d;++g)if(h=c[g]){var p=nr(h,t);Xd(h,n,e,g,c,{time:p.time+p.delay+p.duration,delay:0,duration:p.duration,ease:p.ease})}return new cs(i,this._parents,n,e)}function _O(){var n,t,e=this,i=e._id,a=e.size();return new Promise(function(l,c){var d={value:c},h={value:function(){--a===0&&l()}};e.each(function(){var g=Dr(this,i),p=g.on;p!==n&&(t=(n=p).copy(),t._.cancel.push(d),t._.interrupt.push(d),t._.end.push(h)),g.on=t}),a===0&&l()})}var UO=0;function cs(n,t,e,i){this._groups=n,this._parents=t,this._name=e,this._id=i}function _x(){return++UO}var Gr=Wu.prototype;cs.prototype={constructor:cs,select:vO,selectAll:wO,selectChild:Gr.selectChild,selectChildren:Gr.selectChildren,filter:fO,merge:dO,selection:bO,transition:LO,call:Gr.call,nodes:Gr.nodes,node:Gr.node,size:Gr.size,empty:Gr.empty,each:Gr.each,on:mO,attr:Kk,attrTween:tO,style:NO,styleTween:kO,text:RO,textTween:zO,remove:yO,tween:$k,delay:rO,duration:aO,ease:lO,easeVarying:cO,end:_O,[Symbol.iterator]:Gr[Symbol.iterator]};function qO(n){return((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2}var PO={time:null,delay:0,duration:250,ease:qO};function JO(n,t){for(var e;!(e=n.__transition)||!(e=e[t]);)if(!(n=n.parentNode))throw new Error(`transition ${t} not found`);return e}function $O(n){var t,e;n instanceof cs?(t=n._id,n=n._name):(t=_x(),(e=PO).time=ny(),n=n==null?null:n+"");for(var i=this._groups,a=i.length,l=0;l<a;++l)for(var c=i[l],d=c.length,h,g=0;g<d;++g)(h=c[g])&&Xd(h,n,t,g,c,e||JO(h,t));return new cs(i,this._parents,n,t)}Wu.prototype.interrupt=qk;Wu.prototype.transition=$O;const zf=n=>()=>n;function HO(n,{sourceEvent:t,target:e,transform:i,dispatch:a}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:e,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:a}})}function is(n,t,e){this.k=n,this.x=t,this.y=e}is.prototype={constructor:is,scale:function(n){return n===1?this:new is(this.k*n,this.x,this.y)},translate:function(n,t){return n===0&t===0?this:new is(this.k,this.x+this.k*n,this.y+this.k*t)},apply:function(n){return[n[0]*this.k+this.x,n[1]*this.k+this.y]},applyX:function(n){return n*this.k+this.x},applyY:function(n){return n*this.k+this.y},invert:function(n){return[(n[0]-this.x)/this.k,(n[1]-this.y)/this.k]},invertX:function(n){return(n-this.x)/this.k},invertY:function(n){return(n-this.y)/this.k},rescaleX:function(n){return n.copy().domain(n.range().map(this.invertX,this).map(n.invert,n))},rescaleY:function(n){return n.copy().domain(n.range().map(this.invertY,this).map(n.invert,n))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Kd=new is(1,0,0);Ux.prototype=is.prototype;function Ux(n){for(;!n.__zoom;)if(!(n=n.parentNode))return Kd;return n.__zoom}function Mm(n){n.stopImmediatePropagation()}function mu(n){n.preventDefault(),n.stopImmediatePropagation()}function VO(n){return(!n.ctrlKey||n.type==="wheel")&&!n.button}function jO(){var n=this;return n instanceof SVGElement?(n=n.ownerSVGElement||n,n.hasAttribute("viewBox")?(n=n.viewBox.baseVal,[[n.x,n.y],[n.x+n.width,n.y+n.height]]):[[0,0],[n.width.baseVal.value,n.height.baseVal.value]]):[[0,0],[n.clientWidth,n.clientHeight]]}function ub(){return this.__zoom||Kd}function YO(n){return-n.deltaY*(n.deltaMode===1?.05:n.deltaMode?1:.002)*(n.ctrlKey?10:1)}function GO(){return navigator.maxTouchPoints||"ontouchstart"in this}function XO(n,t,e){var i=n.invertX(t[0][0])-e[0][0],a=n.invertX(t[1][0])-e[1][0],l=n.invertY(t[0][1])-e[0][1],c=n.invertY(t[1][1])-e[1][1];return n.translate(a>i?(i+a)/2:Math.min(0,i)||Math.max(0,a),c>l?(l+c)/2:Math.min(0,l)||Math.max(0,c))}function qx(){var n=VO,t=jO,e=XO,i=YO,a=GO,l=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],d=250,h=Ik,g=jd("start","zoom","end"),p,w,v,S=500,x=150,E=0,I=10;function k(R){R.property("__zoom",ub).on("wheel.zoom",W,{passive:!1}).on("mousedown.zoom",F).on("dblclick.zoom",nt).filter(a).on("touchstart.zoom",ft).on("touchmove.zoom",ot).on("touchend.zoom touchcancel.zoom",ct).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}k.transform=function(R,Y,D,B){var $=R.selection?R.selection():R;$.property("__zoom",ub),R!==$?_(R,Y,D,B):$.interrupt().each(function(){J(this,arguments).event(B).start().zoom(null,typeof Y=="function"?Y.apply(this,arguments):Y).end()})},k.scaleBy=function(R,Y,D,B){k.scaleTo(R,function(){var $=this.__zoom.k,q=typeof Y=="function"?Y.apply(this,arguments):Y;return $*q},D,B)},k.scaleTo=function(R,Y,D,B){k.transform(R,function(){var $=t.apply(this,arguments),q=this.__zoom,C=D==null?O($):typeof D=="function"?D.apply(this,arguments):D,P=q.invert(C),tt=typeof Y=="function"?Y.apply(this,arguments):Y;return e(N(z(q,tt),C,P),$,c)},D,B)},k.translateBy=function(R,Y,D,B){k.transform(R,function(){return e(this.__zoom.translate(typeof Y=="function"?Y.apply(this,arguments):Y,typeof D=="function"?D.apply(this,arguments):D),t.apply(this,arguments),c)},null,B)},k.translateTo=function(R,Y,D,B,$){k.transform(R,function(){var q=t.apply(this,arguments),C=this.__zoom,P=B==null?O(q):typeof B=="function"?B.apply(this,arguments):B;return e(Kd.translate(P[0],P[1]).scale(C.k).translate(typeof Y=="function"?-Y.apply(this,arguments):-Y,typeof D=="function"?-D.apply(this,arguments):-D),q,c)},B,$)};function z(R,Y){return Y=Math.max(l[0],Math.min(l[1],Y)),Y===R.k?R:new is(Y,R.x,R.y)}function N(R,Y,D){var B=Y[0]-D[0]*R.k,$=Y[1]-D[1]*R.k;return B===R.x&&$===R.y?R:new is(R.k,B,$)}function O(R){return[(+R[0][0]+ +R[1][0])/2,(+R[0][1]+ +R[1][1])/2]}function _(R,Y,D,B){R.on("start.zoom",function(){J(this,arguments).event(B).start()}).on("interrupt.zoom end.zoom",function(){J(this,arguments).event(B).end()}).tween("zoom",function(){var $=this,q=arguments,C=J($,q).event(B),P=t.apply($,q),tt=D==null?O(P):typeof D=="function"?D.apply($,q):D,rt=Math.max(P[1][0]-P[0][0],P[1][1]-P[0][1]),ut=$.__zoom,gt=typeof Y=="function"?Y.apply($,q):Y,dt=h(ut.invert(tt).concat(rt/ut.k),gt.invert(tt).concat(rt/gt.k));return function(pt){if(pt===1)pt=gt;else{var yt=dt(pt),Dt=rt/yt[2];pt=new is(Dt,tt[0]-yt[0]*Dt,tt[1]-yt[1]*Dt)}C.zoom(null,pt)}})}function J(R,Y,D){return!D&&R.__zooming||new U(R,Y)}function U(R,Y){this.that=R,this.args=Y,this.active=0,this.sourceEvent=null,this.extent=t.apply(R,Y),this.taps=0}U.prototype={event:function(R){return R&&(this.sourceEvent=R),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(R,Y){return this.mouse&&R!=="mouse"&&(this.mouse[1]=Y.invert(this.mouse[0])),this.touch0&&R!=="touch"&&(this.touch0[1]=Y.invert(this.touch0[0])),this.touch1&&R!=="touch"&&(this.touch1[1]=Y.invert(this.touch1[0])),this.that.__zoom=Y,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(R){var Y=gn(this.that).datum();g.call(R,this.that,new HO(R,{sourceEvent:this.sourceEvent,target:k,transform:this.that.__zoom,dispatch:g}),Y)}};function W(R,...Y){if(!n.apply(this,arguments))return;var D=J(this,Y).event(R),B=this.__zoom,$=Math.max(l[0],Math.min(l[1],B.k*Math.pow(2,i.apply(this,arguments)))),q=Fn(R);if(D.wheel)(D.mouse[0][0]!==q[0]||D.mouse[0][1]!==q[1])&&(D.mouse[1]=B.invert(D.mouse[0]=q)),clearTimeout(D.wheel);else{if(B.k===$)return;D.mouse=[q,B.invert(q)],Ff(this),D.start()}mu(R),D.wheel=setTimeout(C,x),D.zoom("mouse",e(N(z(B,$),D.mouse[0],D.mouse[1]),D.extent,c));function C(){D.wheel=null,D.end()}}function F(R,...Y){if(v||!n.apply(this,arguments))return;var D=R.currentTarget,B=J(this,Y,!0).event(R),$=gn(R.view).on("mousemove.zoom",tt,!0).on("mouseup.zoom",rt,!0),q=Fn(R,D),C=R.clientX,P=R.clientY;xx(R.view),Mm(R),B.mouse=[q,this.__zoom.invert(q)],Ff(this),B.start();function tt(ut){if(mu(ut),!B.moved){var gt=ut.clientX-C,dt=ut.clientY-P;B.moved=gt*gt+dt*dt>E}B.event(ut).zoom("mouse",e(N(B.that.__zoom,B.mouse[0]=Fn(ut,D),B.mouse[1]),B.extent,c))}function rt(ut){$.on("mousemove.zoom mouseup.zoom",null),Tx(ut.view,B.moved),mu(ut),B.event(ut).end()}}function nt(R,...Y){if(n.apply(this,arguments)){var D=this.__zoom,B=Fn(R.changedTouches?R.changedTouches[0]:R,this),$=D.invert(B),q=D.k*(R.shiftKey?.5:2),C=e(N(z(D,q),B,$),t.apply(this,Y),c);mu(R),d>0?gn(this).transition().duration(d).call(_,C,B,R):gn(this).call(k.transform,C,B,R)}}function ft(R,...Y){if(n.apply(this,arguments)){var D=R.touches,B=D.length,$=J(this,Y,R.changedTouches.length===B).event(R),q,C,P,tt;for(Mm(R),C=0;C<B;++C)P=D[C],tt=Fn(P,this),tt=[tt,this.__zoom.invert(tt),P.identifier],$.touch0?!$.touch1&&$.touch0[2]!==tt[2]&&($.touch1=tt,$.taps=0):($.touch0=tt,q=!0,$.taps=1+!!p);p&&(p=clearTimeout(p)),q&&($.taps<2&&(w=tt[0],p=setTimeout(function(){p=null},S)),Ff(this),$.start())}}function ot(R,...Y){if(this.__zooming){var D=J(this,Y).event(R),B=R.changedTouches,$=B.length,q,C,P,tt;for(mu(R),q=0;q<$;++q)C=B[q],P=Fn(C,this),D.touch0&&D.touch0[2]===C.identifier?D.touch0[0]=P:D.touch1&&D.touch1[2]===C.identifier&&(D.touch1[0]=P);if(C=D.that.__zoom,D.touch1){var rt=D.touch0[0],ut=D.touch0[1],gt=D.touch1[0],dt=D.touch1[1],pt=(pt=gt[0]-rt[0])*pt+(pt=gt[1]-rt[1])*pt,yt=(yt=dt[0]-ut[0])*yt+(yt=dt[1]-ut[1])*yt;C=z(C,Math.sqrt(pt/yt)),P=[(rt[0]+gt[0])/2,(rt[1]+gt[1])/2],tt=[(ut[0]+dt[0])/2,(ut[1]+dt[1])/2]}else if(D.touch0)P=D.touch0[0],tt=D.touch0[1];else return;D.zoom("touch",e(N(C,P,tt),D.extent,c))}}function ct(R,...Y){if(this.__zooming){var D=J(this,Y).event(R),B=R.changedTouches,$=B.length,q,C;for(Mm(R),v&&clearTimeout(v),v=setTimeout(function(){v=null},S),q=0;q<$;++q)C=B[q],D.touch0&&D.touch0[2]===C.identifier?delete D.touch0:D.touch1&&D.touch1[2]===C.identifier&&delete D.touch1;if(D.touch1&&!D.touch0&&(D.touch0=D.touch1,delete D.touch1),D.touch0)D.touch0[1]=this.__zoom.invert(D.touch0[0]);else if(D.end(),D.taps===2&&(C=Fn(C,this),Math.hypot(w[0]-C[0],w[1]-C[1])<I)){var P=gn(this).on("dblclick.zoom");P&&P.apply(this,arguments)}}}return k.wheelDelta=function(R){return arguments.length?(i=typeof R=="function"?R:zf(+R),k):i},k.filter=function(R){return arguments.length?(n=typeof R=="function"?R:zf(!!R),k):n},k.touchable=function(R){return arguments.length?(a=typeof R=="function"?R:zf(!!R),k):a},k.extent=function(R){return arguments.length?(t=typeof R=="function"?R:zf([[+R[0][0],+R[0][1]],[+R[1][0],+R[1][1]]]),k):t},k.scaleExtent=function(R){return arguments.length?(l[0]=+R[0],l[1]=+R[1],k):[l[0],l[1]]},k.translateExtent=function(R){return arguments.length?(c[0][0]=+R[0][0],c[1][0]=+R[1][0],c[0][1]=+R[0][1],c[1][1]=+R[1][1],k):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},k.constrain=function(R){return arguments.length?(e=R,k):e},k.duration=function(R){return arguments.length?(d=+R,k):d},k.interpolate=function(R){return arguments.length?(h=R,k):h},k.on=function(){var R=g.on.apply(g,arguments);return R===g?k:R},k.clickDistance=function(R){return arguments.length?(E=(R=+R)*R,k):Math.sqrt(E)},k.tapDistance=function(R){return arguments.length?(I=+R,k):I},k}const Cr={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:n=>`Node type "${n}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:n=>`The old edge with id=${n} does not exist.`,error009:n=>`Marker type "${n}" doesn't exist.`,error008:(n,{id:t,sourceHandle:e,targetHandle:i})=>`Couldn't create edge for ${n} handle id: "${n==="source"?e:i}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:n=>`Edge type "${n}" not found. Using fallback type "default".`,error012:n=>`Node with id "${n}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(n="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${n}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},$u=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Px=["Enter"," ","Escape"];var tl;(function(n){n.Strict="strict",n.Loose="loose"})(tl||(tl={}));var Ra;(function(n){n.Free="free",n.Vertical="vertical",n.Horizontal="horizontal"})(Ra||(Ra={}));var Hu;(function(n){n.Partial="partial",n.Full="full"})(Hu||(Hu={}));const Jx={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var Ks;(function(n){n.Bezier="default",n.Straight="straight",n.Step="step",n.SmoothStep="smoothstep",n.SimpleBezier="simplebezier"})(Ks||(Ks={}));var Od;(function(n){n.Arrow="arrow",n.ArrowClosed="arrowclosed"})(Od||(Od={}));var Et;(function(n){n.Left="left",n.Top="top",n.Right="right",n.Bottom="bottom"})(Et||(Et={}));const cb={[Et.Left]:Et.Right,[Et.Right]:Et.Left,[Et.Top]:Et.Bottom,[Et.Bottom]:Et.Top};function $x(n){return n===null?null:n?"valid":"invalid"}const Hx=n=>"id"in n&&"source"in n&&"target"in n,KO=n=>"id"in n&&"position"in n&&!("source"in n)&&!("target"in n),sy=n=>"id"in n&&"internals"in n&&!("source"in n)&&!("target"in n),ec=(n,t=[0,0])=>{const{width:e,height:i}=ds(n),a=n.origin??t,l=e*a[0],c=i*a[1];return{x:n.position.x-l,y:n.position.y-c}},FO=(n,t={nodeOrigin:[0,0],nodeLookup:void 0})=>{if(n.length===0)return{x:0,y:0,width:0,height:0};const e=n.reduce((i,a)=>{const l=typeof a=="string";let c=!t.nodeLookup&&!l?a:void 0;t.nodeLookup&&(c=l?t.nodeLookup.get(a):sy(a)?a:t.nodeLookup.get(a.id));const d=c?Id(c,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return Fd(i,d)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Zd(e)},nc=(n,t={})=>{if(n.size===0)return{x:0,y:0,width:0,height:0};let e={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return n.forEach(i=>{if(t.filter===void 0||t.filter(i)){const a=Id(i);e=Fd(e,a)}}),Zd(e)},Vx=(n,t,[e,i,a]=[0,0,1],l=!1,c=!1)=>{const d={...rc(t,[e,i,a]),width:t.width/a,height:t.height/a},h=[];for(const g of n.values()){const{measured:p,selectable:w=!0,hidden:v=!1}=g;if(c&&!w||v)continue;const S=p.width??g.width??g.initialWidth??null,x=p.height??g.height??g.initialHeight??null,E=Vu(d,nl(g)),I=(S??0)*(x??0),k=l&&E>0;(!g.internals.handleBounds||k||E>=I||g.dragging)&&h.push(g)}return h},ZO=(n,t)=>{const e=new Set;return n.forEach(i=>{e.add(i.id)}),t.filter(i=>e.has(i.source)||e.has(i.target))};function QO(n,t){const e=new Map,i=t!=null&&t.nodes?new Set(t.nodes.map(a=>a.id)):null;return n.forEach(a=>{a.measured.width&&a.measured.height&&((t==null?void 0:t.includeHiddenNodes)||!a.hidden)&&(!i||i.has(a.id))&&e.set(a.id,a)}),e}async function WO({nodes:n,width:t,height:e,panZoom:i,minZoom:a,maxZoom:l},c){if(n.size===0)return Promise.resolve(!0);const d=QO(n,c),h=nc(d),g=ay(h,t,e,(c==null?void 0:c.minZoom)??a,(c==null?void 0:c.maxZoom)??l,(c==null?void 0:c.padding)??.1);return await i.setViewport(g,{duration:c==null?void 0:c.duration}),Promise.resolve(!0)}function jx({nodeId:n,nextPosition:t,nodeLookup:e,nodeOrigin:i=[0,0],nodeExtent:a,onError:l}){const c=e.get(n),d=c.parentId?e.get(c.parentId):void 0,{x:h,y:g}=d?d.internals.positionAbsolute:{x:0,y:0},p=c.origin??i;let w=a;if(c.extent==="parent"&&!c.expandParent)if(!d)l==null||l("005",Cr.error005());else{const S=d.measured.width,x=d.measured.height;S&&x&&(w=[[h,g],[h+S,g+x]])}else d&&rl(c.extent)&&(w=[[c.extent[0][0]+h,c.extent[0][1]+g],[c.extent[1][0]+h,c.extent[1][1]+g]]);const v=rl(w)?Ua(t,w,c.measured):t;return(c.measured.width===void 0||c.measured.height===void 0)&&(l==null||l("015",Cr.error015())),{position:{x:v.x-h+(c.measured.width??0)*p[0],y:v.y-g+(c.measured.height??0)*p[1]},positionAbsolute:v}}async function tI({nodesToRemove:n=[],edgesToRemove:t=[],nodes:e,edges:i,onBeforeDelete:a}){const l=new Set(n.map(v=>v.id)),c=[];for(const v of e){if(v.deletable===!1)continue;const S=l.has(v.id),x=!S&&v.parentId&&c.find(E=>E.id===v.parentId);(S||x)&&c.push(v)}const d=new Set(t.map(v=>v.id)),h=i.filter(v=>v.deletable!==!1),p=ZO(c,h);for(const v of h)d.has(v.id)&&!p.find(x=>x.id===v.id)&&p.push(v);if(!a)return{edges:p,nodes:c};const w=await a({nodes:c,edges:p});return typeof w=="boolean"?w?{edges:p,nodes:c}:{edges:[],nodes:[]}:w}const el=(n,t=0,e=1)=>Math.min(Math.max(n,t),e),Ua=(n={x:0,y:0},t,e)=>({x:el(n.x,t[0][0],t[1][0]-((e==null?void 0:e.width)??0)),y:el(n.y,t[0][1],t[1][1]-((e==null?void 0:e.height)??0))});function Yx(n,t,e){const{width:i,height:a}=ds(e),{x:l,y:c}=e.internals.positionAbsolute;return Ua(n,[[l,c],[l+i,c+a]],t)}const fb=(n,t,e)=>n<t?el(Math.abs(n-t),1,t)/t:n>e?-el(Math.abs(n-e),1,t)/t:0,Gx=(n,t,e=15,i=40)=>{const a=fb(n.x,i,t.width-i)*e,l=fb(n.y,i,t.height-i)*e;return[a,l]},Fd=(n,t)=>({x:Math.min(n.x,t.x),y:Math.min(n.y,t.y),x2:Math.max(n.x2,t.x2),y2:Math.max(n.y2,t.y2)}),Cp=({x:n,y:t,width:e,height:i})=>({x:n,y:t,x2:n+e,y2:t+i}),Zd=({x:n,y:t,x2:e,y2:i})=>({x:n,y:t,width:e-n,height:i-t}),nl=(n,t=[0,0])=>{var a,l;const{x:e,y:i}=sy(n)?n.internals.positionAbsolute:ec(n,t);return{x:e,y:i,width:((a=n.measured)==null?void 0:a.width)??n.width??n.initialWidth??0,height:((l=n.measured)==null?void 0:l.height)??n.height??n.initialHeight??0}},Id=(n,t=[0,0])=>{var a,l;const{x:e,y:i}=sy(n)?n.internals.positionAbsolute:ec(n,t);return{x:e,y:i,x2:e+(((a=n.measured)==null?void 0:a.width)??n.width??n.initialWidth??0),y2:i+(((l=n.measured)==null?void 0:l.height)??n.height??n.initialHeight??0)}},Xx=(n,t)=>Zd(Fd(Cp(n),Cp(t))),Vu=(n,t)=>{const e=Math.max(0,Math.min(n.x+n.width,t.x+t.width)-Math.max(n.x,t.x)),i=Math.max(0,Math.min(n.y+n.height,t.y+t.height)-Math.max(n.y,t.y));return Math.ceil(e*i)},db=n=>tr(n.width)&&tr(n.height)&&tr(n.x)&&tr(n.y),tr=n=>!isNaN(n)&&isFinite(n),eI=(n,t)=>{},Qd=(n,t=[1,1])=>({x:t[0]*Math.round(n.x/t[0]),y:t[1]*Math.round(n.y/t[1])}),rc=({x:n,y:t},[e,i,a],l=!1,c=[1,1])=>{const d={x:(n-e)/a,y:(t-i)/a};return l?Qd(d,c):d},Rd=({x:n,y:t},[e,i,a])=>({x:n*a+e,y:t*a+i});function Io(n,t){if(typeof n=="number")return Math.floor(t-t/(1+n));if(typeof n=="string"&&n.endsWith("px")){const e=parseFloat(n);if(!Number.isNaN(e))return Math.floor(e)}if(typeof n=="string"&&n.endsWith("%")){const e=parseFloat(n);if(!Number.isNaN(e))return Math.floor(t*e*.01)}return console.error(`[React Flow] The padding value "${n}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function nI(n,t,e){if(typeof n=="string"||typeof n=="number"){const i=Io(n,e),a=Io(n,t);return{top:i,right:a,bottom:i,left:a,x:a*2,y:i*2}}if(typeof n=="object"){const i=Io(n.top??n.y??0,e),a=Io(n.bottom??n.y??0,e),l=Io(n.left??n.x??0,t),c=Io(n.right??n.x??0,t);return{top:i,right:c,bottom:a,left:l,x:l+c,y:i+a}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function rI(n,t,e,i,a,l){const{x:c,y:d}=Rd(n,[t,e,i]),{x:h,y:g}=Rd({x:n.x+n.width,y:n.y+n.height},[t,e,i]),p=a-h,w=l-g;return{left:Math.floor(c),top:Math.floor(d),right:Math.floor(p),bottom:Math.floor(w)}}const ay=(n,t,e,i,a,l)=>{const c=nI(l,t,e),d=(t-c.x)/n.width,h=(e-c.y)/n.height,g=Math.min(d,h),p=el(g,i,a),w=n.x+n.width/2,v=n.y+n.height/2,S=t/2-w*p,x=e/2-v*p,E=rI(n,S,x,p,t,e),I={left:Math.min(E.left-c.left,0),top:Math.min(E.top-c.top,0),right:Math.min(E.right-c.right,0),bottom:Math.min(E.bottom-c.bottom,0)};return{x:S-I.left+I.right,y:x-I.top+I.bottom,zoom:p}},Md=()=>{var n;return typeof navigator<"u"&&((n=navigator==null?void 0:navigator.userAgent)==null?void 0:n.indexOf("Mac"))>=0};function rl(n){return n!==void 0&&n!=="parent"}function ds(n){var t,e;return{width:((t=n.measured)==null?void 0:t.width)??n.width??n.initialWidth??0,height:((e=n.measured)==null?void 0:e.height)??n.height??n.initialHeight??0}}function Kx(n){var t,e;return(((t=n.measured)==null?void 0:t.width)??n.width??n.initialWidth)!==void 0&&(((e=n.measured)==null?void 0:e.height)??n.height??n.initialHeight)!==void 0}function Fx(n,t={width:0,height:0},e,i,a){const l={...n},c=i.get(e);if(c){const d=c.origin||a;l.x+=c.internals.positionAbsolute.x-(t.width??0)*d[0],l.y+=c.internals.positionAbsolute.y-(t.height??0)*d[1]}return l}function hb(n,t){if(n.size!==t.size)return!1;for(const e of n)if(!t.has(e))return!1;return!0}function Eu(n,{snapGrid:t=[0,0],snapToGrid:e=!1,transform:i,containerBounds:a}){const{x:l,y:c}=os(n),d=rc({x:l-((a==null?void 0:a.left)??0),y:c-((a==null?void 0:a.top)??0)},i),{x:h,y:g}=e?Qd(d,t):d;return{xSnapped:h,ySnapped:g,...d}}const oy=n=>({width:n.offsetWidth,height:n.offsetHeight}),Zx=n=>{var t;return((t=n==null?void 0:n.getRootNode)==null?void 0:t.call(n))||(window==null?void 0:window.document)},iI=["INPUT","SELECT","TEXTAREA"];function Qx(n){var i,a;const t=((a=(i=n.composedPath)==null?void 0:i.call(n))==null?void 0:a[0])||n.target;return(t==null?void 0:t.nodeType)!==1?!1:iI.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey")}const Wx=n=>"clientX"in n,os=(n,t)=>{var l,c;const e=Wx(n),i=e?n.clientX:(l=n.touches)==null?void 0:l[0].clientX,a=e?n.clientY:(c=n.touches)==null?void 0:c[0].clientY;return{x:i-((t==null?void 0:t.left)??0),y:a-((t==null?void 0:t.top)??0)}},gb=(n,t,e,i,a)=>{const l=t.querySelectorAll(`.${n}`);return!l||!l.length?null:Array.from(l).map(c=>{const d=c.getBoundingClientRect();return{id:c.getAttribute("data-handleid"),type:n,nodeId:a,position:c.getAttribute("data-handlepos"),x:(d.left-e.left)/i,y:(d.top-e.top)/i,...oy(c)}})};function tT({sourceX:n,sourceY:t,targetX:e,targetY:i,sourceControlX:a,sourceControlY:l,targetControlX:c,targetControlY:d}){const h=n*.125+a*.375+c*.375+e*.125,g=t*.125+l*.375+d*.375+i*.125,p=Math.abs(h-n),w=Math.abs(g-t);return[h,g,p,w]}function Lf(n,t){return n>=0?.5*n:t*25*Math.sqrt(-n)}function mb({pos:n,x1:t,y1:e,x2:i,y2:a,c:l}){switch(n){case Et.Left:return[t-Lf(t-i,l),e];case Et.Right:return[t+Lf(i-t,l),e];case Et.Top:return[t,e-Lf(e-a,l)];case Et.Bottom:return[t,e+Lf(a-e,l)]}}function eT({sourceX:n,sourceY:t,sourcePosition:e=Et.Bottom,targetX:i,targetY:a,targetPosition:l=Et.Top,curvature:c=.25}){const[d,h]=mb({pos:e,x1:n,y1:t,x2:i,y2:a,c}),[g,p]=mb({pos:l,x1:i,y1:a,x2:n,y2:t,c}),[w,v,S,x]=tT({sourceX:n,sourceY:t,targetX:i,targetY:a,sourceControlX:d,sourceControlY:h,targetControlX:g,targetControlY:p});return[`M${n},${t} C${d},${h} ${g},${p} ${i},${a}`,w,v,S,x]}function nT({sourceX:n,sourceY:t,targetX:e,targetY:i}){const a=Math.abs(e-n)/2,l=e<n?e+a:e-a,c=Math.abs(i-t)/2,d=i<t?i+c:i-c;return[l,d,a,c]}function sI({sourceNode:n,targetNode:t,selected:e=!1,zIndex:i=0,elevateOnSelect:a=!1}){if(!a)return i;const l=e||t.selected||n.selected,c=Math.max(n.internals.z||0,t.internals.z||0,1e3);return i+(l?c:0)}function aI({sourceNode:n,targetNode:t,width:e,height:i,transform:a}){const l=Fd(Id(n),Id(t));l.x===l.x2&&(l.x2+=1),l.y===l.y2&&(l.y2+=1);const c={x:-a[0]/a[2],y:-a[1]/a[2],width:e/a[2],height:i/a[2]};return Vu(c,Zd(l))>0}const oI=({source:n,sourceHandle:t,target:e,targetHandle:i})=>`xy-edge__${n}${t||""}-${e}${i||""}`,lI=(n,t)=>t.some(e=>e.source===n.source&&e.target===n.target&&(e.sourceHandle===n.sourceHandle||!e.sourceHandle&&!n.sourceHandle)&&(e.targetHandle===n.targetHandle||!e.targetHandle&&!n.targetHandle)),uI=(n,t)=>{if(!n.source||!n.target)return t;let e;return Hx(n)?e={...n}:e={...n,id:oI(n)},lI(e,t)?t:(e.sourceHandle===null&&delete e.sourceHandle,e.targetHandle===null&&delete e.targetHandle,t.concat(e))};function rT({sourceX:n,sourceY:t,targetX:e,targetY:i}){const[a,l,c,d]=nT({sourceX:n,sourceY:t,targetX:e,targetY:i});return[`M ${n},${t}L ${e},${i}`,a,l,c,d]}const pb={[Et.Left]:{x:-1,y:0},[Et.Right]:{x:1,y:0},[Et.Top]:{x:0,y:-1},[Et.Bottom]:{x:0,y:1}},cI=({source:n,sourcePosition:t=Et.Bottom,target:e})=>t===Et.Left||t===Et.Right?n.x<e.x?{x:1,y:0}:{x:-1,y:0}:n.y<e.y?{x:0,y:1}:{x:0,y:-1},yb=(n,t)=>Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2));function fI({source:n,sourcePosition:t=Et.Bottom,target:e,targetPosition:i=Et.Top,center:a,offset:l}){const c=pb[t],d=pb[i],h={x:n.x+c.x*l,y:n.y+c.y*l},g={x:e.x+d.x*l,y:e.y+d.y*l},p=cI({source:h,sourcePosition:t,target:g}),w=p.x!==0?"x":"y",v=p[w];let S=[],x,E;const I={x:0,y:0},k={x:0,y:0},[z,N,O,_]=nT({sourceX:n.x,sourceY:n.y,targetX:e.x,targetY:e.y});if(c[w]*d[w]===-1){x=a.x??z,E=a.y??N;const U=[{x,y:h.y},{x,y:g.y}],W=[{x:h.x,y:E},{x:g.x,y:E}];c[w]===v?S=w==="x"?U:W:S=w==="x"?W:U}else{const U=[{x:h.x,y:g.y}],W=[{x:g.x,y:h.y}];if(w==="x"?S=c.x===v?W:U:S=c.y===v?U:W,t===i){const ct=Math.abs(n[w]-e[w]);if(ct<=l){const R=Math.min(l-1,l-ct);c[w]===v?I[w]=(h[w]>n[w]?-1:1)*R:k[w]=(g[w]>e[w]?-1:1)*R}}if(t!==i){const ct=w==="x"?"y":"x",R=c[w]===d[ct],Y=h[ct]>g[ct],D=h[ct]<g[ct];(c[w]===1&&(!R&&Y||R&&D)||c[w]!==1&&(!R&&D||R&&Y))&&(S=w==="x"?U:W)}const F={x:h.x+I.x,y:h.y+I.y},nt={x:g.x+k.x,y:g.y+k.y},ft=Math.max(Math.abs(F.x-S[0].x),Math.abs(nt.x-S[0].x)),ot=Math.max(Math.abs(F.y-S[0].y),Math.abs(nt.y-S[0].y));ft>=ot?(x=(F.x+nt.x)/2,E=S[0].y):(x=S[0].x,E=(F.y+nt.y)/2)}return[[n,{x:h.x+I.x,y:h.y+I.y},...S,{x:g.x+k.x,y:g.y+k.y},e],x,E,O,_]}function dI(n,t,e,i){const a=Math.min(yb(n,t)/2,yb(t,e)/2,i),{x:l,y:c}=t;if(n.x===l&&l===e.x||n.y===c&&c===e.y)return`L${l} ${c}`;if(n.y===c){const g=n.x<e.x?-1:1,p=n.y<e.y?1:-1;return`L ${l+a*g},${c}Q ${l},${c} ${l},${c+a*p}`}const d=n.x<e.x?1:-1,h=n.y<e.y?-1:1;return`L ${l},${c+a*h}Q ${l},${c} ${l+a*d},${c}`}function Dp({sourceX:n,sourceY:t,sourcePosition:e=Et.Bottom,targetX:i,targetY:a,targetPosition:l=Et.Top,borderRadius:c=5,centerX:d,centerY:h,offset:g=20}){const[p,w,v,S,x]=fI({source:{x:n,y:t},sourcePosition:e,target:{x:i,y:a},targetPosition:l,center:{x:d,y:h},offset:g});return[p.reduce((I,k,z)=>{let N="";return z>0&&z<p.length-1?N=dI(p[z-1],k,p[z+1],c):N=`${z===0?"M":"L"}${k.x} ${k.y}`,I+=N,I},""),w,v,S,x]}function vb(n){var t;return n&&!!(n.internals.handleBounds||(t=n.handles)!=null&&t.length)&&!!(n.measured.width||n.width||n.initialWidth)}function hI(n){var w;const{sourceNode:t,targetNode:e}=n;if(!vb(t)||!vb(e))return null;const i=t.internals.handleBounds||wb(t.handles),a=e.internals.handleBounds||wb(e.handles),l=Sb((i==null?void 0:i.source)??[],n.sourceHandle),c=Sb(n.connectionMode===tl.Strict?(a==null?void 0:a.target)??[]:((a==null?void 0:a.target)??[]).concat((a==null?void 0:a.source)??[]),n.targetHandle);if(!l||!c)return(w=n.onError)==null||w.call(n,"008",Cr.error008(l?"target":"source",{id:n.id,sourceHandle:n.sourceHandle,targetHandle:n.targetHandle})),null;const d=(l==null?void 0:l.position)||Et.Bottom,h=(c==null?void 0:c.position)||Et.Top,g=ju(t,l,d),p=ju(e,c,h);return{sourceX:g.x,sourceY:g.y,targetX:p.x,targetY:p.y,sourcePosition:d,targetPosition:h}}function wb(n){if(!n)return null;const t=[],e=[];for(const i of n)i.width=i.width??1,i.height=i.height??1,i.type==="source"?t.push(i):i.type==="target"&&e.push(i);return{source:t,target:e}}function ju(n,t,e=Et.Left,i=!1){const a=((t==null?void 0:t.x)??0)+n.internals.positionAbsolute.x,l=((t==null?void 0:t.y)??0)+n.internals.positionAbsolute.y,{width:c,height:d}=t??ds(n);if(i)return{x:a+c/2,y:l+d/2};switch((t==null?void 0:t.position)??e){case Et.Top:return{x:a+c/2,y:l};case Et.Right:return{x:a+c,y:l+d/2};case Et.Bottom:return{x:a+c/2,y:l+d};case Et.Left:return{x:a,y:l+d/2}}}function Sb(n,t){return n&&(t?n.find(e=>e.id===t):n[0])||null}function kp(n,t){return n?typeof n=="string"?n:`${t?`${t}__`:""}${Object.keys(n).sort().map(i=>`${i}=${n[i]}`).join("&")}`:""}function gI(n,{id:t,defaultColor:e,defaultMarkerStart:i,defaultMarkerEnd:a}){const l=new Set;return n.reduce((c,d)=>([d.markerStart||i,d.markerEnd||a].forEach(h=>{if(h&&typeof h=="object"){const g=kp(h,t);l.has(g)||(c.push({id:g,color:h.color||e,...h}),l.add(g))}}),c),[]).sort((c,d)=>c.id.localeCompare(d.id))}const ly={nodeOrigin:[0,0],nodeExtent:$u,elevateNodesOnSelect:!0,defaults:{}},mI={...ly,checkEquality:!0};function uy(n,t){const e={...n};for(const i in t)t[i]!==void 0&&(e[i]=t[i]);return e}function pI(n,t,e){const i=uy(ly,e);for(const a of n.values())if(a.parentId)cy(a,n,t,i);else{const l=ec(a,i.nodeOrigin),c=rl(a.extent)?a.extent:i.nodeExtent,d=Ua(l,c,ds(a));a.internals.positionAbsolute=d}}function Op(n,t,e,i){var h,g;const a=uy(mI,i);let l=!0;const c=new Map(t),d=a!=null&&a.elevateNodesOnSelect?1e3:0;t.clear(),e.clear();for(const p of n){let w=c.get(p.id);if(a.checkEquality&&p===(w==null?void 0:w.internals.userNode))t.set(p.id,w);else{const v=ec(p,a.nodeOrigin),S=rl(p.extent)?p.extent:a.nodeExtent,x=Ua(v,S,ds(p));w={...a.defaults,...p,measured:{width:(h=p.measured)==null?void 0:h.width,height:(g=p.measured)==null?void 0:g.height},internals:{positionAbsolute:x,handleBounds:p.measured?w==null?void 0:w.internals.handleBounds:void 0,z:iT(p,d),userNode:p}},t.set(p.id,w)}(!w.measured||!w.measured.width||!w.measured.height)&&!w.hidden&&(l=!1),p.parentId&&cy(w,t,e,i)}return l}function yI(n,t){if(!n.parentId)return;const e=t.get(n.parentId);e?e.set(n.id,n):t.set(n.parentId,new Map([[n.id,n]]))}function cy(n,t,e,i){const{elevateNodesOnSelect:a,nodeOrigin:l,nodeExtent:c}=uy(ly,i),d=n.parentId,h=t.get(d);if(!h){console.warn(`Parent node ${d} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}yI(n,e);const g=a?1e3:0,{x:p,y:w,z:v}=vI(n,h,l,c,g),{positionAbsolute:S}=n.internals,x=p!==S.x||w!==S.y;(x||v!==n.internals.z)&&t.set(n.id,{...n,internals:{...n.internals,positionAbsolute:x?{x:p,y:w}:S,z:v}})}function iT(n,t){return(tr(n.zIndex)?n.zIndex:0)+(n.selected?t:0)}function vI(n,t,e,i,a){const{x:l,y:c}=t.internals.positionAbsolute,d=ds(n),h=ec(n,e),g=rl(n.extent)?Ua(h,n.extent,d):h;let p=Ua({x:l+g.x,y:c+g.y},i,d);n.extent==="parent"&&(p=Yx(p,d,t));const w=iT(n,a),v=t.internals.z??0;return{x:p.x,y:p.y,z:v>w?v:w}}function fy(n,t,e,i=[0,0]){var c;const a=[],l=new Map;for(const d of n){const h=t.get(d.parentId);if(!h)continue;const g=((c=l.get(d.parentId))==null?void 0:c.expandedRect)??nl(h),p=Xx(g,d.rect);l.set(d.parentId,{expandedRect:p,parent:h})}return l.size>0&&l.forEach(({expandedRect:d,parent:h},g)=>{var N;const p=h.internals.positionAbsolute,w=ds(h),v=h.origin??i,S=d.x<p.x?Math.round(Math.abs(p.x-d.x)):0,x=d.y<p.y?Math.round(Math.abs(p.y-d.y)):0,E=Math.max(w.width,Math.round(d.width)),I=Math.max(w.height,Math.round(d.height)),k=(E-w.width)*v[0],z=(I-w.height)*v[1];(S>0||x>0||k||z)&&(a.push({id:g,type:"position",position:{x:h.position.x-S+k,y:h.position.y-x+z}}),(N=e.get(g))==null||N.forEach(O=>{n.some(_=>_.id===O.id)||a.push({id:O.id,type:"position",position:{x:O.position.x+S,y:O.position.y+x}})})),(w.width<d.width||w.height<d.height||S||x)&&a.push({id:g,type:"dimensions",setAttributes:!0,dimensions:{width:E+(S?v[0]*S-k:0),height:I+(x?v[1]*x-z:0)}})}),a}function wI(n,t,e,i,a,l){const c=i==null?void 0:i.querySelector(".xyflow__viewport");let d=!1;if(!c)return{changes:[],updatedInternals:d};const h=[],g=window.getComputedStyle(c),{m22:p}=new window.DOMMatrixReadOnly(g.transform),w=[];for(const v of n.values()){const S=t.get(v.id);if(!S)continue;if(S.hidden){t.set(S.id,{...S,internals:{...S.internals,handleBounds:void 0}}),d=!0;continue}const x=oy(v.nodeElement),E=S.measured.width!==x.width||S.measured.height!==x.height;if(!!(x.width&&x.height&&(E||!S.internals.handleBounds||v.force))){const k=v.nodeElement.getBoundingClientRect(),z=rl(S.extent)?S.extent:l;let{positionAbsolute:N}=S.internals;S.parentId&&S.extent==="parent"?N=Yx(N,x,t.get(S.parentId)):z&&(N=Ua(N,z,x));const O={...S,measured:x,internals:{...S.internals,positionAbsolute:N,handleBounds:{source:gb("source",v.nodeElement,k,p,S.id),target:gb("target",v.nodeElement,k,p,S.id)}}};t.set(S.id,O),S.parentId&&cy(O,t,e,{nodeOrigin:a}),d=!0,E&&(h.push({id:S.id,type:"dimensions",dimensions:x}),S.expandParent&&S.parentId&&w.push({id:S.id,parentId:S.parentId,rect:nl(O,a)}))}}if(w.length>0){const v=fy(w,t,e,a);h.push(...v)}return{changes:h,updatedInternals:d}}async function SI({delta:n,panZoom:t,transform:e,translateExtent:i,width:a,height:l}){if(!t||!n.x&&!n.y)return Promise.resolve(!1);const c=await t.setViewportConstrained({x:e[0]+n.x,y:e[1]+n.y,zoom:e[2]},[[0,0],[a,l]],i),d=!!c&&(c.x!==e[0]||c.y!==e[1]||c.k!==e[2]);return Promise.resolve(d)}function bb(n,t,e,i,a,l){let c=a;const d=i.get(c)||new Map;i.set(c,d.set(e,t)),c=`${a}-${n}`;const h=i.get(c)||new Map;if(i.set(c,h.set(e,t)),l){c=`${a}-${n}-${l}`;const g=i.get(c)||new Map;i.set(c,g.set(e,t))}}function sT(n,t,e){n.clear(),t.clear();for(const i of e){const{source:a,target:l,sourceHandle:c=null,targetHandle:d=null}=i,h={edgeId:i.id,source:a,target:l,sourceHandle:c,targetHandle:d},g=`${a}-${c}--${l}-${d}`,p=`${l}-${d}--${a}-${c}`;bb("source",h,p,n,a,c),bb("target",h,g,n,l,d),t.set(i.id,i)}}function aT(n,t){if(!n.parentId)return!1;const e=t.get(n.parentId);return e?e.selected?!0:aT(e,t):!1}function xb(n,t,e){var a;let i=n;do{if((a=i==null?void 0:i.matches)!=null&&a.call(i,t))return!0;if(i===e)return!1;i=i==null?void 0:i.parentElement}while(i);return!1}function bI(n,t,e,i){const a=new Map;for(const[l,c]of n)if((c.selected||c.id===i)&&(!c.parentId||!aT(c,n))&&(c.draggable||t&&typeof c.draggable>"u")){const d=n.get(l);d&&a.set(l,{id:l,position:d.position||{x:0,y:0},distance:{x:e.x-d.internals.positionAbsolute.x,y:e.y-d.internals.positionAbsolute.y},extent:d.extent,parentId:d.parentId,origin:d.origin,expandParent:d.expandParent,internals:{positionAbsolute:d.internals.positionAbsolute||{x:0,y:0}},measured:{width:d.measured.width??0,height:d.measured.height??0}})}return a}function Bm({nodeId:n,dragItems:t,nodeLookup:e,dragging:i=!0}){var c,d,h;const a=[];for(const[g,p]of t){const w=(c=e.get(g))==null?void 0:c.internals.userNode;w&&a.push({...w,position:p.position,dragging:i})}if(!n)return[a[0],a];const l=(d=e.get(n))==null?void 0:d.internals.userNode;return[l?{...l,position:((h=t.get(n))==null?void 0:h.position)||l.position,dragging:i}:a[0],a]}function xI({onNodeMouseDown:n,getStoreItems:t,onDragStart:e,onDrag:i,onDragStop:a}){let l={x:null,y:null},c=0,d=new Map,h=!1,g={x:0,y:0},p=null,w=!1,v=null,S=!1;function x({noDragClassName:I,handleSelector:k,domNode:z,isSelectable:N,nodeId:O,nodeClickDistance:_=0}){v=gn(z);function J({x:nt,y:ft},ot){const{nodeLookup:ct,nodeExtent:R,snapGrid:Y,snapToGrid:D,nodeOrigin:B,onNodeDrag:$,onSelectionDrag:q,onError:C,updateNodePositions:P}=t();l={x:nt,y:ft};let tt=!1,rt={x:0,y:0,x2:0,y2:0};if(d.size>1&&R){const ut=nc(d);rt=Cp(ut)}for(const[ut,gt]of d){if(!ct.has(ut))continue;let dt={x:nt-gt.distance.x,y:ft-gt.distance.y};D&&(dt=Qd(dt,Y));let pt=[[R[0][0],R[0][1]],[R[1][0],R[1][1]]];if(d.size>1&&R&&!gt.extent){const{positionAbsolute:Vt}=gt.internals,Ot=Vt.x-rt.x+R[0][0],Tt=Vt.x+gt.measured.width-rt.x2+R[1][0],Yt=Vt.y-rt.y+R[0][1],qt=Vt.y+gt.measured.height-rt.y2+R[1][1];pt=[[Ot,Yt],[Tt,qt]]}const{position:yt,positionAbsolute:Dt}=jx({nodeId:ut,nextPosition:dt,nodeLookup:ct,nodeExtent:pt,nodeOrigin:B,onError:C});tt=tt||gt.position.x!==yt.x||gt.position.y!==yt.y,gt.position=yt,gt.internals.positionAbsolute=Dt}if(tt&&(P(d,!0),ot&&(i||$||!O&&q))){const[ut,gt]=Bm({nodeId:O,dragItems:d,nodeLookup:ct});i==null||i(ot,d,ut,gt),$==null||$(ot,ut,gt),O||q==null||q(ot,gt)}}async function U(){if(!p)return;const{transform:nt,panBy:ft,autoPanSpeed:ot,autoPanOnNodeDrag:ct}=t();if(!ct){h=!1,cancelAnimationFrame(c);return}const[R,Y]=Gx(g,p,ot);(R!==0||Y!==0)&&(l.x=(l.x??0)-R/nt[2],l.y=(l.y??0)-Y/nt[2],await ft({x:R,y:Y})&&J(l,null)),c=requestAnimationFrame(U)}function W(nt){var tt;const{nodeLookup:ft,multiSelectionActive:ot,nodesDraggable:ct,transform:R,snapGrid:Y,snapToGrid:D,selectNodesOnDrag:B,onNodeDragStart:$,onSelectionDragStart:q,unselectNodesAndEdges:C}=t();w=!0,(!B||!N)&&!ot&&O&&((tt=ft.get(O))!=null&&tt.selected||C()),N&&B&&O&&(n==null||n(O));const P=Eu(nt.sourceEvent,{transform:R,snapGrid:Y,snapToGrid:D,containerBounds:p});if(l=P,d=bI(ft,ct,P,O),d.size>0&&(e||$||!O&&q)){const[rt,ut]=Bm({nodeId:O,dragItems:d,nodeLookup:ft});e==null||e(nt.sourceEvent,d,rt,ut),$==null||$(nt.sourceEvent,rt,ut),O||q==null||q(nt.sourceEvent,ut)}}const F=Ax().clickDistance(_).on("start",nt=>{const{domNode:ft,nodeDragThreshold:ot,transform:ct,snapGrid:R,snapToGrid:Y}=t();p=(ft==null?void 0:ft.getBoundingClientRect())||null,S=!1,ot===0&&W(nt),l=Eu(nt.sourceEvent,{transform:ct,snapGrid:R,snapToGrid:Y,containerBounds:p}),g=os(nt.sourceEvent,p)}).on("drag",nt=>{const{autoPanOnNodeDrag:ft,transform:ot,snapGrid:ct,snapToGrid:R,nodeDragThreshold:Y,nodeLookup:D}=t(),B=Eu(nt.sourceEvent,{transform:ot,snapGrid:ct,snapToGrid:R,containerBounds:p});if((nt.sourceEvent.type==="touchmove"&&nt.sourceEvent.touches.length>1||O&&!D.has(O))&&(S=!0),!S){if(!h&&ft&&w&&(h=!0,U()),!w){const $=B.xSnapped-(l.x??0),q=B.ySnapped-(l.y??0);Math.sqrt($*$+q*q)>Y&&W(nt)}(l.x!==B.xSnapped||l.y!==B.ySnapped)&&d&&w&&(g=os(nt.sourceEvent,p),J(B,nt.sourceEvent))}}).on("end",nt=>{if(!(!w||S)&&(h=!1,w=!1,cancelAnimationFrame(c),d.size>0)){const{nodeLookup:ft,updateNodePositions:ot,onNodeDragStop:ct,onSelectionDragStop:R}=t();if(ot(d,!1),a||ct||!O&&R){const[Y,D]=Bm({nodeId:O,dragItems:d,nodeLookup:ft,dragging:!1});a==null||a(nt.sourceEvent,d,Y,D),ct==null||ct(nt.sourceEvent,Y,D),O||R==null||R(nt.sourceEvent,D)}}}).filter(nt=>{const ft=nt.target;return!nt.button&&(!I||!xb(ft,`.${I}`,z))&&(!k||xb(ft,k,z))});v.call(F)}function E(){v==null||v.on(".drag",null)}return{update:x,destroy:E}}function TI(n,t,e){const i=[],a={x:n.x-e,y:n.y-e,width:e*2,height:e*2};for(const l of t.values())Vu(a,nl(l))>0&&i.push(l);return i}const AI=250;function EI(n,t,e,i){var d,h;let a=[],l=1/0;const c=TI(n,e,t+AI);for(const g of c){const p=[...((d=g.internals.handleBounds)==null?void 0:d.source)??[],...((h=g.internals.handleBounds)==null?void 0:h.target)??[]];for(const w of p){if(i.nodeId===w.nodeId&&i.type===w.type&&i.id===w.id)continue;const{x:v,y:S}=ju(g,w,w.position,!0),x=Math.sqrt(Math.pow(v-n.x,2)+Math.pow(S-n.y,2));x>t||(x<l?(a=[{...w,x:v,y:S}],l=x):x===l&&a.push({...w,x:v,y:S}))}}if(!a.length)return null;if(a.length>1){const g=i.type==="source"?"target":"source";return a.find(p=>p.type===g)??a[0]}return a[0]}function oT(n,t,e,i,a,l=!1){var g,p,w;const c=i.get(n);if(!c)return null;const d=a==="strict"?(g=c.internals.handleBounds)==null?void 0:g[t]:[...((p=c.internals.handleBounds)==null?void 0:p.source)??[],...((w=c.internals.handleBounds)==null?void 0:w.target)??[]],h=(e?d==null?void 0:d.find(v=>v.id===e):d==null?void 0:d[0])??null;return h&&l?{...h,...ju(c,h,h.position,!0)}:h}function lT(n,t){return n||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function NI(n,t){let e=null;return t?e=!0:n&&!t&&(e=!1),e}const uT=()=>!0;function CI(n,{connectionMode:t,connectionRadius:e,handleId:i,nodeId:a,edgeUpdaterType:l,isTarget:c,domNode:d,nodeLookup:h,lib:g,autoPanOnConnect:p,flowId:w,panBy:v,cancelConnection:S,onConnectStart:x,onConnect:E,onConnectEnd:I,isValidConnection:k=uT,onReconnectEnd:z,updateConnection:N,getTransform:O,getFromHandle:_,autoPanSpeed:J}){const U=Zx(n.target);let W=0,F;const{x:nt,y:ft}=os(n),ot=U==null?void 0:U.elementFromPoint(nt,ft),ct=lT(l,ot),R=d==null?void 0:d.getBoundingClientRect();if(!R||!ct)return;const Y=oT(a,ct,i,h,t);if(!Y)return;let D=os(n,R),B=!1,$=null,q=!1,C=null;function P(){if(!p||!R)return;const[Dt,Vt]=Gx(D,R,J);v({x:Dt,y:Vt}),W=requestAnimationFrame(P)}const tt={...Y,nodeId:a,type:ct,position:Y.position},rt=h.get(a),gt={inProgress:!0,isValid:null,from:ju(rt,tt,Et.Left,!0),fromHandle:tt,fromPosition:tt.position,fromNode:rt,to:D,toHandle:null,toPosition:cb[tt.position],toNode:null};N(gt);let dt=gt;x==null||x(n,{nodeId:a,handleId:i,handleType:ct});function pt(Dt){if(!_()||!tt){yt(Dt);return}const Vt=O();D=os(Dt,R),F=EI(rc(D,Vt,!1,[1,1]),e,h,tt),B||(P(),B=!0);const Ot=cT(Dt,{handle:F,connectionMode:t,fromNodeId:a,fromHandleId:i,fromType:c?"target":"source",isValidConnection:k,doc:U,lib:g,flowId:w,nodeLookup:h});C=Ot.handleDomNode,$=Ot.connection,q=NI(!!F,Ot.isValid);const Tt={...dt,isValid:q,to:F&&q?Rd({x:F.x,y:F.y},Vt):D,toHandle:Ot.toHandle,toPosition:q&&Ot.toHandle?Ot.toHandle.position:cb[tt.position],toNode:Ot.toHandle?h.get(Ot.toHandle.nodeId):null};q&&F&&dt.toHandle&&Tt.toHandle&&dt.toHandle.type===Tt.toHandle.type&&dt.toHandle.nodeId===Tt.toHandle.nodeId&&dt.toHandle.id===Tt.toHandle.id&&dt.to.x===Tt.to.x&&dt.to.y===Tt.to.y||(N(Tt),dt=Tt)}function yt(Dt){(F||C)&&$&&q&&(E==null||E($));const{inProgress:Vt,...Ot}=dt,Tt={...Ot,toPosition:dt.toHandle?dt.toPosition:null};I==null||I(Dt,Tt),l&&(z==null||z(Dt,Tt)),S(),cancelAnimationFrame(W),B=!1,q=!1,$=null,C=null,U.removeEventListener("mousemove",pt),U.removeEventListener("mouseup",yt),U.removeEventListener("touchmove",pt),U.removeEventListener("touchend",yt)}U.addEventListener("mousemove",pt),U.addEventListener("mouseup",yt),U.addEventListener("touchmove",pt),U.addEventListener("touchend",yt)}function cT(n,{handle:t,connectionMode:e,fromNodeId:i,fromHandleId:a,fromType:l,doc:c,lib:d,flowId:h,isValidConnection:g=uT,nodeLookup:p}){const w=l==="target",v=t?c.querySelector(`.${d}-flow__handle[data-id="${h}-${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`):null,{x:S,y:x}=os(n),E=c.elementFromPoint(S,x),I=E!=null&&E.classList.contains(`${d}-flow__handle`)?E:v,k={handleDomNode:I,isValid:!1,connection:null,toHandle:null};if(I){const z=lT(void 0,I),N=I.getAttribute("data-nodeid"),O=I.getAttribute("data-handleid"),_=I.classList.contains("connectable"),J=I.classList.contains("connectableend");if(!N||!z)return k;const U={source:w?N:i,sourceHandle:w?O:a,target:w?i:N,targetHandle:w?a:O};k.connection=U;const F=_&&J&&(e===tl.Strict?w&&z==="source"||!w&&z==="target":N!==i||O!==a);k.isValid=F&&g(U),k.toHandle=oT(N,z,O,p,e,!1)}return k}const Ip={onPointerDown:CI,isValid:cT};function DI({domNode:n,panZoom:t,getTransform:e,getViewScale:i}){const a=gn(n);function l({translateExtent:d,width:h,height:g,zoomStep:p=10,pannable:w=!0,zoomable:v=!0,inversePan:S=!1}){const x=N=>{const O=e();if(N.sourceEvent.type!=="wheel"||!t)return;const _=-N.sourceEvent.deltaY*(N.sourceEvent.deltaMode===1?.05:N.sourceEvent.deltaMode?1:.002)*p,J=O[2]*Math.pow(2,_);t.scaleTo(J)};let E=[0,0];const I=N=>{(N.sourceEvent.type==="mousedown"||N.sourceEvent.type==="touchstart")&&(E=[N.sourceEvent.clientX??N.sourceEvent.touches[0].clientX,N.sourceEvent.clientY??N.sourceEvent.touches[0].clientY])},k=N=>{const O=e();if(N.sourceEvent.type!=="mousemove"&&N.sourceEvent.type!=="touchmove"||!t)return;const _=[N.sourceEvent.clientX??N.sourceEvent.touches[0].clientX,N.sourceEvent.clientY??N.sourceEvent.touches[0].clientY],J=[_[0]-E[0],_[1]-E[1]];E=_;const U=i()*Math.max(O[2],Math.log(O[2]))*(S?-1:1),W={x:O[0]-J[0]*U,y:O[1]-J[1]*U},F=[[0,0],[h,g]];t.setViewportConstrained({x:W.x,y:W.y,zoom:O[2]},F,d)},z=qx().on("start",I).on("zoom",w?k:null).on("zoom.wheel",v?x:null);a.call(z,{})}function c(){a.on("zoom",null)}return{update:l,destroy:c,pointer:Fn}}const kI=(n,t)=>n.x!==t.x||n.y!==t.y||n.zoom!==t.k,Wd=n=>({x:n.x,y:n.y,zoom:n.k}),zm=({x:n,y:t,zoom:e})=>Kd.translate(n,t).scale(e),zo=(n,t)=>n.target.closest(`.${t}`),fT=(n,t)=>t===2&&Array.isArray(n)&&n.includes(2),Lm=(n,t=0,e=()=>{})=>{const i=typeof t=="number"&&t>0;return i||e(),i?n.transition().duration(t).on("end",e):n},dT=n=>{const t=n.ctrlKey&&Md()?10:1;return-n.deltaY*(n.deltaMode===1?.05:n.deltaMode?1:.002)*t};function OI({zoomPanValues:n,noWheelClassName:t,d3Selection:e,d3Zoom:i,panOnScrollMode:a,panOnScrollSpeed:l,zoomOnPinch:c,onPanZoomStart:d,onPanZoom:h,onPanZoomEnd:g}){return p=>{if(zo(p,t))return!1;p.preventDefault(),p.stopImmediatePropagation();const w=e.property("__zoom").k||1;if(p.ctrlKey&&c){const I=Fn(p),k=dT(p),z=w*Math.pow(2,k);i.scaleTo(e,z,I,p);return}const v=p.deltaMode===1?20:1;let S=a===Ra.Vertical?0:p.deltaX*v,x=a===Ra.Horizontal?0:p.deltaY*v;!Md()&&p.shiftKey&&a!==Ra.Vertical&&(S=p.deltaY*v,x=0),i.translateBy(e,-(S/w)*l,-(x/w)*l,{internal:!0});const E=Wd(e.property("__zoom"));clearTimeout(n.panScrollTimeout),n.isPanScrolling||(n.isPanScrolling=!0,d==null||d(p,E)),n.isPanScrolling&&(h==null||h(p,E),n.panScrollTimeout=setTimeout(()=>{g==null||g(p,E),n.isPanScrolling=!1},150))}}function II({noWheelClassName:n,preventScrolling:t,d3ZoomHandler:e}){return function(i,a){if(!t&&i.type==="wheel"&&!i.ctrlKey||zo(i,n))return null;i.preventDefault(),e.call(this,i,a)}}function RI({zoomPanValues:n,onDraggingChange:t,onPanZoomStart:e}){return i=>{var l,c,d;if((l=i.sourceEvent)!=null&&l.internal)return;const a=Wd(i.transform);n.mouseButton=((c=i.sourceEvent)==null?void 0:c.button)||0,n.isZoomingOrPanning=!0,n.prevViewport=a,((d=i.sourceEvent)==null?void 0:d.type)==="mousedown"&&t(!0),e&&(e==null||e(i.sourceEvent,a))}}function MI({zoomPanValues:n,panOnDrag:t,onPaneContextMenu:e,onTransformChange:i,onPanZoom:a}){return l=>{var c,d;n.usedRightMouseButton=!!(e&&fT(t,n.mouseButton??0)),(c=l.sourceEvent)!=null&&c.sync||i([l.transform.x,l.transform.y,l.transform.k]),a&&!((d=l.sourceEvent)!=null&&d.internal)&&(a==null||a(l.sourceEvent,Wd(l.transform)))}}function BI({zoomPanValues:n,panOnDrag:t,panOnScroll:e,onDraggingChange:i,onPanZoomEnd:a,onPaneContextMenu:l}){return c=>{var d;if(!((d=c.sourceEvent)!=null&&d.internal)&&(n.isZoomingOrPanning=!1,l&&fT(t,n.mouseButton??0)&&!n.usedRightMouseButton&&c.sourceEvent&&l(c.sourceEvent),n.usedRightMouseButton=!1,i(!1),a&&kI(n.prevViewport,c.transform))){const h=Wd(c.transform);n.prevViewport=h,clearTimeout(n.timerId),n.timerId=setTimeout(()=>{a==null||a(c.sourceEvent,h)},e?150:0)}}}function zI({zoomActivationKeyPressed:n,zoomOnScroll:t,zoomOnPinch:e,panOnDrag:i,panOnScroll:a,zoomOnDoubleClick:l,userSelectionActive:c,noWheelClassName:d,noPanClassName:h,lib:g}){return p=>{var x;const w=n||t,v=e&&p.ctrlKey;if(p.button===1&&p.type==="mousedown"&&(zo(p,`${g}-flow__node`)||zo(p,`${g}-flow__edge`)))return!0;if(!i&&!w&&!a&&!l&&!e||c||zo(p,d)&&p.type==="wheel"||zo(p,h)&&(p.type!=="wheel"||a&&p.type==="wheel"&&!n)||!e&&p.ctrlKey&&p.type==="wheel")return!1;if(!e&&p.type==="touchstart"&&((x=p.touches)==null?void 0:x.length)>1)return p.preventDefault(),!1;if(!w&&!a&&!v&&p.type==="wheel"||!i&&(p.type==="mousedown"||p.type==="touchstart")||Array.isArray(i)&&!i.includes(p.button)&&p.type==="mousedown")return!1;const S=Array.isArray(i)&&i.includes(p.button)||!p.button||p.button<=1;return(!p.ctrlKey||p.type==="wheel")&&S}}function LI({domNode:n,minZoom:t,maxZoom:e,paneClickDistance:i,translateExtent:a,viewport:l,onPanZoom:c,onPanZoomStart:d,onPanZoomEnd:h,onDraggingChange:g}){const p={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},w=n.getBoundingClientRect(),v=qx().clickDistance(!tr(i)||i<0?0:i).scaleExtent([t,e]).translateExtent(a),S=gn(n).call(v);N({x:l.x,y:l.y,zoom:el(l.zoom,t,e)},[[0,0],[w.width,w.height]],a);const x=S.on("wheel.zoom"),E=S.on("dblclick.zoom");v.wheelDelta(dT);function I(ot,ct){return S?new Promise(R=>{v==null||v.transform(Lm(S,ct==null?void 0:ct.duration,()=>R(!0)),ot)}):Promise.resolve(!1)}function k({noWheelClassName:ot,noPanClassName:ct,onPaneContextMenu:R,userSelectionActive:Y,panOnScroll:D,panOnDrag:B,panOnScrollMode:$,panOnScrollSpeed:q,preventScrolling:C,zoomOnPinch:P,zoomOnScroll:tt,zoomOnDoubleClick:rt,zoomActivationKeyPressed:ut,lib:gt,onTransformChange:dt}){Y&&!p.isZoomingOrPanning&&z();const yt=D&&!ut&&!Y?OI({zoomPanValues:p,noWheelClassName:ot,d3Selection:S,d3Zoom:v,panOnScrollMode:$,panOnScrollSpeed:q,zoomOnPinch:P,onPanZoomStart:d,onPanZoom:c,onPanZoomEnd:h}):II({noWheelClassName:ot,preventScrolling:C,d3ZoomHandler:x});if(S.on("wheel.zoom",yt,{passive:!1}),!Y){const Vt=RI({zoomPanValues:p,onDraggingChange:g,onPanZoomStart:d});v.on("start",Vt);const Ot=MI({zoomPanValues:p,panOnDrag:B,onPaneContextMenu:!!R,onPanZoom:c,onTransformChange:dt});v.on("zoom",Ot);const Tt=BI({zoomPanValues:p,panOnDrag:B,panOnScroll:D,onPaneContextMenu:R,onPanZoomEnd:h,onDraggingChange:g});v.on("end",Tt)}const Dt=zI({zoomActivationKeyPressed:ut,panOnDrag:B,zoomOnScroll:tt,panOnScroll:D,zoomOnDoubleClick:rt,zoomOnPinch:P,userSelectionActive:Y,noPanClassName:ct,noWheelClassName:ot,lib:gt});v.filter(Dt),rt?S.on("dblclick.zoom",E):S.on("dblclick.zoom",null)}function z(){v.on("zoom",null)}async function N(ot,ct,R){const Y=zm(ot),D=v==null?void 0:v.constrain()(Y,ct,R);return D&&await I(D),new Promise(B=>B(D))}async function O(ot,ct){const R=zm(ot);return await I(R,ct),new Promise(Y=>Y(R))}function _(ot){if(S){const ct=zm(ot),R=S.property("__zoom");(R.k!==ot.zoom||R.x!==ot.x||R.y!==ot.y)&&(v==null||v.transform(S,ct,null,{sync:!0}))}}function J(){const ot=S?Ux(S.node()):{x:0,y:0,k:1};return{x:ot.x,y:ot.y,zoom:ot.k}}function U(ot,ct){return S?new Promise(R=>{v==null||v.scaleTo(Lm(S,ct==null?void 0:ct.duration,()=>R(!0)),ot)}):Promise.resolve(!1)}function W(ot,ct){return S?new Promise(R=>{v==null||v.scaleBy(Lm(S,ct==null?void 0:ct.duration,()=>R(!0)),ot)}):Promise.resolve(!1)}function F(ot){v==null||v.scaleExtent(ot)}function nt(ot){v==null||v.translateExtent(ot)}function ft(ot){const ct=!tr(ot)||ot<0?0:ot;v==null||v.clickDistance(ct)}return{update:k,destroy:z,setViewport:O,setViewportConstrained:N,getViewport:J,scaleTo:U,scaleBy:W,setScaleExtent:F,setTranslateExtent:nt,syncViewport:_,setClickDistance:ft}}var Nu;(function(n){n.Line="line",n.Handle="handle"})(Nu||(Nu={}));function _I({width:n,prevWidth:t,height:e,prevHeight:i,affectsX:a,affectsY:l}){const c=n-t,d=e-i,h=[c>0?1:c<0?-1:0,d>0?1:d<0?-1:0];return c&&a&&(h[0]=h[0]*-1),d&&l&&(h[1]=h[1]*-1),h}function UI(n){const t=n.includes("right")||n.includes("left"),e=n.includes("bottom")||n.includes("top"),i=n.includes("left"),a=n.includes("top");return{isHorizontal:t,isVertical:e,affectsX:i,affectsY:a}}function js(n,t){return Math.max(0,t-n)}function Ys(n,t){return Math.max(0,n-t)}function _f(n,t,e){return Math.max(0,t-n,n-e)}function Tb(n,t){return n?!t:t}function qI(n,t,e,i,a,l,c,d){let{affectsX:h,affectsY:g}=t;const{isHorizontal:p,isVertical:w}=t,v=p&&w,{xSnapped:S,ySnapped:x}=e,{minWidth:E,maxWidth:I,minHeight:k,maxHeight:z}=i,{x:N,y:O,width:_,height:J,aspectRatio:U}=n;let W=Math.floor(p?S-n.pointerX:0),F=Math.floor(w?x-n.pointerY:0);const nt=_+(h?-W:W),ft=J+(g?-F:F),ot=-l[0]*_,ct=-l[1]*J;let R=_f(nt,E,I),Y=_f(ft,k,z);if(c){let $=0,q=0;h&&W<0?$=js(N+W+ot,c[0][0]):!h&&W>0&&($=Ys(N+nt+ot,c[1][0])),g&&F<0?q=js(O+F+ct,c[0][1]):!g&&F>0&&(q=Ys(O+ft+ct,c[1][1])),R=Math.max(R,$),Y=Math.max(Y,q)}if(d){let $=0,q=0;h&&W>0?$=Ys(N+W,d[0][0]):!h&&W<0&&($=js(N+nt,d[1][0])),g&&F>0?q=Ys(O+F,d[0][1]):!g&&F<0&&(q=js(O+ft,d[1][1])),R=Math.max(R,$),Y=Math.max(Y,q)}if(a){if(p){const $=_f(nt/U,k,z)*U;if(R=Math.max(R,$),c){let q=0;!h&&!g||h&&!g&&v?q=Ys(O+ct+nt/U,c[1][1])*U:q=js(O+ct+(h?W:-W)/U,c[0][1])*U,R=Math.max(R,q)}if(d){let q=0;!h&&!g||h&&!g&&v?q=js(O+nt/U,d[1][1])*U:q=Ys(O+(h?W:-W)/U,d[0][1])*U,R=Math.max(R,q)}}if(w){const $=_f(ft*U,E,I)/U;if(Y=Math.max(Y,$),c){let q=0;!h&&!g||g&&!h&&v?q=Ys(N+ft*U+ot,c[1][0])/U:q=js(N+(g?F:-F)*U+ot,c[0][0])/U,Y=Math.max(Y,q)}if(d){let q=0;!h&&!g||g&&!h&&v?q=js(N+ft*U,d[1][0])/U:q=Ys(N+(g?F:-F)*U,d[0][0])/U,Y=Math.max(Y,q)}}}F=F+(F<0?Y:-Y),W=W+(W<0?R:-R),a&&(v?nt>ft*U?F=(Tb(h,g)?-W:W)/U:W=(Tb(h,g)?-F:F)*U:p?(F=W/U,g=h):(W=F*U,h=g));const D=h?N+W:N,B=g?O+F:O;return{width:_+(h?-W:W),height:J+(g?-F:F),x:l[0]*W*(h?-1:1)+D,y:l[1]*F*(g?-1:1)+B}}const hT={width:0,height:0,x:0,y:0},PI={...hT,pointerX:0,pointerY:0,aspectRatio:1};function JI(n){return[[0,0],[n.measured.width,n.measured.height]]}function $I(n,t,e){const i=t.position.x+n.position.x,a=t.position.y+n.position.y,l=n.measured.width??0,c=n.measured.height??0,d=e[0]*l,h=e[1]*c;return[[i-d,a-h],[i+l-d,a+c-h]]}function HI({domNode:n,nodeId:t,getStoreItems:e,onChange:i,onEnd:a}){const l=gn(n);function c({controlPosition:h,boundaries:g,keepAspectRatio:p,onResizeStart:w,onResize:v,onResizeEnd:S,shouldResize:x}){let E={...hT},I={...PI};const k=UI(h);let z,N=null,O=[],_,J,U;const W=Ax().on("start",F=>{const{nodeLookup:nt,transform:ft,snapGrid:ot,snapToGrid:ct,nodeOrigin:R,paneDomNode:Y}=e();if(z=nt.get(t),!z)return;N=(Y==null?void 0:Y.getBoundingClientRect())??null;const{xSnapped:D,ySnapped:B}=Eu(F.sourceEvent,{transform:ft,snapGrid:ot,snapToGrid:ct,containerBounds:N});E={width:z.measured.width??0,height:z.measured.height??0,x:z.position.x??0,y:z.position.y??0},I={...E,pointerX:D,pointerY:B,aspectRatio:E.width/E.height},_=void 0,z.parentId&&(z.extent==="parent"||z.expandParent)&&(_=nt.get(z.parentId),J=_&&z.extent==="parent"?JI(_):void 0),O=[],U=void 0;for(const[$,q]of nt)if(q.parentId===t&&(O.push({id:$,position:{...q.position},extent:q.extent}),q.extent==="parent"||q.expandParent)){const C=$I(q,z,q.origin??R);U?U=[[Math.min(C[0][0],U[0][0]),Math.min(C[0][1],U[0][1])],[Math.max(C[1][0],U[1][0]),Math.max(C[1][1],U[1][1])]]:U=C}w==null||w(F,{...E})}).on("drag",F=>{const{transform:nt,snapGrid:ft,snapToGrid:ot,nodeOrigin:ct}=e(),R=Eu(F.sourceEvent,{transform:nt,snapGrid:ft,snapToGrid:ot,containerBounds:N}),Y=[];if(!z)return;const{x:D,y:B,width:$,height:q}=E,C={},P=z.origin??ct,{width:tt,height:rt,x:ut,y:gt}=qI(I,k,R,g,p,P,J,U),dt=tt!==$,pt=rt!==q,yt=ut!==D&&dt,Dt=gt!==B&&pt;if(!yt&&!Dt&&!dt&&!pt)return;if((yt||Dt||P[0]===1||P[1]===1)&&(C.x=yt?ut:E.x,C.y=Dt?gt:E.y,E.x=C.x,E.y=C.y,O.length>0)){const Yt=ut-D,qt=gt-B;for(const xe of O)xe.position={x:xe.position.x-Yt+P[0]*(tt-$),y:xe.position.y-qt+P[1]*(rt-q)},Y.push(xe)}if((dt||pt)&&(C.width=dt?tt:E.width,C.height=pt?rt:E.height,E.width=C.width,E.height=C.height),_&&z.expandParent){const Yt=P[0]*(C.width??0);C.x&&C.x<Yt&&(E.x=Yt,I.x=I.x-(C.x-Yt));const qt=P[1]*(C.height??0);C.y&&C.y<qt&&(E.y=qt,I.y=I.y-(C.y-qt))}const Vt=_I({width:E.width,prevWidth:$,height:E.height,prevHeight:q,affectsX:k.affectsX,affectsY:k.affectsY}),Ot={...E,direction:Vt};(x==null?void 0:x(F,Ot))!==!1&&(v==null||v(F,Ot),i(C,Y))}).on("end",F=>{S==null||S(F,{...E}),a==null||a()});l.call(W)}function d(){l.on(".drag",null)}return{update:c,destroy:d}}var _m={exports:{}},Um={},qm={exports:{}},Pm={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ab;function VI(){if(Ab)return Pm;Ab=1;var n=Gu();function t(w,v){return w===v&&(w!==0||1/w===1/v)||w!==w&&v!==v}var e=typeof Object.is=="function"?Object.is:t,i=n.useState,a=n.useEffect,l=n.useLayoutEffect,c=n.useDebugValue;function d(w,v){var S=v(),x=i({inst:{value:S,getSnapshot:v}}),E=x[0].inst,I=x[1];return l(function(){E.value=S,E.getSnapshot=v,h(E)&&I({inst:E})},[w,S,v]),a(function(){return h(E)&&I({inst:E}),w(function(){h(E)&&I({inst:E})})},[w]),c(S),S}function h(w){var v=w.getSnapshot;w=w.value;try{var S=v();return!e(w,S)}catch{return!0}}function g(w,v){return v()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?g:d;return Pm.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:p,Pm}var Eb;function jI(){return Eb||(Eb=1,qm.exports=VI()),qm.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nb;function YI(){if(Nb)return Um;Nb=1;var n=Gu(),t=jI();function e(g,p){return g===p&&(g!==0||1/g===1/p)||g!==g&&p!==p}var i=typeof Object.is=="function"?Object.is:e,a=t.useSyncExternalStore,l=n.useRef,c=n.useEffect,d=n.useMemo,h=n.useDebugValue;return Um.useSyncExternalStoreWithSelector=function(g,p,w,v,S){var x=l(null);if(x.current===null){var E={hasValue:!1,value:null};x.current=E}else E=x.current;x=d(function(){function k(J){if(!z){if(z=!0,N=J,J=v(J),S!==void 0&&E.hasValue){var U=E.value;if(S(U,J))return O=U}return O=J}if(U=O,i(N,J))return U;var W=v(J);return S!==void 0&&S(U,W)?(N=J,U):(N=J,O=W)}var z=!1,N,O,_=w===void 0?null:w;return[function(){return k(p())},_===null?void 0:function(){return k(_())}]},[p,w,v,S]);var I=a(g,x[0],x[1]);return c(function(){E.hasValue=!0,E.value=I},[I]),h(I),I},Um}var Cb;function GI(){return Cb||(Cb=1,_m.exports=YI()),_m.exports}var XI=GI();const KI=Qb(XI),FI={},Db=n=>{let t;const e=new Set,i=(p,w)=>{const v=typeof p=="function"?p(t):p;if(!Object.is(v,t)){const S=t;t=w??(typeof v!="object"||v===null)?v:Object.assign({},t,v),e.forEach(x=>x(t,S))}},a=()=>t,h={setState:i,getState:a,getInitialState:()=>g,subscribe:p=>(e.add(p),()=>e.delete(p)),destroy:()=>{(FI?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),e.clear()}},g=t=n(i,a,h);return h},ZI=n=>n?Db(n):Db,{useDebugValue:QI}=uN,{useSyncExternalStoreWithSelector:WI}=KI,tR=n=>n;function gT(n,t=tR,e){const i=WI(n.subscribe,n.getState,n.getServerState||n.getInitialState,t,e);return QI(i),i}const kb=(n,t)=>{const e=ZI(n),i=(a,l=t)=>gT(e,a,l);return Object.assign(i,e),i},eR=(n,t)=>n?kb(n,t):kb;function he(n,t){if(Object.is(n,t))return!0;if(typeof n!="object"||n===null||typeof t!="object"||t===null)return!1;if(n instanceof Map&&t instanceof Map){if(n.size!==t.size)return!1;for(const[i,a]of n)if(!Object.is(a,t.get(i)))return!1;return!0}if(n instanceof Set&&t instanceof Set){if(n.size!==t.size)return!1;for(const i of n)if(!t.has(i))return!1;return!0}const e=Object.keys(n);if(e.length!==Object.keys(t).length)return!1;for(const i of e)if(!Object.prototype.hasOwnProperty.call(t,i)||!Object.is(n[i],t[i]))return!1;return!0}Wb();const th=et.createContext(null),nR=th.Provider,mT=Cr.error001();function $t(n,t){const e=et.useContext(th);if(e===null)throw new Error(mT);return gT(e,n,t)}function ae(){const n=et.useContext(th);if(n===null)throw new Error(mT);return et.useMemo(()=>({getState:n.getState,setState:n.setState,subscribe:n.subscribe}),[n])}const Ob={display:"none"},rR={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},pT="react-flow__node-desc",yT="react-flow__edge-desc",iR="react-flow__aria-live",sR=n=>n.ariaLiveMessage;function aR({rfId:n}){const t=$t(sR);return Q.jsx("div",{id:`${iR}-${n}`,"aria-live":"assertive","aria-atomic":"true",style:rR,children:t})}function oR({rfId:n,disableKeyboardA11y:t}){return Q.jsxs(Q.Fragment,{children:[Q.jsxs("div",{id:`${pT}-${n}`,style:Ob,children:["Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "]}),Q.jsx("div",{id:`${yT}-${n}`,style:Ob,children:"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."}),!t&&Q.jsx(aR,{rfId:n})]})}const lR=n=>n.userSelectionActive?"none":"all",eh=et.forwardRef(({position:n="top-left",children:t,className:e,style:i,...a},l)=>{const c=$t(lR),d=`${n}`.split("-");return Q.jsx("div",{className:be(["react-flow__panel",e,...d]),style:{...i,pointerEvents:c},ref:l,...a,children:t})});eh.displayName="Panel";function uR({proOptions:n,position:t="bottom-right"}){return n!=null&&n.hideAttribution?null:Q.jsx(eh,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:Q.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const cR=n=>{const t=[],e=[];for(const[,i]of n.nodeLookup)i.selected&&t.push(i.internals.userNode);for(const[,i]of n.edgeLookup)i.selected&&e.push(i);return{selectedNodes:t,selectedEdges:e}},Uf=n=>n.id;function fR(n,t){return he(n.selectedNodes.map(Uf),t.selectedNodes.map(Uf))&&he(n.selectedEdges.map(Uf),t.selectedEdges.map(Uf))}function dR({onSelectionChange:n}){const t=ae(),{selectedNodes:e,selectedEdges:i}=$t(cR,fR);return et.useEffect(()=>{const a={nodes:e,edges:i};n==null||n(a),t.getState().onSelectionChangeHandlers.forEach(l=>l(a))},[e,i,n]),null}const hR=n=>!!n.onSelectionChangeHandlers;function gR({onSelectionChange:n}){const t=$t(hR);return n||t?Q.jsx(dR,{onSelectionChange:n}):null}const vT=[0,0],mR={x:0,y:0,zoom:1},pR=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","onBeforeDelete","debug","autoPanSpeed","paneClickDistance"],Ib=[...pR,"rfId"],yR=n=>({setNodes:n.setNodes,setEdges:n.setEdges,setMinZoom:n.setMinZoom,setMaxZoom:n.setMaxZoom,setTranslateExtent:n.setTranslateExtent,setNodeExtent:n.setNodeExtent,reset:n.reset,setDefaultNodesAndEdges:n.setDefaultNodesAndEdges,setPaneClickDistance:n.setPaneClickDistance}),Rb={translateExtent:$u,nodeOrigin:vT,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1",paneClickDistance:0};function vR(n){const{setNodes:t,setEdges:e,setMinZoom:i,setMaxZoom:a,setTranslateExtent:l,setNodeExtent:c,reset:d,setDefaultNodesAndEdges:h,setPaneClickDistance:g}=$t(yR,he),p=ae();et.useEffect(()=>(h(n.defaultNodes,n.defaultEdges),()=>{w.current=Rb,d()}),[]);const w=et.useRef(Rb);return et.useEffect(()=>{for(const v of Ib){const S=n[v],x=w.current[v];S!==x&&(typeof n[v]>"u"||(v==="nodes"?t(S):v==="edges"?e(S):v==="minZoom"?i(S):v==="maxZoom"?a(S):v==="translateExtent"?l(S):v==="nodeExtent"?c(S):v==="paneClickDistance"?g(S):v==="fitView"?p.setState({fitViewQueued:S}):v==="fitViewOptions"?p.setState({fitViewOptions:S}):p.setState({[v]:S})))}w.current=n},Ib.map(v=>n[v])),null}function Mb(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function wR(n){var i;const[t,e]=et.useState(n==="system"?null:n);return et.useEffect(()=>{if(n!=="system"){e(n);return}const a=Mb(),l=()=>e(a!=null&&a.matches?"dark":"light");return l(),a==null||a.addEventListener("change",l),()=>{a==null||a.removeEventListener("change",l)}},[n]),t!==null?t:(i=Mb())!=null&&i.matches?"dark":"light"}const Bb=typeof document<"u"?document:null;function Yu(n=null,t={target:Bb,actInsideInputWithModifier:!0}){const[e,i]=et.useState(!1),a=et.useRef(!1),l=et.useRef(new Set([])),[c,d]=et.useMemo(()=>{if(n!==null){const g=(Array.isArray(n)?n:[n]).filter(w=>typeof w=="string").map(w=>w.replace("+",`
`).replace(`

`,`
+`).split(`
`)),p=g.reduce((w,v)=>w.concat(...v),[]);return[g,p]}return[[],[]]},[n]);return et.useEffect(()=>{const h=(t==null?void 0:t.target)||Bb;if(n!==null){const g=v=>{var E,I;if(a.current=v.ctrlKey||v.metaKey||v.shiftKey||v.altKey,(!a.current||a.current&&!t.actInsideInputWithModifier)&&Qx(v))return!1;const x=Lb(v.code,d);if(l.current.add(v[x]),zb(c,l.current,!1)){const k=((I=(E=v.composedPath)==null?void 0:E.call(v))==null?void 0:I[0])||v.target,z=(k==null?void 0:k.nodeName)==="BUTTON"||(k==null?void 0:k.nodeName)==="A";t.preventDefault!==!1&&(a.current||!z)&&v.preventDefault(),i(!0)}},p=v=>{const S=Lb(v.code,d);zb(c,l.current,!0)?(i(!1),l.current.clear()):l.current.delete(v[S]),v.key==="Meta"&&l.current.clear(),a.current=!1},w=()=>{l.current.clear(),i(!1)};return h==null||h.addEventListener("keydown",g),h==null||h.addEventListener("keyup",p),window.addEventListener("blur",w),window.addEventListener("contextmenu",w),()=>{h==null||h.removeEventListener("keydown",g),h==null||h.removeEventListener("keyup",p),window.removeEventListener("blur",w),window.removeEventListener("contextmenu",w)}}},[n,i]),e}function zb(n,t,e){return n.filter(i=>e||i.length===t.size).some(i=>i.every(a=>t.has(a)))}function Lb(n,t){return t.includes(n)?"code":"key"}const SR=()=>{const n=ae();return et.useMemo(()=>({zoomIn:t=>{const{panZoom:e}=n.getState();return e?e.scaleBy(1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomOut:t=>{const{panZoom:e}=n.getState();return e?e.scaleBy(1/1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomTo:(t,e)=>{const{panZoom:i}=n.getState();return i?i.scaleTo(t,{duration:e==null?void 0:e.duration}):Promise.resolve(!1)},getZoom:()=>n.getState().transform[2],setViewport:async(t,e)=>{const{transform:[i,a,l],panZoom:c}=n.getState();return c?(await c.setViewport({x:t.x??i,y:t.y??a,zoom:t.zoom??l},{duration:e==null?void 0:e.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[t,e,i]=n.getState().transform;return{x:t,y:e,zoom:i}},setCenter:async(t,e,i)=>{const{width:a,height:l,maxZoom:c,panZoom:d}=n.getState(),h=typeof(i==null?void 0:i.zoom)<"u"?i.zoom:c,g=a/2-t*h,p=l/2-e*h;return d?(await d.setViewport({x:g,y:p,zoom:h},{duration:i==null?void 0:i.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitBounds:async(t,e)=>{const{width:i,height:a,minZoom:l,maxZoom:c,panZoom:d}=n.getState(),h=ay(t,i,a,l,c,(e==null?void 0:e.padding)??.1);return d?(await d.setViewport(h,{duration:e==null?void 0:e.duration}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,e={})=>{const{transform:i,snapGrid:a,snapToGrid:l,domNode:c}=n.getState();if(!c)return t;const{x:d,y:h}=c.getBoundingClientRect(),g={x:t.x-d,y:t.y-h},p=e.snapGrid??a,w=e.snapToGrid??l;return rc(g,i,w,p)},flowToScreenPosition:t=>{const{transform:e,domNode:i}=n.getState();if(!i)return t;const{x:a,y:l}=i.getBoundingClientRect(),c=Rd(t,e);return{x:c.x+a,y:c.y+l}}}),[])};function wT(n,t){const e=[],i=new Map,a=[];for(const l of n)if(l.type==="add"){a.push(l);continue}else if(l.type==="remove"||l.type==="replace")i.set(l.id,[l]);else{const c=i.get(l.id);c?c.push(l):i.set(l.id,[l])}for(const l of t){const c=i.get(l.id);if(!c){e.push(l);continue}if(c[0].type==="remove")continue;if(c[0].type==="replace"){e.push({...c[0].item});continue}const d={...l};for(const h of c)bR(h,d);e.push(d)}return a.length&&a.forEach(l=>{l.index!==void 0?e.splice(l.index,0,{...l.item}):e.push({...l.item})}),e}function bR(n,t){switch(n.type){case"select":{t.selected=n.selected;break}case"position":{typeof n.position<"u"&&(t.position=n.position),typeof n.dragging<"u"&&(t.dragging=n.dragging);break}case"dimensions":{typeof n.dimensions<"u"&&(t.measured??(t.measured={}),t.measured.width=n.dimensions.width,t.measured.height=n.dimensions.height,n.setAttributes&&(t.width=n.dimensions.width,t.height=n.dimensions.height)),typeof n.resizing=="boolean"&&(t.resizing=n.resizing);break}}}function xR(n,t){return wT(n,t)}function TR(n,t){return wT(n,t)}function Na(n,t){return{id:n,type:"select",selected:t}}function Lo(n,t=new Set,e=!1){const i=[];for(const[a,l]of n){const c=t.has(a);!(l.selected===void 0&&!c)&&l.selected!==c&&(e&&(l.selected=c),i.push(Na(l.id,c)))}return i}function _b({items:n=[],lookup:t}){var a;const e=[],i=new Map(n.map(l=>[l.id,l]));for(const[l,c]of n.entries()){const d=t.get(c.id),h=((a=d==null?void 0:d.internals)==null?void 0:a.userNode)??d;h!==void 0&&h!==c&&e.push({id:c.id,item:c,type:"replace"}),h===void 0&&e.push({item:c,type:"add",index:l})}for(const[l]of t)i.get(l)===void 0&&e.push({id:l,type:"remove"});return e}function Ub(n){return{id:n.id,type:"remove"}}const qb=n=>KO(n),AR=n=>Hx(n);function ST(n){return et.forwardRef(n)}const ER=typeof window<"u"?et.useLayoutEffect:et.useEffect;function Pb(n){const[t,e]=et.useState(BigInt(0)),[i]=et.useState(()=>NR(()=>e(a=>a+BigInt(1))));return ER(()=>{const a=i.get();a.length&&(n(a),i.reset())},[t]),i}function NR(n){let t=[];return{get:()=>t,reset:()=>{t=[]},push:e=>{t.push(e),n()}}}const bT=et.createContext(null);function CR({children:n}){const t=ae(),e=et.useCallback(d=>{const{nodes:h=[],setNodes:g,hasDefaultNodes:p,onNodesChange:w,nodeLookup:v}=t.getState();let S=h;for(const x of d)S=typeof x=="function"?x(S):x;p?g(S):w&&w(_b({items:S,lookup:v}))},[]),i=Pb(e),a=et.useCallback(d=>{const{edges:h=[],setEdges:g,hasDefaultEdges:p,onEdgesChange:w,edgeLookup:v}=t.getState();let S=h;for(const x of d)S=typeof x=="function"?x(S):x;p?g(S):w&&w(_b({items:S,lookup:v}))},[]),l=Pb(a),c=et.useMemo(()=>({nodeQueue:i,edgeQueue:l}),[]);return Q.jsx(bT.Provider,{value:c,children:n})}function DR(){const n=et.useContext(bT);if(!n)throw new Error("useBatchContext must be used within a BatchProvider");return n}const kR=n=>!!n.panZoom;function dy(){const n=SR(),t=ae(),e=DR(),i=$t(kR),a=et.useMemo(()=>{const l=w=>t.getState().nodeLookup.get(w),c=w=>{e.nodeQueue.push(w)},d=w=>{e.edgeQueue.push(w)},h=w=>{var k,z;const{nodeLookup:v,nodeOrigin:S}=t.getState(),x=qb(w)?w:v.get(w.id),E=x.parentId?Fx(x.position,x.measured,x.parentId,v,S):x.position,I={...x,position:E,width:((k=x.measured)==null?void 0:k.width)??x.width,height:((z=x.measured)==null?void 0:z.height)??x.height};return nl(I)},g=(w,v,S={replace:!1})=>{c(x=>x.map(E=>{if(E.id===w){const I=typeof v=="function"?v(E):v;return S.replace&&qb(I)?I:{...E,...I}}return E}))},p=(w,v,S={replace:!1})=>{d(x=>x.map(E=>{if(E.id===w){const I=typeof v=="function"?v(E):v;return S.replace&&AR(I)?I:{...E,...I}}return E}))};return{getNodes:()=>t.getState().nodes.map(w=>({...w})),getNode:w=>{var v;return(v=l(w))==null?void 0:v.internals.userNode},getInternalNode:l,getEdges:()=>{const{edges:w=[]}=t.getState();return w.map(v=>({...v}))},getEdge:w=>t.getState().edgeLookup.get(w),setNodes:c,setEdges:d,addNodes:w=>{const v=Array.isArray(w)?w:[w];e.nodeQueue.push(S=>[...S,...v])},addEdges:w=>{const v=Array.isArray(w)?w:[w];e.edgeQueue.push(S=>[...S,...v])},toObject:()=>{const{nodes:w=[],edges:v=[],transform:S}=t.getState(),[x,E,I]=S;return{nodes:w.map(k=>({...k})),edges:v.map(k=>({...k})),viewport:{x,y:E,zoom:I}}},deleteElements:async({nodes:w=[],edges:v=[]})=>{const{nodes:S,edges:x,onNodesDelete:E,onEdgesDelete:I,triggerNodeChanges:k,triggerEdgeChanges:z,onDelete:N,onBeforeDelete:O}=t.getState(),{nodes:_,edges:J}=await tI({nodesToRemove:w,edgesToRemove:v,nodes:S,edges:x,onBeforeDelete:O}),U=J.length>0,W=_.length>0;if(U){const F=J.map(Ub);I==null||I(J),z(F)}if(W){const F=_.map(Ub);E==null||E(_),k(F)}return(W||U)&&(N==null||N({nodes:_,edges:J})),{deletedNodes:_,deletedEdges:J}},getIntersectingNodes:(w,v=!0,S)=>{const x=db(w),E=x?w:h(w),I=S!==void 0;return E?(S||t.getState().nodes).filter(k=>{const z=t.getState().nodeLookup.get(k.id);if(z&&!x&&(k.id===w.id||!z.internals.positionAbsolute))return!1;const N=nl(I?k:z),O=Vu(N,E);return v&&O>0||O>=E.width*E.height}):[]},isNodeIntersecting:(w,v,S=!0)=>{const E=db(w)?w:h(w);if(!E)return!1;const I=Vu(E,v);return S&&I>0||I>=E.width*E.height},updateNode:g,updateNodeData:(w,v,S={replace:!1})=>{g(w,x=>{const E=typeof v=="function"?v(x):v;return S.replace?{...x,data:E}:{...x,data:{...x.data,...E}}},S)},updateEdge:p,updateEdgeData:(w,v,S={replace:!1})=>{p(w,x=>{const E=typeof v=="function"?v(x):v;return S.replace?{...x,data:E}:{...x,data:{...x.data,...E}}},S)},getNodesBounds:w=>{const{nodeLookup:v,nodeOrigin:S}=t.getState();return FO(w,{nodeLookup:v,nodeOrigin:S})},getHandleConnections:({type:w,id:v,nodeId:S})=>{var x;return Array.from(((x=t.getState().connectionLookup.get(`${S}-${w}${v?`-${v}`:""}`))==null?void 0:x.values())??[])},getNodeConnections:({type:w,handleId:v,nodeId:S})=>{var x;return Array.from(((x=t.getState().connectionLookup.get(`${S}${w?v?`-${w}-${v}`:`-${w}`:""}`))==null?void 0:x.values())??[])},fitView:async w=>{const v=t.getState().fitViewResolver??Promise.withResolvers();return t.setState({fitViewQueued:!0,fitViewOptions:w,fitViewResolver:v}),e.nodeQueue.push(S=>[...S]),v.promise}}},[]);return et.useMemo(()=>({...a,...n,viewportInitialized:i}),[i])}const Jb=n=>n.selected,OR={actInsideInputWithModifier:!1},IR=typeof window<"u"?window:void 0;function RR({deleteKeyCode:n,multiSelectionKeyCode:t}){const e=ae(),{deleteElements:i}=dy(),a=Yu(n,OR),l=Yu(t,{target:IR});et.useEffect(()=>{if(a){const{edges:c,nodes:d}=e.getState();i({nodes:d.filter(Jb),edges:c.filter(Jb)}),e.setState({nodesSelectionActive:!1})}},[a]),et.useEffect(()=>{e.setState({multiSelectionActive:l})},[l])}function MR(n){const t=ae();et.useEffect(()=>{const e=()=>{var a,l;if(!n.current)return!1;const i=oy(n.current);(i.height===0||i.width===0)&&((l=(a=t.getState()).onError)==null||l.call(a,"004",Cr.error004())),t.setState({width:i.width||500,height:i.height||500})};if(n.current){e(),window.addEventListener("resize",e);const i=new ResizeObserver(()=>e());return i.observe(n.current),()=>{window.removeEventListener("resize",e),i&&n.current&&i.unobserve(n.current)}}},[])}const nh={position:"absolute",width:"100%",height:"100%",top:0,left:0},BR=n=>({userSelectionActive:n.userSelectionActive,lib:n.lib});function zR({onPaneContextMenu:n,zoomOnScroll:t=!0,zoomOnPinch:e=!0,panOnScroll:i=!1,panOnScrollSpeed:a=.5,panOnScrollMode:l=Ra.Free,zoomOnDoubleClick:c=!0,panOnDrag:d=!0,defaultViewport:h,translateExtent:g,minZoom:p,maxZoom:w,zoomActivationKeyCode:v,preventScrolling:S=!0,children:x,noWheelClassName:E,noPanClassName:I,onViewportChange:k,isControlledViewport:z,paneClickDistance:N}){const O=ae(),_=et.useRef(null),{userSelectionActive:J,lib:U}=$t(BR,he),W=Yu(v),F=et.useRef();MR(_);const nt=et.useCallback(ft=>{k==null||k({x:ft[0],y:ft[1],zoom:ft[2]}),z||O.setState({transform:ft})},[k,z]);return et.useEffect(()=>{if(_.current){F.current=LI({domNode:_.current,minZoom:p,maxZoom:w,translateExtent:g,viewport:h,paneClickDistance:N,onDraggingChange:R=>O.setState({paneDragging:R}),onPanZoomStart:(R,Y)=>{const{onViewportChangeStart:D,onMoveStart:B}=O.getState();B==null||B(R,Y),D==null||D(Y)},onPanZoom:(R,Y)=>{const{onViewportChange:D,onMove:B}=O.getState();B==null||B(R,Y),D==null||D(Y)},onPanZoomEnd:(R,Y)=>{const{onViewportChangeEnd:D,onMoveEnd:B}=O.getState();B==null||B(R,Y),D==null||D(Y)}});const{x:ft,y:ot,zoom:ct}=F.current.getViewport();return O.setState({panZoom:F.current,transform:[ft,ot,ct],domNode:_.current.closest(".react-flow")}),()=>{var R;(R=F.current)==null||R.destroy()}}},[]),et.useEffect(()=>{var ft;(ft=F.current)==null||ft.update({onPaneContextMenu:n,zoomOnScroll:t,zoomOnPinch:e,panOnScroll:i,panOnScrollSpeed:a,panOnScrollMode:l,zoomOnDoubleClick:c,panOnDrag:d,zoomActivationKeyPressed:W,preventScrolling:S,noPanClassName:I,userSelectionActive:J,noWheelClassName:E,lib:U,onTransformChange:nt})},[n,t,e,i,a,l,c,d,W,S,I,J,E,U,nt]),Q.jsx("div",{className:"react-flow__renderer",ref:_,style:nh,children:x})}const LR=n=>({userSelectionActive:n.userSelectionActive,userSelectionRect:n.userSelectionRect});function _R(){const{userSelectionActive:n,userSelectionRect:t}=$t(LR,he);return n&&t?Q.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}const Jm=(n,t)=>e=>{e.target===t.current&&(n==null||n(e))},UR=n=>({userSelectionActive:n.userSelectionActive,elementsSelectable:n.elementsSelectable,connectionInProgress:n.connection.inProgress,dragging:n.paneDragging});function qR({isSelecting:n,selectionKeyPressed:t,selectionMode:e=Hu.Full,panOnDrag:i,selectionOnDrag:a,onSelectionStart:l,onSelectionEnd:c,onPaneClick:d,onPaneContextMenu:h,onPaneScroll:g,onPaneMouseEnter:p,onPaneMouseMove:w,onPaneMouseLeave:v,children:S}){const x=ae(),{userSelectionActive:E,elementsSelectable:I,dragging:k,connectionInProgress:z}=$t(UR,he),N=I&&(n||E),O=et.useRef(null),_=et.useRef(),J=et.useRef(new Set),U=et.useRef(new Set),W=et.useRef(!1),F=et.useRef(!1),nt=B=>{if(W.current||z){W.current=!1;return}d==null||d(B),x.getState().resetSelectedElements(),x.setState({nodesSelectionActive:!1})},ft=B=>{if(Array.isArray(i)&&(i!=null&&i.includes(2))){B.preventDefault();return}h==null||h(B)},ot=g?B=>g(B):void 0,ct=B=>{var tt,rt;const{resetSelectedElements:$,domNode:q}=x.getState();if(_.current=q==null?void 0:q.getBoundingClientRect(),!I||!n||B.button!==0||B.target!==O.current||!_.current)return;(rt=(tt=B.target)==null?void 0:tt.setPointerCapture)==null||rt.call(tt,B.pointerId),F.current=!0,W.current=!1;const{x:C,y:P}=os(B.nativeEvent,_.current);$(),x.setState({userSelectionRect:{width:0,height:0,startX:C,startY:P,x:C,y:P}}),l==null||l(B)},R=B=>{const{userSelectionRect:$,transform:q,nodeLookup:C,edgeLookup:P,connectionLookup:tt,triggerNodeChanges:rt,triggerEdgeChanges:ut,defaultEdgeOptions:gt}=x.getState();if(!_.current||!$)return;W.current=!0;const{x:dt,y:pt}=os(B.nativeEvent,_.current),{startX:yt,startY:Dt}=$,Vt={startX:yt,startY:Dt,x:dt<yt?dt:yt,y:pt<Dt?pt:Dt,width:Math.abs(dt-yt),height:Math.abs(pt-Dt)},Ot=J.current,Tt=U.current;J.current=new Set(Vx(C,Vt,q,e===Hu.Partial,!0).map(qt=>qt.id)),U.current=new Set;const Yt=(gt==null?void 0:gt.selectable)??!0;for(const qt of J.current){const xe=tt.get(qt);if(xe)for(const{edgeId:an}of xe.values()){const Oe=P.get(an);Oe&&(Oe.selectable??Yt)&&U.current.add(an)}}if(!hb(Ot,J.current)){const qt=Lo(C,J.current,!0);rt(qt)}if(!hb(Tt,U.current)){const qt=Lo(P,U.current);ut(qt)}x.setState({userSelectionRect:Vt,userSelectionActive:!0,nodesSelectionActive:!1})},Y=B=>{var q,C;if(B.button!==0||!F.current)return;(C=(q=B.target)==null?void 0:q.releasePointerCapture)==null||C.call(q,B.pointerId);const{userSelectionRect:$}=x.getState();!E&&$&&B.target===O.current&&(nt==null||nt(B)),x.setState({userSelectionActive:!1,userSelectionRect:null,nodesSelectionActive:J.current.size>0}),c==null||c(B),(t||a)&&(W.current=!1),F.current=!1},D=i===!0||Array.isArray(i)&&i.includes(0);return Q.jsxs("div",{className:be(["react-flow__pane",{draggable:D,dragging:k,selection:n}]),onClick:N?void 0:Jm(nt,O),onContextMenu:Jm(ft,O),onWheel:Jm(ot,O),onPointerEnter:N?void 0:p,onPointerDown:N?ct:w,onPointerMove:N?R:w,onPointerUp:N?Y:void 0,onPointerLeave:v,ref:O,style:nh,children:[S,Q.jsx(_R,{})]})}function Rp({id:n,store:t,unselect:e=!1,nodeRef:i}){const{addSelectedNodes:a,unselectNodesAndEdges:l,multiSelectionActive:c,nodeLookup:d,onError:h}=t.getState(),g=d.get(n);if(!g){h==null||h("012",Cr.error012(n));return}t.setState({nodesSelectionActive:!1}),g.selected?(e||g.selected&&c)&&(l({nodes:[g],edges:[]}),requestAnimationFrame(()=>{var p;return(p=i==null?void 0:i.current)==null?void 0:p.blur()})):a([n])}function xT({nodeRef:n,disabled:t=!1,noDragClassName:e,handleSelector:i,nodeId:a,isSelectable:l,nodeClickDistance:c}){const d=ae(),[h,g]=et.useState(!1),p=et.useRef();return et.useEffect(()=>{p.current=xI({getStoreItems:()=>d.getState(),onNodeMouseDown:w=>{Rp({id:w,store:d,nodeRef:n})},onDragStart:()=>{g(!0)},onDragStop:()=>{g(!1)}})},[]),et.useEffect(()=>{var w,v;if(t)(w=p.current)==null||w.destroy();else if(n.current)return(v=p.current)==null||v.update({noDragClassName:e,handleSelector:i,domNode:n.current,isSelectable:l,nodeId:a,nodeClickDistance:c}),()=>{var S;(S=p.current)==null||S.destroy()}},[e,i,t,l,n,a]),h}const PR=n=>t=>t.selected&&(t.draggable||n&&typeof t.draggable>"u");function TT(){const n=ae();return et.useCallback(e=>{const{nodeExtent:i,snapToGrid:a,snapGrid:l,nodesDraggable:c,onError:d,updateNodePositions:h,nodeLookup:g,nodeOrigin:p}=n.getState(),w=new Map,v=PR(c),S=a?l[0]:5,x=a?l[1]:5,E=e.direction.x*S*e.factor,I=e.direction.y*x*e.factor;for(const[,k]of g){if(!v(k))continue;let z={x:k.internals.positionAbsolute.x+E,y:k.internals.positionAbsolute.y+I};a&&(z=Qd(z,l));const{position:N,positionAbsolute:O}=jx({nodeId:k.id,nextPosition:z,nodeLookup:g,nodeExtent:i,nodeOrigin:p,onError:d});k.position=N,k.internals.positionAbsolute=O,w.set(k.id,k)}h(w)},[])}const hy=et.createContext(null),JR=hy.Provider;hy.Consumer;const AT=()=>et.useContext(hy),$R=n=>({connectOnClick:n.connectOnClick,noPanClassName:n.noPanClassName,rfId:n.rfId}),HR=(n,t,e)=>i=>{const{connectionClickStartHandle:a,connectionMode:l,connection:c}=i,{fromHandle:d,toHandle:h,isValid:g}=c,p=(h==null?void 0:h.nodeId)===n&&(h==null?void 0:h.id)===t&&(h==null?void 0:h.type)===e;return{connectingFrom:(d==null?void 0:d.nodeId)===n&&(d==null?void 0:d.id)===t&&(d==null?void 0:d.type)===e,connectingTo:p,clickConnecting:(a==null?void 0:a.nodeId)===n&&(a==null?void 0:a.id)===t&&(a==null?void 0:a.type)===e,isPossibleEndHandle:l===tl.Strict?(d==null?void 0:d.type)!==e:n!==(d==null?void 0:d.nodeId)||t!==(d==null?void 0:d.id),connectionInProcess:!!d,clickConnectionInProcess:!!a,valid:p&&g}};function VR({type:n="source",position:t=Et.Top,isValidConnection:e,isConnectable:i=!0,isConnectableStart:a=!0,isConnectableEnd:l=!0,id:c,onConnect:d,children:h,className:g,onMouseDown:p,onTouchStart:w,...v},S){var Y,D;const x=c||null,E=n==="target",I=ae(),k=AT(),{connectOnClick:z,noPanClassName:N,rfId:O}=$t($R,he),{connectingFrom:_,connectingTo:J,clickConnecting:U,isPossibleEndHandle:W,connectionInProcess:F,clickConnectionInProcess:nt,valid:ft}=$t(HR(k,x,n),he);k||(D=(Y=I.getState()).onError)==null||D.call(Y,"010",Cr.error010());const ot=B=>{const{defaultEdgeOptions:$,onConnect:q,hasDefaultEdges:C}=I.getState(),P={...$,...B};if(C){const{edges:tt,setEdges:rt}=I.getState();rt(uI(P,tt))}q==null||q(P),d==null||d(P)},ct=B=>{if(!k)return;const $=Wx(B.nativeEvent);if(a&&($&&B.button===0||!$)){const q=I.getState();Ip.onPointerDown(B.nativeEvent,{autoPanOnConnect:q.autoPanOnConnect,connectionMode:q.connectionMode,connectionRadius:q.connectionRadius,domNode:q.domNode,nodeLookup:q.nodeLookup,lib:q.lib,isTarget:E,handleId:x,nodeId:k,flowId:q.rfId,panBy:q.panBy,cancelConnection:q.cancelConnection,onConnectStart:q.onConnectStart,onConnectEnd:q.onConnectEnd,updateConnection:q.updateConnection,onConnect:ot,isValidConnection:e||q.isValidConnection,getTransform:()=>I.getState().transform,getFromHandle:()=>I.getState().connection.fromHandle,autoPanSpeed:q.autoPanSpeed})}$?p==null||p(B):w==null||w(B)},R=B=>{const{onClickConnectStart:$,onClickConnectEnd:q,connectionClickStartHandle:C,connectionMode:P,isValidConnection:tt,lib:rt,rfId:ut,nodeLookup:gt,connection:dt}=I.getState();if(!k||!C&&!a)return;if(!C){$==null||$(B.nativeEvent,{nodeId:k,handleId:x,handleType:n}),I.setState({connectionClickStartHandle:{nodeId:k,type:n,id:x}});return}const pt=Zx(B.target),yt=e||tt,{connection:Dt,isValid:Vt}=Ip.isValid(B.nativeEvent,{handle:{nodeId:k,id:x,type:n},connectionMode:P,fromNodeId:C.nodeId,fromHandleId:C.id||null,fromType:C.type,isValidConnection:yt,flowId:ut,doc:pt,lib:rt,nodeLookup:gt});Vt&&Dt&&ot(Dt);const Ot=structuredClone(dt);delete Ot.inProgress,Ot.toPosition=Ot.toHandle?Ot.toHandle.position:null,q==null||q(B,Ot),I.setState({connectionClickStartHandle:null})};return Q.jsx("div",{"data-handleid":x,"data-nodeid":k,"data-handlepos":t,"data-id":`${O}-${k}-${x}-${n}`,className:be(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",N,g,{source:!E,target:E,connectable:i,connectablestart:a,connectableend:l,clickconnecting:U,connectingfrom:_,connectingto:J,valid:ft,connectionindicator:i&&(!F||W)&&(F||nt?l:a)}]),onMouseDown:ct,onTouchStart:ct,onClick:z?R:void 0,ref:S,...v,children:h})}const Bd=et.memo(ST(VR));function jR({data:n,isConnectable:t,sourcePosition:e=Et.Bottom}){return Q.jsxs(Q.Fragment,{children:[n==null?void 0:n.label,Q.jsx(Bd,{type:"source",position:e,isConnectable:t})]})}function YR({data:n,isConnectable:t,targetPosition:e=Et.Top,sourcePosition:i=Et.Bottom}){return Q.jsxs(Q.Fragment,{children:[Q.jsx(Bd,{type:"target",position:e,isConnectable:t}),n==null?void 0:n.label,Q.jsx(Bd,{type:"source",position:i,isConnectable:t})]})}function GR(){return null}function XR({data:n,isConnectable:t,targetPosition:e=Et.Top}){return Q.jsxs(Q.Fragment,{children:[Q.jsx(Bd,{type:"target",position:e,isConnectable:t}),n==null?void 0:n.label]})}const zd={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},$b={input:jR,default:YR,output:XR,group:GR};function KR(n){var t,e,i,a;return n.internals.handleBounds===void 0?{width:n.width??n.initialWidth??((t=n.style)==null?void 0:t.width),height:n.height??n.initialHeight??((e=n.style)==null?void 0:e.height)}:{width:n.width??((i=n.style)==null?void 0:i.width),height:n.height??((a=n.style)==null?void 0:a.height)}}const FR=n=>{const{width:t,height:e,x:i,y:a}=nc(n.nodeLookup,{filter:l=>!!l.selected});return{width:tr(t)?t:null,height:tr(e)?e:null,userSelectionActive:n.userSelectionActive,transformString:`translate(${n.transform[0]}px,${n.transform[1]}px) scale(${n.transform[2]}) translate(${i}px,${a}px)`}};function ZR({onSelectionContextMenu:n,noPanClassName:t,disableKeyboardA11y:e}){const i=ae(),{width:a,height:l,transformString:c,userSelectionActive:d}=$t(FR,he),h=TT(),g=et.useRef(null);if(et.useEffect(()=>{var v;e||(v=g.current)==null||v.focus({preventScroll:!0})},[e]),xT({nodeRef:g}),d||!a||!l)return null;const p=n?v=>{const S=i.getState().nodes.filter(x=>x.selected);n(v,S)}:void 0,w=v=>{Object.prototype.hasOwnProperty.call(zd,v.key)&&(v.preventDefault(),h({direction:zd[v.key],factor:v.shiftKey?4:1}))};return Q.jsx("div",{className:be(["react-flow__nodesselection","react-flow__container",t]),style:{transform:c},children:Q.jsx("div",{ref:g,className:"react-flow__nodesselection-rect",onContextMenu:p,tabIndex:e?void 0:-1,onKeyDown:e?void 0:w,style:{width:a,height:l}})})}const Hb=typeof window<"u"?window:void 0,QR=n=>({nodesSelectionActive:n.nodesSelectionActive,userSelectionActive:n.userSelectionActive});function ET({children:n,onPaneClick:t,onPaneMouseEnter:e,onPaneMouseMove:i,onPaneMouseLeave:a,onPaneContextMenu:l,onPaneScroll:c,paneClickDistance:d,deleteKeyCode:h,selectionKeyCode:g,selectionOnDrag:p,selectionMode:w,onSelectionStart:v,onSelectionEnd:S,multiSelectionKeyCode:x,panActivationKeyCode:E,zoomActivationKeyCode:I,elementsSelectable:k,zoomOnScroll:z,zoomOnPinch:N,panOnScroll:O,panOnScrollSpeed:_,panOnScrollMode:J,zoomOnDoubleClick:U,panOnDrag:W,defaultViewport:F,translateExtent:nt,minZoom:ft,maxZoom:ot,preventScrolling:ct,onSelectionContextMenu:R,noWheelClassName:Y,noPanClassName:D,disableKeyboardA11y:B,onViewportChange:$,isControlledViewport:q}){const{nodesSelectionActive:C,userSelectionActive:P}=$t(QR),tt=Yu(g,{target:Hb}),rt=Yu(E,{target:Hb}),ut=rt||W,gt=rt||O,dt=p&&ut!==!0,pt=tt||P||dt;return RR({deleteKeyCode:h,multiSelectionKeyCode:x}),Q.jsx(zR,{onPaneContextMenu:l,elementsSelectable:k,zoomOnScroll:z,zoomOnPinch:N,panOnScroll:gt,panOnScrollSpeed:_,panOnScrollMode:J,zoomOnDoubleClick:U,panOnDrag:!tt&&ut,defaultViewport:F,translateExtent:nt,minZoom:ft,maxZoom:ot,zoomActivationKeyCode:I,preventScrolling:ct,noWheelClassName:Y,noPanClassName:D,onViewportChange:$,isControlledViewport:q,paneClickDistance:d,children:Q.jsxs(qR,{onSelectionStart:v,onSelectionEnd:S,onPaneClick:t,onPaneMouseEnter:e,onPaneMouseMove:i,onPaneMouseLeave:a,onPaneContextMenu:l,onPaneScroll:c,panOnDrag:ut,isSelecting:!!pt,selectionMode:w,selectionKeyPressed:tt,selectionOnDrag:dt,children:[n,C&&Q.jsx(ZR,{onSelectionContextMenu:R,noPanClassName:D,disableKeyboardA11y:B})]})})}ET.displayName="FlowRenderer";const WR=et.memo(ET),tM=n=>t=>n?Vx(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map(e=>e.id):Array.from(t.nodeLookup.keys());function eM(n){return $t(et.useCallback(tM(n),[n]),he)}const nM=n=>n.updateNodeInternals;function rM(){const n=$t(nM),[t]=et.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(e=>{const i=new Map;e.forEach(a=>{const l=a.target.getAttribute("data-id");i.set(l,{id:l,nodeElement:a.target,force:!0})}),n(i)}));return et.useEffect(()=>()=>{t==null||t.disconnect()},[t]),t}function iM({node:n,nodeType:t,hasDimensions:e,resizeObserver:i}){const a=ae(),l=et.useRef(null),c=et.useRef(null),d=et.useRef(n.sourcePosition),h=et.useRef(n.targetPosition),g=et.useRef(t),p=e&&!!n.internals.handleBounds;return et.useEffect(()=>{l.current&&!n.hidden&&(!p||c.current!==l.current)&&(c.current&&(i==null||i.unobserve(c.current)),i==null||i.observe(l.current),c.current=l.current)},[p,n.hidden]),et.useEffect(()=>()=>{c.current&&(i==null||i.unobserve(c.current),c.current=null)},[]),et.useEffect(()=>{if(l.current){const w=g.current!==t,v=d.current!==n.sourcePosition,S=h.current!==n.targetPosition;(w||v||S)&&(g.current=t,d.current=n.sourcePosition,h.current=n.targetPosition,a.getState().updateNodeInternals(new Map([[n.id,{id:n.id,nodeElement:l.current,force:!0}]])))}},[n.id,t,n.sourcePosition,n.targetPosition]),l}function sM({id:n,onClick:t,onMouseEnter:e,onMouseMove:i,onMouseLeave:a,onContextMenu:l,onDoubleClick:c,nodesDraggable:d,elementsSelectable:h,nodesConnectable:g,nodesFocusable:p,resizeObserver:w,noDragClassName:v,noPanClassName:S,disableKeyboardA11y:x,rfId:E,nodeTypes:I,nodeClickDistance:k,onError:z}){const{node:N,internals:O,isParent:_}=$t(pt=>{const yt=pt.nodeLookup.get(n),Dt=pt.parentLookup.has(n);return{node:yt,internals:yt.internals,isParent:Dt}},he);let J=N.type||"default",U=(I==null?void 0:I[J])||$b[J];U===void 0&&(z==null||z("003",Cr.error003(J)),J="default",U=$b.default);const W=!!(N.draggable||d&&typeof N.draggable>"u"),F=!!(N.selectable||h&&typeof N.selectable>"u"),nt=!!(N.connectable||g&&typeof N.connectable>"u"),ft=!!(N.focusable||p&&typeof N.focusable>"u"),ot=ae(),ct=Kx(N),R=iM({node:N,nodeType:J,hasDimensions:ct,resizeObserver:w}),Y=xT({nodeRef:R,disabled:N.hidden||!W,noDragClassName:v,handleSelector:N.dragHandle,nodeId:n,isSelectable:F,nodeClickDistance:k}),D=TT();if(N.hidden)return null;const B=ds(N),$=KR(N),q=F||W||t||e||i||a,C=e?pt=>e(pt,{...O.userNode}):void 0,P=i?pt=>i(pt,{...O.userNode}):void 0,tt=a?pt=>a(pt,{...O.userNode}):void 0,rt=l?pt=>l(pt,{...O.userNode}):void 0,ut=c?pt=>c(pt,{...O.userNode}):void 0,gt=pt=>{const{selectNodesOnDrag:yt,nodeDragThreshold:Dt}=ot.getState();F&&(!yt||!W||Dt>0)&&Rp({id:n,store:ot,nodeRef:R}),t&&t(pt,{...O.userNode})},dt=pt=>{if(!(Qx(pt.nativeEvent)||x))if(Px.includes(pt.key)&&F){const yt=pt.key==="Escape";Rp({id:n,store:ot,unselect:yt,nodeRef:R})}else W&&N.selected&&Object.prototype.hasOwnProperty.call(zd,pt.key)&&(pt.preventDefault(),ot.setState({ariaLiveMessage:`Moved selected node ${pt.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~O.positionAbsolute.x}, y: ${~~O.positionAbsolute.y}`}),D({direction:zd[pt.key],factor:pt.shiftKey?4:1}))};return Q.jsx("div",{className:be(["react-flow__node",`react-flow__node-${J}`,{[S]:W},N.className,{selected:N.selected,selectable:F,parent:_,draggable:W,dragging:Y}]),ref:R,style:{zIndex:O.z,transform:`translate(${O.positionAbsolute.x}px,${O.positionAbsolute.y}px)`,pointerEvents:q?"all":"none",visibility:ct?"visible":"hidden",...N.style,...$},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:C,onMouseMove:P,onMouseLeave:tt,onContextMenu:rt,onClick:gt,onDoubleClick:ut,onKeyDown:ft?dt:void 0,tabIndex:ft?0:void 0,role:ft?"button":void 0,"aria-describedby":x?void 0:`${pT}-${E}`,"aria-label":N.ariaLabel,children:Q.jsx(JR,{value:n,children:Q.jsx(U,{id:n,data:N.data,type:J,positionAbsoluteX:O.positionAbsolute.x,positionAbsoluteY:O.positionAbsolute.y,selected:N.selected??!1,selectable:F,draggable:W,deletable:N.deletable??!0,isConnectable:nt,sourcePosition:N.sourcePosition,targetPosition:N.targetPosition,dragging:Y,dragHandle:N.dragHandle,zIndex:O.z,parentId:N.parentId,...B})})})}const aM=n=>({nodesDraggable:n.nodesDraggable,nodesConnectable:n.nodesConnectable,nodesFocusable:n.nodesFocusable,elementsSelectable:n.elementsSelectable,onError:n.onError});function NT(n){const{nodesDraggable:t,nodesConnectable:e,nodesFocusable:i,elementsSelectable:a,onError:l}=$t(aM,he),c=eM(n.onlyRenderVisibleElements),d=rM();return Q.jsx("div",{className:"react-flow__nodes",style:nh,children:c.map(h=>Q.jsx(sM,{id:h,nodeTypes:n.nodeTypes,nodeExtent:n.nodeExtent,onClick:n.onNodeClick,onMouseEnter:n.onNodeMouseEnter,onMouseMove:n.onNodeMouseMove,onMouseLeave:n.onNodeMouseLeave,onContextMenu:n.onNodeContextMenu,onDoubleClick:n.onNodeDoubleClick,noDragClassName:n.noDragClassName,noPanClassName:n.noPanClassName,rfId:n.rfId,disableKeyboardA11y:n.disableKeyboardA11y,resizeObserver:d,nodesDraggable:t,nodesConnectable:e,nodesFocusable:i,elementsSelectable:a,nodeClickDistance:n.nodeClickDistance,onError:l},h))})}NT.displayName="NodeRenderer";const oM=et.memo(NT);function lM(n){return $t(et.useCallback(e=>{if(!n)return e.edges.map(a=>a.id);const i=[];if(e.width&&e.height)for(const a of e.edges){const l=e.nodeLookup.get(a.source),c=e.nodeLookup.get(a.target);l&&c&&aI({sourceNode:l,targetNode:c,width:e.width,height:e.height,transform:e.transform})&&i.push(a.id)}return i},[n]),he)}const uM=({color:n="none",strokeWidth:t=1})=>Q.jsx("polyline",{style:{stroke:n,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),cM=({color:n="none",strokeWidth:t=1})=>Q.jsx("polyline",{style:{stroke:n,fill:n,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),Vb={[Od.Arrow]:uM,[Od.ArrowClosed]:cM};function fM(n){const t=ae();return et.useMemo(()=>{var a,l;return Object.prototype.hasOwnProperty.call(Vb,n)?Vb[n]:((l=(a=t.getState()).onError)==null||l.call(a,"009",Cr.error009(n)),null)},[n])}const dM=({id:n,type:t,color:e,width:i=12.5,height:a=12.5,markerUnits:l="strokeWidth",strokeWidth:c,orient:d="auto-start-reverse"})=>{const h=fM(t);return h?Q.jsx("marker",{className:"react-flow__arrowhead",id:n,markerWidth:`${i}`,markerHeight:`${a}`,viewBox:"-10 -10 20 20",markerUnits:l,orient:d,refX:"0",refY:"0",children:Q.jsx(h,{color:e,strokeWidth:c})}):null},CT=({defaultColor:n,rfId:t})=>{const e=$t(l=>l.edges),i=$t(l=>l.defaultEdgeOptions),a=et.useMemo(()=>gI(e,{id:t,defaultColor:n,defaultMarkerStart:i==null?void 0:i.markerStart,defaultMarkerEnd:i==null?void 0:i.markerEnd}),[e,i,t,n]);return a.length?Q.jsx("svg",{className:"react-flow__marker",children:Q.jsx("defs",{children:a.map(l=>Q.jsx(dM,{id:l.id,type:l.type,color:l.color,width:l.width,height:l.height,markerUnits:l.markerUnits,strokeWidth:l.strokeWidth,orient:l.orient},l.id))})}):null};CT.displayName="MarkerDefinitions";var hM=et.memo(CT);function DT({x:n,y:t,label:e,labelStyle:i,labelShowBg:a=!0,labelBgStyle:l,labelBgPadding:c=[2,4],labelBgBorderRadius:d=2,children:h,className:g,...p}){const[w,v]=et.useState({x:1,y:0,width:0,height:0}),S=be(["react-flow__edge-textwrapper",g]),x=et.useRef(null);return et.useEffect(()=>{if(x.current){const E=x.current.getBBox();v({x:E.x,y:E.y,width:E.width,height:E.height})}},[e]),e?Q.jsxs("g",{transform:`translate(${n-w.width/2} ${t-w.height/2})`,className:S,visibility:w.width?"visible":"hidden",...p,children:[a&&Q.jsx("rect",{width:w.width+2*c[0],x:-c[0],y:-c[1],height:w.height+2*c[1],className:"react-flow__edge-textbg",style:l,rx:d,ry:d}),Q.jsx("text",{className:"react-flow__edge-text",y:w.height/2,dy:"0.3em",ref:x,style:i,children:e}),h]}):null}DT.displayName="EdgeText";const gM=et.memo(DT);function rh({path:n,labelX:t,labelY:e,label:i,labelStyle:a,labelShowBg:l,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:h,interactionWidth:g=20,...p}){return Q.jsxs(Q.Fragment,{children:[Q.jsx("path",{...p,d:n,fill:"none",className:be(["react-flow__edge-path",p.className])}),g&&Q.jsx("path",{d:n,fill:"none",strokeOpacity:0,strokeWidth:g,className:"react-flow__edge-interaction"}),i&&tr(t)&&tr(e)?Q.jsx(gM,{x:t,y:e,label:i,labelStyle:a,labelShowBg:l,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:h}):null]})}function jb({pos:n,x1:t,y1:e,x2:i,y2:a}){return n===Et.Left||n===Et.Right?[.5*(t+i),e]:[t,.5*(e+a)]}function kT({sourceX:n,sourceY:t,sourcePosition:e=Et.Bottom,targetX:i,targetY:a,targetPosition:l=Et.Top}){const[c,d]=jb({pos:e,x1:n,y1:t,x2:i,y2:a}),[h,g]=jb({pos:l,x1:i,y1:a,x2:n,y2:t}),[p,w,v,S]=tT({sourceX:n,sourceY:t,targetX:i,targetY:a,sourceControlX:c,sourceControlY:d,targetControlX:h,targetControlY:g});return[`M${n},${t} C${c},${d} ${h},${g} ${i},${a}`,p,w,v,S]}function OT(n){return et.memo(({id:t,sourceX:e,sourceY:i,targetX:a,targetY:l,sourcePosition:c=Et.Bottom,targetPosition:d=Et.Top,label:h,labelStyle:g,labelShowBg:p,labelBgStyle:w,labelBgPadding:v,labelBgBorderRadius:S,style:x,markerEnd:E,markerStart:I,interactionWidth:k})=>{const[z,N,O]=kT({sourceX:e,sourceY:i,sourcePosition:c,targetX:a,targetY:l,targetPosition:d}),_=n.isInternal?void 0:t;return Q.jsx(rh,{id:_,path:z,labelX:N,labelY:O,label:h,labelStyle:g,labelShowBg:p,labelBgStyle:w,labelBgPadding:v,labelBgBorderRadius:S,style:x,markerEnd:E,markerStart:I,interactionWidth:k})})}const mM=OT({isInternal:!1}),IT=OT({isInternal:!0});mM.displayName="SimpleBezierEdge";IT.displayName="SimpleBezierEdgeInternal";function RT(n){return et.memo(({id:t,sourceX:e,sourceY:i,targetX:a,targetY:l,label:c,labelStyle:d,labelShowBg:h,labelBgStyle:g,labelBgPadding:p,labelBgBorderRadius:w,style:v,sourcePosition:S=Et.Bottom,targetPosition:x=Et.Top,markerEnd:E,markerStart:I,pathOptions:k,interactionWidth:z})=>{const[N,O,_]=Dp({sourceX:e,sourceY:i,sourcePosition:S,targetX:a,targetY:l,targetPosition:x,borderRadius:k==null?void 0:k.borderRadius,offset:k==null?void 0:k.offset}),J=n.isInternal?void 0:t;return Q.jsx(rh,{id:J,path:N,labelX:O,labelY:_,label:c,labelStyle:d,labelShowBg:h,labelBgStyle:g,labelBgPadding:p,labelBgBorderRadius:w,style:v,markerEnd:E,markerStart:I,interactionWidth:z})})}const MT=RT({isInternal:!1}),BT=RT({isInternal:!0});MT.displayName="SmoothStepEdge";BT.displayName="SmoothStepEdgeInternal";function zT(n){return et.memo(({id:t,...e})=>{var a;const i=n.isInternal?void 0:t;return Q.jsx(MT,{...e,id:i,pathOptions:et.useMemo(()=>{var l;return{borderRadius:0,offset:(l=e.pathOptions)==null?void 0:l.offset}},[(a=e.pathOptions)==null?void 0:a.offset])})})}const pM=zT({isInternal:!1}),LT=zT({isInternal:!0});pM.displayName="StepEdge";LT.displayName="StepEdgeInternal";function _T(n){return et.memo(({id:t,sourceX:e,sourceY:i,targetX:a,targetY:l,label:c,labelStyle:d,labelShowBg:h,labelBgStyle:g,labelBgPadding:p,labelBgBorderRadius:w,style:v,markerEnd:S,markerStart:x,interactionWidth:E})=>{const[I,k,z]=rT({sourceX:e,sourceY:i,targetX:a,targetY:l}),N=n.isInternal?void 0:t;return Q.jsx(rh,{id:N,path:I,labelX:k,labelY:z,label:c,labelStyle:d,labelShowBg:h,labelBgStyle:g,labelBgPadding:p,labelBgBorderRadius:w,style:v,markerEnd:S,markerStart:x,interactionWidth:E})})}const yM=_T({isInternal:!1}),UT=_T({isInternal:!0});yM.displayName="StraightEdge";UT.displayName="StraightEdgeInternal";function qT(n){return et.memo(({id:t,sourceX:e,sourceY:i,targetX:a,targetY:l,sourcePosition:c=Et.Bottom,targetPosition:d=Et.Top,label:h,labelStyle:g,labelShowBg:p,labelBgStyle:w,labelBgPadding:v,labelBgBorderRadius:S,style:x,markerEnd:E,markerStart:I,pathOptions:k,interactionWidth:z})=>{const[N,O,_]=eT({sourceX:e,sourceY:i,sourcePosition:c,targetX:a,targetY:l,targetPosition:d,curvature:k==null?void 0:k.curvature}),J=n.isInternal?void 0:t;return Q.jsx(rh,{id:J,path:N,labelX:O,labelY:_,label:h,labelStyle:g,labelShowBg:p,labelBgStyle:w,labelBgPadding:v,labelBgBorderRadius:S,style:x,markerEnd:E,markerStart:I,interactionWidth:z})})}const vM=qT({isInternal:!1}),PT=qT({isInternal:!0});vM.displayName="BezierEdge";PT.displayName="BezierEdgeInternal";const Yb={default:PT,straight:UT,step:LT,smoothstep:BT,simplebezier:IT},Gb={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},wM=(n,t,e)=>e===Et.Left?n-t:e===Et.Right?n+t:n,SM=(n,t,e)=>e===Et.Top?n-t:e===Et.Bottom?n+t:n,Xb="react-flow__edgeupdater";function Kb({position:n,centerX:t,centerY:e,radius:i=10,onMouseDown:a,onMouseEnter:l,onMouseOut:c,type:d}){return Q.jsx("circle",{onMouseDown:a,onMouseEnter:l,onMouseOut:c,className:be([Xb,`${Xb}-${d}`]),cx:wM(t,i,n),cy:SM(e,i,n),r:i,stroke:"transparent",fill:"transparent"})}function bM({isReconnectable:n,reconnectRadius:t,edge:e,sourceX:i,sourceY:a,targetX:l,targetY:c,sourcePosition:d,targetPosition:h,onReconnect:g,onReconnectStart:p,onReconnectEnd:w,setReconnecting:v,setUpdateHover:S}){const x=ae(),E=(O,_)=>{if(O.button!==0)return;const{autoPanOnConnect:J,domNode:U,isValidConnection:W,connectionMode:F,connectionRadius:nt,lib:ft,onConnectStart:ot,onConnectEnd:ct,cancelConnection:R,nodeLookup:Y,rfId:D,panBy:B,updateConnection:$}=x.getState(),q=_.type==="target";v(!0),p==null||p(O,e,_.type);const C=(tt,rt)=>{v(!1),w==null||w(tt,e,_.type,rt)},P=tt=>g==null?void 0:g(e,tt);Ip.onPointerDown(O.nativeEvent,{autoPanOnConnect:J,connectionMode:F,connectionRadius:nt,domNode:U,handleId:_.id,nodeId:_.nodeId,nodeLookup:Y,isTarget:q,edgeUpdaterType:_.type,lib:ft,flowId:D,cancelConnection:R,panBy:B,isValidConnection:W,onConnect:P,onConnectStart:ot,onConnectEnd:ct,onReconnectEnd:C,updateConnection:$,getTransform:()=>x.getState().transform,getFromHandle:()=>x.getState().connection.fromHandle})},I=O=>E(O,{nodeId:e.target,id:e.targetHandle??null,type:"target"}),k=O=>E(O,{nodeId:e.source,id:e.sourceHandle??null,type:"source"}),z=()=>S(!0),N=()=>S(!1);return Q.jsxs(Q.Fragment,{children:[(n===!0||n==="source")&&Q.jsx(Kb,{position:d,centerX:i,centerY:a,radius:t,onMouseDown:I,onMouseEnter:z,onMouseOut:N,type:"source"}),(n===!0||n==="target")&&Q.jsx(Kb,{position:h,centerX:l,centerY:c,radius:t,onMouseDown:k,onMouseEnter:z,onMouseOut:N,type:"target"})]})}function xM({id:n,edgesFocusable:t,edgesReconnectable:e,elementsSelectable:i,onClick:a,onDoubleClick:l,onContextMenu:c,onMouseEnter:d,onMouseMove:h,onMouseLeave:g,reconnectRadius:p,onReconnect:w,onReconnectStart:v,onReconnectEnd:S,rfId:x,edgeTypes:E,noPanClassName:I,onError:k,disableKeyboardA11y:z}){let N=$t(Tt=>Tt.edgeLookup.get(n));const O=$t(Tt=>Tt.defaultEdgeOptions);N=O?{...O,...N}:N;let _=N.type||"default",J=(E==null?void 0:E[_])||Yb[_];J===void 0&&(k==null||k("011",Cr.error011(_)),_="default",J=Yb.default);const U=!!(N.focusable||t&&typeof N.focusable>"u"),W=typeof w<"u"&&(N.reconnectable||e&&typeof N.reconnectable>"u"),F=!!(N.selectable||i&&typeof N.selectable>"u"),nt=et.useRef(null),[ft,ot]=et.useState(!1),[ct,R]=et.useState(!1),Y=ae(),{zIndex:D,sourceX:B,sourceY:$,targetX:q,targetY:C,sourcePosition:P,targetPosition:tt}=$t(et.useCallback(Tt=>{const Yt=Tt.nodeLookup.get(N.source),qt=Tt.nodeLookup.get(N.target);if(!Yt||!qt)return{zIndex:N.zIndex,...Gb};const xe=hI({id:n,sourceNode:Yt,targetNode:qt,sourceHandle:N.sourceHandle||null,targetHandle:N.targetHandle||null,connectionMode:Tt.connectionMode,onError:k});return{zIndex:sI({selected:N.selected,zIndex:N.zIndex,sourceNode:Yt,targetNode:qt,elevateOnSelect:Tt.elevateEdgesOnSelect}),...xe||Gb}},[N.source,N.target,N.sourceHandle,N.targetHandle,N.selected,N.zIndex]),he),rt=et.useMemo(()=>N.markerStart?`url('#${kp(N.markerStart,x)}')`:void 0,[N.markerStart,x]),ut=et.useMemo(()=>N.markerEnd?`url('#${kp(N.markerEnd,x)}')`:void 0,[N.markerEnd,x]);if(N.hidden||B===null||$===null||q===null||C===null)return null;const gt=Tt=>{var an;const{addSelectedEdges:Yt,unselectNodesAndEdges:qt,multiSelectionActive:xe}=Y.getState();F&&(Y.setState({nodesSelectionActive:!1}),N.selected&&xe?(qt({nodes:[],edges:[N]}),(an=nt.current)==null||an.blur()):Yt([n])),a&&a(Tt,N)},dt=l?Tt=>{l(Tt,{...N})}:void 0,pt=c?Tt=>{c(Tt,{...N})}:void 0,yt=d?Tt=>{d(Tt,{...N})}:void 0,Dt=h?Tt=>{h(Tt,{...N})}:void 0,Vt=g?Tt=>{g(Tt,{...N})}:void 0,Ot=Tt=>{var Yt;if(!z&&Px.includes(Tt.key)&&F){const{unselectNodesAndEdges:qt,addSelectedEdges:xe}=Y.getState();Tt.key==="Escape"?((Yt=nt.current)==null||Yt.blur(),qt({edges:[N]})):xe([n])}};return Q.jsx("svg",{style:{zIndex:D},children:Q.jsxs("g",{className:be(["react-flow__edge",`react-flow__edge-${_}`,N.className,I,{selected:N.selected,animated:N.animated,inactive:!F&&!a,updating:ft,selectable:F}]),onClick:gt,onDoubleClick:dt,onContextMenu:pt,onMouseEnter:yt,onMouseMove:Dt,onMouseLeave:Vt,onKeyDown:U?Ot:void 0,tabIndex:U?0:void 0,role:U?"button":"img","data-id":n,"data-testid":`rf__edge-${n}`,"aria-label":N.ariaLabel===null?void 0:N.ariaLabel||`Edge from ${N.source} to ${N.target}`,"aria-describedby":U?`${yT}-${x}`:void 0,ref:nt,children:[!ct&&Q.jsx(J,{id:n,source:N.source,target:N.target,type:N.type,selected:N.selected,animated:N.animated,selectable:F,deletable:N.deletable??!0,label:N.label,labelStyle:N.labelStyle,labelShowBg:N.labelShowBg,labelBgStyle:N.labelBgStyle,labelBgPadding:N.labelBgPadding,labelBgBorderRadius:N.labelBgBorderRadius,sourceX:B,sourceY:$,targetX:q,targetY:C,sourcePosition:P,targetPosition:tt,data:N.data,style:N.style,sourceHandleId:N.sourceHandle,targetHandleId:N.targetHandle,markerStart:rt,markerEnd:ut,pathOptions:"pathOptions"in N?N.pathOptions:void 0,interactionWidth:N.interactionWidth}),W&&Q.jsx(bM,{edge:N,isReconnectable:W,reconnectRadius:p,onReconnect:w,onReconnectStart:v,onReconnectEnd:S,sourceX:B,sourceY:$,targetX:q,targetY:C,sourcePosition:P,targetPosition:tt,setUpdateHover:ot,setReconnecting:R})]})})}const TM=n=>({edgesFocusable:n.edgesFocusable,edgesReconnectable:n.edgesReconnectable,elementsSelectable:n.elementsSelectable,connectionMode:n.connectionMode,onError:n.onError});function JT({defaultMarkerColor:n,onlyRenderVisibleElements:t,rfId:e,edgeTypes:i,noPanClassName:a,onReconnect:l,onEdgeContextMenu:c,onEdgeMouseEnter:d,onEdgeMouseMove:h,onEdgeMouseLeave:g,onEdgeClick:p,reconnectRadius:w,onEdgeDoubleClick:v,onReconnectStart:S,onReconnectEnd:x,disableKeyboardA11y:E}){const{edgesFocusable:I,edgesReconnectable:k,elementsSelectable:z,onError:N}=$t(TM,he),O=lM(t);return Q.jsxs("div",{className:"react-flow__edges",children:[Q.jsx(hM,{defaultColor:n,rfId:e}),O.map(_=>Q.jsx(xM,{id:_,edgesFocusable:I,edgesReconnectable:k,elementsSelectable:z,noPanClassName:a,onReconnect:l,onContextMenu:c,onMouseEnter:d,onMouseMove:h,onMouseLeave:g,onClick:p,reconnectRadius:w,onDoubleClick:v,onReconnectStart:S,onReconnectEnd:x,rfId:e,onError:N,edgeTypes:i,disableKeyboardA11y:E},_))]})}JT.displayName="EdgeRenderer";const AM=et.memo(JT),EM=n=>`translate(${n.transform[0]}px,${n.transform[1]}px) scale(${n.transform[2]})`;function NM({children:n}){const t=$t(EM);return Q.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:n})}function CM(n){const t=dy(),e=et.useRef(!1);et.useEffect(()=>{!e.current&&t.viewportInitialized&&n&&(setTimeout(()=>n(t),1),e.current=!0)},[n,t.viewportInitialized])}const DM=n=>{var t;return(t=n.panZoom)==null?void 0:t.syncViewport};function kM(n){const t=$t(DM),e=ae();return et.useEffect(()=>{n&&(t==null||t(n),e.setState({transform:[n.x,n.y,n.zoom]}))},[n,t]),null}function OM(n){return n.connection.inProgress?{...n.connection,to:rc(n.connection.to,n.transform)}:{...n.connection}}function IM(n){return OM}function RM(n){const t=IM();return $t(t,he)}const MM=n=>({nodesConnectable:n.nodesConnectable,isValid:n.connection.isValid,inProgress:n.connection.inProgress,width:n.width,height:n.height});function BM({containerStyle:n,style:t,type:e,component:i}){const{nodesConnectable:a,width:l,height:c,isValid:d,inProgress:h}=$t(MM,he);return!(l&&a&&h)?null:Q.jsx("svg",{style:n,width:l,height:c,className:"react-flow__connectionline react-flow__container",children:Q.jsx("g",{className:be(["react-flow__connection",$x(d)]),children:Q.jsx($T,{style:t,type:e,CustomComponent:i,isValid:d})})})}const $T=({style:n,type:t=Ks.Bezier,CustomComponent:e,isValid:i})=>{const{inProgress:a,from:l,fromNode:c,fromHandle:d,fromPosition:h,to:g,toNode:p,toHandle:w,toPosition:v}=RM();if(!a)return;if(e)return Q.jsx(e,{connectionLineType:t,connectionLineStyle:n,fromNode:c,fromHandle:d,fromX:l.x,fromY:l.y,toX:g.x,toY:g.y,fromPosition:h,toPosition:v,connectionStatus:$x(i),toNode:p,toHandle:w});let S="";const x={sourceX:l.x,sourceY:l.y,sourcePosition:h,targetX:g.x,targetY:g.y,targetPosition:v};switch(t){case Ks.Bezier:[S]=eT(x);break;case Ks.SimpleBezier:[S]=kT(x);break;case Ks.Step:[S]=Dp({...x,borderRadius:0});break;case Ks.SmoothStep:[S]=Dp(x);break;default:[S]=rT(x)}return Q.jsx("path",{d:S,fill:"none",className:"react-flow__connection-path",style:n})};$T.displayName="ConnectionLine";const zM={};function Fb(n=zM){et.useRef(n),ae(),et.useEffect(()=>{},[n])}function LM(){ae(),et.useRef(!1),et.useEffect(()=>{},[])}function HT({nodeTypes:n,edgeTypes:t,onInit:e,onNodeClick:i,onEdgeClick:a,onNodeDoubleClick:l,onEdgeDoubleClick:c,onNodeMouseEnter:d,onNodeMouseMove:h,onNodeMouseLeave:g,onNodeContextMenu:p,onSelectionContextMenu:w,onSelectionStart:v,onSelectionEnd:S,connectionLineType:x,connectionLineStyle:E,connectionLineComponent:I,connectionLineContainerStyle:k,selectionKeyCode:z,selectionOnDrag:N,selectionMode:O,multiSelectionKeyCode:_,panActivationKeyCode:J,zoomActivationKeyCode:U,deleteKeyCode:W,onlyRenderVisibleElements:F,elementsSelectable:nt,defaultViewport:ft,translateExtent:ot,minZoom:ct,maxZoom:R,preventScrolling:Y,defaultMarkerColor:D,zoomOnScroll:B,zoomOnPinch:$,panOnScroll:q,panOnScrollSpeed:C,panOnScrollMode:P,zoomOnDoubleClick:tt,panOnDrag:rt,onPaneClick:ut,onPaneMouseEnter:gt,onPaneMouseMove:dt,onPaneMouseLeave:pt,onPaneScroll:yt,onPaneContextMenu:Dt,paneClickDistance:Vt,nodeClickDistance:Ot,onEdgeContextMenu:Tt,onEdgeMouseEnter:Yt,onEdgeMouseMove:qt,onEdgeMouseLeave:xe,reconnectRadius:an,onReconnect:Oe,onReconnectStart:sl,onReconnectEnd:Pa,noDragClassName:hs,noWheelClassName:gs,noPanClassName:na,disableKeyboardA11y:ms,nodeExtent:al,rfId:ra,viewport:$n,onViewportChange:Ee}){return Fb(n),Fb(t),LM(),CM(e),kM($n),Q.jsx(WR,{onPaneClick:ut,onPaneMouseEnter:gt,onPaneMouseMove:dt,onPaneMouseLeave:pt,onPaneContextMenu:Dt,onPaneScroll:yt,paneClickDistance:Vt,deleteKeyCode:W,selectionKeyCode:z,selectionOnDrag:N,selectionMode:O,onSelectionStart:v,onSelectionEnd:S,multiSelectionKeyCode:_,panActivationKeyCode:J,zoomActivationKeyCode:U,elementsSelectable:nt,zoomOnScroll:B,zoomOnPinch:$,zoomOnDoubleClick:tt,panOnScroll:q,panOnScrollSpeed:C,panOnScrollMode:P,panOnDrag:rt,defaultViewport:ft,translateExtent:ot,minZoom:ct,maxZoom:R,onSelectionContextMenu:w,preventScrolling:Y,noDragClassName:hs,noWheelClassName:gs,noPanClassName:na,disableKeyboardA11y:ms,onViewportChange:Ee,isControlledViewport:!!$n,children:Q.jsxs(NM,{children:[Q.jsx(AM,{edgeTypes:t,onEdgeClick:a,onEdgeDoubleClick:c,onReconnect:Oe,onReconnectStart:sl,onReconnectEnd:Pa,onlyRenderVisibleElements:F,onEdgeContextMenu:Tt,onEdgeMouseEnter:Yt,onEdgeMouseMove:qt,onEdgeMouseLeave:xe,reconnectRadius:an,defaultMarkerColor:D,noPanClassName:na,disableKeyboardA11y:ms,rfId:ra}),Q.jsx(BM,{style:E,type:x,component:I,containerStyle:k}),Q.jsx("div",{className:"react-flow__edgelabel-renderer"}),Q.jsx(oM,{nodeTypes:n,onNodeClick:i,onNodeDoubleClick:l,onNodeMouseEnter:d,onNodeMouseMove:h,onNodeMouseLeave:g,onNodeContextMenu:p,nodeClickDistance:Ot,onlyRenderVisibleElements:F,noPanClassName:na,noDragClassName:hs,disableKeyboardA11y:ms,nodeExtent:al,rfId:ra}),Q.jsx("div",{className:"react-flow__viewport-portal"})]})})}HT.displayName="GraphView";const _M=et.memo(HT),Zb=({nodes:n,edges:t,defaultNodes:e,defaultEdges:i,width:a,height:l,fitView:c,nodeOrigin:d,nodeExtent:h}={})=>{const g=new Map,p=new Map,w=new Map,v=new Map,S=i??t??[],x=e??n??[],E=d??[0,0],I=h??$u;sT(w,v,S),Op(x,g,p,{nodeOrigin:E,nodeExtent:I,elevateNodesOnSelect:!1});let k=[0,0,1];if(c&&a&&l){const z=nc(g,{filter:J=>!!((J.width||J.initialWidth)&&(J.height||J.initialHeight))}),{x:N,y:O,zoom:_}=ay(z,a,l,.5,2,.1);k=[N,O,_]}return{rfId:"1",width:0,height:0,transform:k,nodes:x,nodeLookup:g,parentLookup:p,edges:S,edgeLookup:v,connectionLookup:w,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:e!==void 0,hasDefaultEdges:i!==void 0,panZoom:null,minZoom:.5,maxZoom:2,translateExtent:$u,nodeExtent:I,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:tl.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:E,nodeDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:c??!1,fitViewOptions:void 0,fitViewResolver:null,connection:{...Jx},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanSpeed:15,connectionRadius:20,onError:eI,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1}},UM=({nodes:n,edges:t,defaultNodes:e,defaultEdges:i,width:a,height:l,fitView:c,nodeOrigin:d,nodeExtent:h})=>eR((g,p)=>{async function w(){const{nodeLookup:v,panZoom:S,fitViewOptions:x,fitViewResolver:E,width:I,height:k,minZoom:z,maxZoom:N}=p();S&&(await WO({nodes:v,width:I,height:k,panZoom:S,minZoom:z,maxZoom:N},x),E==null||E.resolve(!0),g({fitViewResolver:null}))}return{...Zb({nodes:n,edges:t,width:a,height:l,fitView:c,nodeOrigin:d,nodeExtent:h,defaultNodes:e,defaultEdges:i}),setNodes:v=>{const{nodeLookup:S,parentLookup:x,nodeOrigin:E,elevateNodesOnSelect:I,fitViewQueued:k}=p(),z=Op(v,S,x,{nodeOrigin:E,nodeExtent:h,elevateNodesOnSelect:I,checkEquality:!0});k&&z?(w(),g({nodes:v,fitViewQueued:!1,fitViewOptions:void 0})):g({nodes:v})},setEdges:v=>{const{connectionLookup:S,edgeLookup:x}=p();sT(S,x,v),g({edges:v})},setDefaultNodesAndEdges:(v,S)=>{if(v){const{setNodes:x}=p();x(v),g({hasDefaultNodes:!0})}if(S){const{setEdges:x}=p();x(S),g({hasDefaultEdges:!0})}},updateNodeInternals:v=>{const{triggerNodeChanges:S,nodeLookup:x,parentLookup:E,domNode:I,nodeOrigin:k,nodeExtent:z,debug:N,fitViewQueued:O}=p(),{changes:_,updatedInternals:J}=wI(v,x,E,I,k,z);J&&(pI(x,E,{nodeOrigin:k,nodeExtent:z}),O?(w(),g({fitViewQueued:!1,fitViewOptions:void 0})):g({}),(_==null?void 0:_.length)>0&&(N&&console.log("React Flow: trigger node changes",_),S==null||S(_)))},updateNodePositions:(v,S=!1)=>{const x=[],E=[],{nodeLookup:I,triggerNodeChanges:k}=p();for(const[z,N]of v){const O=I.get(z),_=!!(O!=null&&O.expandParent&&(O!=null&&O.parentId)&&(N!=null&&N.position)),J={id:z,type:"position",position:_?{x:Math.max(0,N.position.x),y:Math.max(0,N.position.y)}:N.position,dragging:S};_&&O.parentId&&x.push({id:z,parentId:O.parentId,rect:{...N.internals.positionAbsolute,width:N.measured.width??0,height:N.measured.height??0}}),E.push(J)}if(x.length>0){const{parentLookup:z,nodeOrigin:N}=p(),O=fy(x,I,z,N);E.push(...O)}k(E)},triggerNodeChanges:v=>{const{onNodesChange:S,setNodes:x,nodes:E,hasDefaultNodes:I,debug:k}=p();if(v!=null&&v.length){if(I){const z=xR(v,E);x(z)}k&&console.log("React Flow: trigger node changes",v),S==null||S(v)}},triggerEdgeChanges:v=>{const{onEdgesChange:S,setEdges:x,edges:E,hasDefaultEdges:I,debug:k}=p();if(v!=null&&v.length){if(I){const z=TR(v,E);x(z)}k&&console.log("React Flow: trigger edge changes",v),S==null||S(v)}},addSelectedNodes:v=>{const{multiSelectionActive:S,edgeLookup:x,nodeLookup:E,triggerNodeChanges:I,triggerEdgeChanges:k}=p();if(S){const z=v.map(N=>Na(N,!0));I(z);return}I(Lo(E,new Set([...v]),!0)),k(Lo(x))},addSelectedEdges:v=>{const{multiSelectionActive:S,edgeLookup:x,nodeLookup:E,triggerNodeChanges:I,triggerEdgeChanges:k}=p();if(S){const z=v.map(N=>Na(N,!0));k(z);return}k(Lo(x,new Set([...v]))),I(Lo(E,new Set,!0))},unselectNodesAndEdges:({nodes:v,edges:S}={})=>{const{edges:x,nodes:E,nodeLookup:I,triggerNodeChanges:k,triggerEdgeChanges:z}=p(),N=v||E,O=S||x,_=N.map(U=>{const W=I.get(U.id);return W&&(W.selected=!1),Na(U.id,!1)}),J=O.map(U=>Na(U.id,!1));k(_),z(J)},setMinZoom:v=>{const{panZoom:S,maxZoom:x}=p();S==null||S.setScaleExtent([v,x]),g({minZoom:v})},setMaxZoom:v=>{const{panZoom:S,minZoom:x}=p();S==null||S.setScaleExtent([x,v]),g({maxZoom:v})},setTranslateExtent:v=>{var S;(S=p().panZoom)==null||S.setTranslateExtent(v),g({translateExtent:v})},setPaneClickDistance:v=>{var S;(S=p().panZoom)==null||S.setClickDistance(v)},resetSelectedElements:()=>{const{edges:v,nodes:S,triggerNodeChanges:x,triggerEdgeChanges:E}=p(),I=S.reduce((z,N)=>N.selected?[...z,Na(N.id,!1)]:z,[]),k=v.reduce((z,N)=>N.selected?[...z,Na(N.id,!1)]:z,[]);x(I),E(k)},setNodeExtent:v=>{const{nodes:S,nodeLookup:x,parentLookup:E,nodeOrigin:I,elevateNodesOnSelect:k,nodeExtent:z}=p();v[0][0]===z[0][0]&&v[0][1]===z[0][1]&&v[1][0]===z[1][0]&&v[1][1]===z[1][1]||(Op(S,x,E,{nodeOrigin:I,nodeExtent:v,elevateNodesOnSelect:k,checkEquality:!1}),g({nodeExtent:v}))},panBy:v=>{const{transform:S,width:x,height:E,panZoom:I,translateExtent:k}=p();return SI({delta:v,panZoom:I,transform:S,translateExtent:k,width:x,height:E})},cancelConnection:()=>{g({connection:{...Jx}})},updateConnection:v=>{g({connection:v})},reset:()=>g({...Zb()})}},Object.is);function qM({initialNodes:n,initialEdges:t,defaultNodes:e,defaultEdges:i,initialWidth:a,initialHeight:l,fitView:c,nodeOrigin:d,nodeExtent:h,children:g}){const[p]=et.useState(()=>UM({nodes:n,edges:t,defaultNodes:e,defaultEdges:i,width:a,height:l,fitView:c,nodeOrigin:d,nodeExtent:h}));return Q.jsx(nR,{value:p,children:Q.jsx(CR,{children:g})})}function PM({children:n,nodes:t,edges:e,defaultNodes:i,defaultEdges:a,width:l,height:c,fitView:d,nodeOrigin:h,nodeExtent:g}){return et.useContext(th)?Q.jsx(Q.Fragment,{children:n}):Q.jsx(qM,{initialNodes:t,initialEdges:e,defaultNodes:i,defaultEdges:a,initialWidth:l,initialHeight:c,fitView:d,nodeOrigin:h,nodeExtent:g,children:n})}const JM={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function $M({nodes:n,edges:t,defaultNodes:e,defaultEdges:i,className:a,nodeTypes:l,edgeTypes:c,onNodeClick:d,onEdgeClick:h,onInit:g,onMove:p,onMoveStart:w,onMoveEnd:v,onConnect:S,onConnectStart:x,onConnectEnd:E,onClickConnectStart:I,onClickConnectEnd:k,onNodeMouseEnter:z,onNodeMouseMove:N,onNodeMouseLeave:O,onNodeContextMenu:_,onNodeDoubleClick:J,onNodeDragStart:U,onNodeDrag:W,onNodeDragStop:F,onNodesDelete:nt,onEdgesDelete:ft,onDelete:ot,onSelectionChange:ct,onSelectionDragStart:R,onSelectionDrag:Y,onSelectionDragStop:D,onSelectionContextMenu:B,onSelectionStart:$,onSelectionEnd:q,onBeforeDelete:C,connectionMode:P,connectionLineType:tt=Ks.Bezier,connectionLineStyle:rt,connectionLineComponent:ut,connectionLineContainerStyle:gt,deleteKeyCode:dt="Backspace",selectionKeyCode:pt="Shift",selectionOnDrag:yt=!1,selectionMode:Dt=Hu.Full,panActivationKeyCode:Vt="Space",multiSelectionKeyCode:Ot=Md()?"Meta":"Control",zoomActivationKeyCode:Tt=Md()?"Meta":"Control",snapToGrid:Yt,snapGrid:qt,onlyRenderVisibleElements:xe=!1,selectNodesOnDrag:an,nodesDraggable:Oe,nodesConnectable:sl,nodesFocusable:Pa,nodeOrigin:hs=vT,edgesFocusable:gs,edgesReconnectable:na,elementsSelectable:ms=!0,defaultViewport:al=mR,minZoom:ra=.5,maxZoom:$n=2,translateExtent:Ee=$u,preventScrolling:rr=!0,nodeExtent:Ie,defaultMarkerColor:ih="#b1b1b7",zoomOnScroll:sh=!0,zoomOnPinch:ah=!0,panOnScroll:Ja=!1,panOnScrollSpeed:$a=.5,panOnScrollMode:kr=Ra.Free,zoomOnDoubleClick:Ha=!0,panOnDrag:ia=!0,onPaneClick:oh,onPaneMouseEnter:ic,onPaneMouseMove:sc,onPaneMouseLeave:ol,onPaneScroll:sa,onPaneContextMenu:lh,paneClickDistance:ll=0,nodeClickDistance:ac=0,children:ul,onReconnect:cl,onReconnectStart:oc,onReconnectEnd:uh,onEdgeContextMenu:ir,onEdgeDoubleClick:Ne,onEdgeMouseEnter:qe,onEdgeMouseMove:ps,onEdgeMouseLeave:fl,reconnectRadius:ch=10,onNodesChange:fh,onEdgesChange:lc,noDragClassName:aa="nodrag",noWheelClassName:dl="nowheel",noPanClassName:Or="nopan",fitView:Ir,fitViewOptions:oa,connectOnClick:ys,attributionPosition:ve,proOptions:uc,defaultEdgeOptions:cc,elevateNodesOnSelect:Rr,elevateEdgesOnSelect:vs,disableKeyboardA11y:fc=!1,autoPanOnConnect:dc,autoPanOnNodeDrag:hc,autoPanSpeed:dh,connectionRadius:Va,isValidConnection:ja,onError:Hn,style:hl,id:gl,nodeDragThreshold:ws,viewport:ml,onViewportChange:pl,width:hh,height:gc,colorMode:Ge="light",debug:mc,onScroll:Ya,...Ga},pc){const Ss=gl||"1",gh=wR(Ge),Xe=et.useCallback(Xa=>{Xa.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),Ya==null||Ya(Xa)},[Ya]);return Q.jsx("div",{"data-testid":"rf__wrapper",...Ga,onScroll:Xe,style:{...hl,...JM},ref:pc,className:be(["react-flow",a,gh]),id:gl,children:Q.jsxs(PM,{nodes:n,edges:t,width:hh,height:gc,fitView:Ir,nodeOrigin:hs,nodeExtent:Ie,children:[Q.jsx(_M,{onInit:g,onNodeClick:d,onEdgeClick:h,onNodeMouseEnter:z,onNodeMouseMove:N,onNodeMouseLeave:O,onNodeContextMenu:_,onNodeDoubleClick:J,nodeTypes:l,edgeTypes:c,connectionLineType:tt,connectionLineStyle:rt,connectionLineComponent:ut,connectionLineContainerStyle:gt,selectionKeyCode:pt,selectionOnDrag:yt,selectionMode:Dt,deleteKeyCode:dt,multiSelectionKeyCode:Ot,panActivationKeyCode:Vt,zoomActivationKeyCode:Tt,onlyRenderVisibleElements:xe,defaultViewport:al,translateExtent:Ee,minZoom:ra,maxZoom:$n,preventScrolling:rr,zoomOnScroll:sh,zoomOnPinch:ah,zoomOnDoubleClick:Ha,panOnScroll:Ja,panOnScrollSpeed:$a,panOnScrollMode:kr,panOnDrag:ia,onPaneClick:oh,onPaneMouseEnter:ic,onPaneMouseMove:sc,onPaneMouseLeave:ol,onPaneScroll:sa,onPaneContextMenu:lh,paneClickDistance:ll,nodeClickDistance:ac,onSelectionContextMenu:B,onSelectionStart:$,onSelectionEnd:q,onReconnect:cl,onReconnectStart:oc,onReconnectEnd:uh,onEdgeContextMenu:ir,onEdgeDoubleClick:Ne,onEdgeMouseEnter:qe,onEdgeMouseMove:ps,onEdgeMouseLeave:fl,reconnectRadius:ch,defaultMarkerColor:ih,noDragClassName:aa,noWheelClassName:dl,noPanClassName:Or,rfId:Ss,disableKeyboardA11y:fc,nodeExtent:Ie,viewport:ml,onViewportChange:pl}),Q.jsx(vR,{nodes:n,edges:t,defaultNodes:e,defaultEdges:i,onConnect:S,onConnectStart:x,onConnectEnd:E,onClickConnectStart:I,onClickConnectEnd:k,nodesDraggable:Oe,nodesConnectable:sl,nodesFocusable:Pa,edgesFocusable:gs,edgesReconnectable:na,elementsSelectable:ms,elevateNodesOnSelect:Rr,elevateEdgesOnSelect:vs,minZoom:ra,maxZoom:$n,nodeExtent:Ie,onNodesChange:fh,onEdgesChange:lc,snapToGrid:Yt,snapGrid:qt,connectionMode:P,translateExtent:Ee,connectOnClick:ys,defaultEdgeOptions:cc,fitView:Ir,fitViewOptions:oa,onNodesDelete:nt,onEdgesDelete:ft,onDelete:ot,onNodeDragStart:U,onNodeDrag:W,onNodeDragStop:F,onSelectionDrag:Y,onSelectionDragStart:R,onSelectionDragStop:D,onMove:p,onMoveStart:w,onMoveEnd:v,noPanClassName:Or,nodeOrigin:hs,rfId:Ss,autoPanOnConnect:dc,autoPanOnNodeDrag:hc,autoPanSpeed:dh,onError:Hn,connectionRadius:Va,isValidConnection:ja,selectNodesOnDrag:an,nodeDragThreshold:ws,onBeforeDelete:C,paneClickDistance:ll,debug:mc}),Q.jsx(gR,{onSelectionChange:ct}),ul,Q.jsx(uR,{proOptions:uc,position:ve}),Q.jsx(oR,{rfId:Ss,disableKeyboardA11y:fc})]})})}var HM=ST($M);function VM({dimensions:n,lineWidth:t,variant:e,className:i}){return Q.jsx("path",{strokeWidth:t,d:`M${n[0]/2} 0 V${n[1]} M0 ${n[1]/2} H${n[0]}`,className:be(["react-flow__background-pattern",e,i])})}function jM({radius:n,className:t}){return Q.jsx("circle",{cx:n,cy:n,r:n,className:be(["react-flow__background-pattern","dots",t])})}var ta;(function(n){n.Lines="lines",n.Dots="dots",n.Cross="cross"})(ta||(ta={}));const YM={[ta.Dots]:1,[ta.Lines]:1,[ta.Cross]:6},GM=n=>({transform:n.transform,patternId:`pattern-${n.rfId}`});function VT({id:n,variant:t=ta.Dots,gap:e=20,size:i,lineWidth:a=1,offset:l=0,color:c,bgColor:d,style:h,className:g,patternClassName:p}){const w=et.useRef(null),{transform:v,patternId:S}=$t(GM,he),x=i||YM[t],E=t===ta.Dots,I=t===ta.Cross,k=Array.isArray(e)?e:[e,e],z=[k[0]*v[2]||1,k[1]*v[2]||1],N=x*v[2],O=Array.isArray(l)?l:[l,l],_=I?[N,N]:z,J=[O[0]*v[2]||1+_[0]/2,O[1]*v[2]||1+_[1]/2],U=`${S}${n||""}`;return Q.jsxs("svg",{className:be(["react-flow__background",g]),style:{...h,...nh,"--xy-background-color-props":d,"--xy-background-pattern-color-props":c},ref:w,"data-testid":"rf__background",children:[Q.jsx("pattern",{id:U,x:v[0]%z[0],y:v[1]%z[1],width:z[0],height:z[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${J[0]},-${J[1]})`,children:E?Q.jsx(jM,{radius:N/2,className:p}):Q.jsx(VM,{dimensions:_,lineWidth:a,variant:t,className:p})}),Q.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${U})`})]})}VT.displayName="Background";const XM=et.memo(VT);function KM(){return Q.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:Q.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function FM(){return Q.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:Q.jsx("path",{d:"M0 0h32v4.2H0z"})})}function ZM(){return Q.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:Q.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function QM(){return Q.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:Q.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function WM(){return Q.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:Q.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function qf({children:n,className:t,...e}){return Q.jsx("button",{type:"button",className:be(["react-flow__controls-button",t]),...e,children:n})}const tB=n=>({isInteractive:n.nodesDraggable||n.nodesConnectable||n.elementsSelectable,minZoomReached:n.transform[2]<=n.minZoom,maxZoomReached:n.transform[2]>=n.maxZoom});function jT({style:n,showZoom:t=!0,showFitView:e=!0,showInteractive:i=!0,fitViewOptions:a,onZoomIn:l,onZoomOut:c,onFitView:d,onInteractiveChange:h,className:g,children:p,position:w="bottom-left",orientation:v="vertical","aria-label":S="React Flow controls"}){const x=ae(),{isInteractive:E,minZoomReached:I,maxZoomReached:k}=$t(tB,he),{zoomIn:z,zoomOut:N,fitView:O}=dy(),_=()=>{z(),l==null||l()},J=()=>{N(),c==null||c()},U=()=>{O(a),d==null||d()},W=()=>{x.setState({nodesDraggable:!E,nodesConnectable:!E,elementsSelectable:!E}),h==null||h(!E)},F=v==="horizontal"?"horizontal":"vertical";return Q.jsxs(eh,{className:be(["react-flow__controls",F,g]),position:w,style:n,"data-testid":"rf__controls","aria-label":S,children:[t&&Q.jsxs(Q.Fragment,{children:[Q.jsx(qf,{onClick:_,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:k,children:Q.jsx(KM,{})}),Q.jsx(qf,{onClick:J,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:I,children:Q.jsx(FM,{})})]}),e&&Q.jsx(qf,{className:"react-flow__controls-fitview",onClick:U,title:"fit view","aria-label":"fit view",children:Q.jsx(ZM,{})}),i&&Q.jsx(qf,{className:"react-flow__controls-interactive",onClick:W,title:"toggle interactivity","aria-label":"toggle interactivity",children:E?Q.jsx(WM,{}):Q.jsx(QM,{})}),p]})}jT.displayName="Controls";const eB=et.memo(jT);function nB({id:n,x:t,y:e,width:i,height:a,style:l,color:c,strokeColor:d,strokeWidth:h,className:g,borderRadius:p,shapeRendering:w,selected:v,onClick:S}){const{background:x,backgroundColor:E}=l||{},I=c||x||E;return Q.jsx("rect",{className:be(["react-flow__minimap-node",{selected:v},g]),x:t,y:e,rx:p,ry:p,width:i,height:a,style:{fill:I,stroke:d,strokeWidth:h},shapeRendering:w,onClick:S?k=>S(k,n):void 0})}const rB=et.memo(nB),iB=n=>n.nodes.map(t=>t.id),$m=n=>n instanceof Function?n:()=>n;function sB({nodeStrokeColor:n,nodeColor:t,nodeClassName:e="",nodeBorderRadius:i=5,nodeStrokeWidth:a,nodeComponent:l=rB,onClick:c}){const d=$t(iB,he),h=$m(t),g=$m(n),p=$m(e),w=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return Q.jsx(Q.Fragment,{children:d.map(v=>Q.jsx(oB,{id:v,nodeColorFunc:h,nodeStrokeColorFunc:g,nodeClassNameFunc:p,nodeBorderRadius:i,nodeStrokeWidth:a,NodeComponent:l,onClick:c,shapeRendering:w},v))})}function aB({id:n,nodeColorFunc:t,nodeStrokeColorFunc:e,nodeClassNameFunc:i,nodeBorderRadius:a,nodeStrokeWidth:l,shapeRendering:c,NodeComponent:d,onClick:h}){const{node:g,x:p,y:w,width:v,height:S}=$t(x=>{const E=x.nodeLookup.get(n),{x:I,y:k}=E.internals.positionAbsolute,{width:z,height:N}=ds(E);return{node:E,x:I,y:k,width:z,height:N}},he);return!g||g.hidden||!Kx(g)?null:Q.jsx(d,{x:p,y:w,width:v,height:S,style:g.style,selected:!!g.selected,className:i(g),color:t(g),borderRadius:a,strokeColor:e(g),strokeWidth:l,shapeRendering:c,onClick:h,id:g.id})}const oB=et.memo(aB);var lB=et.memo(sB);const uB=200,cB=150,fB=n=>!n.hidden,dB=n=>{const t={x:-n.transform[0]/n.transform[2],y:-n.transform[1]/n.transform[2],width:n.width/n.transform[2],height:n.height/n.transform[2]};return{viewBB:t,boundingRect:n.nodeLookup.size>0?Xx(nc(n.nodeLookup,{filter:fB}),t):t,rfId:n.rfId,panZoom:n.panZoom,translateExtent:n.translateExtent,flowWidth:n.width,flowHeight:n.height}},hB="react-flow__minimap-desc";function YT({style:n,className:t,nodeStrokeColor:e,nodeColor:i,nodeClassName:a="",nodeBorderRadius:l=5,nodeStrokeWidth:c,nodeComponent:d,bgColor:h,maskColor:g,maskStrokeColor:p,maskStrokeWidth:w,position:v="bottom-right",onClick:S,onNodeClick:x,pannable:E=!1,zoomable:I=!1,ariaLabel:k="React Flow mini map",inversePan:z,zoomStep:N=10,offsetScale:O=5}){const _=ae(),J=et.useRef(null),{boundingRect:U,viewBB:W,rfId:F,panZoom:nt,translateExtent:ft,flowWidth:ot,flowHeight:ct}=$t(dB,he),R=(n==null?void 0:n.width)??uB,Y=(n==null?void 0:n.height)??cB,D=U.width/R,B=U.height/Y,$=Math.max(D,B),q=$*R,C=$*Y,P=O*$,tt=U.x-(q-U.width)/2-P,rt=U.y-(C-U.height)/2-P,ut=q+P*2,gt=C+P*2,dt=`${hB}-${F}`,pt=et.useRef(0),yt=et.useRef();pt.current=$,et.useEffect(()=>{if(J.current&&nt)return yt.current=DI({domNode:J.current,panZoom:nt,getTransform:()=>_.getState().transform,getViewScale:()=>pt.current}),()=>{var Ot;(Ot=yt.current)==null||Ot.destroy()}},[nt]),et.useEffect(()=>{var Ot;(Ot=yt.current)==null||Ot.update({translateExtent:ft,width:ot,height:ct,inversePan:z,pannable:E,zoomStep:N,zoomable:I})},[E,I,z,N,ft,ot,ct]);const Dt=S?Ot=>{var qt;const[Tt,Yt]=((qt=yt.current)==null?void 0:qt.pointer(Ot))||[0,0];S(Ot,{x:Tt,y:Yt})}:void 0,Vt=x?et.useCallback((Ot,Tt)=>{const Yt=_.getState().nodeLookup.get(Tt);x(Ot,Yt)},[]):void 0;return Q.jsx(eh,{position:v,style:{...n,"--xy-minimap-background-color-props":typeof h=="string"?h:void 0,"--xy-minimap-mask-background-color-props":typeof g=="string"?g:void 0,"--xy-minimap-mask-stroke-color-props":typeof p=="string"?p:void 0,"--xy-minimap-mask-stroke-width-props":typeof w=="number"?w*$:void 0,"--xy-minimap-node-background-color-props":typeof i=="string"?i:void 0,"--xy-minimap-node-stroke-color-props":typeof e=="string"?e:void 0,"--xy-minimap-node-stroke-width-props":typeof c=="string"?c:void 0},className:be(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:Q.jsxs("svg",{width:R,height:Y,viewBox:`${tt} ${rt} ${ut} ${gt}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":dt,ref:J,onClick:Dt,children:[k&&Q.jsx("title",{id:dt,children:k}),Q.jsx(lB,{onClick:Vt,nodeColor:i,nodeStrokeColor:e,nodeBorderRadius:l,nodeClassName:a,nodeStrokeWidth:c,nodeComponent:d}),Q.jsx("path",{className:"react-flow__minimap-mask",d:`M${tt-P},${rt-P}h${ut+P*2}v${gt+P*2}h${-ut-P*2}z
        M${W.x},${W.y}h${W.width}v${W.height}h${-W.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}YT.displayName="MiniMap";const gB=et.memo(YT);function mB({nodeId:n,position:t,variant:e=Nu.Handle,className:i,style:a={},children:l,color:c,minWidth:d=10,minHeight:h=10,maxWidth:g=Number.MAX_VALUE,maxHeight:p=Number.MAX_VALUE,keepAspectRatio:w=!1,shouldResize:v,onResizeStart:S,onResize:x,onResizeEnd:E}){const I=AT(),k=typeof n=="string"?n:I,z=ae(),N=et.useRef(null),O=e===Nu.Line?"right":"bottom-right",_=t??O,J=et.useRef(null);et.useEffect(()=>{if(!(!N.current||!k))return J.current||(J.current=HI({domNode:N.current,nodeId:k,getStoreItems:()=>{const{nodeLookup:nt,transform:ft,snapGrid:ot,snapToGrid:ct,nodeOrigin:R,domNode:Y}=z.getState();return{nodeLookup:nt,transform:ft,snapGrid:ot,snapToGrid:ct,nodeOrigin:R,paneDomNode:Y}},onChange:(nt,ft)=>{const{triggerNodeChanges:ot,nodeLookup:ct,parentLookup:R,nodeOrigin:Y}=z.getState(),D=[],B={x:nt.x,y:nt.y},$=ct.get(k);if($&&$.expandParent&&$.parentId){const q=$.origin??Y,C=nt.width??$.measured.width??0,P=nt.height??$.measured.height??0,tt={id:$.id,parentId:$.parentId,rect:{width:C,height:P,...Fx({x:nt.x??$.position.x,y:nt.y??$.position.y},{width:C,height:P},$.parentId,ct,q)}},rt=fy([tt],ct,R,Y);D.push(...rt),B.x=nt.x?Math.max(q[0]*C,nt.x):void 0,B.y=nt.y?Math.max(q[1]*P,nt.y):void 0}if(B.x!==void 0&&B.y!==void 0){const q={id:k,type:"position",position:{...B}};D.push(q)}if(nt.width!==void 0&&nt.height!==void 0){const q={id:k,type:"dimensions",resizing:!0,setAttributes:!0,dimensions:{width:nt.width,height:nt.height}};D.push(q)}for(const q of ft){const C={...q,type:"position"};D.push(C)}ot(D)},onEnd:()=>{const nt={id:k,type:"dimensions",resizing:!1};z.getState().triggerNodeChanges([nt])}})),J.current.update({controlPosition:_,boundaries:{minWidth:d,minHeight:h,maxWidth:g,maxHeight:p},keepAspectRatio:w,onResizeStart:S,onResize:x,onResizeEnd:E,shouldResize:v}),()=>{var nt;(nt=J.current)==null||nt.destroy()}},[_,d,h,g,p,w,S,x,E,v]);const U=_.split("-"),W=e===Nu.Line?"borderColor":"backgroundColor",F=c?{...a,[W]:c}:a;return Q.jsx("div",{className:be(["react-flow__resize-control","nodrag",...U,e,i]),ref:N,style:F,children:l})}et.memo(mB);function pB(){const{root:n,update:t,loading:e,error:i}=vD(),a=et.useCallback(c=>{t(d=>{for(const h of c)switch(h.type){case"add":d.nodes.push(h.item);break;case"replace":{const g=d.nodes.findIndex(p=>p.id===h.id);d.nodes[g]=h.item}break;case"remove":{const g=d.nodes.findIndex(p=>p.id===h.id);d.nodes.deleteByID(d.nodes[g].getID())}break;case"position":{const g=d.nodes.findIndex(p=>p.id===h.id);d.nodes[g].position=h.position}break;case"select":{const g=d.nodes.findIndex(p=>p.id===h.id);d.nodes[g].selected=h.selected}break}})},[t]),l=et.useCallback(c=>{t(d=>{for(const h of c)switch(h.type){case"add":d.edges.push(h.item);break;case"replace":{const g=d.edges.findIndex(p=>p.id===h.id);d.edges[g]=h.item}break;case"remove":{const g=d.edges.findIndex(p=>p.id===h.id);d.edges.deleteByID(d.edges[g].getID())}break;case"select":{const g=d.edges.findIndex(p=>p.id===h.id);d.edges[g].selected=h.selected}break}})},[t]);return e?Q.jsx("div",{children:"Loading..."}):i?Q.jsxs("div",{children:["Error: ",i.message]}):Q.jsx("div",{style:{position:"fixed",inset:0,height:"100vh"},children:Q.jsxs(HM,{nodes:n.nodes,edges:n.edges,onNodesChange:a,onEdgesChange:l,fitView:!0,children:[Q.jsx(XM,{gap:10,size:1,color:"silver"}),Q.jsx(eB,{orientation:"horizontal",showInteractive:!1}),Q.jsx(gB,{})]})})}const yB=[{id:"1",type:"input",data:{label:"Multiplayer"},position:{x:250,y:25}},{id:"2",data:{label:"Graph"},position:{x:100,y:125}},{id:"3",data:{label:"React Flow"},position:{x:250,y:225},style:{borderColor:"#FF0072"}},{id:"4",type:"output",data:{label:"Yorkie"},position:{x:100,y:325},style:{borderColor:"#944DFA"}}],vB=[{id:"e1-2",source:"1",target:"2",type:"smoothstep"},{id:"e2-3",source:"2",target:"3",label:"with"},{id:"e3-4",source:"3",target:"4",label:"and",animated:!0}],wB={nodes:yB,edges:vB};aN.createRoot(document.getElementById("root")).render(Q.jsxs(et.StrictMode,{children:[Q.jsx(gD,{apiKey:"D6sd9E5ehtXBssmeRZ4QQP",rpcAddr:"https://api.yorkie.dev",children:Q.jsx(yD,{docKey:`react-flow-${new Date().toISOString().substring(0,10).replace(/-/g,"")}`,initialRoot:wB,children:Q.jsx(pB,{})})}),","]}));
