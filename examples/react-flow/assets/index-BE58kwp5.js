(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function n(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function a(o){if(o.ep)return;o.ep=!0;const l=n(o);fetch(o.href,l)}})();function EA(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Wh={exports:{}},Wo={};var Lv;function n2(){if(Lv)return Wo;Lv=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(a,o,l){var c=null;if(l!==void 0&&(c=""+l),o.key!==void 0&&(c=""+o.key),"key"in o){l={};for(var d in o)d!=="key"&&(l[d]=o[d])}else l=o;return o=l.ref,{$$typeof:t,type:a,key:c,ref:o!==void 0?o:null,props:l}}return Wo.Fragment=e,Wo.jsx=n,Wo.jsxs=n,Wo}var zv;function r2(){return zv||(zv=1,Wh.exports=n2()),Wh.exports}var $=r2(),Kh={exports:{}},Ko={},Hh={exports:{}},Fh={};var Uv;function i2(){return Uv||(Uv=1,(function(t){function e(T,V){var Z=T.length;T.push(V);e:for(;0<Z;){var H=Z-1>>>1,ie=T[H];if(0<o(ie,V))T[H]=V,T[Z]=ie,Z=H;else break e}}function n(T){return T.length===0?null:T[0]}function a(T){if(T.length===0)return null;var V=T[0],Z=T.pop();if(Z!==V){T[0]=Z;e:for(var H=0,ie=T.length,C=ie>>>1;H<C;){var L=2*(H+1)-1,ee=T[L],re=L+1,fe=T[re];if(0>o(ee,Z))re<ie&&0>o(fe,ee)?(T[H]=fe,T[re]=Z,H=re):(T[H]=ee,T[L]=Z,H=L);else if(re<ie&&0>o(fe,Z))T[H]=fe,T[re]=Z,H=re;else break e}}return V}function o(T,V){var Z=T.sortIndex-V.sortIndex;return Z!==0?Z:T.id-V.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();t.unstable_now=function(){return c.now()-d}}var m=[],h=[],p=1,y=null,v=3,S=!1,E=!1,A=!1,R=!1,x=typeof setTimeout=="function"?setTimeout:null,Y=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function I(T){for(var V=n(h);V!==null;){if(V.callback===null)a(h);else if(V.startTime<=T)a(h),V.sortIndex=V.expirationTime,e(m,V);else break;V=n(h)}}function O(T){if(A=!1,I(T),!E)if(n(m)!==null)E=!0,B||(B=!0,te());else{var V=n(h);V!==null&&K(O,V.startTime-T)}}var B=!1,M=-1,W=5,q=-1;function de(){return R?!0:!(t.unstable_now()-q<W)}function ne(){if(R=!1,B){var T=t.unstable_now();q=T;var V=!0;try{e:{E=!1,A&&(A=!1,Y(M),M=-1),S=!0;var Z=v;try{t:{for(I(T),y=n(m);y!==null&&!(y.expirationTime>T&&de());){var H=y.callback;if(typeof H=="function"){y.callback=null,v=y.priorityLevel;var ie=H(y.expirationTime<=T);if(T=t.unstable_now(),typeof ie=="function"){y.callback=ie,I(T),V=!0;break t}y===n(m)&&a(m),I(T)}else a(m);y=n(m)}if(y!==null)V=!0;else{var C=n(h);C!==null&&K(O,C.startTime-T),V=!1}}break e}finally{y=null,v=Z,S=!1}V=void 0}}finally{V?te():B=!1}}}var te;if(typeof N=="function")te=function(){N(ne)};else if(typeof MessageChannel<"u"){var le=new MessageChannel,_=le.port2;le.port1.onmessage=ne,te=function(){_.postMessage(null)}}else te=function(){x(ne,0)};function K(T,V){M=x(function(){T(t.unstable_now())},V)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(T){T.callback=null},t.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W=0<T?Math.floor(1e3/T):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_next=function(T){switch(v){case 1:case 2:case 3:var V=3;break;default:V=v}var Z=v;v=V;try{return T()}finally{v=Z}},t.unstable_requestPaint=function(){R=!0},t.unstable_runWithPriority=function(T,V){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var Z=v;v=T;try{return V()}finally{v=Z}},t.unstable_scheduleCallback=function(T,V,Z){var H=t.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?H+Z:H):Z=H,T){case 1:var ie=-1;break;case 2:ie=250;break;case 5:ie=1073741823;break;case 4:ie=1e4;break;default:ie=5e3}return ie=Z+ie,T={id:p++,callback:V,priorityLevel:T,startTime:Z,expirationTime:ie,sortIndex:-1},Z>H?(T.sortIndex=Z,e(h,T),n(m)===null&&T===n(h)&&(A?(Y(M),M=-1):A=!0,K(O,Z-H))):(T.sortIndex=ie,e(m,T),E||S||(E=!0,B||(B=!0,te()))),T},t.unstable_shouldYield=de,t.unstable_wrapCallback=function(T){var V=v;return function(){var Z=v;v=V;try{return T.apply(this,arguments)}finally{v=Z}}}})(Fh)),Fh}var Yv;function a2(){return Yv||(Yv=1,Hh.exports=i2()),Hh.exports}var Jh={exports:{}},Ie={};var Zv;function s2(){if(Zv)return Ie;Zv=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),v=Symbol.iterator;function S(C){return C===null||typeof C!="object"?null:(C=v&&C[v]||C["@@iterator"],typeof C=="function"?C:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,R={};function x(C,L,ee){this.props=C,this.context=L,this.refs=R,this.updater=ee||E}x.prototype.isReactComponent={},x.prototype.setState=function(C,L){if(typeof C!="object"&&typeof C!="function"&&C!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,C,L,"setState")},x.prototype.forceUpdate=function(C){this.updater.enqueueForceUpdate(this,C,"forceUpdate")};function Y(){}Y.prototype=x.prototype;function N(C,L,ee){this.props=C,this.context=L,this.refs=R,this.updater=ee||E}var I=N.prototype=new Y;I.constructor=N,A(I,x.prototype),I.isPureReactComponent=!0;var O=Array.isArray;function B(){}var M={H:null,A:null,T:null,S:null},W=Object.prototype.hasOwnProperty;function q(C,L,ee){var re=ee.ref;return{$$typeof:t,type:C,key:L,ref:re!==void 0?re:null,props:ee}}function de(C,L){return q(C.type,L,C.props)}function ne(C){return typeof C=="object"&&C!==null&&C.$$typeof===t}function te(C){var L={"=":"=0",":":"=2"};return"$"+C.replace(/[=:]/g,function(ee){return L[ee]})}var le=/\/+/g;function _(C,L){return typeof C=="object"&&C!==null&&C.key!=null?te(""+C.key):L.toString(36)}function K(C){switch(C.status){case"fulfilled":return C.value;case"rejected":throw C.reason;default:switch(typeof C.status=="string"?C.then(B,B):(C.status="pending",C.then(function(L){C.status==="pending"&&(C.status="fulfilled",C.value=L)},function(L){C.status==="pending"&&(C.status="rejected",C.reason=L)})),C.status){case"fulfilled":return C.value;case"rejected":throw C.reason}}throw C}function T(C,L,ee,re,fe){var ge=typeof C;(ge==="undefined"||ge==="boolean")&&(C=null);var he=!1;if(C===null)he=!0;else switch(ge){case"bigint":case"string":case"number":he=!0;break;case"object":switch(C.$$typeof){case t:case e:he=!0;break;case p:return he=C._init,T(he(C._payload),L,ee,re,fe)}}if(he)return fe=fe(C),he=re===""?"."+_(C,0):re,O(fe)?(ee="",he!=null&&(ee=he.replace(le,"$&/")+"/"),T(fe,L,ee,"",function(_e){return _e})):fe!=null&&(ne(fe)&&(fe=de(fe,ee+(fe.key==null||C&&C.key===fe.key?"":(""+fe.key).replace(le,"$&/")+"/")+he)),L.push(fe)),1;he=0;var ce=re===""?".":re+":";if(O(C))for(var me=0;me<C.length;me++)re=C[me],ge=ce+_(re,me),he+=T(re,L,ee,ge,fe);else if(me=S(C),typeof me=="function")for(C=me.call(C),me=0;!(re=C.next()).done;)re=re.value,ge=ce+_(re,me++),he+=T(re,L,ee,ge,fe);else if(ge==="object"){if(typeof C.then=="function")return T(K(C),L,ee,re,fe);throw L=String(C),Error("Objects are not valid as a React child (found: "+(L==="[object Object]"?"object with keys {"+Object.keys(C).join(", ")+"}":L)+"). If you meant to render a collection of children, use an array instead.")}return he}function V(C,L,ee){if(C==null)return C;var re=[],fe=0;return T(C,re,"","",function(ge){return L.call(ee,ge,fe++)}),re}function Z(C){if(C._status===-1){var L=C._result;L=L(),L.then(function(ee){(C._status===0||C._status===-1)&&(C._status=1,C._result=ee)},function(ee){(C._status===0||C._status===-1)&&(C._status=2,C._result=ee)}),C._status===-1&&(C._status=0,C._result=L)}if(C._status===1)return C._result.default;throw C._result}var H=typeof reportError=="function"?reportError:function(C){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var L=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof C=="object"&&C!==null&&typeof C.message=="string"?String(C.message):String(C),error:C});if(!window.dispatchEvent(L))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",C);return}console.error(C)},ie={map:V,forEach:function(C,L,ee){V(C,function(){L.apply(this,arguments)},ee)},count:function(C){var L=0;return V(C,function(){L++}),L},toArray:function(C){return V(C,function(L){return L})||[]},only:function(C){if(!ne(C))throw Error("React.Children.only expected to receive a single React element child.");return C}};return Ie.Activity=y,Ie.Children=ie,Ie.Component=x,Ie.Fragment=n,Ie.Profiler=o,Ie.PureComponent=N,Ie.StrictMode=a,Ie.Suspense=m,Ie.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,Ie.__COMPILER_RUNTIME={__proto__:null,c:function(C){return M.H.useMemoCache(C)}},Ie.cache=function(C){return function(){return C.apply(null,arguments)}},Ie.cacheSignal=function(){return null},Ie.cloneElement=function(C,L,ee){if(C==null)throw Error("The argument must be a React element, but you passed "+C+".");var re=A({},C.props),fe=C.key;if(L!=null)for(ge in L.key!==void 0&&(fe=""+L.key),L)!W.call(L,ge)||ge==="key"||ge==="__self"||ge==="__source"||ge==="ref"&&L.ref===void 0||(re[ge]=L[ge]);var ge=arguments.length-2;if(ge===1)re.children=ee;else if(1<ge){for(var he=Array(ge),ce=0;ce<ge;ce++)he[ce]=arguments[ce+2];re.children=he}return q(C.type,fe,re)},Ie.createContext=function(C){return C={$$typeof:c,_currentValue:C,_currentValue2:C,_threadCount:0,Provider:null,Consumer:null},C.Provider=C,C.Consumer={$$typeof:l,_context:C},C},Ie.createElement=function(C,L,ee){var re,fe={},ge=null;if(L!=null)for(re in L.key!==void 0&&(ge=""+L.key),L)W.call(L,re)&&re!=="key"&&re!=="__self"&&re!=="__source"&&(fe[re]=L[re]);var he=arguments.length-2;if(he===1)fe.children=ee;else if(1<he){for(var ce=Array(he),me=0;me<he;me++)ce[me]=arguments[me+2];fe.children=ce}if(C&&C.defaultProps)for(re in he=C.defaultProps,he)fe[re]===void 0&&(fe[re]=he[re]);return q(C,ge,fe)},Ie.createRef=function(){return{current:null}},Ie.forwardRef=function(C){return{$$typeof:d,render:C}},Ie.isValidElement=ne,Ie.lazy=function(C){return{$$typeof:p,_payload:{_status:-1,_result:C},_init:Z}},Ie.memo=function(C,L){return{$$typeof:h,type:C,compare:L===void 0?null:L}},Ie.startTransition=function(C){var L=M.T,ee={};M.T=ee;try{var re=C(),fe=M.S;fe!==null&&fe(ee,re),typeof re=="object"&&re!==null&&typeof re.then=="function"&&re.then(B,H)}catch(ge){H(ge)}finally{L!==null&&ee.types!==null&&(L.types=ee.types),M.T=L}},Ie.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},Ie.use=function(C){return M.H.use(C)},Ie.useActionState=function(C,L,ee){return M.H.useActionState(C,L,ee)},Ie.useCallback=function(C,L){return M.H.useCallback(C,L)},Ie.useContext=function(C){return M.H.useContext(C)},Ie.useDebugValue=function(){},Ie.useDeferredValue=function(C,L){return M.H.useDeferredValue(C,L)},Ie.useEffect=function(C,L){return M.H.useEffect(C,L)},Ie.useEffectEvent=function(C){return M.H.useEffectEvent(C)},Ie.useId=function(){return M.H.useId()},Ie.useImperativeHandle=function(C,L,ee){return M.H.useImperativeHandle(C,L,ee)},Ie.useInsertionEffect=function(C,L){return M.H.useInsertionEffect(C,L)},Ie.useLayoutEffect=function(C,L){return M.H.useLayoutEffect(C,L)},Ie.useMemo=function(C,L){return M.H.useMemo(C,L)},Ie.useOptimistic=function(C,L){return M.H.useOptimistic(C,L)},Ie.useReducer=function(C,L,ee){return M.H.useReducer(C,L,ee)},Ie.useRef=function(C){return M.H.useRef(C)},Ie.useState=function(C){return M.H.useState(C)},Ie.useSyncExternalStore=function(C,L,ee){return M.H.useSyncExternalStore(C,L,ee)},Ie.useTransition=function(){return M.H.useTransition()},Ie.version="19.2.1",Ie}var Gv;function _l(){return Gv||(Gv=1,Jh.exports=s2()),Jh.exports}var jh={exports:{}},kt={};var kv;function o2(){if(kv)return kt;kv=1;var t=_l();function e(m){var h="https://react.dev/errors/"+m;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)h+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+m+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var a={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function l(m,h,p){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:y==null?null:""+y,children:m,containerInfo:h,implementation:p}}var c=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(m,h){if(m==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return kt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,kt.createPortal=function(m,h){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return l(m,h,null,p)},kt.flushSync=function(m){var h=c.T,p=a.p;try{if(c.T=null,a.p=2,m)return m()}finally{c.T=h,a.p=p,a.d.f()}},kt.preconnect=function(m,h){typeof m=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,a.d.C(m,h))},kt.prefetchDNS=function(m){typeof m=="string"&&a.d.D(m)},kt.preinit=function(m,h){if(typeof m=="string"&&h&&typeof h.as=="string"){var p=h.as,y=d(p,h.crossOrigin),v=typeof h.integrity=="string"?h.integrity:void 0,S=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;p==="style"?a.d.S(m,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:y,integrity:v,fetchPriority:S}):p==="script"&&a.d.X(m,{crossOrigin:y,integrity:v,fetchPriority:S,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},kt.preinitModule=function(m,h){if(typeof m=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var p=d(h.as,h.crossOrigin);a.d.M(m,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&a.d.M(m)},kt.preload=function(m,h){if(typeof m=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var p=h.as,y=d(p,h.crossOrigin);a.d.L(m,p,{crossOrigin:y,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},kt.preloadModule=function(m,h){if(typeof m=="string")if(h){var p=d(h.as,h.crossOrigin);a.d.m(m,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else a.d.m(m)},kt.requestFormReset=function(m){a.d.r(m)},kt.unstable_batchedUpdates=function(m,h){return m(h)},kt.useFormState=function(m,h,p){return c.H.useFormState(m,h,p)},kt.useFormStatus=function(){return c.H.useHostTransitionStatus()},kt.version="19.2.1",kt}var Xv;function wA(){if(Xv)return jh.exports;Xv=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),jh.exports=o2(),jh.exports}var Wv;function l2(){if(Wv)return Ko;Wv=1;var t=a2(),e=_l(),n=wA();function a(r){var i="https://react.dev/errors/"+r;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)i+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+r+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function l(r){var i=r,s=r;if(r.alternate)for(;i.return;)i=i.return;else{r=i;do i=r,(i.flags&4098)!==0&&(s=i.return),r=i.return;while(r)}return i.tag===3?s:null}function c(r){if(r.tag===13){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function d(r){if(r.tag===31){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function m(r){if(l(r)!==r)throw Error(a(188))}function h(r){var i=r.alternate;if(!i){if(i=l(r),i===null)throw Error(a(188));return i!==r?null:r}for(var s=r,u=i;;){var f=s.return;if(f===null)break;var g=f.alternate;if(g===null){if(u=f.return,u!==null){s=u;continue}break}if(f.child===g.child){for(g=f.child;g;){if(g===s)return m(f),r;if(g===u)return m(f),i;g=g.sibling}throw Error(a(188))}if(s.return!==u.return)s=f,u=g;else{for(var b=!1,w=f.child;w;){if(w===s){b=!0,s=f,u=g;break}if(w===u){b=!0,u=f,s=g;break}w=w.sibling}if(!b){for(w=g.child;w;){if(w===s){b=!0,s=g,u=f;break}if(w===u){b=!0,u=g,s=f;break}w=w.sibling}if(!b)throw Error(a(189))}}if(s.alternate!==u)throw Error(a(190))}if(s.tag!==3)throw Error(a(188));return s.stateNode.current===s?r:i}function p(r){var i=r.tag;if(i===5||i===26||i===27||i===6)return r;for(r=r.child;r!==null;){if(i=p(r),i!==null)return i;r=r.sibling}return null}var y=Object.assign,v=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),E=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),Y=Symbol.for("react.consumer"),N=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),B=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),W=Symbol.for("react.lazy"),q=Symbol.for("react.activity"),de=Symbol.for("react.memo_cache_sentinel"),ne=Symbol.iterator;function te(r){return r===null||typeof r!="object"?null:(r=ne&&r[ne]||r["@@iterator"],typeof r=="function"?r:null)}var le=Symbol.for("react.client.reference");function _(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===le?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case A:return"Fragment";case x:return"Profiler";case R:return"StrictMode";case O:return"Suspense";case B:return"SuspenseList";case q:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case E:return"Portal";case N:return r.displayName||"Context";case Y:return(r._context.displayName||"Context")+".Consumer";case I:var i=r.render;return r=r.displayName,r||(r=i.displayName||i.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case M:return i=r.displayName||null,i!==null?i:_(r.type)||"Memo";case W:i=r._payload,r=r._init;try{return _(r(i))}catch{}}return null}var K=Array.isArray,T=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z={pending:!1,data:null,method:null,action:null},H=[],ie=-1;function C(r){return{current:r}}function L(r){0>ie||(r.current=H[ie],H[ie]=null,ie--)}function ee(r,i){ie++,H[ie]=r.current,r.current=i}var re=C(null),fe=C(null),ge=C(null),he=C(null);function ce(r,i){switch(ee(ge,i),ee(fe,r),ee(re,null),i.nodeType){case 9:case 11:r=(r=i.documentElement)&&(r=r.namespaceURI)?av(r):0;break;default:if(r=i.tagName,i=i.namespaceURI)i=av(i),r=sv(i,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}L(re),ee(re,r)}function me(){L(re),L(fe),L(ge)}function _e(r){r.memoizedState!==null&&ee(he,r);var i=re.current,s=sv(i,r.type);i!==s&&(ee(fe,r),ee(re,s))}function Re(r){fe.current===r&&(L(re),L(fe)),he.current===r&&(L(he),Zo._currentValue=Z)}var Ne,Te;function Ye(r){if(Ne===void 0)try{throw Error()}catch(s){var i=s.stack.trim().match(/\n( *(at )?)/);Ne=i&&i[1]||"",Te=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ne+r+Te}var Qe=!1;function qe(r,i){if(!r||Qe)return"";Qe=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(i){var oe=function(){throw Error()};if(Object.defineProperty(oe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(oe,[])}catch(Q){var j=Q}Reflect.construct(r,[],oe)}else{try{oe.call()}catch(Q){j=Q}r.call(oe.prototype)}}else{try{throw Error()}catch(Q){j=Q}(oe=r())&&typeof oe.catch=="function"&&oe.catch(function(){})}}catch(Q){if(Q&&j&&typeof Q.stack=="string")return[Q.stack,j.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=u.DetermineComponentFrameRoot(),b=g[0],w=g[1];if(b&&w){var D=b.split(`
`),J=w.split(`
`);for(f=u=0;u<D.length&&!D[u].includes("DetermineComponentFrameRoot");)u++;for(;f<J.length&&!J[f].includes("DetermineComponentFrameRoot");)f++;if(u===D.length||f===J.length)for(u=D.length-1,f=J.length-1;1<=u&&0<=f&&D[u]!==J[f];)f--;for(;1<=u&&0<=f;u--,f--)if(D[u]!==J[f]){if(u!==1||f!==1)do if(u--,f--,0>f||D[u]!==J[f]){var ae=`
`+D[u].replace(" at new "," at ");return r.displayName&&ae.includes("<anonymous>")&&(ae=ae.replace("<anonymous>",r.displayName)),ae}while(1<=u&&0<=f);break}}}finally{Qe=!1,Error.prepareStackTrace=s}return(s=r?r.displayName||r.name:"")?Ye(s):""}function Tt(r,i){switch(r.tag){case 26:case 27:case 5:return Ye(r.type);case 16:return Ye("Lazy");case 13:return r.child!==i&&i!==null?Ye("Suspense Fallback"):Ye("Suspense");case 19:return Ye("SuspenseList");case 0:case 15:return qe(r.type,!1);case 11:return qe(r.type.render,!1);case 1:return qe(r.type,!0);case 31:return Ye("Activity");default:return""}}function Sn(r){try{var i="",s=null;do i+=Tt(r,s),s=r,r=r.return;while(r);return i}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var Ln=Object.prototype.hasOwnProperty,$r=t.unstable_scheduleCallback,Pr=t.unstable_cancelCallback,Gi=t.unstable_shouldYield,ki=t.unstable_requestPaint,Vt=t.unstable_now,xa=t.unstable_getCurrentPriorityLevel,yr=t.unstable_ImmediatePriority,Qr=t.unstable_UserBlockingPriority,Xi=t.unstable_NormalPriority,Cf=t.unstable_LowPriority,Ta=t.unstable_IdlePriority,If=t.log,Rf=t.unstable_setDisableYieldValue,Wi=null,Ht=null;function er(r){if(typeof If=="function"&&Rf(r),Ht&&typeof Ht.setStrictMode=="function")try{Ht.setStrictMode(Wi,r)}catch{}}var Ft=Math.clz32?Math.clz32:Vf,Df=Math.log,_f=Math.LN2;function Vf(r){return r>>>=0,r===0?32:31-(Df(r)/_f|0)|0}var Ca=256,Ia=262144,Ra=4194304;function vr(r){var i=r&42;if(i!==0)return i;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function Da(r,i,s){var u=r.pendingLanes;if(u===0)return 0;var f=0,g=r.suspendedLanes,b=r.pingedLanes;r=r.warmLanes;var w=u&134217727;return w!==0?(u=w&~g,u!==0?f=vr(u):(b&=w,b!==0?f=vr(b):s||(s=w&~r,s!==0&&(f=vr(s))))):(w=u&~g,w!==0?f=vr(w):b!==0?f=vr(b):s||(s=u&~r,s!==0&&(f=vr(s)))),f===0?0:i!==0&&i!==f&&(i&g)===0&&(g=f&-f,s=i&-i,g>=s||g===32&&(s&4194048)!==0)?i:f}function Ki(r,i){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&i)===0}function Of(r,i){switch(r){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Xl(){var r=Ra;return Ra<<=1,(Ra&62914560)===0&&(Ra=4194304),r}function $s(r){for(var i=[],s=0;31>s;s++)i.push(r);return i}function Hi(r,i){r.pendingLanes|=i,i!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function Mf(r,i,s,u,f,g){var b=r.pendingLanes;r.pendingLanes=s,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=s,r.entangledLanes&=s,r.errorRecoveryDisabledLanes&=s,r.shellSuspendCounter=0;var w=r.entanglements,D=r.expirationTimes,J=r.hiddenUpdates;for(s=b&~s;0<s;){var ae=31-Ft(s),oe=1<<ae;w[ae]=0,D[ae]=-1;var j=J[ae];if(j!==null)for(J[ae]=null,ae=0;ae<j.length;ae++){var Q=j[ae];Q!==null&&(Q.lane&=-536870913)}s&=~oe}u!==0&&Wl(r,u,0),g!==0&&f===0&&r.tag!==0&&(r.suspendedLanes|=g&~(b&~i))}function Wl(r,i,s){r.pendingLanes|=i,r.suspendedLanes&=~i;var u=31-Ft(i);r.entangledLanes|=i,r.entanglements[u]=r.entanglements[u]|1073741824|s&261930}function Kl(r,i){var s=r.entangledLanes|=i;for(r=r.entanglements;s;){var u=31-Ft(s),f=1<<u;f&i|r[u]&i&&(r[u]|=i),s&=~f}}function Hl(r,i){var s=i&-i;return s=(s&42)!==0?1:Ps(s),(s&(r.suspendedLanes|i))!==0?0:s}function Ps(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function Qs(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function Fl(){var r=V.p;return r!==0?r:(r=window.event,r===void 0?32:Rv(r.type))}function Jl(r,i){var s=V.p;try{return V.p=r,i()}finally{V.p=s}}var tr=Math.random().toString(36).slice(2),Ct="__reactFiber$"+tr,Zt="__reactProps$"+tr,br="__reactContainer$"+tr,_a="__reactEvents$"+tr,jl="__reactListeners$"+tr,Bf="__reactHandles$"+tr,$l="__reactResources$"+tr,Fi="__reactMarker$"+tr;function qs(r){delete r[Ct],delete r[Zt],delete r[_a],delete r[jl],delete r[Bf]}function qr(r){var i=r[Ct];if(i)return i;for(var s=r.parentNode;s;){if(i=s[br]||s[Ct]){if(s=i.alternate,i.child!==null||s!==null&&s.child!==null)for(r=hv(r);r!==null;){if(s=r[Ct])return s;r=hv(r)}return i}r=s,s=r.parentNode}return null}function ei(r){if(r=r[Ct]||r[br]){var i=r.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return r}return null}function ti(r){var i=r.tag;if(i===5||i===26||i===27||i===6)return r.stateNode;throw Error(a(33))}function ni(r){var i=r[$l];return i||(i=r[$l]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function St(r){r[Fi]=!0}var Pl=new Set,Ql={};function Sr(r,i){ri(r,i),ri(r+"Capture",i)}function ri(r,i){for(Ql[r]=i,r=0;r<i.length;r++)Pl.add(i[r])}var Lf=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),eo={},ql={};function zf(r){return Ln.call(ql,r)?!0:Ln.call(eo,r)?!1:Lf.test(r)?ql[r]=!0:(eo[r]=!0,!1)}function Va(r,i,s){if(zf(i))if(s===null)r.removeAttribute(i);else{switch(typeof s){case"undefined":case"function":case"symbol":r.removeAttribute(i);return;case"boolean":var u=i.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){r.removeAttribute(i);return}}r.setAttribute(i,""+s)}}function Oa(r,i,s){if(s===null)r.removeAttribute(i);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(i);return}r.setAttribute(i,""+s)}}function zn(r,i,s,u){if(u===null)r.removeAttribute(s);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(s);return}r.setAttributeNS(i,s,""+u)}}function jt(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function eu(r){var i=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Uf(r,i,s){var u=Object.getOwnPropertyDescriptor(r.constructor.prototype,i);if(!r.hasOwnProperty(i)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var f=u.get,g=u.set;return Object.defineProperty(r,i,{configurable:!0,get:function(){return f.call(this)},set:function(b){s=""+b,g.call(this,b)}}),Object.defineProperty(r,i,{enumerable:u.enumerable}),{getValue:function(){return s},setValue:function(b){s=""+b},stopTracking:function(){r._valueTracker=null,delete r[i]}}}}function Ma(r){if(!r._valueTracker){var i=eu(r)?"checked":"value";r._valueTracker=Uf(r,i,""+r[i])}}function tu(r){if(!r)return!1;var i=r._valueTracker;if(!i)return!0;var s=i.getValue(),u="";return r&&(u=eu(r)?r.checked?"true":"false":r.value),r=u,r!==s?(i.setValue(r),!0):!1}function Ba(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var Yf=/[\n"\\]/g;function Gt(r){return r.replace(Yf,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function to(r,i,s,u,f,g,b,w){r.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?r.type=b:r.removeAttribute("type"),i!=null?b==="number"?(i===0&&r.value===""||r.value!=i)&&(r.value=""+jt(i)):r.value!==""+jt(i)&&(r.value=""+jt(i)):b!=="submit"&&b!=="reset"||r.removeAttribute("value"),i!=null?La(r,b,jt(i)):s!=null?La(r,b,jt(s)):u!=null&&r.removeAttribute("value"),f==null&&g!=null&&(r.defaultChecked=!!g),f!=null&&(r.checked=f&&typeof f!="function"&&typeof f!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?r.name=""+jt(w):r.removeAttribute("name")}function nu(r,i,s,u,f,g,b,w){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(r.type=g),i!=null||s!=null){if(!(g!=="submit"&&g!=="reset"||i!=null)){Ma(r);return}s=s!=null?""+jt(s):"",i=i!=null?""+jt(i):s,w||i===r.value||(r.value=i),r.defaultValue=i}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,r.checked=w?r.checked:!!u,r.defaultChecked=!!u,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(r.name=b),Ma(r)}function La(r,i,s){i==="number"&&Ba(r.ownerDocument)===r||r.defaultValue===""+s||(r.defaultValue=""+s)}function za(r,i,s,u){if(r=r.options,i){i={};for(var f=0;f<s.length;f++)i["$"+s[f]]=!0;for(s=0;s<r.length;s++)f=i.hasOwnProperty("$"+r[s].value),r[s].selected!==f&&(r[s].selected=f),f&&u&&(r[s].defaultSelected=!0)}else{for(s=""+jt(s),i=null,f=0;f<r.length;f++){if(r[f].value===s){r[f].selected=!0,u&&(r[f].defaultSelected=!0);return}i!==null||r[f].disabled||(i=r[f])}i!==null&&(i.selected=!0)}}function ep(r,i,s){if(i!=null&&(i=""+jt(i),i!==r.value&&(r.value=i),s==null)){r.defaultValue!==i&&(r.defaultValue=i);return}r.defaultValue=s!=null?""+jt(s):""}function tp(r,i,s,u){if(i==null){if(u!=null){if(s!=null)throw Error(a(92));if(K(u)){if(1<u.length)throw Error(a(93));u=u[0]}s=u}s==null&&(s=""),i=s}s=jt(i),r.defaultValue=s,u=r.textContent,u===s&&u!==""&&u!==null&&(r.value=u),Ma(r)}function Ua(r,i){if(i){var s=r.firstChild;if(s&&s===r.lastChild&&s.nodeType===3){s.nodeValue=i;return}}r.textContent=i}var Pw=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function np(r,i,s){var u=i.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?u?r.setProperty(i,""):i==="float"?r.cssFloat="":r[i]="":u?r.setProperty(i,s):typeof s!="number"||s===0||Pw.has(i)?i==="float"?r.cssFloat=s:r[i]=(""+s).trim():r[i]=s+"px"}function rp(r,i,s){if(i!=null&&typeof i!="object")throw Error(a(62));if(r=r.style,s!=null){for(var u in s)!s.hasOwnProperty(u)||i!=null&&i.hasOwnProperty(u)||(u.indexOf("--")===0?r.setProperty(u,""):u==="float"?r.cssFloat="":r[u]="");for(var f in i)u=i[f],i.hasOwnProperty(f)&&s[f]!==u&&np(r,f,u)}else for(var g in i)i.hasOwnProperty(g)&&np(r,g,i[g])}function Zf(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qw=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),qw=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ru(r){return qw.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function Ar(){}var Gf=null;function kf(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Ya=null,Za=null;function ip(r){var i=ei(r);if(i&&(r=i.stateNode)){var s=r[Zt]||null;e:switch(r=i.stateNode,i.type){case"input":if(to(r,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),i=s.name,s.type==="radio"&&i!=null){for(s=r;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+Gt(""+i)+'"][type="radio"]'),i=0;i<s.length;i++){var u=s[i];if(u!==r&&u.form===r.form){var f=u[Zt]||null;if(!f)throw Error(a(90));to(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<s.length;i++)u=s[i],u.form===r.form&&tu(u)}break e;case"textarea":ep(r,s.value,s.defaultValue);break e;case"select":i=s.value,i!=null&&za(r,!!s.multiple,i,!1)}}}var Xf=!1;function ap(r,i,s){if(Xf)return r(i,s);Xf=!0;try{var u=r(i);return u}finally{if(Xf=!1,(Ya!==null||Za!==null)&&(Wu(),Ya&&(i=Ya,r=Za,Za=Ya=null,ip(i),r)))for(i=0;i<r.length;i++)ip(r[i])}}function no(r,i){var s=r.stateNode;if(s===null)return null;var u=s[Zt]||null;if(u===null)return null;s=u[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(r=r.type,u=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!u;break e;default:r=!1}if(r)return null;if(s&&typeof s!="function")throw Error(a(231,i,typeof s));return s}var Er=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Wf=!1;if(Er)try{var ro={};Object.defineProperty(ro,"passive",{get:function(){Wf=!0}}),window.addEventListener("test",ro,ro),window.removeEventListener("test",ro,ro)}catch{Wf=!1}var ii=null,Kf=null,iu=null;function sp(){if(iu)return iu;var r,i=Kf,s=i.length,u,f="value"in ii?ii.value:ii.textContent,g=f.length;for(r=0;r<s&&i[r]===f[r];r++);var b=s-r;for(u=1;u<=b&&i[s-u]===f[g-u];u++);return iu=f.slice(r,1<u?1-u:void 0)}function au(r){var i=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&i===13&&(r=13)):r=i,r===10&&(r=13),32<=r||r===13?r:0}function su(){return!0}function op(){return!1}function $t(r){function i(s,u,f,g,b){this._reactName=s,this._targetInst=f,this.type=u,this.nativeEvent=g,this.target=b,this.currentTarget=null;for(var w in r)r.hasOwnProperty(w)&&(s=r[w],this[w]=s?s(g):g[w]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?su:op,this.isPropagationStopped=op,this}return y(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=su)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=su)},persist:function(){},isPersistent:su}),i}var Ji={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ou=$t(Ji),io=y({},Ji,{view:0,detail:0}),eN=$t(io),Hf,Ff,ao,lu=y({},io,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:jf,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==ao&&(ao&&r.type==="mousemove"?(Hf=r.screenX-ao.screenX,Ff=r.screenY-ao.screenY):Ff=Hf=0,ao=r),Hf)},movementY:function(r){return"movementY"in r?r.movementY:Ff}}),lp=$t(lu),tN=y({},lu,{dataTransfer:0}),nN=$t(tN),rN=y({},io,{relatedTarget:0}),Jf=$t(rN),iN=y({},Ji,{animationName:0,elapsedTime:0,pseudoElement:0}),aN=$t(iN),sN=y({},Ji,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),oN=$t(sN),lN=y({},Ji,{data:0}),up=$t(lN),uN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dN(r){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(r):(r=fN[r])?!!i[r]:!1}function jf(){return dN}var hN=y({},io,{key:function(r){if(r.key){var i=uN[r.key]||r.key;if(i!=="Unidentified")return i}return r.type==="keypress"?(r=au(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?cN[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:jf,charCode:function(r){return r.type==="keypress"?au(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?au(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),gN=$t(hN),mN=y({},lu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cp=$t(mN),pN=y({},io,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:jf}),yN=$t(pN),vN=y({},Ji,{propertyName:0,elapsedTime:0,pseudoElement:0}),bN=$t(vN),SN=y({},lu,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),AN=$t(SN),EN=y({},Ji,{newState:0,oldState:0}),wN=$t(EN),NN=[9,13,27,32],$f=Er&&"CompositionEvent"in window,so=null;Er&&"documentMode"in document&&(so=document.documentMode);var xN=Er&&"TextEvent"in window&&!so,fp=Er&&(!$f||so&&8<so&&11>=so),dp=" ",hp=!1;function gp(r,i){switch(r){case"keyup":return NN.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function mp(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Ga=!1;function TN(r,i){switch(r){case"compositionend":return mp(i);case"keypress":return i.which!==32?null:(hp=!0,dp);case"textInput":return r=i.data,r===dp&&hp?null:r;default:return null}}function CN(r,i){if(Ga)return r==="compositionend"||!$f&&gp(r,i)?(r=sp(),iu=Kf=ii=null,Ga=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return fp&&i.locale!=="ko"?null:i.data;default:return null}}var IN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pp(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i==="input"?!!IN[r.type]:i==="textarea"}function yp(r,i,s,u){Ya?Za?Za.push(u):Za=[u]:Ya=u,i=Pu(i,"onChange"),0<i.length&&(s=new ou("onChange","change",null,s,u),r.push({event:s,listeners:i}))}var oo=null,lo=null;function RN(r){q0(r,0)}function uu(r){var i=ti(r);if(tu(i))return r}function vp(r,i){if(r==="change")return i}var bp=!1;if(Er){var Pf;if(Er){var Qf="oninput"in document;if(!Qf){var Sp=document.createElement("div");Sp.setAttribute("oninput","return;"),Qf=typeof Sp.oninput=="function"}Pf=Qf}else Pf=!1;bp=Pf&&(!document.documentMode||9<document.documentMode)}function Ap(){oo&&(oo.detachEvent("onpropertychange",Ep),lo=oo=null)}function Ep(r){if(r.propertyName==="value"&&uu(lo)){var i=[];yp(i,lo,r,kf(r)),ap(RN,i)}}function DN(r,i,s){r==="focusin"?(Ap(),oo=i,lo=s,oo.attachEvent("onpropertychange",Ep)):r==="focusout"&&Ap()}function _N(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return uu(lo)}function VN(r,i){if(r==="click")return uu(i)}function ON(r,i){if(r==="input"||r==="change")return uu(i)}function MN(r,i){return r===i&&(r!==0||1/r===1/i)||r!==r&&i!==i}var un=typeof Object.is=="function"?Object.is:MN;function uo(r,i){if(un(r,i))return!0;if(typeof r!="object"||r===null||typeof i!="object"||i===null)return!1;var s=Object.keys(r),u=Object.keys(i);if(s.length!==u.length)return!1;for(u=0;u<s.length;u++){var f=s[u];if(!Ln.call(i,f)||!un(r[f],i[f]))return!1}return!0}function wp(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Np(r,i){var s=wp(r);r=0;for(var u;s;){if(s.nodeType===3){if(u=r+s.textContent.length,r<=i&&u>=i)return{node:s,offset:i-r};r=u}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=wp(s)}}function xp(r,i){return r&&i?r===i?!0:r&&r.nodeType===3?!1:i&&i.nodeType===3?xp(r,i.parentNode):"contains"in r?r.contains(i):r.compareDocumentPosition?!!(r.compareDocumentPosition(i)&16):!1:!1}function Tp(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var i=Ba(r.document);i instanceof r.HTMLIFrameElement;){try{var s=typeof i.contentWindow.location.href=="string"}catch{s=!1}if(s)r=i.contentWindow;else break;i=Ba(r.document)}return i}function qf(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i&&(i==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||i==="textarea"||r.contentEditable==="true")}var BN=Er&&"documentMode"in document&&11>=document.documentMode,ka=null,ed=null,co=null,td=!1;function Cp(r,i,s){var u=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;td||ka==null||ka!==Ba(u)||(u=ka,"selectionStart"in u&&qf(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),co&&uo(co,u)||(co=u,u=Pu(ed,"onSelect"),0<u.length&&(i=new ou("onSelect","select",null,i,s),r.push({event:i,listeners:u}),i.target=ka)))}function ji(r,i){var s={};return s[r.toLowerCase()]=i.toLowerCase(),s["Webkit"+r]="webkit"+i,s["Moz"+r]="moz"+i,s}var Xa={animationend:ji("Animation","AnimationEnd"),animationiteration:ji("Animation","AnimationIteration"),animationstart:ji("Animation","AnimationStart"),transitionrun:ji("Transition","TransitionRun"),transitionstart:ji("Transition","TransitionStart"),transitioncancel:ji("Transition","TransitionCancel"),transitionend:ji("Transition","TransitionEnd")},nd={},Ip={};Er&&(Ip=document.createElement("div").style,"AnimationEvent"in window||(delete Xa.animationend.animation,delete Xa.animationiteration.animation,delete Xa.animationstart.animation),"TransitionEvent"in window||delete Xa.transitionend.transition);function $i(r){if(nd[r])return nd[r];if(!Xa[r])return r;var i=Xa[r],s;for(s in i)if(i.hasOwnProperty(s)&&s in Ip)return nd[r]=i[s];return r}var Rp=$i("animationend"),Dp=$i("animationiteration"),_p=$i("animationstart"),LN=$i("transitionrun"),zN=$i("transitionstart"),UN=$i("transitioncancel"),Vp=$i("transitionend"),Op=new Map,rd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");rd.push("scrollEnd");function Un(r,i){Op.set(r,i),Sr(i,[r])}var cu=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},An=[],Wa=0,id=0;function fu(){for(var r=Wa,i=id=Wa=0;i<r;){var s=An[i];An[i++]=null;var u=An[i];An[i++]=null;var f=An[i];An[i++]=null;var g=An[i];if(An[i++]=null,u!==null&&f!==null){var b=u.pending;b===null?f.next=f:(f.next=b.next,b.next=f),u.pending=f}g!==0&&Mp(s,f,g)}}function du(r,i,s,u){An[Wa++]=r,An[Wa++]=i,An[Wa++]=s,An[Wa++]=u,id|=u,r.lanes|=u,r=r.alternate,r!==null&&(r.lanes|=u)}function ad(r,i,s,u){return du(r,i,s,u),hu(r)}function Pi(r,i){return du(r,null,null,i),hu(r)}function Mp(r,i,s){r.lanes|=s;var u=r.alternate;u!==null&&(u.lanes|=s);for(var f=!1,g=r.return;g!==null;)g.childLanes|=s,u=g.alternate,u!==null&&(u.childLanes|=s),g.tag===22&&(r=g.stateNode,r===null||r._visibility&1||(f=!0)),r=g,g=g.return;return r.tag===3?(g=r.stateNode,f&&i!==null&&(f=31-Ft(s),r=g.hiddenUpdates,u=r[f],u===null?r[f]=[i]:u.push(i),i.lane=s|536870912),g):null}function hu(r){if(50<Oo)throw Oo=0,gh=null,Error(a(185));for(var i=r.return;i!==null;)r=i,i=r.return;return r.tag===3?r.stateNode:null}var Ka={};function YN(r,i,s,u){this.tag=r,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function cn(r,i,s,u){return new YN(r,i,s,u)}function sd(r){return r=r.prototype,!(!r||!r.isReactComponent)}function wr(r,i){var s=r.alternate;return s===null?(s=cn(r.tag,i,r.key,r.mode),s.elementType=r.elementType,s.type=r.type,s.stateNode=r.stateNode,s.alternate=r,r.alternate=s):(s.pendingProps=i,s.type=r.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=r.flags&65011712,s.childLanes=r.childLanes,s.lanes=r.lanes,s.child=r.child,s.memoizedProps=r.memoizedProps,s.memoizedState=r.memoizedState,s.updateQueue=r.updateQueue,i=r.dependencies,s.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},s.sibling=r.sibling,s.index=r.index,s.ref=r.ref,s.refCleanup=r.refCleanup,s}function Bp(r,i){r.flags&=65011714;var s=r.alternate;return s===null?(r.childLanes=0,r.lanes=i,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=s.childLanes,r.lanes=s.lanes,r.child=s.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=s.memoizedProps,r.memoizedState=s.memoizedState,r.updateQueue=s.updateQueue,r.type=s.type,i=s.dependencies,r.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),r}function gu(r,i,s,u,f,g){var b=0;if(u=r,typeof r=="function")sd(r)&&(b=1);else if(typeof r=="string")b=Wx(r,s,re.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case q:return r=cn(31,s,i,f),r.elementType=q,r.lanes=g,r;case A:return Qi(s.children,f,g,i);case R:b=8,f|=24;break;case x:return r=cn(12,s,i,f|2),r.elementType=x,r.lanes=g,r;case O:return r=cn(13,s,i,f),r.elementType=O,r.lanes=g,r;case B:return r=cn(19,s,i,f),r.elementType=B,r.lanes=g,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case N:b=10;break e;case Y:b=9;break e;case I:b=11;break e;case M:b=14;break e;case W:b=16,u=null;break e}b=29,s=Error(a(130,r===null?"null":typeof r,"")),u=null}return i=cn(b,s,i,f),i.elementType=r,i.type=u,i.lanes=g,i}function Qi(r,i,s,u){return r=cn(7,r,u,i),r.lanes=s,r}function od(r,i,s){return r=cn(6,r,null,i),r.lanes=s,r}function Lp(r){var i=cn(18,null,null,0);return i.stateNode=r,i}function ld(r,i,s){return i=cn(4,r.children!==null?r.children:[],r.key,i),i.lanes=s,i.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},i}var zp=new WeakMap;function En(r,i){if(typeof r=="object"&&r!==null){var s=zp.get(r);return s!==void 0?s:(i={value:r,source:i,stack:Sn(i)},zp.set(r,i),i)}return{value:r,source:i,stack:Sn(i)}}var Ha=[],Fa=0,mu=null,fo=0,wn=[],Nn=0,ai=null,nr=1,rr="";function Nr(r,i){Ha[Fa++]=fo,Ha[Fa++]=mu,mu=r,fo=i}function Up(r,i,s){wn[Nn++]=nr,wn[Nn++]=rr,wn[Nn++]=ai,ai=r;var u=nr;r=rr;var f=32-Ft(u)-1;u&=~(1<<f),s+=1;var g=32-Ft(i)+f;if(30<g){var b=f-f%5;g=(u&(1<<b)-1).toString(32),u>>=b,f-=b,nr=1<<32-Ft(i)+f|s<<f|u,rr=g+r}else nr=1<<g|s<<f|u,rr=r}function ud(r){r.return!==null&&(Nr(r,1),Up(r,1,0))}function cd(r){for(;r===mu;)mu=Ha[--Fa],Ha[Fa]=null,fo=Ha[--Fa],Ha[Fa]=null;for(;r===ai;)ai=wn[--Nn],wn[Nn]=null,rr=wn[--Nn],wn[Nn]=null,nr=wn[--Nn],wn[Nn]=null}function Yp(r,i){wn[Nn++]=nr,wn[Nn++]=rr,wn[Nn++]=ai,nr=i.id,rr=i.overflow,ai=r}var Ot=null,at=null,ke=!1,si=null,xn=!1,fd=Error(a(519));function oi(r){var i=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ho(En(i,r)),fd}function Zp(r){var i=r.stateNode,s=r.type,u=r.memoizedProps;switch(i[Ct]=r,i[Zt]=u,s){case"dialog":ze("cancel",i),ze("close",i);break;case"iframe":case"object":case"embed":ze("load",i);break;case"video":case"audio":for(s=0;s<Bo.length;s++)ze(Bo[s],i);break;case"source":ze("error",i);break;case"img":case"image":case"link":ze("error",i),ze("load",i);break;case"details":ze("toggle",i);break;case"input":ze("invalid",i),nu(i,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":ze("invalid",i);break;case"textarea":ze("invalid",i),tp(i,u.value,u.defaultValue,u.children)}s=u.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||i.textContent===""+s||u.suppressHydrationWarning===!0||rv(i.textContent,s)?(u.popover!=null&&(ze("beforetoggle",i),ze("toggle",i)),u.onScroll!=null&&ze("scroll",i),u.onScrollEnd!=null&&ze("scrollend",i),u.onClick!=null&&(i.onclick=Ar),i=!0):i=!1,i||oi(r,!0)}function Gp(r){for(Ot=r.return;Ot;)switch(Ot.tag){case 5:case 31:case 13:xn=!1;return;case 27:case 3:xn=!0;return;default:Ot=Ot.return}}function Ja(r){if(r!==Ot)return!1;if(!ke)return Gp(r),ke=!0,!1;var i=r.tag,s;if((s=i!==3&&i!==27)&&((s=i===5)&&(s=r.type,s=!(s!=="form"&&s!=="button")||Rh(r.type,r.memoizedProps)),s=!s),s&&at&&oi(r),Gp(r),i===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(a(317));at=dv(r)}else if(i===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(a(317));at=dv(r)}else i===27?(i=at,Ai(r.type)?(r=Mh,Mh=null,at=r):at=i):at=Ot?Cn(r.stateNode.nextSibling):null;return!0}function qi(){at=Ot=null,ke=!1}function dd(){var r=si;return r!==null&&(en===null?en=r:en.push.apply(en,r),si=null),r}function ho(r){si===null?si=[r]:si.push(r)}var hd=C(null),ea=null,xr=null;function li(r,i,s){ee(hd,i._currentValue),i._currentValue=s}function Tr(r){r._currentValue=hd.current,L(hd)}function gd(r,i,s){for(;r!==null;){var u=r.alternate;if((r.childLanes&i)!==i?(r.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),r===s)break;r=r.return}}function md(r,i,s,u){var f=r.child;for(f!==null&&(f.return=r);f!==null;){var g=f.dependencies;if(g!==null){var b=f.child;g=g.firstContext;e:for(;g!==null;){var w=g;g=f;for(var D=0;D<i.length;D++)if(w.context===i[D]){g.lanes|=s,w=g.alternate,w!==null&&(w.lanes|=s),gd(g.return,s,r),u||(b=null);break e}g=w.next}}else if(f.tag===18){if(b=f.return,b===null)throw Error(a(341));b.lanes|=s,g=b.alternate,g!==null&&(g.lanes|=s),gd(b,s,r),b=null}else b=f.child;if(b!==null)b.return=f;else for(b=f;b!==null;){if(b===r){b=null;break}if(f=b.sibling,f!==null){f.return=b.return,b=f;break}b=b.return}f=b}}function ja(r,i,s,u){r=null;for(var f=i,g=!1;f!==null;){if(!g){if((f.flags&524288)!==0)g=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var b=f.alternate;if(b===null)throw Error(a(387));if(b=b.memoizedProps,b!==null){var w=f.type;un(f.pendingProps.value,b.value)||(r!==null?r.push(w):r=[w])}}else if(f===he.current){if(b=f.alternate,b===null)throw Error(a(387));b.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(r!==null?r.push(Zo):r=[Zo])}f=f.return}r!==null&&md(i,r,s,u),i.flags|=262144}function pu(r){for(r=r.firstContext;r!==null;){if(!un(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function ta(r){ea=r,xr=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function Mt(r){return kp(ea,r)}function yu(r,i){return ea===null&&ta(r),kp(r,i)}function kp(r,i){var s=i._currentValue;if(i={context:i,memoizedValue:s,next:null},xr===null){if(r===null)throw Error(a(308));xr=i,r.dependencies={lanes:0,firstContext:i},r.flags|=524288}else xr=xr.next=i;return s}var ZN=typeof AbortController<"u"?AbortController:function(){var r=[],i=this.signal={aborted:!1,addEventListener:function(s,u){r.push(u)}};this.abort=function(){i.aborted=!0,r.forEach(function(s){return s()})}},GN=t.unstable_scheduleCallback,kN=t.unstable_NormalPriority,At={$$typeof:N,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function pd(){return{controller:new ZN,data:new Map,refCount:0}}function go(r){r.refCount--,r.refCount===0&&GN(kN,function(){r.controller.abort()})}var mo=null,yd=0,$a=0,Pa=null;function XN(r,i){if(mo===null){var s=mo=[];yd=0,$a=Sh(),Pa={status:"pending",value:void 0,then:function(u){s.push(u)}}}return yd++,i.then(Xp,Xp),i}function Xp(){if(--yd===0&&mo!==null){Pa!==null&&(Pa.status="fulfilled");var r=mo;mo=null,$a=0,Pa=null;for(var i=0;i<r.length;i++)(0,r[i])()}}function WN(r,i){var s=[],u={status:"pending",value:null,reason:null,then:function(f){s.push(f)}};return r.then(function(){u.status="fulfilled",u.value=i;for(var f=0;f<s.length;f++)(0,s[f])(i)},function(f){for(u.status="rejected",u.reason=f,f=0;f<s.length;f++)(0,s[f])(void 0)}),u}var Wp=T.S;T.S=function(r,i){C0=Vt(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&XN(r,i),Wp!==null&&Wp(r,i)};var na=C(null);function vd(){var r=na.current;return r!==null?r:rt.pooledCache}function vu(r,i){i===null?ee(na,na.current):ee(na,i.pool)}function Kp(){var r=vd();return r===null?null:{parent:At._currentValue,pool:r}}var Qa=Error(a(460)),bd=Error(a(474)),bu=Error(a(542)),Su={then:function(){}};function Hp(r){return r=r.status,r==="fulfilled"||r==="rejected"}function Fp(r,i,s){switch(s=r[s],s===void 0?r.push(i):s!==i&&(i.then(Ar,Ar),i=s),i.status){case"fulfilled":return i.value;case"rejected":throw r=i.reason,jp(r),r;default:if(typeof i.status=="string")i.then(Ar,Ar);else{if(r=rt,r!==null&&100<r.shellSuspendCounter)throw Error(a(482));r=i,r.status="pending",r.then(function(u){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=u}},function(u){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=u}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw r=i.reason,jp(r),r}throw ia=i,Qa}}function ra(r){try{var i=r._init;return i(r._payload)}catch(s){throw s!==null&&typeof s=="object"&&typeof s.then=="function"?(ia=s,Qa):s}}var ia=null;function Jp(){if(ia===null)throw Error(a(459));var r=ia;return ia=null,r}function jp(r){if(r===Qa||r===bu)throw Error(a(483))}var qa=null,po=0;function Au(r){var i=po;return po+=1,qa===null&&(qa=[]),Fp(qa,r,i)}function yo(r,i){i=i.props.ref,r.ref=i!==void 0?i:null}function Eu(r,i){throw i.$$typeof===v?Error(a(525)):(r=Object.prototype.toString.call(i),Error(a(31,r==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":r)))}function $p(r){function i(k,z){if(r){var F=k.deletions;F===null?(k.deletions=[z],k.flags|=16):F.push(z)}}function s(k,z){if(!r)return null;for(;z!==null;)i(k,z),z=z.sibling;return null}function u(k){for(var z=new Map;k!==null;)k.key!==null?z.set(k.key,k):z.set(k.index,k),k=k.sibling;return z}function f(k,z){return k=wr(k,z),k.index=0,k.sibling=null,k}function g(k,z,F){return k.index=F,r?(F=k.alternate,F!==null?(F=F.index,F<z?(k.flags|=67108866,z):F):(k.flags|=67108866,z)):(k.flags|=1048576,z)}function b(k){return r&&k.alternate===null&&(k.flags|=67108866),k}function w(k,z,F,se){return z===null||z.tag!==6?(z=od(F,k.mode,se),z.return=k,z):(z=f(z,F),z.return=k,z)}function D(k,z,F,se){var Ae=F.type;return Ae===A?ae(k,z,F.props.children,se,F.key):z!==null&&(z.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===W&&ra(Ae)===z.type)?(z=f(z,F.props),yo(z,F),z.return=k,z):(z=gu(F.type,F.key,F.props,null,k.mode,se),yo(z,F),z.return=k,z)}function J(k,z,F,se){return z===null||z.tag!==4||z.stateNode.containerInfo!==F.containerInfo||z.stateNode.implementation!==F.implementation?(z=ld(F,k.mode,se),z.return=k,z):(z=f(z,F.children||[]),z.return=k,z)}function ae(k,z,F,se,Ae){return z===null||z.tag!==7?(z=Qi(F,k.mode,se,Ae),z.return=k,z):(z=f(z,F),z.return=k,z)}function oe(k,z,F){if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return z=od(""+z,k.mode,F),z.return=k,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case S:return F=gu(z.type,z.key,z.props,null,k.mode,F),yo(F,z),F.return=k,F;case E:return z=ld(z,k.mode,F),z.return=k,z;case W:return z=ra(z),oe(k,z,F)}if(K(z)||te(z))return z=Qi(z,k.mode,F,null),z.return=k,z;if(typeof z.then=="function")return oe(k,Au(z),F);if(z.$$typeof===N)return oe(k,yu(k,z),F);Eu(k,z)}return null}function j(k,z,F,se){var Ae=z!==null?z.key:null;if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return Ae!==null?null:w(k,z,""+F,se);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case S:return F.key===Ae?D(k,z,F,se):null;case E:return F.key===Ae?J(k,z,F,se):null;case W:return F=ra(F),j(k,z,F,se)}if(K(F)||te(F))return Ae!==null?null:ae(k,z,F,se,null);if(typeof F.then=="function")return j(k,z,Au(F),se);if(F.$$typeof===N)return j(k,z,yu(k,F),se);Eu(k,F)}return null}function Q(k,z,F,se,Ae){if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return k=k.get(F)||null,w(z,k,""+se,Ae);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case S:return k=k.get(se.key===null?F:se.key)||null,D(z,k,se,Ae);case E:return k=k.get(se.key===null?F:se.key)||null,J(z,k,se,Ae);case W:return se=ra(se),Q(k,z,F,se,Ae)}if(K(se)||te(se))return k=k.get(F)||null,ae(z,k,se,Ae,null);if(typeof se.then=="function")return Q(k,z,F,Au(se),Ae);if(se.$$typeof===N)return Q(k,z,F,yu(z,se),Ae);Eu(z,se)}return null}function ye(k,z,F,se){for(var Ae=null,Ke=null,ve=z,Ve=z=0,Ge=null;ve!==null&&Ve<F.length;Ve++){ve.index>Ve?(Ge=ve,ve=null):Ge=ve.sibling;var He=j(k,ve,F[Ve],se);if(He===null){ve===null&&(ve=Ge);break}r&&ve&&He.alternate===null&&i(k,ve),z=g(He,z,Ve),Ke===null?Ae=He:Ke.sibling=He,Ke=He,ve=Ge}if(Ve===F.length)return s(k,ve),ke&&Nr(k,Ve),Ae;if(ve===null){for(;Ve<F.length;Ve++)ve=oe(k,F[Ve],se),ve!==null&&(z=g(ve,z,Ve),Ke===null?Ae=ve:Ke.sibling=ve,Ke=ve);return ke&&Nr(k,Ve),Ae}for(ve=u(ve);Ve<F.length;Ve++)Ge=Q(ve,k,Ve,F[Ve],se),Ge!==null&&(r&&Ge.alternate!==null&&ve.delete(Ge.key===null?Ve:Ge.key),z=g(Ge,z,Ve),Ke===null?Ae=Ge:Ke.sibling=Ge,Ke=Ge);return r&&ve.forEach(function(Ti){return i(k,Ti)}),ke&&Nr(k,Ve),Ae}function xe(k,z,F,se){if(F==null)throw Error(a(151));for(var Ae=null,Ke=null,ve=z,Ve=z=0,Ge=null,He=F.next();ve!==null&&!He.done;Ve++,He=F.next()){ve.index>Ve?(Ge=ve,ve=null):Ge=ve.sibling;var Ti=j(k,ve,He.value,se);if(Ti===null){ve===null&&(ve=Ge);break}r&&ve&&Ti.alternate===null&&i(k,ve),z=g(Ti,z,Ve),Ke===null?Ae=Ti:Ke.sibling=Ti,Ke=Ti,ve=Ge}if(He.done)return s(k,ve),ke&&Nr(k,Ve),Ae;if(ve===null){for(;!He.done;Ve++,He=F.next())He=oe(k,He.value,se),He!==null&&(z=g(He,z,Ve),Ke===null?Ae=He:Ke.sibling=He,Ke=He);return ke&&Nr(k,Ve),Ae}for(ve=u(ve);!He.done;Ve++,He=F.next())He=Q(ve,k,Ve,He.value,se),He!==null&&(r&&He.alternate!==null&&ve.delete(He.key===null?Ve:He.key),z=g(He,z,Ve),Ke===null?Ae=He:Ke.sibling=He,Ke=He);return r&&ve.forEach(function(t2){return i(k,t2)}),ke&&Nr(k,Ve),Ae}function nt(k,z,F,se){if(typeof F=="object"&&F!==null&&F.type===A&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case S:e:{for(var Ae=F.key;z!==null;){if(z.key===Ae){if(Ae=F.type,Ae===A){if(z.tag===7){s(k,z.sibling),se=f(z,F.props.children),se.return=k,k=se;break e}}else if(z.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===W&&ra(Ae)===z.type){s(k,z.sibling),se=f(z,F.props),yo(se,F),se.return=k,k=se;break e}s(k,z);break}else i(k,z);z=z.sibling}F.type===A?(se=Qi(F.props.children,k.mode,se,F.key),se.return=k,k=se):(se=gu(F.type,F.key,F.props,null,k.mode,se),yo(se,F),se.return=k,k=se)}return b(k);case E:e:{for(Ae=F.key;z!==null;){if(z.key===Ae)if(z.tag===4&&z.stateNode.containerInfo===F.containerInfo&&z.stateNode.implementation===F.implementation){s(k,z.sibling),se=f(z,F.children||[]),se.return=k,k=se;break e}else{s(k,z);break}else i(k,z);z=z.sibling}se=ld(F,k.mode,se),se.return=k,k=se}return b(k);case W:return F=ra(F),nt(k,z,F,se)}if(K(F))return ye(k,z,F,se);if(te(F)){if(Ae=te(F),typeof Ae!="function")throw Error(a(150));return F=Ae.call(F),xe(k,z,F,se)}if(typeof F.then=="function")return nt(k,z,Au(F),se);if(F.$$typeof===N)return nt(k,z,yu(k,F),se);Eu(k,F)}return typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint"?(F=""+F,z!==null&&z.tag===6?(s(k,z.sibling),se=f(z,F),se.return=k,k=se):(s(k,z),se=od(F,k.mode,se),se.return=k,k=se),b(k)):s(k,z)}return function(k,z,F,se){try{po=0;var Ae=nt(k,z,F,se);return qa=null,Ae}catch(ve){if(ve===Qa||ve===bu)throw ve;var Ke=cn(29,ve,null,k.mode);return Ke.lanes=se,Ke.return=k,Ke}finally{}}}var aa=$p(!0),Pp=$p(!1),ui=!1;function Sd(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ad(r,i){r=r.updateQueue,i.updateQueue===r&&(i.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function ci(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function fi(r,i,s){var u=r.updateQueue;if(u===null)return null;if(u=u.shared,(Fe&2)!==0){var f=u.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),u.pending=i,i=hu(r),Mp(r,null,s),i}return du(r,u,i,s),hu(r)}function vo(r,i,s){if(i=i.updateQueue,i!==null&&(i=i.shared,(s&4194048)!==0)){var u=i.lanes;u&=r.pendingLanes,s|=u,i.lanes=s,Kl(r,s)}}function Ed(r,i){var s=r.updateQueue,u=r.alternate;if(u!==null&&(u=u.updateQueue,s===u)){var f=null,g=null;if(s=s.firstBaseUpdate,s!==null){do{var b={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};g===null?f=g=b:g=g.next=b,s=s.next}while(s!==null);g===null?f=g=i:g=g.next=i}else f=g=i;s={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:g,shared:u.shared,callbacks:u.callbacks},r.updateQueue=s;return}r=s.lastBaseUpdate,r===null?s.firstBaseUpdate=i:r.next=i,s.lastBaseUpdate=i}var wd=!1;function bo(){if(wd){var r=Pa;if(r!==null)throw r}}function So(r,i,s,u){wd=!1;var f=r.updateQueue;ui=!1;var g=f.firstBaseUpdate,b=f.lastBaseUpdate,w=f.shared.pending;if(w!==null){f.shared.pending=null;var D=w,J=D.next;D.next=null,b===null?g=J:b.next=J,b=D;var ae=r.alternate;ae!==null&&(ae=ae.updateQueue,w=ae.lastBaseUpdate,w!==b&&(w===null?ae.firstBaseUpdate=J:w.next=J,ae.lastBaseUpdate=D))}if(g!==null){var oe=f.baseState;b=0,ae=J=D=null,w=g;do{var j=w.lane&-536870913,Q=j!==w.lane;if(Q?(Ze&j)===j:(u&j)===j){j!==0&&j===$a&&(wd=!0),ae!==null&&(ae=ae.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var ye=r,xe=w;j=i;var nt=s;switch(xe.tag){case 1:if(ye=xe.payload,typeof ye=="function"){oe=ye.call(nt,oe,j);break e}oe=ye;break e;case 3:ye.flags=ye.flags&-65537|128;case 0:if(ye=xe.payload,j=typeof ye=="function"?ye.call(nt,oe,j):ye,j==null)break e;oe=y({},oe,j);break e;case 2:ui=!0}}j=w.callback,j!==null&&(r.flags|=64,Q&&(r.flags|=8192),Q=f.callbacks,Q===null?f.callbacks=[j]:Q.push(j))}else Q={lane:j,tag:w.tag,payload:w.payload,callback:w.callback,next:null},ae===null?(J=ae=Q,D=oe):ae=ae.next=Q,b|=j;if(w=w.next,w===null){if(w=f.shared.pending,w===null)break;Q=w,w=Q.next,Q.next=null,f.lastBaseUpdate=Q,f.shared.pending=null}}while(!0);ae===null&&(D=oe),f.baseState=D,f.firstBaseUpdate=J,f.lastBaseUpdate=ae,g===null&&(f.shared.lanes=0),pi|=b,r.lanes=b,r.memoizedState=oe}}function Qp(r,i){if(typeof r!="function")throw Error(a(191,r));r.call(i)}function qp(r,i){var s=r.callbacks;if(s!==null)for(r.callbacks=null,r=0;r<s.length;r++)Qp(s[r],i)}var es=C(null),wu=C(0);function ey(r,i){r=Br,ee(wu,r),ee(es,i),Br=r|i.baseLanes}function Nd(){ee(wu,Br),ee(es,es.current)}function xd(){Br=wu.current,L(es),L(wu)}var fn=C(null),Tn=null;function di(r){var i=r.alternate;ee(pt,pt.current&1),ee(fn,r),Tn===null&&(i===null||es.current!==null||i.memoizedState!==null)&&(Tn=r)}function Td(r){ee(pt,pt.current),ee(fn,r),Tn===null&&(Tn=r)}function ty(r){r.tag===22?(ee(pt,pt.current),ee(fn,r),Tn===null&&(Tn=r)):hi()}function hi(){ee(pt,pt.current),ee(fn,fn.current)}function dn(r){L(fn),Tn===r&&(Tn=null),L(pt)}var pt=C(0);function Nu(r){for(var i=r;i!==null;){if(i.tag===13){var s=i.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||Vh(s)||Oh(s)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Cr=0,De=null,et=null,Et=null,xu=!1,ts=!1,sa=!1,Tu=0,Ao=0,ns=null,KN=0;function gt(){throw Error(a(321))}function Cd(r,i){if(i===null)return!1;for(var s=0;s<i.length&&s<r.length;s++)if(!un(r[s],i[s]))return!1;return!0}function Id(r,i,s,u,f,g){return Cr=g,De=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,T.H=r===null||r.memoizedState===null?Uy:Xd,sa=!1,g=s(u,f),sa=!1,ts&&(g=ry(i,s,u,f)),ny(r),g}function ny(r){T.H=No;var i=et!==null&&et.next!==null;if(Cr=0,Et=et=De=null,xu=!1,Ao=0,ns=null,i)throw Error(a(300));r===null||wt||(r=r.dependencies,r!==null&&pu(r)&&(wt=!0))}function ry(r,i,s,u){De=r;var f=0;do{if(ts&&(ns=null),Ao=0,ts=!1,25<=f)throw Error(a(301));if(f+=1,Et=et=null,r.updateQueue!=null){var g=r.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}T.H=Yy,g=i(s,u)}while(ts);return g}function HN(){var r=T.H,i=r.useState()[0];return i=typeof i.then=="function"?Eo(i):i,r=r.useState()[0],(et!==null?et.memoizedState:null)!==r&&(De.flags|=1024),i}function Rd(){var r=Tu!==0;return Tu=0,r}function Dd(r,i,s){i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~s}function _d(r){if(xu){for(r=r.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}xu=!1}Cr=0,Et=et=De=null,ts=!1,Ao=Tu=0,ns=null}function Jt(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Et===null?De.memoizedState=Et=r:Et=Et.next=r,Et}function yt(){if(et===null){var r=De.alternate;r=r!==null?r.memoizedState:null}else r=et.next;var i=Et===null?De.memoizedState:Et.next;if(i!==null)Et=i,et=r;else{if(r===null)throw De.alternate===null?Error(a(467)):Error(a(310));et=r,r={memoizedState:et.memoizedState,baseState:et.baseState,baseQueue:et.baseQueue,queue:et.queue,next:null},Et===null?De.memoizedState=Et=r:Et=Et.next=r}return Et}function Cu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Eo(r){var i=Ao;return Ao+=1,ns===null&&(ns=[]),r=Fp(ns,r,i),i=De,(Et===null?i.memoizedState:Et.next)===null&&(i=i.alternate,T.H=i===null||i.memoizedState===null?Uy:Xd),r}function Iu(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return Eo(r);if(r.$$typeof===N)return Mt(r)}throw Error(a(438,String(r)))}function Vd(r){var i=null,s=De.updateQueue;if(s!==null&&(i=s.memoCache),i==null){var u=De.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(i={data:u.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),s===null&&(s=Cu(),De.updateQueue=s),s.memoCache=i,s=i.data[i.index],s===void 0)for(s=i.data[i.index]=Array(r),u=0;u<r;u++)s[u]=de;return i.index++,s}function Ir(r,i){return typeof i=="function"?i(r):i}function Ru(r){var i=yt();return Od(i,et,r)}function Od(r,i,s){var u=r.queue;if(u===null)throw Error(a(311));u.lastRenderedReducer=s;var f=r.baseQueue,g=u.pending;if(g!==null){if(f!==null){var b=f.next;f.next=g.next,g.next=b}i.baseQueue=f=g,u.pending=null}if(g=r.baseState,f===null)r.memoizedState=g;else{i=f.next;var w=b=null,D=null,J=i,ae=!1;do{var oe=J.lane&-536870913;if(oe!==J.lane?(Ze&oe)===oe:(Cr&oe)===oe){var j=J.revertLane;if(j===0)D!==null&&(D=D.next={lane:0,revertLane:0,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),oe===$a&&(ae=!0);else if((Cr&j)===j){J=J.next,j===$a&&(ae=!0);continue}else oe={lane:0,revertLane:J.revertLane,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},D===null?(w=D=oe,b=g):D=D.next=oe,De.lanes|=j,pi|=j;oe=J.action,sa&&s(g,oe),g=J.hasEagerState?J.eagerState:s(g,oe)}else j={lane:oe,revertLane:J.revertLane,gesture:J.gesture,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},D===null?(w=D=j,b=g):D=D.next=j,De.lanes|=oe,pi|=oe;J=J.next}while(J!==null&&J!==i);if(D===null?b=g:D.next=w,!un(g,r.memoizedState)&&(wt=!0,ae&&(s=Pa,s!==null)))throw s;r.memoizedState=g,r.baseState=b,r.baseQueue=D,u.lastRenderedState=g}return f===null&&(u.lanes=0),[r.memoizedState,u.dispatch]}function Md(r){var i=yt(),s=i.queue;if(s===null)throw Error(a(311));s.lastRenderedReducer=r;var u=s.dispatch,f=s.pending,g=i.memoizedState;if(f!==null){s.pending=null;var b=f=f.next;do g=r(g,b.action),b=b.next;while(b!==f);un(g,i.memoizedState)||(wt=!0),i.memoizedState=g,i.baseQueue===null&&(i.baseState=g),s.lastRenderedState=g}return[g,u]}function iy(r,i,s){var u=De,f=yt(),g=ke;if(g){if(s===void 0)throw Error(a(407));s=s()}else s=i();var b=!un((et||f).memoizedState,s);if(b&&(f.memoizedState=s,wt=!0),f=f.queue,zd(oy.bind(null,u,f,r),[r]),f.getSnapshot!==i||b||Et!==null&&Et.memoizedState.tag&1){if(u.flags|=2048,rs(9,{destroy:void 0},sy.bind(null,u,f,s,i),null),rt===null)throw Error(a(349));g||(Cr&127)!==0||ay(u,i,s)}return s}function ay(r,i,s){r.flags|=16384,r={getSnapshot:i,value:s},i=De.updateQueue,i===null?(i=Cu(),De.updateQueue=i,i.stores=[r]):(s=i.stores,s===null?i.stores=[r]:s.push(r))}function sy(r,i,s,u){i.value=s,i.getSnapshot=u,ly(i)&&uy(r)}function oy(r,i,s){return s(function(){ly(i)&&uy(r)})}function ly(r){var i=r.getSnapshot;r=r.value;try{var s=i();return!un(r,s)}catch{return!0}}function uy(r){var i=Pi(r,2);i!==null&&tn(i,r,2)}function Bd(r){var i=Jt();if(typeof r=="function"){var s=r;if(r=s(),sa){er(!0);try{s()}finally{er(!1)}}}return i.memoizedState=i.baseState=r,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ir,lastRenderedState:r},i}function cy(r,i,s,u){return r.baseState=s,Od(r,et,typeof u=="function"?u:Ir)}function FN(r,i,s,u,f){if(Vu(r))throw Error(a(485));if(r=i.action,r!==null){var g={payload:f,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){g.listeners.push(b)}};T.T!==null?s(!0):g.isTransition=!1,u(g),s=i.pending,s===null?(g.next=i.pending=g,fy(i,g)):(g.next=s.next,i.pending=s.next=g)}}function fy(r,i){var s=i.action,u=i.payload,f=r.state;if(i.isTransition){var g=T.T,b={};T.T=b;try{var w=s(f,u),D=T.S;D!==null&&D(b,w),dy(r,i,w)}catch(J){Ld(r,i,J)}finally{g!==null&&b.types!==null&&(g.types=b.types),T.T=g}}else try{g=s(f,u),dy(r,i,g)}catch(J){Ld(r,i,J)}}function dy(r,i,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(u){hy(r,i,u)},function(u){return Ld(r,i,u)}):hy(r,i,s)}function hy(r,i,s){i.status="fulfilled",i.value=s,gy(i),r.state=s,i=r.pending,i!==null&&(s=i.next,s===i?r.pending=null:(s=s.next,i.next=s,fy(r,s)))}function Ld(r,i,s){var u=r.pending;if(r.pending=null,u!==null){u=u.next;do i.status="rejected",i.reason=s,gy(i),i=i.next;while(i!==u)}r.action=null}function gy(r){r=r.listeners;for(var i=0;i<r.length;i++)(0,r[i])()}function my(r,i){return i}function py(r,i){if(ke){var s=rt.formState;if(s!==null){e:{var u=De;if(ke){if(at){t:{for(var f=at,g=xn;f.nodeType!==8;){if(!g){f=null;break t}if(f=Cn(f.nextSibling),f===null){f=null;break t}}g=f.data,f=g==="F!"||g==="F"?f:null}if(f){at=Cn(f.nextSibling),u=f.data==="F!";break e}}oi(u)}u=!1}u&&(i=s[0])}}return s=Jt(),s.memoizedState=s.baseState=i,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:my,lastRenderedState:i},s.queue=u,s=By.bind(null,De,u),u.dispatch=s,u=Bd(!1),g=kd.bind(null,De,!1,u.queue),u=Jt(),f={state:i,dispatch:null,action:r,pending:null},u.queue=f,s=FN.bind(null,De,f,g,s),f.dispatch=s,u.memoizedState=r,[i,s,!1]}function yy(r){var i=yt();return vy(i,et,r)}function vy(r,i,s){if(i=Od(r,i,my)[0],r=Ru(Ir)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var u=Eo(i)}catch(b){throw b===Qa?bu:b}else u=i;i=yt();var f=i.queue,g=f.dispatch;return s!==i.memoizedState&&(De.flags|=2048,rs(9,{destroy:void 0},JN.bind(null,f,s),null)),[u,g,r]}function JN(r,i){r.action=i}function by(r){var i=yt(),s=et;if(s!==null)return vy(i,s,r);yt(),i=i.memoizedState,s=yt();var u=s.queue.dispatch;return s.memoizedState=r,[i,u,!1]}function rs(r,i,s,u){return r={tag:r,create:s,deps:u,inst:i,next:null},i=De.updateQueue,i===null&&(i=Cu(),De.updateQueue=i),s=i.lastEffect,s===null?i.lastEffect=r.next=r:(u=s.next,s.next=r,r.next=u,i.lastEffect=r),r}function Sy(){return yt().memoizedState}function Du(r,i,s,u){var f=Jt();De.flags|=r,f.memoizedState=rs(1|i,{destroy:void 0},s,u===void 0?null:u)}function _u(r,i,s,u){var f=yt();u=u===void 0?null:u;var g=f.memoizedState.inst;et!==null&&u!==null&&Cd(u,et.memoizedState.deps)?f.memoizedState=rs(i,g,s,u):(De.flags|=r,f.memoizedState=rs(1|i,g,s,u))}function Ay(r,i){Du(8390656,8,r,i)}function zd(r,i){_u(2048,8,r,i)}function jN(r){De.flags|=4;var i=De.updateQueue;if(i===null)i=Cu(),De.updateQueue=i,i.events=[r];else{var s=i.events;s===null?i.events=[r]:s.push(r)}}function Ey(r){var i=yt().memoizedState;return jN({ref:i,nextImpl:r}),function(){if((Fe&2)!==0)throw Error(a(440));return i.impl.apply(void 0,arguments)}}function wy(r,i){return _u(4,2,r,i)}function Ny(r,i){return _u(4,4,r,i)}function xy(r,i){if(typeof i=="function"){r=r();var s=i(r);return function(){typeof s=="function"?s():i(null)}}if(i!=null)return r=r(),i.current=r,function(){i.current=null}}function Ty(r,i,s){s=s!=null?s.concat([r]):null,_u(4,4,xy.bind(null,i,r),s)}function Ud(){}function Cy(r,i){var s=yt();i=i===void 0?null:i;var u=s.memoizedState;return i!==null&&Cd(i,u[1])?u[0]:(s.memoizedState=[r,i],r)}function Iy(r,i){var s=yt();i=i===void 0?null:i;var u=s.memoizedState;if(i!==null&&Cd(i,u[1]))return u[0];if(u=r(),sa){er(!0);try{r()}finally{er(!1)}}return s.memoizedState=[u,i],u}function Yd(r,i,s){return s===void 0||(Cr&1073741824)!==0&&(Ze&261930)===0?r.memoizedState=i:(r.memoizedState=s,r=R0(),De.lanes|=r,pi|=r,s)}function Ry(r,i,s,u){return un(s,i)?s:es.current!==null?(r=Yd(r,s,u),un(r,i)||(wt=!0),r):(Cr&42)===0||(Cr&1073741824)!==0&&(Ze&261930)===0?(wt=!0,r.memoizedState=s):(r=R0(),De.lanes|=r,pi|=r,i)}function Dy(r,i,s,u,f){var g=V.p;V.p=g!==0&&8>g?g:8;var b=T.T,w={};T.T=w,kd(r,!1,i,s);try{var D=f(),J=T.S;if(J!==null&&J(w,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var ae=WN(D,u);wo(r,i,ae,mn(r))}else wo(r,i,u,mn(r))}catch(oe){wo(r,i,{then:function(){},status:"rejected",reason:oe},mn())}finally{V.p=g,b!==null&&w.types!==null&&(b.types=w.types),T.T=b}}function $N(){}function Zd(r,i,s,u){if(r.tag!==5)throw Error(a(476));var f=_y(r).queue;Dy(r,f,i,Z,s===null?$N:function(){return Vy(r),s(u)})}function _y(r){var i=r.memoizedState;if(i!==null)return i;i={memoizedState:Z,baseState:Z,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ir,lastRenderedState:Z},next:null};var s={};return i.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ir,lastRenderedState:s},next:null},r.memoizedState=i,r=r.alternate,r!==null&&(r.memoizedState=i),i}function Vy(r){var i=_y(r);i.next===null&&(i=r.alternate.memoizedState),wo(r,i.next.queue,{},mn())}function Gd(){return Mt(Zo)}function Oy(){return yt().memoizedState}function My(){return yt().memoizedState}function PN(r){for(var i=r.return;i!==null;){switch(i.tag){case 24:case 3:var s=mn();r=ci(s);var u=fi(i,r,s);u!==null&&(tn(u,i,s),vo(u,i,s)),i={cache:pd()},r.payload=i;return}i=i.return}}function QN(r,i,s){var u=mn();s={lane:u,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},Vu(r)?Ly(i,s):(s=ad(r,i,s,u),s!==null&&(tn(s,r,u),zy(s,i,u)))}function By(r,i,s){var u=mn();wo(r,i,s,u)}function wo(r,i,s,u){var f={lane:u,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null};if(Vu(r))Ly(i,f);else{var g=r.alternate;if(r.lanes===0&&(g===null||g.lanes===0)&&(g=i.lastRenderedReducer,g!==null))try{var b=i.lastRenderedState,w=g(b,s);if(f.hasEagerState=!0,f.eagerState=w,un(w,b))return du(r,i,f,0),rt===null&&fu(),!1}catch{}finally{}if(s=ad(r,i,f,u),s!==null)return tn(s,r,u),zy(s,i,u),!0}return!1}function kd(r,i,s,u){if(u={lane:2,revertLane:Sh(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Vu(r)){if(i)throw Error(a(479))}else i=ad(r,s,u,2),i!==null&&tn(i,r,2)}function Vu(r){var i=r.alternate;return r===De||i!==null&&i===De}function Ly(r,i){ts=xu=!0;var s=r.pending;s===null?i.next=i:(i.next=s.next,s.next=i),r.pending=i}function zy(r,i,s){if((s&4194048)!==0){var u=i.lanes;u&=r.pendingLanes,s|=u,i.lanes=s,Kl(r,s)}}var No={readContext:Mt,use:Iu,useCallback:gt,useContext:gt,useEffect:gt,useImperativeHandle:gt,useLayoutEffect:gt,useInsertionEffect:gt,useMemo:gt,useReducer:gt,useRef:gt,useState:gt,useDebugValue:gt,useDeferredValue:gt,useTransition:gt,useSyncExternalStore:gt,useId:gt,useHostTransitionStatus:gt,useFormState:gt,useActionState:gt,useOptimistic:gt,useMemoCache:gt,useCacheRefresh:gt};No.useEffectEvent=gt;var Uy={readContext:Mt,use:Iu,useCallback:function(r,i){return Jt().memoizedState=[r,i===void 0?null:i],r},useContext:Mt,useEffect:Ay,useImperativeHandle:function(r,i,s){s=s!=null?s.concat([r]):null,Du(4194308,4,xy.bind(null,i,r),s)},useLayoutEffect:function(r,i){return Du(4194308,4,r,i)},useInsertionEffect:function(r,i){Du(4,2,r,i)},useMemo:function(r,i){var s=Jt();i=i===void 0?null:i;var u=r();if(sa){er(!0);try{r()}finally{er(!1)}}return s.memoizedState=[u,i],u},useReducer:function(r,i,s){var u=Jt();if(s!==void 0){var f=s(i);if(sa){er(!0);try{s(i)}finally{er(!1)}}}else f=i;return u.memoizedState=u.baseState=f,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:f},u.queue=r,r=r.dispatch=QN.bind(null,De,r),[u.memoizedState,r]},useRef:function(r){var i=Jt();return r={current:r},i.memoizedState=r},useState:function(r){r=Bd(r);var i=r.queue,s=By.bind(null,De,i);return i.dispatch=s,[r.memoizedState,s]},useDebugValue:Ud,useDeferredValue:function(r,i){var s=Jt();return Yd(s,r,i)},useTransition:function(){var r=Bd(!1);return r=Dy.bind(null,De,r.queue,!0,!1),Jt().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,i,s){var u=De,f=Jt();if(ke){if(s===void 0)throw Error(a(407));s=s()}else{if(s=i(),rt===null)throw Error(a(349));(Ze&127)!==0||ay(u,i,s)}f.memoizedState=s;var g={value:s,getSnapshot:i};return f.queue=g,Ay(oy.bind(null,u,g,r),[r]),u.flags|=2048,rs(9,{destroy:void 0},sy.bind(null,u,g,s,i),null),s},useId:function(){var r=Jt(),i=rt.identifierPrefix;if(ke){var s=rr,u=nr;s=(u&~(1<<32-Ft(u)-1)).toString(32)+s,i="_"+i+"R_"+s,s=Tu++,0<s&&(i+="H"+s.toString(32)),i+="_"}else s=KN++,i="_"+i+"r_"+s.toString(32)+"_";return r.memoizedState=i},useHostTransitionStatus:Gd,useFormState:py,useActionState:py,useOptimistic:function(r){var i=Jt();i.memoizedState=i.baseState=r;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=s,i=kd.bind(null,De,!0,s),s.dispatch=i,[r,i]},useMemoCache:Vd,useCacheRefresh:function(){return Jt().memoizedState=PN.bind(null,De)},useEffectEvent:function(r){var i=Jt(),s={impl:r};return i.memoizedState=s,function(){if((Fe&2)!==0)throw Error(a(440));return s.impl.apply(void 0,arguments)}}},Xd={readContext:Mt,use:Iu,useCallback:Cy,useContext:Mt,useEffect:zd,useImperativeHandle:Ty,useInsertionEffect:wy,useLayoutEffect:Ny,useMemo:Iy,useReducer:Ru,useRef:Sy,useState:function(){return Ru(Ir)},useDebugValue:Ud,useDeferredValue:function(r,i){var s=yt();return Ry(s,et.memoizedState,r,i)},useTransition:function(){var r=Ru(Ir)[0],i=yt().memoizedState;return[typeof r=="boolean"?r:Eo(r),i]},useSyncExternalStore:iy,useId:Oy,useHostTransitionStatus:Gd,useFormState:yy,useActionState:yy,useOptimistic:function(r,i){var s=yt();return cy(s,et,r,i)},useMemoCache:Vd,useCacheRefresh:My};Xd.useEffectEvent=Ey;var Yy={readContext:Mt,use:Iu,useCallback:Cy,useContext:Mt,useEffect:zd,useImperativeHandle:Ty,useInsertionEffect:wy,useLayoutEffect:Ny,useMemo:Iy,useReducer:Md,useRef:Sy,useState:function(){return Md(Ir)},useDebugValue:Ud,useDeferredValue:function(r,i){var s=yt();return et===null?Yd(s,r,i):Ry(s,et.memoizedState,r,i)},useTransition:function(){var r=Md(Ir)[0],i=yt().memoizedState;return[typeof r=="boolean"?r:Eo(r),i]},useSyncExternalStore:iy,useId:Oy,useHostTransitionStatus:Gd,useFormState:by,useActionState:by,useOptimistic:function(r,i){var s=yt();return et!==null?cy(s,et,r,i):(s.baseState=r,[r,s.queue.dispatch])},useMemoCache:Vd,useCacheRefresh:My};Yy.useEffectEvent=Ey;function Wd(r,i,s,u){i=r.memoizedState,s=s(u,i),s=s==null?i:y({},i,s),r.memoizedState=s,r.lanes===0&&(r.updateQueue.baseState=s)}var Kd={enqueueSetState:function(r,i,s){r=r._reactInternals;var u=mn(),f=ci(u);f.payload=i,s!=null&&(f.callback=s),i=fi(r,f,u),i!==null&&(tn(i,r,u),vo(i,r,u))},enqueueReplaceState:function(r,i,s){r=r._reactInternals;var u=mn(),f=ci(u);f.tag=1,f.payload=i,s!=null&&(f.callback=s),i=fi(r,f,u),i!==null&&(tn(i,r,u),vo(i,r,u))},enqueueForceUpdate:function(r,i){r=r._reactInternals;var s=mn(),u=ci(s);u.tag=2,i!=null&&(u.callback=i),i=fi(r,u,s),i!==null&&(tn(i,r,s),vo(i,r,s))}};function Zy(r,i,s,u,f,g,b){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(u,g,b):i.prototype&&i.prototype.isPureReactComponent?!uo(s,u)||!uo(f,g):!0}function Gy(r,i,s,u){r=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(s,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(s,u),i.state!==r&&Kd.enqueueReplaceState(i,i.state,null)}function oa(r,i){var s=i;if("ref"in i){s={};for(var u in i)u!=="ref"&&(s[u]=i[u])}if(r=r.defaultProps){s===i&&(s=y({},s));for(var f in r)s[f]===void 0&&(s[f]=r[f])}return s}function ky(r){cu(r)}function Xy(r){console.error(r)}function Wy(r){cu(r)}function Ou(r,i){try{var s=r.onUncaughtError;s(i.value,{componentStack:i.stack})}catch(u){setTimeout(function(){throw u})}}function Ky(r,i,s){try{var u=r.onCaughtError;u(s.value,{componentStack:s.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Hd(r,i,s){return s=ci(s),s.tag=3,s.payload={element:null},s.callback=function(){Ou(r,i)},s}function Hy(r){return r=ci(r),r.tag=3,r}function Fy(r,i,s,u){var f=s.type.getDerivedStateFromError;if(typeof f=="function"){var g=u.value;r.payload=function(){return f(g)},r.callback=function(){Ky(i,s,u)}}var b=s.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(r.callback=function(){Ky(i,s,u),typeof f!="function"&&(yi===null?yi=new Set([this]):yi.add(this));var w=u.stack;this.componentDidCatch(u.value,{componentStack:w!==null?w:""})})}function qN(r,i,s,u,f){if(s.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(i=s.alternate,i!==null&&ja(i,s,f,!0),s=fn.current,s!==null){switch(s.tag){case 31:case 13:return Tn===null?Ku():s.alternate===null&&mt===0&&(mt=3),s.flags&=-257,s.flags|=65536,s.lanes=f,u===Su?s.flags|=16384:(i=s.updateQueue,i===null?s.updateQueue=new Set([u]):i.add(u),yh(r,u,f)),!1;case 22:return s.flags|=65536,u===Su?s.flags|=16384:(i=s.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([u])},s.updateQueue=i):(s=i.retryQueue,s===null?i.retryQueue=new Set([u]):s.add(u)),yh(r,u,f)),!1}throw Error(a(435,s.tag))}return yh(r,u,f),Ku(),!1}if(ke)return i=fn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,u!==fd&&(r=Error(a(422),{cause:u}),ho(En(r,s)))):(u!==fd&&(i=Error(a(423),{cause:u}),ho(En(i,s))),r=r.current.alternate,r.flags|=65536,f&=-f,r.lanes|=f,u=En(u,s),f=Hd(r.stateNode,u,f),Ed(r,f),mt!==4&&(mt=2)),!1;var g=Error(a(520),{cause:u});if(g=En(g,s),Vo===null?Vo=[g]:Vo.push(g),mt!==4&&(mt=2),i===null)return!0;u=En(u,s),s=i;do{switch(s.tag){case 3:return s.flags|=65536,r=f&-f,s.lanes|=r,r=Hd(s.stateNode,u,r),Ed(s,r),!1;case 1:if(i=s.type,g=s.stateNode,(s.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(yi===null||!yi.has(g))))return s.flags|=65536,f&=-f,s.lanes|=f,f=Hy(f),Fy(f,r,s,u),Ed(s,f),!1}s=s.return}while(s!==null);return!1}var Fd=Error(a(461)),wt=!1;function Bt(r,i,s,u){i.child=r===null?Pp(i,null,s,u):aa(i,r.child,s,u)}function Jy(r,i,s,u,f){s=s.render;var g=i.ref;if("ref"in u){var b={};for(var w in u)w!=="ref"&&(b[w]=u[w])}else b=u;return ta(i),u=Id(r,i,s,b,g,f),w=Rd(),r!==null&&!wt?(Dd(r,i,f),Rr(r,i,f)):(ke&&w&&ud(i),i.flags|=1,Bt(r,i,u,f),i.child)}function jy(r,i,s,u,f){if(r===null){var g=s.type;return typeof g=="function"&&!sd(g)&&g.defaultProps===void 0&&s.compare===null?(i.tag=15,i.type=g,$y(r,i,g,u,f)):(r=gu(s.type,null,u,i,i.mode,f),r.ref=i.ref,r.return=i,i.child=r)}if(g=r.child,!th(r,f)){var b=g.memoizedProps;if(s=s.compare,s=s!==null?s:uo,s(b,u)&&r.ref===i.ref)return Rr(r,i,f)}return i.flags|=1,r=wr(g,u),r.ref=i.ref,r.return=i,i.child=r}function $y(r,i,s,u,f){if(r!==null){var g=r.memoizedProps;if(uo(g,u)&&r.ref===i.ref)if(wt=!1,i.pendingProps=u=g,th(r,f))(r.flags&131072)!==0&&(wt=!0);else return i.lanes=r.lanes,Rr(r,i,f)}return Jd(r,i,s,u,f)}function Py(r,i,s,u){var f=u.children,g=r!==null?r.memoizedState:null;if(r===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((i.flags&128)!==0){if(g=g!==null?g.baseLanes|s:s,r!==null){for(u=i.child=r.child,f=0;u!==null;)f=f|u.lanes|u.childLanes,u=u.sibling;u=f&~g}else u=0,i.child=null;return Qy(r,i,g,s,u)}if((s&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},r!==null&&vu(i,g!==null?g.cachePool:null),g!==null?ey(i,g):Nd(),ty(i);else return u=i.lanes=536870912,Qy(r,i,g!==null?g.baseLanes|s:s,s,u)}else g!==null?(vu(i,g.cachePool),ey(i,g),hi(),i.memoizedState=null):(r!==null&&vu(i,null),Nd(),hi());return Bt(r,i,f,s),i.child}function xo(r,i){return r!==null&&r.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function Qy(r,i,s,u,f){var g=vd();return g=g===null?null:{parent:At._currentValue,pool:g},i.memoizedState={baseLanes:s,cachePool:g},r!==null&&vu(i,null),Nd(),ty(i),r!==null&&ja(r,i,u,!0),i.childLanes=f,null}function Mu(r,i){return i=Lu({mode:i.mode,children:i.children},r.mode),i.ref=r.ref,r.child=i,i.return=r,i}function qy(r,i,s){return aa(i,r.child,null,s),r=Mu(i,i.pendingProps),r.flags|=2,dn(i),i.memoizedState=null,r}function ex(r,i,s){var u=i.pendingProps,f=(i.flags&128)!==0;if(i.flags&=-129,r===null){if(ke){if(u.mode==="hidden")return r=Mu(i,u),i.lanes=536870912,xo(null,r);if(Td(i),(r=at)?(r=fv(r,xn),r=r!==null&&r.data==="&"?r:null,r!==null&&(i.memoizedState={dehydrated:r,treeContext:ai!==null?{id:nr,overflow:rr}:null,retryLane:536870912,hydrationErrors:null},s=Lp(r),s.return=i,i.child=s,Ot=i,at=null)):r=null,r===null)throw oi(i);return i.lanes=536870912,null}return Mu(i,u)}var g=r.memoizedState;if(g!==null){var b=g.dehydrated;if(Td(i),f)if(i.flags&256)i.flags&=-257,i=qy(r,i,s);else if(i.memoizedState!==null)i.child=r.child,i.flags|=128,i=null;else throw Error(a(558));else if(wt||ja(r,i,s,!1),f=(s&r.childLanes)!==0,wt||f){if(u=rt,u!==null&&(b=Hl(u,s),b!==0&&b!==g.retryLane))throw g.retryLane=b,Pi(r,b),tn(u,r,b),Fd;Ku(),i=qy(r,i,s)}else r=g.treeContext,at=Cn(b.nextSibling),Ot=i,ke=!0,si=null,xn=!1,r!==null&&Yp(i,r),i=Mu(i,u),i.flags|=4096;return i}return r=wr(r.child,{mode:u.mode,children:u.children}),r.ref=i.ref,i.child=r,r.return=i,r}function Bu(r,i){var s=i.ref;if(s===null)r!==null&&r.ref!==null&&(i.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(a(284));(r===null||r.ref!==s)&&(i.flags|=4194816)}}function Jd(r,i,s,u,f){return ta(i),s=Id(r,i,s,u,void 0,f),u=Rd(),r!==null&&!wt?(Dd(r,i,f),Rr(r,i,f)):(ke&&u&&ud(i),i.flags|=1,Bt(r,i,s,f),i.child)}function e0(r,i,s,u,f,g){return ta(i),i.updateQueue=null,s=ry(i,u,s,f),ny(r),u=Rd(),r!==null&&!wt?(Dd(r,i,g),Rr(r,i,g)):(ke&&u&&ud(i),i.flags|=1,Bt(r,i,s,g),i.child)}function t0(r,i,s,u,f){if(ta(i),i.stateNode===null){var g=Ka,b=s.contextType;typeof b=="object"&&b!==null&&(g=Mt(b)),g=new s(u,g),i.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=Kd,i.stateNode=g,g._reactInternals=i,g=i.stateNode,g.props=u,g.state=i.memoizedState,g.refs={},Sd(i),b=s.contextType,g.context=typeof b=="object"&&b!==null?Mt(b):Ka,g.state=i.memoizedState,b=s.getDerivedStateFromProps,typeof b=="function"&&(Wd(i,s,b,u),g.state=i.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(b=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),b!==g.state&&Kd.enqueueReplaceState(g,g.state,null),So(i,u,g,f),bo(),g.state=i.memoizedState),typeof g.componentDidMount=="function"&&(i.flags|=4194308),u=!0}else if(r===null){g=i.stateNode;var w=i.memoizedProps,D=oa(s,w);g.props=D;var J=g.context,ae=s.contextType;b=Ka,typeof ae=="object"&&ae!==null&&(b=Mt(ae));var oe=s.getDerivedStateFromProps;ae=typeof oe=="function"||typeof g.getSnapshotBeforeUpdate=="function",w=i.pendingProps!==w,ae||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(w||J!==b)&&Gy(i,g,u,b),ui=!1;var j=i.memoizedState;g.state=j,So(i,u,g,f),bo(),J=i.memoizedState,w||j!==J||ui?(typeof oe=="function"&&(Wd(i,s,oe,u),J=i.memoizedState),(D=ui||Zy(i,s,D,u,j,J,b))?(ae||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(i.flags|=4194308)):(typeof g.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=J),g.props=u,g.state=J,g.context=b,u=D):(typeof g.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{g=i.stateNode,Ad(r,i),b=i.memoizedProps,ae=oa(s,b),g.props=ae,oe=i.pendingProps,j=g.context,J=s.contextType,D=Ka,typeof J=="object"&&J!==null&&(D=Mt(J)),w=s.getDerivedStateFromProps,(J=typeof w=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(b!==oe||j!==D)&&Gy(i,g,u,D),ui=!1,j=i.memoizedState,g.state=j,So(i,u,g,f),bo();var Q=i.memoizedState;b!==oe||j!==Q||ui||r!==null&&r.dependencies!==null&&pu(r.dependencies)?(typeof w=="function"&&(Wd(i,s,w,u),Q=i.memoizedState),(ae=ui||Zy(i,s,ae,u,j,Q,D)||r!==null&&r.dependencies!==null&&pu(r.dependencies))?(J||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(u,Q,D),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(u,Q,D)),typeof g.componentDidUpdate=="function"&&(i.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof g.componentDidUpdate!="function"||b===r.memoizedProps&&j===r.memoizedState||(i.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||b===r.memoizedProps&&j===r.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=Q),g.props=u,g.state=Q,g.context=D,u=ae):(typeof g.componentDidUpdate!="function"||b===r.memoizedProps&&j===r.memoizedState||(i.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||b===r.memoizedProps&&j===r.memoizedState||(i.flags|=1024),u=!1)}return g=u,Bu(r,i),u=(i.flags&128)!==0,g||u?(g=i.stateNode,s=u&&typeof s.getDerivedStateFromError!="function"?null:g.render(),i.flags|=1,r!==null&&u?(i.child=aa(i,r.child,null,f),i.child=aa(i,null,s,f)):Bt(r,i,s,f),i.memoizedState=g.state,r=i.child):r=Rr(r,i,f),r}function n0(r,i,s,u){return qi(),i.flags|=256,Bt(r,i,s,u),i.child}var jd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function $d(r){return{baseLanes:r,cachePool:Kp()}}function Pd(r,i,s){return r=r!==null?r.childLanes&~s:0,i&&(r|=gn),r}function r0(r,i,s){var u=i.pendingProps,f=!1,g=(i.flags&128)!==0,b;if((b=g)||(b=r!==null&&r.memoizedState===null?!1:(pt.current&2)!==0),b&&(f=!0,i.flags&=-129),b=(i.flags&32)!==0,i.flags&=-33,r===null){if(ke){if(f?di(i):hi(),(r=at)?(r=fv(r,xn),r=r!==null&&r.data!=="&"?r:null,r!==null&&(i.memoizedState={dehydrated:r,treeContext:ai!==null?{id:nr,overflow:rr}:null,retryLane:536870912,hydrationErrors:null},s=Lp(r),s.return=i,i.child=s,Ot=i,at=null)):r=null,r===null)throw oi(i);return Oh(r)?i.lanes=32:i.lanes=536870912,null}var w=u.children;return u=u.fallback,f?(hi(),f=i.mode,w=Lu({mode:"hidden",children:w},f),u=Qi(u,f,s,null),w.return=i,u.return=i,w.sibling=u,i.child=w,u=i.child,u.memoizedState=$d(s),u.childLanes=Pd(r,b,s),i.memoizedState=jd,xo(null,u)):(di(i),Qd(i,w))}var D=r.memoizedState;if(D!==null&&(w=D.dehydrated,w!==null)){if(g)i.flags&256?(di(i),i.flags&=-257,i=qd(r,i,s)):i.memoizedState!==null?(hi(),i.child=r.child,i.flags|=128,i=null):(hi(),w=u.fallback,f=i.mode,u=Lu({mode:"visible",children:u.children},f),w=Qi(w,f,s,null),w.flags|=2,u.return=i,w.return=i,u.sibling=w,i.child=u,aa(i,r.child,null,s),u=i.child,u.memoizedState=$d(s),u.childLanes=Pd(r,b,s),i.memoizedState=jd,i=xo(null,u));else if(di(i),Oh(w)){if(b=w.nextSibling&&w.nextSibling.dataset,b)var J=b.dgst;b=J,u=Error(a(419)),u.stack="",u.digest=b,ho({value:u,source:null,stack:null}),i=qd(r,i,s)}else if(wt||ja(r,i,s,!1),b=(s&r.childLanes)!==0,wt||b){if(b=rt,b!==null&&(u=Hl(b,s),u!==0&&u!==D.retryLane))throw D.retryLane=u,Pi(r,u),tn(b,r,u),Fd;Vh(w)||Ku(),i=qd(r,i,s)}else Vh(w)?(i.flags|=192,i.child=r.child,i=null):(r=D.treeContext,at=Cn(w.nextSibling),Ot=i,ke=!0,si=null,xn=!1,r!==null&&Yp(i,r),i=Qd(i,u.children),i.flags|=4096);return i}return f?(hi(),w=u.fallback,f=i.mode,D=r.child,J=D.sibling,u=wr(D,{mode:"hidden",children:u.children}),u.subtreeFlags=D.subtreeFlags&65011712,J!==null?w=wr(J,w):(w=Qi(w,f,s,null),w.flags|=2),w.return=i,u.return=i,u.sibling=w,i.child=u,xo(null,u),u=i.child,w=r.child.memoizedState,w===null?w=$d(s):(f=w.cachePool,f!==null?(D=At._currentValue,f=f.parent!==D?{parent:D,pool:D}:f):f=Kp(),w={baseLanes:w.baseLanes|s,cachePool:f}),u.memoizedState=w,u.childLanes=Pd(r,b,s),i.memoizedState=jd,xo(r.child,u)):(di(i),s=r.child,r=s.sibling,s=wr(s,{mode:"visible",children:u.children}),s.return=i,s.sibling=null,r!==null&&(b=i.deletions,b===null?(i.deletions=[r],i.flags|=16):b.push(r)),i.child=s,i.memoizedState=null,s)}function Qd(r,i){return i=Lu({mode:"visible",children:i},r.mode),i.return=r,r.child=i}function Lu(r,i){return r=cn(22,r,null,i),r.lanes=0,r}function qd(r,i,s){return aa(i,r.child,null,s),r=Qd(i,i.pendingProps.children),r.flags|=2,i.memoizedState=null,r}function i0(r,i,s){r.lanes|=i;var u=r.alternate;u!==null&&(u.lanes|=i),gd(r.return,i,s)}function eh(r,i,s,u,f,g){var b=r.memoizedState;b===null?r.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:s,tailMode:f,treeForkCount:g}:(b.isBackwards=i,b.rendering=null,b.renderingStartTime=0,b.last=u,b.tail=s,b.tailMode=f,b.treeForkCount=g)}function a0(r,i,s){var u=i.pendingProps,f=u.revealOrder,g=u.tail;u=u.children;var b=pt.current,w=(b&2)!==0;if(w?(b=b&1|2,i.flags|=128):b&=1,ee(pt,b),Bt(r,i,u,s),u=ke?fo:0,!w&&r!==null&&(r.flags&128)!==0)e:for(r=i.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&i0(r,s,i);else if(r.tag===19)i0(r,s,i);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(f){case"forwards":for(s=i.child,f=null;s!==null;)r=s.alternate,r!==null&&Nu(r)===null&&(f=s),s=s.sibling;s=f,s===null?(f=i.child,i.child=null):(f=s.sibling,s.sibling=null),eh(i,!1,f,s,g,u);break;case"backwards":case"unstable_legacy-backwards":for(s=null,f=i.child,i.child=null;f!==null;){if(r=f.alternate,r!==null&&Nu(r)===null){i.child=f;break}r=f.sibling,f.sibling=s,s=f,f=r}eh(i,!0,s,null,g,u);break;case"together":eh(i,!1,null,null,void 0,u);break;default:i.memoizedState=null}return i.child}function Rr(r,i,s){if(r!==null&&(i.dependencies=r.dependencies),pi|=i.lanes,(s&i.childLanes)===0)if(r!==null){if(ja(r,i,s,!1),(s&i.childLanes)===0)return null}else return null;if(r!==null&&i.child!==r.child)throw Error(a(153));if(i.child!==null){for(r=i.child,s=wr(r,r.pendingProps),i.child=s,s.return=i;r.sibling!==null;)r=r.sibling,s=s.sibling=wr(r,r.pendingProps),s.return=i;s.sibling=null}return i.child}function th(r,i){return(r.lanes&i)!==0?!0:(r=r.dependencies,!!(r!==null&&pu(r)))}function tx(r,i,s){switch(i.tag){case 3:ce(i,i.stateNode.containerInfo),li(i,At,r.memoizedState.cache),qi();break;case 27:case 5:_e(i);break;case 4:ce(i,i.stateNode.containerInfo);break;case 10:li(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Td(i),null;break;case 13:var u=i.memoizedState;if(u!==null)return u.dehydrated!==null?(di(i),i.flags|=128,null):(s&i.child.childLanes)!==0?r0(r,i,s):(di(i),r=Rr(r,i,s),r!==null?r.sibling:null);di(i);break;case 19:var f=(r.flags&128)!==0;if(u=(s&i.childLanes)!==0,u||(ja(r,i,s,!1),u=(s&i.childLanes)!==0),f){if(u)return a0(r,i,s);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),ee(pt,pt.current),u)break;return null;case 22:return i.lanes=0,Py(r,i,s,i.pendingProps);case 24:li(i,At,r.memoizedState.cache)}return Rr(r,i,s)}function s0(r,i,s){if(r!==null)if(r.memoizedProps!==i.pendingProps)wt=!0;else{if(!th(r,s)&&(i.flags&128)===0)return wt=!1,tx(r,i,s);wt=(r.flags&131072)!==0}else wt=!1,ke&&(i.flags&1048576)!==0&&Up(i,fo,i.index);switch(i.lanes=0,i.tag){case 16:e:{var u=i.pendingProps;if(r=ra(i.elementType),i.type=r,typeof r=="function")sd(r)?(u=oa(r,u),i.tag=1,i=t0(null,i,r,u,s)):(i.tag=0,i=Jd(null,i,r,u,s));else{if(r!=null){var f=r.$$typeof;if(f===I){i.tag=11,i=Jy(null,i,r,u,s);break e}else if(f===M){i.tag=14,i=jy(null,i,r,u,s);break e}}throw i=_(r)||r,Error(a(306,i,""))}}return i;case 0:return Jd(r,i,i.type,i.pendingProps,s);case 1:return u=i.type,f=oa(u,i.pendingProps),t0(r,i,u,f,s);case 3:e:{if(ce(i,i.stateNode.containerInfo),r===null)throw Error(a(387));u=i.pendingProps;var g=i.memoizedState;f=g.element,Ad(r,i),So(i,u,null,s);var b=i.memoizedState;if(u=b.cache,li(i,At,u),u!==g.cache&&md(i,[At],s,!0),bo(),u=b.element,g.isDehydrated)if(g={element:u,isDehydrated:!1,cache:b.cache},i.updateQueue.baseState=g,i.memoizedState=g,i.flags&256){i=n0(r,i,u,s);break e}else if(u!==f){f=En(Error(a(424)),i),ho(f),i=n0(r,i,u,s);break e}else{switch(r=i.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(at=Cn(r.firstChild),Ot=i,ke=!0,si=null,xn=!0,s=Pp(i,null,u,s),i.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling}else{if(qi(),u===f){i=Rr(r,i,s);break e}Bt(r,i,u,s)}i=i.child}return i;case 26:return Bu(r,i),r===null?(s=yv(i.type,null,i.pendingProps,null))?i.memoizedState=s:ke||(s=i.type,r=i.pendingProps,u=Qu(ge.current).createElement(s),u[Ct]=i,u[Zt]=r,Lt(u,s,r),St(u),i.stateNode=u):i.memoizedState=yv(i.type,r.memoizedProps,i.pendingProps,r.memoizedState),null;case 27:return _e(i),r===null&&ke&&(u=i.stateNode=gv(i.type,i.pendingProps,ge.current),Ot=i,xn=!0,f=at,Ai(i.type)?(Mh=f,at=Cn(u.firstChild)):at=f),Bt(r,i,i.pendingProps.children,s),Bu(r,i),r===null&&(i.flags|=4194304),i.child;case 5:return r===null&&ke&&((f=u=at)&&(u=_x(u,i.type,i.pendingProps,xn),u!==null?(i.stateNode=u,Ot=i,at=Cn(u.firstChild),xn=!1,f=!0):f=!1),f||oi(i)),_e(i),f=i.type,g=i.pendingProps,b=r!==null?r.memoizedProps:null,u=g.children,Rh(f,g)?u=null:b!==null&&Rh(f,b)&&(i.flags|=32),i.memoizedState!==null&&(f=Id(r,i,HN,null,null,s),Zo._currentValue=f),Bu(r,i),Bt(r,i,u,s),i.child;case 6:return r===null&&ke&&((r=s=at)&&(s=Vx(s,i.pendingProps,xn),s!==null?(i.stateNode=s,Ot=i,at=null,r=!0):r=!1),r||oi(i)),null;case 13:return r0(r,i,s);case 4:return ce(i,i.stateNode.containerInfo),u=i.pendingProps,r===null?i.child=aa(i,null,u,s):Bt(r,i,u,s),i.child;case 11:return Jy(r,i,i.type,i.pendingProps,s);case 7:return Bt(r,i,i.pendingProps,s),i.child;case 8:return Bt(r,i,i.pendingProps.children,s),i.child;case 12:return Bt(r,i,i.pendingProps.children,s),i.child;case 10:return u=i.pendingProps,li(i,i.type,u.value),Bt(r,i,u.children,s),i.child;case 9:return f=i.type._context,u=i.pendingProps.children,ta(i),f=Mt(f),u=u(f),i.flags|=1,Bt(r,i,u,s),i.child;case 14:return jy(r,i,i.type,i.pendingProps,s);case 15:return $y(r,i,i.type,i.pendingProps,s);case 19:return a0(r,i,s);case 31:return ex(r,i,s);case 22:return Py(r,i,s,i.pendingProps);case 24:return ta(i),u=Mt(At),r===null?(f=vd(),f===null&&(f=rt,g=pd(),f.pooledCache=g,g.refCount++,g!==null&&(f.pooledCacheLanes|=s),f=g),i.memoizedState={parent:u,cache:f},Sd(i),li(i,At,f)):((r.lanes&s)!==0&&(Ad(r,i),So(i,null,null,s),bo()),f=r.memoizedState,g=i.memoizedState,f.parent!==u?(f={parent:u,cache:u},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),li(i,At,u)):(u=g.cache,li(i,At,u),u!==f.cache&&md(i,[At],s,!0))),Bt(r,i,i.pendingProps.children,s),i.child;case 29:throw i.pendingProps}throw Error(a(156,i.tag))}function Dr(r){r.flags|=4}function nh(r,i,s,u,f){if((i=(r.mode&32)!==0)&&(i=!1),i){if(r.flags|=16777216,(f&335544128)===f)if(r.stateNode.complete)r.flags|=8192;else if(O0())r.flags|=8192;else throw ia=Su,bd}else r.flags&=-16777217}function o0(r,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!Ev(i))if(O0())r.flags|=8192;else throw ia=Su,bd}function zu(r,i){i!==null&&(r.flags|=4),r.flags&16384&&(i=r.tag!==22?Xl():536870912,r.lanes|=i,os|=i)}function To(r,i){if(!ke)switch(r.tailMode){case"hidden":i=r.tail;for(var s=null;i!==null;)i.alternate!==null&&(s=i),i=i.sibling;s===null?r.tail=null:s.sibling=null;break;case"collapsed":s=r.tail;for(var u=null;s!==null;)s.alternate!==null&&(u=s),s=s.sibling;u===null?i||r.tail===null?r.tail=null:r.tail.sibling=null:u.sibling=null}}function st(r){var i=r.alternate!==null&&r.alternate.child===r.child,s=0,u=0;if(i)for(var f=r.child;f!==null;)s|=f.lanes|f.childLanes,u|=f.subtreeFlags&65011712,u|=f.flags&65011712,f.return=r,f=f.sibling;else for(f=r.child;f!==null;)s|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=r,f=f.sibling;return r.subtreeFlags|=u,r.childLanes=s,i}function nx(r,i,s){var u=i.pendingProps;switch(cd(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return st(i),null;case 1:return st(i),null;case 3:return s=i.stateNode,u=null,r!==null&&(u=r.memoizedState.cache),i.memoizedState.cache!==u&&(i.flags|=2048),Tr(At),me(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(r===null||r.child===null)&&(Ja(i)?Dr(i):r===null||r.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,dd())),st(i),null;case 26:var f=i.type,g=i.memoizedState;return r===null?(Dr(i),g!==null?(st(i),o0(i,g)):(st(i),nh(i,f,null,u,s))):g?g!==r.memoizedState?(Dr(i),st(i),o0(i,g)):(st(i),i.flags&=-16777217):(r=r.memoizedProps,r!==u&&Dr(i),st(i),nh(i,f,r,u,s)),null;case 27:if(Re(i),s=ge.current,f=i.type,r!==null&&i.stateNode!=null)r.memoizedProps!==u&&Dr(i);else{if(!u){if(i.stateNode===null)throw Error(a(166));return st(i),null}r=re.current,Ja(i)?Zp(i):(r=gv(f,u,s),i.stateNode=r,Dr(i))}return st(i),null;case 5:if(Re(i),f=i.type,r!==null&&i.stateNode!=null)r.memoizedProps!==u&&Dr(i);else{if(!u){if(i.stateNode===null)throw Error(a(166));return st(i),null}if(g=re.current,Ja(i))Zp(i);else{var b=Qu(ge.current);switch(g){case 1:g=b.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:g=b.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":g=b.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":g=b.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":g=b.createElement("div"),g.innerHTML="<script><\/script>",g=g.removeChild(g.firstChild);break;case"select":g=typeof u.is=="string"?b.createElement("select",{is:u.is}):b.createElement("select"),u.multiple?g.multiple=!0:u.size&&(g.size=u.size);break;default:g=typeof u.is=="string"?b.createElement(f,{is:u.is}):b.createElement(f)}}g[Ct]=i,g[Zt]=u;e:for(b=i.child;b!==null;){if(b.tag===5||b.tag===6)g.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===i)break e;for(;b.sibling===null;){if(b.return===null||b.return===i)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}i.stateNode=g;e:switch(Lt(g,f,u),f){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&Dr(i)}}return st(i),nh(i,i.type,r===null?null:r.memoizedProps,i.pendingProps,s),null;case 6:if(r&&i.stateNode!=null)r.memoizedProps!==u&&Dr(i);else{if(typeof u!="string"&&i.stateNode===null)throw Error(a(166));if(r=ge.current,Ja(i)){if(r=i.stateNode,s=i.memoizedProps,u=null,f=Ot,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}r[Ct]=i,r=!!(r.nodeValue===s||u!==null&&u.suppressHydrationWarning===!0||rv(r.nodeValue,s)),r||oi(i,!0)}else r=Qu(r).createTextNode(u),r[Ct]=i,i.stateNode=r}return st(i),null;case 31:if(s=i.memoizedState,r===null||r.memoizedState!==null){if(u=Ja(i),s!==null){if(r===null){if(!u)throw Error(a(318));if(r=i.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(a(557));r[Ct]=i}else qi(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;st(i),r=!1}else s=dd(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=s),r=!0;if(!r)return i.flags&256?(dn(i),i):(dn(i),null);if((i.flags&128)!==0)throw Error(a(558))}return st(i),null;case 13:if(u=i.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(f=Ja(i),u!==null&&u.dehydrated!==null){if(r===null){if(!f)throw Error(a(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(a(317));f[Ct]=i}else qi(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;st(i),f=!1}else f=dd(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(dn(i),i):(dn(i),null)}return dn(i),(i.flags&128)!==0?(i.lanes=s,i):(s=u!==null,r=r!==null&&r.memoizedState!==null,s&&(u=i.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool),g=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(g=u.memoizedState.cachePool.pool),g!==f&&(u.flags|=2048)),s!==r&&s&&(i.child.flags|=8192),zu(i,i.updateQueue),st(i),null);case 4:return me(),r===null&&Nh(i.stateNode.containerInfo),st(i),null;case 10:return Tr(i.type),st(i),null;case 19:if(L(pt),u=i.memoizedState,u===null)return st(i),null;if(f=(i.flags&128)!==0,g=u.rendering,g===null)if(f)To(u,!1);else{if(mt!==0||r!==null&&(r.flags&128)!==0)for(r=i.child;r!==null;){if(g=Nu(r),g!==null){for(i.flags|=128,To(u,!1),r=g.updateQueue,i.updateQueue=r,zu(i,r),i.subtreeFlags=0,r=s,s=i.child;s!==null;)Bp(s,r),s=s.sibling;return ee(pt,pt.current&1|2),ke&&Nr(i,u.treeForkCount),i.child}r=r.sibling}u.tail!==null&&Vt()>ku&&(i.flags|=128,f=!0,To(u,!1),i.lanes=4194304)}else{if(!f)if(r=Nu(g),r!==null){if(i.flags|=128,f=!0,r=r.updateQueue,i.updateQueue=r,zu(i,r),To(u,!0),u.tail===null&&u.tailMode==="hidden"&&!g.alternate&&!ke)return st(i),null}else 2*Vt()-u.renderingStartTime>ku&&s!==536870912&&(i.flags|=128,f=!0,To(u,!1),i.lanes=4194304);u.isBackwards?(g.sibling=i.child,i.child=g):(r=u.last,r!==null?r.sibling=g:i.child=g,u.last=g)}return u.tail!==null?(r=u.tail,u.rendering=r,u.tail=r.sibling,u.renderingStartTime=Vt(),r.sibling=null,s=pt.current,ee(pt,f?s&1|2:s&1),ke&&Nr(i,u.treeForkCount),r):(st(i),null);case 22:case 23:return dn(i),xd(),u=i.memoizedState!==null,r!==null?r.memoizedState!==null!==u&&(i.flags|=8192):u&&(i.flags|=8192),u?(s&536870912)!==0&&(i.flags&128)===0&&(st(i),i.subtreeFlags&6&&(i.flags|=8192)):st(i),s=i.updateQueue,s!==null&&zu(i,s.retryQueue),s=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(s=r.memoizedState.cachePool.pool),u=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),u!==s&&(i.flags|=2048),r!==null&&L(na),null;case 24:return s=null,r!==null&&(s=r.memoizedState.cache),i.memoizedState.cache!==s&&(i.flags|=2048),Tr(At),st(i),null;case 25:return null;case 30:return null}throw Error(a(156,i.tag))}function rx(r,i){switch(cd(i),i.tag){case 1:return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 3:return Tr(At),me(),r=i.flags,(r&65536)!==0&&(r&128)===0?(i.flags=r&-65537|128,i):null;case 26:case 27:case 5:return Re(i),null;case 31:if(i.memoizedState!==null){if(dn(i),i.alternate===null)throw Error(a(340));qi()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 13:if(dn(i),r=i.memoizedState,r!==null&&r.dehydrated!==null){if(i.alternate===null)throw Error(a(340));qi()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 19:return L(pt),null;case 4:return me(),null;case 10:return Tr(i.type),null;case 22:case 23:return dn(i),xd(),r!==null&&L(na),r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 24:return Tr(At),null;case 25:return null;default:return null}}function l0(r,i){switch(cd(i),i.tag){case 3:Tr(At),me();break;case 26:case 27:case 5:Re(i);break;case 4:me();break;case 31:i.memoizedState!==null&&dn(i);break;case 13:dn(i);break;case 19:L(pt);break;case 10:Tr(i.type);break;case 22:case 23:dn(i),xd(),r!==null&&L(na);break;case 24:Tr(At)}}function Co(r,i){try{var s=i.updateQueue,u=s!==null?s.lastEffect:null;if(u!==null){var f=u.next;s=f;do{if((s.tag&r)===r){u=void 0;var g=s.create,b=s.inst;u=g(),b.destroy=u}s=s.next}while(s!==f)}}catch(w){$e(i,i.return,w)}}function gi(r,i,s){try{var u=i.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var g=f.next;u=g;do{if((u.tag&r)===r){var b=u.inst,w=b.destroy;if(w!==void 0){b.destroy=void 0,f=i;var D=s,J=w;try{J()}catch(ae){$e(f,D,ae)}}}u=u.next}while(u!==g)}}catch(ae){$e(i,i.return,ae)}}function u0(r){var i=r.updateQueue;if(i!==null){var s=r.stateNode;try{qp(i,s)}catch(u){$e(r,r.return,u)}}}function c0(r,i,s){s.props=oa(r.type,r.memoizedProps),s.state=r.memoizedState;try{s.componentWillUnmount()}catch(u){$e(r,i,u)}}function Io(r,i){try{var s=r.ref;if(s!==null){switch(r.tag){case 26:case 27:case 5:var u=r.stateNode;break;case 30:u=r.stateNode;break;default:u=r.stateNode}typeof s=="function"?r.refCleanup=s(u):s.current=u}}catch(f){$e(r,i,f)}}function ir(r,i){var s=r.ref,u=r.refCleanup;if(s!==null)if(typeof u=="function")try{u()}catch(f){$e(r,i,f)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(f){$e(r,i,f)}else s.current=null}function f0(r){var i=r.type,s=r.memoizedProps,u=r.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":s.autoFocus&&u.focus();break e;case"img":s.src?u.src=s.src:s.srcSet&&(u.srcset=s.srcSet)}}catch(f){$e(r,r.return,f)}}function rh(r,i,s){try{var u=r.stateNode;xx(u,r.type,s,i),u[Zt]=i}catch(f){$e(r,r.return,f)}}function d0(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&Ai(r.type)||r.tag===4}function ih(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||d0(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&Ai(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function ah(r,i,s){var u=r.tag;if(u===5||u===6)r=r.stateNode,i?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(r,i):(i=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,i.appendChild(r),s=s._reactRootContainer,s!=null||i.onclick!==null||(i.onclick=Ar));else if(u!==4&&(u===27&&Ai(r.type)&&(s=r.stateNode,i=null),r=r.child,r!==null))for(ah(r,i,s),r=r.sibling;r!==null;)ah(r,i,s),r=r.sibling}function Uu(r,i,s){var u=r.tag;if(u===5||u===6)r=r.stateNode,i?s.insertBefore(r,i):s.appendChild(r);else if(u!==4&&(u===27&&Ai(r.type)&&(s=r.stateNode),r=r.child,r!==null))for(Uu(r,i,s),r=r.sibling;r!==null;)Uu(r,i,s),r=r.sibling}function h0(r){var i=r.stateNode,s=r.memoizedProps;try{for(var u=r.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);Lt(i,u,s),i[Ct]=r,i[Zt]=s}catch(g){$e(r,r.return,g)}}var _r=!1,Nt=!1,sh=!1,g0=typeof WeakSet=="function"?WeakSet:Set,Rt=null;function ix(r,i){if(r=r.containerInfo,Ch=ac,r=Tp(r),qf(r)){if("selectionStart"in r)var s={start:r.selectionStart,end:r.selectionEnd};else e:{s=(s=r.ownerDocument)&&s.defaultView||window;var u=s.getSelection&&s.getSelection();if(u&&u.rangeCount!==0){s=u.anchorNode;var f=u.anchorOffset,g=u.focusNode;u=u.focusOffset;try{s.nodeType,g.nodeType}catch{s=null;break e}var b=0,w=-1,D=-1,J=0,ae=0,oe=r,j=null;t:for(;;){for(var Q;oe!==s||f!==0&&oe.nodeType!==3||(w=b+f),oe!==g||u!==0&&oe.nodeType!==3||(D=b+u),oe.nodeType===3&&(b+=oe.nodeValue.length),(Q=oe.firstChild)!==null;)j=oe,oe=Q;for(;;){if(oe===r)break t;if(j===s&&++J===f&&(w=b),j===g&&++ae===u&&(D=b),(Q=oe.nextSibling)!==null)break;oe=j,j=oe.parentNode}oe=Q}s=w===-1||D===-1?null:{start:w,end:D}}else s=null}s=s||{start:0,end:0}}else s=null;for(Ih={focusedElem:r,selectionRange:s},ac=!1,Rt=i;Rt!==null;)if(i=Rt,r=i.child,(i.subtreeFlags&1028)!==0&&r!==null)r.return=i,Rt=r;else for(;Rt!==null;){switch(i=Rt,g=i.alternate,r=i.flags,i.tag){case 0:if((r&4)!==0&&(r=i.updateQueue,r=r!==null?r.events:null,r!==null))for(s=0;s<r.length;s++)f=r[s],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&g!==null){r=void 0,s=i,f=g.memoizedProps,g=g.memoizedState,u=s.stateNode;try{var ye=oa(s.type,f);r=u.getSnapshotBeforeUpdate(ye,g),u.__reactInternalSnapshotBeforeUpdate=r}catch(xe){$e(s,s.return,xe)}}break;case 3:if((r&1024)!==0){if(r=i.stateNode.containerInfo,s=r.nodeType,s===9)_h(r);else if(s===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":_h(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(a(163))}if(r=i.sibling,r!==null){r.return=i.return,Rt=r;break}Rt=i.return}}function m0(r,i,s){var u=s.flags;switch(s.tag){case 0:case 11:case 15:Or(r,s),u&4&&Co(5,s);break;case 1:if(Or(r,s),u&4)if(r=s.stateNode,i===null)try{r.componentDidMount()}catch(b){$e(s,s.return,b)}else{var f=oa(s.type,i.memoizedProps);i=i.memoizedState;try{r.componentDidUpdate(f,i,r.__reactInternalSnapshotBeforeUpdate)}catch(b){$e(s,s.return,b)}}u&64&&u0(s),u&512&&Io(s,s.return);break;case 3:if(Or(r,s),u&64&&(r=s.updateQueue,r!==null)){if(i=null,s.child!==null)switch(s.child.tag){case 27:case 5:i=s.child.stateNode;break;case 1:i=s.child.stateNode}try{qp(r,i)}catch(b){$e(s,s.return,b)}}break;case 27:i===null&&u&4&&h0(s);case 26:case 5:Or(r,s),i===null&&u&4&&f0(s),u&512&&Io(s,s.return);break;case 12:Or(r,s);break;case 31:Or(r,s),u&4&&v0(r,s);break;case 13:Or(r,s),u&4&&b0(r,s),u&64&&(r=s.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(s=hx.bind(null,s),Ox(r,s))));break;case 22:if(u=s.memoizedState!==null||_r,!u){i=i!==null&&i.memoizedState!==null||Nt,f=_r;var g=Nt;_r=u,(Nt=i)&&!g?Mr(r,s,(s.subtreeFlags&8772)!==0):Or(r,s),_r=f,Nt=g}break;case 30:break;default:Or(r,s)}}function p0(r){var i=r.alternate;i!==null&&(r.alternate=null,p0(i)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(i=r.stateNode,i!==null&&qs(i)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var lt=null,Pt=!1;function Vr(r,i,s){for(s=s.child;s!==null;)y0(r,i,s),s=s.sibling}function y0(r,i,s){if(Ht&&typeof Ht.onCommitFiberUnmount=="function")try{Ht.onCommitFiberUnmount(Wi,s)}catch{}switch(s.tag){case 26:Nt||ir(s,i),Vr(r,i,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:Nt||ir(s,i);var u=lt,f=Pt;Ai(s.type)&&(lt=s.stateNode,Pt=!1),Vr(r,i,s),zo(s.stateNode),lt=u,Pt=f;break;case 5:Nt||ir(s,i);case 6:if(u=lt,f=Pt,lt=null,Vr(r,i,s),lt=u,Pt=f,lt!==null)if(Pt)try{(lt.nodeType===9?lt.body:lt.nodeName==="HTML"?lt.ownerDocument.body:lt).removeChild(s.stateNode)}catch(g){$e(s,i,g)}else try{lt.removeChild(s.stateNode)}catch(g){$e(s,i,g)}break;case 18:lt!==null&&(Pt?(r=lt,uv(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,s.stateNode),ms(r)):uv(lt,s.stateNode));break;case 4:u=lt,f=Pt,lt=s.stateNode.containerInfo,Pt=!0,Vr(r,i,s),lt=u,Pt=f;break;case 0:case 11:case 14:case 15:gi(2,s,i),Nt||gi(4,s,i),Vr(r,i,s);break;case 1:Nt||(ir(s,i),u=s.stateNode,typeof u.componentWillUnmount=="function"&&c0(s,i,u)),Vr(r,i,s);break;case 21:Vr(r,i,s);break;case 22:Nt=(u=Nt)||s.memoizedState!==null,Vr(r,i,s),Nt=u;break;default:Vr(r,i,s)}}function v0(r,i){if(i.memoizedState===null&&(r=i.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{ms(r)}catch(s){$e(i,i.return,s)}}}function b0(r,i){if(i.memoizedState===null&&(r=i.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{ms(r)}catch(s){$e(i,i.return,s)}}function ax(r){switch(r.tag){case 31:case 13:case 19:var i=r.stateNode;return i===null&&(i=r.stateNode=new g0),i;case 22:return r=r.stateNode,i=r._retryCache,i===null&&(i=r._retryCache=new g0),i;default:throw Error(a(435,r.tag))}}function Yu(r,i){var s=ax(r);i.forEach(function(u){if(!s.has(u)){s.add(u);var f=gx.bind(null,r,u);u.then(f,f)}})}function Qt(r,i){var s=i.deletions;if(s!==null)for(var u=0;u<s.length;u++){var f=s[u],g=r,b=i,w=b;e:for(;w!==null;){switch(w.tag){case 27:if(Ai(w.type)){lt=w.stateNode,Pt=!1;break e}break;case 5:lt=w.stateNode,Pt=!1;break e;case 3:case 4:lt=w.stateNode.containerInfo,Pt=!0;break e}w=w.return}if(lt===null)throw Error(a(160));y0(g,b,f),lt=null,Pt=!1,g=f.alternate,g!==null&&(g.return=null),f.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)S0(i,r),i=i.sibling}var Yn=null;function S0(r,i){var s=r.alternate,u=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Qt(i,r),qt(r),u&4&&(gi(3,r,r.return),Co(3,r),gi(5,r,r.return));break;case 1:Qt(i,r),qt(r),u&512&&(Nt||s===null||ir(s,s.return)),u&64&&_r&&(r=r.updateQueue,r!==null&&(u=r.callbacks,u!==null&&(s=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=s===null?u:s.concat(u))));break;case 26:var f=Yn;if(Qt(i,r),qt(r),u&512&&(Nt||s===null||ir(s,s.return)),u&4){var g=s!==null?s.memoizedState:null;if(u=r.memoizedState,s===null)if(u===null)if(r.stateNode===null){e:{u=r.type,s=r.memoizedProps,f=f.ownerDocument||f;t:switch(u){case"title":g=f.getElementsByTagName("title")[0],(!g||g[Fi]||g[Ct]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=f.createElement(u),f.head.insertBefore(g,f.querySelector("head > title"))),Lt(g,u,s),g[Ct]=r,St(g),u=g;break e;case"link":var b=Sv("link","href",f).get(u+(s.href||""));if(b){for(var w=0;w<b.length;w++)if(g=b[w],g.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&g.getAttribute("rel")===(s.rel==null?null:s.rel)&&g.getAttribute("title")===(s.title==null?null:s.title)&&g.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){b.splice(w,1);break t}}g=f.createElement(u),Lt(g,u,s),f.head.appendChild(g);break;case"meta":if(b=Sv("meta","content",f).get(u+(s.content||""))){for(w=0;w<b.length;w++)if(g=b[w],g.getAttribute("content")===(s.content==null?null:""+s.content)&&g.getAttribute("name")===(s.name==null?null:s.name)&&g.getAttribute("property")===(s.property==null?null:s.property)&&g.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&g.getAttribute("charset")===(s.charSet==null?null:s.charSet)){b.splice(w,1);break t}}g=f.createElement(u),Lt(g,u,s),f.head.appendChild(g);break;default:throw Error(a(468,u))}g[Ct]=r,St(g),u=g}r.stateNode=u}else Av(f,r.type,r.stateNode);else r.stateNode=bv(f,u,r.memoizedProps);else g!==u?(g===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):g.count--,u===null?Av(f,r.type,r.stateNode):bv(f,u,r.memoizedProps)):u===null&&r.stateNode!==null&&rh(r,r.memoizedProps,s.memoizedProps)}break;case 27:Qt(i,r),qt(r),u&512&&(Nt||s===null||ir(s,s.return)),s!==null&&u&4&&rh(r,r.memoizedProps,s.memoizedProps);break;case 5:if(Qt(i,r),qt(r),u&512&&(Nt||s===null||ir(s,s.return)),r.flags&32){f=r.stateNode;try{Ua(f,"")}catch(ye){$e(r,r.return,ye)}}u&4&&r.stateNode!=null&&(f=r.memoizedProps,rh(r,f,s!==null?s.memoizedProps:f)),u&1024&&(sh=!0);break;case 6:if(Qt(i,r),qt(r),u&4){if(r.stateNode===null)throw Error(a(162));u=r.memoizedProps,s=r.stateNode;try{s.nodeValue=u}catch(ye){$e(r,r.return,ye)}}break;case 3:if(tc=null,f=Yn,Yn=qu(i.containerInfo),Qt(i,r),Yn=f,qt(r),u&4&&s!==null&&s.memoizedState.isDehydrated)try{ms(i.containerInfo)}catch(ye){$e(r,r.return,ye)}sh&&(sh=!1,A0(r));break;case 4:u=Yn,Yn=qu(r.stateNode.containerInfo),Qt(i,r),qt(r),Yn=u;break;case 12:Qt(i,r),qt(r);break;case 31:Qt(i,r),qt(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,Yu(r,u)));break;case 13:Qt(i,r),qt(r),r.child.flags&8192&&r.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(Gu=Vt()),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,Yu(r,u)));break;case 22:f=r.memoizedState!==null;var D=s!==null&&s.memoizedState!==null,J=_r,ae=Nt;if(_r=J||f,Nt=ae||D,Qt(i,r),Nt=ae,_r=J,qt(r),u&8192)e:for(i=r.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(s===null||D||_r||Nt||la(r)),s=null,i=r;;){if(i.tag===5||i.tag===26){if(s===null){D=s=i;try{if(g=D.stateNode,f)b=g.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{w=D.stateNode;var oe=D.memoizedProps.style,j=oe!=null&&oe.hasOwnProperty("display")?oe.display:null;w.style.display=j==null||typeof j=="boolean"?"":(""+j).trim()}}catch(ye){$e(D,D.return,ye)}}}else if(i.tag===6){if(s===null){D=i;try{D.stateNode.nodeValue=f?"":D.memoizedProps}catch(ye){$e(D,D.return,ye)}}}else if(i.tag===18){if(s===null){D=i;try{var Q=D.stateNode;f?cv(Q,!0):cv(D.stateNode,!1)}catch(ye){$e(D,D.return,ye)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===r)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break e;for(;i.sibling===null;){if(i.return===null||i.return===r)break e;s===i&&(s=null),i=i.return}s===i&&(s=null),i.sibling.return=i.return,i=i.sibling}u&4&&(u=r.updateQueue,u!==null&&(s=u.retryQueue,s!==null&&(u.retryQueue=null,Yu(r,s))));break;case 19:Qt(i,r),qt(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,Yu(r,u)));break;case 30:break;case 21:break;default:Qt(i,r),qt(r)}}function qt(r){var i=r.flags;if(i&2){try{for(var s,u=r.return;u!==null;){if(d0(u)){s=u;break}u=u.return}if(s==null)throw Error(a(160));switch(s.tag){case 27:var f=s.stateNode,g=ih(r);Uu(r,g,f);break;case 5:var b=s.stateNode;s.flags&32&&(Ua(b,""),s.flags&=-33);var w=ih(r);Uu(r,w,b);break;case 3:case 4:var D=s.stateNode.containerInfo,J=ih(r);ah(r,J,D);break;default:throw Error(a(161))}}catch(ae){$e(r,r.return,ae)}r.flags&=-3}i&4096&&(r.flags&=-4097)}function A0(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var i=r;A0(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),r=r.sibling}}function Or(r,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)m0(r,i.alternate,i),i=i.sibling}function la(r){for(r=r.child;r!==null;){var i=r;switch(i.tag){case 0:case 11:case 14:case 15:gi(4,i,i.return),la(i);break;case 1:ir(i,i.return);var s=i.stateNode;typeof s.componentWillUnmount=="function"&&c0(i,i.return,s),la(i);break;case 27:zo(i.stateNode);case 26:case 5:ir(i,i.return),la(i);break;case 22:i.memoizedState===null&&la(i);break;case 30:la(i);break;default:la(i)}r=r.sibling}}function Mr(r,i,s){for(s=s&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var u=i.alternate,f=r,g=i,b=g.flags;switch(g.tag){case 0:case 11:case 15:Mr(f,g,s),Co(4,g);break;case 1:if(Mr(f,g,s),u=g,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(J){$e(u,u.return,J)}if(u=g,f=u.updateQueue,f!==null){var w=u.stateNode;try{var D=f.shared.hiddenCallbacks;if(D!==null)for(f.shared.hiddenCallbacks=null,f=0;f<D.length;f++)Qp(D[f],w)}catch(J){$e(u,u.return,J)}}s&&b&64&&u0(g),Io(g,g.return);break;case 27:h0(g);case 26:case 5:Mr(f,g,s),s&&u===null&&b&4&&f0(g),Io(g,g.return);break;case 12:Mr(f,g,s);break;case 31:Mr(f,g,s),s&&b&4&&v0(f,g);break;case 13:Mr(f,g,s),s&&b&4&&b0(f,g);break;case 22:g.memoizedState===null&&Mr(f,g,s),Io(g,g.return);break;case 30:break;default:Mr(f,g,s)}i=i.sibling}}function oh(r,i){var s=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(s=r.memoizedState.cachePool.pool),r=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),r!==s&&(r!=null&&r.refCount++,s!=null&&go(s))}function lh(r,i){r=null,i.alternate!==null&&(r=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==r&&(i.refCount++,r!=null&&go(r))}function Zn(r,i,s,u){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)E0(r,i,s,u),i=i.sibling}function E0(r,i,s,u){var f=i.flags;switch(i.tag){case 0:case 11:case 15:Zn(r,i,s,u),f&2048&&Co(9,i);break;case 1:Zn(r,i,s,u);break;case 3:Zn(r,i,s,u),f&2048&&(r=null,i.alternate!==null&&(r=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==r&&(i.refCount++,r!=null&&go(r)));break;case 12:if(f&2048){Zn(r,i,s,u),r=i.stateNode;try{var g=i.memoizedProps,b=g.id,w=g.onPostCommit;typeof w=="function"&&w(b,i.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(D){$e(i,i.return,D)}}else Zn(r,i,s,u);break;case 31:Zn(r,i,s,u);break;case 13:Zn(r,i,s,u);break;case 23:break;case 22:g=i.stateNode,b=i.alternate,i.memoizedState!==null?g._visibility&2?Zn(r,i,s,u):Ro(r,i):g._visibility&2?Zn(r,i,s,u):(g._visibility|=2,is(r,i,s,u,(i.subtreeFlags&10256)!==0||!1)),f&2048&&oh(b,i);break;case 24:Zn(r,i,s,u),f&2048&&lh(i.alternate,i);break;default:Zn(r,i,s,u)}}function is(r,i,s,u,f){for(f=f&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var g=r,b=i,w=s,D=u,J=b.flags;switch(b.tag){case 0:case 11:case 15:is(g,b,w,D,f),Co(8,b);break;case 23:break;case 22:var ae=b.stateNode;b.memoizedState!==null?ae._visibility&2?is(g,b,w,D,f):Ro(g,b):(ae._visibility|=2,is(g,b,w,D,f)),f&&J&2048&&oh(b.alternate,b);break;case 24:is(g,b,w,D,f),f&&J&2048&&lh(b.alternate,b);break;default:is(g,b,w,D,f)}i=i.sibling}}function Ro(r,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var s=r,u=i,f=u.flags;switch(u.tag){case 22:Ro(s,u),f&2048&&oh(u.alternate,u);break;case 24:Ro(s,u),f&2048&&lh(u.alternate,u);break;default:Ro(s,u)}i=i.sibling}}var Do=8192;function as(r,i,s){if(r.subtreeFlags&Do)for(r=r.child;r!==null;)w0(r,i,s),r=r.sibling}function w0(r,i,s){switch(r.tag){case 26:as(r,i,s),r.flags&Do&&r.memoizedState!==null&&Kx(s,Yn,r.memoizedState,r.memoizedProps);break;case 5:as(r,i,s);break;case 3:case 4:var u=Yn;Yn=qu(r.stateNode.containerInfo),as(r,i,s),Yn=u;break;case 22:r.memoizedState===null&&(u=r.alternate,u!==null&&u.memoizedState!==null?(u=Do,Do=16777216,as(r,i,s),Do=u):as(r,i,s));break;default:as(r,i,s)}}function N0(r){var i=r.alternate;if(i!==null&&(r=i.child,r!==null)){i.child=null;do i=r.sibling,r.sibling=null,r=i;while(r!==null)}}function _o(r){var i=r.deletions;if((r.flags&16)!==0){if(i!==null)for(var s=0;s<i.length;s++){var u=i[s];Rt=u,T0(u,r)}N0(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)x0(r),r=r.sibling}function x0(r){switch(r.tag){case 0:case 11:case 15:_o(r),r.flags&2048&&gi(9,r,r.return);break;case 3:_o(r);break;case 12:_o(r);break;case 22:var i=r.stateNode;r.memoizedState!==null&&i._visibility&2&&(r.return===null||r.return.tag!==13)?(i._visibility&=-3,Zu(r)):_o(r);break;default:_o(r)}}function Zu(r){var i=r.deletions;if((r.flags&16)!==0){if(i!==null)for(var s=0;s<i.length;s++){var u=i[s];Rt=u,T0(u,r)}N0(r)}for(r=r.child;r!==null;){switch(i=r,i.tag){case 0:case 11:case 15:gi(8,i,i.return),Zu(i);break;case 22:s=i.stateNode,s._visibility&2&&(s._visibility&=-3,Zu(i));break;default:Zu(i)}r=r.sibling}}function T0(r,i){for(;Rt!==null;){var s=Rt;switch(s.tag){case 0:case 11:case 15:gi(8,s,i);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var u=s.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:go(s.memoizedState.cache)}if(u=s.child,u!==null)u.return=s,Rt=u;else e:for(s=r;Rt!==null;){u=Rt;var f=u.sibling,g=u.return;if(p0(u),u===s){Rt=null;break e}if(f!==null){f.return=g,Rt=f;break e}Rt=g}}}var sx={getCacheForType:function(r){var i=Mt(At),s=i.data.get(r);return s===void 0&&(s=r(),i.data.set(r,s)),s},cacheSignal:function(){return Mt(At).controller.signal}},ox=typeof WeakMap=="function"?WeakMap:Map,Fe=0,rt=null,Le=null,Ze=0,je=0,hn=null,mi=!1,ss=!1,uh=!1,Br=0,mt=0,pi=0,ua=0,ch=0,gn=0,os=0,Vo=null,en=null,fh=!1,Gu=0,C0=0,ku=1/0,Xu=null,yi=null,It=0,vi=null,ls=null,Lr=0,dh=0,hh=null,I0=null,Oo=0,gh=null;function mn(){return(Fe&2)!==0&&Ze!==0?Ze&-Ze:T.T!==null?Sh():Fl()}function R0(){if(gn===0)if((Ze&536870912)===0||ke){var r=Ia;Ia<<=1,(Ia&3932160)===0&&(Ia=262144),gn=r}else gn=536870912;return r=fn.current,r!==null&&(r.flags|=32),gn}function tn(r,i,s){(r===rt&&(je===2||je===9)||r.cancelPendingCommit!==null)&&(us(r,0),bi(r,Ze,gn,!1)),Hi(r,s),((Fe&2)===0||r!==rt)&&(r===rt&&((Fe&2)===0&&(ua|=s),mt===4&&bi(r,Ze,gn,!1)),ar(r))}function D0(r,i,s){if((Fe&6)!==0)throw Error(a(327));var u=!s&&(i&127)===0&&(i&r.expiredLanes)===0||Ki(r,i),f=u?cx(r,i):ph(r,i,!0),g=u;do{if(f===0){ss&&!u&&bi(r,i,0,!1);break}else{if(s=r.current.alternate,g&&!lx(s)){f=ph(r,i,!1),g=!1;continue}if(f===2){if(g=i,r.errorRecoveryDisabledLanes&g)var b=0;else b=r.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){i=b;e:{var w=r;f=Vo;var D=w.current.memoizedState.isDehydrated;if(D&&(us(w,b).flags|=256),b=ph(w,b,!1),b!==2){if(uh&&!D){w.errorRecoveryDisabledLanes|=g,ua|=g,f=4;break e}g=en,en=f,g!==null&&(en===null?en=g:en.push.apply(en,g))}f=b}if(g=!1,f!==2)continue}}if(f===1){us(r,0),bi(r,i,0,!0);break}e:{switch(u=r,g=f,g){case 0:case 1:throw Error(a(345));case 4:if((i&4194048)!==i)break;case 6:bi(u,i,gn,!mi);break e;case 2:en=null;break;case 3:case 5:break;default:throw Error(a(329))}if((i&62914560)===i&&(f=Gu+300-Vt(),10<f)){if(bi(u,i,gn,!mi),Da(u,0,!0)!==0)break e;Lr=i,u.timeoutHandle=ov(_0.bind(null,u,s,en,Xu,fh,i,gn,ua,os,mi,g,"Throttled",-0,0),f);break e}_0(u,s,en,Xu,fh,i,gn,ua,os,mi,g,null,-0,0)}}break}while(!0);ar(r)}function _0(r,i,s,u,f,g,b,w,D,J,ae,oe,j,Q){if(r.timeoutHandle=-1,oe=i.subtreeFlags,oe&8192||(oe&16785408)===16785408){oe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ar},w0(i,g,oe);var ye=(g&62914560)===g?Gu-Vt():(g&4194048)===g?C0-Vt():0;if(ye=Hx(oe,ye),ye!==null){Lr=g,r.cancelPendingCommit=ye(Y0.bind(null,r,i,g,s,u,f,b,w,D,ae,oe,null,j,Q)),bi(r,g,b,!J);return}}Y0(r,i,g,s,u,f,b,w,D)}function lx(r){for(var i=r;;){var s=i.tag;if((s===0||s===11||s===15)&&i.flags&16384&&(s=i.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var u=0;u<s.length;u++){var f=s[u],g=f.getSnapshot;f=f.value;try{if(!un(g(),f))return!1}catch{return!1}}if(s=i.child,i.subtreeFlags&16384&&s!==null)s.return=i,i=s;else{if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function bi(r,i,s,u){i&=~ch,i&=~ua,r.suspendedLanes|=i,r.pingedLanes&=~i,u&&(r.warmLanes|=i),u=r.expirationTimes;for(var f=i;0<f;){var g=31-Ft(f),b=1<<g;u[g]=-1,f&=~b}s!==0&&Wl(r,s,i)}function Wu(){return(Fe&6)===0?(Mo(0),!1):!0}function mh(){if(Le!==null){if(je===0)var r=Le.return;else r=Le,xr=ea=null,_d(r),qa=null,po=0,r=Le;for(;r!==null;)l0(r.alternate,r),r=r.return;Le=null}}function us(r,i){var s=r.timeoutHandle;s!==-1&&(r.timeoutHandle=-1,Ix(s)),s=r.cancelPendingCommit,s!==null&&(r.cancelPendingCommit=null,s()),Lr=0,mh(),rt=r,Le=s=wr(r.current,null),Ze=i,je=0,hn=null,mi=!1,ss=Ki(r,i),uh=!1,os=gn=ch=ua=pi=mt=0,en=Vo=null,fh=!1,(i&8)!==0&&(i|=i&32);var u=r.entangledLanes;if(u!==0)for(r=r.entanglements,u&=i;0<u;){var f=31-Ft(u),g=1<<f;i|=r[f],u&=~g}return Br=i,fu(),s}function V0(r,i){De=null,T.H=No,i===Qa||i===bu?(i=Jp(),je=3):i===bd?(i=Jp(),je=4):je=i===Fd?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,hn=i,Le===null&&(mt=1,Ou(r,En(i,r.current)))}function O0(){var r=fn.current;return r===null?!0:(Ze&4194048)===Ze?Tn===null:(Ze&62914560)===Ze||(Ze&536870912)!==0?r===Tn:!1}function M0(){var r=T.H;return T.H=No,r===null?No:r}function B0(){var r=T.A;return T.A=sx,r}function Ku(){mt=4,mi||(Ze&4194048)!==Ze&&fn.current!==null||(ss=!0),(pi&134217727)===0&&(ua&134217727)===0||rt===null||bi(rt,Ze,gn,!1)}function ph(r,i,s){var u=Fe;Fe|=2;var f=M0(),g=B0();(rt!==r||Ze!==i)&&(Xu=null,us(r,i)),i=!1;var b=mt;e:do try{if(je!==0&&Le!==null){var w=Le,D=hn;switch(je){case 8:mh(),b=6;break e;case 3:case 2:case 9:case 6:fn.current===null&&(i=!0);var J=je;if(je=0,hn=null,cs(r,w,D,J),s&&ss){b=0;break e}break;default:J=je,je=0,hn=null,cs(r,w,D,J)}}ux(),b=mt;break}catch(ae){V0(r,ae)}while(!0);return i&&r.shellSuspendCounter++,xr=ea=null,Fe=u,T.H=f,T.A=g,Le===null&&(rt=null,Ze=0,fu()),b}function ux(){for(;Le!==null;)L0(Le)}function cx(r,i){var s=Fe;Fe|=2;var u=M0(),f=B0();rt!==r||Ze!==i?(Xu=null,ku=Vt()+500,us(r,i)):ss=Ki(r,i);e:do try{if(je!==0&&Le!==null){i=Le;var g=hn;t:switch(je){case 1:je=0,hn=null,cs(r,i,g,1);break;case 2:case 9:if(Hp(g)){je=0,hn=null,z0(i);break}i=function(){je!==2&&je!==9||rt!==r||(je=7),ar(r)},g.then(i,i);break e;case 3:je=7;break e;case 4:je=5;break e;case 7:Hp(g)?(je=0,hn=null,z0(i)):(je=0,hn=null,cs(r,i,g,7));break;case 5:var b=null;switch(Le.tag){case 26:b=Le.memoizedState;case 5:case 27:var w=Le;if(b?Ev(b):w.stateNode.complete){je=0,hn=null;var D=w.sibling;if(D!==null)Le=D;else{var J=w.return;J!==null?(Le=J,Hu(J)):Le=null}break t}}je=0,hn=null,cs(r,i,g,5);break;case 6:je=0,hn=null,cs(r,i,g,6);break;case 8:mh(),mt=6;break e;default:throw Error(a(462))}}fx();break}catch(ae){V0(r,ae)}while(!0);return xr=ea=null,T.H=u,T.A=f,Fe=s,Le!==null?0:(rt=null,Ze=0,fu(),mt)}function fx(){for(;Le!==null&&!Gi();)L0(Le)}function L0(r){var i=s0(r.alternate,r,Br);r.memoizedProps=r.pendingProps,i===null?Hu(r):Le=i}function z0(r){var i=r,s=i.alternate;switch(i.tag){case 15:case 0:i=e0(s,i,i.pendingProps,i.type,void 0,Ze);break;case 11:i=e0(s,i,i.pendingProps,i.type.render,i.ref,Ze);break;case 5:_d(i);default:l0(s,i),i=Le=Bp(i,Br),i=s0(s,i,Br)}r.memoizedProps=r.pendingProps,i===null?Hu(r):Le=i}function cs(r,i,s,u){xr=ea=null,_d(i),qa=null,po=0;var f=i.return;try{if(qN(r,f,i,s,Ze)){mt=1,Ou(r,En(s,r.current)),Le=null;return}}catch(g){if(f!==null)throw Le=f,g;mt=1,Ou(r,En(s,r.current)),Le=null;return}i.flags&32768?(ke||u===1?r=!0:ss||(Ze&536870912)!==0?r=!1:(mi=r=!0,(u===2||u===9||u===3||u===6)&&(u=fn.current,u!==null&&u.tag===13&&(u.flags|=16384))),U0(i,r)):Hu(i)}function Hu(r){var i=r;do{if((i.flags&32768)!==0){U0(i,mi);return}r=i.return;var s=nx(i.alternate,i,Br);if(s!==null){Le=s;return}if(i=i.sibling,i!==null){Le=i;return}Le=i=r}while(i!==null);mt===0&&(mt=5)}function U0(r,i){do{var s=rx(r.alternate,r);if(s!==null){s.flags&=32767,Le=s;return}if(s=r.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!i&&(r=r.sibling,r!==null)){Le=r;return}Le=r=s}while(r!==null);mt=6,Le=null}function Y0(r,i,s,u,f,g,b,w,D){r.cancelPendingCommit=null;do Fu();while(It!==0);if((Fe&6)!==0)throw Error(a(327));if(i!==null){if(i===r.current)throw Error(a(177));if(g=i.lanes|i.childLanes,g|=id,Mf(r,s,g,b,w,D),r===rt&&(Le=rt=null,Ze=0),ls=i,vi=r,Lr=s,dh=g,hh=f,I0=u,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,mx(Xi,function(){return W0(),null})):(r.callbackNode=null,r.callbackPriority=0),u=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||u){u=T.T,T.T=null,f=V.p,V.p=2,b=Fe,Fe|=4;try{ix(r,i,s)}finally{Fe=b,V.p=f,T.T=u}}It=1,Z0(),G0(),k0()}}function Z0(){if(It===1){It=0;var r=vi,i=ls,s=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||s){s=T.T,T.T=null;var u=V.p;V.p=2;var f=Fe;Fe|=4;try{S0(i,r);var g=Ih,b=Tp(r.containerInfo),w=g.focusedElem,D=g.selectionRange;if(b!==w&&w&&w.ownerDocument&&xp(w.ownerDocument.documentElement,w)){if(D!==null&&qf(w)){var J=D.start,ae=D.end;if(ae===void 0&&(ae=J),"selectionStart"in w)w.selectionStart=J,w.selectionEnd=Math.min(ae,w.value.length);else{var oe=w.ownerDocument||document,j=oe&&oe.defaultView||window;if(j.getSelection){var Q=j.getSelection(),ye=w.textContent.length,xe=Math.min(D.start,ye),nt=D.end===void 0?xe:Math.min(D.end,ye);!Q.extend&&xe>nt&&(b=nt,nt=xe,xe=b);var k=Np(w,xe),z=Np(w,nt);if(k&&z&&(Q.rangeCount!==1||Q.anchorNode!==k.node||Q.anchorOffset!==k.offset||Q.focusNode!==z.node||Q.focusOffset!==z.offset)){var F=oe.createRange();F.setStart(k.node,k.offset),Q.removeAllRanges(),xe>nt?(Q.addRange(F),Q.extend(z.node,z.offset)):(F.setEnd(z.node,z.offset),Q.addRange(F))}}}}for(oe=[],Q=w;Q=Q.parentNode;)Q.nodeType===1&&oe.push({element:Q,left:Q.scrollLeft,top:Q.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<oe.length;w++){var se=oe[w];se.element.scrollLeft=se.left,se.element.scrollTop=se.top}}ac=!!Ch,Ih=Ch=null}finally{Fe=f,V.p=u,T.T=s}}r.current=i,It=2}}function G0(){if(It===2){It=0;var r=vi,i=ls,s=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||s){s=T.T,T.T=null;var u=V.p;V.p=2;var f=Fe;Fe|=4;try{m0(r,i.alternate,i)}finally{Fe=f,V.p=u,T.T=s}}It=3}}function k0(){if(It===4||It===3){It=0,ki();var r=vi,i=ls,s=Lr,u=I0;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?It=5:(It=0,ls=vi=null,X0(r,r.pendingLanes));var f=r.pendingLanes;if(f===0&&(yi=null),Qs(s),i=i.stateNode,Ht&&typeof Ht.onCommitFiberRoot=="function")try{Ht.onCommitFiberRoot(Wi,i,void 0,(i.current.flags&128)===128)}catch{}if(u!==null){i=T.T,f=V.p,V.p=2,T.T=null;try{for(var g=r.onRecoverableError,b=0;b<u.length;b++){var w=u[b];g(w.value,{componentStack:w.stack})}}finally{T.T=i,V.p=f}}(Lr&3)!==0&&Fu(),ar(r),f=r.pendingLanes,(s&261930)!==0&&(f&42)!==0?r===gh?Oo++:(Oo=0,gh=r):Oo=0,Mo(0)}}function X0(r,i){(r.pooledCacheLanes&=i)===0&&(i=r.pooledCache,i!=null&&(r.pooledCache=null,go(i)))}function Fu(){return Z0(),G0(),k0(),W0()}function W0(){if(It!==5)return!1;var r=vi,i=dh;dh=0;var s=Qs(Lr),u=T.T,f=V.p;try{V.p=32>s?32:s,T.T=null,s=hh,hh=null;var g=vi,b=Lr;if(It=0,ls=vi=null,Lr=0,(Fe&6)!==0)throw Error(a(331));var w=Fe;if(Fe|=4,x0(g.current),E0(g,g.current,b,s),Fe=w,Mo(0,!1),Ht&&typeof Ht.onPostCommitFiberRoot=="function")try{Ht.onPostCommitFiberRoot(Wi,g)}catch{}return!0}finally{V.p=f,T.T=u,X0(r,i)}}function K0(r,i,s){i=En(s,i),i=Hd(r.stateNode,i,2),r=fi(r,i,2),r!==null&&(Hi(r,2),ar(r))}function $e(r,i,s){if(r.tag===3)K0(r,r,s);else for(;i!==null;){if(i.tag===3){K0(i,r,s);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(yi===null||!yi.has(u))){r=En(s,r),s=Hy(2),u=fi(i,s,2),u!==null&&(Fy(s,u,i,r),Hi(u,2),ar(u));break}}i=i.return}}function yh(r,i,s){var u=r.pingCache;if(u===null){u=r.pingCache=new ox;var f=new Set;u.set(i,f)}else f=u.get(i),f===void 0&&(f=new Set,u.set(i,f));f.has(s)||(uh=!0,f.add(s),r=dx.bind(null,r,i,s),i.then(r,r))}function dx(r,i,s){var u=r.pingCache;u!==null&&u.delete(i),r.pingedLanes|=r.suspendedLanes&s,r.warmLanes&=~s,rt===r&&(Ze&s)===s&&(mt===4||mt===3&&(Ze&62914560)===Ze&&300>Vt()-Gu?(Fe&2)===0&&us(r,0):ch|=s,os===Ze&&(os=0)),ar(r)}function H0(r,i){i===0&&(i=Xl()),r=Pi(r,i),r!==null&&(Hi(r,i),ar(r))}function hx(r){var i=r.memoizedState,s=0;i!==null&&(s=i.retryLane),H0(r,s)}function gx(r,i){var s=0;switch(r.tag){case 31:case 13:var u=r.stateNode,f=r.memoizedState;f!==null&&(s=f.retryLane);break;case 19:u=r.stateNode;break;case 22:u=r.stateNode._retryCache;break;default:throw Error(a(314))}u!==null&&u.delete(i),H0(r,s)}function mx(r,i){return $r(r,i)}var Ju=null,fs=null,vh=!1,ju=!1,bh=!1,Si=0;function ar(r){r!==fs&&r.next===null&&(fs===null?Ju=fs=r:fs=fs.next=r),ju=!0,vh||(vh=!0,yx())}function Mo(r,i){if(!bh&&ju){bh=!0;do for(var s=!1,u=Ju;u!==null;){if(r!==0){var f=u.pendingLanes;if(f===0)var g=0;else{var b=u.suspendedLanes,w=u.pingedLanes;g=(1<<31-Ft(42|r)+1)-1,g&=f&~(b&~w),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(s=!0,$0(u,g))}else g=Ze,g=Da(u,u===rt?g:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(g&3)===0||Ki(u,g)||(s=!0,$0(u,g));u=u.next}while(s);bh=!1}}function px(){F0()}function F0(){ju=vh=!1;var r=0;Si!==0&&Cx()&&(r=Si);for(var i=Vt(),s=null,u=Ju;u!==null;){var f=u.next,g=J0(u,i);g===0?(u.next=null,s===null?Ju=f:s.next=f,f===null&&(fs=s)):(s=u,(r!==0||(g&3)!==0)&&(ju=!0)),u=f}It!==0&&It!==5||Mo(r),Si!==0&&(Si=0)}function J0(r,i){for(var s=r.suspendedLanes,u=r.pingedLanes,f=r.expirationTimes,g=r.pendingLanes&-62914561;0<g;){var b=31-Ft(g),w=1<<b,D=f[b];D===-1?((w&s)===0||(w&u)!==0)&&(f[b]=Of(w,i)):D<=i&&(r.expiredLanes|=w),g&=~w}if(i=rt,s=Ze,s=Da(r,r===i?s:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u=r.callbackNode,s===0||r===i&&(je===2||je===9)||r.cancelPendingCommit!==null)return u!==null&&u!==null&&Pr(u),r.callbackNode=null,r.callbackPriority=0;if((s&3)===0||Ki(r,s)){if(i=s&-s,i===r.callbackPriority)return i;switch(u!==null&&Pr(u),Qs(s)){case 2:case 8:s=Qr;break;case 32:s=Xi;break;case 268435456:s=Ta;break;default:s=Xi}return u=j0.bind(null,r),s=$r(s,u),r.callbackPriority=i,r.callbackNode=s,i}return u!==null&&u!==null&&Pr(u),r.callbackPriority=2,r.callbackNode=null,2}function j0(r,i){if(It!==0&&It!==5)return r.callbackNode=null,r.callbackPriority=0,null;var s=r.callbackNode;if(Fu()&&r.callbackNode!==s)return null;var u=Ze;return u=Da(r,r===rt?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u===0?null:(D0(r,u,i),J0(r,Vt()),r.callbackNode!=null&&r.callbackNode===s?j0.bind(null,r):null)}function $0(r,i){if(Fu())return null;D0(r,i,!0)}function yx(){Rx(function(){(Fe&6)!==0?$r(yr,px):F0()})}function Sh(){if(Si===0){var r=$a;r===0&&(r=Ca,Ca<<=1,(Ca&261888)===0&&(Ca=256)),Si=r}return Si}function P0(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:ru(""+r)}function Q0(r,i){var s=i.ownerDocument.createElement("input");return s.name=i.name,s.value=i.value,r.id&&s.setAttribute("form",r.id),i.parentNode.insertBefore(s,i),r=new FormData(r),s.parentNode.removeChild(s),r}function vx(r,i,s,u,f){if(i==="submit"&&s&&s.stateNode===f){var g=P0((f[Zt]||null).action),b=u.submitter;b&&(i=(i=b[Zt]||null)?P0(i.formAction):b.getAttribute("formAction"),i!==null&&(g=i,b=null));var w=new ou("action","action",null,u,f);r.push({event:w,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Si!==0){var D=b?Q0(f,b):new FormData(f);Zd(s,{pending:!0,data:D,method:f.method,action:g},null,D)}}else typeof g=="function"&&(w.preventDefault(),D=b?Q0(f,b):new FormData(f),Zd(s,{pending:!0,data:D,method:f.method,action:g},g,D))},currentTarget:f}]})}}for(var Ah=0;Ah<rd.length;Ah++){var Eh=rd[Ah],bx=Eh.toLowerCase(),Sx=Eh[0].toUpperCase()+Eh.slice(1);Un(bx,"on"+Sx)}Un(Rp,"onAnimationEnd"),Un(Dp,"onAnimationIteration"),Un(_p,"onAnimationStart"),Un("dblclick","onDoubleClick"),Un("focusin","onFocus"),Un("focusout","onBlur"),Un(LN,"onTransitionRun"),Un(zN,"onTransitionStart"),Un(UN,"onTransitionCancel"),Un(Vp,"onTransitionEnd"),ri("onMouseEnter",["mouseout","mouseover"]),ri("onMouseLeave",["mouseout","mouseover"]),ri("onPointerEnter",["pointerout","pointerover"]),ri("onPointerLeave",["pointerout","pointerover"]),Sr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Sr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Sr("onBeforeInput",["compositionend","keypress","textInput","paste"]),Sr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Sr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Sr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ax=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Bo));function q0(r,i){i=(i&4)!==0;for(var s=0;s<r.length;s++){var u=r[s],f=u.event;u=u.listeners;e:{var g=void 0;if(i)for(var b=u.length-1;0<=b;b--){var w=u[b],D=w.instance,J=w.currentTarget;if(w=w.listener,D!==g&&f.isPropagationStopped())break e;g=w,f.currentTarget=J;try{g(f)}catch(ae){cu(ae)}f.currentTarget=null,g=D}else for(b=0;b<u.length;b++){if(w=u[b],D=w.instance,J=w.currentTarget,w=w.listener,D!==g&&f.isPropagationStopped())break e;g=w,f.currentTarget=J;try{g(f)}catch(ae){cu(ae)}f.currentTarget=null,g=D}}}}function ze(r,i){var s=i[_a];s===void 0&&(s=i[_a]=new Set);var u=r+"__bubble";s.has(u)||(ev(i,r,2,!1),s.add(u))}function wh(r,i,s){var u=0;i&&(u|=4),ev(s,r,u,i)}var $u="_reactListening"+Math.random().toString(36).slice(2);function Nh(r){if(!r[$u]){r[$u]=!0,Pl.forEach(function(s){s!=="selectionchange"&&(Ax.has(s)||wh(s,!1,r),wh(s,!0,r))});var i=r.nodeType===9?r:r.ownerDocument;i===null||i[$u]||(i[$u]=!0,wh("selectionchange",!1,i))}}function ev(r,i,s,u){switch(Rv(i)){case 2:var f=jx;break;case 8:f=$x;break;default:f=Yh}s=f.bind(null,i,s,r),f=void 0,!Wf||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),u?f!==void 0?r.addEventListener(i,s,{capture:!0,passive:f}):r.addEventListener(i,s,!0):f!==void 0?r.addEventListener(i,s,{passive:f}):r.addEventListener(i,s,!1)}function xh(r,i,s,u,f){var g=u;if((i&1)===0&&(i&2)===0&&u!==null)e:for(;;){if(u===null)return;var b=u.tag;if(b===3||b===4){var w=u.stateNode.containerInfo;if(w===f)break;if(b===4)for(b=u.return;b!==null;){var D=b.tag;if((D===3||D===4)&&b.stateNode.containerInfo===f)return;b=b.return}for(;w!==null;){if(b=qr(w),b===null)return;if(D=b.tag,D===5||D===6||D===26||D===27){u=g=b;continue e}w=w.parentNode}}u=u.return}ap(function(){var J=g,ae=kf(s),oe=[];e:{var j=Op.get(r);if(j!==void 0){var Q=ou,ye=r;switch(r){case"keypress":if(au(s)===0)break e;case"keydown":case"keyup":Q=gN;break;case"focusin":ye="focus",Q=Jf;break;case"focusout":ye="blur",Q=Jf;break;case"beforeblur":case"afterblur":Q=Jf;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Q=lp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Q=nN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Q=yN;break;case Rp:case Dp:case _p:Q=aN;break;case Vp:Q=bN;break;case"scroll":case"scrollend":Q=eN;break;case"wheel":Q=AN;break;case"copy":case"cut":case"paste":Q=oN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Q=cp;break;case"toggle":case"beforetoggle":Q=wN}var xe=(i&4)!==0,nt=!xe&&(r==="scroll"||r==="scrollend"),k=xe?j!==null?j+"Capture":null:j;xe=[];for(var z=J,F;z!==null;){var se=z;if(F=se.stateNode,se=se.tag,se!==5&&se!==26&&se!==27||F===null||k===null||(se=no(z,k),se!=null&&xe.push(Lo(z,se,F))),nt)break;z=z.return}0<xe.length&&(j=new Q(j,ye,null,s,ae),oe.push({event:j,listeners:xe}))}}if((i&7)===0){e:{if(j=r==="mouseover"||r==="pointerover",Q=r==="mouseout"||r==="pointerout",j&&s!==Gf&&(ye=s.relatedTarget||s.fromElement)&&(qr(ye)||ye[br]))break e;if((Q||j)&&(j=ae.window===ae?ae:(j=ae.ownerDocument)?j.defaultView||j.parentWindow:window,Q?(ye=s.relatedTarget||s.toElement,Q=J,ye=ye?qr(ye):null,ye!==null&&(nt=l(ye),xe=ye.tag,ye!==nt||xe!==5&&xe!==27&&xe!==6)&&(ye=null)):(Q=null,ye=J),Q!==ye)){if(xe=lp,se="onMouseLeave",k="onMouseEnter",z="mouse",(r==="pointerout"||r==="pointerover")&&(xe=cp,se="onPointerLeave",k="onPointerEnter",z="pointer"),nt=Q==null?j:ti(Q),F=ye==null?j:ti(ye),j=new xe(se,z+"leave",Q,s,ae),j.target=nt,j.relatedTarget=F,se=null,qr(ae)===J&&(xe=new xe(k,z+"enter",ye,s,ae),xe.target=F,xe.relatedTarget=nt,se=xe),nt=se,Q&&ye)t:{for(xe=Ex,k=Q,z=ye,F=0,se=k;se;se=xe(se))F++;se=0;for(var Ae=z;Ae;Ae=xe(Ae))se++;for(;0<F-se;)k=xe(k),F--;for(;0<se-F;)z=xe(z),se--;for(;F--;){if(k===z||z!==null&&k===z.alternate){xe=k;break t}k=xe(k),z=xe(z)}xe=null}else xe=null;Q!==null&&tv(oe,j,Q,xe,!1),ye!==null&&nt!==null&&tv(oe,nt,ye,xe,!0)}}e:{if(j=J?ti(J):window,Q=j.nodeName&&j.nodeName.toLowerCase(),Q==="select"||Q==="input"&&j.type==="file")var Ke=vp;else if(pp(j))if(bp)Ke=ON;else{Ke=_N;var ve=DN}else Q=j.nodeName,!Q||Q.toLowerCase()!=="input"||j.type!=="checkbox"&&j.type!=="radio"?J&&Zf(J.elementType)&&(Ke=vp):Ke=VN;if(Ke&&(Ke=Ke(r,J))){yp(oe,Ke,s,ae);break e}ve&&ve(r,j,J),r==="focusout"&&J&&j.type==="number"&&J.memoizedProps.value!=null&&La(j,"number",j.value)}switch(ve=J?ti(J):window,r){case"focusin":(pp(ve)||ve.contentEditable==="true")&&(ka=ve,ed=J,co=null);break;case"focusout":co=ed=ka=null;break;case"mousedown":td=!0;break;case"contextmenu":case"mouseup":case"dragend":td=!1,Cp(oe,s,ae);break;case"selectionchange":if(BN)break;case"keydown":case"keyup":Cp(oe,s,ae)}var Ve;if($f)e:{switch(r){case"compositionstart":var Ge="onCompositionStart";break e;case"compositionend":Ge="onCompositionEnd";break e;case"compositionupdate":Ge="onCompositionUpdate";break e}Ge=void 0}else Ga?gp(r,s)&&(Ge="onCompositionEnd"):r==="keydown"&&s.keyCode===229&&(Ge="onCompositionStart");Ge&&(fp&&s.locale!=="ko"&&(Ga||Ge!=="onCompositionStart"?Ge==="onCompositionEnd"&&Ga&&(Ve=sp()):(ii=ae,Kf="value"in ii?ii.value:ii.textContent,Ga=!0)),ve=Pu(J,Ge),0<ve.length&&(Ge=new up(Ge,r,null,s,ae),oe.push({event:Ge,listeners:ve}),Ve?Ge.data=Ve:(Ve=mp(s),Ve!==null&&(Ge.data=Ve)))),(Ve=xN?TN(r,s):CN(r,s))&&(Ge=Pu(J,"onBeforeInput"),0<Ge.length&&(ve=new up("onBeforeInput","beforeinput",null,s,ae),oe.push({event:ve,listeners:Ge}),ve.data=Ve)),vx(oe,r,J,s,ae)}q0(oe,i)})}function Lo(r,i,s){return{instance:r,listener:i,currentTarget:s}}function Pu(r,i){for(var s=i+"Capture",u=[];r!==null;){var f=r,g=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||g===null||(f=no(r,s),f!=null&&u.unshift(Lo(r,f,g)),f=no(r,i),f!=null&&u.push(Lo(r,f,g))),r.tag===3)return u;r=r.return}return[]}function Ex(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function tv(r,i,s,u,f){for(var g=i._reactName,b=[];s!==null&&s!==u;){var w=s,D=w.alternate,J=w.stateNode;if(w=w.tag,D!==null&&D===u)break;w!==5&&w!==26&&w!==27||J===null||(D=J,f?(J=no(s,g),J!=null&&b.unshift(Lo(s,J,D))):f||(J=no(s,g),J!=null&&b.push(Lo(s,J,D)))),s=s.return}b.length!==0&&r.push({event:i,listeners:b})}var wx=/\r\n?/g,Nx=/\u0000|\uFFFD/g;function nv(r){return(typeof r=="string"?r:""+r).replace(wx,`
`).replace(Nx,"")}function rv(r,i){return i=nv(i),nv(r)===i}function tt(r,i,s,u,f,g){switch(s){case"children":typeof u=="string"?i==="body"||i==="textarea"&&u===""||Ua(r,u):(typeof u=="number"||typeof u=="bigint")&&i!=="body"&&Ua(r,""+u);break;case"className":Oa(r,"class",u);break;case"tabIndex":Oa(r,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Oa(r,s,u);break;case"style":rp(r,u,g);break;case"data":if(i!=="object"){Oa(r,"data",u);break}case"src":case"href":if(u===""&&(i!=="a"||s!=="href")){r.removeAttribute(s);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(s);break}u=ru(""+u),r.setAttribute(s,u);break;case"action":case"formAction":if(typeof u=="function"){r.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(s==="formAction"?(i!=="input"&&tt(r,i,"name",f.name,f,null),tt(r,i,"formEncType",f.formEncType,f,null),tt(r,i,"formMethod",f.formMethod,f,null),tt(r,i,"formTarget",f.formTarget,f,null)):(tt(r,i,"encType",f.encType,f,null),tt(r,i,"method",f.method,f,null),tt(r,i,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(s);break}u=ru(""+u),r.setAttribute(s,u);break;case"onClick":u!=null&&(r.onclick=Ar);break;case"onScroll":u!=null&&ze("scroll",r);break;case"onScrollEnd":u!=null&&ze("scrollend",r);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(a(61));if(s=u.__html,s!=null){if(f.children!=null)throw Error(a(60));r.innerHTML=s}}break;case"multiple":r.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":r.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){r.removeAttribute("xlink:href");break}s=ru(""+u),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(s,""+u):r.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(s,""):r.removeAttribute(s);break;case"capture":case"download":u===!0?r.setAttribute(s,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(s,u):r.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?r.setAttribute(s,u):r.removeAttribute(s);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?r.removeAttribute(s):r.setAttribute(s,u);break;case"popover":ze("beforetoggle",r),ze("toggle",r),Va(r,"popover",u);break;case"xlinkActuate":zn(r,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":zn(r,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":zn(r,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":zn(r,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":zn(r,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":zn(r,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":zn(r,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":zn(r,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":zn(r,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Va(r,"is",u);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=Qw.get(s)||s,Va(r,s,u))}}function Th(r,i,s,u,f,g){switch(s){case"style":rp(r,u,g);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(a(61));if(s=u.__html,s!=null){if(f.children!=null)throw Error(a(60));r.innerHTML=s}}break;case"children":typeof u=="string"?Ua(r,u):(typeof u=="number"||typeof u=="bigint")&&Ua(r,""+u);break;case"onScroll":u!=null&&ze("scroll",r);break;case"onScrollEnd":u!=null&&ze("scrollend",r);break;case"onClick":u!=null&&(r.onclick=Ar);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ql.hasOwnProperty(s))e:{if(s[0]==="o"&&s[1]==="n"&&(f=s.endsWith("Capture"),i=s.slice(2,f?s.length-7:void 0),g=r[Zt]||null,g=g!=null?g[s]:null,typeof g=="function"&&r.removeEventListener(i,g,f),typeof u=="function")){typeof g!="function"&&g!==null&&(s in r?r[s]=null:r.hasAttribute(s)&&r.removeAttribute(s)),r.addEventListener(i,u,f);break e}s in r?r[s]=u:u===!0?r.setAttribute(s,""):Va(r,s,u)}}}function Lt(r,i,s){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ze("error",r),ze("load",r);var u=!1,f=!1,g;for(g in s)if(s.hasOwnProperty(g)){var b=s[g];if(b!=null)switch(g){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:tt(r,i,g,b,s,null)}}f&&tt(r,i,"srcSet",s.srcSet,s,null),u&&tt(r,i,"src",s.src,s,null);return;case"input":ze("invalid",r);var w=g=b=f=null,D=null,J=null;for(u in s)if(s.hasOwnProperty(u)){var ae=s[u];if(ae!=null)switch(u){case"name":f=ae;break;case"type":b=ae;break;case"checked":D=ae;break;case"defaultChecked":J=ae;break;case"value":g=ae;break;case"defaultValue":w=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(a(137,i));break;default:tt(r,i,u,ae,s,null)}}nu(r,g,w,D,J,b,f,!1);return;case"select":ze("invalid",r),u=b=g=null;for(f in s)if(s.hasOwnProperty(f)&&(w=s[f],w!=null))switch(f){case"value":g=w;break;case"defaultValue":b=w;break;case"multiple":u=w;default:tt(r,i,f,w,s,null)}i=g,s=b,r.multiple=!!u,i!=null?za(r,!!u,i,!1):s!=null&&za(r,!!u,s,!0);return;case"textarea":ze("invalid",r),g=f=u=null;for(b in s)if(s.hasOwnProperty(b)&&(w=s[b],w!=null))switch(b){case"value":u=w;break;case"defaultValue":f=w;break;case"children":g=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(a(91));break;default:tt(r,i,b,w,s,null)}tp(r,u,f,g);return;case"option":for(D in s)if(s.hasOwnProperty(D)&&(u=s[D],u!=null))switch(D){case"selected":r.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:tt(r,i,D,u,s,null)}return;case"dialog":ze("beforetoggle",r),ze("toggle",r),ze("cancel",r),ze("close",r);break;case"iframe":case"object":ze("load",r);break;case"video":case"audio":for(u=0;u<Bo.length;u++)ze(Bo[u],r);break;case"image":ze("error",r),ze("load",r);break;case"details":ze("toggle",r);break;case"embed":case"source":case"link":ze("error",r),ze("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(J in s)if(s.hasOwnProperty(J)&&(u=s[J],u!=null))switch(J){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:tt(r,i,J,u,s,null)}return;default:if(Zf(i)){for(ae in s)s.hasOwnProperty(ae)&&(u=s[ae],u!==void 0&&Th(r,i,ae,u,s,void 0));return}}for(w in s)s.hasOwnProperty(w)&&(u=s[w],u!=null&&tt(r,i,w,u,s,null))}function xx(r,i,s,u){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,g=null,b=null,w=null,D=null,J=null,ae=null;for(Q in s){var oe=s[Q];if(s.hasOwnProperty(Q)&&oe!=null)switch(Q){case"checked":break;case"value":break;case"defaultValue":D=oe;default:u.hasOwnProperty(Q)||tt(r,i,Q,null,u,oe)}}for(var j in u){var Q=u[j];if(oe=s[j],u.hasOwnProperty(j)&&(Q!=null||oe!=null))switch(j){case"type":g=Q;break;case"name":f=Q;break;case"checked":J=Q;break;case"defaultChecked":ae=Q;break;case"value":b=Q;break;case"defaultValue":w=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(a(137,i));break;default:Q!==oe&&tt(r,i,j,Q,u,oe)}}to(r,b,w,D,J,ae,g,f);return;case"select":Q=b=w=j=null;for(g in s)if(D=s[g],s.hasOwnProperty(g)&&D!=null)switch(g){case"value":break;case"multiple":Q=D;default:u.hasOwnProperty(g)||tt(r,i,g,null,u,D)}for(f in u)if(g=u[f],D=s[f],u.hasOwnProperty(f)&&(g!=null||D!=null))switch(f){case"value":j=g;break;case"defaultValue":w=g;break;case"multiple":b=g;default:g!==D&&tt(r,i,f,g,u,D)}i=w,s=b,u=Q,j!=null?za(r,!!s,j,!1):!!u!=!!s&&(i!=null?za(r,!!s,i,!0):za(r,!!s,s?[]:"",!1));return;case"textarea":Q=j=null;for(w in s)if(f=s[w],s.hasOwnProperty(w)&&f!=null&&!u.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:tt(r,i,w,null,u,f)}for(b in u)if(f=u[b],g=s[b],u.hasOwnProperty(b)&&(f!=null||g!=null))switch(b){case"value":j=f;break;case"defaultValue":Q=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(a(91));break;default:f!==g&&tt(r,i,b,f,u,g)}ep(r,j,Q);return;case"option":for(var ye in s)if(j=s[ye],s.hasOwnProperty(ye)&&j!=null&&!u.hasOwnProperty(ye))switch(ye){case"selected":r.selected=!1;break;default:tt(r,i,ye,null,u,j)}for(D in u)if(j=u[D],Q=s[D],u.hasOwnProperty(D)&&j!==Q&&(j!=null||Q!=null))switch(D){case"selected":r.selected=j&&typeof j!="function"&&typeof j!="symbol";break;default:tt(r,i,D,j,u,Q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var xe in s)j=s[xe],s.hasOwnProperty(xe)&&j!=null&&!u.hasOwnProperty(xe)&&tt(r,i,xe,null,u,j);for(J in u)if(j=u[J],Q=s[J],u.hasOwnProperty(J)&&j!==Q&&(j!=null||Q!=null))switch(J){case"children":case"dangerouslySetInnerHTML":if(j!=null)throw Error(a(137,i));break;default:tt(r,i,J,j,u,Q)}return;default:if(Zf(i)){for(var nt in s)j=s[nt],s.hasOwnProperty(nt)&&j!==void 0&&!u.hasOwnProperty(nt)&&Th(r,i,nt,void 0,u,j);for(ae in u)j=u[ae],Q=s[ae],!u.hasOwnProperty(ae)||j===Q||j===void 0&&Q===void 0||Th(r,i,ae,j,u,Q);return}}for(var k in s)j=s[k],s.hasOwnProperty(k)&&j!=null&&!u.hasOwnProperty(k)&&tt(r,i,k,null,u,j);for(oe in u)j=u[oe],Q=s[oe],!u.hasOwnProperty(oe)||j===Q||j==null&&Q==null||tt(r,i,oe,j,u,Q)}function iv(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Tx(){if(typeof performance.getEntriesByType=="function"){for(var r=0,i=0,s=performance.getEntriesByType("resource"),u=0;u<s.length;u++){var f=s[u],g=f.transferSize,b=f.initiatorType,w=f.duration;if(g&&w&&iv(b)){for(b=0,w=f.responseEnd,u+=1;u<s.length;u++){var D=s[u],J=D.startTime;if(J>w)break;var ae=D.transferSize,oe=D.initiatorType;ae&&iv(oe)&&(D=D.responseEnd,b+=ae*(D<w?1:(w-J)/(D-J)))}if(--u,i+=8*(g+b)/(f.duration/1e3),r++,10<r)break}}if(0<r)return i/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var Ch=null,Ih=null;function Qu(r){return r.nodeType===9?r:r.ownerDocument}function av(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function sv(r,i){if(r===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&i==="foreignObject"?0:r}function Rh(r,i){return r==="textarea"||r==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Dh=null;function Cx(){var r=window.event;return r&&r.type==="popstate"?r===Dh?!1:(Dh=r,!0):(Dh=null,!1)}var ov=typeof setTimeout=="function"?setTimeout:void 0,Ix=typeof clearTimeout=="function"?clearTimeout:void 0,lv=typeof Promise=="function"?Promise:void 0,Rx=typeof queueMicrotask=="function"?queueMicrotask:typeof lv<"u"?function(r){return lv.resolve(null).then(r).catch(Dx)}:ov;function Dx(r){setTimeout(function(){throw r})}function Ai(r){return r==="head"}function uv(r,i){var s=i,u=0;do{var f=s.nextSibling;if(r.removeChild(s),f&&f.nodeType===8)if(s=f.data,s==="/$"||s==="/&"){if(u===0){r.removeChild(f),ms(i);return}u--}else if(s==="$"||s==="$?"||s==="$~"||s==="$!"||s==="&")u++;else if(s==="html")zo(r.ownerDocument.documentElement);else if(s==="head"){s=r.ownerDocument.head,zo(s);for(var g=s.firstChild;g;){var b=g.nextSibling,w=g.nodeName;g[Fi]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&g.rel.toLowerCase()==="stylesheet"||s.removeChild(g),g=b}}else s==="body"&&zo(r.ownerDocument.body);s=f}while(s);ms(i)}function cv(r,i){var s=r;r=0;do{var u=s.nextSibling;if(s.nodeType===1?i?(s._stashedDisplay=s.style.display,s.style.display="none"):(s.style.display=s._stashedDisplay||"",s.getAttribute("style")===""&&s.removeAttribute("style")):s.nodeType===3&&(i?(s._stashedText=s.nodeValue,s.nodeValue=""):s.nodeValue=s._stashedText||""),u&&u.nodeType===8)if(s=u.data,s==="/$"){if(r===0)break;r--}else s!=="$"&&s!=="$?"&&s!=="$~"&&s!=="$!"||r++;s=u}while(s)}function _h(r){var i=r.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var s=i;switch(i=i.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":_h(s),qs(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}r.removeChild(s)}}function _x(r,i,s,u){for(;r.nodeType===1;){var f=s;if(r.nodeName.toLowerCase()!==i.toLowerCase()){if(!u&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(u){if(!r[Fi])switch(i){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(g=r.getAttribute("rel"),g==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(g!==f.rel||r.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||r.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||r.getAttribute("title")!==(f.title==null?null:f.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(g=r.getAttribute("src"),(g!==(f.src==null?null:f.src)||r.getAttribute("type")!==(f.type==null?null:f.type)||r.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&g&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(i==="input"&&r.type==="hidden"){var g=f.name==null?null:""+f.name;if(f.type==="hidden"&&r.getAttribute("name")===g)return r}else return r;if(r=Cn(r.nextSibling),r===null)break}return null}function Vx(r,i,s){if(i==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!s||(r=Cn(r.nextSibling),r===null))return null;return r}function fv(r,i){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!i||(r=Cn(r.nextSibling),r===null))return null;return r}function Vh(r){return r.data==="$?"||r.data==="$~"}function Oh(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function Ox(r,i){var s=r.ownerDocument;if(r.data==="$~")r._reactRetry=i;else if(r.data!=="$?"||s.readyState!=="loading")i();else{var u=function(){i(),s.removeEventListener("DOMContentLoaded",u)};s.addEventListener("DOMContentLoaded",u),r._reactRetry=u}}function Cn(r){for(;r!=null;r=r.nextSibling){var i=r.nodeType;if(i===1||i===3)break;if(i===8){if(i=r.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return r}var Mh=null;function dv(r){r=r.nextSibling;for(var i=0;r;){if(r.nodeType===8){var s=r.data;if(s==="/$"||s==="/&"){if(i===0)return Cn(r.nextSibling);i--}else s!=="$"&&s!=="$!"&&s!=="$?"&&s!=="$~"&&s!=="&"||i++}r=r.nextSibling}return null}function hv(r){r=r.previousSibling;for(var i=0;r;){if(r.nodeType===8){var s=r.data;if(s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"){if(i===0)return r;i--}else s!=="/$"&&s!=="/&"||i++}r=r.previousSibling}return null}function gv(r,i,s){switch(i=Qu(s),r){case"html":if(r=i.documentElement,!r)throw Error(a(452));return r;case"head":if(r=i.head,!r)throw Error(a(453));return r;case"body":if(r=i.body,!r)throw Error(a(454));return r;default:throw Error(a(451))}}function zo(r){for(var i=r.attributes;i.length;)r.removeAttributeNode(i[0]);qs(r)}var In=new Map,mv=new Set;function qu(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var zr=V.d;V.d={f:Mx,r:Bx,D:Lx,C:zx,L:Ux,m:Yx,X:Gx,S:Zx,M:kx};function Mx(){var r=zr.f(),i=Wu();return r||i}function Bx(r){var i=ei(r);i!==null&&i.tag===5&&i.type==="form"?Vy(i):zr.r(r)}var ds=typeof document>"u"?null:document;function pv(r,i,s){var u=ds;if(u&&typeof i=="string"&&i){var f=Gt(i);f='link[rel="'+r+'"][href="'+f+'"]',typeof s=="string"&&(f+='[crossorigin="'+s+'"]'),mv.has(f)||(mv.add(f),r={rel:r,crossOrigin:s,href:i},u.querySelector(f)===null&&(i=u.createElement("link"),Lt(i,"link",r),St(i),u.head.appendChild(i)))}}function Lx(r){zr.D(r),pv("dns-prefetch",r,null)}function zx(r,i){zr.C(r,i),pv("preconnect",r,i)}function Ux(r,i,s){zr.L(r,i,s);var u=ds;if(u&&r&&i){var f='link[rel="preload"][as="'+Gt(i)+'"]';i==="image"&&s&&s.imageSrcSet?(f+='[imagesrcset="'+Gt(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(f+='[imagesizes="'+Gt(s.imageSizes)+'"]')):f+='[href="'+Gt(r)+'"]';var g=f;switch(i){case"style":g=hs(r);break;case"script":g=gs(r)}In.has(g)||(r=y({rel:"preload",href:i==="image"&&s&&s.imageSrcSet?void 0:r,as:i},s),In.set(g,r),u.querySelector(f)!==null||i==="style"&&u.querySelector(Uo(g))||i==="script"&&u.querySelector(Yo(g))||(i=u.createElement("link"),Lt(i,"link",r),St(i),u.head.appendChild(i)))}}function Yx(r,i){zr.m(r,i);var s=ds;if(s&&r){var u=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+Gt(u)+'"][href="'+Gt(r)+'"]',g=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=gs(r)}if(!In.has(g)&&(r=y({rel:"modulepreload",href:r},i),In.set(g,r),s.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(Yo(g)))return}u=s.createElement("link"),Lt(u,"link",r),St(u),s.head.appendChild(u)}}}function Zx(r,i,s){zr.S(r,i,s);var u=ds;if(u&&r){var f=ni(u).hoistableStyles,g=hs(r);i=i||"default";var b=f.get(g);if(!b){var w={loading:0,preload:null};if(b=u.querySelector(Uo(g)))w.loading=5;else{r=y({rel:"stylesheet",href:r,"data-precedence":i},s),(s=In.get(g))&&Bh(r,s);var D=b=u.createElement("link");St(D),Lt(D,"link",r),D._p=new Promise(function(J,ae){D.onload=J,D.onerror=ae}),D.addEventListener("load",function(){w.loading|=1}),D.addEventListener("error",function(){w.loading|=2}),w.loading|=4,ec(b,i,u)}b={type:"stylesheet",instance:b,count:1,state:w},f.set(g,b)}}}function Gx(r,i){zr.X(r,i);var s=ds;if(s&&r){var u=ni(s).hoistableScripts,f=gs(r),g=u.get(f);g||(g=s.querySelector(Yo(f)),g||(r=y({src:r,async:!0},i),(i=In.get(f))&&Lh(r,i),g=s.createElement("script"),St(g),Lt(g,"link",r),s.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(f,g))}}function kx(r,i){zr.M(r,i);var s=ds;if(s&&r){var u=ni(s).hoistableScripts,f=gs(r),g=u.get(f);g||(g=s.querySelector(Yo(f)),g||(r=y({src:r,async:!0,type:"module"},i),(i=In.get(f))&&Lh(r,i),g=s.createElement("script"),St(g),Lt(g,"link",r),s.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(f,g))}}function yv(r,i,s,u){var f=(f=ge.current)?qu(f):null;if(!f)throw Error(a(446));switch(r){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(i=hs(s.href),s=ni(f).hoistableStyles,u=s.get(i),u||(u={type:"style",instance:null,count:0,state:null},s.set(i,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){r=hs(s.href);var g=ni(f).hoistableStyles,b=g.get(r);if(b||(f=f.ownerDocument||f,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(r,b),(g=f.querySelector(Uo(r)))&&!g._p&&(b.instance=g,b.state.loading=5),In.has(r)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},In.set(r,s),g||Xx(f,r,s,b.state))),i&&u===null)throw Error(a(528,""));return b}if(i&&u!==null)throw Error(a(529,""));return null;case"script":return i=s.async,s=s.src,typeof s=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=gs(s),s=ni(f).hoistableScripts,u=s.get(i),u||(u={type:"script",instance:null,count:0,state:null},s.set(i,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,r))}}function hs(r){return'href="'+Gt(r)+'"'}function Uo(r){return'link[rel="stylesheet"]['+r+"]"}function vv(r){return y({},r,{"data-precedence":r.precedence,precedence:null})}function Xx(r,i,s,u){r.querySelector('link[rel="preload"][as="style"]['+i+"]")?u.loading=1:(i=r.createElement("link"),u.preload=i,i.addEventListener("load",function(){return u.loading|=1}),i.addEventListener("error",function(){return u.loading|=2}),Lt(i,"link",s),St(i),r.head.appendChild(i))}function gs(r){return'[src="'+Gt(r)+'"]'}function Yo(r){return"script[async]"+r}function bv(r,i,s){if(i.count++,i.instance===null)switch(i.type){case"style":var u=r.querySelector('style[data-href~="'+Gt(s.href)+'"]');if(u)return i.instance=u,St(u),u;var f=y({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return u=(r.ownerDocument||r).createElement("style"),St(u),Lt(u,"style",f),ec(u,s.precedence,r),i.instance=u;case"stylesheet":f=hs(s.href);var g=r.querySelector(Uo(f));if(g)return i.state.loading|=4,i.instance=g,St(g),g;u=vv(s),(f=In.get(f))&&Bh(u,f),g=(r.ownerDocument||r).createElement("link"),St(g);var b=g;return b._p=new Promise(function(w,D){b.onload=w,b.onerror=D}),Lt(g,"link",u),i.state.loading|=4,ec(g,s.precedence,r),i.instance=g;case"script":return g=gs(s.src),(f=r.querySelector(Yo(g)))?(i.instance=f,St(f),f):(u=s,(f=In.get(g))&&(u=y({},s),Lh(u,f)),r=r.ownerDocument||r,f=r.createElement("script"),St(f),Lt(f,"link",u),r.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(a(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(u=i.instance,i.state.loading|=4,ec(u,s.precedence,r));return i.instance}function ec(r,i,s){for(var u=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,g=f,b=0;b<u.length;b++){var w=u[b];if(w.dataset.precedence===i)g=w;else if(g!==f)break}g?g.parentNode.insertBefore(r,g.nextSibling):(i=s.nodeType===9?s.head:s,i.insertBefore(r,i.firstChild))}function Bh(r,i){r.crossOrigin==null&&(r.crossOrigin=i.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=i.referrerPolicy),r.title==null&&(r.title=i.title)}function Lh(r,i){r.crossOrigin==null&&(r.crossOrigin=i.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=i.referrerPolicy),r.integrity==null&&(r.integrity=i.integrity)}var tc=null;function Sv(r,i,s){if(tc===null){var u=new Map,f=tc=new Map;f.set(s,u)}else f=tc,u=f.get(s),u||(u=new Map,f.set(s,u));if(u.has(r))return u;for(u.set(r,null),s=s.getElementsByTagName(r),f=0;f<s.length;f++){var g=s[f];if(!(g[Fi]||g[Ct]||r==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var b=g.getAttribute(i)||"";b=r+b;var w=u.get(b);w?w.push(g):u.set(b,[g])}}return u}function Av(r,i,s){r=r.ownerDocument||r,r.head.insertBefore(s,i==="title"?r.querySelector("head > title"):null)}function Wx(r,i,s){if(s===1||i.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return r=i.disabled,typeof i.precedence=="string"&&r==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function Ev(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function Kx(r,i,s,u){if(s.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var f=hs(u.href),g=i.querySelector(Uo(f));if(g){i=g._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(r.count++,r=nc.bind(r),i.then(r,r)),s.state.loading|=4,s.instance=g,St(g);return}g=i.ownerDocument||i,u=vv(u),(f=In.get(f))&&Bh(u,f),g=g.createElement("link"),St(g);var b=g;b._p=new Promise(function(w,D){b.onload=w,b.onerror=D}),Lt(g,"link",u),s.instance=g}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(s,i),(i=s.state.preload)&&(s.state.loading&3)===0&&(r.count++,s=nc.bind(r),i.addEventListener("load",s),i.addEventListener("error",s))}}var zh=0;function Hx(r,i){return r.stylesheets&&r.count===0&&ic(r,r.stylesheets),0<r.count||0<r.imgCount?function(s){var u=setTimeout(function(){if(r.stylesheets&&ic(r,r.stylesheets),r.unsuspend){var g=r.unsuspend;r.unsuspend=null,g()}},6e4+i);0<r.imgBytes&&zh===0&&(zh=62500*Tx());var f=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&ic(r,r.stylesheets),r.unsuspend)){var g=r.unsuspend;r.unsuspend=null,g()}},(r.imgBytes>zh?50:800)+i);return r.unsuspend=s,function(){r.unsuspend=null,clearTimeout(u),clearTimeout(f)}}:null}function nc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ic(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var rc=null;function ic(r,i){r.stylesheets=null,r.unsuspend!==null&&(r.count++,rc=new Map,i.forEach(Fx,r),rc=null,nc.call(r))}function Fx(r,i){if(!(i.state.loading&4)){var s=rc.get(r);if(s)var u=s.get(null);else{s=new Map,rc.set(r,s);for(var f=r.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<f.length;g++){var b=f[g];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(s.set(b.dataset.precedence,b),u=b)}u&&s.set(null,u)}f=i.instance,b=f.getAttribute("data-precedence"),g=s.get(b)||u,g===u&&s.set(null,f),s.set(b,f),this.count++,u=nc.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),g?g.parentNode.insertBefore(f,g.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(f,r.firstChild)),i.state.loading|=4}}var Zo={$$typeof:N,Provider:null,Consumer:null,_currentValue:Z,_currentValue2:Z,_threadCount:0};function Jx(r,i,s,u,f,g,b,w,D){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=$s(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$s(0),this.hiddenUpdates=$s(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=g,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=D,this.incompleteTransitions=new Map}function wv(r,i,s,u,f,g,b,w,D,J,ae,oe){return r=new Jx(r,i,s,b,D,J,ae,oe,w),i=1,g===!0&&(i|=24),g=cn(3,null,null,i),r.current=g,g.stateNode=r,i=pd(),i.refCount++,r.pooledCache=i,i.refCount++,g.memoizedState={element:u,isDehydrated:s,cache:i},Sd(g),r}function Nv(r){return r?(r=Ka,r):Ka}function xv(r,i,s,u,f,g){f=Nv(f),u.context===null?u.context=f:u.pendingContext=f,u=ci(i),u.payload={element:s},g=g===void 0?null:g,g!==null&&(u.callback=g),s=fi(r,u,i),s!==null&&(tn(s,r,i),vo(s,r,i))}function Tv(r,i){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var s=r.retryLane;r.retryLane=s!==0&&s<i?s:i}}function Uh(r,i){Tv(r,i),(r=r.alternate)&&Tv(r,i)}function Cv(r){if(r.tag===13||r.tag===31){var i=Pi(r,67108864);i!==null&&tn(i,r,67108864),Uh(r,67108864)}}function Iv(r){if(r.tag===13||r.tag===31){var i=mn();i=Ps(i);var s=Pi(r,i);s!==null&&tn(s,r,i),Uh(r,i)}}var ac=!0;function jx(r,i,s,u){var f=T.T;T.T=null;var g=V.p;try{V.p=2,Yh(r,i,s,u)}finally{V.p=g,T.T=f}}function $x(r,i,s,u){var f=T.T;T.T=null;var g=V.p;try{V.p=8,Yh(r,i,s,u)}finally{V.p=g,T.T=f}}function Yh(r,i,s,u){if(ac){var f=Zh(u);if(f===null)xh(r,i,u,sc,s),Dv(r,u);else if(Qx(f,r,i,s,u))u.stopPropagation();else if(Dv(r,u),i&4&&-1<Px.indexOf(r)){for(;f!==null;){var g=ei(f);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var b=vr(g.pendingLanes);if(b!==0){var w=g;for(w.pendingLanes|=2,w.entangledLanes|=2;b;){var D=1<<31-Ft(b);w.entanglements[1]|=D,b&=~D}ar(g),(Fe&6)===0&&(ku=Vt()+500,Mo(0))}}break;case 31:case 13:w=Pi(g,2),w!==null&&tn(w,g,2),Wu(),Uh(g,2)}if(g=Zh(u),g===null&&xh(r,i,u,sc,s),g===f)break;f=g}f!==null&&u.stopPropagation()}else xh(r,i,u,null,s)}}function Zh(r){return r=kf(r),Gh(r)}var sc=null;function Gh(r){if(sc=null,r=qr(r),r!==null){var i=l(r);if(i===null)r=null;else{var s=i.tag;if(s===13){if(r=c(i),r!==null)return r;r=null}else if(s===31){if(r=d(i),r!==null)return r;r=null}else if(s===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;r=null}else i!==r&&(r=null)}}return sc=r,null}function Rv(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(xa()){case yr:return 2;case Qr:return 8;case Xi:case Cf:return 32;case Ta:return 268435456;default:return 32}default:return 32}}var kh=!1,Ei=null,wi=null,Ni=null,Go=new Map,ko=new Map,xi=[],Px="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Dv(r,i){switch(r){case"focusin":case"focusout":Ei=null;break;case"dragenter":case"dragleave":wi=null;break;case"mouseover":case"mouseout":Ni=null;break;case"pointerover":case"pointerout":Go.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":ko.delete(i.pointerId)}}function Xo(r,i,s,u,f,g){return r===null||r.nativeEvent!==g?(r={blockedOn:i,domEventName:s,eventSystemFlags:u,nativeEvent:g,targetContainers:[f]},i!==null&&(i=ei(i),i!==null&&Cv(i)),r):(r.eventSystemFlags|=u,i=r.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),r)}function Qx(r,i,s,u,f){switch(i){case"focusin":return Ei=Xo(Ei,r,i,s,u,f),!0;case"dragenter":return wi=Xo(wi,r,i,s,u,f),!0;case"mouseover":return Ni=Xo(Ni,r,i,s,u,f),!0;case"pointerover":var g=f.pointerId;return Go.set(g,Xo(Go.get(g)||null,r,i,s,u,f)),!0;case"gotpointercapture":return g=f.pointerId,ko.set(g,Xo(ko.get(g)||null,r,i,s,u,f)),!0}return!1}function _v(r){var i=qr(r.target);if(i!==null){var s=l(i);if(s!==null){if(i=s.tag,i===13){if(i=c(s),i!==null){r.blockedOn=i,Jl(r.priority,function(){Iv(s)});return}}else if(i===31){if(i=d(s),i!==null){r.blockedOn=i,Jl(r.priority,function(){Iv(s)});return}}else if(i===3&&s.stateNode.current.memoizedState.isDehydrated){r.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}r.blockedOn=null}function oc(r){if(r.blockedOn!==null)return!1;for(var i=r.targetContainers;0<i.length;){var s=Zh(r.nativeEvent);if(s===null){s=r.nativeEvent;var u=new s.constructor(s.type,s);Gf=u,s.target.dispatchEvent(u),Gf=null}else return i=ei(s),i!==null&&Cv(i),r.blockedOn=s,!1;i.shift()}return!0}function Vv(r,i,s){oc(r)&&s.delete(i)}function qx(){kh=!1,Ei!==null&&oc(Ei)&&(Ei=null),wi!==null&&oc(wi)&&(wi=null),Ni!==null&&oc(Ni)&&(Ni=null),Go.forEach(Vv),ko.forEach(Vv)}function lc(r,i){r.blockedOn===i&&(r.blockedOn=null,kh||(kh=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,qx)))}var uc=null;function Ov(r){uc!==r&&(uc=r,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){uc===r&&(uc=null);for(var i=0;i<r.length;i+=3){var s=r[i],u=r[i+1],f=r[i+2];if(typeof u!="function"){if(Gh(u||s)===null)continue;break}var g=ei(s);g!==null&&(r.splice(i,3),i-=3,Zd(g,{pending:!0,data:f,method:s.method,action:u},u,f))}}))}function ms(r){function i(D){return lc(D,r)}Ei!==null&&lc(Ei,r),wi!==null&&lc(wi,r),Ni!==null&&lc(Ni,r),Go.forEach(i),ko.forEach(i);for(var s=0;s<xi.length;s++){var u=xi[s];u.blockedOn===r&&(u.blockedOn=null)}for(;0<xi.length&&(s=xi[0],s.blockedOn===null);)_v(s),s.blockedOn===null&&xi.shift();if(s=(r.ownerDocument||r).$$reactFormReplay,s!=null)for(u=0;u<s.length;u+=3){var f=s[u],g=s[u+1],b=f[Zt]||null;if(typeof g=="function")b||Ov(s);else if(b){var w=null;if(g&&g.hasAttribute("formAction")){if(f=g,b=g[Zt]||null)w=b.formAction;else if(Gh(f)!==null)continue}else w=b.action;typeof w=="function"?s[u+1]=w:(s.splice(u,3),u-=3),Ov(s)}}}function Mv(){function r(g){g.canIntercept&&g.info==="react-transition"&&g.intercept({handler:function(){return new Promise(function(b){return f=b})},focusReset:"manual",scroll:"manual"})}function i(){f!==null&&(f(),f=null),u||setTimeout(s,20)}function s(){if(!u&&!navigation.transition){var g=navigation.currentEntry;g&&g.url!=null&&navigation.navigate(g.url,{state:g.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,f=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(s,100),function(){u=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),f!==null&&(f(),f=null)}}}function Xh(r){this._internalRoot=r}cc.prototype.render=Xh.prototype.render=function(r){var i=this._internalRoot;if(i===null)throw Error(a(409));var s=i.current,u=mn();xv(s,u,r,i,null,null)},cc.prototype.unmount=Xh.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var i=r.containerInfo;xv(r.current,2,null,r,null,null),Wu(),i[br]=null}};function cc(r){this._internalRoot=r}cc.prototype.unstable_scheduleHydration=function(r){if(r){var i=Fl();r={blockedOn:null,target:r,priority:i};for(var s=0;s<xi.length&&i!==0&&i<xi[s].priority;s++);xi.splice(s,0,r),s===0&&_v(r)}};var Bv=e.version;if(Bv!=="19.2.1")throw Error(a(527,Bv,"19.2.1"));V.findDOMNode=function(r){var i=r._reactInternals;if(i===void 0)throw typeof r.render=="function"?Error(a(188)):(r=Object.keys(r).join(","),Error(a(268,r)));return r=h(i),r=r!==null?p(r):null,r=r===null?null:r.stateNode,r};var e2={bundleType:0,version:"19.2.1",rendererPackageName:"react-dom",currentDispatcherRef:T,reconcilerVersion:"19.2.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fc.isDisabled&&fc.supportsFiber)try{Wi=fc.inject(e2),Ht=fc}catch{}}return Ko.createRoot=function(r,i){if(!o(r))throw Error(a(299));var s=!1,u="",f=ky,g=Xy,b=Wy;return i!=null&&(i.unstable_strictMode===!0&&(s=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(g=i.onCaughtError),i.onRecoverableError!==void 0&&(b=i.onRecoverableError)),i=wv(r,1,!1,null,null,s,u,null,f,g,b,Mv),r[br]=i.current,Nh(r),new Xh(i)},Ko.hydrateRoot=function(r,i,s){if(!o(r))throw Error(a(299));var u=!1,f="",g=ky,b=Xy,w=Wy,D=null;return s!=null&&(s.unstable_strictMode===!0&&(u=!0),s.identifierPrefix!==void 0&&(f=s.identifierPrefix),s.onUncaughtError!==void 0&&(g=s.onUncaughtError),s.onCaughtError!==void 0&&(b=s.onCaughtError),s.onRecoverableError!==void 0&&(w=s.onRecoverableError),s.formState!==void 0&&(D=s.formState)),i=wv(r,1,!0,i,s??null,u,f,D,g,b,w,Mv),i.context=Nv(null),s=i.current,u=mn(),u=Ps(u),f=ci(u),f.callback=null,fi(s,f,u),s=u,i.current.lanes=s,Hi(i,s),ar(i),r[br]=i.current,Nh(r),new cc(i)},Ko.version="19.2.1",Ko}var Kv;function u2(){if(Kv)return Kh.exports;Kv=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Kh.exports=l2(),Kh.exports}var c2=u2(),Be;(function(t){t[t.Canceled=1]="Canceled",t[t.Unknown=2]="Unknown",t[t.InvalidArgument=3]="InvalidArgument",t[t.DeadlineExceeded=4]="DeadlineExceeded",t[t.NotFound=5]="NotFound",t[t.AlreadyExists=6]="AlreadyExists",t[t.PermissionDenied=7]="PermissionDenied",t[t.ResourceExhausted=8]="ResourceExhausted",t[t.FailedPrecondition=9]="FailedPrecondition",t[t.Aborted=10]="Aborted",t[t.OutOfRange=11]="OutOfRange",t[t.Unimplemented=12]="Unimplemented",t[t.Internal=13]="Internal",t[t.Unavailable=14]="Unavailable",t[t.DataLoss=15]="DataLoss",t[t.Unauthenticated=16]="Unauthenticated"})(Be||(Be={}));function Jg(t,e){return t!==null&&typeof t=="object"&&"$typeName"in t&&typeof t.$typeName=="string"?e===void 0?!0:e.typeName===t.$typeName:!1}var X;(function(t){t[t.DOUBLE=1]="DOUBLE",t[t.FLOAT=2]="FLOAT",t[t.INT64=3]="INT64",t[t.UINT64=4]="UINT64",t[t.INT32=5]="INT32",t[t.FIXED64=6]="FIXED64",t[t.FIXED32=7]="FIXED32",t[t.BOOL=8]="BOOL",t[t.STRING=9]="STRING",t[t.BYTES=12]="BYTES",t[t.UINT32=13]="UINT32",t[t.SFIXED32=15]="SFIXED32",t[t.SFIXED64=16]="SFIXED64",t[t.SINT32=17]="SINT32",t[t.SINT64=18]="SINT64"})(X||(X={}));function f2(){let t=0,e=0;for(let a=0;a<28;a+=7){let o=this.buf[this.pos++];if(t|=(o&127)<<a,(o&128)==0)return this.assertBounds(),[t,e]}let n=this.buf[this.pos++];if(t|=(n&15)<<28,e=(n&112)>>4,(n&128)==0)return this.assertBounds(),[t,e];for(let a=3;a<=31;a+=7){let o=this.buf[this.pos++];if(e|=(o&127)<<a,(o&128)==0)return this.assertBounds(),[t,e]}throw new Error("invalid varint")}function $h(t,e,n){for(let l=0;l<28;l=l+7){const c=t>>>l,d=!(!(c>>>7)&&e==0),m=(d?c|128:c)&255;if(n.push(m),!d)return}const a=t>>>28&15|(e&7)<<4,o=e>>3!=0;if(n.push((o?a|128:a)&255),!!o){for(let l=3;l<31;l=l+7){const c=e>>>l,d=!!(c>>>7),m=(d?c|128:c)&255;if(n.push(m),!d)return}n.push(e>>>31&1)}}const Rc=4294967296;function Hv(t){const e=t[0]==="-";e&&(t=t.slice(1));const n=1e6;let a=0,o=0;function l(c,d){const m=Number(t.slice(c,d));o*=n,a=a*n+m,a>=Rc&&(o=o+(a/Rc|0),a=a%Rc)}return l(-24,-18),l(-18,-12),l(-12,-6),l(-6),e?xA(a,o):jg(a,o)}function d2(t,e){let n=jg(t,e);const a=n.hi&2147483648;a&&(n=xA(n.lo,n.hi));const o=NA(n.lo,n.hi);return a?"-"+o:o}function NA(t,e){if({lo:t,hi:e}=h2(t,e),e<=2097151)return String(Rc*e+t);const n=t&16777215,a=(t>>>24|e<<8)&16777215,o=e>>16&65535;let l=n+a*6777216+o*6710656,c=a+o*8147497,d=o*2;const m=1e7;return l>=m&&(c+=Math.floor(l/m),l%=m),c>=m&&(d+=Math.floor(c/m),c%=m),d.toString()+Fv(c)+Fv(l)}function h2(t,e){return{lo:t>>>0,hi:e>>>0}}function jg(t,e){return{lo:t|0,hi:e|0}}function xA(t,e){return e=~e,t?t=~t+1:e+=1,jg(t,e)}const Fv=t=>{const e=String(t);return"0000000".slice(e.length)+e};function Sg(t,e){if(t>=0){for(;t>127;)e.push(t&127|128),t=t>>>7;e.push(t)}else{for(let n=0;n<9;n++)e.push(t&127|128),t=t>>7;e.push(1)}}function g2(){let t=this.buf[this.pos++],e=t&127;if((t&128)==0)return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<7,(t&128)==0)return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<14,(t&128)==0)return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<21,(t&128)==0)return this.assertBounds(),e;t=this.buf[this.pos++],e|=(t&15)<<28;for(let n=5;(t&128)!==0&&n<10;n++)t=this.buf[this.pos++];if((t&128)!=0)throw new Error("invalid varint");return this.assertBounds(),e>>>0}var Jv={};const ct=m2();function m2(){const t=new DataView(new ArrayBuffer(8));if(typeof BigInt=="function"&&typeof t.getBigInt64=="function"&&typeof t.getBigUint64=="function"&&typeof t.setBigInt64=="function"&&typeof t.setBigUint64=="function"&&(!!globalThis.Deno||typeof process!="object"||typeof Jv!="object"||Jv.BUF_BIGINT_DISABLE!=="1")){const n=BigInt("-9223372036854775808"),a=BigInt("9223372036854775807"),o=BigInt("0"),l=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(c){const d=typeof c=="bigint"?c:BigInt(c);if(d>a||d<n)throw new Error(`invalid int64: ${c}`);return d},uParse(c){const d=typeof c=="bigint"?c:BigInt(c);if(d>l||d<o)throw new Error(`invalid uint64: ${c}`);return d},enc(c){return t.setBigInt64(0,this.parse(c),!0),{lo:t.getInt32(0,!0),hi:t.getInt32(4,!0)}},uEnc(c){return t.setBigInt64(0,this.uParse(c),!0),{lo:t.getInt32(0,!0),hi:t.getInt32(4,!0)}},dec(c,d){return t.setInt32(0,c,!0),t.setInt32(4,d,!0),t.getBigInt64(0,!0)},uDec(c,d){return t.setInt32(0,c,!0),t.setInt32(4,d,!0),t.getBigUint64(0,!0)}}}return{zero:"0",supported:!1,parse(n){return typeof n!="string"&&(n=n.toString()),jv(n),n},uParse(n){return typeof n!="string"&&(n=n.toString()),$v(n),n},enc(n){return typeof n!="string"&&(n=n.toString()),jv(n),Hv(n)},uEnc(n){return typeof n!="string"&&(n=n.toString()),$v(n),Hv(n)},dec(n,a){return d2(n,a)},uDec(n,a){return NA(n,a)}}}function jv(t){if(!/^-?[0-9]+$/.test(t))throw new Error("invalid int64: "+t)}function $v(t){if(!/^[0-9]+$/.test(t))throw new Error("invalid uint64: "+t)}function ba(t,e){switch(t){case X.STRING:return"";case X.BOOL:return!1;case X.DOUBLE:case X.FLOAT:return 0;case X.INT64:case X.UINT64:case X.SFIXED64:case X.FIXED64:case X.SINT64:return e?"0":ct.zero;case X.BYTES:return new Uint8Array(0);default:return 0}}function p2(t,e){switch(t){case X.BOOL:return e===!1;case X.STRING:return e==="";case X.BYTES:return e instanceof Uint8Array&&!e.byteLength;default:return e==0}}const TA=2,Zr=Symbol.for("reflect unsafe local");function CA(t,e){const n=t[e.localName].case;return n===void 0?n:e.fields.find(a=>a.localName===n)}function y2(t,e){const n=e.localName;if(e.oneof)return t[e.oneof.localName].case===n;if(e.presence!=TA)return t[n]!==void 0&&Object.prototype.hasOwnProperty.call(t,n);switch(e.fieldKind){case"list":return t[n].length>0;case"map":return Object.keys(t[n]).length>0;case"scalar":return!p2(e.scalar,t[n]);case"enum":return t[n]!==e.enum.values[0].number}throw new Error("message field with implicit presence")}function cl(t,e){return Object.prototype.hasOwnProperty.call(t,e)&&t[e]!==void 0}function IA(t,e){if(e.oneof){const n=t[e.oneof.localName];return n.case===e.localName?n.value:void 0}return t[e.localName]}function RA(t,e,n){e.oneof?t[e.oneof.localName]={case:e.localName,value:n}:t[e.localName]=n}function v2(t,e){const n=e.localName;if(e.oneof){const a=e.oneof.localName;t[a].case===n&&(t[a]={case:void 0})}else if(e.presence!=TA)delete t[n];else switch(e.fieldKind){case"map":t[n]={};break;case"list":t[n]=[];break;case"enum":t[n]=e.enum.values[0].number;break;case"scalar":t[n]=ba(e.scalar,e.longAsString);break}}function zi(t){return t!==null&&typeof t=="object"&&!Array.isArray(t)}function $g(t,e){var n,a,o,l;if(zi(t)&&Zr in t&&"add"in t&&"field"in t&&typeof t.field=="function"){if(e!==void 0){const c=e,d=t.field();return c.listKind==d.listKind&&c.scalar===d.scalar&&((n=c.message)===null||n===void 0?void 0:n.typeName)===((a=d.message)===null||a===void 0?void 0:a.typeName)&&((o=c.enum)===null||o===void 0?void 0:o.typeName)===((l=d.enum)===null||l===void 0?void 0:l.typeName)}return!0}return!1}function Pg(t,e){var n,a,o,l;if(zi(t)&&Zr in t&&"has"in t&&"field"in t&&typeof t.field=="function"){if(e!==void 0){const c=e,d=t.field();return c.mapKey===d.mapKey&&c.mapKind==d.mapKind&&c.scalar===d.scalar&&((n=c.message)===null||n===void 0?void 0:n.typeName)===((a=d.message)===null||a===void 0?void 0:a.typeName)&&((o=c.enum)===null||o===void 0?void 0:o.typeName)===((l=d.enum)===null||l===void 0?void 0:l.typeName)}return!0}return!1}function Qg(t,e){return zi(t)&&Zr in t&&"desc"in t&&zi(t.desc)&&t.desc.kind==="message"&&(e===void 0||t.desc.typeName==e.typeName)}function b2(t){return DA(t.$typeName)}function Vl(t){const e=t.fields[0];return DA(t.typeName)&&e!==void 0&&e.fieldKind=="scalar"&&e.name=="value"&&e.number==1}function DA(t){return t.startsWith("google.protobuf.")&&["DoubleValue","FloatValue","Int64Value","UInt64Value","Int32Value","UInt32Value","BoolValue","StringValue","BytesValue"].includes(t.substring(16))}const S2=999,A2=998,Dc=2;function be(t,e){if(Jg(e,t))return e;const n=T2(t);return e!==void 0&&E2(t,n,e),n}function E2(t,e,n){for(const a of t.members){let o=n[a.localName];if(o==null)continue;let l;if(a.kind=="oneof"){const c=CA(n,a);if(!c)continue;l=c,o=IA(n,c)}else l=a;switch(l.fieldKind){case"message":o=qg(l,o);break;case"scalar":o=_A(l,o);break;case"list":o=N2(l,o);break;case"map":o=w2(l,o);break}RA(e,l,o)}return e}function _A(t,e){return t.scalar==X.BYTES?em(e):e}function w2(t,e){if(zi(e)){if(t.scalar==X.BYTES)return Pv(e,em);if(t.mapKind=="message")return Pv(e,n=>qg(t,n))}return e}function N2(t,e){if(Array.isArray(e)){if(t.scalar==X.BYTES)return e.map(em);if(t.listKind=="message")return e.map(n=>qg(t,n))}return e}function qg(t,e){if(t.fieldKind=="message"&&!t.oneof&&Vl(t.message))return _A(t.message.fields[0],e);if(zi(e)){if(t.message.typeName=="google.protobuf.Struct"&&t.parent.typeName!=="google.protobuf.Value")return e;if(!Jg(e,t.message))return be(t.message,e)}return e}function em(t){return Array.isArray(t)?new Uint8Array(t):t}function Pv(t,e){const n={};for(const a of Object.entries(t))n[a[0]]=e(a[1]);return n}const x2=Symbol(),Qv=new WeakMap;function T2(t){let e;if(C2(t)){const n=Qv.get(t);let a,o;if(n)({prototype:a,members:o}=n);else{a={},o=new Set;for(const l of t.members)l.kind!="oneof"&&(l.fieldKind!="scalar"&&l.fieldKind!="enum"||l.presence!=Dc&&(o.add(l),a[l.localName]=Ph(l)));Qv.set(t,{prototype:a,members:o})}e=Object.create(a),e.$typeName=t.typeName;for(const l of t.members)o.has(l)||l.kind=="field"&&(l.fieldKind=="message"||(l.fieldKind=="scalar"||l.fieldKind=="enum")&&l.presence!=Dc)||(e[l.localName]=Ph(l))}else{e={$typeName:t.typeName};for(const n of t.members)(n.kind=="oneof"||n.presence==Dc)&&(e[n.localName]=Ph(n))}return e}function C2(t){switch(t.file.edition){case S2:return!1;case A2:return!0;default:return t.fields.some(e=>e.presence!=Dc&&e.fieldKind!="message"&&!e.oneof)}}function Ph(t){if(t.kind=="oneof")return{case:void 0};if(t.fieldKind=="list")return[];if(t.fieldKind=="map")return{};if(t.fieldKind=="message")return x2;const e=t.getDefaultValue();return e!==void 0?t.fieldKind=="scalar"&&t.longAsString?e.toString():e:t.fieldKind=="scalar"?ba(t.scalar,t.longAsString):t.enum.values[0].number}const I2=["FieldValueInvalidError","FieldListRangeError","ForeignFieldError"];class sn extends Error{constructor(e,n,a="FieldValueInvalidError"){super(n),this.name=a,this.field=()=>e}}function R2(t){return t instanceof Error&&I2.includes(t.name)&&"field"in t&&typeof t.field=="function"}const Qh=Symbol.for("@bufbuild/protobuf/text-encoding");function tm(){if(globalThis[Qh]==null){const t=new globalThis.TextEncoder,e=new globalThis.TextDecoder;globalThis[Qh]={encodeUtf8(n){return t.encode(n)},decodeUtf8(n){return e.decode(n)},checkUtf8(n){try{return encodeURIComponent(n),!0}catch{return!1}}}}return globalThis[Qh]}var bt;(function(t){t[t.Varint=0]="Varint",t[t.Bit64=1]="Bit64",t[t.LengthDelimited=2]="LengthDelimited",t[t.StartGroup=3]="StartGroup",t[t.EndGroup=4]="EndGroup",t[t.Bit32=5]="Bit32"})(bt||(bt={}));const VA=34028234663852886e22,OA=-34028234663852886e22,MA=4294967295,BA=2147483647,LA=-2147483648;class zA{constructor(e=tm().encodeUtf8){this.encodeUtf8=e,this.stack=[],this.chunks=[],this.buf=[]}finish(){this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]);let e=0;for(let o=0;o<this.chunks.length;o++)e+=this.chunks[o].length;let n=new Uint8Array(e),a=0;for(let o=0;o<this.chunks.length;o++)n.set(this.chunks[o],a),a+=this.chunks[o].length;return this.chunks=[],n}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),n=this.stack.pop();if(!n)throw new Error("invalid state, fork stack empty");return this.chunks=n.chunks,this.buf=n.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,n){return this.uint32((e<<3|n)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(qv(e);e>127;)this.buf.push(e&127|128),e=e>>>7;return this.buf.push(e),this}int32(e){return qh(e),Sg(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let n=this.encodeUtf8(e);return this.uint32(n.byteLength),this.raw(n)}float(e){D2(e);let n=new Uint8Array(4);return new DataView(n.buffer).setFloat32(0,e,!0),this.raw(n)}double(e){let n=new Uint8Array(8);return new DataView(n.buffer).setFloat64(0,e,!0),this.raw(n)}fixed32(e){qv(e);let n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,e,!0),this.raw(n)}sfixed32(e){qh(e);let n=new Uint8Array(4);return new DataView(n.buffer).setInt32(0,e,!0),this.raw(n)}sint32(e){return qh(e),e=(e<<1^e>>31)>>>0,Sg(e,this.buf),this}sfixed64(e){let n=new Uint8Array(8),a=new DataView(n.buffer),o=ct.enc(e);return a.setInt32(0,o.lo,!0),a.setInt32(4,o.hi,!0),this.raw(n)}fixed64(e){let n=new Uint8Array(8),a=new DataView(n.buffer),o=ct.uEnc(e);return a.setInt32(0,o.lo,!0),a.setInt32(4,o.hi,!0),this.raw(n)}int64(e){let n=ct.enc(e);return $h(n.lo,n.hi,this.buf),this}sint64(e){const n=ct.enc(e),a=n.hi>>31,o=n.lo<<1^a,l=(n.hi<<1|n.lo>>>31)^a;return $h(o,l,this.buf),this}uint64(e){const n=ct.uEnc(e);return $h(n.lo,n.hi,this.buf),this}}class nm{constructor(e,n=tm().decodeUtf8){this.decodeUtf8=n,this.varint64=f2,this.uint32=g2,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength)}tag(){let e=this.uint32(),n=e>>>3,a=e&7;if(n<=0||a<0||a>5)throw new Error("illegal tag: field no "+n+" wire type "+a);return[n,a]}skip(e,n){let a=this.pos;switch(e){case bt.Varint:for(;this.buf[this.pos++]&128;);break;case bt.Bit64:this.pos+=4;case bt.Bit32:this.pos+=4;break;case bt.LengthDelimited:let o=this.uint32();this.pos+=o;break;case bt.StartGroup:for(;;){const[l,c]=this.tag();if(c===bt.EndGroup){if(n!==void 0&&l!==n)throw new Error("invalid end group tag");break}this.skip(c,l)}break;default:throw new Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(a,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let e=this.uint32();return e>>>1^-(e&1)}int64(){return ct.dec(...this.varint64())}uint64(){return ct.uDec(...this.varint64())}sint64(){let[e,n]=this.varint64(),a=-(e&1);return e=(e>>>1|(n&1)<<31)^a,n=n>>>1^a,ct.dec(e,n)}bool(){let[e,n]=this.varint64();return e!==0||n!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return ct.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return ct.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),n=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(n,n+e)}string(){return this.decodeUtf8(this.bytes())}}function qh(t){if(typeof t=="string")t=Number(t);else if(typeof t!="number")throw new Error("invalid int32: "+typeof t);if(!Number.isInteger(t)||t>BA||t<LA)throw new Error("invalid int32: "+t)}function qv(t){if(typeof t=="string")t=Number(t);else if(typeof t!="number")throw new Error("invalid uint32: "+typeof t);if(!Number.isInteger(t)||t>MA||t<0)throw new Error("invalid uint32: "+t)}function D2(t){if(typeof t=="string"){const e=t;if(t=Number(t),Number.isNaN(t)&&e!=="NaN")throw new Error("invalid float32: "+e)}else if(typeof t!="number")throw new Error("invalid float32: "+typeof t);if(Number.isFinite(t)&&(t>VA||t<OA))throw new Error("invalid float32: "+t)}function ca(t,e){const n=t.fieldKind=="list"?$g(e,t):t.fieldKind=="map"?Pg(e,t):rm(t,e);if(n===!0)return;let a;switch(t.fieldKind){case"list":a=`expected ${ZA(t)}, got ${_t(e)}`;break;case"map":a=`expected ${GA(t)}, got ${_t(e)}`;break;default:a=Uc(t,e,n)}return new sn(t,a)}function eb(t,e,n){const a=rm(t,n);if(a!==!0)return new sn(t,`list item #${e+1}: ${Uc(t,n,a)}`)}function _2(t,e,n){const a=UA(e,t.mapKey);if(a!==!0)return new sn(t,`invalid map key: ${Uc({scalar:t.mapKey},e,a)}`);const o=rm(t,n);if(o!==!0)return new sn(t,`map entry ${_t(e)}: ${Uc(t,n,o)}`)}function rm(t,e){return t.scalar!==void 0?UA(e,t.scalar):t.enum!==void 0?t.enum.open?Number.isInteger(e):t.enum.values.some(n=>n.number===e):Qg(e,t.message)}function UA(t,e){switch(e){case X.DOUBLE:return typeof t=="number";case X.FLOAT:return typeof t!="number"?!1:Number.isNaN(t)||!Number.isFinite(t)?!0:t>VA||t<OA?`${t.toFixed()} out of range`:!0;case X.INT32:case X.SFIXED32:case X.SINT32:return typeof t!="number"||!Number.isInteger(t)?!1:t>BA||t<LA?`${t.toFixed()} out of range`:!0;case X.FIXED32:case X.UINT32:return typeof t!="number"||!Number.isInteger(t)?!1:t>MA||t<0?`${t.toFixed()} out of range`:!0;case X.BOOL:return typeof t=="boolean";case X.STRING:return typeof t!="string"?!1:tm().checkUtf8(t)||"invalid UTF8";case X.BYTES:return t instanceof Uint8Array;case X.INT64:case X.SFIXED64:case X.SINT64:if(typeof t=="bigint"||typeof t=="number"||typeof t=="string"&&t.length>0)try{return ct.parse(t),!0}catch{return`${t} out of range`}return!1;case X.FIXED64:case X.UINT64:if(typeof t=="bigint"||typeof t=="number"||typeof t=="string"&&t.length>0)try{return ct.uParse(t),!0}catch{return`${t} out of range`}return!1}}function Uc(t,e,n){return n=typeof n=="string"?`: ${n}`:`, got ${_t(e)}`,t.scalar!==void 0?`expected ${V2(t.scalar)}`+n:t.enum!==void 0?`expected ${t.enum.toString()}`+n:`expected ${YA(t.message)}`+n}function _t(t){switch(typeof t){case"object":return t===null?"null":t instanceof Uint8Array?`Uint8Array(${t.length})`:Array.isArray(t)?`Array(${t.length})`:$g(t)?ZA(t.field()):Pg(t)?GA(t.field()):Qg(t)?YA(t.desc):Jg(t)?`message ${t.$typeName}`:"object";case"string":return t.length>30?"string":`"${t.split('"').join('\\"')}"`;case"boolean":return String(t);case"number":return String(t);case"bigint":return String(t)+"n";default:return typeof t}}function YA(t){return`ReflectMessage (${t.typeName})`}function ZA(t){switch(t.listKind){case"message":return`ReflectList (${t.message.toString()})`;case"enum":return`ReflectList (${t.enum.toString()})`;case"scalar":return`ReflectList (${X[t.scalar]})`}}function GA(t){switch(t.mapKind){case"message":return`ReflectMap (${X[t.mapKey]}, ${t.message.toString()})`;case"enum":return`ReflectMap (${X[t.mapKey]}, ${t.enum.toString()})`;case"scalar":return`ReflectMap (${X[t.mapKey]}, ${X[t.scalar]})`}}function V2(t){switch(t){case X.STRING:return"string";case X.BOOL:return"boolean";case X.INT64:case X.SINT64:case X.SFIXED64:return"bigint (int64)";case X.UINT64:case X.FIXED64:return"bigint (uint64)";case X.BYTES:return"Uint8Array";case X.DOUBLE:return"number (float64)";case X.FLOAT:return"number (float32)";case X.FIXED32:case X.UINT32:return"number (uint32)";case X.INT32:case X.SFIXED32:case X.SINT32:return"number (int32)"}}function Vn(t,e,n=!0){return new kA(t,e,n)}const tb=new WeakMap;class kA{get sortedFields(){const e=tb.get(this.desc);if(e)return e;const n=this.desc.fields.concat().sort((a,o)=>a.number-o.number);return tb.set(this.desc,n),n}constructor(e,n,a=!0){this.lists=new Map,this.maps=new Map,this.check=a,this.desc=e,this.message=this[Zr]=n??be(e),this.fields=e.fields,this.oneofs=e.oneofs,this.members=e.members}findNumber(e){return this._fieldsByNumber||(this._fieldsByNumber=new Map(this.desc.fields.map(n=>[n.number,n]))),this._fieldsByNumber.get(e)}oneofCase(e){return Ho(this.message,e),CA(this.message,e)}isSet(e){return Ho(this.message,e),y2(this.message,e)}clear(e){Ho(this.message,e),v2(this.message,e)}get(e){Ho(this.message,e);const n=IA(this.message,e);switch(e.fieldKind){case"list":let a=this.lists.get(e);return(!a||a[Zr]!==n)&&this.lists.set(e,a=new O2(e,n,this.check)),a;case"map":let o=this.maps.get(e);return(!o||o[Zr]!==n)&&this.maps.set(e,o=new M2(e,n,this.check)),o;case"message":return am(e,n,this.check);case"scalar":return n===void 0?ba(e.scalar,!1):sm(e,n);case"enum":return n??e.enum.values[0].number}}set(e,n){if(Ho(this.message,e),this.check){const o=ca(e,n);if(o)throw o}let a;e.fieldKind=="message"?a=im(e,n):Pg(n)||$g(n)?a=n[Zr]:a=om(e,n),RA(this.message,e,a)}getUnknown(){return this.message.$unknown}setUnknown(e){this.message.$unknown=e}}function Ho(t,e){if(e.parent.typeName!==t.$typeName)throw new sn(e,`cannot use ${e.toString()} with message ${t.$typeName}`,"ForeignFieldError")}class O2{field(){return this._field}get size(){return this._arr.length}constructor(e,n,a){this._field=e,this._arr=this[Zr]=n,this.check=a}get(e){const n=this._arr[e];return n===void 0?void 0:eg(this._field,n,this.check)}set(e,n){if(e<0||e>=this._arr.length)throw new sn(this._field,`list item #${e+1}: out of range`);if(this.check){const a=eb(this._field,e,n);if(a)throw a}this._arr[e]=nb(this._field,n)}add(e){if(this.check){const n=eb(this._field,this._arr.length,e);if(n)throw n}this._arr.push(nb(this._field,e))}clear(){this._arr.splice(0,this._arr.length)}[Symbol.iterator](){return this.values()}keys(){return this._arr.keys()}*values(){for(const e of this._arr)yield eg(this._field,e,this.check)}*entries(){for(let e=0;e<this._arr.length;e++)yield[e,eg(this._field,this._arr[e],this.check)]}}class M2{constructor(e,n,a=!0){this.obj=this[Zr]=n??{},this.check=a,this._field=e}field(){return this._field}set(e,n){if(this.check){const a=_2(this._field,e,n);if(a)throw a}return this.obj[dc(e)]=B2(this._field,n),this}delete(e){const n=dc(e),a=Object.prototype.hasOwnProperty.call(this.obj,n);return a&&delete this.obj[n],a}clear(){for(const e of Object.keys(this.obj))delete this.obj[e]}get(e){let n=this.obj[dc(e)];return n!==void 0&&(n=tg(this._field,n,this.check)),n}has(e){return Object.prototype.hasOwnProperty.call(this.obj,dc(e))}*keys(){for(const e of Object.keys(this.obj))yield rb(e,this._field.mapKey)}*entries(){for(const e of Object.entries(this.obj))yield[rb(e[0],this._field.mapKey),tg(this._field,e[1],this.check)]}[Symbol.iterator](){return this.entries()}get size(){return Object.keys(this.obj).length}*values(){for(const e of Object.values(this.obj))yield tg(this._field,e,this.check)}forEach(e,n){for(const a of this.entries())e.call(n,a[1],a[0],this)}}function im(t,e){return Qg(e)?b2(e.message)&&!t.oneof&&t.fieldKind=="message"?e.message.value:e.desc.typeName=="google.protobuf.Struct"&&t.parent.typeName!="google.protobuf.Value"?WA(e.message):e.message:e}function am(t,e,n){return e!==void 0&&(Vl(t.message)&&!t.oneof&&t.fieldKind=="message"?e={$typeName:t.message.typeName,value:sm(t.message.fields[0],e)}:t.message.typeName=="google.protobuf.Struct"&&t.parent.typeName!="google.protobuf.Value"&&zi(e)&&(e=XA(e))),new kA(t.message,e,n)}function nb(t,e){return t.listKind=="message"?im(t,e):om(t,e)}function eg(t,e,n){return t.listKind=="message"?am(t,e,n):sm(t,e)}function B2(t,e){return t.mapKind=="message"?im(t,e):om(t,e)}function tg(t,e,n){return t.mapKind=="message"?am(t,e,n):e}function dc(t){return typeof t=="string"||typeof t=="number"?t:String(t)}function rb(t,e){switch(e){case X.STRING:return t;case X.INT32:case X.FIXED32:case X.UINT32:case X.SFIXED32:case X.SINT32:{const n=Number.parseInt(t);if(Number.isFinite(n))return n;break}case X.BOOL:switch(t){case"true":return!0;case"false":return!1}break;case X.UINT64:case X.FIXED64:try{return ct.uParse(t)}catch{}break;default:try{return ct.parse(t)}catch{}break}return t}function sm(t,e){switch(t.scalar){case X.INT64:case X.SFIXED64:case X.SINT64:"longAsString"in t&&t.longAsString&&typeof e=="string"&&(e=ct.parse(e));break;case X.FIXED64:case X.UINT64:"longAsString"in t&&t.longAsString&&typeof e=="string"&&(e=ct.uParse(e));break}return e}function om(t,e){switch(t.scalar){case X.INT64:case X.SFIXED64:case X.SINT64:"longAsString"in t&&t.longAsString?e=String(e):(typeof e=="string"||typeof e=="number")&&(e=ct.parse(e));break;case X.FIXED64:case X.UINT64:"longAsString"in t&&t.longAsString?e=String(e):(typeof e=="string"||typeof e=="number")&&(e=ct.uParse(e));break}return e}function XA(t){const e={$typeName:"google.protobuf.Struct",fields:{}};if(zi(t))for(const[n,a]of Object.entries(t))e.fields[n]=HA(a);return e}function WA(t){const e={};for(const[n,a]of Object.entries(t.fields))e[n]=KA(a);return e}function KA(t){switch(t.kind.case){case"structValue":return WA(t.kind.value);case"listValue":return t.kind.value.values.map(KA);case"nullValue":case void 0:return null;default:return t.kind.value}}function HA(t){const e={$typeName:"google.protobuf.Value",kind:{case:void 0}};switch(typeof t){case"number":e.kind={case:"numberValue",value:t};break;case"string":e.kind={case:"stringValue",value:t};break;case"boolean":e.kind={case:"boolValue",value:t};break;case"object":if(t===null)e.kind={case:"nullValue",value:0};else if(Array.isArray(t)){const n={$typeName:"google.protobuf.ListValue",values:[]};if(Array.isArray(t))for(const a of t)n.values.push(HA(a));e.kind={case:"listValue",value:n}}else e.kind={case:"structValue",value:XA(t)};break}return e}function lm(t){const e=z2();let n=t.length*3/4;t[t.length-2]=="="?n-=2:t[t.length-1]=="="&&(n-=1);let a=new Uint8Array(n),o=0,l=0,c,d=0;for(let m=0;m<t.length;m++){if(c=e[t.charCodeAt(m)],c===void 0)switch(t[m]){case"=":l=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string")}switch(l){case 0:d=c,l=1;break;case 1:a[o++]=d<<2|(c&48)>>4,d=c,l=2;break;case 2:a[o++]=(d&15)<<4|(c&60)>>2,d=c,l=3;break;case 3:a[o++]=(d&3)<<6|c,l=0;break}}if(l==1)throw Error("invalid base64 string");return a.subarray(0,o)}function L2(t,e="std"){const n=FA(e),a=e=="std";let o="",l=0,c,d=0;for(let m=0;m<t.length;m++)switch(c=t[m],l){case 0:o+=n[c>>2],d=(c&3)<<4,l=1;break;case 1:o+=n[d|c>>4],d=(c&15)<<2,l=2;break;case 2:o+=n[d|c>>6],o+=n[c&63],l=0;break}return l&&(o+=n[d],a&&(o+="=",l==1&&(o+="="))),o}let hc,ib,ps;function FA(t){return hc||(hc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),ib=hc.slice(0,-2).concat("-","_")),t=="url"?ib:hc}function z2(){if(!ps){ps=[];const t=FA("std");for(let e=0;e<t.length;e++)ps[t[e].charCodeAt(0)]=e;ps[45]=t.indexOf("+"),ps[95]=t.indexOf("/")}return ps}function fl(t){let e=!1;const n=[];for(let a=0;a<t.length;a++){let o=t.charAt(a);switch(o){case"_":e=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":n.push(o),e=!1;break;default:e&&(e=!1,o=o.toUpperCase()),n.push(o);break}}return n.join("")}const U2=new Set(["constructor","toString","toJSON","valueOf"]);function dl(t){return U2.has(t)?t+"$":t}function um(t){for(const e of t.field)cl(e,"jsonName")||(e.jsonName=fl(e.name));t.nestedType.forEach(um)}function Y2(t,e){const n=t.values.find(a=>a.name===e);if(!n)throw new Error(`cannot parse ${t} default value: ${e}`);return n.number}function Z2(t,e){switch(t){case X.STRING:return e;case X.BYTES:{const n=G2(e);if(n===!1)throw new Error(`cannot parse ${X[t]} default value: ${e}`);return n}case X.INT64:case X.SFIXED64:case X.SINT64:return ct.parse(e);case X.UINT64:case X.FIXED64:return ct.uParse(e);case X.DOUBLE:case X.FLOAT:switch(e){case"inf":return Number.POSITIVE_INFINITY;case"-inf":return Number.NEGATIVE_INFINITY;case"nan":return Number.NaN;default:return parseFloat(e)}case X.BOOL:return e==="true";case X.INT32:case X.UINT32:case X.SINT32:case X.FIXED32:case X.SFIXED32:return parseInt(e,10)}}function G2(t){const e=[],n={tail:t,c:"",next(){return this.tail.length==0?!1:(this.c=this.tail[0],this.tail=this.tail.substring(1),!0)},take(a){if(this.tail.length>=a){const o=this.tail.substring(0,a);return this.tail=this.tail.substring(a),o}return!1}};for(;n.next();)switch(n.c){case"\\":if(n.next())switch(n.c){case"\\":e.push(n.c.charCodeAt(0));break;case"b":e.push(8);break;case"f":e.push(12);break;case"n":e.push(10);break;case"r":e.push(13);break;case"t":e.push(9);break;case"v":e.push(11);break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":{const a=n.c,o=n.take(2);if(o===!1)return!1;const l=parseInt(a+o,8);if(Number.isNaN(l))return!1;e.push(l);break}case"x":{const a=n.c,o=n.take(2);if(o===!1)return!1;const l=parseInt(a+o,16);if(Number.isNaN(l))return!1;e.push(l);break}case"u":{const a=n.c,o=n.take(4);if(o===!1)return!1;const l=parseInt(a+o,16);if(Number.isNaN(l))return!1;const c=new Uint8Array(4);new DataView(c.buffer).setInt32(0,l,!0),e.push(c[0],c[1],c[2],c[3]);break}case"U":{const a=n.c,o=n.take(8);if(o===!1)return!1;const l=ct.uEnc(a+o),c=new Uint8Array(8),d=new DataView(c.buffer);d.setInt32(0,l.lo,!0),d.setInt32(4,l.hi,!0),e.push(c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7]);break}}break;default:e.push(n.c.charCodeAt(0))}return new Uint8Array(e)}function*Ag(t){switch(t.kind){case"file":for(const e of t.messages)yield e,yield*Ag(e);yield*t.enums,yield*t.services,yield*t.extensions;break;case"message":for(const e of t.nestedMessages)yield e,yield*Ag(e);yield*t.nestedEnums,yield*t.nestedExtensions;break}}function JA(...t){const e=k2();if(!t.length)return e;if("$typeName"in t[0]&&t[0].$typeName=="google.protobuf.FileDescriptorSet"){for(const a of t[0].file)lb(a,e);return e}if("$typeName"in t[0]){let c=function(d){const m=[];for(const h of d.dependency){if(e.getFile(h)!=null||l.has(h))continue;const p=o(h);if(!p)throw new Error(`Unable to resolve ${h}, imported by ${d.name}`);"kind"in p?e.addFile(p,!1,!0):(l.add(p.name),m.push(p))}return m.concat(...m.map(c))};var n=c;const a=t[0],o=t[1],l=new Set;for(const d of[a,...c(a)].reverse())lb(d,e)}else for(const a of t)for(const o of a.files)e.addFile(o);return e}function k2(){const t=new Map,e=new Map,n=new Map;return{kind:"registry",types:t,extendees:e,[Symbol.iterator](){return t.values()},get files(){return n.values()},addFile(a,o,l){if(n.set(a.proto.name,a),!o)for(const c of Ag(a))this.add(c);if(l)for(const c of a.dependencies)this.addFile(c,o,l)},add(a){if(a.kind=="extension"){let o=e.get(a.extendee.typeName);o||e.set(a.extendee.typeName,o=new Map),o.set(a.number,a)}t.set(a.typeName,a)},get(a){return t.get(a)},getFile(a){return n.get(a)},getMessage(a){const o=t.get(a);return o?.kind=="message"?o:void 0},getEnum(a){const o=t.get(a);return o?.kind=="enum"?o:void 0},getExtension(a){const o=t.get(a);return o?.kind=="extension"?o:void 0},getExtensionFor(a,o){var l;return(l=e.get(a.typeName))===null||l===void 0?void 0:l.get(o)},getService(a){const o=t.get(a);return o?.kind=="service"?o:void 0}}}const X2=998,W2=999,K2=9,hl=10,nl=11,H2=12,ab=14,cm=3,F2=2,sb=1,J2=0,ng=1,ob=2,j2=3,$2=1,P2=2,Q2=1,jA={998:{fieldPresence:1,enumType:2,repeatedFieldEncoding:2,utf8Validation:3,messageEncoding:1,jsonFormat:2,enforceNamingStyle:2,defaultSymbolVisibility:1},999:{fieldPresence:2,enumType:1,repeatedFieldEncoding:1,utf8Validation:2,messageEncoding:1,jsonFormat:1,enforceNamingStyle:2,defaultSymbolVisibility:1},1e3:{fieldPresence:1,enumType:1,repeatedFieldEncoding:1,utf8Validation:2,messageEncoding:1,jsonFormat:1,enforceNamingStyle:2,defaultSymbolVisibility:1},1001:{fieldPresence:1,enumType:1,repeatedFieldEncoding:1,utf8Validation:2,messageEncoding:1,jsonFormat:1,enforceNamingStyle:1,defaultSymbolVisibility:2}};function lb(t,e){var n,a;const o={kind:"file",proto:t,deprecated:(a=(n=t.options)===null||n===void 0?void 0:n.deprecated)!==null&&a!==void 0?a:!1,edition:nT(t),name:t.name.replace(/\.proto$/,""),dependencies:rT(t,e),enums:[],messages:[],extensions:[],services:[],toString(){return`file ${t.name}`}},l=new Map,c={get(d){return l.get(d)},add(d){var m;Kn(((m=d.proto.options)===null||m===void 0?void 0:m.mapEntry)===!0),l.set(d.typeName,d)}};for(const d of t.enumType)$A(d,o,void 0,e);for(const d of t.messageType)PA(d,o,void 0,e,c);for(const d of t.service)q2(d,o,e);Eg(o,e);for(const d of l.values())wg(d,e,c);for(const d of o.messages)wg(d,e,c),Eg(d,e);e.addFile(o,!0)}function Eg(t,e){switch(t.kind){case"file":for(const n of t.proto.extension){const a=Ng(n,t,e);t.extensions.push(a),e.add(a)}break;case"message":for(const n of t.proto.extension){const a=Ng(n,t,e);t.nestedExtensions.push(a),e.add(a)}for(const n of t.nestedMessages)Eg(n,e);break}}function wg(t,e,n){const a=t.proto.oneofDecl.map(l=>tT(l,t)),o=new Set;for(const l of t.proto.field){const c=sT(l,a),d=Ng(l,t,e,c,n);t.fields.push(d),t.field[d.localName]=d,c===void 0?t.members.push(d):(c.fields.push(d),o.has(c)||(o.add(c),t.members.push(c)))}for(const l of a.filter(c=>o.has(c)))t.oneofs.push(l);for(const l of t.nestedMessages)wg(l,e,n)}function $A(t,e,n,a){var o,l,c,d,m;const h=iT(t.name,t.value),p={kind:"enum",proto:t,deprecated:(l=(o=t.options)===null||o===void 0?void 0:o.deprecated)!==null&&l!==void 0?l:!1,file:e,parent:n,open:!0,name:t.name,typeName:af(t,n,e),value:{},values:[],sharedPrefix:h,toString(){return`enum ${this.typeName}`}};p.open=cT(p),a.add(p);for(const y of t.value){const v=y.name;p.values.push(p.value[y.number]={kind:"enum_value",proto:y,deprecated:(d=(c=y.options)===null||c===void 0?void 0:c.deprecated)!==null&&d!==void 0?d:!1,parent:p,name:v,localName:dl(h==null?v:v.substring(h.length)),number:y.number,toString(){return`enum value ${p.typeName}.${v}`}})}((m=n?.nestedEnums)!==null&&m!==void 0?m:e.enums).push(p)}function PA(t,e,n,a,o){var l,c,d,m;const h={kind:"message",proto:t,deprecated:(c=(l=t.options)===null||l===void 0?void 0:l.deprecated)!==null&&c!==void 0?c:!1,file:e,parent:n,name:t.name,typeName:af(t,n,e),fields:[],field:{},oneofs:[],members:[],nestedEnums:[],nestedMessages:[],nestedExtensions:[],toString(){return`message ${this.typeName}`}};((d=t.options)===null||d===void 0?void 0:d.mapEntry)===!0?o.add(h):(((m=n?.nestedMessages)!==null&&m!==void 0?m:e.messages).push(h),a.add(h));for(const p of t.enumType)$A(p,e,h,a);for(const p of t.nestedType)PA(p,e,h,a,o)}function q2(t,e,n){var a,o;const l={kind:"service",proto:t,deprecated:(o=(a=t.options)===null||a===void 0?void 0:a.deprecated)!==null&&o!==void 0?o:!1,file:e,name:t.name,typeName:af(t,void 0,e),methods:[],method:{},toString(){return`service ${this.typeName}`}};e.services.push(l),n.add(l);for(const c of t.method){const d=eT(c,l,n);l.methods.push(d),l.method[d.localName]=d}}function eT(t,e,n){var a,o,l,c;let d;t.clientStreaming&&t.serverStreaming?d="bidi_streaming":t.clientStreaming?d="client_streaming":t.serverStreaming?d="server_streaming":d="unary";const m=n.getMessage(Yr(t.inputType)),h=n.getMessage(Yr(t.outputType));Kn(m,`invalid MethodDescriptorProto: input_type ${t.inputType} not found`),Kn(h,`invalid MethodDescriptorProto: output_type ${t.inputType} not found`);const p=t.name;return{kind:"rpc",proto:t,deprecated:(o=(a=t.options)===null||a===void 0?void 0:a.deprecated)!==null&&o!==void 0?o:!1,parent:e,name:p,localName:dl(p.length?dl(p[0].toLowerCase()+p.substring(1)):p),methodKind:d,input:m,output:h,idempotency:(c=(l=t.options)===null||l===void 0?void 0:l.idempotencyLevel)!==null&&c!==void 0?c:J2,toString(){return`rpc ${e.typeName}.${p}`}}}function tT(t,e){return{kind:"oneof",proto:t,deprecated:!1,parent:e,fields:[],name:t.name,localName:dl(fl(t.name)),toString(){return`oneof ${e.typeName}.${this.name}`}}}function Ng(t,e,n,a,o){var l,c,d;const m=o===void 0,h={kind:"field",proto:t,deprecated:(c=(l=t.options)===null||l===void 0?void 0:l.deprecated)!==null&&c!==void 0?c:!1,name:t.name,number:t.number,scalar:void 0,message:void 0,enum:void 0,presence:oT(t,a,m,e),listKind:void 0,mapKind:void 0,mapKey:void 0,delimitedEncoding:void 0,packed:void 0,longAsString:!1,getDefaultValue:void 0};if(m){const S=e.kind=="file"?e:e.file,E=e.kind=="file"?void 0:e,A=af(t,E,S);h.kind="extension",h.file=S,h.parent=E,h.oneof=void 0,h.typeName=A,h.jsonName=`[${A}]`,h.toString=()=>`extension ${A}`;const R=n.getMessage(Yr(t.extendee));Kn(R,`invalid FieldDescriptorProto: extendee ${t.extendee} not found`),h.extendee=R}else{const S=e;Kn(S.kind=="message"),h.parent=S,h.oneof=a,h.localName=a?fl(t.name):dl(fl(t.name)),h.jsonName=t.jsonName,h.toString=()=>`field ${S.typeName}.${t.name}`}const p=t.label,y=t.type,v=(d=t.options)===null||d===void 0?void 0:d.jstype;if(p===cm){const S=y==nl?o?.get(Yr(t.typeName)):void 0;if(S){h.fieldKind="map";const{key:E,value:A}=uT(S);return h.mapKey=E.scalar,h.mapKind=A.fieldKind,h.message=A.message,h.delimitedEncoding=!1,h.enum=A.enum,h.scalar=A.scalar,h}switch(h.fieldKind="list",y){case nl:case hl:h.listKind="message",h.message=n.getMessage(Yr(t.typeName)),Kn(h.message),h.delimitedEncoding=ub(t,e);break;case ab:h.listKind="enum",h.enum=n.getEnum(Yr(t.typeName)),Kn(h.enum);break;default:h.listKind="scalar",h.scalar=y,h.longAsString=v==sb;break}return h.packed=lT(t,e),h}switch(y){case nl:case hl:h.fieldKind="message",h.message=n.getMessage(Yr(t.typeName)),Kn(h.message,`invalid FieldDescriptorProto: type_name ${t.typeName} not found`),h.delimitedEncoding=ub(t,e),h.getDefaultValue=()=>{};break;case ab:{const S=n.getEnum(Yr(t.typeName));Kn(S!==void 0,`invalid FieldDescriptorProto: type_name ${t.typeName} not found`),h.fieldKind="enum",h.enum=n.getEnum(Yr(t.typeName)),h.getDefaultValue=()=>cl(t,"defaultValue")?Y2(S,t.defaultValue):void 0;break}default:{h.fieldKind="scalar",h.scalar=y,h.longAsString=v==sb,h.getDefaultValue=()=>cl(t,"defaultValue")?Z2(y,t.defaultValue):void 0;break}}return h}function nT(t){switch(t.syntax){case"":case"proto2":return X2;case"proto3":return W2;case"editions":if(t.edition in jA)return t.edition;throw new Error(`${t.name}: unsupported edition`);default:throw new Error(`${t.name}: unsupported syntax "${t.syntax}"`)}}function rT(t,e){return t.dependency.map(n=>{const a=e.getFile(n);if(!a)throw new Error(`Cannot find ${n}, imported by ${t.name}`);return a})}function iT(t,e){const n=aT(t)+"_";for(const a of e){if(!a.name.toLowerCase().startsWith(n))return;const o=a.name.substring(n.length);if(o.length==0||/^\d/.test(o))return}return n}function aT(t){return(t.substring(0,1)+t.substring(1).replace(/[A-Z]/g,e=>"_"+e)).toLowerCase()}function af(t,e,n){let a;return e?a=`${e.typeName}.${t.name}`:n.proto.package.length>0?a=`${n.proto.package}.${t.name}`:a=`${t.name}`,a}function Yr(t){return t.startsWith(".")?t.substring(1):t}function sT(t,e){if(!cl(t,"oneofIndex")||t.proto3Optional)return;const n=e[t.oneofIndex];return Kn(n,`invalid FieldDescriptorProto: oneof #${t.oneofIndex} for field #${t.number} not found`),n}function oT(t,e,n,a){if(t.label==F2)return j2;if(t.label==cm)return ob;if(e||t.proto3Optional||n)return ng;const o=_s("fieldPresence",{proto:t,parent:a});return o==ob&&(t.type==nl||t.type==hl)?ng:o}function lT(t,e){if(t.label!=cm)return!1;switch(t.type){case K2:case H2:case hl:case nl:return!1}const n=t.options;return n&&cl(n,"packed")?n.packed:$2==_s("repeatedFieldEncoding",{proto:t,parent:e})}function uT(t){const e=t.fields.find(a=>a.number===1),n=t.fields.find(a=>a.number===2);return Kn(e&&e.fieldKind=="scalar"&&e.scalar!=X.BYTES&&e.scalar!=X.FLOAT&&e.scalar!=X.DOUBLE&&n&&n.fieldKind!="list"&&n.fieldKind!="map"),{key:e,value:n}}function cT(t){var e;return Q2==_s("enumType",{proto:t.proto,parent:(e=t.parent)!==null&&e!==void 0?e:t.file})}function ub(t,e){return t.type==hl?!0:P2==_s("messageEncoding",{proto:t,parent:e})}function _s(t,e){var n,a;const o=(n=e.proto.options)===null||n===void 0?void 0:n.features;if(o){const l=o[t];if(l!=0)return l}if("kind"in e){if(e.kind=="message")return _s(t,(a=e.parent)!==null&&a!==void 0?a:e.file);const l=jA[e.edition];if(!l)throw new Error(`feature default for edition ${e.edition} not found`);return l[t]}return _s(t,e.parent)}function Kn(t,e){if(!t)throw new Error(e)}function fT(t){const e=dT(t);return e.messageType.forEach(um),JA(e,()=>{}).getFile(e.name)}function dT(t){return Object.assign(Object.create({syntax:"",edition:0}),Object.assign(Object.assign({$typeName:"google.protobuf.FileDescriptorProto",dependency:[],publicDependency:[],weakDependency:[],optionDependency:[],service:[],extension:[]},t),{messageType:t.messageType.map(QA),enumType:t.enumType.map(qA)}))}function QA(t){var e,n,a,o,l,c,d,m;return Object.assign(Object.create({visibility:0}),{$typeName:"google.protobuf.DescriptorProto",name:t.name,field:(n=(e=t.field)===null||e===void 0?void 0:e.map(hT))!==null&&n!==void 0?n:[],extension:[],nestedType:(o=(a=t.nestedType)===null||a===void 0?void 0:a.map(QA))!==null&&o!==void 0?o:[],enumType:(c=(l=t.enumType)===null||l===void 0?void 0:l.map(qA))!==null&&c!==void 0?c:[],extensionRange:(m=(d=t.extensionRange)===null||d===void 0?void 0:d.map(p=>Object.assign({$typeName:"google.protobuf.DescriptorProto.ExtensionRange"},p)))!==null&&m!==void 0?m:[],oneofDecl:[],reservedRange:[],reservedName:[]})}function hT(t){return Object.assign(Object.create({label:1,typeName:"",extendee:"",defaultValue:"",oneofIndex:0,jsonName:"",proto3Optional:!1}),Object.assign(Object.assign({$typeName:"google.protobuf.FieldDescriptorProto"},t),{options:t.options?gT(t.options):void 0}))}function gT(t){var e,n,a;return Object.assign(Object.create({ctype:0,packed:!1,jstype:0,lazy:!1,unverifiedLazy:!1,deprecated:!1,weak:!1,debugRedact:!1,retention:0}),Object.assign(Object.assign({$typeName:"google.protobuf.FieldOptions"},t),{targets:(e=t.targets)!==null&&e!==void 0?e:[],editionDefaults:(a=(n=t.editionDefaults)===null||n===void 0?void 0:n.map(l=>Object.assign({$typeName:"google.protobuf.FieldOptions.EditionDefault"},l)))!==null&&a!==void 0?a:[],uninterpretedOption:[]}))}function qA(t){return Object.assign(Object.create({visibility:0}),{$typeName:"google.protobuf.EnumDescriptorProto",name:t.name,reservedName:[],reservedRange:[],value:t.value.map(n=>Object.assign({$typeName:"google.protobuf.EnumValueDescriptorProto"},n))})}function Ce(t,e,...n){return n.reduce((a,o)=>a.nestedMessages[o],t.messages[e])}const mT=fT({name:"google/protobuf/descriptor.proto",package:"google.protobuf",messageType:[{name:"FileDescriptorSet",field:[{name:"file",number:1,type:11,label:3,typeName:".google.protobuf.FileDescriptorProto"}],extensionRange:[{start:536e6,end:536000001}]},{name:"FileDescriptorProto",field:[{name:"name",number:1,type:9,label:1},{name:"package",number:2,type:9,label:1},{name:"dependency",number:3,type:9,label:3},{name:"public_dependency",number:10,type:5,label:3},{name:"weak_dependency",number:11,type:5,label:3},{name:"option_dependency",number:15,type:9,label:3},{name:"message_type",number:4,type:11,label:3,typeName:".google.protobuf.DescriptorProto"},{name:"enum_type",number:5,type:11,label:3,typeName:".google.protobuf.EnumDescriptorProto"},{name:"service",number:6,type:11,label:3,typeName:".google.protobuf.ServiceDescriptorProto"},{name:"extension",number:7,type:11,label:3,typeName:".google.protobuf.FieldDescriptorProto"},{name:"options",number:8,type:11,label:1,typeName:".google.protobuf.FileOptions"},{name:"source_code_info",number:9,type:11,label:1,typeName:".google.protobuf.SourceCodeInfo"},{name:"syntax",number:12,type:9,label:1},{name:"edition",number:14,type:14,label:1,typeName:".google.protobuf.Edition"}]},{name:"DescriptorProto",field:[{name:"name",number:1,type:9,label:1},{name:"field",number:2,type:11,label:3,typeName:".google.protobuf.FieldDescriptorProto"},{name:"extension",number:6,type:11,label:3,typeName:".google.protobuf.FieldDescriptorProto"},{name:"nested_type",number:3,type:11,label:3,typeName:".google.protobuf.DescriptorProto"},{name:"enum_type",number:4,type:11,label:3,typeName:".google.protobuf.EnumDescriptorProto"},{name:"extension_range",number:5,type:11,label:3,typeName:".google.protobuf.DescriptorProto.ExtensionRange"},{name:"oneof_decl",number:8,type:11,label:3,typeName:".google.protobuf.OneofDescriptorProto"},{name:"options",number:7,type:11,label:1,typeName:".google.protobuf.MessageOptions"},{name:"reserved_range",number:9,type:11,label:3,typeName:".google.protobuf.DescriptorProto.ReservedRange"},{name:"reserved_name",number:10,type:9,label:3},{name:"visibility",number:11,type:14,label:1,typeName:".google.protobuf.SymbolVisibility"}],nestedType:[{name:"ExtensionRange",field:[{name:"start",number:1,type:5,label:1},{name:"end",number:2,type:5,label:1},{name:"options",number:3,type:11,label:1,typeName:".google.protobuf.ExtensionRangeOptions"}]},{name:"ReservedRange",field:[{name:"start",number:1,type:5,label:1},{name:"end",number:2,type:5,label:1}]}]},{name:"ExtensionRangeOptions",field:[{name:"uninterpreted_option",number:999,type:11,label:3,typeName:".google.protobuf.UninterpretedOption"},{name:"declaration",number:2,type:11,label:3,typeName:".google.protobuf.ExtensionRangeOptions.Declaration",options:{retention:2}},{name:"features",number:50,type:11,label:1,typeName:".google.protobuf.FeatureSet"},{name:"verification",number:3,type:14,label:1,typeName:".google.protobuf.ExtensionRangeOptions.VerificationState",defaultValue:"UNVERIFIED",options:{retention:2}}],nestedType:[{name:"Declaration",field:[{name:"number",number:1,type:5,label:1},{name:"full_name",number:2,type:9,label:1},{name:"type",number:3,type:9,label:1},{name:"reserved",number:5,type:8,label:1},{name:"repeated",number:6,type:8,label:1}]}],enumType:[{name:"VerificationState",value:[{name:"DECLARATION",number:0},{name:"UNVERIFIED",number:1}]}],extensionRange:[{start:1e3,end:536870912}]},{name:"FieldDescriptorProto",field:[{name:"name",number:1,type:9,label:1},{name:"number",number:3,type:5,label:1},{name:"label",number:4,type:14,label:1,typeName:".google.protobuf.FieldDescriptorProto.Label"},{name:"type",number:5,type:14,label:1,typeName:".google.protobuf.FieldDescriptorProto.Type"},{name:"type_name",number:6,type:9,label:1},{name:"extendee",number:2,type:9,label:1},{name:"default_value",number:7,type:9,label:1},{name:"oneof_index",number:9,type:5,label:1},{name:"json_name",number:10,type:9,label:1},{name:"options",number:8,type:11,label:1,typeName:".google.protobuf.FieldOptions"},{name:"proto3_optional",number:17,type:8,label:1}],enumType:[{name:"Type",value:[{name:"TYPE_DOUBLE",number:1},{name:"TYPE_FLOAT",number:2},{name:"TYPE_INT64",number:3},{name:"TYPE_UINT64",number:4},{name:"TYPE_INT32",number:5},{name:"TYPE_FIXED64",number:6},{name:"TYPE_FIXED32",number:7},{name:"TYPE_BOOL",number:8},{name:"TYPE_STRING",number:9},{name:"TYPE_GROUP",number:10},{name:"TYPE_MESSAGE",number:11},{name:"TYPE_BYTES",number:12},{name:"TYPE_UINT32",number:13},{name:"TYPE_ENUM",number:14},{name:"TYPE_SFIXED32",number:15},{name:"TYPE_SFIXED64",number:16},{name:"TYPE_SINT32",number:17},{name:"TYPE_SINT64",number:18}]},{name:"Label",value:[{name:"LABEL_OPTIONAL",number:1},{name:"LABEL_REPEATED",number:3},{name:"LABEL_REQUIRED",number:2}]}]},{name:"OneofDescriptorProto",field:[{name:"name",number:1,type:9,label:1},{name:"options",number:2,type:11,label:1,typeName:".google.protobuf.OneofOptions"}]},{name:"EnumDescriptorProto",field:[{name:"name",number:1,type:9,label:1},{name:"value",number:2,type:11,label:3,typeName:".google.protobuf.EnumValueDescriptorProto"},{name:"options",number:3,type:11,label:1,typeName:".google.protobuf.EnumOptions"},{name:"reserved_range",number:4,type:11,label:3,typeName:".google.protobuf.EnumDescriptorProto.EnumReservedRange"},{name:"reserved_name",number:5,type:9,label:3},{name:"visibility",number:6,type:14,label:1,typeName:".google.protobuf.SymbolVisibility"}],nestedType:[{name:"EnumReservedRange",field:[{name:"start",number:1,type:5,label:1},{name:"end",number:2,type:5,label:1}]}]},{name:"EnumValueDescriptorProto",field:[{name:"name",number:1,type:9,label:1},{name:"number",number:2,type:5,label:1},{name:"options",number:3,type:11,label:1,typeName:".google.protobuf.EnumValueOptions"}]},{name:"ServiceDescriptorProto",field:[{name:"name",number:1,type:9,label:1},{name:"method",number:2,type:11,label:3,typeName:".google.protobuf.MethodDescriptorProto"},{name:"options",number:3,type:11,label:1,typeName:".google.protobuf.ServiceOptions"}]},{name:"MethodDescriptorProto",field:[{name:"name",number:1,type:9,label:1},{name:"input_type",number:2,type:9,label:1},{name:"output_type",number:3,type:9,label:1},{name:"options",number:4,type:11,label:1,typeName:".google.protobuf.MethodOptions"},{name:"client_streaming",number:5,type:8,label:1,defaultValue:"false"},{name:"server_streaming",number:6,type:8,label:1,defaultValue:"false"}]},{name:"FileOptions",field:[{name:"java_package",number:1,type:9,label:1},{name:"java_outer_classname",number:8,type:9,label:1},{name:"java_multiple_files",number:10,type:8,label:1,defaultValue:"false"},{name:"java_generate_equals_and_hash",number:20,type:8,label:1,options:{deprecated:!0}},{name:"java_string_check_utf8",number:27,type:8,label:1,defaultValue:"false"},{name:"optimize_for",number:9,type:14,label:1,typeName:".google.protobuf.FileOptions.OptimizeMode",defaultValue:"SPEED"},{name:"go_package",number:11,type:9,label:1},{name:"cc_generic_services",number:16,type:8,label:1,defaultValue:"false"},{name:"java_generic_services",number:17,type:8,label:1,defaultValue:"false"},{name:"py_generic_services",number:18,type:8,label:1,defaultValue:"false"},{name:"deprecated",number:23,type:8,label:1,defaultValue:"false"},{name:"cc_enable_arenas",number:31,type:8,label:1,defaultValue:"true"},{name:"objc_class_prefix",number:36,type:9,label:1},{name:"csharp_namespace",number:37,type:9,label:1},{name:"swift_prefix",number:39,type:9,label:1},{name:"php_class_prefix",number:40,type:9,label:1},{name:"php_namespace",number:41,type:9,label:1},{name:"php_metadata_namespace",number:44,type:9,label:1},{name:"ruby_package",number:45,type:9,label:1},{name:"features",number:50,type:11,label:1,typeName:".google.protobuf.FeatureSet"},{name:"uninterpreted_option",number:999,type:11,label:3,typeName:".google.protobuf.UninterpretedOption"}],enumType:[{name:"OptimizeMode",value:[{name:"SPEED",number:1},{name:"CODE_SIZE",number:2},{name:"LITE_RUNTIME",number:3}]}],extensionRange:[{start:1e3,end:536870912}]},{name:"MessageOptions",field:[{name:"message_set_wire_format",number:1,type:8,label:1,defaultValue:"false"},{name:"no_standard_descriptor_accessor",number:2,type:8,label:1,defaultValue:"false"},{name:"deprecated",number:3,type:8,label:1,defaultValue:"false"},{name:"map_entry",number:7,type:8,label:1},{name:"deprecated_legacy_json_field_conflicts",number:11,type:8,label:1,options:{deprecated:!0}},{name:"features",number:12,type:11,label:1,typeName:".google.protobuf.FeatureSet"},{name:"uninterpreted_option",number:999,type:11,label:3,typeName:".google.protobuf.UninterpretedOption"}],extensionRange:[{start:1e3,end:536870912}]},{name:"FieldOptions",field:[{name:"ctype",number:1,type:14,label:1,typeName:".google.protobuf.FieldOptions.CType",defaultValue:"STRING"},{name:"packed",number:2,type:8,label:1},{name:"jstype",number:6,type:14,label:1,typeName:".google.protobuf.FieldOptions.JSType",defaultValue:"JS_NORMAL"},{name:"lazy",number:5,type:8,label:1,defaultValue:"false"},{name:"unverified_lazy",number:15,type:8,label:1,defaultValue:"false"},{name:"deprecated",number:3,type:8,label:1,defaultValue:"false"},{name:"weak",number:10,type:8,label:1,defaultValue:"false",options:{deprecated:!0}},{name:"debug_redact",number:16,type:8,label:1,defaultValue:"false"},{name:"retention",number:17,type:14,label:1,typeName:".google.protobuf.FieldOptions.OptionRetention"},{name:"targets",number:19,type:14,label:3,typeName:".google.protobuf.FieldOptions.OptionTargetType"},{name:"edition_defaults",number:20,type:11,label:3,typeName:".google.protobuf.FieldOptions.EditionDefault"},{name:"features",number:21,type:11,label:1,typeName:".google.protobuf.FeatureSet"},{name:"feature_support",number:22,type:11,label:1,typeName:".google.protobuf.FieldOptions.FeatureSupport"},{name:"uninterpreted_option",number:999,type:11,label:3,typeName:".google.protobuf.UninterpretedOption"}],nestedType:[{name:"EditionDefault",field:[{name:"edition",number:3,type:14,label:1,typeName:".google.protobuf.Edition"},{name:"value",number:2,type:9,label:1}]},{name:"FeatureSupport",field:[{name:"edition_introduced",number:1,type:14,label:1,typeName:".google.protobuf.Edition"},{name:"edition_deprecated",number:2,type:14,label:1,typeName:".google.protobuf.Edition"},{name:"deprecation_warning",number:3,type:9,label:1},{name:"edition_removed",number:4,type:14,label:1,typeName:".google.protobuf.Edition"}]}],enumType:[{name:"CType",value:[{name:"STRING",number:0},{name:"CORD",number:1},{name:"STRING_PIECE",number:2}]},{name:"JSType",value:[{name:"JS_NORMAL",number:0},{name:"JS_STRING",number:1},{name:"JS_NUMBER",number:2}]},{name:"OptionRetention",value:[{name:"RETENTION_UNKNOWN",number:0},{name:"RETENTION_RUNTIME",number:1},{name:"RETENTION_SOURCE",number:2}]},{name:"OptionTargetType",value:[{name:"TARGET_TYPE_UNKNOWN",number:0},{name:"TARGET_TYPE_FILE",number:1},{name:"TARGET_TYPE_EXTENSION_RANGE",number:2},{name:"TARGET_TYPE_MESSAGE",number:3},{name:"TARGET_TYPE_FIELD",number:4},{name:"TARGET_TYPE_ONEOF",number:5},{name:"TARGET_TYPE_ENUM",number:6},{name:"TARGET_TYPE_ENUM_ENTRY",number:7},{name:"TARGET_TYPE_SERVICE",number:8},{name:"TARGET_TYPE_METHOD",number:9}]}],extensionRange:[{start:1e3,end:536870912}]},{name:"OneofOptions",field:[{name:"features",number:1,type:11,label:1,typeName:".google.protobuf.FeatureSet"},{name:"uninterpreted_option",number:999,type:11,label:3,typeName:".google.protobuf.UninterpretedOption"}],extensionRange:[{start:1e3,end:536870912}]},{name:"EnumOptions",field:[{name:"allow_alias",number:2,type:8,label:1},{name:"deprecated",number:3,type:8,label:1,defaultValue:"false"},{name:"deprecated_legacy_json_field_conflicts",number:6,type:8,label:1,options:{deprecated:!0}},{name:"features",number:7,type:11,label:1,typeName:".google.protobuf.FeatureSet"},{name:"uninterpreted_option",number:999,type:11,label:3,typeName:".google.protobuf.UninterpretedOption"}],extensionRange:[{start:1e3,end:536870912}]},{name:"EnumValueOptions",field:[{name:"deprecated",number:1,type:8,label:1,defaultValue:"false"},{name:"features",number:2,type:11,label:1,typeName:".google.protobuf.FeatureSet"},{name:"debug_redact",number:3,type:8,label:1,defaultValue:"false"},{name:"feature_support",number:4,type:11,label:1,typeName:".google.protobuf.FieldOptions.FeatureSupport"},{name:"uninterpreted_option",number:999,type:11,label:3,typeName:".google.protobuf.UninterpretedOption"}],extensionRange:[{start:1e3,end:536870912}]},{name:"ServiceOptions",field:[{name:"features",number:34,type:11,label:1,typeName:".google.protobuf.FeatureSet"},{name:"deprecated",number:33,type:8,label:1,defaultValue:"false"},{name:"uninterpreted_option",number:999,type:11,label:3,typeName:".google.protobuf.UninterpretedOption"}],extensionRange:[{start:1e3,end:536870912}]},{name:"MethodOptions",field:[{name:"deprecated",number:33,type:8,label:1,defaultValue:"false"},{name:"idempotency_level",number:34,type:14,label:1,typeName:".google.protobuf.MethodOptions.IdempotencyLevel",defaultValue:"IDEMPOTENCY_UNKNOWN"},{name:"features",number:35,type:11,label:1,typeName:".google.protobuf.FeatureSet"},{name:"uninterpreted_option",number:999,type:11,label:3,typeName:".google.protobuf.UninterpretedOption"}],enumType:[{name:"IdempotencyLevel",value:[{name:"IDEMPOTENCY_UNKNOWN",number:0},{name:"NO_SIDE_EFFECTS",number:1},{name:"IDEMPOTENT",number:2}]}],extensionRange:[{start:1e3,end:536870912}]},{name:"UninterpretedOption",field:[{name:"name",number:2,type:11,label:3,typeName:".google.protobuf.UninterpretedOption.NamePart"},{name:"identifier_value",number:3,type:9,label:1},{name:"positive_int_value",number:4,type:4,label:1},{name:"negative_int_value",number:5,type:3,label:1},{name:"double_value",number:6,type:1,label:1},{name:"string_value",number:7,type:12,label:1},{name:"aggregate_value",number:8,type:9,label:1}],nestedType:[{name:"NamePart",field:[{name:"name_part",number:1,type:9,label:2},{name:"is_extension",number:2,type:8,label:2}]}]},{name:"FeatureSet",field:[{name:"field_presence",number:1,type:14,label:1,typeName:".google.protobuf.FeatureSet.FieldPresence",options:{retention:1,targets:[4,1],editionDefaults:[{value:"EXPLICIT",edition:900},{value:"IMPLICIT",edition:999},{value:"EXPLICIT",edition:1e3}]}},{name:"enum_type",number:2,type:14,label:1,typeName:".google.protobuf.FeatureSet.EnumType",options:{retention:1,targets:[6,1],editionDefaults:[{value:"CLOSED",edition:900},{value:"OPEN",edition:999}]}},{name:"repeated_field_encoding",number:3,type:14,label:1,typeName:".google.protobuf.FeatureSet.RepeatedFieldEncoding",options:{retention:1,targets:[4,1],editionDefaults:[{value:"EXPANDED",edition:900},{value:"PACKED",edition:999}]}},{name:"utf8_validation",number:4,type:14,label:1,typeName:".google.protobuf.FeatureSet.Utf8Validation",options:{retention:1,targets:[4,1],editionDefaults:[{value:"NONE",edition:900},{value:"VERIFY",edition:999}]}},{name:"message_encoding",number:5,type:14,label:1,typeName:".google.protobuf.FeatureSet.MessageEncoding",options:{retention:1,targets:[4,1],editionDefaults:[{value:"LENGTH_PREFIXED",edition:900}]}},{name:"json_format",number:6,type:14,label:1,typeName:".google.protobuf.FeatureSet.JsonFormat",options:{retention:1,targets:[3,6,1],editionDefaults:[{value:"LEGACY_BEST_EFFORT",edition:900},{value:"ALLOW",edition:999}]}},{name:"enforce_naming_style",number:7,type:14,label:1,typeName:".google.protobuf.FeatureSet.EnforceNamingStyle",options:{retention:2,targets:[1,2,3,4,5,6,7,8,9],editionDefaults:[{value:"STYLE_LEGACY",edition:900},{value:"STYLE2024",edition:1001}]}},{name:"default_symbol_visibility",number:8,type:14,label:1,typeName:".google.protobuf.FeatureSet.VisibilityFeature.DefaultSymbolVisibility",options:{retention:2,targets:[1],editionDefaults:[{value:"EXPORT_ALL",edition:900},{value:"EXPORT_TOP_LEVEL",edition:1001}]}}],nestedType:[{name:"VisibilityFeature",enumType:[{name:"DefaultSymbolVisibility",value:[{name:"DEFAULT_SYMBOL_VISIBILITY_UNKNOWN",number:0},{name:"EXPORT_ALL",number:1},{name:"EXPORT_TOP_LEVEL",number:2},{name:"LOCAL_ALL",number:3},{name:"STRICT",number:4}]}]}],enumType:[{name:"FieldPresence",value:[{name:"FIELD_PRESENCE_UNKNOWN",number:0},{name:"EXPLICIT",number:1},{name:"IMPLICIT",number:2},{name:"LEGACY_REQUIRED",number:3}]},{name:"EnumType",value:[{name:"ENUM_TYPE_UNKNOWN",number:0},{name:"OPEN",number:1},{name:"CLOSED",number:2}]},{name:"RepeatedFieldEncoding",value:[{name:"REPEATED_FIELD_ENCODING_UNKNOWN",number:0},{name:"PACKED",number:1},{name:"EXPANDED",number:2}]},{name:"Utf8Validation",value:[{name:"UTF8_VALIDATION_UNKNOWN",number:0},{name:"VERIFY",number:2},{name:"NONE",number:3}]},{name:"MessageEncoding",value:[{name:"MESSAGE_ENCODING_UNKNOWN",number:0},{name:"LENGTH_PREFIXED",number:1},{name:"DELIMITED",number:2}]},{name:"JsonFormat",value:[{name:"JSON_FORMAT_UNKNOWN",number:0},{name:"ALLOW",number:1},{name:"LEGACY_BEST_EFFORT",number:2}]},{name:"EnforceNamingStyle",value:[{name:"ENFORCE_NAMING_STYLE_UNKNOWN",number:0},{name:"STYLE2024",number:1},{name:"STYLE_LEGACY",number:2}]}],extensionRange:[{start:1e3,end:9995},{start:9995,end:1e4},{start:1e4,end:10001}]},{name:"FeatureSetDefaults",field:[{name:"defaults",number:1,type:11,label:3,typeName:".google.protobuf.FeatureSetDefaults.FeatureSetEditionDefault"},{name:"minimum_edition",number:4,type:14,label:1,typeName:".google.protobuf.Edition"},{name:"maximum_edition",number:5,type:14,label:1,typeName:".google.protobuf.Edition"}],nestedType:[{name:"FeatureSetEditionDefault",field:[{name:"edition",number:3,type:14,label:1,typeName:".google.protobuf.Edition"},{name:"overridable_features",number:4,type:11,label:1,typeName:".google.protobuf.FeatureSet"},{name:"fixed_features",number:5,type:11,label:1,typeName:".google.protobuf.FeatureSet"}]}]},{name:"SourceCodeInfo",field:[{name:"location",number:1,type:11,label:3,typeName:".google.protobuf.SourceCodeInfo.Location"}],nestedType:[{name:"Location",field:[{name:"path",number:1,type:5,label:3,options:{packed:!0}},{name:"span",number:2,type:5,label:3,options:{packed:!0}},{name:"leading_comments",number:3,type:9,label:1},{name:"trailing_comments",number:4,type:9,label:1},{name:"leading_detached_comments",number:6,type:9,label:3}]}],extensionRange:[{start:536e6,end:536000001}]},{name:"GeneratedCodeInfo",field:[{name:"annotation",number:1,type:11,label:3,typeName:".google.protobuf.GeneratedCodeInfo.Annotation"}],nestedType:[{name:"Annotation",field:[{name:"path",number:1,type:5,label:3,options:{packed:!0}},{name:"source_file",number:2,type:9,label:1},{name:"begin",number:3,type:5,label:1},{name:"end",number:4,type:5,label:1},{name:"semantic",number:5,type:14,label:1,typeName:".google.protobuf.GeneratedCodeInfo.Annotation.Semantic"}],enumType:[{name:"Semantic",value:[{name:"NONE",number:0},{name:"SET",number:1},{name:"ALIAS",number:2}]}]}]}],enumType:[{name:"Edition",value:[{name:"EDITION_UNKNOWN",number:0},{name:"EDITION_LEGACY",number:900},{name:"EDITION_PROTO2",number:998},{name:"EDITION_PROTO3",number:999},{name:"EDITION_2023",number:1e3},{name:"EDITION_2024",number:1001},{name:"EDITION_1_TEST_ONLY",number:1},{name:"EDITION_2_TEST_ONLY",number:2},{name:"EDITION_99997_TEST_ONLY",number:99997},{name:"EDITION_99998_TEST_ONLY",number:99998},{name:"EDITION_99999_TEST_ONLY",number:99999},{name:"EDITION_MAX",number:2147483647}]},{name:"SymbolVisibility",value:[{name:"VISIBILITY_UNSET",number:0},{name:"VISIBILITY_LOCAL",number:1},{name:"VISIBILITY_EXPORT",number:2}]}]}),pT=Ce(mT,1);var cb;(function(t){t[t.DECLARATION=0]="DECLARATION",t[t.UNVERIFIED=1]="UNVERIFIED"})(cb||(cb={}));var fb;(function(t){t[t.DOUBLE=1]="DOUBLE",t[t.FLOAT=2]="FLOAT",t[t.INT64=3]="INT64",t[t.UINT64=4]="UINT64",t[t.INT32=5]="INT32",t[t.FIXED64=6]="FIXED64",t[t.FIXED32=7]="FIXED32",t[t.BOOL=8]="BOOL",t[t.STRING=9]="STRING",t[t.GROUP=10]="GROUP",t[t.MESSAGE=11]="MESSAGE",t[t.BYTES=12]="BYTES",t[t.UINT32=13]="UINT32",t[t.ENUM=14]="ENUM",t[t.SFIXED32=15]="SFIXED32",t[t.SFIXED64=16]="SFIXED64",t[t.SINT32=17]="SINT32",t[t.SINT64=18]="SINT64"})(fb||(fb={}));var db;(function(t){t[t.OPTIONAL=1]="OPTIONAL",t[t.REPEATED=3]="REPEATED",t[t.REQUIRED=2]="REQUIRED"})(db||(db={}));var hb;(function(t){t[t.SPEED=1]="SPEED",t[t.CODE_SIZE=2]="CODE_SIZE",t[t.LITE_RUNTIME=3]="LITE_RUNTIME"})(hb||(hb={}));var gb;(function(t){t[t.STRING=0]="STRING",t[t.CORD=1]="CORD",t[t.STRING_PIECE=2]="STRING_PIECE"})(gb||(gb={}));var mb;(function(t){t[t.JS_NORMAL=0]="JS_NORMAL",t[t.JS_STRING=1]="JS_STRING",t[t.JS_NUMBER=2]="JS_NUMBER"})(mb||(mb={}));var pb;(function(t){t[t.RETENTION_UNKNOWN=0]="RETENTION_UNKNOWN",t[t.RETENTION_RUNTIME=1]="RETENTION_RUNTIME",t[t.RETENTION_SOURCE=2]="RETENTION_SOURCE"})(pb||(pb={}));var yb;(function(t){t[t.TARGET_TYPE_UNKNOWN=0]="TARGET_TYPE_UNKNOWN",t[t.TARGET_TYPE_FILE=1]="TARGET_TYPE_FILE",t[t.TARGET_TYPE_EXTENSION_RANGE=2]="TARGET_TYPE_EXTENSION_RANGE",t[t.TARGET_TYPE_MESSAGE=3]="TARGET_TYPE_MESSAGE",t[t.TARGET_TYPE_FIELD=4]="TARGET_TYPE_FIELD",t[t.TARGET_TYPE_ONEOF=5]="TARGET_TYPE_ONEOF",t[t.TARGET_TYPE_ENUM=6]="TARGET_TYPE_ENUM",t[t.TARGET_TYPE_ENUM_ENTRY=7]="TARGET_TYPE_ENUM_ENTRY",t[t.TARGET_TYPE_SERVICE=8]="TARGET_TYPE_SERVICE",t[t.TARGET_TYPE_METHOD=9]="TARGET_TYPE_METHOD"})(yb||(yb={}));var vb;(function(t){t[t.IDEMPOTENCY_UNKNOWN=0]="IDEMPOTENCY_UNKNOWN",t[t.NO_SIDE_EFFECTS=1]="NO_SIDE_EFFECTS",t[t.IDEMPOTENT=2]="IDEMPOTENT"})(vb||(vb={}));var bb;(function(t){t[t.DEFAULT_SYMBOL_VISIBILITY_UNKNOWN=0]="DEFAULT_SYMBOL_VISIBILITY_UNKNOWN",t[t.EXPORT_ALL=1]="EXPORT_ALL",t[t.EXPORT_TOP_LEVEL=2]="EXPORT_TOP_LEVEL",t[t.LOCAL_ALL=3]="LOCAL_ALL",t[t.STRICT=4]="STRICT"})(bb||(bb={}));var Sb;(function(t){t[t.FIELD_PRESENCE_UNKNOWN=0]="FIELD_PRESENCE_UNKNOWN",t[t.EXPLICIT=1]="EXPLICIT",t[t.IMPLICIT=2]="IMPLICIT",t[t.LEGACY_REQUIRED=3]="LEGACY_REQUIRED"})(Sb||(Sb={}));var Ab;(function(t){t[t.ENUM_TYPE_UNKNOWN=0]="ENUM_TYPE_UNKNOWN",t[t.OPEN=1]="OPEN",t[t.CLOSED=2]="CLOSED"})(Ab||(Ab={}));var Eb;(function(t){t[t.REPEATED_FIELD_ENCODING_UNKNOWN=0]="REPEATED_FIELD_ENCODING_UNKNOWN",t[t.PACKED=1]="PACKED",t[t.EXPANDED=2]="EXPANDED"})(Eb||(Eb={}));var wb;(function(t){t[t.UTF8_VALIDATION_UNKNOWN=0]="UTF8_VALIDATION_UNKNOWN",t[t.VERIFY=2]="VERIFY",t[t.NONE=3]="NONE"})(wb||(wb={}));var Nb;(function(t){t[t.MESSAGE_ENCODING_UNKNOWN=0]="MESSAGE_ENCODING_UNKNOWN",t[t.LENGTH_PREFIXED=1]="LENGTH_PREFIXED",t[t.DELIMITED=2]="DELIMITED"})(Nb||(Nb={}));var xb;(function(t){t[t.JSON_FORMAT_UNKNOWN=0]="JSON_FORMAT_UNKNOWN",t[t.ALLOW=1]="ALLOW",t[t.LEGACY_BEST_EFFORT=2]="LEGACY_BEST_EFFORT"})(xb||(xb={}));var Tb;(function(t){t[t.ENFORCE_NAMING_STYLE_UNKNOWN=0]="ENFORCE_NAMING_STYLE_UNKNOWN",t[t.STYLE2024=1]="STYLE2024",t[t.STYLE_LEGACY=2]="STYLE_LEGACY"})(Tb||(Tb={}));var Cb;(function(t){t[t.NONE=0]="NONE",t[t.SET=1]="SET",t[t.ALIAS=2]="ALIAS"})(Cb||(Cb={}));var Ib;(function(t){t[t.EDITION_UNKNOWN=0]="EDITION_UNKNOWN",t[t.EDITION_LEGACY=900]="EDITION_LEGACY",t[t.EDITION_PROTO2=998]="EDITION_PROTO2",t[t.EDITION_PROTO3=999]="EDITION_PROTO3",t[t.EDITION_2023=1e3]="EDITION_2023",t[t.EDITION_2024=1001]="EDITION_2024",t[t.EDITION_1_TEST_ONLY=1]="EDITION_1_TEST_ONLY",t[t.EDITION_2_TEST_ONLY=2]="EDITION_2_TEST_ONLY",t[t.EDITION_99997_TEST_ONLY=99997]="EDITION_99997_TEST_ONLY",t[t.EDITION_99998_TEST_ONLY=99998]="EDITION_99998_TEST_ONLY",t[t.EDITION_99999_TEST_ONLY=99999]="EDITION_99999_TEST_ONLY",t[t.EDITION_MAX=2147483647]="EDITION_MAX"})(Ib||(Ib={}));var Rb;(function(t){t[t.VISIBILITY_UNSET=0]="VISIBILITY_UNSET",t[t.VISIBILITY_LOCAL=1]="VISIBILITY_LOCAL",t[t.VISIBILITY_EXPORT=2]="VISIBILITY_EXPORT"})(Rb||(Rb={}));const Db={readUnknownFields:!0};function yT(t){return t?Object.assign(Object.assign({},Db),t):Db}function On(t,e,n){const a=Vn(t,void 0,!1);return eE(a,new nm(e),yT(n),!1,e.byteLength),a.message}function eE(t,e,n,a,o){var l;const c=a?e.len:e.pos+o;let d,m;const h=(l=t.getUnknown())!==null&&l!==void 0?l:[];for(;e.pos<c&&([d,m]=e.tag(),!(a&&m==bt.EndGroup));){const p=t.findNumber(d);if(!p){const y=e.skip(m,d);n.readUnknownFields&&h.push({no:d,wireType:m,data:y});continue}tE(t,e,p,m,n)}if(a&&(m!=bt.EndGroup||d!==o))throw new Error("invalid end group tag");h.length>0&&t.setUnknown(h)}function tE(t,e,n,a,o){var l;switch(n.fieldKind){case"scalar":t.set(n,Vs(e,n.scalar));break;case"enum":const c=Vs(e,X.INT32);if(n.enum.open)t.set(n,c);else if(n.enum.values.some(m=>m.number===c))t.set(n,c);else if(o.readUnknownFields){const m=[];Sg(c,m);const h=(l=t.getUnknown())!==null&&l!==void 0?l:[];h.push({no:n.number,wireType:a,data:new Uint8Array(m)}),t.setUnknown(h)}break;case"message":t.set(n,fm(e,o,n,t.get(n)));break;case"list":bT(e,a,t.get(n),o);break;case"map":vT(e,t.get(n),o);break}}function vT(t,e,n){const a=e.field();let o,l;const c=t.uint32(),d=t.pos+c;for(;t.pos<d;){const[m]=t.tag();switch(m){case 1:o=Vs(t,a.mapKey);break;case 2:switch(a.mapKind){case"scalar":l=Vs(t,a.scalar);break;case"enum":l=t.int32();break;case"message":l=fm(t,n,a);break}break}}if(o===void 0&&(o=ba(a.mapKey,!1)),l===void 0)switch(a.mapKind){case"scalar":l=ba(a.scalar,!1);break;case"enum":l=a.enum.values[0].number;break;case"message":l=Vn(a.message,void 0,!1);break}e.set(o,l)}function bT(t,e,n,a){var o;const l=n.field();if(l.listKind==="message"){n.add(fm(t,a,l));return}const c=(o=l.scalar)!==null&&o!==void 0?o:X.INT32;if(!(e==bt.LengthDelimited&&c!=X.STRING&&c!=X.BYTES)){n.add(Vs(t,c));return}const m=t.uint32()+t.pos;for(;t.pos<m;)n.add(Vs(t,c))}function fm(t,e,n,a){const o=n.delimitedEncoding,l=a??Vn(n.message,void 0,!1);return eE(l,t,e,o,o?n.number:t.uint32()),l}function Vs(t,e){switch(e){case X.STRING:return t.string();case X.BOOL:return t.bool();case X.DOUBLE:return t.double();case X.FLOAT:return t.float();case X.INT32:return t.int32();case X.INT64:return t.int64();case X.UINT64:return t.uint64();case X.FIXED64:return t.fixed64();case X.BYTES:return t.bytes();case X.FIXED32:return t.fixed32();case X.SFIXED32:return t.sfixed32();case X.SFIXED64:return t.sfixed64();case X.SINT64:return t.sint64();case X.UINT32:return t.uint32();case X.SINT32:return t.sint32()}}function Jr(t,e){var n;const a=On(pT,lm(t));return a.messageType.forEach(um),a.dependency=(n=e?.map(l=>l.proto.name))!==null&&n!==void 0?n:[],JA(a,l=>e?.find(c=>c.proto.name===l)).getFile(a.name)}const ST=Jr("Ch9nb29nbGUvcHJvdG9idWYvdGltZXN0YW1wLnByb3RvEg9nb29nbGUucHJvdG9idWYiKwoJVGltZXN0YW1wEg8KB3NlY29uZHMYASABKAMSDQoFbmFub3MYAiABKAVChQEKE2NvbS5nb29nbGUucHJvdG9idWZCDlRpbWVzdGFtcFByb3RvUAFaMmdvb2dsZS5nb2xhbmcub3JnL3Byb3RvYnVmL3R5cGVzL2tub3duL3RpbWVzdGFtcHBi+AEBogIDR1BCqgIeR29vZ2xlLlByb3RvYnVmLldlbGxLbm93blR5cGVzYgZwcm90bzM");function AT(t){return new Date(ET(t))}function ET(t){return Number(t.seconds)*1e3+Math.round(t.nanos/1e6)}const wT=Jr("Ch5nb29nbGUvcHJvdG9idWYvZHVyYXRpb24ucHJvdG8SD2dvb2dsZS5wcm90b2J1ZiIqCghEdXJhdGlvbhIPCgdzZWNvbmRzGAEgASgDEg0KBW5hbm9zGAIgASgFQoMBChNjb20uZ29vZ2xlLnByb3RvYnVmQg1EdXJhdGlvblByb3RvUAFaMWdvb2dsZS5nb2xhbmcub3JnL3Byb3RvYnVmL3R5cGVzL2tub3duL2R1cmF0aW9ucGL4AQGiAgNHUEKqAh5Hb29nbGUuUHJvdG9idWYuV2VsbEtub3duVHlwZXNiBnByb3RvMw"),nE=Jr("Chlnb29nbGUvcHJvdG9idWYvYW55LnByb3RvEg9nb29nbGUucHJvdG9idWYiJgoDQW55EhAKCHR5cGVfdXJsGAEgASgJEg0KBXZhbHVlGAIgASgMQnYKE2NvbS5nb29nbGUucHJvdG9idWZCCEFueVByb3RvUAFaLGdvb2dsZS5nb2xhbmcub3JnL3Byb3RvYnVmL3R5cGVzL2tub3duL2FueXBiogIDR1BCqgIeR29vZ2xlLlByb3RvYnVmLldlbGxLbm93blR5cGVzYgZwcm90bzM"),NT=Ce(nE,0),xT=3,_b={writeUnknownFields:!0};function TT(t){return t?Object.assign(Object.assign({},_b),t):_b}function Ui(t,e,n){return Yc(new zA,TT(n),Vn(t,e)).finish()}function Yc(t,e,n){var a;for(const o of n.sortedFields){if(!n.isSet(o)){if(o.presence==xT)throw new Error(`cannot encode ${o} to binary: required field not set`);continue}rE(t,e,n,o)}if(e.writeUnknownFields)for(const{no:o,wireType:l,data:c}of(a=n.getUnknown())!==null&&a!==void 0?a:[])t.tag(o,l).raw(c);return t}function rE(t,e,n,a){var o;switch(a.fieldKind){case"scalar":case"enum":Zc(t,n.desc.typeName,a.name,(o=a.scalar)!==null&&o!==void 0?o:X.INT32,a.number,n.get(a));break;case"list":CT(t,e,a,n.get(a));break;case"message":iE(t,e,a,n.get(a));break;case"map":for(const[l,c]of n.get(a))IT(t,e,a,l,c);break}}function Zc(t,e,n,a,o,l){aE(t.tag(o,RT(a)),e,n,a,l)}function iE(t,e,n,a){n.delimitedEncoding?Yc(t.tag(n.number,bt.StartGroup),e,a).tag(n.number,bt.EndGroup):Yc(t.tag(n.number,bt.LengthDelimited).fork(),e,a).join()}function CT(t,e,n,a){var o;if(n.listKind=="message"){for(const c of a)iE(t,e,n,c);return}const l=(o=n.scalar)!==null&&o!==void 0?o:X.INT32;if(n.packed){if(!a.size)return;t.tag(n.number,bt.LengthDelimited).fork();for(const c of a)aE(t,n.parent.typeName,n.name,l,c);t.join();return}for(const c of a)Zc(t,n.parent.typeName,n.name,l,n.number,c)}function IT(t,e,n,a,o){var l;switch(t.tag(n.number,bt.LengthDelimited).fork(),Zc(t,n.parent.typeName,n.name,n.mapKey,1,a),n.mapKind){case"scalar":case"enum":Zc(t,n.parent.typeName,n.name,(l=n.scalar)!==null&&l!==void 0?l:X.INT32,2,o);break;case"message":Yc(t.tag(2,bt.LengthDelimited).fork(),e,o).join();break}t.join()}function aE(t,e,n,a,o){try{switch(a){case X.STRING:t.string(o);break;case X.BOOL:t.bool(o);break;case X.DOUBLE:t.double(o);break;case X.FLOAT:t.float(o);break;case X.INT32:t.int32(o);break;case X.INT64:t.int64(o);break;case X.UINT64:t.uint64(o);break;case X.FIXED64:t.fixed64(o);break;case X.BYTES:t.bytes(o);break;case X.FIXED32:t.fixed32(o);break;case X.SFIXED32:t.sfixed32(o);break;case X.SFIXED64:t.sfixed64(o);break;case X.SINT64:t.sint64(o);break;case X.UINT32:t.uint32(o);break;case X.SINT32:t.sint32(o);break}}catch(l){throw l instanceof Error?new Error(`cannot encode field ${e}.${n} to binary: ${l.message}`):l}}function RT(t){switch(t){case X.BYTES:case X.STRING:return bt.LengthDelimited;case X.DOUBLE:case X.FIXED64:case X.SFIXED64:return bt.Bit64;case X.FIXED32:case X.SFIXED32:case X.FLOAT:return bt.Bit32;default:return bt.Varint}}function DT(t,e,n){let a=!1;return n||(n=be(NT),a=!0),n.value=Ui(t,e),n.typeUrl=OT(e.$typeName),a?n:void 0}function _T(t,e){if(t.typeUrl==="")return!1;const n=typeof e=="string"?e:e.typeName,a=sE(t.typeUrl);return n===a}function VT(t,e){if(t.typeUrl==="")return;const n=e.kind=="message"?e:e.getMessage(sE(t.typeUrl));if(!(!n||!_T(t,n)))return On(n,t.value)}function OT(t){return`type.googleapis.com/${t}`}function sE(t){const e=t.lastIndexOf("/"),n=e>=0?t.substring(e+1):t;if(!n.length)throw new Error(`invalid type url: ${t}`);return n}const dm=Jr("Chxnb29nbGUvcHJvdG9idWYvc3RydWN0LnByb3RvEg9nb29nbGUucHJvdG9idWYihAEKBlN0cnVjdBIzCgZmaWVsZHMYASADKAsyIy5nb29nbGUucHJvdG9idWYuU3RydWN0LkZpZWxkc0VudHJ5GkUKC0ZpZWxkc0VudHJ5EgsKA2tleRgBIAEoCRIlCgV2YWx1ZRgCIAEoCzIWLmdvb2dsZS5wcm90b2J1Zi5WYWx1ZToCOAEi6gEKBVZhbHVlEjAKCm51bGxfdmFsdWUYASABKA4yGi5nb29nbGUucHJvdG9idWYuTnVsbFZhbHVlSAASFgoMbnVtYmVyX3ZhbHVlGAIgASgBSAASFgoMc3RyaW5nX3ZhbHVlGAMgASgJSAASFAoKYm9vbF92YWx1ZRgEIAEoCEgAEi8KDHN0cnVjdF92YWx1ZRgFIAEoCzIXLmdvb2dsZS5wcm90b2J1Zi5TdHJ1Y3RIABIwCgpsaXN0X3ZhbHVlGAYgASgLMhouZ29vZ2xlLnByb3RvYnVmLkxpc3RWYWx1ZUgAQgYKBGtpbmQiMwoJTGlzdFZhbHVlEiYKBnZhbHVlcxgBIAMoCzIWLmdvb2dsZS5wcm90b2J1Zi5WYWx1ZSobCglOdWxsVmFsdWUSDgoKTlVMTF9WQUxVRRAAQn8KE2NvbS5nb29nbGUucHJvdG9idWZCC1N0cnVjdFByb3RvUAFaL2dvb2dsZS5nb2xhbmcub3JnL3Byb3RvYnVmL3R5cGVzL2tub3duL3N0cnVjdHBi+AEBogIDR1BCqgIeR29vZ2xlLlByb3RvYnVmLldlbGxLbm93blR5cGVzYgZwcm90bzM"),MT=Ce(dm,0),oE=Ce(dm,1),BT=Ce(dm,2);var xg;(function(t){t[t.NULL_VALUE=0]="NULL_VALUE"})(xg||(xg={}));const LT=Jr("Ch5nb29nbGUvcHJvdG9idWYvd3JhcHBlcnMucHJvdG8SD2dvb2dsZS5wcm90b2J1ZiIcCgtEb3VibGVWYWx1ZRINCgV2YWx1ZRgBIAEoASIbCgpGbG9hdFZhbHVlEg0KBXZhbHVlGAEgASgCIhsKCkludDY0VmFsdWUSDQoFdmFsdWUYASABKAMiHAoLVUludDY0VmFsdWUSDQoFdmFsdWUYASABKAQiGwoKSW50MzJWYWx1ZRINCgV2YWx1ZRgBIAEoBSIcCgtVSW50MzJWYWx1ZRINCgV2YWx1ZRgBIAEoDSIaCglCb29sVmFsdWUSDQoFdmFsdWUYASABKAgiHAoLU3RyaW5nVmFsdWUSDQoFdmFsdWUYASABKAkiGwoKQnl0ZXNWYWx1ZRINCgV2YWx1ZRgBIAEoDEKDAQoTY29tLmdvb2dsZS5wcm90b2J1ZkINV3JhcHBlcnNQcm90b1ABWjFnb29nbGUuZ29sYW5nLm9yZy9wcm90b2J1Zi90eXBlcy9rbm93bi93cmFwcGVyc3Bi+AEBogIDR1BCqgIeR29vZ2xlLlByb3RvYnVmLldlbGxLbm93blR5cGVzYgZwcm90bzM");function zT(t,e){lE(e,t);const n=YT(t.$unknown,e),[a,o,l]=sf(e);for(const c of n)tE(a,new nm(c.data),o,c.wireType,{readUnknownFields:!0});return l()}function UT(t,e,n){var a;lE(e,t);const o=((a=t.$unknown)!==null&&a!==void 0?a:[]).filter(h=>h.no!==e.number),[l,c]=sf(e,n),d=new zA;rE(d,{writeUnknownFields:!0},l,c);const m=new nm(d.finish());for(;m.pos<m.len;){const[h,p]=m.tag(),y=m.skip(p,h);o.push({no:h,wireType:p,data:y})}t.$unknown=o}function YT(t,e){if(t===void 0)return[];if(e.fieldKind==="enum"||e.fieldKind==="scalar"){for(let n=t.length-1;n>=0;--n)if(t[n].no==e.number)return[t[n]];return[]}return t.filter(n=>n.no===e.number)}function sf(t,e){const n=t.typeName,a=Object.assign(Object.assign({},t),{kind:"field",parent:t.extendee,localName:n}),o=Object.assign(Object.assign({},t.extendee),{fields:[a],members:[a],oneofs:[]}),l=be(o,e!==void 0?{[n]:e}:void 0);return[Vn(o,l),a,()=>{const c=l[n];if(c===void 0){const d=t.message;return Vl(d)?ba(d.fields[0].scalar,d.fields[0].longAsString):be(d)}return c}]}function lE(t,e){if(t.extendee.typeName!=e.$typeName)throw new Error(`extension ${t.typeName} can only be applied to message ${t.extendee.typeName}`)}const ZT=3,GT=2,Vb={alwaysEmitImplicit:!1,enumAsInteger:!1,useProtoFieldName:!1};function kT(t){return t?Object.assign(Object.assign({},Vb),t):Vb}function XT(t,e,n){return Ol(Vn(t,e),kT(n))}function WT(t,e,n){var a;const o=XT(t,e,n);return JSON.stringify(o,null,(a=n?.prettySpaces)!==null&&a!==void 0?a:0)}function Ol(t,e){var n;const a=JT(t,e);if(a!==void 0)return a;const o={};for(const l of t.sortedFields){if(!t.isSet(l)){if(l.presence==ZT)throw new Error(`cannot encode ${l} to JSON: required field not set`);if(!e.alwaysEmitImplicit||l.presence!==GT)continue}const c=Ob(l,t.get(l),e);c!==void 0&&(o[FT(l,e)]=c)}if(e.registry){const l=new Set;for(const{no:c}of(n=t.getUnknown())!==null&&n!==void 0?n:[])if(!l.has(c)){l.add(c);const d=e.registry.getExtensionFor(t.desc,c);if(!d)continue;const m=zT(t.message,d),[h,p]=sf(d,m),y=Ob(p,h.get(p),e);y!==void 0&&(o[d.jsonName]=y)}}return o}function Ob(t,e,n){switch(t.fieldKind){case"scalar":return of(t,e);case"message":return Ol(e,n);case"enum":return hm(t.enum,e,n.enumAsInteger);case"list":return HT(e,n);case"map":return KT(e,n)}}function KT(t,e){const n=t.field(),a={};switch(n.mapKind){case"scalar":for(const[o,l]of t)a[o]=of(n,l);break;case"message":for(const[o,l]of t)a[o]=Ol(l,e);break;case"enum":for(const[o,l]of t)a[o]=hm(n.enum,l,e.enumAsInteger);break}return e.alwaysEmitImplicit||t.size>0?a:void 0}function HT(t,e){const n=t.field(),a=[];switch(n.listKind){case"scalar":for(const o of t)a.push(of(n,o));break;case"enum":for(const o of t)a.push(hm(n.enum,o,e.enumAsInteger));break;case"message":for(const o of t)a.push(Ol(o,e));break}return e.alwaysEmitImplicit||a.length>0?a:void 0}function hm(t,e,n){var a;if(typeof e!="number")throw new Error(`cannot encode ${t} to JSON: expected number, got ${_t(e)}`);if(t.typeName=="google.protobuf.NullValue")return null;if(n)return e;const o=t.value[e];return(a=o?.name)!==null&&a!==void 0?a:e}function of(t,e){var n,a,o,l,c,d;switch(t.scalar){case X.INT32:case X.SFIXED32:case X.SINT32:case X.FIXED32:case X.UINT32:if(typeof e!="number")throw new Error(`cannot encode ${t} to JSON: ${(n=ca(t,e))===null||n===void 0?void 0:n.message}`);return e;case X.FLOAT:case X.DOUBLE:if(typeof e!="number")throw new Error(`cannot encode ${t} to JSON: ${(a=ca(t,e))===null||a===void 0?void 0:a.message}`);return Number.isNaN(e)?"NaN":e===Number.POSITIVE_INFINITY?"Infinity":e===Number.NEGATIVE_INFINITY?"-Infinity":e;case X.STRING:if(typeof e!="string")throw new Error(`cannot encode ${t} to JSON: ${(o=ca(t,e))===null||o===void 0?void 0:o.message}`);return e;case X.BOOL:if(typeof e!="boolean")throw new Error(`cannot encode ${t} to JSON: ${(l=ca(t,e))===null||l===void 0?void 0:l.message}`);return e;case X.UINT64:case X.FIXED64:case X.INT64:case X.SFIXED64:case X.SINT64:if(typeof e!="bigint"&&typeof e!="string")throw new Error(`cannot encode ${t} to JSON: ${(c=ca(t,e))===null||c===void 0?void 0:c.message}`);return e.toString();case X.BYTES:if(e instanceof Uint8Array)return L2(e);throw new Error(`cannot encode ${t} to JSON: ${(d=ca(t,e))===null||d===void 0?void 0:d.message}`)}}function FT(t,e){return e.useProtoFieldName?t.name:t.jsonName}function JT(t,e){if(t.desc.typeName.startsWith("google.protobuf."))switch(t.desc.typeName){case"google.protobuf.Any":return jT(t.message,e);case"google.protobuf.Timestamp":return QT(t.message);case"google.protobuf.Duration":return $T(t.message);case"google.protobuf.FieldMask":return PT(t.message);case"google.protobuf.Struct":return uE(t.message);case"google.protobuf.Value":return gm(t.message);case"google.protobuf.ListValue":return cE(t.message);default:if(Vl(t.desc)){const n=t.desc.fields[0];return of(n,t.get(n))}return}}function jT(t,e){if(t.typeUrl==="")return{};const{registry:n}=e;let a,o;if(n&&(a=VT(t,n),a&&(o=n.getMessage(a.$typeName))),!o||!a)throw new Error(`cannot encode message ${t.$typeName} to JSON: "${t.typeUrl}" is not in the type registry`);let l=Ol(Vn(o,a),e);return(o.typeName.startsWith("google.protobuf.")||l===null||Array.isArray(l)||typeof l!="object")&&(l={value:l}),l["@type"]=t.typeUrl,l}function $T(t){const e=Number(t.seconds),n=t.nanos;if(e>315576e6||e<-315576e6)throw new Error(`cannot encode message ${t.$typeName} to JSON: value out of range`);if(e>0&&n<0||e<0&&n>0)throw new Error(`cannot encode message ${t.$typeName} to JSON: nanos sign must match seconds sign`);let a=t.seconds.toString();if(n!==0){let o=Math.abs(n).toString();o="0".repeat(9-o.length)+o,o.substring(3)==="000000"?o=o.substring(0,3):o.substring(6)==="000"&&(o=o.substring(0,6)),a+="."+o,n<0&&e==0&&(a="-"+a)}return a+"s"}function PT(t){return t.paths.map(e=>{if(e.match(/_[0-9]?_/g)||e.match(/[A-Z]/g))throw new Error(`cannot encode message ${t.$typeName} to JSON: lowerCamelCase of path name "`+e+'" is irreversible');return fl(e)}).join(",")}function uE(t){const e={};for(const[n,a]of Object.entries(t.fields))e[n]=gm(a);return e}function gm(t){switch(t.kind.case){case"nullValue":return null;case"numberValue":if(!Number.isFinite(t.kind.value))throw new Error(`${t.$typeName} cannot be NaN or Infinity`);return t.kind.value;case"boolValue":return t.kind.value;case"stringValue":return t.kind.value;case"structValue":return uE(t.kind.value);case"listValue":return cE(t.kind.value);default:throw new Error(`${t.$typeName} must have a value`)}}function cE(t){return t.values.map(gm)}function QT(t){const e=Number(t.seconds)*1e3;if(e<Date.parse("0001-01-01T00:00:00Z")||e>Date.parse("9999-12-31T23:59:59Z"))throw new Error(`cannot encode message ${t.$typeName} to JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive`);if(t.nanos<0)throw new Error(`cannot encode message ${t.$typeName} to JSON: nanos must not be negative`);if(t.nanos>999999999)throw new Error(`cannot encode message ${t.$typeName} to JSON: nanos must not be greater than 99999999`);let n="Z";if(t.nanos>0){const a=(t.nanos+1e9).toString().substring(1);a.substring(3)==="000000"?n="."+a.substring(0,3)+"Z":a.substring(6)==="000"?n="."+a.substring(0,6)+"Z":n="."+a+"Z"}return new Date(e).toISOString().replace(".000Z",n)}const Mb={ignoreUnknownFields:!1};function qT(t){return t?Object.assign(Object.assign({},Mb),t):Mb}function eC(t,e,n){return tC(t,lC(e,t.typeName),n)}function tC(t,e,n){const a=Vn(t);try{Os(a,e,qT(n))}catch(o){throw R2(o)?new Error(`cannot decode ${o.field()} from JSON: ${o.message}`,{cause:o}):o}return a.message}function Os(t,e,n){var a;if(uC(t,e,n))return;if(e==null||Array.isArray(e)||typeof e!="object")throw new Error(`cannot decode ${t.desc} from JSON: ${_t(e)}`);const o=new Map,l=new Map;for(const c of t.desc.fields)l.set(c.name,c).set(c.jsonName,c);for(const[c,d]of Object.entries(e)){const m=l.get(c);if(m){if(m.oneof){if(d===null&&m.fieldKind=="scalar")continue;const h=o.get(m.oneof);if(h!==void 0)throw new sn(m.oneof,`oneof set multiple times by ${h.name} and ${m.name}`);o.set(m.oneof,m)}Bb(t,m,d,n)}else{let h;if(c.startsWith("[")&&c.endsWith("]")&&(h=(a=n.registry)===null||a===void 0?void 0:a.getExtension(c.substring(1,c.length-1)))&&h.extendee.typeName===t.desc.typeName){const[p,y,v]=sf(h);Bb(p,y,d,n),UT(t.message,h,v())}if(!h&&!n.ignoreUnknownFields)throw new Error(`cannot decode ${t.desc} from JSON: key "${c}" is unknown`)}}}function Bb(t,e,n,a){switch(e.fieldKind){case"scalar":sC(t,e,n);break;case"enum":aC(t,e,n,a);break;case"message":iC(t,e,n,a);break;case"list":rC(t.get(e),n,a);break;case"map":nC(t.get(e),n,a);break}}function nC(t,e,n){if(e===null)return;const a=t.field();if(typeof e!="object"||Array.isArray(e))throw new sn(a,"expected object, got "+_t(e));for(const[o,l]of Object.entries(e)){if(l===null)throw new sn(a,"map value must not be null");let c;switch(a.mapKind){case"message":const m=Vn(a.message);Os(m,l,n),c=m;break;case"enum":if(c=mm(a.enum,l,n.ignoreUnknownFields,!0),c===lf)return;break;case"scalar":c=cf(a,l,!0);break}const d=oC(a.mapKey,o);t.set(d,c)}}function rC(t,e,n){if(e===null)return;const a=t.field();if(!Array.isArray(e))throw new sn(a,"expected Array, got "+_t(e));for(const o of e){if(o===null)throw new sn(a,"list item must not be null");switch(a.listKind){case"message":const l=Vn(a.message);Os(l,o,n),t.add(l);break;case"enum":const c=mm(a.enum,o,n.ignoreUnknownFields,!0);c!==lf&&t.add(c);break;case"scalar":t.add(cf(a,o,!0));break}}}function iC(t,e,n,a){if(n===null&&e.message.typeName!="google.protobuf.Value"){t.clear(e);return}const o=t.isSet(e)?t.get(e):Vn(e.message);Os(o,n,a),t.set(e,o)}function aC(t,e,n,a){const o=mm(e.enum,n,a.ignoreUnknownFields,!1);o===uf?t.clear(e):o!==lf&&t.set(e,o)}function sC(t,e,n){const a=cf(e,n,!1);a===uf?t.clear(e):t.set(e,a)}const lf=Symbol();function mm(t,e,n,a){if(e===null)return t.typeName=="google.protobuf.NullValue"?0:a?t.values[0].number:uf;switch(typeof e){case"number":if(Number.isInteger(e))return e;break;case"string":const o=t.values.find(l=>l.name===e);if(o!==void 0)return o.number;if(n)return lf;break}throw new Error(`cannot decode ${t} from JSON: ${_t(e)}`)}const uf=Symbol();function cf(t,e,n){if(e===null)return n?ba(t.scalar,!1):uf;switch(t.scalar){case X.DOUBLE:case X.FLOAT:if(e==="NaN")return NaN;if(e==="Infinity")return Number.POSITIVE_INFINITY;if(e==="-Infinity")return Number.NEGATIVE_INFINITY;if(typeof e=="number"){if(Number.isNaN(e))throw new sn(t,"unexpected NaN number");if(!Number.isFinite(e))throw new sn(t,"unexpected infinite number");break}if(typeof e=="string"){if(e===""||e.trim().length!==e.length)break;const a=Number(e);if(!Number.isFinite(a))break;return a}break;case X.INT32:case X.FIXED32:case X.SFIXED32:case X.SINT32:case X.UINT32:return fE(e);case X.BYTES:if(typeof e=="string"){if(e==="")return new Uint8Array(0);try{return lm(e)}catch(a){const o=a instanceof Error?a.message:String(a);throw new sn(t,o)}}break}return e}function oC(t,e){switch(t){case X.BOOL:switch(e){case"true":return!0;case"false":return!1}return e;case X.INT32:case X.FIXED32:case X.UINT32:case X.SFIXED32:case X.SINT32:return fE(e);default:return e}}function fE(t){if(typeof t=="string"){if(t===""||t.trim().length!==t.length)return t;const e=Number(t);return Number.isNaN(e)?t:e}return t}function lC(t,e){try{return JSON.parse(t)}catch(n){const a=n instanceof Error?n.message:String(n);throw new Error(`cannot decode message ${e} from JSON: ${a}`,{cause:n})}}function uC(t,e,n){if(!t.desc.typeName.startsWith("google.protobuf."))return!1;switch(t.desc.typeName){case"google.protobuf.Any":return cC(t.message,e,n),!0;case"google.protobuf.Timestamp":return fC(t.message,e),!0;case"google.protobuf.Duration":return dC(t.message,e),!0;case"google.protobuf.FieldMask":return hC(t.message,e),!0;case"google.protobuf.Struct":return dE(t.message,e),!0;case"google.protobuf.Value":return pm(t.message,e),!0;case"google.protobuf.ListValue":return hE(t.message,e),!0;default:if(Vl(t.desc)){const a=t.desc.fields[0];return e===null?t.clear(a):t.set(a,cf(a,e,!0)),!0}return!1}}function cC(t,e,n){var a;if(e===null||Array.isArray(e)||typeof e!="object")throw new Error(`cannot decode message ${t.$typeName} from JSON: expected object but got ${_t(e)}`);if(Object.keys(e).length==0)return;const o=e["@type"];if(typeof o!="string"||o=="")throw new Error(`cannot decode message ${t.$typeName} from JSON: "@type" is empty`);const l=o.includes("/")?o.substring(o.lastIndexOf("/")+1):o;if(!l.length)throw new Error(`cannot decode message ${t.$typeName} from JSON: "@type" is invalid`);const c=(a=n.registry)===null||a===void 0?void 0:a.getMessage(l);if(!c)throw new Error(`cannot decode message ${t.$typeName} from JSON: ${o} is not in the type registry`);const d=Vn(c);if(l.startsWith("google.protobuf.")&&Object.prototype.hasOwnProperty.call(e,"value")){const m=e.value;Os(d,m,n)}else{const m=Object.assign({},e);delete m["@type"],Os(d,m,n)}DT(d.desc,d.message,t)}function fC(t,e){if(typeof e!="string")throw new Error(`cannot decode message ${t.$typeName} from JSON: ${_t(e)}`);const n=e.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:\.([0-9]{1,9}))?(?:Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!n)throw new Error(`cannot decode message ${t.$typeName} from JSON: invalid RFC 3339 string`);const a=Date.parse(n[1]+"-"+n[2]+"-"+n[3]+"T"+n[4]+":"+n[5]+":"+n[6]+(n[8]?n[8]:"Z"));if(Number.isNaN(a))throw new Error(`cannot decode message ${t.$typeName} from JSON: invalid RFC 3339 string`);if(a<Date.parse("0001-01-01T00:00:00Z")||a>Date.parse("9999-12-31T23:59:59Z"))throw new Error(`cannot decode message ${t.$typeName} from JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive`);t.seconds=ct.parse(a/1e3),t.nanos=0,n[7]&&(t.nanos=parseInt("1"+n[7]+"0".repeat(9-n[7].length))-1e9)}function dC(t,e){if(typeof e!="string")throw new Error(`cannot decode message ${t.$typeName} from JSON: ${_t(e)}`);const n=e.match(/^(-?[0-9]+)(?:\.([0-9]+))?s/);if(n===null)throw new Error(`cannot decode message ${t.$typeName} from JSON: ${_t(e)}`);const a=Number(n[1]);if(a>315576e6||a<-315576e6)throw new Error(`cannot decode message ${t.$typeName} from JSON: ${_t(e)}`);if(t.seconds=ct.parse(a),typeof n[2]!="string")return;const o=n[2]+"0".repeat(9-n[2].length);t.nanos=parseInt(o),(a<0||Object.is(a,-0))&&(t.nanos=-t.nanos)}function hC(t,e){if(typeof e!="string")throw new Error(`cannot decode message ${t.$typeName} from JSON: ${_t(e)}`);if(e==="")return;function n(a){if(a.includes("_"))throw new Error(`cannot decode message ${t.$typeName} from JSON: path names must be lowerCamelCase`);const o=a.replace(/[A-Z]/g,l=>"_"+l.toLowerCase());return o[0]==="_"?o.substring(1):o}t.paths=e.split(",").map(n)}function dE(t,e){if(typeof e!="object"||e==null||Array.isArray(e))throw new Error(`cannot decode message ${t.$typeName} from JSON ${_t(e)}`);for(const[n,a]of Object.entries(e)){const o=be(oE);pm(o,a),t.fields[n]=o}}function pm(t,e){switch(typeof e){case"number":t.kind={case:"numberValue",value:e};break;case"string":t.kind={case:"stringValue",value:e};break;case"boolean":t.kind={case:"boolValue",value:e};break;case"object":if(e===null)t.kind={case:"nullValue",value:xg.NULL_VALUE};else if(Array.isArray(e)){const n=be(BT);hE(n,e),t.kind={case:"listValue",value:n}}else{const n=be(MT);dE(n,e),t.kind={case:"structValue",value:n}}break;default:throw new Error(`cannot decode message ${t.$typeName} from JSON ${_t(e)}`)}return t}function hE(t,e){if(!Array.isArray(e))throw new Error(`cannot decode message ${t.$typeName} from JSON ${_t(e)}`);for(const n of e){const a=be(oE);pm(a,n),t.values.push(a)}}function Lb(t){const e=Be[t];return typeof e!="string"?t.toString():e[0].toLowerCase()+e.substring(1).replace(/[A-Z]/g,n=>"_"+n.toLowerCase())}class Pe extends Error{constructor(e,n=Be.Unknown,a,o,l){super(gC(e,n)),this.name="ConnectError",Object.setPrototypeOf(this,new.target.prototype),this.rawMessage=e,this.code=n,this.metadata=new Headers(a??{}),this.details=o??[],this.cause=l}static from(e,n=Be.Unknown){return e instanceof Pe?e:e instanceof Error?e.name=="AbortError"||e.name=="TimeoutError"?new Pe(e.message,Be.Canceled):new Pe(e.message,n,void 0,void 0,e):new Pe(String(e),n,void 0,void 0,e)}static[Symbol.hasInstance](e){return e instanceof Error?Object.getPrototypeOf(e)===Pe.prototype?!0:e.name==="ConnectError"&&"code"in e&&typeof e.code=="number"&&"metadata"in e&&"details"in e&&Array.isArray(e.details)&&"rawMessage"in e&&typeof e.rawMessage=="string"&&"cause"in e:!1}findDetails(e){const n=e.kind==="message"?{getMessage:o=>o===e.typeName?e:void 0}:e,a=[];for(const o of this.details){if("desc"in o){n.getMessage(o.desc.typeName)&&a.push(be(o.desc,o.value));continue}const l=n.getMessage(o.type);if(l)try{a.push(On(l,o.value))}catch{}}return a}}function gC(t,e){return t.length?`[${Lb(e)}] ${t}`:`[${Lb(e)}]`}function mC(t,e,n){try{const a=lm(t);return e?On(e,a,n):a}catch(a){throw Pe.from(a,Be.DataLoss)}}function pC(t,e){const n={};for(const a of t.methods){const o=e(a);o!=null&&(n[a.localName]=o)}return n}const zb=1;function yC(t,e,n=!1){if(e>t){let a=`message size is larger than configured readMaxBytes ${t}`;throw n&&(a=`message size ${e} is larger than configured readMaxBytes ${t}`),new Pe(a,Be.ResourceExhausted)}}function vC(t){return new bC(t)}class bC{constructor(e){this.readMaxBytes=e,this.header=new Uint8Array(5),this.headerView=new DataView(this.header.buffer),this.buf=[]}get byteLength(){return this.buf.reduce((e,n)=>e+n.byteLength,0)}decode(e){this.buf.push(e);const n=[];for(;;){let a=this.pop();if(!a)break;n.push(a)}return n}pop(){if(!(!this.env&&(this.env=this.head(),!this.env))&&this.cons(this.env.data)){const e=this.env;return this.env=void 0,e}}head(){if(!this.cons(this.header))return;const e=this.headerView.getUint8(0),n=this.headerView.getUint32(1);return yC(this.readMaxBytes,n,!0),{flags:e,data:new Uint8Array(n)}}cons(e){const n=e.byteLength;if(this.byteLength<n)return!1;let a=0;for(;a<n;){const o=this.buf.shift();o.byteLength>n-a?(e.set(o.subarray(0,n-a),a),this.buf.unshift(o.subarray(n-a)),a+=n-a):(e.set(o,a),a+=o.byteLength)}return!0}}function Ub(t){let e;const n=vC(4294967295);return new ReadableStream({start(){e=t.getReader()},async pull(a){let o=!1;for(;!o;){const l=await e.read();if(l.done)n.byteLength>0&&a.error(new Pe("protocol error: incomplete envelope",Be.InvalidArgument)),a.close();else for(const c of n.decode(l.value))a.enqueue(c),o=!0}}})}function Yb(t,e){const n=new Uint8Array(e.length+5);n.set(e,5);const a=new DataView(n.buffer,n.byteOffset,n.byteLength);return a.setUint8(0,t),a.setUint32(1,e.length),n}var SC=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof __values=="function"?__values(t):t[Symbol.iterator](),n={},a("next"),a("throw"),a("return"),n[Symbol.asyncIterator]=function(){return this},n);function a(l){n[l]=t[l]&&function(c){return new Promise(function(d,m){c=t[l](c),o(d,m,c.done,c.value)})}}function o(l,c,d,m){Promise.resolve(m).then(function(h){l({value:h,done:d})},c)}},gl=function(t){return this instanceof gl?(this.v=t,this):new gl(t)},AC=function(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=n.apply(t,e||[]),o,l=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",c),o[Symbol.asyncIterator]=function(){return this},o;function c(S){return function(E){return Promise.resolve(E).then(S,y)}}function d(S,E){a[S]&&(o[S]=function(A){return new Promise(function(R,x){l.push([S,A,R,x])>1||m(S,A)})},E&&(o[S]=E(o[S])))}function m(S,E){try{h(a[S](E))}catch(A){v(l[0][3],A)}}function h(S){S.value instanceof gl?Promise.resolve(S.value.v).then(p,y):v(l[0][2],S)}function p(S){m("next",S)}function y(S){m("throw",S)}function v(S,E){S(E),l.shift(),l.length&&m(l[0][0],l[0][1])}},EC=function(t){var e,n;return e={},a("next"),a("throw",function(o){throw o}),a("return"),e[Symbol.iterator]=function(){return this},e;function a(o,l){e[o]=t[o]?function(c){return(n=!n)?{value:gl(t[o](c)),done:!1}:l?l(c):c}:l}};function wC(t){return AC(this,arguments,function*(){yield gl(yield*EC(SC(t)))})}var gE=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof __values=="function"?__values(t):t[Symbol.iterator](),n={},a("next"),a("throw"),a("return"),n[Symbol.asyncIterator]=function(){return this},n);function a(l){n[l]=t[l]&&function(c){return new Promise(function(d,m){c=t[l](c),o(d,m,c.done,c.value)})}}function o(l,c,d,m){Promise.resolve(m).then(function(h){l({value:h,done:d})},c)}},Ms=function(t){return this instanceof Ms?(this.v=t,this):new Ms(t)},NC=function(t){var e,n;return e={},a("next"),a("throw",function(o){throw o}),a("return"),e[Symbol.iterator]=function(){return this},e;function a(o,l){e[o]=t[o]?function(c){return(n=!n)?{value:Ms(t[o](c)),done:!1}:l?l(c):c}:l}},xC=function(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=n.apply(t,e||[]),o,l=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",c),o[Symbol.asyncIterator]=function(){return this},o;function c(S){return function(E){return Promise.resolve(E).then(S,y)}}function d(S,E){a[S]&&(o[S]=function(A){return new Promise(function(R,x){l.push([S,A,R,x])>1||m(S,A)})},E&&(o[S]=E(o[S])))}function m(S,E){try{h(a[S](E))}catch(A){v(l[0][3],A)}}function h(S){S.value instanceof Ms?Promise.resolve(S.value.v).then(p,y):v(l[0][2],S)}function p(S){m("next",S)}function y(S){m("throw",S)}function v(S,E){S(E),l.shift(),l.length&&m(l[0][0],l[0][1])}};function TC(t,e){return pC(t,n=>{switch(n.methodKind){case"unary":return CC(e,n);case"server_streaming":return IC(e,n);case"client_streaming":return RC(e,n);case"bidi_streaming":return DC(e,n);default:return null}})}function CC(t,e){return async(n,a)=>{var o,l;const c=await t.unary(e,a?.signal,a?.timeoutMs,a?.headers,n,a?.contextValues);return(o=a?.onHeader)===null||o===void 0||o.call(a,c.header),(l=a?.onTrailer)===null||l===void 0||l.call(a,c.trailer),c.message}}function IC(t,e){return(n,a)=>mE(t.stream(e,a?.signal,a?.timeoutMs,a?.headers,wC([n]),a?.contextValues),a)}function RC(t,e){return async(n,a)=>{var o,l,c,d,m,h;const p=await t.stream(e,a?.signal,a?.timeoutMs,a?.headers,n,a?.contextValues);(m=a?.onHeader)===null||m===void 0||m.call(a,p.header);let y,v=0;try{for(var S=!0,E=gE(p.message),A;A=await E.next(),o=A.done,!o;S=!0)d=A.value,S=!1,y=d,v++}catch(R){l={error:R}}finally{try{!S&&!o&&(c=E.return)&&await c.call(E)}finally{if(l)throw l.error}}if(!y)throw new Pe("protocol error: missing response message",Be.Unimplemented);if(v>1)throw new Pe("protocol error: received extra messages for client streaming method",Be.Unimplemented);return(h=a?.onTrailer)===null||h===void 0||h.call(a,p.trailer),y}}function DC(t,e){return(n,a)=>mE(t.stream(e,a?.signal,a?.timeoutMs,a?.headers,n,a?.contextValues),a)}function mE(t,e){const n=(function(){return xC(this,arguments,function*(){var a,o;const l=yield Ms(t);(a=e?.onHeader)===null||a===void 0||a.call(e,l.header),yield Ms(yield*NC(gE(l.message))),(o=e?.onTrailer)===null||o===void 0||o.call(e,l.trailer)})})()[Symbol.asyncIterator]();return{[Symbol.asyncIterator]:()=>({next:()=>n.next()})}}function _C(...t){const e=new AbortController,n=t.filter(o=>o!==void 0).concat(e.signal);for(const o of n){if(o.aborted){a.apply(o);break}o.addEventListener("abort",a)}function a(){e.signal.aborted||e.abort(pE(this));for(const o of n)o.removeEventListener("abort",a)}return e}function VC(t){const e=new AbortController,n=()=>{e.abort(new Pe("the operation timed out",Be.DeadlineExceeded))};let a;return t!==void 0&&(t<=0?n():a=setTimeout(n,t)),{signal:e.signal,cleanup:()=>clearTimeout(a)}}function pE(t){if(!t.aborted)return;if(t.reason!==void 0)return t.reason;const e=new Error("This operation was aborted");return e.name="AbortError",e}function Zb(){return{get(t){return t.id in this?this[t.id]:t.defaultValue},set(t,e){return this[t.id]=e,this},delete(t){return delete this[t.id],this}}}const rg=128;function Gb(t){const e=new Headers,n=new TextDecoder().decode(t).split(`\r
`);for(const a of n){if(a==="")continue;const o=a.indexOf(":");if(o>0){const l=a.substring(0,o).trim(),c=a.substring(o+1).trim();e.append(l,c)}}return e}const OC="Content-Type",MC="Grpc-Timeout",Bs="Grpc-Status",yE="Grpc-Message",BC="Grpc-Status-Details-Bin",LC="User-Agent",kb="X-User-Agent",zC="X-Grpc-Web",UC="application/grpc-web+proto",YC="application/grpc-web+json";function ZC(t,e,...n){if(n.length>0)throw new Error;return t.services[e]}const GC=Jr("CgxzdGF0dXMucHJvdG8SCmdvb2dsZS5ycGMiTgoGU3RhdHVzEgwKBGNvZGUYASABKAUSDwoHbWVzc2FnZRgCIAEoCRIlCgdkZXRhaWxzGAMgAygLMhQuZ29vZ2xlLnByb3RvYnVmLkFueUJeCg5jb20uZ29vZ2xlLnJwY0ILU3RhdHVzUHJvdG9QAVo3Z29vZ2xlLmdvbGFuZy5vcmcvZ2VucHJvdG8vZ29vZ2xlYXBpcy9ycGMvc3RhdHVzO3N0YXR1c6ICA1JQQ2IGcHJvdG8z",[nE]),kC=Ce(GC,0),XC="0";function vE(t){var e;const n=t.get(BC);if(n!=null){const o=mC(n,kC);if(o.code==0)return;const l=new Pe(o.message,o.code,t);return l.details=o.details.map(c=>({type:c.typeUrl.substring(c.typeUrl.lastIndexOf("/")+1),value:c.value})),l}const a=t.get(Bs);if(a!=null){if(a===XC)return;const o=parseInt(a,10);return o in Be?new Pe(decodeURIComponent((e=t.get(yE))!==null&&e!==void 0?e:""),o,t):new Pe(`invalid grpc-status: ${a}`,Be.Internal,t)}}function Xb(t,e){return t.toString().replace(/\/?$/,`/${e.parent.typeName}/${e.name}`)}function bE(t,e){return be(t,e)}function WC(t,e){function n(a){return a.done===!0?a:{done:a.done,value:bE(t,a.value)}}return{[Symbol.asyncIterator](){const a=e[Symbol.asyncIterator](),o={next:()=>a.next().then(n)};return a.throw!==void 0&&(o.throw=l=>a.throw(l).then(n)),a.return!==void 0&&(o.return=l=>a.return(l).then(n)),o}}}function SE(t,e){if(!e)return t;for(const n of e.concat().reverse())t=n(t);return t}function KC(t){var e;const n=Object.assign({},t);return(e=n.ignoreUnknownFields)!==null&&e!==void 0||(n.ignoreUnknownFields=!0),n}function Wb(t,e,n,a){const o=e?Kb(t.input,a):Hb(t.input,n);return{parse:(e?Kb(t.output,a):Hb(t.output,n)).parse,serialize:o.serialize}}function Kb(t,e){return{parse(n){try{return On(t,n,e)}catch(a){const o=a instanceof Error?a.message:String(a);throw new Pe(`parse binary: ${o}`,Be.Internal)}},serialize(n){try{return Ui(t,n,e)}catch(a){const o=a instanceof Error?a.message:String(a);throw new Pe(`serialize binary: ${o}`,Be.Internal)}}}}function Hb(t,e){var n,a;const o=(n=e?.textEncoder)!==null&&n!==void 0?n:new TextEncoder,l=(a=e?.textDecoder)!==null&&a!==void 0?a:new TextDecoder,c=KC(e);return{parse(d){try{const m=l.decode(d);return eC(t,m,c)}catch(m){throw Pe.from(m,Be.InvalidArgument)}},serialize(d){try{const m=WT(t,d,c);return o.encode(m)}catch(m){throw Pe.from(m,Be.Internal)}}}}function HC(t){const e=SE(t.next,t.interceptors),[n,a,o]=AE(t),l=Object.assign(Object.assign({},t.req),{message:bE(t.req.method.input,t.req.message),signal:n});return e(l).then(c=>(o(),c),a)}function FC(t){const e=SE(t.next,t.interceptors),[n,a,o]=AE(t),l=Object.assign(Object.assign({},t.req),{message:WC(t.req.method.input,t.req.message),signal:n});let c=!1;return n.addEventListener("abort",function(){var d,m;const h=t.req.message[Symbol.asyncIterator]();c||(d=h.throw)===null||d===void 0||d.call(h,this.reason).catch(()=>{}),(m=h.return)===null||m===void 0||m.call(h).catch(()=>{})}),e(l).then(d=>Object.assign(Object.assign({},d),{message:{[Symbol.asyncIterator](){const m=d.message[Symbol.asyncIterator]();return{next(){return m.next().then(h=>(h.done==!0&&(c=!0,o()),h),a)}}}}}),a)}function AE(t){const{signal:e,cleanup:n}=VC(t.timeoutMs),a=_C(t.signal,e);return[a.signal,function(l){const c=Pe.from(e.aborted?pE(e):l);return a.abort(c),n(),Promise.reject(c)},function(){n(),a.abort()}]}function JC(){try{new Headers}catch{throw new Error("connect-web requires the fetch API. Are you running on an old version of Node.js? Node.js is not supported in Connect for Web - please stay tuned for Connect for Node.")}}function Fb(t,e){const n=vE(t);if(n)throw e.forEach((a,o)=>{n.metadata.append(o,a)}),n;if(!e.has(Bs)&&!t.has(Bs))throw new Pe("protocol error: missing status",Be.Internal)}function Jb(t,e,n,a){var o,l;const c=new Headers(n??{});c.set(OC,t?UC:YC),c.set(zC,"1");const d=(l=(o=c.get(LC))!==null&&o!==void 0?o:c.get(kb))!==null&&l!==void 0?l:"connect-es/2.1.1";return c.set(kb,d),e!==void 0&&c.set(MC,`${e}m`),c}function jC(t){switch(t){case 400:return Be.Internal;case 401:return Be.Unauthenticated;case 403:return Be.PermissionDenied;case 404:return Be.Unimplemented;case 429:return Be.Unavailable;case 502:return Be.Unavailable;case 503:return Be.Unavailable;case 504:return Be.Unavailable;default:return Be.Unknown}}function jb(t,e){var n;if(t>=200&&t<300)return{foundStatus:e.has(Bs),headerError:vE(e)};throw new Pe(decodeURIComponent((n=e.get(yE))!==null&&n!==void 0?n:`HTTP ${t}`),jC(t),e)}var ga=function(t){return this instanceof ga?(this.v=t,this):new ga(t)},$C=function(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=n.apply(t,e||[]),o,l=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",c),o[Symbol.asyncIterator]=function(){return this},o;function c(S){return function(E){return Promise.resolve(E).then(S,y)}}function d(S,E){a[S]&&(o[S]=function(A){return new Promise(function(R,x){l.push([S,A,R,x])>1||m(S,A)})},E&&(o[S]=E(o[S])))}function m(S,E){try{h(a[S](E))}catch(A){v(l[0][3],A)}}function h(S){S.value instanceof ga?Promise.resolve(S.value.v).then(p,y):v(l[0][2],S)}function p(S){m("next",S)}function y(S){m("throw",S)}function v(S,E){S(E),l.shift(),l.length&&m(l[0][0],l[0][1])}};const $b={redirect:"error"};function PC(t){var e;JC();const n=(e=t.useBinaryFormat)!==null&&e!==void 0?e:!0;return{async unary(a,o,l,c,d,m){const{serialize:h,parse:p}=Wb(a,n,t.jsonOptions,t.binaryOptions);return l=l===void 0?t.defaultTimeoutMs:l<=0?void 0:l,await HC({interceptors:t.interceptors,signal:o,timeoutMs:l,req:{stream:!1,service:a.parent,method:a,requestMethod:"POST",url:Xb(t.baseUrl,a),header:Jb(n,l,c),contextValues:m??Zb(),message:d},next:async y=>{var v;const E=await((v=t.fetch)!==null&&v!==void 0?v:globalThis.fetch)(y.url,Object.assign(Object.assign({},$b),{method:y.requestMethod,headers:y.header,signal:y.signal,body:Yb(0,h(y.message))})),{headerError:A}=jb(E.status,E.headers);if(!E.body)throw A!==void 0?A:"missing response body";const R=Ub(E.body).getReader();let x,Y;for(;;){const N=await R.read();if(N.done)break;const{flags:I,data:O}=N.value;if((I&zb)===zb)throw new Pe("protocol error: received unsupported compressed output",Be.Internal);if(I===rg){if(x!==void 0)throw"extra trailer";x=Gb(O);continue}if(Y!==void 0)throw new Pe("extra message",Be.Unimplemented);Y=p(O)}if(x===void 0)throw A!==void 0?A:new Pe("missing trailer",E.headers.has(Bs)?Be.Unimplemented:Be.Unknown);if(Fb(x,E.headers),Y===void 0)throw new Pe("missing message",x.has(Bs)?Be.Unimplemented:Be.Unknown);return{stream:!1,service:a.parent,method:a,header:E.headers,message:Y,trailer:x}}})},async stream(a,o,l,c,d,m){const{serialize:h,parse:p}=Wb(a,n,t.jsonOptions,t.binaryOptions);function y(S,E,A,R,x){return $C(this,arguments,function*(){const N=Ub(S).getReader();if(E){if(!(yield ga(N.read())).done)throw"extra data for trailers-only";return yield ga(void 0)}let I=!1;for(;;){const O=yield ga(N.read());if(O.done)break;const{flags:B,data:M}=O.value;if((B&rg)===rg){if(I)throw"extra trailer";I=!0;const W=Gb(M);Fb(W,R),W.forEach((q,de)=>A.set(de,q));continue}if(I)throw"extra message";yield yield ga(p(M))}if("throwIfAborted"in x&&x.throwIfAborted(),!I)throw"missing trailer"})}async function v(S){if(a.methodKind!="server_streaming")throw"The fetch API does not support streaming request bodies";const E=await S[Symbol.asyncIterator]().next();if(E.done==!0)throw"missing request message";return Yb(0,h(E.value))}return l=l===void 0?t.defaultTimeoutMs:l<=0?void 0:l,FC({interceptors:t.interceptors,signal:o,timeoutMs:l,req:{stream:!0,service:a.parent,method:a,requestMethod:"POST",url:Xb(t.baseUrl,a),header:Jb(n,l,c),contextValues:m??Zb(),message:d},next:async S=>{var E;const R=await((E=t.fetch)!==null&&E!==void 0?E:globalThis.fetch)(S.url,Object.assign(Object.assign({},$b),{method:S.requestMethod,headers:S.header,signal:S.signal,body:await v(S.message)})),{foundStatus:x,headerError:Y}=jb(R.status,R.headers);if(Y!=null)throw Y;if(!R.body)throw"missing response body";const N=new Headers;return Object.assign(Object.assign({},S),{header:R.headers,trailer:N,message:y(R.body,x,N,R.headers,S.signal)})}})}}}const Me=Jr("CiFzcmMvYXBpL3lvcmtpZS92MS9yZXNvdXJjZXMucHJvdG8SCXlvcmtpZS52MSKuAQoIU25hcHNob3QSJAoEcm9vdBgBIAEoCzIWLnlvcmtpZS52MS5KU09ORWxlbWVudBI1CglwcmVzZW5jZXMYAiADKAsyIi55b3JraWUudjEuU25hcHNob3QuUHJlc2VuY2VzRW50cnkaRQoOUHJlc2VuY2VzRW50cnkSCwoDa2V5GAEgASgJEiIKBXZhbHVlGAIgASgLMhMueW9ya2llLnYxLlByZXNlbmNlOgI4ASL7AQoKQ2hhbmdlUGFjaxIUCgxkb2N1bWVudF9rZXkYASABKAkSKQoKY2hlY2twb2ludBgCIAEoCzIVLnlvcmtpZS52MS5DaGVja3BvaW50EhAKCHNuYXBzaG90GAMgASgMEiIKB2NoYW5nZXMYBCADKAsyES55b3JraWUudjEuQ2hhbmdlEjAKEW1pbl9zeW5jZWRfdGlja2V0GAUgASgLMhUueW9ya2llLnYxLlRpbWVUaWNrZXQSEgoKaXNfcmVtb3ZlZBgGIAEoCBIwCg52ZXJzaW9uX3ZlY3RvchgHIAEoCzIYLnlvcmtpZS52MS5WZXJzaW9uVmVjdG9yIpgBCgZDaGFuZ2USHwoCaWQYASABKAsyEy55b3JraWUudjEuQ2hhbmdlSUQSDwoHbWVzc2FnZRgCIAEoCRIoCgpvcGVyYXRpb25zGAMgAygLMhQueW9ya2llLnYxLk9wZXJhdGlvbhIyCg9wcmVzZW5jZV9jaGFuZ2UYBCABKAsyGS55b3JraWUudjEuUHJlc2VuY2VDaGFuZ2UihwEKCENoYW5nZUlEEhIKCmNsaWVudF9zZXEYASABKA0SEgoKc2VydmVyX3NlcRgCIAEoAxIPCgdsYW1wb3J0GAMgASgDEhAKCGFjdG9yX2lkGAQgASgMEjAKDnZlcnNpb25fdmVjdG9yGAUgASgLMhgueW9ya2llLnYxLlZlcnNpb25WZWN0b3IidAoNVmVyc2lvblZlY3RvchI0CgZ2ZWN0b3IYASADKAsyJC55b3JraWUudjEuVmVyc2lvblZlY3Rvci5WZWN0b3JFbnRyeRotCgtWZWN0b3JFbnRyeRILCgNrZXkYASABKAkSDQoFdmFsdWUYAiABKAM6AjgBIqwaCglPcGVyYXRpb24SJwoDc2V0GAEgASgLMhgueW9ya2llLnYxLk9wZXJhdGlvbi5TZXRIABInCgNhZGQYAiABKAsyGC55b3JraWUudjEuT3BlcmF0aW9uLkFkZEgAEikKBG1vdmUYAyABKAsyGS55b3JraWUudjEuT3BlcmF0aW9uLk1vdmVIABItCgZyZW1vdmUYBCABKAsyGy55b3JraWUudjEuT3BlcmF0aW9uLlJlbW92ZUgAEikKBGVkaXQYBSABKAsyGS55b3JraWUudjEuT3BlcmF0aW9uLkVkaXRIABIrCgVzdHlsZRgHIAEoCzIaLnlvcmtpZS52MS5PcGVyYXRpb24uU3R5bGVIABIxCghpbmNyZWFzZRgIIAEoCzIdLnlvcmtpZS52MS5PcGVyYXRpb24uSW5jcmVhc2VIABIyCgl0cmVlX2VkaXQYCSABKAsyHS55b3JraWUudjEuT3BlcmF0aW9uLlRyZWVFZGl0SAASNAoKdHJlZV9zdHlsZRgKIAEoCzIeLnlvcmtpZS52MS5PcGVyYXRpb24uVHJlZVN0eWxlSAASMgoJYXJyYXlfc2V0GAsgASgLMh0ueW9ya2llLnYxLk9wZXJhdGlvbi5BcnJheVNldEgAGp0BCgNTZXQSMAoRcGFyZW50X2NyZWF0ZWRfYXQYASABKAsyFS55b3JraWUudjEuVGltZVRpY2tldBILCgNrZXkYAiABKAkSKwoFdmFsdWUYAyABKAsyHC55b3JraWUudjEuSlNPTkVsZW1lbnRTaW1wbGUSKgoLZXhlY3V0ZWRfYXQYBCABKAsyFS55b3JraWUudjEuVGltZVRpY2tldBrAAQoDQWRkEjAKEXBhcmVudF9jcmVhdGVkX2F0GAEgASgLMhUueW9ya2llLnYxLlRpbWVUaWNrZXQSLgoPcHJldl9jcmVhdGVkX2F0GAIgASgLMhUueW9ya2llLnYxLlRpbWVUaWNrZXQSKwoFdmFsdWUYAyABKAsyHC55b3JraWUudjEuSlNPTkVsZW1lbnRTaW1wbGUSKgoLZXhlY3V0ZWRfYXQYBCABKAsyFS55b3JraWUudjEuVGltZVRpY2tldBq/AQoETW92ZRIwChFwYXJlbnRfY3JlYXRlZF9hdBgBIAEoCzIVLnlvcmtpZS52MS5UaW1lVGlja2V0Ei4KD3ByZXZfY3JlYXRlZF9hdBgCIAEoCzIVLnlvcmtpZS52MS5UaW1lVGlja2V0EikKCmNyZWF0ZWRfYXQYAyABKAsyFS55b3JraWUudjEuVGltZVRpY2tldBIqCgtleGVjdXRlZF9hdBgEIAEoCzIVLnlvcmtpZS52MS5UaW1lVGlja2V0GpEBCgZSZW1vdmUSMAoRcGFyZW50X2NyZWF0ZWRfYXQYASABKAsyFS55b3JraWUudjEuVGltZVRpY2tldBIpCgpjcmVhdGVkX2F0GAIgASgLMhUueW9ya2llLnYxLlRpbWVUaWNrZXQSKgoLZXhlY3V0ZWRfYXQYAyABKAsyFS55b3JraWUudjEuVGltZVRpY2tldBrZAwoERWRpdBIwChFwYXJlbnRfY3JlYXRlZF9hdBgBIAEoCzIVLnlvcmtpZS52MS5UaW1lVGlja2V0EiQKBGZyb20YAiABKAsyFi55b3JraWUudjEuVGV4dE5vZGVQb3MSIgoCdG8YAyABKAsyFi55b3JraWUudjEuVGV4dE5vZGVQb3MSUwoXY3JlYXRlZF9hdF9tYXBfYnlfYWN0b3IYBCADKAsyMi55b3JraWUudjEuT3BlcmF0aW9uLkVkaXQuQ3JlYXRlZEF0TWFwQnlBY3RvckVudHJ5Eg8KB2NvbnRlbnQYBSABKAkSKgoLZXhlY3V0ZWRfYXQYBiABKAsyFS55b3JraWUudjEuVGltZVRpY2tldBI9CgphdHRyaWJ1dGVzGAcgAygLMikueW9ya2llLnYxLk9wZXJhdGlvbi5FZGl0LkF0dHJpYnV0ZXNFbnRyeRpRChhDcmVhdGVkQXRNYXBCeUFjdG9yRW50cnkSCwoDa2V5GAEgASgJEiQKBXZhbHVlGAIgASgLMhUueW9ya2llLnYxLlRpbWVUaWNrZXQ6AjgBGjEKD0F0dHJpYnV0ZXNFbnRyeRILCgNrZXkYASABKAkSDQoFdmFsdWUYAiABKAk6AjgBGssDCgVTdHlsZRIwChFwYXJlbnRfY3JlYXRlZF9hdBgBIAEoCzIVLnlvcmtpZS52MS5UaW1lVGlja2V0EiQKBGZyb20YAiABKAsyFi55b3JraWUudjEuVGV4dE5vZGVQb3MSIgoCdG8YAyABKAsyFi55b3JraWUudjEuVGV4dE5vZGVQb3MSPgoKYXR0cmlidXRlcxgEIAMoCzIqLnlvcmtpZS52MS5PcGVyYXRpb24uU3R5bGUuQXR0cmlidXRlc0VudHJ5EioKC2V4ZWN1dGVkX2F0GAUgASgLMhUueW9ya2llLnYxLlRpbWVUaWNrZXQSVAoXY3JlYXRlZF9hdF9tYXBfYnlfYWN0b3IYBiADKAsyMy55b3JraWUudjEuT3BlcmF0aW9uLlN0eWxlLkNyZWF0ZWRBdE1hcEJ5QWN0b3JFbnRyeRoxCg9BdHRyaWJ1dGVzRW50cnkSCwoDa2V5GAEgASgJEg0KBXZhbHVlGAIgASgJOgI4ARpRChhDcmVhdGVkQXRNYXBCeUFjdG9yRW50cnkSCwoDa2V5GAEgASgJEiQKBXZhbHVlGAIgASgLMhUueW9ya2llLnYxLlRpbWVUaWNrZXQ6AjgBGpUBCghJbmNyZWFzZRIwChFwYXJlbnRfY3JlYXRlZF9hdBgBIAEoCzIVLnlvcmtpZS52MS5UaW1lVGlja2V0EisKBXZhbHVlGAIgASgLMhwueW9ya2llLnYxLkpTT05FbGVtZW50U2ltcGxlEioKC2V4ZWN1dGVkX2F0GAMgASgLMhUueW9ya2llLnYxLlRpbWVUaWNrZXQakwMKCFRyZWVFZGl0EjAKEXBhcmVudF9jcmVhdGVkX2F0GAEgASgLMhUueW9ya2llLnYxLlRpbWVUaWNrZXQSIAoEZnJvbRgCIAEoCzISLnlvcmtpZS52MS5UcmVlUG9zEh4KAnRvGAMgASgLMhIueW9ya2llLnYxLlRyZWVQb3MSVwoXY3JlYXRlZF9hdF9tYXBfYnlfYWN0b3IYBCADKAsyNi55b3JraWUudjEuT3BlcmF0aW9uLlRyZWVFZGl0LkNyZWF0ZWRBdE1hcEJ5QWN0b3JFbnRyeRImCghjb250ZW50cxgFIAMoCzIULnlvcmtpZS52MS5UcmVlTm9kZXMSEwoLc3BsaXRfbGV2ZWwYByABKAUSKgoLZXhlY3V0ZWRfYXQYBiABKAsyFS55b3JraWUudjEuVGltZVRpY2tldBpRChhDcmVhdGVkQXRNYXBCeUFjdG9yRW50cnkSCwoDa2V5GAEgASgJEiQKBXZhbHVlGAIgASgLMhUueW9ya2llLnYxLlRpbWVUaWNrZXQ6AjgBGu0DCglUcmVlU3R5bGUSMAoRcGFyZW50X2NyZWF0ZWRfYXQYASABKAsyFS55b3JraWUudjEuVGltZVRpY2tldBIgCgRmcm9tGAIgASgLMhIueW9ya2llLnYxLlRyZWVQb3MSHgoCdG8YAyABKAsyEi55b3JraWUudjEuVHJlZVBvcxJCCgphdHRyaWJ1dGVzGAQgAygLMi4ueW9ya2llLnYxLk9wZXJhdGlvbi5UcmVlU3R5bGUuQXR0cmlidXRlc0VudHJ5EioKC2V4ZWN1dGVkX2F0GAUgASgLMhUueW9ya2llLnYxLlRpbWVUaWNrZXQSHAoUYXR0cmlidXRlc190b19yZW1vdmUYBiADKAkSWAoXY3JlYXRlZF9hdF9tYXBfYnlfYWN0b3IYByADKAsyNy55b3JraWUudjEuT3BlcmF0aW9uLlRyZWVTdHlsZS5DcmVhdGVkQXRNYXBCeUFjdG9yRW50cnkaMQoPQXR0cmlidXRlc0VudHJ5EgsKA2tleRgBIAEoCRINCgV2YWx1ZRgCIAEoCToCOAEaUQoYQ3JlYXRlZEF0TWFwQnlBY3RvckVudHJ5EgsKA2tleRgBIAEoCRIkCgV2YWx1ZRgCIAEoCzIVLnlvcmtpZS52MS5UaW1lVGlja2V0OgI4ARrAAQoIQXJyYXlTZXQSMAoRcGFyZW50X2NyZWF0ZWRfYXQYASABKAsyFS55b3JraWUudjEuVGltZVRpY2tldBIpCgpjcmVhdGVkX2F0GAIgASgLMhUueW9ya2llLnYxLlRpbWVUaWNrZXQSKwoFdmFsdWUYAyABKAsyHC55b3JraWUudjEuSlNPTkVsZW1lbnRTaW1wbGUSKgoLZXhlY3V0ZWRfYXQYBCABKAsyFS55b3JraWUudjEuVGltZVRpY2tldEIGCgRib2R5IsUBChFKU09ORWxlbWVudFNpbXBsZRIpCgpjcmVhdGVkX2F0GAEgASgLMhUueW9ya2llLnYxLlRpbWVUaWNrZXQSJwoIbW92ZWRfYXQYAiABKAsyFS55b3JraWUudjEuVGltZVRpY2tldBIpCgpyZW1vdmVkX2F0GAMgASgLMhUueW9ya2llLnYxLlRpbWVUaWNrZXQSIgoEdHlwZRgEIAEoDjIULnlvcmtpZS52MS5WYWx1ZVR5cGUSDQoFdmFsdWUYBSABKAwiggsKC0pTT05FbGVtZW50EjgKC2pzb25fb2JqZWN0GAEgASgLMiEueW9ya2llLnYxLkpTT05FbGVtZW50LkpTT05PYmplY3RIABI2Cgpqc29uX2FycmF5GAIgASgLMiAueW9ya2llLnYxLkpTT05FbGVtZW50LkpTT05BcnJheUgAEjUKCXByaW1pdGl2ZRgDIAEoCzIgLnlvcmtpZS52MS5KU09ORWxlbWVudC5QcmltaXRpdmVIABIrCgR0ZXh0GAUgASgLMhsueW9ya2llLnYxLkpTT05FbGVtZW50LlRleHRIABIxCgdjb3VudGVyGAYgASgLMh4ueW9ya2llLnYxLkpTT05FbGVtZW50LkNvdW50ZXJIABIrCgR0cmVlGAcgASgLMhsueW9ya2llLnYxLkpTT05FbGVtZW50LlRyZWVIABquAQoKSlNPTk9iamVjdBIhCgVub2RlcxgBIAMoCzISLnlvcmtpZS52MS5SSFROb2RlEikKCmNyZWF0ZWRfYXQYAiABKAsyFS55b3JraWUudjEuVGltZVRpY2tldBInCghtb3ZlZF9hdBgDIAEoCzIVLnlvcmtpZS52MS5UaW1lVGlja2V0EikKCnJlbW92ZWRfYXQYBCABKAsyFS55b3JraWUudjEuVGltZVRpY2tldBqtAQoJSlNPTkFycmF5EiEKBW5vZGVzGAEgAygLMhIueW9ya2llLnYxLlJHQU5vZGUSKQoKY3JlYXRlZF9hdBgCIAEoCzIVLnlvcmtpZS52MS5UaW1lVGlja2V0EicKCG1vdmVkX2F0GAMgASgLMhUueW9ya2llLnYxLlRpbWVUaWNrZXQSKQoKcmVtb3ZlZF9hdBgEIAEoCzIVLnlvcmtpZS52MS5UaW1lVGlja2V0Gr0BCglQcmltaXRpdmUSIgoEdHlwZRgBIAEoDjIULnlvcmtpZS52MS5WYWx1ZVR5cGUSDQoFdmFsdWUYAiABKAwSKQoKY3JlYXRlZF9hdBgDIAEoCzIVLnlvcmtpZS52MS5UaW1lVGlja2V0EicKCG1vdmVkX2F0GAQgASgLMhUueW9ya2llLnYxLlRpbWVUaWNrZXQSKQoKcmVtb3ZlZF9hdBgFIAEoCzIVLnlvcmtpZS52MS5UaW1lVGlja2V0GqkBCgRUZXh0EiIKBW5vZGVzGAEgAygLMhMueW9ya2llLnYxLlRleHROb2RlEikKCmNyZWF0ZWRfYXQYAiABKAsyFS55b3JraWUudjEuVGltZVRpY2tldBInCghtb3ZlZF9hdBgDIAEoCzIVLnlvcmtpZS52MS5UaW1lVGlja2V0EikKCnJlbW92ZWRfYXQYBCABKAsyFS55b3JraWUudjEuVGltZVRpY2tldBq7AQoHQ291bnRlchIiCgR0eXBlGAEgASgOMhQueW9ya2llLnYxLlZhbHVlVHlwZRINCgV2YWx1ZRgCIAEoDBIpCgpjcmVhdGVkX2F0GAMgASgLMhUueW9ya2llLnYxLlRpbWVUaWNrZXQSJwoIbW92ZWRfYXQYBCABKAsyFS55b3JraWUudjEuVGltZVRpY2tldBIpCgpyZW1vdmVkX2F0GAUgASgLMhUueW9ya2llLnYxLlRpbWVUaWNrZXQaqQEKBFRyZWUSIgoFbm9kZXMYASADKAsyEy55b3JraWUudjEuVHJlZU5vZGUSKQoKY3JlYXRlZF9hdBgCIAEoCzIVLnlvcmtpZS52MS5UaW1lVGlja2V0EicKCG1vdmVkX2F0GAMgASgLMhUueW9ya2llLnYxLlRpbWVUaWNrZXQSKQoKcmVtb3ZlZF9hdBgEIAEoCzIVLnlvcmtpZS52MS5UaW1lVGlja2V0QgYKBGJvZHkiPwoHUkhUTm9kZRILCgNrZXkYASABKAkSJwoHZWxlbWVudBgCIAEoCzIWLnlvcmtpZS52MS5KU09ORWxlbWVudCJUCgdSR0FOb2RlEiAKBG5leHQYASABKAsyEi55b3JraWUudjEuUkdBTm9kZRInCgdlbGVtZW50GAIgASgLMhYueW9ya2llLnYxLkpTT05FbGVtZW50IlgKCE5vZGVBdHRyEg0KBXZhbHVlGAEgASgJEikKCnVwZGF0ZWRfYXQYAiABKAsyFS55b3JraWUudjEuVGltZVRpY2tldBISCgppc19yZW1vdmVkGAMgASgIIpQCCghUZXh0Tm9kZRIhCgJpZBgBIAEoCzIVLnlvcmtpZS52MS5UZXh0Tm9kZUlEEg0KBXZhbHVlGAIgASgJEikKCnJlbW92ZWRfYXQYAyABKAsyFS55b3JraWUudjEuVGltZVRpY2tldBIqCgtpbnNfcHJldl9pZBgEIAEoCzIVLnlvcmtpZS52MS5UZXh0Tm9kZUlEEjcKCmF0dHJpYnV0ZXMYBSADKAsyIy55b3JraWUudjEuVGV4dE5vZGUuQXR0cmlidXRlc0VudHJ5GkYKD0F0dHJpYnV0ZXNFbnRyeRILCgNrZXkYASABKAkSIgoFdmFsdWUYAiABKAsyEy55b3JraWUudjEuTm9kZUF0dHI6AjgBIkcKClRleHROb2RlSUQSKQoKY3JlYXRlZF9hdBgBIAEoCzIVLnlvcmtpZS52MS5UaW1lVGlja2V0Eg4KBm9mZnNldBgCIAEoBSLdAgoIVHJlZU5vZGUSIQoCaWQYASABKAsyFS55b3JraWUudjEuVHJlZU5vZGVJRBIMCgR0eXBlGAIgASgJEg0KBXZhbHVlGAMgASgJEikKCnJlbW92ZWRfYXQYBCABKAsyFS55b3JraWUudjEuVGltZVRpY2tldBIqCgtpbnNfcHJldl9pZBgFIAEoCzIVLnlvcmtpZS52MS5UcmVlTm9kZUlEEioKC2luc19uZXh0X2lkGAYgASgLMhUueW9ya2llLnYxLlRyZWVOb2RlSUQSDQoFZGVwdGgYByABKAUSNwoKYXR0cmlidXRlcxgIIAMoCzIjLnlvcmtpZS52MS5UcmVlTm9kZS5BdHRyaWJ1dGVzRW50cnkaRgoPQXR0cmlidXRlc0VudHJ5EgsKA2tleRgBIAEoCRIiCgV2YWx1ZRgCIAEoCzITLnlvcmtpZS52MS5Ob2RlQXR0cjoCOAEiMQoJVHJlZU5vZGVzEiQKB2NvbnRlbnQYASADKAsyEy55b3JraWUudjEuVHJlZU5vZGUiRwoKVHJlZU5vZGVJRBIpCgpjcmVhdGVkX2F0GAEgASgLMhUueW9ya2llLnYxLlRpbWVUaWNrZXQSDgoGb2Zmc2V0GAIgASgFImMKB1RyZWVQb3MSKAoJcGFyZW50X2lkGAEgASgLMhUueW9ya2llLnYxLlRyZWVOb2RlSUQSLgoPbGVmdF9zaWJsaW5nX2lkGAIgASgLMhUueW9ya2llLnYxLlRyZWVOb2RlSUQiawoEVXNlchIKCgJpZBgBIAEoCRIVCg1hdXRoX3Byb3ZpZGVyGAIgASgJEhAKCHVzZXJuYW1lGAMgASgJEi4KCmNyZWF0ZWRfYXQYBCABKAsyGi5nb29nbGUucHJvdG9idWYuVGltZXN0YW1wIokBCgZNZW1iZXISCgoCaWQYASABKAkSEgoKcHJvamVjdF9pZBgCIAEoCRIPCgd1c2VyX2lkGAMgASgJEhAKCHVzZXJuYW1lGAQgASgJEgwKBHJvbGUYBSABKAkSLgoKaW52aXRlZF9hdBgGIAEoCzIaLmdvb2dsZS5wcm90b2J1Zi5UaW1lc3RhbXAi6QYKB1Byb2plY3QSCgoCaWQYASABKAkSDAoEbmFtZRgCIAEoCRISCgpwdWJsaWNfa2V5GAMgASgJEhIKCnNlY3JldF9rZXkYBCABKAkSGAoQYXV0aF93ZWJob29rX3VybBgFIAEoCRIcChRhdXRoX3dlYmhvb2tfbWV0aG9kcxgGIAMoCRIgChhhdXRoX3dlYmhvb2tfbWF4X3JldHJpZXMYESABKAQSJgoeYXV0aF93ZWJob29rX21pbl93YWl0X2ludGVydmFsGBIgASgJEiYKHmF1dGhfd2ViaG9va19tYXhfd2FpdF9pbnRlcnZhbBgTIAEoCRIkChxhdXRoX3dlYmhvb2tfcmVxdWVzdF90aW1lb3V0GBQgASgJEhkKEWV2ZW50X3dlYmhvb2tfdXJsGAcgASgJEhwKFGV2ZW50X3dlYmhvb2tfZXZlbnRzGAggAygJEiEKGWV2ZW50X3dlYmhvb2tfbWF4X3JldHJpZXMYFSABKAQSJwofZXZlbnRfd2ViaG9va19taW5fd2FpdF9pbnRlcnZhbBgWIAEoCRInCh9ldmVudF93ZWJob29rX21heF93YWl0X2ludGVydmFsGBcgASgJEiUKHWV2ZW50X3dlYmhvb2tfcmVxdWVzdF90aW1lb3V0GBggASgJEiMKG2NsaWVudF9kZWFjdGl2YXRlX3RocmVzaG9sZBgJIAEoCRIaChJzbmFwc2hvdF90aHJlc2hvbGQYGSABKAMSGQoRc25hcHNob3RfaW50ZXJ2YWwYGiABKAMSJAocbWF4X3N1YnNjcmliZXJzX3Blcl9kb2N1bWVudBgKIAEoBRIkChxtYXhfYXR0YWNobWVudHNfcGVyX2RvY3VtZW50GAsgASgFEh0KFW1heF9zaXplX3Blcl9kb2N1bWVudBgPIAEoBRIYChByZW1vdmVfb25fZGV0YWNoGBAgASgIEh0KFWF1dG9fcmV2aXNpb25fZW5hYmxlZBgbIAEoCBIXCg9hbGxvd2VkX29yaWdpbnMYDiADKAkSLgoKY3JlYXRlZF9hdBgMIAEoCzIaLmdvb2dsZS5wcm90b2J1Zi5UaW1lc3RhbXASLgoKdXBkYXRlZF9hdBgNIAEoCzIaLmdvb2dsZS5wcm90b2J1Zi5UaW1lc3RhbXAiLwoLTWV0cmljUG9pbnQSEQoJdGltZXN0YW1wGAEgASgDEg0KBXZhbHVlGAIgASgFIqMMChZVcGRhdGFibGVQcm9qZWN0RmllbGRzEioKBG5hbWUYASABKAsyHC5nb29nbGUucHJvdG9idWYuU3RyaW5nVmFsdWUSNgoQYXV0aF93ZWJob29rX3VybBgCIAEoCzIcLmdvb2dsZS5wcm90b2J1Zi5TdHJpbmdWYWx1ZRJSChRhdXRoX3dlYmhvb2tfbWV0aG9kcxgDIAEoCzI0LnlvcmtpZS52MS5VcGRhdGFibGVQcm9qZWN0RmllbGRzLkF1dGhXZWJob29rTWV0aG9kcxI+ChhhdXRoX3dlYmhvb2tfbWF4X3JldHJpZXMYDCABKAsyHC5nb29nbGUucHJvdG9idWYuVUludDY0VmFsdWUSRAoeYXV0aF93ZWJob29rX21pbl93YWl0X2ludGVydmFsGA0gASgLMhwuZ29vZ2xlLnByb3RvYnVmLlN0cmluZ1ZhbHVlEkQKHmF1dGhfd2ViaG9va19tYXhfd2FpdF9pbnRlcnZhbBgOIAEoCzIcLmdvb2dsZS5wcm90b2J1Zi5TdHJpbmdWYWx1ZRJCChxhdXRoX3dlYmhvb2tfcmVxdWVzdF90aW1lb3V0GA8gASgLMhwuZ29vZ2xlLnByb3RvYnVmLlN0cmluZ1ZhbHVlEjcKEWV2ZW50X3dlYmhvb2tfdXJsGAQgASgLMhwuZ29vZ2xlLnByb3RvYnVmLlN0cmluZ1ZhbHVlElIKFGV2ZW50X3dlYmhvb2tfZXZlbnRzGAUgASgLMjQueW9ya2llLnYxLlVwZGF0YWJsZVByb2plY3RGaWVsZHMuRXZlbnRXZWJob29rRXZlbnRzEj8KGWV2ZW50X3dlYmhvb2tfbWF4X3JldHJpZXMYECABKAsyHC5nb29nbGUucHJvdG9idWYuVUludDY0VmFsdWUSRQofZXZlbnRfd2ViaG9va19taW5fd2FpdF9pbnRlcnZhbBgRIAEoCzIcLmdvb2dsZS5wcm90b2J1Zi5TdHJpbmdWYWx1ZRJFCh9ldmVudF93ZWJob29rX21heF93YWl0X2ludGVydmFsGBIgASgLMhwuZ29vZ2xlLnByb3RvYnVmLlN0cmluZ1ZhbHVlEkMKHWV2ZW50X3dlYmhvb2tfcmVxdWVzdF90aW1lb3V0GBMgASgLMhwuZ29vZ2xlLnByb3RvYnVmLlN0cmluZ1ZhbHVlEjcKEnNuYXBzaG90X3RocmVzaG9sZBgUIAEoCzIbLmdvb2dsZS5wcm90b2J1Zi5JbnQ2NFZhbHVlEjYKEXNuYXBzaG90X2ludGVydmFsGBUgASgLMhsuZ29vZ2xlLnByb3RvYnVmLkludDY0VmFsdWUSQQobY2xpZW50X2RlYWN0aXZhdGVfdGhyZXNob2xkGAYgASgLMhwuZ29vZ2xlLnByb3RvYnVmLlN0cmluZ1ZhbHVlEkEKHG1heF9zdWJzY3JpYmVyc19wZXJfZG9jdW1lbnQYByABKAsyGy5nb29nbGUucHJvdG9idWYuSW50MzJWYWx1ZRJBChxtYXhfYXR0YWNobWVudHNfcGVyX2RvY3VtZW50GAggASgLMhsuZ29vZ2xlLnByb3RvYnVmLkludDMyVmFsdWUSOgoVbWF4X3NpemVfcGVyX2RvY3VtZW50GAogASgLMhsuZ29vZ2xlLnByb3RvYnVmLkludDMyVmFsdWUSNAoQcmVtb3ZlX29uX2RldGFjaBgLIAEoCzIaLmdvb2dsZS5wcm90b2J1Zi5Cb29sVmFsdWUSOQoVYXV0b19yZXZpc2lvbl9lbmFibGVkGBYgASgLMhouZ29vZ2xlLnByb3RvYnVmLkJvb2xWYWx1ZRJJCg9hbGxvd2VkX29yaWdpbnMYCSABKAsyMC55b3JraWUudjEuVXBkYXRhYmxlUHJvamVjdEZpZWxkcy5BbGxvd2VkT3JpZ2lucxolChJBdXRoV2ViaG9va01ldGhvZHMSDwoHbWV0aG9kcxgBIAMoCRokChJFdmVudFdlYmhvb2tFdmVudHMSDgoGZXZlbnRzGAEgAygJGiEKDkFsbG93ZWRPcmlnaW5zEg8KB29yaWdpbnMYASADKAkipwMKD0RvY3VtZW50U3VtbWFyeRIKCgJpZBgBIAEoCRILCgNrZXkYAiABKAkSDAoEcm9vdBgDIAEoCRIYChBhdHRhY2hlZF9jbGllbnRzGAcgASgFEikKDWRvY3VtZW50X3NpemUYCCABKAsyEi55b3JraWUudjEuRG9jU2l6ZRISCgpzY2hlbWFfa2V5GAkgASgJEjwKCXByZXNlbmNlcxgKIAMoCzIpLnlvcmtpZS52MS5Eb2N1bWVudFN1bW1hcnkuUHJlc2VuY2VzRW50cnkSLgoKY3JlYXRlZF9hdBgEIAEoCzIaLmdvb2dsZS5wcm90b2J1Zi5UaW1lc3RhbXASLwoLYWNjZXNzZWRfYXQYBSABKAsyGi5nb29nbGUucHJvdG9idWYuVGltZXN0YW1wEi4KCnVwZGF0ZWRfYXQYBiABKAsyGi5nb29nbGUucHJvdG9idWYuVGltZXN0YW1wGkUKDlByZXNlbmNlc0VudHJ5EgsKA2tleRgBIAEoCRIiCgV2YWx1ZRgCIAEoCzITLnlvcmtpZS52MS5QcmVzZW5jZToCOAEi2gEKDlByZXNlbmNlQ2hhbmdlEjIKBHR5cGUYASABKA4yJC55b3JraWUudjEuUHJlc2VuY2VDaGFuZ2UuQ2hhbmdlVHlwZRIlCghwcmVzZW5jZRgCIAEoCzITLnlvcmtpZS52MS5QcmVzZW5jZSJtCgpDaGFuZ2VUeXBlEhsKF0NIQU5HRV9UWVBFX1VOU1BFQ0lGSUVEEAASEwoPQ0hBTkdFX1RZUEVfUFVUEAESFgoSQ0hBTkdFX1RZUEVfREVMRVRFEAISFQoRQ0hBTkdFX1RZUEVfQ0xFQVIQAyJkCghQcmVzZW5jZRIrCgRkYXRhGAEgAygLMh0ueW9ya2llLnYxLlByZXNlbmNlLkRhdGFFbnRyeRorCglEYXRhRW50cnkSCwoDa2V5GAEgASgJEg0KBXZhbHVlGAIgASgJOgI4ASI0Cg5DaGFubmVsU3VtbWFyeRILCgNrZXkYASABKAkSFQoNc2Vzc2lvbl9jb3VudBgCIAEoBSI0CgpDaGVja3BvaW50EhIKCnNlcnZlcl9zZXEYASABKAMSEgoKY2xpZW50X3NlcRgCIAEoDSJhCgtUZXh0Tm9kZVBvcxIpCgpjcmVhdGVkX2F0GAEgASgLMhUueW9ya2llLnYxLlRpbWVUaWNrZXQSDgoGb2Zmc2V0GAIgASgFEhcKD3JlbGF0aXZlX29mZnNldBgDIAEoBSJCCgpUaW1lVGlja2V0Eg8KB2xhbXBvcnQYASABKAMSEQoJZGVsaW1pdGVyGAIgASgNEhAKCGFjdG9yX2lkGAMgASgMIi4KDERvY0V2ZW50Qm9keRINCgV0b3BpYxgBIAEoCRIPCgdwYXlsb2FkGAIgASgMImsKCERvY0V2ZW50EiUKBHR5cGUYASABKA4yFy55b3JraWUudjEuRG9jRXZlbnRUeXBlEhEKCXB1Ymxpc2hlchgCIAEoCRIlCgRib2R5GAMgASgLMhcueW9ya2llLnYxLkRvY0V2ZW50Qm9keSLWAQoMQ2hhbm5lbEV2ZW50EioKBHR5cGUYASABKA4yHC55b3JraWUudjEuQ2hhbm5lbEV2ZW50LlR5cGUSEQoJcHVibGlzaGVyGAIgASgJEhUKDXNlc3Npb25fY291bnQYAyABKAMSCwoDc2VxGAQgASgDEg0KBXRvcGljGAUgASgJEg8KB3BheWxvYWQYBiABKAwiQwoEVHlwZRIUChBUWVBFX1VOU1BFQ0lGSUVEEAASEQoNVFlQRV9QUkVTRU5DRRABEhIKDlRZUEVfQlJPQURDQVNUEAIiJgoIRGF0YVNpemUSDAoEZGF0YRgBIAEoBRIMCgRtZXRhGAIgASgFIk0KB0RvY1NpemUSIQoEbGl2ZRgBIAEoCzITLnlvcmtpZS52MS5EYXRhU2l6ZRIfCgJnYxgCIAEoCzITLnlvcmtpZS52MS5EYXRhU2l6ZSKRAQoGU2NoZW1hEgoKAmlkGAEgASgJEgwKBG5hbWUYAiABKAkSDwoHdmVyc2lvbhgDIAEoBRIMCgRib2R5GAQgASgJEh4KBXJ1bGVzGAUgAygLMg8ueW9ya2llLnYxLlJ1bGUSLgoKY3JlYXRlZF9hdBgGIAEoCzIaLmdvb2dsZS5wcm90b2J1Zi5UaW1lc3RhbXAiIgoEUnVsZRIMCgRwYXRoGAEgASgJEgwKBHR5cGUYAiABKAkigwEKD1JldmlzaW9uU3VtbWFyeRIKCgJpZBgBIAEoCRINCgVsYWJlbBgCIAEoCRITCgtkZXNjcmlwdGlvbhgDIAEoCRIQCghzbmFwc2hvdBgEIAEoCRIuCgpjcmVhdGVkX2F0GAUgASgLMhouZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcCrUAgoJVmFsdWVUeXBlEhMKD1ZBTFVFX1RZUEVfTlVMTBAAEhYKElZBTFVFX1RZUEVfQk9PTEVBThABEhYKElZBTFVFX1RZUEVfSU5URUdFUhACEhMKD1ZBTFVFX1RZUEVfTE9ORxADEhUKEVZBTFVFX1RZUEVfRE9VQkxFEAQSFQoRVkFMVUVfVFlQRV9TVFJJTkcQBRIUChBWQUxVRV9UWVBFX0JZVEVTEAYSEwoPVkFMVUVfVFlQRV9EQVRFEAcSGgoWVkFMVUVfVFlQRV9KU09OX09CSkVDVBAIEhkKFVZBTFVFX1RZUEVfSlNPTl9BUlJBWRAJEhMKD1ZBTFVFX1RZUEVfVEVYVBAKEhoKFlZBTFVFX1RZUEVfSU5URUdFUl9DTlQQCxIXChNWQUxVRV9UWVBFX0xPTkdfQ05UEAwSEwoPVkFMVUVfVFlQRV9UUkVFEA0qpgEKDERvY0V2ZW50VHlwZRIjCh9ET0NfRVZFTlRfVFlQRV9ET0NVTUVOVF9DSEFOR0VEEAASIwofRE9DX0VWRU5UX1RZUEVfRE9DVU1FTlRfV0FUQ0hFRBABEiUKIURPQ19FVkVOVF9UWVBFX0RPQ1VNRU5UX1VOV0FUQ0hFRBACEiUKIURPQ19FVkVOVF9UWVBFX0RPQ1VNRU5UX0JST0FEQ0FTVBADQkUKEWRldi55b3JraWUuYXBpLnYxUAFaLmdpdGh1Yi5jb20veW9ya2llLXRlYW0veW9ya2llL2FwaS95b3JraWUvdjE7djFiBnByb3RvMw",[ST,LT]),QC=Ce(Me,0),qC=Ce(Me,1),eI=Ce(Me,2),ym=Ce(Me,3),vm=Ce(Me,4),bm=Ce(Me,5),tI=Ce(Me,5,0),nI=Ce(Me,5,1),rI=Ce(Me,5,2),iI=Ce(Me,5,3),aI=Ce(Me,5,4),sI=Ce(Me,5,5),oI=Ce(Me,5,6),lI=Ce(Me,5,7),uI=Ce(Me,5,8),cI=Ce(Me,5,9),ys=Ce(Me,6),Mn=Ce(Me,7),fI=Ce(Me,7,0),dI=Ce(Me,7,1),hI=Ce(Me,7,2),gI=Ce(Me,7,3),mI=Ce(Me,7,4),pI=Ce(Me,7,5),yI=Ce(Me,8),vI=Ce(Me,9),EE=Ce(Me,10),bI=Ce(Me,11),SI=Ce(Me,12),AI=Ce(Me,13),EI=Ce(Me,14),wI=Ce(Me,15),NI=Ce(Me,16),Pb=Ce(Me,23);var ml=(t=>(t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.PUT=1]="PUT",t[t.DELETE=2]="DELETE",t[t.CLEAR=3]="CLEAR",t))(ml||{});const xI=Ce(Me,24),TI=Ce(Me,26),CI=Ce(Me,27),II=Ce(Me,28);var wE=(t=>(t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.PRESENCE=1]="PRESENCE",t[t.BROADCAST=2]="BROADCAST",t))(wE||{}),Oe=(t=>(t[t.NULL=0]="NULL",t[t.BOOLEAN=1]="BOOLEAN",t[t.INTEGER=2]="INTEGER",t[t.LONG=3]="LONG",t[t.DOUBLE=4]="DOUBLE",t[t.STRING=5]="STRING",t[t.BYTES=6]="BYTES",t[t.DATE=7]="DATE",t[t.JSON_OBJECT=8]="JSON_OBJECT",t[t.JSON_ARRAY=9]="JSON_ARRAY",t[t.TEXT=10]="TEXT",t[t.INTEGER_CNT=11]="INTEGER_CNT",t[t.LONG_CNT=12]="LONG_CNT",t[t.TREE=13]="TREE",t))(Oe||{}),Gc=(t=>(t[t.DOCUMENT_CHANGED=0]="DOCUMENT_CHANGED",t[t.DOCUMENT_WATCHED=1]="DOCUMENT_WATCHED",t[t.DOCUMENT_UNWATCHED=2]="DOCUMENT_UNWATCHED",t[t.DOCUMENT_BROADCAST=3]="DOCUMENT_BROADCAST",t))(Gc||{});const RI=Jr("Ch5zcmMvYXBpL3lvcmtpZS92MS95b3JraWUucHJvdG8SCXlvcmtpZS52MSKeAQoVQWN0aXZhdGVDbGllbnRSZXF1ZXN0EhIKCmNsaWVudF9rZXkYASABKAkSQAoIbWV0YWRhdGEYAiADKAsyLi55b3JraWUudjEuQWN0aXZhdGVDbGllbnRSZXF1ZXN0Lk1ldGFkYXRhRW50cnkaLwoNTWV0YWRhdGFFbnRyeRILCgNrZXkYASABKAkSDQoFdmFsdWUYAiABKAk6AjgBIisKFkFjdGl2YXRlQ2xpZW50UmVzcG9uc2USEQoJY2xpZW50X2lkGAEgASgJIkEKF0RlYWN0aXZhdGVDbGllbnRSZXF1ZXN0EhEKCWNsaWVudF9pZBgBIAEoCRITCgtzeW5jaHJvbm91cxgCIAEoCCIaChhEZWFjdGl2YXRlQ2xpZW50UmVzcG9uc2UiagoVQXR0YWNoRG9jdW1lbnRSZXF1ZXN0EhEKCWNsaWVudF9pZBgBIAEoCRIqCgtjaGFuZ2VfcGFjaxgCIAEoCzIVLnlvcmtpZS52MS5DaGFuZ2VQYWNrEhIKCnNjaGVtYV9rZXkYAyABKAkinwEKFkF0dGFjaERvY3VtZW50UmVzcG9uc2USEwoLZG9jdW1lbnRfaWQYASABKAkSKgoLY2hhbmdlX3BhY2sYAiABKAsyFS55b3JraWUudjEuQ2hhbmdlUGFjaxIdChVtYXhfc2l6ZV9wZXJfZG9jdW1lbnQYAyABKAUSJQoMc2NoZW1hX3J1bGVzGAQgAygLMg8ueW9ya2llLnYxLlJ1bGUiiwEKFURldGFjaERvY3VtZW50UmVxdWVzdBIRCgljbGllbnRfaWQYASABKAkSEwoLZG9jdW1lbnRfaWQYAiABKAkSKgoLY2hhbmdlX3BhY2sYAyABKAsyFS55b3JraWUudjEuQ2hhbmdlUGFjaxIeChZyZW1vdmVfaWZfbm90X2F0dGFjaGVkGAQgASgIIkQKFkRldGFjaERvY3VtZW50UmVzcG9uc2USKgoLY2hhbmdlX3BhY2sYAiABKAsyFS55b3JraWUudjEuQ2hhbmdlUGFjayI+ChRXYXRjaERvY3VtZW50UmVxdWVzdBIRCgljbGllbnRfaWQYASABKAkSEwoLZG9jdW1lbnRfaWQYAiABKAkitgEKFVdhdGNoRG9jdW1lbnRSZXNwb25zZRJJCg5pbml0aWFsaXphdGlvbhgBIAEoCzIvLnlvcmtpZS52MS5XYXRjaERvY3VtZW50UmVzcG9uc2UuSW5pdGlhbGl6YXRpb25IABIkCgVldmVudBgCIAEoCzITLnlvcmtpZS52MS5Eb2NFdmVudEgAGiQKDkluaXRpYWxpemF0aW9uEhIKCmNsaWVudF9pZHMYASADKAlCBgoEYm9keSJrChVSZW1vdmVEb2N1bWVudFJlcXVlc3QSEQoJY2xpZW50X2lkGAEgASgJEhMKC2RvY3VtZW50X2lkGAIgASgJEioKC2NoYW5nZV9wYWNrGAMgASgLMhUueW9ya2llLnYxLkNoYW5nZVBhY2siRAoWUmVtb3ZlRG9jdW1lbnRSZXNwb25zZRIqCgtjaGFuZ2VfcGFjaxgBIAEoCzIVLnlvcmtpZS52MS5DaGFuZ2VQYWNrIn8KFlB1c2hQdWxsQ2hhbmdlc1JlcXVlc3QSEQoJY2xpZW50X2lkGAEgASgJEhMKC2RvY3VtZW50X2lkGAIgASgJEioKC2NoYW5nZV9wYWNrGAMgASgLMhUueW9ya2llLnYxLkNoYW5nZVBhY2sSEQoJcHVzaF9vbmx5GAQgASgIIkUKF1B1c2hQdWxsQ2hhbmdlc1Jlc3BvbnNlEioKC2NoYW5nZV9wYWNrGAEgASgLMhUueW9ya2llLnYxLkNoYW5nZVBhY2siYwoVQ3JlYXRlUmV2aXNpb25SZXF1ZXN0EhEKCWNsaWVudF9pZBgBIAEoCRITCgtkb2N1bWVudF9pZBgCIAEoCRINCgVsYWJlbBgDIAEoCRITCgtkZXNjcmlwdGlvbhgEIAEoCSJGChZDcmVhdGVSZXZpc2lvblJlc3BvbnNlEiwKCHJldmlzaW9uGAEgASgLMhoueW9ya2llLnYxLlJldmlzaW9uU3VtbWFyeSJRChJHZXRSZXZpc2lvblJlcXVlc3QSEQoJY2xpZW50X2lkGAEgASgJEhMKC2RvY3VtZW50X2lkGAIgASgJEhMKC3JldmlzaW9uX2lkGAMgASgJIkMKE0dldFJldmlzaW9uUmVzcG9uc2USLAoIcmV2aXNpb24YASABKAsyGi55b3JraWUudjEuUmV2aXNpb25TdW1tYXJ5InUKFExpc3RSZXZpc2lvbnNSZXF1ZXN0EhEKCWNsaWVudF9pZBgBIAEoCRITCgtkb2N1bWVudF9pZBgCIAEoCRIRCglwYWdlX3NpemUYAyABKAUSDgoGb2Zmc2V0GAQgASgFEhIKCmlzX2ZvcndhcmQYBSABKAgiRgoVTGlzdFJldmlzaW9uc1Jlc3BvbnNlEi0KCXJldmlzaW9ucxgBIAMoCzIaLnlvcmtpZS52MS5SZXZpc2lvblN1bW1hcnkiVQoWUmVzdG9yZVJldmlzaW9uUmVxdWVzdBIRCgljbGllbnRfaWQYASABKAkSEwoLZG9jdW1lbnRfaWQYAiABKAkSEwoLcmV2aXNpb25faWQYBCABKAkiGQoXUmVzdG9yZVJldmlzaW9uUmVzcG9uc2UiPgoUQXR0YWNoQ2hhbm5lbFJlcXVlc3QSEQoJY2xpZW50X2lkGAEgASgJEhMKC2NoYW5uZWxfa2V5GAIgASgJIkIKFUF0dGFjaENoYW5uZWxSZXNwb25zZRISCgpzZXNzaW9uX2lkGAEgASgJEhUKDXNlc3Npb25fY291bnQYAiABKAMiUgoURGV0YWNoQ2hhbm5lbFJlcXVlc3QSEQoJY2xpZW50X2lkGAEgASgJEhMKC2NoYW5uZWxfa2V5GAIgASgJEhIKCnNlc3Npb25faWQYAyABKAkiLgoVRGV0YWNoQ2hhbm5lbFJlc3BvbnNlEhUKDXNlc3Npb25fY291bnQYASABKAMiUwoVUmVmcmVzaENoYW5uZWxSZXF1ZXN0EhEKCWNsaWVudF9pZBgBIAEoCRITCgtjaGFubmVsX2tleRgCIAEoCRISCgpzZXNzaW9uX2lkGAMgASgJIi8KFlJlZnJlc2hDaGFubmVsUmVzcG9uc2USFQoNc2Vzc2lvbl9jb3VudBgBIAEoAyI9ChNXYXRjaENoYW5uZWxSZXF1ZXN0EhEKCWNsaWVudF9pZBgBIAEoCRITCgtjaGFubmVsX2tleRgCIAEoCSKDAQoUV2F0Y2hDaGFubmVsUmVzcG9uc2USOQoLaW5pdGlhbGl6ZWQYASABKAsyIi55b3JraWUudjEuV2F0Y2hDaGFubmVsSW5pdGlhbGl6ZWRIABIoCgVldmVudBgCIAEoCzIXLnlvcmtpZS52MS5DaGFubmVsRXZlbnRIAEIGCgRib2R5Ij0KF1dhdGNoQ2hhbm5lbEluaXRpYWxpemVkEhUKDXNlc3Npb25fY291bnQYASABKAMSCwoDc2VxGAIgASgDIloKEEJyb2FkY2FzdFJlcXVlc3QSEQoJY2xpZW50X2lkGAEgASgJEhMKC2NoYW5uZWxfa2V5GAIgASgJEg0KBXRvcGljGAMgASgJEg8KB3BheWxvYWQYBCABKAwiEwoRQnJvYWRjYXN0UmVzcG9uc2UyhQsKDVlvcmtpZVNlcnZpY2USVwoOQWN0aXZhdGVDbGllbnQSIC55b3JraWUudjEuQWN0aXZhdGVDbGllbnRSZXF1ZXN0GiEueW9ya2llLnYxLkFjdGl2YXRlQ2xpZW50UmVzcG9uc2UiABJdChBEZWFjdGl2YXRlQ2xpZW50EiIueW9ya2llLnYxLkRlYWN0aXZhdGVDbGllbnRSZXF1ZXN0GiMueW9ya2llLnYxLkRlYWN0aXZhdGVDbGllbnRSZXNwb25zZSIAElcKDkF0dGFjaERvY3VtZW50EiAueW9ya2llLnYxLkF0dGFjaERvY3VtZW50UmVxdWVzdBohLnlvcmtpZS52MS5BdHRhY2hEb2N1bWVudFJlc3BvbnNlIgASVwoORGV0YWNoRG9jdW1lbnQSIC55b3JraWUudjEuRGV0YWNoRG9jdW1lbnRSZXF1ZXN0GiEueW9ya2llLnYxLkRldGFjaERvY3VtZW50UmVzcG9uc2UiABJXCg5SZW1vdmVEb2N1bWVudBIgLnlvcmtpZS52MS5SZW1vdmVEb2N1bWVudFJlcXVlc3QaIS55b3JraWUudjEuUmVtb3ZlRG9jdW1lbnRSZXNwb25zZSIAEloKD1B1c2hQdWxsQ2hhbmdlcxIhLnlvcmtpZS52MS5QdXNoUHVsbENoYW5nZXNSZXF1ZXN0GiIueW9ya2llLnYxLlB1c2hQdWxsQ2hhbmdlc1Jlc3BvbnNlIgASVgoNV2F0Y2hEb2N1bWVudBIfLnlvcmtpZS52MS5XYXRjaERvY3VtZW50UmVxdWVzdBogLnlvcmtpZS52MS5XYXRjaERvY3VtZW50UmVzcG9uc2UiADABElcKDkNyZWF0ZVJldmlzaW9uEiAueW9ya2llLnYxLkNyZWF0ZVJldmlzaW9uUmVxdWVzdBohLnlvcmtpZS52MS5DcmVhdGVSZXZpc2lvblJlc3BvbnNlIgASTgoLR2V0UmV2aXNpb24SHS55b3JraWUudjEuR2V0UmV2aXNpb25SZXF1ZXN0Gh4ueW9ya2llLnYxLkdldFJldmlzaW9uUmVzcG9uc2UiABJUCg1MaXN0UmV2aXNpb25zEh8ueW9ya2llLnYxLkxpc3RSZXZpc2lvbnNSZXF1ZXN0GiAueW9ya2llLnYxLkxpc3RSZXZpc2lvbnNSZXNwb25zZSIAEloKD1Jlc3RvcmVSZXZpc2lvbhIhLnlvcmtpZS52MS5SZXN0b3JlUmV2aXNpb25SZXF1ZXN0GiIueW9ya2llLnYxLlJlc3RvcmVSZXZpc2lvblJlc3BvbnNlIgASVAoNQXR0YWNoQ2hhbm5lbBIfLnlvcmtpZS52MS5BdHRhY2hDaGFubmVsUmVxdWVzdBogLnlvcmtpZS52MS5BdHRhY2hDaGFubmVsUmVzcG9uc2UiABJUCg1EZXRhY2hDaGFubmVsEh8ueW9ya2llLnYxLkRldGFjaENoYW5uZWxSZXF1ZXN0GiAueW9ya2llLnYxLkRldGFjaENoYW5uZWxSZXNwb25zZSIAElcKDlJlZnJlc2hDaGFubmVsEiAueW9ya2llLnYxLlJlZnJlc2hDaGFubmVsUmVxdWVzdBohLnlvcmtpZS52MS5SZWZyZXNoQ2hhbm5lbFJlc3BvbnNlIgASUwoMV2F0Y2hDaGFubmVsEh4ueW9ya2llLnYxLldhdGNoQ2hhbm5lbFJlcXVlc3QaHy55b3JraWUudjEuV2F0Y2hDaGFubmVsUmVzcG9uc2UiADABEkgKCUJyb2FkY2FzdBIbLnlvcmtpZS52MS5Ccm9hZGNhc3RSZXF1ZXN0GhwueW9ya2llLnYxLkJyb2FkY2FzdFJlc3BvbnNlIgBCRQoRZGV2LnlvcmtpZS5hcGkudjFQAVouZ2l0aHViLmNvbS95b3JraWUtdGVhbS95b3JraWUvYXBpL3lvcmtpZS92MTt2MWIGcHJvdG8z",[Me]),DI=ZC(RI,0),_I=Jr("Ch5nb29nbGUvcnBjL2Vycm9yX2RldGFpbHMucHJvdG8SCmdvb2dsZS5ycGMikwEKCUVycm9ySW5mbxIOCgZyZWFzb24YASABKAkSDgoGZG9tYWluGAIgASgJEjUKCG1ldGFkYXRhGAMgAygLMiMuZ29vZ2xlLnJwYy5FcnJvckluZm8uTWV0YWRhdGFFbnRyeRovCg1NZXRhZGF0YUVudHJ5EgsKA2tleRgBIAEoCRINCgV2YWx1ZRgCIAEoCToCOAEiOwoJUmV0cnlJbmZvEi4KC3JldHJ5X2RlbGF5GAEgASgLMhkuZ29vZ2xlLnByb3RvYnVmLkR1cmF0aW9uIjIKCURlYnVnSW5mbxIVCg1zdGFja19lbnRyaWVzGAEgAygJEg4KBmRldGFpbBgCIAEoCSKPAwoMUXVvdGFGYWlsdXJlEjYKCnZpb2xhdGlvbnMYASADKAsyIi5nb29nbGUucnBjLlF1b3RhRmFpbHVyZS5WaW9sYXRpb24axgIKCVZpb2xhdGlvbhIPCgdzdWJqZWN0GAEgASgJEhMKC2Rlc2NyaXB0aW9uGAIgASgJEhMKC2FwaV9zZXJ2aWNlGAMgASgJEhQKDHF1b3RhX21ldHJpYxgEIAEoCRIQCghxdW90YV9pZBgFIAEoCRJRChBxdW90YV9kaW1lbnNpb25zGAYgAygLMjcuZ29vZ2xlLnJwYy5RdW90YUZhaWx1cmUuVmlvbGF0aW9uLlF1b3RhRGltZW5zaW9uc0VudHJ5EhMKC3F1b3RhX3ZhbHVlGAcgASgDEh8KEmZ1dHVyZV9xdW90YV92YWx1ZRgIIAEoA0gAiAEBGjYKFFF1b3RhRGltZW5zaW9uc0VudHJ5EgsKA2tleRgBIAEoCRINCgV2YWx1ZRgCIAEoCToCOAFCFQoTX2Z1dHVyZV9xdW90YV92YWx1ZSKVAQoTUHJlY29uZGl0aW9uRmFpbHVyZRI9Cgp2aW9sYXRpb25zGAEgAygLMikuZ29vZ2xlLnJwYy5QcmVjb25kaXRpb25GYWlsdXJlLlZpb2xhdGlvbho/CglWaW9sYXRpb24SDAoEdHlwZRgBIAEoCRIPCgdzdWJqZWN0GAIgASgJEhMKC2Rlc2NyaXB0aW9uGAMgASgJIswBCgpCYWRSZXF1ZXN0Ej8KEGZpZWxkX3Zpb2xhdGlvbnMYASADKAsyJS5nb29nbGUucnBjLkJhZFJlcXVlc3QuRmllbGRWaW9sYXRpb24afQoORmllbGRWaW9sYXRpb24SDQoFZmllbGQYASABKAkSEwoLZGVzY3JpcHRpb24YAiABKAkSDgoGcmVhc29uGAMgASgJEjcKEWxvY2FsaXplZF9tZXNzYWdlGAQgASgLMhwuZ29vZ2xlLnJwYy5Mb2NhbGl6ZWRNZXNzYWdlIjcKC1JlcXVlc3RJbmZvEhIKCnJlcXVlc3RfaWQYASABKAkSFAoMc2VydmluZ19kYXRhGAIgASgJImAKDFJlc291cmNlSW5mbxIVCg1yZXNvdXJjZV90eXBlGAEgASgJEhUKDXJlc291cmNlX25hbWUYAiABKAkSDQoFb3duZXIYAyABKAkSEwoLZGVzY3JpcHRpb24YBCABKAkiVgoESGVscBIkCgVsaW5rcxgBIAMoCzIVLmdvb2dsZS5ycGMuSGVscC5MaW5rGigKBExpbmsSEwoLZGVzY3JpcHRpb24YASABKAkSCwoDdXJsGAIgASgJIjMKEExvY2FsaXplZE1lc3NhZ2USDgoGbG9jYWxlGAEgASgJEg8KB21lc3NhZ2UYAiABKAlCbAoOY29tLmdvb2dsZS5ycGNCEUVycm9yRGV0YWlsc1Byb3RvUAFaP2dvb2dsZS5nb2xhbmcub3JnL2dlbnByb3RvL2dvb2dsZWFwaXMvcnBjL2VycmRldGFpbHM7ZXJyZGV0YWlsc6ICA1JQQ2IGcHJvdG8z",[wT]),VI=Ce(_I,0);var U=(t=>(t.Ok="ok",t.ErrClientNotActivated="ErrClientNotActivated",t.ErrClientNotFound="ErrClientNotFound",t.ErrUnimplemented="ErrUnimplemented",t.ErrInvalidType="ErrInvalidType",t.ErrDummy="ErrDummy",t.ErrNotAttached="ErrNotAttached",t.ErrNotDetached="ErrNotDetached",t.ErrDocumentRemoved="ErrDocumentRemoved",t.ErrDocumentSizeExceedsLimit="ErrDocumentSizeExceedsLimit",t.ErrDocumentSchemaValidationFailed="ErrDocumentSchemaValidationFailed",t.ErrInvalidObjectKey="ErrInvalidObjectKey",t.ErrInvalidArgument="ErrInvalidArgument",t.ErrNotInitialized="ErrNotInitialized",t.ErrNotReady="ErrNotReady",t.ErrRefused="ErrRefused",t.ErrContextNotProvided="ErrContextNotProvided",t.ErrPermissionDenied="ErrPermissionDenied",t.ErrUnauthenticated="ErrUnauthenticated",t.ErrTooManySubscribers="ErrTooManySubscribers",t.ErrTooManyAttachments="ErrTooManyAttachments",t))(U||{});class G extends Error{constructor(e,n){super(n),this.code=e,this.message=n,this.toString=()=>`[code=${this.code}]: ${this.message}`}name="YorkieError";stack}var dr=(t=>(t.Put="put",t.Clear="clear",t))(dr||{});const Sm="000000000000000000000000",lr=24;class _n{lamport;delimiter;actorID;constructor(e,n,a){this.lamport=e,this.delimiter=n,this.actorID=a}static of(e,n,a){return new _n(e,n,a)}static fromStruct(e){return _n.of(BigInt(e.lamport),e.delimiter,e.actorID)}toIDString(){return`${this.lamport.toString()}:${this.actorID}:${this.delimiter}`}toStruct(){return{lamport:this.getLamportAsString(),delimiter:this.getDelimiter(),actorID:this.getActorID()}}toTestString(){return`${this.lamport.toString()}:${this.actorID.slice(-2)}:${this.delimiter}`}setActor(e){return new _n(this.lamport,this.delimiter,e)}getLamportAsString(){return this.lamport.toString()}getLamport(){return this.lamport}getDelimiter(){return this.delimiter}getActorID(){return this.actorID}after(e){return this.compare(e)>0}equals(e){return this.compare(e)===0}compare(e){if(this.lamport>e.lamport)return 1;if(e.lamport>this.lamport)return-1;const n=this.actorID.localeCompare(e.actorID);return n!==0?n:this.delimiter>e.delimiter?1:e.delimiter>this.delimiter?-1:0}}const Tg=0n,NE=0,Cg=9223372036854775807n,Ls=new _n(Tg,NE,Sm);function or(t){return t.replace(/["'\\\n\r\f\b\t\u2028\u2029]/g,function(e){switch(e){case'"':case"\\":return"\\"+e;case`
`:return"\\n";case"\r":return"\\r";case"\f":return"\\f";case"\b":return"\\b";case"	":return"\\t";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:return e}})}class Ml{createdAt;movedAt;removedAt;constructor(e){this.createdAt=e}getCreatedAt(){return this.createdAt}getID(){return this.createdAt}getMovedAt(){return this.movedAt}getRemovedAt(){return this.removedAt}getPositionedAt(){return this.movedAt?this.movedAt:this.createdAt}setCreatedAt(e){this.createdAt=e}setMovedAt(e){return!this.movedAt||e&&e.after(this.movedAt)?(this.movedAt=e,!0):!1}setRemovedAt(e){this.removedAt=e}remove(e){return e&&e.after(this.createdAt)&&(!this.removedAt||e.after(this.removedAt))?(this.removedAt=e,!0):!1}isRemoved(){return!!this.removedAt}getMetaUsage(){let e=0;return this.getCreatedAt()&&(e+=lr),this.getMovedAt()&&(e+=lr),this.getRemovedAt()&&(e+=lr),e}}class Mi extends Ml{constructor(e){super(e)}}class kc{strKey;value;constructor(e,n){this.strKey=e,this.value=n}static of(e,n){return new kc(e,n)}isRemoved(){return this.value.isRemoved()}getStrKey(){return this.strKey}getValue(){return this.value}remove(e){return this.value.remove(e)}}class zs{nodeMapByKey;nodeMapByCreatedAt;constructor(){this.nodeMapByKey=new Map,this.nodeMapByCreatedAt=new Map}static create(){return new zs}set(e,n,a){let o;const l=this.nodeMapByKey.get(e);l&&!l.isRemoved()&&l.remove(a)&&(o=l.getValue());const c=kc.of(e,n);return this.nodeMapByCreatedAt.set(n.getCreatedAt().toIDString(),c),(!l||a.after(l.getValue().getPositionedAt()))&&(this.nodeMapByKey.set(e,c),n.setMovedAt(a)),o}delete(e,n){if(!this.nodeMapByCreatedAt.has(e.toIDString()))throw new G(U.ErrInvalidArgument,`fail to find ${e.toIDString()}`);const a=this.nodeMapByCreatedAt.get(e.toIDString());return a.remove(n),a.getValue()}subPathOf(e){const n=this.nodeMapByCreatedAt.get(e.toIDString());if(n)return n.getStrKey()}purge(e){const n=this.nodeMapByCreatedAt.get(e.getCreatedAt().toIDString());if(!n)throw new G(U.ErrInvalidArgument,`fail to find ${e.getCreatedAt().toIDString()}`);const a=this.nodeMapByKey.get(n.getStrKey());n===a&&this.nodeMapByKey.delete(a.getStrKey()),this.nodeMapByCreatedAt.delete(n.getValue().getCreatedAt().toIDString())}deleteByKey(e,n){const a=this.nodeMapByKey.get(e);if(a&&a.remove(n))return a.getValue()}has(e){const n=this.nodeMapByKey.get(e);return n?!n.isRemoved():!1}getByID(e){return this.nodeMapByCreatedAt.get(e.toIDString())}get(e){const n=this.nodeMapByKey.get(e);if(!(!n||n.isRemoved()))return n}deepcopy(){const e=zs.create();for(const[,n]of this.nodeMapByCreatedAt)e.nodeMapByCreatedAt.set(n.getValue().getCreatedAt().toIDString(),kc.of(n.getStrKey(),n.getValue().deepcopy()));for(const[n,a]of this.nodeMapByKey)e.nodeMapByKey.set(n,e.nodeMapByCreatedAt.get(a.getValue().getCreatedAt().toIDString()));return e}*[Symbol.iterator](){for(const[,e]of this.nodeMapByCreatedAt)yield e}}class Xt extends Mi{memberNodes;constructor(e,n){super(e),this.memberNodes=n}static create(e,n){if(!n)return new Xt(e,zs.create());const a=zs.create();for(const[o,l]of Object.entries(n))a.set(o,l.deepcopy(),l.getCreatedAt());return new Xt(e,a)}subPathOf(e){return this.memberNodes.subPathOf(e)}purge(e){this.memberNodes.purge(e)}set(e,n,a){return this.memberNodes.set(e,n,a)}delete(e,n){return this.memberNodes.delete(e,n)}deleteByKey(e,n){return this.memberNodes.deleteByKey(e,n)}get(e){return this.memberNodes.get(e)?.getValue()}getByID(e){return this.memberNodes.getByID(e)?.getValue()}has(e){return this.memberNodes.has(e)}getDataSize(){return{data:0,meta:this.getMetaUsage()}}toJSON(){const e=[];for(const[n,a]of this)e.push(`"${or(n)}":${a.toJSON()}`);return`{${e.join(",")}}`}toJS(){return JSON.parse(this.toJSON())}toJSForTest(){const e={};for(const[n,a]of this){const{createdAt:o,value:l,type:c}=a.toJSForTest();e[n]={key:n,createdAt:o,value:l,type:c}}return{createdAt:this.getCreatedAt().toTestString(),value:e,type:"YORKIE_OBJECT"}}getKeys(){const e=Array();for(const[n]of this)e.push(n);return e}toSortedJSON(){const e=new Set;for(const[a]of this)e.add(a);const n=[];for(const a of Array.from(e).sort()){const o=this.memberNodes.get(a)?.getValue();n.push(`"${or(a)}":${o.toSortedJSON()}`)}return`{${n.join(",")}}`}getRHT(){return this.memberNodes}deepcopy(){const e=Xt.create(this.getCreatedAt());return e.memberNodes=this.memberNodes.deepcopy(),e.setRemovedAt(this.getRemovedAt()),e.setMovedAt(this.getMovedAt()),e}getDescendants(e){for(const n of this.memberNodes){const a=n.getValue();if(e(a,this))return;a instanceof Mi&&a.getDescendants(e)}}*[Symbol.iterator](){for(const e of this.memberNodes)e.isRemoved()||(yield[e.getStrKey(),e.getValue()])}}var ut=(t=>(t.Local="local",t.Remote="remote",t.UndoRedo="undoredo",t))(ut||{});class Qn{parentCreatedAt;executedAt;constructor(e,n){this.parentCreatedAt=e,this.executedAt=n}getParentCreatedAt(){return this.parentCreatedAt}getExecutedAt(){if(!this.executedAt)throw new G(U.ErrNotReady,"executedAt is not set yet");return this.executedAt}setActor(e){this.executedAt&&(this.executedAt=this.executedAt.setActor(e))}setExecutedAt(e){this.executedAt=e}}class xE{value;left;right;parent;weight;constructor(e){this.value=e,this.initWeight()}getNodeString(){return`${this.weight}${this.value}`}getValue(){return this.value}getLeftWeight(){return this.hasLeft()?this.left.getWeight():0}getRightWeight(){return this.hasRight()?this.right.getWeight():0}getWeight(){return this.weight}getLeft(){return this.left}getRight(){return this.right}getParent(){return this.parent}hasLeft(){return!!this.left}hasRight(){return!!this.right}hasParent(){return!!this.parent}setLeft(e){this.left=e}setRight(e){this.right=e}setParent(e){this.parent=e}unlink(){this.parent=void 0,this.right=void 0,this.left=void 0}hasLinks(){return this.hasParent()||this.hasLeft()||this.hasRight()}increaseWeight(e){this.weight+=e}initWeight(){this.weight=this.getLength()}}class pl{root;constructor(e){this.root=e}get length(){return this.root?this.root.getWeight():0}findForText(e){if(!this.root||e<0)return[void 0,0];let n=this.root;for(;;)if(n.hasLeft()&&e<=n.getLeftWeight())n=n.getLeft();else if(n.hasRight()&&n.getLeftWeight()+n.getLength()<e)e-=n.getLeftWeight()+n.getLength(),n=n.getRight();else{e-=n.getLeftWeight();break}if(e>n.getLength())throw new G(U.ErrInvalidArgument,`out of index range: pos: ${e} > node.length: ${n.getLength()}`);return this.splayNode(n),[n,e]}findForArray(e){if(!this.root)return;if(e<0||e>=this.length)throw new G(U.ErrInvalidArgument,`out of index range: idx: ${e}, length: ${this.length}`);let n=this.root;for(;;)if(n.hasLeft()&&e<n.getLeftWeight())n=n.getLeft();else if(n.hasRight()&&n.getLeftWeight()+n.getLength()<=e)e-=n.getLeftWeight()+n.getLength(),n=n.getRight();else break;return this.splayNode(n),n}indexOf(e){return!e||e!==this.root&&!e.hasLinks()?-1:(this.splayNode(e),this.root.getLeftWeight())}getRoot(){return this.root}insert(e){return this.insertAfter(this.root,e)}insertAfter(e,n){return e?(this.splayNode(e),this.root=n,n.setRight(e.getRight()),e.hasRight()&&e.getRight().setParent(n),n.setLeft(e),e.setParent(n),e.setRight(),this.updateWeight(e),this.updateWeight(n),n):(this.root=n,n)}updateWeight(e){e.initWeight(),e.hasLeft()&&e.increaseWeight(e.getLeftWeight()),e.hasRight()&&e.increaseWeight(e.getRightWeight())}updateTreeWeight(e){for(;e;)this.updateWeight(e),e=e.getParent()}splayNode(e){if(e)for(;;)if(this.isLeftChild(e.getParent())&&this.isRightChild(e))this.rotateLeft(e),this.rotateRight(e);else if(this.isRightChild(e.getParent())&&this.isLeftChild(e))this.rotateRight(e),this.rotateLeft(e);else if(this.isLeftChild(e.getParent())&&this.isLeftChild(e))this.rotateRight(e.getParent()),this.rotateRight(e);else if(this.isRightChild(e.getParent())&&this.isRightChild(e))this.rotateLeft(e.getParent()),this.rotateLeft(e);else{this.isLeftChild(e)?this.rotateRight(e):this.isRightChild(e)&&this.rotateLeft(e),this.updateWeight(e);return}}delete(e){this.splayNode(e);const n=new pl(e.getLeft());n.root&&n.root.setParent();const a=new pl(e.getRight());if(a.root&&a.root.setParent(),n.root){const o=n.getRightmost();n.splayNode(o),n.root.setRight(a.root),a.root&&a.root.setParent(n.root),this.root=n.root}else this.root=a.root;e.unlink(),this.root&&this.updateWeight(this.root)}deleteRange(e,n){if(!n){this.splayNode(e),this.cutOffRight(e);return}this.splayNode(e),this.splayNode(n),n.getLeft()!=e&&this.rotateRight(e),this.cutOffRight(e)}cutOffRight(e){const n=[];this.traversePostorder(e.getRight(),n);for(const a of n)a.initWeight();this.updateTreeWeight(e)}toTestString(){const e=[];return this.traverseInorder(this.root,e),e.map(n=>`[${n.getWeight()},${n.getLength()}]${n.getValue()||""}`).join("")}checkWeight(){const e=[];this.traverseInorder(this.root,e);for(const n of e)if(n.getWeight()!=n.getLength()+n.getLeftWeight()+n.getRightWeight())return!1;return!0}getRightmost(){let e=this.root;for(;e.hasRight();)e=e.getRight();return e}traverseInorder(e,n){e&&(this.traverseInorder(e.getLeft(),n),n.push(e),this.traverseInorder(e.getRight(),n))}traversePostorder(e,n){e&&(this.traversePostorder(e.getLeft(),n),this.traversePostorder(e.getRight(),n),n.push(e))}rotateLeft(e){const n=e.getParent();n.hasParent()?n===n.getParent().getLeft()?n.getParent().setLeft(e):n.getParent().setRight(e):this.root=e,e.setParent(n.getParent()),n.setRight(e.getLeft()),n.hasRight()&&n.getRight().setParent(n),e.setLeft(n),e.getLeft().setParent(e),this.updateWeight(n),this.updateWeight(e)}rotateRight(e){const n=e.getParent();n.hasParent()?n===n.getParent().getLeft()?n.getParent().setLeft(e):n.getParent().setRight(e):this.root=e,e.setParent(n.getParent()),n.setLeft(e.getRight()),n.hasLeft()&&n.getLeft().setParent(n),e.setRight(n),e.getRight().setParent(e),this.updateWeight(n),this.updateWeight(e)}isLeftChild(e){return e&&e.hasParent()?e.getParent().getLeft()===e:!1}isRightChild(e){return e&&e.hasParent()?e.getParent().getRight()===e:!1}}var Rn=null;try{Rn=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function Ue(t,e,n){this.low=t|0,this.high=e|0,this.unsigned=!!n}Ue.prototype.__isLong__;Object.defineProperty(Ue.prototype,"__isLong__",{value:!0});function Kt(t){return(t&&t.__isLong__)===!0}function Qb(t){var e=Math.clz32(t&-t);return t?31-e:e}Ue.isLong=Kt;var qb={},eS={};function Na(t,e){var n,a,o;return e?(t>>>=0,(o=0<=t&&t<256)&&(a=eS[t],a)?a:(n=We(t,0,!0),o&&(eS[t]=n),n)):(t|=0,(o=-128<=t&&t<128)&&(a=qb[t],a)?a:(n=We(t,t<0?-1:0,!1),o&&(qb[t]=n),n))}Ue.fromInt=Na;function Dn(t,e){if(isNaN(t))return e?Gr:Fn;if(e){if(t<0)return Gr;if(t>=TE)return RE}else{if(t<=-nS)return rn;if(t+1>=nS)return IE}return t<0?Dn(-t,e).neg():We(t%Us|0,t/Us|0,e)}Ue.fromNumber=Dn;function We(t,e,n){return new Ue(t,e,n)}Ue.fromBits=We;var Xc=Math.pow;function Am(t,e,n){if(t.length===0)throw Error("empty string");if(typeof e=="number"?(n=e,e=!1):e=!!e,t==="NaN"||t==="Infinity"||t==="+Infinity"||t==="-Infinity")return e?Gr:Fn;if(n=n||10,n<2||36<n)throw RangeError("radix");var a;if((a=t.indexOf("-"))>0)throw Error("interior hyphen");if(a===0)return Am(t.substring(1),e,n).neg();for(var o=Dn(Xc(n,8)),l=Fn,c=0;c<t.length;c+=8){var d=Math.min(8,t.length-c),m=parseInt(t.substring(c,c+d),n);if(d<8){var h=Dn(Xc(n,d));l=l.mul(h).add(Dn(m))}else l=l.mul(o),l=l.add(Dn(m))}return l.unsigned=e,l}Ue.fromString=Am;function Bn(t,e){return typeof t=="number"?Dn(t,e):typeof t=="string"?Am(t,e):We(t.low,t.high,typeof e=="boolean"?e:t.unsigned)}Ue.fromValue=Bn;var tS=65536,OI=1<<24,Us=tS*tS,TE=Us*Us,nS=TE/2,rS=Na(OI),Fn=Na(0);Ue.ZERO=Fn;var Gr=Na(0,!0);Ue.UZERO=Gr;var ws=Na(1);Ue.ONE=ws;var CE=Na(1,!0);Ue.UONE=CE;var Ig=Na(-1);Ue.NEG_ONE=Ig;var IE=We(-1,2147483647,!1);Ue.MAX_VALUE=IE;var RE=We(-1,-1,!0);Ue.MAX_UNSIGNED_VALUE=RE;var rn=We(0,-2147483648,!1);Ue.MIN_VALUE=rn;var ue=Ue.prototype;ue.toInt=function(){return this.unsigned?this.low>>>0:this.low};ue.toNumber=function(){return this.unsigned?(this.high>>>0)*Us+(this.low>>>0):this.high*Us+(this.low>>>0)};ue.toString=function(e){if(e=e||10,e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(rn)){var n=Dn(e),a=this.div(n),o=a.mul(n).sub(this);return a.toString(e)+o.toInt().toString(e)}else return"-"+this.neg().toString(e);for(var l=Dn(Xc(e,6),this.unsigned),c=this,d="";;){var m=c.div(l),h=c.sub(m.mul(l)).toInt()>>>0,p=h.toString(e);if(c=m,c.isZero())return p+d;for(;p.length<6;)p="0"+p;d=""+p+d}};ue.getHighBits=function(){return this.high};ue.getHighBitsUnsigned=function(){return this.high>>>0};ue.getLowBits=function(){return this.low};ue.getLowBitsUnsigned=function(){return this.low>>>0};ue.getNumBitsAbs=function(){if(this.isNegative())return this.eq(rn)?64:this.neg().getNumBitsAbs();for(var e=this.high!=0?this.high:this.low,n=31;n>0&&(e&1<<n)==0;n--);return this.high!=0?n+33:n+1};ue.isSafeInteger=function(){var e=this.high>>21;return e?this.unsigned?!1:e===-1&&!(this.low===0&&this.high===-2097152):!0};ue.isZero=function(){return this.high===0&&this.low===0};ue.eqz=ue.isZero;ue.isNegative=function(){return!this.unsigned&&this.high<0};ue.isPositive=function(){return this.unsigned||this.high>=0};ue.isOdd=function(){return(this.low&1)===1};ue.isEven=function(){return(this.low&1)===0};ue.equals=function(e){return Kt(e)||(e=Bn(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low};ue.eq=ue.equals;ue.notEquals=function(e){return!this.eq(e)};ue.neq=ue.notEquals;ue.ne=ue.notEquals;ue.lessThan=function(e){return this.comp(e)<0};ue.lt=ue.lessThan;ue.lessThanOrEqual=function(e){return this.comp(e)<=0};ue.lte=ue.lessThanOrEqual;ue.le=ue.lessThanOrEqual;ue.greaterThan=function(e){return this.comp(e)>0};ue.gt=ue.greaterThan;ue.greaterThanOrEqual=function(e){return this.comp(e)>=0};ue.gte=ue.greaterThanOrEqual;ue.ge=ue.greaterThanOrEqual;ue.compare=function(e){if(Kt(e)||(e=Bn(e)),this.eq(e))return 0;var n=this.isNegative(),a=e.isNegative();return n&&!a?-1:!n&&a?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1};ue.comp=ue.compare;ue.negate=function(){return!this.unsigned&&this.eq(rn)?rn:this.not().add(ws)};ue.neg=ue.negate;ue.add=function(e){Kt(e)||(e=Bn(e));var n=this.high>>>16,a=this.high&65535,o=this.low>>>16,l=this.low&65535,c=e.high>>>16,d=e.high&65535,m=e.low>>>16,h=e.low&65535,p=0,y=0,v=0,S=0;return S+=l+h,v+=S>>>16,S&=65535,v+=o+m,y+=v>>>16,v&=65535,y+=a+d,p+=y>>>16,y&=65535,p+=n+c,p&=65535,We(v<<16|S,p<<16|y,this.unsigned)};ue.subtract=function(e){return Kt(e)||(e=Bn(e)),this.add(e.neg())};ue.sub=ue.subtract;ue.multiply=function(e){if(this.isZero())return this;if(Kt(e)||(e=Bn(e)),Rn){var n=Rn.mul(this.low,this.high,e.low,e.high);return We(n,Rn.get_high(),this.unsigned)}if(e.isZero())return this.unsigned?Gr:Fn;if(this.eq(rn))return e.isOdd()?rn:Fn;if(e.eq(rn))return this.isOdd()?rn:Fn;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(rS)&&e.lt(rS))return Dn(this.toNumber()*e.toNumber(),this.unsigned);var a=this.high>>>16,o=this.high&65535,l=this.low>>>16,c=this.low&65535,d=e.high>>>16,m=e.high&65535,h=e.low>>>16,p=e.low&65535,y=0,v=0,S=0,E=0;return E+=c*p,S+=E>>>16,E&=65535,S+=l*p,v+=S>>>16,S&=65535,S+=c*h,v+=S>>>16,S&=65535,v+=o*p,y+=v>>>16,v&=65535,v+=l*h,y+=v>>>16,v&=65535,v+=c*m,y+=v>>>16,v&=65535,y+=a*p+o*h+l*m+c*d,y&=65535,We(S<<16|E,y<<16|v,this.unsigned)};ue.mul=ue.multiply;ue.divide=function(e){if(Kt(e)||(e=Bn(e)),e.isZero())throw Error("division by zero");if(Rn){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;var n=(this.unsigned?Rn.div_u:Rn.div_s)(this.low,this.high,e.low,e.high);return We(n,Rn.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?Gr:Fn;var a,o,l;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return Gr;if(e.gt(this.shru(1)))return CE;l=Gr}else{if(this.eq(rn)){if(e.eq(ws)||e.eq(Ig))return rn;if(e.eq(rn))return ws;var c=this.shr(1);return a=c.div(e).shl(1),a.eq(Fn)?e.isNegative()?ws:Ig:(o=this.sub(e.mul(a)),l=a.add(o.div(e)),l)}else if(e.eq(rn))return this.unsigned?Gr:Fn;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();l=Fn}for(o=this;o.gte(e);){a=Math.max(1,Math.floor(o.toNumber()/e.toNumber()));for(var d=Math.ceil(Math.log(a)/Math.LN2),m=d<=48?1:Xc(2,d-48),h=Dn(a),p=h.mul(e);p.isNegative()||p.gt(o);)a-=m,h=Dn(a,this.unsigned),p=h.mul(e);h.isZero()&&(h=ws),l=l.add(h),o=o.sub(p)}return l};ue.div=ue.divide;ue.modulo=function(e){if(Kt(e)||(e=Bn(e)),Rn){var n=(this.unsigned?Rn.rem_u:Rn.rem_s)(this.low,this.high,e.low,e.high);return We(n,Rn.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))};ue.mod=ue.modulo;ue.rem=ue.modulo;ue.not=function(){return We(~this.low,~this.high,this.unsigned)};ue.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32};ue.clz=ue.countLeadingZeros;ue.countTrailingZeros=function(){return this.low?Qb(this.low):Qb(this.high)+32};ue.ctz=ue.countTrailingZeros;ue.and=function(e){return Kt(e)||(e=Bn(e)),We(this.low&e.low,this.high&e.high,this.unsigned)};ue.or=function(e){return Kt(e)||(e=Bn(e)),We(this.low|e.low,this.high|e.high,this.unsigned)};ue.xor=function(e){return Kt(e)||(e=Bn(e)),We(this.low^e.low,this.high^e.high,this.unsigned)};ue.shiftLeft=function(e){return Kt(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?We(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):We(0,this.low<<e-32,this.unsigned)};ue.shl=ue.shiftLeft;ue.shiftRight=function(e){return Kt(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?We(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):We(this.high>>e-32,this.high>=0?0:-1,this.unsigned)};ue.shr=ue.shiftRight;ue.shiftRightUnsigned=function(e){return Kt(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?We(this.low>>>e|this.high<<32-e,this.high>>>e,this.unsigned):e===32?We(this.high,0,this.unsigned):We(this.high>>>e-32,0,this.unsigned)};ue.shru=ue.shiftRightUnsigned;ue.shr_u=ue.shiftRightUnsigned;ue.rotateLeft=function(e){var n;return Kt(e)&&(e=e.toInt()),(e&=63)===0?this:e===32?We(this.high,this.low,this.unsigned):e<32?(n=32-e,We(this.low<<e|this.high>>>n,this.high<<e|this.low>>>n,this.unsigned)):(e-=32,n=32-e,We(this.high<<e|this.low>>>n,this.low<<e|this.high>>>n,this.unsigned))};ue.rotl=ue.rotateLeft;ue.rotateRight=function(e){var n;return Kt(e)&&(e=e.toInt()),(e&=63)===0?this:e===32?We(this.high,this.low,this.unsigned):e<32?(n=32-e,We(this.high<<n|this.low>>>e,this.low<<n|this.high>>>e,this.unsigned)):(e-=32,n=32-e,We(this.low<<n|this.high>>>e,this.high<<n|this.low>>>e,this.unsigned))};ue.rotr=ue.rotateRight;ue.toSigned=function(){return this.unsigned?We(this.low,this.high,!1):this};ue.toUnsigned=function(){return this.unsigned?this:We(this.low,this.high,!0)};ue.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()};ue.toBytesLE=function(){var e=this.high,n=this.low;return[n&255,n>>>8&255,n>>>16&255,n>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]};ue.toBytesBE=function(){var e=this.high,n=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,n>>>24,n>>>16&255,n>>>8&255,n&255]};Ue.fromBytes=function(e,n,a){return a?Ue.fromBytesLE(e,n):Ue.fromBytesBE(e,n)};Ue.fromBytesLE=function(e,n){return new Ue(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,n)};Ue.fromBytesBE=function(e,n){return new Ue(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],n)};typeof BigInt=="function"&&(Ue.fromBigInt=function(e,n){var a=Number(BigInt.asIntN(32,e)),o=Number(BigInt.asIntN(32,e>>BigInt(32)));return We(a,o,n)},Ue.fromValue=function(e,n){return typeof e=="bigint"?Ue.fromBigInt(e,n):Bn(e,n)},ue.toBigInt=function(){var e=BigInt(this.low>>>0),n=BigInt(this.unsigned?this.high>>>0:this.high);return n<<BigInt(32)|e});var it=(t=>(t[t.Null=0]="Null",t[t.Boolean=1]="Boolean",t[t.Integer=2]="Integer",t[t.Long=3]="Long",t[t.Double=4]="Double",t[t.String=5]="String",t[t.Bytes=6]="Bytes",t[t.Date=7]="Date",t))(it||{});class dt extends Ml{valueType;value;constructor(e,n){super(n),this.valueType=dt.getPrimitiveType(e),this.value=e===void 0?null:e}static of(e,n){return new dt(e,n)}static valueFromBytes(e,n){switch(e){case 0:return null;case 1:return!!n[0];case 2:return n[0]|n[1]<<8|n[2]<<16|n[3]<<24;case 4:{const a=new DataView(n.buffer);return n.forEach(function(o,l){a.setUint8(l,o)}),a.getFloat64(0,!0)}case 5:return new TextDecoder("utf-8").decode(n);case 3:return Ue.fromBytesLE(Array.from(n));case 6:return n;case 7:return new Date(Ue.fromBytesLE(Array.from(n),!0).toNumber());default:throw new G(U.ErrUnimplemented,`unimplemented type: ${e}`)}}getValueSize(){switch(this.valueType){case 0:return 8;case 1:return 4;case 2:return 4;case 3:return 8;case 4:return 8;case 5:return this.value.length*2;case 6:return this.value.length;case 7:return 8;default:throw new G(U.ErrUnimplemented,`unimplemented type: ${this.valueType}`)}}getDataSize(){return{data:this.getValueSize(),meta:this.getMetaUsage()}}toJSON(){return this.valueType===5?`"${or(this.value)}"`:`${this.value}`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:this.value,type:"YORKIE_PRIMITIVE"}}deepcopy(){const e=dt.of(this.value,this.getCreatedAt());return e.setMovedAt(this.getMovedAt()),e.setRemovedAt(this.getRemovedAt()),e}getType(){return this.valueType}static getPrimitiveType(e){switch(typeof e){case"undefined":return 0;case"boolean":return 1;case"number":return this.isInteger(e)?2:4;case"string":return 5;case"object":if(e===null)return 0;if(e instanceof Ue)return 3;if(e instanceof Uint8Array)return 6;if(e instanceof Date)return 7}}static isSupport(e){return dt.getPrimitiveType(e)!==void 0}static isInteger(e){return e%1===0}isNumericType(){const e=this.valueType;return e===2||e===3||e===4}getValue(){return this.value}toBytes(){switch(this.valueType){case 0:return new Uint8Array;case 1:return this.value?new Uint8Array([1]):new Uint8Array([0]);case 2:{const e=this.value;return new Uint8Array([e&255,e>>8&255,e>>16&255,e>>24&255])}case 4:{const e=this.value,n=new Uint8Array(8);return new DataView(n.buffer).setFloat64(0,e,!0),n}case 5:return new TextEncoder().encode(this.value);case 3:{const n=this.value.toBytesLE();return Uint8Array.from(n)}case 6:return this.value;case 7:{const e=this.value,n=Ue.fromNumber(e.getTime(),!0).toBytesLE();return Uint8Array.from(n)}default:throw new G(U.ErrUnimplemented,`unimplemented type: ${this.valueType}`)}}}class Wc extends xE{prev;next;movedFrom;constructor(e){super(e),this.value=e}static createAfter(e,n){const a=new Wc(n),o=e.next;return e.next=a,a.prev=e,a.next=o,o&&(o.prev=a),a}remove(e){return this.value.remove(e)}getCreatedAt(){return this.value.getCreatedAt()}getPositionedAt(){return this.value.getPositionedAt()}release(){this.prev&&(this.prev.next=this.next),this.next&&(this.next.prev=this.prev),this.prev=void 0,this.next=void 0}getLength(){return this.value.isRemoved()?0:1}getPrev(){return this.prev}getNext(){return this.next}getMovedFrom(){return this.movedFrom}setMovedFrom(e){this.movedFrom=e}getValue(){return this.value}isRemoved(){return this.value.isRemoved()}}class yl{dummyHead;last;nodeMapByIndex;nodeMapByCreatedAt;constructor(){const e=dt.of(0,Ls);e.setRemovedAt(Ls),this.dummyHead=new Wc(e),this.last=this.dummyHead,this.nodeMapByIndex=new pl,this.nodeMapByCreatedAt=new Map,this.nodeMapByIndex.insert(this.dummyHead),this.nodeMapByCreatedAt.set(this.dummyHead.getCreatedAt().toIDString(),this.dummyHead)}static create(){return new yl}get length(){return this.nodeMapByIndex.length}findNextBeforeExecutedAt(e,n){let a=this.nodeMapByCreatedAt.get(e.toIDString());if(!a)throw new G(U.ErrInvalidArgument,`cant find the given node: ${e.toIDString()}`);for(;a.getValue().getMovedAt()&&a.getValue().getMovedAt().after(n)&&a.getMovedFrom();)a=a.getMovedFrom();for(;a.getNext()&&a.getNext().getPositionedAt().after(n);)a=a.getNext();return a}release(e){this.last===e&&(this.last=e.getPrev()),e.release(),this.nodeMapByIndex.delete(e),this.nodeMapByCreatedAt.delete(e.getValue().getCreatedAt().toIDString())}insertAfter(e,n,a=n.getCreatedAt()){const o=this.findNextBeforeExecutedAt(e,a),l=Wc.createAfter(o,n);return o===this.last&&(this.last=l),this.nodeMapByIndex.insertAfter(o,l),this.nodeMapByCreatedAt.set(l.getCreatedAt().toIDString(),l),l}moveAfter(e,n,a){let o=this.nodeMapByCreatedAt.get(e.toIDString());if(!o)throw new G(U.ErrInvalidArgument,`cant find the given node: ${e.toIDString()}`);let l=this.nodeMapByCreatedAt.get(n.toIDString());if(!l)throw new G(U.ErrInvalidArgument,`cant find the given node: ${n.toIDString()}`);if(o!==l&&a.after(l.getPositionedAt())){const c=l.getPrev();let d=l.getNext();for(this.release(l),l=this.insertAfter(o.getCreatedAt(),l.getValue(),a),l.getValue().setMovedAt(a),l.setMovedFrom(c);d&&d.getPositionedAt().after(a);)o=l,l=d,d=l.getNext(),this.release(l),l=this.insertAfter(o.getCreatedAt(),l.getValue(),a),l.getValue().setMovedAt(a),l.setMovedFrom(c)}}insert(e){this.insertAfter(this.last.getCreatedAt(),e)}getByID(e){return this.nodeMapByCreatedAt.get(e.toIDString())}subPathOf(e){const n=this.nodeMapByCreatedAt.get(e.toIDString());if(n)return String(this.nodeMapByIndex.indexOf(n))}purge(e){const n=this.nodeMapByCreatedAt.get(e.getCreatedAt().toIDString());if(!n)throw new G(U.ErrInvalidArgument,`fail to find the given createdAt: ${e.getCreatedAt().toIDString()}`);this.release(n)}getByIndex(e){return e>=this.length?void 0:this.nodeMapByIndex.findForArray(e)}getPrevCreatedAt(e){let n=this.nodeMapByCreatedAt.get(e.toIDString());do n=n.getPrev();while(this.dummyHead!==n&&n.isRemoved());return n.getValue().getCreatedAt()}delete(e,n){const a=this.nodeMapByCreatedAt.get(e.toIDString()),o=a.isRemoved();return a.remove(n)&&!o&&this.nodeMapByIndex.splayNode(a),a.getValue()}set(e,n,a){const o=this.nodeMapByCreatedAt.get(e.toIDString());if(!o)throw new G(U.ErrInvalidArgument,`cant find the given node: ${e.toIDString()}`);return this.insertAfter(o.getCreatedAt(),n,a),this.delete(e,a)}deleteByIndex(e,n){const a=this.getByIndex(e);if(a)return a.remove(n)&&this.nodeMapByIndex.splayNode(a),a.getValue()}getHead(){return this.dummyHead.getValue()}getLast(){return this.last.getValue()}getLastCreatedAt(){return this.last.getCreatedAt()}toTestString(){const e=[];for(const n of this){const a=`${n.getCreatedAt().toIDString()}:${n.getValue().toJSON()}`;n.isRemoved()?e.push(`{${a}}`):e.push(`[${a}]`)}return e.join("")}*[Symbol.iterator](){let e=this.dummyHead.getNext();for(;e;)yield e,e=e.getNext()}}class Wt extends Mi{elements;constructor(e,n){super(e),this.elements=n}static create(e,n){if(!n)return new Wt(e,yl.create());const a=yl.create();for(const o of n)a.insertAfter(a.getLastCreatedAt(),o.deepcopy());return new Wt(e,a)}subPathOf(e){return this.elements.subPathOf(e)}purge(e){this.elements.purge(e)}insertAfter(e,n,a){this.elements.insertAfter(e,n,a)}moveAfter(e,n,a){this.elements.moveAfter(e,n,a)}get(e){return this.elements.getByIndex(e)?.getValue()}getByID(e){return this.elements.getByID(e)?.getValue()}getHead(){return this.elements.getHead()}getLast(){return this.elements.getLast()}getPrevCreatedAt(e){return this.elements.getPrevCreatedAt(e)}delete(e,n){return this.elements.delete(e,n)}deleteByIndex(e,n){return this.elements.deleteByIndex(e,n)}set(e,n,a){return this.elements.set(e,n,a)}getLastCreatedAt(){return this.elements.getLastCreatedAt()}get length(){return this.elements.length}*[Symbol.iterator](){for(const e of this.elements)e.isRemoved()||(yield e.getValue())}toTestString(){return this.elements.toTestString()}getDescendants(e){for(const n of this.elements){const a=n.getValue();if(e(a,this))return;a instanceof Mi&&a.getDescendants(e)}}getDataSize(){return{data:0,meta:this.getMetaUsage()}}toJSON(){const e=[];for(const n of this)e.push(n.toJSON());return`[${e.join(",")}]`}toJS(){return JSON.parse(this.toJSON())}toJSForTest(){const e={};for(let n=0;n<this.length;n++){const{createdAt:a,value:o,type:l}=this.get(n).toJSForTest();e[n]={key:String(n),createdAt:a,value:o,type:l}}return{createdAt:this.getCreatedAt().toTestString(),value:e,type:"YORKIE_ARRAY"}}toSortedJSON(){return this.toJSON()}getElements(){return this.elements}deepcopy(){const e=Wt.create(this.getCreatedAt());for(const n of this.elements)e.elements.insertAfter(e.getLastCreatedAt(),n.getValue().deepcopy());return e.setRemovedAt(this.getRemovedAt()),e.setMovedAt(this.getMovedAt()),e}}class Zi extends Qn{prevCreatedAt;value;constructor(e,n,a,o){super(e,o),this.prevCreatedAt=n,this.value=a}static create(e,n,a,o){return new Zi(e,n,a,o)}execute(e){const n=e.findByCreatedAt(this.getParentCreatedAt());if(!n)throw new G(U.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(n instanceof Wt))throw new G(U.ErrInvalidArgument,"fail to execute, only array can execute add");const a=n,o=this.value.deepcopy();return a.insertAfter(this.prevCreatedAt,o,this.getExecutedAt()),e.registerElement(o,a),{opInfos:[{type:"add",path:e.createPath(this.getParentCreatedAt()),index:Number(a.subPathOf(this.getEffectedCreatedAt()))}],reverseOp:this.toReverseOperation()}}toReverseOperation(){return hr.create(this.getParentCreatedAt(),this.value.getCreatedAt())}getEffectedCreatedAt(){return this.value.getCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.ADD.${this.value.toJSON()}`}getPrevCreatedAt(){return this.prevCreatedAt}getValue(){return this.value}setPrevCreatedAt(e){this.prevCreatedAt=e}}class hr extends Qn{createdAt;constructor(e,n,a){super(e,a),this.createdAt=n}static create(e,n,a){return new hr(e,n,a)}execute(e,n){const a=e.findByCreatedAt(this.getParentCreatedAt());if(!a)throw new G(U.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(a instanceof Mi))throw new G(U.ErrInvalidArgument,`only object and array can execute remove: ${a}`);if(n===ut.UndoRedo){let m=a.getByID(this.createdAt);for(;m;){if(m.getRemovedAt())return;m=e.findElementPairByCreatedAt(m.getCreatedAt())?.parent}}const o=a.subPathOf(this.createdAt),l=this.toReverseOperation(a),c=a.delete(this.createdAt,this.getExecutedAt());return e.registerRemovedElement(c),{opInfos:a instanceof Wt?[{type:"remove",path:e.createPath(this.getParentCreatedAt()),index:Number(o)}]:[{type:"remove",path:e.createPath(this.getParentCreatedAt()),key:o}],reverseOp:l}}toReverseOperation(e){if(e instanceof Wt){const n=e.getByID(this.createdAt);if(n!==void 0){const a=e.getPrevCreatedAt(this.createdAt);return Zi.create(this.getParentCreatedAt(),a,n.deepcopy())}}if(e instanceof Xt){const n=e.subPathOf(this.createdAt);if(n!==void 0){const a=e.get(n);if(a!==void 0)return Sa.create(n,a.deepcopy(),this.getParentCreatedAt())}}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.REMOVE.${this.createdAt.toTestString()}`}getCreatedAt(){return this.createdAt}setCreatedAt(e){this.createdAt=e}}class Sa extends Qn{key;value;constructor(e,n,a,o){super(a,o),this.key=e,this.value=n}static create(e,n,a,o){return new Sa(e,n,a,o)}execute(e,n){const a=e.findByCreatedAt(this.getParentCreatedAt());if(!a)throw new G(U.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(a instanceof Xt))throw new G(U.ErrInvalidArgument,"fail to execute, only object can execute set");if(n===ut.UndoRedo){let m=a;for(;m;){if(m.getRemovedAt())return;m=e.findElementPairByCreatedAt(m.getCreatedAt())?.parent}}const o=a.get(this.key),l=this.toReverseOperation(o),c=this.value.deepcopy(),d=a.set(this.key,c,this.getExecutedAt());return n===ut.UndoRedo&&e.findByCreatedAt(c.getCreatedAt())&&e.deregisterElement(c),e.registerElement(c,a),d&&e.registerRemovedElement(d),{opInfos:[{type:"set",path:e.createPath(this.getParentCreatedAt()),key:this.key}],reverseOp:l}}toReverseOperation(e){let n=hr.create(this.getParentCreatedAt(),this.value.getCreatedAt());return e!==void 0&&!e.isRemoved()&&(n=Sa.create(this.key,e.deepcopy(),this.getParentCreatedAt())),n}getEffectedCreatedAt(){return this.value.getCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.SET.${this.key}=${this.value.toSortedJSON()}`}getKey(){return this.key}getValue(){return this.value}}class Jn extends Qn{prevCreatedAt;createdAt;constructor(e,n,a,o){super(e,o),this.prevCreatedAt=n,this.createdAt=a}static create(e,n,a,o){return new Jn(e,n,a,o)}execute(e){const n=e.findByCreatedAt(this.getParentCreatedAt());if(!n)throw new G(U.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(n instanceof Wt))throw new G(U.ErrInvalidArgument,"fail to execute, only array can execute move");const a=n,o=this.toReverseOperation(a),l=Number(a.subPathOf(this.createdAt));a.moveAfter(this.prevCreatedAt,this.createdAt,this.getExecutedAt());const c=Number(a.subPathOf(this.createdAt));return{opInfos:[{type:"move",path:e.createPath(this.getParentCreatedAt()),index:c,previousIndex:l}],reverseOp:o}}toReverseOperation(e){const n=e.getPrevCreatedAt(this.createdAt);return Jn.create(this.getParentCreatedAt(),n,this.createdAt)}getEffectedCreatedAt(){return this.createdAt}toTestString(){return`${this.getParentCreatedAt().toTestString()}.MOVE`}getPrevCreatedAt(){return this.prevCreatedAt}getCreatedAt(){return this.createdAt}setPrevCreatedAt(e){this.prevCreatedAt=e}setCreatedAt(e){this.createdAt=e}}const MI=(t,e)=>t===e?0:t<e?-1:1;class BI{key;value;left;right;isRed;constructor(e,n,a){this.key=e,this.value=n,this.isRed=a}}class LI{stack;constructor(e){this.stack=[],this.traverseInorder(e)}traverseInorder(e){e&&(this.traverseInorder(e.left),this.stack.push({key:e.key,value:e.value}),this.traverseInorder(e.right))}}class DE{root;comparator;counter;constructor(e){this.comparator=typeof e<"u"?e:MI,this.counter=0}put(e,n){return this.root=this.putInternal(e,n,this.root),this.root.isRed=!1,n}get(e){const n=this.getInternal(e,this.root);return n?n.value:void 0}remove(e){!this.isRed(this.root.left)&&!this.isRed(this.root.right)&&(this.root.isRed=!0),this.root=this.removeInternal(this.root,e),this.root&&(this.root.isRed=!1)}getIterator(){return new LI(this.root)}values(){const e=[];for(const n of this.getIterator().stack)e.push(n.value);return e}floorEntry(e){let n=this.root,a;for(;n;){const o=this.comparator(e,n.key);if(o===0)return n;o<0?n=n.left:(a=n,n=n.right)}return a}lastEntry(){if(!this.root)return this.root;let e=this.root;for(;e.right;)e=e.right;return e}size(){return this.counter}isEmpty(){return this.counter===0}getInternal(e,n){for(;n;){const a=this.comparator(e,n.key);if(a===0)return n;a<0?n=n.left:a>0&&(n=n.right)}}putInternal(e,n,a){if(!a)return this.counter+=1,new BI(e,n,!0);const o=this.comparator(e,a.key);return o<0?a.left=this.putInternal(e,n,a.left):o>0?a.right=this.putInternal(e,n,a.right):a.value=n,this.isRed(a.right)&&!this.isRed(a.left)&&(a=this.rotateLeft(a)),this.isRed(a.left)&&this.isRed(a.left.left)&&(a=this.rotateRight(a)),this.isRed(a.left)&&this.isRed(a.right)&&this.flipColors(a),a}removeInternal(e,n){if(this.comparator(n,e.key)<0)!this.isRed(e.left)&&!this.isRed(e.left.left)&&(e=this.moveRedLeft(e)),e.left=this.removeInternal(e.left,n);else{if(this.isRed(e.left)&&(e=this.rotateRight(e)),this.comparator(n,e.key)===0&&!e.right){this.counter-=1;return}if(!this.isRed(e.right)&&!this.isRed(e.right.left)&&(e=this.moveRedRight(e)),this.comparator(n,e.key)===0){this.counter-=1;const a=this.min(e.right);e.value=a.value,e.key=a.key,e.right=this.removeMin(e.right)}else e.right=this.removeInternal(e.right,n)}return this.fixUp(e)}min(e){return e.left?this.min(e.left):e}removeMin(e){if(e.left)return!this.isRed(e.left)&&!this.isRed(e.left.left)&&(e=this.moveRedLeft(e)),e.left=this.removeMin(e.left),this.fixUp(e)}fixUp(e){return this.isRed(e.right)&&(e=this.rotateLeft(e)),this.isRed(e.left)&&this.isRed(e.left.left)&&(e=this.rotateRight(e)),this.isRed(e.left)&&this.isRed(e.right)&&this.flipColors(e),e}moveRedLeft(e){return this.flipColors(e),this.isRed(e.right.left)&&(e.right=this.rotateRight(e.right),e=this.rotateLeft(e),this.flipColors(e)),e}moveRedRight(e){return this.flipColors(e),this.isRed(e.left.left)&&(e=this.rotateRight(e),this.flipColors(e)),e}isRed(e){return e&&e.isRed}rotateLeft(e){const n=e.right;return e.right=n.left,n.left=e,n.isRed=n.left.isRed,n.left.isRed=!0,n}rotateRight(e){const n=e.left;return e.left=n.right,n.right=e,n.isRed=n.right.isRed,n.right.isRed=!0,n}flipColors(e){e.isRed=!e.isRed,e.left.isRed=!e.left.isRed,e.right.isRed=!e.right.isRed}}function zI(t){return t?iS(t.live)+iS(t.gc):0}function iS(t){return t.data+t.meta}function Ut(t,...e){for(const n of e)t.data+=n.data,t.meta+=n.meta}function ma(t,e){t.data-=e.data,t.meta-=e.meta}class ur{createdAt;offset;constructor(e,n){this.createdAt=e,this.offset=n}static of(e,n){return new ur(e,n)}static fromStruct(e){return ur.of(_n.fromStruct(e.createdAt),e.offset)}getCreatedAt(){return this.createdAt}getOffset(){return this.offset}equals(e){return this.createdAt.compare(e.createdAt)===0&&this.offset===e.offset}hasSameCreatedAt(e){return this.createdAt.compare(e.createdAt)===0}split(e){return new ur(this.createdAt,this.offset+e)}toStruct(){return{createdAt:this.createdAt.toStruct(),offset:this.offset}}toTestString(){return`${this.createdAt.toTestString()}:${this.offset}`}toIDString(){return`${this.createdAt.toIDString()}:${this.offset}`}}const UI=ur.of(Ls,0);class zt{id;relativeOffset;constructor(e,n){this.id=e,this.relativeOffset=n}static of(e,n){return new zt(e,n)}static fromStruct(e){const n=ur.fromStruct(e.id);return zt.of(n,e.relativeOffset)}getID(){return this.id}getRelativeOffset(){return this.relativeOffset}getAbsoluteID(){return ur.of(this.id.getCreatedAt(),this.id.getOffset()+this.relativeOffset)}toTestString(){return`${this.id.toTestString()}:${this.relativeOffset}`}toStruct(){return{id:this.id.toStruct(),relativeOffset:this.relativeOffset}}equals(e){return this.id.equals(e.id)?this.relativeOffset===e.relativeOffset:!1}}class Bi extends xE{id;removedAt;prev;next;insPrev;insNext;constructor(e,n,a){super(n),this.id=e,this.removedAt=a}static create(e,n){return new Bi(e,n)}static createComparator(){return(e,n)=>{const a=e.getCreatedAt().compare(n.getCreatedAt());return a!==0?a:e.getOffset()>n.getOffset()?1:e.getOffset()<n.getOffset()?-1:0}}getID(){return this.id}getCreatedAt(){return this.id.getCreatedAt()}getLength(){return this.removedAt?0:this.getContentLength()}getContentLength(){return this.value&&this.value.length||0}getPrev(){return this.prev}getNext(){return this.next}getInsPrev(){return this.insPrev}getInsNext(){return this.insNext}getInsPrevID(){return this.insPrev.getID()}setPrev(e){this.prev=e,e&&(e.next=this)}setNext(e){this.next=e,e&&(e.prev=this)}setInsPrev(e){this.insPrev=e,e&&(e.insNext=this)}setInsNext(e){this.insNext=e,e&&(e.insPrev=this)}hasNext(){return!!this.next}hasInsPrev(){return!!this.insPrev}isRemoved(){return!!this.removedAt}getRemovedAt(){return this.removedAt}split(e){return new Bi(this.id.split(e),this.splitValue(e),this.removedAt)}canRemove(e,n,a){return n?!!(!this.removedAt||!a&&e?.after(this.removedAt)):!1}canStyle(e,n){return this.getCreatedAt().getLamport()<=n&&(!this.removedAt||e.after(this.removedAt))}setRemovedAt(e){this.removedAt=e}remove(e){if(!this.removedAt){this.removedAt=e;return}e.after(this.removedAt)&&(this.removedAt=e)}createPosRange(){return[zt.of(this.id,0),zt.of(this.id,this.getLength())]}getDataSize(){const e=this.value.getDataSize();return this.id&&(e.meta+=lr),this.removedAt&&(e.meta+=lr),e}deepcopy(){return new Bi(this.id,this.value,this.removedAt)}toTestString(){return`${this.id.toTestString()} ${this.value?this.value:""}`}splitValue(e){const n=this.value;return this.value=n.substring(0,e),n.substring(e,n.length)}toIDString(){return this.id.toIDString()}}class Ys{head;treeByIndex;treeByID;constructor(){this.head=Bi.create(UI),this.treeByIndex=new pl,this.treeByID=new DE(Bi.createComparator()),this.treeByIndex.insert(this.head),this.treeByID.put(this.head.getID(),this.head)}static create(){return new Ys}edit(e,n,a,o){const l={data:0,meta:0},[c,d,m]=this.findNodeWithSplit(e[1],n),[h,p,y]=this.findNodeWithSplit(e[0],n);Ut(l,d,p);const v=this.findBetween(y,m),[S,E]=this.deleteNodes(v,n,o),A=m?m.getID():c.getID();let R=zt.of(A,0);if(a){const N=this.posToIndex(h.createPosRange()[1],!0),I=this.insertAfter(h,Bi.create(ur.of(n,0),a));Ut(l,I.getDataSize()),S.length&&S[S.length-1].from===N?S[S.length-1].value=a:S.push({actor:n.getActorID(),from:N,to:N,value:a}),R=zt.of(I.getID(),I.getContentLength())}const x=[],Y=[];for(const[,N]of E)x.push({parent:this,child:N}),Y.push(N.getValue());return[R,x,l,S,Y]}indexToPos(e){const[n,a]=this.treeByIndex.findForText(e),o=n;return zt.of(o.getID(),a)}findIndexesFromRange(e){const[n,a]=e;return[this.posToIndex(n,!1),this.posToIndex(a,!0)]}posToIndex(e,n){const a=e.getAbsoluteID(),o=n?this.findFloorNodePreferToLeft(a):this.findFloorNode(a);if(!o)throw new G(U.ErrInvalidArgument,`the node of the given id should be found: ${a.toTestString()}`);const l=this.treeByIndex.indexOf(o),c=o.isRemoved()?0:a.getOffset()-o.getID().getOffset();return l+c}findNode(e){return this.findFloorNode(e)}get length(){return this.treeByIndex.length}getTreeByIndex(){return this.treeByIndex}getTreeByID(){return this.treeByID}toString(){const e=[];for(const n of this)n.isRemoved()||e.push(n.getValue());return e.join("")}*[Symbol.iterator](){let e=this.head.getNext();for(;e;)yield e,e=e.getNext()}getHead(){return this.head}deepcopy(){const e=new Ys;let n=this.head.getNext(),a=e.head,o;for(;n;){if(o=e.insertAfter(a,n.deepcopy()),n.hasInsPrev()){const l=e.findNode(n.getInsPrevID());o.setInsPrev(l)}a=o,n=n.getNext()}return e}normalizePos(e){const n=this.findFloorNode(e.getID());if(!n)throw new G(U.ErrInvalidArgument,`the node of the given id should be found: ${e.getID().toTestString()}`);let a=e.getRelativeOffset(),o=n,l=n.getPrev();for(;l;)a+=l.getLength(),o=l,l=l.getPrev();return zt.of(o.getID(),a)}refinePos(e){let n=this.findFloorNode(e.getID());if(!n)throw new G(U.ErrInvalidArgument,`the node of the given id should be found: ${e.getID().toTestString()}`);let a=e.getRelativeOffset(),o=n.getContentLength();for(;a>o;){a-=o;const l=n.getNext();if(!l)return zt.of(n.getID(),o);n=l,o=n.getLength()}return zt.of(n.getID(),a)}toTestString(){const e=[];let n=this.head;for(;n;)n.isRemoved()?e.push(`{${n.toTestString()}}`):e.push(`[${n.toTestString()}]`),n=n.getNext();return e.join("")}insertAfter(e,n){const a=e.getNext();return n.setPrev(e),a&&a.setPrev(n),this.treeByID.put(n.getID(),n),this.treeByIndex.insertAfter(e,n),n}findNodeWithSplit(e,n){const a=e.getAbsoluteID();let o=this.findFloorNodePreferToLeft(a);const l=a.getOffset()-o.getID().getOffset(),[,c]=this.splitNode(o,l);for(;o.hasNext()&&o.getNext().getCreatedAt().after(n);)o=o.getNext();return[o,c,o.getNext()]}findFloorNodePreferToLeft(e){let n=this.findFloorNode(e);if(!n)throw new G(U.ErrInvalidArgument,`the node of the given id should be found: ${e.toTestString()}`);if(e.getOffset()>0&&n.getID().getOffset()==e.getOffset()){if(!n.hasInsPrev())return n;n=n.getInsPrev()}return n}findFloorNode(e){const n=this.treeByID.floorEntry(e);if(n&&!(!n.key.equals(e)&&!n.key.hasSameCreatedAt(e)))return n.value}findBetween(e,n){const a=[];let o=e;for(;o&&o!==n;)a.push(o),o=o.getNext();return a}splitNode(e,n){const a={data:0,meta:0};if(n>e.getContentLength())throw new G(U.ErrInvalidArgument,"offset should be less than or equal to length");if(n===0)return[e,a];if(n===e.getContentLength())return[e.getNext(),a];const o=e.getDataSize(),l=e.split(n);this.treeByIndex.updateWeight(l),this.insertAfter(e,l);const c=e.getInsNext();return c&&c.setInsPrev(l),l.setInsPrev(e),Ut(a,e.getDataSize(),l.getDataSize()),ma(a,o),[l,a]}deleteNodes(e,n,a){if(!e.length)return[[],new Map];const o=a===void 0||a.size()===0,l=[],c=[],[d,m]=this.findEdgesOfCandidates(e);c.push(d);for(const y of e){let v=!1;if(o)v=!0;else{const E=a?.get(y.getCreatedAt().getActorID());E&&E>=y.getCreatedAt().getLamport()&&(v=!0)}let S=!1;if(y.getRemovedAt()){const E=a?.get(y.getRemovedAt().getActorID());(o||E&&E>=y.getRemovedAt().getLamport())&&(S=!0)}y.canRemove(n,v,S)?l.push(y):c.push(y)}c.push(m);const h=this.makeChanges(c,n),p=new Map;for(const y of l)p.set(y.getID().toIDString(),y),y.remove(n);return this.deleteIndexNodes(c),[h,p]}findEdgesOfCandidates(e){return[e[0].getPrev(),e[e.length-1].getNext()]}makeChanges(e,n){const a=[];let o,l;for(let c=0;c<e.length-1;c++){const d=e[c],m=e[c+1];d.getNext()!=m&&([o]=this.findIndexesFromRange(d.getNext().createPosRange()),m?[,l]=this.findIndexesFromRange(m.getPrev().createPosRange()):l=this.treeByIndex.length,o<l&&a.push({actor:n.getActorID(),from:o,to:l}))}return a.reverse()}deleteIndexNodes(e){for(let n=0;n<e.length-1;n++){const a=e[n],o=e[n+1];a.getNext()!=o&&this.treeByIndex.deleteRange(a,o)}}purge(e){this.treeByIndex.delete(e),this.treeByID.remove(e.getID());const n=e.getPrev(),a=e.getNext(),o=e.getInsPrev(),l=e.getInsNext();n&&n.setNext(a),a&&a.setPrev(n),e.setPrev(void 0),e.setNext(void 0),o&&o.setInsNext(l),l&&l.setInsPrev(o),e.setInsPrev(void 0),e.setInsNext(void 0)}}class Oi{key;value;updatedAt;_isRemoved;constructor(e,n,a,o){this.key=e,this.value=n,this.updatedAt=a,this._isRemoved=o}static of(e,n,a,o){return new Oi(e,n,a,o)}getKey(){return this.key}getValue(){return this.value}getUpdatedAt(){return this.updatedAt}isRemoved(){return this._isRemoved}toIDString(){return`${this.updatedAt.toIDString()}:${this.key}`}getRemovedAt(){if(this._isRemoved)return this.updatedAt}getDataSize(){return{data:(this.key.length+this.value.length)*2,meta:lr}}}class Kr{nodeMapByKey;numberOfRemovedElement;constructor(){this.nodeMapByKey=new Map,this.numberOfRemovedElement=0}static create(){return new Kr}getNodeMapByKey(){return this.nodeMapByKey}set(e,n,a){const o=this.nodeMapByKey.get(e);if(o&&o.isRemoved()&&a.after(o.getUpdatedAt())&&(this.numberOfRemovedElement-=1),o===void 0||a.after(o.getUpdatedAt())){const l=Oi.of(e,n,a,!1);return this.nodeMapByKey.set(e,l),o!==void 0&&o.isRemoved()?[o,l]:[void 0,l]}return o.isRemoved()?[o,void 0]:[void 0,void 0]}setInternal(e,n,a,o){const l=Oi.of(e,n,a,o);this.nodeMapByKey.set(e,l),o&&this.numberOfRemovedElement++}remove(e,n){const a=this.nodeMapByKey.get(e),o=[];if(a===void 0||n.after(a.getUpdatedAt())){if(a===void 0){this.numberOfRemovedElement+=1;const d=Oi.of(e,"",n,!0);return this.nodeMapByKey.set(e,d),o.push(d),o}const l=a.isRemoved();l||(this.numberOfRemovedElement+=1),l&&o.push(a);const c=Oi.of(e,a.getValue(),n,!0);return this.nodeMapByKey.set(e,c),o.push(c),o}return o}has(e){if(this.nodeMapByKey.has(e)){const n=this.nodeMapByKey.get(e);return n!==void 0&&!n.isRemoved()}return!1}get(e){if(this.nodeMapByKey.has(e))return this.nodeMapByKey.get(e).getValue()}deepcopy(){const e=new Kr;for(const[,n]of this.nodeMapByKey)e.setInternal(n.getKey(),n.getValue(),n.getUpdatedAt(),n.isRemoved());return e}toJSON(){if(!this.size())return"{}";const e=[];for(const[n,a]of this.nodeMapByKey)a.isRemoved()||e.push(`"${or(n)}":"${or(a.getValue())}"`);return`{${e.join(",")}}`}size(){return this.nodeMapByKey.size-this.numberOfRemovedElement}toObject(){const e={};for(const[n,a]of this.nodeMapByKey)a.isRemoved()||(e[n]=a.getValue());return e}*[Symbol.iterator](){for(const[,e]of this.nodeMapByKey)yield e}purge(e){const n=this.nodeMapByKey.get(e.getKey());n==null||n.toIDString()!=e.toIDString()||(this.nodeMapByKey.delete(e.getKey()),this.numberOfRemovedElement--)}}function kn(t){if(t instanceof Map){const e=Array.from(t);return new Map(JSON.parse(JSON.stringify(e)))}return JSON.parse(JSON.stringify(t))}const _E=t=>t?Object.entries(t).length===0:!0,Zs=t=>{const e={};for(const[n,a]of Object.entries(t))e[n]=JSON.stringify(a);return e},Xr=t=>{const e={};for(const[n,a]of Object.entries(t))e[n]=JSON.parse(a);return e};class vl{attributes;content;constructor(e){this.attributes=Kr.create(),this.content=e}static create(e){return new vl(e)}get length(){return this.content.length}substring(e,n){const a=new vl(this.content.substring(e,n));return a.attributes=this.attributes.deepcopy(),a}setAttr(e,n,a){return this.attributes.set(e,n,a)}getAttrs(){return this.attributes}toString(){return this.content}getDataSize(){const e={data:0,meta:0};e.data+=this.content.length*2;for(const n of this.attributes){const a=n.getDataSize();e.meta+=a.meta,e.data+=a.data}return e}toJSON(){const e=or(this.content),n=this.attributes.toObject(),a=[];for(const[o,l]of Object.entries(n)){const c=JSON.parse(l),d=typeof c=="string"?`"${or(o)}":"${or(c)}"`:`"${or(o)}":${String(c)}`;a.push(d)}return a.sort(),a.length===0?`{"val":"${e}"}`:`{"attrs":{${a.join(",")}},"val":"${e}"}`}getAttributes(){return this.attributes.toObject()}getContent(){return this.content}purge(e){this.attributes&&e instanceof Oi&&this.attributes.purge(e)}getGCPairs(){const e=[];for(const n of this.attributes)n.getRemovedAt()&&e.push({parent:this,child:n});return e}}class ln extends Ml{rgaTreeSplit;constructor(e,n){super(n),this.rgaTreeSplit=e}static create(e,n){return new ln(e,n)}edit(e,n,a,o,l){const c=n?vl.create(n):void 0;if(c&&o)for(const[S,E]of Object.entries(o))c.setAttr(S,E,a);const[d,m,h,p,y]=this.rgaTreeSplit.edit(e,a,c,l);return[p.map(S=>({...S,value:S.value?{attributes:Xr(S.value.getAttributes()),content:S.value.getContent()}:{attributes:void 0,content:""},type:"content"})),m,h,[d,d],y]}setStyle(e,n,a,o){const l={data:0,meta:0},[,c,d]=this.rgaTreeSplit.findNodeWithSplit(e[1],a),[,m,h]=this.rgaTreeSplit.findNodeWithSplit(e[0],a);Ut(l,c,m);const p=[],y=this.rgaTreeSplit.findBetween(h,d),v=[];for(const E of y){const A=E.getCreatedAt().getActorID();let R=Cg;o!=null&&(R=o.get(A)?o.get(A):0n),E.canStyle(a,R)&&v.push(E)}const S=[];for(const E of v){if(E.isRemoved())continue;const[A,R]=this.rgaTreeSplit.findIndexesFromRange(E.createPosRange());p.push({type:"style",actor:a.getActorID(),from:A,to:R,value:{attributes:Xr(n)}});for(const[x,Y]of Object.entries(n)){const[N]=E.getValue().setAttr(x,Y,a);N!==void 0&&S.push({parent:E.getValue(),child:N});const I=E.getValue().getAttrs().getNodeMapByKey().get(x);I!==void 0&&Ut(l,I.getDataSize())}}return[S,l,p]}indexRangeToPosRange(e,n){const a=this.rgaTreeSplit.indexToPos(e);return e===n?[a,a]:[a,this.rgaTreeSplit.indexToPos(n)]}get length(){return this.rgaTreeSplit.length}getTreeByIndex(){return this.rgaTreeSplit.getTreeByIndex()}getTreeByID(){return this.rgaTreeSplit.getTreeByID()}refinePos(e){return this.rgaTreeSplit.refinePos(e)}normalizePos(e){return this.rgaTreeSplit.normalizePos(e)}getDataSize(){const e={data:0,meta:0};for(const n of this.rgaTreeSplit){if(n.isRemoved())continue;const a=n.getDataSize();e.data+=a.data,e.meta+=a.meta}return{data:e.data,meta:e.meta+this.getMetaUsage()}}toJSON(){const e=[];for(const n of this.rgaTreeSplit)n.isRemoved()||e.push(n.getValue().toJSON());return`[${e.join(",")}]`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:JSON.parse(this.toJSON()),type:"YORKIE_TEXT"}}toString(){return this.rgaTreeSplit.toString()}values(){const e=[];for(const n of this.rgaTreeSplit)if(!n.isRemoved()){const a=n.getValue();e.push({attributes:Xr(a.getAttributes()),content:a.getContent()})}return e}getRGATreeSplit(){return this.rgaTreeSplit}toTestString(){return this.rgaTreeSplit.toTestString()}deepcopy(){const e=new ln(this.rgaTreeSplit.deepcopy(),this.getCreatedAt());return e.setRemovedAt(this.getRemovedAt()),e.setMovedAt(this.getMovedAt()),e}findIndexesFromRange(e){return this.rgaTreeSplit.findIndexesFromRange(e)}posToIndex(e,n=!1){return this.rgaTreeSplit.posToIndex(e,n)}getGCPairs(){const e=[];for(const n of this.rgaTreeSplit){n.getRemovedAt()&&e.push({parent:this.rgaTreeSplit,child:n});for(const a of n.getValue().getGCPairs())e.push(a)}return e}}class Yi extends Qn{fromPos;toPos;content;attributes;isUndoOp;constructor(e,n,a,o,l,c,d){super(e,c),this.fromPos=n,this.toPos=a,this.content=o,this.attributes=l,this.isUndoOp=d}static create(e,n,a,o,l,c,d){return new Yi(e,n,a,o,l,c,d)}execute(e,n,a){const o=e.findByCreatedAt(this.getParentCreatedAt());if(!o)throw new G(U.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(o instanceof ln))throw new G(U.ErrInvalidArgument,"fail to execute, only Text can execute edit");const l=o;this.isUndoOp&&(this.fromPos=l.refinePos(this.fromPos),this.toPos=l.refinePos(this.toPos));const[c,d,m,,h]=l.edit([this.fromPos,this.toPos],this.content,this.getExecutedAt(),Object.fromEntries(this.attributes),a),p=this.toReverseOperation(h,l.normalizePos(this.fromPos));e.acc(m);for(const y of d)e.registerGCPair(y);return{opInfos:c.map(({from:y,to:v,value:S})=>({type:"edit",from:y,to:v,value:S,path:e.createPath(this.getParentCreatedAt())})),reverseOp:p}}toReverseOperation(e,n){const a=e?.length?e.map(l=>l.getContent()).join(""):"";let o;if(e.length===1){const l=e[0].getAttributes();l&&(o=Array.from(Object.entries(l)))}return Yi.create(this.getParentCreatedAt(),n,zt.of(n.getID(),n.getRelativeOffset()+(this.content?.length??0)),a,o?new Map(o):new Map,void 0,!0)}normalizePos(e){const n=e.findByCreatedAt(this.getParentCreatedAt());if(!n)throw new G(U.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(n instanceof ln))throw new G(U.ErrInvalidArgument,"only Text can normalize edit");const a=n,o=a.normalizePos(this.fromPos).getRelativeOffset(),l=a.normalizePos(this.toPos).getRelativeOffset();return[o,l]}reconcileOperation(e,n,a){if(!this.isUndoOp||e>n)return;const o=n-e,l=this.fromPos.getRelativeOffset(),c=this.toPos.getRelativeOffset(),d=(m,h)=>{this.fromPos=zt.of(this.fromPos.getID(),Math.max(0,m)),this.toPos=zt.of(this.toPos.getID(),Math.max(0,h))};if(n<=l){d(l-o+a,c-o+a);return}if(!(c<=e)){if(e<=l&&c<=n&&e!==n){d(e,e);return}if(l<=e&&n<=c&&l!==c){d(l,c-o+a);return}if(e<l&&l<n&&n<c){d(e,e+(c-n));return}if(l<e&&e<c&&c<n){d(l,e);return}}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),n=this.fromPos.toTestString(),a=this.toPos.toTestString(),o=this.content;return`${e}.EDIT(${n},${a},${o})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getContent(){return this.content}getAttributes(){return this.attributes||new Map}}class Bl extends Qn{fromPos;toPos;attributes;constructor(e,n,a,o,l){super(e,l),this.fromPos=n,this.toPos=a,this.attributes=o}static create(e,n,a,o,l){return new Bl(e,n,a,o,l)}execute(e,n,a){const o=e.findByCreatedAt(this.getParentCreatedAt());if(!o)throw new G(U.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(o instanceof ln))throw new G(U.ErrInvalidArgument,"fail to execute, only Text can execute edit");const l=o,[c,d,m]=l.setStyle([this.fromPos,this.toPos],this.attributes?Object.fromEntries(this.attributes):{},this.getExecutedAt(),a);e.acc(d);for(const h of c)e.registerGCPair(h);return{opInfos:m.map(({from:h,to:p,value:y})=>({type:"style",from:h,to:p,value:y,path:e.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),n=this.fromPos.toTestString(),a=this.toPos.toTestString(),o=this.attributes;return`${e}.STYL(${n},${a},${JSON.stringify(o)})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getAttributes(){return this.attributes}}const YI=2,ZI="root",cr="text";function Fo(t,e,n=!1){let a=0;const o=n?t.allChildren:t.children;for(let l=0;l<e;l++){const c=o[l];!c||!n&&c.isRemoved||(a+=c.paddedSize(n))}return a}class GI{type;parent;_children;visibleSize;totalSize;constructor(e,n=[]){if(this.type=e,this.visibleSize=0,this.totalSize=0,this._children=n,this.isText&&this._children.length>0)throw new G(U.ErrRefused,"Text node cannot have children")}updateAncestorsSize(e,n=!1){let a=this.parent;for(;a;){if(n)a.totalSize+=e;else if(a.visibleSize+=e,a.isRemoved)break;a=a.parent}}updateDescendantsSize(e=!1){let n=0;for(const a of this._children){const o=a.updateDescendantsSize(e);!e&&a.isRemoved||(n+=o)}return e?this.totalSize+=n:this.visibleSize+=n,this.paddedSize(e)}get isText(){return this.type===cr}paddedSize(e=!1){let n=this.visibleSize;return e&&(n=this.totalSize),this.isText||(n+=YI),n}isAncestorOf(e){return kI(this,e)}get nextSibling(){const e=this.parent.findOffset(this),n=this.parent.children[e+1];if(n)return n}get prevSibling(){const e=this.parent.findOffset(this),n=this.parent.children[e-1];if(n)return n}splitText(e,n){const a={data:0,meta:0};if(e===0||e===this.visibleSize)return[void 0,a];const o=this.value.slice(0,e),l=this.value.slice(e);if(!l.length)return[void 0,a];const c=this.getDataSize();this.value=o;const d=this.cloneText(e+n);return d.value=l,this.parent.insertAfterInternal(d,this),Ut(a,this.getDataSize(),d.getDataSize()),ma(a,c),[d,a]}get children(){return this._children.filter(e=>!e.isRemoved)}get allChildren(){return[...this._children]}hasTextChild(){return this.children.length>0&&this.children.every(e=>e.isText)}getChildrenText(){return this.isText?this.value:this.hasTextChild()?this.children.map(e=>e.value).join(""):""}append(...e){if(this.isText)throw new G(U.ErrRefused,"Text node cannot have children");this._children.push(...e);for(const n of e)n.parent=this,n.updateAncestorsSize(n.paddedSize()),n.updateAncestorsSize(n.paddedSize(!0),!0)}prepend(...e){if(this.isText)throw new G(U.ErrRefused,"Text node cannot have children");this._children.unshift(...e);for(const n of e)n.parent=this}insertBefore(e,n){if(this.isText)throw new G(U.ErrRefused,"Text node cannot have children");const a=this._children.indexOf(n);if(a===-1)throw new G(U.ErrInvalidArgument,"child not found");this.insertAtInternal(e,a),e.updateAncestorsSize(e.paddedSize()),e.updateAncestorsSize(e.paddedSize(!0),!0)}insertAfter(e,n){if(this.isText)throw new G(U.ErrRefused,"Text node cannot have children");const a=this._children.indexOf(n);if(a===-1)throw new G(U.ErrInvalidArgument,"child not found");this.insertAtInternal(e,a+1),e.updateAncestorsSize(e.paddedSize()),e.updateAncestorsSize(e.paddedSize(!0),!0)}insertAt(e,n){if(this.isText)throw new G(U.ErrRefused,"Text node cannot have children");this.insertAtInternal(e,n),e.updateAncestorsSize(e.paddedSize()),e.updateAncestorsSize(e.paddedSize(!0),!0)}removeChild(e){if(this.isText)throw new G(U.ErrRefused,"Text node cannot have children");const n=this._children.indexOf(e);if(n===-1)throw new G(U.ErrInvalidArgument,"child not found");this._children.splice(n,1),e.updateAncestorsSize(-e.paddedSize(!0),!0),e.parent=void 0}splitElement(e,n){const a={data:0,meta:0},o=this.getDataSize(),l=this.cloneElement(n);this.parent.insertAfterInternal(l,this),l.updateAncestorsSize(l.paddedSize()),l.updateAncestorsSize(l.paddedSize(!0),!0);const c=this.children.slice(0,e),d=this.children.slice(e);this._children=c,l._children=d,this.visibleSize=this._children.reduce((m,h)=>m+h.paddedSize(),0),this.totalSize=this._children.reduce((m,h)=>m+h.paddedSize(!0),0),l.visibleSize=l._children.reduce((m,h)=>m+h.paddedSize(!0),0),l.totalSize=l._children.reduce((m,h)=>m+h.paddedSize(!0),0);for(const m of l._children)m.parent=l;return Ut(a,this.getDataSize(),l.getDataSize()),ma(a,o),[l,a]}insertAfterInternal(e,n){if(this.isText)throw new G(U.ErrRefused,"Text node cannot have children");const a=this._children.indexOf(n);if(a===-1)throw new G(U.ErrInvalidArgument,"child not found");this.insertAtInternal(e,a+1)}insertAtInternal(e,n){if(this.isText)throw new G(U.ErrRefused,"Text node cannot have children");this._children.splice(n,0,e),e.parent=this}findOffset(e,n=!1){if(this.isText)throw new G(U.ErrRefused,"Text node cannot have children");if(n)return this._children.indexOf(e);if(e.isRemoved){const a=this._children.indexOf(e);return this.allChildren.splice(0,a).filter(l=>!l.isRemoved).length}return this.children.indexOf(e)}findBranchOffset(e){if(this.isText)throw new G(U.ErrRefused,"Text node cannot have children");let n=e;for(;n;){const a=this._children.indexOf(n);if(a!==-1)return a;n=n.parent}return-1}}function kI(t,e){if(t===e)return!1;for(;e.parent;){if(e.parent===t)return!0;e=e.parent}return!1}var vt=(t=>(t.Start="Start",t.End="End",t.Text="Text",t))(vt||{});function VE(t,e,n,a,o=!1){if(e>n)throw new G(U.ErrInvalidArgument,`from is greater than to: ${e} > ${n}`);const l=o?t.totalSize:t.visibleSize;if(e>l)throw new G(U.ErrInvalidArgument,`from is out of range: ${e} > ${l}`);if(n>l)throw new G(U.ErrInvalidArgument,`to is out of range: ${n} > ${l}`);if(e===n)return;let c=0;const d=o?t._children:t.children;for(const m of d){if(e-m.paddedSize(o)<c&&c<n){const h=m.isText?e-c:e-c-1,p=m.isText?n-c:n-c-1,y=o?m.totalSize:m.visibleSize,v=!m.isText&&h<0,S=!m.isText&&p>y;(m.isText||v)&&a([m,m.isText?"Text":"Start"],S),VE(m,Math.max(0,h),Math.min(p,y),a,o),S&&a([m,"End"],S)}c+=m.paddedSize(o)}}function OE(t,e,n=0){for(const a of t.children)OE(a,e,n+1);e(t,n)}function ff(t,e,n=0){for(const a of t._children)ff(a,e,n+1);e(t,n)}function Rg(t,e,n=!0){if(e>t.visibleSize)throw new G(U.ErrInvalidArgument,`index is out of range: ${e} > ${t.visibleSize}`);if(t.isText)return{node:t,offset:e};let a=0,o=0;for(const l of t.children){if(n&&l.isText&&l.visibleSize>=e-o)return Rg(l,e-o,n);if(e===o)return{node:t,offset:a};if(!n&&l.paddedSize()===e-o)return{node:t,offset:a+1};if(l.paddedSize()>e-o)return Rg(l,e-o-1,n);o+=l.paddedSize(),a+=1}return{node:t,offset:a}}function ME(t){return t.isText||t.children.length===0?t:ME(t.children[0])}function XI(t,e){if(t.visibleSize<e)throw new G(U.ErrInvalidArgument,"unacceptable path");for(let n=0;n<t.children.length;n++){const a=t.children[n];if(a.visibleSize<e)e-=a.visibleSize;else{t=a;break}}return{node:t,offset:e}}class WI{root;constructor(e){this.root=e}tokensBetween(e,n,a,o=!1){VE(this.root,e,n,a,o)}traverse(e){OE(this.root,e,0)}traverseAll(e){ff(this.root,e,0)}findTreePos(e,n=!0){return Rg(this.root,e,n)}treePosToPath(e){const n=[];let a=e.node;if(a.isText){const o=a.parent.findOffset(a);if(o===-1)throw new G(U.ErrInvalidArgument,"invalid treePos");const l=Fo(a.parent,o);n.push(l+e.offset),a=a.parent}else if(a.hasTextChild()){const o=Fo(a,e.offset);n.push(o)}else n.push(e.offset);for(;a.parent;){const o=a.parent.findOffset(a);if(o===-1)throw new G(U.ErrInvalidArgument,"invalid treePos");n.push(o),a=a.parent}return n.reverse()}pathToIndex(e){const n=this.pathToTreePos(e);return this.indexOf(n)}pathToTreePos(e){if(!e.length)throw new G(U.ErrInvalidArgument,"unacceptable path");let n=this.root;for(let a=0;a<e.length-1;a++){const o=e[a];if(n=n.children[o],!n)throw new G(U.ErrInvalidArgument,"unacceptable path")}if(n.hasTextChild())return XI(n,e[e.length-1]);if(n.children.length<e[e.length-1])throw new G(U.ErrInvalidArgument,"unacceptable path");return{node:n,offset:e[e.length-1]}}getRoot(){return this.root}get size(){return this.root.visibleSize}findPostorderRight(e){const{node:n,offset:a}=e;if(n.isText){if(n.visibleSize===a){const o=n.nextSibling;return o||n.parent}return n}return n.children.length===a?n:ME(n.children[a])}indexOf(e,n=!1){let{node:a}=e;const{offset:o}=e;let l=0,c=1;if(a.isText){l+=o;const d=a.parent,m=d.findOffset(a,n);if(m===-1)throw new G(U.ErrInvalidArgument,"invalid pos");l+=Fo(d,m,n),a=a.parent}else l+=Fo(a,o,n);for(;a?.parent;){const d=a.parent,m=d.findOffset(a,n);if(m===-1)throw new G(U.ErrInvalidArgument,"invalid pos");l+=Fo(d,m,n),c++,a=a.parent}return l+c-1}indexToPath(e){const n=this.findTreePos(e);return this.treePosToPath(n)}}class jn{parentID;leftSiblingID;constructor(e,n){this.parentID=e,this.leftSiblingID=n}static of(e,n){return new jn(e,n)}static fromTreePos(e){const{offset:n}=e;let{node:a}=e,o;return a.isText?(a.parent.children[0]===a&&n===0?o=a.parent:o=a,a=a.parent):n===0?o=a:o=a.children[n-1],jn.of(a.id,Yt.of(o.getCreatedAt(),o.getOffset()+n))}getParentID(){return this.parentID}static fromStruct(e){return jn.of(Yt.of(_n.fromStruct(e.parentID.createdAt),e.parentID.offset),Yt.of(_n.fromStruct(e.leftSiblingID.createdAt),e.leftSiblingID.offset))}toStruct(){return{parentID:{createdAt:this.getParentID().getCreatedAt().toStruct(),offset:this.getParentID().getOffset()},leftSiblingID:{createdAt:this.getLeftSiblingID().getCreatedAt().toStruct(),offset:this.getLeftSiblingID().getOffset()}}}toTreeNodePair(e){const n=this.getParentID(),a=this.getLeftSiblingID(),o=e.findFloorNode(n);let l=e.findFloorNode(a);if(!o||!l)throw new G(U.ErrRefused,`cannot find node of CRDTTreePos(${n.toTestString()}, ${a.toTestString()})`);return!a.equals(n)&&a.getOffset()>0&&a.getOffset()===l.id.getOffset()&&l.insPrevID&&(l=e.findFloorNode(l.insPrevID)),[o,l]}getLeftSiblingID(){return this.leftSiblingID}equals(e){return this.getParentID().getCreatedAt().equals(e.getParentID().getCreatedAt())&&this.getParentID().getOffset()===e.getParentID().getOffset()&&this.getLeftSiblingID().getCreatedAt().equals(e.getLeftSiblingID().getCreatedAt())&&this.getLeftSiblingID().getOffset()===e.getLeftSiblingID().getOffset()}}class Yt{createdAt;offset;constructor(e,n){this.createdAt=e,this.offset=n}static of(e,n){return new Yt(e,n)}static fromStruct(e){return Yt.of(_n.fromStruct(e.createdAt),e.offset)}static createComparator(){return(e,n)=>{const a=e.getCreatedAt().compare(n.getCreatedAt());return a!==0?a:e.getOffset()>n.getOffset()?1:e.getOffset()<n.getOffset()?-1:0}}getCreatedAt(){return this.createdAt}equals(e){return this.createdAt.compare(e.createdAt)===0&&this.offset===e.offset}getOffset(){return this.offset}setOffset(e){this.offset=e}toStruct(){return{createdAt:this.createdAt.toStruct(),offset:this.offset}}toIDString(){return`${this.createdAt.toIDString()}:${this.offset}`}toTestString(){return`${this.createdAt.toTestString()}/${this.offset}`}}class yn extends GI{id;removedAt;attrs;insPrevID;insNextID;_value="";constructor(e,n,a,o,l){super(n),this.id=e,this.removedAt=l,o&&(this.attrs=o),typeof a=="string"?this.value=a:Array.isArray(a)&&(this._children=a)}toIDString(){return this.id.toIDString()}getRemovedAt(){return this.removedAt}static create(e,n,a,o){return new yn(e,n,a,o)}deepcopy(){const e=new yn(this.id,this.type);return e.removedAt=this.removedAt,e._value=this._value,e.visibleSize=this.visibleSize,e.totalSize=this.totalSize,e.attrs=this.attrs?.deepcopy(),e._children=this._children.map(n=>{const a=n.deepcopy();return a.parent=e,a}),e.insPrevID=this.insPrevID,e.insNextID=this.insNextID,e}get value(){if(!this.isText)throw new G(U.ErrInvalidType,`cannot get value of element node: ${this.type}`);return this._value}set value(e){if(!this.isText)throw new G(U.ErrInvalidType,`cannot set value of element node: ${this.type}`);this._value=e,this.visibleSize=e.length,this.totalSize=e.length}get isRemoved(){return!!this.removedAt}remove(e){return this.removedAt?(e.after(this.removedAt)&&(this.removedAt=e),!1):(this.removedAt=e,this.updateAncestorsSize(-this.paddedSize()),!0)}cloneText(e){return new yn(Yt.of(this.id.getCreatedAt(),e),this.type,void 0,void 0,this.removedAt)}cloneElement(e){return new yn(Yt.of(e(),0),this.type,void 0,void 0,this.removedAt)}split(e,n,a){const[o,l]=this.isText?this.splitText(n,this.id.getOffset()):this.splitElement(n,a);if(o){if(o.insPrevID=this.id,this.insNextID){const c=e.findFloorNode(this.insNextID);c.insPrevID=o.id,o.insNextID=this.insNextID}this.insNextID=o.id,e.registerNode(o)}return[o,l]}getCreatedAt(){return this.id.getCreatedAt()}getOffset(){return this.id.getOffset()}canDelete(e,n,a){return n?!!(!this.removedAt||!a&&e?.after(this.removedAt)):!1}canStyle(e,n){return this.isText?!1:this.getCreatedAt().getLamport()<=n&&(!this.removedAt||e.after(this.removedAt))}setAttrs(e,n){this.attrs||(this.attrs=new Kr);const a=[];for(const[o,l]of Object.entries(e))a.push(this.attrs.set(o,l,n));return a}purge(e){this.attrs&&this.attrs.purge(e)}getDataSize(){const e={data:0,meta:0};if(this.isText&&(e.data+=this.visibleSize*2),this.id&&(e.meta+=lr),this.removedAt&&(e.meta+=lr),this.attrs)for(const n of this.attrs){if(n.getRemovedAt())continue;const a=n.getDataSize();e.meta+=a.meta,e.data+=a.data}return e}getGCPairs(){const e=[];if(!this.attrs)return e;for(const n of this.attrs)n.getRemovedAt()&&e.push({parent:this,child:n});return e}}function Dg(t){if(t.isText){const n=t;return{type:n.type,value:n.value}}const e={type:t.type,children:t.children.map(Dg)};return t.attrs&&(e.attributes=Xr(t.attrs?.toObject())),e}function Em(t){if(t.isText)return t.value;let e="";return t.attrs&&t.attrs.size()&&(e=" "+Array.from(t.attrs).filter(n=>!n.isRemoved()).sort((n,a)=>n.getKey().localeCompare(a.getKey())).map(n=>{const a=JSON.parse(n.getValue());return typeof a=="string"?`${n.getKey()}="${a}"`:`${n.getKey()}="${or(n.getValue())}"`}).join(" ")),`<${t.type}${e}>${t.children.map(n=>Em(n)).join("")}</${t.type}>`}function BE(t){if(t.isText){const e=t;return{type:e.type,value:e.value,visibleSize:e.visibleSize,isRemoved:e.isRemoved}}return{type:t.type,children:t.children.map(BE),visibleSize:t.visibleSize,isRemoved:t.isRemoved}}class vn extends Ml{indexTree;nodeMapByID;constructor(e,n){super(n),this.indexTree=new WI(e),this.nodeMapByID=new DE(Yt.createComparator()),this.indexTree.traverseAll(a=>{this.nodeMapByID.put(a.id,a)})}static create(e,n){return new vn(e,n)}findFloorNode(e){const n=this.nodeMapByID.floorEntry(e);if(!(!n||!n.key.getCreatedAt().equals(e.getCreatedAt())))return n.value}registerNode(e){this.nodeMapByID.put(e.id,e)}findNodesAndSplitText(e,n){let a={data:0,meta:0};const[o,l]=e.toTreeNodePair(this);let c=l;const d=o===c,m=c.parent&&!d?c.parent:o;if(c.isText){const[,h]=c.split(this,e.getLeftSiblingID().getOffset()-c.id.getOffset());a=h}if(n){const h=m.allChildren,p=d?0:h.indexOf(c)+1;for(let y=p;y<h.length;y++){const v=h[y];if(!v.id.getCreatedAt().after(n))break;c=v}}return[[m,c],a]}style(e,n,a,o){const l={data:0,meta:0},[[c,d],m]=this.findNodesAndSplitText(e[0],a),[[h,p],y]=this.findNodesAndSplitText(e[1],a);Ut(l,y,m);const v=[],S=n?Xr(n):{},E=[];return this.traverseInPosRange(c,d,h,p,([A,R])=>{const x=A.getCreatedAt().getActorID();let Y=Cg;if(o!=null&&(Y=o.get(x)?o.get(x):0n),A.canStyle(a,Y)&&n){const N=A.setAttrs(n,a),I=N.reduce((M,[,W])=>(W&&(M[W.getKey()]=S[W.getKey()]),M),{}),O=A.parent,B=A.prevSibling||A.parent;Object.keys(I).length>0&&v.push({type:"style",from:this.toIndex(O,B),to:this.toIndex(A,A),fromPath:this.toPath(O,B),toPath:this.toPath(A,A),actor:a.getActorID(),value:I});for(const[M]of N)M&&E.push({parent:A,child:M});for(const[M]of Object.entries(S)){const W=A.attrs?.getNodeMapByKey().get(M);W!==void 0&&R!==vt.End&&Ut(l,W.getDataSize())}}}),[E,v,l]}removeStyle(e,n,a,o){const l={data:0,meta:0},[[c,d],m]=this.findNodesAndSplitText(e[0],a),[[h,p],y]=this.findNodesAndSplitText(e[1],a);Ut(l,y,m);const v=[],S=[];return this.traverseInPosRange(c,d,h,p,([E])=>{const A=E.getCreatedAt().getActorID();let R=Cg;if(o!=null&&(R=o.get(A)?o.get(A):0n),E.canStyle(a,R)&&n){E.attrs||(E.attrs=new Kr);for(const N of n){const I=E.attrs.remove(N,a);for(const O of I)S.push({parent:E,child:O})}const x=E.parent,Y=E.prevSibling||E.parent;v.push({actor:a.getActorID(),type:"removeStyle",from:this.toIndex(x,Y),to:this.toIndex(E,E),fromPath:this.toPath(x,Y),toPath:this.toPath(E,E),value:n})}}),[S,v,l]}edit(e,n,a,o,l,c){const d={data:0,meta:0},[[m,h],p]=this.findNodesAndSplitText(e[0],o),[[y,v],S]=this.findNodesAndSplitText(e[1],o);Ut(d,S,p);const E=this.toIndex(m,h),A=this.toPath(m,h),R=[],x=[],Y=[];this.traverseInPosRange(m,h,y,v,([O,B],M)=>{if(B===vt.Start&&!M)for(const te of O.children)Y.push(te);const W=c===void 0;let q=!1;const de=c?.get(O.id.getCreatedAt().getActorID());q=W||de!==void 0&&de>=O.id.getCreatedAt().getLamport();let ne=!1;if(O.removedAt){const te=c?.get(O.removedAt.getActorID());ne=W||te!==void 0&&te>=O.removedAt.getLamport()}(O.canDelete(o,q,ne)||R.includes(O.parent))&&((B===vt.Text||B===vt.Start)&&R.push(O),x.push([O,B]))},!0);const N=this.makeDeletionChanges(x,o),I=[];for(const O of R)O.remove(o),O.isRemoved&&I.push({parent:this,child:O});for(const O of Y)O.removedAt||m.append(O);if(a>0){let O=0,B=m,M=h;for(;O<a;)B.split(this,B.findOffset(M)+1,l),M=B,B=B.parent,O++;N.push({type:"content",from:E,to:E,fromPath:A,toPath:A,actor:o.getActorID()})}if(n?.length){const O=[];let B=h;for(const M of n)B===m?m.insertAt(M,0):m.insertAfter(M,B),B=M,ff(M,W=>{m.isRemoved?(W.remove(o),I.push({parent:this,child:W})):Ut(d,W.getDataSize()),this.nodeMapByID.put(W.id,W)}),M.isRemoved||O.push(M);if(O.length){const M=O.map(W=>Dg(W));N.length&&N[N.length-1].from===E?N[N.length-1].value=M:N.push({type:"content",from:E,to:E,fromPath:A,toPath:A,actor:o.getActorID(),value:M})}}return[N,I,d]}editT(e,n,a,o,l){const c=this.findPos(e[0]),d=this.findPos(e[1]);return this.edit([c,d],n,a,o,l)}move(e,n,a){throw new G(U.ErrUnimplemented,`not implemented: ${e}, ${n}, ${a}`)}pathToTreePos(e){return this.indexTree.pathToTreePos(e)}purge(e){e.parent?.removeChild(e),this.nodeMapByID.remove(e.id);const n=e.insPrevID,a=e.insNextID;if(n){const o=this.findFloorNode(n);o.insNextID=a}if(a){const o=this.findFloorNode(a);o.insPrevID=n}e.insPrevID=void 0,e.insNextID=void 0}getGCPairs(){const e=[];return this.indexTree.traverse(n=>{n.getRemovedAt()&&e.push({parent:this,child:n});for(const a of n.getGCPairs())e.push(a)}),e}findPos(e,n=!0){const a=this.indexTree.findTreePos(e,n);return jn.fromTreePos(a)}pathToPosRange(e){const n=this.pathToIndex(e);return[this.findPos(n),this.findPos(n+1)]}pathToPos(e){const n=this.indexTree.pathToIndex(e);return this.findPos(n)}getRoot(){return this.indexTree.getRoot()}getSize(){return this.indexTree.size}getNodeSize(){return this.nodeMapByID.size()}getIndexTree(){return this.indexTree}toXML(){return Em(this.indexTree.getRoot())}getDataSize(){const e={data:0,meta:0};return this.indexTree.traverse(n=>{if(n.getRemovedAt())return;const a=n.getDataSize();e.data+=a.data,e.meta+=a.meta}),{data:e.data,meta:e.meta+this.getMetaUsage()}}toJSON(){return JSON.stringify(this.getRootTreeNode())}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:JSON.parse(this.toJSON()),type:"YORKIE_TREE"}}toJSInfoForTest(){const e=this.indexTree.getRoot(),n=(a,o=void 0,l=void 0,c=0)=>{let d,m,h;const p=a.isText?{node:a,offset:0}:o&&l?this.toTreePos(o,l):null;p&&(d=this.indexTree.indexOf(p),m=this.indexTree.treePosToPath(p),h=jn.fromTreePos(p).toStruct());const y={type:a.type,parent:o?.id.toTestString(),size:a.visibleSize,id:a.id.toTestString(),removedAt:a.removedAt?.toTestString(),insPrev:a.insPrevID?.toTestString(),insNext:a.insNextID?.toTestString(),value:a.isText?a.value:void 0,isRemoved:a.isRemoved,children:[],depth:c,attributes:a.attrs?Xr(a.attrs?.toObject()):void 0,index:d,path:m,pos:h};for(let v=0;v<a.allChildren.length;v++){const S=v===0?a:a.allChildren[v-1];y.children.push(n(a.allChildren[v],a,S,c+1))}return y};return n(e)}getRootTreeNode(){return Dg(this.indexTree.getRoot())}toTestTreeNode(){return BE(this.indexTree.getRoot())}toSortedJSON(){return this.toJSON()}deepcopy(){const e=this.getRoot(),n=new vn(e.deepcopy(),this.getCreatedAt());return n.setRemovedAt(this.getRemovedAt()),n.setMovedAt(this.getMovedAt()),n}toPath(e,n){const a=this.toTreePos(e,n);return a?this.indexTree.treePosToPath(a):[]}toIndex(e,n,a=!1){const o=this.toTreePos(e,n,a);return o?this.indexTree.indexOf(o,a):-1}indexToPath(e){return this.indexTree.indexToPath(e)}pathToIndex(e){return this.indexTree.pathToIndex(e)}indexRangeToPosRange(e){const n=this.findPos(e[0]);return e[0]===e[1]?[n,n]:[n,this.findPos(e[1])]}indexRangeToPosStructRange(e){const[n,a]=e,o=this.findPos(n);return n===a?[o.toStruct(),o.toStruct()]:[o.toStruct(),this.findPos(a).toStruct()]}posRangeToPathRange(e){const[[n,a]]=this.findNodesAndSplitText(e[0]),[[o,l]]=this.findNodesAndSplitText(e[1]);return[this.toPath(n,a),this.toPath(o,l)]}posRangeToIndexRange(e){const[[n,a]]=this.findNodesAndSplitText(e[0]),[[o,l]]=this.findNodesAndSplitText(e[1]);return[this.toIndex(n,a),this.toIndex(o,l)]}traverseInPosRange(e,n,a,o,l,c=!1){const d=this.toIndex(e,n,c),m=this.toIndex(a,o,c);this.indexTree.tokensBetween(d,m,l,c)}toTreePos(e,n,a=!1){if(!e||!n)return;if(!a&&e.isRemoved){let l;for(;e.isRemoved;)l=e,e=l.parent;const c=e.findOffset(l,a);return{node:e,offset:c}}if(e===n)return{node:e,offset:0};let o=e.findOffset(n,a);if(a||!n.isRemoved){if(n.isText)return{node:n,offset:n.paddedSize(a)};o++}return{node:e,offset:o}}makeDeletionChanges(e,n){const a=[],o=[];let l=null,c=null;for(let d=0;d<e.length;d++){const m=e[d],h=e[d+1];l||(l=m),c=m;const p=this.findRightToken(m);(!p||!h||p[0]!==h[0]||p[1]!==h[1])&&(o.push([l,c]),l=null,c=null)}for(const d of o){const[m,h]=d,[p,y]=this.findLeftToken(m),[v,S]=h,E=y===vt.Start?p:p.parent,A=S===vt.Start?v:v.parent,R=this.toIndex(E,p),x=this.toIndex(A,v);R<x&&(a.length>0&&R===a[a.length-1].to?(a[a.length-1].to=x,a[a.length-1].toPath=this.toPath(A,v)):a.push({type:"content",from:R,to:x,fromPath:this.toPath(E,p),toPath:this.toPath(A,v),actor:n.getActorID()}))}return a.reverse()}findRightToken([e,n]){if(n===vt.Start){const d=e.allChildren;return d.length>0?[d[0],d[0].isText?vt.Text:vt.Start]:[e,vt.End]}const a=e.parent,o=a.allChildren,l=o.indexOf(e);if(a&&l===o.length-1)return[a,vt.End];const c=o[l+1];return[c,c.isText?vt.Text:vt.Start]}findLeftToken([e,n]){if(n===vt.End){const d=e.allChildren;if(d.length>0){const m=d[d.length-1];return[m,m.isText?vt.Text:vt.End]}return[e,vt.Start]}const a=e.parent,o=a.allChildren,l=o.indexOf(e);if(a&&l===0)return[a,vt.Start];const c=o[l-1];return[c,c.isText?vt.Text:vt.End]}}class Ll extends Qn{fromPos;toPos;contents;splitLevel;constructor(e,n,a,o,l,c){super(e,c),this.fromPos=n,this.toPos=a,this.contents=o,this.splitLevel=l}static create(e,n,a,o,l,c){return new Ll(e,n,a,o,l,c)}execute(e,n,a){const o=e.findByCreatedAt(this.getParentCreatedAt());if(!o)throw new G(U.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(o instanceof vn))throw new G(U.ErrInvalidArgument,"fail to execute, only Tree can execute edit");const l=this.getExecutedAt(),c=o,[d,m,h]=c.edit([this.fromPos,this.toPos],this.contents?.map(p=>p.deepcopy()),this.splitLevel,l,(()=>{let p=l.getDelimiter();return this.contents!==void 0&&(p+=this.contents.length),()=>_n.of(l.getLamport(),++p,l.getActorID())})(),a);e.acc(h);for(const p of m)e.registerGCPair(p);return{opInfos:d.map(({from:p,to:y,value:v,splitLevel:S,fromPath:E,toPath:A})=>({type:"tree-edit",path:e.createPath(this.getParentCreatedAt()),from:p,to:y,value:v,splitLevel:S,fromPath:E,toPath:A}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),n=`${this.fromPos.getLeftSiblingID().getCreatedAt().toTestString()}/${this.fromPos.getLeftSiblingID().getOffset()}`,a=`${this.toPos.getLeftSiblingID().getCreatedAt().toTestString()}/${this.toPos.getLeftSiblingID().getOffset()}`,o=this.contents||[];return`${e}.EDIT(${n},${a},${o.map(l=>Em(l)).join("")})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getContents(){return this.contents}getSplitLevel(){return this.splitLevel}}class Cs{vector;constructor(e){this.vector=e||new Map}set(e,n){this.vector.set(e,n)}unset(e){this.vector.delete(e)}get(e){return this.vector.get(e)}has(e){return this.vector.has(e)}maxLamport(){let e=BigInt(0);for(const[,n]of this)n>e&&(e=n);return e}max(e){const n=new Map;for(const[a,o]of e){const l=this.vector.get(a),c=l&&l>o?l:o;n.set(a,c)}for(const[a,o]of this){const l=e.get(a),c=l&&l>o?l:o;n.set(a,c)}return new Cs(n)}afterOrEqual(e){const n=this.vector.get(e.getActorID());return n===void 0?!1:n>=e.getLamport()}deepcopy(){const e=new Map;for(const[n,a]of this.vector)e.set(n,a);return new Cs(e)}filter(e){const n=new Map;for(const[a]of e){const o=this.vector.get(a);o!==void 0&&n.set(a,o)}return new Cs(n)}size(){return this.vector.size}*[Symbol.iterator](){for(const[e,n]of this.vector)yield[e,n]}}const LE=new Cs(new Map);class Xn{clientSeq;serverSeq;actor;lamport;versionVector;constructor(e,n,a,o,l){this.clientSeq=e,this.serverSeq=l,this.lamport=n,this.versionVector=o,this.actor=a}hasClocks(){return this.versionVector.size()>0&&this.lamport!=Tg}static of(e,n,a,o,l){return new Xn(e,n,a,o,l)}next(e=!1){if(e)return new Xn(this.clientSeq+1,this.lamport,this.actor,LE,Tg);const n=this.versionVector.deepcopy();return n.set(this.actor,this.lamport+1n),new Xn(this.clientSeq+1,this.lamport+1n,this.actor,n)}syncClocks(e){if(!e.hasClocks())return this;const n=e.lamport>this.lamport?e.lamport+1n:this.lamport+1n,a=this.versionVector.max(e.versionVector),o=new Xn(this.clientSeq,n,this.actor,a);return o.versionVector.set(this.actor,n),o}setClocks(e,n){const a=e>this.lamport?e+1n:this.lamport+1n,o=this.versionVector.max(n);return o.set(this.actor,a),Xn.of(this.clientSeq,a,this.actor,o)}createTimeTicket(e){return _n.of(this.lamport,e,this.actor)}setActor(e){return new Xn(this.clientSeq,this.lamport,e,this.versionVector,this.serverSeq)}setLamport(e){return new Xn(this.clientSeq,e,this.actor,this.versionVector,this.serverSeq)}setVersionVector(e){return new Xn(this.clientSeq,this.lamport,this.actor,e,this.serverSeq)}getClientSeq(){return this.clientSeq}getServerSeq(){return this.serverSeq?this.serverSeq.toString():""}getLamport(){return this.lamport}getLamportAsString(){return this.lamport.toString()}getActorID(){return this.actor}getVersionVector(){return this.versionVector}toTestString(){return`${this.lamport.toString()}:${this.actor.slice(-2)}:${this.clientSeq}`}}const KI=new Xn(0,0n,Sm,LE);class Gs{id;operations;presenceChange;message;constructor({id:e,operations:n,presenceChange:a,message:o}){this.id=e,this.operations=n||[],this.presenceChange=a,this.message=o}static create({id:e,operations:n,presenceChange:a,message:o}){return new Gs({id:e,operations:n,presenceChange:a,message:o})}getID(){return this.id}getMessage(){return this.message}hasOperations(){return this.operations.length>0}getOperations(){return this.operations}setActor(e){for(const n of this.operations)n.setActor(e);this.id=this.id.setActor(e)}hasPresenceChange(){return this.presenceChange!==void 0}getPresenceChange(){return this.presenceChange}execute(e,n,a){const o=[],l=[],c=[];for(const d of this.operations){const m=d.execute(e,a,this.id.getVersionVector());if(!m)continue;const{opInfos:h,reverseOp:p}=m;o.push(...h),l.push(d),p&&c.unshift(p)}return this.presenceChange&&(this.presenceChange.type===dr.Put?n.set(this.id.getActorID(),kn(this.presenceChange.presence)):n.delete(this.id.getActorID())),{operations:l,opInfos:o,reverseOps:c}}toTestString(){return`${this.operations.map(e=>e.toTestString()).join(",")}`}toStruct(){return{changeID:ot.bytesToHex(ot.changeIDToBinary(this.getID())),message:this.getMessage(),operations:this.getOperations().map(e=>ot.bytesToHex(ot.operationToBinary(e))),presenceChange:this.getPresenceChange()}}static fromStruct(e){const{changeID:n,operations:a,presenceChange:o,message:l}=e;return Gs.create({id:ot.bytesToChangeID(ot.hexToBytes(n)),operations:a?.map(c=>ot.bytesToOperation(ot.hexToBytes(c))),presenceChange:o,message:l})}}class df{documentKey;checkpoint;isRemoved;changes;snapshot;versionVector;constructor(e,n,a,o,l,c){this.documentKey=e,this.checkpoint=n,this.isRemoved=a,this.changes=o,this.snapshot=c,this.versionVector=l}static create(e,n,a,o,l,c){return new df(e,n,a,o,l,c)}getDocumentKey(){return this.documentKey}getCheckpoint(){return this.checkpoint}getIsRemoved(){return this.isRemoved}getChanges(){return this.changes}hasChanges(){return this.changes.length>0}getChangeSize(){return this.changes.length}hasSnapshot(){return!!this.snapshot&&!!this.snapshot.length}getSnapshot(){return this.snapshot}getVersionVector(){return this.versionVector}}class Is{serverSeq;clientSeq;constructor(e,n){this.serverSeq=e,this.clientSeq=n}static of(e,n){return new Is(e,n)}increaseClientSeq(e){return e===0?this:new Is(this.serverSeq,this.clientSeq+e)}forward(e){if(this.equals(e))return this;const n=this.serverSeq>e.serverSeq?this.serverSeq:e.serverSeq,a=Math.max(this.clientSeq,e.clientSeq);return Is.of(n,a)}getServerSeqAsString(){return this.serverSeq.toString()}getClientSeq(){return this.clientSeq}getServerSeq(){return this.serverSeq}equals(e){return this.clientSeq===e.clientSeq&&this.serverSeq==e.serverSeq}toTestString(){return`serverSeq=${this.serverSeq}, clientSeq=${this.clientSeq}`}}const HI=new Is(0n,0),aS=t=>t<0?Math.ceil(t):Math.floor(t);var gr=(t=>(t[t.Int=0]="Int",t[t.Long=1]="Long",t))(gr||{});class on extends Ml{valueType;value;constructor(e,n,a){switch(super(a),this.valueType=e,e){case 0:typeof n=="number"?n>Math.pow(2,31)-1||n<-Math.pow(2,31)?this.value=Ue.fromNumber(n).toInt():this.value=aS(n):this.value=n.toInt();break;case 1:typeof n=="number"?this.value=Ue.fromNumber(n):this.value=n;break;default:throw new G(U.ErrUnimplemented,`unimplemented type: ${e}`)}}static create(e,n,a){return new on(e,n,a)}static valueFromBytes(e,n){switch(e){case 0:return n[0]|n[1]<<8|n[2]<<16|n[3]<<24;case 1:return Ue.fromBytesLE(Array.from(n));default:throw new G(U.ErrUnimplemented,`unimplemented type: ${e}`)}}getDataSize(){return{data:this.valueType===0?4:8,meta:this.getMetaUsage()}}toJSON(){return`${this.value}`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:this.value,type:"YORKIE_COUNTER"}}deepcopy(){const e=on.create(this.valueType,this.value,this.getCreatedAt());return e.setRemovedAt(this.getRemovedAt()),e.setMovedAt(this.getMovedAt()),e}getType(){return this.valueType}static getCounterType(e){switch(typeof e){case"object":return e instanceof Ue?1:void 0;case"number":return e>Math.pow(2,31)-1||e<-Math.pow(2,31)?1:0;default:return}}static isSupport(e){return!!on.getCounterType(e)}static isInteger(e){return e%1===0}isNumericType(){const e=this.valueType;return e===0||e===1}getValueType(){return this.valueType}getValue(){return this.value}toBytes(){switch(this.valueType){case 0:{const e=this.value;return new Uint8Array([e&255,e>>8&255,e>>16&255,e>>24&255])}case 1:{const n=this.value.toBytesLE();return Uint8Array.from(n)}default:throw new G(U.ErrUnimplemented,`unimplemented type: ${this.valueType}`)}}increase(e){function n(a){if(!a.isNumericType())throw new TypeError(`Unsupported type of value: ${typeof a.getValue()}`)}return n(this),n(e),this.valueType===1?this.value=this.value.add(e.getValue()):e.getType()===it.Long?this.value=this.value+e.getValue().toInt():this.value=Ue.fromNumber(this.value+aS(e.getValue())).toInt(),this}}class ks extends Qn{value;constructor(e,n,a){super(e,a),this.value=n}static create(e,n,a){return new ks(e,n,a)}execute(e){const n=e.findByCreatedAt(this.getParentCreatedAt());if(!n)throw new G(U.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(n instanceof on))throw new G(U.ErrInvalidArgument,"fail to execute, only Counter can execute increase");const a=n,o=this.value.deepcopy();return a.increase(o),{opInfos:[{type:"increase",path:e.createPath(this.getParentCreatedAt()),value:o.getValue()}],reverseOp:this.toReverseOperation()}}toReverseOperation(){const e=this.value.deepcopy(),a=e.getType()===it.Long?e.getValue().multiply(-1):e.getValue()*-1;return ks.create(this.getParentCreatedAt(),dt.of(a,e.getCreatedAt()))}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.INCREASE.${this.value.toJSON()}`}getValue(){return this.value}}class Wr extends Qn{fromPos;toPos;attributes;attributesToRemove;constructor(e,n,a,o,l,c){super(e,c),this.fromPos=n,this.toPos=a,this.attributes=o,this.attributesToRemove=l}static create(e,n,a,o,l){return new Wr(e,n,a,o,[],l)}static createTreeRemoveStyleOperation(e,n,a,o,l){return new Wr(e,n,a,new Map,o,l)}execute(e,n,a){const o=e.findByCreatedAt(this.getParentCreatedAt());if(!o)throw new G(U.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(o instanceof vn))throw new G(U.ErrInvalidArgument,"fail to execute, only Tree can execute edit");const l=o;let c,d,m={data:0,meta:0};if(this.attributes.size){const h={};[...this.attributes].forEach(([p,y])=>h[p]=y),[d,c,m]=l.style([this.fromPos,this.toPos],h,this.getExecutedAt(),a)}else{const h=this.attributesToRemove;[d,c,m]=l.removeStyle([this.fromPos,this.toPos],h,this.getExecutedAt(),a)}e.acc(m);for(const h of d)e.registerGCPair(h);return{opInfos:c.map(({from:h,to:p,value:y,fromPath:v,toPath:S})=>({type:"tree-style",from:h,to:p,value:this.attributes.size?{attributes:y}:{attributesToRemove:y},fromPath:v,toPath:S,path:e.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),n=`${this.fromPos.getLeftSiblingID().getCreatedAt().toTestString()}:${this.fromPos.getLeftSiblingID().getOffset()}`,a=`${this.toPos.getLeftSiblingID().getCreatedAt().toTestString()}:${this.toPos.getLeftSiblingID().getOffset()}`;return`${e}.STYLE(${n},${a},${Object.entries(this.attributes||{}).map(([o,l])=>`${o}:"${l}"`).join(" ")})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getAttributes(){return this.attributes}getAttributesToRemove(){return this.attributesToRemove}}class Hr extends Qn{createdAt;value;constructor(e,n,a,o){super(e,o),this.createdAt=n,this.value=a}static create(e,n,a,o){return new Hr(e,n,a,o)}execute(e){const n=e.findByCreatedAt(this.getParentCreatedAt());if(!n)throw new G(U.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(n instanceof Wt))throw new G(U.ErrInvalidArgument,"fail to execute, only array can execute set");const a=n.getByID(this.createdAt).deepcopy(),o=this.toReverseOperation(this.value,a),l=this.value.deepcopy();return n.insertAfter(this.createdAt,l,this.getExecutedAt()),n.delete(this.createdAt,this.getExecutedAt()),e.registerElement(l),{opInfos:[{type:"array-set",path:e.createPath(this.getParentCreatedAt())}],reverseOp:o}}toReverseOperation(e,n){return Hr.create(this.getParentCreatedAt(),e.getCreatedAt(),n)}getEffectedCreatedAt(){return this.createdAt}toTestString(){return`${this.getParentCreatedAt().toTestString()}.ARRAY_SET.${this.createdAt.toTestString()}=${this.value.toSortedJSON()}`}getCreatedAt(){return this.createdAt}getValue(){return this.value}setCreatedAt(e){this.createdAt=e}}function FI(t){const e={};for(const[n,a]of Object.entries(t))e[n]=JSON.stringify(a);return be(xI,{data:e})}function JI(t){if(t.type===dr.Put)return be(Pb,{type:ml.PUT,presence:FI(t.presence)});if(t.type===dr.Clear)return be(Pb,{type:ml.CLEAR});throw new G(U.ErrUnimplemented,"unimplemented type")}function jI(t){return be(TI,{serverSeq:t.getServerSeq(),clientSeq:t.getClientSeq()})}function _g(t){return be(ym,{clientSeq:t.getClientSeq(),lamport:t.getLamport(),actorId:gf(t.getActorID()),versionVector:wm(t.getVersionVector())})}function Se(t){if(t)return be(II,{lamport:t.getLamport(),delimiter:t.getDelimiter(),actorId:gf(t.getActorID())})}function wm(t){if(!t)return;const e=be(vm);for(const[n,a]of t){const o=VR(gf(n));e.vector[o]=BigInt(a.toString())}return e}function zE(t){switch(t){case it.Null:return Oe.NULL;case it.Boolean:return Oe.BOOLEAN;case it.Integer:return Oe.INTEGER;case it.Long:return Oe.LONG;case it.Double:return Oe.DOUBLE;case it.String:return Oe.STRING;case it.Bytes:return Oe.BYTES;case it.Date:return Oe.DATE;default:throw new G(U.ErrInvalidType,`unsupported type: ${t}`)}}function UE(t){switch(t){case gr.Int:return Oe.INTEGER_CNT;case gr.Long:return Oe.LONG_CNT;default:throw new G(U.ErrInvalidType,`unsupported type: ${t}`)}}function gc(t){if(t instanceof Xt)return be(ys,{type:Oe.JSON_OBJECT,createdAt:Se(t.getCreatedAt()),value:$E(t)});if(t instanceof Wt)return be(ys,{type:Oe.JSON_ARRAY,createdAt:Se(t.getCreatedAt()),value:IR(t)});if(t instanceof ln)return be(ys,{type:Oe.TEXT,createdAt:Se(t.getCreatedAt())});if(t instanceof dt)return be(ys,{type:zE(t.getType()),createdAt:Se(t.getCreatedAt()),value:t.toBytes()});if(t instanceof on)return be(ys,{type:UE(t.getType()),createdAt:Se(t.getCreatedAt()),value:t.toBytes()});if(t instanceof vn)return be(ys,{type:Oe.TREE,createdAt:Se(t.getCreatedAt()),value:DR(t)});throw new G(U.ErrUnimplemented,"unimplemented element")}function $I(t){return be(SI,{createdAt:Se(t.getCreatedAt()),offset:t.getOffset()})}function mc(t){return be(CI,{createdAt:Se(t.getID().getCreatedAt()),offset:t.getID().getOffset(),relativeOffset:t.getRelativeOffset()})}function pc(t){return be(NI,{parentId:rl(t.getParentID()),leftSiblingId:rl(t.getLeftSiblingID())})}function rl(t){return be(wI,{createdAt:Se(t.getCreatedAt()),offset:t.getOffset()})}function Vg(t){const e=be(bm);if(t instanceof Sa){const n=t,a=be(tI);a.parentCreatedAt=Se(n.getParentCreatedAt()),a.key=n.getKey(),a.value=gc(n.getValue()),a.executedAt=Se(n.getExecutedAt()),e.body.case="set",e.body.value=a}else if(t instanceof Zi){const n=t,a=be(nI);a.parentCreatedAt=Se(n.getParentCreatedAt()),a.prevCreatedAt=Se(n.getPrevCreatedAt()),a.value=gc(n.getValue()),a.executedAt=Se(n.getExecutedAt()),e.body.case="add",e.body.value=a}else if(t instanceof Jn){const n=t,a=be(rI);a.parentCreatedAt=Se(n.getParentCreatedAt()),a.prevCreatedAt=Se(n.getPrevCreatedAt()),a.createdAt=Se(n.getCreatedAt()),a.executedAt=Se(n.getExecutedAt()),e.body.case="move",e.body.value=a}else if(t instanceof hr){const n=t,a=be(iI);a.parentCreatedAt=Se(n.getParentCreatedAt()),a.createdAt=Se(n.getCreatedAt()),a.executedAt=Se(n.getExecutedAt()),e.body.case="remove",e.body.value=a}else if(t instanceof Yi){const n=t,a=be(aI);a.parentCreatedAt=Se(n.getParentCreatedAt()),a.from=mc(n.getFromPos()),a.to=mc(n.getToPos()),a.content=n.getContent();const o=a.attributes;for(const[l,c]of n.getAttributes())o[l]=c;a.executedAt=Se(n.getExecutedAt()),e.body.case="edit",e.body.value=a}else if(t instanceof Bl){const n=t,a=be(sI);a.parentCreatedAt=Se(n.getParentCreatedAt()),a.from=mc(n.getFromPos()),a.to=mc(n.getToPos());const o=a.attributes;for(const[l,c]of n.getAttributes())o[l]=c;a.executedAt=Se(n.getExecutedAt()),e.body.case="style",e.body.value=a}else if(t instanceof ks){const n=t,a=be(oI);a.parentCreatedAt=Se(n.getParentCreatedAt()),a.value=gc(n.getValue()),a.executedAt=Se(n.getExecutedAt()),e.body.case="increase",e.body.value=a}else if(t instanceof Ll){const n=t,a=be(lI);a.parentCreatedAt=Se(n.getParentCreatedAt()),a.from=pc(n.getFromPos()),a.to=pc(n.getToPos()),a.contents=rR(n.getContents()),a.splitLevel=n.getSplitLevel(),a.executedAt=Se(n.getExecutedAt()),e.body.case="treeEdit",e.body.value=a}else if(t instanceof Wr){const n=t,a=be(uI);a.parentCreatedAt=Se(n.getParentCreatedAt()),a.from=pc(n.getFromPos()),a.to=pc(n.getToPos());const o=n.getAttributesToRemove();if(o.length>0)a.attributesToRemove=o;else{const l=a.attributes;for(const[c,d]of n.getAttributes())l[c]=d}a.executedAt=Se(n.getExecutedAt()),e.body.case="treeStyle",e.body.value=a}else if(t instanceof Hr){const n=t,a=be(cI);a.parentCreatedAt=Se(n.getParentCreatedAt()),a.createdAt=Se(n.getCreatedAt()),a.value=gc(n.getValue()),a.executedAt=Se(n.getExecutedAt()),e.body.case="arraySet",e.body.value=a}else throw new G(U.ErrUnimplemented,"unimplemented operation");return e}function PI(t){const e=[];for(const n of t)e.push(Vg(n));return e}function QI(t){const e=be(eI,{id:_g(t.getID()),message:t.getMessage()});return t.hasOperations()&&(e.operations=PI(t.getOperations())),t.hasPresenceChange()&&(e.presenceChange=JI(t.getPresenceChange())),e}function qI(t){const e=[];for(const n of t)e.push(QI(n));return e}function eR(t){const e=[];for(const n of t)e.push(be(yI,{key:n.getStrKey(),element:xm(n.getValue())}));return e}function tR(t){const e=[];for(const n of t)e.push(be(vI,{element:xm(n.getValue())}));return e}function nR(t){const e=[];for(const n of t){const a=be(bI);a.id=$I(n.getID()),a.value=n.getValue().getContent(),a.removedAt=Se(n.getRemovedAt());const o=a.attributes,l=n.getValue().getAttrs();for(const c of l){const d=be(EE);d.value=c.getValue(),d.updatedAt=Se(c.getUpdatedAt()),o[c.getKey()]=d}e.push(a)}return e}function rR(t){const e=[];if(!t||!t.length)return e;for(const n of t)e.push(be(EI,{content:Nm(n)}));return e}function iR(t){const e={};for(const n of t)e[n.getKey()]=be(EE,{value:n.getValue(),updatedAt:Se(n.getUpdatedAt()),isRemoved:n.isRemoved()});return e}function Nm(t){if(!t)return[];const e=[];return ff(t,(n,a)=>{const o=be(AI,{id:rl(n.id),type:n.type,removedAt:Se(n.removedAt),depth:a});n.isText&&(o.value=n.value),n.insPrevID&&(o.insPrevId=rl(n.insPrevID)),n.insNextID&&(o.insNextId=rl(n.insNextID)),n.attrs&&(o.attributes=iR(n.attrs)),e.push(o)}),e}function aR(t){return be(Mn,{body:{case:"jsonObject",value:be(fI,{nodes:eR(t.getRHT()),createdAt:Se(t.getCreatedAt()),movedAt:Se(t.getMovedAt()),removedAt:Se(t.getRemovedAt())})}})}function YE(t){return be(Mn,{body:{case:"jsonArray",value:be(dI,{nodes:tR(t.getElements()),createdAt:Se(t.getCreatedAt()),movedAt:Se(t.getMovedAt()),removedAt:Se(t.getRemovedAt())})}})}function sR(t){return be(Mn,{body:{case:"primitive",value:be(hI,{type:zE(t.getType()),value:t.toBytes(),createdAt:Se(t.getCreatedAt()),movedAt:Se(t.getMovedAt()),removedAt:Se(t.getRemovedAt())})}})}function oR(t){return be(Mn,{body:{case:"text",value:be(gI,{nodes:nR(t.getRGATreeSplit()),createdAt:Se(t.getCreatedAt()),movedAt:Se(t.getMovedAt()),removedAt:Se(t.getRemovedAt())})}})}function lR(t){return be(Mn,{body:{case:"counter",value:be(mI,{type:UE(t.getType()),value:t.toBytes(),createdAt:Se(t.getCreatedAt()),movedAt:Se(t.getMovedAt()),removedAt:Se(t.getRemovedAt())})}})}function ZE(t){return be(Mn,{body:{case:"tree",value:be(pI,{nodes:Nm(t.getRoot()),createdAt:Se(t.getCreatedAt()),movedAt:Se(t.getMovedAt()),removedAt:Se(t.getRemovedAt())})}})}function xm(t){if(t instanceof Xt)return aR(t);if(t instanceof Wt)return YE(t);if(t instanceof dt)return sR(t);if(t instanceof ln)return oR(t);if(t instanceof on)return lR(t);if(t instanceof vn)return ZE(t);throw new G(U.ErrUnimplemented,"unimplemented element")}function uR(t){return be(qC,{documentKey:t.getDocumentKey(),checkpoint:jI(t.getCheckpoint()),isRemoved:t.getIsRemoved(),changes:qI(t.getChanges()),snapshot:t.getSnapshot(),versionVector:wm(t.getVersionVector())})}function cR(t){return{id:t.id,label:t.label,description:t.description,snapshot:t.snapshot,createdAt:t.createdAt?AT(t.createdAt):new Date}}function Po(t){if(!(t instanceof Pe))return{};const e=t.findDetails(VI);for(const n of e)return n.metadata;return{}}function As(t){return Po(t).code??""}function ig(t,e){return t instanceof Pe&&As(t)===e}function GE(t){return Xn.of(t.clientSeq,BigInt(t.lamport),Dm(t.actorId),Tm(t.versionVector),BigInt(t.serverSeq))}function Tm(t){if(!t)return;const e=new Cs;return Object.entries(t.vector).forEach(([n,a])=>{const o=hf(_R(n));e.set(o,BigInt(a.toString()))}),e}function Ee(t){if(t)return _n.of(BigInt(t.lamport),t.delimiter,Dm(t.actorId))}function Cm(t){const e={};return Object.entries(t.data).forEach(([n,a])=>{e[n]=JSON.parse(a)}),e}function fR(t){const e=t.type;if(e===ml.PUT){const n=Cm(t.presence);return{type:dr.Put,presence:n}}if(e===ml.CLEAR)return{type:dr.Clear};throw new G(U.ErrInvalidType,`unsupported type: ${e}`)}function dR(t){const e=new Map;return Object.entries(t).forEach(([n,a])=>{e.set(n,Cm(a))}),e}function kE(t){switch(t){case Oe.NULL:return it.Null;case Oe.BOOLEAN:return it.Boolean;case Oe.INTEGER:return it.Integer;case Oe.LONG:return it.Long;case Oe.DOUBLE:return it.Double;case Oe.STRING:return it.String;case Oe.BYTES:return it.Bytes;case Oe.DATE:return it.Date}throw new G(U.ErrUnimplemented,`unimplemented value type: ${t}`)}function Kc(t){switch(t){case Oe.INTEGER_CNT:return gr.Int;case Oe.LONG_CNT:return gr.Long}throw new G(U.ErrUnimplemented,`unimplemented value type: ${t}`)}function yc(t){switch(t.type){case Oe.JSON_OBJECT:return t.value?jE(t.value):Xt.create(Ee(t.createdAt));case Oe.JSON_ARRAY:return t.value?CR(t.value):Wt.create(Ee(t.createdAt));case Oe.TEXT:return ln.create(Ys.create(),Ee(t.createdAt));case Oe.TREE:return RR(t.value);case Oe.NULL:case Oe.BOOLEAN:case Oe.INTEGER:case Oe.LONG:case Oe.DOUBLE:case Oe.STRING:case Oe.BYTES:case Oe.DATE:return dt.of(dt.valueFromBytes(kE(t.type),t.value),Ee(t.createdAt));case Oe.INTEGER_CNT:case Oe.LONG_CNT:return on.create(Kc(t.type),on.valueFromBytes(Kc(t.type),t.value),Ee(t.createdAt))}}function vc(t){return zt.of(ur.of(Ee(t.createdAt),t.offset),t.relativeOffset)}function XE(t){return ur.of(Ee(t.createdAt),t.offset)}function hR(t){const e=vl.create(t.value);Object.entries(t.attributes).forEach(([a,o])=>{e.setAttr(a,o.value,Ee(o.updatedAt))});const n=Bi.create(XE(t.id),e);return n.setRemovedAt(Ee(t.removedAt)),n}function vs(t){return jn.of(il(t.parentId),il(t.leftSiblingId))}function il(t){return Yt.of(Ee(t.createdAt),t.offset)}function gR(t){if(!t.length)return;const e=[];return t.forEach(n=>{const a=Im(n.content);e.push(a)}),e}function Im(t){if(t.length===0)return;const e=[];for(const o of t)e.push(pR(o));const n=e[e.length-1],a=new Map;a.set(t[e.length-1].depth,e[e.length-1]);for(let o=e.length-2;o>=0;o--)a.get(t[o].depth-1).prepend(e[o]),a.set(t[o].depth,e[o]);return n.updateDescendantsSize(),n.updateDescendantsSize(!0),vn.create(n,Ls).getRoot()}function mR(t){const e=Kr.create();for(const[n,a]of Object.entries(t))e.setInternal(n,a.value,Ee(a.updatedAt),a.isRemoved);return e}function pR(t){const e=il(t.id),n=yn.create(e,t.type),a=Object.entries(t.attributes);return n.isText?n.value=t.value:a.length&&(n.attrs=mR(t.attributes)),t.insPrevId&&(n.insPrevID=il(t.insPrevId)),t.insNextId&&(n.insNextID=il(t.insNextId)),n.removedAt=Ee(t.removedAt),n}function WE(t){if(t.body.case==="set"){const e=t.body.value;return Sa.create(e.key,yc(e.value),Ee(e.parentCreatedAt),Ee(e.executedAt))}else if(t.body.case==="add"){const e=t.body.value;return Zi.create(Ee(e.parentCreatedAt),Ee(e.prevCreatedAt),yc(e.value),Ee(e.executedAt))}else if(t.body.case==="move"){const e=t.body.value;return Jn.create(Ee(e.parentCreatedAt),Ee(e.prevCreatedAt),Ee(e.createdAt),Ee(e.executedAt))}else if(t.body.case==="remove"){const e=t.body.value;return hr.create(Ee(e.parentCreatedAt),Ee(e.createdAt),Ee(e.executedAt))}else if(t.body.case==="edit"){const e=t.body.value,n=new Map;return Object.entries(e.attributes).forEach(([a,o])=>{n.set(a,o)}),Yi.create(Ee(e.parentCreatedAt),vc(e.from),vc(e.to),e.content,n,Ee(e.executedAt))}else if(t.body.case==="style"){const e=t.body.value,n=new Map;return Object.entries(e.attributes).forEach(([a,o])=>{n.set(a,o)}),Bl.create(Ee(e.parentCreatedAt),vc(e.from),vc(e.to),n,Ee(e.executedAt))}else if(t.body.case==="increase"){const e=t.body.value;return ks.create(Ee(e.parentCreatedAt),yc(e.value),Ee(e.executedAt))}else if(t.body.case==="treeEdit"){const e=t.body.value;return Ll.create(Ee(e.parentCreatedAt),vs(e.from),vs(e.to),gR(e.contents),e.splitLevel,Ee(e.executedAt))}else if(t.body.case==="treeStyle"){const e=t.body.value,n=new Map,a=e.attributesToRemove;return a?.length>0?Wr.createTreeRemoveStyleOperation(Ee(e.parentCreatedAt),vs(e.from),vs(e.to),a,Ee(e.executedAt)):(Object.entries(e.attributes).forEach(([o,l])=>{n.set(o,l)}),Wr.create(Ee(e.parentCreatedAt),vs(e.from),vs(e.to),n,Ee(e.executedAt)))}else if(t.body.case==="arraySet"){const e=t.body.value;return Hr.create(Ee(e.parentCreatedAt),Ee(e.createdAt),yc(e.value),Ee(e.executedAt))}else throw new G(U.ErrUnimplemented,"unimplemented operation")}function yR(t){const e=[];for(const n of t){const a=WE(n);a&&e.push(a)}return e}function KE(t){const e=[];for(const n of t)e.push(Gs.create({id:GE(n.id),operations:yR(n.operations),presenceChange:n.presenceChange?fR(n.presenceChange):void 0,message:n.message}));return e}function vR(t){return Is.of(BigInt(t.serverSeq),t.clientSeq)}function bR(t){return df.create(t.documentKey,vR(t.checkpoint),t.isRemoved,KE(t.changes),Tm(t.versionVector),t.snapshot)}function HE(t){const e=new zs;for(const a of t.nodes){const o=Rm(a.element);e.set(a.key,o,o.getPositionedAt())}const n=new Xt(Ee(t.createdAt),e);return n.setMovedAt(Ee(t.movedAt)),n.setRemovedAt(Ee(t.removedAt)),n}function FE(t){const e=new yl;for(const a of t.nodes)e.insert(Rm(a.element));const n=new Wt(Ee(t.createdAt),e);return n.setMovedAt(Ee(t.movedAt)),n.setRemovedAt(Ee(t.removedAt)),n}function SR(t){const e=dt.of(dt.valueFromBytes(kE(t.type),t.value),Ee(t.createdAt));return e.setMovedAt(Ee(t.movedAt)),e.setRemovedAt(Ee(t.removedAt)),e}function AR(t){const e=new Ys;let n=e.getHead();for(const o of t.nodes){const l=e.insertAfter(n,hR(o));o.insPrevId&&l.setInsPrev(e.findNode(XE(o.insPrevId))),n=l}const a=new ln(e,Ee(t.createdAt));return a.setMovedAt(Ee(t.movedAt)),a.setRemovedAt(Ee(t.removedAt)),a}function ER(t){const e=on.create(Kc(t.type),on.valueFromBytes(Kc(t.type),t.value),Ee(t.createdAt));return e.setMovedAt(Ee(t.movedAt)),e.setRemovedAt(Ee(t.removedAt)),e}function JE(t){const e=Im(t.nodes);return vn.create(e,Ee(t.createdAt))}function Rm(t){if(t.body.case==="jsonObject")return HE(t.body.value);if(t.body.case==="jsonArray")return FE(t.body.value);if(t.body.case==="primitive")return SR(t.body.value);if(t.body.case==="text")return AR(t.body.value);if(t.body.case==="counter")return ER(t.body.value);if(t.body.case==="tree")return JE(t.body.value);throw new G(U.ErrUnimplemented,"unimplemented element")}function wR(t){return t.map(e=>({path:e.path,type:e.type}))}function NR(t){if(!t)return{root:Xt.create(Ls),presences:new Map};const e=On(QC,t);return{root:Rm(e.root),presences:dR(e.presences)}}function xR(t){const e=wm(t);return hf(Ui(vm,e))}function TR(t){const e=_m(t),n=On(vm,e);return Tm(n)}function jE(t){if(!t)throw new G(U.ErrInvalidArgument,"bytes is empty");const e=On(Mn,t);return HE(e.body.value)}function $E(t){return Ui(Mn,xm(t))}function CR(t){if(!t)throw new G(U.ErrInvalidArgument,"bytes is empty");const e=On(Mn,t);return FE(e.body.value)}function IR(t){return Ui(Mn,YE(t))}function RR(t){if(!t)throw new G(U.ErrInvalidArgument,"bytes is empty");const e=On(Mn,t);return JE(e.body.value)}function DR(t){return Ui(Mn,ZE(t))}function hf(t){return t?Array.from(t).map(e=>e.toString(16).padStart(2,"0")).join(""):""}function Dm(t){return hf(t)}function _m(t){return new Uint8Array(t.match(/.{1,2}/g).map(e=>parseInt(e,16)))}function _R(t){if(typeof window<"u"&&typeof window.atob=="function"){const e=window.atob(t),n=e.length,a=new Uint8Array(n);for(let o=0;o<n;o++)a[o]=e.charCodeAt(o);return a}else if(typeof globalThis<"u"&&typeof globalThis.Buffer<"u"){const e=globalThis.Buffer;return new Uint8Array(e.from(t,"base64"))}else throw new Error("No base64 decoder available")}function gf(t){return _m(t)}function VR(t){if(typeof window<"u"&&typeof window.btoa=="function"){let e="";for(let n=0;n<t.byteLength;n++)e+=String.fromCharCode(t[n]);return window.btoa(e)}else{if(typeof globalThis<"u"&&typeof globalThis.Buffer<"u")return globalThis.Buffer.from(t).toString("base64");throw new Error("No base64 encoder available")}}function OR(t){const e=On(ym,t);return GE(e)}function MR(t){const e=On(bm,t);return WE(e)}const ot={fromPresence:Cm,toChangePack:uR,fromChangePack:bR,fromChanges:KE,toTreeNodes:Nm,fromTreeNodes:Im,objectToBytes:$E,bytesToObject:jE,bytesToSnapshot:NR,bytesToHex:hf,hexToBytes:_m,toHexString:Dm,toUint8Array:gf,toOperation:Vg,toChangeID:_g,bytesToChangeID:OR,bytesToOperation:MR,versionVectorToHex:xR,hexToVersionVector:TR,fromSchemaRules:wR,toRevisionSummary:cR,changeIDToBinary:t=>Ui(ym,_g(t)),operationToBinary:t=>Ui(bm,Vg(t))};var nn=(t=>(t[t.Trivial=0]="Trivial",t[t.Debug=1]="Debug",t[t.Info=2]="Info",t[t.Warn=3]="Warn",t[t.Error=4]="Error",t[t.Fatal=5]="Fatal",t))(nn||{});let fa=3;function BR(t){fa=t}const pe={trivial:(...t)=>{fa>0||typeof console<"u"&&console.log("YORKIE T:",...t)},debug:(...t)=>{fa>1||typeof console<"u"&&console.log("YORKIE D:",...t)},info:(...t)=>{fa>2||typeof console<"u"&&console.log("YORKIE I:",...t)},warn:(...t)=>{fa>3||typeof console<"u"&&(typeof console.warn<"u"?console.warn("YORKIE W:",...t):console.log("YORKIE W:",...t))},error:(...t)=>{fa>4||typeof console<"u"&&(typeof console.error<"u"?console.error("YORKIE E:",...t):console.log("YORKIE E:",...t))},fatal:(...t)=>{typeof console<"u"&&(typeof console.error<"u"?console.error("YORKIE F:",...t):console.log("YORKIE F:",...t))},isEnabled:t=>fa<=t};function PE(){return"xxxxxxxx-xxxx-4xxxy-xxxx-xxxxxxxxxxx".replace(/[xy]/g,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}const ag=()=>{};class LR{finalized=!1;observers=[];finalError;constructor(e){try{e(this)}catch(n){this.error(n)}}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,a){let o;if(!e)throw new G(U.ErrInvalidArgument,"missing observer");if(this.finalized)throw new G(U.ErrRefused,"observable is finalized due to previous error");typeof e=="object"?o=e:o={next:e,error:n,complete:a},o.next===void 0&&(o.next=ag),o.error===void 0&&(o.error=ag),o.complete===void 0&&(o.complete=ag);const l=PE(),c=this.unsubscribeOne.bind(this,l);if(this.observers.push({subscriptionID:l,observer:o}),this.finalized)try{this.finalError?o.error(this.finalError):o.complete()}catch(d){pe.warn(d)}return c}unsubscribeOne(e){this.observers=this.observers?.filter(n=>n.subscriptionID!==e)}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e].observer)}catch(a){pe.error(a)}}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.observers=void 0)}}function QE(t){const e=new LR(t);return{subscribe:e.subscribe.bind(e),getProxy:()=>e}}class al{prevID;nextID;delimiter;message;root;operations;presenceChange;previousPresence;reversePresenceKeys;constructor(e,n,a,o){this.prevID=e,this.nextID=e.next(),this.delimiter=NE,this.root=n,this.operations=[],this.previousPresence=kn(a),this.presenceChange=void 0,this.reversePresenceKeys=new Set,this.message=o}static create(e,n,a,o){return new al(e,n,a,o)}push(e){this.operations.push(e)}registerElement(e,n){this.root.registerElement(e,n)}registerRemovedElement(e){this.root.registerRemovedElement(e)}registerGCPair(e){this.root.registerGCPair(e)}getNextID(){return this.isPresenceOnlyChange()?this.prevID.next(!0).setLamport(this.prevID.getLamport()).setVersionVector(this.prevID.getVersionVector()):this.nextID}toChange(){const e=this.isPresenceOnlyChange()?this.prevID.next(!0):this.nextID;return Gs.create({id:e,operations:this.operations,presenceChange:this.presenceChange,message:this.message})}isPresenceOnlyChange(){return this.operations.length===0}hasChange(){return this.operations.length>0||this.presenceChange!==void 0}setPresenceChange(e){this.presenceChange=e}setReversePresence(e,n){for(const a of Object.keys(e))n?.addToHistory?this.reversePresenceKeys.add(a):this.reversePresenceKeys.delete(a)}getReversePresence(){if(this.reversePresenceKeys.size===0)return;const e={};for(const n of this.reversePresenceKeys)e[n]=this.previousPresence[n];return e}issueTimeTicket(){return this.delimiter+=1,this.nextID.createTimeTicket(this.delimiter)}getLastTimeTicket(){return this.nextID.createTimeTicket(this.delimiter)}acc(e){this.root.acc(e)}}function qE(t,e){const n=new bl(t);return new Proxy(e,n.getHandlers())}class bl{context;handlers;constructor(e){this.context=e,this.handlers={set:(n,a,o)=>(pe.isEnabled(nn.Trivial)&&pe.trivial(`obj[${a}]=${JSON.stringify(o)}`),bl.setInternal(e,n,a,o),!0),get:(n,a)=>(pe.isEnabled(nn.Trivial)&&pe.trivial(`obj[${a}]`),a==="getID"?()=>n.getCreatedAt():a==="toJSON"||a==="toString"?()=>n.toJSON():a==="toJS"?()=>n.toJS():a==="toJSForTest"?()=>n.toJSForTest():da(e,n.get(a))),ownKeys:n=>n.getKeys(),getOwnPropertyDescriptor:()=>({enumerable:!0,configurable:!0}),deleteProperty:(n,a)=>(pe.isEnabled(nn.Trivial)&&pe.trivial(`obj[${a}]`),bl.deleteInternal(e,n,a),!0)}}static setInternal(e,n,a,o){if(a.includes("."))throw new G(U.ErrInvalidObjectKey,"key must not contain the '.'.");const l=e.issueTimeTicket(),c=sl(e,o,l),d=n.set(a,c,l);e.registerElement(c,n),d&&e.registerRemovedElement(d),e.push(Sa.create(a,c.deepcopy(),n.getCreatedAt(),l))}static buildObjectMembers(e,n){const a={};for(const[o,l]of Object.entries(n)){if(o.includes("."))throw new G(U.ErrInvalidObjectKey,"key must not contain the '.'.");const c=e.issueTimeTicket(),d=sl(e,l,c);a[o]=d}return a}static deleteInternal(e,n,a){const o=e.issueTimeTicket(),l=n.deleteByKey(a,o);l&&(e.push(hr.create(n.getCreatedAt(),l.getCreatedAt(),o)),e.registerRemovedElement(l))}getHandlers(){return this.handlers}}function zR(t,e){const n=new Je(t,e);return new Proxy(e,n.getHandlers())}function sS(t){return typeof t=="string"||t instanceof String?!isNaN(t):!1}function UR(t){return["concat","entries","every","filter","find","findIndex","forEach","join","keys","map","reduce","reduceRight","slice","some","toLocaleString","toString","values"].includes(t)}class Je{context;handlers;array;constructor(e,n){this.context=e,this.array=n,this.handlers={get:(a,o,l)=>o==="getID"?()=>a.getCreatedAt():o==="getElementByID"?c=>{const d=a.getByID(c);if(!(!d||d.isRemoved()))return Gn(e,d)}:o==="getElementByIndex"?c=>{const d=a.get(c);return Gn(e,d)}:o==="getLast"?()=>Gn(e,a.getLast()):o==="delete"?c=>{const d=Je.deleteInternalByIndex(e,a,c);return Gn(e,d)}:o==="deleteByID"?c=>{const d=Je.deleteInternalByID(e,a,c);return Gn(e,d)}:o==="insertAfter"?(c,d)=>{const m=Je.insertAfterInternal(e,a,c,d);return Gn(e,m)}:o==="insertIntegerAfter"?(c,d)=>{const m=Je.insertIntegerAfterInternal(e,a,c,d);return Gn(e,m)}:o==="insertBefore"?(c,d)=>{const m=Je.insertBeforeInternal(e,a,c,d);return Gn(e,m)}:o==="setValue"?(c,d)=>{const m=Je.setValueInternal(e,a,c,d);return Gn(e,m)}:o==="moveBefore"?(c,d)=>{Je.moveBeforeInternal(e,a,c,d)}:o==="moveAfter"?(c,d)=>{Je.moveAfterInternal(e,a,c,d)}:o==="moveAfterByIndex"?(c,d)=>{Je.moveAfterByIndexInternal(e,a,c,d)}:o==="moveFront"?c=>{Je.moveFrontInternal(e,a,c)}:o==="moveLast"?c=>{Je.moveLastInternal(e,a,c)}:sS(o)?da(e,a.get(Number(o))):o==="push"?c=>Je.pushInternal(e,a,c):o==="splice"?(c,d,...m)=>Je.splice(e,a,c,d,...m):o==="length"?a.length:typeof o=="symbol"&&o===Symbol.iterator?Je.iteratorInternal.bind(this,e,a):o==="includes"?(c,d)=>Je.includes(e,a,c,d):o==="indexOf"?(c,d)=>Je.indexOf(e,a,c,d):o==="lastIndexOf"?(c,d)=>Je.lastIndexOf(e,a,c,d):o==="toJSForTest"?()=>a.toJSForTest():o==="toTestString"?()=>Je.toTestString(a):typeof o=="string"&&UR(o)?(...c)=>{const d=Array.from(a).map(m=>da(e,m));return Array.prototype[o].apply(d,c)}:Reflect.get(a,o,l),set:(a,o,l)=>{if(sS(o)){const c=Number(o);return Je.setValueInternal(e,a,c,l),!0}return Reflect.set(a,o,l)},deleteProperty:(a,o)=>(pe.isEnabled(nn.Trivial)&&pe.trivial(`array[${o}]`),Je.deleteInternalByIndex(e,a,Number.parseInt(o)),!0)}}static*iteratorInternal(e,n){for(const a of n)yield Gn(e,a)}static buildArrayElements(e,n){const a=[];for(const o of n){const l=e.issueTimeTicket(),c=sl(e,o,l);a.push(c)}return a}static pushInternal(e,n,a){return Je.insertAfterInternal(e,n,n.getLastCreatedAt(),a),n.length}static moveBeforeInternal(e,n,a,o){const l=e.issueTimeTicket(),c=n.getPrevCreatedAt(a);n.moveAfter(c,o,l),e.push(Jn.create(n.getCreatedAt(),c,o,l))}static moveAfterInternal(e,n,a,o){const l=e.issueTimeTicket();e.push(Jn.create(n.getCreatedAt(),a,o,l)),n.moveAfter(a,o,l)}static moveAfterByIndexInternal(e,n,a,o){const l=n.get(a);if(!l)throw new G(U.ErrInvalidArgument,`index out of bounds: ${a}`);const c=n.get(o);if(!c)throw new G(U.ErrInvalidArgument,`index out of bounds: ${o}`);Je.moveAfterInternal(e,n,l.getCreatedAt(),c.getCreatedAt())}static moveFrontInternal(e,n,a){const o=e.issueTimeTicket(),l=n.getHead();n.moveAfter(l.getCreatedAt(),a,o),e.push(Jn.create(n.getCreatedAt(),l.getCreatedAt(),a,o))}static moveLastInternal(e,n,a){const o=e.issueTimeTicket(),l=n.getLastCreatedAt();n.moveAfter(l,a,o),e.push(Jn.create(n.getCreatedAt(),l,a,o))}static insertAfterInternal(e,n,a,o){const l=e.issueTimeTicket(),c=sl(e,o,l);return n.insertAfter(a,c),e.registerElement(c,n),e.push(Zi.create(n.getCreatedAt(),a,c.deepcopy(),l)),c}static insertIntegerAfterInternal(e,n,a,o){const l=n.get(a);if(!l)throw new G(U.ErrInvalidArgument,`index out of bounds: ${a}`);return Je.insertAfterInternal(e,n,l.getCreatedAt(),o),n}static insertBeforeInternal(e,n,a,o){return Je.insertAfterInternal(e,n,n.getPrevCreatedAt(a),o)}static setValueInternal(e,n,a,o){const l=n.get(a);if(!l)throw new G(U.ErrInvalidArgument,`index out of bounds: ${a}`);return Je.setByIndexInternal(e,n,l.getCreatedAt(),o),n}static setByIndexInternal(e,n,a,o){const l=e.issueTimeTicket(),c=sl(e,o,l),d=c.deepcopy();return e.push(Hr.create(n.getCreatedAt(),a,d,l)),n.set(a,c,l),e.registerElement(c,n),c}static deleteInternalByIndex(e,n,a){const o=e.issueTimeTicket(),l=n.deleteByIndex(a,o);if(l)return e.push(hr.create(n.getCreatedAt(),l.getCreatedAt(),o)),e.registerRemovedElement(l),l}static deleteInternalByID(e,n,a){const o=e.issueTimeTicket(),l=n.delete(a,o);return e.push(hr.create(n.getCreatedAt(),l.getCreatedAt(),o)),e.registerRemovedElement(l),l}static splice(e,n,a,o,...l){const c=n.length,d=a>=0?Math.min(a,c):Math.max(c+a,0),m=o===void 0?c:o<0?d:Math.min(d+o,c),h=[];for(let p=d;p<m;p++){const y=Je.deleteInternalByIndex(e,n,d);if(y){const v=y.deepcopy();v.setRemovedAt(),h.push(da(e,v))}}if(l){let p=d===0?n.getHead().getID():n.get(d-1).getID();for(const y of l)p=Je.insertAfterInternal(e,n,p,y).getID()}return h}static includes(e,n,a,o){const l=n.length,c=o===void 0?0:o<0?Math.max(o+l,0):o;if(c>=l)return!1;if(dt.isSupport(a))return Array.from(n).map(m=>da(e,m)).includes(a,c);for(let d=c;d<l;d++)if(n.get(d)?.getID()===a.getID())return!0;return!1}static indexOf(e,n,a,o){const l=n.length,c=o===void 0?0:o<0?Math.max(o+l,0):o;if(c>=l)return-1;if(dt.isSupport(a))return Array.from(n).map(m=>da(e,m)).indexOf(a,c);for(let d=c;d<l;d++)if(n.get(d)?.getID()===a.getID())return d;return-1}static lastIndexOf(e,n,a,o){const l=n.length,c=o===void 0||o>=l?l-1:o<0?o+l:o;if(c<0)return-1;if(dt.isSupport(a))return Array.from(n).map(m=>da(e,m)).lastIndexOf(a,c);for(let d=c;d>0;d--)if(n.get(d)?.getID()===a.getID())return d;return-1}static toTestString(e){return e.toTestString()}getHandlers(){return this.handlers}}class Vm{context;text;constructor(e,n){this.context=e,this.text=n}initialize(e,n){this.context=e,this.text=n}getID(){return this.text.getID()}edit(e,n,a,o){if(!this.context||!this.text)throw new G(U.ErrNotInitialized,"Text is not initialized yet");if(e>n)throw new G(U.ErrInvalidArgument,"from should be less than or equal to to");const l=this.text.indexRangeToPosRange(e,n);pe.isEnabled(nn.Debug)&&pe.debug(`EDIT: f:${e}->${l[0].toTestString()}, t:${n}->${l[1].toTestString()} c:${a}`);const c=o?Zs(o):void 0,d=this.context.issueTimeTicket(),[,m,h,p]=this.text.edit(l,a,d,c);this.context.acc(h);for(const y of m)this.context.registerGCPair(y);return this.context.push(new Yi(this.text.getCreatedAt(),l[0],l[1],a,c?new Map(Object.entries(c)):new Map,d)),this.text.findIndexesFromRange(p)}delete(e,n){return this.edit(e,n,"")}empty(){return this.edit(0,this.length,"")}setStyle(e,n,a){if(!this.context||!this.text)throw new G(U.ErrNotInitialized,"Text is not initialized yet");if(e>n)throw new G(U.ErrInvalidArgument,"from should be less than or equal to to");const o=this.text.indexRangeToPosRange(e,n);pe.isEnabled(nn.Debug)&&pe.debug(`STYL: f:${e}->${o[0].toTestString()}, t:${n}->${o[1].toTestString()} a:${JSON.stringify(a)}`);const l=Zs(a),c=this.context.issueTimeTicket(),[d,m]=this.text.setStyle(o,l,c);this.context.acc(m);for(const h of d)this.context.registerGCPair(h);return this.context.push(new Bl(this.text.getCreatedAt(),o[0],o[1],new Map(Object.entries(l)),c)),!0}indexRangeToPosRange(e){if(!this.context||!this.text)throw new G(U.ErrNotInitialized,"Text is not initialized yet");const n=this.text.indexRangeToPosRange(e[0],e[1]);return[n[0].toStruct(),n[1].toStruct()]}posRangeToIndexRange(e){if(!this.context||!this.text)throw new G(U.ErrNotInitialized,"Text is not initialized yet");const n=this.text.findIndexesFromRange([zt.fromStruct(e[0]),zt.fromStruct(e[1])]);return[n[0],n[1]]}toTestString(){if(!this.context||!this.text)throw new G(U.ErrNotInitialized,"Text is not initialized yet");return this.text.toTestString()}values(){if(!this.context||!this.text)throw new G(U.ErrNotInitialized,"Text is not initialized yet");return this.text.values()}get length(){return this.text.length}getTreeByIndex(){return this.text.getTreeByIndex()}getTreeByID(){return this.text.getTreeByID()}toString(){if(!this.context||!this.text)throw new G(U.ErrNotInitialized,"Text is not initialized yet");return this.text.toString()}toJSON(){if(!this.context||!this.text)throw new G(U.ErrNotInitialized,"Text is not initialized yet");return this.text.toJSON()}toJSForTest(){if(!this.context||!this.text)throw new G(U.ErrNotInitialized,"Text is not initialized yet");return this.text.toJSForTest()}createRangeForTest(e,n){if(!this.context||!this.text)throw new G(U.ErrNotInitialized,"Text is not initialized yet");return this.text.indexRangeToPosRange(e,n)}}class Om{valueType;value;context;counter;constructor(e,n){this.valueType=e,this.value=n}initialize(e,n){this.valueType=n.getValueType(),this.context=e,this.counter=n,this.value=n.getValue()}getID(){return this.counter.getID()}getValue(){return this.value}getValueType(){return this.valueType}increase(e){if(!this.context||!this.counter)throw new G(U.ErrNotInitialized,"Counter is not initialized yet");const n=this.context.issueTimeTicket(),a=dt.of(e,n);if(!a.isNumericType())throw new TypeError(`Unsupported type of value: ${typeof a.getValue()}`);return this.counter.increase(a),this.context.push(ks.create(this.counter.getCreatedAt(),a,n)),this}toJSForTest(){if(!this.context||!this.counter)throw new G(U.ErrNotInitialized,"Counter is not initialized yet");return this.counter.toJSForTest()}}function Mm(t){if(t.isText)return{type:t.type,value:t.value};const e={type:t.type,children:t.children.map(n=>Mm(n))};return t.attrs&&(e.attributes=Xr(t.attrs.toObject())),e}function YR(t,e){const n={type:t.isText?t.parent.type:t.type,children:t.isText?t.parent.getChildrenText().length===e?[]:[{type:cr,value:t.parent.getChildrenText().slice(e)}]:t.children.slice(e).map(a=>Mm(a))};return t.attrs?n.attributes=Xr(t.attrs.toObject()):t.isText&&t.parent.attrs&&(n.attributes=Xr(t.parent.attrs.toObject())),n}function ZR(t,e){const{node:n}=t,a=[...e].slice(0,-1),o=n.isText?n.parent.getChildrenText().length:n.children.length,l=[...a,o],c=[...a],d=[];c[c.length-1]+=1,e.every((h,p)=>h===l[p])||d.push({fromPath:[...e],toPath:l});const m=YR(n,e[e.length-1]);return m&&d.push({fromPath:c,toPath:c,content:m}),d}function GR(t,e){const{node:n,offset:a}=t,o=n.children[a],l=n.children[a-1],{children:c}=o,d=[...e].slice(0,-1),m=[{fromPath:[...e],toPath:[...d,a+1]}];if(!o.children.length)return m;const h=[...d,a-1,l.hasTextChild()?l.getChildrenText().length:l.children.length],p=c.map(y=>Mm(y));return m.push({fromPath:h,toPath:h,content:p}),m}function Bm(t,e,n){const{type:a}=t,o=n.issueTimeTicket();if(a===cr){e1(t);const{value:l}=t,c=yn.create(Yt.of(o,0),a,l);e.append(c)}else{const{children:l=[]}=t,{attributes:c}=t;let d;if(typeof c=="object"&&!_E(c)){const h=Zs(c);d=new Kr;for(const[p,y]of Object.entries(h))d.set(p,y,o)}const m=yn.create(Yt.of(o,0),a,void 0,d);e.append(m);for(const h of l)Bm(h,m,n)}}function kR(t,e){const{type:n}=e,a=t.issueTimeTicket();let o;if(e.type===cr){const{value:l}=e;o=yn.create(Yt.of(a,0),n,l)}else if(e){const{children:l=[]}=e,{attributes:c}=e;let d;if(typeof c=="object"&&!_E(c)){const m=Zs(c);d=new Kr;for(const[h,p]of Object.entries(m))d.set(h,p,a)}o=yn.create(Yt.of(t.issueTimeTicket(),0),n,void 0,d);for(const m of l)Bm(m,o,t)}return o}function e1(t){if(!t.value.length)throw new G(U.ErrInvalidArgument,"text node cannot have empty value");return!0}function oS(t){if(!t.length)return!0;if(t[0].type===cr)for(const n of t){const{type:a}=n;if(a!==cr)throw new G(U.ErrInvalidArgument,"element node and text node cannot be passed together");e1(n)}else for(const n of t){const{type:a}=n;if(a===cr)throw new G(U.ErrInvalidArgument,"element node and text node cannot be passed together")}return!0}class Lm{initialRoot;context;tree;constructor(e){this.initialRoot=e}initialize(e,n){this.context=e,this.tree=n}getID(){return this.tree.getID()}buildRoot(e){if(!this.initialRoot)return yn.create(Yt.of(e.issueTimeTicket(),0),ZI);const n=yn.create(Yt.of(e.issueTimeTicket(),0),this.initialRoot.type);for(const a of this.initialRoot.children)Bm(a,n,e);return n}getSize(){if(!this.context||!this.tree)throw new G(U.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getSize()}getNodeSize(){if(!this.context||!this.tree)throw new G(U.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getNodeSize()}getIndexTree(){if(!this.context||!this.tree)throw new G(U.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getIndexTree()}splitByPath(e){if(!this.context||!this.tree)throw new G(U.ErrNotInitialized,"Tree is not initialized yet");if(!e.length)throw new G(U.ErrInvalidArgument,"path should not be empty");const n=this.tree.pathToTreePos(e),a=ZR(n,e);for(const o of a){const{fromPath:l,toPath:c,content:d}=o,m=this.tree.pathToPos(l),h=this.tree.pathToPos(c);this.editInternal(m,h,d?[d]:[],0)}}mergeByPath(e){if(!this.context||!this.tree)throw new G(U.ErrNotInitialized,"Tree is not initialized yet");if(!e.length)throw new G(U.ErrInvalidArgument,"path should not be empty");const n=this.tree.pathToTreePos(e);if(n.node.isText)throw new G(U.ErrInvalidArgument,"text node cannot be merged");const a=GR(n,e);for(const o of a){const{fromPath:l,toPath:c,content:d}=o,m=this.tree.pathToPos(l),h=this.tree.pathToPos(c);this.editInternal(m,h,d??[],0)}}styleByPath(e,n){if(!this.context||!this.tree)throw new G(U.ErrNotInitialized,"Tree is not initialized yet");if(!e.length)throw new G(U.ErrInvalidArgument,"path should not be empty");const[a,o]=this.tree.pathToPosRange(e),l=this.context.issueTimeTicket(),c=n?Zs(n):void 0,[d,,m]=this.tree.style([a,o],c,l);this.context.acc(m);for(const h of d)this.context.registerGCPair(h);this.context.push(Wr.create(this.tree.getCreatedAt(),a,o,c?new Map(Object.entries(c)):new Map,l))}style(e,n,a){if(!this.context||!this.tree)throw new G(U.ErrNotInitialized,"Tree is not initialized yet");if(e>n)throw new G(U.ErrInvalidArgument,"from should be less than or equal to to");const o=this.tree.findPos(e),l=this.tree.findPos(n),c=this.context.issueTimeTicket(),d=a?Zs(a):void 0,[m,,h]=this.tree.style([o,l],d,c);this.context.acc(h);for(const p of m)this.context.registerGCPair(p);this.context.push(Wr.create(this.tree.getCreatedAt(),o,l,d?new Map(Object.entries(d)):new Map,c))}removeStyle(e,n,a){if(!this.context||!this.tree)throw new G(U.ErrNotInitialized,"Tree is not initialized yet");if(e>n)throw new G(U.ErrInvalidArgument,"from should be less than or equal to to");const o=this.tree.findPos(e),l=this.tree.findPos(n),c=this.context.issueTimeTicket(),[d,,m]=this.tree.removeStyle([o,l],a,c);this.context.acc(m);for(const h of d)this.context.registerGCPair(h);this.context.push(Wr.createTreeRemoveStyleOperation(this.tree.getCreatedAt(),o,l,a,c))}editInternal(e,n,a,o=0){if(a.length!==0&&a[0]&&(oS(a),a[0].type!==cr))for(const h of a){const{children:p=[]}=h;oS(p)}const l=this.context.getLastTimeTicket();let c=new Array;if(a[0]?.type===cr){let h="";for(const p of a){const{value:y}=p;h+=y}c.push(yn.create(Yt.of(this.context.issueTimeTicket(),0),cr,h))}else c=a.map(h=>h&&kR(this.context,h)).filter(h=>h);const[,d,m]=this.tree.edit([e,n],c.length?c.map(h=>h?.deepcopy()):void 0,o,l,()=>this.context.issueTimeTicket());this.context.acc(m);for(const h of d)this.context.registerGCPair(h);return this.context.push(Ll.create(this.tree.getCreatedAt(),e,n,c.length?c:void 0,o,l)),!0}editByPath(e,n,a,o=0){if(!this.context||!this.tree)throw new G(U.ErrNotInitialized,"Tree is not initialized yet");if(e.length!==n.length)throw new G(U.ErrInvalidArgument,"path length should be equal");if(!e.length||!n.length)throw new G(U.ErrInvalidArgument,"path should not be empty");const l=this.tree.pathToPos(e),c=this.tree.pathToPos(n);return this.editInternal(l,c,a?[a]:[],o)}editBulkByPath(e,n,a,o=0){if(!this.context||!this.tree)throw new G(U.ErrNotInitialized,"Tree is not initialized yet");if(e.length!==n.length)throw new G(U.ErrInvalidArgument,"path length should be equal");if(!e.length||!n.length)throw new G(U.ErrInvalidArgument,"path should not be empty");const l=this.tree.pathToPos(e),c=this.tree.pathToPos(n);return this.editInternal(l,c,a,o)}edit(e,n,a,o=0){if(!this.context||!this.tree)throw new G(U.ErrNotInitialized,"Tree is not initialized yet");if(e>n)throw new G(U.ErrInvalidArgument,"from should be less than or equal to to");const l=this.tree.findPos(e),c=this.tree.findPos(n);return this.editInternal(l,c,a?[a]:[],o)}editBulk(e,n,a,o=0){if(!this.context||!this.tree)throw new G(U.ErrNotInitialized,"Tree is not initialized yet");if(e>n)throw new G(U.ErrInvalidArgument,"from should be less than or equal to to");const l=this.tree.findPos(e),c=this.tree.findPos(n);return this.editInternal(l,c,a,o)}toXML(){if(!this.context||!this.tree)throw new G(U.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toXML()}toJSON(){if(!this.context||!this.tree)throw new G(U.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toJSON()}toJSForTest(){if(!this.context||!this.tree)throw new G(U.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toJSForTest()}toJSInfoForTest(){if(!this.context||!this.tree)throw new G(U.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toJSInfoForTest()}getRootTreeNode(){if(!this.context||!this.tree)throw new G(U.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getRootTreeNode()}indexToPath(e){if(!this.context||!this.tree)throw new G(U.ErrNotInitialized,"Tree is not initialized yet");return this.tree.indexToPath(e)}pathToIndex(e){if(!this.context||!this.tree)throw new G(U.ErrNotInitialized,"Tree is not initialized yet");return this.tree.pathToIndex(e)}pathRangeToPosRange(e){if(!this.context||!this.tree)throw new G(U.ErrNotInitialized,"Tree is not initialized yet");const n=[this.tree.pathToIndex(e[0]),this.tree.pathToIndex(e[1])],a=this.tree.indexRangeToPosRange(n);return[a[0].toStruct(),a[1].toStruct()]}indexRangeToPosRange(e){if(!this.context||!this.tree)throw new G(U.ErrNotInitialized,"Tree is not initialized yet");return this.tree.indexRangeToPosStructRange(e)}posRangeToIndexRange(e){if(!this.context||!this.tree)throw new G(U.ErrNotInitialized,"Tree is not initialized yet");const n=[jn.fromStruct(e[0]),jn.fromStruct(e[1])];return this.tree.posRangeToIndexRange(n)}posRangeToPathRange(e){if(!this.context||!this.tree)throw new G(U.ErrNotInitialized,"Tree is not initialized yet");const n=[jn.fromStruct(e[0]),jn.fromStruct(e[1])];return this.tree.posRangeToPathRange(n)}}function lS(t,e){return qE(t,e)}function Gn(t,e){if(e){if(e instanceof dt)return e;if(e instanceof Xt)return qE(t,e);if(e instanceof Wt)return zR(t,e);if(e instanceof ln)return new Vm(t,e);if(e instanceof on){const n=new Om(gr.Int,0);return n.initialize(t,e),n}else if(e instanceof vn){const n=new Lm;return n.initialize(t,e),n}}else return;throw new TypeError(`Unsupported type of element: ${typeof e}`)}function da(t,e){const n=Gn(t,e);return n instanceof dt?n.getValue():n}function sl(t,e,n){let a;if(dt.isSupport(e))a=dt.of(e,n);else if(Array.isArray(e))a=Wt.create(n,Je.buildArrayElements(t,e));else if(typeof e=="object")e instanceof Vm?(a=ln.create(Ys.create(),n),e.initialize(t,a)):e instanceof Om?(a=on.create(e.getValueType(),e.getValue(),n),e.initialize(t,a)):e instanceof Lm?(a=vn.create(e.buildRoot(t),n),e.initialize(t,a)):a=Xt.create(n,bl.buildObjectMembers(t,e));else throw new TypeError(`Unsupported type of value: ${typeof e}`);return a}class Sl{rootObject;elementPairMapByCreatedAt;gcElementSetByCreatedAt;gcPairMap;docSize;constructor(e){this.rootObject=e,this.elementPairMapByCreatedAt=new Map,this.gcElementSetByCreatedAt=new Set,this.gcPairMap=new Map,this.docSize={live:{data:0,meta:0},gc:{data:0,meta:0}},this.registerElement(e,void 0),e.getDescendants(n=>{if(n.getRemovedAt()&&this.registerRemovedElement(n),n instanceof ln||n instanceof vn)for(const a of n.getGCPairs())this.registerGCPair(a);return!1})}static create(){return new Sl(Xt.create(Ls))}findByCreatedAt(e){const n=this.elementPairMapByCreatedAt.get(e.toIDString());if(n)return n.element}findElementPairByCreatedAt(e){return this.elementPairMapByCreatedAt.get(e.toIDString())}createSubPaths(e){let n=this.elementPairMapByCreatedAt.get(e.toIDString());if(!n)return[];const a=[];for(;n.parent;){const o=n.element.getCreatedAt(),l=n.parent.subPathOf(o);if(l===void 0)throw new G(U.ErrInvalidArgument,`cant find the given element: ${o.toIDString()}`);a.unshift(l),n=this.elementPairMapByCreatedAt.get(n.parent.getCreatedAt().toIDString())}return a.unshift("$"),a}createPath(e){return this.createSubPaths(e).join(".")}registerElement(e,n){this.elementPairMapByCreatedAt.set(e.getCreatedAt().toIDString(),{parent:n,element:e}),Ut(this.docSize.live,e.getDataSize()),e instanceof Mi&&e.getDescendants((a,o)=>(this.elementPairMapByCreatedAt.set(a.getCreatedAt().toIDString(),{parent:o,element:a}),Ut(this.docSize.live,a.getDataSize()),!1))}deregisterElement(e){let n=0;const a=o=>{const l=o.getCreatedAt().toIDString();ma(this.docSize.gc,o.getDataSize()),this.elementPairMapByCreatedAt.delete(l),this.gcElementSetByCreatedAt.delete(l),n++};return a(e),e instanceof Mi&&e.getDescendants(o=>(a(o),!1)),n}registerRemovedElement(e){Ut(this.docSize.gc,e.getDataSize()),ma(this.docSize.live,e.getDataSize()),this.docSize.live.meta+=lr,this.gcElementSetByCreatedAt.add(e.getCreatedAt().toIDString())}registerGCPair(e){if(this.gcPairMap.get(e.child.toIDString())){this.gcPairMap.delete(e.child.toIDString());return}this.gcPairMap.set(e.child.toIDString(),e);const a=this.gcPairMap.get(e.child.toIDString()).child.getDataSize();Ut(this.docSize.gc,a),ma(this.docSize.live,a),e.child instanceof Oi||(this.docSize.live.meta+=lr)}getElementMapSize(){return this.elementPairMapByCreatedAt.size}getGarbageElementSetSize(){const e=new Set;for(const n of this.gcElementSetByCreatedAt){e.add(n);const a=this.elementPairMapByCreatedAt.get(n);a.element instanceof Mi&&a.element.getDescendants(o=>(e.add(o.getCreatedAt().toIDString()),!1))}return e.size}getObject(){return this.rootObject}getGarbageLen(){return this.getGarbageElementSetSize()+this.gcPairMap.size}getDocSize(){return this.docSize}deepcopy(){return new Sl(this.rootObject.deepcopy())}garbageCollect(e){let n=0;for(const a of this.gcElementSetByCreatedAt){const o=this.elementPairMapByCreatedAt.get(a),l=o.element.getRemovedAt();l&&e?.afterOrEqual(l)&&(o.parent.purge(o.element),n+=this.deregisterElement(o.element))}for(const[,a]of this.gcPairMap){const o=a.child.getRemovedAt();o&&e?.afterOrEqual(o)&&(a.parent.purge(a.child),ma(this.docSize.gc,a.child.getDataSize()),this.gcPairMap.delete(a.child.toIDString()),n+=1)}return n}toJSON(){return this.rootObject.toJSON()}toSortedJSON(){return this.rootObject.toSortedJSON()}getStats(){return{elements:this.getElementMapSize(),gcPairs:this.gcPairMap.size,gcElements:this.getGarbageElementSetSize()}}acc(e){Ut(this.docSize.live,e)}*getGCElementPairs(){for(const e of this.gcElementSetByCreatedAt){const n=this.elementPairMapByCreatedAt.get(e);n&&(yield n)}}}let uS=class{context;presence;constructor(e,n){this.context=e,this.presence=n}set(e,n){for(const a of Object.keys(e))this.presence[a]=e[a];this.context.setPresenceChange({type:dr.Put,presence:kn(this.presence)}),this.context.setReversePresence(e,n)}get(e){return this.presence[e]}clear(){this.presence={},this.context.setPresenceChange({type:dr.Clear})}};const cS=50;class XR{undoStack=[];redoStack=[];hasUndo(){return this.undoStack.length>0}hasRedo(){return this.redoStack.length>0}pushUndo(e){this.undoStack.length>=cS&&this.undoStack.shift(),this.undoStack.push(e)}popUndo(){return this.undoStack.pop()}pushRedo(e){this.redoStack.length>=cS&&this.redoStack.shift(),this.redoStack.push(e)}popRedo(){return this.redoStack.pop()}clearRedo(){this.redoStack=[]}clearUndo(){this.undoStack=[]}getUndoStackForTest(){return this.undoStack}getRedoStackForTest(){return this.redoStack}reconcileCreatedAt(e,n){const a=o=>{for(const l of o)for(const c of l)(c instanceof Hr||c instanceof hr||c instanceof Jn)&&c.getCreatedAt()===e&&c.setCreatedAt(n),(c instanceof Zi||c instanceof Jn)&&c.getPrevCreatedAt()===e&&c.setPrevCreatedAt(n)};a(this.undoStack),a(this.redoStack)}reconcileTextEdit(e,n,a,o){const l=c=>{for(const d of c)for(const m of d)m instanceof Yi&&m.getParentCreatedAt().compare(e)===0&&m.reconcileOperation(n,a,o)};l(this.undoStack),l(this.redoStack)}}function WR(t,e){const n=[];for(const a of e){const o=KR(t,a.path),l=HR(o,a);if(!l.valid)for(const c of l.errors||[])n.push(c)}return{valid:n.length===0,errors:n}}function KR(t,e){if(!e.startsWith("$"))throw new Error(`Path must start with $, got ${e}`);const n=e.split(".");let a=t;for(let o=1;o<n.length;o++){const l=n[o];if(!(a instanceof Xt))return;a=a.get(l)}return a}function HR(t,e){switch(e.type){case"string":case"boolean":case"integer":case"double":case"long":case"date":case"bytes":case"null":return JR(t,e);case"object":if(!(t instanceof Xt))return{valid:!1,errors:[{path:e.path,message:`expected object at path ${e.path}`}]};break;case"array":if(!(t instanceof Wt))return{valid:!1,errors:[{path:e.path,message:`expected array at path ${e.path}`}]};break;case"yorkie.Text":if(!(t instanceof ln))return{valid:!1,errors:[{path:e.path,message:`expected yorkie.Text at path ${e.path}`}]};break;case"yorkie.Tree":if(!(t instanceof vn))return{valid:!1,errors:[{path:e.path,message:`expected yorkie.Tree at path ${e.path}`}]};break;case"yorkie.Counter":if(!(t instanceof on))return{valid:!1,errors:[{path:e.path,message:`expected yorkie.Counter at path ${e.path}`}]};break;default:throw new Error(`Unknown rule type: ${e.type}`)}return{valid:!0}}function FR(t){switch(t){case"null":return it.Null;case"boolean":return it.Boolean;case"integer":return it.Integer;case"long":return it.Long;case"double":return it.Double;case"string":return it.String;case"bytes":return it.Bytes;case"date":return it.Date;default:throw new Error(`Unknown primitive type: ${t}`)}}function JR(t,e){return t instanceof dt&&t.getType()===FR(e.type)?{valid:!0}:{valid:!1,errors:[{path:e.path,message:`expected ${e.type} at path ${e.path}`}]}}const jR="yorkie-devtools-panel",$R="yorkie-devtools-sdk";function PR(t){return[Dt.StatusChanged,Dt.Snapshot,Dt.LocalChange,Dt.RemoteChange,Dt.Initialized,Dt.Watched,Dt.Unwatched,Dt.PresenceChanged].includes(t.type)}function QR(t){return t.every(PR)}let Es="disconnected";const fS=new Map,_c=new Map;typeof window<"u"&&(window.docEventsForReplayByDocKey=_c);function bc(t,e){(e?.force||Es!=="disconnected")&&window.postMessage({source:$R,...t},"*")}function qR(t){if(!t.isEnableDevtools()||typeof window>"u"||fS.has(t.getKey()))return;_c.set(t.getKey(),[]);const e=t.subscribe("all",n=>{QR(n)&&(_c.get(t.getKey()).push(n),Es==="synced"&&bc({msg:"doc::sync::partial",docKey:t.getKey(),event:n}))});fS.set(t.getKey(),[e]),bc({msg:"refresh-devtools"},{force:!0}),window.addEventListener("message",n=>{if(n.data?.source!==jR)return;switch(n.data.msg){case"devtools::connect":if(Es!=="disconnected")break;Es="connected",bc({msg:"doc::available",docKey:t.getKey()}),pe.info(`[YD] Devtools connected. Doc: ${t.getKey()}`);break;case"devtools::disconnect":Es="disconnected",pe.info(`[YD] Devtools disconnected. Doc: ${t.getKey()}`);break;case"devtools::subscribe":Es="synced",bc({msg:"doc::sync::full",docKey:t.getKey(),events:_c.get(t.getKey())}),pe.info(`[YD] Devtools subscribed. Doc: ${t.getKey()}`);break}})}var Ri=(t=>(t.Detached="detached",t.Attached="attached",t.Removed="removed",t))(Ri||{}),Dt=(t=>(t.StatusChanged="status-changed",t.ConnectionChanged="connection-changed",t.SyncStatusChanged="sync-status-changed",t.Snapshot="snapshot",t.LocalChange="local-change",t.RemoteChange="remote-change",t.Initialized="initialized",t.Watched="watched",t.Unwatched="unwatched",t.PresenceChanged="presence-changed",t.AuthError="auth-error",t))(Dt||{}),ol=(t=>(t.Connected="connected",t.Disconnected="disconnected",t))(ol||{}),Og=(t=>(t.Synced="synced",t.SyncFailed="sync-failed",t))(Og||{});class _i{key;status;opts;maxSizeLimit;schemaRules;changeID;checkpoint;localChanges;root;presences;clone;internalHistory;isUpdating;onlineClients;eventStream;eventStreamObserver;history;constructor(e,n){this.key=e,this.status="detached",this.opts=n||{},this.maxSizeLimit=0,this.schemaRules=[],this.changeID=KI,this.checkpoint=HI,this.localChanges=[],this.root=Sl.create(),this.presences=new Map,this.onlineClients=new Set,this.internalHistory=new XR,this.isUpdating=!1,this.eventStream=QE(a=>this.eventStreamObserver=a),this.history={canUndo:()=>this.internalHistory.hasUndo()&&!this.isUpdating,canRedo:()=>this.internalHistory.hasRedo()&&!this.isUpdating,undo:()=>this.executeUndoRedo(!0),redo:()=>this.executeUndoRedo(!1)},qR(this)}update(e,n){if(this.getStatus()==="removed")throw new G(U.ErrDocumentRemoved,`${this.key} is removed`);this.ensureClone();const a=this.changeID.getActorID(),o=al.create(this.changeID,this.clone.root,this.clone.presences.get(a)||{},n);try{const d=lS(o,this.clone.root.getObject());this.presences.has(a)||this.clone.presences.set(a,{}),this.isUpdating=!0,e(d,new uS(o,this.clone.presences.get(a)))}catch(d){throw this.clone=void 0,d}finally{this.isUpdating=!1}const l=this.getSchemaRules();if(!o.isPresenceOnlyChange()&&l.length){const d=WR(this.clone?.root.getObject(),l);if(!d.valid)throw this.clone=void 0,new G(U.ErrDocumentSchemaValidationFailed,`schema validation failed: ${d.errors?.map(m=>m.message).join(", ")}`)}const c=zI(this.clone?.root.getDocSize());if(!o.isPresenceOnlyChange()&&this.maxSizeLimit>0&&this.maxSizeLimit<c)throw this.clone=void 0,new G(U.ErrDocumentSizeExceedsLimit,`document size exceeded: ${c} > ${this.maxSizeLimit}`);if(o.hasChange()){pe.isEnabled(nn.Trivial)&&pe.trivial(`trying to update a local change: ${this.toJSON()}`);const d=o.toChange(),{opInfos:m,reverseOps:h}=d.execute(this.root,this.presences,ut.Local);for(const v of d.getOperations())v instanceof Hr&&this.internalHistory.reconcileCreatedAt(v.getCreatedAt(),v.getValue().getCreatedAt());const p=o.getReversePresence();p&&h.push({type:"presence",value:p}),this.localChanges.push(d),h.length&&this.internalHistory.pushUndo(h),m.length&&this.internalHistory.clearRedo(),this.changeID=o.getNextID();const y=[];m.length&&y.push({type:"local-change",source:ut.Local,value:{message:d.getMessage()||"",operations:m,actor:a,clientSeq:d.getID().getClientSeq(),serverSeq:d.getID().getServerSeq()},rawChange:this.isEnableDevtools()?d.toStruct():void 0}),d.hasPresenceChange()&&y.push({type:"presence-changed",source:ut.Local,value:{clientID:a,presence:this.getPresence(a)}}),this.publish(y),pe.isEnabled(nn.Trivial)&&pe.trivial(`after update a local change: ${this.toJSON()}`)}}subscribe(e,n,a,o){if(typeof e=="string"){if(typeof n!="function")throw new G(U.ErrInvalidArgument,"Second argument must be a callback function");if(e==="presence"){const d=n;return this.eventStream.subscribe(m=>{for(const h of m)h.type!=="initialized"&&h.type!=="watched"&&h.type!=="unwatched"&&h.type!=="presence-changed"||d(h)},a,o)}if(e==="my-presence"){const d=n;return this.eventStream.subscribe(m=>{for(const h of m)h.type!=="initialized"&&h.type!=="presence-changed"||h.type==="presence-changed"&&h.value.clientID!==this.changeID.getActorID()||d(h)},a,o)}if(e==="others"){const d=n;return this.eventStream.subscribe(m=>{for(const h of m)h.type!=="watched"&&h.type!=="unwatched"&&h.type!=="presence-changed"||h.value.clientID!==this.changeID.getActorID()&&d(h)},a,o)}if(e==="connection"){const d=n;return this.eventStream.subscribe(m=>{for(const h of m)h.type==="connection-changed"&&d(h)},a,o)}if(e==="status"){const d=n;return this.eventStream.subscribe(m=>{for(const h of m)h.type==="status-changed"&&d(h)},a,o)}if(e==="sync"){const d=n;return this.eventStream.subscribe(m=>{for(const h of m)h.type==="sync-status-changed"&&d(h)},a,o)}if(e==="auth-error"){const d=n;return this.eventStream.subscribe(m=>{for(const h of m)h.type==="auth-error"&&d(h)},a)}if(e==="all"){const d=n;return this.eventStream.subscribe(d,a,o)}const l=e,c=n;return this.eventStream.subscribe(d=>{for(const m of d){if(m.type!=="local-change"&&m.type!=="remote-change")continue;const h=[];for(const p of m.value.operations)this.isSameElementOrChildOf(p.path,l)&&h.push(p);h.length&&c({...m,value:{...m.value,operations:h}})}},a,o)}if(typeof e=="function"){const l=e,c=n,d=a;return this.eventStream.subscribe(m=>{for(const h of m)h.type!=="snapshot"&&h.type!=="local-change"&&h.type!=="remote-change"||l(h)},c,d)}throw new G(U.ErrInvalidArgument,`"${e}" is not a valid`)}publish(e){this.eventStreamObserver&&this.eventStreamObserver.next(e)}applyChangePack(e){e.hasSnapshot()?this.applySnapshot(e.getCheckpoint().getServerSeq(),e.getVersionVector(),e.getSnapshot(),e.getCheckpoint().getClientSeq()):(this.applyChanges(e.getChanges(),ut.Remote),this.removePushedLocalChanges(e.getCheckpoint().getClientSeq())),this.checkpoint=this.checkpoint.forward(e.getCheckpoint()),e.hasSnapshot()||this.garbageCollect(e.getVersionVector()),e.getIsRemoved()&&this.applyStatus("removed"),pe.isEnabled(nn.Trivial)&&pe.trivial(`${this.root.toJSON()}`)}getCheckpoint(){return this.checkpoint}getChangeID(){return this.changeID}hasLocalChanges(){return this.localChanges.length>0}ensureClone(){this.clone||(this.clone={root:this.root.deepcopy(),presences:kn(this.presences)})}createChangePack(){const e=Array.from(this.localChanges),n=this.checkpoint.increaseClientSeq(e.length);return df.create(this.key,n,!1,e,this.getVersionVector())}setActor(e){for(const n of this.localChanges)n.setActor(e);this.changeID=this.changeID.setActor(e)}isEnableDevtools(){return!!this.opts.enableDevtools}getKey(){return this.key}getStatus(){return this.status}getClone(){return this.clone}getCloneRoot(){if(this.clone)return this.clone.root.getObject()}getRoot(){this.ensureClone();const e=al.create(this.changeID.next(),this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});return lS(e,this.clone.root.getObject())}getDocSize(){return this.root.getDocSize()}getMaxSizePerDocument(){return this.maxSizeLimit}setMaxSizePerDocument(e){this.maxSizeLimit=e}getSchemaRules(){return this.schemaRules}setSchemaRules(e){this.schemaRules=e}garbageCollect(e){return this.opts.disableGC?0:(this.clone&&this.clone.root.garbageCollect(e),this.root.garbageCollect(e))}getRootObject(){return this.root.getObject()}getGarbageLen(){return this.root.getGarbageLen()}getRootCRDT(){return this.root}getGarbageLenFromClone(){return this.clone.root.getGarbageLen()}toJSON(){return this.root.toJSON()}toSortedJSON(){return this.root.toSortedJSON()}getStats(){return this.root.getStats()}toJSForTest(){return{...this.getRoot().toJSForTest(),key:"root"}}applySnapshot(e,n,a,o=-1){const{root:l,presences:c}=ot.bytesToSnapshot(a);this.root=new Sl(l),this.presences=c,this.changeID=this.changeID.setClocks(n.maxLamport(),n),this.clone=void 0,this.removePushedLocalChanges(o),this.applyChanges(this.localChanges,ut.Local),this.clearHistory(),this.publish([{type:"snapshot",source:ut.Remote,value:{serverSeq:e.toString(),snapshot:this.isEnableDevtools()?ot.bytesToHex(a):void 0,snapshotVector:ot.versionVectorToHex(n)}}])}clearHistory(){this.internalHistory.clearRedo(),this.internalHistory.clearUndo()}applyChanges(e,n){pe.isEnabled(nn.Debug)&&pe.debug(`trying to apply ${e.length} remote changes.elements:${this.root.getElementMapSize()}, removeds:${this.root.getGarbageElementSetSize()}`),pe.isEnabled(nn.Trivial)&&pe.trivial(e.map(a=>`${a.getID().toTestString()}	${a.toTestString()}`).join(`
`));for(const a of e)this.applyChange(a,n);pe.isEnabled(nn.Debug)&&pe.debug(`after appling ${e.length} remote changes.elements:${this.root.getElementMapSize()},  removeds:${this.root.getGarbageElementSetSize()}`)}applyChange(e,n){this.ensureClone(),e.execute(this.clone.root,this.clone.presences,n);const a=[],o=e.getID().getActorID();if(e.hasPresenceChange()&&this.onlineClients.has(o)){const d=e.getPresenceChange();switch(d.type){case dr.Put:a.push(this.presences.has(o)?{type:"presence-changed",source:n,value:{clientID:o,presence:d.presence}}:{type:"watched",source:ut.Remote,value:{clientID:o,presence:d.presence}});break;case dr.Clear:a.push({type:"unwatched",source:ut.Remote,value:{clientID:o,presence:this.getPresence(o)}}),this.removeOnlineClient(o);break}}const{opInfos:l,operations:c}=e.execute(this.root,this.presences,n);for(const d of c)if(d instanceof Yi){const[m,h]=d.normalizePos(this.root);this.internalHistory.reconcileTextEdit(d.getParentCreatedAt(),m,h,d.getContent()?.length??0)}if(this.changeID=this.changeID.syncClocks(e.getID()),l.length){const d=this.isEnableDevtools()?e.toStruct():void 0;a.push(n===ut.Remote?{type:"remote-change",source:n,value:{actor:o,clientSeq:e.getID().getClientSeq(),serverSeq:e.getID().getServerSeq(),message:e.getMessage()||"",operations:l},rawChange:d}:{type:"local-change",source:n,value:{actor:o,clientSeq:e.getID().getClientSeq(),serverSeq:e.getID().getServerSeq(),message:e.getMessage()||"",operations:l},rawChange:d})}a.length&&this.publish(a)}applyWatchStream(e){if(e.body.case==="initialization"){const n=e.body.value.clientIds,a=new Set;for(const o of n)o!==this.changeID.getActorID()&&a.add(o);this.setOnlineClients(a),this.publish([{type:"initialized",source:ut.Local,value:this.getPresences()}]);return}if(e.body.case==="event"){const{type:n,publisher:a}=e.body.value,o=[];if(n===Gc.DOCUMENT_WATCHED){if(this.onlineClients.has(a)&&this.hasPresence(a))return;this.addOnlineClient(a),this.hasPresence(a)&&o.push({type:"watched",source:ut.Remote,value:{clientID:a,presence:this.getPresence(a)}})}else if(n===Gc.DOCUMENT_UNWATCHED){const l=this.getPresence(a);this.removeOnlineClient(a),l&&o.push({type:"unwatched",source:ut.Remote,value:{clientID:a,presence:l}})}o.length&&this.publish(o)}}applyStatus(e){this.status=e,e==="detached"&&this.setActor(Sm),this.publish([{source:e==="removed"?ut.Remote:ut.Local,type:"status-changed",value:e==="attached"?{status:e,actorID:this.changeID.getActorID()}:{status:e}}])}applyDocEventsForReplay(e){for(const n of e){if(n.type==="status-changed"){this.applyStatus(n.value.status),n.value.status==="attached"&&this.setActor(n.value.actorID);continue}if(n.type==="snapshot"){const{snapshot:a,serverSeq:o,snapshotVector:l}=n.value;if(!a)continue;this.applySnapshot(BigInt(o),ot.hexToVersionVector(l),ot.hexToBytes(a));continue}if(n.type==="local-change"||n.type==="remote-change"){if(!n.rawChange)continue;const a=Gs.fromStruct(n.rawChange);this.applyChange(a,n.source)}if(n.type==="initialized"){const a=new Set;for(const{clientID:o,presence:l}of n.value)a.add(o),this.presences.set(o,l);this.setOnlineClients(a)}else if(n.type==="watched"){const{clientID:a,presence:o}=n.value;this.addOnlineClient(a),this.presences.set(a,o)}else if(n.type==="unwatched"){const{clientID:a}=n.value;this.removeOnlineClient(a),this.presences.delete(a)}else if(n.type==="presence-changed"){const{clientID:a,presence:o}=n.value;this.presences.set(a,o)}}}getValueByPath(e){if(!e.startsWith("$"))throw new G(U.ErrInvalidArgument,'path must start with "$"');const n=e.split(".");n.shift();let a=this.getRoot();for(const o of n)if(a=a[o],!a)return;return a}setOnlineClients(e){this.onlineClients=e}resetOnlineClients(){this.onlineClients=new Set}addOnlineClient(e){this.onlineClients.add(e)}removeOnlineClient(e){this.onlineClients.delete(e)}hasPresence(e){return this.presences.has(e)}getMyPresence(){if(this.status!=="attached")return{};const e=this.presences.get(this.changeID.getActorID());return e?kn(e):{}}getOthersPresences(){const e=[],n=this.changeID.getActorID();for(const a of this.onlineClients)a!==n&&this.presences.has(a)&&e.push({clientID:a,presence:kn(this.presences.get(a))});return e}getPresence(e){if(e===this.changeID.getActorID())return this.getMyPresence();if(!this.onlineClients.has(e))return;const n=this.presences.get(e);return n?kn(n):void 0}getPresences(){const e=[];e.push({clientID:this.changeID.getActorID(),presence:kn(this.getMyPresence())});for(const n of this.onlineClients)this.presences.has(n)&&e.push({clientID:n,presence:kn(this.presences.get(n))});return e}getPresenceForTest(e){const n=this.presences.get(e);return n?kn(n):void 0}getSelfForTest(){return{clientID:this.getChangeID().getActorID(),presence:this.getMyPresence()}}getOthersForTest(){const e=this.getChangeID().getActorID();return this.getPresences().filter(n=>n.clientID!==e).sort((n,a)=>n.clientID>a.clientID?1:-1)}getUndoStackForTest(){return this.internalHistory.getUndoStackForTest()}getRedoStackForTest(){return this.internalHistory.getRedoStackForTest()}getVersionVector(){return this.changeID.getVersionVector()}isSameElementOrChildOf(e,n){if(n===e)return!0;const a=e.split(".");return n.split(".").every((o,l)=>o===a[l])}removePushedLocalChanges(e){for(;this.localChanges.length&&!(this.localChanges[0].getID().getClientSeq()>e);)this.localChanges.shift()}executeUndoRedo(e){if(this.isUpdating)throw new G(U.ErrRefused,`${e?"Undo":"Redo"} is not allowed during an update`);const n=e?this.internalHistory.popUndo():this.internalHistory.popRedo();if(!n)throw new G(U.ErrRefused,`There is no operation to be ${e?"undone":"redone"}`);this.ensureClone();const a=al.create(this.changeID,this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});for(const p of n){if(!(p instanceof Qn)){new uS(a,kn(this.clone.presences.get(this.changeID.getActorID()))).set(p.value,{addToHistory:!0});continue}const y=a.issueTimeTicket();if(p.setExecutedAt(y),p instanceof Hr){const v=p.getCreatedAt();p.getValue().setCreatedAt(y),this.internalHistory.reconcileCreatedAt(v,y)}else if(p instanceof Zi){const v=p.getValue().getCreatedAt();p.getValue().setCreatedAt(y),this.internalHistory.reconcileCreatedAt(v,y)}a.push(p)}const o=a.toChange();o.execute(this.clone.root,this.clone.presences,ut.UndoRedo);const{opInfos:l,reverseOps:c}=o.execute(this.root,this.presences,ut.UndoRedo),d=a.getReversePresence();if(d&&c.push({type:"presence",value:d}),c.length&&(e?this.internalHistory.pushRedo(c):this.internalHistory.pushUndo(c)),!o.hasPresenceChange()&&!l.length)return;this.localChanges.push(o),this.changeID=a.getNextID();const m=this.changeID.getActorID(),h=[];l.length&&h.push({type:"local-change",source:ut.UndoRedo,value:{message:o.getMessage()||"",operations:l,actor:m,clientSeq:o.getID().getClientSeq(),serverSeq:o.getID().getServerSeq()},rawChange:this.isEnableDevtools()?o.toStruct():void 0}),o.hasPresenceChange()&&h.push({type:"presence-changed",source:ut.UndoRedo,value:{clientID:m,presence:this.getPresence(m)}}),this.publish(h)}}class dS{resource;resourceID;syncMode;changeEventReceived;lastHeartbeatTime;reconnectStreamDelay;cancelled;watchStream;watchLoopTimerID;watchAbortController;constructor(e,n,a,o){this.reconnectStreamDelay=e,this.resource=n,this.resourceID=a,this.syncMode=o,this.changeEventReceived=o!==void 0?!1:void 0,this.lastHeartbeatTime=Date.now(),this.cancelled=!1}changeSyncMode(e){this.syncMode=e}needRealtimeSync(){return this.syncMode===qo.RealtimeSyncOff?!1:this.syncMode===qo.RealtimePushOnly?this.resource.hasLocalChanges():this.syncMode!==qo.Manual&&(this.resource.hasLocalChanges()||(this.changeEventReceived??!1))}needSync(e){return this.resource instanceof _i?this.needRealtimeSync():this.syncMode===qo.Manual?!1:Date.now()-this.lastHeartbeatTime>=e}updateHeartbeatTime(){this.lastHeartbeatTime=Date.now()}async runWatchLoop(e){const n=async()=>{if(this.watchStream)return Promise.resolve();this.watchLoopTimerID&&(clearTimeout(this.watchLoopTimerID),this.watchLoopTimerID=void 0);try{[this.watchStream,this.watchAbortController]=await e(()=>{this.watchStream=void 0,this.watchAbortController=void 0,this.cancelled||(this.watchLoopTimerID=setTimeout(n,this.reconnectStreamDelay))})}catch{}};await n()}cancelWatchStream(){this.cancelled=!0,this.watchStream&&this.watchAbortController&&(this.watchAbortController.abort(),this.watchStream=void 0,this.watchAbortController=void 0),clearTimeout(this.watchLoopTimerID),this.watchLoopTimerID=void 0}}function e3(t,e){let n=e;return{authInterceptor:l=>async c=>(t&&c.header.set("x-api-key",t),n&&c.header.set("authorization",n),await l(c)),setToken:l=>{n=l}}}const t3="@yorkie-js/sdk",n3="0.6.47",hS={name:t3,version:n3};function r3(t){return e=>async n=>(t?n.header.set("x-yorkie-user-agent",t):n.header.set("x-yorkie-user-agent",hS.name+"/"+hS.version),await e(n))}const i3=t=>{try{if(JSON.stringify(t)===void 0)return!1}catch{return!1}return!0};var Qo=(t=>(t.Detached="detached",t.Attached="attached",t.Removed="removed",t))(Qo||{}),Ns=(t=>(t.PresenceChanged="presence-changed",t.Initialized="initialized",t.Broadcast="broadcast",t.LocalBroadcast="local-broadcast",t.AuthError="auth-error",t))(Ns||{});const Jo=".";class Di{key;status;actorID;sessionID;sessionCount;seq;eventStream;eventStreamObserver;constructor(e){this.validateChannelKey(e),this.key=e,this.status="detached",this.sessionCount=0,this.seq=0,this.eventStream=QE(n=>this.eventStreamObserver=n)}getKey(){return this.key}getFirstKeyPath(){return this.key.split(Jo)[0]}getStatus(){return this.status}applyStatus(e){this.status=e}isAttached(){return this.status==="attached"}getActorID(){return this.actorID}setActor(e){this.actorID=e}getSessionID(){return this.sessionID}setSessionID(e){this.sessionID=e}getSessionCount(){return this.sessionCount}updateSessionCount(e,n){return n===0||n>this.seq?(this.sessionCount=e,this.seq=n,!0):!1}hasLocalChanges(){return!1}subscribe(e,n){if(typeof e=="function")return this.eventStream.subscribe(e);const a=e,o=n;if(!o)throw new Error("callback is required when subscribing to specific event type or topic");if(a==="broadcast")return this.eventStream.subscribe(c=>{c.type==="broadcast"&&o(c)});if(a==="local-broadcast")return this.eventStream.subscribe(c=>{c.type==="local-broadcast"&&o(c)});if(a==="auth-error")return this.eventStream.subscribe(c=>{c.type==="auth-error"&&o(c)});if(a==="presence")return this.eventStream.subscribe(c=>{(c.type==="presence-changed"||c.type==="initialized")&&o(c)});if(a==="all")return this.eventStream.subscribe(o);const l=a;return this.eventStream.subscribe(c=>{c.type==="broadcast"&&c.topic===l&&o(c)})}publish(e){this.eventStreamObserver&&this.eventStreamObserver.next(e)}broadcast(e,n,a){if(this.status!=="attached")throw new Error(`channel is not attached: ${this.status}`);if(!this.actorID)throw new Error("actorID is not set");this.publish({type:"local-broadcast",clientID:this.actorID,topic:e,payload:n,options:a})}validateChannelKey(e){if(e==="")throw new Error("channel key must not be empty");if(e.includes(" "))throw new Error("channel key must not contain a whitespace");if(e.startsWith(Jo))throw new Error("channel key must not start with a period");if(e.endsWith(Jo))throw new Error("channel key must not end with a period");if(e.includes(`${Jo}${Jo}`))throw new Error("channel key path must not empty")}}var qo=(t=>(t.Manual="manual",t.Realtime="realtime",t.RealtimePushOnly="realtime-pushonly",t.RealtimeSyncOff="realtime-syncoff",t))(qo||{});const bs={rpcAddr:"https://api.yorkie.dev",syncLoopDuration:50,retrySyncLoopDelay:1e3,reconnectStreamDelay:1e3,channelHeartbeatInterval:3e4},sg={maxRetries:1/0,initialRetryInterval:1e3,maxBackoff:2e4};class t1{id;key;metadata;status;attachmentMap;apiKey;authTokenInjector;conditions;syncLoopDuration;reconnectStreamDelay;retrySyncLoopDelay;channelHeartbeatInterval;rpcClient;setAuthToken;taskQueue;processing=!1;keepalive=!1;constructor(e){e=e||bs;const n=e.rpcAddr||bs.rpcAddr;this.key=e.key||PE(),this.metadata=e.metadata||{},this.status="deactivated",this.attachmentMap=new Map,this.apiKey=e.apiKey||"",this.authTokenInjector=e.authTokenInjector,this.conditions={SyncLoop:!1,WatchLoop:!1},this.syncLoopDuration=e.syncLoopDuration??bs.syncLoopDuration,this.reconnectStreamDelay=e.reconnectStreamDelay??bs.reconnectStreamDelay,this.retrySyncLoopDelay=e.retrySyncLoopDelay??bs.retrySyncLoopDelay,this.channelHeartbeatInterval=e.channelHeartbeatInterval??bs.channelHeartbeatInterval;const{authInterceptor:a,setToken:o}=e3(this.apiKey);this.setAuthToken=o,this.rpcClient=TC(DI,PC({baseUrl:n,interceptors:[a,r3(e?.userAgent)],fetch:(l,c)=>fetch(l,{...c,keepalive:this.keepalive})})),this.taskQueue=[]}async activate(){if(this.isActive())return Promise.resolve();if(this.authTokenInjector){const e=await this.authTokenInjector();this.setAuthToken(e)}return this.enqueueTask(async()=>{try{const e=await this.rpcClient.activateClient({clientKey:this.key,metadata:this.metadata},{headers:{"x-shard-key":`${this.apiKey}/${this.key}`}});this.id=e.clientId,this.status="activated",this.runSyncLoop(),pe.info(`[AC] c:"${this.getKey()}" activated, id:"${this.id}"`),typeof window<"u"&&window.addEventListener("beforeunload",async()=>{await this.deactivate({keepalive:!0})})}catch(e){throw pe.error(`[AC] c:"${this.getKey()}" err :`,e),await this.handleConnectError(e),e}})}deactivate(e={keepalive:!1,synchronous:!1}){if(this.status==="deactivated")return Promise.resolve();const n=async()=>{try{await this.rpcClient.deactivateClient({clientId:this.id,synchronous:e.synchronous},{headers:{"x-shard-key":`${this.apiKey}/${this.key}`}}),this.deactivateInternal(),pe.info(`[DC] c"${this.getKey()}" deactivated`)}catch(a){throw pe.error(`[DC] c:"${this.getKey()}" err :`,a),await this.handleConnectError(a),a}};if(e.keepalive){this.keepalive=!0;const a=n();return this.keepalive=!1,a}return this.enqueueTask(n)}has(e){return this.attachmentMap.has(e)}attach(e,n){return e instanceof Di?this.attachChannel(e,n):this.attachDocument(e,n)}attachDocument(e,n={}){if(!this.isActive())throw new G(U.ErrClientNotActivated,`${this.key} is not active`);if(e.getStatus()!==Ri.Detached)throw new G(U.ErrNotDetached,`${e.getKey()} is not detached`);e.setActor(this.id),e.update((o,l)=>l.set(n.initialPresence||{}));const a=n.syncMode??"realtime";return this.enqueueTask(async()=>{try{const o=await this.rpcClient.attachDocument({clientId:this.id,changePack:ot.toChangePack(e.createChangePack()),schemaKey:n.schema},{headers:{"x-shard-key":`${this.apiKey}/${e.getKey()}`}});(o.maxSizePerDocument??0)>0&&e.setMaxSizePerDocument(o.maxSizePerDocument),o.schemaRules.length>0&&e.setSchemaRules(ot.fromSchemaRules(o.schemaRules));const c=ot.fromChangePack(o.changePack);if(e.applyChangePack(c),e.getStatus()===Ri.Removed)return e;e.applyStatus(Ri.Attached),this.attachmentMap.set(e.getKey(),new dS(this.reconnectStreamDelay,e,o.documentId,a)),a!=="manual"&&await this.runWatchLoop(e.getKey()),pe.info(`[AD] c:"${this.getKey()}" attaches d:"${e.getKey()}"`);const d=e.getRootObject();if(n.initialRoot){const m=n.initialRoot;e.update(h=>{for(const[p,y]of Object.entries(m))if(!d.has(p)){const v=p;h[v]=y}})}return e}catch(o){throw pe.error(`[AD] c:"${this.getKey()}" err :`,o),await this.handleConnectError(o),o}})}detach(e,n){return e instanceof Di?this.detachChannel(e):this.detachDocument(e,n)}detachDocument(e,n={keepalive:!1}){if(!this.isActive())throw new G(U.ErrClientNotActivated,`${this.key} is not active`);const a=this.attachmentMap.get(e.getKey());if(!a)throw new G(U.ErrNotAttached,`${e.getKey()} is not attached`);e.update((l,c)=>c.clear());const o=async()=>{try{const l=await this.rpcClient.detachDocument({clientId:this.id,documentId:a.resourceID,changePack:ot.toChangePack(e.createChangePack())},{headers:{"x-shard-key":`${this.apiKey}/${e.getKey()}`}}),c=ot.fromChangePack(l.changePack);return e.applyChangePack(c),e.getStatus()!==Ri.Removed&&e.applyStatus(Ri.Detached),this.detachInternal(e.getKey()),pe.info(`[DD] c:"${this.getKey()}" detaches d:"${e.getKey()}"`),e}catch(l){throw pe.error(`[DD] c:"${this.getKey()}" err :`,l),await this.handleConnectError(l),l}};if(n.keepalive){this.keepalive=!0;const l=o();return this.keepalive=!1,l}return this.enqueueTask(o)}async attachChannel(e,n={}){if(!this.isActive())throw new G(U.ErrClientNotActivated,`${this.key} is not active`);if(e.getStatus()!==Qo.Detached)throw new G(U.ErrNotDetached,`${e.getKey()} is not detached`);e.setActor(this.id);const a=async()=>{try{const o=await this.rpcClient.attachChannel({clientId:this.id,channelKey:e.getKey()},{headers:{"x-shard-key":`${this.apiKey}/${e.getFirstKeyPath()}`}});e.setSessionID(o.sessionId),e.updateSessionCount(Number(o.sessionCount),0),e.applyStatus(Qo.Attached);const l=n.isRealtime!==!1?"realtime":"manual",c=new dS(this.reconnectStreamDelay,e,o.sessionId,l);return e.subscribe("local-broadcast",d=>{const{topic:m,payload:h,options:p}=d;this.broadcast(e.getKey(),m,h,p).catch(y=>{p?.error&&p.error(y),pe.error(`[BC] c:"${this.getKey()}" failed: ${y}`)})}),this.attachmentMap.set(e.getKey(),c),l==="realtime"&&await this.runWatchLoop(e.getKey()),pe.info(`[AP] c:"${this.getKey()}" attaches p:"${e.getKey()}" mode:${l} count:${e.getSessionCount()}`),e}catch(o){throw pe.error(`[AP] c:"${this.getKey()}" err :`,o),await this.handleConnectError(o),o}};return this.enqueueTask(a)}async detachChannel(e){if(!this.isActive())throw new G(U.ErrClientNotActivated,`${this.key} is not active`);if(!this.attachmentMap.has(e.getKey()))throw new G(U.ErrNotAttached,`${e.getKey()} is not attached`);const n=async()=>{try{const a=await this.rpcClient.detachChannel({clientId:this.id,channelKey:e.getKey(),sessionId:e.getSessionID()},{headers:{"x-shard-key":`${this.apiKey}/${e.getFirstKeyPath()}`}});return e.updateSessionCount(Number(a.sessionCount),0),e.applyStatus(Qo.Detached),this.detachInternal(e.getKey()),pe.info(`[DP] c:"${this.getKey()}" detaches p:"${e.getKey()}" count:${e.getSessionCount()}`),e}catch(a){throw pe.error(`[DP] c:"${this.getKey()}" err :`,a),await this.handleConnectError(a),a}};return this.enqueueTask(n)}async changeSyncMode(e,n){if(!this.isActive())throw new G(U.ErrClientNotActivated,`${this.key} is not active`);const a=this.attachmentMap.get(e.getKey());if(!a)throw new G(U.ErrNotAttached,`${e.getKey()} is not attached`);const o=a.syncMode;return o===n?e:(a.changeSyncMode(n),n==="manual"?(a.cancelWatchStream(),e):(n==="realtime"&&(a.changeEventReceived=!0),o==="manual"&&await this.runWatchLoop(e.getKey()),e))}sync(e){if(!this.isActive())throw new G(U.ErrClientNotActivated,`${this.key} is not active`);if(e instanceof Di){const n=this.attachmentMap.get(e.getKey());if(!n)throw new G(U.ErrNotAttached,`${e.getKey()} is not attached`);return this.enqueueTask(async()=>this.syncInternal(n).catch(async a=>{throw pe.error(`[SY] c:"${this.getKey()}" err :`,a),await this.handleConnectError(a),a}))}if(e instanceof _i){const n=this.attachmentMap.get(e.getKey());if(!n)throw new G(U.ErrNotAttached,`${e.getKey()} is not attached`);return this.enqueueTask(async()=>this.syncInternal(n,"realtime").catch(async a=>{throw pe.error(`[SY] c:"${this.getKey()}" err :`,a),await this.handleConnectError(a),a}))}return this.enqueueTask(async()=>{const n=[];for(const[,a]of this.attachmentMap)a.syncMode!==void 0&&a.resource instanceof _i&&n.push(this.syncInternal(a,a.syncMode));return Promise.all(n).catch(async a=>{throw pe.error(`[SY] c:"${this.getKey()}" err :`,a),await this.handleConnectError(a),a})})}remove(e){if(!this.isActive())throw new G(U.ErrClientNotActivated,`${this.key} is not active`);const n=this.attachmentMap.get(e.getKey());if(!n)throw new G(U.ErrNotAttached,`${e.getKey()} is not attached`);e.setActor(this.id);const a=ot.toChangePack(e.createChangePack());return a.isRemoved=!0,this.enqueueTask(async()=>{try{const o=await this.rpcClient.removeDocument({clientId:this.id,documentId:n.resourceID,changePack:a},{headers:{"x-shard-key":`${this.apiKey}/${e.getKey()}`}}),l=ot.fromChangePack(o.changePack);e.applyChangePack(l),this.detachInternal(e.getKey()),pe.info(`[RD] c:"${this.getKey()}" removes d:"${e.getKey()}"`)}catch(o){throw pe.error(`[RD] c:"${this.getKey()}" err :`,o),await this.handleConnectError(o),o}})}getID(){return this.id}getKey(){return this.key}isActive(){return this.status==="activated"}getStatus(){return this.status}getCondition(e){return this.conditions[e]}async createRevision(e,n,a){if(!this.isActive())throw new G(U.ErrClientNotActivated,`${this.key} is not active`);const o=this.attachmentMap.get(e.getKey());if(!o)throw new G(U.ErrNotAttached,`${e.getKey()} is not attached`);const l=async()=>{try{const c=await this.rpcClient.createRevision({clientId:this.id,documentId:o.resourceID,label:n,description:a||""},{headers:{"x-shard-key":`${this.apiKey}/${e.getKey()}`}});if(!c.revision)throw new G(U.ErrInvalidArgument,"revision is not returned");return pe.info(`[CR] c:"${this.getKey()}" creates revision d:"${e.getKey()}" l:"${n}"`),ot.toRevisionSummary(c.revision)}catch(c){throw pe.error(`[CR] c:"${this.getKey()}" err :`,c),await this.handleConnectError(c),c}};return this.enqueueTask(l)}async listRevisions(e,n){if(!this.isActive())throw new G(U.ErrClientNotActivated,`${this.key} is not active`);const a=this.attachmentMap.get(e.getKey());if(!a)throw new G(U.ErrNotAttached,`${e.getKey()} is not attached`);const o=async()=>{try{const l=await this.rpcClient.listRevisions({clientId:this.id,documentId:a.resourceID,pageSize:n?.pageSize||10,offset:n?.offset||0,isForward:n?.isForward??!1},{headers:{"x-shard-key":`${this.apiKey}/${e.getKey()}`}});return pe.info(`[LR] c:"${this.getKey()}" lists revisions d:"${e.getKey()}" count:${l.revisions.length}`),l.revisions.map(ot.toRevisionSummary)}catch(l){throw pe.error(`[LR] c:"${this.getKey()}" err :`,l),await this.handleConnectError(l),l}};return this.enqueueTask(o)}async getRevision(e,n){if(!this.isActive())throw new G(U.ErrClientNotActivated,`${this.key} is not active`);const a=this.attachmentMap.get(e.getKey());if(!a)throw new G(U.ErrNotAttached,`${e.getKey()} is not attached`);const o=async()=>{try{const l=await this.rpcClient.getRevision({clientId:this.id,documentId:a.resourceID,revisionId:n},{headers:{"x-shard-key":`${this.apiKey}/${e.getKey()}`}});if(!l.revision)throw new G(U.ErrInvalidArgument,"revision is not returned");return pe.info(`[GR] c:"${this.getKey()}" gets revision d:"${e.getKey()}" r:"${n}"`),ot.toRevisionSummary(l.revision)}catch(l){throw pe.error(`[GR] c:"${this.getKey()}" err :`,l),await this.handleConnectError(l),l}};return this.enqueueTask(o)}async restoreRevision(e,n){if(!this.isActive())throw new G(U.ErrClientNotActivated,`${this.key} is not active`);const a=this.attachmentMap.get(e.getKey());if(!a)throw new G(U.ErrNotAttached,`${e.getKey()} is not attached`);const o=async()=>{try{await this.rpcClient.restoreRevision({clientId:this.id,documentId:a.resourceID,revisionId:n},{headers:{"x-shard-key":`${this.apiKey}/${e.getKey()}`}}),pe.info(`[RR] c:"${this.getKey()}" restores revision d:"${e.getKey()}" r:"${n}"`)}catch(l){throw pe.error(`[RR] c:"${this.getKey()}" err :`,l),await this.handleConnectError(l),l}};return this.enqueueTask(o)}async broadcast(e,n,a,o){if(!this.isActive())throw new G(U.ErrClientNotActivated,`${this.key} is not active`);const l=this.attachmentMap.get(e);if(!l)throw new G(U.ErrNotAttached,`${e} is not attached`);if(!i3(a))throw new G(U.ErrInvalidArgument,"payload is not serializable");const c=l.resource,d=o?.maxRetries??sg.maxRetries,m=sg.maxBackoff;let h=0;const p=v=>Math.min(sg.initialRetryInterval*2**v,m),y=async()=>this.enqueueTask(async()=>{try{await this.rpcClient.broadcast({clientId:this.id,channelKey:e,topic:n,payload:new TextEncoder().encode(JSON.stringify(a))},{headers:{"x-shard-key":`${this.apiKey}/${c.getFirstKeyPath()}`}}),pe.info(`[BC] c:"${this.getKey()}" broadcasts p:"${e}" t:"${n}"`)}catch(v){if(pe.error(`[BC] c:"${this.getKey()}" err:`,v),await this.handleConnectError(v))if(ig(v,U.ErrUnauthenticated)&&l.resource instanceof Di&&l.resource.publish({type:Ns.AuthError,reason:Po(v).reason||"unauthenticated",method:"Broadcast"}),h<d)h++,setTimeout(()=>y(),p(h-1)),pe.info(`[BC] c:"${this.getKey()}" retry attempt ${h}/${d}`);else throw pe.error(`[BC] c:"${this.getKey()}" exceeded maximum retry attempts`),v}});return y()}runSyncLoop(){const e=async()=>{if(!this.isActive()){pe.debug(`[SL] c:"${this.getKey()}" exit sync loop`),this.conditions.SyncLoop=!1;return}try{await this.enqueueTask(async()=>{const n=[];for(const[,a]of this.attachmentMap)a.needSync(this.channelHeartbeatInterval)&&(a.changeEventReceived!==void 0&&(a.changeEventReceived=!1),n.push(this.syncInternal(a,a.syncMode).catch(o=>{throw ig(o,U.ErrUnauthenticated)&&a.resource.publish([{type:Dt.AuthError,value:{reason:Po(o).reason,method:"PushPull"}}]),o})));await Promise.all(n),setTimeout(e,this.syncLoopDuration)})}catch(n){pe.error(`[SL] c:"${this.getKey()}" sync failed:`,n),await this.handleConnectError(n)?setTimeout(e,this.retrySyncLoopDelay):this.conditions.SyncLoop=!1}};pe.debug(`[SL] c:"${this.getKey()}" run sync loop`),this.conditions.SyncLoop=!0,e()}async runWatchLoop(e){const n=this.attachmentMap.get(e);if(!n)throw new G(U.ErrNotAttached,`${e} is not attached`);return this.conditions.WatchLoop=!0,n.runWatchLoop(a=>{if(!this.isActive())return this.conditions.WatchLoop=!1,Promise.reject(new G(U.ErrClientNotActivated,`${this.key} is not active`));if(!this.attachmentMap.has(e))return this.conditions.WatchLoop=!1,Promise.reject(new G(U.ErrNotAttached,`${e} is not attached`));const o=new AbortController;return n.resource instanceof _i?this.createDocumentWatchStream(n,e,o,a):n.resource instanceof Di?this.createChannelWatchStream(n,e,o,a):Promise.reject(new G(U.ErrClientNotActivated,`Unknown resource type for ${e}`))})}createDocumentWatchStream(e,n,a,o){const l=this.rpcClient.watchDocument({clientId:this.id,documentId:e.resourceID},{headers:{"x-shard-key":`${this.apiKey}/${n}`},signal:a.signal});return e.resource.publish([{type:Dt.ConnectionChanged,value:ol.Connected}]),pe.info(`[WD] c:"${this.getKey()}" watches d:"${n}"`),e.changeEventReceived!==void 0&&(e.changeEventReceived=!0),new Promise((c,d)=>{(async()=>{try{for await(const h of l)this.handleWatchDocumentResponse(e,h),h.body.case==="initialization"&&c([l,a]);e.resource.resetOnlineClients(),e.resource.publish([{type:Dt.Initialized,source:ut.Local,value:e.resource.getPresences()}]),e.resource.publish([{type:Dt.ConnectionChanged,value:ol.Disconnected}]),pe.debug(`[WD] c:"${this.getKey()}" unwatches (stream ended)`),o()}catch(h){e.resource.resetOnlineClients(),e.resource.publish([{type:Dt.Initialized,source:ut.Local,value:e.resource.getPresences()}]),e.resource.publish([{type:Dt.ConnectionChanged,value:ol.Disconnected}]),pe.debug(`[WD] c:"${this.getKey()}" unwatches`),await this.handleConnectError(h)?(ig(h,U.ErrUnauthenticated)&&e.resource.publish([{type:Dt.AuthError,value:{reason:Po(h).reason,method:"WatchDocument"}}]),o()):this.conditions.WatchLoop=!1,d(h)}})()})}createChannelWatchStream(e,n,a,o){const l=this.rpcClient.watchChannel({clientId:this.id,channelKey:n},{headers:{"x-shard-key":`${this.apiKey}/${e.resource.getFirstKeyPath()}`},signal:a.signal});return pe.info(`[WP] c:"${this.getKey()}" watches p:"${n}"`),new Promise((c,d)=>{(async()=>{try{let h=!0;for await(const p of l)this.handleWatchChannelResponse(e,p),h&&(h=!1,c([l,a]));pe.debug(`[WP] c:"${this.getKey()}" p:"${n}" stream ended`),o()}catch(h){if(h instanceof Error&&h.name==="AbortError"){pe.debug(`[WP] c:"${this.getKey()}" p:"${n}" stream aborted`);return}pe.debug(`[WP] c:"${this.getKey()}" p:"${n}" err:`,h),await this.handleConnectError(h)?o():this.conditions.WatchLoop=!1,d(h)}})()})}handleWatchChannelResponse(e,n){const a=e.resource;if(n.body.case==="initialized"){const{sessionCount:o,seq:l}=n.body.value;a.updateSessionCount(Number(o),Number(l))&&a.publish({type:Ns.Initialized,count:Number(o)})}else if(n.body.case==="event"){const o=n.body.value;if(o.type===wE.BROADCAST){const l=new TextDecoder;try{const c=JSON.parse(l.decode(o.payload));a.publish({type:Ns.Broadcast,clientID:o.publisher,topic:o.topic,payload:c})}catch(c){pe.error(`[WP] c:"${this.getKey()}" failed to parse broadcast payload:`,c)}return}a.updateSessionCount(Number(o.sessionCount),Number(o.seq))&&a.publish({type:Ns.PresenceChanged,count:Number(o.sessionCount)})}}handleWatchDocumentResponse(e,n){if(n.body.case==="event"&&n.body.value.type===Gc.DOCUMENT_CHANGED){e.changeEventReceived!==void 0&&(e.changeEventReceived=!0);return}e.resource.applyWatchStream(n)}deactivateInternal(){this.status="deactivated";for(const[e,n]of this.attachmentMap)this.detachInternal(e),n.resource instanceof _i?n.resource.applyStatus(Ri.Detached):n.resource instanceof Di&&n.resource.applyStatus(Qo.Detached)}detachInternal(e){const n=this.attachmentMap.get(e);n&&(n.cancelWatchStream(),n.resource instanceof _i&&n.resource.resetOnlineClients(),this.attachmentMap.delete(e))}async syncInternal(e,n){const{resource:a}=e;if(a instanceof Di){try{const d=await this.rpcClient.refreshChannel({clientId:this.id,channelKey:a.getKey(),sessionId:a.getSessionID()},{headers:{"x-shard-key":`${this.apiKey}/${a.getFirstKeyPath()}`}});a.updateSessionCount(Number(d.sessionCount),0),e.updateHeartbeatTime(),pe.debug(`[RP] c:"${this.getKey()}" refreshes p:"${a.getKey()}" mode:${e.syncMode}`)}catch(d){throw pe.error(`[RP] c:"${this.getKey()}" err :`,d),d}return a}const o=a,{resourceID:l}=e,c=o.createChangePack();try{const d=await this.rpcClient.pushPullChanges({clientId:this.id,documentId:l,changePack:ot.toChangePack(c),pushOnly:n==="realtime-pushonly"},{headers:{"x-shard-key":`${this.apiKey}/${o.getKey()}`}}),m=ot.fromChangePack(d.changePack);if(m.hasChanges()&&(e.syncMode==="realtime-pushonly"||e.syncMode==="realtime-syncoff"))return o;o.applyChangePack(m),e.resource.publish([{type:Dt.SyncStatusChanged,value:Og.Synced}]),o.getStatus()===Ri.Removed&&this.detachInternal(o.getKey());const h=o.getKey(),p=m.getChangeSize();return pe.info(`[PP] c:"${this.getKey()}" sync d:"${h}", push:${c.getChangeSize()} pull:${p} cp:${m.getCheckpoint().toTestString()}`),o}catch(d){throw o.publish([{type:Dt.SyncStatusChanged,value:Og.SyncFailed}]),pe.error(`[PP] c:"${this.getKey()}" err :`,d),d}}async handleConnectError(e){if(!(e instanceof Pe))return!1;if(e.code===Be.Canceled||e.code===Be.Unknown||e.code===Be.ResourceExhausted||e.code===Be.Unavailable)return!0;if(As(e)===U.ErrUnauthenticated){if(this.authTokenInjector){const n=await this.authTokenInjector(Po(e).reason);this.setAuthToken(n)}return!0}return As(e)===U.ErrTooManySubscribers?(pe.error(`[WD] c:"${this.getKey()}" err :`,e.rawMessage),!0):(As(e)===U.ErrTooManyAttachments||(As(e)===U.ErrClientNotActivated||As(e)===U.ErrClientNotFound)&&this.deactivateInternal(),!1)}enqueueTask(e){return new Promise((n,a)=>{this.taskQueue.push(()=>e().then(n).catch(a)),this.processing||this.processNext()})}async processNext(){if(this.taskQueue.length===0){this.processing=!1;return}try{this.processing=!0,await this.taskQueue.shift()()}catch{pe.error(`[TQ] c:"${this.getKey()}" process failed, id:"${this.id}"`)}this.processNext()}}function n1(t){return typeof t=="object"&&t!==null&&t.type==="Text"&&Array.isArray(t.nodes)}function r1(t){return typeof t=="object"&&t!==null&&t.type==="Tree"&&typeof t.root=="object"}function i1(t){return typeof t=="object"&&t!==null&&t.type==="Int"&&typeof t.value=="number"}function a1(t){return typeof t=="object"&&t!==null&&t.type==="Long"&&typeof t.value=="number"}function s1(t){return typeof t=="object"&&t!==null&&t.type==="Date"&&typeof t.value=="string"}function o1(t){return typeof t=="object"&&t!==null&&t.type==="BinData"&&typeof t.value=="string"}function l1(t){return typeof t=="object"&&t!==null&&t.type==="Counter"&&typeof t.value=="object"}function a3(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)&&!n1(t)&&!r1(t)&&!i1(t)&&!a1(t)&&!s1(t)&&!o1(t)&&!l1(t)}function s3(t){try{const e=o3(t),n=JSON.parse(e);return Vc(n)}catch(e){throw new G(U.ErrInvalidArgument,`Failed to parse YSON: ${e instanceof Error?e.message:String(e)}`)}}function o3(t){let e=t;return e=e.replace(/Counter\((Int|Long)\((-?\d+)\)\)/g,(n,a,o)=>`{"__yson_type":"Counter","__yson_data":{"__yson_type":"${a}","__yson_data":${o}}}`),e=e.replace(/Int\((-?\d+)\)/g,(n,a)=>`{"__yson_type":"Int","__yson_data":${a}}`),e=e.replace(/Long\((-?\d+)\)/g,(n,a)=>`{"__yson_type":"Long","__yson_data":${a}}`),e=e.replace(/Date\("([^"]*)"\)/g,(n,a)=>`{"__yson_type":"Date","__yson_data":"${a}"}`),e=e.replace(/BinData\("([^"]*)"\)/g,(n,a)=>`{"__yson_type":"BinData","__yson_data":"${a}"}`),e=e.replace(/Text\((\[(?:[^[\]]|\[(?:[^[\]]|\[[^[\]]*\])*\])*\])\)/g,(n,a)=>`{"__yson_type":"Text","__yson_data":${a}}`),e=e.replace(/Tree\((\{[^{}]*(?:\{[^{}]*(?:\{[^{}]*\})*[^{}]*\})*[^{}]*\})\)/g,(n,a)=>`{"__yson_type":"Tree","__yson_data":${a}}`),e}function Vc(t){if(t===null||typeof t!="object")return t;if(t.__yson_type==="Int"&&typeof t.__yson_data=="number")return{type:"Int",value:t.__yson_data};if(t.__yson_type==="Long"&&typeof t.__yson_data=="number")return{type:"Long",value:t.__yson_data};if(t.__yson_type==="Date"&&typeof t.__yson_data=="string")return{type:"Date",value:t.__yson_data};if(t.__yson_type==="BinData"&&typeof t.__yson_data=="string")return{type:"BinData",value:t.__yson_data};if(t.__yson_type==="Counter"&&typeof t.__yson_data=="object"){const n=Vc(t.__yson_data);if(typeof n=="object"&&n!==null&&"type"in n&&(n.type==="Int"||n.type==="Long"))return{type:"Counter",value:n};throw new G(U.ErrInvalidArgument,"Counter must contain Int or Long")}if(t.__yson_type==="Text"&&Array.isArray(t.__yson_data))return{type:"Text",nodes:t.__yson_data.map(n=>l3(n))};if(t.__yson_type==="Tree"&&typeof t.__yson_data=="object")return{type:"Tree",root:u1(t.__yson_data)};if(Array.isArray(t))return t.map(n=>Vc(n));const e={};for(const[n,a]of Object.entries(t))e[n]=Vc(a);return e}function l3(t){if(typeof t!="object"||t===null||typeof t.val!="string")throw new G(U.ErrInvalidArgument,"invalid text node format");const e={val:t.val};return t.attrs&&typeof t.attrs=="object"&&(e.attrs=t.attrs),e}function u1(t){if(typeof t!="object"||t===null||typeof t.type!="string")throw new G(U.ErrInvalidArgument,"invalid tree node format");const e={type:t.type};return t.type==="text"&&typeof t.value=="string"?(e.value=t.value,e):(t.attrs&&typeof t.attrs=="object"&&(e.attrs=t.attrs),Array.isArray(t.children)&&(e.children=t.children.map(n=>u1(n))),e)}function u3(t){return t.nodes.map(e=>e.val).join("")}function c3(t){return c1(t.root)}function c1(t){const e=t.attrs?Object.entries(t.attrs).map(([a,o])=>` ${a}="${gS(o)}"`).join(""):"";if(t.type==="text"&&t.value!==void 0)return`<${t.type}${e}>${gS(t.value)}</${t.type}>`;if(!t.children||t.children.length===0)return`<${t.type}${e} />`;const n=t.children.map(a=>c1(a)).join("");return`<${t.type}${e}>${n}</${t.type}>`}function gS(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}const f3=Object.freeze(Object.defineProperty({__proto__:null,isBinData:o1,isCounter:l1,isDate:s1,isInt:i1,isLong:a1,isObject:a3,isText:n1,isTree:r1,parse:s3,textToString:u3,treeToXML:c3},Symbol.toStringTag,{value:"Module"}));gr.Int,gr.Long;typeof globalThis<"u"&&(globalThis.yorkie={Client:t1,Document:_i,Primitive:dt,Text:Vm,Counter:Om,Tree:Lm,Channel:Di,ChannelEventType:Ns,YSON:f3,LogLevel:nn,setLogLevel:BR,IntType:gr.Int,LongType:gr.Long});const d3="@yorkie-js/react",h3="0.6.47",mS={name:d3,version:h3};var P=_l();const g3=EA(P),f1=P.createContext({client:void 0,loading:!0,error:void 0});function m3(t){const[e,n]=P.useState(void 0),[a,o]=P.useState(!0),[l,c]=P.useState(void 0),[d,m]=P.useState(!1);return P.useEffect(()=>{m(!0)},[]),P.useEffect(()=>{o(!0),c(void 0);async function h(){if(d)try{const p=new t1(t);await p.activate(),n(p)}catch(p){c(p instanceof Error?p:new Error("Failed to activate client"))}finally{o(!1)}}return h(),()=>{e?.isActive()&&e.deactivate({keepalive:!0})}},[t.apiKey,t.rpcAddr,d]),{client:e,loading:a,error:l}}const p3=({children:t,...e})=>{const n=P.useMemo(()=>({userAgent:mS.name+"/"+mS.version,...e}),[e.apiKey,e.rpcAddr]),{client:a,loading:o,error:l}=m3(n);return $.jsx(f1.Provider,{value:{client:a,loading:o,error:l},children:t})},y3=()=>{const t=P.useContext(f1);if(!t)throw new Error("useYorkie must be used under YorkieProvider");return{client:t.client,loading:t.loading,error:t.error}};function v3(t){const e=new Set;let n=t;const a=()=>{e.forEach(m=>m(n))};return{subscribe:m=>(e.add(m),()=>e.delete(m)),getSnapshot:()=>n,setState:m=>{const h=n;n=typeof m=="function"?m(h):m,h!==n&&a()},destroy:()=>{e.clear()}}}const b3=t=>v3(t);function S3(t,e,n=Object.is){const a=P.useRef(e),o=P.useRef(n),l=P.useRef(void 0);a.current=e,o.current=n;const c=()=>{const d=t.getSnapshot(),m=a.current?a.current(d):d;return l.current!==void 0&&o.current(l.current,m)?l.current:(l.current=m,m)};return P.useSyncExternalStore(t.subscribe,c,c)}function A3(t,e,n,a,o,l,c,d){const m=P.useRef(o),h=P.useRef(l),[p,y]=P.useState(!1);P.useEffect(()=>{y(!0)},[]),P.useEffect(()=>{if(n){d.setState(A=>({...A,loading:!1,error:n}));return}if(!t||e||!p){d.setState(A=>({...A,loading:!0}));return}d.setState(A=>({...A,loading:!0,error:void 0}));const v=new _i(a,{enableDevtools:c}),S=[];S.push(v.subscribe(()=>{d.setState(A=>({...A,root:v.getRoot()}))})),S.push(v.subscribe("presence",()=>{d.setState(A=>({...A,presences:v.getPresences()}))})),S.push(v.subscribe("connection",A=>{d.setState(R=>({...R,connection:A.value}))}));async function E(){try{await t?.attach(v,{initialRoot:m.current,initialPresence:h.current});const A=R=>{try{v.update(R)}catch(x){d.setState(Y=>({...Y,error:x instanceof Error?x:new Error("Failed to update document")}))}};d.setState(R=>({...R,doc:v,root:v.getRoot(),presences:v.getPresences(),update:A}))}catch(A){d.setState(R=>({...R,error:A instanceof Error?A:new Error("Failed to attach document")}))}finally{d.setState(A=>({...A,loading:!1}))}}return E(),()=>{t&&t.has(a)&&t.detach(v);for(const A of S)A()}},[t,e,n,a,d,p])}const d1=P.createContext(void 0),E3=({docKey:t,initialRoot:e={},initialPresence:n={},enableDevtools:a=!1,children:o})=>{const{client:l,loading:c,error:d}=y3(),m=P.useRef(void 0);m.current||(m.current=b3({doc:void 0,root:e,presences:[],connection:ol.Disconnected,update:()=>{},loading:!0,error:void 0}));const h=m.current;return A3(l,c,d,t,e,n,a,h),$.jsx(d1.Provider,{value:h,children:o})};function w3(){const t=P.useContext(d1);if(!t)throw new Error("useDocument must be used within a DocumentProvider");return S3(t)}P.createContext(void 0);function xt(t){if(typeof t=="string"||typeof t=="number")return""+t;let e="";if(Array.isArray(t))for(let n=0,a;n<t.length;n++)(a=xt(t[n]))!==""&&(e+=(e&&" ")+a);else for(let n in t)t[n]&&(e+=(e&&" ")+n);return e}var N3={value:()=>{}};function mf(){for(var t=0,e=arguments.length,n={},a;t<e;++t){if(!(a=arguments[t]+"")||a in n||/[\s.]/.test(a))throw new Error("illegal type: "+a);n[a]=[]}return new Oc(n)}function Oc(t){this._=t}function x3(t,e){return t.trim().split(/^|\s+/).map(function(n){var a="",o=n.indexOf(".");if(o>=0&&(a=n.slice(o+1),n=n.slice(0,o)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:a}})}Oc.prototype=mf.prototype={constructor:Oc,on:function(t,e){var n=this._,a=x3(t+"",n),o,l=-1,c=a.length;if(arguments.length<2){for(;++l<c;)if((o=(t=a[l]).type)&&(o=T3(n[o],t.name)))return o;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++l<c;)if(o=(t=a[l]).type)n[o]=pS(n[o],t.name,e);else if(e==null)for(o in n)n[o]=pS(n[o],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Oc(t)},call:function(t,e){if((o=arguments.length-2)>0)for(var n=new Array(o),a=0,o,l;a<o;++a)n[a]=arguments[a+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(l=this._[t],a=0,o=l.length;a<o;++a)l[a].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var a=this._[t],o=0,l=a.length;o<l;++o)a[o].value.apply(e,n)}};function T3(t,e){for(var n=0,a=t.length,o;n<a;++n)if((o=t[n]).name===e)return o.value}function pS(t,e,n){for(var a=0,o=t.length;a<o;++a)if(t[a].name===e){t[a]=N3,t=t.slice(0,a).concat(t.slice(a+1));break}return n!=null&&t.push({name:e,value:n}),t}var Mg="http://www.w3.org/1999/xhtml";const yS={svg:"http://www.w3.org/2000/svg",xhtml:Mg,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function pf(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),yS.hasOwnProperty(e)?{space:yS[e],local:t}:t}function C3(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Mg&&e.documentElement.namespaceURI===Mg?e.createElement(t):e.createElementNS(n,t)}}function I3(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function h1(t){var e=pf(t);return(e.local?I3:C3)(e)}function R3(){}function zm(t){return t==null?R3:function(){return this.querySelector(t)}}function D3(t){typeof t!="function"&&(t=zm(t));for(var e=this._groups,n=e.length,a=new Array(n),o=0;o<n;++o)for(var l=e[o],c=l.length,d=a[o]=new Array(c),m,h,p=0;p<c;++p)(m=l[p])&&(h=t.call(m,m.__data__,p,l))&&("__data__"in m&&(h.__data__=m.__data__),d[p]=h);return new bn(a,this._parents)}function _3(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function V3(){return[]}function g1(t){return t==null?V3:function(){return this.querySelectorAll(t)}}function O3(t){return function(){return _3(t.apply(this,arguments))}}function M3(t){typeof t=="function"?t=O3(t):t=g1(t);for(var e=this._groups,n=e.length,a=[],o=[],l=0;l<n;++l)for(var c=e[l],d=c.length,m,h=0;h<d;++h)(m=c[h])&&(a.push(t.call(m,m.__data__,h,c)),o.push(m));return new bn(a,o)}function m1(t){return function(){return this.matches(t)}}function p1(t){return function(e){return e.matches(t)}}var B3=Array.prototype.find;function L3(t){return function(){return B3.call(this.children,t)}}function z3(){return this.firstElementChild}function U3(t){return this.select(t==null?z3:L3(typeof t=="function"?t:p1(t)))}var Y3=Array.prototype.filter;function Z3(){return Array.from(this.children)}function G3(t){return function(){return Y3.call(this.children,t)}}function k3(t){return this.selectAll(t==null?Z3:G3(typeof t=="function"?t:p1(t)))}function X3(t){typeof t!="function"&&(t=m1(t));for(var e=this._groups,n=e.length,a=new Array(n),o=0;o<n;++o)for(var l=e[o],c=l.length,d=a[o]=[],m,h=0;h<c;++h)(m=l[h])&&t.call(m,m.__data__,h,l)&&d.push(m);return new bn(a,this._parents)}function y1(t){return new Array(t.length)}function W3(){return new bn(this._enter||this._groups.map(y1),this._parents)}function Hc(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Hc.prototype={constructor:Hc,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function K3(t){return function(){return t}}function H3(t,e,n,a,o,l){for(var c=0,d,m=e.length,h=l.length;c<h;++c)(d=e[c])?(d.__data__=l[c],a[c]=d):n[c]=new Hc(t,l[c]);for(;c<m;++c)(d=e[c])&&(o[c]=d)}function F3(t,e,n,a,o,l,c){var d,m,h=new Map,p=e.length,y=l.length,v=new Array(p),S;for(d=0;d<p;++d)(m=e[d])&&(v[d]=S=c.call(m,m.__data__,d,e)+"",h.has(S)?o[d]=m:h.set(S,m));for(d=0;d<y;++d)S=c.call(t,l[d],d,l)+"",(m=h.get(S))?(a[d]=m,m.__data__=l[d],h.delete(S)):n[d]=new Hc(t,l[d]);for(d=0;d<p;++d)(m=e[d])&&h.get(v[d])===m&&(o[d]=m)}function J3(t){return t.__data__}function j3(t,e){if(!arguments.length)return Array.from(this,J3);var n=e?F3:H3,a=this._parents,o=this._groups;typeof t!="function"&&(t=K3(t));for(var l=o.length,c=new Array(l),d=new Array(l),m=new Array(l),h=0;h<l;++h){var p=a[h],y=o[h],v=y.length,S=$3(t.call(p,p&&p.__data__,h,a)),E=S.length,A=d[h]=new Array(E),R=c[h]=new Array(E),x=m[h]=new Array(v);n(p,y,A,R,x,S,e);for(var Y=0,N=0,I,O;Y<E;++Y)if(I=A[Y]){for(Y>=N&&(N=Y+1);!(O=R[N])&&++N<E;);I._next=O||null}}return c=new bn(c,a),c._enter=d,c._exit=m,c}function $3(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function P3(){return new bn(this._exit||this._groups.map(y1),this._parents)}function Q3(t,e,n){var a=this.enter(),o=this,l=this.exit();return typeof t=="function"?(a=t(a),a&&(a=a.selection())):a=a.append(t+""),e!=null&&(o=e(o),o&&(o=o.selection())),n==null?l.remove():n(l),a&&o?a.merge(o).order():o}function q3(t){for(var e=t.selection?t.selection():t,n=this._groups,a=e._groups,o=n.length,l=a.length,c=Math.min(o,l),d=new Array(o),m=0;m<c;++m)for(var h=n[m],p=a[m],y=h.length,v=d[m]=new Array(y),S,E=0;E<y;++E)(S=h[E]||p[E])&&(v[E]=S);for(;m<o;++m)d[m]=n[m];return new bn(d,this._parents)}function eD(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var a=t[e],o=a.length-1,l=a[o],c;--o>=0;)(c=a[o])&&(l&&c.compareDocumentPosition(l)^4&&l.parentNode.insertBefore(c,l),l=c);return this}function tD(t){t||(t=nD);function e(y,v){return y&&v?t(y.__data__,v.__data__):!y-!v}for(var n=this._groups,a=n.length,o=new Array(a),l=0;l<a;++l){for(var c=n[l],d=c.length,m=o[l]=new Array(d),h,p=0;p<d;++p)(h=c[p])&&(m[p]=h);m.sort(e)}return new bn(o,this._parents).order()}function nD(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function rD(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function iD(){return Array.from(this)}function aD(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var a=t[e],o=0,l=a.length;o<l;++o){var c=a[o];if(c)return c}return null}function sD(){let t=0;for(const e of this)++t;return t}function oD(){return!this.node()}function lD(t){for(var e=this._groups,n=0,a=e.length;n<a;++n)for(var o=e[n],l=0,c=o.length,d;l<c;++l)(d=o[l])&&t.call(d,d.__data__,l,o);return this}function uD(t){return function(){this.removeAttribute(t)}}function cD(t){return function(){this.removeAttributeNS(t.space,t.local)}}function fD(t,e){return function(){this.setAttribute(t,e)}}function dD(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function hD(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function gD(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function mD(t,e){var n=pf(t);if(arguments.length<2){var a=this.node();return n.local?a.getAttributeNS(n.space,n.local):a.getAttribute(n)}return this.each((e==null?n.local?cD:uD:typeof e=="function"?n.local?gD:hD:n.local?dD:fD)(n,e))}function v1(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function pD(t){return function(){this.style.removeProperty(t)}}function yD(t,e,n){return function(){this.style.setProperty(t,e,n)}}function vD(t,e,n){return function(){var a=e.apply(this,arguments);a==null?this.style.removeProperty(t):this.style.setProperty(t,a,n)}}function bD(t,e,n){return arguments.length>1?this.each((e==null?pD:typeof e=="function"?vD:yD)(t,e,n??"")):Xs(this.node(),t)}function Xs(t,e){return t.style.getPropertyValue(e)||v1(t).getComputedStyle(t,null).getPropertyValue(e)}function SD(t){return function(){delete this[t]}}function AD(t,e){return function(){this[t]=e}}function ED(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function wD(t,e){return arguments.length>1?this.each((e==null?SD:typeof e=="function"?ED:AD)(t,e)):this.node()[t]}function b1(t){return t.trim().split(/^|\s+/)}function Um(t){return t.classList||new S1(t)}function S1(t){this._node=t,this._names=b1(t.getAttribute("class")||"")}S1.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function A1(t,e){for(var n=Um(t),a=-1,o=e.length;++a<o;)n.add(e[a])}function E1(t,e){for(var n=Um(t),a=-1,o=e.length;++a<o;)n.remove(e[a])}function ND(t){return function(){A1(this,t)}}function xD(t){return function(){E1(this,t)}}function TD(t,e){return function(){(e.apply(this,arguments)?A1:E1)(this,t)}}function CD(t,e){var n=b1(t+"");if(arguments.length<2){for(var a=Um(this.node()),o=-1,l=n.length;++o<l;)if(!a.contains(n[o]))return!1;return!0}return this.each((typeof e=="function"?TD:e?ND:xD)(n,e))}function ID(){this.textContent=""}function RD(t){return function(){this.textContent=t}}function DD(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function _D(t){return arguments.length?this.each(t==null?ID:(typeof t=="function"?DD:RD)(t)):this.node().textContent}function VD(){this.innerHTML=""}function OD(t){return function(){this.innerHTML=t}}function MD(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function BD(t){return arguments.length?this.each(t==null?VD:(typeof t=="function"?MD:OD)(t)):this.node().innerHTML}function LD(){this.nextSibling&&this.parentNode.appendChild(this)}function zD(){return this.each(LD)}function UD(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function YD(){return this.each(UD)}function ZD(t){var e=typeof t=="function"?t:h1(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function GD(){return null}function kD(t,e){var n=typeof t=="function"?t:h1(t),a=e==null?GD:typeof e=="function"?e:zm(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),a.apply(this,arguments)||null)})}function XD(){var t=this.parentNode;t&&t.removeChild(this)}function WD(){return this.each(XD)}function KD(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function HD(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function FD(t){return this.select(t?HD:KD)}function JD(t){return arguments.length?this.property("__data__",t):this.node().__data__}function jD(t){return function(e){t.call(this,e,this.__data__)}}function $D(t){return t.trim().split(/^|\s+/).map(function(e){var n="",a=e.indexOf(".");return a>=0&&(n=e.slice(a+1),e=e.slice(0,a)),{type:e,name:n}})}function PD(t){return function(){var e=this.__on;if(e){for(var n=0,a=-1,o=e.length,l;n<o;++n)l=e[n],(!t.type||l.type===t.type)&&l.name===t.name?this.removeEventListener(l.type,l.listener,l.options):e[++a]=l;++a?e.length=a:delete this.__on}}}function QD(t,e,n){return function(){var a=this.__on,o,l=jD(e);if(a){for(var c=0,d=a.length;c<d;++c)if((o=a[c]).type===t.type&&o.name===t.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=l,o.options=n),o.value=e;return}}this.addEventListener(t.type,l,n),o={type:t.type,name:t.name,value:e,listener:l,options:n},a?a.push(o):this.__on=[o]}}function qD(t,e,n){var a=$D(t+""),o,l=a.length,c;if(arguments.length<2){var d=this.node().__on;if(d){for(var m=0,h=d.length,p;m<h;++m)for(o=0,p=d[m];o<l;++o)if((c=a[o]).type===p.type&&c.name===p.name)return p.value}return}for(d=e?QD:PD,o=0;o<l;++o)this.each(d(a[o],e,n));return this}function w1(t,e,n){var a=v1(t),o=a.CustomEvent;typeof o=="function"?o=new o(e,n):(o=a.document.createEvent("Event"),n?(o.initEvent(e,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(e,!1,!1)),t.dispatchEvent(o)}function e_(t,e){return function(){return w1(this,t,e)}}function t_(t,e){return function(){return w1(this,t,e.apply(this,arguments))}}function n_(t,e){return this.each((typeof e=="function"?t_:e_)(t,e))}function*r_(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var a=t[e],o=0,l=a.length,c;o<l;++o)(c=a[o])&&(yield c)}var N1=[null];function bn(t,e){this._groups=t,this._parents=e}function zl(){return new bn([[document.documentElement]],N1)}function i_(){return this}bn.prototype=zl.prototype={constructor:bn,select:D3,selectAll:M3,selectChild:U3,selectChildren:k3,filter:X3,data:j3,enter:W3,exit:P3,join:Q3,merge:q3,selection:i_,order:eD,sort:tD,call:rD,nodes:iD,node:aD,size:sD,empty:oD,each:lD,attr:mD,style:bD,property:wD,classed:CD,text:_D,html:BD,raise:zD,lower:YD,append:ZD,insert:kD,remove:WD,clone:FD,datum:JD,on:qD,dispatch:n_,[Symbol.iterator]:r_};function pn(t){return typeof t=="string"?new bn([[document.querySelector(t)]],[document.documentElement]):new bn([[t]],N1)}function a_(t){let e;for(;e=t.sourceEvent;)t=e;return t}function Wn(t,e){if(t=a_(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var a=n.createSVGPoint();return a.x=t.clientX,a.y=t.clientY,a=a.matrixTransform(e.getScreenCTM().inverse()),[a.x,a.y]}if(e.getBoundingClientRect){var o=e.getBoundingClientRect();return[t.clientX-o.left-e.clientLeft,t.clientY-o.top-e.clientTop]}}return[t.pageX,t.pageY]}const s_={passive:!1},Al={capture:!0,passive:!1};function og(t){t.stopImmediatePropagation()}function Rs(t){t.preventDefault(),t.stopImmediatePropagation()}function x1(t){var e=t.document.documentElement,n=pn(t).on("dragstart.drag",Rs,Al);"onselectstart"in e?n.on("selectstart.drag",Rs,Al):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function T1(t,e){var n=t.document.documentElement,a=pn(t).on("dragstart.drag",null);e&&(a.on("click.drag",Rs,Al),setTimeout(function(){a.on("click.drag",null)},0)),"onselectstart"in n?a.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Sc=t=>()=>t;function Bg(t,{sourceEvent:e,subject:n,target:a,identifier:o,active:l,x:c,y:d,dx:m,dy:h,dispatch:p}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:a,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:l,enumerable:!0,configurable:!0},x:{value:c,enumerable:!0,configurable:!0},y:{value:d,enumerable:!0,configurable:!0},dx:{value:m,enumerable:!0,configurable:!0},dy:{value:h,enumerable:!0,configurable:!0},_:{value:p}})}Bg.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function o_(t){return!t.ctrlKey&&!t.button}function l_(){return this.parentNode}function u_(t,e){return e??{x:t.x,y:t.y}}function c_(){return navigator.maxTouchPoints||"ontouchstart"in this}function C1(){var t=o_,e=l_,n=u_,a=c_,o={},l=mf("start","drag","end"),c=0,d,m,h,p,y=0;function v(I){I.on("mousedown.drag",S).filter(a).on("touchstart.drag",R).on("touchmove.drag",x,s_).on("touchend.drag touchcancel.drag",Y).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function S(I,O){if(!(p||!t.call(this,I,O))){var B=N(this,e.call(this,I,O),I,O,"mouse");B&&(pn(I.view).on("mousemove.drag",E,Al).on("mouseup.drag",A,Al),x1(I.view),og(I),h=!1,d=I.clientX,m=I.clientY,B("start",I))}}function E(I){if(Rs(I),!h){var O=I.clientX-d,B=I.clientY-m;h=O*O+B*B>y}o.mouse("drag",I)}function A(I){pn(I.view).on("mousemove.drag mouseup.drag",null),T1(I.view,h),Rs(I),o.mouse("end",I)}function R(I,O){if(t.call(this,I,O)){var B=I.changedTouches,M=e.call(this,I,O),W=B.length,q,de;for(q=0;q<W;++q)(de=N(this,M,I,O,B[q].identifier,B[q]))&&(og(I),de("start",I,B[q]))}}function x(I){var O=I.changedTouches,B=O.length,M,W;for(M=0;M<B;++M)(W=o[O[M].identifier])&&(Rs(I),W("drag",I,O[M]))}function Y(I){var O=I.changedTouches,B=O.length,M,W;for(p&&clearTimeout(p),p=setTimeout(function(){p=null},500),M=0;M<B;++M)(W=o[O[M].identifier])&&(og(I),W("end",I,O[M]))}function N(I,O,B,M,W,q){var de=l.copy(),ne=Wn(q||B,O),te,le,_;if((_=n.call(I,new Bg("beforestart",{sourceEvent:B,target:v,identifier:W,active:c,x:ne[0],y:ne[1],dx:0,dy:0,dispatch:de}),M))!=null)return te=_.x-ne[0]||0,le=_.y-ne[1]||0,function K(T,V,Z){var H=ne,ie;switch(T){case"start":o[W]=K,ie=c++;break;case"end":delete o[W],--c;case"drag":ne=Wn(Z||V,O),ie=c;break}de.call(T,I,new Bg(T,{sourceEvent:V,subject:_,target:v,identifier:W,active:ie,x:ne[0]+te,y:ne[1]+le,dx:ne[0]-H[0],dy:ne[1]-H[1],dispatch:de}),M)}}return v.filter=function(I){return arguments.length?(t=typeof I=="function"?I:Sc(!!I),v):t},v.container=function(I){return arguments.length?(e=typeof I=="function"?I:Sc(I),v):e},v.subject=function(I){return arguments.length?(n=typeof I=="function"?I:Sc(I),v):n},v.touchable=function(I){return arguments.length?(a=typeof I=="function"?I:Sc(!!I),v):a},v.on=function(){var I=l.on.apply(l,arguments);return I===l?v:I},v.clickDistance=function(I){return arguments.length?(y=(I=+I)*I,v):Math.sqrt(y)},v}function Ym(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function I1(t,e){var n=Object.create(t.prototype);for(var a in e)n[a]=e[a];return n}function Ul(){}var El=.7,Fc=1/El,Ds="\\s*([+-]?\\d+)\\s*",wl="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",fr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",f_=/^#([0-9a-f]{3,8})$/,d_=new RegExp(`^rgb\\(${Ds},${Ds},${Ds}\\)$`),h_=new RegExp(`^rgb\\(${fr},${fr},${fr}\\)$`),g_=new RegExp(`^rgba\\(${Ds},${Ds},${Ds},${wl}\\)$`),m_=new RegExp(`^rgba\\(${fr},${fr},${fr},${wl}\\)$`),p_=new RegExp(`^hsl\\(${wl},${fr},${fr}\\)$`),y_=new RegExp(`^hsla\\(${wl},${fr},${fr},${wl}\\)$`),vS={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ym(Ul,Aa,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:bS,formatHex:bS,formatHex8:v_,formatHsl:b_,formatRgb:SS,toString:SS});function bS(){return this.rgb().formatHex()}function v_(){return this.rgb().formatHex8()}function b_(){return R1(this).formatHsl()}function SS(){return this.rgb().formatRgb()}function Aa(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=f_.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?AS(e):n===3?new an(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Ac(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Ac(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=d_.exec(t))?new an(e[1],e[2],e[3],1):(e=h_.exec(t))?new an(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=g_.exec(t))?Ac(e[1],e[2],e[3],e[4]):(e=m_.exec(t))?Ac(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=p_.exec(t))?NS(e[1],e[2]/100,e[3]/100,1):(e=y_.exec(t))?NS(e[1],e[2]/100,e[3]/100,e[4]):vS.hasOwnProperty(t)?AS(vS[t]):t==="transparent"?new an(NaN,NaN,NaN,0):null}function AS(t){return new an(t>>16&255,t>>8&255,t&255,1)}function Ac(t,e,n,a){return a<=0&&(t=e=n=NaN),new an(t,e,n,a)}function S_(t){return t instanceof Ul||(t=Aa(t)),t?(t=t.rgb(),new an(t.r,t.g,t.b,t.opacity)):new an}function Lg(t,e,n,a){return arguments.length===1?S_(t):new an(t,e,n,a??1)}function an(t,e,n,a){this.r=+t,this.g=+e,this.b=+n,this.opacity=+a}Ym(an,Lg,I1(Ul,{brighter(t){return t=t==null?Fc:Math.pow(Fc,t),new an(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?El:Math.pow(El,t),new an(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new an(ya(this.r),ya(this.g),ya(this.b),Jc(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ES,formatHex:ES,formatHex8:A_,formatRgb:wS,toString:wS}));function ES(){return`#${pa(this.r)}${pa(this.g)}${pa(this.b)}`}function A_(){return`#${pa(this.r)}${pa(this.g)}${pa(this.b)}${pa((isNaN(this.opacity)?1:this.opacity)*255)}`}function wS(){const t=Jc(this.opacity);return`${t===1?"rgb(":"rgba("}${ya(this.r)}, ${ya(this.g)}, ${ya(this.b)}${t===1?")":`, ${t})`}`}function Jc(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function ya(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function pa(t){return t=ya(t),(t<16?"0":"")+t.toString(16)}function NS(t,e,n,a){return a<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Hn(t,e,n,a)}function R1(t){if(t instanceof Hn)return new Hn(t.h,t.s,t.l,t.opacity);if(t instanceof Ul||(t=Aa(t)),!t)return new Hn;if(t instanceof Hn)return t;t=t.rgb();var e=t.r/255,n=t.g/255,a=t.b/255,o=Math.min(e,n,a),l=Math.max(e,n,a),c=NaN,d=l-o,m=(l+o)/2;return d?(e===l?c=(n-a)/d+(n<a)*6:n===l?c=(a-e)/d+2:c=(e-n)/d+4,d/=m<.5?l+o:2-l-o,c*=60):d=m>0&&m<1?0:c,new Hn(c,d,m,t.opacity)}function E_(t,e,n,a){return arguments.length===1?R1(t):new Hn(t,e,n,a??1)}function Hn(t,e,n,a){this.h=+t,this.s=+e,this.l=+n,this.opacity=+a}Ym(Hn,E_,I1(Ul,{brighter(t){return t=t==null?Fc:Math.pow(Fc,t),new Hn(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?El:Math.pow(El,t),new Hn(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,a=n+(n<.5?n:1-n)*e,o=2*n-a;return new an(lg(t>=240?t-240:t+120,o,a),lg(t,o,a),lg(t<120?t+240:t-120,o,a),this.opacity)},clamp(){return new Hn(xS(this.h),Ec(this.s),Ec(this.l),Jc(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Jc(this.opacity);return`${t===1?"hsl(":"hsla("}${xS(this.h)}, ${Ec(this.s)*100}%, ${Ec(this.l)*100}%${t===1?")":`, ${t})`}`}}));function xS(t){return t=(t||0)%360,t<0?t+360:t}function Ec(t){return Math.max(0,Math.min(1,t||0))}function lg(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Zm=t=>()=>t;function w_(t,e){return function(n){return t+n*e}}function N_(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(a){return Math.pow(t+a*e,n)}}function x_(t){return(t=+t)==1?D1:function(e,n){return n-e?N_(e,n,t):Zm(isNaN(e)?n:e)}}function D1(t,e){var n=e-t;return n?w_(t,n):Zm(isNaN(t)?e:t)}const jc=(function t(e){var n=x_(e);function a(o,l){var c=n((o=Lg(o)).r,(l=Lg(l)).r),d=n(o.g,l.g),m=n(o.b,l.b),h=D1(o.opacity,l.opacity);return function(p){return o.r=c(p),o.g=d(p),o.b=m(p),o.opacity=h(p),o+""}}return a.gamma=t,a})(1);function T_(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,a=e.slice(),o;return function(l){for(o=0;o<n;++o)a[o]=t[o]*(1-l)+e[o]*l;return a}}function C_(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function I_(t,e){var n=e?e.length:0,a=t?Math.min(n,t.length):0,o=new Array(a),l=new Array(n),c;for(c=0;c<a;++c)o[c]=ll(t[c],e[c]);for(;c<n;++c)l[c]=e[c];return function(d){for(c=0;c<a;++c)l[c]=o[c](d);return l}}function R_(t,e){var n=new Date;return t=+t,e=+e,function(a){return n.setTime(t*(1-a)+e*a),n}}function sr(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function D_(t,e){var n={},a={},o;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(o in e)o in t?n[o]=ll(t[o],e[o]):a[o]=e[o];return function(l){for(o in n)a[o]=n[o](l);return a}}var zg=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ug=new RegExp(zg.source,"g");function __(t){return function(){return t}}function V_(t){return function(e){return t(e)+""}}function _1(t,e){var n=zg.lastIndex=ug.lastIndex=0,a,o,l,c=-1,d=[],m=[];for(t=t+"",e=e+"";(a=zg.exec(t))&&(o=ug.exec(e));)(l=o.index)>n&&(l=e.slice(n,l),d[c]?d[c]+=l:d[++c]=l),(a=a[0])===(o=o[0])?d[c]?d[c]+=o:d[++c]=o:(d[++c]=null,m.push({i:c,x:sr(a,o)})),n=ug.lastIndex;return n<e.length&&(l=e.slice(n),d[c]?d[c]+=l:d[++c]=l),d.length<2?m[0]?V_(m[0].x):__(e):(e=m.length,function(h){for(var p=0,y;p<e;++p)d[(y=m[p]).i]=y.x(h);return d.join("")})}function ll(t,e){var n=typeof e,a;return e==null||n==="boolean"?Zm(e):(n==="number"?sr:n==="string"?(a=Aa(e))?(e=a,jc):_1:e instanceof Aa?jc:e instanceof Date?R_:C_(e)?T_:Array.isArray(e)?I_:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?D_:sr)(t,e)}var TS=180/Math.PI,Ug={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function V1(t,e,n,a,o,l){var c,d,m;return(c=Math.sqrt(t*t+e*e))&&(t/=c,e/=c),(m=t*n+e*a)&&(n-=t*m,a-=e*m),(d=Math.sqrt(n*n+a*a))&&(n/=d,a/=d,m/=d),t*a<e*n&&(t=-t,e=-e,m=-m,c=-c),{translateX:o,translateY:l,rotate:Math.atan2(e,t)*TS,skewX:Math.atan(m)*TS,scaleX:c,scaleY:d}}var wc;function O_(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Ug:V1(e.a,e.b,e.c,e.d,e.e,e.f)}function M_(t){return t==null||(wc||(wc=document.createElementNS("http://www.w3.org/2000/svg","g")),wc.setAttribute("transform",t),!(t=wc.transform.baseVal.consolidate()))?Ug:(t=t.matrix,V1(t.a,t.b,t.c,t.d,t.e,t.f))}function O1(t,e,n,a){function o(h){return h.length?h.pop()+" ":""}function l(h,p,y,v,S,E){if(h!==y||p!==v){var A=S.push("translate(",null,e,null,n);E.push({i:A-4,x:sr(h,y)},{i:A-2,x:sr(p,v)})}else(y||v)&&S.push("translate("+y+e+v+n)}function c(h,p,y,v){h!==p?(h-p>180?p+=360:p-h>180&&(h+=360),v.push({i:y.push(o(y)+"rotate(",null,a)-2,x:sr(h,p)})):p&&y.push(o(y)+"rotate("+p+a)}function d(h,p,y,v){h!==p?v.push({i:y.push(o(y)+"skewX(",null,a)-2,x:sr(h,p)}):p&&y.push(o(y)+"skewX("+p+a)}function m(h,p,y,v,S,E){if(h!==y||p!==v){var A=S.push(o(S)+"scale(",null,",",null,")");E.push({i:A-4,x:sr(h,y)},{i:A-2,x:sr(p,v)})}else(y!==1||v!==1)&&S.push(o(S)+"scale("+y+","+v+")")}return function(h,p){var y=[],v=[];return h=t(h),p=t(p),l(h.translateX,h.translateY,p.translateX,p.translateY,y,v),c(h.rotate,p.rotate,y,v),d(h.skewX,p.skewX,y,v),m(h.scaleX,h.scaleY,p.scaleX,p.scaleY,y,v),h=p=null,function(S){for(var E=-1,A=v.length,R;++E<A;)y[(R=v[E]).i]=R.x(S);return y.join("")}}}var B_=O1(O_,"px, ","px)","deg)"),L_=O1(M_,", ",")",")"),z_=1e-12;function CS(t){return((t=Math.exp(t))+1/t)/2}function U_(t){return((t=Math.exp(t))-1/t)/2}function Y_(t){return((t=Math.exp(2*t))-1)/(t+1)}const Mc=(function t(e,n,a){function o(l,c){var d=l[0],m=l[1],h=l[2],p=c[0],y=c[1],v=c[2],S=p-d,E=y-m,A=S*S+E*E,R,x;if(A<z_)x=Math.log(v/h)/e,R=function(M){return[d+M*S,m+M*E,h*Math.exp(e*M*x)]};else{var Y=Math.sqrt(A),N=(v*v-h*h+a*A)/(2*h*n*Y),I=(v*v-h*h-a*A)/(2*v*n*Y),O=Math.log(Math.sqrt(N*N+1)-N),B=Math.log(Math.sqrt(I*I+1)-I);x=(B-O)/e,R=function(M){var W=M*x,q=CS(O),de=h/(n*Y)*(q*Y_(e*W+O)-U_(O));return[d+de*S,m+de*E,h*q/CS(e*W+O)]}}return R.duration=x*1e3*e/Math.SQRT2,R}return o.rho=function(l){var c=Math.max(.001,+l),d=c*c,m=d*d;return t(c,d,m)},o})(Math.SQRT2,2,4);var Ws=0,el=0,jo=0,M1=1e3,$c,tl,Pc=0,Ea=0,yf=0,Nl=typeof performance=="object"&&performance.now?performance:Date,B1=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Gm(){return Ea||(B1(Z_),Ea=Nl.now()+yf)}function Z_(){Ea=0}function Qc(){this._call=this._time=this._next=null}Qc.prototype=L1.prototype={constructor:Qc,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Gm():+n)+(e==null?0:+e),!this._next&&tl!==this&&(tl?tl._next=this:$c=this,tl=this),this._call=t,this._time=n,Yg()},stop:function(){this._call&&(this._call=null,this._time=1/0,Yg())}};function L1(t,e,n){var a=new Qc;return a.restart(t,e,n),a}function G_(){Gm(),++Ws;for(var t=$c,e;t;)(e=Ea-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Ws}function IS(){Ea=(Pc=Nl.now())+yf,Ws=el=0;try{G_()}finally{Ws=0,X_(),Ea=0}}function k_(){var t=Nl.now(),e=t-Pc;e>M1&&(yf-=e,Pc=t)}function X_(){for(var t,e=$c,n,a=1/0;e;)e._call?(a>e._time&&(a=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:$c=n);tl=t,Yg(a)}function Yg(t){if(!Ws){el&&(el=clearTimeout(el));var e=t-Ea;e>24?(t<1/0&&(el=setTimeout(IS,t-Nl.now()-yf)),jo&&(jo=clearInterval(jo))):(jo||(Pc=Nl.now(),jo=setInterval(k_,M1)),Ws=1,B1(IS))}}function RS(t,e,n){var a=new Qc;return e=e==null?0:+e,a.restart(o=>{a.stop(),t(o+e)},e,n),a}var W_=mf("start","end","cancel","interrupt"),K_=[],z1=0,DS=1,Zg=2,Bc=3,_S=4,Gg=5,Lc=6;function vf(t,e,n,a,o,l){var c=t.__transition;if(!c)t.__transition={};else if(n in c)return;H_(t,n,{name:e,index:a,group:o,on:W_,tween:K_,time:l.time,delay:l.delay,duration:l.duration,ease:l.ease,timer:null,state:z1})}function km(t,e){var n=qn(t,e);if(n.state>z1)throw new Error("too late; already scheduled");return n}function pr(t,e){var n=qn(t,e);if(n.state>Bc)throw new Error("too late; already running");return n}function qn(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function H_(t,e,n){var a=t.__transition,o;a[e]=n,n.timer=L1(l,0,n.time);function l(h){n.state=DS,n.timer.restart(c,n.delay,n.time),n.delay<=h&&c(h-n.delay)}function c(h){var p,y,v,S;if(n.state!==DS)return m();for(p in a)if(S=a[p],S.name===n.name){if(S.state===Bc)return RS(c);S.state===_S?(S.state=Lc,S.timer.stop(),S.on.call("interrupt",t,t.__data__,S.index,S.group),delete a[p]):+p<e&&(S.state=Lc,S.timer.stop(),S.on.call("cancel",t,t.__data__,S.index,S.group),delete a[p])}if(RS(function(){n.state===Bc&&(n.state=_S,n.timer.restart(d,n.delay,n.time),d(h))}),n.state=Zg,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Zg){for(n.state=Bc,o=new Array(v=n.tween.length),p=0,y=-1;p<v;++p)(S=n.tween[p].value.call(t,t.__data__,n.index,n.group))&&(o[++y]=S);o.length=y+1}}function d(h){for(var p=h<n.duration?n.ease.call(null,h/n.duration):(n.timer.restart(m),n.state=Gg,1),y=-1,v=o.length;++y<v;)o[y].call(t,p);n.state===Gg&&(n.on.call("end",t,t.__data__,n.index,n.group),m())}function m(){n.state=Lc,n.timer.stop(),delete a[e];for(var h in a)return;delete t.__transition}}function zc(t,e){var n=t.__transition,a,o,l=!0,c;if(n){e=e==null?null:e+"";for(c in n){if((a=n[c]).name!==e){l=!1;continue}o=a.state>Zg&&a.state<Gg,a.state=Lc,a.timer.stop(),a.on.call(o?"interrupt":"cancel",t,t.__data__,a.index,a.group),delete n[c]}l&&delete t.__transition}}function F_(t){return this.each(function(){zc(this,t)})}function J_(t,e){var n,a;return function(){var o=pr(this,t),l=o.tween;if(l!==n){a=n=l;for(var c=0,d=a.length;c<d;++c)if(a[c].name===e){a=a.slice(),a.splice(c,1);break}}o.tween=a}}function j_(t,e,n){var a,o;if(typeof n!="function")throw new Error;return function(){var l=pr(this,t),c=l.tween;if(c!==a){o=(a=c).slice();for(var d={name:e,value:n},m=0,h=o.length;m<h;++m)if(o[m].name===e){o[m]=d;break}m===h&&o.push(d)}l.tween=o}}function $_(t,e){var n=this._id;if(t+="",arguments.length<2){for(var a=qn(this.node(),n).tween,o=0,l=a.length,c;o<l;++o)if((c=a[o]).name===t)return c.value;return null}return this.each((e==null?J_:j_)(n,t,e))}function Xm(t,e,n){var a=t._id;return t.each(function(){var o=pr(this,a);(o.value||(o.value={}))[e]=n.apply(this,arguments)}),function(o){return qn(o,a).value[e]}}function U1(t,e){var n;return(typeof e=="number"?sr:e instanceof Aa?jc:(n=Aa(e))?(e=n,jc):_1)(t,e)}function P_(t){return function(){this.removeAttribute(t)}}function Q_(t){return function(){this.removeAttributeNS(t.space,t.local)}}function q_(t,e,n){var a,o=n+"",l;return function(){var c=this.getAttribute(t);return c===o?null:c===a?l:l=e(a=c,n)}}function eV(t,e,n){var a,o=n+"",l;return function(){var c=this.getAttributeNS(t.space,t.local);return c===o?null:c===a?l:l=e(a=c,n)}}function tV(t,e,n){var a,o,l;return function(){var c,d=n(this),m;return d==null?void this.removeAttribute(t):(c=this.getAttribute(t),m=d+"",c===m?null:c===a&&m===o?l:(o=m,l=e(a=c,d)))}}function nV(t,e,n){var a,o,l;return function(){var c,d=n(this),m;return d==null?void this.removeAttributeNS(t.space,t.local):(c=this.getAttributeNS(t.space,t.local),m=d+"",c===m?null:c===a&&m===o?l:(o=m,l=e(a=c,d)))}}function rV(t,e){var n=pf(t),a=n==="transform"?L_:U1;return this.attrTween(t,typeof e=="function"?(n.local?nV:tV)(n,a,Xm(this,"attr."+t,e)):e==null?(n.local?Q_:P_)(n):(n.local?eV:q_)(n,a,e))}function iV(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function aV(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function sV(t,e){var n,a;function o(){var l=e.apply(this,arguments);return l!==a&&(n=(a=l)&&aV(t,l)),n}return o._value=e,o}function oV(t,e){var n,a;function o(){var l=e.apply(this,arguments);return l!==a&&(n=(a=l)&&iV(t,l)),n}return o._value=e,o}function lV(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var a=pf(t);return this.tween(n,(a.local?sV:oV)(a,e))}function uV(t,e){return function(){km(this,t).delay=+e.apply(this,arguments)}}function cV(t,e){return e=+e,function(){km(this,t).delay=e}}function fV(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?uV:cV)(e,t)):qn(this.node(),e).delay}function dV(t,e){return function(){pr(this,t).duration=+e.apply(this,arguments)}}function hV(t,e){return e=+e,function(){pr(this,t).duration=e}}function gV(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?dV:hV)(e,t)):qn(this.node(),e).duration}function mV(t,e){if(typeof e!="function")throw new Error;return function(){pr(this,t).ease=e}}function pV(t){var e=this._id;return arguments.length?this.each(mV(e,t)):qn(this.node(),e).ease}function yV(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;pr(this,t).ease=n}}function vV(t){if(typeof t!="function")throw new Error;return this.each(yV(this._id,t))}function bV(t){typeof t!="function"&&(t=m1(t));for(var e=this._groups,n=e.length,a=new Array(n),o=0;o<n;++o)for(var l=e[o],c=l.length,d=a[o]=[],m,h=0;h<c;++h)(m=l[h])&&t.call(m,m.__data__,h,l)&&d.push(m);return new Fr(a,this._parents,this._name,this._id)}function SV(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,a=e.length,o=n.length,l=Math.min(a,o),c=new Array(a),d=0;d<l;++d)for(var m=e[d],h=n[d],p=m.length,y=c[d]=new Array(p),v,S=0;S<p;++S)(v=m[S]||h[S])&&(y[S]=v);for(;d<a;++d)c[d]=e[d];return new Fr(c,this._parents,this._name,this._id)}function AV(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function EV(t,e,n){var a,o,l=AV(e)?km:pr;return function(){var c=l(this,t),d=c.on;d!==a&&(o=(a=d).copy()).on(e,n),c.on=o}}function wV(t,e){var n=this._id;return arguments.length<2?qn(this.node(),n).on.on(t):this.each(EV(n,t,e))}function NV(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function xV(){return this.on("end.remove",NV(this._id))}function TV(t){var e=this._name,n=this._id;typeof t!="function"&&(t=zm(t));for(var a=this._groups,o=a.length,l=new Array(o),c=0;c<o;++c)for(var d=a[c],m=d.length,h=l[c]=new Array(m),p,y,v=0;v<m;++v)(p=d[v])&&(y=t.call(p,p.__data__,v,d))&&("__data__"in p&&(y.__data__=p.__data__),h[v]=y,vf(h[v],e,n,v,h,qn(p,n)));return new Fr(l,this._parents,e,n)}function CV(t){var e=this._name,n=this._id;typeof t!="function"&&(t=g1(t));for(var a=this._groups,o=a.length,l=[],c=[],d=0;d<o;++d)for(var m=a[d],h=m.length,p,y=0;y<h;++y)if(p=m[y]){for(var v=t.call(p,p.__data__,y,m),S,E=qn(p,n),A=0,R=v.length;A<R;++A)(S=v[A])&&vf(S,e,n,A,v,E);l.push(v),c.push(p)}return new Fr(l,c,e,n)}var IV=zl.prototype.constructor;function RV(){return new IV(this._groups,this._parents)}function DV(t,e){var n,a,o;return function(){var l=Xs(this,t),c=(this.style.removeProperty(t),Xs(this,t));return l===c?null:l===n&&c===a?o:o=e(n=l,a=c)}}function Y1(t){return function(){this.style.removeProperty(t)}}function _V(t,e,n){var a,o=n+"",l;return function(){var c=Xs(this,t);return c===o?null:c===a?l:l=e(a=c,n)}}function VV(t,e,n){var a,o,l;return function(){var c=Xs(this,t),d=n(this),m=d+"";return d==null&&(m=d=(this.style.removeProperty(t),Xs(this,t))),c===m?null:c===a&&m===o?l:(o=m,l=e(a=c,d))}}function OV(t,e){var n,a,o,l="style."+e,c="end."+l,d;return function(){var m=pr(this,t),h=m.on,p=m.value[l]==null?d||(d=Y1(e)):void 0;(h!==n||o!==p)&&(a=(n=h).copy()).on(c,o=p),m.on=a}}function MV(t,e,n){var a=(t+="")=="transform"?B_:U1;return e==null?this.styleTween(t,DV(t,a)).on("end.style."+t,Y1(t)):typeof e=="function"?this.styleTween(t,VV(t,a,Xm(this,"style."+t,e))).each(OV(this._id,t)):this.styleTween(t,_V(t,a,e),n).on("end.style."+t,null)}function BV(t,e,n){return function(a){this.style.setProperty(t,e.call(this,a),n)}}function LV(t,e,n){var a,o;function l(){var c=e.apply(this,arguments);return c!==o&&(a=(o=c)&&BV(t,c,n)),a}return l._value=e,l}function zV(t,e,n){var a="style."+(t+="");if(arguments.length<2)return(a=this.tween(a))&&a._value;if(e==null)return this.tween(a,null);if(typeof e!="function")throw new Error;return this.tween(a,LV(t,e,n??""))}function UV(t){return function(){this.textContent=t}}function YV(t){return function(){var e=t(this);this.textContent=e??""}}function ZV(t){return this.tween("text",typeof t=="function"?YV(Xm(this,"text",t)):UV(t==null?"":t+""))}function GV(t){return function(e){this.textContent=t.call(this,e)}}function kV(t){var e,n;function a(){var o=t.apply(this,arguments);return o!==n&&(e=(n=o)&&GV(o)),e}return a._value=t,a}function XV(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,kV(t))}function WV(){for(var t=this._name,e=this._id,n=Z1(),a=this._groups,o=a.length,l=0;l<o;++l)for(var c=a[l],d=c.length,m,h=0;h<d;++h)if(m=c[h]){var p=qn(m,e);vf(m,t,n,h,c,{time:p.time+p.delay+p.duration,delay:0,duration:p.duration,ease:p.ease})}return new Fr(a,this._parents,t,n)}function KV(){var t,e,n=this,a=n._id,o=n.size();return new Promise(function(l,c){var d={value:c},m={value:function(){--o===0&&l()}};n.each(function(){var h=pr(this,a),p=h.on;p!==t&&(e=(t=p).copy(),e._.cancel.push(d),e._.interrupt.push(d),e._.end.push(m)),h.on=e}),o===0&&l()})}var HV=0;function Fr(t,e,n,a){this._groups=t,this._parents=e,this._name=n,this._id=a}function Z1(){return++HV}var Ur=zl.prototype;Fr.prototype={constructor:Fr,select:TV,selectAll:CV,selectChild:Ur.selectChild,selectChildren:Ur.selectChildren,filter:bV,merge:SV,selection:RV,transition:WV,call:Ur.call,nodes:Ur.nodes,node:Ur.node,size:Ur.size,empty:Ur.empty,each:Ur.each,on:wV,attr:rV,attrTween:lV,style:MV,styleTween:zV,text:ZV,textTween:XV,remove:xV,tween:$_,delay:fV,duration:gV,ease:pV,easeVarying:vV,end:KV,[Symbol.iterator]:Ur[Symbol.iterator]};function FV(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var JV={time:null,delay:0,duration:250,ease:FV};function jV(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function $V(t){var e,n;t instanceof Fr?(e=t._id,t=t._name):(e=Z1(),(n=JV).time=Gm(),t=t==null?null:t+"");for(var a=this._groups,o=a.length,l=0;l<o;++l)for(var c=a[l],d=c.length,m,h=0;h<d;++h)(m=c[h])&&vf(m,t,e,h,c,n||jV(m,e));return new Fr(a,this._parents,t,e)}zl.prototype.interrupt=F_;zl.prototype.transition=$V;const Nc=t=>()=>t;function PV(t,{sourceEvent:e,target:n,transform:a,dispatch:o}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:a,enumerable:!0,configurable:!0},_:{value:o}})}function kr(t,e,n){this.k=t,this.x=e,this.y=n}kr.prototype={constructor:kr,scale:function(t){return t===1?this:new kr(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new kr(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var bf=new kr(1,0,0);G1.prototype=kr.prototype;function G1(t){for(;!t.__zoom;)if(!(t=t.parentNode))return bf;return t.__zoom}function cg(t){t.stopImmediatePropagation()}function $o(t){t.preventDefault(),t.stopImmediatePropagation()}function QV(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function qV(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function VS(){return this.__zoom||bf}function eO(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function tO(){return navigator.maxTouchPoints||"ontouchstart"in this}function nO(t,e,n){var a=t.invertX(e[0][0])-n[0][0],o=t.invertX(e[1][0])-n[1][0],l=t.invertY(e[0][1])-n[0][1],c=t.invertY(e[1][1])-n[1][1];return t.translate(o>a?(a+o)/2:Math.min(0,a)||Math.max(0,o),c>l?(l+c)/2:Math.min(0,l)||Math.max(0,c))}function k1(){var t=QV,e=qV,n=nO,a=eO,o=tO,l=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],d=250,m=Mc,h=mf("start","zoom","end"),p,y,v,S=500,E=150,A=0,R=10;function x(_){_.property("__zoom",VS).on("wheel.zoom",W,{passive:!1}).on("mousedown.zoom",q).on("dblclick.zoom",de).filter(o).on("touchstart.zoom",ne).on("touchmove.zoom",te).on("touchend.zoom touchcancel.zoom",le).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}x.transform=function(_,K,T,V){var Z=_.selection?_.selection():_;Z.property("__zoom",VS),_!==Z?O(_,K,T,V):Z.interrupt().each(function(){B(this,arguments).event(V).start().zoom(null,typeof K=="function"?K.apply(this,arguments):K).end()})},x.scaleBy=function(_,K,T,V){x.scaleTo(_,function(){var Z=this.__zoom.k,H=typeof K=="function"?K.apply(this,arguments):K;return Z*H},T,V)},x.scaleTo=function(_,K,T,V){x.transform(_,function(){var Z=e.apply(this,arguments),H=this.__zoom,ie=T==null?I(Z):typeof T=="function"?T.apply(this,arguments):T,C=H.invert(ie),L=typeof K=="function"?K.apply(this,arguments):K;return n(N(Y(H,L),ie,C),Z,c)},T,V)},x.translateBy=function(_,K,T,V){x.transform(_,function(){return n(this.__zoom.translate(typeof K=="function"?K.apply(this,arguments):K,typeof T=="function"?T.apply(this,arguments):T),e.apply(this,arguments),c)},null,V)},x.translateTo=function(_,K,T,V,Z){x.transform(_,function(){var H=e.apply(this,arguments),ie=this.__zoom,C=V==null?I(H):typeof V=="function"?V.apply(this,arguments):V;return n(bf.translate(C[0],C[1]).scale(ie.k).translate(typeof K=="function"?-K.apply(this,arguments):-K,typeof T=="function"?-T.apply(this,arguments):-T),H,c)},V,Z)};function Y(_,K){return K=Math.max(l[0],Math.min(l[1],K)),K===_.k?_:new kr(K,_.x,_.y)}function N(_,K,T){var V=K[0]-T[0]*_.k,Z=K[1]-T[1]*_.k;return V===_.x&&Z===_.y?_:new kr(_.k,V,Z)}function I(_){return[(+_[0][0]+ +_[1][0])/2,(+_[0][1]+ +_[1][1])/2]}function O(_,K,T,V){_.on("start.zoom",function(){B(this,arguments).event(V).start()}).on("interrupt.zoom end.zoom",function(){B(this,arguments).event(V).end()}).tween("zoom",function(){var Z=this,H=arguments,ie=B(Z,H).event(V),C=e.apply(Z,H),L=T==null?I(C):typeof T=="function"?T.apply(Z,H):T,ee=Math.max(C[1][0]-C[0][0],C[1][1]-C[0][1]),re=Z.__zoom,fe=typeof K=="function"?K.apply(Z,H):K,ge=m(re.invert(L).concat(ee/re.k),fe.invert(L).concat(ee/fe.k));return function(he){if(he===1)he=fe;else{var ce=ge(he),me=ee/ce[2];he=new kr(me,L[0]-ce[0]*me,L[1]-ce[1]*me)}ie.zoom(null,he)}})}function B(_,K,T){return!T&&_.__zooming||new M(_,K)}function M(_,K){this.that=_,this.args=K,this.active=0,this.sourceEvent=null,this.extent=e.apply(_,K),this.taps=0}M.prototype={event:function(_){return _&&(this.sourceEvent=_),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(_,K){return this.mouse&&_!=="mouse"&&(this.mouse[1]=K.invert(this.mouse[0])),this.touch0&&_!=="touch"&&(this.touch0[1]=K.invert(this.touch0[0])),this.touch1&&_!=="touch"&&(this.touch1[1]=K.invert(this.touch1[0])),this.that.__zoom=K,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(_){var K=pn(this.that).datum();h.call(_,this.that,new PV(_,{sourceEvent:this.sourceEvent,target:x,transform:this.that.__zoom,dispatch:h}),K)}};function W(_,...K){if(!t.apply(this,arguments))return;var T=B(this,K).event(_),V=this.__zoom,Z=Math.max(l[0],Math.min(l[1],V.k*Math.pow(2,a.apply(this,arguments)))),H=Wn(_);if(T.wheel)(T.mouse[0][0]!==H[0]||T.mouse[0][1]!==H[1])&&(T.mouse[1]=V.invert(T.mouse[0]=H)),clearTimeout(T.wheel);else{if(V.k===Z)return;T.mouse=[H,V.invert(H)],zc(this),T.start()}$o(_),T.wheel=setTimeout(ie,E),T.zoom("mouse",n(N(Y(V,Z),T.mouse[0],T.mouse[1]),T.extent,c));function ie(){T.wheel=null,T.end()}}function q(_,...K){if(v||!t.apply(this,arguments))return;var T=_.currentTarget,V=B(this,K,!0).event(_),Z=pn(_.view).on("mousemove.zoom",L,!0).on("mouseup.zoom",ee,!0),H=Wn(_,T),ie=_.clientX,C=_.clientY;x1(_.view),cg(_),V.mouse=[H,this.__zoom.invert(H)],zc(this),V.start();function L(re){if($o(re),!V.moved){var fe=re.clientX-ie,ge=re.clientY-C;V.moved=fe*fe+ge*ge>A}V.event(re).zoom("mouse",n(N(V.that.__zoom,V.mouse[0]=Wn(re,T),V.mouse[1]),V.extent,c))}function ee(re){Z.on("mousemove.zoom mouseup.zoom",null),T1(re.view,V.moved),$o(re),V.event(re).end()}}function de(_,...K){if(t.apply(this,arguments)){var T=this.__zoom,V=Wn(_.changedTouches?_.changedTouches[0]:_,this),Z=T.invert(V),H=T.k*(_.shiftKey?.5:2),ie=n(N(Y(T,H),V,Z),e.apply(this,K),c);$o(_),d>0?pn(this).transition().duration(d).call(O,ie,V,_):pn(this).call(x.transform,ie,V,_)}}function ne(_,...K){if(t.apply(this,arguments)){var T=_.touches,V=T.length,Z=B(this,K,_.changedTouches.length===V).event(_),H,ie,C,L;for(cg(_),ie=0;ie<V;++ie)C=T[ie],L=Wn(C,this),L=[L,this.__zoom.invert(L),C.identifier],Z.touch0?!Z.touch1&&Z.touch0[2]!==L[2]&&(Z.touch1=L,Z.taps=0):(Z.touch0=L,H=!0,Z.taps=1+!!p);p&&(p=clearTimeout(p)),H&&(Z.taps<2&&(y=L[0],p=setTimeout(function(){p=null},S)),zc(this),Z.start())}}function te(_,...K){if(this.__zooming){var T=B(this,K).event(_),V=_.changedTouches,Z=V.length,H,ie,C,L;for($o(_),H=0;H<Z;++H)ie=V[H],C=Wn(ie,this),T.touch0&&T.touch0[2]===ie.identifier?T.touch0[0]=C:T.touch1&&T.touch1[2]===ie.identifier&&(T.touch1[0]=C);if(ie=T.that.__zoom,T.touch1){var ee=T.touch0[0],re=T.touch0[1],fe=T.touch1[0],ge=T.touch1[1],he=(he=fe[0]-ee[0])*he+(he=fe[1]-ee[1])*he,ce=(ce=ge[0]-re[0])*ce+(ce=ge[1]-re[1])*ce;ie=Y(ie,Math.sqrt(he/ce)),C=[(ee[0]+fe[0])/2,(ee[1]+fe[1])/2],L=[(re[0]+ge[0])/2,(re[1]+ge[1])/2]}else if(T.touch0)C=T.touch0[0],L=T.touch0[1];else return;T.zoom("touch",n(N(ie,C,L),T.extent,c))}}function le(_,...K){if(this.__zooming){var T=B(this,K).event(_),V=_.changedTouches,Z=V.length,H,ie;for(cg(_),v&&clearTimeout(v),v=setTimeout(function(){v=null},S),H=0;H<Z;++H)ie=V[H],T.touch0&&T.touch0[2]===ie.identifier?delete T.touch0:T.touch1&&T.touch1[2]===ie.identifier&&delete T.touch1;if(T.touch1&&!T.touch0&&(T.touch0=T.touch1,delete T.touch1),T.touch0)T.touch0[1]=this.__zoom.invert(T.touch0[0]);else if(T.end(),T.taps===2&&(ie=Wn(ie,this),Math.hypot(y[0]-ie[0],y[1]-ie[1])<R)){var C=pn(this).on("dblclick.zoom");C&&C.apply(this,arguments)}}}return x.wheelDelta=function(_){return arguments.length?(a=typeof _=="function"?_:Nc(+_),x):a},x.filter=function(_){return arguments.length?(t=typeof _=="function"?_:Nc(!!_),x):t},x.touchable=function(_){return arguments.length?(o=typeof _=="function"?_:Nc(!!_),x):o},x.extent=function(_){return arguments.length?(e=typeof _=="function"?_:Nc([[+_[0][0],+_[0][1]],[+_[1][0],+_[1][1]]]),x):e},x.scaleExtent=function(_){return arguments.length?(l[0]=+_[0],l[1]=+_[1],x):[l[0],l[1]]},x.translateExtent=function(_){return arguments.length?(c[0][0]=+_[0][0],c[1][0]=+_[1][0],c[0][1]=+_[0][1],c[1][1]=+_[1][1],x):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},x.constrain=function(_){return arguments.length?(n=_,x):n},x.duration=function(_){return arguments.length?(d=+_,x):d},x.interpolate=function(_){return arguments.length?(m=_,x):m},x.on=function(){var _=h.on.apply(h,arguments);return _===h?x:_},x.clickDistance=function(_){return arguments.length?(A=(_=+_)*_,x):Math.sqrt(A)},x.tapDistance=function(_){return arguments.length?(R=+_,x):R},x}const mr={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,{id:e,sourceHandle:n,targetHandle:a})=>`Couldn't create edge for ${t} handle id: "${t==="source"?n:a}", edge id: ${e}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(t="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${t}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},xl=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],X1=["Enter"," ","Escape"],W1={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:t,x:e,y:n})=>`Moved selected node ${t}. New position, x: ${e}, y: ${n}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var Ks;(function(t){t.Strict="strict",t.Loose="loose"})(Ks||(Ks={}));var va;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(va||(va={}));var Tl;(function(t){t.Partial="partial",t.Full="full"})(Tl||(Tl={}));const K1={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null,pointer:null};var Vi;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(Vi||(Vi={}));var qc;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(qc||(qc={}));var we;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(we||(we={}));const OS={[we.Left]:we.Right,[we.Right]:we.Left,[we.Top]:we.Bottom,[we.Bottom]:we.Top};function H1(t){return t===null?null:t?"valid":"invalid"}const F1=t=>"id"in t&&"source"in t&&"target"in t,rO=t=>"id"in t&&"position"in t&&!("source"in t)&&!("target"in t),Wm=t=>"id"in t&&"internals"in t&&!("source"in t)&&!("target"in t),Yl=(t,e=[0,0])=>{const{width:n,height:a}=jr(t),o=t.origin??e,l=n*o[0],c=a*o[1];return{x:t.position.x-l,y:t.position.y-c}},iO=(t,e={nodeOrigin:[0,0]})=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const n=t.reduce((a,o)=>{const l=typeof o=="string";let c=!e.nodeLookup&&!l?o:void 0;e.nodeLookup&&(c=l?e.nodeLookup.get(o):Wm(o)?o:e.nodeLookup.get(o.id));const d=c?ef(c,e.nodeOrigin):{x:0,y:0,x2:0,y2:0};return Sf(a,d)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Af(n)},Zl=(t,e={})=>{let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0},a=!1;return t.forEach(o=>{(e.filter===void 0||e.filter(o))&&(n=Sf(n,ef(o)),a=!0)}),a?Af(n):{x:0,y:0,width:0,height:0}},Km=(t,e,[n,a,o]=[0,0,1],l=!1,c=!1)=>{const d={...kl(e,[n,a,o]),width:e.width/o,height:e.height/o},m=[];for(const h of t.values()){const{measured:p,selectable:y=!0,hidden:v=!1}=h;if(c&&!y||v)continue;const S=p.width??h.width??h.initialWidth??null,E=p.height??h.height??h.initialHeight??null,A=Cl(d,Fs(h)),R=(S??0)*(E??0),x=l&&A>0;(!h.internals.handleBounds||x||A>=R||h.dragging)&&m.push(h)}return m},aO=(t,e)=>{const n=new Set;return t.forEach(a=>{n.add(a.id)}),e.filter(a=>n.has(a.source)||n.has(a.target))};function sO(t,e){const n=new Map,a=e?.nodes?new Set(e.nodes.map(o=>o.id)):null;return t.forEach(o=>{o.measured.width&&o.measured.height&&(e?.includeHiddenNodes||!o.hidden)&&(!a||a.has(o.id))&&n.set(o.id,o)}),n}async function oO({nodes:t,width:e,height:n,panZoom:a,minZoom:o,maxZoom:l},c){if(t.size===0)return Promise.resolve(!0);const d=sO(t,c),m=Zl(d),h=Hm(m,e,n,c?.minZoom??o,c?.maxZoom??l,c?.padding??.1);return await a.setViewport(h,{duration:c?.duration,ease:c?.ease,interpolate:c?.interpolate}),Promise.resolve(!0)}function J1({nodeId:t,nextPosition:e,nodeLookup:n,nodeOrigin:a=[0,0],nodeExtent:o,onError:l}){const c=n.get(t),d=c.parentId?n.get(c.parentId):void 0,{x:m,y:h}=d?d.internals.positionAbsolute:{x:0,y:0},p=c.origin??a;let y=c.extent||o;if(c.extent==="parent"&&!c.expandParent)if(!d)l?.("005",mr.error005());else{const S=d.measured.width,E=d.measured.height;S&&E&&(y=[[m,h],[m+S,h+E]])}else d&&Js(c.extent)&&(y=[[c.extent[0][0]+m,c.extent[0][1]+h],[c.extent[1][0]+m,c.extent[1][1]+h]]);const v=Js(y)?wa(e,y,c.measured):e;return(c.measured.width===void 0||c.measured.height===void 0)&&l?.("015",mr.error015()),{position:{x:v.x-m+(c.measured.width??0)*p[0],y:v.y-h+(c.measured.height??0)*p[1]},positionAbsolute:v}}async function lO({nodesToRemove:t=[],edgesToRemove:e=[],nodes:n,edges:a,onBeforeDelete:o}){const l=new Set(t.map(v=>v.id)),c=[];for(const v of n){if(v.deletable===!1)continue;const S=l.has(v.id),E=!S&&v.parentId&&c.find(A=>A.id===v.parentId);(S||E)&&c.push(v)}const d=new Set(e.map(v=>v.id)),m=a.filter(v=>v.deletable!==!1),p=aO(c,m);for(const v of m)d.has(v.id)&&!p.find(E=>E.id===v.id)&&p.push(v);if(!o)return{edges:p,nodes:c};const y=await o({nodes:c,edges:p});return typeof y=="boolean"?y?{edges:p,nodes:c}:{edges:[],nodes:[]}:y}const Hs=(t,e=0,n=1)=>Math.min(Math.max(t,e),n),wa=(t={x:0,y:0},e,n)=>({x:Hs(t.x,e[0][0],e[1][0]-(n?.width??0)),y:Hs(t.y,e[0][1],e[1][1]-(n?.height??0))});function j1(t,e,n){const{width:a,height:o}=jr(n),{x:l,y:c}=n.internals.positionAbsolute;return wa(t,[[l,c],[l+a,c+o]],e)}const MS=(t,e,n)=>t<e?Hs(Math.abs(t-e),1,e)/e:t>n?-Hs(Math.abs(t-n),1,e)/e:0,$1=(t,e,n=15,a=40)=>{const o=MS(t.x,a,e.width-a)*n,l=MS(t.y,a,e.height-a)*n;return[o,l]},Sf=(t,e)=>({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),kg=({x:t,y:e,width:n,height:a})=>({x:t,y:e,x2:t+n,y2:e+a}),Af=({x:t,y:e,x2:n,y2:a})=>({x:t,y:e,width:n-t,height:a-e}),Fs=(t,e=[0,0])=>{const{x:n,y:a}=Wm(t)?t.internals.positionAbsolute:Yl(t,e);return{x:n,y:a,width:t.measured?.width??t.width??t.initialWidth??0,height:t.measured?.height??t.height??t.initialHeight??0}},ef=(t,e=[0,0])=>{const{x:n,y:a}=Wm(t)?t.internals.positionAbsolute:Yl(t,e);return{x:n,y:a,x2:n+(t.measured?.width??t.width??t.initialWidth??0),y2:a+(t.measured?.height??t.height??t.initialHeight??0)}},P1=(t,e)=>Af(Sf(kg(t),kg(e))),Cl=(t,e)=>{const n=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),a=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return Math.ceil(n*a)},BS=t=>$n(t.width)&&$n(t.height)&&$n(t.x)&&$n(t.y),$n=t=>!isNaN(t)&&isFinite(t),uO=(t,e)=>{},Gl=(t,e=[1,1])=>({x:e[0]*Math.round(t.x/e[0]),y:e[1]*Math.round(t.y/e[1])}),kl=({x:t,y:e},[n,a,o],l=!1,c=[1,1])=>{const d={x:(t-n)/o,y:(e-a)/o};return l?Gl(d,c):d},tf=({x:t,y:e},[n,a,o])=>({x:t*o+n,y:e*o+a});function Ss(t,e){if(typeof t=="number")return Math.floor((e-e/(1+t))*.5);if(typeof t=="string"&&t.endsWith("px")){const n=parseFloat(t);if(!Number.isNaN(n))return Math.floor(n)}if(typeof t=="string"&&t.endsWith("%")){const n=parseFloat(t);if(!Number.isNaN(n))return Math.floor(e*n*.01)}return console.error(`[React Flow] The padding value "${t}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function cO(t,e,n){if(typeof t=="string"||typeof t=="number"){const a=Ss(t,n),o=Ss(t,e);return{top:a,right:o,bottom:a,left:o,x:o*2,y:a*2}}if(typeof t=="object"){const a=Ss(t.top??t.y??0,n),o=Ss(t.bottom??t.y??0,n),l=Ss(t.left??t.x??0,e),c=Ss(t.right??t.x??0,e);return{top:a,right:c,bottom:o,left:l,x:l+c,y:a+o}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function fO(t,e,n,a,o,l){const{x:c,y:d}=tf(t,[e,n,a]),{x:m,y:h}=tf({x:t.x+t.width,y:t.y+t.height},[e,n,a]),p=o-m,y=l-h;return{left:Math.floor(c),top:Math.floor(d),right:Math.floor(p),bottom:Math.floor(y)}}const Hm=(t,e,n,a,o,l)=>{const c=cO(l,e,n),d=(e-c.x)/t.width,m=(n-c.y)/t.height,h=Math.min(d,m),p=Hs(h,a,o),y=t.x+t.width/2,v=t.y+t.height/2,S=e/2-y*p,E=n/2-v*p,A=fO(t,S,E,p,e,n),R={left:Math.min(A.left-c.left,0),top:Math.min(A.top-c.top,0),right:Math.min(A.right-c.right,0),bottom:Math.min(A.bottom-c.bottom,0)};return{x:S-R.left+R.right,y:E-R.top+R.bottom,zoom:p}},Il=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0;function Js(t){return t!=null&&t!=="parent"}function jr(t){return{width:t.measured?.width??t.width??t.initialWidth??0,height:t.measured?.height??t.height??t.initialHeight??0}}function Q1(t){return(t.measured?.width??t.width??t.initialWidth)!==void 0&&(t.measured?.height??t.height??t.initialHeight)!==void 0}function q1(t,e={width:0,height:0},n,a,o){const l={...t},c=a.get(n);if(c){const d=c.origin||o;l.x+=c.internals.positionAbsolute.x-(e.width??0)*d[0],l.y+=c.internals.positionAbsolute.y-(e.height??0)*d[1]}return l}function LS(t,e){if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0}function dO(){let t,e;return{promise:new Promise((a,o)=>{t=a,e=o}),resolve:t,reject:e}}function hO(t){return{...W1,...t||{}}}function ul(t,{snapGrid:e=[0,0],snapToGrid:n=!1,transform:a,containerBounds:o}){const{x:l,y:c}=Pn(t),d=kl({x:l-(o?.left??0),y:c-(o?.top??0)},a),{x:m,y:h}=n?Gl(d,e):d;return{xSnapped:m,ySnapped:h,...d}}const Fm=t=>({width:t.offsetWidth,height:t.offsetHeight}),ew=t=>t?.getRootNode?.()||window?.document,gO=["INPUT","SELECT","TEXTAREA"];function tw(t){const e=t.composedPath?.()?.[0]||t.target;return e?.nodeType!==1?!1:gO.includes(e.nodeName)||e.hasAttribute("contenteditable")||!!e.closest(".nokey")}const nw=t=>"clientX"in t,Pn=(t,e)=>{const n=nw(t),a=n?t.clientX:t.touches?.[0].clientX,o=n?t.clientY:t.touches?.[0].clientY;return{x:a-(e?.left??0),y:o-(e?.top??0)}},zS=(t,e,n,a,o)=>{const l=e.querySelectorAll(`.${t}`);return!l||!l.length?null:Array.from(l).map(c=>{const d=c.getBoundingClientRect();return{id:c.getAttribute("data-handleid"),type:t,nodeId:o,position:c.getAttribute("data-handlepos"),x:(d.left-n.left)/a,y:(d.top-n.top)/a,...Fm(c)}})};function rw({sourceX:t,sourceY:e,targetX:n,targetY:a,sourceControlX:o,sourceControlY:l,targetControlX:c,targetControlY:d}){const m=t*.125+o*.375+c*.375+n*.125,h=e*.125+l*.375+d*.375+a*.125,p=Math.abs(m-t),y=Math.abs(h-e);return[m,h,p,y]}function xc(t,e){return t>=0?.5*t:e*25*Math.sqrt(-t)}function US({pos:t,x1:e,y1:n,x2:a,y2:o,c:l}){switch(t){case we.Left:return[e-xc(e-a,l),n];case we.Right:return[e+xc(a-e,l),n];case we.Top:return[e,n-xc(n-o,l)];case we.Bottom:return[e,n+xc(o-n,l)]}}function iw({sourceX:t,sourceY:e,sourcePosition:n=we.Bottom,targetX:a,targetY:o,targetPosition:l=we.Top,curvature:c=.25}){const[d,m]=US({pos:n,x1:t,y1:e,x2:a,y2:o,c}),[h,p]=US({pos:l,x1:a,y1:o,x2:t,y2:e,c}),[y,v,S,E]=rw({sourceX:t,sourceY:e,targetX:a,targetY:o,sourceControlX:d,sourceControlY:m,targetControlX:h,targetControlY:p});return[`M${t},${e} C${d},${m} ${h},${p} ${a},${o}`,y,v,S,E]}function aw({sourceX:t,sourceY:e,targetX:n,targetY:a}){const o=Math.abs(n-t)/2,l=n<t?n+o:n-o,c=Math.abs(a-e)/2,d=a<e?a+c:a-c;return[l,d,o,c]}function mO({sourceNode:t,targetNode:e,selected:n=!1,zIndex:a,elevateOnSelect:o=!1}){if(a!==void 0)return a;const l=o&&n?1e3:0,c=Math.max(t.parentId||o&&t.selected?t.internals.z:0,e.parentId||o&&e.selected?e.internals.z:0);return l+c}function pO({sourceNode:t,targetNode:e,width:n,height:a,transform:o}){const l=Sf(ef(t),ef(e));l.x===l.x2&&(l.x2+=1),l.y===l.y2&&(l.y2+=1);const c={x:-o[0]/o[2],y:-o[1]/o[2],width:n/o[2],height:a/o[2]};return Cl(c,Af(l))>0}const yO=({source:t,sourceHandle:e,target:n,targetHandle:a})=>`xy-edge__${t}${e||""}-${n}${a||""}`,vO=(t,e)=>e.some(n=>n.source===t.source&&n.target===t.target&&(n.sourceHandle===t.sourceHandle||!n.sourceHandle&&!t.sourceHandle)&&(n.targetHandle===t.targetHandle||!n.targetHandle&&!t.targetHandle)),bO=(t,e)=>{if(!t.source||!t.target)return e;let n;return F1(t)?n={...t}:n={...t,id:yO(t)},vO(n,e)?e:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,e.concat(n))};function sw({sourceX:t,sourceY:e,targetX:n,targetY:a}){const[o,l,c,d]=aw({sourceX:t,sourceY:e,targetX:n,targetY:a});return[`M ${t},${e}L ${n},${a}`,o,l,c,d]}const YS={[we.Left]:{x:-1,y:0},[we.Right]:{x:1,y:0},[we.Top]:{x:0,y:-1},[we.Bottom]:{x:0,y:1}},SO=({source:t,sourcePosition:e=we.Bottom,target:n})=>e===we.Left||e===we.Right?t.x<n.x?{x:1,y:0}:{x:-1,y:0}:t.y<n.y?{x:0,y:1}:{x:0,y:-1},ZS=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));function AO({source:t,sourcePosition:e=we.Bottom,target:n,targetPosition:a=we.Top,center:o,offset:l,stepPosition:c}){const d=YS[e],m=YS[a],h={x:t.x+d.x*l,y:t.y+d.y*l},p={x:n.x+m.x*l,y:n.y+m.y*l},y=SO({source:h,sourcePosition:e,target:p}),v=y.x!==0?"x":"y",S=y[v];let E=[],A,R;const x={x:0,y:0},Y={x:0,y:0},[,,N,I]=aw({sourceX:t.x,sourceY:t.y,targetX:n.x,targetY:n.y});if(d[v]*m[v]===-1){v==="x"?(A=o.x??h.x+(p.x-h.x)*c,R=o.y??(h.y+p.y)/2):(A=o.x??(h.x+p.x)/2,R=o.y??h.y+(p.y-h.y)*c);const B=[{x:A,y:h.y},{x:A,y:p.y}],M=[{x:h.x,y:R},{x:p.x,y:R}];d[v]===S?E=v==="x"?B:M:E=v==="x"?M:B}else{const B=[{x:h.x,y:p.y}],M=[{x:p.x,y:h.y}];if(v==="x"?E=d.x===S?M:B:E=d.y===S?B:M,e===a){const te=Math.abs(t[v]-n[v]);if(te<=l){const le=Math.min(l-1,l-te);d[v]===S?x[v]=(h[v]>t[v]?-1:1)*le:Y[v]=(p[v]>n[v]?-1:1)*le}}if(e!==a){const te=v==="x"?"y":"x",le=d[v]===m[te],_=h[te]>p[te],K=h[te]<p[te];(d[v]===1&&(!le&&_||le&&K)||d[v]!==1&&(!le&&K||le&&_))&&(E=v==="x"?B:M)}const W={x:h.x+x.x,y:h.y+x.y},q={x:p.x+Y.x,y:p.y+Y.y},de=Math.max(Math.abs(W.x-E[0].x),Math.abs(q.x-E[0].x)),ne=Math.max(Math.abs(W.y-E[0].y),Math.abs(q.y-E[0].y));de>=ne?(A=(W.x+q.x)/2,R=E[0].y):(A=E[0].x,R=(W.y+q.y)/2)}return[[t,{x:h.x+x.x,y:h.y+x.y},...E,{x:p.x+Y.x,y:p.y+Y.y},n],A,R,N,I]}function EO(t,e,n,a){const o=Math.min(ZS(t,e)/2,ZS(e,n)/2,a),{x:l,y:c}=e;if(t.x===l&&l===n.x||t.y===c&&c===n.y)return`L${l} ${c}`;if(t.y===c){const h=t.x<n.x?-1:1,p=t.y<n.y?1:-1;return`L ${l+o*h},${c}Q ${l},${c} ${l},${c+o*p}`}const d=t.x<n.x?1:-1,m=t.y<n.y?-1:1;return`L ${l},${c+o*m}Q ${l},${c} ${l+o*d},${c}`}function Xg({sourceX:t,sourceY:e,sourcePosition:n=we.Bottom,targetX:a,targetY:o,targetPosition:l=we.Top,borderRadius:c=5,centerX:d,centerY:m,offset:h=20,stepPosition:p=.5}){const[y,v,S,E,A]=AO({source:{x:t,y:e},sourcePosition:n,target:{x:a,y:o},targetPosition:l,center:{x:d,y:m},offset:h,stepPosition:p});return[y.reduce((x,Y,N)=>{let I="";return N>0&&N<y.length-1?I=EO(y[N-1],Y,y[N+1],c):I=`${N===0?"M":"L"}${Y.x} ${Y.y}`,x+=I,x},""),v,S,E,A]}function GS(t){return t&&!!(t.internals.handleBounds||t.handles?.length)&&!!(t.measured.width||t.width||t.initialWidth)}function wO(t){const{sourceNode:e,targetNode:n}=t;if(!GS(e)||!GS(n))return null;const a=e.internals.handleBounds||kS(e.handles),o=n.internals.handleBounds||kS(n.handles),l=XS(a?.source??[],t.sourceHandle),c=XS(t.connectionMode===Ks.Strict?o?.target??[]:(o?.target??[]).concat(o?.source??[]),t.targetHandle);if(!l||!c)return t.onError?.("008",mr.error008(l?"target":"source",{id:t.id,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle})),null;const d=l?.position||we.Bottom,m=c?.position||we.Top,h=Rl(e,l,d),p=Rl(n,c,m);return{sourceX:h.x,sourceY:h.y,targetX:p.x,targetY:p.y,sourcePosition:d,targetPosition:m}}function kS(t){if(!t)return null;const e=[],n=[];for(const a of t)a.width=a.width??1,a.height=a.height??1,a.type==="source"?e.push(a):a.type==="target"&&n.push(a);return{source:e,target:n}}function Rl(t,e,n=we.Left,a=!1){const o=(e?.x??0)+t.internals.positionAbsolute.x,l=(e?.y??0)+t.internals.positionAbsolute.y,{width:c,height:d}=e??jr(t);if(a)return{x:o+c/2,y:l+d/2};switch(e?.position??n){case we.Top:return{x:o+c/2,y:l};case we.Right:return{x:o+c,y:l+d/2};case we.Bottom:return{x:o+c/2,y:l+d};case we.Left:return{x:o,y:l+d/2}}}function XS(t,e){return t&&(e?t.find(n=>n.id===e):t[0])||null}function Wg(t,e){return t?typeof t=="string"?t:`${e?`${e}__`:""}${Object.keys(t).sort().map(a=>`${a}=${t[a]}`).join("&")}`:""}function NO(t,{id:e,defaultColor:n,defaultMarkerStart:a,defaultMarkerEnd:o}){const l=new Set;return t.reduce((c,d)=>([d.markerStart||a,d.markerEnd||o].forEach(m=>{if(m&&typeof m=="object"){const h=Wg(m,e);l.has(h)||(c.push({id:h,color:m.color||n,...m}),l.add(h))}}),c),[]).sort((c,d)=>c.id.localeCompare(d.id))}const ow=1e3,xO=10,Jm={nodeOrigin:[0,0],nodeExtent:xl,elevateNodesOnSelect:!0,defaults:{}},TO={...Jm,checkEquality:!0};function jm(t,e){const n={...t};for(const a in e)e[a]!==void 0&&(n[a]=e[a]);return n}function CO(t,e,n){const a=jm(Jm,n);for(const o of t.values())if(o.parentId)$m(o,t,e,a);else{const l=Yl(o,a.nodeOrigin),c=Js(o.extent)?o.extent:a.nodeExtent,d=wa(l,c,jr(o));o.internals.positionAbsolute=d}}function IO(t,e){if(!t.handles)return t.measured?e?.internals.handleBounds:void 0;const n=[],a=[];for(const o of t.handles){const l={id:o.id,width:o.width??1,height:o.height??1,nodeId:t.id,x:o.x,y:o.y,position:o.position,type:o.type};o.type==="source"?n.push(l):o.type==="target"&&a.push(l)}return{source:n,target:a}}function Kg(t,e,n,a){const o=jm(TO,a);let l={i:-1},c=t.length>0;const d=new Map(e),m=o?.elevateNodesOnSelect?ow:0;e.clear(),n.clear();for(const h of t){let p=d.get(h.id);if(o.checkEquality&&h===p?.internals.userNode)e.set(h.id,p);else{const y=Yl(h,o.nodeOrigin),v=Js(h.extent)?h.extent:o.nodeExtent,S=wa(y,v,jr(h));p={...o.defaults,...h,measured:{width:h.measured?.width,height:h.measured?.height},internals:{positionAbsolute:S,handleBounds:IO(h,p),z:lw(h,m),userNode:h}},e.set(h.id,p)}(p.measured===void 0||p.measured.width===void 0||p.measured.height===void 0)&&!p.hidden&&(c=!1),h.parentId&&$m(p,e,n,a,l)}return c}function RO(t,e){if(!t.parentId)return;const n=e.get(t.parentId);n?n.set(t.id,t):e.set(t.parentId,new Map([[t.id,t]]))}function $m(t,e,n,a,o){const{elevateNodesOnSelect:l,nodeOrigin:c,nodeExtent:d}=jm(Jm,a),m=t.parentId,h=e.get(m);if(!h){console.warn(`Parent node ${m} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}RO(t,n),o&&!h.parentId&&h.internals.rootParentIndex===void 0&&(h.internals.rootParentIndex=++o.i,h.internals.z=h.internals.z+o.i*xO),o&&h.internals.rootParentIndex!==void 0&&(o.i=h.internals.rootParentIndex);const p=l?ow:0,{x:y,y:v,z:S}=DO(t,h,c,d,p),{positionAbsolute:E}=t.internals,A=y!==E.x||v!==E.y;(A||S!==t.internals.z)&&e.set(t.id,{...t,internals:{...t.internals,positionAbsolute:A?{x:y,y:v}:E,z:S}})}function lw(t,e){return($n(t.zIndex)?t.zIndex:0)+(t.selected?e:0)}function DO(t,e,n,a,o){const{x:l,y:c}=e.internals.positionAbsolute,d=jr(t),m=Yl(t,n),h=Js(t.extent)?wa(m,t.extent,d):m;let p=wa({x:l+h.x,y:c+h.y},a,d);t.extent==="parent"&&(p=j1(p,d,e));const y=lw(t,o),v=e.internals.z??0;return{x:p.x,y:p.y,z:v>=y?v+1:y}}function Pm(t,e,n,a=[0,0]){const o=[],l=new Map;for(const c of t){const d=e.get(c.parentId);if(!d)continue;const m=l.get(c.parentId)?.expandedRect??Fs(d),h=P1(m,c.rect);l.set(c.parentId,{expandedRect:h,parent:d})}return l.size>0&&l.forEach(({expandedRect:c,parent:d},m)=>{const h=d.internals.positionAbsolute,p=jr(d),y=d.origin??a,v=c.x<h.x?Math.round(Math.abs(h.x-c.x)):0,S=c.y<h.y?Math.round(Math.abs(h.y-c.y)):0,E=Math.max(p.width,Math.round(c.width)),A=Math.max(p.height,Math.round(c.height)),R=(E-p.width)*y[0],x=(A-p.height)*y[1];(v>0||S>0||R||x)&&(o.push({id:m,type:"position",position:{x:d.position.x-v+R,y:d.position.y-S+x}}),n.get(m)?.forEach(Y=>{t.some(N=>N.id===Y.id)||o.push({id:Y.id,type:"position",position:{x:Y.position.x+v,y:Y.position.y+S}})})),(p.width<c.width||p.height<c.height||v||S)&&o.push({id:m,type:"dimensions",setAttributes:!0,dimensions:{width:E+(v?y[0]*v-R:0),height:A+(S?y[1]*S-x:0)}})}),o}function _O(t,e,n,a,o,l){const c=a?.querySelector(".xyflow__viewport");let d=!1;if(!c)return{changes:[],updatedInternals:d};const m=[],h=window.getComputedStyle(c),{m22:p}=new window.DOMMatrixReadOnly(h.transform),y=[];for(const v of t.values()){const S=e.get(v.id);if(!S)continue;if(S.hidden){e.set(S.id,{...S,internals:{...S.internals,handleBounds:void 0}}),d=!0;continue}const E=Fm(v.nodeElement),A=S.measured.width!==E.width||S.measured.height!==E.height;if(!!(E.width&&E.height&&(A||!S.internals.handleBounds||v.force))){const x=v.nodeElement.getBoundingClientRect(),Y=Js(S.extent)?S.extent:l;let{positionAbsolute:N}=S.internals;S.parentId&&S.extent==="parent"?N=j1(N,E,e.get(S.parentId)):Y&&(N=wa(N,Y,E));const I={...S,measured:E,internals:{...S.internals,positionAbsolute:N,handleBounds:{source:zS("source",v.nodeElement,x,p,S.id),target:zS("target",v.nodeElement,x,p,S.id)}}};e.set(S.id,I),S.parentId&&$m(I,e,n,{nodeOrigin:o}),d=!0,A&&(m.push({id:S.id,type:"dimensions",dimensions:E}),S.expandParent&&S.parentId&&y.push({id:S.id,parentId:S.parentId,rect:Fs(I,o)}))}}if(y.length>0){const v=Pm(y,e,n,o);m.push(...v)}return{changes:m,updatedInternals:d}}async function VO({delta:t,panZoom:e,transform:n,translateExtent:a,width:o,height:l}){if(!e||!t.x&&!t.y)return Promise.resolve(!1);const c=await e.setViewportConstrained({x:n[0]+t.x,y:n[1]+t.y,zoom:n[2]},[[0,0],[o,l]],a),d=!!c&&(c.x!==n[0]||c.y!==n[1]||c.k!==n[2]);return Promise.resolve(d)}function WS(t,e,n,a,o,l){let c=o;const d=a.get(c)||new Map;a.set(c,d.set(n,e)),c=`${o}-${t}`;const m=a.get(c)||new Map;if(a.set(c,m.set(n,e)),l){c=`${o}-${t}-${l}`;const h=a.get(c)||new Map;a.set(c,h.set(n,e))}}function uw(t,e,n){t.clear(),e.clear();for(const a of n){const{source:o,target:l,sourceHandle:c=null,targetHandle:d=null}=a,m={edgeId:a.id,source:o,target:l,sourceHandle:c,targetHandle:d},h=`${o}-${c}--${l}-${d}`,p=`${l}-${d}--${o}-${c}`;WS("source",m,p,t,o,c),WS("target",m,h,t,l,d),e.set(a.id,a)}}function cw(t,e){if(!t.parentId)return!1;const n=e.get(t.parentId);return n?n.selected?!0:cw(n,e):!1}function KS(t,e,n){let a=t;do{if(a?.matches?.(e))return!0;if(a===n)return!1;a=a?.parentElement}while(a);return!1}function OO(t,e,n,a){const o=new Map;for(const[l,c]of t)if((c.selected||c.id===a)&&(!c.parentId||!cw(c,t))&&(c.draggable||e&&typeof c.draggable>"u")){const d=t.get(l);d&&o.set(l,{id:l,position:d.position||{x:0,y:0},distance:{x:n.x-d.internals.positionAbsolute.x,y:n.y-d.internals.positionAbsolute.y},extent:d.extent,parentId:d.parentId,origin:d.origin,expandParent:d.expandParent,internals:{positionAbsolute:d.internals.positionAbsolute||{x:0,y:0}},measured:{width:d.measured.width??0,height:d.measured.height??0}})}return o}function fg({nodeId:t,dragItems:e,nodeLookup:n,dragging:a=!0}){const o=[];for(const[c,d]of e){const m=n.get(c)?.internals.userNode;m&&o.push({...m,position:d.position,dragging:a})}if(!t)return[o[0],o];const l=n.get(t)?.internals.userNode;return[l?{...l,position:e.get(t)?.position||l.position,dragging:a}:o[0],o]}function MO({dragItems:t,snapGrid:e,x:n,y:a}){const o=t.values().next().value;if(!o)return null;const l={x:n-o.distance.x,y:a-o.distance.y},c=Gl(l,e);return{x:c.x-l.x,y:c.y-l.y}}function BO({onNodeMouseDown:t,getStoreItems:e,onDragStart:n,onDrag:a,onDragStop:o}){let l={x:null,y:null},c=0,d=new Map,m=!1,h={x:0,y:0},p=null,y=!1,v=null,S=!1,E=!1,A=null;function R({noDragClassName:Y,handleSelector:N,domNode:I,isSelectable:O,nodeId:B,nodeClickDistance:M=0}){v=pn(I);function W({x:te,y:le}){const{nodeLookup:_,nodeExtent:K,snapGrid:T,snapToGrid:V,nodeOrigin:Z,onNodeDrag:H,onSelectionDrag:ie,onError:C,updateNodePositions:L}=e();l={x:te,y:le};let ee=!1;const re=d.size>1,fe=re&&K?kg(Zl(d)):null,ge=re&&V?MO({dragItems:d,snapGrid:T,x:te,y:le}):null;for(const[he,ce]of d){if(!_.has(he))continue;let me={x:te-ce.distance.x,y:le-ce.distance.y};V&&(me=ge?{x:Math.round(me.x+ge.x),y:Math.round(me.y+ge.y)}:Gl(me,T));let _e=null;if(re&&K&&!ce.extent&&fe){const{positionAbsolute:Te}=ce.internals,Ye=Te.x-fe.x+K[0][0],Qe=Te.x+ce.measured.width-fe.x2+K[1][0],qe=Te.y-fe.y+K[0][1],Tt=Te.y+ce.measured.height-fe.y2+K[1][1];_e=[[Ye,qe],[Qe,Tt]]}const{position:Re,positionAbsolute:Ne}=J1({nodeId:he,nextPosition:me,nodeLookup:_,nodeExtent:_e||K,nodeOrigin:Z,onError:C});ee=ee||ce.position.x!==Re.x||ce.position.y!==Re.y,ce.position=Re,ce.internals.positionAbsolute=Ne}if(E=E||ee,!!ee&&(L(d,!0),A&&(a||H||!B&&ie))){const[he,ce]=fg({nodeId:B,dragItems:d,nodeLookup:_});a?.(A,d,he,ce),H?.(A,he,ce),B||ie?.(A,ce)}}async function q(){if(!p)return;const{transform:te,panBy:le,autoPanSpeed:_,autoPanOnNodeDrag:K}=e();if(!K){m=!1,cancelAnimationFrame(c);return}const[T,V]=$1(h,p,_);(T!==0||V!==0)&&(l.x=(l.x??0)-T/te[2],l.y=(l.y??0)-V/te[2],await le({x:T,y:V})&&W(l)),c=requestAnimationFrame(q)}function de(te){const{nodeLookup:le,multiSelectionActive:_,nodesDraggable:K,transform:T,snapGrid:V,snapToGrid:Z,selectNodesOnDrag:H,onNodeDragStart:ie,onSelectionDragStart:C,unselectNodesAndEdges:L}=e();y=!0,(!H||!O)&&!_&&B&&(le.get(B)?.selected||L()),O&&H&&B&&t?.(B);const ee=ul(te.sourceEvent,{transform:T,snapGrid:V,snapToGrid:Z,containerBounds:p});if(l=ee,d=OO(le,K,ee,B),d.size>0&&(n||ie||!B&&C)){const[re,fe]=fg({nodeId:B,dragItems:d,nodeLookup:le});n?.(te.sourceEvent,d,re,fe),ie?.(te.sourceEvent,re,fe),B||C?.(te.sourceEvent,fe)}}const ne=C1().clickDistance(M).on("start",te=>{const{domNode:le,nodeDragThreshold:_,transform:K,snapGrid:T,snapToGrid:V}=e();p=le?.getBoundingClientRect()||null,S=!1,E=!1,A=te.sourceEvent,_===0&&de(te),l=ul(te.sourceEvent,{transform:K,snapGrid:T,snapToGrid:V,containerBounds:p}),h=Pn(te.sourceEvent,p)}).on("drag",te=>{const{autoPanOnNodeDrag:le,transform:_,snapGrid:K,snapToGrid:T,nodeDragThreshold:V,nodeLookup:Z}=e(),H=ul(te.sourceEvent,{transform:_,snapGrid:K,snapToGrid:T,containerBounds:p});if(A=te.sourceEvent,(te.sourceEvent.type==="touchmove"&&te.sourceEvent.touches.length>1||B&&!Z.has(B))&&(S=!0),!S){if(!m&&le&&y&&(m=!0,q()),!y){const ie=Pn(te.sourceEvent,p),C=ie.x-h.x,L=ie.y-h.y;Math.sqrt(C*C+L*L)>V&&de(te)}(l.x!==H.xSnapped||l.y!==H.ySnapped)&&d&&y&&(h=Pn(te.sourceEvent,p),W(H))}}).on("end",te=>{if(!(!y||S)&&(m=!1,y=!1,cancelAnimationFrame(c),d.size>0)){const{nodeLookup:le,updateNodePositions:_,onNodeDragStop:K,onSelectionDragStop:T}=e();if(E&&(_(d,!1),E=!1),o||K||!B&&T){const[V,Z]=fg({nodeId:B,dragItems:d,nodeLookup:le,dragging:!1});o?.(te.sourceEvent,d,V,Z),K?.(te.sourceEvent,V,Z),B||T?.(te.sourceEvent,Z)}}}).filter(te=>{const le=te.target;return!te.button&&(!Y||!KS(le,`.${Y}`,I))&&(!N||KS(le,N,I))});v.call(ne)}function x(){v?.on(".drag",null)}return{update:R,destroy:x}}function LO(t,e,n){const a=[],o={x:t.x-n,y:t.y-n,width:n*2,height:n*2};for(const l of e.values())Cl(o,Fs(l))>0&&a.push(l);return a}const zO=250;function UO(t,e,n,a){let o=[],l=1/0;const c=LO(t,n,e+zO);for(const d of c){const m=[...d.internals.handleBounds?.source??[],...d.internals.handleBounds?.target??[]];for(const h of m){if(a.nodeId===h.nodeId&&a.type===h.type&&a.id===h.id)continue;const{x:p,y}=Rl(d,h,h.position,!0),v=Math.sqrt(Math.pow(p-t.x,2)+Math.pow(y-t.y,2));v>e||(v<l?(o=[{...h,x:p,y}],l=v):v===l&&o.push({...h,x:p,y}))}}if(!o.length)return null;if(o.length>1){const d=a.type==="source"?"target":"source";return o.find(m=>m.type===d)??o[0]}return o[0]}function fw(t,e,n,a,o,l=!1){const c=a.get(t);if(!c)return null;const d=o==="strict"?c.internals.handleBounds?.[e]:[...c.internals.handleBounds?.source??[],...c.internals.handleBounds?.target??[]],m=(n?d?.find(h=>h.id===n):d?.[0])??null;return m&&l?{...m,...Rl(c,m,m.position,!0)}:m}function dw(t,e){return t||(e?.classList.contains("target")?"target":e?.classList.contains("source")?"source":null)}function YO(t,e){let n=null;return e?n=!0:t&&!e&&(n=!1),n}const hw=()=>!0;function ZO(t,{connectionMode:e,connectionRadius:n,handleId:a,nodeId:o,edgeUpdaterType:l,isTarget:c,domNode:d,nodeLookup:m,lib:h,autoPanOnConnect:p,flowId:y,panBy:v,cancelConnection:S,onConnectStart:E,onConnect:A,onConnectEnd:R,isValidConnection:x=hw,onReconnectEnd:Y,updateConnection:N,getTransform:I,getFromHandle:O,autoPanSpeed:B,dragThreshold:M=1,handleDomNode:W}){const q=ew(t.target);let de=0,ne;const{x:te,y:le}=Pn(t),_=dw(l,W),K=d?.getBoundingClientRect();let T=!1;if(!K||!_)return;const V=fw(o,_,a,m,e);if(!V)return;let Z=Pn(t,K),H=!1,ie=null,C=!1,L=null;function ee(){if(!p||!K)return;const[Re,Ne]=$1(Z,K,B);v({x:Re,y:Ne}),de=requestAnimationFrame(ee)}const re={...V,nodeId:o,type:_,position:V.position},fe=m.get(o);let he={inProgress:!0,isValid:null,from:Rl(fe,re,we.Left,!0),fromHandle:re,fromPosition:re.position,fromNode:fe,to:Z,toHandle:null,toPosition:OS[re.position],toNode:null,pointer:Z};function ce(){T=!0,N(he),E?.(t,{nodeId:o,handleId:a,handleType:_})}M===0&&ce();function me(Re){if(!T){const{x:Qe,y:qe}=Pn(Re),Tt=Qe-te,Sn=qe-le;if(!(Tt*Tt+Sn*Sn>M*M))return;ce()}if(!O()||!re){_e(Re);return}const Ne=I();Z=Pn(Re,K),ne=UO(kl(Z,Ne,!1,[1,1]),n,m,re),H||(ee(),H=!0);const Te=gw(Re,{handle:ne,connectionMode:e,fromNodeId:o,fromHandleId:a,fromType:c?"target":"source",isValidConnection:x,doc:q,lib:h,flowId:y,nodeLookup:m});L=Te.handleDomNode,ie=Te.connection,C=YO(!!ne,Te.isValid);const Ye={...he,isValid:C,to:Te.toHandle&&C?tf({x:Te.toHandle.x,y:Te.toHandle.y},Ne):Z,toHandle:Te.toHandle,toPosition:C&&Te.toHandle?Te.toHandle.position:OS[re.position],toNode:Te.toHandle?m.get(Te.toHandle.nodeId):null,pointer:Z};N(Ye),he=Ye}function _e(Re){if(!("touches"in Re&&Re.touches.length>0)){if(T){(ne||L)&&ie&&C&&A?.(ie);const{inProgress:Ne,...Te}=he,Ye={...Te,toPosition:he.toHandle?he.toPosition:null};R?.(Re,Ye),l&&Y?.(Re,Ye)}S(),cancelAnimationFrame(de),H=!1,C=!1,ie=null,L=null,q.removeEventListener("mousemove",me),q.removeEventListener("mouseup",_e),q.removeEventListener("touchmove",me),q.removeEventListener("touchend",_e)}}q.addEventListener("mousemove",me),q.addEventListener("mouseup",_e),q.addEventListener("touchmove",me),q.addEventListener("touchend",_e)}function gw(t,{handle:e,connectionMode:n,fromNodeId:a,fromHandleId:o,fromType:l,doc:c,lib:d,flowId:m,isValidConnection:h=hw,nodeLookup:p}){const y=l==="target",v=e?c.querySelector(`.${d}-flow__handle[data-id="${m}-${e?.nodeId}-${e?.id}-${e?.type}"]`):null,{x:S,y:E}=Pn(t),A=c.elementFromPoint(S,E),R=A?.classList.contains(`${d}-flow__handle`)?A:v,x={handleDomNode:R,isValid:!1,connection:null,toHandle:null};if(R){const Y=dw(void 0,R),N=R.getAttribute("data-nodeid"),I=R.getAttribute("data-handleid"),O=R.classList.contains("connectable"),B=R.classList.contains("connectableend");if(!N||!Y)return x;const M={source:y?N:a,sourceHandle:y?I:o,target:y?a:N,targetHandle:y?o:I};x.connection=M;const q=O&&B&&(n===Ks.Strict?y&&Y==="source"||!y&&Y==="target":N!==a||I!==o);x.isValid=q&&h(M),x.toHandle=fw(N,Y,I,p,n,!0)}return x}const Hg={onPointerDown:ZO,isValid:gw};function GO({domNode:t,panZoom:e,getTransform:n,getViewScale:a}){const o=pn(t);function l({translateExtent:d,width:m,height:h,zoomStep:p=1,pannable:y=!0,zoomable:v=!0,inversePan:S=!1}){const E=N=>{if(N.sourceEvent.type!=="wheel"||!e)return;const I=n(),O=N.sourceEvent.ctrlKey&&Il()?10:1,B=-N.sourceEvent.deltaY*(N.sourceEvent.deltaMode===1?.05:N.sourceEvent.deltaMode?1:.002)*p,M=I[2]*Math.pow(2,B*O);e.scaleTo(M)};let A=[0,0];const R=N=>{(N.sourceEvent.type==="mousedown"||N.sourceEvent.type==="touchstart")&&(A=[N.sourceEvent.clientX??N.sourceEvent.touches[0].clientX,N.sourceEvent.clientY??N.sourceEvent.touches[0].clientY])},x=N=>{const I=n();if(N.sourceEvent.type!=="mousemove"&&N.sourceEvent.type!=="touchmove"||!e)return;const O=[N.sourceEvent.clientX??N.sourceEvent.touches[0].clientX,N.sourceEvent.clientY??N.sourceEvent.touches[0].clientY],B=[O[0]-A[0],O[1]-A[1]];A=O;const M=a()*Math.max(I[2],Math.log(I[2]))*(S?-1:1),W={x:I[0]-B[0]*M,y:I[1]-B[1]*M},q=[[0,0],[m,h]];e.setViewportConstrained({x:W.x,y:W.y,zoom:I[2]},q,d)},Y=k1().on("start",R).on("zoom",y?x:null).on("zoom.wheel",v?E:null);o.call(Y,{})}function c(){o.on("zoom",null)}return{update:l,destroy:c,pointer:Wn}}const Ef=t=>({x:t.x,y:t.y,zoom:t.k}),dg=({x:t,y:e,zoom:n})=>bf.translate(t,e).scale(n),xs=(t,e)=>t.target.closest(`.${e}`),mw=(t,e)=>e===2&&Array.isArray(t)&&t.includes(2),kO=t=>((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2,hg=(t,e=0,n=kO,a=()=>{})=>{const o=typeof e=="number"&&e>0;return o||a(),o?t.transition().duration(e).ease(n).on("end",a):t},pw=t=>{const e=t.ctrlKey&&Il()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*e};function XO({zoomPanValues:t,noWheelClassName:e,d3Selection:n,d3Zoom:a,panOnScrollMode:o,panOnScrollSpeed:l,zoomOnPinch:c,onPanZoomStart:d,onPanZoom:m,onPanZoomEnd:h}){return p=>{if(xs(p,e))return p.ctrlKey&&p.preventDefault(),!1;p.preventDefault(),p.stopImmediatePropagation();const y=n.property("__zoom").k||1;if(p.ctrlKey&&c){const R=Wn(p),x=pw(p),Y=y*Math.pow(2,x);a.scaleTo(n,Y,R,p);return}const v=p.deltaMode===1?20:1;let S=o===va.Vertical?0:p.deltaX*v,E=o===va.Horizontal?0:p.deltaY*v;!Il()&&p.shiftKey&&o!==va.Vertical&&(S=p.deltaY*v,E=0),a.translateBy(n,-(S/y)*l,-(E/y)*l,{internal:!0});const A=Ef(n.property("__zoom"));clearTimeout(t.panScrollTimeout),t.isPanScrolling?(m?.(p,A),t.panScrollTimeout=setTimeout(()=>{h?.(p,A),t.isPanScrolling=!1},150)):(t.isPanScrolling=!0,d?.(p,A))}}function WO({noWheelClassName:t,preventScrolling:e,d3ZoomHandler:n}){return function(a,o){const l=a.type==="wheel",c=!e&&l&&!a.ctrlKey,d=xs(a,t);if(a.ctrlKey&&l&&d&&a.preventDefault(),c||d)return null;a.preventDefault(),n.call(this,a,o)}}function KO({zoomPanValues:t,onDraggingChange:e,onPanZoomStart:n}){return a=>{if(a.sourceEvent?.internal)return;const o=Ef(a.transform);t.mouseButton=a.sourceEvent?.button||0,t.isZoomingOrPanning=!0,t.prevViewport=o,a.sourceEvent?.type==="mousedown"&&e(!0),n&&n?.(a.sourceEvent,o)}}function HO({zoomPanValues:t,panOnDrag:e,onPaneContextMenu:n,onTransformChange:a,onPanZoom:o}){return l=>{t.usedRightMouseButton=!!(n&&mw(e,t.mouseButton??0)),l.sourceEvent?.sync||a([l.transform.x,l.transform.y,l.transform.k]),o&&!l.sourceEvent?.internal&&o?.(l.sourceEvent,Ef(l.transform))}}function FO({zoomPanValues:t,panOnDrag:e,panOnScroll:n,onDraggingChange:a,onPanZoomEnd:o,onPaneContextMenu:l}){return c=>{if(!c.sourceEvent?.internal&&(t.isZoomingOrPanning=!1,l&&mw(e,t.mouseButton??0)&&!t.usedRightMouseButton&&c.sourceEvent&&l(c.sourceEvent),t.usedRightMouseButton=!1,a(!1),o)){const d=Ef(c.transform);t.prevViewport=d,clearTimeout(t.timerId),t.timerId=setTimeout(()=>{o?.(c.sourceEvent,d)},n?150:0)}}}function JO({zoomActivationKeyPressed:t,zoomOnScroll:e,zoomOnPinch:n,panOnDrag:a,panOnScroll:o,zoomOnDoubleClick:l,userSelectionActive:c,noWheelClassName:d,noPanClassName:m,lib:h,connectionInProgress:p}){return y=>{const v=t||e,S=n&&y.ctrlKey,E=y.type==="wheel";if(y.button===1&&y.type==="mousedown"&&(xs(y,`${h}-flow__node`)||xs(y,`${h}-flow__edge`)))return!0;if(!a&&!v&&!o&&!l&&!n||c||p&&!E||xs(y,d)&&E||xs(y,m)&&(!E||o&&E&&!t)||!n&&y.ctrlKey&&E)return!1;if(!n&&y.type==="touchstart"&&y.touches?.length>1)return y.preventDefault(),!1;if(!v&&!o&&!S&&E||!a&&(y.type==="mousedown"||y.type==="touchstart")||Array.isArray(a)&&!a.includes(y.button)&&y.type==="mousedown")return!1;const A=Array.isArray(a)&&a.includes(y.button)||!y.button||y.button<=1;return(!y.ctrlKey||E)&&A}}function jO({domNode:t,minZoom:e,maxZoom:n,translateExtent:a,viewport:o,onPanZoom:l,onPanZoomStart:c,onPanZoomEnd:d,onDraggingChange:m}){const h={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},p=t.getBoundingClientRect(),y=k1().scaleExtent([e,n]).translateExtent(a),v=pn(t).call(y);Y({x:o.x,y:o.y,zoom:Hs(o.zoom,e,n)},[[0,0],[p.width,p.height]],a);const S=v.on("wheel.zoom"),E=v.on("dblclick.zoom");y.wheelDelta(pw);function A(ne,te){return v?new Promise(le=>{y?.interpolate(te?.interpolate==="linear"?ll:Mc).transform(hg(v,te?.duration,te?.ease,()=>le(!0)),ne)}):Promise.resolve(!1)}function R({noWheelClassName:ne,noPanClassName:te,onPaneContextMenu:le,userSelectionActive:_,panOnScroll:K,panOnDrag:T,panOnScrollMode:V,panOnScrollSpeed:Z,preventScrolling:H,zoomOnPinch:ie,zoomOnScroll:C,zoomOnDoubleClick:L,zoomActivationKeyPressed:ee,lib:re,onTransformChange:fe,connectionInProgress:ge,paneClickDistance:he,selectionOnDrag:ce}){_&&!h.isZoomingOrPanning&&x();const me=K&&!ee&&!_;y.clickDistance(ce?1/0:!$n(he)||he<0?0:he);const _e=me?XO({zoomPanValues:h,noWheelClassName:ne,d3Selection:v,d3Zoom:y,panOnScrollMode:V,panOnScrollSpeed:Z,zoomOnPinch:ie,onPanZoomStart:c,onPanZoom:l,onPanZoomEnd:d}):WO({noWheelClassName:ne,preventScrolling:H,d3ZoomHandler:S});if(v.on("wheel.zoom",_e,{passive:!1}),!_){const Ne=KO({zoomPanValues:h,onDraggingChange:m,onPanZoomStart:c});y.on("start",Ne);const Te=HO({zoomPanValues:h,panOnDrag:T,onPaneContextMenu:!!le,onPanZoom:l,onTransformChange:fe});y.on("zoom",Te);const Ye=FO({zoomPanValues:h,panOnDrag:T,panOnScroll:K,onPaneContextMenu:le,onPanZoomEnd:d,onDraggingChange:m});y.on("end",Ye)}const Re=JO({zoomActivationKeyPressed:ee,panOnDrag:T,zoomOnScroll:C,panOnScroll:K,zoomOnDoubleClick:L,zoomOnPinch:ie,userSelectionActive:_,noPanClassName:te,noWheelClassName:ne,lib:re,connectionInProgress:ge});y.filter(Re),L?v.on("dblclick.zoom",E):v.on("dblclick.zoom",null)}function x(){y.on("zoom",null)}async function Y(ne,te,le){const _=dg(ne),K=y?.constrain()(_,te,le);return K&&await A(K),new Promise(T=>T(K))}async function N(ne,te){const le=dg(ne);return await A(le,te),new Promise(_=>_(le))}function I(ne){if(v){const te=dg(ne),le=v.property("__zoom");(le.k!==ne.zoom||le.x!==ne.x||le.y!==ne.y)&&y?.transform(v,te,null,{sync:!0})}}function O(){const ne=v?G1(v.node()):{x:0,y:0,k:1};return{x:ne.x,y:ne.y,zoom:ne.k}}function B(ne,te){return v?new Promise(le=>{y?.interpolate(te?.interpolate==="linear"?ll:Mc).scaleTo(hg(v,te?.duration,te?.ease,()=>le(!0)),ne)}):Promise.resolve(!1)}function M(ne,te){return v?new Promise(le=>{y?.interpolate(te?.interpolate==="linear"?ll:Mc).scaleBy(hg(v,te?.duration,te?.ease,()=>le(!0)),ne)}):Promise.resolve(!1)}function W(ne){y?.scaleExtent(ne)}function q(ne){y?.translateExtent(ne)}function de(ne){const te=!$n(ne)||ne<0?0:ne;y?.clickDistance(te)}return{update:R,destroy:x,setViewport:N,setViewportConstrained:Y,getViewport:O,scaleTo:B,scaleBy:M,setScaleExtent:W,setTranslateExtent:q,syncViewport:I,setClickDistance:de}}var js;(function(t){t.Line="line",t.Handle="handle"})(js||(js={}));function $O({width:t,prevWidth:e,height:n,prevHeight:a,affectsX:o,affectsY:l}){const c=t-e,d=n-a,m=[c>0?1:c<0?-1:0,d>0?1:d<0?-1:0];return c&&o&&(m[0]=m[0]*-1),d&&l&&(m[1]=m[1]*-1),m}function HS(t){const e=t.includes("right")||t.includes("left"),n=t.includes("bottom")||t.includes("top"),a=t.includes("left"),o=t.includes("top");return{isHorizontal:e,isVertical:n,affectsX:a,affectsY:o}}function Ci(t,e){return Math.max(0,e-t)}function Ii(t,e){return Math.max(0,t-e)}function Tc(t,e,n){return Math.max(0,e-t,t-n)}function FS(t,e){return t?!e:e}function PO(t,e,n,a,o,l,c,d){let{affectsX:m,affectsY:h}=e;const{isHorizontal:p,isVertical:y}=e,v=p&&y,{xSnapped:S,ySnapped:E}=n,{minWidth:A,maxWidth:R,minHeight:x,maxHeight:Y}=a,{x:N,y:I,width:O,height:B,aspectRatio:M}=t;let W=Math.floor(p?S-t.pointerX:0),q=Math.floor(y?E-t.pointerY:0);const de=O+(m?-W:W),ne=B+(h?-q:q),te=-l[0]*O,le=-l[1]*B;let _=Tc(de,A,R),K=Tc(ne,x,Y);if(c){let Z=0,H=0;m&&W<0?Z=Ci(N+W+te,c[0][0]):!m&&W>0&&(Z=Ii(N+de+te,c[1][0])),h&&q<0?H=Ci(I+q+le,c[0][1]):!h&&q>0&&(H=Ii(I+ne+le,c[1][1])),_=Math.max(_,Z),K=Math.max(K,H)}if(d){let Z=0,H=0;m&&W>0?Z=Ii(N+W,d[0][0]):!m&&W<0&&(Z=Ci(N+de,d[1][0])),h&&q>0?H=Ii(I+q,d[0][1]):!h&&q<0&&(H=Ci(I+ne,d[1][1])),_=Math.max(_,Z),K=Math.max(K,H)}if(o){if(p){const Z=Tc(de/M,x,Y)*M;if(_=Math.max(_,Z),c){let H=0;!m&&!h||m&&!h&&v?H=Ii(I+le+de/M,c[1][1])*M:H=Ci(I+le+(m?W:-W)/M,c[0][1])*M,_=Math.max(_,H)}if(d){let H=0;!m&&!h||m&&!h&&v?H=Ci(I+de/M,d[1][1])*M:H=Ii(I+(m?W:-W)/M,d[0][1])*M,_=Math.max(_,H)}}if(y){const Z=Tc(ne*M,A,R)/M;if(K=Math.max(K,Z),c){let H=0;!m&&!h||h&&!m&&v?H=Ii(N+ne*M+te,c[1][0])/M:H=Ci(N+(h?q:-q)*M+te,c[0][0])/M,K=Math.max(K,H)}if(d){let H=0;!m&&!h||h&&!m&&v?H=Ci(N+ne*M,d[1][0])/M:H=Ii(N+(h?q:-q)*M,d[0][0])/M,K=Math.max(K,H)}}}q=q+(q<0?K:-K),W=W+(W<0?_:-_),o&&(v?de>ne*M?q=(FS(m,h)?-W:W)/M:W=(FS(m,h)?-q:q)*M:p?(q=W/M,h=m):(W=q*M,m=h));const T=m?N+W:N,V=h?I+q:I;return{width:O+(m?-W:W),height:B+(h?-q:q),x:l[0]*W*(m?-1:1)+T,y:l[1]*q*(h?-1:1)+V}}const yw={width:0,height:0,x:0,y:0},QO={...yw,pointerX:0,pointerY:0,aspectRatio:1};function qO(t){return[[0,0],[t.measured.width,t.measured.height]]}function eM(t,e,n){const a=e.position.x+t.position.x,o=e.position.y+t.position.y,l=t.measured.width??0,c=t.measured.height??0,d=n[0]*l,m=n[1]*c;return[[a-d,o-m],[a+l-d,o+c-m]]}function tM({domNode:t,nodeId:e,getStoreItems:n,onChange:a,onEnd:o}){const l=pn(t);let c={controlDirection:HS("bottom-right"),boundaries:{minWidth:0,minHeight:0,maxWidth:Number.MAX_VALUE,maxHeight:Number.MAX_VALUE},resizeDirection:void 0,keepAspectRatio:!1};function d({controlPosition:h,boundaries:p,keepAspectRatio:y,resizeDirection:v,onResizeStart:S,onResize:E,onResizeEnd:A,shouldResize:R}){let x={...yw},Y={...QO};c={boundaries:p,resizeDirection:v,keepAspectRatio:y,controlDirection:HS(h)};let N,I=null,O=[],B,M,W,q=!1;const de=C1().on("start",ne=>{const{nodeLookup:te,transform:le,snapGrid:_,snapToGrid:K,nodeOrigin:T,paneDomNode:V}=n();if(N=te.get(e),!N)return;I=V?.getBoundingClientRect()??null;const{xSnapped:Z,ySnapped:H}=ul(ne.sourceEvent,{transform:le,snapGrid:_,snapToGrid:K,containerBounds:I});x={width:N.measured.width??0,height:N.measured.height??0,x:N.position.x??0,y:N.position.y??0},Y={...x,pointerX:Z,pointerY:H,aspectRatio:x.width/x.height},B=void 0,N.parentId&&(N.extent==="parent"||N.expandParent)&&(B=te.get(N.parentId),M=B&&N.extent==="parent"?qO(B):void 0),O=[],W=void 0;for(const[ie,C]of te)if(C.parentId===e&&(O.push({id:ie,position:{...C.position},extent:C.extent}),C.extent==="parent"||C.expandParent)){const L=eM(C,N,C.origin??T);W?W=[[Math.min(L[0][0],W[0][0]),Math.min(L[0][1],W[0][1])],[Math.max(L[1][0],W[1][0]),Math.max(L[1][1],W[1][1])]]:W=L}S?.(ne,{...x})}).on("drag",ne=>{const{transform:te,snapGrid:le,snapToGrid:_,nodeOrigin:K}=n(),T=ul(ne.sourceEvent,{transform:te,snapGrid:le,snapToGrid:_,containerBounds:I}),V=[];if(!N)return;const{x:Z,y:H,width:ie,height:C}=x,L={},ee=N.origin??K,{width:re,height:fe,x:ge,y:he}=PO(Y,c.controlDirection,T,c.boundaries,c.keepAspectRatio,ee,M,W),ce=re!==ie,me=fe!==C,_e=ge!==Z&&ce,Re=he!==H&&me;if(!_e&&!Re&&!ce&&!me)return;if((_e||Re||ee[0]===1||ee[1]===1)&&(L.x=_e?ge:x.x,L.y=Re?he:x.y,x.x=L.x,x.y=L.y,O.length>0)){const Qe=ge-Z,qe=he-H;for(const Tt of O)Tt.position={x:Tt.position.x-Qe+ee[0]*(re-ie),y:Tt.position.y-qe+ee[1]*(fe-C)},V.push(Tt)}if((ce||me)&&(L.width=ce&&(!c.resizeDirection||c.resizeDirection==="horizontal")?re:x.width,L.height=me&&(!c.resizeDirection||c.resizeDirection==="vertical")?fe:x.height,x.width=L.width,x.height=L.height),B&&N.expandParent){const Qe=ee[0]*(L.width??0);L.x&&L.x<Qe&&(x.x=Qe,Y.x=Y.x-(L.x-Qe));const qe=ee[1]*(L.height??0);L.y&&L.y<qe&&(x.y=qe,Y.y=Y.y-(L.y-qe))}const Ne=$O({width:x.width,prevWidth:ie,height:x.height,prevHeight:C,affectsX:c.controlDirection.affectsX,affectsY:c.controlDirection.affectsY}),Te={...x,direction:Ne};R?.(ne,Te)!==!1&&(q=!0,E?.(ne,Te),a(L,V))}).on("end",ne=>{q&&(A?.(ne,{...x}),o?.({...x}),q=!1)});l.call(de)}function m(){l.on(".drag",null)}return{update:d,destroy:m}}var gg={exports:{}},mg={},pg={exports:{}},yg={};var JS;function nM(){if(JS)return yg;JS=1;var t=_l();function e(y,v){return y===v&&(y!==0||1/y===1/v)||y!==y&&v!==v}var n=typeof Object.is=="function"?Object.is:e,a=t.useState,o=t.useEffect,l=t.useLayoutEffect,c=t.useDebugValue;function d(y,v){var S=v(),E=a({inst:{value:S,getSnapshot:v}}),A=E[0].inst,R=E[1];return l(function(){A.value=S,A.getSnapshot=v,m(A)&&R({inst:A})},[y,S,v]),o(function(){return m(A)&&R({inst:A}),y(function(){m(A)&&R({inst:A})})},[y]),c(S),S}function m(y){var v=y.getSnapshot;y=y.value;try{var S=v();return!n(y,S)}catch{return!0}}function h(y,v){return v()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:d;return yg.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:p,yg}var jS;function rM(){return jS||(jS=1,pg.exports=nM()),pg.exports}var $S;function iM(){if($S)return mg;$S=1;var t=_l(),e=rM();function n(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}var a=typeof Object.is=="function"?Object.is:n,o=e.useSyncExternalStore,l=t.useRef,c=t.useEffect,d=t.useMemo,m=t.useDebugValue;return mg.useSyncExternalStoreWithSelector=function(h,p,y,v,S){var E=l(null);if(E.current===null){var A={hasValue:!1,value:null};E.current=A}else A=E.current;E=d(function(){function x(B){if(!Y){if(Y=!0,N=B,B=v(B),S!==void 0&&A.hasValue){var M=A.value;if(S(M,B))return I=M}return I=B}if(M=I,a(N,B))return M;var W=v(B);return S!==void 0&&S(M,W)?(N=B,M):(N=B,I=W)}var Y=!1,N,I,O=y===void 0?null:y;return[function(){return x(p())},O===null?void 0:function(){return x(O())}]},[p,y,v,S]);var R=o(h,E[0],E[1]);return c(function(){A.hasValue=!0,A.value=R},[R]),m(R),R},mg}var PS;function aM(){return PS||(PS=1,gg.exports=iM()),gg.exports}var sM=aM();const oM=EA(sM),lM={},QS=t=>{let e;const n=new Set,a=(p,y)=>{const v=typeof p=="function"?p(e):p;if(!Object.is(v,e)){const S=e;e=y??(typeof v!="object"||v===null)?v:Object.assign({},e,v),n.forEach(E=>E(e,S))}},o=()=>e,m={setState:a,getState:o,getInitialState:()=>h,subscribe:p=>(n.add(p),()=>n.delete(p)),destroy:()=>{(lM?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},h=e=t(a,o,m);return m},uM=t=>t?QS(t):QS,{useDebugValue:cM}=g3,{useSyncExternalStoreWithSelector:fM}=oM,dM=t=>t;function vw(t,e=dM,n){const a=fM(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return cM(a),a}const qS=(t,e)=>{const n=uM(t),a=(o,l=e)=>vw(n,o,l);return Object.assign(a,n),a},hM=(t,e)=>t?qS(t,e):qS;function ht(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[a,o]of t)if(!Object.is(o,e.get(a)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const a of t)if(!e.has(a))return!1;return!0}const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(const a of n)if(!Object.prototype.hasOwnProperty.call(e,a)||!Object.is(t[a],e[a]))return!1;return!0}wA();const wf=P.createContext(null),gM=wf.Provider,bw=mr.error001();function Xe(t,e){const n=P.useContext(wf);if(n===null)throw new Error(bw);return vw(n,t,e)}function ft(){const t=P.useContext(wf);if(t===null)throw new Error(bw);return P.useMemo(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe}),[t])}const eA={display:"none"},mM={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Sw="react-flow__node-desc",Aw="react-flow__edge-desc",pM="react-flow__aria-live",yM=t=>t.ariaLiveMessage,vM=t=>t.ariaLabelConfig;function bM({rfId:t}){const e=Xe(yM);return $.jsx("div",{id:`${pM}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:mM,children:e})}function SM({rfId:t,disableKeyboardA11y:e}){const n=Xe(vM);return $.jsxs($.Fragment,{children:[$.jsx("div",{id:`${Sw}-${t}`,style:eA,children:e?n["node.a11yDescription.default"]:n["node.a11yDescription.keyboardDisabled"]}),$.jsx("div",{id:`${Aw}-${t}`,style:eA,children:n["edge.a11yDescription.default"]}),!e&&$.jsx(bM,{rfId:t})]})}const Nf=P.forwardRef(({position:t="top-left",children:e,className:n,style:a,...o},l)=>{const c=`${t}`.split("-");return $.jsx("div",{className:xt(["react-flow__panel",n,...c]),style:a,ref:l,...o,children:e})});Nf.displayName="Panel";function AM({proOptions:t,position:e="bottom-right"}){return t?.hideAttribution?null:$.jsx(Nf,{position:e,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:$.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const EM=t=>{const e=[],n=[];for(const[,a]of t.nodeLookup)a.selected&&e.push(a.internals.userNode);for(const[,a]of t.edgeLookup)a.selected&&n.push(a);return{selectedNodes:e,selectedEdges:n}},Cc=t=>t.id;function wM(t,e){return ht(t.selectedNodes.map(Cc),e.selectedNodes.map(Cc))&&ht(t.selectedEdges.map(Cc),e.selectedEdges.map(Cc))}function NM({onSelectionChange:t}){const e=ft(),{selectedNodes:n,selectedEdges:a}=Xe(EM,wM);return P.useEffect(()=>{const o={nodes:n,edges:a};t?.(o),e.getState().onSelectionChangeHandlers.forEach(l=>l(o))},[n,a,t]),null}const xM=t=>!!t.onSelectionChangeHandlers;function TM({onSelectionChange:t}){const e=Xe(xM);return t||e?$.jsx(NM,{onSelectionChange:t}):null}const Ew=[0,0],CM={x:0,y:0,zoom:1},IM=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","ariaLabelConfig"],tA=[...IM,"rfId"],RM=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges}),nA={translateExtent:xl,nodeOrigin:Ew,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1"};function DM(t){const{setNodes:e,setEdges:n,setMinZoom:a,setMaxZoom:o,setTranslateExtent:l,setNodeExtent:c,reset:d,setDefaultNodesAndEdges:m}=Xe(RM,ht),h=ft();P.useEffect(()=>(m(t.defaultNodes,t.defaultEdges),()=>{p.current=nA,d()}),[]);const p=P.useRef(nA);return P.useEffect(()=>{for(const y of tA){const v=t[y],S=p.current[y];v!==S&&(typeof t[y]>"u"||(y==="nodes"?e(v):y==="edges"?n(v):y==="minZoom"?a(v):y==="maxZoom"?o(v):y==="translateExtent"?l(v):y==="nodeExtent"?c(v):y==="ariaLabelConfig"?h.setState({ariaLabelConfig:hO(v)}):y==="fitView"?h.setState({fitViewQueued:v}):y==="fitViewOptions"?h.setState({fitViewOptions:v}):h.setState({[y]:v})))}p.current=t},tA.map(y=>t[y])),null}function rA(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function _M(t){const[e,n]=P.useState(t==="system"?null:t);return P.useEffect(()=>{if(t!=="system"){n(t);return}const a=rA(),o=()=>n(a?.matches?"dark":"light");return o(),a?.addEventListener("change",o),()=>{a?.removeEventListener("change",o)}},[t]),e!==null?e:rA()?.matches?"dark":"light"}const iA=typeof document<"u"?document:null;function Dl(t=null,e={target:iA,actInsideInputWithModifier:!0}){const[n,a]=P.useState(!1),o=P.useRef(!1),l=P.useRef(new Set([])),[c,d]=P.useMemo(()=>{if(t!==null){const h=(Array.isArray(t)?t:[t]).filter(y=>typeof y=="string").map(y=>y.replace("+",`
`).replace(`

`,`
+`).split(`
`)),p=h.reduce((y,v)=>y.concat(...v),[]);return[h,p]}return[[],[]]},[t]);return P.useEffect(()=>{const m=e?.target??iA,h=e?.actInsideInputWithModifier??!0;if(t!==null){const p=S=>{if(o.current=S.ctrlKey||S.metaKey||S.shiftKey||S.altKey,(!o.current||o.current&&!h)&&tw(S))return!1;const A=sA(S.code,d);if(l.current.add(S[A]),aA(c,l.current,!1)){const R=S.composedPath?.()?.[0]||S.target,x=R?.nodeName==="BUTTON"||R?.nodeName==="A";e.preventDefault!==!1&&(o.current||!x)&&S.preventDefault(),a(!0)}},y=S=>{const E=sA(S.code,d);aA(c,l.current,!0)?(a(!1),l.current.clear()):l.current.delete(S[E]),S.key==="Meta"&&l.current.clear(),o.current=!1},v=()=>{l.current.clear(),a(!1)};return m?.addEventListener("keydown",p),m?.addEventListener("keyup",y),window.addEventListener("blur",v),window.addEventListener("contextmenu",v),()=>{m?.removeEventListener("keydown",p),m?.removeEventListener("keyup",y),window.removeEventListener("blur",v),window.removeEventListener("contextmenu",v)}}},[t,a]),n}function aA(t,e,n){return t.filter(a=>n||a.length===e.size).some(a=>a.every(o=>e.has(o)))}function sA(t,e){return e.includes(t)?"code":"key"}const VM=()=>{const t=ft();return P.useMemo(()=>({zoomIn:e=>{const{panZoom:n}=t.getState();return n?n.scaleBy(1.2,{duration:e?.duration}):Promise.resolve(!1)},zoomOut:e=>{const{panZoom:n}=t.getState();return n?n.scaleBy(1/1.2,{duration:e?.duration}):Promise.resolve(!1)},zoomTo:(e,n)=>{const{panZoom:a}=t.getState();return a?a.scaleTo(e,{duration:n?.duration}):Promise.resolve(!1)},getZoom:()=>t.getState().transform[2],setViewport:async(e,n)=>{const{transform:[a,o,l],panZoom:c}=t.getState();return c?(await c.setViewport({x:e.x??a,y:e.y??o,zoom:e.zoom??l},n),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[e,n,a]=t.getState().transform;return{x:e,y:n,zoom:a}},setCenter:async(e,n,a)=>t.getState().setCenter(e,n,a),fitBounds:async(e,n)=>{const{width:a,height:o,minZoom:l,maxZoom:c,panZoom:d}=t.getState(),m=Hm(e,a,o,l,c,n?.padding??.1);return d?(await d.setViewport(m,{duration:n?.duration,ease:n?.ease,interpolate:n?.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(e,n={})=>{const{transform:a,snapGrid:o,snapToGrid:l,domNode:c}=t.getState();if(!c)return e;const{x:d,y:m}=c.getBoundingClientRect(),h={x:e.x-d,y:e.y-m},p=n.snapGrid??o,y=n.snapToGrid??l;return kl(h,a,y,p)},flowToScreenPosition:e=>{const{transform:n,domNode:a}=t.getState();if(!a)return e;const{x:o,y:l}=a.getBoundingClientRect(),c=tf(e,n);return{x:c.x+o,y:c.y+l}}}),[])};function ww(t,e){const n=[],a=new Map,o=[];for(const l of t)if(l.type==="add"){o.push(l);continue}else if(l.type==="remove"||l.type==="replace")a.set(l.id,[l]);else{const c=a.get(l.id);c?c.push(l):a.set(l.id,[l])}for(const l of e){const c=a.get(l.id);if(!c){n.push(l);continue}if(c[0].type==="remove")continue;if(c[0].type==="replace"){n.push({...c[0].item});continue}const d={...l};for(const m of c)OM(m,d);n.push(d)}return o.length&&o.forEach(l=>{l.index!==void 0?n.splice(l.index,0,{...l.item}):n.push({...l.item})}),n}function OM(t,e){switch(t.type){case"select":{e.selected=t.selected;break}case"position":{typeof t.position<"u"&&(e.position=t.position),typeof t.dragging<"u"&&(e.dragging=t.dragging);break}case"dimensions":{typeof t.dimensions<"u"&&(e.measured??={},e.measured.width=t.dimensions.width,e.measured.height=t.dimensions.height,t.setAttributes&&((t.setAttributes===!0||t.setAttributes==="width")&&(e.width=t.dimensions.width),(t.setAttributes===!0||t.setAttributes==="height")&&(e.height=t.dimensions.height))),typeof t.resizing=="boolean"&&(e.resizing=t.resizing);break}}}function MM(t,e){return ww(t,e)}function BM(t,e){return ww(t,e)}function ha(t,e){return{id:t,type:"select",selected:e}}function Ts(t,e=new Set,n=!1){const a=[];for(const[o,l]of t){const c=e.has(o);!(l.selected===void 0&&!c)&&l.selected!==c&&(n&&(l.selected=c),a.push(ha(l.id,c)))}return a}function oA({items:t=[],lookup:e}){const n=[],a=new Map(t.map(o=>[o.id,o]));for(const[o,l]of t.entries()){const c=e.get(l.id),d=c?.internals?.userNode??c;d!==void 0&&d!==l&&n.push({id:l.id,item:l,type:"replace"}),d===void 0&&n.push({item:l,type:"add",index:o})}for(const[o]of e)a.get(o)===void 0&&n.push({id:o,type:"remove"});return n}function lA(t){return{id:t.id,type:"remove"}}const uA=t=>rO(t),LM=t=>F1(t);function Nw(t){return P.forwardRef(t)}const zM=typeof window<"u"?P.useLayoutEffect:P.useEffect;function cA(t){const[e,n]=P.useState(BigInt(0)),[a]=P.useState(()=>UM(()=>n(o=>o+BigInt(1))));return zM(()=>{const o=a.get();o.length&&(t(o),a.reset())},[e]),a}function UM(t){let e=[];return{get:()=>e,reset:()=>{e=[]},push:n=>{e.push(n),t()}}}const xw=P.createContext(null);function YM({children:t}){const e=ft(),n=P.useCallback(d=>{const{nodes:m=[],setNodes:h,hasDefaultNodes:p,onNodesChange:y,nodeLookup:v,fitViewQueued:S}=e.getState();let E=m;for(const R of d)E=typeof R=="function"?R(E):R;const A=oA({items:E,lookup:v});p&&h(E),A.length>0?y?.(A):S&&window.requestAnimationFrame(()=>{const{fitViewQueued:R,nodes:x,setNodes:Y}=e.getState();R&&Y(x)})},[]),a=cA(n),o=P.useCallback(d=>{const{edges:m=[],setEdges:h,hasDefaultEdges:p,onEdgesChange:y,edgeLookup:v}=e.getState();let S=m;for(const E of d)S=typeof E=="function"?E(S):E;p?h(S):y&&y(oA({items:S,lookup:v}))},[]),l=cA(o),c=P.useMemo(()=>({nodeQueue:a,edgeQueue:l}),[]);return $.jsx(xw.Provider,{value:c,children:t})}function ZM(){const t=P.useContext(xw);if(!t)throw new Error("useBatchContext must be used within a BatchProvider");return t}const GM=t=>!!t.panZoom;function Qm(){const t=VM(),e=ft(),n=ZM(),a=Xe(GM),o=P.useMemo(()=>{const l=y=>e.getState().nodeLookup.get(y),c=y=>{n.nodeQueue.push(y)},d=y=>{n.edgeQueue.push(y)},m=y=>{const{nodeLookup:v,nodeOrigin:S}=e.getState(),E=uA(y)?y:v.get(y.id),A=E.parentId?q1(E.position,E.measured,E.parentId,v,S):E.position,R={...E,position:A,width:E.measured?.width??E.width,height:E.measured?.height??E.height};return Fs(R)},h=(y,v,S={replace:!1})=>{c(E=>E.map(A=>{if(A.id===y){const R=typeof v=="function"?v(A):v;return S.replace&&uA(R)?R:{...A,...R}}return A}))},p=(y,v,S={replace:!1})=>{d(E=>E.map(A=>{if(A.id===y){const R=typeof v=="function"?v(A):v;return S.replace&&LM(R)?R:{...A,...R}}return A}))};return{getNodes:()=>e.getState().nodes.map(y=>({...y})),getNode:y=>l(y)?.internals.userNode,getInternalNode:l,getEdges:()=>{const{edges:y=[]}=e.getState();return y.map(v=>({...v}))},getEdge:y=>e.getState().edgeLookup.get(y),setNodes:c,setEdges:d,addNodes:y=>{const v=Array.isArray(y)?y:[y];n.nodeQueue.push(S=>[...S,...v])},addEdges:y=>{const v=Array.isArray(y)?y:[y];n.edgeQueue.push(S=>[...S,...v])},toObject:()=>{const{nodes:y=[],edges:v=[],transform:S}=e.getState(),[E,A,R]=S;return{nodes:y.map(x=>({...x})),edges:v.map(x=>({...x})),viewport:{x:E,y:A,zoom:R}}},deleteElements:async({nodes:y=[],edges:v=[]})=>{const{nodes:S,edges:E,onNodesDelete:A,onEdgesDelete:R,triggerNodeChanges:x,triggerEdgeChanges:Y,onDelete:N,onBeforeDelete:I}=e.getState(),{nodes:O,edges:B}=await lO({nodesToRemove:y,edgesToRemove:v,nodes:S,edges:E,onBeforeDelete:I}),M=B.length>0,W=O.length>0;if(M){const q=B.map(lA);R?.(B),Y(q)}if(W){const q=O.map(lA);A?.(O),x(q)}return(W||M)&&N?.({nodes:O,edges:B}),{deletedNodes:O,deletedEdges:B}},getIntersectingNodes:(y,v=!0,S)=>{const E=BS(y),A=E?y:m(y),R=S!==void 0;return A?(S||e.getState().nodes).filter(x=>{const Y=e.getState().nodeLookup.get(x.id);if(Y&&!E&&(x.id===y.id||!Y.internals.positionAbsolute))return!1;const N=Fs(R?x:Y),I=Cl(N,A);return v&&I>0||I>=N.width*N.height||I>=A.width*A.height}):[]},isNodeIntersecting:(y,v,S=!0)=>{const A=BS(y)?y:m(y);if(!A)return!1;const R=Cl(A,v);return S&&R>0||R>=v.width*v.height||R>=A.width*A.height},updateNode:h,updateNodeData:(y,v,S={replace:!1})=>{h(y,E=>{const A=typeof v=="function"?v(E):v;return S.replace?{...E,data:A}:{...E,data:{...E.data,...A}}},S)},updateEdge:p,updateEdgeData:(y,v,S={replace:!1})=>{p(y,E=>{const A=typeof v=="function"?v(E):v;return S.replace?{...E,data:A}:{...E,data:{...E.data,...A}}},S)},getNodesBounds:y=>{const{nodeLookup:v,nodeOrigin:S}=e.getState();return iO(y,{nodeLookup:v,nodeOrigin:S})},getHandleConnections:({type:y,id:v,nodeId:S})=>Array.from(e.getState().connectionLookup.get(`${S}-${y}${v?`-${v}`:""}`)?.values()??[]),getNodeConnections:({type:y,handleId:v,nodeId:S})=>Array.from(e.getState().connectionLookup.get(`${S}${y?v?`-${y}-${v}`:`-${y}`:""}`)?.values()??[]),fitView:async y=>{const v=e.getState().fitViewResolver??dO();return e.setState({fitViewQueued:!0,fitViewOptions:y,fitViewResolver:v}),n.nodeQueue.push(S=>[...S]),v.promise}}},[]);return P.useMemo(()=>({...o,...t,viewportInitialized:a}),[a])}const fA=t=>t.selected,kM=typeof window<"u"?window:void 0;function XM({deleteKeyCode:t,multiSelectionKeyCode:e}){const n=ft(),{deleteElements:a}=Qm(),o=Dl(t,{actInsideInputWithModifier:!1}),l=Dl(e,{target:kM});P.useEffect(()=>{if(o){const{edges:c,nodes:d}=n.getState();a({nodes:d.filter(fA),edges:c.filter(fA)}),n.setState({nodesSelectionActive:!1})}},[o]),P.useEffect(()=>{n.setState({multiSelectionActive:l})},[l])}function WM(t){const e=ft();P.useEffect(()=>{const n=()=>{if(!t.current||!(t.current.checkVisibility?.()??!0))return!1;const a=Fm(t.current);(a.height===0||a.width===0)&&e.getState().onError?.("004",mr.error004()),e.setState({width:a.width||500,height:a.height||500})};if(t.current){n(),window.addEventListener("resize",n);const a=new ResizeObserver(()=>n());return a.observe(t.current),()=>{window.removeEventListener("resize",n),a&&t.current&&a.unobserve(t.current)}}},[])}const xf={position:"absolute",width:"100%",height:"100%",top:0,left:0},KM=t=>({userSelectionActive:t.userSelectionActive,lib:t.lib,connectionInProgress:t.connection.inProgress});function HM({onPaneContextMenu:t,zoomOnScroll:e=!0,zoomOnPinch:n=!0,panOnScroll:a=!1,panOnScrollSpeed:o=.5,panOnScrollMode:l=va.Free,zoomOnDoubleClick:c=!0,panOnDrag:d=!0,defaultViewport:m,translateExtent:h,minZoom:p,maxZoom:y,zoomActivationKeyCode:v,preventScrolling:S=!0,children:E,noWheelClassName:A,noPanClassName:R,onViewportChange:x,isControlledViewport:Y,paneClickDistance:N,selectionOnDrag:I}){const O=ft(),B=P.useRef(null),{userSelectionActive:M,lib:W,connectionInProgress:q}=Xe(KM,ht),de=Dl(v),ne=P.useRef();WM(B);const te=P.useCallback(le=>{x?.({x:le[0],y:le[1],zoom:le[2]}),Y||O.setState({transform:le})},[x,Y]);return P.useEffect(()=>{if(B.current){ne.current=jO({domNode:B.current,minZoom:p,maxZoom:y,translateExtent:h,viewport:m,onDraggingChange:T=>O.setState({paneDragging:T}),onPanZoomStart:(T,V)=>{const{onViewportChangeStart:Z,onMoveStart:H}=O.getState();H?.(T,V),Z?.(V)},onPanZoom:(T,V)=>{const{onViewportChange:Z,onMove:H}=O.getState();H?.(T,V),Z?.(V)},onPanZoomEnd:(T,V)=>{const{onViewportChangeEnd:Z,onMoveEnd:H}=O.getState();H?.(T,V),Z?.(V)}});const{x:le,y:_,zoom:K}=ne.current.getViewport();return O.setState({panZoom:ne.current,transform:[le,_,K],domNode:B.current.closest(".react-flow")}),()=>{ne.current?.destroy()}}},[]),P.useEffect(()=>{ne.current?.update({onPaneContextMenu:t,zoomOnScroll:e,zoomOnPinch:n,panOnScroll:a,panOnScrollSpeed:o,panOnScrollMode:l,zoomOnDoubleClick:c,panOnDrag:d,zoomActivationKeyPressed:de,preventScrolling:S,noPanClassName:R,userSelectionActive:M,noWheelClassName:A,lib:W,onTransformChange:te,connectionInProgress:q,selectionOnDrag:I,paneClickDistance:N})},[t,e,n,a,o,l,c,d,de,S,R,M,A,W,te,q,I,N]),$.jsx("div",{className:"react-flow__renderer",ref:B,style:xf,children:E})}const FM=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function JM(){const{userSelectionActive:t,userSelectionRect:e}=Xe(FM,ht);return t&&e?$.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:e.width,height:e.height,transform:`translate(${e.x}px, ${e.y}px)`}}):null}const vg=(t,e)=>n=>{n.target===e.current&&t?.(n)},jM=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,connectionInProgress:t.connection.inProgress,dragging:t.paneDragging});function $M({isSelecting:t,selectionKeyPressed:e,selectionMode:n=Tl.Full,panOnDrag:a,paneClickDistance:o,selectionOnDrag:l,onSelectionStart:c,onSelectionEnd:d,onPaneClick:m,onPaneContextMenu:h,onPaneScroll:p,onPaneMouseEnter:y,onPaneMouseMove:v,onPaneMouseLeave:S,children:E}){const A=ft(),{userSelectionActive:R,elementsSelectable:x,dragging:Y,connectionInProgress:N}=Xe(jM,ht),I=x&&(t||R),O=P.useRef(null),B=P.useRef(),M=P.useRef(new Set),W=P.useRef(new Set),q=P.useRef(!1),de=Z=>{if(q.current||N){q.current=!1;return}m?.(Z),A.getState().resetSelectedElements(),A.setState({nodesSelectionActive:!1})},ne=Z=>{if(Array.isArray(a)&&a?.includes(2)){Z.preventDefault();return}h?.(Z)},te=p?Z=>p(Z):void 0,le=Z=>{q.current&&(Z.stopPropagation(),q.current=!1)},_=Z=>{const{domNode:H}=A.getState();if(B.current=H?.getBoundingClientRect(),!B.current)return;const ie=Z.target===O.current;if(!ie&&!!Z.target.closest(".nokey")||!t||!(l&&ie||e)||Z.button!==0||!Z.isPrimary)return;Z.target?.setPointerCapture?.(Z.pointerId),q.current=!1;const{x:ee,y:re}=Pn(Z.nativeEvent,B.current);A.setState({userSelectionRect:{width:0,height:0,startX:ee,startY:re,x:ee,y:re}}),ie||(Z.stopPropagation(),Z.preventDefault())},K=Z=>{const{userSelectionRect:H,transform:ie,nodeLookup:C,edgeLookup:L,connectionLookup:ee,triggerNodeChanges:re,triggerEdgeChanges:fe,defaultEdgeOptions:ge,resetSelectedElements:he}=A.getState();if(!B.current||!H)return;const{x:ce,y:me}=Pn(Z.nativeEvent,B.current),{startX:_e,startY:Re}=H;if(!q.current){const qe=e?0:o;if(Math.hypot(ce-_e,me-Re)<=qe)return;he(),c?.(Z)}q.current=!0;const Ne={startX:_e,startY:Re,x:ce<_e?ce:_e,y:me<Re?me:Re,width:Math.abs(ce-_e),height:Math.abs(me-Re)},Te=M.current,Ye=W.current;M.current=new Set(Km(C,Ne,ie,n===Tl.Partial,!0).map(qe=>qe.id)),W.current=new Set;const Qe=ge?.selectable??!0;for(const qe of M.current){const Tt=ee.get(qe);if(Tt)for(const{edgeId:Sn}of Tt.values()){const Ln=L.get(Sn);Ln&&(Ln.selectable??Qe)&&W.current.add(Sn)}}if(!LS(Te,M.current)){const qe=Ts(C,M.current,!0);re(qe)}if(!LS(Ye,W.current)){const qe=Ts(L,W.current);fe(qe)}A.setState({userSelectionRect:Ne,userSelectionActive:!0,nodesSelectionActive:!1})},T=Z=>{Z.button===0&&(Z.target?.releasePointerCapture?.(Z.pointerId),!R&&Z.target===O.current&&A.getState().userSelectionRect&&de?.(Z),A.setState({userSelectionActive:!1,userSelectionRect:null}),q.current&&(d?.(Z),A.setState({nodesSelectionActive:M.current.size>0})))},V=a===!0||Array.isArray(a)&&a.includes(0);return $.jsxs("div",{className:xt(["react-flow__pane",{draggable:V,dragging:Y,selection:t}]),onClick:I?void 0:vg(de,O),onContextMenu:vg(ne,O),onWheel:vg(te,O),onPointerEnter:I?void 0:y,onPointerMove:I?K:v,onPointerUp:I?T:void 0,onPointerDownCapture:I?_:void 0,onClickCapture:I?le:void 0,onPointerLeave:S,ref:O,style:xf,children:[E,$.jsx(JM,{})]})}function Fg({id:t,store:e,unselect:n=!1,nodeRef:a}){const{addSelectedNodes:o,unselectNodesAndEdges:l,multiSelectionActive:c,nodeLookup:d,onError:m}=e.getState(),h=d.get(t);if(!h){m?.("012",mr.error012(t));return}e.setState({nodesSelectionActive:!1}),h.selected?(n||h.selected&&c)&&(l({nodes:[h],edges:[]}),requestAnimationFrame(()=>a?.current?.blur())):o([t])}function Tw({nodeRef:t,disabled:e=!1,noDragClassName:n,handleSelector:a,nodeId:o,isSelectable:l,nodeClickDistance:c}){const d=ft(),[m,h]=P.useState(!1),p=P.useRef();return P.useEffect(()=>{p.current=BO({getStoreItems:()=>d.getState(),onNodeMouseDown:y=>{Fg({id:y,store:d,nodeRef:t})},onDragStart:()=>{h(!0)},onDragStop:()=>{h(!1)}})},[]),P.useEffect(()=>{if(e)p.current?.destroy();else if(t.current)return p.current?.update({noDragClassName:n,handleSelector:a,domNode:t.current,isSelectable:l,nodeId:o,nodeClickDistance:c}),()=>{p.current?.destroy()}},[n,a,e,l,t,o]),m}const PM=t=>e=>e.selected&&(e.draggable||t&&typeof e.draggable>"u");function Cw(){const t=ft();return P.useCallback(n=>{const{nodeExtent:a,snapToGrid:o,snapGrid:l,nodesDraggable:c,onError:d,updateNodePositions:m,nodeLookup:h,nodeOrigin:p}=t.getState(),y=new Map,v=PM(c),S=o?l[0]:5,E=o?l[1]:5,A=n.direction.x*S*n.factor,R=n.direction.y*E*n.factor;for(const[,x]of h){if(!v(x))continue;let Y={x:x.internals.positionAbsolute.x+A,y:x.internals.positionAbsolute.y+R};o&&(Y=Gl(Y,l));const{position:N,positionAbsolute:I}=J1({nodeId:x.id,nextPosition:Y,nodeLookup:h,nodeExtent:a,nodeOrigin:p,onError:d});x.position=N,x.internals.positionAbsolute=I,y.set(x.id,x)}m(y)},[])}const qm=P.createContext(null),QM=qm.Provider;qm.Consumer;const Iw=()=>P.useContext(qm),qM=t=>({connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName,rfId:t.rfId}),eB=(t,e,n)=>a=>{const{connectionClickStartHandle:o,connectionMode:l,connection:c}=a,{fromHandle:d,toHandle:m,isValid:h}=c,p=m?.nodeId===t&&m?.id===e&&m?.type===n;return{connectingFrom:d?.nodeId===t&&d?.id===e&&d?.type===n,connectingTo:p,clickConnecting:o?.nodeId===t&&o?.id===e&&o?.type===n,isPossibleEndHandle:l===Ks.Strict?d?.type!==n:t!==d?.nodeId||e!==d?.id,connectionInProcess:!!d,clickConnectionInProcess:!!o,valid:p&&h}};function tB({type:t="source",position:e=we.Top,isValidConnection:n,isConnectable:a=!0,isConnectableStart:o=!0,isConnectableEnd:l=!0,id:c,onConnect:d,children:m,className:h,onMouseDown:p,onTouchStart:y,...v},S){const E=c||null,A=t==="target",R=ft(),x=Iw(),{connectOnClick:Y,noPanClassName:N,rfId:I}=Xe(qM,ht),{connectingFrom:O,connectingTo:B,clickConnecting:M,isPossibleEndHandle:W,connectionInProcess:q,clickConnectionInProcess:de,valid:ne}=Xe(eB(x,E,t),ht);x||R.getState().onError?.("010",mr.error010());const te=K=>{const{defaultEdgeOptions:T,onConnect:V,hasDefaultEdges:Z}=R.getState(),H={...T,...K};if(Z){const{edges:ie,setEdges:C}=R.getState();C(bO(H,ie))}V?.(H),d?.(H)},le=K=>{if(!x)return;const T=nw(K.nativeEvent);if(o&&(T&&K.button===0||!T)){const V=R.getState();Hg.onPointerDown(K.nativeEvent,{handleDomNode:K.currentTarget,autoPanOnConnect:V.autoPanOnConnect,connectionMode:V.connectionMode,connectionRadius:V.connectionRadius,domNode:V.domNode,nodeLookup:V.nodeLookup,lib:V.lib,isTarget:A,handleId:E,nodeId:x,flowId:V.rfId,panBy:V.panBy,cancelConnection:V.cancelConnection,onConnectStart:V.onConnectStart,onConnectEnd:V.onConnectEnd,updateConnection:V.updateConnection,onConnect:te,isValidConnection:n||V.isValidConnection,getTransform:()=>R.getState().transform,getFromHandle:()=>R.getState().connection.fromHandle,autoPanSpeed:V.autoPanSpeed,dragThreshold:V.connectionDragThreshold})}T?p?.(K):y?.(K)},_=K=>{const{onClickConnectStart:T,onClickConnectEnd:V,connectionClickStartHandle:Z,connectionMode:H,isValidConnection:ie,lib:C,rfId:L,nodeLookup:ee,connection:re}=R.getState();if(!x||!Z&&!o)return;if(!Z){T?.(K.nativeEvent,{nodeId:x,handleId:E,handleType:t}),R.setState({connectionClickStartHandle:{nodeId:x,type:t,id:E}});return}const fe=ew(K.target),ge=n||ie,{connection:he,isValid:ce}=Hg.isValid(K.nativeEvent,{handle:{nodeId:x,id:E,type:t},connectionMode:H,fromNodeId:Z.nodeId,fromHandleId:Z.id||null,fromType:Z.type,isValidConnection:ge,flowId:L,doc:fe,lib:C,nodeLookup:ee});ce&&he&&te(he);const me=structuredClone(re);delete me.inProgress,me.toPosition=me.toHandle?me.toHandle.position:null,V?.(K,me),R.setState({connectionClickStartHandle:null})};return $.jsx("div",{"data-handleid":E,"data-nodeid":x,"data-handlepos":e,"data-id":`${I}-${x}-${E}-${t}`,className:xt(["react-flow__handle",`react-flow__handle-${e}`,"nodrag",N,h,{source:!A,target:A,connectable:a,connectablestart:o,connectableend:l,clickconnecting:M,connectingfrom:O,connectingto:B,valid:ne,connectionindicator:a&&(!q||W)&&(q||de?l:o)}]),onMouseDown:le,onTouchStart:le,onClick:Y?_:void 0,ref:S,...v,children:m})}const nf=P.memo(Nw(tB));function nB({data:t,isConnectable:e,sourcePosition:n=we.Bottom}){return $.jsxs($.Fragment,{children:[t?.label,$.jsx(nf,{type:"source",position:n,isConnectable:e})]})}function rB({data:t,isConnectable:e,targetPosition:n=we.Top,sourcePosition:a=we.Bottom}){return $.jsxs($.Fragment,{children:[$.jsx(nf,{type:"target",position:n,isConnectable:e}),t?.label,$.jsx(nf,{type:"source",position:a,isConnectable:e})]})}function iB(){return null}function aB({data:t,isConnectable:e,targetPosition:n=we.Top}){return $.jsxs($.Fragment,{children:[$.jsx(nf,{type:"target",position:n,isConnectable:e}),t?.label]})}const rf={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},dA={input:nB,default:rB,output:aB,group:iB};function sB(t){return t.internals.handleBounds===void 0?{width:t.width??t.initialWidth??t.style?.width,height:t.height??t.initialHeight??t.style?.height}:{width:t.width??t.style?.width,height:t.height??t.style?.height}}const oB=t=>{const{width:e,height:n,x:a,y:o}=Zl(t.nodeLookup,{filter:l=>!!l.selected});return{width:$n(e)?e:null,height:$n(n)?n:null,userSelectionActive:t.userSelectionActive,transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]}) translate(${a}px,${o}px)`}};function lB({onSelectionContextMenu:t,noPanClassName:e,disableKeyboardA11y:n}){const a=ft(),{width:o,height:l,transformString:c,userSelectionActive:d}=Xe(oB,ht),m=Cw(),h=P.useRef(null);if(P.useEffect(()=>{n||h.current?.focus({preventScroll:!0})},[n]),Tw({nodeRef:h}),d||!o||!l)return null;const p=t?v=>{const S=a.getState().nodes.filter(E=>E.selected);t(v,S)}:void 0,y=v=>{Object.prototype.hasOwnProperty.call(rf,v.key)&&(v.preventDefault(),m({direction:rf[v.key],factor:v.shiftKey?4:1}))};return $.jsx("div",{className:xt(["react-flow__nodesselection","react-flow__container",e]),style:{transform:c},children:$.jsx("div",{ref:h,className:"react-flow__nodesselection-rect",onContextMenu:p,tabIndex:n?void 0:-1,onKeyDown:n?void 0:y,style:{width:o,height:l}})})}const hA=typeof window<"u"?window:void 0,uB=t=>({nodesSelectionActive:t.nodesSelectionActive,userSelectionActive:t.userSelectionActive});function Rw({children:t,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:a,onPaneMouseLeave:o,onPaneContextMenu:l,onPaneScroll:c,paneClickDistance:d,deleteKeyCode:m,selectionKeyCode:h,selectionOnDrag:p,selectionMode:y,onSelectionStart:v,onSelectionEnd:S,multiSelectionKeyCode:E,panActivationKeyCode:A,zoomActivationKeyCode:R,elementsSelectable:x,zoomOnScroll:Y,zoomOnPinch:N,panOnScroll:I,panOnScrollSpeed:O,panOnScrollMode:B,zoomOnDoubleClick:M,panOnDrag:W,defaultViewport:q,translateExtent:de,minZoom:ne,maxZoom:te,preventScrolling:le,onSelectionContextMenu:_,noWheelClassName:K,noPanClassName:T,disableKeyboardA11y:V,onViewportChange:Z,isControlledViewport:H}){const{nodesSelectionActive:ie,userSelectionActive:C}=Xe(uB),L=Dl(h,{target:hA}),ee=Dl(A,{target:hA}),re=ee||W,fe=ee||I,ge=p&&re!==!0,he=L||C||ge;return XM({deleteKeyCode:m,multiSelectionKeyCode:E}),$.jsx(HM,{onPaneContextMenu:l,elementsSelectable:x,zoomOnScroll:Y,zoomOnPinch:N,panOnScroll:fe,panOnScrollSpeed:O,panOnScrollMode:B,zoomOnDoubleClick:M,panOnDrag:!L&&re,defaultViewport:q,translateExtent:de,minZoom:ne,maxZoom:te,zoomActivationKeyCode:R,preventScrolling:le,noWheelClassName:K,noPanClassName:T,onViewportChange:Z,isControlledViewport:H,paneClickDistance:d,selectionOnDrag:ge,children:$.jsxs($M,{onSelectionStart:v,onSelectionEnd:S,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:a,onPaneMouseLeave:o,onPaneContextMenu:l,onPaneScroll:c,panOnDrag:re,isSelecting:!!he,selectionMode:y,selectionKeyPressed:L,paneClickDistance:d,selectionOnDrag:ge,children:[t,ie&&$.jsx(lB,{onSelectionContextMenu:_,noPanClassName:T,disableKeyboardA11y:V})]})})}Rw.displayName="FlowRenderer";const cB=P.memo(Rw),fB=t=>e=>t?Km(e.nodeLookup,{x:0,y:0,width:e.width,height:e.height},e.transform,!0).map(n=>n.id):Array.from(e.nodeLookup.keys());function dB(t){return Xe(P.useCallback(fB(t),[t]),ht)}const hB=t=>t.updateNodeInternals;function gB(){const t=Xe(hB),[e]=P.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(n=>{const a=new Map;n.forEach(o=>{const l=o.target.getAttribute("data-id");a.set(l,{id:l,nodeElement:o.target,force:!0})}),t(a)}));return P.useEffect(()=>()=>{e?.disconnect()},[e]),e}function mB({node:t,nodeType:e,hasDimensions:n,resizeObserver:a}){const o=ft(),l=P.useRef(null),c=P.useRef(null),d=P.useRef(t.sourcePosition),m=P.useRef(t.targetPosition),h=P.useRef(e),p=n&&!!t.internals.handleBounds;return P.useEffect(()=>{l.current&&!t.hidden&&(!p||c.current!==l.current)&&(c.current&&a?.unobserve(c.current),a?.observe(l.current),c.current=l.current)},[p,t.hidden]),P.useEffect(()=>()=>{c.current&&(a?.unobserve(c.current),c.current=null)},[]),P.useEffect(()=>{if(l.current){const y=h.current!==e,v=d.current!==t.sourcePosition,S=m.current!==t.targetPosition;(y||v||S)&&(h.current=e,d.current=t.sourcePosition,m.current=t.targetPosition,o.getState().updateNodeInternals(new Map([[t.id,{id:t.id,nodeElement:l.current,force:!0}]])))}},[t.id,e,t.sourcePosition,t.targetPosition]),l}function pB({id:t,onClick:e,onMouseEnter:n,onMouseMove:a,onMouseLeave:o,onContextMenu:l,onDoubleClick:c,nodesDraggable:d,elementsSelectable:m,nodesConnectable:h,nodesFocusable:p,resizeObserver:y,noDragClassName:v,noPanClassName:S,disableKeyboardA11y:E,rfId:A,nodeTypes:R,nodeClickDistance:x,onError:Y}){const{node:N,internals:I,isParent:O}=Xe(ce=>{const me=ce.nodeLookup.get(t),_e=ce.parentLookup.has(t);return{node:me,internals:me.internals,isParent:_e}},ht);let B=N.type||"default",M=R?.[B]||dA[B];M===void 0&&(Y?.("003",mr.error003(B)),B="default",M=R?.default||dA.default);const W=!!(N.draggable||d&&typeof N.draggable>"u"),q=!!(N.selectable||m&&typeof N.selectable>"u"),de=!!(N.connectable||h&&typeof N.connectable>"u"),ne=!!(N.focusable||p&&typeof N.focusable>"u"),te=ft(),le=Q1(N),_=mB({node:N,nodeType:B,hasDimensions:le,resizeObserver:y}),K=Tw({nodeRef:_,disabled:N.hidden||!W,noDragClassName:v,handleSelector:N.dragHandle,nodeId:t,isSelectable:q,nodeClickDistance:x}),T=Cw();if(N.hidden)return null;const V=jr(N),Z=sB(N),H=q||W||e||n||a||o,ie=n?ce=>n(ce,{...I.userNode}):void 0,C=a?ce=>a(ce,{...I.userNode}):void 0,L=o?ce=>o(ce,{...I.userNode}):void 0,ee=l?ce=>l(ce,{...I.userNode}):void 0,re=c?ce=>c(ce,{...I.userNode}):void 0,fe=ce=>{const{selectNodesOnDrag:me,nodeDragThreshold:_e}=te.getState();q&&(!me||!W||_e>0)&&Fg({id:t,store:te,nodeRef:_}),e&&e(ce,{...I.userNode})},ge=ce=>{if(!(tw(ce.nativeEvent)||E)){if(X1.includes(ce.key)&&q){const me=ce.key==="Escape";Fg({id:t,store:te,unselect:me,nodeRef:_})}else if(W&&N.selected&&Object.prototype.hasOwnProperty.call(rf,ce.key)){ce.preventDefault();const{ariaLabelConfig:me}=te.getState();te.setState({ariaLiveMessage:me["node.a11yDescription.ariaLiveMessage"]({direction:ce.key.replace("Arrow","").toLowerCase(),x:~~I.positionAbsolute.x,y:~~I.positionAbsolute.y})}),T({direction:rf[ce.key],factor:ce.shiftKey?4:1})}}},he=()=>{if(E||!_.current?.matches(":focus-visible"))return;const{transform:ce,width:me,height:_e,autoPanOnNodeFocus:Re,setCenter:Ne}=te.getState();if(!Re)return;Km(new Map([[t,N]]),{x:0,y:0,width:me,height:_e},ce,!0).length>0||Ne(N.position.x+V.width/2,N.position.y+V.height/2,{zoom:ce[2]})};return $.jsx("div",{className:xt(["react-flow__node",`react-flow__node-${B}`,{[S]:W},N.className,{selected:N.selected,selectable:q,parent:O,draggable:W,dragging:K}]),ref:_,style:{zIndex:I.z,transform:`translate(${I.positionAbsolute.x}px,${I.positionAbsolute.y}px)`,pointerEvents:H?"all":"none",visibility:le?"visible":"hidden",...N.style,...Z},"data-id":t,"data-testid":`rf__node-${t}`,onMouseEnter:ie,onMouseMove:C,onMouseLeave:L,onContextMenu:ee,onClick:fe,onDoubleClick:re,onKeyDown:ne?ge:void 0,tabIndex:ne?0:void 0,onFocus:ne?he:void 0,role:N.ariaRole??(ne?"group":void 0),"aria-roledescription":"node","aria-describedby":E?void 0:`${Sw}-${A}`,"aria-label":N.ariaLabel,...N.domAttributes,children:$.jsx(QM,{value:t,children:$.jsx(M,{id:t,data:N.data,type:B,positionAbsoluteX:I.positionAbsolute.x,positionAbsoluteY:I.positionAbsolute.y,selected:N.selected??!1,selectable:q,draggable:W,deletable:N.deletable??!0,isConnectable:de,sourcePosition:N.sourcePosition,targetPosition:N.targetPosition,dragging:K,dragHandle:N.dragHandle,zIndex:I.z,parentId:N.parentId,...V})})})}var yB=P.memo(pB);const vB=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,onError:t.onError});function Dw(t){const{nodesDraggable:e,nodesConnectable:n,nodesFocusable:a,elementsSelectable:o,onError:l}=Xe(vB,ht),c=dB(t.onlyRenderVisibleElements),d=gB();return $.jsx("div",{className:"react-flow__nodes",style:xf,children:c.map(m=>$.jsx(yB,{id:m,nodeTypes:t.nodeTypes,nodeExtent:t.nodeExtent,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,resizeObserver:d,nodesDraggable:e,nodesConnectable:n,nodesFocusable:a,elementsSelectable:o,nodeClickDistance:t.nodeClickDistance,onError:l},m))})}Dw.displayName="NodeRenderer";const bB=P.memo(Dw);function SB(t){return Xe(P.useCallback(n=>{if(!t)return n.edges.map(o=>o.id);const a=[];if(n.width&&n.height)for(const o of n.edges){const l=n.nodeLookup.get(o.source),c=n.nodeLookup.get(o.target);l&&c&&pO({sourceNode:l,targetNode:c,width:n.width,height:n.height,transform:n.transform})&&a.push(o.id)}return a},[t]),ht)}const AB=({color:t="none",strokeWidth:e=1})=>{const n={strokeWidth:e,...t&&{stroke:t}};return $.jsx("polyline",{className:"arrow",style:n,strokeLinecap:"round",fill:"none",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4"})},EB=({color:t="none",strokeWidth:e=1})=>{const n={strokeWidth:e,...t&&{stroke:t,fill:t}};return $.jsx("polyline",{className:"arrowclosed",style:n,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},gA={[qc.Arrow]:AB,[qc.ArrowClosed]:EB};function wB(t){const e=ft();return P.useMemo(()=>Object.prototype.hasOwnProperty.call(gA,t)?gA[t]:(e.getState().onError?.("009",mr.error009(t)),null),[t])}const NB=({id:t,type:e,color:n,width:a=12.5,height:o=12.5,markerUnits:l="strokeWidth",strokeWidth:c,orient:d="auto-start-reverse"})=>{const m=wB(e);return m?$.jsx("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${a}`,markerHeight:`${o}`,viewBox:"-10 -10 20 20",markerUnits:l,orient:d,refX:"0",refY:"0",children:$.jsx(m,{color:n,strokeWidth:c})}):null},_w=({defaultColor:t,rfId:e})=>{const n=Xe(l=>l.edges),a=Xe(l=>l.defaultEdgeOptions),o=P.useMemo(()=>NO(n,{id:e,defaultColor:t,defaultMarkerStart:a?.markerStart,defaultMarkerEnd:a?.markerEnd}),[n,a,e,t]);return o.length?$.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:$.jsx("defs",{children:o.map(l=>$.jsx(NB,{id:l.id,type:l.type,color:l.color,width:l.width,height:l.height,markerUnits:l.markerUnits,strokeWidth:l.strokeWidth,orient:l.orient},l.id))})}):null};_w.displayName="MarkerDefinitions";var xB=P.memo(_w);function Vw({x:t,y:e,label:n,labelStyle:a,labelShowBg:o=!0,labelBgStyle:l,labelBgPadding:c=[2,4],labelBgBorderRadius:d=2,children:m,className:h,...p}){const[y,v]=P.useState({x:1,y:0,width:0,height:0}),S=xt(["react-flow__edge-textwrapper",h]),E=P.useRef(null);return P.useEffect(()=>{if(E.current){const A=E.current.getBBox();v({x:A.x,y:A.y,width:A.width,height:A.height})}},[n]),n?$.jsxs("g",{transform:`translate(${t-y.width/2} ${e-y.height/2})`,className:S,visibility:y.width?"visible":"hidden",...p,children:[o&&$.jsx("rect",{width:y.width+2*c[0],x:-c[0],y:-c[1],height:y.height+2*c[1],className:"react-flow__edge-textbg",style:l,rx:d,ry:d}),$.jsx("text",{className:"react-flow__edge-text",y:y.height/2,dy:"0.3em",ref:E,style:a,children:n}),m]}):null}Vw.displayName="EdgeText";const TB=P.memo(Vw);function Tf({path:t,labelX:e,labelY:n,label:a,labelStyle:o,labelShowBg:l,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:m,interactionWidth:h=20,...p}){return $.jsxs($.Fragment,{children:[$.jsx("path",{...p,d:t,fill:"none",className:xt(["react-flow__edge-path",p.className])}),h?$.jsx("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:h,className:"react-flow__edge-interaction"}):null,a&&$n(e)&&$n(n)?$.jsx(TB,{x:e,y:n,label:a,labelStyle:o,labelShowBg:l,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:m}):null]})}function mA({pos:t,x1:e,y1:n,x2:a,y2:o}){return t===we.Left||t===we.Right?[.5*(e+a),n]:[e,.5*(n+o)]}function Ow({sourceX:t,sourceY:e,sourcePosition:n=we.Bottom,targetX:a,targetY:o,targetPosition:l=we.Top}){const[c,d]=mA({pos:n,x1:t,y1:e,x2:a,y2:o}),[m,h]=mA({pos:l,x1:a,y1:o,x2:t,y2:e}),[p,y,v,S]=rw({sourceX:t,sourceY:e,targetX:a,targetY:o,sourceControlX:c,sourceControlY:d,targetControlX:m,targetControlY:h});return[`M${t},${e} C${c},${d} ${m},${h} ${a},${o}`,p,y,v,S]}function Mw(t){return P.memo(({id:e,sourceX:n,sourceY:a,targetX:o,targetY:l,sourcePosition:c,targetPosition:d,label:m,labelStyle:h,labelShowBg:p,labelBgStyle:y,labelBgPadding:v,labelBgBorderRadius:S,style:E,markerEnd:A,markerStart:R,interactionWidth:x})=>{const[Y,N,I]=Ow({sourceX:n,sourceY:a,sourcePosition:c,targetX:o,targetY:l,targetPosition:d}),O=t.isInternal?void 0:e;return $.jsx(Tf,{id:O,path:Y,labelX:N,labelY:I,label:m,labelStyle:h,labelShowBg:p,labelBgStyle:y,labelBgPadding:v,labelBgBorderRadius:S,style:E,markerEnd:A,markerStart:R,interactionWidth:x})})}const CB=Mw({isInternal:!1}),Bw=Mw({isInternal:!0});CB.displayName="SimpleBezierEdge";Bw.displayName="SimpleBezierEdgeInternal";function Lw(t){return P.memo(({id:e,sourceX:n,sourceY:a,targetX:o,targetY:l,label:c,labelStyle:d,labelShowBg:m,labelBgStyle:h,labelBgPadding:p,labelBgBorderRadius:y,style:v,sourcePosition:S=we.Bottom,targetPosition:E=we.Top,markerEnd:A,markerStart:R,pathOptions:x,interactionWidth:Y})=>{const[N,I,O]=Xg({sourceX:n,sourceY:a,sourcePosition:S,targetX:o,targetY:l,targetPosition:E,borderRadius:x?.borderRadius,offset:x?.offset,stepPosition:x?.stepPosition}),B=t.isInternal?void 0:e;return $.jsx(Tf,{id:B,path:N,labelX:I,labelY:O,label:c,labelStyle:d,labelShowBg:m,labelBgStyle:h,labelBgPadding:p,labelBgBorderRadius:y,style:v,markerEnd:A,markerStart:R,interactionWidth:Y})})}const zw=Lw({isInternal:!1}),Uw=Lw({isInternal:!0});zw.displayName="SmoothStepEdge";Uw.displayName="SmoothStepEdgeInternal";function Yw(t){return P.memo(({id:e,...n})=>{const a=t.isInternal?void 0:e;return $.jsx(zw,{...n,id:a,pathOptions:P.useMemo(()=>({borderRadius:0,offset:n.pathOptions?.offset}),[n.pathOptions?.offset])})})}const IB=Yw({isInternal:!1}),Zw=Yw({isInternal:!0});IB.displayName="StepEdge";Zw.displayName="StepEdgeInternal";function Gw(t){return P.memo(({id:e,sourceX:n,sourceY:a,targetX:o,targetY:l,label:c,labelStyle:d,labelShowBg:m,labelBgStyle:h,labelBgPadding:p,labelBgBorderRadius:y,style:v,markerEnd:S,markerStart:E,interactionWidth:A})=>{const[R,x,Y]=sw({sourceX:n,sourceY:a,targetX:o,targetY:l}),N=t.isInternal?void 0:e;return $.jsx(Tf,{id:N,path:R,labelX:x,labelY:Y,label:c,labelStyle:d,labelShowBg:m,labelBgStyle:h,labelBgPadding:p,labelBgBorderRadius:y,style:v,markerEnd:S,markerStart:E,interactionWidth:A})})}const RB=Gw({isInternal:!1}),kw=Gw({isInternal:!0});RB.displayName="StraightEdge";kw.displayName="StraightEdgeInternal";function Xw(t){return P.memo(({id:e,sourceX:n,sourceY:a,targetX:o,targetY:l,sourcePosition:c=we.Bottom,targetPosition:d=we.Top,label:m,labelStyle:h,labelShowBg:p,labelBgStyle:y,labelBgPadding:v,labelBgBorderRadius:S,style:E,markerEnd:A,markerStart:R,pathOptions:x,interactionWidth:Y})=>{const[N,I,O]=iw({sourceX:n,sourceY:a,sourcePosition:c,targetX:o,targetY:l,targetPosition:d,curvature:x?.curvature}),B=t.isInternal?void 0:e;return $.jsx(Tf,{id:B,path:N,labelX:I,labelY:O,label:m,labelStyle:h,labelShowBg:p,labelBgStyle:y,labelBgPadding:v,labelBgBorderRadius:S,style:E,markerEnd:A,markerStart:R,interactionWidth:Y})})}const DB=Xw({isInternal:!1}),Ww=Xw({isInternal:!0});DB.displayName="BezierEdge";Ww.displayName="BezierEdgeInternal";const pA={default:Ww,straight:kw,step:Zw,smoothstep:Uw,simplebezier:Bw},yA={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},_B=(t,e,n)=>n===we.Left?t-e:n===we.Right?t+e:t,VB=(t,e,n)=>n===we.Top?t-e:n===we.Bottom?t+e:t,vA="react-flow__edgeupdater";function bA({position:t,centerX:e,centerY:n,radius:a=10,onMouseDown:o,onMouseEnter:l,onMouseOut:c,type:d}){return $.jsx("circle",{onMouseDown:o,onMouseEnter:l,onMouseOut:c,className:xt([vA,`${vA}-${d}`]),cx:_B(e,a,t),cy:VB(n,a,t),r:a,stroke:"transparent",fill:"transparent"})}function OB({isReconnectable:t,reconnectRadius:e,edge:n,sourceX:a,sourceY:o,targetX:l,targetY:c,sourcePosition:d,targetPosition:m,onReconnect:h,onReconnectStart:p,onReconnectEnd:y,setReconnecting:v,setUpdateHover:S}){const E=ft(),A=(I,O)=>{if(I.button!==0)return;const{autoPanOnConnect:B,domNode:M,isValidConnection:W,connectionMode:q,connectionRadius:de,lib:ne,onConnectStart:te,onConnectEnd:le,cancelConnection:_,nodeLookup:K,rfId:T,panBy:V,updateConnection:Z}=E.getState(),H=O.type==="target",ie=(ee,re)=>{v(!1),y?.(ee,n,O.type,re)},C=ee=>h?.(n,ee),L=(ee,re)=>{v(!0),p?.(I,n,O.type),te?.(ee,re)};Hg.onPointerDown(I.nativeEvent,{autoPanOnConnect:B,connectionMode:q,connectionRadius:de,domNode:M,handleId:O.id,nodeId:O.nodeId,nodeLookup:K,isTarget:H,edgeUpdaterType:O.type,lib:ne,flowId:T,cancelConnection:_,panBy:V,isValidConnection:W,onConnect:C,onConnectStart:L,onConnectEnd:le,onReconnectEnd:ie,updateConnection:Z,getTransform:()=>E.getState().transform,getFromHandle:()=>E.getState().connection.fromHandle,dragThreshold:E.getState().connectionDragThreshold,handleDomNode:I.currentTarget})},R=I=>A(I,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),x=I=>A(I,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),Y=()=>S(!0),N=()=>S(!1);return $.jsxs($.Fragment,{children:[(t===!0||t==="source")&&$.jsx(bA,{position:d,centerX:a,centerY:o,radius:e,onMouseDown:R,onMouseEnter:Y,onMouseOut:N,type:"source"}),(t===!0||t==="target")&&$.jsx(bA,{position:m,centerX:l,centerY:c,radius:e,onMouseDown:x,onMouseEnter:Y,onMouseOut:N,type:"target"})]})}function MB({id:t,edgesFocusable:e,edgesReconnectable:n,elementsSelectable:a,onClick:o,onDoubleClick:l,onContextMenu:c,onMouseEnter:d,onMouseMove:m,onMouseLeave:h,reconnectRadius:p,onReconnect:y,onReconnectStart:v,onReconnectEnd:S,rfId:E,edgeTypes:A,noPanClassName:R,onError:x,disableKeyboardA11y:Y}){let N=Xe(Ne=>Ne.edgeLookup.get(t));const I=Xe(Ne=>Ne.defaultEdgeOptions);N=I?{...I,...N}:N;let O=N.type||"default",B=A?.[O]||pA[O];B===void 0&&(x?.("011",mr.error011(O)),O="default",B=A?.default||pA.default);const M=!!(N.focusable||e&&typeof N.focusable>"u"),W=typeof y<"u"&&(N.reconnectable||n&&typeof N.reconnectable>"u"),q=!!(N.selectable||a&&typeof N.selectable>"u"),de=P.useRef(null),[ne,te]=P.useState(!1),[le,_]=P.useState(!1),K=ft(),{zIndex:T,sourceX:V,sourceY:Z,targetX:H,targetY:ie,sourcePosition:C,targetPosition:L}=Xe(P.useCallback(Ne=>{const Te=Ne.nodeLookup.get(N.source),Ye=Ne.nodeLookup.get(N.target);if(!Te||!Ye)return{zIndex:N.zIndex,...yA};const Qe=wO({id:t,sourceNode:Te,targetNode:Ye,sourceHandle:N.sourceHandle||null,targetHandle:N.targetHandle||null,connectionMode:Ne.connectionMode,onError:x});return{zIndex:mO({selected:N.selected,zIndex:N.zIndex,sourceNode:Te,targetNode:Ye,elevateOnSelect:Ne.elevateEdgesOnSelect}),...Qe||yA}},[N.source,N.target,N.sourceHandle,N.targetHandle,N.selected,N.zIndex]),ht),ee=P.useMemo(()=>N.markerStart?`url('#${Wg(N.markerStart,E)}')`:void 0,[N.markerStart,E]),re=P.useMemo(()=>N.markerEnd?`url('#${Wg(N.markerEnd,E)}')`:void 0,[N.markerEnd,E]);if(N.hidden||V===null||Z===null||H===null||ie===null)return null;const fe=Ne=>{const{addSelectedEdges:Te,unselectNodesAndEdges:Ye,multiSelectionActive:Qe}=K.getState();q&&(K.setState({nodesSelectionActive:!1}),N.selected&&Qe?(Ye({nodes:[],edges:[N]}),de.current?.blur()):Te([t])),o&&o(Ne,N)},ge=l?Ne=>{l(Ne,{...N})}:void 0,he=c?Ne=>{c(Ne,{...N})}:void 0,ce=d?Ne=>{d(Ne,{...N})}:void 0,me=m?Ne=>{m(Ne,{...N})}:void 0,_e=h?Ne=>{h(Ne,{...N})}:void 0,Re=Ne=>{if(!Y&&X1.includes(Ne.key)&&q){const{unselectNodesAndEdges:Te,addSelectedEdges:Ye}=K.getState();Ne.key==="Escape"?(de.current?.blur(),Te({edges:[N]})):Ye([t])}};return $.jsx("svg",{style:{zIndex:T},children:$.jsxs("g",{className:xt(["react-flow__edge",`react-flow__edge-${O}`,N.className,R,{selected:N.selected,animated:N.animated,inactive:!q&&!o,updating:ne,selectable:q}]),onClick:fe,onDoubleClick:ge,onContextMenu:he,onMouseEnter:ce,onMouseMove:me,onMouseLeave:_e,onKeyDown:M?Re:void 0,tabIndex:M?0:void 0,role:N.ariaRole??(M?"group":"img"),"aria-roledescription":"edge","data-id":t,"data-testid":`rf__edge-${t}`,"aria-label":N.ariaLabel===null?void 0:N.ariaLabel||`Edge from ${N.source} to ${N.target}`,"aria-describedby":M?`${Aw}-${E}`:void 0,ref:de,...N.domAttributes,children:[!le&&$.jsx(B,{id:t,source:N.source,target:N.target,type:N.type,selected:N.selected,animated:N.animated,selectable:q,deletable:N.deletable??!0,label:N.label,labelStyle:N.labelStyle,labelShowBg:N.labelShowBg,labelBgStyle:N.labelBgStyle,labelBgPadding:N.labelBgPadding,labelBgBorderRadius:N.labelBgBorderRadius,sourceX:V,sourceY:Z,targetX:H,targetY:ie,sourcePosition:C,targetPosition:L,data:N.data,style:N.style,sourceHandleId:N.sourceHandle,targetHandleId:N.targetHandle,markerStart:ee,markerEnd:re,pathOptions:"pathOptions"in N?N.pathOptions:void 0,interactionWidth:N.interactionWidth}),W&&$.jsx(OB,{edge:N,isReconnectable:W,reconnectRadius:p,onReconnect:y,onReconnectStart:v,onReconnectEnd:S,sourceX:V,sourceY:Z,targetX:H,targetY:ie,sourcePosition:C,targetPosition:L,setUpdateHover:te,setReconnecting:_})]})})}var BB=P.memo(MB);const LB=t=>({edgesFocusable:t.edgesFocusable,edgesReconnectable:t.edgesReconnectable,elementsSelectable:t.elementsSelectable,connectionMode:t.connectionMode,onError:t.onError});function Kw({defaultMarkerColor:t,onlyRenderVisibleElements:e,rfId:n,edgeTypes:a,noPanClassName:o,onReconnect:l,onEdgeContextMenu:c,onEdgeMouseEnter:d,onEdgeMouseMove:m,onEdgeMouseLeave:h,onEdgeClick:p,reconnectRadius:y,onEdgeDoubleClick:v,onReconnectStart:S,onReconnectEnd:E,disableKeyboardA11y:A}){const{edgesFocusable:R,edgesReconnectable:x,elementsSelectable:Y,onError:N}=Xe(LB,ht),I=SB(e);return $.jsxs("div",{className:"react-flow__edges",children:[$.jsx(xB,{defaultColor:t,rfId:n}),I.map(O=>$.jsx(BB,{id:O,edgesFocusable:R,edgesReconnectable:x,elementsSelectable:Y,noPanClassName:o,onReconnect:l,onContextMenu:c,onMouseEnter:d,onMouseMove:m,onMouseLeave:h,onClick:p,reconnectRadius:y,onDoubleClick:v,onReconnectStart:S,onReconnectEnd:E,rfId:n,onError:N,edgeTypes:a,disableKeyboardA11y:A},O))]})}Kw.displayName="EdgeRenderer";const zB=P.memo(Kw),UB=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function YB({children:t}){const e=Xe(UB);return $.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:e},children:t})}function ZB(t){const e=Qm(),n=P.useRef(!1);P.useEffect(()=>{!n.current&&e.viewportInitialized&&t&&(setTimeout(()=>t(e),1),n.current=!0)},[t,e.viewportInitialized])}const GB=t=>t.panZoom?.syncViewport;function kB(t){const e=Xe(GB),n=ft();return P.useEffect(()=>{t&&(e?.(t),n.setState({transform:[t.x,t.y,t.zoom]}))},[t,e]),null}function XB(t){return t.connection.inProgress?{...t.connection,to:kl(t.connection.to,t.transform)}:{...t.connection}}function WB(t){return XB}function KB(t){const e=WB();return Xe(e,ht)}const HB=t=>({nodesConnectable:t.nodesConnectable,isValid:t.connection.isValid,inProgress:t.connection.inProgress,width:t.width,height:t.height});function FB({containerStyle:t,style:e,type:n,component:a}){const{nodesConnectable:o,width:l,height:c,isValid:d,inProgress:m}=Xe(HB,ht);return!(l&&o&&m)?null:$.jsx("svg",{style:t,width:l,height:c,className:"react-flow__connectionline react-flow__container",children:$.jsx("g",{className:xt(["react-flow__connection",H1(d)]),children:$.jsx(Hw,{style:e,type:n,CustomComponent:a,isValid:d})})})}const Hw=({style:t,type:e=Vi.Bezier,CustomComponent:n,isValid:a})=>{const{inProgress:o,from:l,fromNode:c,fromHandle:d,fromPosition:m,to:h,toNode:p,toHandle:y,toPosition:v,pointer:S}=KB();if(!o)return;if(n)return $.jsx(n,{connectionLineType:e,connectionLineStyle:t,fromNode:c,fromHandle:d,fromX:l.x,fromY:l.y,toX:h.x,toY:h.y,fromPosition:m,toPosition:v,connectionStatus:H1(a),toNode:p,toHandle:y,pointer:S});let E="";const A={sourceX:l.x,sourceY:l.y,sourcePosition:m,targetX:h.x,targetY:h.y,targetPosition:v};switch(e){case Vi.Bezier:[E]=iw(A);break;case Vi.SimpleBezier:[E]=Ow(A);break;case Vi.Step:[E]=Xg({...A,borderRadius:0});break;case Vi.SmoothStep:[E]=Xg(A);break;default:[E]=sw(A)}return $.jsx("path",{d:E,fill:"none",className:"react-flow__connection-path",style:t})};Hw.displayName="ConnectionLine";const JB={};function SA(t=JB){P.useRef(t),ft(),P.useEffect(()=>{},[t])}function jB(){ft(),P.useRef(!1),P.useEffect(()=>{},[])}function Fw({nodeTypes:t,edgeTypes:e,onInit:n,onNodeClick:a,onEdgeClick:o,onNodeDoubleClick:l,onEdgeDoubleClick:c,onNodeMouseEnter:d,onNodeMouseMove:m,onNodeMouseLeave:h,onNodeContextMenu:p,onSelectionContextMenu:y,onSelectionStart:v,onSelectionEnd:S,connectionLineType:E,connectionLineStyle:A,connectionLineComponent:R,connectionLineContainerStyle:x,selectionKeyCode:Y,selectionOnDrag:N,selectionMode:I,multiSelectionKeyCode:O,panActivationKeyCode:B,zoomActivationKeyCode:M,deleteKeyCode:W,onlyRenderVisibleElements:q,elementsSelectable:de,defaultViewport:ne,translateExtent:te,minZoom:le,maxZoom:_,preventScrolling:K,defaultMarkerColor:T,zoomOnScroll:V,zoomOnPinch:Z,panOnScroll:H,panOnScrollSpeed:ie,panOnScrollMode:C,zoomOnDoubleClick:L,panOnDrag:ee,onPaneClick:re,onPaneMouseEnter:fe,onPaneMouseMove:ge,onPaneMouseLeave:he,onPaneScroll:ce,onPaneContextMenu:me,paneClickDistance:_e,nodeClickDistance:Re,onEdgeContextMenu:Ne,onEdgeMouseEnter:Te,onEdgeMouseMove:Ye,onEdgeMouseLeave:Qe,reconnectRadius:qe,onReconnect:Tt,onReconnectStart:Sn,onReconnectEnd:Ln,noDragClassName:$r,noWheelClassName:Pr,noPanClassName:Gi,disableKeyboardA11y:ki,nodeExtent:Vt,rfId:xa,viewport:yr,onViewportChange:Qr}){return SA(t),SA(e),jB(),ZB(n),kB(yr),$.jsx(cB,{onPaneClick:re,onPaneMouseEnter:fe,onPaneMouseMove:ge,onPaneMouseLeave:he,onPaneContextMenu:me,onPaneScroll:ce,paneClickDistance:_e,deleteKeyCode:W,selectionKeyCode:Y,selectionOnDrag:N,selectionMode:I,onSelectionStart:v,onSelectionEnd:S,multiSelectionKeyCode:O,panActivationKeyCode:B,zoomActivationKeyCode:M,elementsSelectable:de,zoomOnScroll:V,zoomOnPinch:Z,zoomOnDoubleClick:L,panOnScroll:H,panOnScrollSpeed:ie,panOnScrollMode:C,panOnDrag:ee,defaultViewport:ne,translateExtent:te,minZoom:le,maxZoom:_,onSelectionContextMenu:y,preventScrolling:K,noDragClassName:$r,noWheelClassName:Pr,noPanClassName:Gi,disableKeyboardA11y:ki,onViewportChange:Qr,isControlledViewport:!!yr,children:$.jsxs(YB,{children:[$.jsx(zB,{edgeTypes:e,onEdgeClick:o,onEdgeDoubleClick:c,onReconnect:Tt,onReconnectStart:Sn,onReconnectEnd:Ln,onlyRenderVisibleElements:q,onEdgeContextMenu:Ne,onEdgeMouseEnter:Te,onEdgeMouseMove:Ye,onEdgeMouseLeave:Qe,reconnectRadius:qe,defaultMarkerColor:T,noPanClassName:Gi,disableKeyboardA11y:ki,rfId:xa}),$.jsx(FB,{style:A,type:E,component:R,containerStyle:x}),$.jsx("div",{className:"react-flow__edgelabel-renderer"}),$.jsx(bB,{nodeTypes:t,onNodeClick:a,onNodeDoubleClick:l,onNodeMouseEnter:d,onNodeMouseMove:m,onNodeMouseLeave:h,onNodeContextMenu:p,nodeClickDistance:Re,onlyRenderVisibleElements:q,noPanClassName:Gi,noDragClassName:$r,disableKeyboardA11y:ki,nodeExtent:Vt,rfId:xa}),$.jsx("div",{className:"react-flow__viewport-portal"})]})})}Fw.displayName="GraphView";const $B=P.memo(Fw),AA=({nodes:t,edges:e,defaultNodes:n,defaultEdges:a,width:o,height:l,fitView:c,fitViewOptions:d,minZoom:m=.5,maxZoom:h=2,nodeOrigin:p,nodeExtent:y}={})=>{const v=new Map,S=new Map,E=new Map,A=new Map,R=a??e??[],x=n??t??[],Y=p??[0,0],N=y??xl;uw(E,A,R);const I=Kg(x,v,S,{nodeOrigin:Y,nodeExtent:N,elevateNodesOnSelect:!1});let O=[0,0,1];if(c&&o&&l){const B=Zl(v,{filter:de=>!!((de.width||de.initialWidth)&&(de.height||de.initialHeight))}),{x:M,y:W,zoom:q}=Hm(B,o,l,m,h,d?.padding??.1);O=[M,W,q]}return{rfId:"1",width:o??0,height:l??0,transform:O,nodes:x,nodesInitialized:I,nodeLookup:v,parentLookup:S,edges:R,edgeLookup:A,connectionLookup:E,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:n!==void 0,hasDefaultEdges:a!==void 0,panZoom:null,minZoom:m,maxZoom:h,translateExtent:xl,nodeExtent:N,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:Ks.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:Y,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:c??!1,fitViewOptions:d,fitViewResolver:null,connection:{...K1},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:uO,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:W1}},PB=({nodes:t,edges:e,defaultNodes:n,defaultEdges:a,width:o,height:l,fitView:c,fitViewOptions:d,minZoom:m,maxZoom:h,nodeOrigin:p,nodeExtent:y})=>hM((v,S)=>{async function E(){const{nodeLookup:A,panZoom:R,fitViewOptions:x,fitViewResolver:Y,width:N,height:I,minZoom:O,maxZoom:B}=S();R&&(await oO({nodes:A,width:N,height:I,panZoom:R,minZoom:O,maxZoom:B},x),Y?.resolve(!0),v({fitViewResolver:null}))}return{...AA({nodes:t,edges:e,width:o,height:l,fitView:c,fitViewOptions:d,minZoom:m,maxZoom:h,nodeOrigin:p,nodeExtent:y,defaultNodes:n,defaultEdges:a}),setNodes:A=>{const{nodeLookup:R,parentLookup:x,nodeOrigin:Y,elevateNodesOnSelect:N,fitViewQueued:I}=S(),O=Kg(A,R,x,{nodeOrigin:Y,nodeExtent:y,elevateNodesOnSelect:N,checkEquality:!0});I&&O?(E(),v({nodes:A,nodesInitialized:O,fitViewQueued:!1,fitViewOptions:void 0})):v({nodes:A,nodesInitialized:O})},setEdges:A=>{const{connectionLookup:R,edgeLookup:x}=S();uw(R,x,A),v({edges:A})},setDefaultNodesAndEdges:(A,R)=>{if(A){const{setNodes:x}=S();x(A),v({hasDefaultNodes:!0})}if(R){const{setEdges:x}=S();x(R),v({hasDefaultEdges:!0})}},updateNodeInternals:A=>{const{triggerNodeChanges:R,nodeLookup:x,parentLookup:Y,domNode:N,nodeOrigin:I,nodeExtent:O,debug:B,fitViewQueued:M}=S(),{changes:W,updatedInternals:q}=_O(A,x,Y,N,I,O);q&&(CO(x,Y,{nodeOrigin:I,nodeExtent:O}),M?(E(),v({fitViewQueued:!1,fitViewOptions:void 0})):v({}),W?.length>0&&(B&&console.log("React Flow: trigger node changes",W),R?.(W)))},updateNodePositions:(A,R=!1)=>{const x=[],Y=[],{nodeLookup:N,triggerNodeChanges:I}=S();for(const[O,B]of A){const M=N.get(O),W=!!(M?.expandParent&&M?.parentId&&B?.position),q={id:O,type:"position",position:W?{x:Math.max(0,B.position.x),y:Math.max(0,B.position.y)}:B.position,dragging:R};W&&M.parentId&&x.push({id:O,parentId:M.parentId,rect:{...B.internals.positionAbsolute,width:B.measured.width??0,height:B.measured.height??0}}),Y.push(q)}if(x.length>0){const{parentLookup:O,nodeOrigin:B}=S(),M=Pm(x,N,O,B);Y.push(...M)}I(Y)},triggerNodeChanges:A=>{const{onNodesChange:R,setNodes:x,nodes:Y,hasDefaultNodes:N,debug:I}=S();if(A?.length){if(N){const O=MM(A,Y);x(O)}I&&console.log("React Flow: trigger node changes",A),R?.(A)}},triggerEdgeChanges:A=>{const{onEdgesChange:R,setEdges:x,edges:Y,hasDefaultEdges:N,debug:I}=S();if(A?.length){if(N){const O=BM(A,Y);x(O)}I&&console.log("React Flow: trigger edge changes",A),R?.(A)}},addSelectedNodes:A=>{const{multiSelectionActive:R,edgeLookup:x,nodeLookup:Y,triggerNodeChanges:N,triggerEdgeChanges:I}=S();if(R){const O=A.map(B=>ha(B,!0));N(O);return}N(Ts(Y,new Set([...A]),!0)),I(Ts(x))},addSelectedEdges:A=>{const{multiSelectionActive:R,edgeLookup:x,nodeLookup:Y,triggerNodeChanges:N,triggerEdgeChanges:I}=S();if(R){const O=A.map(B=>ha(B,!0));I(O);return}I(Ts(x,new Set([...A]))),N(Ts(Y,new Set,!0))},unselectNodesAndEdges:({nodes:A,edges:R}={})=>{const{edges:x,nodes:Y,nodeLookup:N,triggerNodeChanges:I,triggerEdgeChanges:O}=S(),B=A||Y,M=R||x,W=B.map(de=>{const ne=N.get(de.id);return ne&&(ne.selected=!1),ha(de.id,!1)}),q=M.map(de=>ha(de.id,!1));I(W),O(q)},setMinZoom:A=>{const{panZoom:R,maxZoom:x}=S();R?.setScaleExtent([A,x]),v({minZoom:A})},setMaxZoom:A=>{const{panZoom:R,minZoom:x}=S();R?.setScaleExtent([x,A]),v({maxZoom:A})},setTranslateExtent:A=>{S().panZoom?.setTranslateExtent(A),v({translateExtent:A})},resetSelectedElements:()=>{const{edges:A,nodes:R,triggerNodeChanges:x,triggerEdgeChanges:Y,elementsSelectable:N}=S();if(!N)return;const I=R.reduce((B,M)=>M.selected?[...B,ha(M.id,!1)]:B,[]),O=A.reduce((B,M)=>M.selected?[...B,ha(M.id,!1)]:B,[]);x(I),Y(O)},setNodeExtent:A=>{const{nodes:R,nodeLookup:x,parentLookup:Y,nodeOrigin:N,elevateNodesOnSelect:I,nodeExtent:O}=S();A[0][0]===O[0][0]&&A[0][1]===O[0][1]&&A[1][0]===O[1][0]&&A[1][1]===O[1][1]||(Kg(R,x,Y,{nodeOrigin:N,nodeExtent:A,elevateNodesOnSelect:I,checkEquality:!1}),v({nodeExtent:A}))},panBy:A=>{const{transform:R,width:x,height:Y,panZoom:N,translateExtent:I}=S();return VO({delta:A,panZoom:N,transform:R,translateExtent:I,width:x,height:Y})},setCenter:async(A,R,x)=>{const{width:Y,height:N,maxZoom:I,panZoom:O}=S();if(!O)return Promise.resolve(!1);const B=typeof x?.zoom<"u"?x.zoom:I;return await O.setViewport({x:Y/2-A*B,y:N/2-R*B,zoom:B},{duration:x?.duration,ease:x?.ease,interpolate:x?.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{v({connection:{...K1}})},updateConnection:A=>{v({connection:A})},reset:()=>v({...AA()})}},Object.is);function QB({initialNodes:t,initialEdges:e,defaultNodes:n,defaultEdges:a,initialWidth:o,initialHeight:l,initialMinZoom:c,initialMaxZoom:d,initialFitViewOptions:m,fitView:h,nodeOrigin:p,nodeExtent:y,children:v}){const[S]=P.useState(()=>PB({nodes:t,edges:e,defaultNodes:n,defaultEdges:a,width:o,height:l,fitView:h,minZoom:c,maxZoom:d,fitViewOptions:m,nodeOrigin:p,nodeExtent:y}));return $.jsx(gM,{value:S,children:$.jsx(YM,{children:v})})}function qB({children:t,nodes:e,edges:n,defaultNodes:a,defaultEdges:o,width:l,height:c,fitView:d,fitViewOptions:m,minZoom:h,maxZoom:p,nodeOrigin:y,nodeExtent:v}){return P.useContext(wf)?$.jsx($.Fragment,{children:t}):$.jsx(QB,{initialNodes:e,initialEdges:n,defaultNodes:a,defaultEdges:o,initialWidth:l,initialHeight:c,fitView:d,initialFitViewOptions:m,initialMinZoom:h,initialMaxZoom:p,nodeOrigin:y,nodeExtent:v,children:t})}const e5={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function t5({nodes:t,edges:e,defaultNodes:n,defaultEdges:a,className:o,nodeTypes:l,edgeTypes:c,onNodeClick:d,onEdgeClick:m,onInit:h,onMove:p,onMoveStart:y,onMoveEnd:v,onConnect:S,onConnectStart:E,onConnectEnd:A,onClickConnectStart:R,onClickConnectEnd:x,onNodeMouseEnter:Y,onNodeMouseMove:N,onNodeMouseLeave:I,onNodeContextMenu:O,onNodeDoubleClick:B,onNodeDragStart:M,onNodeDrag:W,onNodeDragStop:q,onNodesDelete:de,onEdgesDelete:ne,onDelete:te,onSelectionChange:le,onSelectionDragStart:_,onSelectionDrag:K,onSelectionDragStop:T,onSelectionContextMenu:V,onSelectionStart:Z,onSelectionEnd:H,onBeforeDelete:ie,connectionMode:C,connectionLineType:L=Vi.Bezier,connectionLineStyle:ee,connectionLineComponent:re,connectionLineContainerStyle:fe,deleteKeyCode:ge="Backspace",selectionKeyCode:he="Shift",selectionOnDrag:ce=!1,selectionMode:me=Tl.Full,panActivationKeyCode:_e="Space",multiSelectionKeyCode:Re=Il()?"Meta":"Control",zoomActivationKeyCode:Ne=Il()?"Meta":"Control",snapToGrid:Te,snapGrid:Ye,onlyRenderVisibleElements:Qe=!1,selectNodesOnDrag:qe,nodesDraggable:Tt,autoPanOnNodeFocus:Sn,nodesConnectable:Ln,nodesFocusable:$r,nodeOrigin:Pr=Ew,edgesFocusable:Gi,edgesReconnectable:ki,elementsSelectable:Vt=!0,defaultViewport:xa=CM,minZoom:yr=.5,maxZoom:Qr=2,translateExtent:Xi=xl,preventScrolling:Cf=!0,nodeExtent:Ta,defaultMarkerColor:If="#b1b1b7",zoomOnScroll:Rf=!0,zoomOnPinch:Wi=!0,panOnScroll:Ht=!1,panOnScrollSpeed:er=.5,panOnScrollMode:Ft=va.Free,zoomOnDoubleClick:Df=!0,panOnDrag:_f=!0,onPaneClick:Vf,onPaneMouseEnter:Ca,onPaneMouseMove:Ia,onPaneMouseLeave:Ra,onPaneScroll:vr,onPaneContextMenu:Da,paneClickDistance:Ki=1,nodeClickDistance:Of=0,children:Xl,onReconnect:$s,onReconnectStart:Hi,onReconnectEnd:Mf,onEdgeContextMenu:Wl,onEdgeDoubleClick:Kl,onEdgeMouseEnter:Hl,onEdgeMouseMove:Ps,onEdgeMouseLeave:Qs,reconnectRadius:Fl=10,onNodesChange:Jl,onEdgesChange:tr,noDragClassName:Ct="nodrag",noWheelClassName:Zt="nowheel",noPanClassName:br="nopan",fitView:_a,fitViewOptions:jl,connectOnClick:Bf,attributionPosition:$l,proOptions:Fi,defaultEdgeOptions:qs,elevateNodesOnSelect:qr,elevateEdgesOnSelect:ei,disableKeyboardA11y:ti=!1,autoPanOnConnect:ni,autoPanOnNodeDrag:St,autoPanSpeed:Pl,connectionRadius:Ql,isValidConnection:Sr,onError:ri,style:Lf,id:eo,nodeDragThreshold:ql,connectionDragThreshold:zf,viewport:Va,onViewportChange:Oa,width:zn,height:jt,colorMode:eu="light",debug:Uf,onScroll:Ma,ariaLabelConfig:tu,...Ba},Yf){const Gt=eo||"1",to=_M(eu),nu=P.useCallback(La=>{La.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),Ma?.(La)},[Ma]);return $.jsx("div",{"data-testid":"rf__wrapper",...Ba,onScroll:nu,style:{...Lf,...e5},ref:Yf,className:xt(["react-flow",o,to]),id:eo,role:"application",children:$.jsxs(qB,{nodes:t,edges:e,width:zn,height:jt,fitView:_a,fitViewOptions:jl,minZoom:yr,maxZoom:Qr,nodeOrigin:Pr,nodeExtent:Ta,children:[$.jsx($B,{onInit:h,onNodeClick:d,onEdgeClick:m,onNodeMouseEnter:Y,onNodeMouseMove:N,onNodeMouseLeave:I,onNodeContextMenu:O,onNodeDoubleClick:B,nodeTypes:l,edgeTypes:c,connectionLineType:L,connectionLineStyle:ee,connectionLineComponent:re,connectionLineContainerStyle:fe,selectionKeyCode:he,selectionOnDrag:ce,selectionMode:me,deleteKeyCode:ge,multiSelectionKeyCode:Re,panActivationKeyCode:_e,zoomActivationKeyCode:Ne,onlyRenderVisibleElements:Qe,defaultViewport:xa,translateExtent:Xi,minZoom:yr,maxZoom:Qr,preventScrolling:Cf,zoomOnScroll:Rf,zoomOnPinch:Wi,zoomOnDoubleClick:Df,panOnScroll:Ht,panOnScrollSpeed:er,panOnScrollMode:Ft,panOnDrag:_f,onPaneClick:Vf,onPaneMouseEnter:Ca,onPaneMouseMove:Ia,onPaneMouseLeave:Ra,onPaneScroll:vr,onPaneContextMenu:Da,paneClickDistance:Ki,nodeClickDistance:Of,onSelectionContextMenu:V,onSelectionStart:Z,onSelectionEnd:H,onReconnect:$s,onReconnectStart:Hi,onReconnectEnd:Mf,onEdgeContextMenu:Wl,onEdgeDoubleClick:Kl,onEdgeMouseEnter:Hl,onEdgeMouseMove:Ps,onEdgeMouseLeave:Qs,reconnectRadius:Fl,defaultMarkerColor:If,noDragClassName:Ct,noWheelClassName:Zt,noPanClassName:br,rfId:Gt,disableKeyboardA11y:ti,nodeExtent:Ta,viewport:Va,onViewportChange:Oa}),$.jsx(DM,{nodes:t,edges:e,defaultNodes:n,defaultEdges:a,onConnect:S,onConnectStart:E,onConnectEnd:A,onClickConnectStart:R,onClickConnectEnd:x,nodesDraggable:Tt,autoPanOnNodeFocus:Sn,nodesConnectable:Ln,nodesFocusable:$r,edgesFocusable:Gi,edgesReconnectable:ki,elementsSelectable:Vt,elevateNodesOnSelect:qr,elevateEdgesOnSelect:ei,minZoom:yr,maxZoom:Qr,nodeExtent:Ta,onNodesChange:Jl,onEdgesChange:tr,snapToGrid:Te,snapGrid:Ye,connectionMode:C,translateExtent:Xi,connectOnClick:Bf,defaultEdgeOptions:qs,fitView:_a,fitViewOptions:jl,onNodesDelete:de,onEdgesDelete:ne,onDelete:te,onNodeDragStart:M,onNodeDrag:W,onNodeDragStop:q,onSelectionDrag:K,onSelectionDragStart:_,onSelectionDragStop:T,onMove:p,onMoveStart:y,onMoveEnd:v,noPanClassName:br,nodeOrigin:Pr,rfId:Gt,autoPanOnConnect:ni,autoPanOnNodeDrag:St,autoPanSpeed:Pl,onError:ri,connectionRadius:Ql,isValidConnection:Sr,selectNodesOnDrag:qe,nodeDragThreshold:ql,connectionDragThreshold:zf,onBeforeDelete:ie,debug:Uf,ariaLabelConfig:tu}),$.jsx(TM,{onSelectionChange:le}),Xl,$.jsx(AM,{proOptions:Fi,position:$l}),$.jsx(SM,{rfId:Gt,disableKeyboardA11y:ti})]})})}var n5=Nw(t5);function r5({dimensions:t,lineWidth:e,variant:n,className:a}){return $.jsx("path",{strokeWidth:e,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`,className:xt(["react-flow__background-pattern",n,a])})}function i5({radius:t,className:e}){return $.jsx("circle",{cx:t,cy:t,r:t,className:xt(["react-flow__background-pattern","dots",e])})}var Li;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(Li||(Li={}));const a5={[Li.Dots]:1,[Li.Lines]:1,[Li.Cross]:6},s5=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function Jw({id:t,variant:e=Li.Dots,gap:n=20,size:a,lineWidth:o=1,offset:l=0,color:c,bgColor:d,style:m,className:h,patternClassName:p}){const y=P.useRef(null),{transform:v,patternId:S}=Xe(s5,ht),E=a||a5[e],A=e===Li.Dots,R=e===Li.Cross,x=Array.isArray(n)?n:[n,n],Y=[x[0]*v[2]||1,x[1]*v[2]||1],N=E*v[2],I=Array.isArray(l)?l:[l,l],O=R?[N,N]:Y,B=[I[0]*v[2]||1+O[0]/2,I[1]*v[2]||1+O[1]/2],M=`${S}${t||""}`;return $.jsxs("svg",{className:xt(["react-flow__background",h]),style:{...m,...xf,"--xy-background-color-props":d,"--xy-background-pattern-color-props":c},ref:y,"data-testid":"rf__background",children:[$.jsx("pattern",{id:M,x:v[0]%Y[0],y:v[1]%Y[1],width:Y[0],height:Y[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${B[0]},-${B[1]})`,children:A?$.jsx(i5,{radius:N/2,className:p}):$.jsx(r5,{dimensions:O,lineWidth:o,variant:e,className:p})}),$.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${M})`})]})}Jw.displayName="Background";const o5=P.memo(Jw);function l5(){return $.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:$.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function u5(){return $.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:$.jsx("path",{d:"M0 0h32v4.2H0z"})})}function c5(){return $.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:$.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function f5(){return $.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:$.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function d5(){return $.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:$.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function Ic({children:t,className:e,...n}){return $.jsx("button",{type:"button",className:xt(["react-flow__controls-button",e]),...n,children:t})}const h5=t=>({isInteractive:t.nodesDraggable||t.nodesConnectable||t.elementsSelectable,minZoomReached:t.transform[2]<=t.minZoom,maxZoomReached:t.transform[2]>=t.maxZoom,ariaLabelConfig:t.ariaLabelConfig});function jw({style:t,showZoom:e=!0,showFitView:n=!0,showInteractive:a=!0,fitViewOptions:o,onZoomIn:l,onZoomOut:c,onFitView:d,onInteractiveChange:m,className:h,children:p,position:y="bottom-left",orientation:v="vertical","aria-label":S}){const E=ft(),{isInteractive:A,minZoomReached:R,maxZoomReached:x,ariaLabelConfig:Y}=Xe(h5,ht),{zoomIn:N,zoomOut:I,fitView:O}=Qm(),B=()=>{N(),l?.()},M=()=>{I(),c?.()},W=()=>{O(o),d?.()},q=()=>{E.setState({nodesDraggable:!A,nodesConnectable:!A,elementsSelectable:!A}),m?.(!A)},de=v==="horizontal"?"horizontal":"vertical";return $.jsxs(Nf,{className:xt(["react-flow__controls",de,h]),position:y,style:t,"data-testid":"rf__controls","aria-label":S??Y["controls.ariaLabel"],children:[e&&$.jsxs($.Fragment,{children:[$.jsx(Ic,{onClick:B,className:"react-flow__controls-zoomin",title:Y["controls.zoomIn.ariaLabel"],"aria-label":Y["controls.zoomIn.ariaLabel"],disabled:x,children:$.jsx(l5,{})}),$.jsx(Ic,{onClick:M,className:"react-flow__controls-zoomout",title:Y["controls.zoomOut.ariaLabel"],"aria-label":Y["controls.zoomOut.ariaLabel"],disabled:R,children:$.jsx(u5,{})})]}),n&&$.jsx(Ic,{className:"react-flow__controls-fitview",onClick:W,title:Y["controls.fitView.ariaLabel"],"aria-label":Y["controls.fitView.ariaLabel"],children:$.jsx(c5,{})}),a&&$.jsx(Ic,{className:"react-flow__controls-interactive",onClick:q,title:Y["controls.interactive.ariaLabel"],"aria-label":Y["controls.interactive.ariaLabel"],children:A?$.jsx(d5,{}):$.jsx(f5,{})}),p]})}jw.displayName="Controls";P.memo(jw);function g5({id:t,x:e,y:n,width:a,height:o,style:l,color:c,strokeColor:d,strokeWidth:m,className:h,borderRadius:p,shapeRendering:y,selected:v,onClick:S}){const{background:E,backgroundColor:A}=l||{},R=c||E||A;return $.jsx("rect",{className:xt(["react-flow__minimap-node",{selected:v},h]),x:e,y:n,rx:p,ry:p,width:a,height:o,style:{fill:R,stroke:d,strokeWidth:m},shapeRendering:y,onClick:S?x=>S(x,t):void 0})}const m5=P.memo(g5),p5=t=>t.nodes.map(e=>e.id),bg=t=>t instanceof Function?t:()=>t;function y5({nodeStrokeColor:t,nodeColor:e,nodeClassName:n="",nodeBorderRadius:a=5,nodeStrokeWidth:o,nodeComponent:l=m5,onClick:c}){const d=Xe(p5,ht),m=bg(e),h=bg(t),p=bg(n),y=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return $.jsx($.Fragment,{children:d.map(v=>$.jsx(b5,{id:v,nodeColorFunc:m,nodeStrokeColorFunc:h,nodeClassNameFunc:p,nodeBorderRadius:a,nodeStrokeWidth:o,NodeComponent:l,onClick:c,shapeRendering:y},v))})}function v5({id:t,nodeColorFunc:e,nodeStrokeColorFunc:n,nodeClassNameFunc:a,nodeBorderRadius:o,nodeStrokeWidth:l,shapeRendering:c,NodeComponent:d,onClick:m}){const{node:h,x:p,y,width:v,height:S}=Xe(E=>{const{internals:A}=E.nodeLookup.get(t),R=A.userNode,{x,y:Y}=A.positionAbsolute,{width:N,height:I}=jr(R);return{node:R,x,y:Y,width:N,height:I}},ht);return!h||h.hidden||!Q1(h)?null:$.jsx(d,{x:p,y,width:v,height:S,style:h.style,selected:!!h.selected,className:a(h),color:e(h),borderRadius:o,strokeColor:n(h),strokeWidth:l,shapeRendering:c,onClick:m,id:h.id})}const b5=P.memo(v5);var S5=P.memo(y5);const A5=200,E5=150,w5=t=>!t.hidden,N5=t=>{const e={x:-t.transform[0]/t.transform[2],y:-t.transform[1]/t.transform[2],width:t.width/t.transform[2],height:t.height/t.transform[2]};return{viewBB:e,boundingRect:t.nodeLookup.size>0?P1(Zl(t.nodeLookup,{filter:w5}),e):e,rfId:t.rfId,panZoom:t.panZoom,translateExtent:t.translateExtent,flowWidth:t.width,flowHeight:t.height,ariaLabelConfig:t.ariaLabelConfig}},x5="react-flow__minimap-desc";function $w({style:t,className:e,nodeStrokeColor:n,nodeColor:a,nodeClassName:o="",nodeBorderRadius:l=5,nodeStrokeWidth:c,nodeComponent:d,bgColor:m,maskColor:h,maskStrokeColor:p,maskStrokeWidth:y,position:v="bottom-right",onClick:S,onNodeClick:E,pannable:A=!1,zoomable:R=!1,ariaLabel:x,inversePan:Y,zoomStep:N=1,offsetScale:I=5}){const O=ft(),B=P.useRef(null),{boundingRect:M,viewBB:W,rfId:q,panZoom:de,translateExtent:ne,flowWidth:te,flowHeight:le,ariaLabelConfig:_}=Xe(N5,ht),K=t?.width??A5,T=t?.height??E5,V=M.width/K,Z=M.height/T,H=Math.max(V,Z),ie=H*K,C=H*T,L=I*H,ee=M.x-(ie-M.width)/2-L,re=M.y-(C-M.height)/2-L,fe=ie+L*2,ge=C+L*2,he=`${x5}-${q}`,ce=P.useRef(0),me=P.useRef();ce.current=H,P.useEffect(()=>{if(B.current&&de)return me.current=GO({domNode:B.current,panZoom:de,getTransform:()=>O.getState().transform,getViewScale:()=>ce.current}),()=>{me.current?.destroy()}},[de]),P.useEffect(()=>{me.current?.update({translateExtent:ne,width:te,height:le,inversePan:Y,pannable:A,zoomStep:N,zoomable:R})},[A,R,Y,N,ne,te,le]);const _e=S?Te=>{const[Ye,Qe]=me.current?.pointer(Te)||[0,0];S(Te,{x:Ye,y:Qe})}:void 0,Re=E?P.useCallback((Te,Ye)=>{const Qe=O.getState().nodeLookup.get(Ye).internals.userNode;E(Te,Qe)},[]):void 0,Ne=x??_["minimap.ariaLabel"];return $.jsx(Nf,{position:v,style:{...t,"--xy-minimap-background-color-props":typeof m=="string"?m:void 0,"--xy-minimap-mask-background-color-props":typeof h=="string"?h:void 0,"--xy-minimap-mask-stroke-color-props":typeof p=="string"?p:void 0,"--xy-minimap-mask-stroke-width-props":typeof y=="number"?y*H:void 0,"--xy-minimap-node-background-color-props":typeof a=="string"?a:void 0,"--xy-minimap-node-stroke-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-width-props":typeof c=="number"?c:void 0},className:xt(["react-flow__minimap",e]),"data-testid":"rf__minimap",children:$.jsxs("svg",{width:K,height:T,viewBox:`${ee} ${re} ${fe} ${ge}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":he,ref:B,onClick:_e,children:[Ne&&$.jsx("title",{id:he,children:Ne}),$.jsx(S5,{onClick:Re,nodeColor:a,nodeStrokeColor:n,nodeBorderRadius:l,nodeClassName:o,nodeStrokeWidth:c,nodeComponent:d}),$.jsx("path",{className:"react-flow__minimap-mask",d:`M${ee-L},${re-L}h${fe+L*2}v${ge+L*2}h${-fe-L*2}z
        M${W.x},${W.y}h${W.width}v${W.height}h${-W.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}$w.displayName="MiniMap";P.memo($w);const T5=t=>e=>t?`${Math.max(1/e.transform[2],1)}`:void 0,C5={[js.Line]:"right",[js.Handle]:"bottom-right"};function I5({nodeId:t,position:e,variant:n=js.Handle,className:a,style:o=void 0,children:l,color:c,minWidth:d=10,minHeight:m=10,maxWidth:h=Number.MAX_VALUE,maxHeight:p=Number.MAX_VALUE,keepAspectRatio:y=!1,resizeDirection:v,autoScale:S=!0,shouldResize:E,onResizeStart:A,onResize:R,onResizeEnd:x}){const Y=Iw(),N=typeof t=="string"?t:Y,I=ft(),O=P.useRef(null),B=n===js.Handle,M=Xe(P.useCallback(T5(B&&S),[B,S]),ht),W=P.useRef(null),q=e??C5[n];P.useEffect(()=>{if(!(!O.current||!N))return W.current||(W.current=tM({domNode:O.current,nodeId:N,getStoreItems:()=>{const{nodeLookup:ne,transform:te,snapGrid:le,snapToGrid:_,nodeOrigin:K,domNode:T}=I.getState();return{nodeLookup:ne,transform:te,snapGrid:le,snapToGrid:_,nodeOrigin:K,paneDomNode:T}},onChange:(ne,te)=>{const{triggerNodeChanges:le,nodeLookup:_,parentLookup:K,nodeOrigin:T}=I.getState(),V=[],Z={x:ne.x,y:ne.y},H=_.get(N);if(H&&H.expandParent&&H.parentId){const ie=H.origin??T,C=ne.width??H.measured.width??0,L=ne.height??H.measured.height??0,ee={id:H.id,parentId:H.parentId,rect:{width:C,height:L,...q1({x:ne.x??H.position.x,y:ne.y??H.position.y},{width:C,height:L},H.parentId,_,ie)}},re=Pm([ee],_,K,T);V.push(...re),Z.x=ne.x?Math.max(ie[0]*C,ne.x):void 0,Z.y=ne.y?Math.max(ie[1]*L,ne.y):void 0}if(Z.x!==void 0&&Z.y!==void 0){const ie={id:N,type:"position",position:{...Z}};V.push(ie)}if(ne.width!==void 0&&ne.height!==void 0){const C={id:N,type:"dimensions",resizing:!0,setAttributes:v?v==="horizontal"?"width":"height":!0,dimensions:{width:ne.width,height:ne.height}};V.push(C)}for(const ie of te){const C={...ie,type:"position"};V.push(C)}le(V)},onEnd:({width:ne,height:te})=>{const le={id:N,type:"dimensions",resizing:!1,dimensions:{width:ne,height:te}};I.getState().triggerNodeChanges([le])}})),W.current.update({controlPosition:q,boundaries:{minWidth:d,minHeight:m,maxWidth:h,maxHeight:p},keepAspectRatio:y,resizeDirection:v,onResizeStart:A,onResize:R,onResizeEnd:x,shouldResize:E}),()=>{W.current?.destroy()}},[q,d,m,h,p,y,A,R,x,E]);const de=q.split("-");return $.jsx("div",{className:xt(["react-flow__resize-control","nodrag",...de,n,a]),ref:O,style:{...o,scale:M,...c&&{[B?"backgroundColor":"borderColor"]:c}},children:l})}P.memo(I5);function R5(){const{root:t,update:e,loading:n,error:a}=w3(),o=P.useRef(0),l=P.useCallback(m=>{e(h=>{for(const p of m)switch(p.type){case"add":h.nodes.push(p.item);break;case"replace":{const y=h.nodes.findIndex(v=>v.id===p.id);y!==-1&&(h.nodes[y]=p.item)}break;case"remove":{const y=h.nodes.findIndex(v=>v.id===p.id);y!==-1&&h.nodes.delete?.(y)}break;case"position":{const y=h.nodes.findIndex(v=>v.id===p.id);y!==-1&&p.position&&(h.nodes[y].position=p.position)}break;case"select":{const y=h.nodes.findIndex(v=>v.id===p.id);y!==-1&&(h.nodes[y].selected=p.selected)}break}})},[e]),c=P.useCallback(m=>{e(h=>{for(const p of m)switch(p.type){case"add":h.edges.push(p.item);break;case"replace":{const y=h.edges.findIndex(v=>v.id===p.id);y!==-1&&(h.edges[y]=p.item)}break;case"remove":{const y=h.edges.findIndex(v=>v.id===p.id);y!==-1&&h.edges.delete?.(y)}break;case"select":{const y=h.edges.findIndex(v=>v.id===p.id);y!==-1&&(h.edges[y].selected=p.selected)}break}})},[e]),d=P.useCallback(m=>{!m.source||!m.target||e(h=>{if(h.edges.some(v=>v.source===m.source&&v.target===m.target&&v.sourceHandle===m.sourceHandle&&v.targetHandle===m.targetHandle))return;const y=`e-${m.source}-${m.target}-${o.current++}`;h.edges.push({id:y,type:"smoothstep",source:m.source,target:m.target,sourceHandle:m.sourceHandle,targetHandle:m.targetHandle})})},[e]);return n?$.jsx("div",{children:"Loading..."}):a?$.jsxs("div",{children:["Error: ",a.message]}):$.jsx("div",{style:{position:"fixed",inset:0,height:"100vh"},children:$.jsx(n5,{nodes:[...t.nodes].filter(Boolean),edges:[...t.edges].filter(Boolean),onNodesChange:l,onEdgesChange:c,onConnect:d,fitView:!0,children:$.jsx(o5,{gap:10,size:1,color:"silver"})})})}const D5=[{id:"1",type:"input",data:{label:"Multiplayer"},position:{x:250,y:25}},{id:"2",data:{label:"Graph"},position:{x:100,y:125}},{id:"3",data:{label:"React Flow"},position:{x:250,y:225},style:{borderColor:"#FF0072"}},{id:"4",type:"output",data:{label:"Yorkie"},position:{x:100,y:325},style:{borderColor:"#944DFA"}}],_5=[{id:"e1-2",source:"1",target:"2",type:"smoothstep"},{id:"e2-3",source:"2",target:"3",label:"with"},{id:"e3-4",source:"3",target:"4",label:"and",animated:!0}],V5={nodes:D5,edges:_5};c2.createRoot(document.getElementById("root")).render($.jsxs(P.StrictMode,{children:[$.jsx(p3,{apiKey:"D6sd9E5ehtXBssmeRZ4QQP",rpcAddr:"https://api.yorkie.dev",children:$.jsx(E3,{docKey:`react-flow-${new Date().toISOString().substring(0,10).replace(/-/g,"")}`,initialRoot:V5,children:$.jsx(R5,{})})}),","]}));
