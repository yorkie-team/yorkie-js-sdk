var ZE=Object.defineProperty;var QE=(n,t,e)=>t in n?ZE(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var p=(n,t,e)=>QE(n,typeof t!="symbol"?t+"":t,e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function e(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(a){if(a.ep)return;a.ep=!0;const l=e(a);fetch(a.href,l)}})();function Wb(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var fm={exports:{}},uu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vw;function WE(){if(Vw)return uu;Vw=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(i,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var d in a)d!=="key"&&(l[d]=a[d])}else l=a;return a=l.ref,{$$typeof:n,type:i,key:c,ref:a!==void 0?a:null,props:l}}return uu.Fragment=t,uu.jsx=e,uu.jsxs=e,uu}var jw;function tN(){return jw||(jw=1,fm.exports=WE()),fm.exports}var Q=tN(),dm={exports:{}},cu={},hm={exports:{}},gm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yw;function eN(){return Yw||(Yw=1,function(n){function t(C,B){var H=C.length;C.push(B);t:for(;0<H;){var q=H-1>>>1,D=C[q];if(0<a(D,B))C[q]=B,C[H]=D,H=q;else break t}}function e(C){return C.length===0?null:C[0]}function i(C){if(C.length===0)return null;var B=C[0],H=C.pop();if(H!==B){C[0]=H;t:for(var q=0,D=C.length,P=D>>>1;q<P;){var tt=2*(q+1)-1,rt=C[tt],ut=tt+1,gt=C[ut];if(0>a(rt,H))ut<D&&0>a(gt,rt)?(C[q]=gt,C[ut]=H,q=ut):(C[q]=rt,C[tt]=H,q=tt);else if(ut<D&&0>a(gt,H))C[q]=gt,C[ut]=H,q=ut;else break t}}return B}function a(C,B){var H=C.sortIndex-B.sortIndex;return H!==0?H:C.id-B.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();n.unstable_now=function(){return c.now()-d}}var h=[],g=[],y=1,w=null,v=3,S=!1,x=!1,E=!1,I=!1,k=typeof setTimeout=="function"?setTimeout:null,z=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function O(C){for(var B=e(g);B!==null;){if(B.callback===null)i(g);else if(B.startTime<=C)i(g),B.sortIndex=B.expirationTime,t(h,B);else break;B=e(g)}}function _(C){if(E=!1,O(C),!x)if(e(h)!==null)x=!0,J||(J=!0,ot());else{var B=e(g);B!==null&&j(_,B.startTime-C)}}var J=!1,U=-1,W=5,F=-1;function nt(){return I?!0:!(n.unstable_now()-F<W)}function ft(){if(I=!1,J){var C=n.unstable_now();F=C;var B=!0;try{t:{x=!1,E&&(E=!1,z(U),U=-1),S=!0;var H=v;try{e:{for(O(C),w=e(h);w!==null&&!(w.expirationTime>C&&nt());){var q=w.callback;if(typeof q=="function"){w.callback=null,v=w.priorityLevel;var D=q(w.expirationTime<=C);if(C=n.unstable_now(),typeof D=="function"){w.callback=D,O(C),B=!0;break e}w===e(h)&&i(h),O(C)}else i(h);w=e(h)}if(w!==null)B=!0;else{var P=e(g);P!==null&&j(_,P.startTime-C),B=!1}}break t}finally{w=null,v=H,S=!1}B=void 0}}finally{B?ot():J=!1}}}var ot;if(typeof N=="function")ot=function(){N(ft)};else if(typeof MessageChannel<"u"){var ct=new MessageChannel,R=ct.port2;ct.port1.onmessage=ft,ot=function(){R.postMessage(null)}}else ot=function(){k(ft,0)};function j(C,B){U=k(function(){C(n.unstable_now())},B)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(C){C.callback=null},n.unstable_forceFrameRate=function(C){0>C||125<C?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W=0<C?Math.floor(1e3/C):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_next=function(C){switch(v){case 1:case 2:case 3:var B=3;break;default:B=v}var H=v;v=B;try{return C()}finally{v=H}},n.unstable_requestPaint=function(){I=!0},n.unstable_runWithPriority=function(C,B){switch(C){case 1:case 2:case 3:case 4:case 5:break;default:C=3}var H=v;v=C;try{return B()}finally{v=H}},n.unstable_scheduleCallback=function(C,B,H){var q=n.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?q+H:q):H=q,C){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=H+D,C={id:y++,callback:B,priorityLevel:C,startTime:H,expirationTime:D,sortIndex:-1},H>q?(C.sortIndex=H,t(g,C),e(h)===null&&C===e(g)&&(E?(z(U),U=-1):E=!0,j(_,H-q))):(C.sortIndex=D,t(h,C),x||S||(x=!0,J||(J=!0,ot()))),C},n.unstable_shouldYield=nt,n.unstable_wrapCallback=function(C){var B=v;return function(){var H=v;v=B;try{return C.apply(this,arguments)}finally{v=H}}}}(gm)),gm}var Gw;function nN(){return Gw||(Gw=1,hm.exports=eN()),hm.exports}var mm={exports:{}},Rt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xw;function rN(){if(Xw)return Rt;Xw=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),w=Symbol.iterator;function v(D){return D===null||typeof D!="object"?null:(D=w&&D[w]||D["@@iterator"],typeof D=="function"?D:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,E={};function I(D,P,tt){this.props=D,this.context=P,this.refs=E,this.updater=tt||S}I.prototype.isReactComponent={},I.prototype.setState=function(D,P){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,P,"setState")},I.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function k(){}k.prototype=I.prototype;function z(D,P,tt){this.props=D,this.context=P,this.refs=E,this.updater=tt||S}var N=z.prototype=new k;N.constructor=z,x(N,I.prototype),N.isPureReactComponent=!0;var O=Array.isArray,_={H:null,A:null,T:null,S:null,V:null},J=Object.prototype.hasOwnProperty;function U(D,P,tt,rt,ut,gt){return tt=gt.ref,{$$typeof:n,type:D,key:P,ref:tt!==void 0?tt:null,props:gt}}function W(D,P){return U(D.type,P,void 0,void 0,void 0,D.props)}function F(D){return typeof D=="object"&&D!==null&&D.$$typeof===n}function nt(D){var P={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(tt){return P[tt]})}var ft=/\/+/g;function ot(D,P){return typeof D=="object"&&D!==null&&D.key!=null?nt(""+D.key):P.toString(36)}function ct(){}function R(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(ct,ct):(D.status="pending",D.then(function(P){D.status==="pending"&&(D.status="fulfilled",D.value=P)},function(P){D.status==="pending"&&(D.status="rejected",D.reason=P)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function j(D,P,tt,rt,ut){var gt=typeof D;(gt==="undefined"||gt==="boolean")&&(D=null);var dt=!1;if(D===null)dt=!0;else switch(gt){case"bigint":case"string":case"number":dt=!0;break;case"object":switch(D.$$typeof){case n:case t:dt=!0;break;case y:return dt=D._init,j(dt(D._payload),P,tt,rt,ut)}}if(dt)return ut=ut(D),dt=rt===""?"."+ot(D,0):rt,O(ut)?(tt="",dt!=null&&(tt=dt.replace(ft,"$&/")+"/"),j(ut,P,tt,"",function(Ct){return Ct})):ut!=null&&(F(ut)&&(ut=W(ut,tt+(ut.key==null||D&&D.key===ut.key?"":(""+ut.key).replace(ft,"$&/")+"/")+dt)),P.push(ut)),1;dt=0;var yt=rt===""?".":rt+":";if(O(D))for(var pt=0;pt<D.length;pt++)rt=D[pt],gt=yt+ot(rt,pt),dt+=j(rt,P,tt,gt,ut);else if(pt=v(D),typeof pt=="function")for(D=pt.call(D),pt=0;!(rt=D.next()).done;)rt=rt.value,gt=yt+ot(rt,pt++),dt+=j(rt,P,tt,gt,ut);else if(gt==="object"){if(typeof D.then=="function")return j(R(D),P,tt,rt,ut);throw P=String(D),Error("Objects are not valid as a React child (found: "+(P==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":P)+"). If you meant to render a collection of children, use an array instead.")}return dt}function C(D,P,tt){if(D==null)return D;var rt=[],ut=0;return j(D,rt,"","",function(gt){return P.call(tt,gt,ut++)}),rt}function B(D){if(D._status===-1){var P=D._result;P=P(),P.then(function(tt){(D._status===0||D._status===-1)&&(D._status=1,D._result=tt)},function(tt){(D._status===0||D._status===-1)&&(D._status=2,D._result=tt)}),D._status===-1&&(D._status=0,D._result=P)}if(D._status===1)return D._result.default;throw D._result}var H=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var P=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(P))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)};function q(){}return Rt.Children={map:C,forEach:function(D,P,tt){C(D,function(){P.apply(this,arguments)},tt)},count:function(D){var P=0;return C(D,function(){P++}),P},toArray:function(D){return C(D,function(P){return P})||[]},only:function(D){if(!F(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},Rt.Component=I,Rt.Fragment=e,Rt.Profiler=a,Rt.PureComponent=z,Rt.StrictMode=i,Rt.Suspense=h,Rt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=_,Rt.__COMPILER_RUNTIME={__proto__:null,c:function(D){return _.H.useMemoCache(D)}},Rt.cache=function(D){return function(){return D.apply(null,arguments)}},Rt.cloneElement=function(D,P,tt){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var rt=x({},D.props),ut=D.key,gt=void 0;if(P!=null)for(dt in P.ref!==void 0&&(gt=void 0),P.key!==void 0&&(ut=""+P.key),P)!J.call(P,dt)||dt==="key"||dt==="__self"||dt==="__source"||dt==="ref"&&P.ref===void 0||(rt[dt]=P[dt]);var dt=arguments.length-2;if(dt===1)rt.children=tt;else if(1<dt){for(var yt=Array(dt),pt=0;pt<dt;pt++)yt[pt]=arguments[pt+2];rt.children=yt}return U(D.type,ut,void 0,void 0,gt,rt)},Rt.createContext=function(D){return D={$$typeof:c,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:l,_context:D},D},Rt.createElement=function(D,P,tt){var rt,ut={},gt=null;if(P!=null)for(rt in P.key!==void 0&&(gt=""+P.key),P)J.call(P,rt)&&rt!=="key"&&rt!=="__self"&&rt!=="__source"&&(ut[rt]=P[rt]);var dt=arguments.length-2;if(dt===1)ut.children=tt;else if(1<dt){for(var yt=Array(dt),pt=0;pt<dt;pt++)yt[pt]=arguments[pt+2];ut.children=yt}if(D&&D.defaultProps)for(rt in dt=D.defaultProps,dt)ut[rt]===void 0&&(ut[rt]=dt[rt]);return U(D,gt,void 0,void 0,null,ut)},Rt.createRef=function(){return{current:null}},Rt.forwardRef=function(D){return{$$typeof:d,render:D}},Rt.isValidElement=F,Rt.lazy=function(D){return{$$typeof:y,_payload:{_status:-1,_result:D},_init:B}},Rt.memo=function(D,P){return{$$typeof:g,type:D,compare:P===void 0?null:P}},Rt.startTransition=function(D){var P=_.T,tt={};_.T=tt;try{var rt=D(),ut=_.S;ut!==null&&ut(tt,rt),typeof rt=="object"&&rt!==null&&typeof rt.then=="function"&&rt.then(q,H)}catch(gt){H(gt)}finally{_.T=P}},Rt.unstable_useCacheRefresh=function(){return _.H.useCacheRefresh()},Rt.use=function(D){return _.H.use(D)},Rt.useActionState=function(D,P,tt){return _.H.useActionState(D,P,tt)},Rt.useCallback=function(D,P){return _.H.useCallback(D,P)},Rt.useContext=function(D){return _.H.useContext(D)},Rt.useDebugValue=function(){},Rt.useDeferredValue=function(D,P){return _.H.useDeferredValue(D,P)},Rt.useEffect=function(D,P,tt){var rt=_.H;if(typeof tt=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return rt.useEffect(D,P)},Rt.useId=function(){return _.H.useId()},Rt.useImperativeHandle=function(D,P,tt){return _.H.useImperativeHandle(D,P,tt)},Rt.useInsertionEffect=function(D,P){return _.H.useInsertionEffect(D,P)},Rt.useLayoutEffect=function(D,P){return _.H.useLayoutEffect(D,P)},Rt.useMemo=function(D,P){return _.H.useMemo(D,P)},Rt.useOptimistic=function(D,P){return _.H.useOptimistic(D,P)},Rt.useReducer=function(D,P,tt){return _.H.useReducer(D,P,tt)},Rt.useRef=function(D){return _.H.useRef(D)},Rt.useState=function(D){return _.H.useState(D)},Rt.useSyncExternalStore=function(D,P,tt){return _.H.useSyncExternalStore(D,P,tt)},Rt.useTransition=function(){return _.H.useTransition()},Rt.version="19.1.0",Rt}var Kw;function Yu(){return Kw||(Kw=1,mm.exports=rN()),mm.exports}var ym={exports:{}},Je={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fw;function iN(){if(Fw)return Je;Fw=1;var n=Yu();function t(h){var g="https://react.dev/errors/"+h;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)g+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+h+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var i={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(h,g,y){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:w==null?null:""+w,children:h,containerInfo:g,implementation:y}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(h,g){if(h==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Je.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Je.createPortal=function(h,g){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(t(299));return l(h,g,null,y)},Je.flushSync=function(h){var g=c.T,y=i.p;try{if(c.T=null,i.p=2,h)return h()}finally{c.T=g,i.p=y,i.d.f()}},Je.preconnect=function(h,g){typeof h=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,i.d.C(h,g))},Je.prefetchDNS=function(h){typeof h=="string"&&i.d.D(h)},Je.preinit=function(h,g){if(typeof h=="string"&&g&&typeof g.as=="string"){var y=g.as,w=d(y,g.crossOrigin),v=typeof g.integrity=="string"?g.integrity:void 0,S=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;y==="style"?i.d.S(h,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:w,integrity:v,fetchPriority:S}):y==="script"&&i.d.X(h,{crossOrigin:w,integrity:v,fetchPriority:S,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Je.preinitModule=function(h,g){if(typeof h=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var y=d(g.as,g.crossOrigin);i.d.M(h,{crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&i.d.M(h)},Je.preload=function(h,g){if(typeof h=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var y=g.as,w=d(y,g.crossOrigin);i.d.L(h,y,{crossOrigin:w,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Je.preloadModule=function(h,g){if(typeof h=="string")if(g){var y=d(g.as,g.crossOrigin);i.d.m(h,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else i.d.m(h)},Je.requestFormReset=function(h){i.d.r(h)},Je.unstable_batchedUpdates=function(h,g){return h(g)},Je.useFormState=function(h,g,y){return c.H.useFormState(h,g,y)},Je.useFormStatus=function(){return c.H.useHostTransitionStatus()},Je.version="19.1.0",Je}var Zw;function t1(){if(Zw)return ym.exports;Zw=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),ym.exports=iN(),ym.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qw;function sN(){if(Qw)return cu;Qw=1;var n=nN(),t=Yu(),e=t1();function i(r){var s="https://react.dev/errors/"+r;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function l(r){var s=r,o=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(o=s.return),r=s.return;while(r)}return s.tag===3?o:null}function c(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function d(r){if(l(r)!==r)throw Error(i(188))}function h(r){var s=r.alternate;if(!s){if(s=l(r),s===null)throw Error(i(188));return s!==r?null:r}for(var o=r,u=s;;){var f=o.return;if(f===null)break;var m=f.alternate;if(m===null){if(u=f.return,u!==null){o=u;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===o)return d(f),r;if(m===u)return d(f),s;m=m.sibling}throw Error(i(188))}if(o.return!==u.return)o=f,u=m;else{for(var b=!1,A=f.child;A;){if(A===o){b=!0,o=f,u=m;break}if(A===u){b=!0,u=f,o=m;break}A=A.sibling}if(!b){for(A=m.child;A;){if(A===o){b=!0,o=m,u=f;break}if(A===u){b=!0,u=m,o=f;break}A=A.sibling}if(!b)throw Error(i(189))}}if(o.alternate!==u)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?r:s}function g(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r;for(r=r.child;r!==null;){if(s=g(r),s!==null)return s;r=r.sibling}return null}var y=Object.assign,w=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),z=Symbol.for("react.consumer"),N=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),J=Symbol.for("react.suspense_list"),U=Symbol.for("react.memo"),W=Symbol.for("react.lazy"),F=Symbol.for("react.activity"),nt=Symbol.for("react.memo_cache_sentinel"),ft=Symbol.iterator;function ot(r){return r===null||typeof r!="object"?null:(r=ft&&r[ft]||r["@@iterator"],typeof r=="function"?r:null)}var ct=Symbol.for("react.client.reference");function R(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===ct?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case x:return"Fragment";case I:return"Profiler";case E:return"StrictMode";case _:return"Suspense";case J:return"SuspenseList";case F:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case S:return"Portal";case N:return(r.displayName||"Context")+".Provider";case z:return(r._context.displayName||"Context")+".Consumer";case O:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case U:return s=r.displayName||null,s!==null?s:R(r.type)||"Memo";case W:s=r._payload,r=r._init;try{return R(r(s))}catch{}}return null}var j=Array.isArray,C=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,B=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,H={pending:!1,data:null,method:null,action:null},q=[],D=-1;function P(r){return{current:r}}function tt(r){0>D||(r.current=q[D],q[D]=null,D--)}function rt(r,s){D++,q[D]=r.current,r.current=s}var ut=P(null),gt=P(null),dt=P(null),yt=P(null);function pt(r,s){switch(rt(dt,s),rt(gt,r),rt(ut,null),s.nodeType){case 9:case 11:r=(r=s.documentElement)&&(r=r.namespaceURI)?vw(r):0;break;default:if(r=s.tagName,s=s.namespaceURI)s=vw(s),r=ww(s,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}tt(ut),rt(ut,r)}function Ct(){tt(ut),tt(gt),tt(dt)}function Vt(r){r.memoizedState!==null&&rt(yt,r);var s=ut.current,o=ww(s,r.type);s!==o&&(rt(gt,r),rt(ut,o))}function Ot(r){gt.current===r&&(tt(ut),tt(gt)),yt.current===r&&(tt(yt),iu._currentValue=H)}var bt=Object.prototype.hasOwnProperty,Yt=n.unstable_scheduleCallback,qt=n.unstable_cancelCallback,xe=n.unstable_shouldYield,an=n.unstable_requestPaint,Oe=n.unstable_now,sl=n.unstable_getCurrentPriorityLevel,Ja=n.unstable_ImmediatePriority,ds=n.unstable_UserBlockingPriority,hs=n.unstable_NormalPriority,ia=n.unstable_LowPriority,gs=n.unstable_IdlePriority,al=n.log,sa=n.unstable_setDisableYieldValue,Jn=null,Ee=null;function nr(r){if(typeof al=="function"&&sa(r),Ee&&typeof Ee.setStrictMode=="function")try{Ee.setStrictMode(Jn,r)}catch{}}var Ie=Math.clz32?Math.clz32:th,Qd=Math.log,Wd=Math.LN2;function th(r){return r>>>=0,r===0?32:31-(Qd(r)/Wd|0)|0}var Ha=256,$a=4194304;function Cr(r){var s=r&42;if(s!==0)return s;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function Va(r,s,o){var u=r.pendingLanes;if(u===0)return 0;var f=0,m=r.suspendedLanes,b=r.pingedLanes;r=r.warmLanes;var A=u&134217727;return A!==0?(u=A&~m,u!==0?f=Cr(u):(b&=A,b!==0?f=Cr(b):o||(o=A&~r,o!==0&&(f=Cr(o))))):(A=u&~m,A!==0?f=Cr(A):b!==0?f=Cr(b):o||(o=u&~r,o!==0&&(f=Cr(o)))),f===0?0:s!==0&&s!==f&&(s&m)===0&&(m=f&-f,o=s&-s,m>=o||m===32&&(o&4194048)!==0)?s:f}function aa(r,s){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&s)===0}function eh(r,s){switch(r){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function rc(){var r=Ha;return Ha<<=1,(Ha&4194048)===0&&(Ha=256),r}function ic(){var r=$a;return $a<<=1,($a&62914560)===0&&($a=4194304),r}function ol(r){for(var s=[],o=0;31>o;o++)s.push(r);return s}function oa(r,s){r.pendingLanes|=s,s!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function nh(r,s,o,u,f,m){var b=r.pendingLanes;r.pendingLanes=o,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=o,r.entangledLanes&=o,r.errorRecoveryDisabledLanes&=o,r.shellSuspendCounter=0;var A=r.entanglements,M=r.expirationTimes,X=r.hiddenUpdates;for(o=b&~o;0<o;){var st=31-Ie(o),lt=1<<st;A[st]=0,M[st]=-1;var K=X[st];if(K!==null)for(X[st]=null,st=0;st<K.length;st++){var Z=K[st];Z!==null&&(Z.lane&=-536870913)}o&=~lt}u!==0&&ll(r,u,0),m!==0&&f===0&&r.tag!==0&&(r.suspendedLanes|=m&~(b&~s))}function ll(r,s,o){r.pendingLanes|=s,r.suspendedLanes&=~s;var u=31-Ie(s);r.entangledLanes|=s,r.entanglements[u]=r.entanglements[u]|1073741824|o&4194090}function sc(r,s){var o=r.entangledLanes|=s;for(r=r.entanglements;o;){var u=31-Ie(o),f=1<<u;f&s|r[u]&s&&(r[u]|=s),o&=~f}}function ul(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function cl(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function ac(){var r=B.p;return r!==0?r:(r=window.event,r===void 0?32:Uw(r.type))}function rh(r,s){var o=B.p;try{return B.p=r,s()}finally{B.p=o}}var rr=Math.random().toString(36).slice(2),Ne="__reactFiber$"+rr,qe="__reactProps$"+rr,ms="__reactContainer$"+rr,fl="__reactEvents$"+rr,ih="__reactListeners$"+rr,sh="__reactHandles$"+rr,oc="__reactResources$"+rr,la="__reactMarker$"+rr;function dl(r){delete r[Ne],delete r[qe],delete r[fl],delete r[ih],delete r[sh]}function kr(r){var s=r[Ne];if(s)return s;for(var o=r.parentNode;o;){if(s=o[ms]||o[Ne]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(r=Tw(r);r!==null;){if(o=r[Ne])return o;r=Tw(r)}return s}r=o,o=r.parentNode}return null}function Or(r){if(r=r[Ne]||r[ms]){var s=r.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return r}return null}function ua(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r.stateNode;throw Error(i(33))}function ys(r){var s=r[oc];return s||(s=r[oc]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function ve(r){r[la]=!0}var lc=new Set,uc={};function Ir(r,s){ps(r,s),ps(r+"Capture",s)}function ps(r,s){for(uc[r]=s,r=0;r<s.length;r++)lc.add(s[r])}var cc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),fc={},dc={};function ah(r){return bt.call(dc,r)?!0:bt.call(fc,r)?!1:cc.test(r)?dc[r]=!0:(fc[r]=!0,!1)}function ja(r,s,o){if(ah(s))if(o===null)r.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":r.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){r.removeAttribute(s);return}}r.setAttribute(s,""+o)}}function Ya(r,s,o){if(o===null)r.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(s);return}r.setAttribute(s,""+o)}}function Hn(r,s,o,u){if(u===null)r.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttributeNS(s,o,""+u)}}var hl,gl;function vs(r){if(hl===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);hl=s&&s[1]||"",gl=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+hl+r+gl}var ml=!1;function yl(r,s){if(!r||ml)return"";ml=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var lt=function(){throw Error()};if(Object.defineProperty(lt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(lt,[])}catch(Z){var K=Z}Reflect.construct(r,[],lt)}else{try{lt.call()}catch(Z){K=Z}r.call(lt.prototype)}}else{try{throw Error()}catch(Z){K=Z}(lt=r())&&typeof lt.catch=="function"&&lt.catch(function(){})}}catch(Z){if(Z&&K&&typeof Z.stack=="string")return[Z.stack,K.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=u.DetermineComponentFrameRoot(),b=m[0],A=m[1];if(b&&A){var M=b.split(`
`),X=A.split(`
`);for(f=u=0;u<M.length&&!M[u].includes("DetermineComponentFrameRoot");)u++;for(;f<X.length&&!X[f].includes("DetermineComponentFrameRoot");)f++;if(u===M.length||f===X.length)for(u=M.length-1,f=X.length-1;1<=u&&0<=f&&M[u]!==X[f];)f--;for(;1<=u&&0<=f;u--,f--)if(M[u]!==X[f]){if(u!==1||f!==1)do if(u--,f--,0>f||M[u]!==X[f]){var st=`
`+M[u].replace(" at new "," at ");return r.displayName&&st.includes("<anonymous>")&&(st=st.replace("<anonymous>",r.displayName)),st}while(1<=u&&0<=f);break}}}finally{ml=!1,Error.prepareStackTrace=o}return(o=r?r.displayName||r.name:"")?vs(o):""}function oh(r){switch(r.tag){case 26:case 27:case 5:return vs(r.type);case 16:return vs("Lazy");case 13:return vs("Suspense");case 19:return vs("SuspenseList");case 0:case 15:return yl(r.type,!1);case 11:return yl(r.type.render,!1);case 1:return yl(r.type,!0);case 31:return vs("Activity");default:return""}}function hc(r){try{var s="";do s+=oh(r),r=r.return;while(r);return s}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function Ye(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function gc(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Ga(r){var s=gc(r)?"checked":"value",o=Object.getOwnPropertyDescriptor(r.constructor.prototype,s),u=""+r[s];if(!r.hasOwnProperty(s)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var f=o.get,m=o.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return f.call(this)},set:function(b){u=""+b,m.call(this,b)}}),Object.defineProperty(r,s,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(b){u=""+b},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function Xa(r){r._valueTracker||(r._valueTracker=Ga(r))}function mc(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var o=s.getValue(),u="";return r&&(u=gc(r)?r.checked?"true":"false":r.value),r=u,r!==o?(s.setValue(r),!0):!1}function ws(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var lh=/[\n"\\]/g;function Ge(r){return r.replace(lh,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Ka(r,s,o,u,f,m,b,A){r.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?r.type=b:r.removeAttribute("type"),s!=null?b==="number"?(s===0&&r.value===""||r.value!=s)&&(r.value=""+Ye(s)):r.value!==""+Ye(s)&&(r.value=""+Ye(s)):b!=="submit"&&b!=="reset"||r.removeAttribute("value"),s!=null?uh(r,b,Ye(s)):o!=null?uh(r,b,Ye(o)):u!=null&&r.removeAttribute("value"),f==null&&m!=null&&(r.defaultChecked=!!m),f!=null&&(r.checked=f&&typeof f!="function"&&typeof f!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?r.name=""+Ye(A):r.removeAttribute("name")}function mp(r,s,o,u,f,m,b,A){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(r.type=m),s!=null||o!=null){if(!(m!=="submit"&&m!=="reset"||s!=null))return;o=o!=null?""+Ye(o):"",s=s!=null?""+Ye(s):o,A||s===r.value||(r.value=s),r.defaultValue=s}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,r.checked=A?r.checked:!!u,r.defaultChecked=!!u,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(r.name=b)}function uh(r,s,o){s==="number"&&ws(r.ownerDocument)===r||r.defaultValue===""+o||(r.defaultValue=""+o)}function Fa(r,s,o,u){if(r=r.options,s){s={};for(var f=0;f<o.length;f++)s["$"+o[f]]=!0;for(o=0;o<r.length;o++)f=s.hasOwnProperty("$"+r[o].value),r[o].selected!==f&&(r[o].selected=f),f&&u&&(r[o].defaultSelected=!0)}else{for(o=""+Ye(o),s=null,f=0;f<r.length;f++){if(r[f].value===o){r[f].selected=!0,u&&(r[f].defaultSelected=!0);return}s!==null||r[f].disabled||(s=r[f])}s!==null&&(s.selected=!0)}}function yp(r,s,o){if(s!=null&&(s=""+Ye(s),s!==r.value&&(r.value=s),o==null)){r.defaultValue!==s&&(r.defaultValue=s);return}r.defaultValue=o!=null?""+Ye(o):""}function pp(r,s,o,u){if(s==null){if(u!=null){if(o!=null)throw Error(i(92));if(j(u)){if(1<u.length)throw Error(i(93));u=u[0]}o=u}o==null&&(o=""),s=o}o=Ye(s),r.defaultValue=o,u=r.textContent,u===o&&u!==""&&u!==null&&(r.value=u)}function Za(r,s){if(s){var o=r.firstChild;if(o&&o===r.lastChild&&o.nodeType===3){o.nodeValue=s;return}}r.textContent=s}var XT=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function vp(r,s,o){var u=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?r.setProperty(s,""):s==="float"?r.cssFloat="":r[s]="":u?r.setProperty(s,o):typeof o!="number"||o===0||XT.has(s)?s==="float"?r.cssFloat=o:r[s]=(""+o).trim():r[s]=o+"px"}function wp(r,s,o){if(s!=null&&typeof s!="object")throw Error(i(62));if(r=r.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?r.setProperty(u,""):u==="float"?r.cssFloat="":r[u]="");for(var f in s)u=s[f],s.hasOwnProperty(f)&&o[f]!==u&&vp(r,f,u)}else for(var m in s)s.hasOwnProperty(m)&&vp(r,m,s[m])}function ch(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var KT=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),FT=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function yc(r){return FT.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}var fh=null;function dh(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Qa=null,Wa=null;function Sp(r){var s=Or(r);if(s&&(r=s.stateNode)){var o=r[qe]||null;t:switch(r=s.stateNode,s.type){case"input":if(Ka(r,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=r;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Ge(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var u=o[s];if(u!==r&&u.form===r.form){var f=u[qe]||null;if(!f)throw Error(i(90));Ka(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(s=0;s<o.length;s++)u=o[s],u.form===r.form&&mc(u)}break t;case"textarea":yp(r,o.value,o.defaultValue);break t;case"select":s=o.value,s!=null&&Fa(r,!!o.multiple,s,!1)}}}var hh=!1;function bp(r,s,o){if(hh)return r(s,o);hh=!0;try{var u=r(s);return u}finally{if(hh=!1,(Qa!==null||Wa!==null)&&(ef(),Qa&&(s=Qa,r=Wa,Wa=Qa=null,Sp(s),r)))for(s=0;s<r.length;s++)Sp(r[s])}}function pl(r,s){var o=r.stateNode;if(o===null)return null;var u=o[qe]||null;if(u===null)return null;o=u[s];t:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(r=r.type,u=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!u;break t;default:r=!1}if(r)return null;if(o&&typeof o!="function")throw Error(i(231,s,typeof o));return o}var Rr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),gh=!1;if(Rr)try{var vl={};Object.defineProperty(vl,"passive",{get:function(){gh=!0}}),window.addEventListener("test",vl,vl),window.removeEventListener("test",vl,vl)}catch{gh=!1}var Ss=null,mh=null,pc=null;function xp(){if(pc)return pc;var r,s=mh,o=s.length,u,f="value"in Ss?Ss.value:Ss.textContent,m=f.length;for(r=0;r<o&&s[r]===f[r];r++);var b=o-r;for(u=1;u<=b&&s[o-u]===f[m-u];u++);return pc=f.slice(r,1<u?1-u:void 0)}function vc(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function wc(){return!0}function Tp(){return!1}function Xe(r){function s(o,u,f,m,b){this._reactName=o,this._targetInst=f,this.type=u,this.nativeEvent=m,this.target=b,this.currentTarget=null;for(var A in r)r.hasOwnProperty(A)&&(o=r[A],this[A]=o?o(m):m[A]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?wc:Tp,this.isPropagationStopped=Tp,this}return y(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=wc)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=wc)},persist:function(){},isPersistent:wc}),s}var ca={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Sc=Xe(ca),wl=y({},ca,{view:0,detail:0}),ZT=Xe(wl),yh,ph,Sl,bc=y({},wl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wh,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Sl&&(Sl&&r.type==="mousemove"?(yh=r.screenX-Sl.screenX,ph=r.screenY-Sl.screenY):ph=yh=0,Sl=r),yh)},movementY:function(r){return"movementY"in r?r.movementY:ph}}),Ap=Xe(bc),QT=y({},bc,{dataTransfer:0}),WT=Xe(QT),tA=y({},wl,{relatedTarget:0}),vh=Xe(tA),eA=y({},ca,{animationName:0,elapsedTime:0,pseudoElement:0}),nA=Xe(eA),rA=y({},ca,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),iA=Xe(rA),sA=y({},ca,{data:0}),Ep=Xe(sA),aA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},oA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},lA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function uA(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=lA[r])?!!s[r]:!1}function wh(){return uA}var cA=y({},wl,{key:function(r){if(r.key){var s=aA[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=vc(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?oA[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wh,charCode:function(r){return r.type==="keypress"?vc(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?vc(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),fA=Xe(cA),dA=y({},bc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Np=Xe(dA),hA=y({},wl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wh}),gA=Xe(hA),mA=y({},ca,{propertyName:0,elapsedTime:0,pseudoElement:0}),yA=Xe(mA),pA=y({},bc,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),vA=Xe(pA),wA=y({},ca,{newState:0,oldState:0}),SA=Xe(wA),bA=[9,13,27,32],Sh=Rr&&"CompositionEvent"in window,bl=null;Rr&&"documentMode"in document&&(bl=document.documentMode);var xA=Rr&&"TextEvent"in window&&!bl,Dp=Rr&&(!Sh||bl&&8<bl&&11>=bl),Cp=" ",kp=!1;function Op(r,s){switch(r){case"keyup":return bA.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ip(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var to=!1;function TA(r,s){switch(r){case"compositionend":return Ip(s);case"keypress":return s.which!==32?null:(kp=!0,Cp);case"textInput":return r=s.data,r===Cp&&kp?null:r;default:return null}}function AA(r,s){if(to)return r==="compositionend"||!Sh&&Op(r,s)?(r=xp(),pc=mh=Ss=null,to=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Dp&&s.locale!=="ko"?null:s.data;default:return null}}var EA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Rp(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!EA[r.type]:s==="textarea"}function Mp(r,s,o,u){Qa?Wa?Wa.push(u):Wa=[u]:Qa=u,s=lf(s,"onChange"),0<s.length&&(o=new Sc("onChange","change",null,o,u),r.push({event:o,listeners:s}))}var xl=null,Tl=null;function NA(r){hw(r,0)}function xc(r){var s=ua(r);if(mc(s))return r}function Bp(r,s){if(r==="change")return s}var zp=!1;if(Rr){var bh;if(Rr){var xh="oninput"in document;if(!xh){var Lp=document.createElement("div");Lp.setAttribute("oninput","return;"),xh=typeof Lp.oninput=="function"}bh=xh}else bh=!1;zp=bh&&(!document.documentMode||9<document.documentMode)}function _p(){xl&&(xl.detachEvent("onpropertychange",Up),Tl=xl=null)}function Up(r){if(r.propertyName==="value"&&xc(Tl)){var s=[];Mp(s,Tl,r,dh(r)),bp(NA,s)}}function DA(r,s,o){r==="focusin"?(_p(),xl=s,Tl=o,xl.attachEvent("onpropertychange",Up)):r==="focusout"&&_p()}function CA(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return xc(Tl)}function kA(r,s){if(r==="click")return xc(s)}function OA(r,s){if(r==="input"||r==="change")return xc(s)}function IA(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var on=typeof Object.is=="function"?Object.is:IA;function Al(r,s){if(on(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var o=Object.keys(r),u=Object.keys(s);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var f=o[u];if(!bt.call(s,f)||!on(r[f],s[f]))return!1}return!0}function qp(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Pp(r,s){var o=qp(r);r=0;for(var u;o;){if(o.nodeType===3){if(u=r+o.textContent.length,r<=s&&u>=s)return{node:o,offset:s-r};r=u}t:{for(;o;){if(o.nextSibling){o=o.nextSibling;break t}o=o.parentNode}o=void 0}o=qp(o)}}function Jp(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?Jp(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function Hp(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var s=ws(r.document);s instanceof r.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)r=s.contentWindow;else break;s=ws(r.document)}return s}function Th(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}var RA=Rr&&"documentMode"in document&&11>=document.documentMode,eo=null,Ah=null,El=null,Eh=!1;function $p(r,s,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Eh||eo==null||eo!==ws(u)||(u=eo,"selectionStart"in u&&Th(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),El&&Al(El,u)||(El=u,u=lf(Ah,"onSelect"),0<u.length&&(s=new Sc("onSelect","select",null,s,o),r.push({event:s,listeners:u}),s.target=eo)))}function fa(r,s){var o={};return o[r.toLowerCase()]=s.toLowerCase(),o["Webkit"+r]="webkit"+s,o["Moz"+r]="moz"+s,o}var no={animationend:fa("Animation","AnimationEnd"),animationiteration:fa("Animation","AnimationIteration"),animationstart:fa("Animation","AnimationStart"),transitionrun:fa("Transition","TransitionRun"),transitionstart:fa("Transition","TransitionStart"),transitioncancel:fa("Transition","TransitionCancel"),transitionend:fa("Transition","TransitionEnd")},Nh={},Vp={};Rr&&(Vp=document.createElement("div").style,"AnimationEvent"in window||(delete no.animationend.animation,delete no.animationiteration.animation,delete no.animationstart.animation),"TransitionEvent"in window||delete no.transitionend.transition);function da(r){if(Nh[r])return Nh[r];if(!no[r])return r;var s=no[r],o;for(o in s)if(s.hasOwnProperty(o)&&o in Vp)return Nh[r]=s[o];return r}var jp=da("animationend"),Yp=da("animationiteration"),Gp=da("animationstart"),MA=da("transitionrun"),BA=da("transitionstart"),zA=da("transitioncancel"),Xp=da("transitionend"),Kp=new Map,Dh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Dh.push("scrollEnd");function $n(r,s){Kp.set(r,s),Ir(s,[r])}var Fp=new WeakMap;function Sn(r,s){if(typeof r=="object"&&r!==null){var o=Fp.get(r);return o!==void 0?o:(s={value:r,source:s,stack:hc(s)},Fp.set(r,s),s)}return{value:r,source:s,stack:hc(s)}}var bn=[],ro=0,Ch=0;function Tc(){for(var r=ro,s=Ch=ro=0;s<r;){var o=bn[s];bn[s++]=null;var u=bn[s];bn[s++]=null;var f=bn[s];bn[s++]=null;var m=bn[s];if(bn[s++]=null,u!==null&&f!==null){var b=u.pending;b===null?f.next=f:(f.next=b.next,b.next=f),u.pending=f}m!==0&&Zp(o,f,m)}}function Ac(r,s,o,u){bn[ro++]=r,bn[ro++]=s,bn[ro++]=o,bn[ro++]=u,Ch|=u,r.lanes|=u,r=r.alternate,r!==null&&(r.lanes|=u)}function kh(r,s,o,u){return Ac(r,s,o,u),Ec(r)}function io(r,s){return Ac(r,null,null,s),Ec(r)}function Zp(r,s,o){r.lanes|=o;var u=r.alternate;u!==null&&(u.lanes|=o);for(var f=!1,m=r.return;m!==null;)m.childLanes|=o,u=m.alternate,u!==null&&(u.childLanes|=o),m.tag===22&&(r=m.stateNode,r===null||r._visibility&1||(f=!0)),r=m,m=m.return;return r.tag===3?(m=r.stateNode,f&&s!==null&&(f=31-Ie(o),r=m.hiddenUpdates,u=r[f],u===null?r[f]=[s]:u.push(s),s.lane=o|536870912),m):null}function Ec(r){if(50<Fl)throw Fl=0,zg=null,Error(i(185));for(var s=r.return;s!==null;)r=s,s=r.return;return r.tag===3?r.stateNode:null}var so={};function LA(r,s,o,u){this.tag=r,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ln(r,s,o,u){return new LA(r,s,o,u)}function Oh(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Mr(r,s){var o=r.alternate;return o===null?(o=ln(r.tag,s,r.key,r.mode),o.elementType=r.elementType,o.type=r.type,o.stateNode=r.stateNode,o.alternate=r,r.alternate=o):(o.pendingProps=s,o.type=r.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=r.flags&65011712,o.childLanes=r.childLanes,o.lanes=r.lanes,o.child=r.child,o.memoizedProps=r.memoizedProps,o.memoizedState=r.memoizedState,o.updateQueue=r.updateQueue,s=r.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=r.sibling,o.index=r.index,o.ref=r.ref,o.refCleanup=r.refCleanup,o}function Qp(r,s){r.flags&=65011714;var o=r.alternate;return o===null?(r.childLanes=0,r.lanes=s,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,s=o.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),r}function Nc(r,s,o,u,f,m){var b=0;if(u=r,typeof r=="function")Oh(r)&&(b=1);else if(typeof r=="string")b=UE(r,o,ut.current)?26:r==="html"||r==="head"||r==="body"?27:5;else t:switch(r){case F:return r=ln(31,o,s,f),r.elementType=F,r.lanes=m,r;case x:return ha(o.children,f,m,s);case E:b=8,f|=24;break;case I:return r=ln(12,o,s,f|2),r.elementType=I,r.lanes=m,r;case _:return r=ln(13,o,s,f),r.elementType=_,r.lanes=m,r;case J:return r=ln(19,o,s,f),r.elementType=J,r.lanes=m,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case k:case N:b=10;break t;case z:b=9;break t;case O:b=11;break t;case U:b=14;break t;case W:b=16,u=null;break t}b=29,o=Error(i(130,r===null?"null":typeof r,"")),u=null}return s=ln(b,o,s,f),s.elementType=r,s.type=u,s.lanes=m,s}function ha(r,s,o,u){return r=ln(7,r,u,s),r.lanes=o,r}function Ih(r,s,o){return r=ln(6,r,null,s),r.lanes=o,r}function Rh(r,s,o){return s=ln(4,r.children!==null?r.children:[],r.key,s),s.lanes=o,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}var ao=[],oo=0,Dc=null,Cc=0,xn=[],Tn=0,ga=null,Br=1,zr="";function ma(r,s){ao[oo++]=Cc,ao[oo++]=Dc,Dc=r,Cc=s}function Wp(r,s,o){xn[Tn++]=Br,xn[Tn++]=zr,xn[Tn++]=ga,ga=r;var u=Br;r=zr;var f=32-Ie(u)-1;u&=~(1<<f),o+=1;var m=32-Ie(s)+f;if(30<m){var b=f-f%5;m=(u&(1<<b)-1).toString(32),u>>=b,f-=b,Br=1<<32-Ie(s)+f|o<<f|u,zr=m+r}else Br=1<<m|o<<f|u,zr=r}function Mh(r){r.return!==null&&(ma(r,1),Wp(r,1,0))}function Bh(r){for(;r===Dc;)Dc=ao[--oo],ao[oo]=null,Cc=ao[--oo],ao[oo]=null;for(;r===ga;)ga=xn[--Tn],xn[Tn]=null,zr=xn[--Tn],xn[Tn]=null,Br=xn[--Tn],xn[Tn]=null}var Ve=null,le=null,jt=!1,ya=null,ir=!1,zh=Error(i(519));function pa(r){var s=Error(i(418,""));throw Cl(Sn(s,r)),zh}function t0(r){var s=r.stateNode,o=r.type,u=r.memoizedProps;switch(s[Ne]=r,s[qe]=u,o){case"dialog":Lt("cancel",s),Lt("close",s);break;case"iframe":case"object":case"embed":Lt("load",s);break;case"video":case"audio":for(o=0;o<Ql.length;o++)Lt(Ql[o],s);break;case"source":Lt("error",s);break;case"img":case"image":case"link":Lt("error",s),Lt("load",s);break;case"details":Lt("toggle",s);break;case"input":Lt("invalid",s),mp(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),Xa(s);break;case"select":Lt("invalid",s);break;case"textarea":Lt("invalid",s),pp(s,u.value,u.defaultValue,u.children),Xa(s)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||u.suppressHydrationWarning===!0||pw(s.textContent,o)?(u.popover!=null&&(Lt("beforetoggle",s),Lt("toggle",s)),u.onScroll!=null&&Lt("scroll",s),u.onScrollEnd!=null&&Lt("scrollend",s),u.onClick!=null&&(s.onclick=uf),s=!0):s=!1,s||pa(r)}function e0(r){for(Ve=r.return;Ve;)switch(Ve.tag){case 5:case 13:ir=!1;return;case 27:case 3:ir=!0;return;default:Ve=Ve.return}}function Nl(r){if(r!==Ve)return!1;if(!jt)return e0(r),jt=!0,!1;var s=r.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=r.type,o=!(o!=="form"&&o!=="button")||Zg(r.type,r.memoizedProps)),o=!o),o&&le&&pa(r),e0(r),s===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));t:{for(r=r.nextSibling,s=0;r;){if(r.nodeType===8)if(o=r.data,o==="/$"){if(s===0){le=jn(r.nextSibling);break t}s--}else o!=="$"&&o!=="$!"&&o!=="$?"||s++;r=r.nextSibling}le=null}}else s===27?(s=le,Ls(r.type)?(r=em,em=null,le=r):le=s):le=Ve?jn(r.stateNode.nextSibling):null;return!0}function Dl(){le=Ve=null,jt=!1}function n0(){var r=ya;return r!==null&&(Ze===null?Ze=r:Ze.push.apply(Ze,r),ya=null),r}function Cl(r){ya===null?ya=[r]:ya.push(r)}var Lh=P(null),va=null,Lr=null;function bs(r,s,o){rt(Lh,s._currentValue),s._currentValue=o}function _r(r){r._currentValue=Lh.current,tt(Lh)}function _h(r,s,o){for(;r!==null;){var u=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),r===o)break;r=r.return}}function Uh(r,s,o,u){var f=r.child;for(f!==null&&(f.return=r);f!==null;){var m=f.dependencies;if(m!==null){var b=f.child;m=m.firstContext;t:for(;m!==null;){var A=m;m=f;for(var M=0;M<s.length;M++)if(A.context===s[M]){m.lanes|=o,A=m.alternate,A!==null&&(A.lanes|=o),_h(m.return,o,r),u||(b=null);break t}m=A.next}}else if(f.tag===18){if(b=f.return,b===null)throw Error(i(341));b.lanes|=o,m=b.alternate,m!==null&&(m.lanes|=o),_h(b,o,r),b=null}else b=f.child;if(b!==null)b.return=f;else for(b=f;b!==null;){if(b===r){b=null;break}if(f=b.sibling,f!==null){f.return=b.return,b=f;break}b=b.return}f=b}}function kl(r,s,o,u){r=null;for(var f=s,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var b=f.alternate;if(b===null)throw Error(i(387));if(b=b.memoizedProps,b!==null){var A=f.type;on(f.pendingProps.value,b.value)||(r!==null?r.push(A):r=[A])}}else if(f===yt.current){if(b=f.alternate,b===null)throw Error(i(387));b.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(r!==null?r.push(iu):r=[iu])}f=f.return}r!==null&&Uh(s,r,o,u),s.flags|=262144}function kc(r){for(r=r.firstContext;r!==null;){if(!on(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function wa(r){va=r,Lr=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function Pe(r){return r0(va,r)}function Oc(r,s){return va===null&&wa(r),r0(r,s)}function r0(r,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},Lr===null){if(r===null)throw Error(i(308));Lr=s,r.dependencies={lanes:0,firstContext:s},r.flags|=524288}else Lr=Lr.next=s;return o}var _A=typeof AbortController<"u"?AbortController:function(){var r=[],s=this.signal={aborted:!1,addEventListener:function(o,u){r.push(u)}};this.abort=function(){s.aborted=!0,r.forEach(function(o){return o()})}},UA=n.unstable_scheduleCallback,qA=n.unstable_NormalPriority,Te={$$typeof:N,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function qh(){return{controller:new _A,data:new Map,refCount:0}}function Ol(r){r.refCount--,r.refCount===0&&UA(qA,function(){r.controller.abort()})}var Il=null,Ph=0,lo=0,uo=null;function PA(r,s){if(Il===null){var o=Il=[];Ph=0,lo=Hg(),uo={status:"pending",value:void 0,then:function(u){o.push(u)}}}return Ph++,s.then(i0,i0),s}function i0(){if(--Ph===0&&Il!==null){uo!==null&&(uo.status="fulfilled");var r=Il;Il=null,lo=0,uo=null;for(var s=0;s<r.length;s++)(0,r[s])()}}function JA(r,s){var o=[],u={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return r.then(function(){u.status="fulfilled",u.value=s;for(var f=0;f<o.length;f++)(0,o[f])(s)},function(f){for(u.status="rejected",u.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),u}var s0=C.S;C.S=function(r,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&PA(r,s),s0!==null&&s0(r,s)};var Sa=P(null);function Jh(){var r=Sa.current;return r!==null?r:ne.pooledCache}function Ic(r,s){s===null?rt(Sa,Sa.current):rt(Sa,s.pool)}function a0(){var r=Jh();return r===null?null:{parent:Te._currentValue,pool:r}}var Rl=Error(i(460)),o0=Error(i(474)),Rc=Error(i(542)),Hh={then:function(){}};function l0(r){return r=r.status,r==="fulfilled"||r==="rejected"}function Mc(){}function u0(r,s,o){switch(o=r[o],o===void 0?r.push(s):o!==s&&(s.then(Mc,Mc),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,f0(r),r;default:if(typeof s.status=="string")s.then(Mc,Mc);else{if(r=ne,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=s,r.status="pending",r.then(function(u){if(s.status==="pending"){var f=s;f.status="fulfilled",f.value=u}},function(u){if(s.status==="pending"){var f=s;f.status="rejected",f.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,f0(r),r}throw Ml=s,Rl}}var Ml=null;function c0(){if(Ml===null)throw Error(i(459));var r=Ml;return Ml=null,r}function f0(r){if(r===Rl||r===Rc)throw Error(i(483))}var xs=!1;function $h(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Vh(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Ts(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function As(r,s,o){var u=r.updateQueue;if(u===null)return null;if(u=u.shared,(Xt&2)!==0){var f=u.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),u.pending=s,s=Ec(r),Zp(r,null,o),s}return Ac(r,u,s,o),Ec(r)}function Bl(r,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var u=s.lanes;u&=r.pendingLanes,o|=u,s.lanes=o,sc(r,o)}}function jh(r,s){var o=r.updateQueue,u=r.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var f=null,m=null;if(o=o.firstBaseUpdate,o!==null){do{var b={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};m===null?f=m=b:m=m.next=b,o=o.next}while(o!==null);m===null?f=m=s:m=m.next=s}else f=m=s;o={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:u.shared,callbacks:u.callbacks},r.updateQueue=o;return}r=o.lastBaseUpdate,r===null?o.firstBaseUpdate=s:r.next=s,o.lastBaseUpdate=s}var Yh=!1;function zl(){if(Yh){var r=uo;if(r!==null)throw r}}function Ll(r,s,o,u){Yh=!1;var f=r.updateQueue;xs=!1;var m=f.firstBaseUpdate,b=f.lastBaseUpdate,A=f.shared.pending;if(A!==null){f.shared.pending=null;var M=A,X=M.next;M.next=null,b===null?m=X:b.next=X,b=M;var st=r.alternate;st!==null&&(st=st.updateQueue,A=st.lastBaseUpdate,A!==b&&(A===null?st.firstBaseUpdate=X:A.next=X,st.lastBaseUpdate=M))}if(m!==null){var lt=f.baseState;b=0,st=X=M=null,A=m;do{var K=A.lane&-536870913,Z=K!==A.lane;if(Z?(Pt&K)===K:(u&K)===K){K!==0&&K===lo&&(Yh=!0),st!==null&&(st=st.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});t:{var kt=r,Nt=A;K=s;var Qt=o;switch(Nt.tag){case 1:if(kt=Nt.payload,typeof kt=="function"){lt=kt.call(Qt,lt,K);break t}lt=kt;break t;case 3:kt.flags=kt.flags&-65537|128;case 0:if(kt=Nt.payload,K=typeof kt=="function"?kt.call(Qt,lt,K):kt,K==null)break t;lt=y({},lt,K);break t;case 2:xs=!0}}K=A.callback,K!==null&&(r.flags|=64,Z&&(r.flags|=8192),Z=f.callbacks,Z===null?f.callbacks=[K]:Z.push(K))}else Z={lane:K,tag:A.tag,payload:A.payload,callback:A.callback,next:null},st===null?(X=st=Z,M=lt):st=st.next=Z,b|=K;if(A=A.next,A===null){if(A=f.shared.pending,A===null)break;Z=A,A=Z.next,Z.next=null,f.lastBaseUpdate=Z,f.shared.pending=null}}while(!0);st===null&&(M=lt),f.baseState=M,f.firstBaseUpdate=X,f.lastBaseUpdate=st,m===null&&(f.shared.lanes=0),Rs|=b,r.lanes=b,r.memoizedState=lt}}function d0(r,s){if(typeof r!="function")throw Error(i(191,r));r.call(s)}function h0(r,s){var o=r.callbacks;if(o!==null)for(r.callbacks=null,r=0;r<o.length;r++)d0(o[r],s)}var co=P(null),Bc=P(0);function g0(r,s){r=Vr,rt(Bc,r),rt(co,s),Vr=r|s.baseLanes}function Gh(){rt(Bc,Vr),rt(co,co.current)}function Xh(){Vr=Bc.current,tt(co),tt(Bc)}var Es=0,Mt=null,Ft=null,we=null,zc=!1,fo=!1,ba=!1,Lc=0,_l=0,ho=null,HA=0;function ge(){throw Error(i(321))}function Kh(r,s){if(s===null)return!1;for(var o=0;o<s.length&&o<r.length;o++)if(!on(r[o],s[o]))return!1;return!0}function Fh(r,s,o,u,f,m){return Es=m,Mt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,C.H=r===null||r.memoizedState===null?Z0:Q0,ba=!1,m=o(u,f),ba=!1,fo&&(m=y0(s,o,u,f)),m0(r),m}function m0(r){C.H=Hc;var s=Ft!==null&&Ft.next!==null;if(Es=0,we=Ft=Mt=null,zc=!1,_l=0,ho=null,s)throw Error(i(300));r===null||De||(r=r.dependencies,r!==null&&kc(r)&&(De=!0))}function y0(r,s,o,u){Mt=r;var f=0;do{if(fo&&(ho=null),_l=0,fo=!1,25<=f)throw Error(i(301));if(f+=1,we=Ft=null,r.updateQueue!=null){var m=r.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}C.H=KA,m=s(o,u)}while(fo);return m}function $A(){var r=C.H,s=r.useState()[0];return s=typeof s.then=="function"?Ul(s):s,r=r.useState()[0],(Ft!==null?Ft.memoizedState:null)!==r&&(Mt.flags|=1024),s}function Zh(){var r=Lc!==0;return Lc=0,r}function Qh(r,s,o){s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~o}function Wh(r){if(zc){for(r=r.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}zc=!1}Es=0,we=Ft=Mt=null,fo=!1,_l=Lc=0,ho=null}function Ke(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return we===null?Mt.memoizedState=we=r:we=we.next=r,we}function Se(){if(Ft===null){var r=Mt.alternate;r=r!==null?r.memoizedState:null}else r=Ft.next;var s=we===null?Mt.memoizedState:we.next;if(s!==null)we=s,Ft=r;else{if(r===null)throw Mt.alternate===null?Error(i(467)):Error(i(310));Ft=r,r={memoizedState:Ft.memoizedState,baseState:Ft.baseState,baseQueue:Ft.baseQueue,queue:Ft.queue,next:null},we===null?Mt.memoizedState=we=r:we=we.next=r}return we}function tg(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ul(r){var s=_l;return _l+=1,ho===null&&(ho=[]),r=u0(ho,r,s),s=Mt,(we===null?s.memoizedState:we.next)===null&&(s=s.alternate,C.H=s===null||s.memoizedState===null?Z0:Q0),r}function _c(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return Ul(r);if(r.$$typeof===N)return Pe(r)}throw Error(i(438,String(r)))}function eg(r){var s=null,o=Mt.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var u=Mt.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(f){return f.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=tg(),Mt.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(r),u=0;u<r;u++)o[u]=nt;return s.index++,o}function Ur(r,s){return typeof s=="function"?s(r):s}function Uc(r){var s=Se();return ng(s,Ft,r)}function ng(r,s,o){var u=r.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=o;var f=r.baseQueue,m=u.pending;if(m!==null){if(f!==null){var b=f.next;f.next=m.next,m.next=b}s.baseQueue=f=m,u.pending=null}if(m=r.baseState,f===null)r.memoizedState=m;else{s=f.next;var A=b=null,M=null,X=s,st=!1;do{var lt=X.lane&-536870913;if(lt!==X.lane?(Pt&lt)===lt:(Es&lt)===lt){var K=X.revertLane;if(K===0)M!==null&&(M=M.next={lane:0,revertLane:0,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),lt===lo&&(st=!0);else if((Es&K)===K){X=X.next,K===lo&&(st=!0);continue}else lt={lane:0,revertLane:X.revertLane,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},M===null?(A=M=lt,b=m):M=M.next=lt,Mt.lanes|=K,Rs|=K;lt=X.action,ba&&o(m,lt),m=X.hasEagerState?X.eagerState:o(m,lt)}else K={lane:lt,revertLane:X.revertLane,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},M===null?(A=M=K,b=m):M=M.next=K,Mt.lanes|=lt,Rs|=lt;X=X.next}while(X!==null&&X!==s);if(M===null?b=m:M.next=A,!on(m,r.memoizedState)&&(De=!0,st&&(o=uo,o!==null)))throw o;r.memoizedState=m,r.baseState=b,r.baseQueue=M,u.lastRenderedState=m}return f===null&&(u.lanes=0),[r.memoizedState,u.dispatch]}function rg(r){var s=Se(),o=s.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=r;var u=o.dispatch,f=o.pending,m=s.memoizedState;if(f!==null){o.pending=null;var b=f=f.next;do m=r(m,b.action),b=b.next;while(b!==f);on(m,s.memoizedState)||(De=!0),s.memoizedState=m,s.baseQueue===null&&(s.baseState=m),o.lastRenderedState=m}return[m,u]}function p0(r,s,o){var u=Mt,f=Se(),m=jt;if(m){if(o===void 0)throw Error(i(407));o=o()}else o=s();var b=!on((Ft||f).memoizedState,o);b&&(f.memoizedState=o,De=!0),f=f.queue;var A=S0.bind(null,u,f,r);if(ql(2048,8,A,[r]),f.getSnapshot!==s||b||we!==null&&we.memoizedState.tag&1){if(u.flags|=2048,go(9,qc(),w0.bind(null,u,f,o,s),null),ne===null)throw Error(i(349));m||(Es&124)!==0||v0(u,s,o)}return o}function v0(r,s,o){r.flags|=16384,r={getSnapshot:s,value:o},s=Mt.updateQueue,s===null?(s=tg(),Mt.updateQueue=s,s.stores=[r]):(o=s.stores,o===null?s.stores=[r]:o.push(r))}function w0(r,s,o,u){s.value=o,s.getSnapshot=u,b0(s)&&x0(r)}function S0(r,s,o){return o(function(){b0(s)&&x0(r)})}function b0(r){var s=r.getSnapshot;r=r.value;try{var o=s();return!on(r,o)}catch{return!0}}function x0(r){var s=io(r,2);s!==null&&hn(s,r,2)}function ig(r){var s=Ke();if(typeof r=="function"){var o=r;if(r=o(),ba){nr(!0);try{o()}finally{nr(!1)}}}return s.memoizedState=s.baseState=r,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ur,lastRenderedState:r},s}function T0(r,s,o,u){return r.baseState=o,ng(r,Ft,typeof u=="function"?u:Ur)}function VA(r,s,o,u,f){if(Jc(r))throw Error(i(485));if(r=s.action,r!==null){var m={payload:f,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){m.listeners.push(b)}};C.T!==null?o(!0):m.isTransition=!1,u(m),o=s.pending,o===null?(m.next=s.pending=m,A0(s,m)):(m.next=o.next,s.pending=o.next=m)}}function A0(r,s){var o=s.action,u=s.payload,f=r.state;if(s.isTransition){var m=C.T,b={};C.T=b;try{var A=o(f,u),M=C.S;M!==null&&M(b,A),E0(r,s,A)}catch(X){sg(r,s,X)}finally{C.T=m}}else try{m=o(f,u),E0(r,s,m)}catch(X){sg(r,s,X)}}function E0(r,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){N0(r,s,u)},function(u){return sg(r,s,u)}):N0(r,s,o)}function N0(r,s,o){s.status="fulfilled",s.value=o,D0(s),r.state=o,s=r.pending,s!==null&&(o=s.next,o===s?r.pending=null:(o=o.next,s.next=o,A0(r,o)))}function sg(r,s,o){var u=r.pending;if(r.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=o,D0(s),s=s.next;while(s!==u)}r.action=null}function D0(r){r=r.listeners;for(var s=0;s<r.length;s++)(0,r[s])()}function C0(r,s){return s}function k0(r,s){if(jt){var o=ne.formState;if(o!==null){t:{var u=Mt;if(jt){if(le){e:{for(var f=le,m=ir;f.nodeType!==8;){if(!m){f=null;break e}if(f=jn(f.nextSibling),f===null){f=null;break e}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){le=jn(f.nextSibling),u=f.data==="F!";break t}}pa(u)}u=!1}u&&(s=o[0])}}return o=Ke(),o.memoizedState=o.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:C0,lastRenderedState:s},o.queue=u,o=X0.bind(null,Mt,u),u.dispatch=o,u=ig(!1),m=cg.bind(null,Mt,!1,u.queue),u=Ke(),f={state:s,dispatch:null,action:r,pending:null},u.queue=f,o=VA.bind(null,Mt,f,m,o),f.dispatch=o,u.memoizedState=r,[s,o,!1]}function O0(r){var s=Se();return I0(s,Ft,r)}function I0(r,s,o){if(s=ng(r,s,C0)[0],r=Uc(Ur)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=Ul(s)}catch(b){throw b===Rl?Rc:b}else u=s;s=Se();var f=s.queue,m=f.dispatch;return o!==s.memoizedState&&(Mt.flags|=2048,go(9,qc(),jA.bind(null,f,o),null)),[u,m,r]}function jA(r,s){r.action=s}function R0(r){var s=Se(),o=Ft;if(o!==null)return I0(s,o,r);Se(),s=s.memoizedState,o=Se();var u=o.queue.dispatch;return o.memoizedState=r,[s,u,!1]}function go(r,s,o,u){return r={tag:r,create:o,deps:u,inst:s,next:null},s=Mt.updateQueue,s===null&&(s=tg(),Mt.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=r.next=r:(u=o.next,o.next=r,r.next=u,s.lastEffect=r),r}function qc(){return{destroy:void 0,resource:void 0}}function M0(){return Se().memoizedState}function Pc(r,s,o,u){var f=Ke();u=u===void 0?null:u,Mt.flags|=r,f.memoizedState=go(1|s,qc(),o,u)}function ql(r,s,o,u){var f=Se();u=u===void 0?null:u;var m=f.memoizedState.inst;Ft!==null&&u!==null&&Kh(u,Ft.memoizedState.deps)?f.memoizedState=go(s,m,o,u):(Mt.flags|=r,f.memoizedState=go(1|s,m,o,u))}function B0(r,s){Pc(8390656,8,r,s)}function z0(r,s){ql(2048,8,r,s)}function L0(r,s){return ql(4,2,r,s)}function _0(r,s){return ql(4,4,r,s)}function U0(r,s){if(typeof s=="function"){r=r();var o=s(r);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function q0(r,s,o){o=o!=null?o.concat([r]):null,ql(4,4,U0.bind(null,s,r),o)}function ag(){}function P0(r,s){var o=Se();s=s===void 0?null:s;var u=o.memoizedState;return s!==null&&Kh(s,u[1])?u[0]:(o.memoizedState=[r,s],r)}function J0(r,s){var o=Se();s=s===void 0?null:s;var u=o.memoizedState;if(s!==null&&Kh(s,u[1]))return u[0];if(u=r(),ba){nr(!0);try{r()}finally{nr(!1)}}return o.memoizedState=[u,s],u}function og(r,s,o){return o===void 0||(Es&1073741824)!==0?r.memoizedState=s:(r.memoizedState=o,r=Vv(),Mt.lanes|=r,Rs|=r,o)}function H0(r,s,o,u){return on(o,s)?o:co.current!==null?(r=og(r,o,u),on(r,s)||(De=!0),r):(Es&42)===0?(De=!0,r.memoizedState=o):(r=Vv(),Mt.lanes|=r,Rs|=r,s)}function $0(r,s,o,u,f){var m=B.p;B.p=m!==0&&8>m?m:8;var b=C.T,A={};C.T=A,cg(r,!1,s,o);try{var M=f(),X=C.S;if(X!==null&&X(A,M),M!==null&&typeof M=="object"&&typeof M.then=="function"){var st=JA(M,u);Pl(r,s,st,dn(r))}else Pl(r,s,u,dn(r))}catch(lt){Pl(r,s,{then:function(){},status:"rejected",reason:lt},dn())}finally{B.p=m,C.T=b}}function YA(){}function lg(r,s,o,u){if(r.tag!==5)throw Error(i(476));var f=V0(r).queue;$0(r,f,s,H,o===null?YA:function(){return j0(r),o(u)})}function V0(r){var s=r.memoizedState;if(s!==null)return s;s={memoizedState:H,baseState:H,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ur,lastRenderedState:H},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ur,lastRenderedState:o},next:null},r.memoizedState=s,r=r.alternate,r!==null&&(r.memoizedState=s),s}function j0(r){var s=V0(r).next.queue;Pl(r,s,{},dn())}function ug(){return Pe(iu)}function Y0(){return Se().memoizedState}function G0(){return Se().memoizedState}function GA(r){for(var s=r.return;s!==null;){switch(s.tag){case 24:case 3:var o=dn();r=Ts(o);var u=As(s,r,o);u!==null&&(hn(u,s,o),Bl(u,s,o)),s={cache:qh()},r.payload=s;return}s=s.return}}function XA(r,s,o){var u=dn();o={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},Jc(r)?K0(s,o):(o=kh(r,s,o,u),o!==null&&(hn(o,r,u),F0(o,s,u)))}function X0(r,s,o){var u=dn();Pl(r,s,o,u)}function Pl(r,s,o,u){var f={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(Jc(r))K0(s,f);else{var m=r.alternate;if(r.lanes===0&&(m===null||m.lanes===0)&&(m=s.lastRenderedReducer,m!==null))try{var b=s.lastRenderedState,A=m(b,o);if(f.hasEagerState=!0,f.eagerState=A,on(A,b))return Ac(r,s,f,0),ne===null&&Tc(),!1}catch{}finally{}if(o=kh(r,s,f,u),o!==null)return hn(o,r,u),F0(o,s,u),!0}return!1}function cg(r,s,o,u){if(u={lane:2,revertLane:Hg(),action:u,hasEagerState:!1,eagerState:null,next:null},Jc(r)){if(s)throw Error(i(479))}else s=kh(r,o,u,2),s!==null&&hn(s,r,2)}function Jc(r){var s=r.alternate;return r===Mt||s!==null&&s===Mt}function K0(r,s){fo=zc=!0;var o=r.pending;o===null?s.next=s:(s.next=o.next,o.next=s),r.pending=s}function F0(r,s,o){if((o&4194048)!==0){var u=s.lanes;u&=r.pendingLanes,o|=u,s.lanes=o,sc(r,o)}}var Hc={readContext:Pe,use:_c,useCallback:ge,useContext:ge,useEffect:ge,useImperativeHandle:ge,useLayoutEffect:ge,useInsertionEffect:ge,useMemo:ge,useReducer:ge,useRef:ge,useState:ge,useDebugValue:ge,useDeferredValue:ge,useTransition:ge,useSyncExternalStore:ge,useId:ge,useHostTransitionStatus:ge,useFormState:ge,useActionState:ge,useOptimistic:ge,useMemoCache:ge,useCacheRefresh:ge},Z0={readContext:Pe,use:_c,useCallback:function(r,s){return Ke().memoizedState=[r,s===void 0?null:s],r},useContext:Pe,useEffect:B0,useImperativeHandle:function(r,s,o){o=o!=null?o.concat([r]):null,Pc(4194308,4,U0.bind(null,s,r),o)},useLayoutEffect:function(r,s){return Pc(4194308,4,r,s)},useInsertionEffect:function(r,s){Pc(4,2,r,s)},useMemo:function(r,s){var o=Ke();s=s===void 0?null:s;var u=r();if(ba){nr(!0);try{r()}finally{nr(!1)}}return o.memoizedState=[u,s],u},useReducer:function(r,s,o){var u=Ke();if(o!==void 0){var f=o(s);if(ba){nr(!0);try{o(s)}finally{nr(!1)}}}else f=s;return u.memoizedState=u.baseState=f,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:f},u.queue=r,r=r.dispatch=XA.bind(null,Mt,r),[u.memoizedState,r]},useRef:function(r){var s=Ke();return r={current:r},s.memoizedState=r},useState:function(r){r=ig(r);var s=r.queue,o=X0.bind(null,Mt,s);return s.dispatch=o,[r.memoizedState,o]},useDebugValue:ag,useDeferredValue:function(r,s){var o=Ke();return og(o,r,s)},useTransition:function(){var r=ig(!1);return r=$0.bind(null,Mt,r.queue,!0,!1),Ke().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,s,o){var u=Mt,f=Ke();if(jt){if(o===void 0)throw Error(i(407));o=o()}else{if(o=s(),ne===null)throw Error(i(349));(Pt&124)!==0||v0(u,s,o)}f.memoizedState=o;var m={value:o,getSnapshot:s};return f.queue=m,B0(S0.bind(null,u,m,r),[r]),u.flags|=2048,go(9,qc(),w0.bind(null,u,m,o,s),null),o},useId:function(){var r=Ke(),s=ne.identifierPrefix;if(jt){var o=zr,u=Br;o=(u&~(1<<32-Ie(u)-1)).toString(32)+o,s="«"+s+"R"+o,o=Lc++,0<o&&(s+="H"+o.toString(32)),s+="»"}else o=HA++,s="«"+s+"r"+o.toString(32)+"»";return r.memoizedState=s},useHostTransitionStatus:ug,useFormState:k0,useActionState:k0,useOptimistic:function(r){var s=Ke();s.memoizedState=s.baseState=r;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=cg.bind(null,Mt,!0,o),o.dispatch=s,[r,s]},useMemoCache:eg,useCacheRefresh:function(){return Ke().memoizedState=GA.bind(null,Mt)}},Q0={readContext:Pe,use:_c,useCallback:P0,useContext:Pe,useEffect:z0,useImperativeHandle:q0,useInsertionEffect:L0,useLayoutEffect:_0,useMemo:J0,useReducer:Uc,useRef:M0,useState:function(){return Uc(Ur)},useDebugValue:ag,useDeferredValue:function(r,s){var o=Se();return H0(o,Ft.memoizedState,r,s)},useTransition:function(){var r=Uc(Ur)[0],s=Se().memoizedState;return[typeof r=="boolean"?r:Ul(r),s]},useSyncExternalStore:p0,useId:Y0,useHostTransitionStatus:ug,useFormState:O0,useActionState:O0,useOptimistic:function(r,s){var o=Se();return T0(o,Ft,r,s)},useMemoCache:eg,useCacheRefresh:G0},KA={readContext:Pe,use:_c,useCallback:P0,useContext:Pe,useEffect:z0,useImperativeHandle:q0,useInsertionEffect:L0,useLayoutEffect:_0,useMemo:J0,useReducer:rg,useRef:M0,useState:function(){return rg(Ur)},useDebugValue:ag,useDeferredValue:function(r,s){var o=Se();return Ft===null?og(o,r,s):H0(o,Ft.memoizedState,r,s)},useTransition:function(){var r=rg(Ur)[0],s=Se().memoizedState;return[typeof r=="boolean"?r:Ul(r),s]},useSyncExternalStore:p0,useId:Y0,useHostTransitionStatus:ug,useFormState:R0,useActionState:R0,useOptimistic:function(r,s){var o=Se();return Ft!==null?T0(o,Ft,r,s):(o.baseState=r,[r,o.queue.dispatch])},useMemoCache:eg,useCacheRefresh:G0},mo=null,Jl=0;function $c(r){var s=Jl;return Jl+=1,mo===null&&(mo=[]),u0(mo,r,s)}function Hl(r,s){s=s.props.ref,r.ref=s!==void 0?s:null}function Vc(r,s){throw s.$$typeof===w?Error(i(525)):(r=Object.prototype.toString.call(s),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r)))}function W0(r){var s=r._init;return s(r._payload)}function tv(r){function s($,L){if(r){var Y=$.deletions;Y===null?($.deletions=[L],$.flags|=16):Y.push(L)}}function o($,L){if(!r)return null;for(;L!==null;)s($,L),L=L.sibling;return null}function u($){for(var L=new Map;$!==null;)$.key!==null?L.set($.key,$):L.set($.index,$),$=$.sibling;return L}function f($,L){return $=Mr($,L),$.index=0,$.sibling=null,$}function m($,L,Y){return $.index=Y,r?(Y=$.alternate,Y!==null?(Y=Y.index,Y<L?($.flags|=67108866,L):Y):($.flags|=67108866,L)):($.flags|=1048576,L)}function b($){return r&&$.alternate===null&&($.flags|=67108866),$}function A($,L,Y,at){return L===null||L.tag!==6?(L=Ih(Y,$.mode,at),L.return=$,L):(L=f(L,Y),L.return=$,L)}function M($,L,Y,at){var vt=Y.type;return vt===x?st($,L,Y.props.children,at,Y.key):L!==null&&(L.elementType===vt||typeof vt=="object"&&vt!==null&&vt.$$typeof===W&&W0(vt)===L.type)?(L=f(L,Y.props),Hl(L,Y),L.return=$,L):(L=Nc(Y.type,Y.key,Y.props,null,$.mode,at),Hl(L,Y),L.return=$,L)}function X($,L,Y,at){return L===null||L.tag!==4||L.stateNode.containerInfo!==Y.containerInfo||L.stateNode.implementation!==Y.implementation?(L=Rh(Y,$.mode,at),L.return=$,L):(L=f(L,Y.children||[]),L.return=$,L)}function st($,L,Y,at,vt){return L===null||L.tag!==7?(L=ha(Y,$.mode,at,vt),L.return=$,L):(L=f(L,Y),L.return=$,L)}function lt($,L,Y){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=Ih(""+L,$.mode,Y),L.return=$,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case v:return Y=Nc(L.type,L.key,L.props,null,$.mode,Y),Hl(Y,L),Y.return=$,Y;case S:return L=Rh(L,$.mode,Y),L.return=$,L;case W:var at=L._init;return L=at(L._payload),lt($,L,Y)}if(j(L)||ot(L))return L=ha(L,$.mode,Y,null),L.return=$,L;if(typeof L.then=="function")return lt($,$c(L),Y);if(L.$$typeof===N)return lt($,Oc($,L),Y);Vc($,L)}return null}function K($,L,Y,at){var vt=L!==null?L.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return vt!==null?null:A($,L,""+Y,at);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case v:return Y.key===vt?M($,L,Y,at):null;case S:return Y.key===vt?X($,L,Y,at):null;case W:return vt=Y._init,Y=vt(Y._payload),K($,L,Y,at)}if(j(Y)||ot(Y))return vt!==null?null:st($,L,Y,at,null);if(typeof Y.then=="function")return K($,L,$c(Y),at);if(Y.$$typeof===N)return K($,L,Oc($,Y),at);Vc($,Y)}return null}function Z($,L,Y,at,vt){if(typeof at=="string"&&at!==""||typeof at=="number"||typeof at=="bigint")return $=$.get(Y)||null,A(L,$,""+at,vt);if(typeof at=="object"&&at!==null){switch(at.$$typeof){case v:return $=$.get(at.key===null?Y:at.key)||null,M(L,$,at,vt);case S:return $=$.get(at.key===null?Y:at.key)||null,X(L,$,at,vt);case W:var Bt=at._init;return at=Bt(at._payload),Z($,L,Y,at,vt)}if(j(at)||ot(at))return $=$.get(Y)||null,st(L,$,at,vt,null);if(typeof at.then=="function")return Z($,L,Y,$c(at),vt);if(at.$$typeof===N)return Z($,L,Y,Oc(L,at),vt);Vc(L,at)}return null}function kt($,L,Y,at){for(var vt=null,Bt=null,St=L,Dt=L=0,ke=null;St!==null&&Dt<Y.length;Dt++){St.index>Dt?(ke=St,St=null):ke=St.sibling;var $t=K($,St,Y[Dt],at);if($t===null){St===null&&(St=ke);break}r&&St&&$t.alternate===null&&s($,St),L=m($t,L,Dt),Bt===null?vt=$t:Bt.sibling=$t,Bt=$t,St=ke}if(Dt===Y.length)return o($,St),jt&&ma($,Dt),vt;if(St===null){for(;Dt<Y.length;Dt++)St=lt($,Y[Dt],at),St!==null&&(L=m(St,L,Dt),Bt===null?vt=St:Bt.sibling=St,Bt=St);return jt&&ma($,Dt),vt}for(St=u(St);Dt<Y.length;Dt++)ke=Z(St,$,Dt,Y[Dt],at),ke!==null&&(r&&ke.alternate!==null&&St.delete(ke.key===null?Dt:ke.key),L=m(ke,L,Dt),Bt===null?vt=ke:Bt.sibling=ke,Bt=ke);return r&&St.forEach(function(Js){return s($,Js)}),jt&&ma($,Dt),vt}function Nt($,L,Y,at){if(Y==null)throw Error(i(151));for(var vt=null,Bt=null,St=L,Dt=L=0,ke=null,$t=Y.next();St!==null&&!$t.done;Dt++,$t=Y.next()){St.index>Dt?(ke=St,St=null):ke=St.sibling;var Js=K($,St,$t.value,at);if(Js===null){St===null&&(St=ke);break}r&&St&&Js.alternate===null&&s($,St),L=m(Js,L,Dt),Bt===null?vt=Js:Bt.sibling=Js,Bt=Js,St=ke}if($t.done)return o($,St),jt&&ma($,Dt),vt;if(St===null){for(;!$t.done;Dt++,$t=Y.next())$t=lt($,$t.value,at),$t!==null&&(L=m($t,L,Dt),Bt===null?vt=$t:Bt.sibling=$t,Bt=$t);return jt&&ma($,Dt),vt}for(St=u(St);!$t.done;Dt++,$t=Y.next())$t=Z(St,$,Dt,$t.value,at),$t!==null&&(r&&$t.alternate!==null&&St.delete($t.key===null?Dt:$t.key),L=m($t,L,Dt),Bt===null?vt=$t:Bt.sibling=$t,Bt=$t);return r&&St.forEach(function(FE){return s($,FE)}),jt&&ma($,Dt),vt}function Qt($,L,Y,at){if(typeof Y=="object"&&Y!==null&&Y.type===x&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case v:t:{for(var vt=Y.key;L!==null;){if(L.key===vt){if(vt=Y.type,vt===x){if(L.tag===7){o($,L.sibling),at=f(L,Y.props.children),at.return=$,$=at;break t}}else if(L.elementType===vt||typeof vt=="object"&&vt!==null&&vt.$$typeof===W&&W0(vt)===L.type){o($,L.sibling),at=f(L,Y.props),Hl(at,Y),at.return=$,$=at;break t}o($,L);break}else s($,L);L=L.sibling}Y.type===x?(at=ha(Y.props.children,$.mode,at,Y.key),at.return=$,$=at):(at=Nc(Y.type,Y.key,Y.props,null,$.mode,at),Hl(at,Y),at.return=$,$=at)}return b($);case S:t:{for(vt=Y.key;L!==null;){if(L.key===vt)if(L.tag===4&&L.stateNode.containerInfo===Y.containerInfo&&L.stateNode.implementation===Y.implementation){o($,L.sibling),at=f(L,Y.children||[]),at.return=$,$=at;break t}else{o($,L);break}else s($,L);L=L.sibling}at=Rh(Y,$.mode,at),at.return=$,$=at}return b($);case W:return vt=Y._init,Y=vt(Y._payload),Qt($,L,Y,at)}if(j(Y))return kt($,L,Y,at);if(ot(Y)){if(vt=ot(Y),typeof vt!="function")throw Error(i(150));return Y=vt.call(Y),Nt($,L,Y,at)}if(typeof Y.then=="function")return Qt($,L,$c(Y),at);if(Y.$$typeof===N)return Qt($,L,Oc($,Y),at);Vc($,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint"?(Y=""+Y,L!==null&&L.tag===6?(o($,L.sibling),at=f(L,Y),at.return=$,$=at):(o($,L),at=Ih(Y,$.mode,at),at.return=$,$=at),b($)):o($,L)}return function($,L,Y,at){try{Jl=0;var vt=Qt($,L,Y,at);return mo=null,vt}catch(St){if(St===Rl||St===Rc)throw St;var Bt=ln(29,St,null,$.mode);return Bt.lanes=at,Bt.return=$,Bt}finally{}}}var yo=tv(!0),ev=tv(!1),An=P(null),sr=null;function Ns(r){var s=r.alternate;rt(Ae,Ae.current&1),rt(An,r),sr===null&&(s===null||co.current!==null||s.memoizedState!==null)&&(sr=r)}function nv(r){if(r.tag===22){if(rt(Ae,Ae.current),rt(An,r),sr===null){var s=r.alternate;s!==null&&s.memoizedState!==null&&(sr=r)}}else Ds()}function Ds(){rt(Ae,Ae.current),rt(An,An.current)}function qr(r){tt(An),sr===r&&(sr=null),tt(Ae)}var Ae=P(0);function jc(r){for(var s=r;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||tm(o)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function fg(r,s,o,u){s=r.memoizedState,o=o(u,s),o=o==null?s:y({},s,o),r.memoizedState=o,r.lanes===0&&(r.updateQueue.baseState=o)}var dg={enqueueSetState:function(r,s,o){r=r._reactInternals;var u=dn(),f=Ts(u);f.payload=s,o!=null&&(f.callback=o),s=As(r,f,u),s!==null&&(hn(s,r,u),Bl(s,r,u))},enqueueReplaceState:function(r,s,o){r=r._reactInternals;var u=dn(),f=Ts(u);f.tag=1,f.payload=s,o!=null&&(f.callback=o),s=As(r,f,u),s!==null&&(hn(s,r,u),Bl(s,r,u))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var o=dn(),u=Ts(o);u.tag=2,s!=null&&(u.callback=s),s=As(r,u,o),s!==null&&(hn(s,r,o),Bl(s,r,o))}};function rv(r,s,o,u,f,m,b){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(u,m,b):s.prototype&&s.prototype.isPureReactComponent?!Al(o,u)||!Al(f,m):!0}function iv(r,s,o,u){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,u),s.state!==r&&dg.enqueueReplaceState(s,s.state,null)}function xa(r,s){var o=s;if("ref"in s){o={};for(var u in s)u!=="ref"&&(o[u]=s[u])}if(r=r.defaultProps){o===s&&(o=y({},o));for(var f in r)o[f]===void 0&&(o[f]=r[f])}return o}var Yc=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)};function sv(r){Yc(r)}function av(r){console.error(r)}function ov(r){Yc(r)}function Gc(r,s){try{var o=r.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function lv(r,s,o){try{var u=r.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function hg(r,s,o){return o=Ts(o),o.tag=3,o.payload={element:null},o.callback=function(){Gc(r,s)},o}function uv(r){return r=Ts(r),r.tag=3,r}function cv(r,s,o,u){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var m=u.value;r.payload=function(){return f(m)},r.callback=function(){lv(s,o,u)}}var b=o.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(r.callback=function(){lv(s,o,u),typeof f!="function"&&(Ms===null?Ms=new Set([this]):Ms.add(this));var A=u.stack;this.componentDidCatch(u.value,{componentStack:A!==null?A:""})})}function FA(r,s,o,u,f){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=o.alternate,s!==null&&kl(s,o,f,!0),o=An.current,o!==null){switch(o.tag){case 13:return sr===null?_g():o.alternate===null&&ue===0&&(ue=3),o.flags&=-257,o.flags|=65536,o.lanes=f,u===Hh?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([u]):s.add(u),qg(r,u,f)),!1;case 22:return o.flags|=65536,u===Hh?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([u]):o.add(u)),qg(r,u,f)),!1}throw Error(i(435,o.tag))}return qg(r,u,f),_g(),!1}if(jt)return s=An.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=f,u!==zh&&(r=Error(i(422),{cause:u}),Cl(Sn(r,o)))):(u!==zh&&(s=Error(i(423),{cause:u}),Cl(Sn(s,o))),r=r.current.alternate,r.flags|=65536,f&=-f,r.lanes|=f,u=Sn(u,o),f=hg(r.stateNode,u,f),jh(r,f),ue!==4&&(ue=2)),!1;var m=Error(i(520),{cause:u});if(m=Sn(m,o),Kl===null?Kl=[m]:Kl.push(m),ue!==4&&(ue=2),s===null)return!0;u=Sn(u,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,r=f&-f,o.lanes|=r,r=hg(o.stateNode,u,r),jh(o,r),!1;case 1:if(s=o.type,m=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Ms===null||!Ms.has(m))))return o.flags|=65536,f&=-f,o.lanes|=f,f=uv(f),cv(f,r,o,u),jh(o,f),!1}o=o.return}while(o!==null);return!1}var fv=Error(i(461)),De=!1;function Re(r,s,o,u){s.child=r===null?ev(s,null,o,u):yo(s,r.child,o,u)}function dv(r,s,o,u,f){o=o.render;var m=s.ref;if("ref"in u){var b={};for(var A in u)A!=="ref"&&(b[A]=u[A])}else b=u;return wa(s),u=Fh(r,s,o,b,m,f),A=Zh(),r!==null&&!De?(Qh(r,s,f),Pr(r,s,f)):(jt&&A&&Mh(s),s.flags|=1,Re(r,s,u,f),s.child)}function hv(r,s,o,u,f){if(r===null){var m=o.type;return typeof m=="function"&&!Oh(m)&&m.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=m,gv(r,s,m,u,f)):(r=Nc(o.type,null,u,s,s.mode,f),r.ref=s.ref,r.return=s,s.child=r)}if(m=r.child,!bg(r,f)){var b=m.memoizedProps;if(o=o.compare,o=o!==null?o:Al,o(b,u)&&r.ref===s.ref)return Pr(r,s,f)}return s.flags|=1,r=Mr(m,u),r.ref=s.ref,r.return=s,s.child=r}function gv(r,s,o,u,f){if(r!==null){var m=r.memoizedProps;if(Al(m,u)&&r.ref===s.ref)if(De=!1,s.pendingProps=u=m,bg(r,f))(r.flags&131072)!==0&&(De=!0);else return s.lanes=r.lanes,Pr(r,s,f)}return gg(r,s,o,u,f)}function mv(r,s,o){var u=s.pendingProps,f=u.children,m=r!==null?r.memoizedState:null;if(u.mode==="hidden"){if((s.flags&128)!==0){if(u=m!==null?m.baseLanes|o:o,r!==null){for(f=s.child=r.child,m=0;f!==null;)m=m|f.lanes|f.childLanes,f=f.sibling;s.childLanes=m&~u}else s.childLanes=0,s.child=null;return yv(r,s,u,o)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},r!==null&&Ic(s,m!==null?m.cachePool:null),m!==null?g0(s,m):Gh(),nv(s);else return s.lanes=s.childLanes=536870912,yv(r,s,m!==null?m.baseLanes|o:o,o)}else m!==null?(Ic(s,m.cachePool),g0(s,m),Ds(),s.memoizedState=null):(r!==null&&Ic(s,null),Gh(),Ds());return Re(r,s,f,o),s.child}function yv(r,s,o,u){var f=Jh();return f=f===null?null:{parent:Te._currentValue,pool:f},s.memoizedState={baseLanes:o,cachePool:f},r!==null&&Ic(s,null),Gh(),nv(s),r!==null&&kl(r,s,u,!0),null}function Xc(r,s){var o=s.ref;if(o===null)r!==null&&r.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(i(284));(r===null||r.ref!==o)&&(s.flags|=4194816)}}function gg(r,s,o,u,f){return wa(s),o=Fh(r,s,o,u,void 0,f),u=Zh(),r!==null&&!De?(Qh(r,s,f),Pr(r,s,f)):(jt&&u&&Mh(s),s.flags|=1,Re(r,s,o,f),s.child)}function pv(r,s,o,u,f,m){return wa(s),s.updateQueue=null,o=y0(s,u,o,f),m0(r),u=Zh(),r!==null&&!De?(Qh(r,s,m),Pr(r,s,m)):(jt&&u&&Mh(s),s.flags|=1,Re(r,s,o,m),s.child)}function vv(r,s,o,u,f){if(wa(s),s.stateNode===null){var m=so,b=o.contextType;typeof b=="object"&&b!==null&&(m=Pe(b)),m=new o(u,m),s.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=dg,s.stateNode=m,m._reactInternals=s,m=s.stateNode,m.props=u,m.state=s.memoizedState,m.refs={},$h(s),b=o.contextType,m.context=typeof b=="object"&&b!==null?Pe(b):so,m.state=s.memoizedState,b=o.getDerivedStateFromProps,typeof b=="function"&&(fg(s,o,b,u),m.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(b=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),b!==m.state&&dg.enqueueReplaceState(m,m.state,null),Ll(s,u,m,f),zl(),m.state=s.memoizedState),typeof m.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(r===null){m=s.stateNode;var A=s.memoizedProps,M=xa(o,A);m.props=M;var X=m.context,st=o.contextType;b=so,typeof st=="object"&&st!==null&&(b=Pe(st));var lt=o.getDerivedStateFromProps;st=typeof lt=="function"||typeof m.getSnapshotBeforeUpdate=="function",A=s.pendingProps!==A,st||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(A||X!==b)&&iv(s,m,u,b),xs=!1;var K=s.memoizedState;m.state=K,Ll(s,u,m,f),zl(),X=s.memoizedState,A||K!==X||xs?(typeof lt=="function"&&(fg(s,o,lt,u),X=s.memoizedState),(M=xs||rv(s,o,M,u,K,X,b))?(st||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(s.flags|=4194308)):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=X),m.props=u,m.state=X,m.context=b,u=M):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{m=s.stateNode,Vh(r,s),b=s.memoizedProps,st=xa(o,b),m.props=st,lt=s.pendingProps,K=m.context,X=o.contextType,M=so,typeof X=="object"&&X!==null&&(M=Pe(X)),A=o.getDerivedStateFromProps,(X=typeof A=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(b!==lt||K!==M)&&iv(s,m,u,M),xs=!1,K=s.memoizedState,m.state=K,Ll(s,u,m,f),zl();var Z=s.memoizedState;b!==lt||K!==Z||xs||r!==null&&r.dependencies!==null&&kc(r.dependencies)?(typeof A=="function"&&(fg(s,o,A,u),Z=s.memoizedState),(st=xs||rv(s,o,st,u,K,Z,M)||r!==null&&r.dependencies!==null&&kc(r.dependencies))?(X||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(u,Z,M),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(u,Z,M)),typeof m.componentDidUpdate=="function"&&(s.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof m.componentDidUpdate!="function"||b===r.memoizedProps&&K===r.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||b===r.memoizedProps&&K===r.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=Z),m.props=u,m.state=Z,m.context=M,u=st):(typeof m.componentDidUpdate!="function"||b===r.memoizedProps&&K===r.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||b===r.memoizedProps&&K===r.memoizedState||(s.flags|=1024),u=!1)}return m=u,Xc(r,s),u=(s.flags&128)!==0,m||u?(m=s.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:m.render(),s.flags|=1,r!==null&&u?(s.child=yo(s,r.child,null,f),s.child=yo(s,null,o,f)):Re(r,s,o,f),s.memoizedState=m.state,r=s.child):r=Pr(r,s,f),r}function wv(r,s,o,u){return Dl(),s.flags|=256,Re(r,s,o,u),s.child}var mg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function yg(r){return{baseLanes:r,cachePool:a0()}}function pg(r,s,o){return r=r!==null?r.childLanes&~o:0,s&&(r|=En),r}function Sv(r,s,o){var u=s.pendingProps,f=!1,m=(s.flags&128)!==0,b;if((b=m)||(b=r!==null&&r.memoizedState===null?!1:(Ae.current&2)!==0),b&&(f=!0,s.flags&=-129),b=(s.flags&32)!==0,s.flags&=-33,r===null){if(jt){if(f?Ns(s):Ds(),jt){var A=le,M;if(M=A){t:{for(M=A,A=ir;M.nodeType!==8;){if(!A){A=null;break t}if(M=jn(M.nextSibling),M===null){A=null;break t}}A=M}A!==null?(s.memoizedState={dehydrated:A,treeContext:ga!==null?{id:Br,overflow:zr}:null,retryLane:536870912,hydrationErrors:null},M=ln(18,null,null,0),M.stateNode=A,M.return=s,s.child=M,Ve=s,le=null,M=!0):M=!1}M||pa(s)}if(A=s.memoizedState,A!==null&&(A=A.dehydrated,A!==null))return tm(A)?s.lanes=32:s.lanes=536870912,null;qr(s)}return A=u.children,u=u.fallback,f?(Ds(),f=s.mode,A=Kc({mode:"hidden",children:A},f),u=ha(u,f,o,null),A.return=s,u.return=s,A.sibling=u,s.child=A,f=s.child,f.memoizedState=yg(o),f.childLanes=pg(r,b,o),s.memoizedState=mg,u):(Ns(s),vg(s,A))}if(M=r.memoizedState,M!==null&&(A=M.dehydrated,A!==null)){if(m)s.flags&256?(Ns(s),s.flags&=-257,s=wg(r,s,o)):s.memoizedState!==null?(Ds(),s.child=r.child,s.flags|=128,s=null):(Ds(),f=u.fallback,A=s.mode,u=Kc({mode:"visible",children:u.children},A),f=ha(f,A,o,null),f.flags|=2,u.return=s,f.return=s,u.sibling=f,s.child=u,yo(s,r.child,null,o),u=s.child,u.memoizedState=yg(o),u.childLanes=pg(r,b,o),s.memoizedState=mg,s=f);else if(Ns(s),tm(A)){if(b=A.nextSibling&&A.nextSibling.dataset,b)var X=b.dgst;b=X,u=Error(i(419)),u.stack="",u.digest=b,Cl({value:u,source:null,stack:null}),s=wg(r,s,o)}else if(De||kl(r,s,o,!1),b=(o&r.childLanes)!==0,De||b){if(b=ne,b!==null&&(u=o&-o,u=(u&42)!==0?1:ul(u),u=(u&(b.suspendedLanes|o))!==0?0:u,u!==0&&u!==M.retryLane))throw M.retryLane=u,io(r,u),hn(b,r,u),fv;A.data==="$?"||_g(),s=wg(r,s,o)}else A.data==="$?"?(s.flags|=192,s.child=r.child,s=null):(r=M.treeContext,le=jn(A.nextSibling),Ve=s,jt=!0,ya=null,ir=!1,r!==null&&(xn[Tn++]=Br,xn[Tn++]=zr,xn[Tn++]=ga,Br=r.id,zr=r.overflow,ga=s),s=vg(s,u.children),s.flags|=4096);return s}return f?(Ds(),f=u.fallback,A=s.mode,M=r.child,X=M.sibling,u=Mr(M,{mode:"hidden",children:u.children}),u.subtreeFlags=M.subtreeFlags&65011712,X!==null?f=Mr(X,f):(f=ha(f,A,o,null),f.flags|=2),f.return=s,u.return=s,u.sibling=f,s.child=u,u=f,f=s.child,A=r.child.memoizedState,A===null?A=yg(o):(M=A.cachePool,M!==null?(X=Te._currentValue,M=M.parent!==X?{parent:X,pool:X}:M):M=a0(),A={baseLanes:A.baseLanes|o,cachePool:M}),f.memoizedState=A,f.childLanes=pg(r,b,o),s.memoizedState=mg,u):(Ns(s),o=r.child,r=o.sibling,o=Mr(o,{mode:"visible",children:u.children}),o.return=s,o.sibling=null,r!==null&&(b=s.deletions,b===null?(s.deletions=[r],s.flags|=16):b.push(r)),s.child=o,s.memoizedState=null,o)}function vg(r,s){return s=Kc({mode:"visible",children:s},r.mode),s.return=r,r.child=s}function Kc(r,s){return r=ln(22,r,null,s),r.lanes=0,r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},r}function wg(r,s,o){return yo(s,r.child,null,o),r=vg(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function bv(r,s,o){r.lanes|=s;var u=r.alternate;u!==null&&(u.lanes|=s),_h(r.return,s,o)}function Sg(r,s,o,u,f){var m=r.memoizedState;m===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:f}:(m.isBackwards=s,m.rendering=null,m.renderingStartTime=0,m.last=u,m.tail=o,m.tailMode=f)}function xv(r,s,o){var u=s.pendingProps,f=u.revealOrder,m=u.tail;if(Re(r,s,u.children,o),u=Ae.current,(u&2)!==0)u=u&1|2,s.flags|=128;else{if(r!==null&&(r.flags&128)!==0)t:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&bv(r,o,s);else if(r.tag===19)bv(r,o,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break t;for(;r.sibling===null;){if(r.return===null||r.return===s)break t;r=r.return}r.sibling.return=r.return,r=r.sibling}u&=1}switch(rt(Ae,u),f){case"forwards":for(o=s.child,f=null;o!==null;)r=o.alternate,r!==null&&jc(r)===null&&(f=o),o=o.sibling;o=f,o===null?(f=s.child,s.child=null):(f=o.sibling,o.sibling=null),Sg(s,!1,f,o,m);break;case"backwards":for(o=null,f=s.child,s.child=null;f!==null;){if(r=f.alternate,r!==null&&jc(r)===null){s.child=f;break}r=f.sibling,f.sibling=o,o=f,f=r}Sg(s,!0,o,null,m);break;case"together":Sg(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Pr(r,s,o){if(r!==null&&(s.dependencies=r.dependencies),Rs|=s.lanes,(o&s.childLanes)===0)if(r!==null){if(kl(r,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(r!==null&&s.child!==r.child)throw Error(i(153));if(s.child!==null){for(r=s.child,o=Mr(r,r.pendingProps),s.child=o,o.return=s;r.sibling!==null;)r=r.sibling,o=o.sibling=Mr(r,r.pendingProps),o.return=s;o.sibling=null}return s.child}function bg(r,s){return(r.lanes&s)!==0?!0:(r=r.dependencies,!!(r!==null&&kc(r)))}function ZA(r,s,o){switch(s.tag){case 3:pt(s,s.stateNode.containerInfo),bs(s,Te,r.memoizedState.cache),Dl();break;case 27:case 5:Vt(s);break;case 4:pt(s,s.stateNode.containerInfo);break;case 10:bs(s,s.type,s.memoizedProps.value);break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(Ns(s),s.flags|=128,null):(o&s.child.childLanes)!==0?Sv(r,s,o):(Ns(s),r=Pr(r,s,o),r!==null?r.sibling:null);Ns(s);break;case 19:var f=(r.flags&128)!==0;if(u=(o&s.childLanes)!==0,u||(kl(r,s,o,!1),u=(o&s.childLanes)!==0),f){if(u)return xv(r,s,o);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),rt(Ae,Ae.current),u)break;return null;case 22:case 23:return s.lanes=0,mv(r,s,o);case 24:bs(s,Te,r.memoizedState.cache)}return Pr(r,s,o)}function Tv(r,s,o){if(r!==null)if(r.memoizedProps!==s.pendingProps)De=!0;else{if(!bg(r,o)&&(s.flags&128)===0)return De=!1,ZA(r,s,o);De=(r.flags&131072)!==0}else De=!1,jt&&(s.flags&1048576)!==0&&Wp(s,Cc,s.index);switch(s.lanes=0,s.tag){case 16:t:{r=s.pendingProps;var u=s.elementType,f=u._init;if(u=f(u._payload),s.type=u,typeof u=="function")Oh(u)?(r=xa(u,r),s.tag=1,s=vv(null,s,u,r,o)):(s.tag=0,s=gg(null,s,u,r,o));else{if(u!=null){if(f=u.$$typeof,f===O){s.tag=11,s=dv(null,s,u,r,o);break t}else if(f===U){s.tag=14,s=hv(null,s,u,r,o);break t}}throw s=R(u)||u,Error(i(306,s,""))}}return s;case 0:return gg(r,s,s.type,s.pendingProps,o);case 1:return u=s.type,f=xa(u,s.pendingProps),vv(r,s,u,f,o);case 3:t:{if(pt(s,s.stateNode.containerInfo),r===null)throw Error(i(387));u=s.pendingProps;var m=s.memoizedState;f=m.element,Vh(r,s),Ll(s,u,null,o);var b=s.memoizedState;if(u=b.cache,bs(s,Te,u),u!==m.cache&&Uh(s,[Te],o,!0),zl(),u=b.element,m.isDehydrated)if(m={element:u,isDehydrated:!1,cache:b.cache},s.updateQueue.baseState=m,s.memoizedState=m,s.flags&256){s=wv(r,s,u,o);break t}else if(u!==f){f=Sn(Error(i(424)),s),Cl(f),s=wv(r,s,u,o);break t}else{switch(r=s.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(le=jn(r.firstChild),Ve=s,jt=!0,ya=null,ir=!0,o=ev(s,null,u,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Dl(),u===f){s=Pr(r,s,o);break t}Re(r,s,u,o)}s=s.child}return s;case 26:return Xc(r,s),r===null?(o=Dw(s.type,null,s.pendingProps,null))?s.memoizedState=o:jt||(o=s.type,r=s.pendingProps,u=cf(dt.current).createElement(o),u[Ne]=s,u[qe]=r,Be(u,o,r),ve(u),s.stateNode=u):s.memoizedState=Dw(s.type,r.memoizedProps,s.pendingProps,r.memoizedState),null;case 27:return Vt(s),r===null&&jt&&(u=s.stateNode=Aw(s.type,s.pendingProps,dt.current),Ve=s,ir=!0,f=le,Ls(s.type)?(em=f,le=jn(u.firstChild)):le=f),Re(r,s,s.pendingProps.children,o),Xc(r,s),r===null&&(s.flags|=4194304),s.child;case 5:return r===null&&jt&&((f=u=le)&&(u=EE(u,s.type,s.pendingProps,ir),u!==null?(s.stateNode=u,Ve=s,le=jn(u.firstChild),ir=!1,f=!0):f=!1),f||pa(s)),Vt(s),f=s.type,m=s.pendingProps,b=r!==null?r.memoizedProps:null,u=m.children,Zg(f,m)?u=null:b!==null&&Zg(f,b)&&(s.flags|=32),s.memoizedState!==null&&(f=Fh(r,s,$A,null,null,o),iu._currentValue=f),Xc(r,s),Re(r,s,u,o),s.child;case 6:return r===null&&jt&&((r=o=le)&&(o=NE(o,s.pendingProps,ir),o!==null?(s.stateNode=o,Ve=s,le=null,r=!0):r=!1),r||pa(s)),null;case 13:return Sv(r,s,o);case 4:return pt(s,s.stateNode.containerInfo),u=s.pendingProps,r===null?s.child=yo(s,null,u,o):Re(r,s,u,o),s.child;case 11:return dv(r,s,s.type,s.pendingProps,o);case 7:return Re(r,s,s.pendingProps,o),s.child;case 8:return Re(r,s,s.pendingProps.children,o),s.child;case 12:return Re(r,s,s.pendingProps.children,o),s.child;case 10:return u=s.pendingProps,bs(s,s.type,u.value),Re(r,s,u.children,o),s.child;case 9:return f=s.type._context,u=s.pendingProps.children,wa(s),f=Pe(f),u=u(f),s.flags|=1,Re(r,s,u,o),s.child;case 14:return hv(r,s,s.type,s.pendingProps,o);case 15:return gv(r,s,s.type,s.pendingProps,o);case 19:return xv(r,s,o);case 31:return u=s.pendingProps,o=s.mode,u={mode:u.mode,children:u.children},r===null?(o=Kc(u,o),o.ref=s.ref,s.child=o,o.return=s,s=o):(o=Mr(r.child,u),o.ref=s.ref,s.child=o,o.return=s,s=o),s;case 22:return mv(r,s,o);case 24:return wa(s),u=Pe(Te),r===null?(f=Jh(),f===null&&(f=ne,m=qh(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=o),f=m),s.memoizedState={parent:u,cache:f},$h(s),bs(s,Te,f)):((r.lanes&o)!==0&&(Vh(r,s),Ll(s,null,null,o),zl()),f=r.memoizedState,m=s.memoizedState,f.parent!==u?(f={parent:u,cache:u},s.memoizedState=f,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=f),bs(s,Te,u)):(u=m.cache,bs(s,Te,u),u!==f.cache&&Uh(s,[Te],o,!0))),Re(r,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function Jr(r){r.flags|=4}function Av(r,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!Rw(s)){if(s=An.current,s!==null&&((Pt&4194048)===Pt?sr!==null:(Pt&62914560)!==Pt&&(Pt&536870912)===0||s!==sr))throw Ml=Hh,o0;r.flags|=8192}}function Fc(r,s){s!==null&&(r.flags|=4),r.flags&16384&&(s=r.tag!==22?ic():536870912,r.lanes|=s,So|=s)}function $l(r,s){if(!jt)switch(r.tailMode){case"hidden":s=r.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?r.tail=null:o.sibling=null;break;case"collapsed":o=r.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:u.sibling=null}}function ae(r){var s=r.alternate!==null&&r.alternate.child===r.child,o=0,u=0;if(s)for(var f=r.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags&65011712,u|=f.flags&65011712,f.return=r,f=f.sibling;else for(f=r.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=r,f=f.sibling;return r.subtreeFlags|=u,r.childLanes=o,s}function QA(r,s,o){var u=s.pendingProps;switch(Bh(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ae(s),null;case 1:return ae(s),null;case 3:return o=s.stateNode,u=null,r!==null&&(u=r.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),_r(Te),Ct(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(r===null||r.child===null)&&(Nl(s)?Jr(s):r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,n0())),ae(s),null;case 26:return o=s.memoizedState,r===null?(Jr(s),o!==null?(ae(s),Av(s,o)):(ae(s),s.flags&=-16777217)):o?o!==r.memoizedState?(Jr(s),ae(s),Av(s,o)):(ae(s),s.flags&=-16777217):(r.memoizedProps!==u&&Jr(s),ae(s),s.flags&=-16777217),null;case 27:Ot(s),o=dt.current;var f=s.type;if(r!==null&&s.stateNode!=null)r.memoizedProps!==u&&Jr(s);else{if(!u){if(s.stateNode===null)throw Error(i(166));return ae(s),null}r=ut.current,Nl(s)?t0(s):(r=Aw(f,u,o),s.stateNode=r,Jr(s))}return ae(s),null;case 5:if(Ot(s),o=s.type,r!==null&&s.stateNode!=null)r.memoizedProps!==u&&Jr(s);else{if(!u){if(s.stateNode===null)throw Error(i(166));return ae(s),null}if(r=ut.current,Nl(s))t0(s);else{switch(f=cf(dt.current),r){case 1:r=f.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:r=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":r=f.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":r=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":r=f.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof u.is=="string"?f.createElement("select",{is:u.is}):f.createElement("select"),u.multiple?r.multiple=!0:u.size&&(r.size=u.size);break;default:r=typeof u.is=="string"?f.createElement(o,{is:u.is}):f.createElement(o)}}r[Ne]=s,r[qe]=u;t:for(f=s.child;f!==null;){if(f.tag===5||f.tag===6)r.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===s)break t;for(;f.sibling===null;){if(f.return===null||f.return===s)break t;f=f.return}f.sibling.return=f.return,f=f.sibling}s.stateNode=r;t:switch(Be(r,o,u),o){case"button":case"input":case"select":case"textarea":r=!!u.autoFocus;break t;case"img":r=!0;break t;default:r=!1}r&&Jr(s)}}return ae(s),s.flags&=-16777217,null;case 6:if(r&&s.stateNode!=null)r.memoizedProps!==u&&Jr(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(i(166));if(r=dt.current,Nl(s)){if(r=s.stateNode,o=s.memoizedProps,u=null,f=Ve,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}r[Ne]=s,r=!!(r.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||pw(r.nodeValue,o)),r||pa(s)}else r=cf(r).createTextNode(u),r[Ne]=s,s.stateNode=r}return ae(s),null;case 13:if(u=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(f=Nl(s),u!==null&&u.dehydrated!==null){if(r===null){if(!f)throw Error(i(318));if(f=s.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(317));f[Ne]=s}else Dl(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;ae(s),f=!1}else f=n0(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=f),f=!0;if(!f)return s.flags&256?(qr(s),s):(qr(s),null)}if(qr(s),(s.flags&128)!==0)return s.lanes=o,s;if(o=u!==null,r=r!==null&&r.memoizedState!==null,o){u=s.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool);var m=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),m!==f&&(u.flags|=2048)}return o!==r&&o&&(s.child.flags|=8192),Fc(s,s.updateQueue),ae(s),null;case 4:return Ct(),r===null&&Yg(s.stateNode.containerInfo),ae(s),null;case 10:return _r(s.type),ae(s),null;case 19:if(tt(Ae),f=s.memoizedState,f===null)return ae(s),null;if(u=(s.flags&128)!==0,m=f.rendering,m===null)if(u)$l(f,!1);else{if(ue!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(m=jc(r),m!==null){for(s.flags|=128,$l(f,!1),r=m.updateQueue,s.updateQueue=r,Fc(s,r),s.subtreeFlags=0,r=o,o=s.child;o!==null;)Qp(o,r),o=o.sibling;return rt(Ae,Ae.current&1|2),s.child}r=r.sibling}f.tail!==null&&Oe()>Wc&&(s.flags|=128,u=!0,$l(f,!1),s.lanes=4194304)}else{if(!u)if(r=jc(m),r!==null){if(s.flags|=128,u=!0,r=r.updateQueue,s.updateQueue=r,Fc(s,r),$l(f,!0),f.tail===null&&f.tailMode==="hidden"&&!m.alternate&&!jt)return ae(s),null}else 2*Oe()-f.renderingStartTime>Wc&&o!==536870912&&(s.flags|=128,u=!0,$l(f,!1),s.lanes=4194304);f.isBackwards?(m.sibling=s.child,s.child=m):(r=f.last,r!==null?r.sibling=m:s.child=m,f.last=m)}return f.tail!==null?(s=f.tail,f.rendering=s,f.tail=s.sibling,f.renderingStartTime=Oe(),s.sibling=null,r=Ae.current,rt(Ae,u?r&1|2:r&1),s):(ae(s),null);case 22:case 23:return qr(s),Xh(),u=s.memoizedState!==null,r!==null?r.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(o&536870912)!==0&&(s.flags&128)===0&&(ae(s),s.subtreeFlags&6&&(s.flags|=8192)):ae(s),o=s.updateQueue,o!==null&&Fc(s,o.retryQueue),o=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==o&&(s.flags|=2048),r!==null&&tt(Sa),null;case 24:return o=null,r!==null&&(o=r.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),_r(Te),ae(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function WA(r,s){switch(Bh(s),s.tag){case 1:return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return _r(Te),Ct(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 26:case 27:case 5:return Ot(s),null;case 13:if(qr(s),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(i(340));Dl()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return tt(Ae),null;case 4:return Ct(),null;case 10:return _r(s.type),null;case 22:case 23:return qr(s),Xh(),r!==null&&tt(Sa),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 24:return _r(Te),null;case 25:return null;default:return null}}function Ev(r,s){switch(Bh(s),s.tag){case 3:_r(Te),Ct();break;case 26:case 27:case 5:Ot(s);break;case 4:Ct();break;case 13:qr(s);break;case 19:tt(Ae);break;case 10:_r(s.type);break;case 22:case 23:qr(s),Xh(),r!==null&&tt(Sa);break;case 24:_r(Te)}}function Vl(r,s){try{var o=s.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var f=u.next;o=f;do{if((o.tag&r)===r){u=void 0;var m=o.create,b=o.inst;u=m(),b.destroy=u}o=o.next}while(o!==f)}}catch(A){Wt(s,s.return,A)}}function Cs(r,s,o){try{var u=s.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var m=f.next;u=m;do{if((u.tag&r)===r){var b=u.inst,A=b.destroy;if(A!==void 0){b.destroy=void 0,f=s;var M=o,X=A;try{X()}catch(st){Wt(f,M,st)}}}u=u.next}while(u!==m)}}catch(st){Wt(s,s.return,st)}}function Nv(r){var s=r.updateQueue;if(s!==null){var o=r.stateNode;try{h0(s,o)}catch(u){Wt(r,r.return,u)}}}function Dv(r,s,o){o.props=xa(r.type,r.memoizedProps),o.state=r.memoizedState;try{o.componentWillUnmount()}catch(u){Wt(r,s,u)}}function jl(r,s){try{var o=r.ref;if(o!==null){switch(r.tag){case 26:case 27:case 5:var u=r.stateNode;break;case 30:u=r.stateNode;break;default:u=r.stateNode}typeof o=="function"?r.refCleanup=o(u):o.current=u}}catch(f){Wt(r,s,f)}}function ar(r,s){var o=r.ref,u=r.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(f){Wt(r,s,f)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){Wt(r,s,f)}else o.current=null}function Cv(r){var s=r.type,o=r.memoizedProps,u=r.stateNode;try{t:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break t;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(f){Wt(r,r.return,f)}}function xg(r,s,o){try{var u=r.stateNode;SE(u,r.type,o,s),u[qe]=s}catch(f){Wt(r,r.return,f)}}function kv(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&Ls(r.type)||r.tag===4}function Tg(r){t:for(;;){for(;r.sibling===null;){if(r.return===null||kv(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&Ls(r.type)||r.flags&2||r.child===null||r.tag===4)continue t;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Ag(r,s,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(r,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(r),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=uf));else if(u!==4&&(u===27&&Ls(r.type)&&(o=r.stateNode,s=null),r=r.child,r!==null))for(Ag(r,s,o),r=r.sibling;r!==null;)Ag(r,s,o),r=r.sibling}function Zc(r,s,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,s?o.insertBefore(r,s):o.appendChild(r);else if(u!==4&&(u===27&&Ls(r.type)&&(o=r.stateNode),r=r.child,r!==null))for(Zc(r,s,o),r=r.sibling;r!==null;)Zc(r,s,o),r=r.sibling}function Ov(r){var s=r.stateNode,o=r.memoizedProps;try{for(var u=r.type,f=s.attributes;f.length;)s.removeAttributeNode(f[0]);Be(s,u,o),s[Ne]=r,s[qe]=o}catch(m){Wt(r,r.return,m)}}var Hr=!1,me=!1,Eg=!1,Iv=typeof WeakSet=="function"?WeakSet:Set,Ce=null;function tE(r,s){if(r=r.containerInfo,Kg=yf,r=Hp(r),Th(r)){if("selectionStart"in r)var o={start:r.selectionStart,end:r.selectionEnd};else t:{o=(o=r.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var f=u.anchorOffset,m=u.focusNode;u=u.focusOffset;try{o.nodeType,m.nodeType}catch{o=null;break t}var b=0,A=-1,M=-1,X=0,st=0,lt=r,K=null;e:for(;;){for(var Z;lt!==o||f!==0&&lt.nodeType!==3||(A=b+f),lt!==m||u!==0&&lt.nodeType!==3||(M=b+u),lt.nodeType===3&&(b+=lt.nodeValue.length),(Z=lt.firstChild)!==null;)K=lt,lt=Z;for(;;){if(lt===r)break e;if(K===o&&++X===f&&(A=b),K===m&&++st===u&&(M=b),(Z=lt.nextSibling)!==null)break;lt=K,K=lt.parentNode}lt=Z}o=A===-1||M===-1?null:{start:A,end:M}}else o=null}o=o||{start:0,end:0}}else o=null;for(Fg={focusedElem:r,selectionRange:o},yf=!1,Ce=s;Ce!==null;)if(s=Ce,r=s.child,(s.subtreeFlags&1024)!==0&&r!==null)r.return=s,Ce=r;else for(;Ce!==null;){switch(s=Ce,m=s.alternate,r=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((r&1024)!==0&&m!==null){r=void 0,o=s,f=m.memoizedProps,m=m.memoizedState,u=o.stateNode;try{var kt=xa(o.type,f,o.elementType===o.type);r=u.getSnapshotBeforeUpdate(kt,m),u.__reactInternalSnapshotBeforeUpdate=r}catch(Nt){Wt(o,o.return,Nt)}}break;case 3:if((r&1024)!==0){if(r=s.stateNode.containerInfo,o=r.nodeType,o===9)Wg(r);else if(o===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":Wg(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=s.sibling,r!==null){r.return=s.return,Ce=r;break}Ce=s.return}}function Rv(r,s,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:ks(r,o),u&4&&Vl(5,o);break;case 1:if(ks(r,o),u&4)if(r=o.stateNode,s===null)try{r.componentDidMount()}catch(b){Wt(o,o.return,b)}else{var f=xa(o.type,s.memoizedProps);s=s.memoizedState;try{r.componentDidUpdate(f,s,r.__reactInternalSnapshotBeforeUpdate)}catch(b){Wt(o,o.return,b)}}u&64&&Nv(o),u&512&&jl(o,o.return);break;case 3:if(ks(r,o),u&64&&(r=o.updateQueue,r!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{h0(r,s)}catch(b){Wt(o,o.return,b)}}break;case 27:s===null&&u&4&&Ov(o);case 26:case 5:ks(r,o),s===null&&u&4&&Cv(o),u&512&&jl(o,o.return);break;case 12:ks(r,o);break;case 13:ks(r,o),u&4&&zv(r,o),u&64&&(r=o.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(o=uE.bind(null,o),DE(r,o))));break;case 22:if(u=o.memoizedState!==null||Hr,!u){s=s!==null&&s.memoizedState!==null||me,f=Hr;var m=me;Hr=u,(me=s)&&!m?Os(r,o,(o.subtreeFlags&8772)!==0):ks(r,o),Hr=f,me=m}break;case 30:break;default:ks(r,o)}}function Mv(r){var s=r.alternate;s!==null&&(r.alternate=null,Mv(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&dl(s)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var ie=null,Fe=!1;function $r(r,s,o){for(o=o.child;o!==null;)Bv(r,s,o),o=o.sibling}function Bv(r,s,o){if(Ee&&typeof Ee.onCommitFiberUnmount=="function")try{Ee.onCommitFiberUnmount(Jn,o)}catch{}switch(o.tag){case 26:me||ar(o,s),$r(r,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:me||ar(o,s);var u=ie,f=Fe;Ls(o.type)&&(ie=o.stateNode,Fe=!1),$r(r,s,o),tu(o.stateNode),ie=u,Fe=f;break;case 5:me||ar(o,s);case 6:if(u=ie,f=Fe,ie=null,$r(r,s,o),ie=u,Fe=f,ie!==null)if(Fe)try{(ie.nodeType===9?ie.body:ie.nodeName==="HTML"?ie.ownerDocument.body:ie).removeChild(o.stateNode)}catch(m){Wt(o,s,m)}else try{ie.removeChild(o.stateNode)}catch(m){Wt(o,s,m)}break;case 18:ie!==null&&(Fe?(r=ie,xw(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,o.stateNode),lu(r)):xw(ie,o.stateNode));break;case 4:u=ie,f=Fe,ie=o.stateNode.containerInfo,Fe=!0,$r(r,s,o),ie=u,Fe=f;break;case 0:case 11:case 14:case 15:me||Cs(2,o,s),me||Cs(4,o,s),$r(r,s,o);break;case 1:me||(ar(o,s),u=o.stateNode,typeof u.componentWillUnmount=="function"&&Dv(o,s,u)),$r(r,s,o);break;case 21:$r(r,s,o);break;case 22:me=(u=me)||o.memoizedState!==null,$r(r,s,o),me=u;break;default:$r(r,s,o)}}function zv(r,s){if(s.memoizedState===null&&(r=s.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{lu(r)}catch(o){Wt(s,s.return,o)}}function eE(r){switch(r.tag){case 13:case 19:var s=r.stateNode;return s===null&&(s=r.stateNode=new Iv),s;case 22:return r=r.stateNode,s=r._retryCache,s===null&&(s=r._retryCache=new Iv),s;default:throw Error(i(435,r.tag))}}function Ng(r,s){var o=eE(r);s.forEach(function(u){var f=cE.bind(null,r,u);o.has(u)||(o.add(u),u.then(f,f))})}function un(r,s){var o=s.deletions;if(o!==null)for(var u=0;u<o.length;u++){var f=o[u],m=r,b=s,A=b;t:for(;A!==null;){switch(A.tag){case 27:if(Ls(A.type)){ie=A.stateNode,Fe=!1;break t}break;case 5:ie=A.stateNode,Fe=!1;break t;case 3:case 4:ie=A.stateNode.containerInfo,Fe=!0;break t}A=A.return}if(ie===null)throw Error(i(160));Bv(m,b,f),ie=null,Fe=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)Lv(s,r),s=s.sibling}var Vn=null;function Lv(r,s){var o=r.alternate,u=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:un(s,r),cn(r),u&4&&(Cs(3,r,r.return),Vl(3,r),Cs(5,r,r.return));break;case 1:un(s,r),cn(r),u&512&&(me||o===null||ar(o,o.return)),u&64&&Hr&&(r=r.updateQueue,r!==null&&(u=r.callbacks,u!==null&&(o=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var f=Vn;if(un(s,r),cn(r),u&512&&(me||o===null||ar(o,o.return)),u&4){var m=o!==null?o.memoizedState:null;if(u=r.memoizedState,o===null)if(u===null)if(r.stateNode===null){t:{u=r.type,o=r.memoizedProps,f=f.ownerDocument||f;e:switch(u){case"title":m=f.getElementsByTagName("title")[0],(!m||m[la]||m[Ne]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(u),f.head.insertBefore(m,f.querySelector("head > title"))),Be(m,u,o),m[Ne]=r,ve(m),u=m;break t;case"link":var b=Ow("link","href",f).get(u+(o.href||""));if(b){for(var A=0;A<b.length;A++)if(m=b[A],m.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&m.getAttribute("rel")===(o.rel==null?null:o.rel)&&m.getAttribute("title")===(o.title==null?null:o.title)&&m.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){b.splice(A,1);break e}}m=f.createElement(u),Be(m,u,o),f.head.appendChild(m);break;case"meta":if(b=Ow("meta","content",f).get(u+(o.content||""))){for(A=0;A<b.length;A++)if(m=b[A],m.getAttribute("content")===(o.content==null?null:""+o.content)&&m.getAttribute("name")===(o.name==null?null:o.name)&&m.getAttribute("property")===(o.property==null?null:o.property)&&m.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&m.getAttribute("charset")===(o.charSet==null?null:o.charSet)){b.splice(A,1);break e}}m=f.createElement(u),Be(m,u,o),f.head.appendChild(m);break;default:throw Error(i(468,u))}m[Ne]=r,ve(m),u=m}r.stateNode=u}else Iw(f,r.type,r.stateNode);else r.stateNode=kw(f,u,r.memoizedProps);else m!==u?(m===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):m.count--,u===null?Iw(f,r.type,r.stateNode):kw(f,u,r.memoizedProps)):u===null&&r.stateNode!==null&&xg(r,r.memoizedProps,o.memoizedProps)}break;case 27:un(s,r),cn(r),u&512&&(me||o===null||ar(o,o.return)),o!==null&&u&4&&xg(r,r.memoizedProps,o.memoizedProps);break;case 5:if(un(s,r),cn(r),u&512&&(me||o===null||ar(o,o.return)),r.flags&32){f=r.stateNode;try{Za(f,"")}catch(Z){Wt(r,r.return,Z)}}u&4&&r.stateNode!=null&&(f=r.memoizedProps,xg(r,f,o!==null?o.memoizedProps:f)),u&1024&&(Eg=!0);break;case 6:if(un(s,r),cn(r),u&4){if(r.stateNode===null)throw Error(i(162));u=r.memoizedProps,o=r.stateNode;try{o.nodeValue=u}catch(Z){Wt(r,r.return,Z)}}break;case 3:if(hf=null,f=Vn,Vn=ff(s.containerInfo),un(s,r),Vn=f,cn(r),u&4&&o!==null&&o.memoizedState.isDehydrated)try{lu(s.containerInfo)}catch(Z){Wt(r,r.return,Z)}Eg&&(Eg=!1,_v(r));break;case 4:u=Vn,Vn=ff(r.stateNode.containerInfo),un(s,r),cn(r),Vn=u;break;case 12:un(s,r),cn(r);break;case 13:un(s,r),cn(r),r.child.flags&8192&&r.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Rg=Oe()),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,Ng(r,u)));break;case 22:f=r.memoizedState!==null;var M=o!==null&&o.memoizedState!==null,X=Hr,st=me;if(Hr=X||f,me=st||M,un(s,r),me=st,Hr=X,cn(r),u&8192)t:for(s=r.stateNode,s._visibility=f?s._visibility&-2:s._visibility|1,f&&(o===null||M||Hr||me||Ta(r)),o=null,s=r;;){if(s.tag===5||s.tag===26){if(o===null){M=o=s;try{if(m=M.stateNode,f)b=m.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{A=M.stateNode;var lt=M.memoizedProps.style,K=lt!=null&&lt.hasOwnProperty("display")?lt.display:null;A.style.display=K==null||typeof K=="boolean"?"":(""+K).trim()}}catch(Z){Wt(M,M.return,Z)}}}else if(s.tag===6){if(o===null){M=s;try{M.stateNode.nodeValue=f?"":M.memoizedProps}catch(Z){Wt(M,M.return,Z)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===r)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break t;for(;s.sibling===null;){if(s.return===null||s.return===r)break t;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=r.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Ng(r,o))));break;case 19:un(s,r),cn(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,Ng(r,u)));break;case 30:break;case 21:break;default:un(s,r),cn(r)}}function cn(r){var s=r.flags;if(s&2){try{for(var o,u=r.return;u!==null;){if(kv(u)){o=u;break}u=u.return}if(o==null)throw Error(i(160));switch(o.tag){case 27:var f=o.stateNode,m=Tg(r);Zc(r,m,f);break;case 5:var b=o.stateNode;o.flags&32&&(Za(b,""),o.flags&=-33);var A=Tg(r);Zc(r,A,b);break;case 3:case 4:var M=o.stateNode.containerInfo,X=Tg(r);Ag(r,X,M);break;default:throw Error(i(161))}}catch(st){Wt(r,r.return,st)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function _v(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var s=r;_v(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),r=r.sibling}}function ks(r,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)Rv(r,s.alternate,s),s=s.sibling}function Ta(r){for(r=r.child;r!==null;){var s=r;switch(s.tag){case 0:case 11:case 14:case 15:Cs(4,s,s.return),Ta(s);break;case 1:ar(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&Dv(s,s.return,o),Ta(s);break;case 27:tu(s.stateNode);case 26:case 5:ar(s,s.return),Ta(s);break;case 22:s.memoizedState===null&&Ta(s);break;case 30:Ta(s);break;default:Ta(s)}r=r.sibling}}function Os(r,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,f=r,m=s,b=m.flags;switch(m.tag){case 0:case 11:case 15:Os(f,m,o),Vl(4,m);break;case 1:if(Os(f,m,o),u=m,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(X){Wt(u,u.return,X)}if(u=m,f=u.updateQueue,f!==null){var A=u.stateNode;try{var M=f.shared.hiddenCallbacks;if(M!==null)for(f.shared.hiddenCallbacks=null,f=0;f<M.length;f++)d0(M[f],A)}catch(X){Wt(u,u.return,X)}}o&&b&64&&Nv(m),jl(m,m.return);break;case 27:Ov(m);case 26:case 5:Os(f,m,o),o&&u===null&&b&4&&Cv(m),jl(m,m.return);break;case 12:Os(f,m,o);break;case 13:Os(f,m,o),o&&b&4&&zv(f,m);break;case 22:m.memoizedState===null&&Os(f,m,o),jl(m,m.return);break;case 30:break;default:Os(f,m,o)}s=s.sibling}}function Dg(r,s){var o=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),r=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(r=s.memoizedState.cachePool.pool),r!==o&&(r!=null&&r.refCount++,o!=null&&Ol(o))}function Cg(r,s){r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&Ol(r))}function or(r,s,o,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Uv(r,s,o,u),s=s.sibling}function Uv(r,s,o,u){var f=s.flags;switch(s.tag){case 0:case 11:case 15:or(r,s,o,u),f&2048&&Vl(9,s);break;case 1:or(r,s,o,u);break;case 3:or(r,s,o,u),f&2048&&(r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&Ol(r)));break;case 12:if(f&2048){or(r,s,o,u),r=s.stateNode;try{var m=s.memoizedProps,b=m.id,A=m.onPostCommit;typeof A=="function"&&A(b,s.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(M){Wt(s,s.return,M)}}else or(r,s,o,u);break;case 13:or(r,s,o,u);break;case 23:break;case 22:m=s.stateNode,b=s.alternate,s.memoizedState!==null?m._visibility&2?or(r,s,o,u):Yl(r,s):m._visibility&2?or(r,s,o,u):(m._visibility|=2,po(r,s,o,u,(s.subtreeFlags&10256)!==0)),f&2048&&Dg(b,s);break;case 24:or(r,s,o,u),f&2048&&Cg(s.alternate,s);break;default:or(r,s,o,u)}}function po(r,s,o,u,f){for(f=f&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var m=r,b=s,A=o,M=u,X=b.flags;switch(b.tag){case 0:case 11:case 15:po(m,b,A,M,f),Vl(8,b);break;case 23:break;case 22:var st=b.stateNode;b.memoizedState!==null?st._visibility&2?po(m,b,A,M,f):Yl(m,b):(st._visibility|=2,po(m,b,A,M,f)),f&&X&2048&&Dg(b.alternate,b);break;case 24:po(m,b,A,M,f),f&&X&2048&&Cg(b.alternate,b);break;default:po(m,b,A,M,f)}s=s.sibling}}function Yl(r,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=r,u=s,f=u.flags;switch(u.tag){case 22:Yl(o,u),f&2048&&Dg(u.alternate,u);break;case 24:Yl(o,u),f&2048&&Cg(u.alternate,u);break;default:Yl(o,u)}s=s.sibling}}var Gl=8192;function vo(r){if(r.subtreeFlags&Gl)for(r=r.child;r!==null;)qv(r),r=r.sibling}function qv(r){switch(r.tag){case 26:vo(r),r.flags&Gl&&r.memoizedState!==null&&PE(Vn,r.memoizedState,r.memoizedProps);break;case 5:vo(r);break;case 3:case 4:var s=Vn;Vn=ff(r.stateNode.containerInfo),vo(r),Vn=s;break;case 22:r.memoizedState===null&&(s=r.alternate,s!==null&&s.memoizedState!==null?(s=Gl,Gl=16777216,vo(r),Gl=s):vo(r));break;default:vo(r)}}function Pv(r){var s=r.alternate;if(s!==null&&(r=s.child,r!==null)){s.child=null;do s=r.sibling,r.sibling=null,r=s;while(r!==null)}}function Xl(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];Ce=u,Hv(u,r)}Pv(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Jv(r),r=r.sibling}function Jv(r){switch(r.tag){case 0:case 11:case 15:Xl(r),r.flags&2048&&Cs(9,r,r.return);break;case 3:Xl(r);break;case 12:Xl(r);break;case 22:var s=r.stateNode;r.memoizedState!==null&&s._visibility&2&&(r.return===null||r.return.tag!==13)?(s._visibility&=-3,Qc(r)):Xl(r);break;default:Xl(r)}}function Qc(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];Ce=u,Hv(u,r)}Pv(r)}for(r=r.child;r!==null;){switch(s=r,s.tag){case 0:case 11:case 15:Cs(8,s,s.return),Qc(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,Qc(s));break;default:Qc(s)}r=r.sibling}}function Hv(r,s){for(;Ce!==null;){var o=Ce;switch(o.tag){case 0:case 11:case 15:Cs(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Ol(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,Ce=u;else t:for(o=r;Ce!==null;){u=Ce;var f=u.sibling,m=u.return;if(Mv(u),u===o){Ce=null;break t}if(f!==null){f.return=m,Ce=f;break t}Ce=m}}}var nE={getCacheForType:function(r){var s=Pe(Te),o=s.data.get(r);return o===void 0&&(o=r(),s.data.set(r,o)),o}},rE=typeof WeakMap=="function"?WeakMap:Map,Xt=0,ne=null,zt=null,Pt=0,Kt=0,fn=null,Is=!1,wo=!1,kg=!1,Vr=0,ue=0,Rs=0,Aa=0,Og=0,En=0,So=0,Kl=null,Ze=null,Ig=!1,Rg=0,Wc=1/0,tf=null,Ms=null,Me=0,Bs=null,bo=null,xo=0,Mg=0,Bg=null,$v=null,Fl=0,zg=null;function dn(){if((Xt&2)!==0&&Pt!==0)return Pt&-Pt;if(C.T!==null){var r=lo;return r!==0?r:Hg()}return ac()}function Vv(){En===0&&(En=(Pt&536870912)===0||jt?rc():536870912);var r=An.current;return r!==null&&(r.flags|=32),En}function hn(r,s,o){(r===ne&&(Kt===2||Kt===9)||r.cancelPendingCommit!==null)&&(To(r,0),zs(r,Pt,En,!1)),oa(r,o),((Xt&2)===0||r!==ne)&&(r===ne&&((Xt&2)===0&&(Aa|=o),ue===4&&zs(r,Pt,En,!1)),lr(r))}function jv(r,s,o){if((Xt&6)!==0)throw Error(i(327));var u=!o&&(s&124)===0&&(s&r.expiredLanes)===0||aa(r,s),f=u?aE(r,s):Ug(r,s,!0),m=u;do{if(f===0){wo&&!u&&zs(r,s,0,!1);break}else{if(o=r.current.alternate,m&&!iE(o)){f=Ug(r,s,!1),m=!1;continue}if(f===2){if(m=s,r.errorRecoveryDisabledLanes&m)var b=0;else b=r.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){s=b;t:{var A=r;f=Kl;var M=A.current.memoizedState.isDehydrated;if(M&&(To(A,b).flags|=256),b=Ug(A,b,!1),b!==2){if(kg&&!M){A.errorRecoveryDisabledLanes|=m,Aa|=m,f=4;break t}m=Ze,Ze=f,m!==null&&(Ze===null?Ze=m:Ze.push.apply(Ze,m))}f=b}if(m=!1,f!==2)continue}}if(f===1){To(r,0),zs(r,s,0,!0);break}t:{switch(u=r,m=f,m){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:zs(u,s,En,!Is);break t;case 2:Ze=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(f=Rg+300-Oe(),10<f)){if(zs(u,s,En,!Is),Va(u,0,!0)!==0)break t;u.timeoutHandle=Sw(Yv.bind(null,u,o,Ze,tf,Ig,s,En,Aa,So,Is,m,2,-0,0),f);break t}Yv(u,o,Ze,tf,Ig,s,En,Aa,So,Is,m,0,-0,0)}}break}while(!0);lr(r)}function Yv(r,s,o,u,f,m,b,A,M,X,st,lt,K,Z){if(r.timeoutHandle=-1,lt=s.subtreeFlags,(lt&8192||(lt&16785408)===16785408)&&(ru={stylesheets:null,count:0,unsuspend:qE},qv(s),lt=JE(),lt!==null)){r.cancelPendingCommit=lt(Wv.bind(null,r,s,m,o,u,f,b,A,M,st,1,K,Z)),zs(r,m,b,!X);return}Wv(r,s,m,o,u,f,b,A,M)}function iE(r){for(var s=r;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var f=o[u],m=f.getSnapshot;f=f.value;try{if(!on(m(),f))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function zs(r,s,o,u){s&=~Og,s&=~Aa,r.suspendedLanes|=s,r.pingedLanes&=~s,u&&(r.warmLanes|=s),u=r.expirationTimes;for(var f=s;0<f;){var m=31-Ie(f),b=1<<m;u[m]=-1,f&=~b}o!==0&&ll(r,o,s)}function ef(){return(Xt&6)===0?(Zl(0),!1):!0}function Lg(){if(zt!==null){if(Kt===0)var r=zt.return;else r=zt,Lr=va=null,Wh(r),mo=null,Jl=0,r=zt;for(;r!==null;)Ev(r.alternate,r),r=r.return;zt=null}}function To(r,s){var o=r.timeoutHandle;o!==-1&&(r.timeoutHandle=-1,xE(o)),o=r.cancelPendingCommit,o!==null&&(r.cancelPendingCommit=null,o()),Lg(),ne=r,zt=o=Mr(r.current,null),Pt=s,Kt=0,fn=null,Is=!1,wo=aa(r,s),kg=!1,So=En=Og=Aa=Rs=ue=0,Ze=Kl=null,Ig=!1,(s&8)!==0&&(s|=s&32);var u=r.entangledLanes;if(u!==0)for(r=r.entanglements,u&=s;0<u;){var f=31-Ie(u),m=1<<f;s|=r[f],u&=~m}return Vr=s,Tc(),o}function Gv(r,s){Mt=null,C.H=Hc,s===Rl||s===Rc?(s=c0(),Kt=3):s===o0?(s=c0(),Kt=4):Kt=s===fv?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,fn=s,zt===null&&(ue=1,Gc(r,Sn(s,r.current)))}function Xv(){var r=C.H;return C.H=Hc,r===null?Hc:r}function Kv(){var r=C.A;return C.A=nE,r}function _g(){ue=4,Is||(Pt&4194048)!==Pt&&An.current!==null||(wo=!0),(Rs&134217727)===0&&(Aa&134217727)===0||ne===null||zs(ne,Pt,En,!1)}function Ug(r,s,o){var u=Xt;Xt|=2;var f=Xv(),m=Kv();(ne!==r||Pt!==s)&&(tf=null,To(r,s)),s=!1;var b=ue;t:do try{if(Kt!==0&&zt!==null){var A=zt,M=fn;switch(Kt){case 8:Lg(),b=6;break t;case 3:case 2:case 9:case 6:An.current===null&&(s=!0);var X=Kt;if(Kt=0,fn=null,Ao(r,A,M,X),o&&wo){b=0;break t}break;default:X=Kt,Kt=0,fn=null,Ao(r,A,M,X)}}sE(),b=ue;break}catch(st){Gv(r,st)}while(!0);return s&&r.shellSuspendCounter++,Lr=va=null,Xt=u,C.H=f,C.A=m,zt===null&&(ne=null,Pt=0,Tc()),b}function sE(){for(;zt!==null;)Fv(zt)}function aE(r,s){var o=Xt;Xt|=2;var u=Xv(),f=Kv();ne!==r||Pt!==s?(tf=null,Wc=Oe()+500,To(r,s)):wo=aa(r,s);t:do try{if(Kt!==0&&zt!==null){s=zt;var m=fn;e:switch(Kt){case 1:Kt=0,fn=null,Ao(r,s,m,1);break;case 2:case 9:if(l0(m)){Kt=0,fn=null,Zv(s);break}s=function(){Kt!==2&&Kt!==9||ne!==r||(Kt=7),lr(r)},m.then(s,s);break t;case 3:Kt=7;break t;case 4:Kt=5;break t;case 7:l0(m)?(Kt=0,fn=null,Zv(s)):(Kt=0,fn=null,Ao(r,s,m,7));break;case 5:var b=null;switch(zt.tag){case 26:b=zt.memoizedState;case 5:case 27:var A=zt;if(!b||Rw(b)){Kt=0,fn=null;var M=A.sibling;if(M!==null)zt=M;else{var X=A.return;X!==null?(zt=X,nf(X)):zt=null}break e}}Kt=0,fn=null,Ao(r,s,m,5);break;case 6:Kt=0,fn=null,Ao(r,s,m,6);break;case 8:Lg(),ue=6;break t;default:throw Error(i(462))}}oE();break}catch(st){Gv(r,st)}while(!0);return Lr=va=null,C.H=u,C.A=f,Xt=o,zt!==null?0:(ne=null,Pt=0,Tc(),ue)}function oE(){for(;zt!==null&&!xe();)Fv(zt)}function Fv(r){var s=Tv(r.alternate,r,Vr);r.memoizedProps=r.pendingProps,s===null?nf(r):zt=s}function Zv(r){var s=r,o=s.alternate;switch(s.tag){case 15:case 0:s=pv(o,s,s.pendingProps,s.type,void 0,Pt);break;case 11:s=pv(o,s,s.pendingProps,s.type.render,s.ref,Pt);break;case 5:Wh(s);default:Ev(o,s),s=zt=Qp(s,Vr),s=Tv(o,s,Vr)}r.memoizedProps=r.pendingProps,s===null?nf(r):zt=s}function Ao(r,s,o,u){Lr=va=null,Wh(s),mo=null,Jl=0;var f=s.return;try{if(FA(r,f,s,o,Pt)){ue=1,Gc(r,Sn(o,r.current)),zt=null;return}}catch(m){if(f!==null)throw zt=f,m;ue=1,Gc(r,Sn(o,r.current)),zt=null;return}s.flags&32768?(jt||u===1?r=!0:wo||(Pt&536870912)!==0?r=!1:(Is=r=!0,(u===2||u===9||u===3||u===6)&&(u=An.current,u!==null&&u.tag===13&&(u.flags|=16384))),Qv(s,r)):nf(s)}function nf(r){var s=r;do{if((s.flags&32768)!==0){Qv(s,Is);return}r=s.return;var o=QA(s.alternate,s,Vr);if(o!==null){zt=o;return}if(s=s.sibling,s!==null){zt=s;return}zt=s=r}while(s!==null);ue===0&&(ue=5)}function Qv(r,s){do{var o=WA(r.alternate,r);if(o!==null){o.flags&=32767,zt=o;return}if(o=r.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(r=r.sibling,r!==null)){zt=r;return}zt=r=o}while(r!==null);ue=6,zt=null}function Wv(r,s,o,u,f,m,b,A,M){r.cancelPendingCommit=null;do rf();while(Me!==0);if((Xt&6)!==0)throw Error(i(327));if(s!==null){if(s===r.current)throw Error(i(177));if(m=s.lanes|s.childLanes,m|=Ch,nh(r,o,m,b,A,M),r===ne&&(zt=ne=null,Pt=0),bo=s,Bs=r,xo=o,Mg=m,Bg=f,$v=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,fE(hs,function(){return iw(),null})):(r.callbackNode=null,r.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=C.T,C.T=null,f=B.p,B.p=2,b=Xt,Xt|=4;try{tE(r,s,o)}finally{Xt=b,B.p=f,C.T=u}}Me=1,tw(),ew(),nw()}}function tw(){if(Me===1){Me=0;var r=Bs,s=bo,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=C.T,C.T=null;var u=B.p;B.p=2;var f=Xt;Xt|=4;try{Lv(s,r);var m=Fg,b=Hp(r.containerInfo),A=m.focusedElem,M=m.selectionRange;if(b!==A&&A&&A.ownerDocument&&Jp(A.ownerDocument.documentElement,A)){if(M!==null&&Th(A)){var X=M.start,st=M.end;if(st===void 0&&(st=X),"selectionStart"in A)A.selectionStart=X,A.selectionEnd=Math.min(st,A.value.length);else{var lt=A.ownerDocument||document,K=lt&&lt.defaultView||window;if(K.getSelection){var Z=K.getSelection(),kt=A.textContent.length,Nt=Math.min(M.start,kt),Qt=M.end===void 0?Nt:Math.min(M.end,kt);!Z.extend&&Nt>Qt&&(b=Qt,Qt=Nt,Nt=b);var $=Pp(A,Nt),L=Pp(A,Qt);if($&&L&&(Z.rangeCount!==1||Z.anchorNode!==$.node||Z.anchorOffset!==$.offset||Z.focusNode!==L.node||Z.focusOffset!==L.offset)){var Y=lt.createRange();Y.setStart($.node,$.offset),Z.removeAllRanges(),Nt>Qt?(Z.addRange(Y),Z.extend(L.node,L.offset)):(Y.setEnd(L.node,L.offset),Z.addRange(Y))}}}}for(lt=[],Z=A;Z=Z.parentNode;)Z.nodeType===1&&lt.push({element:Z,left:Z.scrollLeft,top:Z.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<lt.length;A++){var at=lt[A];at.element.scrollLeft=at.left,at.element.scrollTop=at.top}}yf=!!Kg,Fg=Kg=null}finally{Xt=f,B.p=u,C.T=o}}r.current=s,Me=2}}function ew(){if(Me===2){Me=0;var r=Bs,s=bo,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=C.T,C.T=null;var u=B.p;B.p=2;var f=Xt;Xt|=4;try{Rv(r,s.alternate,s)}finally{Xt=f,B.p=u,C.T=o}}Me=3}}function nw(){if(Me===4||Me===3){Me=0,an();var r=Bs,s=bo,o=xo,u=$v;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Me=5:(Me=0,bo=Bs=null,rw(r,r.pendingLanes));var f=r.pendingLanes;if(f===0&&(Ms=null),cl(o),s=s.stateNode,Ee&&typeof Ee.onCommitFiberRoot=="function")try{Ee.onCommitFiberRoot(Jn,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=C.T,f=B.p,B.p=2,C.T=null;try{for(var m=r.onRecoverableError,b=0;b<u.length;b++){var A=u[b];m(A.value,{componentStack:A.stack})}}finally{C.T=s,B.p=f}}(xo&3)!==0&&rf(),lr(r),f=r.pendingLanes,(o&4194090)!==0&&(f&42)!==0?r===zg?Fl++:(Fl=0,zg=r):Fl=0,Zl(0)}}function rw(r,s){(r.pooledCacheLanes&=s)===0&&(s=r.pooledCache,s!=null&&(r.pooledCache=null,Ol(s)))}function rf(r){return tw(),ew(),nw(),iw()}function iw(){if(Me!==5)return!1;var r=Bs,s=Mg;Mg=0;var o=cl(xo),u=C.T,f=B.p;try{B.p=32>o?32:o,C.T=null,o=Bg,Bg=null;var m=Bs,b=xo;if(Me=0,bo=Bs=null,xo=0,(Xt&6)!==0)throw Error(i(331));var A=Xt;if(Xt|=4,Jv(m.current),Uv(m,m.current,b,o),Xt=A,Zl(0,!1),Ee&&typeof Ee.onPostCommitFiberRoot=="function")try{Ee.onPostCommitFiberRoot(Jn,m)}catch{}return!0}finally{B.p=f,C.T=u,rw(r,s)}}function sw(r,s,o){s=Sn(o,s),s=hg(r.stateNode,s,2),r=As(r,s,2),r!==null&&(oa(r,2),lr(r))}function Wt(r,s,o){if(r.tag===3)sw(r,r,o);else for(;s!==null;){if(s.tag===3){sw(s,r,o);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Ms===null||!Ms.has(u))){r=Sn(o,r),o=uv(2),u=As(s,o,2),u!==null&&(cv(o,u,s,r),oa(u,2),lr(u));break}}s=s.return}}function qg(r,s,o){var u=r.pingCache;if(u===null){u=r.pingCache=new rE;var f=new Set;u.set(s,f)}else f=u.get(s),f===void 0&&(f=new Set,u.set(s,f));f.has(o)||(kg=!0,f.add(o),r=lE.bind(null,r,s,o),s.then(r,r))}function lE(r,s,o){var u=r.pingCache;u!==null&&u.delete(s),r.pingedLanes|=r.suspendedLanes&o,r.warmLanes&=~o,ne===r&&(Pt&o)===o&&(ue===4||ue===3&&(Pt&62914560)===Pt&&300>Oe()-Rg?(Xt&2)===0&&To(r,0):Og|=o,So===Pt&&(So=0)),lr(r)}function aw(r,s){s===0&&(s=ic()),r=io(r,s),r!==null&&(oa(r,s),lr(r))}function uE(r){var s=r.memoizedState,o=0;s!==null&&(o=s.retryLane),aw(r,o)}function cE(r,s){var o=0;switch(r.tag){case 13:var u=r.stateNode,f=r.memoizedState;f!==null&&(o=f.retryLane);break;case 19:u=r.stateNode;break;case 22:u=r.stateNode._retryCache;break;default:throw Error(i(314))}u!==null&&u.delete(s),aw(r,o)}function fE(r,s){return Yt(r,s)}var sf=null,Eo=null,Pg=!1,af=!1,Jg=!1,Ea=0;function lr(r){r!==Eo&&r.next===null&&(Eo===null?sf=Eo=r:Eo=Eo.next=r),af=!0,Pg||(Pg=!0,hE())}function Zl(r,s){if(!Jg&&af){Jg=!0;do for(var o=!1,u=sf;u!==null;){if(r!==0){var f=u.pendingLanes;if(f===0)var m=0;else{var b=u.suspendedLanes,A=u.pingedLanes;m=(1<<31-Ie(42|r)+1)-1,m&=f&~(b&~A),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(o=!0,cw(u,m))}else m=Pt,m=Va(u,u===ne?m:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(m&3)===0||aa(u,m)||(o=!0,cw(u,m));u=u.next}while(o);Jg=!1}}function dE(){ow()}function ow(){af=Pg=!1;var r=0;Ea!==0&&(bE()&&(r=Ea),Ea=0);for(var s=Oe(),o=null,u=sf;u!==null;){var f=u.next,m=lw(u,s);m===0?(u.next=null,o===null?sf=f:o.next=f,f===null&&(Eo=o)):(o=u,(r!==0||(m&3)!==0)&&(af=!0)),u=f}Zl(r)}function lw(r,s){for(var o=r.suspendedLanes,u=r.pingedLanes,f=r.expirationTimes,m=r.pendingLanes&-62914561;0<m;){var b=31-Ie(m),A=1<<b,M=f[b];M===-1?((A&o)===0||(A&u)!==0)&&(f[b]=eh(A,s)):M<=s&&(r.expiredLanes|=A),m&=~A}if(s=ne,o=Pt,o=Va(r,r===s?o:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u=r.callbackNode,o===0||r===s&&(Kt===2||Kt===9)||r.cancelPendingCommit!==null)return u!==null&&u!==null&&qt(u),r.callbackNode=null,r.callbackPriority=0;if((o&3)===0||aa(r,o)){if(s=o&-o,s===r.callbackPriority)return s;switch(u!==null&&qt(u),cl(o)){case 2:case 8:o=ds;break;case 32:o=hs;break;case 268435456:o=gs;break;default:o=hs}return u=uw.bind(null,r),o=Yt(o,u),r.callbackPriority=s,r.callbackNode=o,s}return u!==null&&u!==null&&qt(u),r.callbackPriority=2,r.callbackNode=null,2}function uw(r,s){if(Me!==0&&Me!==5)return r.callbackNode=null,r.callbackPriority=0,null;var o=r.callbackNode;if(rf()&&r.callbackNode!==o)return null;var u=Pt;return u=Va(r,r===ne?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u===0?null:(jv(r,u,s),lw(r,Oe()),r.callbackNode!=null&&r.callbackNode===o?uw.bind(null,r):null)}function cw(r,s){if(rf())return null;jv(r,s,!0)}function hE(){TE(function(){(Xt&6)!==0?Yt(Ja,dE):ow()})}function Hg(){return Ea===0&&(Ea=rc()),Ea}function fw(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:yc(""+r)}function dw(r,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,r.id&&o.setAttribute("form",r.id),s.parentNode.insertBefore(o,s),r=new FormData(r),o.parentNode.removeChild(o),r}function gE(r,s,o,u,f){if(s==="submit"&&o&&o.stateNode===f){var m=fw((f[qe]||null).action),b=u.submitter;b&&(s=(s=b[qe]||null)?fw(s.formAction):b.getAttribute("formAction"),s!==null&&(m=s,b=null));var A=new Sc("action","action",null,u,f);r.push({event:A,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Ea!==0){var M=b?dw(f,b):new FormData(f);lg(o,{pending:!0,data:M,method:f.method,action:m},null,M)}}else typeof m=="function"&&(A.preventDefault(),M=b?dw(f,b):new FormData(f),lg(o,{pending:!0,data:M,method:f.method,action:m},m,M))},currentTarget:f}]})}}for(var $g=0;$g<Dh.length;$g++){var Vg=Dh[$g],mE=Vg.toLowerCase(),yE=Vg[0].toUpperCase()+Vg.slice(1);$n(mE,"on"+yE)}$n(jp,"onAnimationEnd"),$n(Yp,"onAnimationIteration"),$n(Gp,"onAnimationStart"),$n("dblclick","onDoubleClick"),$n("focusin","onFocus"),$n("focusout","onBlur"),$n(MA,"onTransitionRun"),$n(BA,"onTransitionStart"),$n(zA,"onTransitionCancel"),$n(Xp,"onTransitionEnd"),ps("onMouseEnter",["mouseout","mouseover"]),ps("onMouseLeave",["mouseout","mouseover"]),ps("onPointerEnter",["pointerout","pointerover"]),ps("onPointerLeave",["pointerout","pointerover"]),Ir("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ir("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ir("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ir("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ir("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ir("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ql="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),pE=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ql));function hw(r,s){s=(s&4)!==0;for(var o=0;o<r.length;o++){var u=r[o],f=u.event;u=u.listeners;t:{var m=void 0;if(s)for(var b=u.length-1;0<=b;b--){var A=u[b],M=A.instance,X=A.currentTarget;if(A=A.listener,M!==m&&f.isPropagationStopped())break t;m=A,f.currentTarget=X;try{m(f)}catch(st){Yc(st)}f.currentTarget=null,m=M}else for(b=0;b<u.length;b++){if(A=u[b],M=A.instance,X=A.currentTarget,A=A.listener,M!==m&&f.isPropagationStopped())break t;m=A,f.currentTarget=X;try{m(f)}catch(st){Yc(st)}f.currentTarget=null,m=M}}}}function Lt(r,s){var o=s[fl];o===void 0&&(o=s[fl]=new Set);var u=r+"__bubble";o.has(u)||(gw(s,r,2,!1),o.add(u))}function jg(r,s,o){var u=0;s&&(u|=4),gw(o,r,u,s)}var of="_reactListening"+Math.random().toString(36).slice(2);function Yg(r){if(!r[of]){r[of]=!0,lc.forEach(function(o){o!=="selectionchange"&&(pE.has(o)||jg(o,!1,r),jg(o,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[of]||(s[of]=!0,jg("selectionchange",!1,s))}}function gw(r,s,o,u){switch(Uw(s)){case 2:var f=VE;break;case 8:f=jE;break;default:f=am}o=f.bind(null,s,o,r),f=void 0,!gh||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),u?f!==void 0?r.addEventListener(s,o,{capture:!0,passive:f}):r.addEventListener(s,o,!0):f!==void 0?r.addEventListener(s,o,{passive:f}):r.addEventListener(s,o,!1)}function Gg(r,s,o,u,f){var m=u;if((s&1)===0&&(s&2)===0&&u!==null)t:for(;;){if(u===null)return;var b=u.tag;if(b===3||b===4){var A=u.stateNode.containerInfo;if(A===f)break;if(b===4)for(b=u.return;b!==null;){var M=b.tag;if((M===3||M===4)&&b.stateNode.containerInfo===f)return;b=b.return}for(;A!==null;){if(b=kr(A),b===null)return;if(M=b.tag,M===5||M===6||M===26||M===27){u=m=b;continue t}A=A.parentNode}}u=u.return}bp(function(){var X=m,st=dh(o),lt=[];t:{var K=Kp.get(r);if(K!==void 0){var Z=Sc,kt=r;switch(r){case"keypress":if(vc(o)===0)break t;case"keydown":case"keyup":Z=fA;break;case"focusin":kt="focus",Z=vh;break;case"focusout":kt="blur",Z=vh;break;case"beforeblur":case"afterblur":Z=vh;break;case"click":if(o.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=Ap;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=WT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=gA;break;case jp:case Yp:case Gp:Z=nA;break;case Xp:Z=yA;break;case"scroll":case"scrollend":Z=ZT;break;case"wheel":Z=vA;break;case"copy":case"cut":case"paste":Z=iA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=Np;break;case"toggle":case"beforetoggle":Z=SA}var Nt=(s&4)!==0,Qt=!Nt&&(r==="scroll"||r==="scrollend"),$=Nt?K!==null?K+"Capture":null:K;Nt=[];for(var L=X,Y;L!==null;){var at=L;if(Y=at.stateNode,at=at.tag,at!==5&&at!==26&&at!==27||Y===null||$===null||(at=pl(L,$),at!=null&&Nt.push(Wl(L,at,Y))),Qt)break;L=L.return}0<Nt.length&&(K=new Z(K,kt,null,o,st),lt.push({event:K,listeners:Nt}))}}if((s&7)===0){t:{if(K=r==="mouseover"||r==="pointerover",Z=r==="mouseout"||r==="pointerout",K&&o!==fh&&(kt=o.relatedTarget||o.fromElement)&&(kr(kt)||kt[ms]))break t;if((Z||K)&&(K=st.window===st?st:(K=st.ownerDocument)?K.defaultView||K.parentWindow:window,Z?(kt=o.relatedTarget||o.toElement,Z=X,kt=kt?kr(kt):null,kt!==null&&(Qt=l(kt),Nt=kt.tag,kt!==Qt||Nt!==5&&Nt!==27&&Nt!==6)&&(kt=null)):(Z=null,kt=X),Z!==kt)){if(Nt=Ap,at="onMouseLeave",$="onMouseEnter",L="mouse",(r==="pointerout"||r==="pointerover")&&(Nt=Np,at="onPointerLeave",$="onPointerEnter",L="pointer"),Qt=Z==null?K:ua(Z),Y=kt==null?K:ua(kt),K=new Nt(at,L+"leave",Z,o,st),K.target=Qt,K.relatedTarget=Y,at=null,kr(st)===X&&(Nt=new Nt($,L+"enter",kt,o,st),Nt.target=Y,Nt.relatedTarget=Qt,at=Nt),Qt=at,Z&&kt)e:{for(Nt=Z,$=kt,L=0,Y=Nt;Y;Y=No(Y))L++;for(Y=0,at=$;at;at=No(at))Y++;for(;0<L-Y;)Nt=No(Nt),L--;for(;0<Y-L;)$=No($),Y--;for(;L--;){if(Nt===$||$!==null&&Nt===$.alternate)break e;Nt=No(Nt),$=No($)}Nt=null}else Nt=null;Z!==null&&mw(lt,K,Z,Nt,!1),kt!==null&&Qt!==null&&mw(lt,Qt,kt,Nt,!0)}}t:{if(K=X?ua(X):window,Z=K.nodeName&&K.nodeName.toLowerCase(),Z==="select"||Z==="input"&&K.type==="file")var vt=Bp;else if(Rp(K))if(zp)vt=OA;else{vt=CA;var Bt=DA}else Z=K.nodeName,!Z||Z.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?X&&ch(X.elementType)&&(vt=Bp):vt=kA;if(vt&&(vt=vt(r,X))){Mp(lt,vt,o,st);break t}Bt&&Bt(r,K,X),r==="focusout"&&X&&K.type==="number"&&X.memoizedProps.value!=null&&uh(K,"number",K.value)}switch(Bt=X?ua(X):window,r){case"focusin":(Rp(Bt)||Bt.contentEditable==="true")&&(eo=Bt,Ah=X,El=null);break;case"focusout":El=Ah=eo=null;break;case"mousedown":Eh=!0;break;case"contextmenu":case"mouseup":case"dragend":Eh=!1,$p(lt,o,st);break;case"selectionchange":if(RA)break;case"keydown":case"keyup":$p(lt,o,st)}var St;if(Sh)t:{switch(r){case"compositionstart":var Dt="onCompositionStart";break t;case"compositionend":Dt="onCompositionEnd";break t;case"compositionupdate":Dt="onCompositionUpdate";break t}Dt=void 0}else to?Op(r,o)&&(Dt="onCompositionEnd"):r==="keydown"&&o.keyCode===229&&(Dt="onCompositionStart");Dt&&(Dp&&o.locale!=="ko"&&(to||Dt!=="onCompositionStart"?Dt==="onCompositionEnd"&&to&&(St=xp()):(Ss=st,mh="value"in Ss?Ss.value:Ss.textContent,to=!0)),Bt=lf(X,Dt),0<Bt.length&&(Dt=new Ep(Dt,r,null,o,st),lt.push({event:Dt,listeners:Bt}),St?Dt.data=St:(St=Ip(o),St!==null&&(Dt.data=St)))),(St=xA?TA(r,o):AA(r,o))&&(Dt=lf(X,"onBeforeInput"),0<Dt.length&&(Bt=new Ep("onBeforeInput","beforeinput",null,o,st),lt.push({event:Bt,listeners:Dt}),Bt.data=St)),gE(lt,r,X,o,st)}hw(lt,s)})}function Wl(r,s,o){return{instance:r,listener:s,currentTarget:o}}function lf(r,s){for(var o=s+"Capture",u=[];r!==null;){var f=r,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=pl(r,o),f!=null&&u.unshift(Wl(r,f,m)),f=pl(r,s),f!=null&&u.push(Wl(r,f,m))),r.tag===3)return u;r=r.return}return[]}function No(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function mw(r,s,o,u,f){for(var m=s._reactName,b=[];o!==null&&o!==u;){var A=o,M=A.alternate,X=A.stateNode;if(A=A.tag,M!==null&&M===u)break;A!==5&&A!==26&&A!==27||X===null||(M=X,f?(X=pl(o,m),X!=null&&b.unshift(Wl(o,X,M))):f||(X=pl(o,m),X!=null&&b.push(Wl(o,X,M)))),o=o.return}b.length!==0&&r.push({event:s,listeners:b})}var vE=/\r\n?/g,wE=/\u0000|\uFFFD/g;function yw(r){return(typeof r=="string"?r:""+r).replace(vE,`
`).replace(wE,"")}function pw(r,s){return s=yw(s),yw(r)===s}function uf(){}function Zt(r,s,o,u,f,m){switch(o){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||Za(r,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&Za(r,""+u);break;case"className":Ya(r,"class",u);break;case"tabIndex":Ya(r,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Ya(r,o,u);break;case"style":wp(r,u,m);break;case"data":if(s!=="object"){Ya(r,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||o!=="href")){r.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=yc(""+u),r.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){r.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(o==="formAction"?(s!=="input"&&Zt(r,s,"name",f.name,f,null),Zt(r,s,"formEncType",f.formEncType,f,null),Zt(r,s,"formMethod",f.formMethod,f,null),Zt(r,s,"formTarget",f.formTarget,f,null)):(Zt(r,s,"encType",f.encType,f,null),Zt(r,s,"method",f.method,f,null),Zt(r,s,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=yc(""+u),r.setAttribute(o,u);break;case"onClick":u!=null&&(r.onclick=uf);break;case"onScroll":u!=null&&Lt("scroll",r);break;case"onScrollEnd":u!=null&&Lt("scrollend",r);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(i(60));r.innerHTML=o}}break;case"multiple":r.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":r.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){r.removeAttribute("xlink:href");break}o=yc(""+u),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""+u):r.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""):r.removeAttribute(o);break;case"capture":case"download":u===!0?r.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,u):r.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?r.setAttribute(o,u):r.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?r.removeAttribute(o):r.setAttribute(o,u);break;case"popover":Lt("beforetoggle",r),Lt("toggle",r),ja(r,"popover",u);break;case"xlinkActuate":Hn(r,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Hn(r,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Hn(r,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Hn(r,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Hn(r,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Hn(r,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Hn(r,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Hn(r,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Hn(r,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":ja(r,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=KT.get(o)||o,ja(r,o,u))}}function Xg(r,s,o,u,f,m){switch(o){case"style":wp(r,u,m);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(i(60));r.innerHTML=o}}break;case"children":typeof u=="string"?Za(r,u):(typeof u=="number"||typeof u=="bigint")&&Za(r,""+u);break;case"onScroll":u!=null&&Lt("scroll",r);break;case"onScrollEnd":u!=null&&Lt("scrollend",r);break;case"onClick":u!=null&&(r.onclick=uf);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!uc.hasOwnProperty(o))t:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),s=o.slice(2,f?o.length-7:void 0),m=r[qe]||null,m=m!=null?m[o]:null,typeof m=="function"&&r.removeEventListener(s,m,f),typeof u=="function")){typeof m!="function"&&m!==null&&(o in r?r[o]=null:r.hasAttribute(o)&&r.removeAttribute(o)),r.addEventListener(s,u,f);break t}o in r?r[o]=u:u===!0?r.setAttribute(o,""):ja(r,o,u)}}}function Be(r,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Lt("error",r),Lt("load",r);var u=!1,f=!1,m;for(m in o)if(o.hasOwnProperty(m)){var b=o[m];if(b!=null)switch(m){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:Zt(r,s,m,b,o,null)}}f&&Zt(r,s,"srcSet",o.srcSet,o,null),u&&Zt(r,s,"src",o.src,o,null);return;case"input":Lt("invalid",r);var A=m=b=f=null,M=null,X=null;for(u in o)if(o.hasOwnProperty(u)){var st=o[u];if(st!=null)switch(u){case"name":f=st;break;case"type":b=st;break;case"checked":M=st;break;case"defaultChecked":X=st;break;case"value":m=st;break;case"defaultValue":A=st;break;case"children":case"dangerouslySetInnerHTML":if(st!=null)throw Error(i(137,s));break;default:Zt(r,s,u,st,o,null)}}mp(r,m,A,M,X,b,f,!1),Xa(r);return;case"select":Lt("invalid",r),u=b=m=null;for(f in o)if(o.hasOwnProperty(f)&&(A=o[f],A!=null))switch(f){case"value":m=A;break;case"defaultValue":b=A;break;case"multiple":u=A;default:Zt(r,s,f,A,o,null)}s=m,o=b,r.multiple=!!u,s!=null?Fa(r,!!u,s,!1):o!=null&&Fa(r,!!u,o,!0);return;case"textarea":Lt("invalid",r),m=f=u=null;for(b in o)if(o.hasOwnProperty(b)&&(A=o[b],A!=null))switch(b){case"value":u=A;break;case"defaultValue":f=A;break;case"children":m=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(i(91));break;default:Zt(r,s,b,A,o,null)}pp(r,u,f,m),Xa(r);return;case"option":for(M in o)if(o.hasOwnProperty(M)&&(u=o[M],u!=null))switch(M){case"selected":r.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:Zt(r,s,M,u,o,null)}return;case"dialog":Lt("beforetoggle",r),Lt("toggle",r),Lt("cancel",r),Lt("close",r);break;case"iframe":case"object":Lt("load",r);break;case"video":case"audio":for(u=0;u<Ql.length;u++)Lt(Ql[u],r);break;case"image":Lt("error",r),Lt("load",r);break;case"details":Lt("toggle",r);break;case"embed":case"source":case"link":Lt("error",r),Lt("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(X in o)if(o.hasOwnProperty(X)&&(u=o[X],u!=null))switch(X){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:Zt(r,s,X,u,o,null)}return;default:if(ch(s)){for(st in o)o.hasOwnProperty(st)&&(u=o[st],u!==void 0&&Xg(r,s,st,u,o,void 0));return}}for(A in o)o.hasOwnProperty(A)&&(u=o[A],u!=null&&Zt(r,s,A,u,o,null))}function SE(r,s,o,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,b=null,A=null,M=null,X=null,st=null;for(Z in o){var lt=o[Z];if(o.hasOwnProperty(Z)&&lt!=null)switch(Z){case"checked":break;case"value":break;case"defaultValue":M=lt;default:u.hasOwnProperty(Z)||Zt(r,s,Z,null,u,lt)}}for(var K in u){var Z=u[K];if(lt=o[K],u.hasOwnProperty(K)&&(Z!=null||lt!=null))switch(K){case"type":m=Z;break;case"name":f=Z;break;case"checked":X=Z;break;case"defaultChecked":st=Z;break;case"value":b=Z;break;case"defaultValue":A=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(i(137,s));break;default:Z!==lt&&Zt(r,s,K,Z,u,lt)}}Ka(r,b,A,M,X,st,m,f);return;case"select":Z=b=A=K=null;for(m in o)if(M=o[m],o.hasOwnProperty(m)&&M!=null)switch(m){case"value":break;case"multiple":Z=M;default:u.hasOwnProperty(m)||Zt(r,s,m,null,u,M)}for(f in u)if(m=u[f],M=o[f],u.hasOwnProperty(f)&&(m!=null||M!=null))switch(f){case"value":K=m;break;case"defaultValue":A=m;break;case"multiple":b=m;default:m!==M&&Zt(r,s,f,m,u,M)}s=A,o=b,u=Z,K!=null?Fa(r,!!o,K,!1):!!u!=!!o&&(s!=null?Fa(r,!!o,s,!0):Fa(r,!!o,o?[]:"",!1));return;case"textarea":Z=K=null;for(A in o)if(f=o[A],o.hasOwnProperty(A)&&f!=null&&!u.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:Zt(r,s,A,null,u,f)}for(b in u)if(f=u[b],m=o[b],u.hasOwnProperty(b)&&(f!=null||m!=null))switch(b){case"value":K=f;break;case"defaultValue":Z=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(i(91));break;default:f!==m&&Zt(r,s,b,f,u,m)}yp(r,K,Z);return;case"option":for(var kt in o)if(K=o[kt],o.hasOwnProperty(kt)&&K!=null&&!u.hasOwnProperty(kt))switch(kt){case"selected":r.selected=!1;break;default:Zt(r,s,kt,null,u,K)}for(M in u)if(K=u[M],Z=o[M],u.hasOwnProperty(M)&&K!==Z&&(K!=null||Z!=null))switch(M){case"selected":r.selected=K&&typeof K!="function"&&typeof K!="symbol";break;default:Zt(r,s,M,K,u,Z)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Nt in o)K=o[Nt],o.hasOwnProperty(Nt)&&K!=null&&!u.hasOwnProperty(Nt)&&Zt(r,s,Nt,null,u,K);for(X in u)if(K=u[X],Z=o[X],u.hasOwnProperty(X)&&K!==Z&&(K!=null||Z!=null))switch(X){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(i(137,s));break;default:Zt(r,s,X,K,u,Z)}return;default:if(ch(s)){for(var Qt in o)K=o[Qt],o.hasOwnProperty(Qt)&&K!==void 0&&!u.hasOwnProperty(Qt)&&Xg(r,s,Qt,void 0,u,K);for(st in u)K=u[st],Z=o[st],!u.hasOwnProperty(st)||K===Z||K===void 0&&Z===void 0||Xg(r,s,st,K,u,Z);return}}for(var $ in o)K=o[$],o.hasOwnProperty($)&&K!=null&&!u.hasOwnProperty($)&&Zt(r,s,$,null,u,K);for(lt in u)K=u[lt],Z=o[lt],!u.hasOwnProperty(lt)||K===Z||K==null&&Z==null||Zt(r,s,lt,K,u,Z)}var Kg=null,Fg=null;function cf(r){return r.nodeType===9?r:r.ownerDocument}function vw(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ww(r,s){if(r===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&s==="foreignObject"?0:r}function Zg(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Qg=null;function bE(){var r=window.event;return r&&r.type==="popstate"?r===Qg?!1:(Qg=r,!0):(Qg=null,!1)}var Sw=typeof setTimeout=="function"?setTimeout:void 0,xE=typeof clearTimeout=="function"?clearTimeout:void 0,bw=typeof Promise=="function"?Promise:void 0,TE=typeof queueMicrotask=="function"?queueMicrotask:typeof bw<"u"?function(r){return bw.resolve(null).then(r).catch(AE)}:Sw;function AE(r){setTimeout(function(){throw r})}function Ls(r){return r==="head"}function xw(r,s){var o=s,u=0,f=0;do{var m=o.nextSibling;if(r.removeChild(o),m&&m.nodeType===8)if(o=m.data,o==="/$"){if(0<u&&8>u){o=u;var b=r.ownerDocument;if(o&1&&tu(b.documentElement),o&2&&tu(b.body),o&4)for(o=b.head,tu(o),b=o.firstChild;b;){var A=b.nextSibling,M=b.nodeName;b[la]||M==="SCRIPT"||M==="STYLE"||M==="LINK"&&b.rel.toLowerCase()==="stylesheet"||o.removeChild(b),b=A}}if(f===0){r.removeChild(m),lu(s);return}f--}else o==="$"||o==="$?"||o==="$!"?f++:u=o.charCodeAt(0)-48;else u=0;o=m}while(o);lu(s)}function Wg(r){var s=r.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Wg(o),dl(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}r.removeChild(o)}}function EE(r,s,o,u){for(;r.nodeType===1;){var f=o;if(r.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(u){if(!r[la])switch(s){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(m=r.getAttribute("rel"),m==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(m!==f.rel||r.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||r.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||r.getAttribute("title")!==(f.title==null?null:f.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(m=r.getAttribute("src"),(m!==(f.src==null?null:f.src)||r.getAttribute("type")!==(f.type==null?null:f.type)||r.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(s==="input"&&r.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&r.getAttribute("name")===m)return r}else return r;if(r=jn(r.nextSibling),r===null)break}return null}function NE(r,s,o){if(s==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!o||(r=jn(r.nextSibling),r===null))return null;return r}function tm(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState==="complete"}function DE(r,s){var o=r.ownerDocument;if(r.data!=="$?"||o.readyState==="complete")s();else{var u=function(){s(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),r._reactRetry=u}}function jn(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return r}var em=null;function Tw(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var o=r.data;if(o==="$"||o==="$!"||o==="$?"){if(s===0)return r;s--}else o==="/$"&&s++}r=r.previousSibling}return null}function Aw(r,s,o){switch(s=cf(o),r){case"html":if(r=s.documentElement,!r)throw Error(i(452));return r;case"head":if(r=s.head,!r)throw Error(i(453));return r;case"body":if(r=s.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function tu(r){for(var s=r.attributes;s.length;)r.removeAttributeNode(s[0]);dl(r)}var Nn=new Map,Ew=new Set;function ff(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var jr=B.d;B.d={f:CE,r:kE,D:OE,C:IE,L:RE,m:ME,X:zE,S:BE,M:LE};function CE(){var r=jr.f(),s=ef();return r||s}function kE(r){var s=Or(r);s!==null&&s.tag===5&&s.type==="form"?j0(s):jr.r(r)}var Do=typeof document>"u"?null:document;function Nw(r,s,o){var u=Do;if(u&&typeof s=="string"&&s){var f=Ge(s);f='link[rel="'+r+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),Ew.has(f)||(Ew.add(f),r={rel:r,crossOrigin:o,href:s},u.querySelector(f)===null&&(s=u.createElement("link"),Be(s,"link",r),ve(s),u.head.appendChild(s)))}}function OE(r){jr.D(r),Nw("dns-prefetch",r,null)}function IE(r,s){jr.C(r,s),Nw("preconnect",r,s)}function RE(r,s,o){jr.L(r,s,o);var u=Do;if(u&&r&&s){var f='link[rel="preload"][as="'+Ge(s)+'"]';s==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+Ge(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+Ge(o.imageSizes)+'"]')):f+='[href="'+Ge(r)+'"]';var m=f;switch(s){case"style":m=Co(r);break;case"script":m=ko(r)}Nn.has(m)||(r=y({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:r,as:s},o),Nn.set(m,r),u.querySelector(f)!==null||s==="style"&&u.querySelector(eu(m))||s==="script"&&u.querySelector(nu(m))||(s=u.createElement("link"),Be(s,"link",r),ve(s),u.head.appendChild(s)))}}function ME(r,s){jr.m(r,s);var o=Do;if(o&&r){var u=s&&typeof s.as=="string"?s.as:"script",f='link[rel="modulepreload"][as="'+Ge(u)+'"][href="'+Ge(r)+'"]',m=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=ko(r)}if(!Nn.has(m)&&(r=y({rel:"modulepreload",href:r},s),Nn.set(m,r),o.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(nu(m)))return}u=o.createElement("link"),Be(u,"link",r),ve(u),o.head.appendChild(u)}}}function BE(r,s,o){jr.S(r,s,o);var u=Do;if(u&&r){var f=ys(u).hoistableStyles,m=Co(r);s=s||"default";var b=f.get(m);if(!b){var A={loading:0,preload:null};if(b=u.querySelector(eu(m)))A.loading=5;else{r=y({rel:"stylesheet",href:r,"data-precedence":s},o),(o=Nn.get(m))&&nm(r,o);var M=b=u.createElement("link");ve(M),Be(M,"link",r),M._p=new Promise(function(X,st){M.onload=X,M.onerror=st}),M.addEventListener("load",function(){A.loading|=1}),M.addEventListener("error",function(){A.loading|=2}),A.loading|=4,df(b,s,u)}b={type:"stylesheet",instance:b,count:1,state:A},f.set(m,b)}}}function zE(r,s){jr.X(r,s);var o=Do;if(o&&r){var u=ys(o).hoistableScripts,f=ko(r),m=u.get(f);m||(m=o.querySelector(nu(f)),m||(r=y({src:r,async:!0},s),(s=Nn.get(f))&&rm(r,s),m=o.createElement("script"),ve(m),Be(m,"link",r),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(f,m))}}function LE(r,s){jr.M(r,s);var o=Do;if(o&&r){var u=ys(o).hoistableScripts,f=ko(r),m=u.get(f);m||(m=o.querySelector(nu(f)),m||(r=y({src:r,async:!0,type:"module"},s),(s=Nn.get(f))&&rm(r,s),m=o.createElement("script"),ve(m),Be(m,"link",r),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(f,m))}}function Dw(r,s,o,u){var f=(f=dt.current)?ff(f):null;if(!f)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=Co(o.href),o=ys(f).hoistableStyles,u=o.get(s),u||(u={type:"style",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){r=Co(o.href);var m=ys(f).hoistableStyles,b=m.get(r);if(b||(f=f.ownerDocument||f,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(r,b),(m=f.querySelector(eu(r)))&&!m._p&&(b.instance=m,b.state.loading=5),Nn.has(r)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Nn.set(r,o),m||_E(f,r,o,b.state))),s&&u===null)throw Error(i(528,""));return b}if(s&&u!==null)throw Error(i(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=ko(o),o=ys(f).hoistableScripts,u=o.get(s),u||(u={type:"script",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function Co(r){return'href="'+Ge(r)+'"'}function eu(r){return'link[rel="stylesheet"]['+r+"]"}function Cw(r){return y({},r,{"data-precedence":r.precedence,precedence:null})}function _E(r,s,o,u){r.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=r.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),Be(s,"link",o),ve(s),r.head.appendChild(s))}function ko(r){return'[src="'+Ge(r)+'"]'}function nu(r){return"script[async]"+r}function kw(r,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var u=r.querySelector('style[data-href~="'+Ge(o.href)+'"]');if(u)return s.instance=u,ve(u),u;var f=y({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(r.ownerDocument||r).createElement("style"),ve(u),Be(u,"style",f),df(u,o.precedence,r),s.instance=u;case"stylesheet":f=Co(o.href);var m=r.querySelector(eu(f));if(m)return s.state.loading|=4,s.instance=m,ve(m),m;u=Cw(o),(f=Nn.get(f))&&nm(u,f),m=(r.ownerDocument||r).createElement("link"),ve(m);var b=m;return b._p=new Promise(function(A,M){b.onload=A,b.onerror=M}),Be(m,"link",u),s.state.loading|=4,df(m,o.precedence,r),s.instance=m;case"script":return m=ko(o.src),(f=r.querySelector(nu(m)))?(s.instance=f,ve(f),f):(u=o,(f=Nn.get(m))&&(u=y({},o),rm(u,f)),r=r.ownerDocument||r,f=r.createElement("script"),ve(f),Be(f,"link",u),r.head.appendChild(f),s.instance=f);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,df(u,o.precedence,r));return s.instance}function df(r,s,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,m=f,b=0;b<u.length;b++){var A=u[b];if(A.dataset.precedence===s)m=A;else if(m!==f)break}m?m.parentNode.insertBefore(r,m.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(r,s.firstChild))}function nm(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.title==null&&(r.title=s.title)}function rm(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.integrity==null&&(r.integrity=s.integrity)}var hf=null;function Ow(r,s,o){if(hf===null){var u=new Map,f=hf=new Map;f.set(o,u)}else f=hf,u=f.get(o),u||(u=new Map,f.set(o,u));if(u.has(r))return u;for(u.set(r,null),o=o.getElementsByTagName(r),f=0;f<o.length;f++){var m=o[f];if(!(m[la]||m[Ne]||r==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var b=m.getAttribute(s)||"";b=r+b;var A=u.get(b);A?A.push(m):u.set(b,[m])}}return u}function Iw(r,s,o){r=r.ownerDocument||r,r.head.insertBefore(o,s==="title"?r.querySelector("head > title"):null)}function UE(r,s,o){if(o===1||s.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return r=s.disabled,typeof s.precedence=="string"&&r==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function Rw(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}var ru=null;function qE(){}function PE(r,s,o){if(ru===null)throw Error(i(475));var u=ru;if(s.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var f=Co(o.href),m=r.querySelector(eu(f));if(m){r=m._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(u.count++,u=gf.bind(u),r.then(u,u)),s.state.loading|=4,s.instance=m,ve(m);return}m=r.ownerDocument||r,o=Cw(o),(f=Nn.get(f))&&nm(o,f),m=m.createElement("link"),ve(m);var b=m;b._p=new Promise(function(A,M){b.onload=A,b.onerror=M}),Be(m,"link",o),s.instance=m}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(s,r),(r=s.state.preload)&&(s.state.loading&3)===0&&(u.count++,s=gf.bind(u),r.addEventListener("load",s),r.addEventListener("error",s))}}function JE(){if(ru===null)throw Error(i(475));var r=ru;return r.stylesheets&&r.count===0&&im(r,r.stylesheets),0<r.count?function(s){var o=setTimeout(function(){if(r.stylesheets&&im(r,r.stylesheets),r.unsuspend){var u=r.unsuspend;r.unsuspend=null,u()}},6e4);return r.unsuspend=s,function(){r.unsuspend=null,clearTimeout(o)}}:null}function gf(){if(this.count--,this.count===0){if(this.stylesheets)im(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var mf=null;function im(r,s){r.stylesheets=null,r.unsuspend!==null&&(r.count++,mf=new Map,s.forEach(HE,r),mf=null,gf.call(r))}function HE(r,s){if(!(s.state.loading&4)){var o=mf.get(r);if(o)var u=o.get(null);else{o=new Map,mf.set(r,o);for(var f=r.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var b=f[m];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(o.set(b.dataset.precedence,b),u=b)}u&&o.set(null,u)}f=s.instance,b=f.getAttribute("data-precedence"),m=o.get(b)||u,m===u&&o.set(null,f),o.set(b,f),this.count++,u=gf.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),m?m.parentNode.insertBefore(f,m.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(f,r.firstChild)),s.state.loading|=4}}var iu={$$typeof:N,Provider:null,Consumer:null,_currentValue:H,_currentValue2:H,_threadCount:0};function $E(r,s,o,u,f,m,b,A){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ol(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ol(0),this.hiddenUpdates=ol(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=A,this.incompleteTransitions=new Map}function Mw(r,s,o,u,f,m,b,A,M,X,st,lt){return r=new $E(r,s,o,b,A,M,X,lt),s=1,m===!0&&(s|=24),m=ln(3,null,null,s),r.current=m,m.stateNode=r,s=qh(),s.refCount++,r.pooledCache=s,s.refCount++,m.memoizedState={element:u,isDehydrated:o,cache:s},$h(m),r}function Bw(r){return r?(r=so,r):so}function zw(r,s,o,u,f,m){f=Bw(f),u.context===null?u.context=f:u.pendingContext=f,u=Ts(s),u.payload={element:o},m=m===void 0?null:m,m!==null&&(u.callback=m),o=As(r,u,s),o!==null&&(hn(o,r,s),Bl(o,r,s))}function Lw(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var o=r.retryLane;r.retryLane=o!==0&&o<s?o:s}}function sm(r,s){Lw(r,s),(r=r.alternate)&&Lw(r,s)}function _w(r){if(r.tag===13){var s=io(r,67108864);s!==null&&hn(s,r,67108864),sm(r,67108864)}}var yf=!0;function VE(r,s,o,u){var f=C.T;C.T=null;var m=B.p;try{B.p=2,am(r,s,o,u)}finally{B.p=m,C.T=f}}function jE(r,s,o,u){var f=C.T;C.T=null;var m=B.p;try{B.p=8,am(r,s,o,u)}finally{B.p=m,C.T=f}}function am(r,s,o,u){if(yf){var f=om(u);if(f===null)Gg(r,s,u,pf,o),qw(r,u);else if(GE(f,r,s,o,u))u.stopPropagation();else if(qw(r,u),s&4&&-1<YE.indexOf(r)){for(;f!==null;){var m=Or(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var b=Cr(m.pendingLanes);if(b!==0){var A=m;for(A.pendingLanes|=2,A.entangledLanes|=2;b;){var M=1<<31-Ie(b);A.entanglements[1]|=M,b&=~M}lr(m),(Xt&6)===0&&(Wc=Oe()+500,Zl(0))}}break;case 13:A=io(m,2),A!==null&&hn(A,m,2),ef(),sm(m,2)}if(m=om(u),m===null&&Gg(r,s,u,pf,o),m===f)break;f=m}f!==null&&u.stopPropagation()}else Gg(r,s,u,null,o)}}function om(r){return r=dh(r),lm(r)}var pf=null;function lm(r){if(pf=null,r=kr(r),r!==null){var s=l(r);if(s===null)r=null;else{var o=s.tag;if(o===13){if(r=c(s),r!==null)return r;r=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null)}}return pf=r,null}function Uw(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(sl()){case Ja:return 2;case ds:return 8;case hs:case ia:return 32;case gs:return 268435456;default:return 32}default:return 32}}var um=!1,_s=null,Us=null,qs=null,su=new Map,au=new Map,Ps=[],YE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function qw(r,s){switch(r){case"focusin":case"focusout":_s=null;break;case"dragenter":case"dragleave":Us=null;break;case"mouseover":case"mouseout":qs=null;break;case"pointerover":case"pointerout":su.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":au.delete(s.pointerId)}}function ou(r,s,o,u,f,m){return r===null||r.nativeEvent!==m?(r={blockedOn:s,domEventName:o,eventSystemFlags:u,nativeEvent:m,targetContainers:[f]},s!==null&&(s=Or(s),s!==null&&_w(s)),r):(r.eventSystemFlags|=u,s=r.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),r)}function GE(r,s,o,u,f){switch(s){case"focusin":return _s=ou(_s,r,s,o,u,f),!0;case"dragenter":return Us=ou(Us,r,s,o,u,f),!0;case"mouseover":return qs=ou(qs,r,s,o,u,f),!0;case"pointerover":var m=f.pointerId;return su.set(m,ou(su.get(m)||null,r,s,o,u,f)),!0;case"gotpointercapture":return m=f.pointerId,au.set(m,ou(au.get(m)||null,r,s,o,u,f)),!0}return!1}function Pw(r){var s=kr(r.target);if(s!==null){var o=l(s);if(o!==null){if(s=o.tag,s===13){if(s=c(o),s!==null){r.blockedOn=s,rh(r.priority,function(){if(o.tag===13){var u=dn();u=ul(u);var f=io(o,u);f!==null&&hn(f,o,u),sm(o,u)}});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){r.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}r.blockedOn=null}function vf(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var o=om(r.nativeEvent);if(o===null){o=r.nativeEvent;var u=new o.constructor(o.type,o);fh=u,o.target.dispatchEvent(u),fh=null}else return s=Or(o),s!==null&&_w(s),r.blockedOn=o,!1;s.shift()}return!0}function Jw(r,s,o){vf(r)&&o.delete(s)}function XE(){um=!1,_s!==null&&vf(_s)&&(_s=null),Us!==null&&vf(Us)&&(Us=null),qs!==null&&vf(qs)&&(qs=null),su.forEach(Jw),au.forEach(Jw)}function wf(r,s){r.blockedOn===s&&(r.blockedOn=null,um||(um=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,XE)))}var Sf=null;function Hw(r){Sf!==r&&(Sf=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Sf===r&&(Sf=null);for(var s=0;s<r.length;s+=3){var o=r[s],u=r[s+1],f=r[s+2];if(typeof u!="function"){if(lm(u||o)===null)continue;break}var m=Or(o);m!==null&&(r.splice(s,3),s-=3,lg(m,{pending:!0,data:f,method:o.method,action:u},u,f))}}))}function lu(r){function s(M){return wf(M,r)}_s!==null&&wf(_s,r),Us!==null&&wf(Us,r),qs!==null&&wf(qs,r),su.forEach(s),au.forEach(s);for(var o=0;o<Ps.length;o++){var u=Ps[o];u.blockedOn===r&&(u.blockedOn=null)}for(;0<Ps.length&&(o=Ps[0],o.blockedOn===null);)Pw(o),o.blockedOn===null&&Ps.shift();if(o=(r.ownerDocument||r).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var f=o[u],m=o[u+1],b=f[qe]||null;if(typeof m=="function")b||Hw(o);else if(b){var A=null;if(m&&m.hasAttribute("formAction")){if(f=m,b=m[qe]||null)A=b.formAction;else if(lm(f)!==null)continue}else A=b.action;typeof A=="function"?o[u+1]=A:(o.splice(u,3),u-=3),Hw(o)}}}function cm(r){this._internalRoot=r}bf.prototype.render=cm.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(i(409));var o=s.current,u=dn();zw(o,u,r,s,null,null)},bf.prototype.unmount=cm.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;zw(r.current,2,null,r,null,null),ef(),s[ms]=null}};function bf(r){this._internalRoot=r}bf.prototype.unstable_scheduleHydration=function(r){if(r){var s=ac();r={blockedOn:null,target:r,priority:s};for(var o=0;o<Ps.length&&s!==0&&s<Ps[o].priority;o++);Ps.splice(o,0,r),o===0&&Pw(r)}};var $w=t.version;if($w!=="19.1.0")throw Error(i(527,$w,"19.1.0"));B.findDOMNode=function(r){var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=h(s),r=r!==null?g(r):null,r=r===null?null:r.stateNode,r};var KE={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:C,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xf.isDisabled&&xf.supportsFiber)try{Jn=xf.inject(KE),Ee=xf}catch{}}return cu.createRoot=function(r,s){if(!a(r))throw Error(i(299));var o=!1,u="",f=sv,m=av,b=ov,A=null;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(f=s.onUncaughtError),s.onCaughtError!==void 0&&(m=s.onCaughtError),s.onRecoverableError!==void 0&&(b=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(A=s.unstable_transitionCallbacks)),s=Mw(r,1,!1,null,null,o,u,f,m,b,A,null),r[ms]=s.current,Yg(r),new cm(s)},cu.hydrateRoot=function(r,s,o){if(!a(r))throw Error(i(299));var u=!1,f="",m=sv,b=av,A=ov,M=null,X=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(m=o.onUncaughtError),o.onCaughtError!==void 0&&(b=o.onCaughtError),o.onRecoverableError!==void 0&&(A=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(M=o.unstable_transitionCallbacks),o.formState!==void 0&&(X=o.formState)),s=Mw(r,1,!0,s,o??null,u,f,m,b,A,M,X),s.context=Bw(null),o=s.current,u=dn(),u=ul(u),f=Ts(u),f.callback=null,As(o,f,u),o=u,s.current.lanes=o,oa(s,o),lr(s),r[ms]=s.current,Yg(r),new bf(s)},cu.version="19.1.0",cu}var Ww;function aN(){if(Ww)return dm.exports;Ww=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),dm.exports=sN(),dm.exports}var oN=aN();const lN="@yorkie-js/react",uN="0.6.18",tS={name:lN,version:uN};var et=Yu();const cN=Wb(et);var _t;(function(n){n[n.Canceled=1]="Canceled",n[n.Unknown=2]="Unknown",n[n.InvalidArgument=3]="InvalidArgument",n[n.DeadlineExceeded=4]="DeadlineExceeded",n[n.NotFound=5]="NotFound",n[n.AlreadyExists=6]="AlreadyExists",n[n.PermissionDenied=7]="PermissionDenied",n[n.ResourceExhausted=8]="ResourceExhausted",n[n.FailedPrecondition=9]="FailedPrecondition",n[n.Aborted=10]="Aborted",n[n.OutOfRange=11]="OutOfRange",n[n.Unimplemented=12]="Unimplemented",n[n.Internal=13]="Internal",n[n.Unavailable=14]="Unavailable",n[n.DataLoss=15]="DataLoss",n[n.Unauthenticated=16]="Unauthenticated"})(_t||(_t={}));function eS(n){const t=_t[n];return typeof t!="string"?n.toString():t[0].toLowerCase()+t.substring(1).replace(/[A-Z]/g,e=>"_"+e.toLowerCase())}class Gt extends Error{constructor(t,e=_t.Unknown,i,a,l){super(fN(t,e)),this.name="ConnectError",Object.setPrototypeOf(this,new.target.prototype),this.rawMessage=t,this.code=e,this.metadata=new Headers(i??{}),this.details=a??[],this.cause=l}static from(t,e=_t.Unknown){return t instanceof Gt?t:t instanceof Error?t.name=="AbortError"?new Gt(t.message,_t.Canceled):new Gt(t.message,e,void 0,void 0,t):new Gt(String(t),e,void 0,void 0,t)}static[Symbol.hasInstance](t){return t instanceof Error?Object.getPrototypeOf(t)===Gt.prototype?!0:t.name==="ConnectError"&&"code"in t&&typeof t.code=="number"&&"metadata"in t&&"details"in t&&Array.isArray(t.details)&&"rawMessage"in t&&typeof t.rawMessage=="string"&&"cause"in t:!1}findDetails(t){const e="typeName"in t?{findMessage:a=>a===t.typeName?t:void 0}:t,i=[];for(const a of this.details){if("getType"in a){e.findMessage(a.getType().typeName)&&i.push(a);continue}const l=e.findMessage(a.type);if(l)try{i.push(l.fromBinary(a.value))}catch{}}return i}}function fN(n,t){return n.length?`[${eS(t)}] ${n}`:`[${eS(t)}]`}function de(n,t){if(!n)throw new Error(t)}const dN=34028234663852886e22,hN=-34028234663852886e22,gN=4294967295,mN=2147483647,yN=-2147483648;function _f(n){if(typeof n!="number")throw new Error("invalid int 32: "+typeof n);if(!Number.isInteger(n)||n>mN||n<yN)throw new Error("invalid int 32: "+n)}function qm(n){if(typeof n!="number")throw new Error("invalid uint 32: "+typeof n);if(!Number.isInteger(n)||n>gN||n<0)throw new Error("invalid uint 32: "+n)}function e1(n){if(typeof n!="number")throw new Error("invalid float 32: "+typeof n);if(Number.isFinite(n)&&(n>dN||n<hN))throw new Error("invalid float 32: "+n)}const n1=Symbol("@bufbuild/protobuf/enum-type");function pN(n){const t=n[n1];return de(t,"missing enum type on enum object"),t}function r1(n,t,e,i){n[n1]=i1(t,e.map(a=>({no:a.no,name:a.name,localName:n[a.no]})))}function i1(n,t,e){const i=Object.create(null),a=Object.create(null),l=[];for(const c of t){const d=s1(c);l.push(d),i[c.name]=d,a[c.no]=d}return{typeName:n,values:l,findName(c){return i[c]},findNumber(c){return a[c]}}}function vN(n,t,e){const i={};for(const a of t){const l=s1(a);i[l.localName]=l.no,i[l.no]=l.localName}return r1(i,n,t),i}function s1(n){return"localName"in n?n:Object.assign(Object.assign({},n),{localName:n.name})}class mt{equals(t){return this.getType().runtime.util.equals(this.getType(),this,t)}clone(){return this.getType().runtime.util.clone(this)}fromBinary(t,e){const i=this.getType(),a=i.runtime.bin,l=a.makeReadOptions(e);return a.readMessage(this,l.readerFactory(t),t.byteLength,l),this}fromJson(t,e){const i=this.getType(),a=i.runtime.json,l=a.makeReadOptions(e);return a.readMessage(i,t,l,this),this}fromJsonString(t,e){let i;try{i=JSON.parse(t)}catch(a){throw new Error(`cannot decode ${this.getType().typeName} from JSON: ${a instanceof Error?a.message:String(a)}`)}return this.fromJson(i,e)}toBinary(t){const e=this.getType(),i=e.runtime.bin,a=i.makeWriteOptions(t),l=a.writerFactory();return i.writeMessage(this,l,a),l.finish()}toJson(t){const e=this.getType(),i=e.runtime.json,a=i.makeWriteOptions(t);return i.writeMessage(this,a)}toJsonString(t){var e;const i=this.toJson(t);return JSON.stringify(i,null,(e=t==null?void 0:t.prettySpaces)!==null&&e!==void 0?e:0)}toJSON(){return this.toJson({emitDefaultValues:!0})}getType(){return Object.getPrototypeOf(this).constructor}}function wN(n,t,e,i){var a;const l=(a=i==null?void 0:i.localName)!==null&&a!==void 0?a:t.substring(t.lastIndexOf(".")+1),c={[l]:function(d){n.util.initFields(this),n.util.initPartial(d,this)}}[l];return Object.setPrototypeOf(c.prototype,new mt),Object.assign(c,{runtime:n,typeName:t,fields:n.util.newFieldList(e),fromBinary(d,h){return new c().fromBinary(d,h)},fromJson(d,h){return new c().fromJson(d,h)},fromJsonString(d,h){return new c().fromJsonString(d,h)},equals(d,h){return n.util.equals(c,d,h)}}),c}function SN(){let n=0,t=0;for(let i=0;i<28;i+=7){let a=this.buf[this.pos++];if(n|=(a&127)<<i,(a&128)==0)return this.assertBounds(),[n,t]}let e=this.buf[this.pos++];if(n|=(e&15)<<28,t=(e&112)>>4,(e&128)==0)return this.assertBounds(),[n,t];for(let i=3;i<=31;i+=7){let a=this.buf[this.pos++];if(t|=(a&127)<<i,(a&128)==0)return this.assertBounds(),[n,t]}throw new Error("invalid varint")}function pm(n,t,e){for(let l=0;l<28;l=l+7){const c=n>>>l,d=!(!(c>>>7)&&t==0),h=(d?c|128:c)&255;if(e.push(h),!d)return}const i=n>>>28&15|(t&7)<<4,a=t>>3!=0;if(e.push((a?i|128:i)&255),!!a){for(let l=3;l<31;l=l+7){const c=t>>>l,d=!!(c>>>7),h=(d?c|128:c)&255;if(e.push(h),!d)return}e.push(t>>>31&1)}}const Uf=4294967296;function nS(n){const t=n[0]==="-";t&&(n=n.slice(1));const e=1e6;let i=0,a=0;function l(c,d){const h=Number(n.slice(c,d));a*=e,i=i*e+h,i>=Uf&&(a=a+(i/Uf|0),i=i%Uf)}return l(-24,-18),l(-18,-12),l(-12,-6),l(-6),t?o1(i,a):Iy(i,a)}function bN(n,t){let e=Iy(n,t);const i=e.hi&2147483648;i&&(e=o1(e.lo,e.hi));const a=a1(e.lo,e.hi);return i?"-"+a:a}function a1(n,t){if({lo:n,hi:t}=xN(n,t),t<=2097151)return String(Uf*t+n);const e=n&16777215,i=(n>>>24|t<<8)&16777215,a=t>>16&65535;let l=e+i*6777216+a*6710656,c=i+a*8147497,d=a*2;const h=1e7;return l>=h&&(c+=Math.floor(l/h),l%=h),c>=h&&(d+=Math.floor(c/h),c%=h),d.toString()+rS(c)+rS(l)}function xN(n,t){return{lo:n>>>0,hi:t>>>0}}function Iy(n,t){return{lo:n|0,hi:t|0}}function o1(n,t){return t=~t,n?n=~n+1:t+=1,Iy(n,t)}const rS=n=>{const t=String(n);return"0000000".slice(t.length)+t};function iS(n,t){if(n>=0){for(;n>127;)t.push(n&127|128),n=n>>>7;t.push(n)}else{for(let e=0;e<9;e++)t.push(n&127|128),n=n>>7;t.push(1)}}function TN(){let n=this.buf[this.pos++],t=n&127;if((n&128)==0)return this.assertBounds(),t;if(n=this.buf[this.pos++],t|=(n&127)<<7,(n&128)==0)return this.assertBounds(),t;if(n=this.buf[this.pos++],t|=(n&127)<<14,(n&128)==0)return this.assertBounds(),t;if(n=this.buf[this.pos++],t|=(n&127)<<21,(n&128)==0)return this.assertBounds(),t;n=this.buf[this.pos++],t|=(n&15)<<28;for(let e=5;(n&128)!==0&&e<10;e++)n=this.buf[this.pos++];if((n&128)!=0)throw new Error("invalid varint");return this.assertBounds(),t>>>0}var sS={};function AN(){const n=new DataView(new ArrayBuffer(8));if(typeof BigInt=="function"&&typeof n.getBigInt64=="function"&&typeof n.getBigUint64=="function"&&typeof n.setBigInt64=="function"&&typeof n.setBigUint64=="function"&&(typeof process!="object"||typeof sS!="object"||sS.BUF_BIGINT_DISABLE!=="1")){const a=BigInt("-9223372036854775808"),l=BigInt("9223372036854775807"),c=BigInt("0"),d=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(h){const g=typeof h=="bigint"?h:BigInt(h);if(g>l||g<a)throw new Error(`int64 invalid: ${h}`);return g},uParse(h){const g=typeof h=="bigint"?h:BigInt(h);if(g>d||g<c)throw new Error(`uint64 invalid: ${h}`);return g},enc(h){return n.setBigInt64(0,this.parse(h),!0),{lo:n.getInt32(0,!0),hi:n.getInt32(4,!0)}},uEnc(h){return n.setBigInt64(0,this.uParse(h),!0),{lo:n.getInt32(0,!0),hi:n.getInt32(4,!0)}},dec(h,g){return n.setInt32(0,h,!0),n.setInt32(4,g,!0),n.getBigInt64(0,!0)},uDec(h,g){return n.setInt32(0,h,!0),n.setInt32(4,g,!0),n.getBigUint64(0,!0)}}}const e=a=>de(/^-?[0-9]+$/.test(a),`int64 invalid: ${a}`),i=a=>de(/^[0-9]+$/.test(a),`uint64 invalid: ${a}`);return{zero:"0",supported:!1,parse(a){return typeof a!="string"&&(a=a.toString()),e(a),a},uParse(a){return typeof a!="string"&&(a=a.toString()),i(a),a},enc(a){return typeof a!="string"&&(a=a.toString()),e(a),nS(a)},uEnc(a){return typeof a!="string"&&(a=a.toString()),i(a),nS(a)},dec(a,l){return bN(a,l)},uDec(a,l){return a1(a,l)}}}const re=AN();var it;(function(n){n[n.DOUBLE=1]="DOUBLE",n[n.FLOAT=2]="FLOAT",n[n.INT64=3]="INT64",n[n.UINT64=4]="UINT64",n[n.INT32=5]="INT32",n[n.FIXED64=6]="FIXED64",n[n.FIXED32=7]="FIXED32",n[n.BOOL=8]="BOOL",n[n.STRING=9]="STRING",n[n.BYTES=12]="BYTES",n[n.UINT32=13]="UINT32",n[n.SFIXED32=15]="SFIXED32",n[n.SFIXED64=16]="SFIXED64",n[n.SINT32=17]="SINT32",n[n.SINT64=18]="SINT64"})(it||(it={}));var na;(function(n){n[n.BIGINT=0]="BIGINT",n[n.STRING=1]="STRING"})(na||(na={}));function Hs(n,t,e){if(t===e)return!0;if(n==it.BYTES){if(!(t instanceof Uint8Array)||!(e instanceof Uint8Array)||t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0}switch(n){case it.UINT64:case it.FIXED64:case it.INT64:case it.SFIXED64:case it.SINT64:return t==e}return!1}function $o(n,t){switch(n){case it.BOOL:return!1;case it.UINT64:case it.FIXED64:case it.INT64:case it.SFIXED64:case it.SINT64:return t==0?re.zero:"0";case it.DOUBLE:case it.FLOAT:return 0;case it.BYTES:return new Uint8Array(0);case it.STRING:return"";default:return 0}}function l1(n,t){switch(n){case it.BOOL:return t===!1;case it.STRING:return t==="";case it.BYTES:return t instanceof Uint8Array&&!t.byteLength;default:return t==0}}var pe;(function(n){n[n.Varint=0]="Varint",n[n.Bit64=1]="Bit64",n[n.LengthDelimited=2]="LengthDelimited",n[n.StartGroup=3]="StartGroup",n[n.EndGroup=4]="EndGroup",n[n.Bit32=5]="Bit32"})(pe||(pe={}));class EN{constructor(t){this.stack=[],this.textEncoder=t??new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let t=0;for(let a=0;a<this.chunks.length;a++)t+=this.chunks[a].length;let e=new Uint8Array(t),i=0;for(let a=0;a<this.chunks.length;a++)e.set(this.chunks[a],i),i+=this.chunks[a].length;return this.chunks=[],e}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let t=this.finish(),e=this.stack.pop();if(!e)throw new Error("invalid state, fork stack empty");return this.chunks=e.chunks,this.buf=e.buf,this.uint32(t.byteLength),this.raw(t)}tag(t,e){return this.uint32((t<<3|e)>>>0)}raw(t){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(t),this}uint32(t){for(qm(t);t>127;)this.buf.push(t&127|128),t=t>>>7;return this.buf.push(t),this}int32(t){return _f(t),iS(t,this.buf),this}bool(t){return this.buf.push(t?1:0),this}bytes(t){return this.uint32(t.byteLength),this.raw(t)}string(t){let e=this.textEncoder.encode(t);return this.uint32(e.byteLength),this.raw(e)}float(t){e1(t);let e=new Uint8Array(4);return new DataView(e.buffer).setFloat32(0,t,!0),this.raw(e)}double(t){let e=new Uint8Array(8);return new DataView(e.buffer).setFloat64(0,t,!0),this.raw(e)}fixed32(t){qm(t);let e=new Uint8Array(4);return new DataView(e.buffer).setUint32(0,t,!0),this.raw(e)}sfixed32(t){_f(t);let e=new Uint8Array(4);return new DataView(e.buffer).setInt32(0,t,!0),this.raw(e)}sint32(t){return _f(t),t=(t<<1^t>>31)>>>0,iS(t,this.buf),this}sfixed64(t){let e=new Uint8Array(8),i=new DataView(e.buffer),a=re.enc(t);return i.setInt32(0,a.lo,!0),i.setInt32(4,a.hi,!0),this.raw(e)}fixed64(t){let e=new Uint8Array(8),i=new DataView(e.buffer),a=re.uEnc(t);return i.setInt32(0,a.lo,!0),i.setInt32(4,a.hi,!0),this.raw(e)}int64(t){let e=re.enc(t);return pm(e.lo,e.hi,this.buf),this}sint64(t){let e=re.enc(t),i=e.hi>>31,a=e.lo<<1^i,l=(e.hi<<1|e.lo>>>31)^i;return pm(a,l,this.buf),this}uint64(t){let e=re.uEnc(t);return pm(e.lo,e.hi,this.buf),this}}class NN{constructor(t,e){this.varint64=SN,this.uint32=TN,this.buf=t,this.len=t.length,this.pos=0,this.view=new DataView(t.buffer,t.byteOffset,t.byteLength),this.textDecoder=e??new TextDecoder}tag(){let t=this.uint32(),e=t>>>3,i=t&7;if(e<=0||i<0||i>5)throw new Error("illegal tag: field no "+e+" wire type "+i);return[e,i]}skip(t,e){let i=this.pos;switch(t){case pe.Varint:for(;this.buf[this.pos++]&128;);break;case pe.Bit64:this.pos+=4;case pe.Bit32:this.pos+=4;break;case pe.LengthDelimited:let a=this.uint32();this.pos+=a;break;case pe.StartGroup:for(;;){const[l,c]=this.tag();if(c===pe.EndGroup){if(e!==void 0&&l!==e)throw new Error("invalid end group tag");break}this.skip(c,l)}break;default:throw new Error("cant skip wire type "+t)}return this.assertBounds(),this.buf.subarray(i,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let t=this.uint32();return t>>>1^-(t&1)}int64(){return re.dec(...this.varint64())}uint64(){return re.uDec(...this.varint64())}sint64(){let[t,e]=this.varint64(),i=-(t&1);return t=(t>>>1|(e&1)<<31)^i,e=e>>>1^i,re.dec(t,e)}bool(){let[t,e]=this.varint64();return t!==0||e!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return re.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return re.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let t=this.uint32(),e=this.pos;return this.pos+=t,this.assertBounds(),this.buf.subarray(e,e+t)}string(){return this.textDecoder.decode(this.bytes())}}function DN(n,t,e,i){let a;return{typeName:t,extendee:e,get field(){if(!a){const l=typeof i=="function"?i():i;l.name=t.split(".").pop(),l.jsonName=`[${t}]`,a=n.util.newFieldList([l]).list()[0]}return a},runtime:n}}function u1(n){const t=n.field.localName,e=Object.create(null);return e[t]=CN(n),[e,()=>e[t]]}function CN(n){const t=n.field;if(t.repeated)return[];if(t.default!==void 0)return t.default;switch(t.kind){case"enum":return t.T.values[0].no;case"scalar":return $o(t.T,t.L);case"message":const e=t.T,i=new e;return e.fieldWrapper?e.fieldWrapper.unwrapField(i):i;case"map":throw"map fields are not allowed to be extensions"}}function kN(n,t){if(!t.repeated&&(t.kind=="enum"||t.kind=="scalar")){for(let e=n.length-1;e>=0;--e)if(n[e].no==t.no)return[n[e]];return[]}return n.filter(e=>e.no===t.no)}let Wi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),Md=[];for(let n=0;n<Wi.length;n++)Md[Wi[n].charCodeAt(0)]=n;Md[45]=Wi.indexOf("+");Md[95]=Wi.indexOf("/");const Ry={dec(n){let t=n.length*3/4;n[n.length-2]=="="?t-=2:n[n.length-1]=="="&&(t-=1);let e=new Uint8Array(t),i=0,a=0,l,c=0;for(let d=0;d<n.length;d++){if(l=Md[n.charCodeAt(d)],l===void 0)switch(n[d]){case"=":a=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(a){case 0:c=l,a=1;break;case 1:e[i++]=c<<2|(l&48)>>4,c=l,a=2;break;case 2:e[i++]=(c&15)<<4|(l&60)>>2,c=l,a=3;break;case 3:e[i++]=(c&3)<<6|l,a=0;break}}if(a==1)throw Error("invalid base64 string.");return e.subarray(0,i)},enc(n){let t="",e=0,i,a=0;for(let l=0;l<n.length;l++)switch(i=n[l],e){case 0:t+=Wi[i>>2],a=(i&3)<<4,e=1;break;case 1:t+=Wi[a|i>>4],a=(i&15)<<2,e=2;break;case 2:t+=Wi[a|i>>6],t+=Wi[i&63],e=0;break}return e&&(t+=Wi[a],t+="=",e==1&&(t+="=")),t}};function ON(n,t,e){f1(t,n);const i=t.runtime.bin.makeReadOptions(e),a=kN(n.getType().runtime.bin.listUnknownFields(n),t.field),[l,c]=u1(t);for(const d of a)t.runtime.bin.readField(l,i.readerFactory(d.data),t.field,d.wireType,i);return c()}function IN(n,t,e,i){f1(t,n);const a=t.runtime.bin.makeReadOptions(i),l=t.runtime.bin.makeWriteOptions(i);if(c1(n,t)){const g=n.getType().runtime.bin.listUnknownFields(n).filter(y=>y.no!=t.field.no);n.getType().runtime.bin.discardUnknownFields(n);for(const y of g)n.getType().runtime.bin.onUnknownField(n,y.no,y.wireType,y.data)}const c=l.writerFactory();let d=t.field;!d.opt&&!d.repeated&&(d.kind=="enum"||d.kind=="scalar")&&(d=Object.assign(Object.assign({},t.field),{opt:!0})),t.runtime.bin.writeField(d,e,c,l);const h=a.readerFactory(c.finish());for(;h.pos<h.len;){const[g,y]=h.tag(),w=h.skip(y,g);n.getType().runtime.bin.onUnknownField(n,g,y,w)}}function c1(n,t){const e=n.getType();return t.extendee.typeName===e.typeName&&!!e.runtime.bin.listUnknownFields(n).find(i=>i.no==t.field.no)}function f1(n,t){de(n.extendee.typeName==t.getType().typeName,`extension ${n.typeName} can only be applied to message ${n.extendee.typeName}`)}function d1(n,t){const e=n.localName;if(n.repeated)return t[e].length>0;if(n.oneof)return t[n.oneof.localName].case===e;switch(n.kind){case"enum":case"scalar":return n.opt||n.req?t[e]!==void 0:n.kind=="enum"?t[e]!==n.T.values[0].no:!l1(n.T,t[e]);case"message":return t[e]!==void 0;case"map":return Object.keys(t[e]).length>0}}function aS(n,t){const e=n.localName,i=!n.opt&&!n.req;if(n.repeated)t[e]=[];else if(n.oneof)t[n.oneof.localName]={case:void 0};else switch(n.kind){case"map":t[e]={};break;case"enum":t[e]=i?n.T.values[0].no:void 0;break;case"scalar":t[e]=i?$o(n.T,n.L):void 0;break;case"message":t[e]=void 0;break}}function Ia(n,t){if(n===null||typeof n!="object"||!Object.getOwnPropertyNames(mt.prototype).every(i=>i in n&&typeof n[i]=="function"))return!1;const e=n.getType();return e===null||typeof e!="function"||!("typeName"in e)||typeof e.typeName!="string"?!1:t===void 0?!0:e.typeName==t.typeName}function h1(n,t){return Ia(t)||!n.fieldWrapper?t:n.fieldWrapper.wrapField(t)}it.DOUBLE,it.FLOAT,it.INT64,it.UINT64,it.INT32,it.UINT32,it.BOOL,it.STRING,it.BYTES;const oS={ignoreUnknownFields:!1},lS={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0};function RN(n){return n?Object.assign(Object.assign({},oS),n):oS}function MN(n){return n?Object.assign(Object.assign({},lS),n):lS}const Xf=Symbol(),qf=Symbol();function BN(){return{makeReadOptions:RN,makeWriteOptions:MN,readMessage(n,t,e,i){if(t==null||Array.isArray(t)||typeof t!="object")throw new Error(`cannot decode message ${n.typeName} from JSON: ${cr(t)}`);i=i??new n;const a=new Map,l=e.typeRegistry;for(const[c,d]of Object.entries(t)){const h=n.fields.findJsonName(c);if(h){if(h.oneof){if(d===null&&h.kind=="scalar")continue;const g=a.get(h.oneof);if(g!==void 0)throw new Error(`cannot decode message ${n.typeName} from JSON: multiple keys for oneof "${h.oneof.name}" present: "${g}", "${c}"`);a.set(h.oneof,c)}uS(i,d,h,e,n)}else{let g=!1;if(l!=null&&l.findExtension&&c.startsWith("[")&&c.endsWith("]")){const y=l.findExtension(c.substring(1,c.length-1));if(y&&y.extendee.typeName==n.typeName){g=!0;const[w,v]=u1(y);uS(w,d,y.field,e,y),IN(i,y,v(),e)}}if(!g&&!e.ignoreUnknownFields)throw new Error(`cannot decode message ${n.typeName} from JSON: key "${c}" is unknown`)}}return i},writeMessage(n,t){const e=n.getType(),i={};let a;try{for(a of e.fields.byNumber()){if(!d1(a,n)){if(a.req)throw"required field not set";if(!t.emitDefaultValues||!LN(a))continue}const c=a.oneof?n[a.oneof.localName].value:n[a.localName],d=cS(a,c,t);d!==void 0&&(i[t.useProtoFieldName?a.name:a.jsonName]=d)}const l=t.typeRegistry;if(l!=null&&l.findExtensionFor)for(const c of e.runtime.bin.listUnknownFields(n)){const d=l.findExtensionFor(e.typeName,c.no);if(d&&c1(n,d)){const h=ON(n,d,t),g=cS(d.field,h,t);g!==void 0&&(i[d.field.jsonName]=g)}}}catch(l){const c=a?`cannot encode field ${e.typeName}.${a.name} to JSON`:`cannot encode message ${e.typeName} to JSON`,d=l instanceof Error?l.message:String(l);throw new Error(c+(d.length>0?`: ${d}`:""))}return i},readScalar(n,t,e){return wu(n,t,e??na.BIGINT,!0)},writeScalar(n,t,e){if(t!==void 0&&(e||l1(n,t)))return Pf(n,t)},debug:cr}}function cr(n){if(n===null)return"null";switch(typeof n){case"object":return Array.isArray(n)?"array":"object";case"string":return n.length>100?"string":`"${n.split('"').join('\\"')}"`;default:return String(n)}}function uS(n,t,e,i,a){let l=e.localName;if(e.repeated){if(de(e.kind!="map"),t===null)return;if(!Array.isArray(t))throw new Error(`cannot decode field ${a.typeName}.${e.name} from JSON: ${cr(t)}`);const c=n[l];for(const d of t){if(d===null)throw new Error(`cannot decode field ${a.typeName}.${e.name} from JSON: ${cr(d)}`);switch(e.kind){case"message":c.push(e.T.fromJson(d,i));break;case"enum":const h=vm(e.T,d,i.ignoreUnknownFields,!0);h!==qf&&c.push(h);break;case"scalar":try{c.push(wu(e.T,d,e.L,!0))}catch(g){let y=`cannot decode field ${a.typeName}.${e.name} from JSON: ${cr(d)}`;throw g instanceof Error&&g.message.length>0&&(y+=`: ${g.message}`),new Error(y)}break}}}else if(e.kind=="map"){if(t===null)return;if(typeof t!="object"||Array.isArray(t))throw new Error(`cannot decode field ${a.typeName}.${e.name} from JSON: ${cr(t)}`);const c=n[l];for(const[d,h]of Object.entries(t)){if(h===null)throw new Error(`cannot decode field ${a.typeName}.${e.name} from JSON: map value null`);let g;try{g=zN(e.K,d)}catch(y){let w=`cannot decode map key for field ${a.typeName}.${e.name} from JSON: ${cr(t)}`;throw y instanceof Error&&y.message.length>0&&(w+=`: ${y.message}`),new Error(w)}switch(e.V.kind){case"message":c[g]=e.V.T.fromJson(h,i);break;case"enum":const y=vm(e.V.T,h,i.ignoreUnknownFields,!0);y!==qf&&(c[g]=y);break;case"scalar":try{c[g]=wu(e.V.T,h,na.BIGINT,!0)}catch(w){let v=`cannot decode map value for field ${a.typeName}.${e.name} from JSON: ${cr(t)}`;throw w instanceof Error&&w.message.length>0&&(v+=`: ${w.message}`),new Error(v)}break}}}else switch(e.oneof&&(n=n[e.oneof.localName]={case:l},l="value"),e.kind){case"message":const c=e.T;if(t===null&&c.typeName!="google.protobuf.Value")return;let d=n[l];Ia(d)?d.fromJson(t,i):(n[l]=d=c.fromJson(t,i),c.fieldWrapper&&!e.oneof&&(n[l]=c.fieldWrapper.unwrapField(d)));break;case"enum":const h=vm(e.T,t,i.ignoreUnknownFields,!1);switch(h){case Xf:aS(e,n);break;case qf:break;default:n[l]=h;break}break;case"scalar":try{const g=wu(e.T,t,e.L,!1);switch(g){case Xf:aS(e,n);break;default:n[l]=g;break}}catch(g){let y=`cannot decode field ${a.typeName}.${e.name} from JSON: ${cr(t)}`;throw g instanceof Error&&g.message.length>0&&(y+=`: ${g.message}`),new Error(y)}break}}function zN(n,t){if(n===it.BOOL)switch(t){case"true":t=!0;break;case"false":t=!1;break}return wu(n,t,na.BIGINT,!0).toString()}function wu(n,t,e,i){if(t===null)return i?$o(n,e):Xf;switch(n){case it.DOUBLE:case it.FLOAT:if(t==="NaN")return Number.NaN;if(t==="Infinity")return Number.POSITIVE_INFINITY;if(t==="-Infinity")return Number.NEGATIVE_INFINITY;if(t===""||typeof t=="string"&&t.trim().length!==t.length||typeof t!="string"&&typeof t!="number")break;const a=Number(t);if(Number.isNaN(a)||!Number.isFinite(a))break;return n==it.FLOAT&&e1(a),a;case it.INT32:case it.FIXED32:case it.SFIXED32:case it.SINT32:case it.UINT32:let l;if(typeof t=="number"?l=t:typeof t=="string"&&t.length>0&&t.trim().length===t.length&&(l=Number(t)),l===void 0)break;return n==it.UINT32||n==it.FIXED32?qm(l):_f(l),l;case it.INT64:case it.SFIXED64:case it.SINT64:if(typeof t!="number"&&typeof t!="string")break;const c=re.parse(t);return e?c.toString():c;case it.FIXED64:case it.UINT64:if(typeof t!="number"&&typeof t!="string")break;const d=re.uParse(t);return e?d.toString():d;case it.BOOL:if(typeof t!="boolean")break;return t;case it.STRING:if(typeof t!="string")break;try{encodeURIComponent(t)}catch{throw new Error("invalid UTF8")}return t;case it.BYTES:if(t==="")return new Uint8Array(0);if(typeof t!="string")break;return Ry.dec(t)}throw new Error}function vm(n,t,e,i){if(t===null)return n.typeName=="google.protobuf.NullValue"?0:i?n.values[0].no:Xf;switch(typeof t){case"number":if(Number.isInteger(t))return t;break;case"string":const a=n.findName(t);if(a!==void 0)return a.no;if(e)return qf;break}throw new Error(`cannot decode enum ${n.typeName} from JSON: ${cr(t)}`)}function LN(n){return n.repeated||n.kind=="map"?!0:!(n.oneof||n.kind=="message"||n.opt||n.req)}function cS(n,t,e){if(n.kind=="map"){de(typeof t=="object"&&t!=null);const i={},a=Object.entries(t);switch(n.V.kind){case"scalar":for(const[c,d]of a)i[c.toString()]=Pf(n.V.T,d);break;case"message":for(const[c,d]of a)i[c.toString()]=d.toJson(e);break;case"enum":const l=n.V.T;for(const[c,d]of a)i[c.toString()]=wm(l,d,e.enumAsInteger);break}return e.emitDefaultValues||a.length>0?i:void 0}if(n.repeated){de(Array.isArray(t));const i=[];switch(n.kind){case"scalar":for(let a=0;a<t.length;a++)i.push(Pf(n.T,t[a]));break;case"enum":for(let a=0;a<t.length;a++)i.push(wm(n.T,t[a],e.enumAsInteger));break;case"message":for(let a=0;a<t.length;a++)i.push(t[a].toJson(e));break}return e.emitDefaultValues||i.length>0?i:void 0}switch(n.kind){case"scalar":return Pf(n.T,t);case"enum":return wm(n.T,t,e.enumAsInteger);case"message":return h1(n.T,t).toJson(e)}}function wm(n,t,e){var i;if(de(typeof t=="number"),n.typeName=="google.protobuf.NullValue")return null;if(e)return t;const a=n.findNumber(t);return(i=a==null?void 0:a.name)!==null&&i!==void 0?i:t}function Pf(n,t){switch(n){case it.INT32:case it.SFIXED32:case it.SINT32:case it.FIXED32:case it.UINT32:return de(typeof t=="number"),t;case it.FLOAT:case it.DOUBLE:return de(typeof t=="number"),Number.isNaN(t)?"NaN":t===Number.POSITIVE_INFINITY?"Infinity":t===Number.NEGATIVE_INFINITY?"-Infinity":t;case it.STRING:return de(typeof t=="string"),t;case it.BOOL:return de(typeof t=="boolean"),t;case it.UINT64:case it.FIXED64:case it.INT64:case it.SFIXED64:case it.SINT64:return de(typeof t=="bigint"||typeof t=="string"||typeof t=="number"),t.toString();case it.BYTES:return de(t instanceof Uint8Array),Ry.enc(t)}}const Oo=Symbol("@bufbuild/protobuf/unknown-fields"),fS={readUnknownFields:!0,readerFactory:n=>new NN(n)},dS={writeUnknownFields:!0,writerFactory:()=>new EN};function _N(n){return n?Object.assign(Object.assign({},fS),n):fS}function UN(n){return n?Object.assign(Object.assign({},dS),n):dS}function qN(){return{makeReadOptions:_N,makeWriteOptions:UN,listUnknownFields(n){var t;return(t=n[Oo])!==null&&t!==void 0?t:[]},discardUnknownFields(n){delete n[Oo]},writeUnknownFields(n,t){const i=n[Oo];if(i)for(const a of i)t.tag(a.no,a.wireType).raw(a.data)},onUnknownField(n,t,e,i){const a=n;Array.isArray(a[Oo])||(a[Oo]=[]),a[Oo].push({no:t,wireType:e,data:i})},readMessage(n,t,e,i,a){const l=n.getType(),c=a?t.len:t.pos+e;let d,h;for(;t.pos<c&&([d,h]=t.tag(),!(a===!0&&h==pe.EndGroup));){const g=l.fields.find(d);if(!g){const y=t.skip(h,d);i.readUnknownFields&&this.onUnknownField(n,d,h,y);continue}hS(n,t,g,h,i)}if(a&&(h!=pe.EndGroup||d!==e))throw new Error("invalid end group tag")},readField:hS,writeMessage(n,t,e){const i=n.getType();for(const a of i.fields.byNumber()){if(!d1(a,n)){if(a.req)throw new Error(`cannot encode field ${i.typeName}.${a.name} to binary: required field not set`);continue}const l=a.oneof?n[a.oneof.localName].value:n[a.localName];gS(a,l,t,e)}return e.writeUnknownFields&&this.writeUnknownFields(n,t),t},writeField(n,t,e,i){t!==void 0&&gS(n,t,e,i)}}}function hS(n,t,e,i,a){let{repeated:l,localName:c}=e;switch(e.oneof&&(n=n[e.oneof.localName],n.case!=c&&delete n.value,n.case=c,c="value"),e.kind){case"scalar":case"enum":const d=e.kind=="enum"?it.INT32:e.T;let h=Kf;if(e.kind=="scalar"&&e.L>0&&(h=JN),l){let v=n[c];if(i==pe.LengthDelimited&&d!=it.STRING&&d!=it.BYTES){let x=t.uint32()+t.pos;for(;t.pos<x;)v.push(h(t,d))}else v.push(h(t,d))}else n[c]=h(t,d);break;case"message":const g=e.T;l?n[c].push(Jf(t,new g,a,e)):Ia(n[c])?Jf(t,n[c],a,e):(n[c]=Jf(t,new g,a,e),g.fieldWrapper&&!e.oneof&&!e.repeated&&(n[c]=g.fieldWrapper.unwrapField(n[c])));break;case"map":let[y,w]=PN(e,t,a);n[c][y]=w;break}}function Jf(n,t,e,i){const a=t.getType().runtime.bin,l=i==null?void 0:i.delimited;return a.readMessage(t,n,l?i.no:n.uint32(),e,l),t}function PN(n,t,e){const i=t.uint32(),a=t.pos+i;let l,c;for(;t.pos<a;){const[d]=t.tag();switch(d){case 1:l=Kf(t,n.K);break;case 2:switch(n.V.kind){case"scalar":c=Kf(t,n.V.T);break;case"enum":c=t.int32();break;case"message":c=Jf(t,new n.V.T,e,void 0);break}break}}if(l===void 0&&(l=$o(n.K,na.BIGINT)),typeof l!="string"&&typeof l!="number"&&(l=l.toString()),c===void 0)switch(n.V.kind){case"scalar":c=$o(n.V.T,na.BIGINT);break;case"enum":c=n.V.T.values[0].no;break;case"message":c=new n.V.T;break}return[l,c]}function JN(n,t){const e=Kf(n,t);return typeof e=="bigint"?e.toString():e}function Kf(n,t){switch(t){case it.STRING:return n.string();case it.BOOL:return n.bool();case it.DOUBLE:return n.double();case it.FLOAT:return n.float();case it.INT32:return n.int32();case it.INT64:return n.int64();case it.UINT64:return n.uint64();case it.FIXED64:return n.fixed64();case it.BYTES:return n.bytes();case it.FIXED32:return n.fixed32();case it.SFIXED32:return n.sfixed32();case it.SFIXED64:return n.sfixed64();case it.SINT64:return n.sint64();case it.UINT32:return n.uint32();case it.SINT32:return n.sint32()}}function gS(n,t,e,i){de(t!==void 0);const a=n.repeated;switch(n.kind){case"scalar":case"enum":let l=n.kind=="enum"?it.INT32:n.T;if(a)if(de(Array.isArray(t)),n.packed)$N(e,l,n.no,t);else for(const c of t)Su(e,l,n.no,c);else Su(e,l,n.no,t);break;case"message":if(a){de(Array.isArray(t));for(const c of t)mS(e,i,n,c)}else mS(e,i,n,t);break;case"map":de(typeof t=="object"&&t!=null);for(const[c,d]of Object.entries(t))HN(e,i,n,c,d);break}}function HN(n,t,e,i,a){n.tag(e.no,pe.LengthDelimited),n.fork();let l=i;switch(e.K){case it.INT32:case it.FIXED32:case it.UINT32:case it.SFIXED32:case it.SINT32:l=Number.parseInt(i);break;case it.BOOL:de(i=="true"||i=="false"),l=i=="true";break}switch(Su(n,e.K,1,l),e.V.kind){case"scalar":Su(n,e.V.T,2,a);break;case"enum":Su(n,it.INT32,2,a);break;case"message":de(a!==void 0),n.tag(2,pe.LengthDelimited).bytes(a.toBinary(t));break}n.join()}function mS(n,t,e,i){const a=h1(e.T,i);e.delimited?n.tag(e.no,pe.StartGroup).raw(a.toBinary(t)).tag(e.no,pe.EndGroup):n.tag(e.no,pe.LengthDelimited).bytes(a.toBinary(t))}function Su(n,t,e,i){de(i!==void 0);let[a,l]=g1(t);n.tag(e,a)[l](i)}function $N(n,t,e,i){if(!i.length)return;n.tag(e,pe.LengthDelimited).fork();let[,a]=g1(t);for(let l=0;l<i.length;l++)n[a](i[l]);n.join()}function g1(n){let t=pe.Varint;switch(n){case it.BYTES:case it.STRING:t=pe.LengthDelimited;break;case it.DOUBLE:case it.FIXED64:case it.SFIXED64:t=pe.Bit64;break;case it.FIXED32:case it.SFIXED32:case it.FLOAT:t=pe.Bit32;break}const e=it[n].toLowerCase();return[t,e]}function VN(){return{setEnumType:r1,initPartial(n,t){if(n===void 0)return;const e=t.getType();for(const i of e.fields.byMember()){const a=i.localName,l=t,c=n;if(c[a]!=null)switch(i.kind){case"oneof":const d=c[a].case;if(d===void 0)continue;const h=i.findField(d);let g=c[a].value;h&&h.kind=="message"&&!Ia(g,h.T)?g=new h.T(g):h&&h.kind==="scalar"&&h.T===it.BYTES&&(g=fu(g)),l[a]={case:d,value:g};break;case"scalar":case"enum":let y=c[a];i.T===it.BYTES&&(y=i.repeated?y.map(fu):fu(y)),l[a]=y;break;case"map":switch(i.V.kind){case"scalar":case"enum":if(i.V.T===it.BYTES)for(const[S,x]of Object.entries(c[a]))l[a][S]=fu(x);else Object.assign(l[a],c[a]);break;case"message":const v=i.V.T;for(const S of Object.keys(c[a])){let x=c[a][S];v.fieldWrapper||(x=new v(x)),l[a][S]=x}break}break;case"message":const w=i.T;if(i.repeated)l[a]=c[a].map(v=>Ia(v,w)?v:new w(v));else{const v=c[a];w.fieldWrapper?w.typeName==="google.protobuf.BytesValue"?l[a]=fu(v):l[a]=v:l[a]=Ia(v,w)?v:new w(v)}break}}},equals(n,t,e){return t===e?!0:!t||!e?!1:n.fields.byMember().every(i=>{const a=t[i.localName],l=e[i.localName];if(i.repeated){if(a.length!==l.length)return!1;switch(i.kind){case"message":return a.every((c,d)=>i.T.equals(c,l[d]));case"scalar":return a.every((c,d)=>Hs(i.T,c,l[d]));case"enum":return a.every((c,d)=>Hs(it.INT32,c,l[d]))}throw new Error(`repeated cannot contain ${i.kind}`)}switch(i.kind){case"message":return i.T.equals(a,l);case"enum":return Hs(it.INT32,a,l);case"scalar":return Hs(i.T,a,l);case"oneof":if(a.case!==l.case)return!1;const c=i.findField(a.case);if(c===void 0)return!0;switch(c.kind){case"message":return c.T.equals(a.value,l.value);case"enum":return Hs(it.INT32,a.value,l.value);case"scalar":return Hs(c.T,a.value,l.value)}throw new Error(`oneof cannot contain ${c.kind}`);case"map":const d=Object.keys(a).concat(Object.keys(l));switch(i.V.kind){case"message":const h=i.V.T;return d.every(y=>h.equals(a[y],l[y]));case"enum":return d.every(y=>Hs(it.INT32,a[y],l[y]));case"scalar":const g=i.V.T;return d.every(y=>Hs(g,a[y],l[y]))}break}})},clone(n){const t=n.getType(),e=new t,i=e;for(const a of t.fields.byMember()){const l=n[a.localName];let c;if(a.repeated)c=l.map(Tf);else if(a.kind=="map"){c=i[a.localName];for(const[d,h]of Object.entries(l))c[d]=Tf(h)}else a.kind=="oneof"?c=a.findField(l.case)?{case:l.case,value:Tf(l.value)}:{case:void 0}:c=Tf(l);i[a.localName]=c}for(const a of t.runtime.bin.listUnknownFields(n))t.runtime.bin.onUnknownField(i,a.no,a.wireType,a.data);return e}}}function Tf(n){if(n===void 0)return n;if(Ia(n))return n.clone();if(n instanceof Uint8Array){const t=new Uint8Array(n.byteLength);return t.set(n),t}return n}function fu(n){return n instanceof Uint8Array?n:new Uint8Array(n)}function jN(n,t,e){return{syntax:n,json:BN(),bin:qN(),util:Object.assign(Object.assign({},VN()),{newFieldList:t,initFields:e}),makeMessageType(i,a,l){return wN(this,i,a,l)},makeEnum:vN,makeEnumType:i1,getEnumType:pN,makeExtension(i,a,l){return DN(this,i,a,l)}}}class YN{constructor(t,e){this._fields=t,this._normalizer=e}findJsonName(t){if(!this.jsonNames){const e={};for(const i of this.list())e[i.jsonName]=e[i.name]=i;this.jsonNames=e}return this.jsonNames[t]}find(t){if(!this.numbers){const e={};for(const i of this.list())e[i.no]=i;this.numbers=e}return this.numbers[t]}list(){return this.all||(this.all=this._normalizer(this._fields)),this.all}byNumber(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort((t,e)=>t.no-e.no)),this.numbersAsc}byMember(){if(!this.members){this.members=[];const t=this.members;let e;for(const i of this.list())i.oneof?i.oneof!==e&&(e=i.oneof,t.push(e)):t.push(i)}return this.members}}function m1(n,t){const e=y1(n);return t?e:QN(ZN(e))}function GN(n){return m1(n,!1)}const XN=y1;function y1(n){let t=!1;const e=[];for(let i=0;i<n.length;i++){let a=n.charAt(i);switch(a){case"_":t=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":e.push(a),t=!1;break;default:t&&(t=!1,a=a.toUpperCase()),e.push(a);break}}return e.join("")}const KN=new Set(["constructor","toString","toJSON","valueOf"]),FN=new Set(["getType","clone","equals","fromBinary","fromJson","fromJsonString","toBinary","toJson","toJsonString","toObject"]),p1=n=>`${n}$`,ZN=n=>FN.has(n)?p1(n):n,QN=n=>KN.has(n)?p1(n):n;class WN{constructor(t){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.req=!1,this.default=void 0,this.fields=[],this.name=t,this.localName=GN(t)}addField(t){de(t.oneof===this,`field ${t.name} not one of ${this.name}`),this.fields.push(t)}findField(t){if(!this._lookup){this._lookup=Object.create(null);for(let e=0;e<this.fields.length;e++)this._lookup[this.fields[e].localName]=this.fields[e]}return this._lookup[t]}}function t2(n,t){var e,i,a,l,c,d;const h=[];let g;for(const y of typeof n=="function"?n():n){const w=y;if(w.localName=m1(y.name,y.oneof!==void 0),w.jsonName=(e=y.jsonName)!==null&&e!==void 0?e:XN(y.name),w.repeated=(i=y.repeated)!==null&&i!==void 0?i:!1,y.kind=="scalar"&&(w.L=(a=y.L)!==null&&a!==void 0?a:na.BIGINT),w.delimited=(l=y.delimited)!==null&&l!==void 0?l:!1,w.req=(c=y.req)!==null&&c!==void 0?c:!1,w.opt=(d=y.opt)!==null&&d!==void 0?d:!1,y.packed===void 0&&(w.packed=y.kind=="enum"||y.kind=="scalar"&&y.T!=it.BYTES&&y.T!=it.STRING),y.oneof!==void 0){const v=typeof y.oneof=="string"?y.oneof:y.oneof.name;(!g||g.name!=v)&&(g=new WN(v)),w.oneof=g,g.addField(w)}h.push(w)}return h}const T=jN("proto3",n=>new YN(n,t=>t2(t)),n=>{for(const t of n.getType().fields.byMember()){if(t.opt)continue;const e=t.localName,i=n;if(t.repeated){i[e]=[];continue}switch(t.kind){case"oneof":i[e]={case:void 0};break;case"enum":i[e]=0;break;case"map":i[e]={};break;case"scalar":i[e]=$o(t.T,t.L);break}}});var je;(function(n){n[n.Unary=0]="Unary",n[n.ServerStreaming=1]="ServerStreaming",n[n.ClientStreaming=2]="ClientStreaming",n[n.BiDiStreaming=3]="BiDiStreaming"})(je||(je={}));var yS;(function(n){n[n.NoSideEffects=1]="NoSideEffects",n[n.Idempotent=2]="Idempotent"})(yS||(yS={}));class Le extends mt{constructor(t){super(),this.seconds=re.zero,this.nanos=0,T.util.initPartial(t,this)}fromJson(t,e){if(typeof t!="string")throw new Error(`cannot decode google.protobuf.Timestamp from JSON: ${T.json.debug(t)}`);const i=t.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!i)throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");const a=Date.parse(i[1]+"-"+i[2]+"-"+i[3]+"T"+i[4]+":"+i[5]+":"+i[6]+(i[8]?i[8]:"Z"));if(Number.isNaN(a))throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");if(a<Date.parse("0001-01-01T00:00:00Z")||a>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot decode message google.protobuf.Timestamp from JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");return this.seconds=re.parse(a/1e3),this.nanos=0,i[7]&&(this.nanos=parseInt("1"+i[7]+"0".repeat(9-i[7].length))-1e9),this}toJson(t){const e=Number(this.seconds)*1e3;if(e<Date.parse("0001-01-01T00:00:00Z")||e>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot encode google.protobuf.Timestamp to JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");if(this.nanos<0)throw new Error("cannot encode google.protobuf.Timestamp to JSON: nanos must not be negative");let i="Z";if(this.nanos>0){const a=(this.nanos+1e9).toString().substring(1);a.substring(3)==="000000"?i="."+a.substring(0,3)+"Z":a.substring(6)==="000"?i="."+a.substring(0,6)+"Z":i="."+a+"Z"}return new Date(e).toISOString().replace(".000Z",i)}toDate(){return new Date(Number(this.seconds)*1e3+Math.ceil(this.nanos/1e6))}static now(){return Le.fromDate(new Date)}static fromDate(t){const e=t.getTime();return new Le({seconds:re.parse(Math.floor(e/1e3)),nanos:e%1e3*1e6})}static fromBinary(t,e){return new Le().fromBinary(t,e)}static fromJson(t,e){return new Le().fromJson(t,e)}static fromJsonString(t,e){return new Le().fromJsonString(t,e)}static equals(t,e){return T.util.equals(Le,t,e)}}Le.runtime=T;Le.typeName="google.protobuf.Timestamp";Le.fields=T.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);class ts extends mt{constructor(t){super(),this.seconds=re.zero,this.nanos=0,T.util.initPartial(t,this)}fromJson(t,e){if(typeof t!="string")throw new Error(`cannot decode google.protobuf.Duration from JSON: ${T.json.debug(t)}`);const i=t.match(/^(-?[0-9]+)(?:\.([0-9]+))?s/);if(i===null)throw new Error(`cannot decode google.protobuf.Duration from JSON: ${T.json.debug(t)}`);const a=Number(i[1]);if(a>315576e6||a<-315576e6)throw new Error(`cannot decode google.protobuf.Duration from JSON: ${T.json.debug(t)}`);if(this.seconds=re.parse(a),typeof i[2]=="string"){const l=i[2]+"0".repeat(9-i[2].length);this.nanos=parseInt(l),(a<0||Object.is(a,-0))&&(this.nanos=-this.nanos)}return this}toJson(t){if(Number(this.seconds)>315576e6||Number(this.seconds)<-315576e6)throw new Error("cannot encode google.protobuf.Duration to JSON: value out of range");let e=this.seconds.toString();if(this.nanos!==0){let i=Math.abs(this.nanos).toString();i="0".repeat(9-i.length)+i,i.substring(3)==="000000"?i=i.substring(0,3):i.substring(6)==="000"&&(i=i.substring(0,6)),e+="."+i,this.nanos<0&&Number(this.seconds)==0&&(e="-"+e)}return e+"s"}static fromBinary(t,e){return new ts().fromBinary(t,e)}static fromJson(t,e){return new ts().fromJson(t,e)}static fromJsonString(t,e){return new ts().fromJsonString(t,e)}static equals(t,e){return T.util.equals(ts,t,e)}}ts.runtime=T;ts.typeName="google.protobuf.Duration";ts.fields=T.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);class fr extends mt{constructor(t){super(),this.typeUrl="",this.value=new Uint8Array(0),T.util.initPartial(t,this)}toJson(t){var e;if(this.typeUrl==="")return{};const i=this.typeUrlToName(this.typeUrl),a=(e=t==null?void 0:t.typeRegistry)===null||e===void 0?void 0:e.findMessage(i);if(!a)throw new Error(`cannot encode message google.protobuf.Any to JSON: "${this.typeUrl}" is not in the type registry`);let c=a.fromBinary(this.value).toJson(t);return(i.startsWith("google.protobuf.")||c===null||Array.isArray(c)||typeof c!="object")&&(c={value:c}),c["@type"]=this.typeUrl,c}fromJson(t,e){var i;if(t===null||Array.isArray(t)||typeof t!="object")throw new Error(`cannot decode message google.protobuf.Any from JSON: expected object but got ${t===null?"null":Array.isArray(t)?"array":typeof t}`);if(Object.keys(t).length==0)return this;const a=t["@type"];if(typeof a!="string"||a=="")throw new Error('cannot decode message google.protobuf.Any from JSON: "@type" is empty');const l=this.typeUrlToName(a),c=(i=e==null?void 0:e.typeRegistry)===null||i===void 0?void 0:i.findMessage(l);if(!c)throw new Error(`cannot decode message google.protobuf.Any from JSON: ${a} is not in the type registry`);let d;if(l.startsWith("google.protobuf.")&&Object.prototype.hasOwnProperty.call(t,"value"))d=c.fromJson(t.value,e);else{const h=Object.assign({},t);delete h["@type"],d=c.fromJson(h,e)}return this.packFrom(d),this}packFrom(t){this.value=t.toBinary(),this.typeUrl=this.typeNameToUrl(t.getType().typeName)}unpackTo(t){return this.is(t.getType())?(t.fromBinary(this.value),!0):!1}unpack(t){if(this.typeUrl==="")return;const e=t.findMessage(this.typeUrlToName(this.typeUrl));if(e)return e.fromBinary(this.value)}is(t){if(this.typeUrl==="")return!1;const e=this.typeUrlToName(this.typeUrl);let i="";return typeof t=="string"?i=t:i=t.typeName,e===i}typeNameToUrl(t){return`type.googleapis.com/${t}`}typeUrlToName(t){if(!t.length)throw new Error(`invalid type url: ${t}`);const e=t.lastIndexOf("/"),i=e>=0?t.substring(e+1):t;if(!i.length)throw new Error(`invalid type url: ${t}`);return i}static pack(t){const e=new fr;return e.packFrom(t),e}static fromBinary(t,e){return new fr().fromBinary(t,e)}static fromJson(t,e){return new fr().fromJson(t,e)}static fromJsonString(t,e){return new fr().fromJsonString(t,e)}static equals(t,e){return T.util.equals(fr,t,e)}}fr.runtime=T;fr.typeName="google.protobuf.Any";fr.fields=T.util.newFieldList(()=>[{no:1,name:"type_url",kind:"scalar",T:9},{no:2,name:"value",kind:"scalar",T:12}]);class dr extends mt{constructor(t){super(),this.value=0,T.util.initPartial(t,this)}toJson(t){return T.json.writeScalar(it.DOUBLE,this.value,!0)}fromJson(t,e){try{this.value=T.json.readScalar(it.DOUBLE,t)}catch(i){let a='cannot decode message google.protobuf.DoubleValue from JSON"';throw i instanceof Error&&i.message.length>0&&(a+=`: ${i.message}`),new Error(a)}return this}static fromBinary(t,e){return new dr().fromBinary(t,e)}static fromJson(t,e){return new dr().fromJson(t,e)}static fromJsonString(t,e){return new dr().fromJsonString(t,e)}static equals(t,e){return T.util.equals(dr,t,e)}}dr.runtime=T;dr.typeName="google.protobuf.DoubleValue";dr.fields=T.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:1}]);dr.fieldWrapper={wrapField(n){return new dr({value:n})},unwrapField(n){return n.value}};class hr extends mt{constructor(t){super(),this.value=0,T.util.initPartial(t,this)}toJson(t){return T.json.writeScalar(it.FLOAT,this.value,!0)}fromJson(t,e){try{this.value=T.json.readScalar(it.FLOAT,t)}catch(i){let a='cannot decode message google.protobuf.FloatValue from JSON"';throw i instanceof Error&&i.message.length>0&&(a+=`: ${i.message}`),new Error(a)}return this}static fromBinary(t,e){return new hr().fromBinary(t,e)}static fromJson(t,e){return new hr().fromJson(t,e)}static fromJsonString(t,e){return new hr().fromJsonString(t,e)}static equals(t,e){return T.util.equals(hr,t,e)}}hr.runtime=T;hr.typeName="google.protobuf.FloatValue";hr.fields=T.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:2}]);hr.fieldWrapper={wrapField(n){return new hr({value:n})},unwrapField(n){return n.value}};class gr extends mt{constructor(t){super(),this.value=re.zero,T.util.initPartial(t,this)}toJson(t){return T.json.writeScalar(it.INT64,this.value,!0)}fromJson(t,e){try{this.value=T.json.readScalar(it.INT64,t)}catch(i){let a='cannot decode message google.protobuf.Int64Value from JSON"';throw i instanceof Error&&i.message.length>0&&(a+=`: ${i.message}`),new Error(a)}return this}static fromBinary(t,e){return new gr().fromBinary(t,e)}static fromJson(t,e){return new gr().fromJson(t,e)}static fromJsonString(t,e){return new gr().fromJsonString(t,e)}static equals(t,e){return T.util.equals(gr,t,e)}}gr.runtime=T;gr.typeName="google.protobuf.Int64Value";gr.fields=T.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:3}]);gr.fieldWrapper={wrapField(n){return new gr({value:n})},unwrapField(n){return n.value}};class mr extends mt{constructor(t){super(),this.value=re.zero,T.util.initPartial(t,this)}toJson(t){return T.json.writeScalar(it.UINT64,this.value,!0)}fromJson(t,e){try{this.value=T.json.readScalar(it.UINT64,t)}catch(i){let a='cannot decode message google.protobuf.UInt64Value from JSON"';throw i instanceof Error&&i.message.length>0&&(a+=`: ${i.message}`),new Error(a)}return this}static fromBinary(t,e){return new mr().fromBinary(t,e)}static fromJson(t,e){return new mr().fromJson(t,e)}static fromJsonString(t,e){return new mr().fromJsonString(t,e)}static equals(t,e){return T.util.equals(mr,t,e)}}mr.runtime=T;mr.typeName="google.protobuf.UInt64Value";mr.fields=T.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:4}]);mr.fieldWrapper={wrapField(n){return new mr({value:n})},unwrapField(n){return n.value}};class mn extends mt{constructor(t){super(),this.value=0,T.util.initPartial(t,this)}toJson(t){return T.json.writeScalar(it.INT32,this.value,!0)}fromJson(t,e){try{this.value=T.json.readScalar(it.INT32,t)}catch(i){let a='cannot decode message google.protobuf.Int32Value from JSON"';throw i instanceof Error&&i.message.length>0&&(a+=`: ${i.message}`),new Error(a)}return this}static fromBinary(t,e){return new mn().fromBinary(t,e)}static fromJson(t,e){return new mn().fromJson(t,e)}static fromJsonString(t,e){return new mn().fromJsonString(t,e)}static equals(t,e){return T.util.equals(mn,t,e)}}mn.runtime=T;mn.typeName="google.protobuf.Int32Value";mn.fields=T.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:5}]);mn.fieldWrapper={wrapField(n){return new mn({value:n})},unwrapField(n){return n.value}};class yr extends mt{constructor(t){super(),this.value=0,T.util.initPartial(t,this)}toJson(t){return T.json.writeScalar(it.UINT32,this.value,!0)}fromJson(t,e){try{this.value=T.json.readScalar(it.UINT32,t)}catch(i){let a='cannot decode message google.protobuf.UInt32Value from JSON"';throw i instanceof Error&&i.message.length>0&&(a+=`: ${i.message}`),new Error(a)}return this}static fromBinary(t,e){return new yr().fromBinary(t,e)}static fromJson(t,e){return new yr().fromJson(t,e)}static fromJsonString(t,e){return new yr().fromJsonString(t,e)}static equals(t,e){return T.util.equals(yr,t,e)}}yr.runtime=T;yr.typeName="google.protobuf.UInt32Value";yr.fields=T.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:13}]);yr.fieldWrapper={wrapField(n){return new yr({value:n})},unwrapField(n){return n.value}};class pr extends mt{constructor(t){super(),this.value=!1,T.util.initPartial(t,this)}toJson(t){return T.json.writeScalar(it.BOOL,this.value,!0)}fromJson(t,e){try{this.value=T.json.readScalar(it.BOOL,t)}catch(i){let a='cannot decode message google.protobuf.BoolValue from JSON"';throw i instanceof Error&&i.message.length>0&&(a+=`: ${i.message}`),new Error(a)}return this}static fromBinary(t,e){return new pr().fromBinary(t,e)}static fromJson(t,e){return new pr().fromJson(t,e)}static fromJsonString(t,e){return new pr().fromJsonString(t,e)}static equals(t,e){return T.util.equals(pr,t,e)}}pr.runtime=T;pr.typeName="google.protobuf.BoolValue";pr.fields=T.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:8}]);pr.fieldWrapper={wrapField(n){return new pr({value:n})},unwrapField(n){return n.value}};class We extends mt{constructor(t){super(),this.value="",T.util.initPartial(t,this)}toJson(t){return T.json.writeScalar(it.STRING,this.value,!0)}fromJson(t,e){try{this.value=T.json.readScalar(it.STRING,t)}catch(i){let a='cannot decode message google.protobuf.StringValue from JSON"';throw i instanceof Error&&i.message.length>0&&(a+=`: ${i.message}`),new Error(a)}return this}static fromBinary(t,e){return new We().fromBinary(t,e)}static fromJson(t,e){return new We().fromJson(t,e)}static fromJsonString(t,e){return new We().fromJsonString(t,e)}static equals(t,e){return T.util.equals(We,t,e)}}We.runtime=T;We.typeName="google.protobuf.StringValue";We.fields=T.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:9}]);We.fieldWrapper={wrapField(n){return new We({value:n})},unwrapField(n){return n.value}};class vr extends mt{constructor(t){super(),this.value=new Uint8Array(0),T.util.initPartial(t,this)}toJson(t){return T.json.writeScalar(it.BYTES,this.value,!0)}fromJson(t,e){try{this.value=T.json.readScalar(it.BYTES,t)}catch(i){let a='cannot decode message google.protobuf.BytesValue from JSON"';throw i instanceof Error&&i.message.length>0&&(a+=`: ${i.message}`),new Error(a)}return this}static fromBinary(t,e){return new vr().fromBinary(t,e)}static fromJson(t,e){return new vr().fromJson(t,e)}static fromJsonString(t,e){return new vr().fromJsonString(t,e)}static equals(t,e){return T.util.equals(vr,t,e)}}vr.runtime=T;vr.typeName="google.protobuf.BytesValue";vr.fields=T.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:12}]);vr.fieldWrapper={wrapField(n){return new vr({value:n})},unwrapField(n){return n.value}};function e2(n,t,e){try{const i=Ry.dec(n);return t?t.fromBinary(i,e):i}catch(i){throw Gt.from(i,_t.DataLoss)}}function n2(n,t){const e={};for(const[i,a]of Object.entries(n.methods)){const l=t(Object.assign(Object.assign({},a),{localName:i,service:n}));l!=null&&(e[i]=l)}return e}const pS=1;function vS(n){let t,e=new Uint8Array(0);function i(a){const l=new Uint8Array(e.length+a.length);l.set(e),l.set(a,e.length),e=l}return new ReadableStream({start(){t=n.getReader()},async pull(a){let l;for(;;){if(l===void 0&&e.byteLength>=5){let h=0;for(let g=1;g<5;g++)h=(h<<8)+e[g];l={flags:e[0],length:h}}if(l!==void 0&&e.byteLength>=l.length+5)break;const d=await t.read();if(d.done)break;i(d.value)}if(l===void 0){if(e.byteLength==0){a.close();return}a.error(new Gt("premature end of stream",_t.DataLoss));return}const c=e.subarray(5,5+l.length);e=e.subarray(5+l.length),a.enqueue({flags:l.flags,data:c})}})}function wS(n,t){const e=new Uint8Array(t.length+5);e.set(t,5);const i=new DataView(e.buffer,e.byteOffset,e.byteLength);return i.setUint8(0,n),i.setUint32(1,t.length),e}var r2=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=n[Symbol.asyncIterator],e;return t?t.call(n):(n=typeof __values=="function"?__values(n):n[Symbol.iterator](),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e);function i(l){e[l]=n[l]&&function(c){return new Promise(function(d,h){c=n[l](c),a(d,h,c.done,c.value)})}}function a(l,c,d,h){Promise.resolve(h).then(function(g){l({value:g,done:d})},c)}},Nu=function(n){return this instanceof Nu?(this.v=n,this):new Nu(n)},i2=function(n,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=e.apply(n,t||[]),a,l=[];return a={},d("next"),d("throw"),d("return",c),a[Symbol.asyncIterator]=function(){return this},a;function c(S){return function(x){return Promise.resolve(x).then(S,w)}}function d(S,x){i[S]&&(a[S]=function(E){return new Promise(function(I,k){l.push([S,E,I,k])>1||h(S,E)})},x&&(a[S]=x(a[S])))}function h(S,x){try{g(i[S](x))}catch(E){v(l[0][3],E)}}function g(S){S.value instanceof Nu?Promise.resolve(S.value.v).then(y,w):v(l[0][2],S)}function y(S){h("next",S)}function w(S){h("throw",S)}function v(S,x){S(x),l.shift(),l.length&&h(l[0][0],l[0][1])}},s2=function(n){var t,e;return t={},i("next"),i("throw",function(a){throw a}),i("return"),t[Symbol.iterator]=function(){return this},t;function i(a,l){t[a]=n[a]?function(c){return(e=!e)?{value:Nu(n[a](c)),done:!1}:l?l(c):c}:l}};function a2(n){return i2(this,arguments,function*(){yield Nu(yield*s2(r2(n)))})}var v1=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=n[Symbol.asyncIterator],e;return t?t.call(n):(n=typeof __values=="function"?__values(n):n[Symbol.iterator](),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e);function i(l){e[l]=n[l]&&function(c){return new Promise(function(d,h){c=n[l](c),a(d,h,c.done,c.value)})}}function a(l,c,d,h){Promise.resolve(h).then(function(g){l({value:g,done:d})},c)}},Vo=function(n){return this instanceof Vo?(this.v=n,this):new Vo(n)},o2=function(n){var t,e;return t={},i("next"),i("throw",function(a){throw a}),i("return"),t[Symbol.iterator]=function(){return this},t;function i(a,l){t[a]=n[a]?function(c){return(e=!e)?{value:Vo(n[a](c)),done:!1}:l?l(c):c}:l}},l2=function(n,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=e.apply(n,t||[]),a,l=[];return a={},d("next"),d("throw"),d("return",c),a[Symbol.asyncIterator]=function(){return this},a;function c(S){return function(x){return Promise.resolve(x).then(S,w)}}function d(S,x){i[S]&&(a[S]=function(E){return new Promise(function(I,k){l.push([S,E,I,k])>1||h(S,E)})},x&&(a[S]=x(a[S])))}function h(S,x){try{g(i[S](x))}catch(E){v(l[0][3],E)}}function g(S){S.value instanceof Vo?Promise.resolve(S.value.v).then(y,w):v(l[0][2],S)}function y(S){h("next",S)}function w(S){h("throw",S)}function v(S,x){S(x),l.shift(),l.length&&h(l[0][0],l[0][1])}};function u2(n,t){return n2(n,e=>{switch(e.kind){case je.Unary:return c2(t,n,e);case je.ServerStreaming:return f2(t,n,e);case je.ClientStreaming:return d2(t,n,e);case je.BiDiStreaming:return h2(t,n,e);default:return null}})}function c2(n,t,e){return async function(i,a){var l,c;const d=await n.unary(t,e,a==null?void 0:a.signal,a==null?void 0:a.timeoutMs,a==null?void 0:a.headers,i,a==null?void 0:a.contextValues);return(l=a==null?void 0:a.onHeader)===null||l===void 0||l.call(a,d.header),(c=a==null?void 0:a.onTrailer)===null||c===void 0||c.call(a,d.trailer),d.message}}function f2(n,t,e){return function(i,a){return w1(n.stream(t,e,a==null?void 0:a.signal,a==null?void 0:a.timeoutMs,a==null?void 0:a.headers,a2([i]),a==null?void 0:a.contextValues),a)}}function d2(n,t,e){return async function(i,a){var l,c,d,h,g,y;const w=await n.stream(t,e,a==null?void 0:a.signal,a==null?void 0:a.timeoutMs,a==null?void 0:a.headers,i,a==null?void 0:a.contextValues);(g=a==null?void 0:a.onHeader)===null||g===void 0||g.call(a,w.header);let v,S=0;try{for(var x=!0,E=v1(w.message),I;I=await E.next(),l=I.done,!l;x=!0)h=I.value,x=!1,v=h,S++}catch(k){c={error:k}}finally{try{!x&&!l&&(d=E.return)&&await d.call(E)}finally{if(c)throw c.error}}if(!v)throw new Gt("protocol error: missing response message",_t.Unimplemented);if(S>1)throw new Gt("protocol error: received extra messages for client streaming method",_t.Unimplemented);return(y=a==null?void 0:a.onTrailer)===null||y===void 0||y.call(a,w.trailer),v}}function h2(n,t,e){return function(i,a){return w1(n.stream(t,e,a==null?void 0:a.signal,a==null?void 0:a.timeoutMs,a==null?void 0:a.headers,i,a==null?void 0:a.contextValues),a)}}function w1(n,t){const e=function(){return l2(this,arguments,function*(){var i,a;const l=yield Vo(n);(i=t==null?void 0:t.onHeader)===null||i===void 0||i.call(t,l.header),yield Vo(yield*o2(v1(l.message))),(a=t==null?void 0:t.onTrailer)===null||a===void 0||a.call(t,l.trailer)})}()[Symbol.asyncIterator]();return{[Symbol.asyncIterator]:()=>({next:()=>e.next()})}}function g2(...n){const t=new AbortController,e=n.filter(a=>a!==void 0).concat(t.signal);for(const a of e){if(a.aborted){i.apply(a);break}a.addEventListener("abort",i)}function i(){t.signal.aborted||t.abort(S1(this));for(const a of e)a.removeEventListener("abort",i)}return t}function m2(n){const t=new AbortController,e=()=>{t.abort(new Gt("the operation timed out",_t.DeadlineExceeded))};let i;return n!==void 0&&(n<=0?e():i=setTimeout(e,n)),{signal:t.signal,cleanup:()=>clearTimeout(i)}}function S1(n){if(!n.aborted)return;if(n.reason!==void 0)return n.reason;const t=new Error("This operation was aborted");return t.name="AbortError",t}function SS(){return{get(n){return n.id in this?this[n.id]:n.defaultValue},set(n,t){return this[n.id]=t,this},delete(n){return delete this[n.id],this}}}const Sm=128;function bS(n){const t=new Headers,e=new TextDecoder().decode(n).split(`\r
`);for(const i of e){if(i==="")continue;const a=i.indexOf(":");if(a>0){const l=i.substring(0,a).trim(),c=i.substring(a+1).trim();t.append(l,c)}}return t}const y2="Content-Type",p2="Grpc-Timeout",jo="Grpc-Status",b1="Grpc-Message",v2="Grpc-Status-Details-Bin",w2="X-User-Agent",S2="X-Grpc-Web",b2="application/grpc-web+proto",x2="application/grpc-web+json";class es extends mt{constructor(t){super(),this.code=0,this.message="",this.details=[],T.util.initPartial(t,this)}static fromBinary(t,e){return new es().fromBinary(t,e)}static fromJson(t,e){return new es().fromJson(t,e)}static fromJsonString(t,e){return new es().fromJsonString(t,e)}static equals(t,e){return T.util.equals(es,t,e)}}es.runtime=T;es.typeName="google.rpc.Status";es.fields=T.util.newFieldList(()=>[{no:1,name:"code",kind:"scalar",T:5},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"details",kind:"message",T:fr,repeated:!0}]);const T2="0";function x1(n){var t;const e=n.get(v2);if(e!=null){const a=e2(e,es);if(a.code==0)return;const l=new Gt(a.message,a.code,n);return l.details=a.details.map(c=>({type:c.typeUrl.substring(c.typeUrl.lastIndexOf("/")+1),value:c.value})),l}const i=n.get(jo);if(i!=null){if(i===T2)return;const a=parseInt(i,10);return a in _t?new Gt(decodeURIComponent((t=n.get(b1))!==null&&t!==void 0?t:""),a,n):new Gt(`invalid grpc-status: ${i}`,_t.Internal,n)}}function xS(n,t,e){const i=typeof t=="string"?t:t.typeName,a=typeof e=="string"?e:e.name;return n.toString().replace(/\/?$/,`/${i}/${a}`)}function T1(n,t){return t instanceof n?t:new n(t)}function A2(n,t){function e(i){return i.done===!0?i:{done:i.done,value:T1(n,i.value)}}return{[Symbol.asyncIterator](){const i=t[Symbol.asyncIterator](),a={next:()=>i.next().then(e)};return i.throw!==void 0&&(a.throw=l=>i.throw(l).then(e)),i.return!==void 0&&(a.return=l=>i.return(l).then(e)),a}}}function A1(n,t){var e;return(e=t==null?void 0:t.concat().reverse().reduce((i,a)=>a(i),n))!==null&&e!==void 0?e:n}function E2(n){var t;const e=Object.assign({},n);return(t=e.ignoreUnknownFields)!==null&&t!==void 0||(e.ignoreUnknownFields=!0),e}function TS(n,t,e,i){const a=t?AS(n.I,i):ES(n.I,e);return{parse:(t?AS(n.O,i):ES(n.O,e)).parse,serialize:a.serialize}}function AS(n,t){return{parse(e){try{return n.fromBinary(e,t)}catch(i){const a=i instanceof Error?i.message:String(i);throw new Gt(`parse binary: ${a}`,_t.Internal)}},serialize(e){try{return e.toBinary(t)}catch(i){const a=i instanceof Error?i.message:String(i);throw new Gt(`serialize binary: ${a}`,_t.Internal)}}}}function ES(n,t){var e,i;const a=(e=t==null?void 0:t.textEncoder)!==null&&e!==void 0?e:new TextEncoder,l=(i=t==null?void 0:t.textDecoder)!==null&&i!==void 0?i:new TextDecoder,c=E2(t);return{parse(d){try{const h=l.decode(d);return n.fromJsonString(h,c)}catch(h){throw Gt.from(h,_t.InvalidArgument)}},serialize(d){try{const h=d.toJsonString(c);return a.encode(h)}catch(h){throw Gt.from(h,_t.Internal)}}}}function N2(n){const t=A1(n.next,n.interceptors),[e,i,a]=E1(n),l=Object.assign(Object.assign({},n.req),{message:T1(n.req.method.I,n.req.message),signal:e});return t(l).then(c=>(a(),c),i)}function D2(n){const t=A1(n.next,n.interceptors),[e,i,a]=E1(n),l=Object.assign(Object.assign({},n.req),{message:A2(n.req.method.I,n.req.message),signal:e});let c=!1;return e.addEventListener("abort",function(){var d,h;const g=n.req.message[Symbol.asyncIterator]();c||(d=g.throw)===null||d===void 0||d.call(g,this.reason).catch(()=>{}),(h=g.return)===null||h===void 0||h.call(g).catch(()=>{})}),t(l).then(d=>Object.assign(Object.assign({},d),{message:{[Symbol.asyncIterator](){const h=d.message[Symbol.asyncIterator]();return{next(){return h.next().then(g=>(g.done==!0&&(c=!0,a()),g),i)}}}}}),i)}function E1(n){const{signal:t,cleanup:e}=m2(n.timeoutMs),i=g2(n.signal,t);return[i.signal,function(l){const c=Gt.from(t.aborted?S1(t):l);return i.abort(c),e(),Promise.reject(c)},function(){e(),i.abort()}]}function C2(){try{new Headers}catch{throw new Error("connect-web requires the fetch API. Are you running on an old version of Node.js? Node.js is not supported in Connect for Web - please stay tuned for Connect for Node.")}}function NS(n,t){const e=x1(n);if(e)throw t.forEach((i,a)=>{e.metadata.append(a,i)}),e;if(!t.has(jo)&&!n.has(jo))throw new Gt("protocol error: missing status",_t.Internal)}function DS(n,t,e,i){const a=new Headers(e??{});return a.set(y2,n?b2:x2),a.set(S2,"1"),a.set(w2,"connect-es/1.6.1"),t!==void 0&&a.set(p2,`${t}m`),a}function k2(n){switch(n){case 400:return _t.Internal;case 401:return _t.Unauthenticated;case 403:return _t.PermissionDenied;case 404:return _t.Unimplemented;case 429:return _t.Unavailable;case 502:return _t.Unavailable;case 503:return _t.Unavailable;case 504:return _t.Unavailable;default:return _t.Unknown}}function CS(n,t){var e;if(n>=200&&n<300)return{foundStatus:t.has(jo),headerError:x1(t)};throw new Gt(decodeURIComponent((e=t.get(b1))!==null&&e!==void 0?e:`HTTP ${n}`),k2(n),t)}var ka=function(n){return this instanceof ka?(this.v=n,this):new ka(n)},O2=function(n,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=e.apply(n,t||[]),a,l=[];return a={},d("next"),d("throw"),d("return",c),a[Symbol.asyncIterator]=function(){return this},a;function c(S){return function(x){return Promise.resolve(x).then(S,w)}}function d(S,x){i[S]&&(a[S]=function(E){return new Promise(function(I,k){l.push([S,E,I,k])>1||h(S,E)})},x&&(a[S]=x(a[S])))}function h(S,x){try{g(i[S](x))}catch(E){v(l[0][3],E)}}function g(S){S.value instanceof ka?Promise.resolve(S.value.v).then(y,w):v(l[0][2],S)}function y(S){h("next",S)}function w(S){h("throw",S)}function v(S,x){S(x),l.shift(),l.length&&h(l[0][0],l[0][1])}};function I2(n){var t;C2();const e=(t=n.useBinaryFormat)!==null&&t!==void 0?t:!0;return{async unary(i,a,l,c,d,h,g){var y;const{serialize:w,parse:v}=TS(a,e,n.jsonOptions,n.binaryOptions);return c=c===void 0?n.defaultTimeoutMs:c<=0?void 0:c,await N2({interceptors:n.interceptors,signal:l,timeoutMs:c,req:{stream:!1,service:i,method:a,url:xS(n.baseUrl,i,a),init:{method:"POST",credentials:(y=n.credentials)!==null&&y!==void 0?y:"same-origin",redirect:"error",mode:"cors"},header:DS(e,c,d),contextValues:g??SS(),message:h},next:async S=>{var x;const I=await((x=n.fetch)!==null&&x!==void 0?x:globalThis.fetch)(S.url,Object.assign(Object.assign({},S.init),{headers:S.header,signal:S.signal,body:wS(0,w(S.message))})),{headerError:k}=CS(I.status,I.headers);if(!I.body)throw k!==void 0?k:"missing response body";const z=vS(I.body).getReader();let N,O;for(;;){const _=await z.read();if(_.done)break;const{flags:J,data:U}=_.value;if((J&pS)===pS)throw new Gt("protocol error: received unsupported compressed output",_t.Internal);if(J===Sm){if(N!==void 0)throw"extra trailer";N=bS(U);continue}if(O!==void 0)throw new Gt("extra message",_t.Unimplemented);O=v(U)}if(N===void 0)throw k!==void 0?k:new Gt("missing trailer",I.headers.has(jo)?_t.Unimplemented:_t.Unknown);if(NS(N,I.headers),O===void 0)throw new Gt("missing message",N.has(jo)?_t.Unimplemented:_t.Unknown);return{stream:!1,service:i,method:a,header:I.headers,message:O,trailer:N}}})},async stream(i,a,l,c,d,h,g){var y;const{serialize:w,parse:v}=TS(a,e,n.jsonOptions,n.binaryOptions);function S(E,I,k,z,N){return O2(this,arguments,function*(){const _=vS(E).getReader();if(I){if(!(yield ka(_.read())).done)throw"extra data for trailers-only";return yield ka(void 0)}let J=!1;for(;;){const U=yield ka(_.read());if(U.done)break;const{flags:W,data:F}=U.value;if((W&Sm)===Sm){if(J)throw"extra trailer";J=!0;const nt=bS(F);NS(nt,z),nt.forEach((ft,ot)=>k.set(ot,ft));continue}if(J)throw"extra message";yield yield ka(v(F))}if("throwIfAborted"in N&&N.throwIfAborted(),!J)throw"missing trailer"})}async function x(E){if(a.kind!=je.ServerStreaming)throw"The fetch API does not support streaming request bodies";const I=await E[Symbol.asyncIterator]().next();if(I.done==!0)throw"missing request message";return wS(0,w(I.value))}return c=c===void 0?n.defaultTimeoutMs:c<=0?void 0:c,D2({interceptors:n.interceptors,signal:l,timeoutMs:c,req:{stream:!0,service:i,method:a,url:xS(n.baseUrl,i,a),init:{method:"POST",credentials:(y=n.credentials)!==null&&y!==void 0?y:"same-origin",redirect:"error",mode:"cors"},header:DS(e,c,d),contextValues:g??SS(),message:h},next:async E=>{var I;const z=await((I=n.fetch)!==null&&I!==void 0?I:globalThis.fetch)(E.url,Object.assign(Object.assign({},E.init),{headers:E.header,signal:E.signal,body:await x(E.message)})),{foundStatus:N,headerError:O}=CS(z.status,z.headers);if(O!=null)throw O;if(!z.body)throw"missing response body";const _=new Headers;return Object.assign(Object.assign({},E),{header:z.headers,trailer:_,message:S(z.body,N,_,z.headers,E.signal)})}})}}}var It=(n=>(n[n.NULL=0]="NULL",n[n.BOOLEAN=1]="BOOLEAN",n[n.INTEGER=2]="INTEGER",n[n.LONG=3]="LONG",n[n.DOUBLE=4]="DOUBLE",n[n.STRING=5]="STRING",n[n.BYTES=6]="BYTES",n[n.DATE=7]="DATE",n[n.JSON_OBJECT=8]="JSON_OBJECT",n[n.JSON_ARRAY=9]="JSON_ARRAY",n[n.TEXT=10]="TEXT",n[n.INTEGER_CNT=11]="INTEGER_CNT",n[n.LONG_CNT=12]="LONG_CNT",n[n.TREE=13]="TREE",n))(It||{});T.util.setEnumType(It,"yorkie.v1.ValueType",[{no:0,name:"VALUE_TYPE_NULL"},{no:1,name:"VALUE_TYPE_BOOLEAN"},{no:2,name:"VALUE_TYPE_INTEGER"},{no:3,name:"VALUE_TYPE_LONG"},{no:4,name:"VALUE_TYPE_DOUBLE"},{no:5,name:"VALUE_TYPE_STRING"},{no:6,name:"VALUE_TYPE_BYTES"},{no:7,name:"VALUE_TYPE_DATE"},{no:8,name:"VALUE_TYPE_JSON_OBJECT"},{no:9,name:"VALUE_TYPE_JSON_ARRAY"},{no:10,name:"VALUE_TYPE_TEXT"},{no:11,name:"VALUE_TYPE_INTEGER_CNT"},{no:12,name:"VALUE_TYPE_LONG_CNT"},{no:13,name:"VALUE_TYPE_TREE"}]);var Ra=(n=>(n[n.DOCUMENT_CHANGED=0]="DOCUMENT_CHANGED",n[n.DOCUMENT_WATCHED=1]="DOCUMENT_WATCHED",n[n.DOCUMENT_UNWATCHED=2]="DOCUMENT_UNWATCHED",n[n.DOCUMENT_BROADCAST=3]="DOCUMENT_BROADCAST",n))(Ra||{});T.util.setEnumType(Ra,"yorkie.v1.DocEventType",[{no:0,name:"DOC_EVENT_TYPE_DOCUMENT_CHANGED"},{no:1,name:"DOC_EVENT_TYPE_DOCUMENT_WATCHED"},{no:2,name:"DOC_EVENT_TYPE_DOCUMENT_UNWATCHED"},{no:3,name:"DOC_EVENT_TYPE_DOCUMENT_BROADCAST"}]);const Gr=class Gr extends mt{constructor(e){super();p(this,"root");p(this,"presences",{});T.util.initPartial(e,this)}static fromBinary(e,i){return new Gr().fromBinary(e,i)}static fromJson(e,i){return new Gr().fromJson(e,i)}static fromJsonString(e,i){return new Gr().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Gr,e,i)}};p(Gr,"runtime",T),p(Gr,"typeName","yorkie.v1.Snapshot"),p(Gr,"fields",T.util.newFieldList(()=>[{no:1,name:"root",kind:"message",T:sn},{no:2,name:"presences",kind:"map",K:9,V:{kind:"message",T:By}}]));let Pm=Gr;var Cn;let cs=(Cn=class extends mt{constructor(e){super();p(this,"documentKey","");p(this,"checkpoint");p(this,"snapshot",new Uint8Array(0));p(this,"changes",[]);p(this,"minSyncedTicket");p(this,"isRemoved",!1);p(this,"versionVector");T.util.initPartial(e,this)}static fromBinary(e,i){return new Cn().fromBinary(e,i)}static fromJson(e,i){return new Cn().fromJson(e,i)}static fromJsonString(e,i){return new Cn().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Cn,e,i)}},p(Cn,"runtime",T),p(Cn,"typeName","yorkie.v1.ChangePack"),p(Cn,"fields",T.util.newFieldList(()=>[{no:1,name:"document_key",kind:"scalar",T:9},{no:2,name:"checkpoint",kind:"message",T:C1},{no:3,name:"snapshot",kind:"scalar",T:12},{no:4,name:"changes",kind:"message",T:N1,repeated:!0},{no:5,name:"min_synced_ticket",kind:"message",T:wt},{no:6,name:"is_removed",kind:"scalar",T:8},{no:7,name:"version_vector",kind:"message",T:zd}])),Cn);var kn;let N1=(kn=class extends mt{constructor(e){super();p(this,"id");p(this,"message","");p(this,"operations",[]);p(this,"presenceChange");T.util.initPartial(e,this)}static fromBinary(e,i){return new kn().fromBinary(e,i)}static fromJson(e,i){return new kn().fromJson(e,i)}static fromJsonString(e,i){return new kn().fromJsonString(e,i)}static equals(e,i){return T.util.equals(kn,e,i)}},p(kn,"runtime",T),p(kn,"typeName","yorkie.v1.Change"),p(kn,"fields",T.util.newFieldList(()=>[{no:1,name:"id",kind:"message",T:Bd},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"operations",kind:"message",T:My,repeated:!0},{no:4,name:"presence_change",kind:"message",T:ku}])),kn);var On;let Bd=(On=class extends mt{constructor(e){super();p(this,"clientSeq",0);p(this,"serverSeq",re.zero);p(this,"lamport",re.zero);p(this,"actorId",new Uint8Array(0));p(this,"versionVector");T.util.initPartial(e,this)}static fromBinary(e,i){return new On().fromBinary(e,i)}static fromJson(e,i){return new On().fromJson(e,i)}static fromJsonString(e,i){return new On().fromJsonString(e,i)}static equals(e,i){return T.util.equals(On,e,i)}},p(On,"runtime",T),p(On,"typeName","yorkie.v1.ChangeID"),p(On,"fields",T.util.newFieldList(()=>[{no:1,name:"client_seq",kind:"scalar",T:13},{no:2,name:"server_seq",kind:"scalar",T:3},{no:3,name:"lamport",kind:"scalar",T:3},{no:4,name:"actor_id",kind:"scalar",T:12},{no:5,name:"version_vector",kind:"message",T:zd}])),On);var In;let zd=(In=class extends mt{constructor(e){super();p(this,"vector",{});T.util.initPartial(e,this)}static fromBinary(e,i){return new In().fromBinary(e,i)}static fromJson(e,i){return new In().fromJson(e,i)}static fromJsonString(e,i){return new In().fromJsonString(e,i)}static equals(e,i){return T.util.equals(In,e,i)}},p(In,"runtime",T),p(In,"typeName","yorkie.v1.VersionVector"),p(In,"fields",T.util.newFieldList(()=>[{no:1,name:"vector",kind:"map",K:9,V:{kind:"scalar",T:3}}])),In);var Rn;let My=(Rn=class extends mt{constructor(e){super();p(this,"body",{case:void 0});T.util.initPartial(e,this)}static fromBinary(e,i){return new Rn().fromBinary(e,i)}static fromJson(e,i){return new Rn().fromJson(e,i)}static fromJsonString(e,i){return new Rn().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Rn,e,i)}},p(Rn,"runtime",T),p(Rn,"typeName","yorkie.v1.Operation"),p(Rn,"fields",T.util.newFieldList(()=>[{no:1,name:"set",kind:"message",T:Ff,oneof:"body"},{no:2,name:"add",kind:"message",T:Zf,oneof:"body"},{no:3,name:"move",kind:"message",T:Qf,oneof:"body"},{no:4,name:"remove",kind:"message",T:Wf,oneof:"body"},{no:5,name:"edit",kind:"message",T:td,oneof:"body"},{no:6,name:"select",kind:"message",T:Jm,oneof:"body"},{no:7,name:"style",kind:"message",T:ed,oneof:"body"},{no:8,name:"increase",kind:"message",T:nd,oneof:"body"},{no:9,name:"tree_edit",kind:"message",T:rd,oneof:"body"},{no:10,name:"tree_style",kind:"message",T:id,oneof:"body"},{no:11,name:"array_set",kind:"message",T:Hm,oneof:"body"}])),Rn);const Xr=class Xr extends mt{constructor(e){super();p(this,"parentCreatedAt");p(this,"key","");p(this,"value");p(this,"executedAt");T.util.initPartial(e,this)}static fromBinary(e,i){return new Xr().fromBinary(e,i)}static fromJson(e,i){return new Xr().fromJson(e,i)}static fromJsonString(e,i){return new Xr().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Xr,e,i)}};p(Xr,"runtime",T),p(Xr,"typeName","yorkie.v1.Operation.Set"),p(Xr,"fields",T.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:wt},{no:2,name:"key",kind:"scalar",T:9},{no:3,name:"value",kind:"message",T:Dn},{no:4,name:"executed_at",kind:"message",T:wt}]));let Ff=Xr;const Kr=class Kr extends mt{constructor(e){super();p(this,"parentCreatedAt");p(this,"prevCreatedAt");p(this,"value");p(this,"executedAt");T.util.initPartial(e,this)}static fromBinary(e,i){return new Kr().fromBinary(e,i)}static fromJson(e,i){return new Kr().fromJson(e,i)}static fromJsonString(e,i){return new Kr().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Kr,e,i)}};p(Kr,"runtime",T),p(Kr,"typeName","yorkie.v1.Operation.Add"),p(Kr,"fields",T.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:wt},{no:2,name:"prev_created_at",kind:"message",T:wt},{no:3,name:"value",kind:"message",T:Dn},{no:4,name:"executed_at",kind:"message",T:wt}]));let Zf=Kr;const Fr=class Fr extends mt{constructor(e){super();p(this,"parentCreatedAt");p(this,"prevCreatedAt");p(this,"createdAt");p(this,"executedAt");T.util.initPartial(e,this)}static fromBinary(e,i){return new Fr().fromBinary(e,i)}static fromJson(e,i){return new Fr().fromJson(e,i)}static fromJsonString(e,i){return new Fr().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Fr,e,i)}};p(Fr,"runtime",T),p(Fr,"typeName","yorkie.v1.Operation.Move"),p(Fr,"fields",T.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:wt},{no:2,name:"prev_created_at",kind:"message",T:wt},{no:3,name:"created_at",kind:"message",T:wt},{no:4,name:"executed_at",kind:"message",T:wt}]));let Qf=Fr;const Zr=class Zr extends mt{constructor(e){super();p(this,"parentCreatedAt");p(this,"createdAt");p(this,"executedAt");T.util.initPartial(e,this)}static fromBinary(e,i){return new Zr().fromBinary(e,i)}static fromJson(e,i){return new Zr().fromJson(e,i)}static fromJsonString(e,i){return new Zr().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Zr,e,i)}};p(Zr,"runtime",T),p(Zr,"typeName","yorkie.v1.Operation.Remove"),p(Zr,"fields",T.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:wt},{no:2,name:"created_at",kind:"message",T:wt},{no:3,name:"executed_at",kind:"message",T:wt}]));let Wf=Zr;const Qr=class Qr extends mt{constructor(e){super();p(this,"parentCreatedAt");p(this,"from");p(this,"to");p(this,"createdAtMapByActor",{});p(this,"content","");p(this,"executedAt");p(this,"attributes",{});T.util.initPartial(e,this)}static fromBinary(e,i){return new Qr().fromBinary(e,i)}static fromJson(e,i){return new Qr().fromJson(e,i)}static fromJsonString(e,i){return new Qr().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Qr,e,i)}};p(Qr,"runtime",T),p(Qr,"typeName","yorkie.v1.Operation.Edit"),p(Qr,"fields",T.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:wt},{no:2,name:"from",kind:"message",T:os},{no:3,name:"to",kind:"message",T:os},{no:4,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:wt}},{no:5,name:"content",kind:"scalar",T:9},{no:6,name:"executed_at",kind:"message",T:wt},{no:7,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}}]));let td=Qr;const Wr=class Wr extends mt{constructor(e){super();p(this,"parentCreatedAt");p(this,"from");p(this,"to");p(this,"executedAt");T.util.initPartial(e,this)}static fromBinary(e,i){return new Wr().fromBinary(e,i)}static fromJson(e,i){return new Wr().fromJson(e,i)}static fromJsonString(e,i){return new Wr().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Wr,e,i)}};p(Wr,"runtime",T),p(Wr,"typeName","yorkie.v1.Operation.Select"),p(Wr,"fields",T.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:wt},{no:2,name:"from",kind:"message",T:os},{no:3,name:"to",kind:"message",T:os},{no:4,name:"executed_at",kind:"message",T:wt}]));let Jm=Wr;const ti=class ti extends mt{constructor(e){super();p(this,"parentCreatedAt");p(this,"from");p(this,"to");p(this,"attributes",{});p(this,"executedAt");p(this,"createdAtMapByActor",{});T.util.initPartial(e,this)}static fromBinary(e,i){return new ti().fromBinary(e,i)}static fromJson(e,i){return new ti().fromJson(e,i)}static fromJsonString(e,i){return new ti().fromJsonString(e,i)}static equals(e,i){return T.util.equals(ti,e,i)}};p(ti,"runtime",T),p(ti,"typeName","yorkie.v1.Operation.Style"),p(ti,"fields",T.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:wt},{no:2,name:"from",kind:"message",T:os},{no:3,name:"to",kind:"message",T:os},{no:4,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:5,name:"executed_at",kind:"message",T:wt},{no:6,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:wt}}]));let ed=ti;const ei=class ei extends mt{constructor(e){super();p(this,"parentCreatedAt");p(this,"value");p(this,"executedAt");T.util.initPartial(e,this)}static fromBinary(e,i){return new ei().fromBinary(e,i)}static fromJson(e,i){return new ei().fromJson(e,i)}static fromJsonString(e,i){return new ei().fromJsonString(e,i)}static equals(e,i){return T.util.equals(ei,e,i)}};p(ei,"runtime",T),p(ei,"typeName","yorkie.v1.Operation.Increase"),p(ei,"fields",T.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:wt},{no:2,name:"value",kind:"message",T:Dn},{no:3,name:"executed_at",kind:"message",T:wt}]));let nd=ei;const ni=class ni extends mt{constructor(e){super();p(this,"parentCreatedAt");p(this,"from");p(this,"to");p(this,"createdAtMapByActor",{});p(this,"contents",[]);p(this,"splitLevel",0);p(this,"executedAt");T.util.initPartial(e,this)}static fromBinary(e,i){return new ni().fromBinary(e,i)}static fromJson(e,i){return new ni().fromJson(e,i)}static fromJsonString(e,i){return new ni().fromJsonString(e,i)}static equals(e,i){return T.util.equals(ni,e,i)}};p(ni,"runtime",T),p(ni,"typeName","yorkie.v1.Operation.TreeEdit"),p(ni,"fields",T.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:wt},{no:2,name:"from",kind:"message",T:za},{no:3,name:"to",kind:"message",T:za},{no:4,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:wt}},{no:5,name:"contents",kind:"message",T:hd,repeated:!0},{no:7,name:"split_level",kind:"scalar",T:5},{no:6,name:"executed_at",kind:"message",T:wt}]));let rd=ni;const ri=class ri extends mt{constructor(e){super();p(this,"parentCreatedAt");p(this,"from");p(this,"to");p(this,"attributes",{});p(this,"executedAt");p(this,"attributesToRemove",[]);p(this,"createdAtMapByActor",{});T.util.initPartial(e,this)}static fromBinary(e,i){return new ri().fromBinary(e,i)}static fromJson(e,i){return new ri().fromJson(e,i)}static fromJsonString(e,i){return new ri().fromJsonString(e,i)}static equals(e,i){return T.util.equals(ri,e,i)}};p(ri,"runtime",T),p(ri,"typeName","yorkie.v1.Operation.TreeStyle"),p(ri,"fields",T.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:wt},{no:2,name:"from",kind:"message",T:za},{no:3,name:"to",kind:"message",T:za},{no:4,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:5,name:"executed_at",kind:"message",T:wt},{no:6,name:"attributes_to_remove",kind:"scalar",T:9,repeated:!0},{no:7,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:wt}}]));let id=ri;const ii=class ii extends mt{constructor(e){super();p(this,"parentCreatedAt");p(this,"createdAt");p(this,"value");p(this,"executedAt");T.util.initPartial(e,this)}static fromBinary(e,i){return new ii().fromBinary(e,i)}static fromJson(e,i){return new ii().fromJson(e,i)}static fromJsonString(e,i){return new ii().fromJsonString(e,i)}static equals(e,i){return T.util.equals(ii,e,i)}};p(ii,"runtime",T),p(ii,"typeName","yorkie.v1.Operation.ArraySet"),p(ii,"fields",T.util.newFieldList(()=>[{no:1,name:"parent_created_at",kind:"message",T:wt},{no:2,name:"created_at",kind:"message",T:wt},{no:3,name:"value",kind:"message",T:Dn},{no:4,name:"executed_at",kind:"message",T:wt}]));let Hm=ii;const si=class si extends mt{constructor(e){super();p(this,"createdAt");p(this,"movedAt");p(this,"removedAt");p(this,"type",0);p(this,"value",new Uint8Array(0));T.util.initPartial(e,this)}static fromBinary(e,i){return new si().fromBinary(e,i)}static fromJson(e,i){return new si().fromJson(e,i)}static fromJsonString(e,i){return new si().fromJsonString(e,i)}static equals(e,i){return T.util.equals(si,e,i)}};p(si,"runtime",T),p(si,"typeName","yorkie.v1.JSONElementSimple"),p(si,"fields",T.util.newFieldList(()=>[{no:1,name:"created_at",kind:"message",T:wt},{no:2,name:"moved_at",kind:"message",T:wt},{no:3,name:"removed_at",kind:"message",T:wt},{no:4,name:"type",kind:"enum",T:T.getEnumType(It)},{no:5,name:"value",kind:"scalar",T:12}]));let Dn=si;const ai=class ai extends mt{constructor(e){super();p(this,"body",{case:void 0});T.util.initPartial(e,this)}static fromBinary(e,i){return new ai().fromBinary(e,i)}static fromJson(e,i){return new ai().fromJson(e,i)}static fromJsonString(e,i){return new ai().fromJsonString(e,i)}static equals(e,i){return T.util.equals(ai,e,i)}};p(ai,"runtime",T),p(ai,"typeName","yorkie.v1.JSONElement"),p(ai,"fields",T.util.newFieldList(()=>[{no:1,name:"json_object",kind:"message",T:sd,oneof:"body"},{no:2,name:"json_array",kind:"message",T:ad,oneof:"body"},{no:3,name:"primitive",kind:"message",T:od,oneof:"body"},{no:5,name:"text",kind:"message",T:ld,oneof:"body"},{no:6,name:"counter",kind:"message",T:ud,oneof:"body"},{no:7,name:"tree",kind:"message",T:cd,oneof:"body"}]));let sn=ai;const oi=class oi extends mt{constructor(e){super();p(this,"nodes",[]);p(this,"createdAt");p(this,"movedAt");p(this,"removedAt");T.util.initPartial(e,this)}static fromBinary(e,i){return new oi().fromBinary(e,i)}static fromJson(e,i){return new oi().fromJson(e,i)}static fromJsonString(e,i){return new oi().fromJsonString(e,i)}static equals(e,i){return T.util.equals(oi,e,i)}};p(oi,"runtime",T),p(oi,"typeName","yorkie.v1.JSONElement.JSONObject"),p(oi,"fields",T.util.newFieldList(()=>[{no:1,name:"nodes",kind:"message",T:D1,repeated:!0},{no:2,name:"created_at",kind:"message",T:wt},{no:3,name:"moved_at",kind:"message",T:wt},{no:4,name:"removed_at",kind:"message",T:wt}]));let sd=oi;const li=class li extends mt{constructor(e){super();p(this,"nodes",[]);p(this,"createdAt");p(this,"movedAt");p(this,"removedAt");T.util.initPartial(e,this)}static fromBinary(e,i){return new li().fromBinary(e,i)}static fromJson(e,i){return new li().fromJson(e,i)}static fromJsonString(e,i){return new li().fromJsonString(e,i)}static equals(e,i){return T.util.equals(li,e,i)}};p(li,"runtime",T),p(li,"typeName","yorkie.v1.JSONElement.JSONArray"),p(li,"fields",T.util.newFieldList(()=>[{no:1,name:"nodes",kind:"message",T:fd,repeated:!0},{no:2,name:"created_at",kind:"message",T:wt},{no:3,name:"moved_at",kind:"message",T:wt},{no:4,name:"removed_at",kind:"message",T:wt}]));let ad=li;const ui=class ui extends mt{constructor(e){super();p(this,"type",0);p(this,"value",new Uint8Array(0));p(this,"createdAt");p(this,"movedAt");p(this,"removedAt");T.util.initPartial(e,this)}static fromBinary(e,i){return new ui().fromBinary(e,i)}static fromJson(e,i){return new ui().fromJson(e,i)}static fromJsonString(e,i){return new ui().fromJsonString(e,i)}static equals(e,i){return T.util.equals(ui,e,i)}};p(ui,"runtime",T),p(ui,"typeName","yorkie.v1.JSONElement.Primitive"),p(ui,"fields",T.util.newFieldList(()=>[{no:1,name:"type",kind:"enum",T:T.getEnumType(It)},{no:2,name:"value",kind:"scalar",T:12},{no:3,name:"created_at",kind:"message",T:wt},{no:4,name:"moved_at",kind:"message",T:wt},{no:5,name:"removed_at",kind:"message",T:wt}]));let od=ui;const ci=class ci extends mt{constructor(e){super();p(this,"nodes",[]);p(this,"createdAt");p(this,"movedAt");p(this,"removedAt");T.util.initPartial(e,this)}static fromBinary(e,i){return new ci().fromBinary(e,i)}static fromJson(e,i){return new ci().fromJson(e,i)}static fromJsonString(e,i){return new ci().fromJsonString(e,i)}static equals(e,i){return T.util.equals(ci,e,i)}};p(ci,"runtime",T),p(ci,"typeName","yorkie.v1.JSONElement.Text"),p(ci,"fields",T.util.newFieldList(()=>[{no:1,name:"nodes",kind:"message",T:dd,repeated:!0},{no:2,name:"created_at",kind:"message",T:wt},{no:3,name:"moved_at",kind:"message",T:wt},{no:4,name:"removed_at",kind:"message",T:wt}]));let ld=ci;const fi=class fi extends mt{constructor(e){super();p(this,"type",0);p(this,"value",new Uint8Array(0));p(this,"createdAt");p(this,"movedAt");p(this,"removedAt");T.util.initPartial(e,this)}static fromBinary(e,i){return new fi().fromBinary(e,i)}static fromJson(e,i){return new fi().fromJson(e,i)}static fromJsonString(e,i){return new fi().fromJsonString(e,i)}static equals(e,i){return T.util.equals(fi,e,i)}};p(fi,"runtime",T),p(fi,"typeName","yorkie.v1.JSONElement.Counter"),p(fi,"fields",T.util.newFieldList(()=>[{no:1,name:"type",kind:"enum",T:T.getEnumType(It)},{no:2,name:"value",kind:"scalar",T:12},{no:3,name:"created_at",kind:"message",T:wt},{no:4,name:"moved_at",kind:"message",T:wt},{no:5,name:"removed_at",kind:"message",T:wt}]));let ud=fi;const di=class di extends mt{constructor(e){super();p(this,"nodes",[]);p(this,"createdAt");p(this,"movedAt");p(this,"removedAt");T.util.initPartial(e,this)}static fromBinary(e,i){return new di().fromBinary(e,i)}static fromJson(e,i){return new di().fromJson(e,i)}static fromJsonString(e,i){return new di().fromJsonString(e,i)}static equals(e,i){return T.util.equals(di,e,i)}};p(di,"runtime",T),p(di,"typeName","yorkie.v1.JSONElement.Tree"),p(di,"fields",T.util.newFieldList(()=>[{no:1,name:"nodes",kind:"message",T:Cu,repeated:!0},{no:2,name:"created_at",kind:"message",T:wt},{no:3,name:"moved_at",kind:"message",T:wt},{no:4,name:"removed_at",kind:"message",T:wt}]));let cd=di;var Mn;let D1=(Mn=class extends mt{constructor(e){super();p(this,"key","");p(this,"element");T.util.initPartial(e,this)}static fromBinary(e,i){return new Mn().fromBinary(e,i)}static fromJson(e,i){return new Mn().fromJson(e,i)}static fromJsonString(e,i){return new Mn().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Mn,e,i)}},p(Mn,"runtime",T),p(Mn,"typeName","yorkie.v1.RHTNode"),p(Mn,"fields",T.util.newFieldList(()=>[{no:1,name:"key",kind:"scalar",T:9},{no:2,name:"element",kind:"message",T:sn}])),Mn);const ur=class ur extends mt{constructor(e){super();p(this,"next");p(this,"element");T.util.initPartial(e,this)}static fromBinary(e,i){return new ur().fromBinary(e,i)}static fromJson(e,i){return new ur().fromJson(e,i)}static fromJsonString(e,i){return new ur().fromJsonString(e,i)}static equals(e,i){return T.util.equals(ur,e,i)}};p(ur,"runtime",T),p(ur,"typeName","yorkie.v1.RGANode"),p(ur,"fields",T.util.newFieldList(()=>[{no:1,name:"next",kind:"message",T:ur},{no:2,name:"element",kind:"message",T:sn}]));let fd=ur;const hi=class hi extends mt{constructor(e){super();p(this,"value","");p(this,"updatedAt");p(this,"isRemoved",!1);T.util.initPartial(e,this)}static fromBinary(e,i){return new hi().fromBinary(e,i)}static fromJson(e,i){return new hi().fromJson(e,i)}static fromJsonString(e,i){return new hi().fromJsonString(e,i)}static equals(e,i){return T.util.equals(hi,e,i)}};p(hi,"runtime",T),p(hi,"typeName","yorkie.v1.NodeAttr"),p(hi,"fields",T.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:9},{no:2,name:"updated_at",kind:"message",T:wt},{no:3,name:"is_removed",kind:"scalar",T:8}]));let Yo=hi;const gi=class gi extends mt{constructor(e){super();p(this,"id");p(this,"value","");p(this,"removedAt");p(this,"insPrevId");p(this,"attributes",{});T.util.initPartial(e,this)}static fromBinary(e,i){return new gi().fromBinary(e,i)}static fromJson(e,i){return new gi().fromJson(e,i)}static fromJsonString(e,i){return new gi().fromJsonString(e,i)}static equals(e,i){return T.util.equals(gi,e,i)}};p(gi,"runtime",T),p(gi,"typeName","yorkie.v1.TextNode"),p(gi,"fields",T.util.newFieldList(()=>[{no:1,name:"id",kind:"message",T:Du},{no:2,name:"value",kind:"scalar",T:9},{no:3,name:"removed_at",kind:"message",T:wt},{no:4,name:"ins_prev_id",kind:"message",T:Du},{no:5,name:"attributes",kind:"map",K:9,V:{kind:"message",T:Yo}}]));let dd=gi;const mi=class mi extends mt{constructor(e){super();p(this,"createdAt");p(this,"offset",0);T.util.initPartial(e,this)}static fromBinary(e,i){return new mi().fromBinary(e,i)}static fromJson(e,i){return new mi().fromJson(e,i)}static fromJsonString(e,i){return new mi().fromJsonString(e,i)}static equals(e,i){return T.util.equals(mi,e,i)}};p(mi,"runtime",T),p(mi,"typeName","yorkie.v1.TextNodeID"),p(mi,"fields",T.util.newFieldList(()=>[{no:1,name:"created_at",kind:"message",T:wt},{no:2,name:"offset",kind:"scalar",T:5}]));let Du=mi;const yi=class yi extends mt{constructor(e){super();p(this,"id");p(this,"type","");p(this,"value","");p(this,"removedAt");p(this,"insPrevId");p(this,"insNextId");p(this,"depth",0);p(this,"attributes",{});T.util.initPartial(e,this)}static fromBinary(e,i){return new yi().fromBinary(e,i)}static fromJson(e,i){return new yi().fromJson(e,i)}static fromJsonString(e,i){return new yi().fromJsonString(e,i)}static equals(e,i){return T.util.equals(yi,e,i)}};p(yi,"runtime",T),p(yi,"typeName","yorkie.v1.TreeNode"),p(yi,"fields",T.util.newFieldList(()=>[{no:1,name:"id",kind:"message",T:Qs},{no:2,name:"type",kind:"scalar",T:9},{no:3,name:"value",kind:"scalar",T:9},{no:4,name:"removed_at",kind:"message",T:wt},{no:5,name:"ins_prev_id",kind:"message",T:Qs},{no:6,name:"ins_next_id",kind:"message",T:Qs},{no:7,name:"depth",kind:"scalar",T:5},{no:8,name:"attributes",kind:"map",K:9,V:{kind:"message",T:Yo}}]));let Cu=yi;const pi=class pi extends mt{constructor(e){super();p(this,"content",[]);T.util.initPartial(e,this)}static fromBinary(e,i){return new pi().fromBinary(e,i)}static fromJson(e,i){return new pi().fromJson(e,i)}static fromJsonString(e,i){return new pi().fromJsonString(e,i)}static equals(e,i){return T.util.equals(pi,e,i)}};p(pi,"runtime",T),p(pi,"typeName","yorkie.v1.TreeNodes"),p(pi,"fields",T.util.newFieldList(()=>[{no:1,name:"content",kind:"message",T:Cu,repeated:!0}]));let hd=pi;const vi=class vi extends mt{constructor(e){super();p(this,"createdAt");p(this,"offset",0);T.util.initPartial(e,this)}static fromBinary(e,i){return new vi().fromBinary(e,i)}static fromJson(e,i){return new vi().fromJson(e,i)}static fromJsonString(e,i){return new vi().fromJsonString(e,i)}static equals(e,i){return T.util.equals(vi,e,i)}};p(vi,"runtime",T),p(vi,"typeName","yorkie.v1.TreeNodeID"),p(vi,"fields",T.util.newFieldList(()=>[{no:1,name:"created_at",kind:"message",T:wt},{no:2,name:"offset",kind:"scalar",T:5}]));let Qs=vi;const wi=class wi extends mt{constructor(e){super();p(this,"parentId");p(this,"leftSiblingId");T.util.initPartial(e,this)}static fromBinary(e,i){return new wi().fromBinary(e,i)}static fromJson(e,i){return new wi().fromJson(e,i)}static fromJsonString(e,i){return new wi().fromJsonString(e,i)}static equals(e,i){return T.util.equals(wi,e,i)}};p(wi,"runtime",T),p(wi,"typeName","yorkie.v1.TreePos"),p(wi,"fields",T.util.newFieldList(()=>[{no:1,name:"parent_id",kind:"message",T:Qs},{no:2,name:"left_sibling_id",kind:"message",T:Qs}]));let za=wi;const Si=class Si extends mt{constructor(e){super();p(this,"id","");p(this,"authProvider","");p(this,"username","");p(this,"createdAt");T.util.initPartial(e,this)}static fromBinary(e,i){return new Si().fromBinary(e,i)}static fromJson(e,i){return new Si().fromJson(e,i)}static fromJsonString(e,i){return new Si().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Si,e,i)}};p(Si,"runtime",T),p(Si,"typeName","yorkie.v1.User"),p(Si,"fields",T.util.newFieldList(()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"auth_provider",kind:"scalar",T:9},{no:3,name:"username",kind:"scalar",T:9},{no:4,name:"created_at",kind:"message",T:Le}]));let kS=Si;const bi=class bi extends mt{constructor(e){super();p(this,"id","");p(this,"name","");p(this,"publicKey","");p(this,"secretKey","");p(this,"authWebhookUrl","");p(this,"authWebhookMethods",[]);p(this,"eventWebhookUrl","");p(this,"eventWebhookEvents",[]);p(this,"clientDeactivateThreshold","");p(this,"maxSubscribersPerDocument",0);p(this,"maxAttachmentsPerDocument",0);p(this,"maxSizePerDocument",0);p(this,"allowedOrigins",[]);p(this,"createdAt");p(this,"updatedAt");T.util.initPartial(e,this)}static fromBinary(e,i){return new bi().fromBinary(e,i)}static fromJson(e,i){return new bi().fromJson(e,i)}static fromJsonString(e,i){return new bi().fromJsonString(e,i)}static equals(e,i){return T.util.equals(bi,e,i)}};p(bi,"runtime",T),p(bi,"typeName","yorkie.v1.Project"),p(bi,"fields",T.util.newFieldList(()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"public_key",kind:"scalar",T:9},{no:4,name:"secret_key",kind:"scalar",T:9},{no:5,name:"auth_webhook_url",kind:"scalar",T:9},{no:6,name:"auth_webhook_methods",kind:"scalar",T:9,repeated:!0},{no:7,name:"event_webhook_url",kind:"scalar",T:9},{no:8,name:"event_webhook_events",kind:"scalar",T:9,repeated:!0},{no:9,name:"client_deactivate_threshold",kind:"scalar",T:9},{no:10,name:"max_subscribers_per_document",kind:"scalar",T:5},{no:11,name:"max_attachments_per_document",kind:"scalar",T:5},{no:15,name:"max_size_per_document",kind:"scalar",T:5},{no:14,name:"allowed_origins",kind:"scalar",T:9,repeated:!0},{no:12,name:"created_at",kind:"message",T:Le},{no:13,name:"updated_at",kind:"message",T:Le}]));let OS=bi;const xi=class xi extends mt{constructor(e){super();p(this,"timestamp",re.zero);p(this,"value",0);T.util.initPartial(e,this)}static fromBinary(e,i){return new xi().fromBinary(e,i)}static fromJson(e,i){return new xi().fromJson(e,i)}static fromJsonString(e,i){return new xi().fromJsonString(e,i)}static equals(e,i){return T.util.equals(xi,e,i)}};p(xi,"runtime",T),p(xi,"typeName","yorkie.v1.MetricPoint"),p(xi,"fields",T.util.newFieldList(()=>[{no:1,name:"timestamp",kind:"scalar",T:3},{no:2,name:"value",kind:"scalar",T:5}]));let IS=xi;const Ti=class Ti extends mt{constructor(e){super();p(this,"name");p(this,"authWebhookUrl");p(this,"authWebhookMethods");p(this,"eventWebhookUrl");p(this,"eventWebhookEvents");p(this,"clientDeactivateThreshold");p(this,"maxSubscribersPerDocument");p(this,"maxAttachmentsPerDocument");p(this,"maxSizePerDocument");p(this,"allowedOrigins");T.util.initPartial(e,this)}static fromBinary(e,i){return new Ti().fromBinary(e,i)}static fromJson(e,i){return new Ti().fromJson(e,i)}static fromJsonString(e,i){return new Ti().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Ti,e,i)}};p(Ti,"runtime",T),p(Ti,"typeName","yorkie.v1.UpdatableProjectFields"),p(Ti,"fields",T.util.newFieldList(()=>[{no:1,name:"name",kind:"message",T:We},{no:2,name:"auth_webhook_url",kind:"message",T:We},{no:3,name:"auth_webhook_methods",kind:"message",T:$m},{no:4,name:"event_webhook_url",kind:"message",T:We},{no:5,name:"event_webhook_events",kind:"message",T:Vm},{no:6,name:"client_deactivate_threshold",kind:"message",T:We},{no:7,name:"max_subscribers_per_document",kind:"message",T:mn},{no:8,name:"max_attachments_per_document",kind:"message",T:mn},{no:10,name:"max_size_per_document",kind:"message",T:mn},{no:9,name:"allowed_origins",kind:"message",T:jm}]));let RS=Ti;const Ai=class Ai extends mt{constructor(e){super();p(this,"methods",[]);T.util.initPartial(e,this)}static fromBinary(e,i){return new Ai().fromBinary(e,i)}static fromJson(e,i){return new Ai().fromJson(e,i)}static fromJsonString(e,i){return new Ai().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Ai,e,i)}};p(Ai,"runtime",T),p(Ai,"typeName","yorkie.v1.UpdatableProjectFields.AuthWebhookMethods"),p(Ai,"fields",T.util.newFieldList(()=>[{no:1,name:"methods",kind:"scalar",T:9,repeated:!0}]));let $m=Ai;const Ei=class Ei extends mt{constructor(e){super();p(this,"events",[]);T.util.initPartial(e,this)}static fromBinary(e,i){return new Ei().fromBinary(e,i)}static fromJson(e,i){return new Ei().fromJson(e,i)}static fromJsonString(e,i){return new Ei().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Ei,e,i)}};p(Ei,"runtime",T),p(Ei,"typeName","yorkie.v1.UpdatableProjectFields.EventWebhookEvents"),p(Ei,"fields",T.util.newFieldList(()=>[{no:1,name:"events",kind:"scalar",T:9,repeated:!0}]));let Vm=Ei;const Ni=class Ni extends mt{constructor(e){super();p(this,"origins",[]);T.util.initPartial(e,this)}static fromBinary(e,i){return new Ni().fromBinary(e,i)}static fromJson(e,i){return new Ni().fromJson(e,i)}static fromJsonString(e,i){return new Ni().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Ni,e,i)}};p(Ni,"runtime",T),p(Ni,"typeName","yorkie.v1.UpdatableProjectFields.AllowedOrigins"),p(Ni,"fields",T.util.newFieldList(()=>[{no:1,name:"origins",kind:"scalar",T:9,repeated:!0}]));let jm=Ni;const Di=class Di extends mt{constructor(e){super();p(this,"id","");p(this,"key","");p(this,"snapshot","");p(this,"attachedClients",0);p(this,"documentSize");p(this,"schemaKey","");p(this,"createdAt");p(this,"accessedAt");p(this,"updatedAt");T.util.initPartial(e,this)}static fromBinary(e,i){return new Di().fromBinary(e,i)}static fromJson(e,i){return new Di().fromJson(e,i)}static fromJsonString(e,i){return new Di().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Di,e,i)}};p(Di,"runtime",T),p(Di,"typeName","yorkie.v1.DocumentSummary"),p(Di,"fields",T.util.newFieldList(()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"key",kind:"scalar",T:9},{no:3,name:"snapshot",kind:"scalar",T:9},{no:7,name:"attached_clients",kind:"scalar",T:5},{no:8,name:"document_size",kind:"message",T:Xm},{no:9,name:"schema_key",kind:"scalar",T:9},{no:4,name:"created_at",kind:"message",T:Le},{no:5,name:"accessed_at",kind:"message",T:Le},{no:6,name:"updated_at",kind:"message",T:Le}]));let MS=Di;const Ci=class Ci extends mt{constructor(e){super();p(this,"type",0);p(this,"presence");T.util.initPartial(e,this)}static fromBinary(e,i){return new Ci().fromBinary(e,i)}static fromJson(e,i){return new Ci().fromJson(e,i)}static fromJsonString(e,i){return new Ci().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Ci,e,i)}};p(Ci,"runtime",T),p(Ci,"typeName","yorkie.v1.PresenceChange"),p(Ci,"fields",T.util.newFieldList(()=>[{no:1,name:"type",kind:"enum",T:T.getEnumType(La)},{no:2,name:"presence",kind:"message",T:By}]));let ku=Ci;var La=(n=>(n[n.UNSPECIFIED=0]="UNSPECIFIED",n[n.PUT=1]="PUT",n[n.DELETE=2]="DELETE",n[n.CLEAR=3]="CLEAR",n))(La||{});T.util.setEnumType(La,"yorkie.v1.PresenceChange.ChangeType",[{no:0,name:"CHANGE_TYPE_UNSPECIFIED"},{no:1,name:"CHANGE_TYPE_PUT"},{no:2,name:"CHANGE_TYPE_DELETE"},{no:3,name:"CHANGE_TYPE_CLEAR"}]);var Bn;let By=(Bn=class extends mt{constructor(e){super();p(this,"data",{});T.util.initPartial(e,this)}static fromBinary(e,i){return new Bn().fromBinary(e,i)}static fromJson(e,i){return new Bn().fromJson(e,i)}static fromJsonString(e,i){return new Bn().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Bn,e,i)}},p(Bn,"runtime",T),p(Bn,"typeName","yorkie.v1.Presence"),p(Bn,"fields",T.util.newFieldList(()=>[{no:1,name:"data",kind:"map",K:9,V:{kind:"scalar",T:9}}])),Bn);var zn;let C1=(zn=class extends mt{constructor(e){super();p(this,"serverSeq",re.zero);p(this,"clientSeq",0);T.util.initPartial(e,this)}static fromBinary(e,i){return new zn().fromBinary(e,i)}static fromJson(e,i){return new zn().fromJson(e,i)}static fromJsonString(e,i){return new zn().fromJsonString(e,i)}static equals(e,i){return T.util.equals(zn,e,i)}},p(zn,"runtime",T),p(zn,"typeName","yorkie.v1.Checkpoint"),p(zn,"fields",T.util.newFieldList(()=>[{no:1,name:"server_seq",kind:"scalar",T:3},{no:2,name:"client_seq",kind:"scalar",T:13}])),zn);const ki=class ki extends mt{constructor(e){super();p(this,"createdAt");p(this,"offset",0);p(this,"relativeOffset",0);T.util.initPartial(e,this)}static fromBinary(e,i){return new ki().fromBinary(e,i)}static fromJson(e,i){return new ki().fromJson(e,i)}static fromJsonString(e,i){return new ki().fromJsonString(e,i)}static equals(e,i){return T.util.equals(ki,e,i)}};p(ki,"runtime",T),p(ki,"typeName","yorkie.v1.TextNodePos"),p(ki,"fields",T.util.newFieldList(()=>[{no:1,name:"created_at",kind:"message",T:wt},{no:2,name:"offset",kind:"scalar",T:5},{no:3,name:"relative_offset",kind:"scalar",T:5}]));let os=ki;var Ln;let wt=(Ln=class extends mt{constructor(e){super();p(this,"lamport",re.zero);p(this,"delimiter",0);p(this,"actorId",new Uint8Array(0));T.util.initPartial(e,this)}static fromBinary(e,i){return new Ln().fromBinary(e,i)}static fromJson(e,i){return new Ln().fromJson(e,i)}static fromJsonString(e,i){return new Ln().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Ln,e,i)}},p(Ln,"runtime",T),p(Ln,"typeName","yorkie.v1.TimeTicket"),p(Ln,"fields",T.util.newFieldList(()=>[{no:1,name:"lamport",kind:"scalar",T:3},{no:2,name:"delimiter",kind:"scalar",T:13},{no:3,name:"actor_id",kind:"scalar",T:12}])),Ln);const Oi=class Oi extends mt{constructor(e){super();p(this,"topic","");p(this,"payload",new Uint8Array(0));T.util.initPartial(e,this)}static fromBinary(e,i){return new Oi().fromBinary(e,i)}static fromJson(e,i){return new Oi().fromJson(e,i)}static fromJsonString(e,i){return new Oi().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Oi,e,i)}};p(Oi,"runtime",T),p(Oi,"typeName","yorkie.v1.DocEventBody"),p(Oi,"fields",T.util.newFieldList(()=>[{no:1,name:"topic",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:12}]));let Ym=Oi;const Ii=class Ii extends mt{constructor(e){super();p(this,"type",0);p(this,"publisher","");p(this,"body");T.util.initPartial(e,this)}static fromBinary(e,i){return new Ii().fromBinary(e,i)}static fromJson(e,i){return new Ii().fromJson(e,i)}static fromJsonString(e,i){return new Ii().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Ii,e,i)}};p(Ii,"runtime",T),p(Ii,"typeName","yorkie.v1.DocEvent"),p(Ii,"fields",T.util.newFieldList(()=>[{no:1,name:"type",kind:"enum",T:T.getEnumType(Ra)},{no:2,name:"publisher",kind:"scalar",T:9},{no:3,name:"body",kind:"message",T:Ym}]));let Gm=Ii;const Ri=class Ri extends mt{constructor(e){super();p(this,"data",0);p(this,"meta",0);T.util.initPartial(e,this)}static fromBinary(e,i){return new Ri().fromBinary(e,i)}static fromJson(e,i){return new Ri().fromJson(e,i)}static fromJsonString(e,i){return new Ri().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Ri,e,i)}};p(Ri,"runtime",T),p(Ri,"typeName","yorkie.v1.DataSize"),p(Ri,"fields",T.util.newFieldList(()=>[{no:1,name:"data",kind:"scalar",T:5},{no:2,name:"meta",kind:"scalar",T:5}]));let gd=Ri;const Mi=class Mi extends mt{constructor(e){super();p(this,"live");p(this,"gc");T.util.initPartial(e,this)}static fromBinary(e,i){return new Mi().fromBinary(e,i)}static fromJson(e,i){return new Mi().fromJson(e,i)}static fromJsonString(e,i){return new Mi().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Mi,e,i)}};p(Mi,"runtime",T),p(Mi,"typeName","yorkie.v1.DocSize"),p(Mi,"fields",T.util.newFieldList(()=>[{no:1,name:"live",kind:"message",T:gd},{no:2,name:"gc",kind:"message",T:gd}]));let Xm=Mi;const Bi=class Bi extends mt{constructor(e){super();p(this,"id","");p(this,"name","");p(this,"version",0);p(this,"body","");p(this,"rules",[]);p(this,"createdAt");T.util.initPartial(e,this)}static fromBinary(e,i){return new Bi().fromBinary(e,i)}static fromJson(e,i){return new Bi().fromJson(e,i)}static fromJsonString(e,i){return new Bi().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Bi,e,i)}};p(Bi,"runtime",T),p(Bi,"typeName","yorkie.v1.Schema"),p(Bi,"fields",T.util.newFieldList(()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"version",kind:"scalar",T:5},{no:4,name:"body",kind:"scalar",T:9},{no:5,name:"rules",kind:"message",T:md,repeated:!0},{no:6,name:"created_at",kind:"message",T:Le}]));let BS=Bi;const zi=class zi extends mt{constructor(e){super();p(this,"path","");p(this,"type","");T.util.initPartial(e,this)}static fromBinary(e,i){return new zi().fromBinary(e,i)}static fromJson(e,i){return new zi().fromJson(e,i)}static fromJsonString(e,i){return new zi().fromJsonString(e,i)}static equals(e,i){return T.util.equals(zi,e,i)}};p(zi,"runtime",T),p(zi,"typeName","yorkie.v1.Rule"),p(zi,"fields",T.util.newFieldList(()=>[{no:1,name:"path",kind:"scalar",T:9},{no:2,name:"type",kind:"scalar",T:9}]));let md=zi;const Li=class Li extends mt{constructor(e){super();p(this,"clientKey","");p(this,"metadata",{});T.util.initPartial(e,this)}static fromBinary(e,i){return new Li().fromBinary(e,i)}static fromJson(e,i){return new Li().fromJson(e,i)}static fromJsonString(e,i){return new Li().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Li,e,i)}};p(Li,"runtime",T),p(Li,"typeName","yorkie.v1.ActivateClientRequest"),p(Li,"fields",T.util.newFieldList(()=>[{no:1,name:"client_key",kind:"scalar",T:9},{no:2,name:"metadata",kind:"map",K:9,V:{kind:"scalar",T:9}}]));let Km=Li;const _i=class _i extends mt{constructor(e){super();p(this,"clientId","");T.util.initPartial(e,this)}static fromBinary(e,i){return new _i().fromBinary(e,i)}static fromJson(e,i){return new _i().fromJson(e,i)}static fromJsonString(e,i){return new _i().fromJsonString(e,i)}static equals(e,i){return T.util.equals(_i,e,i)}};p(_i,"runtime",T),p(_i,"typeName","yorkie.v1.ActivateClientResponse"),p(_i,"fields",T.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9}]));let Fm=_i;const Ui=class Ui extends mt{constructor(e){super();p(this,"clientId","");T.util.initPartial(e,this)}static fromBinary(e,i){return new Ui().fromBinary(e,i)}static fromJson(e,i){return new Ui().fromJson(e,i)}static fromJsonString(e,i){return new Ui().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Ui,e,i)}};p(Ui,"runtime",T),p(Ui,"typeName","yorkie.v1.DeactivateClientRequest"),p(Ui,"fields",T.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9}]));let Zm=Ui;const qi=class qi extends mt{constructor(t){super(),T.util.initPartial(t,this)}static fromBinary(t,e){return new qi().fromBinary(t,e)}static fromJson(t,e){return new qi().fromJson(t,e)}static fromJsonString(t,e){return new qi().fromJsonString(t,e)}static equals(t,e){return T.util.equals(qi,t,e)}};p(qi,"runtime",T),p(qi,"typeName","yorkie.v1.DeactivateClientResponse"),p(qi,"fields",T.util.newFieldList(()=>[]));let Qm=qi;const Pi=class Pi extends mt{constructor(e){super();p(this,"clientId","");p(this,"changePack");p(this,"schemaKey","");T.util.initPartial(e,this)}static fromBinary(e,i){return new Pi().fromBinary(e,i)}static fromJson(e,i){return new Pi().fromJson(e,i)}static fromJsonString(e,i){return new Pi().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Pi,e,i)}};p(Pi,"runtime",T),p(Pi,"typeName","yorkie.v1.AttachDocumentRequest"),p(Pi,"fields",T.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"change_pack",kind:"message",T:cs},{no:3,name:"schema_key",kind:"scalar",T:9}]));let Wm=Pi;const Ji=class Ji extends mt{constructor(e){super();p(this,"documentId","");p(this,"changePack");p(this,"maxSizePerDocument",0);p(this,"schemaRules",[]);T.util.initPartial(e,this)}static fromBinary(e,i){return new Ji().fromBinary(e,i)}static fromJson(e,i){return new Ji().fromJson(e,i)}static fromJsonString(e,i){return new Ji().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Ji,e,i)}};p(Ji,"runtime",T),p(Ji,"typeName","yorkie.v1.AttachDocumentResponse"),p(Ji,"fields",T.util.newFieldList(()=>[{no:1,name:"document_id",kind:"scalar",T:9},{no:2,name:"change_pack",kind:"message",T:cs},{no:3,name:"max_size_per_document",kind:"scalar",T:5},{no:4,name:"schema_rules",kind:"message",T:md,repeated:!0}]));let ty=Ji;const Hi=class Hi extends mt{constructor(e){super();p(this,"clientId","");p(this,"documentId","");p(this,"changePack");p(this,"removeIfNotAttached",!1);T.util.initPartial(e,this)}static fromBinary(e,i){return new Hi().fromBinary(e,i)}static fromJson(e,i){return new Hi().fromJson(e,i)}static fromJsonString(e,i){return new Hi().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Hi,e,i)}};p(Hi,"runtime",T),p(Hi,"typeName","yorkie.v1.DetachDocumentRequest"),p(Hi,"fields",T.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:cs},{no:4,name:"remove_if_not_attached",kind:"scalar",T:8}]));let ey=Hi;const $i=class $i extends mt{constructor(e){super();p(this,"changePack");T.util.initPartial(e,this)}static fromBinary(e,i){return new $i().fromBinary(e,i)}static fromJson(e,i){return new $i().fromJson(e,i)}static fromJsonString(e,i){return new $i().fromJsonString(e,i)}static equals(e,i){return T.util.equals($i,e,i)}};p($i,"runtime",T),p($i,"typeName","yorkie.v1.DetachDocumentResponse"),p($i,"fields",T.util.newFieldList(()=>[{no:2,name:"change_pack",kind:"message",T:cs}]));let ny=$i;const Vi=class Vi extends mt{constructor(e){super();p(this,"clientId","");p(this,"documentId","");T.util.initPartial(e,this)}static fromBinary(e,i){return new Vi().fromBinary(e,i)}static fromJson(e,i){return new Vi().fromJson(e,i)}static fromJsonString(e,i){return new Vi().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Vi,e,i)}};p(Vi,"runtime",T),p(Vi,"typeName","yorkie.v1.WatchDocumentRequest"),p(Vi,"fields",T.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9}]));let ry=Vi;const ji=class ji extends mt{constructor(e){super();p(this,"body",{case:void 0});T.util.initPartial(e,this)}static fromBinary(e,i){return new ji().fromBinary(e,i)}static fromJson(e,i){return new ji().fromJson(e,i)}static fromJsonString(e,i){return new ji().fromJsonString(e,i)}static equals(e,i){return T.util.equals(ji,e,i)}};p(ji,"runtime",T),p(ji,"typeName","yorkie.v1.WatchDocumentResponse"),p(ji,"fields",T.util.newFieldList(()=>[{no:1,name:"initialization",kind:"message",T:sy,oneof:"body"},{no:2,name:"event",kind:"message",T:Gm,oneof:"body"}]));let iy=ji;const Yi=class Yi extends mt{constructor(e){super();p(this,"clientIds",[]);T.util.initPartial(e,this)}static fromBinary(e,i){return new Yi().fromBinary(e,i)}static fromJson(e,i){return new Yi().fromJson(e,i)}static fromJsonString(e,i){return new Yi().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Yi,e,i)}};p(Yi,"runtime",T),p(Yi,"typeName","yorkie.v1.WatchDocumentResponse.Initialization"),p(Yi,"fields",T.util.newFieldList(()=>[{no:1,name:"client_ids",kind:"scalar",T:9,repeated:!0}]));let sy=Yi;const Gi=class Gi extends mt{constructor(e){super();p(this,"clientId","");p(this,"documentId","");p(this,"changePack");T.util.initPartial(e,this)}static fromBinary(e,i){return new Gi().fromBinary(e,i)}static fromJson(e,i){return new Gi().fromJson(e,i)}static fromJsonString(e,i){return new Gi().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Gi,e,i)}};p(Gi,"runtime",T),p(Gi,"typeName","yorkie.v1.RemoveDocumentRequest"),p(Gi,"fields",T.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:cs}]));let ay=Gi;const Xi=class Xi extends mt{constructor(e){super();p(this,"changePack");T.util.initPartial(e,this)}static fromBinary(e,i){return new Xi().fromBinary(e,i)}static fromJson(e,i){return new Xi().fromJson(e,i)}static fromJsonString(e,i){return new Xi().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Xi,e,i)}};p(Xi,"runtime",T),p(Xi,"typeName","yorkie.v1.RemoveDocumentResponse"),p(Xi,"fields",T.util.newFieldList(()=>[{no:1,name:"change_pack",kind:"message",T:cs}]));let oy=Xi;const Ki=class Ki extends mt{constructor(e){super();p(this,"clientId","");p(this,"documentId","");p(this,"changePack");p(this,"pushOnly",!1);T.util.initPartial(e,this)}static fromBinary(e,i){return new Ki().fromBinary(e,i)}static fromJson(e,i){return new Ki().fromJson(e,i)}static fromJsonString(e,i){return new Ki().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Ki,e,i)}};p(Ki,"runtime",T),p(Ki,"typeName","yorkie.v1.PushPullChangesRequest"),p(Ki,"fields",T.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:cs},{no:4,name:"push_only",kind:"scalar",T:8}]));let ly=Ki;const Fi=class Fi extends mt{constructor(e){super();p(this,"changePack");T.util.initPartial(e,this)}static fromBinary(e,i){return new Fi().fromBinary(e,i)}static fromJson(e,i){return new Fi().fromJson(e,i)}static fromJsonString(e,i){return new Fi().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Fi,e,i)}};p(Fi,"runtime",T),p(Fi,"typeName","yorkie.v1.PushPullChangesResponse"),p(Fi,"fields",T.util.newFieldList(()=>[{no:1,name:"change_pack",kind:"message",T:cs}]));let uy=Fi;const Zi=class Zi extends mt{constructor(e){super();p(this,"clientId","");p(this,"documentId","");p(this,"topic","");p(this,"payload",new Uint8Array(0));T.util.initPartial(e,this)}static fromBinary(e,i){return new Zi().fromBinary(e,i)}static fromJson(e,i){return new Zi().fromJson(e,i)}static fromJsonString(e,i){return new Zi().fromJsonString(e,i)}static equals(e,i){return T.util.equals(Zi,e,i)}};p(Zi,"runtime",T),p(Zi,"typeName","yorkie.v1.BroadcastRequest"),p(Zi,"fields",T.util.newFieldList(()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"topic",kind:"scalar",T:9},{no:4,name:"payload",kind:"scalar",T:12}]));let cy=Zi;const Qi=class Qi extends mt{constructor(t){super(),T.util.initPartial(t,this)}static fromBinary(t,e){return new Qi().fromBinary(t,e)}static fromJson(t,e){return new Qi().fromJson(t,e)}static fromJsonString(t,e){return new Qi().fromJsonString(t,e)}static equals(t,e){return T.util.equals(Qi,t,e)}};p(Qi,"runtime",T),p(Qi,"typeName","yorkie.v1.BroadcastResponse"),p(Qi,"fields",T.util.newFieldList(()=>[]));let fy=Qi;const R2={typeName:"yorkie.v1.YorkieService",methods:{activateClient:{name:"ActivateClient",I:Km,O:Fm,kind:je.Unary},deactivateClient:{name:"DeactivateClient",I:Zm,O:Qm,kind:je.Unary},attachDocument:{name:"AttachDocument",I:Wm,O:ty,kind:je.Unary},detachDocument:{name:"DetachDocument",I:ey,O:ny,kind:je.Unary},removeDocument:{name:"RemoveDocument",I:ay,O:oy,kind:je.Unary},pushPullChanges:{name:"PushPullChanges",I:ly,O:uy,kind:je.Unary},watchDocument:{name:"WatchDocument",I:ry,O:iy,kind:je.ServerStreaming},broadcast:{name:"Broadcast",I:cy,O:fy,kind:je.Unary}}},M2=T.makeMessageType("google.rpc.ErrorInfo",()=>[{no:1,name:"reason",kind:"scalar",T:9},{no:2,name:"domain",kind:"scalar",T:9},{no:3,name:"metadata",kind:"map",K:9,V:{kind:"scalar",T:9}}]);T.makeMessageType("google.rpc.RetryInfo",()=>[{no:1,name:"retry_delay",kind:"message",T:ts}]);T.makeMessageType("google.rpc.DebugInfo",()=>[{no:1,name:"stack_entries",kind:"scalar",T:9,repeated:!0},{no:2,name:"detail",kind:"scalar",T:9}]);T.makeMessageType("google.rpc.QuotaFailure",()=>[{no:1,name:"violations",kind:"message",T:B2,repeated:!0}]);const B2=T.makeMessageType("google.rpc.QuotaFailure.Violation",()=>[{no:1,name:"subject",kind:"scalar",T:9},{no:2,name:"description",kind:"scalar",T:9}],{localName:"QuotaFailure_Violation"});T.makeMessageType("google.rpc.PreconditionFailure",()=>[{no:1,name:"violations",kind:"message",T:z2,repeated:!0}]);const z2=T.makeMessageType("google.rpc.PreconditionFailure.Violation",()=>[{no:1,name:"type",kind:"scalar",T:9},{no:2,name:"subject",kind:"scalar",T:9},{no:3,name:"description",kind:"scalar",T:9}],{localName:"PreconditionFailure_Violation"});T.makeMessageType("google.rpc.BadRequest",()=>[{no:1,name:"field_violations",kind:"message",T:L2,repeated:!0}]);const L2=T.makeMessageType("google.rpc.BadRequest.FieldViolation",()=>[{no:1,name:"field",kind:"scalar",T:9},{no:2,name:"description",kind:"scalar",T:9},{no:3,name:"reason",kind:"scalar",T:9},{no:4,name:"localized_message",kind:"message",T:U2}],{localName:"BadRequest_FieldViolation"});T.makeMessageType("google.rpc.RequestInfo",()=>[{no:1,name:"request_id",kind:"scalar",T:9},{no:2,name:"serving_data",kind:"scalar",T:9}]);T.makeMessageType("google.rpc.ResourceInfo",()=>[{no:1,name:"resource_type",kind:"scalar",T:9},{no:2,name:"resource_name",kind:"scalar",T:9},{no:3,name:"owner",kind:"scalar",T:9},{no:4,name:"description",kind:"scalar",T:9}]);T.makeMessageType("google.rpc.Help",()=>[{no:1,name:"links",kind:"message",T:_2,repeated:!0}]);const _2=T.makeMessageType("google.rpc.Help.Link",()=>[{no:1,name:"description",kind:"scalar",T:9},{no:2,name:"url",kind:"scalar",T:9}],{localName:"Help_Link"}),U2=T.makeMessageType("google.rpc.LocalizedMessage",()=>[{no:1,name:"locale",kind:"scalar",T:9},{no:2,name:"message",kind:"scalar",T:9}]);var V=(n=>(n.Ok="ok",n.ErrClientNotActivated="ErrClientNotActivated",n.ErrClientNotFound="ErrClientNotFound",n.ErrUnimplemented="ErrUnimplemented",n.ErrInvalidType="ErrInvalidType",n.ErrDummy="ErrDummy",n.ErrDocumentNotAttached="ErrDocumentNotAttached",n.ErrDocumentNotDetached="ErrDocumentNotDetached",n.ErrDocumentRemoved="ErrDocumentRemoved",n.ErrDocumentSizeExceedsLimit="ErrDocumentSizeExceedsLimit",n.ErrDocumentSchemaValidationFailed="ErrDocumentSchemaValidationFailed",n.ErrInvalidObjectKey="ErrInvalidObjectKey",n.ErrInvalidArgument="ErrInvalidArgument",n.ErrNotInitialized="ErrNotInitialized",n.ErrNotReady="ErrNotReady",n.ErrRefused="ErrRefused",n.ErrContextNotProvided="ErrContextNotProvided",n.ErrPermissionDenied="ErrPermissionDenied",n.ErrUnauthenticated="ErrUnauthenticated",n.ErrTooManySubscribers="ErrTooManySubscribers",n.ErrTooManyAttachments="ErrTooManyAttachments",n))(V||{});class G extends Error{constructor(e,i){super(i);p(this,"name","YorkieError");p(this,"stack");this.code=e,this.message=i,this.toString=()=>`[code=${this.code}]: ${this.message}`}}var Ar=(n=>(n.Put="put",n.Clear="clear",n))(Ar||{});const Ld="000000000000000000000000",Sr=24;class qn{constructor(t,e,i){p(this,"lamport");p(this,"delimiter");p(this,"actorID");this.lamport=t,this.delimiter=e,this.actorID=i}static of(t,e,i){return new qn(t,e,i)}static fromStruct(t){return qn.of(BigInt(t.lamport),t.delimiter,t.actorID)}toIDString(){return`${this.lamport.toString()}:${this.actorID}:${this.delimiter}`}toStruct(){return{lamport:this.getLamportAsString(),delimiter:this.getDelimiter(),actorID:this.getActorID()}}toTestString(){return`${this.lamport.toString()}:${this.actorID.slice(-2)}:${this.delimiter}`}setActor(t){return new qn(this.lamport,this.delimiter,t)}getLamportAsString(){return this.lamport.toString()}getLamport(){return this.lamport}getDelimiter(){return this.delimiter}getActorID(){return this.actorID}after(t){return this.compare(t)>0}equals(t){return this.compare(t)===0}compare(t){if(this.lamport>t.lamport)return 1;if(t.lamport>this.lamport)return-1;const e=this.actorID.localeCompare(t.actorID);return e!==0?e:this.delimiter>t.delimiter?1:t.delimiter>this.delimiter?-1:0}}const dy=0n,k1=0,bu=9223372036854775807n,Go=new qn(dy,k1,Ld);function wr(n){return n.replace(/["'\\\n\r\f\b\t\u2028\u2029]/g,function(t){switch(t){case'"':case"\\":return"\\"+t;case`
`:return"\\n";case"\r":return"\\r";case"\f":return"\\f";case"\b":return"\\b";case"	":return"\\t";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:return t}})}class Gu{constructor(t){p(this,"createdAt");p(this,"movedAt");p(this,"removedAt");this.createdAt=t}getCreatedAt(){return this.createdAt}getID(){return this.createdAt}getMovedAt(){return this.movedAt}getRemovedAt(){return this.removedAt}getPositionedAt(){return this.movedAt?this.movedAt:this.createdAt}setMovedAt(t){return!this.movedAt||t&&t.after(this.movedAt)?(this.movedAt=t,!0):!1}setRemovedAt(t){this.removedAt=t}remove(t){return t&&t.after(this.getPositionedAt())&&(!this.removedAt||t.after(this.removedAt))?(this.removedAt=t,!0):!1}isRemoved(){return!!this.removedAt}getMetaUsage(){let t=0;return this.getCreatedAt()&&(t+=Sr),this.getMovedAt()&&(t+=Sr),this.getRemovedAt()&&(t+=Sr),t}}class Ws extends Gu{constructor(t){super(t)}}class zy{constructor(t,e){p(this,"strKey");p(this,"value");this.strKey=t,this.value=e}static of(t,e){return new zy(t,e)}isRemoved(){return this.value.isRemoved()}getStrKey(){return this.strKey}getValue(){return this.value}remove(t){return this.value.remove(t)}}class Ou{constructor(){p(this,"nodeMapByKey");p(this,"nodeMapByCreatedAt");this.nodeMapByKey=new Map,this.nodeMapByCreatedAt=new Map}static create(){return new Ou}set(t,e,i){let a;const l=this.nodeMapByKey.get(t);l!=null&&!l.isRemoved()&&l.remove(i)&&(a=l.getValue());const c=zy.of(t,e);return this.nodeMapByCreatedAt.set(e.getCreatedAt().toIDString(),c),(l==null||i.after(l.getValue().getPositionedAt()))&&(this.nodeMapByKey.set(t,c),e.setMovedAt(i)),a}delete(t,e){if(!this.nodeMapByCreatedAt.has(t.toIDString()))throw new G(V.ErrInvalidArgument,`fail to find ${t.toIDString()}`);const i=this.nodeMapByCreatedAt.get(t.toIDString());return i.remove(e),i.getValue()}subPathOf(t){const e=this.nodeMapByCreatedAt.get(t.toIDString());if(e)return e.getStrKey()}purge(t){const e=this.nodeMapByCreatedAt.get(t.getCreatedAt().toIDString());if(!e)throw new G(V.ErrInvalidArgument,`fail to find ${t.getCreatedAt().toIDString()}`);const i=this.nodeMapByKey.get(e.getStrKey());e===i&&this.nodeMapByKey.delete(i.getStrKey()),this.nodeMapByCreatedAt.delete(e.getValue().getCreatedAt().toIDString())}deleteByKey(t,e){const i=this.nodeMapByKey.get(t);if(i!=null&&i.remove(e))return i.getValue()}has(t){const e=this.nodeMapByKey.get(t);return e==null?!1:!e.isRemoved()}getByID(t){return this.nodeMapByCreatedAt.get(t.toIDString())}get(t){const e=this.nodeMapByKey.get(t);if(!(!e||e.isRemoved()))return e}*[Symbol.iterator](){for(const[,t]of this.nodeMapByKey)yield t}}class He extends Ws{constructor(e,i){super(e);p(this,"memberNodes");this.memberNodes=i}static create(e,i){if(!i)return new He(e,Ou.create());const a=Ou.create();for(const[l,c]of Object.entries(i))a.set(l,c.deepcopy(),c.getCreatedAt());return new He(e,a)}subPathOf(e){return this.memberNodes.subPathOf(e)}purge(e){this.memberNodes.purge(e)}set(e,i,a){return this.memberNodes.set(e,i,a)}delete(e,i){return this.memberNodes.delete(e,i)}deleteByKey(e,i){return this.memberNodes.deleteByKey(e,i)}get(e){const i=this.memberNodes.get(e);return i==null?void 0:i.getValue()}getByID(e){const i=this.memberNodes.getByID(e);return i==null?void 0:i.getValue()}has(e){return this.memberNodes.has(e)}getDataSize(){return{data:0,meta:this.getMetaUsage()}}toJSON(){const e=[];for(const[i,a]of this)e.push(`"${wr(i)}":${a.toJSON()}`);return`{${e.join(",")}}`}toJS(){return JSON.parse(this.toJSON())}toJSForTest(){const e={};for(const[i,a]of this){const{createdAt:l,value:c,type:d}=a.toJSForTest();e[i]={key:i,createdAt:l,value:c,type:d}}return{createdAt:this.getCreatedAt().toTestString(),value:e,type:"YORKIE_OBJECT"}}getKeys(){const e=Array();for(const[i]of this)e.push(i);return e}toSortedJSON(){var a;const e=Array();for(const[l]of this)e.push(l);const i=[];for(const l of e.sort()){const c=(a=this.memberNodes.get(l))==null?void 0:a.getValue();i.push(`"${wr(l)}":${c.toSortedJSON()}`)}return`{${i.join(",")}}`}getRHT(){return this.memberNodes}deepcopy(){const e=He.create(this.getCreatedAt());for(const i of this.memberNodes)e.memberNodes.set(i.getStrKey(),i.getValue().deepcopy(),this.getPositionedAt());return e.remove(this.getRemovedAt()),e}getDescendants(e){for(const i of this.memberNodes){const a=i.getValue();if(e(a,this))return;a instanceof Ws&&a.getDescendants(e)}}*[Symbol.iterator](){const e=new Set;for(const i of this.memberNodes)e.has(i.getStrKey())||(e.add(i.getStrKey()),i.isRemoved()||(yield[i.getStrKey(),i.getValue()]))}}var te=(n=>(n.Local="local",n.Remote="remote",n.UndoRedo="undoredo",n))(te||{});class tr{constructor(t,e){p(this,"parentCreatedAt");p(this,"executedAt");this.parentCreatedAt=t,this.executedAt=e}getParentCreatedAt(){return this.parentCreatedAt}getExecutedAt(){if(!this.executedAt)throw new G(V.ErrNotReady,"executedAt is not set yet");return this.executedAt}setActor(t){this.executedAt&&(this.executedAt=this.executedAt.setActor(t))}setExecutedAt(t){this.executedAt=t}}class O1{constructor(t){p(this,"value");p(this,"left");p(this,"right");p(this,"parent");p(this,"weight");this.value=t,this.initWeight()}getNodeString(){return`${this.weight}${this.value}`}getValue(){return this.value}getLeftWeight(){return this.hasLeft()?this.left.getWeight():0}getRightWeight(){return this.hasRight()?this.right.getWeight():0}getWeight(){return this.weight}getLeft(){return this.left}getRight(){return this.right}getParent(){return this.parent}hasLeft(){return!!this.left}hasRight(){return!!this.right}hasParent(){return!!this.parent}setLeft(t){this.left=t}setRight(t){this.right=t}setParent(t){this.parent=t}unlink(){this.parent=void 0,this.right=void 0,this.left=void 0}hasLinks(){return this.hasParent()||this.hasLeft()||this.hasRight()}increaseWeight(t){this.weight+=t}initWeight(){this.weight=this.getLength()}}class Iu{constructor(t){p(this,"root");this.root=t}get length(){return this.root?this.root.getWeight():0}find(t){if(!this.root||t<0)return[void 0,0];let e=this.root;for(;;)if(e.hasLeft()&&t<=e.getLeftWeight())e=e.getLeft();else if(e.hasRight()&&e.getLeftWeight()+e.getLength()<t)t-=e.getLeftWeight()+e.getLength(),e=e.getRight();else{t-=e.getLeftWeight();break}if(t>e.getLength())throw new G(V.ErrInvalidArgument,`out of index range: pos: ${t} > node.length: ${e.getLength()}`);return this.splayNode(e),[e,t]}indexOf(t){return!t||t!==this.root&&!t.hasLinks()?-1:(this.splayNode(t),this.root.getLeftWeight())}getRoot(){return this.root}insert(t){return this.insertAfter(this.root,t)}insertAfter(t,e){return t?(this.splayNode(t),this.root=e,e.setRight(t.getRight()),t.hasRight()&&t.getRight().setParent(e),e.setLeft(t),t.setParent(e),t.setRight(),this.updateWeight(t),this.updateWeight(e),e):(this.root=e,e)}updateWeight(t){t.initWeight(),t.hasLeft()&&t.increaseWeight(t.getLeftWeight()),t.hasRight()&&t.increaseWeight(t.getRightWeight())}updateTreeWeight(t){for(;t;)this.updateWeight(t),t=t.getParent()}splayNode(t){if(t)for(;;)if(this.isLeftChild(t.getParent())&&this.isRightChild(t))this.rotateLeft(t),this.rotateRight(t);else if(this.isRightChild(t.getParent())&&this.isLeftChild(t))this.rotateRight(t),this.rotateLeft(t);else if(this.isLeftChild(t.getParent())&&this.isLeftChild(t))this.rotateRight(t.getParent()),this.rotateRight(t);else if(this.isRightChild(t.getParent())&&this.isRightChild(t))this.rotateLeft(t.getParent()),this.rotateLeft(t);else{this.isLeftChild(t)?this.rotateRight(t):this.isRightChild(t)&&this.rotateLeft(t),this.updateWeight(t);return}}delete(t){this.splayNode(t);const e=new Iu(t.getLeft());e.root&&e.root.setParent();const i=new Iu(t.getRight());if(i.root&&i.root.setParent(),e.root){const a=e.getRightmost();e.splayNode(a),e.root.setRight(i.root),i.root&&i.root.setParent(e.root),this.root=e.root}else this.root=i.root;t.unlink(),this.root&&this.updateWeight(this.root)}deleteRange(t,e){if(!e){this.splayNode(t),this.cutOffRight(t);return}this.splayNode(t),this.splayNode(e),e.getLeft()!=t&&this.rotateRight(t),this.cutOffRight(t)}cutOffRight(t){const e=[];this.traversePostorder(t.getRight(),e);for(const i of e)i.initWeight();this.updateTreeWeight(t)}toTestString(){const t=[];return this.traverseInorder(this.root,t),t.map(e=>`[${e.getWeight()},${e.getLength()}]${e.getValue()||""}`).join("")}checkWeight(){const t=[];this.traverseInorder(this.root,t);for(const e of t)if(e.getWeight()!=e.getLength()+e.getLeftWeight()+e.getRightWeight())return!1;return!0}getRightmost(){let t=this.root;for(;t.hasRight();)t=t.getRight();return t}traverseInorder(t,e){t&&(this.traverseInorder(t.getLeft(),e),e.push(t),this.traverseInorder(t.getRight(),e))}traversePostorder(t,e){t&&(this.traversePostorder(t.getLeft(),e),this.traversePostorder(t.getRight(),e),e.push(t))}rotateLeft(t){const e=t.getParent();e.hasParent()?e===e.getParent().getLeft()?e.getParent().setLeft(t):e.getParent().setRight(t):this.root=t,t.setParent(e.getParent()),e.setRight(t.getLeft()),e.hasRight()&&e.getRight().setParent(e),t.setLeft(e),t.getLeft().setParent(t),this.updateWeight(e),this.updateWeight(t)}rotateRight(t){const e=t.getParent();e.hasParent()?e===e.getParent().getLeft()?e.getParent().setLeft(t):e.getParent().setRight(t):this.root=t,t.setParent(e.getParent()),e.setLeft(t.getRight()),e.hasLeft()&&e.getLeft().setParent(e),t.setRight(e),t.getRight().setParent(t),this.updateWeight(e),this.updateWeight(t)}isLeftChild(t){return t&&t.hasParent()?t.getParent().getLeft()===t:!1}isRightChild(t){return t&&t.hasParent()?t.getParent().getRight()===t:!1}}/**
 * @license
 * Copyright 2009 The Closure Library Authors
 * Copyright 2020 Daniel Wirtz / The long.js Authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * SPDX-License-Identifier: Apache-2.0
 */var _n=null;try{_n=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function Ut(n,t,e){this.low=n|0,this.high=t|0,this.unsigned=!!e}Ut.prototype.__isLong__;Object.defineProperty(Ut.prototype,"__isLong__",{value:!0});function $e(n){return(n&&n.__isLong__)===!0}function zS(n){var t=Math.clz32(n&-n);return n?31-t:t}Ut.isLong=$e;var LS={},_S={};function Pa(n,t){var e,i,a;return t?(n>>>=0,(a=0<=n&&n<256)&&(i=_S[n],i)?i:(e=Jt(n,0,!0),a&&(_S[n]=e),e)):(n|=0,(a=-128<=n&&n<128)&&(i=LS[n],i)?i:(e=Jt(n,n<0?-1:0,!1),a&&(LS[n]=e),e))}Ut.fromInt=Pa;function Un(n,t){if(isNaN(n))return t?ns:Fn;if(t){if(n<0)return ns;if(n>=I1)return B1}else{if(n<=-9223372036854776e3)return tn;if(n+1>=P2)return M1}return n<0?Un(-n,t).neg():Jt(n%Xo|0,n/Xo|0,t)}Ut.fromNumber=Un;function Jt(n,t,e){return new Ut(n,t,e)}Ut.fromBits=Jt;var yd=Math.pow;function Ly(n,t,e){if(n.length===0)throw Error("empty string");if(typeof t=="number"?(e=t,t=!1):t=!!t,n==="NaN"||n==="Infinity"||n==="+Infinity"||n==="-Infinity")return t?ns:Fn;if(e=e||10,e<2||36<e)throw RangeError("radix");var i;if((i=n.indexOf("-"))>0)throw Error("interior hyphen");if(i===0)return Ly(n.substring(1),t,e).neg();for(var a=Un(yd(e,8)),l=Fn,c=0;c<n.length;c+=8){var d=Math.min(8,n.length-c),h=parseInt(n.substring(c,c+d),e);if(d<8){var g=Un(yd(e,d));l=l.mul(g).add(Un(h))}else l=l.mul(a),l=l.add(Un(h))}return l.unsigned=t,l}Ut.fromString=Ly;function Pn(n,t){return typeof n=="number"?Un(n,t):typeof n=="string"?Ly(n,t):Jt(n.low,n.high,typeof t=="boolean"?t:n.unsigned)}Ut.fromValue=Pn;var US=65536,q2=1<<24,Xo=US*US,I1=Xo*Xo,P2=I1/2,qS=Pa(q2),Fn=Pa(0);Ut.ZERO=Fn;var ns=Pa(0,!0);Ut.UZERO=ns;var Bo=Pa(1);Ut.ONE=Bo;var R1=Pa(1,!0);Ut.UONE=R1;var hy=Pa(-1);Ut.NEG_ONE=hy;var M1=Jt(-1,2147483647,!1);Ut.MAX_VALUE=M1;var B1=Jt(-1,-1,!0);Ut.MAX_UNSIGNED_VALUE=B1;var tn=Jt(0,-2147483648,!1);Ut.MIN_VALUE=tn;var ht=Ut.prototype;ht.toInt=function(){return this.unsigned?this.low>>>0:this.low};ht.toNumber=function(){return this.unsigned?(this.high>>>0)*Xo+(this.low>>>0):this.high*Xo+(this.low>>>0)};ht.toString=function(t){if(t=t||10,t<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(tn)){var e=Un(t),i=this.div(e),a=i.mul(e).sub(this);return i.toString(t)+a.toInt().toString(t)}else return"-"+this.neg().toString(t);for(var l=Un(yd(t,6),this.unsigned),c=this,d="";;){var h=c.div(l),g=c.sub(h.mul(l)).toInt()>>>0,y=g.toString(t);if(c=h,c.isZero())return y+d;for(;y.length<6;)y="0"+y;d=""+y+d}};ht.getHighBits=function(){return this.high};ht.getHighBitsUnsigned=function(){return this.high>>>0};ht.getLowBits=function(){return this.low};ht.getLowBitsUnsigned=function(){return this.low>>>0};ht.getNumBitsAbs=function(){if(this.isNegative())return this.eq(tn)?64:this.neg().getNumBitsAbs();for(var t=this.high!=0?this.high:this.low,e=31;e>0&&(t&1<<e)==0;e--);return this.high!=0?e+33:e+1};ht.isSafeInteger=function(){var t=this.high>>21;return t?this.unsigned?!1:t===-1&&!(this.low===0&&this.high===-2097152):!0};ht.isZero=function(){return this.high===0&&this.low===0};ht.eqz=ht.isZero;ht.isNegative=function(){return!this.unsigned&&this.high<0};ht.isPositive=function(){return this.unsigned||this.high>=0};ht.isOdd=function(){return(this.low&1)===1};ht.isEven=function(){return(this.low&1)===0};ht.equals=function(t){return $e(t)||(t=Pn(t)),this.unsigned!==t.unsigned&&this.high>>>31===1&&t.high>>>31===1?!1:this.high===t.high&&this.low===t.low};ht.eq=ht.equals;ht.notEquals=function(t){return!this.eq(t)};ht.neq=ht.notEquals;ht.ne=ht.notEquals;ht.lessThan=function(t){return this.comp(t)<0};ht.lt=ht.lessThan;ht.lessThanOrEqual=function(t){return this.comp(t)<=0};ht.lte=ht.lessThanOrEqual;ht.le=ht.lessThanOrEqual;ht.greaterThan=function(t){return this.comp(t)>0};ht.gt=ht.greaterThan;ht.greaterThanOrEqual=function(t){return this.comp(t)>=0};ht.gte=ht.greaterThanOrEqual;ht.ge=ht.greaterThanOrEqual;ht.compare=function(t){if($e(t)||(t=Pn(t)),this.eq(t))return 0;var e=this.isNegative(),i=t.isNegative();return e&&!i?-1:!e&&i?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1};ht.comp=ht.compare;ht.negate=function(){return!this.unsigned&&this.eq(tn)?tn:this.not().add(Bo)};ht.neg=ht.negate;ht.add=function(t){$e(t)||(t=Pn(t));var e=this.high>>>16,i=this.high&65535,a=this.low>>>16,l=this.low&65535,c=t.high>>>16,d=t.high&65535,h=t.low>>>16,g=t.low&65535,y=0,w=0,v=0,S=0;return S+=l+g,v+=S>>>16,S&=65535,v+=a+h,w+=v>>>16,v&=65535,w+=i+d,y+=w>>>16,w&=65535,y+=e+c,y&=65535,Jt(v<<16|S,y<<16|w,this.unsigned)};ht.subtract=function(t){return $e(t)||(t=Pn(t)),this.add(t.neg())};ht.sub=ht.subtract;ht.multiply=function(t){if(this.isZero())return this;if($e(t)||(t=Pn(t)),_n){var e=_n.mul(this.low,this.high,t.low,t.high);return Jt(e,_n.get_high(),this.unsigned)}if(t.isZero())return this.unsigned?ns:Fn;if(this.eq(tn))return t.isOdd()?tn:Fn;if(t.eq(tn))return this.isOdd()?tn:Fn;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(qS)&&t.lt(qS))return Un(this.toNumber()*t.toNumber(),this.unsigned);var i=this.high>>>16,a=this.high&65535,l=this.low>>>16,c=this.low&65535,d=t.high>>>16,h=t.high&65535,g=t.low>>>16,y=t.low&65535,w=0,v=0,S=0,x=0;return x+=c*y,S+=x>>>16,x&=65535,S+=l*y,v+=S>>>16,S&=65535,S+=c*g,v+=S>>>16,S&=65535,v+=a*y,w+=v>>>16,v&=65535,v+=l*g,w+=v>>>16,v&=65535,v+=c*h,w+=v>>>16,v&=65535,w+=i*y+a*g+l*h+c*d,w&=65535,Jt(S<<16|x,w<<16|v,this.unsigned)};ht.mul=ht.multiply;ht.divide=function(t){if($e(t)||(t=Pn(t)),t.isZero())throw Error("division by zero");if(_n){if(!this.unsigned&&this.high===-2147483648&&t.low===-1&&t.high===-1)return this;var e=(this.unsigned?_n.div_u:_n.div_s)(this.low,this.high,t.low,t.high);return Jt(e,_n.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?ns:Fn;var i,a,l;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return ns;if(t.gt(this.shru(1)))return R1;l=ns}else{if(this.eq(tn)){if(t.eq(Bo)||t.eq(hy))return tn;if(t.eq(tn))return Bo;var c=this.shr(1);return i=c.div(t).shl(1),i.eq(Fn)?t.isNegative()?Bo:hy:(a=this.sub(t.mul(i)),l=i.add(a.div(t)),l)}else if(t.eq(tn))return this.unsigned?ns:Fn;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();l=Fn}for(a=this;a.gte(t);){i=Math.max(1,Math.floor(a.toNumber()/t.toNumber()));for(var d=Math.ceil(Math.log(i)/Math.LN2),h=d<=48?1:yd(2,d-48),g=Un(i),y=g.mul(t);y.isNegative()||y.gt(a);)i-=h,g=Un(i,this.unsigned),y=g.mul(t);g.isZero()&&(g=Bo),l=l.add(g),a=a.sub(y)}return l};ht.div=ht.divide;ht.modulo=function(t){if($e(t)||(t=Pn(t)),_n){var e=(this.unsigned?_n.rem_u:_n.rem_s)(this.low,this.high,t.low,t.high);return Jt(e,_n.get_high(),this.unsigned)}return this.sub(this.div(t).mul(t))};ht.mod=ht.modulo;ht.rem=ht.modulo;ht.not=function(){return Jt(~this.low,~this.high,this.unsigned)};ht.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32};ht.clz=ht.countLeadingZeros;ht.countTrailingZeros=function(){return this.low?zS(this.low):zS(this.high)+32};ht.ctz=ht.countTrailingZeros;ht.and=function(t){return $e(t)||(t=Pn(t)),Jt(this.low&t.low,this.high&t.high,this.unsigned)};ht.or=function(t){return $e(t)||(t=Pn(t)),Jt(this.low|t.low,this.high|t.high,this.unsigned)};ht.xor=function(t){return $e(t)||(t=Pn(t)),Jt(this.low^t.low,this.high^t.high,this.unsigned)};ht.shiftLeft=function(t){return $e(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?Jt(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):Jt(0,this.low<<t-32,this.unsigned)};ht.shl=ht.shiftLeft;ht.shiftRight=function(t){return $e(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?Jt(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):Jt(this.high>>t-32,this.high>=0?0:-1,this.unsigned)};ht.shr=ht.shiftRight;ht.shiftRightUnsigned=function(t){return $e(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?Jt(this.low>>>t|this.high<<32-t,this.high>>>t,this.unsigned):t===32?Jt(this.high,0,this.unsigned):Jt(this.high>>>t-32,0,this.unsigned)};ht.shru=ht.shiftRightUnsigned;ht.shr_u=ht.shiftRightUnsigned;ht.rotateLeft=function(t){var e;return $e(t)&&(t=t.toInt()),(t&=63)===0?this:t===32?Jt(this.high,this.low,this.unsigned):t<32?(e=32-t,Jt(this.low<<t|this.high>>>e,this.high<<t|this.low>>>e,this.unsigned)):(t-=32,e=32-t,Jt(this.high<<t|this.low>>>e,this.low<<t|this.high>>>e,this.unsigned))};ht.rotl=ht.rotateLeft;ht.rotateRight=function(t){var e;return $e(t)&&(t=t.toInt()),(t&=63)===0?this:t===32?Jt(this.high,this.low,this.unsigned):t<32?(e=32-t,Jt(this.high<<e|this.low>>>t,this.low<<e|this.high>>>t,this.unsigned)):(t-=32,e=32-t,Jt(this.low<<e|this.high>>>t,this.high<<e|this.low>>>t,this.unsigned))};ht.rotr=ht.rotateRight;ht.toSigned=function(){return this.unsigned?Jt(this.low,this.high,!1):this};ht.toUnsigned=function(){return this.unsigned?this:Jt(this.low,this.high,!0)};ht.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()};ht.toBytesLE=function(){var t=this.high,e=this.low;return[e&255,e>>>8&255,e>>>16&255,e>>>24,t&255,t>>>8&255,t>>>16&255,t>>>24]};ht.toBytesBE=function(){var t=this.high,e=this.low;return[t>>>24,t>>>16&255,t>>>8&255,t&255,e>>>24,e>>>16&255,e>>>8&255,e&255]};Ut.fromBytes=function(t,e,i){return i?Ut.fromBytesLE(t,e):Ut.fromBytesBE(t,e)};Ut.fromBytesLE=function(t,e){return new Ut(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,e)};Ut.fromBytesBE=function(t,e){return new Ut(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],e)};typeof BigInt=="function"&&(Ut.fromBigInt=function(t,e){var i=Number(BigInt.asIntN(32,t)),a=Number(BigInt.asIntN(32,t>>BigInt(32)));return Jt(i,a,e)},Ut.fromValue=function(t,e){return typeof t=="bigint"?fromBigInt(t,e):Pn(t,e)},ht.toBigInt=function(){var t=BigInt(this.low>>>0),e=BigInt(this.unsigned?this.high>>>0:this.high);return e<<BigInt(32)|t});var ee=(n=>(n[n.Null=0]="Null",n[n.Boolean=1]="Boolean",n[n.Integer=2]="Integer",n[n.Long=3]="Long",n[n.Double=4]="Double",n[n.String=5]="String",n[n.Bytes=6]="Bytes",n[n.Date=7]="Date",n))(ee||{});class oe extends Gu{constructor(e,i){super(i);p(this,"valueType");p(this,"value");this.valueType=oe.getPrimitiveType(e),this.value=e===void 0?null:e}static of(e,i){return new oe(e,i)}static valueFromBytes(e,i){switch(e){case 0:return null;case 1:return!!i[0];case 2:return i[0]|i[1]<<8|i[2]<<16|i[3]<<24;case 4:{const a=new DataView(i.buffer);return i.forEach(function(l,c){a.setUint8(c,l)}),a.getFloat64(0,!0)}case 5:return new TextDecoder("utf-8").decode(i);case 3:return Ut.fromBytesLE(Array.from(i));case 6:return i;case 7:return new Date(Ut.fromBytesLE(Array.from(i),!0).toNumber());default:throw new G(V.ErrUnimplemented,`unimplemented type: ${e}`)}}getValueSize(){switch(this.valueType){case 0:return 8;case 1:return 4;case 2:return 4;case 3:return 8;case 4:return 8;case 5:return this.value.length*2;case 6:return this.value.length;case 7:return 8;default:throw new G(V.ErrUnimplemented,`unimplemented type: ${this.valueType}`)}}getDataSize(){return{data:this.getValueSize(),meta:this.getMetaUsage()}}toJSON(){return this.valueType===5?`"${wr(this.value)}"`:`${this.value}`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:this.value,type:"YORKIE_PRIMITIVE"}}deepcopy(){const e=oe.of(this.value,this.getCreatedAt());return e.setMovedAt(this.getMovedAt()),e.setRemovedAt(this.getRemovedAt()),e}getType(){return this.valueType}static getPrimitiveType(e){switch(typeof e){case"undefined":return 0;case"boolean":return 1;case"number":return this.isInteger(e)?2:4;case"string":return 5;case"object":if(e===null)return 0;if(e instanceof Ut)return 3;if(e instanceof Uint8Array)return 6;if(e instanceof Date)return 7}}static isSupport(e){return oe.getPrimitiveType(e)!==void 0}static isInteger(e){return e%1===0}isNumericType(){const e=this.valueType;return e===2||e===3||e===4}getValue(){return this.value}toBytes(){switch(this.valueType){case 0:return new Uint8Array;case 1:return this.value?new Uint8Array([1]):new Uint8Array([0]);case 2:{const e=this.value;return new Uint8Array([e&255,e>>8&255,e>>16&255,e>>24&255])}case 4:{const e=this.value,i=new Uint8Array(8);return new DataView(i.buffer).setFloat64(0,e,!0),i}case 5:return new TextEncoder().encode(this.value);case 3:{const i=this.value.toBytesLE();return Uint8Array.from(i)}case 6:return this.value;case 7:{const e=this.value,i=Ut.fromNumber(e.getTime(),!0).toBytesLE();return Uint8Array.from(i)}default:throw new G(V.ErrUnimplemented,`unimplemented type: ${this.valueType}`)}}}class pd extends O1{constructor(e){super(e);p(this,"prev");p(this,"next");this.value=e}static createAfter(e,i){const a=new pd(i),l=e.next;return e.next=a,a.prev=e,a.next=l,l&&(l.prev=a),a}remove(e){return this.value.remove(e)}getCreatedAt(){return this.value.getCreatedAt()}getPositionedAt(){return this.value.getPositionedAt()}release(){this.prev&&(this.prev.next=this.next),this.next&&(this.next.prev=this.prev),this.prev=void 0,this.next=void 0}getLength(){return this.value.isRemoved()?0:1}getPrev(){return this.prev}getNext(){return this.next}getValue(){return this.value}isRemoved(){return this.value.isRemoved()}}class Ru{constructor(){p(this,"dummyHead");p(this,"last");p(this,"nodeMapByIndex");p(this,"nodeMapByCreatedAt");const t=oe.of(0,Go);t.setRemovedAt(Go),this.dummyHead=new pd(t),this.last=this.dummyHead,this.nodeMapByIndex=new Iu,this.nodeMapByCreatedAt=new Map,this.nodeMapByIndex.insert(this.dummyHead),this.nodeMapByCreatedAt.set(this.dummyHead.getCreatedAt().toIDString(),this.dummyHead)}static create(){return new Ru}get length(){return this.nodeMapByIndex.length}findNextBeforeExecutedAt(t,e){let i=this.nodeMapByCreatedAt.get(t.toIDString());if(!i)throw new G(V.ErrInvalidArgument,`cant find the given node: ${t.toIDString()}`);for(;i.getNext()&&i.getNext().getPositionedAt().after(e);)i=i.getNext();return i}release(t){this.last===t&&(this.last=t.getPrev()),t.release(),this.nodeMapByIndex.delete(t),this.nodeMapByCreatedAt.delete(t.getValue().getCreatedAt().toIDString())}insertAfter(t,e,i=e.getCreatedAt()){const a=this.findNextBeforeExecutedAt(t,i),l=pd.createAfter(a,e);a===this.last&&(this.last=l),this.nodeMapByIndex.insertAfter(a,l),this.nodeMapByCreatedAt.set(l.getCreatedAt().toIDString(),l)}moveAfter(t,e,i){const a=this.nodeMapByCreatedAt.get(t.toIDString());if(!a)throw new G(V.ErrInvalidArgument,`cant find the given node: ${t.toIDString()}`);const l=this.nodeMapByCreatedAt.get(e.toIDString());if(!l)throw new G(V.ErrInvalidArgument,`cant find the given node: ${e.toIDString()}`);a!==l&&(!l.getValue().getMovedAt()||i.after(l.getValue().getMovedAt()))&&(this.release(l),this.insertAfter(a.getCreatedAt(),l.getValue(),i),l.getValue().setMovedAt(i))}insert(t){this.insertAfter(this.last.getCreatedAt(),t)}getByID(t){return this.nodeMapByCreatedAt.get(t.toIDString())}subPathOf(t){const e=this.nodeMapByCreatedAt.get(t.toIDString());if(e)return String(this.nodeMapByIndex.indexOf(e))}purge(t){const e=this.nodeMapByCreatedAt.get(t.getCreatedAt().toIDString());if(!e)throw new G(V.ErrInvalidArgument,`fail to find the given createdAt: ${t.getCreatedAt().toIDString()}`);this.release(e)}getByIndex(t){if(t>=this.length)return;const[e,i]=this.nodeMapByIndex.find(t);let a=e;if(t===0&&e===this.dummyHead||i>0)do a&&(a=a.getNext());while(a&&a.isRemoved());return a}getPrevCreatedAt(t){let e=this.nodeMapByCreatedAt.get(t.toIDString());do e=e.getPrev();while(this.dummyHead!==e&&e.isRemoved());return e.getValue().getCreatedAt()}delete(t,e){const i=this.nodeMapByCreatedAt.get(t.toIDString()),a=i.isRemoved();return i.remove(e)&&!a&&this.nodeMapByIndex.splayNode(i),i.getValue()}deleteByIndex(t,e){const i=this.getByIndex(t);if(i)return i.remove(e)&&this.nodeMapByIndex.splayNode(i),i.getValue()}getHead(){return this.dummyHead.getValue()}getLast(){return this.last.getValue()}getLastCreatedAt(){return this.last.getCreatedAt()}toTestString(){const t=[];for(const e of this){const i=`${e.getCreatedAt().toIDString()}:${e.getValue().toJSON()}`;e.isRemoved()?t.push(`{${i}}`):t.push(`[${i}]`)}return t.join("")}*[Symbol.iterator](){let t=this.dummyHead.getNext();for(;t;)yield t,t=t.getNext()}}class nn extends Ws{constructor(e,i){super(e);p(this,"elements");this.elements=i}static create(e,i){if(!i)return new nn(e,Ru.create());const a=Ru.create();for(const l of i)a.insertAfter(a.getLastCreatedAt(),l.deepcopy());return new nn(e,a)}subPathOf(e){return this.elements.subPathOf(e)}purge(e){this.elements.purge(e)}insertAfter(e,i){this.elements.insertAfter(e,i)}moveAfter(e,i,a){this.elements.moveAfter(e,i,a)}get(e){const i=this.elements.getByIndex(e);return i==null?void 0:i.getValue()}getByID(e){const i=this.elements.getByID(e);return i==null?void 0:i.getValue()}getHead(){return this.elements.getHead()}getLast(){return this.elements.getLast()}getPrevCreatedAt(e){return this.elements.getPrevCreatedAt(e)}delete(e,i){return this.elements.delete(e,i)}deleteByIndex(e,i){return this.elements.deleteByIndex(e,i)}getLastCreatedAt(){return this.elements.getLastCreatedAt()}get length(){return this.elements.length}*[Symbol.iterator](){for(const e of this.elements)e.isRemoved()||(yield e.getValue())}toTestString(){return this.elements.toTestString()}getDescendants(e){for(const i of this.elements){const a=i.getValue();if(e(a,this))return;a instanceof Ws&&a.getDescendants(e)}}getDataSize(){return{data:0,meta:this.getMetaUsage()}}toJSON(){const e=[];for(const i of this)e.push(i.toJSON());return`[${e.join(",")}]`}toJS(){return JSON.parse(this.toJSON())}toJSForTest(){const e={};for(let i=0;i<this.length;i++){const{createdAt:a,value:l,type:c}=this.get(i).toJSForTest();e[i]={key:String(i),createdAt:a,value:l,type:c}}return{createdAt:this.getCreatedAt().toTestString(),value:e,type:"YORKIE_ARRAY"}}toSortedJSON(){return this.toJSON()}getElements(){return this.elements}deepcopy(){const e=nn.create(this.getCreatedAt());for(const i of this.elements)e.elements.insertAfter(e.getLastCreatedAt(),i.getValue().deepcopy());return e.remove(this.getRemovedAt()),e}}class ra extends tr{constructor(e,i,a){super(e,a);p(this,"createdAt");this.createdAt=i}static create(e,i,a){return new ra(e,i,a)}execute(e,i){var g;const a=e.findByCreatedAt(this.getParentCreatedAt());if(!a)throw new G(V.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(a instanceof Ws))throw new G(V.ErrInvalidArgument,`only object and array can execute remove: ${a}`);if(i===te.UndoRedo){let y=a.getByID(this.createdAt);for(;y;){if(y.getRemovedAt())return;y=(g=e.findElementPairByCreatedAt(y.getCreatedAt()))==null?void 0:g.parent}}const l=a.subPathOf(this.createdAt),c=this.toReverseOperation(a),d=a.delete(this.createdAt,this.getExecutedAt());return e.registerRemovedElement(d),{opInfos:a instanceof nn?[{type:"remove",path:e.createPath(this.getParentCreatedAt()),index:Number(l)}]:[{type:"remove",path:e.createPath(this.getParentCreatedAt()),key:l}],reverseOp:c}}toReverseOperation(e){if(e instanceof He){const i=e.subPathOf(this.createdAt);if(i!==void 0){const a=e.get(i);if(a!==void 0)return _a.create(i,a.deepcopy(),this.getParentCreatedAt())}}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.REMOVE.${this.createdAt.toTestString()}`}getCreatedAt(){return this.createdAt}}class _a extends tr{constructor(e,i,a,l){super(a,l);p(this,"key");p(this,"value");this.key=e,this.value=i}static create(e,i,a,l){return new _a(e,i,a,l)}execute(e,i){var g;const a=e.findByCreatedAt(this.getParentCreatedAt());if(!a)throw new G(V.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(a instanceof He))throw new G(V.ErrInvalidArgument,"fail to execute, only object can execute set");if(i===te.UndoRedo){let y=a;for(;y;){if(y.getRemovedAt())return;y=(g=e.findElementPairByCreatedAt(y.getCreatedAt()))==null?void 0:g.parent}}const l=a.get(this.key),c=this.toReverseOperation(l),d=this.value.deepcopy(),h=a.set(this.key,d,this.getExecutedAt());return i===te.UndoRedo&&e.findByCreatedAt(d.getCreatedAt())&&e.deregisterElement(d),e.registerElement(d,a),h&&e.registerRemovedElement(h),{opInfos:[{type:"set",path:e.createPath(this.getParentCreatedAt()),key:this.key}],reverseOp:c}}toReverseOperation(e){let i=ra.create(this.getParentCreatedAt(),this.value.getCreatedAt());return e!==void 0&&!e.isRemoved()&&(i=_a.create(this.key,e.deepcopy(),this.getParentCreatedAt())),i}getEffectedCreatedAt(){return this.value.getCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.SET.${this.key}=${this.value.toSortedJSON()}`}getKey(){return this.key}getValue(){return this.value}}class Xu extends tr{constructor(e,i,a,l){super(e,l);p(this,"prevCreatedAt");p(this,"value");this.prevCreatedAt=i,this.value=a}static create(e,i,a,l){return new Xu(e,i,a,l)}execute(e){const i=e.findByCreatedAt(this.getParentCreatedAt());if(!i)throw new G(V.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(i instanceof nn))throw new G(V.ErrInvalidArgument,"fail to execute, only array can execute add");const a=i,l=this.value.deepcopy();return a.insertAfter(this.prevCreatedAt,l),e.registerElement(l,a),{opInfos:[{type:"add",path:e.createPath(this.getParentCreatedAt()),index:Number(a.subPathOf(this.getEffectedCreatedAt()))}]}}getEffectedCreatedAt(){return this.value.getCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.ADD.${this.value.toJSON()}`}getPrevCreatedAt(){return this.prevCreatedAt}getValue(){return this.value}}class Fs extends tr{constructor(e,i,a,l){super(e,l);p(this,"prevCreatedAt");p(this,"createdAt");this.prevCreatedAt=i,this.createdAt=a}static create(e,i,a,l){return new Fs(e,i,a,l)}execute(e){const i=e.findByCreatedAt(this.getParentCreatedAt());if(!i)throw new G(V.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(i instanceof nn))throw new G(V.ErrInvalidArgument,"fail to execute, only array can execute move");const a=i,l=Number(a.subPathOf(this.createdAt));a.moveAfter(this.prevCreatedAt,this.createdAt,this.getExecutedAt());const c=Number(a.subPathOf(this.createdAt));return{opInfos:[{type:"move",path:e.createPath(this.getParentCreatedAt()),index:c,previousIndex:l}]}}getEffectedCreatedAt(){return this.createdAt}toTestString(){return`${this.getParentCreatedAt().toTestString()}.MOVE`}getPrevCreatedAt(){return this.prevCreatedAt}getCreatedAt(){return this.createdAt}}class Zs{constructor(t,e,i,a){p(this,"key");p(this,"value");p(this,"updatedAt");p(this,"_isRemoved");this.key=t,this.value=e,this.updatedAt=i,this._isRemoved=a}static of(t,e,i,a){return new Zs(t,e,i,a)}getKey(){return this.key}getValue(){return this.value}getUpdatedAt(){return this.updatedAt}isRemoved(){return this._isRemoved}toIDString(){return`${this.updatedAt.toIDString()}:${this.key}`}getRemovedAt(){if(this._isRemoved)return this.updatedAt}getDataSize(){return{data:(this.key.length+this.value.length)*2,meta:Sr}}}class ls{constructor(){p(this,"nodeMapByKey");p(this,"numberOfRemovedElement");this.nodeMapByKey=new Map,this.numberOfRemovedElement=0}static create(){return new ls}getNodeMapByKey(){return this.nodeMapByKey}set(t,e,i){const a=this.nodeMapByKey.get(t);if(a&&a.isRemoved()&&i.after(a.getUpdatedAt())&&(this.numberOfRemovedElement-=1),a===void 0||i.after(a.getUpdatedAt())){const l=Zs.of(t,e,i,!1);return this.nodeMapByKey.set(t,l),a!==void 0&&a.isRemoved()?[a,l]:[void 0,l]}return a.isRemoved()?[a,void 0]:[void 0,void 0]}setInternal(t,e,i,a){const l=Zs.of(t,e,i,a);this.nodeMapByKey.set(t,l),a&&this.numberOfRemovedElement++}remove(t,e){const i=this.nodeMapByKey.get(t),a=[];if(i===void 0||e.after(i.getUpdatedAt())){if(i===void 0){this.numberOfRemovedElement+=1;const d=Zs.of(t,"",e,!0);return this.nodeMapByKey.set(t,d),a.push(d),a}const l=i.isRemoved();l||(this.numberOfRemovedElement+=1),l&&a.push(i);const c=Zs.of(t,i.getValue(),e,!0);return this.nodeMapByKey.set(t,c),a.push(c),a}return a}has(t){if(this.nodeMapByKey.has(t)){const e=this.nodeMapByKey.get(t);return e!==void 0&&!e.isRemoved()}return!1}get(t){if(this.nodeMapByKey.has(t))return this.nodeMapByKey.get(t).getValue()}deepcopy(){const t=new ls;for(const[,e]of this.nodeMapByKey)t.setInternal(e.getKey(),e.getValue(),e.getUpdatedAt(),e.isRemoved());return t}toJSON(){if(!this.size())return"{}";const t=[];for(const[e,i]of this.nodeMapByKey)i.isRemoved()||t.push(`"${wr(e)}":"${wr(i.getValue())}"`);return`{${t.join(",")}}`}size(){return this.nodeMapByKey.size-this.numberOfRemovedElement}toObject(){const t={};for(const[e,i]of this.nodeMapByKey)i.isRemoved()||(t[e]=i.getValue());return t}*[Symbol.iterator](){for(const[,t]of this.nodeMapByKey)yield t}purge(t){const e=this.nodeMapByKey.get(t.getKey());e==null||e.toIDString()!=t.toIDString()||(this.nodeMapByKey.delete(t.getKey()),this.numberOfRemovedElement--)}}function Yn(n){if(n instanceof Map){const t=Array.from(n);return new Map(JSON.parse(JSON.stringify(t)))}return JSON.parse(JSON.stringify(n))}const z1=n=>n?Object.entries(n).length===0:!0,Ko=n=>{const t={};for(const[e,i]of Object.entries(n))t[e]=JSON.stringify(i);return t},is=n=>{const t={};for(const[e,i]of Object.entries(n))t[e]=JSON.parse(i);return t};function J2(n){return n?PS(n.live)+PS(n.gc):0}function PS(n){return n.data+n.meta}function _e(n,...t){for(const e of t)n.data+=e.data,n.meta+=e.meta}function Uo(n,t){n.data-=t.data,n.meta-=t.meta}class Mu{constructor(t){p(this,"attributes");p(this,"content");this.attributes=ls.create(),this.content=t}static create(t){return new Mu(t)}get length(){return this.content.length}substring(t,e){const i=new Mu(this.content.substring(t,e));return i.attributes=this.attributes.deepcopy(),i}setAttr(t,e,i){return this.attributes.set(t,e,i)}getAttrs(){return this.attributes}toString(){return this.content}getDataSize(){const t={data:0,meta:0};t.data+=this.content.length*2;for(const e of this.attributes){const i=e.getDataSize();t.meta+=i.meta,t.data+=i.data}return t}toJSON(){const t=wr(this.content),e=this.attributes.toObject(),i=[];for(const[a,l]of Object.entries(e)){const c=JSON.parse(l),d=typeof c=="string"?`"${wr(a)}":"${wr(c)}"`:`"${wr(a)}":${String(c)}`;i.push(d)}return i.sort(),i.length===0?`{"val":"${t}"}`:`{"attrs":{${i.join(",")}},"val":"${t}"}`}getAttributes(){return this.attributes.toObject()}getContent(){return this.content}purge(t){this.attributes&&t instanceof Zs&&this.attributes.purge(t)}getGCPairs(){const t=[];for(const e of this.attributes)e.getRemovedAt()&&t.push({parent:this,child:e});return t}}class pn extends Gu{constructor(e,i){super(i);p(this,"rgaTreeSplit");this.rgaTreeSplit=e}static create(e,i){return new pn(e,i)}edit(e,i,a,l,c){const d=i?Mu.create(i):void 0;if(d&&l)for(const[S,x]of Object.entries(l))d.setAttr(S,x,a);const[h,g,y,w]=this.rgaTreeSplit.edit(e,a,d,c);return[w.map(S=>({...S,value:S.value?{attributes:is(S.value.getAttributes()),content:S.value.getContent()}:{attributes:void 0,content:""},type:"content"})),g,y,[h,h]]}setStyle(e,i,a,l){const c={data:0,meta:0},[,d,h]=this.rgaTreeSplit.findNodeWithSplit(e[1],a),[,g,y]=this.rgaTreeSplit.findNodeWithSplit(e[0],a);_e(c,d,g);const w=[],v=this.rgaTreeSplit.findBetween(y,h),S=[];for(const E of v){const I=E.getCreatedAt().getActorID();let k=bu;l!=null&&(k=l.get(I)?l.get(I):0n),E.canStyle(a,k)&&S.push(E)}const x=[];for(const E of S){if(E.isRemoved())continue;const[I,k]=this.rgaTreeSplit.findIndexesFromRange(E.createPosRange());w.push({type:"style",actor:a.getActorID(),from:I,to:k,value:{attributes:is(i)}});for(const[z,N]of Object.entries(i)){const[O]=E.getValue().setAttr(z,N,a);O!==void 0&&x.push({parent:E.getValue(),child:O});const _=E.getValue().getAttrs().getNodeMapByKey().get(z);_!==void 0&&_e(c,_.getDataSize())}}return[x,c,w]}indexRangeToPosRange(e,i){const a=this.rgaTreeSplit.indexToPos(e);return e===i?[a,a]:[a,this.rgaTreeSplit.indexToPos(i)]}get length(){return this.rgaTreeSplit.length}getTreeByIndex(){return this.rgaTreeSplit.getTreeByIndex()}getTreeByID(){return this.rgaTreeSplit.getTreeByID()}getDataSize(){const e={data:0,meta:0};for(const i of this.rgaTreeSplit){if(i.isRemoved())continue;const a=i.getDataSize();e.data+=a.data,e.meta+=a.meta}return{data:e.data,meta:e.meta+this.getMetaUsage()}}toJSON(){const e=[];for(const i of this.rgaTreeSplit)i.isRemoved()||e.push(i.getValue().toJSON());return`[${e.join(",")}]`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:JSON.parse(this.toJSON()),type:"YORKIE_TEXT"}}toString(){return this.rgaTreeSplit.toString()}values(){const e=[];for(const i of this.rgaTreeSplit)if(!i.isRemoved()){const a=i.getValue();e.push({attributes:is(a.getAttributes()),content:a.getContent()})}return e}getRGATreeSplit(){return this.rgaTreeSplit}toTestString(){return this.rgaTreeSplit.toTestString()}deepcopy(){const e=new pn(this.rgaTreeSplit.deepcopy(),this.getCreatedAt());return e.remove(this.getRemovedAt()),e}findIndexesFromRange(e){return this.rgaTreeSplit.findIndexesFromRange(e)}getGCPairs(){const e=[];for(const i of this.rgaTreeSplit){i.getRemovedAt()&&e.push({parent:this.rgaTreeSplit,child:i});for(const a of i.getValue().getGCPairs())e.push(a)}return e}}class Ku extends tr{constructor(e,i,a,l,c,d){super(e,d);p(this,"fromPos");p(this,"toPos");p(this,"content");p(this,"attributes");this.fromPos=i,this.toPos=a,this.content=l,this.attributes=c}static create(e,i,a,l,c,d){return new Ku(e,i,a,l,c,d)}execute(e,i,a){const l=e.findByCreatedAt(this.getParentCreatedAt());if(!l)throw new G(V.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(l instanceof pn))throw new G(V.ErrInvalidArgument,"fail to execute, only Text can execute edit");const c=l,[d,h,g]=c.edit([this.fromPos,this.toPos],this.content,this.getExecutedAt(),Object.fromEntries(this.attributes),a);e.acc(g);for(const y of h)e.registerGCPair(y);return{opInfos:d.map(({from:y,to:w,value:v})=>({type:"edit",from:y,to:w,value:v,path:e.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),i=this.fromPos.toTestString(),a=this.toPos.toTestString(),l=this.content;return`${e}.EDIT(${i},${a},${l})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getContent(){return this.content}getAttributes(){return this.attributes||new Map}}class Fu extends tr{constructor(e,i,a,l,c){super(e,c);p(this,"fromPos");p(this,"toPos");p(this,"attributes");this.fromPos=i,this.toPos=a,this.attributes=l}static create(e,i,a,l,c){return new Fu(e,i,a,l,c)}execute(e,i,a){const l=e.findByCreatedAt(this.getParentCreatedAt());if(!l)throw new G(V.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(l instanceof pn))throw new G(V.ErrInvalidArgument,"fail to execute, only Text can execute edit");const c=l,[d,h,g]=c.setStyle([this.fromPos,this.toPos],this.attributes?Object.fromEntries(this.attributes):{},this.getExecutedAt(),a);e.acc(h);for(const y of d)e.registerGCPair(y);return{opInfos:g.map(({from:y,to:w,value:v})=>({type:"style",from:y,to:w,value:v,path:e.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),i=this.fromPos.toTestString(),a=this.toPos.toTestString(),l=this.attributes;return`${e}.STYL(${i},${a},${JSON.stringify(l)})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getAttributes(){return this.attributes}}const H2=2,$2="root",br="text";function du(n,t){let e=0;const i=n.children;for(let a=0;a<t;a++){const l=i[a];!l||l.isRemoved||(e+=l.paddedSize)}return e}class V2{constructor(t,e=[]){p(this,"type");p(this,"parent");p(this,"_children");p(this,"size");if(this.type=t,this.size=0,this._children=e,this.isText&&this._children.length>0)throw new G(V.ErrRefused,"Text node cannot have children")}updateAncestorsSize(){let t=this.parent;const e=this.isRemoved?-1:1;for(;t&&(t.size+=this.paddedSize*e,!t.isRemoved);)t=t.parent}updateDescendantsSize(){let t=0;for(const e of this._children){const i=e.updateDescendantsSize();e.isRemoved||(t+=i)}return this.size+=t,this.paddedSize}get isText(){return this.type===br}get paddedSize(){return this.size+(this.isText?0:H2)}isAncestorOf(t){return j2(this,t)}get nextSibling(){const t=this.parent.findOffset(this),e=this.parent.children[t+1];if(e)return e}get prevSibling(){const t=this.parent.findOffset(this),e=this.parent.children[t-1];if(e)return e}splitText(t,e){const i={data:0,meta:0};if(t===0||t===this.size)return[void 0,i];const a=this.value.slice(0,t),l=this.value.slice(t);if(!l.length)return[void 0,i];const c=this.getDataSize();this.value=a;const d=this.cloneText(t+e);return d.value=l,this.parent.insertAfterInternal(d,this),_e(i,this.getDataSize(),d.getDataSize()),Uo(i,c),[d,i]}get children(){return this._children.filter(t=>!t.isRemoved)}get allChildren(){return[...this._children]}hasTextChild(){return this.children.length>0&&this.children.every(t=>t.isText)}getChildrenText(){return this.isText?this.value:this.hasTextChild()?this.children.map(t=>t.value).join(""):""}append(...t){if(this.isText)throw new G(V.ErrRefused,"Text node cannot have children");this._children.push(...t);for(const e of t)e.parent=this,e.updateAncestorsSize()}prepend(...t){if(this.isText)throw new G(V.ErrRefused,"Text node cannot have children");this._children.unshift(...t);for(const e of t)e.parent=this}insertBefore(t,e){if(this.isText)throw new G(V.ErrRefused,"Text node cannot have children");const i=this._children.indexOf(e);if(i===-1)throw new G(V.ErrInvalidArgument,"child not found");this.insertAtInternal(t,i),t.updateAncestorsSize()}insertAfter(t,e){if(this.isText)throw new G(V.ErrRefused,"Text node cannot have children");const i=this._children.indexOf(e);if(i===-1)throw new G(V.ErrInvalidArgument,"child not found");this.insertAtInternal(t,i+1),t.updateAncestorsSize()}insertAt(t,e){if(this.isText)throw new G(V.ErrRefused,"Text node cannot have children");this.insertAtInternal(t,e),t.updateAncestorsSize()}removeChild(t){if(this.isText)throw new G(V.ErrRefused,"Text node cannot have children");const e=this._children.indexOf(t);if(e===-1)throw new G(V.ErrInvalidArgument,"child not found");this._children.splice(e,1),t.parent=void 0}splitElement(t,e){const i={data:0,meta:0},a=this.getDataSize(),l=this.cloneElement(e);this.parent.insertAfterInternal(l,this),l.updateAncestorsSize();const c=this.children.slice(0,t),d=this.children.slice(t);this._children=c,l._children=d,this.size=this._children.reduce((h,g)=>h+g.paddedSize,0),l.size=l._children.reduce((h,g)=>h+g.paddedSize,0);for(const h of l._children)h.parent=l;return _e(i,this.getDataSize(),l.getDataSize()),Uo(i,a),[l,i]}insertAfterInternal(t,e){if(this.isText)throw new G(V.ErrRefused,"Text node cannot have children");const i=this._children.indexOf(e);if(i===-1)throw new G(V.ErrInvalidArgument,"child not found");this.insertAtInternal(t,i+1)}insertAtInternal(t,e){if(this.isText)throw new G(V.ErrRefused,"Text node cannot have children");this._children.splice(e,0,t),t.parent=this}findOffset(t){if(this.isText)throw new G(V.ErrRefused,"Text node cannot have children");if(t.isRemoved){const e=this._children.indexOf(t);return this.allChildren.splice(0,e).filter(a=>!a.isRemoved).length}return this.children.indexOf(t)}findBranchOffset(t){if(this.isText)throw new G(V.ErrRefused,"Text node cannot have children");let e=t;for(;e;){const i=this._children.indexOf(e);if(i!==-1)return i;e=e.parent}return-1}}function j2(n,t){if(n===t)return!1;for(;t.parent;){if(t.parent===n)return!0;t=t.parent}return!1}var ye=(n=>(n.Start="Start",n.End="End",n.Text="Text",n))(ye||{});function L1(n,t,e,i){if(t>e)throw new G(V.ErrInvalidArgument,`from is greater than to: ${t} > ${e}`);if(t>n.size)throw new G(V.ErrInvalidArgument,`from is out of range: ${t} > ${n.size}`);if(e>n.size)throw new G(V.ErrInvalidArgument,`to is out of range: ${e} > ${n.size}`);if(t===e)return;let a=0;for(const l of n.children){if(t-l.paddedSize<a&&a<e){const c=l.isText?t-a:t-a-1,d=l.isText?e-a:e-a-1,h=!l.isText&&c<0,g=!l.isText&&d>l.size;(l.isText||h)&&i([l,l.isText?"Text":"Start"],g),L1(l,Math.max(0,c),Math.min(d,l.size),i),g&&i([l,"End"],g)}a+=l.paddedSize}}function _1(n,t,e=0){for(const i of n.children)_1(i,t,e+1);t(n,e)}function _d(n,t,e=0){for(const i of n._children)_d(i,t,e+1);t(n,e)}function gy(n,t,e=!0){if(t>n.size)throw new G(V.ErrInvalidArgument,`index is out of range: ${t} > ${n.size}`);if(n.isText)return{node:n,offset:t};let i=0,a=0;for(const l of n.children){if(e&&l.isText&&l.size>=t-a)return gy(l,t-a,e);if(t===a)return{node:n,offset:i};if(!e&&l.paddedSize===t-a)return{node:n,offset:i+1};if(l.paddedSize>t-a)return gy(l,t-a-1,e);a+=l.paddedSize,i+=1}return{node:n,offset:i}}function U1(n){return n.isText||n.children.length===0?n:U1(n.children[0])}function Y2(n,t){if(n.size<t)throw new G(V.ErrInvalidArgument,"unacceptable path");for(let e=0;e<n.children.length;e++){const i=n.children[e];if(i.size<t)t-=i.size;else{n=i;break}}return{node:n,offset:t}}class G2{constructor(t){p(this,"root");this.root=t}tokensBetween(t,e,i){L1(this.root,t,e,i)}traverse(t){_1(this.root,t,0)}traverseAll(t){_d(this.root,t,0)}findTreePos(t,e=!0){return gy(this.root,t,e)}treePosToPath(t){const e=[];let i=t.node;if(i.isText){const a=i.parent.findOffset(i);if(a===-1)throw new G(V.ErrInvalidArgument,"invalid treePos");const l=du(i.parent,a);e.push(l+t.offset),i=i.parent}else if(i.hasTextChild()){const a=du(i,t.offset);e.push(a)}else e.push(t.offset);for(;i.parent;){const a=i.parent.findOffset(i);if(a===-1)throw new G(V.ErrInvalidArgument,"invalid treePos");e.push(a),i=i.parent}return e.reverse()}pathToIndex(t){const e=this.pathToTreePos(t);return this.indexOf(e)}pathToTreePos(t){if(!t.length)throw new G(V.ErrInvalidArgument,"unacceptable path");let e=this.root;for(let i=0;i<t.length-1;i++){const a=t[i];if(e=e.children[a],!e)throw new G(V.ErrInvalidArgument,"unacceptable path")}if(e.hasTextChild())return Y2(e,t[t.length-1]);if(e.children.length<t[t.length-1])throw new G(V.ErrInvalidArgument,"unacceptable path");return{node:e,offset:t[t.length-1]}}getRoot(){return this.root}get size(){return this.root.size}findPostorderRight(t){const{node:e,offset:i}=t;if(e.isText){if(e.size===i){const a=e.nextSibling;return a||e.parent}return e}return e.children.length===i?e:U1(e.children[i])}indexOf(t){let{node:e}=t;const{offset:i}=t;let a=0,l=1;if(e.isText){a+=i;const c=e.parent,d=c.findOffset(e);if(d===-1)throw new G(V.ErrInvalidArgument,"invalid pos");a+=du(c,d),e=e.parent}else a+=du(e,i);for(;e!=null&&e.parent;){const c=e.parent,d=c.findOffset(e);if(d===-1)throw new G(V.ErrInvalidArgument,"invalid pos");a+=du(c,d),l++,e=e.parent}return a+l-1}indexToPath(t){const e=this.findTreePos(t);return this.treePosToPath(e)}}const X2=(n,t)=>n===t?0:n<t?-1:1;class K2{constructor(t,e,i){p(this,"key");p(this,"value");p(this,"parent");p(this,"left");p(this,"right");p(this,"isRed");this.key=t,this.value=e,this.isRed=i}}class F2{constructor(t){p(this,"stack");this.stack=[],this.traverseInorder(t)}traverseInorder(t){t&&(this.traverseInorder(t.left),this.stack.push({key:t.key,value:t.value}),this.traverseInorder(t.right))}}class q1{constructor(t){p(this,"root");p(this,"comparator");p(this,"counter");this.comparator=typeof t<"u"?t:X2,this.counter=0}put(t,e){return this.root=this.putInternal(t,e,this.root),this.root.isRed=!1,e}get(t){const e=this.getInternal(t,this.root);return e?e.value:void 0}remove(t){!this.isRed(this.root.left)&&!this.isRed(this.root.right)&&(this.root.isRed=!0),this.root=this.removeInternal(this.root,t),this.root&&(this.root.isRed=!1)}getIterator(){return new F2(this.root)}values(){const t=[];for(const e of this.getIterator().stack)t.push(e.value);return t}floorEntry(t){let e=this.root;for(;e;){const i=this.comparator(t,e.key);if(i>0)if(e.right)e.right.parent=e,e=e.right;else return e;else if(i<0)if(e.left)e.left.parent=e,e=e.left;else{let a=e.parent,l=e;for(;a&&l===a.left;)l=a,a=a.parent;return a}else return e}}lastEntry(){if(!this.root)return this.root;let t=this.root;for(;t.right;)t=t.right;return t}size(){return this.counter}isEmpty(){return this.counter===0}getInternal(t,e){for(;e;){const i=this.comparator(t,e.key);if(i===0)return e;i<0?e=e.left:i>0&&(e=e.right)}}putInternal(t,e,i){if(!i)return this.counter+=1,new K2(t,e,!0);const a=this.comparator(t,i.key);return a<0?i.left=this.putInternal(t,e,i.left):a>0?i.right=this.putInternal(t,e,i.right):i.value=e,this.isRed(i.right)&&!this.isRed(i.left)&&(i=this.rotateLeft(i)),this.isRed(i.left)&&this.isRed(i.left.left)&&(i=this.rotateRight(i)),this.isRed(i.left)&&this.isRed(i.right)&&this.flipColors(i),i}removeInternal(t,e){if(this.comparator(e,t.key)<0)!this.isRed(t.left)&&!this.isRed(t.left.left)&&(t=this.moveRedLeft(t)),t.left=this.removeInternal(t.left,e);else{if(this.isRed(t.left)&&(t=this.rotateRight(t)),this.comparator(e,t.key)===0&&!t.right){this.counter-=1;return}if(!this.isRed(t.right)&&!this.isRed(t.right.left)&&(t=this.moveRedRight(t)),this.comparator(e,t.key)===0){this.counter-=1;const i=this.min(t.right);t.value=i.value,t.key=i.key,t.right=this.removeMin(t.right)}else t.right=this.removeInternal(t.right,e)}return this.fixUp(t)}min(t){return t.left?this.min(t.left):t}removeMin(t){if(t.left)return!this.isRed(t.left)&&!this.isRed(t.left.left)&&(t=this.moveRedLeft(t)),t.left=this.removeMin(t.left),this.fixUp(t)}fixUp(t){return this.isRed(t.right)&&(t=this.rotateLeft(t)),this.isRed(t.left)&&this.isRed(t.left.left)&&(t=this.rotateRight(t)),this.isRed(t.left)&&this.isRed(t.right)&&this.flipColors(t),t}moveRedLeft(t){return this.flipColors(t),this.isRed(t.right.left)&&(t.right=this.rotateRight(t.right),t=this.rotateLeft(t),this.flipColors(t)),t}moveRedRight(t){return this.flipColors(t),this.isRed(t.left.left)&&(t=this.rotateRight(t),this.flipColors(t)),t}isRed(t){return t&&t.isRed}rotateLeft(t){const e=t.right;return t.right=e.left,e.left=t,e.isRed=e.left.isRed,e.left.isRed=!0,e}rotateRight(t){const e=t.left;return t.left=e.right,e.right=t,e.isRed=e.right.isRed,e.right.isRed=!0,e}flipColors(t){t.isRed=!t.isRed,t.left.isRed=!t.left.isRed,t.right.isRed=!t.right.isRed}}class Zn{constructor(t,e){p(this,"parentID");p(this,"leftSiblingID");this.parentID=t,this.leftSiblingID=e}static of(t,e){return new Zn(t,e)}static fromTreePos(t){const{offset:e}=t;let{node:i}=t,a;return i.isText?(i.parent.children[0]===i&&e===0?a=i.parent:a=i,i=i.parent):e===0?a=i:a=i.children[e-1],Zn.of(i.id,Ue.of(a.getCreatedAt(),a.getOffset()+e))}getParentID(){return this.parentID}static fromStruct(t){return Zn.of(Ue.of(qn.fromStruct(t.parentID.createdAt),t.parentID.offset),Ue.of(qn.fromStruct(t.leftSiblingID.createdAt),t.leftSiblingID.offset))}toStruct(){return{parentID:{createdAt:this.getParentID().getCreatedAt().toStruct(),offset:this.getParentID().getOffset()},leftSiblingID:{createdAt:this.getLeftSiblingID().getCreatedAt().toStruct(),offset:this.getLeftSiblingID().getOffset()}}}toTreeNodePair(t){const e=this.getParentID(),i=this.getLeftSiblingID(),a=t.findFloorNode(e);let l=t.findFloorNode(i);if(!a||!l)throw new G(V.ErrRefused,`cannot find node of CRDTTreePos(${e.toTestString()}, ${i.toTestString()})`);return!i.equals(e)&&i.getOffset()>0&&i.getOffset()===l.id.getOffset()&&l.insPrevID&&(l=t.findFloorNode(l.insPrevID)),[a,l]}getLeftSiblingID(){return this.leftSiblingID}equals(t){return this.getParentID().getCreatedAt().equals(t.getParentID().getCreatedAt())&&this.getParentID().getOffset()===t.getParentID().getOffset()&&this.getLeftSiblingID().getCreatedAt().equals(t.getLeftSiblingID().getCreatedAt())&&this.getLeftSiblingID().getOffset()===t.getLeftSiblingID().getOffset()}}class Ue{constructor(t,e){p(this,"createdAt");p(this,"offset");this.createdAt=t,this.offset=e}static of(t,e){return new Ue(t,e)}static fromStruct(t){return Ue.of(qn.fromStruct(t.createdAt),t.offset)}static createComparator(){return(t,e)=>{const i=t.getCreatedAt().compare(e.getCreatedAt());return i!==0?i:t.getOffset()>e.getOffset()?1:t.getOffset()<e.getOffset()?-1:0}}getCreatedAt(){return this.createdAt}equals(t){return this.createdAt.compare(t.createdAt)===0&&this.offset===t.offset}getOffset(){return this.offset}setOffset(t){this.offset=t}toStruct(){return{createdAt:this.createdAt.toStruct(),offset:this.offset}}toIDString(){return`${this.createdAt.toIDString()}:${this.offset}`}toTestString(){return`${this.createdAt.toTestString()}/${this.offset}`}}class yn extends V2{constructor(e,i,a,l,c){super(i);p(this,"id");p(this,"removedAt");p(this,"attrs");p(this,"insPrevID");p(this,"insNextID");p(this,"_value","");this.id=e,this.removedAt=c,l&&(this.attrs=l),typeof a=="string"?this.value=a:Array.isArray(a)&&(this._children=a)}toIDString(){return this.id.toIDString()}getRemovedAt(){return this.removedAt}static create(e,i,a,l){return new yn(e,i,a,l)}deepcopy(){var i;const e=new yn(this.id,this.type);return e.removedAt=this.removedAt,e._value=this._value,e.size=this.size,e.attrs=(i=this.attrs)==null?void 0:i.deepcopy(),e._children=this._children.map(a=>{const l=a.deepcopy();return l.parent=e,l}),e.insPrevID=this.insPrevID,e.insNextID=this.insNextID,e}get value(){if(!this.isText)throw new G(V.ErrInvalidType,`cannot get value of element node: ${this.type}`);return this._value}set value(e){if(!this.isText)throw new G(V.ErrInvalidType,`cannot set value of element node: ${this.type}`);this._value=e,this.size=e.length}get isRemoved(){return!!this.removedAt}remove(e){const i=!this.removedAt;(!this.removedAt||this.removedAt.compare(e)>0)&&(this.removedAt=e),i&&this.updateAncestorsSize()}cloneText(e){return new yn(Ue.of(this.id.getCreatedAt(),e),this.type,void 0,void 0,this.removedAt)}cloneElement(e){return new yn(Ue.of(e(),0),this.type,void 0,void 0,this.removedAt)}split(e,i,a){const[l,c]=this.isText?this.splitText(i,this.id.getOffset()):this.splitElement(i,a);if(l){if(l.insPrevID=this.id,this.insNextID){const d=e.findFloorNode(this.insNextID);d.insPrevID=l.id,l.insNextID=this.insNextID}this.insNextID=l.id,e.registerNode(l)}return[l,c]}getCreatedAt(){return this.id.getCreatedAt()}getOffset(){return this.id.getOffset()}canDelete(e,i){return this.getCreatedAt().getLamport()<=i&&(!this.removedAt||e.after(this.removedAt))}canStyle(e,i){return this.isText?!1:this.getCreatedAt().getLamport()<=i&&(!this.removedAt||e.after(this.removedAt))}setAttrs(e,i){this.attrs||(this.attrs=new ls);const a=[];for(const[l,c]of Object.entries(e))a.push(this.attrs.set(l,c,i));return a}purge(e){this.attrs&&this.attrs.purge(e)}getDataSize(){const e={data:0,meta:0};if(this.isText&&(e.data+=this.size*2),this.id&&(e.meta+=Sr),this.removedAt&&(e.meta+=Sr),this.attrs)for(const i of this.attrs){if(i.getRemovedAt())continue;const a=i.getDataSize();e.meta+=a.meta,e.data+=a.data}return e}getGCPairs(){const e=[];if(!this.attrs)return e;for(const i of this.attrs)i.getRemovedAt()&&e.push({parent:this,child:i});return e}}function my(n){var e;if(n.isText){const i=n;return{type:i.type,value:i.value}}const t={type:n.type,children:n.children.map(my)};return n.attrs&&(t.attributes=is((e=n.attrs)==null?void 0:e.toObject())),t}function _y(n){if(n.isText)return n.value;let t="";return n.attrs&&n.attrs.size()&&(t=" "+Array.from(n.attrs).filter(e=>!e.isRemoved()).sort((e,i)=>e.getKey().localeCompare(i.getKey())).map(e=>{const i=JSON.parse(e.getValue());return typeof i=="string"?`${e.getKey()}="${i}"`:`${e.getKey()}="${wr(e.getValue())}"`}).join(" ")),`<${n.type}${t}>${n.children.map(e=>_y(e)).join("")}</${n.type}>`}function P1(n){if(n.isText){const t=n;return{type:t.type,value:t.value,size:t.size,isRemoved:t.isRemoved}}return{type:n.type,children:n.children.map(P1),size:n.size,isRemoved:n.isRemoved}}class vn extends Gu{constructor(e,i){super(i);p(this,"indexTree");p(this,"nodeMapByID");this.indexTree=new G2(e),this.nodeMapByID=new q1(Ue.createComparator()),this.indexTree.traverseAll(a=>{this.nodeMapByID.put(a.id,a)})}static create(e,i){return new vn(e,i)}findFloorNode(e){const i=this.nodeMapByID.floorEntry(e);if(!(!i||!i.key.getCreatedAt().equals(e.getCreatedAt())))return i.value}registerNode(e){this.nodeMapByID.put(e.id,e)}findNodesAndSplitText(e,i){let a={data:0,meta:0};const[l,c]=e.toTreeNodePair(this);let d=c;const h=l===d,g=d.parent&&!h?d.parent:l;if(d.isText){const[,y]=d.split(this,e.getLeftSiblingID().getOffset()-d.id.getOffset());a=y}if(i){const y=g.allChildren,w=h?0:y.indexOf(d)+1;for(let v=w;v<y.length;v++){const S=y[v];if(!S.id.getCreatedAt().after(i))break;d=S}}return[[g,d],a]}style(e,i,a,l){const c={data:0,meta:0},[[d,h],g]=this.findNodesAndSplitText(e[0],a),[[y,w],v]=this.findNodesAndSplitText(e[1],a);_e(c,v,g);const S=[],x=i?is(i):{},E=[];return this.traverseInPosRange(d,h,y,w,([I,k])=>{var O;const z=I.getCreatedAt().getActorID();let N=bu;if(l!=null&&(N=l.get(z)?l.get(z):0n),I.canStyle(a,N)&&i){const _=I.setAttrs(i,a),J=_.reduce((F,[,nt])=>(nt&&(F[nt.getKey()]=x[nt.getKey()]),F),{}),U=I.parent,W=I.prevSibling||I.parent;Object.keys(J).length>0&&S.push({type:"style",from:this.toIndex(U,W),to:this.toIndex(I,I),fromPath:this.toPath(U,W),toPath:this.toPath(I,I),actor:a.getActorID(),value:J});for(const[F]of _)F&&E.push({parent:I,child:F});for(const[F]of Object.entries(x)){const nt=(O=I.attrs)==null?void 0:O.getNodeMapByKey().get(F);nt!==void 0&&k!==ye.End&&_e(c,nt.getDataSize())}}}),[E,S,c]}removeStyle(e,i,a,l){const c={data:0,meta:0},[[d,h],g]=this.findNodesAndSplitText(e[0],a),[[y,w],v]=this.findNodesAndSplitText(e[1],a);_e(c,v,g);const S=[],x=[];return this.traverseInPosRange(d,h,y,w,([E])=>{const I=E.getCreatedAt().getActorID();let k=bu;if(l!=null&&(k=l.get(I)?l.get(I):0n),E.canStyle(a,k)&&i){E.attrs||(E.attrs=new ls);for(const O of i){const _=E.attrs.remove(O,a);for(const J of _)x.push({parent:E,child:J})}const z=E.parent,N=E.prevSibling||E.parent;S.push({actor:a.getActorID(),type:"removeStyle",from:this.toIndex(z,N),to:this.toIndex(E,E),fromPath:this.toPath(z,N),toPath:this.toPath(E,E),value:i})}}),[x,S,c]}edit(e,i,a,l,c,d){const h={data:0,meta:0},[[g,y],w]=this.findNodesAndSplitText(e[0],l),[[v,S],x]=this.findNodesAndSplitText(e[1],l);_e(h,x,w);const E=this.toIndex(g,y),I=this.toPath(g,y),k=[],z=[],N=[];this.traverseInPosRange(g,y,v,S,([J,U],W)=>{if(U===ye.Start&&!W)for(const ft of J.children)N.push(ft);const F=J.getCreatedAt().getActorID();let nt=bu;d!=null&&(nt=d.get(F)?d.get(F):0n),(J.canDelete(l,nt)||k.includes(J.parent))&&((U===ye.Text||U===ye.Start)&&k.push(J),z.push([J,U]))});const O=this.makeDeletionChanges(z,l),_=[];for(const J of k)J.remove(l),J.isRemoved&&_.push({parent:this,child:J});for(const J of N)J.removedAt||g.append(J);if(a>0){let J=0,U=g,W=y;for(;J<a;)U.split(this,U.findOffset(W)+1,c),W=U,U=U.parent,J++;O.push({type:"content",from:E,to:E,fromPath:I,toPath:I,actor:l.getActorID()})}if(i!=null&&i.length){const J=[];let U=y;for(const W of i)U===g?g.insertAt(W,0):g.insertAfter(W,U),U=W,_d(W,F=>{g.isRemoved?(F.remove(l),_.push({parent:this,child:F})):_e(h,F.getDataSize()),this.nodeMapByID.put(F.id,F)}),W.isRemoved||J.push(W);if(J.length){const W=J.map(F=>my(F));O.length&&O[O.length-1].from===E?O[O.length-1].value=W:O.push({type:"content",from:E,to:E,fromPath:I,toPath:I,actor:l.getActorID(),value:W})}}return[O,_,h]}editT(e,i,a,l,c){const d=this.findPos(e[0]),h=this.findPos(e[1]);this.edit([d,h],i,a,l,c)}move(e,i,a){throw new G(V.ErrUnimplemented,`not implemented: ${e}, ${i}, ${a}`)}pathToTreePos(e){return this.indexTree.pathToTreePos(e)}purge(e){var l;(l=e.parent)==null||l.removeChild(e),this.nodeMapByID.remove(e.id);const i=e.insPrevID,a=e.insNextID;if(i){const c=this.findFloorNode(i);c.insNextID=a}if(a){const c=this.findFloorNode(a);c.insPrevID=i}e.insPrevID=void 0,e.insNextID=void 0}getGCPairs(){const e=[];return this.indexTree.traverse(i=>{i.getRemovedAt()&&e.push({parent:this,child:i});for(const a of i.getGCPairs())e.push(a)}),e}findPos(e,i=!0){const a=this.indexTree.findTreePos(e,i);return Zn.fromTreePos(a)}pathToPosRange(e){const i=this.pathToIndex(e);return[this.findPos(i),this.findPos(i+1)]}pathToPos(e){const i=this.indexTree.pathToIndex(e);return this.findPos(i)}getRoot(){return this.indexTree.getRoot()}getSize(){return this.indexTree.size}getNodeSize(){return this.nodeMapByID.size()}getIndexTree(){return this.indexTree}toXML(){return _y(this.indexTree.getRoot())}getDataSize(){const e={data:0,meta:0};return this.indexTree.traverse(i=>{if(i.getRemovedAt())return;const a=i.getDataSize();e.data+=a.data,e.meta+=a.meta}),{data:e.data,meta:e.meta+this.getMetaUsage()}}toJSON(){return JSON.stringify(this.getRootTreeNode())}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:JSON.parse(this.toJSON()),type:"YORKIE_TREE"}}toJSInfoForTest(){const e=this.indexTree.getRoot(),i=(a,l=void 0,c=void 0,d=0)=>{var S,x,E,I;let h,g,y;const w=a.isText?{node:a,offset:0}:l&&c?this.toTreePos(l,c):null;w&&(h=this.indexTree.indexOf(w),g=this.indexTree.treePosToPath(w),y=Zn.fromTreePos(w).toStruct());const v={type:a.type,parent:l==null?void 0:l.id.toTestString(),size:a.size,id:a.id.toTestString(),removedAt:(S=a.removedAt)==null?void 0:S.toTestString(),insPrev:(x=a.insPrevID)==null?void 0:x.toTestString(),insNext:(E=a.insNextID)==null?void 0:E.toTestString(),value:a.isText?a.value:void 0,isRemoved:a.isRemoved,children:[],depth:d,attributes:a.attrs?is((I=a.attrs)==null?void 0:I.toObject()):void 0,index:h,path:g,pos:y};for(let k=0;k<a.allChildren.length;k++){const z=k===0?a:a.allChildren[k-1];v.children.push(i(a.allChildren[k],a,z,d+1))}return v};return i(e)}getRootTreeNode(){return my(this.indexTree.getRoot())}toTestTreeNode(){return P1(this.indexTree.getRoot())}toSortedJSON(){return this.toJSON()}deepcopy(){const e=this.getRoot();return new vn(e.deepcopy(),this.getCreatedAt())}toPath(e,i){const a=this.toTreePos(e,i);return a?this.indexTree.treePosToPath(a):[]}toIndex(e,i){const a=this.toTreePos(e,i);return a?this.indexTree.indexOf(a):-1}indexToPath(e){return this.indexTree.indexToPath(e)}pathToIndex(e){return this.indexTree.pathToIndex(e)}indexRangeToPosRange(e){const i=this.findPos(e[0]);return e[0]===e[1]?[i,i]:[i,this.findPos(e[1])]}indexRangeToPosStructRange(e){const[i,a]=e,l=this.findPos(i);return i===a?[l.toStruct(),l.toStruct()]:[l.toStruct(),this.findPos(a).toStruct()]}posRangeToPathRange(e){const[[i,a]]=this.findNodesAndSplitText(e[0]),[[l,c]]=this.findNodesAndSplitText(e[1]);return[this.toPath(i,a),this.toPath(l,c)]}posRangeToIndexRange(e){const[[i,a]]=this.findNodesAndSplitText(e[0]),[[l,c]]=this.findNodesAndSplitText(e[1]);return[this.toIndex(i,a),this.toIndex(l,c)]}traverseInPosRange(e,i,a,l,c){const d=this.toIndex(e,i),h=this.toIndex(a,l);return this.indexTree.tokensBetween(d,h,c)}toTreePos(e,i){if(!e||!i)return;if(e.isRemoved){let l;for(;e.isRemoved;)l=e,e=l.parent;const c=e.findOffset(l);return{node:e,offset:c}}if(e===i)return{node:e,offset:0};let a=e.findOffset(i);if(!i.isRemoved){if(i.isText)return{node:i,offset:i.paddedSize};a++}return{node:e,offset:a}}makeDeletionChanges(e,i){const a=[],l=[];let c=null,d=null;for(let h=0;h<e.length;h++){const g=e[h],y=e[h+1];c||(c=g),d=g;const w=this.findRightToken(g);(!w||!y||w[0]!==y[0]||w[1]!==y[1])&&(l.push([c,d]),c=null,d=null)}for(const h of l){const[g,y]=h,[w,v]=this.findLeftToken(g),[S,x]=y,E=v===ye.Start?w:w.parent,I=x===ye.Start?S:S.parent,k=this.toIndex(E,w),z=this.toIndex(I,S);k<z&&(a.length>0&&k===a[a.length-1].to?(a[a.length-1].to=z,a[a.length-1].toPath=this.toPath(I,S)):a.push({type:"content",from:k,to:z,fromPath:this.toPath(E,w),toPath:this.toPath(I,S),actor:i.getActorID()}))}return a.reverse()}findRightToken([e,i]){if(i===ye.Start){const h=e.allChildren;return h.length>0?[h[0],h[0].isText?ye.Text:ye.Start]:[e,ye.End]}const a=e.parent,l=a.allChildren,c=l.indexOf(e);if(a&&c===l.length-1)return[a,ye.End];const d=l[c+1];return[d,d.isText?ye.Text:ye.Start]}findLeftToken([e,i]){if(i===ye.End){const h=e.allChildren;if(h.length>0){const g=h[h.length-1];return[g,g.isText?ye.Text:ye.End]}return[e,ye.Start]}const a=e.parent,l=a.allChildren,c=l.indexOf(e);if(a&&c===0)return[a,ye.Start];const d=l[c-1];return[d,d.isText?ye.Text:ye.End]}}class Zu extends tr{constructor(e,i,a,l,c,d){super(e,d);p(this,"fromPos");p(this,"toPos");p(this,"contents");p(this,"splitLevel");this.fromPos=i,this.toPos=a,this.contents=l,this.splitLevel=c}static create(e,i,a,l,c,d){return new Zu(e,i,a,l,c,d)}execute(e,i,a){var w;const l=e.findByCreatedAt(this.getParentCreatedAt());if(!l)throw new G(V.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(l instanceof vn))throw new G(V.ErrInvalidArgument,"fail to execute, only Tree can execute edit");const c=this.getExecutedAt(),d=l,[h,g,y]=d.edit([this.fromPos,this.toPos],(w=this.contents)==null?void 0:w.map(v=>v.deepcopy()),this.splitLevel,c,(()=>{let v=c.getDelimiter();return this.contents!==void 0&&(v+=this.contents.length),()=>qn.of(c.getLamport(),++v,c.getActorID())})(),a);e.acc(y);for(const v of g)e.registerGCPair(v);return{opInfos:h.map(({from:v,to:S,value:x,splitLevel:E,fromPath:I,toPath:k})=>({type:"tree-edit",path:e.createPath(this.getParentCreatedAt()),from:v,to:S,value:x,splitLevel:E,fromPath:I,toPath:k}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),i=`${this.fromPos.getLeftSiblingID().getCreatedAt().toTestString()}/${this.fromPos.getLeftSiblingID().getOffset()}`,a=`${this.toPos.getLeftSiblingID().getCreatedAt().toTestString()}/${this.toPos.getLeftSiblingID().getOffset()}`,l=this.contents||[];return`${e}.EDIT(${i},${a},${l.map(c=>_y(c)).join("")})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getContents(){return this.contents}getSplitLevel(){return this.splitLevel}}class qo{constructor(t){p(this,"vector");this.vector=t||new Map}set(t,e){this.vector.set(t,e)}unset(t){this.vector.delete(t)}get(t){return this.vector.get(t)}maxLamport(){let t=BigInt(0);for(const[,e]of this)e>t&&(t=e);return t}max(t){const e=new Map;for(const[i,a]of t){const l=this.vector.get(i),c=l&&l>a?l:a;e.set(i,c)}for(const[i,a]of this){const l=t.get(i),c=l&&l>a?l:a;e.set(i,c)}return new qo(e)}afterOrEqual(t){const e=this.vector.get(t.getActorID());return e===void 0?!1:e>=t.getLamport()}deepcopy(){const t=new Map;for(const[e,i]of this.vector)t.set(e,i);return new qo(t)}filter(t){const e=new Map;for(const[i]of t){const a=this.vector.get(i);a!==void 0&&e.set(i,a)}return new qo(e)}size(){return this.vector.size}*[Symbol.iterator](){for(const[t,e]of this.vector)yield[t,e]}}const J1=new qo(new Map);class Gn{constructor(t,e,i,a,l){p(this,"clientSeq");p(this,"serverSeq");p(this,"actor");p(this,"lamport");p(this,"versionVector");this.clientSeq=t,this.serverSeq=l,this.lamport=e,this.versionVector=a,this.actor=i}hasClocks(){return this.versionVector.size()>0&&this.lamport!=dy}static of(t,e,i,a,l){return new Gn(t,e,i,a,l)}next(t=!1){if(t)return new Gn(this.clientSeq+1,this.lamport,this.actor,J1,dy);const e=this.versionVector.deepcopy();return e.set(this.actor,this.lamport+1n),new Gn(this.clientSeq+1,this.lamport+1n,this.actor,e)}syncClocks(t){if(!t.hasClocks())return this;const e=t.lamport>this.lamport?t.lamport+1n:this.lamport+1n,i=this.versionVector.max(t.versionVector),a=new Gn(this.clientSeq,e,this.actor,i);return a.versionVector.set(this.actor,e),a}setClocks(t,e){const i=t>this.lamport?t+1n:this.lamport+1n;e.unset(Ld);const a=this.versionVector.max(e);return a.set(this.actor,i),Gn.of(this.clientSeq,i,this.actor,a)}createTimeTicket(t){return qn.of(this.lamport,t,this.actor)}setActor(t){return new Gn(this.clientSeq,this.lamport,t,this.versionVector,this.serverSeq)}setLamport(t){return new Gn(this.clientSeq,t,this.actor,this.versionVector,this.serverSeq)}setVersionVector(t){return new Gn(this.clientSeq,this.lamport,this.actor,t,this.serverSeq)}getClientSeq(){return this.clientSeq}getServerSeq(){return this.serverSeq?this.serverSeq.toString():""}getLamport(){return this.lamport}getLamportAsString(){return this.lamport.toString()}getActorID(){return this.actor}getVersionVector(){return this.versionVector}toTestString(){return`${this.lamport.toString()}:${this.actor.slice(-2)}:${this.clientSeq}`}}const Z2=new Gn(0,0n,Ld,J1);class Fo{constructor({id:t,operations:e,presenceChange:i,message:a}){p(this,"id");p(this,"operations");p(this,"presenceChange");p(this,"message");this.id=t,this.operations=e||[],this.presenceChange=i,this.message=a}static create({id:t,operations:e,presenceChange:i,message:a}){return new Fo({id:t,operations:e,presenceChange:i,message:a})}getID(){return this.id}getMessage(){return this.message}hasOperations(){return this.operations.length>0}getOperations(){return this.operations}setActor(t){for(const e of this.operations)e.setActor(t);this.id=this.id.setActor(t)}hasPresenceChange(){return this.presenceChange!==void 0}getPresenceChange(){return this.presenceChange}execute(t,e,i){const a=[],l=[];for(const c of this.operations){const d=c.execute(t,i,this.id.getVersionVector());if(!d)continue;const{opInfos:h,reverseOp:g}=d;a.push(...h),g&&l.unshift(g)}return this.presenceChange&&(this.presenceChange.type===Ar.Put?e.set(this.id.getActorID(),Yn(this.presenceChange.presence)):e.delete(this.id.getActorID())),{opInfos:a,reverseOps:l}}toTestString(){return`${this.operations.map(t=>t.toTestString()).join(",")}`}toStruct(){return{changeID:fe.bytesToHex(fe.toChangeID(this.getID()).toBinary()),message:this.getMessage(),operations:this.getOperations().map(t=>fe.bytesToHex(fe.toOperation(t).toBinary())),presenceChange:this.getPresenceChange()}}static fromStruct(t){const{changeID:e,operations:i,presenceChange:a,message:l}=t;return Fo.create({id:fe.bytesToChangeID(fe.hexToBytes(e)),operations:i==null?void 0:i.map(c=>fe.bytesToOperation(fe.hexToBytes(c))),presenceChange:a,message:l})}}class Ud{constructor(t,e,i,a,l,c){p(this,"documentKey");p(this,"checkpoint");p(this,"isRemoved");p(this,"changes");p(this,"snapshot");p(this,"versionVector");this.documentKey=t,this.checkpoint=e,this.isRemoved=i,this.changes=a,this.snapshot=c,this.versionVector=l}static create(t,e,i,a,l,c){return new Ud(t,e,i,a,l,c)}getDocumentKey(){return this.documentKey}getCheckpoint(){return this.checkpoint}getIsRemoved(){return this.isRemoved}getChanges(){return this.changes}hasChanges(){return this.changes.length>0}getChangeSize(){return this.changes.length}hasSnapshot(){return!!this.snapshot&&!!this.snapshot.length}getSnapshot(){return this.snapshot}getVersionVector(){return this.versionVector}}class Po{constructor(t,e){p(this,"serverSeq");p(this,"clientSeq");this.serverSeq=t,this.clientSeq=e}static of(t,e){return new Po(t,e)}increaseClientSeq(t){return t===0?this:new Po(this.serverSeq,this.clientSeq+t)}forward(t){if(this.equals(t))return this;const e=this.serverSeq>t.serverSeq?this.serverSeq:t.serverSeq,i=Math.max(this.clientSeq,t.clientSeq);return Po.of(e,i)}getServerSeqAsString(){return this.serverSeq.toString()}getClientSeq(){return this.clientSeq}getServerSeq(){return this.serverSeq}equals(t){return this.clientSeq===t.clientSeq&&this.serverSeq==t.serverSeq}toTestString(){return`serverSeq=${this.serverSeq}, clientSeq=${this.clientSeq}`}}const Q2=new Po(0n,0);class xr{constructor(t,e){p(this,"createdAt");p(this,"offset");this.createdAt=t,this.offset=e}static of(t,e){return new xr(t,e)}static fromStruct(t){return xr.of(qn.fromStruct(t.createdAt),t.offset)}getCreatedAt(){return this.createdAt}getOffset(){return this.offset}equals(t){return this.createdAt.compare(t.createdAt)===0&&this.offset===t.offset}hasSameCreatedAt(t){return this.createdAt.compare(t.createdAt)===0}split(t){return new xr(this.createdAt,this.offset+t)}toStruct(){return{createdAt:this.createdAt.toStruct(),offset:this.offset}}toTestString(){return`${this.createdAt.toTestString()}:${this.offset}`}toIDString(){return`${this.createdAt.toIDString()}:${this.offset}`}}const W2=xr.of(Go,0);class Wn{constructor(t,e){p(this,"id");p(this,"relativeOffset");this.id=t,this.relativeOffset=e}static of(t,e){return new Wn(t,e)}static fromStruct(t){const e=xr.fromStruct(t.id);return Wn.of(e,t.relativeOffset)}getID(){return this.id}getRelativeOffset(){return this.relativeOffset}getAbsoluteID(){return xr.of(this.id.getCreatedAt(),this.id.getOffset()+this.relativeOffset)}toTestString(){return`${this.id.toTestString()}:${this.relativeOffset}`}toStruct(){return{id:this.id.toStruct(),relativeOffset:this.relativeOffset}}equals(t){return this.id.equals(t.id)?this.relativeOffset===t.relativeOffset:!1}}class ta extends O1{constructor(e,i,a){super(i);p(this,"id");p(this,"removedAt");p(this,"prev");p(this,"next");p(this,"insPrev");p(this,"insNext");this.id=e,this.removedAt=a}static create(e,i){return new ta(e,i)}static createComparator(){return(e,i)=>{const a=e.getCreatedAt().compare(i.getCreatedAt());return a!==0?a:e.getOffset()>i.getOffset()?1:e.getOffset()<i.getOffset()?-1:0}}getID(){return this.id}getCreatedAt(){return this.id.getCreatedAt()}getLength(){return this.removedAt?0:this.getContentLength()}getContentLength(){return this.value&&this.value.length||0}getPrev(){return this.prev}getNext(){return this.next}getInsPrev(){return this.insPrev}getInsNext(){return this.insNext}getInsPrevID(){return this.insPrev.getID()}setPrev(e){this.prev=e,e&&(e.next=this)}setNext(e){this.next=e,e&&(e.prev=this)}setInsPrev(e){this.insPrev=e,e&&(e.insNext=this)}setInsNext(e){this.insNext=e,e&&(e.insPrev=this)}hasNext(){return!!this.next}hasInsPrev(){return!!this.insPrev}isRemoved(){return!!this.removedAt}getRemovedAt(){return this.removedAt}split(e){return new ta(this.id.split(e),this.splitValue(e),this.removedAt)}canDelete(e,i){const a=!this.removedAt;return this.getCreatedAt().getLamport()<=i&&(!this.removedAt||e.after(this.removedAt))?a:!1}canStyle(e,i){return this.getCreatedAt().getLamport()<=i&&(!this.removedAt||e.after(this.removedAt))}remove(e){this.removedAt=e}createPosRange(){return[Wn.of(this.id,0),Wn.of(this.id,this.getLength())]}getDataSize(){const e=this.value.getDataSize();return this.id&&(e.meta+=Sr),this.removedAt&&(e.meta+=Sr),e}deepcopy(){return new ta(this.id,this.value,this.removedAt)}toTestString(){return`${this.id.toTestString()} ${this.value?this.value:""}`}splitValue(e){const i=this.value;return this.value=i.substring(0,e),i.substring(e,i.length)}toIDString(){return this.id.toIDString()}}class Zo{constructor(){p(this,"head");p(this,"treeByIndex");p(this,"treeByID");this.head=ta.create(W2),this.treeByIndex=new Iu,this.treeByID=new q1(ta.createComparator()),this.treeByIndex.insert(this.head),this.treeByID.put(this.head.getID(),this.head)}static create(){return new Zo}edit(t,e,i,a){const l={data:0,meta:0},[c,d,h]=this.findNodeWithSplit(t[1],e),[g,y,w]=this.findNodeWithSplit(t[0],e);_e(l,d,y);const v=this.findBetween(w,h),[S,x]=this.deleteNodes(v,e,a),E=h?h.getID():c.getID();let I=Wn.of(E,0);if(i){const z=this.posToIndex(g.createPosRange()[1],!0),N=this.insertAfter(g,ta.create(xr.of(e,0),i));_e(l,N.getDataSize()),S.length&&S[S.length-1].from===z?S[S.length-1].value=i:S.push({actor:e.getActorID(),from:z,to:z,value:i}),I=Wn.of(N.getID(),N.getContentLength())}const k=[];for(const[,z]of x)k.push({parent:this,child:z});return[I,k,l,S]}indexToPos(t){const[e,i]=this.treeByIndex.find(t),a=e;return Wn.of(a.getID(),i)}findIndexesFromRange(t){const[e,i]=t;return[this.posToIndex(e,!1),this.posToIndex(i,!0)]}posToIndex(t,e){const i=t.getAbsoluteID(),a=e?this.findFloorNodePreferToLeft(i):this.findFloorNode(i);if(!a)throw new G(V.ErrInvalidArgument,`the node of the given id should be found: ${i.toTestString()}`);const l=this.treeByIndex.indexOf(a),c=a.isRemoved()?0:i.getOffset()-a.getID().getOffset();return l+c}findNode(t){return this.findFloorNode(t)}get length(){return this.treeByIndex.length}getTreeByIndex(){return this.treeByIndex}getTreeByID(){return this.treeByID}toString(){const t=[];for(const e of this)e.isRemoved()||t.push(e.getValue());return t.join("")}*[Symbol.iterator](){let t=this.head.getNext();for(;t;)yield t,t=t.getNext()}getHead(){return this.head}deepcopy(){const t=new Zo;let e=this.head.getNext(),i=t.head,a;for(;e;){if(a=t.insertAfter(i,e.deepcopy()),e.hasInsPrev()){const l=t.findNode(e.getInsPrevID());a.setInsPrev(l)}i=a,e=e.getNext()}return t}toTestString(){const t=[];let e=this.head;for(;e;)e.isRemoved()?t.push(`{${e.toTestString()}}`):t.push(`[${e.toTestString()}]`),e=e.getNext();return t.join("")}insertAfter(t,e){const i=t.getNext();return e.setPrev(t),i&&i.setPrev(e),this.treeByID.put(e.getID(),e),this.treeByIndex.insertAfter(t,e),e}findNodeWithSplit(t,e){const i=t.getAbsoluteID();let a=this.findFloorNodePreferToLeft(i);const l=i.getOffset()-a.getID().getOffset(),[,c]=this.splitNode(a,l);for(;a.hasNext()&&a.getNext().getCreatedAt().after(e);)a=a.getNext();return[a,c,a.getNext()]}findFloorNodePreferToLeft(t){let e=this.findFloorNode(t);if(!e)throw new G(V.ErrInvalidArgument,`the node of the given id should be found: ${t.toTestString()}`);if(t.getOffset()>0&&e.getID().getOffset()==t.getOffset()){if(!e.hasInsPrev())return e;e=e.getInsPrev()}return e}findFloorNode(t){const e=this.treeByID.floorEntry(t);if(e&&!(!e.key.equals(t)&&!e.key.hasSameCreatedAt(t)))return e.value}findBetween(t,e){const i=[];let a=t;for(;a&&a!==e;)i.push(a),a=a.getNext();return i}splitNode(t,e){const i={data:0,meta:0};if(e>t.getContentLength())throw new G(V.ErrInvalidArgument,"offset should be less than or equal to length");if(e===0)return[t,i];if(e===t.getContentLength())return[t.getNext(),i];const a=t.getDataSize(),l=t.split(e);this.treeByIndex.updateWeight(l),this.insertAfter(t,l);const c=t.getInsNext();return c&&c.setInsPrev(l),l.setInsPrev(t),_e(i,t.getDataSize(),l.getDataSize()),Uo(i,a),[l,i]}deleteNodes(t,e,i){if(!t.length)return[[],new Map];const[a,l]=this.filterNodes(t,e,i),c=new Map,d=this.makeChanges(l,e);for(const h of a)c.set(h.getID().toIDString(),h),h.remove(e);return this.deleteIndexNodes(l),[d,c]}filterNodes(t,e,i){const a=[],l=[],[c,d]=this.findEdgesOfCandidates(t);l.push(c);for(const h of t){const g=h.getCreatedAt().getActorID();let y=bu;i!=null&&(y=i.get(g)?i.get(g):0n),h.canDelete(e,y)?a.push(h):l.push(h)}return l.push(d),[a,l]}findEdgesOfCandidates(t){return[t[0].getPrev(),t[t.length-1].getNext()]}makeChanges(t,e){const i=[];let a,l;for(let c=0;c<t.length-1;c++){const d=t[c],h=t[c+1];d.getNext()!=h&&([a]=this.findIndexesFromRange(d.getNext().createPosRange()),h?[,l]=this.findIndexesFromRange(h.getPrev().createPosRange()):l=this.treeByIndex.length,a<l&&i.push({actor:e.getActorID(),from:a,to:l}))}return i.reverse()}deleteIndexNodes(t){for(let e=0;e<t.length-1;e++){const i=t[e],a=t[e+1];i.getNext()!=a&&this.treeByIndex.deleteRange(i,a)}}purge(t){this.treeByIndex.delete(t),this.treeByID.remove(t.getID());const e=t.getPrev(),i=t.getNext(),a=t.getInsPrev(),l=t.getInsNext();e&&e.setNext(i),i&&i.setPrev(e),t.setPrev(void 0),t.setNext(void 0),a&&a.setInsNext(l),l&&l.setInsPrev(a),t.setInsPrev(void 0),t.setInsNext(void 0)}}const JS=n=>n<0?Math.ceil(n):Math.floor(n);var Er=(n=>(n[n.Int=0]="Int",n[n.Long=1]="Long",n))(Er||{});class rn extends Gu{constructor(e,i,a){super(a);p(this,"valueType");p(this,"value");switch(this.valueType=e,e){case 0:typeof i=="number"?i>Math.pow(2,31)-1||i<-Math.pow(2,31)?this.value=Ut.fromNumber(i).toInt():this.value=JS(i):this.value=i.toInt();break;case 1:typeof i=="number"?this.value=Ut.fromNumber(i):this.value=i;break;default:throw new G(V.ErrUnimplemented,`unimplemented type: ${e}`)}}static create(e,i,a){return new rn(e,i,a)}static valueFromBytes(e,i){switch(e){case 0:return i[0]|i[1]<<8|i[2]<<16|i[3]<<24;case 1:return Ut.fromBytesLE(Array.from(i));default:throw new G(V.ErrUnimplemented,`unimplemented type: ${e}`)}}getDataSize(){return{data:this.valueType===0?4:8,meta:this.getMetaUsage()}}toJSON(){return`${this.value}`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:this.value,type:"YORKIE_COUNTER"}}deepcopy(){const e=rn.create(this.valueType,this.value,this.getCreatedAt());return e.setMovedAt(this.getMovedAt()),e}getType(){return this.valueType}static getCounterType(e){switch(typeof e){case"object":return e instanceof Ut?1:void 0;case"number":return e>Math.pow(2,31)-1||e<-Math.pow(2,31)?1:0;default:return}}static isSupport(e){return!!rn.getCounterType(e)}static isInteger(e){return e%1===0}isNumericType(){const e=this.valueType;return e===0||e===1}getValueType(){return this.valueType}getValue(){return this.value}toBytes(){switch(this.valueType){case 0:{const e=this.value;return new Uint8Array([e&255,e>>8&255,e>>16&255,e>>24&255])}case 1:{const i=this.value.toBytesLE();return Uint8Array.from(i)}default:throw new G(V.ErrUnimplemented,`unimplemented type: ${this.valueType}`)}}increase(e){function i(a){if(!a.isNumericType())throw new TypeError(`Unsupported type of value: ${typeof a.getValue()}`)}return i(this),i(e),this.valueType===1?this.value=this.value.add(e.getValue()):e.getType()===ee.Long?this.value=this.value+e.getValue().toInt():this.value=Ut.fromNumber(this.value+JS(e.getValue())).toInt(),this}}class Qo extends tr{constructor(e,i,a){super(e,a);p(this,"value");this.value=i}static create(e,i,a){return new Qo(e,i,a)}execute(e){const i=e.findByCreatedAt(this.getParentCreatedAt());if(!i)throw new G(V.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(i instanceof rn))throw new G(V.ErrInvalidArgument,"fail to execute, only Counter can execute increase");const a=i,l=this.value.deepcopy();return a.increase(l),{opInfos:[{type:"increase",path:e.createPath(this.getParentCreatedAt()),value:l.getValue()}],reverseOp:this.toReverseOperation()}}toReverseOperation(){const e=this.value.deepcopy(),a=e.getType()===ee.Long?e.getValue().multiply(-1):e.getValue()*-1;return Qo.create(this.getParentCreatedAt(),oe.of(a,e.getCreatedAt()))}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.INCREASE.${this.value.toJSON()}`}getValue(){return this.value}}class ss extends tr{constructor(e,i,a,l,c,d){super(e,d);p(this,"fromPos");p(this,"toPos");p(this,"attributes");p(this,"attributesToRemove");this.fromPos=i,this.toPos=a,this.attributes=l,this.attributesToRemove=c}static create(e,i,a,l,c){return new ss(e,i,a,l,[],c)}static createTreeRemoveStyleOperation(e,i,a,l,c){return new ss(e,i,a,new Map,l,c)}execute(e,i,a){const l=e.findByCreatedAt(this.getParentCreatedAt());if(!l)throw new G(V.ErrInvalidArgument,`fail to find ${this.getParentCreatedAt()}`);if(!(l instanceof vn))throw new G(V.ErrInvalidArgument,"fail to execute, only Tree can execute edit");const c=l;let d,h,g={data:0,meta:0};if(this.attributes.size){const y={};[...this.attributes].forEach(([w,v])=>y[w]=v),[h,d,g]=c.style([this.fromPos,this.toPos],y,this.getExecutedAt(),a)}else{const y=this.attributesToRemove;[h,d,g]=c.removeStyle([this.fromPos,this.toPos],y,this.getExecutedAt(),a)}e.acc(g);for(const y of h)e.registerGCPair(y);return{opInfos:d.map(({from:y,to:w,value:v,fromPath:S,toPath:x})=>({type:"tree-style",from:y,to:w,value:this.attributes.size?{attributes:v}:{attributesToRemove:v},fromPath:S,toPath:x,path:e.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),i=`${this.fromPos.getLeftSiblingID().getCreatedAt().toTestString()}:${this.fromPos.getLeftSiblingID().getOffset()}`,a=`${this.toPos.getLeftSiblingID().getCreatedAt().toTestString()}:${this.toPos.getLeftSiblingID().getOffset()}`;return`${e}.STYLE(${i},${a},${Object.entries(this.attributes||{}).map(([l,c])=>`${l}:"${c}"`).join(" ")})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getAttributes(){return this.attributes}getAttributesToRemove(){return this.attributesToRemove}}function tD(n){const t=new By,e=t.data;for(const[i,a]of Object.entries(n))e[i]=JSON.stringify(a);return t}function eD(n){if(n.type===Ar.Put)return new ku({type:La.PUT,presence:tD(n.presence)});if(n.type===Ar.Clear)return new ku({type:La.CLEAR});throw new G(V.ErrUnimplemented,"unimplemented type")}function nD(n){return new C1({serverSeq:n.getServerSeq(),clientSeq:n.getClientSeq()})}function H1(n){return new Bd({clientSeq:n.getClientSeq(),lamport:n.getLamport(),actorId:Xy(n.getActorID()),versionVector:Uy(n.getVersionVector())})}function At(n){if(n)return new wt({lamport:n.getLamport(),delimiter:n.getDelimiter(),actorId:Xy(n.getActorID())})}function Uy(n){if(!n)return;const t=new zd;for(const[e,i]of n)t.vector[e]=BigInt(i.toString());return t}function $1(n){switch(n){case ee.Null:return It.NULL;case ee.Boolean:return It.BOOLEAN;case ee.Integer:return It.INTEGER;case ee.Long:return It.LONG;case ee.Double:return It.DOUBLE;case ee.String:return It.STRING;case ee.Bytes:return It.BYTES;case ee.Date:return It.DATE;default:throw new G(V.ErrInvalidType,`unsupported type: ${n}`)}}function V1(n){switch(n){case Er.Int:return It.INTEGER_CNT;case Er.Long:return It.LONG_CNT;default:throw new G(V.ErrInvalidType,`unsupported type: ${n}`)}}function bm(n){if(n instanceof He)return new Dn({type:It.JSON_OBJECT,createdAt:At(n.getCreatedAt()),value:rx(n)});if(n instanceof nn)return new Dn({type:It.JSON_ARRAY,createdAt:At(n.getCreatedAt()),value:BD(n)});if(n instanceof pn)return new Dn({type:It.TEXT,createdAt:At(n.getCreatedAt())});if(n instanceof oe)return new Dn({type:$1(n.getType()),createdAt:At(n.getCreatedAt()),value:n.toBytes()});if(n instanceof rn)return new Dn({type:V1(n.getType()),createdAt:At(n.getCreatedAt()),value:n.toBytes()});if(n instanceof vn)return new Dn({type:It.TREE,createdAt:At(n.getCreatedAt()),value:LD(n)});throw new G(V.ErrUnimplemented,"unimplemented element")}function rD(n){return new Du({createdAt:At(n.getCreatedAt()),offset:n.getOffset()})}function Af(n){return new os({createdAt:At(n.getID().getCreatedAt()),offset:n.getID().getOffset(),relativeOffset:n.getRelativeOffset()})}function Ef(n){return new za({parentId:xu(n.getParentID()),leftSiblingId:xu(n.getLeftSiblingID())})}function xu(n){return new Qs({createdAt:At(n.getCreatedAt()),offset:n.getOffset()})}function j1(n){const t=new My;if(n instanceof _a){const e=n,i=new Ff;i.parentCreatedAt=At(e.getParentCreatedAt()),i.key=e.getKey(),i.value=bm(e.getValue()),i.executedAt=At(e.getExecutedAt()),t.body.case="set",t.body.value=i}else if(n instanceof Xu){const e=n,i=new Zf;i.parentCreatedAt=At(e.getParentCreatedAt()),i.prevCreatedAt=At(e.getPrevCreatedAt()),i.value=bm(e.getValue()),i.executedAt=At(e.getExecutedAt()),t.body.case="add",t.body.value=i}else if(n instanceof Fs){const e=n,i=new Qf;i.parentCreatedAt=At(e.getParentCreatedAt()),i.prevCreatedAt=At(e.getPrevCreatedAt()),i.createdAt=At(e.getCreatedAt()),i.executedAt=At(e.getExecutedAt()),t.body.case="move",t.body.value=i}else if(n instanceof ra){const e=n,i=new Wf;i.parentCreatedAt=At(e.getParentCreatedAt()),i.createdAt=At(e.getCreatedAt()),i.executedAt=At(e.getExecutedAt()),t.body.case="remove",t.body.value=i}else if(n instanceof Ku){const e=n,i=new td;i.parentCreatedAt=At(e.getParentCreatedAt()),i.from=Af(e.getFromPos()),i.to=Af(e.getToPos()),i.content=e.getContent();const a=i.attributes;for(const[l,c]of e.getAttributes())a[l]=c;i.executedAt=At(e.getExecutedAt()),t.body.case="edit",t.body.value=i}else if(n instanceof Fu){const e=n,i=new ed;i.parentCreatedAt=At(e.getParentCreatedAt()),i.from=Af(e.getFromPos()),i.to=Af(e.getToPos());const a=i.attributes;for(const[l,c]of e.getAttributes())a[l]=c;i.executedAt=At(e.getExecutedAt()),t.body.case="style",t.body.value=i}else if(n instanceof Qo){const e=n,i=new nd;i.parentCreatedAt=At(e.getParentCreatedAt()),i.value=bm(e.getValue()),i.executedAt=At(e.getExecutedAt()),t.body.case="increase",t.body.value=i}else if(n instanceof Zu){const e=n,i=new rd;i.parentCreatedAt=At(e.getParentCreatedAt()),i.from=Ef(e.getFromPos()),i.to=Ef(e.getToPos()),i.contents=cD(e.getContents()),i.splitLevel=e.getSplitLevel(),i.executedAt=At(e.getExecutedAt()),t.body.case="treeEdit",t.body.value=i}else if(n instanceof ss){const e=n,i=new id;i.parentCreatedAt=At(e.getParentCreatedAt()),i.from=Ef(e.getFromPos()),i.to=Ef(e.getToPos());const a=e.getAttributesToRemove();if(a.length>0)i.attributesToRemove=a;else{const l=i.attributes;for(const[c,d]of e.getAttributes())l[c]=d}i.executedAt=At(e.getExecutedAt()),t.body.case="treeStyle",t.body.value=i}else throw new G(V.ErrUnimplemented,"unimplemented operation");return t}function iD(n){const t=[];for(const e of n)t.push(j1(e));return t}function sD(n){const t=new N1({id:H1(n.getID()),message:n.getMessage()});return n.hasOperations()&&(t.operations=iD(n.getOperations())),n.hasPresenceChange()&&(t.presenceChange=eD(n.getPresenceChange())),t}function aD(n){const t=[];for(const e of n)t.push(sD(e));return t}function oD(n){const t=[];for(const e of n)t.push(new D1({key:e.getStrKey(),element:Py(e.getValue())}));return t}function lD(n){const t=[];for(const e of n)t.push(new fd({element:Py(e.getValue())}));return t}function uD(n){const t=[];for(const e of n){const i=new dd;i.id=rD(e.getID()),i.value=e.getValue().getContent(),i.removedAt=At(e.getRemovedAt());const a=i.attributes,l=e.getValue().getAttrs();for(const c of l){const d=new Yo;d.value=c.getValue(),d.updatedAt=At(c.getUpdatedAt()),a[c.getKey()]=d}t.push(i)}return t}function cD(n){const t=[];if(!n||!n.length)return t;for(const e of n)t.push(new hd({content:qy(e)}));return t}function fD(n){const t={};for(const e of n)t[e.getKey()]=new Yo({value:e.getValue(),updatedAt:At(e.getUpdatedAt()),isRemoved:e.isRemoved()});return t}function qy(n){if(!n)return[];const t=[];return _d(n,(e,i)=>{const a=new Cu({id:xu(e.id),type:e.type,removedAt:At(e.removedAt),depth:i});e.isText&&(a.value=e.value),e.insPrevID&&(a.insPrevId=xu(e.insPrevID)),e.insNextID&&(a.insNextId=xu(e.insNextID)),e.attrs&&(a.attributes=fD(e.attrs)),t.push(a)}),t}function dD(n){const t=new sn;return t.body.case="jsonObject",t.body.value=new sd({nodes:oD(n.getRHT()),createdAt:At(n.getCreatedAt()),movedAt:At(n.getMovedAt()),removedAt:At(n.getRemovedAt())}),t}function Y1(n){const t=new sn;return t.body.case="jsonArray",t.body.value=new ad({nodes:lD(n.getElements()),createdAt:At(n.getCreatedAt()),movedAt:At(n.getMovedAt()),removedAt:At(n.getRemovedAt())}),t}function hD(n){const t=new sn;return t.body.case="primitive",t.body.value=new od({type:$1(n.getType()),value:n.toBytes(),createdAt:At(n.getCreatedAt()),movedAt:At(n.getMovedAt()),removedAt:At(n.getRemovedAt())}),t}function gD(n){const t=new sn;return t.body.case="text",t.body.value=new ld({nodes:uD(n.getRGATreeSplit()),createdAt:At(n.getCreatedAt()),movedAt:At(n.getMovedAt()),removedAt:At(n.getRemovedAt())}),t}function mD(n){const t=new sn;return t.body.case="counter",t.body.value=new ud({type:V1(n.getType()),value:n.toBytes(),createdAt:At(n.getCreatedAt()),movedAt:At(n.getMovedAt()),removedAt:At(n.getRemovedAt())}),t}function G1(n){const t=new sn;return t.body.case="tree",t.body.value=new cd({nodes:qy(n.getRoot()),createdAt:At(n.getCreatedAt()),movedAt:At(n.getMovedAt()),removedAt:At(n.getRemovedAt())}),t}function Py(n){if(n instanceof He)return dD(n);if(n instanceof nn)return Y1(n);if(n instanceof oe)return hD(n);if(n instanceof pn)return gD(n);if(n instanceof rn)return mD(n);if(n instanceof vn)return G1(n);throw new G(V.ErrUnimplemented,"unimplemented element")}function yD(n){return new cs({documentKey:n.getDocumentKey(),checkpoint:nD(n.getCheckpoint()),isRemoved:n.getIsRemoved(),changes:aD(n.getChanges()),snapshot:n.getSnapshot(),versionVector:Uy(n.getVersionVector())})}function yu(n){if(!(n instanceof Gt))return{};const t=n.findDetails(M2);for(const e of t)return e.metadata;return{}}function $s(n){return yu(n).code??""}function X1(n){return Gn.of(n.clientSeq,BigInt(n.lamport),Yy(n.actorId),Jy(n.versionVector),BigInt(n.serverSeq))}function Jy(n){if(!n)return;const t=new qo;return Object.entries(n.vector).forEach(([e,i])=>{t.set(e,BigInt(i.toString()))}),t}function Et(n){if(n)return qn.of(BigInt(n.lamport),n.delimiter,Yy(n.actorId))}function Hy(n){const t={};return Object.entries(n.data).forEach(([e,i])=>{t[e]=JSON.parse(i)}),t}function pD(n){const t=n.type;if(t===La.PUT){const e=Hy(n.presence);return{type:Ar.Put,presence:e}}if(t===La.CLEAR)return{type:Ar.Clear};throw new G(V.ErrInvalidType,`unsupported type: ${t}`)}function vD(n){const t=new Map;return Object.entries(n).forEach(([e,i])=>{t.set(e,Hy(i))}),t}function K1(n){switch(n){case It.NULL:return ee.Null;case It.BOOLEAN:return ee.Boolean;case It.INTEGER:return ee.Integer;case It.LONG:return ee.Long;case It.DOUBLE:return ee.Double;case It.STRING:return ee.String;case It.BYTES:return ee.Bytes;case It.DATE:return ee.Date}throw new G(V.ErrUnimplemented,`unimplemented value type: ${n}`)}function vd(n){switch(n){case It.INTEGER_CNT:return Er.Int;case It.LONG_CNT:return Er.Long}throw new G(V.ErrUnimplemented,`unimplemented value type: ${n}`)}function xm(n){switch(n.type){case It.JSON_OBJECT:return n.value?nx(n.value):He.create(Et(n.createdAt));case It.JSON_ARRAY:return n.value?MD(n.value):nn.create(Et(n.createdAt));case It.TEXT:return pn.create(Zo.create(),Et(n.createdAt));case It.TREE:return zD(n.value);case It.NULL:case It.BOOLEAN:case It.INTEGER:case It.LONG:case It.DOUBLE:case It.STRING:case It.BYTES:case It.DATE:return oe.of(oe.valueFromBytes(K1(n.type),n.value),Et(n.createdAt));case It.INTEGER_CNT:case It.LONG_CNT:return rn.create(vd(n.type),rn.valueFromBytes(vd(n.type),n.value),Et(n.createdAt))}}function Nf(n){return Wn.of(xr.of(Et(n.createdAt),n.offset),n.relativeOffset)}function F1(n){return xr.of(Et(n.createdAt),n.offset)}function wD(n){const t=Mu.create(n.value);Object.entries(n.attributes).forEach(([i,a])=>{t.setAttr(i,a.value,Et(a.updatedAt))});const e=ta.create(F1(n.id),t);return e.remove(Et(n.removedAt)),e}function Io(n){return Zn.of(Tu(n.parentId),Tu(n.leftSiblingId))}function Tu(n){return Ue.of(Et(n.createdAt),n.offset)}function SD(n){if(!n.length)return;const t=[];return n.forEach(e=>{const i=$y(e.content);t.push(i)}),t}function $y(n){if(n.length===0)return;const t=[];for(const a of n)t.push(xD(a));const e=t[t.length-1],i=new Map;i.set(n[t.length-1].depth,t[t.length-1]);for(let a=t.length-2;a>=0;a--)i.get(n[a].depth-1).prepend(t[a]),i.set(n[a].depth,t[a]);return e.updateDescendantsSize(),vn.create(e,Go).getRoot()}function bD(n){const t=ls.create();for(const[e,i]of Object.entries(n))t.setInternal(e,i.value,Et(i.updatedAt),i.isRemoved);return t}function xD(n){const t=Tu(n.id),e=yn.create(t,n.type),i=Object.entries(n.attributes);return e.isText?e.value=n.value:i.length&&(e.attrs=bD(n.attributes)),n.insPrevId&&(e.insPrevID=Tu(n.insPrevId)),n.insNextId&&(e.insNextID=Tu(n.insNextId)),e.removedAt=Et(n.removedAt),e}function Z1(n){if(n.body.case==="set"){const t=n.body.value;return _a.create(t.key,xm(t.value),Et(t.parentCreatedAt),Et(t.executedAt))}else if(n.body.case==="add"){const t=n.body.value;return Xu.create(Et(t.parentCreatedAt),Et(t.prevCreatedAt),xm(t.value),Et(t.executedAt))}else if(n.body.case==="move"){const t=n.body.value;return Fs.create(Et(t.parentCreatedAt),Et(t.prevCreatedAt),Et(t.createdAt),Et(t.executedAt))}else if(n.body.case==="remove"){const t=n.body.value;return ra.create(Et(t.parentCreatedAt),Et(t.createdAt),Et(t.executedAt))}else if(n.body.case==="edit"){const t=n.body.value,e=new Map;return Object.entries(t.attributes).forEach(([i,a])=>{e.set(i,a)}),Ku.create(Et(t.parentCreatedAt),Nf(t.from),Nf(t.to),t.content,e,Et(t.executedAt))}else if(n.body.case==="style"){const t=n.body.value,e=new Map;return Object.entries(t.attributes).forEach(([i,a])=>{e.set(i,a)}),Fu.create(Et(t.parentCreatedAt),Nf(t.from),Nf(t.to),e,Et(t.executedAt))}else{if(n.body.case==="select")return;if(n.body.case==="increase"){const t=n.body.value;return Qo.create(Et(t.parentCreatedAt),xm(t.value),Et(t.executedAt))}else if(n.body.case==="treeEdit"){const t=n.body.value;return Zu.create(Et(t.parentCreatedAt),Io(t.from),Io(t.to),SD(t.contents),t.splitLevel,Et(t.executedAt))}else if(n.body.case==="treeStyle"){const t=n.body.value,e=new Map,i=t.attributesToRemove;return(i==null?void 0:i.length)>0?ss.createTreeRemoveStyleOperation(Et(t.parentCreatedAt),Io(t.from),Io(t.to),i,Et(t.executedAt)):(Object.entries(t.attributes).forEach(([a,l])=>{e.set(a,l)}),ss.create(Et(t.parentCreatedAt),Io(t.from),Io(t.to),e,Et(t.executedAt)))}else throw new G(V.ErrUnimplemented,"unimplemented operation")}}function TD(n){const t=[];for(const e of n){const i=Z1(e);i&&t.push(i)}return t}function Q1(n){const t=[];for(const e of n)t.push(Fo.create({id:X1(e.id),operations:TD(e.operations),presenceChange:e.presenceChange?pD(e.presenceChange):void 0,message:e.message}));return t}function AD(n){return Po.of(BigInt(n.serverSeq),n.clientSeq)}function ED(n){return Ud.create(n.documentKey,AD(n.checkpoint),n.isRemoved,Q1(n.changes),Jy(n.versionVector),n.snapshot)}function W1(n){const t=new Ou;for(const i of n.nodes){const a=Vy(i.element);t.set(i.key,a,a.getPositionedAt())}const e=new He(Et(n.createdAt),t);return e.setMovedAt(Et(n.movedAt)),e.setRemovedAt(Et(n.removedAt)),e}function tx(n){const t=new Ru;for(const i of n.nodes)t.insert(Vy(i.element));const e=new nn(Et(n.createdAt),t);return e.setMovedAt(Et(n.movedAt)),e.setRemovedAt(Et(n.removedAt)),e}function ND(n){const t=oe.of(oe.valueFromBytes(K1(n.type),n.value),Et(n.createdAt));return t.setMovedAt(Et(n.movedAt)),t.setRemovedAt(Et(n.removedAt)),t}function DD(n){const t=new Zo;let e=t.getHead();for(const a of n.nodes){const l=t.insertAfter(e,wD(a));a.insPrevId&&l.setInsPrev(t.findNode(F1(a.insPrevId))),e=l}const i=new pn(t,Et(n.createdAt));return i.setMovedAt(Et(n.movedAt)),i.setRemovedAt(Et(n.removedAt)),i}function CD(n){const t=rn.create(vd(n.type),rn.valueFromBytes(vd(n.type),n.value),Et(n.createdAt));return t.setMovedAt(Et(n.movedAt)),t.setRemovedAt(Et(n.removedAt)),t}function ex(n){const t=$y(n.nodes);return vn.create(t,Et(n.createdAt))}function Vy(n){if(n.body.case==="jsonObject")return W1(n.body.value);if(n.body.case==="jsonArray")return tx(n.body.value);if(n.body.case==="primitive")return ND(n.body.value);if(n.body.case==="text")return DD(n.body.value);if(n.body.case==="counter")return CD(n.body.value);if(n.body.case==="tree")return ex(n.body.value);throw new G(V.ErrUnimplemented,"unimplemented element")}function kD(n){return n.map(t=>({path:t.path,type:t.type}))}function OD(n){if(!n)return{root:He.create(Go),presences:new Map};const t=Pm.fromBinary(n);return{root:Vy(t.root),presences:vD(t.presences)}}function ID(n){const t=Uy(n);return jy(t.toBinary())}function RD(n){const t=Gy(n),e=zd.fromBinary(t);return Jy(e)}function nx(n){if(!n)throw new G(V.ErrInvalidArgument,"bytes is empty");const t=sn.fromBinary(n);return W1(t.body.value)}function rx(n){return Py(n).toBinary()}function MD(n){if(!n)throw new G(V.ErrInvalidArgument,"bytes is empty");const t=sn.fromBinary(n);return tx(t.body.value)}function BD(n){return Y1(n).toBinary()}function zD(n){if(!n)throw new G(V.ErrInvalidArgument,"bytes is empty");const t=sn.fromBinary(n);return ex(t.body.value)}function LD(n){return G1(n).toBinary()}function jy(n){return n?Array.from(n).map(t=>t.toString(16).padStart(2,"0")).join(""):""}function Yy(n){return jy(n)}function Gy(n){return new Uint8Array(n.match(/.{1,2}/g).map(t=>parseInt(t,16)))}function Xy(n){return Gy(n)}function _D(n){const t=Bd.fromBinary(n);return X1(t)}function UD(n){const t=My.fromBinary(n);return Z1(t)}const fe={fromPresence:Hy,toChangePack:yD,fromChangePack:ED,fromChanges:Q1,toTreeNodes:qy,fromTreeNodes:$y,objectToBytes:rx,bytesToObject:nx,bytesToSnapshot:OD,bytesToHex:jy,hexToBytes:Gy,toHexString:Yy,toUint8Array:Xy,toOperation:j1,toChangeID:H1,PbChangeID:Bd,bytesToChangeID:_D,bytesToOperation:UD,versionVectorToHex:ID,hexToVersionVector:RD,fromSchemaRules:kD};var Qe=(n=>(n[n.Trivial=0]="Trivial",n[n.Debug=1]="Debug",n[n.Info=2]="Info",n[n.Warn=3]="Warn",n[n.Error=4]="Error",n[n.Fatal=5]="Fatal",n))(Qe||{});let Na=3;function qD(n){Na=n}const xt={trivial:(...n)=>{Na>0||typeof console<"u"&&console.log("YORKIE T:",...n)},debug:(...n)=>{Na>1||typeof console<"u"&&console.log("YORKIE D:",...n)},info:(...n)=>{Na>2||typeof console<"u"&&console.log("YORKIE I:",...n)},warn:(...n)=>{Na>3||typeof console<"u"&&(typeof console.warn<"u"?console.warn("YORKIE W:",...n):console.log("YORKIE W:",...n))},error:(...n)=>{Na>4||typeof console<"u"&&(typeof console.error<"u"?console.error("YORKIE E:",...n):console.log("YORKIE E:",...n))},fatal:(...n)=>{typeof console<"u"&&(typeof console.error<"u"?console.error("YORKIE F:",...n):console.log("YORKIE F:",...n))},isEnabled:n=>Na<=n};function ix(){return"xxxxxxxx-xxxx-4xxxy-xxxx-xxxxxxxxxxx".replace(/[xy]/g,n=>{const t=Math.random()*16|0;return(n==="x"?t:t&3|8).toString(16)})}class PD{constructor(t,e,i,a,l){p(this,"reconnectStreamDelay");p(this,"doc");p(this,"docID");p(this,"syncMode");p(this,"remoteChangeEventReceived");p(this,"watchStream");p(this,"watchLoopTimerID");p(this,"watchAbortController");p(this,"unsubscribeBroadcastEvent");this.reconnectStreamDelay=t,this.doc=e,this.docID=i,this.syncMode=a,this.remoteChangeEventReceived=!1,this.unsubscribeBroadcastEvent=l}changeSyncMode(t){this.syncMode=t}needRealtimeSync(){return this.syncMode===$f.RealtimeSyncOff?!1:this.syncMode===$f.RealtimePushOnly?this.doc.hasLocalChanges():this.syncMode!==$f.Manual&&(this.doc.hasLocalChanges()||this.remoteChangeEventReceived)}async runWatchLoop(t){const e=async()=>{if(this.watchStream)return Promise.resolve();this.watchLoopTimerID&&(clearTimeout(this.watchLoopTimerID),this.watchLoopTimerID=void 0);try{[this.watchStream,this.watchAbortController]=await t(()=>{this.watchStream=void 0,this.watchAbortController=void 0,this.watchLoopTimerID=setTimeout(e,this.reconnectStreamDelay)})}catch{}};await e()}cancelWatchStream(){this.watchStream&&this.watchAbortController&&(this.watchAbortController.abort(),this.watchStream=void 0,this.watchAbortController=void 0),clearTimeout(this.watchLoopTimerID),this.watchLoopTimerID=void 0}}function JD(n,t){const e=[];for(const i of t){const a=HD(n,i.path),l=$D(a,i);if(!l.valid)for(const c of l.errors||[])e.push(c)}return{valid:e.length===0,errors:e}}function HD(n,t){if(!t.startsWith("$"))throw new Error(`Path must start with $, got ${t}`);const e=t.split(".");let i=n;for(let a=1;a<e.length;a++){const l=e[a];if(!(i instanceof He))return;i=i.get(l)}return i}function $D(n,t){switch(t.type){case"string":case"boolean":case"integer":case"double":case"long":case"date":case"bytes":case"null":return jD(n,t);case"object":if(!(n instanceof He))return{valid:!1,errors:[{path:t.path,message:`Expected object at path ${t.path}`}]};break;case"array":if(!(n instanceof nn))return{valid:!1,errors:[{path:t.path,message:`Expected array at path ${t.path}`}]};break;case"yorkie.Text":if(!(n instanceof pn))return{valid:!1,errors:[{path:t.path,message:`Expected yorkie.Text at path ${t.path}`}]};break;case"yorkie.Tree":if(!(n instanceof vn))return{valid:!1,errors:[{path:t.path,message:`Expected yorkie.Tree at path ${t.path}`}]};break;case"yorkie.Counter":if(!(n instanceof rn))return{valid:!1,errors:[{path:t.path,message:`Expected yorkie.Counter at path ${t.path}`}]};break;default:throw new Error(`Unknown rule type: ${t.type}`)}return{valid:!0}}function VD(n){switch(n){case"null":return ee.Null;case"boolean":return ee.Boolean;case"integer":return ee.Integer;case"long":return ee.Long;case"double":return ee.Double;case"string":return ee.String;case"bytes":return ee.Bytes;case"date":return ee.Date;default:throw new Error(`Unknown primitive type: ${n}`)}}function jD(n,t){return n instanceof oe&&n.getType()===VD(t.type)?{valid:!0}:{valid:!1,errors:[{path:t.path,message:`Expected ${t.type} at path ${t.path}`}]}}const Tm=()=>{};class YD{constructor(t){p(this,"finalized",!1);p(this,"observers",[]);p(this,"finalError");try{t(this)}catch(e){this.error(e)}}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,i){let a;if(!t)throw new G(V.ErrInvalidArgument,"missing observer");if(this.finalized)throw new G(V.ErrRefused,"observable is finalized due to previous error");typeof t=="object"?a=t:a={next:t,error:e,complete:i},a.next===void 0&&(a.next=Tm),a.error===void 0&&(a.error=Tm),a.complete===void 0&&(a.complete=Tm);const l=ix(),c=this.unsubscribeOne.bind(this,l);if(this.observers.push({subscriptionID:l,observer:a}),this.finalized)try{this.finalError?a.error(this.finalError):a.complete()}catch(d){xt.warn(d)}return c}unsubscribeOne(t){var e;this.observers=(e=this.observers)==null?void 0:e.filter(i=>i.subscriptionID!==t)}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){if(this.observers!==void 0&&this.observers[t]!==void 0)try{e(this.observers[t].observer)}catch(i){xt.error(i)}}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.observers=void 0)}}function GD(n){const t=new YD(n);return{subscribe:t.subscribe.bind(t),getProxy:()=>t}}class zo{constructor(t,e,i,a){p(this,"prevID");p(this,"nextID");p(this,"delimiter");p(this,"message");p(this,"root");p(this,"operations");p(this,"presenceChange");p(this,"previousPresence");p(this,"reversePresenceKeys");this.prevID=t,this.nextID=t.next(),this.delimiter=k1,this.root=e,this.operations=[],this.previousPresence=Yn(i),this.presenceChange=void 0,this.reversePresenceKeys=new Set,this.message=a}static create(t,e,i,a){return new zo(t,e,i,a)}push(t){this.operations.push(t)}registerElement(t,e){this.root.registerElement(t,e)}registerRemovedElement(t){this.root.registerRemovedElement(t)}registerGCPair(t){this.root.registerGCPair(t)}getNextID(){return this.isPresenceOnlyChange()?this.prevID.next(!0).setLamport(this.prevID.getLamport()).setVersionVector(this.prevID.getVersionVector()):this.nextID}toChange(){const t=this.isPresenceOnlyChange()?this.prevID.next(!0):this.nextID;return Fo.create({id:t,operations:this.operations,presenceChange:this.presenceChange,message:this.message})}isPresenceOnlyChange(){return this.operations.length===0}hasChange(){return this.operations.length>0||this.presenceChange!==void 0}setPresenceChange(t){this.presenceChange=t}setReversePresence(t,e){for(const i of Object.keys(t))e!=null&&e.addToHistory?this.reversePresenceKeys.add(i):this.reversePresenceKeys.delete(i)}getReversePresence(){if(this.reversePresenceKeys.size===0)return;const t={};for(const e of this.reversePresenceKeys)t[e]=this.previousPresence[e];return t}issueTimeTicket(){return this.delimiter+=1,this.nextID.createTimeTicket(this.delimiter)}getLastTimeTicket(){return this.nextID.createTimeTicket(this.delimiter)}acc(t){this.root.acc(t)}}class Bu{constructor(t){p(this,"rootObject");p(this,"elementPairMapByCreatedAt");p(this,"gcElementSetByCreatedAt");p(this,"gcPairMap");p(this,"docSize");this.rootObject=t,this.elementPairMapByCreatedAt=new Map,this.gcElementSetByCreatedAt=new Set,this.gcPairMap=new Map,this.docSize={live:{data:0,meta:0},gc:{data:0,meta:0}},this.registerElement(t,void 0),t.getDescendants(e=>{if(e.getRemovedAt()&&this.registerRemovedElement(e),e instanceof pn||e instanceof vn)for(const i of e.getGCPairs())this.registerGCPair(i);return!1})}static create(){return new Bu(He.create(Go))}findByCreatedAt(t){const e=this.elementPairMapByCreatedAt.get(t.toIDString());if(e)return e.element}findElementPairByCreatedAt(t){return this.elementPairMapByCreatedAt.get(t.toIDString())}createSubPaths(t){let e=this.elementPairMapByCreatedAt.get(t.toIDString());if(!e)return[];const i=[];for(;e.parent;){const a=e.element.getCreatedAt(),l=e.parent.subPathOf(a);if(l===void 0)throw new G(V.ErrInvalidArgument,`cant find the given element: ${a.toIDString()}`);i.unshift(l),e=this.elementPairMapByCreatedAt.get(e.parent.getCreatedAt().toIDString())}return i.unshift("$"),i}createPath(t){return this.createSubPaths(t).join(".")}registerElement(t,e){this.elementPairMapByCreatedAt.set(t.getCreatedAt().toIDString(),{parent:e,element:t}),_e(this.docSize.live,t.getDataSize()),t instanceof Ws&&t.getDescendants((i,a)=>(this.elementPairMapByCreatedAt.set(i.getCreatedAt().toIDString(),{parent:a,element:i}),_e(this.docSize.live,i.getDataSize()),!1))}deregisterElement(t){let e=0;const i=a=>{const l=a.getCreatedAt().toIDString();Uo(this.docSize.gc,a.getDataSize()),this.elementPairMapByCreatedAt.delete(l),this.gcElementSetByCreatedAt.delete(l),e++};return i(t),t instanceof Ws&&t.getDescendants(a=>(i(a),!1)),e}registerRemovedElement(t){_e(this.docSize.gc,t.getDataSize()),Uo(this.docSize.live,t.getDataSize()),this.docSize.live.meta+=Sr,this.gcElementSetByCreatedAt.add(t.getCreatedAt().toIDString())}registerGCPair(t){if(this.gcPairMap.get(t.child.toIDString())){this.gcPairMap.delete(t.child.toIDString());return}this.gcPairMap.set(t.child.toIDString(),t);const i=this.gcPairMap.get(t.child.toIDString()).child.getDataSize();_e(this.docSize.gc,i),Uo(this.docSize.live,i),t.child instanceof Zs||(this.docSize.live.meta+=Sr)}getElementMapSize(){return this.elementPairMapByCreatedAt.size}getGarbageElementSetSize(){const t=new Set;for(const e of this.gcElementSetByCreatedAt){t.add(e);const i=this.elementPairMapByCreatedAt.get(e);i.element instanceof Ws&&i.element.getDescendants(a=>(t.add(a.getCreatedAt().toIDString()),!1))}return t.size}getObject(){return this.rootObject}getGarbageLen(){return this.getGarbageElementSetSize()+this.gcPairMap.size}getDocSize(){return this.docSize}deepcopy(){return new Bu(this.rootObject.deepcopy())}garbageCollect(t){let e=0;for(const i of this.gcElementSetByCreatedAt){const a=this.elementPairMapByCreatedAt.get(i),l=a.element.getRemovedAt();l&&(t!=null&&t.afterOrEqual(l))&&(a.parent.purge(a.element),e+=this.deregisterElement(a.element))}for(const[,i]of this.gcPairMap){const a=i.child.getRemovedAt();a&&(t!=null&&t.afterOrEqual(a))&&(i.parent.purge(i.child),this.gcPairMap.delete(i.child.toIDString()),e+=1)}return e}toJSON(){return this.rootObject.toJSON()}toSortedJSON(){return this.rootObject.toSortedJSON()}getStats(){return{elements:this.getElementMapSize(),gcPairs:this.gcPairMap.size,gcElements:this.getGarbageElementSetSize()}}acc(t){_e(this.docSize.live,t)}}function sx(n,t){const e=new zu(n);return new Proxy(t,e.getHandlers())}class zu{constructor(t){p(this,"context");p(this,"handlers");this.context=t,this.handlers={set:(e,i,a)=>(xt.isEnabled(Qe.Trivial)&&xt.trivial(`obj[${i}]=${JSON.stringify(a)}`),zu.setInternal(t,e,i,a),!0),get:(e,i)=>(xt.isEnabled(Qe.Trivial)&&xt.trivial(`obj[${i}]`),i==="getID"?()=>e.getCreatedAt():i==="toJSON"||i==="toString"?()=>e.toJSON():i==="toJS"?()=>e.toJS():i==="toJSForTest"?()=>e.toJSForTest():Da(t,e.get(i))),ownKeys:e=>e.getKeys(),getOwnPropertyDescriptor:()=>({enumerable:!0,configurable:!0}),deleteProperty:(e,i)=>(xt.isEnabled(Qe.Trivial)&&xt.trivial(`obj[${i}]`),zu.deleteInternal(t,e,i),!0)}}static setInternal(t,e,i,a){if(i.includes("."))throw new G(V.ErrInvalidObjectKey,"key must not contain the '.'.");const l=t.issueTimeTicket(),c=wd(t,a,l),d=e.set(i,c,l);t.registerElement(c,e),d&&t.registerRemovedElement(d),t.push(_a.create(i,c.deepcopy(),e.getCreatedAt(),l))}static buildObjectMembers(t,e){const i={};for(const[a,l]of Object.entries(e)){if(a.includes("."))throw new G(V.ErrInvalidObjectKey,"key must not contain the '.'.");const c=t.issueTimeTicket(),d=wd(t,l,c);i[a]=d}return i}static deleteInternal(t,e,i){const a=t.issueTimeTicket(),l=e.deleteByKey(i,a);l&&(t.push(ra.create(e.getCreatedAt(),l.getCreatedAt(),a)),t.registerRemovedElement(l))}getHandlers(){return this.handlers}}function XD(n,t){const e=new ce(n,t);return new Proxy(t,e.getHandlers())}function KD(n){return typeof n=="string"||n instanceof String?!isNaN(n):!1}function FD(n){return["concat","entries","every","filter","find","findIndex","forEach","join","keys","map","reduce","reduceRight","slice","some","toLocaleString","toString","values"].includes(n)}class ce{constructor(t,e){p(this,"context");p(this,"handlers");p(this,"array");this.context=t,this.array=e,this.handlers={get:(i,a,l)=>a==="getID"?()=>i.getCreatedAt():a==="getElementByID"?c=>{const d=i.getByID(c);if(!(!d||d.isRemoved()))return Ys(t,d)}:a==="getElementByIndex"?c=>{const d=i.get(c);return Ys(t,d)}:a==="getLast"?()=>Ys(t,i.getLast()):a==="deleteByID"?c=>{const d=ce.deleteInternalByID(t,i,c);return Ys(t,d)}:a==="insertAfter"?(c,d)=>{const h=ce.insertAfterInternal(t,i,c,d);return Ys(t,h)}:a==="insertBefore"?(c,d)=>{const h=ce.insertBeforeInternal(t,i,c,d);return Ys(t,h)}:a==="moveBefore"?(c,d)=>{ce.moveBeforeInternal(t,i,c,d)}:a==="moveAfter"?(c,d)=>{ce.moveAfterInternal(t,i,c,d)}:a==="moveFront"?c=>{ce.moveFrontInternal(t,i,c)}:a==="moveLast"?c=>{ce.moveLastInternal(t,i,c)}:KD(a)?Da(t,i.get(Number(a))):a==="push"?c=>ce.pushInternal(t,i,c):a==="splice"?(c,d,...h)=>ce.splice(t,i,c,d,...h):a==="length"?i.length:typeof a=="symbol"&&a===Symbol.iterator?ce.iteratorInternal.bind(this,t,i):a==="includes"?(c,d)=>ce.includes(t,i,c,d):a==="indexOf"?(c,d)=>ce.indexOf(t,i,c,d):a==="lastIndexOf"?(c,d)=>ce.lastIndexOf(t,i,c,d):a==="toJSForTest"?()=>i.toJSForTest():a==="toTestString"?()=>ce.toTestString(i):typeof a=="string"&&FD(a)?(...c)=>{const d=Array.from(i).map(h=>Da(t,h));return Array.prototype[a].apply(d,c)}:Reflect.get(i,a,l),deleteProperty:(i,a)=>(xt.isEnabled(Qe.Trivial)&&xt.trivial(`array[${a}]`),ce.deleteInternalByIndex(t,i,Number.parseInt(a)),!0)}}static*iteratorInternal(t,e){for(const i of e)yield Ys(t,i)}static buildArrayElements(t,e){const i=[];for(const a of e){const l=t.issueTimeTicket(),c=wd(t,a,l);i.push(c)}return i}static pushInternal(t,e,i){return ce.insertAfterInternal(t,e,e.getLastCreatedAt(),i),e.length}static moveBeforeInternal(t,e,i,a){const l=t.issueTimeTicket(),c=e.getPrevCreatedAt(i);e.moveAfter(c,a,l),t.push(Fs.create(e.getCreatedAt(),c,a,l))}static moveAfterInternal(t,e,i,a){const l=t.issueTimeTicket();e.moveAfter(i,a,l),t.push(Fs.create(e.getCreatedAt(),i,a,l))}static moveFrontInternal(t,e,i){const a=t.issueTimeTicket(),l=e.getHead();e.moveAfter(l.getCreatedAt(),i,a),t.push(Fs.create(e.getCreatedAt(),l.getCreatedAt(),i,a))}static moveLastInternal(t,e,i){const a=t.issueTimeTicket(),l=e.getLastCreatedAt();e.moveAfter(l,i,a),t.push(Fs.create(e.getCreatedAt(),l,i,a))}static insertAfterInternal(t,e,i,a){const l=t.issueTimeTicket(),c=wd(t,a,l);return e.insertAfter(i,c),t.registerElement(c,e),t.push(Xu.create(e.getCreatedAt(),i,c.deepcopy(),l)),c}static insertBeforeInternal(t,e,i,a){return ce.insertAfterInternal(t,e,e.getPrevCreatedAt(i),a)}static deleteInternalByIndex(t,e,i){const a=t.issueTimeTicket(),l=e.deleteByIndex(i,a);if(l)return t.push(ra.create(e.getCreatedAt(),l.getCreatedAt(),a)),t.registerRemovedElement(l),l}static deleteInternalByID(t,e,i){const a=t.issueTimeTicket(),l=e.delete(i,a);return t.push(ra.create(e.getCreatedAt(),l.getCreatedAt(),a)),t.registerRemovedElement(l),l}static splice(t,e,i,a,...l){const c=e.length,d=i>=0?Math.min(i,c):Math.max(c+i,0),h=a===void 0?c:a<0?d:Math.min(d+a,c),g=[];for(let y=d;y<h;y++){const w=ce.deleteInternalByIndex(t,e,d);if(w){const v=w.deepcopy();v.setRemovedAt(),g.push(Da(t,v))}}if(l){let y=d===0?e.getHead().getID():e.get(d-1).getID();for(const w of l)y=ce.insertAfterInternal(t,e,y,w).getID()}return g}static includes(t,e,i,a){var d;const l=e.length,c=a===void 0?0:a<0?Math.max(a+l,0):a;if(c>=l)return!1;if(oe.isSupport(i))return Array.from(e).map(g=>Da(t,g)).includes(i,c);for(let h=c;h<l;h++)if(((d=e.get(h))==null?void 0:d.getID())===i.getID())return!0;return!1}static indexOf(t,e,i,a){var d;const l=e.length,c=a===void 0?0:a<0?Math.max(a+l,0):a;if(c>=l)return-1;if(oe.isSupport(i))return Array.from(e).map(g=>Da(t,g)).indexOf(i,c);for(let h=c;h<l;h++)if(((d=e.get(h))==null?void 0:d.getID())===i.getID())return h;return-1}static lastIndexOf(t,e,i,a){var d;const l=e.length,c=a===void 0||a>=l?l-1:a<0?a+l:a;if(c<0)return-1;if(oe.isSupport(i))return Array.from(e).map(g=>Da(t,g)).lastIndexOf(i,c);for(let h=c;h>0;h--)if(((d=e.get(h))==null?void 0:d.getID())===i.getID())return h;return-1}static toTestString(t){return t.toTestString()}getHandlers(){return this.handlers}}class Ky{constructor(t,e){p(this,"context");p(this,"text");this.context=t,this.text=e}initialize(t,e){this.context=t,this.text=e}getID(){return this.text.getID()}edit(t,e,i,a){if(!this.context||!this.text)throw new G(V.ErrNotInitialized,"Text is not initialized yet");if(t>e)throw new G(V.ErrInvalidArgument,"from should be less than or equal to to");const l=this.text.indexRangeToPosRange(t,e);xt.isEnabled(Qe.Debug)&&xt.debug(`EDIT: f:${t}->${l[0].toTestString()}, t:${e}->${l[1].toTestString()} c:${i}`);const c=a?Ko(a):void 0,d=this.context.issueTimeTicket(),[,h,g,y]=this.text.edit(l,i,d,c);this.context.acc(g);for(const w of h)this.context.registerGCPair(w);return this.context.push(new Ku(this.text.getCreatedAt(),l[0],l[1],i,c?new Map(Object.entries(c)):new Map,d)),this.text.findIndexesFromRange(y)}delete(t,e){return this.edit(t,e,"")}empty(){return this.edit(0,this.length,"")}setStyle(t,e,i){if(!this.context||!this.text)throw new G(V.ErrNotInitialized,"Text is not initialized yet");if(t>e)throw new G(V.ErrInvalidArgument,"from should be less than or equal to to");const a=this.text.indexRangeToPosRange(t,e);xt.isEnabled(Qe.Debug)&&xt.debug(`STYL: f:${t}->${a[0].toTestString()}, t:${e}->${a[1].toTestString()} a:${JSON.stringify(i)}`);const l=Ko(i),c=this.context.issueTimeTicket(),[d,h]=this.text.setStyle(a,l,c);this.context.acc(h);for(const g of d)this.context.registerGCPair(g);return this.context.push(new Fu(this.text.getCreatedAt(),a[0],a[1],new Map(Object.entries(l)),c)),!0}indexRangeToPosRange(t){if(!this.context||!this.text)throw new G(V.ErrNotInitialized,"Text is not initialized yet");const e=this.text.indexRangeToPosRange(t[0],t[1]);return[e[0].toStruct(),e[1].toStruct()]}posRangeToIndexRange(t){if(!this.context||!this.text)throw new G(V.ErrNotInitialized,"Text is not initialized yet");const e=this.text.findIndexesFromRange([Wn.fromStruct(t[0]),Wn.fromStruct(t[1])]);return[e[0],e[1]]}toTestString(){if(!this.context||!this.text)throw new G(V.ErrNotInitialized,"Text is not initialized yet");return this.text.toTestString()}values(){if(!this.context||!this.text)throw new G(V.ErrNotInitialized,"Text is not initialized yet");return this.text.values()}get length(){return this.text.length}getTreeByIndex(){return this.text.getTreeByIndex()}getTreeByID(){return this.text.getTreeByID()}toString(){if(!this.context||!this.text)throw new G(V.ErrNotInitialized,"Text is not initialized yet");return this.text.toString()}toJSON(){if(!this.context||!this.text)throw new G(V.ErrNotInitialized,"Text is not initialized yet");return this.text.toJSON()}toJSForTest(){if(!this.context||!this.text)throw new G(V.ErrNotInitialized,"Text is not initialized yet");return this.text.toJSForTest()}createRangeForTest(t,e){if(!this.context||!this.text)throw new G(V.ErrNotInitialized,"Text is not initialized yet");return this.text.indexRangeToPosRange(t,e)}}class Fy{constructor(t,e){p(this,"valueType");p(this,"value");p(this,"context");p(this,"counter");this.valueType=t,this.value=e}initialize(t,e){this.valueType=e.getValueType(),this.context=t,this.counter=e,this.value=e.getValue()}getID(){return this.counter.getID()}getValue(){return this.value}getValueType(){return this.valueType}increase(t){if(!this.context||!this.counter)throw new G(V.ErrNotInitialized,"Counter is not initialized yet");const e=this.context.issueTimeTicket(),i=oe.of(t,e);if(!i.isNumericType())throw new TypeError(`Unsupported type of value: ${typeof i.getValue()}`);return this.counter.increase(i),this.context.push(Qo.create(this.counter.getCreatedAt(),i,e)),this}toJSForTest(){if(!this.context||!this.counter)throw new G(V.ErrNotInitialized,"Counter is not initialized yet");return this.counter.toJSForTest()}}function Zy(n){if(n.isText)return{type:n.type,value:n.value};const t={type:n.type,children:n.children.map(e=>Zy(e))};return n.attrs&&(t.attributes=is(n.attrs.toObject())),t}function ZD(n,t){const e={type:n.isText?n.parent.type:n.type,children:n.isText?n.parent.getChildrenText().length===t?[]:[{type:br,value:n.parent.getChildrenText().slice(t)}]:n.children.slice(t).map(i=>Zy(i))};return n.attrs?e.attributes=is(n.attrs.toObject()):n.isText&&n.parent.attrs&&(e.attributes=is(n.parent.attrs.toObject())),e}function QD(n,t){const{node:e}=n,i=[...t].slice(0,-1),a=e.isText?e.parent.getChildrenText().length:e.children.length,l=[...i,a],c=[...i],d=[];c[c.length-1]+=1,t.every((g,y)=>g===l[y])||d.push({fromPath:[...t],toPath:l});const h=ZD(e,t[t.length-1]);return h&&d.push({fromPath:c,toPath:c,content:h}),d}function WD(n,t){const{node:e,offset:i}=n,a=e.children[i],l=e.children[i-1],{children:c}=a,d=[...t].slice(0,-1),h=[{fromPath:[...t],toPath:[...d,i+1]}];if(!a.children.length)return h;const g=[...d,i-1,l.hasTextChild()?l.getChildrenText().length:l.children.length],y=c.map(w=>Zy(w));return h.push({fromPath:g,toPath:g,content:y}),h}function Qy(n,t,e){const{type:i}=n,a=e.issueTimeTicket();if(i===br){ax(n);const{value:l}=n,c=yn.create(Ue.of(a,0),i,l);t.append(c)}else{const{children:l=[]}=n,{attributes:c}=n;let d;if(typeof c=="object"&&!z1(c)){const g=Ko(c);d=new ls;for(const[y,w]of Object.entries(g))d.set(y,w,a)}const h=yn.create(Ue.of(a,0),i,void 0,d);t.append(h);for(const g of l)Qy(g,h,e)}}function tC(n,t){const{type:e}=t,i=n.issueTimeTicket();let a;if(t.type===br){const{value:l}=t;a=yn.create(Ue.of(i,0),e,l)}else if(t){const{children:l=[]}=t,{attributes:c}=t;let d;if(typeof c=="object"&&!z1(c)){const h=Ko(c);d=new ls;for(const[g,y]of Object.entries(h))d.set(g,y,i)}a=yn.create(Ue.of(n.issueTimeTicket(),0),e,void 0,d);for(const h of l)Qy(h,a,n)}return a}function ax(n){if(!n.value.length)throw new G(V.ErrInvalidArgument,"text node cannot have empty value");return!0}function HS(n){if(!n.length)return!0;if(n[0].type===br)for(const e of n){const{type:i}=e;if(i!==br)throw new G(V.ErrInvalidArgument,"element node and text node cannot be passed together");ax(e)}else for(const e of n){const{type:i}=e;if(i===br)throw new G(V.ErrInvalidArgument,"element node and text node cannot be passed together")}return!0}class Wy{constructor(t){p(this,"initialRoot");p(this,"context");p(this,"tree");this.initialRoot=t}initialize(t,e){this.context=t,this.tree=e}getID(){return this.tree.getID()}buildRoot(t){if(!this.initialRoot)return yn.create(Ue.of(t.issueTimeTicket(),0),$2);const e=yn.create(Ue.of(t.issueTimeTicket(),0),this.initialRoot.type);for(const i of this.initialRoot.children)Qy(i,e,t);return e}getSize(){if(!this.context||!this.tree)throw new G(V.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getSize()}getNodeSize(){if(!this.context||!this.tree)throw new G(V.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getNodeSize()}getIndexTree(){if(!this.context||!this.tree)throw new G(V.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getIndexTree()}splitByPath(t){if(!this.context||!this.tree)throw new G(V.ErrNotInitialized,"Tree is not initialized yet");if(!t.length)throw new G(V.ErrInvalidArgument,"path should not be empty");const e=this.tree.pathToTreePos(t),i=QD(e,t);for(const a of i){const{fromPath:l,toPath:c,content:d}=a,h=this.tree.pathToPos(l),g=this.tree.pathToPos(c);this.editInternal(h,g,d?[d]:[],0)}}mergeByPath(t){if(!this.context||!this.tree)throw new G(V.ErrNotInitialized,"Tree is not initialized yet");if(!t.length)throw new G(V.ErrInvalidArgument,"path should not be empty");const e=this.tree.pathToTreePos(t);if(e.node.isText)throw new G(V.ErrInvalidArgument,"text node cannot be merged");const i=WD(e,t);for(const a of i){const{fromPath:l,toPath:c,content:d}=a,h=this.tree.pathToPos(l),g=this.tree.pathToPos(c);this.editInternal(h,g,d??[],0)}}styleByPath(t,e){if(!this.context||!this.tree)throw new G(V.ErrNotInitialized,"Tree is not initialized yet");if(!t.length)throw new G(V.ErrInvalidArgument,"path should not be empty");const[i,a]=this.tree.pathToPosRange(t),l=this.context.issueTimeTicket(),c=e?Ko(e):void 0,[d,,h]=this.tree.style([i,a],c,l);this.context.acc(h);for(const g of d)this.context.registerGCPair(g);this.context.push(ss.create(this.tree.getCreatedAt(),i,a,c?new Map(Object.entries(c)):new Map,l))}style(t,e,i){if(!this.context||!this.tree)throw new G(V.ErrNotInitialized,"Tree is not initialized yet");if(t>e)throw new G(V.ErrInvalidArgument,"from should be less than or equal to to");const a=this.tree.findPos(t),l=this.tree.findPos(e),c=this.context.issueTimeTicket(),d=i?Ko(i):void 0,[h,,g]=this.tree.style([a,l],d,c);this.context.acc(g);for(const y of h)this.context.registerGCPair(y);this.context.push(ss.create(this.tree.getCreatedAt(),a,l,d?new Map(Object.entries(d)):new Map,c))}removeStyle(t,e,i){if(!this.context||!this.tree)throw new G(V.ErrNotInitialized,"Tree is not initialized yet");if(t>e)throw new G(V.ErrInvalidArgument,"from should be less than or equal to to");const a=this.tree.findPos(t),l=this.tree.findPos(e),c=this.context.issueTimeTicket(),[d,,h]=this.tree.removeStyle([a,l],i,c);this.context.acc(h);for(const g of d)this.context.registerGCPair(g);this.context.push(ss.createTreeRemoveStyleOperation(this.tree.getCreatedAt(),a,l,i,c))}editInternal(t,e,i,a=0){var g;if(i.length!==0&&i[0]&&(HS(i),i[0].type!==br))for(const y of i){const{children:w=[]}=y;HS(w)}const l=this.context.getLastTimeTicket();let c=new Array;if(((g=i[0])==null?void 0:g.type)===br){let y="";for(const w of i){const{value:v}=w;y+=v}c.push(yn.create(Ue.of(this.context.issueTimeTicket(),0),br,y))}else c=i.map(y=>y&&tC(this.context,y)).filter(y=>y);const[,d,h]=this.tree.edit([t,e],c.length?c.map(y=>y==null?void 0:y.deepcopy()):void 0,a,l,()=>this.context.issueTimeTicket());this.context.acc(h);for(const y of d)this.context.registerGCPair(y);return this.context.push(Zu.create(this.tree.getCreatedAt(),t,e,c.length?c:void 0,a,l)),!0}editByPath(t,e,i,a=0){if(!this.context||!this.tree)throw new G(V.ErrNotInitialized,"Tree is not initialized yet");if(t.length!==e.length)throw new G(V.ErrInvalidArgument,"path length should be equal");if(!t.length||!e.length)throw new G(V.ErrInvalidArgument,"path should not be empty");const l=this.tree.pathToPos(t),c=this.tree.pathToPos(e);return this.editInternal(l,c,i?[i]:[],a)}editBulkByPath(t,e,i,a=0){if(!this.context||!this.tree)throw new G(V.ErrNotInitialized,"Tree is not initialized yet");if(t.length!==e.length)throw new G(V.ErrInvalidArgument,"path length should be equal");if(!t.length||!e.length)throw new G(V.ErrInvalidArgument,"path should not be empty");const l=this.tree.pathToPos(t),c=this.tree.pathToPos(e);return this.editInternal(l,c,i,a)}edit(t,e,i,a=0){if(!this.context||!this.tree)throw new G(V.ErrNotInitialized,"Tree is not initialized yet");if(t>e)throw new G(V.ErrInvalidArgument,"from should be less than or equal to to");const l=this.tree.findPos(t),c=this.tree.findPos(e);return this.editInternal(l,c,i?[i]:[],a)}editBulk(t,e,i,a=0){if(!this.context||!this.tree)throw new G(V.ErrNotInitialized,"Tree is not initialized yet");if(t>e)throw new G(V.ErrInvalidArgument,"from should be less than or equal to to");const l=this.tree.findPos(t),c=this.tree.findPos(e);return this.editInternal(l,c,i,a)}toXML(){if(!this.context||!this.tree)throw new G(V.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toXML()}toJSON(){if(!this.context||!this.tree)throw new G(V.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toJSON()}toJSForTest(){if(!this.context||!this.tree)throw new G(V.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toJSForTest()}toJSInfoForTest(){if(!this.context||!this.tree)throw new G(V.ErrNotInitialized,"Tree is not initialized yet");return this.tree.toJSInfoForTest()}getRootTreeNode(){if(!this.context||!this.tree)throw new G(V.ErrNotInitialized,"Tree is not initialized yet");return this.tree.getRootTreeNode()}indexToPath(t){if(!this.context||!this.tree)throw new G(V.ErrNotInitialized,"Tree is not initialized yet");return this.tree.indexToPath(t)}pathToIndex(t){if(!this.context||!this.tree)throw new G(V.ErrNotInitialized,"Tree is not initialized yet");return this.tree.pathToIndex(t)}pathRangeToPosRange(t){if(!this.context||!this.tree)throw new G(V.ErrNotInitialized,"Tree is not initialized yet");const e=[this.tree.pathToIndex(t[0]),this.tree.pathToIndex(t[1])],i=this.tree.indexRangeToPosRange(e);return[i[0].toStruct(),i[1].toStruct()]}indexRangeToPosRange(t){if(!this.context||!this.tree)throw new G(V.ErrNotInitialized,"Tree is not initialized yet");return this.tree.indexRangeToPosStructRange(t)}posRangeToIndexRange(t){if(!this.context||!this.tree)throw new G(V.ErrNotInitialized,"Tree is not initialized yet");const e=[Zn.fromStruct(t[0]),Zn.fromStruct(t[1])];return this.tree.posRangeToIndexRange(e)}posRangeToPathRange(t){if(!this.context||!this.tree)throw new G(V.ErrNotInitialized,"Tree is not initialized yet");const e=[Zn.fromStruct(t[0]),Zn.fromStruct(t[1])];return this.tree.posRangeToPathRange(e)}}function $S(n,t){return sx(n,t)}function Ys(n,t){if(t){if(t instanceof oe)return t;if(t instanceof He)return sx(n,t);if(t instanceof nn)return XD(n,t);if(t instanceof pn)return new Ky(n,t);if(t instanceof rn){const e=new Fy(Er.Int,0);return e.initialize(n,t),e}else if(t instanceof vn){const e=new Wy;return e.initialize(n,t),e}}else return;throw new TypeError(`Unsupported type of element: ${typeof t}`)}function Da(n,t){const e=Ys(n,t);return e instanceof oe?e.getValue():e}function wd(n,t,e){let i;if(oe.isSupport(t))i=oe.of(t,e);else if(Array.isArray(t))i=nn.create(e,ce.buildArrayElements(n,t));else if(typeof t=="object")t instanceof Ky?(i=pn.create(Zo.create(),e),t.initialize(n,i)):t instanceof Fy?(i=rn.create(t.getValueType(),t.getValue(),e),t.initialize(n,i)):t instanceof Wy?(i=vn.create(t.buildRoot(n),e),t.initialize(n,i)):i=He.create(e,zu.buildObjectMembers(n,t));else throw new TypeError(`Unsupported type of value: ${typeof t}`);return i}class Am{constructor(t,e){p(this,"context");p(this,"presence");this.context=t,this.presence=e}set(t,e){for(const i of Object.keys(t))this.presence[i]=t[i];this.context.setPresenceChange({type:Ar.Put,presence:Yn(this.presence)}),this.context.setReversePresence(t,e)}get(t){return this.presence[t]}clear(){this.presence={},this.context.setPresenceChange({type:Ar.Clear})}}const VS=50;class eC{constructor(){p(this,"undoStack",[]);p(this,"redoStack",[])}hasUndo(){return this.undoStack.length>0}hasRedo(){return this.redoStack.length>0}pushUndo(t){this.undoStack.length>=VS&&this.undoStack.shift(),this.undoStack.push(t)}popUndo(){return this.undoStack.pop()}pushRedo(t){this.redoStack.length>=VS&&this.redoStack.shift(),this.redoStack.push(t)}popRedo(){return this.redoStack.pop()}clearRedo(){this.redoStack=[]}getUndoStackForTest(){return this.undoStack}getRedoStackForTest(){return this.redoStack}}const nC="yorkie-devtools-panel",rC="yorkie-devtools-sdk";function iC(n){return[ze.StatusChanged,ze.Snapshot,ze.LocalChange,ze.RemoteChange,ze.Initialized,ze.Watched,ze.Unwatched,ze.PresenceChanged].includes(n.type)}function sC(n){return n.every(iC)}let Mo="disconnected";const jS=new Map,Hf=new Map;typeof window<"u"&&(window.docEventsForReplayByDocKey=Hf);function Df(n,t){(t!=null&&t.force||Mo!=="disconnected")&&window.postMessage({source:rC,...n},"*")}function aC(n){if(!n.isEnableDevtools()||typeof window>"u"||jS.has(n.getKey()))return;Hf.set(n.getKey(),[]);const t=n.subscribe("all",e=>{sC(e)&&(Hf.get(n.getKey()).push(e),Mo==="synced"&&Df({msg:"doc::sync::partial",docKey:n.getKey(),event:e}))});jS.set(n.getKey(),[t]),Df({msg:"refresh-devtools"},{force:!0}),window.addEventListener("message",e=>{var a;if(((a=e.data)==null?void 0:a.source)!==nC)return;switch(e.data.msg){case"devtools::connect":if(Mo!=="disconnected")break;Mo="connected",Df({msg:"doc::available",docKey:n.getKey()}),xt.info(`[YD] Devtools connected. Doc: ${n.getKey()}`);break;case"devtools::disconnect":Mo="disconnected",xt.info(`[YD] Devtools disconnected. Doc: ${n.getKey()}`);break;case"devtools::subscribe":Mo="synced",Df({msg:"doc::sync::full",docKey:n.getKey(),events:Hf.get(n.getKey())}),xt.info(`[YD] Devtools subscribed. Doc: ${n.getKey()}`);break}})}var Gs=(n=>(n.Detached="detached",n.Attached="attached",n.Removed="removed",n))(Gs||{}),ze=(n=>(n.StatusChanged="status-changed",n.ConnectionChanged="connection-changed",n.SyncStatusChanged="sync-status-changed",n.Snapshot="snapshot",n.LocalChange="local-change",n.RemoteChange="remote-change",n.Initialized="initialized",n.Watched="watched",n.Unwatched="unwatched",n.PresenceChanged="presence-changed",n.Broadcast="broadcast",n.LocalBroadcast="local-broadcast",n.AuthError="auth-error",n))(ze||{}),Sd=(n=>(n.Connected="connected",n.Disconnected="disconnected",n))(Sd||{}),yy=(n=>(n.Synced="synced",n.SyncFailed="sync-failed",n))(yy||{});class ox{constructor(t,e){p(this,"key");p(this,"status");p(this,"opts");p(this,"changeID");p(this,"checkpoint");p(this,"localChanges");p(this,"maxSizeLimit");p(this,"schemaRules");p(this,"root");p(this,"clone");p(this,"eventStream");p(this,"eventStreamObserver");p(this,"onlineClients");p(this,"presences");p(this,"history");p(this,"internalHistory");p(this,"isUpdating");this.opts=e||{},this.key=t,this.status="detached",this.root=Bu.create(),this.changeID=Z2,this.checkpoint=Q2,this.localChanges=[],this.maxSizeLimit=0,this.schemaRules=[],this.eventStream=GD(i=>{this.eventStreamObserver=i}),this.onlineClients=new Set,this.presences=new Map,this.isUpdating=!1,this.internalHistory=new eC,this.history={canUndo:this.canUndo.bind(this),canRedo:this.canRedo.bind(this),undo:this.undo.bind(this),redo:this.redo.bind(this)},aC(this)}update(t,e){var d,h,g;if(this.getStatus()==="removed")throw new G(V.ErrDocumentRemoved,`${this.key} is removed`);this.ensureClone();const i=this.changeID.getActorID(),a=zo.create(this.changeID,this.clone.root,this.clone.presences.get(i)||{},e);try{const y=$S(a,this.clone.root.getObject());this.presences.has(i)||this.clone.presences.set(i,{}),this.isUpdating=!0,t(y,new Am(a,this.clone.presences.get(i)))}catch(y){throw this.clone=void 0,y}finally{this.isUpdating=!1}const l=this.getSchemaRules();if(!a.isPresenceOnlyChange()&&l.length>0){const y=JD((d=this.clone)==null?void 0:d.root.getObject(),l);if(!y.valid)throw this.clone=void 0,new G(V.ErrDocumentSchemaValidationFailed,`schema validation failed: ${(h=y.errors)==null?void 0:h.map(w=>w.message).join(", ")}`)}const c=J2((g=this.clone)==null?void 0:g.root.getDocSize());if(!a.isPresenceOnlyChange()&&this.maxSizeLimit>0&&this.maxSizeLimit<c)throw this.clone=void 0,new G(V.ErrDocumentSizeExceedsLimit,`document size exceeded: ${c} > ${this.maxSizeLimit}`);if(a.hasChange()){xt.isEnabled(Qe.Trivial)&&xt.trivial(`trying to update a local change: ${this.toJSON()}`);const y=a.toChange(),{opInfos:w,reverseOps:v}=y.execute(this.root,this.presences,te.Local),S=a.getReversePresence();S&&v.push({type:"presence",value:S}),this.localChanges.push(y),v.length>0&&this.internalHistory.pushUndo(v),w.length>0&&this.internalHistory.clearRedo(),this.changeID=a.getNextID();const x=[];w.length>0&&x.push({type:"local-change",source:te.Local,value:{message:y.getMessage()||"",operations:w,actor:i,clientSeq:y.getID().getClientSeq(),serverSeq:y.getID().getServerSeq()},rawChange:this.isEnableDevtools()?y.toStruct():void 0}),y.hasPresenceChange()&&x.push({type:"presence-changed",source:te.Local,value:{clientID:i,presence:this.getPresence(i)}}),this.publish(x),xt.isEnabled(Qe.Trivial)&&xt.trivial(`after update a local change: ${this.toJSON()}`)}}subscribe(t,e,i,a){if(typeof t=="string"){if(typeof e!="function")throw new G(V.ErrInvalidArgument,"Second argument must be a callback function");if(t==="presence"){const d=e;return this.eventStream.subscribe(h=>{for(const g of h)g.type!=="initialized"&&g.type!=="watched"&&g.type!=="unwatched"&&g.type!=="presence-changed"||d(g)},i,a)}if(t==="my-presence"){const d=e;return this.eventStream.subscribe(h=>{for(const g of h)g.type!=="initialized"&&g.type!=="presence-changed"||g.type==="presence-changed"&&g.value.clientID!==this.changeID.getActorID()||d(g)},i,a)}if(t==="others"){const d=e;return this.eventStream.subscribe(h=>{for(const g of h)g.type!=="watched"&&g.type!=="unwatched"&&g.type!=="presence-changed"||g.value.clientID!==this.changeID.getActorID()&&d(g)},i,a)}if(t==="connection"){const d=e;return this.eventStream.subscribe(h=>{for(const g of h)g.type==="connection-changed"&&d(g)},i,a)}if(t==="status"){const d=e;return this.eventStream.subscribe(h=>{for(const g of h)g.type==="status-changed"&&d(g)},i,a)}if(t==="sync"){const d=e;return this.eventStream.subscribe(h=>{for(const g of h)g.type==="sync-status-changed"&&d(g)},i,a)}if(t==="local-broadcast"){const d=e;return this.eventStream.subscribe(h=>{for(const g of h)g.type==="local-broadcast"&&d(g)},i)}if(t==="broadcast"){const d=e;return this.eventStream.subscribe(h=>{for(const g of h)g.type==="broadcast"&&d(g)},i)}if(t==="auth-error"){const d=e;return this.eventStream.subscribe(h=>{for(const g of h)g.type==="auth-error"&&d(g)},i)}if(t==="all"){const d=e;return this.eventStream.subscribe(d,i,a)}const l=t,c=e;return this.eventStream.subscribe(d=>{for(const h of d){if(h.type!=="local-change"&&h.type!=="remote-change")continue;const g=[];for(const y of h.value.operations)this.isSameElementOrChildOf(y.path,l)&&g.push(y);g.length&&c({...h,value:{...h.value,operations:g}})}},i,a)}if(typeof t=="function"){const l=t,c=e,d=i;return this.eventStream.subscribe(h=>{for(const g of h)g.type!=="snapshot"&&g.type!=="local-change"&&g.type!=="remote-change"||l(g)},c,d)}throw new G(V.ErrInvalidArgument,`"${t}" is not a valid`)}publish(t){this.eventStreamObserver&&this.eventStreamObserver.next(t)}isSameElementOrChildOf(t,e){if(e===t)return!0;const i=t.split(".");return e.split(".").every((l,c)=>l===i[c])}removePushedLocalChanges(t){for(;this.localChanges.length&&!(this.localChanges[0].getID().getClientSeq()>t);)this.localChanges.shift()}applyChangePack(t){const e=t.hasSnapshot();e?this.applySnapshot(t.getCheckpoint().getServerSeq(),t.getVersionVector(),t.getSnapshot(),t.getCheckpoint().getClientSeq()):(this.applyChanges(t.getChanges(),te.Remote),this.removePushedLocalChanges(t.getCheckpoint().getClientSeq())),this.checkpoint=this.checkpoint.forward(t.getCheckpoint()),e||this.garbageCollect(t.getVersionVector()),t.getIsRemoved()&&this.applyStatus("removed"),xt.isEnabled(Qe.Trivial)&&xt.trivial(`${this.root.toJSON()}`)}getCheckpoint(){return this.checkpoint}getChangeID(){return this.changeID}hasLocalChanges(){return this.localChanges.length>0}ensureClone(){this.clone||(this.clone={root:this.root.deepcopy(),presences:Yn(this.presences)})}createChangePack(){const t=Array.from(this.localChanges),e=this.checkpoint.increaseClientSeq(t.length);return Ud.create(this.key,e,!1,t,this.getVersionVector())}setActor(t){for(const e of this.localChanges)e.setActor(t);this.changeID=this.changeID.setActor(t)}isEnableDevtools(){return!!this.opts.enableDevtools}getKey(){return this.key}getStatus(){return this.status}getClone(){return this.clone}getCloneRoot(){if(this.clone)return this.clone.root.getObject()}getRoot(){this.ensureClone();const t=zo.create(this.changeID.next(),this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});return $S(t,this.clone.root.getObject())}getDocSize(){return this.root.getDocSize()}getMaxSizePerDocument(){return this.maxSizeLimit}setMaxSizePerDocument(t){this.maxSizeLimit=t}getSchemaRules(){return this.schemaRules}setSchemaRules(t){this.schemaRules=t}garbageCollect(t){return this.opts.disableGC?0:(this.clone&&this.clone.root.garbageCollect(t),this.root.garbageCollect(t))}getRootObject(){return this.root.getObject()}getGarbageLen(){return this.root.getGarbageLen()}getGarbageLenFromClone(){return this.clone.root.getGarbageLen()}toJSON(){return this.root.toJSON()}toSortedJSON(){return this.root.toSortedJSON()}getStats(){return this.root.getStats()}toJSForTest(){return{...this.getRoot().toJSForTest(),key:"root"}}applySnapshot(t,e,i,a=-1){const{root:l,presences:c}=fe.bytesToSnapshot(i);this.root=new Bu(l),this.presences=c,this.changeID=this.changeID.setClocks(e.maxLamport(),e),this.clone=void 0,this.removePushedLocalChanges(a),this.applyChanges(this.localChanges,te.Local),this.publish([{type:"snapshot",source:te.Remote,value:{serverSeq:t.toString(),snapshot:this.isEnableDevtools()?fe.bytesToHex(i):void 0,snapshotVector:fe.versionVectorToHex(e)}}])}applyChanges(t,e){xt.isEnabled(Qe.Debug)&&xt.debug(`trying to apply ${t.length} remote changes.elements:${this.root.getElementMapSize()}, removeds:${this.root.getGarbageElementSetSize()}`),xt.isEnabled(Qe.Trivial)&&xt.trivial(t.map(i=>`${i.getID().toTestString()}	${i.toTestString()}`).join(`
`));for(const i of t)this.applyChange(i,e);xt.isEnabled(Qe.Debug)&&xt.debug(`after appling ${t.length} remote changes.elements:${this.root.getElementMapSize()},  removeds:${this.root.getGarbageElementSetSize()}`)}applyChange(t,e){this.ensureClone(),t.execute(this.clone.root,this.clone.presences,e);const i=[],a=t.getID().getActorID();if(t.hasPresenceChange()&&this.onlineClients.has(a)){const c=t.getPresenceChange();switch(c.type){case Ar.Put:i.push(this.presences.has(a)?{type:"presence-changed",source:e,value:{clientID:a,presence:c.presence}}:{type:"watched",source:te.Remote,value:{clientID:a,presence:c.presence}});break;case Ar.Clear:i.push({type:"unwatched",source:te.Remote,value:{clientID:a,presence:this.getPresence(a)}}),this.removeOnlineClient(a);break}}const{opInfos:l}=t.execute(this.root,this.presences,e);if(this.changeID=this.changeID.syncClocks(t.getID()),l.length>0){const c=this.isEnableDevtools()?t.toStruct():void 0;i.push(e===te.Remote?{type:"remote-change",source:e,value:{actor:a,clientSeq:t.getID().getClientSeq(),serverSeq:t.getID().getServerSeq(),message:t.getMessage()||"",operations:l},rawChange:c}:{type:"local-change",source:e,value:{actor:a,clientSeq:t.getID().getClientSeq(),serverSeq:t.getID().getServerSeq(),message:t.getMessage()||"",operations:l},rawChange:c})}i.length>0&&this.publish(i)}applyWatchStream(t){if(t.body.case==="initialization"){const e=t.body.value.clientIds,i=new Set;for(const a of e)a!==this.changeID.getActorID()&&i.add(a);this.setOnlineClients(i),this.publish([{type:"initialized",source:te.Local,value:this.getPresences()}]);return}if(t.body.case==="event"){const{type:e,publisher:i}=t.body.value,a=[];if(e===Ra.DOCUMENT_WATCHED){if(this.onlineClients.has(i)&&this.hasPresence(i))return;this.addOnlineClient(i),this.hasPresence(i)&&a.push({type:"watched",source:te.Remote,value:{clientID:i,presence:this.getPresence(i)}})}else if(e===Ra.DOCUMENT_UNWATCHED){const l=this.getPresence(i);this.removeOnlineClient(i),l&&a.push({type:"unwatched",source:te.Remote,value:{clientID:i,presence:l}})}else if(e===Ra.DOCUMENT_BROADCAST&&t.body.value.body){const{topic:l,payload:c}=t.body.value.body,d=new TextDecoder;a.push({type:"broadcast",value:{clientID:i,topic:l,payload:JSON.parse(d.decode(c))}})}a.length>0&&this.publish(a)}}applyStatus(t){this.status=t,t==="detached"&&this.setActor(Ld),this.publish([{source:t==="removed"?te.Remote:te.Local,type:"status-changed",value:t==="attached"?{status:t,actorID:this.changeID.getActorID()}:{status:t}}])}applyDocEventForReplay(t){if(t.type==="status-changed"){this.applyStatus(t.value.status),t.value.status==="attached"&&this.setActor(t.value.actorID);return}if(t.type==="snapshot"){const{snapshot:e,serverSeq:i,snapshotVector:a}=t.value;if(!e)return;this.applySnapshot(BigInt(i),fe.hexToVersionVector(a),fe.hexToBytes(e));return}if(t.type==="local-change"||t.type==="remote-change"){if(!t.rawChange)return;const e=Fo.fromStruct(t.rawChange);this.applyChange(e,t.source)}if(t.type==="initialized"){const e=new Set;for(const{clientID:i,presence:a}of t.value)e.add(i),this.presences.set(i,a);this.setOnlineClients(e);return}if(t.type==="watched"){const{clientID:e,presence:i}=t.value;this.addOnlineClient(e),this.presences.set(e,i);return}if(t.type==="unwatched"){const{clientID:e}=t.value;this.removeOnlineClient(e),this.presences.delete(e)}if(t.type==="presence-changed"){const{clientID:e,presence:i}=t.value;this.presences.set(e,i)}}applyDocEventsForReplay(t){for(const e of t)this.applyDocEventForReplay(e)}getValueByPath(t){if(!t.startsWith("$"))throw new G(V.ErrInvalidArgument,'path must start with "$"');const e=t.split(".");e.shift();let i=this.getRoot();for(const a of e)if(i=i[a],i===void 0)return;return i}setOnlineClients(t){this.onlineClients=t}resetOnlineClients(){this.onlineClients=new Set}addOnlineClient(t){this.onlineClients.add(t)}removeOnlineClient(t){this.onlineClients.delete(t)}hasPresence(t){return this.presences.has(t)}getMyPresence(){if(this.status!=="attached")return{};const t=this.presences.get(this.changeID.getActorID());return t?Yn(t):{}}getPresence(t){if(t===this.changeID.getActorID())return this.getMyPresence();if(!this.onlineClients.has(t))return;const e=this.presences.get(t);return e?Yn(e):void 0}getPresenceForTest(t){const e=this.presences.get(t);return e?Yn(e):void 0}getPresences(){const t=[];t.push({clientID:this.changeID.getActorID(),presence:Yn(this.getMyPresence())});for(const e of this.onlineClients)this.presences.has(e)&&t.push({clientID:e,presence:Yn(this.presences.get(e))});return t}getSelfForTest(){return{clientID:this.getChangeID().getActorID(),presence:this.getMyPresence()}}getOthersForTest(){const t=this.getChangeID().getActorID();return this.getPresences().filter(e=>e.clientID!==t).sort((e,i)=>e.clientID>i.clientID?1:-1)}canUndo(){return this.internalHistory.hasUndo()&&!this.isUpdating}canRedo(){return this.internalHistory.hasRedo()&&!this.isUpdating}undo(){if(this.isUpdating)throw new G(V.ErrRefused,"Undo is not allowed during an update");const t=this.internalHistory.popUndo();if(t===void 0)throw new G(V.ErrRefused,"There is no operation to be undone");this.ensureClone();const e=zo.create(this.changeID,this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});for(const g of t){if(!(g instanceof tr)){new Am(e,Yn(this.clone.presences.get(this.changeID.getActorID()))).set(g.value,{addToHistory:!0});continue}const y=e.issueTimeTicket();g.setExecutedAt(y),e.push(g)}const i=e.toChange();i.execute(this.clone.root,this.clone.presences,te.UndoRedo);const{opInfos:a,reverseOps:l}=i.execute(this.root,this.presences,te.UndoRedo),c=e.getReversePresence();if(c&&l.push({type:"presence",value:c}),l.length>0&&this.internalHistory.pushRedo(l),!i.hasPresenceChange()&&a.length===0)return;this.localChanges.push(i),this.changeID=e.getNextID();const d=this.changeID.getActorID(),h=[];a.length>0&&h.push({type:"local-change",source:te.UndoRedo,value:{message:i.getMessage()||"",operations:a,actor:d,clientSeq:i.getID().getClientSeq(),serverSeq:i.getID().getServerSeq()},rawChange:this.isEnableDevtools()?i.toStruct():void 0}),i.hasPresenceChange()&&h.push({type:"presence-changed",source:te.UndoRedo,value:{clientID:d,presence:this.getPresence(d)}}),this.publish(h)}redo(){if(this.isUpdating)throw new G(V.ErrRefused,"Redo is not allowed during an update");const t=this.internalHistory.popRedo();if(t===void 0)throw new G(V.ErrRefused,"There is no operation to be redone");this.ensureClone();const e=zo.create(this.changeID,this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});for(const g of t){if(!(g instanceof tr)){new Am(e,Yn(this.clone.presences.get(this.changeID.getActorID()))).set(g.value,{addToHistory:!0});continue}const y=e.issueTimeTicket();g.setExecutedAt(y),e.push(g)}const i=e.toChange();i.execute(this.clone.root,this.clone.presences,te.UndoRedo);const{opInfos:a,reverseOps:l}=i.execute(this.root,this.presences,te.UndoRedo),c=e.getReversePresence();if(c&&l.push({type:"presence",value:c}),l.length>0&&this.internalHistory.pushUndo(l),!i.hasPresenceChange()&&a.length===0)return;this.localChanges.push(i),this.changeID=e.getNextID();const d=this.changeID.getActorID(),h=[];a.length>0&&h.push({type:"local-change",source:te.UndoRedo,value:{message:i.getMessage()||"",operations:a,actor:d,clientSeq:i.getID().getClientSeq(),serverSeq:i.getID().getServerSeq()},rawChange:this.isEnableDevtools()?i.toStruct():void 0}),i.hasPresenceChange()&&h.push({type:"presence-changed",source:te.UndoRedo,value:{clientID:d,presence:this.getPresence(d)}}),this.publish(h)}getUndoStackForTest(){return this.internalHistory.getUndoStackForTest()}getRedoStackForTest(){return this.internalHistory.getRedoStackForTest()}broadcast(t,e,i){const a={type:"local-broadcast",value:{topic:t,payload:e},options:i};this.publish([a])}getVersionVector(){return this.changeID.getVersionVector()}}function oC(n,t){let e=t;return{authInterceptor:l=>async c=>(n&&c.header.set("x-api-key",n),e&&c.header.set("authorization",e),await l(c)),setToken:l=>{e=l}}}const lC="@yorkie-js/sdk",uC="0.6.18",YS={name:lC,version:uC};function cC(n){return t=>async e=>(n?e.header.set("x-yorkie-user-agent",n):e.header.set("x-yorkie-user-agent",YS.name+"/"+YS.version),await t(e))}const fC=n=>{try{if(JSON.stringify(n)===void 0)return!1}catch{return!1}return!0};var $f=(n=>(n.Manual="manual",n.Realtime="realtime",n.RealtimePushOnly="realtime-pushonly",n.RealtimeSyncOff="realtime-syncoff",n))($f||{});const hu={rpcAddr:"https://api.yorkie.dev",syncLoopDuration:50,retrySyncLoopDelay:1e3,reconnectStreamDelay:1e3},Em={maxRetries:1/0,initialRetryInterval:1e3,maxBackoff:2e4};class lx{constructor(t){p(this,"id");p(this,"key");p(this,"metadata");p(this,"status");p(this,"attachmentMap");p(this,"apiKey");p(this,"authTokenInjector");p(this,"conditions");p(this,"syncLoopDuration");p(this,"reconnectStreamDelay");p(this,"retrySyncLoopDelay");p(this,"rpcClient");p(this,"setAuthToken");p(this,"taskQueue");p(this,"processing",!1);p(this,"keepalive",!1);t=t||hu;const e=t.rpcAddr||hu.rpcAddr;this.key=t.key||ix(),this.metadata=t.metadata||{},this.status="deactivated",this.attachmentMap=new Map,this.apiKey=t.apiKey||"",this.authTokenInjector=t.authTokenInjector,this.conditions={SyncLoop:!1,WatchLoop:!1},this.syncLoopDuration=t.syncLoopDuration??hu.syncLoopDuration,this.reconnectStreamDelay=t.reconnectStreamDelay??hu.reconnectStreamDelay,this.retrySyncLoopDelay=t.retrySyncLoopDelay??hu.retrySyncLoopDelay;const{authInterceptor:i,setToken:a}=oC(this.apiKey);this.setAuthToken=a,this.rpcClient=u2(R2,I2({baseUrl:e,interceptors:[i,cC(t==null?void 0:t.userAgent)],fetch:(l,c)=>{const d={...c,keepalive:this.keepalive};return fetch(l,d)}})),this.taskQueue=[]}async activate(){if(this.isActive())return Promise.resolve();if(this.authTokenInjector){const t=await this.authTokenInjector();this.setAuthToken(t)}return this.enqueueTask(async()=>{try{const t=await this.rpcClient.activateClient({clientKey:this.key,metadata:this.metadata},{headers:{"x-shard-key":`${this.apiKey}/${this.key}`}});this.id=t.clientId,this.status="activated",this.runSyncLoop(),xt.info(`[AC] c:"${this.getKey()}" activated, id:"${this.id}"`),typeof window<"u"&&window.addEventListener("beforeunload",async()=>{await this.deactivate({keepalive:!0})})}catch(t){throw xt.error(`[AC] c:"${this.getKey()}" err :`,t),await this.handleConnectError(t),t}})}deactivate(t={keepalive:!1}){if(this.status==="deactivated")return Promise.resolve();const e=async()=>{try{await this.rpcClient.deactivateClient({clientId:this.id},{headers:{"x-shard-key":`${this.apiKey}/${this.key}`}}),this.deactivateInternal(),xt.info(`[DC] c"${this.getKey()}" deactivated`)}catch(i){throw xt.error(`[DC] c:"${this.getKey()}" err :`,i),await this.handleConnectError(i),i}};if(t.keepalive){this.keepalive=!0;const i=e();return this.keepalive=!1,i}return this.enqueueTask(e)}hasDocument(t){return this.attachmentMap.has(t)}attach(t,e={}){if(!this.isActive())throw new G(V.ErrClientNotActivated,`${this.key} is not active`);if(t.getStatus()!==Gs.Detached)throw new G(V.ErrDocumentNotDetached,`${t.getKey()} is not detached`);t.setActor(this.id),t.update((l,c)=>c.set(e.initialPresence||{}));const i=t.subscribe("local-broadcast",async l=>{var y;const{topic:c,payload:d}=l.value,h=(y=l.options)==null?void 0:y.error,g=l.options;try{await this.broadcast(t.getKey(),c,d,g)}catch(w){w instanceof Error&&(h==null||h(w))}}),a=e.syncMode??"realtime";return this.enqueueTask(async()=>{try{const l=await this.rpcClient.attachDocument({clientId:this.id,changePack:fe.toChangePack(t.createChangePack()),schemaKey:e.schema},{headers:{"x-shard-key":`${this.apiKey}/${t.getKey()}`}});(l.maxSizePerDocument??0)>0&&t.setMaxSizePerDocument(l.maxSizePerDocument),l.schemaRules.length>0&&t.setSchemaRules(fe.fromSchemaRules(l.schemaRules));const d=fe.fromChangePack(l.changePack);if(t.applyChangePack(d),t.getStatus()===Gs.Removed)return t;t.applyStatus(Gs.Attached),this.attachmentMap.set(t.getKey(),new PD(this.reconnectStreamDelay,t,l.documentId,a,i)),a!=="manual"&&await this.runWatchLoop(t.getKey()),xt.info(`[AD] c:"${this.getKey()}" attaches d:"${t.getKey()}"`);const h=t.getRootObject();if(e.initialRoot){const g=e.initialRoot;t.update(y=>{for(const[w,v]of Object.entries(g))if(!h.has(w)){const S=w;y[S]=v}})}return t}catch(l){throw xt.error(`[AD] c:"${this.getKey()}" err :`,l),await this.handleConnectError(l),l}})}detach(t,e={keepalive:!1}){if(!this.isActive())throw new G(V.ErrClientNotActivated,`${this.key} is not active`);const i=this.attachmentMap.get(t.getKey());if(!i)throw new G(V.ErrDocumentNotAttached,`${t.getKey()} is not attached`);t.update((l,c)=>c.clear());const a=async()=>{try{const l=await this.rpcClient.detachDocument({clientId:this.id,documentId:i.docID,changePack:fe.toChangePack(t.createChangePack()),removeIfNotAttached:e.removeIfNotAttached??!1},{headers:{"x-shard-key":`${this.apiKey}/${t.getKey()}`}}),c=fe.fromChangePack(l.changePack);return t.applyChangePack(c),t.getStatus()!==Gs.Removed&&t.applyStatus(Gs.Detached),this.detachInternal(t.getKey()),xt.info(`[DD] c:"${this.getKey()}" detaches d:"${t.getKey()}"`),t}catch(l){throw xt.error(`[DD] c:"${this.getKey()}" err :`,l),await this.handleConnectError(l),l}};if(e.keepalive){this.keepalive=!0;const l=a();return this.keepalive=!1,l}return this.enqueueTask(a)}async changeSyncMode(t,e){if(!this.isActive())throw new G(V.ErrClientNotActivated,`${this.key} is not active`);const i=this.attachmentMap.get(t.getKey());if(!i)throw new G(V.ErrDocumentNotAttached,`${t.getKey()} is not attached`);const a=i.syncMode;return a===e?t:(i.changeSyncMode(e),e==="manual"?(i.cancelWatchStream(),t):(e==="realtime"&&(i.remoteChangeEventReceived=!0),a==="manual"&&await this.runWatchLoop(t.getKey()),t))}sync(t){if(!this.isActive())throw new G(V.ErrClientNotActivated,`${this.key} is not active`);if(t){const e=this.attachmentMap.get(t.getKey());if(!e)throw new G(V.ErrDocumentNotAttached,`${t.getKey()} is not attached`);return this.enqueueTask(async()=>this.syncInternal(e,"realtime").catch(async i=>{throw xt.error(`[SY] c:"${this.getKey()}" err :`,i),await this.handleConnectError(i),i}))}return this.enqueueTask(async()=>{const e=[];for(const[,i]of this.attachmentMap)e.push(this.syncInternal(i,i.syncMode));return Promise.all(e).catch(async i=>{throw xt.error(`[SY] c:"${this.getKey()}" err :`,i),await this.handleConnectError(i),i})})}remove(t){if(!this.isActive())throw new G(V.ErrClientNotActivated,`${this.key} is not active`);const e=this.attachmentMap.get(t.getKey());if(!e)throw new G(V.ErrDocumentNotAttached,`${t.getKey()} is not attached`);t.setActor(this.id);const i=fe.toChangePack(t.createChangePack());return i.isRemoved=!0,this.enqueueTask(async()=>{try{const a=await this.rpcClient.removeDocument({clientId:this.id,documentId:e.docID,changePack:i},{headers:{"x-shard-key":`${this.apiKey}/${t.getKey()}`}}),l=fe.fromChangePack(a.changePack);t.applyChangePack(l),this.detachInternal(t.getKey()),xt.info(`[RD] c:"${this.getKey()}" removes d:"${t.getKey()}"`)}catch(a){throw xt.error(`[RD] c:"${this.getKey()}" err :`,a),await this.handleConnectError(a),a}})}getID(){return this.id}getKey(){return this.key}isActive(){return this.status==="activated"}getStatus(){return this.status}getCondition(t){return this.conditions[t]}broadcast(t,e,i,a){if(!this.isActive())throw new G(V.ErrClientNotActivated,`${this.key} is not active`);const l=this.attachmentMap.get(t);if(!l)throw new G(V.ErrDocumentNotAttached,`${t} is not attached`);if(!fC(i))throw new G(V.ErrInvalidArgument,"payload is not serializable");const c=(a==null?void 0:a.maxRetries)??Em.maxRetries,d=Em.maxBackoff;let h=0;const g=w=>Math.min(Em.initialRetryInterval*2**w,d),y=async()=>this.enqueueTask(async()=>{try{await this.rpcClient.broadcast({clientId:this.id,documentId:l.docID,topic:e,payload:new TextEncoder().encode(JSON.stringify(i))},{headers:{"x-shard-key":`${this.apiKey}/${t}`}}),xt.info(`[BC] c:"${this.getKey()}" broadcasts d:"${t}" t:"${e}"`)}catch(w){if(xt.error(`[BC] c:"${this.getKey()}" err:`,w),await this.handleConnectError(w))if(w instanceof Gt&&$s(w)===V.ErrUnauthenticated&&l.doc.publish([{type:ze.AuthError,value:{reason:yu(w).reason,method:"Broadcast"}}]),h<c)h++,setTimeout(()=>y(),g(h-1)),xt.info(`[BC] c:"${this.getKey()}" retry attempt ${h}/${c}`);else throw xt.error(`[BC] c:"${this.getKey()}" exceeded maximum retry attempts`),w;else throw w}});return y()}runSyncLoop(){const t=()=>{if(!this.isActive()){xt.debug(`[SL] c:"${this.getKey()}" exit sync loop`),this.conditions.SyncLoop=!1;return}const e=[];for(const[,i]of this.attachmentMap)i.needRealtimeSync()&&(i.remoteChangeEventReceived=!1,e.push(this.syncInternal(i,i.syncMode).catch(async a=>{throw a instanceof Gt&&$s(a)===V.ErrUnauthenticated&&i.doc.publish([{type:ze.AuthError,value:{reason:yu(a).reason,method:"PushPull"}}]),a})));Promise.all(e).then(()=>setTimeout(t,this.syncLoopDuration)).catch(async i=>{xt.error(`[SL] c:"${this.getKey()}" sync failed:`,i),await this.handleConnectError(i)?setTimeout(t,this.retrySyncLoopDelay):this.conditions.SyncLoop=!1})};xt.debug(`[SL] c:"${this.getKey()}" run sync loop`),this.conditions.SyncLoop=!0,t()}async runWatchLoop(t){const e=this.attachmentMap.get(t);if(!e)throw new G(V.ErrDocumentNotAttached,`${t} is not attached`);return this.conditions.WatchLoop=!0,e.runWatchLoop(i=>{if(!this.isActive())return this.conditions.WatchLoop=!1,Promise.reject(new G(V.ErrClientNotActivated,`${this.key} is not active`));const a=new AbortController,l=this.rpcClient.watchDocument({clientId:this.id,documentId:e.docID},{headers:{"x-shard-key":`${this.apiKey}/${t}`},signal:a.signal});return e.doc.publish([{type:ze.ConnectionChanged,value:Sd.Connected}]),xt.info(`[WD] c:"${this.getKey()}" watches d:"${t}"`),new Promise((c,d)=>{(async()=>{try{for await(const g of l)this.handleWatchDocumentsResponse(e,g),g.body.case==="initialization"&&c([l,a])}catch(g){e.doc.resetOnlineClients(),e.doc.publish([{type:ze.Initialized,source:te.Local,value:e.doc.getPresences()}]),e.doc.publish([{type:ze.ConnectionChanged,value:Sd.Disconnected}]),xt.debug(`[WD] c:"${this.getKey()}" unwatches`),await this.handleConnectError(g)?(g instanceof Gt&&$s(g)===V.ErrUnauthenticated&&e.doc.publish([{type:ze.AuthError,value:{reason:yu(g).reason,method:"WatchDocuments"}}]),i()):this.conditions.WatchLoop=!1,d(g)}})()})})}handleWatchDocumentsResponse(t,e){if(e.body.case==="event"&&e.body.value.type===Ra.DOCUMENT_CHANGED){t.remoteChangeEventReceived=!0;return}t.doc.applyWatchStream(e)}deactivateInternal(){this.status="deactivated";for(const[t,e]of this.attachmentMap)this.detachInternal(t),e.doc.applyStatus(Gs.Detached)}detachInternal(t){const e=this.attachmentMap.get(t);e&&(e.cancelWatchStream(),e.unsubscribeBroadcastEvent(),this.attachmentMap.delete(t))}async syncInternal(t,e){const{doc:i,docID:a}=t,l=i.createChangePack();try{const c=await this.rpcClient.pushPullChanges({clientId:this.id,documentId:a,changePack:fe.toChangePack(l),pushOnly:e==="realtime-pushonly"},{headers:{"x-shard-key":`${this.apiKey}/${i.getKey()}`}}),d=fe.fromChangePack(c.changePack);if(d.hasChanges()&&(t.syncMode==="realtime-pushonly"||t.syncMode==="realtime-syncoff"))return i;i.applyChangePack(d),t.doc.publish([{type:ze.SyncStatusChanged,value:yy.Synced}]),i.getStatus()===Gs.Removed&&this.detachInternal(i.getKey());const h=i.getKey(),g=d.getChangeSize();return xt.info(`[PP] c:"${this.getKey()}" sync d:"${h}", push:${l.getChangeSize()} pull:${g} cp:${d.getCheckpoint().toTestString()}`),i}catch(c){throw i.publish([{type:ze.SyncStatusChanged,value:yy.SyncFailed}]),xt.error(`[PP] c:"${this.getKey()}" err :`,c),c}}async handleConnectError(t){if(!(t instanceof Gt))return!1;if(t.code===_t.Canceled||t.code===_t.Unknown||t.code===_t.ResourceExhausted||t.code===_t.Unavailable)return!0;if($s(t)===V.ErrUnauthenticated){if(this.authTokenInjector){const e=await this.authTokenInjector(yu(t).reason);this.setAuthToken(e)}return!0}return $s(t)===V.ErrTooManySubscribers?(xt.error(`[WD] c:"${this.getKey()}" err :`,t.rawMessage),!0):($s(t)===V.ErrTooManyAttachments||($s(t)===V.ErrClientNotActivated||$s(t)===V.ErrClientNotFound)&&this.deactivateInternal(),!1)}enqueueTask(t){return new Promise((e,i)=>{this.taskQueue.push(()=>t().then(e).catch(i)),this.processing||this.processNext()})}async processNext(){if(this.taskQueue.length===0){this.processing=!1;return}try{this.processing=!0,await this.taskQueue.shift()()}catch{xt.error(`[TQ] c:"${this.getKey()}" process failed, id:"${this.id}"`)}this.processNext()}}Er.Int,Er.Long;typeof globalThis<"u"&&(globalThis.yorkie={Client:lx,Document:ox,Primitive:oe,Text:Ky,Counter:Fy,Tree:Wy,LogLevel:Qe,setLogLevel:qD,IntType:Er.Int,LongType:Er.Long});const ux=et.createContext({client:void 0,loading:!0,error:void 0});function dC(n){const[t,e]=et.useState(void 0),[i,a]=et.useState(!0),[l,c]=et.useState(void 0),[d,h]=et.useState(!1);return et.useEffect(()=>{h(!0)},[]),et.useEffect(()=>{a(!0),c(void 0);async function g(){if(d)try{const y=new lx(n);await y.activate(),e(y)}catch(y){c(y instanceof Error?y:new Error("Failed to activate client"))}finally{a(!1)}}return g(),()=>{t!=null&&t.isActive()&&t.deactivate({keepalive:!0})}},[n.apiKey,n.rpcAddr,d]),{client:t,loading:i,error:l}}const hC=({children:n,...t})=>{const e=et.useMemo(()=>({userAgent:tS.name+"/"+tS.version,...t}),[t.apiKey,t.rpcAddr]),{client:i,loading:a,error:l}=dC(e);return Q.jsx(ux.Provider,{value:{client:i,loading:a,error:l},children:n})},gC=()=>{const n=et.useContext(ux);if(!n)throw new Error("useYorkie must be used under YorkieProvider");return{client:n.client,loading:n.loading,error:n.error}};function mC(n,t,e,i,a,l){const[c,d]=et.useState(),[h,g]=et.useState(!0),[y,w]=et.useState(),[v,S]=et.useState(a),[x,E]=et.useState([]),[I,k]=et.useState(Sd.Disconnected);et.useEffect(()=>{if(e){g(!1),w(e);return}if(!n||t){g(!0);return}g(!0),w(void 0);const N=new ox(i),O=[];O.push(N.subscribe(()=>{S(N.getRoot())})),O.push(N.subscribe("presence",()=>{E(N.getPresences())})),O.push(N.subscribe("connection",J=>{k(J.value)}));async function _(){try{await(n==null?void 0:n.attach(N,{initialRoot:a,initialPresence:l})),d(N),S(N.getRoot()),E(N.getPresences())}catch(J){w(J instanceof Error?J:new Error("Failed to attach document"))}finally{g(!1)}}return _(),()=>{n&&n.hasDocument(i)&&n.detach(N);for(const J of O)J()}},[n,t,e,i]);const z=et.useCallback(N=>{if(c)try{c.update(N)}catch(O){w(O instanceof Error?O:new Error("Failed to update document"))}},[c]);return{doc:c,root:v,presences:x,connection:I,update:z,loading:h,error:y}}const cx=et.createContext(null),yC=({docKey:n,initialRoot:t={},initialPresence:e={},children:i})=>{const{client:a,loading:l,error:c}=gC(),{doc:d,root:h,presences:g,connection:y,update:w,loading:v,error:S}=mC(a,l,c,n,t,e);return Q.jsx(cx.Provider,{value:{doc:d,root:h,presences:g,connection:y,update:w,loading:v,error:S},children:i})},pC=()=>{const n=et.useContext(cx);if(!n)throw new Error("useDocument must be used within a DocumentProvider");return{doc:n.doc,root:n.root,presences:n.presences,connection:n.connection,update:n.update,loading:n.loading,error:n.error}};function be(n){if(typeof n=="string"||typeof n=="number")return""+n;let t="";if(Array.isArray(n))for(let e=0,i;e<n.length;e++)(i=be(n[e]))!==""&&(t+=(t&&" ")+i);else for(let e in n)n[e]&&(t+=(t&&" ")+e);return t}var vC={value:()=>{}};function qd(){for(var n=0,t=arguments.length,e={},i;n<t;++n){if(!(i=arguments[n]+"")||i in e||/[\s.]/.test(i))throw new Error("illegal type: "+i);e[i]=[]}return new Vf(e)}function Vf(n){this._=n}function wC(n,t){return n.trim().split(/^|\s+/).map(function(e){var i="",a=e.indexOf(".");if(a>=0&&(i=e.slice(a+1),e=e.slice(0,a)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:i}})}Vf.prototype=qd.prototype={constructor:Vf,on:function(n,t){var e=this._,i=wC(n+"",e),a,l=-1,c=i.length;if(arguments.length<2){for(;++l<c;)if((a=(n=i[l]).type)&&(a=SC(e[a],n.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++l<c;)if(a=(n=i[l]).type)e[a]=GS(e[a],n.name,t);else if(t==null)for(a in e)e[a]=GS(e[a],n.name,null);return this},copy:function(){var n={},t=this._;for(var e in t)n[e]=t[e].slice();return new Vf(n)},call:function(n,t){if((a=arguments.length-2)>0)for(var e=new Array(a),i=0,a,l;i<a;++i)e[i]=arguments[i+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(l=this._[n],i=0,a=l.length;i<a;++i)l[i].value.apply(t,e)},apply:function(n,t,e){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var i=this._[n],a=0,l=i.length;a<l;++a)i[a].value.apply(t,e)}};function SC(n,t){for(var e=0,i=n.length,a;e<i;++e)if((a=n[e]).name===t)return a.value}function GS(n,t,e){for(var i=0,a=n.length;i<a;++i)if(n[i].name===t){n[i]=vC,n=n.slice(0,i).concat(n.slice(i+1));break}return e!=null&&n.push({name:t,value:e}),n}var py="http://www.w3.org/1999/xhtml";const XS={svg:"http://www.w3.org/2000/svg",xhtml:py,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Pd(n){var t=n+="",e=t.indexOf(":");return e>=0&&(t=n.slice(0,e))!=="xmlns"&&(n=n.slice(e+1)),XS.hasOwnProperty(t)?{space:XS[t],local:n}:n}function bC(n){return function(){var t=this.ownerDocument,e=this.namespaceURI;return e===py&&t.documentElement.namespaceURI===py?t.createElement(n):t.createElementNS(e,n)}}function xC(n){return function(){return this.ownerDocument.createElementNS(n.space,n.local)}}function fx(n){var t=Pd(n);return(t.local?xC:bC)(t)}function TC(){}function tp(n){return n==null?TC:function(){return this.querySelector(n)}}function AC(n){typeof n!="function"&&(n=tp(n));for(var t=this._groups,e=t.length,i=new Array(e),a=0;a<e;++a)for(var l=t[a],c=l.length,d=i[a]=new Array(c),h,g,y=0;y<c;++y)(h=l[y])&&(g=n.call(h,h.__data__,y,l))&&("__data__"in h&&(g.__data__=h.__data__),d[y]=g);return new wn(i,this._parents)}function EC(n){return n==null?[]:Array.isArray(n)?n:Array.from(n)}function NC(){return[]}function dx(n){return n==null?NC:function(){return this.querySelectorAll(n)}}function DC(n){return function(){return EC(n.apply(this,arguments))}}function CC(n){typeof n=="function"?n=DC(n):n=dx(n);for(var t=this._groups,e=t.length,i=[],a=[],l=0;l<e;++l)for(var c=t[l],d=c.length,h,g=0;g<d;++g)(h=c[g])&&(i.push(n.call(h,h.__data__,g,c)),a.push(h));return new wn(i,a)}function hx(n){return function(){return this.matches(n)}}function gx(n){return function(t){return t.matches(n)}}var kC=Array.prototype.find;function OC(n){return function(){return kC.call(this.children,n)}}function IC(){return this.firstElementChild}function RC(n){return this.select(n==null?IC:OC(typeof n=="function"?n:gx(n)))}var MC=Array.prototype.filter;function BC(){return Array.from(this.children)}function zC(n){return function(){return MC.call(this.children,n)}}function LC(n){return this.selectAll(n==null?BC:zC(typeof n=="function"?n:gx(n)))}function _C(n){typeof n!="function"&&(n=hx(n));for(var t=this._groups,e=t.length,i=new Array(e),a=0;a<e;++a)for(var l=t[a],c=l.length,d=i[a]=[],h,g=0;g<c;++g)(h=l[g])&&n.call(h,h.__data__,g,l)&&d.push(h);return new wn(i,this._parents)}function mx(n){return new Array(n.length)}function UC(){return new wn(this._enter||this._groups.map(mx),this._parents)}function bd(n,t){this.ownerDocument=n.ownerDocument,this.namespaceURI=n.namespaceURI,this._next=null,this._parent=n,this.__data__=t}bd.prototype={constructor:bd,appendChild:function(n){return this._parent.insertBefore(n,this._next)},insertBefore:function(n,t){return this._parent.insertBefore(n,t)},querySelector:function(n){return this._parent.querySelector(n)},querySelectorAll:function(n){return this._parent.querySelectorAll(n)}};function qC(n){return function(){return n}}function PC(n,t,e,i,a,l){for(var c=0,d,h=t.length,g=l.length;c<g;++c)(d=t[c])?(d.__data__=l[c],i[c]=d):e[c]=new bd(n,l[c]);for(;c<h;++c)(d=t[c])&&(a[c]=d)}function JC(n,t,e,i,a,l,c){var d,h,g=new Map,y=t.length,w=l.length,v=new Array(y),S;for(d=0;d<y;++d)(h=t[d])&&(v[d]=S=c.call(h,h.__data__,d,t)+"",g.has(S)?a[d]=h:g.set(S,h));for(d=0;d<w;++d)S=c.call(n,l[d],d,l)+"",(h=g.get(S))?(i[d]=h,h.__data__=l[d],g.delete(S)):e[d]=new bd(n,l[d]);for(d=0;d<y;++d)(h=t[d])&&g.get(v[d])===h&&(a[d]=h)}function HC(n){return n.__data__}function $C(n,t){if(!arguments.length)return Array.from(this,HC);var e=t?JC:PC,i=this._parents,a=this._groups;typeof n!="function"&&(n=qC(n));for(var l=a.length,c=new Array(l),d=new Array(l),h=new Array(l),g=0;g<l;++g){var y=i[g],w=a[g],v=w.length,S=VC(n.call(y,y&&y.__data__,g,i)),x=S.length,E=d[g]=new Array(x),I=c[g]=new Array(x),k=h[g]=new Array(v);e(y,w,E,I,k,S,t);for(var z=0,N=0,O,_;z<x;++z)if(O=E[z]){for(z>=N&&(N=z+1);!(_=I[N])&&++N<x;);O._next=_||null}}return c=new wn(c,i),c._enter=d,c._exit=h,c}function VC(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function jC(){return new wn(this._exit||this._groups.map(mx),this._parents)}function YC(n,t,e){var i=this.enter(),a=this,l=this.exit();return typeof n=="function"?(i=n(i),i&&(i=i.selection())):i=i.append(n+""),t!=null&&(a=t(a),a&&(a=a.selection())),e==null?l.remove():e(l),i&&a?i.merge(a).order():a}function GC(n){for(var t=n.selection?n.selection():n,e=this._groups,i=t._groups,a=e.length,l=i.length,c=Math.min(a,l),d=new Array(a),h=0;h<c;++h)for(var g=e[h],y=i[h],w=g.length,v=d[h]=new Array(w),S,x=0;x<w;++x)(S=g[x]||y[x])&&(v[x]=S);for(;h<a;++h)d[h]=e[h];return new wn(d,this._parents)}function XC(){for(var n=this._groups,t=-1,e=n.length;++t<e;)for(var i=n[t],a=i.length-1,l=i[a],c;--a>=0;)(c=i[a])&&(l&&c.compareDocumentPosition(l)^4&&l.parentNode.insertBefore(c,l),l=c);return this}function KC(n){n||(n=FC);function t(w,v){return w&&v?n(w.__data__,v.__data__):!w-!v}for(var e=this._groups,i=e.length,a=new Array(i),l=0;l<i;++l){for(var c=e[l],d=c.length,h=a[l]=new Array(d),g,y=0;y<d;++y)(g=c[y])&&(h[y]=g);h.sort(t)}return new wn(a,this._parents).order()}function FC(n,t){return n<t?-1:n>t?1:n>=t?0:NaN}function ZC(){var n=arguments[0];return arguments[0]=this,n.apply(null,arguments),this}function QC(){return Array.from(this)}function WC(){for(var n=this._groups,t=0,e=n.length;t<e;++t)for(var i=n[t],a=0,l=i.length;a<l;++a){var c=i[a];if(c)return c}return null}function t3(){let n=0;for(const t of this)++n;return n}function e3(){return!this.node()}function n3(n){for(var t=this._groups,e=0,i=t.length;e<i;++e)for(var a=t[e],l=0,c=a.length,d;l<c;++l)(d=a[l])&&n.call(d,d.__data__,l,a);return this}function r3(n){return function(){this.removeAttribute(n)}}function i3(n){return function(){this.removeAttributeNS(n.space,n.local)}}function s3(n,t){return function(){this.setAttribute(n,t)}}function a3(n,t){return function(){this.setAttributeNS(n.space,n.local,t)}}function o3(n,t){return function(){var e=t.apply(this,arguments);e==null?this.removeAttribute(n):this.setAttribute(n,e)}}function l3(n,t){return function(){var e=t.apply(this,arguments);e==null?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,e)}}function u3(n,t){var e=Pd(n);if(arguments.length<2){var i=this.node();return e.local?i.getAttributeNS(e.space,e.local):i.getAttribute(e)}return this.each((t==null?e.local?i3:r3:typeof t=="function"?e.local?l3:o3:e.local?a3:s3)(e,t))}function yx(n){return n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView}function c3(n){return function(){this.style.removeProperty(n)}}function f3(n,t,e){return function(){this.style.setProperty(n,t,e)}}function d3(n,t,e){return function(){var i=t.apply(this,arguments);i==null?this.style.removeProperty(n):this.style.setProperty(n,i,e)}}function h3(n,t,e){return arguments.length>1?this.each((t==null?c3:typeof t=="function"?d3:f3)(n,t,e??"")):Wo(this.node(),n)}function Wo(n,t){return n.style.getPropertyValue(t)||yx(n).getComputedStyle(n,null).getPropertyValue(t)}function g3(n){return function(){delete this[n]}}function m3(n,t){return function(){this[n]=t}}function y3(n,t){return function(){var e=t.apply(this,arguments);e==null?delete this[n]:this[n]=e}}function p3(n,t){return arguments.length>1?this.each((t==null?g3:typeof t=="function"?y3:m3)(n,t)):this.node()[n]}function px(n){return n.trim().split(/^|\s+/)}function ep(n){return n.classList||new vx(n)}function vx(n){this._node=n,this._names=px(n.getAttribute("class")||"")}vx.prototype={add:function(n){var t=this._names.indexOf(n);t<0&&(this._names.push(n),this._node.setAttribute("class",this._names.join(" ")))},remove:function(n){var t=this._names.indexOf(n);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(n){return this._names.indexOf(n)>=0}};function wx(n,t){for(var e=ep(n),i=-1,a=t.length;++i<a;)e.add(t[i])}function Sx(n,t){for(var e=ep(n),i=-1,a=t.length;++i<a;)e.remove(t[i])}function v3(n){return function(){wx(this,n)}}function w3(n){return function(){Sx(this,n)}}function S3(n,t){return function(){(t.apply(this,arguments)?wx:Sx)(this,n)}}function b3(n,t){var e=px(n+"");if(arguments.length<2){for(var i=ep(this.node()),a=-1,l=e.length;++a<l;)if(!i.contains(e[a]))return!1;return!0}return this.each((typeof t=="function"?S3:t?v3:w3)(e,t))}function x3(){this.textContent=""}function T3(n){return function(){this.textContent=n}}function A3(n){return function(){var t=n.apply(this,arguments);this.textContent=t??""}}function E3(n){return arguments.length?this.each(n==null?x3:(typeof n=="function"?A3:T3)(n)):this.node().textContent}function N3(){this.innerHTML=""}function D3(n){return function(){this.innerHTML=n}}function C3(n){return function(){var t=n.apply(this,arguments);this.innerHTML=t??""}}function k3(n){return arguments.length?this.each(n==null?N3:(typeof n=="function"?C3:D3)(n)):this.node().innerHTML}function O3(){this.nextSibling&&this.parentNode.appendChild(this)}function I3(){return this.each(O3)}function R3(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function M3(){return this.each(R3)}function B3(n){var t=typeof n=="function"?n:fx(n);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function z3(){return null}function L3(n,t){var e=typeof n=="function"?n:fx(n),i=t==null?z3:typeof t=="function"?t:tp(t);return this.select(function(){return this.insertBefore(e.apply(this,arguments),i.apply(this,arguments)||null)})}function _3(){var n=this.parentNode;n&&n.removeChild(this)}function U3(){return this.each(_3)}function q3(){var n=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(n,this.nextSibling):n}function P3(){var n=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(n,this.nextSibling):n}function J3(n){return this.select(n?P3:q3)}function H3(n){return arguments.length?this.property("__data__",n):this.node().__data__}function $3(n){return function(t){n.call(this,t,this.__data__)}}function V3(n){return n.trim().split(/^|\s+/).map(function(t){var e="",i=t.indexOf(".");return i>=0&&(e=t.slice(i+1),t=t.slice(0,i)),{type:t,name:e}})}function j3(n){return function(){var t=this.__on;if(t){for(var e=0,i=-1,a=t.length,l;e<a;++e)l=t[e],(!n.type||l.type===n.type)&&l.name===n.name?this.removeEventListener(l.type,l.listener,l.options):t[++i]=l;++i?t.length=i:delete this.__on}}}function Y3(n,t,e){return function(){var i=this.__on,a,l=$3(t);if(i){for(var c=0,d=i.length;c<d;++c)if((a=i[c]).type===n.type&&a.name===n.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=l,a.options=e),a.value=t;return}}this.addEventListener(n.type,l,e),a={type:n.type,name:n.name,value:t,listener:l,options:e},i?i.push(a):this.__on=[a]}}function G3(n,t,e){var i=V3(n+""),a,l=i.length,c;if(arguments.length<2){var d=this.node().__on;if(d){for(var h=0,g=d.length,y;h<g;++h)for(a=0,y=d[h];a<l;++a)if((c=i[a]).type===y.type&&c.name===y.name)return y.value}return}for(d=t?Y3:j3,a=0;a<l;++a)this.each(d(i[a],t,e));return this}function bx(n,t,e){var i=yx(n),a=i.CustomEvent;typeof a=="function"?a=new a(t,e):(a=i.document.createEvent("Event"),e?(a.initEvent(t,e.bubbles,e.cancelable),a.detail=e.detail):a.initEvent(t,!1,!1)),n.dispatchEvent(a)}function X3(n,t){return function(){return bx(this,n,t)}}function K3(n,t){return function(){return bx(this,n,t.apply(this,arguments))}}function F3(n,t){return this.each((typeof t=="function"?K3:X3)(n,t))}function*Z3(){for(var n=this._groups,t=0,e=n.length;t<e;++t)for(var i=n[t],a=0,l=i.length,c;a<l;++a)(c=i[a])&&(yield c)}var xx=[null];function wn(n,t){this._groups=n,this._parents=t}function Qu(){return new wn([[document.documentElement]],xx)}function Q3(){return this}wn.prototype=Qu.prototype={constructor:wn,select:AC,selectAll:CC,selectChild:RC,selectChildren:LC,filter:_C,data:$C,enter:UC,exit:jC,join:YC,merge:GC,selection:Q3,order:XC,sort:KC,call:ZC,nodes:QC,node:WC,size:t3,empty:e3,each:n3,attr:u3,style:h3,property:p3,classed:b3,text:E3,html:k3,raise:I3,lower:M3,append:B3,insert:L3,remove:U3,clone:J3,datum:H3,on:G3,dispatch:F3,[Symbol.iterator]:Z3};function gn(n){return typeof n=="string"?new wn([[document.querySelector(n)]],[document.documentElement]):new wn([[n]],xx)}function W3(n){let t;for(;t=n.sourceEvent;)n=t;return n}function Xn(n,t){if(n=W3(n),t===void 0&&(t=n.currentTarget),t){var e=t.ownerSVGElement||t;if(e.createSVGPoint){var i=e.createSVGPoint();return i.x=n.clientX,i.y=n.clientY,i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}if(t.getBoundingClientRect){var a=t.getBoundingClientRect();return[n.clientX-a.left-t.clientLeft,n.clientY-a.top-t.clientTop]}}return[n.pageX,n.pageY]}const tk={passive:!1},Lu={capture:!0,passive:!1};function Nm(n){n.stopImmediatePropagation()}function Jo(n){n.preventDefault(),n.stopImmediatePropagation()}function Tx(n){var t=n.document.documentElement,e=gn(n).on("dragstart.drag",Jo,Lu);"onselectstart"in t?e.on("selectstart.drag",Jo,Lu):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Ax(n,t){var e=n.document.documentElement,i=gn(n).on("dragstart.drag",null);t&&(i.on("click.drag",Jo,Lu),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in e?i.on("selectstart.drag",null):(e.style.MozUserSelect=e.__noselect,delete e.__noselect)}const Cf=n=>()=>n;function vy(n,{sourceEvent:t,subject:e,target:i,identifier:a,active:l,x:c,y:d,dx:h,dy:g,dispatch:y}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:e,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:a,enumerable:!0,configurable:!0},active:{value:l,enumerable:!0,configurable:!0},x:{value:c,enumerable:!0,configurable:!0},y:{value:d,enumerable:!0,configurable:!0},dx:{value:h,enumerable:!0,configurable:!0},dy:{value:g,enumerable:!0,configurable:!0},_:{value:y}})}vy.prototype.on=function(){var n=this._.on.apply(this._,arguments);return n===this._?this:n};function ek(n){return!n.ctrlKey&&!n.button}function nk(){return this.parentNode}function rk(n,t){return t??{x:n.x,y:n.y}}function ik(){return navigator.maxTouchPoints||"ontouchstart"in this}function Ex(){var n=ek,t=nk,e=rk,i=ik,a={},l=qd("start","drag","end"),c=0,d,h,g,y,w=0;function v(O){O.on("mousedown.drag",S).filter(i).on("touchstart.drag",I).on("touchmove.drag",k,tk).on("touchend.drag touchcancel.drag",z).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function S(O,_){if(!(y||!n.call(this,O,_))){var J=N(this,t.call(this,O,_),O,_,"mouse");J&&(gn(O.view).on("mousemove.drag",x,Lu).on("mouseup.drag",E,Lu),Tx(O.view),Nm(O),g=!1,d=O.clientX,h=O.clientY,J("start",O))}}function x(O){if(Jo(O),!g){var _=O.clientX-d,J=O.clientY-h;g=_*_+J*J>w}a.mouse("drag",O)}function E(O){gn(O.view).on("mousemove.drag mouseup.drag",null),Ax(O.view,g),Jo(O),a.mouse("end",O)}function I(O,_){if(n.call(this,O,_)){var J=O.changedTouches,U=t.call(this,O,_),W=J.length,F,nt;for(F=0;F<W;++F)(nt=N(this,U,O,_,J[F].identifier,J[F]))&&(Nm(O),nt("start",O,J[F]))}}function k(O){var _=O.changedTouches,J=_.length,U,W;for(U=0;U<J;++U)(W=a[_[U].identifier])&&(Jo(O),W("drag",O,_[U]))}function z(O){var _=O.changedTouches,J=_.length,U,W;for(y&&clearTimeout(y),y=setTimeout(function(){y=null},500),U=0;U<J;++U)(W=a[_[U].identifier])&&(Nm(O),W("end",O,_[U]))}function N(O,_,J,U,W,F){var nt=l.copy(),ft=Xn(F||J,_),ot,ct,R;if((R=e.call(O,new vy("beforestart",{sourceEvent:J,target:v,identifier:W,active:c,x:ft[0],y:ft[1],dx:0,dy:0,dispatch:nt}),U))!=null)return ot=R.x-ft[0]||0,ct=R.y-ft[1]||0,function j(C,B,H){var q=ft,D;switch(C){case"start":a[W]=j,D=c++;break;case"end":delete a[W],--c;case"drag":ft=Xn(H||B,_),D=c;break}nt.call(C,O,new vy(C,{sourceEvent:B,subject:R,target:v,identifier:W,active:D,x:ft[0]+ot,y:ft[1]+ct,dx:ft[0]-q[0],dy:ft[1]-q[1],dispatch:nt}),U)}}return v.filter=function(O){return arguments.length?(n=typeof O=="function"?O:Cf(!!O),v):n},v.container=function(O){return arguments.length?(t=typeof O=="function"?O:Cf(O),v):t},v.subject=function(O){return arguments.length?(e=typeof O=="function"?O:Cf(O),v):e},v.touchable=function(O){return arguments.length?(i=typeof O=="function"?O:Cf(!!O),v):i},v.on=function(){var O=l.on.apply(l,arguments);return O===l?v:O},v.clickDistance=function(O){return arguments.length?(w=(O=+O)*O,v):Math.sqrt(w)},v}function np(n,t,e){n.prototype=t.prototype=e,e.constructor=n}function Nx(n,t){var e=Object.create(n.prototype);for(var i in t)e[i]=t[i];return e}function Wu(){}var _u=.7,xd=1/_u,Ho="\\s*([+-]?\\d+)\\s*",Uu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Tr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",sk=/^#([0-9a-f]{3,8})$/,ak=new RegExp(`^rgb\\(${Ho},${Ho},${Ho}\\)$`),ok=new RegExp(`^rgb\\(${Tr},${Tr},${Tr}\\)$`),lk=new RegExp(`^rgba\\(${Ho},${Ho},${Ho},${Uu}\\)$`),uk=new RegExp(`^rgba\\(${Tr},${Tr},${Tr},${Uu}\\)$`),ck=new RegExp(`^hsl\\(${Uu},${Tr},${Tr}\\)$`),fk=new RegExp(`^hsla\\(${Uu},${Tr},${Tr},${Uu}\\)$`),KS={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};np(Wu,qu,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:FS,formatHex:FS,formatHex8:dk,formatHsl:hk,formatRgb:ZS,toString:ZS});function FS(){return this.rgb().formatHex()}function dk(){return this.rgb().formatHex8()}function hk(){return Dx(this).formatHsl()}function ZS(){return this.rgb().formatRgb()}function qu(n){var t,e;return n=(n+"").trim().toLowerCase(),(t=sk.exec(n))?(e=t[1].length,t=parseInt(t[1],16),e===6?QS(t):e===3?new en(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):e===8?kf(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):e===4?kf(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=ak.exec(n))?new en(t[1],t[2],t[3],1):(t=ok.exec(n))?new en(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=lk.exec(n))?kf(t[1],t[2],t[3],t[4]):(t=uk.exec(n))?kf(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=ck.exec(n))?eb(t[1],t[2]/100,t[3]/100,1):(t=fk.exec(n))?eb(t[1],t[2]/100,t[3]/100,t[4]):KS.hasOwnProperty(n)?QS(KS[n]):n==="transparent"?new en(NaN,NaN,NaN,0):null}function QS(n){return new en(n>>16&255,n>>8&255,n&255,1)}function kf(n,t,e,i){return i<=0&&(n=t=e=NaN),new en(n,t,e,i)}function gk(n){return n instanceof Wu||(n=qu(n)),n?(n=n.rgb(),new en(n.r,n.g,n.b,n.opacity)):new en}function wy(n,t,e,i){return arguments.length===1?gk(n):new en(n,t,e,i??1)}function en(n,t,e,i){this.r=+n,this.g=+t,this.b=+e,this.opacity=+i}np(en,wy,Nx(Wu,{brighter(n){return n=n==null?xd:Math.pow(xd,n),new en(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?_u:Math.pow(_u,n),new en(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new en(Ma(this.r),Ma(this.g),Ma(this.b),Td(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:WS,formatHex:WS,formatHex8:mk,formatRgb:tb,toString:tb}));function WS(){return`#${Oa(this.r)}${Oa(this.g)}${Oa(this.b)}`}function mk(){return`#${Oa(this.r)}${Oa(this.g)}${Oa(this.b)}${Oa((isNaN(this.opacity)?1:this.opacity)*255)}`}function tb(){const n=Td(this.opacity);return`${n===1?"rgb(":"rgba("}${Ma(this.r)}, ${Ma(this.g)}, ${Ma(this.b)}${n===1?")":`, ${n})`}`}function Td(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function Ma(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function Oa(n){return n=Ma(n),(n<16?"0":"")+n.toString(16)}function eb(n,t,e,i){return i<=0?n=t=e=NaN:e<=0||e>=1?n=t=NaN:t<=0&&(n=NaN),new Kn(n,t,e,i)}function Dx(n){if(n instanceof Kn)return new Kn(n.h,n.s,n.l,n.opacity);if(n instanceof Wu||(n=qu(n)),!n)return new Kn;if(n instanceof Kn)return n;n=n.rgb();var t=n.r/255,e=n.g/255,i=n.b/255,a=Math.min(t,e,i),l=Math.max(t,e,i),c=NaN,d=l-a,h=(l+a)/2;return d?(t===l?c=(e-i)/d+(e<i)*6:e===l?c=(i-t)/d+2:c=(t-e)/d+4,d/=h<.5?l+a:2-l-a,c*=60):d=h>0&&h<1?0:c,new Kn(c,d,h,n.opacity)}function yk(n,t,e,i){return arguments.length===1?Dx(n):new Kn(n,t,e,i??1)}function Kn(n,t,e,i){this.h=+n,this.s=+t,this.l=+e,this.opacity=+i}np(Kn,yk,Nx(Wu,{brighter(n){return n=n==null?xd:Math.pow(xd,n),new Kn(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?_u:Math.pow(_u,n),new Kn(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,t=isNaN(n)||isNaN(this.s)?0:this.s,e=this.l,i=e+(e<.5?e:1-e)*t,a=2*e-i;return new en(Dm(n>=240?n-240:n+120,a,i),Dm(n,a,i),Dm(n<120?n+240:n-120,a,i),this.opacity)},clamp(){return new Kn(nb(this.h),Of(this.s),Of(this.l),Td(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=Td(this.opacity);return`${n===1?"hsl(":"hsla("}${nb(this.h)}, ${Of(this.s)*100}%, ${Of(this.l)*100}%${n===1?")":`, ${n})`}`}}));function nb(n){return n=(n||0)%360,n<0?n+360:n}function Of(n){return Math.max(0,Math.min(1,n||0))}function Dm(n,t,e){return(n<60?t+(e-t)*n/60:n<180?e:n<240?t+(e-t)*(240-n)/60:t)*255}const Cx=n=>()=>n;function pk(n,t){return function(e){return n+e*t}}function vk(n,t,e){return n=Math.pow(n,e),t=Math.pow(t,e)-n,e=1/e,function(i){return Math.pow(n+i*t,e)}}function wk(n){return(n=+n)==1?kx:function(t,e){return e-t?vk(t,e,n):Cx(isNaN(t)?e:t)}}function kx(n,t){var e=t-n;return e?pk(n,e):Cx(isNaN(n)?t:n)}const rb=function n(t){var e=wk(t);function i(a,l){var c=e((a=wy(a)).r,(l=wy(l)).r),d=e(a.g,l.g),h=e(a.b,l.b),g=kx(a.opacity,l.opacity);return function(y){return a.r=c(y),a.g=d(y),a.b=h(y),a.opacity=g(y),a+""}}return i.gamma=n,i}(1);function Xs(n,t){return n=+n,t=+t,function(e){return n*(1-e)+t*e}}var Sy=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Cm=new RegExp(Sy.source,"g");function Sk(n){return function(){return n}}function bk(n){return function(t){return n(t)+""}}function xk(n,t){var e=Sy.lastIndex=Cm.lastIndex=0,i,a,l,c=-1,d=[],h=[];for(n=n+"",t=t+"";(i=Sy.exec(n))&&(a=Cm.exec(t));)(l=a.index)>e&&(l=t.slice(e,l),d[c]?d[c]+=l:d[++c]=l),(i=i[0])===(a=a[0])?d[c]?d[c]+=a:d[++c]=a:(d[++c]=null,h.push({i:c,x:Xs(i,a)})),e=Cm.lastIndex;return e<t.length&&(l=t.slice(e),d[c]?d[c]+=l:d[++c]=l),d.length<2?h[0]?bk(h[0].x):Sk(t):(t=h.length,function(g){for(var y=0,w;y<t;++y)d[(w=h[y]).i]=w.x(g);return d.join("")})}var ib=180/Math.PI,by={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ox(n,t,e,i,a,l){var c,d,h;return(c=Math.sqrt(n*n+t*t))&&(n/=c,t/=c),(h=n*e+t*i)&&(e-=n*h,i-=t*h),(d=Math.sqrt(e*e+i*i))&&(e/=d,i/=d,h/=d),n*i<t*e&&(n=-n,t=-t,h=-h,c=-c),{translateX:a,translateY:l,rotate:Math.atan2(t,n)*ib,skewX:Math.atan(h)*ib,scaleX:c,scaleY:d}}var If;function Tk(n){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(n+"");return t.isIdentity?by:Ox(t.a,t.b,t.c,t.d,t.e,t.f)}function Ak(n){return n==null||(If||(If=document.createElementNS("http://www.w3.org/2000/svg","g")),If.setAttribute("transform",n),!(n=If.transform.baseVal.consolidate()))?by:(n=n.matrix,Ox(n.a,n.b,n.c,n.d,n.e,n.f))}function Ix(n,t,e,i){function a(g){return g.length?g.pop()+" ":""}function l(g,y,w,v,S,x){if(g!==w||y!==v){var E=S.push("translate(",null,t,null,e);x.push({i:E-4,x:Xs(g,w)},{i:E-2,x:Xs(y,v)})}else(w||v)&&S.push("translate("+w+t+v+e)}function c(g,y,w,v){g!==y?(g-y>180?y+=360:y-g>180&&(g+=360),v.push({i:w.push(a(w)+"rotate(",null,i)-2,x:Xs(g,y)})):y&&w.push(a(w)+"rotate("+y+i)}function d(g,y,w,v){g!==y?v.push({i:w.push(a(w)+"skewX(",null,i)-2,x:Xs(g,y)}):y&&w.push(a(w)+"skewX("+y+i)}function h(g,y,w,v,S,x){if(g!==w||y!==v){var E=S.push(a(S)+"scale(",null,",",null,")");x.push({i:E-4,x:Xs(g,w)},{i:E-2,x:Xs(y,v)})}else(w!==1||v!==1)&&S.push(a(S)+"scale("+w+","+v+")")}return function(g,y){var w=[],v=[];return g=n(g),y=n(y),l(g.translateX,g.translateY,y.translateX,y.translateY,w,v),c(g.rotate,y.rotate,w,v),d(g.skewX,y.skewX,w,v),h(g.scaleX,g.scaleY,y.scaleX,y.scaleY,w,v),g=y=null,function(S){for(var x=-1,E=v.length,I;++x<E;)w[(I=v[x]).i]=I.x(S);return w.join("")}}}var Ek=Ix(Tk,"px, ","px)","deg)"),Nk=Ix(Ak,", ",")",")"),Dk=1e-12;function sb(n){return((n=Math.exp(n))+1/n)/2}function Ck(n){return((n=Math.exp(n))-1/n)/2}function kk(n){return((n=Math.exp(2*n))-1)/(n+1)}const Ok=function n(t,e,i){function a(l,c){var d=l[0],h=l[1],g=l[2],y=c[0],w=c[1],v=c[2],S=y-d,x=w-h,E=S*S+x*x,I,k;if(E<Dk)k=Math.log(v/g)/t,I=function(U){return[d+U*S,h+U*x,g*Math.exp(t*U*k)]};else{var z=Math.sqrt(E),N=(v*v-g*g+i*E)/(2*g*e*z),O=(v*v-g*g-i*E)/(2*v*e*z),_=Math.log(Math.sqrt(N*N+1)-N),J=Math.log(Math.sqrt(O*O+1)-O);k=(J-_)/t,I=function(U){var W=U*k,F=sb(_),nt=g/(e*z)*(F*kk(t*W+_)-Ck(_));return[d+nt*S,h+nt*x,g*F/sb(t*W+_)]}}return I.duration=k*1e3*t/Math.SQRT2,I}return a.rho=function(l){var c=Math.max(.001,+l),d=c*c,h=d*d;return n(c,d,h)},a}(Math.SQRT2,2,4);var tl=0,pu=0,gu=0,Rx=1e3,Ad,vu,Ed=0,Ua=0,Jd=0,Pu=typeof performance=="object"&&performance.now?performance:Date,Mx=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function rp(){return Ua||(Mx(Ik),Ua=Pu.now()+Jd)}function Ik(){Ua=0}function Nd(){this._call=this._time=this._next=null}Nd.prototype=Bx.prototype={constructor:Nd,restart:function(n,t,e){if(typeof n!="function")throw new TypeError("callback is not a function");e=(e==null?rp():+e)+(t==null?0:+t),!this._next&&vu!==this&&(vu?vu._next=this:Ad=this,vu=this),this._call=n,this._time=e,xy()},stop:function(){this._call&&(this._call=null,this._time=1/0,xy())}};function Bx(n,t,e){var i=new Nd;return i.restart(n,t,e),i}function Rk(){rp(),++tl;for(var n=Ad,t;n;)(t=Ua-n._time)>=0&&n._call.call(void 0,t),n=n._next;--tl}function ab(){Ua=(Ed=Pu.now())+Jd,tl=pu=0;try{Rk()}finally{tl=0,Bk(),Ua=0}}function Mk(){var n=Pu.now(),t=n-Ed;t>Rx&&(Jd-=t,Ed=n)}function Bk(){for(var n,t=Ad,e,i=1/0;t;)t._call?(i>t._time&&(i=t._time),n=t,t=t._next):(e=t._next,t._next=null,t=n?n._next=e:Ad=e);vu=n,xy(i)}function xy(n){if(!tl){pu&&(pu=clearTimeout(pu));var t=n-Ua;t>24?(n<1/0&&(pu=setTimeout(ab,n-Pu.now()-Jd)),gu&&(gu=clearInterval(gu))):(gu||(Ed=Pu.now(),gu=setInterval(Mk,Rx)),tl=1,Mx(ab))}}function ob(n,t,e){var i=new Nd;return t=t==null?0:+t,i.restart(a=>{i.stop(),n(a+t)},t,e),i}var zk=qd("start","end","cancel","interrupt"),Lk=[],zx=0,lb=1,Ty=2,jf=3,ub=4,Ay=5,Yf=6;function Hd(n,t,e,i,a,l){var c=n.__transition;if(!c)n.__transition={};else if(e in c)return;_k(n,e,{name:t,index:i,group:a,on:zk,tween:Lk,time:l.time,delay:l.delay,duration:l.duration,ease:l.ease,timer:null,state:zx})}function ip(n,t){var e=er(n,t);if(e.state>zx)throw new Error("too late; already scheduled");return e}function Dr(n,t){var e=er(n,t);if(e.state>jf)throw new Error("too late; already running");return e}function er(n,t){var e=n.__transition;if(!e||!(e=e[t]))throw new Error("transition not found");return e}function _k(n,t,e){var i=n.__transition,a;i[t]=e,e.timer=Bx(l,0,e.time);function l(g){e.state=lb,e.timer.restart(c,e.delay,e.time),e.delay<=g&&c(g-e.delay)}function c(g){var y,w,v,S;if(e.state!==lb)return h();for(y in i)if(S=i[y],S.name===e.name){if(S.state===jf)return ob(c);S.state===ub?(S.state=Yf,S.timer.stop(),S.on.call("interrupt",n,n.__data__,S.index,S.group),delete i[y]):+y<t&&(S.state=Yf,S.timer.stop(),S.on.call("cancel",n,n.__data__,S.index,S.group),delete i[y])}if(ob(function(){e.state===jf&&(e.state=ub,e.timer.restart(d,e.delay,e.time),d(g))}),e.state=Ty,e.on.call("start",n,n.__data__,e.index,e.group),e.state===Ty){for(e.state=jf,a=new Array(v=e.tween.length),y=0,w=-1;y<v;++y)(S=e.tween[y].value.call(n,n.__data__,e.index,e.group))&&(a[++w]=S);a.length=w+1}}function d(g){for(var y=g<e.duration?e.ease.call(null,g/e.duration):(e.timer.restart(h),e.state=Ay,1),w=-1,v=a.length;++w<v;)a[w].call(n,y);e.state===Ay&&(e.on.call("end",n,n.__data__,e.index,e.group),h())}function h(){e.state=Yf,e.timer.stop(),delete i[t];for(var g in i)return;delete n.__transition}}function Gf(n,t){var e=n.__transition,i,a,l=!0,c;if(e){t=t==null?null:t+"";for(c in e){if((i=e[c]).name!==t){l=!1;continue}a=i.state>Ty&&i.state<Ay,i.state=Yf,i.timer.stop(),i.on.call(a?"interrupt":"cancel",n,n.__data__,i.index,i.group),delete e[c]}l&&delete n.__transition}}function Uk(n){return this.each(function(){Gf(this,n)})}function qk(n,t){var e,i;return function(){var a=Dr(this,n),l=a.tween;if(l!==e){i=e=l;for(var c=0,d=i.length;c<d;++c)if(i[c].name===t){i=i.slice(),i.splice(c,1);break}}a.tween=i}}function Pk(n,t,e){var i,a;if(typeof e!="function")throw new Error;return function(){var l=Dr(this,n),c=l.tween;if(c!==i){a=(i=c).slice();for(var d={name:t,value:e},h=0,g=a.length;h<g;++h)if(a[h].name===t){a[h]=d;break}h===g&&a.push(d)}l.tween=a}}function Jk(n,t){var e=this._id;if(n+="",arguments.length<2){for(var i=er(this.node(),e).tween,a=0,l=i.length,c;a<l;++a)if((c=i[a]).name===n)return c.value;return null}return this.each((t==null?qk:Pk)(e,n,t))}function sp(n,t,e){var i=n._id;return n.each(function(){var a=Dr(this,i);(a.value||(a.value={}))[t]=e.apply(this,arguments)}),function(a){return er(a,i).value[t]}}function Lx(n,t){var e;return(typeof t=="number"?Xs:t instanceof qu?rb:(e=qu(t))?(t=e,rb):xk)(n,t)}function Hk(n){return function(){this.removeAttribute(n)}}function $k(n){return function(){this.removeAttributeNS(n.space,n.local)}}function Vk(n,t,e){var i,a=e+"",l;return function(){var c=this.getAttribute(n);return c===a?null:c===i?l:l=t(i=c,e)}}function jk(n,t,e){var i,a=e+"",l;return function(){var c=this.getAttributeNS(n.space,n.local);return c===a?null:c===i?l:l=t(i=c,e)}}function Yk(n,t,e){var i,a,l;return function(){var c,d=e(this),h;return d==null?void this.removeAttribute(n):(c=this.getAttribute(n),h=d+"",c===h?null:c===i&&h===a?l:(a=h,l=t(i=c,d)))}}function Gk(n,t,e){var i,a,l;return function(){var c,d=e(this),h;return d==null?void this.removeAttributeNS(n.space,n.local):(c=this.getAttributeNS(n.space,n.local),h=d+"",c===h?null:c===i&&h===a?l:(a=h,l=t(i=c,d)))}}function Xk(n,t){var e=Pd(n),i=e==="transform"?Nk:Lx;return this.attrTween(n,typeof t=="function"?(e.local?Gk:Yk)(e,i,sp(this,"attr."+n,t)):t==null?(e.local?$k:Hk)(e):(e.local?jk:Vk)(e,i,t))}function Kk(n,t){return function(e){this.setAttribute(n,t.call(this,e))}}function Fk(n,t){return function(e){this.setAttributeNS(n.space,n.local,t.call(this,e))}}function Zk(n,t){var e,i;function a(){var l=t.apply(this,arguments);return l!==i&&(e=(i=l)&&Fk(n,l)),e}return a._value=t,a}function Qk(n,t){var e,i;function a(){var l=t.apply(this,arguments);return l!==i&&(e=(i=l)&&Kk(n,l)),e}return a._value=t,a}function Wk(n,t){var e="attr."+n;if(arguments.length<2)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;var i=Pd(n);return this.tween(e,(i.local?Zk:Qk)(i,t))}function tO(n,t){return function(){ip(this,n).delay=+t.apply(this,arguments)}}function eO(n,t){return t=+t,function(){ip(this,n).delay=t}}function nO(n){var t=this._id;return arguments.length?this.each((typeof n=="function"?tO:eO)(t,n)):er(this.node(),t).delay}function rO(n,t){return function(){Dr(this,n).duration=+t.apply(this,arguments)}}function iO(n,t){return t=+t,function(){Dr(this,n).duration=t}}function sO(n){var t=this._id;return arguments.length?this.each((typeof n=="function"?rO:iO)(t,n)):er(this.node(),t).duration}function aO(n,t){if(typeof t!="function")throw new Error;return function(){Dr(this,n).ease=t}}function oO(n){var t=this._id;return arguments.length?this.each(aO(t,n)):er(this.node(),t).ease}function lO(n,t){return function(){var e=t.apply(this,arguments);if(typeof e!="function")throw new Error;Dr(this,n).ease=e}}function uO(n){if(typeof n!="function")throw new Error;return this.each(lO(this._id,n))}function cO(n){typeof n!="function"&&(n=hx(n));for(var t=this._groups,e=t.length,i=new Array(e),a=0;a<e;++a)for(var l=t[a],c=l.length,d=i[a]=[],h,g=0;g<c;++g)(h=l[g])&&n.call(h,h.__data__,g,l)&&d.push(h);return new us(i,this._parents,this._name,this._id)}function fO(n){if(n._id!==this._id)throw new Error;for(var t=this._groups,e=n._groups,i=t.length,a=e.length,l=Math.min(i,a),c=new Array(i),d=0;d<l;++d)for(var h=t[d],g=e[d],y=h.length,w=c[d]=new Array(y),v,S=0;S<y;++S)(v=h[S]||g[S])&&(w[S]=v);for(;d<i;++d)c[d]=t[d];return new us(c,this._parents,this._name,this._id)}function dO(n){return(n+"").trim().split(/^|\s+/).every(function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||t==="start"})}function hO(n,t,e){var i,a,l=dO(t)?ip:Dr;return function(){var c=l(this,n),d=c.on;d!==i&&(a=(i=d).copy()).on(t,e),c.on=a}}function gO(n,t){var e=this._id;return arguments.length<2?er(this.node(),e).on.on(n):this.each(hO(e,n,t))}function mO(n){return function(){var t=this.parentNode;for(var e in this.__transition)if(+e!==n)return;t&&t.removeChild(this)}}function yO(){return this.on("end.remove",mO(this._id))}function pO(n){var t=this._name,e=this._id;typeof n!="function"&&(n=tp(n));for(var i=this._groups,a=i.length,l=new Array(a),c=0;c<a;++c)for(var d=i[c],h=d.length,g=l[c]=new Array(h),y,w,v=0;v<h;++v)(y=d[v])&&(w=n.call(y,y.__data__,v,d))&&("__data__"in y&&(w.__data__=y.__data__),g[v]=w,Hd(g[v],t,e,v,g,er(y,e)));return new us(l,this._parents,t,e)}function vO(n){var t=this._name,e=this._id;typeof n!="function"&&(n=dx(n));for(var i=this._groups,a=i.length,l=[],c=[],d=0;d<a;++d)for(var h=i[d],g=h.length,y,w=0;w<g;++w)if(y=h[w]){for(var v=n.call(y,y.__data__,w,h),S,x=er(y,e),E=0,I=v.length;E<I;++E)(S=v[E])&&Hd(S,t,e,E,v,x);l.push(v),c.push(y)}return new us(l,c,t,e)}var wO=Qu.prototype.constructor;function SO(){return new wO(this._groups,this._parents)}function bO(n,t){var e,i,a;return function(){var l=Wo(this,n),c=(this.style.removeProperty(n),Wo(this,n));return l===c?null:l===e&&c===i?a:a=t(e=l,i=c)}}function _x(n){return function(){this.style.removeProperty(n)}}function xO(n,t,e){var i,a=e+"",l;return function(){var c=Wo(this,n);return c===a?null:c===i?l:l=t(i=c,e)}}function TO(n,t,e){var i,a,l;return function(){var c=Wo(this,n),d=e(this),h=d+"";return d==null&&(h=d=(this.style.removeProperty(n),Wo(this,n))),c===h?null:c===i&&h===a?l:(a=h,l=t(i=c,d))}}function AO(n,t){var e,i,a,l="style."+t,c="end."+l,d;return function(){var h=Dr(this,n),g=h.on,y=h.value[l]==null?d||(d=_x(t)):void 0;(g!==e||a!==y)&&(i=(e=g).copy()).on(c,a=y),h.on=i}}function EO(n,t,e){var i=(n+="")=="transform"?Ek:Lx;return t==null?this.styleTween(n,bO(n,i)).on("end.style."+n,_x(n)):typeof t=="function"?this.styleTween(n,TO(n,i,sp(this,"style."+n,t))).each(AO(this._id,n)):this.styleTween(n,xO(n,i,t),e).on("end.style."+n,null)}function NO(n,t,e){return function(i){this.style.setProperty(n,t.call(this,i),e)}}function DO(n,t,e){var i,a;function l(){var c=t.apply(this,arguments);return c!==a&&(i=(a=c)&&NO(n,c,e)),i}return l._value=t,l}function CO(n,t,e){var i="style."+(n+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(t==null)return this.tween(i,null);if(typeof t!="function")throw new Error;return this.tween(i,DO(n,t,e??""))}function kO(n){return function(){this.textContent=n}}function OO(n){return function(){var t=n(this);this.textContent=t??""}}function IO(n){return this.tween("text",typeof n=="function"?OO(sp(this,"text",n)):kO(n==null?"":n+""))}function RO(n){return function(t){this.textContent=n.call(this,t)}}function MO(n){var t,e;function i(){var a=n.apply(this,arguments);return a!==e&&(t=(e=a)&&RO(a)),t}return i._value=n,i}function BO(n){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(n==null)return this.tween(t,null);if(typeof n!="function")throw new Error;return this.tween(t,MO(n))}function zO(){for(var n=this._name,t=this._id,e=Ux(),i=this._groups,a=i.length,l=0;l<a;++l)for(var c=i[l],d=c.length,h,g=0;g<d;++g)if(h=c[g]){var y=er(h,t);Hd(h,n,e,g,c,{time:y.time+y.delay+y.duration,delay:0,duration:y.duration,ease:y.ease})}return new us(i,this._parents,n,e)}function LO(){var n,t,e=this,i=e._id,a=e.size();return new Promise(function(l,c){var d={value:c},h={value:function(){--a===0&&l()}};e.each(function(){var g=Dr(this,i),y=g.on;y!==n&&(t=(n=y).copy(),t._.cancel.push(d),t._.interrupt.push(d),t._.end.push(h)),g.on=t}),a===0&&l()})}var _O=0;function us(n,t,e,i){this._groups=n,this._parents=t,this._name=e,this._id=i}function Ux(){return++_O}var Yr=Qu.prototype;us.prototype={constructor:us,select:pO,selectAll:vO,selectChild:Yr.selectChild,selectChildren:Yr.selectChildren,filter:cO,merge:fO,selection:SO,transition:zO,call:Yr.call,nodes:Yr.nodes,node:Yr.node,size:Yr.size,empty:Yr.empty,each:Yr.each,on:gO,attr:Xk,attrTween:Wk,style:EO,styleTween:CO,text:IO,textTween:BO,remove:yO,tween:Jk,delay:nO,duration:sO,ease:oO,easeVarying:uO,end:LO,[Symbol.iterator]:Yr[Symbol.iterator]};function UO(n){return((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2}var qO={time:null,delay:0,duration:250,ease:UO};function PO(n,t){for(var e;!(e=n.__transition)||!(e=e[t]);)if(!(n=n.parentNode))throw new Error(`transition ${t} not found`);return e}function JO(n){var t,e;n instanceof us?(t=n._id,n=n._name):(t=Ux(),(e=qO).time=rp(),n=n==null?null:n+"");for(var i=this._groups,a=i.length,l=0;l<a;++l)for(var c=i[l],d=c.length,h,g=0;g<d;++g)(h=c[g])&&Hd(h,n,t,g,c,e||PO(h,t));return new us(i,this._parents,n,t)}Qu.prototype.interrupt=Uk;Qu.prototype.transition=JO;const Rf=n=>()=>n;function HO(n,{sourceEvent:t,target:e,transform:i,dispatch:a}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:e,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:a}})}function rs(n,t,e){this.k=n,this.x=t,this.y=e}rs.prototype={constructor:rs,scale:function(n){return n===1?this:new rs(this.k*n,this.x,this.y)},translate:function(n,t){return n===0&t===0?this:new rs(this.k,this.x+this.k*n,this.y+this.k*t)},apply:function(n){return[n[0]*this.k+this.x,n[1]*this.k+this.y]},applyX:function(n){return n*this.k+this.x},applyY:function(n){return n*this.k+this.y},invert:function(n){return[(n[0]-this.x)/this.k,(n[1]-this.y)/this.k]},invertX:function(n){return(n-this.x)/this.k},invertY:function(n){return(n-this.y)/this.k},rescaleX:function(n){return n.copy().domain(n.range().map(this.invertX,this).map(n.invert,n))},rescaleY:function(n){return n.copy().domain(n.range().map(this.invertY,this).map(n.invert,n))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var $d=new rs(1,0,0);qx.prototype=rs.prototype;function qx(n){for(;!n.__zoom;)if(!(n=n.parentNode))return $d;return n.__zoom}function km(n){n.stopImmediatePropagation()}function mu(n){n.preventDefault(),n.stopImmediatePropagation()}function $O(n){return(!n.ctrlKey||n.type==="wheel")&&!n.button}function VO(){var n=this;return n instanceof SVGElement?(n=n.ownerSVGElement||n,n.hasAttribute("viewBox")?(n=n.viewBox.baseVal,[[n.x,n.y],[n.x+n.width,n.y+n.height]]):[[0,0],[n.width.baseVal.value,n.height.baseVal.value]]):[[0,0],[n.clientWidth,n.clientHeight]]}function cb(){return this.__zoom||$d}function jO(n){return-n.deltaY*(n.deltaMode===1?.05:n.deltaMode?1:.002)*(n.ctrlKey?10:1)}function YO(){return navigator.maxTouchPoints||"ontouchstart"in this}function GO(n,t,e){var i=n.invertX(t[0][0])-e[0][0],a=n.invertX(t[1][0])-e[1][0],l=n.invertY(t[0][1])-e[0][1],c=n.invertY(t[1][1])-e[1][1];return n.translate(a>i?(i+a)/2:Math.min(0,i)||Math.max(0,a),c>l?(l+c)/2:Math.min(0,l)||Math.max(0,c))}function Px(){var n=$O,t=VO,e=GO,i=jO,a=YO,l=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],d=250,h=Ok,g=qd("start","zoom","end"),y,w,v,S=500,x=150,E=0,I=10;function k(R){R.property("__zoom",cb).on("wheel.zoom",W,{passive:!1}).on("mousedown.zoom",F).on("dblclick.zoom",nt).filter(a).on("touchstart.zoom",ft).on("touchmove.zoom",ot).on("touchend.zoom touchcancel.zoom",ct).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}k.transform=function(R,j,C,B){var H=R.selection?R.selection():R;H.property("__zoom",cb),R!==H?_(R,j,C,B):H.interrupt().each(function(){J(this,arguments).event(B).start().zoom(null,typeof j=="function"?j.apply(this,arguments):j).end()})},k.scaleBy=function(R,j,C,B){k.scaleTo(R,function(){var H=this.__zoom.k,q=typeof j=="function"?j.apply(this,arguments):j;return H*q},C,B)},k.scaleTo=function(R,j,C,B){k.transform(R,function(){var H=t.apply(this,arguments),q=this.__zoom,D=C==null?O(H):typeof C=="function"?C.apply(this,arguments):C,P=q.invert(D),tt=typeof j=="function"?j.apply(this,arguments):j;return e(N(z(q,tt),D,P),H,c)},C,B)},k.translateBy=function(R,j,C,B){k.transform(R,function(){return e(this.__zoom.translate(typeof j=="function"?j.apply(this,arguments):j,typeof C=="function"?C.apply(this,arguments):C),t.apply(this,arguments),c)},null,B)},k.translateTo=function(R,j,C,B,H){k.transform(R,function(){var q=t.apply(this,arguments),D=this.__zoom,P=B==null?O(q):typeof B=="function"?B.apply(this,arguments):B;return e($d.translate(P[0],P[1]).scale(D.k).translate(typeof j=="function"?-j.apply(this,arguments):-j,typeof C=="function"?-C.apply(this,arguments):-C),q,c)},B,H)};function z(R,j){return j=Math.max(l[0],Math.min(l[1],j)),j===R.k?R:new rs(j,R.x,R.y)}function N(R,j,C){var B=j[0]-C[0]*R.k,H=j[1]-C[1]*R.k;return B===R.x&&H===R.y?R:new rs(R.k,B,H)}function O(R){return[(+R[0][0]+ +R[1][0])/2,(+R[0][1]+ +R[1][1])/2]}function _(R,j,C,B){R.on("start.zoom",function(){J(this,arguments).event(B).start()}).on("interrupt.zoom end.zoom",function(){J(this,arguments).event(B).end()}).tween("zoom",function(){var H=this,q=arguments,D=J(H,q).event(B),P=t.apply(H,q),tt=C==null?O(P):typeof C=="function"?C.apply(H,q):C,rt=Math.max(P[1][0]-P[0][0],P[1][1]-P[0][1]),ut=H.__zoom,gt=typeof j=="function"?j.apply(H,q):j,dt=h(ut.invert(tt).concat(rt/ut.k),gt.invert(tt).concat(rt/gt.k));return function(yt){if(yt===1)yt=gt;else{var pt=dt(yt),Ct=rt/pt[2];yt=new rs(Ct,tt[0]-pt[0]*Ct,tt[1]-pt[1]*Ct)}D.zoom(null,yt)}})}function J(R,j,C){return!C&&R.__zooming||new U(R,j)}function U(R,j){this.that=R,this.args=j,this.active=0,this.sourceEvent=null,this.extent=t.apply(R,j),this.taps=0}U.prototype={event:function(R){return R&&(this.sourceEvent=R),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(R,j){return this.mouse&&R!=="mouse"&&(this.mouse[1]=j.invert(this.mouse[0])),this.touch0&&R!=="touch"&&(this.touch0[1]=j.invert(this.touch0[0])),this.touch1&&R!=="touch"&&(this.touch1[1]=j.invert(this.touch1[0])),this.that.__zoom=j,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(R){var j=gn(this.that).datum();g.call(R,this.that,new HO(R,{sourceEvent:this.sourceEvent,target:k,transform:this.that.__zoom,dispatch:g}),j)}};function W(R,...j){if(!n.apply(this,arguments))return;var C=J(this,j).event(R),B=this.__zoom,H=Math.max(l[0],Math.min(l[1],B.k*Math.pow(2,i.apply(this,arguments)))),q=Xn(R);if(C.wheel)(C.mouse[0][0]!==q[0]||C.mouse[0][1]!==q[1])&&(C.mouse[1]=B.invert(C.mouse[0]=q)),clearTimeout(C.wheel);else{if(B.k===H)return;C.mouse=[q,B.invert(q)],Gf(this),C.start()}mu(R),C.wheel=setTimeout(D,x),C.zoom("mouse",e(N(z(B,H),C.mouse[0],C.mouse[1]),C.extent,c));function D(){C.wheel=null,C.end()}}function F(R,...j){if(v||!n.apply(this,arguments))return;var C=R.currentTarget,B=J(this,j,!0).event(R),H=gn(R.view).on("mousemove.zoom",tt,!0).on("mouseup.zoom",rt,!0),q=Xn(R,C),D=R.clientX,P=R.clientY;Tx(R.view),km(R),B.mouse=[q,this.__zoom.invert(q)],Gf(this),B.start();function tt(ut){if(mu(ut),!B.moved){var gt=ut.clientX-D,dt=ut.clientY-P;B.moved=gt*gt+dt*dt>E}B.event(ut).zoom("mouse",e(N(B.that.__zoom,B.mouse[0]=Xn(ut,C),B.mouse[1]),B.extent,c))}function rt(ut){H.on("mousemove.zoom mouseup.zoom",null),Ax(ut.view,B.moved),mu(ut),B.event(ut).end()}}function nt(R,...j){if(n.apply(this,arguments)){var C=this.__zoom,B=Xn(R.changedTouches?R.changedTouches[0]:R,this),H=C.invert(B),q=C.k*(R.shiftKey?.5:2),D=e(N(z(C,q),B,H),t.apply(this,j),c);mu(R),d>0?gn(this).transition().duration(d).call(_,D,B,R):gn(this).call(k.transform,D,B,R)}}function ft(R,...j){if(n.apply(this,arguments)){var C=R.touches,B=C.length,H=J(this,j,R.changedTouches.length===B).event(R),q,D,P,tt;for(km(R),D=0;D<B;++D)P=C[D],tt=Xn(P,this),tt=[tt,this.__zoom.invert(tt),P.identifier],H.touch0?!H.touch1&&H.touch0[2]!==tt[2]&&(H.touch1=tt,H.taps=0):(H.touch0=tt,q=!0,H.taps=1+!!y);y&&(y=clearTimeout(y)),q&&(H.taps<2&&(w=tt[0],y=setTimeout(function(){y=null},S)),Gf(this),H.start())}}function ot(R,...j){if(this.__zooming){var C=J(this,j).event(R),B=R.changedTouches,H=B.length,q,D,P,tt;for(mu(R),q=0;q<H;++q)D=B[q],P=Xn(D,this),C.touch0&&C.touch0[2]===D.identifier?C.touch0[0]=P:C.touch1&&C.touch1[2]===D.identifier&&(C.touch1[0]=P);if(D=C.that.__zoom,C.touch1){var rt=C.touch0[0],ut=C.touch0[1],gt=C.touch1[0],dt=C.touch1[1],yt=(yt=gt[0]-rt[0])*yt+(yt=gt[1]-rt[1])*yt,pt=(pt=dt[0]-ut[0])*pt+(pt=dt[1]-ut[1])*pt;D=z(D,Math.sqrt(yt/pt)),P=[(rt[0]+gt[0])/2,(rt[1]+gt[1])/2],tt=[(ut[0]+dt[0])/2,(ut[1]+dt[1])/2]}else if(C.touch0)P=C.touch0[0],tt=C.touch0[1];else return;C.zoom("touch",e(N(D,P,tt),C.extent,c))}}function ct(R,...j){if(this.__zooming){var C=J(this,j).event(R),B=R.changedTouches,H=B.length,q,D;for(km(R),v&&clearTimeout(v),v=setTimeout(function(){v=null},S),q=0;q<H;++q)D=B[q],C.touch0&&C.touch0[2]===D.identifier?delete C.touch0:C.touch1&&C.touch1[2]===D.identifier&&delete C.touch1;if(C.touch1&&!C.touch0&&(C.touch0=C.touch1,delete C.touch1),C.touch0)C.touch0[1]=this.__zoom.invert(C.touch0[0]);else if(C.end(),C.taps===2&&(D=Xn(D,this),Math.hypot(w[0]-D[0],w[1]-D[1])<I)){var P=gn(this).on("dblclick.zoom");P&&P.apply(this,arguments)}}}return k.wheelDelta=function(R){return arguments.length?(i=typeof R=="function"?R:Rf(+R),k):i},k.filter=function(R){return arguments.length?(n=typeof R=="function"?R:Rf(!!R),k):n},k.touchable=function(R){return arguments.length?(a=typeof R=="function"?R:Rf(!!R),k):a},k.extent=function(R){return arguments.length?(t=typeof R=="function"?R:Rf([[+R[0][0],+R[0][1]],[+R[1][0],+R[1][1]]]),k):t},k.scaleExtent=function(R){return arguments.length?(l[0]=+R[0],l[1]=+R[1],k):[l[0],l[1]]},k.translateExtent=function(R){return arguments.length?(c[0][0]=+R[0][0],c[1][0]=+R[1][0],c[0][1]=+R[0][1],c[1][1]=+R[1][1],k):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},k.constrain=function(R){return arguments.length?(e=R,k):e},k.duration=function(R){return arguments.length?(d=+R,k):d},k.interpolate=function(R){return arguments.length?(h=R,k):h},k.on=function(){var R=g.on.apply(g,arguments);return R===g?k:R},k.clickDistance=function(R){return arguments.length?(E=(R=+R)*R,k):Math.sqrt(E)},k.tapDistance=function(R){return arguments.length?(I=+R,k):I},k}const Nr={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:n=>`Node type "${n}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:n=>`The old edge with id=${n} does not exist.`,error009:n=>`Marker type "${n}" doesn't exist.`,error008:(n,{id:t,sourceHandle:e,targetHandle:i})=>`Couldn't create edge for ${n} handle id: "${n==="source"?e:i}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:n=>`Edge type "${n}" not found. Using fallback type "default".`,error012:n=>`Node with id "${n}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(n="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${n}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},Ju=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Jx=["Enter"," ","Escape"];var el;(function(n){n.Strict="strict",n.Loose="loose"})(el||(el={}));var Ba;(function(n){n.Free="free",n.Vertical="vertical",n.Horizontal="horizontal"})(Ba||(Ba={}));var Hu;(function(n){n.Partial="partial",n.Full="full"})(Hu||(Hu={}));const Hx={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var Ks;(function(n){n.Bezier="default",n.Straight="straight",n.Step="step",n.SmoothStep="smoothstep",n.SimpleBezier="simplebezier"})(Ks||(Ks={}));var Dd;(function(n){n.Arrow="arrow",n.ArrowClosed="arrowclosed"})(Dd||(Dd={}));var Tt;(function(n){n.Left="left",n.Top="top",n.Right="right",n.Bottom="bottom"})(Tt||(Tt={}));const fb={[Tt.Left]:Tt.Right,[Tt.Right]:Tt.Left,[Tt.Top]:Tt.Bottom,[Tt.Bottom]:Tt.Top};function $x(n){return n===null?null:n?"valid":"invalid"}const Vx=n=>"id"in n&&"source"in n&&"target"in n,XO=n=>"id"in n&&"position"in n&&!("source"in n)&&!("target"in n),ap=n=>"id"in n&&"internals"in n&&!("source"in n)&&!("target"in n),tc=(n,t=[0,0])=>{const{width:e,height:i}=fs(n),a=n.origin??t,l=e*a[0],c=i*a[1];return{x:n.position.x-l,y:n.position.y-c}},KO=(n,t={nodeOrigin:[0,0],nodeLookup:void 0})=>{if(n.length===0)return{x:0,y:0,width:0,height:0};const e=n.reduce((i,a)=>{const l=typeof a=="string";let c=!t.nodeLookup&&!l?a:void 0;t.nodeLookup&&(c=l?t.nodeLookup.get(a):ap(a)?a:t.nodeLookup.get(a.id));const d=c?Cd(c,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return Vd(i,d)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return jd(e)},ec=(n,t={})=>{if(n.size===0)return{x:0,y:0,width:0,height:0};let e={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return n.forEach(i=>{if(t.filter===void 0||t.filter(i)){const a=Cd(i);e=Vd(e,a)}}),jd(e)},jx=(n,t,[e,i,a]=[0,0,1],l=!1,c=!1)=>{const d={...nc(t,[e,i,a]),width:t.width/a,height:t.height/a},h=[];for(const g of n.values()){const{measured:y,selectable:w=!0,hidden:v=!1}=g;if(c&&!w||v)continue;const S=y.width??g.width??g.initialWidth??null,x=y.height??g.height??g.initialHeight??null,E=$u(d,rl(g)),I=(S??0)*(x??0),k=l&&E>0;(!g.internals.handleBounds||k||E>=I||g.dragging)&&h.push(g)}return h},FO=(n,t)=>{const e=new Set;return n.forEach(i=>{e.add(i.id)}),t.filter(i=>e.has(i.source)||e.has(i.target))};function ZO(n,t){const e=new Map,i=t!=null&&t.nodes?new Set(t.nodes.map(a=>a.id)):null;return n.forEach(a=>{a.measured.width&&a.measured.height&&((t==null?void 0:t.includeHiddenNodes)||!a.hidden)&&(!i||i.has(a.id))&&e.set(a.id,a)}),e}async function QO({nodes:n,width:t,height:e,panZoom:i,minZoom:a,maxZoom:l},c){if(n.size===0)return Promise.resolve(!0);const d=ZO(n,c),h=ec(d),g=op(h,t,e,(c==null?void 0:c.minZoom)??a,(c==null?void 0:c.maxZoom)??l,(c==null?void 0:c.padding)??.1);return await i.setViewport(g,{duration:c==null?void 0:c.duration}),Promise.resolve(!0)}function Yx({nodeId:n,nextPosition:t,nodeLookup:e,nodeOrigin:i=[0,0],nodeExtent:a,onError:l}){const c=e.get(n),d=c.parentId?e.get(c.parentId):void 0,{x:h,y:g}=d?d.internals.positionAbsolute:{x:0,y:0},y=c.origin??i;let w=a;if(c.extent==="parent"&&!c.expandParent)if(!d)l==null||l("005",Nr.error005());else{const S=d.measured.width,x=d.measured.height;S&&x&&(w=[[h,g],[h+S,g+x]])}else d&&il(c.extent)&&(w=[[c.extent[0][0]+h,c.extent[0][1]+g],[c.extent[1][0]+h,c.extent[1][1]+g]]);const v=il(w)?qa(t,w,c.measured):t;return(c.measured.width===void 0||c.measured.height===void 0)&&(l==null||l("015",Nr.error015())),{position:{x:v.x-h+(c.measured.width??0)*y[0],y:v.y-g+(c.measured.height??0)*y[1]},positionAbsolute:v}}async function WO({nodesToRemove:n=[],edgesToRemove:t=[],nodes:e,edges:i,onBeforeDelete:a}){const l=new Set(n.map(v=>v.id)),c=[];for(const v of e){if(v.deletable===!1)continue;const S=l.has(v.id),x=!S&&v.parentId&&c.find(E=>E.id===v.parentId);(S||x)&&c.push(v)}const d=new Set(t.map(v=>v.id)),h=i.filter(v=>v.deletable!==!1),y=FO(c,h);for(const v of h)d.has(v.id)&&!y.find(x=>x.id===v.id)&&y.push(v);if(!a)return{edges:y,nodes:c};const w=await a({nodes:c,edges:y});return typeof w=="boolean"?w?{edges:y,nodes:c}:{edges:[],nodes:[]}:w}const nl=(n,t=0,e=1)=>Math.min(Math.max(n,t),e),qa=(n={x:0,y:0},t,e)=>({x:nl(n.x,t[0][0],t[1][0]-((e==null?void 0:e.width)??0)),y:nl(n.y,t[0][1],t[1][1]-((e==null?void 0:e.height)??0))});function Gx(n,t,e){const{width:i,height:a}=fs(e),{x:l,y:c}=e.internals.positionAbsolute;return qa(n,[[l,c],[l+i,c+a]],t)}const db=(n,t,e)=>n<t?nl(Math.abs(n-t),1,t)/t:n>e?-nl(Math.abs(n-e),1,t)/t:0,Xx=(n,t,e=15,i=40)=>{const a=db(n.x,i,t.width-i)*e,l=db(n.y,i,t.height-i)*e;return[a,l]},Vd=(n,t)=>({x:Math.min(n.x,t.x),y:Math.min(n.y,t.y),x2:Math.max(n.x2,t.x2),y2:Math.max(n.y2,t.y2)}),Ey=({x:n,y:t,width:e,height:i})=>({x:n,y:t,x2:n+e,y2:t+i}),jd=({x:n,y:t,x2:e,y2:i})=>({x:n,y:t,width:e-n,height:i-t}),rl=(n,t=[0,0])=>{var a,l;const{x:e,y:i}=ap(n)?n.internals.positionAbsolute:tc(n,t);return{x:e,y:i,width:((a=n.measured)==null?void 0:a.width)??n.width??n.initialWidth??0,height:((l=n.measured)==null?void 0:l.height)??n.height??n.initialHeight??0}},Cd=(n,t=[0,0])=>{var a,l;const{x:e,y:i}=ap(n)?n.internals.positionAbsolute:tc(n,t);return{x:e,y:i,x2:e+(((a=n.measured)==null?void 0:a.width)??n.width??n.initialWidth??0),y2:i+(((l=n.measured)==null?void 0:l.height)??n.height??n.initialHeight??0)}},Kx=(n,t)=>jd(Vd(Ey(n),Ey(t))),$u=(n,t)=>{const e=Math.max(0,Math.min(n.x+n.width,t.x+t.width)-Math.max(n.x,t.x)),i=Math.max(0,Math.min(n.y+n.height,t.y+t.height)-Math.max(n.y,t.y));return Math.ceil(e*i)},hb=n=>Qn(n.width)&&Qn(n.height)&&Qn(n.x)&&Qn(n.y),Qn=n=>!isNaN(n)&&isFinite(n),tI=(n,t)=>{},Yd=(n,t=[1,1])=>({x:t[0]*Math.round(n.x/t[0]),y:t[1]*Math.round(n.y/t[1])}),nc=({x:n,y:t},[e,i,a],l=!1,c=[1,1])=>{const d={x:(n-e)/a,y:(t-i)/a};return l?Yd(d,c):d},kd=({x:n,y:t},[e,i,a])=>({x:n*a+e,y:t*a+i});function Ro(n,t){if(typeof n=="number")return Math.floor(t-t/(1+n));if(typeof n=="string"&&n.endsWith("px")){const e=parseFloat(n);if(!Number.isNaN(e))return Math.floor(e)}if(typeof n=="string"&&n.endsWith("%")){const e=parseFloat(n);if(!Number.isNaN(e))return Math.floor(t*e*.01)}return console.error(`[React Flow] The padding value "${n}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function eI(n,t,e){if(typeof n=="string"||typeof n=="number"){const i=Ro(n,e),a=Ro(n,t);return{top:i,right:a,bottom:i,left:a,x:a*2,y:i*2}}if(typeof n=="object"){const i=Ro(n.top??n.y??0,e),a=Ro(n.bottom??n.y??0,e),l=Ro(n.left??n.x??0,t),c=Ro(n.right??n.x??0,t);return{top:i,right:c,bottom:a,left:l,x:l+c,y:i+a}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function nI(n,t,e,i,a,l){const{x:c,y:d}=kd(n,[t,e,i]),{x:h,y:g}=kd({x:n.x+n.width,y:n.y+n.height},[t,e,i]),y=a-h,w=l-g;return{left:Math.floor(c),top:Math.floor(d),right:Math.floor(y),bottom:Math.floor(w)}}const op=(n,t,e,i,a,l)=>{const c=eI(l,t,e),d=(t-c.x)/n.width,h=(e-c.y)/n.height,g=Math.min(d,h),y=nl(g,i,a),w=n.x+n.width/2,v=n.y+n.height/2,S=t/2-w*y,x=e/2-v*y,E=nI(n,S,x,y,t,e),I={left:Math.min(E.left-c.left,0),top:Math.min(E.top-c.top,0),right:Math.min(E.right-c.right,0),bottom:Math.min(E.bottom-c.bottom,0)};return{x:S-I.left+I.right,y:x-I.top+I.bottom,zoom:y}},Od=()=>{var n;return typeof navigator<"u"&&((n=navigator==null?void 0:navigator.userAgent)==null?void 0:n.indexOf("Mac"))>=0};function il(n){return n!==void 0&&n!=="parent"}function fs(n){var t,e;return{width:((t=n.measured)==null?void 0:t.width)??n.width??n.initialWidth??0,height:((e=n.measured)==null?void 0:e.height)??n.height??n.initialHeight??0}}function Fx(n){var t,e;return(((t=n.measured)==null?void 0:t.width)??n.width??n.initialWidth)!==void 0&&(((e=n.measured)==null?void 0:e.height)??n.height??n.initialHeight)!==void 0}function Zx(n,t={width:0,height:0},e,i,a){const l={...n},c=i.get(e);if(c){const d=c.origin||a;l.x+=c.internals.positionAbsolute.x-(t.width??0)*d[0],l.y+=c.internals.positionAbsolute.y-(t.height??0)*d[1]}return l}function gb(n,t){if(n.size!==t.size)return!1;for(const e of n)if(!t.has(e))return!1;return!0}function Au(n,{snapGrid:t=[0,0],snapToGrid:e=!1,transform:i,containerBounds:a}){const{x:l,y:c}=as(n),d=nc({x:l-((a==null?void 0:a.left)??0),y:c-((a==null?void 0:a.top)??0)},i),{x:h,y:g}=e?Yd(d,t):d;return{xSnapped:h,ySnapped:g,...d}}const lp=n=>({width:n.offsetWidth,height:n.offsetHeight}),Qx=n=>{var t;return((t=n==null?void 0:n.getRootNode)==null?void 0:t.call(n))||(window==null?void 0:window.document)},rI=["INPUT","SELECT","TEXTAREA"];function Wx(n){var i,a;const t=((a=(i=n.composedPath)==null?void 0:i.call(n))==null?void 0:a[0])||n.target;return(t==null?void 0:t.nodeType)!==1?!1:rI.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey")}const tT=n=>"clientX"in n,as=(n,t)=>{var l,c;const e=tT(n),i=e?n.clientX:(l=n.touches)==null?void 0:l[0].clientX,a=e?n.clientY:(c=n.touches)==null?void 0:c[0].clientY;return{x:i-((t==null?void 0:t.left)??0),y:a-((t==null?void 0:t.top)??0)}},mb=(n,t,e,i,a)=>{const l=t.querySelectorAll(`.${n}`);return!l||!l.length?null:Array.from(l).map(c=>{const d=c.getBoundingClientRect();return{id:c.getAttribute("data-handleid"),type:n,nodeId:a,position:c.getAttribute("data-handlepos"),x:(d.left-e.left)/i,y:(d.top-e.top)/i,...lp(c)}})};function eT({sourceX:n,sourceY:t,targetX:e,targetY:i,sourceControlX:a,sourceControlY:l,targetControlX:c,targetControlY:d}){const h=n*.125+a*.375+c*.375+e*.125,g=t*.125+l*.375+d*.375+i*.125,y=Math.abs(h-n),w=Math.abs(g-t);return[h,g,y,w]}function Mf(n,t){return n>=0?.5*n:t*25*Math.sqrt(-n)}function yb({pos:n,x1:t,y1:e,x2:i,y2:a,c:l}){switch(n){case Tt.Left:return[t-Mf(t-i,l),e];case Tt.Right:return[t+Mf(i-t,l),e];case Tt.Top:return[t,e-Mf(e-a,l)];case Tt.Bottom:return[t,e+Mf(a-e,l)]}}function nT({sourceX:n,sourceY:t,sourcePosition:e=Tt.Bottom,targetX:i,targetY:a,targetPosition:l=Tt.Top,curvature:c=.25}){const[d,h]=yb({pos:e,x1:n,y1:t,x2:i,y2:a,c}),[g,y]=yb({pos:l,x1:i,y1:a,x2:n,y2:t,c}),[w,v,S,x]=eT({sourceX:n,sourceY:t,targetX:i,targetY:a,sourceControlX:d,sourceControlY:h,targetControlX:g,targetControlY:y});return[`M${n},${t} C${d},${h} ${g},${y} ${i},${a}`,w,v,S,x]}function rT({sourceX:n,sourceY:t,targetX:e,targetY:i}){const a=Math.abs(e-n)/2,l=e<n?e+a:e-a,c=Math.abs(i-t)/2,d=i<t?i+c:i-c;return[l,d,a,c]}function iI({sourceNode:n,targetNode:t,selected:e=!1,zIndex:i=0,elevateOnSelect:a=!1}){if(!a)return i;const l=e||t.selected||n.selected,c=Math.max(n.internals.z||0,t.internals.z||0,1e3);return i+(l?c:0)}function sI({sourceNode:n,targetNode:t,width:e,height:i,transform:a}){const l=Vd(Cd(n),Cd(t));l.x===l.x2&&(l.x2+=1),l.y===l.y2&&(l.y2+=1);const c={x:-a[0]/a[2],y:-a[1]/a[2],width:e/a[2],height:i/a[2]};return $u(c,jd(l))>0}const aI=({source:n,sourceHandle:t,target:e,targetHandle:i})=>`xy-edge__${n}${t||""}-${e}${i||""}`,oI=(n,t)=>t.some(e=>e.source===n.source&&e.target===n.target&&(e.sourceHandle===n.sourceHandle||!e.sourceHandle&&!n.sourceHandle)&&(e.targetHandle===n.targetHandle||!e.targetHandle&&!n.targetHandle)),lI=(n,t)=>{if(!n.source||!n.target)return t;let e;return Vx(n)?e={...n}:e={...n,id:aI(n)},oI(e,t)?t:(e.sourceHandle===null&&delete e.sourceHandle,e.targetHandle===null&&delete e.targetHandle,t.concat(e))};function iT({sourceX:n,sourceY:t,targetX:e,targetY:i}){const[a,l,c,d]=rT({sourceX:n,sourceY:t,targetX:e,targetY:i});return[`M ${n},${t}L ${e},${i}`,a,l,c,d]}const pb={[Tt.Left]:{x:-1,y:0},[Tt.Right]:{x:1,y:0},[Tt.Top]:{x:0,y:-1},[Tt.Bottom]:{x:0,y:1}},uI=({source:n,sourcePosition:t=Tt.Bottom,target:e})=>t===Tt.Left||t===Tt.Right?n.x<e.x?{x:1,y:0}:{x:-1,y:0}:n.y<e.y?{x:0,y:1}:{x:0,y:-1},vb=(n,t)=>Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2));function cI({source:n,sourcePosition:t=Tt.Bottom,target:e,targetPosition:i=Tt.Top,center:a,offset:l}){const c=pb[t],d=pb[i],h={x:n.x+c.x*l,y:n.y+c.y*l},g={x:e.x+d.x*l,y:e.y+d.y*l},y=uI({source:h,sourcePosition:t,target:g}),w=y.x!==0?"x":"y",v=y[w];let S=[],x,E;const I={x:0,y:0},k={x:0,y:0},[z,N,O,_]=rT({sourceX:n.x,sourceY:n.y,targetX:e.x,targetY:e.y});if(c[w]*d[w]===-1){x=a.x??z,E=a.y??N;const U=[{x,y:h.y},{x,y:g.y}],W=[{x:h.x,y:E},{x:g.x,y:E}];c[w]===v?S=w==="x"?U:W:S=w==="x"?W:U}else{const U=[{x:h.x,y:g.y}],W=[{x:g.x,y:h.y}];if(w==="x"?S=c.x===v?W:U:S=c.y===v?U:W,t===i){const ct=Math.abs(n[w]-e[w]);if(ct<=l){const R=Math.min(l-1,l-ct);c[w]===v?I[w]=(h[w]>n[w]?-1:1)*R:k[w]=(g[w]>e[w]?-1:1)*R}}if(t!==i){const ct=w==="x"?"y":"x",R=c[w]===d[ct],j=h[ct]>g[ct],C=h[ct]<g[ct];(c[w]===1&&(!R&&j||R&&C)||c[w]!==1&&(!R&&C||R&&j))&&(S=w==="x"?U:W)}const F={x:h.x+I.x,y:h.y+I.y},nt={x:g.x+k.x,y:g.y+k.y},ft=Math.max(Math.abs(F.x-S[0].x),Math.abs(nt.x-S[0].x)),ot=Math.max(Math.abs(F.y-S[0].y),Math.abs(nt.y-S[0].y));ft>=ot?(x=(F.x+nt.x)/2,E=S[0].y):(x=S[0].x,E=(F.y+nt.y)/2)}return[[n,{x:h.x+I.x,y:h.y+I.y},...S,{x:g.x+k.x,y:g.y+k.y},e],x,E,O,_]}function fI(n,t,e,i){const a=Math.min(vb(n,t)/2,vb(t,e)/2,i),{x:l,y:c}=t;if(n.x===l&&l===e.x||n.y===c&&c===e.y)return`L${l} ${c}`;if(n.y===c){const g=n.x<e.x?-1:1,y=n.y<e.y?1:-1;return`L ${l+a*g},${c}Q ${l},${c} ${l},${c+a*y}`}const d=n.x<e.x?1:-1,h=n.y<e.y?-1:1;return`L ${l},${c+a*h}Q ${l},${c} ${l+a*d},${c}`}function Ny({sourceX:n,sourceY:t,sourcePosition:e=Tt.Bottom,targetX:i,targetY:a,targetPosition:l=Tt.Top,borderRadius:c=5,centerX:d,centerY:h,offset:g=20}){const[y,w,v,S,x]=cI({source:{x:n,y:t},sourcePosition:e,target:{x:i,y:a},targetPosition:l,center:{x:d,y:h},offset:g});return[y.reduce((I,k,z)=>{let N="";return z>0&&z<y.length-1?N=fI(y[z-1],k,y[z+1],c):N=`${z===0?"M":"L"}${k.x} ${k.y}`,I+=N,I},""),w,v,S,x]}function wb(n){var t;return n&&!!(n.internals.handleBounds||(t=n.handles)!=null&&t.length)&&!!(n.measured.width||n.width||n.initialWidth)}function dI(n){var w;const{sourceNode:t,targetNode:e}=n;if(!wb(t)||!wb(e))return null;const i=t.internals.handleBounds||Sb(t.handles),a=e.internals.handleBounds||Sb(e.handles),l=bb((i==null?void 0:i.source)??[],n.sourceHandle),c=bb(n.connectionMode===el.Strict?(a==null?void 0:a.target)??[]:((a==null?void 0:a.target)??[]).concat((a==null?void 0:a.source)??[]),n.targetHandle);if(!l||!c)return(w=n.onError)==null||w.call(n,"008",Nr.error008(l?"target":"source",{id:n.id,sourceHandle:n.sourceHandle,targetHandle:n.targetHandle})),null;const d=(l==null?void 0:l.position)||Tt.Bottom,h=(c==null?void 0:c.position)||Tt.Top,g=Vu(t,l,d),y=Vu(e,c,h);return{sourceX:g.x,sourceY:g.y,targetX:y.x,targetY:y.y,sourcePosition:d,targetPosition:h}}function Sb(n){if(!n)return null;const t=[],e=[];for(const i of n)i.width=i.width??1,i.height=i.height??1,i.type==="source"?t.push(i):i.type==="target"&&e.push(i);return{source:t,target:e}}function Vu(n,t,e=Tt.Left,i=!1){const a=((t==null?void 0:t.x)??0)+n.internals.positionAbsolute.x,l=((t==null?void 0:t.y)??0)+n.internals.positionAbsolute.y,{width:c,height:d}=t??fs(n);if(i)return{x:a+c/2,y:l+d/2};switch((t==null?void 0:t.position)??e){case Tt.Top:return{x:a+c/2,y:l};case Tt.Right:return{x:a+c,y:l+d/2};case Tt.Bottom:return{x:a+c/2,y:l+d};case Tt.Left:return{x:a,y:l+d/2}}}function bb(n,t){return n&&(t?n.find(e=>e.id===t):n[0])||null}function Dy(n,t){return n?typeof n=="string"?n:`${t?`${t}__`:""}${Object.keys(n).sort().map(i=>`${i}=${n[i]}`).join("&")}`:""}function hI(n,{id:t,defaultColor:e,defaultMarkerStart:i,defaultMarkerEnd:a}){const l=new Set;return n.reduce((c,d)=>([d.markerStart||i,d.markerEnd||a].forEach(h=>{if(h&&typeof h=="object"){const g=Dy(h,t);l.has(g)||(c.push({id:g,color:h.color||e,...h}),l.add(g))}}),c),[]).sort((c,d)=>c.id.localeCompare(d.id))}const up={nodeOrigin:[0,0],nodeExtent:Ju,elevateNodesOnSelect:!0,defaults:{}},gI={...up,checkEquality:!0};function cp(n,t){const e={...n};for(const i in t)t[i]!==void 0&&(e[i]=t[i]);return e}function mI(n,t,e){const i=cp(up,e);for(const a of n.values())if(a.parentId)fp(a,n,t,i);else{const l=tc(a,i.nodeOrigin),c=il(a.extent)?a.extent:i.nodeExtent,d=qa(l,c,fs(a));a.internals.positionAbsolute=d}}function Cy(n,t,e,i){var h,g;const a=cp(gI,i);let l=!0;const c=new Map(t),d=a!=null&&a.elevateNodesOnSelect?1e3:0;t.clear(),e.clear();for(const y of n){let w=c.get(y.id);if(a.checkEquality&&y===(w==null?void 0:w.internals.userNode))t.set(y.id,w);else{const v=tc(y,a.nodeOrigin),S=il(y.extent)?y.extent:a.nodeExtent,x=qa(v,S,fs(y));w={...a.defaults,...y,measured:{width:(h=y.measured)==null?void 0:h.width,height:(g=y.measured)==null?void 0:g.height},internals:{positionAbsolute:x,handleBounds:y.measured?w==null?void 0:w.internals.handleBounds:void 0,z:sT(y,d),userNode:y}},t.set(y.id,w)}(!w.measured||!w.measured.width||!w.measured.height)&&!w.hidden&&(l=!1),y.parentId&&fp(w,t,e,i)}return l}function yI(n,t){if(!n.parentId)return;const e=t.get(n.parentId);e?e.set(n.id,n):t.set(n.parentId,new Map([[n.id,n]]))}function fp(n,t,e,i){const{elevateNodesOnSelect:a,nodeOrigin:l,nodeExtent:c}=cp(up,i),d=n.parentId,h=t.get(d);if(!h){console.warn(`Parent node ${d} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}yI(n,e);const g=a?1e3:0,{x:y,y:w,z:v}=pI(n,h,l,c,g),{positionAbsolute:S}=n.internals,x=y!==S.x||w!==S.y;(x||v!==n.internals.z)&&t.set(n.id,{...n,internals:{...n.internals,positionAbsolute:x?{x:y,y:w}:S,z:v}})}function sT(n,t){return(Qn(n.zIndex)?n.zIndex:0)+(n.selected?t:0)}function pI(n,t,e,i,a){const{x:l,y:c}=t.internals.positionAbsolute,d=fs(n),h=tc(n,e),g=il(n.extent)?qa(h,n.extent,d):h;let y=qa({x:l+g.x,y:c+g.y},i,d);n.extent==="parent"&&(y=Gx(y,d,t));const w=sT(n,a),v=t.internals.z??0;return{x:y.x,y:y.y,z:v>w?v:w}}function dp(n,t,e,i=[0,0]){var c;const a=[],l=new Map;for(const d of n){const h=t.get(d.parentId);if(!h)continue;const g=((c=l.get(d.parentId))==null?void 0:c.expandedRect)??rl(h),y=Kx(g,d.rect);l.set(d.parentId,{expandedRect:y,parent:h})}return l.size>0&&l.forEach(({expandedRect:d,parent:h},g)=>{var N;const y=h.internals.positionAbsolute,w=fs(h),v=h.origin??i,S=d.x<y.x?Math.round(Math.abs(y.x-d.x)):0,x=d.y<y.y?Math.round(Math.abs(y.y-d.y)):0,E=Math.max(w.width,Math.round(d.width)),I=Math.max(w.height,Math.round(d.height)),k=(E-w.width)*v[0],z=(I-w.height)*v[1];(S>0||x>0||k||z)&&(a.push({id:g,type:"position",position:{x:h.position.x-S+k,y:h.position.y-x+z}}),(N=e.get(g))==null||N.forEach(O=>{n.some(_=>_.id===O.id)||a.push({id:O.id,type:"position",position:{x:O.position.x+S,y:O.position.y+x}})})),(w.width<d.width||w.height<d.height||S||x)&&a.push({id:g,type:"dimensions",setAttributes:!0,dimensions:{width:E+(S?v[0]*S-k:0),height:I+(x?v[1]*x-z:0)}})}),a}function vI(n,t,e,i,a,l){const c=i==null?void 0:i.querySelector(".xyflow__viewport");let d=!1;if(!c)return{changes:[],updatedInternals:d};const h=[],g=window.getComputedStyle(c),{m22:y}=new window.DOMMatrixReadOnly(g.transform),w=[];for(const v of n.values()){const S=t.get(v.id);if(!S)continue;if(S.hidden){t.set(S.id,{...S,internals:{...S.internals,handleBounds:void 0}}),d=!0;continue}const x=lp(v.nodeElement),E=S.measured.width!==x.width||S.measured.height!==x.height;if(!!(x.width&&x.height&&(E||!S.internals.handleBounds||v.force))){const k=v.nodeElement.getBoundingClientRect(),z=il(S.extent)?S.extent:l;let{positionAbsolute:N}=S.internals;S.parentId&&S.extent==="parent"?N=Gx(N,x,t.get(S.parentId)):z&&(N=qa(N,z,x));const O={...S,measured:x,internals:{...S.internals,positionAbsolute:N,handleBounds:{source:mb("source",v.nodeElement,k,y,S.id),target:mb("target",v.nodeElement,k,y,S.id)}}};t.set(S.id,O),S.parentId&&fp(O,t,e,{nodeOrigin:a}),d=!0,E&&(h.push({id:S.id,type:"dimensions",dimensions:x}),S.expandParent&&S.parentId&&w.push({id:S.id,parentId:S.parentId,rect:rl(O,a)}))}}if(w.length>0){const v=dp(w,t,e,a);h.push(...v)}return{changes:h,updatedInternals:d}}async function wI({delta:n,panZoom:t,transform:e,translateExtent:i,width:a,height:l}){if(!t||!n.x&&!n.y)return Promise.resolve(!1);const c=await t.setViewportConstrained({x:e[0]+n.x,y:e[1]+n.y,zoom:e[2]},[[0,0],[a,l]],i),d=!!c&&(c.x!==e[0]||c.y!==e[1]||c.k!==e[2]);return Promise.resolve(d)}function xb(n,t,e,i,a,l){let c=a;const d=i.get(c)||new Map;i.set(c,d.set(e,t)),c=`${a}-${n}`;const h=i.get(c)||new Map;if(i.set(c,h.set(e,t)),l){c=`${a}-${n}-${l}`;const g=i.get(c)||new Map;i.set(c,g.set(e,t))}}function aT(n,t,e){n.clear(),t.clear();for(const i of e){const{source:a,target:l,sourceHandle:c=null,targetHandle:d=null}=i,h={edgeId:i.id,source:a,target:l,sourceHandle:c,targetHandle:d},g=`${a}-${c}--${l}-${d}`,y=`${l}-${d}--${a}-${c}`;xb("source",h,y,n,a,c),xb("target",h,g,n,l,d),t.set(i.id,i)}}function oT(n,t){if(!n.parentId)return!1;const e=t.get(n.parentId);return e?e.selected?!0:oT(e,t):!1}function Tb(n,t,e){var a;let i=n;do{if((a=i==null?void 0:i.matches)!=null&&a.call(i,t))return!0;if(i===e)return!1;i=i==null?void 0:i.parentElement}while(i);return!1}function SI(n,t,e,i){const a=new Map;for(const[l,c]of n)if((c.selected||c.id===i)&&(!c.parentId||!oT(c,n))&&(c.draggable||t&&typeof c.draggable>"u")){const d=n.get(l);d&&a.set(l,{id:l,position:d.position||{x:0,y:0},distance:{x:e.x-d.internals.positionAbsolute.x,y:e.y-d.internals.positionAbsolute.y},extent:d.extent,parentId:d.parentId,origin:d.origin,expandParent:d.expandParent,internals:{positionAbsolute:d.internals.positionAbsolute||{x:0,y:0}},measured:{width:d.measured.width??0,height:d.measured.height??0}})}return a}function Om({nodeId:n,dragItems:t,nodeLookup:e,dragging:i=!0}){var c,d,h;const a=[];for(const[g,y]of t){const w=(c=e.get(g))==null?void 0:c.internals.userNode;w&&a.push({...w,position:y.position,dragging:i})}if(!n)return[a[0],a];const l=(d=e.get(n))==null?void 0:d.internals.userNode;return[l?{...l,position:((h=t.get(n))==null?void 0:h.position)||l.position,dragging:i}:a[0],a]}function bI({onNodeMouseDown:n,getStoreItems:t,onDragStart:e,onDrag:i,onDragStop:a}){let l={x:null,y:null},c=0,d=new Map,h=!1,g={x:0,y:0},y=null,w=!1,v=null,S=!1;function x({noDragClassName:I,handleSelector:k,domNode:z,isSelectable:N,nodeId:O,nodeClickDistance:_=0}){v=gn(z);function J({x:nt,y:ft},ot){const{nodeLookup:ct,nodeExtent:R,snapGrid:j,snapToGrid:C,nodeOrigin:B,onNodeDrag:H,onSelectionDrag:q,onError:D,updateNodePositions:P}=t();l={x:nt,y:ft};let tt=!1,rt={x:0,y:0,x2:0,y2:0};if(d.size>1&&R){const ut=ec(d);rt=Ey(ut)}for(const[ut,gt]of d){if(!ct.has(ut))continue;let dt={x:nt-gt.distance.x,y:ft-gt.distance.y};C&&(dt=Yd(dt,j));let yt=[[R[0][0],R[0][1]],[R[1][0],R[1][1]]];if(d.size>1&&R&&!gt.extent){const{positionAbsolute:Vt}=gt.internals,Ot=Vt.x-rt.x+R[0][0],bt=Vt.x+gt.measured.width-rt.x2+R[1][0],Yt=Vt.y-rt.y+R[0][1],qt=Vt.y+gt.measured.height-rt.y2+R[1][1];yt=[[Ot,Yt],[bt,qt]]}const{position:pt,positionAbsolute:Ct}=Yx({nodeId:ut,nextPosition:dt,nodeLookup:ct,nodeExtent:yt,nodeOrigin:B,onError:D});tt=tt||gt.position.x!==pt.x||gt.position.y!==pt.y,gt.position=pt,gt.internals.positionAbsolute=Ct}if(tt&&(P(d,!0),ot&&(i||H||!O&&q))){const[ut,gt]=Om({nodeId:O,dragItems:d,nodeLookup:ct});i==null||i(ot,d,ut,gt),H==null||H(ot,ut,gt),O||q==null||q(ot,gt)}}async function U(){if(!y)return;const{transform:nt,panBy:ft,autoPanSpeed:ot,autoPanOnNodeDrag:ct}=t();if(!ct){h=!1,cancelAnimationFrame(c);return}const[R,j]=Xx(g,y,ot);(R!==0||j!==0)&&(l.x=(l.x??0)-R/nt[2],l.y=(l.y??0)-j/nt[2],await ft({x:R,y:j})&&J(l,null)),c=requestAnimationFrame(U)}function W(nt){var tt;const{nodeLookup:ft,multiSelectionActive:ot,nodesDraggable:ct,transform:R,snapGrid:j,snapToGrid:C,selectNodesOnDrag:B,onNodeDragStart:H,onSelectionDragStart:q,unselectNodesAndEdges:D}=t();w=!0,(!B||!N)&&!ot&&O&&((tt=ft.get(O))!=null&&tt.selected||D()),N&&B&&O&&(n==null||n(O));const P=Au(nt.sourceEvent,{transform:R,snapGrid:j,snapToGrid:C,containerBounds:y});if(l=P,d=SI(ft,ct,P,O),d.size>0&&(e||H||!O&&q)){const[rt,ut]=Om({nodeId:O,dragItems:d,nodeLookup:ft});e==null||e(nt.sourceEvent,d,rt,ut),H==null||H(nt.sourceEvent,rt,ut),O||q==null||q(nt.sourceEvent,ut)}}const F=Ex().clickDistance(_).on("start",nt=>{const{domNode:ft,nodeDragThreshold:ot,transform:ct,snapGrid:R,snapToGrid:j}=t();y=(ft==null?void 0:ft.getBoundingClientRect())||null,S=!1,ot===0&&W(nt),l=Au(nt.sourceEvent,{transform:ct,snapGrid:R,snapToGrid:j,containerBounds:y}),g=as(nt.sourceEvent,y)}).on("drag",nt=>{const{autoPanOnNodeDrag:ft,transform:ot,snapGrid:ct,snapToGrid:R,nodeDragThreshold:j,nodeLookup:C}=t(),B=Au(nt.sourceEvent,{transform:ot,snapGrid:ct,snapToGrid:R,containerBounds:y});if((nt.sourceEvent.type==="touchmove"&&nt.sourceEvent.touches.length>1||O&&!C.has(O))&&(S=!0),!S){if(!h&&ft&&w&&(h=!0,U()),!w){const H=B.xSnapped-(l.x??0),q=B.ySnapped-(l.y??0);Math.sqrt(H*H+q*q)>j&&W(nt)}(l.x!==B.xSnapped||l.y!==B.ySnapped)&&d&&w&&(g=as(nt.sourceEvent,y),J(B,nt.sourceEvent))}}).on("end",nt=>{if(!(!w||S)&&(h=!1,w=!1,cancelAnimationFrame(c),d.size>0)){const{nodeLookup:ft,updateNodePositions:ot,onNodeDragStop:ct,onSelectionDragStop:R}=t();if(ot(d,!1),a||ct||!O&&R){const[j,C]=Om({nodeId:O,dragItems:d,nodeLookup:ft,dragging:!1});a==null||a(nt.sourceEvent,d,j,C),ct==null||ct(nt.sourceEvent,j,C),O||R==null||R(nt.sourceEvent,C)}}}).filter(nt=>{const ft=nt.target;return!nt.button&&(!I||!Tb(ft,`.${I}`,z))&&(!k||Tb(ft,k,z))});v.call(F)}function E(){v==null||v.on(".drag",null)}return{update:x,destroy:E}}function xI(n,t,e){const i=[],a={x:n.x-e,y:n.y-e,width:e*2,height:e*2};for(const l of t.values())$u(a,rl(l))>0&&i.push(l);return i}const TI=250;function AI(n,t,e,i){var d,h;let a=[],l=1/0;const c=xI(n,e,t+TI);for(const g of c){const y=[...((d=g.internals.handleBounds)==null?void 0:d.source)??[],...((h=g.internals.handleBounds)==null?void 0:h.target)??[]];for(const w of y){if(i.nodeId===w.nodeId&&i.type===w.type&&i.id===w.id)continue;const{x:v,y:S}=Vu(g,w,w.position,!0),x=Math.sqrt(Math.pow(v-n.x,2)+Math.pow(S-n.y,2));x>t||(x<l?(a=[{...w,x:v,y:S}],l=x):x===l&&a.push({...w,x:v,y:S}))}}if(!a.length)return null;if(a.length>1){const g=i.type==="source"?"target":"source";return a.find(y=>y.type===g)??a[0]}return a[0]}function lT(n,t,e,i,a,l=!1){var g,y,w;const c=i.get(n);if(!c)return null;const d=a==="strict"?(g=c.internals.handleBounds)==null?void 0:g[t]:[...((y=c.internals.handleBounds)==null?void 0:y.source)??[],...((w=c.internals.handleBounds)==null?void 0:w.target)??[]],h=(e?d==null?void 0:d.find(v=>v.id===e):d==null?void 0:d[0])??null;return h&&l?{...h,...Vu(c,h,h.position,!0)}:h}function uT(n,t){return n||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function EI(n,t){let e=null;return t?e=!0:n&&!t&&(e=!1),e}const cT=()=>!0;function NI(n,{connectionMode:t,connectionRadius:e,handleId:i,nodeId:a,edgeUpdaterType:l,isTarget:c,domNode:d,nodeLookup:h,lib:g,autoPanOnConnect:y,flowId:w,panBy:v,cancelConnection:S,onConnectStart:x,onConnect:E,onConnectEnd:I,isValidConnection:k=cT,onReconnectEnd:z,updateConnection:N,getTransform:O,getFromHandle:_,autoPanSpeed:J}){const U=Qx(n.target);let W=0,F;const{x:nt,y:ft}=as(n),ot=U==null?void 0:U.elementFromPoint(nt,ft),ct=uT(l,ot),R=d==null?void 0:d.getBoundingClientRect();if(!R||!ct)return;const j=lT(a,ct,i,h,t);if(!j)return;let C=as(n,R),B=!1,H=null,q=!1,D=null;function P(){if(!y||!R)return;const[Ct,Vt]=Xx(C,R,J);v({x:Ct,y:Vt}),W=requestAnimationFrame(P)}const tt={...j,nodeId:a,type:ct,position:j.position},rt=h.get(a),gt={inProgress:!0,isValid:null,from:Vu(rt,tt,Tt.Left,!0),fromHandle:tt,fromPosition:tt.position,fromNode:rt,to:C,toHandle:null,toPosition:fb[tt.position],toNode:null};N(gt);let dt=gt;x==null||x(n,{nodeId:a,handleId:i,handleType:ct});function yt(Ct){if(!_()||!tt){pt(Ct);return}const Vt=O();C=as(Ct,R),F=AI(nc(C,Vt,!1,[1,1]),e,h,tt),B||(P(),B=!0);const Ot=fT(Ct,{handle:F,connectionMode:t,fromNodeId:a,fromHandleId:i,fromType:c?"target":"source",isValidConnection:k,doc:U,lib:g,flowId:w,nodeLookup:h});D=Ot.handleDomNode,H=Ot.connection,q=EI(!!F,Ot.isValid);const bt={...dt,isValid:q,to:F&&q?kd({x:F.x,y:F.y},Vt):C,toHandle:Ot.toHandle,toPosition:q&&Ot.toHandle?Ot.toHandle.position:fb[tt.position],toNode:Ot.toHandle?h.get(Ot.toHandle.nodeId):null};q&&F&&dt.toHandle&&bt.toHandle&&dt.toHandle.type===bt.toHandle.type&&dt.toHandle.nodeId===bt.toHandle.nodeId&&dt.toHandle.id===bt.toHandle.id&&dt.to.x===bt.to.x&&dt.to.y===bt.to.y||(N(bt),dt=bt)}function pt(Ct){(F||D)&&H&&q&&(E==null||E(H));const{inProgress:Vt,...Ot}=dt,bt={...Ot,toPosition:dt.toHandle?dt.toPosition:null};I==null||I(Ct,bt),l&&(z==null||z(Ct,bt)),S(),cancelAnimationFrame(W),B=!1,q=!1,H=null,D=null,U.removeEventListener("mousemove",yt),U.removeEventListener("mouseup",pt),U.removeEventListener("touchmove",yt),U.removeEventListener("touchend",pt)}U.addEventListener("mousemove",yt),U.addEventListener("mouseup",pt),U.addEventListener("touchmove",yt),U.addEventListener("touchend",pt)}function fT(n,{handle:t,connectionMode:e,fromNodeId:i,fromHandleId:a,fromType:l,doc:c,lib:d,flowId:h,isValidConnection:g=cT,nodeLookup:y}){const w=l==="target",v=t?c.querySelector(`.${d}-flow__handle[data-id="${h}-${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`):null,{x:S,y:x}=as(n),E=c.elementFromPoint(S,x),I=E!=null&&E.classList.contains(`${d}-flow__handle`)?E:v,k={handleDomNode:I,isValid:!1,connection:null,toHandle:null};if(I){const z=uT(void 0,I),N=I.getAttribute("data-nodeid"),O=I.getAttribute("data-handleid"),_=I.classList.contains("connectable"),J=I.classList.contains("connectableend");if(!N||!z)return k;const U={source:w?N:i,sourceHandle:w?O:a,target:w?i:N,targetHandle:w?a:O};k.connection=U;const F=_&&J&&(e===el.Strict?w&&z==="source"||!w&&z==="target":N!==i||O!==a);k.isValid=F&&g(U),k.toHandle=lT(N,z,O,y,e,!1)}return k}const ky={onPointerDown:NI,isValid:fT};function DI({domNode:n,panZoom:t,getTransform:e,getViewScale:i}){const a=gn(n);function l({translateExtent:d,width:h,height:g,zoomStep:y=10,pannable:w=!0,zoomable:v=!0,inversePan:S=!1}){const x=N=>{const O=e();if(N.sourceEvent.type!=="wheel"||!t)return;const _=-N.sourceEvent.deltaY*(N.sourceEvent.deltaMode===1?.05:N.sourceEvent.deltaMode?1:.002)*y,J=O[2]*Math.pow(2,_);t.scaleTo(J)};let E=[0,0];const I=N=>{(N.sourceEvent.type==="mousedown"||N.sourceEvent.type==="touchstart")&&(E=[N.sourceEvent.clientX??N.sourceEvent.touches[0].clientX,N.sourceEvent.clientY??N.sourceEvent.touches[0].clientY])},k=N=>{const O=e();if(N.sourceEvent.type!=="mousemove"&&N.sourceEvent.type!=="touchmove"||!t)return;const _=[N.sourceEvent.clientX??N.sourceEvent.touches[0].clientX,N.sourceEvent.clientY??N.sourceEvent.touches[0].clientY],J=[_[0]-E[0],_[1]-E[1]];E=_;const U=i()*Math.max(O[2],Math.log(O[2]))*(S?-1:1),W={x:O[0]-J[0]*U,y:O[1]-J[1]*U},F=[[0,0],[h,g]];t.setViewportConstrained({x:W.x,y:W.y,zoom:O[2]},F,d)},z=Px().on("start",I).on("zoom",w?k:null).on("zoom.wheel",v?x:null);a.call(z,{})}function c(){a.on("zoom",null)}return{update:l,destroy:c,pointer:Xn}}const CI=(n,t)=>n.x!==t.x||n.y!==t.y||n.zoom!==t.k,Gd=n=>({x:n.x,y:n.y,zoom:n.k}),Im=({x:n,y:t,zoom:e})=>$d.translate(n,t).scale(e),Lo=(n,t)=>n.target.closest(`.${t}`),dT=(n,t)=>t===2&&Array.isArray(n)&&n.includes(2),Rm=(n,t=0,e=()=>{})=>{const i=typeof t=="number"&&t>0;return i||e(),i?n.transition().duration(t).on("end",e):n},hT=n=>{const t=n.ctrlKey&&Od()?10:1;return-n.deltaY*(n.deltaMode===1?.05:n.deltaMode?1:.002)*t};function kI({zoomPanValues:n,noWheelClassName:t,d3Selection:e,d3Zoom:i,panOnScrollMode:a,panOnScrollSpeed:l,zoomOnPinch:c,onPanZoomStart:d,onPanZoom:h,onPanZoomEnd:g}){return y=>{if(Lo(y,t))return!1;y.preventDefault(),y.stopImmediatePropagation();const w=e.property("__zoom").k||1;if(y.ctrlKey&&c){const I=Xn(y),k=hT(y),z=w*Math.pow(2,k);i.scaleTo(e,z,I,y);return}const v=y.deltaMode===1?20:1;let S=a===Ba.Vertical?0:y.deltaX*v,x=a===Ba.Horizontal?0:y.deltaY*v;!Od()&&y.shiftKey&&a!==Ba.Vertical&&(S=y.deltaY*v,x=0),i.translateBy(e,-(S/w)*l,-(x/w)*l,{internal:!0});const E=Gd(e.property("__zoom"));clearTimeout(n.panScrollTimeout),n.isPanScrolling||(n.isPanScrolling=!0,d==null||d(y,E)),n.isPanScrolling&&(h==null||h(y,E),n.panScrollTimeout=setTimeout(()=>{g==null||g(y,E),n.isPanScrolling=!1},150))}}function OI({noWheelClassName:n,preventScrolling:t,d3ZoomHandler:e}){return function(i,a){if(!t&&i.type==="wheel"&&!i.ctrlKey||Lo(i,n))return null;i.preventDefault(),e.call(this,i,a)}}function II({zoomPanValues:n,onDraggingChange:t,onPanZoomStart:e}){return i=>{var l,c,d;if((l=i.sourceEvent)!=null&&l.internal)return;const a=Gd(i.transform);n.mouseButton=((c=i.sourceEvent)==null?void 0:c.button)||0,n.isZoomingOrPanning=!0,n.prevViewport=a,((d=i.sourceEvent)==null?void 0:d.type)==="mousedown"&&t(!0),e&&(e==null||e(i.sourceEvent,a))}}function RI({zoomPanValues:n,panOnDrag:t,onPaneContextMenu:e,onTransformChange:i,onPanZoom:a}){return l=>{var c,d;n.usedRightMouseButton=!!(e&&dT(t,n.mouseButton??0)),(c=l.sourceEvent)!=null&&c.sync||i([l.transform.x,l.transform.y,l.transform.k]),a&&!((d=l.sourceEvent)!=null&&d.internal)&&(a==null||a(l.sourceEvent,Gd(l.transform)))}}function MI({zoomPanValues:n,panOnDrag:t,panOnScroll:e,onDraggingChange:i,onPanZoomEnd:a,onPaneContextMenu:l}){return c=>{var d;if(!((d=c.sourceEvent)!=null&&d.internal)&&(n.isZoomingOrPanning=!1,l&&dT(t,n.mouseButton??0)&&!n.usedRightMouseButton&&c.sourceEvent&&l(c.sourceEvent),n.usedRightMouseButton=!1,i(!1),a&&CI(n.prevViewport,c.transform))){const h=Gd(c.transform);n.prevViewport=h,clearTimeout(n.timerId),n.timerId=setTimeout(()=>{a==null||a(c.sourceEvent,h)},e?150:0)}}}function BI({zoomActivationKeyPressed:n,zoomOnScroll:t,zoomOnPinch:e,panOnDrag:i,panOnScroll:a,zoomOnDoubleClick:l,userSelectionActive:c,noWheelClassName:d,noPanClassName:h,lib:g}){return y=>{var x;const w=n||t,v=e&&y.ctrlKey;if(y.button===1&&y.type==="mousedown"&&(Lo(y,`${g}-flow__node`)||Lo(y,`${g}-flow__edge`)))return!0;if(!i&&!w&&!a&&!l&&!e||c||Lo(y,d)&&y.type==="wheel"||Lo(y,h)&&(y.type!=="wheel"||a&&y.type==="wheel"&&!n)||!e&&y.ctrlKey&&y.type==="wheel")return!1;if(!e&&y.type==="touchstart"&&((x=y.touches)==null?void 0:x.length)>1)return y.preventDefault(),!1;if(!w&&!a&&!v&&y.type==="wheel"||!i&&(y.type==="mousedown"||y.type==="touchstart")||Array.isArray(i)&&!i.includes(y.button)&&y.type==="mousedown")return!1;const S=Array.isArray(i)&&i.includes(y.button)||!y.button||y.button<=1;return(!y.ctrlKey||y.type==="wheel")&&S}}function zI({domNode:n,minZoom:t,maxZoom:e,paneClickDistance:i,translateExtent:a,viewport:l,onPanZoom:c,onPanZoomStart:d,onPanZoomEnd:h,onDraggingChange:g}){const y={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},w=n.getBoundingClientRect(),v=Px().clickDistance(!Qn(i)||i<0?0:i).scaleExtent([t,e]).translateExtent(a),S=gn(n).call(v);N({x:l.x,y:l.y,zoom:nl(l.zoom,t,e)},[[0,0],[w.width,w.height]],a);const x=S.on("wheel.zoom"),E=S.on("dblclick.zoom");v.wheelDelta(hT);function I(ot,ct){return S?new Promise(R=>{v==null||v.transform(Rm(S,ct==null?void 0:ct.duration,()=>R(!0)),ot)}):Promise.resolve(!1)}function k({noWheelClassName:ot,noPanClassName:ct,onPaneContextMenu:R,userSelectionActive:j,panOnScroll:C,panOnDrag:B,panOnScrollMode:H,panOnScrollSpeed:q,preventScrolling:D,zoomOnPinch:P,zoomOnScroll:tt,zoomOnDoubleClick:rt,zoomActivationKeyPressed:ut,lib:gt,onTransformChange:dt}){j&&!y.isZoomingOrPanning&&z();const pt=C&&!ut&&!j?kI({zoomPanValues:y,noWheelClassName:ot,d3Selection:S,d3Zoom:v,panOnScrollMode:H,panOnScrollSpeed:q,zoomOnPinch:P,onPanZoomStart:d,onPanZoom:c,onPanZoomEnd:h}):OI({noWheelClassName:ot,preventScrolling:D,d3ZoomHandler:x});if(S.on("wheel.zoom",pt,{passive:!1}),!j){const Vt=II({zoomPanValues:y,onDraggingChange:g,onPanZoomStart:d});v.on("start",Vt);const Ot=RI({zoomPanValues:y,panOnDrag:B,onPaneContextMenu:!!R,onPanZoom:c,onTransformChange:dt});v.on("zoom",Ot);const bt=MI({zoomPanValues:y,panOnDrag:B,panOnScroll:C,onPaneContextMenu:R,onPanZoomEnd:h,onDraggingChange:g});v.on("end",bt)}const Ct=BI({zoomActivationKeyPressed:ut,panOnDrag:B,zoomOnScroll:tt,panOnScroll:C,zoomOnDoubleClick:rt,zoomOnPinch:P,userSelectionActive:j,noPanClassName:ct,noWheelClassName:ot,lib:gt});v.filter(Ct),rt?S.on("dblclick.zoom",E):S.on("dblclick.zoom",null)}function z(){v.on("zoom",null)}async function N(ot,ct,R){const j=Im(ot),C=v==null?void 0:v.constrain()(j,ct,R);return C&&await I(C),new Promise(B=>B(C))}async function O(ot,ct){const R=Im(ot);return await I(R,ct),new Promise(j=>j(R))}function _(ot){if(S){const ct=Im(ot),R=S.property("__zoom");(R.k!==ot.zoom||R.x!==ot.x||R.y!==ot.y)&&(v==null||v.transform(S,ct,null,{sync:!0}))}}function J(){const ot=S?qx(S.node()):{x:0,y:0,k:1};return{x:ot.x,y:ot.y,zoom:ot.k}}function U(ot,ct){return S?new Promise(R=>{v==null||v.scaleTo(Rm(S,ct==null?void 0:ct.duration,()=>R(!0)),ot)}):Promise.resolve(!1)}function W(ot,ct){return S?new Promise(R=>{v==null||v.scaleBy(Rm(S,ct==null?void 0:ct.duration,()=>R(!0)),ot)}):Promise.resolve(!1)}function F(ot){v==null||v.scaleExtent(ot)}function nt(ot){v==null||v.translateExtent(ot)}function ft(ot){const ct=!Qn(ot)||ot<0?0:ot;v==null||v.clickDistance(ct)}return{update:k,destroy:z,setViewport:O,setViewportConstrained:N,getViewport:J,scaleTo:U,scaleBy:W,setScaleExtent:F,setTranslateExtent:nt,syncViewport:_,setClickDistance:ft}}var Eu;(function(n){n.Line="line",n.Handle="handle"})(Eu||(Eu={}));function LI({width:n,prevWidth:t,height:e,prevHeight:i,affectsX:a,affectsY:l}){const c=n-t,d=e-i,h=[c>0?1:c<0?-1:0,d>0?1:d<0?-1:0];return c&&a&&(h[0]=h[0]*-1),d&&l&&(h[1]=h[1]*-1),h}function _I(n){const t=n.includes("right")||n.includes("left"),e=n.includes("bottom")||n.includes("top"),i=n.includes("left"),a=n.includes("top");return{isHorizontal:t,isVertical:e,affectsX:i,affectsY:a}}function Vs(n,t){return Math.max(0,t-n)}function js(n,t){return Math.max(0,n-t)}function Bf(n,t,e){return Math.max(0,t-n,n-e)}function Ab(n,t){return n?!t:t}function UI(n,t,e,i,a,l,c,d){let{affectsX:h,affectsY:g}=t;const{isHorizontal:y,isVertical:w}=t,v=y&&w,{xSnapped:S,ySnapped:x}=e,{minWidth:E,maxWidth:I,minHeight:k,maxHeight:z}=i,{x:N,y:O,width:_,height:J,aspectRatio:U}=n;let W=Math.floor(y?S-n.pointerX:0),F=Math.floor(w?x-n.pointerY:0);const nt=_+(h?-W:W),ft=J+(g?-F:F),ot=-l[0]*_,ct=-l[1]*J;let R=Bf(nt,E,I),j=Bf(ft,k,z);if(c){let H=0,q=0;h&&W<0?H=Vs(N+W+ot,c[0][0]):!h&&W>0&&(H=js(N+nt+ot,c[1][0])),g&&F<0?q=Vs(O+F+ct,c[0][1]):!g&&F>0&&(q=js(O+ft+ct,c[1][1])),R=Math.max(R,H),j=Math.max(j,q)}if(d){let H=0,q=0;h&&W>0?H=js(N+W,d[0][0]):!h&&W<0&&(H=Vs(N+nt,d[1][0])),g&&F>0?q=js(O+F,d[0][1]):!g&&F<0&&(q=Vs(O+ft,d[1][1])),R=Math.max(R,H),j=Math.max(j,q)}if(a){if(y){const H=Bf(nt/U,k,z)*U;if(R=Math.max(R,H),c){let q=0;!h&&!g||h&&!g&&v?q=js(O+ct+nt/U,c[1][1])*U:q=Vs(O+ct+(h?W:-W)/U,c[0][1])*U,R=Math.max(R,q)}if(d){let q=0;!h&&!g||h&&!g&&v?q=Vs(O+nt/U,d[1][1])*U:q=js(O+(h?W:-W)/U,d[0][1])*U,R=Math.max(R,q)}}if(w){const H=Bf(ft*U,E,I)/U;if(j=Math.max(j,H),c){let q=0;!h&&!g||g&&!h&&v?q=js(N+ft*U+ot,c[1][0])/U:q=Vs(N+(g?F:-F)*U+ot,c[0][0])/U,j=Math.max(j,q)}if(d){let q=0;!h&&!g||g&&!h&&v?q=Vs(N+ft*U,d[1][0])/U:q=js(N+(g?F:-F)*U,d[0][0])/U,j=Math.max(j,q)}}}F=F+(F<0?j:-j),W=W+(W<0?R:-R),a&&(v?nt>ft*U?F=(Ab(h,g)?-W:W)/U:W=(Ab(h,g)?-F:F)*U:y?(F=W/U,g=h):(W=F*U,h=g));const C=h?N+W:N,B=g?O+F:O;return{width:_+(h?-W:W),height:J+(g?-F:F),x:l[0]*W*(h?-1:1)+C,y:l[1]*F*(g?-1:1)+B}}const gT={width:0,height:0,x:0,y:0},qI={...gT,pointerX:0,pointerY:0,aspectRatio:1};function PI(n){return[[0,0],[n.measured.width,n.measured.height]]}function JI(n,t,e){const i=t.position.x+n.position.x,a=t.position.y+n.position.y,l=n.measured.width??0,c=n.measured.height??0,d=e[0]*l,h=e[1]*c;return[[i-d,a-h],[i+l-d,a+c-h]]}function HI({domNode:n,nodeId:t,getStoreItems:e,onChange:i,onEnd:a}){const l=gn(n);function c({controlPosition:h,boundaries:g,keepAspectRatio:y,onResizeStart:w,onResize:v,onResizeEnd:S,shouldResize:x}){let E={...gT},I={...qI};const k=_I(h);let z,N=null,O=[],_,J,U;const W=Ex().on("start",F=>{const{nodeLookup:nt,transform:ft,snapGrid:ot,snapToGrid:ct,nodeOrigin:R,paneDomNode:j}=e();if(z=nt.get(t),!z)return;N=(j==null?void 0:j.getBoundingClientRect())??null;const{xSnapped:C,ySnapped:B}=Au(F.sourceEvent,{transform:ft,snapGrid:ot,snapToGrid:ct,containerBounds:N});E={width:z.measured.width??0,height:z.measured.height??0,x:z.position.x??0,y:z.position.y??0},I={...E,pointerX:C,pointerY:B,aspectRatio:E.width/E.height},_=void 0,z.parentId&&(z.extent==="parent"||z.expandParent)&&(_=nt.get(z.parentId),J=_&&z.extent==="parent"?PI(_):void 0),O=[],U=void 0;for(const[H,q]of nt)if(q.parentId===t&&(O.push({id:H,position:{...q.position},extent:q.extent}),q.extent==="parent"||q.expandParent)){const D=JI(q,z,q.origin??R);U?U=[[Math.min(D[0][0],U[0][0]),Math.min(D[0][1],U[0][1])],[Math.max(D[1][0],U[1][0]),Math.max(D[1][1],U[1][1])]]:U=D}w==null||w(F,{...E})}).on("drag",F=>{const{transform:nt,snapGrid:ft,snapToGrid:ot,nodeOrigin:ct}=e(),R=Au(F.sourceEvent,{transform:nt,snapGrid:ft,snapToGrid:ot,containerBounds:N}),j=[];if(!z)return;const{x:C,y:B,width:H,height:q}=E,D={},P=z.origin??ct,{width:tt,height:rt,x:ut,y:gt}=UI(I,k,R,g,y,P,J,U),dt=tt!==H,yt=rt!==q,pt=ut!==C&&dt,Ct=gt!==B&&yt;if(!pt&&!Ct&&!dt&&!yt)return;if((pt||Ct||P[0]===1||P[1]===1)&&(D.x=pt?ut:E.x,D.y=Ct?gt:E.y,E.x=D.x,E.y=D.y,O.length>0)){const Yt=ut-C,qt=gt-B;for(const xe of O)xe.position={x:xe.position.x-Yt+P[0]*(tt-H),y:xe.position.y-qt+P[1]*(rt-q)},j.push(xe)}if((dt||yt)&&(D.width=dt?tt:E.width,D.height=yt?rt:E.height,E.width=D.width,E.height=D.height),_&&z.expandParent){const Yt=P[0]*(D.width??0);D.x&&D.x<Yt&&(E.x=Yt,I.x=I.x-(D.x-Yt));const qt=P[1]*(D.height??0);D.y&&D.y<qt&&(E.y=qt,I.y=I.y-(D.y-qt))}const Vt=LI({width:E.width,prevWidth:H,height:E.height,prevHeight:q,affectsX:k.affectsX,affectsY:k.affectsY}),Ot={...E,direction:Vt};(x==null?void 0:x(F,Ot))!==!1&&(v==null||v(F,Ot),i(D,j))}).on("end",F=>{S==null||S(F,{...E}),a==null||a()});l.call(W)}function d(){l.on(".drag",null)}return{update:c,destroy:d}}var Mm={exports:{}},Bm={},zm={exports:{}},Lm={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Eb;function $I(){if(Eb)return Lm;Eb=1;var n=Yu();function t(w,v){return w===v&&(w!==0||1/w===1/v)||w!==w&&v!==v}var e=typeof Object.is=="function"?Object.is:t,i=n.useState,a=n.useEffect,l=n.useLayoutEffect,c=n.useDebugValue;function d(w,v){var S=v(),x=i({inst:{value:S,getSnapshot:v}}),E=x[0].inst,I=x[1];return l(function(){E.value=S,E.getSnapshot=v,h(E)&&I({inst:E})},[w,S,v]),a(function(){return h(E)&&I({inst:E}),w(function(){h(E)&&I({inst:E})})},[w]),c(S),S}function h(w){var v=w.getSnapshot;w=w.value;try{var S=v();return!e(w,S)}catch{return!0}}function g(w,v){return v()}var y=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?g:d;return Lm.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:y,Lm}var Nb;function VI(){return Nb||(Nb=1,zm.exports=$I()),zm.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Db;function jI(){if(Db)return Bm;Db=1;var n=Yu(),t=VI();function e(g,y){return g===y&&(g!==0||1/g===1/y)||g!==g&&y!==y}var i=typeof Object.is=="function"?Object.is:e,a=t.useSyncExternalStore,l=n.useRef,c=n.useEffect,d=n.useMemo,h=n.useDebugValue;return Bm.useSyncExternalStoreWithSelector=function(g,y,w,v,S){var x=l(null);if(x.current===null){var E={hasValue:!1,value:null};x.current=E}else E=x.current;x=d(function(){function k(J){if(!z){if(z=!0,N=J,J=v(J),S!==void 0&&E.hasValue){var U=E.value;if(S(U,J))return O=U}return O=J}if(U=O,i(N,J))return U;var W=v(J);return S!==void 0&&S(U,W)?(N=J,U):(N=J,O=W)}var z=!1,N,O,_=w===void 0?null:w;return[function(){return k(y())},_===null?void 0:function(){return k(_())}]},[y,w,v,S]);var I=a(g,x[0],x[1]);return c(function(){E.hasValue=!0,E.value=I},[I]),h(I),I},Bm}var Cb;function YI(){return Cb||(Cb=1,Mm.exports=jI()),Mm.exports}var GI=YI();const XI=Wb(GI),KI={},kb=n=>{let t;const e=new Set,i=(y,w)=>{const v=typeof y=="function"?y(t):y;if(!Object.is(v,t)){const S=t;t=w??(typeof v!="object"||v===null)?v:Object.assign({},t,v),e.forEach(x=>x(t,S))}},a=()=>t,h={setState:i,getState:a,getInitialState:()=>g,subscribe:y=>(e.add(y),()=>e.delete(y)),destroy:()=>{(KI?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),e.clear()}},g=t=n(i,a,h);return h},FI=n=>n?kb(n):kb,{useDebugValue:ZI}=cN,{useSyncExternalStoreWithSelector:QI}=XI,WI=n=>n;function mT(n,t=WI,e){const i=QI(n.subscribe,n.getState,n.getServerState||n.getInitialState,t,e);return ZI(i),i}const Ob=(n,t)=>{const e=FI(n),i=(a,l=t)=>mT(e,a,l);return Object.assign(i,e),i},tR=(n,t)=>n?Ob(n,t):Ob;function he(n,t){if(Object.is(n,t))return!0;if(typeof n!="object"||n===null||typeof t!="object"||t===null)return!1;if(n instanceof Map&&t instanceof Map){if(n.size!==t.size)return!1;for(const[i,a]of n)if(!Object.is(a,t.get(i)))return!1;return!0}if(n instanceof Set&&t instanceof Set){if(n.size!==t.size)return!1;for(const i of n)if(!t.has(i))return!1;return!0}const e=Object.keys(n);if(e.length!==Object.keys(t).length)return!1;for(const i of e)if(!Object.prototype.hasOwnProperty.call(t,i)||!Object.is(n[i],t[i]))return!1;return!0}t1();const Xd=et.createContext(null),eR=Xd.Provider,yT=Nr.error001();function Ht(n,t){const e=et.useContext(Xd);if(e===null)throw new Error(yT);return mT(e,n,t)}function se(){const n=et.useContext(Xd);if(n===null)throw new Error(yT);return et.useMemo(()=>({getState:n.getState,setState:n.setState,subscribe:n.subscribe}),[n])}const Ib={display:"none"},nR={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},pT="react-flow__node-desc",vT="react-flow__edge-desc",rR="react-flow__aria-live",iR=n=>n.ariaLiveMessage;function sR({rfId:n}){const t=Ht(iR);return Q.jsx("div",{id:`${rR}-${n}`,"aria-live":"assertive","aria-atomic":"true",style:nR,children:t})}function aR({rfId:n,disableKeyboardA11y:t}){return Q.jsxs(Q.Fragment,{children:[Q.jsxs("div",{id:`${pT}-${n}`,style:Ib,children:["Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "]}),Q.jsx("div",{id:`${vT}-${n}`,style:Ib,children:"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."}),!t&&Q.jsx(sR,{rfId:n})]})}const oR=n=>n.userSelectionActive?"none":"all",Kd=et.forwardRef(({position:n="top-left",children:t,className:e,style:i,...a},l)=>{const c=Ht(oR),d=`${n}`.split("-");return Q.jsx("div",{className:be(["react-flow__panel",e,...d]),style:{...i,pointerEvents:c},ref:l,...a,children:t})});Kd.displayName="Panel";function lR({proOptions:n,position:t="bottom-right"}){return n!=null&&n.hideAttribution?null:Q.jsx(Kd,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:Q.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const uR=n=>{const t=[],e=[];for(const[,i]of n.nodeLookup)i.selected&&t.push(i.internals.userNode);for(const[,i]of n.edgeLookup)i.selected&&e.push(i);return{selectedNodes:t,selectedEdges:e}},zf=n=>n.id;function cR(n,t){return he(n.selectedNodes.map(zf),t.selectedNodes.map(zf))&&he(n.selectedEdges.map(zf),t.selectedEdges.map(zf))}function fR({onSelectionChange:n}){const t=se(),{selectedNodes:e,selectedEdges:i}=Ht(uR,cR);return et.useEffect(()=>{const a={nodes:e,edges:i};n==null||n(a),t.getState().onSelectionChangeHandlers.forEach(l=>l(a))},[e,i,n]),null}const dR=n=>!!n.onSelectionChangeHandlers;function hR({onSelectionChange:n}){const t=Ht(dR);return n||t?Q.jsx(fR,{onSelectionChange:n}):null}const wT=[0,0],gR={x:0,y:0,zoom:1},mR=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","onBeforeDelete","debug","autoPanSpeed","paneClickDistance"],Rb=[...mR,"rfId"],yR=n=>({setNodes:n.setNodes,setEdges:n.setEdges,setMinZoom:n.setMinZoom,setMaxZoom:n.setMaxZoom,setTranslateExtent:n.setTranslateExtent,setNodeExtent:n.setNodeExtent,reset:n.reset,setDefaultNodesAndEdges:n.setDefaultNodesAndEdges,setPaneClickDistance:n.setPaneClickDistance}),Mb={translateExtent:Ju,nodeOrigin:wT,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1",paneClickDistance:0};function pR(n){const{setNodes:t,setEdges:e,setMinZoom:i,setMaxZoom:a,setTranslateExtent:l,setNodeExtent:c,reset:d,setDefaultNodesAndEdges:h,setPaneClickDistance:g}=Ht(yR,he),y=se();et.useEffect(()=>(h(n.defaultNodes,n.defaultEdges),()=>{w.current=Mb,d()}),[]);const w=et.useRef(Mb);return et.useEffect(()=>{for(const v of Rb){const S=n[v],x=w.current[v];S!==x&&(typeof n[v]>"u"||(v==="nodes"?t(S):v==="edges"?e(S):v==="minZoom"?i(S):v==="maxZoom"?a(S):v==="translateExtent"?l(S):v==="nodeExtent"?c(S):v==="paneClickDistance"?g(S):v==="fitView"?y.setState({fitViewQueued:S}):v==="fitViewOptions"?y.setState({fitViewOptions:S}):y.setState({[v]:S})))}w.current=n},Rb.map(v=>n[v])),null}function Bb(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function vR(n){var i;const[t,e]=et.useState(n==="system"?null:n);return et.useEffect(()=>{if(n!=="system"){e(n);return}const a=Bb(),l=()=>e(a!=null&&a.matches?"dark":"light");return l(),a==null||a.addEventListener("change",l),()=>{a==null||a.removeEventListener("change",l)}},[n]),t!==null?t:(i=Bb())!=null&&i.matches?"dark":"light"}const zb=typeof document<"u"?document:null;function ju(n=null,t={target:zb,actInsideInputWithModifier:!0}){const[e,i]=et.useState(!1),a=et.useRef(!1),l=et.useRef(new Set([])),[c,d]=et.useMemo(()=>{if(n!==null){const g=(Array.isArray(n)?n:[n]).filter(w=>typeof w=="string").map(w=>w.replace("+",`
`).replace(`

`,`
+`).split(`
`)),y=g.reduce((w,v)=>w.concat(...v),[]);return[g,y]}return[[],[]]},[n]);return et.useEffect(()=>{const h=(t==null?void 0:t.target)||zb;if(n!==null){const g=v=>{var E,I;if(a.current=v.ctrlKey||v.metaKey||v.shiftKey||v.altKey,(!a.current||a.current&&!t.actInsideInputWithModifier)&&Wx(v))return!1;const x=_b(v.code,d);if(l.current.add(v[x]),Lb(c,l.current,!1)){const k=((I=(E=v.composedPath)==null?void 0:E.call(v))==null?void 0:I[0])||v.target,z=(k==null?void 0:k.nodeName)==="BUTTON"||(k==null?void 0:k.nodeName)==="A";t.preventDefault!==!1&&(a.current||!z)&&v.preventDefault(),i(!0)}},y=v=>{const S=_b(v.code,d);Lb(c,l.current,!0)?(i(!1),l.current.clear()):l.current.delete(v[S]),v.key==="Meta"&&l.current.clear(),a.current=!1},w=()=>{l.current.clear(),i(!1)};return h==null||h.addEventListener("keydown",g),h==null||h.addEventListener("keyup",y),window.addEventListener("blur",w),window.addEventListener("contextmenu",w),()=>{h==null||h.removeEventListener("keydown",g),h==null||h.removeEventListener("keyup",y),window.removeEventListener("blur",w),window.removeEventListener("contextmenu",w)}}},[n,i]),e}function Lb(n,t,e){return n.filter(i=>e||i.length===t.size).some(i=>i.every(a=>t.has(a)))}function _b(n,t){return t.includes(n)?"code":"key"}const wR=()=>{const n=se();return et.useMemo(()=>({zoomIn:t=>{const{panZoom:e}=n.getState();return e?e.scaleBy(1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomOut:t=>{const{panZoom:e}=n.getState();return e?e.scaleBy(1/1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomTo:(t,e)=>{const{panZoom:i}=n.getState();return i?i.scaleTo(t,{duration:e==null?void 0:e.duration}):Promise.resolve(!1)},getZoom:()=>n.getState().transform[2],setViewport:async(t,e)=>{const{transform:[i,a,l],panZoom:c}=n.getState();return c?(await c.setViewport({x:t.x??i,y:t.y??a,zoom:t.zoom??l},{duration:e==null?void 0:e.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[t,e,i]=n.getState().transform;return{x:t,y:e,zoom:i}},setCenter:async(t,e,i)=>{const{width:a,height:l,maxZoom:c,panZoom:d}=n.getState(),h=typeof(i==null?void 0:i.zoom)<"u"?i.zoom:c,g=a/2-t*h,y=l/2-e*h;return d?(await d.setViewport({x:g,y,zoom:h},{duration:i==null?void 0:i.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitBounds:async(t,e)=>{const{width:i,height:a,minZoom:l,maxZoom:c,panZoom:d}=n.getState(),h=op(t,i,a,l,c,(e==null?void 0:e.padding)??.1);return d?(await d.setViewport(h,{duration:e==null?void 0:e.duration}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,e={})=>{const{transform:i,snapGrid:a,snapToGrid:l,domNode:c}=n.getState();if(!c)return t;const{x:d,y:h}=c.getBoundingClientRect(),g={x:t.x-d,y:t.y-h},y=e.snapGrid??a,w=e.snapToGrid??l;return nc(g,i,w,y)},flowToScreenPosition:t=>{const{transform:e,domNode:i}=n.getState();if(!i)return t;const{x:a,y:l}=i.getBoundingClientRect(),c=kd(t,e);return{x:c.x+a,y:c.y+l}}}),[])};function ST(n,t){const e=[],i=new Map,a=[];for(const l of n)if(l.type==="add"){a.push(l);continue}else if(l.type==="remove"||l.type==="replace")i.set(l.id,[l]);else{const c=i.get(l.id);c?c.push(l):i.set(l.id,[l])}for(const l of t){const c=i.get(l.id);if(!c){e.push(l);continue}if(c[0].type==="remove")continue;if(c[0].type==="replace"){e.push({...c[0].item});continue}const d={...l};for(const h of c)SR(h,d);e.push(d)}return a.length&&a.forEach(l=>{l.index!==void 0?e.splice(l.index,0,{...l.item}):e.push({...l.item})}),e}function SR(n,t){switch(n.type){case"select":{t.selected=n.selected;break}case"position":{typeof n.position<"u"&&(t.position=n.position),typeof n.dragging<"u"&&(t.dragging=n.dragging);break}case"dimensions":{typeof n.dimensions<"u"&&(t.measured??(t.measured={}),t.measured.width=n.dimensions.width,t.measured.height=n.dimensions.height,n.setAttributes&&(t.width=n.dimensions.width,t.height=n.dimensions.height)),typeof n.resizing=="boolean"&&(t.resizing=n.resizing);break}}}function bR(n,t){return ST(n,t)}function xR(n,t){return ST(n,t)}function Ca(n,t){return{id:n,type:"select",selected:t}}function _o(n,t=new Set,e=!1){const i=[];for(const[a,l]of n){const c=t.has(a);!(l.selected===void 0&&!c)&&l.selected!==c&&(e&&(l.selected=c),i.push(Ca(l.id,c)))}return i}function Ub({items:n=[],lookup:t}){var a;const e=[],i=new Map(n.map(l=>[l.id,l]));for(const[l,c]of n.entries()){const d=t.get(c.id),h=((a=d==null?void 0:d.internals)==null?void 0:a.userNode)??d;h!==void 0&&h!==c&&e.push({id:c.id,item:c,type:"replace"}),h===void 0&&e.push({item:c,type:"add",index:l})}for(const[l]of t)i.get(l)===void 0&&e.push({id:l,type:"remove"});return e}function qb(n){return{id:n.id,type:"remove"}}const Pb=n=>XO(n),TR=n=>Vx(n);function bT(n){return et.forwardRef(n)}const AR=typeof window<"u"?et.useLayoutEffect:et.useEffect;function Jb(n){const[t,e]=et.useState(BigInt(0)),[i]=et.useState(()=>ER(()=>e(a=>a+BigInt(1))));return AR(()=>{const a=i.get();a.length&&(n(a),i.reset())},[t]),i}function ER(n){let t=[];return{get:()=>t,reset:()=>{t=[]},push:e=>{t.push(e),n()}}}const xT=et.createContext(null);function NR({children:n}){const t=se(),e=et.useCallback(d=>{const{nodes:h=[],setNodes:g,hasDefaultNodes:y,onNodesChange:w,nodeLookup:v}=t.getState();let S=h;for(const x of d)S=typeof x=="function"?x(S):x;y?g(S):w&&w(Ub({items:S,lookup:v}))},[]),i=Jb(e),a=et.useCallback(d=>{const{edges:h=[],setEdges:g,hasDefaultEdges:y,onEdgesChange:w,edgeLookup:v}=t.getState();let S=h;for(const x of d)S=typeof x=="function"?x(S):x;y?g(S):w&&w(Ub({items:S,lookup:v}))},[]),l=Jb(a),c=et.useMemo(()=>({nodeQueue:i,edgeQueue:l}),[]);return Q.jsx(xT.Provider,{value:c,children:n})}function DR(){const n=et.useContext(xT);if(!n)throw new Error("useBatchContext must be used within a BatchProvider");return n}const CR=n=>!!n.panZoom;function hp(){const n=wR(),t=se(),e=DR(),i=Ht(CR),a=et.useMemo(()=>{const l=w=>t.getState().nodeLookup.get(w),c=w=>{e.nodeQueue.push(w)},d=w=>{e.edgeQueue.push(w)},h=w=>{var k,z;const{nodeLookup:v,nodeOrigin:S}=t.getState(),x=Pb(w)?w:v.get(w.id),E=x.parentId?Zx(x.position,x.measured,x.parentId,v,S):x.position,I={...x,position:E,width:((k=x.measured)==null?void 0:k.width)??x.width,height:((z=x.measured)==null?void 0:z.height)??x.height};return rl(I)},g=(w,v,S={replace:!1})=>{c(x=>x.map(E=>{if(E.id===w){const I=typeof v=="function"?v(E):v;return S.replace&&Pb(I)?I:{...E,...I}}return E}))},y=(w,v,S={replace:!1})=>{d(x=>x.map(E=>{if(E.id===w){const I=typeof v=="function"?v(E):v;return S.replace&&TR(I)?I:{...E,...I}}return E}))};return{getNodes:()=>t.getState().nodes.map(w=>({...w})),getNode:w=>{var v;return(v=l(w))==null?void 0:v.internals.userNode},getInternalNode:l,getEdges:()=>{const{edges:w=[]}=t.getState();return w.map(v=>({...v}))},getEdge:w=>t.getState().edgeLookup.get(w),setNodes:c,setEdges:d,addNodes:w=>{const v=Array.isArray(w)?w:[w];e.nodeQueue.push(S=>[...S,...v])},addEdges:w=>{const v=Array.isArray(w)?w:[w];e.edgeQueue.push(S=>[...S,...v])},toObject:()=>{const{nodes:w=[],edges:v=[],transform:S}=t.getState(),[x,E,I]=S;return{nodes:w.map(k=>({...k})),edges:v.map(k=>({...k})),viewport:{x,y:E,zoom:I}}},deleteElements:async({nodes:w=[],edges:v=[]})=>{const{nodes:S,edges:x,onNodesDelete:E,onEdgesDelete:I,triggerNodeChanges:k,triggerEdgeChanges:z,onDelete:N,onBeforeDelete:O}=t.getState(),{nodes:_,edges:J}=await WO({nodesToRemove:w,edgesToRemove:v,nodes:S,edges:x,onBeforeDelete:O}),U=J.length>0,W=_.length>0;if(U){const F=J.map(qb);I==null||I(J),z(F)}if(W){const F=_.map(qb);E==null||E(_),k(F)}return(W||U)&&(N==null||N({nodes:_,edges:J})),{deletedNodes:_,deletedEdges:J}},getIntersectingNodes:(w,v=!0,S)=>{const x=hb(w),E=x?w:h(w),I=S!==void 0;return E?(S||t.getState().nodes).filter(k=>{const z=t.getState().nodeLookup.get(k.id);if(z&&!x&&(k.id===w.id||!z.internals.positionAbsolute))return!1;const N=rl(I?k:z),O=$u(N,E);return v&&O>0||O>=E.width*E.height}):[]},isNodeIntersecting:(w,v,S=!0)=>{const E=hb(w)?w:h(w);if(!E)return!1;const I=$u(E,v);return S&&I>0||I>=E.width*E.height},updateNode:g,updateNodeData:(w,v,S={replace:!1})=>{g(w,x=>{const E=typeof v=="function"?v(x):v;return S.replace?{...x,data:E}:{...x,data:{...x.data,...E}}},S)},updateEdge:y,updateEdgeData:(w,v,S={replace:!1})=>{y(w,x=>{const E=typeof v=="function"?v(x):v;return S.replace?{...x,data:E}:{...x,data:{...x.data,...E}}},S)},getNodesBounds:w=>{const{nodeLookup:v,nodeOrigin:S}=t.getState();return KO(w,{nodeLookup:v,nodeOrigin:S})},getHandleConnections:({type:w,id:v,nodeId:S})=>{var x;return Array.from(((x=t.getState().connectionLookup.get(`${S}-${w}${v?`-${v}`:""}`))==null?void 0:x.values())??[])},getNodeConnections:({type:w,handleId:v,nodeId:S})=>{var x;return Array.from(((x=t.getState().connectionLookup.get(`${S}${w?v?`-${w}-${v}`:`-${w}`:""}`))==null?void 0:x.values())??[])},fitView:async w=>{const v=t.getState().fitViewResolver??Promise.withResolvers();return t.setState({fitViewQueued:!0,fitViewOptions:w,fitViewResolver:v}),e.nodeQueue.push(S=>[...S]),v.promise}}},[]);return et.useMemo(()=>({...a,...n,viewportInitialized:i}),[i])}const Hb=n=>n.selected,kR={actInsideInputWithModifier:!1},OR=typeof window<"u"?window:void 0;function IR({deleteKeyCode:n,multiSelectionKeyCode:t}){const e=se(),{deleteElements:i}=hp(),a=ju(n,kR),l=ju(t,{target:OR});et.useEffect(()=>{if(a){const{edges:c,nodes:d}=e.getState();i({nodes:d.filter(Hb),edges:c.filter(Hb)}),e.setState({nodesSelectionActive:!1})}},[a]),et.useEffect(()=>{e.setState({multiSelectionActive:l})},[l])}function RR(n){const t=se();et.useEffect(()=>{const e=()=>{var a,l;if(!n.current)return!1;const i=lp(n.current);(i.height===0||i.width===0)&&((l=(a=t.getState()).onError)==null||l.call(a,"004",Nr.error004())),t.setState({width:i.width||500,height:i.height||500})};if(n.current){e(),window.addEventListener("resize",e);const i=new ResizeObserver(()=>e());return i.observe(n.current),()=>{window.removeEventListener("resize",e),i&&n.current&&i.unobserve(n.current)}}},[])}const Fd={position:"absolute",width:"100%",height:"100%",top:0,left:0},MR=n=>({userSelectionActive:n.userSelectionActive,lib:n.lib});function BR({onPaneContextMenu:n,zoomOnScroll:t=!0,zoomOnPinch:e=!0,panOnScroll:i=!1,panOnScrollSpeed:a=.5,panOnScrollMode:l=Ba.Free,zoomOnDoubleClick:c=!0,panOnDrag:d=!0,defaultViewport:h,translateExtent:g,minZoom:y,maxZoom:w,zoomActivationKeyCode:v,preventScrolling:S=!0,children:x,noWheelClassName:E,noPanClassName:I,onViewportChange:k,isControlledViewport:z,paneClickDistance:N}){const O=se(),_=et.useRef(null),{userSelectionActive:J,lib:U}=Ht(MR,he),W=ju(v),F=et.useRef();RR(_);const nt=et.useCallback(ft=>{k==null||k({x:ft[0],y:ft[1],zoom:ft[2]}),z||O.setState({transform:ft})},[k,z]);return et.useEffect(()=>{if(_.current){F.current=zI({domNode:_.current,minZoom:y,maxZoom:w,translateExtent:g,viewport:h,paneClickDistance:N,onDraggingChange:R=>O.setState({paneDragging:R}),onPanZoomStart:(R,j)=>{const{onViewportChangeStart:C,onMoveStart:B}=O.getState();B==null||B(R,j),C==null||C(j)},onPanZoom:(R,j)=>{const{onViewportChange:C,onMove:B}=O.getState();B==null||B(R,j),C==null||C(j)},onPanZoomEnd:(R,j)=>{const{onViewportChangeEnd:C,onMoveEnd:B}=O.getState();B==null||B(R,j),C==null||C(j)}});const{x:ft,y:ot,zoom:ct}=F.current.getViewport();return O.setState({panZoom:F.current,transform:[ft,ot,ct],domNode:_.current.closest(".react-flow")}),()=>{var R;(R=F.current)==null||R.destroy()}}},[]),et.useEffect(()=>{var ft;(ft=F.current)==null||ft.update({onPaneContextMenu:n,zoomOnScroll:t,zoomOnPinch:e,panOnScroll:i,panOnScrollSpeed:a,panOnScrollMode:l,zoomOnDoubleClick:c,panOnDrag:d,zoomActivationKeyPressed:W,preventScrolling:S,noPanClassName:I,userSelectionActive:J,noWheelClassName:E,lib:U,onTransformChange:nt})},[n,t,e,i,a,l,c,d,W,S,I,J,E,U,nt]),Q.jsx("div",{className:"react-flow__renderer",ref:_,style:Fd,children:x})}const zR=n=>({userSelectionActive:n.userSelectionActive,userSelectionRect:n.userSelectionRect});function LR(){const{userSelectionActive:n,userSelectionRect:t}=Ht(zR,he);return n&&t?Q.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}const _m=(n,t)=>e=>{e.target===t.current&&(n==null||n(e))},_R=n=>({userSelectionActive:n.userSelectionActive,elementsSelectable:n.elementsSelectable,connectionInProgress:n.connection.inProgress,dragging:n.paneDragging});function UR({isSelecting:n,selectionKeyPressed:t,selectionMode:e=Hu.Full,panOnDrag:i,selectionOnDrag:a,onSelectionStart:l,onSelectionEnd:c,onPaneClick:d,onPaneContextMenu:h,onPaneScroll:g,onPaneMouseEnter:y,onPaneMouseMove:w,onPaneMouseLeave:v,children:S}){const x=se(),{userSelectionActive:E,elementsSelectable:I,dragging:k,connectionInProgress:z}=Ht(_R,he),N=I&&(n||E),O=et.useRef(null),_=et.useRef(),J=et.useRef(new Set),U=et.useRef(new Set),W=et.useRef(!1),F=et.useRef(!1),nt=B=>{if(W.current||z){W.current=!1;return}d==null||d(B),x.getState().resetSelectedElements(),x.setState({nodesSelectionActive:!1})},ft=B=>{if(Array.isArray(i)&&(i!=null&&i.includes(2))){B.preventDefault();return}h==null||h(B)},ot=g?B=>g(B):void 0,ct=B=>{var tt,rt;const{resetSelectedElements:H,domNode:q}=x.getState();if(_.current=q==null?void 0:q.getBoundingClientRect(),!I||!n||B.button!==0||B.target!==O.current||!_.current)return;(rt=(tt=B.target)==null?void 0:tt.setPointerCapture)==null||rt.call(tt,B.pointerId),F.current=!0,W.current=!1;const{x:D,y:P}=as(B.nativeEvent,_.current);H(),x.setState({userSelectionRect:{width:0,height:0,startX:D,startY:P,x:D,y:P}}),l==null||l(B)},R=B=>{const{userSelectionRect:H,transform:q,nodeLookup:D,edgeLookup:P,connectionLookup:tt,triggerNodeChanges:rt,triggerEdgeChanges:ut,defaultEdgeOptions:gt}=x.getState();if(!_.current||!H)return;W.current=!0;const{x:dt,y:yt}=as(B.nativeEvent,_.current),{startX:pt,startY:Ct}=H,Vt={startX:pt,startY:Ct,x:dt<pt?dt:pt,y:yt<Ct?yt:Ct,width:Math.abs(dt-pt),height:Math.abs(yt-Ct)},Ot=J.current,bt=U.current;J.current=new Set(jx(D,Vt,q,e===Hu.Partial,!0).map(qt=>qt.id)),U.current=new Set;const Yt=(gt==null?void 0:gt.selectable)??!0;for(const qt of J.current){const xe=tt.get(qt);if(xe)for(const{edgeId:an}of xe.values()){const Oe=P.get(an);Oe&&(Oe.selectable??Yt)&&U.current.add(an)}}if(!gb(Ot,J.current)){const qt=_o(D,J.current,!0);rt(qt)}if(!gb(bt,U.current)){const qt=_o(P,U.current);ut(qt)}x.setState({userSelectionRect:Vt,userSelectionActive:!0,nodesSelectionActive:!1})},j=B=>{var q,D;if(B.button!==0||!F.current)return;(D=(q=B.target)==null?void 0:q.releasePointerCapture)==null||D.call(q,B.pointerId);const{userSelectionRect:H}=x.getState();!E&&H&&B.target===O.current&&(nt==null||nt(B)),x.setState({userSelectionActive:!1,userSelectionRect:null,nodesSelectionActive:J.current.size>0}),c==null||c(B),(t||a)&&(W.current=!1),F.current=!1},C=i===!0||Array.isArray(i)&&i.includes(0);return Q.jsxs("div",{className:be(["react-flow__pane",{draggable:C,dragging:k,selection:n}]),onClick:N?void 0:_m(nt,O),onContextMenu:_m(ft,O),onWheel:_m(ot,O),onPointerEnter:N?void 0:y,onPointerDown:N?ct:w,onPointerMove:N?R:w,onPointerUp:N?j:void 0,onPointerLeave:v,ref:O,style:Fd,children:[S,Q.jsx(LR,{})]})}function Oy({id:n,store:t,unselect:e=!1,nodeRef:i}){const{addSelectedNodes:a,unselectNodesAndEdges:l,multiSelectionActive:c,nodeLookup:d,onError:h}=t.getState(),g=d.get(n);if(!g){h==null||h("012",Nr.error012(n));return}t.setState({nodesSelectionActive:!1}),g.selected?(e||g.selected&&c)&&(l({nodes:[g],edges:[]}),requestAnimationFrame(()=>{var y;return(y=i==null?void 0:i.current)==null?void 0:y.blur()})):a([n])}function TT({nodeRef:n,disabled:t=!1,noDragClassName:e,handleSelector:i,nodeId:a,isSelectable:l,nodeClickDistance:c}){const d=se(),[h,g]=et.useState(!1),y=et.useRef();return et.useEffect(()=>{y.current=bI({getStoreItems:()=>d.getState(),onNodeMouseDown:w=>{Oy({id:w,store:d,nodeRef:n})},onDragStart:()=>{g(!0)},onDragStop:()=>{g(!1)}})},[]),et.useEffect(()=>{var w,v;if(t)(w=y.current)==null||w.destroy();else if(n.current)return(v=y.current)==null||v.update({noDragClassName:e,handleSelector:i,domNode:n.current,isSelectable:l,nodeId:a,nodeClickDistance:c}),()=>{var S;(S=y.current)==null||S.destroy()}},[e,i,t,l,n,a]),h}const qR=n=>t=>t.selected&&(t.draggable||n&&typeof t.draggable>"u");function AT(){const n=se();return et.useCallback(e=>{const{nodeExtent:i,snapToGrid:a,snapGrid:l,nodesDraggable:c,onError:d,updateNodePositions:h,nodeLookup:g,nodeOrigin:y}=n.getState(),w=new Map,v=qR(c),S=a?l[0]:5,x=a?l[1]:5,E=e.direction.x*S*e.factor,I=e.direction.y*x*e.factor;for(const[,k]of g){if(!v(k))continue;let z={x:k.internals.positionAbsolute.x+E,y:k.internals.positionAbsolute.y+I};a&&(z=Yd(z,l));const{position:N,positionAbsolute:O}=Yx({nodeId:k.id,nextPosition:z,nodeLookup:g,nodeExtent:i,nodeOrigin:y,onError:d});k.position=N,k.internals.positionAbsolute=O,w.set(k.id,k)}h(w)},[])}const gp=et.createContext(null),PR=gp.Provider;gp.Consumer;const ET=()=>et.useContext(gp),JR=n=>({connectOnClick:n.connectOnClick,noPanClassName:n.noPanClassName,rfId:n.rfId}),HR=(n,t,e)=>i=>{const{connectionClickStartHandle:a,connectionMode:l,connection:c}=i,{fromHandle:d,toHandle:h,isValid:g}=c,y=(h==null?void 0:h.nodeId)===n&&(h==null?void 0:h.id)===t&&(h==null?void 0:h.type)===e;return{connectingFrom:(d==null?void 0:d.nodeId)===n&&(d==null?void 0:d.id)===t&&(d==null?void 0:d.type)===e,connectingTo:y,clickConnecting:(a==null?void 0:a.nodeId)===n&&(a==null?void 0:a.id)===t&&(a==null?void 0:a.type)===e,isPossibleEndHandle:l===el.Strict?(d==null?void 0:d.type)!==e:n!==(d==null?void 0:d.nodeId)||t!==(d==null?void 0:d.id),connectionInProcess:!!d,clickConnectionInProcess:!!a,valid:y&&g}};function $R({type:n="source",position:t=Tt.Top,isValidConnection:e,isConnectable:i=!0,isConnectableStart:a=!0,isConnectableEnd:l=!0,id:c,onConnect:d,children:h,className:g,onMouseDown:y,onTouchStart:w,...v},S){var j,C;const x=c||null,E=n==="target",I=se(),k=ET(),{connectOnClick:z,noPanClassName:N,rfId:O}=Ht(JR,he),{connectingFrom:_,connectingTo:J,clickConnecting:U,isPossibleEndHandle:W,connectionInProcess:F,clickConnectionInProcess:nt,valid:ft}=Ht(HR(k,x,n),he);k||(C=(j=I.getState()).onError)==null||C.call(j,"010",Nr.error010());const ot=B=>{const{defaultEdgeOptions:H,onConnect:q,hasDefaultEdges:D}=I.getState(),P={...H,...B};if(D){const{edges:tt,setEdges:rt}=I.getState();rt(lI(P,tt))}q==null||q(P),d==null||d(P)},ct=B=>{if(!k)return;const H=tT(B.nativeEvent);if(a&&(H&&B.button===0||!H)){const q=I.getState();ky.onPointerDown(B.nativeEvent,{autoPanOnConnect:q.autoPanOnConnect,connectionMode:q.connectionMode,connectionRadius:q.connectionRadius,domNode:q.domNode,nodeLookup:q.nodeLookup,lib:q.lib,isTarget:E,handleId:x,nodeId:k,flowId:q.rfId,panBy:q.panBy,cancelConnection:q.cancelConnection,onConnectStart:q.onConnectStart,onConnectEnd:q.onConnectEnd,updateConnection:q.updateConnection,onConnect:ot,isValidConnection:e||q.isValidConnection,getTransform:()=>I.getState().transform,getFromHandle:()=>I.getState().connection.fromHandle,autoPanSpeed:q.autoPanSpeed})}H?y==null||y(B):w==null||w(B)},R=B=>{const{onClickConnectStart:H,onClickConnectEnd:q,connectionClickStartHandle:D,connectionMode:P,isValidConnection:tt,lib:rt,rfId:ut,nodeLookup:gt,connection:dt}=I.getState();if(!k||!D&&!a)return;if(!D){H==null||H(B.nativeEvent,{nodeId:k,handleId:x,handleType:n}),I.setState({connectionClickStartHandle:{nodeId:k,type:n,id:x}});return}const yt=Qx(B.target),pt=e||tt,{connection:Ct,isValid:Vt}=ky.isValid(B.nativeEvent,{handle:{nodeId:k,id:x,type:n},connectionMode:P,fromNodeId:D.nodeId,fromHandleId:D.id||null,fromType:D.type,isValidConnection:pt,flowId:ut,doc:yt,lib:rt,nodeLookup:gt});Vt&&Ct&&ot(Ct);const Ot=structuredClone(dt);delete Ot.inProgress,Ot.toPosition=Ot.toHandle?Ot.toHandle.position:null,q==null||q(B,Ot),I.setState({connectionClickStartHandle:null})};return Q.jsx("div",{"data-handleid":x,"data-nodeid":k,"data-handlepos":t,"data-id":`${O}-${k}-${x}-${n}`,className:be(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",N,g,{source:!E,target:E,connectable:i,connectablestart:a,connectableend:l,clickconnecting:U,connectingfrom:_,connectingto:J,valid:ft,connectionindicator:i&&(!F||W)&&(F||nt?l:a)}]),onMouseDown:ct,onTouchStart:ct,onClick:z?R:void 0,ref:S,...v,children:h})}const Id=et.memo(bT($R));function VR({data:n,isConnectable:t,sourcePosition:e=Tt.Bottom}){return Q.jsxs(Q.Fragment,{children:[n==null?void 0:n.label,Q.jsx(Id,{type:"source",position:e,isConnectable:t})]})}function jR({data:n,isConnectable:t,targetPosition:e=Tt.Top,sourcePosition:i=Tt.Bottom}){return Q.jsxs(Q.Fragment,{children:[Q.jsx(Id,{type:"target",position:e,isConnectable:t}),n==null?void 0:n.label,Q.jsx(Id,{type:"source",position:i,isConnectable:t})]})}function YR(){return null}function GR({data:n,isConnectable:t,targetPosition:e=Tt.Top}){return Q.jsxs(Q.Fragment,{children:[Q.jsx(Id,{type:"target",position:e,isConnectable:t}),n==null?void 0:n.label]})}const Rd={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},$b={input:VR,default:jR,output:GR,group:YR};function XR(n){var t,e,i,a;return n.internals.handleBounds===void 0?{width:n.width??n.initialWidth??((t=n.style)==null?void 0:t.width),height:n.height??n.initialHeight??((e=n.style)==null?void 0:e.height)}:{width:n.width??((i=n.style)==null?void 0:i.width),height:n.height??((a=n.style)==null?void 0:a.height)}}const KR=n=>{const{width:t,height:e,x:i,y:a}=ec(n.nodeLookup,{filter:l=>!!l.selected});return{width:Qn(t)?t:null,height:Qn(e)?e:null,userSelectionActive:n.userSelectionActive,transformString:`translate(${n.transform[0]}px,${n.transform[1]}px) scale(${n.transform[2]}) translate(${i}px,${a}px)`}};function FR({onSelectionContextMenu:n,noPanClassName:t,disableKeyboardA11y:e}){const i=se(),{width:a,height:l,transformString:c,userSelectionActive:d}=Ht(KR,he),h=AT(),g=et.useRef(null);if(et.useEffect(()=>{var v;e||(v=g.current)==null||v.focus({preventScroll:!0})},[e]),TT({nodeRef:g}),d||!a||!l)return null;const y=n?v=>{const S=i.getState().nodes.filter(x=>x.selected);n(v,S)}:void 0,w=v=>{Object.prototype.hasOwnProperty.call(Rd,v.key)&&(v.preventDefault(),h({direction:Rd[v.key],factor:v.shiftKey?4:1}))};return Q.jsx("div",{className:be(["react-flow__nodesselection","react-flow__container",t]),style:{transform:c},children:Q.jsx("div",{ref:g,className:"react-flow__nodesselection-rect",onContextMenu:y,tabIndex:e?void 0:-1,onKeyDown:e?void 0:w,style:{width:a,height:l}})})}const Vb=typeof window<"u"?window:void 0,ZR=n=>({nodesSelectionActive:n.nodesSelectionActive,userSelectionActive:n.userSelectionActive});function NT({children:n,onPaneClick:t,onPaneMouseEnter:e,onPaneMouseMove:i,onPaneMouseLeave:a,onPaneContextMenu:l,onPaneScroll:c,paneClickDistance:d,deleteKeyCode:h,selectionKeyCode:g,selectionOnDrag:y,selectionMode:w,onSelectionStart:v,onSelectionEnd:S,multiSelectionKeyCode:x,panActivationKeyCode:E,zoomActivationKeyCode:I,elementsSelectable:k,zoomOnScroll:z,zoomOnPinch:N,panOnScroll:O,panOnScrollSpeed:_,panOnScrollMode:J,zoomOnDoubleClick:U,panOnDrag:W,defaultViewport:F,translateExtent:nt,minZoom:ft,maxZoom:ot,preventScrolling:ct,onSelectionContextMenu:R,noWheelClassName:j,noPanClassName:C,disableKeyboardA11y:B,onViewportChange:H,isControlledViewport:q}){const{nodesSelectionActive:D,userSelectionActive:P}=Ht(ZR),tt=ju(g,{target:Vb}),rt=ju(E,{target:Vb}),ut=rt||W,gt=rt||O,dt=y&&ut!==!0,yt=tt||P||dt;return IR({deleteKeyCode:h,multiSelectionKeyCode:x}),Q.jsx(BR,{onPaneContextMenu:l,elementsSelectable:k,zoomOnScroll:z,zoomOnPinch:N,panOnScroll:gt,panOnScrollSpeed:_,panOnScrollMode:J,zoomOnDoubleClick:U,panOnDrag:!tt&&ut,defaultViewport:F,translateExtent:nt,minZoom:ft,maxZoom:ot,zoomActivationKeyCode:I,preventScrolling:ct,noWheelClassName:j,noPanClassName:C,onViewportChange:H,isControlledViewport:q,paneClickDistance:d,children:Q.jsxs(UR,{onSelectionStart:v,onSelectionEnd:S,onPaneClick:t,onPaneMouseEnter:e,onPaneMouseMove:i,onPaneMouseLeave:a,onPaneContextMenu:l,onPaneScroll:c,panOnDrag:ut,isSelecting:!!yt,selectionMode:w,selectionKeyPressed:tt,selectionOnDrag:dt,children:[n,D&&Q.jsx(FR,{onSelectionContextMenu:R,noPanClassName:C,disableKeyboardA11y:B})]})})}NT.displayName="FlowRenderer";const QR=et.memo(NT),WR=n=>t=>n?jx(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map(e=>e.id):Array.from(t.nodeLookup.keys());function tM(n){return Ht(et.useCallback(WR(n),[n]),he)}const eM=n=>n.updateNodeInternals;function nM(){const n=Ht(eM),[t]=et.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(e=>{const i=new Map;e.forEach(a=>{const l=a.target.getAttribute("data-id");i.set(l,{id:l,nodeElement:a.target,force:!0})}),n(i)}));return et.useEffect(()=>()=>{t==null||t.disconnect()},[t]),t}function rM({node:n,nodeType:t,hasDimensions:e,resizeObserver:i}){const a=se(),l=et.useRef(null),c=et.useRef(null),d=et.useRef(n.sourcePosition),h=et.useRef(n.targetPosition),g=et.useRef(t),y=e&&!!n.internals.handleBounds;return et.useEffect(()=>{l.current&&!n.hidden&&(!y||c.current!==l.current)&&(c.current&&(i==null||i.unobserve(c.current)),i==null||i.observe(l.current),c.current=l.current)},[y,n.hidden]),et.useEffect(()=>()=>{c.current&&(i==null||i.unobserve(c.current),c.current=null)},[]),et.useEffect(()=>{if(l.current){const w=g.current!==t,v=d.current!==n.sourcePosition,S=h.current!==n.targetPosition;(w||v||S)&&(g.current=t,d.current=n.sourcePosition,h.current=n.targetPosition,a.getState().updateNodeInternals(new Map([[n.id,{id:n.id,nodeElement:l.current,force:!0}]])))}},[n.id,t,n.sourcePosition,n.targetPosition]),l}function iM({id:n,onClick:t,onMouseEnter:e,onMouseMove:i,onMouseLeave:a,onContextMenu:l,onDoubleClick:c,nodesDraggable:d,elementsSelectable:h,nodesConnectable:g,nodesFocusable:y,resizeObserver:w,noDragClassName:v,noPanClassName:S,disableKeyboardA11y:x,rfId:E,nodeTypes:I,nodeClickDistance:k,onError:z}){const{node:N,internals:O,isParent:_}=Ht(yt=>{const pt=yt.nodeLookup.get(n),Ct=yt.parentLookup.has(n);return{node:pt,internals:pt.internals,isParent:Ct}},he);let J=N.type||"default",U=(I==null?void 0:I[J])||$b[J];U===void 0&&(z==null||z("003",Nr.error003(J)),J="default",U=$b.default);const W=!!(N.draggable||d&&typeof N.draggable>"u"),F=!!(N.selectable||h&&typeof N.selectable>"u"),nt=!!(N.connectable||g&&typeof N.connectable>"u"),ft=!!(N.focusable||y&&typeof N.focusable>"u"),ot=se(),ct=Fx(N),R=rM({node:N,nodeType:J,hasDimensions:ct,resizeObserver:w}),j=TT({nodeRef:R,disabled:N.hidden||!W,noDragClassName:v,handleSelector:N.dragHandle,nodeId:n,isSelectable:F,nodeClickDistance:k}),C=AT();if(N.hidden)return null;const B=fs(N),H=XR(N),q=F||W||t||e||i||a,D=e?yt=>e(yt,{...O.userNode}):void 0,P=i?yt=>i(yt,{...O.userNode}):void 0,tt=a?yt=>a(yt,{...O.userNode}):void 0,rt=l?yt=>l(yt,{...O.userNode}):void 0,ut=c?yt=>c(yt,{...O.userNode}):void 0,gt=yt=>{const{selectNodesOnDrag:pt,nodeDragThreshold:Ct}=ot.getState();F&&(!pt||!W||Ct>0)&&Oy({id:n,store:ot,nodeRef:R}),t&&t(yt,{...O.userNode})},dt=yt=>{if(!(Wx(yt.nativeEvent)||x))if(Jx.includes(yt.key)&&F){const pt=yt.key==="Escape";Oy({id:n,store:ot,unselect:pt,nodeRef:R})}else W&&N.selected&&Object.prototype.hasOwnProperty.call(Rd,yt.key)&&(yt.preventDefault(),ot.setState({ariaLiveMessage:`Moved selected node ${yt.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~O.positionAbsolute.x}, y: ${~~O.positionAbsolute.y}`}),C({direction:Rd[yt.key],factor:yt.shiftKey?4:1}))};return Q.jsx("div",{className:be(["react-flow__node",`react-flow__node-${J}`,{[S]:W},N.className,{selected:N.selected,selectable:F,parent:_,draggable:W,dragging:j}]),ref:R,style:{zIndex:O.z,transform:`translate(${O.positionAbsolute.x}px,${O.positionAbsolute.y}px)`,pointerEvents:q?"all":"none",visibility:ct?"visible":"hidden",...N.style,...H},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:D,onMouseMove:P,onMouseLeave:tt,onContextMenu:rt,onClick:gt,onDoubleClick:ut,onKeyDown:ft?dt:void 0,tabIndex:ft?0:void 0,role:ft?"button":void 0,"aria-describedby":x?void 0:`${pT}-${E}`,"aria-label":N.ariaLabel,children:Q.jsx(PR,{value:n,children:Q.jsx(U,{id:n,data:N.data,type:J,positionAbsoluteX:O.positionAbsolute.x,positionAbsoluteY:O.positionAbsolute.y,selected:N.selected??!1,selectable:F,draggable:W,deletable:N.deletable??!0,isConnectable:nt,sourcePosition:N.sourcePosition,targetPosition:N.targetPosition,dragging:j,dragHandle:N.dragHandle,zIndex:O.z,parentId:N.parentId,...B})})})}const sM=n=>({nodesDraggable:n.nodesDraggable,nodesConnectable:n.nodesConnectable,nodesFocusable:n.nodesFocusable,elementsSelectable:n.elementsSelectable,onError:n.onError});function DT(n){const{nodesDraggable:t,nodesConnectable:e,nodesFocusable:i,elementsSelectable:a,onError:l}=Ht(sM,he),c=tM(n.onlyRenderVisibleElements),d=nM();return Q.jsx("div",{className:"react-flow__nodes",style:Fd,children:c.map(h=>Q.jsx(iM,{id:h,nodeTypes:n.nodeTypes,nodeExtent:n.nodeExtent,onClick:n.onNodeClick,onMouseEnter:n.onNodeMouseEnter,onMouseMove:n.onNodeMouseMove,onMouseLeave:n.onNodeMouseLeave,onContextMenu:n.onNodeContextMenu,onDoubleClick:n.onNodeDoubleClick,noDragClassName:n.noDragClassName,noPanClassName:n.noPanClassName,rfId:n.rfId,disableKeyboardA11y:n.disableKeyboardA11y,resizeObserver:d,nodesDraggable:t,nodesConnectable:e,nodesFocusable:i,elementsSelectable:a,nodeClickDistance:n.nodeClickDistance,onError:l},h))})}DT.displayName="NodeRenderer";const aM=et.memo(DT);function oM(n){return Ht(et.useCallback(e=>{if(!n)return e.edges.map(a=>a.id);const i=[];if(e.width&&e.height)for(const a of e.edges){const l=e.nodeLookup.get(a.source),c=e.nodeLookup.get(a.target);l&&c&&sI({sourceNode:l,targetNode:c,width:e.width,height:e.height,transform:e.transform})&&i.push(a.id)}return i},[n]),he)}const lM=({color:n="none",strokeWidth:t=1})=>Q.jsx("polyline",{style:{stroke:n,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),uM=({color:n="none",strokeWidth:t=1})=>Q.jsx("polyline",{style:{stroke:n,fill:n,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),jb={[Dd.Arrow]:lM,[Dd.ArrowClosed]:uM};function cM(n){const t=se();return et.useMemo(()=>{var a,l;return Object.prototype.hasOwnProperty.call(jb,n)?jb[n]:((l=(a=t.getState()).onError)==null||l.call(a,"009",Nr.error009(n)),null)},[n])}const fM=({id:n,type:t,color:e,width:i=12.5,height:a=12.5,markerUnits:l="strokeWidth",strokeWidth:c,orient:d="auto-start-reverse"})=>{const h=cM(t);return h?Q.jsx("marker",{className:"react-flow__arrowhead",id:n,markerWidth:`${i}`,markerHeight:`${a}`,viewBox:"-10 -10 20 20",markerUnits:l,orient:d,refX:"0",refY:"0",children:Q.jsx(h,{color:e,strokeWidth:c})}):null},CT=({defaultColor:n,rfId:t})=>{const e=Ht(l=>l.edges),i=Ht(l=>l.defaultEdgeOptions),a=et.useMemo(()=>hI(e,{id:t,defaultColor:n,defaultMarkerStart:i==null?void 0:i.markerStart,defaultMarkerEnd:i==null?void 0:i.markerEnd}),[e,i,t,n]);return a.length?Q.jsx("svg",{className:"react-flow__marker",children:Q.jsx("defs",{children:a.map(l=>Q.jsx(fM,{id:l.id,type:l.type,color:l.color,width:l.width,height:l.height,markerUnits:l.markerUnits,strokeWidth:l.strokeWidth,orient:l.orient},l.id))})}):null};CT.displayName="MarkerDefinitions";var dM=et.memo(CT);function kT({x:n,y:t,label:e,labelStyle:i,labelShowBg:a=!0,labelBgStyle:l,labelBgPadding:c=[2,4],labelBgBorderRadius:d=2,children:h,className:g,...y}){const[w,v]=et.useState({x:1,y:0,width:0,height:0}),S=be(["react-flow__edge-textwrapper",g]),x=et.useRef(null);return et.useEffect(()=>{if(x.current){const E=x.current.getBBox();v({x:E.x,y:E.y,width:E.width,height:E.height})}},[e]),e?Q.jsxs("g",{transform:`translate(${n-w.width/2} ${t-w.height/2})`,className:S,visibility:w.width?"visible":"hidden",...y,children:[a&&Q.jsx("rect",{width:w.width+2*c[0],x:-c[0],y:-c[1],height:w.height+2*c[1],className:"react-flow__edge-textbg",style:l,rx:d,ry:d}),Q.jsx("text",{className:"react-flow__edge-text",y:w.height/2,dy:"0.3em",ref:x,style:i,children:e}),h]}):null}kT.displayName="EdgeText";const hM=et.memo(kT);function Zd({path:n,labelX:t,labelY:e,label:i,labelStyle:a,labelShowBg:l,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:h,interactionWidth:g=20,...y}){return Q.jsxs(Q.Fragment,{children:[Q.jsx("path",{...y,d:n,fill:"none",className:be(["react-flow__edge-path",y.className])}),g&&Q.jsx("path",{d:n,fill:"none",strokeOpacity:0,strokeWidth:g,className:"react-flow__edge-interaction"}),i&&Qn(t)&&Qn(e)?Q.jsx(hM,{x:t,y:e,label:i,labelStyle:a,labelShowBg:l,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:h}):null]})}function Yb({pos:n,x1:t,y1:e,x2:i,y2:a}){return n===Tt.Left||n===Tt.Right?[.5*(t+i),e]:[t,.5*(e+a)]}function OT({sourceX:n,sourceY:t,sourcePosition:e=Tt.Bottom,targetX:i,targetY:a,targetPosition:l=Tt.Top}){const[c,d]=Yb({pos:e,x1:n,y1:t,x2:i,y2:a}),[h,g]=Yb({pos:l,x1:i,y1:a,x2:n,y2:t}),[y,w,v,S]=eT({sourceX:n,sourceY:t,targetX:i,targetY:a,sourceControlX:c,sourceControlY:d,targetControlX:h,targetControlY:g});return[`M${n},${t} C${c},${d} ${h},${g} ${i},${a}`,y,w,v,S]}function IT(n){return et.memo(({id:t,sourceX:e,sourceY:i,targetX:a,targetY:l,sourcePosition:c=Tt.Bottom,targetPosition:d=Tt.Top,label:h,labelStyle:g,labelShowBg:y,labelBgStyle:w,labelBgPadding:v,labelBgBorderRadius:S,style:x,markerEnd:E,markerStart:I,interactionWidth:k})=>{const[z,N,O]=OT({sourceX:e,sourceY:i,sourcePosition:c,targetX:a,targetY:l,targetPosition:d}),_=n.isInternal?void 0:t;return Q.jsx(Zd,{id:_,path:z,labelX:N,labelY:O,label:h,labelStyle:g,labelShowBg:y,labelBgStyle:w,labelBgPadding:v,labelBgBorderRadius:S,style:x,markerEnd:E,markerStart:I,interactionWidth:k})})}const gM=IT({isInternal:!1}),RT=IT({isInternal:!0});gM.displayName="SimpleBezierEdge";RT.displayName="SimpleBezierEdgeInternal";function MT(n){return et.memo(({id:t,sourceX:e,sourceY:i,targetX:a,targetY:l,label:c,labelStyle:d,labelShowBg:h,labelBgStyle:g,labelBgPadding:y,labelBgBorderRadius:w,style:v,sourcePosition:S=Tt.Bottom,targetPosition:x=Tt.Top,markerEnd:E,markerStart:I,pathOptions:k,interactionWidth:z})=>{const[N,O,_]=Ny({sourceX:e,sourceY:i,sourcePosition:S,targetX:a,targetY:l,targetPosition:x,borderRadius:k==null?void 0:k.borderRadius,offset:k==null?void 0:k.offset}),J=n.isInternal?void 0:t;return Q.jsx(Zd,{id:J,path:N,labelX:O,labelY:_,label:c,labelStyle:d,labelShowBg:h,labelBgStyle:g,labelBgPadding:y,labelBgBorderRadius:w,style:v,markerEnd:E,markerStart:I,interactionWidth:z})})}const BT=MT({isInternal:!1}),zT=MT({isInternal:!0});BT.displayName="SmoothStepEdge";zT.displayName="SmoothStepEdgeInternal";function LT(n){return et.memo(({id:t,...e})=>{var a;const i=n.isInternal?void 0:t;return Q.jsx(BT,{...e,id:i,pathOptions:et.useMemo(()=>{var l;return{borderRadius:0,offset:(l=e.pathOptions)==null?void 0:l.offset}},[(a=e.pathOptions)==null?void 0:a.offset])})})}const mM=LT({isInternal:!1}),_T=LT({isInternal:!0});mM.displayName="StepEdge";_T.displayName="StepEdgeInternal";function UT(n){return et.memo(({id:t,sourceX:e,sourceY:i,targetX:a,targetY:l,label:c,labelStyle:d,labelShowBg:h,labelBgStyle:g,labelBgPadding:y,labelBgBorderRadius:w,style:v,markerEnd:S,markerStart:x,interactionWidth:E})=>{const[I,k,z]=iT({sourceX:e,sourceY:i,targetX:a,targetY:l}),N=n.isInternal?void 0:t;return Q.jsx(Zd,{id:N,path:I,labelX:k,labelY:z,label:c,labelStyle:d,labelShowBg:h,labelBgStyle:g,labelBgPadding:y,labelBgBorderRadius:w,style:v,markerEnd:S,markerStart:x,interactionWidth:E})})}const yM=UT({isInternal:!1}),qT=UT({isInternal:!0});yM.displayName="StraightEdge";qT.displayName="StraightEdgeInternal";function PT(n){return et.memo(({id:t,sourceX:e,sourceY:i,targetX:a,targetY:l,sourcePosition:c=Tt.Bottom,targetPosition:d=Tt.Top,label:h,labelStyle:g,labelShowBg:y,labelBgStyle:w,labelBgPadding:v,labelBgBorderRadius:S,style:x,markerEnd:E,markerStart:I,pathOptions:k,interactionWidth:z})=>{const[N,O,_]=nT({sourceX:e,sourceY:i,sourcePosition:c,targetX:a,targetY:l,targetPosition:d,curvature:k==null?void 0:k.curvature}),J=n.isInternal?void 0:t;return Q.jsx(Zd,{id:J,path:N,labelX:O,labelY:_,label:h,labelStyle:g,labelShowBg:y,labelBgStyle:w,labelBgPadding:v,labelBgBorderRadius:S,style:x,markerEnd:E,markerStart:I,interactionWidth:z})})}const pM=PT({isInternal:!1}),JT=PT({isInternal:!0});pM.displayName="BezierEdge";JT.displayName="BezierEdgeInternal";const Gb={default:JT,straight:qT,step:_T,smoothstep:zT,simplebezier:RT},Xb={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},vM=(n,t,e)=>e===Tt.Left?n-t:e===Tt.Right?n+t:n,wM=(n,t,e)=>e===Tt.Top?n-t:e===Tt.Bottom?n+t:n,Kb="react-flow__edgeupdater";function Fb({position:n,centerX:t,centerY:e,radius:i=10,onMouseDown:a,onMouseEnter:l,onMouseOut:c,type:d}){return Q.jsx("circle",{onMouseDown:a,onMouseEnter:l,onMouseOut:c,className:be([Kb,`${Kb}-${d}`]),cx:vM(t,i,n),cy:wM(e,i,n),r:i,stroke:"transparent",fill:"transparent"})}function SM({isReconnectable:n,reconnectRadius:t,edge:e,sourceX:i,sourceY:a,targetX:l,targetY:c,sourcePosition:d,targetPosition:h,onReconnect:g,onReconnectStart:y,onReconnectEnd:w,setReconnecting:v,setUpdateHover:S}){const x=se(),E=(O,_)=>{if(O.button!==0)return;const{autoPanOnConnect:J,domNode:U,isValidConnection:W,connectionMode:F,connectionRadius:nt,lib:ft,onConnectStart:ot,onConnectEnd:ct,cancelConnection:R,nodeLookup:j,rfId:C,panBy:B,updateConnection:H}=x.getState(),q=_.type==="target";v(!0),y==null||y(O,e,_.type);const D=(tt,rt)=>{v(!1),w==null||w(tt,e,_.type,rt)},P=tt=>g==null?void 0:g(e,tt);ky.onPointerDown(O.nativeEvent,{autoPanOnConnect:J,connectionMode:F,connectionRadius:nt,domNode:U,handleId:_.id,nodeId:_.nodeId,nodeLookup:j,isTarget:q,edgeUpdaterType:_.type,lib:ft,flowId:C,cancelConnection:R,panBy:B,isValidConnection:W,onConnect:P,onConnectStart:ot,onConnectEnd:ct,onReconnectEnd:D,updateConnection:H,getTransform:()=>x.getState().transform,getFromHandle:()=>x.getState().connection.fromHandle})},I=O=>E(O,{nodeId:e.target,id:e.targetHandle??null,type:"target"}),k=O=>E(O,{nodeId:e.source,id:e.sourceHandle??null,type:"source"}),z=()=>S(!0),N=()=>S(!1);return Q.jsxs(Q.Fragment,{children:[(n===!0||n==="source")&&Q.jsx(Fb,{position:d,centerX:i,centerY:a,radius:t,onMouseDown:I,onMouseEnter:z,onMouseOut:N,type:"source"}),(n===!0||n==="target")&&Q.jsx(Fb,{position:h,centerX:l,centerY:c,radius:t,onMouseDown:k,onMouseEnter:z,onMouseOut:N,type:"target"})]})}function bM({id:n,edgesFocusable:t,edgesReconnectable:e,elementsSelectable:i,onClick:a,onDoubleClick:l,onContextMenu:c,onMouseEnter:d,onMouseMove:h,onMouseLeave:g,reconnectRadius:y,onReconnect:w,onReconnectStart:v,onReconnectEnd:S,rfId:x,edgeTypes:E,noPanClassName:I,onError:k,disableKeyboardA11y:z}){let N=Ht(bt=>bt.edgeLookup.get(n));const O=Ht(bt=>bt.defaultEdgeOptions);N=O?{...O,...N}:N;let _=N.type||"default",J=(E==null?void 0:E[_])||Gb[_];J===void 0&&(k==null||k("011",Nr.error011(_)),_="default",J=Gb.default);const U=!!(N.focusable||t&&typeof N.focusable>"u"),W=typeof w<"u"&&(N.reconnectable||e&&typeof N.reconnectable>"u"),F=!!(N.selectable||i&&typeof N.selectable>"u"),nt=et.useRef(null),[ft,ot]=et.useState(!1),[ct,R]=et.useState(!1),j=se(),{zIndex:C,sourceX:B,sourceY:H,targetX:q,targetY:D,sourcePosition:P,targetPosition:tt}=Ht(et.useCallback(bt=>{const Yt=bt.nodeLookup.get(N.source),qt=bt.nodeLookup.get(N.target);if(!Yt||!qt)return{zIndex:N.zIndex,...Xb};const xe=dI({id:n,sourceNode:Yt,targetNode:qt,sourceHandle:N.sourceHandle||null,targetHandle:N.targetHandle||null,connectionMode:bt.connectionMode,onError:k});return{zIndex:iI({selected:N.selected,zIndex:N.zIndex,sourceNode:Yt,targetNode:qt,elevateOnSelect:bt.elevateEdgesOnSelect}),...xe||Xb}},[N.source,N.target,N.sourceHandle,N.targetHandle,N.selected,N.zIndex]),he),rt=et.useMemo(()=>N.markerStart?`url('#${Dy(N.markerStart,x)}')`:void 0,[N.markerStart,x]),ut=et.useMemo(()=>N.markerEnd?`url('#${Dy(N.markerEnd,x)}')`:void 0,[N.markerEnd,x]);if(N.hidden||B===null||H===null||q===null||D===null)return null;const gt=bt=>{var an;const{addSelectedEdges:Yt,unselectNodesAndEdges:qt,multiSelectionActive:xe}=j.getState();F&&(j.setState({nodesSelectionActive:!1}),N.selected&&xe?(qt({nodes:[],edges:[N]}),(an=nt.current)==null||an.blur()):Yt([n])),a&&a(bt,N)},dt=l?bt=>{l(bt,{...N})}:void 0,yt=c?bt=>{c(bt,{...N})}:void 0,pt=d?bt=>{d(bt,{...N})}:void 0,Ct=h?bt=>{h(bt,{...N})}:void 0,Vt=g?bt=>{g(bt,{...N})}:void 0,Ot=bt=>{var Yt;if(!z&&Jx.includes(bt.key)&&F){const{unselectNodesAndEdges:qt,addSelectedEdges:xe}=j.getState();bt.key==="Escape"?((Yt=nt.current)==null||Yt.blur(),qt({edges:[N]})):xe([n])}};return Q.jsx("svg",{style:{zIndex:C},children:Q.jsxs("g",{className:be(["react-flow__edge",`react-flow__edge-${_}`,N.className,I,{selected:N.selected,animated:N.animated,inactive:!F&&!a,updating:ft,selectable:F}]),onClick:gt,onDoubleClick:dt,onContextMenu:yt,onMouseEnter:pt,onMouseMove:Ct,onMouseLeave:Vt,onKeyDown:U?Ot:void 0,tabIndex:U?0:void 0,role:U?"button":"img","data-id":n,"data-testid":`rf__edge-${n}`,"aria-label":N.ariaLabel===null?void 0:N.ariaLabel||`Edge from ${N.source} to ${N.target}`,"aria-describedby":U?`${vT}-${x}`:void 0,ref:nt,children:[!ct&&Q.jsx(J,{id:n,source:N.source,target:N.target,type:N.type,selected:N.selected,animated:N.animated,selectable:F,deletable:N.deletable??!0,label:N.label,labelStyle:N.labelStyle,labelShowBg:N.labelShowBg,labelBgStyle:N.labelBgStyle,labelBgPadding:N.labelBgPadding,labelBgBorderRadius:N.labelBgBorderRadius,sourceX:B,sourceY:H,targetX:q,targetY:D,sourcePosition:P,targetPosition:tt,data:N.data,style:N.style,sourceHandleId:N.sourceHandle,targetHandleId:N.targetHandle,markerStart:rt,markerEnd:ut,pathOptions:"pathOptions"in N?N.pathOptions:void 0,interactionWidth:N.interactionWidth}),W&&Q.jsx(SM,{edge:N,isReconnectable:W,reconnectRadius:y,onReconnect:w,onReconnectStart:v,onReconnectEnd:S,sourceX:B,sourceY:H,targetX:q,targetY:D,sourcePosition:P,targetPosition:tt,setUpdateHover:ot,setReconnecting:R})]})})}const xM=n=>({edgesFocusable:n.edgesFocusable,edgesReconnectable:n.edgesReconnectable,elementsSelectable:n.elementsSelectable,connectionMode:n.connectionMode,onError:n.onError});function HT({defaultMarkerColor:n,onlyRenderVisibleElements:t,rfId:e,edgeTypes:i,noPanClassName:a,onReconnect:l,onEdgeContextMenu:c,onEdgeMouseEnter:d,onEdgeMouseMove:h,onEdgeMouseLeave:g,onEdgeClick:y,reconnectRadius:w,onEdgeDoubleClick:v,onReconnectStart:S,onReconnectEnd:x,disableKeyboardA11y:E}){const{edgesFocusable:I,edgesReconnectable:k,elementsSelectable:z,onError:N}=Ht(xM,he),O=oM(t);return Q.jsxs("div",{className:"react-flow__edges",children:[Q.jsx(dM,{defaultColor:n,rfId:e}),O.map(_=>Q.jsx(bM,{id:_,edgesFocusable:I,edgesReconnectable:k,elementsSelectable:z,noPanClassName:a,onReconnect:l,onContextMenu:c,onMouseEnter:d,onMouseMove:h,onMouseLeave:g,onClick:y,reconnectRadius:w,onDoubleClick:v,onReconnectStart:S,onReconnectEnd:x,rfId:e,onError:N,edgeTypes:i,disableKeyboardA11y:E},_))]})}HT.displayName="EdgeRenderer";const TM=et.memo(HT),AM=n=>`translate(${n.transform[0]}px,${n.transform[1]}px) scale(${n.transform[2]})`;function EM({children:n}){const t=Ht(AM);return Q.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:n})}function NM(n){const t=hp(),e=et.useRef(!1);et.useEffect(()=>{!e.current&&t.viewportInitialized&&n&&(setTimeout(()=>n(t),1),e.current=!0)},[n,t.viewportInitialized])}const DM=n=>{var t;return(t=n.panZoom)==null?void 0:t.syncViewport};function CM(n){const t=Ht(DM),e=se();return et.useEffect(()=>{n&&(t==null||t(n),e.setState({transform:[n.x,n.y,n.zoom]}))},[n,t]),null}function kM(n){return n.connection.inProgress?{...n.connection,to:nc(n.connection.to,n.transform)}:{...n.connection}}function OM(n){return kM}function IM(n){const t=OM();return Ht(t,he)}const RM=n=>({nodesConnectable:n.nodesConnectable,isValid:n.connection.isValid,inProgress:n.connection.inProgress,width:n.width,height:n.height});function MM({containerStyle:n,style:t,type:e,component:i}){const{nodesConnectable:a,width:l,height:c,isValid:d,inProgress:h}=Ht(RM,he);return!(l&&a&&h)?null:Q.jsx("svg",{style:n,width:l,height:c,className:"react-flow__connectionline react-flow__container",children:Q.jsx("g",{className:be(["react-flow__connection",$x(d)]),children:Q.jsx($T,{style:t,type:e,CustomComponent:i,isValid:d})})})}const $T=({style:n,type:t=Ks.Bezier,CustomComponent:e,isValid:i})=>{const{inProgress:a,from:l,fromNode:c,fromHandle:d,fromPosition:h,to:g,toNode:y,toHandle:w,toPosition:v}=IM();if(!a)return;if(e)return Q.jsx(e,{connectionLineType:t,connectionLineStyle:n,fromNode:c,fromHandle:d,fromX:l.x,fromY:l.y,toX:g.x,toY:g.y,fromPosition:h,toPosition:v,connectionStatus:$x(i),toNode:y,toHandle:w});let S="";const x={sourceX:l.x,sourceY:l.y,sourcePosition:h,targetX:g.x,targetY:g.y,targetPosition:v};switch(t){case Ks.Bezier:[S]=nT(x);break;case Ks.SimpleBezier:[S]=OT(x);break;case Ks.Step:[S]=Ny({...x,borderRadius:0});break;case Ks.SmoothStep:[S]=Ny(x);break;default:[S]=iT(x)}return Q.jsx("path",{d:S,fill:"none",className:"react-flow__connection-path",style:n})};$T.displayName="ConnectionLine";const BM={};function Zb(n=BM){et.useRef(n),se(),et.useEffect(()=>{},[n])}function zM(){se(),et.useRef(!1),et.useEffect(()=>{},[])}function VT({nodeTypes:n,edgeTypes:t,onInit:e,onNodeClick:i,onEdgeClick:a,onNodeDoubleClick:l,onEdgeDoubleClick:c,onNodeMouseEnter:d,onNodeMouseMove:h,onNodeMouseLeave:g,onNodeContextMenu:y,onSelectionContextMenu:w,onSelectionStart:v,onSelectionEnd:S,connectionLineType:x,connectionLineStyle:E,connectionLineComponent:I,connectionLineContainerStyle:k,selectionKeyCode:z,selectionOnDrag:N,selectionMode:O,multiSelectionKeyCode:_,panActivationKeyCode:J,zoomActivationKeyCode:U,deleteKeyCode:W,onlyRenderVisibleElements:F,elementsSelectable:nt,defaultViewport:ft,translateExtent:ot,minZoom:ct,maxZoom:R,preventScrolling:j,defaultMarkerColor:C,zoomOnScroll:B,zoomOnPinch:H,panOnScroll:q,panOnScrollSpeed:D,panOnScrollMode:P,zoomOnDoubleClick:tt,panOnDrag:rt,onPaneClick:ut,onPaneMouseEnter:gt,onPaneMouseMove:dt,onPaneMouseLeave:yt,onPaneScroll:pt,onPaneContextMenu:Ct,paneClickDistance:Vt,nodeClickDistance:Ot,onEdgeContextMenu:bt,onEdgeMouseEnter:Yt,onEdgeMouseMove:qt,onEdgeMouseLeave:xe,reconnectRadius:an,onReconnect:Oe,onReconnectStart:sl,onReconnectEnd:Ja,noDragClassName:ds,noWheelClassName:hs,noPanClassName:ia,disableKeyboardA11y:gs,nodeExtent:al,rfId:sa,viewport:Jn,onViewportChange:Ee}){return Zb(n),Zb(t),zM(),NM(e),CM(Jn),Q.jsx(QR,{onPaneClick:ut,onPaneMouseEnter:gt,onPaneMouseMove:dt,onPaneMouseLeave:yt,onPaneContextMenu:Ct,onPaneScroll:pt,paneClickDistance:Vt,deleteKeyCode:W,selectionKeyCode:z,selectionOnDrag:N,selectionMode:O,onSelectionStart:v,onSelectionEnd:S,multiSelectionKeyCode:_,panActivationKeyCode:J,zoomActivationKeyCode:U,elementsSelectable:nt,zoomOnScroll:B,zoomOnPinch:H,zoomOnDoubleClick:tt,panOnScroll:q,panOnScrollSpeed:D,panOnScrollMode:P,panOnDrag:rt,defaultViewport:ft,translateExtent:ot,minZoom:ct,maxZoom:R,onSelectionContextMenu:w,preventScrolling:j,noDragClassName:ds,noWheelClassName:hs,noPanClassName:ia,disableKeyboardA11y:gs,onViewportChange:Ee,isControlledViewport:!!Jn,children:Q.jsxs(EM,{children:[Q.jsx(TM,{edgeTypes:t,onEdgeClick:a,onEdgeDoubleClick:c,onReconnect:Oe,onReconnectStart:sl,onReconnectEnd:Ja,onlyRenderVisibleElements:F,onEdgeContextMenu:bt,onEdgeMouseEnter:Yt,onEdgeMouseMove:qt,onEdgeMouseLeave:xe,reconnectRadius:an,defaultMarkerColor:C,noPanClassName:ia,disableKeyboardA11y:gs,rfId:sa}),Q.jsx(MM,{style:E,type:x,component:I,containerStyle:k}),Q.jsx("div",{className:"react-flow__edgelabel-renderer"}),Q.jsx(aM,{nodeTypes:n,onNodeClick:i,onNodeDoubleClick:l,onNodeMouseEnter:d,onNodeMouseMove:h,onNodeMouseLeave:g,onNodeContextMenu:y,nodeClickDistance:Ot,onlyRenderVisibleElements:F,noPanClassName:ia,noDragClassName:ds,disableKeyboardA11y:gs,nodeExtent:al,rfId:sa}),Q.jsx("div",{className:"react-flow__viewport-portal"})]})})}VT.displayName="GraphView";const LM=et.memo(VT),Qb=({nodes:n,edges:t,defaultNodes:e,defaultEdges:i,width:a,height:l,fitView:c,nodeOrigin:d,nodeExtent:h}={})=>{const g=new Map,y=new Map,w=new Map,v=new Map,S=i??t??[],x=e??n??[],E=d??[0,0],I=h??Ju;aT(w,v,S),Cy(x,g,y,{nodeOrigin:E,nodeExtent:I,elevateNodesOnSelect:!1});let k=[0,0,1];if(c&&a&&l){const z=ec(g,{filter:J=>!!((J.width||J.initialWidth)&&(J.height||J.initialHeight))}),{x:N,y:O,zoom:_}=op(z,a,l,.5,2,.1);k=[N,O,_]}return{rfId:"1",width:0,height:0,transform:k,nodes:x,nodeLookup:g,parentLookup:y,edges:S,edgeLookup:v,connectionLookup:w,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:e!==void 0,hasDefaultEdges:i!==void 0,panZoom:null,minZoom:.5,maxZoom:2,translateExtent:Ju,nodeExtent:I,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:el.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:E,nodeDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:c??!1,fitViewOptions:void 0,fitViewResolver:null,connection:{...Hx},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanSpeed:15,connectionRadius:20,onError:tI,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1}},_M=({nodes:n,edges:t,defaultNodes:e,defaultEdges:i,width:a,height:l,fitView:c,nodeOrigin:d,nodeExtent:h})=>tR((g,y)=>{async function w(){const{nodeLookup:v,panZoom:S,fitViewOptions:x,fitViewResolver:E,width:I,height:k,minZoom:z,maxZoom:N}=y();S&&(await QO({nodes:v,width:I,height:k,panZoom:S,minZoom:z,maxZoom:N},x),E==null||E.resolve(!0),g({fitViewResolver:null}))}return{...Qb({nodes:n,edges:t,width:a,height:l,fitView:c,nodeOrigin:d,nodeExtent:h,defaultNodes:e,defaultEdges:i}),setNodes:v=>{const{nodeLookup:S,parentLookup:x,nodeOrigin:E,elevateNodesOnSelect:I,fitViewQueued:k}=y(),z=Cy(v,S,x,{nodeOrigin:E,nodeExtent:h,elevateNodesOnSelect:I,checkEquality:!0});k&&z?(w(),g({nodes:v,fitViewQueued:!1,fitViewOptions:void 0})):g({nodes:v})},setEdges:v=>{const{connectionLookup:S,edgeLookup:x}=y();aT(S,x,v),g({edges:v})},setDefaultNodesAndEdges:(v,S)=>{if(v){const{setNodes:x}=y();x(v),g({hasDefaultNodes:!0})}if(S){const{setEdges:x}=y();x(S),g({hasDefaultEdges:!0})}},updateNodeInternals:v=>{const{triggerNodeChanges:S,nodeLookup:x,parentLookup:E,domNode:I,nodeOrigin:k,nodeExtent:z,debug:N,fitViewQueued:O}=y(),{changes:_,updatedInternals:J}=vI(v,x,E,I,k,z);J&&(mI(x,E,{nodeOrigin:k,nodeExtent:z}),O?(w(),g({fitViewQueued:!1,fitViewOptions:void 0})):g({}),(_==null?void 0:_.length)>0&&(N&&console.log("React Flow: trigger node changes",_),S==null||S(_)))},updateNodePositions:(v,S=!1)=>{const x=[],E=[],{nodeLookup:I,triggerNodeChanges:k}=y();for(const[z,N]of v){const O=I.get(z),_=!!(O!=null&&O.expandParent&&(O!=null&&O.parentId)&&(N!=null&&N.position)),J={id:z,type:"position",position:_?{x:Math.max(0,N.position.x),y:Math.max(0,N.position.y)}:N.position,dragging:S};_&&O.parentId&&x.push({id:z,parentId:O.parentId,rect:{...N.internals.positionAbsolute,width:N.measured.width??0,height:N.measured.height??0}}),E.push(J)}if(x.length>0){const{parentLookup:z,nodeOrigin:N}=y(),O=dp(x,I,z,N);E.push(...O)}k(E)},triggerNodeChanges:v=>{const{onNodesChange:S,setNodes:x,nodes:E,hasDefaultNodes:I,debug:k}=y();if(v!=null&&v.length){if(I){const z=bR(v,E);x(z)}k&&console.log("React Flow: trigger node changes",v),S==null||S(v)}},triggerEdgeChanges:v=>{const{onEdgesChange:S,setEdges:x,edges:E,hasDefaultEdges:I,debug:k}=y();if(v!=null&&v.length){if(I){const z=xR(v,E);x(z)}k&&console.log("React Flow: trigger edge changes",v),S==null||S(v)}},addSelectedNodes:v=>{const{multiSelectionActive:S,edgeLookup:x,nodeLookup:E,triggerNodeChanges:I,triggerEdgeChanges:k}=y();if(S){const z=v.map(N=>Ca(N,!0));I(z);return}I(_o(E,new Set([...v]),!0)),k(_o(x))},addSelectedEdges:v=>{const{multiSelectionActive:S,edgeLookup:x,nodeLookup:E,triggerNodeChanges:I,triggerEdgeChanges:k}=y();if(S){const z=v.map(N=>Ca(N,!0));k(z);return}k(_o(x,new Set([...v]))),I(_o(E,new Set,!0))},unselectNodesAndEdges:({nodes:v,edges:S}={})=>{const{edges:x,nodes:E,nodeLookup:I,triggerNodeChanges:k,triggerEdgeChanges:z}=y(),N=v||E,O=S||x,_=N.map(U=>{const W=I.get(U.id);return W&&(W.selected=!1),Ca(U.id,!1)}),J=O.map(U=>Ca(U.id,!1));k(_),z(J)},setMinZoom:v=>{const{panZoom:S,maxZoom:x}=y();S==null||S.setScaleExtent([v,x]),g({minZoom:v})},setMaxZoom:v=>{const{panZoom:S,minZoom:x}=y();S==null||S.setScaleExtent([x,v]),g({maxZoom:v})},setTranslateExtent:v=>{var S;(S=y().panZoom)==null||S.setTranslateExtent(v),g({translateExtent:v})},setPaneClickDistance:v=>{var S;(S=y().panZoom)==null||S.setClickDistance(v)},resetSelectedElements:()=>{const{edges:v,nodes:S,triggerNodeChanges:x,triggerEdgeChanges:E}=y(),I=S.reduce((z,N)=>N.selected?[...z,Ca(N.id,!1)]:z,[]),k=v.reduce((z,N)=>N.selected?[...z,Ca(N.id,!1)]:z,[]);x(I),E(k)},setNodeExtent:v=>{const{nodes:S,nodeLookup:x,parentLookup:E,nodeOrigin:I,elevateNodesOnSelect:k,nodeExtent:z}=y();v[0][0]===z[0][0]&&v[0][1]===z[0][1]&&v[1][0]===z[1][0]&&v[1][1]===z[1][1]||(Cy(S,x,E,{nodeOrigin:I,nodeExtent:v,elevateNodesOnSelect:k,checkEquality:!1}),g({nodeExtent:v}))},panBy:v=>{const{transform:S,width:x,height:E,panZoom:I,translateExtent:k}=y();return wI({delta:v,panZoom:I,transform:S,translateExtent:k,width:x,height:E})},cancelConnection:()=>{g({connection:{...Hx}})},updateConnection:v=>{g({connection:v})},reset:()=>g({...Qb()})}},Object.is);function UM({initialNodes:n,initialEdges:t,defaultNodes:e,defaultEdges:i,initialWidth:a,initialHeight:l,fitView:c,nodeOrigin:d,nodeExtent:h,children:g}){const[y]=et.useState(()=>_M({nodes:n,edges:t,defaultNodes:e,defaultEdges:i,width:a,height:l,fitView:c,nodeOrigin:d,nodeExtent:h}));return Q.jsx(eR,{value:y,children:Q.jsx(NR,{children:g})})}function qM({children:n,nodes:t,edges:e,defaultNodes:i,defaultEdges:a,width:l,height:c,fitView:d,nodeOrigin:h,nodeExtent:g}){return et.useContext(Xd)?Q.jsx(Q.Fragment,{children:n}):Q.jsx(UM,{initialNodes:t,initialEdges:e,defaultNodes:i,defaultEdges:a,initialWidth:l,initialHeight:c,fitView:d,nodeOrigin:h,nodeExtent:g,children:n})}const PM={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function JM({nodes:n,edges:t,defaultNodes:e,defaultEdges:i,className:a,nodeTypes:l,edgeTypes:c,onNodeClick:d,onEdgeClick:h,onInit:g,onMove:y,onMoveStart:w,onMoveEnd:v,onConnect:S,onConnectStart:x,onConnectEnd:E,onClickConnectStart:I,onClickConnectEnd:k,onNodeMouseEnter:z,onNodeMouseMove:N,onNodeMouseLeave:O,onNodeContextMenu:_,onNodeDoubleClick:J,onNodeDragStart:U,onNodeDrag:W,onNodeDragStop:F,onNodesDelete:nt,onEdgesDelete:ft,onDelete:ot,onSelectionChange:ct,onSelectionDragStart:R,onSelectionDrag:j,onSelectionDragStop:C,onSelectionContextMenu:B,onSelectionStart:H,onSelectionEnd:q,onBeforeDelete:D,connectionMode:P,connectionLineType:tt=Ks.Bezier,connectionLineStyle:rt,connectionLineComponent:ut,connectionLineContainerStyle:gt,deleteKeyCode:dt="Backspace",selectionKeyCode:yt="Shift",selectionOnDrag:pt=!1,selectionMode:Ct=Hu.Full,panActivationKeyCode:Vt="Space",multiSelectionKeyCode:Ot=Od()?"Meta":"Control",zoomActivationKeyCode:bt=Od()?"Meta":"Control",snapToGrid:Yt,snapGrid:qt,onlyRenderVisibleElements:xe=!1,selectNodesOnDrag:an,nodesDraggable:Oe,nodesConnectable:sl,nodesFocusable:Ja,nodeOrigin:ds=wT,edgesFocusable:hs,edgesReconnectable:ia,elementsSelectable:gs=!0,defaultViewport:al=gR,minZoom:sa=.5,maxZoom:Jn=2,translateExtent:Ee=Ju,preventScrolling:nr=!0,nodeExtent:Ie,defaultMarkerColor:Qd="#b1b1b7",zoomOnScroll:Wd=!0,zoomOnPinch:th=!0,panOnScroll:Ha=!1,panOnScrollSpeed:$a=.5,panOnScrollMode:Cr=Ba.Free,zoomOnDoubleClick:Va=!0,panOnDrag:aa=!0,onPaneClick:eh,onPaneMouseEnter:rc,onPaneMouseMove:ic,onPaneMouseLeave:ol,onPaneScroll:oa,onPaneContextMenu:nh,paneClickDistance:ll=0,nodeClickDistance:sc=0,children:ul,onReconnect:cl,onReconnectStart:ac,onReconnectEnd:rh,onEdgeContextMenu:rr,onEdgeDoubleClick:Ne,onEdgeMouseEnter:qe,onEdgeMouseMove:ms,onEdgeMouseLeave:fl,reconnectRadius:ih=10,onNodesChange:sh,onEdgesChange:oc,noDragClassName:la="nodrag",noWheelClassName:dl="nowheel",noPanClassName:kr="nopan",fitView:Or,fitViewOptions:ua,connectOnClick:ys,attributionPosition:ve,proOptions:lc,defaultEdgeOptions:uc,elevateNodesOnSelect:Ir,elevateEdgesOnSelect:ps,disableKeyboardA11y:cc=!1,autoPanOnConnect:fc,autoPanOnNodeDrag:dc,autoPanSpeed:ah,connectionRadius:ja,isValidConnection:Ya,onError:Hn,style:hl,id:gl,nodeDragThreshold:vs,viewport:ml,onViewportChange:yl,width:oh,height:hc,colorMode:Ye="light",debug:gc,onScroll:Ga,...Xa},mc){const ws=gl||"1",lh=vR(Ye),Ge=et.useCallback(Ka=>{Ka.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),Ga==null||Ga(Ka)},[Ga]);return Q.jsx("div",{"data-testid":"rf__wrapper",...Xa,onScroll:Ge,style:{...hl,...PM},ref:mc,className:be(["react-flow",a,lh]),id:gl,children:Q.jsxs(qM,{nodes:n,edges:t,width:oh,height:hc,fitView:Or,nodeOrigin:ds,nodeExtent:Ie,children:[Q.jsx(LM,{onInit:g,onNodeClick:d,onEdgeClick:h,onNodeMouseEnter:z,onNodeMouseMove:N,onNodeMouseLeave:O,onNodeContextMenu:_,onNodeDoubleClick:J,nodeTypes:l,edgeTypes:c,connectionLineType:tt,connectionLineStyle:rt,connectionLineComponent:ut,connectionLineContainerStyle:gt,selectionKeyCode:yt,selectionOnDrag:pt,selectionMode:Ct,deleteKeyCode:dt,multiSelectionKeyCode:Ot,panActivationKeyCode:Vt,zoomActivationKeyCode:bt,onlyRenderVisibleElements:xe,defaultViewport:al,translateExtent:Ee,minZoom:sa,maxZoom:Jn,preventScrolling:nr,zoomOnScroll:Wd,zoomOnPinch:th,zoomOnDoubleClick:Va,panOnScroll:Ha,panOnScrollSpeed:$a,panOnScrollMode:Cr,panOnDrag:aa,onPaneClick:eh,onPaneMouseEnter:rc,onPaneMouseMove:ic,onPaneMouseLeave:ol,onPaneScroll:oa,onPaneContextMenu:nh,paneClickDistance:ll,nodeClickDistance:sc,onSelectionContextMenu:B,onSelectionStart:H,onSelectionEnd:q,onReconnect:cl,onReconnectStart:ac,onReconnectEnd:rh,onEdgeContextMenu:rr,onEdgeDoubleClick:Ne,onEdgeMouseEnter:qe,onEdgeMouseMove:ms,onEdgeMouseLeave:fl,reconnectRadius:ih,defaultMarkerColor:Qd,noDragClassName:la,noWheelClassName:dl,noPanClassName:kr,rfId:ws,disableKeyboardA11y:cc,nodeExtent:Ie,viewport:ml,onViewportChange:yl}),Q.jsx(pR,{nodes:n,edges:t,defaultNodes:e,defaultEdges:i,onConnect:S,onConnectStart:x,onConnectEnd:E,onClickConnectStart:I,onClickConnectEnd:k,nodesDraggable:Oe,nodesConnectable:sl,nodesFocusable:Ja,edgesFocusable:hs,edgesReconnectable:ia,elementsSelectable:gs,elevateNodesOnSelect:Ir,elevateEdgesOnSelect:ps,minZoom:sa,maxZoom:Jn,nodeExtent:Ie,onNodesChange:sh,onEdgesChange:oc,snapToGrid:Yt,snapGrid:qt,connectionMode:P,translateExtent:Ee,connectOnClick:ys,defaultEdgeOptions:uc,fitView:Or,fitViewOptions:ua,onNodesDelete:nt,onEdgesDelete:ft,onDelete:ot,onNodeDragStart:U,onNodeDrag:W,onNodeDragStop:F,onSelectionDrag:j,onSelectionDragStart:R,onSelectionDragStop:C,onMove:y,onMoveStart:w,onMoveEnd:v,noPanClassName:kr,nodeOrigin:ds,rfId:ws,autoPanOnConnect:fc,autoPanOnNodeDrag:dc,autoPanSpeed:ah,onError:Hn,connectionRadius:ja,isValidConnection:Ya,selectNodesOnDrag:an,nodeDragThreshold:vs,onBeforeDelete:D,paneClickDistance:ll,debug:gc}),Q.jsx(hR,{onSelectionChange:ct}),ul,Q.jsx(lR,{proOptions:lc,position:ve}),Q.jsx(aR,{rfId:ws,disableKeyboardA11y:cc})]})})}var HM=bT(JM);function $M({dimensions:n,lineWidth:t,variant:e,className:i}){return Q.jsx("path",{strokeWidth:t,d:`M${n[0]/2} 0 V${n[1]} M0 ${n[1]/2} H${n[0]}`,className:be(["react-flow__background-pattern",e,i])})}function VM({radius:n,className:t}){return Q.jsx("circle",{cx:n,cy:n,r:n,className:be(["react-flow__background-pattern","dots",t])})}var ea;(function(n){n.Lines="lines",n.Dots="dots",n.Cross="cross"})(ea||(ea={}));const jM={[ea.Dots]:1,[ea.Lines]:1,[ea.Cross]:6},YM=n=>({transform:n.transform,patternId:`pattern-${n.rfId}`});function jT({id:n,variant:t=ea.Dots,gap:e=20,size:i,lineWidth:a=1,offset:l=0,color:c,bgColor:d,style:h,className:g,patternClassName:y}){const w=et.useRef(null),{transform:v,patternId:S}=Ht(YM,he),x=i||jM[t],E=t===ea.Dots,I=t===ea.Cross,k=Array.isArray(e)?e:[e,e],z=[k[0]*v[2]||1,k[1]*v[2]||1],N=x*v[2],O=Array.isArray(l)?l:[l,l],_=I?[N,N]:z,J=[O[0]*v[2]||1+_[0]/2,O[1]*v[2]||1+_[1]/2],U=`${S}${n||""}`;return Q.jsxs("svg",{className:be(["react-flow__background",g]),style:{...h,...Fd,"--xy-background-color-props":d,"--xy-background-pattern-color-props":c},ref:w,"data-testid":"rf__background",children:[Q.jsx("pattern",{id:U,x:v[0]%z[0],y:v[1]%z[1],width:z[0],height:z[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${J[0]},-${J[1]})`,children:E?Q.jsx(VM,{radius:N/2,className:y}):Q.jsx($M,{dimensions:_,lineWidth:a,variant:t,className:y})}),Q.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${U})`})]})}jT.displayName="Background";const GM=et.memo(jT);function XM(){return Q.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:Q.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function KM(){return Q.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:Q.jsx("path",{d:"M0 0h32v4.2H0z"})})}function FM(){return Q.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:Q.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function ZM(){return Q.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:Q.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function QM(){return Q.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:Q.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function Lf({children:n,className:t,...e}){return Q.jsx("button",{type:"button",className:be(["react-flow__controls-button",t]),...e,children:n})}const WM=n=>({isInteractive:n.nodesDraggable||n.nodesConnectable||n.elementsSelectable,minZoomReached:n.transform[2]<=n.minZoom,maxZoomReached:n.transform[2]>=n.maxZoom});function YT({style:n,showZoom:t=!0,showFitView:e=!0,showInteractive:i=!0,fitViewOptions:a,onZoomIn:l,onZoomOut:c,onFitView:d,onInteractiveChange:h,className:g,children:y,position:w="bottom-left",orientation:v="vertical","aria-label":S="React Flow controls"}){const x=se(),{isInteractive:E,minZoomReached:I,maxZoomReached:k}=Ht(WM,he),{zoomIn:z,zoomOut:N,fitView:O}=hp(),_=()=>{z(),l==null||l()},J=()=>{N(),c==null||c()},U=()=>{O(a),d==null||d()},W=()=>{x.setState({nodesDraggable:!E,nodesConnectable:!E,elementsSelectable:!E}),h==null||h(!E)},F=v==="horizontal"?"horizontal":"vertical";return Q.jsxs(Kd,{className:be(["react-flow__controls",F,g]),position:w,style:n,"data-testid":"rf__controls","aria-label":S,children:[t&&Q.jsxs(Q.Fragment,{children:[Q.jsx(Lf,{onClick:_,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:k,children:Q.jsx(XM,{})}),Q.jsx(Lf,{onClick:J,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:I,children:Q.jsx(KM,{})})]}),e&&Q.jsx(Lf,{className:"react-flow__controls-fitview",onClick:U,title:"fit view","aria-label":"fit view",children:Q.jsx(FM,{})}),i&&Q.jsx(Lf,{className:"react-flow__controls-interactive",onClick:W,title:"toggle interactivity","aria-label":"toggle interactivity",children:E?Q.jsx(QM,{}):Q.jsx(ZM,{})}),y]})}YT.displayName="Controls";const tB=et.memo(YT);function eB({id:n,x:t,y:e,width:i,height:a,style:l,color:c,strokeColor:d,strokeWidth:h,className:g,borderRadius:y,shapeRendering:w,selected:v,onClick:S}){const{background:x,backgroundColor:E}=l||{},I=c||x||E;return Q.jsx("rect",{className:be(["react-flow__minimap-node",{selected:v},g]),x:t,y:e,rx:y,ry:y,width:i,height:a,style:{fill:I,stroke:d,strokeWidth:h},shapeRendering:w,onClick:S?k=>S(k,n):void 0})}const nB=et.memo(eB),rB=n=>n.nodes.map(t=>t.id),Um=n=>n instanceof Function?n:()=>n;function iB({nodeStrokeColor:n,nodeColor:t,nodeClassName:e="",nodeBorderRadius:i=5,nodeStrokeWidth:a,nodeComponent:l=nB,onClick:c}){const d=Ht(rB,he),h=Um(t),g=Um(n),y=Um(e),w=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return Q.jsx(Q.Fragment,{children:d.map(v=>Q.jsx(aB,{id:v,nodeColorFunc:h,nodeStrokeColorFunc:g,nodeClassNameFunc:y,nodeBorderRadius:i,nodeStrokeWidth:a,NodeComponent:l,onClick:c,shapeRendering:w},v))})}function sB({id:n,nodeColorFunc:t,nodeStrokeColorFunc:e,nodeClassNameFunc:i,nodeBorderRadius:a,nodeStrokeWidth:l,shapeRendering:c,NodeComponent:d,onClick:h}){const{node:g,x:y,y:w,width:v,height:S}=Ht(x=>{const E=x.nodeLookup.get(n),{x:I,y:k}=E.internals.positionAbsolute,{width:z,height:N}=fs(E);return{node:E,x:I,y:k,width:z,height:N}},he);return!g||g.hidden||!Fx(g)?null:Q.jsx(d,{x:y,y:w,width:v,height:S,style:g.style,selected:!!g.selected,className:i(g),color:t(g),borderRadius:a,strokeColor:e(g),strokeWidth:l,shapeRendering:c,onClick:h,id:g.id})}const aB=et.memo(sB);var oB=et.memo(iB);const lB=200,uB=150,cB=n=>!n.hidden,fB=n=>{const t={x:-n.transform[0]/n.transform[2],y:-n.transform[1]/n.transform[2],width:n.width/n.transform[2],height:n.height/n.transform[2]};return{viewBB:t,boundingRect:n.nodeLookup.size>0?Kx(ec(n.nodeLookup,{filter:cB}),t):t,rfId:n.rfId,panZoom:n.panZoom,translateExtent:n.translateExtent,flowWidth:n.width,flowHeight:n.height}},dB="react-flow__minimap-desc";function GT({style:n,className:t,nodeStrokeColor:e,nodeColor:i,nodeClassName:a="",nodeBorderRadius:l=5,nodeStrokeWidth:c,nodeComponent:d,bgColor:h,maskColor:g,maskStrokeColor:y,maskStrokeWidth:w,position:v="bottom-right",onClick:S,onNodeClick:x,pannable:E=!1,zoomable:I=!1,ariaLabel:k="React Flow mini map",inversePan:z,zoomStep:N=10,offsetScale:O=5}){const _=se(),J=et.useRef(null),{boundingRect:U,viewBB:W,rfId:F,panZoom:nt,translateExtent:ft,flowWidth:ot,flowHeight:ct}=Ht(fB,he),R=(n==null?void 0:n.width)??lB,j=(n==null?void 0:n.height)??uB,C=U.width/R,B=U.height/j,H=Math.max(C,B),q=H*R,D=H*j,P=O*H,tt=U.x-(q-U.width)/2-P,rt=U.y-(D-U.height)/2-P,ut=q+P*2,gt=D+P*2,dt=`${dB}-${F}`,yt=et.useRef(0),pt=et.useRef();yt.current=H,et.useEffect(()=>{if(J.current&&nt)return pt.current=DI({domNode:J.current,panZoom:nt,getTransform:()=>_.getState().transform,getViewScale:()=>yt.current}),()=>{var Ot;(Ot=pt.current)==null||Ot.destroy()}},[nt]),et.useEffect(()=>{var Ot;(Ot=pt.current)==null||Ot.update({translateExtent:ft,width:ot,height:ct,inversePan:z,pannable:E,zoomStep:N,zoomable:I})},[E,I,z,N,ft,ot,ct]);const Ct=S?Ot=>{var qt;const[bt,Yt]=((qt=pt.current)==null?void 0:qt.pointer(Ot))||[0,0];S(Ot,{x:bt,y:Yt})}:void 0,Vt=x?et.useCallback((Ot,bt)=>{const Yt=_.getState().nodeLookup.get(bt);x(Ot,Yt)},[]):void 0;return Q.jsx(Kd,{position:v,style:{...n,"--xy-minimap-background-color-props":typeof h=="string"?h:void 0,"--xy-minimap-mask-background-color-props":typeof g=="string"?g:void 0,"--xy-minimap-mask-stroke-color-props":typeof y=="string"?y:void 0,"--xy-minimap-mask-stroke-width-props":typeof w=="number"?w*H:void 0,"--xy-minimap-node-background-color-props":typeof i=="string"?i:void 0,"--xy-minimap-node-stroke-color-props":typeof e=="string"?e:void 0,"--xy-minimap-node-stroke-width-props":typeof c=="string"?c:void 0},className:be(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:Q.jsxs("svg",{width:R,height:j,viewBox:`${tt} ${rt} ${ut} ${gt}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":dt,ref:J,onClick:Ct,children:[k&&Q.jsx("title",{id:dt,children:k}),Q.jsx(oB,{onClick:Vt,nodeColor:i,nodeStrokeColor:e,nodeBorderRadius:l,nodeClassName:a,nodeStrokeWidth:c,nodeComponent:d}),Q.jsx("path",{className:"react-flow__minimap-mask",d:`M${tt-P},${rt-P}h${ut+P*2}v${gt+P*2}h${-ut-P*2}z
        M${W.x},${W.y}h${W.width}v${W.height}h${-W.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}GT.displayName="MiniMap";const hB=et.memo(GT);function gB({nodeId:n,position:t,variant:e=Eu.Handle,className:i,style:a={},children:l,color:c,minWidth:d=10,minHeight:h=10,maxWidth:g=Number.MAX_VALUE,maxHeight:y=Number.MAX_VALUE,keepAspectRatio:w=!1,shouldResize:v,onResizeStart:S,onResize:x,onResizeEnd:E}){const I=ET(),k=typeof n=="string"?n:I,z=se(),N=et.useRef(null),O=e===Eu.Line?"right":"bottom-right",_=t??O,J=et.useRef(null);et.useEffect(()=>{if(!(!N.current||!k))return J.current||(J.current=HI({domNode:N.current,nodeId:k,getStoreItems:()=>{const{nodeLookup:nt,transform:ft,snapGrid:ot,snapToGrid:ct,nodeOrigin:R,domNode:j}=z.getState();return{nodeLookup:nt,transform:ft,snapGrid:ot,snapToGrid:ct,nodeOrigin:R,paneDomNode:j}},onChange:(nt,ft)=>{const{triggerNodeChanges:ot,nodeLookup:ct,parentLookup:R,nodeOrigin:j}=z.getState(),C=[],B={x:nt.x,y:nt.y},H=ct.get(k);if(H&&H.expandParent&&H.parentId){const q=H.origin??j,D=nt.width??H.measured.width??0,P=nt.height??H.measured.height??0,tt={id:H.id,parentId:H.parentId,rect:{width:D,height:P,...Zx({x:nt.x??H.position.x,y:nt.y??H.position.y},{width:D,height:P},H.parentId,ct,q)}},rt=dp([tt],ct,R,j);C.push(...rt),B.x=nt.x?Math.max(q[0]*D,nt.x):void 0,B.y=nt.y?Math.max(q[1]*P,nt.y):void 0}if(B.x!==void 0&&B.y!==void 0){const q={id:k,type:"position",position:{...B}};C.push(q)}if(nt.width!==void 0&&nt.height!==void 0){const q={id:k,type:"dimensions",resizing:!0,setAttributes:!0,dimensions:{width:nt.width,height:nt.height}};C.push(q)}for(const q of ft){const D={...q,type:"position"};C.push(D)}ot(C)},onEnd:()=>{const nt={id:k,type:"dimensions",resizing:!1};z.getState().triggerNodeChanges([nt])}})),J.current.update({controlPosition:_,boundaries:{minWidth:d,minHeight:h,maxWidth:g,maxHeight:y},keepAspectRatio:w,onResizeStart:S,onResize:x,onResizeEnd:E,shouldResize:v}),()=>{var nt;(nt=J.current)==null||nt.destroy()}},[_,d,h,g,y,w,S,x,E,v]);const U=_.split("-"),W=e===Eu.Line?"borderColor":"backgroundColor",F=c?{...a,[W]:c}:a;return Q.jsx("div",{className:be(["react-flow__resize-control","nodrag",...U,e,i]),ref:N,style:F,children:l})}et.memo(gB);function mB(){const{root:n,update:t,loading:e,error:i}=pC(),a=et.useCallback(c=>{t(d=>{for(const h of c)switch(h.type){case"add":d.nodes.push(h.item);break;case"replace":{const g=d.nodes.findIndex(y=>y.id===h.id);d.nodes[g]=h.item}break;case"remove":{const g=d.nodes.findIndex(y=>y.id===h.id);d.nodes.deleteByID(d.nodes[g].getID())}break;case"position":{const g=d.nodes.findIndex(y=>y.id===h.id);d.nodes[g].position=h.position}break;case"select":{const g=d.nodes.findIndex(y=>y.id===h.id);d.nodes[g].selected=h.selected}break}})},[t]),l=et.useCallback(c=>{t(d=>{for(const h of c)switch(h.type){case"add":d.edges.push(h.item);break;case"replace":{const g=d.edges.findIndex(y=>y.id===h.id);d.edges[g]=h.item}break;case"remove":{const g=d.edges.findIndex(y=>y.id===h.id);d.edges.deleteByID(d.edges[g].getID())}break;case"select":{const g=d.edges.findIndex(y=>y.id===h.id);d.edges[g].selected=h.selected}break}})},[t]);return e?Q.jsx("div",{children:"Loading..."}):i?Q.jsxs("div",{children:["Error: ",i.message]}):Q.jsx("div",{style:{position:"fixed",inset:0,height:"100vh"},children:Q.jsxs(HM,{nodes:n.nodes,edges:n.edges,onNodesChange:a,onEdgesChange:l,fitView:!0,children:[Q.jsx(GM,{gap:10,size:1,color:"silver"}),Q.jsx(tB,{orientation:"horizontal",showInteractive:!1}),Q.jsx(hB,{})]})})}const yB=[{id:"1",type:"input",data:{label:"Multiplayer"},position:{x:250,y:25}},{id:"2",data:{label:"Graph"},position:{x:100,y:125}},{id:"3",data:{label:"React Flow"},position:{x:250,y:225},style:{borderColor:"#FF0072"}},{id:"4",type:"output",data:{label:"Yorkie"},position:{x:100,y:325},style:{borderColor:"#944DFA"}}],pB=[{id:"e1-2",source:"1",target:"2",type:"smoothstep"},{id:"e2-3",source:"2",target:"3",label:"with"},{id:"e3-4",source:"3",target:"4",label:"and",animated:!0}],vB={nodes:yB,edges:pB};oN.createRoot(document.getElementById("root")).render(Q.jsxs(et.StrictMode,{children:[Q.jsx(hC,{apiKey:"D6sd9E5ehtXBssmeRZ4QQP",rpcAddr:"https://api.yorkie.dev",children:Q.jsx(yC,{docKey:`react-flow-${new Date().toISOString().substring(0,10).replace(/-/g,"")}`,initialRoot:vB,children:Q.jsx(mB,{})})}),","]}));
